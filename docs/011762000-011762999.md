# StackOverflow 问答 11762000-11762999

# c# - 如何在不手动构建列的情况下将下拉列表绑定到 datagridview

> ID：11762000
> 
> 赞同：2
> 
> 时间：2012-08-01T14:59:26.230
> 
> 标签：c#, winforms, datagridview

我正在尝试将我的一个字段设置为 datagridview 上的下拉列表，而无需大量手动代码。目前，我正在使用 AutoGenerateColumns = false 并创建列并一一添加。

```
dataGridView3.AutoGenerateColumns = false;
DataGridViewComboBoxColumn reasonCode = 
    new DataGridViewComboBoxColumn() {
                                       DataPropertyName = "REASON", 
                                       HeaderText = "Reason Code" 
                                     };
dataGridView3.Columns.Add(reasonCode); 
```

这可行，但在我添加列时维护起来可能很乏味。当我让控件自动生成列时，这很简单，但我不知道如何让它显示组合框。

问题是：有没有办法配置正在绑定的数据表，以便 datagridview 可以知道如何显示我的组合框？或者有没有更有效的方法来做到这一点？

几乎我所有的列都能完美地自动生成，正是这个组合框迫使我手动创建所有列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:12:53.410

您可以尝试手动添加您的`DataGridViewComboBoxColumn`手动*然后*设置`AutoGenerateColumns`为 true 以生成剩余的列。不过我还没有测试过，所以我不知道它是否能解决你的问题。

来自[MSDN - DataGridView.AutoGenerateColumns 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.autogeneratecolumns.aspx)：

> 当此属性设置为 true 并且设置或更改 DataSource 或 DataMember 属性时，会自动生成列。 **当 AutoGenerateColumns 属性从 false 更改为 true 时，也可以自动生成列。**如果此属性为 true 并且 DataSource 发生更改，因此存在与先前 DataSource 值的列不匹配的列，则不匹配列中的数据将被丢弃。如果未设置 DataSource 或 DataMember 属性，则忽略此属性。

（重点补充）

# .net - 每个目标环境的 Team City 构建代理？

> ID：11762003
> 
> 赞同：1
> 
> 时间：2012-08-01T14:59:31.950
> 
> 标签：.net, teamcity, build-agent

我是整个 CI 流程的新手，我的任务是研究解决方案。所以这对某些人来说可能听起来像一个愚蠢的问题......

所以，我一直在研究 Team City（专业版），想知道是否有必要根据目标环境设置单独的构建代理。

我们的应用程序组合包括一些在 Windows Server 2003 机器上运行的旧版 Web 应用程序。最近开发的较新的 Web 应用程序在 Windows Server 2008 R2 上运行。当然，我们为每个环境都有单独的测试箱。

我应该为每个服务器 o/s 设置一个构建代理吗？（即 2003 年和 2008 年各一份）。我想看到构建输出应该准备好生产发布是有意义的。

**编辑：**开发 .NET 应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:34:31.793

如果您的所有应用程序都在 .NET 上运行，那么在哪台机器上编译它们并不重要。（假设您所针对的 .net 框架在 2003 年和 2008 年都运行）

因此，在您的情况下，我将在 2008 年运行一个构建代理，它将为您的所有环境生成构建。

多构建代理的目的是将您的构建分发到多台机器上，如果您有许多产品和频繁签入，这将非常有用。对于简单的初始设置，最好有 1 个构建代理。

现在，作为构建/部署过程的一部分，您可以让构建代理将构建部署到 2003 和 2008 机器。TC 不适用于部署，但如果所有机器都在同一个 LAN 上，它仍然可以很容易地用于部署构建。

# eclipse - 防止eclipse清理生成的文件

> ID：11762004
> 
> 赞同：1
> 
> 时间：2012-08-01T14:59:33.267
> 
> 标签：eclipse

所以我看到了这个

[如何防止 Eclipse 为每个构建清理 bin 文件夹？](https://stackoverflow.com/questions/6349519/eclipse-how-to-prevent-it-from-cleaning-the-bin-folder-every-build)

但我有一个不同的问题。（即，如果它只是资源，我可以使用这种能力每次将它们复制到适当的位置）。

我正在生成文件（ala sqlite 数据库）并且正在清理它们。我可以移动它们（可能最终会移动它们），但现在我希望它们在这个结构中用于开发目的。

有没有办法阻止eclipse删除这些文件（它似乎并不总是发生，也许只是因为构建错误？），因为我真的需要它们坚持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:08:54.873

这是针对不同问题的解决方案，但我认为在这里会有所帮助；）

生成资源文件（包括数据库文件）时，不要将它们放入`/bin`文件夹中，特别是如果它们不会随着每次构建而更改，请将它们放入文件夹的子`/src`文件夹中。

我已经为 web 服务存根、版本号和其他资源这样做了，并将其视为最佳实践。

但是，如果您决定坚持自己的做法，请查看 eclipse 生成的`build.xml`文件并对其进行修改，使 ant 仅删除您不想要的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:11:49.733

我认为答案在于偏好

Java->Compiler-Building->清理项目时清理输出文件夹（即未设置，希望很快就会发现）。

# sql - 为数据库设计联系人/公司/地址表

> ID：11762018
> 
> 赞同：1
> 
> 时间：2012-08-01T15:00:16.277
> 
> 标签：sql

试图设计数据库的一部分来保存地址、公司和联系人。我有一个设计，由于设计不佳，我现在已经完成了“清理”它的工作。

买了一份 Joe Celko 的 SQL 程序员风格作为参考，因为我是从编程角度来的，所以我最终得到了......

```
Addresses
street_1_adr varchar(80) primary key
street_2_adr varchar(80)
street_3_adr varchar(80)
zip_code varchar(10) foreign key/primary key > Regions.zip_code 
```

检查以确保所有地址都是唯一的，以防止重复。

```
Regions
city varchar(80)
region varchar(80)
zip_code varchar(10) primary key
country_nbr integer foreign key/primary key > Countries.country_nbr 
```

检查以确保所有区域都是唯一的，以防止重复。

```
Countries
country_nbr integer primary key
country_nm varchar(80)
country_code char(3) 
```

进行检查以确保所有信息仅存在一条记录。

```
Companies
company_nm varchar(80) primary key
street_1_adr varchar(80) foreign key > Addresses.street_1_adr
zip_code varchar(10) foreign key > Addresses.zip_code
Extra information 
```

进行检查以确保在指定地址只能存在一个具有该名称的公司

```
Contacts
company_nm varchar(80) primary key/foreign key > Companies.company_nm
first_nm varchar(80) primary key
last_nm varchar(80) primary key
Extra information 
```

但这意味着，例如，如果我想将订单挂接到联系人上，我需要使用三个字段来完成。

这看起来正确还是我完全错过了重点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:19:57.390

首先，我建议对主键使用整数值（如果使用 mysql auto_increment 也是一个方便的功能）

在不同的表中使用您的 PK（主键）作为 FK（外键）时，使用相同的数据类型并且不要保存名称。即使您可以简单地保存公司的 ID 并通过加入选择获取名称，您似乎也将 company_name 保存在“联系人”中。

在您的情况下没关系，因为名称是主键（varchar），但是当您两次获得相同的公司名称时会发生什么（例如 Mc Donalds 有多个位置）

ERP 系统部署这些结构主要是或接近于：

公司（ID 和名称） 站点（ID、名称、FK 公司、地址等附加信息）

地址（主要是在网站中直接引用，有时是网站的一部分）

地区+国家（都是“基本”数据，地址表中ID引用）

company 表大多只保存公司的 ID 和名称。站点表（与公司的外键关系）为“公司”提供其地址、法律信息等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T17:47:42.853

您可能希望通过允许将许多地址和联系人添加到公司来验证您的设计。[您要做的是使用联结表（http://en.wikipedia.org/wiki/Junction_table）](http://en.wikipedia.org/wiki/Junction_table%29)创建多对多关系

```
Company
--------------
CompanyID (PK)
...

Address
--------------
AddressID (PK)
...

CompanyAddress
--------------
CompanyID (PK)
AddressID (PK) 
```

CompanyAddress 表将允许您为每个公司拥有多个地址。您也可以对联系人执行相同操作，具体取决于联系人是否与公司或地址相关联。下面是另一个关于如何创建多对多关系的链接。

[http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:14:28.213

几个想法：

首先，一个邮政编码可以代表同一州的多个城市/城镇。此外，一个城市可以有多个邮政编码。

通常您找不到与实体分开的地址表。换句话说，您的公司表应该包含完整的地址。

表的主键通常是唯一标识符或与实际名称分开的自动递增数字。这样，如果公司或联系人更改其名称，或者输入并更正了拼写错误，则无需将更改级联到其他表。

# java - 在java中使用c++“.lib”文件

> ID：11762019
> 
> 赞同：1
> 
> 时间：2012-08-01T15:00:18.570
> 
> 标签：java, c++, dll, android-ndk, java-native-interface

有没有办法使用 android NDK 或 Java JNI 将 C++“.lib”导入 java？我没有创建 dll 的源代码。我知道这将提供一种导入java的方法，但是我还没有找到将“.lib”文件转换为.dll的方法。

提前感谢您的任何想法。

注意：该库是用 C++ 编译的 windows ".lib"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:05:38.547

您不能将 Windows/MSVC .lib 文件与 Android NDK 一起使用（即使可以，它也是 x86 并且大多数 Android 设备都是 ARM）。您将需要从源代码编译库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:08:14.547

您可以开始查看 Android 工具附带的众多示例中的 2 个，特别查看有关使用 Android NDK 附带的一些外部 C/C++ 库的 2 个示例。

无论如何，您不能在 ARM 上运行 X86 汇编代码，反之亦然，因此您可以使用外部 C++ 的事实不会绕过您的库对目标体系结构的限制，要做到这一点，您最好拥有这些 C++ 库的源代码.

# sql - 使用 Entity Framework Code First 创建数据库模型的问题

> ID：11762027
> 
> 赞同：2
> 
> 时间：2012-08-01T15:00:57.103
> 
> 标签：sql, asp.net-mvc, ef-code-first

我正在尝试使用 Code First 创建数据库模型，而不是创建数据库本身。也就是说，我的 DBA 设置了一个空数据库，我有权为其创建表，但不能创建整个数据库。但是，每当我尝试使用 Code First 设置模型时，都会收到以下错误：

```
CREATE DATABASE permission denied in database 'master'. 
```

这只是 Code First 的工作方式，还是有一些方法可以修改现有数据库？

PS——这是连接字符串——

```
<add name="HoursDb"         
     connectionString="Data Source=barksql.cedarville.edu;
                       Initial Catalog=Hours;
                       persist security info=True;
                       User ID=hours;
                       password=************;
                       multipleactiveresultsets=True;
                       App=EntityFramework"
     providerName="System.Data.SqlClient" /> 
```

## 更新

根据@devdigital 的要求——

这是上下文类：

```
using System.Data.Entity;
using ....Models;
using System.Data.Entity.ModelConfiguration.Conventions;

namespace LibraryAdmin.DAL
{
    public class HoursDb : DbContext
    {
        public DbSet<DaySpec> DaySpecs { get; set; }
        public DbSet<WeekSpec> WeekSpecs { get; set; }
        public DbSet<ExceptionHoursSet> ExceptionHoursSets { get; set; }
        public DbSet<Schedule> Schedules { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    }
} 
```

至于将数据库映射到连接，我假设它是通过约定完成的，因为 HoursDb 类名与连接字符串名称匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:47:14.667

Entity Framework Code First 似乎以两种方式处理数据库模型更改：其一，它丢弃旧数据库并重新创建一个新数据库；或二，直到用户手动修改它才会保留内容，正如@devdigital 到[EF 4.1 CF 的链接所确认的那样：数据库 'master' 中的 CREATE DATABASE 权限被拒绝](https://stackoverflow.com/questions/5584546/ef-4-1-cf-create-database-permission-denied-in-database-master)。Slauma 建议使用 Database.SetInitializer(null); 确保在创建后不会删除生产数据库是很好的，但不会像我试图做的那样从空数据库中创建表结构。考虑到这一点，我的 DBA 授予我创建访问权限，因为他希望我们不必手动创建每个表，所以这不再是问题。

P.S. -- the database drop I mentioned came as a result of using one of the drop initialization strategies, probably DropCreateDatabaseAlways. Glad to know it was doing it's job.

# android - 我键入时的android EditText格式

> ID：11762030
> 
> 赞同：1
> 
> 时间：2012-08-01T15:01:12.407
> 
> 标签：android, onchange

我有这个问题，我如何在编辑文本上键入时格式化显示？例如，如果我输入 5，它将格式化为所需的货币。我可以在 onFocusChangeListener 上毫无问题地格式化 edittext 中的文本，但客户端需要 onchange。

这里有一些代码：

```
 <code>
    inputText = (EditText) findViewById(R.id.et_compare_rate_saving);
    inputText.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2)               {
            //System.out.println("beforeTextChanged::: => "+charSequence);
        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
            //System.out.println("onTextChanged::: => "+charSequence);
        }

        @Override
        public void afterTextChanged(Editable editable) {
            if(!editable.toString().isEmpty()){
                String amount = LO.removeSeparators(editable.toString(), getLocaleFormat());
                String newFormat = LO.compareRatesFormatting(Double.valueOf(amount),getLocaleFormat());
                System.out.println("afterTextChanged::: => "+newFormat);
                inputText.setText(newFormat);
            }
            //System.out.println("afterTextChanged::: => "+editable.toString());
        }
    });

   </code> 
```

我有一个stackoverflow错误

```
 <code>
    08-01 22:37:32.724: ERROR/AndroidRuntime(1566): FATAL EXCEPTION: main
    java.lang.StackOverflowError
    at android.view.View.addFocusables(View.java:4311)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:731)
    at android.view.ViewGroup.addFocusables(ViewGroup.java:712)
    at android.view.View.getFocusables(View.java:4269)
    at android.view.FocusFinder.findNextFocus(FocusFinder.java:114)
    at android.view.FocusFinder.findNextFocus(FocusFinder.java:98)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:570)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:572)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:572)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:572)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:572)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:572)
    at android.view.ViewGroup.focusSearch(ViewGroup.java:572)
    at android.view.View.focusSearch(View.java:4192)
    at android.widget.TextView.onCreateInputConnection(TextView.java:4936)
    at android.view.inputmethod.InputMethodManager.startInputInner(InputMethodManager.java:964)
    at android.view.inputmethod.InputMethodManager.restartInput(InputMethodManager.java:919)

    </code> 
```

任何想法？干杯。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:46:14.277

为了更清楚地说明这种情况，[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)的文档明确指出在 afterTextChanged 中更改文本时应小心：

> public abstract void afterTextChanged (Editable s)
> 
> 调用此方法是为了通知您，在 s 中的某处，文本已更改。从这个回调中对 s 进行进一步的更改是合法的，但**请注意不要让自己陷入无限循环，因为您所做的任何更改都会导致再次递归调用此方法。**（您不会被告知更改发生的位置，因为其他 afterTextChanged() 方法可能已经进行了其他更改并使偏移量无效。但是如果您需要在这里知道，您可以在 onTextChanged 中使用 setSpan(Object, int, int, int) (CharSequence, int, int, int) 标记您的位置，然后从此处查找跨度结束的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:05:45.417

你处于一个无限循环中，这就是你得到stackoverflow的原因。每次文本更改时，都会调用您的 afterTextChanged，这会更改文本并导致再次调用它

# wpf - 执行程序集和 mef 模块物理分离的 Mef 驱动应用程序的 Wpf 程序集参考失败

> ID：11762036
> 
> 赞同：1
> 
> 时间：2012-08-01T15:01:28.240
> 
> 标签：wpf, .net-assembly, assembly-resolution

我们有一个应用程序和一个 Visual Studio 加载项，它们都从位于用户计算机上其他位置的 Mef 程序集加载其（模块化）功能，而不是应用程序本身安装。

现在我们的一位开发人员使用 Wpf（使用 Prism/System.Windows.Interactivity）为新模块创建 UI 组件，但不幸的是，现在模块/Xaml Parser 抛出*XamlParseException*说它*无法加载 System.Windows.Interactivity.dll*和查看融合日志基本上表明它寻找/所在的路径是托管 .exe 运行的路径，而不是 Mef 模块（包含 wpf / xaml ui）所在的路径。

System.Windows.Interactivity.dll 实际上驻留在 Mef 的模块/程序集目录中（在该 mef 模块/程序集中引用并将本地复制设置为 true）所以我想知道我们将如何为 System.Windows.Interactivity 指定命名空间正确地低于所以程序集加载实际上也在程序集的目录中查找？

```
<UserControl x:Class="TestExplorer.Modules.DocumentChecks.DocumentChecksMainWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Command="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4" 
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:Converter="clr-namespace:TestExplorer.Modules.DocumentChecks.Converter"
             xmlns:TreeView="clr-namespace:TestExplorer.Modules.DocumentChecks.TreeView" mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="500"> 
```

这里有一个条目存在完全相同的问题（请参阅[Prism 程序集参考失败： System.Windows.Interactivity](https://stackoverflow.com/questions/9650778/prism-assembly-reference-failure-system-windows-interactivity)），但是添加 prism/system.windows.interactivity 作为对托管应用程序的引用的解决方案只是一种解决方法，充其量 - 它基本上破坏了应用程序的模块化目的（别管我们不能将 system.windows.interactivity 部署到 devenv.exe 的位置，以防用户使用我们的 Visual Studio Addin.. 并且 devenv.exe 是那里的托管进程） .

# python - 具有某些路由缓存代理的简单 Python HTTP 服务器

> ID：11762038
> 
> 赞同：1
> 
> 时间：2012-08-01T15:01:33.530
> 
> 标签：python, http, proxy, python-3.x

我喜欢在 Python3 中开发一个简单的 HTTP，它基本上应该支持 3 种不同的行为：

*   通过根文件夹的相对路径加载本地文件，例如 myhost/static/index.html
*   镜像远程 URL 并将它们映射到本地 URL，例如 myhost/google/* => google.com/*（带有 HTTP/HTTPS、标头支持和可选的本地缓存）
*   支持特定路由上的动态结果，例如 myhost/javascript/mymodule.js（通过例如 Uglify 压缩 mymodule.js 并返回结果）

正在考虑使用 Tornado 或 CheeryPy，但还没有运气来实现代理部分的最简单方法，而无需自己完成所有操作。

建议高度赞赏。

# jquery - Jquery 验证什么都不做？

> ID：11762039
> 
> 赞同：2
> 
> 时间：2012-08-01T15:01:37.087
> 
> 标签：jquery, jquery-plugins, jquery-validate

我已经玩了几天 Jquery Validate 了，但我似乎无法让它真正验证任何东西。这个想法是我有一个通过 AJAX 执行其 CRUD 操作的表单，但在我允许 AJAX 操作之前，我想触发验证，并且只有在一切正常的情况下才允许发送数据。但是由于某种原因，无论数据是否有效，数据都会被发送，没有收到任何萤火虫错误或任何表明问题的东西。

这是我的代码（在一个单独的文件中，但之前包含 Jquery 和验证文件）：

规则和消息：

```
var rules = {

id: {required: true,number: true,minlength: 9,maxlength: 9},
forename: {required: true,maxlength: 255},
surname: {required: true,maxlength: 255},    
addr1: {required: true,maxlength: 255},
addr2: {required: true,maxlength: 255},
addr3: {required: true,maxlength: 255},    
addr4: {required: true,maxlength: 255},
postcode: {required: true,postUK: true},    
pemail: {required: true,email:true},
wemail: {required: true,email:true},
hphone: {required: true, phoneUK: true},
wphone:{required:true,phoneUK:true},    
mphone: {required: true,phoneUK: true}};

var messages = {
id: {
    required: 'The student id field cannot be empty ',
    number: 'The id must consist of whole numbers only ',
    minlength: $.validator.format("Your id length of {0} is not right must be at least 9"),
    maxlength: $.validator.format("Your id length of {0} is not right must be no more than 9")
},

forename: {
    required: 'The forename cannot be empty',
    maxlength: 'The forename cannot be more than 255 charters'   
},

surname: {
    required: 'The surname field cannot be empty',
    maxlength: 'The forename cannot be more than 255 charters'     
},

addr1: {
    required: 'The address 1 field cannot be empty',
    maxlength: 'The address 1 cannot be more than 255 charters' 
},

addr2: {
    required: 'address 2 field cannot be empty',
    maxlength: 'address 2 cannot be more than 255 charters' 
},

addr3: {
    required: 'address 3 field cannot be empty',
    maxlength: 'address 3 cannot be more than 255 charters' 
},

addr4: {
    required: 'address 4 field cannot be empty',
    maxlength: 'address 4 cannot be more than 255 charters' 
},

postcode: {
    required: 'The post code field cannot be empty',
    postUK: 'The provided post code is not in the correct format'  
},

wemail: {
    required:' work email field cannot be empty',
    email:'The work email address provided is not a valid email address '
},

pemail: {
    required: 'personal email field cannot be empty',
    email: 'The personal email address provided is not a valid email address'
},

hphone: {
    required: 'home phone number field cannot be empty',
    phoneUK: 'The home phone number provided is not valid'
},

mphone: {
    required: 'mobile phone number field cannot be empty',
    phoneUK: 'The mobile phone number provided is not valid'
},

wphone: {
    required: 'work phone number field cannot be empty',
    phoneUK: 'The home phone number provided is not valid'
}}; 
```

验证设置：（添加了几种方法来检查有效的英国电话和邮件）

```
jQuery.validator.addMethod('phoneUK', function(value, element) { 
    return this.value.length > 9 &&
    value.match(/^(((\+44)? ?(\(0\))? ?)|(0))( ?[0-9]{3,4}){3}$/);
});

jQuery.validator.addMethod('postUK', function(value, element) { 
    var regex =  /[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][ABD-HJLNP-UW-Z]{2}/i;
    return regex.test(value);
}); 
```

实际验证：

```
 $('#detailsForm').validate({
        rules: rules,
        messages: messages,
        highlight: function(element) {
            $(element).addClass('errorInput');
        },
        unhighlight: function (element) {
            $(element).removeClass('errorInput');
        }
    });

     var valid = $('#detailsForm').valid();  // echo of this always seems to return true ??   

 if (!valid ) {
        alert ("The data you have inputted contains errors which have been highlighted ");
        return;
    }

    else { // do Ajax request this seems to be triggered no matter how I try to validate. 
```

抱歉，它很长，但有人可以帮忙吗？

提前致谢

**更新：**请求的页面 HTML：

```
 <form type ="text" id ="detailsForm"   >

                        <div id ="row1" class="row" >
                            <label for='id'> ID: 
                                <br/>
                <input id ="id" name ="id" class="standardInput" />
                            </label>

                            <label for='forename'> Forename:
                                <br/>
                                <input type ="text" id="forename" name="forename" class="standardInput"/> 
                            </label>

                            <label for='surname' > Surname:
                                <br/>
                                <input type ="text" id ="surname" name ="surname" class="standardInput"/>
                            </label>

                            <label for ="modeID"> Mode ID:
                                <br/>
                                <select id ="modeID" name ="modeID" class="standardInput">
                                    <option value ="123">123</option>
                                    <option value ="153">153</option>
                                    <option value ="44">44</option>
                                </select>
                            </label>

                            <label for ="routeID"> Route ID: 
                                <br/>
                                <select id ="routeID" name ="routeID" class="standardInput">
                                    <option value ="g12">g12</option>
                                    <option value ="g13">g13 2</option>
                                    <option value ="H1">H1</option>
                                </select>
                            </label>
                        </div>

                        <div id ="row2"> 
                            <label for ="addr1"> Address Line 1:
                                <br/>
                                <input type ="text" id="addr1" name ="addr1" class="standardInput"/> 
                            </label>  

                            <label for ="addr2"> Address Line 2:
                                <br/>
                                <input type ="text" id="addr2" name ="addr2" class="standardInput"/> 
                            </label> 

                            <label for ="addr3"> Address Line 3:
                                <br/>
                                <input type ="text" id="addr3" name ="addr3" class="standardInput"/> 
                            </label> 

                            <label for ="addr4"> Address Line 4:
                                <br/>
                                <input type ="text" id="addr4" name ="addr4" class="standardInput"/>
                            </label>

                            <label for ="postcode"> Post code:
                                <br/>
                                <input type ="text" id="postcode" name ="postcode" class="standardInput"/>
                            </label>
                        </div>

                        <div id ="row3" class ="row">

                            <label for ="pemail"> Personal email:
                                <br/>
                                <input type ="text" id="pemail" name="pemail" class="standardInput"/>
                            </label>

                            <label for ="wemail"> Work email:
                                <br/>
                                <input type ="text" id="wemail" name ="wemail" class="standardInput"/>
                            </label>

                            <label for ="wphone"> Work phone No.:
                                <br/>
                                <input type ="text" id="wphone" name ="wphone" class="standardInput"/>
                            </label>

                            <label for ="hphone"> Home phone No.:
                                <br/>
                                <input type ="text" id="hphone" name ="hphone" class="standardInput"/>
                            </label>

                            <label for ="mphone"> Mobile phone No.:
                                <br/>
                                <input type ="text" id="mphone" name ="mphone" class="standardInput"/>
                            </label>
                        </div>
                    </form>
                </div> 
```

**更新 2：**

好的，刚刚意识到 validate 使用名称而不是 id，所以我添加了与所有字段的 id 完全相同的名称，但结果仍然相同，即即使输入了无效数据，验证也会返回 true？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:44:37.180

好的，修好了

将 validate 函数放在它自己的方法中（不是真正的修复，但无论如何都是好的做法），然后创建一个验证器对象并调用其 .form() 方法来验证表单并将布尔值从该方法返回给每个调用方法，请参见以下内容：

```
function validateForm() {

var validator = $('#detailsForm').validate({
            rules: rules,
            messages: messages,
            highlight: function(element) {
                $(element).addClass('errorInput');
            },
            unhighlight: function (element) {
                $(element).removeClass('errorInput');
            }
        });

        var result = validator.form(); return result;} 
```

在 AJAX 函数中：

```
 var valid = validateForm(); 
        alert(valid);

        if (valid === false ) {
            alert ('The information that has been input during the addition contains errors that have been highlighted');
            return;
        } else {} // do AJAX request 
```

实际上是一个非常简单的修复，但希望将来可以帮助某人。

# ruby - How can I test if a value is a prime number in Ruby? Both the easy and the hard way?

> ID：11762043
> 
> 赞同：9
> 
> 时间：2012-08-01T15:01:52.923
> 
> 标签：ruby, algorithm

I am trying to create a program that will test whether a value is prime, but I don't know how. This is my code:

```
class DetermineIfPrime
def initialize (nth_value)
@nth_value = nth_value
primetest
end

def primetest
  if Prime.prime?(@nth_value)
   puts ("#{@nth_value} is prime")
  else
   puts ("This is not a prime number.")
  end
rescue Exception
puts ("#{$!.class}")
puts ("#{$!}")
 end
end 
```

And every time I run that it returns this.

```
NameError
uninitialized constant DetermineIfPrime::Prime 
```

I tried other ways to do the job, but I think this is the closest I can get.

I also tried this:

```
class DetermineIfPrime
def initialize (nth_value)
@nth_value = nth_value
primetest
end

 def primetest
 for test_value in [2, 3, 5, 7, 9, 11, 13] do
  if (@nth_value % test_value) == 0
   puts ("#{@nth_value} is not divisible by #{test_value}")
  else
   puts ("This is not a prime number since this is divisible by #{test_value}")
  break
  end
 end
 end
end 
```

Or am I just doing something wrong?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-08-06T03:02:06.717

Ruby 内置了检查数字是否为素数的方法。

```
require 'prime'

Prime.prime?(2)  #=> true
Prime.prime?(4)  #=> false 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-12T16:05:40.440

```
def is_prime?(num)
  return false if num <= 1
  Math.sqrt(num).to_i.downto(2).each {|i| return false if num % i == 0}
  true
end 
```

首先，我们检查 0 和 1，因为它们不是素数。然后我们基本上只是检查每个小于`num`的数字，看看它是否相除。然而，正如[这里](https://stackoverflow.com/questions/5811151/why-do-we-check-upto-the-square-root-of-a-prime-number-to-determine-if-it-is-pri)所解释的，对于每个大于 的平方根的因子`num`，都有一个小于 的因子，因此我们只查看 2 和平方根之间的值。

### 更新

`def is_prime?(num) return if num <= 1 (2..Math.sqrt(num)).none? { |i| (num % i).zero? } end`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-01T07:03:00.433

您收到的错误是因为您`Prime`的代码中不需要，您需要`require Prime`在文件中执行。

[我在这里](http://apidock.com/ruby/Prime)找到了一种很酷的方法来检查一个数字是否是素数：

```
class Fixnum
  def prime?
    ('1' * self) !~ /^1?$|^(11+?)\1+$/
  end
end

10.prime? 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T15:45:00.877

从算法的角度来看，检查一个数字是否为素数可以通过检查所有数字来完成，包括（向下舍入到前一个整数）所述数字的平方根。

例如，检查 100 是否为素数涉及检查直到 10 的所有内容。检查 99 意味着只检查 9。

**另一种思考方式**
每个因子都有一对（3是36的因子，3的对是12）。
该对位于平方根的另一侧（6 的平方根是 36, 3 < 6, 12 > 6）。
因此，通过检查一切直到平方根（并且不超过）确保您检查所有可能的因素。

正如您所做的那样，您可以通过列出要比较的素数来加快速度。如果您有一个相当小的最大限制，您可以只拥有一个素数列表并直接查找该数字是否为素数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-31T19:24:55.650

```
def is_prime?(num)
   Math.sqrt(num).floor.downto(2).each {|i| return false if num % i == 0}
   true
end 
```

大声笑很抱歉复活了一个超级老问题，但这是谷歌出现的第一个问题。

基本上，它遍历可能的除数，使用平方根作为最大数来检查以节省非常大的数字的时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-20T03:30:01.187

为了回答您的问题，虽然您可以使用 Ruby 的 Prime 来解决问题，但我将编写代码自行回答。

考虑到您需要做的就是确定一个小于整数平方根的因子。任何大于整数平方根的数字作为一个因子都需要第二个因子才能将该数字呈现为乘积。（例如，15 的平方根大约是 3.8，所以如果你发现 5 作为一个因子，它只是因子对 3 和 5 的一个因子！！）

```
 def isPrime?(num)
        (2..Math.sqrt(num)).each { |i| return false if num % i == 0}
        true
    end 
```

希望有帮助！！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-25T15:40:56.490

尝试这个

```
def prime?(num)
    2.upto(Math.sqrt(num).ceil) do |i|
        break if num%i==0
        return true if i==Math.sqrt(num).ceil   
    end
    return false
end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-14T12:41:25.587

如果您要使用任何 Prime 函数，则必须包含 Prime 库。然而，这个问题可以在不使用主库的情况下解决。

```
def isPrime?(num)
  (2..Math.sqrt(num)).each { |i|
  if num % i == 0 && i < num
    return false
  end
  }
  true
  end 
```

像这样的东西会起作用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-02T00:00:37.157

（首先回答这个问题：是的，你做错了什么。正如 BLUEPIXY 所提到的，你需要在`require 'prime'`调用的行上方放置某个地方`Prime.prime?`。通常在第 1 行。）

现在，已经给出了很多不使用的答案`Prime.prime?`，我认为对其中一些进行基准测试可能会很有趣，以及我自己的想法可能会有所改进。

### TL;博士

我对几个解决方案进行了基准测试，包括我自己的几个；使用`while`循环并跳过偶数表现最好。

### 测试方法

以下是我从答案中使用的方法：

```
require 'prime'

def prime1?(num)
  return if num <= 1
  (2..Math.sqrt(num)).none? { |i| (num % i).zero? }
end

def prime2?(num)
  return false if num <= 1
  Math.sqrt(num).to_i.downto(2) {|i| return false if num % i == 0}
  true
end

def prime3?(num)
  Prime.prime?(num)
end

def prime4?(num)
  ('1' * num) !~ /^1?$|^(11+?)\1+$/
end 
```

`prime1?`是 AndreiMotinga 的更新版本。是他的原始版本（删除`prime2?`了多余的方法）。是重新启动的，使用库。是 Saurabh 的正则表达式版本（减去猴子补丁）。`each``prime3?``prime``prime4?``Fixnum`

### 更多测试方法

我想到的改进是利用偶数不能是素数的事实，并将它们排除在迭代循环之外。因此，此方法使用该`#step`方法仅迭代奇数，从 3 开始：

```
def prime5?(num)
  return true if num == 2
  return false if num <= 1 || num.even?
  3.step(Math.sqrt(num).floor, 2) { |i| return false if (num % i).zero? }
  true
end 
```

我还认为，看看使用`while`循环的相同算法的“原始”实现如何执行可能会很有趣。所以，这里有一个：

```
def prime6?(num)
  return true if num == 2
  return false if num <= 1 || num.even?
  i = 3
  top = Math.sqrt(num).floor
  loop do
    return false if (num % i).zero?
    i += 2
    break if i >= top
  end
  true
end 
```

### 基准

我对每一个都做了一个简单的基准测试，用质数 67,280,421,310,721 对每个方法的调用进行计时。例如：

```
start = Time.now
prime1? 67280421310721
puts "prime1? #{Time.now - start}"

start = Time.now
prime2? 67280421310721
puts "prime2? #{Time.now - start}"

# etc. 
```

正如我怀疑我必须做的那样，我`prime4?`在大约 60 秒后取消了。`'1'`据推测，将 6.7 万亿以北的内存分配给内存，然后对结果应用正则表达式过滤器需要比 60 秒更长的时间——假设在给定的机器上首先分配必要的内存是可能的。（在我的，似乎没有：我进入`irb`，放入`'1' * 67280421310721`，制作并吃完晚餐，回到计算机，发现`Killed: 9`作为响应。当进程被杀死时，这看起来像是一个`SignalException`提升。）

其他结果是：

> 素数1？3.085434
> 素数2？1.149405
> 素数3？1.236517
> 素数5？0.748564
> 素数6？0.377235

### 一些（暂定的）结论

我认为使用 while 循环的原始解决方案最快也就不足为奇了，因为它可能比其他解决方案更接近幕后发生的事情。不过，它*的*速度比 快三倍`Prime.prime?`，这有点令人惊讶。（在查看文档中的源代码后，情况就不那么好了。对象中有很多花里胡哨的东西`Prime`。）

AndreiMotinga 的更新版本几乎是其原始版本的三倍，这表明该`#none?`方法不是很好，至少在这种情况下是这样。

最后，正则表达式版本可能很酷，但它显然没有太大的实用价值，并且在核心类的猴子补丁中使用它似乎完全可以避免。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-30T17:40:39.343

所以这里的大多数答案都是以稍微不同的方式做同样的事情，这是关于 Ruby 很酷的事情之一，但我是一个相当新的学生（这就是我首先查找这个的原因）所以这里是我的版本在代码中带有注释说明：

```
def isprime n # starting with 2 because testing for a prime means you don't want to test division by 1
  2.upto(Math.sqrt(n)) do |x| # testing up to the square root of the number because going past there is excessive
    if n % x == 0
      # n is the number being called from the program
      # x is the number we're dividing by, counting from 2 up to the square root of the number
      return false # this means the number is not prime
    else
      return true # this means the number is prime
    end 
  end
end 
```

# facebook-graph-api - Facebook：查找旧帖子

> ID：11762045
> 
> 赞同：2
> 
> 时间：2012-08-01T15:01:59.707
> 
> 标签：facebook-graph-api, facebook-fql

我正在寻找使用 FQL 的旧 Facebook 帖子。我试过这个：

```
SELECT actor_id, message, created_time FROM stream
 WHERE source_id = me() and (created_time>date1 and created_time<date2) 
```

但即使和之间的间隔`date1`只有`date2`一天，它也只会返回一小部分帖子。因此，我尝试对它们进行分块，但即使每隔 1 小时，它仍然不能完全获取所有内容，而且我很快就接近了流请求的 600 个查询限制。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:12:10.700

您是否尝试过使用 Graph API？这样的事情应该可以帮助您处理页面： [https ://graph.facebook.com/PAGE_ID/feed?value=1&base_amount=1&limit=25&until=1332873234](https://graph.facebook.com/PAGE_ID/feed?value=1&base_amount=1&limit=25&until=1332873234)

要查询您自己的帖子，网址有点不同： [https://graph.facebook.com/USER_ID/home?value=1&base_amount=1&limit=25&since=1344348794](https://graph.facebook.com/USER_ID/home?value=1&base_amount=1&limit=25&since=1344348794) ",

您可以在此处测试 Graph API 查询： [https ://developers.facebook.com/tools/explorer/?method=GET&path=40796308305%2Ffeed](https://developers.facebook.com/tools/explorer/?method=GET&path=40796308305%2Ffeed)

# android - 使用自定义 TextView 类时的 Classcastexception

> ID：11762047
> 
> 赞同：0
> 
> 时间：2012-08-01T15:02:01.113
> 
> 标签：android, textview, classcastexception

我一直在使用扩展的自定义类（“AutoResizeTextView”） （请参阅[此问题](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)`TextView`中接受的答案）。但是，当尝试初始化此 AutoResizeTextView 时，我得到一个`classcastexception.`

这是一些代码：

**飞溅.java：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    ...
    // Line that causes error ------v
    final AutoResizeTextView appName = (AutoResizeTextView) findViewById(R.id.title_text);

    ...
} 
```

**飞溅.xml：**

```
<TextView
    android:id="@+id/title_text"
    android:gravity="center"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/welcome_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:text="@string/app_name"
    android:textColor="@android:color/white"
    android:textSize="35dp" /> 
```

**日志猫：**

```
08-01 10:43:33.471: E/AndroidRuntime(6433): FATAL EXCEPTION: main
08-01 10:43:33.471: E/AndroidRuntime(6433): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.projects.package.name.Splash}: java.lang.ClassCastException: android.widget.TextView
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.os.Looper.loop(Looper.java:123)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at java.lang.reflect.Method.invoke(Method.java:521)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at dalvik.system.NativeStart.main(Native Method)
08-01 10:43:33.471: E/AndroidRuntime(6433): Caused by: java.lang.ClassCastException: android.widget.TextView
08-01 10:43:33.471: E/AndroidRuntime(6433):     at my.projects.package.name.Splash.onCreate(Splash.java:44)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 10:43:33.471: E/AndroidRuntime(6433):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

我假设由于这个自定义类 extends `TextView`，并且因为`R.id.title_text`是 a `TextView`，所以这会起作用。任何想法出了什么问题？

我尝试过的一些事情：

*   项目 -> 清理
*   重启 Eclipse
*   确保每个文件都存在于代码试图找到它的位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:04:34.400

这是你的问题：

```
<TextView
    android:id="@+id/title_text"
    android:gravity="center"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/welcome_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:text="@string/app_name"
    android:textColor="@android:color/white"
    android:textSize="35dp" /> 
```

而不是 你应该以这种方式`<TextView`表明你的习惯：`TextView`

```
<your.package.AutoResizeTextView 
        android:id="@+id/title_text"
        android:gravity="center"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/welcome_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:text="@string/app_name"
        android:textColor="@android:color/white"
        android:textSize="35dp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:05:02.270

你是`TextView`你的自定义`AutoResizeTextView` 只是在你的xml中改变一点

```
<yourpackagename.AutoResizeTextView
 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    android:id="@+id/title_text"
    android:gravity="center"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/welcome_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:text="@string/app_name"
    android:textColor="@android:color/white"
    android:textSize="35dp" /> 
```

# javascript - Ext JS 4：使用 JavaScript 将 JSON 对象转换为另一个 JSON 对象

> ID：11762050
> 
> 赞同：4
> 
> 时间：2012-08-01T15:02:16.887
> 
> 标签：javascript, ajax, json, extjs

使用 JavaScript 将 JSON A 转换为 JSON B 的最简单方法是什么？

**JSON A：**

```
{
    "d":
    [
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"0","value":"one"},
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"1","value":"two"},
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"2","value":"three"}
    ]
} 
```

**JSON B：**

```
{
    data:
    [
        {"key":"1", "value":"one"},
        {"key":"2", "value":"two"},
        {"key":"3", "value":"three"}
    ]
} 
```

====================

# 2012 年 8 月 1 日更新（使用 Ext JS 并且您有 ASP.NET 代理时回答：

我没有在关于我为 JavaScript 框架使用什么的问题中提供这一点，但事实证明，您可以通过在根属性中指定值“d”来隐式消除“d”键

```
var statusDropdownStore = new Ext.data.Store({
    proxy: new Ext.ux.AspWebAjaxProxy({
        url: '/track/Controls/Shared/GeneralService.asmx/GetDropdownOptions',
        actionMethods: {
            create: 'POST',
            destroy: 'DELETE',
            read: 'POST',
            update: 'POST'
        },
        extraParams: {
            user_login: authUser,
            table_name: '[status]'
        },
        reader: {
            type: 'json',
            model: 'DropdownOption',
            root: 'd'
        },
        headers: {
            'Content-Type': 'application/json; charset=utf-8'
        }
    })
}); 
```

**代理：**

```
Ext.define('Ext.ux.AspWebAjaxProxy', {
    extend: 'Ext.data.proxy.Ajax',
    require: 'Ext.data',

    buildRequest: function (operation) {
        var params = Ext.applyIf(operation.params || {}, this.extraParams || {}),
                                request;
        params = Ext.applyIf(params, this.getParams(params, operation));
        if (operation.id && !params.id) {
            params.id = operation.id;
        }

        params = Ext.JSON.encode(params);

        request = Ext.create('Ext.data.Request', {
            params: params,
            action: operation.action,
            records: operation.records,
            operation: operation,
            url: operation.url
        });
        request.url = this.buildUrl(request);
        operation.request = request;
        return request;
    }
}); 
```

**组合框（下拉）配置：**

```
 {
                        xtype: 'combo',
                        fieldLabel: 'Status',
                        emptyText: 'Select a status...',
                        store: statusDropdownStore,
                        valueField: 'key',
                        displayField: 'value',
                        mode: 'remote',  // or 'local'
                        renderTo: document.body
                    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:12:58.497

这是一个示例

```
var old = {
    "d":
    [
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"0","value":"one"},
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"1","value":"two"},
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"2","value":"three"}
    ]
};

old.data = old.d;
delete old.d;
for(var i=0,l=old.data.length;i<l;i++){
    delete old.data[i].__type;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:06:45.857

您可以尝试[https://stackoverflow.com/a/1219633/832457](https://stackoverflow.com/a/1219633/832457)中概述的解决方案-`delete`用于删除密钥。

尝试遍历数组并使用`delete`，然后重命名数组（通过创建新属性并删除旧属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:25:45.957

我认为这会做到：

```
var TheJsonA = JSON.parse(JsonA);
TheJsonA = TheJsonA.d;

var TheJsonB = {};
TheJsonB.data = [];
var TheObject = {};

if (TheJsonA.length > 0) { 

  for (var i = 0, LoopTimes = TheJsonA.length; i < LoopTimes; i++) {
      TheObject = {};
      TheObject.key = TheJsonA[i].key;
      TheObject.value = TheJsonA[i].value;
      TheJsonB.data.push(TheObject);
  }
}

TheJsonA = null; // if you need to discard the initial object 
```

我也这个 JsonB 不应该是一个包含对象数组的对象；我认为它应该只是一个像这样的对象数组：

```
[
     {"key":"1", "value":"one"},
     {"key":"2", "value":"two"},
     {"key":"3", "value":"three"}
] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:00:51.160

试试这个:) [http://jsfiddle.net/daewon/LnpXb/](http://jsfiddle.net/daewon/LnpXb/)

```
var jsonA = {
    d: [
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"0","value":"one"},
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"1","value":"two"},
        {"__type":"Web.Controls.Shared.GeneralService+DropdownKeyValuePair","key":"2","value":"three"}
   ]
};

var jsonB = {
    data: []
};

var d = jsonA.d;
for (var i=0; i<​d.length​; i++){
    var obj = {
        key : d[i].key,
        value : d[i].value
    };

    jsonB.data.push(obj);    
}
console.log(JSON.stringify(jsonB));
=> {"data":[{"key":"0","value":"one"},{"key":"1","value":"two"},{"key":"2","value":"three"}]} 
```

​</p>

# php - 在 MySQL 和 CodeIgniter 中使用 Match 和 Against

> ID：11762051
> 
> 赞同：2
> 
> 时间：2012-08-01T15:02:18.053
> 
> 标签：php, mysql, codeigniter, full-text-indexing, match-against

我正在尝试在我的 codeIgniter 项目中实现搜索功能。我有一个名为 product_search 的表，我在其中使用以下命令设置了全文索引：

```
ALTER TABLE `product_search` ADD FULLTEXT (`prod_title`, `prod_desc`) 
```

然后我使用以下 codeIgniter 代码搜索它：

```
$this->db->select("prod_id");
$this->db->where("MATCH (`prod_title`, `prod_desc`) AGAINST ('{$searchStr}')");
$this->db->or_where("prod_id LIKE '%{$searchStr}%'");
$this->db->or_where("prod_sku LIKE '%{$searchStr}%'");
$this->db->or_where("prod_title LIKE '%{$searchStr}%'");
$this->db->or_where("prod_desc LIKE '%{$searchStr}%'");

$query = $this->db->get("product_search"); 
```

但是，这会导致以下错误：

> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 'AGAINST ('silk') OR `prod_id`LIKE '%silk%' OR `prod_sku`LIKE '%silk%' OR 'prod'附近使用正确的语法
> 
> SELECT `prod_id`FROM ( `product_search`) WHERE `MATCH`( `prod_title`, `prod_desc`) AGAINST ('silk') OR `prod_id`LIKE '%silk%' OR `prod_sku`LIKE '%silk%' OR `prod_title`LIKE '%silk%' OR `prod_desc`LIKE '%silk%'
> 
> 文件名：models/products_model.php
> 
> 行号：430

为什么它在 MATCH 周围加上反引号？

如果我删除 MATCH 及其后面的括号之间的空格，则会收到以下错误消息：

> 错误号：1191
> 
> 找不到与列列表匹配的 FULLTEXT 索引
> 
> SELECT `prod_id`FROM ( `product_search`) WHERE MATCH( `prod_title`, `prod_desc`) AGAINST ('silk') OR `prod_id`LIKE '%silk%' OR `prod_sku`LIKE '%silk%' OR `prod_title`LIKE '%silk%' OR `prod_desc`LIKE '%silk%'
> 
> 文件名：models/products_model.php
> 
> 行号：430

但是，我使用 top 命令添加了全文索引。出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T11:15:11.510

我通过在语句中添加 IN BOOLEAN MODE 来解决问题，如下所示：

```
SELECT `prod_id`
FROM (`product_search`)
WHERE MATCH (`prod_title`, `prod_desc`) AGAINST ('silk' IN BOOLEAN MODE)
OR `prod_id` LIKE '%silk%' OR `prod_sku` LIKE '%silk%'
OR `prod_title` LIKE '%silk%'
OR `prod_desc` LIKE '%silk%'; 
```

# sql - sql server - 如何修改查询语句中的值？

> ID：11762052
> 
> 赞同：2
> 
> 时间：2012-08-01T15:02:18.163
> 
> 标签：sql, sql-server, select, sql-server-2008-r2

我有这样的声明：

```
select lastname,firstname,email,floorid 
from employee 
where locationid=1 
    and (statusid=1 or statusid=3) 
order by floorid,lastname,firstname,email 
```

问题是列 floorid。此查询的结果显示楼层的 ID。

有一个名为 floor 的表（大约有 30 行），其中包含列 id 和 floornumber。floorid（在上面的语句中）值与表层的 id 匹配。

我希望上面的查询将 floorid 值切换为 floor 表中 floornumber 列的关联值。

谁能告诉我如何做到这一点？我正在使用 Microsoft sql server 2008 r2。

我是 sql 新手，如果可能的话，我需要一个清晰易懂的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:05:19.550

```
select   lastname,
         firstname,
         email,
         floor.floornumber
from     employee
inner join floor on floor.id = employee.floorid
where    locationid = 1
         and (statusid = 1 or statusid = 3)
order by floorid, lastname, firstname, email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:06:20.387

如果 floorid 与地板表的 id 匹配，您必须在检查的地方进行简单的连接。然后你使用表层的楼层号。

```
select a.lastname,a.firstname,a.email,b.floornumber 
from employee a
join floor b on a.floorid = b.id
where a.locationid=1 and (a.statusid=1 or a.statusid=3) 
order by a.floorid,a.lastname,a.firstname,a.email 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:19:49.630

您需要使用[join](http://www.devguru.com/technologies/t-sql/7114.asp)。
这将在某个字段上连接两个表。
这样，您一次可以`SELECT`从多个表中获取列。

当您连接两个表时，您必须指定要连接它们的列。
在您的示例中，您必须这样做：
`from employee join floor on employee.floorid = floor.id`

由于您是 SQL 新手，因此您必须知道一些事情。对于您在这个问题上的其他 enaswer，人们使用`aliases`而不是重复表名。
`from employee a join floor b`
意味着从现在开始，桌子的雇员将被称为`a`，桌子的地板被称为`b`。当您有很多连接要做时，这非常有用。

现在假设两个表都有一个 column `name`。在您的选择中，您必须说出要从哪个表中选择列名。如果您只编写此
`SELECT name from Employee a join floor b on a.id = b.id`
代码，编译器将无法理解您要从哪个表中获取该列`name`。您必须像这样指定它：
`SELECT Employee.name from Employee a join floor b on a.id = b.id`
或者如果您更喜欢使用别名：
`SELECT a.name from Employee a join floor b on a.id = b.id`

最后有许多类型的连接。

*   内连接（您正在使用的内容，因为只需键入即可`Join`引用内连接。
*   左外连接
*   右外连接
*   自加入
*   ...

应该参考[这篇关于连接](http://www.made2mentor.com/2011/02/different-types-of-joins/)的文章来了解如何正确使用它们。
希望这可以帮助。

# mysql - sum a value on another distinct value

> ID：11762056
> 
> 赞同：0
> 
> 时间：2012-08-01T15:02:29.023
> 
> 标签：mysql

after doing some joins I got a non-grouped result/view like:

```
id | from                | to                  | who    | group | ...
 1 | 2012-01-01 12:00:00 | 2012-01-01 14:00:00 | adam   | sales
 2 | 2012-01-01 12:00:00 | 2012-01-01 15:00:00 | bertil | sales
 2 | 2012-01-01 12:00:00 | 2012-01-01 15:00:00 | bertil | admin
... 
```

the result is going to be grouped by DATE(from)

but I'm also interested in the time-length `(UNIX_TIMESTAMP(to) - UNIX_TIMESTAMP(from))/3600` and I want a sum of it grouped by day, but i only want each id to count once

can I do somthing like:
`SUM((UNIX_TIMESTAMP(to) - UNIX_TIMESTAMP(from))/3600 DISTINCT id)`
or maybe use a variable and a IF()?
or do i have to do a subquery of by big query grouped by id and then the outer query grouped by date?

**UPDATE 1** clarify what you expect to see as an answer
the result above is the times people worked, and what groups they was members of, after filtering out the groups that is interesting at the moment, I want to know how much mantime that was spent that day, for the example data: its 2 hours for adam + 3 hours for bertil = 5 hours, but bertil is a member of 2 of the interesting groups, so his time is shown twice

**UPDATE 2** provide a little more data
Above was a try to of an generalization of this query

```
SELECT
   worktimes.date AS 'Datum',
   COUNT(DISTINCT employments.citizen_id) AS 'Säljare',
   SUM(UNIX_TIMESTAMP(TIMESTAMP(worktimes.date, worktimes.death)) - UNIX_TIMESTAMP(TIMESTAMP(worktimes.date, worktimes.birth))) AS 'Mantid',
   COUNT(DISTINCT agreements.agreement_id) AS 'Avtal',
   COUNT(DISTINCT IF(agreement_status.status_id = 57, agreements.agreement_id, NULL)) AS 'Godkända',
   COUNT(DISTINCT IF(agreement_status.status_id = 3, agreements.agreement_id, NULL)) AS 'Ånger',
   COUNT(DISTINCT IF(agreement_status.status_id = 4, agreements.agreement_id, NULL)) AS 'Makuleringar',
   COUNT(DISTINCT IF(agreement_status.status_id IS NULL, agreements.agreement_id, NULL)) AS 'Övrigt'
FROM worktimes
LEFT JOIN employments USING (employment_id)
LEFT JOIN membership_cache ON (
   membership_cache.target_type = 34 AND
   membership_cache.target_id IN (136, 138) AND
   membership_cache.member_type = 11 AND
   membership_cache.member_id = employments.citizen_id AND
   DATE(membership_cache.birth) <= worktimes.date AND
   (membership_cache.death IS NULL OR worktimes.date < DATE(membership_cache.death))
   )
LEFT JOIN agreements ON (
   agreements.citizen_id = employments.citizen_id AND
   agreements.project_id = 20 AND
   agreements.date >= 20110101 AND
   DATE(agreements.date) = worktimes.date
   )
LEFT JOIN agreement_status ON (
   agreements.agreement_id = agreement_status.agreement_id AND
   agreement_status.value = 1 AND
   agreement_status.death IS NULL AND
   agreement_status.status_id IN (3, 4, 57)
   )
WHERE
   worktimes.death IS NOT NULL AND
   membership_cache.member_id IS NOT NULL AND
   worktimes.date >= 20110101
GROUP BY DATE(agreements.date) 
```

mysql EXPLAIN of above query

```
+----+-------------+------------------+-------+------------------------------------------------------+------------------------+---------+-------------------------------+------+-----------------------------------------------------------+
| id | select_type | table            | type  | possible_keys                                        | key                    | key_len | ref                           | rows | Extra                                                     |
+----+-------------+------------------+-------+------------------------------------------------------+------------------------+---------+-------------------------------+------+-----------------------------------------------------------+
|  1 | SIMPLE      | membership_cache | range | target,member                                        | target                 | 10      | NULL                          |   85 | Using where; Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | employments      | ref   | employment_id,citizen                                | citizen                | 8       | db.membership_cache.member_id |    1 | Using where; Using index                                  |
|  1 | SIMPLE      | worktimes        | ref   | employment,date,death                                | employment             | 8       | db.employments.employment_id  |   34 | Using where                                               |
|  1 | SIMPLE      | agreements       | ref   | project,date,project_customer,agreements_per_citizen | agreements_per_citizen | 8       | db.employments.citizen_id     |   36 |                                                           |
|  1 | SIMPLE      | agreement_status | ref   | agreement,status_birth,status_death                  | agreement              | 8       | db.agreements.agreement_id    |    1 |                                                           |
+----+-------------+------------------+-------+------------------------------------------------------+------------------------+---------+-------------------------------+------+-----------------------------------------------------------+ 
```

And the problem is that `SUM(UNIX_TIMESTAMP(TIMESTAMP(worktimes.date, worktimes.death)) - UNIX_TIMESTAMP(TIMESTAMP(worktimes.date, worktimes.birth))) AS 'Mantid'` is getting multiplied by the number of matching rows in the tables: membership_cache, agreements and agreement_status

# asp.net - report viewer with razor engine

> ID：11762061
> 
> 赞同：1
> 
> 时间：2012-08-01T15:02:36.777
> 
> 标签：asp.net, entity-framework, razor, reporting-services

Is it possible to insert a report viewer into a .cshtml file? I'm using Razor view Engine and I already have a report. I just want to insert that report into a view of mine. Thank you

# python - 如何使用 xml 标签将 Element 打印为正确的 xml？

> ID：11762064
> 
> 赞同：2
> 
> 时间：2012-08-01T15:02:42.997
> 
> 标签：python, django

所以我认为我有这个功能：

```
from django.http import HttpResponse
from xml.etree.ElementTree import Element, SubElement, Comment, tostring

def helloworld(request):
    root_element = Element("root_element")
    comment = Comment("Hello World!!!")
    root_element.append(comment)
    foo_element = Element("foo")
    foo_element.text = "bar"
    bar_element = Element("bar")
    bar_element.text = "foo"
    root_element.append(foo_element)
    root_element.append(bar_element)
    return HttpResponse(tostring(root_element), "application/xml") 
```

它的作用是打印如下内容：

```
<root_element><!--Hello World!!!--><foo>bar</foo><bar>foo</bar></root_element> 
```

如您所见，它缺少开头的 xml 标记。如何以 xml 声明开头输出正确的 XML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:26:13.510

如果你可以在你的项目中添加依赖，我建议你使用[lxml](http://lxml.de/api/lxml.etree-module.html#tostring)，它比 Python 自带的基本 xml 模块更完善和优化。

为此，您只需将导入语句更改为：

```
from lxml.etree import Element, SubElement, Comment, tostring 
```

然后，您将拥有一个带有 'xml_declaration' 选项的 tostring() ：

```
>>> tostring(root, xml_declaration=False)
'<root_element><!--Hello World!!!--><foo>bar</foo><bar>foo</bar></root_element>'
>>> tostring(root, xml_declaration=True)
"<?xml version='1.0' encoding='ASCII'?>\n<root_element><!--Hello World!!!--><foo>bar</foo><bar>foo</bar></root_element>" 
```

在标准库中，只有 ElementTree 的 write() 方法有 xml_declaration 选项。另一种解决方案是创建一个包装器，它使用 ElementTree.write() 写入 StringIO，然后返回 StringIO 的内容。

# sql - T-SQL Tree Search Select from set of nodes if they are under a parent

> ID：11762066
> 
> 赞同：1
> 
> 时间：2012-08-01T15:02:54.043
> 
> 标签：sql, sql-server-2005, recursive-query, tree-search

T-SQL Tree Search

Select from set of nodes if they are under a parent

I have a very large tree in a MSSQL Db (80000+) records. My client has requested a quick search of the tree via a text `LIKE` command. The `LIKE` command returns < 500 records.

Is there some recursive command that will check the tree of each quickly to see if they are under a particular node?

Edit: I thought it was fairly clear however....

I am on SQL Server 2005.

```
Table Schema
 - (pK) Id
 - (fK) ParentId
 - FirstName
 - LastName 
```

I have recursive calls that are able to go down several levels quickly. however to do the Name search I would have to poll the entire tree which can be several hundred levels deep and is not an option. I was hoping for help designing a query so I can search the entire table first for the name match and filter the records that are not part of the tree in question.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:22:12.223

您可以使用递归 CTE 来做到这一点——您需要代码示例吗？

像这样（这段代码已经过测试）

```
WITH recurseTree AS
(
   SELECT * 
   FROM tableName
   WHERE Id = @parentID
   UNION ALL
   SELECT c.*
   FROM tableName c
   JOIN recurseTree p ON c.parentID = p.id
)
SELECT * 
FROM recurseTree 
```

注意：更多新版本（2008+）为您提供了一种特殊的数据类型（[hierarchyid](http://msdn.microsoft.com/en-us/library/bb677290%28v=sql.100%29.aspx "等级id")），用于进行快速树遍历。这可能是最好的方法，其他任何事情都不会那么快。升级！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:38:15.930

这应该可以帮助您：

```
;WITH CTE AS
(
    SELECT Id, ParentId, FirstName, LastName
    FROM YourTable
    UNION ALL
    SELECT B.Id, B.ParentId, B.FirstName, B.LastName
    FROM CTE A 
    INNER JOIN YourTable B
    ON A.ParentId = B.Id
)
SELECT *
FROM CTE
WHERE FirstName LIKE '%something%'
OPTION(MAXRECURSION 0) 
```

# c# - .Net WebBrowser Control memory leak

> ID：11762067
> 
> 赞同：0
> 
> 时间：2012-08-01T15:02:56.067
> 
> 标签：c#, .net, memory, memory-leaks, webbrowser-control

My c# application uses .net WebBrowser. I need to close child control everytime and I have noticed WebBrowser is not getting disposed and RAM consumption is increasing heavily with each call (around 10 mb on each new control declaration) and application crashes in sometime with OutOfMemoryException. Searched over forums but couldn't find a clean solution. Tried SetProcessWorkingSetSize(pHandle, -1, -1); but it doesn't reduce virtual memory though RAM uses will be reduced and its not a clean way of overcoming the issue.

Seems this issues exists since years, for more details look at this thread [How to get around the memory leak in the .NET Webbrowser control?](https://stackoverflow.com/questions/8302933/how-to-get-around-the-memory-leak-in-the-net-webbrowser-control/11759921)

Any suggestions ? Tried almost everything but no success yet.

Thanks,

Abhinav

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:50:03.000

I don't know whether your situation is similiar to mine but I have wasted three days for that weird problem. My application was performing a search on a web page and my code was like that;

1.Open web page
for(1000 times)
{
2.Write input and click search button.
3.Check the result.
}

As you see my program opens the web page and makes repeated searches.Here opening the page (navigaiton) occurs only one time. My program's memory consumption was continuously increasing even above 1 GB! Then I tried putting the navigation inside the loop it worked.

for(1000 times)
{
1.Open web page
2.Write input and click seach button.
3.Check the result.
}

I exactly don't know the reason but reusing the same page for a long time was the cause of my problem. I hope it helps.

# django - django 应用程序的 apache mod_wsgi 基本身份验证

> ID：11762068
> 
> 赞同：3
> 
> 时间：2012-08-01T15:02:59.287
> 
> 标签：django, apache, mod-wsgi

我已经完成了第一个基于 django 的网站，并且准备在 liveserver 上进行部署。但是，在调整和测试时，我不希望这个网站现在对公众可见。

在 PHP 站点上，我总是通过 .htaccess 使用基本的 http 身份验证来进行最后的更改。这是一个拒绝访问整个站点的两个班轮。

理想情况下，我想运行这样的环境：

*   static.mydomain.com（由 apache2 为静态文件提供服务）
*   mydomain.com（由具有 mod_wsgi 最新稳定版本的 apache2 提供 -> 可供公众使用）
*   dev.mydomain.com（由带有 mod_wsgi 开发/测试的 apache2 提供 -> 不可用于公共（基本身份验证））

这可以用 django/apache2/mod_wsgi 完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:07:05.943

您可以为您的虚拟主机设置基本身份验证`dev.mydomain.com`。查看[http://httpd.apache.org/docs/2.2/mod/mod_auth_basic.html](http://httpd.apache.org/docs/2.2/mod/mod_auth_basic.html)和[http://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)了解更多详情

**编辑**：您的虚拟主机配置将类似于：

```
<VirtualHost *:80>

    ServerName mydomain.com
    DocumentRoot /srv/www/wsgi

    <Directory /srv/www/wsgi>
        Order allow,deny
        Allow from all
    </Directory>

    WSGIScriptAlias / /srv/www/wsgi/app.wsgi

</VirtualHost>

<VirtualHost *:80>

    ServerName dev.mydomain.com
    DocumentRoot /srv/www/wsgi-dev

    <Directory /srv/www/wsgi-dev>
        Order allow,deny
        Allow from all
    </Directory>

    WSGIScriptAlias / /srv/www/wsgi-dev/app.wsgi

    <Location />
        AuthType Basic
        AuthName "Restricted Files"
        AuthUserFile /usr/local/apache/passwd/passwords
        Require valid-user
    </Location>

</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:07:26.850

mod_wsgi 不在乎你是否在上面使用 HTTP 身份验证。唯一的规定是，如果您希望它对 WSGI 应用程序可见，那么您需要使用[`WSGIPassAuthorization`](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPassAuthorization)，但在这种情况下这不是问题，因为 Django 有自己的独立于 HTTP auth 的身份验证方案。

# ip - preventing fraudulent user logins/accounts

> ID：11762069
> 
> 赞同：0
> 
> 时间：2012-08-01T15:03:01.083
> 
> 标签：ip, identity

Scenario - a user has come to the site multiple times over a period of 6 months. 72 logins over 10 different IP's.

We have identified them as a fraud, and have suspeneded their account. But they could always come back with a different email.

Now this isn't simply to prevent a random user from being an A*hole .. its actually that they used our service to solicit funds through our service (think Kickstarterish).

Any best practices, considering they probably will have a new IP next time they visit?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:19:12.673

You can never be absolutely 100% sure, there is no fingerprinting on the internet and even that can be fooled.

IP is just an address, it is perfectly legal to have more than one. The same with emails - it is legal to have mail boxes.

Generally, the best you can do is something similar to what PayPal is doing when registering users, require a valid on-line payment method (card/bank account), charge a nominal fee to this account with unique reference, activate user account ONLY when they entered the unique reference from the payment, refund the payment after a period of time. And obviously store and don't allow reuse of the same on-line payment method (card/bank account) - I would suggest to store a hash instead of actual card/account numbers to avoid any privacy issues.

# php - Random permalink key in wordpress

> ID：11762070
> 
> 赞同：2
> 
> 时间：2012-08-01T15:03:02.937
> 
> 标签：php, wordpress, wordpress-theming, permalinks

I want to have a custom permalink for each new post in WordPress like: [http://mysite.com/x5Kvy6](http://mysite.com/x5Kvy6) (like bit.ly).

I tried this little script, but it adds only 5-digit numbers to the post title in the permalink.

```
function wp_unique_post_slug( $slug, $post_ID, $post_status, $post_type, $post_parent ) {

if($slug!=""){
  $random=rand(11111,99999); //I needed 5 digit random
  $slug .= "-" . $random;
}
return $slug;

} 
```

How can I make a random key instead of the post title?

I have not researched URL shorteners or redirection methods.

Any idea is welcome!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:35:53.407

```
function wp_unique_post_slug($col,$table='wp_posts'){
     global $wpdb;

     $alphabet = array_merge( range(0, 9), range('a','z') );

     $already_exists = true;
     do {

         $guidchr = array();
         for ($i=0; $i<32; $i++)
         $guidchr[] = $alphabet[array_rand( $alphabet )];

         $guid = sprintf( "%s", implode("", array_slice($guidchr, 0, 12, true)) );

       // check that GUID is unique
       $already_exists = (boolean) $wpdb->get_var("
       SELECT COUNT($col) as the_amount FROM $table WHERE $col = '$guid'
       ");

      } while (true == $already_exists);

     return $guid;
} 
```

这可以通过多种方式进行优化。

同样关于这一点`wp_unique_post_slug()`- yikes 注意名称间距。Wordpress 已经使用了这个函数名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:05:25.550

```
if($slug!=""){
   $random=rand(11111,99999); //I needed 5 digit random
   $slug = $random;
} 
```

.= 用于字符串的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-07T12:34:41.230

[使用Mwayi 答案](https://stackoverflow.com/questions/11762070/random-permalink-key-in-wordpress/11762698#11762698)的正确方法是使用 filter `wp_unique_post_slug`，这`function wp_unique_post_slug()`将与 WP 自己的功能相冲突。在 WP 函数中，我们找到了这个过滤钩子。

```
add_filter( 'wp_unique_post_slug', 'unique_slug_so_11762070', 10, 6 );

function unique_slug_so_11762070( $slug, $post_ID, $post_status, $post_type, $post_parent, $original_slug ) {
    $new_slug = so_11762070_unique_post_slug('guid');
    return $new_slug;
}

# From: https://stackoverflow.com/a/11762698
function so_11762070_unique_post_slug($col,$table='wp_posts'){
     global $wpdb;

     $alphabet = array_merge( range(0, 9), range('a','z') );

     $already_exists = true;
     do {

         $guidchr = array();
         for ($i=0; $i<32; $i++)
         $guidchr[] = $alphabet[array_rand( $alphabet )];

         $guid = sprintf( "%s", implode("", array_slice($guidchr, 0, 12, true)) );

       // check that GUID is unique
       $already_exists = (boolean) $wpdb->get_var("
       SELECT COUNT($col) as the_amount FROM $table WHERE $col = '$guid'
       ");

      } while (true == $already_exists);

     return $guid;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-22T13:36:27.030

对于 SEO，你最好让 slug 尽可能有意义，即。不要将永久链接更改为随机序列。使用[此插件](https://wordpress.org/plugins/shortnit/)，您仍然可以使用[http://example.com/raNd0m](http://example.com/raNd0m)永久链接在社交网络或您网站上的图像中共享目的。

这样您就可以同时赢得**SEO**和**短链接**

* * *

我用[http://ijassar.info/underrated](http://ijassar.info/underrated)写了一篇关于这个特定主题的帖子

# flash - Two rows in Flash Builder DataGrid Header - How?

> ID：11762073
> 
> 赞同：0
> 
> 时间：2012-08-01T15:03:18.110
> 
> 标签：flash, datagrid, builder

I have a requirement to change a Datagrid in Flash Builder 4.6 to have two rows in the header.

So for example, instead of a column header looking like this: "Item Qty". I want it to show on two lines in the column header as

"Item" "Qty"

I guess I would need a HeaderRenderer but not sure how to set it to use two rows instead of one.

Help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:27:31.350

您可能想尝试[这里](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f4a.html)描述的 MultiLineCell 渲染器。

# c# - CSLA SingleCriteria -- 带有 2 个泛型类型参数的版本有什么意义？

> ID：11762076
> 
> 赞同：1
> 
> 时间：2012-08-01T15:03:27.977
> 
> 标签：c#, .net, csla

SingleCriteria 类有两个版本：`SingleCriteria<B, C>`和`SingleCriteria<C>`，但似乎第一个有两（2）个类型参数是没用的，至少看代码......

```
public class SingleCriteria<B, C> : SingleCriteria<C>
{
    public SingleCriteria(C value)
      : base(typeof (B), value) { }

    protected SingleCriteria() { }
}

public class SingleCriteria<C> : CriteriaBase<SingleCriteria<C>>
{
    private C _value;

    public C Value { get { return this._value; } }

    public SingleCriteria(C value)
    {
      this._value = value;
    }

    protected SingleCriteria() { }

    protected SingleCriteria(Type type, C value)
    {
      this._value = value;
    }

    // etc ...
} 
```

* * *

请注意，第一个调用基本方法，但基本方法实际上并没有对*类型*参数做任何事情。那么这一切的意义何在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T02:35:38.433

我相信具有两种泛型类型的那个更旧，并且以前是唯一使用的那个。后来的版本不再需要第一种类型，但为了向后兼容而留下了现有的类型。

# if-statement - For循环内的批处理文件If语句

> ID：11762079
> 
> 赞同：1
> 
> 时间：2012-08-01T15:03:44.403
> 
> 标签：if-statement, batch-file, for-loop

我遇到了我的 if 语句（在 for 循环内）似乎不合作的问题。我想做的是：

*   遍历一堆 zip 文件并将它们重命名为 005.zip、006.zip、007.zip 等。
*   我保留了一个计数器，从 5 开始，它确定文件编号，以及一个前缀 00，以便获得 005、006 等。
*   一旦计数器达到 10，我希望前缀只是 0 而不是 00。所以当计数器为 10 时，该文件将命名为 010.zip，然后是 011.zip 而不是 0010.zip、0011.zip 等。

到目前为止，这是我所拥有的：

```
setlocal enableextensions enabledelayedexpansion
SET /a COUNT=5
SET FILE_PREFIX=00
SET /a MAX=10
for %%f in (*.zip) do  (
   if !COUNT! == !MAX! (set FILE_PREFIX=0)
   ren "%%f" %FILE_PREFIX%!COUNT!.zip
   set /a COUNT+=1
   echo !COUNT!
)
endlocal 
```

为什么 if 语句不起作用？文件重命名工作正常，只是 if 语句不会将 FILE_PREFIX 更改为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:24:02.563

问题是您的代码没有对 FILE_PREFIX 应用延迟扩展，因此该值在循环中仅在解析时计算一次；而不是在运行时每次迭代都刷新。

只需将您的线路更改为

```
ren "%%f" !FILE_PREFIX!!COUNT!.zip 
```

快*！*它应该工作。

但是一旦你更正它，你的方法仍然会在 999 以上的数字上失败。

要获得更强大的实现，请尝试此替代方案

```
SET /a count=1
for %%f in (*.zip) do  (
  set fn=0000!count!
  echo REN "%%f" !fn:~-4!%%~xf
  set /a count+=1
) 
```

循环内

1.  代码`0000!count!`将一些零（在本例中为 4）附加到数字；所以它将遵循序列 00001, 00002, ... 00009, 000010, 000011, ...

2.  然后`!fn:~-4!`删除除最后一个 N 之外的所有数字（本例中为 4）。因此它将遵循所需的序列 0001, 0002, ... 0009, 0010, 0011, ...

3.  并`%%~xf`提取扩展名（在此循环的所有情况下为 .zip）并附加它以形成最终文件名。所以它将遵循所需的顺序 0001.zip, 0002.zip, ... 0009.zip, 0010.zip, 0011.zip, ...

此方法适用于最多 9999 的任何数字。您可以轻松地将其扩展到 5 或 6 位甚至更多位。

# java - 如何以编程方式创建java文件

> ID：11762080
> 
> 赞同：0
> 
> 时间：2012-08-01T15:03:49.893
> 
> 标签：java, reflection, code-generation, bcel

我正在创建一个实用程序类，它编写`.java Files`充当转换器 - 生成器。

这个 util-class 将生成 AConverter.java'（参考下面的示例）

我想知道如何编写 util-class。
我用谷歌搜索，发现使用 apache bcel 的建议。但我找不到一个例子来编写`.java File`from a`String`并让它在我的程序中工作。

期望是...

```
class ADTO
{
    private String empId;
    private String empName;
    private String dept;

    //setters and getters
}

class ABO
{
    private String loginId;
    private String userName;
    private String group;

    //setter and getter
}

class AConverter
{
    public void doConvertFromDB(ADTO source, ABO dest)
    {
        dest.setLoginId(source.getEmpId());
        ...
    }

    public void doConvertFromBO(ABO source, ADTO dest)
    {
        dest.setEmpId(source.getLoginId());
        ...

    public ADTO getSourceClass()
    {
        return ADTO.class;
    }

    public ABO getDestClass()
    {
        return ABO.class;
    }
} 
```

上面的 AConverter 类将由新的 Util 类生成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:11:34.860

You would almost certainly benefit from trying to do this a different way, the number of ways this scheme could fail is worryingly large. Here are some suggestions:

1.  Add a caster method of some sort:

    ```
    class ADTO
    {
        private String empId;
        private String empName;
        private String dept;

        // setters and getters

        public ABO toABO() // caster method (ABO will need a toADTO() as well)
        {
            ABO a = new ABO();

            a.setSomething(getSomethingEquivalent());
            ...

            return a;
        }
    } 
    ```

2.  A proxy class, perhaps a subclass of the intended class. You would need 2, one derived from each class.

    ```
    class ADTO_Proxy extends ADTO
    {
        private ABO abo;

        public ADTO_Proxy(ABO a)
        {
            super();
            abo = a;
        }

        @override
        public String getEmployeeId()
        {
            return abo.getLoginId();
        }

        // other setters and getters
    } 
    ```

3.  Rather than trying to make an adapter, merge the classes. Could be easily accomplished with the following:

    ```
    class ADTO
    {
        private String empId;
        private String empName;
        private String dept;

        // getters and setters for each variable by each name
        public String getEmployeeId()
        { return empId; }
        public String getLoginId()
        { return empId; }

        public String getEmployeeName()
        { return empName; }
        public String getUsername()
        { return empName; }

        public String getDepartment()
        { return dept; }
        public String getGroup()
        { return dept; }

        // setters
    } 
    ```

    This could also be done with interfaces.

HateYourselfLater™ Ratings:

The first method ranks a 2, the best of the three. Rating earned because you won't ever find yourself accidentally switching between the two and not much other code has to be changed.

The second method ranks a -3, in the middle of the three. Rating earned because you may occasionally mix up objects that are of one type of the other, with possible unintended side effects. You can reduce this to a rating of 0 if you omit setters from the proxy classes, but this limits functionality.

The third method gets a -5, the worst of the three. Rating earned because there is a lot of possibility for side effects and the redundant code will probably trip you up later. However, you can make rate 1 by refactoring everything to properly use only one class, but that might take a lot of work, and you'll hate yourself for it now.

That said, your original idea of generating a class on the fly to convert between the two ranks about a -10 because it will be horribly difficult to maintain and very sensitive to any changes of the underlying classes, and will probably be easy to break.

HateYourselfLater™ Scale ranges from -10 to 10, with 10 being the largest amount of like, and -10 being the largest amount of hate.

## Original Answer:

You want a decompiler. There are several java decompilers available to pick from, I'll list a few:

*   Showmycode - easy to use, decent decompiling, [online](http://www.showmycode.com/) (thus unsuitable for corporate material), screws up built in class names and nested anonymous classes
*   Jad - downloadable, CLI, works but produces ugly code, linux version is out of date (use windows version with wine if necessary) , screws up enums, foreach loops, and some try/catches
*   Fernflower - CLI, hard to find, best output of the three, author is SO user, decent looking output, screws up try/catches sometimes

None of them are perfect, but that's just a result of the fact that some data gets lost during compilation, and decompilers must guess what the program originally looked like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:11:46.843

You can do multiple things.

You SHOULD decide what you want to do precisely and then get a matching library do it for you and learn that library.

BCEL is one such library. I've used Java-APT in the past successfully for similar purposes.

For your understanding I will write some things about generating classes below, but please, don't develop this yourself, you most likely will end up stuck.

If you want to have your class available within the same JVM you are currently running (in opposition to: you want to generate code and then compile the whole program again and restart it) then you have to:

1.  Create the File, write your String to it.
2.  Compile the File (a rough way to do so would call javac from the code)
3.  load the classes into your classloader.

# fortran - Fortran 隐含用冒号吗？

> ID：11762081
> 
> 赞同：1
> 
> 时间：2012-08-01T15:03:50.943
> 
> 标签：fortran, colon

我们不得不将一些旧的 Fortan 77 代码转换为 VB.net。由于我们没有人知道任何 Fortran，因此我们取得了重大进展。但是，我们遇到了下面的 write 语句，它有几个嵌套的隐式 do 循环。我们熟悉隐含的 do 循环，但不知道 MN:MN 中冒号的意义是什么。我们只见过使用逗号的隐含 do 循环，例如 this statement 中的后者`(NREC,MN)`。

```
Logical*1 DECLN(492)

WRITE(6,9238)NPERMN(NREC),CUSIPS(NREC),TICKRS(NREC),NAMES(NREC),(DECLN(MN:MN),MN=1,30),(SCORES(NREC,MN),MN=1,30))

format(I7, 1X, A8, 1X, A8, 1X, A20, 1X, 12A1, 1X, 12A1, 1X, 6A1/(12F10.5)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:13:14.283

```
DECLN(MN:MN) 
```

looks like a 1-character extract from a character variable called `DECLN`. The expression

```
(DECLN(MN:MN),MN=1,30) 
```

(which is an `io-implied-do` expression) causes the program to write the first 30 characters of `DECLN` as 30 separate characters. The form

```
(DECLN(1:30)) 
```

writes the same characters in one 30-character long go.

It might be that `DECLN(MN:MN)` is a 1-element section of the rank-1 array `DECLN`, in which case it's an odd way to write `DECLN(MN)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:13:32.163

DECLN(MN:MN) is used to extract a single character from a string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-11T00:10:01.510

如更新中所述，DECLN 不是字符；它是 1 字节的逻辑数组（包含有关证券的信息）。(DECLN(MN:MN),MN=1,30) 正在识别前 30 个元素，但我认为可以更容易地编写 (DECLN(MN),MN=1,30)。CUSIP（这是 9 位代码）被编写为 A8，它会截断校验和（足够典型的程序，我相信 Brian 知道，因为大多数清算机构都忽略了它）

# ios - UIDocumentInteractionControllerDelegate 会结束预览吗？

> ID：11762084
> 
> 赞同：3
> 
> 时间：2012-08-01T15:04:00.100
> 
> 标签：ios, xcode, ipad, mobile

我有一个 UIDocumentInteractionController 用于在我的应用程序中显示全屏预览。这一切正常，我遇到的问题是全屏查看器打开时的方向变化。

如果查看器打开并且界面方向发生变化，我需要手动更新堆栈中的视图。

我目前已将此编码到方法中：

`- (void)documentInteractionControllerDidEndPreview:(UIDocumentInteractionController *)controller`

这按预期工作，但在重绘视图时会导致轻微的跳跃（视图现在可见）。

有谁知道我可以用什么方法连接到一个在交互控制器预览结束之前被调用的事件——比如：`documentInteractionControllerWillEndPreview`

是否有一个 NSNotification 或事件我可以捕捉到这个？

谢谢

罗斯

# javascript - Javascript对象构造函数 - 奇怪的行为

> ID：11762088
> 
> 赞同：1
> 
> 时间：2012-08-01T15:04:07.663
> 
> 标签：javascript, oop, prototype

我一直在学习 Javascript 的原型继承，并且在 html 页面的正文中的标签中包含以下内容：

```
function F() {}
//F.prototype = {a:"hello"};
var x = new F();
document.write(x.constructor); 
```

这会在浏览器中产生以下打印输出：

> 函数 F() { }

但是，如果我取消注释第二行，则会出现以下结果：

> 函数 Object() { [本机代码] }

尽管如此，`x`仍然继承自 F 的原型，因为当我将最后一行更改为以下内容时......

```
document.write(x.a); 
```

...我得到以下打印输出：

> 你好

我已经在 Firefox 和 Safari 中尝试过，两者都发生了同样的事情。

有谁知道这里到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:10:04.720

每个对象`constructor`在其原型链中都有一个属性，因为每个对象最终都继承自`Object.prototype`.

由于您将普通对象设置为 的原型`F`，`x.constructor`因此现在指的`constructor`是该对象的属性，它指的是`Object.prototype.constructor`.

原型链如下所示：

```
x -> F.prototype -> Object.prototype 
```

并且由于既没有`x`也`F.prototype`没有`constructor`属性，所以`Object.prototype.constructor`返回 的值。

`F.prototype`覆盖之前的值类似于：

```
F.prototype = {
    constructor: F;
}; 
```

即它有一个`constructor`属性。这就是为什么`constructor`如果您覆盖原型，您应该始终正确设置：

```
F.prototype = {a:"hello"};
F.prototype.constructor = F; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:10:20.603

这是因为您在`.constructor`替换原始`.prototype`对象时消除了默认属性。

So now, when you look for a `.constructor` property it continues down the prototype chain of the given `.prototype` object, until it finds one, which it'll get from the default `Object.prototype`.

When a `.prototype` object has been replaced, some people like to reassign the missing `.constructor`...

```
function F() {}
F.prototype = {a:"hello"};
F.prototype.constructor = F; 
```

# junit - 哪个框架最适合分布式环境中的企业应用程序测试？

> ID：11762089
> 
> 赞同：1
> 
> 时间：2012-08-01T15:04:08.820
> 
> 标签：junit, continuous-integration, integration, integration-testing, jmeter

我在一家拥有一些遗留应用程序的企业工作，这些应用程序非常耦合。

因此集成测试非常重要。我正在寻找一个分布式测试框架，或者它们的组合，QA 团队和开发团队都可以利用它们。对于“分布式”，我指的是用于测试的许多环境，而单个应用程序本身并不是分布式系统。

以下标准可能不是理想的模型，而是要开发的工具的一种要求和期望。

这样的框架应该是：

## **开源的**

社区支持学习、维护和扩展:)

## **分散式**

允许在多个环境中执行测试。由于测试用例可能会经常变化，因此应该可以将这些测试分发到目标机器上并运行目标代码库。

```
I am checking out  [STAF][1] on this. 
```

## **允许集成测试**

我正在研究骆驼测试。我们有一些现有的“模拟器”、“模拟”来刺激一些应用程序的行为。具有易于使用的依赖注入/模拟的框架将非常有帮助..

## **使用 WEB UI**，这是一个可以

```
- all testing results are shown
- able to trigger test
- able to see testing definition 
```

## **人类可读和可配置的验收测试定义**

测试语言应该是可读的 DSL 我想知道像 FitNesse 这样的框架是一个不错的选择，因为我没有找到一种分布式测试它的方法。对于[Citrus](http://www.citrusframework.org/) ，我担心 XML 很难阅读

**当前的一些框架**

我的团队一直在建议[JSystem](http://www.jsystemtest.org/)，虽然可以分发测试，但没有 Web GUI，我主要担心的是它的开发自 2009 年以来已停止

如前所述，我研究了许多框架， [Grinder](http://grinder.sourceforge.net/#Key+features) - 似乎更好的套件 Web 负载测试？ [JMeter](http://jmeter.apache.org/) - 这似乎更接近，但也专注于负载测试？

**更多背景知识：**大多数开发人员都熟悉 JAVA，目前我们使用 Hudson 来运行 JUnit 测试。

最后我也在思考一个更概念性的问题，xUnit 测试、集成测试、验收测试是否应该分开？xUnit 测试应该坚持使用代码库吗？也许这值得另一个问题，但考虑到这一点，我不确定我正在寻找正确的东西。

如果您能给我一些关于想法的评论/建议一些框架，我将不胜感激。提前非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T08:15:41.720

我会建议你使用 Jenkins 框架。

1.  开源
2.  可用于不同环境
3.  我自己正在使用 Jenkins 进行集成测试，所以建议你这样做。
4.  Web UI 非常具有交互性。

有各种各样的插件可用，并且仍在开发中。

编写一些 ANT、MAVEN 脚本，您可以通过它完成工作。

# c++ - 使用 C++ 2011 移动语义优化代码

> ID：11762091
> 
> 赞同：1
> 
> 时间：2012-08-01T15:04:29.317
> 
> 标签：c++, c++11, constructor, move-semantics, move-constructor

> **可能重复：**
> [有人可以向我解释一下移动语义吗？](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)

考虑以下恒定大小数学数组的示例代码：

```
// INCLUDE
#include <iostream>
#include <initializer_list>

// BASE ARRAY
template<class T, unsigned int TSIZE> class BaseArray
{
    public:
    // Constructor
        inline BaseArray() : _data{}
        {
            std::cout<<"BaseArray::BaseArray()"<<std::endl;
        }

    // Copy constructor
        template<class T0> inline BaseArray(const BaseArray<T0, TSIZE> &rhs)
        {
            std::cout<<"BaseArray::BaseArray(const BaseArray<T0, TSIZE> &rhs)"<<std::endl;
            for(unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] = rhs[i];
            }
        }

    // Initializer list constructor
        template<class T0> inline BaseArray(const std::initializer_list<T0>& rhs)
        {
            std::cout<<"BaseArray::BaseArray(const std::initializer_list<T0>& rhs)"<<std::endl;
            const T0* it = rhs.begin();
            for (unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] = *it;
                ++it;
            }
        }

    // Destructor
        inline ~BaseArray()
        {
            std::cout<<"BaseArray::~BaseArray()"<<std::endl;
        }

    // Subscript operator
        inline const T& operator[](const unsigned int i) const
        {
            std::cout<<"BaseArray::operator[](const unsigned int i) const"<<std::endl;
            return _data[i];
        }
        inline T& operator[](const unsigned int i)
        {
            std::cout<<"BaseArray::operator[](const unsigned int i)"<<std::endl;
            return _data[i];
        }

    // Assignment operator
        template<class T0> inline BaseArray<T, TSIZE>& operator=(const BaseArray<T0, TSIZE>& rhs)
        {
            std::cout<<"BaseArray::operator=(const BaseArray<T0, TSIZE>& rhs)"<<std::endl;
            for (unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] = rhs[i];
            }
            return *this;
        }

    // Sum assignment operator
        template<class T0> inline BaseArray<T, TSIZE>& operator+=(const BaseArray<T0, TSIZE>& rhs)
        {
            std::cout<<"BaseArray::operator+=(const BaseArray<T0, TSIZE>& rhs)"<<std::endl;
            for (unsigned int i = 0; i < TSIZE; ++i) {
                _data[i] += rhs[i];
            }
            return *this;
        }

    // Sum operator
        template<class T0> inline BaseArray<typename std::common_type<T, T0>::type, TSIZE> operator+(const BaseArray<T0, TSIZE>& rhs) const
        {
            std::cout<<"BaseArray::operator+(const BaseArray<T0, TSIZE>& rhs)"<<std::endl;
            return BaseArray<typename std::common_type<T, T0>::type, TSIZE>(*this) += rhs;
        }

    // Data members
    protected:
        T _data[TSIZE];
};

// MAIN
int main()
{
    BaseArray<double, 3> a({1., 2., 3.});
    BaseArray<double, 3> b({4., 5., 6.});
    BaseArray<double, 3> c({7., 8., 9.});
    BaseArray<double, 3> x;
    std::cout<<"------------------------------------------------------------"<<std::endl;
    x = a+b+c;
    std::cout<<"------------------------------------------------------------"<<std::endl;
    return 0;
} 
```

它产生输出：

```
BaseArray::BaseArray(const std::initializer_list<T0>& rhs)
BaseArray::BaseArray(const std::initializer_list<T0>& rhs)
BaseArray::BaseArray(const std::initializer_list<T0>& rhs)
BaseArray::BaseArray()
------------------------------------------------------------
BaseArray::operator+(const BaseArray<T0, TSIZE>& rhs)
BaseArray::operator+=(const BaseArray<T0, TSIZE>& rhs)
BaseArray::operator[](const unsigned int i) const
BaseArray::operator[](const unsigned int i) const
BaseArray::operator[](const unsigned int i) const
BaseArray::~BaseArray()
BaseArray::operator+(const BaseArray<T0, TSIZE>& rhs)
BaseArray::operator+=(const BaseArray<T0, TSIZE>& rhs)
BaseArray::operator[](const unsigned int i) const
BaseArray::operator[](const unsigned int i) const
BaseArray::operator[](const unsigned int i) const
BaseArray::~BaseArray()
BaseArray::~BaseArray()
BaseArray::~BaseArray()
------------------------------------------------------------
BaseArray::~BaseArray()
BaseArray::~BaseArray()
BaseArray::~BaseArray()
BaseArray::~BaseArray()

Process returned 0 (0x0)   execution time : 0.015 s
Press any key to continue. 
```

我听说过 C++2011 的“移动语义”和“移动构造函数”，我想知道是否有办法在这段代码中避免一些临时的。这是真的还是假的？

如果可能的话，怎么做（如果有人可以写一个例子，那就太好了，因为我没有清楚地理解我在移动语义上找到的文档）？

# objective-c - 获取包含当前行的节数

> ID：11762092
> 
> 赞同：0
> 
> 时间：2012-08-01T15:04:29.893
> 
> 标签：objective-c, ios, uitableview

我的应用程序有 4 个部分的 uitableview。在每个部分中，都有一些单元格必须与另一部分中的单元格不同。所以在这个方法中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我制作了一个变量 `NSInteger row = [indexPath row];` ，以便获得当前行（单元格）的编号。我怎样才能在这里获得包含该行的部分的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:07:14.513

它很简单:)

```
NSInteger section = [indexPath section]; 
```

# ivy - 更改 ivy.xml 文件作为传递依赖项调用

> ID：11762096
> 
> 赞同：-3
> 
> 时间：2012-08-01T15:04:54.447
> 
> 标签：ivy

我正在使用 ivy 来解决依赖关系，我拥有的直接依赖关系是 jdom，其中 ivy.xml 上的条目为

```
 <dependency org="org.jdom" name="jdom" rev="2.0.2"/> 
```

这会调用其他几个 jar 作为传递依赖项 - 不幸的是，根据[Jaxen 错误](http://jira.codehaus.org/browse/JAXEN-217)和关于 SO [here](https://stackoverflow.com/questions/8295458/maven-failure-to-find-maven-pluginsmaven-cobertura-plugin)和[here](https://stackoverflow.com/questions/8337616/couldnt-run-build-using-maven-because-of-an-error-in-pom-xml)的各种问题，jaxen 有一个非工作依赖项。不幸的是，这些问题是通过修复一个 maven pom 来回答的。

我的问题是我可以在我的常春藤设置中做些什么来为 jaxen 使用更正的常春藤文件，或者只是抑制 jaxen 尝试加载 findbugs 和 cobertura？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:37:44.440

Ivy 允许从解析中[排除](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/artifact-exclude.html)指定 的[依赖项。](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependencies.html)

这将从依赖项中排除 jaxen：

```
<dependency org="org.jdom" name="jdom" rev="2.0.2">
  <exclude module="jaxen"/>
</dependency> 
```

这将排除 cobertura 和 findbugs

```
<dependency org="org.jdom" name="jdom" rev="2.0.2">
  <exclude name="maven-cobertura-plugin" />
  <exclude name="maven-findbugs-plugin" />
</dependency> 
```

# django - Django：在 Field.null 或 Field.blank 中将默认值更改为 True

> ID：11762097
> 
> 赞同：-1
> 
> 时间：2012-08-01T15:05:00.063
> 
> 标签：django, orm, model

我想我在文档中错过了它，但只是找不到。
如何将 Field.null 和 Field.blank 的默认行为设置为 True 而不是 False ？
我只是不想在每个字段声明中都这样做：

```
class Person(models.Model):
   birthdate = models.DateField(blank=True) 
```

我有很多字段默认为空白=真，所以我只想：

```
class Person(models.Model):
   birthdate = models.DateField() 
```

并且行为将与第一个相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:09:57.177

从初始化器中派生一个子类`DateField`并覆盖关键字参数。

# backbone.js - 按属性值过滤骨干集合

> ID：11762105
> 
> 赞同：43
> 
> 时间：2012-08-01T15:05:12.823
> 
> 标签：backbone.js, underscore.js, backbone.js-collections

我有一个定义的模型和一个集合：

```
var Box = Backbone.Model.extend({
    defaults: {
        x: 0,
        y: 0,
        w: 1,
        h: 1,
        color: "black"
    }

});

var Boxes = Backbone.Collection.extend({
    model: Box
}); 
```

当集合中填充了模型时，我需要一个由 Box 模型组成的新 Boxes 集合，该模型具有包含在完整集合中的特定颜色属性，我这样做是这样的：

```
var sorted = boxes.groupBy(function(box) {
    return box.get("color");
});

var red_boxes = _.first(_.values(_.pick(sorted, "red")));

var red_collection = new Boxes;

red_boxes.each(function(box){
    red_collection.add(box);
});

console.log(red_collection); 
```

这行得通，但我发现它有点复杂和低效。有没有办法以更简单的方式做同样的事情？

这是我描述的代码：http: [//jsfiddle.net/HB88W/1/](http://jsfiddle.net/HB88W/1/)

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-08-01T15:29:51.797

我喜欢返回集合的新实例。这使得这些过滤方法可链接（`boxes.byColor("red").bySize("L")`例如）。

```
var Boxes = Backbone.Collection.extend({
    model: Box,

    byColor: function (color) {
        filtered = this.filter(function (box) {
            return box.get("color") === color;
        });
        return new Boxes(filtered);
    }
});

var red_boxes = boxes.byColor("red") 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-08T13:56:29.680

请参阅[http://backbonejs.org/#Collection-where](http://backbonejs.org/#Collection-where)

```
var red_boxes = boxes.where({color: "red"});

var red_collection = new Boxes(red_boxes); 
```

# ant - H5BP 构建脚本部署

> ID：11762107
> 
> 赞同：0
> 
> 时间：2012-08-01T15:05:17.777
> 
> 标签：ant, build-automation, html5boilerplate

我试图让我的构建脚本在构建后部署到我的开发环境中，但我真的不知道如何做到这一点。如果我只是将代码直接写入 project.xml，我会在此过程中首先执行（即使 project.xml 是最后在 build.xml 中导入的）。

如果我将代码包装在这样的目标中：

```
 <target name="-publish" depends="-copy">
    <!-- Copy to developing server -->
    <echo message="Publish to development server..."/>
</target> 
```

它根本不会被执行。取决于副本，因为它似乎最后执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:08:45.837

弄清楚了。要让发布内容最后发生，您只需在调用中指定它，如下所示：

```
ant build publish 
```

我从目标名称中删除了破折号。我猜破折号只是指定本地目标名称。

# javascript - 如何使js成为通过ajax提交的rails表单的格式？

> ID：11762111
> 
> 赞同：2
> 
> 时间：2012-08-01T15:05:25.753
> 
> 标签：javascript, jquery, ruby-on-rails, forms

我有这个表格：

```
<div id='relationship_<%= relationship.id %>'>
  <% @value_id = "value_#{relationship.id}" %>
  <% @div_slider_id = "slider_value_#{relationship.id}" %>
  <% @form = "edit_relationship_#{relationship.id}"%>
  <%= form_for(relationship, :remote => true) do |f| %>
    <div id="<%= @div_slider_id %>"></div>
    <%= f.hidden_field :value, :id => "#{@value_id}" %>
  <% end %>
</div>

<script type='text/javascript'>
$(document).ready( function() {
  $(function() {
    $( "#<%= @div_slider_id %>" ).slider({
      orientation: "horizontal",
      range: "min",
      value: <%= relationship.value || 1 %>,
      min: 0,
      max: 100,
      change: function( event, ui ) {
        $( "#<%= @value_id %>" ).val( ui.value ); 
```

如果用户移动滑块，表单将作为 HTML 发送，而不是 JS

```
 $("#<%= @form %>").submit();
      }
    });
    $( "#<%= @value_id %>" ).val( $( "#<%= @div_slider_id %>" ).slider( "value" ) );
  });
});
</script> 
```

移动滑块时如何以 JS 格式发送该表单？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:13:49.857

向表单提交添加一个 ID：

```
<%= f.submit 'Ready', :id => "button_submit" %> 
```

然后在 JS 而不是这个：

```
$("#<%= @form %>").submit(); 
```

做

```
$("#buttom_submit").click(); 
```

或者：尝试在表单声明中添加数据类型：

```
<%= form_for(relationship, :remote => true, :html => { "data-type" => :js } ) do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:43:26.657

1.  设置relationship_form id 为form

2\. 更改代码中的这一行：

```
$("#<%= @form %>").submit(); 
```

到

```
$js.post("/relationship.js", $js("#relationship_form").serialize()); 
```

# algorithm - 根据索引产生独特颜色的算法

> ID：11762119
> 
> 赞同：1
> 
> 时间：2012-08-01T15:05:56.820
> 
> 标签：algorithm, colors

全部，

有没有什么好的算法可以根据数组中的索引生成唯一的颜色？

这当然会在 UI 中使用，用于设置多个动态按钮的背景颜色。

现在有了 .Net（以及 Java），支持以下方法：

```
Color.FromArgb
Color.FromName 
```

FromArgb 可以采用包含 argb 颜色的 32 位整数。

但是，算法方法可能会导致某些颜色的顺序过于相似，具体取决于数组中有多少项目。而且，前景色与背景相似。

我能想到的唯一方法是创建某种颜色数组，其中包含一组预定义的颜色。当然，这是手动代码工作，但这样你可以在一个小范围内获得一组不同的颜色，视觉上彼此不同，然后在最后重复序列。

另一种方法是使用以下方法生成颜色数组：

```
Enum.GetValues(typeof(KnownColor) 
```

有什么建议么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:10:13.583

散列索引，并将散列的低 32 位作为您的颜色。这看起来是随机的，但应该会产生均匀的颜色分布。不保证所选颜色在视觉上会与彼此或背景不同，但可以提供。

您还可以获取整个色谱，将其切成`n`均匀间隔的颜色，并将它们分配给数组的每个元素，假设您知道数组的大小。

[https://stackoverflow.com/a/43235/684934](https://stackoverflow.com/a/43235/684934)也可能提供好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:46:27.360

RGB 颜色形成颜色空间的 3D 立方体。首先选择这个立方体的角（0 或 255 个值）。然后将立方体细分为8个立方体的网格，取新形成的顶点。再次细分，分成 64 个立方体，并取新形成的顶点。这将为您提供越来越接近更高指数的颜色。

```
IEnumerable<Color> GeneratePalette()
{
    for (int scale = 1; scale < 256; scale *= 2)
    {
        for (int r = 0; r <= scale; r++)
        for (int g = 0; g <= scale; g++)
        for (int b = 0; b <= scale; b++)
        {
            if (scale == 1 || (r & 1) == 1 || (g & 1) == 1 || (b & 1) == 1)
            {
                yield return new Color
                {
                    A = 255,
                    R = (byte) (255 * r / scale),
                    G = (byte) (255 * g / scale),
                    B = (byte) (255 * b / scale),
                };
            }
        }
    }
} 
```

前几个颜色：

```
#FF000000 
#FF0000FF 
#FF00FF00 
#FF00FFFF 
#FFFF0000 
#FFFF00FF 
#FFFFFF00 
#FFFFFFFF 
#FF00007F 
#FF007F00 
#FF007F7F 
#FF007FFF 
...
#FFFF7FFF 
#FFFFFF7F 
#FF00003F 
```

# .net - 带有参数的 VBScript CreateObject

> ID：11762120
> 
> 赞同：1
> 
> 时间：2012-08-01T15:06:01.640
> 
> 标签：.net, vbscript, createobject

我正在尝试在 VBS 中打开 Windows 窗体并遇到一些困难:-(

这条线工作正常（我认为）：

```
Set frmPopup = CreateObject("System.Windows.Forms.Form") 
```

但以下在第一行失败：Microsoft VBScript 运行时错误：ActiveX 组件无法创建对象：'System.Drawing.Size'

```
 Set frmPopup.Size = CreateObject("System.Drawing.Size")
    frmPopup.Size.Width = cmintPSPFormWidth
    frmPopup.Size.Height = intPopupHeight 
```

我猜那是因为 System.Drawing.Size 需要调用中指定的 Height 和 Width 参数？

www 谈论使用：

```
Set frmPopup.Size = new System.Drawing.Size(1,2) 
```

但这给了我：变量未定义：“系统”。

我已经从我的 .NET 4 安装文件夹中对 System.Windows.Forms.dll 和 System.Drawing.dll 进行了 regasm，但它仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:05:56.270

大小是一种方法，而不是 ProgID。你可能需要这样的东西：

```
Set frmPopup = CreateObject("System.Windows.Forms.Form")
Set frmDrwg = CreateObject("System.Drawing")
frmDrwg.Size 1, 2 
```

但您必须记住，并非所有 .NET 对象都可以从 VBS 正确实例化。

# eclipse-rap - Eclipse RAP，Tabris：TableViewer 在 iOS 上无法正常工作

> ID：11762122
> 
> 赞同：0
> 
> 时间：2012-08-01T15:06:10.670
> 
> 标签：eclipse-rap

我使用 JFace 创建了一个非常小的 Web 应用程序`TableViewer`。在浏览器中，表格看起来不错，但在使用 Tabris 的 iOS 上，表格列丢失了。

请在[此处](https://github.com/baumato/TabrisSandbox/blob/master/TabrisSandbox/src/org/tobbaumann/tabris/sandbox/Application.java)查看代码。[请在此处](http://dl.dropbox.com/u/962415/browserAndiOS.jpg)比较浏览器和 iOS 版本。我错过了什么？也许我必须更改 CSS 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:42:46.930

尚不支持您从桌面知道的“真实”表格，因为它们不是移动设备上常见的 UI 模式。

表、树和列表始终显示为“列表”。您可以有两列：第一列将是主标题标签，第二列将用作项目的副标题标签。（就像在邮件应用程序中，“发件人”以大粗体显示，“主题”以较小字体显示在下方。）

因此，在您的情况下，我会将两个日期连接到第一列，将主题连接到第二列。

# asp.net - 我可以使用表单 POST 绕过网站登录页面吗？

> ID：11762131
> 
> 赞同：1
> 
> 时间：2012-08-01T15:06:38.253
> 
> 标签：asp.net, forms, post, single-sign-on

我正在尝试将第 3 方提供的产品集成到我的网站中。该第 3 方没有资源为单点登录类型的设置进行代码更改，因此我正在寻找一种通过一些可能的快捷方式提供类似用户体验的方法。我正在考虑的一种方法是使用 HTML POST 将登录凭据直接发布到登录页面上的表单，这有望绕过整个页面并将用户直接引导到经过完全身份验证的主页。有谁知道这是否可行，如果可以，我将如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:05:03.073

我不认为这是可能的。我相信大多数制作精良的身份验证都会在其形式中包含某种随机数，这本质上是为了确保除非您使用他们的表单提交，否则提交将被拒绝。

即使目前他们没有随机数，将来他们可能会有

# json - JSON.stringify URLEncoding我的JSON cookie导致“无效的JSON原语”

> ID：11762132
> 
> 赞同：1
> 
> 时间：2012-08-01T15:06:43.860
> 
> 标签：json, serialization, cookies, urlencode, url-encoding

我有一个站点 cookie，其值为 JSON 对象。我将其序列化为服务器代码中的特定类型，并在作为 cookie 传回时返回 JSON。一切正常，但现在我需要在 javascript 中写入 cookie。

我遇到的问题是 JSON.stringify 是 URLEncoding RAW 值，这在服务器端调用 JavascriptSerializer.Deserialize 时导致“无效 JSON 原语”。它不知道如何处理 URLEncoding。

我宁愿在客户端弄清楚这一点，因为所有现有用户都有未进行 urlencoded 的 cookie。

我需要一个不进行 URLencode 的 JS JSON 序列化程序！

RAW 数据如下所示：

%7B%0A%20%20%22ClientGuid%22%3A%20%222bb1c08a-0813-4739-8f09-9e9576e6f626%22%2C%0A%20%20%22UserId%22%3A%203601%2C%0A%20 %20%22OrganizationId%22%3A%20null%2C%0A%20%20%22OrganizationName%22%3A%20null%2C%0A%20%20%22CampaignId%22%3A%2087%2C%0A%20%20 %22EmailAddress%22%3A%20null%2C%0A%20%20%22LastCommodityId%22%3A%20157%2C%0A%20%20%22LastRegionId%22%3A%201%2C%0A%20%20%22LastCategoryId %22%3A%205%2C%0A%20%20%22LastSpmId%22%3A%200%2C%0A%20%20%22LastSpmCategoryId%22%3A%200%2C%0A%20%20%22ShowDetailsAllCommodities%22 %3A%20错误%0A%7D

应该看起来像：

{ “ClientGuid”：“2bb1c08a-0813-4739-8f09-9e9576e6f626”，“UserId”：3601，“OrganizationId”：null，“OrganizationName”：null，“CampaignId”：87，“EmailAddress”：null，“LastCommodityId” ：157，“LastRegionId”：1，“LastCategoryId”：5，“LastSpmId”：0，“LastSpmCategoryId”：0，“ShowDetailsAllCommodities”：假}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:47:58.747

在将原始数据发送到服务器之前，对原始数据使用[decodeURIComponent ：](http://www.webreference.com/js/column59/7.html)

```
 decodeURIComponent("%7B%0A%20%20%22ClientGuid%22%3A%20%222bb1c08a-0813-4739-8f09-9e9576e6f626%22%2C%0A%20%20%22UserId%22%3A%203601%2C%0A%20%20%22OrganizationId%22%3A%20null%2C%0A%20%20%22OrganizationName%22%3A%20null%2C%0A%20%20%22CampaignId%22%3A%2087%2C%0A%20%20%22EmailAddress%22%3A%20null%2C%0A%20%20%22LastCommodityId%22%3A%20157%2C%0A%20%20%22LastRegionId%22%3A%201%2C%0A%20%20%22LastCategoryId%22%3A%205%2C%0A%20%20%22LastSpmId%22%3A%200%2C%0A%20%20%22LastSpmCategoryId%22%3A%200%2C%0A%20%20%22ShowDetailsAllCommodities%22%3A%20false%0A%7D") 
```

# wso2 - .dbs 文件的 WSO2 DTD

> ID：11762135
> 
> 赞同：0
> 
> 时间：2012-08-01T15:06:56.263
> 
> 标签：wso2, wso2carbon, wso2dss

我在 WSO2 Dataservices 中寻找 .dbs 文件的 DTD。

我提取了所有 jars 并搜索了可以与 .dbs 样本匹配的 DTD 文件，但最后似乎没有 DTD 文件符合条件。

您知道 .dbs 文件是否存在 DTD，如果存在，我在哪里可以找到它？

谢谢您的回答 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:24:19.833

您可以通过位于 carbon public svn 存储库中的以下 URL 访问与 DataService 描述语言关联的架构。[数据服务架构](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/components/data-services/org.wso2.carbon.dataservices.core/src/main/java/org/wso2/carbon/dataservices/core/DataServices.xsd)

# jquery - 同源策略的解决方法，重定向到单独的页面？

> ID：11762138
> 
> 赞同：1
> 
> 时间：2012-08-01T15:07:00.733
> 
> 标签：jquery, same-origin-policy

我有一个 html 页面，它需要使用 ajax 请求访问不同服务器上的资源：

```
 $.ajax({
        url: "externalUrl/myjson.js",       

        }); 
```

但由于“同源政策”，我无法访问该资源。作为一种解决方法，我修改了 html 页面，该页面只是重定向到单独服务器上的新页面。这个新页面调用 ajax 请求没有问题，因为它是从同一来源发出的。这是可接受的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:11:41.053

同源策略不是法律或任何东西，只是浏览器内置的一种措施，以防止 XSRF 和其他东西。如果您找到了适合您的解决方法，那么没有什么是“不可接受的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:41:11.150

尝试将 jsonp 用于[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)中的 dataType 属性。远程服务器也需要支持 jsonp。它将绕过浏览器安全，防止 XSS。

这将绕过 XSS 的浏览器安全性。您调用的 url 也需要返回 jsonp 才能正常工作。

```
$.ajax({
        url: "externalUrl/myjson.js",       
        dataType: jsonp
        }); 
```

# ios - 从 Cordova 应用程序中删除启动画面加载 gif

> ID：11762139
> 
> 赞同：32
> 
> 时间：2012-08-01T15:07:04.523
> 
> 标签：ios, xcode4, cordova

在编写应用程序时，我在覆盖 Cordova 的默认值时遇到问题。

我正在使用 Cordova（以前的 PhoneGap）框架和 Xcode 编写一个 iOS 应用程序。Cordova 让我只需将它拖放到 Xcode 中我的项目的信息选项卡下，即可为项目添加启动画面。这部分工作正常，但有一个默认的加载指示 gif 运行在启动图像的顶部（我不确定它是来自 Xcode 还是来自 Cordova）。

如何删除加载指示器图像？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-09T19:58:56.887

您可以在 Cordova.plist 中删除加载微调器。将 ShowSplashScreenSpinner 设置为 false。

**更新**：在 Cordova 3.0+ 添加`<preference name="ShowSplashScreenSpinner" value="false" />`到您的 config.xml 将实现相同的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-06T16:55:40.703

我刚刚删除了启动图像源并将启动屏幕文件设置为 mainviewcontroller

转到常规设置 - > 在底部启动图像资源和启动屏幕设置可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-17T07:58:07.603

如果您有 IOS 设备，我有一个可以使用的工作方法，它解决了我在为 IOS 编译时遇到的问题。（首先我想说您需要在正确的文件夹中添加一个图标并启动，否则 Cordova 将为您提供默认的图标，并确保它们足够大，以便可以相应地生成资源）：

1.  删除使用提供的 SplashScreen 插件

```
 cordova plugin rm cordova-plugin-splashscreen 
```

2.  将您的图标放在 resources/ios/ 文件夹中并命名

> 图标.png

3.  转到您目录的路径并添加您的启动图像（确保 splash.png 为 2800px * 2800px）

> 飞溅.png [![在此处输入图像描述](../Images/c9a91ab6b27e4aded13f8adf80f68c56.png)](https://i.stack.imgur.com/YbC8B.png)

4.  如果你已经安装了 ios 平台，请删除它，然后重新添加它

```
 ionic cordova platform rm ios
        ionic cordova platform add ios 
```

5.运行以下命令生成你的图标

```
 ionic cordova resources ios --icon 
```

如果为 android 构建

```
 ionic cordova resources android --icon 
```

6.将以下行添加到您的 config.xml

```
 <preference name="SplashScreen" value="none" />
    <preference name="SplashScreenDelay" value="0" />
    <preference name="AutoHideSplashScreen" value="true" />
    <preference name="FadeSplashScreen" value="false" />
    <preference name="ShowSplashScreenSpinner" value="false" /> 
```

这应该解决默认图标并删除默认情况下 Cordova 添加到 IOS 项目的启动画面。我希望它有帮助！

# jquery - JQuery TableSorter：如何仅在一列上显示箭头

> ID：11762141
> 
> 赞同：2
> 
> 时间：2012-08-01T15:07:10.160
> 
> 标签：jquery, sorting, html-table, tablesorter

我正在实现***jquery 的*** ***tablesorter***。但我似乎无法找到一种方法来执行以下操作：

1.  只在一列上显示排序箭头
2.  只允许通过单击该列对表格进行排序，单击其他列时不执行任何操作。

我谷歌了很多，但无济于事。

这是我的桌子：

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>First Name</th> 
    <th>Email</th> 
    <th>Due</th> 
    <th>Web Site</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith</td> 
    <td>John</td> 
    <td>jsmith@gmail.com</td> 
    <td>$50.00</td> 
    <td>http://www.jsmith.com</td> 
</tr> 
<tr> 
    <td>Bach</td> 
    <td>Frank</td> 
    <td>fbach@yahoo.com</td> 
    <td>$50.00</td> 
    <td>http://www.frank.com</td> 
</tr> 
<tr> 
    <td>Doe</td> 
    <td>Jason</td> 
    <td>jdoe@hotmail.com</td> 
    <td>$100.00</td> 
    <td>http://www.jdoe.com</td> 
</tr> 
<tr> 
    <td>Conway</td> 
    <td>Tim</td> 
    <td>tconway@earthlink.net</td> 
    <td>$50.00</td> 
    <td>http://www.timconway.com</td> 
</tr> 
</tbody> 
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:18:02.163

看看这里[http://tablesorter.com/docs/#Configuration](http://tablesorter.com/docs/#Configuration)

在标题属性

# javascript - ASP.net 自定义控件，下拉值必须填充服务器端，回发时选择的值丢失？

> ID：11762142
> 
> 赞同：0
> 
> 时间：2012-08-01T15:07:11.063
> 
> 标签：javascript, asp.net, postback, selectedvalue

嗨，我想在看到不同的例子感到非常困惑之后，我需要一些澄清。

我正在创建一个带有 3 个下拉框的自定义日期控件，有点像你在 Facebook 的登录页面上看到的。

我的控件在其客户端功能方面工作正常，当尝试检索值服务器端时出现问题。

似乎当我通过 JavaScript 填充下拉列表时，当我转到服务器端时，它完全不知道所选值。

在阅读之后，我决定将子控件移至 OnInit 函数，在此我调用注册启动脚本以通过 JavaScript 填充下拉列表。

从那以后，我不得不更改它以添加服务器端的值。到目前为止，它看起来像这样。

```
 protected override void OnInit(EventArgs e)
    {

        /* create controls and add some JavaScript stuff here*/

        /*Problem below*/

        if (!Page.IsPostBack)
        {
            /* These seemably have to be here inspite the fact we can populate with java, issue: on postback selected values are lost. */
            for (int i = 1; i <= 31; i++)
            {
                ddlDay.Items.Add(new ListItem(i.ToString()));
            }

            for (int i = 1; i <= 12; i++)
            {
                ddlMonth.Items.Add(new ListItem(i.ToString()));
            }

            for (int i = 1901; i <= 2012; i++)
            {
                ddlYear.Items.Add(new ListItem(i.ToString()));
            }
        }

        ScriptManager.RegisterStartupScript(this, Page.GetType(), Guid.NewGuid().ToString(), "<script type='text/javascript'>DateControlRender(document.getElementById('" + this.ClientID + "'));</script>", false);

        base.OnInit(e);
    } 
```

无论如何我可以解决这个问题吗？我主要担心的是这会大大增加页面大小。

先感谢您。

此致

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:29:38.103

如果这是一个自定义控件，我猜你`ddls`是动态创建的。在这种情况下，请记住您必须在“init 事件”中创建它们。如果没有，`viewstate`将无法正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:17:33.710

底线...您不能使用 javascript 填充下拉列表并让 ASP.NET 管道能够重新创建控件的结构，以便有一个 SelectedItem/SelectedValue。为了让 ASP.NET 管道能够捕获用户选择的值并将其分配给控件，必须在 Init 阶段结束时创建*并填充*控件。在该阶段之后应用选择，但控件及其值必须与发送给客户端时的方式相同。

所以你有几个选择......完全在服务器端创建控件并放弃javascript。或者您可以使用 javascript，然后从[Form](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form)变量中获取值。即使控件不是 ASP.NET 页面的一部分，您仍然可以访问来自客户端的[表单](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form)变量中所有 HTML 输入元素的发布值。

# sql-server - SQL Server 中 Count(*) 的性能问题

> ID：11762144
> 
> 赞同：0
> 
> 时间：2012-08-01T15:07:12.650
> 
> 标签：sql-server, performance, count, aggregate

我在 SQL Server 2008 中运行的查询遇到了一些性能问题。我有以下查询：

查询1：

```
 SELECT GroupID, COUNT(*) AS TotalRows FROM Table1 
    INNER JOIN (
        SELECT Column1 FROM Table2 WHERE GroupID = @GroupID
    ) AS Table2
     ON Table2.Column1 = Table1.Column1 
WHERE CONTAINS(Table1.*, @Word) GROUP BY GroupID 
```

表 1 包含大约 500,000 行。Table2 包含大约 50,000 个，但最终将包含数百万个。玩弄查询，我发现按如下方式重写查询会将查询的执行时间减少到 1 秒以下。

查询 2：

```
SELECT GroupID FROM Table1 
    INNER JOIN (
        SELECT Column1 FROM Table2 WHERE GroupID = @GroupID
    ) AS Table2 ON Table2.Column1 = Table1.Column1 
WHERE CONTAINS(Table1.*, @Word) 
```

我不明白的是这是一个简单的计数查询。如果我对表 1 执行以下查询，它会在 < 1 秒内返回：

查询 3：

```
SELECT Count(*) FROM Table1 
```

此查询返回大约 500,000 作为结果。

但是，上面提到的原始查询（查询 1）仅返回 50,000 的计数并且执行需要 3 秒，即使简单地删除 GROUP BY（查询 2）将执行时间减少到 < 1 秒。

我不认为这是一个索引问题，因为我已经在相应的列上有了索引。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:20:39.950

执行一个简单的`COUNT(*) FROM table`可以对聚集索引进行更有效的扫描，因为它不必关心任何过滤、连接、分组等。包括全文搜索谓词和神秘子查询的查询必须做很多事情更多的工作。计数不是那里最昂贵的部分 - 我敢打赌，如果您将计数排除在外，但将分组留在内部，它们仍然相对较慢，例如：

```
SELECT GroupID FROM Table1 
    INNER JOIN (
        SELECT Column1 FROM Table2 WHERE GroupID = @GroupID
    ) AS Table2 ON Table2.Column1 = Table1.Column1 
WHERE CONTAINS(Table1.*, @Word)
GROUP BY GroupID; 
```

查看[免费的 SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/sql-server-query-view.asp) *中[提供的实际执行计划](http://www.wperfumes.com/plan.zip)，我看到：

![在此处输入图像描述](../Images/63a7c34de7ee4febc5599560f344fba1.png)

还有这个：

![在此处输入图像描述](../Images/3961d1467a07e9ec0d067b38423322a6.png)

这让我相信你应该：

1.  更新两者的统计信息`Inventory`，`A001_Store_Inventory`以便优化器可以获得更好的行数估计（这可能会导致更好的计划形状）。
2.  确保`Inventory.ItemNumber`和`A001_Store_Inventory.ItemNumber`是相同的数据类型以避免隐式转换。

(*)*免责声明：我为 SQL Sentry 工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:20:45.563

您应该查看查询计划以了解 SQL Server 正在执行哪些操作来检索您请求的数据。另外，我认为最好将原始查询重写如下：

```
SELECT
  Table1.GroupID  -- When you use JOINs, it's always better to specify Table (or Alias) names
  ,COUNT(Table1.GroupID) AS TotalRows
FROM
  Table1 
  INNER JOIN
  Table2 ON
    (Table2.Column1 = Table1.Column1) AND
    (Table2.GroupID = @GroupID)
WHERE
  CONTAINS(Table1.*, @Word)
GROUP BY
  Table1.GroupID 
```

另外，请记住，简单的 COUNT 和带有 JOIN 和 GROUP BY 的 COUNT 不是一回事。在一种情况下，这只是通过索引并进行计数的问题，在另一种情况下，还涉及其他表和分组，这可能会很耗时，具体取决于几个因素。

# mysql - Sphinx vs. MySql - 搜索好友列表（效率/速度）

> ID：11762147
> 
> 赞同：16
> 
> 时间：2012-08-01T15:07:19.877
> 
> 标签：mysql, search, indexing, sphinx

我正在将我的应用程序搜索从 MySQL 移植到 Sphinx 并且很难弄清楚这一点，或者它是否甚至需要移植（我真的想知道是否值得在这种特定情况下使用 sphinx 以提高效率/速度）：

```
users
uid uname
  1    alex
  2    barry
  3    david

friends
uid | fid
  1     2
  2     1
  1     3
  3     1 
```

详细信息是：
- **InnoDB**
-**用户：** uid 上的索引，uname 上的索引
-**朋友：** uid，fid 上的组合索引

通常，用 mysql 搜索 alex 的所有朋友：

```
$uid = 1
$searchstr = "%$friendSearch%";
$query = "SELECT f.fid, u.uname FROM friends f 
          JOIN users u ON f.fid=u.uid
          WHERE f.uid=:uid AND u.uname LIKE :friendSearch";
$friends = $dbh->prepare($query);
$friends->bindParam(':uid', $uid, PDO::PARAM_INT);
$friends->bindParam(':friendSearch', $searchstr, PDO::PARAM_STR);
$friends->execute(); 
```

使用 sphinx vs mysql 找到 alex 的朋友是否更有效率，或者这是否有点矫枉过正？
如果 sphinx 会更快，因为列表中有数千人，索引查询会是什么样子？我将如何删除与 sphinx 不再存在的友谊，在这种情况下我可以举一个详细的例子吗？我应该更改此查询以使用 Sphinx 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T07:55:06.463

好的，这就是我看到这个工作的方式。

我对 MongoDB 有完全相同的问题。MongoDB“提供”了搜索功能，但就像 MySQL 一样，你永远不应该使用它们，除非你想被 IO、CPU 和内存问题所困扰，并且被迫使用比平时更多的服务器来处理你的索引。

如果使用 Sphinx（或其他搜索技术），整个想法是通过拥有高性能索引搜索器来降低每台服务器的成本。

然而，Sphinx 不是存储引擎。查询跨表的确切关系并不那么简单，他们已经用 SphinxQL 稍微修正了这一点，但由于全文索引的性质，它仍然不像你在 MySQL 中那样进行整体连接。

相反，我会将关系存储在 MySQL 中，但在 Sphinx 中有一个“用户”索引。

在我的网站中，我个人有 2 个索引：

*   主要（房屋用户、视频、频道和播放列表）
*   help（帮助系统搜索）

这些增量每分钟更新一次。由于实时索引有时仍然是实验性的，而且我个人已经看到了高插入/删除率的问题，所以我坚持进行增量更新。因此，我将使用增量索引来更新我网站的主要可搜索对象，因为这比实时索引（来自我自己的测试）占用的资源更少且性能更高。

请注意，为了通过 delta 处理删除以及您的 Sphinx 集合，您将需要一个 killlist 和某些过滤器用于您的 delta 索引。这是我的索引中的一个示例：

```
source main_delta : main
{
    sql_query_pre = SET NAMES utf8
    sql_query_pre =
    sql_query = \
        SELECT id, deleted,  _id, uid, listing, title, description, category, tags, author_name, duration, rating, views, type, adult, videos, UNIX_TIMESTAMP(date_uploaded) AS date_uploaded \
        FROM documents \
        WHERE id>( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 ) OR update_time >( SELECT last_index_time FROM sph_counter WHERE counter_id=1 )

    sql_query_killlist = SELECT id FROM documents WHERE update_time>=( SELECT last_index_time FROM sph_counter WHERE counter_id=1 ) OR deleted = 1
} 
```

这每分钟处理一次删除和添加，这对于真正的 Web 应用程序来说几乎是实时的。

所以现在我们知道如何存储我们的索引了。我需要谈谈关系。Sphinx（即使它有 SphinxQL）不会跨数据进行整体连接，所以我个人建议在 Sphinx 之外进行关系，不仅如此，而且正如我所说，这个关系表会得到高负载，所以这可能会影响狮身人面像指数。

我会做一个查询来挑选所有的 id 并使用那组 id 使用 sphinx API 上的“过滤器”方法将主索引过滤到特定的文档 id。完成此操作后，您可以像往常一样在 Sphinx 中搜索。这是迄今为止我发现的处理此问题的最有效的方法。

始终要记住的关键是，Sphinx 是一种搜索技术，而 MySQL 是一种存储技术。记住这一点，你应该没问题。

## 编辑

正如@NB 所说（我在回答中忽略了）Sphinx 确实有 SphinxSE。尽管它是原始的并且仍处于其开发的测试阶段（与实时索引相同），但它确实为 Sphinx 提供了一个实际的 MyISAM/InnoDB 类型的存储。这太棒了。但是有一些警告（与任何事情一样）：

*   语言是原始的
*   连接是原始的

但是，它可以/可以完成您正在寻找的工作，因此请务必对其进行调查。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T19:46:19.777

所以我将继续概述一下 - 我认为 sphinx 的最佳用例是什么，你可以决定它是否或多或少符合你想要做的事情。

如果您要做的只是一个字符串搜索一个字段；然后使用 MySQL，您可以毫不费力地进行通配符搜索，并且诚实地在其上使用索引，除非您期望数百万行您会没事的。

现在以 facebook 为例，这不仅是索引名称，而且是页面等，甚至是任何高级搜索字段。Sphinx 可以从 MySQL、PostGRES、MongoDB 中获取 x 列（在此处插入您想要的数据库）并在所有这些中创建可搜索的全文索引。

例子：

您有 5 个字段（门牌号、街道、城市、州、邮政编码），并且您希望对所有这些字段进行全文搜索。现在使用 MySQL，您可以对每一个进行搜索，但是使用 sphinx，您可以将它们全部放在一起，然后 sphinx 根据您传入的字符串和由此产生的匹配项进行一些很棒的统计结果。

此链接：[PHP Sphinx 搜索](http://www.ibm.com/developerworks/library/os-php-sphinxsearch/)在引导您了解它的外观以及事物如何协同工作方面做得很好。

因此，您并没有真正替换数据库；您只是向它添加了一个特殊的守护程序（sphinx），它允许您创建专门的索引并针对它运行您的全文搜索。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-19T15:05:09.537

没有索引可以帮助您进行此查询，因为您正在寻找作为中缀而不是前缀的字符串（您正在寻找`'%friendname%'`，而不是`'friendname%'`.

此外，该`LIKE`解决方案会让您陷入困境：假设您正在寻找一个叫**Ann**的朋友。该`LIKE`表达式还将匹配**Marianne**、**Danny**等。表达式中没有“完整单词”的概念`LIKE`。

一个真正的解决方案是使用文本索引。`FULLTEXT`索引仅在 上可用，`MyISAM`MySQL **5.6**（此时不是 GA）将`FULLTEXT`在 上引入`InnoDB`。

否则，您确实可以使用**Sphinx**来搜索文本。

只有数百或数千，您可能不会看到很大的差异，除非您真的要每秒进行多次搜索。有了更大的数字，您最终会意识到全表扫描不如 Sphinx 搜索。

我经常使用 Sphinx，在数十甚至数亿大文本上，并且可以证明它就像一个魅力。

当然，Sphinx 的问题在于它是一个外部工具。使用 Sphinx，您必须告诉它从数据库中读取数据。您可以每**5**分钟、每小时等执行一次（`crontab`例如使用） 。因此，如果行是d，则它们只会在下次从表中读取数据时从 sphinx 中删除。如果你能忍受 - 这是最简单的解决方案。**`DELETE`**

 **如果不能，狮身人面像中有实时索引，因此您可以直接指示它删除某些行。我无法解释此端口中的所有内容，因此这里有几个链接供您参考：

[索引更新](http://sphinxsearch.com/docs/current.html#live-updates)

[实时索引](http://sphinxsearch.com/docs/current.html#rt-indexes)

作为最终结论，您有三个选择：

1.  假设您不会有高负载，请冒险并使用全表扫描。
2.  等待 MySQL **5.6**并`FULLTEXT`与 InnoDB 一起使用。
3.  使用狮身人面像

在这个时间点，我肯定会使用选项 #3：使用 sphinx。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-30T09:48:52.840

看看我在这里提出的解决方案： [https ://stackoverflow.com/a/22531268/543814](https://stackoverflow.com/a/22531268/543814)

你朋友的名字可能很短，你的查询看起来很简单。您可能负担得起将所有后缀存储在单独的表中，并指向原始表以获取全名。

这将以更多的存储空间为代价为您提供快速的中缀搜索。

此外，为避免在搜索“Ann”时找到“Marianne”，请考虑：

*   使用区分大小写的搜索。（易碎；如果您的用户输入的姓名或搜索查询的大小写不正确，则可能会损坏。）
*   查询后，进一步过滤您的搜索结果，要求搜索词周围的单词边界（例如 regex `\bAnn\b`）。**

# jquery - Jquery Array 多个项目

> ID：11762148
> 
> 赞同：0
> 
> 时间：2012-08-01T15:07:25.910
> 
> 标签：jquery, arrays

我想获取页面中的项目列表并将它们推送到数组中：

```
$('#softwareUpdates article').each(function(index) {    
   productList.push({ 
      class: $(this).attr("class"),
      text: $(this).attr("su_title")
   });
}); 
```

但是我想避免多个项目，所以当我当前检查 productList 数组时，我有：

```
 Item 1, Item1, Item 2, Item 3, Item 3, Item 4 
```

我想要的是：

```
 Item 1, Item 2, Item 3, Item 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:13:04.907

I pulled the following code from [http://hackingon.net/post/Handy-Javascript-array-Extensions-e28093-distinct().aspx](http://hackingon.net/post/Handy-Javascript-array-Extensions-e28093-distinct().aspx).

```
Array.prototype.distinct = function() {
  var derivedArray = [];
  for (var i = 0; i < this.length; i += 1) {
    if (!derivedArray.contains(this[i])) {
      derivedArray.push(this[i])
    }
  }
  return derivedArray;
}; 
```

There are also javascript libraries equivalent to .NET's Linq. Any of those should work. Here's one: [http://jsinq.codeplex.com/](http://jsinq.codeplex.com/)

# modx - 无论如何将参数从片段传递到块

> ID：11762150
> 
> 赞同：0
> 
> 时间：2012-08-01T15:07:30.920
> 
> 标签：modx, modx-revolution, modx-chunks

我正在学习 modx 并停留在一个点上。我想仅通过 POST 将“uid”值发布到下一页，并希望设置隐藏字段，其中包含“uid”作为值。我相信实际上它不允许将值传递给块。我想知道正确的方法是什么，以便我可以获取 POST 数据并在块中使用该值？

**我的程序**

1）我创建了资源（文档），其中包含对片段的调用，然后是块

2) 片段包含从 POST 检索到的值

3）块包含一个表单和字段，我想在这个表单中注入那个 POST 值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:41:12.510

有几种方法可以做到这一点。

1) 直接从片段返回 uid 值（我们称之为**getPostData**），并将片段调用放在块中的隐藏字段中，如下所示：

```
<input type="hidden" name="uid" value="[[!getPostData]]" /> 
```

请注意该片段未缓存（`[[!`开始标记），否则将缓存第一个表单提交。

2) 将片段调用放在块标记中，并将值传递到占位符中：

```
[[$myChunk?uid=`[[!getPostData]]`]] 
```

...并在您的块中为“uid”设置一个未缓存的占位符：

```
<input type="hidden" name="uid" value="[[!+uid]]" /> 
```

3)**推荐：**在您的代码段中使用`setPlaceholders()`以将内容输出到页面中任何位置的占位符 - 您可以使用它来输出到多个占位符：

```
<?php
// please sanitise your POST values, this is just an example
$placeholders = array();
$placeholders['uid'] = $_POST['uid'];
$placeholders['email'] = $_POST['email'];

$modx->setPlaceholders($placeholders); 
```

...和你的块：

```
<input type="hidden" name="uid" value="[[!+uid]]" />
<input type="email" name="email" value="[[!+email]]" /> 
```

文档：[http ://rtfm.modx.com/display/revolution20/modX.setPlaceholders](http://rtfm.modx.com/display/revolution20/modX.setPlaceholders)

# php - PHP & JSON : 多维 JSON 组合格式调整

> ID：11762151
> 
> 赞同：0
> 
> 时间：2012-08-01T15:07:32.947
> 
> 标签：php, mysql, json

到目前为止，我的 JSON 输出是这样的

```
[{"dateClose":"2012-07-06","countno":"6","cumulative_sumc":"103"}],[{"dateOpen":"2012-05-29","openNo":"73","cumulative_sum":"73"}] 
```

实际上我希望它像下面一样，只是在一个多维数组中

```
[{"dateClose":"2012-07-06","countno":"6","cumulative_sumc":"103","dateOpen":"2012-05-29","openNo":"73","cumulative_sum":"73"}] 
```

我一直在对 project1[] 和 project[] 数组使用 array_merge,array_combine，但没有运气。我的示例代码如下。任何帮助将不胜感激。谢谢。

```
 <?php
require_once('mysql.inc.php');
$dbc =@mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD,DB_NAME);
$x="Set @csum := 0";
$q = "
select dateClose, countno, (@csum := @csum + countno) as cumulative_sumc
from dateclose
order by dateClose";
$rx = mysqli_query($dbc, $x);
$r = mysqli_query($dbc, $q);
if (mysqli_num_rows($r) > 0) {
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
$project[] = $row;
}}
$y="Set @csum := 0";
$z = "
select dateOpen, openNo, (@csum := @csum + openNo) as cumulative_sum
from dateopen
order by dateOpen";
$rx = mysqli_query($dbc, $y);
$r = mysqli_query($dbc, $z);
if (mysqli_num_rows($r) > 0) {
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
array_push($project, $row);
}}

echo json_encode($project);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:38:24.450

尝试`$project[] = $row;`而不是`$project1[] = $row;`在您的脚本中来实现您的 JSON 输出。

# javascript - Javascript跳过函数

> ID：11762152
> 
> 赞同：1
> 
> 时间：2012-08-01T15:07:55.123
> 
> 标签：javascript, function, skip

我正在为一个介绍性编程课程做一个项目，所以我使用的是基本的 javascript。这是我们第一个具有功能的项目，由于某种原因，我似乎无法使其工作。我在程序启动之前调用了所有变量并创建了函数，但由于某种原因，它跳过了在我的程序中运行该函数。任何帮助，将不胜感激。

这只是我的程序的开始，我不想写其余的代码，直到我弄清楚为什么这部分被破坏了，这就是为什么程序不做任何事情，如果它没有通过测试就关闭窗口。

```
// 1 Declare Variables
var numTrees;
var counter = 0;
var answer = "no";

function treeFunction(answer, counter, numTrees) {
    while (answer == "no" && counter < 3) {
        if (numTrees == 5, 10) {
            answer = "yes";
        } else if (numTrees < 5 || numTrees > 10) {
            alert("That is an incorrect value.\nThe sample size should be less than 5 or greater than 10.\nPlease try again.");
            answer = "no";
            numTrees = prompt("Please reenter the amount of trees in your sample.");
            counter + 1;
        }
    }
    if (answer == "no") {
        alert("You have entered an incorrect number too many times.\nThe Program will now end.");
        window.open('', '_self', '');
        window.close();
    } else if (answer == "yes") {
        return;
    }
}
// 2 Prompt the Instructor for the number of Trees
numTrees = prompt("How many trees are in your sample?");
alert("You have entered: " + numTrees);
treeFunction(answer, counter, numTrees)
document.write(numTrees); {
    document.write("<br/> <br/>" + "End of Program.");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:15:34.640

你有;

```
if(numTrees == 5, 10)​ 
```

错误的逗号导致`if`评估真值表达式`10`，因此它总是通过测试，测试 5、6、7、8、9 或 10；

```
if(numTrees >= 5 && numTrees <= 10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:19:07.320

The way you are using the comma in this line has a special meaning:

```
if(numTrees == 5, 10)​ 
```

Essentially what this does is returns the value of `10` (the second operand) when cast to a boolean, which is not `0`, so it is true.

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)

You probably meant to use OR (`||`):

```
if(numTrees == 5 || numTrees == 10)​ 
```

Or check `numTrees` against a range:

```
if(numTrees >= 5 || numTrees <= 10)​ 
```

On a side note, in javascript it is recommended that you always use [identity comparison](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use) (`===`) instead of regular comparison (`==`):

```
if(numTrees === 5 || numTrees === 10)​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:18:54.800

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:21:32.493

if (numTrees == 5, 10) { answer = "yes"; }

这是一个我从未见过的奇怪结构。我假设您认为这意味着“numTrees 在 5 到 10 的范围内吗？”，但事实并非如此。如果不检查，我认为这本质上意味着您要同时检查两件事：

*   numTrees 等于 5 吗？
*   是 10 吗？（这本质上意味着“是 10 而不是 0”，这当然总是正确的）。

由于您检查的第二个条件始终为真，因此您始终将答案设置为“是”。结果，您的循环总是只运行一次 - 它启动，检查答案是否为“否”，将答案设置为“是”，然后立即停止循环。

您需要将条件更改为 if(numTrees >= 5 && numTrees <= 10)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T15:18:45.667

你想要的是更像这样的东西：

```
 if (numTrees < 5 || numTrees > 10) {
        alert("That is an incorrect value.\nThe sample size should be less than 5 or greater than 10.\nPlease try again.");
        answer = "no";
        numTrees = prompt("Please reenter the amount of trees in your sample.");
        counter + 1;
    } else {
        answer = "yes";
    } 
```

# jquery - 使用 jQuery 将图像发送到 Web 服务

> ID：11762153
> 
> 赞同：0
> 
> 时间：2012-08-01T15:07:58.423
> 
> 标签：jquery, html, blackberry-webworks, multipartform-data

我正在开发一个 Blackberry OS 5 + 应用程序，我需要发送一些带有图像的数据。

为了开发这个应用程序，我使用 HTML5、jQuery 和 Webworks SDK。

使用这样的表格：

```
<form  method="post" action="htt://doamin.com/fool/problem" >
    <input type="text" name="post[tipo]" value="7" />
    <input type="text" name="post[lat]" value='4312.143234388223E7' />
    <input type="text" name="post[lon]" value='2112337733237.0' />
    <input type="text" name="post[desc]" value='axxxx.' />
    <input type="text" name="post[riesgo]" value='1' />
    <input type="text" name="post[direccion]" value='Cxxx' />
    <input type="text" name="post[municipio]" value='zzz' />
    <input type="text" name="post[pais]" value='ES' />
    <input type="text" name="post[idCobranded]" value='1' />
    <input type="text" name="post[esRegistro]" value='1' />
    <input type="text" name="post[origen]" value='2' />
    <input type="text" name="post[version]" value='1.1.0' />
    <input type="text" name="post[email]" value='email@email.com' />
    <input type="text" name="post[password]" value='ba65b0d6c8c76cabb343fccfdeba053a' />
    <input type="text" name="post[nombre]" value='asdsad' />
    <input type="text" name="post[codigoPostal]" value='213218222' />
    <input type="text" name="post[idioma]" value='1' />
    <input type="submit" class="submit" value="Send"/>
</form> 
```

这是我第一次这样做，我不知道该怎么做。

如何使用 jQuery 将带有图像的表单作为多部分表单发送？

顺便说一句，我找到了 $_FILE，它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:27:37.073

$_FILE 是一个 php 数组，用于存储您上传的所有数据信息。由于您没有使用 PHP，因此您不必担心它。但是，如果您有兴趣，可以在此处找到有关它的更多信息

[http://www.php.net/manual/en/reserved.variables.files.php](http://www.php.net/manual/en/reserved.variables.files.php)

您是否查看过 jquery $.ajax 函数以将表单信息发送到您的网络服务？您也可以使用 $.post。另外，对于表单中的每个输入字段，我建议您添加一个 ID 字段，因为您将处理 javascript :)

# asp.net - ANT 和 WAR 文件的 .NET 等效项？

> ID：11762163
> 
> 赞同：9
> 
> 时间：2012-08-01T15:08:28.403
> 
> 标签：asp.net, deployment, version-control

我们的大多数内部应用程序都使用 Ant 构建在 Java EE 堆栈上，并使用 WAR 文件部署到 Tomcat。我们有一个构建框，用于创建面向生产的 WAR，然后将 WAR 交付到测试环境。运行脚本以将部署的 webapp 转换为指向测试数据环境。

经过几个循环的测试 -> 错误修复 -> 构建 -> 重新部署以进行测试，然后将 WAR 文件部署到生产环境，然后就可以使用了。

我最近继承了一些 ASP.NET 4.0 webapps，它们的 Build/Deploy 完全不同；代码在VS中构建，然后将整个项目目录复制到各个环境中。然后手动对其进行调整，并偶尔使用服务器上的 VS 实例进行重建。

这有点吓人，因为有很多机会在一个环境中进行调整被遗忘，因此要求我们在应用程序“上线”后在测试、版本控制、等等

所以，所有这一切都在说：在 .NET 世界中是否存在与 Ant/WAR 机制等效的机制？从 .NET webapp 创建可执行工件并在环境之间以最少的修改移动它的最安全方法是什么？我知道“最佳实践”是一个禁忌短语，但在我在 .NET 中重新制作 Ant 之前，我想先了解一些专业知识。:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T15:26:11.267

自动化 Web 部署需要了解的三种技术：

1.  [MSBuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx) - 这是微软的 ANT 等价物。项目文件基本上只是一系列 MSBuild 任务。
2.  [WebDeploy](http://www.iis.net/download/WebDeploy) - 这本质上是您的 WAR/Tomcat 等价物，除了它创建部署包，并且适用于 IIS。
3.  [XML 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)- 您*永远*不必手动编辑配置。如果您需要部署多个环境，则配置转换是必不可少的。

将所有这些与您最喜欢的构建服务器（我使用 Jenkins）放在一起，您可以将整个部署过程完全自动化到任何环境。这些单独的主题中的每一个都过于广泛，无法在此处深入介绍，但您应该能够以最少的知识开始。

为了给你一个例子来说明它是多么简单，这里有一个示例命令行构建，它将把一个网站部署到一个 2003/IIS6 机器上。

```
MSBUILD "MyWebSite.csproj" 
    /p:Configuration=Dev 
    /p:OutputPath=bin 
    /t:Rebuild 
    /p:DeployOnBuild=true 
    /p:DeployTarget=MSDeployPublish 
    /P:AllowUntrustedCertificate=True 
    /p:MSDeployPublishMethod=RemoteAgent 
    /p:MsDeployServiceUrl=http://MyDevServer    
    /p:DeployIisAppPath="Default Web Site/MyWebSite" 
    /p:username=deployUser 
    /p:password=deployPassword 
```

# sharepoint-2010 - Sharepoint 2010 获取组 ID

> ID：11762166
> 
> 赞同：0
> 
> 时间：2012-08-01T15:08:33.340
> 
> 标签：sharepoint-2010, schema

如何获取自定义组的 ID？它似乎不在组编辑菜单中。

我需要知道才能将架构中的人员选择器限制在某个组中。

```
<Field ID="{7B0BC328-5F1F-4BD1-8D8B-4F01F815734F}" Name="Assigned To" DisplayName="Assigned To" Type="User" Group="" UserSelectionMode="PeopleOnly"/> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:04:57.860

使用 PowerShell，您应该能够从服务器上的 SharePoint 2010 命令行管理程序执行以下操作：

```
$siteCollection = Get-SPSite "http://<my_site_collection>"
$siteCollection.RootWeb.Groups | Format-Table -Property Name, ID 
```

# php - 为什么 pdo 不将 + 和 & 的符号保存到数据库中？

> ID：11762167
> 
> 赞同：0
> 
> 时间：2012-08-01T15:08:33.657
> 
> 标签：php, ajax, pdo

为什么当我在 textarea 中输入“+-1-23$%^&sdfsdf/><”但它只将“-1-23$%^”保存到数据库中？

代码 ：

```
function postingMsg (){
        $('.error').hide();
    var messageposting2= $("textarea#messageposting").val();
        var dataString = 'messageposting2='+ messageposting2;
        $.ajax({
             type: "POST",
             url: "note-send.php",
             data: dataString,
             success: function(msg) {
         msg = parseFloat(msg)      
             }
        });
        return false;   
}

if ((isset($_POST['messageposting2'])) && (strlen($_POST['messageposting2']) > 0)) {
    $messageposting3 = $_POST['messageposting2'];   

    $sql = "UPDATE users 
            SET my_note=?
            WHERE user_id=?";
    $q = $conn->prepare($sql);
    $q->execute(array($messageposting3, $_SESSION['user_id']));

    echo "1";
} else {echo "0";} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:11:39.083

It has nothing to do with PDO or your database. You must URL-encode your string before sending it through Ajax.

```
var dataString = 'messageposting2='+ encodeURIComponent(messageposting2); 
```

# sql - UNION 获得的行的前 10 个结果

> ID：11762168
> 
> 赞同：1
> 
> 时间：2012-08-01T15:08:36.110
> 
> 标签：sql, sql-server, sql-server-2005, union

我正在使用 MSSQL 2005 进行查询，例如：

```
SELECT * from Emp UNION ALL SELECT * from Emp2; 
```

我想将最终结果限制为 10 行。如果我只有 Emp 表，我会说

```
SELECT TOP 10 * from Emp; 
```

但是由于我现在有 2 个表，我不能在其中任何一个上说 SELECT TOP *，最后我也不能使用 LIMIT 10。你有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T15:09:39.863

```
SELECT TOP 10 * FROM
(SELECT * from Emp UNION ALL SELECT * from Emp2) a 
```

但是，我建议您对结果进行排序，这样您就不会从第一个联合结果中获得前 10 个结果。所以可能是这样的：

```
SELECT TOP 10 * FROM
(SELECT * from Emp UNION ALL SELECT * from Emp2) a
ORDER BY a.lastName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:11:41.650

try this:

```
SELECT TOP 10 * 
FROM  (
         SELECT * 
         FROM Emp 
          UNION ALL 
         SELECT * 
         FROM Emp2
      ) derivedTable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:09:45.723

尝试这个：

```
SELECT top 10 * from (
    SELECT * from Emp UNION ALL SELECT * from Emp2) a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:11:00.103

使 UNIONed 查询成为子查询，并从中选择 TOP 10 行：

```
SELECT TOP 10 * FROM (
    SELECT * FROM Emp
    UNION ALL
    SELECT * FROM Emp2
) unioned 
```

# ios - 像 facebook-ios-sdk 的 url？

> ID：11762171
> 
> 赞同：2
> 
> 时间：2012-08-01T15:08:40.863
> 
> 标签：ios, facebook, facebook-like, facebook-ios-sdk

我知道可以从 Facebook SDK for iOS 中点赞一个页面，但是有没有办法拥有一个 url/链接并喜欢那个 url/链接？

我已经在应用程序中实现了 Facebook SSO，并希望使用登录来让用户喜欢一个 URL。

我现在正在做的事情是一个类似博客的视图，它将显示来自某个站点的帖子，我也希望能够喜欢那个博客帖子，因为我有来自特定博客帖子的 URL。

因此，如果我想在应用程序中的每篇博客文章上实现一个赞按钮，有没有办法通过 Facebook iOS SDK 来做到这一点？

如果不是，那是不需要用户再次登录的最佳解决方法？我说的是类似网络视图的解决方案？

# asp.net - 在 .NET n 层应用程序中访问 ASP.NET 配置文件的首选方式是什么？

> ID：11762173
> 
> 赞同：1
> 
> 时间：2012-08-01T15:08:45.677
> 
> 标签：asp.net, .net, wcf

我有一个 WPF 应用程序，它与 IIS 中托管的 WCF 服务通信。我还使用 ASP.NET 授权和身份验证来访问服务方法。该系统还有一个相对较薄的基于 Web 的界面。

我想要的是利用 ASP.NET 配置文件。例如 - 从服务器加载配置文件，进行更改，然后保存回服务器。所有这些都与 WCF 服务调用有关。

这是我声明为服务器端的示例用户配置文件类。我还在 web.config 中定义了适当的条目，因此它可以正常工作。

```
public class UserProfile: ProfileBase
{
    public static UserProfile GetUserProfile(string username)
    {
        return Create(username) as UserProfile;
    }

    public static UserProfile GetUserProfile()
    {
        return Create(Membership.GetUser().UserName) as UserProfile;
    }

    public int? XMLVersion
    {
        get
        {
           return this["XMLVersion"] as int?;
        }
        set
        {
            this["XMLVersion"] = value;
        }
    }

} 
```

但是我无法将其传递回客户端，因为 ProfileBase 不可序列化。当然，我可以声明数据传输类，它将从配置文件来回传输数据，但它看起来不是一个很好的解决方案。

到目前为止，我无法找到如何实施它的信息。有人可以帮我解决这个问题或为我指出另一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:33:11.510

WCF 配置文件服务可以满足您的要求。看看[这里](http://msdn.microsoft.com/en-us/library/bb514968.aspx)。

您可以在此[MSDN 页面中查看它提供的方法列表](http://msdn.microsoft.com/en-us/library/system.web.applicationservices.profileservice.aspx)

# java - Java AES 解密

> ID：11762184
> 
> 赞同：0
> 
> 时间：2012-08-01T15:09:20.087
> 
> 标签：java, encryption, aes

我正在加密一些数据，然后通过网络发送它，最后使用下面的类在 Android 设备上解密该数据。加密发生在 java 服务器上，然后解密发生在手机上。当我解密手机上的数据时，我收到了这个错误，“javax.crypto.BadPaddingException：pad block损坏”。当我在计算机上运行单元测试时，我没有收到此错误。关于为什么会发生这种情况的任何想法？

```
import java.security.*;
import javax.crypto.Cipher; 
import javax.crypto.spec.SecretKeySpec;
import sun.misc.*;

public class Encryption {
private static final String ALGORITHM = "AES";
private static final byte[] keyValue = 
    new byte[] { '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G' };

public static String encrypt(String valueToEnc) throws Exception {
    Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encValue = c.doFinal(valueToEnc.getBytes());
    String encryptedValue = new BASE64Encoder().encode(encValue);
    return encryptedValue;
}

private static Key generateKey() throws Exception {
    Key key = new SecretKeySpec(keyValue, ALGORITHM);
    return key;
}

private static String decrypt(String encryptedValue) throws Exception {
    Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.DECRYPT_MODE, key);
    byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedValue);
    byte[] decValue = c.doFinal(decordedValue);
    String decryptedValue = new String(decValue);
    return decryptedValue;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:16:30.477

我的猜测是这两个平台对模式和/或填充使用不同的默认值。如果您仅指定密码，则底层实现将为您选择模式和填充。

尝试在两端指定您想要的确切密码/模式/填充：

Cipher.getInstance("AES/ECB/PKCS5Padding");

这只是一个例子。使用您想要的模式和填充。

# javascript - Elfinder 2.0 解码文件名

> ID：11762185
> 
> 赞同：0
> 
> 时间：2012-08-01T15:09:23.517
> 
> 标签：javascript

```
$("#elfinder").elfinder({
    url: 'https://localhost/elfinder',
    handlers: {
        dblclick: function(event, elfinderInstance) {
            var file = event.data.file; //l1_dGVzdC9iYW5uZXJfYmdfaG9yaXpvbnRhbC5qcGc      
        }
    }
}); 
```

如何解密`l1_dGVzdC9iYW5uZXJfYmdfaG9yaXpvbnRhbC5qcGc`为`banner_bg_horizontal.jpg`（真实文件名）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:58:17.723

对于 elFinder，您需要将 base64 keyStr 值 + / = 修改为 - _ 。

```
 var keyStr = "ABCDEFGHIJKLMNOP" +
           "QRSTUVWXYZabcdef" +
           "ghijklmnopqrstuv" +
           "wxyz0123456789+/" +
           "="; 
```

改成...

```
 var keyStr = "ABCDEFGHIJKLMNOP" +
           "QRSTUVWXYZabcdef" +
           "ghijklmnopqrstuv" +
           "wxyz0123456789-_" +
           "."; 
```

然后在解码前去掉前缀“l1_”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:52:47.720

因为你不使用 Base64
我使用它并且效果很好

[示例 Base64](http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html)

# c# - 断点在 Monodroid 多线程应用程序中不起作用

> ID：11762188
> 
> 赞同：0
> 
> 时间：2012-08-01T15:09:28.433
> 
> 标签：c#, mono, monodevelop, xamarin.android

当我在代码中的 lock (...) 或 ONLY IF 语句之后创建断点时，在 monodroid 中调试多线程应用程序时 - 它不起作用。但是当我在该关键字之前设置断点然后逐步调试时它会起作用。为什么？如何解决？

代码（传感器监听类）：

```
static object lockAll = new object();
        public void OnSensorChanged(SensorEvent ev)
        {
            int g1 = 8; //Breakpoint in this place works
            lock (lockAll)
            {
             int g2 = 8; //Breakpoint in this place isn't works
            }
        } 
```

或者：

```
 public void OnSensorChanged(SensorEvent ev)
    {
        Sensor curS = ev.Sensor;  //Breakpoint in this place works
        if (curS.Type == SensorType.Accelerometer)
            {
            int g2 = 8; //Breakpoint in this place isn't works
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:00:54.400

我通过 VS2010 IDE 遇到了与 monodroid 相同的问题。很多时候我不得不强制关闭平板电脑（或其他设备）上的应用程序，关闭 IDE，重新打开 IDE，重新部署应用程序.. 然后*有时*断点会再次按预期开始工作.

# jquery - 需要帮助给现代画廊标签

> ID：11762193
> 
> 赞同：1
> 
> 时间：2012-08-01T15:09:40.073
> 
> 标签：jquery, css, image, label, gallery

我正在制作一个作品集网站，我想包括一些我中学时的作品，但我想在上面贴上标签以区分它。

图库是一堆不同高度和宽度的小规模图像，并略微旋转，当您将鼠标悬停在图像上时，它会增长到正常大小。

这张[图片](https://docs.google.com/file/d/0B6j1nO-GTf4PRlB3SnMteVJfd2s/view)的上半部分是现在的样子，下半部分是我想要的样子。

我尝试用标签和里面的图像制作一个跨度，但它没有用。

这是我没有标签的代码：

```
<html>
<head>

    <title>
        Gallery Test
    </title>

    <style>

        .gallery_img {
            -moz-transform: scale(0.3);
            -moz-transition: all 0.4s ease-in-out 0s;
            background-color: white;
            padding: 20px;
            -webkit-box-shadow:  1px 1px 10px 2px rgba(0, 0, 0, 0.5);
            box-shadow:  1px 1px 10px 2px rgba(0, 0, 0, 0.5);
            margin: -100px -195px;
            z-index: 1;
        }

        .gallery_img:hover {
            -moz-transform: scale(1) rotate(0deg) !important;
            z-index: 100;
        }

    </style>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<head>

<body>

    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />

    <br />

    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />
    <img class="gallery_img" src="../images/no_image.png" />

    <script>

        $(document).ready(function() {
            $(".gallery_img").each(function() {
                var numLow = -7;
                var numHigh = 7;

                var adjustedHigh = (parseFloat(numHigh) - parseFloat(numLow)) + 1;

                var numRand = Math.floor(Math.random()*adjustedHigh) + parseFloat(numLow);

                $(this).css("-moz-transform","scale(0.3) rotate(" + numRand + "deg)");
            });
        });

    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:33:32.940

我想出的解决方案是将主图像作为css背景，然后将'TEEN'叠加层作为实际图像。

您需要使叠加图像（'TEEN'）与实际图像大小相同。

这里是编码的。我已经改变了第一个，并给它一个类`.alt`来展示给你看

[http://jsfiddle.net/SbrBz/](http://jsfiddle.net/SbrBz/)

# image - FFMPEG视频到图像批量转换

> ID：11762194
> 
> 赞同：1
> 
> 时间：2012-08-01T15:09:42.580
> 
> 标签：image, video, batch-file, ffmpeg

```
@echo off 
setlocal enabledelayedexpansion
set EXE_FILE=E:\ffmpeg.exe 
set INPUT_PATH=C:\folder\ 
set OUTPUT_PATH=C:\Images\ 
set COUNT=0 
for %%F in (*) do %EXE_FILE% -i %INPUT_PATH% %OUTPUT_PATH%/%%F.jpg
popd 
```

我想使用此代码将 1 秒的视频保存为 jpg 图像。这不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:54:44.383

```
 IF EXIST %~d1%~p1%~n1.jpg GOTO exit
setlocal enabledelayedexpansion
set EXE_FILE=E:\ffmpeg.exe 
set OUTPUT_PATH=E:\Glasgow\Test 
set COUNT=0 
for %%F in (*.avi) do %EXE_FILE% -i %~d1%~p1%~n1.avi -r 1 -vframes 1 -ss 00:00:01 -f image2 -y %~d1%~p1%~n1.jpeg
popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:20:59.683

`INPUT_PATH`应该是视频文件，而不是目录。您需要遍历输入视频而不是遍历输出图像。ffmpeg 将自行输出所有图像（无需您遍历它们，即使用单个命令）。请查看[本指南](http://pr0gr4mm3r.com/linux/convert-video-to-images-and-back-using-ffmpeg/)以获取帮助。这是该指南中的一个示例：

```
ffmpeg -i video.mpg -r 1 -f image2 ffmpeg_temp/%05d.png 
```

因此，您在脚本中真正要做的是使输出图像名称中的位数越来越多。

`%05.png`将使图像文件名看起来像“00001.png”，`%03.png`看起来像“001.png”等。

但是你想要的是通过输入文件，所以迭代例如“video1.mp4”、“video2.mp4”等。

# java - java HttpsURLConnection 和 python HTTPSConnection 有什么区别？

> ID：11762197
> 
> 赞同：0
> 
> 时间：2012-08-01T15:09:55.377
> 
> 标签：java, python, https

我想将开源项目[android-market-api](https://code.google.com/p/android-market-api/)从 java 移植到 python。但现在我陷入了 https 问题。当我使用 HTTPSConnection 请求`https://android.clients.google.com/market/api/ApiRequest`时，它总是返回 403。经过一些调试，我认为 java HttpsURLCollection 和 python HTTPSConnection 之间可能存在一些差异。

蟒蛇端口：

```
headers = {
    'Cookie': 'ANDROIDSECURE=' + auth_key,
    'User-Agent': 'Android-Market/2 (sapphire PLAT-RC33); gzip',
    'Content-Type': 'application/x-www-form-urlencoded',
    'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
    'Accept': 'text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2',
    'Connection': 'keep-alive'
}
conn = httplib.HTTPSConnection('android.clients.google.com')
conn.request('POST', '/market/api/ApiRequest', 'version=2&request=' + urlsafe_b64encode(data), headers) 
```

源java代码：

```
TrustManager[] trustAllCerts = new TrustManager[]{
        new X509TrustManager() {
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }
            public void checkClientTrusted(
                java.security.cert.X509Certificate[] certs, String authType) {
            }
            public void checkServerTrusted(
                java.security.cert.X509Certificate[] certs, String authType) {
            }
        }
    };

SSLContext sc = SSLContext.getInstance("SSL");
sc.init(null, trustAllCerts, new java.security.SecureRandom());
HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier()
{
    public boolean verify(String arg0, SSLSession arg1) {
        return true;
    }
});

URL url = new URL("https://android.clients.google.com/market/api/ApiRequest");
HttpsURLConnection cnx = (HttpsURLConnection)url.openConnection();
cnx.setDoOutput(true);
cnx.setRequestMethod("POST");
cnx.setRequestProperty("Cookie","ANDROIDSECURE=" + this.getAuthSubToken());
cnx.setRequestProperty("User-Agent", "Android-Market/2 (sapphire PLAT-RC33); gzip");
cnx.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
cnx.setRequestProperty("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.7");
String request64 = Base64.encodeBytes(request,Base64.URL_SAFE);
String requestData = "version="+PROTOCOL_VERSION+"&request="+request64;
cnx.setFixedLengthStreamingMode(requestData.getBytes("UTF-8").length);
OutputStream os = cnx.getOutputStream();
os.write(requestData.getBytes());
os.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:32:02.857

403 表示请求成功，即[“提供的凭据已成功通过身份验证，但凭据仍不授予客户端访问资源的权限”](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)，例如，没有正确的标头，我得到的正文`400`不是`403`。

这是关于如何[使用 httplib 发出 https 请求](https://gist.github.com/1841962#file_http_post_httplib.py)的更完整示例。

# javascript - 屏幕截图画布 getUserMedia Chrome

> ID：11762199
> 
> 赞同：4
> 
> 时间：2012-08-01T15:09:58.110
> 
> 标签：javascript, html, google-chrome, canvas

我想在 Chrome 测试版中制作 wecam 视频的截图。代码只生成了一小部分视频的截图，出了什么问题？

这里的代码：

[http://jsfiddle.net/N9XKh/](http://jsfiddle.net/N9XKh/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T17:37:54.670

您尚未指定`canvas`元素的尺寸，因此它是以小于`video`元素尺寸的默认尺寸 (300x150) 创建的。结果，当您绘制`video`到`canvas`快照时，正在裁剪。

我会更新`snapshot`方法以设置`canvas`宽度和高度以匹配`video`元素的宽度和高度，如下所示：

```
 // create snapschot          
  function snapshot() {

         // set the canvas to the dimensions of the video
         canvas.width = video.clientWidth;
         canvas.height = video.clientHeight;

         ctx.drawImage(video, 0, 0);

         document.getElementById("huhu").src = canvas.toDataURL('image/webp');

  } 
```

[在这里](http://jsfiddle.net/EUkDS/)更新了小提琴。

# .net - .net 应用程序无法连接到 DB2 数据库

> ID：11762206
> 
> 赞同：5
> 
> 时间：2012-08-01T15:10:06.187
> 
> 标签：.net, db2

错误 [08001] [IBM] SQL30081N 检测到通信错误。正在使用的通信协议：“TCP/IP”。正在使用的通信 API：“SOCKETS”。检测到错误的位置：“10.66.180.30”。检测错误的通信功能：“连接”。协议特定错误代码：“10061”、“ *”、“* ”。SQLSTATE=08001

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:13:40.227

您必须直接从 IBM 页面下载驱动程序；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:20:04.340

出现这个错误的原因有很多，你的db2是启动了吗？o您已配置节点，运行时客户端是否已正确安装？请查看此[链接](https://www-304.ibm.com/support/docview.wss?q1=SQL30081N&rs=71&uid=swg21164785&context=SSEPGG&cs=utf-8&lang=en&loc=en_US)了解更多信息。

# mysql - Codeigniter 远程连接不返回查询

> ID：11762214
> 
> 赞同：0
> 
> 时间：2012-08-01T15:10:36.270
> 
> 标签：mysql, database, codeigniter, remote-connection

我与我的 mysql 数据库有本地和远程连接。本地连接工作得很好。但是远程连接，当它建立连接时，它不会返回任何东西。我通常会得到以下信息：

致命错误：在非对象上调用成员函数 result()

我使用以下配置进行远程连接：

```
 $db['mydb']['hostname'] = "ip_address_of_database";
    $db['mydb']['username'] = "username";
    $db['mydb']['password'] = "password";
    $db['mydb']['database'] = "database";
    $db['mydb']['dbdriver'] = "mysql";
    $db['mydb']['dbprefix'] = "";
    $db['mydb']['pconnect'] = FALSE;
    $db['mydb']['db_debug'] = FALSE;
    $db['mydb']['cache_on'] = FALSE;
    $db['mydb']['cachedir'] = "";
    $db['mydb']['char_set'] = "utf8";
    $db['mydb']['dbcollat'] = "utf8_general_ci"; 
```

在访问数据库的函数中，我检查是否与远程服务器建立连接，然后尝试检索数据。

```
 $mydb = $this->load->database('mydb', TRUE);
    if (!isset($mydb->conn_id) && !is_resource($mydb->conn_id)) {
        $error = 'database is not connected';
        return $error;
    }else{
        $query = $mydb->query("SELECT * FROM database LIMIT 1;"); 
        return $query->result();            
         } 
```

这在 localhost 数据库中可以正常工作，但在远程数据库中则不行。我总是收到错误 Fatal error: Call to a member function result() on a non-object

你能帮忙吗？我究竟做错了什么？我坚持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:51:58.377

最后，我在联系我的网络托管服务提供商后找到了解决方案。该问题与远程数据库访问及其服务器有关。我添加的 IP 地址异常和域名不起作用。我必须添加我的主机正在使用的内部域名才能允许远程数据库访问。为了找到解决方案，我花了 2-3 个小时与他们聊天。反正现在解决了。我发布那个仅供参考。

# c# - 确定 DataSet 列是否包含完全相同的数据

> ID：11762221
> 
> 赞同：2
> 
> 时间：2012-08-01T15:11:19.093
> 
> 标签：c#

我有一个类似于下面的数据集：

```
ID    Name    Data1   Data2
1     MM      X       1000
2     ST      Y       1000
3     EC      Z       1000
4     JT      T       1000 
```

我通过绑定`DataSet`. 我想做的是根据所有数据是否相似来设置列的可见性。`DataGridView``DataSet``Data2`

所以在上面的例子中，我想隐藏`Data2`列，因为表示的数据对`DataSet`. 但是，如果任何元素都有该列的唯一条目，我希望该列可见。

有没有办法在不迭代的情况下做到这一点`DataSet`？我不喜欢迭代，因为我`DataSet`的 s 非常大，我想对多个列执行此检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:16:25.580

您可以使用一些 LINQ 来检查您在该列中有多少不同的值：

```
if(dataTable.AsEnumerable().Select(row => row["Data2"]).Distinct().Count() > 1)
{
    // Make column invisible
} 
```

如果有超过 1 个不同的值，那么您知道并非所有值都相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:35:33.187

```
var areSame = dt.Rows.Count > 0 && 
              dt.AsEnumerable().All(x => dt.rows[0]["Data2"].Equlas(x["Data2"])); 
```

# c++ - dll 导入 c++/MFC 的编译器错误

> ID：11762225
> 
> 赞同：0
> 
> 时间：2012-08-01T15:11:38.247
> 
> 标签：c++, mfc, clr, dllimport

我有一个导入 C 类型 DLL 以供使用的 MFC 项目。当我的项目在 V 6.0 中时，此代码运行良好，但在将代码传输到 v2010 并向项目中添加一些 .NET 代码（使用 \clr）之后，我的代码部分开始抛出关于缺少“）”和“的编译器错误;"。我整个上午都在研究，但我无法提出解决方案。谁能帮帮我吗？

以下是引发编译器错误的代码行部分：

```
 #ifdef __cplusplus
  extern "C" __declspec(dllimport) void _stdcall KILLIT();
  extern "C" __declspec(dllimport) void _stdcall MAINDLL(char *PATH,int PATHLEN,char      *SUBDIR,int SUBDIRLEN, char *NAME,
int NAMELEN,char *HOMEDIR,int HOMEDIRLEN,char *ARCHDIR,int ARCHDIRLEN, int *FUN,int   *VERSION,int *BUS,int *PJMPV,
int *NFLAG,int *RETERROR);

#endif 
```

这些是我得到的编译器错误：

```
DSAANA.cpp(32): error C2143: syntax error : missing ')' before 'constant'
>DSAANA.cpp(32): error C2143: syntax error : missing ';' before 'constant'
>DSAANA.cpp(34): error C2059: syntax error : ')' 
```

我会很感激我能得到的任何帮助

谢谢罗比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:41:58.570

如果您在每行中添加行号会很有帮助，以便我们知道什么是什么。可能是与其中一个标题中的宏的名称冲突。对于您的函数声明，您可以删除变量名并只拥有变量类型。如果这样可以解决其中一个错误，请慢慢添加旧变量名，直到再次出现错误并且您会发现冲突。

# c# - Different outputs from the read() functions of serial port

> ID：11762226
> 
> 赞同：1
> 
> 时间：2012-08-01T15:11:37.950
> 
> 标签：c#, serial-port

I'm trying to use the output from a serial to write them into a text file for an experiment and trigger the device continuously using the serial port commands. Here is the sample code I'm using to to test the read() functions which all work differently and I'm unable to understand why.

I want to be able to use the bytestoread prperty to keep checkign for any output in the serial to write to my text file.

```
class Program
{
    static void Main(string[] args)
    {

        byte[] buffer = new byte[2048];
        SerialPort port = new SerialPort("COM4", 9600, Parity.None, 8, StopBits.One);
        port.Open();
        port.DtrEnable = true;
        port.RtsEnable = true;
        port.NewLine = "\r";
        port.Handshake = Handshake.RequestToSend;
        if (port.IsOpen) { Console.WriteLine("port is now open"); } else { Console.WriteLine("port not opened correctly"); }
        port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
        port.Write("T");
        Console.WriteLine("bytes to read : {0}",port.BytesToRead);
        Console.WriteLine("return value form .read function : {0}",port.Read(buffer,0,20));
        Console.ReadLine();
    }

    static void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        Console.WriteLine(sp.ReadTo("\r"));

    }

} 
```

the output is

port is now open bytes to read : 0 return value form .read function : 1 199.0,+238.0,091

Can somebody help me understand why the port.bytestoread returns 0 and port.Read() which has to return the count returns only one but the readTo() functiosn returns the actaul output?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:20:22.157

这是因为`DataReceived`事件处理程序是从后台线程调用的。*在调用之后*`port_DataReceived`，该线程不会调用您 的 *`Console.WriteLine("bytes to read : {0}",port.BytesToRead);`*

# jquery - jquery attr and eq

> ID：11762231
> 
> 赞同：0
> 
> 时间：2012-08-01T15:11:41.350
> 
> 标签：jquery

I have a menu, I want to add class "current" to the `<li>` with `id="home"`, so this is what I tried:

```
$('#main-nav ul li').attr('id').eq('home').addClass('current'); 
```

I also tried .is instead of .eq, non of them works!

How I could achieve this?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:13:09.913

```
$('#main-nav ul li#home').addClass('current'); 
```

You can easily select for specific ids with the CSS id selector #. Depending on your DOM, you can even be more specific with your selectors, which will result in faster selection of the dom element:

```
$('#main-nav > ul > li#home').addClass('current'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:12:50.620

You are using id, so you can use id selector, no need to use `attr` or `eq`:

```
$('#home').addClass('current'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:13:13.457

You can specify the `id of li` which is `home` in your case in the same way you used this `id main` at the beginning of selector.

Try this,

```
$('#main-nav ul li#home').addClass('current'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:13:15.780

Since you have an ID on the li element, you can just do this:

```
$('#home').addClass('current'); 
```

# android - Android ListView SetSelector Issue

> ID：11762235
> 
> 赞同：1
> 
> 时间：2012-08-01T15:11:53.780
> 
> 标签：android, listview

I have a ListView being created in code like this:

```
ListView lv  = new ListView(this); 
lv.setId(GENERALLISTVIEWID);
lv.setBackgroundColor(0x333333); 
lv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
lv.setDivider(null);
lv.setDividerHeight(0);
lv.setSelector(R.drawable.mainselector); 
```

And in my **mainselector**:

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:drawable="@color/orange" android:state_pressed="true"/>
    <item android:drawable="@color/white" android:state_selected="true"/>
</selector> 
```

The problem is, when I select the row, the entire listview underneath the cells lights up orange. Why is not just the single row turning orange?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:49:01.420

好的，我已经解决了这个问题，我错误地将资源应用到我的整个 ListView 而不是我的 ListView 行。

现在已经很明显了。我已将 mainselector 作为背景应用到我的 ListView cell.xml 中。

# java - How do I drive Eclipse from outside of Eclipse?

> ID：11762237
> 
> 赞同：3
> 
> 时间：2012-08-01T15:11:59.370
> 
> 标签：java, eclipse

I would like a few external tools to be able to monitor events within Eclipse and possibly launch events within it. For example, I would like to be able to monitor the progress of a workspace rebuild, and I would like to be able to launch an Eclipse run configuration.

Does Eclipse provide any sort of API for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:29:16.033

您肯定需要编写自己的插件。我建议您开始在 Eclipse API 中查看这些接口：

*   [接口 IProgressMonitor](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IProgressMonitor.html)
*   [接口 ILaunchConfiguration](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/debug/core/ILaunchConfiguration.html)

# c++ - 为什么在调用的赋值析构函数中使用 in const& 时，赋值是正确的

> ID：11762239
> 
> 赞同：2
> 
> 时间：2012-08-01T15:12:04.457
> 
> 标签：c++, callstack

> **可能重复：**
> [如何返回可以更改的成员？](https://stackoverflow.com/questions/11744265/how-to-return-member-that-can-be-changed)

我了解到，如果我在分配（以及被调用的方法签名）中使用 const& ，则被引用对象的生命周期会延长到方法结束。

```
Employee const& getEmp(int a) {
    return Employee(a);
}
Employee const& tmpEmp = m.getEmp(10);  //
... stuff 
//end of scope - tmpEmp valid until here 
```

我写了一个小程序，看到它按预期工作。我的问题不是如何做到这一点？我的问题是关于编译器如何做到这一点？正如您从示例中看到的那样，析构函数在返回后立即被调用，所以我想知道析构函数是如何被调用的，但是 tmpEmp 在析构函数调用之后是有效的？

```
#include <iostream>
using namespace std;

class Employee {
public:
    Employee() : a(0){
        cout << "c-emp" << a << endl;
    }
    Employee(const Employee& newE) {
        a = newE.a;
        cout << "c-c-emp" << a << endl;
    }
    Employee(int a) : a(a) {
        cout << "c-emp" << a << endl;
    }
    ~Employee() {
        cout << "d-emp" << a << endl;
    }
    int a;
};
class Manager {
public:
    Manager() {}
    ~Manager() {}
    Employee const& getEmp(int a) {
        return Employee(a);
    }
};

int main(int argc, char **argv) {
    Manager m;
    Employee const& tmpEmp = m.getEmp(10);
    cout << "tmpEmp " << tmpEmp.a <<endl;
}

output:
c-emp10
d-emp10   - destructor is called and tmpEmp is still valid? how is that?
tmpEmp 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:17:47.773

你的代码是错误的。您正在返回对本地对象的引用，并且本地对象不符合您所了解的生命周期扩展的条件。本地对象的生命周期在您有机会将返回值分配给另一个变量之前就结束了，因此无法延长它们的生命周期。

生命周期延长适用于临时对象：

```
Employee getEmp(int a) {
    return Employee(a);
}
Employee const& tmpEmp = m.getEmp(10);  //
... stuff 
//end of scope - tmpEmp valid until here 
```

现在 getEmp() 返回一个临时对象（不是对本地对象的引用），并且该对象在分配发生时仍然有效。所以它的寿命得到了延长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:20:04.457

你学错了。

首先，赋值对对象的生命周期*没有*任何影响。它只是一个有副作用的运算符。

Second, if you initialize (not assign) a const reference with a temporary, the lifetime of the temporary is extended to match the lifetime of the reference. There are exceptions, however. (And I've never found any pratical use for this feature.)

A const reference used as a return value is one of the exceptions (for the simple reason that it's not implementable). Initializing a return of a const reference type with a temporary does *not* extend the life of the temporary.

And finally, even if it did, it wouldn't help you in your case, because the reference which was initialized by the temporary ceases to exist after the full expression which invokes the function.

# h2 - 像关键字和反斜杠问题

> ID：11762241
> 
> 赞同：0
> 
> 时间：2012-08-01T15:12:30.213
> 
> 标签：h2

如果我使用“like”关键字，我无法从表中选择反斜杠。它与derby数据库一起工作正常，所以我想问一下sql是否不正确？还是反斜杠在 h2 中有特殊含义？谢谢：）

```
public class HelloWorld {
public static void main(String... args) throws Exception {
    // delete the database named 'test' in the user home directory
    DeleteDbFiles.execute("~", "test", true);
    Class.forName("org.h2.Driver");
    Connection conn = DriverManager.getConnection("jdbc:h2:~/test");
    Statement stat = conn.createStatement();
    stat.execute("create table test(" +
            "id int primary key, " +
            "name varchar(255))");
    try {
        int id = 1;
        String name = "\\";
        stat.execute("insert into test values("+id+",'"+name+"')");
        ResultSet rs = stat.executeQuery("select * from test");
        while(rs.next()) {
            System.out.println(rs.getString(1)+" "+rs.getString(2));
        }
        ResultSet rs2 = stat.executeQuery(
              "select * from test where name like '"+name+"%'");
        // ResultSet rs2 = stat.executeQuery(
              "select * from test where name = '"+name+"'");
        while(rs2.next()) {
            System.out.println(rs2.getString(1)+" "+rs2.getString(2));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    stat.close();
    conn.close();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:44:12.917

反斜杠是[LIKE 条件的默认转义字符](http://h2database.com/html/grammar.html#condition_right_hand_side)。

我猜你需要使用两个反斜杠，也就是说，在 Java 中，你需要写`"\\\\"`. 或者，作为替代方案，使用`LIKE '\' ESCAPE ''`（不使用转义字符）。

# ruby-on-rails - What's the difference between RSpec and Cucumber?

> ID：11762245
> 
> 赞同：121
> 
> 时间：2012-08-01T15:12:52.363
> 
> 标签：ruby-on-rails, testing, rspec, tdd, cucumber

I have 6 months of Rails development experience. I've built a web application that's in use now with authentication and authorization and postgresql db.

I'm moving on to my second Rails application but this time, after lessons learnt, I would like to develop it using TDD, since I noticed its a lot easier to scale it and fix bugs. It's slow to develop but in the long run its much easier to deal with.

I have heard of Rspec and Cucumber but am thoroughly confused by them.

I would like to know what the difference is between RSpec and Cucumber and what they are used for.

It would also be useful to know if, from the perspective of a beginner (who is also the sole developer) whether a testing framework is really needed.

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2012-08-01T15:37:35.010

RSpec 和 Cucumber 都是测试框架。RSpec 包括传统的单元测试（这意味着测试一个类或应用程序的一部分与应用程序的其余部分隔离。所以你的模型做你的模型应该做的事情，控制器做它应该做的事情，等等）。

RSpec 和 Cucumber 都用于验收测试（称为 ATDD、BDD、Specification by Example 等，具体取决于您询问的对象）。这些是业务案例驱动的集成测试，这意味着它们模拟用户使用应用程序的方式并使用完整的 Rails 堆栈，因此可以通过单元测试不会发现应用程序不同部分协同工作方式的问题寻找。

RSpec 和 Cucumber 之间的主要区别在于业务可读性因素。Cucumber 的主要吸引力在于规范（功能）与测试代码是分开的，因此您的产品所有者可以提供或审查规范，而无需深入研究代码。这些是您在 Cucumber 中制作的 .feature 文件。RSpec 具有类似的机制，但是您使用包含业务规范的 Describe、Context 或 It 块来描述步骤，然后立即拥有执行该语句的代码。这种方法对开发人员来说更容易使用，但对非技术人员来说更难一些。

使用哪个？如果您是唯一的开发人员和产品所有者，那么我会坚持使用 RSpec，我觉得它对技术人员来说更容易理解，在保持范围和控制方面提供了一些优势，并且让您避免使用 RegEx 进行测试脚步。如果您正在为客户构建它，并且他们在规范方面亲自动手，请使用 Cucumber 进行验收测试并使用 RSpec 进行单元测试。

只是为了证明两者之间的主要区别：

黄瓜：

```
#articles.feature
Given an article exists called "Testing Demonstration"
When I visit the list of articles
Then I should see an article called "Testing Demonstration"

#article_steps.rb
Given /^an article exists called "(.+)"$/ do |title|
  FactoryGirl.create(:article, title: title)
end 
When /^I visit the list of articles$/ do
  visit articles_path
end
Then /^I should see an article called "(.+)"$/ do |title|
  page.should have_content title
end 
```

规格

```
describe "Articles" do
  let(:article) { FactoryGirl.create(:article) }
  context "Index Page" do
    before { visit articles_path }
    it { page.should have_content article.title }
  end
end 
```

这个[博客](http://everydayrails.com/2012/03/12/testing-series-intro.html)系列非常适合使用 RSpec。

# ruby-on-rails - Is there a way to order the results of a query with a non standard order?

> ID：11762247
> 
> 赞同：1
> 
> 时间：2012-08-01T15:12:55.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3

My site allows users to change the order in which categories and what categories are displayed, and it stores that order as an array in the db. so I have:

```
@categories = Category.where("id IN (?)", current_user.order) 
```

the problem is order is something like [2,4,3,6,1] and then @categories has order [1,2,3,4,6]. I want to order the @categories so it matches the order. Any help would be appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:27:43.467

将用户首选项存储在单独的表中，然后使用 @categories 加入 userOrderTable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:37:33.573

另一种方法可能是创建一个空数组并遍历类别：

```
@categories = []
current_user.order.each do |category_id|
 @categories << Category.find(category_id)
end 
```

# java - Setting a default value in a jcombobox populated by a query

> ID：11762249
> 
> 赞同：3
> 
> 时间：2012-08-01T15:12:59.427
> 
> 标签：java, swing, jcombobox

I am currently writing a program in Java that uses a query populated jcombobox. I was wondering if there is a way to have a default selected value when the program executes. My query is a list of languages listed alphabetically, but I am curious if it is posible to have English (which is in the middle of the list) be the default value.

I know that when you manually hard code the values into the jcombobox you can set the default variable as

```
jcombobox.setSelectedIndex(int anIndex); 
```

or

```
jcombobox.setSelectedItem(Object anObject); 
```

but I am unsure when a ResultSet loops and populates the jcombobox.

Currently my code is:

```
languageLabel =new JLabel("Languages:");
rowFour.add(languageLabel,BorderLayout.WEST);//adding to my current panel
langbox = new JComboBox(); 
rowFour.add(langbox,BorderLayout.WEST);
try
 {
     con = DriverManager.getConnection ("jdbc:oracle:thin:@localHost:portNumber:ORCL", "username", "password"); 
     statement = con.createStatement();
 }
catch(SQLException sqle) 
            {
            System.out.println(sqle);    
            }
langbox.removeAllItems();
langbox.addItem("Please Select...");
 try
   {
      ResultSet rs = statement.executeQuery("select language from language order by 1");
      while (rs.next())
            {
                langbox.addItem(rs.getString(1));
                //Thinking that this is where a default value would be located
            }

   }
 catch(Exception e)
  {   
    System.err.println(e);
  } 
```

Thank you for your time.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:16:22.597

```
ResultSet rs = statement.executeQuery("select language from language order by 1");
while (rs.next()) {
   langbox.addItem(rs.getString(1));
   //I'm thinking that this is where a default value would be located
   if(rs.getString(1).equals(myDefaultLanguageVariable)) {
      langbox.setSelectedItem(rs.getString(1));
   }
} 
```

顺便说一句：你应该清理那个代码，那样不好。

# mysql - SQL NOW() 函数无法正常工作

> ID：11762269
> 
> 赞同：1
> 
> 时间：2012-08-01T15:14:17.590
> 
> 标签：mysql

`NOW()`我正在尝试使用该语句在查询中插入日期。

然而，只有 Ymd 被正确插入，而小时、分钟和秒都显示为零（ 00:00:00 ）

有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:16:54.060

您是否检查了要插入的列的类型？确保它是`datetime`，而不仅仅是`date`。

有关更多信息，请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:26:35.557

试试这个 ：

`SELECT CURRENT_TIMESTAMP`
或
`SELECT GETDATE()`
或
`Select {fn NOW()}`

注意函数中的荣誉。

# ios - iOS 设置屏幕 UIAlertView（最好在按下“返回”时）

> ID：11762270
> 
> 赞同：0
> 
> 时间：2012-08-01T15:14:23.070
> 
> 标签：ios, cocoa-touch, uialertview

在我的 iOS 应用程序的设置屏幕中，有一个非常基础的设置。我希望通过 UIAlertView 告知用户这一点。

最好我会在按下后退按钮时显示这个（因此他们完成了他们的设置编辑）。但是，这是否可能，甚至苹果允许？如果是这样，怎么做？

我的第二个选择是在设置更改后立即显示 UIAlertView，但如果可能的话，它并不是真正的偏好。如果可能的话，我该怎么做？

***编辑 - 2012 年 8 月 2 日***：除了内置的设置屏幕外，我的应用还有自己的设置屏幕，所以我的问题适用于两个屏幕。另外，请注意该设置是一个 UISwitch。

另外，我希望 UIAlertView 上有一个取消按钮，允许用户在阅读警告后不要离开设置屏幕。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:25:47.063

您不能为 iOS 设置应用程序执行此操作，但在您自己的应用程序的设置视图控制器中，您可以在`viewWillDisappear:`

**更新：**从评论中，您想要覆盖后退按钮的行为。我建议您隐藏后栏按钮项目并创建自己的按钮。然后，如果用户在提示中接受，则调用`[self popViewControllerAnimated:YES];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:14:38.453

到目前为止，我不相信我的目标在传统设置屏幕上是可能的。

在我自己的设置屏幕上，按下后退按钮时可能会出现 UIAlertView。可以在[这里](https://stackoverflow.com/questions/1184474/stopping-the-self-navigationitem-leftbarbuttonitem-from-exiting-a-view)找到解决方案。但是，它破坏了我的应用程序中自动弹出屏幕的部分，而无需用户按下后退按钮。

因此，我只是在设置本身更改时弹出了 UIAlertView。我没有在弹出窗口中包含“取消”按钮。

但是，欢迎在 Stack Overflow 上提供更多替代答案！

# java - 具有自定义属性的 jaxb xmlelement 编组

> ID：11762271
> 
> 赞同：1
> 
> 时间：2012-08-01T15:14:25.080
> 
> 标签：java, jaxb

试图将我的类映射到 xml 并添加自定义属性。

```
public class MyXmlMappings  {
    @XmlElement
    protected String username;
    @XmlElement
    protected String password;
    @XmlElement
    protected Integer age;
} 
```

编组到 xml 后看起来像这样：

```
<myXmlMappings>
<username/>
<password/>
<age/>
</myXmlMappings> 
```

我需要这样的xml：

```
<myXmlMappings>
<username type="String" defaultValue="hello" />
<password type="String" defaultValue="asdf" />
<age type="Integer" defaultValue="25" />
</myXmlMappings> 
```

如您所见，我添加了 type 和 defaultValue 属性。如何将它们添加到 myXmlMappings 类以在编组后可见？

向 myXmlMappings 类添加额外的字段是不可行的，我想以某种方式使用注释来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:44:39.673

**XML 表示**

我会推荐以下 XML 表示：

```
<myXmlMappings>
    <xmlMapping name="username" type="String" defaultValue="hello" />
    <xmlMapping name="password" type="String" defaultValue="asdf" />
    <xmlMapping name="age" type="Integer" defaultValue="25" />
</myXmlMappings> 
```

**Java 模型**

使用以下 Java 模型：

***XmlMappings***

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class MyXmlMappings  {
    @XmlElement(name="xmlMapping")
    protected List<XmlMapping> xmlMappings;

} 
```

***xml映射***

```
@XmlAccessorType(XmlAccessType.FIELD)
public class XmlMapping {
    @XmlAttribute
    protected String name;
    @XmlAttribute
    protected String type;
    @XmlAttribute
    protected String defaultValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:45:52.807

试试这个：

```
 public class MyXmlMappings {

    @XmlPath("username/@type")
    protected String userType;
    @XmlPath("password/@type")
    protected String passwordType;
    @XmlPath("age/@type")
    protected String ageType;
    @XmlPath("username/@defaultValue")
    protected String userDefaultValue;
    @XmlPath("password/@defaultValue")
    protected String passwordDefaultValue;
    @XmlPath("age/@defaultValue")
    protected Integer ageDefaultValue;
    @XmlElement
    protected String username;
    @XmlElement
    protected String password;
    @XmlElement
    protected Integer age;
} 
```

# ruby-on-rails - 如何使用 rails 获取带有 form_for 的可选字段？

> ID：11762274
> 
> 赞同：1
> 
> 时间：2012-08-01T15:14:32.553
> 
> 标签：ruby-on-rails, form-for

我正在使用 Rails 3.2，并且正在尝试构建一个表单来让用户更新其数据。但是，如果用户不想更改其密码，则可以通过将字段留空来进行。

这是我的表单代码：

```
<%= form_for(@user) do |f| %>

    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.label :email %>
    <%= f.text_field :email %>

    <%= f.label :new_password %>
    <%= f.password_field :password %>

    <%= f.label :password_confirmation, "Confirm password" %>
    <%= f.password_field :password_confirmation %>

    <%= f.submit "Save changes" %>  

<% end %> 
```

这是我在用户控制器中的方法更新：

```
def update
    if @user.update_attributes(params[:user])
        sign_in @user
        flash[:success] = "Profile updated"
        redirect_to @user
    else
        render 'edit'
    end
end 
```

当我将密码字段留空时，我总是会收到提示密码错误的消息。

谢谢

- -更新 - -

这是我的用户模型：

```
class User < ActiveRecord::Base

    attr_accessible :name, :email, :password, :password_confirmation, :team_id, :updating_password

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

validates :name, presence: true, length: { maximum: 50 }
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false} 
validates :password, presence: should_validate_password? , length: { minimum: 6 }
validates :password_confirmation, presence: should_validate_password?

def should_validate_password?
    updating_password || new_record?
end 

def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:29:50.730

我认为这个问题在这里有一个很好的答案：[在 Rails 3 中，当我不尝试更新密码时，如何跳过密码字段的验证？](https://stackoverflow.com/questions/3542819/in-rails-3-how-can-i-skip-validation-of-the-password-field-when-im-not-attempt)

我会重复一遍，但给出的答案非常好。还指向有关该主题的 railscast。

# ruby-on-rails - 使用 Locomotive CMS（Ruby on rails、haml）创建基本的投资组合网站

> ID：11762279
> 
> 赞同：0
> 
> 时间：2012-08-01T15:14:44.300
> 
> 标签：ruby-on-rails, ruby, haml, liquid

我一直在尝试使用 Locomotive CMS 创建一个基本的投资组合，例如这个（www.tommyblue.it），我已经设法设置了所有需要的 gem 和所需的程序、mongodb、自制软件等......但是由于在网上找到像样的 haml 或 Locomotive CMS 文档（对于新手）非常困难，我坚持下去。我的目标是在月底之前运行应用程序，疯了吧？

任何帮助都非常感谢。

基本上这就是我坚持使用 atm 的原因：

```
{{ 'js.js' | javascript_tag }}
{{ 'main.js' | javascript_tag }}
{{ 'custom.js' | javascript_tag }}
{{ 'jquery-1.7.1.min.js' | javascript_tag }}
{{ 'jquery.easing.1.3.js' | javascript_tag }}
{{ 'jquery.masonry.min.js' | javascript_tag }}
{{ 'jquery.prettyPhoto.js' | javascript_tag }}
{{ 'jquery.quicksand.js' | javascript_tag }}
{{ 'jquery.tweet.js' | javascript_tag }}
{{ 'modernizr.js' | javascript_tag }}
{{ 'style.css' | stylesheet_tag }}
{{ 'font.css' | stylesheet_tag }}
{{ 'prettyPhoto.css' | stylesheet_tag }}
{{ 'reset.css' | stylesheet_tag }}
{{ 'typography.css' | stylesheet_tag }}

<!DOCTYPE HTML>
<html>  
    <head>

        <meta charset="UTF-8">
    {{ Design.Diverso }}

    </head>
<!--[if lt IE 7 ]> <body class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <body class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <body class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <body class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <body> <!--<![endif]-->  

    <div class="body-inside">
            <!-- begin header -->
            <header id="header">
                <!-- begin slider -->
                <div id="f_slider">

                    <div class="slider">
                        <ul>
                            <li>
                                <div class="row">
                                    <h5>HELLO,</h5>
                                    <h2>WELCOME TO <span class="h_black">NONAME</span></h2>
                                </div>
                                <div class="row">   
                                        <h4>                                                                    
                                            Enjoy our company For the design & production of all manner of digital creative.                                            
                                        </h4>                                                   
                                </div>

                            </li>
                            <li>
                                <div class="row text-center">
                                    <h2>Enjoy <span class="h_black"> our </span>company  </h2>
                                </div>
                                <div class="row one-half text-right">   
                                    <h4>Who we are</h4> 
                                    <div class="content_big">                       
                                        Lorem ipsum dolor sit amet, consecadipiscing elit. Duis nec purus tellus, quis pulvinar tortor.
                                        Lorem ipsum dolor sit amet, consecadipiscing elit. 
                                    </div>                                                          
                                </div>
                                <div class="row one-half last">
                                    <h4>What we've done</h4>    
                                    <div class="content_big">                       
                                        Lorem ipsum dolor sit amet, consecadipiscing elit. Duis nec purus tellus, quis pulvinar tortor.
                                        Lorem ipsum dolor sit amet, <a href="#">consecadipiscing</a> elit. 
                                    </div>  
                                </div>
                                <span class="clear"></span>
                            </li>       
                            <li>
                                <div class="row one-half text-right">
                                    <h2> we make  </h2>
                                    <h2> it <span class="h_black">better</span></h2>
                                </div>
                                <div class="row one-half last">     
                                    <h4>Lorem ipsum dolor</h4>
                                    <div class="content_big">                       
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam pulvinar, odio eu consectetur porta, libero orci tempor felis, a adipiscing diam ipsum in enim. Donec hendrerit dictum quam, a tincidunt neque vulputate nec.

                                    <div>                                   
                                        {{ 'html5_logo.png' | theme_image_tag }}
                                        {{ 'css3_logo.png' | theme_image_tag }}                             
                                        {{ 'jquery_logo.png' | theme_image_tag }}                                                                                                                                                                           
                                </div>
                                <span class="clear"></span>
                            </li>                                                   
                        </ul>
                    </div>
                </div>
                <!-- end slider -->
                <!-- begin navigation -->

               <nav id="top_menu">
                    <div class="inside">
                        <!-- logo -->
                        <a href="#" class="logo">
                            {{ 'logo.png' | theme_image_tag }}
                        </a>
                        <!-- begin menu -->

                        <ul class="menu">
                            <li>
                                <a href="index.html">
                                    Home
                                </a>
                            </li>
                            <li>
                                <a href="works.html">
                                    Works
                                </a>
                            </li>
                            <li>
                                <a href="blog.html">
                                    Blog
                                </a>
                                <ul>
                                    <li><a href="blog_post.html" title="Single Post">Single Post</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="services.html">
                                    Services
                                </a>
                            </li>
                            <li>
                                <a href="about.html">About Us</a>
                            </li>               
                            <li>
                                <a href="#">
                                    Features
                                </a>
                                <!-- begin sub menu -->
                                <ul>
                                    <li>
                                        <a href="typography.html">
                                            Typography
                                        </a>
                                    </li>   
                                    <li>
                                        <a href="columns.html">
                                            Columns
                                        </a>
                                    </li>   
                                    <li>
                                        <a href="elements.html">
                                            Elements
                                        </a>

                                    </li>   
                                    <li>
                                        <a href="team.html">
                                            Our Team
                                        </a>
                                    </li>   

                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">
                                    Contact
                                </a>
                            </li>
                        </ul>
                        <!-- end menu -->
                    </div>              
                </nav>
                <!-- end navigation -->
            </header>
            <!-- end header -->
            <!-- begin main -->
            <article id="main">

                <!-- Begin ajax menu -->

                <nav id="to-top-menu">
                    <span></span>
                </nav>

                <!-- end ajax menu -->

                <ul class="fast_link">
                    <li class="">
                        <div class="link_wrap" data-link="works">
                            <div class="link_title">
                                <h2>OUR WORKS</h2>
                                <p>Recent Projects</p>
                            </div>
                            {{ 'a_works.png' | theme_image_tag }}
                            {{ 'a_works_hover.png' | theme_image_tag }}>
                            <span class="call_ajax"></span>                                                                                             
                        </div>      
                    </li>
                    <li class="">
                        <div class="link_wrap" data-link="blog">
                            <div class="link_title">
                                <h2>BLOG</h2>
                                <p>From the Blog</p>
                            </div>  
                            {{ 'a_blog.png' | theme_image_tag }}
                            {{ 'a_blog_hover.png' | theme_image_tag }}
                            <span class="call_ajax"></span>                                                                             
                        </div>                                              
                    </li>
                    <li class="">
                        <div class="link_wrap" data-link="services">
                            <div class="link_title">
                                <h2>SERVICES</h2>
                                <p>What we do</p>
                            </div>
                            {{ 'a_service.png' | theme_image_tag }}
                            {{ 'a_service_hover.png' | theme_image_tag }}   
                            <span class="call_ajax"></span>                                                                 
                        </div>              
                    </li>
                    <li class="">
                        <div class="link_wrap" data-link="team">
                            <div class="link_title">
                                <h2>THE TEAM</h2>
                                <p>Meat the team </p>
                            </div>
                            {{ 'a_team.png' | theme_image_tag }}
                            {{ 'a_team_hover.png' | theme_image_tag }}
                            <span class="call_ajax"></span>                                                                                                             
                        </div>                                          
                    </li>
                    <li class="last">
                        <div class="link_wrap" data-link="contact">
                            <div class="link_title">
                                <h2>CONTACT</h2>
                                <p>Get in touch</p> 
                            </div>
                            {{ 'a_contact.png' | theme_image_tag }}
                            {{ 'a_contact_hover.png' | theme_image_tag }}
                            <span class="call_ajax"></span>                                                                                                                 
                        </div>                                          
                    </li>

                </ul>
                <span class="clear"></span>

                <!-- home page title -->
                <nav class="page_title displaynone">

                    <h2>
                        <span class="title">PLACE SELECT A PAGE</span> 
                        <span class="loading_link"></span> 
                    </h2>

                </nav>  

                <!-- callback ajax content -->
                <section id="content">

                </section>
                <span class="clear"></span>

            </article>
            <!-- end main -->
        </div>
        <!-- end body inside -->

        <!-- begin footer -->
        <footer id="footer">
            <div class="inside">            
                <div class="footer-widget">
                    <div class="one-third">                     
                        <h2>Follow Us</h2>
                        <p>
                            Omnes enim peccaverunt et egent gloriam Dei. In principio creavit Deus caelum et terram.
                        </p>

                        <ul class="footer-socials">
                            <li class="rss"><a href="#" title="Rss"></a></li>                           
                            <li class="twitter"><a href="#" title="Twitter"></a></li>
                            <li class="facebook"><a href="#" title="Facebook"></a></li>
                            <li class="dribbble"><a href="#" title="Dribbble"></a></li>                                                     
                            <li class="vimeo"><a href="#" title="Vimeo"></a></li>
                            <li class="skype"><a href="#" title="Skype"></a></li>
                        </ul>
                        <span class="clear"></span>

                    </div>
                    <div class="one-third">
                        <h2>About Us</h2>
                        <p>{{ 'logo.png' | theme_image_tag }}Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam pulvinar, odio eu consectetur porta, libero orci tempor felis, a adipiscing diam ipsum in enim. Donec hendrerit dictum quam, a tincidunt neque vulputate nec. Proin nec sollicitudin augue. Donec hendrerit</p>                                                                       
                    </div>
                    <div class="one-third last">
                        <h2>Join our newsletter</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam pulvinar, odio eu consectetur porta, libero orci tempor felis.</p>                      
                        <form id="form_newslatter">
                            <input type="text" name="newslatter" id="newslatter" placeholder="Email Address..." />
                        </form>                 
                    </div>
                    <span class="clear"></span>
                </div>                                  

                <div class="footer-bottom">
                    <span class="copyright">© 2012 · AGT NoName ( <a href="http://validator.w3.org/check?uri=http://demo.agtheme.com/noname" title="Valid html5"> Valid html5 </a> ) All Rights Reserved</span>
                    <nav id="footer_menu">
                        <ul>
                            <li><a href="#">Home</a></li>
                            <li><a href="#">Works</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Services</a></li>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </nav>
                </div>

            </div>
        </footer>
        <!-- end footer --> 
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>       
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:53:33.373

您可能希望使用 twitter bootstrap 作为您的主题，因为它包含一个非常漂亮且轻量级的轮播，并创建一个带有文件和描述字段的照片模型，然后在您的页面中在机车中实现类似这样的东西：

```
{% for photo in contents.photos %}
        <li>
          <a href='{{ photo.fichier.url | resize: '800x600' }}' title="{{ photo.legende }}">{{ photo.fichier.url | image_tag  }}</a>
        </li>
{% endfor %} 
```

这是一个例子，不要只是复制和粘贴，因为我将它与基金一起用作照片的主题和灯箱。如果您需要进一步解释，请告诉我（我现在没有时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:42:45.867

我认为您应该仔细阅读这些内容
[http://doc.locomotivecms.com/installation/getting_started](http://doc.locomotivecms.com/installation/getting_started)

我也知道你此刻正在混合两件事：

*   CMS 被解释为内容管理系统，因此您将能够使用此系统管理您的内容；）

*   Ruby on rails 是您用来在所谓的服务器端和客户端构建网站外壳的主要 Web 开发工具。

所以先试着用 Ruby on Rails 做一个网站。然后将您的 CMS 系统添加到其中，这样就可以了。

# mysql - mysql innodb 锁

> ID：11762281
> 
> 赞同：0
> 
> 时间：2012-08-01T15:14:49.460
> 
> 标签：mysql, innodb, locks

我正在开发将由多个通勤者运行的应用程序。我想锁定mysql表，这样就不会有进程并发问题，比如一个进程在写，另一个进程同时在读。或者更糟糕的是，这两个过程同时写入（更新）不同的值。MySQL 提供了锁，但文档说我们应该避免在 InnoDB 中使用锁。[在这里阅读](https://dev.mysql.com/doc/refman/5.5/en/table-locking.html)。请提供一些建议，在这种情况下该怎么做。感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T07:51:26.317

InnoDB 是一个完全支持 ACID 的事务存储引擎。InnoDB 的属性之一是它处理并发更新。具体如何取决于隔离级别，但通常 InnoDB 不允许两个事务通过锁定行来修改同一行。它不会锁定整个表，因此其他记录可以被其他事务修改。

如果您将隔离级别设置`serializable`为应用程序将工作，因为根本没有并发，但仍将允许一些并发。

隔离级别越高，您拥有的并发性就越少，如果您锁定表，您仍然拥有更多。

# vb.net - 需要一个超链接控件一次做几件事

> ID：11762282
> 
> 赞同：0
> 
> 时间：2012-08-01T15:14:56.783
> 
> 标签：vb.net, facebook, hyperlink, datalist

在我的网站上，我有一个充满图像缩略图的 DataList。缩略图是 HyperLink 控件，单击时会提供源图像的放大视图（存储在我的数据库中）。

我的客户希望在每张图片上都有一个 Facebook Like 按钮，我希望将它放在单击缩略图时出现的灯箱窗口中。我在这里面临的挑战是，要为 Like 生成信息，我需要创建元标记，并且每个图像最好动态创建它自己的元标记。

我想不通的是如何让超链接点击打开灯箱并同时创建元标记。

任何帮助将不胜感激。

要查看该网站的实时视图，请访问[http://www.dossier.co.za](http://www.dossier.co.za)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:36:28.260

我们处理类似问题的方法是在 javascript 中挂钩 href 的 onclick 事件。

根据您需要做什么，您甚至可以通过从 javascript 方法返回 false 来阻止执行超链接的标准浏览器行为。

在某些情况下，我们只是通过将 href 设置为“#”来使用“show”的超链接。

这是一个结合所有这些概念的示例：

```
<a href="#" id="lnkFile" runat="server" onclick="javascript:{cmdFile_Click(); return false}" title="View the file">File Name</a> 
```

在这种情况下，指定的 javascript 被执行，没有真正的超链接，浏览器不会尝试导航到指定的 URL，因为我们在 javascript 中返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:54:55.823

像 class="tbl_images" 这样在打开的表标签中添加一个类名，这样我们就可以使用 JQuery 来访问它。捕获对 td 的点击并获取项目的 id。根据需要将该 id 传递给您的代码以生成元标记。在下文中，当用户单击 td 中的锚点时，将运行一个函数。

我一直使用它来访问 td 中的属性，这样我就可以运行一个函数。你可以使用这样的东西来从你的图像/锚点中获取值并创建一些东西......

```
 $("#tbl_images > tbody > tr ").each(function () {
          //get the id of the tr (if required)
          var id = $(this).attr("id");
          var ImageTitle = $(this).find("img.Image_Class_Name").attr("title");

          //on click of anchor with classname of lighthouse run function, 
          //passing in our id or other data in the row to our function
          $(this).find("td: > a.lighthouse").click(function () {
              //update script for this record
              MyFunction(id,ImageTitle);
          });
      }); 
```

# javascript - 从列表复制到文本区域但防止重复

> ID：11762283
> 
> 赞同：0
> 
> 时间：2012-08-01T15:14:59.717
> 
> 标签：javascript

我有这段代码，它有助于从列表中选择值并将它们传递给 textarea 但是，我不想复制以防意外按下相同的列表值。

这是我得到的：

```
window.onload = btnsInit;
function btnsInit()
{
  var i, a = document.getElementById('btns').getElementsByTagName('a');
  for (i = 0; i < a.length; ++i) {
    a[i].onclick = btnClick;
  }
}
function btnClick(e)
{
  document.getElementById('ta').value += '' + this.firstChild.nodeValue + '\n';
  xPreventDefault(e);
  trim();
  return false;
}
function xPreventDefault(e)
{
  if (e && e.preventDefault) e.preventDefault();
  else if (window.event) window.event.returnValue = false;
} 
```

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:30:30.847

您是否尝试过任何检查？

```
function btnClick(e)
{     
  if ( (document.getElementById('ta').value).indexOf(this.firstChild.nodeValue) ) < 0
      document.getElementById('ta').value += '' + this.firstChild.nodeValue + '\n';
  xPreventDefault(e);
  trim();
  return false;
} // haven't tested; 
```

// 用于调试目的

```
function btnClick(e)
{     
  console.log((document.getElementById('ta').value).indexOf(this.firstChild.nodeValue));
  console.log("ta =", document.getElementById('ta').value);
  console.log("value =", this.firstChild.nodeValue);
  if ( (document.getElementById('ta').value).indexOf(this.firstChild.nodeValue) ) < 0
      document.getElementById('ta').value += '' + this.firstChild.nodeValue + '\n';
  xPreventDefault(e);
  trim();
  console.log("#end ta =", document.getElementById('ta').value);
  return false;
} // haven't tested; 
```

# debugging - 什么是调试模式以及如何在 Windows 命令控制台中使用 jboss 打开它？

> ID：11762287
> 
> 赞同：0
> 
> 时间：2012-08-01T15:15:08.747
> 
> 标签：debugging, command-line, jboss

我想知道 jboss 中的调试模式是什么。我之前使用过 django，当我打开调试模式时，将检测到我在 localhost 运行时所做的任何更改，刷新页面将显示更改。在 jboss 调试中是一样的吗？

我使用 maven 安装项目，然后在 windows 命令控制台中启动 jboss。如何打开 jboss 5.1.1 的调试模式？

Maven 全新安装大约需要 8 分钟，然后重新启动服务器需要 5-7 分钟。我浪费了很多时间进行许多小改动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:33:52.080

您可以在 JVM 上启用远程调试，允许您通过 IDE 进行连接，然后您可以从那里在 bebug 中运行您的应用程序（停止执行并逐步执行）。查看 statup 脚本，已将远程调试选项放在注释中。调试允许您更新某些类（您需要将 IDE 连接到它并通过 IDE 更新您的类，JVM 和 JBOSS 不会检测到它们自己的更改）。但是，如果您更新任何容器管理部分（EJB、持久性上下文、servlet），您将需要重新部署应用程序。所以我认为它不会给你你需要的东西。

为什么每次都进行全新安装？一个简单的安装应该创建你的包并防止任何编译，如果源代码比构建工件旧，则文件复制。您还可以在不关闭 JBoss 的情况下重新部署应用程序。有 Maven 目标。默认情况下，我认为，如果 JBoss 检测到应用程序文件（ear 或 war）已更改（时间戳低于部署时间），它将重新部署应用程序（不幸的是，有时重新部署是不够的，大部分时间类加载器问题. 永远不会遇到 JBoss 为 7 的问题，但类加载已重做）。

如果您可以升级到 JBoss AS 7，它会快得多，并且 Java EE 6 使您的应用程序更轻，从而对构建时间产生积极影响。但这可能需要大量重构。

# php - 执行命令不起作用

> ID：11762288
> 
> 赞同：1
> 
> 时间：2012-08-01T15:15:13.070
> 
> 标签：php, codeigniter, exec, command-line-interface, shell-exec

我正在使用 exec 运行这样的**后台脚本**：

```
$command = "/usr/local/bin/php public_html/r/index.php tools $action process $params > /dev/null &";
exec($command); 
```

问题是：它**不起作用**。

**提示：**

*   当我从终端（通过 SSH）执行相同的命令时，它工作正常。
*   该`exec`命令已启用（我可以毫无问题地执行任何命令）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:17:55.480

后台作业往往具有与您的 shell 不同的“当前”目录 - 通常它是作业正在运行的帐户的主目录。除非您的 public_html 在 中`/home/whoever`，否则您实际上并没有运行您的脚本。尝试绝对路径：

```
$command = "/usr/local/bin/php /path/to/public_html/r/index.php etc..."
                               ^^^^^^^^^ 
```

反而。

# python - django-imagekit 中的内存使用是不可接受的——关于修复的想法？

> ID：11762290
> 
> 赞同：3
> 
> 时间：2012-08-01T15:15:16.247
> 
> 标签：python, django, image-processing, heroku, django-imagekit

我用来处理社交媒体网站上用户上传的图像的 Django-imagekit 使用的内存高得令人无法接受。我正在寻找有关如何解决此问题的想法。

我们正在使用 django-imagekit 将用户上传的图像复制为三个预定义的大小，并将四个副本（3 个已处理加 1 个原始）保存到我们的 AmazonS3 存储桶中。

这个操作很快导致我们在 Heroku dynos 上超过内存限制。在 django-imagekit github 页面上，我看到了一些关于破解库以使用更少内存的建议。

我看到三个选项：

1.  尝试破解 django-imagekit，并使用修改后的第三方库处理随之而来的更新问题
2.  使用不同的成像处理库
3.  做一些完全不同的事情——也许在浏览器中调整图像的大小？还是使用第三方服务？或者...？

我正在寻找关于采取哪条路线的建议。特别是，如果您熟悉 django-imagekit，或者如果您知道 / 正在 Django 应用程序中使用不同的图像处理库，我很想听听您的想法。

非常感谢！

粘土

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:39:38.703

尝试从控制台使用 PIL 更改图像大小，看看内存使用是否正常。图像调整大小是一项简单的任务，我认为您不应该使用辅助应用程序。此外，将您的任务分成 3 个任务（3 个图像？）。

# validation - ValidationGroup 简单解释

> ID：11762291
> 
> 赞同：0
> 
> 时间：2012-08-01T15:15:18.453
> 
> 标签：validation, validationgroup

有人可以帮我处理这行代码并告诉我它在寻找什么吗？这段代码与我页面上的文本框控件相关联。

```
ValidationGroup="<%# ((TSAPassenger)((RepeaterItem) Container.Parent.Parent).DataItem).PaxKey %>" runat="server" ErrorMessage="Invalid Contact Name."> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:22:24.587

当回发发生时（通过按钮按下、自动回发下拉列表等），ASP.NET 将验证导致回发的控件上指定的验证组的所有输入。

那行代码在包含文本框的控件树中为转发器项获取数据项的“PaxKey”属性，并使用它来指定文本框所属的验证组。这可能会将验证限制为您正在更新的记录的字段（而不是页面上的所有内容）。

# php - 从数据库中动态填充选择框

> ID：11762294
> 
> 赞同：0
> 
> 时间：2012-08-01T15:15:32.520
> 
> 标签：php, jquery, ajax

希望你能帮忙，因为我开始拔头发了:) 似乎有很多关于这个的链接，但我无法让它们中的任何一个工作，所以我只想用外行的方式问.

我有一个数据库......它有区域、区域、经理、员工的字段

我有一个前端表单，里面有选择框......

当您选择区域时，我需要区域选择框来动态填充数据库中的相关区域而不刷新页面

Then when the Area selct option is chosen the Manager one needs to populate. 等等。

毫无疑问，这需要一个 ajax/Jquery 解决方案，正如我所说，有很多关于此的文章，但我无法让它们工作。在今天之前，我什至从未尝试过 AJAX，所以如果这是一个完全菜鸟要问的问题，我深表歉意。

任何帮助或指导将不胜感激。谢谢！

好的，我的 Jquery 有这个：

```
$(document).ready(function() {  
   $('#Region').change(function() {
  // remove all options in Area select
 $('#Area').html('');
  // find the new Region selected
  var selected_region = $('#Region').val();
  // get new options from server and put them in your Area select
  $('#Area').get('Ajax/getArea.php?Region=' + selected_region);

});
}); 
```

这适用于我的 PHP：

```
<?php

// get province id passed in via `post` or `get`
$region = $_REQUEST['Region'];

// get the districts in that province
$query = "SELECT DISTINCT AREA FROM Sales_Execs WHERE Region ='$region'";

// link to your database
$link = mysqli_connect("localhost", "root", "", "Quality_Monitoring");

// execute your query
$result = mysqli_query($link, $query);

// parse the options
while($row = mysqli_fetch_assoc($result)) {
 $options = "<option value=\"".$row['AREA']."\">".$row['AREA']."</option>\n  ";
}

// send options
echo $options;

?> 
```

仍然没有喜悦......谁能发现我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:49:44.030

试试这个，我在代码中包含了 3 个不同的部分：

```
1) the PHP code
2) The jQuery
3) The select box container 
```

* * *

```
:: Your PHP file (call it getArea.php)
$selectbox = '<select name="region" onchange="jQuery.selectRegion(this.value)">';

$region = $_REQUEST['Region'];      /* Make sure you escape this */

$query = "SELECT DISTINCT AREA FROM Sales_Execs WHERE Region ='$region'";

$link = mysqli_connect("localhost", "root", "", "Quality_Monitoring");

$result = mysqli_query($link, $query);
$options = '';
while($row = mysqli_fetch_assoc($result)) {
    $options .= '<option value="' . $row['AREA'] . '">' . $row['AREA'] . '</option>';
}

echo $selectbox;
echo $options;
echo '</select>';
    exit; 
```

* * *

```
:: Your jquery

jQuery.selectRegion = function selectRegion(regionId)
{
$.get('ajax/getArea.php?region='+regionId,function(data){
    $('#select_container').html(data);
});
} 
```

* * *

```
:: The select box container
<div id="select_container">
<select name="region" onchange="jQuery.selectRegion(this.value)">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select>
</div> 
```

希望这可以帮助

# javascript - JavaScript getElementById 在 asp.net 中返回 NULL

> ID：11762295
> 
> 赞同：0
> 
> 时间：2012-08-01T15:15:34.003
> 
> 标签：javascript

我已经为此苦苦挣扎了几天，但我没有运气。

问题是，我有一个详细信息视图，它是多视图中视图的一部分，但更重要的是，嵌套在我的详细信息视图中的是许多控件。在这些控件中，我对其中 3 个感兴趣，两个下拉列表和一个文本框。在我的一个下拉列表中，我附加了一个 javascript 函数，当用户从下拉列表中选择一个值时，该函数适用于 onchange 事件

现在，在我的 javascript 函数上，当用户使用“this”作为传递的参数选择一个值时，我可以从我的下拉列表中获取值。但是，在其他两个剩余控件，文本框和另一个下拉列表中，我无法获得该控件。

我尝试了以下代码片段（这已用于两个控件）：

```
document.getElementById('<%= dv.FindControl("ddlTrust.ClientID") %>'); //this returns null

document.getElementById('<%= ddlTrust.ClientID %>'); //errors - says that control has not been declared

document.getElementById("ddlTrust"); //this returns null 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:24:45.063

`dv.FindControl("ddlTrust.ClientID")`将查找客户端 ID 为 的控件`ddlTrust.ClientID`。这就是您的第一条语句返回 null 的原因。但是在这 3 种方法中，我认为你最接近这个。

我个人建议在处理嵌套的 ASP.NET 控件时使用 jQuery，它可以让生活变得更轻松。

但是，如果您希望使用原始 javascript，您可以将 javascript 放在项目模板中（因此每个项目都重复），然后执行以下操作：

```
document.getElementById(<%=ControlID %>); 
```

然后`ControlID`在您的代码中作为全局变量，并在`dv`数据绑定上设置 this 的值：

```
ControlID = ((DropDownList)e.Item.FindControl("ddlTrust")).ClientID; 
```

# javascript - jquery 显示和触发元素

> ID：11762298
> 
> 赞同：0
> 
> 时间：2012-08-01T15:15:39.680
> 
> 标签：javascript, jquery, html

我正在尝试为我的网站创建通知系统，但由于某些未知原因而出现问题。当用户单击它时，我有一个链接，它会触发一个 JavaScript 函数，然后检查 a`div`是否隐藏，如果它是隐藏的，它会显示它并在其中加载一个 PHP 脚本`div`。

我可能忽略了一些东西

我的 JavaScript 代码：

```
// show notifications
$(".noti_bubble").click(function () {
    // check the visibility of the element
    if($(".show-note").is(":hidden")) {
        $(".show-note").show();
        alert('noti_bubble has been perform');
        $(".show-note").load("scripts/notifications.php");
    }else{
        $(".show-note").hide();

    }

}); 
```

我的html代码：

```
<div style="width:900px; margin:0 auto;">
<div style="width:250px; float:right;">

<div class="dhtmlgoodies_contentBox" id="box1">
<div class="dhtmlgoodies_content" id="subBox1">
<!-- slide down content goes here -->
<div id="notiHeading" class="notiHeadingContent">
<strong>Notifications</strong>
</div>

<div class="notif_barline"></div>

<div id="notifyContent">

<div class="show-note"></div>

</div>

</div>
</div>

</div>
</div> 
```

也有`.show-note`一个CSS `display:none;`。

可点击的链接：

```
<a href="#" id="dhtmlgoodies_control"  onclick="return false" onmousedown="javascript:slidedown_showHide('box1');" class="noti_bubble">(0)</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:55:01.673

[http://jsfiddle.net/9M396/](http://jsfiddle.net/9M396/)

html

```
<div style="width:500px; margin:0 auto;">
    <div style="width:250px; float:right;">    
        <div class="dhtmlgoodies_contentBox" id="box1">
            <div class="dhtmlgoodies_content" id="subBox1">
            <!-- slide down content goes here -->
                <div id="notiHeading" class="notiHeadingContent">
                    <strong>Notifications</strong>
                </div>

                <div class="notif_barline"></div>

                <div id="notifyContent">                
                    <div class="show-note"></div>                
                </div>            
            </div>
        </div>
    </div>
</div>
    <a href="#" id="dhtmlgoodies_control" onmousedown="javascript:slidedown_showHide('box1');" class="noti_bubble">(0)</a> 
```

js：

```
// show notifications
$(".noti_bubble").click(function () {
    var div = $(".show-note");

    if(div.is(":hidden")) {
        div.show();
        div.load("/echo/json/?json={}");
    }else{
        div.hide();
    }

    return false;
}); 
```

CSS：

```
div
{
    border: 1px solid black;
}

.show-note
{
    min-height: 100px;
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:56:07.140

将[完整的回调添加到`.load()`](http://api.jquery.com/load/)：

```
$(".show-note").load("scripts/notifications.php", function(response, status, xhr) {
    alert(status);
}); 
```

# java - 对象组合和休眠保存/更新

> ID：11762299
> 
> 赞同：0
> 
> 时间：2012-08-01T15:15:47.533
> 
> 标签：java, hibernate

我是 Hibernate 的新手，希望能得到一点帮助。执行 saveOrUpdate() 时，我没有得到我期望的行为。也许是我的期望需要调整。

执行以下 saveOrUpdate() 时，Building 表不受影响：

```
Buildings building = new Buildings(bldgInfoArg.getBldgId());
building.setBldgNumber(bldgInfoArg.getBldgNumber());

BuildingInfos bldgInfo = new BuildingInfos(null,
        building,       
        bldgInfoArg.getTblAbbreviation(),
        bldgInfoArg.getTblBldgName(),
        bldgInfoArg.getTblStreetAddress(),
        bldgInfoArg.getTblStateCode(),
        bldgInfoArg.getTblZipCode(),
        bldgInfoArg.getTblMajorBuilding(),
        bldgInfoArg.getTblFirstEffectiveAt(),
        bldgInfoArg.getTblLastEffectiveAt(),
        bldgInfoArg.getTblCity(),
        bldgInfoArg.getTblZipCodeExtension());

bldgInfoSssn.saveOrUpdate(bldgInfo); 
```

不会使用建筑物对象更新 Building 表，而只会影响 BuildingInfo 表。当然，我知道我也可以在 Building 表上执行 saveOrUpdate()，但我只是想确保我没有遗漏任何东西。在这个例子中，这没什么大不了的，但在其他情况下，它可能会更烦人。

# c# - 尝试使用 HttpWebRequest 获取身份验证 cookie

> ID：11762301
> 
> 赞同：4
> 
> 时间：2012-08-01T15:15:56.200
> 
> 标签：c#, httpwebrequest, screen-scraping, webclient, httpwebresponse

我必须从一个安全站点中抓取一个表，但我无法登录到该页面并检索身份验证令牌和任何其他相关的 cookie。我在这里做错了吗？

```
public NameValueCollection LoginToDatrose()
{
    var loginUriBuilder = new UriBuilder();
    loginUriBuilder.Host = DatroseHostName;
    loginUriBuilder.Path = BuildURIPath(DatroseBasePath, LOGIN_PAGE);
    loginUriBuilder.Scheme = "https";

    var boundary = Guid.NewGuid().ToString();
    var postData = new NameValueCollection();
    postData.Add("LoginName", DatroseUserName);
    postData.Add("Password", DatrosePassword);

    var data = Encoding.ASCII.GetBytes(postData.ToQueryString(false));
    var request = WebRequest.Create(loginUriBuilder.Uri) as HttpWebRequest;
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = data.Length;
    using (var d = request.GetRequestStream())
    {
        d.Write(data, 0, data.Length);
    }

    var response = request.GetResponse() as HttpWebResponse;
    var responseCookies = new NameValueCollection();
    foreach (var nvp in response.Cookies.OfType<Cookie>())
    {
        responseCookies.Add(nvp.Name, nvp.Value);
    }

    //using (var responseData = response.GetResponseStream())
    //using (var responseReader = new StreamReader(responseData))
    //{
    //    var theResponse = responseReader.ReadToEnd();
    //    Debug.WriteLine(theResponse);
    //}

    return responseCookies;

} 
```

我在返回对象中没有得到任何值。它不会失败。`theResponse`（未注释掉时）的值似乎是登录页面的 HTML。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T18:23:30.137

好的，这里的问题似乎与凭据通过后发生的 302 重定向有关。将`HttpWebRequest`自动跟随 302。

最终，我最终做了一些不同的事情。首先，我将`WebClient`类子分类如下：

```
public class CookiesAwareWebClient : WebClient
{
    private CookieContainer outboundCookies = new CookieContainer();
    private CookieCollection inboundCookies = new CookieCollection();

    public CookieContainer OutboundCookies
    {
        get
        {
            return outboundCookies;
        }
    }
    public CookieCollection InboundCookies
    {
        get
        { 
            return inboundCookies; 
        }
    }

    public bool IgnoreRedirects { get; set; }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = outboundCookies;
            (request as HttpWebRequest).AllowAutoRedirect = !IgnoreRedirects;
        }
        return request;
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        if (response is HttpWebResponse)
        {
            inboundCookies = (response as HttpWebResponse).Cookies ?? inboundCookies;
        }
        return response;
    }
} 
```

这让我可以使用一个`WebClient`可以识别 cookie 的类以及一个我可以控制重定向的类。然后我重写了我的登录代码，如下所示：

```
public NameValueCollection LoginToDatrose()
{
    var loginUriBuilder = new UriBuilder();
    loginUriBuilder.Host = DatroseHostName;
    loginUriBuilder.Path = BuildURIPath(DatroseBasePath, LOGIN_PAGE);
    loginUriBuilder.Scheme = "https";

    var postData = new NameValueCollection();
    postData.Add("LoginName", DatroseUserName);
    postData.Add("Password", DatrosePassword);

    var responseCookies = new NameValueCollection();

    using (var client = new CookiesAwareWebClient())
    {
        client.IgnoreRedirects = true;
        var clientResponse = client.UploadValues(loginUriBuilder.Uri, "POST", postData);
        foreach (var nvp in client.InboundCookies.OfType<Cookie>())
        {
            responseCookies.Add(nvp.Name, nvp.Value);
        }
    }

    return responseCookies;
} 
```

......一切都很顺利。

# android - 使用 SYSTEM_UI_FLAG_HIDE_NAVIGATION 时监听第一个 TouchEvent

> ID：11762306
> 
> 赞同：17
> 
> 时间：2012-08-01T15:16:15.483
> 
> 标签：android, navigationbar, touch-event

从 API 14 开始，您可以`SYSTEM_UI_FLAG_HIDE_NAVIGATION`在 Activity 中的 View 上使用此标志来告诉系统您要隐藏导航栏，直到有用户交互（屏幕触摸）。一旦用户点击屏幕，就会显示该栏。

当用户触摸屏幕时，我正在执行此操作的 Activity 会执行一些操作（启动单独的 Activity），然后将上述标志添加到我的视图中，这非常有效。

添加该标志后，系统会拦截第一次屏幕触摸并通过显示导航栏对其做出反应。直到第二次触摸，我的任何 View 或我的 Activity 才接收到 TouchEvents。

有谁知道我可以设置一个监听器的方法，让我在第一次触摸屏幕时启动我的第二个活动，而不是在使用这个隐藏导航标志时需要双击？

我已经尝试了以下所有方法，当第一次触摸屏幕以显示导航栏时，我没有收到任何回调。

```
@Override
public void onUserInteraction(){
    Log.i(myTag, "INTERACT");
}

@Override
public boolean onGenericMotionEvent(MotionEvent me){
    Log.i(myTag, "GENERIC");

    return true;
}

//I thought maybe the size change would lead to a callback here. No dice though.
@Override 
public void onWindowAttributesChanged(WindowManager.LayoutParams params){
    Log.i(myTag, "WINDOW CHANGE");
}
@Override
public boolean dispatchTouchEvent(MotionEvent me){
    Log.i(myTag, "TOUCH");
    return true;
} 
```

注意：我并不是要阻止在第一次触摸时显示导航栏，我只是想在该事件发生时还采取一些其他措施。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T22:04:21.170

正如 Josh Lee 在他的评论中建议的那样，View.OnSystemUiVisibilityChangeListener 是关键。

这是我使用的代码：

```
mView.setOnSystemUiVisibilityChangeListener(new OnSystemUiVisibilityChangeListener() {
    @Override
    public void onSystemUiVisibilityChange(int vis) {
        Log.i(myTag, "System UI"+ vis);
        if(vis == 0){
            Intent i = new Intent(MainActivity.this, AnotherActivity.class);
            startActivity(i);
            finish();
        }
    }
}); 
```

我认为这`mView`可能是对当前在您的活动中显示的任何视图的引用。在我的情况下，它是一个全屏 VideoView，并且是我布局中的唯一视图。

# jmeter - JMeter：JMX/MBeans 的采样器？

> ID：11762315
> 
> 赞同：2
> 
> 时间：2012-08-01T15:16:43.290
> 
> 标签：jmeter, jmx, mbeans

我有可能从 JMeter 访问被测系统的 MBean 吗？我有一个具有多个部署的系统，但需要一个 MBean 调用来进行最终初始化和启动。我需要访问并运行它。此外，最好从 MBean 中获取一些信息以进行测试。

这怎么可能？我真的需要编写自己的采样器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:36:23.960

要初始化您的组件，您可以使用 à jmeter setup thread group 并使用 jsr223 采样器，使用 groovy 作为底层包。

使用 groovy 很容易调用 jmx 操作：

*   [http://groovy.codehaus.org/Groovy+and+JMX](http://groovy.codehaus.org/Groovy+and+JMX)

否则有一个插件：

*   [http://code.google.com/p/jmeter-rest-sampler/](http://code.google.com/p/jmeter-rest-sampler/)

它包含一个 jmx 采样器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:36:03.303

有一个项目包含一组 JMeter 插件，其中一个支持 JMX：[http ://code.google.com/p/jmeter-plugins/wiki/PerfMonMetrics#JMX_Metrics](http://code.google.com/p/jmeter-plugins/wiki/PerfMonMetrics#JMX_Metrics)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T03:39:17.270

mvmn 上面提到的 PerfMon 将访问被测系统的 MBean，但首选的 JMeter Plugin 解决方案是使用新的 JMX-specific 插件。

以下链接显示了如何识别 JConsole MBean 树中的 jmx 指标（使用 ObjectName、属性名称等），然后将该信息添加到 JMXMon 接口。

[http://jmeter-plugins.org/wiki/JMXMon/](http://jmeter-plugins.org/wiki/JMXMon/)

# asp.net-mvc - DevExpress MVC GridView 自定义窗口 in vol 2010

> ID：11762316
> 
> 赞同：0
> 
> 时间：2012-08-01T15:16:43.767
> 
> 标签：asp.net-mvc, gridview, devexpress

有谁知道如何在 10.2.8.0 (V2010 vol. 2) 版本的 DevExpress MVC GridView 中显示自定义窗口？

DevExpress 网站上的 MVC 示例适用于 2011 年和 2012 年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:29:26.470

此功能仅从版本 v2011 vol 1 (11.1) 开始可用：

[GridView - 提供对 CustomizationWindow 的支持](http://www.devexpress.com/Support/Center/Question/Details/S35528)

# objective-c - 为什么 Objective C 中没有“mutablecopy”限定符？

> ID：11762317
> 
> 赞同：1
> 
> 时间：2012-08-01T15:16:46.530
> 
> 标签：objective-c, cocoa, properties

> **可能重复：**
> [将 Obj-C 2.0 属性与可变对象（例如 NSMutableArray）一起使用的最佳方法是什么？](https://stackoverflow.com/questions/816720/whats-the-best-way-to-use-obj-c-2-0-properties-with-mutable-objects-such-as-ns)

请原谅我糟糕的英语:)

在 Objective C 中，'copy' 限定符不保留可变性。我们必须让一个属性“强大”或自己提供一个 setter。

我只想知道为什么没有提供 'mutablecopy' 限定符。任何具体原因或设计权衡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:44:44.803

> 为什么没有“可变副本”？

因为制作可变副本实际上具有深刻而微妙的含义，这使它变得不平凡。同样，您几乎**从不**希望对象内部存储在外部是可变的。

此外，如果属性要支持可变副本，则需要有一个用于 setter 的版本和一个用于 getter 的版本，因为每个版本都有非常不同的潜在角色（如果您确实想要一个可变属性，您可能需要一个可变复制 setter和正常的保留吸气剂。或相反。）。

这些都没有解决深层与浅层可变副本的更严重问题。

# google-tv - Google TV Dish Network DVR 风格整合

> ID：11762318
> 
> 赞同：0
> 
> 时间：2012-08-01T15:16:51.493
> 
> 标签：google-tv

我正在考虑将 MythTV 与 Google TV 集成；我希望与盘网络 dvr 具有相同级别的集成（能够设置从 Google TV 录制的内容并查找录音）。

是否有任何 api 可以用于此，或者这只是 google-dish 可以通过他们的合作伙伴关系做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:12:06.767

您正在寻找的 API 将作为我们下一个主要软件版本的一部分发布。请观看[在 Google TV 上获取您的内容以](http://www.youtube.com/watch?v=bNbKpUqkOso)了解更多信息。

# android - 为 Android NDK 构建 Pango Cairo

> ID：11762320
> 
> 赞同：6
> 
> 时间：2012-08-01T15:16:56.730
> 
> 标签：android, android-ndk, cairo, pango, pangocairo

我发现有人为 Android NDK 移植了 Pango Cairo（[博客文章](http://cananian.livejournal.com/63595.html)，[源代码](http://dev.laptop.org/git/users/cscott/android-libs/tree/)）。但是我没有成功编译他的示例项目。有没有人设法这样做并且可以告诉我我做错了什么？

这是我到目前为止所尝试的：

*   **git clone --recursive [http://dev.laptop.org/git/users/cscott/android-libs/](http://dev.laptop.org/git/users/cscott/android-libs/)**
*   git 由于某种原因找不到 pixman，所以**git clone [http://cgit.freedesktop.org/pixman/](http://cgit.freedesktop.org/pixman/)**，并移至*android-libs/jni/pixman*
*   *将android-libs/jni/ 的*内容复制到*android-libs/examples/java-bitmap/jni*（不确定要保留哪个 Android.mk？）
*   *将java-bitmap/jni/Makefile.devel*重命名为*Makefile*
*   编辑*java-bitmap/jni/Makefile*如下：NDK=/cygdrive/f/android-ndk-r8b TOOLCHAIN=$(NDK)/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin
*   试图在*java-bitmap/jni中运行***make**

 *我收到以下错误：

```
checking for arm-linux-eabi-gcc... arm-linux-androideabi-gcc --sysroot /cygdrive/f/android-ndk-r8b/platforms/android-9/arch-arm -fpic -ffunction-sections -funwind-tables -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__  -mfpu=vfp -Wno-psabi -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID -Wa,--noexecstack -g -isystem /cygdrive/f/workspace/java-bitmap/jni/sysroot/include
checking whether the C compiler works... no
configure: error: in `/cygdrive/f/workspace/java-bitmap/jni/pixman':
configure: error: C compiler cannot create executables
See `config.log' for more details
Makefile:133: recipe for target `pixman/config.h' failed
make: *** [pixman/config.h] Error 77 
```

这是 config.h 的片段

```
configure:3460: checking whether the C compiler works
configure:3482: arm-linux-androideabi-gcc --sysroot /cygdrive/f/android-ndk-r8b/platforms/android-9/arch-arm -fpic -ffunction-sections -funwind-tables -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__  -mfpu=vfp -Wno-psabi -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID -Wa,--noexecstack -g -isystem /cygdrive/f/workspace/java-bitmap/jni/sysroot/include -nostdlib -DPIXMAN_NO_TLS -DWCHAR_MIN=INT_MIN -DWCHAR_MAX=INT_MAX -I/cygdrive/f/workspace/java-bitmap/jni/pixman-extra -I/cygdrive/f/workspace/java-bitmap/jni/sysroot/include -include pixman-elf-fix.h  -Wl,--fix-cortex-a8  -Wl,--no-undefined -Wl,-z,noexecstack -lc -lgcc -L/cygdrive/f/workspace/java-bitmap/jni/sysroot/lib conftest.c  >&5
cc1.exe: error: pixman-elf-fix.h: No such file or directory
configure:3486: $? = 1
configure:3524: result: no
configure: failed program was:

..

configure:3529: error: in `/cygdrive/f/workspace/java-bitmap/jni/pixman':
configure:3531: error: C compiler cannot create executables
See `config.log' for more details 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-16T23:47:50.240

我又进了一步。

代替

```
git clone http://cgit.freedesktop.org/pixman/ 
```

我下载了

```
git clone --recursive http://dev.laptop.org/git/users/cscott/android-pixman 
```

并将所有文件复制到空`jni/pixman`目录中。现在`pixman-elf-fix.h`找到了文件，但链接器失败了：

> /tmp/cc2XOCMj.o:(.ARM.exidx.text.main+0x0): 对 `__aeabi_unwind_cpp_pr0' 的未定义引用。

但这可能是由[同样的问题引起的](https://stackoverflow.com/questions/9561481/error-linking-to-libgcc-a-when-cross-compiling-for-android-but-symbols-exists)*

# changeset - TFS 变更集，列出关联的工作项及其父工作项

> ID：11762321
> 
> 赞同：2
> 
> 时间：2012-08-01T15:16:58.337
> 
> 标签：changeset, workitem, tfs-workitem

在掌握 TFS 的所有功能的同时，我的任务之一是通过仅列出 PBI 和 BUG 来为我们的产品生成一组发行说明（这里使用 PBI 作为一种工作项，就像一个 bug ) 针对一组变更集。

其他帖子/博客详细介绍了如何从一组变更集中获取工作项列表（我可以使用 PowerShell 脚本来实现）但是，我们系统中的一些相关工作项是任务，因此对于与变更集关联的每个“任务” ，我需要上一级来检索父 PBI/BUG 以在我们的发行说明中列出（当然，我可能需要上一级以上才能得到这个）。

我不完全确定 PowerShell 的所有功能，也许有更好的替代方法来做到这一点？有人建议我使用 C#，但是，我根本没有 C# 的经验，所以 PowerShell 可能是我现阶段最喜欢的选择。

我还看到很多帖子说变更集应该与任务相关，但发行说明应该列出 BUG 等。因此，如果其他用户已经关联了一组变更集，他们如何提供 PBI/BUG 列表？任务？？

任何帮助将不胜感激。

提前谢谢了。

# php - 自动建议显示空白 li 的

> ID：11762324
> 
> 赞同：4
> 
> 时间：2012-08-01T15:17:11.253
> 
> 标签：php, mysql, css

我正在使用[Paper Mashups Autosuggest。](http://papermashup.com/jquery-php-ajax-autosuggest/)

我刚刚完成了一个 mysql union 将三个表合二为一，这样我就可以自动建议公司名称、类别名称和子类别名称。不幸的是，虽然这有效，但它增加了额外的 li（我认为这就是它们的样子，这是 [图片。](http://i.imgur.com/wlhoJ.png)）

我如何摆脱那些多余的 li 的？

这是我的代码：

```
<?php
$db = new mysqli('localhost', 'root' ,'*********', '****************');

if(!$db) {

    echo 'Could not connect to the database.';
} else {

    if(isset($_POST['queryString'])) {
        $queryString = $db->real_escape_string($_POST['queryString']);

        if(strlen($queryString) >0) {
            $query = $db->query("SELECT name FROM company WHERE name LIKE '$queryString%' UNION SELECT cat FROM cat WHERE cat LIKE '$queryString%' UNION SELECT subcat FROM subcat WHERE subcat LIKE '$queryString%' LIMIT 10");
            if($query) {
            echo '<ul>';
                while ($result = $query ->fetch_object()) {
                    echo '<li onClick="fill(\''.addslashes($result->name).'\');">'.$result->name.'</li>';
                    echo '<li onClick="fill(\''.addslashes($result->cat).'\');">'.$result->cat.'</li>';
                    echo '<li onClick="fill(\''.addslashes($result->subcat).'\');">'.$result->cat.'</li>';
                }
            echo '</ul>';

            } else {
                echo 'OOPS we had a problem :(';
            }
        } else {
            // do nothing
        }
    } else {
        echo 'There should be no direct access to this script!';
    }
}
?> 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:23:16.877

你可以简单地检查：

```
while ($result = $query ->fetch_object()) {
                if($result->name && $result->cat && $result->subcat){
                  echo '<li onClick="fill(\''.addslashes($result->name).'\');">'.$result->name.'</li>';
                  echo '<li onClick="fill(\''.addslashes($result->cat).'\');">'.$result->cat.'</li>';
                  echo '<li onClick="fill(\''.addslashes($result->subcat).'\');">'.$result->cat.'</li>';
                 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:24:17.180

在我看来，它正在吐出空白。尝试先使用**name**，然后再使用**cat**，然后再使用**subcat**来查找罪魁祸首。另外，您的三个回声中的子猫正在回声猫而不是子猫...

```
echo '<li onClick="fill(\''.addslashes($result->subcat).'\');">'.$result->cat.'</li>'; 
```

应该：

```
echo '<li onClick="fill(\''.addslashes($result->subcat).'\');">'.$result->subcat.'</li>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:32:53.593

将您的查询修改为如下所示，这将使其更易于理解和操作：

```
SELECT name as SuggestText FROM company WHERE name LIKE '$queryString%' 
UNION 
SELECT cat as SuggestText FROM cat WHERE cat LIKE '$queryString%' 
UNION 
SELECT subcat as SuggestText FROM subcat WHERE subcat LIKE '$queryString%' LIMIT 10 
```

然后您将循环修改为如下所示：

```
while ($result = $query ->fetch_object()) {
     echo '<li onClick="fill(\''.addslashes($result->SuggestText).'\');">'.$result->SuggestText.'</li>';
} 
```

# django - 那么，如何尝试其他人的 Django 示例代码呢？举个例子：django-allauth

> ID：11762326
> 
> 赞同：0
> 
> 时间：2012-08-01T15:17:19.187
> 
> 标签：django

抱歉，这是一个非常初学者的问题，但是是的，我才刚刚开始学习 Django，现在想学习如何实现用户注册。

为此，[django-allauth](https://github.com/pennersr/django-allauth)似乎做了我正在寻找的东西。我已设法安装它及其依赖项，但未能设置包含的示例应用程序。

那么如何让“示例”应用程序运行呢？是否有关于如何安装和尝试其他人的 Django 示例的简要指南？谷歌搜索没有帮助，但我可能正在寻找错误的关键字。

我很感激一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:19:49.653

Django 应用程序附带的示例代码通常并不意味着可以直接运行；您必须阅读它并对您的项目进行更改才能集成应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:00:34.300

在这个特定的实例中，示例“app”实际上是一个完整的 Django 项目。只需切换到示例目录并`python manage.py runserver`从那里运行。

# image - 使用 IValidatableObject 验证上传的文件

> ID：11762329
> 
> 赞同：1
> 
> 时间：2012-08-01T15:17:33.953
> 
> 标签：image, validation, model, upload, ivalidatableobject

大家好！

我在模型验证方面有点菜鸟，我一直在尝试使用 IValidatableObject 接口验证 Articles 对象和上传的文件，但没有成功。

下面这个类很好地验证了 Articles 对象，但我看不到 HttpPostedFileBase 是如何被注入以允许我对其进行验证的。这甚至可以使用这种方法实现吗？

我用来提交数据的表单包含 enctype = multipart/form-data 属性，因此它知道它的发布文件。

这是我试图验证的完整课程。这真的让我陷入困境，任何帮助将不胜感激。

```
public class ArticlesModel : IValidatableObject
{
    public Article Article { get; set; }
    public IEnumerable<Category> Categories { get; set; }
    public HttpPostedFileBase PostedFile { get; set; }

    public ArticlesModel(){}

    public ArticlesModel(Article article, IEnumerable<Category> categories)
    {
        this.Article = article;
        this.Categories = categories;
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (Article.CategoryID == 0)
        {
            yield return new ValidationResult("Please select a category.", new[] { "Article.Category"});
        }

        if (Article.Title == null)
        {
            yield return new ValidationResult("Please enter a title.", new[] { "Article.Title" });
        }

        if (Article.Content == null)
        {
            yield return new ValidationResult("Please enter some content.", new[] { "Article.Content" });
        }

        if (PostedFile == null)
        {
            yield return new ValidationResult("Please upload a file.", new[] { "Article.ImageFile" });
        }
        else
        {
            if (PostedFile.ContentLength > 1 * 1024 * 1024)
            {
                yield return new ValidationResult("Please upload a file 1Mb or less.", new[] { "Article.ImageFile" });
            }

            //Other file checking logic here please!!
        }
    }
} 
```

# vb.net - 如何编组具有保留空间的结构？

> ID：11762330
> 
> 赞同：1
> 
> 时间：2012-08-01T15:17:44.063
> 
> 标签：vb.net, .net-4.0, marshalling

问题：

我有一个固定大小的结构，我正在尝试编组。此结构包含许多用于当前版本的结构的有用字段，以及末尾指定数量的未使用空间，为将来的修改保留。

*我应该如何设计这种结构，以便在修改结构时自动更新保留空间的大小？*

虽然以下内容可以解决我的问题

```
'Variable size structure
<StructLayout(LayoutKind.Sequential, Pack:=1)>
Structure UsefulData
    Dim foo As SByte
    Dim bar As Integer
    Dim foobar As Short
End Structure

Const MAX_SIZE As Integer = 20

'Fixed size structure
<StructLayout(LayoutKind.Sequential, Pack:=1, Size:=MAX_SIZE>
Structure Data
    Dim current As UsefulData
    <MarshalAs(UnmanagedType.ByValArray, SizeConst:=MAX_SIZE-System.Runtime.InteropServices.Marshal.SizeOf(GetType(UsefulData)))>
    Dim reserved As SByte()
End Structure 
```

但不能编译，因为`System.Runtime.InteropServices.Marshal.SizeOf(GetType(UsefulData))`它不是常量表达式。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:18:37.123

在进一步思考这个问题后，我开始质疑我在结构末尾公开保留空间的愿望的有效性。实际上，任何东西都不应该引用保留部分。如果需要，那么正确的方法是修改结构本身以暴露保留空间的相关部分。

因此，结构应如下所示：

```
<StructLayout(LayoutKind.Sequential, Size:=20, Pack:=1)>
Structure Data
    Dim foo As SByte
    Dim bar As Integer
    Dim foobar As Short
End Structure 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:17:44.063

虽然我不认为对数组长度进行硬编码是理想的解决方案，但我将这个答案放在这里以防万一没有其他选择。

```
Private const TOTAL_SIZE As Integer = 20
Private const RESERVED_SIZE As Integer = 7

<StructLayout(LayoutKind.Sequential, Pack:=1)>
Structure Data
   Dim foo As SByte
   Dim bar As Integer
   Dim foobar As Short
   <MarshalAs(UnManagedType.ByValArray, SizeConst:=RESERVED_SIZE)>
   Dim reserved As SByte()
End Structure 
```

然后我可以添加单元测试或自定义构建操作来确保`System.Runtime.InteropServices.Marshal.Sizeof(GetType(Data)) = TOTAL_SIZE`.

# android - 签约直接分销

> ID：11762336
> 
> 赞同：1
> 
> 时间：2012-08-01T15:17:58.430
> 
> 标签：android, code-signing, software-distribution

我正在为公司内部的私人分发编写一个 Android 应用程序。我知道如果我想将应用发布到 Google Play，我需要在发布模式下对其进行签名。然而，这个应用程序只会在内部分发（我们将把它放在一个网络服务器上，并把一个链接放在一个门户网站上）。

我还需要在发布模式下签署我的 .apk 文件还是可以使用调试密钥库？发布经过调试签名的 Android 应用程序有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:22:31.367

> 发布经过调试签名的 Android 应用程序有什么缺点吗？

调试密钥库的生成期限为一年，从创建密钥库开始计算。因此，在您生成调试密钥库一年后，调试密钥库将失效，您不能再使用它来签署应用程序。反过来，这意味着您无法再更新您的应用程序。

Play Store 的生产密钥库的要求是合理的事情，即使对于私有分发也是如此，例如具有显着更长的生命周期。

此外，在相关说明中，请备份您的密钥库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:22:47.703

从[签署您的应用程序](http://developer.android.com/tools/publishing/app-signing.html)页面：

> **注意**：使用调试证书签名后，您*不能*向公众发布您的应用程序。

还

> 用于在调试模式下对应用程序进行签名的自签名证书（Eclipse/ADT 和 Ant 构建的默认设置）的有效期为自创建之日起 365 天。

因此，如果使用调试证书签名，您的 APK 将在一年后停止安装。如果您不进行调试，您应该始终以发布模式发布，签名。我很好奇，你为什么不想签名呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:23:00.847

调试密钥在您安装 sDK 一年后到期，必须重新创建，这样应用程序将在该年之后无法运行。从发布密钥签名真的很容易，因为它们是自签名的发布密钥，你为什么不想这样做呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:23:10.127

我建议您仍然以发布模式对其进行签名。虽然没有什么能阻止您在使用调试证书签名时将其分发出去，但调试证书的有效期仅为一年。因此，每当调试证书到期时，您最终都会使用新的调试证书进行签名。这将要求用户卸载应用程序进行更新，从而使他们丢失数据、偏好等。但是，如果您使用发布证书，则不会发生此问题。

# c# - 读取打印机数据

> ID：11762342
> 
> 赞同：0
> 
> 时间：2012-08-01T15:18:15.560
> 
> 标签：c#

我收到了一个我不熟悉概念的任务。

任务 - 从 POS 系统读取打印机数据流。

提及的术语 ESC/P

我必须读取来自 POS 系统的值。我的第一个问题是如何确定打印作业的开始和结束？

我想我可能正在寻找打印机的控制字符？

另外，有没有办法在不中断 POS 的情况下模拟这个？

有谁知道他们自己熟悉的好例子或参考资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:28:45.710

了解[Printdocument 类](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx) 它有 BeginPrint 和 EndPrint 事件。您可以使用事件处理程序订阅它们。

我对POS系统不熟悉，但我希望它对您的第一个问题有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:52:06.270

您首先需要知道 POS 系统是如何连接到您的计算机的。它可以是 LPT 端口、COM 端口或 USB 端口。然后你可以弄清楚如何读取数据。

但在 Windows 下，LPT 可能由打印机后台处理程序持有。在直接与 LPT1 通话之前，您可能需要禁用假脱机程序。

通常，使用 C++ 直接使用 Win32 API 来做这些事情会更容易。

# batch-file - 需要复制和重命名不同文件夹中的文件

> ID：11762343
> 
> 赞同：1
> 
> 时间：2012-08-01T15:18:16.620
> 
> 标签：batch-file, copy, file-rename

有谁知道如何编写一个（或两个）批处理文件：复制位于不同文件夹中的数百个“index.html”文件并保存在同一个文件夹中（因此需要在子文件夹中搜索）重命名副本（保留原件原样）到“index.jpg”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:14:19.797

我使用批量重命名工具在主文件夹的副本中将所有 index.html 文件重命名为 index.jpg，然后使用 robocopy 将所有内容复制过来，包括将文件结构复制回原始文件夹（仅保留 index.html）

# api - 子域上 api 的 Rails 路由

> ID：11762347
> 
> 赞同：21
> 
> 时间：2012-08-01T15:18:36.003
> 
> 标签：api, routes, subdomain, ruby-on-rails-3.2

我想让我的 Rails 应用程序的 API 可以通过子域 (https://api.domain.com) 访问。我定义了以下路线：

```
constraints :subdomain => 'api' do
  namespace :api, defaults: {format: 'json'} do
    scope module: :v1, constraints: ApiConstraints.new(version: 1, default: true) do
      resources :posts
    end
  end
end 
```

这可行，但会产生以下网址：

```
https://api.domain.com/api/posts 
```

我希望它是：

```
https://api.domain.com/posts 
```

API 控制器位于**app/controllers/api/v1**中它们应该保留的位置。

我尝试绘制路线但没有任何成功。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T07:22:28.067

改变

```
namespace :api, defaults: {format: 'json'} do 
```

到

```
namespace :api, path: nil, defaults: {format: 'json'} do 
```

# css - CSS下的所有文本

> ID：11762349
> 
> 赞同：1
> 
> 时间：2012-08-01T15:18:39.023
> 
> 标签：css, alignment

我想在一行文本的正下方对齐一行文本。

HTML

```
<h4 class="support1">Number 123456</h4>
<h4 class="support2">Number 678910</h4> 
```

CSS

```
.support1 { float:right;}
.support2 {float:right;} 
```

提琴手

[http://jsfiddle.net/3Dtc4/](http://jsfiddle.net/3Dtc4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:20:28.897

用于：`clear:right`_`.support2`

```
.support1, .support2 { float:right;}
.support2 { clear:right; } 
```

[http://jsfiddle.net/3Dtc4/1/](http://jsfiddle.net/3Dtc4/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:23:01.477

浮动是必要的吗？您可以将元素保留为块元素并将文本右对齐：

[http://jsfiddle.net/3Dtc4/9/](http://jsfiddle.net/3Dtc4/9/)

与文本对齐：右；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:24:52.667

由于标题元素是块级元素，它们会将后续元素向下推。您可以简单地使用`text-align: right;`以确保两者都向右对齐，并且块级效果将处理它们彼此下方。

CSS

```
.support1, .support2 { 
  text-align:right;
} 
```

​ 示例：http: [//jsfiddle.net/23U6Q/](http://jsfiddle.net/23U6Q/)

这是想要的效果吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:25:21.810

```
<h4 class="support1">Number 12345</h4><br>
<h4 class="support2">Number 678910</h4> 
```

**或者**

```
.support1 { float:right;}
.support2 {float:right; clear:right; } 
```

# android - Android：在 XML 中覆盖自己的 XML 视图

> ID：11762353
> 
> 赞同：1
> 
> 时间：2012-08-01T15:19:01.080
> 
> 标签：android, xml, styles, overriding

我正在寻找一种在 android 中覆盖我自己的 XML 视图的方法。所以我只需要指定一次设置（如背景、边框、默认内容） - 并再次使用它。

问题是我找不到任何关于它的东西。（我发现的东西是关于在 XML 中使用 java 类来覆盖，这不是我想要的）

这是一些不起作用的代码，但我希望它对您解释得足够好：

```
main.xml:
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <field android:text="@string/str1" />
    <field android:text="@string/str2" />
    <field android:text="@string/str3" />
    <field android:text="@string/str4" />
    <field android:text="@string/str5" />
</LinearLayout>

code representing field (field.xml):
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/field"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@layout/field_background"
    android:text="@string/default_string"/> 
```

如您所见，字段本身已通过一次自定义定义并多次使用。（另一个字符串作为文本集）

这根本不起作用，但我希望有人知道一种方法来使这样的事情起作用。（无需编码，只需 XML）

谢谢，丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:29:59.297

我建议你设置一个样式。在某些文件（通常是`styles.xml`）中`res/values`，为您的字段添加样式：

```
<style name="DefaultTextFieldStyle">
    <item name="android:id">@+id/field</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:background">@layout/field_background</item>
</style> 
```

然后在`main.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <TextView style="@style/DefaultTextFieldStyle"
        android:text="@string/str1" />
    <TextView style="@style/DefaultTextFieldStyle"
        android:text="@string/str2" />
    <TextView style="@style/DefaultTextFieldStyle"
        android:text="@string/str3" />
    <TextView style="@style/DefaultTextFieldStyle"
        android:text="@string/str4" />
    <TextView style="@style/DefaultTextFieldStyle"
        android:text="@string/str5" />
</LinearLayout> 
```

我刚刚复制了您的值，但是`android:id`在布局中为多个视图设置相同的值是错误的，并且将布局作为背景很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:29:16.700

我不知道如何在没有代码的情况下做你想做的事。我会定义我自己的[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)。另请参阅[自定义样式定义的不同 Textview 的不同格式，](https://stackoverflow.com/questions/8761508/different-formats-for-different-textview-defined-by-custom-style)其中显示了如何设置 TextViews 的样式，这可能是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:29:45.147

这里不需要自定义组件。如果我理解您的问题，样式应该足以满足您的需求。

只需在 LinearLayout 中定义一系列 TextView，并让它们从您可以定义的样式中继承公共部分（`layout_width`、`layout_height`等），如下[所述](http://developer.android.com/guide/topics/resources/style-resource.html)。

唯一改变的部分将是`android:text`，根据需要

# php - google map api limit

> ID：11762361
> 
> 赞同：0
> 
> 时间：2012-08-01T15:19:20.020
> 
> 标签：php, javascript, google-maps, client-side, server-side

I am running into the google map api call limit of 25. Doing some research I came across this server side call, which people are referencing. [http://www.webstutorial.com/google-server-side-geocoding-php-infobox/website-tweaks/google](http://www.webstutorial.com/google-server-side-geocoding-php-infobox/website-tweaks/google)

Now I don't understand the code, yet. But my question is, why does it make a difference between calling the google map api's from php/server side and javascript/client side?

This might be a dumb question. But just wondering.

thank you

# javascript - 是否有使用 websockets 的开源聊天库

> ID：11762363
> 
> 赞同：4
> 
> 时间：2012-08-01T15:19:25.173
> 
> 标签：javascript, websocket

我计划在网站上为用户创建一个聊天室，并且想知道是否已经有我可以使用的开源 javascript 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:26:33.747

您可能想看看**node.js / jquery**。这是一个关于聊天的[教程（支持网络套接字）。](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial)

如果您正在使用**Dojo Toolkit**，那么还有一个叫做[Cometd](http://cometd.org/)的东西可以实现聊天室。

或者你可以使用[这个](https://blueimp.net/ajax/)（但没有 websocket）。

# css - HTML5 更改 CSS 相对和绝对定位

> ID：11762364
> 
> 赞同：2
> 
> 时间：2012-08-01T15:19:33.817
> 
> 标签：css, html

我注意到如果我的网页包含 HTML5 doctype header，那么使用相对定位的 CSS 的处理方式会非常不同`<!DOCTYPE HTML>`。例如：

```
<html>
<body>

<img src="test.png" />
<span style="position: relative; top: -10;">TEST</span>

</body>
</html> 
```

将使单词 TEST 比其默认位置高 10 个像素对齐，如下所示： ![与图像顶部对齐的文本](../Images/50747bad5daa3ae9d85d1c49b5adae68.png)

但是，如果我添加`<!DOCTYPE HTML>`到文档顶部并且不进行其他更改：

```
<!DOCTYPE HTML>
<html>
<body>

<img src="test.png" />
<span style="position: relative; top: -10;">TEST</span>

</body>
</html> 
```

那么相对定位似乎对 TEST 这个词没有影响： ![文本不再对齐](../Images/e8cf66a6841c2484f63848ae03c077e5.png)

此行为在 Windows 上最新版本的 IE、Chrome 和 Firefox 中是一致的。在使用带有和不带有 HTML5 doctype 标头的绝对定位时，我注意到了其他古怪的行为。

在 HTML5 中应用相对和绝对定位的方式是否有根本性的变化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T15:21:16.267

这与 HTML5 无关；[这是quirks 模式](https://en.wikipedia.org/wiki/Quirks_mode)和standards 模式的区别，两者都存在已久。

怪癖模式可以由多种因素触发，其中一个因素在您的问题中显示为完全缺乏 doctype 声明。在 quirks 模式下，允许使用无单位长度（并被视为像素长度），这就是您的相对定位有效的原因。

在标准模式下，不允许使用无单位长度（除非它们为零），因此您的`top`声明变为无效 CSS，并被忽略。无论您使用的是 HTML5 doctype 还是 HTML 4 或 XHTML doctype，这都是一样的。事实上，HTML5 doctype 没有任何特殊含义或目的——它只是为了让浏览器在标准模式下呈现而创建的。

# javascript - 如何将参数传递给backbone.js中事件对象中绑定的函数

> ID：11762366
> 
> 赞同：6
> 
> 时间：2012-08-01T15:19:37.157
> 
> 标签：javascript, backbone.js, backbone-views

我需要为 Backbone 中的事件对象中使用的函数提供参数。

```
var DocumentRow = Backbone.View.extend({

    tagName: "li",

    className: "document-row",

    events: {
        "click .icon": "open",
        "click .button.edit": "openEditDialog",
        "click .button.delete": "destroy"
    },

    render: function () {
        // do something
    }
}); 
```

现在让 open 的定义为：

```
function open(id) {
    if (id) {
      // do something
    } else {
      // do something else
    }
} 
```

我将从另一个函数调用 open 并在调用时传递 id。因此，根据我是否通过 id ，我需要做不同的事情。如何在 Backbone 中执行此操作？目前，通过单击调用 id 时，我希望它是未定义的。但是传递了一个事件对象。

为什么会发生这种情况，我该如何传递论点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T18:35:20.100

解决此问题的另一种方法是使用完全不同的方法来处理单击，并调用“打开”，以便另一个进程可以调用它。正如另一个人所提到的，您在事件哈希中指定的方法是 jquery 委托包装器，因此对于参数您无能为力，因为您将获得委托提供的内容。因此，在这种情况下，创建另一个执行实际图标单击的方法，该方法将调用 open：

```
events: {
    "click .icon": "open",
    "click .button.edit": "openEditDialog",
    "click .button.delete": "destroy"
},
/**
* Specifically handles the click and invokes open
*/
handleIconClick : function(event) {
    // ...process 'event' and create params here...
    this.open(params);
},
/**
* This can be called remotely
*/
open : function(id) {
    if (id) {
      // do something
    } else {
      // do something else
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T16:44:27.997

你可以在这里看到：http: [//backbonejs.org/docs/backbone.html#section-156](http://backbonejs.org/docs/backbone.html#section-156)

最关键的一句话是：</p>

```
this.$el.delegate(selector, eventName, method); 
```

因为主干的事件是jquery的委托（[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)），所以传递的参数只是jquery的委托默认参数传递。

你可以像这样更新你的代码：

```
......

open : function(event) {
    //get id from event 
    var id = event.xxx ;//pseudo code
    if (id) {
      this.openid(id);
    } else {
      // do something else
    }
},
//your another function direct call openid
openid: function(id){
    // do something
}
...... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T16:39:59.263

如果您知道 ID 变量的类型，您可以使用 javascript`typeof()`检查是否为真，或者您可以使用[UnderscoreJS](http://underscorejs.org/#isObject)中的_.isObject检查 ID 是否为对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T19:47:23.847

我认为 Brendan 或 fejustin 的答案是最好的（实际上我投给了他们）。但是，如果您真的致力于只有一个功能，您可以创建`id`第二个参数并忽略第一个参数。

```
open : function(evt, id){
  if(id){
     //whatever
  } else {

  }
},

someOtherMethod : function(){
  this.open(null, id);
} 
```

# meteor - 影响流星服务页面的编码？

> ID：11762371
> 
> 赞同：0
> 
> 时间：2012-08-01T15:19:49.653
> 
> 标签：meteor

如何为使用流星服务的页面设置编码？目前我的 Firefox 一直在输出这个警告：

`The character encoding of the HTML document was not declared. The document will render with garbled text in some browser configurations if the document contains characters from outside the US-ASCII range. The character encoding of the page must to be declared in the document or in the transfer protocol.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:38:33.777

`<head>`只需在html 文件的任何部分中设置您的编码：

```
<head>
    <meta charset="UTF-8">
    <title>Whatever</title>
</head> 
```

来自 Meteor 的文档：

> Meteor 应用程序中的 HTML 文件的处理方式与服务器端框架有很大不同。Meteor 扫描目录中的所有 HTML 文件以查找三个顶级元素：`<head>`、`<body>`和 `<template>`. 头部和身体部分分别连接成一个单独的头部和身体，在初始页面加载时传输给客户端。

# linux - 分析（可能是 I/O 绑定的）进程以减少延迟

> ID：11762372
> 
> 赞同：12
> 
> 时间：2012-08-01T15:19:49.850
> 
> 标签：linux, performance, profiling, trace, sampling

我想提高大型应用程序中特定方法的性能。

目标是改善延迟（在特定功能上花费的挂钟时间），而不是（必然）系统负载。

要求：

1.  由于我预计很多延迟是由 I/O 引起的，请考虑等待/阻塞所花费的时间（换句话说：查看挂钟时间而不是 CPU 时间）
2.  由于该程序比我要优化的片段做得更多。需要有一种方法可以以编程方式启动/停止分析，或者过滤输出以仅显示进入和退出我正在优化的函数之间的时间。
3.  方法级别的分析是可以接受的（如果可以在指令级别完成，那就更好了。如果它只分析系统调用，那可能还不够）
4.  这是一个爱好项目，所以昂贵的工具并不是一个真正的选择
5.  仪器（-finstrument-functions）是可以接受的
6.  我感兴趣的关键代码很难手动中断（因为它已经相对较快并且很难在循环中实际调用），因此某种自动化是必要的。

迄今为止丢弃的工具：

*   gprof、oprofile、callgrind（要求 1）
*   使用 getrusage 构建自定义内容（要求 1）
*   Poormansprofiler.org（要求 2）
*   strace -T,dtrace，[http](http://perf.wiki.kernel.org) ://perf.wiki.kernel.org （要求 2 和 3）
*   VTune,Zoom（要求 4）
*   手动调用堆栈采样（要求 6）
*   google-perftools （应该能够测量挂墙时间，但这在我的情况下似乎不起作用，大概是因为 SIGALRM 干扰。
*   systemtap（我的内核没有打补丁以包含 utrace）

我尚未进一步评估的其他选项：

*   cprof （不是开箱即用的，似乎仅限 i386）
*   手动插入跟踪点（例如使用 lttng）

我很想听听：

*   其他选项
*   也许我过早地丢弃了一些工具？
*   我尚未评估的选项是否有机会发挥作用，如果有，如何最好地做到这一点。

我终于安顿下来了：

*   基于[http://balau82.wordpress.com/2010/10/06/trace-and-profile-function-calls-with-gcc/ ，我自己使用 -finstrument-functions 构建自定义的东西](http://balau82.wordpress.com/2010/10/06/trace-and-profile-function-calls-with-gcc/)

这个粗糙的工具产生的痕迹很难解释，我可以很容易地想象一些工具可以进一步处理它的输出，让它变得无限有用。但是，这暂时为我完成了这项工作，所以我将这个项目推迟到以后；）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:40:10.173

使用[这种方法](https://stackoverflow.com/a/378024/23771)。

无论是在 CPU 还是 IO 绑定代码中，它在确定优化机会方面都非常简单有效。

如果您认为最大的机会在特定功能或模块中是正确的，那么它将找到它们。如果他们在别处，它会找到他们。

在您提到并丢弃的工具中，它与穷人的分析器最相似，但仍然不是很相似。

编辑：既然你说它是由用户交互触发并阻止进一步输入直到它完成，这就是我的做法。

首先，我假设它不会阻止到调试器的手动中断信号，因为否则您将无法停止无限循环。其次，我会在有问题的例程周围循环 10、100 或 1000 次，因此它执行的时间足够长，可以手动中断。

现在，假设它在 I/O 上花费了一小部分时间，比如 50%。然后当你中断它时，你有 50% 的机会在 I/O 中捕获它。因此，如果您在 I/O 中捕获它（调用堆栈会告诉您），您还可以非常详细地查看从哪里请求 I/O 以及请求的原因。

它会告诉你发生了什么，这几乎可以肯定是令人惊讶的。如果您看到它在少至两 (2) 个样本上做一些事情，您可以找到一种消除方法，那么您将获得相当大的加速。事实上，如果您消除该活动，您不会提前知道会节省多少时间，但平均而言，您可以期望节省分数*F = (s+1)/(n+2)*，其中*n*是您采集的样本总数，*s*是显示活动的样本数。 [（*继承规则*）](http://en.wikipedia.org/wiki/Rule_of_succession) 例如，如果您获取 4 个堆栈样本并查看其中 2 个的活动，平均而言，它将为您节省*F = 3/6 = 1/2*，对应于*1/(1-F的加速因子)*或 2。

完成此操作后，您可以再次执行此操作并找到其他要修复的内容。加速因素像复利一样相乘。

然后当然你移除外循环并“兑现”你得到的所有加速。

如果您想知道这与分析有何不同，那就是通过仔细检查每个堆栈样本以及可能的相关数据，您可以识别出您可以删除的活动，如果您所拥有的只是测量值，那么您只能尝试直觉到底是怎么回事。无论任何测量结果如何，您节省的实际时间都是如此。重要的是*找到*问题。无论分析器测量它的精度有多高，如果你*找不到*它，你就没有获胜。这些页面上到处都是人们说他们要么不明白他们的分析器告诉他们什么，要么似乎在说没有什么可以修复的，他们只是太愿意接受了。那是一副玫瑰色眼镜。

[*更多关于这一切。*](https://scicomp.stackexchange.com/a/2719/1262)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-30T10:31:18.083

对于 I/O 绑定应用程序，您可以使用`--collect-systime=yes`callgrind 选项。

这会收集系统调用所花费的时间（以毫秒为单位）。因此，如果您认为自己有 I/O 瓶颈，您可以使用这些统计数据来识别它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-18T12:40:26.783

Todo：检查“perf”（再次）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:57:26.180

*   叉（）
*   execxxx（被测进程）
*   在父母中：
    *   （在循环中）定期调用：
    *   getrusage(RUSAGE_CHILDREN, ...)

getrusage() 不仅会为您提供 cpu 使用率，还会为您提供主要/次要页面错误、上下文切换次数等。其余时间可能都花在等待 I/O 上。这不会为您提供详细的分析信息，而是提供程序行为的一个很好的整体足迹，与在每个进程的基础上运行 vmstat 相当。

# iphone - iOS：如何从存储中加载图像

> ID：11762373
> 
> 赞同：0
> 
> 时间：2012-08-01T15:19:53.553
> 
> 标签：iphone, ios, image

我使用以下方法将图像保存到存储中：

```
UIImageWriteToSavedPhotosAlbum(image, self, 
                               @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

现在，如何将该图像加载到图像视图中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:21:41.877

图像视图有一个`image`属性。将图像分配给它。

**编辑：**如果要保存对相册中条目的持久引用，请不要使用该功能来保存它，[`writeImageToSavedPhotosAlbum:metadata:completionBlock:`](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/instm/ALAssetsLibrary/writeImageToSavedPhotosAlbum%3ametadata%3acompletionBlock%3a)而是使用。完成块将被传递一个`assetURL`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:51:19.320

这是我现在使用的代码：

```
//Load the asset URL from my photo object
NSURL *asseturl = [NSURL URLWithString:photo.photoURL];

ALAssetsLibrary*  myasset = [[ALAssetsLibrary alloc] init];
//If the image was found
ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
{
    ALAssetRepresentation *rep = [myasset defaultRepresentation];
    //Get the full resolution image
    CGImageRef iref = [rep fullResolutionImage];
    if (iref) {
        //Get the orientation of the image
        ALAssetOrientation orientation = [[myasset valueForProperty:@"ALAssetPropertyOrientation"] intValue];
        //Set the image view image
        [self.BigImageView setImage:[UIImage imageWithCGImage:iref scale:1.0 orientation:orientation]];
    }
};
//If the image isn't available
ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    NSLog(@"Can't get the image - %@",[myerror localizedDescription]);
    [self.BigImageView setImage:nil];
};

[myasset assetForURL:asseturl
    resultBlock:resultblock
    failureBlock:failureblock]; 
```

# c# - 无论客户端日期时间设置如何，如何计算相对时间

> ID：11762375
> 
> 赞同：1
> 
> 时间：2012-08-01T15:19:57.547
> 
> 标签：c#, windows-phone-7, datetime, twitter, timespan

这是一个非常有名的问题，我目前也在实施[这个问题。](https://stackoverflow.com/questions/11/calculating-relative-time)我的目标是计算 5 分钟前、5 小时前等显示的相对时间，

我正在尝试使用时间线 API 获取用户的推文。
示例：[http ://api.twitter.com/1/statuses/user_timeline.json?screen_name=jonskeet](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=jonskeet)

我面临的主要问题是客户的 DateTime.Now 返回的问题。请记住，我是在我的移动设备上执行此操作的，它可能有 + 或 - 5 分钟的时差，因此我看到了奇怪的值（比如 5 分钟前刚刚发布的推文）

如何解决这个问题？我看到[twitter api](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)没有返回服务器时间让我进行相关计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:26:38.813

好吧，你需要计算*一些东西*。如果客户自己的时间不准确，您将需要另一个来源。也许您可以查询其他服务器的当前时间，并存储与客户端本地时间相比的偏移量以供将来计算。

或者，根据您的 twitter 流的活跃程度，您可以假设新传入的消息是最新的，并将推文时间与本地时间相比的平均偏移量作为偏移量真实值的估计。

# asp.net-mvc - 在 ASP.NET MVC 中处理超时

> ID：11762379
> 
> 赞同：3
> 
> 时间：2012-08-01T15:20:06.400
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在 ASP.NET MVC3 中，我似乎无法覆盖会话超时。我已经在我能想到的所有相关服务器端代码点（globax.ax.cs 中的控制器操作和方法）设置了断点，但会话超时似乎没有任何影响。

我什至按照这里的建议应用了一个属性：（http://www.tyronedavisjr.com/2008/11/23/detecting-session-timeouts-using-a-aspnet-mvc-action-filter/）但即使它不是会话超时时点击。当然超时必须是会话端的，但是在哪里呢？

有谁知道当 ASP.NET MVC 应用程序有会话超时时究竟会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:28:17.563

通常，会话超时可以在 Global.asax 中的 Session_End 事件中处理

```
void Session_End(object sender, EventArgs e) {
    // perform last minute procedures before session ends
} 
```

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.timeout.aspx)，该`HttpSessionState.Timeout`属性有一个设置器，可以在应用程序代码中进行更改，也可以在 web.config 中永久更改

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:34:00.873

您使用的是什么 sessionState 模式？（`<sessionState mode=" ... ">`在 web.config 中）

您应该能够将以下方法添加到 Global.asax.cs 以覆盖默认的 Session_End 行为：

```
protected void Session_OnEnd(object sender, EventArgs e)
{
    // insert code here
} 
```

要记住的事情：

*   仅当 HttpSessionState.Mode 属性值为 InProc 时才会调用 Session_OnEnd / Session_End 事件（这是默认值，因此如果您没有在 web.config 中更改它，这应该没问题）。如果您已将其更改为 StateServer 或 SQLServer，则 Global.asax 文件中的 Session_OnEnd 事件将被忽略。

*   应用程序在放弃会话时调用 Session_OnEnd / Session_End 事件，而不是在您关闭浏览器时。您可以通过调用手动触发它`Session.Abandon`

# sql - 数据立方体设计：难以聚合的度量

> ID：11762381
> 
> 赞同：3
> 
> 时间：2012-08-01T15:20:15.683
> 
> 标签：sql, sql-server, sql-server-2008, ssas

我正在为数据立方体设计事实表，并且我有一个我真的不知道如何正确聚合的度量。以下 SQL 代码将创建一个小样本事实表和维度表：

```
create table FactTable (
    ID      int,
    Color   int,
    Flag    int)

insert into FactTable (ID, Color, Flag) values (1, 'RED',   1)
insert into FactTable (ID, Color, Flag) values (1, 'WHITE', 0)
insert into FactTable (ID, Color, Flag) values (1, 'BLUE',  1)
insert into FactTable (ID, Color, Flag) values (2, 'RED',   0)
insert into FactTable (ID, Color, Flag) values (2, 'WHITE', 0)
insert into FactTable (ID, Color, Flag) values (2, 'BLUE',  1)
insert into FactTable (ID, Color, Flag) values (3, 'RED',   1)
insert into FactTable (ID, Color, Flag) values (3, 'WHITE', 1)
insert into FactTable (ID, Color, Flag) values (3, 'BLUE',  1)

create table ColorDim (
    CID     int, 
    Color  int)

insert into ColorDim (CID, Color) values (1, 'RED')
insert into ColorDim (CID, Color) values (2, 'WHITE')
insert into ColorDim (CID, Color) values (3, 'BLUE') 
```

FactTable 和 ColorDim 在 FactTable.Color = ColorDim.Color 上连接。在立方体中，应该有一个称为“爱国”的度量，它计算对象 ID，包括红色、白色或蓝色（至少一种颜色）。所需的输出如下：

*   浏览立方体时，如果用户拉入爱国度量（不拉任何维度），则显示的总数应为 2，因为有 2 个 ID（即 1 和 3），其中至少包含三种颜色中的一种。请注意，ID 1 应该为总爱国值贡献 1，即使它有两种颜色。
*   如果用户按颜色维度浏览爱国度量，他们应该看到如下表。请注意，ID 1 对 RED 计数贡献 1，对 BLUE 计数贡献 1。

    +--------+------------+
    | 颜色 | 爱国 |
    +--------+------------+
    | 红色 | 2 |
    | 白色 | 1 |
    | 蓝色 | 2 |
    +--------+------------+

（我尝试使用[这个网络应用程序](http://www.sensefulsolutions.com/2010/10/format-text-as-table.html)创建一个表格，但间距似乎不正确。希望它的可读性足以理解。）

我确信这是一个非常基本的多维数据集设计情况，但是我以前没有使用多维数据集，而且我使用的度量通常是简单的列 SUM 或列 SUM 的乘积等。任何帮助都会不胜感激。

（如果相关，我将在 MS SQL Server 2008 中运行构建事实/维度表的 SQL 查询，我将在 MS Visual Studio 2008 中设计多维数据集本身。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:27:49.583

我终于弄明白了。首先，我将每个 ID 添加一行到包含该 ID 的预聚合数据的事实表，因此事实表变为：

```
create table FactTable (
    ID      int,
    Color   int,
    Flag    int)

insert into FactTable (ID, Color, Flag) values (1, 'RED',   1)
insert into FactTable (ID, Color, Flag) values (1, 'WHITE', 0)
insert into FactTable (ID, Color, Flag) values (1, 'BLUE',  1)
insert into FactTable (ID, Color, Flag) values (1, 'PATRIOTIC',  1)
insert into FactTable (ID, Color, Flag) values (2, 'RED',   0)
insert into FactTable (ID, Color, Flag) values (2, 'WHITE', 0)
insert into FactTable (ID, Color, Flag) values (2, 'BLUE',  1)
insert into FactTable (ID, Color, Flag) values (2, 'PATRIOTIC',  1)
insert into FactTable (ID, Color, Flag) values (3, 'RED',   1)
insert into FactTable (ID, Color, Flag) values (3, 'WHITE', 1)
insert into FactTable (ID, Color, Flag) values (3, 'BLUE',  1)
insert into FactTable (ID, Color, Flag) values (3, 'PATRIOTIC',  1) 
```

同样，在颜色维度表中添加一行：

```
create table ColorDim (
    CID     int, 
    Color  int)

insert into ColorDim (CID, Color) values (1, 'RED')
insert into ColorDim (CID, Color) values (2, 'WHITE')
insert into ColorDim (CID, Color) values (3, 'BLUE')
insert into ColorDim (CID, Color) values (4, 'PATRIOTIC') 
```

然后，在 MS Visual Studio 中，将 Color Dimension 中 Color 属性的 DefaultMember 属性编辑为：

```
[Color Dimension].[ColorDim].&[PATRIOTIC] 
```

DefaultMember 属性告诉 MS Visual Studio，事实表中具有颜色“PATRIOTIC”的行已经是具有相同 ID 和其他颜色值的其他行的聚合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:59:19.733

不完全确定为什么您的事实表需要是“ID”和“颜色”之间的交叉连接。您可以简单地消除所有 Flag=0 行并使用 ID 列的简单计数作为您的 Patriotic 度量，不同的计数将为您提供 Patriotic 行的总数。

您也不需要颜色维度，因为 ColorDim 表没有提供额外信息。

但是，如果将更多颜色添加到行中，您将能够将“Patriotic”标志添加到 ColorDim 表中。然后，任何查询都可以通过“Patriotic”标志进行过滤，并且仍然可以获得 Patriotic 行的准确计数。

```
create table FactTable (
    ID      int,
    Color   int
    )

insert into FactTable (ID, Color) values (1, 'RED')
insert into FactTable (ID, Color) values (1, 'BLUE')
insert into FactTable (ID, Color) values (2, 'BLUE')
insert into FactTable (ID, Color) values (3, 'RED')
insert into FactTable (ID, Color) values (3, 'WHITE')
insert into FactTable (ID, Color) values (3, 'BLUE')

   create table ColorDim (
        CID     int, 
        Color  int,
        PatrioticFlag int
    )

insert into ColorDim (CID, Color) values (1, 'RED',1)
insert into ColorDim (CID, Color) values (2, 'WHITE',1)
insert into ColorDim (CID, Color) values (3, 'BLUE',1)
insert into ColorDim (CID, Color) values (4, 'BEIGE',0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:22:20.600

我会试一试，虽然我不是 100% 确定我理解这些问题。此外，我不想将查询发布到评论中以验证它们是否有效。如果我离开并且这没有帮助，我将删除答案。

> 浏览立方体时，如果用户拉入爱国度量（不拉出维度），则显示的总数应为 2，因为有 2 个 ID（即 1 和 3），其中至少包含三种颜色中的一种。请注意，ID 1 应该为总爱国值贡献 1，即使它有两种颜色。

```
WITH MyCTE (id, Count)
AS
(
select id, count(flag) as count
from FactTable
where Flag=1
group by id
having COUNT(flag) >=2
)
select COUNT(*) from MyCTE 
```

> 如果用户按颜色维度浏览爱国度量，他们应该看到如下表。请注意，ID 1 对 RED 计数贡献 1，对 BLUE 计数贡献 1。

```
select a.Color, COUNT(*)
from FactTable a
    join ColorDim b
    on a.Color = b.Color
where Flag = 1
group by a.Color 
```

# r - 是否可以修改 xaxis 以在 ggplot2 中仅显示一组日期

> ID：11762382
> 
> 赞同：2
> 
> 时间：2012-08-01T15:20:17.897
> 
> 标签：r, ggplot2

我有一个这样的数据框：

```
Server

     Date     Server  Space
1 2010-01-30 server1       100
2 2010-02-28 Server1       400  
3 2010-03-30 Server1     300
4 2010-04-30 Server2       200
5 2010-05-30 Server2       500  
6 2010-06-30 Server2       300 
```

基于这个数据框，我使用`aggregate`按月对硬盘使用情况进行分组，并将其存储在一个名为 z 的数据框中，如下所示。z

```
 Month   Value
1 2010-01 600
2 2010-02 700
3 2010-03 800
4 2010-04 900
5 2010-05 800
6 2010-06 900 
```

**我正在尝试在 x 上创建一个堆栈图，并使用ggplot2**在同一堆栈图的顶部基于 z 放置一条线。

语法如下：

我必须这样做以避免（错误：提供连续刻度的离散值）

```
server$Date<-as.character(server$Date) 
```

然后运行这个：

```
ggplot(server, aes(Date, Space)) +  geom_bar(aes(fill=Server), stat="identity", position="stack") + theme_bw() + scale_x_discrete(name="Date") + scale_y_continuous("Space") +  opts(axis.title.x = theme_text(face="bold", colour="#990000", size=15),axis.text.x  = theme_text(angle=90), axis.title.y = theme_text(face="bold", colour="#990000", angle=90, size=15)) + geom_smooth(data=z,aes(Month,Value,group=1), method="lm", size=2, color="darkblue") 
```

这可行，但在我的 xaxis 上，我有两组数据，看起来非常混乱。是否可以隐藏或抑制 x 数据框中的日期并仅显示`z$Month`在 xaxis 上？

我可以使用这个：

```
scale_x_date(labels = date_format("%m-%Y")) 
```

但是当我这样做时，xaxis 现在显示所有数据点的 01-1970。

***更新 *** 让我换个方式问这个问题。我喜欢创建一个堆栈图，并在堆栈顶部，使用 geom_smooth() 放置一条直线以显示总使用量的去向。我在考虑使用 x 数据框来构建堆栈图，然后为总值创建另一个数据框，并根据总数据框作为 z 创建 geom_smooth() 线。这样做，将 2 个数据值放入 xaxis。

与其这样做，是否可以根据 x 数据框在堆栈栏上绘制 geom_smooth() ？

这是数据框的输入：

```
server <- structure(list(Date = structure(c(1325394000, 1325480400, 1325566800, 
1325653200, 1325739600, 1325826000, 1325912400, 1325998800, 1326085200, 
1326171600, 1326258000, 1326344400, 1326430800, 1326517200, 1326603600, 
1326690000, 1326776400, 1325394000, 1325480400, 1325566800, 1325653200, 
1325739600, 1325826000, 1325912400, 1325998800, 1326085200, 1326171600, 
1326258000, 1326344400, 1326430800, 1326517200, 1326603600, 1326690000, 
1326776400, 1325394000, 1325480400, 1325566800, 1325653200, 1325739600, 
1325826000, 1325912400, 1325998800, 1326085200, 1326171600, 1326258000, 
1326344400, 1326430800, 1326517200, 1326603600, 1326690000, 1326776400, 
1328072400, 1328158800, 1328245200, 1328331600, 1328418000, 1328504400, 
1328590800, 1328677200, 1328763600, 1328850000, 1328936400, 1329022800, 
1329109200, 1329195600, 1329282000, 1329368400, 1329454800, 1328072400, 
1328158800, 1328245200, 1328331600, 1328418000, 1328504400, 1328590800, 
1328677200, 1328763600, 1328850000, 1328936400, 1329022800, 1329109200, 
1329195600, 1329282000, 1329368400, 1329454800, 1328072400, 1328158800, 
1328245200, 1328331600, 1328418000, 1328504400, 1328590800, 1328677200, 
1328763600, 1328850000, 1328936400, 1329022800, 1329109200, 1329195600, 
1329282000, 1329368400, 1329454800, 1330578000, 1330664400, 1330750800, 
1330837200, 1330923600, 1331010000, 1331096400, 1331182800, 1331269200, 
1331355600, 1331442000, 1331524800, 1331611200, 1331697600, 1331784000, 
1331870400, 1331956800, 1330578000, 1330664400, 1330750800, 1330837200, 
1330923600, 1331010000, 1331096400, 1331182800, 1331269200, 1331355600, 
1331442000, 1331524800, 1331611200, 1331697600, 1331784000, 1331870400, 
1331956800, 1330578000, 1330664400, 1330750800, 1330837200, 1330923600, 
1331010000, 1331096400, 1331182800, 1331269200, 1331355600, 1331442000, 
1331524800, 1331611200, 1331697600, 1331784000, 1331870400, 1331956800
), class = c("POSIXct", "POSIXt"), tzone = ""), Server = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("ServerA", "ServerB", 
"ServerC"), class = "factor"), Space = c(100, 110, 110, 120, 
120, 130, 130, 140, 140, 150, 150, 160, 160, 170, 170, 180, 200, 
220, 240, 260, 280, 300, 320, 340, 360, 380, 400, 420, 440, 460, 
480, 500, 520, 540, 560, 580, 600, 620, 640, 660, 680, 700, 720, 
740, 760, 780, 800, 820, 840, 860, 880, 100, 110, 110, 120, 120, 
130, 130, 140, 140, 150, 150, 160, 160, 170, 170, 180, 200, 220, 
240, 260, 280, 300, 320, 340, 360, 380, 400, 420, 440, 460, 480, 
500, 520, 540, 560, 580, 600, 620, 640, 660, 680, 700, 720, 740, 
760, 780, 800, 820, 840, 860, 880, 550, 110, 560, 120, 570, 130, 
580, 140, 590, 150, 600, 160, 610, 170, 620, 180, 200, 550, 570, 
590, 610, 630, 650, 670, 690, 710, 730, 750, 600, 620, 640, 660, 
680, 700, 720, 740, 760, 780, 800, 820, 840, 860, 880, 900, 920, 
940, 960, 980, 1000, 1020, 1000)), .Names = c("Date", "Server", 
"Space"), row.names = c(NA, 153L), class = "data.frame")

z <- structure(list(Month = c("2012-01", "2012-02", "2012-03"), Value = c(21140, 
21140, 32010)), .Names = c("Month", "Value"), row.names = c(NA, 
-3L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:32:53.103

由于您正在使用日期（而不是 DateTimes），因此如果您的两个日期列都是`as.Date`对象，您会发现它更容易：

```
server$Date <- as.Date(server$Date)
z$Month <- as.Date(paste0(z$Month, "-01"))

ggplot(server, aes(Date, Space)) +  
  geom_bar(aes(fill=Server), stat="identity", position="stack") +
  geom_point(data=z,aes(Month,Value,group=1), color="darkblue") +
  geom_line(data=z,aes(Month,Value,group=1), color="darkblue") 
```

![在此处输入图像描述](../Images/e29a4f153f5a7b9cb59334a9789c4458.png)

# objective-c - 使用来自主视图的数据在子视图上加载数组

> ID：11762383
> 
> 赞同：0
> 
> 时间：2012-08-01T15:20:18.990
> 
> 标签：objective-c, ios, ios4, xcode4

我的应用程序有两个视图。主视图允许在第二个视图中输入产品的详细信息并存储到数组中。每当我切换到第二个视图时，所有产品详细信息都应加载到表格视图中。

问题是每当我尝试将产品添加到数组中时，它都会保存数据但会替换以前的数据。所以所有时间数组都只存储一个产品信息。我假设每次添加产品时数组都会被初始化。这是代码，

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
  {

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        productArray =[[NSMutableArray alloc] init];
    }
    return self;
} 
```

我试图在 viewDidLoad 方法和许多其他地方分配数组，但没有任何帮助。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:36:53.423

我不确定我是否理解你的问题，但是：

1.  如果要将对象添加到数组中，则应将数组设置为`NSMutableArray`并对其调用`addObject`方法，以便数组现在包含您的新对象。
2.  如果要将数组从主视图传递到第二个视图，则应在 segue 设置中进行。基本上，您`@property`在第二个视图中有一个，`performSegue`在主视图的方法中，您将其设置`@property`为您希望的任何数组。

如果没有情节提要，您将无法使用 segue（至少我不知道如何使用）。所以如果你想使用xib，你需要用传统的方式来做：

```
SomeViewController *viewController = [[SomeViewController alloc] initWithNibName:@"nib" bundle:nil];;
viewController.array = self.array;  // the array you want to pass to your new view 
```

所以在你的 alloc-init 事情中，你只实例化了你的数组，但你似乎没有将数据传递给它？

# php - 从正则表达式匹配中排除 em 标签

> ID：11762384
> 
> 赞同：-1
> 
> 时间：2012-08-01T15:20:19.363
> 
> 标签：php, regex, preg-replace

我有这个 html 文本：

```
<strong><em>La congiura della pietra nera</em></strong>
<p><a href="xxxxx">

<img class="alignleft size-medium wp-image-75372" title="mytitle" 

src="my.jpg" alt="" width="247" height="350"></a>

<strong>Trama:</strong> La storia ruota attorno ad una setta di guerrieri depositaria dei più arcani segreti.</p> 
```

我需要用 prey_replace 替换一些单词，我在 php 中使用这个正则表达式：

```
$mycontent = preg_replace('{'.$words.'(?![^<>]*>)}i','otherwords',$mycontent); 
```

它工作得很好，但我也需要排除标签内的文本，我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:48:47.087

请参阅以下示例代码：

```
 <?php
$foo = '<p><strong>SCHEDA FILM</strong>:<strong> <em>La congiura della pietra nera</em></strong></p>';
$bar1 = 'La congiura della pietra nera';
$bar2 = 'SCHEDA FILM';
echo preg_replace('/(<(?!em\b)(\w+)[^>]*>)'. $bar1 . '(<\/\2>)/', "$1do something$3", $foo);
//output '<p><strong>SCHEDA FILM</strong>:<strong> <em>La congiura della pietra nera</em></strong></p>'

echo preg_replace('/(<(?!em\b)(\w+)[^>]*>)'. $bar2 . '(<\/\2>)/', "$1do something$3", $foo);
//output '<p><strong>do something</strong>:<strong> <em>La congiura della pietra nera</em></strong></p>'     

?> 
```

# sql - 如何将 sql 整数查询结果限制为 <=1

> ID：11762386
> 
> 赞同：0
> 
> 时间：2012-08-01T15:20:24.153
> 
> 标签：sql, postgresql, integer

如何将整数查询结果限制为 1。返回 2 为 1，返回 1 为 1，返回 0.5 为 0.5，因为它 <= 1。我不想修改表，我只想修改结果。

这是我的确切查询。

```
select ((select "V01" from sports where "UID" = '1') * 1.0 ) / 
(select "V01" from master where "BALL" = 'REQUIREMENT') ; 
```

我正在使用postgres。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:23:04.433

为了限制，你会做这样的事情：

```
select 
    case 
        when yourNumber >= 1 then 1
        else yourNumber
    end
... 
```

然后，您只需将此概念应用于您的查询。

正如 Wiseguy 所指出的，您还可以执行以下操作：

```
select LEAST(yourNumber, 1) 
```

，因为这是postgresql。

第一个解决方案适用于任何 ANSI SQL 兼容的数据库。

**更新**

应用于您的查询，我认为（如果我正确理解您想要的）它会是这样的：

```
select LEAST(1,
               ((select "V01" from sports where "UID" = '1') * 1.0 ) / 
               (select "V01" from master where "BALL" = 'REQUIREMENT')
       ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:24:28.297

使用`LEAST`函数，文档：[http](http://www.postgresql.org/docs/8.3/static/functions-conditional.html) ://www.postgresql.org/docs/8.3/static/functions-conditional.html 。`GREATEST`另外，也请查看

```
SELECT LEAST(1, <your value>) 
```

**EDIT**将 GREATEST 替换为 LEAST

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:26:15.803

尝试这个：

```
select CASE 
         WHEN ((select V01 from sports where UID = '1') * 1.0 ) / 
               (select V01 from master where BALL = 'REQUIREMENT') >= 1
         THEN 1
         ELSE ((select V01 from sports where UID = '1') * 1.0 ) / 
               (select V01 from master where BALL = 'REQUIREMENT')
       END; 
```

# php - 如何在 PHP 中解析和转义 sql 连接条件

> ID：11762391
> 
> 赞同：2
> 
> 时间：2012-08-01T15:20:48.770
> 
> 标签：php, escaping

我一直在研究我自己的 SQL 库/查询构建器一段时间。(https://github.com/aviat4ion/Query) 在大多数情况下，我对事情的运作方式非常满意。

一个问题是查询连接。

说类似

```
$db->join($table, 'table1.field1=table2.field2', 'inner'); 
```

对于如何解析需要正确转义表标识符的第二个参数，我感到很困惑。

我也希望能够在这种情况下处理功能。

我目前的实现相当幼稚 - 将条件拆分为空格，因此 'table1.field1=table2.field2' 会失败，而 'table1.field1 = table2.field2' 会起作用。

每个数据库驱动程序都有一个抽象标识符转义的功能，该功能适用​​于表标识符，如`database.table.field`，因此它被转义为`"database"."table"."field"`。

所以我的基本问题是：如何解析标识符以在连接条件中转义它们。

编辑：

我需要以一种可用于 MySQL、Postgres、SQLite 和 Firebird 的方式执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:24:01.697

如果您只想解析 where 表达式，一个简单的运算符优先级解析器就可以解决问题。您必须对解析树进行一些检查以确保表达式有效，但这并不难。

[您可以在http://dickgrune.com/Books/PTAPG_1st_Edition/](http://dickgrune.com/Books/PTAPG_1st_Edition/)（“解析技术 - 实用指南”）下载一个出色的解析指南。优先级解析在 9.2 优先级解析，第 187 页中介绍。

该技术假设您有两件事：

1.  标记器。这应该识别标记，例如：标识符/关键字、数字、运算符、空格/注释等。
2.  优先表。

您从分词器中一一读取令牌。当您发现令牌是运算符时（您知道这是因为它们存储在优先级表中），然后您确定当前令牌的优先级是否高于前一个运算符。如果当前运算符的优先级低于前一个标记的优先级，那么您必须将前一个运算符及其操作数写入解析树，然后从那里回头查找前一个运算符的前一个运算符是什么。如果标记器将标记作为双链表传递，这些操作效果最好，这样您就可以轻松地遍历标记。

如果这一切听起来很难，那么：

1.  使用现有的 SQL 解析器。参见例如[http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)
2.  重新考虑你的 API。

关于选项 #2，您可以要求他们将其作为数组或以 JSON 甚至 XML 等易于解析的格式传递，而不是允许人们将表达式指定为原始文本。

例如，你可以这样：

```
$db->join->inner($table, array(
    '=' => array(
        'left' => array (
            'table' => 'tab1'
        ,   'column' => 'col1' 
        )
    ,   'right' => array (
            'table' => 'tab2'
        ,   'column' => 'col2' 
        )
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:42:48.770

所以这大致是我想出的：

```
class Query_Parser {

/**
 * Regex patterns for various syntax components
 *
 * @var array
 */
private $match_patterns = array(
    'function' => '([a-zA-Z0-9_]+\((.*?)\))',
    'identifier' => '([a-zA-Z0-9_-]+\.?)+',
    'operator' => '=|AND|&&?|~|\|\|?|\^|/|>=?|<=?|-|%|OR|\+|NOT|\!=?|<>|XOR'
);

/**
 * Regex matches
 *
 * @var array
 */
public $matches = array(
    'functions' => array(),
    'identifiers' => array(),
    'operators' => array(),
    'combined' => array(),
);

/**
 * Constructor/entry point into parser
 *
 * @param string
 */
public function __construct($sql = '')
{
    // Get sql clause components
    preg_match_all('`'.$this->match_patterns['function'].'`', $sql, $this->matches['functions'], PREG_SET_ORDER);
    preg_match_all('`'.$this->match_patterns['identifier'].'`', $sql, $this->matches['identifiers'], PREG_SET_ORDER);
    preg_match_all('`'.$this->match_patterns['operator'].'`', $sql, $this->matches['operators'], PREG_SET_ORDER);

    // Get everything at once for ordering
    $full_pattern = '`'.$this->match_patterns['function'].'+|'.$this->match_patterns['identifier'].'|('.$this->match_patterns['operator'].')+`i';
    preg_match_all($full_pattern, $sql, $this->matches['combined'], PREG_SET_ORDER);

    // Go through the matches, and get the most relevant matches
    $this->matches = array_map(array($this, 'filter_array'), $this->matches);
}

// --------------------------------------------------------------------------

/**
 * Public parser method for seting the parse string
 *
 * @param string
 */
public function parse_join($sql)
{
    $this->__construct($sql);
    return $this->matches;
}

// --------------------------------------------------------------------------

/**
 * Returns a more useful match array
 *
 * @param array
 * @return array
 */
private function filter_array($array)
{
    $new_array = array();

    foreach($array as $row)
    {
        if (is_array($row))
        {
            $new_array[] = $row[0];
        }
        else
        {
            $new_array[] = $row;
        }
    }

    return $new_array;
}

} 
```

然后我在我的 Query Builder 类中运行它，在子句中引用标识符，然后将它串在一起：

```
// Parse out the join condition
$parts = $parser->parse_join($condition);
$count = count($parts['identifiers']);

// Go through and quote the identifiers
for($i=0; $i <= $count; $i++)
{
    if (in_array($parts['combined'][$i], $parts['identifiers']) && ! is_numeric($parts['combined'][$i]))
    {
        $parts['combined'][$i] = $this->quote_ident($parts['combined'][$i]);
    }
}

$parsed_condition = implode(' ', $parts['combined']); 
```

# combobox - MS Access：在组合框中显示两列

> ID：11762395
> 
> 赞同：8
> 
> 时间：2012-08-01T15:21:08.793
> 
> 标签：combobox, ms-access-2010

令人尴尬的简单问题，但我无法解决或通过谷歌找到答案。

有两列这样的东西

![联系人下拉列表](../Images/28a5c061ad7a2b52c7fb1eae77793d5e.png)

But when selected it only displays one column, making the information much harder to read/ understand.

![接触](../Images/4090b21c7cd4d5ff49597c77876d5763.png)

尝试更改属性表中的属性（例如列号），但没有明显效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:23:22.707

这在一定程度上取决于你在做什么，通常像这样适合：

```
SELECT Id, Surname & ", " & Forename from Table 
```

换句话说，绑定列是唯一的 ID，选择列在单个列中包含姓氏和名字。

根据附加信息进行编辑：

```
SELECT [Contact].[CID], [Contact].[Csname] & ", " & [Contact].[Cfname] 
FROM [Contact] ORDER BY [CID], [Csname], [Cfname]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T00:15:21.867

由于我的第一列用于在第二列中对项目进行分组，因此仅使用将它们分开看起来并不好

```
SELECT ID, [Type] & ": " & [Title] AS BothValues 
```

按照建议。有很多项目，下拉菜单看起来很混乱[，就像在这个例子](http://i.stack.imgur.com/5W7ls.png)中一样。

我发现在进行选择后，Access 似乎在组合框中显示了第一个**（技术上）可见的列。**因此我最终使用

```
SELECT ID, [Type] & ": " & [Title] AS BothValues, Type, Title 
```

并将第二列的宽度设置为可能的最小、事实上的不可见值 (0";0.007";1",1")。不要忘记增加列数 (4)。现在[下拉列表显示为 grouped](http://i.stack.imgur.com/VKgXv.png)，但我仍然在选择后获得这两个信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T10:50:40.883

您还可以针对此访问限制使用视觉解决方法，使用组合框右侧的文本框，并将文本框值设置为等于组合框的第三列。

如果组合框基于

```
SELECT [Contact].[CID], [Contact].[Csname], [Contact].[Cfname] 
FROM [Contact] ORDER BY [CID], [Csname], [Cfname]; 
```

将列宽设置为 0cm;5cm;6cm（或您可能需要的任何值）和组合框宽度等于第二列（5cm）。然后在组合框的右边新建一个文本框，中间没有空格，设置它的宽度等于第三列（6cm），设置文本框控制源等于：

```
=[combobox_name].[Column](2) 
```

用户无法修改文本框，因为它与控制源相关联。

# sql - 将数据选择到 Postgres 数组中

> ID：11762398
> 
> 赞同：11
> 
> 时间：2012-08-01T15:21:20.713
> 
> 标签：sql, arrays, postgresql, aggregate-functions

我有以下数据：

```
name          id             url

John          1              someurl.com
Matt          2              cool.com
Sam           3              stackoverflow.com 
```

如何在 Postgres 中编写 SQL 语句来选择这些数据到多维数组中，即：

```
{{John, 1, someurl.com}, {Matt, 2, cool.com}, {Sam, 3, stackoverflow.com}} 
```

我以前在 Postgres 中看到过这种数组用法，但不知道如何从表中选择数据到这种数组格式中。

假设这里所有的列都是 type `text`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-01T16:06:24.703

你不能用它`array_agg()`来产生多维数组，至少不能到 PostgreSQL 9.4。
（但即将推出的**Postgres 9.5**提供了一个[新的变体`array_agg()`](http://www.postgresql.org/docs/devel/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)！）

您从[@Matt Ball 的查询](https://stackoverflow.com/a/11762483/939860)中得到的是一组记录 ( `the_table[]`)。

数组只能保存相同基本类型的元素。你显然有数字和字符串类型。将所有列（尚未）转换`text`为使其工作。

您可以为此创建一个聚合函数，就像我之前在[这里](https://stackoverflow.com/a/9134316/939860)向您展示的那样。

```
CREATE AGGREGATE array_agg_mult (anyarray)  (
    SFUNC     = array_cat
   ,STYPE     = anyarray
   ,INITCOND  = '{}'
); 
```

称呼：

```
SELECT array_agg_mult(ARRAY[ARRAY[name, id::text, url]]) AS tbl_mult_arr
FROM   tbl; 
```

请注意附加`ARRAY[]`层，使其成为多维数组（准确地说是二维）。

即时演示：

```
WITH tbl(id, txt) AS (
    VALUES
      (1::int, 'foo'::text)
     ,(2,      'bar')
     ,(3,      '}b",') -- txt has meta-characters
    )
    , x AS (
    SELECT array_agg_mult(ARRAY[ARRAY[id::text,txt]]) AS t
    FROM   tbl
    )
SELECT *, t[1][3] AS arr_element_1_1, t[3][4] AS arr_element_3_2
FROM   x; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T15:25:16.243

您需要使用[聚合函数](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html)；`array_agg`应该做你需要的。

```
SELECT array_agg(s) FROM (SELECT name, id, url FROM the_table ORDER BY id) AS s; 
```

# ruby-on-rails - 橡胶 2（雾）和密钥对错误

> ID：11762401
> 
> 赞同：11
> 
> 时间：2012-08-01T15:21:28.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-ec2, fog

嗨，我正在使用 ec2 试用橡胶 gem，但在通过快速入门部分时遇到了一些问题。由于某种原因，橡胶下的雾找不到密钥对。这是详细信息：

在 irb 中（这里的路径是我的 Rubber.yml key_file 属性中的路径——gsg-keypair 是我的私钥，没有 pem 扩展名，它的公钥在同一个目录中）：

```
1.9.3p125 :010 > File.open("#{Dir[(File.expand_path('~') rescue '/root') + '/.ec2/*'].first}")

=> #<File:/home/charlie/.ec2/gsg-keypair> 
```

但是每次我运行： cap Rubber:create_staging 接受所有默认值时，我都会得到这个：

```
/home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/excon-0.15.4/lib/excon/connection.rb:276:in `request_kernel': The key pair 'gsg-keypair' does not exist (Fog::Compute::AWS::NotFound)
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/excon-0.15.4/lib/excon/connection.rb:105:in `request'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/fog-1.5.0/lib/fog/core/connection.rb:20:in `request'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/fog-1.5.0/lib/fog/aws/compute.rb:368:in `request'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/fog-1.5.0/lib/fog/aws/requests/compute/run_instances.rb:117:in `run_instances'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/fog-1.5.0/lib/fog/aws/models/compute/server.rb:182:in `save'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/fog-1.5.0/lib/fog/core/collection.rb:50:in `create'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/rubber-2.0.5/lib/rubber/cloud/fog.rb:27:in `create_instance'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/rubber-2.0.5/lib/rubber/thread_safe_proxy.rb:13:in `method_missing'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/rubber-2.0.5/lib/rubber/recipes/rubber/instances.rb:295:in `create_instance'
from /home/charlie/.rvm/gems/ruby-1.9.3-p125@bag/gems/rubber-2.0.5/lib/rubber/recipes/rubber/instances.rb:215:in `block (2 levels) in create_instances' 
```

知道为什么会这样吗？

谢谢查理

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-09T15:11:40.693

我刚刚经历过，这就是问题所在：

在 Rubber.yml 文件中，我有：
`region: us-east-1`

但是，当我在 AWS 控制台中创建密钥对时，我位于不同的区域。
您必须在 Rubber.yml 文件中指定的同一区域中创建密钥对。

![在此处输入图像描述](../Images/af97e9e79e30a9e6f7d024ce9ac7341c.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-23T06:41:52.893

在新的 AWS 界面中，区域位于右上角。选择您想要的任何区域，只需确保您的`config/rubber/rubber.yml`文件准确无误：

```
cloud_providers:
aws:
# REQUIRED The AWS region that you want to use.
# 
# Options include
#us-east-1
# eu-west-1
# ap-northeast-1
# ap-southeast-1
# ap-southeast-2
#
region: us-east-1 
```

我`config/rubber/rubber.yml`的和上面的完全一样，它可以工作。感谢 Johnnycakes 解决了这个问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-26T12:56:54.730

抱歉“恢复”旧问题，但这可能对某人有用。

我有类似的问题，除了我的地区完全相同。我的问题是我重命名了密钥文件，看起来它应该完全命名为 AWS/EC2/Keypairs 中的“密钥对名称”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T21:57:04.223

我将此行添加到了我的 Rubber/deploy.rb 文件中，并且它处理了它。此行曾经是 [default] launch-wizard-1 是我的 ec2 aws 实例的名称。添加..assigned_security_groups：[launch-wizard-1]。

# mysql - 与另一台服务器相比，一台服务器上的 MySQL 慢 10 倍

> ID：11762406
> 
> 赞同：1
> 
> 时间：2012-08-01T15:21:38.450
> 
> 标签：mysql, performance, compare, centos, archlinux

我有一个实时服务器和我的开发服务器，我发现我的*实时*（不是开发）服务器上的查询运行速度慢了 10 倍，即使实时服务器更强大并且它们都运行相当的负载。这不是数据库结构的事情，因为我将备份从实时服务器加载到我的开发服务器中。

有人对我可以在哪里寻找差异有任何想法吗？它可能是一个 MySQL 配置的东西吗？我应该从哪里开始寻找？

直播服务器：

```
mysql> SELECT count(`Transaction`.`id`) as count, sum(`Transaction`.`amount`) as sum, sum(Transaction.citiq_margin+rounding + Transaction.citiq_margin_vat) as income FROM `transactions` AS `Transaction ` LEFT JOIN `meters` AS `Meter` ON (`Transaction`.`meter_id` = `Meter`.`id`) LEFT JOIN `units` AS `Unit` ON (`Meter`.`unit_id` = `Unit` .`id`) WHERE (NOT (`Unit`.`building_id` IN ('1', '85')) AND NOT (`Transaction`.`state` >= 90)) AND DAY(`Transaction`.` created`) = DAY(NOW()) AND YEAR(`Transaction`.`created`) = YEAR(NOW()) AND (MONTH(`Transaction`.`created`)) = MONTH(NOW());
+-------+---------+---------+
| 计数 | 总和 | 收入 |
+-------+---------+---------+
| 413 | 3638550 | 409210 |
+-------+---------+---------+
一组中的 1 行（2.62 秒）

[root@mises ~]# 正常运行时间
 17:11:57 55 天，1 分钟，1 个用户，平均负载：0.45、0.56、0.60

```

开发服务器（由于备份的轻微时间延迟，结果计数不同）：

```
mysql> SELECT count(`Transaction`.`id`) as count, sum(`Transaction`.`amount`) as sum, sum(Transaction.citiq_margin+rounding + Transaction.citiq_margin_vat) as income FROM `transactions` AS `Transaction ` LEFT JOIN `meters` AS `Meter` ON (`Transaction`.`meter_id` = `Meter`.`id`) LEFT JOIN `units` AS `Unit` ON (`Meter`.`unit_id` = `Unit` .`id`) WHERE (NOT (`Unit`.`building_id` IN ('1', '85')) AND NOT (`Transaction`.`state` >= 90)) AND DAY(`Transaction`.` created`) = DAY(NOW()) AND YEAR(`Transaction`.`created`) = YEAR(NOW()) AND (MONTH(`Transaction`.`created`)) = MONTH(NOW());
+-------+---------+---------+
| 计数 | 总和 | 收入 |
+-------+---------+---------+
| 第357章 3005550 | 338306 |
+-------+---------+---------+
1 行一组（0.22 秒）

[www@smith 测试]$ 正常运行时间
 18:11:53 12 天，1:57，4 个用户，平均负载：0.91、0.75、0.62

```

Live Server（2 x Xeon Quadcore）：

```
处理器：7
vendor_id : 正版英特尔
CPU系列：6
型号：44
型号名称：Intel(R) Xeon(R) CPU E5620 @ 2.40GHz
步进：2
中央处理器兆赫：2395.000
缓存大小：12288 KB
物理ID：0
兄弟姐妹：8
核心编号：10
CPU核心数：4

```

开发服务器（1 个四核）

```
处理器：3
vendor_id : 正版英特尔
CPU系列：6
型号：23
型号名称：Intel(R) Core(TM)2 Quad CPU Q8300 @ 2.50GHz
步进：10
微码：0xa07
中央处理器兆赫：1998.000
缓存大小：2048 KB
物理ID：0
兄弟姐妹：4
核心编号：3
CPU核心数：4

```

直播服务器：

1.  CentOS 5.7
2.  MySQL 版本 5.0.95

开发服务器：

1.  ArchLinux
2.  MySQL 版本 5.5.25a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:32:06.177

首先要检查的是您的 MySql 配置文件，以确保您使用适当数量的内存进行查询。例如 key_buffer、sort_buffer 等...有比我聪明得多的人拥有完整的博客专门用于配置MySql。

您还可以在查询前加上“解释”，以查看花费最多的时间……但这可能只是以后一般用途的东西。

实际上，您的“实时”服务器具有缓存功能和两倍的内核数来进行这些查询，并且它可能有足够的马力和内存来解释服务器之间查询时间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:44:33.380

因此，我在运行 Centos、1 个 CPU 和 512MB 内存的虚拟机上运行相同的数据库和查询：它在 0.3 秒内提供了该查询的答案；系统负载为 0.4：/

唯一真正的区别似乎是我在该服务器上运行 Mysql 5.5。从 Mysql 5.0 到 Mysql 5.5，我的情况似乎*确实*有 10 倍的性能提升。

只有在将实时服务器从 Mysql 5.0 迁移到 Mysql 5.5 后，我才能确定，一旦完成，我将确认结果。

# html - 有没有办法捕获多个复选框并选择框项？

> ID：11762409
> 
> 赞同：2
> 
> 时间：2012-08-01T15:21:45.317
> 
> 标签：html, forms, jsp, loops

a 我有一个很大的表单，里面有很多复选框和一个多选列表。

所有这些选项都是这样的：

```
<input type="checkbox" name="chk1" id="chk1" />chk1<br />
<input type="checkbox" name="chk2" id="chk2" />chk2<br />
<input type="checkbox" name="chk3" id="chk3" />chk3<br />
<input type="checkbox" name="chk4" id="chk4" />chk4<br />
<input type="checkbox" name="chk1_group2" id="chk1_group2" />A<br />
<input type="checkbox" name="chk2_group2" id="chk2_group2" />B<br />
<input type="checkbox" name="chk3_group2" id="chk3_group2" />C<br />
<input type="checkbox" name="chk4_group2" id="chk4_group2" />D<br /> 
```

我的想法是获取所有值并将它们保存在一个单一的值中，如下所示：

```
String chk = "chk1, chk2, chk3";
String chk_group2 = "A,B,D"; 
```

我正在寻找一个可以从请求中获取所有值并将值放在一个字符串中的循环。我试过 List 但它不起作用。我正在使用 JSP 和 Oracle 10g DB

THK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:01:07.153

我会首先给每个复选框一个“组”属性（或同样区别的东西），以指定它应该代表什么组，如下所示：

```
...
<input type="checkbox" group="group1" name="chk4" id="chk4" />chk4<br />
<input type="checkbox" group="group2" name="chk1_group2" id="chk1_group2" />A<br />
... 
```

然后用这样的东西解析它们：

```
var group1 = [];
var group2 = [];

function parseSelected(){
    // maybe a more specific query for this 
    var checkboxes = document.getElementsByTagName("input");
    for (var i=0; i<checkboxes.length; i++) {
        var checkbox=checkboxes[i];
            // if its not checked, continue... 
        if(!checkbox.checked) continue;
        if(checkbox.getAttribute("group")=="group1"){
            group1.push(checkbox.getAttribute("name"));
        } else if(checkbox.getAttribute("group")=="group2"){
            group2.push(checkbox.getAttribute("name"));
        }
    }
} 
```

并在某处发生某些事件（可能提交表单？）

```
parseSelected();
var strGroup1 = group1.join(', ');
var strGroup2 = group2.join(', '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T01:33:22.797

自从我偶然发现了这个问题..即使它已经发布了很长时间，其他人也可能会发现它也很有帮助。

您可以使用 jquery.each 轻松访问复选框；例如：

```
$(document).ready(function () {
    $('th input[type=checkbox]').each(function() {
        $(this).click(function (e) {
            var table = $(e.target).closest('table');
            $('td input:checkbox', table).prop('checked', this.checked);
        });
    });
}); 
```

# xml - 这个 XML 是否有效，以及如何使用 TXMLDocument 创建它

> ID：11762410
> 
> 赞同：4
> 
> 时间：2012-08-01T15:21:47.140
> 
> 标签：xml, delphi, txmldocument

这个 XML “有效”吗？

```
<?xml version="1.0"?>
<p class="leaders">
    Todd
    <span class="leader-type">.</span>
    R
    <span class="leader-type">.</span>
    Colas
</p> 
```

我从未见过像这样对节点有多个“值”的 XML 文档`<p>`。

如何`<p>`使用 TXMLDocument 解析出三个值？以及如何遍历`<span>`节点？

最后...如何使用 TXMLDocument 创建这样的 XML 文档？？？？

帮助！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T16:00:54.523

当您说它是否有效时，我认为您的意思是：它格式正确吗？（如果没有 DTD 或模式，我们无法判断它是否有效）。

是的，它的格式很好。它是包含混合内容的文档的一个完全正常的示例，这正是 XML 的设计目的。

我无法回答您关于 TXMLDocument 的问题，因为我从未听说过它：大概它是 delphi XML 库的一部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T18:53:30.900

是的，它是有效的 XML。要解析它，您必须了解 XML 表示为节点树。该 XML 将解析为以下树结构。

```
p
|_ attributes
| |_ "class"="leaders"
|
|_ children
  |_ #text "Todd"
  |
  |_ span
  | |_ attributes
  | | |_ "class"="leader-type"
  | |
  | |_ children
  |   |_ #text "."
  |
  |_ #text "R"
  |
  |_ span
  | |_ attributes
  | | |_ "class"="leader-type"
  | |
  | |_ children
  |   |_ #text "."
  |
  |_ #text "Colas" 
```

每个属性和子节点都表示`IXMLNode`为`TXMLDocument`. 如您所见，纯文本部分被分成它们自己的`#text`节点。

将 XML 加载到`TXMLDocument`中后，该`TXMLDocument.DocumentElement`属性表示`<p>`节点。该节点的`AttributeNodes`属性包含一个“类”节点，其`ChildNodes`属性包含第一级`#text`和`<span>`节点。`<span>`节点有自己的和`AttributeNodes`列表`ChildNodes`，依此类推。因此，要解析它，您将遍历树以查找`#text`节点，并根据需要使用`<span>`节点来操作文本。

要创建这样的文档，您只需根据需要创建各个节点，例如：

```
Doc.Active := False;
Doc.Active := True;

Node := Doc.AddChild('p');
Node.Attributes['class'] := 'leaders';

Child := Doc.CreateNode('Todd', ntText);
Node.ChildNodes.Add(Child);

Child := Node.AddChild('span');
Child.Attributes['class'] := 'leader-type';
Child.Text := '.';

Child := Doc.CreateNode('R', ntText);
Node.ChildNodes.Add(Child);

Child := Node.AddChild('span');
Child.Attributes['class'] := 'leader-type';
Child.Text := '.';

Child := Doc.CreateNode('Colas', ntText);
Node.ChildNodes.Add(Child);

Doc.SaveTo...(...); // generate the XML to your preferred output 
```

如果您希望空白/换行符出现在 XML 输出中，只需在`#text`节点的内容中包含这些字符。将 XML 解析为`TXMLDocument`时，默认情况下会去除不必要的空格。如果要保留它，请在加载 XML 之前启用属性`poPreserveWhiteSpace`中的标志。`ParseOptions`

# iphone - 在屏幕上设置图像查看顺序

> ID：11762411
> 
> 赞同：0
> 
> 时间：2012-08-01T15:21:51.133
> 
> 标签：iphone, objective-c, xcode

当我使用此代码在 xcode 中创建图像视图时：

```
UIImageView *img = [[UIImageView alloc] initWithImage:@"image.png"];

img.frame = CGRectMake(40, 40, 80, 80);
img.alpha = 0.25;
[self.view addSubview:img]; 
```

它将在视图中生成图像，但是如果我喜欢说我使用 IB 添加的屏幕上的 5 个按钮，并且我希望我在 xcode 中创建的图像位于按钮后面，我该怎么办？

是否有一行代码可以将图像设置在后面？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:29:08.603

```
[self.view sendSubviewToBack:img]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:14:46.783

正如@Noah 所述，您可以使用：

```
[self.view sendSubviewToBack:img]; 
```

只需将您的视图发送到后面。您还可以使用以下内容进行更高级的配置。

```
[self.view insertSubview:img aboveSubview:otherSubView];
[self.view insertSubview:img belowSubview:otherSubView];
[self.view insertSubview:img atIndex:MYINDEXPATH];
[self.view exchangeSubviewAtIndex:MYINDEXPATH withSubviewAtIndex:ANOTHERINDEXPATH]; 
```

可以在[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)中找到详细信息。

# google-authentication - 取消对 Google 应用的授权

> ID：11762412
> 
> 赞同：4
> 
> 时间：2012-08-01T15:21:51.393
> 
> 标签：google-authentication

我正在尝试取消授权我之前允许使用我的 Google 信息的应用程序之一。

Twitter 和 Facebook 允许取消授权。您如何在 Google 中实现它？尝试查看设置，但无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T16:09:13.287

[https://www.google.com/accounts/b/0/IssuedAuthSubTokens](https://www.google.com/accounts/b/0/IssuedAuthSubTokens)是用于查看/撤销授予第三方应用程序权限的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T04:42:15.423

你也可以打开你的 Google+ 应用，打开设置，在账户设置下点击你的名字，然后点击带有 Google-plus 登录的应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:27:06.290

如果这是您从 Chrome 商店添加到 Google 的内容，请转到 chrome 商店“您的购买”并单击您要删除的应用程序 - 有一个小垃圾桶图标可将其从您的个人资料中删除：

[https://chrome.google.com/webstore/user/purchases](https://chrome.google.com/webstore/user/purchases)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-15T10:48:08.090

Jason 的链接运行良好，但[https://myaccount.google.com/](https://myaccount.google.com/)似乎不那么脆弱。（只需向下滚动到“连接的应用程序和服务”。）

# ios - 图像视图没有响应触摸事件

> ID：11762413
> 
> 赞同：1
> 
> 时间：2012-08-01T15:21:53.403
> 
> 标签：ios

我有一个缩略图网格，当其中一个被触摸时，我想显示整个图像。现在，我知道 UIImageView 不响应触摸事件，但正如[这个答案](https://stackoverflow.com/a/856433/115543)中所建议的，我创建了一个 UIButton 来处理事件。请参见下面的代码：

```
- (void)displayImage
{
        NSUInteger i = 0; //  The actual code is different and works; this is just for brevity's sake.

        // UILazyImageView is a subclass of UIImageView
        UILazyImageView *imageView = [[UILazyImageView alloc] initWithURL:[NSURL URLWithString:[[[self images] objectAtIndex:i] thumbnailUrl]]];

        UIButton *imageButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [imageButton setFrame:[imageView frame]];
        [imageButton addTarget:self action:@selector(imageTapped:) forControlEvents:UIControlEventTouchUpInside];
        [imageView addSubview:imageButton];

        [[self containerView] addSubview:imageView];
        [imageView release];
    }
}

- (void)imageTapped:(id)sender
{
    NSLog(@"Image tapped.");

    // Get the index of sender in the images array 
    NSUInteger index = 0;  // Don't worry, I know.  I'll implement this later

    FullImageViewController *fullImageViewController = [[[FullImageViewController alloc] initWithImageURL:[NSURL URLWithString:[[[self images] objectAtIndex:index] url]]] autorelease];
    [[self navigationController] pushViewController:fullImageViewController animated:YES];
} 
```

好的。所以我创建了一个自定义按钮，设置它的框架以匹配图像框架，告诉它响应内部的修饰以及如何响应，并将其添加到图像的子视图中。但是当我运行它时，我什么也得不到。“图像被窃听”。没有出现在控制台中，所以我知道消息没有被发送。我在这里做错了什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:30:03.727

默认情况下，UIImageView 的 userInteractionEnabled 属性设置为 NO

添加这一行

```
imageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:29:55.300

尝试

```
imageView.userInteractionEnabled = YES; 
```

这是从 UIView 继承的属性，但根据 Apple 的文档，UIImageView 将其默认值更改为 NO，忽略所有事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:37:17.703

除了设置之外`imageView.userInteractionEnabled = YES`，您还可以完全取消按钮并添加一个`UITapGestureRecognizer`到`UIImageView`处理水龙头。它看起来像：

```
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
[imageView addGestureRecognizer:recognizer]; 
```

# java - 接口 - 解决模棱两可的错误

> ID：11762418
> 
> 赞同：5
> 
> 时间：2012-08-01T15:22:09.973
> 
> 标签：java, interface

让我们看下面的例子：

```
public class BothPaintAndPrintable implements Paintable,Printable{
    public void print() {}
    public void paint() {}
}
public interface Paintable {
    public void paint();
}

public interface Printable {
    public void print();
}

public class ITest {
    ArrayList<Printable> printables = new ArrayList<Printable>();
    ArrayList<Paintable> paintables = new ArrayList<Paintable>();
    public void add(Paintable p) {
        paintables.add(p);
    }
    public void add(Printable p) {
        printables.add(p);
    }
    public static void main(String[] args) {
        BothPaintAndPrintable a= new BothPaintAndPrintable();
        ITest t=new ITest();
        t.add(a);//compiliation error here
    }
} 
```

如果我希望`BothPaintAndPrintable`将实例添加到每个 ArrayLists 怎么办？一种方法是使用`BothPaintAndPrintable`参数重载方法，但我正在尝试寻找替代方案，因为这样做可能会降低代码的可重用性。有人有其他想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:36:12.517

您需要第三个重载：

```
public <T extends Object&Paintable&Printable> void add(T t) {
  paintables.add(t);
  printables.add(t);
} 
```

这使得擦除`add(Object)`，因此它不会与其他方法冲突，但它确实限制了对`Paintable`和的实现者的输入`Printable`。

（Guava[不得不](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html#appendTo%28A,%20I%29)对`Joiner`with `Iterator`and使用这个技巧`Iterable`，因为一些邪恶的类同时实现了这两者，尽管这是一个糟糕的主意。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:30:00.907

我会采用一般`add(Object o)`方法，然后检查`instanceof`，并将其`Object`放入相应的列表中。

如果传递的`Object`两个接口都没有实现，那么抛出一个`InvalidArgumentException`可能是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:38:06.863

不确定最佳答案，因为我找不到我真正喜欢的方式！

您可以使用泛型，但我既不喜欢“instanceof”测试，也不喜欢所需的演员表：

```
import java.util.ArrayList;

class BothPaintAndPrintable implements Paintable, Printable {
    public void print() {
    }

    public void paint() {
    }
}

interface Paintable {
    public void paint();
}

interface Printable {
    public void print();
}

 public class ITest<T> {
    ArrayList<Printable> printables = new ArrayList<Printable>();

    ArrayList<Paintable> paintables = new ArrayList<Paintable>();

    public void add(T p) {
        if (p instanceof Paintable) {
            paintables.add((Paintable) p);
        }
        if (p instanceof Printable) {
            printables.add((Printable) p);
        }
    } 

    public static void main(String[] args) {
        BothPaintAndPrintable a = new BothPaintAndPrintable();
        ITest<BothPaintAndPrintable> t = new ITest<BothPaintAndPrintable>();
        t.add(a);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:16:37.857

好的，我确实喜欢正确的答案；但是，我应该向 OP 指出另一种解决方案。

```
public static void main(String[] args) {
    BothPaintAndPrintable a= new BothPaintAndPrintable();
    ITest t=new ITest();
    t.add((Paintable)a);
    t.add((Printable)a);
} 
```

这可以在不添加第三个成员的情况下工作，即使您决定在以后添加更多接口也可以工作。

# xml - REST Web 服务 - 从 JSP 发送带有 xml 的 post 请求

> ID：11762421
> 
> 赞同：0
> 
> 时间：2012-08-01T15:22:13.817
> 
> 标签：xml, jsp, rest

我有一个 JSP 文件，其中有一个实体类 - 我想将用户添加到数据库中。我有一个使用应用程序/xml 的 POST 方法的 REST Web 服务。我想，我必须将数据解析为 XML 并调用 post 方法，但是如何发送这个 xml 数据来休息这个调用呢？我只知道如何调用 GET 方法，但如何调用需要一些参数的例如 post 或 delete 方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:36:47.880

您有两个挑战：生成 XML（不是解析，解析是从 XML 转换，而不是从 XML 转换）和 POST。

第一个问题相当简单。您可以使用各种库，从[jaxb](/questions/tagged/jaxb "显示标记为“jaxb”的问题")到[dom](/questions/tagged/dom "显示标记为“dom”的问题")到使用手动制作 XML `StringBuilder`（不建议）。

您可以使用纯 Java 发送 POST，请参阅：[Java：如何使用 UrlConnection 发布授权请求？](https://stackoverflow.com/questions/2026260)还有一些特殊的库，比如[httpclient](/questions/tagged/httpclient "显示标记为“httpclient”的问题")。

顺便说一句，**不要**：在 JSP 中调用 Web 服务、直接访问数据库、启动线程、打开文件……。至少使用 servlet 并留下 JSP 来表示。

# python - matplotlib 线框图 / 3d 图 howTo

> ID：11762422
> 
> 赞同：2
> 
> 时间：2012-08-01T15:22:18.700
> 
> 标签：python, 3d, plot, matplotlib, wireframe

我想用 matplotlib 绘制一个 3d 图。

数据如下：我有一个矩阵，每行包含 3d 绘图的 Y 坐标。每行第一个元素是 3d 绘图的 X 坐标。最后，第二个矩阵在 X,Y 位置包含每个点的高电平。因此，第二个矩阵包含我的 Z 坐标。两个矩阵都是 Python 的数组。我想知道如何转换数据以获得：

*   每个 1d 信号对应于 X 的图，像这样（在线提供照片）![在此处输入图像描述](../Images/e0a829f86c9ca9c2052640141ffb49ec.png)
*   相同数据的线框图，像这样![在此处输入图像描述](../Images/bd32c9ce1ab6d43d41d0adbb2cb36605.png)

我为线框工作编写了一个辅助函数，

```
 ########  HELPER FOR PLOT 3-D

 def plot_3d(name,X,Y,Z):

     fig = plt.figure(name)
     ax = fig.gca(projection='3d')
     X = np.array(X)
     Y = np.array(Y)
     Z = np.array(Z)
     ax.plot_wireframe(X,Y,Z,rstride=10,cstride=10)
     ax.set_xlabel('X Label')
     ax.set_ylabel('Y Label')
     plt.show() 
```

但我不知道如何转换数据 X、Y、Z 以使其符合 matplotlib 函数的要求，该函数需要 X、Y、Z 的 2D 列表。

对于第一张图，我阅读了帮助，并想在 3d 中使用 2d 绘图。示例源代码给出：

```
x = np.linspace(0, 1, 100)
y = np.sin(x * 2 * np.pi) / 2 + 0.5
ax.plot(x, y, zs=0, zdir='z', label='zs=0, zdir=z') 
```

其中 z 是常数坐标。在我的例子中，x 是常数坐标。我适应

```
 fig = plt.figure('2d profiles')
        ax = fig.gca(projection='3d')
        for i in range(10):
             x = pt  ## this is a scalar
             y = np.array(y)
             z = np.array(z)
             ax.plot(xs = x, y, z, xdir='x')
        plt.show() 
```

但有警告：`non-keyword arg after keyword arg`。怎么修？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:18:20.403

关于在 3D 中显示一系列矢量，我提供了以下“几乎可以工作”的解决方案：

```
def visualizeSignals(self, imin, imax):

    times = self.time[imin:imax]
    nrows = (int)((times[(len(times)-1)] - times[0])/self.mod) + 1

    fig = plt.figure('2d profiles')
    ax = fig.gca(projection='3d')
    for i in range(nrows-1):
        x = self.mat1[i][0] + self.mod * i
        y = np.array(self.mat1T[i])
        z = np.array(self.mat2[i])
        ax.plot(y, z, zs = x, zdir='z')

    plt.show() 
```

至于 2D 表面或网格图，我通过使用网格来完成。请注意，一旦您知道网格网格是如何构建的，您就可以自己复制网格网格。有关 meshgrid 的更多信息，请参阅[这篇文章](https://stackoverflow.com/questions/1827489/numpy-meshgrid-in-3d)。

这是代码（不能这样使用它，因为它指的是类成员，但您可以基于我正在使用的 matplotlib 中的 3d 绘图方法构建代码）

```
def visualize(self, imin, imax, typ_ = "wireframe"):
    """
    3d plot signal between imin and imax
    . typ_: type of plot, "wireframce", "surface"
    """

    times = self.retT[imin:imax]
    nrows = (int)((times[(len(times)-1)] - times[0])/self.mod) + 1

    self.modulate(imin, imax)

    fig = plt.figure('3d view')
    ax = fig.gca(projection='3d')

    x = []
    for i in range(nrows):
        x.append(self.matRetT[i][0] + self.mod * i)

    y = []
    for i in range(len(self.matRetT[0])):
        y.append(self.matRetT[0][i])
    y = y[:-1]

    X,Y = np.meshgrid(x,y)

    z = [tuple(self.matGC2D[i]) for i in range(len(self.matGC))] # matGC a matrix

    zzip = zip(*z)

    for i in range(len(z)):
        print len(z[i])

    if(typ_ == "wireframe"):
        ax.plot_wireframe(X,Y,zzip)
        plt.show()
    elif(typ_ == "contour"):
        cset = ax.contour(X, Y, zzip, zdir='z', offset=0)
        plt.show()
    elif(typ_ == "surf_contours"):
        surf = ax.plot_surface(X, Y, zzip, rstride=1, cstride=1, alpha=0.3)
        cset = ax.contour(X, Y, zzip, zdir='z', offset=-40)
        cset = ax.contour(X, Y, zzip, zdir='x', offset=-40)
        cset = ax.contour(X, Y, zzip, zdir='y', offset=-40)
        plt.show() 
```

# javascript - Highstock 中的尖峰未正确显示

> ID：11762424
> 
> 赞同：2
> 
> 时间：2012-08-01T15:22:21.267
> 
> 标签：javascript, jquery, highcharts, highstock

我有一个关于 Highstock 的问题。我有一个数据记录引擎负载，它在数据集中有峰值。我正在尝试在 Highstock 中绘制此数据集，但是当输入数据范围很大（到某个点）时，峰值将无法在图表中正确显示。附上图片以便更好地解释。

日期范围不大时正确显示： 数据范围较大时显示 ![在此处输入图像描述](../Images/370bf4316c99e538cfd736b08bc27f5c.png) **不正确：**![在此处输入图像描述](../Images/6fcbed737956e99fbcdfc6e7e43d84cb.png)

这两个图像是从同一数据集绘制的，只是时间范围不同。为什么这会在 Highstock 中发生以及如何解决？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:10:42.307

我相信这与 HighStock 在放大/缩小超过某个阈值时进行某种聚合有关。这可以通过设置如下来关闭：

```
plotOptions: {
    series: {
        dataGrouping: {
            enabled: false
        }
    }
} 
```

这告诉 HighStock 停止将 x 轴点组合在一起以获取聚合。[在此处](http://www.highcharts.com/stock/ref/#plotOptions-series-dataGrouping)查看dataGrouping 的更多信息。

# c# - mvc3 模型使用列表 - 不存储到数据库

> ID：11762430
> 
> 赞同：0
> 
> 时间：2012-08-01T15:22:42.453
> 
> 标签：c#, asp.net-mvc-3, http-post

这是我的第一个 MVC3 项目，我认为完成它会更简单一些，但我遇到了很多问题。这似乎是我没有遇到解决方案的一个麻烦。在这里张贴作为最后的手段。

我的问题是，当创建新配方时，成分列表似乎永远不会填充到数据库中。当保存其余数据时，我什至尝试在控制器中硬编码一个列表，但它仍然没有做任何事情。据我所知，数据库中的任何地方都没有成分字段。谁能指出我做错了什么？非常感谢。

模型：

```
public class Recipe
{
    public int ID { get; set; }

    [Required]
    public string Title { get; set; }

    [Required]
    [Display(Name = "Type of Meal")]
    public int TypeID { get; set; }

    [Required]
    public string Instructions { get; set; }

    [Display(Name = "Submitted By")]
    public string UserName { get; set; }

    public IList<string> Ingredients { get; set; }

    public virtual MealType Type { get; set; }
} 
```

创建视图：

```
@model final.Models.Recipe

@{
    ViewBag.Title = "Recipe Finder - New Recipe";
}

<h2>New Recipe</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    //adds an ingredient field on the fly
    var numIngredients = 0;
    function addIngredient() {
        $('#ingredientlist').append('<tr><td><input type="text" name="Ingredients[' + numIngredients++ + ']" value="' + $('#AddIngredient').val() + '" readonly="true" tabindex="-1" /></tr></td>');

        $('#AddIngredient').val('');
        $('#AddIngredient').focus();
    }

    function onKeyPress(e) {
        var keycode;

        if (window.event) {
            keycode = window.event.keyCode;
        }
        else if (e) {
            keycode = e.which;
        }
        else {
            return true;
        }

        //for addingredient field, add ingredient and not submit
        //  else mimic submit
        if (keycode == 13) {
            if (document.activeElement.id == "AddIngredient") {
                addIngredient();
                return false;
            }
            document.getElementById('btnSubmit').click();
        }

        return true;
    }

    //intercepts form submit instead of using submit button to disable addingredient textbox
    //  this prevents the value/field from posting
    function preSubmit() {
        $('#AddIngredient').attr('disabled', 'true');
        document.getElementsByTagName('form')[0].submit();
    }

    //intercepts users pressing the enter key
    if (document.layers) document.captureEvents(Event.KEYPRESS);
    document.onkeypress = onKeyPress;
</script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
<fieldset>
    <legend>by @User.Identity.Name</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.TypeID, "Type")
    </div>
    <div class="editor-field">
        @Html.DropDownList("TypeID", String.Empty)
        @Html.ValidationMessageFor(model => model.TypeID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Ingredients)
    </div>
    <div class="editor-field">
        @Html.TextBox("AddIngredient")
        <input type="button" value="Add Ingredient" onclick="addIngredient()" tabindex="-1" />
        <table id="ingredientlist">
        </table>
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Instructions)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Instructions, new { rows = "7", cols = "77" })
        @Html.ValidationMessageFor(model => model.Instructions)
    </div>

    @Html.HiddenFor(model => model.UserName)

    <p>
        <input type="button" value="Submit" onclick="preSubmit()" id="btnSubmit" />
    </p>
</fieldset>
} 
```

控制器：

```
 [HttpPost]
    public ActionResult Create(Recipe recipe)
    {

        if (ModelState.IsValid)
        {
            db.Recipes.Add(recipe);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.TypeID = new SelectList(db.MealTypes, "ID", "Type", recipe.TypeID);
        return View(recipe);
    } 
```

我可以看到的 POST 字段成功发送了所有信息，如下所示，我不确定问题是什么，或者此时我还没有尝试过。

```
Title:test recipe
TypeID:2
Ingredients[0]:test0
Ingredients[1]:test1
Ingredients[2]:test2
Ingredients[3]:test3
Instructions:this is a test
UserName:tym 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:55:24.363

您可能需要查看有关存储与实体关联的字符串列表的[此页面。](http://antix.co.uk/Blog/EF4-Code-First-Storing-An-Array-Of-Strings-Associated-With-An-Entity)

# bash - 定时 bash 函数

> ID：11762432
> 
> 赞同：6
> 
> 时间：2012-08-01T15:22:49.137
> 
> 标签：bash, time, bash-function

我想看看 bash 函数运行需要多长时间。在做了一些研究之后，我想出了这种使用子外壳的方法：

```
function test-function() {

    time (
        rsync -av ~/tmp/test-dir-start/  ~/tmp/test-dir-end/
        rsync -av ~/tmp/test-dir-start/  ~/tmp/test-dir-end-2/
        # etc...
    )

} 
```

是否有替代/更好的方法来计时 bash 功能？

更新：我希望将`time`调用嵌入到函数中，以便它每次都运行而无需执行`time test-function`. 我应该更清楚这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T15:48:52.273

您可以使用命令分组而不是子shell：

```
time { command1; command2; } 
```

更新 - 更具体的例子：

```
test-function() {

  time {
     rsync -av ~/tmp/test-dir-start/  ~/tmp/test-dir-end/
     rsync -av ~/tmp/test-dir-start/  ~/tmp/test-dir-end-2/
     # etc...
    }
} 
```

# javascript - jQuery 函数和创作

> ID：11762442
> 
> 赞同：0
> 
> 时间：2012-08-01T15:23:10.613
> 
> 标签：javascript, jquery, plugins

我有一个简单的问题，我可以使用多少次：

```
jQuery.fn. 
```

在 js 文件中？ff: 下面可以在没有冲突的情况下完成，如果是这样，会有什么问题？

```
jQuery.fn.pageRedirect = function(){
    //your code here!
}

jQuery.fn.pageReload = function(){
    //your code here!
} 
```

同样，这是一个好习惯吗？还是我应该使用类似...

```
(function($) {
$.fn.pageRedirect() = function(){
    //your code here
}
$.fn.pageReload() = function(){
   //your code here
}
}); 
```

这又是我不知道是否正确。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T19:08:07.600

> 我可以使用多少次：>jQuery.fn。> 在 js 文件中？

无限

> ff: 可以在没有冲突的情况下完成，

是的

> 这是一个好习惯吗？

是的

# php - 路由设置问题

> ID：11762443
> 
> 赞同：-2
> 
> 时间：2012-08-01T15:23:11.600
> 
> 标签：php, apache, zend-framework

```
To access http://taobao.com/index/index/cityid/1 point http://taobao.com/Alaska 
To access http://taobao.com/index/index/cityid/2 point http://taobao.com/Houston
To access http://taobao.com/index/index/cityid/3 point http://taobao.com/NewYork
To access http://taobao.com/index/index/cityid/3 point http://taobao.com/LosAngeles 
```

.......近100个城市。route.ini 其中写

```
[production]
routes.rating.type = "Zend_Controller_Router_Route"
routes.BeiJing.route = "BeiJing"
routes.BeiJing.defaults.controller = "index"
routes.BeiJing.defaults.action = "index" 
```

如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:17:03.130

[Zend Framework 手册的这一](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.add-config)部分应该为您指明正确的方向。

示例路线可能如下所示：

> routes.alaska.route = "阿拉斯加"
> routes.alaska.defaults.controller = index
> routes.alaska.defaults.action = index
> routes.alaska.defaults.cityid = 1

不过，这个解决方案非常有限制——也许如果你能详细说明你想要实现的目标，我自己或我在这里的其他贡献者可能能够提供更好的解决方案？

# java - 连接到远程 unix 服务器，sudo in，并在 Java 中运行其他动态命令？

> ID：11762446
> 
> 赞同：0
> 
> 时间：2012-08-01T15:23:23.467
> 
> 标签：java, unix, user-interface, command-line

我正在寻找一种解决方案，在该解决方案中（使用 java GUI）我可以登录到远程 unix 服务器，“sudo su”，并根据用户在 java GUI 上的输入运行其他命令。有没有一种简单的方法可以只使用 SDK（没有外部库）或者是否有外部库允许发送单个命令（就像你在 shell 中一样）而不需要构建 shell 脚本？（我正在尝试在java中创建一个命令行GUI，我想知道我应该为这个工具的后端采取什么方法......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:25:10.170

JSCH [http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)是Maven使用的，相当不错

# php - 在 href= 中有一个 PHP 变量

> ID：11762448
> 
> 赞同：-3
> 
> 时间：2012-08-01T15:23:28.427
> 
> 标签：php

我想做这样的事情，虽然我知道这不起作用。

```
<?php
$page = "page.php"
?>
<a href=$page>Click</a> 
```

有没有一种简单的方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T15:24:15.243

```
<a href="<?php echo $page; ?>">Click</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:24:42.643

改用就好`<a href='<?php echo $page; ?>'>`了。这会将 的值回显`$page`到 HTML 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:24:48.370

如果启用了短打开标签。

```
<a href="<?= $page ?>">Click</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:25:35.047

那么你在使用 $page 之前结束了 php 脚本......所以你可以这样做

```
<?php
$page = "page.php"    
echo("<a href=".$page.">Click</a>");
?> 
```

编辑：提醒我不要直接回显 html 代码。这对我来说很清楚;-)，在这个巨大的例子中，我不想关闭 php 标签并重新打开它们。我想知道为什么没有人提到缺少的身体/头部和文档类型。

# progress-4gl - Openedge 表单 - 避免消息 Press space bar to continue

> ID：11762457
> 
> 赞同：0
> 
> 时间：2012-08-01T15:24:14.907
> 
> 标签：progress-4gl, openedge

我正在编写一个程序来接受用户的输入。我在框架中显示一些背景文本，然后使用覆盖框架提示输入。在下面的简单示例中，我在运行提示符之前收到消息“按空格键继续”。

我该怎么做才能跳过看到该消息？

```
/* Background */
def var dLines as char format "x(78)" extent 20 no-undo.

dLines[1] = "Password:".
dLines[2] = "".
dLines[3] = "Scan/key password".

form
  dLines[1]  skip
  dLines[2]  skip
  dLines[3]
  with frame fLabel no-labels no-box row 1 column 1 screen-io.

display
  dLines[1]
  dLines[2]
  dLines[3]
  with frame fLabel screen-io.

/* Prompt for data */
def var dString as char no-undo.

form
  dString format "x(60)"
  with frame cPrompt14 overlay no-labels no-box row 1 column 12 screen-io.

/*** This is where I get the "Press space bar to continue" message ***/ 
prompt-for
  dString
  with frame cPrompt14.

assign dString. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:47:59.177

当视口已满时，系统会提示您在 CHUI 中按空格键。你可以避免这种情况`PAUSE 0 BEFORE-HIDE NO-MESSAGE.`

# mp4 - mp4 和 mpegts 有什么区别？

> ID：11762464
> 
> 赞同：22
> 
> 时间：2012-08-01T15:24:30.997
> 
> 标签：mp4, mpeg2-ts

最近我的任务是将文件格式转换为 mp4 并流式传输。我使用 ffmpeg 作为转码工具。MP4 文件不会通过 http 协议流式传输 [使用 php cgi 包装器]，但随后输出格式更改为 mpegts 流式传输发生并且工作正常。在网络[http://wiki.videolan.org/MPEG](http://wiki.videolan.org/MPEG)上快速搜索 相关并建议使用 mpegts 流式传输 mp4 文件。我需要更多地了解这两种格式，它们的优点和区别。

谢谢，彼得

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-03T09:23:47.593

MPEG-TS 设计用于通过 DVB、UDP 多播以及 HTTP 实时流式传输事件。它将流划分为基本流，这些基本流被分割成小块。系统信息会定期发送，因此接收方可以随时开始播放流。

MPEG-TS 不适用于流文件，因为它不提供有关电影或歌曲持续时间的信息，以及您可以寻找的点。

有一些新协议可以使用 MPEG-TS 在 HTTP 上进行流式传输，将额外的元数据放入文件中并解决我之前谈到的缺点。它们是 HTTP Live Streaming 和 DASH（基于 HTTP 的动态自适应流）。

另一方面，MP4 在流的一部分中具有该信息，称为 moov atom。关键是moov必须放在媒体内容之前并首先从服务器下载。这样视频播放器知道持续时间并且可以在不下载整个文件的情况下搜索任何点（这称为HTTP伪流）。

可悲的是，ffmpeg 将 moov 放在文件的末尾。您可以使用 Xmoov-PHP 等软件解决此问题。

[在这里您可以找到有关伪流的更多信息。](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12534/video-delivery-http-pseudo-streaming)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-03T18:48:22.510

您可以使用以下 FFMPEG 命令重新排序 MP4 文件，将 moov 部分放在文件的开头：

> ffmpeg -i your.mp4 -vcodec copy -acodec copy -movflags +faststart reordered.mp4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T16:54:39.473

.mp4 是文件的扩展名，而 mpeg ts 用于传输流......mpeg ts 是用于数字视频广播的标准，用于发送 mpeg 视频和 mpeg 音频。基本上有两种类型的 ts spts 和 mpts spts 仅包含单个程序，而 mpts 包含多个程序。ts 阅读器和 vlc 媒体播放器用于播放 mpeg ts，如果您想了解更多信息，请参阅 [MPEG TS OR TRANSPORT STREAM MPTS SPTS](http://www.headendinfo.com/ts-transport-stream-mpts-spts/)

传输流文件的扩展名为 .ts

# command-line - 在 forfiles 中使用 @FILE 不起作用

> ID：11762465
> 
> 赞同：0
> 
> 时间：2012-08-01T15:24:33.730
> 
> 标签：command-line, cmd, command-prompt

我正在尝试构建一个批处理文件来删除所有超过 30 天的 excel 文件。到目前为止，我有命令：

```
forfiles -p"N:\QC\ATR's" -s -m*.xls* -d-30 -c"CMD /C del /f /q @FILE" 
```

唯一的问题似乎是@FILE 在文件夹/文件名中有一个空格，因此 del 命令找不到指定的路径。例如，查看它说的命令的回声

```
Could Not Find N:\QC\ATR's\'-5 
```

当它真的应该寻找路径时

```
N:\QC\ATR's\-5 brightness study 
```

明白了吗？有没有办法告诉 @FILE 变量用引号或其他东西包裹？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:41:34.307

**您可以尝试以下方法：**

```
SET FILE = -5 brightness study

forfiles -p"N:\QC\ATR's" -s -m*.xls* -d-30 -c"CMD /C del /f /q %FILE%" 
```

**检查这些网站以获得一些帮助：**

[http://ss64.com/nt/path.html](http://ss64.com/nt/path.html)

[http://www.windowsitpro.com/article/server-management/how-do-i-pass-parameters-to-a-batch-file-](http://www.windowsitpro.com/article/server-management/how-do-i-pass-parameters-to-a-batch-file-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:44:31.387

我想到了。我刚刚在文件变量周围添加了十六进制编码的 qoutes

```
forfiles -p"N:\QC\ATR's" -s -m*.xls* -d-30 -c"CMD /C del /f /q ^0x22@FILE^0x22" 
```

# css - 通过媒体查询减小子菜单容器的宽度

> ID：11762467
> 
> 赞同：1
> 
> 时间：2012-08-01T15:24:38.193
> 
> 标签：css

我尝试将媒体查询应用于[该网站](http://www.gabrielewebdesigner.it/work_site/dci/) ，我将更改子菜单容器的宽度。这是媒体查询：

```
 @media (max-width: 800px) {
     .dropEverythingSub li.testing .dropEverything-page {
        width:200%;
    }
} 
```

但是当我缩小浏览器的窗口时，这个容器的宽度保持不变。

# c# - ORA-1000 超出光标计数。不在不同的服务器上复制

> ID：11762468
> 
> 赞同：1
> 
> 时间：2012-08-01T15:24:40.557
> 
> 标签：c#, asp.net, oracle, cursor

我有两台不同的 IIS 服务器，它们运行 IIS 7.0，并为我的 ASP.NET Web 应用程序和 Oracle 后端运行相同的代码版本。他们都使用相同的 Oracle 数据库，但是当我在一台服务器上运行应用程序时，它会导致 Cursor Count Exceeded 错误，而在另一台服务器上，代码运行得非常好并且永远不会遇到错误。“损坏”的服务器恰好是生产服务器与开发服务器。

这会是什么原因？如果有办法杀死 ASP.NET 中的 Oracle 会话，除了等待它们超时之外，你如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:28:50.130

假设是ORA-01000错误，解决方法很简单，在数据库配置中增加open_cursors的值。

假设版本 >= 10g 并使用 spfile：

```
alter system set open_cursors = 512; 
```

更改应立即生效。对于许多情况，默认值（50？）有点低。

# c# - 使用“AS”的查询创建时无法引用 DataTable 列

> ID：11762472
> 
> 赞同：2
> 
> 时间：2012-08-01T15:24:46.303
> 
> 标签：c#, sql, datatable

我创建了一个数据表，我使用其中包含“AS”的 SQL 查询来填充它。

例子：

```
SELECT (tblUser.FirstName + ' ' + tblUser.LastName) AS 'UserFullName' 
FROM tblUser 
```

我用

```
SqlDataAdapter.Fill(dtblUserInfo) 
```

填充表并验证列 UserFullName 存在，其中包含一串数据。

我尝试引用这个单元格

```
string strUserFullName = dtblUserInfo.Rows[0]["UserFullName"].ToString(); 
```

即使我可以通过添加手表看到该单元格中有数据，它也会返回一个空字符串。

我确信 Row[0] 是包含包含数据的单元格的行，通常不会硬编码该值，但仅用于解释和调试目的。

对此有什么想法吗？

谢谢，史蒂夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:38:35.707

换这个就行了

```
SELECT (tblUser.FirstName + ' ' + tblUser.LastName) AS 'UserFullName' 
FROM tblUser 
```

这样

```
SELECT (tblUser.FirstName + ' ' + tblUser.LastName) AS UserFullName 
FROM tblUser 
```

当您使用时，`AS`您不需要单引号，它需要一个新的列名。列名从不在引号内。

如果想用用户全名等2个字替换名称，则需要使用[]，例如[UserFullName]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:12:44.143

PhaDaPhunk 说：

> 换这个就行了
> 
> ```
> SELECT (tblUser.FirstName + ' ' + tblUser.LastName) AS 'UserFullName' FROM tblUser 
> ```
> 
> 这样
> 
> ```
> SELECT (tblUser.FirstName + ' ' + tblUser.LastName) AS UserFullName FROM tblUser 
> ```
> 
> 当您使用 AS 时，您不需要单引号，它需要一个新的列名。列名从不在引号内。

这是一个很好的答案，我还有一点额外的小费。如果要将名称替换为“用户全名”等2个单词，则需要使用[]，例如[用户全名]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:02:29.297

您可以使用此代码查看 DataTable 的内容：它将帮助您找到错误。

```
foreach(DataRow dr in dtblUserInfo.Rows)
{
    foreach (var item in dr.ItemArray)
    {
        r += item.ToString();
    }
    r += "\r\n";
}
MessageBox.Show(r); 
```

然后验证您的查询...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:43:00.517

由于您在访问单元格时没有收到异常，这告诉您 AS 列描述不是问题。

此外，因为当您访问第 0 行时代码没有抛出异常，这告诉您您的数据检索工作正常。

这意味着问题实际上出在您的数据中。

要验证这一点，只需直接对数据库执行 SQL 脚本。如果您的结果中有 NULL，这可能是问题的一部分（尽管在 SQL Server 中，这应该会导致一个空列值）。

# c++ - C++ STL 向量：Push_back 引用

> ID：11762474
> 
> 赞同：12
> 
> 时间：2012-08-01T15:24:48.327
> 
> 标签：c++, stl

从 cpp 文档中`std::vector`，我看到了这一点：

```
void push_back ( const T& x ); 
```

我知道这`push_back`会复制我传递的对象。但是，为什么是签名`const T& ?`通过查看这个，我最初认为它需要`const`引用我推送到`vector`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T15:28:19.723

另一种选择是

```
void push_back(T x); 
```

即`x`按价值取值。但是，这会（在 C++03 中）导致创建一个额外`x`的副本（在 的参数中的副本`push_back`）。通过const`x`引用可以避免这种情况。

让我们看一下按值调用的堆栈`v.push_back(T())`：

```
v.push_back(T());                      // instance of T
void std::vector<T>::push_back(T x)    // copy of T
new (data_[size_ - 1]) T(x)            // copy of copy of T 
```

通过 const 引用我们得到：

```
v.push_back(T());                             // instance of T
void std::vector<T>::push_back(const T &x)    // const reference to T
new (data_[size_ - 1]) T(x)                   // copy of T 
```

在 C++11 中，可以（尽管没有必要）`x`按值获取并使用`std::move`将其移动到向量上：

```
v.push_back(T());                             // instance of T
void std::vector<T>::push_back(T x)           // copy of T
new (data_[size_ - 1]) T(std::move(x))        // move the copy of T 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T15:44:07.473

只是为了澄清@ecatmur 描述的“额外副本”，如果`push_back`按值接收它的参数，会发生什么事情是你将从你的对象开始。其副本将`push_back`作为其参数传递给。然后`push_back`将创建一个副本*以*放入向量本身。

由于真正的实现`push_back`通过引用接收它的参数，它（`push_back`）直接在向量中创建新对象作为原始对象的副本。

如前所述，是的，使用 C++11 使用移动语义，可以（尽管可能不是特别有利）按值传递参数，然后将值从该参数移动到向量中的新对象中。例如，如果您放入向量中的是一个字符串，该字符串主要包含一个指针和几个“簿记”字段（分配的内存量，当前使用的内存量），那*几乎*和传递一个引用，因为移动只能做一个浅拷贝——复制指针和簿记值本身，而不是它指向的所有数据。但是，如果所讨论的对象直接保存其所有数据（即，不是指针），那么移动将与复制一样慢。

通过引用传递，避免了*所有*的复制，所以即使对于像字符串这样的东西，它通常也更快（对于像这样的情况，原始对象不能被无效）。它还具有使用 C++98/03 的次要优势，而不仅仅是 C++11。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-01T15:25:40.390

`object`你 push 是通过引用传递的，以避免`extra copy`。比副本放置在`vector`.

# ios - 使用来自不同类的委托

> ID：11762475
> 
> 赞同：0
> 
> 时间：2012-08-01T15:24:50.830
> 
> 标签：ios

让我的代表“工作”有些困难。

它在 ClassA 通过 UINavigationController 将 ClassB 推送到堆栈上时起作用，但是当 ClassB 由不同的 ClassC 推送时，ClassB 不会调用委托方法（在 ClassA 中）。

ClassA 中的此方法有效：

```
- (void)openViewController:(NSString *)title:(int)dataType:(NSArray *)currentData {    
ClassB *nextController = [[ClassB alloc] initWithNibName:@"ClassBView" bundle:nil];
nextController.delegate = self;
nextController.title = title;
nextController.dataType = dataType;
nextController.currentData = currentData;
nextController.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:nextController animated:YES];} 
```

如何从 ClassC 中获取此方法以正确地将 ClassA 指定为 ClassB 的委托？？？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
ClassB *nextController = [[ClassB alloc] initWithNibName:@"ClassBView" bundle:nil];
    nextController.delegate = ??????????
    nextController.title = [self.tableData objectAtIndex:indexPath.row];
    nextController.dataType = self.dataType;
    nextController.currentData = [NSArray arrayWithArray:[self.dictionary objectForKey:[self.tableData objectAtIndex:indexPath.row]]];
    nextController.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:nextController animated:YES];} 
```

感谢任何帮助。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:31:17.753

我觉得更多地了解应用程序中的视图控制器层次结构会有所帮助，但听起来你需要在 ClassC 中添加对 ClassA 的引用，它可以传递给 ClassB。所以（在 ​​C 类中）`nextController.delegate = self.ClassARef`

# php - 实现频繁调用对 Python 脚本征税的最佳方法

> ID：11762480
> 
> 赞同：4
> 
> 时间：2012-08-01T15:25:11.173
> 
> 标签：php, python, mysql, cron

我正在编写一些使用 mechanize 从另一个网站获取数据的 python 代码。由于网站的复杂性，代码需要 10-30 秒才能完成。它必须通过几页之类的方式工作。

我计划让这段代码被相当频繁地调用。我想知道在不造成巨大服务器负载的情况下实现这样的事情的最佳方法。由于我对 python 还很陌生，我不确定该语言是如何工作的。

如果代码正在处理一个请求，而另一个用户调用了该代码，那么该代码的两个实例可以同时运行吗？有没有更好的方法来实现这样的事情？

我想以一种可以完成繁重任务的方式来设计它，而不会对服务器造成太大负担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:39:46.533

我的数据抓取脚本都使用缓存来最小化服务器上​​的负载。请务必使用 HTTP 工具，例如“If-Modified-Since”、“If-None-Match”和“Accept-Encoding: gzip”。

还可以考虑使用*多处理*模块，以便您可以并行运行请求。

这是我的下载器脚本的摘录：

```
def urlretrieve(url, filename, cache, lock=threading.Lock()):
    'Read contents of an open url, use etags and decompress if needed'    

    request = urllib2.Request(url)
    request.add_header('Accept-Encoding', 'gzip')
    with lock:
        if ('etag ' + url) in cache:
            request.add_header('If-None-Match', cache['etag ' + url])
        if ('date ' + url) in cache:
            request.add_header('If-Modified-Since', cache['date ' + url])

    try:
        u = urllib2.urlopen(request)
    except urllib2.HTTPError as e:
        return Response(e.code, e.msg, False, False)
    content = u.read()
    u.close()

    compressed = u.info().getheader('Content-Encoding') == 'gzip'
    if compressed:
        content = gzip.GzipFile(fileobj=StringIO.StringIO(content), mode='rb').read()

    written = writefile(filename, content) 

    with lock:
        etag = u.info().getheader('Etag')
        if etag:
            cache['etag ' + url] = etag
        timestamp = u.info().getheader('Date')
        if timestamp:
            cache['date ' + url] = timestamp

    return Response(u.code, u.msg, compressed, written) 
```

缓存是*shelve*的一个实例，一个持久字典。

*对下载器的调用与多处理池*实例上的 imap_unordered() 并行化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:35:06.133

您一次可以运行多个 python 进程。至于导致服务器上的过度负载，只能通过确保在任何给定时间只有一个实例运行或其他数量的进程（比如两个）来缓解。为此，您可以查看使用锁定文件或某种系统标志、互斥锁等...

但是，限制过度使用的最佳方法是限制并发运行的任务数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:37:15.933

基本答案是“您可以运行任意数量的程序实例，只要它们不共享关键资源（如数据库）”。

在现实世界中，您经常需要使用[“多处理模块”](http://docs.python.org/library/multiprocessing)并正确设计您的应用程序以处理并发并避免损坏状态或死锁。

顺便说一句，多进程应用程序的设计超出了 StackOverflow 上一个简单问题的范围......

# api - Desire2Learn：从 SIS 组织代码开始，检索组织 ID

> ID：11762481
> 
> 赞同：0
> 
> 时间：2012-08-01T15:25:12.380
> 
> 标签：api, desire2learn

我的团队正在使用 D2L Valence 来补充我们的 SIS 集成。我们的用例是将已知用户注册（即为其创建新注册）到已知课程提供中，这两个课程最初都来自 SIS。

我们遇到了“当您只有 SIS 组织代码时如何检索 D2L 组织 ID”的常见问题。我见过的最好的先前解决方案是：

> [Desire 2 Learn Org Unit ID](https://stackoverflow.com/q/11528328)：检索大学的所有课程提供的后代。然后在 JSON 结果中进行模式匹配以找到您正在寻找的产品。

但有一点需要注意：“这个过程几乎肯定需要获取大量数据，然后对其进行解析。” 它还建议 (1) 如果您知道该组织 ID，则在组织结构中进一步开始搜索；和（2）“然后持久化并在以后直接使用[此数据]。”

这些都是有问题的，因为我们的 D2L 组织结构很大（每学期约 3500 个课程）并且不断变化和增长。我们不想持久化任何 D2L 数据；我们宁愿即时检索。

那么这是为来自我们 SIS 的对象检索单个 Org ID的*最有效的当前方法吗？*如果是这样，是否有计划通过组织代码检索单元的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:26:25.833

您引用的链接中的信息仍然是最新的。您正在识别的功能在请求列表中。预计将采用类似于[search-for-users-by-orgedfinedid 的形式](http://docs.valence.desire2learn.com/res/user.html#get--d2l-api-lp-%28D2LVERSION-version%29-users-)。在给定版本之前，您将看到文档出现在识别新调用的价上，因此如果给定版本包含类似这样的更改，您将能够关注。

# linux - 是否可以在 BIOS 中设置一个物理 cpu（假设我有多个）被忽略，所以除非我对其进行任务设置，否则不会在其上安排任何内容？

> ID：11762485
> 
> 赞同：1
> 
> 时间：2012-08-01T15:25:16.927
> 
> 标签：linux, performance, cpu, bios

如果是这样，我会很好奇如何。我听说这是为自己隔离 CPU 的一种可能方式。（除非你自己做，否则没有其他计划在那里运行）。这对于在机器上进行性能测试或试验不受其他进程限制的 cpu 似乎是理想的。（顺便说一下Linux操作系统）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:28:33.323

我怀疑您是否可以从bios中专用一个cpu。操作系统通常会覆盖 bioses 所做的几乎所有事情。最好从操作系统中做到这一点

# jquery - 单击 tr 时排除链接

> ID：11762488
> 
> 赞同：0
> 
> 时间：2012-08-01T15:25:25.857
> 
> 标签：jquery, html-table

这是页面： http: [//nm-bootstrap.gydev.com/course-delivery.php](http://nm-bootstrap.gydev.com/course-delivery.php)

标题行上的 V 形切换图标和书签图标都添加到第一个 th 之前。如果单击带有 th 的 tr，我有一些 js 可以切换以下行。

问题是我需要`<a>`从事件中排除该书签（具有“书签-this”类），因为有人需要能够在不切换下面的行的情况下为整个部分添加书签。因此，除了书签之外的整行都应该触发事件。

这是使它工作的jQuery

```
$("#table-modules tbody tr:not(.section-title)").hide();

$("#table-modules tbody tr.section-title").click(function(){
    $(this).nextUntil('tr.section-title').toggle().end()
        .find('.icon-chevron-right').toggle().end()
        .find('.icon-chevron-down').toggle();
});

$(".bookmark-this").click(function(){
    $(this).find('.icon-bookmark-empty').toggle().end()
        .find('.icon-bookmark').toggle();
}); 
```

这里是前 2 行渲染的 html

```
<tr class="section-title" style="cursor: pointer; ">
<th><i class="icon-chevron-right grayLight"></i><i class="icon-chevron-down grayLight" style="display: none; "></i><a class="bookmark-this"><i class="icon-bookmark-empty grayLight"></i><i class="icon-bookmark red" style="display: none; "></i></a>1\. Introduction</th>
<th>&nbsp;</th>
<th>11:53</th>
</tr>
<tr style="display: none; ">
<td style="padding-left: 45px; "><a class="bookmark-this"><i class="icon-bookmark-empty grayLight"></i><i class="icon-bookmark red" style="display: none; "></i></a><a href="#">How to take an online course</a></td>
<td><img src="/img/icons/check-sm.png" width="16" height="13" alt="yes"></td>
<td>6:32</td>
</tr> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:31:13.400

尝试添加`stopPropagation`到点击处理程序`.bookmark-this`

```
$(".bookmark-this").click(function(e){ e.stopPropagation() }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:32:09.770

你可以使用 not 选择器

```
$("#table-modules tbody tr.section-title:not(.bookmark-this)").click 
```

# cakephp - Cakephp 的 JS 助手

> ID：11762495
> 
> 赞同：1
> 
> 时间：2012-08-01T15:25:49.283
> 
> 标签：cakephp

请原谅这个问题有点主观，但是如果您只是想将 html 插入 DOM/显示/隐藏等，我是否必须使用 JS 帮助程序，或者我可以编写普通的 jQuery 并将其包含在视图头中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:27:03.933

您可以编写普通的 JS，包括一个 JS 文件或使用脚本标签。您可以将其放置在视图或布局中。如果您需要，蛋糕就在那里。我喜欢用“蛋糕”的方式做事，但我从未使用过 JS 助手。

# sql - 长时间运行的工作

> ID：11762515
> 
> 赞同：1
> 
> 时间：2012-08-01T15:26:42.680
> 
> 标签：sql, tsql

我不确定发生了什么？即使作业在晚上 11:50 停止运行，我仍然收到一封电子邮件，这显然不到 7 小时，因为它从昨晚 7 点开始。如果作业运行时间超过 7 小时，应该给我发电子邮件，并且出于某种原因，昨天它在测试中有效，但今天它不是……有什么想法吗？

```
SELECT *
FROM msdb..sysjobactivity aj
JOIN msdb..sysjobs sj on sj.job_id = aj.job_id
WHERE DATEDIFF(HOUR,aj.start_execution_date,GetDate())> 7
AND aj.start_execution_date IS NOT NULL 
AND sj.name = 'Nightly_Job'
and not exists ( -- make sure this is the most recent run 
select 1 
from msdb..sysjobactivity new 
where new.job_id = aj.job_id 
and new.start_execution_date > aj.start_execution_date)
if @@ROWCOUNT > 0
BEGIN
USE msdb
            EXEC sp_send_dbmail
                @profile_name = 'DB_Mail',
                @recipients = 'xxx@yyy.com',
                @subject = 'T-SQL Query Result',
                @body = 'The Nightly_Job has been running 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:36:57.843

您的查询的问题在于它只检查自作业开始以来已经过去了多长时间......它没有考虑作业何时完成。

如果在 7 小时内没有其他作业执行，那么您将查询限制为最近运行的检查不会排除先前完成的作业......然后您的查询将返回 7 小时前开始的作业，但在这种情况下，在 4 小时内完成。

要修复您的查询以排除已完成的作业，请按如下方式修改您的查询：

```
SELECT *
FROM 
    msdb..sysjobactivity aj
    JOIN msdb..sysjobs sj on sj.job_id = aj.job_id
WHERE 
    DATEDIFF(HOUR, aj.start_execution_date, 
            ISNULL(aj.stop_execution_date, GetDate()) )> 7 
    AND sj.name = 'Nightly_Job'
    AND NOT EXISTS ( -- make sure this is the most recent run 
        SELECT 1 
        FROM msdb..sysjobactivity new 
        WHERE new.job_id = aj.job_id 
        AND new.start_execution_date > aj.start_execution_date) 
```

# variables - bat 文件，以 MMDDYY 格式获取当前日期并将其保存在变量中以供以后在文件中使用

> ID：11762516
> 
> 赞同：0
> 
> 时间：2012-08-01T15:26:43.057
> 
> 标签：variables, date, batch-file

我正在制作一个为我完成一些任务的 bat 文件，但我需要以 MMDDYY 格式获取当前日期。

我知道这将返回 4 位数的年份，但我怎样才能让它显示 12 而不是 2012？for /f "tokens=2-4 delims=/" %%a in ('date /T') do set year=%%c

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:04:59.417

`set MMDDYY=%DATE:~4,2%%DATE:~7,2%%DATE:~12,2%`

检查返回`echo %DATE%`以查看是否需要对语言环境进行调整

# excel - 在求和公式中使用动态命名范围

> ID：11762520
> 
> 赞同：1
> 
> 时间：2012-08-01T15:27:13.523
> 
> 标签：excel, excel-formula, vba

```
=SUM(IF(('Old Data'!$A$2:$A$10000=Tracking!A9)*('Old Data'!$B$2:$B$10000=$E$7)*('Old Data'!$D$2:$D$10000>$B$5)*('Old Data'!$D$2:$D$10000<$C$5),IF('Old Data'!$E$2:$E$10000-'Old Data'!$D$2:$D$10000<"4:00"+0,0.5,NETWORKDAYS('Old Data'!$D$2:$D$10000+0,'Old Data'!$E$2:$E$10000+0)))) 
```

是我当前的代码。我创建了一个定义的名称 Total

总计 =`=COUNTA('Old Data'!$C:$C)`

在我有 10,000 的任何地方，我都想返回 Total 的值。我试过用 Total 简单地替换 10000，尝试使用 + 内置公式创建器。我不知道如何将值插入到我的公式中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:40:38.910

这对我来说似乎是一个公式问题？

您可以使用`INDIRECT`See this example

如果我有，`=Sum(A1:A10000)`那么在这种情况下我可以使用

```
=SUM(INDIRECT("A1:A"&total)) 
```

在我的示例`total`中已定义为`=COUNTA('Old Data'!$A:$A)` 让我知道您是否仍需要 VBA 解决方案。

**快照**

检查它的最佳方法是突出显示公式中的相关部分，然后单击`F9`以查看值的计算方式。

![在此处输入图像描述](../Images/3a448ae3ba2a88af92ddd12871f78dc6.png)

# python - 简化python中的循环

> ID：11762521
> 
> 赞同：3
> 
> 时间：2012-08-01T15:27:15.053
> 
> 标签：python, performance, for-loop

我在我的 python 代码中使用这个循环：

```
final_fun=[]
for i_base in xrange(n_base):
  final_fun.append(sum(fun[:,i_base])/n_ci) 
```

我想知道如何简化这个循环？如果我简化这个循环，我的程序会更快吗？一般来说，我知道如何简化这一点，但在这里我被附加阻止了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T15:28:56.227

使用列表推导。它更快更干净。for 循环可以大大减慢解释器的速度，并且只需重新排列语法就不会失去任何东西。

有关更多详细信息，请参阅[此说明](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Loops)。

```
final_fun = [sum(fun[:,i_base])/n_ci for i_base in xrange(n_base)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:51:16.387

它似乎`fun`是一个二维 NumPy 数组。在这种情况下，您可以通过完全避免 Python 循环来显着简化和加速代码：

```
final_fun = fun.sum(axis=0) / n_ci 
```

你最终会得到一个 NumPy 数组而不是一个列表，但很可能这就是你想要的。

# javascript - JQuery 字符串到对象

> ID：11762524
> 
> 赞同：0
> 
> 时间：2012-08-01T15:27:25.630
> 
> 标签：javascript, jquery, jquery-plugins, validation, object-literal

JQuery 验证器插件使用“名称”，我想通过 ID 动态查找它。我的 $test 变量返回一个名称正确的字符串，但是我不能使用字符串。

如何使用此变量替换硬编码名称 (ctl00$MainContent$ListBox1)？

代替：

```
<script type="text/javascript">
    $(document).ready(function () {
        var $test = $("#ListBox1").attr("name");

        $("#form1").validate({
            rules: {
                ctl00$MainContent$ListBox1: {
                    required: true,
                    rangelength: [0, 4]
                }
            },
            messages: {
                ctl00$MainContent$ListBox1: {
                    required: "Please select a state",
                    rangelength: "Please select maximum 4 states"
                }
            },
            errorLabelContainer: $("#message")
        });
    });
</script> 
```

我想使用类似的东西：

```
$("#form1").validate({
     rules: {
         $test: {
              required: true,
              rangelength: [0, 4]
          }
      }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:36:06.957

您实际上无法替换成员 ID。但是，您可以扩充对象：

```
$(document).ready(function () {
    var test = $("#ListBox1").attr("name");
    var validators = {
        rules: {},
        messages: {},
        errorLabelContainer: $("#message")
    };

    validators.rules[test] = {
        required: true,
        rangelength: [0, 4]
    };
    validator.messages[test] = {
        required: "Please select a state",
        rangelength: "Please select maximum 4 states"
    }

    $("#form1").validate(validators);
}); 
```

现在您的`messages`和`rules`对象都包含一个具有您保存名称的成员。

# jquery - 使用 css 来设置样式而不是 jQuery

> ID：11762528
> 
> 赞同：0
> 
> 时间：2012-08-01T15:27:43.617
> 
> 标签：jquery, css

我遇到过这段代码：

```
$("#customTable tr:nth-child(odd)").addClass("newColour"); 
```

这会为表格的每个奇数行着色。

如何在 css 中处理而不是使用 jQuery 来执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:29:11.157

```
#customTable tr:nth-child(odd) { 
    background-color:#eee; 
}
#customTable tr:nth-child(even) { 
    background-color:#fff; 
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/m45hr/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:30:27.853

```
#TABLE_ID tr:nth-child(odd) {YOUR RULE HERE} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T15:30:19.277

```
 #customTable  tr:nth-child(even) {background: color;}
   #customTable tr:nth-child(odd) {background: color;} 
```

此链接可能对您有所帮助

[http://www.w3.org/Style/Examples/007/evenodd.en.html](http://www.w3.org/Style/Examples/007/evenodd.en.html)

# c - 选择性替换的 C 宏技巧

> ID：11762529
> 
> 赞同：1
> 
> 时间：2012-08-01T15:27:48.483
> 
> 标签：c, macros, c-preprocessor

是否有一个宏技巧来重命名函数调用而不影响函数定义，特别是对于 gcc/cpp：

```
#define get_resolution __mock_get_resolution 
```

上面的宏改变了所有的地方，但是我只是想让这个对函数调用生效`get_resolution();`而不影响定义`void get_resolution()`

```
void get_resolution()
{
}

void display()
{
    get_resolution();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:45:29.910

作为 gcc 特定的解决方案，

```
 The `alias' attribute causes the declaration to be emitted as an
 alias for another symbol, which must be specified.  For instance,

      void __f () { /* Do something. */; }
      void f () __attribute__ ((weak, alias ("__f"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:36:50.283

不，C 预处理器没有 C 程序结构的语义知识，它只看到文本标记。

一种选择是`#undef`在定义之前使用宏并在之后重新定义它，但这很麻烦。另一种选择是在要模拟的每个函数的定义中添加一个宏，如下所示：

```
#if DO_MOCKING
#define IMPLEMENT_MOCKABLE_FUNCTION(funcname) _real_ ## funcname
#define get_resolution _mock_get_resolution
#else
#define IMPLEMENT_MOCKABLE_FUNCTION(funcname) funcname
#endif

...

void IMPLEMENT_MOCKABLE_FUNCTION(get_resolution)()
{
    ...
} 
```

另请注意，以两个下划线开头的标识符以及以下划线后跟一个大写字母开头的标识符由实现（即编译器和标准库）保留。因此，我将上面示例中的标识符重命名为使用单个下划线和一个小写字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:43:02.603

你可以这样做：

```
#define get_resolution __mock_get_resolution 
```

全局可访问的某个地方（例如您始终包含的标题等），然后执行以下操作：

```
#undef get_resolution
void get_resolution()
{
}
#define get_resolution __mock_get_resolution

void display()
{
    get_resolution();
} 
```

丑陋的 hack，但它可以让你不必编写 sed(1) 脚本。

测试用例如下：

```
$ gcc -o test test.c
$ ./test
__mock_up
$ cat test.c        
#include <stdio.h>

#define get_resolution __mock_up

int
__mock_up()
{
        printf("__mock_up\n");  
}

#undef get_resolution
int 
get_resolution()
{

}
#define get_resolution __mock_up

int main()
{
       get_resolution();
       return 0;
}
$ 
```

# php - 特定的 cron 任务未在 drupal 中执行

> ID：11762532
> 
> 赞同：0
> 
> 时间：2012-08-01T15:27:50.517
> 
> 标签：php, drupal, drupal-7

我有模块，可以选择在 cron 运行时执行任务。但不知何故，这个任务没有执行。它对我来说只发生了 1 次，而任务运行正确。这是使我的任务在 cron 运行时执行的代码：

```
function parser_cron_queue_info() {
    $info = array();
    //  removed commented-out code
    $query = db_select('parser_jobs', 'pn')
        ->fields('pn', array('id','time_run_in_crone'))
        ->condition('run_in_crone', 1)
        ->execute();
    foreach ($query as $job){
        $info['get_parser_weather_'.$job->id] = array(
            'worker callback' => 'parser_weather',
            'time' => $job->time_run_in_crone,      
        );
    }
    return $info;
}

function parser_cron() {
    $query = db_select('parser_jobs', 'pn')
        ->fields('pn', array('id','time_run_in_crone'))
        ->condition('run_in_crone', 1)
        ->execute();
    foreach ($query as $job){
        $queue = DrupalQueue::get('get_parser_weather_'.$job->id);
        $queue->createItem($job->id);
    }
}

function  parser_weather($job_id){
    $job = parser_job_load($job_id);
    _parser_url_delete_all();
    _parser_url_add($job->start_url);
    while (_parser_url_get_not_parsed()) {
        parser_parse2($job);
    };
} 
```

有什么想法吗？

PS 经过几次 runnung cron drupal 的尝试后，我就出现了白屏死机

# performance - 有没有办法删除 apache 或 nginX 中的一些网页标题以减少延迟？

> ID：11762536
> 
> 赞同：0
> 
> 时间：2012-08-01T15:28:09.047
> 
> 标签：performance, apache, web, header, nginx

当请求页面时，将有如下参数：

```
Pragma  
Cache-Control  
Content-Type  
Date   
Content-length 
```

例如，有没有办法删除`Date`？或者删除大部分图像文件（除了 Pargam 和一些缓存机制）？我们可以在这里获得性能提升吗？我们应该在 Web 服务器层上做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:58:53.023

[HTTP/1.1 需要](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18)标`Date`头。并且也很有价值且很小，并且您已经提到缓存标头对您很重要。所以，我认为你在错误的地方寻找优化。`Content-Type``Content-length`

您可以做的是确保从与应用程序分开的域中提供图像，以确保客户端在请求静态图像时不会发送 cookie 标头。还建议使用 CDN 来提供静态内容。

# c# - 在运行时加载 dll 库并在其中运行代码

> ID：11762538
> 
> 赞同：1
> 
> 时间：2012-08-01T15:28:15.177
> 
> 标签：c#, dll, runtime, dllimport

我有一个 C# 控制台应用程序，并且喜欢通过用户输入来选择在控制台应用程序运行时加载和执行的特定 dll 库。那可能吗？

因此，例如，我可能有 2 个具有相同静态类和操作名称的 dll 库，如下所示：

```
public static class CoreStrategy
{
    public static Action<List<Quote>> strategyQuoteBuffer = new Action<List<Quote>>(quoteList =>
    {
        Console.WriteLine("I am dll 1");
    });
}

public static class CoreStrategy
{
    public static Action<List<Quote>> strategyQuoteBuffer = new Action<List<Quote>>(quoteList =>
    {
        Console.WriteLine("I am dll 2");
    });
} 
```

如何在控制台应用程序运行时加载其中一个并调用它们，然后将一个切换到另一个？还是有更好的方法来处理这个问题？甚至可能与 Dlls 不同的方式？要求是每一个的代码都严格包含在自己的dll中，并且不能事先引用dll。如果那不可行，那么您能否提出一种不使用 dll 的方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:36:37.003

您可以使用反射动态加载未引用的程序集，从该程序集中动态加载名为“CoreStrategy”的类，然后动态搜索该类以查找名为 strategyQuoteBuffer 的静态字段。然后您可以使用反射来检索该字段，并将其转换为 Action<List<Quote>>。

执行此操作的代码肯定不会很漂亮，但这是实现您想要的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:54:00.273

如果反射很慢，那么您可能需要看一下[fastflect](http://fasterflect.codeplex.com/)。

[http://www.codeproject.com/Articles/38840/Fasterflect-a-fast-and-simple-API-for-Reflection-i](http://www.codeproject.com/Articles/38840/Fasterflect-a-fast-and-simple-API-for-Reflection-i)

# html - 在 form_tag 中传递多个参数

> ID：11762542
> 
> 赞同：0
> 
> 时间：2012-08-01T15:28:18.290
> 
> 标签：html, ruby-on-rails, forms, ruby-on-rails-3.2, ruby-1.9.3

我正在使用 Rails 和 jqPlot 在网页上显示一些数据。图表需要按日期灵活（例如，用户可以选择时间范围，图表会自行更新）。到目前为止，这是我的代码（在我的视图中）：

```
<%= form_tag home_event_trends_path(params[:timePeriod]), :method => 'post' do %>
  <p>
    <%= select_tag :timePeriod, options_for_select(["2 Hours Ago", "1 Week Ago", "3 Months Ago"], :selected => params[:timePeriod]) %>
    <%= submit_tag "Refresh", :name => nil %>
  </p>
<% end %> 
```

`Home`是我的控制器，`event_trends`是一个动作，我想。（路径为 localhost:3000/home/event_trends.3102030）

这工作正常。但是，我还需要将另一个参数传递给我的控制器。这个网页已经有一个参数传递给它，`params[:format]`（这是 URL 中的 3102030，它会根据我要显示的事件而变化），我也需要传递这个参数。我试过了：

```
home_event_trends_path(params[:timePeriod][:format])
home_event_trends_path(params[:timePeriod],[:format])
home_event_trends_path(params([:timePeriod][:format])) 
```

其中。

如何让我的控制器从我的视图中查看多个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:40:30.563

我看到您使用 GET传递**旧** 的，使用 POST 传递新的。这真的是你想要的吗？为什么控制器需要旧的？`timePeriod``timePeriod``timePeriod`

因为你想显示一个图表——也就是说，你想检索数据，而不是造成副作用——我认为你应该只`timePeriod`使用 GET 发送新的：

```
<%= form_tag home_event_trends_path(), :method => 'get' do %>
    <p>
        <%= select_tag :timePeriod, options_for_select(["2 Hours Ago", "1 Week Ago", "3 Months Ago"], :selected => params[:timePeriod]) %>
        <%= select_tag :format, options_for_select([...], :selected => params[:format]) %>
        <%= submit_tag "Refresh", :name => nil %>
    </p>
<% end %> 
```

另外，我同意 Anthony 的观点——您应该尝试更改`format`参数——只需在控制器中查看它的使用位置，然后更改名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:47:11.840

没有什么反对 Idan 的回答，但这就是我最终做的事情（对于未来的谷歌人......）

在我看来：

```
<%= form_tag home_event_trends_path, :method => 'get' do %>
  <p>
    <%= select_tag :timePeriod, options_for_select(["2 Hours Ago", "1 Week Ago", "3 Months Ago"], :selected => params[:timePeriod]) %>
    <%= text_field_tag :issue, params[:issue] %>
    <%= submit_tag "Refresh", :name => nil %>
  </p>
<% end %> 
```

然后在我的家庭控制器中：

```
def event_trends
  @eventTrend = Home.eventTrend(params[:timePeriod], params[:issue])
end 
```

最后，模型：

```
def self.eventTrend(date, id)
  # dirty work
end 
```

这似乎对我最有效。我决定允许更改 GET 请求的 URL，并且我立即将`issue`参数存储在搜索框中，以供以后使用。

希望这对将来的任何人都有帮助！

# android - 强制关闭错误简单形式不起作用

> ID：11762543
> 
> 赞同：0
> 
> 时间：2012-08-01T15:28:20.377
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >
                <TextView 
                        android:id="@+id/textView1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:textAppearance="?android:attr/textAppearanceLarge"
                        android:layout_weight="1"
                        android:text="MARKETING SUPERVISOR"/>

                </LinearLayout>

            </LinearLayout>

             <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                 <TextView 
                        android:id="@+id/textView1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:textAppearance="?android:attr/textAppearanceLarge"
                        android:text="CHALLAN"
                        android:gravity="center"/>
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <LinearLayout 
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="horizontal">
                    <TextView 
                        android:id="@+id/textView1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:layout_weight="1"
                        android:text="Perm.IncmTax Num."
                        android:gravity="center"/>
                    <EditText
                        android:id="@+id/editText1"
                        android:layout_width="fill_parent"
                        android:layout_weight="1"
                        android:layout_height="fill_parent"
                        android:inputType="number"
                        android:gravity="center" >
                        <requestFocus />
                    </EditText>
                </LinearLayout>

                <LinearLayout 
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="horizontal">
                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="fill_parent"
                    android:layout_weight="1"
                    android:layout_height="fill_parent"
                    android:text="Customer Code Number"
                    android:textAppearance="?android:attr/textAppearanceMedium" 
                    android:gravity="center"/>
                <EditText
                     android:id="@+id/editText2"
                     android:layout_width="fill_parent"
                     android:layout_weight="1"
                     android:layout_height="fill_parent"
                     android:inputType="number" 
                     android:gravity="center">

                    <requestFocus />
              </EditText>
            </LinearLayout>

              <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal">
                 <TextView
                    android:id="@+id/textView3"
                    android:layout_width="fill_parent"
                    android:layout_weight="1"
                    android:layout_height="fill_parent"
                    android:text="Customer Name"
                    android:gravity="center"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/editText3"
                    android:gravity="center"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:inputType="textPersonName" />
            </LinearLayout>

           <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal">
             <TextView
                    android:id="@+id/textView4"
                    android:gravity="center"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="Customer Address"
                    android:textAppearance="?android:attr/textAppearanceMedium" />
              <EditText
                    android:id="@+id/editText4"
                    android:gravity="center"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:inputType="textPostalAddress" />
        </LinearLayout>

            <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal">
            <TextView
                    android:id="@+id/textView5"
                    android:gravity="center"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="Name of Cosignee"
                    android:textAppearance="?android:attr/textAppearanceMedium" />
            <EditText
                    android:id="@+id/editText5"
                    android:layout_width="fill_parent"
                    android:gravity="center"
                    android:layout_weight="1"
                    android:layout_height="fill_parent"
                    android:inputType="textPersonName" />
        </LinearLayout>

        <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal">
            <TextView
                        android:id="@+id/textView6"
                        android:layout_width="fill_parent"
                        android:layout_weight="1"
                        android:layout_height="fill_parent"
                        android:gravity="center"
                        android:text="Address of Cosignee"
                        android:textAppearance="?android:attr/textAppearanceMedium" />
              <EditText
                        android:id="@+id/editText6"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:gravity="center"
                        android:inputType="textPostalAddress" />
        </LinearLayout>

            <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">

             <TextView
                android:id="@+id/textView7"
                android:gravity="center"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Sales Order"
                android:textAppearance="?android:attr/textAppearanceMedium" />
             <EditText
                 android:id="@+id/editText7"
                 android:layout_width="fill_parent"
                 android:layout_weight="1"
                 android:gravity="center"
                 android:layout_height="fill_parent"
                 android:inputType="number" >
                  <requestFocus />
            </EditText>
        </LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Customer Order Date"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceMedium" />
             <EditText
                android:id="@+id/editText8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:inputType="date" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

             <TextView 
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:text="INVOICE DETAILS"
                android:gravity="center"/>
        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:orientation="horizontal">
            <TextView 
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:text="Invoice Number"
                android:gravity="center"/>
            <EditText
                android:id="@+id/editText1"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="wrap_content"
                android:inputType="number" >
                <requestFocus />
            </EditText>
        </LinearLayout>

         <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView2"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:text="Date of issue of Invoice"
                android:textAppearance="?android:attr/textAppearanceMedium" />
            <EditText
                android:id="@+id/editText8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:inputType="date" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView3"
                android:layout_width="fill_parent"
                android:gravity="center"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:text="Time of Issue of Invoice"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText3"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:inputType="textPersonName" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
             <TextView
                android:id="@+id/textView4"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Date of Dispatch of Goods"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceMedium" />
              <EditText
                android:id="@+id/editText8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:inputType="date" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:layout_height="fill_parent"
                android:text="Time of Dispatch of Goods"
                android:textAppearance="?android:attr/textAppearanceMedium" />
            <EditText
                android:id="@+id/editText5"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:inputType="textPersonName" />
        </LinearLayout>

             <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView6"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:text="Description of Goods"
                android:textAppearance="?android:attr/textAppearanceMedium" />
            <EditText
                android:id="@+id/editText6"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:inputType="textPostalAddress" />
        </LinearLayout>

            <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">

             <TextView
                android:id="@+id/textView7"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:gravity="center"
                android:layout_height="fill_parent"
                android:text="Quantity Total"
                android:textAppearance="?android:attr/textAppearanceMedium" />
             <EditText
                 android:id="@+id/editText7"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:gravity="center"
                 android:layout_weight="1"
                 android:inputType="number" >
                  <requestFocus />
            </EditText>
        </LinearLayout>

               <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView8"
                android:layout_width="fill_parent"
                android:gravity="center"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:text="Unit"
                android:textAppearance="?android:attr/textAppearanceMedium" />
             <EditText
                android:id="@+id/editText8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:inputType="date" />
        </LinearLayout>

    </LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/textView8"
                android:layout_width="fill_parent"
                android:gravity="center"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:text="Total Amount"
                android:textAppearance="?android:attr/textAppearanceMedium" />
             <EditText
                android:id="@+id/editText8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:inputType="date" />
                </LinearLayout>

       <LinearLayout>
       </LinearLayout>
      </LinearLayout>

    </LinearLayout>

</ScrollView> 
```

我在执行 xml 代码时收到“强制关闭”。错误日志给出的错误如下：1）TextView 无法转换为 android.view.ViewGroup 2）无法更新中央索引和一些更奇怪的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:37:01.860

您必须为您的`texViews`尝试提供不同的 ID：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >    

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView 
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:layout_weight="1"
                android:text="MARKETING SUPERVISOR"/>            

    </LinearLayout>

     <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

         <TextView 
                android:id="@+id/textView2"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:text="CHALLAN"
                android:gravity="center"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
            <TextView 
                android:id="@+id/textView3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:layout_weight="1"
                android:text="Perm.IncmTax Num."
                android:gravity="center"/>
            <EditText
                android:id="@+id/editText1"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:inputType="number"
                android:gravity="center" >
                <requestFocus />
            </EditText>
        </LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
        <TextView
            android:id="@+id/textView4"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:layout_height="fill_parent"
            android:text="Customer Code Number"
            android:textAppearance="?android:attr/textAppearanceMedium" 
            android:gravity="center"/>
        <EditText
             android:id="@+id/editText2"
             android:layout_width="fill_parent"
             android:layout_weight="1"
             android:layout_height="fill_parent"
             android:inputType="number" 
             android:gravity="center">

            <requestFocus />
      </EditText>
    </LinearLayout>

      <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">
         <TextView
            android:id="@+id/textView5"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:layout_height="fill_parent"
            android:text="Customer Name"
            android:gravity="center"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText3"
            android:gravity="center"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:inputType="textPersonName" />
    </LinearLayout>

   <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">
     <TextView
            android:id="@+id/textView6"
            android:gravity="center"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Customer Address"
            android:textAppearance="?android:attr/textAppearanceMedium" />
      <EditText
            android:id="@+id/editText4"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:inputType="textPostalAddress" />
 </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">
    <TextView
            android:id="@+id/textView7"
            android:gravity="center"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Name of Cosignee"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    <EditText
            android:id="@+id/editText5"
            android:layout_width="fill_parent"
            android:gravity="center"
            android:layout_weight="1"
            android:layout_height="fill_parent"
            android:inputType="textPersonName" />
</LinearLayout>

<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">
    <TextView
                android:id="@+id/textView8"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:text="Address of Cosignee"
                android:textAppearance="?android:attr/textAppearanceMedium" />
      <EditText
                android:id="@+id/editText6"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:inputType="textPostalAddress" />
</LinearLayout>

    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

     <TextView
        android:id="@+id/textView9"
        android:gravity="center"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Sales Order"
        android:textAppearance="?android:attr/textAppearanceMedium" />
     <EditText
         android:id="@+id/editText7"
         android:layout_width="fill_parent"
         android:layout_weight="1"
         android:gravity="center"
         android:layout_height="fill_parent"
         android:inputType="number" >
          <requestFocus />
    </EditText>
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView10"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="Customer Order Date"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />
     <EditText
        android:id="@+id/editText8"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:inputType="date" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

     <TextView 
        android:id="@+id/textView11"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:text="INVOICE DETAILS"
        android:gravity="center"/>
</LinearLayout>

</LinearLayout>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal">
    <TextView 
        android:id="@+id/textView12"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Invoice Number"
        android:gravity="center"/>
    <EditText
        android:id="@+id/editText13"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:inputType="number" >
        <requestFocus />
    </EditText>
</LinearLayout>

 <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView14"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text="Date of issue of Invoice"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <EditText
        android:id="@+id/editText15"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:inputType="date" />
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView16"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:text="Time of Issue of Invoice"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText17"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:inputType="textPersonName" />
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
     <TextView
        android:id="@+id/textView18"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Date of Dispatch of Goods"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />
      <EditText
        android:id="@+id/editText19"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:inputType="date" />
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView20"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:layout_height="fill_parent"
        android:text="Time of Dispatch of Goods"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <EditText
        android:id="@+id/editText21"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:inputType="textPersonName" />
</LinearLayout>

     <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView22"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text="Description of Goods"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <EditText
        android:id="@+id/editText23"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:inputType="textPostalAddress" />
</LinearLayout>

    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

     <TextView
        android:id="@+id/textView24"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_height="fill_parent"
        android:text="Quantity Total"
        android:textAppearance="?android:attr/textAppearanceMedium" />
     <EditText
         android:id="@+id/editText25"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:gravity="center"
         android:layout_weight="1"
         android:inputType="number" >
          <requestFocus />
    </EditText>
</LinearLayout>

       <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView26"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:text="Unit"
        android:textAppearance="?android:attr/textAppearanceMedium" />
     <EditText
        android:id="@+id/editText27"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:inputType="date" />
</LinearLayout>

</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/textView28"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:text="Total Amount"
        android:textAppearance="?android:attr/textAppearanceMedium" />
     <EditText
        android:id="@+id/editText29"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:inputType="date" />
        </LinearLayout>

</LinearLayout>

</ScrollView> 
```

希望有帮助。

# facebook-graph-api - 获取 Facebook 页面流类型

> ID：11762544
> 
> 赞同：1
> 
> 时间：2012-08-01T15:28:24.230
> 
> 标签：facebook-graph-api, stream, facebook-fql, facebook-page

我想获得 Facebook 粉丝页面的所有信息流。

在我的应用程序中，我想显示带有不同模板的“帖子”，该模板取决于帖子的类型。

但是当我收到带有 FQL 或 API 的帖子时，类型永远不会相同，例如，对于事件，类型是“状态”，对于里程碑，类型是“状态”或“照片”。

有人知道我怎样才能获得“帖子”的真实类型吗？

谢谢你的帮助

# c++ - 我如何将字符串中的每个字符更改为不同的颜色而不是整个字符串

> ID：11762547
> 
> 赞同：2
> 
> 时间：2012-08-01T15:28:36.893
> 
> 标签：c++, string, colors

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <windows.h>
#include <time.h>

unsigned long n = 1;

int main()
{
    int i = 0;
    std::string text = "I whip my hair back and forth";
    std::string wipIt = " ";
    size_t sz;
    sz = wipIt.size();
    srand(time(0));

    do{
        for(i = 0; i < 10; i++)
        {
            int randomNumber = rand() % 15 + 1;
            Sleep(50);
            wipIt.resize (sz++,' ');
            std::cout << wipIt;
            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), randomNumber);
            std::cout << text << "\n";
        }
        for(i = 10; i > 0; i--)
        {
            int randomNumber = rand() % 15 + 1;
            Sleep(50);
            wipIt.resize (sz--,' ');
            std::cout << wipIt;
            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), randomNumber);
            std::cout << text << "\n";
        }
    }
    while (n != 0);
    return 0;
} 
```

如果我把这篇文章搞砸了，我很抱歉这只是我的第二篇文章。

使字符串中的每个字符具有不同颜色而不是整个字符串具有相同颜色的最简单方法是什么。

整理提示也将不胜感激：P

编辑：整理了一下，随机运行良好，谢谢大家^_^现在按字符着色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:34:16.887

为什么看起来不是随机的？好吧，因为它不是。计算机使用伪随机数生成器来生成看似随机的数字，这些数字实际上是众所周知的和确定的。

伪随机发生器的初始状态称为“种子”；您必须每次将其设置为不同的值才能产生更接近随机的结果。在 C 中，您可以这样做：

```
srand(time(NULL)); 
```

这会将种子设置为每次调用时的实际时间（以秒为单位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:48:19.683

为了按字符着色，您必须手动遍历字符串的字符并在输出每个字符之前设置颜色属性。

（下面的代码通过 迭代`char`。这不适用于实际使用多字节编码的字符集。为了支持这些，您必须使用 API 通过实际的用户感知字符而不是通过来迭代字符串`char`。）

此代码还有其他一些更改。

```
#include <iostream>
#include <string>
#include <random>

#include <Windows.h>

void colorize(size_t spacing, std::string const &s, std::mt19937 &eng) {
    std::cout << std::string(spacing, ' ');
    std::uniform_int_distribution<> dist(1,15);
    for (size_t i=0; i<s.size(); ++i) {
        SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), dist(eng));
        std::cout << s[i];
    }
    std::cout << '\n';
}

int main() {
    std::string text = "I whip my hair back and forth";
    int sz = 0;

    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    std::mt19937 eng(seed);

    while (true) {
        int spacing = 11 - abs(10 - sz);
        sz = (sz+1) % 20;
        Sleep(50);
        colorize(spacing, text, eng);
    }
} 
```

我将 C++11`<random>`库用于随机数，因为它比`rand()`. 它提供了许多现成的发行版，并且更难出错（`rand() % 15 + 1`即使`rand()`质量很高，也有轻微的偏差，但可能不是）。

我将重复的代码提取到一个函数中以消除重复。然后我用一个函数替换了两个 for 循环，该函数的 zigzag 输出与两个 for 循环对 sz 所做的完全匹配。

我将`do {} while()`无限循环替换为更具可读性和惯用的`while(true){}`.

我消除了为间距调整大小的字符串变量，以便在每次迭代时构造一个临时变量。这确实意味着每次迭代都可能有一个分配，而不是简单的调整大小（尽管小字符串优化可能会避免它），但在这种情况下性能无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:30:07.423

在首次使用之前，您需要为您的随机数生成器提供一个种子。

使用 srand 初始化随机数生成器的[示例](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)是：

```
/* srand example */
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main ()
{
  printf ("First number: %d\n", rand() % 100);
  srand ( time(NULL) );
  printf ("Random number: %d\n", rand() % 100);
  srand ( 1 );
  printf ("Again the first number: %d\n", rand() %100);

  return 0;
} 
```

# c# - 使用任务继续来堆叠作业

> ID：11762551
> 
> 赞同：1
> 
> 时间：2012-08-01T15:28:51.760
> 
> 标签：c#, winforms, queue, task-parallel-library

所有，我有一个调用`TaskSpin`的方法，它使用 TPL 在后台线程上运行传递的方法。

```
public TaskSpin(Func asyncMethod, object[] methodParameters)
{
    ...
    asyncTask = Task.Factory.StartNew<bool>(() => 
        asyncMethod(uiScheduler, methodParameters));

    asyncTask.ContinueWith(task =>
    {
        ...
        // Finish the processing update UI etc.
        ...
        if (isStacked && task.Status == TaskStatus.RanToCompletion)
            ProcessNextTask(dataGridViewSite);
    }
    ...
} 
```

这个例程已经很好地建立了一次触发一个方法，但我最近被要求将多个方法排队并按顺序运行它们。为此（由[this answer](https://stackoverflow.com/a/11758271/626442)辅助）我编写了以下按钮单击事件处理程序

```
private void buttonProcAllUrg_Click(object sender, EventArgs e)
{
    // Build the stacker.
    Dictionary<Func<TaskScheduler, object[], bool>, object[]> taskPair = 
        new Dictionary<Func<TaskScheduler, object[], bool>, object[]>();
    this.taskQueue = 
        new Queue<KeyValuePair<Func<TaskScheduler, object[], bool>, object[]>>();

    // Populate the stacker.
    foreach (DataGridViewRow row in this.DataGridViewDrg.Rows) 
    {
        KeyValuePair<Func<TaskScheduler, object[], bool>, object[]> task =
            new KeyValuePair<Func<TaskScheduler, object[], bool>, object[]>
            (BuildDrgDataForSite, DrgDataRowInfo(row.Index));     
        this.taskQueue.Enqueue(task); 
    }

    // Launch the queue.
    ProcessNextTask(this.DataGridViewDrg);
} 
```

并且 ProcessNextTask 方法定义为

```
private void ProcessNextTask(DataGridView dataGridView) 
{     
    try     
    {
        // Queue empty.
        bIsStacked = true;
        if (this.taskQueue.Count <= 0)
        {
            bIsStacked = false;
            return;
        }

        // Launch new task.
        KeyValuePair<Func<TaskScheduler, object[], bool>, object[]> item = this.taskQueue.Dequeue();
        Task<bool> asyncBuildDataTask = null;
        TaskSpin(asyncBuildDataTask, uiScheduler, mainForm,
                    item.Key, item.Value, dataGridView,
                    "Process stack successfully executed", true, bIsStacked);
    }     
    catch(InvalidOperationException)    
    {
        // Nothing left in stack.
        bIsStacked = false;    
    }   
} 
```

这工作正常，但是在第一个任务运行并`ProcessNextTask`从延续开始第二次（或更多次）调用之后，GUI 变得无响应。我可以做些什么来确保 UI 线程在第二次调用时不会被阻塞？

*笔记。我尝试`ProcessNextTask`使用 UI 线程同步上下文在另一个线程上启动该方法*

```
Task task = Task.Factory.StartNew(() =>
{
    ProcessNextTask(dataGridView);
}, CancellationToken.None, 
   TaskCreationOptions.LongRunning, 
   uiScheduler); 
```

*哪里`TaskScheduler uiSchduler = TaskScheduler.FromCurrentSynchonisationContex();`。*

***编辑：我已尝试根据@Reed Copsey 在下面的回答创建一个`BlockingCollection`以促进我想做的事情，但我从未这样做过，并欢迎在这里提供任何建议***

```
BlockingCollection<Action<object[]>> taskQueue = 
    new BlockingCollection<Action<object[]>>();
foreach (DataGridViewRow row in this.DataGridViewDrg.Rows) 
{
    Action<object[]> tmpAction = del => 
        {AsyncBuildDrgDataForSite(DrgDataRowInfo(row.Index)); };
    taskQueue.Add(tmpAction);
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:33:00.497

我建议以不同的方式考虑这一点。

如果您尝试“堆叠作业”，通常最好将例程重新设计为生产者/消费者场景。 `BlockingCollection<T>`为此提供了适当的框架，因为它提供了一个线程安全队列，您可以使用它来添加工作项，然后创建一个任务来处理它们（通过`GetConsumingEnumerable()`）。完成项目后，您可以更新 UI，然后在添加新项目时重新启动“生产者”任务等。

# regex - 如何在正则表达式中将 $1 与数字连接起来

> ID：11762552
> 
> 赞同：7
> 
> 时间：2012-08-01T15:28:51.877
> 
> 标签：regex, perl

我想在两个模式之间插入数字：

```
$s = 'id="" value="div"';
$s =~ s/(id=")(".*)/$1123$2/; 
```

当然，我得到了错误，结果是“ value= ***"*** div"。预期的结果是***id="123" value="div"***。

在替换中，我的意思是 1 美元，然后是 123 号，然后是 2 美元，但不是 1123 美元，然后是 2 美元。正则表达式中的正确替换是什么？我想用一个正则表达式来做。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T15:35:05.373

```
$s =~ s/(id=")(".*)/$1123$2/;  # Use of uninitialized value $1123 in concatenation (.) or string 
```

尽管您希望它替代`$1`，但 perl 将其视为变量`$1123`。Perl 无法知道您的意思是`$1`. 因此，您需要通过将*变量*`$1`指定为`${1}`：

```
$s =~ s/(id=")(".*)/${1}123$2/; 
```

在脚本顶部包含以下内容始终是一个好主意。它们将为您节省大量时间和精力。

```
use strict;
use warnings; 
```

例如，运行包含上述模块的脚本会导致错误消息：

```
Use of uninitialized value $1123 in concatenation (.) or string at /tmp/test.pl line 7. 
```

（忽略报告的脚本名称和行号。）它清楚地说明了 perl 的预期。

使用后视和前瞻断言的另一种方法：

```
$s =~ s/(?<=id=")(?=")/123/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:39:15.963

另一种变体：

```
$s =~ s/(id=")(".*)/$1."123".$2/e; 
```

使用示例：

```
$ cat 1.pl
$s = 'id="" value="div"';
$s =~ s/(id=")(".*)/$1."123".$2/e;
print $s,"\n";

$ perl 1.pl
id="123" value="div" 
```

# php - AJAX，作为答案获取对象

> ID：11762553
> 
> 赞同：1
> 
> 时间：2012-08-01T15:28:52.883
> 
> 标签：php, ajax, json

我有 2 个 php 文件：索引和页面。在 index.php 中，我编写了 ajax/jquery 代码：

```
$(document).ready( function () {
        var mas;
        $.ajax({
            url: "page.php",
            type: "POST",
            data: "a=aaa&b=bbb",
            success: function (htm) {
                mas = htm;
                alert(htm);         
            }
        });

        $(document).on("click", function () {
            alert(mas['a']);
        });

    }); 
```

在 page.php 我只有这个代码：

```
 echo json_encode($_POST); 
```

数据发送成功，因为我在警报消息中获得：{“a”：“aaa”，“b”：“bbb”}。当我单击文档时，警报：“未定义”，请告诉我哪里错了？我想要那个警报“aaa”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:31:40.423

该`json_encode()`函数就是这样做的……将数据编码为 JSON。JSON 不是 javascript 对象，它是 javascript 对象的*表示法*。为了将其用作对象，您需要首先对其进行解析：

```
mas = JSON.parse(htm); 
```

然后您可以访问以下值：

```
alert(mas.a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:33:27.337

添加：

```
header('Content-type: application/json'); 
```

到 PHP 脚本的顶部。

您的 JSON 数据被视为 HTML 字符串，而不是扩展为 JavaScript 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:34:08.540

您需要告诉 jQuery 从 AJAX 调用中解析 JSON。为此，添加`dataType: 'json'`到`$.ajax`.

```
$.ajax({
    url: "page.php",
    type: "POST",
    data: "a=aaa&b=bbb",
    dataType: 'json',
    success: function (htm) {
        mas = htm;
        console.log(htm);         
    }
}); 
```

# wordpress - 如何复制一个wordpress插件？

> ID：11762555
> 
> 赞同：4
> 
> 时间：2012-08-01T15:28:57.890
> 
> 标签：wordpress, plugins, copy, duplicates, mirror

如何复制 Wordpress 插件，以便在侧边栏中运行两个相同的插件，并使用其各自的链接？我显然会确保插件的每个副本都将使用唯一的表。

我今天整天都在试图解决这个问题，但没有任何成功，这次谷歌不是我的朋友。任何人都可以提供任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:50:14.440

这是一项乏味的任务。首先，您需要下载整个插件并研究核心功能，将插件名称更改为新名称，将其中使用的所有变量更改为新名称。

确保没有相互冲突的功能。通过这样做，您可以复制它。

介于两者之间，这有什么需要？您的问题可能有一个简单的解决方案。首先解释一下你的上下文是什么？

# vb.net - 在 Active Directory VB.net 中设置“连接到文件夹”属性

> ID：11762559
> 
> 赞同：0
> 
> 时间：2012-08-01T15:29:07.397
> 
> 标签：vb.net, active-directory

我需要将主目录属性设置为：

连接：H：到：（我的文件夹路径）

我怎样才能在 VB.Net 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:16:55.020

看看这个链接：

[如何将新的主驱动器分配给没有主驱动器的用户？](http://blogs.technet.com/b/heyscriptingguy/archive/2006/02/06/how-can-i-assign-a-new-home-drive-to-a-user-who-doesn-t-have-one.aspx)

然后将其与此页面上的众多示例之一结合起来：

[在 VB.Net 中使用 Active Directory](http://www.dreamincode.net/forums/topic/30894-working-with-the-active-directory-in-vbnet/)

# css - IE7+ 中的容器“下推”

> ID：11762563
> 
> 赞同：0
> 
> 时间：2012-08-01T15:29:15.800
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-9

我正在对[http://eidman.krd-design.net/](http://eidman.krd-design.net/)进行最后的润色。当我在 IE8 上测试该站点时，主容器位于导航侧边栏下方。导航元素也相互堆叠。以前有没有人遇到过这些问题，如果有，解决方法是什么？

感谢您的任何帮助，我非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:59:49.710

使用[http://validator.w3.org/](http://validator.w3.org/check)检查您的标记，检查您是否有大量错误，例如杂散`</li>`和`</div>`标签、a 中的空白`h ref`和重复的结束锚标签`</a></a>`

# javascript - 使用 setTimeout 调用父函数的内部函数

> ID：11762573
> 
> 赞同：0
> 
> 时间：2012-08-01T15:29:42.337
> 
> 标签：javascript, jquery, settimeout

内部函数过期后如何调用父函数？

```
setTimeout(main, 2000);
function main(){
    /* .... code */
    setTimeout(console.log("hello after 5 seconds"), 5000);
} 
```

预期的操作是`hello after 5 seconds`在 5 秒内打印（共 7 秒）；使用上面的代码，它会在 2 秒内打印出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:31:48.717

您需要传递`setTimeout`函数引用。有了`setTimeout(console.log("hello after 5 seconds"), 5000);`，你`console.log` *马上*打电话。任何时候你写`()`在一个函数名之后，你就是在调用它。

`console.log`返回*undefined*，这是传递给`setTimeout`. 它只是忽略*未定义*的值并且什么都不做。（而且它不会抛出任何错误。）

如果您需要将参数传递给回调函数，有几种不同的方法。

匿名函数：

```
setTimeout(function() {
    console.log('...');
}, 5000); 
```

返回一个函数：

```
function logger(msg) {
    return function() {
        console.log(msg);
    }
}

// now, whenever you need to do a setTimeout...
setTimeout(logger('...'), 5000); 
```

这是有效的，因为调用`logger`只是返回一个新的匿名函数，该函数结束了`msg`。返回的函数是实际传递给的函数`setTimeout`，当回调被触发时，它可以`msg`通过闭包访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:39:26.960

我想我明白你想要什么。看一看：

```
var main = function(){
    console.log("foo");
    var function1 = function( string ) {
        console.log("function1: " + string);
    };
    var function2 = function() {
        console.log( "hadouken!" );
    };
    // you will need to use a closure to call the function
    // that you want with parameters
    // if you dont have parameters, just pass the function itself
    setTimeout(function(){ function1("bar") }, 5000);
    setTimeout(function2, 6000);
}
setTimeout(main, 2000); 
```

或者：

```
function main(){
    console.log("foo");
    function function1( string ) {
        console.log("function1: " + string);
    };
    function function2() {
        console.log( "hadouken!" );
    };
    // you will need to use a closure to call the function
    // that you want with parameters
    // if you dont have parameters, just pass the function itself
    setTimeout(function(){ function1("bar") }, 5000);
    setTimeout(function2, 6000);
}
setTimeout(main, 2000); 
```

我通常更喜欢第一个sintax。

jsFiddle：http: [//jsfiddle.net/davidbuzatto/65VsV/](http://jsfiddle.net/davidbuzatto/65VsV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:37:13.560

它[有效](http://jsfiddle.net/82yVn/)！你错过了一句话`function`。

```
setTimeout(main, 1000);

function main() {
    function function1 () { alert(1); };
    setTimeout(function1, 1000);
}​ 
```

# c# - WebMatrix ReCaptcha 助手

> ID：11762579
> 
> 赞同：0
> 
> 时间：2012-08-01T15:29:59.373
> 
> 标签：c#, .net, razor, captcha, webmatrix

我目前正在使用 WebMatrix ReCaptcha @Helper，尽管其中太多是不可读的。

有没有办法让您*自己的*文本出现在验证码部分？

我看到 recaptcha.net 网站上有该选项，但我找不到可用于 webmatrix 助手的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:24:39.277

据我所知，recaptcha 适用于谷歌图书。扫描算法无法阅读的文本被交给 recaptcha，所以真人会说出这个词是什么。我不认为有办法添加你自己的

# apache-flex - 显示无法被用户关闭的警报，在事件发生时自动关闭

> ID：11762581
> 
> 赞同：0
> 
> 时间：2012-08-01T15:30:01.617
> 
> 标签：apache-flex, actionscript

我有一个 Flex 应用程序，它在用户单击按钮时向数据库发送查询。由于查询可能很繁重，并且可能需要一分钟，我想显示一个警报，该警报仅在事件从数据库返回后才会关闭（用户将无法自己关闭它）。Flex中可以吗？我怎么做？

我有函数 sendQuery() 和 dataEventHandler()。我想我需要将代码放入 sendQuery() 以显示警报，并在 dataEventHandler() 中放入数据以在数据来自数据库后将其关闭，但是如何使用户“无法关闭”警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:39:47.240

内置的 Flex Alert 类将始终具有某种类型的关闭按钮。

但是，没有理由不能创建自己的组件。然后使用 PopUpManager 打开和关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:16:37.967

以下代码可能对您有所帮助……（其中一个解决方案……）您可以找到我已经制作了解决方案 1 和解决方案 2……您可以使用其中任何一个，第三种解决方案是创建您自己的自定义组件。请找到下面的代码...。您可以使用以下逻辑来解决您的问题。使用 Timer 检查是否收到数据，或者您可以调度自定义事件并调用 updateAlertPosition 函数。

希望它可以帮助： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.CloseEvent;
            import mx.managers.PopUpManager;

            private var minuteTimer:Timer;
            private var alert:Alert;

            private var displayInitialText:String = "Data Not Received, Please wait...."; 
            private var displayDataReveivedText:String = "Data Received...";

            private function timerInit():void
            {
                //Logic to check if data Received.
                minuteTimer = new Timer(3000);
                minuteTimer.addEventListener(TimerEvent.TIMER, updateAlertPosition);
                minuteTimer.start(); 
            }

            private function updateAlertPosition(event:Event = null):void {
                minuteTimer.stop();
                //Solution 1
                //add your flag here if y you want to check if data is received or not
                //if(Data Received)
                alert.mx_internal::alertForm.mx_internal::buttons[0].enabled = true;
                alert.mx_internal::alertForm.mx_internal::buttons[1].enabled = true;
                alert.mx_internal::alertForm.mx_internal::textField.text = displayDataReveivedText;
                //Solution 2
                //alert.enabled = true;
                //If you want to remove it automatically
                //closeAutomatically();
            }

            private function closeAutomatically():void
            {
                PopUpManager.removePopUp(alert);
            }

            private function clickHandler():void
            {
                //Start Timer
                timerInit();
                //Solution 1
                alert = Alert.show(displayInitialText, "Alert", Alert.OK|Alert.CANCEL,this,alertCloseHandler);
                alert.mx_internal::alertForm.mx_internal::buttons[0].enabled = false;
                alert.mx_internal::alertForm.mx_internal::buttons[1].enabled = false;
                //Solution 2
                //alert.enabled = false;
            }

            private function alertCloseHandler(event:CloseEvent):void
            {
                if(event.detail == Alert.CANCEL)
                {
                    //Some Code on close
                }
                else
                {
                    //Some Code on OK
                }

            }
        ]]>
    </fx:Script>

    <s:Button label="Show Alert" x="100" y="100" click="clickHandler()"/>
</s:Application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:12:40.513

作为一个想法，您可以创建一个自定义警报然后：

1.  显示警报
2.  禁用应用程序。
3.  隐藏警报。
4.  启用应用程序。

警报示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300"
         creationComplete="onCreationComplete(event)">

    <s:Rect>
        <s:fill>
            <s:SolidColor color="0xFFFFFF"/>
        </s:fill>
        <s:stroke>
            <s:SolidColorStroke />
        </s:stroke>
    </s:Rect>

    <s:Label text="Please Wait..."/>

    <fx:Script>
        <![CDATA[
            import mx.core.FlexGlobals;
            import mx.events.FlexEvent;
            import mx.managers.PopUpManager;
            public static function show():void
            {
                PopUpManager.createPopUp(FlexGlobals.topLevelApplication);      
            }

            public static function hide():void
            {
                PopUpManager.removePopUp(this);
                FlexGlobals.topLevelApplication.enabled = true;
            }

            protected function onCreationComplete(event:FlexEvent):void
            {
                PopUpManager.centerPopUp(this);
                FlexGlobals.topLevelApplication.enabled = false;
            }
        ]]>
    </fx:Script>
</s:Group> 
```

用法：

```
YourAlert.show();

YourAlert.hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:17:36.687

@Alex，我使用了您的代码，但对其进行了一些修改，因为出现了一些错误：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         creationComplete="creationCompleteHandler()" width="100%" height="100%">
    <fx:Script>
        <![CDATA[

            import mx.core.FlexGlobals;
            import mx.core.UIComponent;
            import mx.managers.PopUpManager;

            ///////////////////////////////////////
            //// public functions - my group is ImageViewer.mxml component

            public static function show():ImageViewer {
                return PopUpManager.createPopUp(FlexGlobals.topLevelApplication as DisplayObject, ImageViewer) as ImageViewer;
            }

            public function hide():void {
                PopUpManager.removePopUp(this);
                FlexGlobals.topLevelApplication.enabled = true;
            }

            ////////////////////////////
            //// component events

            private function creationCompleteHandler():void {
                PopUpManager.centerPopUp(this);
                FlexGlobals.topLevelApplication.enabled = false;
            }
            ]]>
    </fx:Script>
</s:Group> 
```

并称它为：

```
var imageviewer:ImageViewer = ImageViewer.show();
//imageviewer.imageURL = _value_dto.value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T10:34:03.807

制作一个覆盖整个应用程序的 0-0.2 alpha 形状（可能您会想要监听 resizeevents），并在其中添加一个自定义面板，其中包含消息。

# java - 在java中的程序启动时强制加载类

> ID：11762585
> 
> 赞同：1
> 
> 时间：2012-08-01T15:30:16.870
> 
> 标签：java, reflection, classloader

有没有办法在程序启动后强制加载类？我有以下情况：我有一个包含插件类的名称和 java.lang.Class 的哈希图。在每个插件类中，我都有一个注册该类的静态块

```
static {
ClassMap.getInstance().register("name",MyPlugin.class);
} 
```

我不知道这个例子中 MyPlugin 的名称和包。所以我希望这段代码将在程序启动时执行。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:35:29.927

如果类对象在映射中，这意味着该类已经加载，即您的静态块已经执行。

另一方面，如果您只有类名（例如在列表中），您可以这样做：

```
for(String classname : yourList){
    // wrap with try / catch
    Class.forName(className);
} 
```

[这是对类加载时发生的事情](http://www.techjava.de/topics/2008/01/java-class-loading/)的一个很好的概述

* * *

更新：您似乎想要的是一种组件扫描，它将找到您所有的插件类。使用纯 Java 无法做到这一点，但您可以例如使用[反射](http://code.google.com/p/reflections/)库来做到这一点。示例代码：

```
Reflections reflections = new Reflections("com.your.project");
Set<Class<? extends YourBaseClass>> subTypes = 
    // and all of these classes are already initialized
    reflections.getSubTypesOf(YourBaseClass.class); 
```

# php - 我可以加载一次文件并重复访问它而不重新加载它吗？

> ID：11762587
> 
> 赞同：-1
> 
> 时间：2012-08-01T15:30:18.697
> 
> 标签：php

我继承了几个从 CSV 文件解析数据并更新数据库的 PHP 脚本。CSV 文件有数百 MB，运行脚本所花费的大部分时间用于加载 CSV。

我想在运行脚本之间将 CSV 保留在内存中。可以用 PHP 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:38:59.427

这可以通过数据库支持顺利完成，最好是 MySQL。您可以将数据从 CSV 导入临时数据库，并在整个处理完成后将其销毁。

**[*您可以在此处*](http://www.daniweb.com/web-development/php/threads/246795/how-to-import-.csv-into-mysql-database-in-php-)**阅读有关将 CSV 数据导入数据库的信息**[](http://www.daniweb.com/web-development/php/threads/246795/how-to-import-.csv-into-mysql-database-in-php-)**

# php - 重定向在php中无法正常工作

> ID：11762590
> 
> 赞同：-3
> 
> 时间：2012-08-01T15:30:34.327
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有一个创建文件的功能。如果成功，我希望它将用户重定向到 X 页面.. 在这种情况下为 1.php.... 但它不起作用。PHP 脚本在顶部......所以从技术上讲它应该可以工作

如果我把它放在`header ()`createFile () 函数里面，它就可以工作，但如果我把它放在 if 语句里面，它就不行....

```
<?php 
    //DB Config File
    $dbFile = 'dbconfig.php';

    function createfile ($dbFile) {
            //Creates File and populates it.
            $fOpen = fopen($dbFile, 'w');

                $fString .= "<?php\n";
                $fString .= "// Database Constants\n";
                $fString .= "define(\"DB_SERVER\", \"$server\");\n";
                $fString .= "define(\"DB_USER\", \"$username\");\n";
                $fString .= "define(\"DB_PASS\", \"$password\");\n";
                $fString .= "define(\"DB_NAME\", \"$dbname\");\n";
                $fString .= "?>";

            fwrite($fOpen, $fString);
            fclose($fOpen);

    }

    if (isset($_POST['submit'])) {

    $username = $_POST['username'];
    $password = $_POST['password'];
    $server = $_POST['server'];
    $dbname = $_POST['dbname'];

    try {
    $db = new PDO ('mysql:host=' .$server.';dbname='.$dbname,$username,$password);

    if ($db) { //if succesful at connecting to the DB

    if (file_exists($dbFile)){
        if (is_readable($dbFile) && is_writable($dbFile)){ 

            //Creates File, populates it and redirects the user

        if (createfile($dbFile)) { 
        $host  = $_SERVER['HTTP_HOST'];
        $uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
        $extra = '1.php';
        header("Location: http://$host$uri/$extra");
        exit ();
                }

            } else { 

            $msg = "2The file {$dbFile} cannot be accessed. Please configure the file manualy or grant Write and Read permission.";  }

        } else {

            //Creates File, populates it and redirects the user

        if (createfile($dbFile)) {
        $host  = $_SERVER['HTTP_HOST'];
        $uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
        $extra = '1.php';
        header("Location: http://$host$uri/$extra");
        exit ();
                }

            }

    }

    } catch (PDOException $e) { //Catchs error if can't connect to the db.
        $msg = 'Connection failed: ' . $e->getMessage();
    }

    }

    ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    </head>

    <body>

    <form id="iForm" method="post" action="install.php">
    <label id="username" name="username">Username</label>
    <input id="username" name="username"/>
    <label id="password" name="password">Password</label>
    <input id="password" name="password" />
    <label id="server" name="server">Server</label>
    <input id="server" name="server"/>
    <label id="dbName" name="dbname">dbName</label>
    <input id="dbName" name="dbname"/>

    <input type="submit" name="submit" value="submit" />
    </form>
    <p id="error"><?php echo $msg ?></p>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:32:32.790

它不起作用，因为您已经通过在 header() 函数调用上方将该 HTML 内容输出到浏览器。

您需要将 HTML 输出到输出缓冲区，或者在将任何输出发送到浏览器之前将标头调用移动到脚本的开头附近。

在我看来，没有理由不能简单地将脚本中的初始 HTML 内容向下移动到大部分 PHP 代码之后的位置。

```
<?php 
//DB Config File
$dbFile = 'dbconfig.php';

function createfile ($dbFile) {
        //Creates File and populates it.
        $fOpen = fopen($dbFile, 'w');

            $fString .= "<?php\n";
            $fString .= "// Database Constants\n";
            $fString .= "define(\"DB_SERVER\", \"$server\");\n";
            $fString .= "define(\"DB_USER\", \"$username\");\n";
            $fString .= "define(\"DB_PASS\", \"$password\");\n";
            $fString .= "define(\"DB_NAME\", \"$dbname\");\n";
            $fString .= "?>";

        fwrite($fOpen, $fString);
        fclose($fOpen);

}

if (isset($_POST['submit'])) {

$username = $_POST['username'];
$password = $_POST['password'];
$server = $_POST['server'];
$dbname = $_POST['dbname'];

try {
$db = new PDO ('mysql:host=' .$server.';dbname='.$dbname,$username,$password);

if ($db) { //if succesful at connecting to the DB

if (file_exists($dbFile)){
    if (is_readable($dbFile) && is_writable($dbFile)){ 

        //Creates File, populates it and redirects the user

    if (createfile($dbFile)) { 
    $host  = $_SERVER['HTTP_HOST'];
    $uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
    $extra = '1.php';
    header("Location: http://$host$uri/$extra");
    exit ();
            }

        } else { 

        $msg = "2The file {$dbFile} cannot be accessed. Please configure the file manualy or grant Write and Read permission.";  }

    } else {

        //Creates File, populates it and redirects the user

    if (createfile($dbFile)) {
    $host  = $_SERVER['HTTP_HOST'];
    $uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
    $extra = '1.php';
    header("Location: http://$host$uri/$extra");
    exit ();
            }

        }

}

} catch (PDOException $e) { //Catchs error if can't connect to the db.
    $msg = 'Connection failed: ' . $e->getMessage();
}

}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
</head>

<body>
<form id="iForm" method="post" action="install.php">
<label id="username" name="username">Username</label>
<input id="username" name="username"/>
<label id="password" name="password">Password</label>
<input id="password" name="password" />
<label id="server" name="server">Server</label>
<input id="server" name="server"/>
<label id="dbName" name="dbname">dbName</label>
<input id="dbName" name="dbname"/>

<input type="submit" name="submit" value="submit" />
</form>
<p id="error"><?php echo $msg ?></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:33:01.827

重定向必须在您向客户端发送任何数据之前发生

# java - 对 Java 正则表达式感到困惑

> ID：11762593
> 
> 赞同：0
> 
> 时间：2012-08-01T15:30:41.403
> 
> 标签：java, regex

我要做的是从目录中的文件列表中查看，看看哪个文件名具有“输出”模式。如果文件确实包含“输出”一词，那么我只想将其打印到屏幕上。就是这样。

这是我的代码不起作用。为什么它不起作用？

```
package duplicate_search;

import java.io.File;
import java.util.regex.*;
import java.util.Scanner;

public class Search {
public static void main(String [] args){
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Enter the directory to search: ");
    String dir = keyboard.next();

    Pattern p = Pattern.compile("output");
    Matcher m = null;
    System.out.println
              ("Now search for *." + p + " files.");
    File folder = new File(dir);
    File[] listOfFiles = folder.listFiles();

    for(File f : listOfFiles){
        m = p.matcher(f.getName());
        if(m.matches()){
            System.out.println(f.getName());
        }
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:33:11.107

如果您想匹配包含“输出”的文件名，那么您不想使用`matches`，而是使用`find`.

从文档：

> matches 方法尝试将整个输入序列与模式进行匹配。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:33:22.563

`.matches()`进行完全匹配。检查`.*output.*`或使用`find()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:36:13.040

你为什么不使用 contains() 方法？除非我没有正确回答您的问题，否则您可以检查字符串是否包含该字符序列：

```
f.getName().contains("output"); //Returns true if the string contains "output" 
```

恕我直言，正则表达式在这里似乎有点过头了，除非您当然有自己的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:42:13.770

这是修改后的代码，

```
import java.io.File;
import java.util.regex.*;
import java.util.Scanner;

public class Search {
public static void main(String [] args){
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Enter the directory to search: ");
    String dir = keyboard.next();

    Pattern p = Pattern.compile("output");
    Matcher m = null;
    System.out.println
              ("Now search for *." + p + " files.");
    File folder = new File(dir);
    File[] listOfFiles = folder.listFiles();

    for(File f : listOfFiles){
        m = p.matcher(f.getName());
        if(m.find()){ // change to find instead of m.matches()
            System.out.println(m.group()); // return the string sequence which is matched
        }
      }
    }
} 
```

# java - 当应用程序被销毁时，@PersistenceUnit 会关闭我的 EntityManagerFactory 吗？

> ID：11762594
> 
> 赞同：0
> 
> 时间：2012-08-01T15:30:41.757
> 
> 标签：java, annotations, entitymanager, persistence-unit

如果我使用以下

```
@PersistenceUnit(unitName="mongo")
EntityManagerFactory emf;

EntityManager em = emf.createEntityManager(); 
```

此注释是否会确保 EntityManagerFactory 在应用程序被销毁时正常关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:30:55.637

是的，注入的 EntityManagerFactory 会被容器自动关闭。

# c# - SWITCH CASE 语句会变得太大吗？

> ID：11762597
> 
> 赞同：0
> 
> 时间：2012-08-01T15:30:51.567
> 
> 标签：c#, switch-statement

我有一个持续增长的 SELECT/SWITCH 语句......我认为我应该完成了。
但是，目前有 19 种选择……还有比这更好的选择吗？

用 C# 编码

IE：

```
switch (Request["typeOfRequest"].ToString())
        {
            case "comboFills":
                Response.ContentType = "text";
                Response.Write(getVizData());
                break;
            case "linkFormField":
                Response.ContentType = "text";
                Response.Write(getVizRuleFields());
                break;
            case "getDispositions": 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:44:46.297

Switch 语句可能比这大得多……但是，最终您可能会遇到效率问题。我不认为19例是个问题。我有更大的声明。通常 switch 语句不是处理瓶颈，所以它是你优化的最后一件事。

每种情况都会作为测试和跳跃转换到 CPU 上，因此请考虑一下最坏情况会执行多少操作，并决定是否值得大惊小怪，以及实际节省多少操作（最坏情况和平均情况）。

话虽如此，有几个明显的选择。如果您有数字类型并且它们是均匀分布的，您可以将您的 switch 语句拆分为多个 switch....

```
if value < 50
  switch
    ...
  end
else if value < 100
  switch
    ...
  end
else
  ...
end 
```

这当然更难维护，并且可能依赖于使您的代码难看的常量值的知识。它真的只是一个肮脏的搜索树......

另一种方法是将所有案例放入函数中，并构建将每个值映射到函数处理程序的树或哈希表。这样，您始终可以依赖 O(logN) 搜索时间（或者更好，在哈希表的情况下）。我再说一遍：除非你有充分的理由，否则不要这样做。

希望对您有所帮助。抱歉不是特定于语言的。您没有提到一种语言，但我假设它类似于 BASIC。

# apache - 使用 Apache 屏蔽/更改某些响应代码

> ID：11762598
> 
> 赞同：1
> 
> 时间：2012-08-01T15:30:51.900
> 
> 标签：apache, http, proxy, response

我有一个启用了 mod_proxy 的 apache http 服务器（A），将所有请求发送到第二台机器（B）。

在正常情况下，请求 X 将发送到服务器 A，然后被发送到服务器 B。服务器 B 将向服务器 A 返回响应，然后将其发送给用户。

我想屏蔽用户的一些响应代码，例如，如果服务器 B 返回 403，我希望服务器 A 向用户返回 500。

我一直在做一些关于物质的研究，但我无法找到具体的答案。我的第一个想法是尝试 ErrorDocument 但我尝试时没有任何反应（可能是由于代理）。我的下一个想法是使用 mod_rewrite 但是似乎 Apache 的 conf 文件中的 IF 语句没有给我查看返回码的选项。

这甚至可以使用 Apache，也许使用 mod，还是我必须依赖外部应用程序？如果可能的话，我希望完全控制返回的答案，这样不仅可以更改响应状态，还可以更改整个 html 本身。

欢迎任何建议。

# python - Django DateTimeField 与 datetime.now() 进行比较

> ID：11762612
> 
> 赞同：6
> 
> 时间：2012-08-01T15:31:37.243
> 
> 标签：python, django

我有一个`DateTimeField`：

```
class Assignment (models.Model):
   official_deadline = models.DateTimeField(null=True, blank=True) 
```

我需要将它与当前日期时间进行比较，我已经尝试过：

```
def official_deadline_past(self):
    if datetime.datetime.today() > self.official_deadline:
        return True
    return False 
```

但它总是返回`False`我也尝试过：

```
def official_deadline_past(self):
    if datetime.datetime.now() > self.official_deadline:
        return True
    return False 
```

但我有同样的问题。

我在该字段中有一个信息：`2011-07-02 00:00:00`例如在生成的表单中`ModelForm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-11T08:53:44.357

我有同样的问题，django模型日期时间字段只包含日期（没有时间）

```
now = datetime.datetime.now()

q1=Q()
q1.children.append(Q(datetimefieldFrom__lte=now))
q1.children.append(Q(datetimefieldTo__gte=now)) 
```

前任。现在：“2020-12-11 17:17:58.000000” datetimeFrom ：“2020-12-11 16:17:58.000000” datetimeFrom ：“2020-12-11 18:17:58.000000”

它只是通过“2020-12-11 00:00:00.000000”进行比较

@johnjamesmiller，您的时区问题可以通过修改 setting.py 来解决

```
TIME_ZONE = 'Asia/Hong_Kong'

USE_TZ = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T19:35:10.660

我在 python 2.7.3 和 django 1.3.1 下比较 DateTimeField 和 datetime 时遇到了类似的问题

我认为 DateTimeField 当时没有很好的时区支持，或者我没有正确配置它。

每当我为 datetime 字段指定时区时，我对 DateTimeField > datetime 的所有比较都会失败。

datetime 使用本地中央时间，而 DateTimeField 输入为东部时间。

我最终只是做了一个愚蠢的黑客攻击，将 timedelta(hours=1) 添加到 datetime 中心对象以将其“转换”为东部。

# ms-access - 表完全忽略变量

> ID：11762616
> 
> 赞同：1
> 
> 时间：2012-08-01T15:31:43.137
> 
> 标签：ms-access, vba

```
Private Sub Form_Current()
Dim bytoffcut As Byte
Dim strCriteria
strCriteria = "[WOID] = " & Forms![frmAddStockBooking]![MouldWO]

bytoffcut = Nz(DMax("OffcutNo", "dbo_tblOffcuts", strCriteria), 0) + 1
MsgBox bytoffcut
Me.txtOffcut.Value = bytoffcut

Me.WOID.Value = Forms![frmAddStockBooking]![MouldWO]
Me.txtdate.Value = Now()

End Sub 
```

谁能告诉我为什么这不起作用？当我创建新记录时，该变量的行为与预期一样，其中 bytoffcut 递增 1。但是当我检查表格时，绑定到 txtOffcut 的字段读取 1 而不是增量值。

编辑：此代码正在表单的 On current 属性中使用。当我使用表单上的按钮创建新记录时，Dmax 用于在表中查找最高的 offcut No 值并将其添加到其中。

随着 offcut no txtbox 的增加，这似乎在表单中起作用。但是当我查看表格而不是记录增加的切边时 no 而是所有记录都读取 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:44:41.860

尝试像这样在 DMax 中发送 where 子句，假设表中的 WOID 字段是数字类型而不是文本或日期。

```
"[WOID] = " & Forms![frmAddStockBooking]![MouldWO] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:02:49.177

最好`DMax()`只评估一次表达式，特别是如果`dbo_tblOffcuts`是一个没有可用索引的大型链接表`[WOID]`。

如果您的`DMax()`表达式可以返回 Null，请使用`Nz()`将 Null 转换为零。然后加一个。

```
Dim bytoffcut As Byte
Dim strCriteria
strCriteria = "[WOID] = " & Forms![frmAddStockBooking]![MouldWO]
'Debug.Print strCriteria '
bytoffcut = Nz(DMax("OffcutNo", "dbo_tblOffcuts", _
    strCriteria), 0) + 1
MsgBox bytoffcut
Me.txtOffcut.value = bytoffcut 
```

当其他用户正在编辑时，这可能无法为您提供所需的内容`dbo_tblOffcuts`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:41:31.010

通过为我正在写入的表创建主键，我设法解决了多个记录被更新的问题。

我认为，因为 Access 无法唯一标识记录，它会编辑所有符合条件或类似条件的记录。我自己也不完全确定。

# c++ - boost-threads：如何将 scoped_lock 传递给被调用者？

> ID：11762618
> 
> 赞同：3
> 
> 时间：2012-08-01T15:32:00.467
> 
> 标签：c++, boost, boost-thread, boost-mutex, scoped-lock

我是 boost 线程库的新手。我有一种情况，我获得了`scoped_lock`一个函数，需要在被调用者中等待它。

代码位于以下行：

```
class HavingMutex
{
   public:
   ...
   private:
   static boost::mutex m;
   static boost::condition_variable *c;
   static void a();
   static void b();
   static void d();
}

void HavingMutex::a()
{
    boost::mutex::scoped_lock lock(m);
    ...
    b()          //Need to pass lock here. Dunno how !
}

void HavingMutex::b(lock)
{
    if (some condition)
    d(lock) // Need to pass lock here. How ?
}

void HavingMutex::d(//Need to get lock here)
{
    c->wait(lock); //Need to pass lock here (doesn't allow direct passing of mutex m)
} 
```

基本上，在 function 中`d()`，我需要访问我获得的作用域锁，`a()`以便我可以等待它。我怎么做 ？（其他一些线程会通知）。

或者我可以直接等待互斥锁而不是锁吗？

任何帮助表示赞赏。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:16:03.223

通过引用传递它：

```
void HavingMutex::d(boost::mutex::scoped_lock & lock)
{                                          // ^ that means "reference"
    c->wait(lock);
} 
```

# jquery-deferred - 是否可以重置 jQuery 延迟对象状态？

> ID：11762619
> 
> 赞同：15
> 
> 时间：2012-08-01T15:32:01.657
> 
> 标签：jquery-deferred

是否可以将已解析的 jQuery 对象重置为“未解析”状态并重新启动它的初始化和回调？

我正在做的具体事情是我在本地文件系统 api 上有一个 jQuery 延迟包装器。从那里我为我关心的事情建立了更高级别的延迟：

```
var getFs = defFs.requestQuota(PERSISTENT, 1024*1024)
              .pipe (bytes) -> defFs.requestFs(PERSISTENT, bytes)

var getCacheContents = getFs.pipe (fileSystem) -> 
      defFs.getDirectory('Cache', fileSystem.root).pipe (dir) ->
          defFs.readEntries(dir) 
```

现在大多数时候，当我调用 getCacheContents 时，我不介意返回的记忆值，事实上我更喜欢它。但是，当我想写入缓存时，我真的希望能够重置该管道并让它在下次访问缓存时重新选择和重新扫描缓存。

我可以从 $.Callbacks 拼凑一些东西，但基于延迟的解决方案确实是理想的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-06T16:16:09.857

[不，根据定义](http://wiki.commonjs.org/wiki/Promises)， A`Promise`是一个只能解析一次的事物 - from到OR to 。您将无法使用 jQuery 的s.`unresolved``fulfilled``rejected``Deferred`

您实际搜索的是[Signals](http://13thparallel.com/archive/sig-slots/)。它们将被多次触发，但提供类似的界面。周围有一些实现，您可能会退出[`js-signals`](http://millermedeiros.github.com/js-signals/)或[`wire.js`](https://github.com/cujojs/wire#readme).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:10:35.357

我能找到的唯一解决方案是重置`$.Deferred`对象并从该对象返回新的 Promise。它与一些内部 API 脏检查一起工作（如果某些内容被编辑/删除），但仅重置现有的`$.Deferred`并让它在下一个 Promise 请求时重新解析会更高效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-11T15:06:43.810

一个可能的解决方案的示例是：

```
$.myDeferredList = [];
$.createRestorableDeferred = function(a,b) {
    // JUST BY SIMPLE $.when().then();
    $.myDeferredList[a] = {
        deferred: $.Deferred()
        , then: b
        ,restore : function() {
            $.myDeferredList['myReady'].deferred = $.Deferred();
            $.when($.myDeferredList['myReady'].deferred).then($.myDeferredList['myReady'].then);
        }
        ,resolve : function() {
            $.myDeferredList['myReady'].deferred.resolve();
        }
    }
    $.when($.myDeferredList['myReady'].deferred).then($.myDeferredList['myReady'].then);
    window[a] = $.myDeferredList['myReady'];
}

 var counter = 0;
 $.createRestorableDeferred('myReady', function () {
     console.log('>> myReady WHEN called',++counter);
     $.myDeferredList['myReady'].restore();

 });

// RESOLVING ways

$.myDeferredList['myReady'].deferred.resolve();
$.myDeferredList.myReady.deferred.resolve();
myReady.resolve(); 
```

控制台中的结果：

```
>> myReady 何时调用 1

 >> myReady 何时调用 2

 >> myReady 何时调用 3

```

# html - • 在 IE 中不起作用？

> ID：11762622
> 
> 赞同：12
> 
> 时间：2012-08-01T15:32:03.707
> 
> 标签：html, internet-explorer, html-entities

在设计页面时，这不是可接受的 HTML 代码吗？它在 Chrome、Safari、Firefox、Opera 等中正确呈现...但 IE 字面上输出`& bullet;`

但即使我在此文本框中键入 HTML 代码，它也会给我一个子弹！•

这种方法是否已弃用？我应该求助于 ASCII # 还是什么？

非常感谢所以

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-01T15:38:20.233

尝试使用`&bull;`for •。

# javascript - 将信息从 javascript 传递到 django 应用程序并返回

> ID：11762629
> 
> 赞同：13
> 
> 时间：2012-08-01T15:32:20.857
> 
> 标签：javascript, python, ajax, django

所以我试图基本上建立一个用户选择一个id的网页，然后网页将id信息发送给python，python使用id查询数据库，然后将结果返回到网页显示。

我不太确定该怎么做。我知道如何使用 ajax 调用来调用 python 生成的数据，但我不确定如何将初始 id 信息传达给 django 应用程序。是否可以说，查询 ./app/id (IE /app/8) 之类的 url，然后使用 url 信息给 python 信息？我将如何编辑 urls.py 和 views.py 来做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-01T16:52:34.573

你在谈论AJAX。AJAX 总是需要 3 个部分（从技术上讲，只有两个：Javascript 具有双重功能）。

1.  客户端（在这种情况下为 Javascript）发出请求
2.  服务器（本例中为 Django 视图）处理请求并返回响应
3.  客户端（同样是 Javascript）接收响应并对其进行处理

你还没有指定一个首选的框架，但是如果没有某种 Javascript 框架，你会发疯地做 AJAX，所以我要为你选择 jQuery。该代码可以很容易地适应任何 Javascript 框架：

```
$.getJSON('/url/to/ajax/view/', {foo: 'bar'}, function(data, jqXHR){
    // do something with response
}); 
```

我正在使用`$.getJSON`，这是一种 jQuery 便捷方法，可将 GET 请求发送到 URL 并自动将响应解析为 JSON，将其转换为按`data`此处传递的 Javascript 对象。第一个参数是请求将被发送到的 URL（稍后会详细介绍），第二个参数是一个 Javascript 对象，其中包含应与请求一起发送的数据（如果您不需要，可以省略它发送任何数据），第三个参数是一个回调函数，用于处理成功时服务器的响应。因此，这段简单的代码涵盖了上面列出的第 1 部分和第 3 部分。

下一部分是你的处理程序，在这种情况下当然是一个 Django 视图。视图的唯一要求是它必须返回 JSON 响应：

```
from django.utils import simplejson

def my_ajax_view(request):
    # do something
    return HttpResponse(simplejson.dumps(some_data), mimetype='application/json') 
```

请注意，此视图不接受除 required 之外的任何参数`request`。这是一个有点哲学的选择。恕我直言，以真正的 REST 方式，数据应该与请求一起传递，而不是在 URL 中，但其他人可以并且确实不同意。最终的选择取决于你。

另外，请注意，这里我使用了 Django 的 simplejson 库，它最适合常见的 Python 数据结构（列表、字典等）。如果要返回 Django 模型实例或查询集，则应使用序列化程序库。

```
from django.core import serializers
...
data = serializers.serialize('json', some_instance_or_queryset)
return HttpResponse(data, mimetype='application/json') 
```

现在你有了一个视图，你需要做的就是把它连接到 Django 的 urlpatterns 中，这样 Django 就会知道如何路由请求。

```
urlpatterns += patterns('',
    (r'^/url/to/ajax/view/$', 'myapp.views.my_ajax_view'),
) 
```

这就是哲学差异所在。如果您选择通过 URL 本身传递数据，则需要在 urlpattern 中捕获它：

```
(r'^/url/to/ajax/view/(?P<some_data>[\w-]+)/$, 'myapp.views.my_ajax_view'), 
```

然后，修改您的视图以接受它作为参数：

```
def my_ajax_view(request, some_data): 
```

最后，修改 Javascript AJAX 方法以将其包含在 URL 中：

```
$.getJSON('/url/to/ajax/view/'+some_data+'/', function(data, jqXHR){ 
```

如果您使用请求传递数据的路线，那么您需要注意在视图中正确检索它：

```
def my_ajax_view(request):
    some_data = request.GET.get('some_data')
    if some_data is None:
        return HttpResponseBadRequest() 
```

这应该足以让您使用 Django 实现几乎所有的 AJAX 功能。其他一切都是关于您的视图如何检索数据（手动创建数据、查询数据库等）以及您的 Javascript 回调方法如何处理 JSON 响应。一些提示：

1.  该`data`对象*通常*是一个列表，即使只包括一个项目。如果您知道只有一项，您可以使用`data[0]`. 否则，使用 for 循环访问每个项目：

    ```
    form (var i=0; i<data.length; i++) {
        // do something with data[i]
    } 
    ```

2.  如果`data`or`data[i]`是一个对象（AKA 字典、哈希、键控数组等），您可以通过将键视为属性来访问键的值，即：

    ```
    data[i].some_key 
    ```

3.  通常在处理 JSON 响应和 AJAX 时，通常最好先在浏览器中直接尝试，这样您就可以查看确切的响应和/或验证响应的结构。要在浏览器中查看 JSON 响应，您很可能需要扩展。JSONView（适用于[Firefox](https://addons.mozilla.org/en-us/firefox/addon/jsonview/)和[Chrome](https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc)）将使其能够理解 JSON 并将其显示为网页。如果请求是 GET，您可以使用查询字符串以普通 GET 方式将数据传递给 URL，即`http://mydomain.com/url/to/ajax/view/?some_data=foo`. 如果是 POST，您将需要某种 REST 测试客户端。[RESTClient](https://addons.mozilla.org/en-us/firefox/addon/restclient/)是一个很好的 Firefox 插件。对于 Chrome，您可以尝试[Postman](https://chrome.google.com/webstore/detail/fdmmgilgnpjigdojojpjoooidkmcomcm)。这些也非常适合从 Twitter、Facebook 等学习 3rd-party API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:51:39.007

是的，有可能。如果您将 id 作为参数传递给您将在应用程序中使用的视图，例如： `def example_view (request,id)` 并且在 urls.py 中，您可以使用如下内容： `url(r'^example_view/(?P<id>\d+)/', 'App.views.example_view')`。

url 中的 id`/example_view_template/8`将使用与数字 8 相关的 id 访问结果。例如，例如数据库中特定表的第 8 条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:55:30.430

关于如何从 ajax 请求/url 中捕获信息，通常您可以像在普通的 django 请求中那样执行此操作，检查[url dispatcher 文档](https://docs.djangoproject.com/en/dev/topics/http/urls)并从官方文档中阅读 django 视图。

关于如何返回响应，只需捕获参数，处理您的请求，然后使用适当的模拟类型给出您的响应。

有时您必须将数据[序列化](https://docs.djangoproject.com/en/dev/topics/serialization/)或转换为另一种格式，例如 json，这可以在客户端/js 中更有效地处理

# oracle - 如何在我刚刚在另一个模式中创建的包中执行过程？

> ID：11762633
> 
> 赞同：1
> 
> 时间：2012-08-01T15:32:32.010
> 
> 标签：oracle, stored-procedures, database-permissions

**设置：** 我有两棵在 Oracle 11g 上运行的脚本树——一组确保正确的实例配置，并且所有 DBA 代理帐户都在那里连接到 dbadmin 帐户，另一组构建和修改我们的数据库环境。

**问题：** 代理到 DBADMIN 帐户，第二组脚本运行良好，*除了*一个部分：数据预填充。允许加载数据的过程在适当的模式下创建得很好，如果作为 SYS AS SYSDBA 运行，加载数据的脚本运行得很好，但是当我*在创建它调用的过程后立即*尝试以 DBADMIN 运行它时接听`PLS-00904: insufficient privilege to access object schema.package`每个电话。我什至无法拥有脚本`GRANT EXECUTE ON schema.package TO DBADMIN`，因为（当然）会产生预期的`ORA-01749: you may not GRANT/REVOKE privileges to/from yourself`错误。

**更简单地说：**

（作为 DBADMIN :)

```
 ...
CREATE OR REPLACE PACKAGE BODY other_schema.package_name IS
 ...
PROCEDURE add_data(...)
 ... 
```

（成功，并且可以测试工作）（后来，在由同一父脚本调用的另一个脚本中，仍然是 DBADMIN :)

```
BEGIN
   other_schema.package_name.add_data(...);
   ... 
```

（引发上面给出的 PLS-00904 - 权限不足）

关于如何让 DBADMIN 帐户 EXECUTE 访问它尚未创建的包的任何想法，或者 DBADMIN 如何在不停止整个脚本流的情况下自行访问，注销并以 SYS AS SYSDBA 身份重新登录以授予它？（这里的重点是在最初的“运行这个脚本树”之外有零手动步骤，并且在使用 SYS AS SYSDBA 时只有一次。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:04:35.710

您可以授予 DBADMIN EXECUTE ANY PROCEDURE 权限。这将允许它，呃，执行任何程序来运行任何其他用户拥有的程序。

与其他 ANY 程序一样，它非常强大，不应轻易授予。（事实上​​，它是最强大的 ANY 特权之一）。

# opencv - 校准 Opencv

> ID：11762637
> 
> 赞同：0
> 
> 时间：2012-08-01T15:32:49.220
> 
> 标签：opencv, coordinates, camera-calibration

我正在尝试使用 Opencv 从六个棋盘图像中找到相机外在因素。我的输出是：

```
<Extrinsic_Parameters type_id="opencv-matrix"><rows>8</rows><cols>6</cols><dt>d</dt><data>
1.7261576010447846e-01 3.1158880577193560e-01 1.2720406228471280e-02
-1.1592911113815259e+02 -2.2406582979927950e+02
8.1420941356557194e+02 3.9346701007260626e-01 6.9003564777197379e-01
-1.3469982321835601e+00 -8.6826153197023956e+01
1.6051013708505607e+02 7.2011353507821275e+02
-2.7069532546117758e-01 2.2148718738805429e-01
3.6171900096916804e-01 -5.2552433323678208e+01
-2.0518988227964823e+02 6.4574752691945832e+02
-1.0899083613916538e-01 2.7649799933587743e-01
1.4885762528126442e-03 -1.6853141436409484e+02
-1.3942460278197393e+02 6.7605597445537410e+02
-2.6583012230541703e-01 4.5957884020124173e-01
1.3218319619927716e+00 1.4402207754903725e+02
-2.3447541083582803e+02 6.3522213346840215e+02
4.3950055218555362e-01 3.1960642369670372e-01 1.6428303526609498e+00
3.6431577304606526e+02 -1.3627914048252993e+02
6.7111839770203858e+02 2.2222642699596459e-01 3.7120066692341575e-01
1.8680367378145426e+00 7.2471813700978785e+01
-1.4921069561111017e+02 7.8381396962300209e+02
-5.5897629846263175e-02 5.0568582309311438e-01
1.7593139413155239e+00 1.8515422152916943e+02
-1.7998599745081759e+02 6.3305731735881432e+02</data></Extrinsic_Parameters> 
```

和：

```
<Distortion_Coefficients type_id="opencv-matrix"><rows>5</rows><cols>1</cols><dt>d</dt><data>
-3.0246684876115215e-01 1.5880077551448199e-01 0\. 0.
-6.9087472680662912e-02</data></Distortion_Coefficients> 
```

现在，我如何计算屏幕上点 (u,v) 的真实世界坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:49:53.093

通过外部和内部参数，我发现：

*   Pc = [R|t] * Pw

其中 Pc 和 Pw 是凸轮和世界坐标，R 是旋转矩阵，t 是平移向量

# asp.net-mvc - 移动设备上的 MVC3 vCard 下载失败

> ID：11762638
> 
> 赞同：2
> 
> 时间：2012-08-01T15:32:51.030
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试编写一个 MVC3 应用程序，该应用程序动态构建一个 vCard(.vcf) 文件，供人们在扫描 QR 码时在移动设备上下载。[我在这里](http://weblogs.asp.net/gunnarpeipman/archive/2010/05/22/creating-vcard-action-result.aspx)找到了一个示例来构建和返回 vCard。经过一些操作后，我能够让它在我的台式机上运行，​​但每次我尝试在移动设备上下载文件时，下载都会失败。我曾认为它发送的标头有问题，所以我做了一些挖掘并在[此处](http://www.digiblog.de/2011/04/android-and-the-download-file-headers/)找到了一些有关 android 的 HTTP 标头的有用信息。不幸的是，即使调整标题也没有改变任何东西。

第一部分是控制器，稍后将采用 URL 参数。保持简单的测试。

```
public class APIController : Controller
{

public vCardResult vCard()
{
    vCard card = new vCard
    {
        FirstName = "First",
        LastName = "Last",
        StreetAddress = "70 Street Adr.",
        City = "Atlanta",
        State = "GA",
        CountryName = "United States",
        Mobile = "5558675309",
        Organization = "MyCompany",
        HomePage = "www.Google.com",
        JobTitle = "Software Developer",
        Zip = "30318",
        Email = "FirstLast@MyCompany.com",
    };

    return new vCardResult(card);
} 
```

这是 vCard 模型

```
public class vCard
{
    //I cut out the properties to save space

    public override string ToString()
    {

        var builder = new StringBuilder();

        builder.AppendLine("BEGIN:VCARD");
        builder.AppendLine("VERSION:2.1");
        builder.AppendLine("FN:" + FirstName + " " + LastName);
        builder.AppendLine("N:" + LastName + ";" + FirstName);
        builder.AppendLine("TEL;CELL:" + Mobile);
        builder.AppendLine("TEL:");
        builder.AppendLine("EMAIL;INTERNET:" + Email);
        builder.AppendLine("TEL;FAX:");
        builder.AppendLine("TITLE:" + JobTitle);
        builder.AppendLine("ORG:" + Organization);
        builder.AppendLine("ADR:;;" + StreetAddress + ";" + City + ";" + ";" + Zip + ";");
        builder.AppendLine("REV:20120730T15034z");
        builder.AppendLine("END:VCARD");

        return builder.ToString();

    }
} 
```

最后是动作结果

```
public class vCardResult : ActionResult
{
    private vCard _card;

    protected vCardResult() { }

    public vCardResult(vCard card)
    {
        _card = card;
    }

    public override void ExecuteResult(ControllerContext context)

    {
        var response = context.HttpContext.Response;
        response.ContentType = "text/vcard";
        response.AddHeader("Content-Disposition", "attachment; fileName=\"" + _card.FirstName + "_" + _card.LastName + ".VCF\"");

        var cardString = _card.ToString();
        var inputEncoding = Encoding.Default;
        var outputEncoding = Encoding.GetEncoding("windows-1257");
        var cardBytes = inputEncoding.GetBytes(cardString);

        var outputBytes = Encoding.Convert(inputEncoding,
                                outputEncoding, cardBytes);

        response.OutputStream.Write(outputBytes, 0, outputBytes.Length);
    }
} 
```

与我之前列出的示例没有太大不同，但我希望在我走得更远之前至少能实现这个功能。

我检查了从服务器发送的响应以及类似工作系统（我无法访问源代码的系统）的响应，但我没有看到很多差异，所以我不确定他们的 vCard 为什么会打开手机的联系人列表添加为新联系人，我的下载失败。答复如下。

**示例响应（工作）：**

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Disposition: attachment; filename=5240000053568089.vcf
Content-Type: text/x-vcard
Transfer-Encoding: chunked
Date: Tue, 31 Jul 2012 21:18:31 GMT

110
BEGIN:VCARD
VERSION:2.1
FN:First Last
N:Last;First
TEL;CELL:5558675309
TEL:
EMAIL;INTERNET:FirstLast@MyCompany.com
TEL;FAX:
TITLE:Software Developer
ORG:MyCompany
ADR:;;70 Street Adr.;Atlanta;GA;30318;
REV:20120523T150346Z
END:VCARD

0 
```

***我的*应用程序的响应**

```
HTTP/1.1 200 OK
Cache-Control: private
Transfer-Encoding: chunked
Content-Type: text/vcard
Server: Microsoft-IIS/7.0
X-AspNetMvc-Version: 3.0
Content-Disposition: attachment; fileName=First_Last.vcf
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 31 Jul 2012 20:14:02 GMT

105
BEGIN:VCARD
VERSION:2.1
FN:First Last
N:Last;First
TEL;CELL:5558675309
TEL:
EMAIL;INTERNET:FirstLast@MyCompany.com
TEL;FAX:
TITLE:Software Developer
ORG:MyCompany
ADR:;;70 Street Adr.;Atlanta;GA;30346;
REV:20120730T15034z
END:VCARD

0 
```

提前感谢您阅读本文以及您能够提供的任何帮助/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T13:29:00.900

*   首先需要将内容类型更改为：text/x-vcard
*   然后我发现只有 ASP MVC FileContentResult 有效。因此，对于通过 asp 获取联系而不是重写 HTTP 标头的适当方式，只需使用上面的行： File(outputBytes, "text/x-vcard", Guid.NewGuid().ToString());
*   第三不知道它是否 100% 正确，但您必须采取 GET 请求并包含“.vcf”扩展名，例如：somesite.com/ControllerName/ActionName.vcf

但是网络配置的标准设置不允许点所以

*   Forth 为您的配置添加一些改进

    <system.web>
    <httpHandlers> <add path=" *.less" verb="GET" type="dotless.Core.LessCssHttpHandler, dotless.Core" /> <add path=".vcf* " type="System.Web .Handlers.TransferRequestHandler" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" /> </httpHandlers> </system.web> <system.webServer> <modules runAllManagedModulesForAllRequests="true" /> <validation validateIntegratedModeConfiguration="false" /> <handlers> <add name="dotless" path=" *.less" verb="GET" type="dotless.Core.LessCssHttpHandler,dotless.Core" resourceType="File" preCondition= "" /> <add name="ApiURIs-ISAPI-Integrated-4.0“路径=”*.vcf" type="System.Web.Handlers.TransferRequestHandler" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" preCondition="integratedMode,runtimeVersionv4.0" /> </handlers> </ system.web服务器>

这是通过 android 浏览器下载 vcard 的一些棘手方法，但它表示通过其他手机浏览器解决下载联系人更复杂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:06:08.567

你从来没有关闭你的：

```
public class APIController : Controller 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-27T20:20:57.757

```
using Maavak.Models;
using Maavak.Models.Vcard;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using System;
using System.Diagnostics;
using System.Text;

namespace Maavak.Controllers
{
//[Route("api/[controller]")]
public class VCardTestController : Controller
{
    private readonly IHttpContextAccessor _httpContextAccessor;
    public VCardTestController(
        IHttpContextAccessor httpContextAccessor
        )
    {
        _httpContextAccessor = httpContextAccessor;
        _vcard = new Vcard
        {
            FirstName = "First",
            LastName = "Last",
            StreetAddress = "70 Street Adr.",
            City = "Atlanta",
            State = "GA",
            CountryName = "United States",
            Mobile = "5558675309",
            Organization = "MyCompany",
            HomePage = "www.Google.com",
            JobTitle = "Software Developer",
            Zip = "30318",
            Email = "FirstLast@MyCompany.com",
        };
    }

    private readonly Vcard _vcard;

    [Route("vcardtest.vcf")]
    public IActionResult Get()
    {
        try
        {
            const string text_x_vcard = "text/x-vcard";
            HttpResponse response = _httpContextAccessor.HttpContext.Response;
            _httpContextAccessor.HttpContext.Response.ContentType = "text/vcard";
            _httpContextAccessor.HttpContext.Response.Headers.Add("Content-Disposition", "attachment; fileName=\"" + _vcard.FirstName + "_" + _vcard.LastName + ".VCF\"");

            string cardString = _vcard.ToString();
            Encoding inputEncoding = Encoding.Default;
            Encoding outputEncoding = Encoding.GetEncoding("windows-1255");
            byte[] cardBytes = inputEncoding.GetBytes(cardString);

            byte[] outputBytes = Encoding.Convert(inputEncoding,
                                    outputEncoding, cardBytes);

            return Content(cardString, text_x_vcard, Encoding.UTF8);
        }
        catch (Exception ex)
        {
            Debug.WriteLine($"[{ ClsGlobal.GetCurrentMethod() }] { ex.Message } : { ex.InnerException } - {ex.StackTrace}");
            return NotFound();
        }
    }
} 
```

}

这就是课堂

```
using System.Text;

namespace Maavak.Models.Vcard
{
public class Vcard
{
    public string FirstName { get; set; }
    public string CountryName { get; set; }
    public string LastName { get; set; }
    public string StreetAddress { get; set; }
    public string Organization { get; set; }
    public string Zip { get; set; }
    public string State { get; set; }
    public string City { get; set; }
    public string Mobile { get; set; }
    public string LandLine { get; set; }
    public string Fax { get; set; }
    public string HomePage { get; set; }
    public string Email { get; set; }
    public string JobTitle { get; set; }

    public override string ToString()
    {

        var builder = new StringBuilder();

        builder.AppendLine("BEGIN:VCARD");
        builder.AppendLine("VERSION:2.1");
        builder.AppendLine($"N;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:{ LastName };{ FirstName};;;;");
        builder.AppendLine($"FN;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:{ FirstName } { LastName }");
        //builder.AppendLine("FN:" + FirstName + " " + LastName);
        //builder.AppendLine("N:" + LastName + ";" + FirstName);
        if (Mobile != null)
            builder.AppendLine("TEL;CELL:" + Mobile);
        if (LandLine != null)
            builder.AppendLine("TEL;MOME:" + LandLine);
        if (Email != null)
            builder.AppendLine("EMAIL;INTERNET:" + Email);
        if (Fax != null)
            builder.AppendLine("TEL;FAX:");
        if (JobTitle != null)
            builder.AppendLine("TITLE:" + JobTitle);
        if (Organization != null)
            builder.AppendLine("ORG:" + Organization);
        if (City != null)
            builder.AppendLine("ADR:;;" + StreetAddress + ";" + City + ";" + ";" + Zip + ";");
        //builder.AppendLine("REV:20120730T15034z");
        builder.AppendLine("END:VCARD");
        return builder.ToString();
    }

} 
```

}

工作演示 [在这里](https://maavak.taboil.com/vcardtest.vcf)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-27T21:14:34.093

```
using Maavak.Models;
using Maavak.Models.Vcard;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using System;
using System.Diagnostics;
using System.Text;

namespace Maavak.Controllers
{
//[Route("api/[controller]")]
public class VCardController : Controller
{
    private readonly IHttpContextAccessor _httpContextAccessor;
    public VCardController(
        IHttpContextAccessor httpContextAccessor
        )
    {
        _httpContextAccessor = httpContextAccessor;
    }

    [Route("{FirstName}-{LastName}-{Mobile}-{LandLine}-{Email}.vcf")]
    public IActionResult Get(
        string firstName,
        string lastName,
        string mobile,
        string landLine,
        string email
        )
    {
        try
        {
            Vcard _vcard = new Vcard()
            {
                FirstName = firstName,
                LastName = lastName,
                Mobile = mobile,
                LandLine = landLine,
                Email = email
            };
            const string text_x_vcard = "text/x-vcard";
            HttpResponse response = _httpContextAccessor.HttpContext.Response;
            _httpContextAccessor.HttpContext.Response.ContentType = "text/vcard";
            _httpContextAccessor.HttpContext.Response.Headers.Add("Content-Disposition", "attachment; fileName=\"" + _vcard.FirstName + " " + _vcard.LastName + ".VCF\"");

            return Content(_vcard.ToString(), text_x_vcard, Encoding.UTF8);
        }
        catch (Exception ex)
        {
            Debug.WriteLine($"[{ ClsGlobal.GetCurrentMethod() }] { ex.Message } : { ex.InnerException } - {ex.StackTrace}");
            return NotFound();
        }
    }
} 
```

}

然后像这样使用它

[https://maavak.taboil.com/first-last-55555-66666-first@last.com.vcf](https://maavak.taboil.com/first-last-55555-66666-first@last.com.vcf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-27T22:40:02.293

此解决方案适用于希伯来字符

```
using Maavak.Models;
using Maavak.Models.Vcard;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using System;
using System.Diagnostics;
using System.Net;
using System.Text;

namespace Maavak.Controllers
{
//[Route("api/[controller]")]
public class VCardController : Controller
{
    private readonly IHttpContextAccessor _httpContextAccessor;
    public VCardController(
        IHttpContextAccessor httpContextAccessor
        )
    {
        _httpContextAccessor = httpContextAccessor;
    }

    [Route("{FirstName}-{LastName}-{Mobile}-{LandLine}-{Email}.vcf")]
    public IActionResult Get(
        string firstName,
        string lastName,
        string mobile,
        string landLine,
        string email
        )
    {
        const string text_x_vcard = "text/x-vcard";
        try
        {
            Vcard _vcard = new Vcard()
            {
                FirstName = firstName,
                LastName = lastName,
                Mobile = mobile,
                LandLine = landLine,
                Email = email
            };

            _httpContextAccessor.HttpContext.Response.Headers.Add("Content-Disposition", "attachment; fileName=\"" +
                CleanNonAsciiForVcardHeadr(_vcard.FirstName) + " " +
                CleanNonAsciiForVcardHeadr(_vcard.LastName) + ".VCF\"");

            return Content(_vcard.ToString(), text_x_vcard, Encoding.UTF8);
        }
        catch (Exception ex)
        {
            Debug.WriteLine($"[{ ClsGlobal.GetCurrentMethod() }] { ex.Message } : { ex.InnerException } - {ex.StackTrace}");
            return NotFound();
        }
    }
    private string CleanNonAsciiForVcardHeadr(string str)
    {
        return WebUtility.UrlEncode(str).Replace("+", "%20");
    }
}
} 
```

课程是这样的

```
using System.Net;
using System.Text;

namespace Maavak.Models.Vcard
{
public class Vcard
{
    public string FirstName { get; set; }
    public string CountryName { get; set; }
    public string LastName { get; set; }
    public string StreetAddress { get; set; }
    public string Organization { get; set; }
    public string Zip { get; set; }
    public string State { get; set; }
    public string City { get; set; }
    public string Mobile { get; set; }
    public string LandLine { get; set; }
    public string Fax { get; set; }
    public string HomePage { get; set; }
    public string Email { get; set; }
    public string JobTitle { get; set; }

    public override string ToString()
    {

        var builder = new StringBuilder();
        string n = $"{ CleanNonAsciiForVcard(LastName) };{ CleanNonAsciiForVcard(FirstName) };;;";
        string fn = $"{ CleanNonAsciiForVcard(FirstName) } { CleanNonAsciiForVcard(LastName) }";
        builder.AppendLine("BEGIN:VCARD");
        builder.AppendLine("VERSION:2.1");
        builder.AppendLine($"N;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:{ n }");
        builder.AppendLine($"FN;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:{ fn }");
        //builder.AppendLine("FN:" + FirstName + " " + LastName);
        //builder.AppendLine("N:" + LastName + ";" + FirstName);
        if (Mobile != null)
            builder.AppendLine("TEL;CELL:" + Mobile);
        if (LandLine != null)
            builder.AppendLine("TEL;HOME:" + LandLine);
        if (Email != null)
            builder.AppendLine("EMAIL;INTERNET:" + Email);
        if (Fax != null)
            builder.AppendLine("TEL;FAX:");
        if (JobTitle != null)
            builder.AppendLine("TITLE:" + JobTitle);
        if (Organization != null)
            builder.AppendLine("ORG:" + Organization);
        if (City != null)
            builder.AppendLine("ADR:;;" + StreetAddress + ";" + City + ";" + ";" + Zip + ";");
        //builder.AppendLine("REV:20120730T15034z");
        builder.AppendLine("END:VCARD");
        return builder.ToString();
    }
    private string CleanNonAsciiForVcard(string str)
    {
        return WebUtility.UrlEncode(str).Replace("+", "=20").Replace("%", "=");
    }
}
} 
```

像这样使用它

[https://maavak.taboil.com/first-last-55555-66666-first@last.com.vcf](https://maavak.taboil.com/first-last-55555-66666-first@last.com.vcf)

或者

[https://maavak.taboil.com/first-last-55555-%20-%20.vcf](https://maavak.taboil.com/first-last-55555-%20-%20.vcf)

[https://maavak.taboil.com/עברית-עברית%20משפחה-55555-%20-%20.vcf](https://maavak.taboil.com/%D7%A2%D7%91%D7%A8%D7%99%D7%AA-%D7%A2%D7%91%D7%A8%D7%99%D7%AA%20%D7%9E%D7%A9%D7%A4%D7%97%D7%94-55555-%20-%20.vcf)

# javascript - 嵌入 swf 作为预加载器

> ID：11762643
> 
> 赞同：-1
> 
> 时间：2012-08-01T15:32:54.020
> 
> 标签：javascript, html, actionscript-3, flash, wordpress

我有一个带有动画条和百分比的预加载器文件。总而言之，一个 swf 文件；）

是否有任何脚本可以让我在我的 Wordpress 网站上使用它作为预加载器？如果是这样，代码是什么以及在哪里嵌入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:39:57.127

您要预加载的是什么？您需要一种方法来指定您正在加载的文件是什么，或者通过修改预加载器的 AS3 代码，或者可能通过在嵌入代码中使用对象键。

# javascript - JavaScript 租借日期逻辑

> ID：11762646
> 
> 赞同：2
> 
> 时间：2012-08-01T15:33:01.443
> 
> 标签：javascript, html, datetime, pseudocode

所以，基本上我正在构建一个租赁表格，其中您有三个基本的月、日、年下拉菜单，分别是“租金来自”，然后是另外三个“租金截止”。

这很容易，我什至得到了不错的闰年支持等。问题在于根据“租金来源”生成“租金”。我希望“租到”在后记下拉列表中仅显示接下来的五天，但我很难制定出有效执行此操作的逻辑。

此外，范围是可变的，因此我正在尝试使用一个函数，该函数采用“租赁长度”参数来影响更改。该代码还使用参考点。因此，选择下拉菜单是“pick_up_day”、“pick_up_month”等。这是为了尝试使代码可移植到具有一致 ID 的 HTML 元素的多个项目中。

这是我的基本逻辑以及到目前为止的内容：

这是设置起始日期等的代码。

```
function populate_dates(identifier) {
    "use strict";
    var i, currentday, node, textbox, maxdays;
    while (document.getElementById(identifier + "days").hasChildNodes()) {
        document.getElementById(identifier + "days").removeChild(document.getElementById(identifier + "days").firstChild);
    }
    currentday = new Date();
    switch (parseInt(document.getElementById(identifier + "month").value, 10)) {
    case 2:
        if (new Date(currentday.getFullYear(), 1, 29).getDate() === 29) {
            maxdays = 29;
        } else {
            maxdays = 28;
        }
        break;
    case 9:
    case 4:
    case 6:
    case 11:
        maxdays = 30;
        break;
    default:
        maxdays = 31;
        break;
    }
    for (i = 1; i <= maxdays; i = i + 1) {
        node = document.createElement("option");
        textbox = document.createTextNode(i);
        node.value = i;
        node.appendChild(textbox);
        document.getElementById(identifier + "days").appendChild(node);
    }
}

window.onload = function() {
    "use strict";
    var currentday, i, node, textbox;
    currentday = new Date();
    for (i = 0; i <= 1; i = i + 1) {
        node = document.createElement("option");
        textbox = document.createTextNode(currentday.getFullYear() + i);
        node.value = currentday.getFullYear() + i;
        node.appendChild(textbox);
        document.getElementById("pick_up_year").appendChild(node);
    }
    document.getElementById("pick_up_month").onchange = function () {
        populate_dates("pick_up_");
    };
    populate_dates("pick_up_");
}; 
```

现在对于关于“直到”日期的逻辑，我已经制定了一些这样的伪代码，但对于这样一个简单的任务来说，它似乎过于复杂：

```
function a(referencer, ref1, ref2, rentlength) {
    //Make datetime object out of ref1's current date;
    datetime.setDays(datetime.getDate() + rentlength)
    for (i = 0; i <= rentlength; i = i + 1) {
        datetime.setDays(datetime.getDate() + i);
        outmatrix[outmatrix.length] = [getDates, getMonth, getYear];
    }
    outmatrix.removeduplicates;
    date_generator(ref2, outmatrix)
}

function date_generator(referencer, inputmatrix) {
    Clean up referencer
    Loop through, create nodes based on array[y+1][x];
} 
```

有没有更好的方法来做到这一点，我只是没有看到？在删除重复项的同时将 Datetime 对象转换为三个下拉列表的好方法是什么？有没有比我现在更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:57:21.127

在逻辑方面，您需要将日期设置为开始日期和租赁时间的总和，采用 DATE 格式。

# c# - 如何在运行时从 NUnit 测试运行中获取单元测试方法属性？

> ID：11762648
> 
> 赞同：11
> 
> 时间：2012-08-01T15:33:00.920
> 
> 标签：c#, reflection, attributes, nunit

我将有关给定测试的各种信息（多个错误跟踪系统的 ID）存储在一个属性中，如下所示：

```
[TestCaseVersion("001","B-8345","X543")]
public void TestSomethingOrOther() 
```

为了在测试过程中获取此信息，我编写了以下代码：

```
 public string GetTestID()
     {
        StackTrace st = new StackTrace(1);
        StackFrame sf;
        for (int i = 1; i <= st.FrameCount; i++)
        {
            sf = st.GetFrame(i);
            if (null == sf) continue;
            MethodBase method = sf.GetMethod();
            if (method.GetCustomAttributes(typeof(TestAttribute), true).Length == 1)
            {
                if (method.GetCustomAttributes(typeof(TestCaseVersion), true).Length == 1)
                {
                    TestCaseVersion tcv =
                        sf.GetMethod().GetCustomAttributes(typeof(TestCaseVersion), true).OfType<TestCaseVersion>()
                            .First();
                    return tcv.TestID;
                }
            }
        } 
```

问题是在发布模式下通过 NUnit 运行测试时，应该具有测试名称和这些属性的方法被以下替换：

```
System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at NUnit.Core.Reflect.InvokeMethod(MethodInfo method, Object fixture, Object[] args) 
```

**更新** 对于任何感兴趣的人，我最终以以下方式实现代码（以便可以访问任何属性值，而无需更改任何使用 TestCaseVersion 属性的现有代码：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Interface | AttributeTargets.Method, AllowMultiple = false)]
public class TestCaseVersion : PropertyAttribute
{
   public TestCaseVersion(string testCaseCode, string story, string task, string description)
   {
      base.Properties.Add("TestId", testCaseCode);
      base.Properties.Add("Description", description);
      base.Properties.Add("StoryId", story);
      base.Properties.Add("TaskId", task);
    }
}

public string GetTestID()
{
   return TestContext.CurrentContext.Test.Properties["TestId"];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T06:16:21.043

如果您可以使用单值测试用例版本字符串（即`"001, B-8345, X543"`代替`"001","B-8345","X543"`），您应该能够利用*NUnit 2.5.7* 和更高版本中提供的[TestContext](http://nunit.com/index.php?p=testContext&r=2.6)功能。

 *具体来说，您可以像这样定义和使用测试上下文[Property](http://nunit.com/index.php?p=property&r=2.6)属性*TestCaseVersion*：

```
[Test, Property("TestCaseVersion", "001, B-8345, X543")]
public void TestContextPropertyTest()
{
    Console.WriteLine(TestContext.CurrentContext.Test.Properties["TestCaseVersion"]);
} 
```

**更新**顺便说一句，如果您*确实*想使用测试用例版本的多值表示，您可以定义多个属性，如下所示：

```
[Test, Property("MajorVersion", "001"), 
 Property("MinorVersion", "B-8345"), Property("Build", "X543")]
public void TestContextPropertyTest()
{
    Console.WriteLine(TestContext.CurrentContext.Test.Properties["MajorVersion"]);
    Console.WriteLine(TestContext.CurrentContext.Test.Properties["MinorVersion"]);
    Console.WriteLine(TestContext.CurrentContext.Test.Properties["Build"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:17:58.423

可能是我不明白你的想法，但为什么不使用更简单的解决方案呢？

```
[TestCase(TestName = "001, B-8345, X543")]
public void TestSomethingOrOther() 
```*

# c# - 使用 RepositoryItemTextEdit 禁用 gridview 单元格编辑

> ID：11762649
> 
> 赞同：1
> 
> 时间：2012-08-01T15:33:04.977
> 
> 标签：c#, devexpress

我正在尝试禁用对特定 gridview 单元格的编辑。

我正在使用具有以下属性的 RepositoryItemTextEdit：

```
 repositoryItemTextEdit.AllowFocused = false;

     m_repositoryItemTextEdit.ReadOnly = true; 
```

但是，即使我无法更改值，我仍然可以单击单元格并且存在编辑光标。

有没有办法摆脱文本光标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T12:38:40.393

我遇到了同样的问题，在禁用后单元格和编辑光标存在。

我得到了解决方案。

```
private void tree_ShowingEditor(object sender, CancelEventArgs e)
    {
        Nodes.PromptNode promptNode = tree.FocusedNode as Nodes.PromptNode;

        if (tree.FocusedColumn == valueColumn && promptNode.PromptResult.ValueType.MyValueType == ValueType.ValueTypeOptions.Calculated)
        {
            e.Cancel = true;
        }

    } 
```

使用`ShowingEditor`事件取消它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:10:49.623

基本上，您必须处理`ShownEditor`GridView 的事件。在那里，您测试聚焦的行和列，如果单元格应该是只读的，您可以：

```
grdView.ActiveEditor.Properties.ReadOnly = True 
```

为了让用户更好理解，您还可以处理`CustomDrawCell`事件，并将背景颜色（e.Appearance）设置为用于只读控件的颜色。

这可能有点离题，因为它并没有摆脱光标；但我看不出这会有什么用。

# c++ - 更快的方法来做到这一点？

> ID：11762652
> 
> 赞同：-5
> 
> 时间：2012-08-01T15:33:13.383
> 
> 标签：c++, visual-c++

有没有更好的方法来做类似...

```
int VarableNumberOne = RandomNumberGenerator();
int VarableNumberTwo = RandomNumberGenerator();

if(VarableNumberOne == 4 || VarableNumberOne == 8 || VarableNumberOne == 12)
{
//do code
}
else if(VarableNumberTwo == 4 || VarableNumberTwo == 8 || VarableNumberTwo == 12)
{
//do code
} 
```

能写出最少代码的人将获胜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:38:47.430

这取决于`RandomNumberGenerator`返回的内容。假设 4、8 和 12 是它返回的唯一 4 的倍数，您可以执行以下操作：

```
if (VarableNumberOne % 4 == 0)
{
    //do code
}
else if (VarableNumberTwo % 4 == 0)
{
    //do code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:34:17.053

您需要检查所需值的反向掩码以及值是否不为零。

```
int a = RandomNumberGenerator();
int b = RandomNumberGenerator();

if( a && !( a & ~12 ) )
{
//do code
}
else if( b && !( b & ~12 ) )
{
//do code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:41:51.560

```
if (variableNumberOne & 12) {
     // ...
} else if (variableNumberTwo & 12) {
    // ...
} 
```

# android - 使用 NDK 时如何正确命名本机函数

> ID：11762654
> 
> 赞同：1
> 
> 时间：2012-08-01T15:33:20.850
> 
> 标签：android, android-ndk, java-native-interface

我正在尝试运行我的应用程序，但是每当我调用本机函数时，它都会给我一个错误并且程序崩溃。我确信这与我在 Java 或 C 中如何命名某些东西有关。

这是我对 Java 函数的调用：

```
package my.commander;

public class RelayAPIModel {

    public static class NativeCalls {

        static {
            System.loadLibrary( "RelayAPI");
        }

        public native static byte InitRelayJava();

        public native static void FreeRelayJava();
    } 
```

以下是`.c`文件中的函数：

```
void Java_my_commander_RelayAPIModel_FreeRelayJava( JNIEnv * env, jobject this ) {
    RelayAPI_DataValid = 0;
    RelayAPI_SetBaud = 0;
    RelayAPI_get = 0;
    RelayAPI_put = 0;
    RelayAPI_flush = 0;
    RelayAPI_delay = 0;
    RelayAPI_initilized = 0;
}

BYTE Java_my_commander_RelayAPIModel_InitRelayJava( JNIEnv *env, jobject obj  ) {
    ...
    ...
} 
```

它们在`.h`文件中：

```
void Java_my_commander_RelayAPIModel_FreeRelayJava( JNIEnv * env, jobject obj );

BYTE Java_my_commander_RelayAPIModel_InitRelayJava( JNIEnv *env, jobject obj ); 
```

这是我的`LogCat:`

```
08-01 09:58:21.933: E/AndroidRuntime(17170): FATAL EXCEPTION: main
08-01 09:58:21.933: E/AndroidRuntime(17170): java.lang.UnsatisfiedLinkError: InitRelayJava
08-01 09:58:21.933: E/AndroidRuntime(17170):    at my.eti.commander.RelayAPIModel$NativeCalls.InitRelayJava(Native Method)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at my.eti.commander.MainMenu.initMain(MainMenu.java:241)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at my.eti.commander.MainMenu.onCreate(MainMenu.java:81)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.os.Looper.loop(Looper.java:130)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 09:58:21.933: E/AndroidRuntime(17170):    at dalvik.system.NativeStart.main(Native Method) 
```

我现在想澄清一下，我已尝试将 C 方法名称更改为`Java_my_commander_RelayAPIModel_NativeCalls_FreeRelayJava`and `Java_my_commander_RelayAPIModel_NativeCalls_InitRelayJava`。该应用程序仍然无法启动，这就是 LogCat：

```
08-01 11:22:10.735: E/AndroidRuntime(17441): FATAL EXCEPTION: main
08-01 11:22:10.735: E/AndroidRuntime(17441): java.lang.UnsatisfiedLinkError: InitRelayJava
08-01 11:22:10.735: E/AndroidRuntime(17441):    at my.eti.commander.RelayAPIModel$NativeCalls.InitRelayJava(Native Method)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at my.eti.commander.MainMenu.initMain(MainMenu.java:241)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at my.eti.commander.MainMenu.onCreate(MainMenu.java:81)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.os.Looper.loop(Looper.java:130)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 11:22:10.735: E/AndroidRuntime(17441):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

* * *

现在，我认为错误在于上面的代码。如果你们都认为这没什么问题，我将在此处添加更多信息，以防万一问题出在其他地方。

我正在创建的这个应用程序使用上面的函数来调用一个已经使用了一段时间的库。该库以前用于调用 Palm Pilot 程序中的函数，该程序利用了 Palm 的蓝牙功能。由于 Android 设备具有不同的蓝牙库/功能，我将代码添加到本机库以调用 BACK 到 java 代码，以访问 Android 设备的蓝牙功能。我不想在这里发布与此相关的所有代码，但如果有人觉得需要发布它，我会的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T15:53:00.587

错误消息说它位于：

```
my.eti.commander.RelayAPIModel$NativeCalls.InitRelayJava (Native Method) 
```

因此，请确保：

*   `native`方法声明确实在类内部`RelayAPIModel`，而不是`RelayAPIModel.NativeCalls`嵌套类内部。
*   Java 端的包名`my.commander`与`my.eti.commander`

编辑：或者你可以在 C 端修复它。如果你想在嵌套类中创建本地方法，它的正确名称应该是：

```
Java_my_commander_RelayAPIModel_00024NativeCalls_InitRelayJava() 
```

00024 是 $ 字符的代码，它是 Java 内部的嵌套类分隔符。此外，第二个参数 ( `jobject Obj`) 的含义会有所不同 - 不是 的`this`指针/类指针`RelayAPIModel`，而是`RelayAPIModel.NativeCalls`. 您将无法使用它来解析/调用`RelayAPIModel`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T15:39:15.213

您可以使用 javah 生成具有正确命名的本机文件的 .h 文件：

```
javah -jni -classpath bin/classes com.example.app.MyClass 
```

# c# - IHttpModule 和线程

> ID：11762656
> 
> 赞同：1
> 
> 时间：2012-08-01T15:33:24.350
> 
> 标签：c#, asp.net, multithreading, ihttpmodule

我有一个实现[IHttpModule](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)的类。这是一个帮助我的应用程序防御 DDOS 攻击的支持类。实现该`BeginRequest`方法后，我尝试调试我的代码，并且由于某种原因，每次调试该类时，我在 Visual Studio 中有多个线程。我不明白为什么突然间，在我的本地机器上运行这个应用程序时，我得到了几个线程，而且它只发生在这个类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:31:02.703

HttpModule 可能会拦截对您的应用程序的所有请求，包括文件（js、css、图像等）

查看每个请求的 Request 对象，并查看 Url 属性以了解发生了什么。

**编辑：** HttpModules 在请求流的早期就处于活动状态，并且它们通常会受到服务器的大多数请求的影响，因此请将 HttpModule 中的代码保持在最低限度。一个例子：如果你正在对文件进行权限，请确保请求实际上是命中文件（即请求的 url 以 /files/ 开头）。只要有可能，缓存数据以供 HttpModule 使用，不要为 HttpModule 中的每个请求都访问数据库！

您在实际应用程序中可能获得较少命中的原因是，即使是对图像、js 文件、css 文件等的请求也可能在 HttpModule 中产生命中，但在您的应用程序中，只有针对应用程序的请求才会命中您的断点（用于 Web 窗体的 aspx、asmx 等以及 ASP.NET MVC 中可识别的路由）。

要查看您在 HttpModule 中处理的请求，请查看 url 变量的值：

```
void context_BeginRequest(object sender, EventArgs e) {
    HttpApplication app = (HttpApplication)sender;
    String url = app.Request.Url.OriginalString;
} 
```

# c# - 使用 CreateFile 在 64 位操作系统上为 USB 设备创建句柄

> ID：11762663
> 
> 赞同：0
> 
> 时间：2012-08-01T15:33:42.503
> 
> 标签：c#, .net, usb

`CreateFile`我有以下代码用于在 32 位 XP 操作系统上创建有效句柄。在 64 位 Vista 和 Windows 7 计算机上测试相同的代码时，`CreateFile`返回无效的句柄值。我似乎无法弄清楚发生了什么。

这是dll导入：

```
[DllImport("kernel32.dll", SetLastError = true)]
static extern IntPtr CreateFile(
     string FileName,
     uint DesiredAccess,
     uint ShareMode,
     IntPtr SecurityAttributes,
     uint CreationDisposition,
     uint FlagsAndAttributes,
     IntPtr hTemplateFile
     ); 
```

和电话：

```
drive = CreateFile(devicePath,
           GENERIC_READ | GENERIC_WRITE,
           FILE_SHARE_READ | FILE_SHARE_WRITE,
           IntPtr.Zero,
           OPEN_EXISTING,
           FILE_FLAG_DELETE_ON_CLOSE,
           IntPtr.Zero); 
```

`devicePath`是 USB 的有效路径。这在 32 位操作系统上返回一个有效句柄，在 64 位操作系统上返回一个无效值。我找了又找，一无所获。如果有人可以提供帮助或分享一些信息，我将不胜感激。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:36:06.060

验证您正在为[AnyCPU](https://stackoverflow.com/questions/516730/visual-studio-any-cpu-target)进行编译。如果您的编译目标是 x86，那么您将在`IntPtr`32 位和 64 位操作系统上都有 32 位类型。为 AnyCPU 编译允许`IntPtr`数据类型反映指针的大小。

`CreateFile`API 返回`HANDLE`，它是`PVOID`(aka )的别名`void*`，因此它在 64 位操作系统上为 64 位长，在 32 位操作系统上为 32 位长。

当您针对 x86 进行编译时，代码需要 API 返回一个 32 位的值。因为它实际上是 64 位的，所以你丢失了一半，给你一个无效的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T04:45:44.383

值得一提的是（因为很多人都弄错了）在 64 位 Windows 上，句柄可以安全地截断为 32 位。

这允许句柄与 32 位应用程序（但不是 16 位应用程序）兼容，而无需特殊的“句柄转换”thunking。

反过来，截断的 32 位句柄可以安全地符号扩展为 64 位。（无效句柄 -1 必须通过符号扩展）

[MSDN“运行 32 位应用程序”](https://msdn.microsoft.com/en-us/library/windows/desktop/aa384249%28v=vs.85%29.aspx) “句柄在 64 位 Windows 上具有 32 个有效位。”

# postgresql - 由于登录失败，无法启动 pgAgent

> ID：11762671
> 
> 赞同：0
> 
> 时间：2012-08-01T15:34:09.757
> 
> 标签：postgresql, pgagent

我想在 Windows 上安装 pgAgent 服务。虽然它使用以下命令安装得很好：

```
C:\Program Files (x86)\pgAdmin III\1.14>pgagent.exe INSTALL pgAgent -l2 -u postgres hostaddr=localhost port=5432 dbname=postgres user=postgres 
```

服务未启动给出错误：**Windows 无法在本地计算机上启动 pgAgent 服务。错误 1069：由于登录失败，服务未启动。**

使用 pgpass.conf 文件提供密码。pgAdmin 使用相同的密码登录数据库。

我什至尝试在命令行本身上使用 -p 选项提供相同的密码（如 pgpass.conf）。它也不起作用，但错误是不同的。在命令行上它说**服务无法启动。服务报告没有错误**。但是，当我在控制面板/事件查看器中看到日志时，会显示以下警告：

```
Couldn't create the primary connection (attempt 10): fe_sendauth: no password supplied 
```

然后是一个错误：

```
Stopping pgAgent: Couldn't establish the primary connection with the database server. 
```

如果有帮助，我单独下载了 pgAgent 并将 pgAgent.exe 放在 libpq.dll 所在的 pgAdmin III/1.14 文件夹中。我正在使用 PostgreSQL 9.0、pgAdmin 1.14 和 pgAgent 3.0.0

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-02T18:10:36.540

转到windows上的pgAgent安装文件夹并执行

```
C:\Program Files (x86)\pgAgent\bin>pgagent REMOVE pgAgent 
```

这将删除现有的错误配置的 Windows 服务
，然后以以下方式重新安装服务，并正确提供密码凭据。第一个 -u 给出在 windows 上创建的 postgres 用户，连接字符串中的第二个用户名是 db 用户名。
执行以下操作后，启动服务并检查事件查看器是否仍然看到错误。

```
C:\Program Files (x86)\pgAgent\bin>pgagent --help
Usage:
pgagent REMOVE <serviceName>
pgagent INSTALL <serviceName> [options] <connect-string>
pgagent DEBUG [options] <connect-string>
options:
-u <user or DOMAIN\user>
-p <password>
-d <displayname>
-t <poll time interval in seconds (default 10)>
-r <retry period after connection abort in seconds (>=10, default 30)>
-l <logging verbosity (ERROR=0, WARNING=1, DEBUG=2, default 0)>

C:\Program Files (x86)\pgAgent\bin>pgagent INSTALL pgAgent -u postgres -p admin
-l 2 hostaddr=127.0.0.1 port=5433 user=postgres dbname=first password=admin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:07:28.807

ok guys, i am able to solve the issue, by reinstalling PostgreSQL and then installing pgAgent with StackBuilder.

# php - 模型未保存到数据库

> ID：11762675
> 
> 赞同：1
> 
> 时间：2012-08-01T15:34:25.370
> 
> 标签：php, cakephp, save

```
 CREATE TABLE IF NOT EXISTS `web_subjects` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `web_subject_category_id` int(11) DEFAULT NULL,
      `title` varchar(128) DEFAULT NULL,
      `type` varchar(128) DEFAULT NULL,
      `description` text,
      `description_long` text,
      `editable` int(1) DEFAULT NULL,
      `deletable` int(1) DEFAULT NULL,
      `published` int(1) DEFAULT NULL,
      `order_number` int(11) DEFAULT NULL,
      `created` timestamp NULL DEFAULT NULL,
      `modified` timestamp NULL DEFAULT NULL,
      PRIMARY KEY (`id`)
    ) 
ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=19 ; 
```

模型

```
class WebSubject extends AppModel
    {
        public $name = "WebSubject";

        public $belongsTo = array("WebSubjectCategory");

        public $validate = array(
            'title' => array(
                'rule' => 'notEmpty',
                'message' => "Completati denumirea!"
            )
        );

        public $hasMany = array(

            'Image' => array(
                'className'  => 'WebFile',
                'foreignKey' => 'entity_id',
                'conditions' => array(
                                    'Image.type' => 'image',
                                    'Image.entity_table_name' => 'web_subjects'
                                ),              
                'order'      => array('Image.order_number ASC', 'Image.id DESC'),
                'dependent'  => true
            ),
            'Video' => array(
                'className'  => 'WebFile',
                'foreignKey' => 'entity_id',
                'conditions' => array(
                                    'Video.type' => 'video',
                                    'Video.entity_table_name' => 'web_subjects'
                                ),              
                'order'      => array('Video.order_number ASC', 'Video.id DESC'),
                'dependent'  => true
            )
        );
    } 
```

控制器动作

```
public function admin_page_add(){
            if(!empty($this->request->data))
            {
                $this->WebSubject->create($this->data["WebSubject"]);
                $this->WebSubject->type = 'page';
                //debug($this->WebSubject);
                if($this->WebSubject->save()){
                    //debug($this->WebSubject);
                    //die(0);
                    $this->Session->setFlash("Pagina a fost salvata!", "flash/simpla_success");
                    $this->redirect('pages');
                }
                else{
                    $this->Session->setFlash("Pagina NU a fost salvata!", "flash/simpla_error");
                }
            }
        } 
```

问题是模型似乎已保存并且我按预期重定向，但它没有插入到数据库中。

使用 debug(Model) 我看到模型正在使用的 id 增加了（就像它被插入然后删除一样）。

我使用了 sql_dump - 没有 INSERT 的痕迹。

而且，当然，没有验证错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:38:55.183

使用这个

这是我的模型

```
<?php
App::uses('AppModel', 'Model');
/**
 * CarModel Model
 *
 * @property Manufacturer $Manufacturer
 * @property Showroom $Showroom
 */
class CarModel extends AppModel {
/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'model';
/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'manufacturer_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'model' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'Manufacturer' => array(
            'className' => 'Manufacturer',
            'foreignKey' => 'manufacturer_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'Showroom' => array(
            'className' => 'Showroom',
            'foreignKey' => 'car_model_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),
                'RequestCar' => array(
            'className' => 'RequestCar',
            'foreignKey' => 'car_model_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

}
?> 
```

我的控制器

/** * admin_add 方法 * * @return void */

```
public function admin_add() {
        $this->layout = 'admin_layout';
        if ($this->request->is('post')) {
            $this->CarModel->create();
            if ($this->CarModel->save($this->request->data)) {
                $this->Session->setFlash(__('The car model has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The car model could not be saved. Please, try again.'));
            }
        }
        $manufacturers = $this->CarModel->Manufacturer->find('list');
        $this->set(compact('manufacturers'));
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T15:41:57.367

```
$this->WebSubject->save(); 
```

没有数据，什么都不保存！（编辑：此声明是错误的，如评论中所述。）

放：

```
 $this->WebSubject->save($this->request->data); 
```

[save() 函数文档](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-save-array-data-null-boolean-validate-true-array-fieldlist-array)

# javascript - JavaScript 时间比较

> ID：11762678
> 
> 赞同：3
> 
> 时间：2012-08-01T15:34:45.433
> 
> 标签：javascript, datetime, date, time

我现在有以下代码：

```
var d = new Date();
var curr_hour = d.getHours();
var curr_minute = d.getMinutes();
var curr_time = curr_hour + ":" + curr_minute;

var open_time = "17:00";

if(Date.parse ( curr_time ) > Date.parse ( open_time )){
   alert("Webshop is open");
} else {
   alert("Webshop is closed.");
} 
```

代码应该做的是.. 如果当前时间大于 17:00 发送警报，如果不是，则发送另一个警报.. 我现在得到的只是它已关闭。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T15:38:51.577

您不需要所有的解析，您已经知道`getHours()`方法！

```
if(new Date().getHours() >= 17) 
```

...就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:42:29.107

您不能仅以`hh:mm`格式解析时间。给它一个任意日期（在本例中为 2012 年 1 月 1 日），使其成为一个完整的日期对象。只要两者相同，日期就无关紧要。

```
if(Date.parse('01/01/2012 ' + curr_time) > Date.parse ('01/01/2012 ' +  open_time)){
   console.log("open");
}else{
   console.log("closed");
} 
```

一个更简单的方法是只比较小时和分钟，因为这就是你所拥有的。

```
curr_hour > open_hour && curr_minute > open_minute 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:40:15.487

为什么要创建日期对象？只需使用基本数学即可。

```
var d = new Date();
var curr_hour = d.getHours();
var curr_minute = d.getMinutes();
var curr_time = curr_hour + curr_minute/60;

var open_time = 17;
var openClosed = curr_time > open_time ? "Open" : "Closed";

alert("Webshop is " + openClosed + "."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:55:21.863

试试这个：

```
var d = new Date();
var curr_hour = d.getHours();
var curr_minute = d.getMinutes();
var curr_second = d.getSeconds();

if((curr_hour > 17) || (curr_hour == 17 && curr_minute == 0 && curr_second == 0 )){
   alert("Webshop is open");
} else {
   alert("Webshop is closed.");
} 
```

# c++ - 将整数除法存储在浮点值 C++ 中

> ID：11762680
> 
> 赞同：2
> 
> 时间：2012-08-01T15:34:46.160
> 
> 标签：c++, casting, floating-point, int, division

我只是想问一下，如果我在存储在这样的浮点变量中时不将整数类型转换为浮点数，会发生什么情况：

```
int32 IntVar1 = 100
int32 IntVar2 = 200
float FloatVar = IntVar1/IntVar2; 
```

目前我正在这样做：

```
int32 IntVar1 = 100
int32 IntVar2 = 200
float FloatVar = float(IntVar1)/float(IntVar2); 
```

但是在我拥有的代码量中，这看起来真的很迟钝。我想过将我的 int 变量更改为浮动，但我想这会影响性能。而且由于整数值不应该包含任何小数，所以感觉完全是浪费。

所以我想知道，选项1有什么办法可以工作吗？还是我必须进行类型转换或将变量更改为浮动？（所有类型转换几乎都使代码不可读）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:40:26.727

我不会太担心过早的优化。如果将您的值表示为`float`类型更有意义，那就去做吧。如果您的程序没有按您需要的速度运行，并且您已经对其进行了分析并且知道浮点运算是问题所在，那么请开始考虑如何加快它的速度。

我会重视所有选角的可读性，这似乎也是你的直觉。

此外，由于这个问题被标记为 C++，我认为（不幸的是？）这样做更习惯：

```
float FloatVar = static_cast<float>(IntVar1)/IntVar2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:52:15.710

看看函数的魔力：

```
float div(int x, int y)
{
    return float(x) / float(y);
} 
```

现在你可以说：

```
int32 IntVar1 = 100
int32 IntVar2 = 200
float FloatVar = div(IntVar1, IntVar2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:37:30.407

您至少需要其中一个操作数为浮点数，否则除法将被截断。我通常会转换第一个操作数：

```
float FloatVar = (float)IntVar1/IntVar2; 
```

从优雅的角度来看，这还不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-06T18:52:39.353

根据 ISO/IEC 标准- **N3797** - 第 5.6 节

> 对于整数操作数， / 运算符产生代数商，其中任何**小数部分被丢弃**；如果商 a/b 在结果的类型中是可表示的，则 (a/b)*b + a%b 等于 a；否则，a/b 和 a%b 的行为都是未定义的

小数部分的丢弃称为**向零截断**。

难怪小数部分被丢弃在

```
22/7 
```

# mercurial - 不断修复相同的 Mercurial 合并问题

> ID：11762681
> 
> 赞同：0
> 
> 时间：2012-08-01T15:34:53.233
> 
> 标签：mercurial

我和我的同事正在做一个项目，我们正在使用 mercurial + bitbucket。

当我们中的一个人从 bitbucket 中提取并合并时，我们遇到了问题。例如，在我从 bitbucket 中提取之后`hg pull --rebase`，我必须

*   删除在先前提交中删除的文件
*   修改之前提交中修改的文件
*   移动在先前提交中移动的文件/文件夹

他确实`hg pull`跟随`hg merge`并得到了与我相同的结果。

**我们做错了什么？**

除了变基/合并之外，我们的工作方式相同

*   工作工作工作
*   拉变基/合并
*   修复合并问题
*   推

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:29:40.270

最可能的原因是您正在重新设置已经推送的变更集。变基修改历史，除非你真的知道你在做什么，否则你应该只变基从未共享到另一个存储库的变更集。

如果您使用 Mercurial 2.1 或更高版本，它支持[阶段](http://mercurial.selenic.com/wiki/Phases)。当阶段工作时，rebase 将只允许对草稿和秘密变更集进行 rebase，而不是公共变更集。

一般来说，我建议你使用合并而不是变基。

# c# - 在包装面板中添加动态按钮 wpf

> ID：11762682
> 
> 赞同：0
> 
> 时间：2012-08-01T15:34:54.287
> 
> 标签：c#, wpf, button, dynamic, wrappanel

我正在尝试在屏幕上动态显示按钮，以便在没有任何滚动条的情况下很好地放置它们。我有如下标记，但由于某种原因出现了滚动条。我们如何使滚动条不出现，并且按钮的布局没有任何滚动条。

```
<ListBox x:Name="ItemsListBox"  >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <ToggleButton Content="{Binding Name}" Click="Click" MinWidth="120" MinHeight="70" FontWeight="Bold" FontSize="18"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel></WrapPanel>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:38:38.160

`ListBox`你的内心是什么控制？大多数情况下，您描述的问题是由允许增长的*父*控件引起的`ListBox`。

您可以通过设置显式并测试发生的情况来证明这是否是问题`Width="200"`所在。`ListBox`如果它换行了，那么问题出在`ListBox`' 的父级上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:55:56.150

这就是我想要实现的。

```
<ItemsControl x:Name="ListBox" Grid.Row="5"  Grid.ColumnSpan="2">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ToggleButton Content="{Binding Name}" MinWidth="120" MinHeight="50" FontWeight="Bold" FontSize="16" Margin="5"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:38:00.643

添加

```
ScrollViewer.VerticalScrollBarVisibility="Hidden"
ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
```

给你的容器。

# android - 为什么 RecognitionListener 在 JellyBean 中停止工作？

> ID：11762683
> 
> 赞同：14
> 
> 时间：2012-08-01T15:34:57.350
> 
> 标签：android, voice-recognition

对于使用 Android[语音识别 API](http://developer.android.com/reference/android/speech/RecognizerIntent.html)的每个人，曾经有一个方便的[RecognitionListener](http://developer.android.com/reference/android/speech/RecognitionListener.html#onBufferReceived%28byte%5B%5D%29)可以注册，它将各种事件推送到您的回调。特别是，有以下[`onBufferReceived(byte[])`](http://developer.android.com/reference/android/speech/RecognitionListener.html#onBufferReceived%28byte%5B%5D%29)方法：

> `public abstract void onBufferReceived (byte[] buffer)`
> 
> *自：API Level 8*收到更多声音。此功能的目的是允许向用户提供有关捕获的音频的反馈。不保证会调用此方法。
> 
> **参数** `buffer` 包含表示单通道音频流的大端 16 位整数序列的缓冲区。采样率取决于实现。

尽管该方法明确声明不能*保证*它会被调用，但在 ICS 和之前的版本中，它会在 100% 的时间内有效地被调用：至少，通过连接以这种方式接收的所有字节，您可以重建整个音频流并播放。

然而，出于某种原因，在 Jellybean SDK 中，**这神奇地停止了工作**。没有弃用通知，代码仍然可以编译，但`onBufferReceived`现在**从未**调用过。从技术上讲，这并没有破坏他们的 API（因为它说“不能保证”该方法会被调用），但显然这对于​​许多依赖于这种行为的事情来说是一个重大变化。

有人知道为什么禁用此功能，是否有办法在 Jellybean 上复制其行为？

**澄清**：我意识到整个`RecognizerIntent`事情是一个具有多种实现的接口（包括一些在 Play 商店中可用的），并且他们每个人都可以选择如何处理`RecognitionListener`. 我特别指的是绝大多数 Jellybean 手机使用的默认 Google 实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T05:02:18.777

Google 并未将此方法称为他们的 Jelly Bean 语音应用程序 (QuickSearchBox)。它根本不在代码中。除非有来自谷歌工程师的官方评论，否则我无法给出明确的答案“为什么”他们这样做。我确实搜索了开发者论坛，但没有看到任何关于这个决定的评论。

语音识别的 ics 默认来自 Google 的 VoiceSearch.apk。您可以反编译此 apk 并查看并发现有一个 Activity 来处理动作意图 *android.speech.action.RECOGNIZE_SPEECH*。*在这个 apk 中，我搜索了“onBufferReceived”，并在com.google.android.voicesearch.GoogleRecognitionService$RecognitionCallback*中找到了对它的引用。

借助 Jelly Bean，Google 将 VoiceSearch.apk 重命名为 QuickSearch.apk，并为应用程序添加了许多新功能（例如离线听写）。你会期望仍然找到一个 onBufferReceived 调用，但由于某种原因它完全消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T01:07:12.783

我也正在使用 onBufferReceived 方法，并且对该方法的（非保证）调用在 Jelly Bean 中被删除感到失望。好吧，如果我们无法使用 onBufferReceived() 获取音频，那么可能会同时运行 AudioRecord 和语音识别。有人试过这个吗？如果没有，我会试一试并报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:11:20.233

我遇到了同样的问题。我之所以不只是接受“这不起作用”，是因为 Google Nows “自我笔记”会录制音频并将其发送给您。我在运行“note-to-self”操作时在 logcat 中发现的是：

```
02-20 14:04:59.664: I/AudioService(525):  AudioFocus  requestAudioFocus() from android.media.AudioManager@42439ca8com.google.android.voicesearch.audio.ByteArrayPlayer$1@424cca50

02-20 14:04:59.754: I/AbstractCardController.SelfNoteController(8675): #attach
02-20 14:05:01.006: I/AudioService(525):  AudioFocus  abandonAudioFocus() from android.media.AudioManager@42439ca8com.google.android.voicesearch.audio.ByteArrayPlayer$1@424cca50

02-20 14:05:05.791: I/ActivityManager(525): START u0 {act=com.google.android.gm.action.AUTO_SEND typ=text/plain cmp=com.google.android.gm/.AutoSendActivity (has extras)} from pid 8675
02-20 14:05:05.821: I/AbstractCardView.SelfNoteCard(8675): #onViewDetachedFromWindow 
```

这让我相信谷歌现在处理了来自谷歌的 audioFocus（regonizerIntent），并且当 Note-to-self-tag 出现在 onPartialResults 中时，他们使用录音机或类似的东西。我无法确认这一点，是否有其他人尝试过这项工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T07:24:13.457

我有一个实现 RecognitionListener 的服务，并且我还覆盖了 onBufferReceived(byte[]) 方法。我正在调查为什么在 <=ICS 上调用 onResults() 语音识别要慢得多。我能找到的唯一区别是 onBufferReceived 在电话 <= ICS 上被调用。在 JellyBean 上，永远不会调用 onBufferReceived() 并且调用 onResults() 的速度要快得多，我认为这是因为每秒或毫秒调用一次 onBufferReceived 的开销。也许这就是他们取消 onBufferReceived() 的原因？

# c# - 是否可以创建使用 C# 或 C++ 代码的 Firefox 插件？如果是这样，怎么做？

> ID：11762687
> 
> 赞同：0
> 
> 时间：2012-08-01T15:35:18.283
> 
> 标签：c#, c++, firefox, plugins

这个想法不是使用 C# 或 C++ 编写插件本身（尽管如果可能的话会很好），而是让它访问用 C# 或 C++，最好是 C# 编写的代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:37:22.290

Firefox 插件可以使用 NPAPI 编写，[它是一个 C API](https://developer.mozilla.org/en/Plugins)，因此可以在 C++ 中完美运行。（这可能是最常用的语言。）

# javascript - Chrome 中的 jQuery Fancybox 输入捕获

> ID：11762689
> 
> 赞同：0
> 
> 时间：2012-08-01T15:35:22.173
> 
> 标签：javascript, jquery, google-chrome, fancybox

```
jQuery(document).keypress(function(e){
    if(e.which == 13){
        alert(1);
        e.preventDefault();
        return false;
    }
}); 
```

我有上面的代码。它适用于所有主要浏览器。问题是，当我在 Chrome 中打开 fancybox 时，它会停止工作，直到它关闭。我该如何解决这个问题？它确实适用于所有其他浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:57:05.843

`keydown`相反……然后走得`preventDefault()`更高呢？

```
jQuery(document).keydown(function(e){
    if(e.which == 13){
        e.preventDefault();
        alert(1);
        return false;
    }
}); 
```

# database - MVC3 Entity Framework 显示来自数据库 SQL Server 的浮点类型

> ID：11762696
> 
> 赞同：0
> 
> 时间：2012-08-01T15:35:46.740
> 
> 标签：database, asp.net-mvc-3, entity-framework

尝试从数据库中检索浮点数时出现以下错误：

**'WorkHours' 上的 'Hours' 属性无法设置为 'Double' 值。您必须将此属性设置为“Single”类型的非空值。**

WorkHours 实体中的 Hours 属性是：

**公单？小时{get; 放;}**

表设计类型：

**小时浮动**

当我存储一个值时，它存储为双精度（点后 16 位），我相信浮点数是点后 7 位。

任何想法为什么我会收到这个错误？

谢谢

MVC3、EF4、SQL Server 8 (2000)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:20:57.063

也许这会有所帮助：

'WorkHours' 上的 'Hours' 属性无法设置为 'Double' 值。您必须将此属性设置为“Single”类型的***非空***值。

```
public Single? Hours {get; set;}
             ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:55:00.613

我使用属性列解决了这个问题......

```
 [Column("latitude", TypeName = "float")] 
```

# sql - 如何在sql server中获取行的行ID

> ID：11762700
> 
> 赞同：8
> 
> 时间：2012-08-01T15:35:54.870
> 
> 标签：sql, sql-server-2005, rowid

我有一张桌子`CSBCA1_5_FPCIC_2012_EES207201222743`，有两列`employee_id`，`employee_name`

我使用了以下查询

```
SELECT ROW_NUMBER() OVER (ORDER BY EMPLOYEE_ID) AS ID, EMPLOYEE_ID,EMPLOYEE_NAME 
FROM CSBCA1_5_FPCIC_2012_EES207201222743 
```

但是，它以 的升序返回行`employee_id`，但我需要将行按顺序插入到表中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T15:42:09.347

SQL Server 不跟踪插入行的顺序，因此在给定当前表结构的情况下，没有可靠的方法来获取该信息。即使`employee_id`是一`IDENTITY`列，依靠它来进行插入顺序也不是 100% 万无一失的（因为您可以使用 填补空白，甚至创建重复的 ID 值`SET IDENTITY_INSERT ON`）。如果`employee_id`是一`IDENTITY`列*，并且*您确定没有手动乱序插入行，您应该能够使用查询的这种变体按顺序选择数据，最新的优先：

```
SELECT 
   ROW_NUMBER() OVER (ORDER BY EMPLOYEE_ID DESC) AS ID, 
   EMPLOYEE_ID,
   EMPLOYEE_NAME 
FROM dbo.CSBCA1_5_FPCIC_2012_EES207201222743
ORDER BY ID; 
```

您可以对表进行更改以跟踪新行的此信息，但您将无法为现有数据派生它（在您进行此更改时，它们都会被我标记为已插入）。

```
ALTER TABLE dbo.CSBCA1_5_FPCIC_2012_EES207201222743 
-- wow, who named this?
  ADD CreatedDate DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP; 
```

请注意，这可能会破坏现有的代码`INSERT INTO dbo.whatever SELECT/VALUES()`——例如，您可能必须重新访问您的代码并定义一个适当的、明确的列列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-13T13:53:26.820

有一个名为 %%physloc%% 的伪列显示行的物理地址。

请参阅[SQL Server 中 Oracle 的 RowID 的等效项](https://stackoverflow.com/questions/909155/equivalent-of-oracles-rowid-in-sql-server)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:38:14.403

SQL 不这样做。表中元组的顺序不按插入日期排序。很多人都包含一个存储插入日期的列，以解决这个问题。

# apache - Apache 允许和拒绝规则在不同 RHEL 版本上的解析方式不同？

> ID：11762707
> 
> 赞同：0
> 
> 时间：2012-08-01T15:36:20.933
> 
> 标签：apache, .htaccess, http-status-code-403, nfs, rhel

我有 6 台机器：3 台运行 RHEL 3（Taroon Update 9），另外 3 台运行 RHEL 5.6（Tikanga）。

它们都共享一个 NFS 卷，其中包含

1.  Apache 2.2.4 安装
2.  那个 Apache 的配置文件
3.  该 Apache 提供的 PHP 脚本和其他内容

在每台机器上，共享的 Apache 以“-D $hostname”选项启动，以区别于其他机器上运行的 Apache 实例。（其中 $hostname 是机器的主机名）。

这 6 台机器前面有一个负载均衡器（另一个 Apache），用于平衡它们之间的请求。

## 问题：

我在包含这些规则的目录中放置了一个 .htaccess 文件：

```
order deny,allow
deny from all
allow from my.very.own.ip 
```

（我在 之间的配置文件中尝试了相同的规则，结果相同）

来自除 my.very.own.ip 之外的任何 IP 的任何请求都被所有 6 个 Apache 拒绝。

来自 my.very.own.ip 的命中前 3 个 Apache（在 RHEL 3 上运行）的请求被接受，这是正常的。

来自 my.very.own.ip 的请求命中**最后**3 个 Apache（在 RHEL 5.6 上运行）被**拒绝**（HTTP 403，客户端被服务器配置拒绝），这是**不**正常的。

我已经在所有 Apache 服务器（及其分叉的子节点）上运行了一个 strace，它们看起来是这样的：

**- 在一个“好”的 Apache 上，请求来自 my.very.own.ip**

```
19553 read(7, "GET /my/website"..., 8000) = 1761
19553 gettimeofday({1343736878, 168708}, NULL) = 0
19553 gettimeofday({1343736878, 168787}, NULL) = 0
19553 gettimeofday({1343736878, 168835}, NULL) = 0
19553 stat64("/shark/apps/apache1/conf/www/maps/stationlist.txt", {st_mode=S_IFREG|0644, st_size=5557, ...}) = 0
19553 stat64("/shark/apps/apache1/conf/somedir/stationkidsurls.txt", {st_mode=S_IFREG|0644, st_size=6200, ...}) = 0
19553 stat64("/shark/www_docs/my/website/php/script.php", {st_mode=S_IFREG|0644, st_size=2449, ...}) = 0
19553 open("/shark/www_docs/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
19553 open("/shark/www_docs/my/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
19553 open("/shark/www_docs/my/website/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
19553 open("/shark/www_docs/my/website/php/.htaccess", O_RDONLY|O_LARGEFILE) = 10
19553 fstat64(10, {st_mode=S_IFREG|0644, st_size=51, ...}) = 0
19553 read(10, "    order deny,allow\n    deny f"..., 4096) = 51
19553 read(10, "", 4096)                = 0
19553 close(10)                         = 0
19553 open("/shark/www_docs/my/website/php/script.php/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOTDIR (Not a directory)
19553 getpid()                          = 19553
19553 setitimer(ITIMER_PROF, {it_interval={0, 0}, it_value={60, 0}}, NULL) = 0
19553 rt_sigaction(SIGPROF, {0x1280014, [PROF], SA_RESTORER|SA_RESTART, 0x3c10d8}, {0x1280014, [PROF], SA_RESTORER|SA_RESTART, 0x3c10d8}, 8) = 0
19553 rt_sigprocmask(SIG_UNBLOCK, [PROF], NULL, 8) = 0
19553 getcwd("/", 4095)                 = 2
19553 chdir("/shark/www_docs/my/website/php") = 0 
```

**- 在请求来自 my.very.own.ip 的“坏”Apache 上**

```
1723  read(9, "GET /my/website"..., 8000) = 1761
1723  gettimeofday({1343736621, 548677}, NULL) = 0
1723  gettimeofday({1343736621, 548735}, NULL) = 0
1723  gettimeofday({1343736621, 548771}, NULL) = 0
1723  stat64("/shark/apps/apache1/conf/www/maps/stationlist.txt", {st_mode=S_IFREG|0644, st_size=5557, ...}) = 0
1723  stat64("/shark/apps/apache1/conf/somedir/stationkidsurls.txt", {st_mode=S_IFREG|0644, st_size=6200, ...}) = 0
1723  stat64("/shark/www_docs/my/website/php/script.php", {st_mode=S_IFREG|0644, st_size=2449, ...}) = 0
1723  open("/shark/www_docs/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
1723  open("/shark/www_docs/my/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
1723  open("/shark/www_docs/my/website/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
1723  open("/shark/www_docs/my/website/php/.htaccess", O_RDONLY|O_LARGEFILE) = 12
1723  fstat64(12, {st_mode=S_IFREG|0644, st_size=51, ...}) = 0
1723  read(12, "    order deny,allow\n    deny f"..., 4096) = 51
1723  read(12, "", 4096)                = 0
1723  close(12)                         = 0
1723  open("/shark/www_docs/my/website/php/script.php/.htaccess", O_RDONLY|O_LARGEFILE) = -1 ENOTDIR (Not a directory)
1723  gettimeofday({1343736621, 550606}, NULL) = 0
1723  write(10, "[Tue Jul 31 08:10:21 2012] [erro"..., 159) = 159
729   <... read resumed> "[Tue Jul 31 08:10:21 2012] [erro"..., 65536) = 159
729   gettimeofday({1343736621, 550743}, NULL) = 0
729   gettimeofday({1343736621, 550786}, NULL) = 0 
```

## 你怎么看？

这些机器之间的唯一区别在于 RHEL 版本。这也可能意味着 NFS 共享（ /shark ）的安装方式不同......

我已经修改了 .htaccess 并通过重写更改了允许、拒绝规则（不是来自 my.very.own.ip 的请求被重定向到其他地方）。但是......我仍然想知道为什么相同的规则在不同的机器上表现不同（相同的 Apache，相同的配置文件）。

## 谢谢！

# c# - WPF 应用程序作为另一个程序的组件

> ID：11762710
> 
> 赞同：1
> 
> 时间：2012-08-01T15:36:26.043
> 
> 标签：c#, .net, wpf

我有通过 FTP 发送文件的 Application-A。我在 Expression Blend 中设计了应用程序。

我想将现有的 Application-A 改为具有更大功能的新 Application-B 中的 FTP 组件。

Application-B 会将文件位置传递给 FTP 组件。验证文件位置后，新的 FTP 组件将启动/加载/显示并允许用户发送文件。

如何使用这两个应用程序实现此功能？如何将一个应用程序包含为另一个应用程序的组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:52:21.223

1.  您可以托管其他进程的窗口。
2.  您可以将另一个程序作为另一个进程启动，并通过环境变量或命令行参数发送文件位置。
3.  您可以将其他程序编译为 dll，删除它的“应用程序”，将其窗口作为模型启动，或将其窗口更改为容器并将其包含在新程序中。

# javascript - jQuery - 具有特定属性的元素的选择器

> ID：11762714
> 
> 赞同：0
> 
> 时间：2012-08-01T15:36:34.273
> 
> 标签：javascript, jquery, html, jquery-selectors

在我的页面上我有很多`label`标签。其中一些具有`for`属性。该标签的jQuery选择器应该如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:42:20.687

试试这个，

**[现场演示](http://jsfiddle.net/HptPm/1/)**

```
$("label[for]")​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:42:32.247

试试这个：`$('label[for]')`如果你不知道什么等于`for`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:39:57.817

像这样的选择器会很有帮助：

```
$('label[for="foo"]').css('color', 'red); 
```

评论后编辑：

在不知道`for`值的情况下选择所有标签：

```
$('label[for]').css('color', 'red); 
```

# jquery - jQuery 选择器 - 单击位于公共父标签下的另一个标签时更改标签的属性

> ID：11762716
> 
> 赞同：0
> 
> 时间：2012-08-01T15:36:38.857
> 
> 标签：jquery, jquery-selectors

我有以下html结构：

```
<div>
<button>
<img src="img/a.png" />
</button>
<h2>Title</h2>
</div> 
```

我想要实现的行为是，当用户单击 h2 标题时，按钮字段中的图像会发生变化。我尝试了以下 jQuery 代码，但它不起作用，如果有人能帮助我指出我出错的地方，我会很高兴：

```
$('h2').click(function(){
    $(this).parentsUntil('div').children('button').children('img').attr('src','img/b.png');
}); 
```

首先十分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:38:40.713

```
$('h2').click(function(){
    $(this).siblings('button').children('img').attr('src','img/b.png');
}); 
```

当然还有你惯用的小提琴：http: [//jsfiddle.net/UbMyW/](http://jsfiddle.net/UbMyW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:38:42.140

试试这个更简单一点

```
$('h2').click(function(){
    $(this).parent().find('img').attr('src','img/b.png');
}); 
```

请参阅此处的示例[http://jsfiddle.net/kXjPY/1/](http://jsfiddle.net/kXjPY/1/)

# python - 装饰方法 - 如何以 oo 方式而不是程序方式调用方法

> ID：11762721
> 
> 赞同：0
> 
> 时间：2012-08-01T15:36:52.983
> 
> 标签：python, oop, decorator

跟进一个[较早的线程](https://stackoverflow.com/questions/1367514/how-to-decorate-a-method-inside-a-class)，我的问题是如何使用这个表达式：`fn(self,*args, **kwargs`并像这样以 oo 方式调用它这`self.fn(...)`是我的总程序，其中失败的行被注释掉：

```
def formatHeader(fn):
    def wrapped(*args, **kwargs):
        print "here is args prior to extraction - {0}".format(args)
        if len(args) > 1:
            self,args = args  # remove self from args
        else:
            self, args= args[0], ()
        print("Here are the arguments after extraction: {0} {1}".format(self, args))
        #return '<div class="page_header">' + self.fn(*args, **kwargs)+'</div>'
        return '<div class="page_header">' + fn(self,*args, **kwargs)+'</div>'
    return wrapped    

class MyPage(object):
    def __init__(self):
        self.PageName = ''

    def createPage(self):
        pageHeader = self.createHeader()
        return pageHeader

    def addem(self, a, b):
        return a + b

    @formatHeader   #<----- decorator
    def createHeader(self):
        return "Page Header " + self.PageName

obj = MyPage()

print obj.createHeader() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:44:05.743

首先，`self`不存在于该范围内。 `self`是一个标签，按照惯例，它指的是类的实例方法中的当前实例。其次，装饰器并不意味着知道它们正在包装的函数的实例（至少在默认情况下）。该方法绑定到实例，并且装饰器对作为可调用黑盒传递的绑定方法进行操作。如果你想从装饰器中访问实例成员（你不应该这样做，因为这实际上破坏了oo），你必须将实例传递给装饰器，这意味着将装饰器封闭在进一步的闭包中，或使用自省从装饰器代码中动态发现拥有的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:26:58.147

问题是您的包装器想要访问它所应用到的实例的另一个方法，但它直到运行时才被传递——与装饰器运行时的类定义时间相反）。基本上你需要一个特定于实例的方法装饰器。[您可以通过使用PythonDecoratorLibrary](http://wiki.python.org/moin/PythonDecoratorLibrary)中的实例配方使装饰器成为[类方法装饰器](http://wiki.python.org/moin/PythonDecoratorLibrary#Class_method_decorator_using_instance)中描述的描述符来完成此操作。

以下是将它应用于您的示例代码（进行了一些外观更改）：

```
from functools import wraps

def formatHeader(fn):

    class Descriptor(object):
        def __init__(self, fn):
            self.fn = fn

        def __get__(self, instance, klass):
            if instance is None:  # Class method was requested
                return self.make_unbound(klass) #  will raise TypeError
            return self.make_bound(instance)

        def make_unbound(self, klass):
            @wraps(self.fn)
            def wrapped(*args, **kwargs):
                '''This documentation will vanish :)'''
                raise TypeError(
                    'unbound method {}() must be called with {} instance '
                    'as first argument (got nothing instead)'.format(
                        self.fn.__name__, klass.__name__)
                )
            return wrapped

        def make_bound(self, instance):
            @wraps(self.fn)
            def wrapped(*args, **kwargs):
                '''This documentation will disapear :)'''
                return ('<div class="page_header">' +
                        self.fn(instance, *args, **kwargs) + '</div>')

            # This instance does not need the descriptor anymore,
            # let it find the wrapped method directly next time:
            setattr(instance, self.fn.__name__, wrapped)
            return wrapped

    return Descriptor(fn)

class MyPage(object):
    def __init__(self):
        self.PageName = ''

    def createPage(self):
        pageHeader = self.createHeader()
        return pageHeader

    def addem(self, a, b):
        return a + b

    @formatHeader   #<----- decorator
    def createHeader(self):
        return "Page Header " + self.PageName

obj = MyPage()

print obj.createHeader() 
```

请注意，`self`嵌套 Descriptor 类方法中的参数是指 Descriptor 类的一个实例，而不是其方法被包装的类（`instance`在代码中）。

# vb.net - 在列表中搜索对象

> ID：11762723
> 
> 赞同：1
> 
> 时间：2012-08-01T15:36:55.150
> 
> 标签：vb.net, predicate

我有一个对象列表，我想搜索它以查看 myobject.articleID 是否与给定的 articleID 匹配。从我收集到的使用 .Find(Of T) 是解决此问题的最佳方法，但是我在实施它时遇到了一些困难。这是我到目前为止的一些代码：

```
<WebMethod()> _
Public Function SetTagOnFavorite(ByVal articleID As Integer, ByVal tagtext As String, ByVal mobileGUID As String) As AddTagResult
    Dim result As New AddTagResult
    Dim userID As Long = GetUserIDByMobileGUID(mobileGUID)

    If userID > 0 Then
        Dim pageNum As Integer = 1
        Dim pageLen As Integer = 500 'arbitrarily large number
        Dim savedArticleList As New List(Of SimpleArticle)
        savedArticleList = GetSavedArticles(mobileGUID, pageNum, pageLen)

        If savedArticleList.Find(Function( m As SimpleArticle) m.articleID = articleID)

            Dim lq As New lqDFDataContext
            Dim var = lq.web_AddTagToArticle(userID, articleID, tagtext).ToList()

            If var.Any() Then
                Dim vRes = var.First()
                result.articletagID = vRes.articletagID
                result.newarticletag = vRes.newarticletag
                result.newusertag = vRes.newusertag
                result.usertagID = vRes.usertagID
                result.resultinfo = "Success."

            End If
       End If  
    Else
        result.resultinfo = STR_NoUserIDMostLikelyTheSessionTimedOut
    End If
    Return result
End Function 
```

我得到的错误是“SimpleArticle 类型的值不能转换为布尔值”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:47:09.403

因为`Find(Of`返回找到的对象，您需要更改此行：

```
If savedArticleList.Find(Function( m As SimpleArticle) m.articleID = articleID) 
```

到

```
If savedArticleList.Find(Function( m As SimpleArticle) m.articleID = articleID) IsNot Nothing 
```

或者，如果您需要找到的项目，请将结果存储`Find`在局部变量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T16:21:24.897

您可以进一步优化@competent_tech 的答案：

```
If savedArticleList.Any(Function(m) m.articleID = articleID)) 
```

# c++ - 这是使用 C++ 锁定容器的可接受方式吗？

> ID：11762724
> 
> 赞同：6
> 
> 时间：2012-08-01T15:36:55.027
> 
> 标签：c++, multithreading, oop, thread-safety

我需要实现（在 C++ 中）一个线程安全的容器，使得只有一个线程能够从容器中添加或删除项目。我以前通过在线程之间共享互斥体来完成这种事情。这导致我的代码中到处都是互斥对象，使事情变得非常混乱且难以维护。

我想知道是否有一种更整洁、更面向对象的方式来做到这一点。我想到了以下围绕容器的简单类包装器（半伪 C++ 代码）

```
 class LockedList {
    private:
        std::list<MyClass> m_List;

    public:
        MutexObject Mutex;
 }; 
```

这样锁定可以通过以下方式完成

```
 LockedList lockableList;     //create instance
 lockableList.Mutex.Lock();    // Lock object

 ... // search and add or remove items

 lockableList.Mutex.Unlock();   // Unlock object 
```

所以我的问题真的是从设计的角度问这是否是一个好方法？我知道从设计的角度来看，允许公众访问成员是不受欢迎的，上述设计是否有任何严重的缺陷。如果是这样，是否有更好的方法来实现线程安全的容器对象？

总的来说，我读过很多关于设计和 C++ 的书籍，但似乎确实缺乏关于多线程编程和多线程软件设计的文献。

如果上述方法是解决问题的糟糕方法，那么任何人都可以提出改进方法，或者向我指出一些信息，这些信息解释了将类设计为线程安全的好方法？？？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T16:01:36.723

我会做这样的事情，通过使用 RAII 使其更加安全。

```
class LockedList {
private:
    std::list<MyClass> m_List;
    MutexObject Mutex;
    friend class LockableListLock;
};

class LockableListLock {
private:
    LockedList& list_;
public:
    LockableListLock(LockedList& list) : list_(list) { list.Mutex.Lock(); }
    ~LockableListLock(){ list.Mutex.Unlock(); }
} 
```

你会像这样使用它

```
LockableList list;
{
    LockableListLock lock(list); // The list is now locked.

    // do stuff to the list

} // The list is automatically unlocked when lock goes out of scope. 
```

您还可以通过在 LockableListLock 中的 std::list 接口周围添加包装器，让该类强制您在对其进行任何操作之前锁定它，这样您就可以通过 LockableListLock 类访问列表，而不是通过 LockedList 类访问列表。例如，您可以在 std::list::begin() 周围制作这个包装器

```
std::list::iterator LockableListLock::begin() {
    return list_.m_List.begin();
} 
```

然后像这样使用它

```
LockableList list;
LockableListLock lock(list);
// list.begin();   //This is a compiler error so you can't 
                   //access the list without locking it
lock.begin(); // This gets you the beginning of the list 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T16:06:47.857

我宁愿设计一个资源所有者来锁定互斥体并返回一个线程可以使用的对象。一旦线程完成并停止使用该对象，资源将`automatically`返回给其所有者并释放锁。

```
template<typename Resource>
class ResourceOwner
{
      Lock         lock; 
      Resource     resource;

      public:
         ResourceHolder<Resource>  getExclusiveAccess()
         {
              // Let the ResourceHolder lock and unlock the lock
              // So while a thread holds a copy of this object only it
              // can access the resource. Once the thread releases all
              // copies then the lock is released allowing another
              // thread to call getExclusiveAccess().
              //
              // Make it behave like a form of smart pointer
              //    1) So you can pass it around.
              //    2) So all properties of the resource are provided via ->
              //    3) So the lock is automatically released when the thread
              //       releases the object.

              return ResourceHolder<Resource>(lock, resource);
         }
}; 
```

资源持有者（没有经过深思熟虑，因此可以改进）

```
template<typename Resource>
class ResourceHolder<
{
    // Use a shared_ptr to hold the scopped lock
    // When first created will lock the lock. When the shared_ptr
    // destroyes the scopped lock (after all copies are gone)
    // this will unlock the lock thus allowding other to use
    // getExclusiveAccess() on the owner
    std::shared_ptr<scopped_lock>    locker;
    Resource&                        resource;   // local reference on the resource.

    public:
        ResourceHolder(Lock& lock, Resource& r)
            : locker(new scopped_lock(lock))
            , resource(r)
        {}

        // Access to the resource via the -> operator
        // Thus allowing you to use all normal functionality of 
        // the resource.
        Resource* operator->() {return &resource;}
}; 
```

现在一个可锁定的列表是：

```
ResourceOwner<list<int>>  lockedList;

void threadedCode()
{
    ResourceHolder<list<int>>  list = lockedList.getExclusiveAccess();

    list->push_back(1);
}
// When list goes out of scope here. 
// It is destroyed and the the member locker will unlock `lock`
// in its destructor thus allowing the next thread to call getExclusiveAccess() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T16:22:27.407

好的，我将更直接地说明其他人已经暗示的内容：这种设计的至少一部分，很可能是全部，可能不是您想要的。至少，您需要 RAII 样式的锁定。

我还将`locked`（或任何您喜欢的名称）制作为模板，因此您可以将锁定与容器本身分离。

```
// C++ like pesudo-code. Not intended to compile as-is.
struct mutex {
    void lock() { /* ... */ }
    void unlock() { /* ... */ }
};

struct lock {
    lock(mutex &m) { m.lock(); }
    ~lock(mutex &m) { m.unlock(); }
};

template <class container>
class locked {
    typedef container::value_type value_type;
    typedef container::reference_type reference_type;
    // ...

    container c;
    mutex m;
public:
    void push_back(reference_type const t) {
        lock l(m);
        c.push_back(t);
    }

    void push_front(reference_type const t) { 
        lock l(m);
        c.push_front(t);
    }

    // etc.
}; 
```

这使得代码相当容易编写并且（至少在某些情况下）仍然可以获得正确的行为——例如，您的单线程代码可能看起来像这样：

```
std::vector<int> x;

x.push_back(y); 
```

...您的线程安全代码如下所示：

```
locked<std::vector<int> > x;

x.push_back(y); 
```

假设您提供通常`begin()`的 , `end()`, `push_front`,`push_back`等，您`locked<container>`仍然可以像普通容器一样使用，因此它适用于标准算法、迭代器等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:02:12.760

这种方法的问题在于它使 LockedList 不可复制。有关此障碍的详细信息，请查看此问题：

[设计一个线程安全的可复制类](https://stackoverflow.com/questions/5070161/designing-a-thread-safe-copyable-class)

多年来我尝试了各种方法，在容器声明旁边声明的互斥锁总是最简单的方法（一旦在天真地实现其他方法后修复了所有错误）。

你不需要用互斥锁“乱扔”你的代码。你只需要一个互斥锁，在它保护的容器旁边声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T15:43:45.000

很难说粗粒度锁定是一个糟糕的设计决策。我们需要了解代码所在的系统才能讨论这个问题。如果您不知道它不起作用，这是一个很好的起点。先做最简单的事情。

如果您在未解锁的情况下进行范围检查，则可以通过降低失败的可能性来改进该代码。

```
struct ScopedLocker {
  ScopedLocker(MutexObject &mo_) : mo(mo_) { mo.Lock(); }
  ~ScopedLocker() { mo.Unlock(); }

  MutexObject &mo;
}; 
```

您还可以对用户隐藏实现。

```
class LockedList {
  private:
    std::list<MyClass> m_List;
    MutexObject Mutex;

  public:
    struct ScopedLocker {
       ScopedLocker(LockedList &ll);
       ~ScopedLocker();
    };
}; 
```

然后，您只需将锁定列表传递给它，而无需他们担心`MutexObject`.

您还可以让列表在内部处理所有锁定，这在某些情况下是可以的。设计问题是迭代。如果列表在内部锁定，那么这样的操作比让列表的用户决定何时锁定要糟糕得多。

```
void foo(LockedList &list) {
  for (size_t i = 0; i < 100000000; i++) {
    list.push_back(i);
  }
} 
```

一般来说，由于这样的问题，这是一个很难给出建议的话题。更多的时候，更多的是关于你如何使用一个对象。当您尝试编写*解决*多处理器编程的代码时，会有很多泄漏的抽象。这就是为什么您会看到更多工具包让人们编写满足他们需求的解决方案。

有一些[书讨论了多处理器编程](https://rads.stackoverflow.com/amzn/click/com/0123705916)，尽管它们很少。随着所有新的 C++11 特性的出现，未来几年应该会有更多的文献出现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-26T19:24:05.413

我想出了这个（我确信可以改进它以采用两个以上的参数）：

```
template<class T1, class T2>
class combine : public T1, public T2
{
public:

    /// We always need a virtual destructor.
    virtual ~combine() { }
}; 
```

这允许您执行以下操作：

```
 // Combine an std::mutex and std::map<std::string, std::string> into
    // a single instance.
    combine<std::mutex, std::map<std::string, std::string>> mapWithMutex;

    // Lock the map within scope to modify the map in a thread-safe way.
    {
        // Lock the map.
        std::lock_guard<std::mutex> locked(mapWithMutex);

        // Modify the map.
        mapWithMutex["Person 1"] = "Jack";
        mapWithMutex["Person 2"] = "Jill";
    } 
```

如果您希望使用 std::recursive_mutex 和 std::set，那也可以。

# visual-studio-2010 - 无法在 IIS 6.1 上调试 ASP 网站

> ID：11762730
> 
> 赞同：0
> 
> 时间：2012-08-01T15:37:12.050
> 
> 标签：visual-studio-2010, iis-6

我是我们公司的新手，只是想设置我的工作站。我们有一个 ASP 网站，我正在尝试在 Visual Studio 2010 中调试。在项目属性的“Web”部分中，我们选择了“使用本地 IIS Web 服务器”选项，但是当我尝试调试我正在工作的页面时我收到错误“无法在 Web 服务器上开始调试。有关常见配置错误，请参阅帮助。” 我可以在 IIS 中看到该站点（在站点下 -> 默认网站 -> SiteImWorkingOn），并且 IIS 和 VS 项目都使用 .NET 4.0。有什么建议么？

编辑：我应该提到我已经在命令提示符下运行了“aspnet regiis -i”命令，以确保 IIS 正在运行 .NET 4.0

第二次编辑：我发现 ASP.NET 没有打开，这样做后我收到以下错误：

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the      page is invalid.

Module IIS Web Core 
Notification BeginRequest 
Handler Not yet determined 
Error Code 0x8007000d 
Config Error  
Config File \\?\C:\Projects\sym_Periscope_NEAL\Periscope\Web\web.config 
Requested URL http://localhost:80/Periscope/Pages/Dist.aspx 
Physical Path C:\Projects\sym_Periscope_NEAL\Periscope\Web\Pages\Dist.aspx 
Logon Method Not yet determined 
Logon User Not yet determined 
```

# mysql - Percona 数据库复制问题

> ID：11762736
> 
> 赞同：0
> 
> 时间：2012-08-01T15:37:26.103
> 
> 标签：mysql, replication, percona

一台主服务器 3 台从机

主服务器版本：5.5.24-55-log

第一个从服务器版本：5.5.24-55

第二从服务器版本：5.5.24-55

第三个从服务器版本：5.5.25a-27.1

在前两个从属服务器上，以下类型的语句被正确复制插入 table1 (select * from table 2) insert into db2.table1(select * from table2)

在从属 3（使用更新版本的 percona db）上，语句似乎失败

所有从属服务器都有相同的 my.cnf 文件，只有 server_id 不同。

这可能是新版本软件中的错误。

我尝试卸载从属服务器，然后使用来自主服务器的最新数据重新同步它。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:57:14.497

发现问题 1\. 从机上的时区与所有其他机器不同 2\. 这种时间差异导致某些查询无法正常工作，因为查询使用的是 mysql NOW 函数

# ruby-on-rails - 使用 Paperclip、S3 和 Roo 导入 excel 文件

> ID：11762739
> 
> 赞同：0
> 
> 时间：2012-08-01T15:37:33.397
> 
> 标签：ruby-on-rails, excel, amazon-s3, paperclip

我正在尝试使用 Paperclip 导入一个 excel 文件并将其保存到 S3，然后使用 Roo gem 进行提取和解析。

当我尝试这样的事情时：

```
 @excel = Excel.new(@manifest.attachment.url) 
```

我收到以下错误：

```
 http://s3.amazonaws.com/mybucket/attachments/22/manifest.xls?1343835058 is not an Excel file 
```

我猜文件名末尾的附加时间戳导致 Roo 不认为这是一个 Excel 文件。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:59:21.957

要删除时间戳，您需要在 url 方法中传递 'false' 参数。

为你：@excel = Excel.new(@manifest.attachment.url)

您应该尝试使用 @excel = Excel.new(@manifest.attachment.url(:original, false)) 那么您将获得以下网址：

[http://s3.amazonaws.com/mybucket/attachments/22/original/manifest.xls](http://s3.amazonaws.com/mybucket/attachments/22/original/manifest.xls)

但是，如果您尝试检索图像 url，那么您应该拥有 @manifest.attachment.url(:large, false)。注意：它可以是 :large 、 :medium 或模型中您自定义的样式。

我希望这可以帮助您解决问题。

谢谢

# linux - Bash 脚本中的 Linux SED 命令从字符串中删除

> ID：11762743
> 
> 赞同：4
> 
> 时间：2012-08-01T15:37:45.103
> 
> 标签：linux, sed, strip

我一直在整理一个 bash 脚本，我需要在其中更新一个包含一些必要信息的文件。我正在使用的命令如下：

```
sudo sed '
/end/ a\
First line to update\
  param 1 'var1'\
  param 2 'var2'\
  param 3 'var3'\
  param 4 'var4'\
end\
' TestFile >TestFileNew 
```

现在这应该使用数据更新文件，并且应该如下所示：

```
end
First line to update
  param 1 'var1'
  param 2 'var2'
  param 3 'var3'
  param 4 'var4'
end 
```

该文件确实被创建并且数据在其中但是它似乎从文本中去除了'符号，我不希望这种情况发生，有人可以帮忙吗？下面是实际生产的示例：

```
end
First line to update
  param 1 var1
  param 2 var2
  param 3 var3
  param 4 var4
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T15:40:58.597

用作`""`外引号：

```
sudo sed "
/end/ a\\
First line to update\\
  param 1 'var1'\\
  param 2 'var2'\\
  param 3 'var3'\\
  param 4 'var4'\\
end\\
" TestFile >TestFileNew 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T15:55:35.917

看起来伊戈尔已经提供了一个可能适用于单引号的答案。

关于文件创建，请记住它会影响您正在运行`sudo`的程序 ( ) 作为其选项。`sed`它不会影响由您的 shell 处理的重定向。因此，如果您没有权限*作为用户*write `TestFileNew`， sudo 不会帮助您，就像您在上面使用它的方式一样。

您最好在其他地方创建输出，然后使用 sudo 将其移动到位。

```
sudo sed "/end/ ..." TestFile > /tmp/TestFileNew
sudo mv /tmp/TestFileNew ./TestFileNew 
```

或者，整个脚本可以使用 sudo 运行...即`/path/to/myscript`：

```
#!/bin/bash

sed "/end/ ..." TestFile > TestFileNew 
```

然后：

```
$ sudo /path/to/myscript 
```

然后 sudo 运行**bash**而不是 sed，特权 bash 实例负责处理脚本内的重定向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:06:24.817

有时您必须处理两种类型的引号（例如 html 和 javascript）。那么把sed命令放到一个脚本里就很方便了：

```
cat >FILE
end

cat >script.sed
/end/ a\
First line to update\
 param 1 'var1'\
 param 2 'var2'\
 param 3 'var3'\
 param 4 'var4'\
end            

sed -f script.sed FILE 
end
First line to update
  param 1 'var1'
  param 2 'var2'
  param 3 'var3'
  param 4 'var4'
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:23:50.077

`r`在这种情况下，使用 sed 的命令可能会更简单：

```
$ cat > /tmp/repl << EOF
First line to update
  param 1 'var1'
  param 2 'var2'
  param 3 'var3'
  param 4 'var4'
end
EOF
$ sed '/end/r/tmp/repl' TestFile
$ rm /tmp/repl 
```

（我忽略了 sudo/redirect 问题，但您可能想要这样做`sudo sh -c 'sed /end/r/tmp/repl/ TestFile > TestFileNew'`

# html - 如何在使用 xslt 的同时保持标签原始顺序的一种样式 xml？

> ID：11762744
> 
> 赞同：-2
> 
> 时间：2012-08-01T15:37:44.557
> 
> 标签：html, xml, xslt

这就是问题所在。我有一个 xml 文件，其中有多个标签，取决于谁编写它们，最终可能以任何顺序排列。我需要创建一个 xls 文件来设置它的样式，同时保持标签的原始顺序。这是xml：

```
<content>
<h>this is a header</h>
<p>this is a paragraph</p>
<link>www.google.com</link>
<h> another header!</h>
</content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:08:02.867

XSLT 不会自行对元素重新排序，除非您告诉它这样做。如果您正在匹配元素，并用其他元素替换它们，它只会按照我找到它们的顺序处理它们。

如果您希望简单地用 HTML 元素替换元素，您只需为每个元素编写一个匹配的模板，在其中输出您需要的 HTML 元素。例如，要将**h**元素替换为**h1**元素，您可以这样做

```
<xsl:template match="h">
   <h1>
      <xsl:apply-templates select="@*|node()"/>
   </h1>
</xsl:template> 
```

**h1**元素将在原始文档中**h**元素所在的位置输出。这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>

   <xsl:template match="content">
      <body>
         <xsl:apply-templates select="@*|node()"/>
      </body>
   </xsl:template>

   <xsl:template match="h">
      <h1>
         <xsl:apply-templates select="@*|node()"/>
      </h1>
   </xsl:template>

   <xsl:template match="link">
      <a href="{text()}">
         <xsl:apply-templates select="@*|node()"/>
      </a>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例文档时，将输出以下内容

```
<body>
   <h1>this is a header</h1>
   <p>this is a paragraph</p>
   <a href="www.google.com">www.google.com</a>
   <h1> another header!</h1>
</body> 
```

# javascript - 如何从asp.net中的JS显示页面重定向到特定页面

> ID：11762745
> 
> 赞同：0
> 
> 时间：2012-08-01T15:37:44.667
> 
> 标签：javascript, asp.net

我有一个带有母版页的 asp.net 应用程序。在其中一个页面中，我有一个按钮单击事件，它使用 javascript 打开另一个页面，如下所示。

```
string urlVerify = "VerifyEnrollmentEntries.aspx";
string fullURLVerify = "var newVerifyDataWindow = window.open('" + urlVerify +               "','_blank','height=600,width=950,status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=no,titlebar=no' ); 
ClientScript.RegisterStartupScript(this.Page.GetType(), "OpenWindow", fullURLVerify, true); 
```

此弹出页面没有母版页。这只是一个独立的页面，但却是项目的一部分。当用户单击此弹出页面上的关闭按钮时，我想关闭此页面并重定向到 asp.net 中的特定页面。现在，当单击关闭按钮时，页面关闭并显示导致弹出窗口的父页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:50:33.127

在关闭弹出窗口之前，执行 JS 代码：

```
opener.location.href = "YourRedirectUrl.aspx" 
```

它会将父级重定向到该 URL

# google-maps - 隐藏谷歌地图 v3 标记。我究竟做错了什么？

> ID：11762747
> 
> 赞同：1
> 
> 时间：2012-08-01T15:37:56.460
> 
> 标签：google-maps, toggle, google-maps-markers

当调用外部 javascript 函数 hidetype() 时，我试图隐藏选定的谷歌地图标记类别。无济于事。

我从以下网址获取了一般概念：[http ://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

下面是从 mysql 派生的 XML 中提取我的标记信息的代码。我有按类型分组的标记。

```
 downloadUrl("phpsqlajax_genxml2_snow.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "Some infoBubble HTML";
      var Gtip = "<b>" + name + "</b>";
      var icon = customIcons[type] || {};
      var hover = icon.hover;
      var hoverout = icon.icon;
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow,
      });
      marker.mytype = type;
      bindInfoWindow(marker, map, infoWindow, html, Gtip, hover, hoverout);
    }
  });
}

function hidetype(category) {
  alert(category);
    for (var i=0; i<markers.length; i++) {
      if (markers[i].mytype == category) {
        markers[i].setVisible(false);
      }
    }
  } 
```

我如何从外部尝试删除标记的一个示例是：

```
<img onclick="hidetype('1')" src=...> 
```

这当前会使用传递的类型变量发出警报，但不会删除标记。提前致谢！

# visual-studio-2008 - Visual Source Safe 签入和 Visual Studio 构建模式的最佳实践是什么？

> ID：11762756
> 
> 赞同：0
> 
> 时间：2012-08-01T15:38:16.150
> 
> 标签：visual-studio-2008, visual-sourcesafe-2005

我将 Visual Source Safe 2005 用于 8 个不同的项目。其中之一是使用其他 6 个项目作为参考的主项目（来自其他项目的 DLL）。我有一个设置项目。安装项目直接从所有 7 个项目的 Bin/Release 文件夹（包括主项目）中获取所有必需的文件 (DLL)。任何人都可以用解释来回答我的以下问题吗？

1.  在 Source Safe 中签入解决方案文件是否可以，或者我们应该始终避免它？
2.  我应该始终在 Source Safe 中签入项目文件还是应该始终避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:06:32.823

不需要签入您的 bin 文件夹。

检查您的解决方案文件是正常的。您的项目文件通常包含在此签入中。

# jquery - 如何在jqGrid中检索鼠标悬停事件的单元格信息

> ID：11762757
> 
> 赞同：5
> 
> 时间：2012-08-01T15:38:16.820
> 
> 标签：jquery, jqgrid, mouseover

这个问题是特定于 jqGrid 的。我了解到我们可以使用`.jqgrow`带有`mouseover`事件的项目来检索行信息，如下所示：

```
gridComplete: function () {
  $('.jqgrow').mouseover(function(e) {
    var rowId = $(this).attr('id');
    console.log('You rolled over ' + rowId);
  });
} 
```

我的问题是如何在这样的事件中检索列信息、单元格名称信息和单元格内容信息。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T17:05:47.153

首先，您不需要绑定*每一*`mouseover`行。*在整个网格体上绑定***一次**事件就足够了。事件的参数具有初始化为作为事件起源的对象的属性。因此，您可以使用[jQuery.closest](http://api.jquery.com/closest/)来查找当前上下文中的和元素。在您节省内存并提高解决方案性能的方式上。 ****`e``target``mouseover``<td>``<tr>`****

 ****[该演示](http://www.ok-soft-gmbh.com/jqGrid/MouseOver.htm)展示了 jqGrid 中的所有工作原理。使用的代码是

```
var cm = $grid.jqGrid('getGridParam', 'colModel');
$grid.mouseover(function(e) {
    var $td = $(e.target).closest('td'), $tr = $td.closest('tr.jqgrow'),
        rowId = $tr.attr('id'), ci;
    if (rowId) {
        ci = $.jgrid.getCellIndex($td[0]); // works mostly as $td[0].cellIndex
        if (console) {
            console.log('You rolled over the row with id="' + rowId +
               '" in the column ' + cm[ci].name);
        }
    }
}); 
```

演示将产生的输出如下所示

```
LOG: You rolled over the row with id="10" in the column note 
LOG: You rolled over the row with id="10" in the column ship_via 
LOG: You rolled over the row with id="9" in the column ship_via 
LOG: You rolled over the row with id="8" in the column ship_via 
LOG: You rolled over the row with id="8" in the column total 
LOG: You rolled over the row with id="7" in the column total 
LOG: You rolled over the row with id="7" in the column tax 
LOG: You rolled over the row with id="6" in the column tax 
LOG: You rolled over the row with id="6" in the column amount 
LOG: You rolled over the row with id="5" in the column amount 
LOG: You rolled over the row with id="4" in the column amount 
LOG: You rolled over the row with id="4" in the column invdate 
LOG: You rolled over the row with id="3" in the column invdate 
LOG: You rolled over the row with id="3" in the column name 
LOG: You rolled over the row with id="2" in the column name 
LOG: You rolled over the row with id="1" in the column name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:42:24.023

`.jqgrow`它与班级无关。

它与事件有关，它将设置`this`为`dom element`事件发生的时间。

所以意思是如果这是HTML：

```
<div class="jqgrow" data-id="232" id="blabla">Text</div> 
```

然后`this`将是鼠标悬停时的 HTML。您可以随心所欲地做任何事情。

```
$('.jqgrow').mouseover(function(e) {
  var id = $(this).attr('id');
  var dataId = $(this).data('id');
  var html = this;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:46:14.127

### 编辑

好的，没看到，您使用的是**[jQuery 网格插件](http://www.trirand.com)**。

所有列都有一个属性`role="gridcell"`，因此您可以使用基于属性的选择器来选择所有单元格：

```
// untested
$('td[role*="gridcell"]').hover(); 
```

### 第一个答案

这个答案更像是对问题的普遍答案。

我假设你有一张这样的桌子：

```
<table>
        <tr class="jqgrow">
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
</table> 
```

您可以通过以下方式获取有关悬停行中列的信息：

```
$('.jqgrow').mouseover(function(e) {
    // get all child elements (td, th) in an array
    var cols    = $(this).children();
    console.log('All cols: ' + cols);
    // to retrieve a single column as a jQuery object use '.eq()' - it's like every array redo-indexed 
    console.log('HTML from col 2: ' + cols.eq(1).html());
}); 
```

这也适用于像这样的任何其他结构：

```
<div class="jqrow">
    <div>1</div>
    <div>2</div>
    <div>3</div>
</div> 
```

如果您想悬停在每个子元素上，`.jqrow`可以将其直接附加到子元素：

```
$('.jqgrow').children().mouseover(function(e) {
    // gets the current 'column'
    var $this = $(this);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:47:19.747

```
var cm = jQuery("#list1″).jqGrid("getGridParam", "colModel");
var colName = cm[iCol]; 
```

资料来源：[http ://www.trirand.com/blog/?page_id=393/help/get-column-index-name-oncellselect-event-after-column-reorder/](http://www.trirand.com/blog/?page_id=393/help/get-column-index-name-oncellselect-event-after-column-reorder/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T15:44:22.963

如果您可以获取行ID，那么获取单元格信息并不难。

var col=$('#grid').jqGrid('getCell',rowId,columnName);

这将为该列提供数据。****

# macos - 为什么 OCaml 二进制文件在 Mac OS X 10.8 (Mountain Lion) 上崩溃？

> ID：11762774
> 
> 赞同：1
> 
> 时间：2012-08-01T15:39:09.770
> 
> 标签：macos, ocaml, osx-mountain-lion

在 Lion 上完美运行的 OCaml 程序在 Mountain Lion 上失败，在 OCaml 运行时代码中启动时出现段错误：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: 13 at address: 0x0000000000000000
0x00007fff908e1f88 in large_malloc () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:39:09.770

`ocamlopt`当启用回溯时，本机编译的 () OCaml 运行时似乎存在一个普遍的问题，这对于 Mountain Lion 来说是新的。同样的崩溃会影响*任何*OCaml 二进制文件的启动，这些二进制文件是：

*   [本机编译](http://caml.inria.fr/pub/docs/manual-ocaml/manual025.html)（相对于字节码）
*   在启用回溯的情况下运行（例如 via `OCAMLRUNPARAM=b`）

这甚至包括 OCaml 编译器工具链的一部分，它本身会在升级到 10.8 后突然停止工作。

[截至 2012-07-19，](http://article.gmane.org/gmane.comp.lang.caml.general/55354)这仍然会影响 OCaml SVN 主干（4.01.dev）。

解决方法是在使用本机编译的二进制文件时禁用回溯（取消设置`OCAMLRUNPARAM`，或`b`从参数字符串中删除）。

*更新*：
底层错误似乎是由于 OCaml 运行时实现中的堆栈对齐不足。自最初发布以来，现在正在[OCaml 错误跟踪器上对其](http://caml.inria.fr/mantis/view.php?id=5700)进行跟踪和修复。然而，就目前而言，解决方法仍然是唯一简单的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:11:58.150

问题*可能*会解决， OCaml 的 bugtracker 中[有](http://caml.inria.fr/mantis/view.php?id=5700#c7871)解释和补丁。

# asp.net - 无法从 ASP.NET 在 iPad 上打开 PDF

> ID：11762787
> 
> 赞同：4
> 
> 时间：2012-08-01T15:39:31.087
> 
> 标签：asp.net, ios, pdf, safari

我正在通过 IIS ASP.NET Web 应用程序下载 PDF（和其他类型，但让我们专注于 PDF）。该下载适用于除 iPad 和 iPhone 4S 上的 Safari 之外的所有其他平台。我知道 iOS 不支持文档下载，但 Safari 也不支持打开 PDF。单击该链接在设备上没有响应。我尝试了下面列出的几个解决方案（主要是取出/替换标题）：

[http://nilangshah.wordpress.com/2007/05/28/successfully-stream-a-pdf-to-browser-through-https/](http://nilangshah.wordpress.com/2007/05/28/successfully-stream-a-pdf-to-browser-through-https/)和 [PHP：下载文件脚本在 iPad 上不起作用](https://stackoverflow.com/questions/8849197/php-download-file-script-not-working-on-ipad)

除了“预期的 MIME”类型之外，我在设备上看不到任何错误，但我在桌面浏览器版本中也看到了错误，并且它不会停止下载。我正在通过代理运行，可以看到设备收到带有正确标头的 200 响应。我已使用该设备成功打开了其他站点的 PDF。

我刚刚开始重新熟悉 ASP 和 iOS，因此任何调试见解也将不胜感激。

代码如下所示：

```
context.Response.Buffer = false;
context.Response.Clear();
context.Response.ClearHeaders();
context.Response.ClearContent();

context.Response.ContentType = "application/pdf";

string fileName = "thefile.pdf";

System.Web.HttpBrowserCapabilities browser = context.Request.Browser;
//I have tried with and without all the possbilities in the condition below
if (!browser.Browser.Equals("iPad"))
{
    if (isDownload || viewers.Length == 0)
        context.Response.AppendHeader("Content-Disposition",
                                      string.Format("attachment; filename=\"{0}\"", fileName));
    else
        context.Response.AppendHeader("Content-Disposition", "filename=" + fileName);   
}else
{
    //context.Response.AppendHeader("Content-Disposition", string.Format("inline; filename=\"{0}\"", fileName));
}

FileStream iStream = File.Open(filePath, FileMode.Open, FileAccess.Read, FileShare.Read);
long fileSize = iStream.Length;
long fileLengthToRead = fileSize;
int chunckSize = 10000;
byte[] buffer = new byte[chunckSize];

context.Response.AppendHeader("Content-Length", fileSize.ToString());
context.Response.AppendHeader("X-Content-Type-Options", "nosniff");

try
{
    while (fileLengthToRead > 0 && context.Response.IsClientConnected)
    {
        int read = iStream.Read(buffer, 0, chunckSize);
        context.Response.OutputStream.Write(buffer, 0, read);
        context.Response.Flush();
        fileLengthToRead = fileLengthToRead - read;
    }
}
catch (HttpException) { }
finally
{
    iStream.Close();
    iStream.Dispose();
}
break; 
```

这是标题的样子：

```
GET http://sample.com/sample.pdf HTTP/1.1
Host: sample.com
Accept-Encoding: gzip, deflate
Accept-Language: en-us
User-Agent: Mozilla/5.0 (iPad; U; CPU OS 4_3_4 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8K2 Safari/6533.18.5
Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Referer: http://sample.com/sample.aspx

HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 218882
Content-Type: application/pdf
Server: Microsoft-IIS/7.5
X-Content-Type-Options: nosniff
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 01 Aug 2012 15:41:06 GMT 
```

# gwt - gwt 从字符串序列化和反序列化对象（仅限客户端）

> ID：11762791
> 
> 赞同：2
> 
> 时间：2012-08-01T15:39:48.130
> 
> 标签：gwt, serialization, deserialization

我在 GWT RPC 调用中使用了 java 对象。在 GWT 客户端上，我需要将这些对象存储在 web sql 数据库中。我需要能够将这些对象转换为字符串，然后将它们从字符串中反序列化。我见过许多方法 JSON、AutoBean、各种其他库，但似乎没有一个能够处理我在对象中确实拥有的循环引用。

有人知道可以处理我的要求的 GWT 库吗？

GWT RPC 本身使用 JSON 向客户端传输响应并可以处理循环引用（至少我认为是这样） - 所以我不明白为什么不能重用这种机制。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:04:12.023

如果 Web SQL 服务符合 JAX-RS 或 Jackson JSON，请使用 RestyGWT。

您无需进行任何转换。RestyGWT 将您的 POJO 编码为符合 Jackson 的 JSON。

另一方面，您必须阅读 JAX-RS、JAXB、Jackson 注释。这对我来说不是反面，而是学习广泛使用的 Web 服务技术的令人兴奋的机会。

> GWT RPC 本身使用 JSON 向客户端传输响应

*   *   *   这是一种不准确的认识。
*   GWT RPC 对象编码被故意混淆并且难以破译，并且版本之间的格式稳定性无法保证。
*   RPC 数据交换中没有 json。

如果您的说法是正确的，那么您就不需要扩展 GWT RemoteServiceServlet 来为 RPC 请求提供服务的 servlet。

顺便说一句，那是什么 Web SQL 服务？内部专有？

# objective-c - 奇怪的 iOS 内存管理经验

> ID：11762792
> 
> 赞同：-1
> 
> 时间：2012-08-01T15:39:51.483
> 
> 标签：objective-c, ios, ipad, memory, hardware

我们在第一代 iPad 上使用配置文件工具在 Xcode 中测试我们的应用程序，该工具在 iPad 上使用了大量内存，发现我们的应用程序的内存释放速度很慢（释放 20 MB 需要超过 1 分钟） . 但是，在我们的代码中，我们正确地释放了内存。然后，我们监控了一些专业的 3rd 方应用程序（Chrome 和 Flipboard），并注意到这些应用程序也具有相同的释放率。

iOS 或 iPad 1 的内存释放速度是否缓慢，或者分析器是否会干扰 iOS 的内存释放？

我们使用的是最新的 iOS 版本。是的，在实际使用中，我们的应用程序的性能会受到缓慢的内存释放的影响

我们通过加载应用程序并等待内存稳定然后加载媒体或视图并等待其稳定来测量释放率，然后我们返回原始视图并查看释放前一个视图所需的负载/媒体。其速度为（每 1 分钟不到 20 MB）。该应用程序永远不会回到它的原始内存使用量，即打开应用程序并等待它稳定后的使用量，在启动视图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:27:41.190

> 我们通过加载应用程序并等待内存稳定然后加载媒体或视图并等待其稳定来测量释放率，然后我们返回原始视图并查看释放前一个视图所需的负载/媒体。

这不是一个有用的基准。好的，所以你分配了一些内存。然后你告诉操作系统你不再需要它了。到目前为止还好。除非它需要其他地方的内存，否则它通常不会费心去做很多事情。保留缓存更有意义，这样如果您再次需要它，它可以更快地使用。您没有测量任何有用的东西 - 您正在测量系统需要多长时间才能在其他地方使用内存，而不是需要多长时间*才能*释放它。常识应该告诉你，一分钟释放 20MB 是不正确的。

我建议您提出一个基准来衡量您*真正*感兴趣的内容。您的应用程序将如何受到缓慢释放的影响？您确定您不会无意中将其用作您真正感兴趣的因素的不良替代品吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:45:09.313

如果您确实在需要时释放内存（即您努力减少分配内存的时间），那么您不必担心“缓慢释放”（无论这个无意义的词是什么意思）。

不要高估分析者的能力。

# sqlite - 类型不匹配，无法将 System.Data.DataRowCollection 分配给 System.Data.DataRow 数组

> ID：11762795
> 
> 赞同：0
> 
> 时间：2012-08-01T15:39:57.223
> 
> 标签：sqlite, datatable, datarow, delphi-prism, oxygene

我希望能够使用 For each 循环遍历 DataRow 列表，如下所示。

```
 ArrayOfRows: Array of DataRow;

  ArrayOfRows := dbtable.Rows;

  for each therow in ArrayofRows do
  begin
    ITagList.Add(therow['TAGNAME'].ToString);
  end; 
```

但我一直跑到错误，

> “类型不匹配，无法将 System.Data.DataRowCollection 分配给 System.Data.DataRow 数组。”

如何遍历数据表中的行列表？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:55:20.787

使用[System.Data.DataRowCollection.CopyTo()](http://msdn.microsoft.com/en-us/library/ms135383%28v=vs.100%29.aspx)，它旨在做到这一点。

```
public override void CopyTo(
Array ar,
int index
) 
```

参数是您要复制到的数组，以及复制应该开始的从零开始的索引。

# silverlight - 在 Silverlight 中将 JSON 对象反序列化为 POCO 对象

> ID：11762798
> 
> 赞同：1
> 
> 时间：2012-08-01T15:40:19.067
> 
> 标签：silverlight, json.net, signalr

我正在尝试反序列化 Silverlight 客户端中的一些 JSON 对象，这些对象通过 SignalR 发送到客户端。

这些对象已使用 TypeNameHandling = TypeNameHandling.All 设置进行序列化。

第一个问题是您不能将类库项目引用添加到 Silverlight 中，因此我使用了创建包含指向 POCO 类的链接的 Silverlight 类库的技巧。

但是在反序列化时出现错误，因为 JSON 字符串包含完整类型，包括程序集（这是不同的）。如果我操作 JSON 字符串并替换程序集名称，仍然会得到相同的错误。

这些是 POCO：

```
public abstract class MessageBase
{
    public Exception Exception { get; set; }
}    

public class AccessRCImported : MessageBase
{
    public DateTime Cob { get; set; }
} 
```

这是 JSON 字符串：

```
{"$type":"CS.RAR.ICE.Common.Messages.AccessRCImported, CS.RAR.ICE","Cob":"2012-08-01T00:00:00","Exception":null} 
```

已被连载

```
var output = JsonConvert.SerializeObject(message,
                                                 new JsonSerializerSettings
                                                     {TypeNameHandling = TypeNameHandling.All});
// Replace the assembly name
var result = output.Replace(", CS.RAR.ICE.Common", ", CS.RAR.ICE");
var ctx = ConnectionManager.GetHubContext<ServerHub>();
ctx.Clients.Notify(result); 
```

然后在 Silverlight 客户端上，我正在做

```
var message = JsonConvert.DeserializeObject< MessageBase>(onData, _serializerSettings); 
```

我得到以下错误。Silverlight 应用程序和 Silverlight 客户端库都以 Silverlight 5 为目标。

有任何想法吗？

谢谢。

`{Newtonsoft.Json.JsonSerializationException: Error resolving type specified in JSON 'CS.RAR.ICE.Common.Messages.AccessRCImported, CS.RAR.ICE'. Path '$type', line 1, position 66\. ---> System.IO.FileLoadException: Could not load file or assembly 'CS.RAR.ICE, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The requested assembly version conflicts with what is already bound in the app domain or specified in the manifest. (Exception from HRESULT: 0x80131053) at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) at System.Reflection.Assembly.Load(String assemblyString) at Newtonsoft.Json.Serialization.DefaultSerializationBinder.GetTypeFromTypeNameKey(TypeNameKey typeNameKey) at Newtonsoft.Json.Utilities.ThreadSafeStore`2.Newtonsoft.Json.Utilities.ThreadSafeStore 的AddValue(TKey key)`2.Get(TKey key) at Newtonsoft.Json.Serialization.DefaultSerializationBinder.BindToType(String assemblyName, String typeName) at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadSpecialProperties(JsonReader reader, Type& objectType, JsonContract& contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue, Object& newValue, String& id) --- End of inner exception stack trace --- at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadSpecialProperties(JsonReader reader, Type& objectType, JsonContract& contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue, Object& newValue, String& id) at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue) at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue) at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent) at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType) at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType) at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings) at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value, JsonSerializerSettings settings) at CS.RAR.ICE.ClientHub.Handle(String onData)}`

# c# - 单元测试，具有许多数据库调用的项目

> ID：11762800
> 
> 赞同：4
> 
> 时间：2012-08-01T15:40:24.363
> 
> 标签：c#, .net, unit-testing, stored-procedures

我有一个关于单元测试的问题。目前我有一个大型项目，它调用了许多 SP，并且大多数方法都没有得到回报。实际上，它是许多 SQL 调用的大型包装器。没有太多的逻辑，因为它全部保存在 SP 中，它也有部分行内 sql。

我需要对这个 c# 项目进行单元测试，但很明显，单元测试将毫无意义，因为它会调用许多 SP，所有这些都会被嘲笑。我是否担心我想错了。

我的问题是有人遇到过这个问题，他们做了什么？如果我改为进行数据库单元测试，任何见解都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:47:42.453

单元测试不应触及数据访问层，因为那将是集成测试/系统测试。您可以测试的是您的项目实际上调用了您的数据访问层。这样做会让您高枕无忧，因为在重构期间单击按钮总是会调用数据访问层。

```
//Arrange
var dataAccessMock = new Mock<IDataAccessMock>();
dataAccessMock(da => da.ExecuteSomething());

IYourApplication app = new YourApplication(dataAccessMock);

//Act
app.SomeProcessThatCallsExecuteSomething("1234567890");

/Assert
dataAccessMock.Verify(dp=>da.ExecuteSomething(), Times.Once()); 
```

*请注意，在此示例中，我使用的是[Moq](http://code.google.com/p/moq/)*

根据您的喜好对其进行测试后，您可以专注于集成测试，以验证您的存储过程是否按预期工作。为此，您可能需要做大量工作来附加处于已知状态的数据库，运行存储过程，然后恢复或丢弃您的数据库，以便可以重复测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:47:55.863

您应该将测试策略拆分为集成测试和单元测试。

对于集成测试，您可以依赖现有的数据库。您通常会在这里编写更多高级测试并验证您的应用程序是否与数据库正确交互。

对于单元测试，您应该只选择对模拟有意义的选定场景。这些通常是很多业务逻辑“位于”数据库逻辑之上并且您想要验证该业务逻辑的场景。随着时间的推移，您可以模拟出越来越多的数据库调用，但首先要确定关键点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:48:04.113

您已经发现业务逻辑通常应该进入业务层而不是数据访问层的一个原因。当然，有性能和安全问题决定的例外，但它们应该仍然是例外。

话虽如此，您仍然可以开发一种策略来测试您的存储过程（尽管取决于它们的广泛程度，将这些测试称为“单元测试”可能是正确的，也可能是不正确的）。

无论哪种方式，您都可以使用单元测试框架。

在初始化部分，将数据库的测试副本恢复到已知状态，例如通过从先前保存的副本加载它。

然后，执行执行存储过程的单元测试。由于存储过程通常不返回任何内容，因此您的单元测试代码将不得不从数据库中选择值来检查是否进行了预期的更改。

根据存储过程之间可能的交互，可能有必要在每个测试之间或相关测试组之间恢复数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:50:03.363

从单元测试的角度来看，数据/持久层可能是最常被忽视的代码（使用测试替身的真正单元测试：模拟、存根、伪造等）。如果您要连接到数据库，那么您就是在进行集成测试。我在 a) 架构良好的数据/持久层中发现价值，作为副作用，易于测试（使用接口、良好的数据访问框架抽象等，b）实际上是单元和集成测试的属性。

# maven - 使用 Maven 命令运行 Junit Suite

> ID：11762801
> 
> 赞同：40
> 
> 时间：2012-08-01T15:40:25.057
> 
> 标签：maven, maven-2, junit, test-suite

我有多个 Junit 测试套件（SlowTestSuite、FastTestSuite 等）。我想使用 maven 命令只运行特定的套件。例如

```
mvn clean install test -Dtest=FastTestSuite -DfailIfNoTests=false 
```

但它不工作。只是根本没有运行任何测试。请有任何建议。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-02T12:08:51.837

我通过在 pom 中添加属性来实现这一点：

```
<properties>
    <runSuite>**/FastTestSuite.class</runSuite>
</properties> 
```

和 maven-surefire-plugin 应该是：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <includes>
                    <include>${runSuite}</include>
                </includes>
            </configuration>
        </plugin> 
```

所以这意味着默认情况下它将运行 FastTestSuite 但您可以使用 maven 命令运行其他测试，例如 SlowTestSuite：

```
mvn install -DrunSuite=**/SlowTestSuite.class -DfailIfNoTests=false 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T22:05:46.237

您错过的关键字是 maven-surefire-plugin ：[http://maven.apache.org/plugins/maven-surefire-plugin/](http://maven.apache.org/plugins/maven-surefire-plugin/)。

用法是：

```
<project>
  [...]
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.1</version>
        <configuration>
          <includes>
            <include>**/com.your.packaged.Sample.java</include>
          </includes>
        </configuration>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

如果您对堆栈溢出进行一些搜索，您可能会找到信息：

[使用 maven-failsafe-plugin 在 Maven 中运行 JUnit4 测试套件](https://stackoverflow.com/questions/7792886/running-a-junit4-test-suite-in-maven-using-maven-failsafe-plugin) [使用带有 Maven Failsafe 插件的 JUnit 类别](https://stackoverflow.com/questions/11542530/using-junit-categories-with-maven-failsafe-plugin)

此外，您可以定义配置文件，如 fastTest，将通过向 cmd 行添加参数来触发：

```
mvn package -PfastTests 
```

该配置文件也将包含一些内容。

# asp.net - ASP.NET 获得未来 6 个月

> ID：11762802
> 
> 赞同：0
> 
> 时间：2012-08-01T15:40:26.157
> 
> 标签：asp.net, datetime

所以我想做的是在下拉框中获得未来六个月，我正在尝试类似的东西

```
 public List<String> GetTrainingDates()
    {
        var monthList = new List<String>();
        var currentMonth = DateTime.Now.Month;
        for(var i = currentMonth; i <= currentMonth + 6; i++)
        {
            monthList.Add(CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(i));
        }
        return monthList;
    } 
```

但是当然这会大于 12，所以必须在 12 重新开始，然后再从 1 开始。

只是想知道是否有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:44:05.273

只需使用[`%`模运算符](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)：

```
monthList.Add(CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(
               ((i - 1) % 12) + 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:44:16.643

```
 public List<String> GetTrainingDates()
        {
            var monthList = new List<String>();
            var currentDate = DateTime.Now();
            for(var i = 0; i <= 6; i++)
            {              
                monthList.Add(CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(currentDate.AddMonths(i).Month));
            }
            return monthList;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:44:52.303

使用类的`.AddMonths`功能`DateTime`...

```
public List<String> GetTrainingDates()
{
    var monthList = new List<String>();
    var month;
    for(var i = 1; i <= 6; i++)
    {
       month = DateTime.Now.AddMonths(i).Month;
       monthList.Add(CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(month));
    }
    return monthList;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:40:19.840

简单地说，你可以使用`LINQ`表达式`Range`......

```
 List<string> listMonth = Enumerable.Range(1, 6).ToList()
                             .Select(i => CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(DateTime.Now.AddMonths(i).Month))
                             .ToList(); 
```

# google-apps-script - 使用脚本计算 Google 电子表格列中的重复值

> ID：11762808
> 
> 赞同：3
> 
> 时间：2012-08-01T15:40:43.823
> 
> 标签：google-apps-script, google-sheets, countif

我想使用脚本计算值在电子表格的特定列中再次出现的次数，以便在提交表单时使用计数填充不同的列（同一行）。这些是我想计算的 B 列中的值：

6 ACM
5 ACM
4 ACM
5 CGC
7 CGC
6 ACM
7 ACM
7 ACM

因此，如果计算工作正常，C 列将填充这些数字：

1
1
1
1
1
2
1
2

我知道如何读取数据以及如何写入电子表格，但我不知道如何实际计算这些值。这是我到目前为止所拥有的：

```
function countif() {
   var ss = null;
  try {
    ss = SpreadsheetApp.openById("0AliYViHYAwaNdHQyMXlKT2Q5UElQY184T3BWYTRiM2c");
  } catch (ex) {
    ss = SpreadsheetApp.getActiveSpreadsheet();
  }
  var sheet = ss.getSheetByName("Sheet1");
  var lastLine = sheet.getLastRow();
  var data = sheet.getRange("B2:B").getValues();
  var count = 0;

//need help here

  sheet.getRange(lastLine,3).setValue(count);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:26:08.450

将这段代码放在您的//需要帮助部分。

```
for (var i = 0 ; i < lastLine ; i++){
  var count = 1;
  for ( var j = 0 ; j < i ; i ++) {
    if (data[j][0] == data[i][0] ){
      count++;
    }
  }
  sheet.getRange('C' + (i+1).toString()).setValue(count);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:17:32.117

作为替代方案，您可以使用在 C1 中输入的电子表格函数来实现这一点：

```
=ArrayFormula(IF(ROW(B:B)=1;"Count";IF(LEN(B:B);MMULT((ROW(B:B)>=TRANSPOSE(ROW(B:B)))*(B:B=TRANSPOSE(B:B));SIGN(ROW(B:B)));IFERROR(1/0)))) 
```

# php - 如何在 php 中使用 page 的值作为 other 的元标记？

> ID：11762809
> 
> 赞同：0
> 
> 时间：2012-08-01T15:40:52.903
> 
> 标签：php, facebook-opengraph

我有两个页面，其中的内容是动态提供的，第一个 index.php 在我单击链接时包含另一个页面 person.php：

**索引.php：**

```
<?php include("db1.php");
define('WP_USE_THEMES', false);
require('blog/wp-blog-header.php');
$pages=array(
                 "person"=>"person.php"

                 ); 

?>
<!DOCTYPE html>
<head>
<title>Untitled Document</title>
<meta property="og:title" content=""/>

    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
</head>

<body>
<?
    $sql="select id, name,title,image from persons  where cat =10 ";
    $rs=mysql_query($sql)or die(mysql_error());
    if(list($id,$name,$title,$image)=mysql_fetch_array($rs)){
        ?>
<a href="?page=person&p=<? echo $id;?>" id="<? echo $id;?>" class="details">
<?
    }
    ?>
<div class="twelve columns" id="persons">

        <?
if($_GET["page"]=="")
                    $p="persons1";
                else
                    $p=$_GET["page"];

                if($pages[$p]!="")
                    include($pages[$p]);
                else
                    echo "page not found ";
                    ?>
                  </div>
</body>
</html> 
```

**第 2 页：person.php：**

```
<? include("db1.php");?>
<?php
define('WP_USE_THEMES', false);
require('blog/wp-blog-header.php');
?>
<div class="row">
    <div class="twelve columns">
        <div class="eight columns">

    <?
    if(isset($_GET['p'])){
$id=str_replace('-',' ',(string)$_GET['p']);
$name1="";
    $sql="select id, name,title,details,image,cat from persons  where name ='".$id."' order by name asc";
    $rs=mysql_query($sql)or die(mysql_error());
    if(list($id,$name,$title,$details,$image,$cat)=mysql_fetch_array($rs)){
        $a=$name;
  ?>
    <h3><? echo $name;?></h3>
    <h5><? echo $title;?></h5>
    <p align="justify">
        <img alt="<? echo $name;?>" src="images/persons/<? echo $image?>" title="<? echo $name;?>" style="float:right; margin-left:15px;" />
        <? echo $details;?>
    </p>
    <?
    }
    }
?> 
```

包含页面时如何在 index.php 的元标记中使用 person.php 页面的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:26:41.970

您可以使用 php 全局关键字声明要使用的变量，以在两个文件中定义变量。详见此处： http: [//us3.php.net/manual/en/language.variables.scope.php](http://us3.php.net/manual/en/language.variables.scope.php)

但是，使用像 ($name,$title,$details,$image) 这样的通用名称必然会导致冲突，尤其是在 Wordpress 环境中。最好的办法是选择一个唯一的变量名，将其声明为一个数组，并将这些项目中的每一项设置为元素：

```
 global $amer_enaya_fb_metadata;
 $amer_enaya_fb_metadata = array( 'name' => $name, ... ); 
```

# codeigniter - CIUnit 测试 foostack

> ID：11762810
> 
> 赞同：0
> 
> 时间：2012-08-01T15:40:54.323
> 
> 标签：codeigniter, phpunit

这里有人用过[CIUnit](http://foostack.com/ "CIUnit")吗？

难以理解。T_T。

我在做什么很简单

例如

我有一个控制器方法 myphp()

```
function myphp()
{
 echo 'boom';
} 
```

CI 单元测试：

```
public function setUp()
{
    // Set the tested controller
    $this->CI = set_controller('home');
           // date_default_timezone_set('America/Los_Angeles');
}

function testMyPhp()
{
    $this->CI->myphp();

    $out = output();
    var_dump($out); //return empty eventhough function myphp is returning a string ('boom')
} 
```

发生了什么。？？我只是想测试我是否可以获取我的方法 myphp 的输出。

# c++ - 如何测试数据包是否发送正确？

> ID：11762812
> 
> 赞同：0
> 
> 时间：2012-08-01T15:40:57.263
> 
> 标签：c++, python, testing, networking

在我的应用程序中，我通过**原始套接字**将数据包发送到另一台计算机，而不是取回数据包并通过原始套接字将返回数据包写入另一台计算机。我的应用程序是在 Ubuntu 上运行的 c++ 应用程序，使用 nfqueue。

我想测试计算机 1 和计算机 2 的发送数据包，以检查它们是否符合预期。我需要编写一个自动化测试来检查我的程序，这个自动化测试需要监听 eth 加载发送的数据包并检查它们是否符合预期（ip、端口、有效负载）。

我正在寻找一种简单的方法（工具（带有简单的 API）、代码）来做到这一点。 **我需要一种简单的方法来收听（自动） eth 。** 我更喜欢测试将检查发送者，但可能很难找到一个 api 来监听 eth（我通过原始套接字发送），所以一个建议的 API 来检查接收者的计算机也很好。测试应用程序可以用 c++、java、python 编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:55:14.513

自动生成大量随机数据包，将列表提供给两台计算机并开始发送它们，当收到时，让它们对照列表进行检查。计算机 1 将发送，然后等待计算机 2 的回复。计算机 2 将检查数据包，然后发送成功或失败数据包。在任一计算机上记录结果（没关系），然后您可以从日志文件中生成统计信息。如果需要，在两个方向上使用此方法来测试两个连接。在python中应该非常简单。

或者疯狂地使用汉明码： [http](http://en.wikipedia.org/wiki/Hamming_code) ://en.wikipedia.org/wiki/Hamming_code （wiki） [http://lionel.textmalaysia.com/hamming-code-in-python.html](http://lionel.textmalaysia.com/hamming-code-in-python.html)（解释和一些代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:55:41.157

检查数据包是否已正确发送的唯一方法是在接收端验证它的完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T15:47:13.170

我在接收器计算机上运行 tcpdump 并将所有数据包保存到文件中。我用 python 分析了 tcpdump，并在测试中检查了数据包是否按预期发送。

# c++ - 回到 C++，带指针的 void 函数，如何使 get 函数

> ID：11762813
> 
> 赞同：3
> 
> 时间：2012-08-01T15:41:03.887
> 
> 标签：c++, pointers, constructor, void

我有一个我正在做的项目，它实际上是我很久以前成功完成的一个学校项目。我已经有一段时间没有使用 C++ 了，我在重新开始使用 C++ 时遇到了一些问题，尤其是使用指针时。我的问题是，如果我需要这样的获取和设置功能

```
 class Student
    {
    private:
            char firstName[64];
            char lastName[64];
    public:
            void setName(char *fName, char *lName);
            void getName(char *fName, char *lName);
    }

    void Student::setName(char *fName, char *lName);
    {
            firstName = *fName;
            lastName = *lName;
    } 
```

当尝试创建我的 getName 函数时，我似乎很困惑我应该如何返回函数返回 void 的名称。我知道它并不一定要返回它，如果它为可以返回的东西设置了一个值，但我想我对指针已经够生疏了，我似乎无法完成这项工作。我已经尝试了一些我认为不起作用的东西，比如返回值，但我不确定这个 get 函数会发生什么。

```
 void Student::getName(char *fName, char *lName);
    {

    }

    int main()
    {
            char myFirstName[64] = "John"
            char myLastName[64] = "Doe"

    //testing to see if it's reading the char arrays correctly.
    cout << "Your Name is:" << myFirstName << " "  << myLastName << endl;

    Student aStudent;
    aStudent.setName(myFirstName, myLastName);

    //This part is where i'm confused.  and i'm sure some above is confusing as well.
    getStudent = aStudent.getName();

    } 
```

我想也许我可以通过构造函数返回私有变量，但是为什么我需要一个 get 函数呢？我只是重做这个旧任务以重新回到 C++ 中，我一直在做更多的网络管理工作，并且忽略了这个足够长的时间，显然我失去了理智。提前致谢，如果您需要更多信息，请告诉我，我尽量做到彻底。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:51:53.707

我冒昧地将您的 C-with-classes 代码转换为 C++ 代码：

```
class Student
{
private:
        std::string firstName;
        std::string  lastName;
public:
        void setName(const std::string& fName, const std::string& lName);
        void getName(std::string& fName, std::string& lName);
} 
```

该`getName`函数通过引用获取参数，因此对它们的任何更改都将反映在函数之外：

```
void Student::setName(const std::string& fName, const std::string& lName);
{
        firstName = fName;
        lastName = lName;
}
void Student::getName(std::string& fName, std::string& lName);
{
        fName = firstName ;
        lName = lastName ;
}

int main()
{
    std::string myFirstName = "John"
    std::string myLastName = "Doe"

    //testing to see if it's reading the char arrays correctly.
    cout << "Your Name is:" << myFirstName << " "  << myLastName << endl;

    Student aStudent;
    aStudent.setName(myFirstName, myLastName); 
```

在这里，原本为空的`returnedFirstName`并`returnedLastName`在函数内部进行了修改：

```
 //This part is where i'm confused.  and i'm sure some above is confusing as well.
    std::string returnedFirstName;
    std::string returnedLastName;
    aStudent.getName(returnedFirstName,returnedLastName);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T15:53:28.503

我建议您使用 std::string 而不是 char 数组。

因此，您的 getName 函数应如下所示：

```
 std::string Student::getName()     {
    return firstName + lastName;
 } 
```

也可以使用指针并返回 void，但更困难。在调用 getName 函数之前，您必须分配一个数组来保存字符串。您的代码应如下所示：

```
char firstName[100]
char lastName[100];
aStudent.getName(firstName, lastName); 
```

您的 getName 应如下所示：

```
void Student::getName(char *fName, char *lName){
   strcpy(fName, firstName);
   strcpy(lName, lastName); 
} 
```

第一个选择是你的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:48:03.960

您已经使用 out 参数对其进行了建模。所以你需要做。

```
char f[64];
char l[64];
aStudent.getName(f, l); 
```

我也很困惑。它甚至可以工作吗？你只是存储`char`在你的`Student`对象中。既不是 a`char array`也不是 a`char*`

在 C++ 中`std::string`，我们经常避免使用 C 样式字符串，除非明确要求它与任何其他库一起使用。

可以有多种方法来为您的`Student`班级建模。

```
class Student{
  private:
     std::string firstName;
     std::string lastName;
  public:
     void setName(const std::string& fName, const std::string& lName);
     std::string getName() const;
     void getName(std::string& fname, std::string& lname) const;
}

std::string Student::getName() const{
    return firstName+" "+lastName;
}
void Student::getName(std::string& fname, std::string& lname) const{
    fname = firstName;
    lname = lastName;
} 
```

如果您想要名字和姓氏，您可以在之后`std::pair`或使用`boost::tuple`

```
class Student{
  public:
    typedef std::pair<std::string, std::string> NamePairT
  private:
     NamePairT _namePair;
  public:
     void setName(const NamePairT& namePair);
     NamePairT getName() const;
}

void Student::setName(const NamePairT& namePair) const{
    _namePair = namePair;
}
NamePairT Student::getName() const{
    return _namePair;
}

Student s;
s.setName(std::make_pair("Some", "One"));
Student::NamePairT name = s.getName();
std::cout << s.first << " " << s.second; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T16:47:55.607

首先，“工作”代码：

```
#include <string.h>

class Student
{
private:
        char firstName[64];
        char lastName[64];
public:
        void setName(const char *fName, const char *lName)
        {
            strcpy(firstName, fName);
            strcpy(lastName, lName);
        }

        void getName(char *fName, char *lName) const
        {
            strcpy(fName, firstName);
            strcpy(lName, lastName);
        }
}; 
```

现在，为什么你应该使用`std::string`：

此代码对缓冲区溢出开放。如果名称不适合分配的数组怎么办？对于`setName`，这可以通过使用来克服，`strncpy`因为可用缓冲区的大小是已知的。但是，对于`getName`，您的教授给您的签名没有关于目标缓冲区大小的信息，因此完全不可能防止写到末尾。 `std::string`，另一方面，两者都知道它的缓冲区大小，并且可以根据需要重新分配以存储尽可能多的数据，因此不会发生缓冲区溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T15:50:34.953

你的方法返回 void 所以`getStudent = aStudent.getName();`没有意义。如果您尝试将 *fName 和 *lName 设置为 aStudent 的值，您可以执行以下操作

```
void Student::getName( char *fName, char *lName ){
  fName = firstName;
  lName = lastName;
  } 
```

并在 main 中设置值，例如：

```
char *fName, *lName;
aStudent( fName, lName); 
```

# python - 如何重新采样包含 dytpe 十进制值的 python pandas TimeSeries？

> ID：11762815
> 
> 赞同：6
> 
> 时间：2012-08-01T15:41:19.463
> 
> 标签：python, decimal, pandas, series

我有一个熊猫`Series`对象，里面装满了十进制的 dtype Decimal。我想使用新的 pandas 0.8 函数来重新采样十进制时间序列，如下所示：

```
resampled = ts.resample('D', how = 'mean') 
```

尝试此操作时，我收到“GroupByError：没有要聚合的数字类型”错误。我认为问题是 np.mean 在内部用于重新采样值，并且 np.mean 期望浮点数而不是小数。

感谢这个论坛的帮助，我设法使用 groupBy 和 apply 功能解决了一个类似的问题，但我也很想使用很酷的 resample 功能。

[如何在具有 Decimal 类型值的 pandas TimeSeries 上使用 mean 方法？](https://stackoverflow.com/questions/11459106/how-use-the-mean-method-on-a-pandas-timeseries-with-decimal-type-values)

知道如何解决这个问题吗？

这是创建错误的完整 ipython 会话：

```
In [37]: from decimal import Decimal

In [38]: from pandas import *

In [39]: rng = date_range('1.1.2012',periods=48, freq='H')

In [40]: rnd = np.random.randn(len(rng))

In [41]: rnd_dec = [Decimal(x) for x in rnd]

In [42]: ts = Series(rnd_dec, index=rng)

In [43]: ts[0:3]

Out[43]:
2012-01-01 00:00:00    -0.1020591335576267189022559023214853368699550628
2012-01-01 01:00:00    0.99245713975437366283216533702216111123561859130
2012-01-01 02:00:00    1.80080710727195758558139004890108481049537658691
Freq: H

In [44]: type(ts[0])
Out[44]: decimal.Decimal

In [45]: ts.resample('D', how = 'mean')
---------------------------------------------------------------------------
GroupByError                              Traceback (most recent call last)
C:\Users\THM\Documents\Python\<ipython-input-45-09c898403ddd> in <module>()
----> 1 ts.resample('D', how = 'mean')

C:\Python27\lib\site-packages\pandas\core\generic.pyc in resample(self, rule, how,     axis, fill_method, closed, label, convention, kind, loffset, l
imit, base)
    187                               fill_method=fill_method, convention=convention,
    188                               limit=limit, base=base)
--> 189         return sampler.resample(self)
    190
    191     def first(self, offset):

C:\Python27\lib\site-packages\pandas\tseries\resample.pyc in resample(self, obj)
     65
     66         if isinstance(axis, DatetimeIndex):
---> 67             rs = self._resample_timestamps(obj)
     68         elif isinstance(axis, PeriodIndex):
     69             offset = to_offset(self.freq)

C:\Python27\lib\site-packages\pandas\tseries\resample.pyc in _resample_timestamps(self, obj)
    184             if len(grouper.binlabels) < len(axlabels) or self.how is not None:
    185                 grouped  = obj.groupby(grouper, axis=self.axis)
--> 186                 result = grouped.aggregate(self._agg_method)
    187             else:
    188                 # upsampling shortcut

C:\Python27\lib\site-packages\pandas\core\groupby.pyc in aggregate(self, func_or_funcs,    *args, **kwargs)
   1215         """
   1216         if isinstance(func_or_funcs, basestring):
-> 1217             return getattr(self, func_or_funcs)(*args, **kwargs)
   1218
   1219         if hasattr(func_or_funcs,'__iter__'):

C:\Python27\lib\site-packages\pandas\core\groupby.pyc in mean(self)
    290         """
    291         try:
--> 292             return self._cython_agg_general('mean')
    293         except GroupByError:
    294             raise

C:\Python27\lib\site-packages\pandas\core\groupby.pyc in _cython_agg_general(self, how)
    376
    377         if len(output) == 0:
--> 378             raise GroupByError('No numeric types to aggregate')
    379
    380         return self._wrap_aggregated_output(output, names)

GroupByError: No numeric types to aggregate 
```

任何帮助表示赞赏。谢谢，托马斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T21:31:04.473

我自己找到了答案。可以为 resample 的 'how' 参数提供一个函数：

```
f = lambda x: Decimal(np.mean(x))
ts.resample('D', how = f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:05:41.260

我收到 DataFrame 中对象类型列的错误。我通过使用解决了它

``df.resample('D', method='ffill', how=lambda c: c[-1])``

# mysql - 在mysql中合并两个表

> ID：11762825
> 
> 赞同：1
> 
> 时间：2012-08-01T15:41:57.133
> 
> 标签：mysql, sql

我有三张桌子

```
 table name: tags
          id (int)
          tag_name (vharchar)    

   table name: messages
          id (int)
          message_title (vharchar)
          message_content(vharchar)

    table name: message_tag
          message_id (int)
          tag_id (int) 
```

我已经尝试过这段代码，但它不起作用（返回空）

```
SELECT messages.message_title, messages.message_content, tags.tag_name
            FROM messages
            INNER JOIN message_tag ON messages.id = message_tag.message_id
            INNER JOIN tags ON tags.id = message_tag.tag_id
            WHERE message_tag.tag_id =191
            AND message_tag.tag_id =19
            AND message_tag.tag_id =31
            ORDER BY RAND( )
            LIMIT 20 
```

我想选择连接到标签 191、19 和 31 的随机 20 行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:47:46.083

```
SELECT messages.message_title, messages.message_content, tags.tag_name
        FROM messages
        INNER JOIN message_tag ON messages.id = message_tag.message_id
        INNER JOIN tags ON tags.id = message_tag.tag_id
        WHERE message_tag.tag_id IN (191, 19, 31)
        ORDER BY RAND( )
        LIMIT 20 
```

使用`IN`而不是`AND`. 这将为您带来至少链接到这些特定标签之一的消息。

**更新：** *如果*您想获取所有 3 个标签都存在的消息，您可以这样做（假设您在 message_tag 中的行是唯一的）：

```
 SELECT messages.message_title, messages.message_content, tags.tag_name
        FROM messages
        INNER JOIN message_tag ON messages.id = message_tag.message_id
        INNER JOIN tags ON tags.id = message_tag.tag_id
        WHERE message_tag.tag_id IN (191, 19, 31)
        GROUP BY messages.id
        HAVING COUNT(messages.id) > 2
        ORDER BY RAND( )
        LIMIT 20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:46:47.173

它**不会**检索行，因为您的条件无效。它总是会导致`false`. `tag_id`只能有**1 个可能的值**，而不是很多。试试这个：

```
SELECT messages.message_title, messages.message_content, tags.tag_name
FROM messages
         INNER JOIN message_tag 
              ON messages.id = message_tag.message_id
         INNER JOIN tags 
              ON tags.id = message_tag.tag_id
WHERE message_tag.tag_id IN (191, 19, 31)
ORDER BY RAND( )
LIMIT 20 
```

使用`IN`子句代替`AND`

**更新 1**

```
SELECT messages.message_title, messages.message_content, tags.tag_name
FROM messages
         INNER JOIN message_tag 
              ON messages.id = message_tag.message_id
         INNER JOIN tags 
              ON tags.id = message_tag.tag_id
WHERE message_tag.tag_id IN (191, 19, 31)
GROUP BY messages.message_title
HAVING COUNT(*) = 3
ORDER BY RAND( )
LIMIT 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:48:16.547

该条件`message_tag.tag_id =191 AND message_tag.tag_id =19 AND message_tag.tag_id =31`表示离散集的交集，因此它表示一个空集。

你需要的是这个集合的联合。只需将 替换`AND`为`OR`。

# jquery - Jquery 仅适用于我的代码中的 firebug（无 console.log()）

> ID：11762826
> 
> 赞同：0
> 
> 时间：2012-08-01T15:41:58.253
> 
> 标签：jquery, firefox, console, firebug

这张卡应该会为卡片翻转设置动画。它适用于除 FF 之外的所有浏览器，甚至 ie8。只有在打开 firebug 时，它才能与 Firefox 一起使用。我没有console.log()，所以我很好奇它为什么不起作用。这是我的代码，感谢您的帮助。

```
var margin = $("#image1").width() / 2;
var width = $("#image1").width();
var height = $("#image1").height();
var margin = $("#image3").width() / 2;
var width = $("#image3").width();
var height = $("#image3").height();
var margin = $("#image5").width() / 2;
var width = $("#image5").width();
var height = $("#image5").height();

$(document).ready(function() {
    $("#image2").stop().css({
        width: '0px',
        height: '' + height + 'px',
        marginLeft: '' + margin + 'px',
        opacity: '0.5'
    });
    $("#reflection2").stop().css({
        width: '0px',
        height: '' + height + 'px',
        marginLeft: '' + margin + 'px'
    });
    $("#reveal").click(function() {
        $("#image1").stop().animate({
            width: '0px',
            height: '' + height + 'px',
            marginLeft: '' + margin + 'px',
            opacity: '0.5'
        }, {
            duration: 500
        });
        window.setTimeout(function() {
            $("#image2").stop().animate({
                width: '' + width + 'px',
                height: '' + height + 'px',
                marginLeft: '0px',
                opacity: '1'
            }, {
                duration: 500
            });
        }, 500);
    });
    $("#image2").click(function() {
        $("#image2").stop().animate({
            width: '0px',
            height: '' + height + 'px',
            marginLeft: '' + margin + 'px',
            opacity: '0.5'
        }, {
            duration: 500
        });
        window.setTimeout(function() {
            $("#image1").stop().animate({
                width: '' + width + 'px',
                height: '' + height + 'px',
                marginLeft: '0px',
                opacity: '1'
            }, {
                duration: 500
            });
        }, 500);
    });

    $("#image4").stop().css({
        width: '0px',
        height: '' + height + 'px',
        marginLeft: '' + margin + 'px',
        opacity: '0.5'
    });
    $("#reflection2").stop().css({
        width: '0px',
        height: '' + height + 'px',
        marginLeft: '' + margin + 'px'
    });
    $("#reveal").click(function() {
        $("#image3").stop().animate({
            width: '0px',
            height: '' + height + 'px',
            marginLeft: '' + margin + 'px',
            opacity: '0.5'
        }, {
            duration: 500
        });
        window.setTimeout(function() {
            $("#image4").stop().animate({
                width: '' + width + 'px',
                height: '' + height + 'px',
                marginLeft: '0px',
                opacity: '1'
            }, {
                duration: 500
            });
        }, 500);
    });
    $("#image4").click(function() {
        $("#image4").stop().animate({
            width: '0px',
            height: '' + height + 'px',
            marginLeft: '' + margin + 'px',
            opacity: '0.5'
        }, {
            duration: 500
        });
        window.setTimeout(function() {
            $("#image3").stop().animate({
                width: '' + width + 'px',
                height: '' + height + 'px',
                marginLeft: '0px',
                opacity: '1'
            }, {
                duration: 500
            });
        }, 500);
    });

    $("#image6").stop().css({
        width: '0px',
        height: '' + height + 'px',
        marginLeft: '' + margin + 'px',
        opacity: '0.5'
    });
    $("#reflection2").stop().css({
        width: '0px',
        height: '' + height + 'px',
        marginLeft: '' + margin + 'px'
    });
    $("#reveal").click(function() {
        $("#image5").stop().animate({
            width: '0px',
            height: '' + height + 'px',
            marginLeft: '' + margin + 'px',
            opacity: '0.5'
        }, {
            duration: 500
        });
        window.setTimeout(function() {
            $("#image6").stop().animate({
                width: '' + width + 'px',
                height: '' + height + 'px',
                marginLeft: '0px',
                opacity: '1'
            }, {
                duration: 500
            });
        }, 500);
    });
    $("#image6").click(function() {
        $("#image6").stop().animate({
            width: '0px',
            height: '' + height + 'px',
            marginLeft: '' + margin + 'px',
            opacity: '0.5'
        }, {
            duration: 500
        });
        window.setTimeout(function() {
            $("#image5").stop().animate({
                width: '' + width + 'px',
                height: '' + height + 'px',
                marginLeft: '0px',
                opacity: '1'
            }, {
                duration: 500
            });
        }, 500);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:12:25.127

使用[jQuery Lint](https://github.com/padolsey/jQuery-Lint)并查看打开 Firebug 时出现的错误。在 jQuery 之后将其包含在您的标记中，如下所示：

```
<script src="jquery.js"></script>
<script src="jquery.lint.js"></script> 
```

# django - 隐藏选择多个项目Django

> ID：11762830
> 
> 赞同：0
> 
> 时间：2012-08-01T15:42:17.483
> 
> 标签：django, django-forms, django-orm

我的 django 应用程序中有几种需要支持附件的表单。每个表单实例可以有任意数量的附件，包括没有。我想展示一个基于 jQuery 的上传小部件来管理这些上传，允许异步处理上传。附件存储在它们自己的模型中，因此从附件模型到需要附件的每个模型都是多对多的。当附件成功上传和处理后，处理上传的视图将返回附件模型中的 id，然后将其插入到表单的隐藏字段中。我目前正在尝试决定如何最好地在表格中表示这一点。

一种方法是简单地使用一个隐藏输入，该输入采用逗号分隔的 id 列表。然后，这将需要在提交时进行大量手动处理和验证，我不禁觉得这是可以避免的。

在其他地方，我将 HiddenInput 用于单个值，我正在做类似的事情并动态地将项目添加到表单中的相关模型中。但是，我看不到如何将其从简单的外键直接扩展到多对多。

任何人都可以提出最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T16:01:48.523

尝试使用`formsets`或`model_formsets`创建用于创建/编辑多个对象的表单，您也可以使用`javascript`在浏览器中动态添加表单。

# ios - 带有图案边框的自定义 PopOver

> ID：11762832
> 
> 赞同：3
> 
> 时间：2012-08-01T15:42:22.653
> 
> 标签：ios, cocoa-touch, ipad, custom-controls, uipopovercontroller

我正在尝试像这样实现popover： ![自定义弹出框](../Images/67f056004ba33525c4ca1b68566f07f8.png)

我花了很多时间尝试自定义`UIPopoverController`和`UIPopoverBackgroundView`. 据我了解，使用弹出框的公共 API 是不可能完成我的任务的。有可能的：

1.  要使用具有固定角和可拉伸中心的小图像，在这种情况下，我将在侧面拉伸条纹。而且我还会在箭头“下方”显示图像。
2.  用条纹填充边框，但在这种情况下，我没有圆角。我也有烦人的内心阴影： ![在此处输入图像描述](../Images/e4c26ebbdc290eb9c530b4723112b239.png)

    backgroundImageView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"airmail_pattern"]];

有没有其他方法可以重用标准弹出框，或者我必须只使用 UIViewController 来实现该行为？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:18:55.723

WEPopover 似乎做了你想做的事。它具有自定义背景属性，我猜它可以用于此目的。（我还没用过这个）

[https://github.com/werner77/WEPopover](https://github.com/werner77/WEPopover)

# android - 相对布局位置问题

> ID：11762839
> 
> 赞同：-1
> 
> 时间：2012-08-01T15:42:33.417
> 
> 标签：android, android-layout, android-relativelayout

我有一个`layout`包含 4 个水平的，每个内部`LinearLayouts`有 3`ImageButtons`个。

现在我想将它们转换`LinearLayout`为，`RelativeLayout`因为我需要添加更多元素并且必须使用`toRightOf`等`alignParentTop`。

这是我用来进行此更改的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:background="@drawable/bugbox_wall_port" >
    <LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center_horizontal"
        android:orientation="vertical" >
        <Button
            android:id="@+id/writeNewMsg"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="New" />
        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/spyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgspy" />
            <ImageButton
                android:id="@+id/playerMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/msgplyr"
                android:layout_toRightOf="@id/spyMsgs" />
            <ImageButton
                android:id="@+id/allyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgally"
                android:layout_toRightOf="@id/playerMsgs" />
        </RelativeLayout>
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/battleMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgbatt" />
            <ImageButton
                android:id="@+id/skynetMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/msgnet" />
            <ImageButton
                android:id="@+id/transportMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgtrans" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/expeditionMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgexp" />
            <ImageButton
                android:id="@+id/newsMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/msgnews" />
            <ImageButton
                android:id="@+id/buildingMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgbuild" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/allMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgall" />
            <ImageButton
                android:id="@+id/binMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:background="@drawable/msgbin" />
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

但我不知道为什么，这`RelativeLayout`是有问题的。

这是我以图形方式解释的图像，这是我的问题：

[http://img811.imageshack.us/img811/5479/stackes.jpg](http://img811.imageshack.us/img811/5479/stackes.jpg)

它快把我逼疯了。我不知道为什么会这样。我以前使用过 RelativesLayout，它们没有问题。

所以我的问题是：为什么会这样？然后我该如何解决这个错误？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:38:52.717

试试这个。我注释掉了底部的线性布局。如果相对布局按您希望的方式工作，那么您可以相应地调整其他线性。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:background="@drawable/bugbox_wall_port" >
    <LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_gravity="center_horizontal"
        android:orientation="vertical" >
        <Button
            android:id="@+id/writeNewMsg"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="New" />
        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/spyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
            <ImageButton
                android:id="@+id/playerMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/ic_launcher"
                android:layout_toRightOf="@id/spyMsgs" />
            <ImageButton
                android:id="@+id/allyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher"
                android:layout_toRightOf="@id/playerMsgs" />
        </RelativeLayout>
        <!-- <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/battleMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgbatt" />
            <ImageButton
                android:id="@+id/skynetMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/msgnet" />
            <ImageButton
                android:id="@+id/transportMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgtrans" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/expeditionMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgexp" />
            <ImageButton
                android:id="@+id/newsMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/msgnews" />
            <ImageButton
                android:id="@+id/buildingMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgbuild" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/allMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgall" />
            <ImageButton
                android:id="@+id/binMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:background="@drawable/msgbin" />
        </LinearLayout> -->
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:50:11.387

解决了。我正在以编程方式为视图设置 ID，但我没有意识到......

# html - 页面底部的页脚

> ID：11762840
> 
> 赞同：0
> 
> 时间：2012-08-01T15:42:41.647
> 
> 标签：html, css

我的网站中有一个页面，当我向下滚动页面时，页脚每次都位于页面底部时，我希望页脚保持在页面底部。现在，当我向下滚动页脚时，页脚保持在同一位置并且不进入页面底部，我不知道问题是否出在 jquery 中制作的 backstretch 插件，但这是我的代码：

```
<title>Atec Clima</title>
<script>
    $.backstretch("img/bg.jpg",{speed: 500});
</script>
</head>
<body>

<div class="container">
    <?php require("_header.php");?>
    <div class="page">
        <div class="riquadri">
            <img src="img/home/riscaldamento.jpg" alt="riscaldamento" />
            <p>
                Una caldaia ben mantenuta consuma meno… risparmia energia e dura di pi&ugrave;!!<br />
Una  caldaia periodicamente controllata &egrave; garanzia di sicurezza per l’utente e per l’ambiente. 
            <title>Atec Clima</title>
<script>
    $.backstretch("img/bg.jpg",{speed: 500});
</script>
</head>
<body>

<div class="container">
    <?php require("_header.php");?>
    <div class="page">

    </div>

</div>
    <div class="footer">
    </div>
</body>
</html>

body  {
    font-family: UbuntuRegular;
    font-size: 62.8%;
    width: 100%;
    height: 100%;
    background: #fff url(../img/bg.jpg) top center no-repeat;
}
.container {
    width: 1000px; 
    height:100%;
    margin: 0 auto -140px;
    overflow: hidden;
    top: 0;
    bottom: 0;
    left: 0; 
    z-index: 2;
    padding-bottom:140px;
}

.footer{
    background:#1357c6;
    position:absolute;
    bottom:0;
    width:100%;
    height:140px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:46:55.383

这是一个常见的问题。这是一个不错的、众所周知的跨浏览器解决方案：

[使页脚贴在页面底部](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

# facebook - 没有待处理的申请请求

> ID：11762845
> 
> 赞同：1
> 
> 时间：2012-08-01T15:43:12.083
> 
> 标签：facebook, request, fbml

每当我收到开发者请求开发应用程序时，我都可以在以下位置看到请求：[https ://developers.facebook.com/apps?view=app_requests](https://developers.facebook.com/apps?view=app_requests)

但每当我接受它时，它就会说“没有待处理的申请请求”

如果我回到[https://developers.facebook.com/apps?view=app_requests](https://developers.facebook.com/apps?view=app_requests)请求仍然存在。但没有授权的应用程序可以编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:31:54.013

看起来有一个错误报告：

[http://developers.facebook.com/bugs/175135269278145?browse=search_50190b6ea18403606695980](http://developers.facebook.com/bugs/175135269278145?browse=search_50190b6ea18403606695980)

# php - CI 和简单 php 之间的连接以读取 $_SESSION

> ID：11762848
> 
> 赞同：0
> 
> 时间：2012-08-01T15:43:20.830
> 
> 标签：php, codeigniter

我正在尝试将一个论坛（在 Codeigniter 中创建）集成到一个网站中（简单的 php >>> 没有使用框架）。

为了自动登录论坛，当我登录我的网站时，我需要使用论坛的一个功能，它需要两个参数 $username 和 $password。

我已经从我的网站 $_SESSION 中获得了这些信息（用户名和密码）。

我如何从论坛中读取 $_SESSION（正如我在基于 Codeigniter 之前所说的那样），因为我无法访问它。

是否有可能在论坛的核心/配置中的某处定义 2 个常量，以保存来自 $_SESSION 的这些详细信息，以便从论坛内的任何地方访问？

我知道来自 CI 的会话与 $_SESSION 不同，所以请帮助我做一些更实际的事情，以解决我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:46:59.420

阅读此网址；-

[http://codeigniter.com/forums/viewthread/158923/#766011](http://codeigniter.com/forums/viewthread/158923/#766011)

[http://codeigniter.com/forums/viewthread/188648/#892137](http://codeigniter.com/forums/viewthread/188648/#892137)

以防那些想要使用 2.0.2 进行本地会话的人

只需将 native_session.php 文件复制到您的 application/libraries/ 并将其重命名为 Session.php

然后将类名和构造函数名改为CI_Session

还要添加以下内容，它应该可以正常工作。

```
function sess_destroy()
{
  $this->destroy();
} 
```

或者

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/*
    Native / Database hybrid
    Code Igniter
    Citrusmedia - Matthew Lymer
*/

class CI_Session
{
    var $sess_table_name            = '';
    var $sess_expiration            = 7200;
    var $sess_match_ip                = FALSE;
    var $sess_match_useragent        = TRUE;
    var $sess_time_to_update        = 300;
    var $encryption_key                = '';
    var $flashdata_key                 = 'flash';
    var $time_reference                = 'time';
    var $gc_probability                = 5;
    var $userdata                    = array();
    var $CI;
    var $now;

    /**
     * Session Constructor
     *
     * The constructor runs the session routines automatically
     * whenever the class is instantiated.
     */
    function CI_Session($params = array())
    {                
        log_message('debug', "Session Class Initialized");

        // Set the super object to a local variable for use throughout the class
        $this->CI =& get_instance();

        // Set all the session preferences, which can either be set
        // manually via the $params array above or via the config file
        foreach (array('sess_table_name', 'sess_expiration', 'sess_match_ip', 'sess_match_useragent', 'sess_time_to_update', 'time_reference', 'encryption_key') as $key)
        {
            $this->$key = (isset($params[$key])) ? $params[$key] : $this->CI->config->item($key);
        }

        // Sessions, start your engines!
        ini_set("session.gc_maxlifetime", $this->sess_expiration);
        session_start();

        // Load the string helper so we can use the strip_slashes() function
        $this->CI->load->helper('string');

        // Are we using a database?  If so, load it
        if( !$this->sess_table_name ) {
            die('Session class database table name not configured');
        }

        $this->CI->load->database();

        // Set the "now" time.  Can either be GMT or server time, based on the
        // config prefs.  We use this to set the "last activity" time
        $this->now = $this->_get_time();

        // Set the session length. If the session expiration is
        // set to zero we'll set the expiration two years from now.
        if ($this->sess_expiration == 0)
        {
            $this->sess_expiration = (60*60*24*365*2);
        }

        // Run the Session routine. If a session doesn't exist we'll
        // create a new one.  If it does, we'll update it.
        if ( ! $this->sess_read())
        {
            $this->sess_create();
        }
        else
        {
            $this->sess_update();
        }

        // Delete 'old' flashdata (from last request)
           $this->_flashdata_sweep();

        // Mark all new flashdata as old (data will be deleted before next request)
           $this->_flashdata_mark();

        // Delete expired sessions if necessary
        $this->_sess_gc();

        log_message('debug', "Session routines successfully run");
    }

    // --------------------------------------------------------------------

    /**
     * Fetch the current session data if it exists
     *
     * @access    public
     * @return    bool
     */
    function sess_read()
    {
        // Unserialize the session array
        // $session = $this->_unserialize($session);

        $session = array();

        foreach( array('session_id', 'ip_address', 'user_agent', 'last_activity') as $key )
        {
            if( !isset($_SESSION[$key]) ) {
                $this->sess_destroy();
                return FALSE;
            }

            $session[$key] = $_SESSION[$key];
        }    

        // Is the session current?
        if (($session['last_activity'] + $this->sess_expiration) < $this->now)
        {
            $this->sess_destroy();
            return FALSE;
        }

        // Does the IP Match?
        if ($this->sess_match_ip == TRUE AND $session['ip_address'] != $this->CI->input->ip_address())
        {
            $this->sess_destroy();
            return FALSE;
        }

        // Does the User Agent Match?
        if ($this->sess_match_useragent == TRUE AND trim($session['user_agent']) != trim(substr($this->CI->input->user_agent(), 0, 50)))
        {
            $this->sess_destroy();
            return FALSE;
        }

        $this->CI->db->where('session_id', $session['session_id']);

        if ($this->sess_match_ip == TRUE)
        {
            $this->CI->db->where('ip_address', $session['ip_address']);
        }

        if ($this->sess_match_useragent == TRUE)
        {
            $this->CI->db->where('user_agent', $session['user_agent']);
        }

        $query = $this->CI->db->get($this->sess_table_name); 
```

# regex - .htaccess 中的正则表达式 - 如果在 HTTP_HOST 中找到 uri，我该如何 301？

> ID：11762849
> 
> 赞同：3
> 
> 时间：2012-08-01T15:43:24.120
> 
> 标签：regex, .htaccess, apache2, http-status-code-301

我有一个网站：www.explainmortgage.com

在那个网站上，我有[http://www.explainmortgage.com](http://www.explainmortgage.com)和[http://www.explainmortgage.com/mortgage](http://www.explainmortgage.com/mortgage)（在许多其他页面中）。

[http://www.explainmortgage.com](http://www.explainmortgage.com)和[http://www.explainmortgage.com/mortgage](http://www.explainmortgage.com/mortgage)是相同的，所以我想 301 [http://www.explainmortgage.com/mortgage](http://www.explainmortgage.com/mortgage)到[http://www.explainmortgage.com](http://www.explainmortgage.com)

我对多个域使用相同的代码库，并且大多数都有类似的情况。

因此，我想编写一个 RewriteCond RewriteRule 对，以涵盖使用此代码库的所有域中的这种情况。

所以这是我想要的规则（在伪代码中）：

```
if ({HTTP_HOST}) contains ({REQUEST_URI} minus the leading /)
then 301 to http://{HTTP_HOST} 
```

例子：

```
{HTTP_HOST} == 'www.explainmortgage.com'
{REQUEST_URI} == '/mortgage'

{HTTP_HOST} == 'www.explaincars.com'
{REQUEST_URI} == '/cars'

{HTTP_HOST} == 'www.explaineducation.com'
{REQUEST_URI} == '/education'

{HTTP_HOST} == 'www.explainelectronics.com'
{REQUEST_URI} == '/electronics' 
```

因此，如果有任何正则表达式大师愿意帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:02:15.700

尝试：

```
RewriteCond %{HTTP_HOST} ^(www\.)?explain([^\.]+)\.com$ [NC]
RewriteCond %{REQUEST_URI}:%2 ^/([^/]+)/?:\1 [NC]
RewriteRule ^ / [R=301,L] 
```

这里的诀窍是首先将匹配项对 中的 之后`explain`和之前的`.com`任何内容进行分组`%{HTTP_HOST}`，然后（因为我们不能在 a 的第二个参数中使用 % 变量`RewriteCond`）我们将 URI 和前一个反向引用放在一起，并使用 a`\1`来与之相匹配。如果它们相同，请重定向到`/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:01:24.680

如果您只想`http://www.explainmortgage.com/mortgage`重定向到`http://www.explainmortgage.com`，则文件中的以下规则`.htaccess`将执行此操作。该`NC`标志使比较不区分大小写。这不会影响（重定向或重写）`URI=/mortgage/`。

```
RewriteRule ^mortgage$ / [R=301,L,NC] 
```

从您的评论中，您说您想将更多 URL 重定向到主页，那么以下内容可能有助于实现您想要的。以下将指向不存在的文件或目录的 URL 重定向到您在任何域上的主页。例如，如果“/mortgage”、“/bob”、“/carol”不作为文件存在，那么它们都将被重定向到“/”。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . / [R=301,L] 
```

# c# - Protobuf-net“反序列化期间引用跟踪对象更改引用”错误（2）

> ID：11762851
> 
> 赞同：1
> 
> 时间：2012-08-01T15:43:27.927
> 
> 标签：c#, serialization, deserialization, protocol-buffers, protobuf-net

冒着违反礼仪的风险（如果这不恰当，我很抱歉），我喜欢提出这个问题，因为它已经飘荡了一段时间，没有一个答案。作为 Protobuf-net 库的一部分，我相信这实际上是一个更严重的错误（如果事实证明不是，我愿意道歉一千次）：

尝试反序列化作为 DynamicType 对象一部分的值类型时，我仍然遇到上述错误。以下是用于序列化/反序列化的方法以及正在序列化和反序列化的特定类以及一些简单的测试代码：

```
[ProtoContract]
public class ZmqMessage
{
    [ProtoMember(1)]
    public ZmqMessageType MessageType { get; set; }
    [ProtoMember(2, DynamicType = true)]
    public object MessageBody { get; set; }

    public ZmqMessage()
    { }

    public ZmqMessage(ZmqMessageType zmqMessageType, object messageBody)
    {
        this.MessageType = zmqMessageType;
        this.MessageBody = messageBody;
    }
}

public static class ProtoBuf
{
    public static byte[] Serialize<T>(T serializeThis)
    {
        using (var stream = new MemoryStream())
        {
            Serializer.Serialize<T>(stream, serializeThis);
            return stream.GetBuffer();
        }
    }

    public static T Deserialize<T>(byte[] byteArray)
    {
        using (var stream = new MemoryStream(byteArray))
        {
            return Serializer.Deserialize<T>(stream);
        }
    }
} 
```

这里有一些测试用例：

```
ZmqMessage testMessage = new ZmqMessage(ZmqMessageType.ControlMessage, "Test");
byte[] byteMessage = ProtoBuf.Serialize<ZmqMessage>(testMessage);
ZmqMessage deserializedMessage = ProtoBuf.Deserialize<ZmqMessage>(byteMessage);

ZmqMessage testMessage = new ZmqMessage(ZmqMessageType.ControlMessage, (int) 1);
byte[] byteMessage = ProtoBuf.Serialize<ZmqMessage>(testMessage);
ZmqMessage deserializedMessage = ProtoBuf.Deserialize<ZmqMessage>(byteMessage); 
```

第一个 testMessage 反序列化很好，而第二个（在 messageBody 中使用 int）抛出错误消息。

![在此处输入图像描述](../Images/1bb9a737f15c793bc418d9f39963d3db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:33:10.910

解决了这个问题，我忘记了我必须将子类标记为 [ProtoContract] 及其成员也标记为 [ProtoMembers(n)]，即使将它们传递给“DynamicType”也是如此。请注意 Marc Gravell 上面关于动态类型和继承的评论。

这不是一个错误，我很抱歉建议它作为一种可能性。

# android - Android 中的 XSAMPA 语音强调规范

> ID：11762852
> 
> 赞同：0
> 
> 时间：2012-08-01T15:43:28.537
> 
> 标签：android, xml, text-to-speech

感谢[这篇关于语音规范的帖子](https://groups.google.com/d/topic/tts-for-android/7hlAudBRfUU/discussion)（在[这个](https://stackoverflow.com/questions/3495301/best-practice-for-specifying-pronunciation-for-android-tts-engine)问题中引用），我能够在 TTS 引擎中使用 XSAMPA。但是，如何在 XML 中指定[主要重音字符](http://en.wikipedia.org/wiki/X-SAMPA#Other_symbols)（双引号，即“）？

像下面这样发送 XML 最终会不说话，大概是因为在指定 ph= 值时双引号字符的第二次（过早）出现：

```
"<speak xml:lang=\"en-US\"> <phoneme alphabet=\"xsampa\" ph=\"\"sE.v@n.ti \"wVn\"/>.</speak>" 
```

我是否因为指定 XML 的方式而忘记了主要的重音字符，还是有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:09:56.813

你为什么不尝试[这里](http://www.utexas.edu/learn/html/spchar.html)`&quot;`指定的，而不是中间的？`\"`

所以你会有：

```
"<speak xml:lang=\"en-US\"> <phoneme alphabet=\"xsampa\" ph=\"&quot;sE.v@n.ti &quot;wVn\"/>.</speak>" 
```

# c# - 获取和设置属性 FxCop 规则

> ID：11762853
> 
> 赞同：2
> 
> 时间：2012-08-01T15:43:34.347
> 
> 标签：c#, visual-studio-2010, fxcop, static-code-analysis

所以我正在编写一个自定义的 Fxcop 规则，以确保每当使用 Get 或 Set 方法时，其中还有一个 GetProperty 或 SetProperty。我怎么能测试这个。

例子：

```
public double Seconds
{
   get { return this.GetProperty(() => this.Seconds); }
   set { this.SetProperty(() => this. Seconds, value); }
} 
```

而不是这样：

```
public double Seconds
{
    get { return Seconds; }
    set { Seconds = value; }
} 
```

到目前为止，我可以使用此代码找到 get 或 set 的每个实例。如果确实有 GetProperty 或 SetProperty，我只需要帮助。

```
 public override ProblemCollection Check( Member member )
    {
        ProblemCollection Problems = this.Problems;

        var method = member as Method;

        if ( method != null )
        {
            if ( method.Name.Name.Contains( "get_" ) || method.Name.Name.Contains( "set_" ) )
            {
                Resolution resolu = GetResolution( new[] { member.ToString() } );
                Problems.Add( new Problem( resolu ) );
                return Problems;
            }
        }
        return null;
    }
} 
```

# javascript - 您可以使用 appendChild 将元素添加到具有动态创建 id 的 div 吗？

> ID：11762856
> 
> 赞同：1
> 
> 时间：2012-08-01T15:43:40.547
> 
> 标签：javascript, jquery, html, dynamic, appendchild

我正在尝试将一些`<p>`元素添加到`div`使用 Javascript 中。该函数循环以创建预定数量的这些`div`s。我`id`的 for`div`是在每次函数运行时创建的，只是 'div' 加上一个数字（例如：`div1`、`div2`、`div3`等）

这是我的代码：

```
var divNum = 'div';

function myFunction () {
    var divTag = document.createElement("div");
    divTag.id = "div";
    divTag.className ="info";        
    document.body.appendChild(divTag);
    var idXX = divNum;
    $('#div').attr('id',idXX);

    var text = document.createElement("p");
    text.id = "1";
    text.className ="text1-2"; 
    text.innerHTML = "A";
    *"PROBLEM HERE"*.appendChild(text);

    divNum = divNum + 1;
 } 
```

我的问题是，你能在它所说的地方做一些事情，`*"PROBLEM HERE"*`让它附加一个等于我的 var`div`吗？`id``idXX`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:48:12.980

只需使用`divTag`.

那条线看起来像这样：

```
divTag.appendChild(text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:48:45.790

我可能误解了这个问题，但在我看来，“这里的问题”行应该是这样的：

```
$('#'+idXX).append(text); // literally doing what you asked 
```

或者简单地说：

```
divTag.appendChild(text); // better approach since it doesn't have to go look for it. 
```

另外，为什么要创建 div 然后更改其 ID？此外，`divNum`被初始化为`"div"`，而不是`0`大概是打算...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:54:18.847

看起来您使用 jQuery 来设置属性 id。

```
$('#div').attr('id',idXX); 
```

你应该能够在 jQuery 中做所有事情

```
var divNum = 0;
function myFunction() {
    var _p = $('<p>').text('A').addClass('text-1-2')
    $('<div>').attr({'id':'div'.concat(++divNum)}).addClass('info').html(_p).appendTo('body');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:51:59.133

如果您想使用 jQuery 而不是将其与基本 javascript 混合使用：

```
var divNum = 'div';

function myFunction () {
    var divTag = $("<div>").
        .attr("id", divNum)
        .addClass("info");        
        .appendTo($("body"));
    $("<p>")
        .attr("id", "1")
        .addClass("test1-2")
        .html("A")
        .appendTo(divTag);

    divNum = divNum + 1;
 } 
```

# iphone - 滑动以删除具有奇怪行为的单元格

> ID：11762861
> 
> 赞同：0
> 
> 时间：2012-08-01T15:43:50.747
> 
> 标签：iphone, objective-c, ios, ipad

我有一个应用程序，其中主根是 UIViewController，其行为类似于 facebook 或路径的应用程序，即在左侧或右侧滑动并显示另一个视图。 ![在此处输入图像描述](../Images/eefd507bd5a4303b78347677d78ca554.png)

然而，我的问题是，有时主 UIViewController 有 UITableViewcells，应该通过滑动消除，但这不能正常工作，有时它检测到手势有时不能。

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath{
return YES; 
```

}

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
if (editingStyle == UITableViewCellEditingStyleDelete) {

    [dataItems removeObjectAtIndex:indexPath.row];
    [self.tableView reloadData];

} 
```

}

我正在采用这个库 [在此处输入链接描述](https://github.com/newmarcel/MKDSlideViewController) 来制作 UIViewController 的控制器

知道如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:22:21.107

问题是您使用的手势。如果表格单元格和视图都试图拦截滑动事件，则可以保证您不会得到您正在寻找的行为。我通常解决此问题的方法是制作一个将表格更改为编辑模式的按钮。这样你就不会发生冲突。

```
[tableView setEditing:YES animated:YES]; 
```

问题不在于程序设计或语言能力，而是让完全相同的手势做两件不同的事情。这在物理上是不可能实现的，并且总是能得到你想要的。iOS 设备无法读心，虽然我听说 iOS 7 中有一个新的 API...

您可以尝试使用多指手势。

# mysql - InnoDB CREATE TABLE 抛出错误 150

> ID：11762862
> 
> 赞同：2
> 
> 时间：2012-08-01T15:43:51.247
> 
> 标签：mysql, sql, innodb

此创建表引发错误 150：

```
CREATE TABLE IF NOT EXISTS published(
isbn VARCHAR(13) NOT NULL,
publisherid INTEGER NOT NULL,
year INTEGER NOT NULL,
lastupdate TIMESTAMP NOT NULL,
lastupdateby INTEGER NOT NULL,
FOREIGN KEY (lastupdateby) REFERENCES librarians (librarianid),
FOREIGN KEY (isbn) REFERENCES books,
FOREIGN KEY (publisherid) REFERENCES publishers,
PRIMARY KEY (isbn, publisherid)
) ENGINE = INNODB; 
```

我检查了它引用的表（`librarians`、`books`和`publishers`）在 SQL 到达该位时已经创建。以下是他们的 DDL：

```
CREATE TABLE IF NOT EXISTS librarians(
librarianid INTEGER AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(50) UNIQUE NOT NULL,
password VARCHAR(255) NOT NULL,
canread BOOLEAN NOT NULL,
canwrite BOOLEAN NOT NULL,
canexec BOOLEAN NOT NULL,
lastupdate TIMESTAMP NOT NULL,
lastupdateby INTEGER NOT NULL,
FOREIGN KEY (lastupdateby) REFERENCES librarians (librarianid)
) ENGINE = INNODB;

CREATE TABLE IF NOT EXISTS books(
isbn VARCHAR(13) PRIMARY KEY,
title VARCHAR(255) NOT NULL,
lastupdate TIMESTAMP NOT NULL,
lastupdateby INTEGER NOT NULL,
FOREIGN KEY (lastupdateby) REFERENCES librarians (librarianid)
) ENGINE = INNODB;

CREATE TABLE IF NOT EXISTS publishers(
publisherid INTEGER PRIMARY KEY AUTO_INCREMENT,
publishername VARCHAR(255) UNIQUE NOT NULL,
lastupdate TIMESTAMP NOT NULL,
lastupdateby INTEGER NOT NULL,
FOREIGN KEY (lastupdateby) REFERENCES librarians (librarianid)
) ENGINE = INNODB; 
```

此外，我检查了我在[这里](https://stackoverflow.com/a/380074)找到的以下指南：

**引用的表也应该是 InnoDB。**好吧，我什至明确指定了这一点。

**引用的表必须有索引和主键。**外键字段是它们各自参考表的（唯一）主键。除非我误解了这个要求，否则应该满足它。

**FK 列和引用的 PK 列的 SQL 数据类型必须相同。**除非我检查错了，否则这也应该没问题。

*   `lastupdateby INTEGER NOT NULL`-->`librarianid INTEGER AUTO_INCREMENT PRIMARY KEY`
*   `isbn VARCHAR(13) NOT NULL`-->`isbn VARCHAR(13) PRIMARY KEY`
*   `publisherid INTEGER NOT NULL`-->`publisherid INTEGER PRIMARY KEY AUTO_INCREMENT`

那么，我错过了什么？此错误 150 的原因可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:02:52.090

您在表书和出版商的外键规范中缺少列引用。您需要更改这些行，如下所示：

```
FOREIGN KEY (isbn) REFERENCES books (isbn),
FOREIGN KEY (publisherid) REFERENCES publishers(publisherid), 
```

# rest - 一种 RESTful 数据同步方法

> ID：11762863
> 
> 赞同：19
> 
> 时间：2012-08-01T15:43:57.690
> 
> 标签：rest, synchronization

假设以下场景*Web 应用程序通过 RESTful API 提供资源。许多客户端使用此 API。目标是保持客户端上的数据与 Web 应用程序同步（双向）。*

最简单的方法是询问 API 自客户端上次与 API 同步以来是否有任何资源发生更改。这意味着客户端需要向 API 请求带有时间戳的适当资源（以查看数据是否需要更新）。在我看来，就不必要的带宽消耗而言，这似乎是开销最小的方法。

但是，我觉得这种方法在设计和责任方面有一些缺点。例如，API 不应该处理检查资源是否过期的问题。似乎 API 的唯一职责应该是在被询问时提供资源，而不必处理更新方面。通过采用第二种方法，客户端每次想要更新其数据以使其与 Web 应用程序保持同步时都会请求大量数据。换句话说，客户端会检查它返回的数据是否比本地存储的数据更新。如果此过程每隔几分钟发生一次，这可能会成为系统的重大负担。

我是否正确地看到了这一点，还是我忽略了一条中间道路？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T17:12:28.657

这是一个很常见的问题，RESTful 方法可以帮助您解决它。HTTP（通常用于构建 RESTful 服务的应用程序协议）支持多种技术，可用于使 API 客户端与服务器端的数据保持同步。

如果客户端在 HTTP 响应中接收到`Last-Modified`or标头，它可能会使用该信息在将来进行**有条件的 GET**调用。这允许服务器通过响应快速指示客户端先前存储的资源表示仍然有效且准确。这将允许服务器（或者甚至更好的中间代理或缓存服务器）尽可能高效地响应客户端的请求，从而潜在地减少到后端数据存储的昂贵往返。`E-Tag`**`304 – Not Modified`**

 **如果响应包含`Last-Modified`标头并且客户端希望利用可用的性能优化，则它们必须`If-Modified-Since`在对同一 URI 的后续 GET 调用中包含一个指令，并传入它接收到的相同时间戳值。这指示服务器仅在知道自那时起已更改时才从权威后端源获取信息。当然，您的服务器必须构建为支持这种技术。

类似的原则适用于`E-Tag`标题。An`E-Tag`是一个简单的哈希码，表示资源在特定时间点的特定状态。如果资源发生任何变化，它的`E-Tag`价值也会发生变化。如果客户端在响应中看到一个`E-Tag`，它应该在随后的 GET 请求中将它传递给相同的 URI，从而允许服务器快速确定客户端是否具有资源的最新表示。

最后，您可能应该查看[长轮询技术](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)，以减少客户端向服务器发出的重复 GET 请求的数量。本质上，诀窍是向服务器发出很长的 GET 请求以监视服务器数据的变化。GET 将不会返回响应，直到数据发生更改或很长的超时触发。如果是后者，客户端只需重新发出相同的长期请求以再次监视更改。另请参阅方法类似的[Comet 和 Web Sockets](http://www.websocket.org/quantum.html)等主题。**

# php - jquery 根据用户单击获取数据库查询并填充选择列表

> ID：11762872
> 
> 赞同：2
> 
> 时间：2012-08-01T15:44:26.253
> 
> 标签：php, jquery, mysql, ajax

我正在开发一个表单，用户可以从 A - Z 中选择一个字母来选择用户名以该字母开头的用户列表。

我想要做的是当用户单击一个字母时，调用一个 php 脚本来执行一个数据库查询，该查询会提取以单击的字母开头的任何用户名。

我发现这个页面让我开始了[http://openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107)以及这个更接近我想做的[简单 Ajax Jquery 脚本的页面 - 我如何获取每个的信息表中的行？](https://stackoverflow.com/questions/8019489/simple-ajax-jquery-script-how-can-i-get-information-for-each-of-the-rows-in-the)

我想要对返回的结果执行的操作是将它们放入 SELECT 列表中，并且当用户单击不同的字母时，该列表内容将替换为新的查询结果。

我不确定如何以及如果可能的话将字母传递给 php 脚本，以便我可以在数据库中搜索以该字母开头的用户名。

编辑：我有希望改进它，但我收到 Ajax 错误：ParseError

这是我到目前为止的代码

```
<div>
        <ul>
            <li class="alphabets" id="All">All</li>
            <li class="alphabets" id="A">A</li>
            <li class="alphabets" id="B">B</li>
            <li class="alphabets" id="C">C</li>
            <li class="alphabets" id="D">D</li>
    </ul>
</div>
<div id="recipients">
    $(document).ready(function(){
                $("li.alphabets").click(function(){
                    var the_letter = $(this).text();
                    alert(the_letter);

                    $.ajax({                                      
                        url: 'php/selectuser.php', type: 'GET', data: {'letter':the_letter}, dataType: 'json',  success: function(rows) {
                            var options = '';
                            for (var i in rows) {
                                var row = rows[i];          
                                var id = row[0];
                                var vname = row[1];

                                options += '<option value="' + id + '">' + vname + '</option>';
                            } 
                            $("#userlist").html(options);
                        } 
                    });
                });
            });
    <select id="userslist" name="recipients" size="5">

    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:47:26.600

jQuery 的 .ajax() 方法有一个名为**data**的参数，它允许您传递变量：

```
// Get letter from SELECT element
the_letter = $("#myselect").val();

$.ajax({ 
  url:  'somepath/to/my/script.php',
  type: 'GET',
  data: {'letter':the_letter} 
}); 
```

它将它作为 GET 参数传递，可以在您的 PHP 脚本中轻松检索：

```
$letter = $_GET['letter']; 
```

# c# - 在 OnLostFocus 事件中设置焦点 c# silverlight component one masked textbox

> ID：11762875
> 
> 赞同：2
> 
> 时间：2012-08-01T15:44:32.420
> 
> 标签：c#, silverlight, componentone

我正在尝试在 c1 屏蔽文本框中执行一些自定义验证，并且验证必须发生 OnLostFocus()。问题是，当我从 OnLostFocus() 中调用 Focus() 时，它会导致控件再次失去/获得焦点，这是无限循环。任何帮助/建议都会很棒！

提前致谢！！！

下面基本上是我所拥有的代码：

```
 protected override void OnLostFocus(RoutedEventArgs e)
    {

        if (!CheckAndRunValidator())
        {
            Focus();
            SelectAll();

            return;
        }

        base.OnLostFocus(e);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:55:45.657

你可以试试

```
Dispatcher.BeginInvoke( () => Focus() ); 
```

如果这不起作用，请尝试使用`DispatcherTimer`带有 short的 a`Interval`并将焦点放在`Tick`事件中。

# python - optparse csv.reader

> ID：11762882
> 
> 赞同：1
> 
> 时间：2012-08-01T15:44:51.827
> 
> 标签：python, csv, path, optparse

有人可以帮助我吗，我正在尝试将 optparse 与 csv 阅读器链接，但我一直无法这样做。下面是我的代码：

```
import csv
from optparse import OptionParser

parser = OptionParser()
parser.add_option('--i1', action='store', type='string', dest='input1file', help='[REQUIRED] The input .csv file path.')
(options, args) = parser.parse_args()
input1file = options.input1file

data = csv.reader(open('input1file','r'))
temp = open('C:\Practice\output_edited.csv','a')
for column in data:
    temp.write(column[0]+','+column[len(column)-1]+'\n')
    print column[0]+','+column[len(column)-1]+'\n'
temp.close() 
```

我不知道如何连接 add_option 部分，以便用户可以输入文件名路径。谢谢！

我更新了我的代码。仍然无法让它工作。

**更新1：**

```
import sys
import csv
from optparse import OptionParser

parser = OptionParser()
parser.add_option('--i1', action='store', type='string', dest='input1file', help='[REQUIRED] The input .csv file path.')
(options, args) = parser.parse_args()
input1file = options.input1file

try:
    input1file = args[1]
except IndexError:
    sys.exit("Input file required, none given")

data = csv.reader(open(sys.args[1],'r'))
temp = open('C:\Practice\output_edited.csv','a')
for column in data:
    temp.write(column[0]+','+column[len(column)-1]+'\n')
    print column[0]+','+column[len(column)-1]+'\n'
temp.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:52:06.577

```
data = csv.reader(open('input1file','r')) 
```

应该

```
data = csv.reader(open(input1file,'r')) 
```

根据您的评论，您似乎忘记使用该`--i1`参数。如果确实需要，您应该强制执行：

例如：

```
if not input1file:
  print "What?  you were supposed to give '--i1 filename', but you didn't.  Shame on you!"
  sys.exit(1) 
```

*请注意，这在`argparse`. 你只需传递`required=True`给`add_argument`方法*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:15:45.550

如果您没有`--i1`在命令行上指定`options.input1file`is `None`，因为您没有提供默认值。

```
myscript.py --i1 input.txt 
```

因为`--i1`是必需的，所以它真的不应该是一个选项（因为它不是可选的）。从 中获取输入文件`args`，而不是：

```
parser = OptionParser()
(options, args) = parser.parse_args()
try:
    input1file = args[0]
except IndexError:
    sys.exit("Input file required, none given") 
```

或者，正如 mgilson 建议的那样，`argparse`改用它。它支持命名的位置参数。

# jquery - JQuery Ajax 不返回 utf-8 字符

> ID：11762884
> 
> 赞同：1
> 
> 时间：2012-08-01T15:44:58.510
> 
> 标签：jquery

我有看起来像这样的ajax函数：

```
jQuery.ajax({
    type: 'POST',
    data: {
        action: 'get_data',
        article_id: some_var
    },
    url: 'http://www.example/test.php',
    success: function(msg) {
    jQuery('#some_div').html(msg);
    }
}); 
```

在 test.php 中，我有 mysql 查询，该查询从基础获取行，id 等于 article_id。它运作良好。但是我在数据库中有一些塞尔维亚语字符，当 ajax 返回这些字符时，它们看起来像这样：“Ž”是“�”，“Š”是“？”。数据正确存储在 mysql 中（utf8 连接、colations 和所有其他 stufs），html 页面编码是 utf8 ......我遗漏了一些东西，我不知道是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:47:46.430

尝试将数据类型添加到 ajax 查询：

```
dataType: 'html' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:48:49.530

1.  `meta`如果不存在，请在标记中的 html 中设置字符编码。
2.  在服务器端使用类似`mb_convert_encoding`或`iconv`功能的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T20:21:35.283

已解决，我在连接到基础后添加：mysql_query("SET NAMES utf8"); mysql_query("SET CHARACTER SET utf8"); mysql_query("SET COLLATION_CONNECTION='utf8_general_ci'"); . 我认为这仅在将数据插入基础时才重要

# powershell - 当命令行中有引号时，如何在 Powershell 中安装 Windows 服务？

> ID：11762890
> 
> 赞同：2
> 
> 时间：2012-08-01T15:45:29.233
> 
> 标签：powershell, windows-services

我有一个需要安装的服务，它的命令行如下所示：

```
d:\My Service\service.exe /AsService /Config="d:\Config Files\TheConfig.config" 
```

对于命令行来说，这几乎是最坏的情况。**我遇到的问题是 args 中的双引号**。

这是我尝试过的*接近*但不完全的方法：

```
$cmd = "create ""$ServiceName"" binPath= $FullServicePath start= $StartMethod"
Invoke-Expression "cmd.exe /c sc.exe $cmd" | Write-Host 
```

在哪里`$FullServicePath`：

```
d:\My Service\service.exe /AsService /Config="d:\Config Files\TheConfig.config" 
```

建议？我对任何事情都持开放态度。WMI。任何。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:24:07.473

尝试`$FullServicePath`这样声明：

```
$FullServicePath = "d:\My Service\service.exe /AsService /Config=`"d:\Config Files\TheConfig.config`"" 
```

这使用转义字符`` 告诉它将引号作为文本处理。（转义字符是大多数键盘上 1 键旁边的后记号）`

 `我相信你也可以使用这种语法：

```
$FullServicePath = $('d:\My Service\service.exe /AsService /Config="d:\Config Files\TheConfig.config"') 
```

两者都在我的系统上创建了没有问题的变量。

当你这样调用时`$FullServicePath`：`$($FullServicePath)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T11:17:14.313

如果您 100% 确定需要引号，那么您必须使用以下命令对它们进行转义`\`：

```
&'d:\My Service\service.exe' '/AsService' '/Config=\"d:\Config Files\TheConfig.config\"' 
```

[回声](https://chocolatey.org/packages/echoargs)输出：

```
Arg 0 is </AsService>
Arg 1 is </Config="d:\Config Files\TheConfig.config"> 
```

但这可能也会起作用，而且要容易得多：

```
&'d:\My Service\service.exe' @('/AsService', '/Config=d:\Config Files\TheConfig.config\') 
```

[回声](https://chocolatey.org/packages/echoargs)输出：

```
Arg 0 is </AsService>
Arg 1 is </Config=d:\Config Files\TheConfig.config> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-01T15:52:54.953

这是我使用的一种方法。

[在 powershell 中安装服务](http://blog.aggregatedintelligence.com/2011/12/installing-windows-service-using.html)`

# r - plot() 函数中 ylim 参数的合理选择值

> ID：11762891
> 
> 赞同：1
> 
> 时间：2012-08-01T15:45:29.810
> 
> 标签：r, plot

我有一个从文件中绘制数据的 R 脚本。该脚本当前对 ylim 使用硬编码值。我想根据绘制的数据动态确定 ylim 的正确（即合理）值。

我正在使用 限制 x 轴值`xlim`。我原以为 plot 函数将能够计算出 y 值（基于 选择的 x 轴值`xlim`）——而我不必提供 ylim 参数，但是，当我调用 plot() 时，`xlim`没有`ylim`参数，我收到以下错误：

```
Error in plot.window(...) : need finite 'ylim' values
Calls: plot -> plot.default -> localWindow -> plot.window
In addition: Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf 
```

所以我的问题是，我如何动态确定要为 指定的值`ylim`，因为我已经为`xlim`? 指定了限制。理想情况下，我想指定`ylim`如下限制：

```
ylim_lower <- (y value for xlim_lower) - [some fixed % distance]
ylim_upper <- (y value for xlim_upper) + [some fixed % distance] 
```

我该怎么做？

**[[编辑]]**

```
dat <- read.csv(somefile)

n <- dim(dat)[1]
yvals1 <- rep(0,n)
yvals2 <- rep(0,n)

for(i in 1:n){
  yvals1[i] <- foobar1(dat$X[i])
  yvals2[i] <- foobar2(dat$X[i])
}   

# Note: yvals1 and yvals2 MAY contain NAs

# below is the plot command that barfs:
plot(dat$X, yvals1, typ="l", col="green", xlim=c(lowest_val_cuttoff, highest_val_cuttoff), ylim= c(.2, .60), main=c(the_title, "Title goes here"), xlab="x axis label", ylab="y axis label")
lines(dat$X, yvals2, col="red") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:21:36.263

尝试在绘图之前将您的数据集（或至少您的查找绘图范围的调用）限制为有限且非缺失值。

```
> plot(1:2,1:2, ylim=c(NA,3))
Error in plot.window(...) : need finite 'ylim' values
> plot(1:2,1:2, ylim=c(-Inf,3))
Error in plot.window(...) : need finite 'ylim' values 
```

`?is.na` `?is.finite`

```
> min(c(NA,3,5))
[1] NA
> min(c(NA,3,5),na.rm=TRUE)
[1] 3
> min(c(-Inf,3,5),na.rm=TRUE)
[1] -Inf
> 
> y <- c(-Inf,NA,3,4,5)
> range(y)
[1] NA NA
> range(y, na.rm=TRUE)
[1] -Inf    5
> range(y[!is.na(y) & is.finite(y)])
[1] 3 5
> 
```

# ios - ios导航栏右键项目在推送新视图控制器时发生变化

> ID：11762892
> 
> 赞同：8
> 
> 时间：2012-08-01T15:45:34.443
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uinavigationitem

我有一堆三个 VC，它们通过导航控制器进行协调并使用导航栏。在这个导航栏上，在每个 VC 中，我添加了相同的按钮（“注销”按钮）作为右栏按钮项：

```
UIBarButtonItem *logoutButton = 
[[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"LogoutButtonTitle", @"")
                                     style:UIBarButtonItemStyleBordered 
                                     target:self 
                                     action:@selector(logout)];

[categoriesViewController.navigationItem setRightBarButtonItem:logoutButton];
[[self navigationController] pushViewController:categoriesViewController animated:YES]; 
```

所以每个视图控制器在导航栏中都有这个注销按钮。当我将这些控制器中的任何一个推送到导航堆栈上时，新的视图控制器会按预期加载，一切都显示并正常运行，但是在显示新视图控制器之后（动画完成后），注销按钮会移动大约 3px 到正确的。

我已经尝试在推动 VC 之前添加按钮，在 VC 的 init 方法中，在 viewDidLoad 和 viewDidAppear 中，但仍然是相同的行为。我似乎无法摆脱这种转变。

奇怪的是，当按下新的 VC（使用默认动画）时，后退按钮消失并重新出现，但“注销”按钮似乎留在原地，只是在动画结束后向右移动。此外，按钮上的字体不是默认字体而是系统字体之一（Helvetica light），可能与此有关。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:48:32.787

我有同样的问题。这是因为您的 rootviewcontroller 未设置。将您的第一个导航栏作为 rootviewcontroller 的主页或第一页设置为。从那里 [self.navcontroller] pushviewcontroller ...]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:59:27.920

试着打电话

```
self.navigationItem.rightBarButtonItem = yourUIBarButtonItem; 
```

还有什么是你的注销按钮，它是正确的类吗？也许更多的代码？

# linux - 为什么堆栈向下增长？

> ID：11762893
> 
> 赞同：3
> 
> 时间：2012-08-01T15:45:46.697
> 
> 标签：linux, overflow, stack-overflow

> **可能重复：**
> [为什么堆栈通常会向下增长？](https://stackoverflow.com/questions/2035568/why-do-stacks-typically-grow-downwards)

在大多数系统（linux、windows 等）中，堆栈从高内存地址开始并逐渐变低。

但是，大多数缓冲区从低地址增长到高地址。是否有一个原因？

因为我认为这是缓冲区溢出攻击的根本问题。

我看到在早些时候，由于某种原因，系统设计人员让堆栈向下增长......

但即使在今天，我也看到这种架构（堆栈和缓冲区的不同增长方向）似乎没有改变。

我知道有 NX 保护、ASLR、堆栈保护（金丝雀）等东西来保护缓冲区溢出攻击。但我不明白为什么他们不使缓冲区和堆栈的增长方向相同......

我错过了什么吗？

# barcode-scanner - 条码扫描器在摩托罗拉 MC 75A 上停止

> ID：11762900
> 
> 赞同：0
> 
> 时间：2012-08-01T15:46:06.800
> 
> 标签：barcode-scanner, windows-mobile-6.5, motorola-emdk

我有一个多形式的 Windows 移动应用程序，它使用 EMDK（2.6 版）访问 MC75 的条形码扫描仪。我使用 Singleton 访问条形码扫描仪。当应用程序启动时，我调用`barcodereader.Actions.Enable()`，当应用程序退出时，我调用“barcodereader.Actions.Disable()”。基本上，我使用 EMDK 示例作为让扫描仪工作的指南。

在应用程序运行时，我将事件处理程序添加到表单激活事件的条形码阅读器“readNotify”，并在表单激活时删除事件处理程序。我已放入代码以检查这是否正确发生，并添加了一项检查以确保在添加新事件处理程序之前不存在现有事件处理程序。

该应用程序工作正常，但由于某种原因，条形码扫描仪突然中断，按下触发按钮时无法工作。这似乎总是发生在同一个地方（在三种形式的大约 20 次扫描之后）。没有发现错误并且扫描仪灯无法亮起。我有一定数量的扫描要做，并且扫描会在几秒钟前成功扫描的表单上停止。我可以在一个表单上进行 20 多次扫描，但似乎只有在扫描不同表单时才会遇到问题。

如果我重新启动应用程序，扫描仪将再次工作。datawedge 软件已安装但未使用。

我在[这里](http://www.pcreview.co.uk/forums/symbol-scanner-stops-scanning-t1934819.html)研究期间看到了这个问题，但我的问题似乎不是断断续续的。

我在 Symbol 支持网站上看到一条说明，在表单之间移动时重复调用“.Actions.Enable”和“.Actions.Disable”是不可取的，我不这样做。

我不知道在应用程序中检查什么。有任何想法吗？

详细信息 - 使用 Windows Visual Studio 2008，设备运行 Windows Mobile 6.5 Professional，EMDK 版本 2.6，用 C# 编写的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:40:22.887

我在 MC70 设备上遇到了同样的问题。不幸的是，它是在以前的雇主那里，所以我不再有源代码可以回顾。我确实记得必须创建一个有点丑陋的解决方法才能让它工作。

我知道我最终在父表单内声明/实例化了barcodereader 对象（因此不需要单例类）。然后，每次我实例化一个子表单时，我都会将父表单对象或barcodereader 对象通过引用传递给子表单。然后我能够从子窗体反复访问它而不会崩溃/锁定。我知道这是一个非常模糊的描述，但是自从我编写该代码以来已经有几年了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:04:11.837

几年前我就知道这个问题！解决方案是：在进行表单导航时不要禁用条形码阅读器（保持它始终处于活动状态）。它非常适合我（我在 6 年前做过 MC9062，现在做了 MC75A 设备）。只需添加一些逻辑来告诉您的程序在不同的形式下以不同的方式处理扫描的数据。是的，将阅读器对象用作“单例”很重要。

# sql - ms sql server 在函数中不接受 ReadPast Hint 吗？

> ID：11762904
> 
> 赞同：0
> 
> 时间：2012-08-01T15:46:33.460
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

我有一个带有检查约束的待定订单表，以防止人们订购我们没有库存的商品。这需要我创建一个计数器函数来决定插入是否可以发生。它一直有效，直到库存中剩下 1 件物品，然后我收到一条消息，我们的物品缺货。我认为这是一个脏读问题，但即使在插入 ReadPast 提示之后，我仍然会看到这种行为。是否有其他因素导致此问题？还是我需要以不同的方式设置隔离级别？

我尝试使用 sprokID 调用此函数，它返回 true，这就是为什么我认为在插入过程中会发生脏读。

```
ALTER TABLE [dbo].[PendingSprokOrders]  WITH CHECK ADD  CONSTRAINT [CK_SprokInStock] CHECK  (([dbo].[SprokInStockCount]([SprokID])=(1)))

FUNCTION [dbo].[SprokInStockCount] ( @SprokId INT )
RETURNS INT
AS 
    BEGIN 

        DECLARE @Active INT
        SET @Active = ( SELECT  COUNT(*)
                        FROM    [PendingSprokOrders] AS uac   WITH(READPAST)
                        WHERE   uac.SprokID = @SprokId
                      ) 
        DECLARE @Total INT
        SET @Total = ( SELECT
                                ISNULL(InStock, 0)
                       FROM     SprokInvetory
                       WHERE    id = @SprokId
                     )

        DECLARE @Result INT

        IF @Total - @Active > 0 
            SET @Result = 1
        ELSE 
            SET @Result = 0  
        RETURN @Result;
    END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:55:29.020

数学关了。代替：

```
 IF @Total - @Active > 0 
        SET @Result = 1
    ELSE 
        SET @Result = 0 
```

它应该是：

```
 IF @Total - @Active > -1 
        SET @Result = 1
    ELSE 
        SET @Result = 0 
```

那是因为您的约束函数可以看到您尝试添加的行并对其进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:48:50.210

是的，但你的 set@total 语句是矛盾的，你的代码中也有几个中断。

# php - 如何在 Zend Framework 中加载一个类

> ID：11762906
> 
> 赞同：1
> 
> 时间：2012-08-01T15:46:44.230
> 
> 标签：php, zend-framework

我在标准 Zend Framework 应用程序中获得了一个 PHP 库 ( [PHP Markdown](http://michelf.ca/projects/php-markdown/) ) 。`library`在我的模型和控制器中加载文件及其所有类的最佳方式是什么。

结构：

```
library/phpMarkdown/markdown.php 
```

注意：PHP Markdown 有一个非常丑陋的结构：它只是真正的“API”是一个简单的函数，而不是一个类。因此，优雅不适用于**这种确切的情况**，但关于这个问题，正确命名的文件/类的通用解决方案也是“正确的答案。

*编辑* 这里有这么多好的输入，真的不确定我应该接受哪个答案！谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:49:25.687

[自动装载机](http://framework.zend.com/manual/en/zend.loader.autoloader.html)

只需实例化该类，自动加载器就会找到它。如果不是，您需要添加命名空间和路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:53:47.433

如果您在以下树中有一个类（例如）： library/My/Tool.php

您需要将其添加到您的 application.ini ：

```
autoloaderNamespaces[] = "My_" 
```

然后在您的代码中，您只需调用：

```
$tool = new My_Tool(); 
```

**编辑 ：**

在 Tool.php 文件中，您必须遵循 Zend 命名约定并具有以下内容：

```
<?php

class My_Tool {

} 
```

有关更多信息，请参见：[Zend 命名约定](http://framework.zend.com/manual/en/coding-standard.naming-conventions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:09:11.413

为了简单起见，只需添加一个文件，您可以在您的`Bootstrap.php`:

```
 protected function _initLoad(){
        Zend_Loader::loadFile('markdown.php', '/../library');

    } 
```

我只是将 markdown.php 复制到应用程序库中，并将这个小函数放在引导程序中。你也可以使用[Zend_Loader::loadClass();](http://framework.zend.com/manual/en/zend.loader.load.html#zend.loader.load.class) 如果你想。

# android - ICS 设备（API 级别 15）上的 MapView 在使用清单中设置的 minSdkVersion 构建时闪烁灰色图块

> ID：11762910
> 
> 赞同：0
> 
> 时间：2012-08-01T15:46:53.367
> 
> 标签：android, android-mapview, android-4.0-ice-cream-sandwich

我一直在努力找出为什么我们看到我们的应用程序在 ICS 设备上显示闪烁的地图图块（在 ICS 之前的设备上运行良好）。当清单中设置了最低 sdk 级别时，我最终缩小了它似乎是 API 级别 15 设备上的 API 的问题（请参阅下面的重现步骤和示例代码）。

有没有其他人看到这个问题，甚至更好地知道是否有解决方法？

重现步骤：-

1.  使用来自 API 15 SDK Samples add-ons/addon-google_apis-google_inc_-15/samples 的 Google 示例 MapDemos

2.  将示例导入 eclipse 并按原样构建它，将 Project Build 目标设置为 15 ，启动应用程序，设备为纵向并显示 MapViewCompassDemo 视图 - 将设备旋转为横向并注意一切正常。

3.  更改清单以将最小 sdk 设置为 15 添加：-

    ```
    <uses-sdk android:minSdkVersion="15" /> 
    ```

4.  使用仍设置为 15 的 Project Build target api 重新构建应用程序。

5.  启动应用程序，选择 MapViewCompassDemo 视图并从纵向模式旋转到横向模式（强制恢复）并注意屏幕各个部分的地图图块开始持续闪烁灰色（重新加载 - 日志文件显示它通过 http 持续获取新数据）。

6.  将 minSdkVersion 设置为较低级别（例如 11）并使用 Build target 设置为 11 进行构建会重现相同的问题。

当在示例代码中进一步设置缩放时，例如 10 iso 8，此问题更容易出现。

这可以在三星 Galaxy III、II 和 ICS (4.0.3) 上的 Galaxy Tab 平板电脑上重现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:08:46.673

终于从谷歌得到了答案：-

*适用于 Android 的原始 Google 地图库现已弃用，您应该使用此处讨论的新 V2 API： [http ://android-developers.blogspot.com/2012/12/new-google-maps-android-api-now-part -of.html](http://android-developers.blogspot.com/2012/12/new-google-maps-android-api-now-part-of.html) 该 API 的错误应在此处提交： [http ://code.google.com/p/gmaps-api-issues/issues/entry?template=Android%20API%20v2%20-%20Bug](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Android%20API%20v2%20-%20Bug)*

多么可笑！

# javascript - Javascript / jQuery：为每个用户显示一个 IE Only Modal ONCE，然后不再显示它

> ID：11762916
> 
> 赞同：0
> 
> 时间：2012-08-01T15:47:11.533
> 
> 标签：javascript, jquery, internet-explorer, modal-dialog

我在我的网站上检查了 IE，如果正在使用 IE，它会在 3 秒超时后弹出一个模态窗口，建议用户获取 chrome 或 firefox。还有一个“继续，风险自负”的按钮。基本上我想要实现的是使用 localStorage 来确定用户是否已经看到了模态，方法是让它在模态之前触发两件事：

**第一：**查看localStorage项是否已经存在

**如果存在：**不显示模态

**如果它不存在：**显示模态，然后保存localStorage项，以便下次访问它不会再次显示。

我知道如何使用 Javascript 来做到这一点，但不幸的是，我对 jQuery 还是很陌生，所以对我来说它仍然有点像 moosh。如何通过添加或修改以下代码来实现我的目标：

```
 <!--[if lt IE 10]>
        <script type="text/javascript">
            $(window).load(setTimeout(function(){
                $('#ieModal').modal('show');
            },3000));
        </script>
    <![endif]--> 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:54:11.593

你可以做这样的事情

```
 <!--[if lt IE 10]>
        <script type="text/javascript">
            $(window).load(setTimeout(function(){
                if(!check_if_localStorage_item_exists()) {
                  //it doesn't exist!
                  $('#ieModal').modal('show'); //Lets show the modal
                  create_localStorage_item();
                 }
            },3000));
        </script>
    <![endif]--> 
```

然后您可以使用 javascript 对 localStorage 方法进行编码，您还可以使用 cookie，这对于旧版浏览器可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:10:36.217

简单地说，您可以在 Jquery 中使用 cookie。转到以下 URL，您将看到一个处理 cookie 的 Jquery 插件。Cookies 与所有浏览器兼容。 [http://archive.plugins.jquery.com/project/Cookie](http://archive.plugins.jquery.com/project/Cookie)

# jquery-mobile - 随机化 jqPlot 图形的颜色

> ID：11762920
> 
> 赞同：0
> 
> 时间：2012-08-01T15:47:20.307
> 
> 标签：jquery-mobile, jqplot

目前，我正在使用 为我的 jqPlot 图形设置特定颜色`seriesColors: [ "#55A9D3", "#D4EDE2", "#EA2E49"]`，但是如果图形最终有超过 3 个结果（图形是在动态数据上生成的），我希望 jqPlot 为我简单地随机化颜色。有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:14:11.713

试试这个：

```
seriesColors: $.merge([ "#55A9D3", "#D4EDE2", "#EA2E49"], $.jqplot.config.defaultColors) 
```

# javascript - 在 webview 中加载 Javascript 和 HTML

> ID：11762922
> 
> 赞同：1
> 
> 时间：2012-08-01T15:47:25.297
> 
> 标签：javascript, android, html, webview

我在让 Javascript 在 Webview 中工作时遇到了一些麻烦。基本上，我正在做的是使用 Webview 客户端，然后在那里加载一个 html 文件：

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setAllowFileAccess(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.loadUrl("file:///android_asset/test/test.html"); 
```

Webview 加载完美，html 显示没有问题。

在 html 文件中，加载我使用的 javascript 文件

```
<script src="test.js" type="text/javascript"> </script> 
```

Javascript 文件也在 assets 文件夹中。html/javascript 在我笔记本电脑的普通浏览器中运行良好，但我无法让它在 Android 中运行。我试过在不设置 WebView 客户端的情况下运行它，但也没有运气。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:19:17.177

只是一个建议！将文件夹结构更改为

```
 .../assets/www 
```

然后尝试将您的 js 放入一个名为“lib”的文件夹中。.../资产/www/lib

然后尝试这样的代码

```
<script type="text/javascript" src="lib/test.js"></script> 
```

改变

```
mWebView.loadUrl("file:///android_asset/www/test.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:53:56.993

您可以尝试使用对 javascript 文件的完整路径引用。

# excel - 除非我使用 Application.Wait，否则 Excel VBA Cells.Find 会失败。为什么？

> ID：11762924
> 
> 赞同：2
> 
> 时间：2012-08-01T15:47:28.390
> 
> 标签：excel, vba, replace

我正在研究一个 VBA 宏，我遇到了一些非常奇怪的行为。

它可以正常工作`Application.ScreenUpdating = True`，甚至在屏幕更新关闭并使用 VBA 调试器单步执行宏时也可以正常工作。

不幸的是，仅在屏幕更新关闭的情况下运行宏会导致`Find`函数在以下代码中失败：

```
Application.StatusBar = "Extracting data and updating tables..."
Application.ScreenUpdating = False
Application.DisplayAlerts = False

Workbooks.Open FileName:=Save_folder & "new_data.xls"
Workbooks("new_data.xls").Sheets("data").Range("B9:B39").Copy

Dim tempdate As Date, startCell As Range

tempdate = DateAdd("d", -1, Now)
tempdate = DateSerial(Year(tempdate), Month(tempdate), 1) 'Start of the month
Dim strdate As String
strdate = Format(tempdate, "Short Date")

Set startCell = ThisWorkbook.Sheets("Raw Data").Cells.Find(What:=CDate(strdate), After:=ThisWorkbook.Sheets("Raw Data").Range("A1"), LookIn:=xlFormulas _
 , LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False)

If startCell Is Nothing Then
    MsgBox "Couldn't find a date equal to the start of yesterday's month."
    Exit Sub
Else
    startCell.Offset(0, 1).PasteSpecial xlPasteValues, Transpose:=False
End If 
```

在调用上方添加这个简短的代码片段来`Cells.Find`解决问题：

```
'Wait one second, to appease the Excel object creation gods
Application.StatusBar = "Wait one second..."
Application.Wait Now + TimeValue("00:00:01")
Application.StatusBar = "Pasting values..." 
```

抛出一个`MsgBox`或提示等也允许`Find`成功。

我的问题是，我为什么要等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T15:53:47.203

我无法产生这种行为。看截图

```
Sub Sample()
    Dim tempdate As Date, startCell As Range
    Dim strdate As String

    Application.ScreenUpdating = False
    Application.DisplayAlerts = False

    tempdate = DateAdd("d", -1, Now)
    tempdate = DateSerial(Year(tempdate), Month(tempdate), 1) 'Start of the month

    strdate = Format(tempdate, "Short Date")

    Set startCell = ThisWorkbook.Sheets("Raw Data").Cells.Find(What:=CDate(strdate), LookIn:=xlFormulas _
     , LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False)

    If startCell Is Nothing Then
        MsgBox "Couldn't find a date equal to the start of yesterday's month."
    Else
        MsgBox "Found"
    End If

    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
End Sub 
```

**快照**

![在此处输入图像描述](../Images/c0c471c584e9df2331589f4958634d1c.png)

**更新**：

如果您的代码中发生了很多事情，请使用`DoEvents`以便代码将控制权传递给操作系统，以便操作系统可以处理其他事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T00:43:36.663

我在尝试解决相同的问题时遇到了这个线程，我能够通过在运行任何 .Find 函数之前简单地激活工作表来绕过 DoEvents 技巧。

您的代码和我的代码之间唯一押韵的是它们都使用 .Find 函数。也许这就是阻塞操作系统的原因。

# jfreechart - JFreeChart 奇怪的渲染（无头 RedHat）

> ID：11762928
> 
> 赞同：0
> 
> 时间：2012-08-01T15:47:39.920
> 
> 标签：jfreechart, redhat

我目前正在将应用程序从 Windows 环境迁移到 Redhat 环境。此应用程序使用 JfreeChart 1.0.6。它是一个部署在 tomcat 7 中的 Web 应用程序，该应用程序位于运行在 Open-JDK6 上的 Redhat 无头环境中）。

我获得以下PNG。它看起来像手写的图表，所有内容都移向图像的顶部。

有人已经遇到过这样的问题并得到了解决吗？

请参阅下面的图表：

[图片 http://img194.imageshack.us/img194/4489/graph20120801105017.png](http://img194.imageshack.us/img194/4489/graph20120801105017.png)

请参见下面生成图表的代码：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
    ServletContext servlet = (ServletContext)facesContext.getExternalContext().getContext();
    HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    String path = null;

    if (null != servlet.getRealPath("/"))
    {
        path = servlet.getRealPath("/");
    }
    else
    {
        path = servlet.getResource("/").getPath();
    }

    File stockageImg = new File(path+Constants.CHEMIN_GRAPH+CM50Util.dateHeureJour()+Constants.EXTENSION_GRAPH);

    ChartRenderingInfo info = new ChartRenderingInfo (new StandardEntityCollection());
    DefaultXYDataset dataset = new DefaultXYDataset();
    XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer(true, false);

    try 
    {
        dataset.addSeries("CM moyen Annuel", courbeRef);
        dataset.addSeries("CM non dépassé plus de 5% du temps", courbe95);

        //creation du graphique
        JFreeChart chart = ChartFactory.createXYLineChart(
             "Courbes de décroissance",
             "Distance en m\u00E8tre",
             "Champ",
             dataset,
             PlotOrientation.VERTICAL,
             true,
             false,
             false);

        XYPlot plot = (XYPlot) chart.getPlot();
        plot.setRenderer(renderer);

        IntervalMarker intervalIncertitude = new IntervalMarker(Double.parseDouble(resultDistanceMin.replace(Constants.UNITE_DISTANCE, "")), Double.parseDouble(resultDistanceMax.replace(Constants.UNITE_DISTANCE, "")));
        intervalIncertitude.setPaint(new Color(222, 222, 255, 128));
        plot.addDomainMarker(intervalIncertitude, Layer.BACKGROUND);

        Marker distanceTiers = new ValueMarker(Double.parseDouble(resultDistance.replace(Constants.UNITE_DISTANCE, "")));
        distanceTiers.setPaint(Color.BLACK);
        plot.addDomainMarker(distanceTiers);

        renderer.setSeriesPaint(0, Color.GREEN);
        renderer.setSeriesPaint(1, Color.BLUE);

        ChartUtilities.saveChartAsPNG(stockageImg, chart, 800, 400, info);

    } catch (Exception e) {
            log.error("erreur generation graphique ",e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:42:02.610

我找到了问题的原因：

*   我记录了 JfreeChart 使用的字体：它是 SansSerif.plain
*   查看 OpenJDK，在文件 fontconfig.properties 中，我发现：

sansserif.plain.latin-1=DejaVu LGC Sans

文件名.DejaVu_LGC_Sans=/usr/share/fonts/dejavu-lgc/DejaVuLGCSans.ttf

我的机器上没有安装这个字体，所以我安装了它，它运行良好。

# android - android在表单中删除键盘

> ID：11762929
> 
> 赞同：0
> 
> 时间：2012-08-01T15:47:40.190
> 
> 标签：android, validation, android-keypad

我有一个带有表单的 Android 应用程序。当用户通过单击“发送”发送信息时，应用程序会验证表单。如果发现问题，它会向上滚动并显示某个 textView。

但是如何清除键盘？它占据了我屏幕的一半。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:13:52.117

要显示键盘：

```
EditText editText = (EditText) findViewById(R.id.myEdit);
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
// only will trigger it if no physical keyboard is open
mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

并隐藏：

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

此代码取自[http://www.androidguys.com/2009/11/12/how-to-showhide-soft-keyboard-programmatically-dev-tips-tools/](http://www.androidguys.com/2009/11/12/how-to-showhide-soft-keyboard-programmatically-dev-tips-tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T21:45:31.913

在 xml 中使用`android:imeOptions = "actionNext"`or`android:imeOptions = "actionDone"`

# java - 在春季从模型和视图下载文件

> ID：11762934
> 
> 赞同：0
> 
> 时间：2012-08-01T15:47:45.540
> 
> 标签：java, spring, spring-mvc, download

我正在尝试创建一个页面，用户可以在其中下载一些 .log 文件。这是代码：

```
if(action.equalsIgnoreCase("download")){
       String file = (String)request.getParameter("file");
       response.setHeader("Content-Disposition",
       "attachment;filename="+file+"");
       response.setContentType("text/plain");

       File down_file = new File("log/"+file);

       FileInputStream fileIn = new FileInputStream(down_file);
       ServletOutputStream out = response.getOutputStream();

       byte[] outputByte = new byte[4096];
       //copy binary contect to output stream
       while(fileIn.read(outputByte, 0, 4096) != -1)
       {
        out.write(outputByte, 0, 4096);
       }
       fileIn.close();
       out.flush();
       out.close();

       return null;
} 
```

我在哪里做错了？当我点击下载按钮时，它正确地要求我保存文件，但它总是一个 0 字节的文件......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T16:20:05.957

这应该做的工作：

```
public void getFile(final HttpServletResponse response) {
  String file = (String) request.getParameter("file");
  response.setHeader("Content-Disposition",
                     "attachment;filename=" + file);
  response.setContentType("text/plain");

  File down_file = new File("log/" + file);
  FileInputStream fileIn = new FileInputStream(down_file);
  ByteStreams.copy(fileIn, response.getOutputStream());
  response.flushBuffer();

  return null;
} 
```

[`ByteStreams.copy`](http://docs.guava-libraries.googlecode.com/git-history/v13.0/javadoc/com/google/common/io/ByteStreams.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)来自美妙的[Google 的 Guava 库](https://code.google.com/p/guava-libraries/)。

**编辑**：

此外，如果您使用的是 Spring MVC 3.1，您可以以更清洁的方式进行操作（我就是这样做的，结果证明是单行的；））：

```
@Controller
public final class TestController extends BaseController {

    @RequestMapping(value = "/some/url/for/downloading/files/{file}",
                    produces = "text/plain")
    @ResponseBody
    public byte[] getFile(@PathVariable final String file) throws IOException {
        return Files.toByteArray(new File("log/" + file));
    }

} 
```

并在您的`servlet.xml`添加转换器中`mvc:message-converters`：

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" />
    </mvc:message-converters>
</mvc:annotation-driven> 
```

这样您就可以`byte[]`从任何`@Controller`带有注释的方法返回`@ResponseBody`。[在此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-produces)和[此处](http://blog.springsource.org/2011/02/21/spring-3-1-m1-mvc-namespace-enhancements-and-configuration/)阅读更多信息。

[`Files.toByteArray`](http://docs.guava-libraries.googlecode.com/git-history/v13.0/javadoc/com/google/common/io/Files.html#toByteArray%28java.io.File%29)也是来自番石榴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:12:34.343

尝试：

```
IOUtils.copy(fileIn, response.getOutputStream());
response.flushBuffer(); 
```

你可以在这里找到 Apache Commons IO：http: [//commons.apache.org/io/](http://commons.apache.org/io/)

[在这里](http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)你可以找到`IOUtils.copy()`参考。

# java - 热图 - 生成简单的“热点”谷歌地图 Android

> ID：11762936
> 
> 赞同：3
> 
> 时间：2012-08-01T15:47:52.430
> 
> 标签：java, android, android-mapview, heatmap

Android SDK 2.3.3 谷歌地图 V2

目前我正在绘制圆圈覆盖并将它们添加到 MapView。大小由某个值决定，我正在寻找其他东西来确定圆的 RadialGradient 颜色。

```
 circle.setShader(new RadialGradient(pt.x, pt.y, 40, Color.argb(150, 252, 5, 5), Color.argb(60, 234, 231, 0), TileMode.MIRROR));
            canvas.drawCircle(pt.x, pt.y, radius, circle); 
```

它可以工作，但是我希望边缘看起来更类似于经典的热点图。

当前的

![当前热图](../Images/decc6c019ca836a1ed38223d0239b962.png)

我想要实现的（我仍然希望形状是圆形的）

![所需的热图](../Images/144372c43e6f80f9cadb1dea76c9b4fc.png)

我正在考虑可能直接在当前下方绘制一个具有更大区域的圆圈，以实现更典型的热图外观，但是考虑到我在移动设备上执行此操作必须重新渲染每个，这会影响性能放大或缩小动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:22:45.957

这里有一些明显的选择，我相信还有更多不明显的方法可以做到这一点：

*   按照您的建议绘制多个同心圆
*   从图像加载同心圆图案并绘制它（较少渲染，但当然，您必须加载图像）
*   使用 a`BitmapShader`绘制一个带有自定义渐变的单个圆圈，该渐变与您要查找的内容相匹配：http: [//developer.android.com/reference/android/graphics/BitmapShader.html](http://developer.android.com/reference/android/graphics/BitmapShader.html)

不幸的是，我不知道这些选项中的哪一个会给你最好的性能，所以你可能不得不自己测试它们。我怀疑，对于大量的热图点，后两个选项之一会更有效，但这只是猜测。

# c# - FFT 算法 - 如何将样本转换为复杂结构？

> ID：11762941
> 
> 赞同：2
> 
> 时间：2012-08-01T15:48:10.440
> 
> 标签：c#, fft, audio-processing

**我的问题的简短版本：**

如何从音频样本数组（如 Int16）到常见 FFT 库（如 AForge）使用的复杂结构？

**我的问题的长版本：**

我是音频处理的新手，正在寻找分析音乐中的音频（定位节拍、速度等）。经过几天的阅读，快速傅里叶变换 (FFT) 算法似乎是朝着正确方向迈出的一步。

为了不必从头开始实现算法，我下载了几个开源库，Exocortex 和 AForge.net。

我正在将音频解码到内存缓冲区。在我的 16 位 48kHz 音频立体声轨道的每个周期中，我得到 48000 字节或 24000 个样本。这些当前被复制到一个短数组（Int16）中。我现在需要将我的数组转换为复杂结构（在 AForge 的情况下）。这又用“实数”和“虚数”双精度值初始化。但是这些到底是什么，我如何从我的数组转到这两个双精度值？另外，我需要在传递之前拆分左/右通道吗？

不幸的是，只要不是以代码形式呈现，我在阅读数学公式方面就很糟糕。到目前为止，在我访问过的几乎所有网站上，很快就会出现希腊符号和复杂的数学公式来帮助解释算法。结果，我马上就迷失在翻译中。相信我，我努力寻找“傻瓜的 FFT 算法”。;)

*版主注意：这不是[将音频样本从字节转换为复数的副本吗？](https://stackoverflow.com/questions/5012307/convert-audio-samples-from-bytes-to-complex-numbers)即使问题相似。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:04:35.207

您需要拆分通道并分别处理它们，或者将它们平均到单个单声道 - 这最好取决于您最终要完成的工作。

至于转换数据类型 - 每个实数也是一个复数，其“虚数”部分为 0，所以转换本质上是用样本创建一个复数数组（最好是标准化的 - 在这种情况下除以 32768 所以实部的值在 [-1,+1]) 范围内，虚部的值为零。

# c# - 有多少管理到本地（反之亦然）转换？

> ID：11762947
> 
> 赞同：1
> 
> 时间：2012-08-01T15:48:48.393
> 
> 标签：c#, .net, com, native, managed

我有一个应用程序，它使用了几个用 C# 编写的组件和一些用 VB6 编写的组件，它们通过 COM Interop 进行交互。

在一些性能问题分析的上下文中，我想找出在我的应用程序执行期间发生的托管代码和本机代码（反之亦然）之间的转换次数。

有没有办法获取这些信息？我找了一个 Perfmon 计数器，但只找到了编组的数量。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:10:23.683

可能您可以从托管代码记录所有对非托管代码的调用，反之亦然，这将涉及修改双方的代码，但我认为这将提供足够的灵活性来添加一些其他海关统计数据，例如调用时间。

# javascript - 您可以在三个.js 场景之间共享网格吗？

> ID：11762961
> 
> 赞同：6
> 
> 时间：2012-08-01T15:49:30.847
> 
> 标签：javascript, three.js

是否可以在场景之间共享网格或几何图形？

我有多个场景应该是相同的、大的网格，但是当我尝试在它们之间共享网格时，我得到了 WebGL 上下文错误。我怀疑某些变量在添加到场景时会在网格或几何体上设置，从而阻止它们在另一个场景中重复使用。

编辑：

更具体地说，我正在尝试在不同场景之间共享已使用 JSONLoader 加载的几何图形。即在此示例中，“应用程序”是一组带有场景的应用程序：

```
var loader = new THREE.JSONLoader();
loader.load('obj/tree/tree.js', function(geometry) {
    apps.map(function(app) {
        var material = new THREE.MeshBasicMaterial({color: 0xff0000, opacity: 1.0}); 
        var mesh = new THREE.Mesh(geometry, geometry.materials[0]);
        app.scene.add(mesh);
    });
}); 
```

完整来源：[https ://github.com/bjnortier/three.js/blob/multiple_canvasses_with_json_loader/examples/webgl_multiple_canvases_grid.html](https://github.com/bjnortier/three.js/blob/multiple_canvasses_with_json_loader/examples/webgl_multiple_canvases_grid.html)

此示例生成 WebGL 错误：

WebGL: INVALID_OPERATION: useProgram: object not from this context
WebGL: INVALID_OPERATION: uniformMatrix4fv: location is not from current program
WebGL: INVALID_OPERATION: uniform3f: location not for current program
WebGL: INVALID_OPERATION: uniform1f: location not for current program
etc...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T16:01:34.260

您可以沿不同的场景共享几何图形。
您不能沿不同的场景共享网格。
您不能沿不同的渲染器共享几何/网格/场景（目前）。

# javascript - Angularjs - IE7 模式中的 IE8（以及 IE8 兼容模式）无法正常工作

> ID：11762963
> 
> 赞同：3
> 
> 时间：2012-08-01T15:49:38.197
> 
> 标签：javascript, web-applications, angularjs

我对 Angularjs 版本 1.0.1 有一点问题。我创建了一个应用程序并在 IE8 中以 IE7 模式对其进行了测试，它不听 ng-change 或 ng-click，没有测试其他句柄，但至少这两个对我不起作用......（**所有其他浏览器很好**）我希望你们能帮我解决这个问题，或者我在这里遗漏了一些东西...... IE7 / 8有特殊处理吗？

在这里你可以看到控制器：

```
CalculatorCtrl = function($scope) {
    $scope.btw = 1;
    $scope.input = 0.00;
    $scope.output = 0.00;

    $scope.getBedrag = function() {
        var input = $scope.input;
        var btw = $scope.btw;       
        var output = 0.0;

        if(input != 0) {
            input = parseFloat(input.replace (",", "."));
            var tmp = input+"";
            $scope.input = tmp.replace(".", ",");
        }

        if($scope.isNumber(input)) {
            output = $scope.calculateBedrag(input);

            if(btw == 1) output = output * 1.19;

            $scope.output = output.toFixed(2).replace('.', ',');
        } else {
            //alert('Voer een bedrag in a.u.b.');
            $scope.input = 0;
            $scope.output = 0;
        }
    }
} 
```

在 html 中，我只是使用：

```
<input autocomplete="off" ng-model="input" class="x-width" type="text" name="bedrag" value="" ng-change="getBedrag()" />
<input class="x-width" disabled="disabled" type="text" name="bedrag" value="{{output}}" /> 
```

希望可以有人帮帮我 ：）

**编辑：** 嗯，我在 IE7 模式下尝试了 IE Tester，也没有工作。我没有任何带有*真正*IE7 的机器，所以我无法测试...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:48:28.187

还要确保您的应用程序遵循文档中列出的 IE 指南。[http://docs.angularjs.org/guide/ie](http://docs.angularjs.org/guide/ie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:04:07.467

好吧，文档说：

> “基于 Webkit 的浏览器（Safari、Chrome、iPhone、Android、WebOS、BlackBerry 6）、Firefox、IE6 及更高版本。注意 CSS 仅适用于 IE7 及更高版本。”

所以它应该工作正常。兼容模式有点奇怪，如果他们在那种模式下测试它，我会感到惊讶。

我真的无法想象为什么你需要它在那种模式下工作——如果你在 Intranet 上，你可以通过组策略更改 IE 的设置（据我所知）以使用兼容模式停止​​它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:24:52.820

为了让它工作，你必须使用类来定义你的 Angular 标记。例如：

`<div class="ng-controller:CalculatorCtrl">`

代替

`<div ng-controller="CalculatorCtrl">`

# python - 在 wxPython 中嵌入交互式 matplotlib 图形

> ID：11762966
> 
> 赞同：4
> 
> 时间：2012-08-01T15:50:08.560
> 
> 标签：python, matplotlib, wxpython

我看到了下面的例子：

[在 WxPython 面板中嵌入 matplotlib 图](https://stackoverflow.com/questions/10737459/embedding-a-matplotlib-figure-inside-a-wxpython-panel)

我得到了这个例子，但是，有没有一种方法可以使图表/绘图具有交互性，例如：

[http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html)

后者具有缩放、平移功能，这是我想嵌入到我的 GUI 中的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:06:47.710

我得到了这个工作...

```
 chart_toolbar = NavigationToolbar2Wx(chart_canvas)
    tw, th = chart_toolbar.GetSizeTuple()
    fw, fh = chart_canvas.GetSizeTuple()
    chart_toolbar.SetSize(wx.Size(fw, th))
    chart_toolbar.Realize()

    graphs_sizer = wx.BoxSizer(wx.VERTICAL)

    graphs_sizer.Add(chart_canvas, 20, flag=wx.EXPAND, border=5)
    graphs_sizer.Add(chart_toolbar, 1, flag=wx.ALIGN_CENTER, border=5)

    graphs_panel.SetSizer(graphs_sizer) 
```

无论出于何种原因，我都无法将工具栏放在不同的尺寸器/面板上。否则它工作。如果有人可以在不同的尺寸上得到它，那将不胜感激。

# html - HTML/CSS 表格右对齐文本在 IE 中不起作用

> ID：11762967
> 
> 赞同：6
> 
> 时间：2012-08-01T15:50:08.437
> 
> 标签：html, css, internet-explorer, html-table, alignment

同样，Internet Explorer 对我来说并不容易。我有一个表格，同一行有两个单元格。我想显示一些与左侧对齐的文本（第一个单元格），另一个与右侧对齐（第二个单元格）。这在 Chrome 和 Firefox 中完全有效，但在 IE 中，所有文本都显示为左对齐：

```
<table width="660px">
<tr>
    <td align="left" width="160px">Text 1</td>
    <td align="right" width="160px">Text 2</td>
</tr> 
```

​​​​​​​​​​​​​​​</p>

经过一番研究，我想知道是否应该将它放在 CSS 上，所以我将其更改为：

HTML：

```
<table class="anchors" width="660px">
<tr>
    <td class="left" width="160px">Text 1</td>
    <td class="right" width="160px">Text 2</td>
</tr> 
```

CSS：

```
table.anchors td.left
{
    text-align: left;
}

table.anchors td.right
{
      text-align: right;
} 
```

它仍然无法在 IE 中运行（至少是 9 版）。有人对此有提示吗？我应该使用其他东西（例如 div）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:04:58.993

代码在语法上是错误的（`width`属性采用数字或百分比值，而不是`px`单位），尽管浏览器可以原谅这一点。更严重的是，您设置了相互矛盾的要求：表格应为 660 像素宽，但由两个 160 像素宽的单元格组成。浏览器行为不一致并不奇怪。

但是，IE 8 和 IE 9 在“标准模式”下的行为与其他浏览器一样。否则，在[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)中，任何事情都可能发生，并且您不能将其称为错误，因为文档不合格。所以添加一个适当的 doctype 声明。

此外，最好避免相互冲突的要求。如果您需要在表格上设置总宽度（以像素为单位），那就这样吧。然后设置列宽以便它们相加，或者更简单地，将宽度设置为 50%（对于应该平衡的两列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:57:45.710

[http://jsfiddle.net/6jvnQ/](http://jsfiddle.net/6jvnQ/)

你能改变表格的宽度，使它和两个单元格一样宽吗？我怀疑你会因为奇怪的宽度而得到不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:18:47.863

用这个：

padding-left:22% 或 22px 或任意长度

# asp.net - 使用 ASP.NET MVC 绑定内部嵌套模型的模型

> ID：11762968
> 
> 赞同：2
> 
> 时间：2012-08-01T15:50:09.567
> 
> 标签：asp.net, asp.net-mvc-3, data-binding, razor

我正在尝试创建一个基本注册表单，该注册表单从下拉列表中接收带有状态的地址。我似乎无法将下拉列表中的数据提取到包含状态对象的模型中。我尝试创建一个自定义模型绑定器，如下所示。当我调试 ModelState 是有效的，但状态始终为空。

楷模：

```
public class AccountInfo 
{
    public virtual Guid accoundID { get; set; }
    public virtual string city { get; set; }
    public virtual string email_address { get; set; }
    public virtual string fax_number { get; set; }
    public virtual string first_name { get; set; }
    public virtual string last_name { get; set; }
    public virtual string mailing_address { get; set; }
    public virtual string phone_number { get; set; }
    public virtual State state { get; set; }
    public virtual string zip_code { get; set; }
}
public class State
{
    public virtual int ID { get; set; }
    public virtual string text { get; set; }
    public virtual string value { get; set; }
} 
```

模型粘合剂：

```
 public class StateModelBinder : IModelBinder
{
    private RepositoryDB Database;
    public object BindModel(
        ControllerContext controllerContext,
        ModelBindingContext bindingContext
        )
    {
        var key = bindingContext.ModelName + ".state";
        var value = bindingContext.ValueProvider.GetValue(key);
        if (value == null)
        {
            return null;
        }
        var result = new State();
        Database = new RepositoryDB(ConfigurationManager.
            ConnectionStrings["ConnectionString"].ConnectionString);

        try
        {
            var query = from s in Database.States
                        where s.value == value.ToString()
                        select new State()
                        {
                            text = s.text,
                            ID = s.ID,
                            value = s.value
                        };
            result = (State)query.ToList().ElementAt(0);        
        }
        catch (Exception ex)
        {
            bindingContext.ModelState.AddModelError(bindingContext.ModelName, ex.Message);
            bindingContext.ModelState.SetModelValue(key, value);
        }

        return result;
    } 
```

控制器：

```
[HttpPost]
    public ActionResult Index(AccountInfo accountModel)
    {
        try
        {
            if (ModelState.IsValid)
            {
                Database.Account.Add(accountModel);
                Database.SaveChanges();

                return Redirect(Url.Action("Success"));
            }
        }
        catch (Exception ex)
        {
            ModelState.AddModelError(String.Empty, ex);
        }
        // invalid info - return with error message         
        //repop select lists
        GetStates();
        return View(accountModel);
    }
public void GetStates()
    {
        IEnumerable<SelectListItem> states = from s in Database.States
                                                select new SelectListItem
                                                {
                                                    Text = s.text,
                                                    Value = s.value
                                                };

        ViewBag.state = states.ToList();
    } 
```

看法：

```
@Html.LabelFor(model => model.state, "*State")
@Html.DropDownListFor(model => model.state, (IEnumerable<SelectListItem>)ViewBag.state) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:59:54.670

这是你的问题：

```
@Html.DropDownListFor(model => model.state, (IEnumerable<SelectListItem>)ViewBag.state) 
```

绑定到 model.State 不能工作，因为这是一个复杂的类型：

```
public class State
{
    public virtual int ID { get; set; }
    public virtual string text { get; set; }
    public virtual string value { get; set; }
} 
```

如果您考虑一下，表单要回发的唯一内容是所选下拉项目的值，例如“MN”（明尼苏达州），而不是完整的课程。（您还没有为每个下拉列表项的值序列化“状态”类，希望只是每个状态的主键）您需要根据主键的类型将模型上的状态设置为字符串或整数你的状态是这样的：

```
public class AccountInfo 
{
    //...
    public virtual string/int State { get; set; }
    //...
} 
```

如果您想从状态的唯一标识符（例如，它应该是作为字符串或 int 回发到服务器的值），您可以从那里重新水合您的 State 对象

# java - 玩！框架。IO异常

> ID：11762971
> 
> 赞同：0
> 
> 时间：2012-08-01T15:50:22.623
> 
> 标签：java, playframework, playframework-2.0, web-development-server

我是 Play 新手！框架和学习过程中。
所以，我正在构建这个虚拟网站，突然间我收到了这条消息：

> IOException：无法运行程序“javac”：java.io.IOException：错误=12，无法分配内存

据我所知，我在我的机器上安装了最新的 jdk，并且有足够的 RAM 来分配......

问题出在哪里？
谢谢

# asp.net - 错误 [HY010] [Microsoft][ODBC 驱动程序管理器]

> ID：11762974
> 
> 赞同：0
> 
> 时间：2012-08-01T15:50:37.260
> 
> 标签：asp.net, oracle, odbc, timesten

我收到此错误：

```
ERROR [HY010] [Microsoft][ODBC Driver Manager] The driver is incapable of 
supporting the current environment attributes. 
```

制作时`IDbConnection.Open()`

我的机器是 Win 7 64，使用 TimesTen 客户端驱动程序将 ODBC 配置为系统 DSN。

我的同事有相同的设置，但从未见过错误，我们已经尝试解决了两天，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:03:14.770

> 驱动程序无法支持当前环境属性。

出现错误的原因有很多，但如果我猜测这可能是因为您使用的是 64 位操作系统 - 您已经设置了 64 位 ODBC 数据源，但您的应用程序是 32 位的。您需要 100% 确定您的应用程序与您的 ODBC 驱动程序的位大小相同。要在 64 位机器上设置 32 位 ODBC 驱动程序，您需要使用通常在

```
c:\Windows\SysWOW64\odbcad32.exe 
```

如果您的应用程序是 64 位的并且您无法获得 64 位 ODBC 驱动程序，您将需要使用诸如[Easysoft ODBC-ODBC Bridge](http://www.easysoft.com/products/data_access/odbc_odbc_bridge/index.html)之类的产品。这允许您将 64 位应用程序 ODBC 数据源连接到现有的 32 位数据源，反之亦然。Easysoft 网站上有大量关于[64 位/32 位 ODBC的说明。](http://www.easysoft.com/developer/interfaces/odbc/64-bit.html)

如果您在应用程序和 ODBC 数据源中都有正确的位大小，请打开[Microsoft ODBC Tracing](http://www.easysoft.com/support/kb/kb00946.html)，然后联系 TimesTen ODBC 驱动程序支持，他们应该能够告诉您驱动程序不支持的内容。

# java - 字符串、字节 [] 和压缩

> ID：11762975
> 
> 赞同：2
> 
> 时间：2012-08-01T15:50:38.157
> 
> 标签：java, compression

`String`我们可以`byte[]`轻松拆卸

```
 String s = "my string";
        byte[] b = s.getBytes();
        System.out.println(new String(b)); // my string 
```

然而，当涉及压缩时，似乎存在一些问题。假设您有 2 种方法，`compress`并且`uncompress`（下面的代码可以正常工作）

```
public static byte[] compress(String data) 
             throws UnsupportedEncodingException, IOException {
    byte[] input = data.getBytes("UTF-8");
    Deflater df = new Deflater();
    df.setLevel(Deflater.BEST_COMPRESSION);
    df.setInput(input);

    ByteArrayOutputStream baos = new ByteArrayOutputStream(input.length);
    df.finish();
    byte[] buff = new byte[1024];
    while (!df.finished()) {
        int count = df.deflate(buff);
        baos.write(buff, 0, count);
    }
    baos.close();
    byte[] output = baos.toByteArray();

    return output;
}

public static String uncompress(byte[] input) 
            throws UnsupportedEncodingException, IOException,
        DataFormatException {
    Inflater ifl = new Inflater();
    ifl.setInput(input);

    ByteArrayOutputStream baos = new ByteArrayOutputStream(input.length);
    byte[] buff = new byte[1024];
    while (!ifl.finished()) {
        int count = ifl.inflate(buff);
        baos.write(buff, 0, count);
    }
    baos.close();
    byte[] output = baos.toByteArray();

    return new String(output);
} 
```

我的测试工作如下（工作正常）

```
String text = "some text";
byte[] bytes = Compressor.compress(text);
assertEquals(Compressor.uncompress(bytes), text); // works 
```

没有别的原因，为什么不呢，我想修改第一个方法以返回 a`String`而不是`byte[].`

所以我`return new String(output)`从`compress`方法并将我的测试修改为：

```
String text = "some text";
String compressedText = Compressor.compress(text);
assertEquals(Compressor.uncompress(compressedText.getBytes), text); //fails 
```

这个测试失败了`java.util.zip.DataFormatException: incorrect header check`

**这是为什么？需要做什么才能使其发挥作用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:55:45.967

构造`String(byte[])`函数是问题所在。您不能简单地获取任意字节，将它们转换为字符串，然后再转换回字节数组。类根据所需的字符集`String`对此执行复杂的编码。`byte`如果给定的字节序列不能被表示，例如在 Unicode 中，它将被丢弃或转换为其他东西。只有当这些字节真的代表一些（在某些编码中）时，从字节到`String`和返回到的转换是无损的。`bytes``String`

这是一个最简单的例子：

```
new String(new byte[]{-128}, "UTF-8").getBytes("UTF-8") 
```

以上返回`-17, -65, -67`，而`127`输入返回完全相同的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:06:17.563

它失败了，因为您只是使用平台的当前编码将字节转换为字符串。因此，大多数字节将被转换为其等效的字符代码，但有些可能会被其他代码替换，具体取决于当前编码。要查看您的字节会发生什么，只需运行：

```
byte[] b = new byte[256];
for(int i = 0; i < b.length; ++i) {
    b[i] = (byte)i;
}
String s = new String(b);

for(int i = 0; i< s.length(); ++i) {
    System.out.println(i + ": " + s.substring(i, i+1) + " " + (int)s.charAt(i));
} 
```

如您所见，如果将其转换回字节，则某些代码将全部变为相同的值。并且此示例不处理使用多个代码对字符进行编码的编码，如在 UTF-8 中。

一般来说，应该避免调用`String.getBytes()`并且`new String(byte[])`不提供适当的编码参数。并且没有一对一的编码，每个字节都成为相应的字符代码，除非您自己编写代码。

如果您真的想将压缩数据作为字符串处理，请使用 base64 表示或十六进制转储。但请注意，字符串表示需要两倍的内存，base64 增加了 4/3 倍，十六进制甚至 2 倍。这可能会消耗压缩的好处。

# ruby-on-rails - Rails 协会 Has_Many

> ID：11762978
> 
> 赞同：1
> 
> 时间：2012-08-01T15:50:50.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试从与客户相关的书籍中获取信息，但似乎中间关联不起作用

这是我的模型

```
Book
    has_one :book_manager
    has_one :customer, :through => :book_manager

Customer
    has_many :book_managers
    has_many :books, :through => :book_managers

Book_Manager
    belongs_to :customer
    belongs_to :book 
```

该领域有跟随

```
Book          Customer      book_manager
id            id            id
description   email         customer_id
              password      book_id
              first         visible
              last 
```

在我的 def 编辑中获取信息时，以下是成功的

```
@book = Book.first
@book = Book.last 
```

以下似乎失败了

```
@customer = Customer.find(params[:id])
@book = @customer.books.first
@book = @customer.books.order("created_at DESC").first 
```

有什么我想念的吗？

我还尝试通过为 book_manager 控制器和视图创建索引来进行验证，但什么也没有出现，它似乎是空的。我创建书籍的方式如下

图书控制器

```
def create
@book = current_customer.books.build(params[:book])
    if @book.save
        flash[:success] = "Book Created"
        redirect_to root_url
    else
        render 'customer/edit'
    end
end 
```

我已经更新了我的关系，但仍然无法正常工作

这个想法是遵循

客户更新他的状态，其中包括许多子部分，例如

```
-Phone
-Book
-Interest 
```

在书下，我应该查看是否存在与客户相关的空书，如果有，则展示最后一本书。如果没有，那么客户会看到空白并可以创建一个新的

图书管理员只是为了维护这种关系，也因为我想保留数据，并且我想让用户确定我们是否将这些数据显示给站点中的其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:01:11.897

这是我的建议。我在 sqlite3（带有内存数据库）中这样做只是为了演示目的。

连接（在 rails 中，使用 database.yml 代替）：

```
ActiveRecord::Base.establish_connection :adapter => 'sqlite3', :database => ':memory:' 
```

设置类：

```
class Customer < ActiveRecord::Base
  has_many :book_managers
  has_many :books, :through => :book_managers
end

class BookManager < ActiveRecord::Base
  belongs_to :customer
  has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :book_manager
  def customer
    book_manager.customer
  end
end 
```

创建模式（这里只是为了显示列。在 rails 中，使用迁移）：

```
Book.connection.create_table(Book.table_name) do |t|
  t.string :description
  t.integer :book_manager_id
end
BookManager.connection.create_table(BookManager.table_name) do |t|
   t.boolean :visible
  t.integer :customer_id
end
Customer.connection.create_table(Customer.table_name) do |t|
  t.string :email
  t.string :password
  t.string :first
  t.string :last
end 
```

创建记录

```
cust = Customer.new :email => 'user@example.com'
cust.book_managers.build :visible => true
cust.book_managers.first.books.build :description => 'the odyssey'
cust.save! 
```

取回

```
cust = Customer.find 1
# test the has_many :through
cust.books
# test the Book#customer method
Book.first.customer 
```

# jquery - 如何附加隐藏元素，然后使用 jQuery 表单插件中的 ajaxSubmit 提交？

> ID：11762980
> 
> 赞同：1
> 
> 时间：2012-08-01T15:51:04.280
> 
> 标签：jquery, coffeescript, jquery-forms-plugin

我在 CoffeeScript 的复选框上有以下事件：

```
$('#check_box').click ->
  opts = 
    target: '#project_total'
    beforeSubmit: preSubmit
    success: postSubmit
  $('form').ajaxSubmit(opts)

preSubmit = ->
  $('input#running').remove()
  $('<input/>').attr('type', 'hidden').attr('id', 'running').attr('name', 'running').attr('value', 'true').appendTo('form') 
```

但是输入元素#running 不会作为 ajaxSubmit 调用的一部分发送。发送所有其他表单值。如果我单击复选框，然后单击提交按钮，则会发送#running 值。

如何将 #running 的值与 ajaxSubmit() 调用一起发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:58:38.510

如果你想发送一个带有表单的隐藏元素，你应该在你想发送的输入中使用 Type="Hidden" 。在这种情况下，您的跑步应该看起来像

> `<input id="running" type="hidden" value="somevalue"/>`

它应该与整个表格一起发送。

这段代码有点混乱，为什么你实际上删除了 input#running 然后再创建它？

# c# - 构造函数是否可以访问已初始化的属性

> ID：11762985
> 
> 赞同：0
> 
> 时间：2012-08-01T15:51:18.543
> 
> 标签：c#, class, initialization, collection-initializer

如果我在实例化对象时使用对象初始化程序，该对象构造函数是否可以访问已初始化的属性？

```
public class ExampleClass {
    public string proptery1 { get; set; }
    public string property2 { get; set; }

    public ExampleClass() {
        if(!string.IsNullOrEmpty(property1)) {
            ...
        }
    }
} 

ExampleClass exampleClass = new ExampleClass() {
    property1 = "hello",
    property2 = "world"
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:53:18.930

集合初始值设定项调用集合的 .Add 方法，该方法必须为特定集合定义。该对象将在传递给 .Add 之前完全构造。

语法

```
ExampleClass exampleClass = new ExampleClass() {
    property1 = "hello",
    property2 = "world"
}; 
```

不显示集合初始化程序，而是显示对象初始化。

在这里，将调用您的构造函数，*然后*调用给定属性的设置器。

一个合适的例子是

```
List<ExampleClass> list = new List<ExampleClass>() { 
    new ExampleClass() {
         exampleClass.property1 = "hello";
         exampleClass.property2 = "world";            
    }
} 
```

事件的顺序是

1.  创建一个新实例`List<ExampleClass>`并将其分配给*列表*
2.  创建 ExampleClass 的新实例，调用构造函数。
3.  在 ExampleClass 的新实例上调用属性设置器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:53:28.887

不，在初始化任何属性之前调用构造函数。

你的代码：

```
ExampleClass exampleClass = new ExampleClass() {
    property1 = "hello",
    property2 = "world"
}; 
```

是语言糖

```
ExampleClass exampleClass = new ExampleClass();
exampleClass.property1 = "hello";
exampleClass.property2 = "world"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:53:31.553

不，构造函数首先被调用。对象初始化只是调用构造函数然后设置对象属性的语法糖。

# charts - 更改 jpgraph 中 x 轴上标签的长度（图表）

> ID：11762990
> 
> 赞同：0
> 
> 时间：2012-08-01T15:51:55.480
> 
> 标签：charts, jpgraph

我已经使用 jpgraph 创建了一个图表——它可以工作，但是由于我的 x 轴上标签的长度，一些文本被“截断”并且不可见。我创建了一个自定义函数来使用换行符，但即使这样，它仍然会修剪图表上一个标签上的几个字符。

有没有一种方法可以实际定义 x 轴标签的实际长度，例如以像素为单位设置宽度？谢谢

```
 // Create the graph. These two calls are always required
    $graph = new Graph(1000,500,'auto');
    $graph->SetScale("textlin");

    //$theme_class="DefaultTheme";
    //$graph->SetTheme(new $theme_class());

    // set major and minor tick positions manually
    $graph->yaxis->SetTickPositions(array(0,1,2,3,4,5), array(0.5,1.5,2.5,3.5,4.5));
    $graph->SetBox(false);

    //$graph->ygrid->SetColor('gray');
    $graph->ygrid->SetFill(false);
    $graph->xaxis->SetLabelAngle(90); // 45 degrees angle
    $graph->xaxis->SetTickLabels($new_labels);
    $graph->yaxis->HideLine(false);
    $graph->yaxis->HideTicks(false,false);

    // Create the bar plots
    $b1plot = new BarPlot($data);

    // ...and add it to the graPH
    $graph->Add($b1plot);        

    $b1plot->SetColor("white");
    $b1plot->SetFillGradient("#4B0082","white",GRAD_LEFT_REFLECTION);
    $b1plot->SetWidth(45);
    $graph->title->Set("Bar Gradient(Left reflection)");

    // Display the graph
    $graph->Stroke(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:58:33.190

想通了（几乎）以防万一其他人需要帮助，请使用以下内容：

```
$graph->xaxis->SetLabelAlign('right','center','right'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T01:01:28.957

我不认为你可以设置标签的长度。您将需要使用`$graph->setMargin(a,b,c,d);`或`$graph->Set90AndMargin(a,b,c,d);`为旋转图设置图的边距。a - 左，b - 右，c - 上，d - 下边距。

查看有关这些函数的文档，它可能与旋转图有点混淆。

# iphone - 将视图添加到可变数组中

> ID：11762991
> 
> 赞同：0
> 
> 时间：2012-08-01T15:51:56.460
> 
> 标签：iphone, ios, nsmutablearray

我想知道我是否可以将视图放入 NSMutableArray，使用 UIPageControl 和 ScrollView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:55:02.357

答案是**肯定**的。您可以将任何类型的对象添加到`NSMutableArray`.

```
UIView *tempView = [[UIView alloc] init];
[yourArray addObject:tempView];
[tempView release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:56:14.377

您可以通过调用将 a`UIView`放入 a中，但这不会取得很大的效果，您可能想要做的是在启用分页的情况下显示一堆into a和 a ，[这里描述的过程](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)`NSMutableArray``addObject``UIView``UIScrollView``UIPageControl`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:02:09.157

您可以将任何类型的对象添加到您的数组/字典中。基本上所有的视图都是对象。因此，您可以像添加任何其他对象一样简单地添加它。例如。[myArray addObject:myViewObject]。但是为了动态添加对象，您必须将 Array/Dictionary 定义为 Mutable。（即，`NSMutableArray`或`NSMutableDictionary`）

# ruby-on-rails - 如何使用 Selenium 将鼠标悬停在元素上以使其可见，以便我可以单击链接？

> ID：11762992
> 
> 赞同：2
> 
> 时间：2012-08-01T15:51:56.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, selenium, rspec

有很多类似的帖子问这个问题：

[如何将鼠标悬停在 Selenium Ruby 中的元素上（鼠标悬停）？](https://stackoverflow.com/questions/7265310/how-to-hover-over-mouseover-an-element-in-selenium-ruby)

[Selenium2 WebDriver Ruby => 如何点击隐藏链接](https://stackoverflow.com/questions/6777886/selenium2-webdriver-ruby-how-click-on-a-hidden-link)

[Ruby Mouse Over 不够长，可能需要某种延迟](https://stackoverflow.com/questions/11564716/ruby-mouse-over-is-not-long-enough-may-need-a-delay-of-some-sort)

[鼠标悬停动作的代码。](https://groups.google.com/forum/?fromgroups#!searchin/webdriver/hover/webdriver/6WPwhP36EkU/S-H-APhuOpgJ)

我有`div.rating-panel`它是隐藏的，直到`div.empty-stars-container`悬停在上面。我想模拟用户悬停`div.empty-stars-container`在`div.rating-panel`.

```
it "should create rating items" , :js => true do
  # wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds

  empty_stars = page.driver.browser.find_element(:css, "h1 .empty-stars-container")
  star_3 = page.driver.browser.find_element(:css, "h1 a#panel_1_star_3")
  new_save = page.driver.browser.find_element(:css, "input#new_save")

  page.driver.browser.action.move_to(empty_stars).perform
  # wait.until { star_3.displayed? == true }

  star_3.click
  new_save.click

  page.should have_css("div.user-stars-container")
end 
```

浏览器打开，并执行了`move_to`操作（我假设）但面板永远不可见！我试过了，`wait.until`但这只是导致超时。

测试失败`star_3.click`并显示错误消息

```
Element is not currently visible and so may not be interacted with 
```

我希望有一种方法可以做我想做的事情，因为我的应用程序中有很多 javascript 测试，我希望 Selenium 能提供必要的帮助。

有任何想法吗？

# asp.net - 从 WCF 中的操作合同消息中查找 IP 地址

> ID：11762997
> 
> 赞同：2
> 
> 时间：2012-08-01T15:52:14.123
> 
> 标签：asp.net, wcf, iis

我刚刚看到一篇文章，其中提到了一种在不指定所需的 ASP.Net 兼容模式的情况下查找客户端 IP 地址的方法。

它需要执行以下操作：

```
 var msgprops = OperationContext.Current.IncomingMessageProperties;
        var clientprop = msgprops[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
        string clientip=clientprop.Address; 
```

这样做有什么缺点吗？如果是这样，什么是修复，如果修复使用 AspNetCompatibilityRequirements 属性，那么我会遇到性能或兼容性等问题吗？