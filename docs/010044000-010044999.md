# StackOverflow 问答 10044000-10044999

# selenium - 我们如何在 Selenium 中自动化 Flash 元素的点击动作？

> ID：10044001
> 
> 赞同：4
> 
> 时间：2012-04-06T13:15:30.960
> 
> 标签：selenium

我被分配了一个任务来单击 Flash 视频以使用 Selenium 自动化脚本播放。

我想知道那个或任何 JavaScript 代码的正确命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T07:08:25.577

您可以使用 sfapi 通过它您将获得一个 SeleniumFlexAPI.Swc 文件，您需要使用您的 flex 应用程序编译该文件。SFAPI：[https](https://code.google.com/p/sfapi/) ://code.google.com/p/sfapi/ 然后您可以通过使用 sfapi 函数来使用 flex 应用程序。: [sfapi 函数](http://asktofolks.com/38/how-to-handle-flex-in-selenium-web-driver)

或者您可以通过图像处理使用 sikuli-api，这不是一个完美的方法，但如果您需要紧急解决方案，您可以使用它。 [https://code.google.com/p/sikuli-api/](https://code.google.com/p/sikuli-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:34:55.857

为此，您必须使用 Autoit Recorder 录制此事件（单击 Flash 视频播放）。编译 Autoit 脚本后将生成 .exe 文件。因此，您可以通过从 selenium RC 执行此 .exe 文件来测试该部分。

# javascript - 构造函数调用的快捷方式

> ID：10044005
> 
> 赞同：0
> 
> 时间：2012-04-06T13:15:49.420
> 
> 标签：javascript

下面是我的*App*的简化版本，以下代码按预期工作。我可以在控制台中看到 4 个日志，其中包含我传递给的参数`SayHello`。

```
var App = {};

(function(that){

    that.SayHello = function(){
        console.log( arguments );
        return {
            doSomething: function(){
                console.log('done');
            }
        };
    };

    var obj = {
        t: new that.SayHello( 'a', 1 ),
        r: new that.SayHello( 'b', 2 ),
        b: new that.SayHello( 'c', 3 ),
        l: new that.SayHello( 'd', 4 )
    };

}(App)); 
```

**问题：**我正在尝试创建一个“快捷方式”，`new that.SayHello`如下所示：

```
var Greet = function(){
        return new that.SayHello;
    },
    obj = {
        t: Greet( 'a', 1 ),
        r: Greet( 'b', 2 ),
        b: Greet( 'c', 3 ),
        l: Greet( 'd', 4 )
    }; 
```

控制台记录 4 个空数组。这意味着`arguments`未能通过。

我也试过`return new that.SayHello.apply(this, arguments);`和`return new that.SayHello.call(this, arguments);`。

**我怎样才能将 ALL 传递给`Greet`？`arguments``that.SayHello`**
知道我必须初始化`that.SayHello`using`new that.SayHello`否则我的代码会中断。

我正在寻找任何数量的通用解决方案`arguments`，我不想`arguments`一个一个地通过。

此代码也可在[jsfiddle](http://jsfiddle.net/Pierre/AgBaQ/1/)上找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:27:30.147

像这样的东西？

```
var Greet = function(){
    var result = that.SayHello.prototype;
    that.SayHello.apply(result, arguments);
    return result;
} 
```

您应该知道这`apply`适用`arguments`于 object `result`。预定义`result`为`SayHello`原型会给你你想要的。

**编辑**

不幸的是，上面的代码会改变`SayHello`. 这显然是不受欢迎的行为，因此为了避免这种情况，我认为我们应该复制原型对象。例如使用以下代码

```
function clone(obj) {
    if (null == obj || "object" != typeof obj) return obj;
    var copy = obj.constructor();
    for (var attr in obj) {
        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
    }
    return copy;
}

var Greet = function(){
    var result = clone(that.SayHello.prototype);
    that.SayHello.apply(result, arguments);
    return result;
} 
```

我在[这个答案](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript#answer-728694)`clone`中找到了这个简单的函数版本。它有很多问题，您应该检查其他答案。例如，使用 jQuery可能是个好主意。`$.extend({},originalObject)`

请注意，如果您不关心原型链接（尽管您应该关心），您总是可以做一些非常简单的事情，如下所示：

```
var Greet = function(){
    var result = {};
    that.SayHello.apply(result, arguments);
    return result;
} 
```

如果您不关心旧浏览器（ECMAScript 5），那么您可以使用`Object.create`方法：

```
var Greet = function(){
    var result = Object.create(that.SayHello.prototype);
    that.SayHello.apply(result, arguments);
    return result;
} 
```

# wordpress - 您可以设置一个 wordpress（多站点）网络以跨多个托管帐户工作吗？

> ID：10044008
> 
> 赞同：0
> 
> 时间：2012-04-06T13:16:03.717
> 
> 标签：wordpress

我想管理作为单个 wordpress 网络的一部分运行的多个站点，但我不想亲自托管每个单独的站点。我不介意我的数据库是否包含每个站点的所有表，但我不想成为每个站点的所有文件等的唯一主机。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:32:22.187

如果当您说“管理多个站点”和“跨多个托管帐户工作”时我理解正确，我相信您可以轻松做到这一点。

有一个很好的工具可以远程管理多个 wp 站点……这些站点甚至不必都是您自己的站点。它们可以是客户站点，也可以是您自己的站点和客户站点的混合。

它们可以位于多个服务器和多个托管帐户上。

您只需向要远程管理的每个 wp 站点添加一个插件。当您登录您的帐户时，您无需进一步登录即可访问所有站点的所有管理员。您可以批量安装插件，也可以批量或单独或成组更新它们（您之前可能已经设置过）。

查看： http: [//managewp.com](http://managewp.com/)

玩得开心J

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T21:29:20.390

简短的回答是否定的，你不能这样做。但[这里](https://wordpress.stackexchange.com/questions/48232/can-you-set-up-a-wordpress-multi-site-network-to-work-across-multiple-hosting)有一些来自 wordpress.stackexchange.com 的有用阐述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T12:38:58.580

如果“跨服务器/域管理多个站点”包括促进营销和 SEO 相关活动，那么您还可以从[https://wordpress.org/plugins/seosamba-webmasters/](https://wordpress.org/plugins/seosamba-webmasters/)加载一个免费的营销插件，让您将所有站点与谷歌网站管理员、跟踪搜索排名、部署网络分析以及进行社交营销，所有这些都来自一个云仪表板，

它很好地完成了杰克逊的推荐。

还有一个高级版本，可让您通过[https://www.seosamba.com](https://www.seosamba.com)上的单个规则引擎对您的所有网站进行 SEO， 并且它也适用于您自己的网站或您的客户网站，因为您可以对其进行私有标记。

干杯

# functional-programming - 为什么这个真/假暗示函数在 SML 中不起作用？

> ID：10044016
> 
> 赞同：1
> 
> 时间：2012-04-06T13:16:48.297
> 
> 标签：functional-programming, sml, high-level

```
val implies =
    fn x y = case x of false andalso case y of false => true
     | fn x y = case x of false andalso case y of true => true
     | fn x y = case x of true andalso case y of false => false
     | fn x y = case x of true andalso case y of true => true; 
```

我无法编译它。我对 SML 比较陌生，所以不太了解通用语言和语法。我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T13:28:46.963

有各种各样的错误：

*   `implies`直接进行模式匹配没有参数。
*   `case x of`用于与特定值的模式匹配，而不是`if/else`接受布尔表达式的表达式。
*   lambda 的语法应该以`fn x => ...`.

快速修复：

```
fun implies x y =
    case (x, y) of
      (false, false) => true
    | (false, true) => true
    | (true, false) => false
    | (true, true) => true 
```

为了便于阅读，可以将其重写为：

```
fun implies false false = true
  | implies false true = true
  | implies true false = false
  | implies true true = true 
```

或者通过使用命题逻辑规则更简洁：

```
fun implies x y = (not x) orelse y 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T17:36:37.863

关于匿名函数，

```
fun implies x y = (not x) orelse y 
```

可以写成

```
val implies = fn x => fn y => (not x) orelse y 
```

但是，如您所见，这样做并没有任何意义（在这种特殊情况下）。

SML 中的匿名函数只接受一个参数。参数的柯里化有效，因为`fun`关键字是语法糖（也称为派生形式）

```
val rec implies = fn x => fn y =>
    case (x, y) of
      (x,y) => (not x) orelse y 
```

使用 case 是因为我们可以在原始函数中进行一些模式匹配，然后将其直接转换为 case，这`rec`是因为原始函数可能是递归的。

因此@pad 给出的第二个例子等价于：

```
val rec implies = fn x => fn y =>
    case (x, y) of
       (false, false) => true
     | (false, true) => true
     | (true, false) => false
     | (true, true) => true 
```

# c# - 为什么我的 Close 函数没有被调用？

> ID：10044017
> 
> 赞同：10
> 
> 时间：2012-04-06T13:16:50.123
> 
> 标签：c#, .net, garbage-collection, clr, finalizer

```
 class Program : CriticalFinalizerObject
    {
        static void Main(string[] args)
        {

            Program p = new Program();
            TextWriterTraceListener listener = new TextWriterTraceListener(@"C:\trace.txt");
            Trace.Listeners.Clear(); // Remove default trace listener
            Trace.Listeners.Add(listener);
            Trace.WriteLine("First Trace"); // Generate some trace messages
            Trace.WriteLine("Perhaps last Trace.");

        }

        ~Program()
        {
            Trace.Close();
        }
    } 
```

我得到文件大小= 0

完成程序**应该**已经执行，因为我来自`CriticalFinalizerObject`

*我不想在终结器中使用 Trace.Close() 。*

## 编辑

在@eric Lippert 回复之后：我重新编辑了试图将其匹配到的代码：**受约束的执行区域** （但仍然**没有**成功）

```
 [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    class Program : CriticalFinalizerObject
    {

        static void Main(string[] args)
        {
            RuntimeHelpers.PrepareConstrainedRegions();
            try
            {
            }
            catch (Exception e)
            {
            }
            finally
            {
                Program p = new Program();
                TextWriterTraceListener listener = new TextWriterTraceListener(@"C:\trace1.txt");
                Trace.Listeners.Clear();
                Trace.Listeners.Add(listener);
                Trace.WriteLine("First Trace");
                Trace.WriteLine("Perhaps last Trace.");
            }
        }

        ~Program()
        {
            Trace.Flush();
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T13:53:50.023

正如文档中明确指出的那样：

> 在从 CriticalFinalizerObject 类派生的类中，公共语言运行时 (CLR) 保证所有关键的终结代码都将有机会执行，前提是终结器遵循 CER 的规则，即使在 CLR 强制卸载应用程序域的情况下也是如此或中止线程。如果终结器违反了 CER 的规则，它可能无法成功执行

您的终结器是否遵循受限执行区域的所有规则？

更新：

您已经更新了代码，试图使其遵循受约束的执行区域的规则，但我没有看到任何证据表明您这样做是正确的。规则很明确；受约束的执行区域中的终结器**绝对不能**做以下任何事情：

*   分配内存
*   框一个值类型
*   获取锁
*   调用任意虚方法
*   调用任何缺乏可靠性契约的方法

你的终结者会做这五件事中的任何一件吗？如果是这样，则不要求 CLR 满足您对终结器始终运行的愿望。

此外：暂时忘记受约束的执行区域，因为**您现在的程序甚至不是线程安全**的。你在程序中写了一个讨厌的竞争条件。

在跟踪开始*之前*，是什么阻止了垃圾收集 p 的抖动？没有什么！jitter 知道 p 永远不会被再次使用，并且完全有权在分配后立即收集它。刷新可能在终结器线程上的*任何时间发生，包括**在*跟踪写入发生之前，或者在其中任何时间发生。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T13:18:27.290

因为您没有创建 Program 类的实例。

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.object.finalize%28v=vs.71%29.aspx)阅读更多：

> 此方法在对象变得不可访问后自动调用，除非该对象已通过调用 SuppressFinalize 免除终结。在应用程序域关闭期间，会自动对未免于完成的对象调用 Finalize，即使是那些仍可访问的对象。Finalize 只在给定实例上自动调用一次，除非该对象使用 ReRegisterForFinalize 等机制重新注册，并且随后没有调用 GC.SuppressFinalize。

所以，如果你想调用finilizer，你需要有对象的实例。

更新：`Trace.AutoFlush = true;`如果要写入消息，请考虑使用。

更新：（为什么不调用 Close 函数？）实际上你调用了 Close 函数（如果其他终结器没有发生异常）。如果您将保留默认 TraceListener（删除`Trace.Listeners.Clear()`调用），您将看到所有字符串已成功写入输出窗口。

这里的问题是 StreamWriter（在 TextWriterTraceListener 内部创建）没有终结器。因此它不会将所有数据刷新到文件中。你需要做什么：

```
FileStream file = new FileStream(@"C:\trace.txt", FileMode.OpenOrCreate);
StreamWriter writer = new StreamWriter(file);
GC.SuppressFinalize(file);
GC.SuppressFinalize(file.SafeFileHandle);
var listener = new TextWriterTraceListener(writer); 
```

实际上，您需要在终结器上手动关闭文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:38:44.150

在 C# 中，您无法确定何时或您的终结器被调用，因为 GC 会处理它。因此，如果您有一些资源要释放，最好创建一个类来实现`IDisposable`和使用它，如下所示：

```
using (MyResourceHolder rh = new MyResourceHolder()) {
    // ...
} // rh.Dispose() is called implicitly 
```

在 Dispose 方法中，您可以调用`Trace.Close()`.

有关. [_](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx) _`IDisposable`

# java - 根据结果 将输出数据格式化为表格

> ID：10044021
> 
> 赞同：1
> 
> 时间：2012-04-06T13:17:08.950
> 
> 标签：java, mysql, if-statement

**想通了，下面的解决方案！**

我有一个 HTML 表，它由数据库中的数据填充，其中两个表使用以下结构：

```
Table 1:
------------------------------
|id|data|other_data|more_data|
------------------------------

Table 2:
--------------------------------
|id|entryId|fileType|other_data|
-------------------------------- 
```

我同样加入这两个表：

```
SELECT * FROM table1 LEFT JOIN table2 ON table2.entryId = table1.id 
```

样品退货：

```
------------------------------------------------------------
|id|data|other_data|more_data|id|entryId|fileType|other_data|
-------------------------------------------------------------
|1 |....|..........|.........|1| 1      |file1   |..........|
|1 |....|..........|.........|2| 1      |file2   |..........|
|2 |....|..........|.........|3| 2      |file1   |..........|
|2 |....|..........|.........|4| 2      |file2   |..........|
|3 |....|..........|.........|5| 3      |file1   |..........|
|4 |....|..........|.........|6| 4      |file2   |..........| 
```

对于每种情况，我都期望至少有一个结果，通常是两个我想根据`fileType`字段进行排序的结果。fileType 可以是`file1`或`file2`.

```
<table>
<tr>
<td>file1 data here</td>
<td>file 2 data here</td>
</tr>
</table> 
```

如果结果中没有文件 1 或文件 2，请插入破折号 (-)，但始终以相同的方式和顺序保持该表的结构。我怎样才能做到这一点？我尝试了一个简单的 if/else 构造，但我的逻辑是错误的，并且返回了乱序的数据；我无法解决一个可行的解决方案。

```
while(docs.next) {

if(docs.getString("fileType").equals("file1")) {
        .....<td>file 1 data</td>
    }

else if(docs.getString("fileType").equals("file2")){
        .....<td>file 2 data</td>
    }
} 
```

一如既往，非常感谢您的帮助！

******想通了，谢谢！解决方案：****

 **我将逻辑分解为两个查询，然后使用您的建议：-第一个查询从 table1 中获取数据，设置 HTML 表-设置两个变量（fileData1，fileData2）为空-第二个查询从 table2 中获取数据，循环遍历结果以查找匹配项如果结果存在，则更改实际值 - 循环后，打印带有结果的表格单元格**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:32:57.787

`<td>`如果我理解正确，无论如何您都需要打印两个s 。您的`if`条件限制打印`<td>`-`<td>`只有在满足给定条件时才会打印。所以你需要改变它。相反，您需要这样做 - 通读`docs`，获取`fileType`. 如果是 file1，则将其值分配给一个变量，该变量已初始化为 null。如果是 file2 ，则将其赋值给一个变量，该变量已初始化为 null。然后测试该变量并在每种情况下打印“-”或内容。

假设变量`file1Data`和`file2Data`分别表示来自 file1 和 file2 的字符串数据，用于每次迭代`docs`，

```
while(docs.next) {
   String file1Data = null;
   String file2Data = null;
   if(docs.getString("fileType").equals("file1")) {
   // assign value for fiel1Data here
   } 
   if(docs.getString("fileType").equals("file2")) {
   // assign value for fiel2Data here
   }
   System.out.println("<tr>");
   System.out.println("<td>" + (file1Data == null || file1Data.equals("")?"-" : file1Data) + "</td>");
   System.out.println("<td>" + (file2Data == null || file2Data.equals("")?"-" : file2Data) + "</td>");
   System.out.println("</tr>");
} 
```**

# assembly - 为什么内存部分命名法以“。”为前缀

> ID：10044023
> 
> 赞同：6
> 
> 时间：2012-04-06T13:17:13.730
> 
> 标签：assembly, operating-system

应用程序的内存部分通常命名如下：

.text、.data、.bss、...

我的问题是，“。”背后的历史是什么。前缀（为什么是 .text 而不是文本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:51:15.537

我最好的猜测是它没有。这些词将被视为标签（即跳转到的点）而不是汇编程序指令。

# windows - Adobe AIR 的 Windows sendTo 上下文菜单？

> ID：10044027
> 
> 赞同：0
> 
> 时间：2012-04-06T13:17:29.950
> 
> 标签：windows, actionscript-3, air, filesystems, adobe

我想知道，是否有任何方法可以启用以下功能（至少在 Windows 中）：

右键单击本地文件系统中的任何文件，选择 sendTo 并将文件发送到 adobe air 应用程序（例如用于上传目的）。AIR 可以通过 INVOKE 事件处理它，但是我如何从 Windows 端实现这一点 - AIR 应用程序如何将自身注册为 sendTo 选项？

有机会实现这一目标吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:49:26.560

I believe the way to do this would be to write a bat file that modifies the windows registry to include a hook for your application.

Looks like this is the process, I'm sure there is a way to automate this (sorry, I can't help here, I'm not familiar with any windows api's)

[http://www.howtogeek.com/howto/windows-vista/add-any-application-to-the-desktop-right-click-menu-in-vista/](http://www.howtogeek.com/howto/windows-vista/add-any-application-to-the-desktop-right-click-menu-in-vista/)

# php - 如何先上传文件然后提交到 insertQuestion.php？

> ID：10044028
> 
> 赞同：0
> 
> 时间：2012-04-06T13:17:32.523
> 
> 标签：php, javascript, html, ajax

我有一个脚本，它上传一个名为upload_file.php 的文件。问题是我已经有一个表单操作，页面（QandATable.php）提交到（insertQuestion.php）。所以我想知道的是如何在后台发布到upload_php，所以当用户提交表单时，它会将用户导航到insertQuestion.php 页面，但它会在后台将文件位置发布到uplodad_file.php 页面？

下面是表单操作和提交按钮：

```
<form id="QandA" action="insertQuestion.php" method="post" enctype="multipart/form-data">

<p><input id="submitBtn" name="submitDetails" type="submit" value="Submit Details" /></p>

</form> 
```

更新：

如果我想在后台将整个表单发布到 createSession.php 和 upload_files.php，下面的 AJAX 会起作用吗？

```
 function submitform()
{
    var fieldvalue = $("#QandA").val();
    $.post("createSession.php", $("#QandA").serialize() ,function(data){
        var QandAO = document.getElementById("QandA");
    $.post("upload_files.php", $("#QandA").serialize() ,function(data){
        var QandAO = document.getElementById("QandA");
        QandAO.submit();
    });  
    alert("Your Details for this Session has been submitted"); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:37:48.853

据我了解，您可以使用`header()`

### QandATable.php

```
<form action='upload.php' ...>
// you form details
</form> 
```

### 上传.php

```
ob_start();
 // do uploads 
header('Location:insertQuestion.php');
exit(); 
```

# sqlite - SQLite 3.7.11 100% 向后兼容 3.7.7 吗？

> ID：10044031
> 
> 赞同：1
> 
> 时间：2012-04-06T13:17:44.487
> 
> 标签：sqlite

愿意在任何地方使用 SQLite 3.7.11 而不是 3.7.7 并且没有为此找到最新的 PPA，我刚刚用更新`/usr/bin/sqlite3`的文件替换了我的 XUbuntu 11.10 系统中的文件。所以我很好奇：3.7.7 和 3.7.11 之间是否存在任何不兼容问题，会导致期望安装 3.7.7 的应用程序出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:40:53.057

如果您指的是数据库文件，那么没有任何不兼容性。此处列出了所有此类不兼容性：

[http://www.sqlite.org/formatchng.html](http://www.sqlite.org/formatchng.html)

# html - Swiffy，Flash to HTML5 可以在本地工作，但不能在服务器上工作

> ID：10044045
> 
> 赞同：0
> 
> 时间：2012-04-06T13:18:29.403
> 
> 标签：html, flash, google-swiffy

我已经尝试过无数次尝试使用 Swiffy 将 Flash 文件转换为 HTML5 ——它们都在本地运行的浏览器中运行良好，但是当我将导出的 HTML 文件放在服务器上时（我尝试了两个单独的文件，以防万一这是一些服务器配置）它们没有运行，它给出了一个空白的白色屏幕。

我尝试将文件保存到 Flash 5 导出，并更改了设置，它们在本地工作，但放在服务器上时不能。我尝试用不同的动画转换几个 Flash 文件，我得到了相同的结果——它在本地工作，但在服务器上不工作。有没有人遇到过这个问题或知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:48:20.950

最常见的解释是您上传的文件中的链接不再指向正确的位置。使用浏览器的控制台查看是否标记了任何错误。如果失败，请查看所有上传的文件并手动检查。

PS 发个链接。

# php - PHP中的加载栏

> ID：10044046
> 
> 赞同：1
> 
> 时间：2012-04-06T13:18:34.370
> 
> 标签：php, javascript

这两天我一直在谷歌搜索，找不到我想要的。

我有使用 PHP 开发的 SMSmobile 工具，它允许客户端发送批量 SMS，当我的客户按下`Send`按钮时，浏览器将继续加载，直到 SMS 发送给他的所有联系人（可能是 100000 个联系人或更多），所以需要从 2-5 分钟。同时，如果客户端按下浏览器`Refresh`按钮或同一页面上的任何其他按钮，它将破坏发送过程。

我需要显示一个弹出进度条，以防止用户在`Sending`流程结束之前执行任何操作。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:23:36.923

使用某种锁，甚至是文件锁。然后使用 ajax 每 X 秒轮询一次以查看作业是否完成。

```
function send() {
   if ( file_exists('/tmp/' . $session_key . '.lck' ) ) return;
   touch ( '/tmp/' . $session_key . '.lck' );
   # do the actual job
   # ...
   unlink( '/tmp/' . $session_key . '.lck' );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:29:21.587

我的解决方案将是一个后台运行脚本（cron 作业），它只是站在那里读取一种队列列表（SQL 表）并继续它看到的所有新条目。

也许是一个小的客户端脚本，它调用后面的东西，只计算行数并将其返回到前端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:23:45.893

试试这个：

```
function checkRefresh()
{
if( document.refreshForm.visited.value == "" )
{

    document.refreshForm.visited.value = "1";

}
else
{
document.write ('
$(function2() {
    // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
    $( "#dialog:ui-dialog" ).dialog( "destroy" );

    $( "#dialog-modal" ).dialog({
        height: 140,
        modal: true
    });
});
$(function() {
    $( "#progressbar" ).progressbar({
        value: 59
    });
});
')
}
} 
```

确保你有 jQuery！

标记：

```
<div class="demo">
<div id="dialog-modal" title="Basic modal dialog">
<div id="progressbar"></div>
</div>
</div> 
```

然后用这个替换你的身体标签：

```
<body onLoad="JavaScript:checkRefresh();"> 
```

并将其添加到您的 HTML 中：

```
<form name="refreshForm">
<input type="hidden" name="visited" value="" />
</form> 
```

无论如何，这会检测到重新加载并执行加载栏，这将阻止它们重新加载（希望如此）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:24:55.220

如果您打算在页面中发生这种情况，我建议将[模态对话框](http://jqueryui.com/demos/dialog/#modal)与[动画进度条](http://jqueryui.com/demos/progressbar/#animated)结合起来。

您甚至不必对进度条进行任何计算，只需将其设置为 100%，使其看起来像在滚动，并添加一些文本，例如“正在处理您的消息”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T13:29:45.627

`loading bar`你的问题不仅仅是`lot of things are wrong with your application architecture`

问题 ？ `Even if the person does not click refresh and there is a connection issue what happens`

**快速解决方案**

采取`SMS information`

存放在`Database`

发送以后使用`cron JOB`

**更好的解决方案**

采用`Messaging Queue`

您不必在用户手机上显示加载栏....`Message Sent`会是更好的选择

谢谢

:)

# linux-kernel - 内核模块中的 Netfilter 导致我的系统崩溃

> ID：10044050
> 
> 赞同：1
> 
> 时间：2012-04-06T13:19:05.703
> 
> 标签：linux-kernel, kernel-module, netfilter

我已经编写了这个内核模块，每次加载它时，它都会使整个系统崩溃（甚至我的键盘 LED 开始闪烁）

这是我正在做的代码：

```
/* 
    Coder: Adel *. ******
    Creation Date: April/5th/2012
    Last Modification Date: April/6th/2012
    Purpose: A module to test capturing traffic and just letting it go after knowing if it's an ICMP traffic or not
    Notes: This modules has always been crashing the kernel I am running it on(it shouldn't), my kernel is 2.6.32-33 (Note by Adel)
 */
#include <linux/module.h>       /* Needed by all modules */
#include <linux/kernel.h>       /* Needed for KERN_INFO */
#include <linux/init.h>         /* Needed for the macros */

#include <linux/netfilter.h>
#include <linux/netfilter_ipv4.h>

#include <linux/skbuff.h>       /* For the sk_buff struct, which is the struct that contains EVERYTHING in a network packet */
#include <linux/ip.h>                  /* For IP header */
#include <linux/icmp.h>            /* For ICMP Header */

#include <linux/in.h> /* For the IPPROTO_ICMP enum */ 

/* This is the structure we shall use to register our function */
static struct nf_hook_ops nfho;

/* This is the hook function itself */
unsigned int hook_func(unsigned int hooknum,
                       struct sk_buff **skb,
                       const struct net_device *in,
                       const struct net_device *out,
                       int (*okfn)(struct sk_buff *))
{
    struct sk_buff *sb = *skb;
    struct iphdr* iph;
    struct icmphdr *icmph;  
    iph = ip_hdr(sb);
    if(sb == NULL)
        return NF_ACCEPT;
    if(iph != NULL){
        printk(KERN_DEBUG"IP header is not null\n");
        if(iph->protocol == IPPROTO_ICMP){
            icmph = icmp_hdr(sb);
            if(icmph != NULL){
                printk(KERN_DEBUG"ICMP header is not null\n");
                return NF_ACCEPT;
            }/* If ICMP not null */
            return NF_ACCEPT;
        }/* if IPPROTO_ICMP */
        return NF_ACCEPT;
    }
    return NF_DROP;/* The packet is NULL */
}

static int __init hello_start(void)
{
    printk(KERN_INFO "Loading Test module...\n");
    printk(KERN_ALERT "Hello world\n");
    /* Fill in our hook structure */
        nfho.hook = hook_func;         /* Handler function */
        nfho.hooknum  = NF_INET_POST_ROUTING; /* POST_ROUTING Traffic before it hits the wire */
        nfho.pf       = PF_INET;
        nfho.priority = NF_IP_PRI_FIRST;   /* Make our function first */

        nf_register_hook(&nfho);
    return 0;
}

static void __exit hello_end(void)
{
    nf_unregister_hook(&nfho);
    printk(KERN_ALERT "Goodbye Mr.\n");
}

module_init(hello_start);
module_exit(hello_end); 
```

如您所见，我在流量进入 NIC 之前捕获流量（对吗？），检查它是否是 ICMP 并打印，仅此而已。
这里可能有什么错误？

请注意，我在 Ubuntu 10.04 LTS 和内核 2.6.32-33 上运行此代码

这是我在崩溃发生时看到的内核日志文件的一部分

```
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350142] Modules linked in: myModule(P) hid_a4tech binfmt_misc rfcomm ppdev sco bridge stp bnep l2cap joydev fbcon tileblit font bitblit softcursor vga16fb vgastate snd_hda_codec_realtek pcmcia snd_hda_intel snd_hda_codec snd_hwdep snd_pcm_oss snd_mixer_oss snd_pcm snd_seq_dummy snd_seq_oss snd_seq_midi arc4 snd_rawmidi snd_seq_midi_event snd_seq radeon iwlagn snd_timer iwlcore ttm drm_kms_helper snd_seq_device tifm_7xx1 yenta_socket mac80211 led_class psmouse uvcvideo sony_laptop btusb bluetooth tifm_core rsrc_nonstatic videodev v4l1_compat v4l2_compat_ioctl32 snd video output pcmcia_core serio_raw cfg80211 intel_agp drm i2c_algo_bit soundcore snd_page_alloc lp parport usbhid hid ohci1394 ieee1394 r8169 mii [last unloaded: myModule]
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350193] Pid: 1545, comm: clock-applet Tainted: P   M  D    2.6.32-33-generic #70-Ubuntu VGN-CR31Z_R
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350196] RIP: 0010:[<ffffffffa045a00c>]  [<ffffffffa045a00c>] hook_func+0xc/0x38 [myModule]
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350200] RSP: 0018:ffff88012ab87a88  EFLAGS: 00010246
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350202] RAX: ffffffffa045a360 RBX: ffff88012ab87b10 RCX: ffff88012c5c0000
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350203] RDX: 0000000000000000 RSI: ffff880138c4bee8 RDI: 0000000000000003
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350205] RBP: ffff88012ab87a88 R08: ffffffff81491b20 R09: ffff88012ab87b10
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350207] R10: 0000000000000000 R11: 0000000000000003 R12: 0000000080000000
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350209] R13: ffffffff81831070 R14: ffff880138c4bee8 R15: 0000000000000003
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350212] FS:  00007f81d59b5800(0000) GS:ffff880028300000(0000) knlGS:0000000000000000
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350214] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350216] CR2: 00000000000000c0 CR3: 000000012c25f000 CR4: 00000000000006e0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350218] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350220] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350222] Process clock-applet (pid: 1545, threadinfo ffff88012ab86000, task ffff88012c4a0000)
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350226]  ffff88012ab87ad8 ffffffff81486f1c ffff88012c5c0000 0000000000000000
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350229] <0> ffff88012ab87ac8 ffffffff81491b20 0000000000000003 ffff880138c4bee8
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350233] <0> 0000000000000000 ffff88012c5c0000 ffff88012ab87b48 ffffffff81486fd4
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350243]  [<ffffffff81486f1c>] nf_iterate+0x6c/0xb0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350247]  [<ffffffff81491b20>] ? dst_output+0x0/0x20
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350250]  [<ffffffff81486fd4>] nf_hook_slow+0x74/0x100
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350253]  [<ffffffff81491b20>] ? dst_output+0x0/0x20
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350256]  [<ffffffff81493c3f>] __ip_local_out+0x9f/0xb0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350258]  [<ffffffff81493c66>] ip_local_out+0x16/0x30
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350261]  [<ffffffff814944a0>] ip_queue_xmit+0x190/0x410
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350266]  [<ffffffff8105ccc2>] ? default_wake_function+0x12/0x20
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350269]  [<ffffffff8105ccb0>] ? default_wake_function+0x0/0x20
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350271]  [<ffffffff8105cb2b>] ? try_to_wake_up+0x2fb/0x480
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350276]  [<ffffffff815418fe>] ? _spin_lock+0xe/0x20
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350280]  [<ffffffff814a8fb1>] tcp_transmit_skb+0x3f1/0x790
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350283]  [<ffffffff814ab8a3>] tcp_write_xmit+0x1d3/0x4b0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350286]  [<ffffffff814abd10>] __tcp_push_pending_frames+0x30/0xa0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350289]  [<ffffffff814abdf2>] tcp_send_fin+0x72/0x1d0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350292]  [<ffffffff8149d276>] tcp_close+0x2e6/0x460
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350295]  [<ffffffff814bf517>] inet_release+0x47/0x70
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350301]  [<ffffffff8144ee29>] sock_release+0x29/0x90
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350304]  [<ffffffff8144eea7>] sock_close+0x17/0x30
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350310]  [<ffffffff81145b15>] __fput+0xf5/0x210
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350313]  [<ffffffff81145c55>] fput+0x25/0x30
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350316]  [<ffffffff81141d7d>] filp_close+0x5d/0x90
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350320]  [<ffffffff810685ef>] put_files_struct+0x7f/0xf0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350323]  [<ffffffff810686b4>] exit_files+0x54/0x70
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350326]  [<ffffffff8106ac1b>] do_exit+0x15b/0x390
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350329]  [<ffffffff8106aea5>] do_group_exit+0x55/0xd0
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350332]  [<ffffffff8106af37>] sys_exit_group+0x17/0x20
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350336]  [<ffffffff810121b2>] system_call_fastpath+0x16/0x1b
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350356]  RSP <ffff88012ab87a88>
Apr  5 23:21:27 DHS-CYB1022 kernel: [ 2754.350360] ---[ end trace ee59092f1ae9cbf0 ]---
Apr  5 23:21:37 DHS-CYB1022 kernel: Kernel logging (proc) stopped. 
```

编辑：请大家原谅我的无知并纠正我如果我提到了一些错误，我对此几乎完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:32:41.973

您似乎完全忽略了编译器发出的警告。一方面，您的函数签名与 2.6.32 的 NF 挂钩所需的不匹配。

# json - excel vba 到 CRUD drupal 节点

> ID：10044055
> 
> 赞同：0
> 
> 时间：2012-04-04T22:44:17.197
> 
> 标签：json, drupal, excel

我们需要定期将 Excel 报告数据迁移到 Drupal 节点中。我们研究了在 Drupal 中使用 slickgrid 复制一些 Excel 功能，但它还达不到标准。Excel 报告人们不想重复输入他们的数据，但他们的数据在这个 Drupal 站点中很重要。

他们有数百个 Excel 报告，并且每周更新一行。我们希望在行尾有一个按钮来触发将数据提交到 Drupal 的 VBA 宏，在 Drupal 中根据提交的信息创建一个新节点。（是的，我们对 Drupal 和 VBA 都有经验；所有用户和站点都在我们的防火墙后面。）我们需要返回新节点的 nid 或 URL，以便我们可以在 Excel 中直接创建指向该节点的链接

站点是 D6，使用 Services 3.x 模块。我尝试了 REST 服务器模块，但我们无法在没有会话身份验证的情况下检索数据，而 Excel 无法做到这一点。（除非你可以？）我还注意到它通过浏览器 url 返回的“数据”是 14 或 20 个节点的信息，而不是请求的一个 nid（例如： http: [//mysite.com/services/rest/report/node /30161](http://mysite.com/services/rest/report/node/30161) )

当我尝试从 VBA 创建一个像这样的简单节点时：

```
Dim MyURL as String
MyURL = "http://mysite.com/services/rest/report/node?node[type]=test&node[title]=testing123&node[field_test_one][0][value]=123"
Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")

With objHTTP
    .Open "GET", MyURL, False
    .setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
    .send (MyURL)
End With 
```

我得到 HTTP 状态：未经授权：用户 0“匿名”的访问被拒绝和 HTTP 响应：null

我搜索的所有内容都有 php 或 java 中的示例，VBA 中没有。还尝试切换到使用 XMLRPC 服务器，但这更加令人困惑。我们想要 json（使用 application/json，在 REST 服务器设置中相应地设置格式化程序），但会使用任何有效的东西。

想法？提前致谢！

编辑：我在 .Open 中将 POST 更改为 GET，并尝试了不同的请求标头（json、xml 等）。我仍然返回了 14 个节点的基本节点数据，而不是我请求的单个节点。我想这证明我的 REST 服务器正在我指定的 URL 上工作，但我仍然不知道如何从 Excel 将节点发布到 Drupal。

另一个编辑： GET 和 DELETE 正在工作，而不是 POST 或 PUT ！？！作为浏览器中的匿名用户，我可以像往常一样将“http://mysite.com/node/add/test”粘贴到地址栏中，它只提示我输入标题，我可以毫无问题地匿名创建它。通过 Excel 提交会导致“未经授权：用户 0“匿名”的访问被拒绝”错误。所以我可以查看和删除但不能创建？我仔细检查了我的烫发设置是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:43:50.363

我一直发现错误消息实际上意味着他们所说的。

```
HTTP Status: Unauthorized: Access denied for user 0 "anonymous" 
```

看起来您的 Web 服务器正在期待某种 VBA 脚本没有/无法提供的登录和身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T12:10:13.710

不使用 CRUD，您可以直接将数据推送到数据库，绕过任何 REST 交互吗？我在电子表格和 Drupal 站点之间移动了大量数据，并且有一些 VBA 模块可以帮助我轻松地与 Drupal 数据库模式进行交互。这些适用于 Drupal 8。

*   [VBA-SQL 库](https://github.com/Beakerboy/VBA-SQL-Library)
*   [VBA-Drupal-库](https://github.com/Beakerboy/VBA-Drupal-Library)

第一个库允许用户创建 SQL 查询而无需进行一堆字符串连接，更符合 Drupal SQL 对象。第二个允许人们像 Drupal 实体一样配置 VBA 对象，并在 Drupal 的数据库中插入和查找这些实体。

# ruby-on-rails - country_select gem 不适用于rails 3中的fields_for嵌套表单

> ID：10044061
> 
> 赞同：1
> 
> 时间：2012-04-06T13:20:04.097
> 
> 标签：ruby-on-rails, forms

有谁知道如何让 country_select 与 fields_for 一起工作？

[https://github.com/stefanpenner/country_select](https://github.com/stefanpenner/country_select)

它似乎不接受模型前缀，嵌套表单中的其他表单字段助手也是如此。

如果没有办法让它工作，是否有另一种方法可以快速/轻松地在我的表单中获取国家选择器字段？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:59:13.250

我希望这段代码有效：

```
<%= f.country_select :country,  :style=>'width:100px;'%> 
```

队友的欢呼声 ！

# magento - SQLSTATE [23000]：违反完整性约束：1062 键 'IDX_STOCK_PRODUCT' 的重复条目 '1922-1'

> ID：10044062
> 
> 赞同：17
> 
> 时间：2012-04-06T13:20:23.630
> 
> 标签：magento, constraints, mysql-error-1062, duplicates

在创建产品时，在检索一段时间后的最后一步，Magento 给出以下错误：

> SQLSTATE [23000]：违反完整性约束：1062 键 'IDX_STOCK_PRODUCT' 的重复条目 '1922-1'

我正在做的是，通过捕获产品 ID，我将它的条目放入自定义表中。我已从外部连接到 Magento 数据库。

令人惊讶的是，数据被插入到 Magento 的基表和自定义表中，但为什么它在产品保存后给我这个错误......？

我清除了缓存、浏览器 cookie。同时删除 /var/cache、/var/session。仍然给出错误。有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T13:39:48.257

该消息意味着您正在使用属于 IDX_STOCK_PRODUCT 的相同列组合进行另一次插入，这些列组合被定义为 UNIQUE。如果是这样，它不允许输入相同的组合（它似乎由两个字段组成）两次。

如果您要插入记录，请确保您选择的是全新的记录 ID，或者记录 ID 和另一列的组合是唯一的。

如果没有详细的表结构和您的代码，我们几乎无法猜测出了什么问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T13:16:11.633

很多时候，当您在自定义模块的观察者中更新产品时会导致此错误，如下所示。

```
class [NAMESPACE]_[MODULE NAME]_Model_Observer
{
    /**
     * Flag to stop observer executing more than once
     *
     * @var static bool
     */
    static protected $_singletonFlag = false;

    public function saveProductData(Varien_Event_Observer $observer)
    {
        if (!self::$_singletonFlag) {
            self::$_singletonFlag = true;

            $product = $observer->getEvent()->getProduct();
             //do stuff to the $product object
            // $product->save();  // commenting out this line prevents the error
            $product->getResource()->save($product);
    }
} 
```

因此，每当您在模块的观察者中更新某些属性后保存产品时，`$product->getResource()->save($product)`而不是`$product->save()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T16:01:33.797

您可能忘记了自动增加 id 字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-19T02:43:11.253

我也遇到了这个问题。我发现将表存储引擎从 MyISAM 更改为 Innodb 后，问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-17T07:45:31.713

您的列值已经在数据库表中，这意味着您的表列是唯一的，您应该更改值并重试

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-19T14:35:35.440

尝试将 FK 更改为 INDEX 而不是 UNIQUE。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2016-06-01T14:22:54.530

我刚刚添加了一个 @ 符号，它就开始工作了。像这样：`@$product->save();`

# regex - 正则表达式删除 html 标记

> ID：10044063
> 
> 赞同：0
> 
> 时间：2012-04-06T13:20:32.677
> 
> 标签：regex, wordpress

我需要删除标签内出现的一些 html 标记`img`。这个字符串出现，有不同的数字

`id="BLOGGER_PHOTO_ID_5324252539155647458"`

在数百个 WordPress 帖子中，以及这个正则表达式（在插件 Search RegEx [http://urbangiraffe.com/plugins/search-regex/](http://urbangiraffe.com/plugins/search-regex/)中使用时）

`id="BLOGGER_PHOTO_ID_"(.*?)""`

抛出*“无效的正则表达式：分隔符不能是字母数字或反斜杠”*错误。

这`(.*?)`是 RegEx 插件用来匹配所有字符的函数。即，这

`<a href="(.*?)">`插件中使用的匹配`<`和之间的 href 链接中的所有字符`>`

我需要什么来逃避？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:23:38.443

那是行，从变量 $value 中删除诸如 id="BLOGGER_PHOTO_ID_5324252539155647458" 之类的行

```
$pattern = '#id="BLOGGER_PHOTO_ID_[0-9]+"#'
$value = preg_replace($pattern, '', $value) 
```

并且每个正则表达式都必须带有分隔符 -[这里还有更多](http://php.net/manual/en/regexp.reference.delimiters.php)

# php - 使用同一表中其他列的值更新 MySQL 列

> ID：10044064
> 
> 赞同：0
> 
> 时间：2012-04-06T13:20:43.287
> 
> 标签：php, mysql, sql

我刚刚创建了一个新`GEOMETRY`列`p`，需要`p`根据 cols`lat`和`lng`.

**问题：**使用下面的查询更新单个列效果很好，因为我手动输入了`lat`and`lng`值。但是，当我希望 MySQL 更新`p`表中所有行的 col 时，我使用的查询不会将任何值设置为 col `p`。我认为它与子查询（？）有关，但我不确定如何使其正常工作。谢谢！

**有效的查询**

```
UPDATE listings 
SET p = GeomFromText('POINT(39.948177 -75.174324)') 
WHERE listing_id = '585221'; 
```

**不设置值的查询**

*添加了一个`WHERE`子句，因此我在测试时不会破坏整个表。我实际上想对`UPDATE`表中的所有行进行查询*

```
UPDATE listings 
SET p = GeomFromText('POINT(lat lng)') 
WHERE listing_id = '585221'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:29:25.047

那么这个呢（删除 geomfromtext 函数）

更新列表 SET p = POINT(lat, lng) WHERE listing_id = '585221';

或者你可以这样

更新列表 SET p = GeomFromText(CONCAT('POINT(',lat,' ',lng,')'));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:37:54.830

您必须连接您的值以形成适当的参数`GeomFromText`：

```
UPDATE listings 
SET p = GeomFromText('POINT(' || lat || ' ' || lng || ')') 
WHERE listing_id = '585221'; 
```

管道运算符 ( `||`) 用于连接字符串。但更好的解决方案是`Point`直接使用该函数：

```
UPDATE listings 
SET p = Point(lat, lng) 
WHERE listing_id = '585221'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T22:11:32.137

对于 SQLite / Spatialite 它是

```
UPDATE mytable SET location = GeomFromText('POINT('||latitude||" "||longitude||')'); 
```

# uitableview - UITableViewCell 中的 UITextField 抛出 -[UITextInputTraits length]：无法识别的选择器发送到实例

> ID：10044065
> 
> 赞同：1
> 
> 时间：2012-04-06T13:20:43.830
> 
> 标签：uitableview

我创建了一个 UITableViewController 和相应的 XIB 来生成一个表单。

在 XIB 中，我有一个 TableView 和一个 UITableViewCell。UITableViewCell 内部是一个 UILabel 和 UITextField。

FileOwner 设置为 DiaryEntryViewController (UITableViewController)。

然后我将它推到导航堆栈上：

```
 DiaryEntryViewController *entry = [[DiaryEntryViewController alloc] initWithNibName:@"DiaryEntry" bundle:nil];

    [self.navigationController pushViewController:entry animated:YES];
    [entry release]; 
```

DiaryViewEntryController.h 有：

```
 IBOutlet UITableViewCell *cell0;
  IBOutlet UITextField* title;

  @property(nonatomic, retain)IBOutlet UITableViewCell *cell0;
  @property(nonatomic, retain)IBOutlet UITextField *title; 
```

@synthesize 设置在 .m 中。

在 XIB 中，我将 UITableViewCell 连接到“cell0”插座，将 UITextField 连接到“title”插座。当我运行代码时，它会中断：

```
 [self.navigationController pushViewController:entry animated:YES]; 
```

我得到的错误是：

```
 -[UITextInputTraits length]: unrecognized selector sent to instance 
```

如果我断开 UITextField（标题）插座，则显示视图。只有当 UITextField 连接到它轰炸的插座时。

我的代码中没有“长度”。它在 ViewDidLoad 完成后立即死亡。

对此有什么想法吗？我尝试创建一个新的 UITextField 没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T04:23:45.387

我刚刚遇到了你上面描述的同样的问题。该问题似乎与使用标题作为 UITTextField 的名称有关。我注意到我们的领域都被称为标题，改变了我的，它工作。奇怪的问题，嗯？

干杯，

-罗尔夫。

# javascript - jQuery datePicker 不弹出

> ID：10044069
> 
> 赞同：0
> 
> 时间：2012-04-06T13:20:56.483
> 
> 标签：javascript, jquery, datepicker

单击输入字段后，不会弹出日期选择器。

```
$(document).ready(function() {
         var sds = document.getElementsByClassName("f_sd");
         for(var i = 0; i < sds.length; i ++){
                sds[i].id = i+":sd";
                 var id = "#"+i+":sd";
                 $(id).datepicker();
         }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:29:03.140

你这样做很奇怪，试试这个代码

```
$(function(){
  $('.f_sd').datepicker();
}) 
```

[http://jsfiddle.net/kaVLH/](http://jsfiddle.net/kaVLH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T13:31:45.950

问题就在这里

```
sds[i].id = i+":sd"; 
```

控件 ID 不应包含`:`

`:`没有控制ID的JSFiddle [http://jsfiddle.net/QsgNF/1/](http://jsfiddle.net/QsgNF/1/)

JSFiddle with `:`in control id [http://jsfiddle.net/QsgNF/2/](http://jsfiddle.net/QsgNF/2/)

您可以看到第一个小提琴没有`:`提供所需的输出，而第二个小提琴失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:23:21.007

可能 datepicker 即将到来，但由于 Z-index，您看不到，

我有同样的问题，所以我增加了 datepicker 组件的 z-index，

希望这会帮助你。

# android - Android 上的搜索、线程和 MySQL

> ID：10044071
> 
> 赞同：-2
> 
> 时间：2012-04-06T13:21:06.733
> 
> 标签：android, mysql, multithreading

我正在尝试从我的数据库中进行搜索，这里是它不断带来以下错误的代码。数据是关于 MySQL 的问题，它一直在崩溃，有人可以帮助我吗？这是我的代码。

```
public class Main extends MapActivity {
    /** Called when the activity is first created. */
    private Context ctx = this;
    private Context ctx2 = this;
    private ProgressDialog pd, pd2 = null;
    private Object data, data2 = null;private String url;private MapView myMap;
    private Connector http;

    static String searchy;
    String selection;
    // MapView mapView;
    List<Overlay> mapOverlays;
    Drawable drawable;
    Drawable drawable2;
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay;
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myMap = (MapView) findViewById(R.id.mapview);
        myMap.setBuiltInZoomControls(true);
        // addmarkers();
        // EditText searchInput = (EditText) findViewById(R.id.txtSearch);
        // final String searchitem = searchInput.getText().toString().trim();

        Button search = (Button) findViewById(R.id.searchBtn);
        search.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Log.i("MyApp", "Background thread starting");

                // pd = ProgressDialog.show(Main.this, "Working..",
                // "Downloading Data...", true, false);

                addmarkers();
            }
        });

    } 
```

//将搜索到的标记添加到地图

```
 public void addmarkers() {
        url = "http://10.0.2.2/therm/searchy.php";
        http = new Connector(ctx);
        http.connect(url, myMap);  } 
```

//添加覆盖和从数据库中获取的类连接器

```
 public class Connector {
            private Drawable marker;
        private GeoPoint point;
        private List<Overlay> mapOverlays;

        public Connector(Context ctx1) {
            ctx = ctx1;
            marker = ctx.getResources().getDrawable(R.drawable.default_marker);
            itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(
                    marker, myMap);
        }

        public void connect(String url, MapView myMap) {
            // TODO Auto-generated method stub
            InputStream is = null;
            // mapOverlays = myMap.getOverlays();
            // mapOverlays.clear();
            String result = null;
            int ct_id;
            String ct_name = null;
            // String[] ct_namey = null;
            String ct_add = null;
            String ct_lat;
            String ct_long;
            String imageURL;
            // the year data to send
            EditText txt_username = (EditText) findViewById(R.id.txtSearch);
            String woi = txt_username.getText().toString();
            Toast.makeText(getBaseContext(), woi, Toast.LENGTH_SHORT).show();

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("searchy", woi));
            // http post
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }

            // convert response to string
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                    Log.v("log_tag", "Line reads: " + line);

                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            // parse json data
            try {
                JSONArray jArray = new JSONArray(result);
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    Log.i("log_tag","address: " + json_data.getString("address")

                    );
                    if (searchy.equals(json_data.getString("address"))) {
                        ct_id = json_data.getInt("id");
                        ct_name = json_data.getString("name");
                        // ct_namey[i] = json_data.getString("name");
                        ct_add = json_data.getString("address");
                        ct_lat = json_data.getString("lat");
                        ct_long = json_data.getString("lng");
                        imageURL = json_data.getString("imageUrl");

                        Double lon = (Double.parseDouble(ct_long));
                        Double lat = (Double.parseDouble(ct_lat));

                        point = new GeoPoint((int) (lat * 1E6),
                                (int) (lon * 1E6));

                        CustomOverlayItem overlayItem = new CustomOverlayItem(
                                point, ct_name, ct_add, imageURL);
                        itemizedOverlay.addOverlay(overlayItem);
                        mapOverlays.add(itemizedOverlay);
                        myMap.postInvalidate();

                    } else {
                        Toast.makeText(getBaseContext(),
                                "No such address is found", Toast.LENGTH_LONG)
                                .show();
                    }
                }

            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
            return;
        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

// .php 文件

```
 <?php
mysql_connect("localhost","root","");
mysql_select_db("hospitals");
$q=mysql_query("SELECT * FROM hosi WHERE address like '%".$_REQUEST['searchy']."%'");
    while($e=mysql_fetch_assoc($q))
        $output[]=$e;
print(json_encode($output));
mysql_close();?> 
```

这是我得到的错误：

```
//error04-06 16:04:07.162: V/log_tag(10708): Line reads: [{"id":"1","name":"The Nairobi Hospital","address":"Upperhill","consult":"2000","phone":"+254202846000","desc":"The.... "}]
04-06 16:04:07.162: V/log_tag(10708): Line reads: 
04-06 16:04:07.502: I/log_tag(10708): address: Upperhill
04-06 16:04:07.552: W/dalvikvm(10708): threadid=1: thread exiting with uncaught exception (group=0x400287f0)
04-06 16:04:07.572: E/AndroidRuntime(10708): FATAL EXCEPTION: main
04-06 16:04:07.572: E/AndroidRuntime(10708): java.lang.NullPointerException
04-06 16:04:07.572: E/AndroidRuntime(10708): at   com.realestatefinder.plotjson.Main$Connector.connect(Main.java:276)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at com.realestatefinder.plotjson.Main$1.onClick(Main.java:86)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at android.view.View.performClick(View.java:2408)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at android.view.View$PerformClick.run(View.java:8816)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at android.os.Handler.handleCallback(Handler.java:587)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at android.os.Looper.loop(Looper.java:123)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at java.lang.reflect.Method.invokeNative(Native Method)
04-06 16:04:07.572: E/AndroidRuntime(10708):    at java.lang.reflect.Method.invoke(Method.java:521) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:48:53.473

Looks like you are getting a NPE because you've failed to initialize your `mapOverlays` collection. You commented out the initialization:

```
 // mapOverlays = myMap.getOverlays();
 // mapOverlays.clear(); 
```

Your error shows:

```
java.lang.NullPointerException
at   com.realestatefinder.plotjson.Main$Connector.connect(Main.java:276) 
```

and you said that line 276 is:

```
 mapOverlays.add(itemizedOverlay); 
```

I think you learn how to use the Android debugger so you can trace this sort of code in the future. Best of luck.

# php - 表单值，我不想重置它们

> ID：10044076
> 
> 赞同：1
> 
> 时间：2012-04-06T13:21:37.823
> 
> 标签：php, javascript, forms

我正在准备一个包含多个表单的网页，每个表单都有通常的输入文本和调用 php 脚本的提交按钮。我不太喜欢的是，每当我按下其中一个提交按钮时，其他输入文本都会被重置。我想知道是否有一种方法可以将输入文本的值保持为我输入的值，即使我按下提交按钮也是如此。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:24:40.070

让您的表单使用 Ajax，即使提交的表单也不会重置，这样您就可以完全控制要重置的内容和保留的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:25:24.140

两种方式：
-*服务器端：*使用`$_SESSION`
-*客户端：*使用`sysphus.js`

**参考 ：**[`Auto-Save User’s Input In Your Forms With HTML5 and Sisyphus.js`](http://coding.smashingmagazine.com/2011/12/05/sisyphus-js-client-side-drafts-and-more/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:25:26.993

最简单的解决方案是您可以将数据存储到 $_SESSION ... 中，例如：

$_SESSION['forms_data']['firts_form_name'] = array('field1' => $_REQUEST['field1'], 'field2' => $_REQUEST['field2'] .... ); 和其他人相同的原则。

然后您可以再次从 $_SESSION arr 中检索它们，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T13:26:00.960

使用 JQuery 并通过 ajax 提交怎么样？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T13:39:47.677

试试这样。。

```
<input type='text' value='<?php echo (isset($_REQUEST['user-name']) ) ? $_REQUEST['user-name'] :'' )?>' name='user-name'/> 
```

在提交您的表格时..您可以将您的值重新归档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T13:03:34.230

`function clear_form_elements() { document.getElementById('your form id').reset(); }`

# android - 如何在android服务中显示surfaceview？

> ID：10044077
> 
> 赞同：2
> 
> 时间：2012-04-06T13:21:56.393
> 
> 标签：android, user-interface

我想在 WallpaperService 中显示视频。

我怀疑在引擎中创建的 SurfaceHolder 没有 SurfaceView，我需要显示视频。

我要新建一个SurfaceView“mSurfaceView”，比如

```
mSurfaceView= (SurfaceView) findViewById(R.id.surface);
mHolder1 = mSurfaceView.getHolder(); 
```

但是Android 的Service 没有findViewById 方法。另外，我怎样才能让wallpaperService显示mHolder1？

# jsp - 显示消息等待....作为后台处理发生

> ID：10044079
> 
> 赞同：1
> 
> 时间：2012-04-06T13:22:02.210
> 
> 标签：jsp

我想将messsge显示为“请稍候......”，直到我的java代码完成一些处理。

page1.jsp - 我的表单，其中有文本框和提交按钮。当单击提交按钮时，我正在提交表单并调用 page2.jsp

在 page2.jsp 中，我从 page1.jsp 请求参数并传递给我的 java 方法，该方法返回我的用户 ID。

```
userid = myclass.mymethod(); 
if(userid!=null){ 
out.println("Record is in process.Please wait"); 
} 
response.sendredirect("page3.jsp?"+userid=userId); 
```

在 page3.jsp 中，我正在对同时在 page2.jsp 中获得的用户 ID 进行处理。

```
someid =request.getparameter(userid); 
process(someid ); 
```

但是在所有处理完成后会显示“等待”消息。我想在获得 userId 后立即显示它。并继续对该用户 ID 进行后台处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:04:01.237

你可以使用 javascript 做很多事情。这是一个想法。

```
<html>
<body>
<div id="wait">
Some text here is necessary here for the IE browser to start displaying. 
Otherwise it will wait until it receives enough of a response to begin displaying         anything.
I am not sure how much padding is necessary. This works in IE 8.
<%
  out.print("<little.gif' />");
  out.flush();
  for(int x = 0; x < 3; x++){
                         out.print("<br/>Processing!");
                         out.flush();
                         Thread.sleep(3000);  //mock processing
  }
%>
<br/></div>
<script>
  alert("Finished processing.");
  document.getElementById("wait").innerHTML = "Here are the results...";
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:34:00.060

我在 IE8 和 Chrome 18 中进行了测试。如果您的服务器有限制，那么您可能会遇到问题。例如，它不适用于 Google App Engine。

```
<html>
<body>
Some text here is necessary here for the IE browser to start displaying. 
Otherwise it will wait until it receives enough of a response to begin displaying      anything.
I am not sure how much padding is necessary. This works in IE 8.
<%
  out.print("<loading.gif' />");
  out.flush();
  //mock processing
  for(int x = 0; x < 3; x++){
                         out.print("<br/>Processing!");
                         out.flush();
                         Thread.sleep(3000);  
  }
%>
<br/>Finished processing. Here are the results...
</body>
</html> 
```

# php - MongoDB 查询 - 这可能吗？

> ID：10044090
> 
> 赞同：0
> 
> 时间：2012-04-06T13:23:17.980
> 
> 标签：php, mongodb

这可以在 MongoDB 中进行这样的查询吗？

```
SELECT  `pro` , COUNT( * ) , SUM( `age` ) 
FROM  `k_pin` 
GROUP BY  `pro 
```

如果是，如何？PHP示例将是完美的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:43:15.413

mongoDB 调用如下：

```
db.k_pin.aggregate([ 
 { $group: {_id:"$pro", count:{$sum:1}, sum_age:{$sum:"$age"}} }
]) 
```

都可以在这里找到：[http ://www.mongodb.org/display/DOCS/SQL+to+Aggregation+Framework+Mapping+Chart](http://www.mongodb.org/display/DOCS/SQL+to+Aggregation+Framework+Mapping+Chart)

我将把 php 留给你，因为那是容易的部分。

# image - 将 PDF 杂志转换为电视可见的双图像格式

> ID：10044094
> 
> 赞同：0
> 
> 时间：2012-04-06T13:23:38.490
> 
> 标签：image, bash, pdf, imagemagick

如何将 PDF 格式的杂志转换为可以在电视上查看？我的电视不能显示 pdf，只能显示图像，而且由于它是宽屏显示器，因此一次显示双页是有意义的。到目前为止，我使用了一个解决方案，这意味着以下步骤：

1.使用pdfnup（pdfjam包的一部分）将杂志转换为双页格式（实际上是一个单页为原文件双页的pdf文件）

```
pdfnup inputfile.pdf --pages '{},1-' --outfile dualpagefile.pdf 
```

由于参数`--pages '{},1-'`的原因，inputfile.pdf 的第一页（杂志封面）与空白页相邻。

2.、将双页版文档转换成电视上可以看到的图片

```
convert -density 150 dualpagefile.pdf imagefiles_%03d.jpg 
```

此解决方案的问题是，dualpagefile.pdf 中的页面大小与原始 inputfile.pdf 中的页面大小完全相同，导致 dualpagefile.pdf 页面的顶部和底部出现白边。

现在我正在寻找一个更简单，也许更快的解决方案，没有白色条纹。

我正在尝试首先将 inputfile.pdf 转换为图像文件，然后将它们与双页图像相邻，但我不知道如何将`convert --adjoin`命令用于一系列图像，第一页保持原样或相邻有一个空白页。

这个问题有什么优雅的解决方案：将pdf转换为一系列双页图像，带有单独的封面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:21:22.693

我不是 bash 最擅长的，但这里有一些你可以尝试的东西。这要求所有文件都从 book-0.jpg、book-1.jpg 一直到 book-n.jpg 进行编号。（这可以通过 来实现`convert <filename>.pdf book.jpg`）

```
#!/bin/bash
one=1
num_files=$(ls *.jpg | wc -l)
for ((i=0; i<=$(($num_files-$one)); i+=2))
do
j=$(($i+$one)) 
montage -adjoin  book-$i.jpg book-$j.jpg Page_$i.jpg
done
echo "Process Finished" 
```

我很确定有更好的方法，但这种方法也有效。

您可以编辑该`montage -adjoin ..`行并根据需要添加密度、质量设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T21:23:52.493

基于Nunoxic的思路，最终代码：

```
#!/bin/bash
# usage: pdf2tv inputfile.pdf
FILENAME=$1                         # the inputfile
FILENAME_NOEXT=${FILENAME/\/*\//};      # the inputfile without extension
FILENAME_NOEXT=${FILENAME_NOEXT/.*/};   # the inputfile without extension and additional points in the name
FILENAME_NOWSP=${FILENAME_NOEXT// /_}; # substitute spaces with underscores
TVRESOL='1920x1080'                    # TV resolution

mkdir $FILENAME_NOWSP                  # make a directory for the generated images
cd $FILENAME_NOWSP

convert -density 150 -resize ${TVRESOL} "../${FILENAME}" ${FILENAME_NOWSP}.jpg    # convert pdf's pages to jpg
num_files=$(ls ${FILENAME_NOWSP}*.jpg | wc -l)          # number of jpgs    
mv ${FILENAME_NOWSP}-0.jpg Page_001.jpg                    # the cover page
counter=2
for ((i=1; i<=$(($num_files-1)); i+=2))
do
  j=$(($i+1)) 
  outfilename=Page_`printf %03d.jpg $counter`
  # appending 2 adjacent pages into a dual page image
  convert +append ${FILENAME_NOWSP}-$i.jpg ${FILENAME_NOWSP}-$j.jpg -resize '100%x100%' $outfilename
  rm ${FILENAME_NOWSP}-{$i,$j}.jpg  # removing the temporary single images
  ((counter+=1))
done
echo "Process Finished" 
```

# c# - 有通用的 Task.WaitAll 吗？

> ID：10044099
> 
> 赞同：70
> 
> 时间：2012-04-06T13:24:24.420
> 
> 标签：c#, generics, task-parallel-library, covariance

我开始了一些并行任务，如下所示：

```
var tasks =
    Enumerable.Range(1, 500)
    .Select(i => Task.Factory.StartNew<int>(ProduceSomeMagicIntValue))
    .ToArray(); 
```

然后加入他们

```
Task.WaitAll(tasks); 
```

在最后一行中，我在 下得到一个蓝色波浪标记`tasks`，并带有警告消息：

```
**从 Task[] 到 Task[] 的协变数组转换
可能导致写操作的运行时异常。**
```

**我明白为什么我会收到此消息，但有没有办法解决这个问题？（例如，像`Task.WaitAll()`? 的通用版本）**

 *** * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-06T13:30:54.500

Task.WaitAll 的通用方法意味着所有任务都必须返回相同的类型，这将非常有限。可以手动编写类似的内容（请参阅 Bas Brekelmans 的回答），但这不会允许 ContinueWith 或取消而无需大量工作。

如果您没有将数组用于其他任何事情，一个简单的解决方案是

```
 .ToArray<Task>(); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-06T14:20:46.293

我很确定即使有警告它也是一个安全的操作，但如果你真的想绕过它，比创建自己的实现更好的选择就是将你的`tasks`参数转换为它想要的类型：

```
Task.WaitAll(tasks.Cast<Task>().ToArray()) 
```

这对我来说消除了蓝色曲线，让我保持我的`tasks`变量通用，并且不会强迫我创建大量新的可怕代码，这些代码最终是不必要的。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-03-13T10:51:16.657

## 更好更简单的答案

实际上有一个类似的通用重载**：**

```
Task all = Task.WhenAll(tasks) 
```

这是不同的，它返回一个`Task`将在所有任务完成后完成的。所以你可以使用`await`它，或者`Wait()`，任何你想要的。

看签名：

> ### 重载
> 
> --------- 非通用过载 --------------
> 
> **`WhenAll(IEnumerable<Task>)`** 创建一个将`Task`在可枚举集合中的所有对象都完成时完成的任务。
> 
> **`WhenAll(Task[])`** 创建一个任务，该任务将 `Task`在数组中的所有对象都完成后完成。
> 
> ---------**通用过载**--------------
> 
> **`WhenAll<TResult>(IEnumerable<Task<TResult>>)`** 创建一个将`Task<TResult>`在可枚举集合中的所有对象都完成时完成的任务。
> 
> **`WhenAll<TResult>(Task<TResult>[])`** 创建一个任务，该任务将`Task<TResult>`在数组中的所有对象都完成后完成。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-06T13:36:03.543

您可以创建一个扩展方法来执行此操作。

我不知道 WaitAll 的确切实现，但我们可以假设它等待每个项目完成：

```
static class TaskExtensions
{
    public static void WaitAll<T>(this Task<T>[] tasks)
    {
        foreach (var item in tasks)
        {
            item.Wait();
        }
    }
} 
```

然后从您当前的代码中调用：

```
tasks.WaitAll(); 
```

**编辑**

实际的实现要复杂一些。我从这个答案中省略了代码，因为它相当长。

[http://pastebin.com/u30PmrdS](http://pastebin.com/u30PmrdS)

您可以对其进行修改以支持通用任务。**

# javascript - 将 HTML 附加到 Javascript Fireunit 测试

> ID：10044100
> 
> 赞同：4
> 
> 时间：2012-04-06T13:24:30.847
> 
> 标签：javascript, unit-testing

一段时间以来，我一直想将单元测试集成到我的 javascript 开发中，因为我已经习惯使用 firebug 进行调试和测试，所以 fireunit 自然是进行 JS 单元测试的明显选择。

我了解如何使用 fireunit，但我仍然对如何实际有效地使用它感到困惑。我主要担心的是无法测试任何实际操作 DOM 的函数，这让我们面对它，几乎是所有这些函数。

例如，我可能有一个看起来像这样的函数。

```
function() {
    var el = document.getElementById('el');
    if(el) {
        el.parentNode.removeChild(el); //Removes the child from the DOM
    }
} 
```

这是一个基本示例，但使用该函数需要与 DOM 交互。当包含该元素的 HTML 未加载时，我如何对此进行单元测试！？！

我对 jsTestDriver 不太熟悉，但据我了解，您可以使用注释将 HTML 附加到单元测试中（或者这就是代码的样子）。有没有办法用fireunit测试做这样的事情？或者我应该只是将我的 test.html 与来自各地的代码片段混为一谈，并希望它们不会发生冲突。最好定义一小段在函数开始时加载的 HTML，然后在测试函数完成时将其自身移除并移至下一个函数。

我有一些想法，例如使用 innerHTML 将片段加载和卸载到测试 DIV 中，但我所有的方法似乎都不干净，并且需要为每个测试函数编写大量样板文件。我想听听一些可能已经提出更有效解决方案的人的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:00:35.447

在实际执行测试之前，您可以执行以下操作：

```
var old = document.getElementById;
document.getElementById = function(foo) {
    console.log(foo);
    return {
        parentNode: {
            removeChild: function(bar) {
                console.log(bar);
            }
        }
    };
}; 
```

运行测试

```
document.getElementById("test"); // console output "test" 
```

重置原方法：

```
document.getElementById = old; 
```

我现在不能说这是否适用于跨浏览器。在我的 chrome 控制台中它现在正在工作，所以我想这对你有用。试试看 ：）

另一种没有模拟的更好方法是动态创建一个包含需要测试的 DOM 的元素：

```
var container = document.createElement("div");
container.innerHTML = 'your content <span id="el">foobar</span>';
document.body.appendChild(container); 
```

在没有任何模拟对象的情况下运行您的测试

事后检查

```
console.log(document.getElementById("el"), document.getElementById("el").parentNode); 
```

当然要清理 :)

```
container.parentNode.removeChild(container); 
```

我不喜欢 Fireunit，所以我不知道那里模板的异步加载可能性。

# iphone - 在 ipad 通用应用程序中滚动查看内容大小？

> ID：10044101
> 
> 赞同：0
> 
> 时间：2012-04-06T13:24:36.543
> 
> 标签：iphone, objective-c, ipad, ios-universal-app

如果内容隐藏在键盘后面，我设置滚动视图大小以向上滚动内容。它是一个通用应用程序，现在我正在为 iPad 做同样的事情。

ipad 屏幕的高度/宽度是多少，如何为 ipad 设置这些？

检查它的 Ipad 或 Iphone 的代码

```
BOOL isiPhone = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone;
if (isiPhone)
           // write code 
```

这些是要设置的变量。

```
#define SCROLLVIEW_CONTENT_HEIGHT 460
#define SCROLLVIEW_CONTENT_WIDTH  320 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:45:11.590

**iPad 768*1004 iPhone 320*480**

我认为这是获得 iPad/iPhone 高度和宽度的更好方法

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGFloat width = [UIScreen mainScreen].bounds.size.width;
    CGFloat height = [UIScreen mainScreen].bounds.size.height;
    NSLog(@"Width %f",width);
    NSLog(@"Height %f",height);
}
else if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    CGFloat width = [UIScreen mainScreen].bounds.size.width;
    CGFloat height = [UIScreen mainScreen].bounds.size.height;
    NSLog(@"Width %f",width);
    NSLog(@"Height %f",height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:28:22.533

看这里如何管理键盘外观。

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

一个更好的方法是`scrollView.contentInset`

# php - 使用 php 在每行末尾添加一个逗号

> ID：10044107
> 
> 赞同：5
> 
> 时间：2012-04-06T13:24:57.660
> 
> 标签：php, javascript, arrays, csv, comma

我有一个 csv 文件，每行有 1 个电子邮件 ID。我想在每个电子邮件 ID 后添加逗号。我想使用 php 在每一行的末尾添加一个逗号。我怎样才能做到这一点？有特定的功能吗？

**更新** 我想要这个，以便我可以在javascript中构造一个数组。

我将使用 php 加载 csv 文件，然后在我的 js 中打印它。

像

```
var myCars=[<?php print $csv; ?>]; 
```

这样我就可以实现这样的目标。

```
var myCars=["Saab@gmail.com","Volvo@gmail.com","BMW@gmail.com"]; 
```

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:28:13.910

```
$lines = file('file.csv');
foreach ( $lines as & $line ) {
    $line .= ',';
}
file_put_contents('file.new.csv', implode(PHP_EOL, $lines)); 
```

应该这样做，干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T13:43:57.193

```
<?php
$lines = file('org.csv');
foreach ( $lines as & $line ) {
    $line = trim( $line ) . ',';
}
file_put_contents('new.csv', implode(PHP_EOL, $lines)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T13:55:25.577

为什么不使用特定于 csv 的函数？

```
$old = fopen('file.csv','r');
$new = fopen('new.csv','w+');
while($line = fgetcsv($old))
{
    fputcsv($new,$line);
}
fclose($old);
fclose($new); 
```

上面的代码会写一个新的csv，每行一行，但是如果你只是想生成一个javascript数组，为什么不这样做：

```
$file = fopen ('file.csv','r');
$all = array();
while($line = fgetcsv($file))
{
    $all[] = $line[0];//if there is only 1 field/line
    $all = array_merge($all,$line);//if multiple
}
fclose($file);
$js_array = '["'.implode('",',$all).'"];';
//or, the way I'd advise against, but good for multi-dimensional, assoc arrays
echo 'var array = JSON.parse("'.json_encode($all).'");'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T13:57:23.253

为什么不只是

```
$csv = str_replace("\n", ",\n", $csv); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-06T14:32:53.767

您可以使用 fgetcsv 函数将文件导入数组，然后使用 json_encode() 将其回显，而不是回显整个 csv 字符串。这样你肯定会得到一个有效的 javascript 数组。它还将为您引用和编码任何字符串。

哦，记得通过一些迭代器运行数组，它将在所有字符串上运行 utf8_encode。如果你有无效的 utf8 字符，json_encode 会出错。

php.net 上有很多关于不同部分的示例，但如果需要，我可以提供一些示例。

# android - 减去并获得两个图像的差异（touchpaint）并在Android中获得一个整数值

> ID：10044109
> 
> 赞同：2
> 
> 时间：2012-04-06T13:25:18.040
> 
> 标签：android

我有一个要求，用户需要在 FingerPaint 之类的应用程序上绘制一些东西并提交。我需要检查图像匹配的程度，并将用户图像与实际图像的差异。然后差值应返回一个整数值。根据这一点，用户会得到一个分数。有什么建议可以像在 Android 中的 MATLAB 中那样区分两个图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:06:27.037

首先找出您的第一个和第二个图像的坐标，然后将其插入到 SpatiaLite 数据库中，它具有两个或多个对象之间的所有功能，例如联合、交集、减法、凹凸面等。

[看一看](https://gis.stackexchange.com/questions/5186/sqlite-to-spatialite)

或搜索 SpatiaLite。它会帮助你得到你想要的……玩得开心……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:38:44.347

我认为您首先获得实际图像矩形，并记录每个像素及其位置。然后你可以得到用户图片的相同矩形，并比较所有像素。或使用 rect.contain() 来确定是否所有像素都在 rect.if all in the rece 你应该比较像素位置

# php - 使用 Rest API 将照片上传到 Facebook

> ID：10044112
> 
> 赞同：2
> 
> 时间：2012-04-06T13:25:32.147
> 
> 标签：php, facebook

你能看看这个网址吗

[http://developers.facebook.com/docs/reference/rest/photos.upload/](http://developers.facebook.com/docs/reference/rest/photos.upload/)

我需要一个工作示例，如何使用此 api 将照片上传到我的 facebook 个人资料。

实际上，我有一个 php 站点，我希望允许用户将照片上传到他们的 facebook 个人资料。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T20:57:31.877

您发布的链接指的是一种过时的 FB API 方法。最好将 Graph API 与最新的 PHP SDK 结合使用。

[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/) https://github.com/facebook/php-sdk

这是对照片对象方法的参考 [http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

这是来自 facebook 开发人员博客的一个相当近期的示例：http: [//developers.facebook.com/blog/post/498/](http://developers.facebook.com/blog/post/498/)

# java - 在 Google 地图中更改图钉位置

> ID：10044114
> 
> 赞同：1
> 
> 时间：2012-04-06T13:25:50.227
> 
> 标签：java, android, google-maps

我有一张地图

当用户触摸另一个地方时我想要什么，我想删除以前的 pin 并将新 pin 放在新位置而不拖动它。

我怎样才能做到这一点？？

这是我的代码：

```
 public class AndroidLocationActivity extends MapActivity {

    private MapController mapController;
    private MapView mapView;
    private LocationManager locationManager;
    private MyItemizedOverlay itemizedoverlay;
    private MyLocationOverlay myLocationOverlay;
    GeoPoint p;

    class MapOverlay extends com.google.android.maps.Overlay
    {
        @Override
        public boolean draw(Canvas canvas, MapView mapView, 
        boolean shadow, long when) 
        {
            super.draw(canvas, mapView, shadow);                   

            //---translate the GeoPoint to screen pixels---
            Point screenPts = new Point();
            mapView.getProjection().toPixels(p, screenPts);

            //---add the marker---
            Bitmap bmp = BitmapFactory.decodeResource(
                getResources(), R.drawable.point);            
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         
            return true;

        }
        @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView) 
        {   
            //---when user lifts his finger---
            if (event.getAction() == 1) {                
                GeoPoint p = mapView.getProjection().fromPixels(
                    (int) event.getX(),
                    (int) event.getY());
                    Toast.makeText(getBaseContext(), 
                        p.getLatitudeE6() / 1E6 + "," + 
                        p.getLongitudeE6() /1E6 , 
                        Toast.LENGTH_SHORT).show();
            }                            
            return false;
        }       }

    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.main); // bind the layout to the activity

        // Configure the Map
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);
        mapController = mapView.getController();
        mapController.setZoom(14); // Zoon 1 is world view
        mapController.animateTo(p);

        //---Add a location marker---
        MapOverlay mapOverlay = new MapOverlay();
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);        

        mapView.invalidate();

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, new GeoUpdateHandler());

        myLocationOverlay = new MyLocationOverlay(this, mapView);
        mapView.getOverlays().add(myLocationOverlay);

        myLocationOverlay.runOnFirstFix(new Runnable() {
            public void run() {
                mapView.getController().animateTo(
                        myLocationOverlay.getMyLocation());
            }
        });

        Drawable drawable = this.getResources().getDrawable(R.drawable.point);
        itemizedoverlay = new MyItemizedOverlay(this, drawable);
        createMarker();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public class GeoUpdateHandler implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lng = (int) (location.getLongitude() * 1E6);
            GeoPoint point = new GeoPoint(lat, lng);
            createMarker();
            mapController.animateTo(point); // mapController.setCenter(point);

        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }

    private void createMarker() {
        GeoPoint p = mapView.getMapCenter();
        OverlayItem overlayitem = new OverlayItem(p, "", "");
        itemizedoverlay.addOverlay(overlayitem);
        if (itemizedoverlay.size() > 0) {
            mapView.getOverlays().add(itemizedoverlay);
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
        myLocationOverlay.enableMyLocation();
        myLocationOverlay.enableCompass();
    }

    @Override
    protected void onPause() {
        super.onResume();
        myLocationOverlay.disableMyLocation();
        myLocationOverlay.disableCompass();
    }

} 
```

和 MyItemizedOverlay

```
 public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private static int maxNum = 5;
    private OverlayItem overlays[] = new OverlayItem[maxNum];
    private int index = 0;
    private boolean full = false;
    private Context context;
    private OverlayItem previousoverlay;

    public MyItemizedOverlay(Context context, Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return overlays[i];
    }

    @Override
    public int size() {
        if (full) {
            return overlays.length;
        } else {
            return index;
        }

    }

    public void addOverlay(OverlayItem overlay) {
        if (previousoverlay != null) {
            if (index < maxNum) {
                overlays[index] = previousoverlay;
            } else {
                index = 0;
                full = true;
                overlays[index] = previousoverlay;
            }
            index++;
            populate();
        }
        this.previousoverlay = overlay;
    }

    protected boolean onTap(int index) {
        OverlayItem overlayItem = overlays[index];
        Builder builder = new AlertDialog.Builder(context);
        builder.setMessage("This will end the activity");
        builder.setCancelable(true);
        builder.setPositiveButton("I agree", new OkOnClickListener());
        builder.setNegativeButton("No, no", new CancelOnClickListener());
        AlertDialog dialog = builder.create();
        dialog.show();
        return true;
    };

    private final class CancelOnClickListener implements DialogInterface.OnClickListener {
        public void onClick(DialogInterface dialog, int which) {
            Toast.makeText(context, "You clicked yes", Toast.LENGTH_LONG)
                    .show();
        }
    }

    private final class OkOnClickListener implements DialogInterface.OnClickListener {
        public void onClick(DialogInterface dialog, int which) {
            Toast.makeText(context, "You clicked no", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:17:49.890

这个函数你可以在 onTouch() 方法中传递局域网并登录

这对我有用

希望对你有帮助

```
void addPoint(int lat,int lng)
{

    drawableDot = this.getResources().getDrawable(R.drawable.ipadblue);

    itemizedoverlay= new HelloItemizedOverlay(drawableDot);
    GeoPoint point2 = new GeoPoint((int)(lat * 1E6)+five,(int)(lng * 1E6)+five);
    //GeoPoint point2 = new GeoPoint((int)(lat * 1E6),(int)(lng * 1E6));

    OverlayItem overlayItem2 = new OverlayItem(point2, "111", "222");
    itemizedoverlay.addOverlay(overlayItem2);
    mapOverlays.add(itemizedoverlay);
    mapView.invalidate(); // this is must       
} 
```

**编辑：**

**[看这个例子](http://android-example-code.blogspot.in/p/map-api-in-android.html)**

# eclipse - Java构建路径STS中的Grails依赖项“空”

> ID：10044116
> 
> 赞同：1
> 
> 时间：2012-04-06T13:26:00.893
> 
> 标签：eclipse, grails, sts-springsourcetoolsuite

我的同事正在尝试将 STS、groovy/grails 安装到他的 PC 上。他已经导入了一个 TFS 项目，该项目很好地抓住了源代码。然而，他得到了很多构建错误，这些错误似乎是 Grails Dependencies 库为空的结果。他清除了 .ivy2 缓存并重新启动了重新填充 .ivy2 缓存的 STS。但是，构建路径下的依赖项仍然是空的（右键单击项目，构建路径，库选项卡，展开 Grails 依赖项）。

他也许可以手动添加它们，但这似乎不是合适的解决方案，并且可能会导致问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:16:35.087

从项目的上下文菜单中选择“Grails Tools -> Refresh dependencies”。然后添加依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:25:24.117

我有同样的问题。原来是一个未声明的类导致了这个问题。一位 STS 工程师回应说：“如果“grails compile”命令失败，那么 STS 将没有依赖数据。这些数据是编译命令的副作用产生的。因此，如果编译失败，则不会生成它。”

基本上，整个 Grails 依赖问题是一个红鲱鱼。如果您查看错误日志（Window->View->Error Log 或 Window->View->Other: General->Error Log），请检查是否存在正在停止 grails 编译的未定义项。

# java - Java xpath，选择最深的孩子

> ID：10044120
> 
> 赞同：4
> 
> 时间：2012-04-06T13:26:11.573
> 
> 标签：java, xml, xpath

我是 Java 和 XPath 语法的新手。我有复杂的 xml 文档。我需要的是选择所有没有子节点的节点（我实际上需要它们的值）。

```
<root>
    <a>
        <b>text1</b>
        <c>text2</c>
    </a>
    <d>
        <e>
            <f>text3</f>
        </e>
    </d>
    <f>text4</f>
</root> 
```

我想在`"text1","text2","text3","text4"`这里获取列表。你能帮我解决xpath表达式吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T14:12:47.900

好的，这就是我需要的

```
root.selectNodes("//*[not(*)]") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T18:26:39.473

> 我需要的是选择所有没有孩子的节点

我怀疑你的意思是你想选择所有没有元素子元素的元素。那将是`//*[not(*)]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:28:14.683

如果文件如上，请尝试`//*/text()` ；）

# html - 用于创建网页的交互式软件

> ID：10044121
> 
> 赞同：1
> 
> 时间：2012-04-06T13:26:30.317
> 
> 标签：html, webpage

我想设计一个交互式网站（带有复选框、单选按钮等），稍后将其与 MySQL 数据库链接。但我不知道任何HTML。是否有任何（免费）软件可以让我使用拖放控件来设计我的网站并自动生成 HTML？你认为最好的软件是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:30:13.043

那里有一些不错的网络应用程序，例如 Weebly 和 Webs，但如果您真的想要可下载的软件，我建议您使用 Nvu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:32:51.800

在我看来，Dreamweaver 是最适合新手的编辑器，它非常直观，有点像使用 Microsoft Word，而且它已经包含一些交互式脚本，例如用于在您的网站上集成音乐播放器。但是，要使网站与数据库交互，或以任何方式存储数据，您需要的不仅仅是 HTML，您可能还需要了解 PHP 或类似的服务器端编程语言。

# c - 制作；386：输入文件 (..) 的 x86-64 架构与 i386 输出不兼容

> ID：10044123
> 
> 赞同：3
> 
> 时间：2012-04-06T13:26:35.877
> 
> 标签：c, cmake, libraries

第一次执行“cmake build”然后“make”时出现此错误：

```
/usr/bin/ld: i386:x86-64 architecture of input file `CMakeFiles/eperftool.dir/mp4reader.o' is incompatible with i386 output
/usr/bin/ld: i386:x86-64 architecture of input file `CMakeFiles/eperftool.dir/codec_instance_mgmt.o' is incompatible with i386 output
/usr/bin/ld: i386:x86-64 architecture of input file `CMakeFiles/eperftool.dir/callbacks.o' is incompatible with i386 output
(...)" 
```

这是我的制作文件的格式：

```
file (GLOB eperftool_sources ./*)

set(EPERFTOOL_BIN ${PROJECT_SOURCE_DIR}/bin/${CMAKE_BUILD_TYPE}/eperftool CACHE STRING "eperftool dir")
add_executable( eperftool ${eperftool_sources})

find_package (Threads)
if (Threads_FOUND)
  include_directories(${Threads_INCLUDE_DIRS})
endif (Threads_FOUND)

target_link_libraries(eperftool openfec m)

target_link_libraries(eperftool ${CMAKE_THREAD_LIBS_INIT} )

set(CMAKE_SHARED_LINKER_FLAGS "-m32")" 
```

在谷歌搜索问题并找到添加链接器标志'-m32'的人以解决它之后，我添加了最后一行'set（CMAKE_SHARED_LINKER_FLAGS“-m32”）'，但它并没有为我解决问题.

我应该怎么做才能解决问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:30:58.620

我认为，您从某处复制了目标文件`mp4reader.o, codec_instance_mgmt.o and callbacks.o`（未在您的系统上编译），这导致您的系统不兼容。您可以尝试删除所有对象并再次编译：

```
rm *.o 
```

然后再次编译。

# audio - ASIO 数据格式

> ID：10044129
> 
> 赞同：1
> 
> 时间：2012-04-06T13:26:55.560
> 
> 标签：audio, asio, dataformat

我打算建立一个简单的音频接口。为此，我只想知道 ASIO 驱动程序通常以哪种格式将数据传递给程序？我无法从规格中找出这一点，也无法在其他地方找到它。我不想编写自己的驱动程序，我只想以相同的格式传递我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:13:22.990

我一直在做一些 ASIO 开发，并在 7 个系统上测试了 10 个不同的声卡（内部和外部），其中大多数使用 ASIOSTInt32LSB，有些使用 ASIOSTInt16LSB 作为*输出*。实现了这两种格式后，我还没有看到使用其他任何东西的声卡。

当然，这只是简单的旧试验和错误，绝不是一种确切的方法。

# css - 操作系统之间具有不同垂直度量的自定义字体

> ID：10044130
> 
> 赞同：6
> 
> 时间：2012-04-06T13:27:01.313
> 
> 标签：css, html, fonts, font-face, custom-font

我正在尝试为正在构建的页面包含自定义字体。我的问题是字体垂直对齐在我的 ubuntu 开发机器和 windows pc 上看起来不同。

首先，这是理解问题的图像

*编辑：不幸的是，作为一个新用户，我无法发布图片，所以这里是一个描述：*

问题是字体基线和它下面的元素之间的距离。我的 ubuntu 机器上有一个无法解释的间隙，它不是填充/边距。即使您选择文本，它看起来也未对齐。

两者都在 Chrome 上进行了测试，当然后面是相同的 html/css（它是同一个页面）。代码和 chrome 的检查器工具上都没有底部边距/填充。相同的行高。字体是博物馆。两者都加载字体的 .woff 版本。任何其他信息，我很乐意提供。

用于导入字体的 css 是：

```
@font-face {
  font-family: 'Museo-700';
  src: url('path-to-eot');
  src: url('path-to-eot?') format('embedded-opentype'),
       url('path-to-woff') format('woff'),
       url('path-to-ttf') format('truetype');  
} 
```

即使我删除了 woff 声明并且 ttf 提供了字体，问题仍然存在。

我真的迷失了这个，不知道我怎么能让它变得一样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T18:06:46.870

字体具有三组嵌入的垂直度量信息。一组用于 Mac，一组用于 PC，另一组通常由 *nix 使用。这些可能很难同步，但我们的字体生成器确实会尝试使这些值相同。试试看？

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

来自 Google 类型团队的更多信息：

[http://code.google.com/p/googlefontdirectory/wiki/VerticalMetricsRecommendations](http://code.google.com/p/googlefontdirectory/wiki/VerticalMetricsRecommendations)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T23:14:59.500

我对这种字体有同样的问题： [http ://www.fontsquirrel.com/fonts/Symbol-Signs](http://www.fontsquirrel.com/fonts/Symbol-Signs)

我下载了预打包的@font-face 套件，Mac 和 PC 之间的指标不一致。

解决方案是从下载的套件中取出 TTF 字体，并使用它通过 Font Squirrel 的生成器导出新的 @font-face 套件。生成器在 Expert Settings 中有一个标记为“Fix Vertical Metrics”的复选框。确保在生成套件之前检查这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-24T08:03:53.947

如果您出于某种原因不能使用 FontSquirrel，您可以在本地执行此操作（甚至支持可变字体）。

下载字体工具：[https ://github.com/fonttools/fonttools](https://github.com/fonttools/fonttools)

`pip install fonttools`

同时安装，Brotli：`pip install brotli`

现在，您拥有与 FontSquirrel 在其服务器上使用的完全相同的依赖项。重新加载您的终端（关闭它并重新打开它）。`ttx`现在，您的终端中应该有可用的命令。

假设，我们想要修复字体`foo.woff2`（或 woff 或 ttf 或 otf）的垂直度量：

```
ttx foo.woff2
...
... 
```

这会将其转换为人类可读的字体格式——`foo.ttx`您可以在 Sublime Text 中打开该格式。在 OS/2 指标下搜索“Win”并确保它们匹配。

您在这个巨大的 xml 文件中搜索的是：

*   赢得上升
*   赢得下降
*   错字上升
*   错字下降
*   HHead上升
*   HHead Descent

Make Win Ascent = Typo Ascent = HHead Ascent

使 Win Descent = *-* Typo Descent = *-* HHead Descent（注意减号。例如，如果 Typo Descent = -320，Win Descent = 320。

关闭`foo.ttx`文件并使用 ttx 将其转换回 ttf：

```
ttx foo.ttx
...
... 
```

应该有一个新`foo.ttf`文件。我们现在需要使用 Google 的 woff2 库对其进行压缩：[https ://github.com/google/woff2](https://github.com/google/woff2)

按照那里的说明运行`woff2_compress foo.ttf`，瞧，您的 woff2 字体具有干净一致的垂直指标！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T05:42:01.927

**为line-height** css 属性设置一个固定值，例如以 px 为单位。

# javascript - Fusion Charts setCurrentRenderer('javascript') 问题

> ID：10044131
> 
> 赞同：3
> 
> 时间：2012-04-06T13:27:09.680
> 
> 标签：javascript, fusioncharts

我有以下 HTML 代码。这是工作。

```
<html>
  <head>     
    <title>My First chart using FusionCharts - Using pure JavaScript</title>    

    <script type="text/javascript" src="http://www.fusioncharts.com/lib/jquery/jquery-1.6.2.min.js"></script>
    <script language="JavaScript" src="http://www.fusioncharts.com/lib/js/FusionCharts.js"></script>
    <script language="JavaScript" src="http://www.fusioncharts.com/lib/js/FusionCharts.HC.js"></script>
    <script language="JavaScript" src="http://www.fusioncharts.com/lib/js/FusionCharts.HC.Charts.js"></script>
    <script language="JavaScript" src="http://www.fusioncharts.com/lib/js/jquery.min.js"></script>

  </head>
  <body>     
    <div id="chartContainer">FusionCharts will load here!</div>          
    <script type="text/javascript">

    //FusionCharts.setCurrentRenderer('javascript');
           var chartObj = new FusionCharts({
           swfUrl: "http://www.fusioncharts.com/demos/gallery/Charts/Column2D.swf",
           width: "500", 
           height: "300",
           id: 'sampleChart',
           dataSource: "http://www.fusioncharts.com/demos/gallery/Data/Col2D1.xml",
           dataFormat: FusionChartsDataFormats.XMLURL,           
           renderAt: 'chartContainer'
        }).render();

    </script>        
  </body> 
</html> 
```

当我使用`setCurrentRenderer`javascripde 模式时。它给了我“没有数据显示”。

编辑：示例源 - [http://www.fusioncharts.com/demos/gallery/column-and-bar/chart.asp?id=column2d_1](http://www.fusioncharts.com/demos/gallery/column-and-bar/chart.asp?id=column2d_1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T10:11:44.043

从 FusionCharts 网站以 JavaScript 加载数据会导致跨域错误。它是浏览器本身内置的安全性。

`XMLHttpRequest cannot load http://www.fusioncharts.com/demos/gallery/Data/Col2D1.xml. Origin http://localhost is not allowed by Access-Control-Allow-Origin.`

尝试在您自己的本地服务器上托管 JavaScript 文件、Flash 文件和 XML 数据，它应该可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T13:57:46.153

跨域问题可以通过实现CORS——跨源资源共享来解决。确保*提供数据*的服务器在响应中发送一些额外的 http-headers：

```
Access-Control-Allow-Origin: http://the_url_that_hosts_the_page

Access-Control-Allow-Headers: If-Modified-Since 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:17:27.757

我在下面的例子中使用了 javascript 渲染：

```
<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Multi Series Bar 2D Chart</title>
    <link href="../assets/ui/css/style.css" rel="stylesheet" type="text/css" />
    <link href="../assets/prettify/prettify.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../Charts/jquery.min.js"></script>
    <script type="text/javascript" src="../../Charts/FusionCharts.js"></script>
    <script type="text/javascript" src="../assets/prettify/prettify.js"></script>
    <script type="text/javascript" src="../assets/ui/js/json2.js"></script>
    <script type="text/javascript" src="../assets/ui/js/lib.js" ></script>
    <script type="text/javascript" src="../assets/ui/js/DD_belatedPNG_0.0.8a-min.js"></script>                        
    <script>
      /* select the element name, css selector, background etc */
      DD_belatedPNG.fix('img');

      /* string argument can be any CSS selector */
    </script>
      <p>&nbsp;</p>
      <P align="center"></P>
    <![endif]-->
</head>   
 <body>
<h3 class="chart-title">Multi Series Bar 2D Chart</h3>
<p>&nbsp;</p>
<script type="text/javascript" src="../Data/String/js/MSBar3D1.js" ></script>

    <div id="chartdiv" align="center">Chart will load here</div>
    <script type="text/javascript">
        alert(GALLERY_RENDERER);
        FusionCharts.setCurrentRenderer("javascript");
       var chart = new FusionCharts("MSBar3D.swf", "ChartId", "560", "400", "0", "0");
       chart.setXMLData( dataString );         
       chart.render("chartdiv");
    </script>
      <p>&nbsp;</p>
      <p align="center">3D Bar chart showing sales comparison of 5 countries across 3 years. Click on a legend item to show/hide the data series.</p> 
```

它适用于java脚本渲染..我希望这个例子有帮助

# php - 带有 CodeIgniter 的 jQuery 可排序列表

> ID：10044134
> 
> 赞同：1
> 
> 时间：2012-04-06T13:27:27.210
> 
> 标签：php, jquery, codeigniter

我正在尝试使用 jQuery 插件从数据库填充的列表项中创建一个可排序的列表，但效果仅适用于呈现的第一个项目：

```
<?php if(isset($bookmarks)) : foreach($bookmarks as $row) :?>
    <div id="makeDrag">

    <?php $fixed = preg_replace('#^[^:/.]*[:/]+#i', '', $row->URL); ?>

    <li>
        <div class="well">
            <div><?php echo anchor('http://'.$fixed, $row->Name); ?></div>
            <div><strong>Comments:</strong> <?php echo $row->Comments; ?></div>
            <h4 class="btn-small">
                <?php echo anchor("site/delete/$row->id", "Delete"); ?>
            </h4>
        </li>
    </div>
<?php endforeach; ?> 
```

我可以看到哪里出了问题，但不知道如何解决。我显然希望影响所有人口的效果，`li`而不仅仅是第一个。任何帮助都会很棒。抱歉，如果我不清楚，如果这令人困惑，我可以尝试重新措辞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:49:35.693

原因很可能是因为您有

```
$('#makeDrag').sortable(); 
```

但是您也有一个 foreach 语句，它创建了多个`#makeDrag`元素，从而使您的 HTML 无效。

要解决这个问题：

```
<?php if(isset($bookmarks)) : ?>
    <ul id="makeDrag">
    <?php foreach($bookmarks as $row) : ?>
        <?php $fixed = preg_replace('#^[^:/.]*[:/]+#i', '', $row->URL); ?>
        <li>
            <div class="well">
                <div><?php echo anchor('http://'.$fixed, $row->Name); ?></div>
                <div><strong>Comments:</strong> <?php echo $row->Comments; ?></div>
                <h4 class="btn-small"><?php echo anchor("site/delete/$row->id", "Delete"); ?></h4>
            </div>
        </li>
    <? endforeach; ?>
    </ul>
<?php endif; ?> 
```

高温高压

# c - 如何在不使用 malloc 的情况下从函数返回数组？

> ID：10044138
> 
> 赞同：1
> 
> 时间：2012-04-06T13:28:01.097
> 
> 标签：c, arrays, memory, pointers, return

我一直在为 C 语言中的一个简单任务而苦苦挣扎……（已经有一段时间了。）我需要构建一个函数来创建和重置结构数组而不使用任何内存分配函数。

我最初是用malloc设计的：

```
typedef struct {
    int ..
    int ..
} Branch;

Branch* createBranchList (int N)
{
    Branch *List;
    Branch reSet = {0}; // a zero'd Branch struct used for the resetting process
    int i;

    if(!(List=(Branch*)malloc(sizeof(Branch)*N))){
        printf("Allocation error");
        return NULL;
    }

    for(i=0; i<N; i++)
        List[i] = reSet;

    return List;
} 
```

现在如何在不使用内存分配的情况下做到这一点？我可以返回参考吗？我不这么认为。

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:30:07.590

**安全方法（一）：**

定义一个带有数组成员的结构，然后返回它。

例如：

```
struct MyContainer {
    Thing x[42];
};

MyContainer foo(void) {
    MyContainer m;
    m.x[0] = 5;
    m.x[1] = 10;
    ...
    return m;
} 
```

显然，如果函数在编译时不知道数组大小，则此方法将不可行。

**安全方法（2）：**

让调用者将数组作为参数传入。

例如：

```
foo(Thing *things, int N) {
    thing[0] = 5;
    thing[1] = 10;
    ...
} 
```

**不安全的方法：**

声明一个静态局部数组，并返回一个指向它的指针。

这“有效”是因为静态数组在超出范围时不会被释放。但这是不安全的，因为下次使用该函数时数组将被覆盖（在多线程场景中尤其糟糕）。

如果函数在编译时不知道数组大小，则此方法也将不可行。

# tabs - Jquerytools 标签在页面加载时需要一秒钟左右的时间来组织自己

> ID：10044140
> 
> 赞同：1
> 
> 时间：2012-04-06T13:28:13.473
> 
> 标签：tabs, jquery-tools

我在公司网站上使用 jquery 工具选项卡来显示 5 位公司董事。

每个导演都有自己的幻灯片，其中包含照片、标题、详细信息等。

但是在页面加载时......大约半秒钟后，所有选项卡都出现在组织之前，并且第一张幻灯片出现了。

有没有办法让标签立即组织起来，或者至少在所有组织都进行之前不会出现。我觉得这可能是我放置脚本的方式和位置的问题。

我正在使用 html5 样板，我的脚本位于页面底部附近。

这是我的代码（在标题中调用modernizr.js）：

```
<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="http://cdn.jquerytools.org/1.2.6/full/jquery.tools.min.js"></script>
<script>
$(function() {
  $(".slidetabs").tabs(".images > div", {
// enable "cross-fading" effect
 effect: 'slide',
// start from the beginning after the last tab
rotate: true
// use the slideshow plugin. It accepts its own configuration
}).slideshow();
});
</script>
<!-- scripts concatenated and minified via build script -->

<script src="js/plugins.js"></script>
<script src="js/script.js"></script> 
```

# android - 对话框保存在android，启动

> ID：10044145
> 
> 赞同：1
> 
> 时间：2012-04-06T13:28:23.170
> 
> 标签：android, save-dialog

我正在尝试制作一个 webview 应用程序，但我被困在某个地方。

当我第一次启动应用程序（安装）时，它应该问一个问题，例如：

> 你读过服务条款吗？`Yes` `No`

如果我选择“是”，应用程序应该记住它，并且不应该再次询问该程序是否稍后再次启动。如果我选择“否”，应用程序应该终止，并且它应该在下次启动应用程序时询问相同的问题。

我真的被卡住了，我找不到这样的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:35:14.510

我会在本地存储一个属性以在启动时读取。这是 API [http://developer.android.com/reference/java/util/Properties.html](http://developer.android.com/reference/java/util/Properties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:38:22.717

我将创建一个加载活动，检查它是否要求用户接受权限 (TOS)，然后它是否已进入主活动，如果不显示并等待。在加载活动的 oncreate 中试试这个

```
SharedPreferences sp = getSharedPreferences("TOS", Context.MODE_PRIVATE);
boolean hasAccepted = sp.getBoolean("accepted", false);
if(hasAccepted)
{
    //start next activity
}else {
    ///display the TOS
} 
```

然后为调用这些方法的是/否按钮创建一个侦听器

```
public void onClickYes(){
 SharedPreferences sp = getSharedPreferences("TOS", Context.MODE_PRIVATE);
 sp.edit().putBoolean("accepted", true).commit();
}

public void onClickNo(){
  finish();
} 
```

这样做是在应用加载时尝试让 SharedPreference “接受”。如果找不到它，则使用默认值 false 因此 (sp.getBoolean("accepted", false")。然后，如果用户接受 tos，则将“已接受”的 SharedPreference 存储为 true。所以下次应用程序加载它将能够找到首选项并返回 true，因此不显示 TOS

# blackberry - SD卡中的Blackberry BitmapField

> ID：10044146
> 
> 赞同：2
> 
> 时间：2012-04-06T13:28:24.187
> 
> 标签：blackberry, bytearray, sd-card, bitmapfield

我想在 BitmapField 中显示 SD 卡中的图像。怎么做？谁能给我一些示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:50:52.167

这可能是帮助已满。

```
public Bitmap getImage(){
    Bitmap bitmapImage=null;
    try{
        InputStream input;
        FileConnection fconn = (FileConnection) Connector.open("file:///store/home/user/dirname/imgname.png", Connector.READ_WRITE);
        input = fconn.openInputStream();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        int j = 0;
        while((j=input.read()) != -1) {
             baos.write(j);
        }
        byte[] byteArray = baos.toByteArray();

        bitmapImage = Bitmap.createBitmapFromBytes(byteArray,0,byteArray.length,1);

    }catch(Exception ioe){
        System.out.println(ioe);
    }
    return bitmapImage;
} 
```

享受..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:00:37.100

嗨，伙计们，上面的代码对 BB OS >= 5.0 很有用我正在使用可用于 OS 4.2 或更高版本的代码。

```
private Bitmap resizeBitmap(Bitmap image, int width, int height)
    {   

        int rgb[] = new int[image.getWidth()*image.getHeight()];
        image.getARGB(rgb, 0, image.getWidth(), 0, 0, image.getWidth(), image.getHeight());
        int rgb2[] = rescaleArray(rgb, image.getWidth(), image.getHeight(), width, height);
        Bitmap temp2 = new Bitmap(width, height);
        temp2.setARGB(rgb2, 0, width, 0, 0, width, height);
        return temp2;
    }

    private int[] rescaleArray(int[] ini, int x, int y, int x2, int y2)
    {
        int out[] = new int[x2*y2];
        for (int yy = 0; yy < y2; yy++)
        {
            int dy = yy * y / y2;
            for (int xx = 0; xx < x2; xx++)
            {
                int dx = xx * x / x2;
                out[(x2 * yy) + xx] = ini[(x * dy) + dx];
            }
        }
        return out;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:46:52.977

> 试试这个示例代码：

```
public class LoadingScreen extends MainScreen implements FieldChangeListener
{
private VerticalFieldManager ver;
private ButtonField showImage;
private BitmapField bitmapField;    

public LoadingScreen() 
{
    ver=new VerticalFieldManager(USE_ALL_WIDTH);
    showImage=new ButtonField("Show Image",Field.FIELD_HCENTER);
    showImage.setChangeListener(this);      
    ver.add(showImage);

    bitmapField=new BitmapField(null,Field.FIELD_HCENTER);
    bitmapField.setPadding(10, 0, 10, 0);
    ver.add(bitmapField);   

    add(ver);
}
public void fieldChanged(Field field, int context) 
{
    if(field==showImage)
    {
        selectImageFromSDCARD();
    }
}

private void selectImageFromSDCARD() 
{   
    String PATH="";
    if(SDCardTest.isSDCardAvailable())//sdcard available then               
         PATH = System.getProperty("fileconn.dir.memorycard.photos");//The default stored Images Path;
    else                    
         PATH = System.getProperty("fileconn.dir.photos");//The default stored Images Path;

    FilePicker filePicker=FilePicker.getInstance();
    filePicker.setPath(PATH);       
    filePicker.setListener(new Listener() 
    {       
        public void selectionDone(String url) 
        {
            System.out.println("======================URL: "+url);
            try 
            {                   
                FileConnection file = (FileConnection)Connector.open(url);
                if(file.exists())
                {
                    InputStream inputStream = file.openInputStream();  
                    byte[] data=new byte[inputStream.available()];
                    data=IOUtilities.streamToBytes(inputStream);
                    Bitmap bitmap=Bitmap.createBitmapFromBytes(data, 0, data.length,1);//Here we get the Image;

                    Bitmap scaleBitmap=new Bitmap(400, 300);//Now we are scaling that image;
                    bitmap.scaleInto(scaleBitmap, Bitmap.FILTER_LANCZOS);
                    bitmapField.setBitmap(scaleBitmap);
                }
                else
                {
                    bitmapField.setBitmap(Bitmap.getBitmapResource("icon.png"));
                }
            } 
            catch (IOException e) 
            {
                bitmapField.setBitmap(Bitmap.getBitmapResource("icon.png"));
            }               
        }
    });
    filePicker.show();      
}

protected boolean onSavePrompt()  //It doesn't show the "Save","Discard","Cancel" POPUP;
{
    return true;
}

public boolean onMenu(int instance) //It doesn't show the Menu;
{
    return true;
}
} 
```

如果您有任何疑问，请参阅此博客：[从 SD 卡获取图像](http://alishaik001.wordpress.com/2012/04/07/get-the-image-from-sdcard-in-blackberry/)

# python - 如何使用 boto 库生成临时 url 以将文件上传到 Amazon S3？

> ID：10044151
> 
> 赞同：30
> 
> 时间：2012-04-06T13:28:31.457
> 
> 标签：python, amazon-s3, amazon-web-services, boto

我知道如何以这种方式下载文件：`key.generate_url(3600)`

但是当我尝试上传时：`key.generate_url(3600, method='PUT')`，网址不起作用。有人告诉我： `The request signature we calculated does not match the signature you provided. Check your key and signing method.`

我在主页上找不到有关`boto`如何使用该功能的示例代码`generate_url(method='PUT')`。这里有人知道如何使用它进行上传吗？如何设置上传文件路径的参数？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-06T17:00:34.757

我找到了一些时间来尝试这个，这就是我发现的。

```
>>> import boto
>>> c =boto.connect_s3()
>>> fp = open('myfiletoupload.txt')
>>> content_length = len(fp.read())
>>> c.generate_url(300, 'PUT', 'test-1332789015', 'foobar', headers={'Content-Length': str(content_length)}, force_http=True)
'http://test-1332789015.s3.amazonaws.com/foobar?Signature=oUARG45mR95utXsiQYRJNiCI4x4%3D&Expires=1333731456&AWSAccessKeyId=AKIAJOTCCJRP4C3NSMYA&Content-Length=16' 
```

然后我可以使用 curl 将文件放入该 url，如下所示：

```
$ curl --request PUT --upload-file myfiletoupload.txt "http://test-1332789015.s3.amazonaws.com/foobar?Signature=oUARG45mR95utXsiQYRJNiCI4x4%3D&Expires=1333731456&AWSAccessKeyId=AKIAJOTCCJRP4C3NSMYA&Content-Length=16" 
```

这导致文件被上传到存储桶。所以，看来这是可能的。您可能想查看是否可以计算 content-md5 值并将其包含在标头中，但您还必须弄清楚如何让 curl 发送该标头。此外，您应该能够通过 HTTPS 而不是 HTTP 进行这项工作，但我还没有尝试过。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-12-25T15:47:06.787

这是在 boto3 中的样子（使用 1.2.3 版测试）。

首先，使用以下方法创建一个预签名的 url `s3.generate_presigned_url`：

```
>>> import boto3
>>> s3 = boto3.client('s3')
>>> s3.generate_presigned_url('put_object', Params={'Bucket':'YourBucket', 'Key':'YourKey'}, ExpiresIn=3600, HttpMethod='PUT')
u'https://s3-ap-northeast-1.amazonaws.com/YourBucket/YourKey?AWSAccessKeyId=AKIAXXXXXXXXXXXXXXXX&Expires=1451061671&Signature=%2FtyAyCd5vrp13p%2FqLdoPkox7yTM%3D' 
```

使用预签名 URL PUT 到 S3

```
$ curl \
  --request PUT \
  --upload-file path/to/file \
  "https://s3-ap-northeast-1.amazonaws.com/YourBucket/YourKey?AWSAccessKeyId=AKIAXXXXXXXXXXXXXXXX&Expires=1451061671&Signature=%2FtyAyCd5vrp13p%2FqLdoPkox7yTM%3D" 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-07-26T14:04:21.837

所有其他答案都假设文件将使用 上传`curl`，这在大多数 python 脚本中确实不方便。在下文中，将生成一个预签名的 url，`boto3`并将文件与`requests`库一起上传：

```
session = boto3.Session(aws_access_key_id="XXX", aws_secret_access_key="XXX")
s3client = session.client('s3')
url = s3client.generate_presigned_url('put_object', Params={'Bucket': 'mybucket', 'Key': 'mykey'})

requests.put(url, data=open("/path/to/file").read()) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-18T17:23:47.367

这是 2012 年 4 月 6 日 garnaat 回答的后续行动。

我正在生成一个签名的 URL 服务器端，我有凭据，并将其传递给客户端，以便客户端可以直接上传内容。我足够信任客户端以允许它上传任意大小的文件，但不足以为其提供安全令牌。我想避免让客户端告诉服务器其内容作为请求的一部分有多大。因此我的后续回答。

我无需在标头中指定内容长度或指定 force_http=True 即可获得 PUT 方法的签名 url。

使用 Boto 2.31.1：如 garnaat 的回答：

```
>>> import boto
>>> c =boto.connect_s3() 
```

然后我使用了：

```
>>> temp_url = c.generate_url(seconds_available, 'PUT', bucket_name, s3_key) 
```

这产生了以下形式的网址：

```
https://s3_location/bucket_name/s3_key?Signature=Ew407JMktSIcFln%2FZe00VroCmTU%3D&Expires=1405647669&AWSAccessKeyId=kM__pEQo2AEVd_Juz4Qq 
```

然后我可以使用 curl 发布文件：

```
>>> os.system('curl --request PUT --upload-file true_measure/test_files/test_file_w_content.txt "'+temp_url+'"') 
```

我确实很难弄清楚这一点，因为我通常使用[python 请求](http://docs.python-requests.org/en/latest/)来编写测试和调试；但是，当我尝试使用它将文件放入这些 boto 使用请求生成的签名 url 之一时，我遇到了身份验证失败。我还没有完全调试这个，但我怀疑这是因为与 curl 产生的相比，请求添加了一些额外的标题。

我希望这个后续答案可以减轻其他人的调试痛苦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-19T14:59:05.810

如果您使用的是 boto（不是 boto3），我能够上传工作的唯一方法是使用`generate_url_sigv4`. 使用 vanilla`generate_url`导致与原始问题中报告的错误相同。可能有一个我不知道的 AWS 帐户设置用于控制哪个功能起作用。

在带有 boto 2.49.0 和请求 2.22.0 的 Python 解释器中：

```
import boto
import os
import requests
os.environ['S3_USE_SIGV4'] = 'True'
c = boto.connect_s3(host='s3.amazonaws.com')
url = c.generate_url_sigv4(3600, 'PUT', 'my-bucket-name', 'bucket-path/to/file.txt')
with open('file.txt') as f:
    resp = requests.put(url, data=f.read())

>>> resp
<Response [200]> 
```

如果您不使用主机名连接，则在生成 URL 时会收到此错误：

```
boto.s3.connection.HostRequiredError: BotoClientError: When using SigV4, you must specify a 'host' parameter. 
```

相关：
[“HmacAuthV1Handler”对象没有属性“presign”是什么意思？](https://stackoverflow.com/questions/56641244/what-does-hmacauthv1handler-object-has-no-attribute-presign-mean)

如果您使用的是 boto3，则预签名的 POST 似乎有更好的文档记录：
[https ://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-presigned-urls.html#generating-a-presigned-上传文件的 url](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-presigned-urls.html#generating-a-presigned-url-to-upload-a-file)

# assembly - 将字符串输出到控制台 - ASM 8086

> ID：10044154
> 
> 赞同：0
> 
> 时间：2012-04-06T13:28:56.347
> 
> 标签：assembly, int, x86-16

我正在尝试使用 INT 21h 在屏幕上显示一个字符串，但程序似乎立即崩溃......

我正在使用 MASM

这是我的代码：

```
.stack 200h

    .data?
      value dd ?

    .data
      item dd 0
      str1 db 'Hello world!$'
    .code

start:

; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

    mov edx, offset str1
    mov al, 09h
    int 21h
; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

end start 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:46:53.727

A few problems:

1.  Your program doesn't exit to DOS correctly, it just lets the CPU execute whatever garbage is there in the memory after your `int 21h`. Use `function 4ch` to terminate your program.
2.  Your stack may be too little. Interrupt service routines and resident programs, drivers included (and probably DOS as well), use the current stack. If they need more than `200h` bytes at any moment, they'll overwrite whatever code or data happens to be where they think there's still some stack space. That too can cause a crash or hang. Bump up the size to `1000h`.
3.  You did not indicate what processor your program was run on. The problem is, you used an i80386+ instruction (`mov edx, offset str1`), which naturally isn't available on i8086/8088, i80186 and i80286 and their clones. Btw, DOS does not support 32-bit addresses or offsets. It should be `mov dx, offset str1`.

There might be something else, but let's fix these first.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T11:57:30.807

如果您真的使用 8086，请使用： .model small org 100h .data message db "Hello World $" .code main proc mov ah,09h mov dx,offset message int 21h mov ah,4ch int 21h endp end main

更简单，更清洁的imo。

# c++ - 线性大小增加有时会增加 1

> ID：10044157
> 
> 赞同：0
> 
> 时间：2012-04-06T13:29:07.173
> 
> 标签：c++, windows

我有一个流程布局。在里面我有大约 900 张桌子。每张桌子都堆叠在一起。我有一个滑块可以调整它们的大小，从而导致流布局也调整大小。

问题是，表格应该线性调整大小。它们的基本尺寸为 200x200。所以当 scale = 1.0 时，表格的 w 和 h 为 200。

这是问题的一个例子：

![在此处输入图像描述](../Images/8148d3208c57b379cc2c1263c28185cf.png)

我的问题是当 delta 是 8 而不是 9 时。我能做些什么来确保我的增长始终是线性的？

```
void LobbyTableManagaer::changeTableScale( double scale )
    {
        setTableScale(scale);
    }

    void LobbyTableManager::setTableScale( double scale )
    {
        scale += 0.3;
        scale *= 2.0;

        float scrollRel = m_vScroll->getRelativeValue();
        setScale(scale);
        rescaleTables();
        resizeFlow();
    ...

    double LobbyTableManager::getTableScale() const
        {
            return (getInnerWidth() / 700.0) * getScale();
        }

    void LobbyFilterManager::valueChanged( agui::Slider* source,int val )
    {
        if(source == m_magnifySlider)
        {

            DISPATCH_LOBBY_EVENT
            {
                (*it)->changeTableScale((double)val / source->getRange());
            }
        }
    } 
```

简而言之，我想确保表格总是线性增加。我不明白为什么每隔几次 delta 是 8 而不是 9。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:38:47.973

看看你的“200 X Table Scale”值，它们上升了大约 8.8。所以当它被四舍五入为整数时，大约 80% 的时间它会比前一个值多 9，而其他 20% 的时间会多 8。

如果你真的需要每次都增加相同的大小，你必须用整数做所有事情。否则，您必须调整比例更改，以使结果更接近 9.0。

# android - Android 中 SENSOR_DELAY_NORMAL、SENSOR_DELAY_GAME、SENSOR_DELAY_UI 和 SENSOR_DELAY_FASTEST 有什么区别

> ID：10044158
> 
> 赞同：12
> 
> 时间：2012-04-06T13:29:07.213
> 
> 标签：android, android-sensors

`SENSOR_DELAY_NORMAL`谁能告诉我,`SENSOR_DELAY_GAME`和in Android 传感器`SENSOR_DELAY_UI`有什么区别。`SENSOR_DELAY_FASTEST`

开发人员应该在哪里使用所有这些东西？使用所有这些，用户会有什么感受？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T21:45:42.160

以下是基于测试结果的一些近似值：

> ```
> Accelerometer, SENSOR_DELAY_FASTEST: 18-20 ms
> Accelerometer, SENSOR_DELAY_GAME: 37-39 ms
> Accelerometer, SENSOR_DELAY_UI: 85-87 ms
> Accelerometer, SENSOR_DELAY_NORMAL: 215-230 ms
> Orientation Sensor, SENSOR_DELAY_FASTEST: 16-17 ms
> Orientation Sensor, SENSOR_DELAY_GAME: 37-39 ms
> Orientation Sensor, SENSOR_DELAY_UI: 77 ms
> Orientation Sensor, SENSOR_DELAY_NORMAL: 224-225 ms 
> ```

您还可以定义自己的速率，例如 100 毫秒。

```
int READINGRATE = 100000; // time in us
mSensorManager.registerListener(this, mLinearAccelerometer, READINGRATE); 
```

然而，速率只是一个近似值，如果您需要准确的速率，最好使用计时器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-23T06:12:57.030

阅读此
[http://developer.android.com/guide/topics/sensors/sensors_overview.html](http://developer.android.com/guide/topics/sensors/sensors_overview.html)

SENSOR_DELAY_FASTEST 0 微秒
SENSOR_DELAY_GAME 20,000 微秒
SENSOR_DELAY_UI 60,000 微秒
SENSOR_DELAY_NORMAL 200,000 微秒（200 毫秒）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-06T13:47:31.727

int SENSOR_DELAY_FASTEST get sensor data as fast as possible int SENSOR_DELAY_GAME rate suitable for games int SENSOR_DELAY_NORMAL rate (default) suitable for screen orientation changes int SENSOR_DELAY_UI rate suitable for the user interface

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T17:48:10.777

我的设备结果：
Honor 4C Android 5.1.1
Xperia Z3 Android 6.0.1
for`Sensor.TYPE_ACCELEROMETER`

```
Approximate values:

For samplingPeriodUs: 0ms:
Honor: 4-12ms, long time(1min) 10ms
Xperia: 1-5ms, long time(1min) 3ms

For samplingPeriodUs: 30ms:
Honor: 4-12ms, long time(1min) 7ms
Xperia: 7-21ms, long time(1min) 20ms

For samplingPeriodUs: SensorManager.SENSOR_DELAY_NORMAL:
Many tests from internet: Accelerometer, SENSOR_DELAY_NORMAL: 215-230 ms
Honor: 4-11ms, long time(1min) 10ms
Xperia: 6-114ms, long time(1min) 14ms

Omitted:SENSOR_DELAY_GAME, SENSOR_DELAY_UI

For samplingPeriodUs: SensorManager.SENSOR_DELAY_FASTEST:
Many tests from internet: Accelerometer, SENSOR_DELAY_FASTEST: 18-20 ms
Honor: 3-12ms, long time(1min) 8ms
Xperia: 1-5ms, long time(1min) 5ms 
```

# c++ - Linux中getlogin函数的使用

> ID：10044168
> 
> 赞同：1
> 
> 时间：2012-04-06T13:29:50.753
> 
> 标签：c++, linux, login

当我登录 Linux Suse10 机器并通过 C++ 程序检查 getlogin_r() 时，我得到了一个正确的结果作为我的登录名。

```
int main()
{
    char szUserName[64] = {0};

    int nGet = getlogin_r(szUserName, sizeof(szUserName)-1);
    if(0 != nGet)
        {
            printerr();
        }
    printf("%s\n", szUserName);
    char * szHome = getlogin();
    printf("%s\n", szHome);
    return 0;
} 
```

但是在使用 su - name2 之后，我现在更改了登录名。但是 getlogin_r() 仍然显示旧的用户名。

一种解决方案是使用 geteuid()。但是上述问题的原因是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:43:18.720

“使用后`su - name2`我更改了登录名” - 不，你没有。您更改了用户 ID，而不是登录名。

手册页对`su`选项进行了说明`-`：“提供与用户直接登录时用户期望的环境相似的环境。” 显然“相似”与“相同”不同。具体来说，`su -`不在 /var/run/utmp 中存储登录记录。

# android - Android jUnit：屏幕截图

> ID：10044169
> 
> 赞同：2
> 
> 时间：2012-04-06T13:29:52.927
> 
> 标签：android, junit

在 Android jUnit 测试期间截屏并将其保存到文件的正确方法是什么？

如果可以将屏幕截图保存到开发计算机而不是测试设备上会更好，但这不是必需的。

# xml - Flash 更新 - XML 崩溃

> ID：10044170
> 
> 赞同：0
> 
> 时间：2012-04-06T13:29:59.897
> 
> 标签：xml, flash, updates

我的 XML 在 Flash 更新后立即崩溃，想知道是否有过去的 Flash 更新位于某个地方？包括日期和时间以及更新的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:36:26.587

您在寻找存档的 Flash Player 版本吗？

[http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html)

![存档的 Flash Player 版本](../Images/c77527d946c142942a52b0b37db9880e.png)

# c - 通用堆栈实现中的空指针（Plain C）

> ID：10044184
> 
> 赞同：1
> 
> 时间：2012-04-06T13:31:08.070
> 
> 标签：c, pointers, stack, void-pointers

我正在尝试用纯 C 语言制作一个通用堆栈，但我遇到了一些指针问题，不知道问题出在哪里。

这是我遇到问题的结构和功能：

```
typedef struct{
    void *elems; 
    int elemSize; 
    int logLength; 
    int allocLength;
} genStack;

void GenStackPush(genStack *s, const void *elemAddr); 
void GenStackPop(genStack *s, void *elemAddr); 
```

这就是实现：

```
void GenStackPush(genStack *s, const void *elemAddr)
{
    s->elems[s->logLength] = elemAddr;
    s->logLength++;
}

void GenStackPop(genStack *s, void *elemAddr)
{
      s->logLength--;
      elemAddr = s->elems[s->logLength];
} 
```

用法应该如下所示：

```
int val; 
genStack IntegerStack;
for (val = 0; val < 6; val++)
    GenStackPush(&IntegerStack, &val);

GenStackPop(&IntegerStack, &val); 
printf("Popped: %d\n",val); 
```

这是我遇到的问题：

```
genstacklib.c: In function ‘GenStackPush’:
genstacklib.c:60:10: warning: dereferencing ‘void *’ pointer [enabled by default]
genstacklib.c:60:2: error: invalid use of void expression
genstacklib.c: In function ‘GenStackPop’:
genstacklib.c:72:23: warning: dereferencing ‘void *’ pointer [enabled by default]
genstacklib.c:72:13: error: void value not ignored as it ought to be 
```

我已经尝试了几种修复代码的方法，但都没有奏效。谢谢。

==================================================== =========================

所以，伙计们，谢谢你的帮助！现在它可以编译了，但是我改变了一个 API，它是由我们的教授提供的。'const' 限定符也有问题，所以我删除了它们。不是我的代码看起来像这样：

genstacklib.h：

```
#ifndef GENSTACKLIB_H
#define GENSTACKLIB_H
#define GenStackInitialAlocationSize 4

typedef struct{
    void** elems;
    int elemSize;
    int logLength;
    int allocLength;
}genStack;

void GenStackNew(genStack *s,int elemSize);
void GenStackDispose(genStack *s);
int GenStackEmpty(const genStack *s);
void GenStackPush(genStack *s, void *elemAddr);
void GenStackPop(genStack *s, void *elemAddr);

#endif 
```

genstacklib.c：

```
#include <stdlib.h>
#include <stdio.h>
#include "genstacklib.h"

void GenStackNew(genStack *s,int elemSize)
{
    void** newElems;

    /* Allocate a new array to hold the contents. */
    newElems = (void**) malloc(elemSize * GenStackInitialAlocationSize);

    if (newElems == NULL)
    {
        fprintf(stderr, "Error with allocating the stack.\n");
        exit(1); /* Exit, returning error code. */
    }
    s->elems = newElems;
    s->allocLength = GenStackInitialAlocationSize;
    s->logLength = 0; /*is empty*/

}

void GenStackDispose(genStack *s)
{
    s->allocLength = 0;
    free(s->elems);
}

int GenStackEmpty(const genStack *s)
{
    return s->logLength == 0;
}

void GenStackPush(genStack *s, void *elemAddr)
{
    s->elems[s->logLength] = elemAddr;
    s->logLength++;
}

void GenStackPop(genStack *s, void *elemAddr)
{
      s->logLength--;
      elemAddr = s->elems[s->logLength];
} 
```

如果您有任何改进它的想法或有什么要说的，我会很高兴地听到。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:44:14.743

您正在尝试取消引用 void 指针而不强制转换为导致问题的其他类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:05:54.760

elems 的类型错误。如果你把它声明为`void*`编译器不知道它指向的东西有多大。所以它不能对其进行指针算术或数组下标，甚至不能取消引用它所指向的内容。

从概念上讲，elems 是您放入堆栈的一系列内容。你把什么放在堆栈上？指针 - 声明为`void*`. 所以 elems 应该是一个`void*`对象数组。你可以这样声明

```
typedef struct{
    void *elems[STACK_SIZE]; 
    int elemSize; 
    int logLength; 
    int allocLength;
} genStack; 
```

这将在结构中为数组保留空间（使结构本身非常大），或者您可以将其声明为指向`void*`ie`void**`

```
typedef struct{
    void **elems; 
    int elemSize; 
    int logLength; 
    int allocLength;
} genStack; 
```

如果选择此选项，则必须手动分配内存

```
genStack* genStackAlloc()
{
    genStack* ret = calloc(1, sizeof *ret);
    ret->elemns = calloc(STACK_SIZE, sizeof(void*));
    // rest of the initialisation

    return ret;
} 
```

当然，您必须在处理堆栈时手动释放内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:32:49.953

`elems`被声明为指向 a 的指针`void`，我认为您希望它是指向 a 的指针`void*`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:06:52.417

问题是`s->elems[s->logLength]`：

首先，成员变量void *elems用于存储元素地址（void *），元素数组（void *），所以elems的类型应该是（void **），你应该分配内存来存储地址.

您可以通过以下方式分配内存：

```
void * elems[MAX_STACK_SIZE]; 
```

或者

```
void ** elems    
s->elems = (void**)malloc(MAX_STACK_SIZE*sizeof(void*)); // and allocate it before use it. 
```

# glsl - OpenGLES 2.0：gl_VertexID 等效？

> ID：10044185
> 
> 赞同：6
> 
> 时间：2012-04-06T13:31:09.897
> 
> 标签：glsl, opengl-es-2.0, vertex, vertex-shader

我试图通过动态计算顶点位置来创建一个点网格，基于它们在发送到着色器的顶点数组中的索引。我可以从我的着色器中调用一个等效的 gl_VertexID 变量吗？还是另一种无需向 GPU 发送更多数据即可访问它们在数组中的位置的方法？谢谢，乔希。

这是我的顶点着色器：

```
attribute vec4 vertexPosition;
uniform mat4 modelViewProjectionMatrix;
vec4 temp;
uniform float width;

void main()
{    
    temp = vertexPosition;

    // Calculate x and y values based on index:
    temp.y = floor(gl_VertexID/width);
    temp.x = gl_VertexID - width*temp.y;

    gl_Position = modelViewProjectionMatrix * temp;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T16:27:47.443

不幸的是，GLES2 中没有 gl_VertexID 等效项。您必须自己创建和传递附加数据。

# .net - 有没有办法在 .NET 中创建仅运行时的属性？

> ID：10044186
> 
> 赞同：1
> 
> 时间：2012-04-06T13:31:13.623
> 
> 标签：.net, function, properties, user-controls, runtime

我有一个用户控件，我想创建一个只能在运行时访问的属性，而不是设计时。这可能与属性有关，还是我应该创建一个函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:00:16.870

它只需要属性。您可能想要使用 [DesignTimeSerializationVisibility]，这样该属性的值就不会保留在 InitializeComponent() 方法中。和 [Browsable] 所以它在 VS 属性窗口中不可见。像这样：

```
 [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    [Browsable(false)]
    public int DontPersistAndDontEdit {
        get;
        set;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T13:51:48.480

尝试应用这些属性的组合：

```
[EditorBrowsable(EditorBrowsableState.Never)]
[Browsable(false)] 
```

# c# - c# - TextBox 的连接和属性

> ID：10044187
> 
> 赞同：-2
> 
> 时间：2012-04-06T13:31:16.527
> 
> 标签：c#, asp.net, arrays, textbox, web

我正在尝试使用这样的东西：

```
for (int i = 0; i < 40; i++)
{
    string x + i = TextBox + i.Text;
} 
```

有什么解决办法吗？我想`i`用作索引，就好像我有一个`TextBox`. 我怎样才能实现这样的文本框的 Text 属性？

例如，我想创建一个名为 x1,x2,x3,x4... 的字符串，x1 = TextBox1.Text 的值。但我不能:(

我有 TextBox1,2,3...40，我只想将它们的文本值传递给新的字符串或字符串列表 ex。比如 x1 = TextBox1.Text，x2 = TextBox2.Text；..... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:35:55.930

你试图`Text`从一个集合中获取该属性`TextBox`- 顺便说一下，你还没有向我们展示你是如何得到的。您甚至**可能**没有`TextBox`.

如果你这样做，你会使用这样的代码（注意`SomeCodeToGetTextBoxArray()`需要你自己定义）：

```
TextBox[] myTextBoxes = SomeCodeToGetTextBoxArray();
var arrayLength = myTextBoxes.Length;
String[] x = new String[arrayLength];
for (int i = 0; i < arrayLength; i++)
{
    x[i] = myTextBoxes[i].Text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:37:08.370

您要做的是通过您在运行时生成的字符串名称来引用局部变量、字段或属性。做你想做的事的唯一方法是使用反射。

根据变量是局部作用域、字段成员还是属性成员，有不同的方法可以做到这一点。

反射 - [`LocalVariableInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.localvariableinfo.aspx)- [`FieldInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.aspx)-[`PropertyInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)

* * *

请注意，虽然这将是您问题的答案，但使用数组（或`List<T>`）并使用索引可能会更好。但是，如果不完全了解您正在尝试做什么（不仅仅是在您的小片段中），真的不可能知道。但是，数组（或`List<T>`）更有可能是更正确的解决方案。

# javascript - Knockout observable 可以数据绑定到单选按钮的值吗？

> ID：10044189
> 
> 赞同：3
> 
> 时间：2012-04-06T13:31:18.133
> 
> 标签：javascript, data-binding, radio-button, knockout.js

是否可以使用值绑定将 Knockout 可观察属性绑定到单选按钮？

这是我正在尝试做的事情，但值最终是字符串“[Object object]”，而不是我的可观察属性的实际实例：

```
<input type="radio" name="vehicleGroup" data-bind="checked: vehicleGroupViewModel().selectedGroupOption , value:vehicleGroupViewModel().car" />

<input type="radio" name="vehicleGroup" data-bind="checked: vehicleGroupViewModel().selectedGroupOption , value:vehicleGroupViewModel().truck" /> 
```

这是我正在使用的视图模型：

```
var VehicleGroupViewModel = function(){
    var self = this;
    this.selectedVehicleGroup = ko.observable();
    this.selectedGroupOption = ko.observable();
    this.selectedGroupOption.subscribe(function (newVal) {
        self.selectedVehicleGroup(newVal);
    }
    this.selectedGroup = ko.observable();
    this.car = ko.observable(new VehicleViewModel());
    this.truck = ko.observable(new VehicleViewModel());
}

var VehicleViewModel = function(){
    this.name = ko.observable();
} 
```

所以最后我希望 Car 或 Truck VehicleViewModel 位于 selectedVehicleGroup 可观察对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:43:16.280

如此[处](http://knockoutjs.com/documentation/value-binding.html)所述， 只有 Select 节点能够将任意 JavaScript 对象绑定到一个值。其他输入需要一个字符串值，这就是您的值返回“[Object object]”的原因。

你仍然可以做你想做的事，但你必须手动映射一个键并自己找到合适的对象。这是一个演示的小提琴：

[http://jsfiddle.net/jearles/JcPXy/](http://jsfiddle.net/jearles/JcPXy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-24T10:51:33.913

仅供其他读者接受接受的答案，KO v3 添加了[checkedValue](http://knockoutjs.com/documentation/checked-binding.html)绑定，现在这使得这成为可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:36:48.880

我也需要这个。我的解决方案类似于 John Earles，除了我使用 a`computed`而不是`subscribe`：

```
self.selectedVehicleGroup = ko.computed(function(){
    return ko.utils.arrayFirst(self.availableGroups(), function (group) { return group.name() == self.selectedGroupOption(); });
}); 
```

[http://jsfiddle.net/JcPXy/91/](http://jsfiddle.net/JcPXy/91/)

# php - Mysql查询和条件where子句

> ID：10044190
> 
> 赞同：3
> 
> 时间：2012-04-06T13:31:25.513
> 
> 标签：php, mysql, conditional, where-clause

使用 PHP 和 MySQL，我试图让所有涉及实际用户的私人聊天。为此，我有一个名为“rooms”的表（id、id_initiate_user、id_target_user）和另一个名为“users”的表（id_pseudo、avatar）。如果实际用户是聊天室的发起用户，我想从目标用户那里获取头像和伪用户，如果实际用户是该房间的目标用户，我想从发起人那里获取头像和伪用户用户（无论如何，我想要其他成员的头像和伪）。

我想我的查询中需要一个条件，但我真的不知道如何管理它（整天用谷歌搜索）。

这是我的查询（逻辑在那里，但语法显然是错误的：

```
$user_id=$_SESSION['user_id'];

$res = @mysql_query("
SELECT rooms.id, rooms.id_initiate_user, rooms.id_target_user, rooms.pv, users.id, users.pseudo, users.avatar 
FROM rooms, users 
WHERE 
(
    (rooms.id_initiate_user='$user_id' OR rooms.id_target_user='$user_id') 
    AND  
    (
        IF (rooms.id_initiate_user='$user_id')
        THEN rooms.id_target_user=users.id
        ELSE rooms.id_initiate_user=users.id;
        END IF;
    )
) ORDER BY rooms.id ASC"); 
```

我在这里阅读了很多关于“条件位置”的问题，但没有一个能解决我的问题。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:40:01.733

你不能做这样的事情：

```
WHERE 
(
    (
        rooms.id_initiate_user='$user_id'
        AND rooms.id_target_user=users.id
    )
    OR
    (
        rooms.id_target_user='$user_id'
        AND rooms.id_initiate_user=users.id
    )
) 
```

# crud - 通过行号和列号获取值

> ID：10044193
> 
> 赞同：0
> 
> 时间：2012-04-06T13:31:46.043
> 
> 标签：crud, google-refine

在自定义文本方面，我想检查*前*一行单元格的值。

我试过`rows[row.index - 1]`没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:10:31.093

google优化不允许您直接获取上一行。您可能想查看填写选项，但不确定它是否对您的项目有帮助：http: [//googlerefine.blogspot.ca/2012/03/fill-down-right-and-secure-way.html](http://googlerefine.blogspot.ca/2012/03/fill-down-right-and-secure-way.html)

# android - Android ICS 4.0.3 上的 SWF 全屏错误 - 在 SGS2 上测试

> ID：10044195
> 
> 赞同：0
> 
> 时间：2012-04-06T13:31:49.597
> 
> 标签：android, webview, flash, android-4.0-ice-cream-sandwich

我正在开发一个在 webview 中显示 swf 的应用程序。我的问题（**仅限 ICS 4.0.3**）是，每当我单击 swf 内的全屏按钮时，应用程序都会显示黑屏几秒钟，然后崩溃。我已经用较低的 api (10) 测试了相同的代码，它工作正常。

**事实：**
1- **ICS 4.0.3 - SWF 在 webview 内全屏崩溃**。
2- **ICS 4.0.3 - 在常规浏览器中全屏显示 SWF。**

**webview 类**中是否有任何方法可以解决此问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:56:02.893

解决方案是一个黑客！

你需要这样做：

```
mWebView.setWebChromeClient(new WebChromeClient(){ ... }); 
```

# objective-c - Apple Emoji / 遍历 NSString

> ID：10044196
> 
> 赞同：4
> 
> 时间：2012-04-06T13:32:05.650
> 
> 标签：objective-c, xcode, fonts, emoji

我想遍历表情符号输入字符串（来自 UITextField）的“字符”，然后一个接一个地用 UILabel 显示这些表情符号图标。

```
for (int i=0; i < len; i++) {  
    unichar c = [transformedString characterAtIndex:i];  
    [label setText:[NSString stringWithFormat:@"%C", c]];  
... 
```

这适用于 ASCII 文本，但不适用于 Emoji 字体（除了心形符号之外的所有字体都是空的）。正如我注意到的，单个表情符号图标由字符串中的 2 个字符表示。据我所知，表情符号使用私人区域 unicode 字符。

有没有办法做到这一点？

非常感谢，你省了我一些头疼...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T17:17:31.163

您可以使用 NSString 上的 enumerate* 实例方法之一，带有选项`NSStringEnumerationByComposedCharacterSequences`.

```
- (void)enumerateSubstringsInRange:(NSRange)range
                           options:(NSStringEnumerationOptions)opts
                        usingBlock:(void (^)(NSString *substring,
                                             NSRange substringRange,
                                             NSRange enclosingRange,
                                             BOOL *stop))block 
```

NSString 使用 UTF-16 将一些代码点表示为两个 16 位值。您还可以手动检查字符串中的这些“代理对”并手动组合它们，但是您仍然只能获得代码点而不是字符。

* * *

```
[transformedString
    enumerateSubstringsInRange:NSMakeRange(0,[transformedString length]
                       options:NSStringEnumerationByComposedCharacterSequences
                    usingBlock: ^(NSString *substring,NSRange,NSRange,BOOL *)
{
    [label setText:substring];
}]; 
```

# python - 如何让 QThreads 在控制台 PySide 程序中工作？

> ID：10044197
> 
> 赞同：1
> 
> 时间：2012-04-06T13:32:09.350
> 
> 标签：python, multithreading, qt, pyside

我正在尝试学习如何在 python 程序中使用线程。我正在使用 PySide 和 QThreads，因为之后我将使用 PySide 实现 gui。

至少我认为，我已经理解了线程的主要概念。但我仍然对事件循环感到困惑。我认为这是我的应用程序的问题。

这是一个我无法正常工作的示例应用程序。在我的主类中，我有几个工作线程，我希望他们向主类报告他们的进度。但主程序不会实时打印进度消息。

我怎样才能让它工作？

```
from PySide import QtCore
import time, sys

class MyWorkerThread(QtCore.QThread):
    message = QtCore.Signal(str)

    def __init__(self, id, parent=None):
        super(MyWorkerThread, self).__init__(parent)
        self.id = id

    def run(self):
        for i in range(10):
            self.message.emit("%d: %d" % (self.id, i))
            time.sleep(0.2)

class MainProgram():
    def __init__(self, parent=None):
        self.threads = []

        self.addWorker(MyWorkerThread(1))
        self.addWorker(MyWorkerThread(2))

    def addWorker(self, worker):
        worker.message.connect(self.printMessage, QtCore.Qt.QueuedConnection)
        self.threads.append(worker)

    def startWorkers(self):
        for worker in self.threads:
            worker.start()
            worker.wait()
        self.workersFinished()

    def workersFinished(self):
        QtCore.QCoreApplication.instance().quit()

    @QtCore.Slot(str)
    def printMessage(self, text):
        sys.stdout.write(text+'\n')
        sys.stdout.flush()

if __name__ == '__main__':
    app = QtCore.QCoreApplication(sys.argv)
    m = MainProgram()
    m.startWorkers()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:51:28.997

`worker.wait()`是问题所在。这个调用会阻塞主线程（在这种情况下是一个正在运行的事件循环），直到 worker 完成它的工作。

这是一个稍有改动的版本（我已经评论了我的改动）：

```
from PySide import QtCore
import time, sys

class MyWorkerThread(QtCore.QThread):
    message = QtCore.Signal(str)

    def __init__(self, id, parent=None):
        super(MyWorkerThread, self).__init__(parent)
        self.id = id

    def run(self):
        for i in range(10):
            self.message.emit("%d: %d" % (self.id, i))
            time.sleep(0.2)

class MainProgram():
    def __init__(self, parent=None):
        self.threads = []

        self.addWorker(MyWorkerThread(1))
        self.addWorker(MyWorkerThread(2))

    def addWorker(self, worker):
        worker.message.connect(self.printMessage, QtCore.Qt.QueuedConnection)
        # connect the finished signal to method so that we are notified
        worker.finished.connect(self.workersFinished)
        self.threads.append(worker)

    def startWorkers(self):
        for worker in self.threads:
            worker.start()
            # no wait, no finished. you start the threads and leave.

    def workersFinished(self):
        if all(worker.isFinished() for worker in self.threads):
            # wait until all the threads finished
            QtCore.QCoreApplication.instance().quit()

    @QtCore.Slot(str)
    def printMessage(self, text):
        sys.stdout.write(text+'\n')
        sys.stdout.flush()

if __name__ == '__main__':
    app = QtCore.QCoreApplication(sys.argv)
    m = MainProgram()
    m.startWorkers()
    sys.exit(app.exec_()) 
```

# android - 水平居中按钮不起作用

> ID：10044199
> 
> 赞同：0
> 
> 时间：2012-04-06T13:32:17.200
> 
> 标签：android, android-layout

喂！

我想将我的按钮水平居中，但这永远行不通。

我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/minage"
        android:layout_alignParentLeft="true"
        android:padding="5dp"  />

    <TextView
            android:id="@+id/ml_minage_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true" 
            android:padding="5dp"/>

    </RelativeLayout>

    <SeekBar
        android:id="@+id/ml_minage"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:max="100"
        style="@style/NFFSeek"
        android:progressDrawable="@drawable/myseekbar"
        android:layout_margin="5dp" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/maxage" 
        android:padding="5dp"/>
    <TextView
            android:id="@+id/ml_maxage_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:padding="5dp" />

    </RelativeLayout>

    <SeekBar
        android:id="@+id/ml_maxage"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        style="@style/NFFSeek"
        android:progressDrawable="@drawable/myseekbar" 
        android:layout_margin="5dp" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/distance"
        android:padding="5dp" />

    <TextView
            android:id="@+id/ml_distance_value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:padding="5dp" />
    </RelativeLayout>

    <SeekBar
        android:id="@+id/ml_distance"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        style="@style/NFFSeek"
        android:progressDrawable="@drawable/myseekbar" 
        android:layout_margin="5dp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/gender"
        android:padding="5dp" />

    <RadioGroup
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checkedButton="@drawable/rbon" >

        <RadioButton
            android:id="@+id/ml_female"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:button="@drawable/rbselector"
            android:checked="true"
            android:drawablePadding="10dp"
            android:text="@string/rb_female"
            android:textColor="#000000"
            android:paddingLeft="42dp" />

        <RadioButton
            android:id="@+id/ml_male"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/rb_male"
            android:button="@drawable/rbselector"
            android:layout_margin="5dp"
            android:textColor="#000000"
            android:paddingLeft="42dp"
            />
    </RadioGroup>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <Button
        android:id="@+id/ml_stbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="15dp"
        android:background="@drawable/custom_button"
        android:layout_alignParentBottom="true"
        android:layout_centerInParent="true"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:padding="10dp"
        android:text="Flirt"
        android:textColor="#ffffff"
        android:textSize="12pt"
        android:typeface="serif" />

    </RelativeLayout>

</LinearLayout> 
```

此 xml 不适合中间的按钮，请帮忙。

![在此处输入图像描述](../Images/b072f6ac8449394cfc65b3c10167fce8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:41:02.823

问题是`RelativeLayout`不跨越页面的宽度，它的宽度是`wrap_content`. 按钮在 中居中`RelativeLayout`，但该布局仅与按钮一样宽，并且与屏幕左侧混搭在一起。

使内部`RelativeLayout`的宽度为`match_parent`。

```
<RelativeLayout
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:40:37.170

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    <Button
        android:id="@+id/ml_stbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="15dp"
        android:background="@drawable/custom_button"
        android:layout_centerInParent="true"
        android:gravity="center"
        android:padding="10dp"
        android:text="Flirt"
        android:textColor="#ffffff"
        android:textSize="12pt"
        android:typeface="serif" />

    </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:45:20.060

这不是直接回答您的问题，但是您的视图层次结构太复杂了。我建议你用一个跨越整个事物的单个元素替换所有的`LinearLayout`和元素。`RelativeLayout``RelativeLayout`

# regex - perl 正则表达式替换/替换使用带有特殊字符的变量

> ID：10044201
> 
> 赞同：0
> 
> 时间：2012-04-06T13:32:33.110
> 
> 标签：regex, perl, special-characters

好的，我已经检查了以前的类似问题，并且我一直在处理不同的quotemeta 变体，但有些东西仍然不正确。

我有一个单词 ID 和两个单词的一行 - 第一个是错误的单词，第二个是正确的。我正在使用正则表达式用正确的单词替换错误的单词。

```
$line = "ANN20021015_0104_XML_16_21 A$xAS   A$xASA";
@splits = split("\t",$line);
$wrong_word = quotemeta $splits[1];
$right_word = quotemeta $splits[2];
print $right_word."\n";
print $wrong_word."\n";

$line =~ s/$wrong_word\t/$right_word\t/g;

print $line; 
```

我在做什么有什么问题？

## 编辑

问题是我无法保留完整的单词——它们在特殊字符处被截断。此代码对于没有特殊字符的单词非常有效。

上述示例所需的输出是：

```
ANN20021015_0104_XML_16_21      A$xASA   A$xASA 
```

但我得到的是

```
ANN20021015_0104_XML_16_21      A   A 
```

因为`$`性格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:39:52.607

**预计到达时间：**

既然你得到：

```
ANN20021015_0104_XML_16_21      A   A 
```

当你想要的时候：

```
ANN20021015_0104_XML_16_21      A$xASA   A$xASA 
```

我的怀疑如下：

*   您不是故意插入变量`$xAS`和`$xASA`，因此因为它们是未定义的，它们只是将空字符串添加到`$line`，这在您的输出中可见。例如`"A$xAS"`扩展为`"A" . undef`.
*   您没有使用`use warnings`，因此您不会获得有关此错误的信息。

**解决方案：**

使用`use strict; use warnings;`. 总是。它们可以为您节省大量时间。

分配时，请改用单引号以避免变量插值：

```
$line = 'ANN20021015_0104_XML_16_21 A$xAS   A$xASA'; 
```

老答案：

既然你不说出了什么问题，那只是我的猜测。

我可以看到变量`$xAS`和的可能意外插值`$xASA`，您可以通过转义美元符号或在该`$line`分配上使用单引号来解决该问题。

您还可以使用`join`, 而不是正则表达式来构建新字符串，例如：

```
$line = join "\t", @splits[0,2,2]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T15:41:08.777

*   如果您使用过`strict`它会告诉您必须声明变量`$xAS`和`$xASA`.
*   如果您使用过`warnings`，它会告诉您您正在连接一个未初始化的变量。

因此，常见的警告是：“使用严格，使用警告”。

您只需要将字符串放在[*非插值*引号](http://perlmeme.org/howtos/using_perl/interpolation.html#Non_interpolated_str)( `''`, )中`q{}`或*转义**符号*( `$`) 以便它不会尝试[*插值*](http://perlmeme.org/howtos/using_perl/interpolation.html#Interpolated_string)它认为是变量的内容。

*   `""`是会弄乱你的字符串的引号
*   `''`是不会的引号

**教训**：除非你*想要*插值，否则使用*单引号。*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:13:11.930

问题不在于你的替代；问题出在代码示例的第一行。

```
$line = "ANN20021015_0104_XML_16_21 A$xAS   A$xASA"; 
```

尝试将变量`$xAS`和`$xASA`插入`$line`，并且什么都不插入，因为这些变量是空的。使用单引号而不是双引号，这样字符串就不会插入。

如果你打开它，`warnings`它会警告你你正在插入一个未初始化的变量，如果你打开`strict 'vars'`它，它根本不会让你使用未声明`$xAS`的变量`$xASA`。

最后，您不必`quotemeta`在右侧进行替换；只有左边。*

# iphone - 有时我的项目工作正常，有时它在下面代码中提到的行中显示以下错误

> ID：10044205
> 
> 赞同：-1
> 
> 时间：2012-04-06T13:32:51.610
> 
> 标签：iphone, objective-c

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[]) {

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init]; 
    int retVal = UIApplicationMain(argc, argv, nil, nil);//Program received signal: EXC_BAD_Access"
    [pool release];
    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:38:51.323

EXC_BAD_Access 表示您正在过度释放一个对象。使用启用了僵尸检测的 Instruments Object Alloc 运行应用程序以找到罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:39:13.967

您正在某处访问坏内存。最有可能的是，您正试图引用一个指向已经释放的对象的指针，并且调试器不得不回滚到堆栈的底部。通常，在日志中“程序收到信号：EXC_BAD_Access”之前，会出现对此类崩溃真正原因的提示。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:54:01.963

您的应用程序将崩溃，这就是您此时收到错误的原因，

您可以通过选择 iOs Simulator 4.3 及更低版本来检查应用程序崩溃的位置。

这可以帮助您调试问题。

iOS 5.0 及更高版本永远不会告诉您必须在低于 5.0 的版本中运行您的应用程序的问题出在哪里。

# wpf - 如何像资源管理器一样显示 avi 文件中的缩略图

> ID：10044209
> 
> 赞同：0
> 
> 时间：2012-04-06T13:33:11.893
> 
> 标签：wpf, thumbnails, windows-shell

需要它在 WPF 中工作 基本上我在列表控件中显示所有视频文件的列表，如果您想知道资源管理器是如何做到的，我想要一个图像框架或缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:26:16.253

它可能符合您的预期：它读取一些文件，使用适当的编解码器解码一些视频，然后从一个或多个帧创建图像。

# android - Mac 上命令行中的 Robotium

> ID：10044210
> 
> 赞同：0
> 
> 时间：2012-04-06T13:33:12.440
> 
> 标签：android, robotium

我正在测试 Android 应用程序，我想从 Mac 上的终端运行 Robotium 测试。正如我所读到的，我使用`adb shell am instrument -w com.test.test1/android.test.InstrumentationTestRunner` 终端说“-bash：adb：找不到命令”。可能，我没有看到明显的东西，但我真的只是在学习。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:43:47.567

您似乎没有正确设置环境变量。您需要 cd 进入您的 android sdk 目录，然后转到 platform-tools 文件夹。一旦你在那里，你将能够使用 adb。

这里有更多信息（转到“探索 SDK 部分”中讨论环境变量的部分

在 Linux 上，编辑您的 ~/.bash_profile 或 ~/.bashrc 文件。查找设置 PATH 环境变量的行，并将 tools/ 和 platform-tools/ 目录的完整路径添加到其中。如果您没有看到设置路径的行，您可以添加一个：export PATH=${PATH}:/tools:/platform-tools

在 Mac OS X 上，在您的主目录中查找 .bash_profile 并像 Linux 一样继续操作。如果您还没有，您可以创建 .bash_profile。

# c++ - 如何使用 QtMultimedia 播放 wav 文件？

> ID：10044211
> 
> 赞同：8
> 
> 时间：2012-04-06T13:33:13.160
> 
> 标签：c++, qt, audio

我目前的代码是：

```
void Sound::run() {
    QFile audio_file(mResourcePath);
    if(audio_file.open(QIODevice::ReadOnly)) {
        audio_file.seek(44); // skip wav header
        QByteArray audio_data = audio_file.readAll();
        audio_file.close();

        QBuffer* audio_buffer = new QBuffer(&audio_data);
        qDebug() << audio_buffer->size();

        QAudioFormat format;

        format.setSampleSize(16);
        format.setSampleRate(44100);
        format.setChannelCount(2);
        format.setCodec("audio/pcm");
        format.setByteOrder(QAudioFormat::LittleEndian);
        format.setSampleType(QAudioFormat::UnSignedInt);

        QAudioDeviceInfo info(QAudioDeviceInfo::defaultOutputDevice());
        if (!info.isFormatSupported(format)) {
            qWarning()<<"raw audio format not supported by backend, cannot play audio.";
            return;
        }
        qDebug() << info.deviceName();

        QAudioOutput* output = new QAudioOutput(info, format);
        output->start(audio_buffer);
    }
} 
```

整个事情是作为 QThreadPool 中的 QRunnable 开始的，并且该部分工作正常。问题是我从来没有得到任何音频。我的声音设备正在运行，缓冲区已满。我不知道怎么了。我使用 app.exec()。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T22:36:54.137

1.  设备 ( `QBuffer`) 必须打开：

    ```
    QBuffer audio_buffer(&audio_data);        
    audio_buffer.open(QIODevice::ReadOnly); 
    ```

2.  `QAudioOutput`需要一个事件循环来播放任何东西，并且该循环必须在它所属的线程中运行。当您没有将其显式移动到另一个线程时，它是在哪个线程中创建的：

    ```
    // Create the device and start playing...
    QAudioOutput output(info, format);
    output.start(&audio_buffer);     

    // ...then wait for the sound to finish 
    QEventLoop loop;
    QObject::connect(&output, SIGNAL(stateChanged(QAudio::State)), &loop, SLOT(quit()));
    do {
        loop.exec();            
    } while(output.state() == QAudio::ActiveState); 
    ```

3.  您分配的所有内容都应该在声音播放完毕后释放，否则您会发生内存泄漏，并且事件循环现在将在函数内部运行，因此您可以在本地分配所有内容。

# extjs - 在 ExtJs 中重用相同的组件

> ID：10044215
> 
> 赞同：0
> 
> 时间：2012-04-06T13:33:42.220
> 
> 标签：extjs, store, gridpanel

我想要的是能够一次创建两个 Panel 实例，但是当我执行`new Dashboard.NotificationPanel(); new Dashboard.NotificationPanel();`第一个类似的操作时，不会显示网格结果。我怀疑它与 initComponent 阶段有某种联系，特别是两个对象通过引用使用相同的存储对象。如果我错了，请纠正我或指出我的错误。提前致谢。

```
Dashboard.NotificationPanel = Ext.extend(Ext.grid.GridPanel, {
    columns: [...],
    view: new Ext.grid.GridView({
        forceFit: true,
        enableRowBody: true,
        ignoreAdd: true,
        emptyText: 'No Notifications to display'
    }),
    initComponent: function () {
        var store = new Ext.data.Store({
            url: '...',
            autoLoad: true,
            reader: new Ext.data.XmlReader({
                record: 'result',
                id: 'id'
            }, ['c_case_number', 'c_creator', 'c_date_created', 'c_notification_condition', 'c_message'])
        });
        var config = {
            store: store,
            bbar: new Ext.PagingToolbar({
                pageSize: 10,
                store: store,
                displayInfo: true,
                displayMsg: 'Displaying notifications {0} - {1} of {2}',
                emptyMsg: "No Notifications to display"
            })
        }
        Ext.apply(this, Ext.apply(this.initialConfig, config));

        Dashboard.NotificationPanel.superclass.initComponent.call(this);

    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:24:58.030

它不能使用两个实例的原因是视图和列被应用于原型而不是网格的实际实例。它们本质上是在所有实例之间共享的，这不是预期的行为。除非需要共享行为，否则不要在原型上放置非原始对象。改为这样做：

```
Dashboard.NotificationPanel = Ext.extend(Ext.grid.GridPanel, {
initComponent : function() {
    var store = new Ext.data.Store({
        url : '...',
        autoLoad : true,
        reader : new Ext.data.XmlReader({
                    record : 'result',
                    id : 'id'
                }, ['c_case_number', 'c_creator', 'c_date_created',
                        'c_notification_condition', 'c_message'])
    });
    var config = {
        columns : [...],
        view : new Ext.grid.GridView({
            forceFit : true,
            enableRowBody : true,
            ignoreAdd : true,
            emptyText : 'No Notifications to display'
        }),
        store : store,
        bbar : new Ext.PagingToolbar({
                    pageSize : 10,
                    store : store,
                    displayInfo : true,
                    displayMsg : 'Displaying notifications {0} - {1} of {2}',
                    emptyMsg : "No Notifications to display"
                })
    }
    Ext.apply(this, Ext.apply(this.initialConfig, config));

    Dashboard.NotificationPanel.superclass.initComponent.call(this);

}
}); 
```

还

```
Ext.apply(this, Ext.apply(this.initialConfig, config)) 
```

是 Ext 3 中的冗余代码，而不是使用：

```
Ext.apply(this, config) 
```

# c# - 如何使用 StructureMap 将依赖项注入 WPF Window 类？

> ID：10044216
> 
> 赞同：2
> 
> 时间：2012-04-06T13:33:44.337
> 
> 标签：c#, wpf, dependency-injection, structuremap

我正在尝试使用 StructureMap 将依赖项注入到我的 WPF Window 构造函数中。

我拥有的代码示例是：

```
public partial class PanelConfiguration : Window
{
    private IPanelConfigurationService _panelConfiguration; 

    public PanelConfiguration(IPanelConfigurationService panelConfiguration)
    {
        _panelConfiguration = panelConfiguration;
    }
} 
```

我将 ObjectFactory 配置为

```
// I was hoping the following would inject the interface into the constructor for me
For<PanelConfiguration>()
    .Use<PanelConfiguration>()
    .Ctor<IPanelConfigurationService>().Is<PanelConfigurationService>();

For<IPanelConfigurationRepository>()
        .Use<PanelConfigurationRepository>()
        .Ctor<string>("qFile").Is(config.QDefault);

For<IPanelConfigurationService>()
    .Use<PanelConfigurationService>(); 
```

我需要做什么才能根据需要将依赖项注入到 Window 类中？

# iphone - ios app build for version 5.0.1uploaded to app store可以在ios 5.1上运行吗？

> ID：10044221
> 
> 赞同：0
> 
> 时间：2012-04-06T13:34:07.153
> 
> 标签：iphone, appstore-approval

我确实使用 xcode 4.2 为 ios 5.0.1 构建了应用程序并将其上传到苹果商店。由于在 ios 5.1 上安装和运行时发生崩溃问题，他们拒绝了我的应用程序。

如果我们为 ios 5.0.1 构建的应用程序将不会在 ios5.1 iphone 设备上运行，请告诉我。

怎样才能让我可以在为 ios 5.0.1 构建的苹果商店批准我的应用程序。

但两天前，他们批准了另一个为 ios 5.0.1 构建的应用程序。

我应该去苹果商店查询吗？

请回复我，非常感谢为我的问题提供的时间框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:37:52.043

该应用程序可以在 iOS 5.1 中运行，问题是您不知道该应用程序将如何在 5.1 上运行，因此您可能正在使用 5.0.1 中允许的东西，而在 5.1 中它正在崩溃。

您现在唯一的选择是在您的 xCode 上下载 5.1 并检查发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:45:28.983

是的，Apple 将批准使用 5.0 SDK 构建的应用程序，但可能不会更早。他们几乎总是使用最新版本的操作系统进行测试，因此您在提交之前绝对应该使用它进行测试。我敢说没有理由不使用最新的*开发*。

5.0 和 5.1 之间的变化不是很大，所以很有可能，你确实有一个错误。Apple 通常会在出于这些原因拒绝时发送崩溃报告。

# java - Scala 抽象类翻译成 Java

> ID：10044222
> 
> 赞同：0
> 
> 时间：2012-04-06T13:34:07.370
> 
> 标签：java, scala, abstract-class

Scala 最近让我很头疼，因为我在 Internet 上找不到信息。很难找到信息，因为 Scala 用一组**无限**的术语定义了他自己的语言（我还不知道）。

我在 StackOverflow 上提出了一些关于 Scala 和 Java 之间转换的问题，在[最后一个问题](https://stackoverflow.com/questions/10033576/changing-an-application-core-built-in-java-to-scala-an-error-and-other-doubts)中我说我将放弃这种方法。但是，我想了解正在发生的事情。

想象一个 Scala 类：

```
abstract class Block(n: String) {

    require(n != null)
    val name = n

    var log: ArrayList[String]
    var inputs: ArrayList[Input[_]]
    var outputs: ArrayList[Output[_]]

    def newValue
} 
```

到目前为止，一切都很好。问题是：

我无法访问类字段（是的，我试过了`this.inputs()`）。可能是因为它是这样翻译的：

```
public abstract class pt.thesis.tiago.Block 
    extends java.lang.Object implements  scala.ScalaObject{

    public java.lang.String name();
    public abstract java.util.ArrayList log();
    public abstract void log_$eq(java.util.ArrayList);
    public abstract java.util.ArrayList inputs();
    public abstract void inputs_$eq(java.util.ArrayList);
    public abstract java.util.ArrayList outputs();
    public abstract void outputs_$eq(java.util.ArrayList);
    public abstract void newValue();
    public pt.thesis.tiago.Block(java.lang.String);
} 
```

为什么每一件事都是抽象的？我不能像 Java 一样，只有我想要的东西是抽象的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:27:43.750

关于学习 Scala 的材料，我仅仅阅读了 Martin Odersky（Scala 的创造者）、Lex Spoon 和 Bill Venners 的[Programming in Scala就学到了很多东西。](http://www.artima.com/shop/programming_in_scala)[此外，在docs.scala-lang.org](http://docs.scala-lang.org/)上有很多很好的信息，还有相当不错的[Tour of Scala](http://docs.scala-lang.org/tutorials/tour/tour-of-scala.html)。

关于术语，我不认为 Scala 发明了那么多术语。这些术语可能来自您不熟悉的语言（[Erlang](http://www.erlang.org/)、[Haskell](http://www.haskell.org/)、[ML](http://en.wikipedia.org/wiki/ML_%28programming_language%29)等）或在其他语言中没有得到大量讨论的概念，例如[类型理论](http://en.wikipedia.org/wiki/Type_theory)。

这里的一般原则是 Scala 是一种非常常规的语言。事实上，Martin 想让[它更简单、更规则](https://groups.google.com/d/topic/scala-language/PV4q6O1qIh8/discussion)。

在 Java 中，只有方法可以是抽象的。在 Scala 中，基本上类的任何成员都可以是抽象的。在 Scala 中，要使项目抽象，您可以省略它的定义。所以该语句`var log: ArrayList[String]`实际上创建了一个抽象变量，**而不是**一个用`null`. 是的，这与您对 Java 的期望不同。但它使 Scala 作为一个整体成为一种更常规的语言。

```
abstract class Foo {
  type SomeType               // abstract type

  val someVal: SomeType       // abstract val

  var someVar: SomeType       // abstract var

  def someMethod(v: SomeType) // abstract method
} 
```

如果您确实想创建一个初始化为 的字段`null`，请使用 对其进行初始化`_`。这将创建具体的变量而不是抽象的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T13:45:21.590

每件事都不是抽象的：名称不是抽象的。

事实上，由于它是一个抽象类，您可以有一些已声明但未定义的值，它们本身将被标记为抽象。因此，如果您不希望“输入”是抽象的，只需定义它们：

```
var inputs = ArrayList[Input[_]]() 
```

**编辑：**关于您在评论中的附加问题，您仍然可以使用默认值（将为空）：

```
abstract class Input[Type]{ 
  var value:Type = _; 
} 
```

看看[将“_”分配给scala中的字段是什么意思？](https://stackoverflow.com/questions/10040886/what-does-it-mean-assign-to-a-field-in-scala)以及更多信息的绝佳答案。

# forms - SilverStripe 表单不发送所有数据？

> ID：10044225
> 
> 赞同：0
> 
> 时间：2012-04-06T13:34:38.893
> 
> 标签：forms, silverstripe

大约两个月前，我将 SilverStripe 网站从 2.3.5 升级到 2.4.6。自升级以来，我网站上的某些表单不会将所有数据发送到提交功能（POST 条目为空），包括“系统”表单，例如管理员部分的忘记密码表单（我认为甚至管理员登录表单的密码字段）。我觉得奇怪的是，我有一个几乎相同（但代码不同）的表单具有相同的字段，它工作得很好，但即使复制该字段也不起作用。

这是工作表单及其提交代码：

```
function ContactUsForm() {
        // Create fields
        $fields = new FieldSet(
                        new HeaderField('Send Us a Message:', '2'),
                        new TextField('NAME', 'Full Name:'),
                        new EmailField('EMAIL', 'E-mail Address:'),
                        new TextField('PHONE', 'Phone:'),
                        new TextField('COMPANYNAME', 'Company Name:'),
                        new TextareaField('MESSAGE', 'Message/Note:'),
                        new TextField('HUMAN', '1+1 =')
        );

        // Create actions
        $actions = new FieldSet(
                        new FormAction('doContactUs', 'Submit')
        );

        return new Form($this, 'ContactUsForm', $fields, $actions);
    }

    function doContactUs($data, $form) {

        $human = $data['HUMAN'];
        if ($human == '2') {
            $from = 'contact@example.com';
            $to = 'contact@example.com';
            $subject = 'General Contact  Submission';
            $body = $data['NAME'] . ' has submitted a General Inquiry, their info: ' . $data['NAME'] . ' | ' . $data['EMAIL'] . ' | ' . $data['PHONE'] . ' | ' . $data['COMPANYNAME'] . ' and they have included the following note (if they included a note): ' . $data['MESSAGE'];
            $email = new Email($from, $to, $subject, $body);
            $email->send();

            Director::redirect('thankyou/');
        } else {
            $form->addErrorMessage('Message', 'Incorrect answer to the human check.','error');
            return Director::redirectBack();
        }
    } 
```

这是不起作用的表单及其提交代码：

```
function GenericContactForm() {

    global $contactmessage;

    // Create fields
    $fields = new FieldSet(
            new TextField('NAME', 'Full Name:'),
            new EmailField('EMAIL', 'Email:'),
            new TextField('TELEPHONE', 'Work Phone:'),
            new ListboxField(
                $name = "TYPEOFCONTACT",
                $title = "Office Type:",
                $source = array(
                "Single Person Office" => "Single Person Office",
                "Team Room" => "Team Room",
                "Open Plan" => "Open Plan"
                ),
                $value = 1
            ),
                    new TextField('HUMAN', '1+1 =')
    );

    // Create actions
    $actions = new FieldSet(
            new FormAction('doGenericContact', 'Submit')
    );

    return new Form($this, 'GenericContactForm', $fields, $actions);
}

function doGenericContact($data, $form) {
    $human = $data['HUMAN'];
    if ($human == '2') {
        $from = $data['EMAIL'];
        $to = 'contact@example.com';
        $subject = 'Contact Request';
        $body = 'The following individual has requested to be contacted: ' . $data['NAME'] . ' | ' . $data['EMAIL'] . ' | ' . $data['TELEPHONE'] . ' and they have made contact to inquire about the following: ' . $data['TYPEOFCONTACT'];
        $email = new Email($from, $to, $subject, $body);
        $email->send();

        Director::redirect('/thankyou/');
    } else {
        $form->addErrorMessage('Message', "Incorrect answer to the human check. (Your answer: $human)", 'error');
        return Director::redirectBack();
    }
} 
```

我已经尝试删除 ListboxField，因为这是我发现的唯一真正的区别。我还尝试通过删除提交函数中 if 语句的“真实”部分中的所有内容来在本地对其进行测试，它在本地工作，但在服务器上不工作，这让我相信这可能是 SilverStripe 中的某些内容和服务器设置（我对服务器的访问权限有限）。此外，这些表格在升级之前有效。

关于造成这种情况的任何想法，以及我能做些什么来解决它？

**编辑**- 进一步的故障排除发现非工作表单上的帖子数组中没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:52:24.693

事实证明，SilverStripe 2.4 处理模块的方式与 2.3 处理模块的方式是一个问题。我不是解决这个问题的人，所以我没有关于这个问题的详细信息，但是使模块符合 2.4 的预期已经解决了这个问题。

# ios - 自定义 UIPopoverBackgroundView：没有阴影

> ID：10044227
> 
> 赞同：16
> 
> 时间：2012-04-06T13:34:54.107
> 
> 标签：ios, uipopovercontroller

我已经使用这个很好的[教程](http://thinkvitamin.com/code/ios/customizing-the-design-of-uipopovercontroller/)来创建自定义 UIPopoverBackgroundView 类。

它运作良好。唯一的问题是我没有得到典型的 UIPopoverController 投影，我想要它。我尝试在我的 UIPopoverBackgroundView 实例层上指定它但没有成功。我的 UIPopoverController 实例似乎没有可操作的公共视图。将其添加到弹出内容中也不起作用。

可能真的很简单：**使用自定义 UIPopoverBackgroundView 类时如何添加阴影？**

*// UIPooverBackgroundView.m*

```
-(id)initWithFrame:(CGRect)frame{
    if (self = [super initWithFrame:frame]) {
        _borderImageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"bg-popover.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(CAP_INSET,CAP_INSET,CAP_INSET,CAP_INSET)]];

        _arrowView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg-popover-arrow.png"]];

        [self addSubview:_borderImageView];
        [self addSubview:_arrowView];

        self.layer.shadowOffset = CGSizeMake(50, 50);
        self.layer.shadowColor = [[UIColor blackColor] CGColor];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T04:41:26.540

您不需要添加自己的阴影。基地`UIPopoverBackgroundView`会为你做这件事。只要确保在您的`layoutSubviews`实现中调用 super 即可。

**编辑：**我的评论适用于针对 iOS 6 的应用程序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-06T13:55:48.137

好的，想通了。我需要将投影添加到`borderImageView`，而不是 popover 实例的视图。

```
- (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame]) {
        _borderImageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"bg-popover.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(CAP_INSET,CAP_INSET,CAP_INSET,CAP_INSET)]];

        _arrowView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg-popover-arrow.png"]];

        [self addSubview:_borderImageView];
        [self addSubview:_arrowView];

        _borderImageView.layer.cornerRadius = 5.0f;
        _borderImageView.layer.masksToBounds = NO;
        _borderImageView.layer.borderWidth = 1.0f;
        _borderImageView.layer.borderColor = [UIColor blackColor].CGColor;

        _borderImageView.layer.shadowColor = [UIColor blackColor].CGColor;
        _borderImageView.layer.shadowOpacity = 0.8;
        _borderImageView.layer.shadowRadius = 50;
        _borderImageView.layer.shadowOffset = CGSizeMake(-10.0f, 10.0f);
    }

    return self;
} 
```

# c++ - 从程序派生时提升 dataflow_exception

> ID：10044229
> 
> 赞同：0
> 
> 时间：2012-04-06T13:34:55.170
> 
> 标签：c++, qt, boost

我最近移植了一个 Qt 应用程序以直接使用 QTcpSockets 而不是 posix。我正在使用的渲染器有代码来启动视图应用程序，如果它还没有运行的话。使用我新重构的应用程序，如果应用程序在我运行渲染器之前启动，它似乎工作正常。但是，如果我在视图应用程序尚未运行的情况下启动渲染器，它将调用 fork 代码，并且程序通常会在渲染的中途崩溃。

```
Qt has caught an exception thrown from an event handler. Throwing
exceptions from an event handler is not supported in Qt. You must
reimplement QApplication::notify() and catch all exceptions there.

terminate called after throwing an instance of '
boost::archive::iterators::dataflow_exception'
  what():  attempt to decode a value not in base64 char set 
```

由于仅在使用 fork() 方法时才会引发此异常，所以我想知道它是否在重构中？我也相信只有在 Qt 应用程序从内部运行渲染器（启动查看器应用程序）时才会发生这种情况。当视图应用程序直接从渲染器分叉时，我看不到这个问题。我不确定 fork() 可能会导致此异常的原因。

```
int pid = fork();
if (pid != -1)
{
    if (!pid)
    {
        // Child process executes the following after forking.
    char arg1[] = "piqsl";
    char arg2[] = "-i";
    char arg3[] = "127.0.0.1";
    char* argv[4] = {arg1, arg2, arg3, NULL};
    // TODO: need to pass verbosity level for logginng
    signal(SIGHUP, SIG_IGN);
    nice(2);
    execvp("piqsl",argv);
... 
```

重构后的查看器应用程序的唯一区别是它使用 QTcpSockets（和 QTcpServer）并且现在链接到 libQNetwork。这个库现在是否会对 boost 造成干扰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:02:21.757

问题是 fork() 创建了原始进程的精确副本，包括所有打开的文件句柄。Qt 似乎使用一些管道/套接字进行内部通信，并且由于这些是分叉进程中的*相同*管道/套接字，它们与原始进程冲突。

改用 exec() 可能会更好——据我所知，没有办法在分叉后安全地重新实例化 QApplication。或者，如果您在创建 QApplication*之前分叉，它应该可以工作。*

# c++ - CreateProcess 未处理的错误

> ID：10044230
> 
> 赞同：6
> 
> 时间：2012-04-06T13:35:03.753
> 
> 标签：c++, winapi, access-violation, createprocess, unhandled-exception

我正在阅读 C++ 中的 CreateProcess 函数，我想尝试一下。代码的基本思想是让我的主要执行另一个进程（记事本）。真的，这只是基本代码。当我运行程序时，我得到：

> createprocess.exe 中 0x752bb763 处的第一次机会异常：0xC0000005：访问冲突写入位置 0x00be57b8。
> createprocess.exe 中 0x752bb763 处的未处理异常：0xC0000005：访问冲突写入位置 0x00be57b8。

当我为错误发生的位置设置断点时，我被带到 tidtable.c（我猜这是用于访问线程）。特别是在 tidtable.c 中， `CRTIMP PFLS_GETVALUE_FUNCTION __cdecl __set_flsgetvalue()` 我真的不知道什么或如何避免这个问题。错误发生在 CreateProcess 调用中（即，它从不输出“out of create”）。

我的代码是：

```
#include "stdafx.h"
#include <stdio.h>
#include <windows.h>
#include <strsafe.h>
#include <direct.h>
#include <string.h>
#include <conio.h>

int main(VOID)
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

        //allocate memory
    ZeroMemory(&si, sizeof(si));
si.cb = sizeof(si);
ZeroMemory(&pi, sizeof(pi));

fprintf(stderr, "This is just a test");

//create child process
if (!CreateProcess(NULL,
    L"C:\\Windows\\Notepad.exe",
    NULL,
    NULL,
    FALSE,
    0,
    NULL,
    NULL,
    &si,
    &pi))
{
        fprintf(stderr, "create process failed");

        return -1;
}
fprintf(stderr, "out of create");

    //parent waits for child to complete
WaitForSingleObject(pi.hProcess, INFINITE);

fprintf(stderr, "after wait");

printf("Child Complete");

    //close handle
CloseHandle(pi.hProcess);
//  CloseHandle(pi.hthread);

} 
```

如果有人知道如何克服这个问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-06T13:44:17.707

问题是[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数的第二个参数是输入/输出参数。

如果你像你一样将它指定为字符串，它是一个常量字符串，并且调用它时的函数无法写入内存位置，因此你有内存访问冲突。正确的方法是这样调用你的函数：

```
LPTSTR szCmdline = _tcsdup(TEXT("C:\\Windows\\Notepad.exe"));

//create child process
if (!CreateProcess(NULL,
    szCmdline,
    NULL,
    NULL,
    FALSE,
    0,
    NULL,
    NULL,
    &si,
    &pi))
{
    fprintf(stderr, "create process failed");

    return -1;
} 
```

您可能还想阅读[这篇博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2009/06/01/9673254.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:46:51.883

The 2nd arg to CreateProcess cannot be const or a literal string because the func attempts to modify the string. Copy the literal to a local array and then pass that as the 2nd arg.

# c# - 启动进程：控制台应用程序和 WebService 之间的区别

> ID：10044233
> 
> 赞同：0
> 
> 时间：2012-04-06T13:35:16.647
> 
> 标签：c#, asp.net, web-services

我想运行一个带有命令行参数的 GUI 程序，该程序通过添加一些 xml 标签来处理文本。所以文本必须在文件系统上，并且 xml 在同一目录中创建。我尝试了两个：控制台应用程序和 Web 服务。为什么WS不起作用？我该如何调试它？

此代码按我的意愿工作：

```
using System.Diagnostics;
using System.IO;

namespace ConsoleApplication1
{
  class Program
  {
    private static void ExecuteConsoleApp(string filepath)
    {
      string dir = @"E:\temp\";

      ProcessStartInfo startInfo = new ProcessStartInfo();
      startInfo.FileName = dir + @"App.exe";
      startInfo.Arguments = "EN /R /U /F\"" + filepath + "\"";

      Debug.WriteLine(startInfo.FileName + " " + startInfo.Arguments);

      using (Process exeProcess = Process.Start(startInfo))
      {
         exeProcess.WaitForExit(5000); // Wait a while
         exeProcess.Kill(); // Then kill 
      }
    }

    static void Main(string[] args)
    {
      ExecuteConsoleApp(@"E:\temp\temp.txt");
    }
  }
} 
```

为什么这个没有？我的意思是该进程是在 Session ID=0 中创建的，但没有 GUI 也没有 xml：我不知道发生了什么......

```
using System.IO;
using System.Diagnostics;
using System.ServiceModel.Activation;

namespace WCF_Exalead
{
  [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
  public class Service : IService
  {
    public void GetXml()
    {
      ExecuteConsoleApp(@"E:\temp\temp.txt");
    }

    private static void ExecuteConsoleApp(string filepath)
    {
      string dir = @"E:\temp\";

      ProcessStartInfo startInfo = new ProcessStartInfo();
      startInfo.FileName = dir + @"App.exe";
      startInfo.Arguments = "EN /R /U /F\"" + filepath + "\"";

      Debug.WriteLine(startInfo.FileName + " " + startInfo.Arguments);

      using (Process exeProcess = Process.Start(startInfo))
      {
         exeProcess.WaitForExit(5000); // Wait a while
         exeProcess.Kill(); // Then kill 
      }
    }
  }
} 
```

更新：两者运行的唯一区别是 App.exe 在第一个代码中运行 SessionID=1，而第二个代码在 SessionId=0 下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:43:55.173

Web 服务不是这样工作的。“Web 服务”和“Windows 服务”的名称确实非常相似，但它们是截然不同的应用程序类型。

Web 服务没有 UI。它是一个位于 Web 服务器上并公开方法的应用程序。您可以使用各种通信协议（例如 SOAP）通过 http 调用这些方法，它们将返回数据。

如果您愿意，本文将解释如何使用 Web 服务。[Web 服务简介](http://blog.psychocoder.net/2011/04/03/introduction-to-net-web-services/)

# javascript - 我在哪里可以让客户端编辑 JSON 文件？

> ID：10044239
> 
> 赞同：2
> 
> 时间：2012-04-06T13:35:53.067
> 
> 标签：javascript, jquery, html, json

如果我的客户不习惯手动编辑驱动其数据的 JSON 文件，那么让他们编辑 JSON 文件的最佳方法是什么？一个跨平台的应用程序可以工作，或者一个看起来不像是在一夜之间拼凑起来的网站。

就此而言，任何看起来专业和现代的东西都是他们所寻找的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:40:16.587

如果您的客户对编辑 JSON 感到不舒服，那么我会质疑给他们一个 GUI 来编辑 JSON 是否会有所帮助。也许他们需要一个适当的 GUI，例如“编辑首选项”或“新 Foobar 向导”。只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:38:13.683

[http://jsoneditor.net/](http://jsoneditor.net/)

它有一个简单但有效的图形界面来添加/更新/删除节点

# macos - Mac 上的 CMake GUI

> ID：10044251
> 
> 赞同：28
> 
> 时间：2012-04-06T13:36:46.473
> 
> 标签：macos, cmake, macports

我找不到在哪里可以获得`CMake`on的 GUI 工具`MacOSX`。我在网上看到了对它的引用，但没有别的。我开始`CMake`使用`MacPorts`，但在 Windows 上我习惯使用 GUI。

它是否存在于 Mac 上，我在哪里/如何获得它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-15T10:54:52.870

您需要安装 gui 变体：

```
sudo port install cmake +gui 
```

您可能需要先运行 sudo port uninstall cmake。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2021-03-11T10:40:10.350

`Cask`现在已经过时了。您可以`cmake`使用以下方式安装：

```
brew install --cask cmake 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-09-01T09:31:32.283

尝试使用 brew cask 安装 cmake GUI

```
brew cask install cmake 
```

如何安装酿造桶

1.  先安装 Homebrew[如何安装 Homebrew](https://brew.sh)
2.  使用命令添加 brew cask`brew tap caskroom/cask`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T13:41:54.463

这里是：

[http://www.cmake.org/cmake/resources/software.html](http://www.cmake.org/cmake/resources/software.html)

额外的插件将由它们自己的扩展导入，因此不需要操作系统兼容性；）

# c# - DataComboBox SelectedValue 属性

> ID：10044253
> 
> 赞同：0
> 
> 时间：2012-04-06T13:36:51.207
> 
> 标签：c#, winforms, data-binding

我有一个“表单”，它们是 DataComboBox 并且是数据绑定的。当用户单击 DataComboBox 时，DataGridView 会以 POPUP 形式出现，其中包含绑定数据。

```
DataComboBox1.TblData = getTable;// get data contains datasource
DataComboBox1.ValueColumn = "GroupName";
DataComboBox1.ColumnNameList = "AccountGroupID|GroupName|ParentGroup|AlternateGroupName|Annex"; 
```

现在在表单加载上，我想将 DataComboBox 的 SelectedVlaue 属性设置为某个数值。

为此，我正在编写以下代码。

```
DataComboBox1.SelectedValue = Convert.ToInt32(DtData.Rows[0]["AccountGroupID"]);   
// DtData.Rows[0]["AccountGroupID"] contains value "2"; 
```

但上面的代码不起作用，因为 SelectedValue 属性显示空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:48:35.347

Can you try this?

```
DataComboBox1.SelectedText = Convert.ToInt32(DtData.Rows[0]["AccountGroupID"]).toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:18:19.373

由于我不确定 a`DataComboBox`是什么，你可以试试这个：

```
DataComboBox1.SelectedValue = (DataComboBox1.TblData != null) &&
   (DataComboBox1.TblData.Count > 0) ? DataComboBox1.TblData[0] : null; 
```

# clojure - 有反向映射功能吗？

> ID：10044254
> 
> 赞同：4
> 
> 时间：2012-04-06T13:36:52.007
> 
> 标签：clojure

在 clojure 中，您可以将函数映射到值序列。是否有一个内置函数可以将单个值作为参数映射到一系列函数？

```
(map inc [1 2 3 4])
; -> (2 3 4 5)

(reverse-map [inc dec str] 1)
; -> (2 0 "1")

(reverse-map [str namespace name] :foo/bar/baz)
; -> (":foo/bar/baz" "foo/bar" "baz") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T14:19:04.197

有`juxt`一点类似。它接受许多函数并返回一个，将其参数传递给每个函数并返回一个返回值向量。所以：

```
> ((apply juxt [inc dec str]) 1)
[2 0 "1"] 
```

主要区别在于它创建了一个向量，当然是急切的（即不懒惰）。原始`map`创建的序列是懒惰的。

`juxt`也适用于具有超过 1 个参数的函数：

```
> ((apply juxt [* / -]) 6 2)
[12 3 4] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T14:00:39.237

不确定是否有，但它很容易实现：

```
(def reverse-map (fn [l value] (map #(% value) l))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T15:48:47.990

如果不需要懒惰，我会说使用并列，特别是因为它的作曲能力。但是，使用 map 和 repeat 的多元函数的反向映射的简单版本，两者都是惰性的，看起来像这样：

```
(defn reverse-map
  [fcoll & args]
  (map apply fcoll (repeat args)))

=> (reverse-map [inc dec str] 1)
(2 0 "1")
=> (reverse-map [* / -] 6 2)
(12 3 4) 
```

好的，只是提出一个想法，这是一个具有与 juxt 相同的可组合性的版本。它甚至看起来[很懒惰](https://stackoverflow.com/questions/10049925/any-merit-to-a-lazy-ish-juxt-function)！

```
(defn lazy-juxt
  [& funs]
  (fn [& args]
    (map apply funs (repeat args))))

=> ((juxt inc dec str) 1)
[2 0 "1"]
=> ((lazy-juxt inc dec str) 1)
(2 0 "1")

=> ((juxt * / -) 6 2)
[12 3 4]
=> ((lazy-juxt * / -) 6 2)
(12 3 4) 
```

# javascript - 抓取简单的javascript页面

> ID：10044256
> 
> 赞同：0
> 
> 时间：2012-04-06T13:37:05.373
> 
> 标签：javascript, screen-scraping, web-scraping, w3m

我想抓取该网站（[http://www.oddsportal.com/matches/soccer](http://www.oddsportal.com/matches/soccer)）的数据，以便以这种方式获取包含比赛信息和赔率信息的纯文本文件：

```
00:30   Criciuma - Atletico-PR                    1:2   2.70    3.24    2.41    
10:45   Vier-und Marschlande - Concordia Hamburg  0:0   4.00    3.53    1.68    
10:45   Germania Schnelsen - ASV Bergedorf 85     2:3   1.95    3.37    3.23    
10:45   Barmbecker SG - Altona                    0:2   3.67    3.37    1.82 
```

我曾经用 w3m 做到这一点，但现在似乎他们将 html 更改为 javascript 并且 w3m 不起作用。数据仅包含在一个 div 中。这是一个条目

```
<tr xeid="862487"><td class="table-time datet t1333724400-1-1-0-0 ">17:00</td><td class="name table-participant" colspan="2"><a href="/soccer/italy/serie-b-2011-2012/brescia-marmi-lanza-verona-862487/">Brescia - Verona</a></td><td class="odds-nowrp" xoid="40456791" xodd="xzc0fxzxa">-</td><td class="odds-nowrp" xoid="40456793" xodd="cz0ofxz9c">-</td><td class="odds-nowrp" xoid="40456792" xodd="cz9xfcztx">-</td><td class="center info-value">17</td></tr> 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T19:11:56.720

最简单的方法（虽然可能不是最好的）是使用 selenium/watir。在红宝石中，我会这样做：

```
require 'watir-webdriver'
require 'csv'
@browser = Watir::Browser.new
@browser.goto 'http://www.oddsportal.com/matches/soccer/'
CSV.open('out.csv', 'w') do |out|
    @browser.trs(:class => /deactivate/).each do |tr|
        out << tr.tds.map(&:text)
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:13:19.847

如果他们使用 Javascript 从服务获取数据并将其呈现在 DIV 中，W3M 将不会显示使用该数据更新的 div，因为它不支持 Javascript。

你有两个选择：

*   对他们的 Javascript 进行逆向工程以找出数据的来源，并查看您是否可以直接查询该数据源以获取他们用于更新 DIV 的 XML 或 JSON。然后你可以完全跳过抓取。但是，他们可能不希望您这样做，并且可能已经保护了数据源以防止它发生。或者他们可能没有。

*   在开始抓取之前使用执行 Javascript 的浏览器。这样，您将使用数据填充 div。[W3M-js](http://www2u.biglobe.ne.jp/~hsaka/w3m/#js) *可能会*为您执行此操作，或者您可能想尝试其他方法（lynx 或[links](http://links.twibright.com/)）。[这个问题](https://stackoverflow.com/q/764624/306084)似乎是相关的。

ETA：也许[PhantomJS](http://www.phantomjs.org/)会在这里提供帮助？

# objective-c - 将 base64string 转换为 UIImage

> ID：10044262
> 
> 赞同：1
> 
> 时间：2012-04-06T13:37:51.157
> 
> 标签：objective-c

我有图像 base64 字符串，所以请告诉我如何将 base64string 转换为 UIImage。我正在使用以下代码，但它不起作用。

```
NSString *base64String=[NSString stringWithFormat:@"%@",[objDIC objectForKey:@"signDriver"]];
NSURL *url = [NSURL URLWithString:base64String];    
NSData *imageData = [NSData dataWithContentsOfURL:url];
UIImage *ret = [UIImage imageWithData:imageData]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:32:34.907

从 Matt Gallagher [Cocoa With Love](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)网站获取代码。转到部分：“在 iPhone 上处理 Base64”、“解码 Base64”。

[向 Apple提交错误报告](https://bugreport.apple.com/)，要求添加 base64 支持，我有，Apple 将其添加到 SDK 的机会越大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:45:08.920

[NSData dataWithContentsOfURL:url] 期望得到一个 file: URL 指向磁盘上的一个文件，该文件具有 UIImage（实际上是 Core Graphics）知道如何打开的格式的给定图像。

您已经将图像数据存储在 base64String 中，因此您应该能够使用 dataUsingEncoding 从字符串中获取数据。

# delphi - TVirtualStringTree 和垂直滚动无法正常工作

> ID：10044265
> 
> 赞同：6
> 
> 时间：2012-04-06T13:37:52.543
> 
> 标签：delphi, scroll, virtualtreeview, tvirtualstringtree

我已经学会了如何使用 TVirtualStringTree，我发现它非常棒。我有一个名为 PackedList 的自定义非可视列表，它由另一个线程填充。我想实时显示 TVirtualStringTree 中的所有列表内容。所以我在主窗体上放了一个计时器，每 500 毫秒更新一次 HexLog（即 TVirtualStringTree）的 RootNodeCount。

我所有的数据都出现在 VirtualStringTree 上，而且我没有任何速度问题，非常好。但是垂直滚动条存在一个问题。当我在控件上按 Ctrl+End 以跳转到列表的末尾时，它会转到中间的某个位置。同样，当我将滚动条拖到最后时，它不会走到最后。但是 HexLog 知道 DataCount。为什么不跳到最后？如果我按几次 Ctrl+END 则它会到达末尾。

在定时器例程里面，我想说 HexLog 通过代码跳转到列表的末尾。我该怎么做以及如何正确处理垂直滚动条？

```
procedure TMainForm.StatusUpdateTimerTimer(Sender: TObject);
begin
   if (FirpList.ComOperationCount > 0) and (PacketList.Items.Count <> FirpList.ComOperationCount) then
    begin
      HexLog.RootNodeCount := PacketList.Items.Count;
    end;
end;

procedure TMainForm.HexLogMeasureItem(Sender: TBaseVirtualTree;
  TargetCanvas: TCanvas; Node: PVirtualNode; var NodeHeight: Integer);
begin
  if Sender.MultiLine[Node] then
  begin
    TargetCanvas.Font := Sender.Font;
    NodeHeight := HexLog.ComputeNodeHeight(TargetCanvas, Node, 1, FirpList.ComOperations[Node^.Parent^.Index].DataAsHexString(FAppSettings.HexLogColumnCharWidth) + #13#10);
  end;
end; 
```

![HexLog的外观](../Images/9409240477e09e6197d596079376bc36.png)

TLama 建议的回复无法正常工作，请参阅图片以获取说明： ![TLama 解决方案不起作用](../Images/8bfc98bf3a165e58f8e273a51648e07e.png)

有关详细图像说明，请参见该链接：http: [//i43.tinypic.com/1445thi.png](http://i43.tinypic.com/1445thi.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:26:51.323

要跳到树的末端，请调用`ScrollIntoView(GetLast)`。

要滚动到特定节点，控件需要将所有先前节点的高度相加，以便确定正确的偏移量。

您的节点具有不同的高度。如果您没有在某处初始化节点的实际高度，则控件会将该`DefaultNodeHeight`属性用于任何未初始化的节点。看起来该高度比树中的任何实际节点高度都短，因此控件最终计算出一个小于预期的偏移量，并滚动到那里而不是您想要的位置。

确保您正在处理该`OnMeasureItem`事件，并且您`toVariableNodeHeight`在`Options.MiscOptions`. 如果你不这样做，那么控件将只使用当前为每个节点分配的高度，并为任何未初始化的节点使用默认高度。

`NodeHeight`如果您手动分配而不是设置`toVariableNodeHeight`和处理，您可以获得您在此处报告的行为`OnMeasureItem`。

# java - 应用程序不通过串口发送任何东西

> ID：10044269
> 
> 赞同：1
> 
> 时间：2012-04-06T13:37:59.737
> 
> 标签：java, swing, netbeans, serial-communication

基于 RXTX 网站的示例，我使用 GUI 构建了以下应用程序。唯一的问题是它实际上并没有向串行设备发送任何内容。我没有包含任何与 Swing GUI 相关的自动生成的代码。

```
import gnu.io.*;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.logging.Level;
import java.util.logging.Logger;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Daniel
 */
public class ComForm extends javax.swing.JFrame {

    /**
     * Creates new form ComForm
     */
    public ComForm() {
        super();
        initComponents();
    }

    void connect ( String portName ) throws Exception
    {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
        if ( portIdentifier.isCurrentlyOwned() )
        {
            System.out.println("Belea: Portu-i folosit!");
        }
        else
        {
            CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

            if ( commPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                inputStream = serialPort.getInputStream();
                outputStream = serialPort.getOutputStream();
                open = true;
            }
            else
            {
                System.out.println("Belea: Numa porturi seriale!");
            }
        }     
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")

    private void sendButtonActionPerformed(java.awt.event.ActionEvent evt) {
        String c = this.sendField.getText();

        if (open == true) {
            try {
                System.out.println(c);
                outputStream.write(c.getBytes()); //write to serial port
            } catch ( Exception e ) {
                e.printStackTrace();
            }
        }

    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        if(open == false)
        {
            try {
                connect("COM3");
            }
            catch ( Exception e ) {
                e.printStackTrace();
            }
            if(open == true)
            {
                this.jLabel3.setText("CONECTAT!");
                this.jButton1.setEnabled(false);
                this.sendButton.setEnabled(true);
                this.sendField.setText("");
            }
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ComForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JButton sendButton;
    private javax.swing.JTextField sendField;
    // End of variables declaration
    private String portName;
    private CommPort commPort;
    private SerialPort serialPort;
    private CommPortIdentifier portIdentifier = null;
    private InputStream inputStream;
    private OutputStream outputStream;
    private boolean open=false;

} 
```

# visual-studio-2010 - VS2010：输出窗口不显示调试输出，直到我摆弄它

> ID：10044270
> 
> 赞同：0
> 
> 时间：2012-04-06T13:38:05.913
> 
> 标签：visual-studio-2010, ide

我的系统上刚刚开始出现一个奇怪的问题（是的，我已经尝试重新启动）。

当我在调试器下运行 C# 程序时，“输出”窗口中的“显示输出：”下拉菜单会自动更改为“调试”（就像它一直都有的那样）。

但是现在，输出窗口是空的！它应该有一堆 Debug.WriteLine() 东西。

如果我现在从“显示输出：”下拉列表中选择不同的选项，然后重新选择“调试”，则输出正确显示 - 它一直隐藏在那里。

这很烦人 - 有没有其他人发生过这种情况？

就在昨天，我安装了 Visual Studio 11 beta，我目前怀疑这可能是原因。我没有更改系统上的任何其他内容。哦，我昨天也安装了NLog。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:56:46.977

回答我自己的问题：

这个问题与 Visual Studio 2012 beta 无关！

它实际上是用于代码合同的 C# (v1.4.40602.0) 的 Visual Studio 编辑器扩展（来自[http://visualstudiogallery.msdn.microsoft.com/85f0aa38-a8a8-4811-8b86-e7f0b8d8c71b/](http://visualstudiogallery.msdn.microsoft.com/85f0aa38-a8a8-4811-8b86-e7f0b8d8c71b/)）

当我卸载它时，问题就消失了。

# css - 防止固定标题使用 CSS 隐藏文本

> ID：10044271
> 
> 赞同：1
> 
> 时间：2012-04-06T13:38:10.893
> 
> 标签：css, layout

给定`<div id='pageheader'>`，使用以下 CSS：

```
#pageheader { position: fixed; top: 0px; width: 100%; height: 35px; }
body { margin-top: 35px; } 
```

我有一个固定在页面顶部的标题。问题是当用户单击指向同一页面另一部分的链接时，链接的目标出现*在*标题下方。我不知道如何防止这种情况。

**编辑：**我最终使用 JQuery 为内部链接提供平滑滚动，从而消除了这个问题。

```
$("span.sect1, span.sect2").click(function(){
    var target = '#' + $(this).find("a").attr('href').match(/#(.*)$/)[1];       
    var position = $(target).offset();
    $('html, body').animate({scrollTop: (position.top -40)}, "slow");
});
$("a.xref").click(function(){
    var target = '#' + $(this).attr('href').match(/#(.*)$/)[1];     
    var position = $(target).offset();
    $('html, body').animate({scrollTop: (position.top -40)}, "slow");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:40:09.127

您之前可能在哪里：

```
<h1 id="target">Get here with #target</h1> 
```

尝试这个：

```
<h1><a id="target" style="position: relative; top: -35px;"></a>Get here with #target</h1> 
```

# java - 将 lambdaj 与 String.matches 方法一起使用

> ID：10044274
> 
> 赞同：3
> 
> 时间：2012-04-06T13:38:15.227
> 
> 标签：java, hamcrest, lambdaj

如何过滤`Collection<String>`使用 lambdaj 和 String.matches 方法。
我是 lambdaj 的新手并且感觉很愚蠢，因为给出的例子比这更复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:13:59.720

如果可以使用`having(on(...))`构造来完成，调用可能如下所示：

```
select(collection, having( on(String.class).matches("f*") )) 
```

但不幸的是，这是不可能的，因为`String`该类是最终的，因此`on(String.class)`无法创建`having`匹配器所需的代理。

尽管 hamcrest 没有带来**正则表达式匹配器**，但您不必自己编写。网络提供了几种实现方式。我希望在现成的公共库中看到这样的匹配器，我可以简单地将其包含为依赖项，而不必复制源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:01:30.720

如果要过滤集合，可以按如下所述进行：

```
@Test
public void test() {
    Collection<String> collection =  new ArrayList<String>();
    collection.add("foo");
    collection.add("bar");
    collection.add("foo");

    List<String> filtered = select(collection, having(on(String.class), equalTo("foo")));
    assertEquals(2, filtered.size());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:09:49.777

这行得通，但我不高兴需要这么多代码来替换一个简单的 for 循环。我更喜欢“过滤器”而不是“选择”，因为我认为它使代码更简单，更容易阅读。

```
 public Collection<String> search(String regex) {
    List<String> matches = filter(matches(regex), dictionary);
    return matches;
  }

  static class MatchesMatcher extends TypeSafeMatcher<String> {

    private String regex;

    MatchesMatcher(String regex) {
      this.regex = regex;
    }

    @Override
    public boolean matchesSafely(String string) {
      return string.matches(regex);
    }

    public void describeTo(Description description) {
      description.appendText("matches " + regex);
    }

  }

  @Factory
  public static Matcher<String> matches(String regex) {
    return new MatchesMatcher(regex);
  } 
```

# algorithm - 更快的算法

> ID：10044275
> 
> 赞同：1
> 
> 时间：2012-04-06T13:38:16.927
> 
> 标签：algorithm

有人告诉我写一个算法如下 三个数组 A[],B[],C[] 大小相同 N.找出所有可能的 (i,j,k) 使得 A[i]+B[j ]=C[k]。允许的最大时间复杂度为 O(N^2)。以下是我为 O(N^2) 编写的算法

```
#include<stdio.h>

#define MAX 1000

struct sum
{
        int result;
        int i;
        int j;
};

int main()
{
        struct sum sum_array[MAX];
        int n=4;
        int a[] = {4,1,2,5};
        int b[] = {1,7,6,0};
        int c[] = {11,3,8,2};
        int k;
        int i,j;
        for(i=0;i<MAX;i++)
                sum_array[i].result=-1;
        for(i=0;i<n;i++)
        {
                for(j=0;j<n;j++)
                {
                        sum_array[a[i]+b[j]].result=a[i]+b[j];
                        sum_array[a[i]+b[j]].i=i;
                        sum_array[a[i]+b[j]].j=j;
                }
        }
        for(k=0;k<n;k++)
        {
                if(sum_array[c[k]].result==c[k])
                {
                        printf("<i,j,k> = <%d,%d,%d>\n",sum_array[c[k]].i,sum_array[c[k]].j,k);
                }
        }
        return 0;
} 
```

我的问题是如何更快地做到这一点？有任何 O(N*logN) 或更好的算法吗？

问候， 阿尔卡

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:43:30.793

最大答案的大小为 N^3，因此无法实现更好的复杂性。举这个例子 A={1,1,1,1,1,1,1} , B = {1,1,1,1,1,1} C = {2,2,2,2,2,2对于上面的例子，你的方法不会输出所有可能的三元组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:08:14.893

如果您正在寻找一种组合或只是这种组合的数量，那么：

设`MAX`为数组`A`, `B`,中的最大元素`C`。我的解决方案是`O(MAX log(MAX))`。

**我只是在描述没有细节的想法。**

让=数组`A_count[x]`中的元素数。为和 计算这样的数组。 它可以在线性时间内完成。`x``A`
`A``B``C`

`A_count`将数组`B_count`视为`C_count`多项式。如果有那么`A[i] + B[j]`总和（乘以多项式）有！= 0。`X``A_count * B_count``coefficient[X]`

所以现在想法很简单。计算`A_count * B_count`它们的系数并将其与 的系数进行比较`C_count`。`A_count * B_count`可以`O(MAX log(MAX))`使用 [离散傅里叶变换](http://en.wikipedia.org/wiki/Discrete_Fourier_transform#Polynomial_multiplication)进行计算。

@edit，示例

```
int A[] = {4,1,2};
int B[] = {1,0};
int C[] = {3,8,2}; 
```

让我们计算 A_count、B_count、C_count

```
 0, 1, 2, 3, 4, 5, 6, 7, 8
int A_count[] = {0, 1, 1, 0, 1};
int B_count[] = {1, 1}; 
int C_count[] = {0, 0, 1, 1, 0, 0, 0, 0, 1} 
```

现在让我们计算 A_count * B_count。简单的乘法算法：

```
for(int i=0; i<A_count_SIZE; i++)
    for(int j=0; j<B_count_SIZE; j++)
        mult_result[i+j] += A_count[i] * B_count[j]; 
```

但它可以更快地完成（通过[离散傅里叶变换](http://en.wikipedia.org/wiki/Discrete_Fourier_transform#Polynomial_multiplication)）。

```
int mult_result[] = {0, 1, 2, 1, 1, 1} 
```

代表着：

```
1 pair sums to 1
2 pairs sums to 2
1 pair sums to 3
1 pair sums to 4
1 pair sums to 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:42:56.957

我认为您不会找到比 O(N ² ) 更快的方法，因为您必须为每个 B 遍历所有 A 以获得所有数组元素的总和。仅此一项就是 O(N ² )，阻止您更快地获得任何东西。

编辑：虽然，有一些优化要做。例如，您设置`sum_array[a[i]+b[j]].result = a[i]+b[j]`. 稍后您测试密钥是否等于结果。怎么可能是平等的呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T18:05:58.417

如果你想找到三元组 (i,j,k) 的存在使得`A[i]+B[j]=C[k]`，那么它可以在 中完成`O(n^2 logn)`。此外，您可以使用此方法找到此类三元组的计数。

*   制作一个新数组`D[]`，以`D`保存每对可能的`A`和的总和`B`。这将使 D = n^2 的大小。
*   对数组 C 进行排序。现在，对于数组`binary search`中的所有值。时间复杂度为。`D``C``O(n^2 logn)`

要计算三胞胎的数量，

*   仅当该值存在于（可以使用下界函数返回的索引进行检查）时，才查找该值的`lower bound`和。`upper bound``C[]``D``D`

    计数 += 上界索引 - 下界索引；

这个时间复杂度也是`O(n^2 logn)`。

# ruby-on-rails - 使用自定义类和 simple_form 创建记录

> ID：10044283
> 
> 赞同：0
> 
> 时间：2012-04-06T13:38:45.853
> 
> 标签：ruby-on-rails, ruby

我有这个模型：

```
class User < ActiveRecord::Base
  # abstract
end

class Company < User

end

class Person < User

end 
```

如何通过选择类型创建表单？

```
<%= simple_form_for(@user) do |f| %>
    <%# I would like to have a selector of classes ["Company","Person"] %>
    <%= f.input :type %>
    <%= f.input :name %>
<% end %> 
```

在controleur中，我应该写什么代码？

```
@user = User.new(params[:user]) # Pb params[:user][:type] have no effect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:04:58.270

This is about as concise as you could make it:

```
@@classmap = { :person => Person, :company => Company }
@@Classmap[params[:user].delete :type].new(params[:user]) 
```

DO NOT convert `params[:type]` directly to a class name. That's a security hole waiting to be exploited.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:45:26.483

您不能批量分配类型属性。你可以这样做：

```
type = params[:user].delete :type
@user = User.new(params[:user])
@user.type = type
@user.save 
```

# php - Joomla 2.5 添加父别名作为正文类

> ID：10044285
> 
> 赞同：1
> 
> 时间：2012-04-06T13:38:48.533
> 
> 标签：php, joomla, joomla2.5

自 Joomla 1.5 以来代码发生了变化，这是我的尝试：

在头上

```
<?php $parent = JFactory::getApplication()->getMenu()->getParent(); ?> 
```

在身体标签上

```
<body class="<?php echo $parent->alias; ?>"> 
```

知道出了什么问题...？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:39:59.963

找到你的帖子然后找到了这个，我认为它完美地回答了它，至少它对我有用

[http://www.joomla4web.com/blog/finding-the-top-menu.html](http://www.joomla4web.com/blog/finding-the-top-menu.html)

```
 $menu = JFactory::getApplication()->getMenu();
$active = $menu->getActive();
$top = $active ? $menu->getItem($active->tree[0]) : null;
echo $top->alias; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:52:42.733

我在用：

```
<?php
$menu =& JSite::getMenu();
$active = $menu->getActive();
$class = extractpath($active->route);
function extractpath($string){
preg_match('/^[a-zA-Z0-9\-_]+/',$string,$m);
return $m[0];
}

?>
<body<?php if ($class) echo ' class="' . $class . '"'; ?>> 
```

# javascript - jQuery 灯箱表现得像下拉菜单？太复杂？有没有简单的方法？

> ID：10044292
> 
> 赞同：-3
> 
> 时间：2012-04-06T13:39:32.473
> 
> 标签：javascript, jquery, drop-down-menu, lightbox

现在我在想一些像下拉菜单但在新窗口或灯箱中打开的东西，当您选择某些内容时，所选项目的 id 存储在主页上，您可以从该主页打开此框而无需重新加载...是有可能吗？首先，我想做一个带有背景图像的下拉列表，但后来我发现它很复杂，并且在下拉选项中我没有足够的空间来清楚地看到我想要显示的内容。那么有什么想法吗？有什么插件吗？如果可能的话，我需要一个跨浏览器解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:06:03.450

首先去尝试从[这里](http://fancybox.net/api)阅读文档，然后以这种方式实现：

```
$('.SomeLink').fancybox({
    onClosed: function() { 
        var id= $('#targetWindow')[0].contentWindow.targetFunction(); 
    }
}); 
```

# mysql - 带参数的 MySQL 条件 INSERT

> ID：10044293
> 
> 赞同：1
> 
> 时间：2012-04-06T13:39:45.757
> 
> 标签：mysql, insert

我正在创建一个存储过程来将值插入四个表中。重点是将 SQL 从 PHP 中取出以防止 SQL 注入并更好地定义用户拥有的权限，即，而不是被允许无限制地访问`INSERT`、`SELECT`和语句，他们只被允许运行他们需要插入的过程传递的变量。`ALTER``DELETE`

但是，如果一个玩家已经存在，那么就没有必要再次添加它（考虑到我已经让它独一无二了，这是不可能的）。出现问题是因为玩家表和坐标表之间存在一对多的关系。

所以我想要的是一个条件`INSERT`来测试该值是否已经存在以及它是否确实进入下一个`INSERT`语句。

这是存储过程：

```
CREATE PROCEDURE `acdb_extended`.`addAlliedMember` (IN accountNumber VARCHAR(255),
    IN userName VARCHAR(255), IN serverInitial CHAR(1), IN galaxy TINYINT(2),
    IN region TINYINT(2), IN system TINYINT(2), IN astro TINYINT(2), IN level TINYINT(2),
    IN allianceName VARCHAR(255))
BEGIN
    INSERT INTO player (account_number, username)
    VALUES (accountNumber, userName);

    INSERT INTO coordinates (player_ID, server_initial, galaxy, region, system, astro)
    VALUES ((SELECT player_ID FROM player WHERE username = userName), serverInitial,
        galaxy, region, system, astro);

    INSERT INTO jumpgate (player_ID, coordinates_ID, level, usable)
    VALUES ((SELECT player_ID FROM player WHERE username = userName),
        (SELECT c.coordinates_ID FROM coordinates c WHERE c.server_initial = serverInitial
            AND c.galaxy = galaxy AND c.region = region AND c.system = system AND c.astro = astro),
        level, FALSE);

    INSERT INTO relationship (player_ID, ally, alliance_name)
    VALUES ((SELECT player_ID FROM player WHERE username = userName),
        TRUE, allianceName);
END 
```

我想我需要`ON DUPLICATE KEY`，但我不太清楚它的用法。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:13:30.983

使用 MySQL 有几种方法可以做到这一点。一个简单的解决方案是使用`INSERT IGNORE`而不是`INSERT`. 如果新行与表中的现有值`UNIQUE INDEX`或`PRIMARY KEY`值重复，则前者基本上什么都不做。有关更多信息，请参阅有关[INSERT 语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)的 MySQL 文档。

您还可以使用`INSERT INTO ... SELECT ...`提供更多灵活性的语法。让我们做一个简单的例子。以下语句基本上做同样的事情：

```
INSERT INTO foobar (foobar_id,display_name) VALUES (1,'one');

INSERT INTO foobar (foobar_id,display_name)
    SELECT 1,'one' FROM dual; 
```

如果您更改`SELECT`查询以检测 foobar 中的重复条目，您将获得所需的行为。有关更多详细信息，请参阅有关[INSERT ... SELECT 语法的 MySQL 文档。](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)

**编辑：**这适用于存储过程和存储过程的参数：

```
CREATE PROCEDURE sp_foobar(IN _foobar_id int, IN _display_name varchar(255))
BEGIN
    INSERT INTO foobar (foobar_id, display_name)
        SELECT _foobar_id, _display_name
        FROM dual;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:45:56.470

你不能这样做吗：

```
IF NOT EXISTS(SELECT NULL FROM player WHERE account_number=accountNumber AND username=userName)
BEGIN
  INSERT INTO player (account_number, username)
  VALUES (accountNumber, userName);

  INSERT INTO coordinates (player_ID, server_initial, galaxy, region, system, astro)
  VALUES ((SELECT player_ID FROM player WHERE username = userName), serverInitial,
      galaxy, region, system, astro);
END 
```

# c - C：解析由字符分隔的数字字符数组并将数字转换为整数

> ID：10044302
> 
> 赞同：0
> 
> 时间：2012-04-06T13:40:12.930
> 
> 标签：c, string, bioinformatics, atoi

我对序列比对程序（这是一个生物信息学项目）创建的一些字符串有疑问。我正在尝试向解析对齐文件的现有 C 程序添加附加功能，但在解析程序创建的“不匹配”字符串时遇到了一些问题。添加一些上下文，这里是一个对齐字符串的例子：

example = "28G11AC10T32";

下面是如何解释字符串：前 28 个碱基与序列匹配，然后是“G”错配（第 29 个碱基），接下来的 11 个碱基匹配（第 40 个碱基），一个“A”错配（共 41 个碱基） )、“C”不匹配（总共第 42 个碱基）等等……

我需要找出不匹配的基本位置（即，字符串有一个字符而不是数字）并将其存储到一个 int 数组中，以便我可以在以后的子程序中查找它。

所以这就是我的问题发挥作用的地方。我已经编写了一个我“认为”可以解析出来的子例程，但是我从输出中得到了一个非常奇怪的工件。注意：请原谅我糟糕而混乱的代码！我无论如何都不是 C 程序员，而且我的培训也不是计算机科学！

```
int errorPosition(char *mis_match, int *positions){
    int i = 0; //iterator for loop
    int pi = 0; //position array iterator
    int in = 0; //makeshift boolean to tell if values are inside the pre array
    int con = 0; //temporary holder for values converted from the pre array
    char pre[5]; //this array will hold the digit values that will be converted to ints
    pre[0] = '\0';
    for (i = 0; i < strlen(mis_match); i++){
        if(isalpha(mis_match[i]) && in == 1){
            con += atoi(pre);   // this is the part where I get an artifact (see below)
            positions[pi] = con;
            con++;
            pi++;
            in = 0;
            memset(&pre[0], 0, sizeof(pre));
            pri = 0;
        }else if(isalpha(mis_match[i]) && in == 0){
            positions[pi] = con;
            con++;
            pi++;
        }else if(isdigit(mis_match[i])){
            pre[pri] = mis_match[i];
            pri++;
            in = 1;
        }
    }
    if(pri > 0){
        con += atoi(pre);
        positions[pi] = con;
        pi++;
    }

} 
```

所以，我的问题是，当我到达上面评论过的部分时（“这是我得到错误的地方”），我的“pre”字符串包含数字乘以 10。例如，使用上面列出的示例字符串，循环第一次到达该区域时，我希望 pre 包含“28”，但它包含“280”！当我使用 atoi 转换字符串时，它比我预期的要高十倍。
是否有一些我遗漏的东西或 C 中的一些我不知道的字符数组约定？预先感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:51:02.837

这可能不是唯一的问题，但您不会以零结尾传递给`atoi`. 的`'0'`第三个位置的字符`280`可能是垃圾，因为您从未写入数组的该位置。

为了解决这个问题，你应该在调用之前添加这一行`atoi`：

```
pre[pri] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:00:24.230

以下代码将提取（并打印）字符串的数字和非数字部分；您可以对其进行调整以对这些部分进行您需要的操作。

```
char* example = "28G11AC10T32";
int pos = 0;
int value = 0;
while ( 1 ) {
    if ( !isdigit(example[pos]) ) {
        if ( value > 0 )
            printf( "Number = %d\n", value );
        value = 0;
        if ( example[pos]==0 )
            break;
        else
            printf( "Char = %c\n", example[pos] );
    } else {
        value = value * 10 + example[pos]-'0';
    }
    pos++;
} 
```

# android - Actionbarsherlock - 更改操作栏线条颜色

> ID：10044303
> 
> 赞同：6
> 
> 时间：2012-04-06T13:40:15.290
> 
> 标签：android, actionbarsherlock, android-theme, android-styles

我目前正在借助 actionbarsherlock 使我的应用程序与 3.0 之前的设备兼容。我的应用程序有一个自定义主题，它覆盖了 Holo.light，将蓝色变为橙色。

我想将出现在操作栏下方的蓝线更改为橙色。使用官方操作栏，我通过覆盖来管理它

```
 <item name="android:background">@drawable/ad_tab_unselected_holo</item> 
```

不幸的是，这似乎不适用于 actionbarsherlock 4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:57:14.820

你需要做两件事：

ABS 4 现在模仿标准操作栏及其属性，因此您需要**添加**-

```
<item name="background">@drawable/ad_tab_unselected_holo</item> 
```

注意没有`android:`

所以你的整体代码是：

```
<item name="android:background">@drawable/ad_tab_unselected_holo</item>
<item name="background">@drawable/ad_tab_unselected_holo</item> 
```

去引用：

> 由于 Android 主题系统的限制，任何主题自定义都必须在两个属性中声明。普通的 android-prefixed 属性将主题应用于本机操作栏，unprefixed 属性用于自定义实现。由于两个主题 API 完全相同，您只需引用您的自定义两次，而不必实施两次。

我还将扩展各种`Theme.Sherlock`而不是 holo，因为我相信 holo 在 3.0 之前的旧设备上不可用。

# jquery - 与 shft+enter 相关的错误并使用 Jquery 输入

> ID：10044312
> 
> 赞同：0
> 
> 时间：2012-04-06T13:41:10.047
> 
> 标签：jquery

当我输入“你好？？” 在文本区域 (id = add_new_comment) 它插入**hellojQuery1704879437133033947_1333718592556??** 在数据库中。代码有什么问题？提前致谢

```
 $('#add_new_comment').live('keyup',function (event) {

            /*shft+enter for new line*/

        if (event.keyCode == 13 && event.shiftKey) {
           $(this).val($(this).val()+"\n");

           return false;   
        }else if(event.keyCode == 13){
            /*code to be inserted in db*/
        }
    }); 
```

数据库代码（即 codeigniter 中的模型）

```
function add_new_comment($comment, $store_id, $comment_source,$user_id) {
        $data = array(
            'comment' => $comment // comment to be inserted. This contains the text of textarea.
            'source_id' => $store_id,
            'comment_source' => $comment_source,
            'from_user_id' => $user_id
        );
        $result = $this->db->insert(COMMENTS, $data);

        return $this->db->insert_id(); 
    } 
```

js脚本（实际代码）：

```
$('#add_new_comment').live('keyup',function (event) {
               if (event.keyCode == 13 && event.shiftKey) {
                   $(this).val($(this).val()+"\n");

                   return false;   
               }else if(event.keyCode == 13){

                   var store_id = "";

                   store_id = $('.c_store_comment').attr('id');

                   var new_comment = $.trim($(this).val());

                   $.ajax({
                    type:'post',
                    url:path to controller,
                    data:'comment='+new_comment+'&store_id='+store_id,
                    dataType:'json',
                    success:function(vals){
                        $.each(vals,function(i,values){
                            switch (i) {
                                    case 'error':
                                        alert('Sorry Something went Wrong');
                                    break;

                                    case 'success':
                                        var comment_div = '<div class="col1_comment2_row"><div class="col1_comment2_row_tilte">'+$('.user_name').html()+'</div>';
                                        comment_div += '<div class="col1_comment2_row_img"><a href="#nodo"><img class="delete_comment" id="'+values[1]+'" src="/images/delete_comment.png"></a> </div>';
                                        comment_div += '<div class="col1_comment2_row_cooment">'+values[0]+' </div></div>';

                                        $('.c_store_comment .scroll_container').append(comment_div);
                                        $('#add_new_comment').val('');

                                    break;
                                }                   
                        });
                    }
                   });         
               }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:09:49.490

根据您的评论，仅当评论文本中存在问号字符时才会出现问题。

这些字符确实保留在 URL 中（它们标记了查询字符串的开始）。此外，jQuery 不会对它们进行转义，因为您在`data`选项中传递的是字符串`$.ajax()`而不是对象，因此不会执行任何处理。

但是，我无法解释为什么看起来像 jQuery expando 属性的东西最终会被发布到服务器上，并且快速浏览源代码并没有发现任何明显的东西。但是，解决该问题的可靠方法是在`data`选项中传递一个对象而不是字符串：

```
$.ajax({
    type: "POST",
    url: "path/to/controller",
    data: {
        comment: new_comment,
        store_id: store_id
    },
    dataType: "json",
    success: function(vals) {
        // ...
    }
}); 
```

这样，jQuery 将自动转义您数据中的保留字符，您的问题应该会消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T13:46:54.740

```
$('#add_new_comment').live('keyup',function (event) {

        /*shft+enter for new line*/

    if (event.keyCode == 13 && event.shiftKey) {
       $(event.currentTarget).val($(event.currentTarget).val()+"\n");

       return false;   
    }else if(event.keyCode == 13){
        /*code to be inserted in db*/
    }
}); 
```

# shell - 将历史命令的输出存储在文本文件中

> ID：10044319
> 
> 赞同：1
> 
> 时间：2012-04-06T13:41:51.840
> 
> 标签：shell, unix, scripting, history, ksh

我的脚本代码是

```
history > a.txt 
```

但这不会在文本文件中存储任何内容。但是，当我在提示符中使用该命令时，它可以工作。

我正在 UNIX 上使用 KornShell (ksh) 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:16:06.210

'history' 命令在命令行之外被禁用（如你的脚本）。您可以使用以下方法启用它：

`set -o history`

现在命令“历史”将可用于您的脚本。

# python - 类 Classname(object)，Python 中的“object”是什么词？

> ID：10044321
> 
> 赞同：47
> 
> 时间：2012-04-06T13:42:09.777
> 
> 标签：python, object, keyword

当我创建一个具有唯一内容的模块时：

```
class Classname(randomobject):
    pass 
```

我尝试运行解释器说`randomobject`未定义的模块的 .py 文件。

但是当我这样做时：

```
class Classname(object):
    pass 
```

该模块运行良好。所以如果`object`不是关键字，那么它是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-06T13:58:03.110

`object`是一个（全局）变量。默认情况下，它绑定到一个内置类，该类是类型层次结构的根。

（这导致了一个有趣的属性，即您可以采用任何内置类型，并使用该`__bases__`属性来访问称为 object 的类型）。

不是关键字或运算符的所有内置内容都是标识符。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-05-23T13:26:51.907

以下三个类声明在 Python 3 中是相同的

```
class Classname(object):
    pass

class Classname():
    pass

class Classname:
    pass 
```

嗯，会有一些细微[的差别](https://python-ast-explorer.com/)，但不是根本上重要的，因为对象类是所有的基础。

如果您打算编写 Python 不可知代码（Python2 和 Python3 不可知），您可以使用第一个声明。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-06T13:43:15.830

`object`是引用内置类型的标识符。

与许多其他语言不同，Python 中没有原始类型。一切都是对象，包括所有数据类型。

我不确定你为什么期望继承 from`randomobject`工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-06T13:45:20.370

`object`是您在 Python 2 中创建新样式类时继承的基类。

# sudo - gksu -u user2 不询问 user2 的密码

> ID：10044322
> 
> 赞同：0
> 
> 时间：2012-04-06T13:42:09.870
> 
> 标签：sudo

在 ubuntu 10.04 上，我已将`Exec`Firefox 桌面快捷方式中的条目更改为：

```
Exec=/home/user1/Desktop/.unpriv_ff 
```

和

```
$ cat /home/user1/Desktop/.unpriv_ff 
#!/bin/bash
xhost local: && gksu -u user2 firefox 
```

这允许 user1 以 user2 的身份运行 firefox，这在 firefox 中被利用的情况下更安全（利用者只能读取和更改 user2 的文件，而 user1 将保持安全）。这一切都很好，但是当我单击 user1 帐户下的桌面图标时，提示出现：

```
enter your password to run application 'firefox' as user user2 
```

我期待这会要求我输入 user2 的密码，但它要求我输入 user1 的密码（并接受它）。它工作正常，但**我想知道是否有办法让提示询问用户 2 的密码？**因为它的功能似乎更像是一个`sudo`密码请求，然后使用 root 权限以 user2 身份运行应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:58:51.123

在终端中运行`gksu-properties`并将身份验证模式设置为`su`, 而不是`sudo`

# c# - 要输入的最少字符 - 正则表达式非字符问题

> ID：10044323
> 
> 赞同：1
> 
> 时间：2012-04-06T13:42:10.903
> 
> 标签：c#, asp.net, regex

我将此正则表达式与 asp:RequiredFieldValidator 结合使用以强制用户输入至少 7 个字符：

```
[0-9a-zA-Z]{7,} 
```

但是当用户输入非字母**@、.、-**等时，这不起作用。如何启用输入所有字符且最少 7 个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:46:42.183

您的正则表达式只接受数字和字母。这 ”。” 匹配除换行符以外的任何单个字符。

所以新的正则表达式将是“.{7,}”或“\S{7,}”。

\S 匹配任何非空白字符（因此没有空格、换行符、制表符等...）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T13:45:38.270

试试这个`Regex`表达式：

```
^.{7,}$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T13:57:02.480

最少 7 个字符条目的正确表达式是 `.{7,}` “。” 代表任何字符（包括空格）要解决空格问题，可以使用`\S{7,}`(CAPITAL S!)

如果您想拥有一个很好的工具来帮助您与 regex 相处，我可以推荐[Regex Designer](http://www.radsoftware.com.au/regexdesigner/) 它是免费软件并且非常易于使用；-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T13:44:45.133

正则表达式并不意味着解决所有问题。

您可以使用[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。

```
 <asp:CustomValidator id="CustomValidator1"
       ControlToValidate="Text1"
       Display="Static"
       ErrorMessage="Must be at least 7 chars!"
       OnServerValidate="ServerValidation"
       runat="server"/> 
```

您可以处理`ServerValidate`事件并检查长度：

```
void ServerValidation(object source, ServerValidateEventArgs args)
{
    args.IsValid = args.Value.Length >= 7;
} 
```

# c++ - 在两个区间 [a,b] 之间生成双精度数的随机数

> ID：10044324
> 
> 赞同：4
> 
> 时间：2012-04-06T13:42:13.980
> 
> 标签：c++, random, c++11, seed

我需要生成`X`均匀分布在两个区间 [a,b] 之间的随机双数，其中`a`和`b`也是双数。

这些`X`数字需要在类函数内部生成，比如`myclass::doSomething(a,b)`. 问题是，每次函数被另一个类函数调用时，`[a,b]`传递给函数的间隔都会发生变化，比如.`doSomething(a,b)``doSomething(a,b)``doThat()`

我想要一个允许我的解决方案：
1\. 拥有`engine`一个更大范围的，理想情况下，每次应用程序运行时它应该只播种一次。
2.`X`每次调用`doSomething()`函数内部产生的随机双数，应该是均匀分布的。

我下面的解决方案不允许更高的范围，`engine`并且似乎生成的数字不一定是均匀分布的。

```
//file: utilities.h
template <typename Generator>
double randomDoubleEngine(Generator& engine, double low_bound, double high_bound )
{
        if (low_bound > high_bound){
                std::swap(low_bound, high_bound);
        }

        return std::uniform_real_distribution<>( low_bound, high_bound )( engine );
}

//file: myclass.h
       void myclass::doThat(param1, param2){

            for(int i=0; i < myclass.iter; i++){
                ...
                ...
                doSomething(a,b);
                ...
            }

        }

        void myclass::doSomething(double a, double b)
        {
                std::random_device rd;
                static std::mt19937 engine(rd());
                .....
                double curThreshold = randomDoubleEngine(engine, a, b);
                ...
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:31:29.197

我认为您希望引擎成为 myclass 的静态成员。我不确定这是否会对您所拥有的产生任何真正的影响，除非您需要在其他方法中使用该引擎。我在下面粘贴了一个可能的解决方案。

另请注意，与标准相比，gcc 看起来是错误的（请参阅代码注释中的链接），因此如果您使用它，它可能会解释为什么您对这些数字应用的任何测试（以检查均匀分布）都失败了。据我了解，gcc 希望引擎返回 [0,1) 中的数字，而标准说它应该是某个范围内的统一整数。

恐怕我只能用 gcc 4.4 来测试它，因为我运行的是较旧的 Ubuntu 版本，而 ideone 似乎不允许 std::random_device。

```
#include <random>
#include <iostream>

/* In GCC 4.4, uniform_real_distribution is called uniform_real; renamed in 4.5
 *
 * However, GCC's description here
 *
 * http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-api-4.6/a00731.html
 *
 * doesn't match expectation here
 *
 * http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution
 *
 * which seems to match 26.5.8.2.2 of N3337
 *
 */
#if defined(__GNUC_MINOR__) && (__GNUC_MINOR__ <= 4)
#  define uniform_real_distribution uniform_real
#endif

template <typename Generator>
double randomDoubleEngine(Generator& engine, double low_bound, double high_bound)
{
  if (low_bound > high_bound){
    std::swap(low_bound, high_bound);
  }
  return std::uniform_real_distribution<double>(low_bound, high_bound)(engine);
}

class myclass
{
  double curThreshold;
  static std::mt19937 engine;
  void doSomething(double a, double b)
  {
    curThreshold= randomDoubleEngine(engine, a, b);
  }
public:
  myclass(): curThreshold(0) {}

  void doThat(){
    doSomething(0,10);
    std::cout << "threshold is " << curThreshold << std::endl;
  }
};

std::mt19937 myclass::engine=std::mt19937(std::random_device()());

int
main()
{
  myclass m;
  m.doThat();
  m.doThat();
  return 0;
} 
```

# jasper-reports - 在 Jasper 服务器 UI 主页上隐藏用户的注销链接

> ID：10044328
> 
> 赞同：0
> 
> 时间：2012-04-06T13:42:55.783
> 
> 标签：jasper-reports, jasperserver

如何在 Jasper Server UI 主页上禁用/隐藏用户的注销链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:50:38.140

*`jasperserver\WEB-INF\decorators\decoratorCommonComponents.jsp`*您可以为此目的修改文件。

此 jsp 文件的片段演示了如果用户不处于 ADMINISTRATOR 角色时如何隐藏*注销链接：*

```
<%--
***********************************************************************
authorization for logged in user
***********************************************************************
--%>
<ul id="metaLinks" class="horizontal">
    <li id="userID">
        <authz:authorize ifNotGranted="ROLE_ANONYMOUS">
            <span id="casted">
                <c:if test="<%= com.jaspersoft.jasperserver.api.metadata.user.service.impl.UserAuthorityServiceImpl.isUserSwitched() %>">
                    <%= ((com.jaspersoft.jasperserver.api.metadata.user.domain.User)
                          com.jaspersoft.jasperserver.api.metadata.user.service.impl.UserAuthorityServiceImpl.
                          getSourceAuthentication().getPrincipal()).getFullName() %>
                    <spring:message code="jsp.main.as"/>
                </c:if>
            </span>
            <authz:authentication property="principal.fullName"/>
        </authz:authorize>
    </li>
    <c:set var="isShowHelp" scope="page"><%= WebHelpLookup.getInstance().isShowHelpTrue() %></c:set>
    <c:if test="${isProVersion && isShowHelp}"><li id="help"><a href="#" id="helpLink"><spring:message code="decorator.helpLink"/></a></li></c:if>\
    <%-- We allow the logout link only for users in ROLE_ADMINISTRATOR role --%>
    <authz:authorize ifAnyGranted="ROLE_ADMINISTRATOR">
        <li id="main_logOut" class="last"><a id="main_logOut_link" href="#" onclick="javascript:return false;"><spring:message code="menu.logout"/></a></li>
    </authz:authorize>
</ul> 
```

我在这个 jsp 中添加了*注销链接*`<authz:authorize ifAnyGranted="ROLE_ADMINISTRATOR">..</authz:authorize>`的条件。

 *您可以添加另一个逻辑。*

# xslt - xslt 复制选择 IF 条件为真

> ID：10044335
> 
> 赞同：1
> 
> 时间：2012-04-06T13:43:26.267
> 
> 标签：xslt, if-statement

我有以下 XML 设置：

```
<?xml version="1.0" encoding="utf-16"?>
<form>
  <answers>
    <moz_generiek>Hello World</moz_generiek>
    <moz_opdracht>Mission 1</moz_opdracht>
    <moz_opdracht2>Mission 2</moz_opdracht2>
    <moz_opdracht3>Mission 3</moz_opdracht3>
    <moz_opdracht4>Mission 4</moz_opdracht4>
    <moz_opdracht5>Mission 5</moz_opdracht5>
    <moz_opdracht6>Mission 6</moz_opdracht6>
    <moz_opdracht7>Mission 7</moz_opdracht7>
    <moz_opdracht8>Mission 8</moz_opdracht8>
    <moz_opdracht9>Mission 9</moz_opdracht9>
    <set_kenmerk_api>
      <moz_opdracht id="1">SubMission1</moz_opdracht>
      <moz_opdracht id="2">SubMission2</moz_opdracht>
      <moz_opdracht id="3">SubMission3</moz_opdracht>
      <moz_opdracht id="4">SubMission4</moz_opdracht>
      <moz_opdracht id="5">SubMission5</moz_opdracht>
    </set_kenmerk_api>
  </answers>
</form> 
```

我使用这个 XSLT 样式表：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

      <xsl:template match="/">
        <moz_koppelverzoek>
          <moz_koppelverzoekreferentie><![CDATA[Important]]></moz_koppelverzoekreferentie>
          <xsl:apply-templates select="/form/answers/moz_generiek"/>
          <moz_opdrachten>
          <xsl:apply-templates select="/form/answers/moz_opdracht"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht2"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht3"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht4"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht5"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht6"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht7"/>
          <xsl:apply-templates select="/form/answers/set_kenmerk_api/moz_opdracht"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht8"/>
          <xsl:apply-templates select="/form/answers/moz_opdracht9"/>
          </moz_opdrachten>
        </moz_koppelverzoek>
      </xsl:template>

      <xsl:template match="moz_generiek">
        <xsl:element name="moz_generiek">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

      <xsl:template match="moz_opdracht">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht2">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht3">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht4">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht5">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht6">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht7">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

      <xsl:template match="moz_opdracht">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht8">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>

          <xsl:template match="moz_opdracht9">
        <xsl:element name="moz_opdracht">
      <xsl:copy-of select="node()"/>
    </xsl:element>
      </xsl:template>  

</xsl:stylesheet> 
```

创建以下结果：

```
<moz_koppelverzoek>
    <moz_koppelverzoekreferentie>Important</moz_koppelverzoekreferentie>
    <moz_generiek>Hello World</moz_generiek>
    <moz_opdrachten>
        <moz_opdracht>Mission 1</moz_opdracht>
        <moz_opdracht>Mission 2</moz_opdracht>
        <moz_opdracht>Mission 3</moz_opdracht>
        <moz_opdracht>Mission 4</moz_opdracht>
        <moz_opdracht>Mission 5</moz_opdracht>
        <moz_opdracht>Mission 6</moz_opdracht>
        <moz_opdracht>Mission 7</moz_opdracht>
        <moz_opdracht>SubMission1</moz_opdracht>
        <moz_opdracht>SubMission2</moz_opdracht>
        <moz_opdracht>SubMission3</moz_opdracht>
        <moz_opdracht>SubMission4</moz_opdracht>
        <moz_opdracht>SubMission5</moz_opdracht>
        <moz_opdracht>Mission 8</moz_opdracht>
        <moz_opdracht>Mission 9</moz_opdracht>
    </moz_opdrachten>
</moz_koppelverzoek> 
```

我现在需要的是，如果任务 8 节点位于原始 XML 中，我想重新复制任务 9 下的所有提交。

有时 line:`<moz_opdracht8>Mission 8</moz_opdracht8>`和 9 在原始 XML 中，有时不是。

我如何获得以下结果 XML IF`<moz_opdracht8>`在带有 IF 语句的 XML 中

```
<moz_koppelverzoek>
    <moz_koppelverzoekreferentie>Important</moz_koppelverzoekreferentie>
    <moz_generiek>Hello World</moz_generiek>
    <moz_opdrachten>
        <moz_opdracht>Mission 1</moz_opdracht>
        <moz_opdracht>Mission 2</moz_opdracht>
        <moz_opdracht>Mission 3</moz_opdracht>
        <moz_opdracht>Mission 4</moz_opdracht>
        <moz_opdracht>Mission 5</moz_opdracht>
        <moz_opdracht>Mission 6</moz_opdracht>
        <moz_opdracht>Mission 7</moz_opdracht>
        <moz_opdracht>SubMission1</moz_opdracht>
        <moz_opdracht>SubMission2</moz_opdracht>
        <moz_opdracht>SubMission3</moz_opdracht>
        <moz_opdracht>SubMission4</moz_opdracht>
        <moz_opdracht>SubMission5</moz_opdracht>
        <moz_opdracht>Mission 8</moz_opdracht>
        <moz_opdracht>Mission 9</moz_opdracht>
        <moz_opdracht>SubMission1</moz_opdracht>
        <moz_opdracht>SubMission2</moz_opdracht>
        <moz_opdracht>SubMission3</moz_opdracht>
        <moz_opdracht>SubMission4</moz_opdracht>
        <moz_opdracht>SubMission5</moz_opdracht>
    </moz_opdrachten>
</moz_koppelverzoek> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:46:38.717

您还可以对整个转换使用不同的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="form">
    <moz_koppelverzoek>
      <moz_koppelverzoekreferentie>Important</moz_koppelverzoekreferentie>
      <xsl:apply-templates select="answers/moz_generiek"/>
      <moz_opdrachten>
        <xsl:apply-templates select="answers/*[not(name()='moz_generiek')]"/>  
      </moz_opdrachten>      
    </moz_koppelverzoek>
  </xsl:template>

  <xsl:template match="answers">
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="set_kenmerk_api"/>

  <xsl:template match="*[name() = 'moz_opdracht9' and /*/*/moz_opdracht8]" priority="1">
    <xsl:call-template name="mo"/>
    <xsl:apply-templates select="../set_kenmerk_api/moz_opdracht"/>
  </xsl:template>

  <xsl:template match="*[name() = 'moz_opdracht7']" priority="1">
    <xsl:call-template name="mo"/>
    <xsl:apply-templates select="../set_kenmerk_api/moz_opdracht"/>
  </xsl:template>

  <xsl:template match="*[starts-with(name(),'moz_opdracht')]" name="mo">
    <moz_opdracht>
      <xsl:apply-templates/>
    </moz_opdracht>
  </xsl:template> 

</xsl:stylesheet> 
```

在我看来，这简化了样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:30:16.577

> 我现在需要的是，如果任务 8 节点位于原始 XML 中，我想重新复制任务 9 下的所有提交。

**使用**：

```
<xsl:apply-templates select="/form/answers[moz_opdracht8]/moz_opdracht9"/> 
```

# html - 如何防止移动设备在浏览器外播放视频？

> ID：10044341
> 
> 赞同：0
> 
> 时间：2012-04-06T13:43:51.277
> 
> 标签：html, video, html5-video, html5-canvas, mobile-webkit

我使用 html5 标签嵌入了一个 mp4 文件。但是当我在移动设备的本机播放视频时，它会在单独的视频播放器中打开视频，全屏播放。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:10:24.933

我不认为你可以。此外，这样的视频在 iPhone 上的分辨率会非常小，因此毫无用处。

# macos - MacPort 端口不会覆盖预装的旧版本

> ID：10044344
> 
> 赞同：4
> 
> 时间：2012-04-06T13:44:02.773
> 
> 标签：macos, macports

我有 XCode 3.2.6，其中包括 SVN 1.6.x。我刚刚安装了 MacPorts 并获得了 1.7.x 的 subversion，但是当我运行`svn --version`它时显示 1.6.17。

我在 Xcode 之后安装了 MacPorts，为什么 Scode#s 版本优先？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:35:45.073

如果您`svn`从 shell 命令行运行（例如在终端窗口中），您需要确保`bin`MacPorts 安装东西的目录（默认为`/opt/local/bin`）位于 Apple 安装版本的位置（`/usr/bin`）之前。这是由进程环境变量控制的`PATH`。

```
$ export PATH=/opt/local/bin/:$PATH 
```

要使此更改*永久生效*，请将该行添加到您的 shell 启动文件中，例如`.bash_profile`.

```
$ echo $PATH
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin
$ which svn
/usr/bin/svn$ svn --version
svn, version 1.6.17 (r1128011)
   compiled Feb  1 2012, 15:04:34
[...]
$ export PATH=/opt/local/bin:$PATH
$ echo $PATH
/opt/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin
$ which svn
/opt/local/bin/svn
$ svn --version
svn, version 1.7.4 (r1295709)
   compiled Mar  8 2012, 19:29:25
[...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T03:13:02.907

我有同样的问题（`svn --version`显示 1.6.x），即使`/opt/local/bin`在路径的前面，然后`which svn`返回`/opt/local/bin/svn`，运行`/opt/local/bin/svn --version`显示 1.7.x。

对我来说，重新启动终端修复了它。

# sql - SQL 视图与派生表

> ID：10044349
> 
> 赞同：6
> 
> 时间：2012-04-06T13:44:20.560
> 
> 标签：sql, view, derived-table

我一直认为 View 是一个存储的查询。最近我需要在一个项目中使用派生表。这让我想到了 Views。

视图与派生表不同，只是它已保存为动态构建派生表的逻辑实体？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:46:02.213

是的，对于大多数意图和目的，它们可以被认为是您所描述的。他们是同一个想法。

在某些 RDBMS 中，您可以使用视图做更多有趣的事情。索引是首先想到的。您还可以授予对视图的访问限制，因为它们是适当的数据库对象。

查看*“ [SQL 中的派生表](http://www.4guysfromrolla.com/webtech/112098-1.shtml)”*了解更多信息。

# xml - XML 解析器将字符串值 1 处理为布尔值

> ID：10044352
> 
> 赞同：0
> 
> 时间：2012-04-06T13:44:36.610
> 
> 标签：xml

从我们的 web 应用程序 X 中，我们导出一个 XML 文件，其中包含我们要在应用程序 Y 中导入的数据。

当导出的 XML 文件中的每个项目的值为“1”时，应用程序 Y 会像处理布尔值一样处理它并返回“.T.”。应用程序 Y 不提供强制将值作为字符串导入的方法。

我们是否需要在 XML 文件中添加一些内容以始终让应用程序 Y 将值解释为字符串？还是有其他方法可以解决我们的问题？

我们的导出文件示例：

```
<?xml version="1.0" encoding="UTF-8" ?>
<items>
    <item>
        <dj_code><![CDATA[FAC]]></dj_code>
        <page_nr>1</page_nr>
        <hdr_desc><![CDATA[test testcase 20120001]]></hdr_desc>
        <date><![CDATA[2012-03-30]]></date>
        <sub_nr>8095</sub_nr>
        <acct_nr>8200</acct_nr>
        <inv_nr>20120001</inv_nr>
        <desc><![CDATA[vierkantemeters]]></desc>
        <vat_code><![CDATA[T]]></vat_code>
        <period>03</period>
        <amount>1500.00</amount>
    </item>

    <item>
        <dj_code><![CDATA[FAC]]></dj_code>
        <page_nr>1</page_nr>
        <hdr_desc><![CDATA[test testcase 20120001]]></hdr_desc>
        <date><![CDATA[2012-03-30]]></date>
        <sub_nr>8095</sub_nr>
        <acct_nr>8200</acct_nr>
        <inv_nr>20120001</inv_nr>
        <desc><![CDATA[meters lat]]></desc>
        <vat_code><![CDATA[T]]></vat_code>
        <period>03</period>
        <amount>50.00</amount>
    </item>

    <item>
        <dj_code><![CDATA[FAC]]></dj_code>
        <page_nr>1</page_nr>
        <hdr_desc><![CDATA[test testcase 20120001]]></hdr_desc>
        <date><![CDATA[2012-03-30]]></date>
        <sub_nr>8095</sub_nr>
        <acct_nr>8200</acct_nr>
        <inv_nr>20120001</inv_nr>
        <desc><![CDATA[tester]]></desc>
        <vat_code><![CDATA[T]]></vat_code>
        <period>03</period>
        <amount>500.00</amount>
    </item>
</items> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:09:43.477

What language/library are you using to import the xml?

You can add a schema or dtd to your exported xml and whatever is parsing it should then respect the types of the data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:23:08.977

如果应用程序 Y 将“1”解释为真，而您不希望这种情况发生，那么您需要了解应用程序 Y 才能解决问题，而我们需要了解应用程序 Y 才能为您提供帮助。由于我们对应用程序 Y 一无所知，除了它对“1”的奇怪解释之外，帮助您非常困难。

# tomcat - Solr 配置文件。导入数据时出现错误

> ID：10044355
> 
> 赞同：1
> 
> 时间：2012-04-06T13:44:49.653
> 
> 标签：tomcat, solr

```
 <dataConfig> 
    <dataSource type="JdbcDataSource" driver="com.microsoft.sqlserver.jdbc.SQLServerDriver" url="jdbc:sqlserver://Yor Ip Address:port;databaseName=TEST" user="username" password="password" /> <document> <entity name="UserData" query="select id, firstName,lastName,password from UserData"> 
<document>
 <entity name="UserData" query="select id, firstName,lastName,password from UserData">
    <field column="id" name="id" /> 
    <field column="firstName" name="firstName" /> 
    <field column="lastName" name="lastName" /> 
    <field column="password" name="password" /> 
    </entity> </document> </dataConfig>

 this is my Solr Config file for connectionf ms sql with solr when i call dataimport to solr then give me error. can u help me this is correct or not? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:05:03.617

您发布的 XML 中有一些错误。存在重复且不完整的文档部分。确保它看起来像这样：

```
<dataConfig> 
  <dataSource type="JdbcDataSource" driver="com.microsoft.sqlserver.jdbc.SQLServerDriver" url="jdbc:sqlserver:localhost:port;databaseName=TEST" user="username" password="password" />
  <document>
    <entity name="UserData" query="select id, firstName,lastName,password from UserData">
      <field column="id" name="id" /> 
      <field column="firstName" name="firstName" /> 
      <field column="lastName" name="lastName" /> 
      <field column="password" name="password" /> 
    </entity>
  </document>
</dataConfig> 
```

你仍然有错误吗？如果是这样，错误消息说明了什么？

# c# - 如何绑定到对象列表

> ID：10044357
> 
> 赞同：0
> 
> 时间：2012-04-06T13:45:05.177
> 
> 标签：c#, .net, wpf, xaml

我的要求是我需要将用户控件绑定到对象的属性，该对象的列表包含在不同的对象中，并且第二个对象的列表设置为 ItemsSource。

例子

```
class A
{
    public string Name
    {
        get; set;
    }
}

class B
{
    public List<A> aObjectList;
}

List<B> bObjectsList = new List<B>();    
userControl.ItemSource = bObjectsList;
userControl.Content = new Binding("Name"); 
```

我该怎么做上面的事情？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:55:53.720

首先，如果您希望允许 GUI 在某些更改时自行更新，您应该`NotifyCollectionChanged`使用`ObservableCollection<T>`.

XAML 看起来像这样：

```
 <ItemsControl Name="userControl">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <ItemsControl ItemsSource="{Binding aObjectsList}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

也就是说，假设您的 UserControl 是 ItemsControl。然后在代码中执行：

```
 userControl.ItemsSource = bObjectsList; 
```

一个好主意是查看 MVVM 模式。这将提供一个更结构化的解决方案，允许修改通知等。

[这是一篇很好的文章，可以帮助您入门。](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:56:41.790

这不是很清楚，但我认为这就是您要问的。你会绑定到

```
 bObjectsList[index].aObjectList 
```

在主详细信息中，您使用以下语法

```
 ItemsSource="{binding ElementName=cbbObjectsList path=SelectedItem.aObjectList}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:57:55.287

似乎对您要尝试做的事情有很多解释。如果要展平列表，请使用[SelectMany LINQ 方法](http://msdn.microsoft.com/en-us/library/bb534336.aspx)。

```
List<B> bObjectsList = new List<B>();    
userControl.ItemSource = bObjectsList.SelectMany(b => b.aObjectList);
userControl.Content = new Binding("Name"); 
```

如果 A/B 的内容发生变化，您可能会对它们使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)并做出相应的反应。

# mysql - 如何改进关于 TimeStamp 的 SELECT？

> ID：10044360
> 
> 赞同：0
> 
> 时间：2012-04-06T13:45:11.480
> 
> 标签：mysql, sql, jpa

我做了一个选择 的查询`last secods`，例如：如果现在是 10:30:30s 并且我传递了`last 20 seconds`它应该只返回和之间的值`10:30:10`，`10:30:30`所以这里是：

```
 public List<Log> listLastSeconds(Integer id_point, int seconds) {
    Calendar calendar = Calendar.getInstance();
    calendar.add(Calendar.SECOND, -seconds);

    Date today = new Date();
    Date lastSeconds = calendar.getTime();

     Query query = em.createQuery("SELECT l FROM Log l WHERE l.point.id =:id AND l.time >= :lastSeconds AND l.time <= :today", Log.class);
     query.setParameter("id", id_point);
     query.setParameter("lastSeconds", lastSeconds);
     query.setParameter("today", today);

     return query.getResultList();
} 
```

但是即使对于很小的差异（例如 10 秒），此查询也需要很长时间。

**编辑：**

```
CREATE TABLE `log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_point` int(11) NOT NULL,
  `value` varchar(10) NOT NULL,
  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `fk_point_id` (`id_point`),
  CONSTRAINT `fk_point_id` FOREIGN KEY (`id_point`) REFERENCES `point` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=9360244 DEFAULT CHARSET=latin2$$ 
```

如何改进此查询以更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:58:33.417

您需要在列上建立索引`time`。这将做到：

```
CREATE INDEX time_index using btree on log(time); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:23:26.227

我会用`DATE_ADD`. 首先去掉`today`和`lastSeconds`变量；使用此查询并将方法参数设置为查询的参数。

```
SELECT l 
FROM Log l 
WHERE l.point.id =:id
AND l.time >= DATE_ADD(CURTIME(), INTERVAL :seconds SECOND) 
```

我很想测试它，但目前没有 mysql 访问权限。将尽快对其进行测试:)

然而，这可能不会提供很大的性能提升，因为它仍然会搜索整个表。

如果您对正在处理的数据的性质有所了解，例如在过去 10 秒内可能添加的最大行数是多少，那么您可以添加一个子句，说明表 id 大于 max( id) - N，这只是举例，任何其他可以限制搜索空间并具有商业意义的指标都会为您提供真正的性能提升。

时间列上的索引是一种选择，但我不太熟悉它的实用性或速度如何？有人对使用索引有意见吗？

# javascript - 无法让数据表与 django 生成的表一起使用

> ID：10044374
> 
> 赞同：1
> 
> 时间：2012-04-06T13:46:20.340
> 
> 标签：javascript, jquery, django, datatables

我正在尝试在 django 应用程序中使用数据表。这是我的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title> My  web application </title>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style type="text/css" title="currentStyle">
    @import "./DataTables-1.9.0/media/css/demo_table.css";
</style>

<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="./DataTables-1.9.0/media/js/jquery.dataTables.js"></script>
<script>
$(document).ready( function () {
    $('#table_id').dataTable();
    } );
</script>
</head>
<body>
    {% if success %}
        <form action="." method="POST">
        {{ my_form.as_p }}
        <input type="submit" value="Send">
        <input type="reset" value="Reset">
        </form>
        <br>
    <table id="table_id" class="display">
    <thead> <tr>
    {%for x in htl%}
        <th> {{x}} </th>
    {% endfor%}
    </tr>
    </thead>
    <tbody>
    {% for x in mytable %}
        <tr>
        {% for y in x %}
            <td> {{y}} </td>
        {%endfor %}
        </tr>
    {% endfor%}
    </tbody>
    </table>
    {% else %}
        <form action="." method="POST">
        {{ my_form.as_p }}
        <input type="submit" value="Send">
        <input type="reset" value="Reset">
        </form>

    {% endif %}
</body>
</html> 
```

我想传递一个 python 列表，其中每一行作为列表中的一个项目，并在 template.html 中格式化表格，如代码所示。我根本无法让数据表工作。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:27:17.973

我认为您的 HTML 可能不好：

```
<thead> <tr>
{%for x in htl%}
    <th> {{x}} </th>
{% endfor%}
</th>
</thead> 
```

那第二个`</th>`应该是`</tr>`

另外，你可能想看看这个：[https ://github.com/eire1130/Django_datatables](https://github.com/eire1130/Django_datatables)

这是我编写的一个包装器，用于简化将数据表嵌入到 django 模板中。

另外，我注意到您正在使用 {% block %}，但我没有看到您在扩展什么？

编辑以配置媒体和静态文件：

在 settings.py 的最顶部添加以下行：

```
import os
ROOT_PATH = os.path.dirname(__file__) 
```

（你应该在你所有的项目中都这样做，这样做会在未来为你省去很多麻烦）

此外，在您的 settings.py 中，您应该深入到文件的中途并查看四行（实际上是两行，但我们也会同时进行静态处理）

```
MEDIA_ROOT = os.path.join(ROOT_PATH, 'media/')
MEDIA_URL = 'http://127.0.0.1:8000/media/' 
```

以上将在 myproject/media 等目录中设置您的媒体文件，您的应用程序位于 myproject/myapp

```
STATIC_ROOT = os.path.join(ROOT_PATH, 'static/')
STATIC_URL = 'http://127.0.0.1:8000/static/' 
```

以上将在 myproject/static 之类的目录中设置您的静态文件，而您的应用程序位于 myproject/myapp 中。

在 settings.py 所在的同一目录中，如果您的旧 urls.py 已经在这里，则创建一个名为“urls.py”的文件，将其移动到您的应用程序文件夹，因此您的旧 urls.py 应该位于 myproject/myapp /urls.py。

您的新 urls.py 应位于 myproject/urls.py

在这个新的完全空白的 python 文件中，添加以下行：

```
from django.conf.urls.defaults import patterns, include, url
from django.conf import settings

urlpatterns = patterns('',
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT }),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT }),
    (r'^', include('myproject.myapp.urls')), 
```

)

请注意最底部的“包含”。显然，您需要更改它以反映您的项目和应用程序名称。

现在已经设置好了，您需要创建一个位于 myproject/media 的媒体文件夹。你应该对 /static 做同样的事情。

在此目录中，您应该放置您关心的所有媒体文件。例如，我有一个名为“plugins”的文件夹，里面有数据表。路径如下所示：myproject/media/plugins/datables，然后是所有数据表文件。

现在，在您的模板中，将链接指向目录：

```
'/media/plugins/datatables/media/js/jquery.dataTables.min.js' 
```

注意没有“。” 一开始，没有@include。只是网址。

这应该为您设置数据表并允许同时提供媒体。在生产环境中，您不会完全这样做，但是对于原型设计和学习，这会很好用

# javascript - 将 AngularJS 函数转换为服务

> ID：10044375
> 
> 赞同：7
> 
> 时间：2012-04-06T13:46:25.660
> 
> 标签：javascript, angularjs

我有以下要转换为服务的功能。

我将如何将 $resource 调用提取到 AngularJS 服务中，我将如何调用该服务？

```
self.select = function (email) {
    var Player = $resource('/player/get',{email:email});
    var player = Player.get(function() {
        self.selectedPlayer.email = player.email;
        self.selectedPlayer.fuel = player.fuel;
        self.selectedPlayer.cargo = player.cargo;
        self.selectedPlayer.food = player.food;
    });
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-07T04:55:34.037

我怀疑您正在使用 0.9.19 版本。我首先建议您转到 1.0rc4 版本。1.0 版即将上线且稳定，但与 0.9 版相比有许多重大变化。您可以查看[Angular 文档](http://docs.angularjs.org/guide/)以获取更多信息。

在 v1.0 中，您将所有内容包装在一个模块中：控制器、服务、指令等。像这样创建一个模块：

```
var module = angular.module('ModuleName', ['ngResource']); 
```

在 1.0 版中，资源服务被分解到它自己的类中，因此您必须将其作为依赖项提供。您还必须在应用程序中包含[资源 js文件。](http://code.angularjs.org/1.0.0rc4/angular-resource-1.0.0rc4.js)

现在要创建一个服务，您可以简单地使用模块 API。在这种情况下：

```
module.factory('Player', ['$resource', function($resource) {
   return $resource('/player/get');}]); 
```

注意这里对 $resource 的依赖是由 angular 注入的。

就我个人而言，我不喜欢弄乱我的服务中的范围，所以我的控制器中有以下内容：

```
module.controller('MyController', ['$scope', 'Player', function($scope, Player) {
    $scope.select = function(email) {
        console.log("selecting");
        Player.get({
        email: email
        }, function(player) {
            $scope.selectedPlayer = player;
        });
    };
}]);​ 
```

请注意，在 v1.0 中，作用域也被注入到控制器中，因此不再使用 self 。我还冒昧地假设 selectedPlayer 只包含来自 player 的字段，所以我只是在 selectedPlayer 的顶部直接写了 player。您也可以手动逐个字段地执行此操作，或用于`angular.extend($scope.selectedPlayer, player);`合并两个对象。

这是一个小提琴：http: [//jsfiddle.net/DukvU/](http://jsfiddle.net/DukvU/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-07T04:43:22.990

```
angular.module('myModule', []).
  factory('Player', function($resource) {
    return $resource('/player/get',{email:email});
  });

function MyController($scope, Player) {
   $scope.select = function(email) {
     Player.get(....);
   }
} 
```

# javascript - JavaScript 中的 if 语句逻辑有什么问题？

> ID：10044376
> 
> 赞同：0
> 
> 时间：2012-04-06T13:46:26.423
> 
> 标签：javascript, if-statement, logic

```
if(stringName.charAt(0) != 'Q' || stringName.charAt(0) != 'W' || stringName.charAt(0) != 'E'){

        SetID = "Yes";

    } 
```

上面的代码当我使用 alert 弹出窗口时 My.String.charAt(0) 的值返回正确的值，但我不知道为什么它进入 if 语句并将 SetID 的值更改为`Yes`

我试图弄清楚它有什么问题，但真的什么都看不到

`SetID`初始化为`No`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T13:47:14.197

您正在使用`||`，但您可能的意思是`&&`...

现在的样子，永远都是`true`。“如果字符不是'Q'，或者不是'W'，或者不是'E'，那么……”——即使它是这些字符之一，也不会是其他字符，所以表达式计算到`true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:49:59.980

让我们分解你的陈述。

```
MyString.charAt(0) != 'Q' 
```

好的，所以如果不是 Q 则继续。

```
|| 
```

所以如果角色*是*Q，继续沿着链。

```
MyString.charAt(0) != 'W' 
```

至此，我们已经确定字符不是 Q（在这种情况下`SetID = "Yes"`运行），或者它是 Q。但如果它是 Q，那么显然它不是 W，因此下一个条件为真并且`SetID = "Yes"`运行.

你看？不管角色是什么，它都能通过测试。

我想你的意思是使用`&&`，不是`||`。如果使用`&&`，则`SetID = "Yes"`仅当字符不是 Q、W 或 E 时才会运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:53:42.227

不是一个答案[太多的评论代码]，而是另一种使用 reg exp 的可能解决方案

```
var stringName = "Quick";
if( (/^[QWE]/).test(stringName) ){
   SetID = "Yes";
} 
```

# statistics - zerrorlines in Gnuplot's splot

> ID：10044383
> 
> 赞同：0
> 
> 时间：2012-04-06T13:47:10.433
> 
> 标签：statistics, plot, gnuplot

I wish to use error lines for some data in a 3D plot using splot command in GNUplot. Unfortunately, I am unable to find any documentation for this and fear that the functionality might be unavailable in gnuplot.

Is there a hack or an alternative?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:04:05.710

在我看来，您可以将数据文件构造为：

```
x1 y1 z1err_min
x1 y1 z1err_max

x2 y2 z2err_min
x2 y2 z2err_max 
```

然后用线条绘制该数据文件，以在 3d 数据上为您提供某种（非常）穷人的误差线。

# python - How can you find out what operating system the user is running?

> ID：10044386
> 
> 赞同：0
> 
> 时间：2012-04-06T13:47:25.033
> 
> 标签：python, operating-system, python-3.x

I want to find out what OS a person has in Python. I know I could always do this:

```
try:
    os.system(unixonlycommand)
except:
    os.system(windowsonlycommand) 
```

But is there another way to do it? A special module for that or something?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:50:19.730

使用[`platform.system`](http://docs.python.org/library/platform.html#platform.system)：

> 返回系统/操作系统名称，例如`'Linux'`、`'Windows'`或`'Java'`。如果无法确定值，则返回空字符串。

您还应该查看`platform`模块中的其他方法，具体取决于您要执行的操作。

也相关：[`sys.platform`](http://docs.python.org/library/sys.html#sys.platform).

# facebook - How yahoo fetches the facebook friends of logged in user who are also shared/read article with/on yahoo?

> ID：10044388
> 
> 赞同：0
> 
> 时间：2012-04-06T13:47:35.240
> 
> 标签：facebook, facebook-graph-api, yahoo

I wanted to know how yahoo fetches list of logged (facebook) in users only those friends who also has read article on yahoo in order by recency...

link for referance: [http://in.news.yahoo.com/](http://in.news.yahoo.com/) (you must log in with fb and then you will see your friends list in header if any one of your friends has already sign in on yahoo and read any article)

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:21:34.100

一旦您使用 facebook 登录 yahoo，yahoo 就会存储您的用户 ID 并存储您所有朋友的用户 ID。

当您的朋友“X”阅读一篇文章时，它会设置一个“X”已阅读该文章的标志。

现在，当您登录时，它会检查数据库并获取您朋友用户 ID 的列表，然后检查他们中的任何人是否也阅读过该文章。

如果是，它会在您旁边显示它们。

# .net - MVC3 Partial Views and Google Analytics

> ID：10044391
> 
> 赞同：1
> 
> 时间：2012-04-06T13:47:46.253
> 
> 标签：.net, asp.net-mvc-3, google-analytics

What is the best way for tracking with Google Analytics and MVC3 Partial Views?

The best thing that I have found so far is to hook into the GET/POST for the partial views and put something like

```
pageTracker._trackPageview('/vpv/contact/') 
```

Thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:50:14.610

我只需在我的母版页（布局视图）底部添加 Google 分析 JavaScript 代码。这样做可以在所有使用此母版页的视图上使用，而不必在每个视图上复制代码。

在结束 body 标记之前添加您的 Google Analytics 代码。原因是为了提高页面加载性能。

# c# - Selenium 对编码实践的关注

> ID：10044393
> 
> 赞同：1
> 
> 时间：2012-04-06T13:47:55.440
> 
> 标签：c#, object, selenium

我是 Selenium 的新手，经过大量研究，我停下来了。我已经看到了各种示例，其代码类似于我在下面的代码：

```
类登录页面
{
    私有 IWebDriver 驱动程序；

    公共登录页面（IWebDriver 驱动程序）
    { this.driver = 司机; }

    //登录成功后出现首页
    public HomePage DoLogin(string user, string pass)
    {
        driver.FindElement(By.Name("userfield")).SendKeys(user);
        driver.FindElement(By.Name("passfield")).SendKeys(pass).Submit();

        //上面是什么失败了，我留在登录页面上？返回 HomePage 对象在这里不是一个好主意

        主页主页 = 新主页（驱动程序）
        PageFactory.InitElements（驱动程序，主页）
        返回首页；
    }
}

类主页{
    公共主页（WebDriver 驱动程序）
    { this.driver = 司机; }

    公共无效点击退出按钮（）
    {
        退出按钮.click();
    }

    公共登录页面注销（）
    {
        点击退出按钮（）；

        LoginPage 登录页面 = 新的登录页面（驱动程序）
        PageFactory.InitElements（驱动程序，登录页面）；
        返回登录页面；
    }
}

```

我的问题：

1.  什么是任何一个类都没有做他们应该做的事情？如果登录失败怎么办？它仍然会返回 HomePage 对象。这不应该是这样，对吧？可以做些什么来解决失败？我见过的大多数例子都假设事情“会”正确地工作。

2.  上述实现对于 C# 是否正确？我见过的大多数示例都是针对 Java 的 - 只是想将它们转换为 C#，因为我知道 C# :)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:22:41.880

对于您的第一个问题，我之前解决的方法是在每个页面类中包含一个函数，指示 Selenium 当前是否在预期的页面上。例如，`Homepage`该类将具有以下内容：

```
public bool IsCurrentPage()
{
    try
    {
        driver.FindElement(By.LinkText("Logout"));
    }
    catch (Exception)
    {
        return false;
    }
    return true;
} 
```

因此，当您创建一个新的 时`Homepage`，您会立即检查它是否有效：

```
HomePage homepage = new HomePage(driver);
if (!homepage.IsCurrentPage())
   throw new Exception("Invalid homepage object"); 
```

然后，您可以自由地以适合您目的的任何方式处理不匹配。当然该方法可能会被欺骗，因此另一种选择是检查 URL 中的页面名称（例如 homepage.html）。您对页面检查的严格程度取决于您想要的准确性和灵活性。

对于您的第二个问题，除了缺少几个分号之外，代码看起来还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:24:25.500

对于您的第一个问题：如果 Selenium 无法找到“用户字段”或“密码字段”，它将不会返回主页对象。

通过使用 FindElementBy(...) 方法，您隐含地假设这些字段必须存在。如果 Selenium 在页面上没有找到“userfield”或“passfield”元素，它会抛出异常。在那里有效地“失败”了测试。

通常，此过程的工作方式是 nUnit 将启动集成测试。如果 Selenium 没有找到继续所需的元素之一，那么特定的集成测试将失败。

在我看来，这就是为什么让你的集成测试尽可能地分开是有益的。确保在测试您要确保有效的行为时不涉及*太多*设置工作。

我还发现这种扩展方法对于确保特定元素*不在*页面上非常有用。请记住，这种扩展方法会成为 Selenium“ImplicitWait”时间的牺牲品。这一调用实际上***需要***N 秒后才能继续。

```
public static class RemoteWebDriverExtensions
{
    public static bool ElementDoesNotExist(this RemoteWebDriver driver, By by)
    {
        try
        {
            var element = driver.FindElement(by);

            return false;
        }
        catch (Exception)
        {
            return true;
        }
    }
} 
```

最终可以这样使用：

```
driver.ElementDoesNotExist(By.LinkText("Logout")); 
```

# java - 分配数组，然后使用构造函数

> ID：10044394
> 
> 赞同：3
> 
> 时间：2012-04-06T13:48:01.400
> 
> 标签：java, arrays, constructor, allocation

### 人.java

```
public class Person {
    public String firstName, lastName;

    public Person(String firstName,
            String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getFullName() {
        return(firstName + " " + lastName);
    }
} 
```

### PersonTest.java

```
public class PersonTest {
    public static void main(String[] args) {
        Person[] people = new Person[20];              //this line .
        for(int i=0; i<people.length; i++) {
            people[i] = 
                new Person(NameUtils.randomFirstName(),
                        NameUtils.randomLastName());  //this line
        }
        for(Person person: people) {
            System.out.println("Person's full name: " +
                    person.getFullName());
        }
    }
} 
```

在上面的代码中，我们使用了两次“new”。这段代码是正确的还是错误的？第一个用于分配数组。但为什么是第二个？来自讲义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T13:49:47.717

是的，这是正确的。

该行：

```
Person[] people = new Person[20] 
```

分配数组，其中充满了对`null`while 行的引用：

```
new Person(NameUtils.randomFirstName(),
                      NameUtils.randomLastName());  //this line 
```

`Person`通过实例化类型的对象并在数组中分配引用来填充它[数组] 。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T13:50:10.493

`new Person[20]`创建一个可以容纳 20 个`Person`对象引用的数组。它不会创建任何实际`Person`对象。

`new Person(...)`创建一个`Person`对象。

这里要做出的关键区别在于，与 C 或 C++ 不同，`new Person[20]`它不会为 20 个`Person`对象分配内存。该数组不包含实际对象；它只包含对它们的*引用*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T13:51:18.057

```
Person[] people = new Person[20]; 
```

只为对象 Person 分配内存（用空值填充）。然后你需要用特定的人填充它（在这个例子中使用随机的名字和姓氏）。

# java - @ExceptionHandler 仅与 Exception.class 一起使用

> ID：10044397
> 
> 赞同：2
> 
> 时间：2012-04-06T13:48:17.733
> 
> 标签：java, spring, spring-mvc

我在我的`@ExceptionHandler`一个控制器上使用注释，但如果我使用除 以外`Exception.class`的任何异常类型，页面将返回消息

> 客户端发送的请求在语法上不正确。

这是我的控制器：

```
@Controller
@RequestMapping("/foobar")
public class TodayInHistoryController {

@Autowired(required = true)
private TodayInHistoryService service;

private static final String DATE_FMT = "yyyyMMdd";

/**
 * 
 * @return
 */
@RequestMapping(method = RequestMethod.GET)
public HistoryContent getTodayInHistory(
    @RequestParam(value = "date", required = false) Date date) {
if (date != null)
    return service.getHistoryContent(date);

return service.getHistoryContent();
}

/**
 * Binds URL arguments to their correct object representation.
 * 
 * @param binder
 */
@InitBinder
public void initBinder(WebDataBinder binder) {
// Date object binder
SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FMT);
binder.registerCustomEditor(Date.class, new CustomDateEditor(
    dateFormat, false));
}

/**
 * 
 * @return
 */

// If I change the value param of the annotation to Exception.class it works fine...
@ExceptionHandler(NumberFormatException.class)
public ModelAndView handleParseException(Exception ex) {
    // create and populate Map to hold error data
Map<String, String> errorData = new HashMap<String, String>();
errorData.put("errorMessage","Formatting error occurred");
errorData.put("errorDetails", "None");

// create and return ModelAndView
ModelAndView mv = new ModelAndView();
mv.addAllObjects(errorData);

    return mv;
}
} 
```

这是我的弹簧配置（相关的）

```
@Configuration
@Import(ServicesConfig.class)
@ImportResource({ "classpath:applicationContext-security.xml",
"classpath:dataSources.xml" })
@EnableWebMvc
@ComponentScan(basePackages = "my.controller")
public class WebConfig {

@Bean
public ViewResolver contentNegotiatingViewResolver() {
ContentNegotiatingViewResolver resolver = new ContentNegotiatingViewResolver();
resolver.setIgnoreAcceptHeader(true);
resolver.setDefaultContentType(MediaType.APPLICATION_JSON);
resolver.setFavorPathExtension(true);
resolver.setOrder(1);

// setup mediaTypes
Map<String, String> mediaTypes = new HashMap<String, String>();
mediaTypes.put("json", "application/json");
mediaTypes.put("xml", "application/xml");
resolver.setMediaTypes(mediaTypes);

// setup defaultViews
List<View> defaultViews = new ArrayList<View>();
defaultViews.add(jsonView());
defaultViews.add(xmlView());
resolver.setDefaultViews(defaultViews);

return resolver;
}

@Bean
public View jsonView() {
return new MappingJacksonJsonView();
}

@Bean
public View xmlView() {
return new MarshallingView(new CastorMarshaller());
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:36:31.327

这里的问题是 spring 尝试将日期字符串转换为`Date`并失败。当发生这种情况时`TypeMismatchException`（它 wraps `IllegalArgumentException`，它反过来 wraps `ParseException`）被抛出，你应该处理它而不是 `NumberFormatException`.

当您将异常类更改为`Exception`已处理时，如`TypeMismatchException`extends `Exception`。

提示：如果您使用任何日志记录框架，请尝试为 spring mvc 类打开调试日志记录，它可以清除很多东西。

例如，在你的 lo4j.propeties 中添加这样的内容：

```
log4j.logger.org.springframework.servlet=DEBUG 
```

# php - 带有锚标签、http:// 或 url 的 php 注释，其余的 html 标签是纯文本

> ID：10044400
> 
> 赞同：-1
> 
> 时间：2012-04-06T13:48:26.467
> 
> 标签：php, javascript, jquery, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:10:35.163

# css - 如何使用谷歌字体

> ID：10044401
> 
> 赞同：-3
> 
> 时间：2012-04-06T13:48:34.930
> 
> 标签：css, google-font-api

我想使用来自谷歌字体的无数网络专业人士。我用这个代码

```
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=myriad+web+pro"> 
```

并为此使用css代码

```
font-family: "Myriad Web Pro", "Myriad Pro", Myriad, "Segoe UI", "Verdana", "Liberation Sans", "Nimbus Sans L", "Helvetica Neue", Helvetica, Arial, sans-serif; 
```

但没有应用无数的web pro。我如何解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:56:13.863

Myriad 不是谷歌网络字体。您必须选择[他们实际提供](http://www.google.com/webfonts)的一个，或者使用提供 Myriad Pro（按年收费）的[TypeKit 。](https://typekit.com/fonts/myriad-pro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T22:02:30.203

是的，就像他说的那样，遗憾的是它不是谷歌字体，但不要担心，因为有一种非常相似的字体：[http ://www.google.com/fonts/specimen/PT+Sans](http://www.google.com/fonts/specimen/PT+Sans)

# html - 使用没有 javascript 的 css 选择输入时显示 div

> ID：10044403
> 
> 赞同：1
> 
> 时间：2012-04-06T13:48:35.923
> 
> 标签：html, css

我的问题是，当我开始在输入中写入时，如果我将鼠标滑出“.box”div，是否不会消失。

想知道是否有任何选择器或可能的方法可以在没有任何 Javascript 的情况下进行。

这是示例：

[http://jsfiddle.net/vzRqY/](http://jsfiddle.net/vzRqY/)

```
<div class="box">
    <div class="overlay"><input/></div>
LOREM IPSUM LOREM IPSUM <br/>
LOREM IPSUM LOREM IPSUM LOREM IPSUM
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:59:40.927

是的，它需要你重新排列它的`input`位置，但[它可以做到](http://jsfiddle.net/vzRqY/2/)。

**HTML**

```
<div class="box">
    <input/>
    <div class="overlay"></div>
LOREM IPSUM LOREM IPSUM <br/>
LOREM IPSUM LOREM IPSUM LOREM IPSUM
</div> 
```

**CSS**

```
.box{
    background : red;
    padding: 20px;
    position: relative;
    width: 200px;
}
.overlay{
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    top: 0;    
    background: rgba(0,0,0,0.6);
    visibility: hidden;
    opacity: 0;
    z-index: 1;
}

.box input {
    position: absolute;
    visibility: hidden;
    opacity: 0;
    width: 50%;
    top: 0;
    left: 50%;
    margin-left: -25%;
    z-index: 2;
}

.box:hover .overlay,
.box:hover input,
.box input:focus,
.box input:focus + .overlay
{
    visibility: visible;
    opacity: 1;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-06T13:54:40.773

作品中有一个规范允许这样的事情：

```
.box &.overlay input:focus 
```

如果输入框有焦点（即正在输入），此选择器将匹配，但样式将影响`.overlay`（这是您需要使其可见）。

不幸的是，很少有浏览器支持此功能......

# python - PYTHONPATH 作为 Python 解释器的工具

> ID：10044405
> 
> 赞同：2
> 
> 时间：2012-04-06T13:48:52.197
> 
> 标签：python, windows, command-line

我想将 PYTHONPATH 作为参数传递给 python.exe，就像我可以在 java 中执行此操作一样：

`java -classpath /somedir/some.jar;/anotherdir MyClass`

所以我正在寻找类似的东西：

`python -PYTHONPATH /somedir/pythonsrc;/anotherdir/pythonsrc mymodule.py`

是否可以在 python 中进行这样的思考？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:55:47.697

尝试在启动 python 之前设置环境变量 PYTHONPATH ：

在窗户上：

```
set PYTHONPATH=/somedir/pythonsrc;/anotherdir/pythonsrc && python.exe mymodule.py 
```

在 unix 上

```
PYTHONPATH=/somedir/pythonsrc:/anotherdir/pythonsrc python mymodule.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:03:32.900

`/C`使用选项启动一个新的 shell 。

```
cmd.exe /C "set PYTHONPATH=/somedir/pythonsrc && python.exe mymoudle.py" 
```

# php - Possible to use regex in SQL statement to filter numbers from strings?

> ID：10044407
> 
> 赞同：0
> 
> 时间：2012-04-06T13:48:59.137
> 
> 标签：php, mysql, sql

Consider the following "tweets" (left) and "retweets" (right) tables:

```
 +----------+-----------------+     +----------+----+
  | tweet_id |  text           |     | tweet_id | rt |
  +----------+-----------------+     +----------+----+
  |  1       | foo {RT|123} bar|     |  1       | 123|
  |  2       | foobar          |     |  3       | 456|
  |  3       | {RT|456} baz    |     |  4       | 789|
  |  4       | bazbar {RT|789} |     +----------+----+
  |  5       | bar baz         |
  +----------+-----------------+ 
```

The tweets table contains millions of preprocessed tweets. In some tweets, a custom label is added of the form {RT|xx} **with xx being a 17 to 20 figure number**. The retweets table is currently empty, but it needs to be filled as demonstrated: tweets.text should be scanned for {RT|xx} labels, and if found, the number should be extracted from the label and inserted into the retweets table together with the tweet_id.

To do this, I started off with selecting all tweets that have {RT}-labels:

```
SELECT * FROM tweets WHERE `text` LIKE '%{RT|%' 
```

A second step would be to loop through the resultset in PHP and filter the number from the label using a regular expression, and then perform an INSERT INTO operation. This, however, would take a lot of time - making me wonder if this would perhaps be faster with a SQL query? And if so, what would the query have to look like? I have never worked with regular expressions in SQL statements before.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:01:17.373

也许像这样（未经测试）；

```
SELECT SUBSTR(
    `text`,
    LOCATE('{RT|', `text`) + 4,
    LOCATE('}', `text`, LOCATE('{RT|', text) )
)
FROM `tweets`
WHERE `text` LIKE '%{RT|%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:36:45.430

如果您的数据库是 MySQL，您可以使用简单的查询来完成：

```
INSERT INTO `retweets` SELECT id, SUBSTR(`text`, LOCATE('{RT|', `text`)+4, LOCATE('}', `text`) - LOCATE('{RT|', `text`)-4) AS `num` FROM `tweets` HAVING `num` REGEXP '^[0-9]+$'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:14:56.010

这将在 oracle 中工作：

```
SELECT tweet_id, REGEXP_SUBSTR(REGEXP_SUBSTR(text, '[{RT|][^}]+'), '[[:digit:]]+') FROM tweets WHERE text LIKE '%{RT|%' 
```

# android - How could you implement a staggered row layout in Android?

> ID：10044408
> 
> 赞同：4
> 
> 时间：2012-04-06T13:49:00.213
> 
> 标签：android, listview

How would you implement a layout with multiple columns, where the rows of each column don't line up? I'm thinking of something like:

```
----------
|  |  |  |
|  |  |  |
|--|  |  |
|  |--|  |
|--|  |--|
|  |--|  |

... 
```

And so on. An example of something like this is a website like Pinterest.

I'm looking for best practices here from experienced Android devs. Does it make sense to use multiple ListViews and keep them in sync somehow? Is there a better way?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:40:02.900

有一个新的开发正在进行`StaggeredGridView`，请参阅这个项目：[https](https://github.com/maurycyw/StaggeredGridView) ://github.com/maurycyw/StaggeredGridView （通过[androidviews.net](http://www.androidviews.net/2013/01/pinterest-like-adapterview/)）。这很像 Pinterest 应用程序布局。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T13:52:56.360

使用`GridLayout`,

> [http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)

并将其放入 a`ScrollView`中，

> [http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

# asp.net - IIS Compression with in code GZipping?

> ID：10044411
> 
> 赞同：7
> 
> 时间：2012-04-06T13:49:08.063
> 
> 标签：asp.net, .net, iis, gzip, gzipstream

I am adding in gzipping to all my static content, and html outputs from my .net 4 site.

I also have compression enabled in IIS 7.5 (both static and dynamic), and what I am finding is that enabling compression in IIS, overwrites my Vary: Accept-Encoding header for these resources.

So, what I am wondering is, is there really a need to enable compression in IIS, since I already am gzipping things?

So, I've done a some testing, and what I found follows:

```
Utilizing IIS Static and Dynamic Compression, with code compression:
CPU Load: 35%
Memory Load: 28M

Utilizing IIS Static and Dynamic Compression, without code compression:
CPU Load: 34%
Memory Load: 28M

Non-Utilizing Static and Dynamic Compression In IIS, with code compression:
CPU Load: 14%
Memory Load: 32M 
```

So, based on my findings, I agree, there is no need to utilize IIS compression, when doing this in code. Even though memory consumption is a bit higher, CPU Load is significantly enough lower to make the in-code compression much more efficient for serving the files.

Now, really my whole point of this was to find out and get rid of the IIS overwriting of the Vary: Accept-Encoding header. Which, it seems to have no effect when IIS compression is enabled or not. The header still does not get added... so, can you help with that?

Here is the code for the caching that I am implementing, please note that prior to firing the method containing this code, I am clearing the headers via, context.Response.ClearHeaders():

```
 With context.Response
        .AddHeader("Cache-Control", "store, cache")
        .AddHeader("Pragma", "cache")
        .AddHeader("Cache-Control", "max-age=21600")
        .AddHeader("ETag", Date.Now.Ticks)
        .AddHeader("Expires", DateTime.Now.AddYears(1).ToString("ddd, dd MMM yyyy hh:mm:ss") + " GMT")
        .AddHeader("Vary", "Accept-Encoding")
        .AppendHeader("Vary", "Accept-Encoding")
        .Cache.SetVaryByCustom("Accept-Encoding")
        .Cache.SetOmitVaryStar(True)
        .Cache.VaryByParams.IgnoreParams = True
        .Cache.SetAllowResponseInBrowserHistory(True)
        .Cache.SetCacheability(Web.HttpCacheability.Public)
        .Cache.SetValidUntilExpires(True)
        .Cache.SetLastModified(DateTime.Now.AddYears(-1).ToString("ddd, dd MMM yyyy hh:mm:ss") + " GMT")
        .CacheControl = "public" '
        .Expires = 24 * 60 * 366
        .ExpiresAbsolute = DateTime.Now.AddYears(1).ToString("ddd, dd MMM yyyy hh:mm:ss") + " GMT"
    End With 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T03:09:33.960

您需要明确知道要在代码中应用压缩的 MIME 类型。然后，您可以为这些 MIME 类型禁用 IIS 压缩。

您的`.config`文件应类似于以下文件。您会注意到应用压缩的 MIME 类型已全部列出。明智地在您的代码或 IIS 中关闭 MIME 类型的压缩，以便代码中压缩的内容不会被 IIS 压缩，反之亦然。

例如，如果您的 HTML 全部压缩在代码中，您可以指定：

```
 <add mimeType="text/html" enabled="false" /> 
```

文件摘录`applicationHosts.config`：

```
<system.webServer>
<httpCompression
    directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files"
    dynamicCompressionDisableCpuUsage="90"
    dynamicCompressionEnableCpuUsage="80"
    maxDiskSpaceUsage="100" minFileSizeForComp="2700"
    noCompressionForRange="true"
    sendCacheHeaders="false"
    staticCompressionDisableCpuUsage="100"
    staticCompressionEnableCpuUsage="80"
    >
    <scheme name="gzip"
        dll="%Windir%\system32\inetsrv\gzip.dll"
        dynamicCompressionLevel=”4”
        staticCompressionLevel=”7” />
    <dynamicTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/xml" enabled="true" />
        <add mimeType="*/*" enabled="false" />
    </dynamicTypes>
    <staticTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/atom+xml" enabled="true" />
        <add mimeType="application/rss+xml" enabled="true" />
        <add mimeType="application/xaml+xml" enabled="true" />
        <add mimeType="application/xml" enabled="true" />
        <add mimeType="image/svg+xml" enabled="true" />
        <add mimeType="*/*" enabled="false" />
    </staticTypes>
</httpCompression>
<urlCompression doDynamicCompression="true"
    dynamicCompressionBeforeCache=”true” />
</system.webServer> 
```

请注意，如果您修改`applicationHosts.config`它会影响您服务器上的所有网站，因此您需要注意，任何未在代码中应用压缩的网站都不会被压缩。

另请注意，通常不应压缩二进制内容（即图像、视频）。这些资源已经被压缩在它们各自的容器中（即.JPG、.MP4）。确保您没有压缩已压缩的内容类型。

我已经写了有关压缩设置的更多详细信息，您可能想在我的答案中查看：[https](https://stackoverflow.com/a/10051876/733805) ://stackoverflow.com/a/10051876/733805 。

# android - Fade in animation image in Android giving black screen

> ID：10044412
> 
> 赞同：2
> 
> 时间：2012-04-06T13:49:08.853
> 
> 标签：android, android-animation, android-imageview, android-image

I want my picture to fade in (I think this is how you call it...). I am currently trying to use the alpha to do this (see below). But the alpha is getting a black screen and then showing the picture. I need the animation to show the picture in the beginning but a transparent one or very bright picture and then get darker and fill the color as the animation progresses.

Hope I explained myself correctly...

```
 AlphaAnimation fadein = new AlphaAnimation(0, 1);
     //fadein.setFillAfter(true);
     fadein.setDuration(1000);
     apa.startAnimation(fadein);
     animationmove=3; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:56:39.043

如果您希望它开始部分可见，您可以执行以下两个选项之一：

1.  创建一个低不透明度图像并将其设置为父布局的背景。
2.  将初始 alpha 更改为一个小的非零值：

    AlphaAnimation fadein = new AlphaAnimation(0.2, 1);

动画完成后，您制作动画的图像可能会恢复到其原始状态。

您可以使用三种“setFill...”方法。 `fadein.setFillBefore(true)`只要您声明`fadein.setFillEnabled(true)`.

`fadein.setFillAfter(true)`使动画图像在动画结束后保持其最终状态。

您也可以在 、 之间的 animation.xml 文件中声明这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:00:24.980

创建动画/alpha.xml

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:fromAlpha="0.0"
    android:toAlpha="1.0"
    android:duration="1000"> 
```

并在java文件中

```
Animation an = AnimationUtils.loadAnimation(this,anim.alpha);
    iv.startAnimation(an); 
```

# python - python console, better than raw_input(), how to offer editable default values?

> ID：10044413
> 
> 赞同：2
> 
> 时间：2012-04-06T13:49:21.340
> 
> 标签：python, user-input

`raw_input (prompt_string)` can prompt to input. How to offer **default value**? And how to make the default value user **editable**?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T13:59:08.977

我建议调查[readline](http://docs.python.org/library/readline.html) / [pyreadline](http://pypi.python.org/pypi/pyreadline)，甚至可能是[诅咒](http://docs.python.org/library/curses.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T13:59:20.130

我不确定您所说的用户可编辑是什么意思。如果您想提供默认值，它们可以覆盖：

```
my_input = 'default value'
# user_input will be set to my_input if they just press enter
user_input = raw_input("Enter a string (default: %s):\n" % my_input) or my_input 
```

如果您希望他们能够设置默认值，您需要使用两个提示 - 一个设置默认值，然后另一个如上所述 - 或者使用除`raw_input`.

# php - 上传文件代码和mysql代码应该存储在一个页面还是单独的页面中？

> ID：10044417
> 
> 赞同：0
> 
> 时间：2012-04-06T13:49:47.063
> 
> 标签：php, ajax

我有一个脚本（**insertvalues.php**），所有 MySQL 编码都在其中发生（例如使用 PHP 在数据库中查询和插入值）。

我也想用 PHP 上传文件。

**我想知道的是：将文件上传的PHP代码存储在与insertvalues.php**相同的页面中，表单导航到使用A​​JAX，还是更好地放置文件上传代码在单独的 PHP 页面中？

下面是我在**insertvalues.php**中的脚本：

```
<?php

session_start();

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$insertquestion = array();

    $imagequery = "SELECT ImageId FROM Image WHERE (ImageFile = '". mysql_real_escape_string($_POST['imageFile[]'])."')";
    $imagers = mysql_query($imagequery);
    $imagerecord = mysql_fetch_array($imagers);
    $imageid = $imagerecord['ImageId']; 

        $insertquestion[] = "'".
                    mysql_real_escape_string( $imageid ) ."'";

 $questionsql = "INSERT INTO Question (ImageId) 
    VALUES (" . implode('), (', $insertquestion) . ")";

    mysql_query($questionsql);

mysql_close()

?> 
```

下面是我拥有的 AJAX，它成功地将帖子发布到**insertvalues.php**：

```
 function submitform()
{
    var fieldvalue = $("#QandA").val();
    $.post("insertvalues.php", $("#QandA").serialize() ,function(data){
        var QandAO = document.getElementById("QandA");
        QandAO.submit();
    });  
    alert("Your Details for this Session has been submitted"); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:16:38.997

当我经验不足时，我会将所有内容捆绑在一起，因为我认为跟踪属于该页面上的操作的代码位会更容易。从那以后，我了解到，尽管它确实可以将所有东西放在一起，但随着页面内容的增长（它总是如此），它很快就会变得不可读。

此外，我经常发现一遍又一遍地管理可能相同方法的多个副本是一团糟，这意味着有时代码被放置在单独的 php 文件中并被重用，而其他代码则没有。随着时间的推移，很明显，正在出现的模式是将所有东西模块化。现在我倾向于有一个确定布局的文件。单个组件包含在文件夹 include 中的其他 php 文件中。如果这些子组件需要模块化，我会在包含文件夹中创建一个文件夹，其中包含该组件的名称。就这样继续下去。这看起来很麻烦，但它确实是一个救生员。

然后重用代码变得像移动文件夹一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:53:56.050

Ohlala ...我认为两者都不是。两种方式似乎都很糟糕，尽管第二种（分离）可能不那么糟糕。我强烈建议您研究应用程序结构和设计，即 MVC 模式。

# c# - unity 3.3，在物体上创建局部重力

> ID：10044419
> 
> 赞同：2
> 
> 时间：2012-04-06T13:49:50.697
> 
> 标签：c#, unity3d, gravity

使用统一 3.3。visual studio express 2010\. 和 c#.

我需要制作一个将附加到对象的脚本。该对象将创建自己的重力场，该重力场将吸引 - 排斥环境中的所有对象。

不幸的是，由于统一物理，我不确定如何做到这一点。我需要该对象覆盖所有其他对象吗？我要超越统一的主要物理学吗？这是怎么回事？或者当它是一个简单的脚本时，我是否过于复杂？

不，我不想添加一个刚体，所以物体会随着重力下落，它必须创建更强大的重力。

干杯

更新！

```
public float radius = 5.0f;
public float power = -20f;
void Start () 
{
    //GameObject gravityObject = GameObject.FindGameObjectWithTag("GravitySwell");
    //gravSlime = gravityObject.transform;      
}

void Update () 
{
    Vector3 explosionPos = transform.position;
    Collider[] colliders = Physics.OverlapSphere(explosionPos, radius, 3);
    foreach (Collider hit in colliders)
    {
        if (!hit)
        {
            continue;
        }
        if (hit.rigidbody)
        {
            hit.rigidbody.AddExplosionForce(power, explosionPos, radius, 3);
        }
    }
}
} 
```

这是有效的，因为它增加了吸引物体的负力。问题是当这个脚本被分配到的有吸引力的对象在半空中时。任何被抓住的物体都会飞向它，但随后似乎又掉下来又被吸引了。关于为什么的任何提示？

我在想这样的事情，但什么也没发生：

```
Vector3 direction = this.transform.position - hit.transform.position;
direction.Normalize();
            //hit.rigidbody.AddExplosionForce(power, explosionPos, radius, 3);
            //hit.transform.position.;
hit.rigidbody.isKinematic = false;
hit.rigidbody.AddForce(direction); 
```

更新:: 好的，我正在尝试这个，它似乎运作良好，但它附着在被吸引的物体上。我也希望有人有更好的主意吗？

```
public void OnCollisionEnter(Collision col)
{
if(col.gameObject.tag == "GravitySwell")
{
    Debug.Log("i hit it!!!");
    rigidbody.velocity = Vector3.zero;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:34:19.497

你可以做的是添加一个碰撞框，作为一个组件添加到任何游戏对象中，然后检查是否有任何东西进入该碰撞框并向正在碰撞的对象添加力。如果需要，我会给你示例代码。

//编辑

您可以将自己的重力添加到脚本中，并拥有自己的函数来增加力以使其朝一个方向移动，但只是为了让您知道可以改变多少重力。身体确实

但是如果你想自己做重力，你可以做

```
bool grounded = false;

void gravity(){

    gameObject.trasform.position.x -= gravity

}

void onCollisionEnter(collision c){
     //check and see what you are colliding with and if its the ground then set grounded to true and that will get you falling gravity. there is more you can do for more adv. gravity but ill leave that up to you
} 
```

编辑*

如果我明白你所说的关于坚持一个对象你需要做的就是让这个对象成为需要坚持它的对象的父对象

# ruby - pandoc-ruby 错误

> ID：10044423
> 
> 赞同：1
> 
> 时间：2012-04-06T13:50:09.057
> 
> 标签：ruby, pandoc

我刚刚使用 gem install pandoc-ruby 安装了 pandoc 并尝试运行此示例脚本：

```
require 'pandoc-ruby'
@converter = PandocRuby.new('# Markdown Title', :from => :markdown, :to => :rst)
puts @converter.convert 
```

我收到以下错误：

```
open3.rb:202: in spawn': No such file or directory - pandoc --from=markdown --to=rst (Errno::ENOENT)
open3.rb:202: inpopen_run'
open3.rb:90: in popen3'
pandoc-ruby.rb:101: inexecute'
pandoc-ruby.rb:77: in convert'
pandoc test.rb:3: in' 
```

我假设由于脚本是 pandoc-ruby github 上作为示例给出的脚本之一，因此安装肯定有问题。有谁知道如何解决这一问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:59:52.040

该错误看起来像 Ruby 无法找到 pandoc 可执行文件。

要告诉 Pandoc 在哪里可以找到可执行文件，请使用以下`bin_path`方法：

```
PandocRuby.bin_path='/usr/local/bin' 
```

设置`bin_path`为放置 pandoc 可执行文件的目录。

# php - php if 多个变量

> ID：10044429
> 
> 赞同：1
> 
> 时间：2012-04-06T13:50:36.033
> 
> 标签：php, variables, if-statement

我正在尝试对我的数据库中的某些变量进行一般化。假设我们有下一个变量和值：

```
$var1 = "abc";
$var2 = "n/a";
$var3 = "das";
$var4 = "n/a"; 
```

我的 if 语句必须包含所有这些变量，检查哪些变量包含“n/a”，对于每个包含“n/a”的变量，脚本必须创建另一个变量`$var21 = "Not Available"`。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:56:55.957

我不会使用`variable variables`，只是由于个人喜好。如果你是自虐狂，[你当然可以试试](http://php.net/manual/en/language.variables.variable.php)。

我会创建一个额外的哈希值。~~这也将消除对 if 语句的需要~~。:)

```
$descriptions = array(
    "n/a" => "Not Available",
    "brb" => "Be Right Back",
    "iee" => "I'm easily extendable"
); 
```

然后，当您需要特定键的文本时，您只需键入

```
$descriptive_text = $descriptions[$var1]; 
```

**更新：**

如果 中没有值，要将其设置为原始值`$descriptions`，请执行以下操作：

```
$descriptive_text = (is_null($descriptions[$var1])) ? $var1 : $descriptions[$var1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:54:25.987

您应该为此使用数组。

```
$array = array("abc", "n/a", "das", "n/a");
foreach($array as $key => $value)
{
 if($value == "n/a")
 {
  echo "Do Something!";
 }
} 
```

另请参阅：[数组](http://php.net/manual/en/language.types.array.php)。

# silverlight - 是否可以知道 WP7 应用程序是否已固定？

> ID：10044430
> 
> 赞同：2
> 
> 时间：2012-04-06T13:50:40.587
> 
> 标签：silverlight, windows-phone-7

我认为这段代码被剪断了：

```
var appTile = ShellTile.ActiveTiles.First();

if (appTile != null)
{
    // is pinned
} 
```

会告诉我我的 wp7 应用程序是否已经固定，但 appTile 永远不会为空，即使应用程序未固定也是如此。

有任何想法吗 ？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T14:29:06.127

您无法判断默认应用程序 Tile 是否实际固定在开头。

但它可以为次要的：

```
ShellTile FindTile = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("Page=" + PageTitle));
if (FindTile == null)
{
    // Tile has not been pinned
}
else
{
    // Tile has been pinned
} 
```

# linux - updatedb 将列入黑名单的目录树的分支列入白名单

> ID：10044431
> 
> 赞同：2
> 
> 时间：2012-04-06T13:50:42.273
> 
> 标签：linux, directory, whitelist, locate

updateb 黑名单目录中的 PRUNEPATHS 好。我的情况是我有一个包含许多子目录的目录：

```
/A/a1
/A/a2
/A/a3
/A/a4
/A/a5
/A/a6
/A/a7
/A/a8
/A/a9
...
/A/aN
/A/whitelisted_directory 
```

请注意，无用的文件夹无法通过正则表达式匹配，并且一直被添加/删除。有没有办法告诉 updatedb 查看 /A/whitelisted_directory 而不是 /A/ 中的其余部分？先感谢您！

# c - 使用 make 文件编译不同目录中的文件

> ID：10044433
> 
> 赞同：1
> 
> 时间：2012-04-06T13:50:50.263
> 
> 标签：c, makefile

好吧，我从来没有掌握过make和makefile。我试过阅读手册页但没有运气。所以我来了:L

我有一堆文件开始在一个文件中变得非常不受管理。（我正在尝试制作一个操作系统）并且我想尝试将这些文件拆分为单独的子目录（参见下面的结构），然后告诉 make 将这些文件“制作”成他们的 .o 文件，将它们移动到另一个单独的子目录，最后得到一个内核文件。（抱歉，如果这听起来很复杂，希望结构有助于使事情更清晰）

所以这是我想要的结构树：

```
 Parent directory 
                           ( where the makefile will be )
                                          |
                                          |
     -------------------------------------------------------------------------
     |                 |                  |                |                 |
  Header SubDir      Source SubDir      ASM SubDir      Obj SubDir        Kern SubDir
(Header files )     (Source Files)     (Assembly Files)  (Object Files)   (Kernel File) 
```

这是我当前的makefile：

```
C_SOURCES= main.c
S_SOURCES= boot.s
C_OBJECTS=$(patsubst %.c, obj/%.o, $(C_SOURCES))
S_OBJECTS=$(patsubst %.s, obj/%.o, $(S_SOURCES))
CFLAGS=-nostdlib -nostdinc -fno-builtin -fno-stack-protector -m32 -Iheaders
LDFLAGS=-Tlink.ld -melf_i386 --oformat=elf32-i386
ASFLAGS=-felf

all: kern/kernel

.PHONY: clean
clean:
-rm -f kern/kernel

kern/kernel: $(S_OBJECTS) $(C_OBJECTS)
ld $(LDFLAGS) -o $@ $^

$(C_OBJECTS): obj/%.o : %.c 
gcc $(CFLAGS) $<

vpath %.c source

$(S_OBJECTS): obj/%.o : %.s
nasm $(ASFLAGS) $<

vpath %.s asem 
```

它现在吐出这个错误：

```
ld -Tlink.ld -melf_i386 --oformat=elf32-i386 -o kern/kernel obj/boot.o obj/main.o
ld: cannot find obj/boot.o: No such file or directory
ld: cannot find obj/main.o: No such file or directory 
```

提前感谢您的帮助！

杰米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:41:45.663

Let's take this in stages:

```
all: $(SOURCES) link 
```

You don't have to build the sources, so let's leave that out. And what you really want to build is `kern/kernel`, so let's use that instead of the abstract "link:

```
all: kern/kernel

kern/kernel:
    ld $(LDFLAGS) -o kernel $(SOURCES) 
```

But you want to link the *object files*, not the source files, and produce `kernel` in `kern/`, not in the parent directory (where I assume you will be running `make`):

```
kern/kernel: $(OBJECTS)
    ld $(LDFLAGS) -o $@ $^ 
```

And what are the objects? Well, I presume the sources are the `.s` files, and the objects have the same names with a different suffix, and in a different location:

```
SOURCES=boot.s main.s monitor.s common.s descriptor_tables.s isr.s interrupt.s gdt.s timer.s kheap.s paging.s

OBJECTS=$(patsubst %.s,Obj/%.o,$(SOURCES)) 
```

And this is how you make an object:

```
$(OBJECTS): Obj/%.o : %.s
    nasm $(ASFLAGS) $<

vpath %.s Src 
```

(That last line is so that Make will know where to find the sources.)

The flags look good. And here's clean:

```
.PHONY: clean
clean:
    -rm -f Obj/*.o kern/kernel 
```

You're trying to do a lot at once, so this probably won't work on the first try. Give it a whirl and let us know the result.

# c# - 将发布变量发布到组合框控件文本值

> ID：10044438
> 
> 赞同：0
> 
> 时间：2012-04-06T13:51:23.257
> 
> 标签：c#, winforms, datagrid

我在 winforms 应用程序上有一个数据网格，当用户双击数据网格上的单元格时，将调用以下方法。

```
private void dataCaseDiary_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        try
        {
            int cellRow = e.RowIndex;
            int cellCol = e.ColumnIndex;
            DataTable table = (DataTable)dataCaseDiary.DataSource;
            var currentDiaryID = table.Rows[cellRow]["DiaryID"];
            var currentUser = table.Rows[cellRow]["To Action"];
            var currentType = table.Rows[cellRow]["Diary Type"];
            txtDiaryID.Text = currentDiaryID.ToString();
            cboReassign.Text = currentUser.ToString();
            cboAmendDiaryType.Text = currentType.ToString();
        }
        catch (Exception eX)
        {
            MessageBox.Show(eX.Message);
        }
    } 
```

但是，该行发生异常

```
cboAmendDiaryType.Text = currentType.ToString(); 
```

异常指出“对象引用未设置为对象的实例”。

我花了一些时间看这个，但找不到我做错了什么。三个 var 变量都从数据网格中获取正确的值，其中两个发布到表单上控件的文本值，但第三个失败。

我使用的前缀“txt”表示文本框控件，“cbo”表示组合框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:58:25.287

问题是`table.Rows[cellRow]["Diary Type"]`不存在并返回null。我猜“日记类型”不是正确的列名。

# google-chrome - 禁用 chrome 设置中的书签

> ID：10044441
> 
> 赞同：0
> 
> 时间：2012-04-06T13:51:41.150
> 
> 标签：google-chrome, google-chrome-extension

我正在构建一个 chrome 扩展程序，可以禁用从 chrome 设置访问书签。那可能吗？有哪些 API 可以访问 chrome 设置菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:54:03.220

Chrome 没有用于禁用书签的公共扩展 API。

# ravendb - 使用 HTTP API 的 RavenDb 备份返回 401

> ID：10044444
> 
> 赞同：0
> 
> 时间：2012-04-06T13:52:11.710
> 
> 标签：ravendb

使用Fiddler 发布`"{ 'BackupLocation': 'C:\Backups\2010-05-06' }"`到[http://localhost:8080/admin/backup](http://localhost:8080/admin/backup)会导致 401。

RavenDb 作为服务运行并`<add key="Raven/AnonymousAccess" value="All"/>`已设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:58:59.560

Alexander，请确保您正在运行以管理员身份发布的应用程序（Raven.Backup.exe 或控制台）。

# cakephp - cakephp 选择选项属性

> ID：10044445
> 
> 赞同：3
> 
> 时间：2012-04-06T13:52:29.840
> 
> 标签：cakephp, select, options

我需要在这样的选择中设置选项的标题属性：

```
<select name="webmenu" id="webmenu" onchange="showValue(this.value)">
  <option value="calendar" title="icons/icon_calendar.gif">Calendar</option>
  <option value="shopping_cart" title="icons/icon_cart.gif">Shopping Cart</option>
  <option value="cd" title="icons/icon_cd.gif">CD</option>
  <option value="email"  selected="selected" title="icons/icon_email.gif">Email</option>
  <option value="faq" title="icons/icon_faq.gif">FAQ</option>
  <option value="games" title="icons/icon_games.gif">Games</option>
</select> 
```

我在食谱中没有找到任何帮助

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:31:11.990

这里的第一个提示可能会让您了解如何以您希望的方式使用表单助手：http: [//www.dereuromark.de/2012/03/01/some-new-crazy-cakephp-tricks/](http://www.dereuromark.de/2012/03/01/some-new-crazy-cakephp-tricks/)

基本上你需要使用更深的数组并提供 title 和 onchange 属性。

# c# - 多个按钮调用同一个函数。能找出哪个按钮调用了该函数吗？

> ID：10044447
> 
> 赞同：1
> 
> 时间：2012-04-06T13:52:40.740
> 
> 标签：c#, email, button

我有 5 个按钮将调用此弹出功能来发送电子邮件。如何确定哪个单击的按钮调用了该函数？

```
 public void popup(object sender, EventArgs e)
    {

        if (MessageBox.Show("You may not Bind, Change, Or Alter Insurance Coverage through e-mail. Confirmation of this e-mail by us initiates any changes to your Insurance. If you need any immediate service please contact our office at 1-800-875-5720.", "IMPORTANT!", MessageBoxButtons.OKCancel) == DialogResult.OK)
        {

            {
                string email = "mailto:davidadfa.t@ifdafdadf.com";
                Process.Start(email);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:54:17.627

事件处理程序上的`sender`对象将是被按下的按钮

```
Button b = sender as Button; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T13:57:22.010

sender 对象是调用该方法的按钮：

```
var buttonId = ((Button)sender).ID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:54:27.013

您的事件中的发件人是已单击的 Button 对象。

但是，如果您需要知道，也许最好稍微重构您的代码并设置单独的按钮单击事件并将该功能移动到另一个方法中，然后从各种单击事件中调用它并最终发送参数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T13:56:42.253

尝试

```
public void popup(object sender, EventArgs e)
{
Button TheButtonClicked = sender as Button; // this gives access to the button 

    if (MessageBox.Show("You may not Bind, Change, Or Alter Insurance Coverage through e-mail. Confirmation of this e-mail by us initiates any changes to your Insurance. If you need any immediate service please contact our office at 1-800-875-5720.", "IMPORTANT!", MessageBoxButtons.OKCancel) == DialogResult.OK)
    {

        {
            string email = "mailto:davidadfa.t@ifdafdadf.com";
            Process.Start(email);
        }
    }
} 
```

参考请看[这个](https://stackoverflow.com/questions/1303145/net-events-what-are-object-sender-eventargs-e)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-08T07:09:54.470

[http://msdn.microsoft.com/en-us/library/3exstx90.aspx](http://msdn.microsoft.com/en-us/library/3exstx90.aspx)

1.  选择要将事件处理程序连接到的控件。

2.  在“属性”窗口中，单击“事件”按钮 ()。

3.  单击要处理的事件的名称。

4.  在事件名称旁边的值部分中，单击下拉按钮以显示与您要处理的事件的方法签名匹配的现有事件处理程序的列表。

5 .从列表中选择适当的事件处理程序。代码将添加到表单中以将事件绑定到现有事件处理程序。

# php - PHP 参考混乱、糟糕的优化或预期的行为？

> ID：10044448
> 
> 赞同：1
> 
> 时间：2012-04-06T13:52:56.170
> 
> 标签：php, reference

请帮助我了解此症状是否是 PHP 中的意外错误/不良优化/或预期行为。

这是一个小代码：

```
class Packet {
  public $length;
  public $time;
}

class Stream {
  public $packets = array();

  // Basically what I want is to make sure
  // I put my packet in the array as reference
  // because later in the code where I call this
  // function, I change my Packet object's values
  // and I want this change to appear in the
  // $this->packets array. So I pass by reference.
  // I don't want to copy the Packet object at all!
  public function addPacket(&$packet){
    $this->packets[] = &$packet; //note here the reference operator
  }
}

...

foreach($packets as $packet){
  $myPrettyStream->addPacket($packet);
} 
```

所以我在代码注释中解释了我想要做什么。我的问题是：在我将所有数据包添加到 foreach 中的流后，我的所有`Stream::packets`数组元素都将包含（引用）到`$packet`我添加到流中的最后一个。

似乎 PHP在函数调用之间保留了`$packet`我的函数内部的变量。`addPacket(&$packet)`（这可能是有意的还是不好的优化？）无论我是`&$packet`通过引用数组（基本上是引用引用&&$packet）还是简单地引用`$packet`（&$packet）来传递变量，我认为这不应该是预期的行为。

但是，如果我不在函数内部进行引用，它可以工作：

```
public function addPacket(&$packet){
  $this->packets[] = $packet;
} 
```

请有人解释为什么这种行为是有意义的！

谢谢！

==================================================== ========================

**解决方案**

感谢您的正确答案，我模拟了一个行为相同的函数调用：

```
// try to emulate function call inside iteration
$packet         = $packets[0];                 
$functionPacket = &$packet;            
$packetsItem[0] = &$functionPacket; //functionpacket holds a reference to $packet
var_dump($packetsItem);

echo "\nsecond iteration\n";
unset($functionPacket);
$packet         = $packets[1];                 
$functionPacket = &$packet;            
$packetsItem[1] = &$functionPacket;
var_dump($packetsItem);

output:
array(1) {
  [0]=>
  &object(Packet)#1 (2) {
    ["time"]=>
    int(1)
  }
}
array(2) {
  [0]=>
  &object(Packet)#2 (2) {
    ["time"]=>
    int(2)
  }
  [1]=>
  &object(Packet)#2 (2) {
    ["time"]=>
    int(2)
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:35:23.583

PHP 总是通过引用传递对象，因此绝对不需要`&`，在您的情况下它甚至是有害的（正如您已经意识到的那样；））。

问题是，您“引用引用”而不是对象。这意味着，数组中的每个项目都是`$packet`来自方法内部的引用，它本身就是`$packet`来自数组*外部的引用。*现在，当您更改`$packet`（`foreach`-loop）时，似乎数组中的每个项目都发生了变化，但实际上它们与以前保持相同的引用。

作为经验法则：如果您需要-arguments`&`以外的所有内容`out`，则应该考虑您的设计。如果您*需要* `out`-arguments，那么您也应该考虑一下。通常（不再）不需要这个，它使许多事情（不必要的）变得复杂。特别是：永远不要`&`用于微优化。

你可以想象，它看起来像这样（即使它可能不那么准确）

```
// First iteration
$packet --> $packets[0]
// Pass to method
Stream::addPackage():$packet --> $packet --> $packets[0]
// Assign to array
Stream::$packets[0] --> Stream::addPackage():$packet --> $packet --> $packets[0]

// Second iteration (!)
Stream::$packets[0] --> Stream::addPackage():$packet --> $packet --> $packets[1] 
```

请注意，`Stream::$packets[0]`现在如何“指向”`$packets[1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:08:26.383

[http://www.php.net/manual/en/language.references.pass.php](http://www.php.net/manual/en/language.references.pass.php)

当你通过引用传递一个变量时，你只需要在函数声明中添加&。在函数中，您不需要在变量名前添加 &。

```
public function addPacket(&$packet){
    $this->packets[] = &$packet; //  should be $this->packets[] = $packet;
} 
```

# c++ - 具有可变数量的已知类型的参数的函数，c ++ 11方式

> ID：10044449
> 
> 赞同：19
> 
> 时间：2012-04-06T13:52:56.377
> 
> 标签：c++, templates, c++11, variadic-templates, variadic-functions

例如，我已经知道`stdarg.h`在 c++ 中使用可变参数的函数的方法，如[这里](http://www.go4expert.com/forums/showthread.php?t=17592)讨论的。我也知道 c++11 标准有可变参数模板，如此[处](http://en.wikipedia.org/wiki/Variadic_template)所述。

但是在上述两种方案中，我们都不知道（并且我们不能强制）编译时的参数类型 afaik。我正在寻找的是将**已知类型**的变量参数传递给函数。我认为这是可以做到的，因为我在[这里](http://en.cppreference.com/w/cpp/utility/variadic)读到了它：

> 可变参数模板，也可用于创建接受可变数量参数的函数，通常是更好的选择，因为它们不会对参数的类型施加限制，不执行整数和浮点提升，并且是类型安全的.

是否可以？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-06T14:21:36.190

使用可变参数模板编写一个函数很简单，它接受任意数量的参数。与一般模式的唯一区别是，具体类型用作第一个参数（头） - 而不是模板参数。下面的示例显示了一个函数`foobar`，它接受任意数量的字符串。

```
// used for end of recursion - and for the empty arguments list
void foobar() { }

template <typename ...Tail>
void foobar(const std::string& head, Tail&&... tail)
{
    // do something with head
    std::cout << head << '\n';
    // call foobar recursively with remaining arguments
    foobar(std::forward<Tail>(tail)...);
}

foobar("Hello", "World", "..."); 
```

就个人而言，我更喜欢使用`std::initializer_list`而不是可变参数模板。因为可变参数模板更复杂，需要额外的经验。，`std::initializer_list`它可能看起来像这样：

```
void foobar(std::initializer_list<std::string> values)
{
    for (auto& value : values) {
        // do something with value
        std::cout << value << '\n';
    }
}

foobar({ "Hello", "World", "...", }); 
```

`std::initializer_list`不幸的是，与常规函数一起使用时需要额外的花括号。如果使用了新的初始化语法，则构造函数不需要它们。

**编辑：**根据反馈重写答案。特别是我改变了两个解决方案/示例的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:02:28.053

如果变量参数都是一种类型，您可以更改函数签名以获取这些类型的数组，而不是使用“...”。

# mysql - 从数据库中查找特定关键字后的第 1 个和最后 20 个字符？

> ID：10044468
> 
> 赞同：2
> 
> 时间：2012-04-06T13:54:08.337
> 
> 标签：mysql

我想从数据库中找到特定关键字之后的第一个和最后 20 个字符。假设关键字是“帐户”，那么我想在一行中出现“帐户”之前的前 20 个字符和在一行中出现“帐户”之后的 20 个字符。

目前我正在使用这个查询：

```
SELECT LEFT(Line1,20), RIGHT(Line,20) FROM minde_candidate_workexp
    WHERE minde_candidate_workexp.WorkDesc LIKE '%Accounts%' ; 
```

这将显示关键字“帐户”出现的行的前 20 个字符和该行的最后 20 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:02:04.120

[`LOCATE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)和的组合[`SUBSTRING()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)应该可以解决问题。

像这样的东西（未经测试）：

```
SELECT 
  SUBSTRING(m.WorkDesc, 
            GREATEST(LOCATE('Accounts', m.WorkDesc) - 20, 0), -- Force pos >= 0
            LENGTH('Accounts') + 20) 
FROM minde_candidate_workexp m 
WHERE 
  m.WorkDesc LIKE '%Accounts%' 
: 
```

另请参阅这个类似的问题：[Extract X number of words around a given search string within a string](https://stackoverflow.com/questions/8250987/extract-x-number-of-words-surrounding-a-given-search-string-within-a-string) - 听起来您想从描述中提取一些上下文，在单词边界上这样做可能比在固定数字上更有用的字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:05:26.767

下面演示了一个想法：

```
SELECT substring(line1, locate('account',line1) - 20, 20), 
       substring(line1, locate('account',line1) + length('account'), 20) 
   FROM ... 
```

但是，它假定“帐户”前面至少有 20 个字符。它可能需要检查，否则该值可能为负数，这会产生不同的结果（负数位置是从字符串末尾的偏移量）。

# java - 是否有对象更改跟踪/版本控制 Java API？

> ID：10044476
> 
> 赞同：22
> 
> 时间：2012-04-06T13:54:32.120
> 
> 标签：java, change-tracking

我知道至少有两个字节码增强器在运行时修改“对象模型”以允许透明地执行事务。其中一个是我每天在工作中使用的 Versant VOD 的一部分，另一个是 Terracotta 的一部分。可能还有很多其他的，例如在 ORM 中，但 Versant 在我的公司负责处理。

我的问题是，是否有这样一个可以独立使用的开源 API，独立于它所设计的产品？你可以说一个“可破解”的 API。它应该只跟踪*更改*，而不是读取访问，这会显着减慢代码速度。换句话说，它不应该需要显式的读/写锁定。这需要访问所有执行更改的类，而不仅仅是数据模型，或者需要在内存中保留某种形式的“先前版本”以进行比较。

我要解决的问题是我在（NoSQL）数据库中“序列化”了“大”（32K 到 256K）对象图。它们是长期存在的，必须定期重新序列化以获取更改的“历史”。但是它们的序列化相当昂贵，而且大多数更改都是很小的。

我每次都可以完全序列化它们并在流上运行二进制差异，但这听起来非常占用 CPU。更好的解决方案是修改模型上的写操作以对更改进行协议的 API，以便在存储初始“图像”之后，只需要存储协议。

我发现了一些关于 Apache Commons Beanutils 来比较对象的问题，但这对于就地更改没有用；我需要在每个“业务交易”之间对模型进行完整的克隆。

重申一下，我正在寻找一个“内存中”API，在同一个 JVM 中，它不涉及任何外部服务器应用程序。如果在 Win、Mac 和 Linux 上可用，涉及本机代码的 API 是可以的。API 目前不必独立*打包*；它只需要可以从“父项目”中提取它以形成一个独立的 API（父项目许可证必须允许这样做）。

我的对象图将涉及许多大型数组，因此需要有效地支持。

这些更改不仅用于审计，而且可以重放或撤消。更准确地说，使用反序列化的初始图和更改列表，我应该得到一个相同的结束图。此外，从结束图开始，应该可以通过反向应用更改返回到初始图。这使用完全相同的功能，但除了新值之外，还需要更改协议来保留旧值。

API 许可应与商业用途兼容。

[编辑] 到目前为止，我没有得到*有用*的答案，而且我想要的似乎也不存在。这让我只有一个选择：让它发生。当我有一个有效的实现时，我会在此处发布一个链接作为答案，因为这是我项目的下一步，没有它我无法继续前进。

[编辑] 我偶然发现了这个有点相关的问题：[是否有一个 Java 库可以“区分”两个对象？](https://stackoverflow.com/questions/8001400/is-there-a-java-library-that-can-diff-two-objects)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T21:10:38.393

Kryo v1 有一个序列化器，它知道最后一个被序列化的数据并且只发出一个增量。读取时，它知道最后收到的数据并应用增量。增量是在字节级别上完成的。[这](http://www.google.com/url?sa=D&q=https://code.google.com/p/kryo/source/browse/tags/kryo-1.05/src/com/esotericsoftware/kryo/compress/DeltaCompressor.java&usg=AFQjCNH_rOEvnAJwnhMLrIrGivyZt92pvA)是序列化程序。大部分工作都是由[这个班级](http://www.google.com/url?sa=D&q=https://code.google.com/p/kryo/source/browse/tags/kryo-1.05/src/com/esotericsoftware/kryo/compress/Delta.java&usg=AFQjCNEKVRLQIonCyx-TODwqC0aKsKBUVg)完成的。这可以以一些有用的方式使用，例如类似于 Quake 3 的网络。

这在 Kryo v2 中被省略了，因为 AFAIK 它从未被使用过。此外，它没有广泛的测试集。它可以被移植，可以做你需要的，或者作为你需要的基础。

以上还发布在 JVM 序列化[程序邮件列表](https://groups.google.com/group/java-serialization-benchmarking/msg/5899db24c53d801e)上。

在对象级别执行此操作会有点棘手。您可以编写类似于[FieldSerializer](https://code.google.com/p/kryo/source/browse/trunk/src/com/esotericsoftware/kryo/serializers/FieldSerializer.java)的东西，同时遍历两个对象图。不过，这将是独立代码，而不是 Kryo 序列化器。在每个级别，您都可以调用 equals。写一个字节，这样当你读的时候你就知道它是否相等。如果不等于，则使用 Kryo 编写对象。对于同一个对象，Equals 会被多次调用，尤其是对于深度嵌套的对象。

您可能会这样做的另一种方法是仅对标量和字符串执行上述操作，即仅由 Output 类写入的值。问题是走两个对象图。要使用 Kryo，我认为您必须复制所有序列化程序才能了解其他对象图。

可能您可以将 Kryo 与您自己的输出一起使用，该输出在列表中收集值而不是编写它们。使用它来“序列化”您的旧对象图。现在编写另一个版本的你自己的输出，它接受这个列表并用它来序列化你的新对象图。每次写入一个值时，首先检查它与列表中的下一个对象。如果等于，写一个 1。如果不等于，写一个 0，然后是值。

这可以通过两次使用第一个输出来提高空间效率，一次在旧图上，一次在新图上。现在你有两个值列表。使用这些来编写一个表示相等的位串。这节省了为每个值写入整个字节的空间，但具有额外列表的开销。最后，写出所有不相等的值。

要完成这个想法，您需要能够反序列化数据。您将需要一个您自己的 Input 类版本，该类从旧对象图中获取值列表。您的输入首先读取位串（或每个值一个字节）。对于相等的值，它从列表中返回值，而不是从数据中读取。如果一个值不相等，它会调用 super 方法从数据中读取。

我不确定这是否会比在字节级别上更快。如果我不得不猜测，我会说它可能会更快。将所有值存储在列表中将需要大量装箱/拆箱，并且这种方法仍然会分配所有字段，即使它们没有更改。我怀疑无论哪种方式性能都会成为问题，所以我可能只会选择更简单的方法。很难说那是什么...复活增量内容或编写自己的输出/输入类。

如果你想回馈 Kryo，那当然很棒。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T02:04:54.537

看看[Content repository API for Java](http://en.wikipedia.org/wiki/Content_repository_API_for_Java)，[Artifactory](http://www.jfrog.com/technology.php)使用它 来控制 maven 依赖项。[Apache Jackrabbit](http://jackrabbit.apache.org/)是这个 JSR（[JSR-283 版本 2](http://jcp.org/en/jsr/detail?id=283)）的参考实现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:54:39.470

我不知道这样的 API，但它不可能那么复杂：

> 更好的解决方案是修改模型上的写操作以对更改进行协议的 API，以便在存储初始“图像”之后，只需要存储协议。

我会说你只需要 2 个组件：Action 和 ActionProcessor

您只需要保留已执行操作的列表（协议）。

```
interface ActionProcessor{
    void perform(Action action);
    void undoToDate(Date date);
} 

iterface Action{
    Date getDate();
    void perform();
    void undo();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T19:16:51.627

据我所知，GemFire 是一个 Gemstone（现为 VmWare）企业产品，其功能与 Gemstone smalltalk OODB 类似，但后来用于 java。James Foster 制作了[一系列](http://programminggems.wordpress.com/2010/02/05/scaling-objects-videos/)有关 Gemstone 工作原理的视频。我发现它们非常有趣。Gemstone 有一个免费版本，可用于构建小型（Seaside 网络）系统。

# jquery - 带有ajax调用的斑马表

> ID：10044477
> 
> 赞同：0
> 
> 时间：2012-04-06T13:54:35.313
> 
> 标签：jquery, ajax, datatables

我正在使用 ajax 按钮将记录添加到表中。我想用斑马桌。我有一个用于斑马表的 jquery 函数。

```
<script type="text/javascript">
        $(function() {
            $("table tr:nth-child(even)").addClass("zebraTable");
        });
</script> 
```

CSS：

```
.zebraTable {background-color: #F2F2F2} 
```

当我点击普通按钮时，它就像斑马桌一样工作。但是当我用 ajax 按钮更改按钮时，表格变成了普通表格。你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:59:32.260

答案取决于自从您将 zebraTable 类添加到行后该表发生了什么。我假设您的 Ajax 调用正在修改表（替换它、添加/删除行、隐藏/显示行等）？

请注意，除非您将其删除，否则 DOM 中的 tr 对象将保留该类，并且选择器适用于隐藏和可见的 tr 对象。我的建议是从所有行中删除 zebraTable 类，然后重新应用它（并调整隐藏的 tr 对象，如果你有它们）。

# php - 在 Windows 的 php 中从本地主机发送电子邮件

> ID：10044478
> 
> 赞同：1
> 
> 时间：2012-04-06T13:54:36.387
> 
> 标签：php, email, smtp, localhost

我正在使用这个非常小的代码来测试电子邮件是否到达电子邮件目的地：

```
<?php
  mail('woodsy013@hotmail.com','Test mail','The mail function is working!');
  echo 'Mail sent!';
?> 
```

但它似乎没有工作。我正在使用 WAMP。我已经安装了一个免费的 SMTP 服务器。我的 php.ini 文件配置如下：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = smtp.tools.sky.com
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = you@yourdomain 
```

在我提到的操作之后，我似乎没有收到发给 woodsy130@hotmail.com 的电子邮件。

我收到此错误：

```
Warning: mail() [function.mail]: SMTP server response: 530 5.7.0 
Must issue a STARTTLS command first. ff2sm10904265wib.9 in 
C:\wamp\www\Derrysgc2\pages\pages\mailtest.php on line 2 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:18:21.560

尝试将 SMTP 服务器与 gmail 一起使用。

```
ini_set("SMTP","ssl://smtp.gmail.com");
ini_set("smtp_port","465"); 
```

否则有很多 PHP 邮件程序库。这为您简化了事情并使其更易于使用。我最喜欢的是 swift mailer。最好的部分是您不必弄乱您的核心 php 配置文件，并且文档也很容易阅读。

例如，如果你想使用 PHP 的 swift mailer 库发送邮件，它就这么简单。

```
require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.example.org', 25)
  ->setUsername('your username')
  ->setPassword('your password');

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Wonderful Subject')
  ->setFrom(array('john@doe.com' => 'John Doe'))
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
  ->setBody('Here is the message itself');

// Send the message
$result = $mailer->send($message); 
```

您可以参考官方网站[http://swiftmailer.org/docs上的文档了解更多信息](http://swiftmailer.org/docs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:04:51.880

SMTP 不应该指向您的 SMTP 服务器吗？（我假设 smtp.tools.sky.com 是您的提供商）。sendmail_from 也应该是正确的电子邮件地址。

另请注意，某些邮件提供商会阻止从动态 IP 地址发送的电子邮件。

# java - 如何从 .t xt 文件中读取二维数组？

> ID：10044480
> 
> 赞同：0
> 
> 时间：2012-04-06T13:54:49.413
> 
> 标签：java, stream, io, jtable, multidimensional-array

我有这个具有以下格式和内容的 .txt 文件（注意空格）：

```
Apples   00:00:34
Jessica  00:01:34
Cassadee 00:00:20 
```

我想将它们存储到 2D 数组 ( `holder[5][2]`) 中，同时将它们输出到`JTable`. 我已经知道如何在 java 中写入和读取文件并将读取的文件放入数组中。但是，当我使用此代码时：

```
 try {

        FileInputStream fi = new FileInputStream(file);
        DataInputStream in = new DataInputStream(fi);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String line = null;
        while((line = br.readLine()) != null){
            for(int i = 0; i < holder.length; i++){
                for(int j = 0; j < holder[i].length; j++){
                    holder[i][j] = line;
                }  
            }
        }

        in.close();

        } catch(Exception ex) {
            ex.printStackTrace();
        } 
```

我的`holder[][]`数组输出不如 JTable 好：| 请帮忙？感谢任何可以帮助我的人！

编辑：也可以用`Scanner`? 我更了解扫描仪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:59:07.420

你需要的是这样的：

```
int lineCount = 0;
int wordCount = 0;
String line = null;
        while((line = br.readLine()) != null){
            String[] word = line.split("\\s+");
            for(String segment : word)
            {
                holder[lineCount][wordCount++] = segment;                    
            }
            lineCount++;
            wordCount = 0; //I think now it should work, before I forgot to reset the count.
        } 
```

请注意，此代码未经测试，但它应该为您提供总体思路。

编辑： The`\\s+`是一个正则表达式，用于表示一个或多个空格字符，无论是空格还是制表符。从技术上讲，正则表达式很简单`\s+`，但我们需要添加一个额外的空格，因为`\`是 Java 的转义字符，所以你需要转义它，因此额外的`\`. 加号只是表示 on 或 more of 的运算符。

第二次编辑：是的，您也可以这样`Scanner`做：

```
Scanner input = new Scanner(new File(...));
while ((line = input.next()) != null) {...} 
```

# android - 从 Android 将照片上传到 Facebook 墙/相册

> ID：10044484
> 
> 赞同：-1
> 
> 时间：2012-04-06T13:55:16.737
> 
> 标签：android, facebook, facebook-android-sdk

我已经从[Git](http://git-scm.com/)下载了 Facebook Android SDK，并按照[developers.facebook](http://developers.facebook.com/docs/mobile/android/sso/)中的步骤进行操作，获得了应用程序 ID 并运行了一些示例代码。我可以在墙上发布状态。现在我想在墙上上传一张带有描述或标题的照片，但我不能。我浏览并发现以下代码作为照片上传的答案。

```
public void postImageonWall() {
    byte[] data = null;

    Bitmap bi = BitmapFactory.decodeFile("/sdcard/cutedog.jpg");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    data = baos.toByteArray();
    Bundle params = new Bundle();
    params.putString(Facebook.TOKEN, mFacebook.getAccessToken());
    params.putString("method", "photos.upload");
    params.putByteArray("picture", data);
    params.putString("caption", "So Cuuteee!!");
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null);
} 
```

为此，我得到的响应为 {"pid":"100003180585600_320223","aid":"100003180585600_43760","owner":100003180585600,"src":"http://photos-g.ak.fbcdn.net/ hphotos-AK-PRN1 / 533575_198930480222970_100003180585600_320223_995139351_s.jpg “ ”src_big“： ”http://a7.sphotos.ak.fbcdn.net/hphotos-ak-prn1/s720x720/533575_198930480222970_100003180585600_320223_995139351_n.jpg“， ”src_small“：” HTTP： //photos-g.ak.fbcdn.net/hphotos-ak-prn1/533575_198930480222970_100003180585600_320223_995139351_t.jpg","link":"http://www.facebook.com/photo.php?fbid=1989304802293770&set56002293673&set56148.jpg 100003180585600&type=1","caption":"So Cuuteee!!","created":13337186​​24,"object_id":198930480222970}

照片以小尺寸图片的形式上传到某个地方（它提供了一些 URL）。但不在 Facebook 墙上或相册上。通过查看 Stack Overflow 问题*[Android - How to upload photo from SD card to the Facebook wall](https://stackoverflow.com/questions/8662460)*，我尝试了

```
 mAsyncRunner.request("me/photos", params, "POST", new SampleUploadListener(), null); 
```

和

```
 mAsyncRunner.request("me/feed", params, "POST", new SampleUploadListener(), null); 
```

对于两者，我得到以下回应

```
 {"error":{"message":"Unsupported method, photos.upload","type":"Exception"}} 
```

怎么上传到墙上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:00:48.563

您的应用程序是否有权`photo_upload`将照片上传到 Facebook？

试试这个代码：

```
Bundle params = new Bundle();
params.putString("method", "photos.upload");

FileInputStream in;
BufferedInputStream buf;
try {
    File file = new File("/sdcard/cutedog.jpg");

    in = new FileInputStream(file);
    buf = new BufferedInputStream(in,1070);

    byte[] bMapArray= new byte[buf.available()];
    buf.read(bMapArray);
    params.putByteArray("picture", bMapArray);
} catch (FileNotFoundException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

mAsyncRunner.request(null, params, "POST",new SampleUploadListener(), null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T20:43:11.420

参见源代码`https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook/src/com/facebook/android`。

它包含有关如何上传图像的源代码。

# asp.net-mvc-3 - MVC3 LINQ 多个 INNER JOIN

> ID：10044486
> 
> 赞同：0
> 
> 时间：2012-04-06T13:55:21.260
> 
> 标签：asp.net-mvc-3, entity-framework

我正在尝试通过使用两个 INNER JOIN

```
var product = from a in db.Product.Include(a => a.Category).Include(a => a.Model)
select a;

return View(product.ToList()); 
```

如果我编写上述代码，返回 View(product.ToList()); 会出错

错误说，'元数据集合中的多个项目与身份'模型'匹配。'

当我尝试调试时

```
var product = from a in db.Product.Include(a => a.Category)
select a; 
```

我可以看到 SQL 查询为

```
{SELECT 
[Extent1].[productId] AS [productId], 
[Extent1].[categoryId] AS [categoryId], 
[Extent1].[modelId] AS [modelId], 
[Extent1].[model] AS [model], 
[Extent1].[displaySize] AS [displaySize], 
[Extent1].[processor] AS [processor], 
[Extent1].[ramSize] AS [ramSize], 
[Extent1].[capacityType] AS [capacityType], 
[Extent1].[capacity] AS [capacity], 
[Extent1].[colour] AS [colour], 
[Extent1].[description] AS [description], 
[Extent1].[price] AS [price], 
[Extent1].[threeDayPrice] AS [threeDayPrice], 
[Extent1].[aWeekPrice] AS [aWeekPrice], 
[Extent1].[twoWeekPrice] AS [twoWeekPrice], 
[Extent1].[aMonthPrice] AS [aMonthPrice], 
[Extent1].[threeMonthPrice] AS [threeMonthPrice], 
[Extent1].[sixMonthPrice] AS [sixMonthPrice], 
[Extent1].[stock] AS [stock], 
[Extent2].[categoryId] AS [categoryId1], 
[Extent2].[name] AS [name]
FROM  [dbo].[Product] AS [Extent1]
INNER JOIN [dbo].[Category] AS [Extent2] ON [Extent1].[categoryId] = [Extent2].[categoryId]
ORDER BY [Extent1].[model] ASC} 
```

我想通过 modelId 作为外键将 INNER JOIN 添加到模型实体。

怎么可能？

谢谢。

--添加模型--

```
--Prodruct.cs--

public class Product
{
[Key] public int productId { get; set; }

[Required(ErrorMessage = "Please select category")]
public int categoryId { get; set; }

[Required(ErrorMessage = "Please select model")]
public int modelId { get; set; }

[DisplayName("Model name")]
public String model { get; set; }

public virtual Category Category { get; set; }
public virtual Model Model { get; set; }
}

--Category.cs--
public class Category
{
[Key] public int categoryId { get; set; }
public String name { get; set; }
}

--Model.cs--
public class Model
{
[Key] public int modelId { get; set; }
public String name { get; set; }
}

--RentalDB.cs--
public class rentalDB : DbContext
{
public DbSet<Product> Product { get; set; }
public DbSet<Model> Model { get; set; }
public DbSet<Customer> Customer { get; set; }
public DbSet<Order> Order { get; set; }
public DbSet<Cart> Cart { get; set; }
public DbSet<Category> Category { get; set; }
public DbSet<OrderDetails> OrderDetails { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:20:07.723

在我的测试数据库中，我在 LinqPad 中运行了它

```
from a in Products.Include("Categories").Include("Suppliers") select a 
```

我得到了这个生成的sql：

```
SELECT 
[Extent1].[ProductID] AS [ProductID], 
[Extent1].[ProductName] AS [ProductName], 
... Lots of stuff ...
FROM   [dbo].[Products] AS [Extent1]
LEFT OUTER JOIN [dbo].[Categories] AS [Extent2] ON [Extent1].[CategoryID] = [Extent2].[CategoryID]
LEFT OUTER JOIN [dbo].[Suppliers] AS [Extent3] ON [Extent1].[SupplierID] = [Extent3].[SupplierID] 
```

在我的环境中，include 接收 lambda 表达式没有过载，您可能从某个地方得到它，所以我不知道您的 include 发生了什么，尝试将您的查询更改为

```
var product = from a in db.Product.Include("Category").Include("Model") select a; 
```

# python - httplib.HTTPResponse.read() 意外关键字参数“amt”

> ID：10044492
> 
> 赞同：1
> 
> 时间：2012-04-06T13:55:38.413
> 
> 标签：python

我有一个自定义 HTTP 客户端，用于为 python3.x 完成的生产。现在我需要为 python2.7 完成相同的功能。我只有一个陈述有问题：

```
data = response.read(amt = 10 *1024 *1024) 
```

响应由以下方式返回：

```
urllib2.urlopen(request, timeout=timeout) 
```

所以它是类型

```
httplib.HTTPResponse

httplib.HTTPResponse.read() 
```

python2.7下支持amt作为长度可选参数。我仍然收到错误消息：

```
Traceback (most recent call last):
   File "D:\eclipse_workspace\py27\wsdconfirmationserver.py", line 152, in <module>
print(customHttpRequest(url="http://test.com/"))
   File "D:\eclipse_workspace\py27\wsdconfirmationserver.py", line 109, in customHttpRequest
   data = response.read(amt = 10 *1024 *1024)                                   
TypeError: read() got an unexpected keyword argument 'amt' 
```

现在有趣的是，如果我在 httplib.HTTPResponse 的源代码中重命名 read()，这个函数不会再失败，但显然我在代码中引入了无数其他问题。我徘徊为什么会发生这种情况......似乎是python中的一个错误，但是......也许是我不明白的事情。感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:22:53.533

我不认为`read()`需要一个 kwarg，只需尝试将文件大小作为整数传递？

```
data = response.read(10 *1024 *1024) 
```

[http://docs.python.org/library/stdtypes.html#file.read](http://docs.python.org/library/stdtypes.html#file.read)

# bash - unix 语句手动运行良好，但不能通过 launchd 或 cron

> ID：10044498
> 
> 赞同：1
> 
> 时间：2012-04-06T13:55:55.340
> 
> 标签：bash

```
egrep -w 'TCP|UDP' ~/IPsDenied.txt | sed 's/:[^:]* in/ in/' | awk '{cmd="echo "$5" | geoIP | fgrep 'Country:' | cut -c 16-43"; cmd | getline rslt; close(cmd); print $1" "$2" "$3" "$4" "$5" "$6" "rslt}' >> ~/IPtoCountry.txt 
```

为什么当我使用 launchd 或 cron 时，我的语句中的 geoIP 脚本没有被调用？它手动运行良好...我尝试将完整的 PATH 用于 geoIP 之类的`~/geoIP`or`./geoIP`或`/Users/Admin/geoIP`

```
#IPsDenied.txt
Apr 6 08:58:16 TCP 212.58.244.61:80 in

#IPtoCountry.txt
Apr 6 08:58:16 TCP 212.58.244.61 in United Kingdom 
```

相反，我得到了

```
Apr 6 08:58:16 TCP 212.58.244.61 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:58:02.757

因为 cronjobs 通常使用有限的 '$PATH' 运行，所以尝试相同但提供 geoIP 应用程序的绝对路径。

# c++ - 升压计时器无法编译

> ID：10044500
> 
> 赞同：-3
> 
> 时间：2012-04-06T13:56:10.963
> 
> 标签：c++, boost, timer

我正在尝试编译升压计时器，但它抛出了我不明白的错误。这让我觉得定时器库坏了 atm：

```
#include <string>
#include <boost/lexical_cast.hpp>
#include <boost/timer/timer.hpp>

int main(int argc, char **argv) {
//  auto_cpu_timer t;
    std::cout << boost::lexical_cast<std::string>(2.0) << std::endl;

    return 0;
} 
```

如果没有 timer.hpp 的#include，它会编译。有了它，它会引发以下错误：

```
Invoking: GCC C++ Linker
g++ -Lsrc -o "timetest"  ./src/main.o   
./src/main.o: In function `__static_initialization_and_destruction_0':
/usr/include/boost/system/error_code.hpp:214: undefined reference to `boost::system::generic_category()'
/usr/include/boost/system/error_code.hpp:215: undefined reference to `boost::system::generic_category()'
/usr/include/boost/system/error_code.hpp:216: undefined reference to `boost::system::system_category()'
collect2: ld returned 1 exit status
make: *** [timetest] Error 1 
```

这是否意味着计时器库已被破坏？我正在使用 Boost 1.49.0。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:02:13.420

假设您使用 gcc，请尝试将 -lboost_system 添加到您的编译器命令行以链接到该库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:23:04.343

这些错误与 Boost Timer 库无关，不，库没有损坏。正如本[介绍材料](http://www.boost.org/doc/libs/1_49_0/libs/timer/doc/cpu_timers.html)所指定的，

> Boost.Timer 是作为单独编译的库实现的，因此您必须将二进制文件安装在链接器可以找到的位置。

...并在调用编译器时将相应的库添加为命令行参数（使用`-lLIBNAME`），或者在使用 IDE、CMake 或 Makefile 时将它们添加到项目配置中。在发表廉价言论之前，请确保您首先了解[Boost 入门指南中讨论的详细信息。](http://www.boost.org/doc/libs/1_49_0/more/getting_started/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:59:41.077

您还必须包含基本增强系统标头。检查您需要的默认标题的示例之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T06:01:11.557

您忘记链接 boost_system。像这样：

```
g++ -Lsrc -o "timetest"  ./src/main.o -lboost_system 
```

会好的

# multithreading - Qt 文档有问题

> ID：10044501
> 
> 赞同：1
> 
> 时间：2012-04-06T13:56:13.243
> 
> 标签：multithreading, qt

这里： http: [//qt-project.org/doc/qt-4.8/QThread.html](http://qt-project.org/doc/qt-4.8/QThread.html)在这个页面的底部是关于从现在开始应该如何在 Qt 中使用线程的注释。如果不是因为一点点细微差别，一切都会好起来的，即给出的示例中的第 16 行：

```
worker->moveToThread(thread); 
```

就我而言，此类中没有 fnc moveToThread，应该解释其实现，还是我没有得到什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:59:45.573

[`moveToThread`](http://qt-project.org/doc/qt-4.8/qobject.html#moveToThread)是 中的一个函数`QObject`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:59:26.230

它记录在 QObject 中。

如果你在给出的例子中检查worker和QObject之间的继承关系，你会发现worker是一个QObject。知道了这一点，我们查找 QObject ，果然，它有一个[moveToThread](http://qt-project.org/doc/qt-4.8/qobject.html#moveToThread)成员函数。

# saxon - 撒克逊转型失败 - 哪条线路有问题？

> ID：10044505
> 
> 赞同：0
> 
> 时间：2012-04-06T13:56:33.923
> 
> 标签：saxon

我正在使用 Saxon 将 XML 文件转换为 XHTML。我通过 Perl 脚本将 Saxon 称为命令行实例。

我收到以下错误：

验证错误 FORG0001：无效日期“-”（“-”之后没有年份）转换失败：报告了运行时错误

此错误是由传递给我编写的需要日期的 XSLT 函数的非日期引起的。但是，我在我的 XSLT 文件的很多地方都使用了这个函数，我不知道是哪个实例导致了这个问题。我可以手动进行故障排除，但是否有可能让这个转换错误也指出 XSLT 中的哪一行导致了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:41:05.423

抱歉，您没有得到这个问题的答案。请随意使用 Saxonica 的帮助列表和支持论坛，在这种情况下，我们将始终尽力提供帮助；StackOverflow 上的问题是否被注意到是偶然的。

Saxon 的最新版本产生了一个 XSLT 堆栈跟踪，它显示了发生运行时错误时的函数/模板调用堆栈。不清楚为什么你没有看到这个；这可能与 Perl 脚本有关。

另一种诊断技术是使用 -T 选项生成完整的执行跟踪；跟踪的最后几行将告诉您在故障点正在执行什么代码。

# php - 通过代码禁用 Magento 产品

> ID：10044506
> 
> 赞同：6
> 
> 时间：2012-04-06T13:56:37.163
> 
> 标签：php, magento

更准确地说，如何模拟当用户在后端的产品编辑页面中选择“状态：禁用”时所做的操作 - 使其不显示、销售、显示在各种列表等中？

根据我收集到的信息，Magento 在禁用时将产品的状态设置为 2，即`Mage_Catalog_Model_Product_Status::STATUS_DISABLED`.

我已经尝试了下面的代码`Mage_Catalog_Model_Product`来查看它是如何/如果它工作的，但它没有：

```
 public function getStatus()
    {
        return 2;
//        return $this->_getData('status');
    } 
```

但我认为这还不够，因为我认为 Magento 使用事件来通知听众产品已被禁用。

*PS：Magento EE 1.11.0.2*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T19:23:02.543

你可以使用

```
Mage::getModel('catalog/product_status')->updateProductStatus($product->getId(), $storeId, Mage_Catalog_Model_Product_Status::STATUS_DISABLED); 
```

看起来像这样

```
Mage_Catalog_Model_Product_Status

/**
 * Update status value for product
 *
 * @param   int $productId
 * @param   int $storeId
 * @param   int $value
 * @return  Mage_Catalog_Model_Product_Status
 */
public function updateProductStatus($productId, $storeId, $value)
{
    Mage::getSingleton('catalog/product_action')
        ->updateAttributes(array($productId), array('status' => $value), $storeId);

    // add back compatibility event
    $status = $this->_getResource()->getProductAttribute('status');
    if ($status->isScopeWebsite()) {
        $website = Mage::app()->getStore($storeId)->getWebsite();
        $stores  = $website->getStoreIds();
    } else if ($status->isScopeStore()) {
        $stores = array($storeId);
    } else {
        $stores = array_keys(Mage::app()->getStores());
    }

    foreach ($stores as $storeId) {
        Mage::dispatchEvent('catalog_product_status_update', array(
            'product_id'    => $productId,
            'store_id'      => $storeId,
            'status'        => $value
        ));
    }

    return $this;
} 
```

调度事件基于

```
 <catalog_product_status_update>
            <observers>
                <sales_quote>
                    <class>sales/observer</class>
                    <method>catalogProductStatusUpdate</method>
                </sales_quote>
            </observers>
        </catalog_product_status_update> 
```

这是方法

```
Mage_Sales_Model_Observer

   /**
     * Catalog Mass Status update process
     *
     * @param Varien_Event_Observer $observer
     * @return Mage_Sales_Model_Observer
     */
    public function catalogProductStatusUpdate(Varien_Event_Observer $observer)
    {
        $status     = $observer->getEvent()->getStatus();
        if ($status == Mage_Catalog_Model_Product_Status::STATUS_ENABLED) {
            return $this;
        }
        $productId  = $observer->getEvent()->getProductId();
        Mage::getResourceSingleton('sales/quote')->markQuotesRecollect($productId);

        return $this;
    } 
```

这是资源模型

```
Mage_Catalog_Model_Resource_Product_Status

/**
     * Update product status for store
     *
     * @param int $productId
     * @param int $storId
     * @param int $value
     * @return Mage_Catalog_Model_Resource_Product_Status
     */
    public function updateProductStatus($productId, $storeId, $value)
    {
        $statusAttributeId  = $this->_getProductAttribute('status')->getId();
        $statusEntityTypeId = $this->_getProductAttribute('status')->getEntityTypeId();
        $statusTable        = $this->_getProductAttribute('status')->getBackend()->getTable();
        $refreshIndex       = true;
        $adapter            = $this->_getWriteAdapter();

        $data = new Varien_Object(array(
            'entity_type_id' => $statusEntityTypeId,
            'attribute_id'   => $statusAttributeId,
            'store_id'       => $storeId,
            'entity_id'      => $productId,
            'value'          => $value
        ));

        $data = $this->_prepareDataForTable($data, $statusTable);

        $select = $adapter->select()
            ->from($statusTable)
            ->where('attribute_id = :attribute_id')
            ->where('store_id     = :store_id')
            ->where('entity_id    = :product_id');

        $binds = array(
            'attribute_id' => $statusAttributeId,
            'store_id'     => $storeId,
            'product_id'   => $productId
        );

        $row = $adapter->fetchRow($select);

        if ($row) {
            if ($row['value'] == $value) {
                $refreshIndex = false;
            } else {
                $condition = array('value_id = ?' => $row['value_id']);
                $adapter->update($statusTable, $data, $condition);
            }
        } else {
            $adapter->insert($statusTable, $data);
        }

        if ($refreshIndex) {
            $this->refreshEnabledIndex($productId, $storeId);
        }

        return $this;
    } 
```

没有直接执行这个函数的观察者，而是在 Status.php 中调度了一个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:28:15.453

也许您还需要修改`Mage_Catalog_Model_Product_Status`：

```
public function getProductStatus($productIds, $storeId = null)
{
    //return $this->getResource()->getProductStatus($productIds, $storeId);
    return 2;
} 
```

模块调用此方法`CatalogInventory`以确定产品是否可用。

# .net - 如何在另一个目录中分离托管和非托管 DLL

> ID：10044511
> 
> 赞同：2
> 
> 时间：2012-04-06T13:56:42.630
> 
> 标签：.net, dll, unmanaged, .net-assembly

我的发布文件夹是：

```
MyApp.exe
MyManagedDLL.dll
NativeDLL.dll 
```

MyApp 使用通过 pinvoke 本机 dll 调用的托管 dll。我试图将它们移动到另一个子文件夹文件夹并再次引用托管 dll，当我运行我的应用程序时它说它找不到 NativeDLL.dll。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:49:32.290

Windows 不知道它需要在子目录中查找 DLL。它只会在选定的几个位置查找 DLL，从包含 EXE 的文件夹开始。给它一个艰难的时期，它不是很有成效。但是您可以通过调用 SetDllDirectory() 来帮助它。请记住，您的用户不会关心 DLL 的位置。IT 部门倾向于使用简单的解决方案，当应用程序本身正在改变 Windows 搜索路径时，解决 DLL 加载问题从来都不是一件有趣的事情。

否则，允许 AnyCPU 可执行文件在 32 位和 64 位模式下运行是一种合理的方法。您将使用*两个*目录，一个带有 32 位版本的 DLL，另一个带有 64 位版本。并根据 IntPtr.Size 的值相应地调用 SetDllDirectory。

```
[DllImport("kernel32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
static extern bool SetDllDirectory(string lpPathName); 
```

# javascript - 动态更改字体大小以适应内容量

> ID：10044518
> 
> 赞同：1
> 
> 时间：2012-04-06T13:57:06.457
> 
> 标签：javascript, jquery, asp.net, rss, repeater

假设我有一个大小为 200px X 200px 的盒子。我在其中有一个 RSS 提要项目。

我的字体大小由 CSS 设置为 17px，带有粗体字重的文本阴影。

有没有办法动态改变字体大小，使整个博客标题可以显示在 200x200 的框中？

PS：我正在使用 asp:repeater 控件来创建 html 标记。所以可能我可以写一些 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:34:27.977

你可以做一些疯狂的事情：

```
while ($('div').scrollTop() == 0) {
    $('div').css({'font-size': '+=1'}).scrollTop(100);
}
$('div').css({'font-size': '-=1'});​ 
```

:)

演示
[http://jsfiddle.net/ZprxD/1/](http://jsfiddle.net/ZprxD/1/)

# image - Struts2 中没有为命名空间 / 和动作名称 userfiles/images/ 映射的动作

> ID：10044520
> 
> 赞同：0
> 
> 时间：2012-04-06T13:57:16.340
> 
> 标签：image, struts2, struts2-namespace

我在 Struts2 中显示一些图像时遇到了一些问题。加载具有来自数据库的图像的页面时，例如：

`<img src="userfiles/images/${imageName}" width="200px"/>`

或者

`<img src="userfiles/images/<s:property value="imageName"/>" width="200px"/>`

我不断收到这个奇怪的错误，告诉我没有路径**userfiles/images/**这样的操作。有什么问题？

过滤器配置：

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

例外：

```
There is no Action mapped for namespace / and action name userfiles/images/. - [unknown location]
at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189)
at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.estudii.filters.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:22)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

# sql - 索引视图和左连接一劳永逸

> ID：10044531
> 
> 赞同：25
> 
> 时间：2012-04-06T13:58:01.787
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 MSSQL Server 2008 R2，当我偶然发现索引视图时，我正在尝试优化我的视图。不幸的是，我的大多数视图都使用了索引视图不支持的左外连接。经过大量研究，我对解决此问题的最佳方法感到困惑。在我看来，我有以下选择：

**1)**使用“OR (IsNull(a) AND IsNull(b))”模拟左连接的技巧将左连接转换为内连接

我在几个地方找到了这个解决方案，但提到了性能损失。

**2)**将左连接转换为内连接，并将可空列的空值替换为空 guid (00000000-0000-0000-0000-0000000000000)，并在右表中添加具有匹配 guid 的单行。

这在性能方面似乎是最明显的，但对于否则为 NULL 的每一行来说，这似乎是浪费空间。

**3）**把我的观点分成两个观点。第一个视图是我可索引的大部分逻辑。第二个视图派生自第一个视图并添加左连接。

这里的想法是，通过索引的基本视图可能会提高性能。并且即使查询派生视图也会获得至少一些性能优势。

**4）**不要索引我的观点

是否会以比上述任何选项更高效的方式离开视图？

**5）**我没想到的想法

我编写了我的基本场景如下：

```
 CREATE TABLE [dbo].[tbl_Thumbnails](
        [ThumbnailId] [uniqueidentifier] NOT NULL,
        [Data] [image] NULL,
        [Width] [smallint] NOT NULL,
        [Height] [smallint] NOT NULL
     CONSTRAINT [PK_tbl_Thumbnails] PRIMARY KEY CLUSTERED 
    (
        [ThumbnailId] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

    GO

    CREATE TABLE [dbo].[tbl_Tags](
        [TagId] [uniqueidentifier] NOT NULL,
        [ThumbnailId] [uniqueidentifier] NULL
     CONSTRAINT [PK_tbl_Tags] PRIMARY KEY CLUSTERED 
    (
        [TagId] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO

    CREATE VIEW [dbo].[v_Tags] WITH SCHEMABINDING AS
    SELECT     dbo.tbl_Tags.TagId, dbo.tbl_Tags.ThumbnailId
    FROM         dbo.tbl_Tags LEFT OUTER JOIN
                          dbo.tbl_Thumbnails
    ON     dbo.tbl_Tags.ThumbnailId = dbo.tbl_Thumbnails.ThumbnailId

    GO

    INSERT INTO tbl_Tags VALUES ('16b23bb8-bf17-4784-b80a-220da1163584', NULL)
    INSERT INTO tbl_Tags VALUES ('e8b50f03-65a9-4d1e-b3b4-268f01645c4e', 'a45e357b-ca9c-449a-aa27-834614eb3f6e')
    INSERT INTO tbl_Thumbnails VALUES ('a45e357b-ca9c-449a-aa27-834614eb3f6e', NULL, 150, 150) 
```

现在，执行以下查询会产生“无法在视图“Test.dbo.v_Tags”上创建索引，因为它使用 LEFT、RIGHT 或 FULL OUTER 连接，并且索引视图中不允许有 OUTER 连接。请考虑使用 INNER 连接。 “：

```
CREATE UNIQUE CLUSTERED INDEX [TagId] ON [dbo].[v_Tags] 
(
[TagId] ASC
)
GO 
```

这是预期的行为，但是您会建议采取什么行动来从我的方案中获得最佳性能？这里的重点是最佳性能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:32:30.613

你为什么要索引你的观点？您在解决方案 2 中提到了“浪费空间”，但您是否知道当您为视图编制索引时，会将其保留在数据库中？

换句话说，您制作了视图将在数据库上返回的数据的副本，并且每次在源表上更新数据时，SQL Server 的一些内部机制必须在创建的这个新数据结构上更新它，因为现在 SQL Server从视图中读取，不再是表格。

如果您使用[Profiler](http://msdn.microsoft.com/en-us/library/ms181091%28v=sql.100%29.aspx) + [DTA](http://msdn.microsoft.com/en-us/library/ms173494%28v=sql.100%29.aspx)甚至[DMVS](http://msdn.microsoft.com/en-us/library/ms188754%28v=sql.100%29.aspx)，您可以提出要在表上创建的正确索引，任何视图都将从中受益

# php - quercus 和 PHP hmac 256 实现

> ID：10044536
> 
> 赞同：2
> 
> 时间：2012-04-06T13:58:31.240
> 
> 标签：php, facebook, hmac, sha

我正在尝试在quercus中使用hash_hmac（java下的php仿真），可惜还没有实现！

```
Fatal Error: hash_init: 'HmacSHA-256' is an unknown algorithm [hash_hmac] 
```

我有两个选择：

1) 创建一个自定义 php 函数来替换 hash_hmac。我在这里找到了一个，但它与 sha 256 不兼容：

[http://www.php.net/manual/en/function.hash-hmac.php#93440](http://www.php.net/manual/en/function.hash-hmac.php#93440)

您是否知道任何其他自定义实现？

2）让java解码字符串并将其传递给php。这是可行的：

[http://php-apps.appspot.com/hmac-sha-256-signature-for-amazon-product-api-requests.html](http://php-apps.appspot.com/hmac-sha-256-signature-for-amazon-product-api-requests.html)

但这是我第一次处理 php 类并且调试器不接受链接中给出的这个 php 代码：

```
<?php

import phpgae.HmacSHA256;

$c = new HmacSHA256;

echo $c->compute( 'your base string' ,  'your key' );

?> 
```

我应该如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:00:35.930

我自己正在寻找几个小时来找到解决方案。

结果它被报告为错误并在版本 4.0.29 中修复。

请参阅[http://bugs.caucho.com/bug_view_advanced_pa​​ge.php?bug_id=4833#bugnotes](http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=4833#bugnotes)

升级到较新版本将解决此问题。

# download - 安装梨包给出“无法下载”消息

> ID：10044541
> 
> 赞同：0
> 
> 时间：2012-04-06T13:58:57.150
> 
> 标签：download, pear, vps

我正在设置一个 Ubuntu（问题也发生在 Debian Squeeze 上）虚拟专用服务器。我已经安装了 php5 和 php-pear。例如，当我从命令中安装 pear 包时，或者尝试升级包时

```
# sudo pear upgrade-all 
```

pear 总是收到“无法下载”消息。上面的命令给出：

无法从“http://pear.php.net/get/Structures_Graph-1.0.4.tgz”下载，无法下载

> “pear/structures_graph”（文件 [http://pear.php.net:80/get/Structures_Graph-1.0.4.tgz](http://pear.php.net:80/get/Structures_Graph-1.0.4.tgz)无效（重定向但没有位置））错误：无法下载“pear/Structures_Graph”

我尝试清除 php-pear 并重新安装。我尝试了 Debian 而不是 Ubuntu，但得到了相同的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:00:27.907

可能是你在代理后面吗？

尝试找出发生了什么：

```
 $ curl -I  http://pear.php.net:80/get/Structures_Graph-1.0.4.tgz
 HTTP/1.1 200 OK
 ... 
```

你得到的错误表明你没有得到“200 OK”，而是一些不同的东西，这可能是由你的防火墙、代理等注入的。修复它。

# html - 如何在 img 标签上创建渐变

> ID：10044548
> 
> 赞同：1
> 
> 时间：2012-04-06T13:59:31.313
> 
> 标签：html, image, gradient, css

我正在创建一个带有背景图像的网站，该背景图像需要使用浏览器窗口调整大小以匹配其高度。我使用以下代码来实现这一点：

```
<style type="text/css">
#background-image {
position: absolute;
right: 0;
top: 0;
height: 100%;
background-image: url('image.jpg');
z-index: -1;
}
</style>
<img id="background-image" src="image.jpg" /> 
```

现在我想做的是在这张图片上应用一个渐变——让它在左边变成白色——这与图像的调整尺寸相匹配。有什么办法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:07:52.263

只需查看此站点上生成的代码：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

我想你也可以使用一个`z-index`和 png 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:39:17.180

you can use CSS to combine both the background image and the gradient

```
url('image.jpg') 0 0 no-repeat 100% 100%, linear-gradient(top, #000000 0%, #ffffff 100%); 
```

with the values that work best for you.

# javascript - 为什么 scrollWidth 只包含左侧填充？

> ID：10044551
> 
> 赞同：9
> 
> 时间：2012-04-06T13:59:35.307
> 
> 标签：javascript, html, css, browser, cssom

所以，我有`#Wrapper`一个固定宽度的 DIV。在那个 DIV 里面，我有另一个 DIV `#Panel`，它也有一个固定的宽度：

```
<div id="Wrapper">
    <p>...</p>
    <div id="Panel">Panel</div>
    <p>...</p>
</div> 
```

有时，Panel 的宽度大于 Wrapper 的宽度，在这种情况下，我想通过 JavaScript 加宽 Wrapper，使其完美地包裹 Panel。

**现场演示：http:** [//jsfiddle.net/H6rML/](http://jsfiddle.net/H6rML/)

我打算`.scrollWidth`在 Wrapper 上使用来确定 Panel 的宽度。但是，问题在于 Wrapper 具有水平填充，并且由于`.scrollWidth`某种原因仅包括 wrapper 的左侧填充。所以：

```
Wrapper.scrollWidth === Wrapper.LeftPadding + Panel.Width 
```

所以，给定：

```
#Wrapper {
    width: 200px;
    padding: 10px;        
}

#Panel {
    width: 300px;
} 
```

`Wrapper.scrollWidth`return `310px`，这不是很有用。如果`.scrollWidth`不包含任何填充并且只返回面板的宽度，我可以使用它（我会手动将填充添加到该值）。如果两个填充都包括在内，我也可以使用它。但是为什么只包括左边的填充？（顺便说一句，这种行为似乎是跨浏览器的。）

一些附加说明：

1.  我无法直接在 Wrapper 上设置宽度。在我的实际代码中，我在比 Wrapper 高几级的祖先元素上设置了宽度，并使用自定义 API 来设置宽度。这就是为什么我需要检索全部`320px`价值。

2.  我想要一个不依赖于 Wrapper 内容的解决方案。在我的演示中，它是一个面板，但在其他情况下，可能会有不同的元素溢出，甚至是多个元素。这就是我`.scrollWidth`选择 Wrapper 的原因。

有没有一种方法可以获取值`320px`而无需手动为值添加正确的填充`.scrollWidth`？

* * *

顺便说一句，根据标准，应该包括正确的填充：

> scrollWidth 属性必须返回运行这些步骤的结果：
> 
> 1.  如果元素没有任何关联的 CSS 布局框，则返回零并终止这些步骤。
>     
>     
> 2.  如果元素是根元素并且 Document 不是 quirks 模式，则返回 max(document content width, value of innerWidth)。
>     
>     
> 3.  如果元素是 HTML body 元素并且 Document 处于 quirks 模式，则返回 max(document content width, value of innerWidth)。
>     
>     
> 4.  **返回“padding-left”属性的计算值，加上“padding-right”的计算值，再加上元素的内容宽度。**

资料来源：[http ://www.w3.org/TR/cssom-view/](http://www.w3.org/TR/cssom-view/)

为什么浏览器的行为不相应？

* * *

为了进一步提高我的帖子的清晰度，让我总结两个主要问题：

(1) 如果标准规定应该在`.scrollWidth`值中包含正确的填充，那么为什么浏览器不采取相应的行为呢？

(2) 是否可以检索正确的值（`320px`在我的情况下），而无需手动添加正确的填充？

* * *

# 这个问题已经在另一个帖子里回答了

这个问题的答案在这里：[当子元素水平溢出时，为什么忽略了父元素的右填充？](https://stackoverflow.com/questions/10054870/when-a-child-element-overflows-horizontally-why-is-the-right-padding-of-the-par)

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:57:14.010

我不确定我是否理解正确，但根据我的阅读，我假设您想根据#Panel 更改#Wrapper 的宽度。在这种情况下，也许您可​​以尝试以下方法：

```
#Wrapper {
    display: inline-block;
    make sure to remove width from #Wrapper
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T14:21:46.023

我不知道为什么领先的浏览器直到今天才分享这个错误，但这里有一个问题和**解决方法的****演示`inline-block`**。

```
document.body.innerHTML += 'one.scrollWidth = '+ document.querySelector('.one').scrollWidth 
                          +'<br>two.scrollWidth = '+ document.querySelector('.two').scrollWidth
                          +'<br>three.scrollWidth = '+ document.querySelector('.three').scrollWidth
                          +'&nbsp;&nbsp;&nbsp;(fix applied to grand children)<br>four.scrollWidth = '+ document.querySelector('.four').scrollWidth +'&nbsp;&nbsp;&nbsp;(fix applied to direct child)';
```

```
.parent{
  border:1px solid rgba(50,150,220,1);
}
.child{
  background:rgba(100,200,255,0.3);
  padding:10px 20px;
  white-space:nowrap;
}
.scroll-container{
  border:1px solid red;
  display:inline-block;
  overflow:hidden;
}
.two, .three, .four{
  width:60px;
}
.three .child{
  display:inline-block;
}
.four .parent{
  display:inline-block;
}
```

```
<div class="scroll-container one">
  <div class="parent">
    <div class="child">Lorem ipsum dolor</div>
    <div class="child">Lorem ipsum dolor sit amet</div>
  </div>
</div>
<br>
<div class="scroll-container two">
  <div class="parent">
    <div class="child">Lorem ipsum dolor</div>
    <div class="child">Lorem ipsum dolor sit amet</div>
  </div>
</div>
<br>
<div class="scroll-container three">
  <div class="parent">
    <div class="child">Lorem ipsum dolor</div>
    <div class="child">Lorem ipsum dolor sit amet</div>
  </div>
</div>
<br>
<div class="scroll-container four">
  <div class="parent">
    <div class="child">Lorem ipsum dolor</div>
    <div class="child">Lorem ipsum dolor sit amet</div>
  </div>
</div>
<br>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:35:42.567

您可以使用 jQuery 来执行此操作：

```
$(function() {
    $("#Wrapper").width($("#Panel").outerWidth());
}); 
```

这考虑了`#Panel`' 的填充、边距等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:09:56.217

尝试这个：

```
#Wrapper {
    min-width: 200px;
    padding: 10px;
    float: left; 
} 
```

或使用 jQuery

```
$(document).ready(function() {
    var width = jQuery("#Panel").width();
    $("#Wrapper").width(width);
}); 
```

# javascript - 从自动完成插件的 JSON 数组中获取额外的参数

> ID：10044552
> 
> 赞同：1
> 
> 时间：2012-04-06T13:59:39.163
> 
> 标签：javascript, jquery, json, autocomplete

我有自动完成输入的下一个功能：

```
$("#auto").autocomplete({
        source:"/autocomplete.php",
        minLength: 5,
        _renderItem: function( ul, item) { 
            return $( "<li></li>" ) 
                .data( "item.autocomplete", item ) 
                .append( $( "<a></a>" ).text( item.label ) ) 
                .appendTo( ul ); 
            }   

}); 
```

JSON 数组包含 3 个参数（ value 、 label 、 extra ）。在选择自动完成列表中的元素后，如何获取第三个参数并将其附加到另一个输入文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:10:55.120

使用[选择](http://jqueryui.com/demos/autocomplete/#event-select)事件。

事件处理程序获得两个参数：

*   事件对象
*   一个`ui`对象，其中包含所选项目的数据`ui.item`

例子：

```
$("#auto").autocomplete({
        source:"/autocomplete.php",
        minLength: 5,
        select: function(e, ui) {
            // "ui.item" is the data item
            alert(ui.item.extra);
        }    
}); 
```

* * *

顺便说一句，您尝试覆盖该`_renderItem`方法的方式不正确，应该是：

```
$("#auto").autocomplete({
    source:"/autocomplete.php",
    minLength: 5,
})
.data('autocomplete')
._renderItem = function( ul, item) { 
    return $( "<li></li>" ) 
        .data( "item.autocomplete", item ) 
        .append( $( "<a></a>" ).text( item.label ) ) 
        .appendTo( ul ); 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:00:56.700

```
select: function(e, ui) {
        $('input#anotherInputTextId').val(ui.item.extra) ;
    } 
```

# bash - Emacs lisp——如何提交`&&`到shell？

> ID：10044555
> 
> 赞同：3
> 
> 时间：2012-04-06T13:59:42.053
> 
> 标签：bash, elisp

我想用`&&`-- 例如将一些 shell 命令串在一起，

```
wget -c http://repository/file.tar.gz && tar -xzvf file.tar.gz && rm file.tar.gz 
```

通常我会使用`start-process`，但这个功能似乎被`&&`. 我可以按顺序运行这三个命令，但在这种情况下，与许多其他命令一样，我想确保在第二个命令执行之前第一个命令没有被错误中止，依此类推。

Python 的`subprocess.call`函数有一个`shell=True`参数，您可以通过它发送整行——emacs lisp 中是否有这样的函数，或者在这种情况下我应该寻找另一种解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:23:16.440

您可能想使用`shell-command`.

# php - Ajax 和 PHP 问题

> ID：10044557
> 
> 赞同：0
> 
> 时间：2012-04-06T13:59:42.553
> 
> 标签：php, ajax

我的 ajax 和 php 代码又遇到了麻烦。该语句我一直未能获得成功的语句。这是我的代码

```
 <script type="text/javascript">
            $(document).ready(function(){
                $("#login_a").click(function(){
                    $("#shadow").fadeIn("normal");
                     $("#login_form").fadeIn("normal");
                     $("#Username").focus();
                });
                $("#cancel_hide").click(function(){
                    $("#login_form").fadeOut("normal");
                    $("#shadow").fadeOut();
               });
               $("#login").click(function(){

                    username=$("#Username").val();
                    password=$("#Password").val();
                     $.ajax({
                        type: "POST",
                        url: "1.php",
                        data: "Username="+username+"&Password="+password,
                        success: function(html){
                          if(html=='1')
                          {               $("#login_form").fadeOut("normal");
                            $("#shadow").fadeOut("normal");
                          document.location = '/reward/home.php';
                          }
                          else
                          {
                                $("#add_err").html("Wrong Username or Password");
                          }
                        },
                        beforeSend:function()
                        {
                             $("#add_err").html("Loading...")
                        }
                    });
                     return false;
                });
            });
            </script>
         </head>
         <body>
            <div id="login_form">

                    <form action="" id="loginForm">
                        <label>User Name:</label>
                        <input type="text" id="Username" name="Username" />
                        <label>Password:</label>
                        <input type="password" id="Password" name="Password" />
                        <label></label><br/>
                        <input type="submit" id="login" value="Login" />
                        <input type="button" id="cancel_hide" value="Cancel" />
                    </form>
                <div class="err" id="add_err" style="color:#FF0000; font-weight:bold"></div>
                </div> 
```

我的 SQL 连接都位于我的函数文件中。当我绕过ajax并从表单转到dologin.php时，它会回显s“1”，这应该意味着成功并让我登录。
这是我的dologin.php文件......

```
 $root = $_SERVER['DOCUMENT_ROOT'];
            include($root."/reward/function.php");

                $Username = mysql_real_escape_string($_REQUEST['Username']);
                $Password = mysql_real_escape_string($_REQUEST['Password']);
                $Password2 = ($Password);
                $sql = mysql_query("SELECT * FROM PERSON WHERE Username = '$Username' AND Password = '$Password2'") or die(mysql_error());
                $sql2 = mysql_query("SELECT * FROM PERSON WHERE Username = '$Username'");
                if(mysql_num_rows($sql)==1){
                    echo "1";
                    while($info = mysql_fetch_assoc($sql)){
                        $FName = $info['FName'];
                        $_SESSION['FName24'] = $FName;
                    }
                }
                elseif (mysql_num_rows($sql)>1){
                    echo "2";
                }
                    elseif (mysql_num_rows($sql)==0){
                    echo "0";
                } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:04:43.683

When you are using Google Chrome, hit `F12` and go to tab Console. from there you could see the errors of your pages.

Put this code here

```
 $.ajax({
                    type: "POST",
                    url: "1.php",
                    data: "Username="+username+"&Password="+password,
                    success: function(html){
                      console.log(html)
                      if(html=='1')
                      {               $("#login_form").fadeOut("normal");
                        $("#shadow").fadeOut("normal");
                      document.location = '/reward/home.php';
                      }
                      else
                      {
                            $("#add_err").html("Wrong Username or Password");
                      }
                    },
                    beforeSend:function()
                    {
                         $("#add_err").html("Loading...")
                    }
                });
                 return false;
            }); 
```

You should see your error

# c# - 捕获全局异常是处理重新连接的好方法吗？

> ID：10044559
> 
> 赞同：1
> 
> 时间：2012-04-06T13:59:58.207
> 
> 标签：c#, wpf

我有一个不断增长的应用程序，其中包含多个用户控件、窗口等，它们都通过在程序打开（登录服务器）时建立的套接字发送大量数据。如果服务器死机或类似的事情，我希望能够以更优雅的方式处理随后的 SocketException，而不是将几乎每个代码块包装在针对该特定异常的 try-catch 语句中。

```
void App_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e) 
```

使用它应该捕获任何抛出的未处理异常，简单地检查异常是否是套接字异常然后启动“您已断开连接，请重新连接”代码是不是一个坏主意？使用这个应用程序，您可以放心地假设任何抛出的套接字异常中有 99% 是由于服务器断开连接造成的。

当我谈到这个主题时，知道在异常类型已经被捕获后如何检查它吗？通过上面的代码，我可以简单地用 e.Exception 得到原始异常。我不确定如何用 if 语句来检查异常的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:04:07.930

恕我直言，这是一个非常糟糕的主意......

更好的解决方案是将访问套接字的代码移动到它自己的类中......应用程序中需要与服务器交互的任何内容都通过该类......这样任何与套接字相关的异常都可以在中央处理地点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:37:06.443

```
Using that should catch any unhandled exception that gets thrown 
```

捕捉所有的例外，你可以做的很少不是一个好主意。

[Eric Lippert 有一篇关于处理什么异常的非常好的文章。](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)

我同意 Yahia 的观点，即访问 Socket 的代码移到了它自己的类中。

```
public class SocketHandling
{

 //if Something goes wrong, throw exception. It is up to the caller how to handle the exception.
}

main()
{
  try
{

}

catch(SocketRelatedException)
{
  //handle the exception.
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:06:01.487

我不认为检查异常类型是不好的做法。

```
catch(Exception ex) 
            {
            if (ex is System.Net.Sockets.SocketException)
                {
                    doSomething(ex);
                }
            else 
              throw;

            } 
```

此外，您可以捕获特定的异常类型...

# entity-framework - EntityFramework 和 FluentAPI 与 ComplexTypes 一起使用

> ID：10044567
> 
> 赞同：3
> 
> 时间：2012-04-06T14:00:47.367
> 
> 标签：entity-framework, fluent, complextype

我正在使用 Entity Framework 4.3 Code-FIrst 创建一个新的数据库模型；使用流畅的 API。虚拟模型如下。

所以我的主要对象是Something，我需要跟踪它。所有其他项目都是补充。通常在数据库中，我会分配一个表，例如联系人、一个主键和一个用于关系的外键。但是，阅读有关 Fluent API 和[复杂类型](http://msdn.microsoft.com/en-us/library/hh295847%28v=vs.103%29.aspx)的更多信息，尤其是[这篇文章](http://2guysfrommumbai.wordpress.com/2011/10/24/entity-framework-complex-types/)，我注意到（我认为）我可以让 EF 负责链接这些对象/表，我不必担心它们作为存储库我的 MVC 应用程序。

所以请注意：

*   与联系人有一对多的关系
*   联系人与地址有一对多
*   联系人与 PhoenNumber 一对多

**知道了这一点，我的困惑在于复杂类型，因为 Contact 是 Somethign 的 Complext 类型，而 Address 和 PhoneNumber 是 Somethign 的复杂类型。**

*   我将如何在 Fluent API 中设置这种关系？
*   我怎么说地址是必需的？
*   在 ASP.NET MVC 中使用域驱动开发，我是否必须维护 IContactRepository 和 IAddressRepository 的存储库才能推送到控制器？

（请注意，为简洁起见，省略了一些代码。）

```
// attempt
void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.ComplexType<Contact>();

    modelBuilder.ComplexType<Contact>().Property(p => p.Address).IsRequired();  // COMPILER ERROR

    modelBuilder.ComplexType<Address>();
    modelBuilder.ComplexType<PhoneNumber>();    
}

// DUMMY MODEL
class Something()
{
    void Something()
    {
        this.Contact = new HashSet<Contact>( );
    }

    DateTime DOB { get; set; }
    int YearsEmployed { get; set; }
    ICollection<Contact> Contact { get; set; }
}

class Contact()
{
    void Contact()
    {
        this.Address = new HashSet<Address>();
    }

    ICollection<Address> Address { get; set; }
}

class Address()
{
        string Street1 { get; set; }
        string Street2 { get; set; }
        string State { get; set; }
        string City { get; set; }
        string Zip { get; set; }
        OptionName OptionName { get; set; }
}

class PhoneNumber()
{
    string Number
    OptionName OptionName { get; set; }
}

class OptionName()
{
    string OptionName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:53:57.753

没有你的类都不是复杂类型。[复杂类型](http://msdn.microsoft.com/en-us/library/bb738472.aspx)必须遵循严格的规则。它们不能包含导航属性，并且因为它们映射到拥有实体的表，它们不能以任何其他形式表示，除了与拥有实体的一对一关系。

# javascript - 在布尔语句中使用 continue/break [V8]

> ID：10044569
> 
> 赞同：2
> 
> 时间：2012-04-06T14:00:52.557
> 
> 标签：javascript, v8

如果

```
true && (function () { console.log('executed'); })() 
```

可以，那为什么

```
true && continue; 
```

或者

```
true && (continue); 
```

不起作用，例如 V8 (Node) 抛出：

```
SyntaxError: Unexpected token continue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:12:42.527

在 JavaScript 中，有表达式和语句。语句可以包含表达式，但反之则不行。该语句`true && false;`是表达式语句。

[`&&`](http://es5.github.com/#x11.11)需要两个表达式。

[`true`](http://es5.github.com/#x7.8.2)和都是*表达式*- 一个布尔表达式评估为[`(function() { ... })()`](http://es5.github.com/#x13)，一个函数表达式（包裹在括号内然后调用）评估为。*`true``undefined`*

 *[`continue`](http://es5.github.com/#x12.7)是一个*语句*，所以你不能使用`&&`. 您必须使用[`if`](http://es5.github.com/#x12.5)，因为`if`确实接受在条件为真时运行的语句。

根据规范，这是正确的行为，不应该是特定于 V8 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:06:04.910

因为`continue`不是返回一些值的表达式。完整的布尔表达式及其部分必须返回一些值。*

# wordpress - WordPress 自定义图像滑块使用页面而不是帖子？

> ID：10044571
> 
> 赞同：0
> 
> 时间：2012-04-06T14:01:03.560
> 
> 标签：wordpress

我通常使用帖子中的特色图像创建自定义图像滑块，有时在某个类别或自定义帖子类型中。有没有办法可以做到这一点，但显示页面，而不是帖子？

我如何能够选择图像滑块中显示的页面以及从该页面检索所有元数据需要什么代码？特色图片、页面标题、摘录和固定链接？

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:18:02.333

使用 is_page() wordpress 内置函数。

有关详细信息，请参阅[http://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

# css - CSS 字体粗细选项

> ID：10044574
> 
> 赞同：5
> 
> 时间：2012-04-06T14:01:18.337
> 
> 标签：css

我在 CSS 字体粗细中没有得到 100 到 900 的值。我看到 100 到 500 像常规尺寸，600 到 900 像粗体。只有两种字体粗细。尝试了 h1，font-size:60px 等。我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:10:23.137

As Rich said, depends on the font, but it's a really good question because it does impact how the font renders, especially @font-face fonts. If you get the number wrong, or just use 'bold' instead of the correct number, it can render the font as jaggy.

This is a good article on that: [http://css-tricks.com/watch-your-font-weight/](http://css-tricks.com/watch-your-font-weight/)

Sorry not to be able to answer your question - I did search and can't find any sites listing available font-weights per font. Would be a handy resource! For now you could just try the various font selling sites like [Fontspring](http://www.fontspring.com/), [Google Web Fonts](http://www.google.com/webfonts#ChoosePlace%3aselect) etc, or search for the font you're using and go to one of the sites where it's sold; hopefully that site will give its available font-weight sizes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:02:52.370

这取决于您使用的字体。有些字体没有其他字体那么多的权重。如果你有 Helvetica Neue，它是一个很好的测试工具——它有很多重量。

# android - 在 Android 应用程序中实现哔声

> ID：10044575
> 
> 赞同：4
> 
> 时间：2012-04-06T14:01:27.560
> 
> 标签：android, audio

我有一个具有所需功能的应用程序。

但是，在某些时候会显示祝酒词，我希望在显示祝酒词的同时播放双哔声，以提醒用户注意正在显示的消息。

我不确定在 android 中播放声音的最佳方法是什么，或者是否有一些我可以访问用于警报的默认声音。

**更新**

我的主要活动文件中有以下代码：

```
 public void playAlertTone(final Context context){
            Thread t = new Thread(){
                    public void run(){
                        MediaPlayer player = null;
                        int countBeep = 0;
                        while(countBeep<2){
                        player = MediaPlayer.create(context,R.raw.beep);
                        player.start();
                        countBeep+=1;
                        try {

                            Thread.sleep(player.getDuration()+100);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        }
                    }
                };
                t.start();   

            } 
```

我在**res/raw中有一个名为 beep 的声音文件**

如何在显示 toast 的 if 语句中调用此方法，以便 2 同时发生？

**更新 2：**

这是我尝试调用警报方法的代码：

```
 if (elapsedTime > hourAlert)
        {
            LayoutInflater inflater = getLayoutInflater();
            View layout = inflater.inflate(R.layout.toast_layout,
                                           (ViewGroup) findViewById(R.id.toast_layout_root));
            TextView text = (TextView) layout.findViewById(R.id.text);
            text.setText("HOUR PASSED");

            Toast toast = new Toast(getApplicationContext());
            toast.setGravity(Gravity.BOTTOM, 0, 160);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();
            playAlertTone(getApplicationContext()); // Edited here now call 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:18:26.120

您可以将音频文件放在项目的**res/raw**文件夹中

并在线程中播放音频

```
public  void playAlertTone(final Context context){

    Thread t = new Thread(){
            public void run(){
                MediaPlayer player = null;
                int countBeep = 0;
                while(countBeep<2){
                player = MediaPlayer.create(context,R.raw.beep);
                player.start();
                countBeep+=1;
                try {

                                // 100 milisecond is duration gap between two beep
                    Thread.sleep(player.getDuration()+100);
                                       player.release();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                }
            }
        };

        t.start();   

    }

//call it like this from your activity' any method

    if(myCondition){

    Toast.makeText(getApplicationContext(), text, duration).show();

    playAlertTone(getApplicationContext());

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:04:57.133

使用`MediaPlayer`,

> [http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

有很多关于如何使用的知识，在上面的链接中有介绍。这是一个说明用法的衬衫片段，

```
final MediaPlayer mediaPlayer = new MediaPlayer();
try {
    mediaPlayer.reset();
    mediaPlayer.setDataSource(...);
    mediaPlayer.prepare();
} catch (IllegalStateException e) {
    mediaPlayer.release();
} catch (IOException e) {
    mediaPlayer.release();
} catch (IllegalArgumentException e) {
    mediaPlayer.release();
}
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

    public void onCompletion(MediaPlayer mp) {
        mediaPlayer.release();
            }
    });
mediaPlayer.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:05:11.000

```
try {
    AssetFileDescriptor afd = getAssets().openFd("gavel_single.wav");
    mMediaplayer = new MediaPlayer();
    mMediaplayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
    afd.close();
    mMediaplayer.prepare();
    mMediaplayer.start();
    mMediaplayer.setOnCompletionListener(new OnCompletionListener() {
        public void onCompletion(MediaPlayer mMediaPlayer) {
            mMediaPlayer.stop();
            mMediaPlayer.release();
        }
    });
} catch (Exception e) {
        e.printStackTrace();
} 
```

将您的音乐文件放在资产文件夹中

# c# - 错误无法将“ASP.cp_adminsmaster_master”类型的对象转换为“System.Web.UI.HtmlControls.HtmlControl”

> ID：10044578
> 
> 赞同：0
> 
> 时间：2012-04-06T14:01:31.660
> 
> 标签：c#, asp.net, exception

我在运行时将 html 通用控件创建为 (ul) 和 (il) 然后我想在我的页面内循环以在运行时获取所有 ul 和 il 编写此代码以在页面控件内循环

```
foreach (HtmlGenericControl item in Page.Controls)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:04:56.823

使用[`OfType<T>()`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)扩展方法只获取 HtmlGenericControls。

```
foreach (HtmlGenericControl item in Page.Controls.OfType<HtmlGenericControl>())
{

} 
```

# ios - 从命令行发布时，AIR iOS 应用程序要慢得多

> ID：10044579
> 
> 赞同：0
> 
> 时间：2012-04-06T14:01:43.277
> 
> 标签：ios, flash, command-line, air, flash-cs5

我有一个简单的 AIR for iOS 应用程序，但在 Flash IDE 中。当使用 Flash Pro CS 5.5（我认为运行 AIR 2.6）发布它并使用 iFunBox 将其上传到我的 iPad 时，它运行良好。

我将它发布到 App Store 并注意到它的“支持的语言”字段列出了很多我的应用程序并不真正支持的语言。所以我决定用 AIR 3.2 重新发布它，并将新的 supportedLanguages 标签添加到 app.xml 描述符文件中。

当然，由于 Flash CS 5.5 不允许您选择所需的 Flex SDK/AIR SDK 版本，我不得不通过命令行发布我的 IPA 文件。这里是：

```
adt -package -target ipa-app-store -storetype pkcs12 -keystore %KEYSTORE% -storepass %STOREPASS% -provisioning-profile %PROVISION% %DESTINATION% %APPDESCRIPTOR% %INPUTSWF% %ICONSPATH% 
```

此命令行有效，但是当将新创建的 IPA 上传到 iPad 时，应用程序运行速度比以前的版本慢得多，即使我没有更改任何代码行。IPa 文件也更重（以前是 3989Kb，现在是 4521Kb）。

知道有什么问题吗？您知道 Flash IDE 使用哪些命令行参数来发布 AIR iOS 应用程序吗？

谢谢！

# git - 从 Git 存储库部署 PHP 网站

> ID：10044583
> 
> 赞同：6
> 
> 时间：2012-04-06T14:02:09.680
> 
> 标签：git, deployment

我正试图围绕 Git 并使用（或不使用）它来部署网站。我一直在谷歌搜索、搜索和阅读，但找不到我的具体案例或疑虑的答案。我仍处于计划阶段，但希望从一开始就做好并找到适合我的工作流程。我将尝试尽可能清楚地解释情况：

我有一个远程 VPS，在 www.example.com 上运行我的实时网站，在 dev.example.com 上运行开发版本（它们位于 /var/www/example/htdocs/ 和 /var/www/example/subdomains/dev /)。

开发是从 /opt/git/example.git/ 中的裸存储库运行的。裸仓库中有一个 master 和 development 分支。我和其他开发人员在我们的本地机器上都有这个存储库的克隆。我们从开发分支中提取并从那里工作。这个想法是 dev.example.com 有来自开发分支的最新代码，一旦经过正确测试，我们合并到 master，添加标签并更新 example.com（基本上，这个[git 流](http://nvie.com/posts/a-successful-git-branching-model/)）。

我在 Git IRC 频道上找到的第一种方法使用挂钩来更新存储库，但这感觉非常有限，有时也不需要，我想在推送后自己在服务器上运行一个命令，更新开发环境。另一个命令（或 shell 脚本）将在合并开发后从主分支更新实时站点）。我还找到了 Capistrano，但目前这似乎有点过头了。

在阅读的过程中，我发现很多人建议在遥控器上再创建两个克隆：一个用于实时站点，一个用于开发站点，必要时拉入分支。然而，这也使版本控制文件可以通过网络访问，这是我不想要的。理想情况下，我想要一个没有任何 git 文件或文件夹的“干净”副本。

我还找到了一种使用 git archive 的方法，但是从我的裸存储库运行 git archive 只允许我归档 master 分支。我使用`git archive --format=tar HEAD | (cd /var/www/example/htdocs/ && tar xf -)`/opt/git/example.git/ 中的命令执行此操作。

我觉得这种`git archive`方法让我最接近答案，但我受限于我缺乏 Git 知识。我可以更改命令以使用分支而不是 HEAD（当我尝试使用 origin/master 而不是 HEAD 时，出现错误）？有没有人可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:57:43.570

您可以使用任何树形（任何分支、标签、sha1 哈希等）作为 git 存档的参数。您不能使用 origin/master，因为您在裸仓库中并且它没有来源。您需要使用本地分支名称，例如

```
git archive --format=tar develop 
```

# magento - Magento 翻译是如何工作的？

> ID：10044584
> 
> 赞同：6
> 
> 时间：2012-04-06T14:02:10.867
> 
> 标签：magento, csv, translate

我想只使用一个 csv 文件来翻译前端 Magento 商店。所以我这样做了：

我创建了一个名为 Translator 的自定义模块。在其 config.xml 中，我放置了以下几行：

```
<config>
....
<translate>
<modules>
<MyPackage_Translator>
<files>
<default>MyPackage_Translator.csv</default>
</files>
</MyPackage_Translator>
</modules>
</translate>

</config> 
```

然后我在我的 Helper 文件夹中创建了默认的 Data.php 助手。

然后在 app/locale/de_DE 中，我创建了 MyPackage_Translator.csv 文件，我在其中放置了所有字符串。

现在，如果在 phtml（无论模块）文件中，如果我执行以下操作：

```
echo $this->__('My string'); 
```

它工作得很好。但我很好奇为什么 Magento 会在 MyPackage_Translator.csv 中查找字符串？

我还注意到，如果我使用 $this->__('some string'); 在 Customer 模块中，Magento 将首先在 app/locale/de_DE/Mage_Customer.csv 文件中查找字符串，如果在那里找不到该字符串，那么它将在我的 MyPackage_Translator.csv 文件中查找。这是为什么？例如，为什么它不在 Enterprise_Customer.csv 文件中？

有人可以解释一下 Magento 在寻找翻译文件时的工作流程吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T18:37:14.590

当你调用 $this->__('some text');

你可以先看看`Mage_Core_Helper_Abstract`

```
/**
 * Translate
 *
 * @return string
 */
public function __()
{
    $args = func_get_args();
    $expr = new Mage_Core_Model_Translate_Expr(array_shift($args), $this->_getModuleName());
    array_unshift($args, $expr);
    return Mage::app()->getTranslator()->translate($args);
} 
```

接下来是`Mage_Core_Model_App`

```
/**
 * Retrieve translate object
 *
 * @return Mage_Core_Model_Translate
 */
public function getTranslator()
{
    if (!$this->_translator) {
        $this->_translator = Mage::getSingleton('core/translate');
    }
    return $this->_translator;
} 
```

交给哪个`Mage_Core_Model_Translate`

```
/**
 * Translate
 *
 * @param   array $args
 * @return  string
 */
public function translate($args)
{
    $text = array_shift($args);

    if (is_string($text) && ''==$text
        || is_null($text)
        || is_bool($text) && false===$text
        || is_object($text) && ''==$text->getText()) {
        return '';
    }
    if ($text instanceof Mage_Core_Model_Translate_Expr) {
        $code = $text->getCode(self::SCOPE_SEPARATOR);
        $module = $text->getModule();
        $text = $text->getText();
        $translated = $this->_getTranslatedString($text, $code);
    }
    else {
        if (!empty($_REQUEST['theme'])) {
            $module = 'frontend/default/'.$_REQUEST['theme'];
        } else {
            $module = 'frontend/default/default';
        }
        $code = $module.self::SCOPE_SEPARATOR.$text;
        $translated = $this->_getTranslatedString($text, $code);
    }

    //array_unshift($args, $translated);
    //$result = @call_user_func_array('sprintf', $args);

    $result = @vsprintf($translated, $args);
    if ($result === false) {
        $result = $translated;
    }

    if ($this->_translateInline && $this->getTranslateInline()) {
        if (strpos($result, '{{{')===false || strpos($result, '}}}')===false || strpos($result, '}}{{')===false) {
            $result = '{{{'.$result.'}}{{'.$translated.'}}{{'.$text.'}}{{'.$module.'}}}';
        }
    }

    return $result;
} 
```

它返回结果文本。这是如何处理所有内容的快速浏览，您应该查看类本身以获得更深入的理解。

# tsql - 如何将分隔的 id 字符串传递给 tsql 并处理每个

> ID：10044587
> 
> 赞同：0
> 
> 时间：2012-04-06T14:02:27.367
> 
> 标签：tsql

我想将一个逗号分隔的 PK (int) 字符串传递到一个 sql 存储过程中。然后，proc 将使用包含每个 PK 的 where 子句对表执行更新语句。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:58:11.077

我们需要更多信息。例如，如果更新使用来自表（连接）的信息，或者使用相同的信息更新行，那么您可以使用：

```
Update tableName
set ....
where tableName.id in @strOfIdsPassedIn 
```

# javascript - 使用 jQuery 1.4.4 这个简单的方法由于某种原因失败了

> ID：10044591
> 
> 赞同：3
> 
> 时间：2012-04-06T14:02:49.380
> 
> 标签：javascript, jquery

```
$.get($(this).attr('rel'), function(response){}, 'script')
.error(function(){ alert('this failed')}); 
```

我明白了。`.error is not a method`. 但它是在 1.4.3 版本中添加的

[http://api.jquery.com/error/](http://api.jquery.com/error/)

我有某种类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:07:56.380

jQuery 1.4.3 中的返回值`$.get`没有`.error`方法。我实际上不确定返回值是什么，但你应该能够检查它.. 不管它是什么，它都没有`.error`. 您将不得不将其绑定到其他东西。

`$.get`在某些时候，jQuery 开始从, `$.post`,等返回 jqxhr 对象`$.ajax`。我相信这是在 1.5 之后引入`Deferred`的，但我不是 100% 确定。jqxhr 对象有`.done`,`.fail`和`.always`（实现`Deferred`），所以你可以`$.get().fail()`在 jQuery 1.5 之后的某个时候做。你绝对可以在 jQuery 1.7 中使用。

升级 jQuery 或使用`$.ajax`with`error`作为设置。

# python - LONG的python json自定义解码

> ID：10044597
> 
> 赞同：1
> 
> 时间：2012-04-06T14:03:11.193
> 
> 标签：python, json, mongodb, pymongo, nosql

我在测试插入 mondgodb python 对象时遇到了问题，该对象是使用默认 json 解码器 json.load(....

我有这个错误：

```
OverflowError: BSON can only handle up to 8-byte ints 
```

问题是由 python 对象中的某些值引起的，这些值被解码很长，而 mongodb 无法处理这些值。

我该如何解决这个问题，这里有什么想法吗？

想到自定义解码器，所以当一些大数字被解码为 long > 而不是在那里使用的字符串时。

其他解决方案是：获取其中包含一些可能的长字段的 python 对象并将所有这些字段转换为字符串。

我对python和json没有太多经验。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:38:13.517

我终于找到了令人满意的问题解决方案：

```
`req = urllib2.Request(url)
opener = urllib2.build_opener()
file_json = opener.open(req)
json_response = json.load(file_json, parse_int=str)` 
```

所以，这里的关键点是：`parse_int=str`它将每个 JSON int 解码为字符串，所以 pymongo 会毫无问题地吞下它。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:21:56.957

你可以做这样的事情

```
>>> import json
>>> longhandler = lambda obj: str(obj) if isinstance(obj, long) else None
>>> data=['hello long!',100L]
>>> json.dumps(data,default=longhandler)
["hello long!","100"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:37:40.070

问题是 python 正在将它从 json 加载的数字解释为 int。

如果您运行以下命令，您将能够看到系统的最大整数值。

```
>>> import sys
>>> sys.maxint
9223372036854775807 
```

这是 2^(64-1) 所以你需要弄清楚 python 认为 int 的数字何时应该存储为 32 位 int 或 long 并强制它为 long。

只需在您的 json 解码器中执行以下操作：

```
if abs(int(num)) > 2**31:
    long(num) 
```

然后保存的时候会很长：

```
>>> from pymongo import Connection
>>> c = Connection()
>>> collection = c['test']['test']
>>> doc = {"longnum": long(123)}
>>> doc
{'longnum': 123L}
>>> collection.insert(doc)
ObjectId('4f7f0491add3616704000000')
>>> collection.find_one()
{u'_id': ObjectId('4f7f0491add3616704000000'), u'longnum': 123L}
>>> 
```

# c# - Int to Decimal Conversion - Insert decimal point at specified location

> ID：10044603
> 
> 赞同：27
> 
> 时间：2012-04-06T14:04:21.310
> 
> 标签：c#, int, decimal, type-conversion, decimal-point

I have the following int 7122960
I need to convert it to 71229.60

Any ideas on how to convert the int into a decimal and insert the decimal point in the correct location?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-06T14:06:31.950

```
int i = 7122960;
decimal d = (decimal)i / 100; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T14:06:12.763

简单的数学。

```
double result = ((double)number) / 100.0; 
```

尽管您可能想使用`decimal`而不是`double`：[十进制与双精度！- 我应该使用哪一个以及何时使用？](https://stackoverflow.com/q/1165761/866022)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-06T14:08:24.127

将其声明为`decimal`使用`int`变量并将其除以 100

```
int number = 700
decimal correctNumber = (decimal)number / 100; 
```

编辑：巴拉的反应更快

# asp.net - RadGrid.Rebind() 和 RadGrid.MasterTableView.Rebind() 有什么区别？

> ID：10044612
> 
> 赞同：5
> 
> 时间：2012-04-06T14:05:01.770
> 
> 标签：asp.net, telerik, webforms, radgrid

将 RadGrid 用于 Asp.Net Ajax（来自 Telerik） 我需要重新设置 CurrentPageIndex。[一些例子](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-and-paging-reset.aspx)说下一行代码应该是**myGrid.Rebind()**而[其他人](https://stackoverflow.com/questions/3086809/telerik-radgrid-doesnt-remember-page-number)建议调用**myGrid.MasterTableView.Rebind()**。有什么不同？我应该使用哪个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T14:09:44.023

`myGrid.MasterTableView.Rebind()` would rebind the top-level table on the RadGrid.

`myGrid.Rebind()` would rebind all tables on the RadGrid.

I recommend you to take a look to [this](http://www.telerik.com/help/aspnet-ajax/grid-mastertableview-difference.html) article in order to understand the difference between RadGrid and MasterTableView.

# mysql - MySQL：选择在某些字段中具有最小值的行的 id

> ID：10044617
> 
> 赞同：1
> 
> 时间：2012-04-06T14:05:16.807
> 
> 标签：mysql

我有下表：

*   id INT（主要）
*   得分INT

我想知道，哪个 id 得分最低。我如何使用 MySQL 来做到这一点？

PS我知道如何使用嵌套SELECT（选择最小值，选择具有最小值的ID，如果只需要一个则选择最小的ID），但必须有更简单的方法来解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:08:18.363

```
SELECT `id`
from `table`
order by score asc
limit 1 
```

# ruby-on-rails - Rails / activerecords - 分组和排序

> ID：10044626
> 
> 赞同：0
> 
> 时间：2012-04-06T14:05:55.103
> 
> 标签：ruby-on-rails, activerecord

我想在我的模块上执行`:group`和执行`:order`，因为 Mysql 确实在 order by 之前进行分组，你会得到混合的结果，而不是你所期望的。

对此的 SQL 解决方案是：

```
SELECT * FROM 

(
select * from `my_table` order by timestamp desc
) as my_table_tmp

group by catid

order by nid desc 
```

如何使用 activerecord 在 ruby​​ 中编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:37:44.473

我认为您可以直接使用 Arel 方法：

```
MyTable.from("(SELECT * FROM my_table ORDER BY timestamp DESC) as my_table").group(:catid).order("nid DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:14:16.550

```
query = <<-sql_statement

  SELECT * FROM 

  (
  select * from `my_table` order by timestamp desc
  ) as my_table_tmp

  group by catid

  order by nid desc

sql_statement

result = MyTable.connection.execute(query) 
```

您也可以使用`ActiveRecord::Base.connection.execute(query)`.

要遍历返回使用的记录`result.each`。

示例（来自 mysql2 gem [repo](https://github.com/brianmario/mysql2)）：

```
results.each do |row|
  # conveniently, row is a hash
  # the keys are the fields, as you'd expect
  # the values are pre-built ruby primitives mapped from their corresponding field types in MySQL
  # Here's an otter: http://farm1.static.flickr.com/130/398077070_b8795d0ef3_b.jpg
end 
```

# jquery - jQuery 滚动跳转到 Firefox 上水平滚动网站中的嵌入视频

> ID：10044629
> 
> 赞同：0
> 
> 时间：2012-04-06T14:06:12.310
> 
> 标签：jquery, horizontal-scrolling, adobe-captivate

我创建了一个使用 jQuery 进行导航的水平滚动站点。它在 Chrome 和 Safari 中运行良好。但是，当我使用 Firefox 时，网站会跳转到在 iframe 中嵌入 Captivate 视频的页面之前的页面。当我删除 iframe 或更改 iframe URL 时，一切正常。

有什么想法可能导致这种情况吗？jQuery 可能会跳到 Firefox 中最顶层的元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:14:29.473

在您的情况下可能是也可能不是答案，但 Captivate 的标准嵌入代码会尝试 focus() SWF。这可能会导致长页面跳转到包含 Captivate SWF 的部分。

删除 Captivate 文件中的 focus() 命令，看看是否有帮助。

# php - 检索以 dd/mm/yyy 格式存储的两个日期之间的值 (varchar)

> ID：10044632
> 
> 赞同：-3
> 
> 时间：2012-04-06T14:06:25.703
> 
> 标签：php, mysql, sql, date

我有一张这样的桌子：

```
 +-----+------------+
   | no  | Date       |
   +-----+------------+
   | 1   | 10/11/2011 |
   | 2   | 10/12/2011 |
   | 3   | 10/13/2011 |
   | 4   | 10/14/2011 |
   | 5   | 10/15/2011 |
   +-----+------------+ 
```

我编写了以下查询，但它没有返回任何内容，因为`date`它存储在`varchar`列中，格式为 dd/mm/yyyy。

```
SELECT * 
FROM   tablname 
WHERE  date BETWEEN '10/11/2011' AND '10/15/2011' 
```

**如果我的日期以 dd/mm/yyy 格式存储，如何找到两个日期之间的值？**

请问，有人可以帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:23:41.133

如果您确实必须将数据保留为 varchar，那么您不必先将其拉入 PHP。您可以为此使用 MySQL 的日期时间函数

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

```
SELECT STR_TO_DATE(YourDateColumn,'%d/%m/%Y') AS RealDateColumn 
FROM YourTable 
```

也许

```
SELECT *
FROM YourTable
WHERE STR_TO_DATE(YourDateColumn,'%d/%m/%Y')  < '2011-01-01' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T14:10:55.203

If you're storing your dates in a VARCHAR and not in one of MySQL's DATE column types then you'll need to use MySQL's STR_TO_DATE function (see Cylindric's answer).

Of course, much better would be to change the column type to a [DATE or DATETIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-types.html) type. To do this, you're best creating a new column with the new type, converting the data in the existing column from a string to a date, dropping the existing column and renaming the new column to the name of the old column.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:20:31.497

将日期存储为 varchar 存在许多问题，包括：占用更多空间、您可以输入非日期值以及字符串无法正确比较。

所以，简短的回答是：不要将日期存储为字符串！

稍长的答案是将 varchar 转换为 DATE 类型，然后进行比较。由于转换并不是世界上最有效的事情，因此只需执行一次并存储它。要么只添加一个新列并转换原始日期值（这是我要做的），要么选择一种修改表格的方法来更改当前日期列的类型（这可能更“正确”方法，但它需要更多的工作，并且取决于您当前使用数据的方式，可能会破坏事情）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:45:01.793

正如前面的答案所表明的，最好将日期存储为日期类型。在某些用例中，将日期存储为字符串可能是有意义的。在这种情况下，您应该将您的日期存储为 YYYYMMDD，这反过来将允许在排序之间按预期工作。

话虽如此，您可以使用 substring/concat 函数来实现您的目标。就像是：

```
SELECT * FROM tablname WHERE
CONCAT(substring(`date`,7,4),substring(`date`,1,2),substring(`date`,3,2)) 
BETWEEN
CONCAT(substring('10/11/2011',7,4),substring('10/11/2011',1,2),substring('10/11/2011',3,2)) AND
CONCAT(substring('10/11/2011',7,4),substring('10/11/2011',1,2),substring('10/11/2011',3,2)); 
```

我相信很明显为什么不推荐这种方法。

# html - HTML/CSS：伪类选择器的行为不符合预期

> ID：10044633
> 
> 赞同：-2
> 
> 时间：2012-04-06T14:06:26.500
> 
> 标签：html, css, anchor, selector, pseudo-class

以下代码应展示预期的功能：

```
 <head>
        <style>
        a:active
        {
            color:teal;
        }
        a:hover
        {
            color:green;
...  
...  
...  

    <body>
        <a href="http://www.google.co.uk">Googs!</a>
... 
```

[在此处查看完整代码](http://jsfiddle.net/popstack/SNwRQ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:27:43.113

切换你的 CSS 规则。

```
...
a:hover{color: #000;}
a:active{color: #c0c0c0;}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:14:08.990

它看起来不错，我假设省略号代表右括号。您是否以另一种样式覆盖页面更深处的级联？另外，我更喜欢确保详细说明样式标签：

```
<style type="text/css"> 
```

# silverlight - 条件绑定？

> ID：10044636
> 
> 赞同：0
> 
> 时间：2012-04-06T14:06:30.287
> 
> 标签：silverlight, xaml, silverlight-4.0

我正在尝试将 TextBox 绑定到类集合中的值。我该怎么做呢？

数据：

```
Name, Filter
A    , 1
B    , 2
C    , 3 
```

现在我想用 Name = A 的过滤器填充我的 TextBlock。

XAML

```
<TextBlock Text="{Binding [Filters.??.Filter where name =??], UpdateSourceTrigger=PropertyChanged}"></TextBlock> 
```

绑定到 ColumnFilter 列表

```
public class Model
{
    private ObservableCollection<DataGridColumnFilter> _filters = new ObservableCollection<DataGridColumnFilter>();
    public ObservableCollection<DataGridColumnFilter> Filters { get { return _filters; } set { _filters = value; } }
}
public class DataGridColumnFilter
{
    public string Name { get; set; }
    public string Filter { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:45:26.027

您应该使用转换器：

```
<Page.Resources>
    <Samples:FilterConverter x:Key="FilterConverter"/>
</Page.Resources>

<Grid>
    <TextBox Text="{Binding Path=Filters, 
        Converter={StaticResource FilterConverter}, 
        ConverterParameter=a, Mode=OneWay}"/>
</Grid>

public class ConditionalBindingVM
{
    public ConditionalBindingVM()
    {
        Filters = new ObservableCollection<ColumnFilter>
                      {
                          new ColumnFilter {Name = "a", Filter = "filter A"},
                          new ColumnFilter {Name = "b", Filter = "filter B"},
                          new ColumnFilter {Name = "c", Filter = "filter C"},
                      };
    }

    public IEnumerable<ColumnFilter> Filters { get; private set; }
}

public class ColumnFilter
{
    public string Name { get; set; }
    public string Filter { get; set; }
}

public class FilterConverter : IValueConverter
{
    #region Implementation of IValueConverter

    public object Convert(object value, Type targetType, 
                          object parameter, CultureInfo culture)
    {
        var filters = (IEnumerable<ColumnFilter>) value;
        var name = (string) parameter;

        var filter = filters.SingleOrDefault(f => f.Name == name);

        return filter != null ? filter.Filter : string.Empty;
    }

    public object ConvertBack(object value, Type targetType, 
           object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:23:45.963

使用 KeyUp 事件并执行此操作（使用 System.Linq）：

```
myTextBox.Text= Filters.FirstOrDefault(c=> c.Name.StartsWith(myTextBox.Text)).Filter; 
```

# c++ - 创建 DirectX 10 缓冲区时出现内存泄漏

> ID：10044638
> 
> 赞同：2
> 
> 时间：2012-04-06T14:06:32.530
> 
> 标签：c++, memory-leaks, directx

我有一个简单的渲染过程，它将一组顶点发送到几何着色器并根据该信息渲染精灵。

小应用程序的内存使用量飙升，不断增加。`_CrtDumpMemoryLeaks()`我用Visual Leak Detector进行了快速测试，他们都声称没有泄漏。

我有一个设备和一个充满顶点信息的容器：

```
ID3D10Device* pD3DDevice;
std::vector<SpriteVertex>* sprites; 
```

然后在我的`RenderSprites()`方法中，我已经注释掉了几乎所有内容，直到泄漏停止（渲染也是如此；）

事情出错的地方在这里：

```
void DirectX10Renderer::RenderSprites()
{
    D3D10_SUBRESOURCE_DATA initData;
    initData.pSysMem = &((*sprites)[0]);

    D3D10_BUFFER_DESC bd;
    bd.Usage = D3D10_USAGE_DEFAULT;
    bd.ByteWidth = sizeof(SpriteVertex)*(numSprites);
    bd.BindFlags = D3D10_BIND_VERTEX_BUFFER;
    bd.CPUAccessFlags = 0;
    bd.MiscFlags = 0;

    // As soon as the following line is uncommented, memory starts leaking
    pD3DDevice->CreateBuffer(&bd, &initData, &m_SpriteBuffer)); // <-- this is leaking

    // the rest of the rendering code is for now commented out
} 
```

我不确定在每一帧上释放或删除什么会阻止这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T04:43:20.693

由于其他答案以快速方式假设解决方案并且评论有点太短 - 这里是 - 另一个快速。**您询问在运行时更新创建的缓冲区还需要什么**：

您可以将缓冲区使用情况从`D3D10_USAGE_DEFAULT`（仅限 GPU 读/写）更改`D3D10_USAGE_DYNAMIC`为启用`CopyResource()`和`CopySubresourceRegion()`工作之类的设施。您可以更新部分或整个缓冲区等。它具有一些性能影响，但这是可以预料的，因为动态本质上比静态初始化常量缓冲区更昂贵。我会回避过多的技术细节，把调查的乐趣留给你。

# 开场问题的长答案

### 亚尔，我很高兴，新数据。还有一桶朗姆酒。

我将尝试提供更多关于如何背后的原因的信息，但仍然保持*阅读的乐趣*。包括维基百科在内的各种网站都从与计算机科学相关的一切事物中汲取乐趣。关键是要给程序员直观的理解，why，让他分析why如何响应那个why。就像数学中的一个简单概念，就像一个全等的平行线，对于初学者来说充其量听起来很神秘，每单位时间会产生大量的脏话。正如我一百万次证明的那样，对动机的理解对正确理解大有帮助。

**内存泄漏问题**是由于您没有像其他人所说的那样正确管理内存。通常，您是否需要担心内存（当*经典*的C/C++ 指标不像 new、delete、malloc 等那样到处乱跑时）的一个很好的指标是，如果您有一个指向*任何 Microsoft*来源的指针（通常是 COM 接口）它调解您与底层 COM 组件实例或 COM 对象之间的协商）。这还包括由您不认识的人开发的您不完全理解的其他 API。但是，让我们先谈谈 COM 和其中一个怪癖——内存管理。它实际上非常简单，与经典的 C++ 对象并没有太大区别，

虽然缓冲区*本身没有手动分配（手头的情况），但至少以**经典*的C/C++ 方式，任何在兼容 COM 的接口上运行的东西（等等，我会回到它）并使您对这些接口的初始空指针工作**很可能**依赖于您`Release()`在完成后调用该函数。

`Release()`是我们都学会珍惜和喜爱的关键字的*直接翻译。*`delete`所以，是的，请确保您遵循 Microsoft 的指令，通过查询各种*创建函数*（等效于构造函数）来管理您获得的 COM 对象，这些函数将使用指向实际初始化的 COM 组件实例或对象的地址填充您的接口指针。为了将来的参考和满足好奇心，每个 COM 接口都派生自`IUnknown`它`Release()`（并要求重写它以说明继承组件的新依赖关系）和其他功能，如引用计数。

## 为什么要对 COM 大惊小怪？

许多 Microsoft API 都依赖/基于 COM（组件对象模型），这是他们实现通常的接口驱动代码的方式，在纯 C++ 中，这些代码由抽象类完成，并通过 vtables 和继承来驱动概念多态性。但是，你一定很好奇为什么干脆不使用 C++？你看，DirectX，它诞生时已经很老了（想想 1994./1995.），大约在 COM 首次推出的时候，它是未来重申基本 COM 思想的自然选择。

最初，开发 COM 是为了帮助跨工具协作（Microsoft Office 套件），或者更专业地说，是进程间通信。在那个篮子里，你也可以放下 OLE。从那以后，微软的软件工程师看到了进一步扩展它的潜力。该推理认为能够以 COM 组件的形式创建各种资源，这些资源将响应可通过一种语言访问的标准化接口，COM 组件在该语言中首次亮相以解决问题。这样，Microsoft 可以将他们的许多工作封装在可扩展的外形中，为其分配各种唯一标识符（__uuidof()，您已经遇到过，这就是 COM*注册/跟踪的方式*所有的类），制作一个跨语言解决方案，它可以使在其他地方编译的东西遵守 COM 规则以完全不同的语言工作。

它实际上已经在其基础上发展起来，以提供跨流程合作，反之亦然。它还具有与操作系统开发和共享功能（如可重用交互，打开文件对话是一个著名的例子）相关的各种开发问题相关的各种问题。自然地，DirectX（以及，例如，ActiveX）完美地融入了这张图片。它们为操作系统提供有关游戏和模拟等高度交互软件的通用解决方案。

这就是为什么您会看到`ID3D10Device`代表接口的“I”前缀，特别是用于解决实际实现的 COM 组件的原因。您通过统一的函数调用连接 COM 组件的实例，该函数调用需要 GUID 标识、指向接口指针的指针，并根据您提供的描述取回工作的 D3D10 设备。这就是为什么您还提供实际指针作为 LPVOID（或者基本上说这里是字节，做你必须做的）。如果您的使用正确，底层实现将为您正确解决它并使您的接口指针正常工作。基本上，获取功能 COM 实例的查询会使引用随函数上升`AddRef()`和下降`Release()`。类似于保留释放的概念。

所有这些组件通常都被塞进一堆 DLL 中，这些 DLL 已被“渲染”以进行正确的版本控制而不会出现问题。你会得到一个不错的 API 实现，说实话，这还不错。它实际上有点漂亮。

### *.NET 和 COM 之间的*“区别”**

 *今天，它的一些主要特性可能会让那些了解 .NET 的人感到困惑，但应该注意的是，COM 是 .NET 的前身（因此，几乎只是暂时的前身，它们共享的很少） （自 2000 年以来就在这里。）。还应该注意的是，COM 的今天的功能集*有些意外*，而 .NET 框架的开发是为了为各种使用 Windows 的开发人员提供跨语言标准平台。COM 的潜力是在最初实施之后才显现出来的。.NET 是由潜力和需求驱动的。

对于像 Windows 这样广泛使用的平台，这样的决定是合乎逻辑的，您有很多精通不同语言的开发人员。通过制作符合 CLS 的组件，您可以享受使用多种不同 .NET 语言*编译*的多种解决方案 - 缩短开发时间并切实提高性能。例如，C#（一种 .NET 语言）中的一些数学函数解析为实际用 C/C++ 编写的外部函数，速度更快（pow() 就是一个例子）。

更重要的是，.NET 不仅*超越了*COM（如果它们必须“竞争”，那几乎是毫无意义的），而且它们在做事方式上也有着根本的不同。这就是为什么微软采用各种方法将 COM 与 .NET 连接起来，将其包裹起来而不破坏 .NET 框架的核心架构。

如果您不知道，这只是一个简单的介绍，经过简化使其变得半有趣，整本书都是关于 COM 主题的。使用它需要更简单、直观的理解。希望它有所帮助并快乐编码。并且尽量不要在渲染函数中创建东西，特别是如果你负责它的内存管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:42:51.187

对 ID3D10Device::CreateBuffer 的每次成功调用都需要与对 Release() 的调用相匹配

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:56:54.037

正如汤姆已经说过的那样，您需要在创建缓冲区后释放它。但是，我认为在渲染函数中创建缓冲区并不是一件好事。这意味着您一次又一次地创建缓冲区。这不仅会泄漏内存，而且非常慢且不需要。

所以只需创建一个创建缓冲区的初始化函数。还创建一个函数，当您不再需要它时（在场景结束时左右）释放缓冲区。那么渲染函数应该只包含对缓冲区绘图的调用。

希望这对您有所帮助。

祝你好运！*

# export-to-excel - 将输入文本框中的数据以表格的形式导出到excel

> ID：10044644
> 
> 赞同：1
> 
> 时间：2012-04-06T14:07:04.310
> 
> 标签：export-to-excel, buttonclick

大家好，我正在设计一个包含许多文本框和一个按钮的网页。该按钮的功能是将文本框中写入的任何内容导出到 excel 文件中。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:22:44.253

有趣的问题...

首先，您应该提供更多详细信息并包含更多相关标签。

解决方案1：

第 1 步：获取`Input`值作为`<TD>`. [将输入值应用于所有其 td-innerhtml](https://stackoverflow.com/questions/8768847/apply-values-of-inputs-to-all-its-td-innerhtml)

第二步：将表格内容导出到excel。 [导出-html-table-to-excel](https://stackoverflow.com/questions/9364107/export-html-table-to-excel-using-asp-net/9810842#9810842)

解决方案 2：您可以使用[Microsoft.Office.Interop.Excel](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.11%29.aspx)

# c# - 如何在 Excel 中使用 VSTO 和 C# 获取包含 X 行和 Y 行的范围？

> ID：10044647
> 
> 赞同：1
> 
> 时间：2012-04-06T14:07:18.680
> 
> 标签：c#, excel, vsto

我有一个 Excel 工作簿，其中包含一些基于 VSTO 的 c# 代码。

给定一个已知点：

```
var start = START.get_Address(); // "$A$10" 
```

我想创建一个范围，以`$A$10`但包含额外的 X 行和 Y 列。

例如

```
var x = 10;
var y = 5; 
```

我想要一个代表`$A$10:$F$20`.

我可以通过组合地址来做到这一点：

```
var end = ((Excel.Range) START.get_Offset(x, y)).get_Address();

var targetRangeAddress = start + ":" + end;
var newRange = get_Range(targetRangeAddress, System.Type.Missing); 
```

但是，必须有一个更简单的方法。上面的很丑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:10:30.457

您可以使用 VBA `Resize()`，或者正如另一位评论者指出的那样，`get_Resize()`是 VSTO 等价物。

# php - Xliff 的 PHP 库

> ID：10044649
> 
> 赞同：1
> 
> 时间：2012-04-06T14:07:41.700
> 
> 标签：php, xml, xliff

是否有任何库将 xliff 段作为输入并将其“序列化”以显示在浏览器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:13:04.430

PHP 的 Xliff 实现。

[http://code.google.com/p/goatherd-php-library/wiki/Xliff](http://code.google.com/p/goatherd-php-library/wiki/Xliff)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T08:19:26.580

所以，我对这个话题的一点研究。也可以理解为答案。

范围：PHP 及其实现。

转到上面的链接-> [http://code.google.com/p/goatherd-php-library/wiki/Xliff](http://code.google.com/p/goatherd-php-library/wiki/Xliff)，最新更新：2011 年 5 月 8 日

然后用谷歌搜索（关键字：“php xliff”）以获取此链接：[https](https://github.com/oyagev/PHP-XLIFF) ://github.com/oyagev/PHP-XLIFF - 最新更新：2012 年 12 月 24 日

然后（返回？）到维基百科获取更多此类工具的列表：[http ://en.wikipedia.org/wiki/XLIFF](http://en.wikipedia.org/wiki/XLIFF)

然后找到这个网站： http: [//phptrends.com/dig_in/xliff](http://phptrends.com/dig_in/xliff)

然后重新考虑 Zend 框架：[https](https://www.google.lv/webhp?sourceid=chrome-instant&ion=1&espv=2&es_th=1&ie=UTF-8#q=php+xliff+zend) ://www.google.lv/webhp?sourceid=chrome-instant&ion=1&espv=2&es_th=1&ie=UTF-8#q=php+xliff+zend / [http://framework.zend .com/manual/1.12/en/zend.translate.adapter.html](http://framework.zend.com/manual/1.12/en/zend.translate.adapter.html)

最后开始决定，如何从数据库和包含本地化的 php 文件中迁移半翻译的数据。:)

所以，我的选择是来自 Github 的项目。

# html - DIV 中的 HTML 图标不在一行中

> ID：10044653
> 
> 赞同：0
> 
> 时间：2012-04-06T14:08:00.863
> 
> 标签：html, css

我有一个奇怪的问题。我有一些图标是基于 JSP 中的一些包含构建的，没有深入了解我有三个图标，并且两个完美地排列在一起。最底层的是问题。你能根据源代码看出是什么原因造成的吗？

这就是它的样子

![测试](../Images/bb6010236bcc8f85b6dd616c1e5a07eb.png)

2下面的图标是`<ul id="hp-dd-menu"`

渲染的 HTML：

```
<div id="iconDiv">

   <a id="scroll" href="show.hotpartslist?scroll=true&amp;topcursortorder=DESC&amp;topcursortprop=auditable.createdDate">

            <img class="icon" alt="Enable Scrolling" src="../images/scroll_enable.gif"/>
        </a>

        <a href='show.hotpartslist?excel=true'>
            <img class="icon" alt="Download to Microsoft Excel" src="../images/excel.gif"/>
        </a>

<ul id="hp-dd-menu" style="display:none;"><li><img alt="Pick Date to Display" class="icon" src="../images/calendar/calendar.gif" /><ul><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=auditable.createdDate&topsortprop=auditable.createdDate&dateToDisplay=ADDED">&#8594;&nbsp;&nbsp;ADDED</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastMCRemarkDate&topsortprop=lastMCRemarkDate&dateToDisplay=MC">&nbsp;&nbsp;&nbsp;MC</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastSOSRemarkDate&topsortprop=lastSOSRemarkDate&dateToDisplay=SOS">&nbsp;&nbsp;&nbsp;SOS</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastMDRemarkDate&topsortprop=lastMDRemarkDate&dateToDisplay=MMC">&nbsp;&nbsp;&nbsp;MMC</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastOtherRemarkDate&topsortprop=lastOtherRemarkDate&dateToDisplay=OTHER">&nbsp;&nbsp;&nbsp;OTHER</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=impactDate&topsortprop=impactDate&dateToDisplay=IMPACT">&nbsp;&nbsp;&nbsp;IMPACT</a></li></ul></li></ul>

<script type="text/javascript"> 
$(function()
{
    try
    {

        DynarchMenu.setup('hp-dd-menu', {  });

    }
    catch(exception)
    {
        alert("Failed to render other menu: " + exception.description);
    }
}); 
```

CSS：

```
* Used to add non-standard icons to the top right icon list. */
#iconDiv
{
float: right;
width:120px;
} 
```

如果我要将两个`<a`标签移出，`div`那么我可以将它们放在同一行，但它们之间有一个间隙：

![测试2](../Images/38839174d25ac7141247719818e77c95.png)

呈现的 HTML：

```
 <a id="scroll" href="show.hotpartslist?scroll=true&amp;topcursortorder=DESC&amp;topcursortprop=auditable.createdDate">

            <img class="icon" alt="Enable Scrolling" src="../images/scroll_enable.gif"/>
        </a>

        <a href='show.hotpartslist?excel=true'>
            <img class="icon" alt="Download to Microsoft Excel" src="../images/excel.gif"/>
        </a>

<div id="iconDiv">

<ul id="hp-dd-menu" style="display:none;"><li><img alt="Pick Date to Display" class="icon" src="../images/calendar/calendar.gif" /><ul><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=auditable.createdDate&topsortprop=auditable.createdDate&dateToDisplay=ADDED">&#8594;&nbsp;&nbsp;ADDED</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastMCRemarkDate&topsortprop=lastMCRemarkDate&dateToDisplay=MC">&nbsp;&nbsp;&nbsp;MC</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastSOSRemarkDate&topsortprop=lastSOSRemarkDate&dateToDisplay=SOS">&nbsp;&nbsp;&nbsp;SOS</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastMDRemarkDate&topsortprop=lastMDRemarkDate&dateToDisplay=MMC">&nbsp;&nbsp;&nbsp;MMC</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastOtherRemarkDate&topsortprop=lastOtherRemarkDate&dateToDisplay=OTHER">&nbsp;&nbsp;&nbsp;OTHER</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=impactDate&topsortprop=impactDate&dateToDisplay=IMPACT">&nbsp;&nbsp;&nbsp;IMPACT</a></li></ul></li></ul>

  <script type="text/javascript"> 
 $(function()
  {
    try
    {

        DynarchMenu.setup('hp-dd-menu', {  });

    }
    catch(exception)
    {
        alert("Failed to render other menu: " + exception.description);
    }
});
</script> 
```

我只是想让所有三个都在同一行并排。

编辑：

![在此处输入图像描述](../Images/0858726924af1547a11c3cdd805e12b0.png)

```
 <div style="float:right">
        <a id="scroll" href="show.hotpartslist?scroll=true&amp;topcursortorder=DESC&amp;topcursortprop=auditable.createdDate">

            <img class="icon" alt="Enable Scrolling" src="../images/scroll_enable.gif"/>
        </a>

       </div>

        <a href='show.hotpartslist?excel=true'>
            <img class="icon" alt="Download to Microsoft Excel" src="../images/excel.gif"/>
        </a>

<div style="float:right">

<ul id="hp-dd-menu" style="display:none;"><li><img alt="Pick Date to Display" class="icon" src="../images/calendar/calendar.gif" /><ul><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=auditable.createdDate&topsortprop=auditable.createdDate&dateToDisplay=ADDED">&#8594;&nbsp;&nbsp;ADDED</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastMCRemarkDate&topsortprop=lastMCRemarkDate&dateToDisplay=MC">&nbsp;&nbsp;&nbsp;MC</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastSOSRemarkDate&topsortprop=lastSOSRemarkDate&dateToDisplay=SOS">&nbsp;&nbsp;&nbsp;SOS</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastMDRemarkDate&topsortprop=lastMDRemarkDate&dateToDisplay=MMC">&nbsp;&nbsp;&nbsp;MMC</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=lastOtherRemarkDate&topsortprop=lastOtherRemarkDate&dateToDisplay=OTHER">&nbsp;&nbsp;&nbsp;OTHER</a></li><li><a href="show.hotpartslist?sorttype=top&topcursortorder=ASC&defaultSort=true&defaultOrder=ASC&topcursortprop=impactDate&topsortprop=impactDate&dateToDisplay=IMPACT">&nbsp;&nbsp;&nbsp;IMPACT</a></li></ul></li></ul>

<!-- close the icon div since we specified 'other' -->
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:23:30.663

我已经尝试下载您正在使用的 'DynarchMenu' js 文件，但没有成功。如果没有所述文件，我无法确定，但我相信您的问题是 DynarchMenu 正在从您的 ul 和 li 标签构建菜单。当它这样做时，它可能会将它们放入具有设置 css 规则的 div 中，这会导致您的问题。（divs 会自动换行）

欢迎您将我链接到 js 文件，如果您愿意，我可以给您比这更好的答案。

可能有用的一件事，但我又无法真正测试它，就是将 div 放置在您的每个链接周围，并带有“float:right”属性：

```
<div id="iconDiv" style="width:100px">
<div style="float:right">
    <a id="scroll" href="">
        <img class="icon" alt="Enable Scrolling" src="../images/scroll_enable.gif"/>
    </a>
</div>

<div style="float:right">
    <a href='show.hotpartslist?excel=true'>
        <img class="icon" alt="Download to Microsoft Excel" src="../images/excel.gif"/>
    </a>
</div>

<div style="float:right">
    <ul id="hp-dd-menu" style="display:none;">
        <li>
            <img alt="Pick Date to Display" class="icon" src="../images/calendar/calendar.gif" />
            <ul>
                <li>
                    <a href="">1</a>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

希望这可以帮助。

干杯。

# ios - OpenGL Es 2.0 GLKit 绘制像素

> ID：10044654
> 
> 赞同：1
> 
> 时间：2012-04-06T14:08:04.370
> 
> 标签：ios, opengl-es, opengl-es-2.0, glkit

我需要一点帮助来在屏幕上绘制像素。我编写的代码在模拟器上运行良好，但是当我在设备上部署时它会输出垃圾。所以这是我的代码：

我有 GLKViewController 设置，这是 viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    [EAGLContext setCurrentContext:self.context];

    self.effect = [[GLKBaseEffect alloc] init];

    self.effect.useConstantColor = GL_TRUE;

    self.effect.constantColor = GLKVector4Make(
                                               0.0, // Red
                                               0.0, // Green
                                               0.0, // Blue
                                               1.0f);// Alpha

    GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(0, 480, 0, 320, -1024, 1024);
    self.effect.transform.projectionMatrix = projectionMatrix;

} 
```

这是我绘制点/像素的地方：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    GLfloat points[] =
    {
        110.0f, 110.0f,
        111.0f, 110.0f,
        110.0f, 111.0f,
        111.0f, 111.0f,

        112.0f, 112.0f,
        113.0f, 112.0f,
        112.0f, 113.0f,
        113.0f, 113.0f,
    };

    glClearColor(1.0f, 0.0f, 1.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 0.0f);
    self.effect.transform.modelviewMatrix = modelViewMatrix;

    // Prepare the effect for rendering 
    [self.effect prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 2*4, points);
    glDrawArrays(GL_POINTS, 0, 8);

} 
```

当我在模拟器上运行时，它工作正常，即相应地绘制像素，但是当我在 iPod4 上部署时，它显示一些垃圾。我是初学者，所以需要帮助来显示简单的像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:54:03.323

我认为这里的问题是您需要在顶点着色器中设置内置`gl_PointSize`变量，因为模拟器和设备上的默认值不同。

[这个问题](https://stackoverflow.com/questions/9739780/opengl-rendering-gl-points-on-iphone-ipad-devices-looks-horrible-but-looks-comp)的答案进一步解释了。

# c++ - 成功构造了两个 TThread，但只执行了第一个

> ID：10044657
> 
> 赞同：0
> 
> 时间：2012-04-06T14:08:15.383
> 
> 标签：c++, multithreading, synchronization, mutex, critical-section

我的问题是我已经实例化了两个 TThread（来自 Borland C++ VCL）。他们的两个构造函数都成功了。但只有第一个 TThread 被执行。

（此代码的目标是在纹理对象列表中加载大约 100 个 png 图像文件；这些纹理对象 (TMyObject) 具有持续大约 60 个刻度的“LoadFromFile”函数）。

我浏览了很多关于多线程的解释，因此：

*   试图将 TMyThread 构造为 Suspended (:TThread(true)) 并为每个调用 Resume()
*   尝试使用 TCriticalSection 或 CRITICAL_SECTION，（首先作为 TMyThread ... 的成员，然后作为 TMainObject 的成员，并将指向它的指针传递给每个 TMYThread ... ，然后作为在 TMainObject 一侧声明的全局变量和 TMyThread）
*   试图在传递给每个 TMyThread 的 TMainObject 成员的声明中添加 __thread
*   尝试在每个 TMyThread 构造函数和 Execute 函数中调用 Application->ProcessMessages()
*   尝试使用传递给每个 TMyThread 的“bool *”来锁定和解锁公共内存访问
*   尝试声明 std::mutex 失败
*   尝试在关键内存访问之前调用 Synchronize(NULL, NULL, 0,0) 以便在这些操作期间将线程重新附加到主线程
*   尝试为每个线程使用两对不同的列表
*   发现这很有趣，但需要帮助来实现它： [http ://delphi.about.com/gi/o.htm?zi=1/XJ&zTi=1&sdn=delphi&cdn=compute&tm=41&f=00&tt=14&bt=0&bts=1&zu=http% 3A //www.midnightbeach.com/jon/pubs/MsgWaits/MsgWaits.html](http://delphi.about.com/gi/o.htm?zi=1/XJ&zTi=1&sdn=delphi&cdn=compute&tm=41&f=00&tt=14&bt=0&bts=1&zu=http%3A//www.midnightbeach.com/jon/pubs/MsgWaits/MsgWaits.html)
*   这也是： [http ://delphi.about.com/od/kbthread/a/threaded-delphi-tasks-thread-pool-otl-omnithreadlibrary-example.htm](http://delphi.about.com/od/kbthread/a/threaded-delphi-tasks-thread-pool-otl-omnithreadlibrary-example.htm)
*   在此处阅读有关 OTL 和 ASyncCalls 的信息： [如何在 Delphi 中进行线程处理的各种方法之间进行选择？](https://stackoverflow.com/questions/3419945/how-do-i-choose-between-the-various-ways-to-do-threading-in-delphi)

=> 在所有这些尝试中都没有成功。

下面是我试图简化的代码。任何帮助或解释都将有助于执行我的第二个线程。

```
//---------------------------------------------------------------------------
class TMainClass
{
private:
    TMyList<SmartPtr<TEvent> > mEventList;
    SmartPtr<TMyThread> mThread1, mThread2;
    int mCount;
protected:
    int mCurrent, mLast;
    TMyList<SmartPtr<TMyObject> > mObjectList;
    TMyObject *mpObject;    
    void MyInit();  
public:
    TMainObject(TMyParentObject *parent);
    virtual ~TMainObject();
    virtual void PeriodicTask();
};

//---------------------------------------------------------------------------
class TMyThread : public TThread
{
    TMyList<SmartPtr<TEvent> > *mpEventList;
    TMyList<SmartPtr<TMyObject> > *mpObjectList;
    int mStart, mEnd;
public:
    TMyThread(  TMyList<SmartPtr<TEvent> > *pEventList,
                TMyList<SmartPtr<TMyObject> > *pObjectList,
                int Start, int End);
    virtual void __fastcall Execute(void);
};

//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
TMainClass::TMainClass(TMyParentObject *parent)
{    
    mCount = 0;
}

TMainClass::~TMainClass()
{
    if (mThread1.GetPtr() != NULL)
    {
        mThread1->Terminate();
        mThread1 = SmartPtr<TMyThread> (NULL);
    }
    if (mThread2.GetPtr() != NULL)
    {
        mThread2->Terminate();
        mThread2 = SmartPtr<TMyThread> (NULL);
    }
    mpObject = NULL;
    mObjectList.Clear();
    mEventList.Clear();
}

void TMainClass::MyInit()
{
    if (mThread1.GetPtr() != NULL) return;    
    mObjectList.Clear();
    mEventList.Clear();
    mCount = GetNumberOfFiles("C:/MyPath/");    
    for (int i = 1; i <= mCount; i++)
    {
        SmartPtr<TEvent> lEvent (new TEvent(NULL, false, false, ""));
        lEvent.GetPtr()->ResetEvent();
        mEventList.Add(lEvent);
    }
    mThread1 = SmartPtr<TMyThread> (new TMyThread(&mEventList, &mObjectList,    1,        floor(mCount/2.0) )); // lock before that ?
    mThread2 = SmartPtr<TMyThread> (new TMyThread(&mEventList, &mObjectList, floor(mCount/2.0)+1, mCount ));    // lock before that ?

    mCurrent = 0;
}

void TMainClass::PeriodicTask()
{
    mpObject = NULL;
    int lCount = mObjectList.Count();
    if (lCount != 0)
    {
        ++mCurrent;        
        mCurrent = min(mCurrent, lCount);
        if (    mLast != mCurrent
            &&  mEventList[mCurrent]->WaitFor(120) != wrSignaled    )
            return;
        mLast = mCurrent;
        mpObject = mObjectList[mCurrent].GetPtr(); // lock before that ?
    }
    if (mpObject == NULL) return;

    mpObject->MyObjectUtilisation();    // lock before that ?
}

//---------------------------------------------------------------------------
TMyThread::TMyThread(   TMyList<SmartPtr<TEvent> > *pEventList, TMyList<SmartPtr<TMyObject> > *pObjectList,
                        int Start, int End);
:TThread(false)
{
    mpEventList = pEventList;   // lock before that ?
    mpObjectList = pObjectList; // lock before that ?

    mStart = Start;
    mEnd = End;

    FreeOnTerminate = false;
}

void __fastcall TMyThread::Execute(void)
{
    for (int i = mStart; i <= mEnd; i++)
    {
        try
        {
            if (mpEventList != NULL && mpObjectList != NULL)
            {                
                SmartPtr<TMyObject> pObject (new TMyObject());
                pObject->LoadFromFile(i);
                // common memory accesses before which I want to put a lock
                mpObjectList->Insert(i,pObject);
                mpEventList[i]->SetEvent();
                // place where I could release this lock
            }
        }
        catch(Exception &e)
        {
            ShowMessage("Exception in Execute : " + e.Message);
        }
    }
    return;
} 
```

干杯，阿诺德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:55:50.833

好的，我做了一个使用线程（实际上是线程池）的 PNG 加载器的示例。它与您的设计略有不同，但可以正常工作。我试图在标题中获取所有代码以使其更容易发布，但依赖项不允许这样做，所以我也必须有一点 cpp。我创建了一个显示幻灯片的测试表单，所以我也包含了它的代码。

//HPP 标头：

```
#ifndef PNGloaderH
#define PNGloaderH

#include <Classes.hpp>
#include <deque.h>
#include <vector.h>
#include <PngImage.hpp>
#include <usefulStuff.hpp>

class CBthreadPool;

// Task class to inherit from, supplying the abstract run() method.
class CBtask {
    friend class CBthreadPool;
    friend class TpoolThread;
    CBthreadPool *myPool;
    TNotifyEvent FonComplete;
protected:
    int param;
    virtual void DoCompleted(){   // called after run, normall calls OnComplete
        if (FonComplete!=NULL){FonComplete((TObject*)this);};
        delete(this);
    }
public:
    String errorMess;
    CBtask(int inParam, TNotifyEvent OnComplete){  // user param and
        FonComplete=OnComplete;  // an OnComplete callback to be called after run()
        param=inParam;
    };
    virtual void run()=0;
    void submit(CBtask *aTask);
};

// Producer-Consumer queue for tasks
class CBSqueue{
    TCriticalSection *access;
    deque<CBtask*> workQueue;
    TSemaphore *queueSema;
public:
    CBSqueue(){
        access=new TCriticalSection();
        queueSema=new TSemaphore(NULL,0,MAXINT,NULL,false);
    };
    void push(CBtask *task){
        access->Acquire();
        workQueue.push_front(task);
        access->Release();
        queueSema->Release();
    };
    bool pop(CBtask **task,DWORD timeout){
        if(wrSignaled==queueSema->WaitFor(timeout)){
            access->Acquire();
            *task=workQueue.back();
            workQueue.pop_back();
            access->Release();
            return(true);
        } else return false;
    };
};

// Threadpool thread
class TpoolThread : public TThread{
    CBthreadPool *FmyPool;
protected:
     virtual void __fastcall Execute(void);
public:
    TpoolThread(CBthreadPool *myPool):TThread(true){
        FmyPool=myPool;
        Resume();
    };
};

// General purpose threadpool
class CBthreadPool {
    friend class TpoolThread;
    int threadCnt;
    CBSqueue taskQueue; // P-C queue of CBtask, (or descendants)
public:
    CBthreadPool(int numThreads){
        for(threadCnt=0;threadCnt<numThreads;threadCnt++){new TpoolThread(this);}
    } // crate all the thradpool threads, passing them the queue to wait on
    void submit(CBtask *aTask){ // method to submit work
        aTask->myPool=this; // in case the task wants to issue any tasks
        taskQueue.push(aTask);  // off it goes..
    };
};

/*  This CBtask descendant has  a 'run' method that loads 'thePNG' object
from a filespec passed in ctor. Instances of this class are queued to the
 thread pool to load the PNG files */
class PNGtask:public CBtask{
    String Ffolder;
public:
    TPngImage *PngImage;
    void run(){
        PngImage=new TPngImage;
        PngImage->LoadFromFile(Ffolder);
    };
    PNGtask(String dir,TNotifyEvent OnDone):CBtask(0,OnDone){Ffolder=dir;};
};

/* This CBtask descendant has  a 'run' method that iterates a folder passed in
the ctor for 'PNG' files, submits a PNGtask for each one and waits for the last
to complete.  One is issued to the pool for each folder to be searched */
class PNGfilesTask:public CBtask{
    String Ffolder;
    int taskCounter;
    TEvent *CompleteEvent;
    TCriticalSection *counterLock;
public:
    vector<TPngImage*> *PngImages;
    TObject *userData;
    PNGfilesTask(String folder, TNotifyEvent OnComplete,
                vector<TPngImage*> *PngImages,TObject *UserData):CBtask(0,OnComplete){
        Ffolder=folder;
        this->userData=UserData;
        CompleteEvent=new TEvent(NULL,false,false,"",false);
        counterLock=new TCriticalSection();
        this->PngImages=PngImages;
    }
    void run(){  // get all the file names
        TStringList *files=listAllFilesInThisFolderMatching(Ffolder,"*.png");
        taskCounter=files->Count; // set the task counter
        for (int i=0; i<files->Count; i++) {  // submit a PNGtask for each file
            PNGtask *aTask=new(PNGtask)(Ffolder+"\\"+files->Strings[i],OnFilesLoaded);
            submit(aTask);
        }
        delete(files);
        CompleteEvent->WaitFor(INFINITE); // and wait for the last one to finish
    };
    void __fastcall OnFilesLoaded(TObject *Sender){  // called by each PNGtask
        counterLock->Acquire();                        // thread-safe
        PngImages->push_back(((PNGtask*)Sender)->PngImage); // PNGImage into vector
        if(--taskCounter==0){   // all loads done?
            CompleteEvent->SetEvent();   // signal the run() method to continue
        };
        counterLock->Release();
    };
};

/* This class inherits from threadpool and has a 'PNGget' method that takes a
folder path, a pointer to a caller-supplied vector that will be loaded with
TPngImage* instances, an 'OnComplete' callback and a user context object.
When the files are all loaded, the 'OnComplete' event is called with the
PNGfilesTask object as the Sender. */
class PNGload:public CBthreadPool{
public:
    PNGload(int numThreads):CBthreadPool(numThreads){
    }
    void PNGget(String folder,vector<TPngImage*> *results,
                TNotifyEvent OnComplete, TObject *userData){
        PNGfilesTask *loadPNG=new(PNGfilesTask)(folder,OnComplete,results,userData);
        submit(loadPNG); // execute loadPNG->run() on the threadpool
    };
};

#endif 
```

// CPP文件

```
#include "PNGloader.hpp"

void __fastcall TpoolThread::Execute(){
    CBtask *thisTask;
    while(FmyPool->taskQueue.pop(&thisTask,INFINITE)){
        try{
            if(thisTask!=NULL){
                thisTask->errorMess="";
                thisTask->run();
            }
            else{
                FmyPool->taskQueue.push(thisTask);
                exit;
      }
        }
        catch(exception& e){
            thisTask->errorMess=e.what();
        }
        thisTask->DoCompleted();
        thisTask;
    }
};

void CBtask::submit(CBtask *aTask){
    myPool->submit(aTask);
} 
```

// 测试表单 - 允许用户选择一个文件夹，然后显示其中任何 PNG 文件的幻灯片。它在顶部有一个用于按钮和标签的面板，一个计时器，表单的下半部分都是一个 TImage。

```
//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "PNGform.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TfoPNGload *foPNGload;
//---------------------------------------------------------------------------
__fastcall TfoPNGload::TfoPNGload(TComponent* Owner)
    : TForm(Owner)
{
    myLoad=new PNGload(10);
}
//---------------------------------------------------------------------------

void __fastcall TfoPNGload::SpeedButton1Click(TObject *Sender)
{
        if(PathName==""){PathName="C:\\";};
        if (SelectDirectory("Select Directory",PathName,PathName)){
            myLoad->PNGget(PathName,new(vector<TPngImage*>),filesLoaded,NULL);
        }
}
//---------------------------------------------------------------------------

void __fastcall TfoPNGload::filesLoaded(TObject *Sender){
    vector<TPngImage*> *PngImages;
    PngImages=((PNGfilesTask*)Sender)->PngImages;
    PostMessage(Handle,WM_APP,0,long(PngImages));
};

void __fastcall TfoPNGload::WMAPP(TMessage& msg){
    vector<TPngImage*> *thisVectorPtr=(vector<TPngImage*>*)msg.LParam;
    resultList.push_back(thisVectorPtr);
    vecSize=thisVectorPtr->size();
    if (vecSize>0) tiSlideShow->Enabled=true;
};

void __fastcall TfoPNGload::getNextVector(){
    if (resultList.size()!=0) {
        currentPNG=resultList.back();
        resultList.pop_back();
        currentPNGindex=0;
    }
    else
        currentPNG=NULL;
};

void __fastcall TfoPNGload::tiSlideShowTimer(TObject *Sender)
{
    if(currentPNG==NULL) getNextVector();
    else
        if (currentPNG->size()==0) {
            delete(currentPNG);
            getNextVector();
        }
    if(currentPNG==NULL) {
        tiSlideShow->Enabled=false;
        Label1->Caption="No files left";
        return;
    };
    TPngImage *thisPNG;
    Label1->Caption=IntToStr((int)currentPNG->size())+" PNG files left";
    thisPNG=currentPNG->back();
    currentPNG->pop_back();
    Image1->Picture->Assign(thisPNG);
    delete(thisPNG);
}
//--------------------------------------------------------------------------- 
```

// 表单头

```
//---------------------------------------------------------------------------

#ifndef PNGformH
#define PNGformH
//---------------------------------------------------------------------------
#include <Classes.hpp>
#include <Controls.hpp>
#include <StdCtrls.hpp>
#include <Forms.hpp>
#include <Buttons.hpp>
#include <Dialogs.hpp>
#include <ExtCtrls.hpp>
#include <PngImage.hpp>
#include "Pngloader.hpp"
#include "PNGform.h"

//---------------------------------------------------------------------------
class TfoPNGload : public TForm
{
__published:    // IDE-managed Components
    TImage *Image1;
    TPanel *Panel1;
    TSpeedButton *SpeedButton1;
    TTimer *tiSlideShow;
    TLabel *Label1;
    void __fastcall tiSlideShowTimer(TObject *Sender);
    void __fastcall SpeedButton1Click(TObject *Sender);
private:
    PNGload *myLoad;
    String PathName;
    void __fastcall filesLoaded(TObject *Sender);
    void __fastcall getNextVector();
protected:
    MESSAGE void __fastcall WMAPP(TMessage& msg);
public:     // User declarations
    __fastcall TfoPNGload(TComponent* Owner);

    BEGIN_MESSAGE_MAP
    MESSAGE_HANDLER(WM_APP, TMessage, WMAPP)
    END_MESSAGE_MAP(TForm)

    vector < vector<TPngImage*>* > resultList;
    vector<TPngImage*> *currentPNG;
    int currentPNGindex;
    int vecSize;
};
//---------------------------------------------------------------------------
extern PACKAGE TfoPNGload *foPNGload;
//---------------------------------------------------------------------------
#endif 
```

![测试表格](../Images/a4f954db6ca5eae6bfb6a1a9f1b70e3f.png)

# java - java序列化和继承

> ID：10044661
> 
> 赞同：0
> 
> 时间：2012-04-06T14:08:33.613
> 
> 标签：java, serialization

在2个java类中，如果A类实现了Serializable，B类扩展了A，那么默认情况下B类也是Serializable吗？据我了解，确实如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:10:48.443

是的，这是正确的。`NotSerializableException`不过要注意，A和B的所有字段也必须包含Serializable对象，否则在运行时尝试序列化时会有a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:12:50.800

是的。这遵循 Java 中的继承概念。由于 A 是可序列化的并且 B 扩展了 A，因此 B 是可序列化的。值得注意的是，注意 B 不是“默认”可序列化的，只要 B 扩展 A，就没有选择。

# assembly - 优化 DCPU-16 FizzBu zz

> ID：10044665
> 
> 赞同：4
> 
> 时间：2012-04-06T14:08:45.957
> 
> 标签：assembly, fizzbuzz, dcpu-16

我试图在 DCPU-16 中实现 FizzBu​​zz。我使用这个网络模拟器： http: [//mappum.github.com/DCPU-16/](http://mappum.github.com/DCPU-16/)（存储库：[https](https://github.com/mappum/DCPU-16) ://github.com/mappum/DCPU-16 ）。

它在循环结束之前停止。为什么？

我该如何优化它？我是一名高级语言程序员，对 asm 一无所知。你有这方面的一些*基本*资源吗？

有关 DCPU-16 的更多信息：官方规格：http://0x10c.com/doc/dcpu-16.txt [-](http://0x10c.com/doc/dcpu-16.txt)非官方规格：http : [//0x10.cc/](http://0x10.cc/)

编码：

```
; FizzBuzz in DCPU-16

SET Z, 0x8000
SET I, 1

:loop
    JSR print
    ADD I, 1
    IFN I, 100
        SET PC, loop

    BRK

:print
    ADD Z, 1
    SET [Z], 10

    SET A, I
    MOD A, 3
    IFE A, 0
        JSR printFizz

    SET B, I
    MOD B, 5
    IFE B, 0
        JSR printBuzz

    SET C, A
    IFG B, A
        SET C, B
    ADD A, B
    IFG A, C
        JSR printNumber

    SET PC, POP

:printNumber
    SET A, I

    IFG I, 9
        DIV A, 10

    JSR printDigit

    IFG 10, I
        SET PC, POP

    SET A, I
    MOD A, 10

    JSR printDigit
    SET PC, POP

:printDigit
    ADD A, 48
    ADD Z, 1
    SET [Z], A
    SET PC, POP

:printFizz
    ADD Z, 1
    SET [Z], 70
    ADD Z, 1
    SET [Z], 105
    ADD Z, 1
    SET [Z], 122
    ADD Z, 1
    SET [Z], 122
    SET PC, POP

:printBuzz
    ADD Z, 1
    SET [Z], 66
    ADD Z, 1
    SET [Z], 117
    ADD Z, 1
    SET [Z], 122
    ADD Z, 1
    SET [Z], 122
    SET PC, POP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:22:24.073

该模拟器上的控制台空间仅为`0x8000 - 0x8180`.

看起来你已经到了控制台的末尾，所以你的输出切断了中间的字母，你最终写入了不相关的内存。

如果您查看调试器：寄存器 I 在完成时为 0x64，在 base-10 中为 100（因此您的循环已完成）。

# c# - datagridview delete rows in C#?

> ID：10044666
> 
> 赞同：0
> 
> 时间：2012-04-06T14:08:55.683
> 
> 标签：c#

I am trying to delete rows from datagridview, when the user selects any row and clicks on delete button , it should ask the user whether he wants to delete the rows?

I am able to delete the rows but I am not sure my control doesnot come to method below:

```
private void dataGridView1_UserDeletingRow(object sender,DataGridViewRowCancelEventArgs e)
{
    DialogResult usersChoice =
    MessageBox.Show("Are you sure you want to delete the selected signs?\r\n" + dataGridView1.SelectedRows.Count + " signs will be deleted!", "Signs", MessageBoxButtons.OKCancel, MessageBoxIcon.Question);

    // cancel the delete event
    if (usersChoice == DialogResult.Cancel)
        e.Cancel = true;
} 
```

I am not sure what show I write in my code so that when user clicks delete button the control comes to the above logic.

Any suggestions?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T18:50:17.353

我也遇到了这个问题。事件处理程序已绑定并被调用，但“选定”集合为空。

为了解决这个问题，我不得不将网格的 SelectionMode 更改为“FullRowSelect”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:27:20.680

确保事件已注册 ![在此处输入图像描述](../Images/c6896651a9446bfb8dfddd1a7b957417.png)

然后实现事件：

```
private void DataGridView1_UserDeletingRow(object sender, System.Windows.Forms.DataGridViewRowCancelEventArgs e)
{
   DialogResult response = MessageBox.Show("Are you sure you want to delete this row?", "Delete row?", MessageBoxButtons.YesNo, MessageBoxIcon.Question, MessageBoxDefaultButton.Button2);
   if ((response == DialogResult.No))
   {
      e.Cancel = true;
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T14:24:32.940

您可以在`Form`.

例如：

```
public Form1()
{
   InitializeComponents();
   dataGridView1.UserDeletingRow += dataGridView1_UserDeletingRow;
} 
```

# java - Null or zero primary key encountered in unit of work clone

> ID：10044667
> 
> 赞同：1
> 
> 时间：2012-04-06T14:08:58.387
> 
> 标签：java, eclipselink

I am facing a common but irritating problem in eclipseLink. I am just trying to run this query using eclipseLink:

List organizationUnitEntityList = entityManager.createQuery("select o from OrganizationUnitEntity o where o.unitId=?1").setParameter(1, userTypeDomain.getUnitId()).getResultList(); OrganizationUnitEntity organizationUnitEntity = organizationUnitEntityList.get(0);

// 1 is passed as parameter

OrganizationUnitEntity is :

public class OrganizationUnitEntity {

```
@Id
private int unitId;
private String unit;

    getters and setters... 
```

}

But the exception that I am getting is : Null or zero primary key encountered in unit of work clone

Now, as there is no null or 0 primary key in the database, why this one is coming??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:56:39.143

异常发生在哪里 - 您提到您正在执行查询，但它是否在执行查询之前尝试刷新？您可以尝试在查询之前调用 flush ，因为您的 EM 可能包含一个具有 0/null pk 的实体，而它不应该。如果它发生在查询之后，请检查查询中的 SQL 将返回什么结果。尝试将 EclipseLink 日志记录设置为最好：如果您仍然无法使用以下内容打印缓存中的内容： JPAHelper.getEntityManager(em).getActiveSession().getIdentityMapAccessor().printIdentityMaps();

# hyperlink - twitter bootstrap tabs link

> ID：10044677
> 
> 赞同：2
> 
> 时间：2012-04-06T14:10:01.907
> 
> 标签：hyperlink, tags, twitter-bootstrap

I have a rails project that's been set up with twitter bootstrap for styling. On one page I have three tabs #1, #2, #3.

I would like to know how I can link to a specific Tab, for example tab #2, from another page. I have tried creating a link with an anchor eg: #2, but it does not work... when the page loads, it automatically loads the tab #1 (note: tab #1 is assigned an 'active' class in the html).

Am I missing something?

Would this require additional JS for it to function property?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:21:47.213

这段代码似乎解决了这个问题：

```
:javascript
  $(document).ready(function(){
    $('a[href="' + window.location.hash + '"]').click()
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:14:27.163

我认为您应该查看您的 routes.rb 并将 :root 更改为 => "controller#action" 它会根据呈现的操作呈现另一个页面，提供活动类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T14:46:26.740

这里不需要javascript。通过在选项卡标题和选项卡内容上使用“活动”类将选项卡触发为活动。它是显示内容并突出显示选项卡的活动类。因此，您可以很容易地有条件地将活动类添加到正确的选项卡标题/内容中。

我使用 url 参数，例如 .../?tab=credentials，通过链接定位特定选项卡。如果存在选项卡的 url 参数，我会从选项卡列表中对其进行索引，然后将该索引定位为处于活动状态。如果选项卡 url 参数不存在，我只是将第一个选项卡（索引 0）定位为处于活动状态。

# c# - How to access a file which is stored on a unknown folder name?

> ID：10044679
> 
> 赞同：0
> 
> 时间：2012-04-06T14:10:11.237
> 
> 标签：c#, .net

What i am trying to do is to change the default homepage for Mozilla Firefox, I know that the homepage is stored in the following path ( In my computer )

```
C:\\Users\\JohnnyB\\AppData\\Roaming\\Mozilla\\Firefox\\Profiles\\jmwb4bnw.default\\prefs.js 
```

The problem is that the `jmwb4bnw.default` folder has a different name in each computer, which may lead my file to not work on other computer due to different folder name. For me, everything is Ok, but for other computer it doesn't work because of the wrong file path.

My question is how can i access the `jmwb4bnw.default` folder regardless to it's current name, this folder is a unique folder under Profiles folder.

The snippest code i am using is: (It works only on my computer)

```
string ff_filepath = "C:\\Users\\Sandbox\\AppData\\Roaming\\Mozilla\\Firefox\\Profiles\\jmwb4bnw.default\\prefs.js";
string myLine = "user_pref('browser.startup.homepage', 'www.monde-presse.com');";

StreamWriter sw;
sw = File.AppendText(ff_filepath);
sw.WriteLine(myLine);
sw.Close(); 
```

How to make the code above works on every computer ? Or in such language, how to tell C# to access the `jmwb4bnw.default` folder regardless to it's name..

Note : The \Profiles\ folder contain no files, and Only one folder named `jmwb4bnw.default`, maybe there is someway to tell C# to access the subfolder which is found on Profiles folder regardless to it's current name ?

Finally : How can i make the above code snippest to work on every Computer ?

(In the example above, we assume that default drive is always C, and user profile is always JohnnyB)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:18:03.227

您可以使用 GetDirectories() 函数：

```
string userName = "Sandbox";
string[] folders = Directory.GetDirectories("C:\\Users\\" + userName  + "\\AppData\\Roaming\\Mozilla\\Firefox\\Profiles\\", "*.default"); 
```

*文件夹将包含所有以.default*结尾的子目录

 *在这种情况下，*文件夹 [0]*将是

> C:\Users\Sandbox\AppData\Roaming\Mozilla\Firefox\Profiles\jmwb4bnw.default

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:17:36.027

我想您只期望一个配置文件？否则，您将遇到另一个问题：查找与用户配置文件对应的目录。

在这种情况下，只需列出所有目录并取第一个。这应该对您有所帮助：http: [//msdn.microsoft.com/en-us/library/6ff71z1w.aspx](http://msdn.microsoft.com/en-us/library/6ff71z1w.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:59:12.930

要获取 mozilla firefox 的默认配置文件目录，您应该在 csharp 中使用此代码。

```
string[] folders =      Directory.GetDirectories(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Mozilla\\Firefox\\Profiles\\", "*.default");
string defaultprofile=folder[0]; 
```*

# javascript - Javascript - 元素列表后缺少]

> ID：10044689
> 
> 赞同：0
> 
> 时间：2012-04-06T14:11:09.500
> 
> 标签：javascript

我有以下内容：

```
 var inf = { PID: pid, PDate: pdate}; 
```

然后我调用了这个函数

```
 SetVal(inf);

    function SetVal(inf) {

      alert(inf.PID); 
```

- 以上工作正常。我显示警报很好

但是，如果我有一个超链接，它可以调用 SetVal 它不起作用：

```
 valset =  '<li><a href=\'javascript:SetVal(' + inf + ');\' ><h3> ' + this.PID + '</h3><p>'

    $('#DataSet).html(valset); 
```

当我单击超链接时，我在 FireBug 中收到以下消息：

元素列表后缺少]

不知道如何解决它。我以为他们会是同一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:14:32.570

您的变量“inf”是一个对象，但您在构建该元素时试图将其视为字符串。你最好用 jQuery 来做：

```
$('#DataSet').html($('<li/>')
  .append($('<a/>', {
    href: function() { SetVal(inf); },
  }))
  // ... 
```

# objective-c - Passing dictionary between view controllers

> ID：10044690
> 
> 赞同：1
> 
> 时间：2012-04-06T14:11:09.947
> 
> 标签：objective-c, ios, memory, memory-management, properties

I'm missing something fundamental here.

I have a table view with each cell displaying the contents of an NSDictionary. When I tap on each cell I would like to segue to a new view controller displaying details from the same dictionary.

But every time i try pass the dictionary it's contents are null on the other side.

Here's my prepare for segue in the view controller containing the table view:

```
 -(void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"tableSegue"]){

        MODetailViewController *detailViewController = [[MODetailViewController alloc] init];

        NSIndexPath *selectedIndexPath = [self.monetiseTable indexPathForSelectedRow];
        int selectedIndexPathAsInteger = selectedIndexPath.row;

        NSDictionary *dictionaryToPass = [[NSDictionary alloc] initWithDictionary:[self.feedArray objectAtIndex:selectedIndexPathAsInteger]];

        NSLog(@"%@", dictionaryToPass);

        detailViewController.passedDictionary = dictionaryToPass;
    }
} 
```

The NSLog displays the dictionary as expected.

Now, in detail view controller header I have declared the property (i'm using ARC):

```
@property (weak, nonatomic) NSDictionary *passedDictionary; 
```

Now in viewWillAppear:

```
-(void)viewWillAppear:(BOOL)animated{

[super viewWillAppear:YES];

NSLog(@"%@", self.passedDictionary);
} 
```

The NSLog is returning null!?

I have synthesised it.

I'm missing something fundamental i'm sure. Any help?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:15:45.957

```
@property (weak, nonatomic) NSDictionary *passedDictionary; 
```

而不是`weak`，声明它`strong`。

这将防止字典被释放。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:16:56.983

不要分配新的 MODetailViewController。使用传递给您的那个作为 segue 参数中的目标控制器。

# javascript - Function doesn't work after jQuery ajax html injection

> ID：10044692
> 
> 赞同：0
> 
> 时间：2012-04-06T14:11:10.957
> 
> 标签：javascript, jquery, ajax

I have the following ajax call on a webpage...

```
 var href=$('.poplight').attr("href");
    $('.poplight').attr("href","#");
    $('.poplight').click(function(){
        $.get(href, function(data) {
                $("#popup-contents").html(data) 
                    // inserts <div id="additionalInfo"> 
                    // <legend id="legend-params">Legend</legend>
                    // <div id="toggle"> This should toggle </div> </div>

            }
        );
    });

</script> 
```

On the same page, there is a .js script linked that toggles the #toggle div whenever the legend is clicked. This all works fine on a separate page (just the legend toggle by itself), but I can't get it to work with the ajax call. I'm thinking it has to do with when jquery "attaches" to certain doms... I don't know enough about the innerworkings of jquery to really know for sure.

Here is the external script. I've tried with an onload, adding it inline with html, and a few other variations. These functions are run when the legend is clicked (if you insert an alert('test') after the .show() method, it will display an alert window).

```
$('#toggle').hide();                                            
$("#legend").toggle(
    function() {
       $("#toggle").show("slide", {direction: "up"}, 200);
    }, 
    function() {
       $("#toggle").hide("slide", {direction: "up"}, 200);
}); 
```

Any help would be great!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:34:30.190

上面列出的评论帮助我解决了问题（我认为它们被 SO 的“算法”转换为评论......会将它们标记为答案）。我基本上改变了：

$("#legend").toggle(...) 到

$("#legend").on('click', functionX()...) 其中 functionX 几乎是一个美化的 if 语句，如果全局变量为真或假，它会隐藏一些东西。也许不是最干净的解决方案，但它完成了工作。

# php - Finding out the sum amount from fields that are associated with dates before a given date

> ID：10044694
> 
> 赞同：0
> 
> 时间：2012-04-06T14:11:18.687
> 
> 标签：php, mysql

I have the following table in my database. Now what I want to find out is the total sum amount that are associated with dates before 04-01-2012 from the field "amount".

```
id        Date            Amount
1      02-01-2012          500 
2      03-01-2012          500 
3      04-01-2012          500 
4      25-01-2012          500 
5      10-02-2012          500 
6      21-03-2012          500 
```

If I calculate it manually then the result would be: 500( Date: 02-01-2012)+ 500 (Date: 03-01-2012)= 1000.

Would you please kindly help me with the mysql query?

Thanks in Advance :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:14:55.697

```
SELECT SUM(Amount) FROM your_table WHERE `Date` < DATE('04-01-2012') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:17:07.960

```
Select Sum(Amount) `Total` From table where `Date` < DATE(`04-01-2012`); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:18:13.827

像这样的东西是最好的：

```
SELECT SUM(`Amount`) AS `Total` FROM `table` WHERE `Date` < DATE('2012-01-04') 
```

将返回：

```
Total  
1000 
```

# javascript - what does a semicolon before a function mean?

> ID：10044695
> 
> 赞同：3
> 
> 时间：2012-04-06T14:11:25.233
> 
> 标签：javascript

I'm looking at an open source project, and see something like this :

```
;(function(){
    // codes here
})() 
```

I'd like to know whether the semicolon there has a special meaning?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:24:12.023

这是因为 ASI（自动分号插入）允许您避免使用分号。

例如，您可以编写这样的代码而不会出错：

```
var a = 1
a.fn = function() {
    console.log(a)
} 
```

看？没有一个分号。

但是，在某些情况下不插入分号。基本上，在实际项目中，有一种情况不是这样：下一行以括号开头。

javascript 解析器将下一行作为参数，并且不会自动添加分号。

例子：

```
var a = 1
(function() {})()
// The javascript parser will interpret this as "var a = 1(function() {})()", leading to a syntax error 
```

为了避免这种情况，有几种方法：

*   在以括号开头的行的开头添加分号（在您显示的代码中完成）
*   使用以下结构：

    `!function() {}()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:26:48.030

JavaScript 具有自动分号插入功能（参见[ECMAScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中的第 7.9 节）：

> 分号插入的三个基本规则：
> 
> 1.  当从左到右解析程序时，遇到任何语法生成都不允许的标记（称为违规标记）时，如果出现以下一项或多项，则在违规标记之前自动插入分号条件为真：
>     *   违规标记与前一个标记至少有一个*LineTerminator*分开。
>     *   有问题的令牌是`}`.
> 2.  当程序从左到右解析时，遇到输入令牌流的结尾，并且解析器无法将输入令牌流解析为单个完整的 ECMAScript 程序，则在末尾自动插入分号输入流。

通常您可以省略 JavaScript 文件中的最后一个分号（第二条规则）。如果您的应用程序通过合并多个文件来创建 JavaScript 代码，这将导致语法错误。由于`;`它本身是空语句，您可以使用它来防止此类语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:41:32.320

可以在这里找到一个很好的解释：

[https://mislav.net/2010/05/semicolons/](https://mislav.net/2010/05/semicolons/)
（参见“没有分号的编码时唯一真正的陷阱”段落）

```
var x = y
(a == b).print() 
```

被评估为

```
var x = y(a == b).print() 
```

最重要的是，在以“（”字符开头的每一行之前放置一个分号是一个好习惯

# wpf - 如何创建包含多边形和变量以及其他数据元素的“对象”

> ID：10044696
> 
> 赞同：0
> 
> 时间：2012-04-06T14:11:29.937
> 
> 标签：wpf, vb.net, visual-studio-2010, polygon

好的，这是我的第一个 WPF 应用程序，我很难知道我在寻找什么。所以这就是我正在尝试做的事情，现在已经搜索了 4 个小时，但没有找到符合要求的解决方案。

我正在尝试编写一个简单的游戏 ui，它是基于网格/平铺的，并且我使用网格列和行定义构建了网格，并且我成功地将对象放置在各种网格位置。我目前正试图构建播放器对象。我想要一个单一的对象引用来代表球员作品的各个组成部分。

目前我正在使用一个多边形来表示网格上的一块。最终我想用图像或其他东西替换它。我想为它装备的武器和盔甲添加属性 我想要健康属性

基本上在代码中我想要这样的东西

```
dim player1 as new playerobject

player1.polygon.points = 0,0 60,30 0,60

player1.health = 100

player1.weapon = "axe" 
```

ETC

我可以将所有这些实例化为单独的变量等，但我想要一个包含所有变量、属性、对象、控件等的单一引用。

我在 vs 2010 中使用 vb .net（不，我不想写别的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:53:15.660

playerobject 需要是一个类

```
 public List<Int> Points { get; set; }

 public string Weapon { get; set; }

 public Int Health { get; set; } 
```

# macos - Apples GCC 在哪里/如何将 DWARF 存储在可执行文件中

> ID：10044697
> 
> 赞同：15
> 
> 时间：2012-04-06T14:11:37.800
> 
> 标签：macos, gcc, objdump, dwarf, dsymutil

Apples GCC 在哪里/如何将 DWARF 存储在可执行文件中？

`gcc -gdwarf-2`我通过（Apples GCC）编译了一个二进制文件。但是，既没有`objdump -g`也`objdump -h`没有向我显示任何调试信息。

libbfd 也找不到任何调试信息。（我在 binutils-mailinglist 上问过这个[问题](http://sourceware.org/ml/binutils/2012-04/msg00061.html)。）

但是，我可以通过`dsymutil`（到 dSYM）提取调试信息。libbfd 也能够读取这些调试信息。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-10T20:05:23.203

`id`在 Mac OS X 上，当您链接程序时，决定让链接器不处理所有调试信息。调试信息通常`10x`是程序可执行文件的大小，因此让链接器处理所有调试信息并将其包含在可执行二进制文件中会严重损害链接时间。对于迭代开发——编译、链接、编译、链接、调试、编译链接——这是一个真正的成功。

相反，编译器`DWARF`在 .s 文件中生成调试信息，汇编器在 .o 文件中输出它，链接器在可执行二进制文件中包含一个“调试映射”，它告诉调试信息用户所有符号在链接。

消费者（进行 .o 文件调试）从可执行文件加载调试映射并根据需要处理 .o 文件中的所有 DWARF，根据调试映射的说明重新映射符号。

`dsymutil`可以被认为是一个调试信息链接器。它执行相同的过程——读取调试映射，从 .o 文件加载 DWARF，重新定位所有地址——然后在最终链接地址处输出所有 DWARF 的单个二进制文件。这是 dSYM 捆绑包。

一旦你有了 dSYM 包，你就有了普通的旧标准 DWARF，任何 dwarf 阅读工具（可以处理 Mach-O 二进制文件）都可以处理。

Mach-O 二进制文件中包含的 UUID 使所有这些工作都得到了额外的改进。每次链接器创建二进制文件时，它都会在 LC_UUID 加载命令（v.`otool -hlv`或`dwarfdump --uuid`）中发出 128 位 UUID。这唯一地标识了该二进制文件。创建`dsymutil`dSYM 时，它包含该 UUID。如果 dSYM 和可执行文件具有匹配的 UUID，调试器只会关联它们——没有不可靠的文件 mod 时间戳或类似的东西。

我们还可以使用 UUID 来定位二进制文​​件的 dSYM。它们出现在崩溃报告中，我们包括一个 Spotlight 导入器，您可以使用它来搜索它们，例如， `mdfind "com_apple_xcode_dsym_uuids == E21A4165-29D5-35DC-D08D-368476F85EE1"` 如果 dSYM 位于 Spotlight 索引位置。您甚至可以为您的公司拥有一个 dSYM 存储库和一个程序，该程序可以在给定 UUID 的情况下检索正确的 dSYM - 可能是一个小的 mysql 数据库或类似的东西 - 所以您在随机可执行文件上运行调试器并立即拥有所有调试该可执行文件的信息。您可以使用 UUID 做一些非常简洁的事情。

但是无论如何，要回答您最初的问题：未剥离的二进制文件具有调试映射，.o 文件具有 DWARF，并且在`dsymutil`运行时将它们组合在一起以创建 dSYM 包。

如果您想查看调试映射条目，请执行此操作`nm -pa executable`，它们都在那里。它们采用旧的 stabs`nlist`记录的形式 - 链接器已经知道如何处理 stabs，因此使用它们最容易 - 但您会毫不费力地看到它是如何工作的，如果您不确定，可以参考一些 stabs 文档.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T16:32:18.747

似乎实际上并没有。

我跟踪`dsymutil`并读取所有`*.o`文件。`objdump -h`还列出了其中的所有调试信息。

所以似乎这些信息没有被复制到二进制文件中。

* * *

也可以在[此处](http://src.chromium.org/svn/trunk/src/build/mac/strip_save_dsym)找到有关此的一些相关评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-01T12:20:28.173

OSX似乎有两种放置调试信息的方法：

1.  在`.o`用于编译的目标文件中。二进制文件存储对这些文件的引用（通过绝对路径）。

2.  在名为 .dSYM 的单独包（目录）中

如果我使用 Apple 的 Clang 进行编译，`g++ -g main.cpp -o foo`我会得到一个名为`foo.dSYM`. 但是，如果我使用 CMake，我会在目标文件中获得调试信息。我猜是因为它做了一个单独的`gcc -c main.cpp -o main.o`步骤？

无论如何，我发现这个命令对于案例 1 非常有用：

```
$ dsymutil -dump-debug-map main
---
triple:          'x86_64-apple-darwin'
binary-path:     main
objects:         
  - filename:        /Users/tim/foo/build/CMakeFiles/main.dir/main.cpp.o
    timestamp:       1485951213
    symbols:         
      - { sym: __ZNSt3__111char_traitsIcE11eq_int_typeEii, objAddr: 0x0000000000000D50, binAddr: 0x0000000100001C90, size: 0x00000020 }
      - { sym: __ZNSt3__111char_traitsIcE6lengthEPKc, objAddr: 0x0000000000000660, binAddr: 0x00000001000015A0, size: 0x00000020 }
      - { sym: GCC_except_table3, objAddr: 0x0000000000000DBC, binAddr: 0x0000000100001E2C, size: 0x00000000 }
      - { sym: _main, objAddr: 0x0000000000000000, binAddr: 0x0000000100000F40, size: 0x00000090 }
      - { sym: __ZNSt3__124__put_character_sequenceIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_PKS4_m, objAddr: 0x00000000000001F0, binAddr: 0x0000000100001130, size: 0x00000470 }
      - { sym: ___clang_call_terminate, objAddr: 0x0000000000000D40, binAddr: 0x0000000100001C80, size: 0x00000010 }
      - { sym: GCC_except_table5, objAddr: 0x0000000000000E6C, binAddr: 0x0000000100001EDC, size: 0x00000000 }
      - { sym: __ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_, objAddr: 0x0000000000000680, binAddr: 0x00000001000015C0, size: 0x000006C0 }
      - { sym: __ZNSt3__14endlIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_, objAddr: 0x00000000000000E0, binAddr: 0x0000000100001020, size: 0x00000110 }
      - { sym: GCC_except_table2, objAddr: 0x0000000000000D7C, binAddr: 0x0000000100001DEC, size: 0x00000000 }
      - { sym: __ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_PKc, objAddr: 0x0000000000000090, binAddr: 0x0000000100000FD0, size: 0x00000050 }
      - { sym: __ZNSt3__111char_traitsIcE3eofEv, objAddr: 0x0000000000000D70, binAddr: 0x0000000100001CB0, size: 0x0000000B }
... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T14:31:25.473

Apple 将调试信息存储在名为 *.dSYM 的单独文件中。您可以在这些文件上运行 dwarfdump 并查看 DWARF 调试信息条目。

# java - 传递字符串时Android App崩溃

> ID：10044699
> 
> 赞同：0
> 
> 时间：2012-04-06T14:11:46.910
> 
> 标签：java, android, string, http, bundle

我在两个活动之间传递了两个字符串，由于某种原因，当我尝试接受字符串时它崩溃了。我觉得，我错过了一些重要的东西，但找不到任何我可能错过的代码。谷歌几乎没有结果，我真的很生气，因为这似乎是一项非常基本的任务。

任何帮助，将不胜感激:)

日志猫：

```
 03-25 04:23:03.476: E/AndroidRuntime(1174): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gta5news.bananaphone/com.gta5news.bananaphone.ChatService}: java.lang.NullPointerException
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.os.Looper.loop(Looper.java:123)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at java.lang.reflect.Method.invokeNative(Native Method)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at java.lang.reflect.Method.invoke(Method.java:521)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at dalvik.system.NativeStart.main(Native Method)
03-25 04:23:03.476: E/AndroidRuntime(1174): Caused by: java.lang.NullPointerException
03-25 04:23:03.476: E/AndroidRuntime(1174):     at com.gta5news.bananaphone.ChatService.GetLogInData(ChatService.java:76)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at com.gta5news.bananaphone.ChatService.onCreate(ChatService.java:47)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-25 04:23:03.476: E/AndroidRuntime(1174):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-25 04:23:03.476: E/AndroidRuntime(1174):     ... 11 more 
```

代码（第二个活动，崩溃）

```
 public class ChatService extends ListActivity {
    /** Called when the activity is first created. */

    BufferedReader in = null;
    String data = null;
    List headlines;
    List links;
    String GotPass = null;
    String GotUname = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        GetLogInData();

        try {
            ContactsandIm();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            CheckLogin();
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void GetLogInData() {
        // TODO Auto-generated method stub
        Bundle gotData = getIntent().getExtras();
        GotPass = gotData.getString("key!");
        GotUname = gotData.getString("key!!");

    }

    private void CheckLogin() throws UnsupportedEncodingException {

    }
    public void ContactsandIm() throws URISyntaxException,
            ClientProtocolException, IOException {
        headlines = new ArrayList();

        // TODO Auto-generated method stub
        BufferedReader in = null;
        String data = null;

        HttpClient get = new DefaultHttpClient();
        URI website = new URI("http://www.gta5news.com/test.php");
        HttpGet webget = new HttpGet();
        webget.setURI(website);
        HttpResponse response = get.execute(webget);
        Log.w("HttpPost", "Execute HTTP Post Request");
        in = new BufferedReader(new InputStreamReader(response.getEntity()
                .getContent()));
        StringBuffer sb = new StringBuffer("");
        String l ="";
        String nl ="";
        while ((l =in.readLine()) !=null) {
            sb.append(l + nl);  
        }
        in.close();
         data = sb.toString();
         if(data.contains("null"));
         ListView lv = getListView();
         lv.setTextFilterEnabled(true);

        headlines.add(data);

        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, headlines);

        setListAdapter(adapter);

    }

    // end bracket for "ContactsandIm"

} 
```

第一项活动

```
public class LogIn extends Activity implements OnClickListener {

    Button ok, back, exit;
    TextView result;
    EditText pword;
    EditText uname;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Login button clicked
        ok = (Button) findViewById(R.id.btn_login);
        ok.setOnClickListener(this);

        result = (TextView) findViewById(R.id.lbl_result);

    } 
    //create bracket.

    public void postLoginData() {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();

        /* login.php returns true if username and password is equal to saranga */
        HttpPost httppost = new HttpPost("http://gta5news.com/login.php");

        try {
            // Add user name and password
            uname = (EditText) findViewById(R.id.txt_username);
            String username = uname.getText().toString();

            pword = (EditText) findViewById(R.id.txt_password);
            String password = pword.getText().toString();
            Bundle basket = new Bundle();
            basket.putString("key!", password);
            basket.putString("key!!", username);
            Intent a = new Intent(LogIn.this, ChatService.class );
            a.putExtras(basket);
            startActivity(a);

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            Log.w("HttpPost", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);

            String str = inputStreamToString(response.getEntity().getContent())
                    .toString();
            Log.w("HttpPost", str);

            if (str.toString().equalsIgnoreCase("true")) {
                Log.w("HttpPost", "TRUE");
                result.setText("Login successful");
                try {Thread.sleep(250);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Intent login = new Intent(LogIn.this, ChatService.class);
                startActivity(login);

            } else {
                Log.w("HttpPost", "FALSE");
                result.setText(str);
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) {
                total.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // Return full string
        return total;
    }

    public void onClick(View view) {
        if (view == ok) {

            postLoginData();
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(pword.getWindowToken(), 0);
        }
        // Click end
    }
    // if statement
}

// class ends here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:14:29.707

检查`null`：

```
Bundle gotData = getIntent().getExtras();
if(gotData != null)
{
    GotPass = gotData.getString("key!");
    GotUname = gotData.getString("key!!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:16:06.037

```
 in.close();
     data = sb.toString();
     if(data.contains("null"));
     ListView lv = getListView();
     lv.setTextFilterEnabled(true); 
```

为什么这里的引号为空？如果您正在寻找字符串“null”，那是一回事，但是如果 contains() 引用了一个空字符串，它就会抛出 nullpointerexception。

此外，您的 if 语句末尾似乎有一个不必要的分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:19:22.517

确保您的第二个活动类是否已添加到您的应用清单文件中。如果它已经添加到您的清单文件中，则调用 -

```
startActivity(yourSecondIntentActivity);
finish(); 
```

玩得开心...

# azure - Azure 中的 NServiceBus 错误队列

> ID：10044700
> 
> 赞同：1
> 
> 时间：2012-04-06T14:12:04.490
> 
> 标签：azure, nservicebus, nservicebus3

我正在尝试在 Azure 中设置 NServiceBus。在本地开发期间，我使用存储队列，而在云中部署时，我使用 Azure 服务总线。由于某种原因，当发生错误时，消息不会移动到错误队列中。事实上，甚至没有创建错误队列。

在我的 Web.config 文件中，我有以下配置：

```
<MessageForwardingInCaseOfFaultConfig ErrorQueue="myApp-errors"/> 
```

配置 NServiceBus 时，我调用：

```
.MessageForwardingInCaseOfFault() 
```

当消息失败时，日志中的最后一个错误总是

```
Failed raising 'transport message received' event for message with ID=170ad256-b559-417e-8b34-3882045cc19e 
```

对此有什么想法吗？消息传递似乎有效，只是错误处理不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:47:01.263

我的第一个猜测是无法创建错误队列，因为名称中不允许使用大写字母

如果这不起作用，我们将不得不进行更彻底的分析，但这需要从日志中获取更多信息。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:34:37.500

我在使用 NServiceBus 3.3 时遇到了同样的问题。

这是为我解决问题的方法。如果 Azure 队列未标记为事务性，那么 NServiceBus 甚至都不会费心将消息发送到错误队列——它只是消失在以太中。

此外，第二级重试不适用于 Azure 队列——您会收到一条警告，指出队列需要与进程位于同一台计算机上。

因此，如果您不使用 .DisableSecondLevelRetries() 或此处描述的 app.config 技术禁用 SLR，NServiceBus 会将消息转储到重试队列而不是错误队列中。

要使其正常工作：

禁用二级重试确保 Azure 队列配置为事务性（即使它们不在 Azure 中）

# javascript - 用中文/日文字符对齐 html 文本

> ID：10044701
> 
> 赞同：0
> 
> 时间：2012-04-06T14:12:09.367
> 
> 标签：javascript, html, css, ios

我正在开发一个 ipad 电子书阅读器，下面的 css 代码适用于 iOS5，但不适用于 iOS 4.3。

```
text-align:justify;
text-justify:inter-ideograph; 
```

![截屏](../Images/5985d87b9c8232f87967f837ba1e1452.png)

ps：我的html文件包含中文/日文字符。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-01T10:18:43.473

试试 CSS3 解决方案。

目前正在开发的 CSS3 模块将引入大量旨在支持非拉丁文本的属性，从垂直脚本支持到 kashida 对齐，从 ruby​​ 定位到列表编号。本文将让您一瞥商店中的一些属性，并讨论如何帮助使这些改进成为现实。

请参阅[**链接**](http://www.w3.org/International/articles/css3-text/)以获取更多详细信息！

# jasper-reports - Jasper 登录页面样式自定义更改

> ID：10044702
> 
> 赞同：0
> 
> 时间：2012-04-06T14:12:11.533
> 
> 标签：jasper-reports, jasperserver

我在 overrides_custom.css 文件中对 jaser 服务器登录页面样式进行了自定义更改。如果我不注销 jasper 主页 UI，这些更改将应用​​于登录页面。如果我注销这些更改将不适用。使用 Ubuntu Linux。

相同的更改适用于我在 Windows 上安装的相同版本...

请帮助..谢谢Amannam

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:44:25.477

jasperserver 中的所有用户的注销页面都是相同的。为了获得更改，您需要使用超级用户登录并进行更改，然后它们将生效。

# mysql - 这可以通过 JOIN 语句来完成吗？

> ID：10044711
> 
> 赞同：1
> 
> 时间：2012-04-06T14:13:01.827
> 
> 标签：mysql

我有五个结构非常相似的表，但差异很大，我想将它们作为单独的表。本质上，这些表将事件记录在五个不同的“类别”中，这些“类别”具有一些公共字段和一些其他独特的字段。

现在看来我需要编写一个报告，其中所有五个表中的记录按记录创建时间戳的降序显示（所有表的标准）。所有表都有我需要的公共字段，例如 fName、lName、scorePercent、numCorrect 等。

我似乎无法找到编写查询以从所有五个表中选择记录并将它们显示在一个表中的最佳方法，其中一列显示记录来自的表和公共字段的值，按降序排列约会时间。

有什么简单的方法可以做到这一点？我必须用 PHP 做吗？我开始质疑我原来的设计。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:20:55.333

如果数据足够相似，可以一起*查询*，那么它可能足够相似，可以一起*存储*在*一个*表中，并带有一个额外的列来记录*类型*，但是......

```
select * from (
    select 'table1', timestamp_col, fName, lName, scorePercent, numCorrect
    from table1 where ...
    UNION ALL
    select 'table2', timestamp_col, fName, lName, scorePercent, numCorrect
    from table2 where ...
    UNION ALL
    select 'table3', timestamp_col, fName, lName, scorePercent, numCorrect
    from table3 where ...
    UNION ALL
    select 'table4', timestamp_col, fName, lName, scorePercent, numCorrect
    from table4 where ...
    UNION ALL
    select 'table5', timestamp_col, fName, lName, scorePercent, numCorrect
    from table5 where ..
) x
order by timestamp_col desc 
```

您可以在内部查询之外使用单个 where 语句，但它的性能会很差，因为*所有表的**所有*行都将合并。这样，只有实际需要的行被联合起来。

请注意，这`UNION ALL`是一个比 , 更好的选择`UNION`，因为`UNION ALL`不排序（`UNION`数据将被排序*两次*- 一次用于删除重复项，再次用于排序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:17:25.407

您可以使用`UNION ALL`语句。所以也许是这样的：

```
SELECT
  fName, lName, scorePercent, numCorrect,date, 1 AS type
FROM
  table1
UNION ALL
SELECT
  fName, lName, scorePercent, numCorrect,date, 2 AS type
FROM
  table2
UNION ALL
SELECT
  fName, lName, scorePercent, numCorrect,date, 3 AS type
FROM
  table3
UNION ALL
SELECT
  fName, lName, scorePercent, numCorrect,date, 4 AS type
FROM
  table4
UNION ALL
SELECT
  fName, lName, scorePercent, numCorrect,date, 5 AS type
FROM
  table5
ORDER BY date 
```

# asp.net-mvc-3 - 当屏幕上的所有项目都被删除时，TryUpdateModel 不会清空项目集合

> ID：10044720
> 
> 赞同：0
> 
> 时间：2012-04-06T14:13:50.407
> 
> 标签：asp.net-mvc-3

我正在使用 asp.net mvc 3，并且在发布更改时遇到了使用 tryUpdateModel 的问题。

我有一个包含多个项目列表的模型，我的视图可以通过 Ajax 添加或删除项目，并且我可以使用保存按钮保存更改。

当我将项目添加到集合中时，TryUpdateModel 工作得很好，但是当我删除集合中的所有项目时，这个集合不再以表单值发布，并且 TryUpdateModel 什么都不做，而是清除我的集合。

我该如何处理这种情况？有人找到解决方法了吗？我必须覆盖 DefaultModelBinder 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:50:55.347

好吧，我不知道为什么它不清除集合，但一种解决方法可能是检测何时缺少相关的表单值，然后手动删除这些项目。就像是：

```
public ActionResult Edit(SomeEntity obj)
{
    if(Request.Form["expectedFormValue"] == null)
    {
        obj.YourCollection.Clear();
    }
    TryUpdateModel(obj);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:55:20.613

我一直在处理这个问题。事实证明，[for 的代码`TryUpdateModel`](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/Controller.cs#L461)没有任何问题，但这完全取决于`ValueProvider`给出的内容。

至于 AJAX（我的情况也是如此），很可能`JsonValueProviderFactory`是解析响应并向执行该`TryUpdateModel`方法的控制器提供值的那个，而控制器永远不会在那里找到这些值。由于`TryUpdateModel`仅根据值提供者提供的属性更新目标模型，因此它不会触及清空的集合，因为这些属性根本不是由提供者发送的。

实现这一点的代码是in 中的[这一行`JsonValueProviderFactory`](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/JsonValueProviderFactory.cs#L22)，其中一个大小为零的数组永远不会将值添加到后备存储中，从而使属性“消失”。

从 2012 年 1 月起，我在 ASP.NET Codeplex 站点（[带有空数组的 Json 请求](http://aspnet.codeplex.com/workitem/9807)）中发现了有关此错误的报告，并且 wallymathieu（提交者）提供了一个可以解决此问题的补丁。这是补丁的相关部分：

```
//BEGIN CHANGE
if (l.Count == 0) {
    AddToBackingStore(backingStore, prefix, null);
}
else for (int i = 0; i < l.Count; i++) {
//END CHANGE 
```

他正在做的事情是在数组作为空发送时添加具有空值的属性。

您可以使用那里公开的代码制作自己的代码，并通过在您的文件`ValueProviderFactory`中执行此操作将其连接到您的应用程序，方法：`Global.asax``Application_Start`

```
ValueProviderFactories.Factories.Remove(ValueProviderFactories.Factories.OfType<JsonValueProviderFactory>().FirstOrDefault());
ValueProviderFactories.Factories.Add(new YourOwnJsonValueProviderFactory()); 
```

This did solve my problem, I hope it does it for your too and future *TryUpdateModel'ers*.

# c - C：指向结构内结构元素的指针

> ID：10044730
> 
> 赞同：3
> 
> 时间：2012-04-06T14:14:32.103
> 
> 标签：c, pointers, struct

为了便于打印，我想创建一个指向结构元素的指针数组。我怎样才能做到这一点？我的尝试是在结构的最后一行。请注意，此结构具有除 int 之外的其他值，现在显示在此处。我希望这种索引只用于整数。

```
struct status {
    int lastinputVac;
    int inputVac;

    int outputVac;

    /* The unit is % */
    int outputpower;

    int outputHz;

    /* The unit is % */
    int batterylevel;

    int temperatureC;

    int *ordered_values[] = { &lastinputVac, &inputVac, &outputVac, &outputpower, &outputHz, &batterylevel, &temperatureC };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:30:39.337

只需咬紧牙关，编写额外的代码以使用结构成员访问权限打印它。为了节省几行代码而牺牲您的设计是不值得的。

想象一下，有一天你必须在库中公开这个结构。你真的想用这个没有实际用途的奇怪指针数组来加载用户吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:18:41.077

所以问题是“我想创建一个指向我的结构元素的指针数组。” 并提到元素可能不是 int。

我编写了一个通用解决方案，在安全性或语言一致性和设计方面可能还需要大量改进，但它显示了以下问题的一个解决方案。下面的代码计算结构的大小，假设结构的元素都是相同的大小，然后构造一个指向元素的指针数组，print_array 函数通过打印这些元素来迭代这些元素。我也可以重载 ostream<< 运算符，但我想尽可能保持简单。

```
 #include "stdafx.h"

  struct status {
      int lastinputVac;
      int inputVac;
      int outputVac;

      /* The unit is % */
      int outputpower;

      int outputHz;

      /* The unit is % */
      int batterylevel;

      int temperatureC;
};

//template<typename T>
#include <vector>
#include <algorithm>
#include <iostream>
#include <iterator>

// hide this into a library 
template<typename T>
size_t build_array(const status& val, T*** vecptr)
{
const size_t _size = sizeof(status) / sizeof(int);
*vecptr = (T**)malloc( sizeof(T*) *_size );

for (size_t i = 0; i < _size; ++i) {
    (*vecptr)[i] = ((T *)((&val)+i));
}
return _size;
}

template<typename T>
void free_array(T** vecptr)
{
free(vecptr);
}

template<typename T>
void print_array(T **vecptr, size_t size) 
{
for (size_t i = 0; i < size; i++)
    std::cout << *(*vecptr + i) << std::endl;
}

//T1 is the type of the struct and T2 is the type of the elements
template<typename T1, typename T2>
class PrintStruct
{
private:
    T2 **m_vecptr;
    size_t m_size;

public:
    PrintStruct(T1 t) {
        m_size = build_array<T2>(t, &m_vecptr);
        print_array(m_vecptr, m_size);
    }

    ~PrintStruct() {
        free_array(m_vecptr);
    }
 };

 int _tmain(int argc, _TCHAR* argv[])
 {
 status _status;
 _status.batterylevel = 1;
 _status.inputVac = 2;
 _status.lastinputVac = 3;
 _status.outputHz = 4;
 _status.outputpower = 5;
 _status.outputVac = 6;
 _status.temperatureC = 7;

 PrintStruct<status, int> _ps(_status);
 return 0;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:22:37.190

这种方式是不可能的。

在 C++ 中有一个成员指针（“相对”指针）的概念，这就是你真正需要的。

在您的情况下，CI 会建议始终使用整数数组并仅命名索引

```
struct status {
   int values[7];
}
..
const int lastinputVac = 0;  // or upper case when you like, or use #define
..
status a;
a.values[lastinputVac] = 27;
int z = a.values[lastinputVac]; 
```

你明白了吗？

顺便说一句，您可以使用联合执行这两种方法，提供带有名称的编译访问和通过数组索引的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:26:59.633

您无法独立于结构变量实例获取结构成员的地址；IOW，你必须做类似的事情

```
struct status foo;
int *ordered_values[] = {&foo.lastInputVac, &foo.inputVac, ...}; 
```

但是，鉴于您的所有结构成员都是`int`s，您可以做一些类型的双关语*a la*

```
int *ordered_values = (int *) &foo;
for (i = 0; i < 7; i++)
  printf("%d\n", ordered_values[i]); 
```

这*应该*有效；struct 实例的地址与其第一个成员的地址相同，并且由于所有成员都是`int`s，因此不应存在任何对齐或填充问题。我不推荐这种做法，但就您的目的而言，它应该足够好用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:03:17.293

从阅读您的评论来看，您的结构似乎有很多元素，但您只想打印其中的一些。以下是我的想法：

1）不要把这个数组放在结构中！它是静态的——它永远不会改变任何`struct status`东西，因此将它放在结构中既浪费又不直观。

2）您是否考虑过将这些值分离到它们自己的结构中？然后，您可以使用以下范例：

```
enum status {
    LASTINPUT_VAC,
    INPUT_VAC,
    OUTPUT_VAC,
    OUTPUT_PWR,
    OUTPUT_HZ,
    BATT_LVL,
    TEMPERATURE,
    STATUS_MAX
};

struct system {
    char name[MAXNAME];
    long other_data;
    float coords[2];
    char *whatever_you_have_here;
    int status[STATUS_MAX];
}; 
```

然后打印/使用你引用它的一个：

```
struct system sys;
int temp = sys.status[TEMPERATURE];
for (int i = 0; i < STATUS_MAX; i++)
    printf("%d\n", sys.status[i]); 
```

这可能不符合您的确切需求，但我只是想把它放在那里，作为您可以在 C.Cheers 中做这种事情的另一种方式！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T18:04:14.573

我想到了另一种方法。我的观察是，成员的顺序正确，但您可能希望通过索引轻松访问。

但警告：你必须关心填充。填充可能会错位整数。但是，在 int32 的情况下，我希望没有问题。

有些人会认为这太 hacky，但是，这是可能的

```
struct status {
  int lastinputVac;
  int inputVac;

  int outputVac;

/* The unit is % */
  int outputpower;

  int outputHz;

  /* The unit is % */
  int batterylevel;

  int temperatureC;
} stat;

int* a = &stat;

int maxIndex = (&stat.temperatureC - &stat.lastinputVac) / sizeof (stat); // should be 6
 // you could build named constants for that
a[0]; // lastinputVac
a[1]; // inputVac
a[2]; // outputVac
a[3]; // outputpower
a[4]; // outputHz
a[5]; // batterylevel
a[6]; // temperatureC 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-11T23:07:44.973

将结构与数组联合。请查阅有关对齐的编译器文档。

```
union {

    struct {
       int someInt0;
       int someInt1;    
    }; //anonymous

    int arry[2];

} thing; 
```

~

```
val0 = thing.someInt0; //structure access
val1 = thing.arry[0]; //gcc, C18, XC8, and XC32 handle this with the top value indexed to 0

if (val0 == val1) { 
    puts("this works");
} 
```

# html - 如何像输入文本框一样创建跨度

> ID：10044741
> 
> 赞同：1
> 
> 时间：2012-04-06T14:15:40.923
> 
> 标签：html, css

我想创建一个与输入文本框完全一样的跨度，但在跨度内，它是一个 href 链接。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:03:01.910

我不确定您为什么要通过使`a`标签看起来像来“欺骗”用户`input`，但我相信您的推理是可敬的。Lister 先生有一个很好的评论，即不同的浏览器呈现`input`不同的内容。既然如此，我认为获得在跨浏览器上运行良好的东西的最佳选择是[这样的（示例中的第一个是链接，第二个是要比较的真实输入）](http://jsfiddle.net/vzRqY/17/)。

我只在FF中测试过。`a`我在through 中设置了文本的不透明度`rgba`来隐藏它，但为了搜索引擎的目的而保留它（所以就搜索引擎而言，你不只是有一个空`a`标签）。在使用“真实”`input`来实现外观时，它添加了非语义 html，但它确实允许更好地跨浏览器呈现框。

**HTML**

```
<span class="fakeInput">
   <input type="text" value="Your link"/>
   <a href="#">Your link</a>
</span> 
```

**CSS**

```
.fakeInput {
    position: relative;
    display: inline-block;
    margin: 1px;
}

.fakeInput input {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 0;
    width: 100px;
}

.fakeInput a {
    position: relative;
    display: block;
    width: 100px;
    z-index: 1;
    text-decoration: none;
    color: rgba(256, 256, 256, 0); /*hide anchor text, let input show */
    border: 1px solid transparent;
} 
```

# ios - 在 iOS 上用渐变填充路径

> ID：10044750
> 
> 赞同：8
> 
> 时间：2012-04-06T14:16:36.913
> 
> 标签：ios, uibezierpath, cagradientlayer

在 a 上`CAShapeLayer`，我画了一个封闭的`UIBezierPath`. 我可以通过设置来填充这个形状`fillColor`，但是我想用渐变填充这个形状。如何设置`CAGradientLayer`它以使其剪辑到贝塞尔路径所勾勒的形状？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-06T14:43:59.527

一个草稿示例如下：

```
...
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = UIGraphicsGetCurrentContext();

UIColor *gradientColor = [UIColor colorWithRed:0.51 green:0.0 blue:0.49 alpha:1.0];

NSArray *gradientColors = [NSArray arrayWithObjects: 
                          (id)[UIColor blueColor].CGColor, 
                          (id)gradientColor.CGColor, 
                          (id)[UIColor redColor].CGColor, nil];
CGFloat gradientLocations[] = {0, 0.5, 1};
CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (CFArrayRef)gradientColors, gradientLocations);

UIBezierPath *roundedRectanglePath = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(10, 10, 200, 200) cornerRadius:6];
CGContextSaveGState(context);
[roundedRectanglePath fill];
[roundedRectanglePath addClip];
CGContextDrawLinearGradient(context, gradient, CGPointMake(10, 10), CGPointMake(210, 10), 0);
CGColorSpaceRelease(colorSpace);
CGGradientRelease(gradient);

... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T14:33:05.527

你想要的是一个面具。CAGradientlayer 有一个 -setMask 方法，可以将其剪辑到形状的边界，如下所示：

`[gradientLayer setMask:shapeLayer];`

# javascript - 像 gumroad.com 中的 JQuery UI 翻转文本

> ID：10044753
> 
> 赞同：4
> 
> 时间：2012-04-06T14:16:45.737
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在尝试在我的主页中包含一系列文本短语，就像在本网站的主页 [www.gumroad.com](http://www.gumroad.com)中一样。

从那个站点我可以得到一个使用隐藏和删除并在文本之间切换的功能，但问题是：JQuery UI 在这个类“ui-effects-wrapper”中创建了一个中间 div，它的宽度较小，因此首先文本出现在两行中，然后缩小为一行。

有没有人知道任何方法可以达到与上述网站相同的效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T17:13:21.353

想出了如何复制效果。给你：http: [//jsfiddle.net/vyder/gmDRM/](http://jsfiddle.net/vyder/gmDRM/)

本质上，诀窍是使包装器具有 a`position:relative`并且两个`#content-type`跨度具有`position:absolute`，因此当它们上下下降时，它们会出现在另一个之上。

~~（处理数组的方式仍然存在一个错误，应该不难修复，我认为删除和添加元素有一些奇怪的逻辑）~~

OCD 对代码进行了重构，使其更具可读性，并且通过数组进行迭代也能正常工作。

# python - 在功能测试期间测试任务队列和管道 API

> ID：10044754
> 
> 赞同：0
> 
> 时间：2012-04-06T14:16:53.100
> 
> 标签：python, google-app-engine

我可以使用此代码将任务作为我们功能测试的一部分运行。

```
def run_tasks():
    taskq = apiproxy_stub_map.apiproxy.GetStub('taskqueue')
    tasks = taskq.GetTasks("default")
    taskq.FlushQueue("default")
    try:
        while tasks:
            for task in tasks:
                url, body, headers, method = task["url"], \
                                             base64.b64decode(task["body"]), \
                                             task["headers"], \
                                             task["method"]
                try:
                    res = Request.blank(url,
                                        body=body,
                                        headers=headers,
                                        method=method).get_response(wsgi_app)
                    if res.status_int != 200:
                        log.error("%s\n%s" % (url, str(res)))
                except Exception:
                    log.error(url, exc_info=True)

            tasks = taskq.GetTasks("default")
            taskq.FlushQueue("default")
    finally:
        pass 
```

然而，管道任务在这里爆炸并带有以下信息

“在尝试 1 时收到了管道 ID“[some id]”的评估任务，''直到：[未来某个时间晚些时候]”

相关来源在这里。

```
+++ b/src/pipeline/pipeline/pipeline.py Wed Apr 04 20:01:12 2012 -0400
@@ -1946,6 +1952,7 @@
     if pipeline_record.next_retry_time is not None:
       retry_time = pipeline_record.next_retry_time - _RETRY_WIGGLE_TIMEDELTA
       if self._gettime() <= retry_time:
+        # error under unit tests
         detail_message = (
             'Received evaluation task for pipeline ID "%s" on attempt %d, '
             'which will not be ready until: %s' % (pipeline_key.name(), 
```

我想猴子在代码中修补 _RETRY_WIGGLE_TIMEDELTA 以在我的测试套件中调出 appengine api，但这似乎还不够。

没有等到时间，在我的代码中，这会使我的测试套件运行得非常慢，我不知所措。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:00:23.103

好吧，我误诊了这个问题。任务失败，该逻辑是重试逻辑。在管道 api 中强制执行这有点奇怪，但我相信这是有充分理由的。所以在我的处理任务循环中的某个地方，我需要检查重试计数并以某种方式将它们从队列中取出，然后引发从第一次运行中捕获的所有错误信息，以便可以认为测试失败。

# regex - 如何从指定的标签格式中过滤数字？

> ID：10044756
> 
> 赞同：1
> 
> 时间：2012-04-06T14:17:07.593
> 
> 标签：regex

我有很多包含自定义标签的字符串：

```
hello {RT|12} world {RT|465} this is {RT|13243}a string with{RT|13}examples 
```

我需要一个正则表达式来过滤掉 {RT|xx} 形式的所有标签数量，其中 xx 是任何可能长度的数字。由于我对正则表达式不太擅长，因此我一直在尝试以下方法：

```
preg_match("/{RT|.*}/", $string, $matches) 
```

这现在过滤掉了 {RT|xx} 标记，但我需要 $matches 保存的是 araay(12, 456, 13243, 13)。谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:19:49.577

您可以使用：

```
preg_match_all('/{RT\|(\d+)}/', $string, $matches) 
```

你想要的值将在`$matches[1]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:30:50.650

[@Qtax](https://stackoverflow.com/users/107152/qtax)我无法在您的回答中发表评论，因为我没有足够的代表，但我会说他应该避开管道，因此正则表达式与他想要的文本完全匹配

```
preg_match_all('/{RT\|(\d+)}/', $string, $matches, PREG_PATTERN_ORDER) 
```

**[在@Qtax](https://stackoverflow.com/users/107152/qtax)回答的海报评论后编辑：** [@reveller](https://stackoverflow.com/users/330271/reveller)在我发布时更改您的正则表达式，您有一个空字符串，因为您在 | 之前匹配 '{RT' 和管道后面的 '(\d+)}' ，并且由于第一个匹配项没有一个组来赶上该值，因此它返回一个空字符串。

在我发布时进行更改，您将匹配整个文本，因此您只会获得一次并获得您需要的数字。

它的发生导致管道'|' 正则表达式上的意思是 OR，所以你匹配的是 '{RT' OR '(\d+)}'。要不匹配两次，您需要转义管道，以便正则表达式将其作为文本匹配。

[这个站点](http://regexpal.com)是测试你的正则表达式的好地方，你只需把你想要测试的文本，你的正则表达式放在另一个上，你就可以很容易地看到它的工作。

# facebook - 如何为 Facebook SDK 创建“channel.html”文件

> ID：10044758
> 
> 赞同：5
> 
> 时间：2012-04-06T14:17:09.053
> 
> 标签：facebook, channel

在其文档中，Facebook 建议为其 JavaScript SDK 使用通道文件。我的问题涉及有关如何创建此文件的一个小细节。很明显，我必须使用该行创建 HTML 文件`<script src="//connect.facebook.net/en_US/all.js"></script>`

但随后 Facebook 建议尽可能长时间地缓存此文件并提供 PHP 脚本来执行此操作。我的问题是：我应该把这个脚本放在哪里？`channel.html`在我将放置在我的网站安装根目录中的同一个文件中（一个自托管的 Wordpress 博客）。

谢谢！

P。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T14:25:47.807

频道文件应该只有您已经提到的代码

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

您可以将缓存代码放在任何地方，并且很可能将其放在索引文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-02T18:06:40.413

我想强调一下我认为在这个特定的问答中被忽略的几点：

(1) 在我看来，我会说 Facebook 推荐的“channel.html”代码片段需要是一个单独的文件——片段不能像 harry 推荐的那样仅仅放入索引文件中（通过我假设他的意思是主页或网站的其他通用内容页面）。

如果查看`SCRIPT`元素`src`属性指向的 URL，它与 JS-SDK 代码中异步调用的脚本完全相同：

`connect.facebook.net/en_US/all.js`

因此，将另一个`SCRIPT`指向该文件的元素放入索引页面（或任何其他页面）只是在进行完全浪费和冗余的 HTTP 请求。存在单个文件（即“channel.html”）的全部意义在于 Facebook 解决跨域脚本 (XSS) 问题的一种方式。*这个概念比我在 Stack Overflow 文章“**[为什么我们需要在我们的服务器上创建一个 channel.html 来使用 Facebook JS SDK？](https://stackoverflow.com/questions/7052734/why-do-we-need-to-create-a-channel-html-on-our-server-to-use-facebook-js-sdk)* *”*中解释得更详细，也更容易理解。

(2.) 值得注意的是，如果您决定使用“channel.html”文件中的 PHP 片段，您有两个选项在 Facebook 文档中并未明确说明：

(a) 您可以使用 PHP 扩展名保存文件，例如“channel.php”，并更新 JavaScript 中的变量，如下所示： `channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.php'`

(b) 您可以保留文件名“channel.html”并配置服务器以允许将“.html”文件作为 PHP 处理。

我还假设该文件可以被称为任何东西，并且可以存储在您的 Web 服务器上的任何位置，只要它的 URL 在`channelURL`值中提供。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T16:27:50.820

您可以创建一个`channel.php`代替`channel.html`并将以下代码放入其中。

```
<?php
  $cache_expire = 60*60*24*365;
  header("Pragma: public");
  header("Cache-Control: maxage=".$cache_expire);
  header('Expires: '.gmdate('D, d M Y H:i:s', time()+$cache_expire).' GMT');
?>

<script src="//connect.facebook.net/en_US/all.js"></script> 
```

# java - 使用分页和排序创建 JSF 表

> ID：10044759
> 
> 赞同：2
> 
> 时间：2012-04-06T14:17:13.353
> 
> 标签：java, jsf, jsf-2

我想用分页和排序创建[这个JSF 表。](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)

到目前为止，这是 JSF 代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable value="#{SessionsController.dataList}" var="item">
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.ASESSIONID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.USERID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.ACTIVITYSTART}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.ACTIVITYEND}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.ACTIVITY}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <t:dataList value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="<b>#{page}</b>" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </t:dataList>
                        <h:form id="form">

                            <!-- The sortable data table -->
                            <h:dataTable value="#{SessionsController.dataList}" var="item">
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                            <f:attribute name="sortField" value="Account Session ID" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.ASESSIONID}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                            <f:attribute name="sortField" value="User ID" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.USERID}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                            <f:attribute name="sortField" value="Activity Start Time" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.ACTIVITYSTART}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                            <f:attribute name="sortField" value="Activity End Time" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.ACTIVITYEND}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                            <f:attribute name="sortField" value="Activity" />
                                        </h:commandLink>
                                    </f:facet>
                                    <h:outputText value="#{item.ACTIVITY}" />
                                </h:column>
                            </h:dataTable>

                            <!-- The paging buttons -->
                            <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                             disabled="#{SessionsController.firstRow == 0}" />
                            <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                             disabled="#{SessionsController.firstRow == 0}" />
                            <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                             disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                            <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                             disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                            <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                            <br />

                            <!-- The paging links -->
                            <t:dataList value="#{SessionsController.pages}" var="page">
                                <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                               rendered="#{page != SessionsController.currentPage}" />
                                <h:outputText value="<b>#{page}</b>" escape="false"
                                              rendered="#{page == SessionsController.currentPage}" />
                            </t:dataList>
                            <br />

                            <!-- Set rows per page -->
                            <h:outputLabel for="rowsPerPage" value="Rows per page" />
                            <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                            <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                            <h:message for="rowsPerPage" errorStyle="color: red;" />

                            <!-- Cache bean with data list, paging and sorting variables for next request -->
                            <t:saveState value="#{SessionsController}" />
                        </h:form>        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                        <!-- Cache bean with data list, paging and sorting variables for next request -->
                        <t:saveState value="#{SessionsController}" />
                    </h:form>

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   

            </div>  
        </div>

    </h:body>
</html> 
```

豆代码：

```
import java.io.Serializable;
import java.math.BigDecimal;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/* include SQL Packages */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean;
import javax.faces.event.ActionEvent;

import org.glassfish.osgicdi.OSGiService;

@Named("SessionsController")
@SessionScoped
public class Sessions implements Serializable {

    /* Call the Oracle JDBC Connection driver */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    // DAO.
//    private static ActiveSessionsDAO dao = DAOFactory.getInstance("javabase").getActiveSessionsDAO();
    // Data.
    private List<ActiveSessions> dataList;
    private int totalRows;
    // Paging.
    private int firstRow;
    private int rowsPerPage;
    private int totalPages;
    private int pageRange;
    private Integer[] pages;
    private int currentPage;
    // Sorting.
    private String sortField;
    private boolean sortAscending;
    // Constants ----------------------------------------------------------------------------------
    private static final String SQL_LIST_BY_ORDER_AND_LIMIT =
            "SELECT * FROM ACTIVESESSIONSLOG ORDER BY %s %s LIMIT ?, ?";
    private static final String SQL_COUNT =
            "SELECT count(*) FROM ACTIVESESSIONSLOG";

    private static class DAOFactory {

        public DAOFactory() {
        }
    }

    private static class ActiveSessions {

        public ActiveSessions() {
        }

        private ActiveSessions(long aLong, String string, Integer integer) {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }
    // Properties ---------------------------------------------------------------------------------
    private DAOFactory daoFactory;

    // Constructors -------------------------------------------------------------------------------

    Sessions(DAOFactory daoFactory) {
        this.daoFactory = daoFactory;
        // Set default values somehow (properties files?).
        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).
        pageRange = 10; // Default page range (max amount of page links to be displayed at once).
        sortField = "ASESSIONID"; // Default sort field.
        sortAscending = true; // Default sort direction.
    }

    // Paging actions -----------------------------------------------------------------------------
    public void pageFirst() {
        page(0);
    }

    public void pageNext() {
        page(firstRow + rowsPerPage);
    }

    public void pagePrevious() {
        page(firstRow - rowsPerPage);
    }

    public void pageLast() {
        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));
    }

    public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    }

    private void page(int firstRow) {
        this.firstRow = firstRow;
        loadDataList(); // Load requested page.
    }

    // Sorting actions ----------------------------------------------------------------------------
    public void sort(ActionEvent event) {
        String sortFieldAttribute = (String) event.getComponent().getAttributes().get("sortField");

        // If the same field is sorted, then reverse order, else sort the new field ascending.
        if (sortField.equals(sortFieldAttribute)) {
            sortAscending = !sortAscending;
        } else {
            sortField = sortFieldAttribute;
            sortAscending = true;
        }

        pageFirst(); // Go to first page and load requested page.
    }

    // Loaders ------------------------------------------------------------------------------------
    private void loadDataList() {

        // Load list and totalCount.
        try {
            dataList = dao.list(firstRow, rowsPerPage, sortField, sortAscending);
            totalRows = dao.count();
        } catch (Exception e) {
            throw new RuntimeException(e); // Handle it yourself.
        }

        // Set currentPage, totalPages and pages.
        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;
        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);
        int pagesLength = Math.min(pageRange, totalPages);
        pages = new Integer[pagesLength];

        // firstPage must be greater than 0 and lesser than totalPages-pageLength.
        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);

        // Create pages (page numbers for page links).
        for (int i = 0; i < pagesLength; i++) {
            pages[i] = ++firstPage;
        }
    }

    // Getters ------------------------------------------------------------------------------------
    public List<ActiveSessions> getDataList() {
        if (dataList == null) {
            loadDataList(); // Preload page for the 1st view.
        }
        return dataList;
    }

    public int getTotalRows() {
        return totalRows;
    }

    public int getFirstRow() {
        return firstRow;
    }

    public int getRowsPerPage() {
        return rowsPerPage;
    }

    public Integer[] getPages() {
        return pages;
    }

    public int getCurrentPage() {
        return currentPage;
    }

    public int getTotalPages() {
        return totalPages;
    }

    // Setters ------------------------------------------------------------------------------------
    public void setRowsPerPage(int rowsPerPage) {
        this.rowsPerPage = rowsPerPage;
    }

    // Actions ------------------------------------------------------------------------------------
    /**
     * Returns list of ActiveSessions items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @param firstRow First index of rows to be returned.
     * @param rowCount Amount of rows to be returned.
     * @param sortField Field to sort the data on.
     * @param sortAscending Whether to sort data ascending or not.
     * @return list of ActiveSessions items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @throws DAOException If something fails at DAO level.
     */
    public List<ActiveSessions> list(int firstRow, int rowCount, String sortField, boolean sortAscending)
            throws Exception {
        Object[] values = {firstRow, rowCount};

        if (ds == null) {
            throw new SQLException();
        }

        String sortDirection = sortAscending ? "ASC" : "DESC";
        String sql = String.format(SQL_LIST_BY_ORDER_AND_LIMIT, sortField, sortDirection);
        Connection conn = ds.getConnection();
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        List<ActiveSessions> dataList = new ArrayList<ActiveSessions>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
//            connection = daoFactory.getConnection();
            preparedStatement = conn.prepareStatement(sql);
            resultSet = preparedStatement.executeQuery();
            while (resultSet.next()) {
                dataList.add(mapActiveSessions(resultSet));
            }
        } catch (SQLException e) {
            throw new Exception(e);
        } finally {
            conn.close();
        }

        return dataList;
    }

    /**
     * Returns total amount of rows in table.
     * @return Total amount of rows in table.
     * @throws DAOException If something fails at DAO level.
     */
    public int count() throws Exception {
//        Connection connection = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
//            connection = daoFactory.getConnection();
            Connection conn = ds.getConnection();
            preparedStatement = conn.prepareStatement(SQL_COUNT);
            resultSet = preparedStatement.executeQuery();
            if (resultSet.next()) {
                count = resultSet.getInt(1);
            }
        } catch (SQLException e) {
            throw new Exception(e);
        } finally {
            //close the connection
        }

        return count;
    }

    /**
     * Map the current row of the given ResultSet to ActiveSessions.
     * @param resultSet The ResultSet of which the current row is to be mapped to ActiveSessions.
     * @return The mapped ActiveSessions from the current row of the given ResultSet.
     * @throws SQLException If something fails at database level.
     */
    private static ActiveSessions mapActiveSessions(ResultSet resultSet) throws SQLException {
        return new ActiveSessions(
                resultSet.getLong("ASESSIONID"),
                resultSet.getString("USERID"),
                resultSet.getObject("value") != null ? resultSet.getInt("value") : null);
                /*
                CREATE TABLE ACTIVESESSIONSLOG(
                    ASESSIONID VARCHAR2(30 ) NOT NULL,
                    USERID VARCHAR2(30 ),
                    ACTIVITYSTART TIMESTAMP(6),
                    ACTIVITYEND TIMESTAMP(6),
                    ACTIVITY CLOB
                )
                */
    }
} 
```

我想使用这个 Oracle 表来存储数据：

```
-- TABLE ACTIVESESSIONSLOG

CREATE TABLE ACTIVESESSIONSLOG(
  ASESSIONID VARCHAR2(30 ) NOT NULL,
  USERID VARCHAR2(30 ),
  ACTIVITYSTART TIMESTAMP(6),
  ACTIVITYEND TIMESTAMP(6),
  ACTIVITY CLOB
)
/ 
```

有一些我无法解决的问题： 1\. 我想使用没有 Tomahawk 组件库本身的纯 JSF，该组件库本身包含 t:dataList 和 t:saveState 组件 2\. 我想使用 Oracle 表的 java 代码和我想简化代码 - 删除不需要的代码。

我会将我所有的声誉积分奖励给那些将在赏金可用时（两天后）帮助我修复代码的人，无论现在或以后修复代码。

最良好的祝愿彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T01:17:35.257

对于类似的东西，我们使用了 JQuery 数据表插件 (http://datatables.net/)，它很容易实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T07:14:33.623

try to use [Primefaces datatable](http://www.primefaces.org/showcase/ui/datatableComplex.jsf). It's very easy.

# wpf - 等待窗口关闭并捕获窗口事件

> ID：10044761
> 
> 赞同：1
> 
> 时间：2012-04-06T14:17:20.823
> 
> 标签：wpf, multithreading, events, mvvm

我有一个窗口，它的数据上下文是一个视图模型。现在，在 vm 和 window(view) 的范围之外，我有一个将被调用的方法。该方法需要显示窗口并让用户更改一些内容，然后当用户完成时，需要关闭窗口并继续该方法。棘手的是，我在窗口上的按钮绑定到视图模型中的命令。这些命令会触发诸如“userCancelled”和“userOked”之类的事件。所以我想捕捉这些事件以知道何时关闭窗口并继续使用该方法。

如果我使用 ShowDialog 在窗口上，则不会捕获事件（我假设因为线程被捆绑等待对话框关闭）。但是，如果我使用 Show，该方法将继续运行。我需要它等待。我已经尝试过 Thread.Sleep，直到打开了某个布尔值，但这也会占用线程并使窗口不可用（使用 .Show()）。

我试过制作一个 backgroundWorker，但我仍然遇到同样的问题。

我知道我可以在按钮上使用代码隐藏，但是对于 OK 按钮，viewModel 必须验证其状态是否有效。让视图与视图模型协商违背了 MVVM 松散耦合风格的观点，对吗？

我正在自己学习 WPF 和 MVVM，我想把它做好，并在可行的情况下坚持良好的设计原则。我该怎么做？我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:49:59.963

您可以使用[Prism](http://compositewpf.codeplex.com/)和[WindowRegionAdapter](http://compositewpfcontrib.codeplex.com/wikipage?title=Windows%20Region%20Adapter)*正确*执行此操作。

1.  使用 WindowRegionAdapter 注册要显示/隐藏的视图（用户控件），以便在请求视图时在新窗口中打开。
2.  为视图的显示/隐藏/关闭创建 CompositePresentationEvents，并将它们放在一些常见的基础结构组件中。
3.  在包含视图的模块的 Initialize 方法中，订阅在 2 中创建的事件并将它们链接到 OnShow/OnHide/OnClose 事件处理程序。
4.  在事件处理程序中，您可以使用 Prism 区域管理器从该区域添加/删除视图，这将依次显示/隐藏/关闭窗口。您可以修改 WindowRegionAdapter 以精确地执行您希望它执行的操作。
5.  然后，每当您想显示/隐藏视图时，您可以简单地在任何地方（在任何模块/视图模型中）发布适当的显示/隐藏事件，并且将在订阅事件的模块中调用适当的事件处理程序，窗口将是显示为隐藏。

是的，它有点复杂，但绝对值得投资，特别是如果您还需要打开其他窗口。保持东西非常干净。

# python - 请帮助将原始 sql 完全转换为 SQLAlchemy 代码（我试过但还没有）

> ID：10044767
> 
> 赞同：1
> 
> 时间：2012-04-06T14:17:37.873
> 
> 标签：python, sqlalchemy

我希望一切都好。首先，我很抱歉我的 SQL 不是很好。

我有一个如下所示的原始 SQL

```
select a.appointmentId, a.patientId, r.MaxTime from (
    select appointmentid, patientid, max(apptDate) as MaxTime
        from appointment 
        where facilityid=95
        group by patientid
    ) r
inner join

Appointment a on 
a.patientid = r.patientid and 
a.apptDate = r.MaxTime 
```

我在我的代码中使用了 SQLAlchemy 的声明式风格，这就是我的查询的样子

```
appt_query = alchemy_session.query(Appointment.appointmentId, Appointment.patientId,          func.max(Appointment.apptDate).label('maxTime')).filter(

        Appointment.facilityId == 95,

).group_by(Appointment.patientId).subquery()

 appointments  = alchemy_session.query(Appointment.appointmentId, Appointment.patientId,    appt_query.c.maxTime).outerjoin(

            appt_query, and_(
                Appointment.patientId == appt_query.c.patientId,
                Appointment.apptDate == appt_query.c.maxTime
            )

) 
```

但是当我这样做时

打印约会

不幸的是，它没有产生我想要的 SQL。我知道我对 SQL 的理解存在缺陷，因此任何关于此的指针都会非常有帮助。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:45:14.060

正如 sayap 所提到的，这非常接近于同一个查询。修复`.outerjoin()`to之后`.join()`，剩下的唯一事情就是提供一个`Appointment`别名实例，这样子查询就不会被关联。这很好地完成了`sqlalchemy.orm.aliased`：

```
>>> from sqlalchemy.orm import aliased, Query
>>> appt_alias = aliased(Appointment)
>>> appt_query = Query([Appointment.appointmentId,
...                     Appointment.patientId,
...                     func.max(Appointment.apptDate).label('maxTime')]) \
...             .filter(Appointment.facilityId == 95,) \
...             .group_by(Appointment.patientId) \
...             .subquery()
>>> appointments  = Query([appt_alias.appointmentId,
...                        appt_alias.patientId,
...                        appt_query.c.maxTime]) \
...                 .join(appt_query, and_(
...                     appt_alias.patientId == appt_query.c.patientId,
...                     appt_alias.apptDate == appt_query.c.maxTime) )
>>> 
>>> print appointments
SELECT appointment_1."appointmentId" AS "appointment_1_appointmentId", appointment_1."patientId" AS "appointment_1_patientId", anon_1."maxTime" AS "anon_1_maxTime" 
FROM appointment AS appointment_1 JOIN (SELECT appointment."appointmentId" AS "appointmentId", appointment."patientId" AS "patientId", max(appointment."apptDate") AS "maxTime" 
FROM appointment 
WHERE appointment."facilityId" = :facilityId_1 GROUP BY appointment."patientId") AS anon_1 ON appointment_1."patientId" = anon_1."patientId" AND appointment_1."apptDate" = anon_1."maxTime" 
```

# java - 单击停止按钮时文件内容为空

> ID：10044769
> 
> 赞同：-1
> 
> 时间：2012-04-06T14:17:47.430
> 
> 标签：java, android

我的问题是单击停止按钮后文件为空，但仅当时间更改时，例如，当我在 16:49:39 单击开始按钮，然后在 16:49:57 单击停止按钮时，文件为空。但是当我点击停止按钮 16:50:01 然后文件保存数据。请告诉我为什么会发生这种情况？以及如何解决这个问题。您可以在下面看到我的应用程序中的代码：

点击代码：

```
 @Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.startButton:
            stoper.start();

            try {
                writer = new CSVwriter(dateFormat.format(date));
            } catch (IOException e) {
                e.printStackTrace();  
            }
            handler.postDelayed(UpdateView, 120);
            break;
        case R.id.stopButton:
            stoper.stop();

            try {
                writer.closeFile();
            } catch (IOException e) {
                e.printStackTrace();  
            }
            break;
    }
}

private Runnable UpdateView = new Runnable() {
    public void run() {
        timerText.setText(stoper.toString());
        pulsText.setText(""+accelerationX);

        try {
             writer.insertLine(new DataObject(stoper.toString(), accelerationX, accelerationY, accelerationZ));
         } catch (IOException e) {
            e.printStackTrace();
        }

        handler.postDelayed(UpdateView, 100);
        }
}; 
```

OnCreate 代码：

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        View startBtn = findViewById(R.id.startButton);
        startBtn.setOnClickListener(this);
        View stopBtn = findViewById(R.id.stopButton);
        stopBtn.setOnClickListener(this);

        handler = new Handler();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:30:17.713

如果作者有 flush() 方法，您是否尝试过手动调用 flush()？（大多数文件写入类应该有一个 flush() 方法，除非 CSVwriter 是你自己的类。）

手动刷新流可能会有所帮助。

编辑：作为旁注，stoper.stop() 是否会抛出错误？如果它确实将它移动到 finally 块中的文件关闭之后，以确保它总是在文件被刷新和关闭后被调用。

# javafx - 将按钮更优雅地放入表格列中

> ID：10044779
> 
> 赞同：4
> 
> 时间：2012-04-06T14:18:17.407
> 
> 标签：javafx, javafx-2

这是一个 SSCCE，演示了如何将 a`Button`放入`TableView`列中。它有效，但几乎没有不愉快的行为。当**使用滚动条通过鼠标向下**滚动表格行时，不会立即显示新呈现的按钮。它们仅在释放鼠标然后移动时显示。我认为还有另一种更优雅的方式来显示表格列中的按钮，并在单击时执行与所选行相关的一些操作。有什么建议么？

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.StackPaneBuilder;
import javafx.stage.Stage;
import javafx.util.Callback;

public class ButtonDemo extends Application {

    private TableView<Person> personTable = new TableView<>();
    private TableColumn<Person, String> nameCol = new TableColumn<>("name");
    private TableColumn<Person, Double> salaryCol = new TableColumn<>("salary");
    private TableColumn<Person, String> actionCol = new TableColumn<>("action");

    @Override
    public void start(Stage primaryStage) {
        ObservableList<Person> data = FXCollections.observableArrayList();
        for (int i = 0; i < 40; i++) {
            data.add(new Person("person_" + i, i * 100d));
        }

        nameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("name"));
        salaryCol.setCellValueFactory(new PropertyValueFactory<Person, Double>("salary"));
        actionCol.setCellValueFactory(new PropertyValueFactory<Person, String>("name")); // "name" here is for just to render the column

        Callback<TableColumn<Person, String>, TableCell<Person, String>> printColumnCellFactory = //
                new Callback<TableColumn<Person, String>, TableCell<Person, String>>() {

            @Override
            public TableCell call(final TableColumn param) {
                final TableCell cell = new TableCell() {

                    @Override
                    public void updateItem(Object item, boolean empty) {
                        super.updateItem(item, empty);
                        if (empty) {
                            setText(null);
                            setGraphic(null);
                        } else {
                            final Button btnPrint = new Button("print name");
                            btnPrint.setOnAction(new EventHandler<ActionEvent>() {

                                @Override
                                public void handle(ActionEvent event) {
                                    param.getTableView().getSelectionModel().select(getIndex());
                                    Person item = personTable.getSelectionModel().getSelectedItem();
                                    if (item != null) {
                                        System.out.println(item.getName());
                                    }
                                }
                            });
                            setGraphic(btnPrint);
                            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                        }
                    }
                };
                return cell;
            }
        };
        actionCol.setCellFactory(printColumnCellFactory);

        personTable.setItems(data);
        personTable.getColumns().addAll(nameCol, salaryCol, actionCol);
        StackPane root = StackPaneBuilder.create().children(personTable).build();
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }

    public class Person {

        private String name;
        private Double salary;

        public Person(String name, Double salary) {
            this.name = name;
            this.salary = salary;
        }

        public String getName() {
            return name;
        }

        public Double getSalary() {
            return salary;
        }
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:33:17.947

升级到 2.1 版解决了这个问题。

# jquery - jQuery Mobile 更改页面未在 DOM 中加载页面

> ID：10044781
> 
> 赞同：2
> 
> 时间：2012-04-06T14:18:24.077
> 
> 标签：jquery, jquery-mobile

我正在`Home`我的应用程序中加载一个 JqueryMobile 页面，并且`pageinit`我正在`B`使用`$.mobile.changePage('webWatch.html'`...

现在，当我尝试将已在 DOM 中并归因于的 changePage from 更改为`B`时，什么也没有发生。我在页面上没有收到任何错误或操作。`Home``data-dom-cache=true`

任何建议如何让这个东西工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:21:53.480

使用绝对 URL，以便您要求的 URL 与`data-url`页面的属性相匹配。

例如，如果一个文件在`/watch/`文件夹中（在您帐户的根目录中），您可以`data-url`在 jQuery Mobile 之前设置它的属性：

```
<div data-dom-cache="true" data-role="page" data-url="/watch/default.html">
    ...
</div> 
```

这样你就知道它的设置是正确的，你不必担心资产的相对性。然后，当您链接到该页面时，请使用绝对 URL：

```
<a data-role="button" href="/watch/default.html">Go to /watch/default.html</a> 
```

这样，当您单击`Go to /watch/default.html`链接时，jQuery Mobile 将在当前伪页面中搜索具有与链接`data-url`属性匹配的`href`属性的伪页面。

# python - 创建一个简单的 python 对象并将其发送回 Mako.template.render()

> ID：10044787
> 
> 赞同：1
> 
> 时间：2012-04-06T14:19:04.223
> 
> 标签：python, mako

我正在使用 Mako 为网络路由器创建一些配置模板。

我想创建一个简单的路由器对象，即

**文件路由器.py**

```
class myRouter(Object):

     def name(self):
          return "Foo"

     def interfaces(self):
          return [{'name':'loopback','address':'127.0.0.1'},{...}] 
```

然后使用 Mako 和我的模板渲染它

**执行：**

```
from mako import *
from routers import myRouter
z = myRouter()
mytemplate = Template(filename='config.mako')
print mytemplate.render(router=z) 
```

**文件 config.mako**

```
Router name is ${router.name()}!
Router interfaces are :
% for i in router.interfaces():
     ${i.name} -> ${i.address}
% endfor 
```

**输出：**

> 路由器名称是

```
<bound method Router.name of <pyrouteur.Router object
> at 0x7fa10a912310>> 
```

我怎样才能避免这种行为？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:40:29.097

您需要创建该类的一个实例，`myRouter`然后将其传递给 render 方法，目前您将类本身作为参数传递。

您的代码应如下所示：

```
r = myRouter()
t.render(router =r) 
```

# java - 在 Spring-MVC 中访问应用程序属性

> ID：10044789
> 
> 赞同：7
> 
> 时间：2012-04-06T14:19:27.420
> 
> 标签：java, spring, spring-mvc

Spring-MVC 的新手。

我想在 .properties 文件中存储两个属性（uploadFolder=..、downloadFolder=..）并在 HomeController 类中访问它（由 MVC 模板自动创建）。

你能指导我如何..

1）用上面的内容创建了一个app.properties文件，放在/src/main/resources下。这是正确的还是应该放在/webapp/resources 下？

2) 以下列方式在 servlet-context.xml 中放置一个 bean。这个对吗？

```
<beans:bean id="messageSource"
   class="org.springframework.context.support.ResourceBundleMessageSource">
   <beans:property name="basename" value="app" />
</beans:bean> 
```

3) 现在我如何在 Java 控制器中访问它？

4) 我如何在 JSP 中访问这些？

我说不出我会感谢你多少。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T14:38:50.837

有几种不同的方法可以做到这一点。我执行以下操作。在应用程序上下文中：

```
<util:properties id="myProps" location="classpath:app.properties" /> 
```

确保在文件顶部包含以下内容以包含“util”命名空间：

```
xmlns:util="http://www.springframework.org/schema/util" 
xsi:schemaLocation= "... http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd" 
```

我通常将我的属性文件放在 src/main/resources 中。只要他们在类路径上，你就很好。然后，在您的控制器中，您可以使用以下命令注释您的字段/方法：

```
@Controller
public class MyController {

    @Value("#{myProps['uploadFolder']}")
    private String uploadFolder

    @Value("#{myProps['downloadFolder']}")
    private String downloadFolder

    @RequestMapping("myPage")
    public String loadPage(ModelMap m) {
        m.addAttribute("uploadFolder", uploadFolder);
        m.addAttribute("downloadFolder", downloadFolder);
        return "myPage";
    }

    public void setUploadFolder(String uploadFolder) {
        this.uploadFolder = uploadFolder;
    }
    public void setDownloadFolder(String downloadFolder) {
        this.downloadFolder = downloadFolder;
    }
} 
```

然后，在您的 JSP 中：

```
Download folder: ${downloadFolder} <br/>
Upload folder: ${uploadFolder} 
```

HTH。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:41:54.917

1）更好的方法是使用`src/main/resources`

2）是的，但这`messages`有不同的目的

3)

从属性文件中制作 bean 的一种方法`src/main/resources`：

```
<bean id="foldersConfig" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
   <property name="location" >
      <value>/WEB-INF/classes/folders.properties</value>
   </property>
</bean> 
```

在您的控制器中只需注入参考。

这是您的控制器的外观，xml：

```
<bean id="myController" class="my.project.package.controller.MyController">
 ...
 <property name="foldersConfig" ref="foldersConfig" />
</bean> 
```

控制器类，相关部分：

```
public class MyController extends ... {

 private Properties foldersConfig;

 public void setFoldersConfig(Properties config) {
   this.foldersConfig = config;
 }
} 
```

4）如果您将属性放在视图 - 模型中，您可以访问，但这不是一个好的解决方案。在控制器（路径）中获取您需要的内容并将其放入结果中。

# objective-c - Objective-c 无法加载 nib 文件：RoosterView.xib

> ID：10044790
> 
> 赞同：0
> 
> 时间：2012-04-06T14:19:29.840
> 
> 标签：objective-c, xcode, interface-builder, xib, nib

我通过编辑 info.plist 文件更改了我的 nib 文件，并将 File's Owner 设置为我扩展 NSViewController 的类，但现在它给了我以上错误：

> 正在运行... 2012-04-06 15:11:45.552 Rooster[1251:a0f] 无法加载 nib 文件：RoosterView.xib，退出
> 
> ```
> Debugger stopped.
> Program exited with status value:1.(gdb) 
> ```

我该如何解决？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-19T05:15:11.047

此问题的另一个可能原因是指定“MainMenu.xib”而不是“MainMenu”。也就是说，不包括 .xib 扩展名。

在 Xcode 中输入文件名时，它将自动完成并包含导致错误的 .xib。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-26T19:35:09.000

我今天也发生了同样的错误。通过在主界面下的项目设置中删除 .xib 扩展名来修复它。

图片教程：

改变这个： ![在此处输入图像描述](../Images/ce9ec512fdfe529275fd64af6d01f393.png)

对此： ![在此处输入图像描述](../Images/f168692de35711cd97e7566584e96971.png)

希望这可以帮助某人:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T14:42:02.053

更改您的 info.plist 文件，以便它加载您的原始 nib（大概是 MainMenu.xib），并确保文件的所有者是`NSApplication`. 在您编写应用程序的绝大多数情况下，这就是您想要的方式。

接下来，在您的 RoosterView.m（我认为它是一个子类）中，使用's方法`NSViewController`加载您的 RoosterView.xib 。`NSViewController``– initWithNibName:bundle:`

最后，在您恢复的 MainMenu.xib 中，将自定义视图对象添加到您的窗口。将自定义视图的类设为您的 RoosterView。

祝你在你的努力中好运。并且在将来，每当您创建应用程序时，请不要乱用应用程序的 xib 的 File's Owner 设置，除非您感到非常沮丧。

# php - PHP preg_match 总是返回 false

> ID：10044791
> 
> 赞同：1
> 
> 时间：2012-04-06T14:19:35.270
> 
> 标签：php, preg-match, http-referer

我有一个客户。假设他们的域是 www.mydomain.com。

我们正在 www.mydomain.com/newsection 创建一个新页面。

在 /newsection 页面上，仅当用户之前在主站点上时，客户才想添加一个链接，上面写着“返回主站点”（www.mydomain.com）。

因此，我设置了这样的 PHP 代码片段：

```
<?php
$referral = $_SERVER['HTTP_REFERER'];
if (preg_match('/http://www.mydomain.com/', $referral)) {
echo "from My Domain";
} else {
echo "not from My Domain";
}
?> 
```

但是，即使用户来自 mydomain.com，这始终返回 false（“不是来自 My Domain”）。

是否有任何明显的语法错误或其他我没有得到的逻辑问题？

我的新页面 (www.mydomain.com/newsection) 是否仍在该主域上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:21:25.300

表达式中的斜杠需要转义，因为它们也是分隔符。或者，您可以选择另一个分隔符：

```
preg_match('~http://www\.mydomain\.com~', $referral) 
```

注意我还转义了`.`s，它们是正则表达式中的特殊字符。它们不会破坏正则表达式，但它们匹配任何字符——可能不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:22:44.693

你可以只使用[strpos](http://php.net/manual/en/function.strpos.php)

```
if (strpos($referral, 'http://www.mydomain.com') !== false) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:25:20.740

开发时开启error_reporting。您实际上收到了类似以下警告的信息，这应该对您有所帮助（尤其是结合 minitech 的回答）：

> 警告：preg_match() [function.preg-match]: Unknown modifier '/' in

# jsp - Servlet/JSP Web 应用程序设计

> ID：10044796
> 
> 赞同：0
> 
> 时间：2012-04-06T14:20:18.173
> 
> 标签：jsp, tomcat, servlets

几天前我安装了tomcat 7，并决定尝试建立一个小型网站。没什么，只是一些 UI 和一些背后的小逻辑。

我知道 servlet 和 JSP 是什么，以及它们是如何工作的。所以我写了一个JSP，它发送主页。然后我开始设置一些链接，然后……第一个问题出现了。如果页面中有一些内容应该出现在*每个*页面中，例如导航栏，该怎么办。更一般地说，我需要的可能是一个动态填充的静态骨架。

我在 Google 上搜索了很多，然后潜入了 Web 编程的迷宫丛林。

这真的是一片丛林。不能理解太多。*我只是想从 Servlets、JSP 和bam*构建一个网站，我发现自己安装了 Eclipse Indigo、Ant、Apache Velocity、SpringMVC 和一堆其他东西。令人沮丧的是，每个教程都提出了不同的工具链。

我只是想动态填充内容。也许比 JSP 更灵活一些。这就是问题。最常见的技术/惯例是什么？

谢谢，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:25:48.587

在 jsp 内容中，您可以包含其他 jsp 内容！

[http://java.sun.com/products/jsp/syntax/1.2/syntaxref1214.html](http://java.sun.com/products/jsp/syntax/1.2/syntaxref1214.html)

为什么不做一个

> fixed_things.jsp

然后将其包含在其他所有 jsp 中？

# maven - Felix 1.4.0 OSGi 中的 Axis2

> ID：10044803
> 
> 赞同：2
> 
> 时间：2012-04-06T14:20:41.007
> 
> 标签：maven, osgi, axis2, apache-felix

我尝试使用 maven-bundle-plugin 将 axis2 (v. 1.5.1) 及其依赖项嵌入到 osgi 包中。在我的项目的 pom 中，我有以下标签：

```
<Embed-Dependency>*;scope=compile|runtime</Embed-Dependency>
<Embed-Transitive>true</Embed-Transitive> 
```

为了将所有axis2依赖项（和传递的依赖项）嵌入到最终的jar文件中。jar 文件可以在 Felix 中成功安装，但问题是当另一个包尝试使用该 jar 类中的方法时，我得到了异常：

```
javax.xml.stream.FactoryConfigurationError: Requested factory 
    com.ctc.wstx.stax.WstxInputFactory cannot be located.  
    Classloader =sun.misc.Launcher$AppClassLoader@9cab16 
```

该类`com.ctc.wstx.stax.WstxInputFactory`位于`woodstox wstx-asl`嵌入到 jar 中的工件中，因此不应抛出此异常。我也尝试将此工件放入另一个包中，但发生相同的错误。

这里有什么问题？

在[这个讨论](http://mail-archives.apache.org/mod_mbox/axis-java-user/201110.mbox/%3CCADx4_uV3ButVuw9-Feekaun-Oegru4rhYH9xFiQWFuTp45uNtg@mail.gmail.com%3E)中，他们说这是一个类加载器问题，但我找不到任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:24:30.923

在您提到的邮件列表线程中，我已经描述了一种解决方案，它不是将 StAX 嵌入到包中，而是使用 StAX API 和实现 (Woodstox) 的 OSGified 版本。

如果将 StAX 嵌入到包中是一项硬要求，那么您需要添加一个包激活器，该激活器调用 org.apache.axiom.om.util.StAXUtils 中的静态 setFactoryPerClassLoader 方法将该属性设置为 false。至少这应该适用于通过 Axiom 使用 StAX 的任何代码（包括 Axis2），但如果有代码直接与 StAX 交互，您可能仍然会遇到问题。

# java - 您如何在 BST（当前日期）和 GMT 中转换 2 个日期，以便可以在方法之前和之后比较日期？

> ID：10044807
> 
> 赞同：2
> 
> 时间：2012-04-06T14:21:07.097
> 
> 标签：java, date, timezone, gregorian-calendar

您如何转换 BST（当前日期）中的两个日期和 GMT 中的另一个日期，以便可以使用日历日期 before() 和 after() 方法进行比较？我不知道 BST 是否指的是英国夏令时。我正在使用英语设置的笔记本电脑上运行。我不知道如何最好地进行比较以查看一个是否大于另一个或等于。我认为时区是我成功使用日历日期 after() 和 before() 方法的问题。我正在根据 2 个日历检查相等性。

我想比较日期并且一直在使用公历。我有 3 个公历日期，从第一个日期减去 78 个，从第二个日期减去 48 个，从 HOURS_OF_DAY 减去第三个日期的 24 个。这些日期为格林威治标准时间。然后我得到我当前的日期，这是在 BST。我希望确定我当前的日期，即预订日期在 3 个日期内，即 78 小时、48 小时和 24 小时之内。我希望用 Java.Util.Date 做到这一点

感激地收到任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:30:15.570

关于什么：

```
Calendar calBst = new GregorianCalander();
calBst.setDate(date1);
calBst.setTimezone(TimeZone.getTimeZone("BST");

Calendar calGmt = new GregorianCalander();
calGmt.setDate(date2);
calGmt.setTimezone(TimeZone.getTimeZone("GMT");
calBst.before(calGmt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:32:02.110

我有同样的问题，找到答案并不明显。我们现在在生产中使用这个解决方案，它工作正常。它基于[jodatime](http://joda-time.sourceforge.net/)库

```
public static Date convertDateTimeZone(Date date, TimeZone currentTimeZone, TimeZone newTimeZone) {
    return convertJodaTimezone(new LocalDateTime(date), DateTimeZone.forTimeZone(currentTimeZone), DateTimeZone.forTimeZone(newTimeZone));
}

public static Date convertDateTimeZone(Date date, TimeZone newTimeZone) {
    return convertDateTimeZone(date, null, newTimeZone);
}

public static Date convertJodaTimezone(LocalDateTime date, String srcTz, String destTz) {
    return convertJodaTimezone(date, DateTimeZone.forID(srcTz), DateTimeZone.forID(destTz));
}

public static Date convertJodaTimezone(LocalDateTime date, DateTimeZone srcTz, DateTimeZone destTz) {
    DateTime srcDateTime = date.toDateTime(srcTz);
    DateTime dstDateTime = srcDateTime.withZone(destTz);
    return dstDateTime.toLocalDateTime().toDateTime().toDate();
} 
```

您所要做的就是使用第一种方法将您的日期转换为特定的公共时区并进行比较。

要获取时区实例，您只需：

```
TimeZone.getTimeZone("BST"); 
```

# php - 如何在多个锚标签中单击锚标签时打开一个弹出窗口并显示与之相关的数据库信息？

> ID：10044808
> 
> 赞同：0
> 
> 时间：2012-04-06T14:21:08.187
> 
> 标签：php, javascript

如何在多个锚标签中单击锚标签时打开一个弹出窗口并显示与之相关的数据库信息？我必须获取用户点击的那个锚标签的当前 id 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:31:36.230

是的，你需要先尝试一下！当您遇到特定的编程问题而不是“我该怎么做，我还没有尝试过任何事情”时，堆栈溢出效果很好

如果您有很多用户可以点击的锚点，您可以为每个锚点进行 ajax 调用以获取相关信息。

在javascript伪代码中类似于

```
function getInfoForAnchor(anchorId) {
   response = makeAjaxCallForAnchorId(ancorId);
   if response is successfull open a tab
   alert(response.text)
} 
```

许多用户不喜欢被弹出。也许您可以重新考虑您的用户体验？[一个新窗口可能是更好的方法，您只需加载一个像http://yoursite.com/?anchor_id=3](http://yoursite.com/?anchor_id=3)这样的 url 并显示相应的信息。或者甚至比这更好（imo）是单击在当前页面上填充您希望用户看到的信息的位置！这将需要像上面那样的 ajax 调用。除非您在页面加载时加载所有信息。祝你好运！

# ios - NSFetchedResultsControllerDelegate 方法是用 iCloud 触发的吗

> ID：10044818
> 
> 赞同：0
> 
> 时间：2012-04-06T14:21:52.663
> 
> 标签：ios, core-data, nsfetchedresultscontroller, icloud

我正在使用 iCloud 和核心数据。我有一个使用获取结果控制器的表视图。如果我手动删除一行，`NSFetchedResultsControllerDelegate`则会调用我的方法（例如`–controllerDidChangeContent:`）。如果更改来自 iCloud，则不会调用委托方法。

这是正常行为吗？我的代码中的其他内容会阻止调用这些方法吗？是否应该由 iCloud 驱动的更改导致委托方法触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:31:29.467

两者都`iCloud`处理`NSFetchedResultsController`正在`NSManagedObjectContext`使用的东西。

需要检查的几件事：

1.  您的 iCloud 内容是否已合并到托管对象上下文中？
2.  您是否为 iCloud 使用了与获取的结果控制器不同的托管对象上下文？

# c - RSA_sign 线程安全吗

> ID：10044821
> 
> 赞同：0
> 
> 时间：2012-04-06T14:22:17.120
> 
> 标签：c, rsa

我在 C milter 程序中使用 RSA_sign。这个函数线程安全吗，因为我相信 libmilter 使用线程运行，有时我看到 RSA_sign 给出了不正确的签名 n 相同的密钥和文本在其他时间工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:43:19.230

假设您指的是 OpenSSL，那么，是的，RSA_sign 是线程安全的。正如@birryree 在评论中指出的那样，您应该设置锁定回调函数。然而，还有一点值得指出（尽管它可能是完全不言而喻的）。即使函数本身是线程安全的，您也必须以线程安全的方式使用它。

具体来说，您必须确保您的应用程序发送给它的参数没有被可能正在更改它们的其他线程使用。

*   两个输入参数`m`和`rsa`由函数使用，预计在操作期间保持不变。例如，如果另一个线程`m`在调用期间正在修改输入缓冲区，则结果将是不可预测的。
*   输出缓冲区`sigbuf`由 RSA_sign 写入。如果它同时被另一个函数使用，那么结果也将是不可预测的。

# javascript - chrome浏览器打印选项不显示

> ID：10044823
> 
> 赞同：0
> 
> 时间：2012-04-06T14:22:28.543
> 
> 标签：javascript, browser

这段代码在 Firefox 和 ie 中工作，但在 chrome 中没有。请建议。

ï»¿函数打印数据（）{

```
var printHtml = "";
printHtml = printHtml + "<html>";
printHtml = printHtml + "<head>";
printHtml = printHtml + "<title>www.MyDomain.com</title>";
printHtml = printHtml + "<style>body{background:#fff;} .allow_border td{border:1px       solid #000; padding:2px 5px;} div{text-align:left;}</style>";
printHtml = printHtml + "</head>";
printHtml = printHtml + "<body>";
printHtml = printHtml + "<div>";
printHtml = printHtml + document.getElementById("divPrintArea").innerHTML;
printHtml = printHtml + "</div>";
printHtml = printHtml + "</body>";
win = window.open('XXXXXXX', 'XXXXXXX', 'width=1,height=1,left=250,top=250');
win.document.write(printHtml);
win.document.close();
win.focus();
win.print(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:06:39.933

在 chrome 和 opera 中调用 print 方法之前，您可能必须添加一个超时。

这是一个可能的解决方案： http: [//danielbergsten.wordpress.com/2011/01/11/javascript-window-print-does-not-work-in-operachrome-browser/](http://danielbergsten.wordpress.com/2011/01/11/javascript-window-print-does-not-work-in-operachrome-browser/)

# oracle - sql查询执行速度慢

> ID：10044824
> 
> 赞同：0
> 
> 时间：2012-04-06T14:22:34.063
> 
> 标签：oracle, oracle11g

我有以下相当简单的查询

```
select count(*) from tbl t1, tbl t2 
```

由于某种原因，执行此命令需要数十秒的时间。我想知道为什么会这样？似乎它构建了该表的笛卡尔积（表大约有 270k 行），但是在没有构建积的情况下，行数是显而易见的。

一些澄清会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:15:50.963

我会假设优化器不是为优化笛卡尔产品而构建的（尤其是不是你提到的大表）。在您的情况下，它可能会构建完整的结果集并对其进行计数。

与其抗争，不如数表一次

```
select count(*) from tbl 
```

并自己构建产品。

（我假设你有一个比你发布的相当无意义的自我加入更有用的案例:-)，请添加更多关于你想要实现的信息。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T12:11:36.000

如果只是想知道笛卡尔积为什么不自己计算呢？

```
SELECT Power(COUNT(*), 2) AS product 
FROM   tbl t1; 
```

# geometry - 在“蜘蛛网”中获取矩形？

> ID：10044826
> 
> 赞同：2
> 
> 时间：2012-04-06T14:22:39.853
> 
> 标签：geometry

想象一下围绕中心的给定半径增加的圆，与给定旋转的线交叉 - 我如何能够在其中一个网格位置内绘制一个近似 4-borders 矩形*，如图所示，基于图像中的点位置？

![在此处输入图像描述](../Images/8de81a64fef47873db6ab91116e854ca.png)

详细信息：我正在将 Lua 用于移动应用程序。左上角坐标为0, 0，所以中心为maxX/2,maxY/2；我正在使用变量 rotationStep 和 radiusStep 来创建网络。

* 6 点或更多点的多边形可能看起来更好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:07:01.280

首先计算形状的四个角。

```
x1 = cx + radialScale*radiusStep*cos(rotationScale * rotationStep)
y1 = cy + radialScale*radiusStep*sin(rotationScale * rotationStep)
x2 = cx + radialScale*(radiusStep+1)*cos(rotationScale * rotationStep)
y2 = cy + radialScale*(radiusStep+1)*sin(rotationScale * rotationStep)

x3 = cx + radialScale*radiusStep*cos(rotationScale*(rotationStep+1))
y3 = cy + radialScale*radiusStep*sin(rotationScale*(rotationStep+1))
x4 = cx + radialScale*(radiusStep+1)*cos(rotationScale*(rotationStep+1))
y4 = cy + radialScale*(radiusStep+1)*sin(rotationScale*(rotationStep+1)) 
```

其中 (cx, cy) 是中心点 - 在您的情况下 (maxX/2, maxY/2)。

常量rotationScale 和radialScale 只是将步长放大到全范围。例如，如果您有 n 个扇区，则 rotationScale 为 2PI/n。如果您有 m 个“带”并且网络中最外圈的半径为 R，则radialScale 为 R/m。希望这是有道理的。

这里的想法就像在常规网格中一样。

*   一个起点
*   向“右侧”一点（常规网格中的 x+1，此处为 rotationStep+1）
*   一点“down2（常规网格中的y+1，此处radiusStep+1）
*   然后向右*和*向下一点。

现在只需在点之间画四条线，瞧！

大多数图形包也有一种`DrawArc`方法。这可以用来绘制两个圆弧，性能非常好，同时看起来更漂亮！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:32:49.777

找出圆心与指定点之间的角度。然后找到与它有闭合角度的 2 条线，它将位于这 2 条线之间。

计算你的点到圆心的距离。

沿着你的线（D）绘制相同的距离，除以圆圈之间的距离。这样，您将获得所有 4 分。

# mysql - 添加第 5 个表加入

> ID：10044829
> 
> 赞同：1
> 
> 时间：2012-04-06T14:22:50.010
> 
> 标签：mysql, database

也许现在还为时过早，但我无法弄清楚为什么我无法将第五张表的查询与我当前的查询语句连接起来。

这是我当前的查询

```
SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, count(xi.optionid) as cnt
FROM xcart_products xp
INNER JOIN xcart_classes xc ON xp.productid = xc.productid AND xc.class = 'Color'
INNER JOIN xcart_class_options xco ON xc.classid = xco.classid
LEFT JOIN xcart_images_D xi ON xi.optionid = xco.optionid
GROUP BY xp.product, xco.optionid
ORDER by xp.product DESC 
```

我正在尝试添加以下查询，该查询的表设置与 xcart_images_D 非常相似

```
JOIN xcart_images_T xiT ON xi.id = xiT.id 
```

截至目前，在我添加加入后，我的结果从大约 2,000 变为 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:43:20.993

通过做这个：

```
JOIN xcart_images_T xiT ON xi.id = xiT.id 
```

您正在使 xcart_images_t 的 JOIN 取决于您的 (xi) xcart_images_D 表。因此，如果您的 xcart_images_D 表不匹配，那么您的 xcart_images_T 也不会返回匹配项。

同样通过仅指定 JOIN，您隐含地指示了 INNER JOIN，这也可能是您的问题的一部分。如果 xcart_images_T 中的匹配不是必需的，那么它应该是 LEFT JOIN。

xcart_images_T 似乎与 xcart_images_D 类似，因此请尝试 LEFT JOIN 并使用 xco.optionid 作为 JOIN 键：

```
LEFT JOIN xcart_images_T xiT ON xiT.id = xco.optionid 
```

此外，如果您希望看到来自 xcart_images_T 或 xcart_images_D 的任何字段，则需要将它们添加到您的 SELECT 中。看看是否有帮助。

# ruby-on-rails-3 - Rails 3：route.rb：我如何为 /chart/demo/home 编写匹配项

> ID：10044839
> 
> 赞同：1
> 
> 时间：2012-04-06T14:23:55.660
> 
> 标签：ruby-on-rails-3, routes

在我的 rails 应用程序中，我有一个名为 demo 的控制器，它存储在图表目录中，我需要在演示控制器中访问一个名为“home”的操作，我应该如何在 route.rb 中编写 match？

match ':controller(/:action(/:id))(.:format)' 这是我唯一的行

site.com/chart/demo/home 应该打电话

app/controllers/chart/demo_controller.rb #action home

在此先感谢，卡南

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:41:56.540

如果您有许多将在“图表目录”后面运行的控制器，您可以为图表创建一个命名空间。

```
namespace :chart do
  match 'demo/home', :to => 'demo#home'
end 
```

然后你必须确保你的演示控制器通过改变来指示命名空间：

```
class DemoController < ApplicationController 
```

到

```
class Chart::DemoController < ApplicationController 
```

并确保您的演示控制器位于图表目录中。然后，您可以随时在控制台中使用 rake:routes 检查您的路线。

# c# - 如何用 $ 格式化 DataGrid 中的钱？

> ID：10044840
> 
> 赞同：5
> 
> 时间：2012-04-06T14:24:01.387
> 
> 标签：c#, .net

我想在 my 中格式化货币值，`DataGrid`以便它们以美元符号 ( `$`) 开头。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:26:25.707

如果您正在谈论以货币格式显示数据，或者甚至只是在数据的开头添加“$”，以便

1.49

显示为

1.49 美元

那么你可以通过几种方式做到这一点。在 DataGrid 控件 (web) 上，您可以设置[DataFormatString](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundcolumn.dataformatstring.aspx)属性。

一种选择是将其设置为“c”以表示 BoundColumn 上的货币。如果您的 Web 服务器的[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)设置为 en-US，这将起作用

```
<asp:BoundColumn DataField="CurrencyValue" 
                 HeaderText="Price"
                 DataFormatString="{0:c}"> 
```

另一种选择是使用 CustomFormatString，它可以让您更精确地控制它的显示方式。假设您总是希望它恰好是小数点右侧的三位数字和左侧的两位数，您可以使用

{0:$00.000}

可以在此处找到有关数字的自定义数据格式字符串的更多信息：http: [//msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

由于您在 WinForms 中工作，（抱歉，我刚刚重新阅读了评论）您将使用相同的技术，但将其应用于列的 DefaultCellStyle，如下所示：http: [//msdn.microsoft.com/en-us/库/f9x2790s.aspx](http://msdn.microsoft.com/en-us/library/f9x2790s.aspx)

```
dataGridView1.Columns["UnitPrice"].DefaultCellStyle.Format = "c"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-01T02:53:44.610

此外，如果您正在寻找具有[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.90%29.aspx)的特定于文化的单元格格式，您可以使用[DataGridCellStyle](http://msdn.microsoft.com/en-us/library/System.Windows.Forms.DataGridViewCellStyle%28v=vs.110%29.aspx)的 FormatProvider 属性。在 WinForms 中：

```
dataGridView1.Columns["MoneyValue"].DefaultCellStyle.Format = "c";
dataGridView1.Columns["MoneyValue"].DefaultCellStyle.FormatProvider = 
System.Globalization.CultureInfo.CreateSpecificCulture("es-CO"); 
```

# c# - 从隔离存储中删除后如何更新列表框

> ID：10044843
> 
> 赞同：0
> 
> 时间：2012-04-06T14:24:07.003
> 
> 标签：c#, windows-phone-7

嗨，我正在尝试更新在删除文件夹后绑定的列表框，但它似乎没有更新，除非我离开页面并返回任何人都可以帮助我在下面的类项目中获得我的代码，感谢您的帮助。

```
public partial class Page3 : PhoneApplicationPage
{
    string[] fileNames;
    string[] folderNames;
    private string selectedProject = "";

    private List<Project> projectList = new List<Project>();
    public Page3()
    {
        InitializeComponent();
        showProjects();

    }

    public void showProjects()
    {

        projectList.Clear();
        IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();
        folderNames = isf.GetDirectoryNames("/*.*");

        foreach (var name in folderNames)
        {

            fileNames = isf.GetFileNames(name + "/*.*");
            int frameCount = 0;
            foreach (var nameCount in fileNames)
            {
                frameCount++;

            }

            projectList.Add(new Project(name,frameCount));

        }

        listBoxProjects.ItemsSource = projectList;

    }

    private void listBoxProjects_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

    }

    public void DeleteDirectory(string directoryName)
    {
        try
        {
            IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
            if (!string.IsNullOrEmpty(directoryName) && myIsolatedStorage.DirectoryExists(directoryName))
            {
                myIsolatedStorage.DeleteDirectory(directoryName);
            }
        }
        catch (Exception ex)
        {
            // handle the exception
        }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        IsolatedStorageFile myIso;
        string folder = textBoxDelete.Text;
        using (myIso = IsolatedStorageFile.GetUserStoreForApplication())
        {

            String[] fileNames = myIso.GetFileNames(folder + "/*.*");

            foreach (var name in fileNames)
            {
                MessageBox.Show(name);
                myIso.DeleteFile(folder + "/" + name);

            }

            myIso.DeleteDirectory(folder);
            showProjects();
        }

    }

}

public class Project
{
    public string ProjectName { get; set; }
    public int FileCount { get; set; }

    public Project(string pName, int fileCount)
    {
        this.ProjectName = pName;
        this.FileCount = fileCount;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:41:18.600

您可以尝试先将 listbox.Itemsource 设置为 null，然后使用新集合将其重置。

但是我建议您将 List<> 项目更改为 ObservableCollection<>，然后如果您更改集合，更改会自动更新到您的列表框中，并尝试使用更简单、更清洁的绑定解决方案。

# database - 查看/修改 SQL Server CE 2.0？

> ID：10044847
> 
> 赞同：1
> 
> 时间：2012-04-06T14:24:17.417
> 
> 标签：database, visual-studio, sql-server-ce

我有一个我认为是 SSCE 数据库的文件，但我不确定。我说我不确定，因为我尝试了各种工具来打开文件，但都失败了。VS2010 SQL Server Compact Edition 4 报告`"Incompatible Data Version. If this was a compatible file, run repair. For other cases refer to documentation. [ db version = 0,Requested version = 0,File name = template.sdf ]"`我使用了错误的版本。VS2010 SQL Server Compact Edition 3.5 报告`"This is not a valid SQL Server Compact Database file or this file version is not supported by current SQL Server Compact Edition."`

这是文件的标题：

........SSCE 数据库 ..........KÿÕ.´'N*äq0''á..=ß.\F³bê\I@-.–,S¾Bš–õûcp~-” é>•@l‚“:aƒÍ.å‡{‚šÓüpT>I9‹ß.‰Ò...Ñ=¿]`_Ò#"”îb„ÀÜO,Ú.BRa´©¡ÑX‚æ.-..YèB .0r.9VP.!º™Ú..—»Ñùa.8ié.Ç.z).jÚˆž.û.!.ƒªí°.A¯7©šþÊ4‹~±ÍRaÜç.(.À.ðÁq/.,V ®Ï0.ý½'.m2(Š;Júl#º3¤¼Ùú(.dÃC.WHôÙj½™¡f.^û¯{ÆŸ¹.1—ê‚rO(qà.Ìø(Ò"¤~gž!¸ö..¦ …lØ....1.0

并以十六进制表示：

00 00 00 00 00 01 00 00 53 53 43 45 20 44 61 74 61 62 61 73 65 20 20 00 00 00 00 00 02 00 00 00 00 4B FF D5 AD B4 27 4E 39 E4 1 71 7 30 E DF 11 5C 46 B3 62 EA 5C 49 40 2D 04 96 82 53 BE 42 9A 96 F5 FB 63 70 98 96 94 E9 3E 95 40 6C 82 93 3A 61 83 CD 8D E5 87 7B 82 34 9A D3 FC 39 E 70 5 8B DF 0D 89 D2 85 D1 3D BF 5D 60 5F D2 23 22 94 EE 62 84 C0 DC 4F 2C DA 8D 42 52 61 B4 A9 A1 D1 58 82 E6 0A 2D 09 16 59 E8 42 04 30 502 0A 39 58 21 BA 99 DA 00 14 97 BB D1 F9 61 AD 38 69 E9 1C C7 0E 7A 29 8D 6A DA 88 9E 05 FB 05 21 1A 83 AA ED B0 03 41 AF 37 A9 9A FE CA 34 8B 98 B1 CD 52 61 DC E7 01 28 1D C0 0C F0 C1 71 2F 1F 2C 56 AE CF 30 08 FD BD 91 00 6D 32 28 8A 3B 4A FA 6C 23 BA 33 A4 BC D9 FA 28 81 64 C3 43 1C 57 48 A4 D9 6A BD 66 00 88 FB AF 7B C6 9F B9 10 31 97 EA 82 72 4F 28 71 E0 18 CC F8 28 D2 22 A4 7E 67 9E 21 B8 F6 81 1E A6 856C D8 01 00 00 00 31 2E 30

我很确定该文件没有密码保护或加密，因为我可以在十六进制编辑器中向下滚动并查看文本字段的所有内容。

有没有人有任何打开这个文件的建议，或者更好的是，用 .Net 程序处理它？

更新：我现在知道它是一个 SQL Server Compact 2.0 版数据库。（感谢@ErikEJ）现在我需要弄清楚如何从 VS2010 打开和更新它。我仍然对这方面的想法持开放态度。我尝试了一个连接字符串：`Provider=Microsoft.SQLServer.OLEDB.CE.2.0;Data Source=template.sdf`但我收到了错误：`The 'Microsoft.SQLServer.OLEDB.CE.2.0' provider is not registered on the local machine.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:59:53.610

[从此处http://sqlcetoolbox.codeplex.com/releases/view/69910](http://sqlcetoolbox.codeplex.com/releases/view/69910)独立下载 SQL Server Compact Toolbox，并使用“检测 SQL Server Compact 文件版本”功能测试版本。某些 Windows 应用程序使用的某些内部文件版本无法使用标准工具打开。

# diff - 错误：文件重命名后（使用 CVSNT）在 Tortoise CVS 中执行差异？

> ID：10044848
> 
> 赞同：2
> 
> 时间：2012-04-06T14:24:23.220
> 
> 标签：diff, cvs, tortoisecvs, cvsnt

我使用 Tortoise CVS 中的实验性功能来重命名我的 CVS 存储库中的文件。签出和提交对该文件工作正常，但是如果我在 Tortoise 中执行差异，我会收到一个错误：

```
cvs server: cannot find module `MyModule/NewFileName.DPR' - ignored 
```

这是 Tortoise CSV 在 diff 期间用于执行结帐的命令：

```
In C:\...\Temp\TCV22023.tmp: "C:\Program Files (x86)\CVSNT\cvs.exe" -q -f 
checkout -r 1.10 -d temp MyModule/MyNewFileName.DPR
CVSROOT=:sspi:user@cvs-server:2401/repo 
```

有趣的是浏览服务器上的存储库文件，所有控制文件（以“，v”结尾的引用OldFileName.DPR而不是NewFileName.DPR）。这是我对上述 diff 命令为何失败的想法。

任何有关如何使这项工作的意见将不胜感激！

**CVSNT 版本：** 2.5.04（构建 3236）
**TortoiseCVS 客户端：** 1.10.10（CVSNT 客户端 2.5.03）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:10:26.163

由于 CVS(NT) 使用的 RCS 格式，服务器上的文件保留了创建它的名称。例如，一个文件可以在一个分支上重命名，而不是在任何地方。

重命名功能中存在一些错误（请参阅[http://www.cvsnt.org/pipermail/cvsnt/2008-February/030202.html](http://www.cvsnt.org/pipermail/cvsnt/2008-February/030202.html)），此外请注意，重命名时必须提交*目录*，因为它是跟踪重命名的目录。

# django - Django 1.4 日期字段和 sqlite 问题

> ID：10044851
> 
> 赞同：1
> 
> 时间：2012-04-06T14:24:53.180
> 
> 标签：django, sqlite, django-admin

我有一个这样的模型：

```
class Some_Model(django.Model):
    name         = models.CharField(max_length=255)
    some_date    = models.DateField(default=datetime.now)

    def __unicode__(self):
        return self.name 
```

..我通过 django admin 管理。在那里，我可以从 js 小部件中选择一个日期。日期存储`yyyy-mm-dd`在 sqlite 表中，其中字段是`datetime`字段。再次选择值时， via `Some_Model.objects.all()[0]`，该字段返回`None`，因为时间信息丢失了，我猜。这是什么？它曾经在 django 1.3 中工作，但在迁移后，它现在失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:50:10.190

时区更改是 1.4 的重要组成部分。我不肯定你的问题与此有关，但我怀疑它是。几点建议：

1.  阅读有关[1.4 中时区更改的 django 文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)。

2.  尝试`USE_TZ = False`在您的设置文件中进行设置。这应该强制 django datetimes 表现得像 1.3 并且可能会解决您的问题。

3.  替换`default=datetime.now`为从`default=now`哪里`now`导入`django.utils.timezone`。提供的 django`now`将根据设置中的值自动包含或排除时区数据`USE_TZ`。

# c++ - 如何使用 QFileSystemWatcher 监视文件夹的更改

> ID：10044853
> 
> 赞同：18
> 
> 时间：2012-04-06T14:25:08.587
> 
> 标签：c++, qt

我是 QT 的新手，我想使用 QFileSystemWatcher 来监视文件夹。我只是不知道该怎么做。

我读了[http://qt-project.org/doc/qt-4.8/qfilesystemwatcher.html](http://qt-project.org/doc/qt-4.8/qfilesystemwatcher.html)但我什至不知道如何初始化它。

我还没有找到一个例子，所以现在，如果有人可以发布一个解释或一个简单的例子来监控一个文件夹，仅此而已。

哦，如果重要的话，这应该在控制台中运行。

感谢您的回答和问候。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-07T07:38:50.903

请看一下这个 .h 和 .cpp ，它显示了这个例子......干杯！

```
#ifndef MYCLASS_H
#define MYCLASS_H

#include <QWidget>
#include <QMessageBox>

class MyClass : public QWidget
{
    Q_OBJECT

public:
    MyClass(QWidget* parent=0)
        :QWidget(parent){}

    ~MyClass(){}

public slots:
    void showModified(const QString& str)
    {
        Q_UNUSED(str)
        QMessageBox::information(this,"Directory Modified", "Your Directory is modified");
    }
};

#endif // MYCLASS_H

#include <QApplication>
#include <QFileSystemWatcher>
#include <QDebug>

#include "MyClass.h"

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    QFileSystemWatcher watcher;
    watcher.addPath("C:/QtTest");

    QStringList directoryList = watcher.directories();
    Q_FOREACH(QString directory, directoryList)
            qDebug() << "Directory name" << directory <<"\n";

    MyClass* mc = new MyClass;

    QObject::connect(&watcher, SIGNAL(directoryChanged(QString)), mc, SLOT(showModified(QString)));

    return app.exec();
} 
```

当您在“C:/QtTest”路径中修改、创建或删除文件或文件夹时，您将看到一个消息框。

# javascript - 如果 IE8 或更低版本，则强制浏览器更新

> ID：10044855
> 
> 赞同：6
> 
> 时间：2012-04-06T14:25:27.107
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

我想知道当浏览器是 Internet Explorer IE8 或更早版本时，是否可以显示警告或打开一个弹出窗口，表示将您的 IE 更新到最新版本或使用 Firefox / Chrome / Safari 代替......

我想我应该在标签内使用下面的代码......

```
<!--[if lt IE 9]>
...i should use code here...
<![endif]--> 
```

使用 jQuery 欺骗浏览器并加载 jQuery lib 是否明智？还是只使用常规 javascript 以避免非常旧的浏览器出现其他问题更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:32:46.587

[你可以使用这样](http://code.google.com/p/ie6-upgrade-warning/)的东西

> ie6-upgrade-warning 是一个小脚本 (7.9kb)，它礼貌地显示警告消息，通知用户将浏览器升级到更新版本（提供最新的 IE、Firefox、Opera、Safari、Chrome 的链接）。
> 
> 该网页在透明背景下仍然可见，但无法访问它。这个想法是迫使用户从 IE6 升级，并避免网站因网站在 IE6 中无法正确呈现而受到不良声誉。
> 
> 该脚本完全可以翻译成任何语言，非常容易设置（网页中的一行代码和一个参数配置）。

尽管创建是为了与 IE6 用户一起使用，但使用正确的参数，您可以将其用于您的方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T18:07:48.840

你有两个选择：

1.  解析`User-Agent String`

    ```
    // Returns the version of Internet Explorer or a -1
    // (indicating the use of another browser).
    function getInternetExplorerVersion() {
        var rv = -1; // Return value assumes failure.

        if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");

            if (re.exec(ua) != null) {
                rv = parseFloat( RegExp.$1 );
            }
        }

        return rv;
    }

    function checkVersion() {
        var msg = "You're not using Internet Explorer.";
        var ver = getInternetExplorerVersion();

        if ( ver > -1 ) {
            if ( ver >= 9.0 ) {
                msg = "You're using a recent copy of Internet Explorer."
            }
            else {
                msg = "You should upgrade your copy of Internet Explorer.";
            }
        }
        alert(msg);
    } 
    ```

2.  使用条件注释：

    ```
    <!--[if gte IE 9]>
    <p>You're using a recent version of Internet Explorer.</p>
    <![endif]-->

    <!--[if lt IE 8]>
    <p>Hm. You should upgrade your copy of Internet Explorer.</p>
    <![endif]-->

    <![if !IE]>
    <p>You're not using Internet Explorer.</p>
    <![endif]> 
    ```

参考：[更有效地检测 Windows Internet Explorer](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-06T14:29:09.260

```
<script> var ISOLDIE = false; </script>
<!--[if lt IE 9]>
     <script> var ISOLDIE = true; </script>
<![endif]--> 
```

然后稍后，您想在代码中支持旧版本 IE 的地方划定界限：

```
<script>

     if(ISOLDIE) {
          alert("Your browser currently does not support this feature. Please upgrade.");
          window.location = 'http://google.com/chrome';
     }

</script> 
```

完全删除 IE8 支持通常不是一个好主意，这就是为什么我认为上述解决方案是一个很好的折衷方案，因为您可以将它添加到您的网站/Web 应用程序的组件中，而这些组件根本无法支持 IE8，但是您可以（可能）仍然在您网站的其他区域支持 IE8。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T14:32:50.413

有一个荷兰网站强制 IE6 和更低版本的用户升级他们的浏览器，对“If IE”代码进行一些调整，你可以阻止任何你喜欢的版本。

[http://wijstoppenook.nl/nl/](http://wijstoppenook.nl/nl/)

向下滚动到第 4 步并单击下载或“voorbeeld”进行演示，第一个是顶部横幅，第二个完全阻止页面。

唯一的缺点，它都是荷兰语，所以你必须自己编造信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-11T10:21:22.273

IE 10 不再支持条件注释。 WTF！[关联](http://msdn.microsoft.com/en-us/library/ie/hh801214(v=vs.85).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-31T13:44:23.270

在您的网站上将您的代码添加到 index.html 或 index.php

它的工作也是 joomla 和 wordpress。

```
<!--[if IE 5]>
<script language="Javascript">
<!--
alert ("It looks like you aren't using Internet Explorer 7\. To see our site correctly, please update.")
//-->
</script>
<![endif]-->
<!--[if IE 5.0]>
!--
alert ("It looks like you aren't using Internet Explorer 7\. To see our site correctly, please update.")
//-->
</script>
<![endif]-->
<!--[if IE 5.5]>
!--
alert ("It looks like you aren't using Internet Explorer 7\. To see our site correctly, please update.")
//-->
</script>
<![endif]-->
<!--[if IE 6]>
!--
alert ("It looks like you aren't using Internet Explorer 7\. To see our site correctly, please update.")
//-->
</script>
<![endif]-->

<!--[if IE 7]>
!--
alert ("It looks like you aren't using Internet Explorer 7\. To see our site correctly, please update.")
//-->
</script>
<![endif]-->

<!--[if IE 8]>
!--
alert ("It looks like you aren't using Internet Explorer 8\. To see our site correctly, please update.")
//-->
</script>
<![endif]--> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-29T03:30:42.180

有很多方法，但这是迄今为止最优雅的：http: [//outdatedbrowser.com/en/how](http://outdatedbrowser.com/en/how)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-11T11:56:42.337

这就是我所拥有的，它在引导下载中：

```
<!--[if lt IE 8]>
  <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]--> 
```

所以基本上你可以拥有`lt`甚`lte`至小于或等于。

# api - 来自 API 的页面洞察数据：我在哪里获取页面 ID？

> ID：10044856
> 
> 赞同：0
> 
> 时间：2012-04-06T14:25:34.423
> 
> 标签：api, facebook-graph-api, facebook-page, facebook-insights

我真的很困惑，所以我希望你们能帮助我。我知道如何使用应用程序访问 API，因为我拥有所有这些信息，例如应用程序密钥和 API 密钥。但是我应该如何处理标准页面？喜欢[https://www.facebook.com/NASAKennedy](https://www.facebook.com/NASAKennedy)

我们创建了许多不是应用程序的页面。我找不到任何有关如何检索洞察数据的 API 信息。我想获得每天的点赞数和帖子数。

简而言之，如果我在这里创建一个页面：[https](https://www.facebook.com/pages/create.php) ://www.facebook.com/pages/create.php我们可以从 API 访问其洞察信息吗？

谢谢，

斯蒂芬妮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:31:05.740

是的你可以。

参考网址：

[https://developers.facebook.com/docs/reference/fql/insights/](https://developers.facebook.com/docs/reference/fql/insights/)

[https://developers.facebook.com/docs/reference/api/insights/](https://developers.facebook.com/docs/reference/api/insights/)

[https://www.facebook.com/help/?page=217014154989455](https://www.facebook.com/help/?page=217014154989455)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T14:11:48.840

如果您只想知道您的 facebook 页面有哪个 page-ID，请执行以下操作：

*   只需打开图形资源管理器[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)
*   在“GET”之外的输入字段中添加用户名“NASAKennedy”并发送您的请求。

现在您将看到一个 JSON 对象，其中包含有关页面的基本信息。查看此文本并搜索“id:”。在那里，您将阅读页面 ID。

# python - django loaddata 会被管理页面中手动插入的数据覆盖吗？

> ID：10044857
> 
> 赞同：0
> 
> 时间：2012-04-06T14:25:39.977
> 
> 标签：python, django, loaddata

我是django的新手，请给我一些建议

我使用 loaddata 命令以 yaml 格式将数据加载到数据库中。好像没问题，当我dumpdata的时候，数据就可以dump了。

但是当我访问应该显示加载数据的网站时，我总是从管理页面获取我插入的数据。

从管理页面插入的数据似乎可以覆盖加载数据？我怎么能覆盖？

# ruby-on-rails - Rails单选按钮标记关联项目列表中的一项？

> ID：10044858
> 
> 赞同：0
> 
> 时间：2012-04-06T14:25:40.463
> 
> 标签：ruby-on-rails, radio-button

基本上，我和这个问题有同样的问题，不幸的[是，这个](https://stackoverflow.com/questions/6334231/rails-3-radiobutton-group-in-fields-for)问题从未得到令人满意的答案。

我有一个用户模型，每个用户在地址模型中可以有多个关联地址（一对多关系）。现在，我想要完成的是，从特定用户的关联地址中，我可以指定一个地址作为帐单地址。为此，我在地址数据库表中有一个名为 billing_address 的布尔列。我想在单选按钮的帮助下在用户表单中设置帐单地址，但是我遇到了一种情况，即我可以选择所有地址，如下所示：

```
<%= form_for @user do |f| %>
  <%= f.fields_for :addresses do |a| %>
    <%= a.radio_button :billing_address, 1 %><%= a.label :billing_address %>
  <% end %>
<% end %> 
```

或者我无法正确地将 billing_address 参数发送到控制器，如下所示：

```
<%= form_for @user do |f| %>
  <%= f.fields_for :addresses do |a| %>
    <%= radio_button_tag "user[addresses_attributes][billing_address]", 1 %>
  <% end %>
<% end %> 
```

感谢任何帮助帮助我获得正确的语法。或者，也许这根本不是我试图完成的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:04:53.000

将 all 的默认值设置`illing_address`为 false。现在在单选按钮字段中，为每个地址字段设置自己的 id 作为相应单选按钮的值。然后在控制器中找到与您从表单中获取的 id 对应的地址，然后将其更新`billing_address`为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T22:55:27.933

所以这就是我最终得到的结果：

```
<%= form_for @user do |f| %>
  <%= f.fields_for :addresses do |a| %>
    <%= a.hidden_field :billing_address, :value => 0 %>
    <%= radio_button_tag "billing_address", a.object.id, a.object.billing_address == true %>
  <% end %>
<% end %> 
```

在我的控制器中：

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    @address = @user.addresses.find(params[:billing_address])
    @address.update_attributes(:billing_address => 1)
    redirect_to users_path, notice: 'User was successfully updated.'
  else
    render action: "edit"
  end
end 
```

# python - 有任何 Python 解决方案可以让分布式进程以最解耦的方式与关系数据库交互吗？

> ID：10044862
> 
> 赞同：1
> 
> 时间：2012-04-06T14:25:59.390
> 
> 标签：python, database, distributed-computing

假设我在机器 1 上有 Python 进程 1，在机器 2 上有 Python 进程 2。这两个进程是相同的，并且处理负载均衡器发送的数据。

两个进程都需要与数据库交互——在我的例子中是 Postgres，所以每个进程都需要知道它应该与哪个数据库通信，它需要在每台机器上拥有正确的模型等等。它耦合得太紧了。

理想的情况是有一个单独的进程来处理数据库的东西，比如连接、跟上数据库模型的变化、对数据库的请求等。我的进程 1 和进程 2 应该做的只是说我有一些 JSON 数据需要在此表上保存或更新，或者我需要 json 格式的数据。

也许我问的是不可能的问题，但是当分布式进程以最解耦的方式与关系数据库交互时，是否有任何 Python 解决方案至少可以让生活变得更轻松一些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:38:34.877

您可以将[SQLAlchemy](http://docs.sqlalchemy.org/en/latest/intro.html)放在[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)接口后面。

[这是 Python REST（Web 服务）框架](https://stackoverflow.com/questions/713847/recommendations-of-python-rest-web-services-framework)的 Python 推荐中的一个简单的 RESTful 服务器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:46:56.140

如果是你感兴趣的数据库连接信息，我最近为此写了一个服务。每个进程都在配置中设置了令牌，并使用这些令牌来查询服务以获取数据库连接信息。数据层使用该信息来创建连接，不存储 DSN。在服务器端，您只需维护一个 token->DSN 映射字典。

您可以使用 bpgergo 的建议进行连接池，但您仍应包括身份验证或识别方法。这样，如果存在网络入侵，恶意客户端*可能*无法模拟其中一个客户端。

服务实现分为几个部分：

*   支持表单调用的 RESTful 服务`http://192.168.1.100/getConnection?token=mytokenstring`
*   存储映射的键值存储系统，例如`{'mytokenstring': {'dbname': 'db', 'ip': '192.168.1.101', 'user': 'dbuser', 'password': 'password', ..}`
    *   该系统不应该在前端网络上，但是如果您的 Web 层受到威胁，这种方法不会为您购买任何数据库保护。
*   一个 db 对象，在实例化时，使用适当的令牌检索 dsn 并创建一个新的 db 连接。
    *   如果可以，您应该将此连接对象重新用于页面响应的其余部分。服务的响应时间会很快，但是数据库连接需要更多的开销。

实施后，在切换令牌后面的 dsn 信息时需要注意处理模式不兼容问题。您可以通过将令牌固定到用户会话等来解决此问题。

# google-analytics - Google 分析显示的访问次数与 Blogger 统计数据不同

> ID：10044864
> 
> 赞同：-1
> 
> 时间：2012-04-06T14:26:24.873
> 
> 标签：google-analytics, blogger

我已经在我的博主博客中安装了 Google Analytics 跟踪代码。博主自己的统计数据显示一个计数，而谷歌分析跟踪显示不同的计数。

Blogger 统计数据显示的访问次数始终高于 Google 分析跟踪报告。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:39:14.940

没有两个统计数据包会给你完全相同的数字，原因如下：

1.  他们可能会以不同的方式定义“访问”
2.  他们可能使用不同的跟踪方法
3.  一个或另一个可能正在使用采样数据

并且用户可能在其中一个有机会记录访问之前点击离开。

所以，这是苹果和橘子。选择一个并寻找随时间变化的趋势，而不是确切的数字。它们应该朝着相同的方向发展。

由于问题中未提及实际或百分比差异，因此只能猜测这是否是可忽略的差异或可接受的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T01:56:09.150

一种可能性可能是您已将博客统计信息设置为不计算您自己的访问，而分析可能会计算它们，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T19:28:32.073

您在页面中插入以让 GA 跟踪流量的代码是 javascript 代码。我认为 GA 的点击次数较少，因为有些浏览器会阻止 javascript 代码。这取决于每个系统的配置，因此可以解释差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T12:14:42.717

我也有这个问题。不仅数量不同，而且位置也不同。Blogger 似乎也总是乐观得多！这是一篇很好地解释它的文章...... [http://morefromyourblog.com/why-do-google-analytics-stats-differ-from-blogger-stats/](http://morefromyourblog.com/why-do-google-analytics-stats-differ-from-blogger-stats/)

# asp.net - 正则表达式查找所有以 @ 开头但忽略电子邮件地址的单词

> ID：10044865
> 
> 赞同：3
> 
> 时间：2012-04-06T14:26:34.577
> 
> 标签：asp.net, regex

我创建了这个正则表达式来匹配字符串中所有以“@”开头的单词，@ 标记之前也可能有一些东西。它工作得很好，但它也可以捕获电子邮件地址，我想解决这个问题。

```
(?<=@)\w+\b 
```

示例字符串为：

> 你好@bob，你好吗？@mark、@emma 和 @chief 和我在一起。给我发电子邮件 test@email.com！

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:34:02.333

您可以使用下一个表达式：

```
\B@\w+ 
```

它从[非单词边界](http://www.regular-expressions.info/wordboundaries.html)( `\B`) 开始。您也可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)来重写它，如下所示：

```
(?!\b)@\w+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:32:03.143

测试@前面的空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:17:43.190

我的建议是这样的。

> `[\s]?\B@\w+`

我已经在 RAD Software 的 Regex Designer 中对其进行了测试，它匹配每个以 @ 开头的单词。前面有或没有空格。

希望这有帮助；）

# c - UNIX TCP/IP：读取：未连接传输端点 读取：未连接传输端点

> ID：10044872
> 
> 赞同：3
> 
> 时间：2012-04-06T14:26:51.770
> 
> 标签：c, linux, sockets, tcp

我正在尝试使用以下程序来显示从 port 接收到的消息`8888`。我编译了以下代码，没有任何错误和警告。

运行后，我用浏览器打开`127.0.0.1:8888`

然后，控制台显示：

```
read: Transport endpoint is not connected
read: Transport endpoint is not connected 
```

我调试它，但我找不到原因。

### 平台

Linux 内核 3.x Ubuntu 64 位

### 代码

```
#include <stdio.h>
#include <netdb.h>
#include <string.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>
#include <netinet/in.h>
//#include <errno.h>

int main(int argc, char *argv[])
{
    int sock;
    char buf[BUFSIZ+1];

    buf[BUFSIZ] = '\0';
    uint16_t port = (uint16_t)atoi("8888");
    struct sockaddr_in ser;
    memset(&ser, 0, sizeof(ser));
    ser.sin_port = htons(port);
    ser.sin_addr.s_addr = htonl(INADDR_ANY);
    ser.sin_family = AF_INET;

    sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if(sock < 0)
    {
        perror("socket");
        return -7;
    }

    /*Bind*/
    if (bind(sock, (struct sockaddr *)&ser, sizeof(ser)) < 0)
        return -2;

    /*listen*/
    if (listen(sock, 5) < 0)
        return -3;

    /*Accpet*/
    struct sockaddr_in cliAddr;
    socklen_t cliLen = sizeof(cliAddr);
    if (accept(sock, (struct sockaddr*)&cliAddr, &cliLen) < 0)
    {
        perror("accept");
        exit(1);
    }
    int read_len = 0;
    int i = 0;

    /*read and print*/
    while(1)
    {
        read_len = read(sock, buf, BUFSIZ);
        if(read_len < 0)
        {
            perror("read");
            break;
        }
        else
        {
            /*print buf*/
            while(i++ < read_len)
                putchar(buf[i-1]);
            putchar('\n');
        }
        if(read_len != BUFSIZ)
            break;
    }
    return 0;
} 
```

如果您在我的代码中发现任何不良习惯，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T14:43:54.683

您正在尝试读取错误的套接字。 `accept()`返回一个新的套接字，它是您应该从中读取数据和写入数据的新套接字。

你的代码应该做更多这样的事情：

```
int readSocket = accept(sock ...);
if (readSocket == -1)
{
    // error
}
else
{
    // set up stuff and while loop
    read_len = read(readSocket....); // << Note which socket is being read

    // other stuff
} 
```

# iphone - 在曲线中，如何计算给定 X 的点的 Y 位置？

> ID：10044876
> 
> 赞同：0
> 
> 时间：2012-04-06T14:27:06.473
> 
> 标签：iphone, math, trigonometry, bezier, quadratic

我正在 iPhone 应用程序中创建一个界面控件，其中视图位于弧形中，对应于 X 触摸位置。我需要编写一个函数，给定一个 X 值，返回对应于下图中红线的 Y 值： ![在此处输入图像描述](../Images/99ab31bd6f475636e2f9b5645fe90180.png)

我将定义点 A、B 和半径 r 来控制曲线的量。A 点始终位于 12 点钟方向（Y 值大于 B 点）。我的数学（尤其是圆圈）有点生疏……我需要什么公式来编写这个函数？伴随任何公式的示例会有所帮助。谢谢！

编辑：函数应该返回 ABS(Y)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:45:42.713

假设圆的中心是（0,0）。（写一个翻译函数到iphone屏幕坐标应该很简单）

圆的公式是 x^2 + y^2 = r^2

```
if( x < -(B.x) ) { return minY }//  B.x is the x coord of b.
if( x > B.x ) { return minY }
else {
   return sqrt( r^2 - x^2)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:45:38.840

您可以使用勾股定理找到 Y 值。X ² + Y ² = r ²。

重新排列，我们得到 Y ² = r ² - X ²。取两边的平方根，我们得到 Y = sqrt(r ² - x ² )。因为我们知道我们关心的 Y 值是正的，所以我们不需要注意我们在取平方根时通常会有的 +/-。

这一切都假设圆的中心在（0,0）。如果不是，则需要应用偏移量。

从那里开始，这只是一个限制值的问题——即，如果你得到的 Y 值小于你的最小 Y 值，那么你将它设置为最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:54:54.100

圆的方程是 (xa)^2 + (yb)^2 = r^2，其中 (a,b) 是圆心的坐标，r 是半径。假设中心位于 (0,0) 且半径为 1，则方程简化为 x^2 + y^2 = 1。要求解 y，方程变为

```
y^2 = 1 - x^2 
```

或者

```
y = ± SQRT(1-x^2) for {-1 <= x <= 1} 
```

因此，如果您的 x 值为 0.5，请将其插入，然后得到

```
y = ± SQRT(1 - 0.5^2)
y = ± SQRT(1 - 0.25)
y = ± SQRT(0.75)
y = ± 0.866 
```

您只需要正值，因此您的坐标将为 (0.5, 0.866)。

# android - 如何刷新 Android 的 Home Launcher？

> ID：10044880
> 
> 赞同：1
> 
> 时间：2012-04-06T14:27:27.713
> 
> 标签：android, reflection, launcher

我一直在编写一个后台服务，它在公司设备上强制执行我客户的安全策略。首次安装服务时，我启动一个活动，以便可以输入初始设置数据。在此之后，我禁用该活动：

```
ComponentName componentToDisable = new ComponentName("com.acme.background","com.acme.background.FirstLaunch");
        getPackageManager().setComponentEnabledSetting(componentToDisable,
         PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
         PackageManager.DONT_KILL_APP);
FirstLaunch.this.finish(); 
```

此时，在 Home Launcher 刷新/重新启动之前，临时图标仍然可见。这在某些设备上可能会持续一段时间，我遇到的问题是用户感到困惑并通过图标卸载。我需要刷新主页启动器。这是我通过反射尝试过的一种方法，它为我提供了当前的主页启动器并访问其方法。

```
PackageManager PM = getPackageManager();
Intent home_intent = new Intent("android.intent.action.MAIN");
home_intent.addCategory("android.intent.category.HOME");
home_intent.addCategory("android.intent.category.DEFAULT");
ComponentName cn = home_intent.resolveActivity(PM);
Context foreignContext = createPackageContext("com.android.launcher", Context.CONTEXT_IGNORE_SECURITY | Context.CONTEXT_INCLUDE_CODE);
String clName = cn.getClassName();
Class<?> test = foreignContext.getClassLoader().loadClass(clName); 
```

我尝试过触发方法并将字段归零以获取刷新/重新启动，但它似乎不起作用。有没有人有刷新 appDrawer/Icons 的解决方案？

**编辑：**

我已经包含了在触发对话框后启动的代码。以下是我正在使用的：

```
PackageManager PM = getPackageManager();
Intent home_intent = new Intent("android.intent.action.MAIN");
home_intent.addCategory("android.intent.category.HOME");
home_intent.addCategory("android.intent.category.DEFAULT");
ComponentName cn = home_intent.resolveActivity(PM);
String pkgName = cn.getPackageName();
Intent intent;
if (android.os.Build.VERSION.SDK_INT >= 9) {                       
    Uri packageURI = Uri.parse("package:" + pkgName);
    intent = new Intent("android.settings.APPLICATION_DETAILS_SETTINGS", packageURI);
    startActivity(intent);
    FirstLaunch.this.finish();
    performCleanup();
}  else  {
    //support for 2.1
    intent = new Intent(Intent.ACTION_VIEW); 
    intent.setClassName("com.android.settings", "com.android.settings.InstalledAppDetails"); 
    intent.putExtra("com.android.settings.ApplicationPkgName", pkgName); 
    intent.putExtra("pkg", pkgName); 
    startActivity(intent);  
    FirstLaunch.this.finish();
    performCleanup();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:36:02.887

不幸的是，您不能这样做——您必须等到用户重新启动启动器。

处理此问题的一种常见方法是在“删除”图标后显示一个 toast/对话框，要求用户重新启动启动器以便完全删除图标。

# apache-flex - 在 spark DataGrid (Adobe Flex) 中移动/重新排序列

> ID：10044885
> 
> 赞同：2
> 
> 时间：2012-04-06T14:27:38.160
> 
> 标签：apache-flex, flex-spark

我无法找到 spark DataGrid 是否支持移动/重新排序列。如果不是，最好的解决方案是什么？也许使用mx版本？

我希望用户能够拖动列并排列它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:41:47.727

从 Adob​​e Flex 4.6 - Spark DataGrid 控件，配置列：
[http ://help.adobe.com/en_US/flex/using/WS0ab2a460655f2dc3-427f401412c60d04dca-8000.html](http://help.adobe.com/en_US/flex/using/WS0ab2a460655f2dc3-427f401412c60d04dca-8000.html)

> 注意：您只能通过对传递给 columns 属性的 IList 进行排序，以编程方式对 DataGrid 的列进行排序。也就是说，您不能使用鼠标拖动列来重新排列列。

因此，您将需要一个编程实现来重新排序 IList 列中的 GridColumns。

```
 <s:columns> 
        <s:ArrayList>
            <s:GridColumn dataField="Album"/> 
            <s:GridColumn dataField="Price"/> 
        </s:ArrayList>
    </s:columns> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:49:45.150

```
 //adg is your DataGrid id
   var tmp:ArrayList = adg.columns as ArrayList;
   var col:GridColumn = new GridColumn('customColumn'); //create new col or reuse existing from tmp
   tmp.setItemAt(col, 1); //set it at the position you want 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T16:21:58.990

[来自http://flex6packs.wordpress.com/2012/01/18/spark-grid-column-drag-and-drop-or-move/](http://flex6packs.wordpress.com/2012/01/18/spark-grid-column-drag-and-drop-or-move/)的costin具有扩展 DataGrid 以支持可拖动列的工作代码。

# c# - ASP.net MVC 发送邮件

> ID：10044887
> 
> 赞同：1
> 
> 时间：2012-04-06T14:27:43.263
> 
> 标签：c#, asp.net-mvc, smtp

这是我发送邮件的代码（测试代码）：

```
//sending mail
var message = new System.Net.Mail.MailMessage();
message.From = new MailAddress("J2v@gmail.com");
message.To.Add(model.Mailag);
message.Subject = "Valdation d'inscription";
message.Body = "Votre inscription a été valide voici vos cordonne de conexion ID user : "+model.Idag+" Password : "+user.password;
var client = new  System.Net.Mail.SmtpClient
{
    Host = "smtp.gmail.com",
    Port = 587,
    EnableSsl = true,
    UseDefaultCredentials = false,
    Credentials = new NetworkCredential("", "")
};
client.Send(message); 
```

当我尝试它时，我得到了这个错误：

> SMTP 服务器需要安全连接，否则您未连接。服务器响应是：5.5.1 需要身份验证。了解更多信息

在这条线上：`client.Send(message);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:35:46.243

依赖 GMAIL 时使用以下设置：

```
System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.gmail.com");
smtp.UseDefaultCredentials = false;
var credentials = System.Net.NetworkCredential(”yourid@gmail.com”, “yourpwd”);
smtp.Credentials = credentials;
smtp.EnableSsl = true;
smtp.Port = 587; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:33:04.157

我希望您在使用时需要输入您的用户名、密码和端口号`smtp.gmail.com`

尝试使用

```
var client = new SmtpClient("smtp.gmail.com");
client.Port = 587;
client.Credentials = new NetworkCredential("accountID", "accountPassword");
client.EnableSsl = true;

client.Send(message); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:09:14.323

当“SMTP 服务器需要安全连接或您未连接。服务器响应为：5.5.1 需要身份验证。在此行了解更多信息 client.Send(message)”在发送邮件时发生意味着，

您的 gmail 帐户中有两步验证...删除它并运行您的代码.. 它可以工作

# c# - 计划的 Windows 服务中一致的 FTP 超时

> ID：10044889
> 
> 赞同：2
> 
> 时间：2012-04-06T14:27:52.377
> 
> 标签：c#, ftp, timeout, system.net.webexception

我在 Windows 服务中遇到 ftp 问题。我已经安排了一个通过 ftp 发送文件的作业。偶尔我会超时（频率每周一次或每月一次），它会一直持续到我重新启动我的 Windows 服务。

**System.Net.WebException：操作已超时。**

我正在处理异常，最后我关闭了所有打开的 ftp 会话。

```
try
        {
            string uri = String.Format("ftp://{0}/{1}/{2}", server, download, file);
            Uri serverUri = new Uri(uri);
            if (serverUri.Scheme != Uri.UriSchemeFtp)
            {
                return;
            }
            FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(uri));
            reqFTP.Credentials = new NetworkCredential(username, password);
            reqFTP.KeepAlive = false;
            reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
            reqFTP.EnableSsl = false;
            reqFTP.Proxy = null;
            reqFTP.UsePassive = true;
            reqFTP.Timeout = Settings.Default.TimeOut;
            reqFTP.ReadWriteTimeout = Settings.Default.TimeOut;

            response = (FtpWebResponse)reqFTP.GetResponse();
            responseStream = response.GetResponseStream();

            using (FileStream writeStream = new FileStream(path + file, FileMode.Create))
            {
                int Length = 10240;
                Byte[] buffer = new Byte[Length];
                int bytesRead = responseStream.Read(buffer, 0, Length);
                while (bytesRead > 0)
                {
                    writeStream.Write(buffer, 0, bytesRead);
                    bytesRead = responseStream.Read(buffer, 0, Length);
                }
            }

            response.Close();
        }
        catch (WebException wEx)
        {
            LogDatabase.WriteLog("Download File", wEx.ToString(), "Download File");
        }
        finally
        {
            if (response != null)
            {
                response.Close();
            }
            if (responseStream != null)
            {
                responseStream.Close();
            }
        } 
```

有任何想法吗 ？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:28:30.830

为什么你不能把这一切都放在一个循环中？然后，如果您有错误，则循环将返回并再次尝试。

另外，您为什么将`KeepAlive`选项设置为**false**？

我玩了一会儿这个，然后把它放到一个类中，这样我可以更好地看到它，但没有对其进行任何测试。我的班级在后台线程中进行 FTP 调用，如果您希望能够与之通信，这当然是您想要做的事情。

我当然不能保证这至少不会出现一些故障！

```
class FtpRequests {

  private const int BUF_SIZE = 10240;
  private const string PASSWORD = "password";
  private const string USERNAME = "username";
  private const string SERVER = "yourserver.com";
  private string path;

  public FtpRequests() {
    Cancel = false;
    path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
  }

  public bool Cancel { get; set; }

  public bool Complete { get; set; }

  public Thread Thread1 { get; set; }

  public int Timeout { get; set; }

  public int ReadWriteTimeout { get; set; }

  public void StartFtpDownload(string download, string file) {
    string objString = string.Format("{0};{1}", download, file);
    Thread1 = new Thread(startFtpThread);
    Thread1.Name = string.Format("{0} download", file);
    Thread1.IsBackground = true;
    Thread1.Start(objString);
  }

  private void startFtpThread(object obj) {
    Complete = false;
    string objString = obj.ToString();
    string[] split = objString.Split(';');
    string download = split[0];
    string file = split[1];
    do {
      try {
        string uri = String.Format("ftp://{0}/{1}/{2}", SERVER, download, file);
        Uri serverUri = new Uri(uri);
        if (serverUri.Scheme != Uri.UriSchemeFtp) {
          Cancel = true;
          return;
        }
        FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(uri));
        reqFTP.Credentials = new NetworkCredential(USERNAME, PASSWORD);
        reqFTP.KeepAlive = true;
        reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
        reqFTP.EnableSsl = false;
        reqFTP.Proxy = null;
        reqFTP.UsePassive = true;
        reqFTP.Timeout = Timeout;
        reqFTP.ReadWriteTimeout = ReadWriteTimeout;
        using (FtpWebResponse response = (FtpWebResponse)reqFTP.GetResponse()) {
          using (Stream responseStream = response.GetResponseStream()) {
            using (FileStream writeStream = new FileStream(path + file, FileMode.Create)) {
              Byte[] buffer = new Byte[BUF_SIZE];
              int bytesRead = responseStream.Read(buffer, 0, BUF_SIZE);
              while (0 < bytesRead) {
                writeStream.Write(buffer, 0, bytesRead);
                bytesRead = responseStream.Read(buffer, 0, BUF_SIZE);
              }
            }
            responseStream.Close();
          }
          response.Close();
          Complete = true;
        }
      } catch (WebException wEx) {
        LogDatabase.WriteLog("Download File", wEx.ToString(), "Download File");
      }
    } while (!Cancel && !Complete);
  }

} 
```

# php - 单击提交按钮时不使用重定向

> ID：10044891
> 
> 赞同：1
> 
> 时间：2012-04-06T14:28:28.933
> 
> 标签：php, javascript, onclick, redirect

我有这样的代码：

```
<form action="xxx.php" method="post">
    <input type="hidden" name="ab" value="ab" />
    <input type="submit" value="submit" />
</form> 
```

现在当我点击提交按钮时，浏览器被重定向到`xxx.php`。有什么方法可以停止重定向并让脚本工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:43:08.920

你应该使用ajax！ [http://www.simonerodriguez.com/ajax-form-submit-example/](http://www.simonerodriguez.com/ajax-form-submit-example/) 看看吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:44:10.173

您可以停止提交表单

```
<form action="xxx.php" onclick="doSomething(); return false;" method="post">
    <input type="hidden" name="ab" value="ab" />
    <input type="submit" value="submit" />
</form> 
```

现在表单将在 Javascript 函数“doSomething()”返回 true 时首先提交。但是更好的方式是使用 jQuery 或 Prototype 等 Javsscript 库。其他人在这里所说的一些有用的插件可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:40:43.460

使用 ajax 实现您的表单。有一些不错的 jquery 插件可以将现有表单转换为 ajax 表单。请记住给用户一些指示，表明他们的表单正在处理中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:44:49.947

例如。使用 jQuery。

在您的 ajax 页面中。

```
$(document).ready(function(){
    $('form').submit(function(){
        return postForm($(this));
    });
}); 
```

在您的主页中。

```
function postForm(obj){
    method = obj.attr('method');
    action = obj.attr('action');
    $.ajax({
        type: method,
        url: action,
        data: obj.serialize(),
        dataType: 'text',
        error: function(xhr, ajaxOptions, thrownError) {
            // On error...
        },
        success: function(request) {
            // On success...
        }
    })
    return false;
} 
```

# android - Android :: 设置布局

> ID：10044898
> 
> 赞同：0
> 
> 时间：2012-04-06T14:28:57.773
> 
> 标签：android, android-xml

我需要帮助...我的 android xml 出现错误...这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

<CheckBoxPreference 
    android:key="music"
    android:title="Music"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:summary="Play Music for each screen"
    android:defaultValue="true" />

<CheckBoxPreference
    android:key="hints"
    android:title="Hints" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:summary="Enable hints during gameplay"
    android:defaultValue="true" />

</PreferenceScreen> 
```

这是错误消息：

```
com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup
You must supply a layout_width attribute.
You must supply a layout_height attribute. 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:28:46.350

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory android:title="CheckBoxPreference">

        <CheckBoxPreference
             android:key="music"
             android:title="Music"
             android:summary="Play Music for each screen"
             android:defaultValue="true" />

        <CheckBoxPreference
             android:key="hints"
             android:title="Hints" 
             android:summary="Enable hints during gameplay"
             android:defaultValue="true" />

    </PreferenceCategory> 
</PreferenceScreen> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:32:33.440

在您的布局 xml 文件中，您可能忘记添加`layout_width`到视图中。xml 文件中的任何视图都需要此属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:55:19.450

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollview_test"
        android:fillViewport="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <com.marlonlu.pinterest.ui.module.GallaryView
            android:id="@+id/gridview_test"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </ScrollView>

</LinearLayout> 
```

从上面的代码中，您可以看到如何定义我的自定义视图**com.marlonlu.pinterest.ui.module.GallaryView**，在 Android 中，您必须在使用自定义视图的布局中定义**layout_width**和**layout_height**。

# python - 如何阻止子进程终止我的脚本？

> ID：10044903
> 
> 赞同：0
> 
> 时间：2012-04-06T14:29:31.737
> 
> 标签：python, subprocess

每当我尝试使用`subprocess.call()`or运行 shell 脚本`os.system()`时，脚本就会运行，但 Python 脚本也会终止，并且在调用之后编写的所有内容都不会执行。我尝试从库中导入此调用并使用单独的 python 脚本运行或执行它，`execfile()`但同样的事情也发生在那里。我的系统有问题吗，还是应该这样？如果是后者，那么在进行此子进程/系统调用后，我将如何停止此操作并保持我的 Python 脚本运行？

```
shushens@P600:~/Desktop$ python
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.call(["sh","test.sh"])
shushens@P600:~/Desktop$ 
```

这是外壳脚本：

```
export <SOMEPATHNAME>=/some/path/here
exec $SHELL -i 
```

我认为这`exec $SHELL -i`是导致在该特定外壳上运行的所有程序终止的原因。但我不知道我还有什么其他选择。如果`export`我不使用它，它就不起作用。目前，我要导出的路径正在导出，但 Python 进程随之终止。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:30:57.580

shell 并没有杀死你的脚本，它正在做你要求它做的事情，开始一个新的交互式 bash 会话。请注意，在调用 subprocess 之后，如果我执行 ps，python 仍在运行。此外，如果您退出 bash 会话，它会将您带回 python 解释器/脚本。

```
bago@bago-laptop:~$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:09:56) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.call(['sh', 'test.sh'])
bago@bago-laptop:~$ ps
  PID TTY          TIME CMD
 1412 pts/3    00:00:00 bash
 1485 pts/3    00:00:00 python
 1486 pts/3    00:00:00 bash
 1509 pts/3    00:00:00 ps
bago@bago-laptop:~$ exit
exit
0
>>> print "im back in python"
"im back in python"
>>> exit() 
```

导出不需要您启动新的 bash 会话即可工作。我不确定您为什么要使用 export 但您是否考虑过`os.environ['SOMEPATHNAME'] = "/some/path/here"`. 这将在你使用之前在你的 python 脚本中设置环境变量`subprocess.call`。

# c# - 将复选框/单选按钮布尔值保存到全局变量

> ID：10044905
> 
> 赞同：1
> 
> 时间：2012-04-06T14:29:47.150
> 
> 标签：c#, wpf, global-variables, boolean

（使用 WPF 应用程序）当我想将 bool 保存到全局变量时出现错误，如下所示：

```
Window msgOne = new Window();
 if (Properties.Settings.Default.sound01 == true)
  {
    msgOne.radioboxSound.IsChecked = true;
  }
 else
  {
    msgOne.radioboxSound.IsChecked = false;
  }
msgOne.ShowDialog();
//waiting for close
Properties.Settings.Default.sound01 = msgOne.radioboxSound.IsChecked; 
```

其中`radioboxSound`是复选框，并且`Properties.Settings.Default.sound01`是您可以在 VB c# 的设置选项卡中进行的全局参数

我在上面片段的最后一个链接中得到的错误）：无法隐式转换类型“bool？” “布尔”。存在显式转换（您是否缺少演员表？）

但我没有使用任何布尔？，只有已经设置的铃。

有人知道如何处理这个吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:34:13.840

单选按钮的 IsChecked 属性是 'bool?'。将您的代码更改为

```
Properties.Settings.Default.sound01 = msgOne.radioboxSound.IsChecked??false; 
```

多一点解释。

由于 RadioButton.IsChecked 是 Nullable，因此无论 IsThreeState 属性设置为 true 还是 false，您都需要处理 IsChecked 可以为 null 的事实。

你可以使用

```
Properties.Settings.Default.sound01 = msgOne.radioboxSound.IsChecked == true; 
```

或使用上面的空合并运算符。

# facebook - 在调用 FB.init() 错误之前调用 FB.getLoginStatus()

> ID：10044906
> 
> 赞同：1
> 
> 时间：2012-04-06T14:29:59.603
> 
> 标签：facebook, facebook-javascript-sdk

我正在尝试通过 javascript sdk 获取当前用户登录状态，但出现以下错误：

> 在调用 FB.init() 之前调用 FB.getLoginStatus()

这是我的代码：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '000000000000000000', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

        console.log(FB.getLoginStatus); //THIS DOESN'T WORK!!

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:40:35.413

看起来 FB.init 不是同步调用（意味着它在实际完成之前返回）。一个快速的谷歌出现了这个[如何检测facebook的FB.init何时完成](https://stackoverflow.com/questions/3548493/how-to-detect-when-facebooks-fb-init-is-complete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T10:29:17.753

我遇到了同样的问题，并通过删除`#xfbml=1` 导入的 URL 来解决它：

```
//connect.facebook.net/en_US/all.js#xfbml=1 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T20:26:19.123

您只是忘记了 () 来调用 javascript 方法。

```
console.log(FB.getLoginStatus); 
```

是

```
console.log(FB.getLoginStatus()); 
```

# jquery - jQuery :odd 和 :nth-child CSS3 不同

> ID：10044910
> 
> 赞同：2
> 
> 时间：2012-04-06T14:30:33.623
> 
> 标签：jquery, css, jquery-selectors, css-selectors

我发现 jQuery :odd 选择器和 CSS3 nth-child(odd) 的工作方式不同。 [http://jsfiddle.net/TMDwT/5/](http://jsfiddle.net/TMDwT/5/)

黄色是 CSS nth-child(odd) 如果你取消注释 JS 和注释 background: yellow in CSS 你会发现它以另一种方式找到。

谁能说我如何在 jQuery 中实现与 CSS3 相同的结果？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:35:20.027

是的，[:odd](http://api.jquery.com/odd-selector/)和[:nth-child(odd)](http://api.jquery.com/nth-child-selector/)不是一回事：

*   `:odd`*匹配匹配元素*中的奇数项，即您应用选择器的 jQuery 对象的内容，

*   `:nth-child(odd)`匹配*各自父母*中的奇数项。

`:first`这与and `:first-child`、 or`:last`和之间的区别相同`:last-child`。

*更新：*正如 zzzzBov 和 BoltClock 正确指出的那样，`:odd`选择器是从零开始的，但`:nth-child()`选择器是从一开始的。这意味着即使您将两个选择器应用于元素的完整子列表（从而消除 和 之间的差异`:odd`）`:nth-child(odd)`，它们仍然不会匹配相同的元素。

# function - Powershell：如何为 system.object 的输出创建函数？

> ID：10044917
> 
> 赞同：1
> 
> 时间：2012-04-06T14:31:26.077
> 
> 标签：function, powershell, powershell-2.0

我正在编写一个脚本来从本地和远程机器获取服务。我不得不将 wmi 调用拆分为本地和远程机器（远程机器需要不同的凭据）。我想将它们输出为 System.Object。如何为 system.object 的输出创建函数？

这是我到目前为止的代码：

```
$objServicecol = @()

    # how do i get AddService object back 
    Function AddServiceObjects
    {
            ForEach ($Service in $Services)
            {
                $objService = New-Object System.Object
                $objService | Add-Member -MemberType NoteProperty -Name SystemName -Value $Services.SystemName 
                $objService | Add-Member -MemberType NoteProperty -Name Name -Value $Services.Name 
                $objService | Add-Member -MemberType NoteProperty -Name StartMode -Value $Services.StartMode
                $objService | Add-Member -MemberType NoteProperty -Name StartName -Value $Services.StartName
                $objService | Add-Member -MemberType NoteProperty -Name Status -Value $Services.Status
                #$objServiceCol += $objService
                AddServiceObjects += $objService
            }
        }

    # Executes local WMI 
    If ($Servers -contains "localhost") 
    {
        $Services = Get-WMIObject Win32_Service -ComputerName "localhost" | Select-Object SystemName, Name, StartMode, StartName, Status
        AddServiceObjects $Services
    }
...#execute remote wmi... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:31:16.223

在 .NET 中，System.Object 是继承层次结构的根，因此您输出的任何类型都可以视为 System.Object。您可能需要考虑在循环中创建 a`psobject`而不是 a （并简化它）：`System.Object`

```
Function AddServiceObjects($Services)
{
    ForEach ($service in $Services)
    {
        New-Object psobject -Property @{
            SystemName = $service.SystemName
            Name       = $service.Name 
            StartMode  = $service.StartMode
            StartName  = $service.StartName
            Status     = $service.Status }
     }
} 
```

请注意，由于不将`New-Object`输出分配给变量，它将从函数中获得输出——循环中的每次迭代都有一个对象。另请注意，您的 foreach 迭代变量是，但您在命令`$service`中引用了全局变量。`$Services``New-Object`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:02:04.643

当您通过管道传输到 Select-Object 时，您已经获得了一个 PSObject。我不明白为什么你觉得需要在你的函数中重新创建对象。仅仅因为您有两个 WMI 调用并不意味着什么。让每个人都写入管道。如果需要，将每个结果添加到数组中，然后在脚本末尾将数组写入管道。

```
如果（$Servers - 包含“本地主机”）
{
   $objServiceCol+= Get-WMIObject Win32_Service -ComputerName "localhost" | 选择对象 SystemName、名称、StartMode、StartName、状态

}
别的
{
  $objServiceCol+= Get-WMIObject Win32_Service -ComputerName $computer -credential $cred | 选择对象 SystemName、名称、StartMode、StartName、状态

}
#将最终结果写入管道
$objServiceCol

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T20:31:31.577

取消注释`#$objServiceCol += $objService`并删除`AddServiceObjects += $objService`.

然后，在 foreach 之后，只需`$objServiceCol`让列表以对象格式吐出其内容。

# python - _func() ，下划线的任何功能使用？（Python）

> ID：10044918
> 
> 赞同：4
> 
> 时间：2012-04-06T14:31:29.167
> 
> 标签：python, function

我创建了两个模块，一个与

```
def _func():
    print "hi" 
```

和另一个

```
def func():
    print "hi" 
```

当我在包含第一个功能的模块上使用帮助功能时，帮助模块不显示此功能。与此函数显示在帮助输出中的第二个示例相反。除了使用帮助功能之外，还有什么功能上的区别吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T14:38:04.943

是的，在功能方面*存在*（诚然微妙的）差异。假设您有一个模块**A.py**：

```
foo = 1
_bar = 2 
```

观察：

```
>>> from A import *
>>> foo
1
>>> _bar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name '_bar' is not defined 
```

如果您这样做，则默认行为`import *`是不导入带前导下划线的成员。[`__all__`](http://docs.python.org/tutorial/modules.html#importing-from-a-package)您可以通过指定一个列表来覆盖该行为：

```
__all__ = ['foo', '_bar']

foo = 1
_bar = 2 
```

现在：

```
>>> from A import *
>>> (foo, _bar)
(1, 2) 
```

顺便说一句，`__all__`还覆盖了`help()`or显示的成员列表`pydoc`：

```
$ pydoc A | cat
 ...
DATA
    __all__ = ['foo', '_bar']
    _bar = 2
    foo = 1
 ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T14:41:00.433

*以“_”开头的模块级名称有所*不同：当您使用时它们不会被导出`from module import *`-

可以通过让模块有一个名为的列表来覆盖此行为，`__all__`该列表列出了您要从模块中导出的所有属性。

尽管：

```
import module
module._func 
```

将毫无区别地工作。正如其他答案所暗示的那样：“_”是一个指示名称应该保留给模块/类/API的私人使用-但是，在“从模块导入*”和自动帮助的唯一情况下-作为在您的情况下，口译员确实会以不同的方式对待。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T14:39:29.670

这是一个 python 约定，任何以下划线开头的名称都不会被视为公共 api 的一部分，因此包含以下划线开头的函数的模块或类的用户不会通过正常访问被告知这些函数的存在。当然，由于它只是一个约定，因此可以绕过它，但作为一般经验法则，您可以考虑将任何以下划线开头的内容隐藏在模块/类之外的代码中。

以下是来自 python 文档的更多信息：http: [//docs.python.org/tutorial/classes.html#tut-private](http://docs.python.org/tutorial/classes.html#tut-private)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T14:34:56.873

下划线是一种约定，通常用于表示模块或类的私有成员。

# android - Android：为位图着色

> ID：10044919
> 
> 赞同：0
> 
> 时间：2012-04-06T14:31:34.577
> 
> 标签：android, colors, bitmap

我有一个简单的问题。我有这个位图 ![在此处输入图像描述](../Images/e445b45b9923e1baed5a555661edf4cb.png)

android sdk有没有办法用颜色（由用户选择）为这件T恤（只有T恤而不是整个矩形）着色

还是我必须制作每种颜色的位图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:40:27.927

您可以使用例如 ColorFilter 来做您想做的事情 - 或者您使用透明度（使应该着色的区域透明并绘制一个带有所需颜色的矩形）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:50:19.700

![在此处输入图像描述](../Images/9cd4a13efa555c787b05cf30fb86921a.png)

我已将此图像设为透明，您也可以使用 Photoshop 更改一些

使用此图像或使图像的 T 恤区域透明并根据您的要求更改背景。

# php - 使用 Graph API 和 PHP 发布托管照片

> ID：10044925
> 
> 赞同：0
> 
> 时间：2012-04-06T14:32:07.290
> 
> 标签：php, facebook-graph-api, graph, upload, photo

我正在尝试制作一个 PHP 脚本，该脚本将在不使用 PHP SDK 的情况下将托管照片发布到用户的个人资料中。这就是我现在所拥有的：

```
<?php
   $app_id = "[My App ID]";
   $app_secret = "[My App Secret]";
   $post_login_url = "[current page]";

   $code = $_REQUEST["code"];

   //Obtain the access_token with publish_stream permission 
   if(empty($code)){ 
      $dialog_url= "http://www.facebook.com/dialog/oauth?"
       . "client_id=" .  $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       .  "&scope=publish_stream";
      echo("<script>top.location.href='" . $dialog_url 
      . "'</script>");
     }
    else {
      $token_url="https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       . "&client_secret=" . $app_secret
           . "&code=" . $code;
          $response = file_get_contents($token_url);
          $params = null;
          parse_str($response, $params);
          $access_token = $params['access_token'];

         // This would probably be where my problem is
         $graph_url= "https://graph.facebook.com/me/photos?"
         . "access_token=" .$access_token;
$postdata = http_build_query(
         array(
          'source' => $imageurl, //this variable has been properly defined
          'message' => $image_description //this, too, has been defined
            )
          );
         $opts = array('http' =>
         array(
          'method'=> 'POST',
          'header'=>
            'Content-type: application/x-www-form-urlencoded',
          'content' => $postdata
          )
         );
      }
?> 
```

运行时，会创建一个具有应用名称的新专辑，但不会上传文件。有什么办法可以使这项工作？如果有人知道 PHP 甚至 javascript 的解决方案，请分享

-科里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:20:55.943

有点跑题了，为什么你使用 JavaScript 来重定向，而不是 PHP？

header('位置：' . $dialogue_url );

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:08:32.567

尝试这个

如果您正在提交表单，您可以这样做。

```
$sourceFile = $_FILES[$fileElementName];

$postdata = http_build_query(array('source' => '@'.$sourceFile['tmp_name'])); 
```

如果你只是想测试

> '来源' => '@'.$imgLocalPath;

# c# - 如何在 C# 中访问其事件之外的 AsyncFileUpload 类/对象？

> ID：10044926
> 
> 赞同：0
> 
> 时间：2012-04-06T14:32:15.480
> 
> 标签：c#, asp.net, asp.net-ajax, ajaxcontroltoolkit

我正在开发一个图像上传模块并`AsyncFileUpload`在页面中有一个控件，我相信（一旦用户浏览文件路径）将文件保存在临时文件中。缓冲区，直到您调用该方法`AsyncFileUpload.SaveAs(filePath)`，

在我的情况下，我想在使用提交完整表单时调用此方法，（目的是如果用户浏览了图像，然后决定取消操作，则文件不能存储在服务器上），

所以相反，我试图在`AsyncFileUpload.SaveAs(filePath)`内部调用，`protected void btnUpload_Click(object sender, EventArgs e)`但如果我这样做，它会给出 NullReferenceException 是由用户代码导致的。

我相信这是因为`AsyncFileUpload`触发了一个回发事件，因此当我再次调用它时它是空的。

可能我需要在运行时从临时缓冲区存储/访问文件。

任何建议将不胜感激。

StackTrace 显示：

在 AjaxControlToolkit.AsyncFileUpload.SaveAs(String fileName) at _default.btnUpload_Click(Object sender, EventArgs e) in d:\Projects\ImageRepository_default.aspx.cs:line 27 at System.Web.UI.WebControls.Button.OnClick(EventArgs e ) 在 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) 在 System.Web.UI.Page 的 System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)。在 System.Web.UI.Page.ProcessRequestMain 的 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) 的 RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) (Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:28:39.927

如果您将控件设置为`persist=true`，您应该能够在 AsyncFileUpload 事件之外访问其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:29:03.490

如果你愿意，你可以试试这个方法，直到你找到一个更优雅的方法。首先定义一个静态控件：

```
private static AsyncFileUpload fu = new AsyncFileUpload(); 
```

然后在 Page_Load 中添加以下行：

```
fileUpload.UploadedComplete += fileUpload_UploadedComplete; 
```

在哪里

```
protected void fileUpload_UploadedComplete(object sender, AsyncFileUploadEventArgs e)
        {
            fu = fileUpload;
        } 
```

在您的页面/Web 用户控件中使用的控件`fileUpload`的 ID在哪里。`AsyncFileUpload`

这将保留选择上传的文件的详细信息。

当文件已经存在于服务器上并且我必须向用户提示确认警报（是否同意覆盖）时，我会使用此方案（因为此警报会导致回发，因此来自 ASU 的信息会丢失）

希望它可以对某人有所帮助，因为我失去了一些宝贵的时间来寻找解决方法。最后我想出了这个，但我相信有一种更优雅的方式来做到这一点。

再见

# c# - 多个按钮的 CommandBarButton 单击事件

> ID：10044938
> 
> 赞同：3
> 
> 时间：2012-04-06T14:33:23.317
> 
> 标签：c#, vsto, add-in, visio

我需要在 Visio 窗口中使用一组按钮创建自己的工具栏。下一个代码生成工具栏（有效），创建按钮（有效），并为它们分配 Click 事件处理程序。

```
vsoCommandBar = vsoCommandBars.Add("MyCommandBat", Office.MsoBarPosition.msoBarTop, false, true);

var vsoButtonX1 = (Office.CommandBarButton)vsoCommandBar.Controls.Add(
    Office.MsoControlType.msoControlButton, 1, 2, 1, false);
vsoButtonX1.Caption = "Test1";
vsoButtonX1.Tag = "";
vsoButtonX1.Click += GlobalEvents.btnTestClick;

var vsoButtonX2 = (Office.CommandBarButton)vsoCommandBar.Controls.Add(
    Office.MsoControlType.msoControlButton, 1, 2, 2, false);
vsoButtonX2.Caption = "Test2";
vsoButtonX2.Tag = "";
vsoButtonX2.Click += GlobalEvents.btnTest2Click; 
```

处理程序很简单，但不同（当然）。

```
public void btnTestClick(Office.CommandBarButton vsoButton, ref bool cancelDefault)
{
    MessageBox.Show("btnTestClick!");
}

public void btnTest2Click(Office.CommandBarButton vsoButton, ref bool cancelDefault)
{
    MessageBox.Show("btnTest2Click!");
} 
```

当我单击任何按钮时，我会看到带有“btnTestClick！”的对话框 并在使用“btnTest2Click！”按“确定”对话框后。在两个按钮中的任何一个上。

此外，如果我跳过这一行：

```
vsoButtonX2.Click += GlobalEvents.btnTest2Click; 
```

我将看到单个对话框“btnTestClick！” 在任何按钮上。

似乎它至少对于命令栏只有一个点击处理器。是真的吗？！

PS：当然，我可以使用“vsoButton”参数和标签来检测按下了哪个按钮，但是使用不同的事件处理程序似乎更方便......有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:13:41.877

Visio 通过它们的... TAGS 来区分按钮...

```
vsoButtonX1.Tag = "1";
vsoButtonX2.Tag = "2"; 
```

解决了这个问题......我留下了这个问题，也许它会帮助smb......

# java - Java中的节点比较和替换

> ID：10044939
> 
> 赞同：0
> 
> 时间：2012-04-06T14:33:29.540
> 
> 标签：java, xml, spring, dom, xml-parsing

我想比较2个XML文件“parent.xml”，“child.xml”，然后检查一个节点是否存在于“parent.xml”中并且不存在于“child.xml”中，然后将这些节点添加到“child .xml”，它应该维护节点层次结构。

**“Parent.xml”的结构**

```
<chart>
<chartconf alignTicks="true" animation="true" backgroundColor="#FFFFFF" 
       borderColor="#4572A7" borderRadius="5" borderWidth="0" className="" defaultSeriesType="">
</chartconf>
<legend>
    <align>center</align>
    <backgroundColor>null</backgroundColor>
    <borderColor>#909090</borderColor> 
    <borderRadius>25</borderRadius>
</legend>
<credits>
    <enabled>true</enabled>
    <position></position>
    <href>http://www.saama.com</href>
    <style bek="5555s">Sixth</style>
    <text>Highcharts.com</text>
</credits>
<license>
    <info>
        <url>http://eee.example.com</url>
        <author>Jhon Doe</author>
        <email>xyz@example.com</email>
        <type>GNU, MIT dual</type>
    </info>
</license> 
```

**“child.xml”的结构**

```
<chart renderTo="pieContainer" >
<title align="center" text="Test Title" style="" verticalAlign=""></title>
<credits enabled="false" position="" href="" style="" text=""></credits>

<tooltip>
    <formatter>[function]function() {return this.point.name + " - " + this.percentage;}[/function]</formatter>
</tooltip>
<exporting enabled="true"></exporting>
<plotOptions>
    <pie allowPointSelect="true" cursor="pointer">
        <dataLabels align="left" enabled="true"></dataLabels>
        <series cursor="pointer" allowPointSelect="true">
            <events>
                <click>[function]function(event) {getAjaxData("ajax/pieDrill.json", this, event)}[/function]</click>
            </events>
        </series>
    </pie>
</plotOptions>

<license>
    <info>
        <url>http://eee.example.com</url>
        <author>Jhon Doe</url>
    </info>
</license></chart> 
```

在“parent.xml”中，我们可以看到节点**图例**存在但不存在于子节点中，因此应将其添加到“child.xml”中

两个 xml 文件中都存在第二个节点**许可证**，但在“child.xml”中缺少几个节点，因此我们可以添加那些缺少的节点，并且它应该保持相同的层次结构。

可以有n级嵌套，XML文件的格式不固定，可以随时更改

# ios - 我想在核心数据中保存 UISegmentedControl.selectedSegmentIndex - 但是如何

> ID：10044942
> 
> 赞同：0
> 
> 时间：2012-04-06T14:33:58.743
> 
> 标签：ios, core-data, uisegmentedcontrol

我正在使用分段控件作为联系人应用程序的一种单选按钮系统。有三个按钮，问题是联系人是否是现有客户。按钮的名称是“否”、“是”、“其他部门”

我在开发 iOS 方面绝对是新手，而这个正在拔掉我最后剩下的白发

我希望能够将 selectedSegmentIndex 值保存在 Core Data 的数据库中，这样我就可以在下一个视图中正确显示状态 - 但我真的很难理解如何保存该值：

```
if (self.existCustSelection.selectedSegmentIndex == 2)
    [self.currentContact setExistCust:[existCustSelection stringWithFormat:@"%d", @"2"]]; 
```

- 这给出了一个编译错误

> 'UISegmentedControl' 没有可见的@Interface 声明选择器'stringWithFormat:'

我确实明白 - 我的问题是，我想设置`existCust`而不是`existCustSelection`，但无论出于何种原因，我在编写代码期间都没有获得该选项。

我的阅读是这样的，没有给出错误或警告：

```
if ([currentContact existCust] == @"2") {
            self.existCustSelection.selectedSegmentIndex = 2;
    } 
```

希望有一个很好的解决方案吗？:)

在此先感谢，米奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:06:06.443

existsCust 必须是字符串吗？如果它只存储数字，请考虑使用`NSNumber`：

```
NSNumber* custNumber = [NSNumber numberWithInteger:existCustSelection.selectedSegmentIndex]; 
```

如果您确实需要一个字符串，以下是如何使用 stringWithFormat 将您的索引转换为字符串：

```
NSString* custString = [NSString stringWithFormat:@"%d", existCustSelection.selectedSegmentIndex]; 
```

您的电话有两个问题`stringWithFormat`：

1.  `stringWithFormat`是 的类方法`NSString`。您要求您的实例`UISegmentedControl`返回一个字符串，但它不知道该怎么做。
2.  在 stringWithFormat 中请求 a`%d`后，第一个参数需要是整数，例如`2`，而不是 string `@"2"`。

# regex - 使用正则表达式查找特定的简单字符串

> ID：10044945
> 
> 赞同：0
> 
> 时间：2012-04-06T14:34:21.227
> 
> 标签：regex, string

所以我是正则表达式的新手，很难理解它们。为了弄湿我的脚，我做了一个用破折号或斜线标识日期的方法。它看起来像这样：

```
\d{1,2}[-/]\d{1,2}[-/](\d{4}|\d{2}) 
```

我意识到它不是 100% 准确的，因为假设它会接受 32-96-2012 作为日期，但这很好。这不适用于家庭作业或工作，所以不需要，我只想了解简单的正则表达式。

所以现在我想了解如何搜索特定的单词，我很困惑。例如，如果我想在文本文档中搜索单词“soap”或“Tom”。如果有人可以发布一个简单的示例和描述，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:36:58.863

一个简单的 /soap/ 或 /Tom/ 就可以了。
更多信息[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:45:55.863

正则表达式尽可能地可读（信不信由你）。所以如果我想用soap这个词搜索一个文本文档，正则表达式就是“soap”。

如果我想要肥皂或汤姆，那么它会变成 (?:soap|Tom)。(?:) 附件意味着将 (?:) 附件的内容视为其迷你正则表达式。该| 字符是一个或运算符，表示左边的任何东西*或*右边的东西。因此，(?:soap|Tom) 意味着查找单词 soap 或单词 Tom。

为什么我不能写肥皂|汤姆呢？如果我想寻找“肥皂盒”或“汤姆盒”，那么肥皂|汤姆盒就不行了。这将匹配肥皂或汤姆盒，但不匹配肥皂盒。

一开始肯定会让人感到困惑，但你学会了寻找分组并将其逐个分解，以了解它真正在寻找什么。

# sql - Mac 上带有 Oracle SQL Developer 的 Microsoft SQL Server

> ID：10044946
> 
> 赞同：1
> 
> 时间：2012-04-06T14:34:22.800
> 
> 标签：sql, sql-server, oracle, authentication, oracle-sqldeveloper

我无法从我的 Mac 登录我们的 MS SQL Server 2008。我的计算机没有加入域，这似乎很重要，直到我通过 VPN 连接。无论如何，我认为 JTDS 驱动程序运行良好。我得到的错误是“用户登录失败”。所以我知道它正在正确地找到服务器。我可以通过终端中的 FreeTDS 进行连接。我得到了完全相同的错误，直到我意识到我需要输入我的用户名`'domain\username'`而不是`username`. 当然，我已经在 Oracle SQL Developer 中尝试过所有这些变体。我尝试过使用“Windows 身份验证”的东西，但它没有帮助。我读过有时 Windows 身份验证在 Java 应用程序中不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-21T23:39:26.333

这可以通过在 ~/.sqldeveloper/systemXXX/o.jdeveloper.db.connection./connections.xml 中为您创建的每个连接附加 ";domain=your-windows-domain" 到 'customURL' 属性来解决。

有关更多信息，请参阅[https://community.oracle.com/thread/2362216](https://community.oracle.com/thread/2362216)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:59:35.667

If you connect from any client you can use windows or internal authentication. From non windows machine I prefer yusing internal sql authentication. By default sql server authentication is deactivated on pre 2008 and on 2008 or 1012 you get asked by while you install the server. On all versions you can activate sql authentication on the sql server proeprties via the management studio.

So I would try sql auth first. Then if you really need windows authentication try use fqdn like username@domain.local with password. But in general you first attempt domain\username should work as well.

# javascript - 尝试安装 Speaker HTML5 音频播放器

> ID：10044949
> 
> 赞同：0
> 
> 时间：2012-04-06T14:34:30.197
> 
> 标签：javascript, jquery, wordpress, html

我正在开发一个播客网站 (http://bit.ly/HuLCn1)。在右侧的联系表格上方，我想添加一个 HTML5 音频播放器——最好是在[http://www.speakker.com](http://www.speakker.com)上找到的那个可以向上滑动的播放器。有没有人有这个播放器的经验？无论我做什么，我都无法复制在开发者主页上找到的播放器，即使有说明。想知道我在这里是否遗漏了什么？

此外，如果有人知道任何其他不错的 HTML5 音频播放器，我愿意接受建议。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:01:41.383

First, you have three javascript errors and you're loading two copies of the main jQuery 1.4.2 library. Use [Firebug](http://getfirebug.com/) with Firefox, or in Chrome or Safari or IE8, use the developer tools to see what's loading on your site and see the JS errors.

Second, you need to correctly enqueue scripts in Wordpress so you don't duplicate scripts (either core scripts for your theme and scripts that plugins will load via `wp_head`) and load scripts according to their dependancies. Wordpress also includes many jQuery libraries, so you don't have to also include them in your theme. See [http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

Third, you're using Thesis. Try switching to twentyeleven with the same plugin and see if you have the same JS errors and if the audio player works. That means a conflict JS in Thesis and possibly a doc type error, too, if Thesis doesn't use a html5 doc type.

# ios - 这个版本的 XCode 4 上的 iPad 模拟器有问题吗？

> ID：10044953
> 
> 赞同：-2
> 
> 时间：2012-04-06T14:34:46.840
> 
> 标签：ios, xcode, ipad

看看这部电影的证据 [http://vimeo.com/39844347](http://vimeo.com/39844347)

比较这个 [http://www.youtube.com/watch?v=8lJkRiJj4G0](http://www.youtube.com/watch?v=8lJkRiJj4G0)

相同的代码但不同的结果。那么某些版本的 iPad 模拟器有问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T14:41:49.897

模拟器只是软件和一些硬件的模拟。这确实留下了“错误”存在的可能性。这就是为什么我总是在模拟器和真实设备上进行测试。通过这种方式，您可以 100% 确定您得到的结果。我见过有些人在没有实体 iPad 的情况下开发 iPad 应用程序。这只是让他们自己面对很多问题。我会说总体而言，模拟器运行得非常好，而且我注意到模拟器搞砸的事情很少。

# bash - rm -i 在一个循环中

> ID：10044954
> 
> 赞同：1
> 
> 时间：2012-04-06T14:34:56.373
> 
> 标签：bash

我在 for 循环中有 rm -i ，但是当我运行它时，它会打印问题（“你想删除它吗？）但不会停下来让我回答。

```
find .. -name "*.tex" | while read line; do
    printf "${line%%tex}""aux" | xargs rm -i
done 
```

我该如何解决？

我最初也是想通过像这样使用 exec 来做到这一点

```
find ..-name "*.tex" -exec printf "${{}%%tex}""aux"\; | xargs rm -i 
```

但我收到错误“错误替换”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:39:24.247

在 Linux 上：

```
find .. -name "*.tex" | while read line; do
    rm -i "${line%%tex}aux" < /dev/tty
done 
```

`xargs`如果您只有一个参数，则不需要使用，但您确实需要在循环内以某种方式访问​​原始 tty。以上适用于Linux，在其他系统上可能也有类似的技巧。

另一种（可能更便携）的方法是`stdin`在进入 while 循环之前“保存”（假设您没有将 fd 9 用于其他目的）：

```
exec 9<&0
find .. -name "*.tex" | while read line; do
    rm -i "${line%%tex}aux" <&9
done 
```

两者之间的区别：第一个总是尝试（并且可能失败）从控制中读取`tty`。另一个将从`stdin`循环之外的任何内容中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T22:05:00.970

试试这个

```
OIFS="$IFS"
IFS='
'
declare -a ar=($(find . -name '*.tex'))
IFS="$OIFS"
for x in "${ar[@]}"
 do
  rm -i "${x%%tex}aux"
 done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:18:34.980

如果`find`不是绝对要求，您可以用一个简单的 glob 替换它：

```
for f in ../*.tex; do
    rm -i ${f%%tex}aux
done 
```

# php - 不向 IE 呈现 PHP 页面

> ID：10044958
> 
> 赞同：3
> 
> 时间：2012-04-06T14:35:19.980
> 
> 标签：php, browser

我有一个在 IE 6 和 7 中崩溃的 PHP 页面，因此我希望用户不要使用 IE。他们肯定会忽略警告和通知。因此，作为一种解决方案，如果请求来自 IE，我是否可以停止渲染页面并仅显示不支持 IE 的行？

我是 php 新手，因此是这个问题。即糟透了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:38:18.857

使用用户代理检查：

```
if(stristr($_SERVER['HTTP_USER_AGENT'], 'MSIE 6.0')) {
    echo 'IE6'
};

if(stristr($_SERVER['HTTP_USER_AGENT'], 'MSIE 7.0')) {
    echo 'IE7';
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:43:47.250

您可以使用以下命令访问 HTTP 用户代理请求参数：$_SERVER['HTTP_USER_AGENT']。

```
$usingIE6 = (strpos( $_SERVER['HTTP_USER_AGENT'], 'MSIE 6.' ) !== FALSE);

if ($usingIE6) {
  echo 'Please upgrade your browser'; 
  exit;
} 
```

使用统计在这里，IE 6 拥有 7% 的市场份额： [http ://marketshare.hitslink.com/browser-market-share.aspx?qprid=2&qpcustomd=0](http://marketshare.hitslink.com/browser-market-share.aspx?qprid=2&qpcustomd=0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:40:26.367

是的你可以：

```
if (isset($_SERVER['HTTP_USER_AGENT']) && 
   (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false)) 
```

它只是一个片段，我知道 IE 不是最好的浏览器，但一个好的程序员应该查看所有浏览器并使其在所有浏览器中都正确......这是 Web 开发的实际困难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T14:41:44.730

您可以从超全局 $_SERVER 对 HTTP_USER_AGENT 进行测试；

但只是为了提供另一个选项（这可能不是您所需要的，因为它会获取更多信息并且它需要一个额外的文件）您可以使用依赖于[browscap的](http://browsers.garykeith.com/downloads.asp)[get_browser](http://php.net/get_browser)这更多是为了以防您有时需要有关游客

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T14:56:52.977

PHP 有一个名为[get_browser](http://www.php.net/manual/en/function.get-browser.php)的函数，它将返回您需要的所有版本信息。

您还可以使用 IE 能够破译的条件注释：

```
<!--[if lt IE 8]>Your browser is too old for this app. Please upgrade.<![endif]--> 
```

# actionscript-3 - 使用 FlashDevelop 从 fla（Adobe Flash Professional 5.5）加载“符号”（艺术资产）？

> ID：10044964
> 
> 赞同：0
> 
> 时间：2012-04-06T14:35:36.320
> 
> 标签：actionscript-3, flash, symbols, flashdevelop, swc

请记住，我通常使用纯 as3 和 FlashDevelop :) 我对“使用 Adob​​e Flash Professional”这个东西真的很陌生，而且我正在与一位基本上将所有艺术作品放在 .fla 文件中的艺术家合作。我是一名资深的纯 as3 程序员，我从未尝试过使用 Fla 文件（或 Flash Pro）。

我想以正确的简单方式工作，并使用我的类和 fla 直接加载资产。我试图找到一个全面的教程，但没有这样的运气。

基本上，我在 FlashDevelop 中有一堆工作纯 AS3 代码，还有一堆艺术资源保存在一个 .fla 文件中。我的目标是光栅化（变成 bitmapData）艺术资产，这样我就可以在需要时快速对它们进行 blit（copyPixel）以获得良好的游戏性能。

谢谢大家，非常感谢任何帮助。这是我正在做的一个项目来帮助一个朋友，我没有太多时间自己研究这个，所以简单地将我指向正确的方向，一个易于遵循的教程将是一个很好的开始。

我试图阅读和理解 FlashDevelop 的内部 wiki，但关于将 Flash Pro 5.5 与 FlashDevelop 结合使用的说明尚不清楚。

我真的很想使用 FlashDevelop，这样我就可以轻松地维护类结构。非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:49:11.227

我通常要求艺术家导出 SWC - 很容易通过已经创建的符号从那里移动到您的类。

我通常也尝试编译一个类名列表，给艺术家命名他/她编译的东西。例如，艺术家创建了一个具有 2 个状态的按钮，每个状态都是一个单独的符号。然后我告诉艺术家，他们必须通过给它们名称来导出 ActionScript 的状态：`assets.button.UpState`，`assets.button.DownState`等等。

获得 SWC 后，我将创建名为的类`assets.button.*`并添加状态运行所需的代码。

然而，最好让艺术家看到整个事情是如何发展的，因为他们不会在自己的环境中看到事情是如何捆绑在一起的——这会让你摆脱那些不会立即引起注意的事情。

有时上述情况可能是不可能的，因为 FLA 已经存在，其中有一堆代码，您无法立即删除/您与艺术家没有联系，在这种情况下，您可能只需创建一个FD 中的“Flash CS 项目”将其指向您拥有的 FLA 文件。然后，在 Flash CS 中，您将创建的某个类声明为文档类，并且 FD 有一些 JSFL 脚本来导致 Flash 编译开始 :) 请注意，编译图形需要很长时间，并且 Flash（不是我上次尝试的）不会进行迭代编译。所以，SWC 选项更好 - 将为您节省大量编译时间。

# android - 如何强制 WebImageView 重新加载？

> ID：10044966
> 
> 赞同：0
> 
> 时间：2012-04-06T14:35:40.297
> 
> 标签：android, droid-fu

使用 droid-fu，如何让 WebImageView 重新下载图片并显示？想想每 5 分钟刷新一次网络摄像头......

我尝试了一个按钮调用如下方法：

```
public void refresh() {
    webcam1.reset();
    webcam1.setImageUrl(webcam1url);
    webcam1.loadImage();
} 
```

其中 webcam1 是我的 WebImageView，但它永远不会重新加载，我只是永远用加载轮代替新图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:59:37.933

解决方案是在 WebImageView 中实现 clearCache() 方法并刷新整个活动：

```
public void refreshImages() {
    webcam1.clearCache();
    startActivity(getIntent());
    finish();
    overridePendingTransition(0, 0);
} 
```

# clojure - 无法从跷跷板侦听器函数中访问或更新原子

> ID：10044969
> 
> 赞同：1
> 
> 时间：2012-04-06T14:35:54.307
> 
> 标签：clojure, seesaw

我有一个带有文本编辑器的跷跷板用户界面。编辑器内容由称为“任务”的记录支持，该记录包含在称为“状态”的原子中的某处。编辑器上的键释放事件应更改任务的属性 :desc。我使用以下代码：

```
(def state
     (atom {:tasks []
            :interval nil
            :style (style :foreground :black :background nil)}))

(defn on-text-edited [ui listener-fn]
  (let [editor (select ui [:#editor])]  
    (listen editor :key-released
        (fn [evt] (listener-fn (text editor))))))

(defn update-task! [task text]
  (let [newtask (assoc task :desc text)
        tasks (replace {task newtask} (:tasks @state))]
  (swap! state
     #(assoc % :tasks tasks))))

(def text-updates (on-text-edited frame #(update-task! selected-task %))) 
```

*selected-task*是一个引用编辑器当前内容模型的原子。每当用户编辑文本时，更新任务！函数应该被调用。但什么也没有发生。该函数似乎根本没有被调用。当我从 repl 调用它时，它的行为符合预期。

我通过让它执行一个简单的 println 来测试该函数是否会被调用：

```
(defn update-task! [task text]
   (println (str task " " text))) 
```

现在，当我在编辑器中编辑文本时，该功能可以正常工作。然后我将其更改为：

```
(defn update-task! [task text]
  (let [newtask (assoc task :desc text)
        tasks (replace {task newtask} (:tasks @state))]
     (println (str task " " text)))) 
```

现在再一次，它什么都不做。因此，原子的访问似乎以某种方式妨碍了事件处理。ui线程和定义原子的线程之间是否存在冲突？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T17:01:37.993

在这种情况下，它在简单的情况下工作并在更复杂的情况下停止，我猜可能会发生异常，可能在绑定中`assoc`或绑定中。根据您的开发环境，异常可能会被隐藏，因为它发生在 UI 线程上。`replace``let`

我建议尝试调用`seesaw.dev/debug!`which 将在 UI 线程中引发未处理的异常时弹出一个带有堆栈跟踪的 ui。

# android - 您如何使用 Android 调试器？

> ID：10044976
> 
> 赞同：-2
> 
> 时间：2012-04-06T14:36:25.480
> 
> 标签：android, debugging

我发现很难从调试器显示的所有东西中做出任何东西。我无法找到该程序的位置。在 Java 中，逐行跟踪正在发生的事情要简单得多。有谁知道我怎样才能快速学会它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:50:56.450

如果你喜欢你可以使用这个插件： [http](http://kenai.com/projects/nbandroid) : //kenai.com/projects/nbandroid 如果你已经熟悉了 netbeans，它是为 netbeans 准备的

# powershell - [array] 调用地址方法中的奇怪行为

> ID：10044979
> 
> 赞同：-1
> 
> 时间：2012-04-06T14:36:55.823
> 
> 标签：powershell

我已经在 Powershell 2.0 中的 Win XP 和 Windows Server 2008 R2 上对此进行了测试：

```
$a = 1,2,3,4 # a simple [object[]] but any other Type is good 
```

如果我做：

```
$a.addres() 
```

返回错误是（正确）：

**`Method invocation failed because [System.Object[]] doesn't contain a method named 'addres'.`**

但如果我这样做：

```
$a.address() 
```

错误是：

**`Cannot find an overload for "Address" and the argument count: "0".`**

但是做：

```
$a.address(2) 
```

关闭 powershell 控制台`'Problem Event Name: APPCRASH'`

从那开始`[system.array]`还没有一个方法叫`address`powershell怎么尝试调用一个已有的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:20:01.777

[System.Array] 具有 .Get、.Set 和 .Address 方法，这些方法可通过 .Net 运行时使用，但通常不在 Powershell 代码中使用。看看这篇 StackOverflow[文章](https://stackoverflow.com/questions/2555769/where-can-i-find-information-on-the-get-set-and-address-methods-for-multidimens)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:11:29.167

我不久前将其作为错误提交。他们用 Keith 发布的异常消息在 V3 中修复了它（可能会破坏运行时的稳定性）

[https://connect.microsoft.com/PowerShell/feedback/details/561865/powershell-crashes-when-calling-address-method-on-object-array](https://connect.microsoft.com/PowerShell/feedback/details/561865/powershell-crashes-when-calling-address-method-on-object-array)

# c# - 在 MVC3 中处理复杂查询字符串的正确方法

> ID：10044984
> 
> 赞同：1
> 
> 时间：2012-04-06T14:37:06.547
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, query-string

我对 MVC3 有点陌生，我正在构建一个 JSON API，它必须接受复杂的查询字符串参数......这是一个例子

```
?filter[filters][0][value]=MyValue 
```

现在，如果我有类似的东西

```
?MyParam=1 
```

然后我可以有一个控制器动作，比如

```
public ActionResult SomeController(int MyParam) {} 
```

但是当有明显的数组等时，我不知道如何处理函数参数。

处理这个问题的适当方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:43:41.773

我建议你看看下面的链接。当我尝试做同样的事情时，这对我有帮助：

[Haack - 模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# jquery - 多部分表单 POST 导致 Firefox 提示 JSON 保存

> ID：10044986
> 
> 赞同：6
> 
> 时间：2012-04-06T14:37:33.587
> 
> 标签：jquery, json, internet-explorer, firefox, multipartform-data

我有一个问题发生在 IE 8 和 Firefox 6.0 中，但不是 Chrome 17.0.9。当我在下面发布 frmMain 时，我将它发送到一个测试页面，该页面只返回一个简单的 JSON 字符串，带有`ContentType: application/json; charset=utf-8`. 问题是 IE 和 FF 会提示我保存从服务器返回的 JSON，而不是在我的 jquery 代码中点击成功方法。`<input name='File_1' type='file' />`但奇怪的是，如果我在发布的表单上省略了，那么 IE 和 FF*不会*提示我保存我的 JSON 并且我的 jquery 成功代码会触发。

因此，似乎发布的内容（在 IE 和 FF 中）与浏览器如何对返回的有效负载做出反应有关。通过 Fiddler，我验证了在每种情况下返回的有效负载完全相同。

有任何想法吗？

**找到的解决方案：**请参阅下面的答案。据我所知，“text/html”是执行 jquery/ajax/json 时返回的最佳跨浏览器内容类型。

**代码**

```
<script>
     $(function () {
         $('#btnSave').click(function () {
             $('#frmMain').ajaxSubmit({
                 success: function (data, statusText, xhr, $form) {
                     alert('test success');
                 },
                 fail: function (data, statusText, xhr, $form) {
                     alert('test fail');
                 }
             });
         });
     });
</script>
<body>
     <form id='frmMain' action='/test' method='post'>
              <!--Omit the file input below to make it work-->
          file: <input name='File_1' type='file' /><br />

          name: <input name='json' value='{"id":5}' /><br />

          <input type='button' id='btnSave' value='Save' />
     </form>
</body> 
```

**调用文件上传（导致失败）：** ![在此处输入图像描述](../Images/0b472ccfecfa0374e210a72550a687d0.png)

**在没有文件上传的情况下调用（工作）：** ![在此处输入图像描述](../Images/c175b88bacd1d53fa2310fa7fe7a6b4a.png)

**在 IE 中看起来像什么失败：** ![在此处输入图像描述](../Images/3c832429ed5e0db321e05aa5e3546a29.png)

**FF 中的失败情况：** ![在此处输入图像描述](../Images/d3af4ce35f195f89755339c8fede6fac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:47:12.370

经过大量试验和错误后，我遇到了[这个 SO 帖子](https://stackoverflow.com/a/6202019/462477)，@ItsJason 建议将服务器的 ContentType 设置为“text/html”。这解决了问题，我的 jQuery 代码在调用我的回调方法时仍然将返回的有效负载识别为 JSON。所以吸取了教训：为了在ajax回发期间将JSON返回到jquery时实现跨浏览器的完全兼容性，不要使用“application/json”，使用“text/html”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:21:02.427

您可能需要指定数据的返回类型为 json。

看起来您正在使用插件。无论如何，这里有一些关于指定返回数据类型的信息：http: [//jquery.malsup.com/form/#options-object](http://jquery.malsup.com/form/#options-object)

# c++ - 使用 nVIDIA 编译器生成共享库以供我的 GNU 编译器链接时出现运行时错误

> ID：10044987
> 
> 赞同：0
> 
> 时间：2012-04-06T14:37:35.993
> 
> 标签：c++, compiler-construction, cuda, shared-libraries

我想使用 nVIDIA 编译器生成一个共享库，供我的 GNU 编译器链接。一切顺利，直到运行时。以下是详细内容。谢谢！

主.cpp：

```
#include <iostream>

using namespace std;

void fcudadriver();

int main()
{
  cout<<"Maine "<<endl;
  fcudadriver();
  return 0;
} 
```

测试.cu：

```
__global__ void fcuda()
{
}

void fcudadriver()
{
  fcuda<<<1,1>>>();
} 
```

编译：

```
nvcc --compiler-options '-fPIC' -o libtest.so --shared test.cu
g++ main.cpp -L. -ltest 
```

跑：

```
./a.out 
```

结果：

```
./a.out: error while loading shared libraries: libtest.so: cannot open shared object file: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:41:38.520

`.`需要在您`LD_LIBRARY_PATH`的运行时链接器中才能找到您的共享库。

尝试：

```
$ LD_LIBRARY_PATH=$LD_LIBRARY_PATH:. ./a.out 
```

# c# - MVC3 无法创建新游戏

> ID：10044988
> 
> 赞同：0
> 
> 时间：2012-04-06T14:37:36.453
> 
> 标签：c#, asp.net, asp.net-mvc-3

嗨，人们遇到问题时收到以下错误：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

并且错误针对以下内容：

```
 @Html.DisplayFor(modelItem => item.tblConsole.ConsoleName) "within the game table" 
```

我的游戏控制器中有以下代码：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using GameTest.Models;

namespace GameTest.Controllers
{ 
    public class GameController : Controller
    {
        private gamezoneDBEntities db = new gamezoneDBEntities();

        //
        // GET: /Game/

        public ViewResult Index()
        {
            using (var db = new gamezoneDBEntities())
            {

                var Info = db.tblGames.Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
                return View(Info);   

            }

        }

        //
        // GET: /Game/Details/5

        public ViewResult Details(int id)
        {
            tblGame tblgame = db.tblGames.Find(id);
            return View(tblgame);
        }

        //
        // GET: /Game/Create

        public ActionResult Create()
        {
            ViewBag.ConsoleNameIDFK = new SelectList(db.tblConsoles, "ConsoleName", "ConsoleName");
            return View(new tblGame { UserName = @User.Identity.Name });
        } 

        //
        // POST: /Game/Create

        [HttpPost]
        public ActionResult Create(tblGame tblgame)
        {
            if (ModelState.IsValid)
            {
                db.tblGames.Add(tblgame);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            ViewBag.ConsoleNameIDFK = new SelectList(db.tblConsoles, "ConsoleName", "ConsoleName", tblgame.ConsoleNameIDFK);
            return View(tblgame);
        }

        //
        // GET: /Game/Edit/5

        public ActionResult Edit(int id)
        {
            tblGame tblgame = db.tblGames.Find(id);
            ViewBag.ConsoleNameIDFK = new SelectList(db.tblConsoles, "ConsoleName", "ConsoleName", tblgame.ConsoleNameIDFK);
            return View(tblgame);
        }

        //
        // POST: /Game/Edit/5

        [HttpPost]
        public ActionResult Edit(tblGame tblgame)
        {
            if (ModelState.IsValid)
            {
                db.Entry(tblgame).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.ConsoleNameIDFK = new SelectList(db.tblConsoles, "ConsoleName", "ConsoleName", tblgame.ConsoleNameIDFK);
            return View(tblgame);
        }

        //
        // GET: /Game/Delete/5

        public ActionResult Delete(int id)
        {
            tblGame tblgame = db.tblGames.Find(id);
            return View(tblgame);
        }

        //
        // POST: /Game/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            tblGame tblgame = db.tblGames.Find(id);
            db.tblGames.Remove(tblgame);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

我在索引中使用了此代码，因此每个游戏对于发布游戏的用户来说都是唯一的：

```
 var Info = db.tblGames.Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
        return View(Info); 
```

并在我的控制器的第一个创建部分添加了这个：

```
return View(new tblGame { UserName = @User.Identity.Name }); 
```

当您不单击创建并且每个用户都有单独的游戏帖子时，此代码确实有效，但是当我按创建新时它会崩溃

任何帮助，将不胜感激。请询问您是否需要了解更多信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:45:05.087

您需要`Include`查询中的控制台表数据。

```
var Info = db.tblGames.Include(x => x.tblConsole).Where(UserInfo => UserInfo.UserName.Equals(User.Identity.Name)).ToList();
            return View(Info); 
```

您返回的实体正在尝试`lazy load`添加其他数据，但由于数据上下文已被释放，因此无法添加。这是因为您将它包装在一个`using`块中。通过使用`Include`您是`Eager Loading`初始查询中所需的所有数据，实体无需进行任何其他查询即可获取您在视图中请求的数据。

您可以在此处阅读更多内容`Eager`并`Lazy`加载：http: [//msdn.microsoft.com/en-us/library/bb896272.aspx](http://msdn.microsoft.com/en-us/library/bb896272.aspx)

此外，没有理由拥有 gamezoneDBEntities 的私有实例：

```
private gamezoneDBEntities db = new gamezoneDBEntities() 
```

只需使用您在`using`块中创建的实例：

```
using (var db = new gamezoneDBEntities()) 
```

# java - 为类、成员和参数混淆 Proguard 自定义命名

> ID：10044993
> 
> 赞同：17
> 
> 时间：2012-04-06T14:38:10.840
> 
> 标签：java, dictionary, refactoring, obfuscation, proguard

是否有关于 Proguard 中的字典文件应该如何构建的简单描述？

我已经阅读过`-?obfuscationdictionary`，但我找不到有关文件本身的任何信息。

此外，我想将命名方案更改为更复杂的东西，而不仅仅是`a`等`b`和`paramX`，`paramY`...如果可能的话，我想要一个随机的字符系列。

是的，我知道这只是一种视觉上的差异，可以被改造（重构？）成更容易阅读的东西。不过，只是问...

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-06T16:27:38.733

字典文件格式非常简单：

1.  每行一个字
2.  空行被忽略
3.  `#`以忽略开头的行

如果你想创建一个随机字符串的字典，你可以编写一个简单的程序来生成它们并将它们转储到一个文本文件中，或者使用[http://www.random.org/strings](http://www.random.org/strings)它有一个很好的简单网络界面来创建随机字符串。它每行吐出一个，因此您可以将其输出直接用作字典文件。

这是一些示例输出（您可以生成任何大小的字符串）：

```
HISPj7KHQ7
wja3o2vx62
eyd3OXAZgV
DxDJysLV5r
BSUTWEAMAI
R7N8DF4OVS
4q7UsoAgP4
cWbN6pumKk
SJowARcXwM
OyIbF7L6XB

```

这是我发现的一个例子：

[https://trac.openxdata.org/browser/trunk/j2me/openxdata-mobile/epihandy-lite/proguard/examples/dictionaries/keywords.txt?rev=1156](https://trac.openxdata.org/browser/trunk/j2me/openxdata-mobile/epihandy-lite/proguard/examples/dictionaries/keywords.txt?rev=1156)

```
#
# 这个混淆字典包含保留的 Java 关键字。他们不能
# 在Java源文件中使用，但它们可以在编译的类文件中使用。
# 请注意，这几乎不会改善混淆。体面的反编译器可以
# 自动替换保留关键字，效果可以很简单
# 通过使用更简单的名称再次混淆来撤销。
＃ 用法：
# java -jar proguard.jar ..... -obfuscationdictionary keywords.txt
#

做
如果
为了
整数
新的
尝试
字节
案子
字符
别的
去
长
这
空白
休息
抓住
班级
常量
最终的
漂浮
短的
极好的
扔
尽管
双倍的
进口
本国的
上市
返回
静止的
转变
投掷
布尔值
默认
延伸
最后
包裹
私人的
抽象的
继续
严格的fp
易挥发的
界面
受保护
短暂的
工具
实例
同步的

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T21:13:09.467

任何文本文件都可以。ProGuard 使用文件中的所有有效标识符。它忽略以“#”开头的行。ProGuard 发行版中的目录 examples/dictionaries 包含一些示例（包括 ulmangt 粘贴的示例）。

# jquery - 如何在关闭该对话框时停止嵌入在模态对话框中的 JWPlayer

> ID：10044999
> 
> 赞同：2
> 
> 时间：2012-04-06T14:38:52.483
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jwplayer

我有充满各种视频的模态对话框弹出窗口，由 JW Player 播放。

我正在使用带有 UI 版本 1.8.18（均在本地托管）的 JQuery 1.7.1，并且正在使用该包中的模式对话框小部件。

问题是在播放视频时关闭对话框不会向播放器发送停止命令。因此对话框关闭，但音频继续播放。只有关闭浏览器的整个窗口或选项卡才能将其关闭（目前仅在 IE 中）。

JW Player Docs 有[以下解决方案](http://developer.longtailvideo.com/contributors/nyboe/JW_API_xmpl_5-1-0-0.html)：

```
onclick="player.sendEvent('STOP')" 
```

它们绑定到本地锚标记。

我的问题是模式窗口中的关闭图标是由 UI 代码本身生成的 - 我不愿意在没有指导的情况下摆弄它（我处于 JQuery pre-noob 级别 -1）。

所以，总而言之，谁能告诉我如何`'STOP'`通过外部代码片段或通过更改 UI 编码本身来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:42:26.103

您可以使用`"close"`jQuery ui 对话框的事件：

```
$( ".selector" ).dialog({
   close: function(event, ui) { 
       player.sendEvent('STOP');
   },

   modal: true /* and so on with any other parameters you have */
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:44:29.140

您可以在此处查看他们的 jQuery 模态方法：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

```
    $( ".selector" ).dialog({
       beforeClose：函数（事件，用户界面）{...}
    });

```

您需要将停止命令放在 beforeClose 函数中。这将在模态关闭之前被调用，还有一个“Closed”函数，它在模态关闭后被调用。

希望这可以帮助。

干杯。