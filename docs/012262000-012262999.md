# StackOverflow 问答 12262000-12262999

# php - 在 php 中接收导航菜单的任一值

> ID：12262008
> 
> 赞同：0
> 
> 时间：2012-09-04T10:54:38.500
> 
> 标签：php

我有两个导航，一个在标题中，另一个在同一页面中，现在我想要做的是当我单击子类别时能够从表产品中提取所有数据从子类别中的特定产品. 我现在所拥有的是，当我单击标题页上的菜单时，该菜单包含在每个页面中，我列出了产品，但产品页面上的菜单会产生一个错误，即 foreach 为空。当我使用其他功能提取所有子类别时，它工作正常，但我只想提取属于该特定主类别的子类别。下面的代码会更有意义。

页眉：

```
<?php 
error_reporting(E_ALL);
ini_set('display_errors','1');?>
<?php require_once("initi.php");?>
<html>
<head>
<title></title>
 <link rel="stylesheet" href="css/reset.css" />
 <link rel="stylesheet" href="css/main.css" />
 <link rel="stylesheet" href="css/footer.css" />
<script type="text/javascript" src="/ghaniya.com/javascript/jqu.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$(".logbtn").click(function(){ 
      $("#login2").hide("show");
      $("#login1").slideToggle("slow");
      $(this).toggleClass("active");

});

$(".logbtn2").click(function(){ 
      $("#login1").hide("show");
      $("#login2").slideToggle("slow");
      $(this).toggleClass("active");      
});
});
</script>
<style type="text/css">

div#login1{
background-color:#efebee;
margin:0 auto;
width:100%;
display:none;
height:100px;
}

div#login2{
background-color:#f5dce4;
margin:0 auto;
width:100%;
display:none;
height:100px;
}
.size{width:960px; }
.flotl{float:left; font-size:11px; text-decoration:none; height:30px; margin-left:20px;}
div#centerl{ width:960px; margin:0 auto; }
</style>
</head>
<body>
<div id="head">

<div class="size center">
<img src="img/logosmall.png">
<ul id="mainLink">
<li><a class="logbtn">Women</a></li><li><a class="logbtn2" href="#">man</a></li><li><a href="#">Beauty</a></li><li><a href="">Gifts</a></li><li><a href="">Perfumes</a></li>
</ul>

<div id="loginBox">
<h3>REGISTER | SIGN IN</h3>
</div>

<div id="search">
<input type="submit"/><input type="text" value="Search"/>
</div>
<div id="bag"></div>
</div>
</div>

<div id="login1" >
<div id="centerl">
<ul class="flotl" >
<?php
$cata = Catagory::find_all(); 
foreach($cata as $catag){?>
      <li><a href="/ghaniya.com/product.php?catid=<?php echo $catag->catagory_id;?>"><?php echo $catag->name; ?></a></li>
<?php }?>
</ul> 
</div>
</div> 
```

产品页面：

```
<?php require_once("includes/head.php"); ?>
<?php
  $cata_id = "";  
  $subcat ="";
  if(isset($_GET['catid']))
    {
         $cata_id = $_GET['catid'];
         $product = Product::find_by_cata_id($cata_id);
    }
    elseif(isset($_GET['subcat']))
    {
    $subcat =$_GET['subcat'];
    $subcat = SubCata::find_by_cata_id(1);
    print_r($subcat);
    }
?>
<div class="cBoth"></div>
<div id="contentEveryWhere" class="center">
<div id="cata">
<div id="leftNoticeBoard"></div>
<ul id="catagories">
<h1>CLOTHING</h1>
<?php foreach($subcat as $sub){ ?>
<li><a href="product.php?subcat=<?php echo $sub->subcata_id; ?>"><?php echo $sub->name; ?></a></li>
<?php } ?>
</ul>
</div>
<div id="products">
<div id="catatitle"> 
<ul>
<li>Home ></li><li>Women ></li><li>Coat<li>
</ul>
<h1>Coat</h1>
<p class="floatl">Sort items by Price: High | Low View as: <img src="#" alt="icon png"/> |<img src="#" alt="icon png"/></p>
</div>
<ul id="product">
<?php $product = Product::find_by_cata_id($cata_id);?>
<?php foreach($product as $pro){?>
<?php $image = Image::find_by_product_id( $pro->product_id);?>
          <li>
               <?php if(isset($image->filename)){ ?>
               <img src="/ghaniya.com/img/products/<?php echo $image->filename;?>"/>
               <?php } ?>

              <h2><?php echo $pro->name;?></h2>
              <h3> <?php echo $pro->product_desc;?></h3>
              <h4><?php echo $pro->price;?></h4>
          </li>
<?php } ?>
</ul><!--end of product list-->
</div> <!--end of products div-->

</div><!--end of contentEveryWhere div-->
<div class="cBoth"></div>
<?php require_once("includes/footer.php"); ?> 
```

警告：在第 25 行的 /Users/mughery/Website/ghaniya.com/product.php 中为 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:01:12.730

使用 foreach 时，第一个参数必须是数组。

您可以将代码更改为：

```
<?php
   if( is_array( $subcat ) )
     foreach($subcat as $sub){ 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:02:40.810

4行：

```
<?php
 $subcat = array();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:03:17.907

问题很简单：

```
if(isset($_GET['catid']))
{
    $cata_id = $_GET['catid'];
    $product = Product::find_by_cata_id($cata_id);
}
elseif(isset($_GET['subcat']))
{
    $subcat =$_GET['subcat'];
    $subcat = SubCata::find_by_cata_id(1);
} 
```

这意味着您仅设置`$subcat`if 且仅当`$_GET['catid']`未设置*且* `$_GET['subcat']`is 时。在所有其他情况下`$subcat`是一个空字符串，而不是一个数组。只需添加如下一行：

```
$subcat = (is_array($subcat) ? $subcat : SubCata::find_by_cata_id(1));
//or: 
$subcat = (is_array($subcat) ? $subcat : array()); 
```

你会很高兴的

另外，这个：

```
$subcat =$_GET['subcat'];
$subcat = SubCata::find_by_cata_id(1); 
```

对我来说真的没有意义，我认为你需要类似的东西：

```
elseif(isset($_GET['subcat']))
{
    $subcat =SubCata::find_by_cata_id($_GET['subcat']);
}
$subcat = (is_array($subcat) ? $subcat : SubCata::find_by_cata_id(1)); 
```

如果没有，无论 subcat 参数的实际值如何，您都将获取 id 1 的所有数据...

# php - PHP/PostgreSQL 数据库写入问题

> ID：12262011
> 
> 赞同：1
> 
> 时间：2012-09-04T10:54:48.850
> 
> 标签：php, postgresql

我在将数据从表单写入 PostgreSQL 数据库上的多个数据表时遇到问题。

这是我的数据模型

`CREATE TABLE institutions(i_id PK, name text, memberofstaff REFERENCES staff u_id);`

`CREATE TABLE staff(u_id PK, username text, password text, institution REFERENCES institutions i_id);`

所以它是1：1的关系。这些表设置得很好。这是我遇到困难的 PHP 脚本。我正在使用 CTE-datamodifying 或至少尝试使用，但我在提交时不断收到错误。

PHP：

```
 $conn = pg_connect('database information filled out in code');

       $result = pg_query("WITH x AS (

       INSERT INTO staff(username, password, institution)

       VALUES('$username', '$password', nextval('institutions_i_id_seq'))

       RETURNING u_id, i_id)

       INSERT INTO institutions (i_id, name, memberofstaff)

       SELECT x.i_id, x.u_id, '$institution'

       FROM x");

       pg_close($conn); 
```

这就是代码，我得到的错误是：

`Warning: pg_query() [function.pg-query]: Query failed: ERROR: relation "institutions_i_id_seq" does not exist LINE 3: VALUES('AberLibrary01', '', nextval('institutions_i_id_se... ^ in DIRECTORY LISTING(I replaced this) on line 22`

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:01:40.250

您是否真的创建了列类型为`institutions.i_id`并`staff.u_id`设置为的表`serial`？还是手动创建序列？

如果是前者，则无论如何都不需要显式使用`nextval`。如果是后者，请仔细检查序列名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:58:52.967

理想情况下，这将是一条评论，但我认为它*可能*与以下内容有关：

`$'password'`这应该`'$password'`在该示例的第四行。

# python - TypeError：&：“unicode”和“unicode”不支持的操作数类型

> ID：12262014
> 
> 赞同：2
> 
> 时间：2012-09-04T10:54:54.460
> 
> 标签：python, redirect, unicode, tornado, typeerror

我在 python 中有这个重定向：

```
self.redirect(self.get_argument("next", "/networks/{0}/sensors/{0}#tab3".format(netid&sensid))) 
```

生成的 URL 是正确的，例如

```
http://localhost:8000/networks/1234567812345678124/sensors/1234/rights 
```

但我从 Tornado 网络服务器收到此错误

```
self.redirect(self.get_argument("next", "/networks/{0}/sensors/{0}#tab3".format(netid&sensid)))
TypeError: unsupported operand type(s) for &: 'unicode' and 'unicode' 
```

我必须将 netid 和 sensid 都传递给页面......我必须以哪种方式编写重定向？？？？

非常感谢...

附言。我试过了

```
self.redirect(self.get_argument("next", "/networks/{0}/sensors/{0}#tab3".format(netid, sensid))) 
```

但 sensid 取 netid 的值，我有 URL

```
http://localhost:8000/networks/1234567812345678124/sensors/1234567812345678124/rights 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:00:38.017

您正在寻找：

```
self.redirect(self.get_argument("next", "/networks/{0}/sensor/{1}#tab3".format(netid, sensid))) 
```

这将放在`netid`第一个位置 ( `{0}`) 和`sensid`第二个位置 ( `{1}`)。

# java - 在类路径中指定 log4j

> ID：12262015
> 
> 赞同：1
> 
> 时间：2012-09-04T10:54:55.637
> 
> 标签：java, jar, classpath

我相信这就是我可以编译和运行使用外部库的文件的方式。我正在使用 Windows。

```
top level directory
|
|-log4-1.2.17.jar
|-MyApp.java
|-com
     |-foo
          |-Bar.java 
```

编译

```
javac -cp log4j-1.2.17.jar;. com\foo\Bar.java
javac -cp log4j-1.2.17.jar;"com\foo";. MyApp.java 
```

执行

```
java -cp log4j-1.2.17.jar;"com\foo";. MyApp 
```

编译本身失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:03:58.157

在 java 类路径中包含当前目录

```
java -cp log4j-1.2.17.jar;. MyApp 
```

[为什么必须包含当前目录](https://stackoverflow.com/questions/3706689/java-class-files-in-current-directory)：

```
The default class path is the current directory. Setting the CLASSPATH variable or using the -classpath command-line option overrides that default, so if you want to include the current directory in the search path, you must include "." in the new settings. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:05:36.970

简单的批处理脚本，用于编译所有项目

```
set COMPILED_CLASSES=.\
set TEMP_FILE=temp
dir .\*.java /s /B > %TEMP_FILE%
javac -classpath log4j-1.2.17.jar;%COMPILED_CLASSES% -d %COMPILED_CLASSES% @%TEMP_FILE%
rm %TEMP_FILE% 
```

将其添加到顶级目录并 逐步 运行
**EDIT**

```
javac ./com/foo/Bar.java -classpath log4j-1.2.17.jar 
```

下一个

```
javac ./MyApp.java -classpath log4j-1.2.17.jar;./ 
```

跑

```
java -classpath log4j-1.2.17.jar;./ MyApp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:05:13.707

Y 需要包含本地目录。如果您想在当前目录中执行此操作，则类似于：

```
javac -cp .;log4j-1.2.17.jar Bar 
```

# python - Python：检查坐标是否在圆内

> ID：12262017
> 
> 赞同：8
> 
> 时间：2012-09-04T10:55:03.403
> 
> 标签：python, turtle-graphics

> **可能重复：**
> [如何让 Turtle 识别圆圈？](https://stackoverflow.com/questions/12049536/how-can-i-make-turtle-recognize-a-circle)

![在此处输入图像描述](../Images/ac23f32ab3ded66dbaffdba1abf968c4.png)我有一个绘制几个圆圈的函数，我将在其中放置点。取决于点是否落在圆圈内，取决于颜色是否会改变。

我发现的最大问题是如何检查点是否在圆圈内。有谁知道如何计算圆内的坐标，或者他们是一种可以检查圆坐标的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T11:03:58.693

对于圆心`(x,y)`和半径的圆，如果`r`一个点`(x1, y1)`在圆内

```
(x1-x)² + (y1-y)² <= r² 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T11:03:02.447

1.  计算到圆心的（欧几里得）距离，

    ```
    sqrt((x - center_x) ** 2 + (y - center_y) ** 2) 
    ```

2.  检查结果是否小于半径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:02:24.230

要检查坐标是否位于圆上，您可以使用圆的方程

```
a² + b² = r² 
```

所以要检查点是否在圆圈内：

```
a² + b² <= r² 
```

# java - 如何确定是什么杀死了我在 Ubuntu 中的 Java 服务器？

> ID：12262018
> 
> 赞同：0
> 
> 时间：2012-09-04T10:55:04.317
> 
> 标签：java, ubuntu, kill

我有一个在 Ubuntu 机器上运行的 Java 服务器，每隔几天它就会……死掉。每个线程上的每个退出点都会留下一个日志条目，并且所有内容都包含在 try-catch 中，并且在 catch 中有一个日志条目，但是在这些神秘的关闭中，没有任何记录。

我使用简单的 nohup java -jar MyServer.jar 命令启动服务器。

有一次，我有一个终端，当这种情况发生时，我从仍然打开的状态启动它，并且出现了“KILLED”这个词。请注意，当我使用来自另一个终端的 kill 命令自己杀死服务器时，什么也没有出现。

我如何确定是什么杀死了它？

# c++ - c++ [&] 运算符

> ID：12262019
> 
> 赞同：17
> 
> 时间：2012-09-04T10:55:07.827
> 
> 标签：c++, c++11

你好，我在 Windows 文档中找到了这段代码

但我不明白是什么意思

```
[&] 
```

请你告诉我它应该做什么？

这不是 C++ 标准吗？

这是代码：

```
void parallel_matrix_multiply(double** m1, double** m2, double** result, size_t size)
{
   parallel_for (size_t(0), size, [&](size_t i)
   {
      for (size_t j = 0; j < size; j++)
      {
         double temp = 0;
         for (int k = 0; k < size; k++)
         {
            temp += m1[i][k] * m2[k][j];
         }
         result[i][j] = temp;
      }
   });
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T11:01:38.530

它引入了一个 lambda 表达式。方括号的内容表示要在 lambda 中捕获的内容。里面只有 a`&` 意味着在 lambda 中提到的并且可以在其范围之外找到的所有内容都通过引用捕获。

例子：

```
int a = 0;
auto l = [&]() { 
  ++a; // a refers to the a outside of this scope through a reference
}
l(); // execute the lambda 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-04T10:57:07.133

It is a C++11 feature and is called the *lambda capture clause*. In this case, the `[&]` makes available to the lambda function all of the arguments to the `parallel_matrix_multiply()` function by reference.

See [lambda functions](http://en.cppreference.com/w/cpp/language/lambda) for more information.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-04T10:56:44.367

It is feature of `C++11` standard. [lambda](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-04T11:03:13.850

这是用于 lambda 表达式的捕获子句。lambda 表达式可以访问其封闭范围的所有变量（即，如果 lambda 在函数内，它可以访问该函数内的所有变量）。这`[&]`意味着 lambda 将*通过引用*获取所有变量。它们也可以*按值取值*，在这种情况下你会使用`[=]`. 您还可以指定需要以特定方式获取的具体变量，例如以下代码：

```
[&X, =] 
```

意味着 lambda 将`X`通过引用获取变量，并通过值获取所有其他变量。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-04T11:05:11.593

[&] 表示您可以从 lambda 表达式中的周围代码访问变量，并且可以通过引用访问（即您可以修改它们）。在示例代码中，您可以看到`m1, m2, result`和`size`在 lambda experssion 中使用，即使它们没有作为参数传递。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-04T10:58:36.867

这是一个 Lambda 函数，C++ 11 特性

```
[&](size_t i){...} 
```

将充当回调或仿函数。所以你不需要在其他地方写另一个函数来传递给parallel_for。

# perl - 如何解决解析器语法中的移位/减少冲突

> ID：12262023
> 
> 赞同：0
> 
> 时间：2012-09-04T10:55:14.337
> 
> 标签：perl, parsing, grammar, yacc

我正在学习如何编写解析器，为此，我正在为 SQL 编写解析器。

我正在写的语法是由 perl [Parse::Eyapp](http://search.cpan.org/~casiano/Parse-Eyapp/)模块处理的，它与标准的 yacc 非常相似。

当我添加对单操作数运算符的支持（不确定什么是正确的名称 - 运算符，如 12! 或 @@ 'value'）时，将语法编译为 perl 时，我得到：

```
14 shift/reduce conflicts 
```

我之前也有过，但我通过添加适当的 %left 和 %right 解决了这个问题，但这次我不知所措，因为问题似乎来自 1 操作数运算符和更传统的 2 操作数运算符之间的冲突。

完整的语法太长了，放在这里，所以我只是[链接到它](https://raw.github.com/depesz/Pg-SQL-Parser/master/helper/SQL.eyp)。

要编译它，我使用命令：

```
eyapp -m Pg::SQL::Parser::SQL -o SQL.pm SQL.eyp 
```

在启用详细信息的情况下运行`eyapp ...`时，我得到[了这个输出](https://gist.github.com/3620078)。

所以，问题是：如何解决这里的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:33:23.990

啊。看来我误诊了问题。问题的真正原因不是一元运算符，而是强制转换 (expr '::' normal_type)。

在优先级配置的末尾添加 %left '::' 解决了这个问题。

如果你好奇 -[提交链接](https://github.com/depesz/Pg-SQL-Parser/commit/49105093587a91285ca799b4246eebc96a2fb406#diff-1)。

# c# - 带有枚举的 C# 静态类

> ID：12262024
> 
> 赞同：2
> 
> 时间：2012-09-04T10:55:18.683
> 
> 标签：c#, enums, static-class

我有一个棘手的问题困扰了我一段时间。我有以下代码声明...

```
namespace ESEGURCI.WEB.BusinessLogicLayer.Commons
{
    public static class ParameterUtilities
    {
        public enum ParameterEnum
        {
            MAX_LOGIN_ATTEMPTS,
            AUDIT_MODIFICATIONS
        }
    }
} 
```

我这样称呼代码“ **ParameterUtilities.ParameterEnum.MAX_LOGIN_ATTEMPTS** ”问题是每个满月我都会在这一行收到错误“对象引用未设置为对象的实例”......就像代码只能工作99.9％的时间...

我唯一想到的是，由于枚举是一种值类型，因此当调用静态类时枚举有可能为空......但我找不到任何关于这种行为的文档......

有人能告诉我为什么会这样吗？我知道我可能应该从静态类中删除枚举，并将枚举声明为独立的，但我想知道为什么会首先发生这种情况......

谢谢，

**更新**

好的，对于要求更多代码的每个人，以下是发生错误的完整功能......

```
 public static int GetPageSize(int companyId)
    {
        int pageSize = 0;

        // error happens bellow this line

        ESEGURCI.WEB.BusinessLogicLayer.Entities.Parameter parameter = ESEGURCI.WEB.BusinessLogicLayer.Entities.Parameter.GetParameter(ParameterUtilities.ParameterEnum.AUDIT_MODIFICATIONS.ToString(), companyId);

        // error happens above this line

        int.TryParse(parameter.Value, out pageSize);

        return pageSize;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T10:58:01.157

`ParameterUtilities.ParameterEnum.MAX_LOGIN_ATTEMPTS`无论月球长什么样，都不会抛出空引用异常。该错误可能是由同一行上的其他指令触发的（分配给变量？）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:28:17.403

一个`enum`不可能`null`。

按照下面的清单拆分该行并查看哪个语句引发了异常。我敢打赌它发生在某处`Parameter.GetParameter()`：

```
using ESEGURCI.WEB.BusinessLogicLayer.Entities;

// ...

var auditModifications = 
    ParameterUtilities.ParameterEnum.AUDIT_MODIFICATIONS.ToString();
var parameter = Parameter.GetParameter(auditModifications, companyId); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:58:45.413

枚举（和任何其他类型）不能有空值，因为它不是一个值而是一个类型。

异常是由其他东西引发的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T11:26:55.320

如前所述，您`enum`不会是错误的来源。根据您的更新，我会说 NRE 很可能来自您的`GetParameter`方法。

# reporting-services - SSRS Keep Together 属性不起作用

> ID：12262026
> 
> 赞同：5
> 
> 时间：2012-09-04T10:55:26.850
> 
> 标签：reporting-services

我有一个报告页面，在里面，靠近页面的末尾有一个 6x3 的表格。当我运行报表时，第一行显示在第一页，其他 5 行显示在第二页，即使 keep together 属性设置为 True。Keep Together 属性是否意味着将所有行保持在一起。我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:02:26.333

keep together 属性尝试将各个行保留在同一页面上，而不是所有行。即，如果您有一个详细的行，其中包含跨越多行的内容，则在可能的情况下仍将它们一起保存在同一页面中。

一种可能的解决方案可能是在该页面中放置一个矩形，并将表格放在矩形内。不是 100% 确定它会起作用，但那是我会尝试的。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-09T22:12:12.643

我遇到了同样的问题。解决方案是右键单击表格，添加组，然后将您想要完整的所有内容放在同一个组中。

# database - 将 JvEdit 与 JvDataSource 一起使用会引发访问冲突

> ID：12262027
> 
> 赞同：2
> 
> 时间：2012-09-04T10:55:32.110
> 
> 标签：database, delphi, jvcl

我正在尝试使用`JvEdit`and`JvDataSource`而不是`DBEdit`and `DataSource`。但是在设计时，每当我打开一个带有 a 的表单时`JvEdit`，我都会收到此错误：

**模块“dbrtl160.bpl”中地址 xxxxxxxx 的访问冲突。读取地址 00000000。忽略错误并继续？注意：忽略此错误可能会导致组件被删除或属性值丢失。**

> 并且没有丢失任何组件或属性值......只是一个烦人的消息。

有没有人遇到过同样的问题`JvEdit`？我试图重新安装`JCL`和`JVCL`使用安装程序，并通过手动重建软件包，但无济于事。

* * *

这是在运行时引发相同的访问冲突后我的应用程序的堆栈跟踪：

```
00724ecb +08f LIMS.exe     Data.DB          12439   +9 TDataSet.Resync
007d1cf4 +034 LIMS.exe     Data.Win.ADODB    4421   +3 RefreshBuffers
007d1d39 +039 LIMS.exe     Data.Win.ADODB    4425   +1 TCustomADODataSet.GetFieldData
00713cd1 +08d LIMS.exe     Data.DB           4538   +8 TField.GetData
00716476 +012 LIMS.exe     Data.DB           5650   +2 TIntegerField.GetValue
007162f1 +00d LIMS.exe     Data.DB           5595   +1 TIntegerField.GetAsString
007fdae4 +00c LIMS.exe     JvDataSource                TJvDataSource.GetFieldString
00728ae4 +010 LIMS.exe     JvDataSourceIntf            TJvDataConnectorField.GetAsString
0073a83d +03d LIMS.exe     JvEdit                      TJvCustomEditDataConnector.RecordChanged
00728412 +02e LIMS.exe     JvDataSourceIntf            TJvDataConnector.DcRecordChanged
00728301 +00d LIMS.exe     JvDataSourceIntf            TJvDataConnector.Notify
0072825b +007 LIMS.exe     JvDataSourceIntf            TJvDataConnector.ActiveChanged
00728848 +00c LIMS.exe     JvDataSourceIntf            TJvFieldDataConnector.ActiveChanged
00728395 +011 LIMS.exe     JvDataSourceIntf            TJvDataConnector.DcActiveChanged
00728301 +00d LIMS.exe     JvDataSourceIntf            TJvDataConnector.Notify
0072835b +00f LIMS.exe     JvDataSourceIntf            TJvDataConnector.DataSourceConnected
007288ec +00c LIMS.exe     JvDataSourceIntf            TJvFieldDataConnector.DataSourceConnected
00728747 +0d3 LIMS.exe     JvDataSourceIntf            TJvDataConnector.SetDataSource
0046be07 +06b LIMS.exe     System.TypInfo    1909   +8 {System.TypInfo}TPropSet<System.IInterface>.SetProc
0046b112 +00a LIMS.exe     System.TypInfo    3033   +0 SetInterfaceProp
00481a58 +05c LIMS.exe     System.Classes    7266   +5 TPropIntfFixup.ResolveReference
00481d21 +0d5 LIMS.exe     System.Classes    7347  +24 GlobalFixupReferences
00484009 +279 LIMS.exe     System.Classes    8514  +53 TReader.ReadRootComponent
00480456 +032 LIMS.exe     System.Classes    6601   +3 TStream.ReadComponent
0047b1df +057 LIMS.exe     System.Classes    3455   +7 InternalReadComponentRes
0047b34f +05f LIMS.exe     System.Classes    3512   +4 InitComponent
0047b3dd +061 LIMS.exe     System.Classes    3524   +6 InitInheritedComponent
005f93b2 +0c6 LIMS.exe     Vcl.Forms         3554  +17 TCustomForm.Create
009567a9 +015 LIMS.exe     uMainForm          147   +1 TfrmMainForm.acInsurancesExecute
0048bd2f +00f LIMS.exe     System.Classes   13372   +3 TBasicAction.Execute
004f60d5 +031 LIMS.exe     Vcl.ActnList       448   +8 TContainedAction.Execute
004f6ec0 +050 LIMS.exe     Vcl.ActnList      1094   +7 TCustomAction.Execute
0048bbf3 +013 LIMS.exe     System.Classes   13301   +2 TBasicActionLink.Execute
005e9734 +090 LIMS.exe     Vcl.Menus         2520  +17 TMenuItem.Click
005ead4f +013 LIMS.exe     Vcl.Menus         3435   +5 TMenu.DispatchCommand
0060af75 +121 LIMS.exe     Vcl.Forms        14151  +26 TFormStyleHook.TMainMenuBarStyleHook.TrackMenuFromItem
006087fa +022 LIMS.exe     Vcl.Forms        12959   +7 TFormStyleHook.TMainMenuBarStyleHook.ProcessMenuLoop
006086a0 +02c LIMS.exe     Vcl.Forms        12897   +6 TFormStyleHook.TMainMenuBarStyleHook.MenuEnter
0060aa88 +024 LIMS.exe     Vcl.Forms        14009   +4 TFormStyleHook.TMainMenuBarStyleHook.MouseDown
0060db08 +0cc LIMS.exe     Vcl.Forms        15529  +35 TFormStyleHook.WMNCLButtonDown
005c913b +07b LIMS.exe     Vcl.Themes        6709  +13 TStyleHook.WndProc
005c9318 +000 LIMS.exe     Vcl.Themes        6810   +0 TMouseTrackControlStyleHook.WndProc
0060d91c +000 LIMS.exe     Vcl.Forms        15436   +0 TFormStyleHook.WndProc
005c8b02 +05a LIMS.exe     Vcl.Themes        6485  +17 TStyleHook.HandleMessage
0098c05a +116 LIMS.exe     Vcl.Styles        3387  +26 TStyleEngine.HandleMessage
005c6078 +054 LIMS.exe     Vcl.Themes        5145  +11 TStyleManager.HandleMessage
0051594b +00f LIMS.exe     Vcl.Controls      8936   +0 TWinControl.DoHandleStyleMessage
00516f7d +049 LIMS.exe     Vcl.Controls      9825   +1 TWinControl.WndProc
005faafd +60d LIMS.exe     Vcl.Forms         4344 +201 TCustomForm.WndProc
00516b3c +02c LIMS.exe     Vcl.Controls      9689   +3 TWinControl.MainWndProc
0048ca24 +014 LIMS.exe     System.Classes   13878   +8 StdWndProc
75f5cc6b +00a USER32.dll                               DispatchMessageW
00603cef +0f3 LIMS.exe     Vcl.Forms        10164  +23 TApplication.ProcessMessage
00603d32 +00a LIMS.exe     Vcl.Forms        10194   +1 TApplication.HandleMessage
00604071 +0c9 LIMS.exe     Vcl.Forms        10332  +26 TApplication.Run
009af892 +0de LIMS.exe     LIMS                61  +15 initialization
76dced6a +010 kernel32.dll                             BaseThreadInitThunk 
```

我可以通过删除这一行来制作它：

```
qInsurances.Active := True; 
```

似乎`JvDataSource`没有检查关联`DataSet`以查看它是否打开。

* * *

**检查并确认**。`DataConnector`链接不检查`DataSet`是否打开。如果 my`DataSet`在设计时打开，则不会引发异常。

* * *

这些是引发异常的过程的前几行。`VCL`现在，在检查源代码方面，我不是专家。那么，有人可以指导我正确的方向吗？

```
procedure TDataSet.Resync(Mode: TResyncMode);
var
  Count: Integer;
begin
  if not IsUniDirectional then
  begin
    if rmExact in Mode then
    begin
      CursorPosChanged;
      if GetRecord(FBuffers[FRecordCount], gmCurrent, True) <> grOK then
        DatabaseError(SRecordNotFound, Self);
    end else
      if (GetRecord(FBuffers[FRecordCount], gmCurrent, False) <> grOK) and // <<-- Exception is raised here!
        (GetRecord(FBuffers[FRecordCount], gmNext, False) <> grOK) and
        (GetRecord(FBuffers[FRecordCount], gmPrior, False) <> grOK) then 
```

# windows - 回显文字字符串？

> ID：12262037
> 
> 赞同：2
> 
> 时间：2012-09-04T10:56:24.053
> 
> 标签：windows, command-line, cmd, command-prompt, xp-cmdshell

我有一个 SQL 过程，它调用命令 shell 将 SQL 转储写入文件。以这个编辑过的文件为例：

```
VALUES(
  @SomeVar
  ,1
) 
```

该过程调用：

```
echo VALUES(>> C:\somefile.sql
echo @SomeVar>> C:\somefile.sql
echo ,1>> C:\somefile.sql
echo )>> C:\somefile.sql 
```

这工作正常，除了`,1`线。如果你`echo ,1>> C:\somefile.sql`在 CMD 中运行，你会看到 C:\somefile.sql 只包含`,`

我的理论是`echo` *认为*它可以接受超过 1 个参数。

如果将命令修改为`echo ,1blah>> C:\somefile.sql`，它可以完美运行。

我可以修改我的程序以检查该行是否包含 a`,`后跟一个数字，而不是任何内容，并`^`在数字前添加以对其进行转义。不过，这有点痛苦。

另外，`echo 1>> C:\somefile.sql`写`Echo is ON`

有没有办法`echo`在 CMD 中使用文字字符串？将字符串包含在`" "`输出`"`标记中。或者有没有其他你能想到的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:04:25.760

问题是批处理文件 / 中[标准输出流](http://www.robvanderwoude.com/battech_redirection.php)`1`的文件描述符。您可以改用此行来解决此问题：`CMD.EXE`

```
echo ,1 1>> C:\somefile.sql 
```

或者，但更脆弱，只是在`1`和`>>`重定向之间放一个空格

```
echo ,1 >> C:\Somefile.sql 
```

*更新*：如果您真的担心上述示例的尾随空格，您也可以使用

```
>> C:\Somefile.sql echo ,1 
```

即你也可以把重定向放在命令前面。个人觉得看起来有点别扭，不过YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T07:40:15.650

你有几条路线可以去这里：

1.  将重定向放在行首：

    ```
    > file echo foo 
    ```

2.  把`echo`括号括起来：

    ```
    (echo foo) > file 
    ```

在后一种情况下，您*必须*将右括号转义为`^)`，在前一种情况下，您*可能*必须这样做，具体取决于周围代码的外观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:26:35.930

转义尾随数字。

```
echo ,^1> C:\Somefile.sql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:04:25.913

您可以输出文字字符串。echo 的所有参数都被重定向。问题是您的字符串和重定向之间没有空格。`1>`并且`1>>`是`>`（管道输出到文件，如果存在则替换）和`>>`（管道输出并附加到文件，如果不存在则创建它）的特殊版本。它们重定向标准输出（C++ 中的标准输出，C# 中的 Console.Out）。`2>`并`2>>`重定向标准错误输出（C++ 中的 stderr，C# 中的 Console.Error）。

例如：

```
echo 111 > a.txt
echo 111 1> a.txt 
```

是等价的。

# android - 以 USB 大容量存储模式（通过手机）连接时，有时在 PC 上看不到 SD 卡数据

> ID：12262044
> 
> 赞同：0
> 
> 时间：2012-09-04T10:56:35.753
> 
> 标签：android, linux, linux-kernel, usb

> **可能重复：**
> [SDCard 内容存在但看不到它们](https://stackoverflow.com/questions/10643476/sdcard-content-exist-but-cant-see-them)

手机运行 Linux Kernel(2.6.31) 并插入 SD 卡。

[ISSUE] 当数据写入 SD 卡（写入系统调用）时，写入成功返回。但是，当卡（通过电话）作为 PC 上的大容量存储设备访问时，看不到数据。

只有在物理移除卡并重新插入，然后在 PC 上将其作为大容量存储设备访问后，才会显示写入的数据。写入数据后尝试 fsync()。还是不会显示。

内核在将数据写入 SD 卡之前是否维护缓存？如果是这样，我如何确保它已刷新到 SD 卡？

[编辑] 移除标签 MMC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:20:14.500

[您的问题是存在 SDCard 内容](https://stackoverflow.com/questions/10643476/sdcard-content-exist-but-cant-see-them)的完全相同的副本，但看不到它们- PC 正在显示从 MTP 界面返回的内容。

存根代码来执行使文件出现所需的操作：

进口：

```
import android.media.MediaScannerConnection;
import android.os.Environment;
import android.util.Log;
import java.io.File; 
```

存根代码：

```
File f = new File(Environment.getExternalStorageDirectory().getPath() + "/hello_nurse.txt");
if (! f.exists()) {
    try {
        f.createNewFile();
        String[] files = new String[1];
        files[0] = Environment.getExternalStorageDirectory().getPath() + "/hello_nurse.txt";
        String[] mimes = new String[1];
        mimes[0] = "text/plain";
        MediaScannerConnection.scanFile(getApplicationContext(), files, mimes, null);
    } catch (Exception ex) {
        Log.e("SD Create", "Failed to create file", ex);
        return;
    }
} else {
    Log.e("SD Create", "File is already present");
} 
```

# android - 在 Android 应用上添加新的更新

> ID：12262047
> 
> 赞同：1
> 
> 时间：2012-09-04T10:56:43.620
> 
> 标签：android

我是 Android 的初学者，因为我正在开发一个新的 Android 应用程序。在我的项目中，当用户单击一个图标时，我遇到了一些问题，它应该将他重定向到我在代码中所做的 dot net 网站。

1.  如果我想更新客户手机上的 apk 文件以进行更新，它应该提示用户下载新版本。我怎样才能做到这一点？

2.  另外我怎么知道这个应用程序在客户设备上的许多应用程序之间属于我？

3.  我想获取客户设备上可能发生的错误和错误。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:07:36.553

1.  2.

如果您在 Google Play 商店中发布您的应用程序，更新将由 Google 自动管理。您可以在 Google Play 商店中发布该应用程序的另一个版本，Google 会通知所有用户有新版本可用。

3.

If you release your app in the Google Play Store bugs will be reported automatically by Google to your Google-Mail Account.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:04:49.657

最好在您的应用程序中实现 GCM 推送服务，以向您的所有应用程序用户发送有关更新的通知。

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

该框架将使您的应用程序支持从您的服务器推送通知用户，您需要在应用程序中执行的操作只是跟踪收到的推送并编写代码以从服务器下载新的 APk 并自动安装它。

您询问崩溃报告的第二件事，因此最好的选择是使用[ACRA](http://code.google.com/p/acra/wiki/BasicSetup)技术在服务器上获取您的应用程序报告，一切都强制关闭或 logcat

两者都很容易实现，所以享受吧！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:09:05.477

At first use [GCM](http://developer.android.com/guide/google/gcm/index.html) for push notifications like updates for your application. Second use[Google Analytics for any bug report crashes usage](https://developers.google.com/analytics/devguides/collection/android/resources)

# mysql - Visual Studio 2010 Ultimate fails to connect to MySql

> ID：12262048
> 
> 赞同：0
> 
> 时间：2012-09-04T10:56:48.537
> 
> 标签：mysql, visual-studio-2010, ms-access, ms-access-2007

I have two database. One in **Access 2007** and another remote in **MySQL**. The Access 2007 has to update the MySQL database. In Visual Studio there is tool under `Data-->New Data Comparison` which seems to compare the databases and synchronize them.

I have two challenges:

1.  Connect to MySQL database. It defaults to `port 3306` and this is not the port I want.
    How do I change the that port to 3307 ?

2.  How to make this database show on Data Comparison so that I can compare my two databases i.e access 2007 and MySQL.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:24:47.633

关于你的第一个问题：

您可以将端口号更改为`3307`来自`my.cnf`文件。

`Stop MySQL [3306] -> modify my.cnf ->Start MySQL [3307].`.

# java - Drop If Exists query in Java App

> ID：12262051
> 
> 赞同：1
> 
> 时间：2012-09-04T10:56:53.910
> 
> 标签：java, sql-server, for-loop

I've tried looking for a similar question but I could find one, so I'll post one! I'm creating a Java program that drops certain tables for me, MySQL one looks like this:

```
String[] tablesToDrop = new String[]{tableName,tableName2};
Connection con = DriverManager.getConnection(dbUrl, userName,password);
Statement stmt = con.createStatement();

for (int i = 0; i < tablesToDrop.length; i++) {
                System.out.println("Dropping " + tablesToDrop[i] + " Table..");
                stmt.executeUpdate("DROP TABLE IF EXISTS " + tablesToDrop[i]);
            } 
```

My question is how would this look for SQL Server 2008 version? the stmt.executeUpdate(???); part? I want to drop a table if it exists, getting the table names from an array and passing it into a for loop.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:03:47.227

Java 通过驱动程序与 DB 通信。它必须对应用程序程序员绝对透明。因此，MySql 和 MS SQL 服务器之间没有区别。换个驱动就好了。

然而，这可能是 SQL 方言的差异。通常人们会尝试通过使用 Java 到 DB 的映射框架（例如 JPA、Hibernate 等）来避免这种差异，但由于您使用的是普通 JDBC，因此这是您的责任。

我认为你现在正在尝试的那句话会奏效。但是对于将来，如果您想使用纯 JDBC 并支持多种数据库类型，我建议您将 SQL 语句保存在单独的文件（例如属性文件）中并从那里读取它们。您甚至可以使用 SQL 方言作为“语言环境”来滥用 ResouceBundle 机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T11:05:56.453

```
IF EXISTS(select * from sysobjects where name='tblname') drop table tblname 
```

# javascript - Best practice to check for available props or methods in javascript?

> ID：12262058
> 
> 赞同：3
> 
> 时间：2012-09-04T10:57:14.697
> 
> 标签：javascript

I've seen many different ways of checking for available properties or methods in javascript.

```
if(typeof window.somePropOrMethod​ !== "undefined"){ }

if(window.hasOwnProperty("somePropOrMethod")){ }

if("somePropOrMethod" in window){ }

if(!!window.somePropOrMethod) { } 
```

Which one should I use, and why? Is it all up to personal preference or are there subtle differences between them?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:03:04.380

这取决于具体情况以及您希望测试的严格程度。

1.  不检查`somePropOrMethod`属性是否在特定对象上定义；它只检查它是否在继承链中。通常这无关紧要。特别是在检查`window.`它时，但是，特别检查“somePropOrMethod”属性**不是** `undefined`

    ```
    function Foo() {

    }
    Foo.prototype.bar = 4;
    Foo.prototype.baz = undefined;

    var x = new Foo();

    typeof x.bar​ !== "undefined"; // true, but "x" doesn't actually have a bar attribute; it's in the inheritance chain
    typeof x.baz​ !== "undefined"; // false 
    ```

2.  检查特定对象是否拥有该属性并从其搜索中排除继承链；但它不检查`somePropOrMethod`不是未定义的。

    ```
    window.foo = undefined;
    window.hasOwnProperty("foo"); // true; but it's undefined

    // any properties on window.__proto__ will return false 
    ```

3.  与第一个相同，只是它不检查`undefined`; 它只是检查对象是否有*一些*成员（可能是未定义的）。

4.  这将检查对象及其继承链（即#1 和#3 区域），但仅检查*真*值；

    ```
    window.foo = false;
    window.bar = 0;
    window.baz = null;

    !!window.foo; // false
    !!window.bar; // false
    !!window.baz; // false 
    ```

* * *

当然，你*应该*做的是，如果你想要一个*方法*，你应该检查它是一个函数；

```
if(typeof window.someMethod​ !== "function"){ } // specifically check for a function 
```

并且您应该对其他属性（等，甚至使用关键字）执行相同`string`的`number`操作`instanceof`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:00:46.887

第一个将告诉您是否定义了属性。它可以存在而不被定义。

第二个将告诉您对象是否直接具有该属性（但如果它通过原型继承它则不会）。

第三个将告诉您该对象是否具有该属性。

第四个将告诉您是否具有真值（`{ number_of_children: 0 }`不是）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:08:32.227

*   `if(typeof window.somePropOrMethod​ !== "undefined"){ }`

检查是否`somePropOrMethod`是 的属性，`window`其值不是`undefined`.
[直接检查对象及其原型链]

*   `if(window.hasOwnProperty("somePropOrMethod")){ }`

检查对象本身是否*显式*`somePropOrMethod`存在( )，*无论其值如何*（与 #1 不同） [仅直接在对象上检查]*`window`*

 ***   `if("somePropOrMethod" in window){ }`

检查是否`somePropOrMethod`可以在对象本身**或其**原型链上找到，*无论其值如何*（与＃1不同）
[直接检查对象及其原型链]

*   `if(!!window.somePropOrMethod) { }`

这里发生的是获取 的值`somePropOrMethod`并将其转换为布尔值。如果`somePropOrMethod`是`undefined`或任何其他*虚假值*，则结果将始终为`false`，否则`true`
[直接检查对象及其原型链]**

# java - getResourceAsStream() returns null

> ID：12262062
> 
> 赞同：4
> 
> 时间：2012-09-04T10:57:30.487
> 
> 标签：java, libgdx

I have the following problem

```
InputStream input = FileHandle.class.getResourceAsStream("/data/sounds/back.ogg"); 
```

returns null, but

```
InputStream input = FileHandle.class.getResourceAsStream("/data/sounds/back.png"); 
```

returns InputStream, also both files are in this folder. What can be wrong?

I'm using libgdx-0.9.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:13:12.947

如果您的路径以“/”开头，java 将在文件系统的根目录中搜索您的文件。

如果它在您的根文件夹中，首先检查文件是否存在：

```
ls -l /data/sounds/ | grep "back.ogg" 
```

如果它不存在或您没有权限，那么您有答案。

如果它存在，你可以尝试另一种方法来获取它的 InputStream：

```
InputStream is = new FileInputStream("/data/sounds/back.ogg"); 
```

# windows-runtime - Is there a way to conditionally exclude content in vs2012 WinRT app

> ID：12262064
> 
> 赞同：1
> 
> 时间：2012-09-04T10:57:34.800
> 
> 标签：windows-runtime, visual-studio-2012

I have a Windows 8 Metro project, and intend to use the WindowsApplicationModel.Store.CurrentApp and CurrentAppSimulator classes to implement trial mode.

In the build we release to the store, the app must not reference CurrentAppSimulator.

My first idea was to include my trial-mode.xml to feed to ReloadSimulatorFile async in my project, but mark it with a Build Action: None, and Copy to Output Directory: Always

I then tried to open the file with

```
var package = Windows.ApplicationModel.Package.Current;
var sfolder = package.InstalledLocation;
var sfolder2 = await sfolder.GetFolderAsync("Assets/data");
var sfile = await sfolder2.GetFileAsync("trial-mode.xml"); 
```

however, this fails to find the file, which doesn't appear in the output folder.

So two questions. What does Copy to Output Directory actually do, and secondly is there a way to conditionally include the file, as I don't really want to ship trial-mode.xml in the final build.

# sencha-touch-2 - Sencha Touch 2 Ext.create and Ext.Define

> ID：12262065
> 
> 赞同：1
> 
> 时间：2012-09-04T10:57:38.840
> 
> 标签：sencha-touch-2

I am following sencha touch 2 video tutorial:: [http://docs.sencha.com/touch/2-0/#!/guide/getting_started](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)

In that the instructor uses Ext.Define to define panels. He then loads it into main.js and app.js

But the document thats below that [http://docs.sencha.com/touch/2-0/#!/guide/first_app](http://docs.sencha.com/touch/2-0/#!/guide/first_app) uses Ext.create to create panels on launch

Video worked fine until he was showing simple panels, but when he extended a form panel, it stopped working. Video looks 5 months old and its official video.

Should I stop using Ext.Define and start Ext.create, because the examples do that. Please guide me on this.

Completely confused on this...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:25:15.137

定义类时使用 Ext.define。您将只使用一次 Ext.define 来创建一个类。

Ext.create 用于使用上述命令创建已定义类的实例。您将根据需要使用小部件的次数多次使用它。

# php - build prepared statement from array and pass variable to execute

> ID：12262066
> 
> 赞同：2
> 
> 时间：2012-09-04T10:57:44.463
> 
> 标签：php, prepared-statement

How to pass variable in loop to execute ??? example from one answer here...

```
$placeholders = array_fill(0, count($array), '?');

$keys = $values = array();
foreach($array as $k => $v) {
    $keys[] = $k;
    $values[] = !empty($v) ? $v : null;
}

$stmt = $mysqli->stmt_init();
$query = 'INSERT INTO `'.DB_TABLE_PAGES.'` '.
         '('.implode(',', $keys).') VALUES '.
         '('.implode(',', $placeholders).')';
$stmt->prepare($query);

call_user_func_array(
    array($stmt, 'bind_param'), 
    array_merge(
        array(str_repeat('s', count($values))),
        $values
    )
);

$stmt->execute(); 
```

but what about multiple array. I want add to db 10000 values but not build and bind statement every pass.. Is it possible ? So I want build statement from array, bind params (i don't know how). Than in loop pass variable (identificated by key) and execute...

something universal if I don't wont write statement for every table (just make array of column names and variables)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:04:45.940

使用准备好的语句和 mysqli 时，您需要做的就是更改存储在绑定参数中的值并再次运行 execute。这是绑定参数的要点，以允许多次执行语句而无需重新发送查询的开销（本质上也是一个很好的安全性，但这是题外话。）

举个例子：

```
$param1 = '';
$param2 = '';
$param3 = '';
$param4 = '';
$query = 'INSERT INTO table VALUES (?, ?, ?, ?)';
$format = 'ssss';
$params = array(&$param1, &$param2, &$param3, &$param4);
$stmt = $mysqli->stmt_init();
$stmt->prepare($query);
$params = array_merge(array($format), $params); #set up format and parameters for binding
call_user_func_array(array($stmt, 'bind_param'), $params); #parameters specified so bind them

foreach($data as $data_point){
    $param1 = $data_point[0];
    $param2 = $data_point[1];
    $param3 = $data_point[2];
    $param4 = $data_point[3];
    $stmt->execute();
} 
```

这将准备您的语句，然后遍历存储在 $data 中的数据，获取每个值，将其放入准备好的参数中，然后使用新参数执行语句。

里程会因此特定代码而异，因为它不对 sql 错误语句进行任何检查，并且对于许多应用程序在一次插入中执行几行可能会更有效。

# angularjs - AngularJS - 模板：ngInclude 指令

> ID：12262067
> 
> 赞同：4
> 
> 时间：2012-09-04T10:57:46.847
> 
> 标签：angularjs

我的模板包含 JS，因为它们被称为 JS 未执行，请您有一个想法。

例如，在我的 JS 文件 script.js 中，我有适用于模板中 HTML 元素的方法，但它不起作用，请提供一个想法。

例子 ：

索引.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body ng-app>
    <ng-include src="'header.html'"></ng-include>
    <script src="angular.js"></script>
    <script src="jquery.js"></script>
    <script src="script.js"></script>
</body>
</html> 
```

header.html

```
<div id="header">
<div id="logo">AngularJs</div>
<div id="nav"></div>
</div> 
```

脚本.js

```
$(document).ready(function(){
    $('#nav').html('<ul><li><a href="">Link<a></li></ul>');
}); 
```

该脚本执行良好，我感觉它没有找到元素 div#nav。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T15:06:58.973

Youssef 提供的解决方案可以“更加 Angular”，并且不需要 jQuery：

```
<!-- template2.html -->
<script type="text/ng-template" id="template2.html">
    <p ng-class="color">Content of template2.html</p>
</script>

$scope.myFunction = function() {
    $scope.color = 'red';
} 
```

[http://jsfiddle.net/mrajcok/MfHa6/](http://jsfiddle.net/mrajcok/MfHa6/)

在 Angular 世界中，我们尝试更改模型属性（例如，$scope.color）并让视图自动更新。我们尽量不通过 ID 或 jQuery 选择器查找元素，并且我们尽量避免在控制器中进行 DOM 操作——例如，$('#tpl2').addClass('red');

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:58:26.643

对不起，我读错了你问题的一部分，我的错误。

jQuery 的 DOM 就绪语句可能无法正常工作。您可以在 ngInclude 标记上添加一个 onload="FUNCTION_NAME" ，其中包含您在 script.js 中指定的 DOM 版本

有关更多信息，请查看此处的文档：http://code.angularjs.org/1.0.1/docs-1.0.1/api/ng.directive: [ngInclude](http://code.angularjs.org/1.0.1/docs-1.0.1/api/ng.directive:ngInclude)

--- 旧帖 ---

@YoussefElMontaser，您不必在 ngInclude 上加上引号：

```
<ng-include src="header.html"></ng-include> 
```

可能这就是你的脚本没有前进的问题。让我知道这是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:53:30.697

我找到了解决方案：

[http://jsfiddle.net/esjeY/](http://jsfiddle.net/esjeY/)

**HTML**

```
<div ng-app="">
    <div ng-controller="Ctrl">
        <select ng-model="template" ng-options="t.name for t in templates">
            <option value="">(blank)</option>
        </select>
        url of the template: <tt>{{template.url}}</tt>
    </div>
    <div ng-include src="template.url" onload='myFunction()'></div>
</div> 
```

**JS**

```
function Ctrl($scope) {

    $scope.templates = [{
        name: 'template1.html',
        url: 'template1.html'
    }, {
        name: 'template2.html',
        url: 'template2.html'
    }];

    $scope.template = $scope.templates[0];

    $scope.myFunction = function() {

        $('#tpl2').addClass('red');            
    }
} 
```

@guiligan：感谢您的帮助。

# xcode - Xcode 没有检测到我的设备

> ID：12262076
> 
> 赞同：39
> 
> 时间：2012-09-04T10:58:05.460
> 
> 标签：xcode, ipad, device

我最近将 iPad 设备操作系统版本升级到 5.1.1 (9B206)。我的 Xcode 没有检测到我的设备。我只是在我的 Xcode 中获得 iOS 设备和模拟器选项。但是我的设备使用的是旧版本的 Xcode 和 iTunes。为此，我将我的 MAC OS 版本更新为 10.7.4，将 Xcode 版本更新为 4.3.3。但我仍然面临同样的问题。现在如何让我的 Xcode 检测到我的设备？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2016-06-20T16:47:13.343

这对我有用。

*   退出 Xcode。
*   断开设备。
*   在终端窗口中，键入：（`sudo pkill usbmuxd`它将自动重新启动）
*   重启 Xcode
*   连接设备

您的设备现在应该在 Xcode 中再次可见！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-04T11:29:24.157

在 Xcode 中打开管理器，转到设备，找到您的设备并单击用于开发的选项

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-05-18T09:00:00.540

我刚刚插入另一个 USB 端口，它被设备检测到。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-04T02:35:33.183

在另一种情况下，检查“构建设置”中的“iOS 部署目标”，如果目标 iOS 版本号大于设备版本，则该设备将不会显示在列表中。

也就是说，“iOS 部署目标”== 7.0，并且设备版本为 6.0，通过将“iOS 部署目标”更改为 6.0 或更低版本来解决问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-30T07:11:23.520

我在 Xcode 中也遇到了同样的问题，更新 Xcode 最新版本（7.3.1）后没有检测到我的设备

按照网络搜索中的建议做了很多事情，但仍然没有检测到设备。

最后，我只是退出并打开检测到我的设备的 Xcode（哦，我的错）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-31T22:31:34.673

如果选择的答案仍然对您不起作用，请尝试以下操作：

1.  在项目资源管理器中选择项目
2.  在主窗口中选择目标
3.  选择构建设置
4.  选择部署
5.  选择 iOS 部署目标。将其更改为您的设备版本。（例如 iOS 5.1）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-30T17:30:57.497

最近，Xcode 8.3 和 iOS 10.3 似乎在 Xcode 访问 iPad/iPhone 方面具有更高的安全性。我的顺序：

*   重启机器，
*   附上iPad，
*   在 iMac 和 iPad 上都经历了“信任这台计算机”的安全周期
*   Xcode 现在可以看到设备了

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-31T15:09:41.943

这个 SO 答案为我解决了它[https://stackoverflow.com/a/56054170/5813473](https://stackoverflow.com/a/56054170/5813473)。

```
sudo killall -STOP -c usbd 
```

做了魔术。

好吧，后来我有时不得不再次拔掉/插入，但那个“killall”确实解决了最初的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-21T16:33:41.843

有时重新启动 Xcode 会有所帮助。试一试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-02T18:28:05.253

就我而言，重新启动 Mac 有效，没有其他解决方案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-07T17:46:40.963

我更新了我的 iPad（它在设置 -> 常规 -> 软件更新中，靠近顶部）并重新启动了我的计算机，Xcode 现在可以看到它。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-03-05T05:57:20.710

很简单，关闭 XCode 上的项目。只需右键单击任务栏中的 XCode 并给出退出选项。从目录中打开 XCode 后，它将检测您的设备。它也适用于 Xcode 版本 11.2.1

1.  关闭您的项目或 XCode。
2.  在 MAC 标签栏中右键单击 Xcode 并给出退出选项。
3.  从您的查找器（项目位置）重新打开项目。

设备将被自动检测。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2015-08-14T06:34:25.163

在 Xcode 中打开 Windows，转到设备。如果设备在左侧可见，请右键单击并选择“在目标菜单中显示”。

享受..

# css - 跨越上限的选择器还是什么？

> ID：12262078
> 
> 赞同：2
> 
> 时间：2012-09-04T10:58:20.403
> 
> 标签：css, css-selectors, shadow-dom

我正在为我们公司编写 RIA 系统（仅限 chrome）。不同控件的数量在增长，我决定使用 Shadow DOM 来简化代码。这很棒，但有时需要外部重新设计。这就是问题所在，例如：

任务栏：

```
<taskbar side="right">
  <menubtn />
  <applist scrollable>
    <btn app="SpoPlanMon" />
  </applist>
  <tray />
</taskbar> 
```

使用 Shadow DOM，applist 转换为：

```
<applist>
  <scroll-wrap>
    <scroll-bar>
      <scroll-slider />
    </scroll-bar>
    <scroll-cont>
      <btn app="SpoPlanMon" />
    </scroll-cont>
  </scroll>
</applist> 
```

在这种情况下，我需要`<scroll-slider />`根据`<taskbar />`边设置样式（在所谓的属性中指定，可以动态更改）。不幸的是，我不能只写`taskbar[side="top"] scroll-slider {...}`，因为只允许下边界封装。

有没有办法从“另一边”选择元素？或者可能是类似的东西`video::-webkit-media-controls-panel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:00:59.667

您可以使用 CSS 变量将左/右上下文传达给滑块。有关工作示例，请参阅[此 jsfiddle 。](http://jsfiddle.net/f9Frt/ "使用 CSS 变量和 Shadow DOM 的示例")（您必须在 Chrome中*启用启用实验性 WebKit 功能标志。）*

它是这样工作的：外部组件为依赖于上下文的每个属性设置一个变量（在这种情况下，位于左侧或右侧）。在这个例子中，我只是设置一个变量，一种颜色：

```
<style>
*[side="right"] {
  -webkit-var-slider-color: red;
}

*[side="left"] {
  -webkit-var-slider-color: green;
}
</style>
<taskbar side="right">
  <menubtn />
  <applist scrollable>
    <btn app="SpoPlanMon" />
  </applist>
</taskbar>​ 
```

该组件仅使用变量：

```
<applist>
  <style>
  scroll-slider {
    background: grey; /* default */
    background: -webkit-var(slider-color);
  }
  </style>
  <scroll-wrap>
    <scroll-bar>
      <scroll-slider />
    </scroll-bar>
    <scroll-cont>
      <btn app="SpoPlanMon" />
    </scroll-cont>
  </scroll>
</applist> 
```

在此示例中，该`<taskbar side="right">`元素将滑块颜色变量设置为红色。CSS 变量会自动流入 Shadow DOM，因此在 applist 中，滚动滑块的背景设置为红色。如果您将任务栏更改为 side="left"，则会重新计算样式，并且滚动滑块的背景会自动翻转为绿色。

如果要配置更多属性，只需使用更多变量即可。

在使用它的地方定义属性两次的目的

```
background: grey; /* default */
background: -webkit-var(slider-color); 
```

就是处理没有设置变量的情况。在这种情况下，第二个属性定义将无效，导致它被删除，因此第一个属性定义适用。当变量设置正确时，第二个定义有效并覆盖第一个定义。

CSS 变量的巧妙之处在于它们与定义变量的元素一起嵌套。因此，如果您有一个`<taskbar side="left">`SpoPlanMon Shadow DOM 内部，它会将滑块颜色变量重置为绿色，并且嵌套在其中的任何滑块都将变为绿色。

有一个设计建议是让 Web 组件使用作者定义的伪 ID 将 shadow DOM 内的部分暴露给“从外部”进行样式设置。（[W3 错误 15196](https://www.w3.org/Bugs/Public/show_bug.cgi?id=15196)的描述性不是很强，但它是规范错误。）

为了使用伪 ID 来解决这个问题，AppList 使用伪 ID 公开其滚动滑块：

```
<applist>
  <scroll-wrap>
    <scroll-bar>
      <scroll-slider pseudo="slider" />
    </scroll-bar>
    <scroll-cont>
      <btn app="SpoPlanMon" />
    </scroll-cont>
  </scroll>
</applist> 
```

然后任务栏可以对其进行样式设置：

```
<taskbar side="right">
  <style scoped>
    taskbar[side="right"] applist:pseudo(slider) {
      /* styles apply to the <scroll-slider> */
    }
  </style>
  <menubtn />
  <applist scrollable>
    <btn app="SpoPlanMon" />
  </applist>
  <tray />
</taskbar> 
```

这很好，因为它将特定于任务栏上下文的样式与任务栏保持在一起。applist 需要在它的滑块上放置一个伪元素，所以如果你重用一个组件，它没有给你需要的所有样式提供伪元素（CSS 很强大，所以它带来了把事情搞砸的强大能力） ，所以我认为组件通常不会暴露很多伪 ID。）

这没有实现，甚至在规范中！事实上，确切的语法可能会改变。所以现在你不能依赖伪 ID 解决方案。CSS变量可能是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:29:04.397

如果您使用成熟的[Web 组件](https://github.com/dglazkov/Web-Components-Polyfill)而不仅仅是 Shadow DOM，您应该能够从 Javascript 获取父任务栏元素。像这样的东西：

```
<element>
    <template>
        ...
    </template>
    <script>
        if (this !== window) {
            this.lifecycle({
                created: function() {
                    this.parentElement.attributes['side'].nodeValue; // "right"
                }
            });
        }
    </script>
</element> 
```

但是，这使得您不能再在任务栏之外使用 applist 组件，这通常是一件坏事。我们应该尝试使组件尽可能模块化、独立和可重用。问问自己，“关于父元素，我到底需要知道什么？” 你能把应用列表写成

```
<applist scrollable="right">... 
```

为了在任何你想要的地方使用这个组件的能力，重复是一个很小的代价。谁知道？将来您可能会决定以这样的方式使用任务栏和应用程序列表，`side="right"`但是`scrollable="bottom"`！

**更新**

如果你想让 Shadow DOM 元素的样式随着宿主元素的变化而动态变化，你很快就能使用[@host @-rule](http://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html#host-at-rule)。该规范在这里根本不清楚，但我认为它将像这样使用（取自[对 Web Components 的 W3 规范的错误的评论](https://www.w3.org/Bugs/Public/show_bug.cgi?id=18483#c1)）：

```
@host {
    div { background-color: white; }
    .warning { background-color: yellow; }
    .important .warning { background-color: orange; }
} 
```

这（我认为）会给主机一个默认的白色背景颜色，如果主机有 class ，它将被覆盖为黄色`warning`。**如果**主机有 class ，它还会在主机内设置一个带有橙色背景颜色的警告元素`important`。

# zip - 大型 Zip 文件在 32 位 JDK 上已损坏

> ID：12262085
> 
> 赞同：1
> 
> 时间：2012-09-04T10:58:30.390
> 
> 标签：zip

我们正在使用 ZipOutputStream（在 32 位 jdk 上）从多个文件创建单个 Zip 文件。

如果我们使用 5 个 pdf 文件（每个 pdf 为 1 GB）创建 Zip 文件，那么它会创建损坏的 Zip 文件。如果我使用（4 个 pdf 文件 - 每个 pdf 为 1 GB）创建 Zip 文件，则它会创建正确的 Zip 文件。

32 位 JDK 上的 Zip 文件大小是否有任何限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:59:59.470

原始 ZIP 格式有许多限制（文件的未压缩大小、文件的压缩大小和存档的总大小）为 4GB。

更多信息：[http](http://en.wikipedia.org/wiki/ZIP_(file_format) ://en.wikipedia.org/wiki/ZIP_(file_format )

原始 zip 格式对各种事物（文件的未压缩大小、文件的压缩大小和存档的总大小）有 4 GiB 的限制，并且 zip 存档中的条目限制为 65535 个。在规范的 4.5 版本（与任何特定工具的 v4.5 不同）中，PKWARE 引入了“ZIP64”格式扩展来绕过这些限制，将限制增加到 16 EiB（264 字节）。Windows XP 中的文件资源管理器不支持 ZIP64，但 Windows Vista 中的资源管理器支持。同样，一些库，例如 Perl 中的 DotNetZip 和 IO::Compress::Zip，支持 ZIP64。Java 的内置 java.util.zip 从 Java 7 版本开始支持 ZIP64。[29]

# facebook-graph-api - Facebook 是否已经悄悄地停止了对 Graph API 上daily_active_users 字段的公开访问？

> ID：12262094
> 
> 赞同：0
> 
> 时间：2012-09-04T10:58:55.163
> 
> 标签：facebook-graph-api

通常，Graph API Application 对象包含以下公共字段：`daily_active_users`、、 `weekly_active_users`和`monthly_active_users`（请参阅[Graph API 参考](https://developers.facebook.com/docs/reference/api/application/)。）

几天来，我一直无法使用 FQL 或 Facebook 的[Graph Explorer访问这些内容。](https://developers.facebook.com/tools/explorer/?method=GET&path=2439131959%3Ffields%3Dweekly_active_users%2Cdaily_active_users%2Cmonthly_active_users%2Clogo_url%2Cid)

此外，我注意到 AppData.com 的[每日活动](http://www.appdata.com/gainers/today)图表似乎已损坏。我已经联系他们询问他们的经历。）

尽管如此，这些字段仍然在文档中，并且作为（[新的！改进的！](https://developers.facebook.com/blog/post/2012/08/30/updates-to-the-graph-api/)）图形资源管理器的一部分提供，这可能会让人们认为它们仍然受支持。

1.  有没有人看到 Facebook 关于这个问题的任何沟通？
2.  这是一个非常糟糕的迹象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:27:59.270

我的问题与昨天或前一天开始的完全相同。AppData 目前似乎重复了前几天的数字。

FQL 似乎以某种方式起作用：（[点击此处查看 Zynga Poker）](https://api.facebook.com/method/fql.query?query=SELECT%20metric,%20value%20FROM%20insights%20WHERE%20object_id=2389801228%20AND%20metric=%27application_active_users%27%20AND%20end_time=end_time_date%28%272011-09-03%27%29%20AND%20period=period%28%27month%27%29&access_token=AAAAAAITEghMBANF3NjZCIUcFnZBfb2F1lpCZB305IpaBlNzhiHqCqs5klyrGr4Tw5Seb27FfBwzViNQ3BzGCf87MqJQnWhKBIbZB9QlOnZAsl5lWwSDSi)

但这不是一个好的解决方案 - 我还需要 Graph API。

# html - 在没有 MailChimp 的 Outlook 2010 中发送 HTML 电子邮件

> ID：12262102
> 
> 赞同：1
> 
> 时间：2012-09-04T10:59:31.157
> 
> 标签：html, email, html-email

我在 index.html 文件中创建了我的 HTML 电子邮件，并将所有图像链接到 FTP 站点。

我没有使用 MailChimp 等，我想知道如何直接从 Outlook 2010 本身发送这封电子邮件？

如何将这封电子邮件发送给很多人（都使用 Outlook），并让他们能够查看电子邮件本身中的 HTML 而无需打开附件。

我基本上想要我在 Outlook 中的电子邮件正文中完成的代码？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:37:49.363

我自己已经有一段时间没有这样做了，但是如果您创建一个新邮件消息，然后选择插入，然后选择文件，最后选择您的编码 HTML 文件。在“插入”对话框的右下角，单击“插入”按钮旁边的箭头，然后选择“插入为文本”。

另一种选择是将 HTML 文件本身作为信纸导入。这是微软对该过程的演练：

[http://office.microsoft.com/en-us/outlook-help/create-stationery-for-email-messages-HA102561327.aspx?CTT=5&origin=HA010355037](http://office.microsoft.com/en-us/outlook-help/create-stationery-for-email-messages-HA102561327.aspx?CTT=5&origin=HA010355037)

# iphone - 如何改变图像视图的视角？

> ID：12262103
> 
> 赞同：1
> 
> 时间：2012-09-04T10:59:32.287
> 
> 标签：iphone, uiimageview, uiimage

> **可能重复：**
> [如何将透视变换应用于 UIView？](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview)

如何更改图像视图的透视、3D 变换、倾斜、扭曲、旋转？任何示例项目。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:13:45.590

3D 变换、旋转、倾斜等通常使用`CATransform3D`.

根据文档（[核心动画编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html)）：

> CATransform3D 数据结构定义了一个均匀的三维变换（一个 4 x 4 的 CGFloat 值矩阵），用于旋转、缩放、偏移、倾斜以及将透视变换应用于图层。

例如，要向右下角进行 3D 旋转，您可以执行以下操作：

```
myImageView.layer.transform = CATransform3DRotate(CATransform3DIdentity, 1.75, 0.85, 0, 0); 
```

不要忘记

```
#import <QuartzCore/QuartzCore.h> 
```

一个很棒的示例项目是 Mark Pospesel 的**Enter the Matrix**。[代码在 GitHub 上](https://github.com/mpospese/EnterTheMatrix)，还可以查看[解释性幻灯片](http://www.odysseyinc.com/downloads/EnterTheMatrix.pdf)。

# php - 如何在 php 中为 Rackspace Cloud API 设置元数据键

> ID：12262105
> 
> 赞同：2
> 
> 时间：2012-09-04T10:59:36.490
> 
> 标签：php, file-upload, cloud, rackspace

我在 PHP 中使用 Rackspace 云服务器的云文件 API，我想生成一个临时 url 来下载文件以直接到我的服务器，为此我正在使用`get_temp()`此 api 的方法，但在使用此方法之前，我必须设置元数据密钥对于我的容器。我该怎么做。

```
 public function get_temp_url($key, $expires, $method)
{

    $expires += time();
    $url = $this->container->cfs_http->getStorageUrl() .  '/' . $this->container->name . '/' . $this->name;
    return $url . '?temp_url_sig=' . hash_hmac('sha1', strtoupper($method) .
           "\n" . $expires . "\n" . parse_url($url, PHP_URL_PATH), $key) .
           '&temp_url_expires=' . $expires;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:55:34.560

此页面上的评论包括如何设置的示例：

[http://docs.rackspace.com/files/api/v1/cf-devguide/content/Set_Account_Metadata-d1a4460.html](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Set_Account_Metadata-d1a4460.html)

此外，如果您使用新的 Cloud Files API...

[https://github.com/rackspace/php-opencloud](https://github.com/rackspace/php-opencloud)

...它在 ObjectStore 类中包含一个 SetTempUrlSecret 方法，该方法将为您执行此操作。

# java - 如何使用 .net 桌面应用程序中的 java 代码？

> ID：12262109
> 
> 赞同：1
> 
> 时间：2012-09-04T10:59:40.447
> 
> 标签：java, wcf, web-services, desktop-application, windows-applications

我想使用 WCF 服务中的一些 Java 代码。基本上我需要从 .net 与 java 应用程序进行交互，那么我该如何解决呢？有什么指导吗？

我只是想知道如何从我的 .net 桌面应用程序中调用 java 代码？我需要创建我的 java 项目或 jar 的 .exe 文件吗？我将如何从我的 .net 桌面应用程序调用该 java 项目？

就像 .net desktopp 应用程序中的一些代码会调用

```
void startprocessing (); 
```

用java应用程序编写的代码

让我清除我想要实现的东西..

我有一个 Windows 桌面应用程序，我想将我的语音识别功能集成到该 Java 应用程序中。我想要的是将音频数据作为二进制文件和一些字符串从 .net 应用程序交换到我的 java 应用程序，这样我就可以处理该二进制数据以转换 wav 文件等并重新开始它..这刚刚完成..但是我需要知道如何将这些字符串和一些二进制数据发送到 java 应用程序并调用该 java 应用程序？我需要“使用”（？） wcf 或其他服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:51:41.010

在这里走动，听起来您的 java 应用程序需要公开您要通过 Web 服务调用的方法。这当然是假设您可以控制与之交互的 java 应用程序。不确定您是否可以通过将 Java 应用程序编译为本机来访问该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:58:14.417

您可以查看[JNBridge](http://www.jnbridge.com/)，它提供了 Java 和 .NET 之间的互操作可能性。但是，正如另一位发帖人所建议的那样，通过 Web 服务公开功能可能是更好的解决方案。

快速的 Google 搜索将为您提供有关如何在 Java 中创建 Web 服务的大量信息，但对于初学者，您可以查看：[http ://docs.oracle.com/javaee/6/tutorial/doc/bnayl.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnayl.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:05:52.040

我已经使用带有tomcat apache服务器的axis 2 web服务成功地做到了这一点，下面的链接..它太容易了.我真的成功了

[http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)

# bash - 为什么我在 Bash 中遇到“意外操作员”错误？

> ID：12262110
> 
> 赞同：2
> 
> 时间：2012-09-04T10:59:42.390
> 
> 标签：bash, shell, ubuntu

我得到了监控 apache 的代码。该文件的名称是`test.sh`. 我稍微更改了代码。

我一直在寻找的是，当我这样做时：

```
./test.sh -H localhost -wr 2 -cr 5 -arg cpu_load 
```

它应该测试 apache 的`cpu_load`，即，我试图用我的`-arg`参数来控制监视 apache，但这似乎不起作用。

当我运行这个：

```
./test.sh -H localhost -wr 2 -cr 5 -arg cpu_load 
```

我得到错误：

```
./test.sh: 282: [: -ge: unexpected operator
./test.sh: 286: [: -ge: unexpected operator 
```

这是代码的一部分：

```
#!/bin/sh

while test -n "$1"; do
    case "$1" in
        --help|-h)
            print_help
            exit $ST_UK
            ;;
        --version|-v)
            print_version $PROGNAME $VERSION
            exit $ST_UK
            ;;
        --hostname|-H)
            hostname=$2
            shift
            ;;
        --port|-P)
            port=$2
            shift
            ;;
        --timeout|-t)
            timeout=$2
            shift
            ;;
        --remote-server|-R)
            remote_srv=1
            ;;
        --binary_path|-b)
            path_binary=$2
            shift
            ;;
        --pid_path|-p)
            path_pid=$2
            shift
            ;;
        --pid_name|-n)
            name_pid=$2
            shift
            ;;
        --status-page|-s)
            status_page=$2
            shift
            ;;
        --secure|-S)
            secure=1
            ;;
        --warning-req|-wr)
            warn_req=$2
            shift
            ;;
        --critical-req|-cr)
            crit_req=$2
            shift
            ;;
    --userargument|-arg)
       user_arg=$3
       shift
           ;;
        *)
            echo "Unknown argument: $1"
            print_help
            exit $ST_UK
            ;;
    esac
    shift
done

#other codes

    if [ ${wclvls_req} = 1 ]
    then
        if [ ${user_arg} -ge ${warn_req} -a ${user_arg} -lt ${crit_req} ]
        then
            echo "WARNING - ${output} | ${perfdata}"
            exit $ST_WR
        elif [ ${user_arg} -ge ${crit_req} ]
        then
            echo "CRITICAL - ${output} | ${perfdata}"
        exit $ST_CR
        else
            echo "OK - ${output} | ${perfdata}"
            exit $ST_OK
        fi
    else
        echo "OK - ${output} | ${perfdata}"
        exit $ST_OK
    fi

fi 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:03:23.563

条件中的一个变量（`user_arg`等`warn_req`）`if`可能为空。

更好的编写方法是将变量引用为（如果您想将其作为整数进行比较，则可能会失败）：

```
if [ "${user_arg}" -ge "${warn_req}" -a "${user_arg}" -lt "${crit_req}" ] 
```

或者另一种方法是指定默认值，以便如果变量为空或未定义，则不会失败，如下所示。

```
if [ ${user_arg:-0} -ge ${warn_req:-0} -a ${user_arg:-0} -lt ${crit_req:-0} ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T12:49:56.083

如果您不需要 POSIX 兼容性，则可以使用 bash 的算术评估命令：

```
if (( user_arg >= 0 && user_arg < crit_req )); then 
```

未设置的变量将被隐式视为 0 值，因此无需使用默认值扩展。

# r - R中动物园时间序列的二元运算符错误的非数字参数

> ID：12262114
> 
> 赞同：2
> 
> 时间：2012-09-04T10:59:51.230
> 
> 标签：r, time-series, zoo

我有一个动物园时间序列，称为`merged`：

```
merged <- structure(c("53736", "53736", "53737", "53737", "53738", "53738", 
"2353.96", "2377.84", "2388.4", "2397.52", "2432.62", "2407.52", 
"68.1", "71.4", "68.2", "75.3", "107.5", "80.3", "10.6", "11.1", 
"10.6", "11.7", "16.8", "12.5", "2006-01-01 11:17:00", "2006-01-01 23:15:00", 
"2006-01-02 11:17:00", "2006-01-02 23:15:00", "2006-01-03 11:16:00", 
"2006-01-03 23:17:00", "11.206564", "13.019471", "11.784637", 
"14.039267", "18.505121", "15.057849"), .Dim = c(6L, 6L), .Dimnames = list(
    NULL, c("station_id", "ztd", "zwd", "iwv", "timestamp", "pwc"
    )), index = structure(c(1136113200, 1136156400, 1136199600, 
1136242800, 1136286000, 1136329200), class = c("POSIXct", "POSIXt"
)), class = "zoo") 
```

查看结构，我们可以看到它有许多列：

```
> str(merged)
‘zoo’ series from 2006-01-01 11:00:00 to 2010-03-24 23:00:00
  Data: chr [1:2966, 1:6] "53736" "53736" "53737" "53737" "53738" "53738" "53739" ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:6] "station_id" "ztd" "zwd" "iwv" ...
  Index:  POSIXct[1:2966], format: "2006-01-01 11:00:00" "2006-01-01 23:00:00" "2006-01-02 11:00:00" ... 
```

但是，如果我尝试在其他一些列上使用数学运算符创建一个新列，则它不起作用：

```
> merged$error <- merged$pwc - merged$iwv
Error in `-.default`(merged$pwc, merged$iwv) : 
  non-numeric argument to binary operator 
```

我确定我以前做过这个并且它有效，所以我无法弄清楚我做错了什么。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:19:55.573

正如评论中提到的：您的数据是字符，而不是数字，并且`-`没有为字符向量定义。它们都是字符的原因是因为该`timestamp`列以及 zoo 对象是具有索引属性的矩阵这一事实（并且您不能在矩阵中混合类型）。

因此，您需要将相关列转换`merged`为数字。

```
merged2 <- merged[,!grepl("timestamp",colnames(merged))]
merged2 <- zoo(apply(merged2,2,type.convert), index(merged))
merged2$error <- merged2$pwc - merged2$iwv 
```

# html - 内容 url 在 Firefox 中不起作用

> ID：12262118
> 
> 赞同：16
> 
> 时间：2012-09-04T11:00:04.607
> 
> 标签：html, css

我的 CSS 文件是：

```
 #name_wrong_img
        {
           width:43px;
           height:29px;
        } 
```

这是我的 HTML 代码：

```
 <img id="name_wrong_img" src="wrong.jpg" /> 
```

上面的代码在 Firefox 和 Chrome 中运行良好。

```
 #name_wrong_img
        {
           content:url(wrong.jpg);
           width:43px;
           height:29px;
        } 

         <img id="name_wrong_img"  /> 
```

这在 Chrome 中运行良好。但不是在 Firefox 中。这有什么问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T11:03:20.397

Firefox 不像`content`Chrome 那样支持该属性——在`img`元素上和/或当源是图像时。

`<img>`表示内容图像。如果你使用它，它应该有一个`src`和一个`alt`。

从[规范](http://www.w3.org/TR/html5/the-img-element.html#the-img-element)：

> src 属性必须存在，并且必须包含一个有效的非空 URL，该 URL 可能被空格包围，引用非交互式、可选动画的图像资源，既不是分页也不是脚本。

# ruby-on-rails - Rails：搜索所有带有特定标签的图像

> ID：12262122
> 
> 赞同：1
> 
> 时间：2012-09-04T11:00:07.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, tags

我有 3 个模型：

```
class Image < ActiveRecord::Base
  attr_accessible :name, :size, :image

  has_many :taggings, :dependent => :destroy
  has_many :tags, :through => :taggings
end

class Tag < ActiveRecord::Base
  attr_accessible :name
  has_many :taggings, :dependent => :destroy
  has_many :images, :through => :taggings
end

class Tagging < ActiveRecord::Base
  belongs_to :image
  belongs_to :tag
  attr_accessible :image_id, :tag_id
end 
```

现在我添加了一些带有对应（预定义）标签的图像，images/new 的相关代码是：

```
%div.field
  = f.label "Tag"
  %br/
  - for tag in Tag.all
    = check_box_tag "image[tag_ids][]", tag.id, @image.tags.include?(tag)  
    = tag.name 
```

我现在如何搜索具有特定标签的所有图像？我需要一个@images 来显示所有带有一个或多个预定义标签的图像。我在复选框的帮助下选择这些标签：

```
%h1
  Search an image
%p
  = form_tag '/tagsearch', :method => 'get' do
    - for tag in Tag.all
      = check_box_tag 'tag_ids[]', tag.id
      = tag.name
    = submit_tag "Search Images" 
```

所以，这个搜索的参数现在是（例如，搜索所有带有 tag_ids 2 和 3 的图像）：

```
{"utf8"=>"✓",
 "tag_ids"=>["2", 
 "3"],
 "commit"=>"Search Images"} 
```

执行这种图像搜索的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:52:06.010

我认为这应该有效：

```
images = Image.includes(:tags).where('tags.id' => params['tag_ids']).all 
```

# qt - QLabel 自动换行模式

> ID：12262123
> 
> 赞同：16
> 
> 时间：2012-09-04T11:00:15.443
> 
> 标签：qt, label, word-wrap

我有一个标签，有时包含没有空格的长文本（计算机中的路径）。

所以 word-wrap 把它包装得很奇怪。

有没有办法让标签的自动换行在单词中间或不仅在空格处中断？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T13:08:53.607

这并不优雅但确实有效......
所以说头类有私有：

```
QLabel *thisLabel;
QString *pathName;
QString *pathNameClean; 
```

当然还有在某个地方定义 thisLabel 。所以如果它这么简单就好了......

```
thisLabel->setWordWrap(true); 
```

如果且仅当单词有断点（应该避免哪些路径）时，那很好

因此，如果您以后需要它用于 QFile 目的，请将您的实际路径保存在单独的字符串中。然后手动为每个行号定义一个字符，并将空格插入到字符串中......所以我们会说 50 个字符是一个很好的宽度......

```
 pathNameClean = new QString(pathName);

    int c = pathName->length();

    if( c > 50)
    {
        for(int i = 1; i <= c/50; i++)
        {
            int n = i * 50;
            pathName->insert(n, " ");
        }
    }
    thisLabel->setText(pathName); 
```

Shazam .... 没有原始空格的模拟 WordWrap ...

请记住 pathName 字符串现在仅用于漂亮的 QLabel 目的，并且 pathNameClean 字符串是实际路径。如果您尝试使用空间注入路径打开文件，Qt 程序将崩溃.....

（如果没有简单的类方法，它可能只需要几行代码......为什么解决问题是程序员最好的工具！）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T11:13:06.027

一种方法是将[QTextOption](https://doc-snapshots.qt.io/qt6-dev/qtextoption.html)类与[QTextDocument](https://doc.qt.io/qt-6/qtextdocument.html)而不是 QLabel 一起使用。这让您可以使用[QTextOption::WrapMode](https://doc.qt.io/qt-6/qtextoption.html#WrapMode-enum)。`QTextOption::WrapAtWordBoundaryOrAnywhere`应该做你想做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T10:54:10.333

# QLabel 与其他换行模式

我恰好在 2021 年也有同样的问题，所以在这里我将与您分享我迄今为止找到的一些最佳答案。

## TextWrapAnywhere QLabel

子类`QLabel`化并实现`paintEvent`，您可以在其中设置文本对齐`TextWrapAnywhere`方式`drawItemText`。

```
from PyQt5.QtCore import Qt
from PyQt5.QtGui import QPainter
from PyQt5.QtWidgets import QApplication, QLabel, QMainWindow, QStyleOption, QVBoxLayout, QWidget, QStyle

class SuperQLabel(QLabel):
    def __init__(self, *args, **kwargs):
        super(SuperQLabel, self).__init__(*args, **kwargs)

        self.textalignment = Qt.AlignLeft | Qt.TextWrapAnywhere
        self.isTextLabel = True
        self.align = None

    def paintEvent(self, event):

        opt = QStyleOption()
        opt.initFrom(self)
        painter = QPainter(self)

        self.style().drawPrimitive(QStyle.PE_Widget, opt, painter, self)

        self.style().drawItemText(painter, self.rect(),
                                  self.textalignment, self.palette(), True, self.text())

class MainWindow(QMainWindow):
    def __init__(self, *args, **kwargs):
        super(MainWindow, self).__init__(*args, **kwargs)

        self.setFixedSize(100, 200)

        self.label = QLabel()
        self.label.setWordWrap(True)
        self.label.setText("1111111111111111111111111111")

        self.slabel = SuperQLabel()
        self.slabel.setText("111111111111111111111111111")

        self.centralwidget = QWidget()
        self.setCentralWidget(self.centralwidget)

        self.mainlayout = QVBoxLayout()
        self.mainlayout.addWidget(self.label)
        self.mainlayout.addWidget(self.slabel)

        self.centralwidget.setLayout(self.mainlayout)

if __name__ == "__main__":
    import sys
    app = QApplication(sys.argv)
    w = MainWindow()
    w.show()
    sys.exit(app.exec_()) 
```

[![在此处输入图像描述](../Images/2fc5e8dc31953a8c4c7b57685868930f.png)](https://i.stack.imgur.com/5ScW8.png)

## 字符换行而不是空格

根据@ekhumoro 提供的[这个答案](https://stackoverflow.com/questions/66249310/qlabel-word-wrap-how-to-break-line-base-on-a-comma-vs-space)（在操作的评论中），如果您正在寻找基于逗号的换行，您可以在要换行的字符后插入一个零宽度空格并使用内置的自动换行功能.

这是一个例子：

```
from PyQt5.QtCore import QRect, Qt
from PyQt5.QtGui import QPainter
from PyQt5.QtWidgets import QApplication, QLabel, QMainWindow, QStyleOption, QStylePainter, QVBoxLayout, QWidget, QStyle

class CommaWrapableQLabel(QLabel):
    def __init__(self, *args, **kwargs):
        super(CommaWrapableQLabel, self).__init__(*args, **kwargs)

    def setWordWrapAtAnychar(self, char):
        newtext = self.text().replace(char, f"{char}\u200b")
        self.setText(newtext)
        self.setWordWrap(True)

class MainWindow(QMainWindow):
    def __init__(self, *args, **kwargs):
        super(MainWindow, self).__init__(*args, **kwargs)

        self.setFixedSize(100, 200)

        self.label = QLabel()
        self.label.setWordWrap(True)
        self.label.setText(
            'Dog,Rabbit,Train,Car,Plane,Cheese,Meat,Door,Window')

        self.slabel = CommaWrapableQLabel()
        self.slabel.setText(
            'Dog,Rabbit,Train,Car,Plane,Cheese,Meat,Door,Window')
        self.slabel.setWordWrapAtAnychar(",")

        self.centralwidget = QWidget()
        self.setCentralWidget(self.centralwidget)

        self.mainlayout = QVBoxLayout()
        self.mainlayout.addWidget(self.label)
        self.mainlayout.addWidget(self.slabel)

        self.centralwidget.setLayout(self.mainlayout)

if __name__ == "__main__":
    import sys
    app = QApplication(sys.argv)
    w = MainWindow()
    w.show()
    sys.exit(app.exec_()) 
```

[![在此处输入图像描述](../Images/046c853d5d77a9d09362595164af443f.png)](https://i.stack.imgur.com/1ZFJD.png)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2020-01-25T23:42:05.860

在 2020 年，PySide2，它只是：

```
 tmp = QLabel()
 tmp.setWordWrap(True) 
```

# sql - case in order by 子句

> ID：12262129
> 
> 赞同：1
> 
> 时间：2012-09-04T11:00:37.507
> 
> 标签：sql, sql-server-2008-r2

我有这个表用户我需要按参数对选择结果进行排序，但是当我对像 userName 字段这样的 varchar 字段进行排序时遇到问题。如何解决？

```
----------------------------------------
| userID | UserName | password |...... |
----------------------------------------
| int    | varchar  | varcahr  | ..... |

    declare @index varchar(100)
    set @index = 2
    select * From users
    order by case @index 
                            when 1 then Number
                            when 2 then CAST(LoginName AS INT)
                            Else Password
                End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:04:14.310

将数字转换为字符，而不是将字符转换为数字

```
case @index
      WHEN 1 THEN RIGHT('0000000000'+ CAST(UserId AS VARCHAR(10)), 10)
      WHEN 2 THEN UserName -- or LoginName, maybe a typo ?
      ELSE Password
      end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:48:50.867

```
declare @pSORT_PARAM VARCHAR(400) -- HERE YOU HAVE TO PASS COLUMN NAME AS PARAMETER

DECLARE @pSORT_ORDER VARCHAR(10) -- HERE YOU HAVE TO PASS SORT ORDER AS ASC OR DESC

DECLARE @pQUERY VARCHAR(400)

SET @pSORT_ORDER=' ASC '

SET @pQUERY='SELECT * FROM USERS'

set @pQUERY =@pQUERY + ISNULL(' ORDER BY '+ @pSORT_PARAM + @pSORT_ORDER,'')

EXEC SP_EXECUTESQL @pQUERY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:04:05.480

您不能将大多数 varchars 转换为 int，因此您必须按 varchars 排序

格式化你`order by`的

```
 case @index
      when 1 then RIGHT('000000'+ CONVERT(Varchar(6), UserID)
      when 2 then LoginName
      end 
```

# jsf-2 - 清除字段时primefaces自动完成，在单击提交按钮时给出页面的previuos结果

> ID：12262134
> 
> 赞同：0
> 
> 时间：2012-09-04T11:00:47.300
> 
> 标签：jsf-2, primefaces

我正在使用从数据库中检索结果的主要面孔的自动完成标签。

问题是，当我提交表单时，将自动完成字段留空，我在页面上得到的结果是上一个请求的结果（之前选择的自动完成值）——它只有在我刷新页面时才会被清除。

我希望在每次提交时不刷新浏览器页面，如果我使用退格键清除字段中的值并提交表单，它应该为这个特定实例提供正确的结果，而不是前一个。

我还在 jsf 页面表单中使用了一些文本字段，但那些没有这个问题。任何人都可以提供有关如何纠正此问题的指导吗？

**编辑：** 代码：

```
<h:form>
  <h:dataTable id="Ressult" value="#{input.searchResults}" var="r">
    <h:column>#{r.ID}</h:column>
    <h:column>#{r.Name}</h:column>
  </h:dataTable>
  <tr>
    <td>Current Education Level</td>
    <td>
      <h:panelGrid styleClass="text-box">
        <p:autoComplete id="education" value="#{input.education}"
        completeMethod="#{input.getautocomplete}" var="a"
        itemLabel="#{a.Name}" itemValue="#{a}"
        converter="edConverter" forceSelection="true" />
        <p:column>#{a.Name} - #{a.id}</p:column>
      </h:panelGrid>
    </td>
  </tr>
  <tr>
    <td>City</td>
    <td>
      <h:selectOneMenu id="txtCity" styleClass="select-field"
      value="#{input.cityId}">
        <f:selectItem itemLabel=" Please Select" itemValue="0">
        </f:selectItem>
        <f:selectItems value="#{input.cities}"></f:selectItems>
      </h:selectOneMenu>
    </td>
  </tr>
  <tr>
    <td>Name of Person</td>
    <td>
      <h:inputText id="txtName" value="#{input.nameOfPerson}"
      styleClass="text-box"></h:inputText>
    </td>
  </tr>
  <h:commandButton id="btnSearch" value="Search"
  action="#{input.searching}">
    <f:ajax execute="@form" render="Ressult"></f:ajax>
  </h:commandButton>
</h:form> 
```

这是bean代码：

```
public class Input 
{
    private Education education;
    private List<SelectItem> cities;
    private Integer cityId;
    private String nameOfPerson;
    private List<Results> searchResults;
    //getters and setters

    public String searching()
    {
         searchResults=dao.getSearchResults(cityId,education,nameOfPerson);
         return "success";
    }

    public void autocomplete(String query)
    {
        //AUTOCOMPLTE lIST CODE HERE
    }
} 
```

通过更新，如果您的意思是在选择新项目时显示新结果，那么是的 - 应该更新表单，但自动完成以某种方式采用先前选择的值并根据该值显示结果。至少在我刷新页面之前 - 只有这样，自动完成的前一个才会被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:25:42.230

我的自动完成小部件也有同样的问题。当我删除它的 id 属性时，它起作用了。也许是 Primefaces 中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T08:36:40.257

你可能有两件事要做：

1.  通过在表单中​​执行以下操作，按 Enter 键阻止用户提交：

    ```
    <h:form onkeypress="return event.keyCode != 13;"> 
    ```

2.  使用提供的 itemSelect/itemUnselect 功能来清空 Bean 中的字段：

    ```
    <p:ajax event="itemSelect"
        listener="#{autoCompleteBean.handleSelect}" global="false"
        update=":some:where" />

    <p:ajax event="itemUnselect"
        listener="#{autoCompleteBean.handleUnselect}" global="false"
        update=":some:where" />

    <!-- rest of your facelet stuff --> 
    ```

在 Bean 中：

```
public void handleSelect(final SelectEvent event) {
    final Search search = (Search) event.getObject();
    // do your addition here
}

public void handleUnselect(final UnselectEvent event) {
    final Search search = (Search) event.getObject();
    // do your substraction here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:14:27.980

好吧，如果我正确理解您的问题，您的自动完成列表会在帖子之后显示。你使用你的表单一次又一次地提交到同一个页面。

你的豆子看起来有点奇怪。因为您在页面中调用了自动完成方法：getautocomplete，但该方法在您的 bean 中不存在。

以这种方式使用自动完成：

```
<p:autoComplete id="education" value="#{input.education}"  completeMethod="#{input.autocomplete}" var="a" itemLabel="#{a.Name}" itemValue="#{a}" converter="edConverter" forceSelection="true" /> 
```

在你的 bean 中：

```
public List<Education> autocomplete(String query)
{
        List<Education> educations = new ArrayList<Education>();
        //search with query in your dao something like:
        educations = dao.searchEducation(query);

        return educations;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T11:00:22.163

要解决主题问题，您只需删除forceselection

或将其设为假。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T08:06:40.090

固定在 5.2，升级你的 primefaces jar

这里是日志问题

[https://code.google.com/p/primefaces/issues/detail?id=7592](https://code.google.com/p/primefaces/issues/detail?id=7592)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T13:31:56.340

只需将事件处理到服务器。与 forceselection="true" 一起使用

```
<p:ajax event="itemUnselect" global="false" /> 
```

# java - AsyncHttpClient 设置内容类型不一致

> ID：12262135
> 
> 赞同：1
> 
> 时间：2012-09-04T11:00:57.917
> 
> 标签：java, http, http-headers, asynchttpclient

我使用 AsyncHttpClient 创建一个 http POST 请求：

```
 AsyncHttpClient.BoundRequestBuilder reqBuilder;
      reqBuilder = httpClient.preparePost(url);
      reqBuilder.setBody(data); 
```

它有时不发送内容类型标头，有时将其发送为

```
 Content-Type: text/html; charset=ISO-8859-1 
```

这导致我们的请求在 [REST API] 服务器端失败。

我不明白为什么它不一致。

客户端创建如下：

```
 import com.ning.http.client.*;
       AsyncHttpClient httpClient = new AsyncHttpClient(
         new AsyncHttpClientConfig.Builder().build()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:31:31.873

您可以自己设置标题

```
reqBuilder.setHeader(String name, String value); 
```

或添加

```
reqBuilder.addHeader(String name, String value); 
```

# java - Java中的计数和终止字符串

> ID：12262140
> 
> 赞同：1
> 
> 时间：2012-09-04T11:01:03.560
> 
> 标签：java

> 实现字符串的两种方法。一个计数的字符串显式地记录了它的长度。终止字符串的长度由字符串结束标记确定。

任何人都可以在java中给出一个计数字符串和终止字符串的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:08:47.413

```
CountedString {
   char[] string;
   int length;

   int getLength() {
     return length;
   }
}

TerminatedString {
   char[] string;
   final static char TERMINATOR = '$';
   int getLength() {
     for (int i = 0; i < string.length; i++) {
        if (string[i] == TERMINATOR) return i;
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:12:11.407

如果您查看[String.java](http://www.docjar.com/html/api/java/lang/String.java.html)会发现 String 的长度是由遍历字符串 characters 的计数器计算的。

请参阅`String.java`更多信息。您应该查看此类以查看`length()` 方法的实现。

# c# - ORA-00911: 无效字符

> ID：12262145
> 
> 赞同：60
> 
> 时间：2012-09-04T11:01:35.880
> 
> 标签：c#, system.data.oracleclient

我在我的 oracle (11g) 数据库中创建了两个表，如下所示：

```
 create table "test" ("id" int);
    create table test ("id" int); 
```

然后在我的 C# 程序中有一个问题：

```
 OracleConnection conn = new OracleConnection(-myConnectionString-);
    conn.Open();
    OracleCommand command = new OracleCommand("select * from test;", conn);
    var v = command.ExecuteReader(); 
    OracleCommand command = new OracleCommand("select * from \"test\";", conn);
    var v = command.ExecuteReader(); 
```

对于两个 command.ExecuteReader() 我都有“ORA-00911：无效字符”错误。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-09-04T11:05:15.713

消除 ; （分号）从 SQL 字符串的末尾开始

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-08-27T03:12:12.043

如果其他人在这里寻找如何在单个命令中包含多个语句，您需要将您的语句包装在**begin**和**end**中。这将停止由于分号导致的无效字符错误。例如：

```
var command = new OracleCommand(@"
    begin
    select * from test;
    select * from test2;
    end;") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:05:52.787

你为什么在查询中使用分号......它只是被视为无效字符......你必须从查询中删除分号（;）并这样做：

```
 OracleConnection conn = new OracleConnection(-myConnectionString-);
   conn.Open();
    OracleCommand command = new OracleCommand("select * from test", conn);
    var v = command.ExecuteReader(); 
    OracleCommand command = new OracleCommand("select * from \"test\"", conn);
    var v = command.ExecuteReader(); 
```

有关此错误的更多详细信息，您可以[在此处](http://www.dba-oracle.com/sf_ora_00911_invalid_character.htm)阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T16:36:24.297

这不是这个人的问题，但希望这会帮助那里的人：

我经常遇到隐藏在内联注释中的单引号的问题，如下所示：

```
select foo 
from bar
where 
/* some helpful comment with a "can't" or somesuch */
baz='qux' 
```

评论中无与伦比的单引号引起了各种各样的戏剧性，而甲骨文并没有竭尽全力帮助您解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-06T13:37:01.253

将,和命令中的*sqldatasource*参数替换为`?`。`:Column_name``delete``update``insert`

# drupal-7 - Drupal7如何使用实体注册表进行表单验证

> ID：12262150
> 
> 赞同：2
> 
> 时间：2012-09-04T11:01:41.403
> 
> 标签：drupal-7

我正在使用实体注册让用户注册一个活动。我有一些字段要根据其他字段的值进行验证。

因此，使用 hook_form_id_form_alter，我能够添加第二个验证函数。第二个功能是我希望我可以添加验证注册表单的代码。

```
function coastal_custom_form_registration_form_alter($form, &$form_state, $form_id) {
  $form['#validate'][] = 'event_registration_form_validate';  
} 
```

但是每当我提交表单时，应该执行验证的函数永远不会被调用。

```
//this function never gets called
function event_registration_form_validate(&$form, &$form_state){
  drupal_set_message('hi from validation');
  form_set_error('you are in form_registration');

} 
```

我整天都在想如何做到这一点。有没有人知道这是怎么做到的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:19:52.497

阅读 hook_form_alter 上的 api 文档，我发现你必须通过引用传递 $form。所以编写函数的正确方式应该是：

```
function coastal_custom_form_registration_form_alter(&$form, &$form_state, $form_id) {
  $form['#validate'][] = 'event_registration_form_validate';  
} 
```

请注意，在 $form 变量之前有一个 & 符号。

# python - 从字符串中的列表中查找任何项目的 Pythonic 方法

> ID：12262152
> 
> 赞同：3
> 
> 时间：2012-09-04T11:02:04.023
> 
> 标签：python, string, list, search

问题很简单。我正在编写一个函数，如果字符串包含任何非法名称，则返回 true。

线是一个字符串。

非法名称是一个可迭代的。

```
def has_illegal_item(line, illegal_names):
    illegal_items_found = False
    for item in illegal_names:
        if item in line:
            illegal_items_found = True
            break
    return illegal_items_found 
```

所以这很好用，但它似乎有点笨拙和啰嗦。任何人都可以建议一种更简洁、更 Pythonic 的方式来编写这个吗？我可以使用列表理解或正则表达式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T11:04:42.367

```
any(name in line for name in illegal_names) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:20:41.473

让我们看一下以下示例：

```
line = "This is my sample line with an illegal item: FOO"
illegal_names = ['FOO', 'BAR'] 
```

并且您现在想查明您是否`line`包含其中一个非法名称，然后您可以使用广泛的[列表理解](http://www.python.org/dev/peps/pep-0202/)和长度检查来执行此操作：

```
is_correct = not bool(len([ hit for hit in illegal_names if hit in line ]))
# or
is_correct = len([ hit for hit in illegal_names if hit in line ]) == 0 
```

非常简单，简短，并且相对于其他`lambda`版本易于阅读和理解。

-科林-

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:27:59.253

我使用@larsmans 解决方案，但还有另一种方法。

```
def check_names(line, names):
    #names should be set
    parsed_line = set(line.replace(',', '').split())
    return bool(parsed_line.intersection(names)) 
```

这也可以写成`lambda`

```
In [57]: x = lambda line, names: bool(set(line.replace(",", "").split()).intersection(names))

In [58]: x("python runs in linux", set(["python"]))
Out[58]: True 
```

lamdba 版本可能会影响可读性

# javascript - jquery toastmessage 多个位置，如何在运行时更改位置类？

> ID：12262156
> 
> 赞同：1
> 
> 时间：2012-09-04T11:02:20.130
> 
> 标签：javascript, jquery, css

我正在使用 jquery toastmessage [http://akquinet.github.com/jquery-toastmessage-plugin/](http://akquinet.github.com/jquery-toastmessage-plugin/)但是我已经达到了一个限制，那就是插件只允许每页有一个位置。该插件输出以下容器：

```
<div class="toast-container toast-position-top-right"></div> 
```

作为一种解决方法，我试图在运行时更改该类，理想情况下，我将能够创建多个这些容器并通过 ID 调用它们，因为我不想更改插件，我正在尝试更改类在使用以下代码调用构造函数后的运行时：

```
$().toastmessage('showToast', {
        text     : message,
        stayTime : 1500,
        sticky   : false,
        position : 'top-center',
        type     : 'notice'
    });

    $(".toast-container").removeClass(toast-position-top-right).addClass(toast-position-top-center); 
```

还尝试使用：

```
$("div.toast-container").removeClass(toast-position-top-right).addClass(toast-position-top-center); 
```

我想我用错了选择器，因为我收到了这个错误：

> 未捕获的 ReferenceError：未定义 toast

如何正确选择该课程？任何替代想法如何启用多个职位？TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:21:38.837

通过使用两个切换类属性的函数来修复它：

```
$("*[class*='toast-position-top-center']").removeClass('toast-position-top-center').addClass('toast-position-top-right');

$("*[class*='toast-position-top-right']").removeClass('toast-position-top-right').addClass('toast-position-top-center'); 
```

仍然不理想，但它是一个快速的解决方法。

# database - 数据库创建和查询

> ID：12262159
> 
> 赞同：-2
> 
> 时间：2012-09-04T11:02:33.727
> 
> 标签：database

所以我必须创建一个食谱网站，而 HTML-CSS 主要是我的强项。我需要一个数据库来搜索 100 多个食谱，并主要按作者对它们进行排序，除了其他排序顺序。我不想使用像 Joomla 这样的 CMS。我该如何开始？

我是将整个食谱（带有一两张图片）存储到数据库中，还是只存储一个指向食谱的链接？

其次，客户也会更新网站，有没有办法为完全不知道添加到数据库的客户简化流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:22:59.927

您将需要编写一些服务器端脚本。如果您不想使用 CMS 或框架，您（或其他人）将不得不为所有站点编写代码。

DB设计要点：

*   将配方以及作者等存储在数据库中。
*   不要将图片存储在数据库中，即使这样做很容易。比在数据库中的字段中更好的存储，称为“文件名”或存储服务器上图像路径的东西。
*   对于客户端 - 您将需要构建一个带有“表单”的后端/管理页面，以便客户端上传（添加）、更新和删除食谱和图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:23:21.867

您不需要将图片保存到数据库中。例如，请参阅Prestashop 的[数据库模型](http://www.daveegerton.com/assets/images/database-schema-prestashop.png)（仅相对于图像查看，因为是各种表格）。

问候和祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T11:13:45.780

您也可以将图片添加到数据库中。为此，您始终可以在插入数据库之前减小图像的大小。对于数据库，您可以使用 php 或 javascript。两者都提供了访问数据库的简便方法。Javascript 甚至具有内置的事务提交和回滚功能。

# php - 如何在 php 类中插入或使用 Javascript 或 jquery？

> ID：12262160
> 
> 赞同：0
> 
> 时间：2012-09-04T11:02:35.130
> 
> 标签：php, javascript, jquery, oop

我想知道如何在 php 类中插入或使用 javascript 或 jquery。在这段代码中，我想在每次用户单击添加按钮时显示一个警报，如果输入框中没有数字，那么我想在数字为零时显示一个警报我想在执行之前显示警报。

```
<!DOCTYPE html>
<html>
<head><title>OOP Adding Machine</title></head>
<body>
<div align="center">
<h1 style="color:#00F">Welcome User</h1>
<p style=" color:#00F; font-size:18px; font-weight:bold ">Please enter two numbers in the given input boxes, and this program will add them and display the answer.</p>

<form action="code.php" name="form1" method="post"> <br /><strong>Number#1:</strong><input type="text" name="adder1" /> <br /><strong>Number#2:</strong><input type="text" name="adder2" /><br /><input type="submit" name="submit" value="ADD"/> </form>
</div>
</body>

</html> 
```

这是php oop代码：

```
<?php
class addition
    {
     var $adder3;

     function adder($adder1,$adder2)
         {
          $this->adder3=$adder1+$adder2;
         }

     function sol()
         {

        echo "<h1>"." Result: ".$this->adder3."</h1>" ;
        echo "<h2>"."Program Executed"."</h2>";

         }
    }

$result=new addition();
$result->adder($_POST['adder1'],$_POST['adder2']);
$result->sol();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:16:01.130

在 php 文件中包含 JavaScript 的最佳方法是创建一个外部 JS 文件并将其放在您的 public/JS 文件夹中，并将 JS 包含在您的脑海中，例如

```
 <script type='text/javascript' src='/public/js/example.js'></script> 
```

Yoc 还可以在头部顶部的同一个 php 文件中包含 JS 和 JQuery，例如

```
<html>
  <head>
     <script type='text/javascript'>
         //your JS code here
     </script>

     $(document).ready(function() {
            $("#submit").on("click", function(e) {

                $.ajax({
                    url: "url",
                    type: 'POST',
                    data: data,
                    success: function(msg) {
                        //ajax success return
                        }
                        else{
                           //ajax call failed
                        }
                    }
                });
            });
        });
  </head>
</html> 
```

上面的代码展示了如何包含简单的 JS 函数和 Jquery 以及 ajax 调用

最后你也可以在你的 php 文件之间包含它，就像你把它包含在你的脑海中一样，但就我的经验而言，最好将你的 JS、html 和逻辑分开

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:05:10.683

在任何你想要的地方尝试这个：

```
echo '<script type="text/javascript">alert("Some text"); </script>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:19:13.173

```
The best way would be calling Jquery AJAX to do this.

        On even, you can send the ajax request and then call back and grab the data in javascript and then display the alert

        In this case, you don't have to put javascript in php. Simple output value from Php file in ajax request and grab the value and display the event.

      See

      $.ajax({
      url: "test.php",
      context: document.body
    }).done(function() { 
      $(this).addClass("done");
    });

  A lots of option supported by Jquery to capture the events 

  See: http://api.jquery.com/jQuery.ajax/

Cheers 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:19:29.500

```
<?php
class addition
{
    var $adder3;

    function adder($adder1,$adder2)
    {
        $this->adder3=$adder1+$adder2;
    }

    function sol()
    {
        echo "<h1>"." Result: ".$this->adder3."</h1>" ;
        echo "<h2>"."Program Executed"."</h2>";
    }

    function jsExample(){
        ?>
        <script type="text/javascript">
        alert ( $('#myElementId').text() );
        </script>
        <?php
    }
}

$result=new addition();
$result->adder($_POST['adder1'],$_POST['adder2']);
$result->jsExample();
$result->sol();
?> 
```

# api - 什么是 Leaflet 和 Mapbox，它们有什么区别？

> ID：12262163
> 
> 赞同：93
> 
> 时间：2012-09-04T11:02:42.180
> 
> 标签：api, dictionary, leaflet, mapbox

什么是 Leaflet 和 Mapbox，两者的区别或用法是什么？他们的 API 的主要区别是什么？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2014-05-14T19:50:06.023

另一个答案很好，但有点过时，因为 Mapbox 在两年内发生了重大变化。

[Leaflet](http://leafletjs.com/)是一个 JavaScript API，用于在互联网上制作交互式地图。它可以与 Mapbox 集成，还可以与许多其他瓦片源（如[OpenStreetMap](http://www.openstreetmap.org/)）和其他数据源（如[GeoJSON 叠加层](http://leafletjs.com/examples/geojson.html)）集成。

[Mapbox](https://www.mapbox.com/)是一家提供地图服务和技术的公司 - 其中一项服务[Map tiles](https://www.mapbox.com/developers/api/maps/)可以在 Leaflet 中用作基本地图 - 就像您在 Google Maps API 中使用 Google Map tiles 一样。Mapbox 还开发了一个名为[Mapbox.js](https://www.mapbox.com/mapbox.js/)的 Leaflet 插件，它可以很容易地与他们的图块集成，同时仍然使用 Leaflet 中的所有强大功能。我们也支持 Leaflet 的开发，因为[维护者在这里工作](https://www.mapbox.com/about/team/#vladimir-agafonkin)。

您可以在不使用 Mapbox 瓦片的情况下使用 Mapbox.js，并将 Leaflet 与 Mapbox 瓦片一起使用——它们完全可以混合搭配。Mapbox.js 的添加，如[TileJSON](https://www.mapbox.com/developers/tilejson/)和[UTFGrid](https://www.mapbox.com/developers/utfgrid/)支持，使得与 Mapbox 地图集成更容易，但不会改变 Leaflet 的现有行为。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-09-05T09:48:06.157

**更新（2014-08-22）：**

我的回答有点过时了。有关Leaflet 和 MapBox 之间的最新比较，请参阅[@tmcw 的答案。](https://stackoverflow.com/a/23663848/5441)

* * *

**原始答案（2012-09-05）：**

你在比较苹果和橘子。

传单“只是”一个地图 API。它本身不提供数据/地图。Mapbox 是一种设计和发布地图的服务，其最终结果是存储在云中的一堆生成的地图图块（以及一些 json 文件）。

因此，例如，您可以使用 Leaflet 中的 Mapbox 地图。[例子](http://mapbox.com/wax/connector-leaf.html)

无论如何，Mapbox 是由一家名为 DevelopmentSeed 的公司开发的，他们有一个地图 API，它确实是 Leaflet 的竞争对手，称为[Modest Maps](http://modestmaps.com/)，虽然更简单且功能更少。

所以，总结一下：

*   传单 -> 地图 API ，没有数据
*   MapBox -> 设计和发布地图

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-06-18T13:28:30.493

## 你可以想到

*   **Mapbox**作为地图的 GitHub

*   **OpenStreetMaps**作为*git*

*   **作为*git*客户端的**传单****

***   和**mapbox.js**作为*“Mac 的 GitHub”*** 

 *** * *

让我尝试解释更多：

*OpenStreetMaps (OSM)*是一个用于创建/显示地图和**地理数据**的开源**项目**；就像*git*允许为源代码控制创建提交树一样。它们都是处理数据的软件。

 ****Mapbox*是一家基于 OSM 的地图的**托管​​公司**，它具有更多的功能，而不仅仅是托管；这与*GitHub*用于*git*项目的情况相同。

*Leaftlet*是一个**库**，使用户能够使用 OSM 托管服务在其浏览器上显示/使用基于 OSM 的地图；就像任何*git*客户端使用*git*托管服务一样。

*mapbox.js*是一个增强的**库**，用于显示/使用托管在[mapbox.com](https://www.mapbox.com)上的地图，它已经基于*OSM*；就像 *“GitHub for Mac”*客户端是由 GitHub 为托管在其服务器上的项目提供接口。

希望这能澄清你的疑虑。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-11T21:13:09.400

这是一个旧帖子，这是我的更新。

Mapbox 现在正在使用传单作为他们的官方 JavaScript API（我不知道内部工作是什么，但是......我根本无法访问 Modest Maps，而且 Mapbox 在他们当前的网站上没有提及关于 Modest Map 的任何内容） .*****

# php - 在多对多关系中应用学说 sql 过滤器

> ID：12262164
> 
> 赞同：7
> 
> 时间：2012-09-04T11:02:51.050
> 
> 标签：php, doctrine-orm

我的项目中有很多关系（user_role、grades、user_role_grades）。但我也有一个要求，不要从我的数据库中删除任何数据。因此，我在表中添加了一个状态列，连接 2 个表以创建多对多关系。现在我想上

```
 $userRole->getGrades() 
```

仅获取那些在联合表 (user_role_grades) 中没有状态“0”的记录。对于那些，我正在尝试使用学说 sql 过滤器。

```
namespace Bis\MpBundle\Filter;
use \Doctrine\ORM\Mapping\ClassMetaData;

class UserRoleGradeFilter extends \Doctrine\ORM\Query\Filter\SQLFilter
{
    public function addFilterConstraint(ClassMetadata $targetEntity, $targetTableAlias)
    {
        if("Bis\DefaultBundle\Entity\UserRoleGrade" == $targetEntity->name){

            return $targetTableAlias . '.status != 0';
        }

        return '';
    }
} 
```

因此，它被称为 Bis\DefaultBundle\Entity\UserRole，而不是 Bis\DefaultBundle\Entity\UserRoleGrade 实体。有人有什么想法吗？

或者您可能有其他想法，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T22:51:40.023

我认为这是不可能的，因为它直接附加了 SQL。即使您尝试 SQL 注入之类的东西：

```
return $targetTableAlias . '.status != 0)) LEFT join the_other_table ON  '
. $targetTableAlias . '.grades HAVING the_other_table.status = 0 (('; 
```

它可能会在声明中崩溃`(())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-15T12:39:07.900

您可以致电`$targetEntity->getAssociationMappings()['yourFieldName']` ，如果`joinTable`存在密钥，则表示您有`manyToMany`关系。你`yourFieldName`的领域与`ManyToMany`关系。

您可以从中获得正确的表别名`Doctrine\ORM\Query\SqlWalker::getSQLTableAlias()`。我得到`SqlWalker`了`debug_backtrace`，不是一个优雅的解决方案，但我没有找到更好的解决方案。

```
/**
 * Get SqlWalker with debug_backtrace
 *
 * @return null|SqlWalker
 */
protected function getSqlWalker()
{
    $caller = debug_backtrace();
    $caller = $caller[2];

    if (isset($caller['object'])) {
        return $caller['object'];
    }

    return null;
} 
```

完全实现我的`addFilterConstraint`方法

```
 public function addFilterConstraint(ClassMetadata $targetEntity, $targetTableAlias)
{
    if (empty($this->reader)) {
        return '';
    }

    // The Doctrine filter is called for any query on any entity
    // Check if the current entity is "pool aware" (marked with an annotation)
    $poolAware = $this->reader->getClassAnnotation(
        $targetEntity->getReflectionClass(),
        PoolAware::class
    );
    if (!$poolAware) {
        return '';
    }

    if (!$poolId = $this->getParameter('poolId')) {
        return '';
    }

    $fieldName = $poolAware->getFieldName();
    if (empty($fieldName)) {
        return '';
    }

    if (!$sqlWalker = $this->getSqlWalker()) {
        return '';
    }

    if (!isset($targetEntity->getAssociationMappings()[$fieldName])) {
        return '';
    }

    $mapping = $targetEntity->getAssociationMappings()[$fieldName];

    if (isset($mapping['joinColumns'])) {
        // oneToMany relation detected
        $table = $targetEntity->getTableName();
        $columnName = $mapping['joinColumns'][0]['name'];
        $dqlAlias = constant($targetEntity->getName() . '::MNEMO');
    } elseif (isset($mapping['joinTable'])) {
        // manyToMany relation detected
        $dqlAlias = constant($mapping['targetEntity'] . '::MNEMO');
        $component = $sqlWalker->getQueryComponent($dqlAlias);

        // Only main entity in query is interesting for us,
        // otherwise do not apply any filter
        if ($component['parent']) {
            return '';
        }
        $table = $mapping['joinTable']['name'];
        $columnName = $mapping['joinTable']['inverseJoinColumns'][0]['name'];
    } else {
        return '';
    }

    $tableAlias = ($sqlWalker instanceof BasicEntityPersister)
        ? $targetTableAlias // $repository->findBy() has been called
        : $sqlWalker->getSQLTableAlias($table, $dqlAlias);

    $query = sprintf('%s.%s = %s', $tableAlias, $columnName, $this->getConnection()->quote(poolId));

    return $query;
} 
```

我们所有的 Doctrine 模型都有 MNEMO 常量，它是模型的简单名称。`Abc\Module\Model\Product`有 MNEMO `product`。这个 MNEMO 相当于`_alias`Repository 类。这就是为什么我们将此值应用于`$dqlAlias`

您可以[在此处阅读完整的代码说明](http://popovserhii.com/doctrine-2-sql-filter-annotation-zf3)

# jquery - 得到响应后的 JQuery POSTing 数据

> ID：12262165
> 
> 赞同：0
> 
> 时间：2012-09-04T11:02:55.623
> 
> 标签：jquery

我有一些代码，每 3 秒使用 JQuery $post 将数据从“my_form”发布到服务器。一切正常，但有时可能是因为 Internet 连接速度较慢，当循环触发时，响应不会在 3 秒内出现。这会出错。当然，我可以将延迟从 3 秒增加到 6 秒甚至更多，但这会减慢进程。如何仅在收到响应后更改代码以发布数据？

```
$(document).ready(function() {
    $("#my_form").submit(function() {
        document.forms["my_form"]["submit"].disabled="true";
        counter=0;
        var post_data = function() {
            $.post("formProcessor.php", $("#my_form").serialize(),
            function(data) {
                $("#formResponse").html(data);
                txt = $("#formResponse").text();
                ...
                //some code analyzing response 
                ...
                if (counter == 50){
                    clearInterval(nre);
                    return false;
                };
                changeFields(counter);
            }
        );
    };
    var nre=setInterval(post_data,3000);
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:08:05.133

我会在下面的代码中做类似的事情。很简单。`requestFinished`如果请求完成，则设置为 true 的附加变量。

```
 var requestFinished = true;
$(document).ready(function() {
    $("#my_form").submit(function() {
        document.forms["my_form"]["submit"].disabled="true";
        counter=0;
        var post_data = function() {
            if(requestFinished) {
                requestFinished = false;
                $.post("formProcessor.php", $("#my_form").serialize(),
                    function(data) {
                        requestFinished = true;
                        $("#formResponse").html(data);
                        txt = $("#formResponse").text();
                        ...
                        //some code analyzing response 
                        ...
                        if (counter == 50){
                            clearInterval(nre);
                            return false;
                        };
                        changeFields(counter);
                    }
                );
            }
    };
    var nre=setInterval(post_data,3000);
    return false;
});
}); 
```

# sql-server - 如何在 SQL 2005 Reporting Services 中创建列/行报告？

> ID：12262167
> 
> 赞同：0
> 
> 时间：2012-09-04T11:02:59.740
> 
> 标签：sql-server, sql-server-2005, service, reporting

在 SQL Reporting Services 2005 SP3 中，我们有以下表格报告：

```
JobName       Product      Weight Processed      Start                 End
---------------------------------------------------------------------------------------
2284          30mm         128 kg                11:55 04/09/2012      14:34 04/09/2012
3686          15mm         234 kg                19:21 03/09/2012      00:23 04/09/2012 
```

我们希望将其转换为列/行类型的报告，例如：

```
JobName                  2284                3686
-------------------------------------------------------------
Product                  30mm                15mm
Weight Processed         128 kg              234 kg
Start                    11:55 04/09/2012    19:21 03/09/2012 
End                      14:34 04/09/2012    00:23 04/09/2012 
```

我们如何在 SRS 2005 中做到这一点？我们最初使用向导将报告创建为“表格”。我们尝试使用矩阵样式并选择 JobName 作为列，其余字段作为行，但它不允许我们在没有详细信息的情况下继续，但是这个视图并没有给我们想要的东西. 它将 JobName 重复列为列，但未将其他字段列为下面的行。

任何人都可以帮助我们如何设置报告吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:27:43.770

它不是一个*自然的*矩阵报告。它是一个显示具有固定行和分组依据的水平数据的报告`Job Name`。

您可以在此处查看如何操作：

[http://blogs.msdn.com/b/chrishays/archive/2004/07/23/horizo​​ntaltables.aspx](http://blogs.msdn.com/b/chrishays/archive/2004/07/23/horizontaltables.aspx)

# oracle - SQL Developer 单元测试编码错误

> ID：12262169
> 
> 赞同：0
> 
> 时间：2012-09-04T11:03:02.343
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我已经设法配置我们的 Oracle 数据库来运行 SQL 开发人员的单元测试。我创建了一个示例单元测试，它需要能够使用非 ASCII 字符（用于记录目的）。然而，我遇到了一个重大障碍。SQL Developer 的单元测试似乎无法处理特殊字符。

我有一个返回 NVARCHAR2 值（并包含特殊字符）的函数，并希望使用以下内容对其进行测试： ![在此处输入图像描述](../Images/8327ad46127c8447d3bc2258d5e38484.png)

当我单击“调试实现...”时，一切似乎都正常。但是当我单击“运行测试”时，我得到以下信息：

```
Test Implementation 1 failed: Expected: [P????stup], Received: [Přístup]
Expected: [P????stup], Received: [Přístup]
Value: [91919] 
```

在我上面显示的窗口中，“结果”中的文本也更改为 P????stup。

万一这很重要，我在 SQL Developer 中的编码设置为 Cp1250（它肯定包含有问题的字符）。

我在这里做错了什么还是甲骨文的巨大失败？

谢谢你的帮助。

编辑：好的，我刚刚发现即使我保存然后点击刷新，我也会得到 P????stup。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:03:24.377

我认为您需要进行[Character Set Migration](http://docs.oracle.com/cd/B10500_01/server.920/a96529/ch10.htm)。

# javascript - 使用asp.net FileUpload时从javascript获取图像宽度和高度

> ID：12262177
> 
> 赞同：-1
> 
> 时间：2012-09-04T11:03:23.163
> 
> 标签：javascript, asp.net

那是我的代码：

```
 <script type="text/javascript">
  $(document).ready(function(){
   $("#<%=fileUpload.ClientID%>").change(function () {
    alert(// width + height ); 
    });
    });
   </script>

<asp:FileUpload ID="fileUpload" runat="server" class="upload"   /> 
```

我可以从客户端获取上传图像的宽度和高度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:06:28.123

在上传图片之前如何获取图片的属性？你怎么能确定它甚至是一个图像？客户端或服务器在上传之前对文件一无所知。据我所知，您只能获取文件的名称和大小。

# android - 我的地图视图未在 Google Play 市场上显示

> ID：12262178
> 
> 赞同：2
> 
> 时间：2012-09-04T11:03:25.050
> 
> 标签：android, gps, android-mapview, google-play

我开发了一个带有 GPS 数据的 MapView 应用程序。该地图在我的设备上运行良好。但是当我在 Android 的 Play Store 上发布它后，该应用程序并没有显示我的地图。我能做些什么？还有其他方法可以显示我的地图吗？请帮助我，这对我公司来说是一个非常重要的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:13:25.480

**您必须为您的证书指纹**获取 Maps API 密钥：

 **我认为您正在使用与当前调试应用程序相关的 Maps API 密钥。

您已经使用以下命令创建了它：

```
C:\Program Files\Java\jdk1.6.0_25\bin>keytool.exe -list -alias androiddebugkey -keystore "C:\Users\you\.android\debug.keystore" -storepass android -keypass android 
```

但是您必须为签名应用程序创建它。

**1)**通过右键单击项目-> Android 工具-> 导出签名的应用程序包来创建密钥库。现在App的keysrore在path\App.keystore中生成

**2）**创建PrivateKeyEntry：

```
C:\Program Files\Java\jdk1.6.0_33\bin>keytool.exe -list -alias "your description" -keystore "path\order.keystore" -storepass yourpass -keypass secondpass 
```

**3)**获取此证书指纹的 Maps API 密钥

**4）**在mapView的apiKey中输入

```
<com.google.android.maps.MapView
            android:id="@+id/mapView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_margin="5dip"
            android:layout_weight="0.2"
            android:apiKey="********************"
            android:clickable="true"
            android:minHeight="50dip"
            android:minWidth="50dip" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:48:32.880

按照本教程的分步过程......你会得到你的答案，

[http://www.letsnurture-review.info/technology/how-to-get-google-map-private-key-and-use-it-to-export-an-android-application/](http://www.letsnurture-review.info/technology/how-to-get-google-map-private-key-and-use-it-to-export-an-android-application/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-04T11:16:50.130

这可能是因为过时的 js 文件。

以下脚本运行良好，试一试。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```**

# drag-and-drop - 从 iframe 中的 googledocs pdf 拖放内容不起作用。

> ID：12262182
> 
> 赞同：1
> 
> 时间：2012-09-04T11:03:37.303
> 
> 标签：drag-and-drop

当我从 iframe 中的 googledocs 拖放 pdf 的内容时，在任何浏览器中都不起作用。我希望 Google docs 提供安全性，因此它不允许从 Google docs pdf 中拖放效果。我不确定

如何从 google docs pdf 中拖动内容？

提前致谢。

# python - 如何制作这样的可迭代对象？

> ID：12262184
> 
> 赞同：-1
> 
> 时间：2012-09-04T11:03:41.827
> 
> 标签：python, list

问题 1

如何制作这样的可迭代对象：

```
0 1 2 3 4 5 4 3 2 1 0 1 2 3 4 5 4 3 2 1 0 1 2 3 4 5 4 3 2 1 .... 
```

问题2

如果在上面的对象上使用 list(obj) 会占用机器的内存吗？如何预防？

请不要使用python2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:13:26.120

您可以制作一个向上和向下计数的无限生成器：

```
def updown(n):
    while True:
        for i in range(n):
            yield i
        for i in range(n - 2, 0, -1):
            yield i

uptofive = updown(6)
for i in range(20):
    print uptofive.next(), 
```

会输出：

```
0 1 2 3 4 5 4 3 2 1 0 1 2 3 4 5 4 3 2 1 
```

您无法阻止`list(updown(6))`尝试消耗所有内存，不。正如医生所说：“那就不要那样做！”。

请改用`.next()`调用，或者将生成器与另一个限制迭代生成器次数的语句一起使用。该[`itertools.islice()`功能](http://docs.python.org/library/itertools.html#itertools.islice)将做到这一点：

```
import itertools
list(itertools.islice(updown(6), 20)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:46:54.037

另一种方法是使用`itertools.cycle()`：

```
from itertools import cycle

def oscillator(start, stop):
    # assumes stop >= start
    return cycle(range(start, stop+1) + range(stop-1, start, -1))

o = oscillator(0, 5)
for i in range(30):
    print o.next(), 
```

# c - 如何在二叉搜索树中找到交换的节点？

> ID：12262190
> 
> 赞同：3
> 
> 时间：2012-09-04T11:04:07.523
> 
> 标签：c, algorithm

这是一个面试题。

给出了一个二叉搜索树，并且两个节点的值已经交换。问题是如何在树的一次遍历中找到节点和交换的值？

我试图使用下面的代码解决这个问题，但我无法停止递归，所以我遇到了分段错误。帮助我如何停止递归。

```
#include <stdio.h>
#include <stdlib.h>
#include <limits.h>
#include <stdlib.h>

 /* A binary tree node has data, pointer to left child
 and a pointer to right child */
 struct node
{
 int data;
 struct node* left;
 struct node* right;
};
/* Helper function that allocates a new node with the
 given data and NULL left and right pointers. */
 struct node* newNode(int data)
 {
  struct node* node = (struct node*)
                    malloc(sizeof(struct node));
 node->data = data;
 node->left = NULL;
 node->right = NULL;
 return(node);
 }
void modifiedInorder(struct node *root, struct node **nextNode)
 {
    static int nextdata=INT_MAX;
    if(root)
    {       
        modifiedInorder(root->right, nextNode);
        if(root->data > nextdata)
        return;
        *nextNode = root;
        nextdata = root->data;

        modifiedInorder(root->left, nextNode);          
    }
}

void inorder(struct node *root, struct node *copyroot, struct node **prevNode)
{
    static int prevdata = INT_MIN; 
    if(root)
    {
        inorder(root->left, copyroot, prevNode);
        if(root->data < prevdata)
        {
            struct node *nextNode = NULL;
            modifiedInorder(copyroot, &nextNode);

            int data = nextNode->data;
            nextNode->data = (*prevNode)->data;
            (*prevNode)->data = data;
            return;
        }
        *prevNode = root;
        prevdata = root->data;
        inorder(root->right, copyroot, prevNode);           
    }
}

/* Given a binary tree, print its nodes in inorder*/
void printInorder(struct node* node)
{
    if (node == NULL)
        return;

    /* first recur on left child */
    printInorder(node->left);

    /* then print the data of node */
    printf("%d ", node->data);

    /* now recur on right child */
    printInorder(node->right);
}

int main()
{
    /*   4
        /  \
       2    3
      / \
     1   5
    */

    struct node *root = newNode(1);  // newNode will return a node.
    root->left        = newNode(2);
    root->right       = newNode(3);
    root->left->left  = newNode(4);
    root->left->right = newNode(5);
    printf("Inorder Traversal of the original tree\n ");
    printInorder(root);

    struct node *prevNode=NULL;
    inorder(root, root, &prevNode);

    printf("\nInorder Traversal of the fixed tree \n");
    printInorder(root);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:12:34.603

使用中序遍历走到树。通过使用它，您将对所有元素进行排序，并交换一个大于周围元素的元素。

例如考虑下面的二叉树

```
 _  20  _
         /         \
      15             30
     /   \         /   \ 
   10    17      25     33
  / |   /  \    /  \    |  \
9  16  12  18  22  26  31  34 
```

首先，我们将其线性化为一个数组，我们得到

9 10 16 15 12 17 18 20 22 25 26 30 31 33 34

现在您可以注意到 16 大于其周围的元素，而 12 则小于它们。这立即告诉我们交换了 12 和 16。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:05:24.157

以下函数通过在收紧边界的同时递归地迭代左右子树来验证树是否为 BST。

我相信可以通过修改它来实现上述任务

1.  不是返回false，而是返回temp 即指向使树无法成为BST 的节点的指针。
2.  会有两个这样的实例同时给出交换的值。

编辑：我们需要区分返回 true 的递归函数和指向被交换节点的指针

这假设只有问题定义中提到的两个这样的值

```
bool validate_bst(tnode *temp, int min, int max)
{
        if(temp == NULL)
                return true;

        if(temp->data > min && temp->data < max)
        {
                if( validate_bst(temp->left, min, temp->data) && 
                    validate_bst(temp->right, temp->data, max) )
                        return true;
        }

        return false;
} 
```

主要会像这样调用上面的api

```
 validate_bst(root, -1, 100); // Basically we pass -1 as min and 100 as max in
                                     // this instance 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-04T16:45:41.290

我们可以在 O(n) 时间内解决这个问题，并且只需遍历给定的 BST。由于 BST 的中序遍历始终是排序数组，因此问题可以简化为交换排序数组的两个元素的问题。我们需要处理两种情况：

```
 6 
    /  \ 
   10    2 
  / \   / \ 
 1   3 7  12 
```

**1.交换的节点在BST的中序遍历中不相邻。**

例如，节点 10 和 2 在 {1 10 3 6 7 2 12} 中交换。给定树的中序遍历是 1 10 3 6 7 2 12

如果我们仔细观察，在中序遍历过程中，我们发现节点 3 比之前访问的节点 10 小。这里保存节点 10（上一个节点）的上下文。再次，我们发现节点 2 比之前的节点 7 小。这一次，我们保存节点 2（当前节点）的上下文。最后交换两个节点的值。

**2.交换的节点在BST的中序遍历中相邻。**

```
 6 
    /  \ 
   10    8 
  / \   / \ 
 1   3 7  12 
```

例如，节点 10 和 2 在 {1 10 3 6 7 8 12} 中交换。给定树的中序遍历是 1 10 3 6 7 8 12 与案例 #1 不同，这里仅存在一个节点值小于前一个节点值的点。例如，节点 10 小于节点 36。

```
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
 * };
 */
class Solution {
public:
    void recoverTreeUtil(TreeNode *root, TreeNode **first, TreeNode **middle, TreeNode **last, TreeNode **prev) {
        if (root) {
            recoverTreeUtil(root->left, first, middle, last, prev);
            if (*prev && (*prev)->val > root->val) {
                if (!(*first)) {
                    *first = *prev;
                    *middle = root;
                } else *last = root;
            }
            *prev = root;
            recoverTreeUtil(root->right, first, middle, last, prev);
        }
    }
    void recoverTree(TreeNode* root) {
        TreeNode *first, *middle, *last, *prev;
        first = middle = last = prev = nullptr;
        recoverTreeUtil(root, &first, &middle, &last, &prev);
        if (first && last) swap(first->val, last->val);
        else if (first && middle) swap(first->val, middle->val);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:14:34.650

我在 Geeksforgeeks.com 上找到了这个问题的另一个解决方案 ........你们可以查看这个线程以获得对以下代码的更多解释[http://www.geeksforgeeks.org/archives/ 23616](http://www.geeksforgeeks.org/archives/23616)

```
// Two nodes in the BST's swapped, correct the BST.
#include <stdio.h>
#include <stdlib.h>

/* A binary tree node has data, pointer to left child
and a pointer to right child */
struct node
{
int data;
struct node *left, *right;
};

// A utility function to swap two integers
void swap( int* a, int* b )
{
int t = *a;
*a = *b;
*b = t;
}

/* Helper function that allocates a new node with the
given data and NULL left and right pointers. */
struct node* newNode(int data)
{
struct node* node = (struct node *)malloc(sizeof(struct node));
node->data = data;
node->left = NULL;
node->right = NULL;
return(node);
}

// This function does inorder traversal to find out the two swapped nodes.
// It sets three pointers, first, middle and last.  If the swapped nodes are
// adjacent to each other, then first and middle contain the resultant nodes
// Else, first and last contain the resultant nodes
void correctBSTUtil( struct node* root, struct node** first,
                 struct node** middle, struct node** last,
                 struct node** prev )
{
if( root )
{
    // Recur for the left subtree
    correctBSTUtil( root->left, first, middle, last, prev );

    // If this node is smaller than the previous node, it's violating
    // the BST rule.
    if (*prev && root->data < (*prev)->data)
    {
        // If this is first violation, mark these two nodes as
        // 'first' and 'middle'
        if ( !*first )
        {
            *first = *prev;
            *middle = root;
        }

        // If this is second violation, mark this node as last
        else
            *last = root;
    }

    // Mark this node as previous
    *prev = root;

    // Recur for the right subtree
    correctBSTUtil( root->right, first, middle, last, prev );
}
}

// A function to fix a given BST where two nodes are swapped.  This
// function uses correctBSTUtil() to find out two nodes and swaps the
// nodes to fix the BST
void correctBST( struct node* root )
{
// Initialize pointers needed for correctBSTUtil()
struct node *first, *middle, *last, *prev;
first = middle = last = prev = NULL;

// Set the poiters to find out two nodes
correctBSTUtil( root, &first, &middle, &last, &prev );

// Fix (or correct) the tree
if( first && last )
    swap( &(first->data), &(last->data) );
else if( first && middle ) // Adjacent nodes swapped
    swap( &(first->data), &(middle->data) );

// else nodes have not been swapped, passed tree is really BST.
}

/* A utility function to print Inoder traversal */
void printInorder(struct node* node)
{
if (node == NULL)
    return;
printInorder(node->left);
printf("%d ", node->data);
printInorder(node->right);
}

/* Driver program to test above functions*/
int main()
{
/*   6
    /  \
   10    2
  / \   / \
 1   3 7  12
 10 and 2 are swapped
*/

struct node *root = newNode(6);
root->left        = newNode(10);
root->right       = newNode(2);
root->left->left  = newNode(1);
root->left->right = newNode(3);
root->right->right = newNode(12);
root->right->left = newNode(7);

printf("Inorder Traversal of the original tree \n");
printInorder(root);

correctBST(root);

printf("\nInorder Traversal of the fixed tree \n");
printInorder(root);

return 0;
}
Output:

 Inorder Traversal of the original tree
 1 10 3 6 7 2 12
 Inorder Traversal of the fixed tree
 1 2 3 6 7 10 12
 Time Complexity: O(n) 
```

更多测试用例请参考此链接[http://ideone.com/uNlPx](http://ideone.com/uNlPx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-14T13:32:25.657

我的 C++ 解决方案：

```
struct node *correctBST( struct node* root )
{
//add code here.
    if(!root)return root;
    struct node* r = root;
    stack<struct node*>st;
   // cout<<"1"<<endl;
    struct node* first = NULL;
    struct node* middle = NULL;
    struct node* last = NULL;
    struct node* prev = NULL; 
    while(root  || !st.empty()){
        while(root){
            st.push(root);
            root = root->left;
        }
        root = st.top();
        st.pop();
        if(prev && prev->data > root->data){
            if(!first){
                first = prev;
                middle = root;
            }
            else{
                last = root;
            }
        }
        prev = root;
        root = root->right;
    }
    if(first && last){
        swap(first->data,last->data);
    }
    else{
        swap(first->data,middle->data);
    }
    return r;
} 
```

# asp.net-mvc - 如何使用 ASP.NET MVC 将数据从表单传递到控制器

> ID：12262192
> 
> 赞同：0
> 
> 时间：2012-09-04T11:04:08.443
> 
> 标签：asp.net-mvc, forms, razor, controller, actionmethod

我在剃刀文件中定义了一个表单。

```
@using (Html.BeginForm())
{

} 
```

在这个表格中，我有诸如

```
<input type="text" readonly="readonly" name="MaxBudget" value="Any" id="SearchMaxBudget"> 
```

和几个结构，比如

```
<div class="ui-widget-content" style="height: 100px; width: 200px; overflow: auto;" id="amenitiesLog"><div>Hair dryer and shaving adaptor</div><br></br><div>Airport shuttle service</div><br></br></div> 
```

当我点击这个按钮时，我想从这些字段和结构中获取数据并将它们传递给控制器

```
<input type="button" class="btn-leftsearch" /> 
```

我错过了什么，如何实现？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:09:58.597

简单来说，您需要创建数据模型，将其从控制器传递到视图中，然后在控制器中设置操作以接收数据。

有很多很好的教程 - 我发现特别有用的是[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3)但也有很多 - 叔叔（或阿姨）谷歌是一个很好的朋友。

祝你好运，阅读愉快。

# android - 使用布局上方的主题组合框选择不同的布局，或修复主题样式引用

> ID：12262196
> 
> 赞同：11
> 
> 时间：2012-09-04T11:04:18.940
> 
> 标签：android, xml, themes

我在我的 xml 中收到此消息

**“使用布局上方的主题组合框选择不同的布局，或修复主题样式引用。”** 所以你能告诉我什么是组合主题以及如何在我的应用程序中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:06:32.647

在编辑器中关闭布局文件并重新启动 Eclipse。

如果您在图形布局上使用 Android 3.0 及更高版本。尝试将其更改为 Android 2.2 或 2.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-23T17:55:57.153

将您的 Android 工作室更新到最新版本，然后更新您的 gradle

# c# - 从 XPS 文档中提取文本

> ID：12262197
> 
> 赞同：0
> 
> 时间：2012-09-04T11:04:20.033
> 
> 标签：c#, text, extraction, xps

我需要从 XPS 文档中提取特定页面的文本。提取的文本应写入字符串。我需要这个来使用 Microsofts SpeechLib 读出提取的文本。请仅在 C# 中提供示例。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T12:53:42.463

`ReachFramework`添加对和`WindowsBase`和以下`using`语句的引用：

```
using System.Windows.Xps.Packaging; 
```

然后使用此代码：

```
XpsDocument _xpsDocument=new XpsDocument("/path",System.IO.FileAccess.Read);
IXpsFixedDocumentSequenceReader fixedDocSeqReader 
    =_xpsDocument.FixedDocumentSequenceReader;
IXpsFixedDocumentReader _document = fixedDocSeqReader.FixedDocuments[0];
IXpsFixedPageReader _page 
    = _document.FixedPages[documentViewerElement.MasterPageNumber];
StringBuilder _currentText = new StringBuilder();
System.Xml.XmlReader _pageContentReader = _page.XmlReader;
if (_pageContentReader != null)
{
  while (_pageContentReader.Read())
  {
    if (_pageContentReader.Name == "Glyphs")
    {
      if (_pageContentReader.HasAttributes)
      {
        if (_pageContentReader.GetAttribute("UnicodeString") != null )
        {                                   
          _currentText.
            Append(_pageContentReader.
            GetAttribute("UnicodeString"));                              
        }
      }
    }
  }
}
string _fullPageText = _currentText.ToString(); 
```

文本存在于`Glyphs`->`UnicodeString`字符串属性中。您必须`XMLReader`用于固定页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-30T16:07:05.693

从所有页面返回文本的方法（修改后的 Amir:s 代码，希望没问题）：

```
/// <summary>
///   Get all text strings from an XPS file.
///   Returns a list of lists (one for each page) containing the text strings.
/// </summary>
private static List<List<string>> ExtractTextFromXps(string xpsFilePath)
{
   var xpsDocument = new XpsDocument(xpsFilePath, FileAccess.Read);
   var fixedDocSeqReader = xpsDocument.FixedDocumentSequenceReader;
   if (fixedDocSeqReader == null)
      return null;

   const string UnicodeString = "UnicodeString";
   const string GlyphsString = "Glyphs";

   var textLists = new List<List<string>>();
   foreach (IXpsFixedDocumentReader fixedDocumentReader in fixedDocSeqReader.FixedDocuments)
   {
      foreach (IXpsFixedPageReader pageReader in fixedDocumentReader.FixedPages)
      {
         var pageContentReader = pageReader.XmlReader;
         if (pageContentReader == null)
            continue;

         var texts = new List<string>();
         while (pageContentReader.Read())
         {
            if (pageContentReader.Name != GlyphsString)
               continue;
            if (!pageContentReader.HasAttributes)
               continue;
            if (pageContentReader.GetAttribute(UnicodeString) != null)
               texts.Add(pageContentReader.GetAttribute(UnicodeString));
         }
         textLists.Add(texts);   
      }
   }
   xpsDocument.Close();
   return textLists;
} 
```

用法：

```
var txtLists = ExtractTextFromXps(@"C:\myfile.xps");

int pageIdx = 0;
foreach (List<string> txtList in txtLists)
{
   pageIdx++;
   Console.WriteLine("== Page {0} ==", pageIdx);
   foreach (string txt in txtList)
      Console.WriteLine(" "+txt);
   Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T05:03:28.170

```
 private string ReadXpsFile(string fileName)
    {
        XpsDocument _xpsDocument = new XpsDocument(fileName, System.IO.FileAccess.Read);
        IXpsFixedDocumentSequenceReader fixedDocSeqReader
            = _xpsDocument.FixedDocumentSequenceReader;
        IXpsFixedDocumentReader _document = fixedDocSeqReader.FixedDocuments[0];
        FixedDocumentSequence sequence = _xpsDocument.GetFixedDocumentSequence();
        string _fullPageText="";
        for (int pageCount = 0; pageCount < sequence.DocumentPaginator.PageCount; ++pageCount)
        {
            IXpsFixedPageReader _page
                = _document.FixedPages[pageCount];
            StringBuilder _currentText = new StringBuilder();
            System.Xml.XmlReader _pageContentReader = _page.XmlReader;
            if (_pageContentReader != null)
            {
                while (_pageContentReader.Read())
                {
                    if (_pageContentReader.Name == "Glyphs")
                    {
                        if (_pageContentReader.HasAttributes)
                        {
                            if (_pageContentReader.GetAttribute("UnicodeString") != null)
                            {
                                _currentText.
                                  Append(_pageContentReader.
                                  GetAttribute("UnicodeString"));
                            }
                        }
                    }
                }
            }
            _fullPageText += _currentText.ToString();
        }
        return _fullPageText;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-09T16:35:34.093

类的完整代码：

```
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using System.Windows.Xps.Packaging;

namespace XPS_Data_Transfer
{
    internal static class XpsDataReader
    {
        public static List<string> ReadXps(string address, int pageNumber)
        {
            var xpsDocument = new XpsDocument(address, System.IO.FileAccess.Read);
            var fixedDocSeqReader = xpsDocument.FixedDocumentSequenceReader;
            if (fixedDocSeqReader == null) return null;

            const string uniStr = "UnicodeString";
            const string glyphs = "Glyphs";
            var document = fixedDocSeqReader.FixedDocuments[pageNumber - 1];
            var page = document.FixedPages[0];
            var currentText = new List<string>();
            var pageContentReader = page.XmlReader;

            if (pageContentReader == null) return null;
            while (pageContentReader.Read())
            {
                if (pageContentReader.Name != glyphs) continue;
                if (!pageContentReader.HasAttributes) continue;
                if (pageContentReader.GetAttribute(uniStr) != null)
                    currentText.Add(Dashboard.CleanReversedPersianText(pageContentReader.GetAttribute(uniStr)));
            }
            return currentText;
        }
    }
} 
```

从自定义文件的自定义页面返回字符串数据列表。

# javascript - 同时登录网站和 Chrome 扩展程序

> ID：12262198
> 
> 赞同：4
> 
> 时间：2012-09-04T11:04:20.457
> 
> 标签：javascript, google-chrome, authentication, google-chrome-extension

我们有一个文件共享服务[http://ge.tt](http://ge.tt)和一些 Chrome 扩展。其中之一为 Gmail 添加了额外的功能。

在这个扩展中，我们要求用户在他们能够使用扩展之前登录到 Ge.tt。由于他们已经在 Ge.tt 上登录，因此不必再次登录就太好了，这会导致一些用户误解它的工作原理。

什么是解决这个问题的好方法？其他人有同样的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-10-18T14:02:14.570

例如，语法扩展可以检测您是否登录到语法站点

他们正在使用此权限（实际上它在所有站点上都启用了，他们甚至可以在任何站点上读取 httpOnly cookie）

[![在此处输入图像描述](../Images/a229b5bd9ec6b1c61b7a348cc98aaabc.png)](https://i.stack.imgur.com/Gx7EE.png)

[![在此处输入图像描述](../Images/2ea5f429a8e9c85183366b1243411cfb.png)](https://i.stack.imgur.com/SeBCo.png)

NB 不知道他们为什么要监听 cookie，他们可以（如 @alex-k 所指出的）只是向`api.grammarly.com/is-authenticated`

因为我看到他们不使用 same-site=strict 或 lax

这是我注销后的屏幕截图，扩展程序请求在他们的网站上记录一些操作，服务器将`anonymous`cookie 设置到我的浏览器

[![在此处输入图像描述](../Images/446a4d19b02835236e7b93a5e7462879.png)](https://i.stack.imgur.com/1rMl9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T13:29:05.920

您可以简单地从扩展程序向仅用户页面发出 HTTP 请求，以查看他们是否已登录。如果用户已登录，则`ge.tt/my-profile-ping`返回类似的内容，否则。`1``0`

扩展程序与浏览器共享相同的 cookie，因此您只需要测试它们是否已登录并继续在您的扩展程序中显示仅登录数据。

另外，不要忘记在您的扩展清单中为域 ge.tt 和 www.ge.tt 启用请求，可能还有 https 版本（如果您还没有）

像这样的东西在你的`manifest.json`：

```
...
"permissions": [ "http://ge.tt/*", "https://ge.tt/*", "http://www.ge.tt/*", "https://www.ge.tt/*" ]
... 
```

# php - 在 PHP 和 JS 中进行表单验证的最佳方式

> ID：12262199
> 
> 赞同：2
> 
> 时间：2012-09-04T11:04:21.607
> 
> 标签：php, javascript, forms, validation

我想知道进行可靠表单验证的最佳方法是什么。

JavaScript 做得很好，但它不是可靠验证的基础，因为它可以被操纵甚至禁用。

如果您使用 PHP 检查数据并在发生错误时重新填充表单，则 post 表单存在几个问题。

*   如果表单显示没有重定向，那么如果用户想重新发送数据，F5会显示一个确认框，这不是很漂亮。
*   如果用户再次被重定向到表单，则数据必须由`GET`or提交`POST`。有了`POST`，又出现了上面提到的 F5 问题。用`GET`, 用 inside 传递值时存在问题`&`（PHP猜测符号后面的另一个参数）
*   第三种方法是将数据存储在数据库中，例如 SUBMITTRIALS 或类似的东西。但是你实际上必须在重定向后清除数据。

另一个问题伴随着表单本身的重新填充：像这样的代码：

```
echo "<input type='text' value='".$val."' />"; 
```

如果变量`$val`包含一个包含撇号的值，这是一个很大的问题，这会生成无效的 HTML。

如您所见，在表单验证场景中有很多失败的可能性。如顶部所述，处理表单验证的最可靠方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:09:37.130

服务器端语言是验证表单的唯一方法。出于相同目的，您可以将表单数据存储在会话或 cookie 中。完成验证后，您可以刷新它们。如果您对数据中的引号有疑问，那么您可以使用 PHP 内置函数`addslashes()`来`stripslashes()`避免它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:17:29.970

你的三个要点，一一说明：

1.  是的，这是正确的，不，它不是很优雅。但正如你所说：重定向解决了这个问题。所以重定向。
2.  不，将＆符号转换为不`&amp;`应该造成问题
3.  为什么要使用数据库来存储这样的数据？会话有什么问题？或者，如果需要：饼干？

在恢复：重定向以避免确认框，如果您需要在服务器端存储一些提交的数据并将＆符号转换为它们的 html 实体，则使用会话，并且您已准备就绪。
转换`&`可以这样实现：

```
var tmpDiv = document.createElement('div');
tmpDiv.innerText = '&';
var entity = tmpDiv.innerHTML;//returns &amp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:40:20.343

我有一些解决方案给你。

1.  您需要将用户重定向到同一页面并释放帖子数据。

    ```
    header("Location: samefile.php?success=true");//or ?errors[]=blabla
    exit();

    if(isset($_GET['success']) && $_GET['success'] == true){
        //handle true
    }else if(/* here you can ask about errors or what ever */){

    } 
    ```

    通过这种方式，您可以避免在刷新时重新发送数据。

2.  使用 $_SESSION 来存储数据而不是数据库。

如果我错了，请纠正我。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-04T11:08:11.317

我正在使用 jquery 表单验证器，效果很好。

在你的头标签中：

```
<script language="javascript" type="text/javascript" src="/media/js/jquery-latest.js"></script>

<script language="javascript" type="text/javascript" src="/media/js/jquery.validate.min.js"></script>
<script>
  $(document).ready(function(){
    $( "#commentform" ).validate();
  });
</script> 
```

然后使用这样的表格：

```
 <form id="commentform" action="/index/addcomment" method="POST">

    <p>
      <input type="text" name="Name" id="name" value="" size="22" class="required" minlength="3">
      <label for="name"><em>*</em><?= _("Name") ?></label>
    </p>

    <p>
      <input type="text" name="EMail" id="email" value="" size="22" class="required email">
      <label for="email"><em>*</em><?= _("EMail") ?> <?= _("(will not be published)") ?></label>
    </p>

    <p>
      <input type="text" name="Url" id="url" value="" size="22">
      <label for="url"><?= _("Website") ?></label>
    </p>

    <p>
      <textarea name="Content" id="comment" cols="100%" rows="10" class="required" minlength="5"></textarea>
    </p>

    <p>
      <input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment">
      <input type="hidden" name="BlogId" value="<?= $this->model->BlogId ?>" />
    </p>

  </form> 
```

更多信息：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# wpf - 绑定 ComboBox 中的默认项

> ID：12262200
> 
> 赞同：0
> 
> 时间：2012-09-04T11:04:22.190
> 
> 标签：wpf, styles

我有一个界限`ComboBox`，我需要显示默认项目“无选择”。`ComboBox`当用户从列表中选择此选项（“无选择”）时，应在没有文本选择和没有选定项目的情况下关闭。

这些是数据资源

```
<UserControl.Resources>
    <my:iTimeKeepBaseDataSet x:Key="iTimeKeepBaseDataSet" />
    <CollectionViewSource x:Key="codeSetsViewSource" Source="{Binding Path=codeSets, Source={StaticResource iTimeKeepBaseDataSet}}" />
    <CollectionViewSource x:Key="allMattersViewSource" Source="{Binding Path=allMatters, Source={StaticResource iTimeKeepBaseDataSet}}" />
    <my:CodeIdToDetailsConverter x:Key="codeIdDetailsConverter" />

</UserControl.Resources> 
```

这是 ComboBox 数据模板

```
 <DataTemplate x:Key="CodeSetDataCellEditTemplate">
                        <ComboBox DataContext="{StaticResource codeSetsViewSource}"
                                  ItemsSource="{Binding}"
                                  SelectedValuePath="{Binding Path=codeSetId}"
                                  SelectionChanged="OnCodeSetsSelectionChanged"
                                  Style="{StaticResource ComboboxTemplate}">

                            <ComboBox.ItemTemplate>
                                <DataTemplate>

                                    <TextBlock>
                                        <TextBlock.Text>
                                            <MultiBinding StringFormat="{}{0} - {1}">
                                                <Binding Path="codeSetId" />
                                                <Binding Path="codeSetName" />
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </DataTemplate> 
```

DataGrid的模板列

```
<DataGridTemplateColumn x:Name="codeSetId1Column"
                                        Width="SizeToHeader"
                                        CellEditingTemplate="{StaticResource CodeSetDataCellEditTemplate}"
                                        Header="Code Set ID 1"
                                        my:DataGridAttachedProperty.ColumnName="codeSetId1"> 
```

请为此建议我一个解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:09:16.413

您可以使用 CompositeCollection

```
 <CompositeCollection>
       <ComboBoxItem IsEnabled="False" Foreground="Black">Select Item</ComboBoxItem>
       <CollectionContainer Collection="{Binding Source={StaticResource DataKey}}" />    
    </CompositeCollection> 
```

但是，你不能在这里使用 Binding，解决方法是使用[BindingProxy](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)和 CompositeCollection

在此处查看[我的答案](https://stackoverflow.com/questions/1188402/combobox-with-empty-item)和评论以获取更多详细信息

# facebook - Facebook 分享按钮正在抓取不同页面的信息

> ID：12262207
> 
> 赞同：1
> 
> 时间：2012-09-04T11:04:49.373
> 
> 标签：facebook, button, share

我有一个 Facebook 自定义分享按钮的代码：

```
<script>
function fbs_click() {
u=location.href;
t=document.title;
window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');
return false;
}
</script>
<a rel="nofollow" href="http://www.facebook.com/share.php?u=<;url>" onclick="return fbs_click()" target="_blank" class="fb_share_link">
<img src="../../../../../image/photography/pics/fb-share.png" alt="Share this!" width="57" height="21" border="0">
</a> 
```

这应该从页面中抓取信息，但由于某种原因它没有，它被重定向到站点的主要 index.html。

我尝试添加 facebook og 标签和额外的代码，但无济于事。

有什么想法吗？

编辑：被告知共享功能已被弃用，我尝试使用提要对话框执行此操作：

```
<a href="https://www.facebook.com/dialog/feed?link=http://www.travel2italy.com/Travel/Italy/Company/photography/index.html&picture=http://www.travel2italy.com/image/photography/pics/homepage/florence1-home.jpg&name=travel2italy.com&caption=Photo%20Gallery&description=A%20Beautiful%20photo%20of%20Florence&redirect_uri=http://www.travelive.com" target="_blank">
<img src="../../../../../image/photography/pics/fb-share.png" alt="Tweet this!" width="57" height="21" border="0">
</a> 
```

但是当我点击链接时，它会将我带到 facebook 并说发生了错误，wth?!:(

编辑2：

我不知道需要 app_id 参数，注册了一个应用程序并且它现在可以工作，但是它去掉了我在链接末尾的#section（我希望它链接到幻灯片中的特定幻灯片)

编辑 3：

现在使用共享器的一些共享按钮似乎确实有效，但不要将所有照片从页面上拉下来让我选择我想要的那个，这太疯狂了，这可能只是一个缓存问题吗？

# android - Android 片段中的导航

> ID：12262217
> 
> 赞同：2
> 
> 时间：2012-09-04T11:05:18.140
> 
> 标签：android, navigation, android-fragments

我尝试使用带有标签的片段。我的应用程序中有三个选项卡，FragA、FragB、FragC。在 FragA 类中，我有一个按钮。如果我点击了按钮，那么想导航到 Class FragNew。我怎样才能做到这一点..

这是我的 FragA 课程：

```
public class AFragment extends Fragment {

    Button next;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.afragment, container, false);
        next = (Button)view.findViewById(R.id.button1);

        next.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(getActivity(), "FragmentA Clicked...", Toast.LENGTH_SHORT).show();
            }
        });

        return view;

    }

} 
```

片段.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#85ff34"
    android:orientation="vertical" >

    <TextView android:id="@+id/textView1"
        android:text="Fragment A"
        android:textColor="#000000"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Next" />

</LinearLayout> 
```

我的 FragNew 课程是：

```
public class FragNew extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.bfragment, container, false);
    }
    } 
```

这是我的要求的看法：

```
MainTabActivity
  ActivityInTab1
    Fragment1 -> Fragment2 -> Fragment3
  ActivityInTab2
    Fragment4
  ActivityInTab3
    Fragment5 -> Fragment6 
```

如何在 FragA 到 FragNew 之间进行导航，并维护 TabGroup Activity 之类的选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T18:04:21.180

以下是从片段导航到新片段的方法：

```
Fragment fragment = new FragNew();
    FragmentManager fm = this.getActivity().getFragmentManager();

    FragmentTransaction transaction = fm.beginTransaction();

    transaction.replace(R.id.container, fragment);
    transaction.commit(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:29:17.537

这可能会帮助您了解更多详细信息[片段详细信息](http://developer.android.com/guide/components/fragments.html)

/** * 帮助函数显示所选项目的详细信息，通过 * 在当前 UI 中就地显示片段，或启动显示它的全新活动。*/

```
void showDetails(int index) {
    mCurCheckPosition = index;

    if (mDualPane) {
        // We can display everything in-place with fragments, so update
        // the list to highlight the selected item and show the data.
        getListView().setItemChecked(index, true);

        // Check what fragment is currently shown, replace if needed.
        DetailsFragment details = (DetailsFragment)
                getFragmentManager().findFragmentById(R.id.details);
        if (details == null || details.getShownIndex() != index) {
            // Make new fragment to show this selection.
            details = DetailsFragment.newInstance(index);

            // Execute a transaction, replacing any existing fragment
            // with this one inside the frame.
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.replace(R.id.details, details);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
            ft.commit();
        }

    } else {
        // Otherwise we need to launch a new activity to display
        // the dialog fragment with selected text.
        Intent intent = new Intent();
        intent.setClass(getActivity(), DetailsActivity.class);
        intent.putExtra("index", index);
        startActivity(intent);
    }
} 
```

# emacs - 在 org-mode 中将 CREATED 日期属性添加到 TODO

> ID：12262220
> 
> 赞同：32
> 
> 时间：2012-09-04T11:05:32.443
> 
> 标签：emacs, elisp, org-mode

我阅读了 org-mode 手册，但找不到将 CREATED 字段添加到新创建的 TODO 的简单方法。然后结合`org-log-done`一个可以计算关闭特定 TODO 所需的时间。这在使用存档文件时特别有用。

例子：

```
* TODO Do something
  CREATED:  [2012-09-02 Sun 23:02]
* DONE Do something else
  CREATED: [2012-09-02 Sun 20:02]
  CLOSED: [2012-09-02 Sun 22:02] 
```

我希望在保存文件时将 CREATED 字段添加到新任务（没有该字段的任务）中。

关于如何实现这一目标的任何建议？使用 Git 之类的东西不是我跟踪 TODOS 创作的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T09:18:11.247

我使用 org-expiry 来实现该功能，它位于 org 的 contrib 目录中。

我使用的基本配置是：

```
;; Allow automatically handing of created/expired meta data.
(require 'org-expiry)
;; Configure it a bit to my liking
(setq
  org-expiry-created-property-name "CREATED" ; Name of property when an item is created
  org-expiry-inactive-timestamps   t         ; Don't have everything in the agenda view
)

(defun mrb/insert-created-timestamp()
  "Insert a CREATED property using org-expiry.el for TODO entries"
  (org-expiry-insert-created)
  (org-back-to-heading)
  (org-end-of-line)
  (insert " ")
)

;; Whenever a TODO entry is created, I want a timestamp
;; Advice org-insert-todo-heading to insert a created timestamp using org-expiry
(defadvice org-insert-todo-heading (after mrb/created-timestamp-advice activate)
  "Insert a CREATED property using org-expiry.el for TODO entries"
  (mrb/insert-created-timestamp)
)
;; Make it active
(ad-activate 'org-insert-todo-heading) 
```

如果您使用的是捕获，它不会自动工作，需要一点胶水。我在这里发布了完整的配置： [https ://gist.github.com/4037694](https://gist.github.com/4037694)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-26T01:09:31.990

您无需使用“defadvice”修改函数即可在捕获时运行到期代码。你应该使用钩子：

```
(add-hook 'org-capture-before-finalize-hook 
          (lambda()
               (save-excursion
                    (org-back-to-heading)
                    (org-expiry-insert-created)))) 
```

'org-insert-todo-heading' 也一样。有一个钩子：

```
(add-hook 'org-insert-todo-heading-hook 
          (lambda()
               (save-excursion
                    (org-back-to-heading)
                    (org-expiry-insert-created)))) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-30T08:36:54.720

一个更轻量级的解决方案是向状态添加`!`标志`TODO`：

```
(setq org-todo-keywords '((sequence "TODO(!)" "DONE"))) 
```

然后：

```
* TODO get of your ass
  - State "TODO"    from    [2016-06-03 to. 10:35] 
```

虽然不是很漂亮。

参考： http: [//orgmode.org/org.html#Tracking-TODO-state-changes](http://orgmode.org/org.html#Tracking-TODO-state-changes)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-27T08:34:36.450

Org 提供了一个钩子`org-after-todo-state-change-hook`，你可以在这里使用它：

> org-after-todo-state-change-hook 是在 'org.el' 中定义的变量。
> 
> 文档：
> 
> 在 TODO 项的状态更改后运行的挂钩。新状态（带有 TODO 关键字的字符串，或 nil）在 Lisp 变量“org-state”中可用。

按如下方式使用它：

```
(require 'org-expiry)

(add-hook 'org-after-todo-state-change-hook
          (lambda ()
            (when (string= org-state "TODO")
              (save-excursion
                (org-back-to-heading)
                (org-expiry-insert-created))))) 
```

org-expiry 是 org-contrib 的一部分，它[包含在 org ELPA 上的 org-plus-contrib 包中](http://orgmode.org/elpa.html)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-30T04:22:05.527

这是一个埋藏的宝藏：

```
(setq org-treat-insert-todo-heading-as-state-change t) 
```

我在[这里](https://lists.gnu.org/archive/html/emacs-orgmode/2010-12/msg00441.html)找到了它，以回应有人说他们想要一个`org-insert-todo-heading-hook`.

刚刚试了一下，确实如此，当 you 时`org-insert-todo-heading`，它算作状态变化，所以 ex:`#+TODO: TODO(t!) | ...`将添加一个日志。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-08T16:12:25.767

如果您使用`org-capture`以下捕获模板创建所有 TODO，则可以解决问题：

```
(setq org-capture-templates
'(
    ("t" "TODO Task" entry (file+headline "~/inbox.org" "Tasks")
         "* TODO %?\nCREATED: %u\nSRC: %a\n%i\n")
    )) 
```

结果将如下所示：

```
* Tasks
** TODO Dummy task
CREATED: [2015-05-08 Fri]
SRC: [[file:~/path/to/file/where/you/created/the/task.org::*heading"][heading]] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-15T11:18:55.950

这是一个不需要外部包的轻量级解决方案。我是从@MarcinAntczak 的回答、@Clément 的评论和[这个类似的线程](https://emacs.stackexchange.com/questions/35751/how-to-add-a-created-field-to-any-todo-task)中得到的。它与`org-capture`和 一起使用`M-S-RET`。把它放在你的 Emacs 初始化文件中（例如`~/.emacs`）：

```
(defun insert-created-date(&rest ignore)
  (insert (format-time-string
       (concat "\nCREATED: "
           (cdr org-time-stamp-formats))
       ))
  (org-back-to-heading) ; in org-capture, this folds the entry; when inserting a heading, this moves point back to the heading line
  (move-end-of-line()) ; when inserting a heading, this moves point to the end of the line
  )

                    ; add to the org-capture hook
(add-hook 'org-capture-before-finalize-hook 
         #'insert-created-date
)

                    ; hook it to adding headings with M-S-RET
                    ; do not add this to org-insert-heading-hook, otherwise this also works in non-TODO items
                    ; and Org-mode has no org-insert-todo-heading-hook
(advice-add 'org-insert-todo-heading :after #'insert-created-date) 
```

我没有将此函数添加到状态更改（例如，从普通标题到`TODO`），因为它需要在属性抽屉中，我更喜欢没有那些额外的行。如果您更喜欢在属性中使用它，请使用查看[此线程](https://emacs.stackexchange.com/questions/35751/how-to-add-a-created-field-to-any-todo-task)中定义的函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-05T07:39:44.430

您可以在创建时使用零配置添加时间戳，但不会标记为已创建。与其手动输入 TODO，不如使用 Cc Ct。然后它将被记录为“状态从“”更改为 TODO 并加盖时间戳。

# c# - 加快保存位图进程

> ID：12262221
> 
> 赞同：0
> 
> 时间：2012-09-04T11:05:36.820
> 
> 标签：c#, save, tiff, multipage

我有 for 循环来保存和保存添加多帧 tiff 图像。如果它在页面中找到一个条形码，它会保存该多帧 tiff 并打开新的。但它会浪费内存并且需要很长时间。我如何加快这个过程？

```
for (int i = 1; i < num_pages; i++)
{
    progressBar1.Value = i;
    myImg.SelectActiveFrame(System.Drawing.Imaging.FrameDimension.Page, i);
    using (Bitmap firstImage = new Bitmap(myImg))
    {
        encoderParameters.Param[0] = new EncoderParameter(encoder, (long)EncoderValue.FrameDimensionPage);

        if (ReadBarcode(firstImage))
        {
            //önceki tifi kapat
            encoderParameters.Param[0] = new EncoderParameter(encoder, (long)EncoderValue.Flush);
            xBitmap.SaveAdd(encoderParameters);

            //yeni tif aç
            int_file++;
            encoderParameters.Param[0] = new EncoderParameter(encoder, (long)EncoderValue.MultiFrame);
            encoderParameters.Param[1] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionCCITT4);

            i++;
            myImg.SelectActiveFrame(System.Drawing.Imaging.FrameDimension.Page, i);

            xBitmap.Dispose();
            xBitmap = null;
            GC.Collect();
            xBitmap = new Bitmap(myImg);
            xBitmap.Save("C:\\taranan\\" + "v" + folderno + "-" + int_file.ToString() + ".TIF", encoderInfo, encoderParameters);             
        }
        else
        {
            xBitmap.SaveAdd(firstImage, encoderParameters);
        }

    }
}
encoderParameters.Param[0] = new EncoderParameter(encoder, (long)EncoderValue.Flush);
xBitmap.SaveAdd(encoderParameters);
xBitmap.Dispose();
xBitmap = null;
myImg.Dispose();
GC.Collect();
opened = false;
MessageBox.Show("Dosya sayısı: " + (int_file - Convert.ToInt32(fileno) + 1)); 
```

}

# c++ - unique_ptr ::运算符'='不可访问

> ID：12262223
> 
> 赞同：2
> 
> 时间：2012-09-04T11:05:42.133
> 
> 标签：c++, c++11, operators, std, unique-ptr

摘要：为什么两个相同类型的对象无法访问'='赋值运算符`std::unique_ptr<Expression, std::default_delete<Expression>>`？请注意，在代码中类型是编写的，`std::unique_ptr<Expression>`但在 IntelliSense 错误中扩展为前者。

## 信息

IDE - 运行 Visual C++ 2010
操作系统 - Windows Vista
目标 - 控制台应用程序试图使用 C++11 的实现

## 一些背景

我已经获得了一个 C++ 表达式评估器的示例，它显然符合新标准，因为应该是可靠的代码给了我错误，我猜这是因为 VC++ 不支持该功能。我得到的第一个错误是'make_unique'方法，VC++说“标识符不存在”，所以我自己实现了

```
template<typename T>
std::unique_ptr<T> make_unique()
{
    return std::unique_ptr<T>(new T());
} // Basically just wrapping 'new'? Not sure why 
```

在网上找到了一个更好的但它给出了错误，这个^没有给出错误。我所做的只是删除 ...Args 模板参数。我有一组看起来像这样的表达式类：

```
class Expression {
    virtual ~Expression() {}
};

class BinaryExpression : public Expression {
public:
     std::unique_ptr<Expression> lhs;
     std::unique_ptr<Expression> rhs;
     virtual char GetType() const = 0; // +,-,/,*
};
// Then MulExpression, DivExpression, PlusExpression, blah blah 
```

现在这是我得到错误的地方，请注意，ParseAdditiveExpression() 的返回类型是

```
// expr, lhs, and rhs are all of the same type
std::unique_ptr<Expression>:
auto rhs = ParseAdditiveExpression();
auto expr = make_unique<MulExpression>(); // Tried using: std::unique_ptr<Expression> expr;
expr->lhs = lhs; // Trouble Makers
expr->rhs = rhs; // All produce
lhs = expr; // The same errors 
```

错误如下：

```
1   IntelliSense: "std::unique_ptr<_Ty, _Dx> &std::unique_ptr<_Ty, _Dx>::operator=(const std::unique_ptr<_Ty, _Dx> &) [with _Ty=Expression, _Dx=std::default_delete<Expression>]" 
(declared at line 2352 of "C:\Program Files\Microsoft Visual Studio 10.0\VC\include\memory")
is inaccessible 
c:\users\s_miller47\documents\visual studio 2010\projects\_vc++\powercalc\mathparser.h  133 
```

现在，我认为这可能与 '=' 的正确大小的 'const' 有关，但我尝试将函数返回类型更改为适合，在返回类型之后使用 * 或 &，尝试 de-在我将其设置为 expr->lhs 之前引用 ('*') 值，甚至尝试过 ('&')

那么，如果操作员无法访问，我该如何解决呢？我必须自己定义运算符吗？（废话）好吧，这里是完整代码：[PasteBin Source Code Link](http://pastebin.com/Ys2tWxcc)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T11:08:43.447

`std::unique_ptr`是不可转让和不可复制的。如果要进行此类分配，则需要使用`std::move()`：

```
lhs = std::move(expr); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T11:09:30.773

的实例`std::unique_ptr`不能被复制；它们只能被移动（因此是“唯一的”）。所以，对于赋值，你必须说你想移动指针：

```
lhs = std::move(expr); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T11:09:10.813

问题是unique_ptr，顾名思义，维护一个**唯一的**指针。这是不推荐使用 autp_ptr 的主要原因之一：它实际上“移动”了赋值中的指针，而不是复制它。这被认为是一件坏事；如果您执行“a=b”，那么您希望有两个相当相同的对象“a”和“b”。您不希望“b”被清空。

因此，为了保持指针的唯一性，unique_ptr 不允许任何形式的复制。

# ruby-on-rails - 无法更改用户密码（设计 gem）

> ID：12262238
> 
> 赞同：1
> 
> 时间：2012-09-04T11:06:36.970
> 
> 标签：ruby-on-rails, devise

我有这个问题 - 我需要创建一个页面，用户可以通过提供他的当前密码来更改他的密码。对于这个页面我需要，对于其他 - 不。

我遵循了这个[https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password) - 我想使用解决方案 #3

我创建了新的控制器并添加了适当的东西。

这是我的控制器：

```
class EditUserController < ApplicationController
  before_filter :authenticate_user!

def edit_password
 @user = current_user
end

def update_password
 @user = User.find(current_user.id)
 if @user.update_with_password(params[:user])
  # Sign in the user by passing validation in case his password changed
  #sign_in @user, :bypass => true//commented this, because when I'm entering current_password
  #redirect_to root_path         //it just redirects me to root_path
  redirect_to root_path
 else
   render "edit_password"
 end
end

end 
```

**注册控制器**

```
def update
 self.resource = resource_class.to_adapter.get!(send(:"current_#{resource_name}").to_key)

 params[:user].delete(:password) if params[:user][:password].blank?
 params[:user].delete(:password_confirmation) if params[:user][:password_confirmation].blank?

 if resource.update_attributes(params[resource_name]) 
  set_flash_message :notice, :updated if is_navigational_format?
  sign_in resource_name, resource, :bypass => true
  respond_with resource, :location => after_update_path_for(resource)
 else
  clean_up_passwords(resource)
  redirect_to :back
 end 
```

结束和我来自edit_password.html.erb的代码

```
 <%= form_for(@user, :url => { :action => "update_password" }, :method => :put) do |f| %>   
   <%= devise_error_messages! %>
  ...other fields...
  <% end %> 
```

和路线：

```
 match "/edit_password", to: 'edit_user#edit_password'
     put "edit_user/update_password" 
```

**但是当我提交表格时 - 什么都没有改变。没有错误，只是将我重定向到**

```
 edit_user/update_password 
```

我该如何解决这个问题？我做错了什么？

# oracle - 在选择与调用临时表中调用函数

> ID：12262242
> 
> 赞同：0
> 
> 时间：2012-09-04T11:07:15.563
> 
> 标签：oracle

只是看看是否有任何方法可以实现以下行为。

目前我正在做

```
select * from table_1 t1  where function_call(t1.col1, t1.col2) <> 0; 
```

我调用函数 function_call 的原因是，该函数具有我无权访问的表 table_2。我可以访问的唯一方法是通过一个包。

有什么方法可以将上述行为更改为，在 from 子句中包含表信息，而不是在 where 子句中调用 function_call。

喜欢 ，

```
select * from table_1 t1, package_x.get_table_2() where t1.col1 = 1 and t1.col2 = 1 and t1.col3 = t2.col3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:28:39.220

我同意从 WHERE 子句调用函数可能会导致性能下降，因为这很可能会导致`TABLE_1`对`TABLE_1`. 我可以想到您的网站可以做的几件事：

1.  授予对 TABLE_1 的必要访问级别。
2.  在 TABLE_1 上创建一个视图来限制可以看到的数据，并授予对视图的适当访问权限，或者
3.  忍受缓慢的访问时间。

分享和享受。

# iphone - 提取一个旋转的矩形区域 - iOS 版

> ID：12262246
> 
> 赞同：-1
> 
> 时间：2012-09-04T11:07:32.740
> 
> 标签：iphone, objective-c, ios, ios5, opencv

嗨，我一直在尝试为所描述的 OpenCV 问题找到 iOS 解决方案 ->[这个问题在这里。](http://answers.opencv.org/question/497/extract-a-rotatedrect-area/). 简而言之：

> 有人可以向我解释如何将 RotatedRect 提取到子矩阵图像。基本上，使用 cvSetImageROI 之类的东西从图像中提取倒置矩形区域？

有谁知道我应该如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:59:31.520

[这个帖子](https://stackoverflow.com/questions/3763978/360-panorama-librarys-for-ios)有很多关于在 iPhone 上制作全景图的工具、库和应用程序的建议。

# android - AsyncTask 下载图像中的异常

> ID：12262249
> 
> 赞同：0
> 
> 时间：2012-09-04T11:07:36.997
> 
> 标签：android, exception, android-asynctask

请参阅我关于[AsyncTask 中 IllegalStateException 的](https://stackoverflow.com/questions/12261285/illegalstateexception-in-asynctask)问题。

我从此任务的 onPostExecute() 调用了以下 AsyncTask（在此链接中引用）。

```
 public class SaveImageAsync extends AsyncTask<Context, Integer, String> {
        private Bitmap bitmap = null;
        private ArrayList<String> imageUrls = null;
        private ArrayList<ImageView> imageViews = null;
        int index = 0;

        public SaveImageAsync(ArrayList<ImageView> imageViews,
                ArrayList<String> imageUrls) {
            this.imageUrls = imageUrls;
            this.imageViews = imageViews;
            }
    @Override
    protected String doInBackground(Context... params) {
        boolean bRC;

        String imageName, imageLocalPath, imageURL;

        try {

            for (int i = 0; i < imageUrls.size(); i++) {

                imageURL = imageUrls.get(i);
                String[] strSplittedImagePath = imageURL
                        .split("/");
                if ((strSplittedImagePath != null)
                        && (strSplittedImagePath.length >= 1)) {
                    imageName = strSplittedImagePath[(strSplittedImagePath.length - 1)];
                } else {
                    imageName = imageURL;
                }

                imageLocalPath = path + imageName;

                bRC = doesFileExists(imageLocalPath);

                if (bRC == false) {
                    getImageFromServer(CommonSettings.mSTstrBaseURL
                            + imageURL, imageLocalPath);
                }

                try {
                    bitmap = BitmapFactory
                            .decodeFile(imageLocalPath);
                } catch (Exception e) {
                }

                if (bitmap == null) {
                    try {
                        new File(imageLocalPath).delete();
                    } catch (Exception e1) {
                    }
                    getImageFromServer(CommonSettings.mSTstrBaseURL
                            + imageURL, imageLocalPath);
                    bitmap = BitmapFactory
                            .decodeFile(imageLocalPath);
                }

                Thread.sleep(300);
                publishProgress();
            }
        } catch (InterruptedException e) {

            e.printStackTrace();
            Log.w(LOG_TAG,
                    "Got InterruptedException inside AsyncTask SaveImageAsync   :   "
                            + e);

        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {

        super.onPostExecute(result);

    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        ImageView imageView = imageViews.get(index);
        while (imageView == null) {
            index = index + 1;
            imageView = imageViews.get(index);
        }
        imageView.setScaleType(ScaleType.FIT_XY);
        imageView.setImageBitmap(bitmap);
        index = index + 1;
        //bitmap.recycle();
    }

    public boolean getImageFromServer(String url, String localPath) {
        boolean bReturn = false;

        File objNewFile;
        try {
            objNewFile = new File(localPath);
            if (!objNewFile.exists()) {
                objNewFile.createNewFile();
            }

            BufferedInputStream objBufferedInput = new BufferedInputStream(
                    new java.net.URL(url).openStream());
            FileOutputStream objFileOutput = new FileOutputStream(objNewFile);
            BufferedOutputStream objBufferOutput = new BufferedOutputStream(
                    objFileOutput, 1024);
            byte[] data = new byte[1024];
            int x = 0;
            while ((x = objBufferedInput.read(data, 0, 1024)) >= 0) {
                objBufferOutput.write(data, 0, x);
            }
            objFileOutput.flush();
            objBufferOutput.flush();
            objFileOutput.close();
            objBufferOutput.close();
            objBufferedInput.close();
            bReturn = true;
        } catch (IOException e) {

        } catch (Exception ex) {
        }
        return bReturn;
    }
} 
```

当按下返回按钮并加载此任务时，它会在 decodeFile() 处引发 OutOfMemoryException。为什么会发生这种情况以及如何解决这个问题？

谢谢

# android - 带有gridview的弹出窗口获取onclick事件

> ID：12262254
> 
> 赞同：0
> 
> 时间：2012-09-04T11:08:12.193
> 
> 标签：android, popup, android-gridview, onclicklistener

我正在显示一个带有图像网格视图的弹出窗口，当用户单击任何网格视图图像时，我正在尝试做一些工作。但是，我无法获取gridview 的onClick 事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:10:03.443

在您`getView()`渲染图像的方法中，调用`setOnClickListener`每个`ImageView`它应该可以工作。

# sql - 根据列组合选择行，但仅选择最新时间戳

> ID：12262258
> 
> 赞同：0
> 
> 时间：2012-09-04T11:08:34.090
> 
> 标签：sql

给定一个非常简化的包含列的表

```
 Name, Action, Status,   Timepoint
1 "A"   "Open"  "OK"      "2012-09-04 10:10:00"
2 "A"   "Close" "OK"      "2012-09-04 10:05:00"
3 "A"   "Close" "ERROR"   "2012-09-04 10:02:00"
4 "B"   "Look"  "NICE"    "2012-09-04 10:05:00"
5 "B"   "Blow"  "COLD"    "2012-09-04 10:00:00"
6 "C"   "Laugh" "OK"      "2012-09-04 10:02:00"
7 "C"   "Laugh" "MUTE"    "2012-09-04 10:00:00" 
```

如何最有效地为*Name*和*Action*组合选择每一行，但只选择最新*Timepoint的**Action*？在上面的示例中，它将返回行

 *```
1, 2, 4, 5, 6 
```

工作实现获取行并使用子查询仅在有 0 行具有相同*Name*和*Action*组合的较新*Timepoint*时才返回。但是当数据集变得很大时，这似乎非常低效。是这样的

```
SELECT Name, Action, Status, Timepoint
FROM foobar
WHERE Name IN (... Names of interest ...) AND 
Status IN (... statuses of interest ...) AND
(SELECT COUNT(*) FROM foobar AS t2 WHERE t2.Name = Name AND t2.Status = Status AND t2.Timepoint > Timepoint) = 0
order by Name, Timepoint 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:11:54.460

```
Select *
from 
(
      select *,
             row_number() over (partition by Name, Action order by timepoint desc) RN
      from yourtable
) v
where RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:12:53.527

```
SELECT Name, Action, Status, MIN(Timepoint)
FROM foobar
WHERE Name IN (... Names of interest ...) AND 
Status IN (... statuses of interest ...)
GROUP BY Name, Status, Action 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:16:54.993

```
SELECT Name, Action, Status, TimePoint
FROM foobar f1
     JOIN (SELECT Name, Status, MAX(TimePoint) as TimePoint
           FROM foobar
           GROUP BY Name, Status) f2 
          ON f1.Name = f2.Name
               AND f1.Status = f2.Status
               AND f1.TimePoint = f2.TimePoint 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:26:01.017

使用 ROW_NUMBER 隔离您想要的行。我喜欢使用只有 id 的 CTE，然后加入原始表。这样，被过滤的行就没有太多的包袱。

```
-- setup
DECLARE @temp TABLE(id INT,name CHAR(1),Action VARCHAR(5),Status VARCHAR(5),Timepoint DATETIME)
INSERT INTO @temp (id,name,Action,Status,Timepoint)VALUES
 (1,'A','Open','OK','2012-09-04 10:10:00')
,(2,'A','Close','OK','2012-09-04 10:05:00')
,(3,'A','Close','ERROR','2012-09-04 10:02:00')
,(4,'B','Look','NICE','2012-09-04 10:05:00')
,(5,'B','Blow','COLD','2012-09-04 10:00:00')
,(6,'C','Laugh','OK','2012-09-04 10:02:00')
,(7,'C','Laugh','MUTE','2012-09-04 10:00:00')

-- solution
;WITH groups AS
(
    SELECT
          id
        , rowNum = ROW_NUMBER() OVER(
            PARTITION BY Name,Action 
            ORDER BY Timepoint DESC)
    FROM @temp
)
SELECT temp.id, name, Action, Status, Timepoint
FROM groups INNER JOIN @temp temp ON temp.id = groups.id
WHERE rowNum = 1 
```*

# c++ - 需要澄清类的虚函数和私有成员

> ID：12262259
> 
> 赞同：0
> 
> 时间：2012-09-04T11:08:36.293
> 
> 标签：c++, inheritance, virtual-functions

在 C++ 中，如果基类的公共虚函数引用了私有成员字段，并且派生类没有覆盖此方法，那么该引用将指向派生类的私有成员

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:11:04.490

基类的方法仍然会作用于基类的成员，即使您将同名的成员添加到派生类（我猜，这就是您想要表达的观点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:11:17.763

不，如果您不覆盖该方法，它将像从基类内部一样被调用，从而引用基类内部的私有方法。

# jquery-mobile - jquerymobile 按钮的 css 未应用

> ID：12262265
> 
> 赞同：0
> 
> 时间：2012-09-04T11:08:55.103
> 
> 标签：jquery-mobile

我正在尝试将删除按钮添加到自定义 div。但是，当页面加载时，jquery 移动按钮不会采用 jquery 的格式，而是像超链接一样显示它。

```
var currDelButton = $("<a>").attr("href","#").attr("data-role","button").attr("data-icon","delete").attr("data-iconpos","left").text("حذف"); 
```

有人知道这个问题吗？

最好的问候阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:12:15.837

如果您在页面加载后添加按钮，那么您需要刷新元素，例如`$("#mybutton").button();`应该可以工作。

这是您提供的代码的工作示例：http: [//jsfiddle.net/ashanova/RQVd8/1/](http://jsfiddle.net/ashanova/RQVd8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:17:03.903

调用`.page`添加新按钮的主包装器。

```
$("#content").page(); 
```

# postgresql - Jasper 报告：无法获取类“org.postgresql.util.PGmoney”的字段“x”的值

> ID：12262266
> 
> 赞同：2
> 
> 时间：2012-09-04T11:08:57.870
> 
> 标签：postgresql, jasper-reports

当我需要在 Order 表中检索一些信息时，jasper 无法从 PGmoney 转换为加倍。我首先搜索了谷歌，但没有结果。

你知道怎么解决吗？

注意：我使用 PostgreSQL 数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T13:13:48.887

这是 PostgreSQL`money`类型[被弃用并且应该避免](http://www.postgresql.org/docs/8.2/static/datatype-money.html)的几个原因之一。奇怪[的是，相同文档的较新版本没有显示弃用警告](http://www.postgresql.org/docs/current/static/datatype-money.html)，但我[和其他人](http://archives.postgresql.org/pgsql-general/2008-05/msg00979.php)不同意这一点，并认为应该不鼓励使用它。

如果可能，请更改您的架构以使用`numeric`，例如，`numeric(17,2)`如果您只想存储整数美分，或者更精确的中间值。在 HQL 中工作时，您将做噩梦`money`，甚至 Java 的`BigDecimal`类（通常用于映射`numeric`字段）都更好，尽管 itw 算术的语法非常笨拙。

如果我是你，我会做一个`ALTER TABLE blah ALTER COLUMN blahcol TYPE numeric(17,2) USING ( regexp_replace(blahcol::text, '[$,]', '', 'g')::numeric );`并忘记存在的类型。`money`

# ms-access-2010 - 使用 VBA 访问 AddItem 女士

> ID：12262270
> 
> 赞同：2
> 
> 时间：2012-09-04T11:09:10.210
> 
> 标签：ms-access-2010

我有一个表格，上面有一个按钮。该按钮基本上将记录从一个表复制到另一个。在读取和复制记录时，还会检查特定值。例如，如果表中的某个字段的值为“”，那么它应该调用另一个允许我输入日期的表单。输入日期并关闭表格后，程序将继续进行复制。也可能发生正在复制的表中的关键字段是重复的。在这种情况下，我应该启动一个“列表框表单”，其中包含一个显示重复记录值的列表框。然后我应该选择我需要复制的正确记录。

```
 Dim NumberCount As Long
     NumberCount = RecordsetElementValue.RecordCount
     If NumberCount > 1 Then
         With Form_F_ListBox.List30
             RecordsetElementValue.MoveFirst
             Do
                With Forms!F_ListBox.List30.AddItem(RecordsetElementValue!E_ElementValue)
                End With
                RecordsetElementValue.MoveNext
             Loop Until RecordsetElementValue.EOF = True
             DoCmd.OpenForm "F_ListBox", acNormal
         End With
     End If 
```

上面的代码示例是我所拥有的，以防有重复记录（NumberCount > 1） 我的 F_ListBox 表单中的列表框应该填充我的记录集中的值。

我现在遇到运行时错误 6014。必须将 RowSourceType 属性设置为“值列表”才能使用此方法。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:13:16.740

在 MS Access 中设置组合框或列表框的行源的常用方法是使用 SQL 语句，但您也可以使用列表。这由行源类型控制。

```
Me.MylistBox.RowSourceType = "Value List" 
```

从您的笔记来看，行源的 SQL 语句似乎更容易：

```
Me.MylistBox.RowSource = "SELECT ID FROM MyTable" 
```

# python - PyQt 打印原始 PDF

> ID：12262274
> 
> 赞同：5
> 
> 时间：2012-09-04T11:09:11.843
> 
> 标签：python, pdf, printing, pyqt4

假设我在当前目录中有一个*test.pdf*文件，我想使用*PyQt gui Printer*将此原始文件发送到打印机。

以下 Python3 代码打印 PDF 源代码！我不希望 Qt 为我构建 PDF，而只需使用 gui 对话框将其发送到打印机。

这应该适用于任何操作系统，（无`lp`命令）......假设打印机设备本机理解 PDF。

```
import sys, PyQt4.QtCore, PyQt4.QtGui

def pdf():
    pdf = open('test.pdf', encoding='utf-8').read() # ascii PDF here
    doc = PyQt4.QtGui.QTextDocument(pdf)
    printer = PyQt4.QtGui.QPrinter()
    dialog = PyQt4.QtGui.QPrintDialog(printer)
    if dialog.exec_() == True:
        doc.print_(printer)

if __name__ == '__main__':
    app = PyQt4.QtGui.QApplication(sys.argv)
    w = PyQt4.QtGui.QWidget()
    but = PyQt4.QtGui.QPushButton('Print', w)
    but.clicked.connect(pdf)  
    PyQt4.QtGui.QVBoxLayout(w).addWidget(but)
    w.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:33:40.747

内置[支持](http://doc-snapshot.qt-project.org/4.8/qprinter.html#OutputFormat-enum)以PDF 格式*编写文档，但不支持**阅读*。

要阅读 PDF 文档，您必须先使用第三方库，或使用外部工具将 pdf 转换为另一种格式（例如文本或 html）。

有关处理 PDF 文档的概述，请参见[此处。](http://qt-project.org/wiki/Handling_PDF)

# android - 使用意图过滤器使我的服务可访问

> ID：12262278
> 
> 赞同：3
> 
> 时间：2012-09-04T11:09:27.747
> 
> 标签：android, android-intent, android-activity, android-service

我希望我的服务可以作为`Share page`用户长按 Web 链接（标准 android 功能）时的默认选项之一进行访问。这是我在清单文件中写的：

```
<service android:name=".ShareLink"
            android:enabled="true">
    <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/plain" />
    </intent-filter>
</service> 
```

但它仍然没有显示出来。我究竟做错了什么？PS 当我对 Activity 做同样的事情时 - 它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:15:59.663

这是不可能的，您必须编写一个虚拟活动来执行此操作。

这是因为，`ResolverActivity`显示名称或选择要启动的适当组件通过查询只有`Activities`与 API 匹配的意图 来获取列表`PackageManager.queryIntentActivities`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:11:34.433

这应该这样做：

```
<intent-filter
    android:label="Open Using My Service">
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="http" />
</intent-filter> 
```

# android - 如何在 Android 中显示多个字体列表并根据该字体更改文本？

> ID：12262280
> 
> 赞同：0
> 
> 时间：2012-09-04T11:09:31.117
> 
> 标签：android, fonts, font-face

我想向用户显示字体列表，并根据所选字体更改 textview 的文本。为此，我需要访问所有可用的字体系列并在微调器中显示它们，当用户选择特定字体时，textview 的字体将发生变化。如何在 Android 中向用户提供字体列表？请提供建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:19:40.157

将字体名称添加到微调器。

```
Spinner fname = (Spinner) findViewById(R.id.spinner1);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.fname_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        fname.setAdapter(adapter);
        fname.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

`R.array.fname_array`保存字体列表的位置。您还必须将 ttf(font) 文件放到 assets 文件夹中，以便在您的应用程序中使用外部字体。

```
public class MyOnItemSelectedListener implements OnItemSelectedListener {
            TextView ptext=(TextView) findViewById(R.id.textView3);
            public void onItemSelected(AdapterView<?> parent,
                View view, int pos, long id) {
                Integer idpos;
                idpos=pos;
                if(idpos==0)
                {
                    Typeface font1 = Typeface.createFromAsset(getAssets(),"Molot.otf"); 

                    ptext.setTypeface(font1);   

                }

                if(idpos==1)
                {
                    //Toast.makeText(parent.getContext(), "The Font name is " +
                            //parent.getItemAtPosition(pos).toString(), Toast.LENGTH_LONG).show();
                    Typeface font1 = Typeface.createFromAsset(getAssets(),"MTCORSVA.TTF"); 
                    ptext.setTypeface(font1);                   

                }
                if(idpos==2)
                {
                    Typeface font1 = Typeface.createFromAsset(getAssets(),"TIMES.TTF"); 

                    ptext.setTypeface(font1);   
                } 

                ptext.setText(text.getText().toString());
            }

            public void onNothingSelected(AdapterView parent) {
              // Do nothing.
            }        
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:22:53.670

在 Android 中，内置的字体选择是：

*   Droid Sans
*   Droid 无单声道
*   机器人衬线

您可以通过复制 .ttf 文件并将其放置在 assets 文件夹中来加载自定义字体。要加载自定义字体，请创建一个 Typeface 对象并将其设置为视图。

```
Typeface type = Typeface.createFromAsset(getAssets(),"fonts/arial.ttf");
txtyour.setTypeface(type); 
```

# file - 将文件传递到 JBossAS 和从 JBossAS 传递到客户端

> ID：12262282
> 
> 赞同：0
> 
> 时间：2012-09-04T11:09:32.780
> 
> 标签：file, jboss, rmi, jboss7.x

我有客户端服务器应用程序，带有 JBossAS7 和使用服务器提供的远程 EJB 的客户端。我必须将文件从客户端传递到服务器，然后通过 InputStream 对其进行进一步处理。还必须将文件从服务器传递到客户端，在服务器上我得到 OutputStream。文件大小没有限制，甚至可能是 5GB。我该怎么做才能解决这种情况？传递 byte[] 数组似乎不是一个好的解决方案，RMI 限制了我读过的大小。RMIIO 是 GPL（我需要免费用于商业用途的解决方案）。http传输是唯一合理的方法吗？

编辑：似乎 RMIIO 总是 LGPL！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T12:36:16.760

您可以考虑设置一个运行在 JBoss AS 上的 Netty 服务器，如本[Netty 教程](http://www.mastertheboss.com/netty/jboss-netty-tutorial)中所示，并使用裸套接字传递数据。
另一种选择是通过使用 Servlet 的简单 HTTP 传输来实现 HTTP。
我会排除 EJB，因为它们是事务组件，并承认您设法通过 RMI-IIOP 传递了这些数据，但您仍然必须设置一个巨大的事务超时。
希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T14:27:00.493

RMIIO 是*LGPL*（与 GPL 不同），它可以免费用于商业用途并且不是病毒式的（假设您没有修改 rmiio 库）。

# iphone - 如何处理 iPhone 中的 NSNumberFormatter 问题？

> ID：12262283
> 
> 赞同：0
> 
> 时间：2012-09-04T11:09:36.013
> 
> 标签：iphone, ios5, uitextfield, nsnumberformatter

我正在创建一个具有多个文本字段的应用程序。我想当用户在文本字段中输入一个数字时，在编辑结束时自动添加美元符号。现在，当我编辑文本字段时，更改为 0.00 美元。但我需要编辑以前的值为 5,000.00 美元，但是当我在文本字段中添加 0 以更改 500,000.00 美元时。但我只得到输出 $0.00 我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:20:51.027

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"begin editing=$%f",[firstnametextfield.text floatValue]);
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSLog(@"end editing=$%f",[firstnametextfield.text floatValue]);
} 
```

输入为 500，

输出将是，开始编辑=$0.000000 结束编辑=$500.000000

所以你应该阅读 textfield.text in `textFieldDidEndEditing:`or `textFieldShouldReturn:`..

# asp.net - HTTP 401.3 - Windows 身份验证拒绝访问

> ID：12262284
> 
> 赞同：1
> 
> 时间：2012-09-04T11:09:38.103
> 
> 标签：asp.net, iis

我正在尝试使用寡妇身份验证从 IIS 运行网站。身份验证窗口弹出，我输入我的凭据三次，然后我在页面上收到此消息

“您无权查看此页面

HTTP 401.3 - ACL 拒绝访问资源 Internet 信息服务”

配置 IIS 5.1 Windows XP - Windows XP SP3

我想我的配置中需要的一切..

```
<authentication mode="Windows"/>
<identity impersonate="true"/>
<authorization>
  <allow users="*"/>
</authorization> 
```

我什至试过这个链接

[http://support.microsoft.com/default.aspx?scid=kb;en-us;896861](http://support.microsoft.com/default.aspx?scid=kb;en-us;896861)

但并没有改变什么。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:18:14.563

检查应用程序文件夹的应用程序池用户权限。您的用户可能没有访问该文件夹的 Windows 权限

# jquery - 隐藏具有向左滑动效果的 div

> ID：12262286
> 
> 赞同：0
> 
> 时间：2012-09-04T11:09:40.333
> 
> 标签：jquery, css

我搜索了主题，有相同的问题，但找不到答案。

可视化我的问题 - 这是我的代码[jsfiddle](http://jsfiddle.net/6MkHE/)

我想让 calc div 向左滑动，如示例底部所示（动画和行为都很完美）。但是当它滑动时，页面的整个内容也必须随之向左滑动。当它向后滑动时，它必须将内容向右移动。内容本身的行为与现在显示的一样，从左侧浮动。

如果有更简单的方法可以做到这一点或标记中有任何错误 - 我会接受任何更正。

提前致谢

更新：

忘了说，当它从页面滑动时，它必须仍然可见 2-3px

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:06:35.397

好吧，我认为我的描述对你来说太复杂和不清楚，对不起我的英语。我已经达到了我想要的，与`$('#calc').animate({width: 'toggle'});`

[这是Jsfiddle 上](http://jsfiddle.net/QAAyt/)的操作结果（更新版本）

# java - 使用选项“-Xinject-code -extension”插入带有 XJC+xsd+jxb 的代码

> ID：12262289
> 
> 赞同：10
> 
> 时间：2012-09-04T11:09:54.207
> 
> 标签：java, jaxb, xjc, extending

我试图使用**xjc的扩展名****“-Xinject-code”**向我生成的类添加一些代码。对于以下简单的 xsd 架构...

 **```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="MyList" >
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="MyItem" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="MyItem">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:int"/>
        <xs:element name="name" type="xs:string"/>
      </xs:sequence>
   </xs:complexType>
  </xs:element>

</xs:schema> 
```

..我已经关联了以下绑定：

```
<?xml version="1.0" encoding="UTF-8"?>
<jxb:bindings 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
xmlns:ci="http://jaxb.dev.java.net/plugin/code-injector"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
jxb:extensionBindingPrefixes="ci "
jxb:version="2.1"
>

<jxb:bindings schemaLocation="test.xsd">
    <jxb:bindings node="/xs:schema/xs:element[@name='MyItem']">
        <ci:code>
            @Override
            public String toString() { return this.getName();}
        </ci:code>
    </jxb:bindings>
</jxb:bindings>

</jxb:bindings> 
```

运行 xjc 会产生以下输出：

```
$ xjc -target 2.1 -verbose -Xinject-code -extension -d . -p generated -b test.jxb test.xsd 
parsing a schema...
compiling a schema...
[INFO] generating code
unknown location

generated/MyItem.java
generated/MyList.java
generated/ObjectFactory.java 
```

但文件“生成/MyItem.java”不包含新方法“toString”。我应该如何解决这个问题？那条消息“未知位置”是什么？

笔记：

```
$ xjc -version
xjc 2.2.4 
```

**编辑：**

将 xsd:element 更改为 xsd:complexType 可以完成以下工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:complexType name="MyItemType">
  <xs:sequence>
        <xs:element name="id" type="xs:int"/>
        <xs:element name="name" type="xs:string"/>
  </xs:sequence>
</xs:complexType> 

  <xs:element name="MyList" >
    <xs:complexType>
      <xs:sequence>
        <xs:element name="MyItem" type="MyItemType" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

</xs:schema> 
```

和

```
<?xml version="1.0" encoding="UTF-8"?>
<jxb:bindings 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
xmlns:ci="http://jaxb.dev.java.net/plugin/code-injector"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
jxb:extensionBindingPrefixes="ci "
jxb:version="2.1"
>

<jxb:bindings schemaLocation="test.xsd">
    <jxb:bindings node="/xs:schema/xs:complexType[@name='MyItemType']">
        <ci:code>
            @Override
            public String toString() { return this.getName();}
        </ci:code>
    </jxb:bindings>
</jxb:bindings>

</jxb:bindings> 
```

我现在可以在文件“generated/MyItemType.java”中看到代码

```
$ tail  generated/MyItemType.java

            @Override
            public String toString() { return this.getName();}

} 
```

但是如何告诉 xjc 在不更改 xsd 文件的情况下生成代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T21:53:39.967

请尝试`/xs:schema/xs:element[@name='MyItem']/xs:complexType`。**

# google-app-engine - 如何在我的个人博客上不显示登录按钮的情况下登录

> ID：12262292
> 
> 赞同：1
> 
> 时间：2012-09-04T11:10:00.207
> 
> 标签：google-app-engine, blog-engine

我决定在 Google App Engine 上写一个个人博客引擎。

但我真的不喜欢在某处添加登录按钮的想法。我如何在没有登录按钮的情况下仍然做管理事情，即发布文章、删除评论等？

一种丑陋的解决方案可能是不显示登录按钮，但仍然提供登录 url，您可以手动输入登录 url。没有太大区别。我不喜欢这个。

有人知道解决这个问题的其他方法吗？我看过很多没有登录按钮的博客，他们是如何实现的？

更新：

一种离线解决方案可能是使用 App Engine 提供的 remote_api，这有点适用，我正在考虑使用它。但您始终需要 App Engine Toolkit 来执行此操作。所以它可能不像在线版本那样便携，在这种情况下，你需要的每件事都只是一个现代的和网络连接。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T12:29:39.860

您可以使用处理程序定义中的`login`选项来限制对应用程序特定资源的访问：`app.yaml`

```
- url: /admin
  login: admin
  script: admin.app 
```

然后使用[用户 API](https://developers.google.com/appengine/docs/python/users/adminusers)，您可以轻松地在主页上检查当前用户是否是管理员，并决定是否显示指向此受保护资源的链接：

```
if users.is_current_user_admin():
   # render link to /admin 
```

# c# - 表单视图 OnPageIndexChanging 事件不起作用

> ID：12262295
> 
> 赞同：0
> 
> 时间：2012-09-04T11:10:12.020
> 
> 标签：c#, formview

我已经在 formview 中将 AllowPaging 设置为 True 。它显示了链接按钮，但它们不起作用（显然它们需要一个函数来执行）。我有 OnPageIndexChangeing 事件，如下所示。你能告诉我如何跳转到下一页并制作寻呼机工作。我在 Page_Load 事件中使用 sp 绑定表单视图。

ASP代码：

```
<asp:FormView ID="form_view_with_sp" runat="server" OnModeChanging="mode_changeing"     OnPageIndexChanging="page_index_chaging"  AllowPaging="true"> 
```

page_index_changed 事件：-

```
 protected void page_index_chaging(object sender, FormViewPageEventArgs e)
    {
    } 
```

页面加载：-

```
 SqlConnection con = new SqlConnection(getconnectionstring());
    SqlCommand cmd = new SqlCommand();
    //cmd.CommandText = "selectprocedure";
    DataTable dt = new DataTable();
    cmd.Connection = con;
    con.Open();
    SqlDataAdapter adb = new SqlDataAdapter("selectprocedure", con);
    form_view_with_sp.DataSource = dt;
    form_view_with_sp.DataBind(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:30:42.130

您需要在 page_index_chaging 事件处理程序中分配 FormView 的 DataSource。请尝试使用以下

```
protected void page_index_chaging(object sender, FormViewPageEventArgs e)
{
    DataTable dt = (DataTable)ViewState["DataSource"];
    form_view_with_sp.DataSource = dt;
    form_view_with_sp.DataBind();
} 
```

记得在创建 DataSource 时将 DataTable 放入 Page_Load 事件中的 ViewState 中。

# iphone - 来自给定纬度和经度 iphone 的短句

> ID：12262297
> 
> 赞同：1
> 
> 时间：2012-09-04T11:10:23.167
> 
> 标签：iphone

在我的应用程序中，我有 5-6 个纬度和经度数组，我想从我当前的位置短距离并将其显示在我的地图视图上，例如：我有 3 个位置位置 A、B 和 C，所以我想缩短它们根据我当前的位置，如果位置 C 靠近我当前的位置，那么首先我想在 MAP 上显示 C 位置，然后计算位置 A 和 B，位置 C 表示如果 B 靠近位置 C，则哪个位置靠近位置 C 然后在地图上显示 B 位置和最后显示位置 A

我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:22:14.527

查看两个位置之间的距离

```
CLLocation *locA = [[CLLocation alloc] initWithLatitude:latA longitude:longA];
CLLocation *locB = [[CLLocation alloc] initWithLatitude:latB longitude:longB];
CLLocation *locC = [[CLLocation alloc] initWithLatitude:latC longitude:longC];
CLLocation *yourLoc = [[CLLocation alloc] initWithLatitude:yourLat longitude:yourLong]; 
```

然后获取该地点与您所在位置之间的距离

```
CLLocationDistance distance = [locA distanceFromLocation:yourLoc];
CLLocationDistance distance2 = [locB distanceFromLocation:yourLoc];
CLLocationDistance distance3 = [locC distanceFromLocation:yourLoc]; 
```

最后比较距离。

# iphone - 如何在 iPhone 中使用 fbconnect 获取好友地址

> ID：12262301
> 
> 赞同：0
> 
> 时间：2012-09-04T11:10:42.490
> 
> 标签：iphone, fbconnect

我想知道是否可以在 iPhone 中使用 fbconnect 查找朋友的位置或地址，基本上我的 iPhone 应用程序中有好友列表，现在我想找到他们在 facebook 中提供的朋友的位置。有没有可能得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:53:37.307

[https://graph.facebook.com/1744353455994565](https://graph.facebook.com/1744353455994565)

朋友 Facebook 用户 ID = 1744353455994565

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:22:53.200

查看 Facebook 开发人员中的 HackBook 示例。它对您很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:26:23.887

查看链接并下载[http://developers.facebook.com/docs/guides/mobile/web/](http://developers.facebook.com/docs/guides/mobile/web/)

# iphone - iPhone 的 xmpp

> ID：12262303
> 
> 赞同：0
> 
> 时间：2012-09-04T11:10:57.273
> 
> 标签：iphone, objective-c, xmppframework

我尝试将**XMPP 框架**与 iPhone 连接，它与**GMAIL**服务器完美配合。但我无法连接到我自己的新聊天服务器。也不认证？

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:46:05.593

检查参数

主机名 端口号 用户名 密码

*   目标：login.oscar.aol.com 5190
*   Gadu-Gadu: appmsg.gadu-gadu.pl 80
*   GTalk：talk.google.com 5222
*   ICQ: login.oscar.aol.com 5190
*   IRC：irc.freenode.net 7000
*   MSN：messenger.hotmail.com 1863（初始​​连接也是 443）
*   简单：localhost 5060（当然你很有可能将它指向其他地方）
*   XMPP：jabber.org 5222
*   雅虎：scs.msg.yahoo.com 5050

# asp.net-mvc - 全局管理asp.net MVC中的意外异常

> ID：12262306
> 
> 赞同：0
> 
> 时间：2012-09-04T11:11:05.427
> 
> 标签：asp.net-mvc, asp.net-mvc-3, exception, exception-handling

我即将结束我的应用程序开发。

一切正常，但如果有人遇到意外异常，我希望能够：

1.  将他重定向到一个用户友好的页面，说明我们遇到了问题。（指定控制器/动作）
2.  记录堆栈跟踪、当前控制器/动作、参数、会话数据等的所有信息

使用 asp.net MVC 的最佳方法是什么？

**编辑**

作为出色答案的补充：我像这里描述的那样集成了 elmah：http: [//joel.net/logging-errors-with-elmah-in-asp.net-mvc-3--part-1--setup](http://joel.net/logging-errors-with-elmah-in-asp.net-mvc-3--part-1--setup) 然后我指定了一些自定义错误页面。所以现在我已经拥有了我需要的一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:13:30.113

使用动作过滤器。

[http://blogs.msdn.com/b/gduthie/archive/2011/03/17/get-to-know-action-filters-in-asp-net-mvc-3-using-handleerror.aspx](http://blogs.msdn.com/b/gduthie/archive/2011/03/17/get-to-know-action-filters-in-asp-net-mvc-3-using-handleerror.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:15:35.380

我建议您使用“Elmah” [http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)

这个包是天赐之物 - 与包装盒上显示的完全一样，对您的源代码的更改几乎为零。

它也可以通过 NuGet 在[http://nuget.org/packages/elmah获得](http://nuget.org/packages/elmah)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:30:48.700

您可以在 global.asax 中捕获错误。有一种方法`protected void Application_Error(object sender, EventArgs e)`可以让您随心所欲。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:47:27.877

看看[PostSharp](http://www.sharpcrafters.com/)，简洁易用。免费注册后即可使用入门版。NuGet 包也可用[http://nuget.org/packages/PostSharp](http://nuget.org/packages/PostSharp)

# ios - UITextField 子类在 becomeFirstResponder 抛出奇怪的异常

> ID：12262307
> 
> 赞同：0
> 
> 时间：2012-09-04T11:11:14.787
> 
> 标签：ios, exception, uitextfield, uiresponder

我有由 UINavigatableTextField 制成的字符框。每次输入后，响应者字符应该继承它的继任者。奇怪的是，在输入第一个字符期间，如果用户每次输入字符“Q”，都会出现不同的异常，例如；

*   EXC_BAD_ACCESS，或
*   2012-09-04 14:42:42.600 Kelime Oyunu[6350:707]-[WebScriptObjectPrivate isForShortcutConversion]：无法识别的选择器发送到实例 0x21b870 2012-09-04 14:42:42.606 Kelime Oyunu[6350:707] ***终止应用程序到期未捕获的异常“NSInvalidArgumentException”，原因：“-[WebScriptObjectPrivate isForShortcutConversion]：无法识别的选择器发送到实例 0x21b870”

被抛出。我的代码在下面收到异常，[next becomeFirstResponder] 行

```
- (void) moveToNextCharacter: (MBNavigatableTextField *) character
{
    dispatch_async(dispatch_get_current_queue(),
               ^{
                   UIControl *next = [character nextField];

                   if(next == nil)
                   {
                       [character endEditing:YES];
                   }
                   else if ([next isKindOfClass:[UIButton class]])
                   {
                       [next sendActionsForControlEvents: UIControlEventTouchUpInside];
                   }
                   else
                   {
                       [next becomeFirstResponder];
                   }
                });
} 
```

我该如何解决这个问题？提前致谢。

编辑 1：找到一个僵尸 [next resignFirstResponder]（感谢@PhillipMills）

编辑2：原来我的问题是由

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    // Something done here...

    // code block of evil zombie summoner
    [textField setText:@"Some text"];

    // Something else done here
} 
```

Profile->Instruments->Zombies 说明在 setText 期间：某个对象被释放（我猜这是之前的字符串）。

我仍然无法解决问题。我的目标是用新的用户输入（replacementString :) 更新上面的 textField。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:09:09.453

所有到 UIKit 对象的消息都必须在主队列上完成。虽然情况可能如此，但此声明：

```
dispatch_async(dispatch_get_current_queue() 
```

很麻烦，因为我们不知道您在哪个队列上收到消息。将其更改为：

```
dispatch_async(dispatch_get_main_queue() 
```

所以它绝对清楚。

此外，在这一行下：

```
UIControl *next = [character nextField]; 
```

添加这些语句：

```
NSLog(@"Character CLASS %@", NSStringFromClass[character class]);
NSLog(@"next CLASS %@", NSStringFromClass[next class]); 
```

确保这些是您认为应该是的。

编辑：关于“unsafe_unretained”的使用：如果 IBOutlet 包含在“self.view”中 - 这是主要视图 - 那么你应该在 iOS 上使用弱 - 所以当视图消失时它会为你消失.

关于“shouldChangeCharactersInRange”，如果您只是查看字符，则返回 YES。如果您更改文本本身 - 通过直接写入字段/视图，则返回 NO。如果您修改文本然后返回 YES，那么您实质上是在更改控件背后的数据，谁知道会产生什么后果。

# android - 在android中获取listview项目索引

> ID：12262310
> 
> 赞同：0
> 
> 时间：2012-09-04T11:11:34.247
> 
> 标签：android, android-listview

我的自定义 ListView 适配器类是这样的。一旦按下项目（onclick），我想获取项目的索引号。如何获取索引号并将其传递给 int.. 我将获取索引号的代码位于 onCreate 方法之后。请帮我！

```
// On holder.txtstormName_Nice button click i want to get selected item index.
public class ListViewCustomAlerts extends BaseAdapter {

    ArrayList<HurricaneBeanClass> itemList;

    public Activity context;
    public LayoutInflater inflater;
    public ListViewCustomAlerts(Activity context,ArrayList<HurricaneBeanClass> arraylist_List) 
    {
        super();
        this.context = context;
        this.itemList = arraylist_List;
        this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    @Override
    public int getCount() 
    {
        return itemList.size();
    }

    @Override
    public Object getItem(int position) 
    {
        return itemList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
         p =position;
       final ViewHolder holder;
        if(convertView==null)
        {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.hurricane_row, null);  
            holder.txtstormName_Nice=(TextView)convertView.findViewById(R.id.hurricaneNameRowTextView);
            convertView.setTag(holder);  

        }
        else
            holder=(ViewHolder)convertView.getTag();
        HurricaneBeanClass bean = (HurricaneBeanClass) itemList.get(position);
        holder.txtstormName_Nice.setText(bean.getStormName_Nice());

        holder.txtstormName_Nice.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
        //here i want item index.................
                HurricaneBeanClass bean = (HurricaneBeanClass) itemList.get(position);
                HurricaneActivity.curlat=bean.getCurentlat();
                HurricaneActivity.curlon=bean.getCurentlon();

...

            }
        });

        return convertView;

    }                  

}

public static class ViewHolder
{
    TextView txtstormName_Nice;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:21:25.887

列表视图项目位置已经出现在参数列表中。

```
public View getView(int position, View convertView, ViewGroup parent) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:22:35.683

如果你想要元素的 id，你可以在 getView 中写：

```
getItemId(position) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:14:26.263

在 getView() 方法中你可以得到它

```
 public View getView(final int position, View convertView, ViewGroup parent) {
 .........
 .....

  System.out.println("Index:"+position);
 } 
```

所以，这里**的位置是你的索引**

# drools - 流口水中的 URLResource，不进行身份验证

> ID：12262311
> 
> 赞同：1
> 
> 时间：2012-09-04T11:11:37.013
> 
> 标签：drools

这是关于流口水的。

我正在尝试访问具有基本身份验证的 URL。我正在使用以下代码，但仍然收到 401 错误。请帮忙。

```
 String urlString =  "testurl"; 
          URL url = new URL(urlString); 
          UrlResource urlResource = (UrlResource)ResourceFactory.newUrlResource(url);
           urlResource.setBasicAuthentication("enabled"); 
          urlResource.setUsername("admin"); 
          urlResource.setPassword("admin"); 
          knowledgeAgent.applyChangeSet(ResourceFactory.newUrlResource(url)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:03:16.057

您需要启用管理员才能读取 pgk。

在 guvnor (http://localhost:8080/drools-guvnor/) -> 管理员 -> 用户权限 -> 打开管理员行，并添加管理员权限。

# linux - SSH 到服务器从文件中读取

> ID：12262317
> 
> 赞同：0
> 
> 时间：2012-09-04T11:11:56.087
> 
> 标签：linux, unix, ssh

> **可能重复：**
> [bash 工具从文件中获取第 n 行](https://stackoverflow.com/questions/6022384/bash-tool-to-get-nth-line-from-a-file)

我想为自己构建一个小型 SSH 管理器，并且我想将所有服务器保存在一个纯文本文件中，我想做一些类似的事情：

```
ssh -i /home/edy/Documents/visually_ops.pem root@((N-th line of my file)) 
```

所以我可以使用该`ssh`命令并将其发送到我的纯文本文件的第 N 行，即主机名。这能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:16:52.270

要打印主机文件的第 n 行，您可以使用`sed`. 例如：

```
sed -n '3p' yourfile 
```

将打印第三行。

```
ssh -i /home/edy/Documents/visually_ops.pem root@$(sed -n '3p' yourfile) 
```

# c++ - 无法从对 main() 的函数调用正确返回值

> ID：12262320
> 
> 赞同：0
> 
> 时间：2012-09-04T11:12:13.607
> 
> 标签：c++, visual-c++

我正在尝试测试这个简单的函数，但是 Opt.status、Opt.Year 值不会返回给 main()。为什么？请帮忙，因为我是 C++ 新手。我正在使用 Visual C++ 来执行这些代码。这是在我的 .cpp 文件中

```
#include "stdafx.h"
#include "iostream"
#include "conio.h"
#include "stdio.h"

using namespace std;

int main() 
{
    Easy_Task obj_EasyTask;
    TimeDateMonthOptions whatOptions=DATE;
    TOptions Opt;
    Opt.status=FALSE;
    Opt.Year=1970;

    printf("Enter code\n");
    scanf("%d",&obj_EasyTask.code);

    cout << "the code entered is: " << obj_EasyTask.code;
    obj_EasyTask.display2(obj_EasyTask.code);

    cout << "\nOutput: " << obj_EasyTask.show();

    printf("\nEnter the options that you prefer\n");
    scanf("%d",&whatOptions);

    obj_EasyTask.display3(whatOptions, Opt);

    cout << "\nOpt.Year: " << Opt.Year;

    if(Opt.status)
    {
        obj_EasyTask.x=(Opt.Year)& 0x00FF;
        obj_EasyTask.y=((Opt.Year)& 0xFF00)>>8;
        cout << "\nX: " << obj_EasyTask.x;
        cout << "\nY: " << obj_EasyTask.y;
        obj_EasyTask.Result=(obj_EasyTask.x)*(obj_EasyTask.y);
    }

    char holdWindow;
    std::cin >> holdWindow;
    return 0;
}

uint16_t Easy_Task::display2(uint16_t code) 
{
    if(code==1)
    {
        c = 7;
    }
    else
    {
        c = 9;
    }
    return c;

}

uint16_t Easy_Task::display3(TimeDateMonthOptions whtOptions, TOptions Opt)
{
    switch(whtOptions)
    { 
        case 0:
        case 1:
        case 2:
        case 3:
            Opt.status=TRUE;
            cout << "\nStatus1: " << Opt.status;
            Opt.Year=1991;
            cout << "\nYear1: " << Opt.Year;
        break;
        case 7: 
            Opt.status=FALSE;
            cout << "\nStatus2: " << Opt.status;
            Opt.Year=2013;
            cout << "\nYear2: " << Opt.Year;
        break;
        default:
            Opt.status=FALSE;
            cout << "\nStatus3: " << Opt.status;
            Opt.Year=2010;
            cout << "\nYear3: " << Opt.Year;
        break;

    }
    return Opt.status, Opt.Year;

} 
```

在我的 .h 文件中，我的类定义如下：

```
#pragma once

#include "targetver.h"
#include <stdio.h>
#include <tchar.h>

typedef unsigned short uint16_t;

#define TRUE 1;
#define FALSE 0;

typedef struct TOptions
{
    bool status;
    uint16_t Year;
};

typedef enum 
{
    YEAR,
    MONTH,
    DATE,
    HOURS,
    MINUTES,
    SECONDS,
    HUNDRETHS,
    UNDEFINED
}TimeDateMonthOptions;

class Easy_Task
{
public:

    uint16_t code, c, x,y, Result;
    uint16_t display2(uint16_t code);

    uint16_t show()
    {

        return c;
    };

    uint16_t display3(TimeDateMonthOptions whatOptions, TOptions Opt);

}; 
```

我遇到的问题是： if(Opt.status)

它不返回 1 的值，而是采用前面定义的默认值。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:14:55.477

您需要通过*引用*传递参数：

```
uint16_t Easy_Task::display3(TimeDateMonthOptions whtOptions, TOptions& Opt) 
                                                                    //^ 
```

`Opt`否则，将在函数中制作和修改副本，调用者将永远不会看到更改。

注意：

```
return Opt.status, Opt.Year; 
```

不会以某种方式返回两个值。这是使用[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)并将返回值`Opt.Year`。但是，如果您通过`Opt`引用传递，则不需要返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:21:12.377

最好还是定义一个函数来返回 TOptions
`TOptions Easy_Task::display3(...);`并返回一个结构。
请记住，您只能从函数返回**一个单一的返回值。**

# mod-security - ModSecurity：规则是否按规则 ID 升序执行？

> ID：12262322
> 
> 赞同：2
> 
> 时间：2012-09-04T11:12:19.037
> 
> 标签：mod-security, mod-security2

我正在创建我的自定义 mod-security 规则，并且我有一个关于规则 ID 是否会影响规则执行顺序的问题。

我目前的设置是：

*   我正在使用 mod-security 版本：2.6.3-1ubuntu0.2
*   我的 mod-security 配置基于[http://mod-security.svn.sourceforge.net/viewvc/mod-security/m2/trunk/modsecurity.conf-recommended](http://mod-security.svn.sourceforge.net/viewvc/mod-security/m2/trunk/modsecurity.conf-recommended)（它有 5 个 SecRule 指令 - ids：200000 - 200005）
*   我的规则在一个单独的文件**/etc/apache2/conf.d/modsecurity-activated-rules.conf**中，它们是在 modsecurity 配置**/etc/apache2/conf.d/modsecurity.conf之后加载的**

我的规则是：

```
<IfModule mod_security2.c>
# block all GET requests - learning purposes only
SecRule REQUEST_METHOD "^(GET)$" \ 
    "phase:1,t:none,auditlog,block,id:1001,rev:2,tag:HARDENING"
</IfModule> 
```

**免责声明**：*这是一个简单的规则，可能不是最优的，因为我还在学习。欢迎提出建议*

所以，在我分析了调试文件（激活了 9 级）之后，我的问题出现了：

```
[...]
[4] Recipe: Invoking rule 7f157a85da30; [file "/etc/apache2/conf.d/modsecurity-activated-rules.conf"] [line "11"] [id "1001"] [rev "2"].
[5] Rule 7f157a85da30: SecRule "REQUEST_METHOD" "@rx ^(GET)$" "phase:1,log,t:none,auditlog,block,id:1001,rev:2,tag:HARDENING"
[4] Transformation completed in 4 usec.
[4] Executing operator "rx" with param "^(GET)$" against REQUEST_METHOD.
[9] Target value: "GET"
[6] Ignoring regex captures since "capture" action is not enabled.
[4] Operator completed in 36 usec.
[2] Warning. Pattern match "^(GET)$" at REQUEST_METHOD. [file "/etc/apache2/conf.d/modsecurity-activated-rules.conf"] [line "11"] [id "1001"] [rev "2"] [tag "HARDENING"]
[4] Rule returned 1.[04/Sep/2012:09:30:27 +0000] [107.21.159.51/sid#7f157a854510][rid#7f1573fcf0a0][/poll/13456492248275482/vote/yes][9] Match -> mode NEXT_RULE.
[4] Recipe: Invoking rule 7f157a85e648; [file "/etc/apache2/conf.d/modsecurity.conf"] [line "24"] [id "200000"].
[5] Rule 7f157a85e648: SecRule "REQUEST_HEADERS:Content-Type" "@rx text/xml" "phase:1,auditlog,id:200000,t:none,t:lowercase,pass,nolog,ctl:requestBodyProcessor=XML"
[4] Rule returned 0.
[9] No match, not chained -> mode NEXT_RULE.
[...] 
```

正如调试行所示，我的规则 (id:1001) 在规则 (id:200000) 之前首先执行，即使我的规则是在 20000x 之后读取的。

我认为 ID 在规则执行的顺序上并不重要，因为 OWASP ModSecurity 核心规则集[https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project)的规则 ID 介于 950000 和 990000 之间，并且没有有关特定攻击的规则 ID 范围的信息：SQLi、XSS 等。

综上所述，我的问题是：

1.  规则执行是否由 ID 号决定（最小的号先执行）？
2.  是否有任何文档定义应将哪些规则 ID 范围用于自定义规则？我正在寻找类似的东西：
    *   Mod-security 主要规则：200.000 - 200.xxx
    *   OWASP ModSecurity 核心规则集：950.000 - 999.xxx
    *   自定义规则：1.000.000 - 9.xxx.xxx

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-12T13:48:12.597

正确的**答案**是`ModSecurity`按照 Apache 配置中定义的顺序执行规则。

唯一`ModSecurity`适用的排序是阶段：排序，它确保规则将按阶段执行。

例子：

1.  首先执行阶段：1 中的所有规则（按照它们在配置中写入的顺序）
2.  接下来执行阶段：2 中的所有规则（按照它们在配置中写入的顺序）
3.  ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:32:33.910

1.  一条规则可以没有id。但是如果有一个，在同一阶段，就像你的问题一样

    > 最小的数字首先被执行

    只在同一阶段！

2.  也许商业规则定义了 throse id。[https://ssl.trustwave.com/web-application-firewall](https://ssl.trustwave.com/web-application-firewall)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:46:13.663

ModSecurity 支持两种类型的规则模型，即正安全模型和负安全模型。负安全模型支持基于签名的检测和规则排序，当您想使用**skip、skipafter**关键字跳过规则以避免资源密集型基于正则表达式的模式修补时，规则的排序很重要。其次，基于规则 ID 的规则顺序不是绝对的，可以通过规则更改动态引擎，即第 1 阶段的规则将始终首先执行。我推荐阅读 ModSecurity 手册作为初学者的良好开端。第二种类型的规则是积极的安全模型，其中的顺序无关紧要，因为会维护计数器以检测异常，如果超过阈值则会触发规则。

# javascript - 浮动堆积条形图不堆积

> ID：12262325
> 
> 赞同：9
> 
> 时间：2012-09-04T11:12:46.663
> 
> 标签：javascript, flot

我创建了一个 Flot 堆叠条形图，但这些块似乎没有堆叠——它们都从 0 开始（在图表的底部）。

![流动图](../Images/93d6a713c088d5157cd50967fe4904cc.png)

4个块的值是：

*   亮绿色 - 1
*   紫色 - 28
*   红色 - 83
*   浅绿色 - 195

如果堆叠正确，它的高度应该是 307。有什么想法吗？

```
 drawLineChart: function(el,data,ticks,labelstr) {
      var plot = $.plot(el, data, {
        series: {stack: true,
             lines: {show: false, steps: false},
             bars: {show: true, barWidth: 0.4, align: 'center'}
        },
        xaxis: {
            ticks: ticks
        },
        yaxis: {
            min: 0,
        },
        grid: {
            color: '#aaa',
            borderWidth:0,
            axisMargin:0,
            hoverable: true,
            autoHighlight: false
        },
        legend: {
            show: true,
            position: "ne",
            noColumns: 1
        }
      });
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T15:53:22.433

最可能的问题是您在 flot 之后没有包含堆栈插件。在你的 head 标签中，你应该有这样的东西：

```
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->
<script language="javascript" type="text/javascript" src="../jquery.js"></script>
<script language="javascript" type="text/javascript" src="../jquery.flot.js"></script>
<script language="javascript" type="text/javascript" src="../jquery.flot.stack.js"></script> 
```

在这种情况下，关键是最后一个`script`标签。

除此之外，我不确定问题出在哪里——我运行了你的选项，一切看起来都很好。[在这里查看它的实际应用](http://jsfiddle.net/ryleyb/vNy4A/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-08T00:01:47.303

我在使用 Flot 时遇到了同样的问题，并试图显示堆叠的条形图。我发现在我的情况下，这是由于系列未按日期升序排序引起的。

按日期升序排序后，系列开始正确堆叠。

当需要堆叠负值时，我也遇到了与您相同的情况。本机堆栈插件不支持此功能。[您可以在此处查找用于在条形图](https://github.com/ericliao/flot-stackbars)中堆叠负值的替代插件

# arrays - 如何在matlab中检查数组中的任何元素是否相同？

> ID：12262326
> 
> 赞同：1
> 
> 时间：2012-09-04T11:12:46.647
> 
> 标签：arrays, matlab, element

到目前为止，我有 find(diff(A)==0)，但是这仅在元素相邻的情况下才有用。我想知道如何确定一个数字是否在数组中出现多次，无论位置如何。

提前感谢您的时间和帮助。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:19:55.590

试试这个。如果`A`是你的矩阵

```
C = unique(A); 
```

`C`将包含的唯一元素，`A`因此如果长度相同，您将拥有所有唯一元素。如果你想测试一个特定的值trya

```
c = sum((A == value) 
```

这将返回`A`等于的元素数`value`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:42:14.863

另一种选择是（给定一些矩阵 A）：

```
length(unique(A))<length(A(:)) 
```

如果任何元素相同，则此行的输出将为 1。

# java - 使用 UTF-8 编码创建和写入文件

> ID：12262329
> 
> 赞同：0
> 
> 时间：2012-09-04T11:12:59.880
> 
> 标签：java, file, file-io

这是我的Java代码。

```
File file = new File(path);
StringWriter sw = new StringWriter();
//Do something.
out.println(sw.toString()); //Works fine; prints.
try {
        FileUtils.writeStringToFile(file, sw.toString(), "UTF-8");
    } catch (IOException e) {
        throw new RuntimeException( e );
    } 
```

我还没有创建文件，也没有在执行后创建它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:15:53.417

见[`File.createNewFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile%28%29)。

> 当且仅当具有此名称的文件尚不存在时，以原子方式*创建以此抽象路径名命名的新的空文件。*..

正如@JohnWatts 在评论中提到的：

> ..both`PrintWriter`和您的代码都会创建文件，但 1.3 之前的版本`FileUtils.writeStringToFile`不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:17:04.467

不要使用`StringWriter`，[`PrintWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)而是使用：

```
 PrintWriter w = new PrintWriter(file);
 w.print(string);
 w.flush();
 w.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:25:01.110

`I checked the code and it works.`

我能想到的唯一问题是`path`价值。尝试使用硬编码的路径值。因为我怀疑文件正在被创建而你找不到它。

# batch-file - 如何在批处理文件中做出可编辑的选择答案？

> ID：12262341
> 
> 赞同：0
> 
> 时间：2012-09-04T11:13:32.240
> 
> 标签：batch-file, batch-processing

是否可以在批处理文件中做出可编辑的选择？喜欢-

输入服务器名称：localhost

默认情况下会出现这个 localhost，现在用户可以通过删除 localhost 来编辑它并写入新的服务器名称。

任何人都可以建议我这样做的正确方法...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:18:32.803

`<Enter>`如果用户在未输入任何数据的情况下按下 SET /P，则不会更改目标变量的值。因此，您可以在执行 SET /P 之前设置默认值，然后用户可以通过输入新值来覆盖或按 接受默认值`<Enter>`。

```
@echo off
set "server=:localhost"
set /p "server=Enter server (default=%server%): "
echo the user chose server=%server% 
```

# osx-lion - Tomcat 6 未部署 webapp 文件夹 OS X

> ID：12262344
> 
> 赞同：1
> 
> 时间：2012-09-04T11:13:47.007
> 
> 标签：osx-lion, tomcat6

我已经使用 MacPorts 安装了 tomcat 6 以用于`launchctl`. `launchctl start org.apache.tomcat`在 Catalina 中提供以下结果。*日期*.out：

`java.io.FileNotFoundException: /opt/local/share/java/tomcat6/conf/Catalina/localhost/host-manager.xml (No such file or directory) at java.io.FileOutputStream.open(Native Method)`等等

瞧，conf 中没有名为 Catalina 的文件夹。

我不知道这是否是导致应用程序未部署的原因，但我觉得既然这是一个严重的问题，应该注意。

然后来了`SEVERE: Error deploying web application directory manager java.io.FileNotFoundException: /opt/local/share/java/tomcat6/conf/Catalina/localhost/manager.xml (No such file or directory) at java.io.FileOutputStream.open(Native Method)`

对于 webapps 文件夹中的每个文件夹，我得到

`The scratchDir you specified: /opt/local/share/java/tomcat6/work/Catalina/localhost/examples is unusable.`

我已经在谷歌上搜索了一段时间，但我还没有偶然发现答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:17:30.777

问题与 Macports 中的 Tomcat 和权限有关。我的最终解决方案是手动安装和配置 tomcat。

# javascript - 从 html 锚元素传递窗口对象

> ID：12262352
> 
> 赞同：0
> 
> 时间：2012-09-04T11:14:37.297
> 
> 标签：javascript, html

我编写了一个实用程序函数，它期望窗口对象可以工作。

```
function someFunc(windowObj) { windowObj.someOtherFunc(); } 
```

现在，我想调用`onclick`一个超链接的这个函数，但是下面的代码并没有发送窗口对象。

```
<a href='#' onclick='someFunc(this.window)'>Test</a> 
```

这也不起作用：

```
<a href='#' onclick='someFunc(this)'>Test</a> 
```

我理解在后一种情况下，`this`是指 html 锚元素本身。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:17:34.527

窗口对象是一个全局对象，在没有“this”指针的情况下被引用。

尝试

```
<a href="#" onclick="someFunc(window)">Test</a> 
```

相反，看看是否效果更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:28:54.740

添加到我的评论。

`window`是一个全局对象。`window`您可以执行以下操作，而不是传递该对象

```
<a href="#" onclick="someFunc()">Test</a> 
```

并且功能可以是

```
function someFunc() { window.someOtherFunc(); } 
```

简而言之，您不需要传递`window`对象，因为它可以全局访问

# x86-16 - 如何对 8086 微处理器进行编程？

> ID：12262357
> 
> 赞同：1
> 
> 时间：2012-09-04T11:15:08.683
> 
> 标签：x86-16

有数百万关于如何在汇编中对 8086 微型计算机进行编程的教程，但没有一个解释如何将程序文件放入内存？我假设我必须将十六进制文件保存到内存中，但如何？哪里找程序员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:22:25.853

你用汇编语言编写代码，然后用汇编程序将汇编语言汇编成二进制代码。是的，这是“组装......”这个词的很多用法

Wiki 可以为您提供：[http](http://en.wikipedia.org/wiki/List_of_assemblers) ://en.wikipedia.org/wiki/List_of_assemblers所有 80x86 cpu 的列表...我个人会选择 GAS 并为此使用教程。

也许你想看看“从头开始编程”（PGU），它使用气体，可以在这里在线阅读[http://download.savannah.gnu.org/releases/pgubook/](http://download.savannah.gnu.org/releases/pgubook/)（谷歌给了我链接）

# asp.net-mvc - ASP.NET MVC 模型

> ID：12262358
> 
> 赞同：0
> 
> 时间：2012-09-04T11:15:13.807
> 
> 标签：asp.net-mvc

我有一个视图，当模型填充数据并且模型完全为空时，可以访问该视图。

当模型为空时，表示用户点击了“新建”。

目前，我收到 NullReferenceException 异常，因为 Model 中显然没有任何内容。如果我将一个对象传递给视图，那么浏览器就会冻结，因为该对象内部包含空项。

有没有更快/更好的方法来代替： `MyObject myObj = new MyObj(); myObj.InnerObj = new Object(){data = ....}; ...`

我希望这是有道理的 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:17:31.517

您可以使用[**NullObject**](http://en.wikipedia.org/wiki/Null_Object_pattern)模式：

创建一个子类，`MyObject`该子类具有预先填充的所有属性和有目的地不实现任何行为的方法。例如：

```
public sealed class NullObject : MyObject
{
    public object InnerObj { get; private set; }
    public NullObject()
    {
        InnerObj = new Object { ... };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:42:44.050

这可能不是最聪明的处理方式，但我有时会将依赖模型的代码包装在视图中

```
@if(Model.Property != null) 
```

因此，如果您对“创建”和“编辑”只有一个视图，不同之处在于模型中的属性数量，请使用“if”测试这些属性，然后进行相应的编码。

我们最终实现的一个更好的解决方案（我认为）是一个`enum`我们`"EditState"`用两个值调用的解决方案：`'create'`和`'edit'`. 在viewModel`EditState`中创建 a 属性。设置或检查它的值并相应地渲染视图（使用用于创建的输入或显示，或者您正在设置它。）这是区分创建流程和编辑流程的一种很好且易于阅读的方式。

# asp.net-mvc-4 - asp.net-mvc-4 如何动态引用资源语言文件中的项目

> ID：12262359
> 
> 赞同：1
> 
> 时间：2012-09-04T11:15:19.393
> 
> 标签：asp.net-mvc-4

我想知道我们是否可以在codeigniter的观点中做类似的事情

代码点火器

```
<?
$parent_id = "nav_" . $parent[0];
echo "<span>".lang($parent_id)."</span>";
?> 
```

asp.net-mvc-4

```
@{
string parentId = "nav_" + parent[0];
<span>@Resources.Language. ???   </span>
} 
```

动态引用资源文件中的项目，在asp.net mvc中可以吗？

# linux - linux shell sed 命令

> ID：12262360
> 
> 赞同：1
> 
> 时间：2012-09-04T11:15:24.110
> 
> 标签：linux, bash, shell, command

我有`sedFile.txt`格式为字符串的文件`CONNECTION='mysql://user:user@10.79.19.2:3308/SSMS/SUBSCRIBE';`

我创建了一个脚本，其中包含以下几行：

```
fin=CONNECTION='mysql://user:user@10.79.19.2:3308/SSMS/SUBSCRIBE';  
repla=connection  
sed  -i "s/\$fin/$repla/g" /home/sedFile.txt 
```

即使脚本正在运行，它也不会在我的文件中进行更改。

我试过以下：

```
sed  -i 's/${fin}/${repla}/g' /home/sedFile.txt  
sed  -i 's/^$fin/$repla/g' /home/sedFile.txt  
sed  -i "s/$fin/$repla/g" /home/sedFile.txt  
sed  -i "s/${fin}/${repla}/g" /home/sedFile.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:01:58.607

可能与其他答案相同，但我不会伤害尝试

```
fin="CONNECTION='mysql://user:user@10.79.19.2:3308/SSMS/SUBSCRIBE';"
repla="connection"
sed -i "s|${fin}|${repla}|g" /home/sedFile.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:18:42.993

如果您希望单引号包含在模式中，您必须引用或转义它们：

```
fin="CONNECTION='mysql://user:user@10.79.19.2:3308/SSMS/SUBSCRIBE'" 
```

然后，使用您尝试过的四行中的任何一行（即不是带有 的那一行`\$fin`）。

**更新：**为了使`sed`工作，您不能使用`/`分隔模式和替换，因为该字符已经存在于字符串中。使用不同的分隔符：

```
sed -i "s,$fin,$repla,g" /home/sedFile.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:49:01.087

```
fin="CONNECTION='mysql://user:user@10.79.19.2:3308/SSMS/SUBSCRIBE'"
repla=connection
  in=$fin out=$repla perl -pi.nk -e 's/\Q$ENV{"in"}/$ENV{"out"}/g'  /home/sedFile.txt 
```

# google-bigquery - 在 GROUP BY 中使用时间戳函数

> ID：12262361
> 
> 赞同：12
> 
> 时间：2012-09-04T11:15:26.323
> 
> 标签：google-bigquery

我正在处理一个大型交易数据集，并希望按月对单个客户交易的计数进行分组。我无法在 中使用时间戳函数`GROUP BY`并返回以下错误：

> BAD_QUERY（GROUP BY 中的表达式 STRFTIME_UTC_USEC([DATESTART], '%b') 无效）

是否有一个简单的解决方法来实现这一点，或者我应该建立一个日历表（这可能是最简单的选择）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T14:40:18.863

您必须使用别名：

```
SELECT STRFTIME_UTC_USEC(DATESTART, '%b') as month, COUNT(TRANSACTION)
FROM datasetId.tableId
GROUP BY month 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-15T18:12:59.613

@Charles 是正确的，但顺便说一句，您也可以按列号分组。

```
SELECT STRFTIME_UTC_USEC(DATESTART, '%b') as month, COUNT(TRANSACTION) as count
FROM [datasetId.tableId]
GROUP BY 1
ORDER BY 2 DESC 
```

# mysql - 跨多个数据库的外键

> ID：12262362
> 
> 赞同：2
> 
> 时间：2012-09-04T11:15:29.767
> 
> 标签：mysql, foreign-keys

我有两个数据库：*accounts*和 *company_x*。在两个数据库中，我都有一个表*users*。

**帐户.用户**

```
user_id - pimary key, auto increment
first_name
last_name
time_zone
etc. 
```

**company_x.users**

```
user_id - primary keu, auto increment
global_user_id
first_name
last_name 
```

我想要以下内容：何时进入`accounts.users` `first_name`或`last_name`更改为 update `company_x.users`。

我知道这种方式数据是多余的（我存储在两个地方`first_name`，`last_name`但我决定不跨数据库进行查询）。

这种情况下如何设置外键自动更新`company_x.users`表。

我不能简单地从`company_x.users_first_name`to创建一个外键，`accounts.users_last_name`因为 last_names 不是唯一的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:19:29.890

您可以有一个[复合外键约束](https://stackoverflow.com/a/12240621/623041)：

```
FOREIGN KEY (first_name, last_name)
  REFERENCES accounts.users (first_name, last_name)
  ON UPDATE CASCADE 
```

虽然，正如[@Furqan 评论](https://stackoverflow.com/questions/12262362/foreign-key-across-multiple-databases/12262441#comment16440440_12262362)的那样，可能有更好的方法来实现你想要的。

# joomla - 什么是 Joomla /libraries/cms？

> ID：12262363
> 
> 赞同：0
> 
> 时间：2012-09-04T11:15:30.897
> 
> 标签：joomla, content-management-system, joomla2.5

我遇到了一些 joomla api 的问题。问题是我使用的是最新版本的 joomla 并且找不到在我的代码中调用的 joomla 类的派生位置。我搜索了 joomla api 文档，没有发现与我正在寻找的课程相关的任何内容。

然后，我偶然发现了 joomla 的重构更改日志，并注意到我所追求的功能实际上已从`/libraries/joomla/form`.`libraries/cms/form`

为什么会这样？api文档中似乎没有任何参考`/libraries/cms`。我们怎么知道那里有班级？非常混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:37:50.140

自从Joomla！1.6 代码已逐步拆分为 Joomla! CMS 和 Joomla！平台。[您可以在github 存储库](https://github.com/joomla)中看到这种分离——这是一个跟踪提交给 CMS 和平台的更改的好地方。最简单的方法是[fork 每个存储库并跟踪它们](http://docs.joomla.org/Working_with_git_and_github)。

`/libraries/cms`随着类的更新，如果它们专门应用于 CMS 应用程序（例如，html 表单是应用程序级别的功能而不是平台级别），它们可能会迁移到目录。

我发现听到正在讨论的更改的最佳位置是在各自的 Google 群组 - [Joomla！平台开发](https://groups.google.com/forum/#!forum/joomla-dev-platform)和[Joomla！CMS 开发](https://groups.google.com/forum/#!forum/joomla-dev-cms)

**[编辑]**

类的文档是 Joomla 最难找到的东西！[CMS - 与Platform API reference](http://api.joomla.org/)不同，它似乎没有*当前*的api 列表。通读代码通常更容易。

[在开发者子网站](http://developer.joomla.org/)上也值得关注。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-26T10:05:21.503

如果您想在没有编码的情况下定义卓越的 CMS，Joomla 是您的正确选择。Joomla 是开发人员最喜欢的内容管理系统，是一个易于使用的开源解决方案。如果您想在没有编码的情况下定义卓越的 CMS， Joomla 是您的正确选择。在这篇文章中，您会发现它的一些功能使网站开发变得容易并且是开发人员最喜欢的选择。

# php - 需要访问来自一个的数据 , 已附加 Javascript

> ID：12262367
> 
> 赞同：0
> 
> 时间：2012-09-04T11:15:40.203
> 
> 标签：php, javascript

我有一个管理页面，我可以在其中动态添加和删除表行。该页面加载了数据库中的现有数据（主要包含 sku_code 和 5 个不同的价格），但是当我动态添加行并用相应的 sku 和价格填充它们时，我也想将它们保存在数据库。

问题是我在客户端使用 Javascript（动态添加表行）所做的事情`innerHTML = '<input type="text">`无法通过`$_POST`主变量访问`<form>`

所以基本上我是通过 Javascript 添加的，所以我可以填充它们并将它们保存在数据库中。但是 $_POST 值是空的。Javascript代码工作正常。我不知道应该从哪里开始调试。

这是我正在使用的一些 Javascript 代码

```
function insert_record(){

    var my_table = document.getElementById('my_table')
    var tr = my_table.insertRow(my_table.rows.length-1)
    //id-ul curent, numar toate row-urile - 1 (care este butonul OK)

    var c_id = my_table.rows.length-2

        tr.id = 'row_' + c_id + ''
    var tr_td_1 = tr.insertCell(0)
        tr_td_1.className = 'text2'
        tr_td_1.align = 'center'
        tr_td_1.innerHTML = 'SKU'
    var tr_td_2 = tr.insertCell(1)  
        tr_td_2.className = 'text3'
        tr_td_2.width = '63'
        tr_td_2.innerHTML = '<input name="sku_' + c_id + '" type="text" id="sku_' + c_id + '" size="33" value="">' 
```

....这在包含提交按钮的最后一个表格之前添加了一个表格，之后是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:21:20.097

你应该给出 name 属性。如果您担心无限数量的字段，只需选择输入变量的数组，

像这样

```
<input type="text" name="field1[]"> 
```

现在您可以像这样在帖子中访问它们：

```
$_POST['field1']  //this is an array of fields 
```

**编辑：**

首先，您应该使用像 jquery 这样的库来简化工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:26:14.780

您需要为元素分配标签。然后你可以在下一页中抓住它。

而不是`innerHTML = <input type="text">`尝试使用

```
<script>
      function addElement(tag_type, target, parameters) {
        //Create element
        var newElement = document.createElement(tag_type);

        //Add parameters
        if (typeof parameters != 'undefined') {
          for (parameter_name in parameters) {
            newElement.setAttribute(parameter_name, parameters[parameter_name]);
          }
        }

        //Append element to target
        document.getElementById(target).appendChild(newElement);
      }
    </script> 
```

您可以在单击甚至手动或手动调用此函数`addElement('INPUT','targetTag',{id:'my_input_tag', name:'my_input_tag', type:'text', size:'5'});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:33:42.683

我建议你确保你所有的字段都在里面，`form`并且你已经**命名**`ajax`了所有的字段，而不是像@shail建议 的那样尝试或函数。

在我看来，他们没有解决问题，只是避免它。

# android - 在 multiChoiceItems 警报对话框中加载以前的值？

> ID：12262369
> 
> 赞同：0
> 
> 时间：2012-09-04T11:15:49.903
> 
> 标签：android, android-alertdialog

我有一个 alertDialog 提示用户进行多项选择，我可以进行少量选择并将所选项目保存在 arrayList 中，但是当我再次触发该 alertBox 时，它会被重置并且所有复选框都未选中，我希望它们保留状态我将它们留在原处，直到我手动重置它们。这是如何运作的？我的代码：

```
ArrayList<String> participants = db.getNames();
            final String[] arr = participants.toArray(new String[participants
                    .size()]);
            boolean[] checkedItems = new boolean[participants.size()];
            final ArrayList<String> selectedParticipants = new ArrayList<String>();

            AlertDialog.Builder b = new AlertDialog.Builder(this);
            b.setTitle("Select the participants:");
            b.setMultiChoiceItems(arr, checkedItems,
                    new DialogInterface.OnMultiChoiceClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which,
                                boolean isChecked) {

                            if (isChecked) {

                                selectedParticipants.add(arr[which].toString());
                            }
                        }
                    });
            b.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Toast.makeText(EnterExpense.this,
                            "" + selectedParticipants, Toast.LENGTH_SHORT)
                            .show();

                }
            }).setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:29:59.680

您上面的代码仅是正确的，但您错过的只有一件事是更新 `boolean [] checkedItems`数组列表中的检查项目。一旦用户选择了所有参与者，就会获得选定的参与者位置，并将所有这些位置的 true 添加到`chekedItems`列表中，剩余的项目一旦完成就将其设置为 false，它肯定会起作用！！。

您可以使用`getCheckedItemIds()`或`getCheckedItemPositions ()`从列表视图中获取已检查项目的列表。您应该`AlertDialog.getListView()`首先使用获取对话框的列表视图。

```
b.getListView().getCheckedItemPositions (); 
```

# jquery - 自动完成功能

> ID：12262376
> 
> 赞同：0
> 
> 时间：2012-09-04T11:16:09.057
> 
> 标签：jquery, autocomplete

我们有使用 jquery 1.2.6 和旧版本 jquery UI 的站点。现在我们需要引入自动完成功能。我已经实现了它并且它可以工作，但问题是其他 UI 功能（如选项卡）不起作用。我认为存在版本冲突。有什么办法可以在单独的 JS 文件中单独使用自动完成功能 UI 库。

或者

我需要将 jquery 和 UI 版本升级到最新吗？

请建议。

巴斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:49:38.290

从自动完成演示页面的来源，我注意到了这一点；

```
<script src="../../jquery-1.8.0.js"></script> 
```

与一些旧版本会有一些不兼容。

# python - 使用 bjam 的 pythonpath 功能

> ID：12262377
> 
> 赞同：1
> 
> 时间：2012-09-04T11:16:08.987
> 
> 标签：python, boost, boost-python, bjam

我有一个与 Boost.Python 一起使用的 Jamfile 来包装一些 C++ 类。我让 Jamfile 自动运行 python 脚本并将扩展加载为编译后步骤：

```
rule run-test ( test-name : sources + )
{
    import testing ;
    testing.make-test run-pyd : $(sources) : : $(test-name) ;
} 
```

然后：

```
PROJECT_NAME = example ;
run-test $(PROJECT_NAME) : $(PROJECT_NAME)_ext test_$(PROJECT_NAME)_ext.py ; 
```

这将构建 example_ext.so，然后运行 ​​test_example_ext.py，它会执行一个简单的“import example_ext”，然后进行一些基本测试。

问题是我需要 test_example_ext.py 才能从其他包中导入一些 Python 模块，所以我需要设置 PYTHONPATH。从命令行来看，这不是问题，但即使导出，bjam 似乎也不会将其传递到其衍生的 Python 进程中。

在这种情况下，我正在寻找相当于：

```
$ export PYTHONPATH=.. 
```

即设置Python 搜索路径比我运行bjam 高一级。

我设法[得到](http://boost.2283326.n4.nabble.com/patch-for-PYTHONPATH-in-bpl-test-td2692178.html)的最接近的是弄清楚这可以满足我的要求：

```
$ bjam pythonpath=.. 
```

这实际上有效。但我想在 Jamfile 中设置它，而不是依赖命令行。我读过 bjam 手册，上面说这是一个*属性*，我可以在`<pythonpath>..`某个地方使用。但它没有说在哪里。

所以我的问题是我不知道如何在 Jamfile中指定这个*属性。*它去哪儿了？语法是什么？它是 user-config.jam 中“import python ;”或“using python ...”的一部分，还是 run-pyd 甚至 python-extension 规则的一部分？我已经随机尝试了所有这些，但没有理解或成功。

在`boost_1_50_0/tools/build/v2/tools/python.jam`我发现：

> # pythonpath 特性为 PYTHONPATH # 环境变量指定附加元素
> ，由 run-pyd 设置。例如，pythonpath 可用于
> # 访问作为正在构建的产品的一部分但未
> 安装在开发系统的默认路径中的 Python 模块。
> **feature.feature pythonpath :: 免费的可选路径；**

这似乎是在声明“pythonpath”属性（又名功能），但在什么上下文中？它可以在哪里以及如何使用？

[这个](http://www.boost.org/doc/libs/1_50_0/doc/html/bbv2/extender.html#bbv2.extending.features)页面演示了如何按照这些思路定义一个属性，而不是真正如何或在哪里使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:49:14.803

我相信我可能已经找到了自己问题的答案。

解决方案似乎是`project`下面的规则，带有`requirements`关键字，虽然我还不明白它为什么起作用，或者指定它的含义。

这是我的 Jamfile：

```
PROJECT_NAME = 示例；

导入蟒蛇；

# 在执行运行测试时设置 PYTHONPATH
项目：要求<pythonpath>..；

蟒蛇扩展 $(PROJECT_NAME)_ext ：
  $(PROJECT_NAME).cpp
  $(PROJECT_NAME)_ext.cpp
：
;

# 声明测试目标
运行测试 $(PROJECT_NAME) : $(PROJECT_NAME)_ext test_$(PROJECT_NAME)_ext.py ;

```

为了完整起见，我实际上在一个目录中提取了一个 Jamroot 文件，如下所示：

```
导入蟒蛇；

# 指定Boost项目的路径。如果你移动这个项目，
# 调整此路径以引用 Boost 根目录。
使用项目提升
  ： 。/促进 ;

# 设置所有项目都使用的项目范围的需求
# 全局 ID 为的项目中的 boost_python 库
# /升压/蟒蛇。
项目
  : 要求 <library>/boost/python//boost_python ;

# 一个小“规则”（函数）来清理声明测试的语法
# 这些扩展模块。
规则运行测试（测试名称：来源+）
{
    进口检测；
    testing.make-test run-pyd : $(sources) : : $(test-name) ;
}

```

# java - 连接到 servlet https URL

> ID：12262383
> 
> 赞同：0
> 
> 时间：2012-09-04T11:16:21.967
> 
> 标签：java, spring, ssl, https, httpclient

我想使用 HttpsURLConnection 访问安全 URL，但无法读取内容。

我正在使用[此处](http://humandoing.net/blog/2006/03/06/java-ssl-trust-manager/)给出的 trustmanager 示例，并添加了以下代码来访问页面内容：

```
HttpsURLConnection urlc = (HttpsURLConnection) new URL( <url> ).openConnection();
BufferedReader readIn= new BufferedReader(new InputStreamReader(urlc.getInputStream()));
String eachLine;
String inputLine = "";
while ((eachLine = readIn.readLine()) != null) {
   inputLine += eachLine;
} 
```

问题是，我不断收到错误：

```
java.security.cert.CertificateException: No subject alternative names present 
```

任何想法为什么？谢谢

**编辑**
我忘了提，我正在使用 Spring 执行此操作并尝试从另一个类调用 servlet。

# c# - 通过 Web 请求 C# 获得的带有 JSON 流的字符串编码

> ID：12262387
> 
> 赞同：0
> 
> 时间：2012-09-04T11:16:44.153
> 
> 标签：c#, json, string, encoding

我对 C# 中的字符串有一点问题。实际上，我通过 URL 获取 JSON 流。

```
WebClient webC   = new WebClient();
string jsonStr = webC.DownloadString("http://www.express-board.fr/api/jobs"); 
```

但是当我在控制台中写入字符串时，我遇到了编码问题。

```
[...]"contract":"Freelance/IndÃ©pendant"[...] 
```

我尝试使用在带有 Encoding 类的 stackoverflow 上看到的很多技巧。但不可能，解决问题。当然，如果我直接在我的网络浏览器中使用该链接并在 Notepadd++ 中打开它没有问题。

有时，通过一些编码组合（我认为是 ACSII-> UTF-8），我得到了这个：

```
[...]"contract":"Freelance/IndÃ©pendant"[...] to 
[...]"contract":"Freelance/Ind??pendant"[...] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T11:23:37.693

这实际上按预期返回了字符串：

```
WebClient webC = new WebClient();
webC.Encoding = Encoding.UTF8;
string jsonStr = webC.DownloadString("http://www.express-board.fr/api/jobs"); 
```

# netbeans - 我必须为 XDebug 使用端口 9000 吗？

> ID：12262393
> 
> 赞同：0
> 
> 时间：2012-09-04T11:16:58.667
> 
> 标签：netbeans, wamp, xdebug

我在用：

*   WAMP
*   PHP 5.3
*   XDebug
*   NetBeans

我想调试并将 Netbeans 中的调试端口设置为 9000 （在遵循各种教程之后，包括这个 --> [Xdebug And Netbeans Problem](https://stackoverflow.com/questions/4528569/xdebug-and-netbeans-problem)）。问题是，我不确定端口 9000 的用途。

调试端口 9000 是否意味着我必须在端口 9000 上运行 Wamp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:03:17.643

您不会在端口 9000 上运行 Wamp：它是在端口 9000 上运行的*NetBeans*！

您的调试客户端（在本例中为 NetBeans）需要侦听传入连接，以便 Xdebug 能够建立连接并发送适当的信息。请注意，涉及两个请求：

1.  有人（可能是 NetBeans）连接到 Web 服务器以请求 HTML 文档并启动调试会话。
2.  Xdebug 连接到请求调试会话 (NetBeans) 的任何人，并发送一些带有变量和其他调试信息的 XML。

细节可能因您的设置而异，但这是一般的想法。

您选择的端口无关紧要：

*   它现在可用（没有其他应用程序正在使用它）。
*   它可以从网络服务器访问（没有防火墙/路由器问题）。

# java - 如何在java中的字符串生成器中获取最后一个匹配项

> ID：12262395
> 
> 赞同：0
> 
> 时间：2012-09-04T11:16:59.970
> 
> 标签：java, stringbuilder

我有一个这样的字符串生成器

"abc efg abc hij abc klm"

我想从这个字符串中获取最后一个 abc 以及最后一个匹配之后的数据。如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:19:19.610

```
 StringBuilder text = new StringBuilder("abc efg abc hij abc klm");
 int index = text.lastIndexOf("abc");
 String substring = text.toString().substring(index); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:20:26.050

如下：

```
StringBuilder buffer = new StringBuilder();
buffer.append("abc efg abc hij abc klm");
int lastIndex = buffer.lastIndexOf("abc");
if (lastIndex >= 0) {
    System.out.println(buffer.substring(lastIndex));
} 
```

# javascript - '时间倒流' xkcd

> ID：12262402
> 
> 赞同：5
> 
> 时间：2012-09-04T11:17:20.743
> 
> 标签：javascript, math, date

流行的漫画 xkcd 提出了将时间完成转换为日期的等式：

[![时光倒流](../Images/0d9f91c25de7016df62abcde91e350d2.png "人们告诉我我手头有太多时间，但真正的问题是时间太多了，PERIOD。")](http://xkcd.com/1017/)

我一直在尝试在 JavaScript 中做同样的事情，尽管我不断得到`-Infinity`. 这是代码：

```
var p = 5; // Percent Complete 
var today = new Date(); 
today = today.getTime(); 
var t;
t = (today) - (Math.pow(Math.E, (20.3444 * Math.pow(p,3))) -
Math.pow(Math.E,3));
document.write(t + " years"); 
```

时间将返回一个巨大的数字（毫秒），而且我知道该等式并不意味着处理毫秒 - 那么如何使用 JavaScript 进行高级日期等式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:41:22.610

百分比

```
var p = 5; // Percent Complete 
```

实际上应该是`fraction complete`，所以它变成`0.05`了 5%。然后当接近完成时，`p`接近1并且时间接近有限的限制。

完成 5% 后，减去的时间将`p = 5`接近（大致）

```
exp(20.3444*10^6) 
```

当完成临近时，**远远**超出 的范围`double`，已经`exp(40)`是宇宙年龄的百万倍，`exp(1000)`超出`double`范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:44:25.410

你犯了3个错误：

1.  `p`应该是一个介于 0 和 1 之间的小数，以表示已完成进度的比率。
2.  结果是：
    `T = (current date) - (a number in years)`
    **不是**
    `T = (current date - a number) in years`
    你需要先计算`(e^…-e^3)`，然后减去那么多年`t`
3.  您忘记了`+3`原始公式中的a

**编辑：**

这是一些[作为 JSFiddle 的工作代码](http://jsfiddle.net/PSTfD/)，尽管 Javascript 在大约 75% 完成时已过期

# ios - 使用 ARC 查找对象的保留位置

> ID：12262403
> 
> 赞同：36
> 
> 时间：2012-09-04T11:17:21.667
> 
> 标签：ios, xcode, macos, automatic-ref-counting

我有一个超过必要保留的对象（很可能是由于一个属性`strong`而不是`weak`）。大代码库，所以很难找到在哪里。

使用 ARC 时，如何找到保留该对象的所有行？

如果我没有使用 ARC，我想我可以简单地覆盖`retain`并检查它的调用位置。我可以用 ARC 做类似的事情吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-05T17:27:14.247

为了跟踪应用程序的增长，[Heapshot Analysis](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)已被证明非常有效。它将捕获真正的泄漏和内存的增加，其中分配不是由泄漏引起的。

您可以使用分配工具查看所有保留/释放事件及其回溯。点击分配工具上的小 (i) 按钮并打开“记录引用计数”。启用“仅跟踪活动分配”会减少 Instruments 收集的数据量，使其更快速（并且死分配在这种情况下并不是真正有用，但在其他情况下可能有用）。

这样，您可以深入了解任何分配（通过单击地址字段中的右箭头），查看所有保留/释放事件并准确查看它们发生的位置。

![在此处输入图像描述](../Images/e22cea6c96474199da561dafe870873c.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-04T13:34:49.940

我设法`retain`通过执行以下操作找到了违规行为：

1.  临时添加`-fno-objc-arc`到对象类 Compiler Flags 以禁用该类的 ARC。
2.  暂时覆盖`retain`（只需调用`super`）并在其上放置断点。
3.  每次调用时调试并检查调用堆栈`retain`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-04T12:30:32.540

上周我正在帮助一些朋友在他们的 ARC 项目中调试漏洞。一些技巧：

1/ 构建分析并启动带有泄漏检测的仪器。然后探索当前分配的对象，找到您想要的对象（您可以按名称对其进行排序）并查看其保留/释放历史记录。请注意，保留计数对 ARC 不是很有帮助。您必须逐步手动检查它。

尝试注释所有可能是泄漏源的代码，然后逐步取消注释。

2/ 在对象被创建和销毁时，将 a`NSLog`放入您的`init`和您`dealloc`的观察中。

3/ 不要只看属性定义，观察属性设置器是否手动实现。我在朋友的项目中发现了一个问题，如下所示：

```
@property (weak, nonatomic) id<...> delegate;
```

```
 @interface ... {
    id<...> _delegate;
}

@synthesize delegate = _delegate;

- (void)setDelegate(id<...>)delegate {
    _delegate = delegate;  //with ARC this retains the object!
}
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-10T18:43:51.237

这个解决方案对我有点帮助。它基本上使用方法调配来欺骗 ARC 编译器，使其认为您没有覆盖保留和释放。

```
#import <objc/runtime.h>
...
+ (void)load {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        Class cls = [self class];

        // When swizzling a class method, use the following:
        // Class class = object_getClass((id)self);

        SEL originalSelector1 = NSSelectorFromString(@"retain");
        SEL swizzledSelector1 = NSSelectorFromString(@"myretain");

        SEL originalSelector2 = NSSelectorFromString(@"release");
        SEL swizzledSelector2 = NSSelectorFromString(@"myrelease");

        Method originalMethod1 = class_getInstanceMethod(cls, originalSelector1);
        Method swizzledMethod1 = class_getInstanceMethod(cls, swizzledSelector1);
        Method originalMethod2 = class_getInstanceMethod(cls, originalSelector2);
        Method swizzledMethod2 = class_getInstanceMethod(cls, swizzledSelector2);

        BOOL didAddMethod1 =
        class_addMethod(cls,
                        originalSelector1,
                        method_getImplementation(swizzledMethod1),
                        method_getTypeEncoding(swizzledMethod1));

        if (didAddMethod1) {
            class_replaceMethod(cls,
                                swizzledSelector1,
                                method_getImplementation(originalMethod1),
                                method_getTypeEncoding(originalMethod1));
        } else {
            method_exchangeImplementations(originalMethod1, swizzledMethod1);
        }

        BOOL didAddMethod2 =
        class_addMethod(cls,
                        originalSelector2,
                        method_getImplementation(swizzledMethod2),
                        method_getTypeEncoding(swizzledMethod2));

        if (didAddMethod2) {
            class_replaceMethod(cls,
                                swizzledSelector2,
                                method_getImplementation(originalMethod2),
                                method_getTypeEncoding(originalMethod2));
        } else {
            method_exchangeImplementations(originalMethod2, swizzledMethod2);
        }
    });
}

-(id)myretain {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    NSLog(@"tracking retain now %@",@((uintptr_t)[self performSelector:NSSelectorFromString(@"retainCount")]));
    SEL selector = NSSelectorFromString(@"myretain");
    return [self performSelector:selector withObject:nil];
#pragma clang diagnostic pop
}

-(id)myrelease {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    NSLog(@"tracking release now %@", @((uintptr_t)[self performSelector:NSSelectorFromString(@"retainCount")]));

    SEL selector = NSSelectorFromString(@"myrelease");
    return [self performSelector:selector withObject:nil];
#pragma clang diagnostic pop
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-04T12:19:22.660

如果您使用 ARC，您将永远无法选择添加保留，

![截图1](../Images/ac9cc79c086dc14116f7741bed317573.png)

如果您已使用以下选项将项目转换为 ARC，则会提示您出错

![截图2](../Images/636d431f897da7d8417debbffac4691b.png)

如果您将属性设置为`strong`，那么您应该在整个项目中分配一次对象，例如`self.yourobject = [[NSMutableArray alloc]init];`。这没有捷径可走。

# asp.net - 如何在用户单击浏览器关闭按钮的 asp.net 页面（服务器端）上进行跟踪

> ID：12262404
> 
> 赞同：0
> 
> 时间：2012-09-04T11:17:23.577
> 
> 标签：asp.net

如何在 asp.net 上跟踪用户单击浏览器关闭按钮。我尝试使用页面卸载事件，但当用户单击浏览器关闭按钮时它没有被触发。我需要执行一些操作来删除临时文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:22:54.633

不幸的是，这在服务器端是不可能的，因为当窗口关闭时浏览器不会以任何方式联系网络服务器。

您需要使用 JavaScript 在窗口关闭时触发某种 AJAX 请求。

使用纯 JavaScript 尝试：

```
window.onbeforeunload = function() { /* your ajax request here */ } 
```

或者如果您使用的是 JQuery：

```
jQuery(window).bind("beforeunload", function() { /* your ajax request here */ }) 
```

请注意，这将在每次卸载页面时触发，无论您是实际关闭页面还是发布表单等。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:23:06.137

您可以使用 Javascript 来监听`onunload`事件，然后`__doPostBack`在服务器端触发事件。

请参阅：[如何使用 dopostback](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

# sharepoint - CAML GroupBy 站点

> ID：12262405
> 
> 赞同：0
> 
> 时间：2012-09-04T11:17:26.197
> 
> 标签：sharepoint, sharepoint-2010, caml

我正在创建一个查询所有内容类型“A”列表的 Web 部件。该查询将适用于当前正在从中加载 Web 部件的站点和所有子站点上的列表。我已经能够在 Content Query Webpart 和 CAML Query 中毫无问题地完成此操作。但是，在内容查询 Webpart 中，我可以按列表对应的站点（显示为下拉列表）对结果进行分组。至于使用 CAML 做同样的事情，我无法对站点进行分组（我无法找出在 groupby 标记中放入什么值）。任何帮助将不胜感激。提前致谢！

**前任。**

```
<groupby>
What goes here?
</groupby> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:55:09.550

因此，您似乎不能在 QueryOverride 中使用 groupby ...实现此目的的方法是使用 QueryOverride 执行**Where**和**OrderBy**然后导出 webpart 并修改 XML。更改应该是的值：

```
<property name="GroupBy" type="string" /> 
```

至

```
<property name="GroupBy" type="string" >ColumnName</property> 
```

在我的情况下，因为我想按站点分组 ColumnName 将是**ProjectProperty.Title**

让最终代码看起来像这样：

```
<property name="GroupBy" type="string" >ProjectProperty.Title</property> 
```

希望这对某人有帮助！

# javascript - 在javascript函数中获取按钮名称

> ID：12262408
> 
> 赞同：0
> 
> 时间：2012-09-04T11:17:33.030
> 
> 标签：javascript, asp.net

我有一个带有 runat=server 标记的 html 按钮，其名称已在运行时动态设置。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        btnShowHideCols.Name = "some text here";
    } 
```

按钮 HTML 代码如下所示。

```
 <input id="btnShowHideCols" type="button" value="+/-" runat="server" onclick="return btnShowHideCols_onclick()" /> 
```

如何在 javascript 函数中获取按钮名称表单？我可以在那里找到事件的发送者吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:21:55.153

你可以这样做：

```
 <input id="btnShowHideCols" type="button" 
value="+/-" runat="server" onclick="return btnShowHideCols_onclick(this)" /> 
```

然后：

```
function btnShowHideCols_onclick(el) {
   el.getAttribute("name");
} 
```

在编写类似事件`onclick=""`或`onchange=""`任何其他事件时，您可以使用 this 引用当前对象。

另外，请注意，名称与您的代码中的名称不同。会改成ctl00$content$test之类的，跟ID一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:20:51.693

我对你想做什么感到很困惑。

是这个吗：

```
document.getElementByid("btnShowHideCols").getAttribute("name") 
```

^将返回名称

然后用它把它发送到服务器..还是我错了？

希望这可以帮助！

# ios - 在 ios 应用程序退出时执行操作

> ID：12262411
> 
> 赞同：1
> 
> 时间：2012-09-04T11:17:39.700
> 
> 标签：ios, objective-c, action, exit, home-button

当用户按下主页按钮（退出）时，如何在 iOS 上分配操作？我想要一个使用用户登录功能的应用程序，并且我希望在退出时用户退出。我不想为此使用按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:26:41.427

使用方法，

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

在您的应用程序的委托中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:28:31.303

您不能以编程方式退出应用程序，您可以使用`exit(1)`，但这不是一个好习惯，您的应用程序可能会被 Apple 拒绝。

`applicationDidEnterBackground`将被要求按下主页按钮。试着在这里处理一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:26:52.433

将你的动作写在`appDelegate`'''`applicationDidEnterBackground`方法中。

# php - 根据数据库表头将txt/csv数据导入数据库

> ID：12262412
> 
> 赞同：0
> 
> 时间：2012-09-04T11:17:39.430
> 
> 标签：php, mysql, csv, import, header

我的 tex/csv 文件有 3 列`first_name`， 但我的数据库表有两列`last_name`和. 我希望有一个功能，即使表中不存在很多列，它仍然可以选择正确的列并插入到表中。有人建议我使用 php 。我正在尝试，我可以收集我的数据库表列名称，但我无法根据表头插入数据。 `address``first_name``last_name``csv``mysql_fetch_field``mysql_fetch_field`

```
 set_time_limit(0);

    include "connection.php"; //Connect to Database

    if (isset($_POST['submit'])) {

    // Gel table current column name

    $query = "select * from month";
    $result=mysql_query($query) or die (mysql_error());

    $i = 0;
    while ($i < mysql_num_fields($result)) {
        $meta = mysql_fetch_field($result, $i);

        $a=$meta->name;

        $i++;
    }

    //Upload File

    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
            echo "<h1>" . "File ". $_FILES['filename']['name'] ." uploaded successfully." . "</h1>";
            echo "<h2>Displaying contents:</h2>";
            readfile($_FILES['filename']['tmp_name']);
        }

        //Import uploaded file to Database
        $handle = fopen($_FILES['filename']['tmp_name'], "r");

            $header = fgetcsv($handle);

        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $import="INSERT into month($header[0],$header[1]) values('$data[0]','$data[1]')";

            mysql_query($import) or die(mysql_error());
        }

        fclose($handle);

        echo "Import done";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:28:59.193

您可以使用 MySQL 的[`LOAD DATA INFILE`](http://dev.mysql.com/doc/en/load-data.html)命令。如手册中所述：

> 您还可以通过将输入值分配给用户变量而不将变量分配给表列来丢弃输入值：
> 
> ```
> 加载数据文件'file.txt'
>   进入表 t1
>   （column1，@dummy，column2，@dummy，column3）；
> ```

因此，在您的情况下：

```
LOAD DATA INFILE '/path/to/file' INTO TABLE month
  FIELDS TERMINATED BY ',' ENCLOSED BY '"'
  IGNORE 1 LINES
  (first_name, last_name, @dummy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:29:01.013

我不确定我能得到你需要的东西，但我认为你应该像这样`MySQL Load Data Infile`加载它`CSV`：

```
LOAD DATA LOCAL INFILE 'your_file.csv'
INTO TABLE your_table
FIELDS TERMINATED BY ';'
LINES TERMINATED BY '\r\n'
(field1, field2, field3) 
```

这就是我的工作方式`CSV`，它做得很好。

检查此[链接](http://www.tech-recipes.com/rx/2345/import_csv_file_directly_into_mysql/)。

# unit-testing - $this->assertEquals 错误：断言 null 匹配预期失败

> ID：12262413
> 
> 赞同：1
> 
> 时间：2012-09-04T11:17:40.487
> 
> 标签：unit-testing, symfony, phpunit

我正在做我的实体的测试单元：

```
namespace PathtomyBundle\Tests;

require_once dirname(__DIR__).'/../../../app/AppKernel.php';

use Doctrine\ORM\Tools\SchemaTool;

abstract class TestCase extends \PHPUnit_Framework_TestCase
{
/**
 * @var Symfony\Component\HttpKernel\AppKernel
 */
protected $kernel;

/**
 * @var Doctrine\ORM\EntityManager
 */
protected $entityManager;

/**
 * @var Symfony\Component\DependencyInjection\Container
 */
protected $container;

public function setUp()
{
    // Boot the AppKernel in the test environment and with the debug.
    $this->kernel = new \AppKernel('test', true);
    $this->kernel->boot();

    // Store the container and the entity manager in test case properties
    $this->container = $this->kernel->getContainer();
    $this->entityManager = $this->container->get('doctrine')->getEntityManager();

    // Build the schema for sqlite
    //$this->generateSchema();

    parent::setUp();
}

public function tearDown()
{
    // Shutdown the kernel.
    $this->kernel->shutdown();

    parent::tearDown();
}

protected function generateSchema()
{
    // Get the metadatas of the application to create the schema.
    $metadatas = $this->getMetadatas();

    if ( ! empty($metadatas)) {
        // Create SchemaTool
        $tool = new SchemaTool($this->entityManager);
        $tool->createSchema($metadatas);
    } else {
        throw new Doctrine\DBAL\Schema\SchemaException('No Metadata Classes to process.');
    }
}

/**
 * Overwrite this method to get specific metadatas.
 *
 * @return Array
 */
protected function getMetadatas()
{
    return $this->entityManager->getMetadataFactory()->getAllMetadata();
}
} 
```

并且：

```
 namespace pathtomybundle\Tests\Entity;
 use pathtomybundle\Tests\TestCase;
 use pathtomybundle\Entity\Calendars;

 require_once dirname(__DIR__).'/TestCase.php';

 class CalendarsDbTest extends TestCase
 {

protected $Calendars;

    public function setUp()
        {
            parent::setUp();

            $this->Calendars = new Calendars();
        }

    public function testGenerateCalendars()
    {

        $this->Calendars->setBeginDate(new \DateTime('now'));
        $this->Calendars->setDescription('Description');
        $this->Calendars->setEndDate(new \DateTime('now'));
        $this->Calendars->setType('sur titre');

        // Save the ExCalendars
        $this->entityManager->persist($this->Calendars);
        $this->entityManager->flush();

    }

       public function testUser(){

     $this->assertEquals('Description', $this->Calendars->getDescription() );

    } 
```

所以我的问题是：

*   为什么会引发此错误“断言 null 匹配预期失败”？

*   为什么`getDescription()`退货`NULL`？

*   如何测试两个具有一对多关系的表，例如我的表日历与数据库中的另一个表？

**编辑**

对于第三个问题：

例如，我有两个表作业和具有多对一关系的日历，所以我将在日历表中有一个 Job_Id 字段，所以我将如何使用外键“job_id”进行测试单元

在日历实体中：

```
 /**
 * @var Job
 *
 * @ORM\ManyToOne(targetEntity="Job")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="job_id", referencedColumnName="job_id")
 * })
 */
private $jobId; 
```

**编辑-2-**

当我运行我的 phpunit 测试“phpunit -c app”来测试 setters 函数并保存在数据库中时，所以我每次测试都有一个插入数据库的新数据，我的问题是可以做很多测试，但我将数据插入数据库只是一次，因为实际上我必须在每次测试时从数据库中删除数据。

2 - 另一个问题：创建一个database_test我使用“$this->generateSchema();”所以在第一次创建数据库并且当测试再次调用“TestCase”类（上面的代码）时，他试图创建再次数据库测试，然后我必须在第一次之后删除该行，这并不好，那么当我第一次运行我的测试时，我能做些什么来只运行一次这个行？

**编辑-3**

```
 /**
 * @var Job
 *
 * @ORM\ManyToOne(targetEntity="Job")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="job_id", referencedColumnName="id")
 * })
 */
private $job; 
```

这是正常的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:32:18.440

1.  测试用例中的每个测试都会创建自己的 CalendarsDbTest 对象。所以，事实上， $this->Calendar 在每个测试中都是不同的对象（如果你想在测试之间共享它，你需要在 setUp 方法中创建它）

2.  与上面相同（有 null 因为您从不使用 $this->Calendars 调用 setDescription - 它与第一次测试中的对象不同）

3.  我不确定你到底是什么意思。你能更精确地展示你的意思吗（例如你想要测试的方法）？

**编辑：**

答案是：你不测试它。为什么？因为单元测试是单元测试 - 你应该在这里只测试你的实体。坚持，保持关系等是教义的责任，应该在那里进行测试——你不用担心。

您唯一应该测试的是 $jobId 属性的 setter/getter（顺便说一句。它应该是“$job”而不是“$jobId”，因为它是 Job 类的对象 - 不是整数），例如：

```
class CalendarTest extends \PHPUnit_Framework_TestCase
{
     (...)

     public function testSetGetJob()
     {
         $job = new Job();
         $job->setSomeProperty('someValue');  

         $expectedJob = clone $job; // you clone this because in setter you pass object by reference  

         $calendar = new Calendar();
         $calendar->setJob($job);

         $this->assertEquals($expectedJob, $calendar->getJob());
     }

     (...)
} 
```

# .htaccess - Backbone.js 保存在 Slim.php 上得到 '404 not found'

> ID：12262418
> 
> 赞同：0
> 
> 时间：2012-09-04T11:17:54.993
> 
> 标签：.htaccess, backbone.js, slim

我创建了一个 Backbone.js 模型并希望将一个实例保存到我的 MySql 数据库中。

```
var Website = Backbone.Model.extend({
    defaults: {   

                "title":"default title"
            },
    urlRoot : './websites'
});

var website = new Website();
website.save();​ 
```

我正在使用[Slim.php](http://www.slimframework.com)为我的数据库创建一个 Restful API。这是 website\index.php 的开头：

```
<?php

require 'Slim/Slim.php';

$app = new Slim();

$app->get('/websites', 'getWebsites');
$app->get('/websites/:id',  'getWebsite');
$app->post('/websites', 'addWebsite');
$app->put('/websites/:id', 'updateWebsite');
$app->delete('/websites/:id',   'deleteWebsite');

$app->run(); 
```

我的 save() 触发了一个“永久移动”的 POST：

> 请求 URL：localhost/SAMPLE-CODES/backbone.js-mysql-reading-json/websites 请求方法：POST 状态代码：301 永久移动

然后我看到发送了第二个 http 请求：

> 请求 URL：localhost/SAMPLE-CODES/backbone.js-mysql-reading-json/websites/ 请求方法：GET 状态码：404 Not Found

我的问题是：为什么这个请求没有触发对“addWebsite”函数的调用？我看到第二个 http 请求是一个 GET，它应该是一个 POST，但即使这样，也有一个路由......

我有一个文件夹 /websites/

我还根据[Slim 路由文档](http://www.slimframework.com/documentation/stable#routing-indepth)设置了 .htaccess 和 http.conf ：

.htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

http.conf

```
<VirtualHost *:80>
    <Directory "c:/xampp/htdocs/SAMPLE-CODES/backbone.js-mysql-reading-json/websites/">
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

**编辑**：

对 model.save() 的调用会触发一个 http POST 到

> localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites

.

这会得到一个带有响应头的“301 Moved Permanently”：

> localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites/

.

我认为这是由于 Slim 推荐的 .htaccess 设置。

**问题**：这个“301 永久移动”是否可以，或者我在这里已经有问题了？

然后我看到第二个 http GET

> localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites/

* * *

**更新**：

我仍然收到301

> localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites

，然后 GET 到

> localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites/

第二个请求在浏览器上运行并返回

> [{"id":"1","title":"标题站点 1"},{"id":"2","title":"标题站点 2"}]

所以这将是所有记录的响应，但我想保存 1 条记录。似乎重定向 301 是错误的。

我有一种感觉，这是由于 Slim 没有找到匹配的路由（[Slim_Exception_RequestSlash 会触发 301](http://dev.slimframework.com/phpdocs/classes/Slim_Exception_RequestSlash.html)）。

但是为什么我的 Slim 脚本找不到路由呢？

请求

> localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites

匹配：

> $app->post('/网站', function() {

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:32:29.203

我也使用 SlimPHP 并且有一个和你一样的设置。

你用的是什么PHP？如果您使用的版本 >= 5.3，那么您定义路线的方式将不正确。对于较新的 PHP，试试这个：

```
$app->get('/websites', function () {
    // your code to execute
}); 
```

关于你的设置的其他一切对我来说都很正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:25:39.760

由于 orangewarp 和这个问题，问题得以解决：

[为什么我得到一个 301 重定向到带有斜杠的文件夹名称？](https://stackoverflow.com/questions/12302516/why-do-i-get-a-301-redirect-to-folder-name-with-slash)

`DirectorySlash Off`解决方案是在 .htaccess中添加：

我更新的 .htaccess（应用程序调用 Slim.php）：

```
RewriteEngine On
DirectorySlash Off
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

# c++ - 如何使用 128 个元素创建从 -3000 到 3000 的向量

> ID：12262420
> 
> 赞同：0
> 
> 时间：2012-09-04T11:17:57.043
> 
> 标签：c++, matlab, vector

如何在 C++ 中创建它？这是在matlab中。我在谷歌上搜索过，但我找不到这个。知道这个的人可以帮助我吗？

```
a = linspace(-3000, 3000, 128) 
```

这是一个从 -3000 到 3000 的向量，包含 128 个元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T11:20:32.127

一个粗略的例子：

```
#include <vector>

std::vector<double> v(128);     // create new vector with 128 elements

for (int i = 0; i < 128; ++i)   // init vector with required values
    v[i] = -3000.0 + 6000.0 * i / 127.0; 
```

# ember.js - 当子级更改其父级时通知父级 hasMany 列表

> ID：12262422
> 
> 赞同：2
> 
> 时间：2012-09-04T11:18:19.413
> 
> 标签：ember.js, ember-data

假设我有关系 Parent (1) <-> Child (0..n) 和相应的模型

```
Zik.Node = DS.Model.extend({  
    id : DS.attr('number'),  
    name : DS.attr('string'),  
    leafs : DS.hasMany('Zik.Leaf', {key : 'leaf_ids'})  
});  
Zik.Leaf = DS.Model.extend({  
    id : DS.attr('number'),  
    name : DS.attr('string'),  
    node : DS.belongsTo('Zik.Node')  
}); 
```

在某个时候，一个 Zik.Node(id=2) 子 Zik.Leaf 改变了与另一个父 Zik.Node(id = 1) 的关系。现在，如果 Zik.Node 观察到它的叶子，它会收到通知，但叶子列表是相同的。

一种选择是从以前的父级中删除叶子并将其添加到新的父级：

```
oldParent.removeObject(leaf;        
newParent.get('leafs').pushObject(leaf) 
```

但这似乎不对。也许还有其他一些更自动的方法可以让这个工作。我创建了一个小提琴[http://jsfiddle.net/kristaps_petersons/6g22X/11/](http://jsfiddle.net/kristaps_petersons/6g22X/11/)来说明我的观点。两行被注释掉，以查看叶列表更改如何删除它们。

# django - DjangoCMS / Django - 检测当前页面是否为子页面

> ID：12262423
> 
> 赞同：1
> 
> 时间：2012-09-04T11:18:26.100
> 
> 标签：django, if-statement, navigation, parent-child, django-cms

我正在寻找使用 DjangoCMS 自定义 sub_menu.html 模板，目前已经获得了以下菜单代码：

```
{% if children %}
<div class="unit subnav">
<h3>{% page_attribute "menu_title" %}</h3>
<ul>
    {% for child in children %}
        <li class="{% if child.selected %}on{% endif %}{% if child.ancestor %}ancestor{% endif %}{% if child.sibling %}sibling{% endif %}{% if child.descendant %}descendant{% endif %}">
            <a href="{{ child.attr.redirect_url|default:child.get_absolute_url }}" title="{{ child.get_menu_title }}">{{ child.get_menu_title }}</a>
        </li>
    {% endfor %}
    </ul>
</div>
{% endif %} 
```

所以基本上，这会检测页面是否有子页面，然后如果该页面的子页面存在，则添加子导航。

到目前为止，一切都很好。

我的问题是，当我自己导航到子页面时 - 菜单消失了，所以我想检测页面是否是 1 级以下的“子”。这应该停止所有页面都有导航（因为它们都是我认为是主页的子级），但应该允许主导航级别以下的那些菜单出现。

如果有人能伸出援手或指出正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:35:22.477

好的，这对人们来说可能没有意义，但我能够在我的 subnav 模板中使用以下 if 语句来了解这一点......

```
{% if children or request.current_page.level > 0 %} subnav in here {% endif %} 
```

# iphone - 大 UIImage 导致内存不足和崩溃

> ID：12262424
> 
> 赞同：3
> 
> 时间：2012-09-04T11:18:39.460
> 
> 标签：iphone, ios, xcode, cocoa-touch, memory-management

我有一个加载到 UIImageView 中的大图像。该图像是PNG，它的@2x 文件大小是：384K。图像为 5119x2413 像素。用户可以使用捏合手势缩放图像。图像如此之大的原因是，当 UIImageView 通过捏合进行转换时，质量将保持不变。

我遇到的问题是，在某些设备上，尤其是最新的 iPod Touch，它会在尝试显示此屏幕时崩溃。

我已经通过 Instruments 运行了该应用程序，并使用 Leak/Allocations 配置文件对其进行了分析。使用该应用程序时，该应用程序的实时字节通常徘徊在 4MB 左右，但一旦您查看包含 UIImageView 的屏幕，它就会高达 40MB！一旦图像出现在屏幕上，内存就会恢复到 4MB 左右。

我遇到的问题是，在较旧的设备和受内存限制的设备（如 iPod Touch）上，我的应用程序与 SpringBoard 等一些系统服务一起被系统终止。

我尝试使用`[UIImage imageWithContentsOfFile:]`而不是`[UIImage imageNamed:]`加载图像，因为我知道`[UIImage imageNamed:]`缓存图像，但这没有效果。

似乎第一次尝试显示图像时导致的实时内存峰值导致内存不足，并且应用程序正在被操作系统终止。

我很好奇如何解决这个问题，以及 Apple 如何处理在照片应用程序中加载大图像。

只是为了记录，我将 ARC 和 iOS 5.1.1 与 XCode 4.4.1 一起使用。

![在此处输入图像描述](../Images/7b118f66fd4d05e03815ed582edd4e8f.png)

# android - 从 Android 手机的任何屏幕显示警报对话框

> ID：12262425
> 
> 赞同：0
> 
> 时间：2012-09-04T11:18:40.367
> 
> 标签：android, android-alertdialog

按下电源按钮时，我们可以在任何 android 设备中从任何活动中看到警报对话框。就像我想在我的应用程序收到广播意图时显示警报对话一样。我如何实现该功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:22:15.867

1.  将此意图添加到您的 Activity Manifest 标记中。
2.  在您的 Activity 中`onCreate()`，处理您收到的意图：
    *   如果它符合您的意图，请显示对话框。
    *   否则，什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:07:13.187

正如前人所说，您无法拥有此功能，因为它位于 Android 框架代码中，除非您编辑该代码以公开它。您正在寻找的功能示例（来自 Android 代码）位于 PowerUI 类中，该类扩展了 SystemUI。在 SystemUI 中，有一个 Context(mContext)，子类使用它在任何屏幕上显示警报。这就是你需要的。我最近不得不为一个应用程序这样做。我只是反映了 PowerUI 所做的事情，并创建了 SystemUI 的另一个子项。PowerUI 这样做是为了让您知道您的电池电量不足（来自任何活动/屏幕）等等。

这有点像熊，但这就是我相信你在说的。但是，如果您要向公众发布，则对您并没有太大帮助。但是，对于个人应用程序...

# javascript - 从字符串调用 javascript 函数

> ID：12262428
> 
> 赞同：3
> 
> 时间：2012-09-04T11:18:46.433
> 
> 标签：javascript, jquery

我的 javascript 模块中有以下代码，但这需要我使这些函数对外界可见。

```
var mymodule = function() {
    var self = null,
        init = function () { 
            self = this; 
            $('.actionButton').click(function () {
        var worklistId = $(this).data('worklistid'),
            action = $(this).data('action');
        self[action] && self[action](worklistId); //watchout methods marked as not used are used by this invocation
            })
        },
        send = function () {
             // some logic
        },
        finish = function () {
             // some logic
        },
        delete = function () {
             // some logic
        };

    return {
        init: init,
        send: send,
        finish: finish,
        delete: delete
    };
}();

mymodule.init(); 
```

所以我唯一想在我的模块中返回的是 init 函数。但是，当我这样做时，我无法调用函数，因为对象（自身）仅包含在外部可见的 init 函数。

```
return {
    init: init
}; 
```

有没有任何解决方案可以像这样调用我的函数而不让它们对外界可见？请不要使用 if else 语句，因为我的工作流程比本示例中的 3 个操作要大。我想让我的模块尽可能封闭，因为这减少了依赖关系。

**更新**

这是一个更新的jsfiddle，其中一个建议的解决方案，但是这给了我另一个问题。[http://jsfiddle.net/marcofranssen/bU2Ke/](http://jsfiddle.net/marcofranssen/bU2Ke/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:12:55.970

在您的代码示例中，“”到底是什么含糊不清`self`。您应该保持简单，将封装函数用作“私有”方法并返回可以访问它们的“公共”（或 Crockford 称之为“特权”）函数。

这是使用私有函数和变量进行单例的 YUI 方式。示例模式：

```
var mymodule = (function() {
    var internal = {
        'send': function() {},
        'finish': function() {},
        'delete': function() {}
    };
    return {
        'init': function(action) {
            // access to internals, f.ex:
            if ( internal.hasOwnProperty(action) ) {
                 internal[action].call(this); // bring the caller context
            }
         }
    };
}());

mymodule.init('send'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:40:09.613

```
var mymodule = function() {
  var self = {},
     init = function () {  
        $('.actionButton').click(function () {
    var worklistId = $(this).data('worklistid'),
        action = $(this).data('action');
    self[action] && self[action](worklistId); //watchout methods marked as not used are used by this invocation
        })
    };
    self.send = function () {
         // some logic
    };
    self.finish = function () {
         // some logic
    };
    self.delete = function () {
         // some logic
    };
    return{
      init:init
    }
}();

mymodule.init(); 
```

这应该工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:23:52.303

是的，有一种简单（但可能有点混乱）的方法可以做到这一点，而无需使函数对全局对象可见：

```
var privateFunctions = { deleter: deleter, send: send}; 
```

然后，而不是`self[action]();`，只是做`privateFunctions[action]();`，你很高兴。

请注意，我更改`delete`为`deleter`，因为`delete`是保留关键字...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:24:05.930

像这样的东西会起作用：

```
var mymodule = function() {
        var self = this;
        init = function () { 

            $('.actionButton').click(function () {
        var worklistId = $(this).data('worklistid'), action = $(this).data('action');
        self[action] && self[action](worklistId); //watchout methods marked as not used are used by this invocation
            })
        }
        self.send = function () {
            console.log('send');
        }
        self.finish = function () {
            console.log('finish');
        }
        self.delete = function (item) {
            console.log('delete');
        };

    return {
        init: init,
    };
}();

mymodule.init();​ 
```

这是小提琴：

[http://jsfiddle.net/yngvebn/SRqN3/](http://jsfiddle.net/yngvebn/SRqN3/)

通过将`self`-variable 设置为`this`, 在 -function 之外，并将,和函数`init`附加到 self ，您可以使用-function内部的语法`send``finish``delete``self[action]``init`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T11:42:56.267

即使您仅使用 init 属性返回一个对象并动态填充其余对象以使您的模块使用它们，您仍然会在运行时使它们对外部可见。任何想要调试您的模块的人都可以轻松找到它们。

您仍然可以在运行时创建匿名方法，并且它们也将与它们的实现一起可见。

# image - 为什么 og:image 不显示？

> ID：12262430
> 
> 赞同：0
> 
> 时间：2012-09-04T11:19:08.487
> 
> 标签：image, facebook-javascript-sdk

当我分享[http://www.parler-de-sa-vie.net/ecrits/interviews/2012/giedre/](http://www.parler-de-sa-vie.net/ecrits/interviews/2012/giedre/)时，og:image 没有出现。你明白为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:42:24.440

您可以尝试使用[调试器工具](https://developers.facebook.com/tools/debug)

# .htaccess - 强制使用 url 模式

> ID：12262431
> 
> 赞同：0
> 
> 时间：2012-09-04T11:19:12.357
> 
> 标签：.htaccess, url-rewriting

我要创建一个新网站；内容归类为文章；标签和类别我有文件夹 1 和文件夹 2，它们是远程 Web 服务器上的文件夹；这两个文件夹中的每一个都可能包含 HTML 文件

我希望所有浏览我网站的人

```
1-When he types 
    www.domin.com/folder1/ -->dispaly the index.html file under the folder1 folder

2-When he types www.domin.com/folder1 --> error

3-When he types 
www.domain.com/folder1/file1/ 
            dispaly the /folder1/file1.html file

4-When he types
    www.domain.com/folder/file.html or
    www.domain.com/folder/file 
             dispaly an eror: such file does not exist 
```

其实，我做的就是要点： 1, 3 以下.htacces文件内容（在远程web服务器的public_html文件夹下）

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html

RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.]+\.php(\?[^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php$ http://www.domain.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ http://www.domain.com/$1/ [R=301,L]

#DirectorySlash On
#RewriteEngine On
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteRule ^([^\.]+)$ $1.html [NC,L] 
#RewriteRule ^([^\.]+)$ $1.htm [NC,L] 
#RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

我需要帮助来修改我的 .htaccess 文件以符合第 2 点和第 4 点，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:19:25.823

试试这个，它应该支持 4 条规则：

```
RewriteEngine on
RewriteBase /

RewriteRule ^([^/]+)/$ $1/index.html [QSA,L]  # rule 1
RewriteRule ^([^/]+)/([^/]+)/$ $1/$2.html [QSA,L] # rule 3
RewriteRule ^[^/]+(/[^/]+(\.html)?)?$ doesnotexists.html [L] # rule 2 and 4 
```

# kinect - 将 microsoft.kinect 添加到 XBOX 项目时出错

> ID：12262433
> 
> 赞同：1
> 
> 时间：2012-09-04T11:19:18.290
> 
> 标签：kinect, xbox360

我正在尝试使用 microsoft kinect SDK 1.5 for windows 开发新的 Xbox 游戏。

当我创建一个新的 XBOX360 项目并使用 Microsoft.Kinect 和 Build 添加 Microsoft.Kinect 作为参考-> 类型时，它给了我一个错误提示：

警告 1 无法解析主要引用“Microsoft.Kinect”，因为它间接依赖于在当前目标中无法解析的框架程序集“mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”框架。“.NETFramework，版本=v4.0，配置文件=客户端”。要解决此问题，请删除引用“Microsoft.Kinect”或将您的应用程序重新定位到包含“mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的框架版本。Xbox360游戏1 ![在此处输入图像描述](../Images/19350af738a17a2f38bc4999cd280b7c.png)

还有，对于 system.dll，system.core.dll

添加新的 Xbox 项目时，所有这些库都是 V2。

我怎么解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:44:51.700

我有坏消息要告诉你。

**无法使用 Kinect SDK 为 Xbox 开发应用程序或游戏。**
很难过，我知道。使用 Kinect 创建 Xbox 游戏的唯一方法是使用 XDK（如果我是正确的），并且它仅适用于经过认证的专业人士。

# css - 在窗口调整大小时按比例缩放图像

> ID：12262435
> 
> 赞同：0
> 
> 时间：2012-09-04T11:19:26.053
> 
> 标签：css

我在这里有一个演示来说明我的问题

[http://www.ttmt.org.uk/forum/gallery1/](http://www.ttmt.org.uk/forum/gallery1/)

它是页面滚动时的简单图像列表。

单击图像时，其上方会出现较大的图像，灯箱样式。

我希望这张图片的高度是窗口高度（85%）的百分比，宽度是按比例调整的。

如果调整窗口大小，我希望图像按比例缩放。

在 Safari 中，大图像显示在正确的高度，并在高度更改时按比例缩放，但在宽度更改小于图像宽度时无法正确缩放。

在 Firefox 中，大图像不会以正确的高度显示，并且在更改高度时不会缩放，但会在更改宽度时按比例缩放。

如何让图像以正确的高度出现并在浏览器中按比例缩放。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">
        ul#gallery {
            margin:100px 0 0 0;

            float:left;
            height:500px;
            margin-right:-20000px;
        }
        ul#gallery li{
          display:inline;
        }
        ul#gallery li img{
          float:left;
          height:100%;
        }
        #header{
          position:fixed;
          margin:20px 0 0 20px;
        }
        #header img,
        #header ul#info{
          float:left;
        }
        #header ul#info{
          margin:5px 0 0 50px;
        }
        #header ul#info li{
          color:#aaa;
          font:.95em/1.5em Helvetica, sans-serif;
        }
        #header ul#info li a{
          color:#aaa;
          text-decoration:none;
        }
        #header ul#info li a:hover{
          color:#333;
        }
        #header select{
          margin:20px 0 0 50px;
        }
        #lightbox {
                position:fixed; 
                top:0; 
                left:0; 
                width:100%; 
                height:100%; 
                background:url(overlay.png) repeat; 
                text-align:center;
            }
            #lightbox p {
                text-align:right; 
                color:#fff; 
                margin-right:20px; 
                font-size:12px; 
            }
            #lightbox img {
                box-shadow:0 0 15px #111;
                -webkit-box-shadow:0 0 15px #111;
                -moz-box-shadow:0 0 15px #111;
                max-width:940px;
            }
            #content img{
              height:85%;
              max-width:100%;
            }
      </style>

      </head>

    <body>

      <ul id="gallery">
        <li><a href="images/01.jpg" class="lightbox_trigger"><img src="images/01.jpg" /></a></li>
        <li><a href="images/02.jpg" class="lightbox_trigger"><img src="images/02.jpg" /></a></li>
        <li><a href="images/03.jpg" class="lightbox_trigger"><img src="images/03.jpg" /></a></li>
        <li><a href="images/04.jpg" class="lightbox_trigger"><img src="images/04.jpg" /></a></li>
        <li><a href="images/05.jpg" class="lightbox_trigger"><img src="images/05.jpg" /></a></li>
        <li><a href="images/06.jpg" class="lightbox_trigger"><img src="images/06.jpg" /></a></li>
        <li><a href="images/07.jpg" class="lightbox_trigger"><img src="images/07.jpg" /></a></li>
        <li><a href="images/08.jpg" class="lightbox_trigger"><img src="images/08.jpg" /></a></li>
        <li><a href="images/09.jpg" class="lightbox_trigger"><img src="images/09.jpg" /></a></li>
        <li><a href="images/10.jpg" class="lightbox_trigger"><img src="images/10.jpg" /></a></li>
        <li><a href="images/11.jpg" class="lightbox_trigger"><img src="images/11.jpg" /></a></li>
        <li><a href="images/12.jpg" class="lightbox_trigger"><img src="images/12.jpg" /></a></li>
        <li><a href="images/13.jpg" class="lightbox_trigger"><img src="images/13.jpg" /></a></li>
        <li><a href="images/14.jpg" class="lightbox_trigger"><img src="images/14.jpg" /></a></li>
        <li><a href="images/15.jpg" class="lightbox_trigger"><img src="images/15.jpg" /></a></li>
      </ul>

    <script>
      jQuery(document).ready(function($) {

        $('.lightbox_trigger').click(function(e) {

            e.preventDefault();

            var image_href = $(this).attr("href");

            if ($('#lightbox').length > 0) { // #lightbox exists

                $('#content').html('<img src="' + image_href + '" />');

                //$('#lightbox').show();

                $('#lightbox').fadeIn('2000');
            }

            else { 

                var lightbox = 
                '<div id="lightbox">' +
                    '<p>Click to close</p>' +
                    '<div id="content">' + 
                        '<img src="' + image_href +'" />' +
                    '</div>' +  
                '</div>';

                $('body').append(lightbox);
            }

        });

        $('#lightbox').live('click', function() { 
            $('#lightbox').hide();
        });

      });
      </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:27:16.247

尝试添加

```
height: auto; 
```

到图像的 CSS。

# html - Kinetic js调整图像大小

> ID：12262439
> 
> 赞同：0
> 
> 时间：2012-09-04T11:19:29.337
> 
> 标签：html, resize, image-resizing, kineticjs

我在我的网站[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)中使用此示例来调整图像大小。

但在我的情况下发生的是这个值 activeAnchor.attrs.x ，例如，在 Update() 函数中返回 2400 然后 2400-2158 然后 2400-2158NaN 然后 2400-2158NaNNaN 等等。而不是从 240 开始并获得锚点的正确位置。

有谁知道可能是什么问题？提前致谢。

# session - 骡子 3.2。如何评估流中的空会话变量？

> ID：12262444
> 
> 赞同：2
> 
> 时间：2012-09-04T11:19:46.863
> 
> 标签：session, groovy, mule, evaluator

如何在此 CHOICE 中检查我的会话变量是否为空或为空，它对我不起作用。

```
 <processor-chain doc:name="Processor Chain">
        <choice> 
            <when evaluator="groovy" expression="#[header:session:countryCode] != ">                    
                <logger message="Valid Country Id" level="INFO" doc:name="Logger"/>                 
            </when>            
            <otherwise>
                <logger message="Invalid Country Id" level="INFO" doc:name="Logger"/>                   
            </otherwise>
        </choice>           
    </processor-chain> 
```

我也试过 != '' 和 != null

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:53:59.253

如果您使用的是 Mule 3.3.x，最好使用 MEL 而不是 Groovy：

```
<when expression="#[org.mule.util.StringUtils.isNotEmpty(sessionVars.countryCode)]"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T13:08:18.807

您正在使用无效的 groovy 表达式。它应该是：

```
 ...
    <when expression="message.getProperty('countryCode',org.mule.api.transport.PropertyScope.SESSION)!=null 
                      || message.getProperty('countryCode',org.mule.api.transport.PropertyScope.SESSION)!=''"
    evaluator="groovy">
    ... 
```

您也可以使用 Header evaluator 访问属性，但我不确定您是否可以评估以找出它是 null 还是空

# php - 服务器忽略我的 setlocale 设置

> ID：12262446
> 
> 赞同：1
> 
> 时间：2012-09-04T11:19:56.150
> 
> 标签：php, locale, wamp, gettext

我正在处理这个问题很长一段时间，这不是我的第一个问题，但我仍然无法让本地化正常工作。我使用 WAMP 服务器和 php gettext。我为演示我的问题而制作的一个简单代码：

```
 /* dirs */
 $directory = realpath('../locale');
 $domain = 'messages';

 /* trying to find out correct setting - last one is winner */
 $locale ="ro";             
 $locale ="ro_utf8";
 $locale ="ro_RO";
 $locale ="ro_RO.UTF-8";
 $locale ="Romanian_Romania.1250";  

 putenv("LANG=".$locale);

 print setlocale( LC_ALL, $locale);
 setlocale( LC_ALL, $locale);

 bindtextdomain($domain, $directory);
 textdomain($domain);
 bind_textdomain_codeset($domain, 'UTF-8');

 /* STRING TO BE TRANSLATED */
 echo _('string'); 
```

在`../locale`目录中有很多这样的文件夹 - `$language_name/LC_MESSAGES/`。这些包含相应的 .po 和 . mo 文件的翻译如下：

```
msgid "string"
msgstr "string SK" 
```

在`sk_SK`文件夹或这个

```
msgid "string"
msgstr "string RO" 
```

在`ro`, `ro_RO`, `ro_RO.UTF8`, `ro_RO.UTF-8`, `romanian`, `Romanian_Romania`, `Romanian_Romania.1250`文件夹中。

什么文件看起来像：

> Romanian_Romania.1250 字符串 SK

所以你可以清楚地看到 -**我将 locale() 设置为 romanian**，但我的文本是使用**目录****中的翻译翻译的`sk_SK`**。我究竟做错了什么？

是否有一些函数可以用来获取有关我的服务器期望找到的 $locale 字符串和目录名称的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T21:37:42.753

尝试像这样执行您的代码：

```
setlocale(LC_ALL, 'ro_RO','Romanian'); 
```

它在我的项目中起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T08:41:55.617

你可以帮忙 ：

`locale -a`

你可以在你的计算机中使用哪种语言。

```
 sudo locale-gen pt_PT
 sudo locale-gen pt_PT.utf8
 sudo update-locale 
```

# android - ListView 没有显示

> ID：12262447
> 
> 赞同：-1
> 
> 时间：2012-09-04T11:20:09.033
> 
> 标签：android, listview

我想使用一个简单的列表视图，但是当我运行我的程序时，我得到了错误。

```
public class ListViewActivity extends Activity{
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);
         setContentView(R.layout.list);

         ListView listView = (ListView) findViewById(R.id.listView1);
         String[] values = new String[]{"Number 1", "Number 2", "Number 3"};

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
              android.R.layout.simple_list_item_1, android.R.id.text1, values);

         listView.setAdapter(adapter);

         listView.setOnItemClickListener(new OnItemClickListener() {

             public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
                 // TODO Auto-generated method stub
                 Toast.makeText(ListViewActivity.this, "Click ListItem Number " + position
                    , Toast.LENGTH_LONG).show();
        }
    });
}
} 
```

现在，你能告诉我我的问题在哪里吗？

更新：我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

显现 ：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.animeparadise"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".AnimeParadiseT1"
        android:label="@string/title_activity_anime_paradise_t1" 
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:label="@string/title_activity_anime_paradise_t1" android:name=".ViewActivity" android:screenOrientation="portrait">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER"/>
            <action android:name="android.intent.action.MAIN"/>
        </intent-filter>
    </activity>
    <activity android:label="@string/title_activity_anime_paradise_t1" android:name=".AboutActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".ListActivity" android:label="@string/title_activity_anime_paradise_t1">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application> 
```

日志猫：

```
09-04 16:04:23.485: D/dalvikvm(7779): GC_EXTERNAL_ALLOC freed 46K, 51% free 2686K/5379K, external 0K/0K, paused 67ms
09-04 16:04:25.917: D/AndroidRuntime(7779): Shutting down VM
09-04 16:04:25.917: W/dalvikvm(7779): threadid=1: thread exiting with uncaught exception (group=0x40195560)
09-04 16:04:25.927: E/AndroidRuntime(7779): FATAL EXCEPTION: main
09-04 16:04:25.927: E/AndroidRuntime(7779): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.animeparadise/com.animeparadise.ListViewActivity}; have you declared this activity in your AndroidManifest.xml?
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.app.Activity.startActivityForResult(Activity.java:2827)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.app.Activity.startActivity(Activity.java:2933)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at com.animeparadise.AnimeParadiseT1$1.onClick(AnimeParadiseT1.java:30)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.view.View.performClick(View.java:2506)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.view.View$PerformClick.run(View.java:9112)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.os.Handler.handleCallback(Handler.java:587)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.os.Looper.loop(Looper.java:130)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at android.app.ActivityThread.main(ActivityThread.java:3835)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at java.lang.reflect.Method.invokeNative(Native Method)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at java.lang.reflect.Method.invoke(Method.java:507)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-04 16:04:25.927: E/AndroidRuntime(7779):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:39:56.057

更改`"<activity android:name=".ListActivity" to ".ListViewActivity"`您的清单文件。

有你的错误......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:29:07.563

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
              android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

尝试这个。

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                      android.R.layout.simple_list_item_1, values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:26:06.197

加上`fill_parent`的宽度和高度`LinearLayout`以及 的宽度`ListView`。

看到你的清单后编辑。您有一个名为 ListViewActivity 的 Activity，但您声明：

```
<activity android:name=".ListActivity" android:label="@string/title_activity_anime_paradise_t1">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity> 
```

将其更改为`ListViewActivity`, 和第二个：带有 MAIN 和 LAUNCHER 的意图过滤器应该只用于第一个`Activity`，它在您的应用程序启动时显示。

# java - Java中DirectX程序的全屏截图（Javacv？）

> ID：12262448
> 
> 赞同：5
> 
> 时间：2012-09-04T11:20:09.440
> 
> 标签：java, directx, screen, capture

[Windows] 我知道在C#语言下运行的DirectX程序可以截屏，但是你知道Java的一些示例代码吗？

我实际上面临的问题[与使用 java 在全屏应用程序中截屏的问题相同？](https://stackoverflow.com/questions/10359754/take-screen-shots-inside-of-full-screen-applications-with-java?rq=1). 机器人课没有帮助，也没有奏效。

但是我没有在互联网上找到任何与此相关的 java 代码示例。感谢您在此主题上提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:05:20.957

由于我对此进行了更多工作，另请参阅：

```
import java.awt.*;
import java.awt.datatransfer.*;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import javax.swing.*;

import javax.imageio.ImageIO;
import java.io.File;

public class ClipboardScreenshot {

    public static void main(String[] args) throws Exception {
        // get the screenshot
        Robot robot = new Robot();
        robot.keyPress(KeyEvent.VK_PRINTSCREEN);
        robot.delay(40);
        robot.keyRelease(KeyEvent.VK_PRINTSCREEN);
        robot.delay(404);

        Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();
        DataFlavor[] flavors = cb.getAvailableDataFlavors();
        System.out.println("After: ");
        for (DataFlavor flavor : flavors) {
            System.out.println(flavor);
            if (flavor.toString().indexOf("java.awt.Image")>0) {
                Object o = cb.getData(flavor);
                Image i = (Image)o;
                // ImageIO will not write an Image
                // It will write a BufferedImage (a type of RenderedImage)
                BufferedImage bi = new BufferedImage(
                        i.getWidth(null),
                        i.getHeight(null),
                        BufferedImage.TYPE_INT_RGB);
                Graphics2D g = bi.createGraphics();
                g.drawImage(i, 0, 0, null);
                g.dispose();

                JScrollPane sp = new JScrollPane(new JLabel(new ImageIcon(bi)));
                sp.setPreferredSize(new Dimension(800,600));
                JOptionPane.showMessageDialog(null, sp);
                File f = new File(
                        System.getProperty("user.home") + 
                        File.separator + 
                        "the.png");
                ImageIO.write(bi, "png", f);
            }
        }
    }
} 
```

# linux - fsync，sync：它真的做它应该做的吗？

> ID：12262454
> 
> 赞同：9
> 
> 时间：2012-09-04T11:20:30.460
> 
> 标签：linux, filesystems, linux-device-driver, embedded-linux

我想对 Linux (2.6.31) 中的 sync(8) 和 fsync 函数的功能有更多的说明。它是否确保将文件写入相应的存储？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T12:03:10.280

[http://linux.die.net/man/8/sync](http://linux.die.net/man/8/sync)

它不能确保将文件写入相应的存储。它只确保缓存/缓冲数据刷新到磁盘设备。这是 SD 卡还是其他什么都没有关系。

# ruby-on-rails - 如何通过 ruby 驱动程序获得所有事实货币化交易

> ID：12262458
> 
> 赞同：0
> 
> 时间：2012-09-04T11:20:40.630
> 
> 标签：ruby-on-rails, ruby, api, factual

在 ruby​​ 驱动程序的帮助下，我试图从 Factual monetize API 获得美国某个城市的所有交易

```
query = factual.monetize.filters("place_locality" => "San Francisco") 
```

是否有 20 个结果的限制？如何获得更多优惠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T13:01:14.383

# 您可以链接查询方法，如下所示：

```
factual.table("places").filters("category" => "Food & Beverage > Restaurants").search("sushi", "sashimi")
.geo("$circle" => {"$center" => [34.06021, -118.41828], "$meters" => 5000})
.sort("name").page(2, :per => 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:10:15.170

您是否尝试过按照[https://github.com/Factual/factual-ruby-driver#more-read-examples](https://github.com/Factual/factual-ruby-driver#more-read-examples)`query.page(1, :per => 100)`第 6 点所述添加？

# orm - 具有该实体外键的学说实体

> ID：12262462
> 
> 赞同：2
> 
> 时间：2012-09-04T11:21:04.857
> 
> 标签：orm, symfony, doctrine, doctrine-orm

我有一个简单的递归类别表：

```
id
name
parent_id - is a link to id, NULL - for root categories 
```

我需要用外键创建一个表。我的班级没有创建此密钥。如何更改此类以使用“doctrine:schema:create”创建具有外键的表？我试过的：

```
<?php
namespace Test\BackEndBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="category")
 */
class Category
{
    /**
     * @ORM\Id
     * @ORM\Column(type="bigint", length=20)
     * @ORM\GeneratedValue(strategy="AUTO")
     * @var int
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length="255")
     * @var string
     */
    protected $name;

    /**
     * @ORM\Column(name="parent_id", type="bigint", length=20, nullable="true")
     * @ORM\OneToMany(targetEntity="Category")
     * @ORM\JoinColumn(name="id", onDelete="CASCADE", onUpdate="CASCADE")
     * @var int
     */
    protected $parentId;

    /**
     * Get id
     *
     * @return int
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string
     */
    public function getName()
    {
        return $this->name;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:32:49.730

你用 ManyToOne 反转了 OneToMany ！

见这里：[http ://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#one-to-many-self-reference](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#one-to-many-self-referencing)

实际上，您希望复数子类别可以有一只父 cat ！

你需要什么：

```
/**
 * @OneToMany(targetEntity="Category", mappedBy="parent")
 */
private $children;

/**
 * @ManyToOne(targetEntity="Category", inversedBy="children")
 * @JoinColumn(name="parent_id", referencedColumnName="id")
 */
private $parent;
// ...

public function __construct() {
    $this->children = new \Doctrine\Common\Collections\ArrayCollection();
} 
```

您可以将 $parent 替换为 $parentId（并将 mappedBy="parent" 替换为 mappedBy="parentId"），但这不是一个好的编码约定 ^^

# python - 在python上打印出类参数

> ID：12262463
> 
> 赞同：2
> 
> 时间：2012-09-04T11:21:06.273
> 
> 标签：python, attributes, inspect

```
class FooTable(Base):

    Id = Column(BIGINT, primary_key=True)
    name = Column(VARCHAR(256), nullable=False)
    username = Column(VARCHAR(256), nullable=False)
    state = Column(VARCHAR(100), nullable=False)
    city = Column(VARCHAR(256), nullable=False)
    zip = Column(VARCHAR(100), nullable=False) 
```

我想打印出类 Column 的实例化参数。通常 - python 代码到字符串。例子：

```
for k, v in vars(FooTable).iteritems():
      print k, get_class_attr(v)

>>> Id ["BIGINT", "primary_key=True"]
>>> name ["VARCHAR(256)", "nullable=False"]
    ... 
```

我尝试了检查模块，但发现它不支持它： [http ://docs.python.org/library/inspect.html#inspect.getmembers](http://docs.python.org/library/inspect.html#inspect.getmembers)

感谢您提供任何信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:41:29.297

我建议使用**`__dict__`**然后过滤其输出，因为**dir**也不适用于元类。

```
def filterFunction(field):
    '''
    This is a sample filtering function
    '''
    name, value = field
    return not name.startswith("_")

for k, v in vars(FooTable).iteritems():
      print k, filter(filterFunction, v.__dict__.items()) 
```

对于以下课程的这种情况

```
class X():
  foo = "bar"
  baz = True 
```

我们的过滤器

```
filter(filterFunction, X.__dict__.items()) 
```

会回来

```
[('foo', 'bar'), ('baz', True)] 
```

要获取实例化参数，我会检查字段名称是否在`Column.__init__.im_self`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:18:57.953

实际上，您要求的没有多大意义。Burhan Khalid 的回答很接近，但不是真的。您需要调用者在实例化类时传递的**实际参数。**不是函数/构造函数的签名。

但这是班级的程序员应该自己做的簿记。即便如此，他实际上也不会那样做。他会**根据**传递的参数对`configure`每个实例进行处理。

 **例如

```
class Foo(object):
    def __init__(self, *args, **kwargs):
        self.is_cool = kwargs.get('whatever', False) 
```

然后我会检查实例属性：

```
f = Foo()
f.is_cool   # False 
```

我会尝试理解它，这取决于这对我的实例意味着什么。

但我并不真正关心传递的实际参数。我的实例将**根据**传递的内容进行自我配置。

您当然可以编写一个包装任何 3rd 方类的类装饰器，并完全按照您的需要进行操作，但在这种情况下，这似乎是不合理的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:38:15.487

`attrs = [i for i in dir(obj) if not i.startswith('_')]`

请记住，以开头的属性`_`通常被认为是“私有的”。这是一个示例运行：

```
>>> [i for i in dir(4) if not i.startswith('_')]
['conjugate', 'denominator', 'imag', 'numerator', 'real']
>>> [i for i in dir('') if not i.startswith('_')]
['capitalize', 'center', ... 'split', 'splitlines', ... 'upper', 'zfill']
>>> class Foo:
...    a = 'Hello'
...    def __init__(self):
...      pass
...    def hello(self):
...      print 'Hello'
...
>>> [i for i in dir(Foo) if not i.startswith('_')]
['a', 'hello'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:03:03.230

我想你正在寻找这个：

```
>>> class Foo:
...    def bar(a,b,c):
...       pass
...
>>> x = Foo()
>>> x.bar.func_code.co_varnames
('a', 'b', 'c') 
```

这是另一种尝试，我认为这可以满足您的需要；虽然它有点令人费解。

```
>>> class Foo:
...    a = 'b'
...    def bar(y,z):
...       pass
... 

>>> funcs = [(i,getattr(Foo,i).func_code.co_varnames) for i in dir(Foo) \
...          if hasattr(getattr(Foo,i),'func_code')]
>>> 
>>> funcs
[('bar', ('y', 'z'))] 
```

但是，如果您想知道将哪些参数传递给类，那么从*实例*中使用`__dict__`.

```
>>> class Foo:
...    a = ''
...    def __init__(self, b, c):
...        self.a = b
...        self.c = c
... 
>>> funcs = [(i,getattr(Foo,i).func_code.co_varnames) for i in dir(Foo) if hasattr(getattr(Foo,i),'func_code')]
>>> funcs
[('__init__', ('self', 'b', 'c'))]
>>> i = Foo(1,2)
>>> i.__dict__
{'a': 1, 'c': 2} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T11:31:15.133

您可以使用以下命令打印类的属性：

```
print dir( Column ) 
```

这是如果我正确理解你的问题**

# python - 使用 pytz 从已知时区转换为本地时区

> ID：12262479
> 
> 赞同：4
> 
> 时间：2012-09-04T11:22:07.550
> 
> 标签：python, pytz

我收到一个固定时区的日期。我需要将其转换为本地机器的时区，但我不知道那是什么。如何使用 pytz （*不是*dateutil）来做到这一点？我找到了很多使用 dateutil 的解决方案，例如[这个 answer](https://stackoverflow.com/a/4771733/96079)，但我在 pytz 中找不到类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:33:47.737

您可以通过 (UTC) Unix 时间戳进行转换：

```
foreign_naive = datetime.datetime(2012, 3, 11, 6, 0, 0)
foreign_timezone = 'US/Eastern'
foreign_dt = pytz.timezone(foreign_timezone).localize(foreign_naive)
timestamp = time.mktime(foreign_dt).astimezone(pytz.utc).timetuple()
local_dt = datetime.datetime.fromtimestamp(timestamp) 
```

这使用[Python Create unix timestamp in the future 五分钟](https://stackoverflow.com/questions/2775864/python-datetime-to-unix-timestamp)的解决方案。

请注意，这不会告诉您本地时区*是*什么，尽管您可以使用以下命令找出它与 UTC 的偏移量：

```
(local_dt - datetime.datetime.utcfromtimestamp(timestamp)).seconds 
```

# python - 将numpy记录数组的字段格式检索为列表

> ID：12262480
> 
> 赞同：1
> 
> 时间：2012-09-04T11:22:08.380
> 
> 标签：python, numpy, pytables

我正在尝试规范化 pytable 和 recarray 的格式，以便将 recarray 附加到 pytable。为此，我需要从recarray 中获取字段信息（即名称和字段格式），我可以使用以下方法轻松获取recarray 名称列表：

```
namelist = Myrecarray.dtype.names 
```

但还没有找到对应的属性。recarray dtypes 属性返回名称和格式的元组列表，但无法遍历此列表以检索格式。这似乎是非标准的，因为我能够遍历其他元组列表以获得特定的元组项。例如，以下代码显示了对数组和recarray 的迭代，并尝试对recarray 的dtype 的元组列表进行迭代：

```
import numpy as np

my_list = [(1, 2), (3, 4), (5, 6)]
print([x[0] for x in my_list])
print('-----------------------')

my_array =  np.array([(1.0, 2, 5), (3.0, 4, 77)], dtype=[('x', float), ('y', int), ('z', float)])
print([x[2] for x in my_array])
print('-----------------------')

img = np.array([[(0,0,0), (1,0,0)], [(0,1,0), (0,0,1)]], {'names': ('r','g','b'), 'formats': ('f4', 'i2', 'f4')})
nta = np.array(img.dtype)
print(img.dtype)
print(img.dtype.names)
print(img.dtype[0])
print(nta)
print([x[0] for x in nta])
print([x[0] for x in img.dtype]) 
```

这段代码的打印输出（如下所示）表明我可以：1）遍历一个元组列表；
2) 遍历一个recarray；3) 将记录数组的 dtype 检索为明显的元组列表；
4) 从recarray 中检索名称 5) 检索recarray 的一个字段的格式

但我不能：

6) 遍历 recarray dtype 以检索每个字段的格式 7) 遍历作为数组转换的 recarray dtype 以检索每个字段的格式

输出是：

```
[1, 3, 5]
-----------------------
[5.0, 77.0]
-----------------------
[('r', '<f4'), ('g', '<i2'), ('b', '<f4')]
('r', 'g', 'b')
float32
[('r', '<f4'), ('g', '<i2'), ('b', '<f4')]
'import sitecustomize' failed; use -v for traceback
Traceback (most recent call last):
  File "....\Python\test0.py", line 23, in <module>
    print([x[0] for x in nta])
TypeError: iteration over a 0-d array 
```

有谁知道如何从记录数组中检索字段格式作为列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:45:17.717

嗯，新手找到了自己问题的答案。我需要“descr”属性把它变成一个可迭代的对象

```
print([x[1] for x in img.dtype.descr]) 
```

# spotify - Spotify 播放按钮显示“抱歉，此播放列表为空”。

> ID：12262481
> 
> 赞同：0
> 
> 时间：2012-09-04T11:22:13.333
> 
> 标签：spotify

我注意到有些人以前遇到过这个问题。我有一个带有播放列表的网站，昨天添加了播放按钮。今天我注意到在某些播放列表（即使它们存在）上，播放按钮返回对不起，这个播放列表是空的。

我使用的代码如下所示：

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:veri:playlist:2gmzIePbPeZFxCuFRCmy0A& theme=white" width="640" height="680" frameborder="0" allowtransparency="true"></iframe> 
```

一些播放列表可以正常工作，但很多都无法正常工作......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:37:24.530

这是由于解析播放列表的服务存在问题。我们正在努力提高稳定性。

# java - 在@Before 中抛出异常，在@AfterThrowing 中捕获

> ID：12262483
> 
> 赞同：1
> 
> 时间：2012-09-04T11:22:14.497
> 
> 标签：java, spring, aspectj, aspect

我创建了一个引发异常的@Before Advice，并试图在另一个@AfterThrowing 中捕获它，但它不起作用。

如果异常没有在通知中抛出，而是直接在方法中抛出，它会起作用。

如果在通知中抛出它，则不会执行 @AfterThrowing。

为什么它会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:07:18.483

因为意味着：捕获*从*捕获的方法`@AfterThrowing`中抛出异常的事件。但是意味着：在捕获的方法*之前*（即外部）做一些事情。因此，您的控制流永远不会达到可以满足建议条件的地步。*`@Before`*`@AfterThrowing`**

 **所以要么你按照弗兰克告诉你的去做（使用`@Around`建议），要么，如果你可以控制调用者以及代码的被调用者部分，你可以这样做（非常丑陋）：

*   `@Before("execution(myMethod)")`（可能抛出异常）
*   `AfterThrowing("call(myMethod)")`

我没有测试过它，但是由于这个控制流它应该可以工作：

```
[before call]
call(myMethod)
  [before execution]
  execution(myMethod)
  [after execution]
[after call] 
```

即“执行前”已经是“在通话中”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:27:58.003

我想这两个建议是在同一方面？如果没有，您是否声明了定义编织顺序的优先级？

无论如何，如果你想在一个方法之前做某事，然后根据你之前所做的事情做某事，你应该使用一个`@Around`建议来代替。您甚至可能不需要异常（代价高昂）来以这种方式控制流程。**

# vb.net - 将 vb.net 转换为 vb6

> ID：12262496
> 
> 赞同：0
> 
> 时间：2012-09-04T11:22:59.987
> 
> 标签：vb.net, vb6

我已经用 c# 和 vb.net 编写了代码，但现在要求是 vb6。我可以将 vb.net 代码转换为 vb6。如何在 vb6 System.Security.Cryptography 中添加命名空间

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T11:27:02.997

除了 VB.NET 语言比 VB6 功能丰富得多这一事实之外，您在 VB.NET 中开发的事实意味着您已经广泛使用了 .NET 类库（包括 System.Security.Cryptography你举个例子）。这些根本不适用于 VB6 代码。没有办法转换代码，你将不得不重新开始。

如果公司不想要您所说的 .NET Framework，那么您将不得不找到一些使用相同功能的 COM 库（他们对您使用感到满意），或者您将不得不推出自己的（不是在安全功能的情况下是可取的）。或者你可以找一份不同的工作...

# c# - 如何在 VB 或 C# 中共享 Google Drive 中的文档

> ID：12262498
> 
> 赞同：3
> 
> 时间：2012-09-04T11:23:08.023
> 
> 标签：c#, vb.net, google-drive-api

我想使用 Goole Drive Api 共享文档。获得文档列表后，我不知道如何与一个或多个用户共享文档。

**编辑：**

```
 Dim files As FileList = request.Fetch()
 Dim oPermission As New Google.Apis.Drive.v2.Data.Permission
 oPermission.Role = "reader"
 oPermission.Type = "user"
 oPermission.Value = "something@gmail.com"
 Dim oPermissionResource As New Google.Apis.Drive.v2.PermissionsResource(service, auth)

     For Each oFile As Google.Apis.Drive.v2.Data.File In files.Items

            service.Permissions.Insert(oPermission, oFile.Id).Fetch()
     Next 
```

正如@Ramhound 指出的那样，我走的是正确的道路，我按照@Ali Afshar 提供的示例更改了代码。现在我收到一个错误：

```
Google.Apis.Requests.RequestError
Internal Error [500]
Errors [
    Message[Internal Error] Location[ - ] Reason[internalError] Domain[global]
] 
```

**编辑2：**

当我将权限角色设置为*owner*时发生错误。如果我使用其他角色，如*读者*、*作家*。该示例工作正常。

```
 oPermission.Role = "owner" 'an error occurs 
```

有人知道什么会导致示例中的错误吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:33:09.003

使用该方法，在该方法的[示例部分](https://developers.google.com/drive/v2/reference/permissions/insert#examples)`permissions.insert`中有一个 .Net示例。

# cuda - 运行并行 CUDA 任务

> ID：12262499
> 
> 赞同：0
> 
> 时间：2012-09-04T11:23:09.730
> 
> 标签：cuda, gpu

我即将使用 CUDA 技术创建支持 GPU 的程序。它应该是 C# Emgu 或 C++ Cuda 工具包（尚未确定）。

我需要使用所有 GPU 功能（我有 16 个 GPU 核心的卡）。如何并行运行 16 个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:36:12.670

首先。在 6xx 系列之前，16 个 GPU 内核等于 16*8=128 个内核。在 6xx 系列上，它是 16*32=512 核。这并不意味着您应该将自己限制在 128/512 个任务上。

第二：emgu 似乎是 .NET 的 OpenCV 包装器，与图像处理有关。它通常与 GPU 编程无关。可能是某些算法已被 gpu 加速，但我对此一无所知。在这方面 CUDA 的替代品是 OpenCL，而不是 OpenCV。如果您将像您所说的那样使用 CUDA 技术，那么您别无选择 CUDA，因为只有 CUDA 才是 CUDA。

在启动任务时，您只需告诉 GPU 您希望运行多少线程。实际上，您告诉 GPU 有多少块，以及多少线程 pr。阻止你想运行。这是在您调用 cuda 函数本身时完成的。您也不想将自己限制为 128/512 线程，但要进行实验。

不了解您对 GPGPU 编程的了解，但请记住，您不能像在 CPU 上那样运行任务。您不能运行 128 个不同的任务，所有线程都必须运行完全相同的指令（分支时除外，这通常应避免）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:33:03.143

一般来说，您需要足够的线程来填充所有流式多处理器。至少是`.25 * MULTIPROCESSORS * MAX_THREADS_PER_MULTIPROCESSOR`.

现在特别是在 CUDA 中，假设你有一些 CUDA 内核`__global__ void square_array(float *a, int N)`......

现在，当您启动内核时，您可以指定块数和每个块的线程数

```
square_array <<< n_blocks, n_threads_per_block >>> (a, N); 
```

注意：您需要更加熟悉 CUDA 并行编程模型，因为您不会进入会使用所有 GPU 功能的庄园。考虑阅读[Programming Massively Parallel Processors, A Hands-on Approach](http://www.elsevierdirect.com/morgan_kaufmann/Excerpt_Parallel_Processors.pdf)。

# ios - iOS Facebook 应用程序 5.0+ - 哪些单元格/部分、视图、组件等用于显示墙本身？

> ID：12262500
> 
> 赞同：0
> 
> 时间：2012-09-04T11:23:16.667
> 
> 标签：ios, facebook, uitableview, facebook-wall

我想知道新的 iOS Facebook 应用程序是如何实现它们的单元格的：

![脸书应用程序 5.0](../Images/faa619f7e1eca3eb52f3ffb2ba8bf6cb.png)

不同的方块，里面有一些内容，具体取决于信息的类型。您认为使用了哪些组件、视图等？

而表格视图，是单元格还是分组部分？

我应该寻找哪些关键字 - 制作类似的时间线墙？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:28:52.153

好吧没关系。发现我可以创建一个视图控制器，其中包含带有分组部分的 tableview 和我想要的所有较小的 uiview。

# xml - 如何定义可选元素的属性？

> ID：12262502
> 
> 赞同：0
> 
> 时间：2012-09-04T11:23:29.333
> 
> 标签：xml, parsing, dtd

我的 XML 可能包含多个`param`条目，每个条目的`key`属性`value`如下：

```
<entry id="entry1">
    <classParams>
       <param key="pluginid" value="monitorPlugin" />
       <param key="pluginid2" value="monitorPlugin2" />
    </classParams>
</entry> 
```

AND/OR 一个`classParams`仅包含一个字符串的单曲，如下所示：

```
<entry id="entry2">
    <classParams>
      Im a string
    </classParams>
</entry> 
```

我的DTD：

```
<!ELEMENT classParams ( #PCDATA | param* )* >
<!ATTLIST id CDATA #REQUIRED value CDATA #REQUIRED >
<!ELEMENT param ( #PCDATA ) > 
```

如何正确定义我的 DTD，涉及两种条目类型和仅一种类型的属性定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:02:36.367

这个 DTD 应该可以工作...

```
<!ELEMENT entry (classParams)>
<!ATTLIST entry
          id CDATA #REQUIRED>

<!ELEMENT classParams (#PCDATA|param)*>

<!ELEMENT param (#PCDATA)>
<!ATTLIST param
          key CDATA #REQUIRED
          value CDATA #REQUIRED> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:17:44.767

我用这个定义做了它。我现在只使用`id`并将值放入`param`.

```
<!ELEMENT classParams ( #PCDATA  | param )* >
         <!ELEMENT param ( #PCDATA ) >
         <!ATTLIST param 
            id CDATA #REQUIRED
         > 
```

# python - python twitter搜索没有结果

> ID：12262504
> 
> 赞同：2
> 
> 时间：2012-09-04T11:23:36.447
> 
> 标签：python, twitter

我正在使用 python twitter 进行简单的搜索，但我没有得到任何结果，即使我在手动执行结果时得到了结果。例如，我写了一个简单的测试脚本，如下所示：

```
#! /usr/bin/env python
# coding=utf-8

import twitter
api=twitter.Api()
tweets=api.GetSearch(u'東京大学',per_page=10,page=1)

for t in tweets:
    print t.text 
```

如果我搜索 东京（英语：Tokyo），那么它会起作用，但如果我再增加 2 个字符，比如 东京大学（英语：Tokyo University），那么什么也不会回来。

有人能告诉我为什么吗？我没有想法（T_T）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:51:22.917

It turns out that by adding lang="ja" within the GetSearch command, I can return more results. I suppose that the default is US English users tweeting in Japanese, which gives far fewer results than Japanese users tweeting in Japanese.

# sql - 提高性能

> ID：12262513
> 
> 赞同：0
> 
> 时间：2012-09-04T11:24:06.880
> 
> 标签：sql, oracle, oracle8i

我对 SQL 中的快捷方式不太了解，所以我希望利用这里的智慧来帮助加快我正在使用的查询。我目前正在使用 Oracle 8i。

我有一个查询：

```
SELECT 
    NAME_CODE, ACTIVITY_CODE, GPS_CODE 
FROM
    (SELECT 
         a.NAME_CODE, b.ACTIVITY_CODE, a.GPS_CODE, 
         ROW_NUMBER() OVER (PARTITION BY a.GPS_DATE ORDER BY b.ACTIVITY_DATE DESC) AS RN
     FROM GPS_TABLE a, ACTIVITY_TABLE b
     WHERE a.NAME_CODE = b.NAME_CODE
       AND a.GPS_DATE >= b.ACTIVITY_DATE 
       AND TRUNC(a.GPS_DATE) > TRUNC(SYSDATE) - 2)
WHERE 
    RN = 1 
```

这大约需要 7 分钟或 10 秒来运行。

现在`GPS_TABLE`是 6.586.429 行，并且随着新的 GPS 坐标被输入系统而继续增长，每天它在 6 列中增长约 8.000 行。

当前`ACTIVITY_TABLE`为 1.989.093 行，并且随着新活动进入系统而继续增长，每天它在 31 列中增长约 2.000 行。

所以总而言之，这些都不是小表，我知道运行这个或类似的查询总会有时间。如您所见，我已经将其限制为仅过去 2 天的数据，但任何可以加快速度的东西都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:37:36.380

您最强的过滤器似乎是最近 2 天的过滤器`GPS_TABLE`。它应该过滤`GPS_TABLE`到大约 15k 行。因此，改进的最佳候选之一是列上的索引`GPS_DATE`。

您会发现您的过滤器`TRUNC(a.GPS_DATE) > TRUNC(SYSDATE) - 2`等同于`a.GPS_DATE > TRUNC(SYSDATE) - 2`，因此如果您更改查询，您的列上的简单索引将起作用。如果你不能改变它，你可以在`TRUNC(GPS_DATE)`.

一旦有了这个索引，我们就需要访问`ACTIVITY_TABLE`. 您加入的问题是我们将获得所有旧活动，因此我们将获得表格的很大一部分。这意味着连接在索引扫描中效率不高。

我建议您定义一个索引`ACTIVITY_TABLE(name_code, activity_date DESC)`和一个 PL/SQL 函数，该函数将专门使用此索引以最少的工作量检索最后一个活动：

```
CREATE OR REPLACE FUNCTION get_last_activity (p_name_code VARCHAR2, 
                                              p_gps_date DATE) 
RETURN ACTIVITY_TABLE.activity_code%type IS
   l_result ACTIVITY_TABLE.activity_code%type;
BEGIN
   SELECT activity_code
     INTO l_result
     FROM (SELECT activity_code
             FROM activity_table
            WHERE name_code = p_name_code
              AND activity_date <= p_gps_date
            ORDER BY activity_date DESC)
     WHERE ROWNUM = 1;
   RETURN l_result;
END; 
```

修改您的查询以使用此功能：

```
SELECT a.NAME_CODE,
       a.GPS_CODE,
       get_last_activity(a.name_code, a.gps_date)
  FROM GPS_TABLE a
 WHERE trunc(a.GPS_DATE) > trunc(sysdate) - 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:36:57.190

优化 SQL 查询通常通过以下方式完成：

1.  添加一些索引
2.  尝试不同的方式来获取相同的信息

因此，首先为 添加一个索引`ACTIVITY_DATE`，也许还有一些在条件中使用的其他字段。

# php - 从视图到模型（Slim PHP 框架/Idiorm/Paris）

> ID：12262514
> 
> 赞同：0
> 
> 时间：2012-09-04T11:24:06.283
> 
> 标签：php, slim, idiorm

问题：

我有一个时间表应用程序。它有一个 SQlite 数据库。我正在尝试找到一种呈现 GUI 的方法，以便如果用户单击正方形（a），我需要将数据从模板复制到模型（巴黎），以便我可以将其保存在 theb SQlite 数据库中。

有三张表，一张用于用户，一张用于时间表，一张用于部门。

它是一个类似于应用程序的时间表。

设置：

Slim php Idiorm/Paris SQlite3

有谁知道让用户单击 a 以便将数据从视图传递到模型的好方法？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:25:17.587

想象这是你的看法

```
<html> 
   <head>
   $(document).ready(function() {
            $("#add").on("click", function(e) {
                var user_id = $('#user_id').val();
                var time = date();
                var department = $('#department').val();
                var data = {uid:user_id, time:time, dept:department};
                $.ajax({
                    url: "add_into_db.php",
                    type: 'POST',
                    data: data,
                    success: function(msg) {
                       if(msg=="true"){
                            alert("Your dats is inserted successfully");
                            document.location.reload(true);
                        }
                        else{
                             alert("Your data insertion failed");
                              return false;
                        }
                    }
                });
                e.preventDefault();      
            });
        });
   </head>

   <body>
     // Some html here
     // input field for user
     // input field for time
     // input field for department
     // whatever data you want os send on click, include it here
     <input id ='add' type= 'submit' value 'Add'/> //Your submit button to add data via AJAX
   </body> 
```

Yout php函数将数据添加到数据库中

```
function add_into_db(){
  $user id = $_POST['user_id'];
  $time = $_POST['time'];
  $dept = $_POST['department'];

  // connect to your db
  // run your insert query

  If (insertion is successfull) {
     $msg = 'true';
     echo $msg;
  }
  else{
     $msg = 'false';
    echo $msg
  }
} 
```

希望对你有帮助

# c# - 需要在磁盘上存储 Office Word 2007 加载项 (VSTO) 的设置文件

> ID：12262518
> 
> 赞同：2
> 
> 时间：2012-09-04T11:24:22.230
> 
> 标签：c#, vsto, office-interop

我正在为办公室开发一个简单的插件，并且需要一个设置文件，这对于机器来说是全局的。存放它的最佳位置是什么？

我想沿着 /User/all/appdata/...

是否有存储 Office 加载项设置的标准方法？

如果没有找到标准方法，最好的文件存储位置？

// 丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:21:48.037

使用[.settings](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)文件。您不必担心将其存储在哪里——框架会为您处理好这些。只需将“设置文件”添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:34:00.210

我们已经使用了应用程序设置，它运行良好。

所有用户的应用程序设置 特定用户的用户设置

**应用程序配置**

```
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="CompanyName.Settings.ExcelAddInSettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
        </sectionGroup>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="CompanyName.Settings.ExcelAddInSettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false"/>
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <CompanyName.Settings.ExcelAddInSettings>
            <setting name="AppValue1" serializeAs="String">
                <value>Value1</value>
            </setting>
            <setting name="AppValue2" serializeAs="String">
                <value>Value2</value>
            </setting>
        </CompanyName.Settings.ExcelAddInSettings>
    </applicationSettings>
    <userSettings>
        <CompanyName.Settings.ExcelAddInSettings>
            <setting name="UserSetting1" serializeAs="String">
               <value>UserValue1</value>
            </setting>
        </CompanyName.Settings.ExcelAddInSettings>
    </userSettings>
</configuration> 
```

如果您尚未使用应用程序设置，您可以在[应用程序设置概述中找到它们的详细信息](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)

# tomcat - 上下文无法开始使用 apache tomcat 和 netbeans

> ID：12262527
> 
> 赞同：0
> 
> 时间：2012-09-04T11:25:19.017
> 
> 标签：tomcat, glassfish, netbeans-7.1

当我尝试使用 apache tomcat6.0.35 服务器运行我的项目时，我收到以下错误

```
SEVERE: End event threw exception
java.lang.reflect.InvocationTargetException
at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tomcat.util.IntrospectionUtils.callMethodN(IntrospectionUtils.java:959)
at org.apache.catalina.startup.CallMethodMultiRule.end(WebRuleSet.java:789)
at org.apache.tomcat.util.digester.Rule.end(Rule.java:229)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1138)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:2739)
at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:2719)
... 54 more 
```

这里它在 web.xml 文件中显示错误`java.lang.reflect.InvocationTargetException`和错误

`/localhost/knowledgecenter/WEB-INF/web.xml; lineNumber: 11; columnNumber: 23; Error at (11, 23: Servlet mapping specifies an unknown servlet name validfiles1`在我运行项目的时候

```
Sep 04, 2012 4:40:34 AM org.apache.catalina.startup.ContextConfig applicationWebConfig
SEVERE: Parse error in application web.xml file at jndi:/localhost/knowledgecenter/WEB-INF/web.xml
 org.xml.sax.SAXParseException; systemId: jndi:/localhost/knowledgecenter/WEB-INF/web.xml; lineNumber: 11; columnNumber: 23; Error at (11, 23: Servlet mapping specifies an unknown servlet name validfiles1
at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2806)
at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2832)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1141)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1642)
at org.apache.catalina.startup.ContextConfig.applicationWebConfig(ContextConfig.java:365)
at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:1076)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:261)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4612)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:559)
at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1399)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:849)
at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:351)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
  Caused by: java.lang.IllegalArgumentException: Servlet mapping specifies an unknown servlet name validfiles1
at    org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:2739)
at  org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:2719)
at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)
at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tomcat.util.IntrospectionUtils.callMethodN(IntrospectionUtils.java:959)
at org.apache.catalina.startup.CallMethodMultiRule.end(WebRuleSet.java:789)
at org.apache.tomcat.util.digester.Rule.end(Rule.java:229)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1138)
... 47 more 
```

相同的项目在 glassfish 下运行良好，但在使用 netbeans 7.1 的 tomcat.iam 中失败。我在清理和构建过程中收到此警告

```
init:
undeploy-clean:
deps-clean:
do-clean:
Deleting directory /home/adapco/NetBeansProjects/knowledgecenter/build
Deleting directory /home/adapco/NetBeansProjects/knowledgecenter/dist
check-clean:
clean:
init:
deps-module-jar:
deps-ear-jar:
deps-jar:
Created dir: /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/classes
Created dir: /home/adapco/NetBeansProjects/knowledgecenter/build/web/META-INF
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/META-INF
Copying 53 files to /home/adapco/NetBeansProjects/knowledgecenter/build/web
library-inclusion-in-archive:
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/lib
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/lib
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/lib
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/lib
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/lib
Copying 1 file to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/lib
library-inclusion-in-manifest:
Created dir: /home/adapco/NetBeansProjects/knowledgecenter/build/empty
Compiling 15 source files to /home/adapco/NetBeansProjects/knowledgecenter/build/web/WEB-INF/classes
warning: [options] bootstrap class path not set in conjunction with -source 1.5
1 warning
compile:
compile-jsps:
Created dir: /home/adapco/NetBeansProjects/knowledgecenter/dist
Building jar: /home/adapco/NetBeansProjects/knowledgecenter/dist/knowledgecenter.war
do-dist:
dist:
BUILD SUCCESSFUL (total time: 0 seconds) 
```

# spring - 将 Spring 的主题解析器和主题与 Thymeleaf 模板一起使用

> ID：12262530
> 
> 赞同：3
> 
> 时间：2012-09-04T11:25:49.020
> 
> 标签：spring, themes, thymeleaf

我想在我的 Thymeleaf 模板中使用 Spring 主题解析器的功能（请参阅：[此处）。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-themeresolver-defining)

**Thymeleaf 与 spring:theme JSP 标签的等价物是什么？**

请参阅下面的 JSP 代码示例：

```
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<html>
   <head>
      <link rel="stylesheet" href="<spring:theme code='styleSheet'/>" type="text/css"/>
   </head>
   <body style="background=<spring:theme code='background'/>">
      ...
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T19:35:17.047

我认为您提出问题时不是这种情况，但是当前版本的 thymeleaf-spring3（撰写本文时为 2.0.18）作为[SpringStandard 方言](http://www.thymeleaf.org/doc/html/Thymeleaf-Spring3.html#the-springstandard-dialect)的一部分具有主题功能，可以使用像这样：

```
<body th:style="'background-color: ' + ${#themes.code('backgroundColor')}"> 
```

# android - 如何存储和显示用户在android中单击的按钮名称（在不同的屏幕上）

> ID：12262535
> 
> 赞同：0
> 
> 时间：2012-09-04T11:26:16.083
> 
> 标签：android

在我的应用程序中，我有 4 个屏幕（screen1、screen2、screen3、screen4）

屏幕 1 有 3 个按钮（B1、B2、B3） 屏幕 2 有 3 个按钮（B4、B5、B6） 屏幕 3 有 3 个按钮（B7、B8、B9）

如果用户单击屏幕 1 中的任何按钮，则会呈现屏幕 2。如果用户单击屏幕 2 中的任何按钮，则会呈现屏幕 3。

我的问题是：

在 screen4 中，我必须显示用户单击的按钮名称。

即如果用户点击screen1中的B2然后点击screen2中的B6然后点击screen3中的B7，screen4的输出应该是：

B2

B6

B7

我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:28:54.443

使用`Intent putExtra()`将值传递给每个活动或[`Application Class`](http://developer.android.com/reference/android/app/Application.html)保存值的制作是最佳选择。

您也可以使用[SharedPreference](http://developer.android.com/reference/android/content/SharedPreferences.html)但我认为这对您来说很困难..

**更新：**

哦，我错过了你的问题，关于**如何存储**，

您可以获得按钮的名称，例如（仅示例实际可能不同）

```
Button button1 = (Button)findViewById(R.id.button1);
String buttonName = button1.getText().toString(). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:31:51.383

通过 String b1=button.getText().toString().a 更好地存储按钮名称

# c# - 在注册表中复制子类别

> ID：12262536
> 
> 赞同：1
> 
> 时间：2012-09-04T11:26:18.333
> 
> 标签：c#, windows, registry

有人可以建议如何将注册表中一个子类别的内容复制到另一个子类别的最佳方法吗？

例如我们有：

```
HKEY_CURRENT_USER.Software.MyProgram.ver_1 
```

并运行函数检查，如果没有 ver_2，则创建 ...MyProgram.ver_2 并在那里复制 ...MyProgram.ver_1 的所有内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-12T18:47:50.963

扩展方法：

```
public static void CopyTo(this RegistryKey src, RegistryKey dst)
{
    // copy the values
    foreach (var name in src.GetValueNames())
    {
        dst.SetValue(name, src.GetValue(name), src.GetValueKind(name));
    }

    // copy the subkeys
    foreach (var name in src.GetSubKeyNames())
    {
        using (var srcSubKey = src.OpenSubKey(name, false))
        {
            var dstSubKey = dst.CreateSubKey(name);
            srcSubKey.CopyTo(dstSubKey);
        }
    }
} 
```

像这样调用：

```
var ver1 = Registry.CurrentUser.OpenSubKey(@"Software\MyProgram\ver_1");
var ver2 = Registry.CurrentUser.OpenSubKey(@"Software\MyProgram\ver_2");
ver1.CopyTo(ver2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-22T08:06:09.817

基于 Wallys 扩展方法，我实现了一个`MoveTo`扩展方法。

此代码还包含一个`key.GetParent(...)`扩展方法，它将打开父密钥（需要，因为我使用`DeleteSubKeyTree`方法在复制成功后删除密钥。

```
public static void MoveTo(this RegistryKey src, RegistryKey dst)
{
    src.CopyTo(dst);
    src.Delete();
}

public static void Delete(this RegistryKey key)
{
    using (var parentKey = key.GetParent(true))
    {
        var keyName = key.Name.Split('\\').Last();
        parentKey.DeleteSubKeyTree(keyName);
    }
}

public static RegistryKey GetParent(this RegistryKey key)
{
    return key.GetParent(false);
}

public static RegistryKey GetParent(this RegistryKey key, bool writable)
{
    var items = key.Name.Split('\\');
    var hiveName = items.First();
    var parentKeyName = String.Join("\\", items.Skip(1).Reverse().Skip(1).Reverse());

    var hive = GetHive(hiveName);
    using (var baseKey = RegistryKey.OpenBaseKey(hive, key.View))
    {
        return baseKey.OpenSubKey(parentKeyName, writable);
    }
}

private static RegistryHive GetHive(string hiveName)
{
    if (hiveName.Equals("HKEY_CLASSES_ROOT", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.ClassesRoot;
    else if (hiveName.Equals("HKEY_CURRENT_USER", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.CurrentUser;
    else if (hiveName.Equals("HKEY_LOCAL_MACHINE", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.LocalMachine;
    else if (hiveName.Equals("HKEY_USERS", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.Users;
    else if (hiveName.Equals("HKEY_PERFORMANCE_DATA", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.PerformanceData;
    else if (hiveName.Equals("HKEY_CURRENT_CONFIG", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.CurrentConfig;
    else if (hiveName.Equals("HKEY_DYN_DATA", StringComparison.OrdinalIgnoreCase))
        return RegistryHive.DynData;
    else
        throw new NotImplementedException(hiveName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:40:12.553

[这个问题](https://stackoverflow.com/questions/1908539/net-registry-reading-writing)回答了“如何读/写注册表”的问题，基于此，您可以这样做：

*   读取“ver_2”键
*   如果“ver_2”不存在，则创建它
*   如果上面不存在“ver_2”，则读取“ver_1”键中的每个值并在“ver_2”下写入相同的值

基本上，您读取一个值，写入它，然后读取另一个值，写入它，等等。

# c++ - 尽管应该返回，但使用计时器块提升进程间作用域锁

> ID：12262539
> 
> 赞同：0
> 
> 时间：2012-09-04T11:26:31.483
> 
> 标签：c++, boost-thread, boost-interprocess

我有一些使用`boost inteprocess scoped lock with timers`. 当在一个线程中获取互斥锁时，第二个线程试图获取它几毫秒将失败，并将记录一些内容到屏幕上。

我不知道为什么，但是对于 boost 1.50 的版本，这不再起作用了。下面的代码我可以看到线程#2 没有打印“ERROR”，而是完全卡住了。

我在这里错过了什么吗？

我正在使用带有 g++ 的 LINUX 内核 2.6.32。

可以处理UTC吗？我读到这种锁使用的时间是UTC，并且在我现在正在阅读的日期时间中，关于`local_adjustor`从本地到UTC的转换，反之亦然。

AFG

```
 #include <iostream>
   #include <boost/interprocess/sync/scoped_lock.hpp>
   #include <boost/date_time/posix_time/posix_time.hpp>
   #include <boost/interprocess/sync/named_mutex.hpp>
   #include <boost/thread.hpp>
   #include <boost/bind.hpp>

   namespace bi = boost::interprocess;

   void  lock_test( bi::named_mutex& mt, bool long_sleep ) { 

           boost::posix_time::ptime pt = 
             boost::posix_time::microsec_clock::local_time()
             +  boost::posix_time::milliseconds(100);

            bi::scoped_lock<bi::named_mutex> l( mt, pt );
            if( l.owns() ){
            std::cout << "Locked"<<std::endl;
            }
            else{
            std::cout << "ERROR" << std::endl;
            std::cout.flush();
            return ;
            }

            if(long_sleep){
                while(true) {sleep(1);std::cout<<"[]";std::cout.flush();}
            }
        }

        int main(){

               bi::named_mutex  m_mutex( bi::open_or_create, "ciao"
               , bi::permissions( 0666  ));
               boost::thread t1 = boost::thread( &lock_test
               , boost::ref( m_mutex), true );
               sleep(4);
               boost::thread t2 = boost::thread(  &lock_test
               , boost::ref(m_mutex), false );
               while(true){sleep(1);}
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:40:26.503

看起来如果我切换`boost::posix_time::microsec_clock::local_time()`到

```
 boost::posix_time::microsec_clock::universal_time() 
```

一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T08:08:57.257

你应该使用`boost::get_system_time()`，有很多例子。虽然我找不到权威来源，但我`microsec_clock`完全像你一样使用并遇到类似的问题。刚刚发现这个bug，等我测试修复的时候再更新。

[boost::unique_lock::timed_lock 的使用](https://stackoverflow.com/questions/14200305/usage-of-boostunique-locktimed-lock)

# linux - 用于操作二进制文件的脚本命令（在 linux 上）

> ID：12262548
> 
> 赞同：4
> 
> 时间：2012-09-04T11:26:54.487
> 
> 标签：linux, shell

我正在寻找一种机制来使用唯一的设备 ID 来操作我的 eeprom 图像。我想在 make 文件中执行此操作，以便设备自动获取新 ID，然后将其更新为数据映像，然后将其刷新。在伪代码中：

```
wget http://my.centralized.uid.service/new >new.id
binedit binary.image -write 0xE6 new.id
flash binary.image into device 
```

所以首先我们将一个 id 放入一个单独的文件中，然后我们用这个 ID 文件的内容覆盖图像（从给定的偏移量）。然后闪现。但是第二部分怎么做呢？我查了一下*bvi*，它似乎有一些脚本能力，但我并没有完全理解它，老实说 vi 总是让我毛骨悚然。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:41:39.450

如果您知道要替换的文件的偏移量，则可以使用[`split`](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)命令将初始文件拆分到偏移量。[`cat`](http://unixhelp.ed.ac.uk/CGI/man-cgi?cat)然后可以使用该命令将所需的部分连接在一起。

处理二进制文件时另一个有用的工具是[`od`](http://unixhelp.ed.ac.uk/CGI/man-cgi?od)它可以让您检查人类可读格式的二进制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T13:23:46.547

（完全披露：我最初投票关闭作为副本。这个答案改编自引用的问题。）

`dd`与`notrunc`选项一起使用：

```
offset=$(( 0xe6 ))
length=$( wc -c < new.id )
dd bs=1 if=new.id of=binary.image count=$length seek=$offset conv=notrunc 
```

您可能想先在副本上尝试一下，以确保它正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:35:28.833

我可能会使用类似的东西`Perl`。请参见[此处](http://oreilly.com/catalog/cookbook/chapter/ch08.html)，特别是标记为*更新随机访问文件*的部分（[此处](http://oreilly.com/catalog/cookbook/chapter/ch08.html#24725)为示例）

# javascript - 学习更高级的 JavaScript

> ID：12262555
> 
> 赞同：0
> 
> 时间：2012-09-04T11:27:17.177
> 
> 标签：javascript

为了学习 JavaScript，我正在关注 w3schools 网站。

任何人都可以为我提供更有效的学习网站吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T11:30:11.787

[John Resig 的教程](http://ejohn.org/apps/learn/)和[Douglas Crockford 的系列](http://javascript.crockford.com/)可能是一个好的开始。

IMO，您还应该尽快逃离 w3schools，[因为](http://w3fools.com/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T11:31:11.047

[https://developer.mozilla.org/en-US/learn/javascript](https://developer.mozilla.org/en-US/learn/javascript)入门级、中级和高级 Js 教程的链接

# ruby - Ruby - Shoes GUI 可以抓住滚轮鼠标吗？

> ID：12262556
> 
> 赞同：2
> 
> 时间：2012-09-04T11:27:18.177
> 
> 标签：ruby, user-interface, mousewheel, shoes

我正在尝试构建一个非常简单的矢量绘图程序。（事实上​​，它的目的是成为其他人的基础）。我已经实现了缩放和平移，但我想像它在 AutoCAD 或 SketchUp 中那样工作。也就是说，当你滚动滚轮鼠标时，你缩放，当你按下它时，你平移。（实际上这最后一个功能已经在工作了）。问题是，我怎样才能用红宝石的鞋子 GUI 捕捉滚轮鼠标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:49:49.530

据我所知，没有这样的方法。尝试搜索来源等。

然而，我把它作为鞋子的[建议4](https://github.com/shoes/shoes4/issues/150) - 请随意评论提议的 DSL 或只是想你自己的 DSL - 基本上是你想要使用它的方式，因为这很可能是鞋子的方式:-)

如果我错了并且有这样的方法，shoes4 repo 中的一个人会知道，我会在这里报告。

# c# - DataTable 将字段值转换为 T

> ID：12262563
> 
> 赞同：1
> 
> 时间：2012-09-04T11:28:00.313
> 
> 标签：c#, .net, generics, casting

我有以下功能：

```
public T GetScalar<T>(string sql, T defaultValue, SQLParam[] sqlParams = null)
{
    DataTable dt = GetDataTable(sql, sqlParams);
    if (dt.Rows.Count == 0) return defaultValue;
    else
    {
        try
        {
            object tmp = dt.Rows[0][0];
            return (T)tmp;
        }
        catch { return defaultValue; }
    }
} 
```

我得到一个`InvalidCastException`.

在调试过程中，我可以看到 的值为`tmp`3，`T`类型为`int`.

这里有什么问题？

**编辑**

一点背景知识：这曾经在 MySQL 中工作。我现在已经转移到 SQLServer（谢天谢地几乎没有努力），但是这段代码现在失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:32:55.273

尝试更改您的线路：

```
return (T)tmp; 
```

到

```
return (T) Convert.ChangeType(tmp, typeof(T)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:30:16.450

我怀疑这个值*实际上是*a `long`，或者类似的东西——当你拆箱时，你必须拆箱到*确切的*类型（签名和枚举有一些奇怪的地方，但不是`long`vs `int`）。

如果您戴上手表，您应该能够看到这一点`tmp.GetType()`- 或者只是从 SQL 中确定它应该是什么类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:39:46.533

尝试将`try`块中的代码更改为：

```
 T tmp = dt.Rows[0].Field<T>(0);
        return tmp; 
```

看看这是否有效 - 或者至少会给你一个更好的错误。:-)

# linux - find-dired 如何传递参数？

> ID：12262572
> 
> 赞同：0
> 
> 时间：2012-09-04T11:28:51.507
> 
> 标签：linux, emacs, find, dired

我认为自从我上次使用此命令以来，它的格式发生了变化，现在我不明白它对我的期望。

我收到一个错误：`find: unknown predicate '-name=*.xml'`

它似乎试图调用 find 的方式是这样的：

```
find . \( -name="*.xml" \) -ls 
```

我不明白这种语法:(它是否试图创建一个嵌套的shell？为什么会这样？它是否试图创建一个参数列表？为什么会这样？

我可能只是去编辑这个函数以删除括号，但为什么有人会把它们放在那里？我肯定错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:08:46.057

括号将您放在一起的搜索词组合成一个逻辑分组，因此它们不会影响之后的任何其他内容。我怀疑它们放在那里是为了完全封装您可能放在那里的任何东西，以便`-ls`（或由于其他变量设置等而可能添加的任何其他选项）始终执行。括号是括号的最高阶。它*不是*试图创建一个嵌套的 shell；这就是`\`s 存在的原因：它通过它们找到自己。

但你真正的问题是 find 需要`-name`在它之后有一个空格，而不是一个`=`符号。（即，参数`-name`应该是一个单独的参数）。它不像您期望从其他工具（特别是使用 GNU`getopt_long` 解析实现编写的那些）中获得的许多双破折号参数那样工作。

所以，试试吧`-name *.xml`。

对于其他信息，这里是关于`()`s 的查找手册页：

```
 ( expr )
          Force  precedence.   Since parentheses are special to the shell,
          you will normally need to quote them.  Many of the  examples  in
          this  manual  page  use  backslashes for this purpose: `\(...\)'
          instead of `(...)'. 
```

# python - 使用 http 请求输出变量从函数到其他脚本

> ID：12262573
> 
> 赞同：0
> 
> 时间：2012-09-04T11:28:52.193
> 
> 标签：python, function

由于我有一个使用大量 http 请求的脚本，因此我决定创建一个函数来执行此操作（而不是一遍又一遍地使用相同的代码块......）。但我面临的问题是如何将 html 输出从 file_a.py 返回到 file_b.py？因为我需要输出来解析一些结果？

文件_a.py

```
def invokeServer(proxyUser,proxyPass,proxyHost,iserver,isService,login,password):

  proxy_auth = "http://"+proxyUser+":"+proxyPass+"@"+proxyHost
  proxy_handler = urllib2.ProxyHandler({"http": proxy_auth})
  opener = urllib2.build_opener(proxy_handler)
  opener = urllib2.build_opener()
  urllib2.install_opener(opener)
  request = urllib2.Request("http://"+iserver+""+isService)
  base64string = base64.encodestring('%s:%s' % (login, password)).replace('\n', '')
  request.add_header("Authorization", "Basic %s" % base64string)
  response = urllib2.urlopen(request)
  html= response.read()
  return html 
```

文件_b.py

```
from file_a import invokeServer
invokeServer(proxyUser,proxyPass,proxyHost,iserver,isService,login,password)

# From this line bellow, i need to use the html result from file_a.py
doc = LH.fromstring(html) 
LE.strip_tags(doc,'b')
data_list = doc.xpath("//td[text()='triggerNameList']/following-sibling::*")[0]
triggerName = data_list.xpath("//td[text()='triggerName']/following-sibling::*/text()") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:34:32.310

将其存储在变量中：

```
html = invokeServer(... 
```

# c# - 项目管理系统 C# ASP.NET 3.5 的领域驱动设计方法

> ID：12262585
> 
> 赞同：1
> 
> 时间：2012-09-04T11:29:28.773
> 
> 标签：c#, domain-driven-design, asp.net-3.5

我正在使用带有 SQL Server 2008 R2 后端的 C# 3.0 和 ASP.NET 3.5 编写一个简单的项目管理系统。

目前它本质上是一个数据驱动的应用程序，具有基本的 CRUD 功能、少量的业务逻辑和一些验证。

预计该系统将增长为包含更复杂的业务功能，我有兴趣尝试使用领域驱动设计 (DDD) 的原则对其进行改造。

我意识到这对于系统目前的状态来说太过分了，我预计现在会创建一个贫血的领域。

该系统由客户、客户、项目、组件和活动组成。

一个客户有 0,1 个或多个客户。客户有 0,1 或许多项目 项目有 0,1 或许多组件，组件有 0,1 或许多活动。

我将如何使用 DDD 进行建模？我是否将客户、客户、项目、组件和活动作为聚合根，或者我将拥有一个聚合根（客户）并将客户、项目、组件和活动作为可通过客户访问的实体？是否有推荐的方法来建模实体/聚合根之间的多对一关系？

我意识到这并没有涉及值对象（显然客户、客户等包含多个属性）等，但我在这里是一个完整的初学者，并且会喜欢一些指针，就像一个接近完整的答案一样。

为这个问题的开放式性质道歉，我已经有了一个工作系统，但正在展望未来。

谢谢，里奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:35:18.043

领域驱动设计的核心不是软件分析，而是业务分析。应用 DDD 的思想和模式可能会让您最终得到根本不称为客户、客户、项目、组件和活动的聚合和实体。

假设一组给定的类/实体并尝试在它们上强制执行 DDD 构建块可能不会让您很快取得任何进展。

对于初学者，我只能推荐（重新）阅读*Eric Evans 的《领域驱动设计*》一书。不仅是前几章，后面的部分（**第三部分 - 重构到更深入的见解**和**第四部分 - 战略设计**）比处理低级**构建块**的更具战术性的第二部分重要得多。

**更新：**如果您只想进行建模练习而不进行耗时的分析（这使得 DDD 如此昂贵且仅适用于复杂领域），我建议您阅读[Streamlined Object Modelling: Patterns, Rules, and Implementation](https://rads.stackoverflow.com/amzn/click/com/0130668397)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:45:12.787

通常我把所有这些类型的元素作为聚合根，你看不到模型的未来增长或变化，如果你需要作为一个独立实体访问活动，例如按类型对活动进行报告活动并按月细分，并制作子报告以按客户或客户展开信息，从这一点开始尝试从客户那里制作报告 - 客户 - 活动很难，并确保您需要添加一些代码来处理响应并制作那个报告。

您可以在客户中考虑根，但不要避免在子实体上引用父级，我认为这是不头痛的最佳做法。

# iphone - heightForRowAtIndexPath：在单元格显示之前执行？

> ID：12262588
> 
> 赞同：0
> 
> 时间：2012-09-04T11:29:49.210
> 
> 标签：iphone, ios, cocoa-touch, uitableview

例如，tableView 中有 100 行，在`heightForRowAtIndexPath:`显示第 100 行之前已经执行。

为什么？为了计算`contentSize`tableView？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:49:13.430

来自[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)：

> 每次显示表视图时，它都会在其每一行的委托上调用 tableView:heightForRowAtIndexPath:

所以是的，它在显示单元格之前被调用。如果您考虑一下，如果表格反过来，它将创建一个具有标准高度的单元格，将内容放入其中，获取实际高度，然后调整单元格的大小/移动。那不是很好。

这可能会导致性能问题，因此只有在具有不同高度的单元格时才应使用它：

> 该方法允许委托指定具有不同高度的行。如果实现了此方法，它返回的值将覆盖为给定行的 UITableView 的 rowHeight 属性指定的值。
> 
> 使用`tableView:heightForRowAtIndexPath:`而不是 rowHeight 属性会影响性能。**每次显示表视图时，它`tableView:heightForRowAtIndexPath:`都会为其每一行调用委托**，这可能会导致表视图具有大量行（大约 1000 或更多）时出现严重的性能问题。

否则，如果所有单元格的高度相同，请使用该`rowHeight`属性，并且不要实现`tableView:heightForRowAtIndexPath:`.

# python - 两个（多个）字段上的 Django Haystack 自动完成

> ID：12262590
> 
> 赞同：6
> 
> 时间：2012-09-04T11:29:54.993
> 
> 标签：python, django, django-haystack, whoosh

我将 haystack 1.2.6 与 Whoosh 2.4 和 Django 1.3 一起使用。假设我们有以下模型描述了一个假设的帖子。

```
Post(models.Model):
    title = models.CharField()
    body = models.TextField() 
```

我们为 body 字段的自动完成构建了这样的 post 索引：

```
PostIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    content_auto = indexes.EdgeNgramField(model_attr='body') 
```

彻底阅读了 haystack 文档后，我找不到是否可以在标题和正文字段上进行自动完成。

那么......有可能还是......？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T22:23:48.240

我已经设法在[此](https://groups.google.com/forum/#!msg/django-haystack/KU7aRHzNJaU/Qhqr_AUf3I4J)基础上做到了。您只需为要在索引中自动完成的每个字段创建一个 EdgeNgramField，然后将自动完成应用于两个不同的搜索查询集并将它们连接起来：

```
sqs = SearchQuerySet().models(Post)
sqs1 = sqs.filter(title_auto=q)
sqs2 = sqs.filter(body_auto=q)

sqs = sqs1 | sqs2 
```

如果您必须进行额外的过滤，则需要在自动完成之后进行（至少这是它对我有用的唯一方法）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-07T13:45:28.527

这是一种更简单的方法，在模板中进行连接并使用`EdgeNgramField`（尽管在帖子正文上这样做很昂贵：

```
#In search_indexes.py
PostIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.EdgeNgramField(document=True, use_template=True)

#In <app>\template\search\index\<app>\post_text.txt
{{ object.title }} {{object.body}} 
```

然后所有此类查询将在标题和正文上自动完成

```
sqs = SearchQuerySet().models(Post).autocomplete(text='hello') 
```

PS 使用 Haystack 2.x

# iphone - UiTextField 密码保护问题

> ID：12262603
> 
> 赞同：0
> 
> 时间：2012-09-04T11:30:58.503
> 
> 标签：iphone, uitextfield

我在 PinCode 设置屏幕中放置了 4 个连续的 UITextField。现在我已将这些 UiTextFields 设为“受密码保护”，但问题是当我在 TextField 中输入任何字符时，它首先显示该字符，然后将其转换为 *（或 DOT）。就像它的默认行为一样。

现在有什么方法可以让我开始在该字段中输入它不会显示该字符，而是继续在该字段中打印 DOT 或 *。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:54:07.773

```
You can do one thing.. 

this is .h file------>

#import <UIKit/UIKit.h>

#define fontRegular @"Helvetica Neue"
#define fontBold @"HelveticaNeue-Bold"

@interface ABCViewController : UIViewController <UITextFieldDelegate>

{
    NSString *strReturn;
}

@property(nonatomic,retain)NSString *strReturn;

@end

this is .m file--->

#import "ABCViewController.h"

@implementation ABCViewController

@synthesize strReturn;

-(void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UITextField *txt_Fields= [[UITextField alloc]initWithFrame:CGRectMake(30, 0, 230, 44)];
    txt_Fields.backgroundColor= [UIColor clearColor];
    txt_Fields.delegate= self;
    txt_Fields.clearButtonMode=YES;
    txt_Fields.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [txt_Fields setFont:[UIFont fontWithName:fontRegular size:20.0]];
    [txt_Fields setTextColor:[UIColor colorWithRed:105.0/255 green:105.0/255 blue:105.0/255 alpha:1.0]];
    txt_Fields.borderStyle=UITextBorderStyleBezel;
    txt_Fields.returnKeyType = UIReturnKeyDone;
    txt_Fields.keyboardType=UIKeyboardTypeURL;
    txt_Fields.autocapitalizationType = UITextAutocapitalizationTypeNone;
    [self.view addSubview:txt_Fields];
    [txt_Fields release];

}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    self.strReturn=[NSString stringWithFormat:@"%@%@",strReturn,string];
    textField.text=[NSString stringWithFormat:@"%@*",textField.text];
    NSLog(@"str:- %@",self.strReturn);
    return NO;
}

Note:-
But In this case you will have to maintain string manually, Means You will have to store the string in a string variable, you can not take textfield.text, because it will return - "****". And you will have to manage so many things manuaaly.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:59:08.113

请记住，这是一个带有小键盘的移动设备。显示被按下的键只是让用户确信他们按下了正确的键。也因为它是一个移动设备，用户应该是唯一一个看屏幕的人。如果用户正在使用 AirPlay 共享屏幕，他们应该在输入密码信息之前将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:10:51.037

您可能会看到以下示例：[https](https://github.com/Koolistov/Passcode) ://github.com/Koolistov/Passcode希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:34:00.623

这不可能。苹果没有这个功能。

# java - arrayAdapter 导致应用程序强制关闭

> ID：12262605
> 
> 赞同：0
> 
> 时间：2012-09-04T11:31:03.587
> 
> 标签：java, android

我有一个活动，它从另一个活动加载 sharedPreference，并在我编译我的应用程序时使用 arrayAdpter 将一些数据从 sharedPreferenece 放入 listView 强制关闭这是我的代码：

```
public class DawaaActivity extends Activity implements View.OnClickListener {
/** Called when the activity is first created. */
Button add;
ListView dataList;
private SharedPreferences emportPref;
String[] dawaaList;
String theName;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initialaiz();
    emportPref = getSharedPreferences("dawaaData", MODE_PRIVATE);
    theName = emportPref.getString("subject", "no data found");
    Toast.makeText(this, theName, Toast.LENGTH_LONG).show();
    dawaaList[0] = theName;
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,dawaaList);
    dataList.setAdapter(adapter);
}

private void initialaiz() {
    // TODO Auto-generated method stub
    add = (Button) findViewById(R.id.button3);
    dataList = (ListView) findViewById(R.id.myListView);
    add.setOnClickListener(this);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent data = new Intent(DawaaActivity.this,SettingActivity.class);
    startActivity(data);
} 
```

如果代码提示，当我制作这两行时：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,dawaaList);
    dataList.setAdapter(adapter) 
```

该应用程序运行良好

但不填充 listView 当然

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:33:57.853

我想你忘了`String[]`用适当的大小初始化，

代替

```
String[] dawaaList; 
```

尝试

```
String[] dawaaList = new String[1]; 
```

抛出异常的行是，

```
dawaaList[0] = theName; 
```

# rest - 缺少对方法的依赖

> ID：12262610
> 
> 赞同：0
> 
> 时间：2012-09-04T11:31:22.477
> 
> 标签：rest, jersey

我正在运行 REST Web 服务，在添加了一些新的 Web 服务后出现了一些错误。为什么我会收到这些错误？

```
 SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for method public entities.ProyectoHasPersona service.ProyectoHasPersonaRESTFacade.find(entities.ProyectoHasPersonaPK) at parameter at index 0
  SEVERE: Method, public entities.ProyectoHasPersona service.ProyectoHasPersonaRESTFacade.find(entities.ProyectoHasPersonaPK), annotated with GET of resource, class service.ProyectoHasPersonaRESTFacade, is not recognized as valid resource method.
  SEVERE: Missing dependency for method public javax.ws.rs.core.Response service.ProyectoHasPersonaRESTFacade.remove(entities.ProyectoHasPersonaPK) at parameter at index 0
  SEVERE: Method, public javax.ws.rs.core.Response service.ProyectoHasPersonaRESTFacade.remove(entities.ProyectoHasPersonaPK), annotated with DELETE of resource, class service.ProyectoHasPersonaRESTFacade, is not recognized as valid resource method. 
```

我正在使用 Jersey 1.1.1，这些是我的依赖项：

```
<dependencies>
    <dependency>
        <groupId>javax.ws.rs</groupId>
        <artifactId>jsr311-api</artifactId>
        <version>1.1.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.osgi</groupId>
        <artifactId>osgi_R4_core</artifactId>
        <version>1.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:07:02.750

看起来方法 service.ProyectoHasPersonaRESTFacade.find() 和 service.ProyectoHasPersonaRESTFacade.remove() 采用一个未注释的参数（即，这意味着方法期望将请求实体传递到此参数），但是，这些方法映射到HTTP 获取和删除。HTTP GET 和 HTTP DELETE 都不能有实体。所以相应Java方法上的未注释参数没有意义。

您可以获取要检索/删除的对象的 ID/PK，例如通过将其放在路径参数或查询参数中。

# java - JBoss Beans @Inject 抛出空异常

> ID：12262612
> 
> 赞同：1
> 
> 时间：2012-09-04T11:31:36.807
> 
> 标签：java, jboss, resteasy

我有一个注入到抛出空指针异常的类中的bean。

例外

```
org.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException
    org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:340)
    org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214)
    org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190)
    org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540)
    org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502)
    org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
    org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208)
    org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
    org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 
```

* * *

有趣的是，相同的代码可以在另一台计算机上运行。但是相同的设置和相同的代码。任何人都可以帮忙吗？

* * *

编辑

代码：

@Inject 私有NameBean nameBean;

```
@GET
@Produces("application/json")
@Path("/abc")
public String getname() {
    return nameBean.getName().toJSON().toString();
} 
```

* * *

JBoss 版本 7.1.1

* * *

操作系统视窗 7

# css - 选择当前 div 上方的同级 div

> ID：12262613
> 
> 赞同：4
> 
> 时间：2012-09-04T11:31:40.230
> 
> 标签：css, select, html, siblings

我试图通过在悬停在另一个 div 上时更改 div 的高度来制作口琴效果。

我的 HTML 如下所示：

```
<html><body>
  <div class="section1"></div>
  <div class="section2"></div>
  <div class="section3"></div>
  <div class="section4"></div>
</body></html> 
```

每个部分的高度为 25%。将鼠标悬停在 section1 上时，所有其他 div 的大小都应减小，而 section1 会展开。这可以通过以下 CSS 轻松完成：

```
.section1 {
  height: 40%;
}
.section1:hover ~ div:not(section1) {
  height: 20%;
} 
```

问题是 ~ 选择器只选择低于当前 div 的兄弟 div。因此，如果我对 section2 使用相同的代码，则只有 section3 和 section4 会受到影响。Section1 的原始高度为 25%，因为它在当前 div 之上。

我可以只用 CSS 解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:33:49.157

是的。在您的部分周围放置一个包装纸，并在将鼠标悬停在包装纸上时降低它们的高度。然后增加您悬停的部分的高度。

[**演示**](http://dabblet.com/gist/3620483)

**HTML**变为：

```
<div class='section-wrapper'>
    <div class="section1"></div>
    <div class="section2"></div>
    <div class="section3"></div>
    <div class="section4"></div>
</div> 
```

相关**CSS**：

```
.section-wrapper {
    height: 500px;
}
.section-wrapper div {
    height: 25%;
    outline: dotted 1px;
}
.section-wrapper:hover div {
    height: 20%;
}
.section-wrapper div:hover {
    height: 40%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:43:49.167

试试[这个](http://jsfiddle.net/sESTV/)

HTML

```
<html>
    <body>
        <div class="container">
            <div class="section1">1</div>
            <div class="section2">2</div>
            <div class="section3">3</div>
            <div class="section4">4</div>
        </div>
    </body>
</html> 
```

CSS ​</p>

```
.container:hover div {
    height:20px;
}
.container .section1,.container .section1:hover,
.container .section2,.container .section2:hover,
.container .section3,.container .section3:hover,
.container .section4,.container .section4:hover{
  height: 50px;
}

​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:53:54.710

简单 将父容器添加到部分

```
<div class="parent">
  <div class="section1">section1</div>
  <div class="section2">section2</div>
  <div class="section3">section3</div>
  <div class="section4">section4</div>
</div 
```

并将它们设置为

```
.parent div{height: 25%; border:solid 1px #f00}
.parent:hover div{height: 20%; }
.parent div:hover {height: 40%; } 
```

# css - 在不更改输入的情况下调整表单背景的不透明度

> ID：12262615
> 
> 赞同：0
> 
> 时间：2012-09-04T11:31:49.203
> 
> 标签：css, opacity

我正在尝试通过使用不透明度使表单字段背景仅 20% 可见来为我的网站上的一个表单重新创建类似的内容，但是当我[这样](http://www.awwwards.com/gallery/4096/3)做时，它也会影响内部的文本，以及当你输入一些内容时in. 如何使不透明度仅应用于背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:38:16.060

不透明度将始终影响所有包含的（子）标签。您可以在背景中放置具有所需颜色和 20% 可见性的 1px png 图像（或者，如果那里有一些图像，而不是纯色 - 更改整个图像的 alpha）。看起来这就是你所需要的（我终于明白我应该看图片而不是你的链接提供的网站设计））

另一种选择是使用 css 位置、z-index 等将一些不透明的 div 放在其他标签下方。但在这种情况下，应该有一个，例如，包含所有不应该透明的内容的 div 和另一个不透明的 div它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T11:38:00.827

为字段提供不同的类并使字段的不透明度为 100%

# objective-c - 应用核心图像过滤器 - 应用程序崩溃

> ID：12262618
> 
> 赞同：0
> 
> 时间：2012-09-04T11:31:57.110
> 
> 标签：objective-c, ios, crash, core-image

我使用以下代码应用几种类型的图像过滤器。（还有另外三个用于亮度、饱和度和对比度的 'editImage' 函数，有一个通用的 completeImageUsingOutput 方法）。我使用滑块来改变它们的值。如果我单独与他们中的任何一个一起工作，它就可以正常工作。一旦我对两个不同的过滤器进行两次函数调用，应用程序就会崩溃。

**编辑：** didReceiveMemoryWarning 被调用。我使用内存泄漏工具查看内存分配，每次编辑后内存分配增加约 15mb

崩溃发生在
CGImageRef cgimg = [context createCGImage:outputImage fromRect:outputImage.extent];

此外，如果将 completeImageUsingOutputImage 方法的指令放入各个函数中，我可以使用两种类型的过滤器而不会崩溃。当我调用第三个时，应用程序崩溃了。

（过滤器和上下文已被声明为实例变量并在 init 方法中初始化）

```
- (UIImage *)editImage:(UIImage *)imageToBeEdited tintValue:(float)tint
{
CIImage *image = [[CIImage alloc] initWithImage:imageToBeEdited];
NSLog(@"in edit Image:\ncheck image: %@\ncheck value:%f", image, tint);

[tintFilter setValue:image forKey:kCIInputImageKey];
[tintFilter setValue:[NSNumber numberWithFloat:tint] forKey:@"inputAngle"];

CIImage *outputImage = [tintFilter outputImage];
NSLog(@"check output image: %@", outputImage);
return [self completeEditingUsingOutputImage:outputImage];
}

- (UIImage *)completeEditingUsingOutputImage:(CIImage *)outputImage
{
CGImageRef cgimg = [context createCGImage:outputImage fromRect:outputImage.extent];
NSLog(@"check cgimg: %@", cgimg);
UIImage *newImage = [UIImage imageWithCGImage:cgimg];
NSLog(@"check newImge: %@", newImage);
CGImageRelease(cgimg);
return newImage;
} 
```

**编辑：**在缩小尺寸的图像上使用这些过滤器现在可以正常工作，但是，如果我为什么之前没有释放一些内存，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:43:55.710

将此行添加到 completeEditingUsingOutputImage: 方法的最顶部

```
 CIContext *context = [CIContext contextWithOptions:nil]; 
```

这也是获取 CIImage 的方法：

```
 CIImage *outputImage = [tintFilter valueForKey:@"outputImage"]; 
```

# python - 如何在 Ruby 中实现类似 Python 的字符串条？

> ID：12262621
> 
> 赞同：1
> 
> 时间：2012-09-04T11:32:02.567
> 
> 标签：python, ruby, string, strip

在 Python 中，我可以从字符串中去除空格、换行符或随机字符，例如

```
>>> '/asdf/asdf'.strip('/')
'asdf/asdf' # Removes / from start
>>> '/asdf/asdf'.strip('/f')
'asdf/asd' # Removes / from start and f from end
>>> ' /asdf/asdf '.strip()
'/asdf/asdf' # Removes white space from start and end
>>> '/asdf/asdf'.strip('/as')
'df/asdf' # Removes /as from start
>>> '/asdf/asdf'.strip('/af')
'sdf/asd' # Removes /a from start and f from end 
```

但是 Ruby 的[String#strip](http://ruby-doc.org/core-1.8.6/String.html#method-i-strip)方法不接受任何参数。我总是可以回退到使用正则表达式，但是有没有一种方法/方法可以在不使用正则表达式的情况下从 Ruby 中的字符串（前后）中去除随机字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T11:46:19.187

您可以使用正则表达式：

```
"atestabctestcb".gsub(/(^[abc]*)|([abc]*$)/, '')
# => "testabctest" 
```

当然，您也可以将其设为一种方法：

```
def strip_arbitrary(s, chars)
    r = chars.chars.map { |c| Regexp.quote(c) }.join
    s.gsub(/(^[#{r}]*)|([#{r}]*$)/, '')
end

strip_arbitrary("foobar", "fra") # => "oob" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T11:45:45.343

Python 的条带有点不寻常。它从任一端删除与参数中的任何字符匹配的任何字符。

我认为你需要 2 `.subs`。一个从头剥离，一个从尾剥离

```
irb(main):001:0> 'asdf/asdf'.sub(/^[\/]*/, '').sub(/[\/]*$/, '')
=> "asdf/asdf"
irb(main):002:0> 'asdf/asdf'.sub(/^[\/f]*/, '').sub(/[\/f]*$/, '')
=> "asdf/asd"
irb(main):003:0> ' asdf/asdf'.sub(/^[ ]*/, '').sub(/[ ]*$/, '')
=> "asdf/asdf" 
```

# excel - 用逗号分隔的 VBA 拼接单元格

> ID：12262622
> 
> 赞同：3
> 
> 时间：2012-09-04T11:32:39.827
> 
> 标签：excel, vba, row, splice

我对 VBA 编码真的很陌生。

我遇到的问题是这样的：

B60、D60、F60、H60（等）单元格在这种格式中有不同的值：x、y、z（x、y 和 z 可以是数字 0-10）我想把它拼接起来，这样它就变成了：

```
B60 = x
B61 = y
B62 = z
D60 = x2
D61 = y2
D62 = z2 
```

等等

我找到了这段代码：

```
Dim objRegex
Dim Z
Dim Y
Dim lngRow As Long
Dim lngCnt As Long
Dim tempArr() As String
Dim strArr
Set objRegex = CreateObject("vbscript.regexp")
objRegex.Pattern = "^\s+(.+?)$"
'Define the range to be analysed
Z = Range([a1], Cells(Rows.Count, "b").End(xlUp)).Value2
ReDim Y(1 To 2, 1 To 1000)
For lngRow = 1 To UBound(Z, 1)
'Split each string by ","
tempArr = Split(Z(lngRow, 2), ",")
For Each strArr In tempArr
lngCnt = lngCnt + 1
'Add another 1000 records to resorted array every 1000 records
If lngCnt Mod 1000 = 0 Then ReDim Preserve Y(1 To 2, 1 To lngCnt + 1000)
Y(1, lngCnt) = Z(lngRow, 1)
Y(2, lngCnt) = objRegex.Replace(strArr, "$1")
Next
Next lngRow
'Dump the re-ordered range to columns C:D
[a1].Resize(lngCnt, 2).Value2 = Application.Transpose(Y) 
```

但这对我来说不太适用。我只需要第 60 行就可以做到这一点。我真的尝试过编辑这段代码，但我什么都不懂……有人可以帮帮我吗？真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:29:25.173

这将为您解决问题。仅适用于第 60 行，不会覆盖现有值，因此您可以检查准确性。仅适用于每个单元格中的 3 个逗号分隔值。

```
'Required declaration for the arrays to be 0-based in VBA.
Option Base 0

'Routine to split out the values and place them vertically under the original cell.
Sub SplitItOut()
    'Variable to hold the contents of the cell in question.
    Dim contents
    'Column number of the column to start searching for data in.
    Dim startColumn As Integer
    'Counter variable used to keep track of the current column.
    Dim columnCounter As Integer
    'Array to store the comma-separated values in, after they have been separated from their commas.
    Dim numArray() As String
    Dim i As Integer

    columnCounter = 0

    'Starting column is 2 which is "B".
    startColumn = 2
    'Read in the initial contents of "B60". Cells function is using (row 60, column 2) style notation.
    contents = Cells(60, startColumn).Value

    'Keep looping until there is nothing but an empty string in the contents variable.
    Do While contents <> ""
        'Split out the numbers in the cell and store them in an array.
        numArray = Split(contents, ",", -1)
        'Loop through the 3 entries in the array.
        For i = 0 To 2
            'Place each entry in successive rows below the original cell.
            'The Trim function is used to remove any potential extra spaces from the number.
            Cells(61 + i, startColumn + columnCounter).Value = Trim(numArray(i))
        Next
        'Move to the next column.
        columnCounter = columnCounter + 1
        'Read in its contents.
        contents = Cells(60, startColumn + columnCounter).Value
        'If the contents are empty, move to the next column.
        If contents = "" Then
            columnCounter = columnCounter + 1
        End If
        'If the next column is also empty, the loop will exit, otherwise it will continue with the new contents of the current column.
        contents = Cells(60, startColumn + columnCounter).Value
    Loop
End Sub 
```

如果每个单元格中有不同数量的逗号分隔值，则需要更改该行：

```
For i = 0 To 2 
```

到

```
For i = 0 to Ubound(numArray) 
```

**编辑**

修复了在每列数据之间使用 1 个空白列的代码。

# php - 加载带有特定 CSS 的 HTML 文件

> ID：12262634
> 
> 赞同：0
> 
> 时间：2012-09-04T11:33:44.570
> 
> 标签：php, javascript, css, switch-statement

编写响应式网站我想实现移动版本和标准桌面版本之间的切换，就像维基百科网站所做的那样。

为此，我必须重新加载当前的 HTML 文件，但强制它使用桌面的 CSS 文件，尽管它位于 iPhone 等移动屏幕上。

有没有可能这样做？我认为维基百科使用 PHP。但也许JS也有办法。

我将非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:37:09.937

```
@media handheld {
  #foo { position: static; }
} 
```

[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:39:44.690

我认为使用 USER_AGENT 您可以找到用户是使用网络还是移动设备使用该网站。检测用户代理查找一些特定信息并在此基础上加载不同的 css

```
 $_SERVER['HTTP_USER_AGENT']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:40:08.343

您还可以使用 php 脚本来检查终端设备，加载相应的 css 文件，甚至是完全不同的 html 文档。我从这个脚本工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:50:41.960

```
<style>
 @media screen
 {
   p {font-family:verdana} //an example with a paragraph
 }
 @media handeld
 {
   p {font-family:arial}  //an example with a paragraph
 }
</style> 
```

这应该适用于两者！阅读[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

# facebook-like - Facebook喜欢按钮在某些页面中消失了

> ID：12262638
> 
> 赞同：1
> 
> 时间：2012-09-04T11:33:51.787
> 
> 标签：facebook-like

我在将 facebook like 按钮安装到我的 PmWiki 站点时遇到问题。

有些页面可以很好地使用按钮，但有些页面不能。我试图研究从 facebook 获得的脚本，发现 span 和 iframe 都是 0 宽度和 0 高度。

所以我尝试将有问题的 URL 输入到点赞按钮插件页面：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

虽然我在插件页面的 URL 框中填写了如下问题的 URL： [http ://www.newland-id.com/techwiki/index.php?n=Products.Products。](http://www.newland-id.com/techwiki/index.php?n=Products.Products)我在右边什么也没看到。

但是同一个站点，其他一些页面可以正常工作，如上面的 URL 将 ?n=Products.Products 替换为 ?n=NQuire.NQuire。

我也尝试将它报告给 facebook 错误，但这很有趣，我在错误页面中看不到创建错误按钮。

请建议或任何机构帮助我将此错误报告给 facebook？

# android - gridview中的Android按钮宽度

> ID：12262639
> 
> 赞同：0
> 
> 时间：2012-09-04T11:33:52.153
> 
> 标签：android, button, width

我在 gridview 中有 3 列，每个单元格中都有一个按钮，但第一列应该比其他列更薄，但我无法做到这一点，这里是代码

```
<?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<Button
    android:id="@+id/cell"
    android:layout_height="12dp"
    android:layout_width="wrap_content"
    android:background="#ffffff"
    android:textColor="#000000"
    />
</RelativeLayout> 
```

这里是java代码：

```
 public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;

        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.cell, parent, false);
        }

        gridcell = (Button) row.findViewById(R.id.cell);
        String tmp = list.get(position);
        gridcell.setTextSize(10);
        gridcell.setText(tmp);          

        //first column
        if ((position % 3) == 0) {
                    gridcell.setBackgroundColor(Color.LTGRAY);
                    //width should be changed       
                    gridcell.setWidth(5);
        } else {
            gridcell.setBackgroundColor(Color.BLUE);
            gridcell.setWidth(50);
        }

        return row;     

    } 
```

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:23:21.460

具有不同列宽的 Gridview 将不起作用。

您应该在每一行中使用带有 LinearLayout 的 Listview。

请参见此处：[具有不同列大小的 GridView](https://stackoverflow.com/questions/6651175/gridview-with-different-column-sizes)

# gdb - clang 3.1 在 Ubuntu 12.04 上构建的二进制文件无法使用 gdb 进行调试

> ID：12262641
> 
> 赞同：2
> 
> 时间：2012-09-04T11:33:58.510
> 
> 标签：gdb, llvm, clang

ubuntu 12.04.1 尝试使用原始源 clang+llvm 3.0，效果很好。为clang++添加-g选项后，我可以使用gdb调试带有符号+源的文件。

但是，如果我构建 clang+llvm 3.1 并使用来自 [http://llvm.org/releases/3.1/clang+llvm-3.1-x86_64-linux-ubuntu_12.04.tar.gz的预构建二进制文件](http://llvm.org/releases/3.1/clang+llvm-3.1-x86_64-linux-ubuntu_12.04.tar.gz)

clang++ -g 编译相同的示例源代码，然后使用 gdb 调试，我无法列出源，也无法步进源，“next”命令将完成执行 main 函数。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:32:50.327

这是一个已知错误，在主干中仍未解决。

[http://llvm.org/bugs/show_bug.cgi?id=13211](http://llvm.org/bugs/show_bug.cgi?id=13211)

作为一种解决方法，您可以尝试以源文件名和行号而不是函数名的形式设置断点。

$(gdb) 中断 main.cpp:5

# c# - C# 中的性能计数器不准确

> ID：12262645
> 
> 赞同：2
> 
> 时间：2012-09-04T11:34:03.710
> 
> 标签：c#, performancecounter

我正在从事一个收集有关性能数据的项目，就像性能监视器一样。

但是，当我在页面/秒上运行监视器时，它给出的结果与性能监视器不同。我认为这是因为性能计数器没有给出所有小数，并且平均计算变得不准确。

我的代码更新：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Threading;
using System.Net;
using System.Management;
using System.Net.NetworkInformation;

namespace PerformanceMonitor
{
    class Program
    {

        static void Main(string[] args)
        {
       List<float> pagesSec = new List<float>();
        PerformanceCounter memoryPages = new PerformanceCounter("Memory", "Pages/sec");

        while (count < 50)
        {
            pagesSecValue = memoryPages.NextValue();
            pagesSec.Add(pagesSecValue);

           Console.WriteLine("Pages: " + pagesSecValue);
           count++;

            Thread.Sleep(1000);
            Console.Clear();
        }

Console.WriteLine("Avg pages/sec: " + pagesSec.Average());

 Console.ReadLine();
        }
}
} 
```

在运行程序时，大多数时候我在控制台上打印 0。

结果：我的程序：4,06349 Windows 性能监视器：12,133

为什么有区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:45:36.700

您正在执行与性能计数器不同的计算。您正在做的是每秒获取页面数，持续 50 秒，然后获取这 50 个数字的平均值。一，很明显，性能计数器处理数据的时间更长。第二，这不是一个有用的平均值。性能计数器有效地采用了更高的样本。例如，如果每秒页面数值在 2 秒内执行此操作，您认为会发生什么：0 .5 1 1.5 2 5 15 6 20 4

您的代码在 0、1 和 2 秒时采样？您的“平均值”为 5，而性能计数器（如果采样率为 0.5 秒，则不是）将为 10。

# android - 安卓应用试用版？

> ID：12262646
> 
> 赞同：0
> 
> 时间：2012-09-04T11:34:10.103
> 
> 标签：android

我在 Android 中做了一个小应用程序，我想将其设置为试用版 2 天，2 天后它应该要求一个密钥。如果用户在过期日期之后卸载应用程序，他应该无法在没有密钥的情况下使用应用程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:44:23.900

一个想法可能是发布应用程序的两个版本。一个有一些限制或广告的免费版本和另一个付费版本的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:37:15.900

您需要设置一个数据库，该数据库将在线为每个设备分配一个特定的 ID。如果您要将安装日期保存在 SharedPreference 或任何本地内存中，用户只需清除所有应用程序数据即可将其从手机中删除。他甚至不必卸载它。

因此，每次新用户安装您的应用程序时，您都需要将与每个设备对应的安装日期存储在您的在线数据库中。每次启动应用程序时，您都需要向服务器询问与该设备相对应的安装日期，并让用户在试用期内继续操作，否则向他询问那里的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:45:16.957

我不知道它有多**安全/可靠**，但您可以使用 SharedPreferences 来存储这些数据。只是一个非常小的例子：

启动时：

```
SharedPreferences prefs = getSharedPreferences("AppName", Context.MODE_PRIVATE);
boolean firstRun = prefs.getBoolean("first_run", true);
long currentTime = System.currentTimeMillis();
if(firstRun)
{
    SharedPreferences.Editor editor = prefs.edit();
    editor.putBoolean("first_run", false);
    editor.putLong("first_run_time", currentTime);
    editor.commit();
}
else
{
    long firstRunTime = prefs.getLong("first_run_time", 0);
    long twoDays = 2 * 24 * 60 * 60 * 60 * 1000;
    if(currentTime - firstRunTime > twoDays)
    {
        //Expired
    }
    else
    {
        //Not yet expired
    }
} 
```

**请注意，如果用户卸载应用程序，然后重新安装，或者只是删除应用程序存储的数据，“计时器”将重置！**

更安全的方法是将这些数据存储在在线数据库中，但这更难解决，并且需要一直连接互联网来检查应用程序是否过期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T17:30:55.917

只需使用 Android 许可。这非常简单而且很棒。

任何比这更安全的东西都会很麻烦。我认为大多数应用程序不值得付出努力。

[http://developer.android.com/google/play/licensing/index.html](http://developer.android.com/google/play/licensing/index.html)

# php - 微博oauth认证

> ID：12262650
> 
> 赞同：0
> 
> 时间：2012-09-04T11:34:30.773
> 
> 标签：php, api, magento, oauth, weibo

我在magento中使用了weibo oauth api来连接用户和微博。

但是现在微博坏了，它完全得到了令牌，但是当我们使用认证令牌检索用户数据时显示错误。错误如下..

我正在使用此代码，使用可以成功登录，但之后出现这样的错误

```
[error_code] => 401
[error] => 40109:consumer_key_refused! 
```

我的代码是在这里登录后\

```
$c = new WeiboClient( WB_AKEY , WB_SKEY , $_SESSION['last_key']['oauth_token'] ,       $_SESSION['last_key']['oauth_token_secret'] );
    $ms  = $c->home_timeline(); 
    $me = $c->verify_credentials();
    $ms  = $c->show_user($userid); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:50:57.800

我发现微博新的oauth2.0身份验证api可以解决我的问题。如果有人在微博用户身份验证中有问题，请使用它。

[Weibo-Oauth2](http://open.weibo.com/wiki/Oauth2) 并遵循应用场景步骤。

要获取访问令牌，您需要使用表单 POST 方法而不是 GET。所以您使用此代码。

```
$opts = array('http' =>
            array(
                    'method'  => 'POST',
                    'header'  => "Content-Type: text/xml\r\n"                       
            )
    );

$context  = stream_context_create($opts);

$uri= 'https://api.weibo.com/oauth2/access_token?client_id='.WB_AKEY.'&client_secret='.WB_SKEY.'&grant_type=authorization_code&redirect_uri='.YOUR_REGISTERED_REDIRECT_URI.'&code='your authorization code;

$authkey1 = file_get_contents($uri,false,$context);

$decoded_auth1 = json_decode($authkey1,true); 
```

并使用此 url 来获取验证用户数据..

```
$userinfo = file_get_contents("https://api.weibo.com/2/users/show.json?access_token=".$access_token."&uid=".$userid);
$decoded_userinfo = json_decode($userinfo, true); 
```

希望这对任何人都有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:10:57.470

使用[weibo_2](https://github.com/simsicon/weibo_2)和 oauth2。请。

# iphone - 播放png动画时延迟

> ID：12262652
> 
> 赞同：0
> 
> 时间：2012-09-04T11:34:35.523
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个使用相机的应用程序，上面覆盖了枪支图像以及开火和重新加载按钮。在 Retina iPad 和 iPhone 上，它在大约 1 秒内循环播放 30 张图像用于触发动画，在 2 秒内循环播放 41 张图像用于重新加载动画。所有图像都是 1920 x 1080，在 iPhone 上它们是 1000 x 533。例如，要在点击开火按钮时循环浏览 .png，我在 PlayViewController.m 文件中使用它：

```
- (IBAction)fire:(id)sender {

// Play the firing animation for the rifle, enable reload button

fireButton.enabled = NO;
type.animationImages  = gunanimload;
type.animationDuration = 1.0;
type.animationRepeatCount = 1;
reloadButton.enabled = YES;
[type startAnimating]; 
```

在 viewDidLoad 方法中，我创建了数组并用图像加载它：

```
- (void)viewDidLoad
{
[super viewDidLoad];

UIImage* img1 = [UIImage imageNamed:@"rev0001.png"];

... x30

gunanimload = [NSArray arrayWithObjects:img1, ... x30, nil];

} 
```

即使它应该在视图加载时加载数组，但在点击 Fire 按钮时它似乎仍然在加载。我将如何消除这种延迟？还是有一个（相对简单的）替代播放开火和重新加载动画的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:42:04.970

UIImage imageNamed 方法在需要显示之前不会加载图像。有一些方法可以预先加载图像。

阅读此内容以获取更多信息： [CGImage/UIImage 在 UI 线程上延迟加载导致口吃](https://stackoverflow.com/questions/1815476/cgimage-uiimage-lazily-loading-on-ui-thread-causes-stutter)

[iOS中的非延迟图像加载](https://stackoverflow.com/questions/5266272/non-lazy-image-loading-in-ios)

# django - Django视图没有正确更新上下文

> ID：12262654
> 
> 赞同：2
> 
> 时间：2012-09-04T11:34:51.617
> 
> 标签：django, django-templates, django-sekizai

所以我有一个自定义模板标签，这很简单。它接受一个视图名称，渲染它，然后返回它的内容。问题是，虽然`.as_view()`在它们上使用可以获得内容，但它似乎没有正确设置上下文，因为`django-sekizai`'s`addtoblock`没有正确添加到主模板。另一方面，如果我直接实例化视图并调用`.render_to_response(context).render()`它，上下文将更新并将`sekizai`块数据注入基本模板。但是，第二种方法不会正确呈现表单（`.as_view()`确实如此）。有没有办法做到这一点而不会肮脏地调用两者？

```
class PopupNode(template.base.Node):
    def __init__(self, popup):
        self.popup = popup

    def render(self, context):
        # only needed to update context
        view_object = self.popup()
        view_object.request = context['request']
        view_object.render_to_response(context).render()

        # actual content
        view_function = self.popup.as_view()
        template_response = view_function(context['request'], context=context)
        template_response.render()
        return template_response.content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:29:34.113

事实证明，继承的`get()`函数忽略任何预先存在的上下文并呈现它自己的（这是合乎逻辑的，因为视图不希望在其他视图中呈现），因此不允许`sekizai`更新它。直接调用`.render_to_template()`允许您提供上下文，因此它可以工作。重写`get()`方法以接受先前的上下文并注入自己的工作。

# php - PHP中的不间断程序

> ID：12262655
> 
> 赞同：0
> 
> 时间：2012-09-04T11:34:56.530
> 
> 标签：php

是否可以在 PHP 中做一个不间断的程序？例如，一直使用 2% 的处理器和一些内存。如果不可能，你能告诉我我应该在哪个方向寻找 c++ 不间断程序（在 UNIX 服务器上）以及如何将变量从 PHP 传递到 c++。

编辑：

首先：我有最大的执行时间来阻止它（但我需要它来处理其他有问题的脚本）。

第二：我不想刻录服务器，所以虽然这不是最好的主意（它必须有一些最大内存和处理器使用率）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:41:12.273

您可以使用[CLI](http://php.net/manual/pt_BR/features.commandline.php)

创建您的`php`文件并在 上运行它`command line`，除非代码结束，否则它不会停止

您可以限制内存使用：`php -d memory_limit=128M my_script.php`这是更改`php.ini`指令，因此您可以自己编辑而不是每次都定义它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:37:48.160

你可以做这样的事情

```
// run-forever.php
while(true) {
    // your executive code
    usleep(500) // time in us - something like yield to not ocupy the CPU
} 
```

然后你可以运行：`php run-forever.php`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T12:15:15.443

顺便说一句，如果您倾向于使用基于 Web 的 php，则必须 `set_time_limit(0);`在 while 循环之前定义。

# windows - 关闭窗口后运行应用程序

> ID：12262656
> 
> 赞同：3
> 
> 时间：2012-09-04T11:35:01.537
> 
> 标签：windows

昨天我在 Windows7 计算机上运行了 BIOS 更新。BIOS 更新工具执行了 Windows 的关闭，并且没有重新启动计算机（因此直接在 Windows 关闭之后），一个类似 DOS 的工具启动了更新 BIOS。

我搜索了万维网，但我只能找到如何在 Windows 关闭（因此在 Windows 关闭之前）或注销（注销脚本）时执行应用程序。

有没有人知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:51:55.533

您可以运行本地组策略 - gpedit.msc（从运行）。
在**计算机配置**下选择**Windows 设置**
选择**脚本（启动/关机）**
在**关机**属性上，您可以添加脚本并在需要时提及参数。

![在此处输入图像描述](../Images/3e5fb2c8a9214011993464319ec437a8.png)

我还建议您查看以下问题-[如何延迟关闭并在窗口服务中运行进程](https://stackoverflow.com/questions/5217246/how-to-delay-shutdown-and-run-a-process-in-window-service)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:09:46.587

我猜这台机器实际上已经执行了软重启并且正在运行 BIOS 代码。这是通常的方法，在某些情况下，用户可能看不到软重启，即 BIOS 自我更新代码可能在 POST 之前运行。

但是，它是（或至少曾经是）可以在关闭后运行 Windows 代码，尽管显然它可以做的事情是有限的。可以在[Service Control Handler Function](http://msdn.microsoft.com/en-us/library/ms685149%28v=vs.85%29)的 MSDN 库条目中找到关键信息：

> 在此时间到期后，无论服务关闭是否完成，系统都会继续关闭。请注意，如果系统处于关闭状态（未重新启动或关闭），服务将继续运行。

因此，至少在原则上，您需要做的就是安装一个服务，该服务会要求关闭通知但在关闭时实际上并未停止，然后指示 Windows 在不重新启动或关闭电源的情况下关闭。我实际上已经看到这种情况发生了，但仅在旧版本的 Windows 上（在关机时自动关机成为默认设置之前！）所以我不能保证它仍然有效，尽管它确实做过一次。

但是，应该注意的是，这不一定会给您提供您可能想到的那种环境。例如，设备驱动程序在关机前不一定要卸载；毕竟，这有什么意义呢？

# c++ - xpath 设置上下文需要迭代

> ID：12262663
> 
> 赞同：0
> 
> 时间：2012-09-04T11:35:37.287
> 
> 标签：c++, xpath

我需要迭代 setContent。参数是 xmlNodePtr

```
xpath.setContent("/*/*/*/*/*[5]");
xpath.setContent("/*/*/*/*/*[6]");
xpath.setContent("/*/*/*/*/*[7]");
xpath.setContent("/*/*/*/*/*[8]");
xpath.setContent("/*/*/*/*/*[9]");
xpath.setContent("/*/*/*/*/*[10]");
.
.
.
. 
```

我尝试使用这样的 for 循环，但它不起作用。

```
for( int i=5 ;i=size+1;i++)
xpath.setContent("/*/*/*/*/*[i]") 
```

谁能告诉我如何实现 setContent 的迭代

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:40:11.127

如何使用 a[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)来构造字符串：

```
for(int i = 5; i = size + 1; i++)
{
    std::istringstream iss;
    iss << "/*/*/*/*/*[" << i << ']';

    xpath.setContent(iss.str());
} 
```

或者更好[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)的是，如果可用，请使用：

```
for(int i = 5; i = size + 1; i++)
{
    xpath.setContent("/*/*/*/*/*[" + std::to_string(i) + "]");
} 
```

# css - 使用相同的 css 属性设置按钮和锚标记的样式不起作用

> ID：12262670
> 
> 赞同：0
> 
> 时间：2012-09-04T11:36:19.110
> 
> 标签：css, forms, button

我有以下 css 来设置按钮和锚标记的样式，因为它们具有相同的按钮样式但它们位于不同的位置。所以我想给他们相同的CSS，这样他们就可以完全一样地渲染。但是 button.enter 将文本按下。第一个工作正常。它适用于 padding:0 但这会影响第一个。有任何想法吗？

```
a.enter, button.enter {
    text-decoration: none;
    background: url('../img/enter-button_small.png') no-repeat 0px 0px;
    height: 35px;
    padding: 8px 0;
    text-align: center;
    color: white;
    margin: 0 auto;
    text-shadow: none;
    font-size: 16px;
    width: 300px;
    vertical-align: middle;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T11:40:37.680

只需添加另一种样式，该样式将仅重置按钮上的填充。你的一些css也是不需要的。`vertical-align:middle;`例如，在这种情况下什么都不做。

```
a.enter, button.enter {
    text-decoration: none;
    background: url('../img/enter-button_small.png') no-repeat 0px 0px;
    height: 35px;
    padding: 8px 0;
    text-align: center;
    color: white;
    margin: 0 auto;
    text-shadow: none;
    font-size: 16px;
    width: 300px;
}

button.enter {
    padding:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:42:51.617

您需要提及边距和填充，因为 0 因为按钮具有默认边距和填充。

在下面添加这个代码

```
a.enter, button.enter {
text-decoration: none;
background: green url('../img/enter-button_small.png') no-repeat 0px 0px;
line-height: 35px;
padding: 8px 0;
text-align: center;
color: white;
margin: 0 auto;
text-shadow: none;
font-size: 16px;
width: 300px;
vertical-align: middle; display:inline-block; padding:0; margin:0; border:none
}​ 
```

这是工作演示[http://jsfiddle.net/6Ygc2/](http://jsfiddle.net/6Ygc2/)

# wpf - 组合框绑定项目来自哪里？

> ID：12262677
> 
> 赞同：1
> 
> 时间：2012-09-04T11:36:53.590
> 
> 标签：wpf, winforms, combobox, datasource, reference-type

可能这是一个愚蠢的（或不仅仅是微不足道的）问题，但似乎我只是不知道答案。情况是这样的——

1.  我分配了一个`UserList`作为`ItemsSource`组合框的。所以我所做的本质上是将引用类型分配给另一个。
2.  我清除了`UserList`. 所以现在我也得到`Count`了`ItemsSource`0 。
3.  我仍然得到组合框中的项目。而且我还可以将`SelectedItem`组合框投射到一个`User`对象上。

这是完整的代码 -

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public partial class MainWindow : Window
{
    private List<User> _userList;

    public MainWindow()
    {
        InitializeComponent();
        _userList = new List<User>()
                                  {
                                      new User() {Id = 1, Name = "X"},
                                      new User() {Id = 2, Name = "Y"},
                                      new User() {Id = 3, Name = "Z"}
                                  };
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        this.comboBox1.ItemsSource = _userList;
        this.comboBox1.DisplayMemberPath = "Name";
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        _userList.Clear();

        /* ItemsSource is cleared as well*/
        IEnumerable userList = this.comboBox1.ItemsSource;

        /*I can still get my User*/
        User user = this.comboBox1.SelectedItem as User;
    }
} 
```

那么，这些物品是从哪里来的呢？当我进行这种绑定时，实际上会发生什么？控件是否有某种缓存？意识到没有这样的基本想法是一种皇家痛苦。谁能解释一下幕后细节？

**编辑：**我在 WPF 中编写了代码，但我对 WinForms 有同样的问题`Combobox`。

**编辑：**组合框不是从它的内存中显示它的项目`Datasource`吗？当该数据源包含 0 个项目时，它如何显示这些项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:46:28.197

当您设置 an`ItemsSource`时，`ItemsControl`它会将列表中的引用复制到其`Items`属性中。然后它订阅`OnCollectionChanged`事件，并创建一个`CollectionView`对象。所以，在屏幕上你可以看到collectionView。

正如我在源代码中发现的那样`ItemCollection`包含两个列表：

```
internal void SetItemsSource(IEnumerable value)
    {
      //checks are missed
      this._itemsSource = value;
      this.SetCollectionView(CollectionViewSource.GetDefaultCollectionView((object) this._itemsSource, this.ModelParent));
    } 
```

**你怎么能得到 SelectedItem？**

这是我快速查看源代码的假设：

`ItemsControl`有一个“视图”的集合，每个`View`应该存储一个对项目（`User`实例）的引用，因为它必须在屏幕上绘制数据。因此，当您调用 SelectedItem 时，它会返回一个保存的参考。

**更新参考资料**

假设有一个`User`实例。它 在内存中有地址**123 。**有一个清单。它存储引用。其中之一是**123**。

当您设置一个`ItemsSource` `ItemsControl`保存对列表的引用，并创建一个视图集合。每个视图都存储对项目的引用。一个视图存储地址**123**。

然后您清除了用户列表。现在列表不包含对`Users`. 但是在内存中有一个地址 123 并且有一个`User`by this address 的实例。垃圾收集器不会销毁它，因为 View 有对它的引用。

当你得到它时，它会从**123**地址`SelectedItem`返回用户实例。

 **```
var user = new User();

var list = new List<User>();
list.Add(user);

list.Clear();
Console.WriteLine(list.Count()); //prints 0 - list is empty

Console.WriteLine(user == null); //prints false. - user instance is sill exists; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:53:08.643

回答您对@GazTheDestroyer 的评论（“......为什么它没有被清除，以及它如何保存这些物品？”）

在 WPF 中，当您设置`ItemsSource`an 的属性时`ItemsControl`，控件会将项目列表包装在 a 中`CollectionView`，这是一种为 UI 框架使用而优化的集合类型。这`CollectionView`被分配给`Items`控件的属性，并且是显示绘图代码实际工作的内容。如您所见，此集合与您最初分配给的对象完全分开，`ItemsSource`因此不会传播从一个对象到另一个对象的更改。这就是当您清除原始列表时项目仍在控件中的原因：控件忽略原始列表，并拥有包含您的对象的自己的列表。

正是由于这个原因，一个`ItemsSource`值需要引发事件 - 特别是`INotifyCollectionChanged.NotifyCollectionChanged`- 以便控件知道刷新`Items`列表。 `ObservableCollection`实现此接口并引发正确的事件，因此功能按预期工作。

非常重要的是要注意这*与*WinForms 中发生的情况完全不同，这就是为什么我一直在敦促您进行澄清。

**编辑：**澄清一下，没有“深拷贝”。发生的代码原则上类似于以下内容：

```
private List<object> myCopy;

public void SetItemsSource(List<object> yourCopy)
{
     myCopy = new List<object>();
     foreach (var o in yourCopy)
     {
         myCopy.Add(o);
     }
} 
```

运行此代码后，列表中的每个项目都只有一个副本。但是每个项目都在两个列表中。如果您更改、清除或以其他方式操纵`yourCopy`，`myCopy`则对此一无所知。你不能“破坏”我清理列表中的任何对象`yourCopy`——你所做的只是释放你自己对它们的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:36:19.140

假设您使用的是 WPF：

`List<User>`不会触发 UI 将识别以刷新自身的任何事件。如果您`ObservableCollection<User>`改用，您的代码将起作用。

关键区别在于`ObservableCollection`implements `INotifyCollectionChanged`，它允许 UI 识别集合的内容已更改，从而刷新`ComboBox`.

（请注意，这在 WinForms*中不起作用*。在 WinForms 中，您可以设置`DataSource`控件的属性，但相同的*ObservableCollection*技巧在这里不起作用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T13:35:25.470

当您将集合引用设置为 时`ItemsControl`，所有组合获取的都是一个引用，它知道它是可枚举的。

它将枚举引用并显示项目。无论是深拷贝还是浅拷贝都无关紧要，它所拥有的只是一个引用（有效的内存地址）。

如果您以某种方式更改您的收藏，除非您以某种方式告诉它，否则该组合无法知道。参考（地址）没有改变，一切看起来都与组合相同。您似乎在认为该对象以某种方式“活着”并且该组合可以观察内存的变化或其他什么？事实并非如此。它所拥有的只是一个可以枚举的引用。内容可以改变，但如果没有一些触发，组合不知道这一点，因此将无所事事。

`ObservableCollection`旨在克服这一点。它实现`INotifyCollectionChanged`了在更改时触发事件，因此 Combo 知道它必须更新其显示。**

# java - fetchUuidWithSdp 总是给出缓存的 UUID

> ID：12262679
> 
> 赞同：3
> 
> 时间：2012-09-04T11:37:00.667
> 
> 标签：java, android, bluetooth, uuid

我正在编写一个应用程序，在该应用程序中我必须在选定的设备上进行服务发现，但是每当我执行 fetchUuid 时，它总是给我远程设备上缓存的 UUID。

这是我正在尝试的

```
public boolean UUIDsearch(BluetoothDevice device){

    t=device.fetchUuidsWithSdp();
    Log.d(TAG,"Device class = :"+device.getClass());

    mReceiver = new BroadcastReceiver() {
      @Override
      public void onReceive(Context arg0, Intent intent) {

          String action = intent.getAction();
        //BluetoothDevice deviceExtra = intent.getParcelableExtra("android.bluetooth.device.extra.DEVICE");
          if (BluetoothDevice.ACTION_UUID.equals(action)){
             uuidExtra =intent.getParcelableArrayExtra("android.bluetooth.device.extra.UUID");
          }
          Log.d(TAG,"SDP has no errors: = "+t);
         // if(found==false){
          for(int i=0;i<uuidExtra.length;i++){
              Log.d(TAG,"UUID:   "+ uuidExtra[i]);
              if((uuidExtra[i].toString()).equals(MY_UUID.toString())){
                  found=true;
                  Log.d(TAG,"Match found in loop");

              }

          }
         // }
      }
  };

  // Register the BroadcastReceiver

  IntentFilter filter1 = new IntentFilter(BluetoothDevice.ACTION_UUID);
  registerReceiver(mReceiver, filter1);

  return true;

} 
```

谁能告诉我代码有什么问题。

这是日志猫：

这是开始发现时的错误：

```
 09-05 15:05:15.906: D/(32591): bta_jv_start_discovery_cback: p_sdp_rec:0x52ab0e4c
 09-05 15:05:15.906: D/BTIF_SOCK(32591): jv_dm_cback: event:8, slot id:26
 09-05 15:05:15.906: E/BTIF_SOCK(32591): ## ERROR : jv_dm_cback: BTA_JV_DISCOVERY_COMP_EVT, slot id:26, found channle #, status:0, scn:7##
 09-05 15:05:15.906: I/(32591): BTA_JvRfcommConnect
 09-05 15:05:15.910: D/BluetoothSocket(2100): inputStream.read ret: 4
 09-05 15:05:15.910: D/(32591): releasing SDP rsp_list 
```

发生上述错误后，fetchUuidWithSdp() 返回带有缓存 UUID 的意图作为错误

```
 09-04 16:54:51.851: I/(24860): BTA got event 0x206
 09-04 16:54:51.851: I/(24860): btif_dm_search_services_evt:  event = 2
 09-04 16:54:51.851: D/(24860): btif_dm_search_services_evt:(result=0x0, services 0xa42ed8f)
 09-04 16:54:51.851: E/(24860): Index: 0 uuid:00001101-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 1 uuid:00001103-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 2 uuid:0000110a-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 3 uuid:00001105-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 4 uuid:00001106-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 5 uuid:00001110-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 6 uuid:00001104-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.851: E/(24860): Index: 7 uuid:0000111b-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: E/(24860): Index: 8 uuid:00001115-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: E/(24860): Index: 9 uuid:00001116-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: E/(24860): Index: 10 uuid:0000112d-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: E/(24860): Index: 11 uuid:0000112f-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: E/(24860): Index: 12 uuid:00001132-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: E/(24860): Index: 13 uuid:00001400-0000-1000-8000-00805f9b34fb
 09-04 16:54:51.855: D/(24860): btif_dm_search_services_evt Remote Service SDP done. Call bond_state_changed_cb BONDED
 09-04 16:54:51.855: D/(24860): bond_state_changed: state=2 prev_state=1
 09-04 16:54:51.855: D/(24860): HAL bt_hal_cbacks->bond_state_changed_cb
 09-04 16:54:51.855: I/(24860): bta_dm_search_sm_execute state:3, event:0x206
 09-04 16:54:51.855: D/(24860): bta_dm_search_cmpl
 09-04 16:55:59.703: E/BluetoothRemoteDevices(24860): aclStateChangeCallback: State:DisConnected to Device:00:0A:3A:64:A7:34 
```

上面的 UUID 被标记为错误，因为 fetchUuidWithSdp 在服务发现中遇到错误或需要很长时间才能执行相同操作时返回缓存的 UUID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-24T07:34:01.607

我看到这是一篇旧帖子，但它是我在 Google 搜索关于 Android 和服务发现协议 (SDP) 中缓存的 UUID 的第一个结果

Android会缓存设备的SDP UUID记录和设备的蓝牙地址，所以如果你改变你的服务的UUID而不是设备的蓝牙地址，Android调用时UUID列表中仍然会有旧缓存的UUID设备上的 getUuids()。

摆脱缓存的 UUID 记录的唯一方法是在 Android 系统设置中重置网络设置。似乎不可能以编程方式清除缓存。

# java - 如何在tomcat中管理webapps足迹？

> ID：12262683
> 
> 赞同：2
> 
> 时间：2012-09-04T11:37:22.733
> 
> 标签：java, tomcat, memory-management, out-of-memory

我正在寻找一种运行时解决方案来查找 Web 应用程序的内存使用情况。我正在提供一个框架，其中包括不同客户端部署多个 Web 应用程序的 tomcat。有时其中一个会消耗大量内存，从而破坏整个过程。我想要一个管理器网络应用程序（如 tomcat 的管理器），它可以检测到这一点，并可能取消部署\重新部署有问题的网络应用程序。另一种解决方案（我认为不可能）是分别为每个 Web 应用程序分配一块堆。

要求客户更改现有的网络应用程序是可能的，但我宁愿不这样做。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:44:16.477

您无法拦截每个 webapp 中的分配，也没有来自垃圾收集器的回调，因此您无法知道每个 webapp 使用了多少内存。我认为你最好部署几个 Tomcat 实例，这样一个“流氓”webapp 就不会杀死所有其他实例（每个 webapp 最多一个 Tomcat，但你也可以创建组来限制实例数量，具体取决于批评）您的不同应用程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:42:40.977

Tomact 作为单个 java 进程运行，因此很难为每个应用程序分配内存。您只能增加[MaxPermSize,-Xmx](https://serverfault.com/questions/139435/where-to-set-java-heap-options-e-g-xmx-for-tomcat-6-under-ubuntu-9-04)。

您可以检查[Tomcat 的泄漏检测器，](http://java-monitor.com/forum/showthread.php?t=818)但它几乎没有帮助，因为您无法更改其他应用程序的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:39:24.833

我想你想看的是 VisualVM，它会给你一个关于 JVM 中 Tomcat 内存使用情况的概述。

[http://techblog.zabuchy.net/2012/monitoring-of-tomcat-with-visualvm-and-visualgc/](http://techblog.zabuchy.net/2012/monitoring-of-tomcat-with-visualvm-and-visualgc/)

# api - 如何检索与特定用户的 Lync 对话

> ID：12262684
> 
> 赞同：1
> 
> 时间：2012-09-04T11:37:25.760
> 
> 标签：api, lync

我想检查是否已经存在与特定用户的 Lync 对话。我正在使用 Lync 2010 API。我认为这可以通过迭代`Conversations`从`Conversations`. `ConversatinManager`但是，我不确定这是最好的方法（因为我的应用程序可能同时处理许多对话）并且没有其他更有效的方法可以做到这一点。

帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:57:00.287

最好保留自己的对话列表。通过订阅[ConversationAdded](http://msdn.microsoft.com/en-us/library/microsoft.lync.model.conversation.conversationmanager.conversationadded_di_3_uc_ocs14mreflyncclnt.aspx)和[ConversationRemoved](http://msdn.microsoft.com/en-us/library/microsoft.lync.model.conversation.conversationmanager.conversationremoved_di_3_uc_ocs14mreflyncclnt)事件，您可以保留由用户的 SIP 地址键入的对话集合。这样你就永远知道了。

如果您只关心特定类型的对话（例如音频/视频），请注意现有对话的模态变化，例如当用户在 IM 上开始对话，然后升级到 AV 时。这不会被归类为新的对话。我在这里写过关于处理这个问题的博客：[Detecting Modality Changes on Existing Conversations](http://thoughtstuff.co.uk/2012/07/detecting-modality-change-on-existing-conversations/)。

希望这可以帮助。

# jakarta-ee - 在不使用 IDE 的情况下创建和部署 EJB 应用程序

> ID：12262685
> 
> 赞同：1
> 
> 时间：2012-09-04T11:37:33.507
> 
> 标签：jakarta-ee, ide, ejb-3.0

我已经使用 NetBeans 7.1.1 创建了 EJB 应用程序。好像所有的工作都是由 IDE 自己完成的。所以，我想在没有 IDE 的情况下创建和部署 EJB 2.0 应用程序。任何告知如何进行的帮助都会非常有帮助。

# php - PHP / MySql - 查询中的连接

> ID：12262689
> 
> 赞同：1
> 
> 时间：2012-09-04T11:37:40.967
> 
> 标签：php, mysql, concatenation

我在将变量连接到数字时遇到问题（首先使用变量，因为 $info1002 不是已知变量），我很感激我的问题必须是我的单双引号，我尝试了很多组合并且我的谷歌搜索没有没有帮助。

```
mysql_query("INSERT INTO users (ID, info1) VALUES ('','.$info.''002')")or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:41:11.480

你需要像这样格式化它：

```
mysql_query("INSERT INTO users (ID, info1) VALUES ('','".$info."002')") or die(mysql_error()); 
```

此外，如果您将该`ID`字段设置为`AutoIncrement`，则可以像这样省略它：

```
mysql_query("INSERT INTO users (info1) VALUES ('".$info."002')") or die(mysql_error()); 
```

这会将 $info 的值后跟 002 插入到数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:41:30.900

```
mysql_query("INSERT INTO users (ID, info1) VALUES ('','".$info."002"')")or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:43:37.420

为什么在将其添加到查询之前不连接 if ？我认为这要容易得多，因此您没有引用的质量。

```
$var = $info.'002';
mysql_query("INSERT INTO users (ID, info1) VALUES (null ,'".$var."') or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:41:42.257

```
mysql_query("INSERT INTO users (info1) VALUES ('{$info}002')")or die(mysql_error()); 
```

仅当您的 ID 设置为 NOT NULL 并且未设置为自动增量时，它可能不起作用！

# java - 黑莓寻求酒吧

> ID：12262693
> 
> 赞同：0
> 
> 时间：2012-09-04T11:37:51.557
> 
> 标签：java, blackberry, java-me

我在黑莓屏幕上使用 ButtonField 创建了一个播放按钮，如果单击该按钮，我可以播放我的音频文件。

我的要求是创建音量控制搜索栏（如果我们拖动搜索栏，我们应该能够增加或减少音量）和黑莓屏幕上的播放/暂停按钮（播放/暂停按钮应该放在搜索栏旁边）

这是我的代码：

```
 HorizontalFieldManager hfmSecond = new HorizontalFieldManager();

        slider = new SliderField(
            Bitmap.getBitmapResource( "slider_thumb_normal.png" ),
            Bitmap.getBitmapResource( "slider_progress_normal.png" ),
            Bitmap.getBitmapResource( "slider_base_normal.png" ),
            Bitmap.getBitmapResource( "slider_thumb_focused.png" ),
            Bitmap.getBitmapResource( "slider_progress_focused.png" ),
            Bitmap.getBitmapResource( "slider_base_focused.png"),
            Bitmap.getBitmapResource( "slider_thumb_pressed.png" ),
            Bitmap.getBitmapResource( "slider_progress_pressed.png" ),
            Bitmap.getBitmapResource( "slider_base_pressed.png"),
            50, 0, 10, 10, FOCUSABLE );
        slider.setPadding( 5, 5, 5, 35 );
        slider.setBackground( BackgroundFactory.createSolidBackground( 0xD3D3D3 ) );
        hfmSecond.add(slider);
        hfmSecond.add(_startPlayingButton);
        add(hfmSecond); 
```

如果我使用上面的代码，我可以在我的屏幕上显示一个滑动条。

我无法显示按钮，而且我想在屏幕底部显示带有播放/暂停按钮的滑动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:56:45.223

要在屏幕底部添加按钮，请使用

```
hfmSecond.add(playButton);
hfmSecond.add(slider);
hfmSecond.add(pauseButton);
setStatus(hfmSecond);// this line will add your Hfm at bottom.... 
```

上面的代码将添加播放按钮，然后是滑块，然后会有一个暂停按钮，所有这些都在屏幕底部。我认为您的滑块占据了所有宽度，因此您无法看到您添加的按钮，`HorizontalFieldManager`因此减少滑块的宽度将适合您。

# iphone - Time Profiler 工具中的“Self”和“#Self”是什么意思？

> ID：12262695
> 
> 赞同：21
> 
> 时间：2012-09-04T11:37:52.133
> 
> 标签：iphone, ios, instruments

文档只是说它的意思是“符号调用自身的次数”，但这是什么意思？“#Self”是什么意思？

当我使用 Instruments 时，如果“# Self”等于 100，那么“Self”也是 100.0。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-04T11:56:53.747

我认为您阅读的文档一定不正确。

**Time Profiler 中的Self**是指在给定函数本身上花费的时间，不包括在它调用的其他方法上花费的时间。

**Self %**是相同的东西，但表示为总运行时间的百分比。

**# Self**是命中此函数或方法的实际分析器样本数。默认情况下，时间分析器每 1 毫秒采样一次，因此该数字通常与*Self*值相同。

# bash - 使用未设置与将变量设置为空

> ID：12262696
> 
> 赞同：116
> 
> 时间：2012-09-04T11:37:56.647
> 
> 标签：bash, variables, syntax

我目前正在编写一个 bash 测试框架，其中在测试函数中，可以使用标准 bash 测试 ( `[[`) 以及预定义的匹配器。匹配器是 '[[' 的包装器，除了返回返回码外，还设置一些有意义的消息来说明预期的内容。

例子：

```
string_equals() {
    if [[ ! $1 = $2 ]]; then
            error_message="Expected '$1' to be '$2'."

            return 1
    fi
} 
```

因此，当使用匹配器并且它失败时，才会设置 error_message。

现在，在稍后的某个时间点，我测试测试是否成功。如果成功，我用绿色打印期望，如果失败则用红色打印。

此外，可能设置了error_message，所以我测试消息是否存在，打印它，然后取消设置（因为下面的测试可能没有设置一个`error_message`）：

```
if [[ $error_message ]]; then
    printf '%s\n' "$error_message"

    unset -v error_message
fi 
```

现在我的问题是，是否最好取消设置变量，或者将其设置为''，比如

```
error_message='' 
```

哪一个更好？它真的有区别吗？或者也许我应该有一个额外的标志来指示消息已设置？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-04T12:54:07.617

大多数情况下，您看不到区别，除非您使用的是`set -u`：

```
/home/user1> var=""
/home/user1> echo $var

/home/user1> set -u
/home/user1> echo $var

/home/user1> unset var
/home/user1> echo $var
-bash: var: unbound variable 
```

所以真的，这取决于你将如何测试变量。

我将补充一点，如果设置了，我首选的测试方式是：

```
[[ -n $var ]]  # True if the length of $var is non-zero 
```

或者

```
[[ -z $var ]]  # True if zero length 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-10-18T16:52:01.230

如前所述，使用 unset 与数组也不同

```
$ foo=(4 5 6)

$ foo[2]=

$ echo ${#foo[*]}
3

$ unset foo[2]

$ echo ${#foo[*]}
2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-12T07:52:12.240

因此，通过取消设置数组索引 2，您实际上删除了数组中的该元素并减小了数组大小 (?)。

我自己做了测试。。

```
foo=(5 6 8)
echo ${#foo[*]}
unset foo
echo ${#foo[*]} 
```

这导致..

```
3
0 
```

因此，只是为了澄清取消设置整个数组实际上会完全删除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-19T14:37:56.047

根据上面的评论，这是一个简单的测试：

```
isunset() { [[ "${!1}" != 'x' ]] && [[ "${!1-x}" == 'x' ]] && echo 1; }
isset()   { [ -z "$(isunset "$1")" ] && echo 1; } 
```

例子：

```
$ unset foo; [[ $(isunset foo) ]] && echo "It's unset" || echo "It's set"
It's unset
$ foo=     ; [[ $(isunset foo) ]] && echo "It's unset" || echo "It's set"
It's set
$ foo=bar  ; [[ $(isunset foo) ]] && echo "It's unset" || echo "It's set"
It's set 
```

# java - 如果当前正在使用端口，如何跳过它？

> ID：12262700
> 
> 赞同：1
> 
> 时间：2012-09-04T11:38:09.767
> 
> 标签：java, sockets, nio, apache-mina

我目前在 8090 端口上运行 jboss，我的客户端套接字在 jboss 中运行。我按预定的时间间隔向服务器套接字发送请求以获取数据。现在我的问题是

1.  由于 8090 端口已在使用中，客户端套接字是否可以在该端口上打开并连接服务器？

2.  是否可以在一个端口上运行两个应用程序？

3.  如果端口已在使用中，如何跳过它。我的客户端套接字一次打开 5,000 个请求，因此它同时打开了那么多本地端口。所以如果有任何端口已经在使用，我需要跳过它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:14:37.177

对于 TCP/IP，没有。您一次只能让一个应用程序监听一个端口。现在，如果您有 2 个网卡，则可以让一个应用程序使用相同的端口号侦听第一个 IP 和第二个 IP 上的第二个应用程序。

要跳过它，您需要一个简单的检查来查看它是否正在使用：

```
boolean portTaken = false;
ServerSocket socket = null;
try {
    socket = new ServerSocket(portNumber);
    } 
catch (IOException e) {
    portTaken = true;
} 
```

然后为每个端口检查布尔值以查看它是否正在使用，直到找到可用的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:55:12.237

您无需担心客户端套接字的本地端口。操作系统会为您找到一个，除非您使用太多，如果您一次有 5,000 个，这是一个明显的可能性。只是在打开 Socket 时不要指定任何本地端口信息。

# google-chrome - TinyMCE 滚动后在编辑器中显示线条

> ID：12262701
> 
> 赞同：3
> 
> 时间：2012-09-04T11:38:10.623
> 
> 标签：google-chrome, tinymce, vertical-scrolling, horizontal-line

我在使用 TinyMCE 编辑器时遇到问题。编辑器包含大量内容，当垂直滚动时，编辑器上会显示许多水平线，从而遮盖内容。虽然这在内容很多时最为明显，但无论内容数量如何，都会出现这种情况。

这种情况最常发生在 Google Chrome 中，但同样的行为也发生在 IE9 中。它在外观上类似于以下 URL 中描述的与 iframe 渲染相关的问题。 [https://code.google.com/p/chromium/issues/detail?id=143354](https://code.google.com/p/chromium/issues/detail?id=143354)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:30:06.483

尝试添加这个 CSS 样式：

```
.defaultskin .mceiframecontainer {
    padding-top:1px;
    padding-bottom:1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T14:37:51.077

这似乎与这个问题有关：[https](https://github.com/zotonic/zotonic/issues/509)
://github.com/zotonic/zotonic/issues/509 如果你不能升级你的tinyMCE，你可以添加这一行：

```
body {
    /* Other rules */
    -webkit-transform: translate3d(0,0,0);
} 
```

在你的`themes/yourFavoriteTheme/skins/default/content.css`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T16:26:05.403

问题接缝也取决于页面上的 tinyMCE 位置。对我来说，只有在将 tinyMCE 动态添加到模态时才会发生这种情况。

因此，如果可能的话，我会先尝试不同的位置。对我来说不是。如果您不能或它不起作用，请尝试在 tinyMCE 初始化中添加以下内容：

```
oninit : function(ed) {
          var body = $('body',$('iframe').contentDocument);
                $(ed.getWin()).scroll(
                    function() {
                        body.css('background', '#fffffe');
                        setTimeout(function() {body.css('background', '#ffffff');},1);
                        return true;
                     });
} 
```

请注意，您需要找到与您正在启动的 tinyMCE 实例相对应的 iframe。可能可以从 ed 得到它，但我不知道如何。

此外，您可能需要将背景操作更改为将强制重新呈现内容的其他操作。

# java - Java RegExp - 仅从网页中提取数字

> ID：12262706
> 
> 赞同：1
> 
> 时间：2012-09-04T11:38:18.390
> 
> 标签：java, regex, string

我有一个网页转换为字符串，我试图从这一行中提取三个数字。

```
<td class="col_stat">1</td><td class="col_stat">0</td><td class="col_stat">1</td> 
```

从上面的行中，我已经使用它提取了第一个“1”

```
String filePattern = "<td class=\"col_stat\">(.+)</td>";
    pattern = Pattern.compile(filePattern);
    matcher = pattern.matcher(text);
    if(matcher.find()){
        String number = matcher.group(1);
        System.out.println(number);
    } 
```

现在我想要做的是提取 0 和最后一个 1，但无论何时我尝试编辑上面的正则表达式，它只会在控制台上输出完整的网页。有人有什么建议吗？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:41:46.767

鉴于在 HTML/XML 上使用正则表达式是一个臭名昭著的问题（请参阅此处以获得[明确的答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)），我建议使用 HTML 解析器*可靠地执行此操作（例如*[JTidy](http://jtidy.sourceforge.net/) - 虽然它是一个 HTML 漂亮的打印机，但它也提供了一个 DOM 接口到文件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:45:33.643

正则表达式匹配是贪婪的，试试这个（只寻找`(\d+)`而不是`(.+)`（匹配所有东西直到最后一个`</td>`）：

```
String text = 
    "<td class=\"col_stat\">1</td>" + 
    "<td class=\"col_stat\">0</td>" + 
    "<td class=\"col_stat\">1</td>";
String filePattern = "<td class=\"col_stat\">(\\d+)</td>";
Pattern pattern = Pattern.compile(filePattern);
Matcher matcher = pattern.matcher(text);
while (matcher.find())
{
    String number = matcher.group(1);
    System.out.println(number);
} 
```

在相关的说明中，我完全同意其他人的建议，即使用更结构化的方法来解释 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:45:41.023

```
<td class=\"col_stat\">(.+)</td> 
```

这个正则表达式是贪婪的。如果您希望使其与数字一起使用 - 将其更改为：

```
<td class=\"col_stat\">(\\d+?)</td> 
```

我宁愿建议使用 XPath 进行这种匹配，请参阅 Saxon 和 TagSoup

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:49:05.307

这是因为你的匹配器是[贪婪](http://www.roseindia.net/java/example/java/util/GreedyAndNonGreedyMatching.shtml)的。你需要一个非贪婪的匹配器来解决这个问题。

```
String text = "<td class=\"col_stat\">1</td><td class=\"col_stat\">0</td><td class=\"col_stat\">1</td>";

    String filePattern = "<td class=\"col_stat\">(.+?)</td>";
    Pattern pattern = Pattern.compile(filePattern);
    Matcher matcher = pattern.matcher(text);
    while (matcher.find()) {
        String number = matcher.group(1);
        System.out.println(number);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T11:50:01.417

试试这个正则表达式：

```
<td class="col_stat">(\d+)[^\d]+(\d+)[^\d]+(\d+) 
```

这将执行以下操作：

1.  搜索您的起始字符串
2.  选择一个小数链
3.  跳过任何非小数
4.  选择一个小数链
5.  跳过任何非小数
6.  选择一个小数链

# r - 当动物园时间序列转换为 xts 时，一个索引值变为 NA

> ID：12262714
> 
> 赞同：2
> 
> 时间：2012-09-04T11:38:51.290
> 
> 标签：r, time-series, xts, zoo

我有一个动物园时间序列：

```
z <- structure(c(55282, 55282, 55282, 55283, 55283, 55283, 55283, 
55283, 55283, 55283, 55283, 2339.96, 2331.98, 2335.53, 2340.33, 
2340.98, 2346.26, 2349.26, 2350.1, 2353.18, 2361.2, 2358.65, 
63.3, 54.5, 58.1, 62.9, 63.7, 69.3, 73.2, 74.5, 77.8, 86.3, 84.2, 
9.8, 8.4, 9, 9.7, 9.8, 10.6, 11.2, 11.5, 12, 13.3, 13), .Dim = c(11L, 
4L), .Dimnames = list(NULL, c("station_id", "ztd", "zwd", "iwv"
)), index = structure(c(14695.875, 14695.9166666667, 14695.9583333333, 
14696, 14696.0416666667, 14696.0833333333, 14696.125, 14696.1666666667, 
14696.2083333333, 14696.25, 14696.2916666667), format = structure(c("m/d/y", 
"h:m:s"), .Names = c("dates", "times")), origin = structure(c(1, 
1, 1970), .Names = c("month", "day", "year")), class = c("chron", 
"dates", "times")), class = "zoo") 
```

看看它的结构（据我所见）看起来不错：

```
> str(z)
‘zoo’ series from (03/27/10 21:00:00) to (03/28/10 07:00:00)
  Data: num [1:11, 1:4] 55282 55282 55282 55283 55283 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:4] "station_id" "ztd" "zwd" "iwv"
  Index: Classes 'chron', 'dates', 'times'  atomic [1:11] 14696 14696 14696 14696 14696 ...
  ..- attr(*, "format")= Named chr [1:2] "m/d/y" "h:m:s"
  .. ..- attr(*, "names")= chr [1:2] "dates" "times"
  ..- attr(*, "origin")= Named num [1:3] 1 1 1970
  .. ..- attr(*, "names")= chr [1:3] "month" "day" "year" 
```

数据一切正常：

```
> z
                    station_id     ztd  zwd  iwv
(03/27/10 21:00:00)      55282 2339.96 63.3  9.8
(03/27/10 22:00:00)      55282 2331.98 54.5  8.4
(03/27/10 23:00:00)      55282 2335.53 58.1  9.0
(03/28/10 00:00:00)      55283 2340.33 62.9  9.7
(03/28/10 01:00:00)      55283 2340.98 63.7  9.8
(03/28/10 02:00:00)      55283 2346.26 69.3 10.6
(03/28/10 03:00:00)      55283 2349.26 73.2 11.2
(03/28/10 04:00:00)      55283 2350.10 74.5 11.5
(03/28/10 05:00:00)      55283 2353.18 77.8 12.0
(03/28/10 06:00:00)      55283 2361.20 86.3 13.3
(03/28/10 07:00:00)      55283 2358.65 84.2 13.0 
```

但是，当我将数据转换为 xts 时间序列时，其中一个索引（也只有一个）更改为 NA：

```
> x <- as.xts(z)
> x
                    station_id     ztd  zwd  iwv
(03/27/10 21:00:00)      55282 2339.96 63.3  9.8
(03/27/10 22:00:00)      55282 2331.98 54.5  8.4
(03/27/10 23:00:00)      55282 2335.53 58.1  9.0
(03/28/10 00:00:00)      55283 2340.33 62.9  9.7
(NA NA)                  55283 2340.98 63.7  9.8
(03/28/10 02:00:00)      55283 2346.26 69.3 10.6
(03/28/10 03:00:00)      55283 2349.26 73.2 11.2
(03/28/10 04:00:00)      55283 2350.10 74.5 11.5
(03/28/10 05:00:00)      55283 2353.18 77.8 12.0
(03/28/10 06:00:00)      55283 2361.20 86.3 13.3
(03/28/10 07:00:00)      55283 2358.65 84.2 13.0 
```

这是 2010 年 3 月 28 日 01:00 的数据。我不明白为什么会这样 - 有人有什么想法吗？我最初在一个巨大的数据集（超过 10 年的数据）中发现了这一点，并且在任何其他日期都没有发生过！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:45:57.877

这些问题往往都有相同的根源：夏令时。似乎该`chron`包导致条目被删除。

但是你可以切换到`POSIXct`表示来避免这个缺点`chron`：

```
R> zz <- xts(coredata(z), order.by=as.POSIXct(index(z)))
R> options("digits.secs"=0)   ## default display w/o microseconds
R> zz
                    station_id     ztd  zwd  iwv
2010-03-27 16:00:00      55282 2339.96 63.3  9.8
2010-03-27 17:00:00      55282 2331.98 54.5  8.4
2010-03-27 17:59:59      55282 2335.53 58.1  9.0
2010-03-27 19:00:00      55283 2340.33 62.9  9.7
2010-03-27 20:00:00      55283 2340.98 63.7  9.8
2010-03-27 20:59:59      55283 2346.26 69.3 10.6
2010-03-27 22:00:00      55283 2349.26 73.2 11.2
2010-03-27 23:00:00      55283 2350.10 74.5 11.5
2010-03-27 23:59:59      55283 2353.18 77.8 12.0
2010-03-28 01:00:00      55283 2361.20 86.3 13.3
2010-03-28 02:00:00      55283 2358.65 84.2 13.0
R> 
```

Looks like there are some rounding issues, or maybe your entries are off by a second

# visual-studio-2010 - 如何在项目中定位（和删除）依赖于 MFC 的代码？

> ID：12262715
> 
> 赞同：5
> 
> 时间：2012-09-04T11:38:55.147
> 
> 标签：visual-studio-2010, visual-c++, mfc, migration

我有一个使用 MFC 和 COM 的大型遗留项目。将其迁移到 Linux 的想法（winelib 不适用于此），我需要识别使用 MFC 的代码部分。奇怪的是，该解决方案包含两个从 CWinApp 继承并实例化的 DLL 项目。此外，我在这些 DLL 中看不到 CWinApp 的用途，因为实际的 GUI 代码位于单独的非 dll 项目中。

两个问题：
1\. 有什么工具可以帮助我找到 MFC 特定的代码，以便我可以删除它？已经看到了[Qt 选项](http://doc.trolltech.com/solutions/qtwinmigrate/winmigrate-walkthrough.html#5-1)。
2\. 为什么 CWinApp 在一个根本不做任何 GUI 工作的 DLL 项目中被实例化（如下）？它用于消息传递吗？我没有看到任何这样的语法。删除 CWinApp 实例化会导致另一个项目的指针未被初始化。奇怪的！

DLL 项目的代码之一是这样的：

```
#include "stdafx.h"
#include "resource.h"
#include <initguid.h>
#include "dlldatax.h"
//removed some project-specific includes for posting on SO

#ifdef _MERGE_PROXYSTUB
extern "C" HINSTANCE hProxyDll;
#endif

CComModule _Module;

BEGIN_OBJECT_MAP(ObjectMap)
OBJECT_ENTRY(CLSID_MyManager, CMyManager)
//removed some other similar lines as the line above
END_OBJECT_MAP()

// Component Category Helper Functions
static HRESULT CreateComponentCategory( CATID catid, WCHAR* catDescription );
static HRESULT UnRegisterCategory( CATID catid );

class CMyClassWrapperApp : public CWinApp
{
public:
    public:
    virtual BOOL InitInstance();
    virtual int ExitInstance();
    DECLARE_MESSAGE_MAP()
};

BEGIN_MESSAGE_MAP(CMyClassWrapperApp, CWinApp)
END_MESSAGE_MAP()

CMyClassWrapperApp theApp;

BOOL CMyClassWrapperApp::InitInstance()
{
#ifdef _MERGE_PROXYSTUB
    hProxyDll = m_hInstance;
#endif
    _Module.Init(ObjectMap, m_hInstance, &LIBID_MyClassWrapperLib);
    return CWinApp::InitInstance();
}

int CMyClassWrapperApp::ExitInstance()
{
    _Module.Term();
    return CWinApp::ExitInstance();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:50:02.017

1.  在 MFC 项目设置中，更改`Use of MFC`为**Use Standard Windows Libraries**。然后从您的`StdAfx.h`. 编译错误将引导您查看所有 MFC 特定部分！
2.  `CWinApp`是否允许您的 MFC 可执行文件正确使用 DLL 中的任何 MFC 代码。框架将通过此对象初始化您的 DLL。对于非 MFC DLL，您只需使用`DllMain`.

关于`COM`并且没有 MFC，我将从谷歌搜索开始：`atl com codeproject`

# python - 多个对象以某种方式相互干扰[原始版本]

> ID：12262716
> 
> 赞同：0
> 
> 时间：2012-09-04T11:38:58.327
> 
> 标签：python, oop, class, garbage-collection, neural-network

我有一个神经网络 (NN)，它在应用于单个数据集时效果很好。但是，如果我想在一组数据上运行 NN，然后创建一个新的 NN 实例以在不同的数据集（甚至是同一组数据）上运行，那么新实例将产生完全不正确的预测.

例如，在 XOR 模式上进行训练：

```
 test=[[0,0],[0,1],[1,0],[1,1]]
    data = [[[0,0], [0]],[[0,1], [0]],[[1,0], [0]],[[1,1], [1]]]

    n = NN(2, 3, 1) # Create a neural network with 2 input, 3 hidden and 1 output nodes
    n.train(data,500,0.5,0) # Train it for 500 iterations with learning rate 0.5 and momentum 0

    prediction = np.zeros((len(test)))
    for row in range(len(test)):
        prediction[row] = n.runNetwork(test[row])[0]

    print prediction

    #
    # Now do the same thing again but with a new instance and new version of the data.
    #

    test2=[[0,0],[0,1],[1,0],[1,1]]
    data2 = [[[0,0], [0]],[[0,1], [0]],[[1,0], [0]],[[1,1], [1]]]

    p = NN(2, 3, 1)
    p.train(data2,500,0.5,0)

    prediction2 = np.zeros((len(test2)))
    for row in range(len(test2)):
        prediction2[row] = p.runNetwork(test2[row])[0]

    print prediction2 
```

将输出：

```
 [-0.01 -0\.   -0.06  0.97]
    [ 0\.  0\.  1\.  1.] 
```

请注意，第一个预测非常好，而第二个完全错误，我看不出这个类有什么问题：

```
 import math
    import random
    import itertools
    import numpy as np

    random.seed(0)

    def rand(a, b):
        return (b-a)*random.random() + a

    def sigmoid(x):
        return math.tanh(x)

    def dsigmoid(y):
        return 1.0 - y**2

    class NN:
        def __init__(self, ni, nh, no):
            # number of input, hidden, and output nodes
            self.ni = ni + 1 # +1 for bias node
            self.nh = nh + 1
            self.no = no

            # activations for nodes
            self.ai = [1.0]*self.ni
            self.ah = [1.0]*self.nh
            self.ao = [1.0]*self.no

            # create weights (rows=number of features, columns=number of processing nodes)
            self.wi = np.zeros((self.ni, self.nh))
            self.wo = np.zeros((self.nh, self.no))
            # set them to random vaules
            for i in range(self.ni):
                for j in range(self.nh):
                    self.wi[i][j] = rand(-5, 5)
            for j in range(self.nh):
                for k in range(self.no):
                    self.wo[j][k] = rand(-5, 5)

            # last change in weights for momentum   
            self.ci = np.zeros((self.ni, self.nh))
            self.co = np.zeros((self.nh, self.no))

        def runNetwork(self, inputs):
            if len(inputs) != self.ni-1:
                raise ValueError('wrong number of inputs')

            # input activations
            for i in range(self.ni-1):
                #self.ai[i] = sigmoid(inputs[i])
                self.ai[i] = inputs[i]

            # hidden activations   
            for j in range(self.nh-1):
                sum = 0.0
                for i in range(self.ni):
                    sum = sum + self.ai[i] * self.wi[i][j]
                self.ah[j] = sigmoid(sum)

            # output activations
            for k in range(self.no):
                sum = 0.0
                for j in range(self.nh):
                    sum = sum + self.ah[j] * self.wo[j][k]
                self.ao[k] = sigmoid(sum)

            ao_simplified = [round(a,2) for a in self.ao[:]]
            return ao_simplified  

        def backPropagate(self, targets, N, M):
            if len(targets) != self.no:
                raise ValueError('wrong number of target values')

            # calculate error terms for output
            output_deltas = [0.0] * self.no
            for k in range(self.no):
                error = targets[k]-self.ao[k]
                output_deltas[k] = dsigmoid(self.ao[k]) * error

            # calculate error terms for hidden
            hidden_deltas = [0.0] * self.nh
            for j in range(self.nh):
                error = 0.0
                for k in range(self.no):
                    error = error + output_deltas[k]*self.wo[j][k]
                hidden_deltas[j] = dsigmoid(self.ah[j]) * error

            # update output weights
            for j in range(self.nh):
                for k in range(self.no):
                    change = output_deltas[k]*self.ah[j]
                    self.wo[j][k] = self.wo[j][k] + N*change + M*self.co[j][k]
                    self.co[j][k] = change
                    #print N*change, M*self.co[j][k]

            # update input weights
            for i in range(self.ni):
                for j in range(self.nh):
                    change = hidden_deltas[j]*self.ai[i]
                    self.wi[i][j] = self.wi[i][j] + N*change + M*self.ci[i][j]
                    self.ci[i][j] = change

            # calculate error
            error = 0.0
            for k in range(len(targets)):
                error = error + 0.5*(targets[k]-self.ao[k])**2
            return error

        def train(self, patterns, iterations=1000, N=0.5, M=0.1):
            # N: learning rate
            # M: momentum factor
            for i in range(iterations):
                error = 0.0
                for p in patterns:
                    inputs = p[0]
                    targets = p[1]
                    self.runNetwork(inputs)
                    error = error + self.backPropagate(targets, N, M)
                if i % 100 == 0: # Prints error every 100 iterations
                    print('error %-.5f' % error) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:06:00.490

你的错误——如果有的话——与班级没有任何关系。正如@Daniel Roseman 所建议的那样，自然的猜测是这是一个类/实例变量问题，或者可能是一个可变的默认参数，或者一个列表的乘法，或者其他东西，这是神秘行为的最常见原因。

但是，在这里，您得到不同的结果只是因为您每次使用不同的随机数。如果你`random.seed(0)`在打电话之前`NN(2,3,1)`，你会得到完全相同的结果：

```
error 2.68110
error 0.44049
error 0.39256
error 0.26315
error 0.00584
[ 0.01  0.01  0.07  0.97]
error 2.68110
error 0.44049
error 0.39256
error 0.26315
error 0.00584
[ 0.01  0.01  0.07  0.97] 
```

我无法判断你的算法是否正确。顺便说一句，我认为您的`rand`功能正在重塑`random.uniform`.

# dropbox-api - 关于用于从 Dropbox 团队获取帐户列表的 Dropbox api

> ID：12262718
> 
> 赞同：0
> 
> 时间：2012-09-04T11:39:01.603
> 
> 标签：dropbox-api

我想获取有关拥有一个管理员保管箱帐户的信息，该帐户下有多个保管箱帐户。在可用的 API 中，没有为用户配置提供 API，也没有为我提供一个管理员帐户可用的用户帐户。那么有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:22:21.533

Dropbox API 目前不提供任何此类团队特定或用户配置功能。

# c# - 在 Windows 应用商店应用中绑定到 SelectedItems.Count

> ID：12262720
> 
> 赞同：1
> 
> 时间：2012-09-04T11:39:03.713
> 
> 标签：c#, xaml, windows-store-apps

我想将我的 TextBlock.Text 绑定到 ListBox.SelectedItems.Count，但我发现当我在列表框中多选项目时，我的 TextBlock 不显示任何内容。

我记得这种方式适用于 WPF，但它不再适用于 Windows Store App。

有没有其他方法可以解决这个简单的问题？

```
 <StackPanel>
        <StackPanel.Resources>
            <local:NumberToTextConverter x:Key="NumToText" />
        </StackPanel.Resources>
        <TextBlock Text="{Binding SelectedItems.Count, ElementName=listBox, Mode=TwoWay, Converter={StaticResource NumToText}}"
                   Height="80" />
        <ListBox x:Name="listBox"
                 SelectionMode="Multiple" />
    </StackPanel> 
```

这是转换器，但在这种情况下不是必需的。

```
internal class NumberToTextConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string culture)
    {
        if(value != null)
            return ((int)value).ToString();

        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string culture)
    {
        throw new NotImplementedException();
    }

} 
```

我在程序的入口处加载了一些数据。

```
 List<string> gogoString = new List<string>();

        for (int i = 0; i < 4; i++)
            gogoString.Add(i.ToString());

        listBox.ItemsSource = gogoString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:00:21.730

好吧，我迟到了。

WPF 中的`ListBox`实现`INotifyPropertyChanged`，但不在 Windows Store 应用程序中。这就是为什么我无法从Windows 应用商店应用程序中`ListBox.Items.Count`或`ListBox.SelectedItems.Count`在 Windows 应用商店应用程序中收到通知。

# primefaces - primefaces 滚动面板在 Internet Explorer 宽度中不可见，以 % 为单位

> ID：12262721
> 
> 赞同：0
> 
> 时间：2012-09-04T11:39:06.677
> 
> 标签：primefaces

使用 primefaces 滚动面板包含数据列表/表格/网格以显示数据。当滚动面板宽度以像素（px）为单位时，它会显示 Internet Explorer 以及 chrome。

但是当我以百分比给出宽度和高度时，滚动条在 chrome 中可见，但在 Internet Explorer 中不可见。

当高度以 % 给出时，LayoutUnit 也遇到了类似的问题，它在 IE 中不可见，现在我已经给出了以 px 为单位的固定高度

问题（对于滚动面板）::
1\. 是否可以以 % 而**不是**px 给出宽度和高度。
2\. 如果不能以 % 的形式完成。我们可以从 jquery 代码中做到这一点，因为 primefaces 与 jquery 捆绑在一起。

注意：：需要根据window的屏幕尺寸的宽高来调整dataTable。

细节 ：：

PrimeFaces :: 3.3
Internet Explorer :: 9
Google Chrome :: 21

# drupal - Drupal Form Alter 钩子

> ID：12262722
> 
> 赞同：0
> 
> 时间：2012-09-04T11:39:06.600
> 
> 标签：drupal, module, drupal-7, drupal-modules

我正在使用 mymodule_form_alter 钩子

我想在提交后更改表单字段的值。

任何人都知道如何做到这一点。我正在使用drupal7。

**这是代码**

```
function check_domain_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case "user_register_form":
      $form['#submit'][] = 'check_domain_user_register_form_submit';
      break;
  }
}

function check_domain_user_register_form_submit($form, &$form_state) {
  $form_state['input']['profile_main']['field_firm_company_name']['und'][0]['value']='test';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:52:10.923

在此过程中调用提交处理程序为时已晚……值字段值将已保存。还你想用`$form_state['values']`，没有`$form_state['input']`。

如果您将代码移动到验证处理程序，您应该会获得更多的运气：

```
function check_domain_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case "user_register_form":
      $form['#validate'][] = 'check_domain_user_register_form_validate';
      break;
  } 
}

function check_domain_user_register_form_validate($form, &$form_state) {
  $form_state['values']['profile_main']['field_firm_company_name']['und'][0]['value']='test';
} 
```

# c++ - 实现二项式堆

> ID：12262723
> 
> 赞同：1
> 
> 时间：2012-09-04T11:39:08.703
> 
> 标签：c++, binomial-heap

我的目标是构建一个二项式堆。这是我现在编写的代码：

```
#include<iostream>
using namespace std;
void maxheapify(int a[],int length,int i)
{
    int left=2*i;
    int right=2*i+1;
    int largest=i;
    if(left<length && a[left]>a[largest])
    {
        largest=left;

    }
    if ( right<length && a[right]>a[largest])
    {
        largest=right;
    }

    if(largest!=i)
    {
int temp=a[i];
a[i]=a[largest];
a[largest]=temp;
maxheapify(a,length,largest);

    }

}
void buildmax(int a[],int length)
{
    for(int i=(length-1)/2;i>=0;i--)
    {
        maxheapify(a,length,i);

    }

}
/*void heapsort(int a[],int length)
{
    buildmax(a,length);
    for(int i=length-1;i>0;i--)
    {
        int temp=a[i];
        a[i]=a[0];
        a[0]=temp;
        maxheapify(a,i,0);

    }

}
*/
 void combine_heap(int a[],int n,int b[],int m,int c[])
 {

 }
int main()
{
    int a[100];
    int n=sizeof(a)/sizeof(a[0]);

    int b[100];
    int m=sizeof(b)/sizeof(b[0]);
    int c[200];
    int length=sizeof(a)/sizeof(a[0]);
    for(int i=0;i<length;i++){
        a[i]=34+rand()%(length-33);
         b[i]=rand()%(i+1);
            }
    /*heapsort(a,length);*/
    /*for(int i=0;i<length;i++)
        cout<<a[i]<<"  ";*/

    return 0;
} 
```

我认为简单的解决方案是将两个数组组合成第三个数组，然后调用 buildmax 程序，但我认为它效率不高，我试图从维基百科实现这个伪代码

```
function merge(p, q)
    while not( p.end() and q.end() )
        tree = mergeTree(p.currentTree(), q.currentTree())
        if not heap.currentTree().empty()
            tree = mergeTree(tree, heap.currentTree())
            heap.addTree(tree)
        else
            heap.addTree(tree)
        heap.next() p.next() q.next() 
```

但我不知道如何实现它，因为通常如何访问子树？另一种变体是构造优先级队列并使用插入函数先从一个数组插入，然后从另一个数组插入，但这是最优的吗？请帮我写代码有效地将这两个最大堆合并为一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T07:08:09.423

这是二项式堆的一个很好的例子，但它是在 c 中的。您将获得实现二项式堆的基本逻辑。[请参阅此处的](http://www.coders-hub.com/2013/04/c-code-for-binomial-heap-tree.html)示例

[或在此处](https://www.youtube.com/innosenblog)获取视频教程以了解算法。

# c++ - c ++链接错误，找不到global.h结构

> ID：12262724
> 
> 赞同：0
> 
> 时间：2012-09-04T11:39:10.920
> 
> 标签：c++, windows, header, struct

我在头文件中定义了一个结构`global.h`，我尝试在另一个类中使用它，但我收到此错误：`Error 6 error LNK2001: unresolved external symbol "struct tag_KG_Data g_GlobalVar" (?g_GlobalVar@@3Utag_KG_Data@@A) KGComThread.obj`

```
#ifndef GLOBAL_H_
#define GLOBAL_H_

#include <stdio.h>

typedef struct tag_KG_Data
{
      int nKGStationID;
      int nKGComPort;

}GLOBAL_VAR;

#endif 
```

在`KGComThread.cpp`文件中我像这样使用它：

```
#include "global.h"

extern GLOBAL_VAR g_GlobalVar; 
```

我认为编译器找不到该`global.h`文件，因此它定义了一个无意义的`tag_KG_Data`结构，但我不明白为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:40:21.773

这个

```
extern GLOBAL_VAR g_GlobalVar; 
```

只是一个*声明*。该变量尚未*定义*：

```
GLOBAL_VAR g_GlobalVar; 
```

您需要单个实现文件中的前一行。

此外，由于这是 C++，因此您不需要结构的标签，您只需编写

```
struct GLOBAL_VAR
{
      int nKGStationID;
      int nKGComPort;
}; 
```

# django - 用于多个数据库的 Django GenericTabularInline

> ID：12262727
> 
> 赞同：3
> 
> 时间：2012-09-04T11:39:16.470
> 
> 标签：django, django-admin, inline-editing, inline-formset, generic-foreign-key

我一直在尝试使 GenericTabularInline 类在两个管理员的两个数据库设置中工作，方法是从它继承并覆盖 BaseModelAdmin 类中的一些方法，就像在 Django 文档中所做的那样（https://docs.djangoproject.com /en/dev/topics/db/multi-db/），但是如果以内联形式编辑子模型，它总是写入默认数据库（我希望第二个管理员专门处理辅助数据库，模型是两者都一样），所以我不能重写某些方法或做错事。这是我到目前为止的课程：

```
class MultiDBGenericTabularInline(generic.GenericTabularInline):

    using = settings.SECONDARY_DATABASE

    def save_model(self, request, obj, form, change):
        # Tell Django to save objects to the 'other' database.
        obj.save(using=self.using)

    def delete_model(self, request, obj):
        # Tell Django to delete objects from the 'other' database
        obj.delete(using=self.using)

    def queryset(self, request):
        # Tell Django to look for objects on the 'other' database.
        return super(MultiDBGenericTabularInline, self).queryset(request).using(self.using)

    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        # Tell Django to populate ForeignKey widgets using a query
        # on the 'other' database.
        return super(MultiDBGenericTabularInline, self).formfield_for_foreignkey(db_field, request=request, using=self.using, **kwargs)

    def formfield_for_manytomany(self, db_field, request=None, **kwargs):
        # Tell Django to populate ManyToMany widgets using a query
        # on the 'other' database.
        return super(MultiDBGenericTabularInline, self).formfield_for_manytomany(db_field, request=request, using=self.using, **kwargs)

    #Override these three methods; otherwise the log manager attempts
    #to write to the main db and raises an exception.

    def log_addition(self, request, object):
        pass

    def log_change(self, request, object, message):
        pass

    def log_deletion(self, request, object, object_repr):
        pass 
```

任何帮助或提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T18:51:28.113

我意识到这是一个老问题，但我最近偶然发现了一个非常相似的事情。诀窍是覆盖父模型管理员的`save_formset`方法。就我而言，解决方案是执行以下操作：

```
class SomeTabularInline(admin.TabularInline):
    # stuff

class MyModelAdmin(admin.ModelAdmin):
    using = 'something'
    inlines = (SomeTabularInline,)

    def save_formset(self, request, form, formset, change):
        instances = formset.save(commit=False)
        for obj in formset.deleted_objects:
            obj.delete(using=self.using)
        for instance in instances:
            instance.save(using=self.using)
        formset.save_m2m() 
```

注意：我使用的是`TabularInline`实例，而不是 a，`GenericTabularInline`但它们都来自`InlineModelAdmin`; 所以我希望这对你的情况有用。

来源：[https ://docs.djangoproject.com/en/1.9/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_formset](https://docs.djangoproject.com/en/1.9/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_formset)

# plugins - 在粉丝专页和评论插件之间同步墙帖

> ID：12262729
> 
> 赞同：1
> 
> 时间：2012-09-04T11:39:19.983
> 
> 标签：plugins, facebook-comments

我一直在尝试找到一种方法，将 Facebook 上发布的评论与网站上发布的评论同步。我曾尝试使用评论插件，但注意到来自粉丝页面的帖子不会推送到评论插件。有没有办法同步墙上的帖子？

# android - Phonegap：device.name 返回什么？

> ID：12262734
> 
> 赞同：0
> 
> 时间：2012-09-04T11:39:39.257
> 
> 标签：android, cordova

我知道它返回设备名称，这通常是代码名称和电话名称的组合。

但我需要的是更准确的列表（适用于安卓手机）。这样的清单存在吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-09T18:51:40.687

不确定您是否仍然感兴趣，但 Google 在[此处](https://support.google.com/googleplay/answer/1727131?hl=en-GB)提供了 CSV 和 PDF 列表。当然，此列表仅涵盖 Android 设备。

# android - 在 RelativeLayout 中使用 ImageView 重复图像

> ID：12262735
> 
> 赞同：31
> 
> 时间：2012-09-04T11:39:41.800
> 
> 标签：android, bitmap, android-imageview, android-relativelayout

我想用`ImageView`with in重复图像`RelativeLayout`。是否可以使用 Bitmap xml 并使用 tilemode `"repeat"`，`RelativeLayout`因为我在 Internet 上看到的东西都在处理`LinearLayout`。

任何帮助或提示都将受到热烈欢迎。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-11T11:59:36.493

**在Drawable**文件夹中创建一个名为 background 的 XML 文件

**背景.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:src="@drawable/imagename"
android:tileMode="repeat" /> 
```

在您的相对布局中添加上述 XML 作为背景

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:scaleType="fitXY"
android:background="@drawable/background" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T11:44:35.110

是的，当然，您可以将它与相对布局一起使用。将其用作您的 RelativeLayout 的背景。我也在我的项目中使用了它。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" 
        android:background="@drawable/top_header_bg_repeat"
        android:gravity="center">

top_header_bg_repeat.xml (in drawable folder)
----------------------------------------------

<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/top_header"
    android:tileMode="repeat"
    android:dither="true"/>

Set Bitmap in ImageView
----------------------   

<ImageView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/top_header_bg_repeat"
        android:scaleType="fitXY"/> 

 <ImageView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/top_header_bg_repeat"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T11:43:29.527

是的，有可能。像在 XML 中一样定义重复图像，`Drawable (bitmap)`并将`android:tileMode="repeat"`其用作`RelativeLayout`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:09:17.033

在所有请求中都存在一个小问题，如果您的图像会很大并且更小您的布局大小，图像不会调整大小，只能按 X 重复。对于按 Y 重复，您只能通过编程方式进行。

我这样解决我的问题（设置重力填充）

图像的可绘制背景

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/table_cells_bg_img"
        android:tileMode="repeat" android:gravity="fill" /> 
```

和布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/table_cell_height">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="@dimen/table_cell_height"
        android:scaleType="fitXY"
        android:src="@drawable/table_cells_bg"/>
<TextView
        android:id="@+id/txtActivityTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/avatarImage"
        android:text="TextView"
        android:textColor="@color/white"
        android:textSize="@dimen/font_size_middle" />
</RelativeLayout> 
```

而 table_cells_bg_img 它的图像宽度 = 1px 和高度 = 1px

等等的布局，所以现在你的图像就像背景一样，它将为任何大小的父布局调整大小

试试看，也许有帮助。要在我的情况下清除，我需要将平铺背景图像平铺到按 X 坐标重复的完整大小的表格单元（就像我可以在 iOS 上那样）。所以我像我描述的那样解决它。

# css - text-overflow:ellipsis 属性的表格对齐错误

> ID：12262740
> 
> 赞同：1
> 
> 时间：2012-09-04T11:40:01.710
> 
> 标签：css

> **可能重复：**
> [表格单元格中的 CSS 文本溢出？](https://stackoverflow.com/questions/9789723/css-text-overflow-in-a-table-cell)

我正在用 css 应用 td 宽度。在这里，当我应用 css 属性 text-overflow:ellipsis 时，td 的对齐会出错。

任何机构都可以给我一个解决方案吗？

[http://jsfiddle.net/2T8pY/](http://jsfiddle.net/2T8pY/)

# jquery - Bxslider 问题：仅显示一张幻灯片

> ID：12262748
> 
> 赞同：1
> 
> 时间：2012-09-04T11:40:34.977
> 
> 标签：jquery, bxslider

我在使用 bxslider 时遇到问题。我正在尝试创建一个由多个图像组成的轮播，每次单击按钮时，这些图像都会滑动一次。似乎该`displaySlideQty`选项已损坏，因为一次只显示一张幻灯片。

我正在尝试重新创建这个：[http ://bxslider.com/examples/display-move-multiple-slides-once-example-one](http://bxslider.com/examples/display-move-multiple-slides-once-example-one)

示例：http: [//jsfiddle.net/tCeCe/](http://jsfiddle.net/tCeCe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:50:36.587

不它不是。问题出在其他地方 - 在您的样式代码中

```
<div style="width:400px;">
    <ul id='slider' style="width:400px;"> 
```

上面的这两个宽度*不能*相同 - 更具体地说，您的 ul 宽度需要远低于外部 div 宽度（否则您会遇到您描述的问题）。

所以改成`<ul id='slider' style="width:400px;">`一个较小的数字，比如`<ul id='slider' style="width:50px;">`

# python - 在 Python 中使用 Google App Engine 的 webapp2 开发 Web 应用程序

> ID：12262752
> 
> 赞同：1
> 
> 时间：2012-09-04T11:40:40.653
> 
> 标签：python, google-app-engine, webapp2

在 Python 中使用 Google App Engine 的 webapp2 框架开发完整的 Web 应用程序有哪些好书？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:21:12.960

[正在更新Google App Engine 编程以涵盖 Python 2.7 运行时和 webapp2（可](http://ae-book.appspot.com/)[在此处](http://shop.oreilly.com/product/0636920017547.do)获得预发行版）。

# c++ - 宏名称和替换列表相同

> ID：12262754
> 
> 赞同：3
> 
> 时间：2012-09-04T11:41:04.863
> 
> 标签：c++, macros, replace

我发现了一些预处理指令，其中宏名称和替换列表是相同的。例如，gcc 提供的 stdbool.h 中的一些预处理指令。

```
#else /* __cplusplus */

/* Supporting <stdbool.h> in C++ is a GCC extension.  */
#define _Bool   bool
#define bool    bool
#define false   false
#define true    true

#endif /* __cplusplus */ 
```

我不明白程序员为什么要编写这些预处理指令。它们没用，替换会浪费时间。我知道这不会导致无限递归。如何避免无限递归？C标准中有哪些相关规定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:34:01.297

C++11 标准第 16.3.4 节第 2 段防止了宏替换期间的无限递归：

> 如果在替换列表的扫描过程中找到被替换的宏的名称（不包括源文件的其余预处理标记），则不会替换它。此外，如果任何嵌套替换遇到被替换的宏的名称，它不会被替换。这些未替换的宏名称预处理标记不再可用于进一步替换，即使它们稍后在该宏名称预处理标记将被替换的上下文中进行（重新）检查。

基本上，这意味着出现在其自身扩展中的宏不会再次被替换。

`true`GCC 扩展将、`bool`和`false`定义为宏的原因是为了使 C++ 代码与 C99 更兼容。在 C99 中，这些在 stdbool.h 中定义为宏，因此代码可以检查它们是否使用 eg 定义`#ifdef bool`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:36:07.657

除了其他答案之外，定义这些宏将帮助编译器生成“宏重新定义”错误消息，如果任何人、任何地方都有重新定义布尔值、真或假的绝妙主意。

请参阅标准第 16.3 节 - 在宏重新定义中只允许相同的替换列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:29:59.993

有时标准说“`X`必须是宏”。如果你的语言已经有一个内在的`X`，你必须说`#define X X`是标准兼容的。（例如，用户可以说`#ifdef X`并期望这是真的。）

示例（C11，7.2/2）：

> `assert`宏应实现为宏，而不是实际功能。如果为了访问实际函数而抑制宏定义，则行为未定义。

您的实现具有实际`assert`功能是完全合理的。

为了好玩，这里有一些关于它们是宏还是具有外部链接的标识符的“未指定”的东西：

*   `errno`

*   `setjmp`

*   `va_copy`,`va_end`

*   `putc`,`getc`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:30:57.250

宏扩展不会递归，因此它们将终止。

拥有宏的一个优点是您可以在预处理器中对其进行测试

```
#if defined bool
...
#endif 
```

仅在`bool`是宏时才有效。

# spring - 如何重用persistence.xml中的类声明？

> ID：12262755
> 
> 赞同：1
> 
> 时间：2012-09-04T11:41:07.423
> 
> 标签：spring, jpa, configuration, spring-jdbc, spring-orm

我正在开发一个使用 JPA/HIbernate 和 Spring 进行持久性和事务管理的项目。此应用程序具有从同一数据库服务器（Sybase 环境）的多个目录和模式映射的表。

为了开始使用内存数据库为这个应用程序创建自动化测试，我必须创建一个替代`test-persistence.xml`列表，列出默认的所有相同实体`persistence.xml`，但指定替代`orm.xml`映射文件，覆盖类中注释中的架构信息。

我的 Spring 测试配置中的关键部分是这样的：

```
<bean id="hsqlFixes" class="com.example.app.util.HSQLFixes" />
<bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
      depends-on="hsqlFixes">
    <property name="persistenceUnitName" value="puName" />
    <property name="persistenceXmlLocation"
              value="META-INF/persistence-tests.xml" />
....
</bean> 
```

[`HSQLFixes`执行一些 JDBC 语句只是创建一些类型的 bean在哪里。]

并且在`persistence-tests.xml`：

```
<persistence-unit name="puName" transaction-type="RESOURCE_LOCAL">
    <mapping-file>META-INF/orm-tests-db1.xml</mapping-file>
    <mapping-file>META-INF/orm-tests-db2.xml</mapping-file>
    <mapping-file>META-INF/orm-tests-db3.xml</mapping-file>
    ... followed by the same list of entities from persistence.xml 
```

现在，我想摆脱和中列出的类的重复`persistence.xml`，`test-persistence.xml`因为我觉得我可以自动生成第二个文件。

我怎么能动态地去做，这样我在添加/删除实体时就不需要更改两个 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:29:37.657

我建议以编程方式配置您的测试持久性单元，以避免多个持久性.xml 或多个持久性单元。多模式要求使这种情况变得更加复杂，因为它涉及映射文件覆盖。创建 EntityManagerFactory 时很容易传入标准属性，但这种情况需要使用[PersistenceUnitPostProcessor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/persistenceunit/PersistenceUnitPostProcessor.html)使用[MutablePersistenceUnitInfo](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/persistenceunit/MutablePersistenceUnitInfo.html)来添加映射文件引用。

看看[Programmatically loading Entity classes with JPA 2.0?](https://stackoverflow.com/questions/2838634/programmatically-loading-entity-classes-with-jpa-2-0) 有关如何配置它的一个很好的例子。[MutablePersistenceUnitInfo](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/persistenceunit/MutablePersistenceUnitInfo.html)上的 API将允许您添加映射文件 refs。至于类 refs，您将自动从您在后期处理中修改的原始 persistence.xml 中获取它（仅在测试配置中），这解决了重复问题。

所以，也许你最终会得到这样的 PersistenceUnitPostProcessor：

```
public class ConfigureTestMappingFiles implements PersistenceUnitPostProcessor {
    private List<String> mappingFiles;
    @Override
    public void postProcessPersistenceUnitInfo(MutablePersistenceUnitInfo pui) {
        if (mappingFiles != null) {
            pui.getMappingFileNames().addAll(mappingFiles);
        }
    }
    // ... getter and setter for mappingFiles
} 
```

并且，在您的配置中，您可以像这样注册它：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    depends-on="hsqlFixes">
    <property name="persistenceUnitName" value="programasPlanosEnsino" />
    <property name="persistenceXmlLocation" value="META-INF/persistence.xml" />
            ...
    <property name="persistenceUnitPostProcessors">
        <list>
            <bean class="com.example.test.ConfigureTestMappingFiles">
                <property name="mappingFiles">
                    <list>
                        <value>META-INF/orm-tests-db1.xml</value>
                        <value>META-INF/orm-tests-db2.xml</value>
                        ... add more as needed
                    </list>
                </property>
            </bean>
        </list>
    </property> 
```

希望这可以帮助。

# java - 为什么将会话范围的对象序列化被认为是一种好习惯？

> ID：12262759
> 
> 赞同：2
> 
> 时间：2012-09-04T11:41:22.573
> 
> 标签：java, session, web-applications, servlets, session-state

我经常听到人们说**会话范围**的对象应该实现`Serializable`？为什么会这样？如果不这样做会是什么结果？那么为什么不把它作为 servlet 规范的一部分呢？我知道如果我们不这样做，Tomcat 不会抱怨。JBoss、WebSphere 或 Weblogic 等其他应用服务器呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:42:44.387

> 这允许 servlet 容器将会话的内容存储在磁盘上，或者通过网络将会话内容传输到另一台服务器。

为什么容器需要在磁盘上存储会话（钝化）？也许当内存已满。当再次需要会话时，它会将其从磁盘中检索回内存（激活）。

[http://www.javapractices.com/topic/TopicAction.do?Id=110](http://www.javapractices.com/topic/TopicAction.do?Id=110)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:43:22.420

它允许容器通过网络移动会话对象或将它们存储在磁盘上。当您将应用程序与在不同物理盒中运行的不同服务器节点进行集群时，这将很有帮助。

# powershell - 是否可以在 powershell 3.0 的 Invoke-WebRequest 中使用 document.querySelector？

> ID：12262760
> 
> 赞同：6
> 
> 时间：2012-09-04T11:41:26.343
> 
> 标签：powershell, powershell-3.0, selectors-api

我正在使用这样的命令下载网站：

```
$response = Invoke-WebRequest 'http://stackoverflow.com' 
```

是否可以使用[querySelector](http://msdn.microsoft.com/en-us/library/cc288531%28v=vs.85%29.aspx)或[querySelectorAll](http://msdn.microsoft.com/en-us/library/cc288532%28v=vs.85%29)来查找某些元素？我知道我可以使用`$response.ParsedHtml.all`和过滤这些，但我想使用更复杂的查询，我在`$response.ParsedHtml.documentElement`.

我正在使用 powershell 3 RC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:25:35.127

我使用方法 getElementsByTagName。我不确定这是否对你有用。这是我使用上面的代码从页面获取图像的方法：

```
$response.ParsedHtml.getElementsByTagName("img") 
```

类名称或 ID 存在其他方法。用于`$response.ParsedHtml | gm -MemberType Method`更多选项。

# html - 我怎样才能让浮动 imgs 填满所有空间

> ID：12262765
> 
> 赞同：2
> 
> 时间：2012-09-04T11:41:35.463
> 
> 标签：html, css

我有一些图像宽度固定尺寸。我希望它们像网格一样填满，如下所示：

![在此处输入图像描述](../Images/788211e64009c75dad04deafb25e484b.png)

但相反，这种情况发生了：

![在此处输入图像描述](../Images/7856e24822cb1b98cef30be4588aa115.png)

我怎样才能让他们填满一切？

html:

```
<div id="product-pics">
    <img src="img/dummy/282x282.png" alt="" class="tile" />
    <img src="img/dummy/566x282.png" alt="" class="tile" />
    <img src="img/dummy/282x282.png" alt="" class="tile" />
    <img src="img/dummy/282x282.png" alt="" class="tile" />
    <img src="img/dummy/282x566.png" alt="" class="tile" />
    <img src="img/dummy/282x282.png" alt="" class="tile" />
    <img src="img/dummy/282x282.png" alt="" class="tile" />
    <img src="img/dummy/282x282.png" alt="" class="tile" />
    <img src="img/dummy/566x282.png" alt="" class="tile" />
</div> 
```

CSS：

```
.tile {
    margin: 1px;
    float: left; /* to remove the 4px gap between images */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:07:14.670

在这种情况下，您需要稍微更改 HTML 中的顺序。把 282x566 放在第一位，然后只浮动那个。让其余部分浮动到左侧，它应该可以工作。

[**演示**](http://dabblet.com/gist/3620663)

重新排列**HTML**：

```
<div id="product-pics">
    <img src="img/dummy/282x566.png" alt="282x566" class="tile double-h right" />

    <img src="img/dummy/282x282.png" alt="282x282" class="tile" />
    <img src="img/dummy/282x282.png" alt="282x282" class="tile" />
    <img src="img/dummy/282x282.png" alt="282x282" class="tile" />
    <img src="img/dummy/282x282.png" alt="282x282" class="tile" />

    <img src="img/dummy/566x282.png" alt="566x282" class="tile double-w" />
    <img src="img/dummy/282x282.png" alt="282x282" class="tile" />
</div> 
```

相关**CSS**：

```
#product-pics { width: 852px; }
.tile {
    float: left;
    width: 282px;
    height: 282px;
    margin: 0 2px 2px 0;
}
.right { float: right; }
.double-h { height: 566px; }
.double-w { width: 566px; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T11:48:07.173

您需要使用 JavaScript 来执行此操作。有一个很棒的插件叫做[Masonry](http://masonry.desandro.com/)，它会产生你想要的布局。Masonry 使用 jQuery，但是有一个[Vanilla Masonry](http://vanilla-masonry.desandro.com/)端口没有。

您面临的问题是浏览器首先水平放置页面，然后垂直放置。砌体改变了这一点，并在列中创建布局。

这种布局也可以用[CSS3 列](http://www.quirksmode.org/css/multicolumn.html)生成，但是浏览器支持不是很好（IE10+，其他现代浏览器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:45:55.350

使用 IMG 标签的 CSS Class insted 并重复图像，在第一个图像的示例下方，

```
.tile1 {
background:url('img/dummy/282x282.png') repeat top left;
width:100%; /* based on your area */
height:500px; /* based on the image height*/
} 
```

还要检查 CSS 中可用的不同“重复”选项。

# android - Fragment-Activity 通信和 Fragment 间通信

> ID：12262769
> 
> 赞同：4
> 
> 时间：2012-09-04T11:41:46.680
> 
> 标签：android, android-fragments

一个关于片段之间通信的设计问题，

为什么有人会使用有点复杂的回调模式来实现侦听器，而不是使用我们想要从中调用方法的类中的简单静态方法（类似于对某些方法/属性使用 Singleton）。是否存在任何性能问题，或者它“只是”Android/Java 的一种糟糕的 OO 编程实践？因此，双向通信的简单方法可能是：

```
MyActivity activity
    Fragment A
    Fragment B
static method canBeCalledFromAnywhere() {}
method activityMethod()
    call FragmentA.doSomething();
    call FragmentB.doSomething();

FragmentA
    onCreate()
        onMe = this;

static method doSomething()
    do something with static or use onMe for instance;

method oneMethodFragmentA()
    call MyActivity.canBeCalledFromAnywhere();

FragmentB
onCreate()
    onMe = this;

static method doSomething()
    do something with static or use onMe for instance;

method oneMethodFragmentB()
    call MyActivity.canBeCalledFromAnywhere(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T16:10:10.863

如果您有片段/活动的简单用例场景，那么您的解决方案是可行的。不要总是买 Java 纯粹主义者所说的——如果我们都这样做，那么没有人会完成任何事情。有时最好将惯例抛到窗外，做最快、最容易做的事情——尤其是当它是一个小应用程序并且有人付钱给你做的时候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T15:46:00.277

使用记录在案的回调和推荐模式的原因是您将使用 Android 框架而不是反对它。使用静态方法完全绕过了这一点，看起来很简单，但在两个层面上存在问题。

首先，从面向对象设计的角度来看，您正在紧密耦合具有非常不同和独立职责的类，这使得它们更难重用和重构。您在片段和活动类中引入的静态方法越多，这个问题就会变得越严重。

其次，您在两种类型的对象的生命周期之外工作，这会给您带来很多痛苦。首先，Fragment 一直被 Android 销毁并重新创建。例如，当您旋转设备并且显示从纵向模式变为横向模式时，您的所有片段都被销毁并再次创建 - 因为在横向中您可能使用不同的片段或在相同的片段中呈现不同的内容。当用户导航到新的活动或不同的应用程序时，片段和活动也可以暂停。

在片段和活动上创建静态方法，您可以随时调用这些方法，您甚至不知道片段或活动是否可见。如果它是当前活动的一部分，您不知道它处于其生命周期的哪个阶段，因此您要么编写大量额外的代码来处理这个问题，要么根本不编写（并且有一个非常错误的应用程序）。

使用回调还意味着在多片段活动中，您可以更轻松地确保替代片段可用于替代布局，并且父 Activity 在决定使用哪个片段后，可以确保来自同级片段的数据被路由到正确的片段.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T11:50:54.900

最好使用明确指定的通信接口，而不是假设有一个。因此，如果您`interface`为您的通信定义，那么：

1.  您`Fragment`可以轻松检查父级是否`Activity`实现此接口，以便`Fragment`能够传达其需求，
2.  要定义接口，您需要考虑一下，而不是仅仅开始编码，这会导致某种标准化，这很好，
3.  维护接口的更新很容易，因为如果您更改接口，编译器会抱怨，但没有实现。

您可能还想阅读[这篇 Android SDK 文章](http://developer.android.com/training/basics/fragments/communicating.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:04:34.230

下载最新的 Android 工具（撰写本文时的 SDK r20、工具 r14）并`New > Other > Android Application Project`使用 Eclipse IDE 创建一个新的 Android 应用程序项目 ( )。在“创建活动”步骤中，选择一个`MasterDetailFlow`基础项目。在您编写一行代码之前，这将使用两个开箱即用的 Fragment（一个 ListFragment 和一个详细视图）实例化一个应用程序。您可以检查它们如何通过主 Activity 进行通信。

# cakephp - CakePHP 1.3 - 保存不相关模型的事务

> ID：12262771
> 
> 赞同：2
> 
> 时间：2012-09-04T11:42:01.917
> 
> 标签：cakephp, transactions, cakephp-1.3

如何在控制器中启动事务，然后尝试保存多个彼此无关的模型？如果有任何失败，显然我希望回滚，如果一切正常，然后提交。

我想我的问题是我应该在哪个模型上开始交易？

```
$datasource = $this->Car->getDataSource();
$datasource->begin($this->Car);

$car = $this->Car->save();
$dog = $this->Dog->save();
$house = $this->House->save();

if ($car && $dog && $house) {
    $datasource->commit($this->Car);
} else {
    $datasource->rollback($this->Car);
} 
```

这是否可以确保 Dog 和 House 以及 Car 的保存？即事务在哪个模型上启动是否重要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T12:05:51.213

使用哪种模型来启动事务并不重要，但通常人们使用最接近控制器的模型（如果有的话）。

```
$continue = true;
$this->Car->begin();

// Do stuff that might set $continue to false.

if ($continue) {
    $this->Car->commit();
} else {
    $this->Car->rollback();
} 
```

要在“Do stuff”位期间设置 $continue，请检查每个保存等。

```
if (!$this->Car->save()) {
    $continue = false;
}

if ($continue) {
    if (!$this->Dog->save()) {
        $continue = false;
    }
}

if ($continue) {
    if (!$this->House->save()) {
        $continue = false;
    }
} 
```

# nsis - 如何从 xml 配置文件中读取 NSIS 脚本的配置设置（如安装文件夹、应用程序名称等）

> ID：12262773
> 
> 赞同：1
> 
> 时间：2012-09-04T11:42:02.577
> 
> 标签：nsis

我正在为基于 .net 窗口的项目开发安装程序。我以 Windows 形式开发了一个自定义的 Windows 安装程序屏幕。现在，我将表单上收集的所有详细信息保存在配置文件中。如果有人能告诉我，我如何在 NSIS 脚本中读取此配置文件，以从配置文件中将安装文件夹、应用程序名称等配置信息分配给 nsis 脚本。我曾尝试为此使用nsisXML.dll，但未能实现...任何帮助都将受到高度重视...

# ios - GPUImage：取消 GPUImageMovieWriter

> ID：12262775
> 
> 赞同：2
> 
> 时间：2012-09-04T11:42:10.183
> 
> 标签：ios, gpuimage

有什么方法可以取消/停止`GPUImageMovieWriter`和`GPUImageMovie`运行`startRecording`后`startProcessing`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:58:38.587

最近，添加了一种新方法`GPUImageMovie`，允许取消对视频文件的处理：

```
- (void)cancelProcessing; 
```

这将允许您有效地取消对视频的处理，并且不再处理任何帧。

考虑到您`GPUImageMovieWriter`的 completionBlock 无论如何都会被调用，因此您应该有某种标志来检查该块是为成功完成还是被取消调用。

这是一些示例代码：

```
- (void)processVideo
{
    _wasCancelled = NO;

    self.imageMovie = [self createImageMovie];
    self.filter = [self createFilter];
    [imageMovie addTarget:filter]
    self.movieWriter = [self createMovieWriter];

    [self.movieWriter startRecording];
    [self.imageMovie startProcessing];

    [self.movieWriter setCompletionBlock:^{
        [self.filter removeTarget:movieWriter];
        [self.movieWriter finishRecording];

        if (!_wasCancelled) {
            // Do stuff with the video
        }
    }];
}

- (void)cancelVideoProcessing
{
    _wasCancelled = YES;
    [self.imageMovie cancelProcessing];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:16:40.587

为什么。有一个取消录制选项。

```
[self.movieWriter cancelRecording]; 
```

如果视频以任何方式中断，则不会保存视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:45:44.853

假设 self.movi​​eWriter 为 GPUImageMovieWriter，则需要在调用 startRecording 和 startProcessing 之前设置回调：

```
[self.movieWriter setCompletionBlock:^{
    [self finishFilter];
}]; 
```

然后你可以停止图像处理：

```
[self.movieWriter endProcessing]; 
```

回调是：

```
- (void)finishFilter {
    //remove all targets from your filter chain calling "removeAllTargets"
    //then:
    [self.movieWriter finishRecording];
    self.movieWriter.completionBlock = nil;
    self.movieWriter = nil;
} 
```

# php - PHP：在 href='' 标记之间查找文本

> ID：12262789
> 
> 赞同：1
> 
> 时间：2012-09-04T11:42:51.470
> 
> 标签：php, regex

> **可能重复：**
> [php regex 以获取 href 标记内的字符串](https://stackoverflow.com/questions/4001328/php-regex-to-get-string-inside-href-tag)

我有一个文本文件，其中多次出现 href 标记。

我希望得到这些内容

```
href='...'
```

并将其打印到屏幕上。

我怎样才能做到这一点？主要问题是编写正确的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:50:33.693

干得好：

```
$pageData = file_get_contents('your.txt');
if(preg_match_all('/<a\s+href=["\']([^"\']+)["\']/i', $pageData, $links, PREG_PATTERN_ORDER))
    $all_hrefs = array_unique($links[1]); 
```

现在你有所有独特的hrefs `$all_href`;

如果你想显示它们：

```
foreach($all_href as $href)
{
echo $href;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T11:46:57.113

```
preg_match_all('|<a href="(.+)">|', $file_content, $matches);
print_r($matches); 
```

未经测试，但应该可以工作

# java - 需要帮助减少 Eclipse 和 tomcat 内存使用

> ID：12262794
> 
> 赞同：1
> 
> 时间：2012-09-04T11:43:25.727
> 
> 标签：java, eclipse, tomcat, memory-management

`message.setText(reader.name())`,

我目前正在使用一台只有 3GB RAM 的旧笔记本电脑，并且经常面临内存短缺的问题。

我遵循了一些建议来强制垃圾收集器和禁用一些插件，而我的 Eclipse（实际上是 Springsource 工具套件）堆状态显示在 ~400M/~600M 左右。但在任务管理器中，2 个 javaw.exe 进程（tomcat 和 STS）消耗 900mb 和 700mb。

物理内存稳定在 80%~90% 并且运行非常缓慢。

我使用的是 Windows 7 32 位，所以我认为 Java 在 64 位上使用更多内存的问题不应该适用于此。

`message.setText(reader.name())`无论如何都知道减少内存使用量吗？我完全不介意禁用 Eclipse 的功能，如果它使笔记本电脑运行得更快，我什至可以在黑屏白色文本上编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:51:55.247

在 eclipse.ini 文件中为 Eclipse 授予更少的内存，对于 Tomcat 也是如此

尝试对两者都使用 -Xmx512m 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:07:43.023

在性能调整练习中，您必须查看整台机器：

1.  检查任务管理器的进程列表，看看是否有任何其他内存/cpu 猪。有一些电子邮件客户端会占用大量内存和 CPU。
2.  检查您的网络连接。Eclipse 和 Tomcat（Tomcat 较少）都有检查远程 URL 以获取模式等的进程，如果您的互联网连接不佳（或根本没有），远程请求和/或超时可能会减慢您的速度。
3.  正如@jdevelop 指出的那样，您可以减少分配给 Eclipse 和 Tomcat 的内存，但要明白，如果它们需要的内存比您给它们的多，那么您将执行大量磁盘 i/o 来补偿
4.  最后，检查一下你在 Eclipse 中加载了哪些额外的插件，看看是否有什么你现在可以禁用的。其他插件在默认情况下会做很多工作（例如，resources.core 插件将存储大量历史记录），也许通过将它们配置为做更少的工作，您将释放您的机器来做更多有趣的事情。

# c# - 如何在图片底部添加水印并将其保存到9gag.com等服务器

> ID：12262797
> 
> 赞同：-3
> 
> 时间：2012-09-04T11:43:30.997
> 
> 标签：c#, asp.net

我想在上传之前将图像上传到我的网站。我想在图像底部添加一个水印，该水印将在背景上具有全宽，但网站徽标大小不会改变。

示例图片（看底部）：[http](http://d24w6bsrhbeh9d.cloudfront.net/photo/5265056_460s_v1.jpg) ://d24w6bsrhbeh9d.cloudfront.net/photo/5265056_460s_v1.jpg 或[http://www.damnlol.com/i/fb77b9fd16be21d394003164d6087bdd.jpg](http://www.damnlol.com/i/fb77b9fd16be21d394003164d6087bdd.jpg)

我想使用 ASP.NET 和 C#..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:53:51.883

为什么不对您网站提供的任何图像动态执行此操作？

查看[图像处理](http://msdn.microsoft.com/en-us/library/ms972953.aspx)程序部分，MS 实际上提供了一些关于添加图像处理程序的工作代码，该图像处理程序将水印动态添加到提供给用户浏览器的图像中（因此您不必将水印添加到物理图像中。

至于图像尺寸，您可以简单地执行一些代码来检查图像尺寸，并可能添加不同的水印等，或者添加像 9gag 这样的通用水印并裁剪图像，因此它总是“适合”。

# c# - 反序列化来自没有 WSDL 的 web 服务的 SOAP 响应

> ID：12262800
> 
> 赞同：3
> 
> 时间：2012-09-04T11:43:36.977
> 
> 标签：c#, .net, xml, soap, deserialization

我正在尝试编写一个可以反序列化来自 Web 服务的 SOAP 响应的 C# .NET 应用程序。Web 服务（此处称为“Wibble”）没有 WSDL (Grrrrrrrr)。我有一个完整的示例响应的副本，我相信我可以用它来生成中间类，但是尽管尝试了许多不同的方法，但我无法从响应中得到一个理智的对象。

响应的前几行如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <ns1:inspectResponse xmlns:ns1="ProjectService" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
            <inspectReturn href="#id0"/>
        </ns1:inspectResponse>
        <multiRef xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2="Wibble" id="id0" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns2:Project">
            <category xsi:type="ns2:Category" xsi:nil="true"/>
            <classId xsi:type="xsd:long">1000000</classId>
            [...]
        </multiRef>
        <multiRef xmlns:ns3="Wibble" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" id="id3" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns3:ProjectData">
            <author xsi:type="ns3:User" xsi:nil="true" />
            <authorUserId xsi:type="xsd:long">5289027</authorUserId>
            <classId xsi:type="xsd:long">0</classId>
            <comments xsi:type="xsd:string">Some comments.</comments>
            [...]        
        </multiRef>
    </soapenv:Body>
</soapenv:Envelope> 
```

ETC...

首先，如果我尝试使用`SoapFormatter`这样的：

```
var formatter = new SoapFormatter();
var blah = formatter.Deserialize(memstream);
return blah.ToString(); 
```

我得到一个`SerializationException`：`Parse Error, no assembly associated with Xml key ns1 inspectResponse`

所以我猜它缺少一个`inspectResponse`可以将第一个元素映射到的类。所以我破解`xsd.exe`并从 XML 文件生成一些 xsds。从这里，我生成了一个 52KB 的 C# 类，其中包含一大堆代码（我猜）包含 XML 文件可以映射到的所有类。我将其包括在内，然后重新运行上面的代码并得到完全相同的错误。

所以我想到现在我有了自动生成的类，我可以使用一个`XmlSerializer`对象并尝试以这种方式反序列化。我写这个：

```
var ss = new XmlSerializer(typeof(Classes.Envelope));
object blah;
using (var xr = XmlReader.Create(new StringReader(response)))
{
    ss.Deserialize(xr);
    blah = ss.Deserialize(xr);
}
return blah.ToString(); 
```

这次我得到一个新的`InvalidOperationException`：`There is an error in XML document (2, 356). ---> System.InvalidOperationException: The specified type was not recognized: name='Project', namespace='Wibble', at <multiRef xmlns=''>.`

自动生成的代码不包含`Project`类，尽管它包含一个`multiRef`类。大概是因为没有`Project`阶级存在，所以它很讨厌。我尝试创建一个占位符：

```
[Serializable]
[XmlType(TypeName = "Project", Namespace = "Wibble")]
public class Project
{
} 
```

但这没有任何效果。

我在这里偏离了标记，还是我只是错过了一些小东西？我很欣赏这是一个相当复杂的 XML 响应，其中`multiRef`包含所有不同类型的多个元素，但我原以为`SoapSerializer`应该能够用它做点什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:59:26.980

好的，为什么不尝试将响应加载到 XMLDomDocument 并使用 XPATH 表达式或 XSLT 来查询您感兴趣的节点。然后自定义映射器类可以将节点属性映射到您的 POCO 类中。

只是一个想法和一个糟糕的解决方法，以防您找不到其他任何东西，但我很惊讶 SOAP 返回消息没有 WSDL。这是公共服务吗。

您是否也尝试在服务 URL 的末尾附加 ?WSDL 并查看会发生什么。

# escaping - Guava：CharEscaper 在哪里？

> ID：12262801
> 
> 赞同：6
> 
> 时间：2012-09-04T11:43:46.523
> 
> 标签：escaping, guava

我需要将字符串编码为 Javascript 文本。

通过谷歌搜索[，我发现](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/html/HtmlEscapers.java?spec=svn267e41fbf208f6511c513048cbe7f7da25370b24&name=267e41fbf2&r=267e41fbf208f6511c513048cbe7f7da25370b24) 了非常有用的功能`SourceCodeEscapers.javascriptEscaper`，它应该在`com.google.common.escape.CharEscaper`包中的 Guava 中。

但在实际的 Guava 13.0.1 版本中似乎并不存在。（[Dzone](http://java.dzone.com/articles/sneaking-peek-guava-release-11)也有关于 Release 11 中新的 CharEscapers 的说明，但我在发行说明中找不到任何关于它的信息。）

班级`CharEscaper`搬家了吗？从来没有在番石榴中吗？它会在未来的版本中出现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T12:08:36.213

它还[没有在 Guava 中](https://code.google.com/p/guava-libraries/issues/detail?id=799&q=escape&colspec=ID%20Stars%20Type%20Status%20Package%20Summary)，但它会在 Guava 中。据我了解，在我们发布 API 并锁定支持向后兼容性之前，该 API 仍在进行调整和完善。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T21:08:06.817

在 Guava 20 中有许多转义器，但没有一个为 JavaScript 提供转义方法。Apache Commons [StringEscapeUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html)提供了这样的[方法](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html#escapeEcmaScript-java.lang.String-)（包括“unes​​cape”版本），从我测试的结果来看，它似乎工作得相当好，但奇怪的是它被标记为已弃用。也许太复杂而无法权威地处理？？

为了清楚用例，我曾经`StringEscapeUtils#escapeEcmaScript`以一种可以逐字放置的方式转义 Java 字符串（实际上是 JSON 字符串），作为生成的 JavaScript 代码中的文字（在`'`..内），它运行良好（如[此处](https://stackoverflow.com/q/45170939/274677)`'`描述）。不过，还没有尝试过兄弟 unescape 方法。

# java - 从 ComponentColorModel 获取 RGB 分量

> ID：12262805
> 
> 赞同：0
> 
> 时间：2012-09-04T11:44:00.890
> 
> 标签：java, image-processing

我需要一些关于 Java 的 ImageIO API 的帮助。我似乎迷失在 ComponentColorModel 类中。我需要逐像素检查 *.png 文件以检测它是灰度图像还是彩色图像。但是，我不知道如何获得每个像素的 R、G、B 值。任何人都可以帮忙吗？

以下代码在“m.getComponents(i, components, 0);”行上时抛出 IllegalArgumentException

```
ComponentColorModel m = (ComponentColorModel) imageTypeSpecifier.getColorModel();
   int pixels = reader.getWidth(0) * reader.getHeight(0);
   isGray = true;

   int[] components = new int[4];
   for (int i = 0; i < pixels; i++) {
      m.getComponents(i, components, 0);
      if (!(components[0] != components[1] || components[1] != components[2])) {
         isGray = false;
         break;
      }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:54:10.677

我自己的解决方案：

```
BufferedImage buffImage = reader.read(0);
WritableRaster raster = buffImage.getRaster();
int[] colorsInPixel = new int[4];
isColor = false;

// check all pixels one by one
for (int i = 0; i < reader.getWidth(0) * reader.getHeight(0); i++) {
   raster.getPixel(i % reader.getWidth(0), i / reader.getHeight(0), colorsInPixel);
   if (colorsInPixel[0] != colorsInPixel[1] || colorsInPixel[1] != colorsInPixel[2]) {
      isColor = true;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T13:11:03.740

当您使用 ImageIO 加载图像时，您应该有一个 BufferedImage。BufferedImage 直接提供 getRGB(x, y)，为什么不简单地使用它并忽略 ColorModel？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:51:40.307

组件模型定义：

```
public int getRGB(int pixel);
public int getRed(int pixel);
public int getGreen(int pixel);
public int getBlue(int pixel); 
```

# java - 如何修复我的文本字段，使其不与旁边的面板重叠？

> ID：12262813
> 
> 赞同：2
> 
> 时间：2012-09-04T11:44:26.093
> 
> 标签：java, swing, jframe, jpanel

我正在使用一个简单的 GUI，但我的文本字段很难处理。

![在此处输入图像描述](../Images/8c8d16daa6d47b24c3557dd707200519.png) 这就是我正在使用的。右边那个是它应该看起来的样子，左边那个是我做的。我已成功放置标签地址 1、地址 2 等。但是当我开始放置文本字段时，它就消失了。我尝试使用 setSize、setLocation，但没有任何效果。

上面板“Paymen Method”也发生了同样的事情，正如预期的结果所示，应该有一个文本字段。我的代码中有它们，但它们在运行时没有出现。请帮忙。

这是我的代码：

```
 import javax.swing.*;
    import java.awt.*;
    public class PanelDemo extends javax.swing.JFrame{
    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 350;
    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN = 250;
    public static void main(String[] args){
    //Frame
    JFrame contentPane = new javax.swing.JFrame();
    contentPane.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    contentPane.setSize(300,350);
    contentPane.setResizable(false);
    contentPane.setLayout(new BorderLayout());
    //Payment Panel
    JPanel paymentPanel = new javax.swing.JPanel();
    paymentPanel.setLayout(new BorderLayout());
    //paymentPanel.setPreferredSize(new java.awt.Dimension(270, 90));
    paymentPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Payment Method", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 12)));

    ////Components inside Payment Panel
    ////A) Panels: Radio and Details
    JPanel radioPanel = new JPanel();
    radioPanel.setLayout(new GridLayout(3,1));
    JRadioButton Rbutton1 = new JRadioButton("Credit Card");
    JRadioButton Rbutton2 = new JRadioButton("E-Funds");
    JRadioButton Rbutton3 = new JRadioButton("Check");
    Rbutton3.setSelected(true);
    ButtonGroup Bgroup = new ButtonGroup();
    Bgroup.add(Rbutton1);
    Bgroup.add(Rbutton2);
    Bgroup.add(Rbutton3);
    radioPanel.add(Rbutton1);
    radioPanel.add(Rbutton2);
    radioPanel.add(Rbutton3);

    //I thought of using a panel as a gap, but still didn't work
    /*JPanel gap = new JPanel();
    gap.setLayout(new BorderLayout());
    gap.setPreferredSize(new java.awt.Dimension(10, 90));*/

    JPanel detailsPanel = new JPanel();
    detailsPanel.setLayout(new GridLayout(2,1));
    //detailsPanel
    JLabel Accountnum = new JLabel("Account number:");
    JTextField Account = new JTextField();
    Account.setPreferredSize(new java.awt.Dimension(90, 40));
    detailsPanel.add(Accountnum);
    detailsPanel.add(Account);

    paymentPanel.add(gap, BorderLayout.CENTER);
    paymentPanel.add(detailsPanel);
    paymentPanel.add(radioPanel);
    contentPane.add(paymentPanel, BorderLayout.PAGE_START);

    ////Address Information Panel
    JPanel addressPanel = new JPanel();
    addressPanel.setLayout(new BorderLayout());
    addressPanel.setSize(new java.awt.Dimension(270, 80));
    addressPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Adress Information", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 12)));
    contentPane.add(addressPanel, BorderLayout.CENTER);

    ////Components inside the Address Information Panel
    ////A) Labels (Address 1, Address 2,...)
    JPanel InfoLabel = new JPanel();
    InfoLabel.setLayout(new GridLayout(5,1));
    JLabel address1 = new JLabel("Address 1:");
    JLabel address2 = new JLabel("Address 2:");
    JLabel city = new JLabel("City:");
    JLabel state = new JLabel("State:");
    JLabel zip = new JLabel("Zip Code:");

    InfoLabel.add(address1);
    InfoLabel.add(address2);
    InfoLabel.add(city);
    InfoLabel.add(state);
    InfoLabel.add(zip);

    ////B)Text Fields
    JPanel infotext = new JPanel();
    infotext.setLayout(new GridLayout(5,1));

    JTextField text1 = new JTextField();
    JTextField text2 = new JTextField();
    JTextField text3 = new JTextField();
    JTextField text4 = new JTextField();
    JTextField text5 = new JTextField();

    addressPanel.add(InfoLabel);
    addressPanel.add(infotext);

    JPanel controlPanel = new JPanel(); 
    controlPanel.setLayout(new FlowLayout());
    JLabel test = new JLabel("test");
    controlPanel.add(test);
    contentPane.add(controlPanel, BorderLayout.PAGE_END);

    contentPane.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:02:02.920

我稍微修改了您的代码以达到您需要的版本。基本上，我所做的只是清理您使用布局管理器的方式。如果您希望您必须做几个这样的用户界面，那么您可以尝试阅读 Swing 布局管理器的 javadocs 以便更好地理解它们。

这是工作版本：

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;

import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JTextField;

public class PanelDemo extends javax.swing.JFrame {
  private static final int FRAME_WIDTH = 300;
  private static final int FRAME_HEIGHT = 350;
  private static final int FRAME_X_ORIGIN = 150;
  private static final int FRAME_Y_ORIGIN = 250;

  public static void main(String[] args) {
    // Frame
    JFrame contentPane = new javax.swing.JFrame();
    contentPane.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    contentPane.setSize(300, 350);
    contentPane.setResizable(false);
    contentPane.setLayout(new BorderLayout());
    // Payment Panel
    JPanel paymentPanel = new javax.swing.JPanel();
    paymentPanel.setLayout(new BorderLayout());
    // paymentPanel.setPreferredSize(new java.awt.Dimension(270, 90));
    paymentPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Payment Method",
        javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 12)));

    // //Components inside Payment Panel
    // //A) Panels: Radio and Details
    JPanel radioPanel = new JPanel();
    radioPanel.setLayout(new GridLayout(3, 1));
    JRadioButton Rbutton1 = new JRadioButton("Credit Card");
    JRadioButton Rbutton2 = new JRadioButton("E-Funds");
    JRadioButton Rbutton3 = new JRadioButton("Check");
    Rbutton3.setSelected(true);
    ButtonGroup Bgroup = new ButtonGroup();
    Bgroup.add(Rbutton1);
    Bgroup.add(Rbutton2);
    Bgroup.add(Rbutton3);
    radioPanel.add(Rbutton1);
    radioPanel.add(Rbutton2);
    radioPanel.add(Rbutton3);

    // I thought of using a panel as a gap, but still didn't work
    /*
     * JPanel gap = new JPanel(); gap.setLayout(new BorderLayout());
     * gap.setPreferredSize(new java.awt.Dimension(10, 90));
     */

    JPanel detailsPanel = new JPanel();
    detailsPanel.setLayout(new GridLayout(2, 2));
    // detailsPanel
    JLabel Accountnum = new JLabel("Account number:");
    JTextField Account = new JTextField();
    Account.setPreferredSize(new java.awt.Dimension(90, 40));
    detailsPanel.add(Accountnum);
    detailsPanel.add(Account);

    // paymentPanel.add(gap, BorderLayout.CENTER);
    paymentPanel.add(radioPanel, BorderLayout.CENTER);
    paymentPanel.add(detailsPanel, BorderLayout.EAST);
    contentPane.add(paymentPanel, BorderLayout.PAGE_START);

    // //Address Information Panel
    JPanel addressPanel = new JPanel();
    addressPanel.setLayout(new BorderLayout());
    addressPanel.setSize(new java.awt.Dimension(270, 80));
    addressPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Adress Information",
        javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 12)));
    contentPane.add(addressPanel, BorderLayout.CENTER);

    // //Components inside the Address Information Panel
    // //A) Labels (Address 1, Address 2,...)
    JPanel InfoLabel = new JPanel();
    InfoLabel.setLayout(new GridLayout(5, 2));
    JLabel address1 = new JLabel("Address 1:");
    JLabel address2 = new JLabel("Address 2:");
    JLabel city = new JLabel("City:");
    JLabel state = new JLabel("State:");
    JLabel zip = new JLabel("Zip Code:");
    JTextField text1 = new JTextField();
    JTextField text2 = new JTextField();
    JTextField text3 = new JTextField();
    JTextField text4 = new JTextField();
    JTextField text5 = new JTextField();

    InfoLabel.add(address1);
    InfoLabel.add(text1);
    InfoLabel.add(address2);
    InfoLabel.add(text2);
    InfoLabel.add(city);
    InfoLabel.add(text3);
    InfoLabel.add(state);
    InfoLabel.add(text4);
    InfoLabel.add(zip);
    InfoLabel.add(text5);

    // //B)Text Fields
    JPanel infotext = new JPanel();
    infotext.setLayout(new GridLayout(5, 1));

    addressPanel.add(InfoLabel, BorderLayout.CENTER);
//    addressPanel.add(infotext);

    JPanel controlPanel = new JPanel();
    controlPanel.setLayout(new FlowLayout());
    JLabel test = new JLabel("test");
    controlPanel.add(test);
    contentPane.add(controlPanel, BorderLayout.PAGE_END);
    contentPane.setVisible(true);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:20:37.137

您忘记为布局设置区域。

```
paymentPanel.add(detailsPanel, BorderLayout.EAST);
paymentPanel.add(radioPanel, BorderLayout.CENTER);

addressPanel.add(InfoLabel,BorderLayout.WEST); 
addressPanel.add(infotext, BorderLayout.CENTER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-19T17:32:35.203

您的代码应调整为：

```
import javax.swing.*;
import java.awt.*;
public class App extends javax.swing.JFrame {
   private static final int FRAME_WIDTH = 300;
   private static final int FRAME_HEIGHT = 350;
   private static final int FRAME_X_ORIGIN = 150;
   private static final int FRAME_Y_ORIGIN = 250;
   public static void main(String[] args){
   //Frame
      JFrame contentPane = new javax.swing.JFrame();
      contentPane.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      contentPane.setSize(300,350);
      contentPane.setResizable(false);
      contentPane.setLayout(new BorderLayout());
   //Payment Panel
      JPanel paymentPanel = new javax.swing.JPanel();
      paymentPanel.setLayout(new GridLayout(1,2));
      paymentPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Payment Method", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 12)));

      ////Components inside Payment Panel
      ////A) Panels: Radio and Details
      JPanel radioPanel = new JPanel();
      radioPanel.setLayout(new GridLayout(3,1));
      JRadioButton Rbutton1 = new JRadioButton("Credit Card");
      JRadioButton Rbutton2 = new JRadioButton("E-Funds");
      JRadioButton Rbutton3 = new JRadioButton("Check");
      Rbutton3.setSelected(true);
      ButtonGroup Bgroup = new ButtonGroup();
      Bgroup.add(Rbutton1);
      Bgroup.add(Rbutton2);
      Bgroup.add(Rbutton3);
      radioPanel.add(Rbutton1);
      radioPanel.add(Rbutton2);
      radioPanel.add(Rbutton3);

      JPanel detailsPanel = new JPanel();
      detailsPanel.setLayout(new GridLayout(2,1));
//detailsPanel
      JLabel Accountnum = new JLabel("Account number:");
      JTextField Account = new JTextField();
      Account.setPreferredSize(new java.awt.Dimension(90, 40));
      detailsPanel.add(Accountnum);
      detailsPanel.add(Account);

      //paymentPanel.add(gap, BorderLayout.CENTER); // THIS PRODUCES SYNTAX ERROR
      paymentPanel.add(radioPanel);
      paymentPanel.add(detailsPanel);
      contentPane.add(paymentPanel, BorderLayout.PAGE_START);

////Address Information Panel
      JPanel addressPanel = new JPanel();
      addressPanel.setLayout(new GridLayout(1,2));
      addressPanel.setSize(new java.awt.Dimension(270, 80));
      addressPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Adress Information", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 12)));
      contentPane.add(addressPanel, BorderLayout.CENTER);

////Components inside the Address Information Panel
////A) Labels (Address 1, Address 2,...)
      JPanel InfoLabel = new JPanel();
      InfoLabel.setLayout(new GridLayout(5,1));
      JLabel address1 = new JLabel("Address 1:");
      JLabel address2 = new JLabel("Address 2:");
      JLabel city = new JLabel("City:");
      JLabel state = new JLabel("State:");
      JLabel zip = new JLabel("Zip Code:");

      InfoLabel.add(address1);
      InfoLabel.add(address2);
      InfoLabel.add(city);
      InfoLabel.add(state);
      InfoLabel.add(zip);

////B)Text Fields
      JPanel infotext = new JPanel();
      infotext.setLayout(new GridLayout(5,1));

      JTextField text1 = new JTextField();
      JTextField text2 = new JTextField();
      JTextField text3 = new JTextField();
      JTextField text4 = new JTextField();
      JTextField text5 = new JTextField();

      infotext.add(text1);
      infotext.add(text2);
      infotext.add(text3);
      infotext.add(text4);
      infotext.add(text5);

      addressPanel.add(InfoLabel);
      addressPanel.add(infotext);

      JPanel controlPanel = new JPanel(); 
      controlPanel.setLayout(new FlowLayout());
      JLabel test = new JLabel("test");
      controlPanel.add(test);
      contentPane.add(controlPanel, BorderLayout.PAGE_END);

      contentPane.setVisible(true);
   }

} 
```

即，

*   您必须删除该`paymentPanel.add(gap, BorderLayout.CENTER);`行，因为它会产生语法错误
*   您必须指定`paymentPanel`,`addressPanel`才能拥有,`GridLayout(1,2)`以便它们能够以不重叠的方式包含`radioPanel`、`detailsPanel`和面板`InfoLabel``infotext`
*   您必须`radioPanel`在`paymentPanel` *_*`detailsPanel`
*   您必须实际将文本字段添加到`infotext`面板，即`infotext.add(text1);`等。

**注意**：我知道现在你可能不需要这个，但我想写这个答案，因为我不太喜欢@Dan 的答案，例如，他保留了`BorderLayout`并且`paymentpanel`基本上写了他自己的版本代码，而不是修改您的代码，使其能够正常工作。反正。

# jquery - 序列化文件类型 jQuery

> ID：12262816
> 
> 赞同：11
> 
> 时间：2012-09-04T11:44:31.757
> 
> 标签：jquery

我正在尝试使用**jquery.form.js** jQuery API 序列化我的表单数据，包括文件图像字段。API 正在帮助我对包括图像在内的数据字段进行 serailze 并将图像对象返回为`[object file]`

这是我的序列化代码

```
 var data = $js("form[name=ajx_imgupload]").formSerialize();
    var img = $js("#upload_image").fieldSerialize();

    $js.ajax({
                 url: "index.php?option=com_obituary&task=upload",
                 type: "POST",
                 dataType:"json",
                 data: data,
                 beforeSend: function(){
                   $js(".loadingblock").show();
                 },
                 complete: function(){
                   $js(".loadingblock").hide();
                 },
                 success: function(res){
                   alert();  
                 },
                 error: function(jqXHR, textStatus, errorThrown){
                   alert(textStatus);                
                 }
           }); 
```

遇到问题......我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T12:18:33.587

让我来帮助你。我是 1 天前做的。我有包括图像字段的表格。当你通过它提交它的上传图片时`jquery.form.js`

注意：我正在使用 jqueryimageupload.php 上传文件，如果需要，我可以粘贴它。这是一个简单的php文件上传。[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

html部分：

```
<form name="imageform" id="imageform" action="jqueryimageupload.php" method="post">
  <input type="file" name="resim" id="img" onchange="ImageUpload()" />
  <input type="hidden" name="action" value="imageup" />
</form> 
```

jQuery：

```
function ImageUpload() {
    $("#return").show();
    $("#return").html('');
    $("#return").html('<img src="images/load2.gif" alt="Uploading...."/> wait, uploading...');
    $("#imageform").ajaxForm({
        target: '#return',
        success: function() {
            $("#return").fadeOut(10000);
        }
   }).submit();     
} 
```

最后提交表格：

```
$('#form').submit(function() {
    var img=$('#image').val();
    var forms=($(this).serialize());
    $.ajax({
        type:"POST",            
        url: "do.php?do=upload",
        data:forms+'&r='+encodeURIComponent(img),
        success: function(result){ //your code }     
    });
 }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-26T06:26:32.247

您可以使用这种方式（来自[http://portfolio.planetjon.ca/2014/01/26/submit-file-input-via-ajax-jquery-easy-way/](http://portfolio.planetjon.ca/2014/01/26/submit-file-input-via-ajax-jquery-easy-way/)）

```
$( '#my-form' )
  .submit( function( e ) {
    $.ajax( {
      url: 'http://host.com/action/',
      type: 'POST',
      data: new FormData( this ),
      processData: false,
      contentType: false
    } );
  } ); 
```

这是更灵活和简单的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:48:58.360

HTML

```
<!--Add Inventory Form-->

<div id="addInventoryFormHTML" class style="display:none">

    <!--Form-->
    <form id="addInventoryForm" novalidate="novalidate" enctype="multipart/form-data">

        <input id="itemTitleField" class="textField addInventoryField" name="itemTitleField" type="text" placeholder="Item Title"/>

        <textarea id="itemDescriptionField" class="textAreaField addInventoryField" name="itemDescriptionField" type="textarea" placeholder="Item Description"></textarea>

        <input id="itemPictureField" class="uploadField addInventoryField" name="itemPictureField" type="file"/>

    </form>

    <!--Errors-->
    <div id="inventoryAddErrors"></div>

</div> 
```

Javascript（请注意，self 之后的任何方法都是实例方法，我使用 Joose）

```
$(form).ajaxSubmit({//note that form is just the form built with a jQuery selector

            url: self.returnBaseULR() + '/ajaxadd',

            type: 'POST',

            error: function(xhr, status, error) {
                console.log('Unable to contact the server');
            },

            success: function(response){

                var jsObjectFromResponse = JSON.parse(response);

                if(jsObjectFromResponse.success){

                    self.cLog('Item uploaded successfully!');
                    document.location.reload();

                } else {

                    self.cLog('Listing failed, see AJAX response');

                }

            }

        }); 
```

您不能仅使用 jQuery 本机方法上传图像。查看[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

它的方法可以完美地为您做到这一点。

这似乎对我有用。在后端，我可以使用 $_POST 获取 POST 参数，并使用 $_FILES 获取文件（或类似的东西）

看起来 ajaxSubmit 会立即发布带有自动完成的序列化数据的表单。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:51:41.290

您不能使用 ajax 进行文件上传。不过，为了模拟效果，您可以在隐藏的 iframe 中创建一个表单并将其提交/提交`.submit()`到上传 url。

或多或少像[这个。](http://www.webtoolkit.info/ajax-file-upload.html)

# sql - 如何在 SQL 中编码这个计算

> ID：12262822
> 
> 赞同：0
> 
> 时间：2012-09-04T11:44:58.980
> 
> 标签：sql, ms-access-2010

我试图在 Access 中编写一个计算，该计算涉及某些值的 SUM 加上 IF 语句的结果。

这是我正在处理的数据类型表（来自'CostBaseQuery）

```
CompanyName Year    AssetName  DatapointID  Datapointname                DatapointValue
CompanyA    2011    AssetA     4025         Active operated wells           129
CompanyA    2011    AssetA     4058         API gravity of oil              38.5563255
CompanyA    2011    AssetA     4032         Number of gas lift wells        70
CompanyA    2011    AssetA     4033         Number of wells with ESPs       0
CompanyA    2011    AssetA     4036         Wells with CO2 production       25
CompanyA    2011    AssetA     4035         Wells with H2S production       9
CompanyA    2011    AssetA     4038         Wells with high pressure        0
CompanyA    2011    AssetA     4037         Wells with high temperature     0
CompanyA    2011    AssetA     4034         Wells with scale production     42
CompanyA    2011    AssetA     4039         Wells with wax                  0 
```

计算需要**SUM(DatapointValue)** WHERE DatapointID IN (4032,4033,4035,4036,4037,4038,4039)

**加上从 IF 语句返回的值**

IF（API 油重 <=5 或 >20，使用 ActiveOperatedWells 的值，否则为 0）

我尝试使用以下方法对计算进行编码，但它在 SUM 的每次迭代中输出数据，而不是执行 SUM 计算，然后执行 IF 语句。

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, 
(SUM(qb1.DatapointValue) 
+ IIF(qb2.DatapointValue>=5, 
       IIF(qb2.DatapointValue<20, qb3.DatapointValue, 0), 0)) 
AS NumberOfWellCompletions

FROM (CostBaseQuery AS qb1 
     INNER JOIN CostBaseQuery AS qb2 
          ON qb1.CompanyYearAssetID=qb2.CompanyYearAssetID) 
     INNER JOIN CostBaseQuery AS qb3 
          ON qb1.CompanyYearAssetID=qb3.CompanyYearAssetID

WHERE qb1.DatapointID IN (4032,4033,3036,4035,4038,4037,4034,4039)
AND qb2.DatapointID=4058 AND qb3.DatapointID=4025

GROUP BY qb1.CompanyName, qb1.AssetName, qb1.Year, 
qb1.DatapointValue, qb2.DatapointValue, qb3.DatapointValue 
```

任何帮助将不胜感激，我希望这比我之前的漫无边际更有意义！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:33:22.047

这个问题对其他 SO 用户并没有真正有用，并且您没有说明您的实际问题，但是如果我以我喜欢的方式缩进您的查询，就像这样，

```
SELECT
              b.CompanyName
            , b.AssetName
            , b.Year
            , (
                b.CalculationResult + 
                mp.CalculationResult
              ) AS NumberOfWellCompletions

    FROM
        (
            SELECT 
                          CompanyName
                        , AssetName
                        , Year
                        , SUM(q1.DatapointValue) AS CalculationResult 
                FROM
                        CostBaseQuery AS q1 
                WHERE
                        DatapointID in (
                            4032,
                            4033,
                            3036,
                            4035,
                            4038,
                            4037,
                            4034,
                            4039) 
                GROUP BY
                          CompanyName
                        , AssetName
                        , Year
        ) AS b 
    LEFT JOIN 
        (
            SELECT
                          CompanyName
                        , AssetName
                        , Year
                        , (
                            SUM(
                                IIF(
                                    qb2.DatapointValue>=5, 
                                    IIF(
                                        qb2.DatapointValue<20, 
                                        qb3.DatapointValue,
                                        0),
                                    0)
                          ) 
                FROM
                        CostBaseQuery qb3                   
                WHERE
                        qb3.CompanyName = qb2.CompanyName
                    AND 
                        qb3.AssetName = qb2.AssetName
                    AND
                        qb3.Year = qb2.Year 
                    AND
                        qb3.DatapointID = 4025                   
                GROUP BY 
                          CompanyName
                        , AssetName
                        , Year
        )
    // What is going on here, this doesn't make sense.
    ) AS CalculationResult 
FROM 
          CostBaseQuery AS qb2 
WHERE 
          DatapointID = 4058 
GROUP BY
            CompanyName
          , AssetName
          , Year
 ) AS mp 
    ON 
            (b.CompanyName = mp.CompanyName)
        AND 
            (b.AssetName = mp.AssetName)
        AND
            (b.Year = mp.Year); 
```

我可以看到你的括号数量错误，所以就像 Access Parser 说你有语法错误一样。

如果我倾向于为您编写查询，我将需要有关您的数据库 shcema 的更多信息。但是，您应该尝试编写一些可以解析的 SQL。

# java - 是否有为 Logging 添加注释的 Java 库？

> ID：12262824
> 
> 赞同：16
> 
> 时间：2012-09-04T11:45:08.983
> 
> 标签：java

是否有任何库可以通过添加注释来记录变量？例如：

```
 @Log
    String someValueToLog = someMethod(); 

    @Log(level="debug", prefix="Here's the value=")
    String someValueToLogAgain = someMethod(); 
```

该功能类似于在代码中添加此行：

```
 log.info(someValueToLog);
    log.debug("Here's the value=" + someValueToLogAgain); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-10T18:00:23.077

[http://aspect4log.sf.net](http://aspect4log.sf.net)允许您记录方法调用、参数、返回值、抛出的异常（它甚至允许您根据异常更改日志级别，默认情况下，它使用 ERROR 表示未检查的异常，使用 WARN 表示已检查的异常. 它在删除样板代码和改进日志记录方面帮助了我很多。

我也知道[http://loggifier.unkrig.de](http://loggifier.unkrig.de) - 它通过 java.util.logging 进行日志记录（没有人使用），设置起来有点复杂，文档也不是很好，但它有一个很大的功能 -它声称它可以检测已经编译的 jar/war/ear 文件（如果您想分析某人无法重新编译的丑陋 jar，那就太好了）！

底线 - 如果你拥有代码，aspect4log 是你的选择。如果你不拥有代码 - 去记录器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-13T12:00:37.227

我创建了一个名为[log-weaver](https://github.com/Hervian/log-weaver)的项目，其中引入了许多 @LogXXX 语句。
当您编译使用这些注释之一的项目时，日志语句将编织到字节码中。
示例源代码：

```
@LogEnteringAndExiting(value={"arg1", "this"})
public String execute(String arg1) {
    /*Some logic*/
return "done";
} 
```

源代码将保持原样，但字节码看起来就像源代码是这样编写的：

```
private static final Logger comGithubHervian_LOGGER = LoggingHelper.getLogger(ClassWithLogAnnotatedMethods.LogAround_log1ArgumentAndThis.class);
private static final String = comGithubHervian_CLASSNAME = ClassWithLogAnnotatedMethods.LogAround_log1ArgumentAndThis.class.getName();

public String execute(String arg1) {
    if (LoggingHelper.isEntryExitTraceEnabled((Logger)comGithubHervian_LOGGER)) {
        comGithubHervian_LOGGER.entering(comGithubHervian_CLASSNAME, "execute", new Object[]{arg1, this});
    }
    /*Some logic*/
    String string = "done";
    if (LoggingHelper.isEntryExitTraceEnabled((Logger)comGithubHervian_LOGGER)) {
        comGithubHervian_LOGGER.exiting(comGithubHervian_CLASSNAME, "execute", string);
    }
    return string;
} 
```

在上面的代码中，LoggingHelper 是 IBM 的 WebpShere Commerce 中的一个特殊类，为此开发了这个概念证明。

这个想法是通过删除琐碎的语句来简化源代码，在这种情况下是日志记录。
整体逻辑如下：

1.  AbstractProcessor 检测日志注释的使用，并创建一些有用的数据结构，以保存有关方法名称、参数等的信息。
2.  AbstractProcessor 在编译器 (Javac) 中注册一个 TaskListener。
3.  TaskListener 使用 Javassist 将日志语句编织到给定方法/类的字节码中。

请注意，当前项目是为与 IBM 的 WebSphere Commerce 一起使用而设计的，但您可以轻松地对其进行调整，例如将您自己选择的日志语句编织到代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:48:29.913

日志记录是在实际的逻辑注释中完成的，只能用于源代码中的特定元素。您最多可以`LOCAL_VARIABLE`使用它来记录，但它永远不能用于记录`plain statements`.

> 请检查[slf4j](https://www.slf4j.org/)，它提供了常见情况的日志注释。

**支持注释声明的元素是：**

```
public enum ElementType {
/** Class, interface (including annotation type), or enum declaration */
TYPE,

/** Field declaration (includes enum constants) */
FIELD,

/** Method declaration */
METHOD,

/** Parameter declaration */
PARAMETER,

/** Constructor declaration */
CONSTRUCTOR,

/** Local variable declaration */
LOCAL_VARIABLE,

/** Annotation type declaration */
ANNOTATION_TYPE,

/** Package declaration */
PACKAGE 
```

}

[类似于创建自定义注释](https://stackoverflow.com/questions/12257431/creating-custom-annotations/12257475#12257475)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:47:38.860

如果您使用 Spring 和面向方面的编程，您可以相对容易地做到这一点。看看那个。

# c# - 在 WinForms 'TreeNode' 的文本中插入一个实心星

> ID：12262825
> 
> 赞同：1
> 
> 时间：2012-09-04T11:45:10.717
> 
> 标签：c#, .net, winforms, graphics, treenode

我需要将星形插入到字符串中，该字符串将被分配为 a 的文本`TreeNode`。这可能吗？

每个`TreeNode`都有不同的级别，并且可以由这些星星进行注释。有些节点只有一颗星，有些有两颗，有些没有星星。星号将始终出现在文本字符串的末尾。例如：

```
SU450** 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T11:51:31.937

您必须使用`Font`包含要显示的字符的 a 。

大多数情况下，`Arial Unicode MS`会工作。

这是使用[“黑星”(U+2605)的示例](http://www.fileformat.info/info/unicode/char/2605/index.htm)

```
void Main()
{
    var w = new Form();
    var t = new TreeView();
    w.Controls.Add(t);
    t.Dock=DockStyle.Fill;
    var star = "\u2605";
    t.Nodes.Add("good: " + star);
    t.Nodes.Add("great: "+ star + star + star);
    t.Font=new System.Drawing.Font("Arial Unicode MS", 13f);
    w.Show();
} 
```

![在此处输入图像描述](../Images/45d7a6018bd5f1a15fd110fd0bb32980.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T11:47:46.417

您不能将形状插入字符串，但有多种 unicode 字符可供选择。

[黑星](http://www.fileformat.info/info/unicode/char/2605/index.htm)U+2605，看起来不错。

如果您的字体具有正确的字符表示，那么您将很幸运。

* * *

[这是维基百科上](http://en.wikipedia.org/wiki/List_of_Unicode_characters)的列表

从 U+2721 到 U+2743 的范围提供了很多关于*star*的变化。

```
 ★, ✡, ✢, ✣, ✣, ✤, ✥, ✦, ✧, ✨, ✩, ✪, ✫, ✬, ✭, ✮, ✯, ✰, ✱, ✲ 
```

*希望这些示例是正确的，我的字体没有代表它们。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T11:48:58.947

这个角色好用吗？（Unicode 字符 066D）

`٭`

**或者**，您可以创建自己的树节点类（继承自`System.Windows.Forms.TreeNode`）并覆盖该[`OnPaint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法。然后你可以画你需要的任何东西。

**或者**，将[TreeNode 的图标](http://msdn.microsoft.com/en-us/library/haf2a2zb.aspx)设置为您自己绘制或从[famfamfam 之](http://www.famfamfam.com/lab/icons/silk/)类的地方获得的星形图标。

# asp.net - 整数输入验证asp.net mvc4

> ID：12262830
> 
> 赞同：-2
> 
> 时间：2012-09-04T11:45:35.500
> 
> 标签：asp.net, asp.net-mvc-4

我想验证来自文本框的输入，以便它是整数并且在 0-255 的范围内。我有一个小的 asp.net mvc4 项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:49:39.763

使用数据注释：[http ://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-6](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-6)

```
[Required(ErrorMessage = "Value must be set")]
[Range(0, 250, ErrorMessage = "Value must be between 0 and 250")]
public int Value{ get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T08:47:12.930

对于任何整数，请使用以下方法：

```
[Required(ErrorMessage = "Value must be set")]
[Range(0, int.MaxValue, ErrorMessage = "Value must be between 0 and 250")]
public int Value{ get; set; `enter code here`} 
```

# ruby-on-rails - 如何将参数发送到回形针处理器

> ID：12262834
> 
> 赞同：4
> 
> 时间：2012-09-04T11:45:44.733
> 
> 标签：ruby-on-rails, ruby, arguments, paperclip, processor

我正在尝试了解如何将模型值发送到 Paperclip 自定义处理器中，但无法弄清楚为什么它如此困难，或者解决方案可能是什么，因为我现在正在尝试解决这个问题几天...这是我的代码，从我的模型和处理器中提取。

从我的模型：

```
...
  has_attached_file :receipt_file,
                    :storage => :s3,
                    :s3_credentials => "#{Rails.root}/config/s3.yml",
                    :path => "/:style/:id/:filename",
                    :s3_protocol => "https",
                    :styles => { :text => { style: :original, receipt_id: self.id }},
                    processors: [:LearnProcessor]
... 
```

为什么我不能使用“self.id”来获取收据 ID？它是如何`"/:style/:id/:filename"`被翻译成类似`/original/1/abc.pdf`的，如果我说`receipt_id: :id`，我得到的只是`options[:receipt_id]`（见下文）`:id`而不是`1`？

我需要某种插值吗？

处理器代码

```
module Paperclip

    class LearnProcessor < Processor
      attr_accessor :receipt_id,:style

      def initialize(file, options = {}, attachment = nil)
        @file           = file
        @current_format = File.extname(@file.path)
        @basename       = File.basename(@file.path, @current_format)
        @style = options[:style]
        @receipt_id = options[:receipt_id]
        puts "Options #{options.inspect}"
      end
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T16:20:32.353

我不知道这是否是特定于回形针的问题，但我可以解决一个 Ruby 问题。Ruby 允许您在类定义中调用类方法，这些方法提供直观的 DSL，如下所示：

```
class MyModel < ActiveRecord::Base
  has_attached_file :receipt_file
end 
```

问题是您希望在`id`调用此类方法时引用模型，但`id`仅在类的实例上可用。所以这行不通。通常这种事情是使用在运行时评估的块来完成的，一旦实例可用。

```
has_attached_file :receipt_file,
                    # ...
                    :styles => { :text => { style: :original, receipt_id: lambda{self.id} }}, 
```

但是，Paperclip 需要知道如何接受和调用该块，我不确定它是否可以。可能有一种不同的方法可以实现您想要做的事情，我不确定那是什么，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:20:14.007

在初始化程序中添加：

```
module Paperclip
  module Interpolations
    def receipt_id attachment = nil, style_name = nil
      #you should handle the case when attachment and style_name are actually nil
      attachment.instance.receipt_id
    end
  end
end 
```

然后你可以有这样的路径：

```
:path => "/:style/:receipt_id/:filename", 
```

# mysql - Xampp 服务器中的访问被禁止和页面未找到错误

> ID：12262840
> 
> 赞同：0
> 
> 时间：2012-09-04T11:45:56.747
> 
> 标签：mysql, database, xampp

我有一个包含 3 列的数据库表。我想为第三列中的每一行合并一个 html 链接。我尝试放置链接。但由于我在 Windows 中使用 xampp 服务器，它显示访问被禁止和页面未找到（即错误 403）。我尝试编辑几个 php-config 文件，但没有任何结果。

我应该切换到 WAMP 服务器吗？这会帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:51:45.070

对于 403 错误，这篇文章应该已经涵盖了：[在 XAMPP 中启用目录/文件列表](https://stackoverflow.com/questions/8870560/enable-directory-file-listing-in-xampp)

对于第 3 列链接，请尝试`href`在浏览器中手动粘贴链接的属性，然后查看该页面是否加载。如果没有，请重新检查您的 URL 的完整性。

# wix - msi 卸载失败，操作：null 且引用计数不正确

> ID：12262842
> 
> 赞同：1
> 
> 时间：2012-09-04T11:46:02.650
> 
> 标签：wix, windows-installer, nullreferenceexception

我是 Wix 新手，安装程序有一些问题。我已经在这台计算机上安装了一些版本，并将 System32 上的 DLL 更改为新的。一旦我安装了另一个版本的安装程序 - DLL 与我更改的相同，而不是被更新。

我查看了日志：

```
 MSI (s) (EC:8C) [13:33:53:522]: Component: myDll.dll_x86; Installed: Local;       Request: Absent;   Action: Null
    MSI (s) (EC:8C) [13:33:53:522]: Component: myDll2k.dll_x86; Installed: Local;   Request:   Absent;   Action: Null 
```

动作怎么是空的？有人告诉我这可能是引用计数的问题，所以：

1.  我在哪里可以找到并查看参考计数？
2.  我该如何解决这个问题？
3.  在另一台计算机上-所有内容都已成功更新..仅在这台计算机上

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:46:27.877

Windows Installer 最佳实践说安装到 System32 的组件应该是永久性的。因此，无论您到达这里，它都在正常运行。

# pug - 如何获取正在执行的jade脚本的文件名

> ID：12262844
> 
> 赞同：8
> 
> 时间：2012-09-04T11:46:14.333
> 
> 标签：pug

是否有可以从带有各种参数的翡翠模板中访问的全局对象？

当前执行的jade文件的路径是否有全局变量？

```
!!! 5
html
  head
    title Test
  body
    //- I want to be able to know what the current script file is...
    p Hello, I am: #{globals.scriptfilename} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-12T12:09:04.880

如果您正在使用`gulp-jade`，请添加`gulp-data`到组合中并使用以下代码：

```
var jade = require('gulp-jade');
var data = require('gulp-data');

gulp.src('**/*.jade')
    .pipe(data(function (file) {
        return {
            relativePath: file.history[0].replace(file.base, '')
        };
    }))
    .pipe(jade()) 
```

这将`relativePath`在您的`jade`模板中为您提供类似于`about/index.jade`，相对于基本文件夹的内容。

我不完全确定`file.history`生成的位置/方式，但在我的情况下`[0]`指向原始文件名（其磁盘上的绝对路径）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T07:15:54.763

我的解决方案：

```
//gulpfile.js

var $path = require('path'),
    jade  = require('gulp-jade'),
    isProduction = process.env.ENV == 'production';

gulp.task('watch', function() {
    gulp.watch("**/*.jade")
        .on('change', function(event) {
            compileJade(event.path, isProduction);
        });
});

function compileJade(path, isCompress) {
    gulp.src(path)
        .pipe(jade({
            pretty: !isCompress,
            locals: {
                _path_: path,
                _basename_: $path.basename(path)
            }
        }));
} 
```

在 Jade 文件中，您可以像这样使用 _path_ 和 _basename_：

```
<!-- #{_path_}, #{_basename_} --> 
```

还要注意的一件事：字符串插值在翡翠注释中不起作用。因此，以下代码不会插入结果 html 文件中：

```
// #{path} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T13:20:16.607

有一个全局变量。您可以使用 Node 的[util.inspect(object)](http://nodejs.org/api/util.html#util_util_inspect_object_options)来查看它的内容。

与`JSON.stringify()`.

使用样板 Express 应用程序，我发现了这些：

*   global.process.argv == `['node','/Users/mike/Development/test/web.js']`
*   global.process.mainModule.filename ==`'/Users/mike/Development/test/web.js'`

# primefaces - primefaces 的自动完成功能不适用于 primefaces jar 的更新版本。仅适用于 primefaces 2.0

> ID：12262849
> 
> 赞同：1
> 
> 时间：2012-09-04T11:46:38.383
> 
> 标签：primefaces

我的自动完成标记仅适用于旧版本的 primefaces 2.0，除了如果我添加任何具有更高版本的 jar，它会在 completeMethod 属性上给出错误，它无法找到属性（我在 completeMethod 中使用的方法）。我需要使用升级版的 primefaces，因为我需要其他更新的 primefaces 标签。请在这方面提供一些帮助。

谢谢

**编辑：** 这是代码：

```
 <tr> <td>Current Education Level</td>                            
                                    <td> 
                                        <h:panelGrid styleClass="text-box">
                                             <p:autoComplete id="education" value="#{input.education}" completeMethod="#{input.getautocomplete}" var="a" itemLabel="#{a.Name}" itemValue="#{a}"  converter="edConverter" forceSelection="true"/>  

                                            <p:column>  
                                                #{a.Name} - #{a.id}  
                                            </p:column>    
                                        </h:panelGrid>
                                    </td>                                                          
                             </tr> 
```

此自动完成工作正常并在使用 primefaces 2.0 时给出结果，但如果将 jar 替换为较新版本或 3.4 版本，则会出现以下错误： **javax.el.E​​LException: /WebPages/SearchPages/Search.xhtml: The class 'com.Bean.服务'没有属性'getautocomplete'。**

我放的罐子在 WEBINF 的 lib 文件夹中，并使用 glassfish 服务器 3.1.2。我在使用 primefaces 2.0 时添加的命名空间是**xmlns:p="http://primefaces.prime.com.tr/ui"** 并且在使用版本 3.4 时我将其替换为**xmlns:p=http://primefaces.org/ui**

我不知道可能是什么问题，可能是 eclipse 或 Mojarra 2.1.6 的问题吗？

# php - 在 PHP 函数之间发送 JSON 数据

> ID：12262858
> 
> 赞同：0
> 
> 时间：2012-09-04T11:47:08.577
> 
> 标签：php, json

如何在“func1”中获取 JSON 数据（由“func2”发送）？

**函数1.php**

```
include 'func2.php';

$data = run_method(); 
```

**func2.php**

```
function run_method() {
//...
  echo json_encode(array('f1' => $val1, 'f2' => $val2));
  die();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:50:44.983

func2.php

```
function run_method() {
 //...
  $data = json_encode(array('f1' => $val1, 'f2' => $val2));
   echo $data
   retrun $data
 } 
```

功能1

```
$data = run method() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:49:23.727

您不需要`echo`但需要以下`return`数据：

```
function run_method() {
//...
  return json_encode(array('f1' => $val1, 'f2' => $val2));
} 
```

**升级版：**

看看你在`$data`使用`var_dump($data);`后得到了什么`$data = run_method();`

您必须将json_encoded`func1.php`数据解码回来（反序列化）。

所以这里最好的方法是不要使用`json_encode`和返回简单的数组，比如：

```
return array('f1' => $val1, 'f2' => $val2); 
```

在你的情况下访问`$val1`使用`$data['f1']`，访问`$val2`使用`$data['f2']`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:49:59.233

`echo`通过网络服务器将您的数据发送到客户端。

要从函数接收数据，请使用`return`：

```
function run_method() {
    // Some code where you initialize $val1 and $val2
    return json_encode(array('f1' => $val1, 'f2' => $val2));
} 
```

请注意，您通常不需要在 JSON 中对事物进行编码即可使用它们。当您的服务器端应用程序生成一些数据并需要将其发送到客户端时，将使用 JSON。

如果您只需要这些值`$val1`，`$val2`那么您应该这样做：

```
function run_method() {
    // Some code where you initialize $val1 and $val2
    return array('f1' => $val1, 'f2' => $val2);
} 
```

然后，`func1.php`您可以`$data`作为普通数组访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:49:53.133

咱们试试吧

```
 return json_encode(array('f1' => $val1, 'f2' => $val2)); 
```

插入回声。

# c# - 在 Windows Phone 应用程序中激活 JavaScript

> ID：12262860
> 
> 赞同：0
> 
> 时间：2012-09-04T11:47:25.490
> 
> 标签：c#, javascript, visual-studio, windows-phone

我在 Visual Studio 中开发一个 Windows Phone 应用程序，该应用程序显示一个 Web 浏览器（类似于 Android 或 iOS 的 Webview）。但是这个浏览器不能运行javascript？我想这就像在 Eclipse 中，我必须具体激活这个功能，但它怎么能做到呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:50:33.020

该[`WebBrowser`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser%28v=vs.92%29.aspx)控件具有[`IsScriptEnabled`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser.isscriptenabled%28v=vs.92%29.aspx)您必须设置为`true`能够使用 Javascript 的属性。

# php - php SEF 网址链接

> ID：12262862
> 
> 赞同：0
> 
> 时间：2012-09-04T11:47:29.797
> 
> 标签：php, mod-rewrite, sef

我决定开始在一个已经相当大的项目上使用 SEF url。

所以我正在考虑像这样转换网址。

```
http://localhost/browse.php?cat=people
into
http://localhost/category/people/ 
```

所以我在 htaccess 中添加了一个 RewriteRule，瞧，url 可以工作，但是我所有的 css、js、图像、链接都被破坏了，因为我在整个站点中都使用了相对路径。

IE。**assets/css/styleshheet.css**而不是**http://localhost/assets/css/styleshheet.css**

所以我的问题是，在使用 SEF url 时，您是否必须在整个站点中使用绝对路径，还是有什么技巧？

如果没有，实现它的最酷方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:09:41.447

通过 htaccess 将 jpg gif png js 和 css 路由到特定文件夹是一个非常糟糕的主意。扼杀你的灵活性，很快你就会有成千上万的规则以这种方式定义：D

您可以像这样定义文档的基本 url（放在 head 部分）

```
<base href="http://www.domain.com/content/themes/theme1/" /> 
```

或者更好地开始对所有事情使用绝对路径。（IMG 来源链接 URL 等）

例如，Wordpress 使用绝对链接，也称为永久链接。

# vba - Excel 2010 上的数据分析 vba

> ID：12262866
> 
> 赞同：1
> 
> 时间：2012-09-04T11:47:44.833
> 
> 标签：vba, excel, excel-2003, excel-2010

我在 Excel 2003 中有一个宏，它使用 vba 的数据分析插件来执行一些多线性回归。我最近切换到2010。找不到XXXXXXXXX\ATPVBAEN.XLA，我的宏不起作用（这并不意味着我不能使用通常的excel数据分析工具）。

不知道将这个插件放在应该放在哪里以及为什么它会消失......

欢迎任何帮助！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:55:24.170

每当我遇到“找不到加载项”时，我都会检查 VBE 下的 VBAProject-Links（它在 Extra->Links 下）。通常缺少某些部分。

您还可以检查 VBE-Menupoint“加载项”和 Excel 选项“加载项”，您可以在其中使用“管理：Excel 加载项 -> 转到...”来激活加载项，例如“求解器”和“分析函数”。

![在此处输入图像描述](../Images/6bcb42e865d5065659b225cf9ff71429.png)

希望这会有所帮助，希望自 2007 年以来没有太大变化；）

# android - 蓝牙连接到另一个设备 BroadcastReceiver

> ID：12262868
> 
> 赞同：0
> 
> 时间：2012-09-04T11:47:48.757
> 
> 标签：android, bluetooth

我想创建一个广播接收器，它会在蓝牙设备与其他设备连接时进行监听。

我只发现这个。

```
<intent-filter> <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
    <action android:name="android.bluetooth.device.action.ACL_DISCONNECT_REQUESTED" />
    <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED" />
</intent-filter> 
```

但我认为`ACL_CONNECTED`只有在搜索服务时才会激活，而不是在与其他设备建立蓝牙连接时激活。

我是对的还是我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:12:04.983

你是对的 - [ACL](http://en.wikipedia.org/wiki/Bluetooth_protocols#Asynchronous_Connection-oriented_.5Blogical_transport.5D_.28ACL.29)是蓝牙堆栈的较低层部分（它是逻辑传输层）。如果您想收听某些设备和您不拥有的某些 Android 应用程序之间建立或断开的蓝牙连接，您需要检查[RFCOMM](http://en.wikipedia.org/wiki/Bluetooth_protocols#Radio_frequency_communication_.28RFCOMM.29)连接甚至 SPP 连接。

***但是***，如果您拥有建立这些连接的应用程序，则无需侦听通用事件。

# android - Eclipse 不支持 Android 资产文件夹

> ID：12262872
> 
> 赞同：0
> 
> 时间：2012-09-04T11:48:04.867
> 
> 标签：android

我正在尝试将一些自定义 XML 数据加载到 Android 应用程序中，所以我将它放在 assets 文件夹中以便我可以阅读它。但是 Eclipse 不会让我构建我的项目；它说资产文件夹的“资源目录名称无效”！我认为资产是 Android 项目中的有效文件夹名称？

我错过了什么？该文件夹是否以某种方式获得了一些将其标记为资源文件夹而不是资产文件夹的元数据？还是只有较新版本的 Android 才支持 assets 文件夹？（我使用的是 SDK 级别 10）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:56:50.910

将该 XML 文件放在您的`XML folder`内部 res 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:54:06.077

该`assets`目录不在项目根目录下，`res`而是在项目根目录下。

# ruby-on-rails-3 - 用于 GItHub 交互的宝石

> ID：12262875
> 
> 赞同：1
> 
> 时间：2012-09-04T11:48:14.233
> 
> 标签：ruby-on-rails-3, gem

我正在寻找一个可以让我在 Git 存储库上发出一些拉取请求并下载分支文件的 gem。我正在使用这个[https://github.com/peter-murach/github#readme](https://github.com/peter-murach/github#readme)但我似乎找不到“获取/拉取”请求。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:59:29.800

你在寻找[`git`](https://github.com/schacon/ruby-git)宝石

```
sudo gem install git 
```

以下是您使用它的方式（摘自自述文件）：

```
 g = Git.init
     Git.init('project')
     Git.init('/home/schacon/proj', 
          { :git_dir => '/opt/git/proj.git', 
             :index_file => '/tmp/index'} )

   g = Git.clone(URI, :name => 'name', :path => '/tmp/checkout')   
   g.config('user.name', 'Scott Chacon')
   g.config('user.email', 'email@email.com')      

   g.add('.')
   g.add([file1, file2])

   g.remove('file.txt')
   g.remove(['file.txt', 'file2.txt'])

   g.commit('message')
   g.commit_all('message')

   g = Git.clone(repo, 'myrepo')
   g.chdir do
    new_file('test-file', 'blahblahblah')
    g.status.changed.each do |file|
     puts file.blob(:index).contents
    end
   end

   g.reset # defaults to HEAD
   g.reset_hard(Git::Commit)

   g.branch('new_branch') # creates new or fetches existing
   g.branch('new_branch').checkout
   g.branch('new_branch').delete
   g.branch('existing_branch').checkout

   g.checkout('new_branch')
   g.checkout(g.branch('new_branch'))

   g.branch(name).merge(branch2)
   g.branch(branch2).merge  # merges HEAD with branch2

   g.branch(name).in_branch(message) { # add files }  # auto-commits
   g.merge('new_branch')
   g.merge('origin/remote_branch')
   g.merge(g.branch('master'))
   g.merge([branch1, branch2])

   r = g.add_remote(name, uri)  # Git::Remote
   r = g.add_remote(name, Git::Base)  # Git::Remote

   g.remotes  # array of Git::Remotes
   g.remote(name).fetch
   g.remote(name).remove
   g.remote(name).merge
   g.remote(name).merge(branch)

   g.fetch
   g.fetch(g.remotes.first)

   g.pull
   g.pull(Git::Repo, Git::Branch) # fetch and a merge

   g.add_tag('tag_name') # returns Git::Tag

   g.repack

   g.push
   g.push(g.remote('name')) 
```

# debugging - VS 2012 灯开关调试上的空白 Siverlight

> ID：12262880
> 
> 赞同：0
> 
> 时间：2012-09-04T11:48:39.933
> 
> 标签：debugging, visual-studio-2012, visual-studio-lightswitch

我一直在 Visual Studio 2012 上使用 Lightswitch (c#)。我正在开发的项目直到今天都运行良好。当我单击调试时，Silverlight 屏幕打开，我收到 Loading... 消息，然后什么也没有。一个空白的屏幕。

输出中没有任何明显的东西。这是最后三行：

> 程序“[3312] SLLauncher.exe: Silverlight”已退出，代码为 0 (0x0)。
> 
> 程序“[5668] VslsHost.exe: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。
> 
> VslsHost 正在使用端口 50446。

我创建了一个全新的“hello world”项目并得到了相同的响应。

此外，我注意到昨天不存在的任何 VS 消息框上的 Visual Studio 标题旁边的方形符号（我很确定）。

![Visual Studio 消息头后的正方形示例](../Images/86faccfa3d4a6bf5436d7a20e17226f2.png)

每次打开 VS2012 时，都会询问我是否希望以下程序对 Windows 进行更改：devenv.exe。这似乎是良性的，但我昨天没有被问到。我试过重启电脑没有任何区别。

我正在从事的项目在我的笔记本电脑上的 VS2012 上运行良好。Lightswitch 在同一台 PC 上使用我的 VS2010 也可以正常工作。

有任何想法吗？重新安装？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:33:18.447

自从我在 Windows 8 x64 上安装 VS 2012 以来，我就有了这个小方块。不确定是什么原因造成的，但这通常是因为字体不支持字符。

我敢打赌，MS 在那里使用的是省略号字符而不是“...”，并且由于某种原因，当前字体没有选择它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T01:46:43.613

在卸载/重新安装之前，您可以尝试在 VS 2012 上进行**修复。**

您是否在机器上安装了任何其他程序等？您是否收到 Silverlight 更新提示或类似的提示？*有些东西*必须改变，这只是追查它是什么的问题。

修复是我尝试的第一件事。我从来没有见过，也没有听说过消息框标题栏中出现的那个方块，所以这也很奇怪。

# php - php zipArchive->close() 返回 False

> ID：12262882
> 
> 赞同：1
> 
> 时间：2012-09-04T11:48:53.913
> 
> 标签：php, zip

我有一个创建 zip 文件的函数。

```
function zipDoc($docRoot,$archiveName,$testsFolder){
$filename = tempnam($testsFolder, "doc");
$cwd=getcwd();
chdir ($docRoot);

 if (is_writeable($docRoot)){
    echo $docRoot." is writeable";
  }
    $zip = new ZipArchive();
    if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
        exit("cannot open <$filename>\n");
    }
  echo "<br/>";
  if (is_writeable(dirname($filename))){
    echo dirname($filename)." is writeable";
  }
    $folders = array ("_rels","docProps","word");
    // initialize an iterator
    // pass it the directory to be processed
    foreach ($folders as $folder){
        $iterator = new RecursiveIteratorIterator(new    RecursiveDirectoryIterator($folder."/"));
        // iterate over the directory
        // add each file found to the archive
        foreach ($iterator as $key=>$value) {
      if (!is_readable($key)){
           echo  "File ".$key." not readeble";
      }
            $zip->addFile(realpath($key), $key) or die ("ERROR: Could not add file: $key");
        }
    }
    $zip->addFile("[Content_Types].xml");

    // close and save archive
    echo "<br/>";
  if ($zip->close()){
  echo $filename." is Closed";
  }
  else{
  echo $filename." is not closed";
  }
    $newname=str_replace(".tmp",".docx",$filename);
    rename($filename,$newname);
    chdir($cwd);
    return $newname;
} 
```

输出是两个文件夹都是可写的（我也在文件系统上检查过），并且 zip 文件没有关闭！！！任何建议，为什么它不关闭？编辑：close() 方法调用后的文件状态为 3670068，函数 rename 表示该文件正在被另一个进程使用。该文件已创建但有 0kb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:30:01.293

好的，我找到了一个解决方案：将文件夹中的文件添加到 zip 文件时，我错过了检查它是否是真实文件，或者只是指向当前或父文件夹的链接，例如：/。或 /.. 在迭代文件时添加此简单检查后，一切正常。

```
if (substr($key,-1)=="."){
                continue;
            } 
```

希望有人会使用这个。

# persistence - 在 DataNucleus 中使用 @Embedded 和 @EmbeddedOnly 时常见的陷阱是什么？

> ID：12262888
> 
> 赞同：1
> 
> 时间：2012-09-04T11:49:10.950
> 
> 标签：persistence, datanucleus

`@Embedded`使用 RDBMS 中的 JDO，在使用or`@EmbeddedOnly`注释时，我经常会得到意想不到的结果（无论如何，对我来说） 。通常，由于错误消息，我最终会删除标签。

一些消息是，转述和部分：

1.  持久类 [...] 在数据库中没有表，但操作需要它。请检查该类的元数据规范。
2.  org.datanucleus.identity.IdentityReference 不能转换为 org.datanucleus.identity.OID

在对象层次结构中使用嵌入标签时常见的陷阱是什么？我是否必须避免某些级联操作——例如在更新时完全替换嵌入的子对象？

谢谢你。

# c# - Entity Framework 4.3 代码优先数据库命名

> ID：12262895
> 
> 赞同：7
> 
> 时间：2012-09-04T11:49:34.357
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用带有代码优先方法的 EF 4.3。

对于 EF 4.3，它建议使用新的`<entityFramework />`配置部分来初始化上下文的连接字符串。

我在网上做了一些搜索，似乎找不到一种方便的方法来使用这种方法来初始化具有可配置数据库名称的连接。

例如，假设我的`MyDBContext`应用程序中有一个实体。我希望它使用连接字符串中指定的数据库名称`Initial Catalog=MyDB;`

使用 EF 4.1 中的旧方法，我可以通过将连接字符串添加到`<connectionstring>`配置文件中的部分来做到这一点。

```
<add name="MyDBContext" connectionString="Data Source=.\SQLEXPRESS; Initial Catalog=MyDB; Integrated Security=True; MultipleActiveResultSets=True" providerName="System.Data.SqlClient"/> 
```

如果我想使用 EF 4.3 支持的较新的配置部分，我无法在连接字符串中指定数据库名称。我尝试了以下但该`Initial Catalog`属性被忽略。我相信它被忽略是有充分理由的，因为整个事情都`DefaultConnectionFactory`可以被我的应用程序中的多个上下文使用

```
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
        <parameters>
            <parameter value="Data Source=.\SQLEXPRESS; Initial Catalog=MyDB; Integrated Security=True; MultipleActiveResultSets=True" />
        </parameters>
    </defaultConnectionFactory>
</entityFramework> 
```

我的 codefirst 方法由于使用它而创建的默认数据库名称是`MyNamespace.MyDBContext`

我知道有一种方法可以通过将值传递给`nameOrConnectionString`基础`DBContext`对象的参数来覆盖此默认命名。

所以我可以做这样的事情：

```
public MyDBContext() : base("MyDB") { } 
```

但是，如果我采用这种方法，我最终会将数据库名称硬编码到我的应用程序中，我个人不喜欢这样。

我想知道有什么方法可以方便地从`Web.config`文件中传递我的数据库上下文的数据库名称，还是应该继续使用该`<connectionstrings>`部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:17:12.943

您认为数据库名称需要多久更改一次？

也就是说，我自己还没有遇到这个问题（我很好地对数据库名称进行硬编码 - 它不应该改变）一种选择可能是将您想要的数据库名称存储在 Web.config 作为应用程序设置，然后让您的代码从那里提取值。

编辑：您可能还想看看[http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-2-connections -and-models.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-2-connections-and-models.aspx)：

```
public UnicornsContext()
    : base("name=UnicornsCEDatabase")
{
} 
```

通过拉取具有该特定名称的连接字符串：

```
<configuration>
<connectionStrings>
    <add name="UnicornsCEDatabase"
        providerName="System.Data.SqlServerCe.4.0"
        connectionString="Data Source=Unicorns.sdf"/>
</connectionStrings>
</configuration> 
```

根据[http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)这应该在 4.3 中仍然有效。

# android - android应用程序不会在真实设备上自动发送短信

> ID：12262899
> 
> 赞同：2
> 
> 时间：2012-09-04T11:49:41.253
> 
> 标签：android, sms

我开发了一个 android 应用程序，它会自动将 SMS 自动发送到它接收 SMS 的设备。

我的应用程序在模拟器上运行良好，但是当我在真实设备（android 手机）上运行它时，它只接收短信并且不会自动发送响应。

我的代码如下。

```
public class SMSReciever extends BroadcastReceiver {

    String address;
    String smsMe = "I Recieved Your SMS";

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];
        for (int n = 0; n < messages.length; n++) {
            smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
            address = smsMessage[n].getOriginatingAddress();
        }

        Toast toast = Toast.makeText(context,"Received SMS: " +
                 smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
        toast.show();
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(address, null, smsMe, null, null);
    }
} 
```

我不知道是什么问题。以及为什么它在真实设备上无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:17:02.703

试试这个代码发送短信。

```
//---sends an SMS---
private void sendSMS(String phoneNumber, String message)
{        
    PendingIntent pi = PendingIntent.getActivity(this, 0,
        new Intent(this, class_name.class), 0);                
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, pi, null);        
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:56:56.097

您是否添加了将 SMS 发送到您的`AndroidManifest.xml`-file 的权限？

```
<manifest ...>
    <uses-permission android:name="android.permission.SEND_SMS">
    </uses-permission>
</manifest> 
```

这些是[相关的权限](http://developer.android.com/reference/android/Manifest.permission.html)：

```
SEND_SMS        Allows an application to send SMS messages.
BROADCAST_SMS   Allows an application to broadcast an SMS receipt notification
READ_SMS        Allows an application to read SMS messages.
RECEIVE_SMS     Allows an application to monitor incoming SMS messages, to record or perform processing on them.
WRITE_SMS       Allows an application to write SMS messages. 
```

* * *

正如[Dya 的回答](https://stackoverflow.com/a/12263324/1380710)所暗示的，使用[PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html)可以调试您的[`sendTextMessage()`-method](http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29)上的操作。

错误代码如下：

```
Activity.RESULT_OK
Activity.RESULT_ERROR_GENERIC_FAILURE
Activity.RESULT_ERROR_RADIO_OFF
Activity.RESULT_ERROR_NULL_PDU 
```

* * *

根据[本教程](http://www.mkyong.com/android/how-to-send-sms-message-in-android/)（和[Mo Al Sh 的回答](https://stackoverflow.com/a/12262998/1380710)），您可以尝试另一种内置的发送 SMS 的方式：

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.putExtra("sms_body", "default content"); 
sendIntent.setType("vnd.android-dir/mms-sms");
startActivity(sendIntent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T13:06:38.597

确保您已在*manifest.xml*中输入为；

```
<receiver android:name=".ListenerSms">
   <intent-filter ><action android:name="android.provider.Telephony.SMS_RECEIVED"/>
   </intent-filter>
</receiver> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:56:28.513

你有没有检查你是否有短信权限

> 使用权限 android:name="android.permission.SEND_SMS"

在你的清单文件中？

您也可以尝试内置 SMS 应用程序：

> ```
> Intent sendIntent = new Intent(Intent.ACTION_VIEW); 
> ```
> 
> sendIntent.putExtra("sms_body", "默认内容");
> 
> sendIntent.setType("vnd.android-dir/mms-sms");
> 
> 开始活动（发送意向）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T03:03:49.507

您无法发送消息的原因是因为您没有包含：

```
message_sc_address sms.sendTextMessage(address, message_sc_address, smsMe, null, null); 
```

您可以从平板电脑/手机消息部分获取此消息地址。

# string - 在 Groovy 中使用字母和数字对数字字符串进行排序

> ID：12262901
> 
> 赞同：6
> 
> 时间：2012-09-04T11:49:45.163
> 
> 标签：string, sorting, groovy, numeric

简单的问题，不知道有没有简单的答案。有没有办法对包含字母和数字的字符串列表进行排序，但也要考虑数字？

例如，我的列表包含：

```
(1) ["Group 1", "Group2", "Group3", "Group10", "Group20", "Group30"] 
```

（字符串不一定有“组”这个词，它可以有其他词）

如果我对其进行排序，它会显示：

```
(2)
Group 1
Group 10
Group 2
Group 20
Group 3
Group 30 
```

有没有办法像 (1) 一样对其进行排序？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T12:00:14.463

尝试这个：

```
def test=["Group 1", "Group2", "Group3", "2", "Group20", "Group30", "1", "Grape 1", "Grape 12", "Grape 2", "Grape 22"]

test.sort{ a,b ->
    def n1 = (a =~ /\d+/)[-1] as Integer
    def n2 = (b =~ /\d+/)[-1] as Integer

    def s1 = a.replaceAll(/\d+$/, '').trim()
    def s2 = b.replaceAll(/\d+$/, '').trim()

    if (s1 == s2){
        return n1 <=> n2
    }
    else{
        return s1 <=> s2
    }
}

println test 
```

如果你想首先比较你必须改变内部的数字，*如果*：

```
if (n1 == n2){
    return s1 <=> s2
}
else{
    return n1 <=> n2
} 
```

这取它在字符串中找到的最后一个数字，所以你可以写你想要的，但“索引”应该是最后一个数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T12:16:29.750

这应该可以解决问题：

```
def myList= ["Group 1", "Group2", "Group3", "2", "Group20", "Group30", "1", "Grape 1"]
print (myList.sort { a, b -> a.compareToIgnoreCase b }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:02:04.777

您可以将字符串拆分为两个子字符串，然后分别对它们进行排序。

# php - 我的 SQL 查询有什么问题，因为它不起作用？

> ID：12262906
> 
> 赞同：-2
> 
> 时间：2012-09-04T11:50:00.497
> 
> 标签：php, sql

在我的页面顶部，我连接到我的数据库，连接没有任何问题，因为我可以轻松地显示表中的数据。现在我在页面末尾有一个按钮，应该是编辑此表中的数据。但是，数据没有更新？我不知道为什么不，这段代码有什么问题吗？谢谢！（顺便说一句：回声显示得很好！）

```
$sql="UPDATE profiles SET
    bedrijfsslogan = ".$bedrijfsslogan.",
    bedrijfsomschrijving = ".$bedrijfsomschrijving.",
    bedrijfsspecialiteiten = ".$bedrijfsspecialiteiten.",
    bedrijfsgeschiedenis = ".$bedrijfsgeschiedenis.",
    openingstijden = ".$openingstijden.",
    telefoonnummer = ".$telefoonnummer.",
    fax = ".$fax.",
    email = ".$email.",
    website = ".$website.",
    twitter = ".$twitter.",
    facebook = ".$facebook.",
    youtube = ".$youtube.",
    linkedin = ".$linkedin.",
        subrubrieken = ".$subrubriekenresult.",
    merken = ".$merkenresult.",
    brancheverenigingen = ".$brancheverenigingenresult."

      WHERE kvk = ".$kvkvariable."";

mysql_query($sql);

echo "<font color=\"red\" size=\"3\"><br />Profiel succesvol bijgewerkt!<br /></font>"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:51:43.960

我敢打赌，这些变量中至少有一些是字符串——您需要将其封装在引号中，如下所示：

```
$sql="UPDATE profiles SET
bedrijfsslogan = '".$bedrijfsslogan."',
bedrijfsomschrijving = ".$bedrijfsomschrijving.".... 
```

假设第一个变量是您要保存的字符串。

[在那一点上，如果您确实迁移到PDO](http://au.php.net/manual/en/book.pdo.php) ，这对您的代码可能是一件好事- 它更安全，更安全，您*可以*用它做更多事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:51:57.523

我认为问题在于必须在 SQL 语句中引用字符串......就像......

```
fax = '".$fax."',
    email = '".$email."', 
```

ecc ecc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:00:33.343

而不是`mysql_query($sql);`，试试这个：

```
if (!mysql_query($sql)) {
   //there was an error
   echo mysql_error();
} else {
   //everything went ok. Show success message.
   echo "Update successful.";
} 
```

那应该输出 MySQL 返回的错误。它通常会指出问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:20:51.677

```
Always Use the **mysql_error()** function to track down the error 

$sql="UPDATE profiles SET
    bedrijfsslogan = ".$bedrijfsslogan.",
    bedrijfsomschrijving = ".$bedrijfsomschrijving.",
    bedrijfsspecialiteiten = ".$bedrijfsspecialiteiten.",
    bedrijfsgeschiedenis = ".$bedrijfsgeschiedenis.",
    openingstijden = ".$openingstijden.",
    telefoonnummer = ".$telefoonnummer.",
    fax = ".$fax.",
    email = ".$email.",
    website = ".$website.",
    twitter = ".$twitter.",
    facebook = ".$facebook.",
    youtube = ".$youtube.",
    linkedin = ".$linkedin.",
        subrubrieken = ".$subrubriekenresult.",
    merken = ".$merkenresult.",
    brancheverenigingen = ".$brancheverenigingenresult."

      WHERE kvk = ".$kvkvariable."";

mysql_query($sql) or die(mysql_error());

This will tell what is the error in your query :) 
```

# c++ - SIP over TCP + 转换为 UDP 与 SIP 电话通话

> ID：12262908
> 
> 赞同：1
> 
> 时间：2012-09-04T11:50:11.743
> 
> 标签：c++, tcp, udp, sip

我的 Ubuntu 12.04 机器上安装了 linphone。他说，一位同事想测试使用 SIP over TCP 而不是 UDP 的 Windows SIP 电话。

我突然想到，我可以创建一个 20 美分的 C++ 程序，它有两个线程，一个用于 UDP 端，一个用于 TCP 端，它只是接收一个协议并将其发送到另一个。由于 UDP 部分仅在 linux 机器上，我怀疑数据报与流之间存在任何问题，而且 SIP 并不是特别“流式”。

这是否可行，或者是否存在一些我不知道的底层协议问题。通过 TCP 使用的 SIP 是否与通常通过 UDP 传输的 SIP 相同？是否有一个众所周知的 C++ 解决方案？

我环顾四周寻找可能的解决方案，socat 是一种可能性，但它是 GPL，它适用于嵌入式 OCO 项目。

任何额外的意见或建议都将非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:49:00.803

看起来 linphone 支持基于 TCP 的 SIP（​​由 RFC 3261 强制执行）。

[http://www.linphone.org/eng/features/](http://www.linphone.org/eng/features/)

是的，它是通过网络传输的相同 SIP 消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:27:20.380

您最初问题的答案是，不，您不能仅将 TCP SIP 数据包“通过管道”传输到您的 UDP 套接字。SIP 确实在 Via 标头中包含传输类型，该标头用于确定传输响应的网络路径。除了用于对话传输之外，您的 SIP 服务器还需要生成发往 TCP 客户端的新 SIP 请求，并且需要一些设置或机制来让它将这些请求发送到您的“管道”，然后需要解析SIP 请求确定数据包需要发送到哪里。

总而言之，它充其量是一个非常脆弱的解决方案，最坏的情况是一个非常破碎的解决方案。找到支持 TCP 的 SIP 服务器/客户端会更快、更容易，就像现在大多数人所做的那样，事实上，这似乎是您已经完成的工作。

# iphone - iPhone中textfieldshouldendediting和textfieldDidendediting的区别

> ID：12262909
> 
> 赞同：7
> 
> 时间：2012-09-04T11:50:12.763
> 
> 标签：iphone, ios, ios5, uitextfield

*textFieldShouldendEditing*和*textfieldDidEndEditing*有什么区别，什么时候应该使用每种方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T11:56:59.283

**textFieldShouldEndEditing**：

> 询问代理编辑是否应该在指定的文本字段中停止。

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField 
```

> *讨论*当要求文本字段退出第一响应者状态时，将调用此方法。当您的应用程序要求文本字段放弃焦点或用户尝试将编辑焦点更改为另一个控件时，可能会发生这种情况。然而，在焦点实际改变之前，文本字段会调用此方法，让您的委托有机会决定是否应该这样做。
> 
> 通常，您会从此方法返回 YES 以允许文本字段退出第一响应者状态。但是，如果您的委托在文本字段中检测到无效内容，您可能会返回 NO。通过返回 NO，您可以阻止用户切换到另一个控件，直到文本字段包含有效值。

**textFieldDidEndEditing**：

> 告诉代理指定文本字段的编辑已停止。

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

*讨论* 在文本字段退出其第一响应者状态后调用此方法。您可以使用此方法来更新您的委托的状态信息。例如，您可以使用此方法隐藏应仅在编辑时可见的覆盖视图。委托执行此方法是可选的。

**站点：apple.com textFieldShouldendEditing**

[textFieldShouldEndEditing](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldShouldEndEditing:)

[textFieldDidEnd编辑](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldDidEndEditing:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:53:10.897

on `textFieldShouldendEditing`：您应该返回`BOOL`值 YES 将辞职响应者，NO 将保持原样

`textfieldDidEndEditing`当文本字段处于编辑模式后将被触发。

根据[苹果](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

当要求文本字段放弃第一响应者状态时，将调用此方法。

在文本字段放弃其第一响应者状态后调用此方法。

# asp.net - 如何在母版页和内容页中分别使用 Ajax ScriptManager 和 ToolkitScriptManager 而不会出错

> ID：12262910
> 
> 赞同：3
> 
> 时间：2012-09-04T11:50:19.707
> 
> 标签：asp.net, asp.net-ajax, updatepanel, ajaxcontroltoolkit

因为我的页面使用 ajax，所以我的母版页中有一个 Ajax 脚本管理器。但是在我的一个内容页面中，我需要在 AjaxControlToolkit 中使用 AutoCompleteExtender，这需要使用工具包中提供的 ToolScriptManager。但这会导致一个错误，即**只有一个 ScriptManager 实例可以添加到页面**中。我在互联网上搜索解决方案。许多程序员建议使用 ScriptManagerProxy 来解决这个问题。另一种选择是在母版页中使用 ToolscriptManager 而不是 ScriptManager。谁能演示如何使用 ScriptManagerProxy 解决这个问题，因为我认为这是解决问题的更好方法？

这是我的母版页的代码：

```
<form runat="server" id="bodyForm">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:ContentPlaceHolder ID="ContentPlaceHolderBodyMain" runat="server">
</asp:ContentPlaceHolder>
</form> 
```

这是我的内容页面的代码：

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>
<asp:TextBox ID="TextBoxStudentID" runat="server" autocomplete="off"></asp:TextBox>
    <asp:AutoCompleteExtender ID="AutoCompleteExtenderStudentID" runat="server" 
    EnableCaching="true" BehaviorID="AutoCompleteEx" MinimumPrefixLength="2" 
       TargetControlID="TextBoxStudentID" ServicePath="~/CampusMateWebService.asmx" ServiceMethod="GetCompletionListForStudentID" 
       CompletionInterval="50" CompletionSetCount="30" 
       CompletionListCssClass="autocomplete_completionListElement" CompletionListItemCssClass="autocomplete_listItem" 
       CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem" 
       DelimiterCharacters=";, :" ShowOnlyCurrentWordInCompletionListItem="true">
    <Animations>
      <OnShow>
      <Sequence>
      <%-- Make the completion list transparent and then show it --%>
      <OpacityAction Opacity="0" />
      <HideAction Visible="true" />

      <%--Cache the original size of the completion list the first time
        the animation is played and then set it to zero --%>
      <ScriptAction Script="// Cache the size and setup the initial size
                                    var behavior = $find('AutoCompleteEx');
                                    if (!behavior._height) {
                                        var target = behavior.get_completionList();
                                        behavior._height = target.offsetHeight - 2;
                                        target.style.height = '0px';
                                    }" />
      <%-- Expand from 0px to the appropriate size while fading in --%>
      <Parallel Duration=".2">
      <FadeIn />
      <Length PropertyKey="height" StartValue="0" 
        EndValueScript="$find('AutoCompleteEx')._height" />
      </Parallel>
      </Sequence>
      </OnShow>
      <OnHide>
      <%-- Collapse down to 0px and fade out --%>
      <Parallel Duration=".2">
      <FadeOut />
      <Length PropertyKey="height" StartValueScript=
        "$find('AutoCompleteEx')._height" EndValue="0" />
      </Parallel>
      </OnHide>
      </Animations>
    </asp:AutoCompleteExtender> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T17:55:33.863

从旧版本的 AjaxControlToolkit 更新（以及从 .NET 2.0 升级到 3.5）时，我遇到了类似的问题。

> 另一种选择是在母版页中使用 ToolscriptManager 而不是 ScriptManager。谁能演示如何使用 ScriptManagerProxy 解决这个问题，因为我认为这是解决问题的更好方法？

我不明白为什么那会是更好的方法。然后，您需要在每个子页面上放置一个 ScriptManager。仅在母版页上用 ToolkitScriptManager 替换 ScriptManager 并完成它有什么问题？

这是在[http://www.asp.net/ajaxlibrary/act_faq.ashx](http://www.asp.net/ajaxlibrary/act_faq.ashx)上找到的：

> 1.  ScriptManager 控件和 ToolkitScriptManager 控件有什么区别？我们建议您在使用 Ajax 控件工具包时使用 ToolkitScriptManager 控件。ToolkitScriptManager 使用比 ScriptManager 控件更高版本的 ASP.NET Ajax。此外，ToolkitScriptManager 在服务器上执行自动脚本组合。将 Ajax Control Toolkit 与 ASP.NET 3.5 一起使用时，您需要使用 ToolkitScriptManager

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:55:52.103

ScriptManagerProxy 允许内容页面传递对放置在母版页中的 ScriptManager 的引用。

[**视频教程**](http://www.asp.net/Learn/ajax-videos/video-95.aspx)

ScriptManagerProxy 控件使用户能够添加特定于嵌套组件的脚本和服务。如果页面已经包含 ScriptManager 控件。只能将 ScriptManager 控件的一个实例添加到页面中。该页面可以在嵌套组件（例如用户控件或嵌套母版页）内直接或间接包含控件。当 ScriptManager 控件已经在页面中并且嵌套或父组件需要 ScriptManager 控件的附加功能时，将使用 ScriptManagerProxy 控件。

[**ASP.NET中如何使用AJAX包ScriptManagerProxy控件**](http://www.vbdotnetheaven.com/uploadfile/f5b919/how-to-use-ajax-package-scriptmanagerproxy-control-in-asp-net-using-vb-net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T11:05:33.917

你只需添加：`<asp:ScriptManager ID="ScriptManager1" runat="server" />`在正文 asp 或 ContentPlaceHolder

# python - github API，fork 一个 repo

> ID：12262914
> 
> 赞同：2
> 
> 时间：2012-09-04T11:50:30.763
> 
> 标签：python

我正在尝试将 github API 与 python 一起使用，但在想要分叉一个 repo 时被卡住了。到目前为止，我的脚本是：

```
#!/usr/bin/python
import json
import getpass
from restkit import Resource, BasicAuth, request
from socketpool import ConnectionPool

user= raw_input( "Github user:" )

password=getpass.getpass()
auth=BasicAuth(user, password)

authreqdata = { "scopes": [ "public_repo" ], "note": "admin script" }

resource = Resource('https://api.github.com/authorizations', filters=[auth])
response = resource.post(headers={ "Content-Type": "application/json" },         payload=json.dumps(authreqdata))
token = json.loads(response.body_string())['token']

print token 
```

我得到了安全令牌，但在尝试分叉回购时惨遭失败。

你能帮我解决这个问题吗？

提前致谢！

# c# - 在 MS Office 插件中添加到没有清单的注册表

> ID：12262922
> 
> 赞同：1
> 
> 时间：2012-09-04T11:51:09.050
> 
> 标签：c#, outlook, vsto, ms-office, webex

我正在 c# 中制作 Outlook 2007 插件。因此，在制作设置文件时，我需要修改注册表项。其中之一是“Manifest”字符串，它具有指向 AddIn 清单文件的链接。通过加载此办公应用程序加载插件。但是当我查看 WebEx 注册表项时，它没有任何清单链接。 ![WebEx 注册表项](../Images/1caecbf594bbd5c23df2fb48c2514871.png)

为什么会这样？如果没有清单链接，WebEx 是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:44:43.580

有[(2) 种 Outlook 加载项](http://support.microsoft.com/kb/286408)- [COM 加载项](http://support.microsoft.com/kb/291392)和[Exchange 客户端扩展](http://support.microsoft.com/kb/199343)。注册表项位置取决于您使用的是**x86**还是**x64**平台。

* * *

### 对于 x86：

**Exchange 客户端扩展**：
`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Exchange\Client\Extensions`
**Outlook COM 加载项**：
`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Office\Outlook\Addins`

* * *

### 对于 x64：

**Exchange 客户端扩展**：
`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Exchange\Client\Extensions`
**Outlook COM 加载项**：
`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\Outlook\Addins`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T09:31:50.383

要回答您的问题，实现 ID2Extensibility 接口的 COM 插件必须使用不同的注册方法。具体来说，它们必须注册为 COM 服务器，因此它们的注册与注册表中的 InProcServer32 键相关联。基本上，机器已经知道在类注册表中按名称在哪里找到对象，并以这种方式加载适当的 DLL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:55:12.790

要回答您的问题，显然有多种方法可以为您的 Office 应用程序注册加载项。一个是 VSTO 生成的清单，如您所展示的。我认为这是 C# 插件开发中的“现代”方式。

但请记住，Office 加载项只是普通的旧 COM+ 组件。因此，您也可以使用 C、C++ 和其他支持 COM+ 的语言制作插件 :) 要注册这些插件，您需要在 Windows 注册表中添加某些键。

使用 C# 和 Visual Studio，您可以通过在 Build 选项卡下的项目设置中选择“Register for COM Interop”选项将 C# 程序集注册为 COM 组件。这相当于在程序集 (DLL) 上手动运行 .NET 安装附带的 Regasm 实用程序。

现在，如果您已经注册了组件，那么让 Office 应用程序加载您的加载项所需要做的就是使用格式为“namespace.class_extending_appropriate_interface”的注册表项引用此组件。

# database - django查询过滤和区分

> ID：12262923
> 
> 赞同：6
> 
> 时间：2012-09-04T11:51:22.797
> 
> 标签：database, django, django-models

我有一张如下表：

表名：示例

```
values
1
1
2

2
3

3 
```

值列表包含上述值。当我在able 表上编写一个不同的查询时，我得到 1 2 3 和一个空的 '' 值。

我想摆脱`null`价值，因为它在我的程序中造成了一些问题。我写的查询是：

```
example.objects.values_list('values',flat = True).distinct() 
```

有没有办法过滤掉那个空值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T12:57:00.547

试试这个：

```
from django.db.models import Q
example.objects.exclude(
      Q(values__isnull=True)|Q(values='')
    ).values_list('values', flat=True).distinct() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T12:42:29.717

正如提到的其他答案，如果您有`null`/`empty string`困惑。您可以使用复杂的查找参数排除两者，例如：

```
from django.db.models import Q
example.objects.exclude(Q(values__isnull=True)|Q(values='')).values_list('values',flat = True).distinct() 
```

[复杂的查找在这里](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:56:36.527

您可以尝试先过滤掉空值，然后链接您的过滤器，如下所示

```
example.objects.exclude(values=None).values_list('values',flat = True).distinct() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:14:17.400

尝试使用[`is_null`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#isnull)字段查找：

```
example.objects.filter(values__isnull=False).values_list('values',flat = True).distinct() 
```

所以之前的查询字符串`.values_list(...`将返回`example`表中的所有记录，其中`values`字段不为空。

正如*@BurhanKhalid*所注意到的，这种尝试只有在您的`values`字段可以为 NULL时才有效

# linux - Linux glib 需要 pkg-config 和 pkg-config 需要 glib？

> ID：12262925
> 
> 赞同：26
> 
> 时间：2012-09-04T11:51:26.380
> 
> 标签：linux, glib, pkg-config

我尝试安装udev。并且 udev 在`./configure`

```
--exists: command not found configure: error:
pkg-config and "glib-2.0 >= 2.16" not found, please set GLIB_CFLAGS and GLIB_LIBS
to the correct values or pass --with-internal-glib to configure 
```

好的，缺少 pkg-config 和 glib-2.0。

起初我尝试安装 pkg-config。我收到了这条消息：

```
checking whether to list both direct and indirect dependencies... no
checking for Win32... no
checking if internal glib should be used... no
checking for pkg-config... no
./configure: line 13557: --exists: command not found
configure: error: pkg-config and "glib-2.0 >= 2.16" not found,
please set GLIB_CFLAGS and GLIB_LIBS to the correct values or 
pass --with-internal-glib to configure 
```

好的，我解释说，那个 glib 不见了。

下一步安装 Glib。

我收到了这条消息：

```
configure: error: in `/root/glib-2.33.3':
configure: error: The pkg-config script could not be found or is too old.  Make sure it
is in your PATH or set the PKG_CONFIG environment variable to the full
path to pkg-config.

Alternatively, you may set the environment variables LIBFFI_CFLAGS
and LIBFFI_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

但我现在很困惑。他们需要彼此吗？我的错误是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-04T12:29:07.800

正如您已经观察到的，pkg-config 和 glib 之间确实存在循环依赖关系。要打破它，pkg-config 的[源代码](http://pkgconfig.freedesktop.org/releases/pkg-config-0.27.tar.gz)包含一个版本的 glib，足以编译它。这应该打破依赖循环。

尝试使用`--with-internal-glib`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T12:27:18.670

它已包含在 glib 错误消息中：

> 或者，您可以设置环境变量 LIBFFI_CFLAGS 和 LIBFFI_LIBS 以避免调用 pkg-config。有关更多详细信息，请参见 pkg-config 手册页。

Glib 构建脚本使用 pkg-config 来查找 libffi。但是您也可以通过设置环境变量手动提供信息。那么就不需要调用 pkg-config 了。Glib 本身根本不需要 pkg-config。

pkg-config 人员提供了该问题的另一种解决方案。同样，在错误消息的末尾：

> 请将 GLIB_CFLAGS 和 GLIB_LIBS 设置为正确的值**或通过 --with-internal-glib 进行配置**

在这种情况下，pkg-config 本身包含了构建所需的所有内容，而您的系统上还没有 Glib。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-06T09:38:14.487

```
export GLIB_CFLAGS="$(pkg-config --cflags glib-2.0)" 
export GLIB_LIBS="$(pkg-config --libs glib-2.0)"
printf '# In the case of a RHEL6.5\n\tGLIB_CFLAGS=%s\n\tGLIB_LIBS=%s\n' "$GLIB_CFLAGS" "$GLIB_LIBS"
# In the case of a RHEL6.5
        GLIB_CFLAGS=-I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include
        GLIB_LIBS=-lglib-2.0

# _now_ it is a no-brainer. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T16:20:57.390

libudev 现在是 systemd 的一部分，它不依赖于 glib。

大多数 Linux 发行版都为 pkg-config、libudev 和 glib 提供二进制文件。它们可能已经安装，但如果没有，您可以使用包管理器来获取它们。

如果您确实需要自己编译这些东西，请考虑使用[pkgconf](https://github.com/pkgconf/pkgconf)，这是不使用 glib 的 pkg-config 的轻量级实现。

# sql - 许多表的一个结果集 DBIx::class

> ID：12262938
> 
> 赞同：1
> 
> 时间：2012-09-04T11:52:01.980
> 
> 标签：sql, catalyst, dbix-class

我有一个包含许多表的数据库，这些表的结构相同并具有相同的列名。

```
表格1
col1
col2
col3

表 2
col1
col2
col3

```

等等。

我正在尝试学习如何在这种类型的设置中使用 DBIx::Class 和 Catalyst。

通常我有一个像这样的子程序：

```
sub query{
my($table) = @_;
$sql = "SELECT col1 FROM $table;";
$qh=$connect->prepare($sql) or die print $DBI::errstr;
$qh->execute() or die print $DBI::errstr;
} 
```

...得到结果等等

我可以想到如何从控制器中做到这一点。

```
my $table = "DB::Table1";
my $result = $c->model($table)->create({col1 => $col1, col2=>$col2}); 
```

没关系。但是如何编写结果和结果集呢？我不想写很多，在一个实例中，数十个 ResultSets 本质上是相同的，只是在不同的表上。

有没有办法编写一个将表作为参数并基于此进行查询的 ResultSet？我试图编写一个“全局”结果集，但得到一个错误，即没有具有该名称的结果。

是否可以通过这种设置使用 DBIx::Class？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:55:49.810

我建议您编写一个 Moose 角色，将其应用于每个 ResultSet 类。

# c# - 仅当目标属性不为空时才使用目标值

> ID：12262940
> 
> 赞同：6
> 
> 时间：2012-09-04T11:52:10.677
> 
> 标签：c#, .net, automapper

当我想使用`UseDestinationValue`方法中的行为时如何配置 AutoMapper 映射，但仅当目标属性为 NOT 时`null`。

像这样的东西：

```
Mapper.CreateMap<Item, ItemViewModel>()
    .ForMember(x => x.Details, _ => _.UseDestinationValue(dontUseWhenNullDestination: true)) 
```

**编辑**

```
class ItemDetails {
    public string Info { get; set; }
    public string ImportantData { get; set; } // only in Domain, not in ViewModel
}

class Item {
    public ItemDetails Details { get; set; }
}

class ItemDetailsViewModel {
    public string Info { get; set; }
}

class ItemViewModel {
    public ItemDetailsViewModel Details { get; set; }
} 
```

现在使用示例。我有一个`ItemViewModel`班级，我想将它映射到`Item`班级。

映射配置：

```
 Mapper.CreateMap<Item, ItemViewModel>()
        .ForMember(x => x.Details, _ => _.UseDestinationValue()) 
```

1.  第一种情况 - 目标属性`Item.Details`属性不为空。现在我希望 AutoMapper**使用**这个属性的目标实例`Details`，因为它不为空。

    逻辑如下所示：

    ```
    var item = new Item { 
        Details = new Details {
            Info = "Old text",
            ImportantData = "Data"
        }
    };

    var itemViewModel = new ItemViewModel { 
        Details = new DetailsViewModel {
            Info = "New text"
        }
    };       

    Mapper.Map(itemViewModel, item); 
    ```

    AutoMapper，由于存在`UseDestinationValue`，将离开`item.Details`实例并仅设置`item.Details.Info`属性。

2.  第二种情况 - 目标属性`Item.Details`属性为 NULL。现在我希望 AutoMapper**不使用**这个空实例，而是创建一个新实例。问题是如何配置映射以考虑这种情况？

    逻辑如下所示：

    ```
    var item = new Item { 
        Details = null
    };

    var itemViewModel = new ItemViewModel { 
        Details = new DetailsViewModel {
            Info = "New text"
        }
    };

    Mapper.Map(itemViewModel, item); 
    ```

    **问题**

    这里我有一个问题，因为映射后，该`item.Details`属性将为空（因为在这种情况下使用`UseDestinationValue`它`null`）。

**原因**

NHibernate 从数据库中获取实体后，将其放入代理中。所以`Details`加载对象的属性不是 type: `ItemDetails`，而是`ItemDetailsNHibernateProxy`- 所以我必须使用这种类型，当我想稍后将这个现有对象保存到数据库中时。但是如果这个属性是`null`，那么我不能使用空目标值，所以 Automapper 应该创建一个新实例。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-16T10:48:30.420

有同样的问题，但使用 EF。Cryss 关于使用 BeforeMap 的评论为我指明了正确的方向。

我最终得到类似于以下的代码：

在 Configure() 方法中：

```
Mapper.CreateMap<ItemViewModel, Item>()
           .AfterMap((s, d) => { MapDetailsAction(s, d); })
           .ForMember(dest => dest.Details, opt => opt.UseDestinationValue()); 
```

然后行动：

```
Action<ItemViewModel, Item> MapDetailsAction = (source, destination) =>
        {
            if (destination.Details == null)
            {
                destination.Details = new Details();
                destination.Details =
                    Mapper.Map<ItemViewModel, Item>(
                    source.Details, destination.Details);
            }
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:00:41.220

我认为该`NullSubstitute`选项对您有用。参见：[http ://weblogs.asp.net/psteele/archive/2011/03/18/automapper-handling-null-members.aspx](http://weblogs.asp.net/psteele/archive/2011/03/18/automapper-handling-null-members.aspx)

**编辑**

看起来您可能需要为详细信息的映射添加一些条件逻辑（并跳过该`UseDestinationValue`选项）：

```
.ForMember(d => d.Details, 
    o => o.MapFrom(s => s.Details == null ? new ItemDetails() : Mapper.Map<ItemDetailsViewModel, ItemDetails>(s.Details)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:26:59.603

我在处理 NHibernate 实体时遇到了同样的问题，我找到了非常简单的解决方案。

您应该在 ItemViewModel 构造函数中初始化 Details 属性。这样，目标值永远不会为空。当然，这不适用于更复杂的情况（如抽象类）。

# php - display_errors 和 php 5.4

> ID：12262941
> 
> 赞同：0
> 
> 时间：2012-09-04T11:52:24.143
> 
> 标签：php, prestashop

也许有人可以对此有所了解：为什么当我将大图像上传到我的 prestashop 支持的网站时，它会给出“内存耗尽错误”（这是我所期望的），但仅当 php 版本为 5.3.14 时。当我切换到 5.4.4 - 相同的程序给出空白页。`display_errors`两次都设置为“开”。

来自 php.net 文档 - “虽然 display_errors 可以在运行时设置（使用 ini_set()），但如果脚本有致命错误，它不会有任何影响。这是因为所需的运行时操作没有被执行。”。也许是这样？但为什么它给出了 5.3 而不是 5.4 的错误消息？

顺便说一下，一旦我增加内存限制，错误就会消失。在 5.3 和 5.4 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:39:18.830

检查 php.ini 文件 phpinfo() 以获得您给 Php 的最大内存值。

这两个版本之间的默认值可能不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:37:55.647

也许您没有将内存限制设置得足够高。您确定您在`error_reporting`5.4.4 版本上设置的参数正确吗？

试试这个：

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

# javascript - 获取指定父母的孩子的属性？

> ID：12262942
> 
> 赞同：1
> 
> 时间：2012-09-04T11:52:30.310
> 
> 标签：javascript, jquery, xml

我有一个 xml 文件，该文件在 html **Embed**标记中存储了有关 flash-shockwave 类型的所有配置。我编写此代码以从 xml 文件访问并将它们加入一个字符串。我的以下代码是： ![在此处输入图像描述](../Images/22725f75da4f0f5237a999e69dee6189.png)

但是这个，我不知道为什么 flashSettingStr 是空的？

我的以下 xml 文档是：

![在此处输入图像描述](../Images/873b4285dfafc070e721964c0b729862.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:54:30.320

也许你应该写

```
$(xml).children('Option').each(... 
```

因为`FlashSetting`不是自身的子元素（它是根元素）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:02:14.277

```
var $xml = $('<FlashSetting><Option name="a" value="b" /><Option name="c" value="d" />​​​​​​​​​&lt;/FlashSetting>')​​​​​​​​​​;
var flashSettingStr = [];
$xml.find("Option").each(function () {
    var $this = $(this);
    console.log($this);
    flashSettingStr.push($this.attr("name") + "=" + $this.attr("value"));
});
flashSettingStr = flashSettingStr.join(','); 
```

**[演示](http://jsfiddle.net/Bu3J4/)**。

# java - 表。删除行。消费该事件以不被进一步分派

> ID：12262943
> 
> 赞同：2
> 
> 时间：2012-09-04T11:52:30.817
> 
> 标签：java, swing, jtable

我需要在删除键上从 JTable 中删除行。所以用例很简单，用户选择一些行，按删除键，行被删除。代码也很简单：

```
DefaultTableModel tableModel = (DefaultTableModel) table.getModel();
    int[] selectedRows = table.getSelectedRows();
    for (int i = selectedRows.length - 1; i > -1; i--) {
        tableModel.removeRow(selectedRows[i]);
    } 
```

问题是删除完成后，我们会听到一声哔声（我在 windows 上，典型的 windows 哔声），就像在空文本框中按下删除键时（或者当插入符号位于末尾时）文本）。我正在发生的事情是按键被进一步发送到显示单元格文本内容的文本组件（已删除单元格之后的第一个单元格）。哔声由 DefaultEditorKit$DeleteNextCharAction#actionPerformed 方法触发，因为点前面没有字符。作为 hack，我修改了侦听​​器中的事件：

```
e.setKeyCode(KeyEvent.VK_SHIFT) // see JTable#processKeyBinding 
```

该事件没有进一步转发，因此哔哔声消失了，但我认为这是一个糟糕的解决方案，并且有一个更好的解决方案。但哪个是更​​好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:15:21.393

*   你删除行的核心是错误的，必须从最大索引开始，否则删除未选中的行，

代码示例

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)},
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)},
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;

    public RemoveAddRows() {
        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton button1 = new JButton("Remove all rows");
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                int[] selectedRows = table.getSelectedRows();
                for (int i = selectedRows.length - 1; i > -1; i--) {
                    model.removeRow(selectedRows[i]);
                }
                /*if (model.getRowCount() > 0) {
                for (int i = model.getRowCount() - 1; i > -1; i--) {
                model.removeRow(i);
                }
                }*/
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JButton button2 = new JButton("Add new rows");
        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                Object[] data0 = {"Buy", "IBM", new Integer(1000), new Double(80.50)};
                model.addRow(data0);
                Object[] data1 = {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)};
                model.addRow(data1);
                Object[] data2 = {"Sell", "Apple", new Integer(3000), new Double(7.35)};
                model.addRow(data2);
                Object[] data3 = {"Buy", "Nortel", new Integer(4000), new Double(20.00)};
                model.addRow(data3);
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JPanel southPanel = new JPanel();
        southPanel.add(button1);
        southPanel.add(button2);
        add(southPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        RemoveAddRows frame = new RemoveAddRows();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

*   我是 Win 用户，从未听过 Win 平台的哔哔声，必须发布[SSCCE](http://sscce.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:19:26.580

改用键绑定...

```
InputMap im = table.getInputMap(JTable.WHEN_FOCUSED);
ActionMap am = table.getActionMap();

im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0), "DeleteRow");
am.put("DeleteRow", new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent e) {

        System.out.println("Delete row");
        int row = table.getSelectedRow();

        if (row > -1) {

            DefaultTableModel model = (DefaultTableModel) table.getModel();
            model.removeRow(row);

        }

    }
}); 
```

（我为我的测试借用了 mKorbel 数据，所以我的测试使用的是`DefaultTableModel`，您需要转换为您正在使用的模型）。

此外，如果您进行编辑，它可能仍会触发，因此您需要检查它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T21:00:42.003

这是[MadProgrammer 的](https://stackoverflow.com/users/992484/madprogrammer)代码，但我将其修改为一次处理多个选定的行，而不是一一处理：

```
 // Assume table is a JTable instance
    InputMap inputMap = table.getInputMap(JTable.WHEN_FOCUSED);
    ActionMap actionMap = table.getActionMap();

    inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0), "DeleteRow");
    actionMap.put("DeleteRow", new AbstractAction()
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            int[] row = table.getSelectedRows();

            for (int i = 0; i < row.length; i++)
            {
                ((DefaultTableModel) table.getModel()).removeRow(row[i] - i * 1);
            }
        }
    }); 
```

# iphone - IOS 的 IAP 不要求我购买该物品并给我“无产品”

> ID：12262944
> 
> 赞同：0
> 
> 时间：2012-09-04T11:52:35.710
> 
> 标签：iphone, ios

我正在尝试在应用商店中为我的新版本应用实施 IAP。这是我所做的一切：

1.  在 iTunes 连接中制作了新版本，状态 = 准备上传。
2.  在“管理应用内购买”中添加新产品
3.  创建测试用户帐户。
4.  实现流动代码：

    ```
     -(IBAction)audio{
     //test the restriction
    if ([SKPaymentQueue canMakePayments]){

    SKProductsRequest *skproductrequiste = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:@"AudioPlayer"]];
    skproductrequiste.delegate = self;
    [skproductrequiste start];
    }

    //after purshsing youcan show
     /*
    detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"show_pro"];
    detailViewController.product = @"audio";
    [self.navigationController pushViewController:detailViewController animated:YES];
    */

    }

     -(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{
     SKProduct *validproducte = nil;
     int count = [response.products count];
     if (count >0) {
     validproducte = [response.products objectAtIndex:0];
     SKPayment *pay = [SKPayment paymentWithProductIdentifier:@"AudioPlayer"];
     [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
     [[SKPaymentQueue defaultQueue]addPayment:pay];
     }
     else{NSLog(@"no product");}
     }

    -(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions{
    for(SKPaymentTransaction *transiction in transactions){
        switch (transiction.transactionState) {
            case SKPaymentTransactionStatePurchasing:
                break;

            case SKPaymentTransactionStatePurchased:
                NSLog(@"dobe buying");
                [[SKPaymentQueue defaultQueue]finishTransaction:transiction];
                break;

            case SKPaymentTransactionStateRestored:
                break;

            case SKPaymentTransactionStateFailed:
                break;
        }
    }
    } 
    ```

在我在真实设备上测试我的应用程序之前，我退出了应用程序商店。然后运行应用程序并按下音频 IBAction，但它给了我“没有产品”。它甚至没有要求我登录应用商店。这里有什么问题 ？另外，我想知道如果客户删除应用程序并重新安装，我该如何节省购买？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:22:11.747

您是否更新了账户中的合同、税务和银行信息。否则，您将无法获得产品信息。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:00:00.880

1.  如果您在那里尝试，IAP 无法在模拟器上运行。
2.  对产品列表的请求不需要登录。
3.  确保您的产品 ID 与您在 Manage In App Purchase 中输入的内容完全相同。如果不匹配，它将返回“0”。
4.  有时 IAP“沙盒”已关闭并且不返回任何项目。检查 Apple iOS 开发者论坛的 IAP 部分，看看是否有其他人看到此问题。

# iphone - iPhone中textfieldshouldendediting和textfieldDidendediting的区别

> ID：12262945
> 
> 赞同：1
> 
> 时间：2012-09-04T11:52:36.910
> 
> 标签：iphone, ios, ios5, uitextfield

> **可能重复：**
> [iPhone 中的 textfieldshouldendingediting 和 textfieldDidendediting 之间的差异](https://stackoverflow.com/questions/12262909/diffrence-between-textfieldshouldendediting-and-textfielddidendediting-in-iphone)

`textFieldShouldendEditing`和方法有什么区别`textfieldDidEndEditing`？以及何时使用这些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:09:14.700

从文档：

```
textFieldShouldendEditing: 
```

> 当要求文本字段放弃第一响应者状态时，将调用此方法。当您的应用程序要求文本字段放弃焦点或用户尝试将编辑焦点更改为另一个控件时，可能会发生这种情况。然而，在焦点实际改变之前，文本字段会调用此方法，让您的委托有机会决定是否应该这样做。

```
textfieldDidEndEditing: 
```

> 在文本字段放弃其第一响应者状态后调用此方法。您可以使用此方法来更新您的委托的状态信息。例如，您可以使用此方法隐藏应仅在编辑时可见的覆盖视图。

因此，该`textFieldShouldendEditing:`方法将在方法之前`textfieldDidEndEditing:`调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:07:05.207

`textFieldShouldendEditing`当您的 textField 即将结束编辑模式时将调用。它有一个 BOOL 返回类型。如果您设置`return NO`比您的 textField 将不会 resignFirstResponder 并保持在编辑模式，`textfieldDidEndEditing`不会调用。

虽然`textfieldDidEndEditing`这是告诉您文本字段未处于编辑模式且键盘已关闭的方法。

有关更多详细信息，请参阅[UITextFieldDelegate 协议](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html) 希望这会有所帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:07:51.900

**textFieldDidEndEditing：** 当文本字段辞去第一响应者时调用。因此，您可以获取用户输入的值。

**textFieldShouldendEditing：**用于检查用户输入的键是否应该显示在文本字段上。因此，如果您返回 NO，则不会显示该键。想象一个标签，您想限制输入的字母数量。您可以使用上面的方法来检查输入了多少个字符，如果它们已达到限制，则返回`NO`基本上不需要任何新击键的值。

您可以查看[参考文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)以获取更多信息。

# java - JFreeChart 文本注释不起作用？

> ID：12262947
> 
> 赞同：0
> 
> 时间：2012-09-04T11:52:49.263
> 
> 标签：java, annotations, font-face, jfreechart, font-size

我似乎在 JFreeChart XYPlot 中遇到了测试注释的问题。我可以如下设置文本注释

```
XYTextAnnotation textAnnotaion = new XYTextAnnotation(description, xMid, yMid);
plot.addAnnotation(textAnnotaion); 
```

我还可以通过添加来旋转文本

```
textAnnotaion.setRotationAngle(90.0); 
```

但是，如果我尝试更改字体类型/大小或颜色，它似乎不起作用

```
textAnnotaion.setFont(new Font("Tahoma", Font.BOLD, 20));
textAnnotaion.setPaint(new Color(255, 255, 255, 15)); 
```

字体保持黑色且为默认类型/大小。奇怪的是，烛台图表上的功能似乎很好，但不是普通的 XYPlot

有没有其他人经历过这种情况或者我做错了什么？

========

我似乎已经弄清楚了这个问题。在我的烛台图代码中，数据集在构建时添加到图表中。添加文本注释似乎可以正常工作。在我的 XYPlot 的情况下，我使用空的 XYSeriesCollection 创建绘图，然后动态添加数据系列。

如果我添加文本注释，然后将框架设置为可见，则不会应用字体更改（颜色和类型）。如果我将框架设置为可见然后应用注释一切似乎都很好。它开始看起来像一个错误......

=======

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:26:35.673

恐怕我的代码中有一个错误。看起来必须在更改注释格式之前应用主题....

# vb.net - 使用 Shell 打开特定的 ACCESS 表单

> ID：12262948
> 
> 赞同：1
> 
> 时间：2012-09-04T11:52:55.200
> 
> 标签：vb.net, shell, ms-access, vb6

我正在尝试使用 vb6 打开特定的 Access 表单`Shell`，但在阅读了大量文档后，我无法找出 Access 找不到我的数据库的原因。

```
dim ss as string
ss = MSAccFolder & "\MSAccess.exe" & " " & app.path & "\database\db.mdb /cmd " & ""formname""
Shell sss, vbNormalFocus 
```

我应该告诉你的有趣的事情是，一段时间后 Access 打开，它说找不到具有此路径的数据库

```
MYAPPPATH/MYFORMNAME.mdb 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:56:07.267

`app.path`可能包含空格。用引号将 app.path 和 "\database\db.mdb" 括起来。我很抱歉，但我忘记了执行此操作的 VB 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:45:57.530

最后我找到了解决方案。

```
 Private Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long

'This will open Access with the specified name

    Dim ss As String
    ss = App.path & "\database\db.mdb"
    ShellExecute Me.hwnd, vbNullString, ss, vbNullString, "C:\", SW_SHOWNORMAL 
```

# java - 如何从java中的结果集中获取列名

> ID：12262951
> 
> 赞同：0
> 
> 时间：2012-09-04T11:53:06.240
> 
> 标签：java, sql

> **可能重复：**
> [从 java.sql.ResultSet 检索列名](https://stackoverflow.com/questions/696782/retrieve-column-names-from-java-sql-resultset)

我有返回结果集的查询，我想获取返回的列名。

我真的不知道如何从结果集中获取列名，如果你们中的一些人可以为我提供示例或示例，那将是非常有帮助的。

如何在java中做到这一点。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T11:54:17.890

您需要[ResultSetMetaData](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html)

```
ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM TABLE2");
ResultSetMetaData rsmd = rs.getMetaData(); 
```

对于您的用例，请查看[getColumnName()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html#getColumnName%28int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T11:55:18.897

您可以使用 ResultSetMetaData 类来提取此类信息。

示例：[http ://www.java2s.com/Code/Java/Database-SQL-JDBC/SQLstatementResultSetandResultSetMetaData.htm](http://www.java2s.com/Code/Java/Database-SQL-JDBC/SQLstatementResultSetandResultSetMetaData.htm)

# html - ie8中的下拉菜单混乱

> ID：12262953
> 
> 赞同：0
> 
> 时间：2012-09-04T11:53:10.217
> 
> 标签：html, css, drop-down-menu, menu, internet-explorer-8

这是我的下拉菜单代码。在所有浏览器中都可以，但 ie8 除外。我无法理解这个问题。我很高兴知道你的意见。

```
<ul id="nav" class="nav_wrapper">
  <li id="menu_3">
    <a href="#"> A </a>
    <ul class="sub_menu" id="sub_3" style="display: none">
      <li id="menu_5"><a href="main.php?pages=5"> 1 </a></li>
      <li id="menu_6"><a href="main.php?pages=6"> 2 </a></li>
      <li id="menu_7"><a href="main.php?pages=7"> 3 </a></li>
    </ul>
  </li>

  <li id="menu_18"><a href="main.php?pages=18"> B </a></li>

  <li id="menu_19">
    <a href="#"> C </a>
    <ul class="sub_menu" id="sub_19" style="display: none">
      <li id="menu_20"><a href="main.php?pages=20"> 1 </a></li>
      <li id="menu_21"><a href="main.php?pages=21"> 2 </a></li>
    </ul>
  </li>
</ul> 
```

这是样式表。我删除了一些不必要的样式，例如背景和边框，...

```
.nav_wrapper {
left: 0px;
margin-top: 7px;
padding: 0px;
position: fixed;
right: 0px;
Z-index:10;}

#nav > li { 
display: inline;
float: right;
position: relative;}

li { 
font-family: "tahoma";
font-size: 10pt;
list-style: none outside none;
}

li a {
float: right;
padding: 18px 15px 20px;
text-decoration: none;
}

.sub_menu {
float: right;
line-height: normal;
margin-left: -60px;
margin-top: 55px;
padding: 0px;
position: fixed;
width: 202px;
}

.sub_menu li {
display: inline-block;
text-align: right;
 }

.sub_menu li a {
direction: rtl;
display: inline-block;
line-height: 1;
padding: 10px 10px 10px 0px;
width: 192px;
 } 
```

问题是在 ie8 中，主菜单从右到左是级联的。并且子菜单不在主菜单项下的正确位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:03:22.080

[http://jsfiddle.net/GMajE/](http://jsfiddle.net/GMajE/)

看一下这个。您需要做的是从以下类中删除 float:right ：

```
#nav > li { 
display: inline;
float: right;
position: relative;} 
```

您需要将 .nav_wrapper 类更改为：

```
.nav_wrapper {
left: 0px;
margin-top: 7px;
padding: 0px;
right: 0px;
Z-index:10;
float:right;} 
```

关于子菜单。您应该将 position:relative 放在主导航的 li 中，然后将 position:absolute 放在子菜单中，然后将 left/right/top/bottom 相应地放在子菜单中。我还没有在小提琴中设置子菜单，所以你知道。

# sql - 在几列中选择具有相同值的最新行

> ID：12262963
> 
> 赞同：2
> 
> 时间：2012-09-04T11:53:49.540
> 
> 标签：sql

在我正在从事的一个项目中，数据库中存储了一些测量值。测量由世界坐标 (posX, posY, posZ) 站标识号 (stationID) 和测量时间 (time) 组成。

有时由于不同的原因在现场重新进行测量，然后有多个测量具有相同的坐标和站点 ID，但在不同的时间执行。

有没有办法编写一个 sql 查询，以便我获得所有 VALID 测量值，即只有在坐标和站 ID 相同的情况下才能获得最新的测量值？

我不太擅长 SQL，所以我什至不知道该用谷歌搜索什么，所以即使你只知道我应该使用什么类型的命令，任何指针都非常感谢 :)

编辑：

我的任务刚刚改变，显然站号无关紧要，只有坐标和时间。

另外，我正在使用实现 SQL-92 的 DISQLite3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:57:46.353

是的，您可以在 SQL 中执行此操作。

您似乎想为每个站和坐标组合获取最新条目 - 查看`GROUP BY`或`ROW_NUMBER()`

根据您的 SQL 变体（如果您指定它会很有帮助），类似于...

```
 select *
 from
     (Select *, 
             row_number() over (Partition by coordinates, stationid order by measurementtime desc) rn
      from yourtable
     ) v
 where rn = 1 
```

没有排名功能

```
 select yourtable.* 
 from yourtable
      inner join
      (
           select coordinate, MAX(time) maxtime from yourtable
           group by coordinate 
      ) v
on yourtable.coordinate = v.coordinate
and yourtable.time = v.maxtime 
```

# python - 我如何使这个测试通过？

> ID：12262967
> 
> 赞同：4
> 
> 时间：2012-09-04T11:54:01.200
> 
> 标签：python, unit-testing

我正在尝试测试返回类型`__repr__`。它不是一个字符串，那它是什么？这里发生了什么事？

```
import unittest
class MyClass(unittest.TestCase):
    class Dog(object):
            def __init__(self, initial_name):
                self._name = initial_name

            def get_self(self):
                return self

            def __repr__(self):
                return "Dog named '" + self._name + "'"

    def runTest(self):
        fido = self.Dog("Fido")
        self.assertEqual("Dog named 'Fido'", fido.get_self()) #Fails!

test=MyClass("runTest")
runner=unittest.TextTestRunner()
runner.run(test) 
```

运行这个给出：

```
FAIL: runTest (__main__.MyClass)
----------------------------------------------------------------------
Traceback (most recent call last):
   File "/home/xxxxx/fido.py", line 15, in runTest
     self.assertEqual("Dog named 'Fido'", fido.get_self())
   AssertionError: "Dog named 'Fido'" != Dog named 'Fido'

 ----------------------------------------------------------------------
 Ran 1 test in 0.006s

 FAILED (failures=1) 
```

我怎样才能让这个测试通过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:00:38.037

```
self.assertEqual("Dog named 'Fido'", repr(fido.get_self())) 
```

要不就

```
self.assertEqual("Dog named 'Fido'", repr(fido)) 
```

否则`assertEqual`正确地告诉您字符串不等于对象。当它呈现它`repr`在对象上使用的错误消息时，该错误看起来有点混乱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:03:08.767

repr 返回一个字符串，但 fido.get_self() 返回一个 Dog 对象，而不是一个字符串。

当出现断言错误时，它使用“repr”来显示您的 Dog 实例的可读表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:13:02.600

通过做检查您的断言所做的比较类型`print type(s)`。您正在`__repr__`与`str`. 为了使它起作用，比较两个字符串。请参阅[Python 中 __str__ 和 __repr__ 之间的区别](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)

# ios - iOS 在 mapview CGLocation 上崩溃

> ID：12262968
> 
> 赞同：1
> 
> 时间：2012-09-04T11:54:05.623
> 
> 标签：ios, mkmapview

我在使用 Xcode 4.3.2 测试地图时发生了这个崩溃；针对 iOS 5.1，下面是回溯：

```
(lldb) bt all

* thread #1: tid = 0x1f03, 0x026edcaa libobjc.A.dylib`objc_exception_throw, stop reason = breakpoint 1.3
frame #0: 0x026edcaa libobjc.A.dylib`objc_exception_throw
frame #1: 0x029da644 CoreFoundation`-[__NSArrayI objectAtIndex:] + 196
frame #2: 0x000f21fb SubwayDA`-[LocationsMapSubviewController mapView:annotationView:calloutAccessoryControlTapped:] + 699 at LocationsMapSubviewController.m:174
frame #3: 0x00073b27 SubwayDA`-[CalloutMapAnnotationView calloutAccessoryTapped:] + 263 at CalloutMapAnnotationView.m:382
frame #4: 0x029efe99 CoreFoundation`-[NSObject performSelector:withObject:withObject:] + 73
frame #5: 0x00f1514e UIKit`-[UIApplication sendAction:to:from:forEvent:] + 96
frame #6: 0x00f150e6 UIKit`-[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
frame #7: 0x00fbbade UIKit`-[UIControl sendAction:to:forEvent:] + 66
frame #8: 0x00fbbfa7 UIKit`-[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
frame #9: 0x00fba1f8 UIKit`-[UIControl cancelTrackingWithEvent:] + 142
frame #10: 0x00fba0b9 UIKit`-[UIControl cancelTouchTracking] + 65
frame #11: 0x00fbb47b UIKit`-[UIControl _didMoveFromWindow:toWindow:] + 109
frame #12: 0x00f4dedb UIKit`-[UIView(Internal) _didMoveFromWindow:toWindow:] + 479
frame #13: 0x00f4a692 UIKit`-[UIView(Hierarchy) _postMovedFromSuperview:] + 158
frame #14: 0x00f48ee6 UIKit`__UIViewWasRemovedFromSuperview + 140
frame #15: 0x00f48b61 UIKit`-[UIView(Hierarchy) removeFromSuperview] + 176
frame #16: 0x00caaa83 MapKit`MKLongHash + 38425
frame #17: 0x00caa91c MapKit`MKLongHash + 38066
frame #18: 0x00caa620 MapKit`MKLongHash + 37302
frame #19: 0x00caa6b5 MapKit`MKLongHash + 37451
frame #20: 0x00c98370 MapKit
frame #21: 0x000f3615 SubwayDA`-[LocationsMapSubviewController updateMapWithSpan:centered:] + 293 at LocationsMapSubviewController.m:304
frame #22: 0x000f9f5e SubwayDA`-[LocationsViewController DidFCPositionUpdateFinished] + 94 at LocationsViewController.m:570
frame #23: 0x029efdea CoreFoundation`-[NSObject performSelector:] + 58
frame #24: 0x00080904 SubwayDA`-[ModelDataServerSynchronizer callSuccesfulDelegate] + 228 at ModelDataServerSynchronizer.m:1031
frame #25: 0x000807f6 SubwayDA`-[ModelDataServerSynchronizer CallDelegates] + 134 at ModelDataServerSynchronizer.m:1015
frame #26: 0x0007b12f SubwayDA`-[ModelDataServerSynchronizer DidUpdateAllFCPositions:] + 751 at ModelDataServerSynchronizer.m:542
frame #27: 0x00079e1d SubwayDA`-[ModelDataServerSynchronizer requestFinished:] + 429 at ModelDataServerSynchronizer.m:346
frame #28: 0x029efe42 CoreFoundation`-[NSObject performSelector:withObject:] + 66
frame #29: 0x0008b8f6 SubwayDA`-[RestDataService requestFinished:] + 1766 at RestDataService.m:350
frame #30: 0x029efe42 CoreFoundation`-[NSObject performSelector:withObject:] + 66
frame #31: 0x00031eeb SubwayDA`-[ASIHTTPRequest reportFinished] + 171 at ASIHTTPRequest.m:2019
frame #32: 0x029efe42 CoreFoundation`-[NSObject performSelector:withObject:] + 66
frame #33: 0x018389df Foundation`__NSThreadPerformPerform + 254
frame #34: 0x029c294f CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
frame #35: 0x02925b43 CoreFoundation`__CFRunLoopDoSources0 + 243
frame #36: 0x02925424 CoreFoundation`__CFRunLoopRun + 1012
frame #37: 0x02924d84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #38: 0x02924c9b CoreFoundation`CFRunLoopRunInMode + 123
frame #39: 0x02df17d8 GraphicsServices`GSEventRunModal + 190
frame #40: 0x02df188a GraphicsServices`GSEventRun + 103
frame #41: 0x00f12626 UIKit`UIApplicationMain + 1163
frame #42: 0x0000269d SubwayDA`main + 125 at main.m:12

thread #3: tid = 0x2403, 0x980b990a libsystem_kernel.dylib`kevent + 10
frame #0: 0x980b990a libsystem_kernel.dylib`kevent + 10
frame #1: 0x02d97372 libdispatch.dylib`_dispatch_mgr_invoke + 918
frame #2: 0x02d95be1 libdispatch.dylib`_dispatch_mgr_thread + 53

thread #5: tid = 0x2603, 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #0: 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #1: 0x980b61f6 libsystem_kernel.dylib`mach_msg + 70
frame #2: 0x029c210a CoreFoundation`__CFRunLoopServiceMachPort + 186
frame #3: 0x029255d5 CoreFoundation`__CFRunLoopRun + 1445
frame #4: 0x02924d84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #5: 0x02924c9b CoreFoundation`CFRunLoopRunInMode + 123
frame #6: 0x06ef9420 WebCore`_ZL12RunWebThreadPv + 560
frame #7: 0x9b2c3ed9 libsystem_c.dylib`_pthread_start + 335

thread #9: tid = 0x2a03, 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #0: 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #1: 0x980b61f6 libsystem_kernel.dylib`mach_msg + 70
frame #2: 0x029c210a CoreFoundation`__CFRunLoopServiceMachPort + 186
frame #3: 0x029255d5 CoreFoundation`__CFRunLoopRun + 1445
frame #4: 0x02924d84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #5: 0x02924c9b CoreFoundation`CFRunLoopRunInMode + 123
frame #6: 0x01912e30 Foundation`+[NSURLConnection(Loader) _resourceLoadLoop:] + 398
frame #7: 0x018244d6 Foundation`-[NSThread main] + 76
frame #8: 0x01824447 Foundation`__NSThread__main__ + 1258
frame #9: 0x9b2c3ed9 libsystem_c.dylib`_pthread_start + 335

thread #10: tid = 0x2b03, 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #0: 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #1: 0x9b2c5ccf libsystem_c.dylib`_pthread_wqthread + 773

thread #13: tid = 0x2e03, 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #0: 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #1: 0x9b2c5ccf libsystem_c.dylib`_pthread_wqthread + 773

thread #14: tid = 0x2f03, 0x980b8b42 libsystem_kernel.dylib`select$DARWIN_EXTSN + 10
frame #0: 0x980b8b42 libsystem_kernel.dylib`select$DARWIN_EXTSN + 10
frame #1: 0x029567cb CoreFoundation`__CFSocketManager + 939
frame #2: 0x9b2c3ed9 libsystem_c.dylib`_pthread_start + 335

thread #15: tid = 0x3003, 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #0: 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #1: 0x980b61f6 libsystem_kernel.dylib`mach_msg + 70
frame #2: 0x029c210a CoreFoundation`__CFRunLoopServiceMachPort + 186
frame #3: 0x029255d5 CoreFoundation`__CFRunLoopRun + 1445
frame #4: 0x02924d84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #5: 0x02926e81 CoreFoundation`CFRunLoopRun + 129
frame #6: 0x000416ef SubwayDA`+[ASIHTTPRequest runRequests] + 223 at ASIHTTPRequest.m:4793
frame #7: 0x018244d6 Foundation`-[NSThread main] + 76
frame #8: 0x01824447 Foundation`__NSThread__main__ + 1258
frame #9: 0x9b2c3ed9 libsystem_c.dylib`_pthread_start + 335

thread #16: tid = 0x3103, 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #0: 0x980b6c22 libsystem_kernel.dylib`mach_msg_trap + 10
frame #1: 0x980b61f6 libsystem_kernel.dylib`mach_msg + 70
frame #2: 0x029c210a CoreFoundation`__CFRunLoopServiceMachPort + 186
frame #3: 0x029255d5 CoreFoundation`__CFRunLoopRun + 1445
frame #4: 0x02924d84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #5: 0x02924c9b CoreFoundation`CFRunLoopRunInMode + 123
frame #6: 0x00ca086b MapKit`MKNormalizedPointForLayer + 30057
frame #7: 0x018244d6 Foundation`-[NSThread main] + 76
frame #8: 0x01824447 Foundation`__NSThread__main__ + 1258
frame #9: 0x9b2c3ed9 libsystem_c.dylib`_pthread_start + 335

thread #17: tid = 0x3203, 0x980b6c76 libsystem_kernel.dylib`semaphore_timedwait_trap + 10
frame #0: 0x980b6c76 libsystem_kernel.dylib`semaphore_timedwait_trap + 10
frame #1: 0x02d990ad libdispatch.dylib`_dispatch_semaphore_wait_slow + 247
frame #2: 0x02d990fa libdispatch.dylib`dispatch_semaphore_wait + 36
frame #3: 0x0080bac3 CoreLocation`CLClientInvokeCallback(__CLClient*, CLClientEvent, __CFDictionary const*) + 469
frame #4: 0x0080de18 CoreLocation`___CLClientCreateConnection_block_invoke_0 + 307
frame #5: 0x0084183d CoreLocation`__setDefaultMessageHandler_onQueue_block_invoke_0 + 76
frame #6: 0x0083ef01 CoreLocation`CLConnection::handleMessage(CLConnectionMessage*) + 75
frame #7: 0x0083eeb1 CoreLocation`__initializeConnection_nl_block_invoke_0 + 27
frame #8: 0x0083fc07 CoreLocation`__setEventHandler_block_invoke_0 + 286
frame #9: 0x02db4c84 libxpc.dylib`__XPC_CONNECTION_EVENT_HANDLER_CALLOUT__ + 52
frame #10: 0x02db70e3 libxpc.dylib`_xpc_connection_recv_message + 650
frame #11: 0x02db7b87 libxpc.dylib`_xpc_connection_wakeup_recv + 199
frame #12: 0x02db7a2e libxpc.dylib`_xpc_connection_wakeup2 + 1598
frame #13: 0x02db7c59 libxpc.dylib`_xpc_connection_wakeup + 101
frame #14: 0x02d9a450 libdispatch.dylib`_dispatch_source_invoke + 719
frame #15: 0x02d96cc4 libdispatch.dylib`_dispatch_queue_invoke + 66
frame #16: 0x02d96e50 libdispatch.dylib`_dispatch_queue_drain + 272
frame #17: 0x02d96cb4 libdispatch.dylib`_dispatch_queue_invoke + 50
frame #18: 0x02d96e50 libdispatch.dylib`_dispatch_queue_drain + 272
frame #19: 0x02d96cb4 libdispatch.dylib`_dispatch_queue_invoke + 50
frame #20: 0x02d96e50 libdispatch.dylib`_dispatch_queue_drain + 272
frame #21: 0x02d96cb4 libdispatch.dylib`_dispatch_queue_invoke + 50
frame #22: 0x02d96402 libdispatch.dylib`_dispatch_worker_thread2 + 247
frame #23: 0x9b2c5b24 libsystem_c.dylib`_pthread_wqthread + 346

thread #18: tid = 0x3303, 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #0: 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #1: 0x9b2c5ccf libsystem_c.dylib`_pthread_wqthread + 773

thread #19: tid = 0x3403, 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #0: 0x980b902e libsystem_kernel.dylib`__workq_kernreturn + 10
frame #1: 0x9b2c5ccf libsystem_c.dylib`_pthread_wqthread + 773 
```

(lldb)

任何追踪它的帮助或正在发生的事情的线索将不胜感激？

提前致谢，

# javascript - 在 css / javascript 中切换图像 onClick 的去饱和度

> ID：12262971
> 
> 赞同：1
> 
> 时间：2012-09-04T11:54:16.207
> 
> 标签：javascript, jquery, css, prototype, image

每个函数都有更多代码，但这些是我认为与我的问题有关的主要内容......这是来自一个家伙库，用于在翻转时对图像进行去饱和处理。

如何将其更改为单击而不是鼠标悬停/鼠标悬停？这是他的代码...

```
jQuery(function($){
$cloned.closest(".DesaturateDiv").bind("mouseenter mouseleave",desevent);
}

  function desevent(event) 
  {
    if (event.type == 'mouseenter')
         $(".des.color", this).fadeOut(275);

    if (event.type == 'mouseleave')
        $(".des.color", this).fadeIn(200);
  } 
```

我已经尝试将 if 语句更改为 jquery 切换以及将顶行从 .bind("mouseenter mouseleave", desevent) ... 更改为 .bind("toggle", desevent) ，但它仍然没有工作。我的问题基本上是如何将 mouseenter 和 mouseleave 替换为 onClick，以便图像在 onClick 上去饱和，然后在 onClick 上再次饱和。这是我输入的切换代码，而不是上面的两个 if，只是以防万一。

```
$('.DesaturateDiv').toggle(function() {

$(".des.color", this).fadeOut(275);

}, function() {
$(".des.color", this).fadeIn(200);
}); 
```

另外，在相关说明中，您可以使用 css3 执行此操作吗？这是用css3去饱和图像的代码......

```
 img.desaturate{
filter: grayscale(100%);
-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%);
-ms-filter: grayscale(100%); -o-filter: grayscale(100%);
filter: url(desaturate.svg#greyscale);
filter: gray;
-webkit-filter: grayscale(1);
} 
```

所以我的问题是如何做到这一点？

我试过 img.desaturate:active{} 但它没有用？

编辑：我试过这个并认为这些方面的东西是我需要的，但我确定语法不正确，帮助？

```
 function desevent(event) 
  {
    i = 0;

    if( i = 0 ){
    if (event.type == 'mousedown')
         $(".des.color", this).fadeOut(275);
         i = 1;
    }

    if( i = 1 ){
    if (event.type == 'mousedown')
        $(".des.color", this).fadeIn(200);
                     i = 0;
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:04:05.833

只需将特定类添加到单击的元素即可。

```
.desaturate{
    transition-duration: 400ms; //and other prefixes
}
.desaturate.active{
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%); -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%); -o-filter: grayscale(100%);
    filter: url(desaturate.svg#greyscale);
    filter: gray;
    -webkit-filter: grayscale(1);
} 
```

# html - HTML/CSS/SVG：IE7/8 中的 SVG 背景图片

> ID：12262973
> 
> 赞同：0
> 
> 时间：2012-09-04T11:54:19.320
> 
> 标签：html, css, internet-explorer-8, svg, background-image

我制作了一个 svg 图像，用作背景图像。我不能在 IE8 及更低版本中工作（如预期的那样），我想我可以使用类似的东西：http: [//twostepmedia.co.uk/svgeezy/](http://twostepmedia.co.uk/svgeezy/)或[http://code.google.com/p/svgweb/](http://code.google.com/p/svgweb/) . 但是，这些都不支持 SVG 作为背景图像/背景，只有 IMG 和 Object 等。

代码：

```
background:url('img/bck_hero.svg'); 
```

如何在 IE8/7 中获得 SVG 作为背景或拥有后备图像？有没有可以做到这一点的javascript库？

非常感谢，

哈雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:41:24.647

一种方法是使用 javascript 检测对 svg 的支持，然后根据其设置不同的样式。

如果你使用[modernizr](http://modernizr.com/)，你可以在你的样式表中这样做：

```
#myElm.svg { background:url('img/bck_hero.svg'); }
#myElm.no-svg { background:url('img/bck_hero.png'); } 
```

# oracle - oracle plsql：调用过程时检索运行时参数值

> ID：12262974
> 
> 赞同：5
> 
> 时间：2012-09-04T11:54:23.277
> 
> 标签：oracle, stored-procedures, parameters, plsql, oracle10g

当我调用一个过程时，我需要一个通用的方法来获取运行时参数（值）的列表。我需要类似于 $$PLSQL_UNIT 的东西，它返回正在运行的过程的名称。(plsql Oracle 10g)

例如看这个示例程序：（它只是打印自己的名称和参数）

```
CREATE OR REPLACE PROCEDURE  MY_PROC(ow in varchar2, tn IN varchar2)
 IS

BEGIN
     dbms_output.put_line('proc_name: '||$$PLSQL_UNIT||' parameters: '|| ow||' '||tn  );

    EXCEPTION
    WHEN OTHERS THEN 
       DBMS_OUTPUT.PUT_LINE('ERRORE: ' ||SQLERRM);

END MY_PROC;
/ 
```

运行过程产生以下输出：

```
SQL> 
  1   BEGIN
  2     IBAD_OWN.MY_PROC('first_par', 'second_par');
  3   END;
  4  /

proc_name: MY_PROC parameters: first_par second_par

PL/SQL procedure successfully completed. 
```

我不满意，因为我无法在所有程序中复制和粘贴，因为我必须对每个程序进行硬编码以设置其正确的参数变量。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:25:26.777

在 Oracle PL/SQL 中动态检索传递给过程的参数值是不可能的。该语言根本不是为处理这种操作而设计的。

顺便说一句，在位于包内的过程中，`$$PLSQL_UNIT`只会返回包的名称。我发现最好在每个包含过程名称的过程中定义一个一致命名的常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:34:36.037

当我想要与您相同的功能时，我没有找到任何好的内置解决方案。

我所做的是：编写了修改函数/过程/包的原始主体的 DB 级触发器。此触发器在“开始”从“user_arguments”动态生成的代码之后立即添加。

另外，在此之后，我在此触发器中包含代码，该代码在发生异常时记录对 procs 的调用。

另外，您可以跟踪 procs 调用以及更多有趣的事情。

但是这个解决方案只适用于预生产，因为性能会急剧下降。

PS。对不起，我的英语不好。

# java - 捕获服务器响应代码

> ID：12262976
> 
> 赞同：1
> 
> 时间：2012-09-04T11:54:33.727
> 
> 标签：java, api, sms, response

我正在尝试使用[此站点](http://ubaid.tk/)上提供的 API 从我的 Java Web 应用程序发送 SMS 。

我无法收到其教程中提到的响应代码，可以在 [此处](http://ubaid.tk/api-usage/)找到。我正在为我的项目使用 Java 版本的代码。任何人都可以提供解决方案吗？

响应码如下：

```
1：发送短信  
-1：服务器错误  
-2 : 无效的用户名  
-3 : 无效的消息文本  
-4 : 登录失败  
-5：IP 被封锁

```

代码如下：

```
import java.net.*;
import java.io.*;

public class SmsSender
{
  //Replace your way2sms username and password below
  static final String _userName = "your way2sms username";
  static final String _password = "your way2sms password";
  static final String _url = "http://ubaid.tk/sms/sms.aspx";
  static final String charset = "UTF-8";

  //to build the query string that will send a message
  private static String buildRequestString(String targetPhoneNo, String message) throws   
  UnsupportedEncodingException
  {
    String [] params = new String [5];
    params[0] = _userName;
    params[1] = _password;
    params[2] = message;
    params[3] = targetPhoneNo;
    params[4] = "way2sms";

    String query = String.format("uid=%s&pwd=%s&msg=%s&phone=%s&provider=%s",
    URLEncoder.encode(params[0],charset),
    URLEncoder.encode(params[1],charset),
    URLEncoder.encode(params[2],charset),
    URLEncoder.encode(params[3],charset),
    URLEncoder.encode(params[4],charset)
    );
    return query;
  }

  public static void sendMessage(String reciever, String message) throws Exception
  {
    //To establish the connection and perform the post request
    URLConnection connection = new URL(_url + "?" +  
    buildRequestString(reciever,message)).openConnection();
    connection.setRequestProperty("Accept-Charset", charset);

    //This automatically fires the request and we can use it to determine the response status
    InputStream response = connection.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(response));
    System.out.println(br.readLine());
  }

  public static void main(String [] args)
  throws Exception
  {
    String testPhoneNo = "9876543210";
    String testMessage = "Sending Messages From java is not too hard";

    sendMessage(testPhoneNo,testMessage);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:52:19.880

```
InputStream response = connection.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(response));
String responseString = br.readLine();
Integer responseInt = Integer.valueOf(responseString).intValue();
switch(responseInt)
{
  case 1 : //SMS sent
  break;
  case -1 : // Server error
  break;
.
.  // put check conditions similarly
.
} 
```

# xamarin.ios - 未定义的“___divmodsi4”在发布模式下将 Monotouch 项目与静态库链接

> ID：12262977
> 
> 赞同：1
> 
> 时间：2012-09-04T11:54:43.470
> 
> 标签：xamarin.ios, linker-errors

我有一个 Monotouch 项目链接到一个包含 C++ 模块的静态库。
Monotouch 版本：3.0.3.5
XCode 版本：4.4.1
C/C++ 编译器：Apple LLVM 4.0

在调试模式下为 iOS 模拟器和 iOS 设备构建项目时，一切正常 - 应用程序已链接并运行。但是，在为 iOS 设备构建发布配置时，会出现以下错误：

```
 Undefined symbols for architecture armv7: "___divmodsi4" 
```

静态库代码中的以下行以某种方式导致了问题：

```
 int number_of_buckets = num_samples / window_samples_step; 
```

如果将此行修改如下，问题就会消失：

```
 int number_of_buckets = (int)((float)num_samples / (float)window_samples_step); 
```

您是否有任何想法如何在不进行上述修改的情况下解决问题？

谢谢，乌里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:37:52.663

您需要将应用程序的部署目标（在项目的选项中，构建/iPhone 应用程序页面）设置为至少 5.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:08:24.387

这发生在构建结束时，通常取决于它的原始参数。尝试比较您的**Release**和**Debug**版本之间的选项并检查：

*   您在两个配置中使用相同的**附加 mtouch 参数；**

*   您在两种配置上都使用相同的编译器**Mono AOT 与 LLVM 编译器**；

*   您在两种配置上都使用相同的架构，**ARMv6 与 ARMv7 。**

否则，为**调试**和**发布**版本附加（例如，最好是[错误报告](http://bugzilla.xamarin.com)或 pastebin）完整的构建日志（来自MonoDevelop 的**Error Pad的****构建输出**） 。

 ******为了更有帮助，在重新构建之前将“-v -v -v”添加到**Additional mtouch 参数中。**这将增加每个步骤的详细程度（细节）。******

# objective-c - NSNumberFormatter 货币删除尾随零

> ID：12262979
> 
> 赞同：3
> 
> 时间：2012-09-04T11:54:54.460
> 
> 标签：objective-c, currency, nsnumberformatter

我想格式化像 45.50 这样的价格，但我不想要像 45.00 这样的价格。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-25T08:34:15.607

我是这样做的：

```
NSNumber *amount = @(50.5);
NSNumberFormatter *currencyFormat = [[NSNumberFormatter alloc] init];
[currencyFormat setNumberStyle:NSNumberFormatterCurrencyStyle];
[currencyFormat setLocale:[NSLocale currentLocale]];

if (trunc(amount.floatValue) == amount.floatValue) {
    [currencyFormat setMaximumFractionDigits:0];
} else {
    [currencyFormat setMaximumFractionDigits:2];
}

NSLog(@"%@", [currencyFormat stringFromNumber:amount]); 
```

我喜欢这个解决方案的简单性。输出将是`$50.50`. 而对于`amount = @(50.0)`将是`$50`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:31:35.593

如果你只是在一个非常快速和肮脏的黑客之后。. .

```
// Get the price as a string
NSString *priceString = [NSString stringWithFormat:@"%2.2f", priceFloat];

// Trim if needed
if ([priceString hasSuffix:@".00"])
    priceString = [priceString substringToIndex:priceString.length-3]; 
```

* * *

注意 此方法不适用于本地化内容，即在欧洲，小数点分隔符是逗号，因此您将看到 45,00，而不是 45.00。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:08:06.743

做这个：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:2];
[formatter setRoundingMode: NSNumberFormatterRoundUp];
NSString *numberString = [formatter stringFromNumber:[NSNumber numberWithFloat:22.368511]];
NSLog(@"Result...%@",numberString);//Result 22.37 
```

现在像这样跟踪不需要的：

```
NSString* CWDoubleToStringWithMax2Decimals(double d) {
 NSString* s = [NSString stringWithFormat:@"%.2f", d];
 NSCharacterSet* cs = [NSCharacterSet characterSetWithCharacterInString:@"0."];
 NSRange r = [s rangeOfCharacterInSet:cs
                             options:NSBackwardsSearch | NSAnchoredSearch];
 if (r.location != NSNotFound) {
  s = [s substringToIndex:r.location];
 }
 return s;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:08:41.303

```
float myOriginalPrice = 45.50;
    CGFloat mod = fmod(myOriginalPrice, 1);
    if (mod == 0){
        mod = (int)myOriginalPrice;
        NSLog(@"%.0f", mod);

    } else {
         NSLog(@"%f", myOriginalPrice);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T12:13:16.063

```
 INPUT : 12.74 OR 12.745

NSString *inputString=[NSString string];

inputString=[NSString stringWithFormat:@"%.4g",12.74f];

NSLog(@"inputString : %@ \n\n",inputString); 
```

输出：

```
 inputString : 12.74 
INPUT : 12.00 OR 12.000

  NSString *inputString=[NSString string];

 inputString=[NSString stringWithFormat:@"%.4g",12.00f];

 NSLog(@"inputString : %@ \n\n",inputString); 
```

输出：

inputString：12 更新答案：对于他的评论问题

输入：12.30

我在这里假设他将在一些 UI 中显示这个值，比如 UILabel，......不是为了计算。

```
 NSString *inputString=[NSString string];

 inputString=[NSString stringWithFormat:@"%.4g",12.30f];

 NSArray *arr=[inputString componentsSeparatedByString:@"."];

 if ([arr count] >= 2) {

    NSString *secondStr=[arr objectAtIndex:1];

if ([secondStr length]<2) {

    inputString=[NSString stringWithFormat:@"%@0",inputString];
}
} 
```

NSLog(@"inputString : %@ \n\n",inputString); 输出：

输入字符串：12.30

# javascript - 使用 jQuery 首次单击后如何停止函数传播

> ID：12262980
> 
> 赞同：0
> 
> 时间：2012-09-04T11:55:01.277
> 
> 标签：javascript, jquery, click, stoppropagation

我有一些点击功能......整个动作都很好，但如果我快速双击呼叫按钮，一些元素会生成两次。你能告诉我第一次点击后如何停止函数传播吗？非常感谢帮助，这是我的代码：

```
$('#start_panel ul li').click(function(event){
    if($(this).hasClass('eng')){
       ...
    }
    else if($(this).hasClass('ger')){
       ...
    }
    else if($(this).hasClass('pln')){
       ...
    }
    event.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:56:21.937

```
var clicked = false;
$('#start_panel ul li').click(function(event){
   if (clicked) return;
   clicked = true; 
```

或者使用[one](http://api.jquery.com/one/)函数（略有不同：现在*每个 li 元素*只处理一次单击）：

```
 $('#start_panel ul li').one('click', function(event){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:58:44.230

```
 var i=0;
$('#start_panel ul li').click(function(event){
 if(i==1){
  i=0;
 return false;
  }
if($(this).hasClass('eng')){
   ...
}
else if($(this).hasClass('ger')){
   ...
}
else if($(this).hasClass('pln')){
   ...
}
 i++;

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:59:03.383

清除以前的请求使用`Stop(true,true)`

```
$('#start_panel ul li').stop(true,true).click(function(event){
    if($(this).hasClass('eng')){
        ...
    }
    else if($(this).hasClass('ger')){
       ...
    }
    else if($(this).hasClass('pln')){
       ...
    }
    event.stopPropagation();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:57:04.147

试试这个：

```
var myClicker = function(event){
    var self = event.currentTarget;
    if($(self).hasClass('eng')){
       ...
    }
    else if($(self).hasClass('ger')){
       ...
    }
    else if($(self).hasClass('pln')){
       ...
    }
    $(self).one('click', myClicker);
});
$('#start_panel ul li').one('click', myClicker); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T12:02:16.837

您可以在第一次单击后取消绑定单击事件：

```
$('#start_panel ul li').click(function(event){
    $(this).unbind('click'); 
    if($(this).hasClass('eng')){
       ...
    }
    else if($(this).hasClass('ger')){
       ...
    }
    else if($(this).hasClass('pln')){
       ...
    }
    event.stopPropagation();
}); 
```

# ios - UIButton 的 uiappearance 也会更改 UIBarButton 图像吗？

> ID：12262985
> 
> 赞同：3
> 
> 时间：2012-09-04T11:55:37.653
> 
> 标签：ios, objective-c, uibutton, uibarbuttonitem, uiappearance

我正在使用这段代码

```
[[UIButton appearance] setBackgroundImage:[UIImage imageNamed:@"button.png"] forState:UIControlStateNormal]; 
```

改变`UIButton`s 的外观。这很好用并且不会影响`UIBarButtonItem`s 除了其中一个（唯一不是自动生成的“后退”按钮）并且仅在最初。当您触摸 barbutton 时，它会恢复为没有背景图像。

有问题的按钮是 a`UIBarButton`而不是 a `UIButton`（除非两者都是，在这种情况下，其他`UIBarButton`s 也应该受到影响）。

一个线索可以是另一个`UIBarButton`不受影响的都是由我在情节提要中生成而不是由我创建的。

这一定是api中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T08:44:47.513

使用`setTintColor`. 是一个从那时起可能已经修复的 api 错误

# ios - 如何随机化从我的字典 plist 中提取的问题

> ID：12262987
> 
> 赞同：2
> 
> 时间：2012-09-04T11:55:57.787
> 
> 标签：ios, dictionary, plist

嘿，伙计们，有什么想法可以随机化我从 -plist 文件中提取的问题吗？

```
-(NSUInteger)nextQuestionID:(NSUInteger)question_number{
return (question_number>=[self.questions count]-1) ? 0 : (question_number+1);
return 0;

}

-(NSDictionary*) getQuestion:(NSUInteger)question_number{
if (question_number>=[self.questions count]) question_number = 0;
return [self.questions objectAtIndex:question_number];
return NULL;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:01:32.407

要获得一个随机整数，我建议使用`arc4random`函数，这里有一些代码可以做到这一点：

```
int randomInt = arc4random() % questionNumber;
return [self.questions objectAtIndex: randomInt]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:02:28.660

您可以使用该`arc4random_uniform(upper_bound)`功能。该参数是您的随机数的上限。

一个例子：

```
int index = arc4random_uniform([self.question count]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:02:09.440

`question_number = arc4random() % self.questions.count;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:02:19.500

将问题编号设置为随机数

替换函数

```
-(NSDictionary*) getQuestion:(NSUInteger)question_number{
   if (question_number>=[self.questions count]) question_number = 0;
   question_number = arc4random()%[self.questions count];// changes made here
   return [self.questions objectAtIndex:question_number];
   return NULL;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T12:06:11.527

随机整数：

```
srand(time(nil));
for (int i = 0; i < 100; i++) {
    NSLog(@"random number between 72 and 96 : %d", rand() % (96 - 72) + 72);
} 
```

**更新**

并针对您的具体情况：

```
- (NSUInteger)nextQuestionID {
    srand(time(nil));
    return rand() % [self.questions count];
}

- (NSDictionary*)getQuestion {
    return [self.questions objectAtIndex:[self nextQuestionID]];
} 
```

**更新#2**

测试以下循环两次、三次或更多次并比较输出：

```
srand(time(nil));
for (int i = 0; i < 10; i++) {
    NSLog(@"random number : %d", rand() % 89 + 10);
} 
```

你应该得到 10 到 99 之间的 10 个随机数，我已经在真实设备上测试过它，而不是在模拟器上，但它也应该在模拟器上工作。

**如果您总是得到相同的结果，请告诉我。**

# android - 如何在列表视图中每行右侧有 4 个图标

> ID：12262989
> 
> 赞同：2
> 
> 时间：2012-09-04T11:55:59.913
> 
> 标签：android

我想在列表视图的每一行的右侧设置 3 个图标。我正在制作购物应用程序，当用户在列表视图中选择任何产品时，我想在其中选择任何产品，这样他/她就可以以 3 种方式查看产品，就像用户选择图标一样1 所以用户可以在网格视图中看到产品，如果用户选择图标 2 所以用户可以在图像切换器中看到产品，在图标 3 上用户可以在列表视图中看到产品实际上我希望用户在 3 视图中看到产品。当点击图标时下一个活动打开就像用户选择网格视图的图标一样，所以下一个活动将打开网格视图。这是我的代码

```
public class ListViewSupplementActivityActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
this.setContentView(R.layout.listlayout);
ListView view = (ListView) findViewById(R.id.list);
view.setAdapter(new CustomImageListAapter(this));

view.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
if(position ==0)
{    
Intent ii = new Intent(ListViewSupplementActivityActivity.this,SingleListItem.class);

ii.putExtra("operation", position);
startActivity(ii);                                                           
}
if(position ==1){    
Intent in = new Intent(ListViewSupplementActivityActivity.this,Test.class);

in.putExtra("operation", position);
startActivity(in);
}
if(position == 5){
Intent in2= new               Intent(ListViewSupplementActivityActivity.this,FullImageActivity.class);       
Bundle bundle = new Bundle();
bundle.putInt("operation", position);
in2.putExtras(bundle);   
startActivity(buse); }

}  

});
}
} 
```

**这是自定义适配器类**：

```
public class CustomImageListAapter extends BaseAdapter {

private int[] images = {R.drawable.autumnwalk, R.drawable.bridge,R.drawable.butterfly,               
R.drawable.cheetah, R.drawable.cloud, R.drawable.su, R.drawable.wi,
R.drawable.rocksculpture, R.drawable.skyatsunset, R.drawable.s,
R.drawable.smoke, R.drawable.tulips};

private String[] imageDesc = { "Autumn Walk", "Bridge",
"Butterfly", "Cheetah", "Cloud", "Highway", "Martini", 
"Rock Sculpture", "Sky at Sunset", "Sliced Orange", "Smoke",
"Tulips"};

private Context ctx = null;

public CustomImageListAapter(Context context) {
this.ctx = context;
}

public int getCount() {
return images.length;
}

public Object getItem(int arg0) {
return null;
}

public long getItemId(int position) {
return 0;
}
public View getView(int arg0, View arg1, ViewGroup arg2) {

ImageView imgView = new ImageView(this.ctx);
imgView.setScaleType(ScaleType.FIT_CENTER);
imgView.setPadding(8, 8, 8, 8);
imgView.setImageResource(images[arg0]);
imgView.setAdjustViewBounds(Boolean.TRUE);
imgView.setContentDescription(imageDesc[arg0]);
imgView.setMaxHeight(200);
imgView.setMaxWidth(200);

TextView tv = new TextView(this.ctx);
tv.setText(imageDesc[arg0]);
tv.setMaxHeight(100);
tv.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
tv.setGravity(Gravity.CENTER);

LinearLayout layoutView = new LinearLayout(this.ctx);
layoutView.setOrientation(LinearLayout.HORIZONTAL);
LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(150, 150);
layoutView.addView(imgView, params1);
LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(
LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
layoutView.addView(tv, params2);

return layoutView;}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:01:24.883

为列表项行定义和使用 xml 布局文件。该行将在右侧包含 4 个**ImageView以及任何其他视图。**并将其用作每一行的布局。并且根据您在`CustomAdapter`班级中的位置，您可以获得对每一行的引用。

`getView()`现在，为**CustomAdapter**中的列表项行扩展此 xml 布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:51:46.303

为了节省以编程方式执行此操作的时间，您可以执行以下操作：

*   **创建 list_view_item xml**文件（代表每个视图项）。要进行灵活对齐，您应该使用**`RelativeLayout`**.
*   ****在您的数组适配器中****扩展**上述 xml 布局**

 ****(1)**`list_view_item.xml`**为项目布局创建：

*   关键工作是将第一项设置为父视图的右侧：`android:layout_alignParentRight="true"`

*   然后以下各项按上一项对齐：`android:layout_alignParentLeft="@+id/id_of_prev_item"`

**（已编辑 3 张图片：）**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/img1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" />

    <ImageView
        android:id="@+id/img2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="@+id/img1" />

    <ImageView
        android:id="@+id/img3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="@+id/img2" />

    <TextView
        android:id="@+id/description"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="@+id/img3"
        android:fadingEdge="vertical" />

</RelativeLayout> 
```

(2) 膨胀项目布局`CustomImageListAapter`：

建议：将您的`CustomImageListAapter`类从**`ArrayAdapter<T>`**更具体的数据项使用扩展，并使您的代码更全面。

```
public class CustomImageListAapter extend ArrayAdapter<YourDataItem>
{
    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        int item_view_id = R.layout.list_view_item;

        LinearLayout holderView = new LinearLayout(getContext());
        String inflaterName = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(inflaterName );
        inflater.inflate(item_view_id, holderView, true);

        //YourDataItem: is your class represent each row on your database
        YourDataItem item = getItem(position);

        //TODO: do your stuff of works with your view item and data here

        return holderView;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:06:33.490

您必须为列表查看器创建自定义视图，或者您可以简单地为此创建一个 xml 文件，然后在 Adapter 类中对其进行膨胀。

像这里我已经创建了一个带有两个 TextViews 的 xml 文件。

```
public View getView(int position, View convertView, ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.two_text, null);

                holder = new ViewHolder();

                holder.text1 = (TextView) convertView

                .findViewById(R.id.TextView01);

                holder.text2 = (TextView) convertView

                .findViewById(R.id.TextView02);

                convertView.setTag(holder);

            } else {

                holder = (ViewHolder) convertView.getTag();

            }

            holder.text1.setText(CountriesList.abbreviations[position]);

            holder.text2.setText(CountriesList.countries[position]);

            return convertView;

        } 
```****

# javascript - javascript在html实体条目问题后将下一个字母大写

> ID：12262990
> 
> 赞同：0
> 
> 时间：2012-09-04T11:56:03.477
> 
> 标签：javascript

我有一个表格，当用户输入他们的名字时，它会自动将每个字符的第一个字符大写，但是当用户的名字中有一个特殊字符（例如“è”）时，然后代码会在其后的下一个字符大写。

例如：

Joesph Bloggs 工作正常，但如果我输入 Joèsph Bloggs，它实际上会将其输出为 JoèSph Bloggs。

请注意名称中间的大写字母 S。我目前使用的代码如下，任何想法如何防止这种情况？

谢谢

```
 capFirstLetters= function(str){
    return  str.toLowerCase().replace(/\b[a-z]/g, function(letter) {return letter.toUpperCase();});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:04:13.473

这是因为 JS 正则表达式不支持 unicode，很遗憾。一个稍微好一点的方法可能是：

```
capFirstLetters= function(str){
    return  str.toLowerCase().replace(/(^|\s)[\S]/g, function(letter) {
        return letter.toUpperCase();
    });
} 
```

此版本的正则表达式将匹配一个空白字符或字符串的开头，后跟一个非空白字符。

另请注意，我不知道如果人们使用非扩展拉丁名称（例如涉及中文或日文字符的名称），这里的行为会是什么。对于从右到左阅读的语言（例如希伯来语），它也不太可能正常工作。

这种事情很难做到正确，使用两个单独的字段作为名字和姓氏可能更有意义——或者简单地让用户输入保持原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:59:07.367

在你的正则表达式中使用单词边界，例如'\b'：

[http://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html)

# mysql - spring 2.5 hibernate mysql - 两个数据库事务

> ID：12262992
> 
> 赞同：-1
> 
> 时间：2012-09-04T11:56:05.530
> 
> 标签：mysql, spring, hibernate, transactions

我的应用程序是一个连接到 mysql 数据库（数据库名称=mydb）的 spring 2.5 Hibernate 应用程序。该应用程序托管在 Tomcat 6 上 - 在 java 6 上运行。我有一个用例，管理员可以编辑用户的个人资料。我计划将这些编辑的历史记录存储在一个单独的数据库中（在同一个 mysql 服务器上 - 数据库 namne=archivedb）。在这种情况下，编辑用户功能跨越同一个 mysql 数据库中的两个数据库。我需要使用 JTA 事务吗？IF JTA，哪个实现是最好的。我更喜欢开源的。

桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:30:06.320

关于这个，springsource 上有一篇很好的[文章。](http://blog.springsource.org/2011/08/15/configuring-spring-and-jta-without-full-java-ee/)但是请注意，它适用于 Spring 3.0（因为示例使用基于 java 的配置），但您很可能将其转换为 Spring 2.5 的基于注释/xml 的设置。

这里的关键是您使用 Spring 的 JtaTransactionManager 委托给嵌入式 XA 事务管理器。本文使用**Atomikos**，它是一种开源嵌入式 XA 事务管理器（请参阅“使用嵌入式事务管理器”部分）。

如您所见，它并没有那么复杂，Spring 为您做了很多抽象。但是，它对您的解决方案造成了相当大的复杂性，因此我将对您的架构进行另一次迭代，并评估分布式 (XA) 事务支持的好处是否值得您引入额外的复杂性。也许您真的不需要针对这个用例的完整 XA/两阶段提交事务？

# php - PDO::FETCH_OBJECT 错误

> ID：12262999
> 
> 赞同：4
> 
> 时间：2012-09-04T11:56:29.467
> 
> 标签：php, pdo

`PDO::FETCH_OBJECT`我的论点有问题。我想获取一个对象而不是一个数组，但是当我尝试这个时：

```
try {
    $conn = new PDO('mysql:host=localhost;dbname=washngo', $config['DB_USERNAME'], $config['DB_PASSWORD']); 
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); //Fetch errors by default ( display any errors during the development process )

    $stmt = $conn->prepare('SELECT * FROM news');

    $stmt->execute();

    while($row = $stmt->fetch(PDO::FETCH_OBJECT)) { //By default, it fetch an array. The "PDO::FETCH_OBJECT" argument allows us to fetch an object
        print_r($row);
    }

} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

我明白了

> 致命错误：`FETCH_OBJECT`第 18 行 index.php 中未定义的类常量“”。

当我尝试让`fetch()`默认情况下（不带`PDO::FETCH_OBJECT()`）时，它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T11:59:18.967

正确的不是`PDO::FETCH_OBJECT`但`PDO::FETCH_OBJ`