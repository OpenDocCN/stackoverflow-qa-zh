# StackOverflow 问答 10566000-10566999

# directory-structure - 如何从 mysite.com 创建 URL“m.mysite.com”？

> ID：10566001
> 
> 赞同：0
> 
> 时间：2012-05-12T17:36:51.870
> 
> 标签：directory-structure, subdirectory

我相信一个子目录是 mysite.com/m/index.htm。我希望前面的“m”显示为“m.mysite.com”。

我怎么称呼这种类型的目录？

我目前有一个用于移动设备的样式表，它只是位于我的根目录中，当有小屏幕的人访问我的网站时，它与媒体查询一起使用。移动优化表使用主 index.htm 页面。

当有人从移动设备访问时，如何更改目录中的文件夹以显示“m.mysite.com”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:38:58.250

它根本不是目录。首先，您需要为 m.example.com 添加一个 DNS 条目，然后您需要配置您的 Web 服务器软件以从您希望的目录中为该主机名提供请求。

你如何做到这一点取决于你的主机、你的网络服务软件以及你重新配置的难易程度。这是一堆组合，您还没有提供足够详细的信息供任何人回答。

# java - “特设”词法分析器

> ID：10566002
> 
> 赞同：0
> 
> 时间：2012-05-12T17:37:01.777
> 
> 标签：java, lexical-analysis

因此，对于一个项目，我正在尝试为从文件中读取的假编程语言创建一个简单的词法分析器。本周早些时候我问了一个问题，询问我如何实现这样的程序，然后回答告诉我：创建一个输入缓冲区和两个输出缓冲区。初始化两个循环并增加它们，直到我找到一个令牌的开始。一旦我找到开始，增加第二个循环直到我找到一个空格或符号，然后使用 case 语句输出到两个输出文件，然后使外部循环等于内部循环并继续扫描。我做了一些研究，这种方法类似于循环和切换方法或“ad hoc”方法。

```
import java.io.*;

public class Lex {

    public static boolean contains(char[] a, char b){
        for (int i = 0; i < a.length; i++) {
            if(b == a[i])
                return true;
        }
        return false;
    } 
    public static void main(String args[]) throws FileNotFoundException, IOException{

        //Declaring token values as constant integers.
        final int T_DOUBLE = 0; 
        final int T_ELSE = 1;
        final int T_IF = 2; 
        final int T_INT = 3;
        final int T_RETURN = 4; 
        final int T_VOID = 5;
        final int T_WHILE = 6; 
        final int T_PLUS = 7;
        final int T_MINUS = 8; 
        final int T_MULTIPLICATION = 9;
        final int T_DIVISION = 10; 
        final int T_LESS = 11;
        final int T_LESSEQUAL = 12; 
        final int T_GREATER = 13;
        final int T_GREATEREQUAL = 14; 
        final int T_EQUAL = 16;
        final int T_NOTEQUAL = 17;
        final int T_ASSIGNOP = 18; 
        final int T_SMEICOLON = 19;
        final int T_PERIOD = 20; 
        final int T_LEFTPAREN = 21;
        final int T_RIGHTPAREN = 22; 
        final int T_LEFTBRACKET = 23;
        final int T_RIGHTBRACKET = 24; 
        final int T_LEFTBRACE = 25;
        final int T_RIGHTBRACE = 26; 
        final int T_ID = 27;
        final int T_NUM = 28;
        char[] letters_ = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D',
            'E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','_'};
        char[] numbers = {'0','1','2','3','4','5','6','7','8','9'};
        char[] symbols = {'+','-','*','/','<','>','!','=',':',',','.','(',')','[',']','{','}'};
        FileInputStream fstream = new FileInputStream("src\\testCode.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        BufferedWriter bw1 = new BufferedWriter(new FileWriter(new File("src\\output.txt"), true));
        BufferedWriter bw2 = new BufferedWriter(new FileWriter(new File("src\\output2.txt"), true));
        String scanner;String temp = "";
        int n = 0;
        while((scanner = br.readLine()) != null){
            for (int i = 0; i < scanner.length(); i++) {
                for (int j = 0; j < scanner.length(); j++) {
                    if(contains(letters_,scanner.charAt(i)) || contains(numbers,scanner.charAt(i)) || contains(symbols,scanner.charAt(i))){
                        j++;
                        n++;
                        if(scanner.charAt(j) == ' ' || scanner.charAt(j) == '\n' || scanner.charAt(j) == '\t'){

                        }
                    }

                }

            }
        }

        in.close();

    }

} 
```

我的问题是如何在找到空格或符号后确定要分配单词的标记。我可以将每个字符放在字符串中的 ws 和符号之前并像这样进行比较吗？我尝试过类似的方法，但它把我的整个输入文件写入了字符串，所以我的标记在我的 switch 语句中不匹配。同样使用这种方法，我怎样才能安全地忽略评论和评论块，因为它们不应该被标记化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:04:29.863

构建词法分析器的经典方法是通过循环内的 switch 语句。基本思想是只处理每个字符一次，而不是重新扫描它。案例 A 到 Z 和 a 到 z 可以开始一个标识符，因此这些案例必须吸收所有可能的标识符字符，直到你找到一个不是的，将它们组装成一个标识符标记，并将 IDENTIFIER 返回给调用者。类似的情况 0 到 9 可以开始一个数字，所以你输入数字并返回 INTEGER 或 DOUBLE 或任何它。空格、制表符、换行符、换页符等都是空格，因此请吸收所有空格并继续外循环而不返回。所有其他的都是标点符号，所以你把它们吸起来，从两个字符的字符中挑选出一个字符的字符，通常返回字符值本身来返回一个字符的字符值，以及其他人的特殊令牌值。不要忘记正确处理 EOF :-) 调整案例和规则以适合您正在分析的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:15:34.030

这取决于您需要词法分析器有多复杂。如果您像现在一样在空格上拆分，您可以简单地将每个词位与一系列正则表达式进行比较，看看哪个匹配它。这是一种简单的方法，效率不高，但这可能不会影响您的决定。

“真正的”词法分析器通常用作有限自动机。如果您知道如何构建一个可以识别正则表达式的自动机，您可以将其中的几个组合成一个更大的自动机，该自动机可以识别 O(1) 复杂度的多个表达式。如果感兴趣的话，我已经写了[一系列关于这个主题的文章。](http://binarysculpting.com/2012/02/11/regular-expressions-how-do-they-really-work-automata-theory-for-programmers-part-1/)这是一项复杂但有益的任务。

# javascript - div、textareas、文本和光标检测

> ID：10566003
> 
> 赞同：1
> 
> 时间：2012-05-12T17:37:13.353
> 
> 标签：javascript, html, size, contenteditable

我有以下问题：

1.) 我想使用可竞争的 div 或 textarea（最好是 contenteditable div，因为我也可以使用 html 标签，而不仅仅是文本）作为书写板。但是，一旦光标到达 div/textarea 的右下角，我希望停止写入。这似乎很难实现。我已经使用 max-height 和 overflow:hidden 进行了管理，以使元素（ div / textarea ）不扩展，但是用户仍然可以键入，它只是不可见的，不需要的东西。我想要的是当光标到达右下角时停止写作，然后在一个新的空白“页面”上继续。

我的第一个想法是使用一些等宽字体并计算允许的最大字符，但问题是第一个并非所有浏览器都显示相同数量的相同字体的等宽字符，每行和第二个 div 的大小可以是可变的，而不是恒定的.

理想的情况是 div 以便我可以输入 html 标签（粗体、斜体等），并且显示内容的 div 可以具有不同的大小，具体取决于屏幕分辨率。

2.) 给定一个代表“页面”的 div，该页面填充了数据库中的文本/html，我怎样才能只显示填充 div 的内容，当用户按下“下一页”按钮时，显示下一个内容。这对我来说似乎是不可撤销的，通过 javascript 弄清楚有多少内容可以填充到 div 中。

关于这两个相关问题的任何想法将不胜感激

没有flash，没有java，没有插件。仅：html、css、javascript

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:01:55.790

你可以试试下面的代码。

`<div id="editable_div"></div>`

```
var content_id = document.getElementById("editable_div");  

    max = 10;

    //binding keyup/down events on the contenteditable div
    $('#'+content_id).keyup(function(e){ check_charcount(content_id, max, e); });
    $('#'+content_id).keydown(function(e){ check_charcount(content_id, max, e); });

    function check_charcount(content_id, max, e)
    {   
        if(e.which != 8 && $('#'+content_id).text().length > max)
        {
           // $('#'+content_id).text($('#'+content_id).text().substring(0, max));
            e.preventDefault();
        }
    } 
```

# css - Google Maps API 在 Safari 中杀死 CSS 动画

> ID：10566007
> 
> 赞同：3
> 
> 时间：2012-05-12T17:37:53.320
> 
> 标签：css, google-maps, animation, safari

我有一个带有一些 CSS 动画的页面。此页面还包含通过 Google Maps API 生成的地图。

你可以在这里看到一个精简的演示：

[http://dev.timmurtaugh.com/demo/projects-map-debug.html](http://dev.timmurtaugh.com/demo/projects-map-debug.html)

如果在将鼠标悬停在“主导航项”上*之前单击“切换大小”大​​小链接，您将看到切换元素按预期调整大小。*

但是，一旦您将鼠标悬停在应该通过 CSS 触发弹出菜单的 nav 元素上，不仅弹出菜单不会出现，“切换大小”链接也会停止工作。

好像这还不够奇怪，网络检查员*认为*一切正常——它报告盒子的大小*正在*改变，而视觉上并没有。

我尝试在 iframe 中隔离地图，得到了相同的结果。

这似乎只发生在 Safari (5.1.5) / Mac 中，而不发生在我检查过的任何其他浏览器（最新的 Chrome / Firefox / Internet Explorer 9）中。

我已经尝试过这个问题中的建议：[jQuery jScrollPane 问题/与 Safari 上的 Google 地图冲突](https://stackoverflow.com/questions/6163975/jquery-jscrollpane-issue-conflict-with-google-maps-on-safari)

...在这个：[Mac Safari 5.0.4 bug when using Google Maps API](https://stackoverflow.com/questions/5305680/mac-safari-5-0-4-bug-when-using-google-maps-api)

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:45:19.830

有了上面提到的覆盖（可见性：可见性；& -webkit-transistion:opacity ...;），这似乎对我有用。

[http://jsfiddle.net/vxfhT/1/](http://jsfiddle.net/vxfhT/1/)

# fortran - 在 fortran 名称列表输入文件中格式化二维数组

> ID：10566010
> 
> 赞同：4
> 
> 时间：2012-05-12T17:38:37.073
> 
> 标签：fortran

我正在为 Fortran 代码编写一个名单输入文件。我知道如果你有一个一维数组，你可以填充一系列元素，

```
&namelist
array(10) = 0, 1, 2, ......., n
&END 
```

相当于

```
&namelist
array(10) = 0
array(11) = 1
array(12) = 2
...
array(10 + n) = n
&END 
```

我现在需要编写一个二维数组。我想做最短的等价于

```
&namelist
array2d(1,1) = 1
array2d(1,2) = 2
&END 
```

我可以这样写吗

```
&namelist
array2d(1) = 1, 2
&END 
```

还是我需要把它写成

```
&namelist
array2d(1,1) = 1, 2
&END 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T04:01:02.073

哇，谢谢你的问题——以前从未听说过名单:) 这很有用！:) 经过一些测试，较旧的 gfortran 版本对此存在问题。假设你有

```
program nltest
  implicit none
  integer :: a(3,3)
  namelist /mylist/ a
  a = 0
  open(7, file='nlinput.txt')
  read(7, nml = mylist)
  write(*,*) a
end program nltest 
```

*   读取整个数组，`a=1,2,3,4,5,6,7,8,9`：无论编译器如何，这都可以正常读取 a(1,1), a(2,1), ... 。
*   读取一个数组切片，例如`a(2,:)=1,2,3`：这适用于 ifort 和 gfortran 4.6.1，但不适用于 gfortran 4.3。

`array2d(1,:) = 1,2`因此，如果代码是用最近的编译器编译的，那么你应该能够编写你想做的事情。

# android - 开发内置 SMS/MMS Android 应用程序的定制版本

> ID：10566021
> 
> 赞同：4
> 
> 时间：2012-05-12T17:40:43.827
> 
> 标签：android, sms, mms

好的，情况如下：

我正在为客户开发应用程序（或尝试这样做）。它需要很多（如果不是全部）与内置 SMS/MMS 应用程序相同的功能。所以，我想——嘿！Android是开源的吧？我可以申请并根据我的需要进行修改，对吗？

因此，我在 github 上找到了 MMS/SMS 应用程序的代码（出于某种原因，基于 AndroidManifest 文件，它调用了我构建的项目“ConversationList”）。但是我得到了涉及 import com.google.android.mms.* 包和其他几个包的大量错误。

每个人都在说“这是一个私有/内部包”，“下载整个 AOSP”。但是，我如何在 Windows 上执行此操作，为什么我不能只下载适当的包以在程序中使用？

我要做的就是在 Eclipse 中构建一个项目，将其部署到我的手机上，然后修改必要的代码。如果 Android 是开源的，为什么会有这么多秘密/内部包？这令人沮丧。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:59:27.643

> So, I found the code on github for the MMS/SMS application (for some reason, based on the AndroidManifest file, it calls my project I built, "ConversationList"). But I get TONS of errors involving the import com.google.android.mms.* package and a couple other packages.

AOSP applications like this are designed to be built as part of a firmware image, not as standalone apps.

> But, HOW do I do this on Windows

Most likely, you don't. Cygwin might work. More likely, you will need to use OS X or Linux, such as running Linux in VirtualBox. And the result of your build will not run on anything, except as part of a firmware build that you use to replace the firmware on a device.

> WHY can't I just download the appropriate packages to use in the program?

Because that application is designed to be built as part of a firmware image, not as a standalone app.

> ALL I want to do is build a project in Eclipse deploy it to my phone, and then modify the necessary code.

Then find a project that is designed to be built as a standalone app as your starting point. Or, work on modifying the project you are trying to use to work as a standalone app, by ripping out all the functionality that depends upon things that are not in the app itself.

> If Android is open source, why so many secret/internal packages?

They are not "secret". They are part of the firmware.

For example -- since you appear to be familiar with Windows -- it is entirely possible that "apps" like Control Panel are not designed to be built independently from the Windows OS. If you were able to download the source code to Windows and tried to load Control Panel into Visual Studio, it is eminently possible that you could not create some standalone `CPANEL.EXE` file just via that one project. Rather, you would need to use a customized Windows OS build process to build the whole OS, which would then contain a `CPANEL.EXE` that would run within that built version of the OS.

Most of the AOSP apps work this way. Some have been forked to create standalone apps -- K-9 Mail came from the early version of the AOSP email app. I have no idea if anyone has done this with the stock AOSP Messaging app or not.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T22:32:40.793

您可以改为 fork TextSecure[0]，因为它不是系统应用程序，但看起来与股票消息传递应用程序非常相似。AOSP 应用程序需要安装在 /system/app 上，它需要 root 并且可能不是您的客户想要的。

请注意，此应用程序是 copylefted (GPLv3)，因此如果您分叉，您必须根据 GPL 条款授予您的客户访问源代码的权限。

[0] [https://github.com/WhisperSystems/TextSecure](https://github.com/WhisperSystems/TextSecure)

# html - html 锚点中的相对 URI - 推荐/首选方式

> ID：10566022
> 
> 赞同：0
> 
> 时间：2012-05-12T17:41:01.510
> 
> 标签：html, uri, anchor

1.  `<file_name>`

    ```
    <a href="file.html">link</a> 
    ```

2.  `<slash><file_name>`

    ```
    <a href="/file.html">link</a> 
    ```

3.  `<dot+slash><file_name>`

    ```
    <a href="./file.html">link</a> 
    ```

推荐/首选哪些？
它们中的任何一个会影响检索速度吗？
使用它们中的任何一个时有什么优点和缺点？

[skorks](https://stackoverflow.com/users/639386/skorks)在这里有一篇关于 URL 的广泛文章：[每个开发人员应该知道的关于 URL](http://www.skorks.com/2010/05/what-every-developer-should-know-about-urls/)的知识，但它没有回答我的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:45:33.770

没有具体的建议。

检索速度与 URI 的构造方式无关。

您唯一需要考虑的是链接页面和您要链接到的页面是否是一组页面的一部分 - 如果您将它们一起移动，那么如果您的链接采用样式 2，它们就会中断。如果`file.html`将始终位于站点的根目录上，则移动此文件将没有任何区别。

我看不出风格3的意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:45:45.767

数字 2 与其他数字不同，因为它解析为网站的根目录，而不是当前文件夹。

这个问题对我来说听起来像是[微优化](http://www.codinghorror.com/blog/2005/01/micro-optimization-and-meatballs.html)，答案很简单：当遇到链接时，浏览器会解析路径，使用当前 URL 或`<base href="..." />`提供的 URL。因此绝对没有区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:48:59.040

选项 1 和 3 产生完全相同的 HTTP GET 请求。选项 2 不同，因为以 开头的路径`/`将尝试从根目录而不是当前路径检索文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T17:52:40.787

在速度/检索方面，它们之间没有合理的区别。
- 第一种和第三种情况相同：名为 file.html 的资源位于当前文件的同一目录中。
- 在第二个选项中，“/file.html”表示文件位于应用程序的 webroot 中。

这里解释[了 w3school](http://www.w3schools.com/tags/att_a_href.asp)

# api - 与 Dreamweaver CS6 集成的 PhoneGap Build 与 CS5.5 不同，如何更改 assets/www 文件夹？

> ID：10566027
> 
> 赞同：0
> 
> 时间：2012-05-12T17:41:51.370
> 
> 标签：api, jquery-mobile, cordova, build

之前我用DW5.5搭建过PhoneGap应用，可以很方便的访问应用内的所有文件，集成原生API功能等...

但现在我使用的是 DWCS6，我似乎无法找到整个应用程序文件夹结构。它所做的只是将应用程序编译成一个 .apk 文件（android）然后你下载它。我在这里错过了什么吗？

我在 Dreamweaver CS6 中使用 jQuery mobile 和 PhoneGap，只是尝试从 phonegap 测试本机 API，但似乎无法让它工作。在线示例显示了 cordova.js 文件的用法（我知道它曾经被称为 phonegap.js 或其他），但本机功能似乎不起作用。

有什么想法吗？？我现在一整天都在忙，所以我可能错过了一些简单的东西，因为我的脑袋很糟糕。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T01:22:30.820

我怀疑这是 Adob​​e 强迫用户为其编译服务付费的方式。AFAIKT，使用 Xcode 或 Eclipse 等外部程序编译本机应用程序的能力已被删除。我使用 Dreamweaver 5.5。移动应用程序开发的问题充满了问题，但至少，您可以找到解决方法。我希望一些有进取心的 CS6 用户会为我们这些没有 $$$ 购买 adobe 产品，然后每月有更多 $$ 来编译代码的人找到一个很好的解决方法。就个人而言，我正在寻找其他选择。我存了几个月的钱买了cs5.5，但它从来没有像宣传的那样运行。我找到了 Xcode 的解决方法，但没有找到适用于 Android 的方法。我确实喜欢 Dreamweaver 的设计/代码部分，但总而言之，我对移动开发产品感到失望。

让我们随时了解您的进展。

谢谢。-瑞秋

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:38:28.123

您是否尝试过将站点文件从 Dreamweaver 源文件夹复制到 Eclipse www/assets 文件夹并在 Android 模拟器上运行它。这对我有用，至少对于简单的 Hello World index.html 文件，但它不适用于 5 页 - 在 Dreamweaver CS6 中开发的 HTML 站点。

# firefox - 如何通过“raphael-svg-import”加载和显示 SVG 数据？

> ID：10566029
> 
> 赞同：0
> 
> 时间：2012-05-12T17:42:06.037
> 
> 标签：firefox, import, svg, raphael, inkscape

（使用Raphael_2.01、WindowsXP、Firefox12.0）

大家好，

我无法通过“raphael-svg-import”加载和显示 SVG 数据:(

我已经通过“Adobe FlashCS5”和“Adobe Wallaby”制作了一个 SVG 形状数据，并通过 Inkscape-ver0.46 进行了检查。

形状为蓝色渐变球。请参阅[http://kie.nu/af2](http://kie.nu/af2)。

[使用https://github.com/wout/raphael-svg-import](https://github.com/wout/raphael-svg-import)的示例 ，我编写了 html 和 Raphael 代码：

```
window.onload = function () {

    paper = Raphael(0, 0, 800, 600); 
    paper.importSVG(SVG_data);// <======================= (* **)
} 
```

可以在[http://pastebin.com/Dz1N8iiz](http://pastebin.com/Dz1N8iiz) 或[http://jsfiddle.net/crazytonyi/ucWUh/查看 svg 代码](http://jsfiddle.net/crazytonyi/ucWUh/)

当我运行“raphael-svg-import”（矩形上的紫色油漆）的示例代码时，它成功了。但是使用上面的 SVG 数据，Firefox 没有显示任何内容:(

我应该怎么办 ？

谢谢。
起重机@日本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:04:15.973

我猜函数“importSVG()”不能接受包含渐变参数的参数。

我检查了几个 SVG 代码。当他们有路径和简单的绘画信息时，“importSVG()”可以正常运行。但其中之一包括颜色渐变参数，没有形状出现。

所以我认为当我们要绘制渐变形状时，我们必须使用 Raphael 的渐变设置。

（例如：“r(0.25, 0.75)#fff-#000”）

# javascript - 新手 javascript - 在窗口加载时不会触发警报

> ID：10566033
> 
> 赞同：-1
> 
> 时间：2012-05-12T17:42:32.120
> 
> 标签：javascript, html, javascript-events

我已经在 Firefox、IE 和 Chrome 中尝试过，并且使用以下代码，我的警报都没有触发。在页面加载或单击图像时。我对 JavaScript 非常陌生，但非常感谢它在用户体验方面的强大功能。我真的很想更好地学习它，并且希望你们中的一个人能够帮助我理解为什么这不起作用...我将包含完整的 HTML，因为我听说 JScript 来时可能会非常挑剔到选择器和 DOM 对象。我也不知道如何在 javascript 中正确抛出错误... :(

```
<html> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<script type="text/javascript">
function preview(img, selection) { 
alert("firedTwo");

} 

$(document).ready(function () { 
alert("firedThree");
}); 

$(window).load(function () { 
alert("fired");
});

</script>

<link href="../css/style.css" rel="stylesheet" type="text/css" />
<link href="../css/profile.css" rel="stylesheet" type="text/css" />

<link rel="shortcut icon" href="favicon.ico" >
<link rel="apple-touch-icon" href="apple-touch-icon.png" >

<title>CityGuru.ca - Saskatoon: Profile Editor</title>

</head> 

<body>

<h1>Profile Picture Upload</h1>

<div id="subHeader">Upload Picture</div>
<div id="subContainer">
        <h2>Create Thumbnail</h2>
        <div align="center">
            <img src="../images/users/saskatoon/1/photo.jpg" style="float: left; margin-right: 10px;" id="thumbnail" alt="Create Thumbnail" />
            <div style="border:1px #e5e5e5 solid; float:left; position:relative; overflow:hidden; width:60px; height:60px;">
                <img src="../images/users/saskatoon/1/photo.jpg" style="position: relative;" alt="Thumbnail Preview" />
            </div>
            <br style="clear:both;"/>
            <form name="thumbnail" action="http://saskatoon.CityGuru.ca/includes/profileEditor.php?action=picUpload" method="post">
                <input type="hidden" name="x1" value="" id="x1" />
                <input type="hidden" name="y1" value="" id="y1" />
                <input type="hidden" name="x2" value="" id="x2" />
                <input type="hidden" name="y2" value="" id="y2" />
                <input type="hidden" name="w" value="" id="w" />
                <input type="hidden" name="h" value="" id="h" />
                <input type="submit" name="upload_thumbnail" value="Save Thumbnail" id="save_thumb" />
            </form>
        </div>
    <hr />
        <h2>Upload Photo</h2>
    <form name="photo" enctype="multipart/form-data" action="http://saskatoon.CityGuru.ca/includes/profileEditor.php?action=picUpload" method="post">
    Photo <input type="file" name="image" size="30" /> <input type="submit" name="upload" value="Upload" />
    </form>
</div>   

</body>
</html> 
```

***注意*** 使用 FireFox 的 Web 控制台时，我得到的唯一 JS 错误是`$ is not defined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:45:58.620

在 head 部分的脚本标记中添加此[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)上面的代码中没有 jquery 所以 $(document.ready(function() 不起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:53:22.173

$() 语法是 jQuery，而不是原生 javascript。（尽管其他一些库也使用相同的语法）。您需要包含 jQuery 才能使其正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:58:06.603

尝试做这样的事情：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html> 

<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
function preview(img, selection) { 
 alert("firedTwo");

} 
...

</head> 
```

需要注意的重要事项：

1.  您没有引用 jQuery：`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>`
2.  你有点把事情搞砸了...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T17:44:38.807

首先，像这样的脚本通常会出现在脑海中。

其次，你永远不应该把 JavaScript 放在 doctype 之前。

第三，我没有看到您的开始标签，只有结束标签。

最后，您需要在头部某处包含一个 jquery 脚本。

# javascript - 如何在不重新加载的情况下提交表单？

> ID：10566035
> 
> 赞同：-7
> 
> 时间：2012-05-12T17:43:17.717
> 
> 标签：javascript, html, forms

> **可能重复：**
> [提交表单而不重新加载页面](https://stackoverflow.com/questions/2866063/submit-form-without-page-reloading)

嗨，我需要提交一个表单而不重新加载，我该如何使用 javascript 或框架来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:45:46.547

您可以使用 jQuery 执行此操作：http: [//jquery.com/](http://jquery.com/)

它是一个 javascript 框架，你可以用来做这种事情的方法之一是：

```
$('#formID').submit(function(){

    var ajaxURL = '/ajax/saveAccountSettings.php';

    $.ajax({
        type: 'POST',
        url: ajaxURL,
        data: { 
            username: $('#accountForm #username').val()
        },
        success: function(data){

                        //Do something

        }
    });

    return false;

}); 
```

可能值得阅读如何首先使用 jquery ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:48:24.147

我会推荐 JavaScript 而不是尝试使用 iframe 做任何事情。您正在寻找的是 XHRRequest，最简单的解决方案是使用[JQuery](http://api.jquery.com/jQuery.ajax/)。我打算写一个简单的例子，但[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)似乎很好地涵盖了这些步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:49:14.667

您可以使用[jQuery](http://jquery.com/)和[jQuery Form Plugin](http://jquery.malsup.com/form/)。

jQuery Form Plugin 的`ajaxForm`功能使您能够“劫持”HTML 中的表单。考虑这个例子：

```
<html> 
<head> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                alert("Thank you for your comment!"); 
            }); 
        }); 
    </script> 
</head>
<body>
    <form id="myForm" action="comment.php" method="post"> 
    Name: <input type="text" name="name" /> 
    Comment: <textarea name="comment"></textarea> 
    <input type="submit" value="Submit Comment" /> 
</form>
</body>
</html> 
```

有关更多信息，请参阅插件的网站。它支持用于错误处理等的各种回调函数。

# python - 类型错误：+ 不支持的操作数类型：“_sre.SRE_Match”和“_sre.SRE_Match”

> ID：10566038
> 
> 赞同：2
> 
> 时间：2012-05-12T17:43:48.783
> 
> 标签：python

我有这段代码，但我不明白为什么会出现这个错误：

```
a= name+pw+salt
TypeError: unsupported operand type(s) for +: '_sre.SRE_Match' and '_sre.SRE_Match' 
```

脚本

```
class MainHandler(Handler):

    def make_salt(self):
        return ''.join(random.choice(string.ascii_letters) for x in range(5))

    def make_pw_hash(self, name, pw):
        salt = self.make_salt()    
        a= name+pw+salt //problem here

        h = hashlib.sha256(a.encode("UTF8")).hexdigest()
        return '%s|%s' % (h, salt)

    def post(self):
        store_hash_and_salt = self.make_pw_hash("José", "somePass")  
        print (store_hash_and_salt) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:48:32.440

问题*不*存在。在之前的某个地方，您将 RE 匹配结果传递给它，而不是使用该`group()`方法从中获取字符串。

（另外，返回字符串的格式不正确，但这不是这里的错误。）

# c# - 带 C# 和不带 ASP.NET 的 JSON

> ID：10566040
> 
> 赞同：2
> 
> 时间：2012-05-12T17:44:27.287
> 
> 标签：c#, json, parsing

> **可能重复：**
> [C# 的 JSON 库](https://stackoverflow.com/questions/1474377/json-library-for-c-sharp)

我知道可以用 ASP.NET 解析 JSON，但是对于我的代码，我需要在没有 ASP.NET 的情况下用 c# 解析 JSON

Google 无法提供帮助，因为它只显示 ASP.NET 相关页面

有没有任何图书馆可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:49:09.843

看看[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)。这是一个很棒的库，它被许多产品/框架/项目使用。

你可以在这里从 CodePlex 下载它——http: [//json.codeplex.com/](http://json.codeplex.com/)

我已经在许多项目中使用它并且可以保证它。如果您需要它（用于自定义序列化/反序列化方案）在 ASP.NET 项目内部和外部，它使用起来很简单并且非常可扩展。

希望这可以帮助。祝你好运！！

# c# - c# wpf frame redirect 发送附加信息

> ID：10566061
> 
> 赞同：0
> 
> 时间：2012-05-12T17:46:56.567
> 
> 标签：c#, wpf, frame, selecteditem

我将默认的overview.xaml 加载到带有列表视图的框架中，并且我想重定向到我双击的项目的详细信息页面。但是如何教详细信息页面双击了哪个项目？

```
void ListView_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
  //send post info of selected item or similar missing...
  this.Content = "Details.xaml";
} 
```

洛松：

```
this.NavigationService.Navigate(new Details(selectedItem)); //Details has a Constructor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:26:02.117

您可以使用 Page.NavigationService 来调用接受 navigationState 对象的 Navigate 重载。或者您可以为详细信息页面创建一个构造函数，该构造函数接受所选项目作为输入并将您的代码重写为 this.Content = new Details(mySelectedItem);

# java - 如何确定文件是否被附加或彻底更改

> ID：10566063
> 
> 赞同：0
> 
> 时间：2012-05-12T17:47:01.973
> 
> 标签：java, text-files, fileinputstream

我想知道我的程序确定文件是否已附加或完全更改的最佳方法。

我目前正在做的是使用我编写的 LogIOThread，它使用 FileInputStream.avail 检查是否已附加文件。如果是这样，我将附加到不可编辑的 JTextArea （实际上是具有可变滚动功能的修改后的 JTextArea）。我的最终目标是拥有一个自动滚动的 JTextArea，它基本上是滚动 log4j 输出的日志文件。这对我现在很有用。我想将此调整为非日志文件。

我想添加到 LogIOThread 的是一个监视器，它将检查文件内容是否更改，而不仅仅是有新的附加文本。我试图解决的第一个用例是文件在运行中被重写。在最基本的层面上，我想我可以使用这个函数重新加载我的 JTextArea 关闭并重新打开 FileInputStream，如果文件被覆盖，则重新开始。

我想，当我这样做时，我可能想让它更健壮地处理中间文件插入的第二个用例，比如属性文件更改。我想如果我能弄清楚一行是否改变，我可以让 textArea 进行行替换。

我有使用 Java6 的要求（不是我设置的），所以一些新的 nio FileWatcher 对我没有好处。一般来说，通知程序似乎适得其反，因为我正在通过 FileInputStream 捕获附加信息。这也导致我打折其他库，如 Commons 和 jnotify。不过我可能是错的，也许 FileInputStream.avail 不再是我的最佳方式。

我的第一个想法是我可以存储文件大小，并检查它是否急剧变化（变为小于存储的值）。由于新创建的日志文件需要一个新的 textArea，这似乎还不错，并且解决了我的第一个用例。这不适用于文件中特定值更改的第二个用例。对于在我的 IOThread 处于睡眠状态时以一致大小重新创建的文件来说，这也可能是有问题的，尽管我怀疑这可能。

我的第二个想法是我可以不断检查文件修改时间，如果没有可附加的文本，我会重新读取文件并进行行比较？如果我要更改 textArea 中的一行，除非我每次都重新加载它，否则我无论如何都需要这样做。不过，这似乎非常低效。

有什么建议么？我不反对更改 LogIOThread 的工作方式，如果有人建议获取新文本并使用比可用性 + 文件修改检查组合更好的方式进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:54:27.223

如果文件大小减小，它肯定已被覆盖。然而，它也可能被更大或更大的东西覆盖，所以反过来不成立。

不要使用 available() 作为 File.length() 的代理。请参阅 Javadoc。那不是它的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T09:23:19.387

如何创建一个`OutputStream`读取日志数据的中间体，使其可用于`JTextField`然后将该数据路由到文件？

# javascript - 使用 JavaScript 流式传输

> ID：10566064
> 
> 赞同：1
> 
> 时间：2012-05-12T17:47:11.607
> 
> 标签：javascript, ajax, streaming

我想将实时数据从服务器流式传输到 JavaScript 网页。例如，如果服务器每秒接收一次气象数据测量值，我想将它们可视化为网页上的移动图。

当然，Ajax 可以用于此。然而，这并不是 HTTP 协议的目的。这将有助于拥有一个更快、更轻量级的协议。理想情况下，持久的 TCP 连接。现代浏览器中是否有这样的可能性，而不使用额外的插件和小程序？或者这只能用 Flash、Java 等来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:48:57.520

我会检查[Socket.IO](http://socket.io/)。它尝试使用[WebSockets](http://www.w3.org/TR/websockets/)，但可以使用标准 AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:52:48.010

现代浏览器支持 Websocket 实现，但是正如 David 所说，如果您的浏览器不支持它，它将退回到 Flash 套接字、Ajax、iframe 长轮询等。它是一个高级包装器并且易于实现。服务器端你将使用 nodejs 和 socket.io，查看 socket.io 的文档

# linux - 在 MINIX 3.2 中从驱动程序向 TTY 发送消息

> ID：10566065
> 
> 赞同：0
> 
> 时间：2012-05-12T17:47:12.960
> 
> 标签：linux, unix, posix, ipc, minix

我正在尝试读取用户的输入，并且在按下 g 的情况下，我输出“完成”，而当按下任何其他按钮时，终端正常工作。我现在所拥有的是，当按下 g 时它会打印完成，但我无法将消息传递给 tty 以继续处理。我目前的方法出现以下错误：“safecopy failed: granter 182819 failed: -106”

```
void kbd_interrupt(message *(m_ptr))
{
/* A keyboard interrupt has occurred.  Process it. */

    int isaux, x;void kbd_interrupt(message *(m_ptr))
{
/* A keyboard interrupt has occurred.  Process it. */

    int isaux, x;
    //puts("2");
    unsigned char scode;
    scan_keyboard(&scode, &isaux);
//printf("%d \n", DEV_IOCTL);
    x = (int) scode;
    m_ptr-> m_type = DEV_WRITE_S; //HARD_INT;//DEV_WRITE;
    m_ptr->TTY_LINE = KBDAUX_MINOR;
    m_ptr->USER_ENDPT=TTY_PROC_NR;

  if(scode ==34 | scode == 162) //190
    {
        printf(" DONE\n");
     //   sys_irqdisable(&irq_hook_id2);
        shut =1;
    }
    else
    {
    for(int i=0;i<1000;i++)
    {
    m_ptr->IO_GRANT=i;
//    printf("%d \n",i);
    //printf("%d %d\n",m_ptr->m_source, m_ptr->m_type);  
    send(5,m_ptr);
    }
    }
    return;
}
//////////////////////////////////////////////////////////////////////////
//////////////////////////scan_keyboard //////////////////////////////////
//////////////////////////////////////////////////////////////////////////
int scan_keyboard(bp, isauxp)
unsigned char *bp;
int *isauxp;
{
    unsigned long b;
    if(sys_inb(KEYBD, &b) != OK)
        printf("scan_keyboard: 2 sys_inb failed\n");
    //printf("got ACK from keyboard\n");
    if (bp)
      *bp= b; 
    return 1;
}

    //puts("2");
    unsigned char scode;
    scan_keyboard(&scode, &isaux);
//printf("%d \n", DEV_IOCTL);
    x = (int) scode;
    m_ptr-> m_type = DEV_WRITE_S; //HARD_INT;//DEV_WRITE;
    m_ptr->TTY_LINE = KBDAUX_MINOR;
    m_ptr->USER_ENDPT=TTY_PROC_NR;

  if(scode ==34 | scode == 162) //190
    {
        printf(" DONE\n");
     //   sys_irqdisable(&irq_hook_id2);
        shut =1;
    }
    else
    {
    for(int i=0;i<1000;i++)
    {
    m_ptr->IO_GRANT=i;
//    printf("%d \n",i);
    //printf("%d %d\n",m_ptr->m_source, m_ptr->m_type);  
    send(5,m_ptr);
    }
    }
    return;
}
//////////////////////////////////////////////////////////////////////////
//////////////////////////scan_keyboard //////////////////////////////////
//////////////////////////////////////////////////////////////////////////
int scan_keyboard(bp, isauxp)
unsigned char *bp;
int *isauxp;
{
    unsigned long b;
    if(sys_inb(KEYBD, &b) != OK)
        printf("scan_keyboard: 2 sys_inb failed\n");
    //printf("got ACK from keyboard\n");
    if (bp)
      *bp= b; 
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:31:05.207

好的，所以在对 tty 驱动程序进行了一些研究后，我的队友发现消息类型应该不同才能将字母注入外壳。所以下面是向 tty 发送消息的代码：

```
msg.m_type = INPUT_EVENT;
msg.INPUT_TYPE = INPUT_EV_KEY;
msg.INPUT_VALUE =1;
msg.INPUT_CODE = scode;
send(5, & msg); 
```

scode 是之前检索到的字符代码，5 是 tty 驱动程序地址。希望它可以帮助某人:)

学分：艾哈迈德·巴西乌尼

# javascript - 出现多次确认框

> ID：10566066
> 
> 赞同：0
> 
> 时间：2012-05-12T17:47:25.963
> 
> 标签：javascript, jquery, ajax

我正在使用 jquery 使用 ajax，我正在使用以下代码片段删除一行：

```
$('#example a.delete'). live('click', function (e) {
e.preventDefault();
if (confirm("Are you sure you want to delete this row?"))
{

     alert("Hello World!")
}

}); 
```

当我单击**网格视图显示按钮**时，由于 ajax，网格视图出现而没有页面刷新。如果我多次单击**网格视图显示按钮**，它会相应地再次刷新网格视图区域。但是确认框显示不止一次，这等于我的没有。当我单击单行删除按钮时，单击网格**视图显示按钮。**

这怎么能避免！

**已编辑**

HTML 代码：

```
<td><a class="delete" href="#" style="margin-left: 10px"><img src="images/delete-icon.png" width="16px" height="16px" /></a></td> 
```

**已编辑**

完整的代码片段：

```
$('#example a.delete'). live('click', function (e) {
e.preventDefault();
if (confirm("Are you sure you want to delete this row?"))
{
    $getCode = $(this).parent().parent().attr('id');
    var oTable = $('#example').dataTable();
    var index =oTable.fnGetPosition( document.getElementById($getCode) );

    $.post("DeleteDepartment", {
        depID:$getCode                   
    }, function(data) {
        if(data.result >0){
            var oTable = $('#example').dataTable();
            oTable.fnDeleteRow( index );
        }else{
            alert("Operation Fail");
        }
    });

}

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T18:04:48.643

```
$('#example a.delete').unbind('click').bind('click', function (e) {
     e.preventDefault();

     if (confirm("Are you sure you want to delete this row?"))
     {

        alert("Hello World!")
     } 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:48:52.037

您似乎将多个事件附加到按钮。你确定你只打电话`live()`一次，而且只有一次吗？如果你多次调用它，你会得到多个处理程序。

（当然，这就是为什么我更喜欢只使用`.onclick = function() {...}`个人）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:56:24.387

看起来代码是为每次点击执行一次确认而编写的。如果您希望它只确认一次，您必须让代码记住您已经确认。

在服务器调用您的成功回调函数之前，不会删除该行。在此期间，您可以继续单击该行并触发单击事件。

您可以在用户确认时在行上设置变量或属性，然后在每次单击时检查此变量。仅在未设置变量时显示确认消息。

或者您可以更改您单击的元素的状态、更改其图像、更改样式、设置属性。您既可以通知您的代码它已被单击，也可以向用户指示该行已被标记为删除。

或者您可以尝试 jquery 的 .one() 方法来附加事件。

# python - 多个 url 获取 Google App Engine python

> ID：10566069
> 
> 赞同：1
> 
> 时间：2012-05-12T17:47:41.767
> 
> 标签：python, google-app-engine

我正在 GAE 上创建一个应用程序，该应用程序需要使用 GET 方法从远程服务器获取数据。以顺序方式执行此操作相当慢；首先发出请求，获得响应，处理它，然后处理下一个请求等。是否可以并行执行所有这些操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:54:27.993

是的，您可以使用 [https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests进行异步调用](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests)

# ruby - RoR 不同的括号表示法

> ID：10566070
> 
> 赞同：0
> 
> 时间：2012-05-12T17:48:01.797
> 
> 标签：ruby, ruby-on-rails-3

我开始掌握轨道，虽然我觉得我在进步，但有一件事我正在努力掌握，这是非常基本的。我正在尝试了解它们的不同用法`[] {}`以及`()` 它们的用法是否有任何好的来源，是否有任何提示可以给初学者以识别何时使用其中一种，或者我似乎在某些情况下看到它们根本不需要？
我知道这是非常基础的，但我一直在努力寻找能够简明地解释它们与 Ruby 或特别是 RoR 之间相互作用的文献

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:52:31.903

它与 RoR 无关；各种括号是 Ruby 语言结构。

`[]`是数组运算符，用于实现它的数组和其他类（如字符串以范围获取子字符串，或散列以查找键的值）：

```
a = [1, 2, 3]
a.each { |n| puts n }

s = "ohai"
puts s[1..-1]

h = { foo: "bar", baz: "plugh" }
puts h[:foo] 
```

`{}`用于散列，并且是两种分隔块的方法之一（另一种是`begin`/ `end`）。（并用于`#`字符串插值。）

```
h = { foo: "bar", baz: "plugh" }
h.each { |k, v| puts "#{k} == #{v}" } 
```

`()`用于方法参数，或用于在表达式中强制执行评估顺序。

```
 > puts 5 * 3 + 5     # Normal precedence has * ahead of +
=> 20
 > puts 5 * (3 + 5)   # Force 3+5 to be evaluated first
=> 40

def foo(s)
  puts(s)
end 
```

如果语句没有歧义，它们有时是可选的：

```
def foo s
  puts s
end 
```

（它们并不*总是*可选的，在方法调用和它的括号参数列表之间放置一个空格可能会导致问题——最好不要，IMO。）

*（我可能也错过了一些东西，但简而言之。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:01:28.717

[] 用于访问散列（通过键）或数组（通过索引）内的对象。

```
hash[:key] # returns a value
array[0]   # returns the first array element 
```

[] 用于描述数组。

```
array = ['a', 'b', 'c'] 
```

当然这可以嵌套。

```
nested = [['a','b','c'], [1,2,3]] 
```

[] 可以用来声明散列，但那是因为散列类可以接受一个数组。

```
hash = Hash[['a',1], ['b',2]] # { 'a' => 1, 'b', => 2 } 
```

{} 用于声明哈希。

```
hash = { 'a' => 1, 'b' => 2 } 
```

这也可以嵌套。

```
hash = { 'a' => { 'c' => 3 }, 'b' => { 'd' => 4 } } 
```

{} 也用于分隔块。该`.each`方法是一种常见的方法。以下两个代码块是等效的。

```
array.each do |n|
    puts n
end

array.each { |n| puts n } 
```

() 仅用于在需要澄清歧义的情况下进行分组。在采用许多参数的方法中尤其如此，其中一些可能是 nil，其中一些可能是对象等。您会看到很多代码完全省略了它们，因为为了清楚起见不需要分组。

```
puts(string)
puts string 
```

我建议启动`rails console`并开始声明变量并访问它们。

# java - 强制 JButton 不绘制背景

> ID：10566073
> 
> 赞同：3
> 
> 时间：2012-05-12T17:48:19.290
> 
> 标签：java, swing, jbutton, jcomponent

我正在编写一个小程序，这基本上是我第一次使用 a`JComponent`来绘制东西。我将组件的背景设置为黑色。

但是一旦我在其中画了一个`JButton`，它就会被默认的灰色覆盖。我已经搜索了一个小时，似乎找不到任何答案。

![](../Images/455dc3d5765218e96e3fa62d841d45c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:54:42.513

尝试使用 setOpaque(boolean opaque) 将按钮设置为不透明；方法

我不确定我是否正确，但我可能是

编辑：

尝试使用这些方法：

```
 button.setBorderPainted(false); 
 button.setContentAreaFilled(false); 
 button.setFocusPainted(false); 
 button.setOpaque(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:14:59.807

你看到的是你添加了你的框架`JComponent`，所以如果你想要一个黑色的背景框架，那么你需要设置 JFrame 的背景颜色。

像这样的东西：

```
JFrame frame = new JFrame();
frame.add(new GUI());
frame.pack();
frame.getContentPane().setBackground(Color.black);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setVisible(true); 
```

# .net - .net 提供程序与存储库，用于构建对多种视频服务的支持

> ID：10566078
> 
> 赞同：0
> 
> 时间：2012-05-12T17:48:53.657
> 
> 标签：.net, repository-pattern, provider-model

试图支持多个视频提供商。

1.  内部视频提供商（用户在应用服务器上上传视频并由应用播放）
2.  Youtube 提供者（从 youtube 获取所有内容并使用嵌入的 youtube 视频播放）
3.  维密欧
4.  其他一些供应商

UI 将允许用户在选择一些视频时选择它的提供者。是否有人实现了类似的东西，您是否建议为此使用提供者模型或存储库模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:04:27.843

为了播放视频以使其以常用的方式使用 Provider 模型，或者实际上 provider 模型是[Strategy](http://www.dofactory.com/Patterns/PatternStrategy.aspx)模式（或类似于[Factory 方法](http://www.dofactory.com/Patterns/PatternFactory.aspx)）。您可以使用其中之一以常用方式播放视频。

将存储库模式与工作单元一起使用以进行数据访问，或者在您访问视频存储时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:13:21.870

听起来您正试图将模式强加到您的项目中。

我个人会制作一个使用策略模式调用提供者的 VideoManager 类。VideoManager 将具有以下功能：

1.  获取视频（字符串名称）
2.  获取视频（）
3.  搜索（字符串文本）
4.  上传视频（文件文件）

这些函数将调用适当的提供者、DAL 或任何你称之为的东西，它们会获取数据。您可以编写不同的视频提供者策略。

# google-app-engine - 从谷歌应用引擎中的实体获取文本属性

> ID：10566089
> 
> 赞同：0
> 
> 时间：2012-05-12T17:50:28.463
> 
> 标签：google-app-engine, google-cloud-datastore

我将一些大型文本数据作为文本对象存储到谷歌应用引擎数据存储中，`entityName.setProperty("textProperty", text)` 其中“文本”是文本类型对象。当我尝试获取文本时，我使用`entityName.getProperty("textProperty");` 因为它返回一个对象并将其存储为文本对象，所以我只是将它转换为文本使用`(Text)entityName.getProperty("textProperty");` 但是它给了我`java.lang.ClassCastException: java.lang.String cannot be cast to com.google.appengine.api.datastore.Text` 所以看起来应用程序将它存储为字符串，所以我这样做`(String)entityName.getProperty("textProperty");` 但它给了我这个 `java.lang.ClassCastException: com.google.appengine.api.datastore.Text cannot be cast to java.lang.String`

我很困惑：如何从数据存储中获取 Text 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:51:16.137

我`Text text = new Text(String);`习惯从字符串转换为文本，以及 `String s = text.getValue();`从文本转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T13:12:05.057

在 Google APP Engine 中将 TextProperty 与 JPA 映射时，我使用以下代码解决了我的问题。

我定义了一个Text属性内容，每当我做一个Set：我都会传递Text。每当我执行 Get 时，我都会使用 getValue() 方法返回一个字符串。它适用于我的。

```
@Column(name="content")
private Text content;
public void setContent(Text content) {
    this.content = content;
}
public String getContent() {
    return content.getValue();
} 
```

# c# - 为什么这会引发 System.FormatException？

> ID：10566090
> 
> 赞同：0
> 
> 时间：2012-05-12T17:50:34.463
> 
> 标签：c#

这是一个错误`string.Format`还是什么？

```
// Act
string l = "This is an UnitTest embedded resource.";
string r = "Please do not remove or change. Sincerely yours, {0}".FormatWith(model.Username);
string expected = "[\r\n\t{0}\r\n\r\n\r\n]\r\n{\r\n\t\r\n\t{1}\r\n\r\n}".FormatWith(l, r); 
```

该`FormatWith`方法只是语法糖的扩展。

```
public static string FormatWith(this string text, params object[] args)
{
    return string.Format(text, args);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T17:54:13.920

您的问题是尝试使用`{`和`}`格式字符串。它们需要转义，否则将被视为格式变量。

将最后一行更改为：

```
string expected = "[\r\n\t{0}\r\n\r\n\r\n]\r\n{{\r\n\t\r\n\t{1}\r\n\r\n}}".FormatWith(l, r); 
```

# ruby-on-rails - 无法与乘客一起部署

> ID：10566092
> 
> 赞同：0
> 
> 时间：2012-05-12T17:51:01.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment, passenger

我正在尝试使用 Rails 部署我的第一个应用程序。我无法部署它，而且我很不高兴，因为框架本身允许我非常快速地开发应用程序，但我只有两天的时间来完成部署工作:-(

我已经按照教程安装并配置了乘客（我正在使用 RVM）。当我访问该页面时，出现以下错误页面：[traceback here](http://pastebin.com/SpYLP2Db)（张贴在 pastebin 上以保持该帖子清晰）。

怎么了？我刚刚将整个项目上传到生产服务器上，运行`bundle install`，`rake db:create` `rake db:migrate`然后`rake db:seed`。我错过了一些步骤吗？

为什么它不运行？使用 Rails 3.2.3 和 Ruby 1.9.3 开发。

请帮我让它运行。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:17:25.660

我对您的问题知之甚少，但我知道并且知道发生了什么。如果有`class`参数，请检查事件模型中的 belongs_to 关联，将其替换为`class_name`.

# css - 如何使 div 粘在溢出的底部：自动父 div？

> ID：10566093
> 
> 赞同：0
> 
> 时间：2012-05-12T17:51:06.710
> 
> 标签：css, css-position

对将 div 粘贴到父 div 底部的常见问题稍作改动。在这种情况下，我希望卡住的 div 即使在其父级滚动时也能保持卡住，并且位于下方滚动的文本之上。有什么诀窍？jsfiddle在这里：http: [//jsfiddle.net/forgetcolor/vYjMv/1/](http://jsfiddle.net/forgetcolor/vYjMv/1/)。下面重复的代码：

```
 <!doctype html>
<html>
  <head>
    <style type="text/css">
      #wrapper {
        width:300px;
        height:300px;
        background-color:#eee;
        position:relative;
        overflow:auto;
      }

      .bot {
        border:1px solid #ddd;
        display:inline;
        position:absolute;
        bottom:0;
        right:0;
        color:blue;
      }

    </style>
    <title>tst</title>
  </head>
  <body>
    <div id="wrapper">
      <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sed tempor nibh. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec molestie tortor non nisi accumsan placerat. Morbi elit risus, venenatis et sodales congue, tristique vel ligula. Maecenas convallis arcu turpis. Praesent nibh leo, blandit ut posuere et, aliquet at sapien. Ut placerat, libero id faucibus pellentesque, leo nulla consectetur ligula, quis malesuada sapien nulla id diam. Nullam turpis nisl, malesuada non gravida eu, eleifend et quam. Proin sit amet elit euismod odio tincidunt tempor. Sed eleifend tincidunt blandit. Cras eget sapien odio, a sodales dui. Pellentesque tincidunt varius sagittis. Nullam nisl est, volutpat sed fringilla at, faucibus id mi. Phasellus vel lacus nibh, eget consectetur nulla. Quisque vel elementum nibh. Etiam vitae lectus erat, eu euismod est.
      </p>
      <span class="bot">bottom</span>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:03:41.093

您需要将另一个新的 div 与 warpper 的宽度和高度相同并将 div 粘贴到它：

检查这个：

```
<!doctype html>
<html>
  <head>
    <style type="text/css">
       #fake_wrapper{
        width:300px;
        height:300px;
        position:relative;
        overflow:none;
      }

      #wrapper {
        width:300px;
        height:300px;
        background-color:#eee;
        overflow:auto;
      }

      .bot {
        border:1px solid #ddd;
        display:block;
        position:absolute;
        bottom:0px;
        right:15px;
        color:blue;
      }

    </style>
    <title>tst</title>
  </head>
  <body>
    <div id="fake_wrapper">
    <div id="wrapper">
      <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sed tempor nibh. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec molestie tortor non nisi accumsan placerat. Morbi elit risus, venenatis et sodales congue, tristique vel ligula. Maecenas convallis arcu turpis. Praesent nibh leo, blandit ut posuere et, aliquet at sapien. Ut placerat, libero id faucibus pellentesque, leo nulla consectetur ligula, quis malesuada sapien nulla id diam. Nullam turpis nisl, malesuada non gravida eu, eleifend et quam. Proin sit amet elit euismod odio tincidunt tempor. Sed eleifend tincidunt blandit. Cras eget sapien odio, a sodales dui. Pellentesque tincidunt varius sagittis. Nullam nisl est, volutpat sed fringilla at, faucibus id mi. Phasellus vel lacus nibh, eget consectetur nulla. Quisque vel elementum nibh. Etiam vitae lectus erat, eu euismod est.
      </p>

    </div>
    <div class="bot">bottom fixed</div>
    </div>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:12:23.163

[检查这个](http://jsfiddle.net/libinvbabu/vYjMv/3/)。

制作`position: fixed`of`.bot`并添加了`top`and `left`。

# mod-wsgi - 在 mod_wsgi 下运行时激活 Flask 调试器

> ID：10566107
> 
> 赞同：12
> 
> 时间：2012-05-12T17:53:03.000
> 
> 标签：mod-wsgi, flask

在 mod_wsgi 下运行时如何激活 Flask 调试器？

我有`DEBUG`，`PROPAGATE_EXCEPTION`并`PRESERVE_CONTEXT_ON_EXCEPTION`设置为`True`，但调试器仍然没有出现在异常中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T23:15:08.113

如 Flask 文档中所述：

[http://flask.pocoo.org/docs/quickstart/#debug-mode](http://flask.pocoo.org/docs/quickstart/#debug-mode)

采用：

```
app.debug = True 
```

但是，在 mod_wsgi 下，您没有执行 app.run() 。

确保您在全局范围内设置“app.debug”，而不是在检查 __name__ 是否为 __main__ 的条件部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-25T19:44:53.103

您可以使用 werkzeug 提供的交互式调试器：

`from werkzeug.debug import DebuggedApplication application = DebuggedApplication(app, True)`

这是@jd 为我工作的earley 建议的。

# c - fputs( _("") ) 下划线代表什么？

> ID：10566109
> 
> 赞同：9
> 
> 时间：2012-05-12T17:53:23.963
> 
> 标签：c

我终于让自己看一些 linux 代码。我现在正在看“ls.c”。

在底部的函数“usage()”中，我发现了很多这样的语句：

```
 fputs (_("\
  List information about the FILEs (the current directory by default).\n\
  Sort entries alphabetically if none of -cftuvSUX nor --sort is specified.\n\
  \n\
  "), stdout); 
```

这是什么意思？它是像 L"string" 或 _T"string" 还是全新的东西？我还必须承认我不知道用什么词来搜索这样的东西。

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T17:59:05.650

这是 libintl aka gettext 用于可翻译字符串的约定。当它运行时，`gettext`函数（`_`别名为）将返回原始字符串或翻译后的字符串，具体取决于语言环境设置和所述字符串的可用性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T18:18:25.730

`_`是一个经常与[GNU gettext 包](http://www.gnu.org/software/gettext/)一起使用的宏。

GNU gettext 是一个包：

*   获取供人类阅读的消息字符串列表，并将这些字符串翻译成其他语言，并将它们编译到数据库中；
*   提供了一个名为 的例程，`gettext()`用于在该数据库中查找消息字符串并将消息的翻译返回为特定语言。

如果程序想要以用户在环境变量中选择的语言打印消息并通过`setlocale()`调用获取，它通常会执行以下操作

```
fprintf(stderr, gettext("I cannot open the file named %s\n"), filename); 
```

`gettext()`将在数据库中查找字符串的适当翻译`"I cannot find the file named %s\n"`并返回翻译后的字符串。

但是，这有点尴尬。[作为 GNU gettext 的文档说明](http://www.gnu.org/software/gettext/manual/html_node/Mark-Keywords.html)，许多程序使用宏来使`_(`*string成为**string*`)`的别名。`gettext(`*`)`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:57:29.410

当然，函数名可以包含一个`_`，并且 an`_`可以开始一个函数名。因此，可以简单地命名一个函数`_`。

所发生的`#define`只是调用了一个或一个真正的函数`_`。*

# java - 从另一个类调用类函数。错误

> ID：10566110
> 
> 赞同：0
> 
> 时间：2012-05-12T17:53:27.567
> 
> 标签：java, function, nullpointerexception, extends

简化：两个类。X 和 Y。

Y 扩展 X。

在 XI 通话中：

```
 Y periodic; 
```

然后在 XI 中调用 Y 的函数之一：

```
periodic.conditionDepreciate(); 
```

Y中的实际功能块是：

```
 public void conditionDepreciate() {
    ActionListener conditionDepreciation = new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
              if (ameba.health > 0) {
                  ameba.health -= 1;
              }
        }
    };
        new Timer(conditionDelayCount * 1000, conditionDepreciation).start();
} 
```

但无论函数是什么，我都会从 X 文件中得到一个错误消息：

> 在 X.(X.java:71)
> 在 X.main(X.java:245)的线程“主”java.lang.NullPointerException中的异常

第 71 行指的是我打电话时：

```
periodic.conditionDepreciate(); 
```

有人可以帮助解释错误吗？

编辑：

我希望 X 调用 Y 的各种函数。基本上，它们都是周期性事件计时器。

我最初在 X 类文件中有计时器，但为了提高可读性，我移到了它自己的类文件中。

我不确定需要用什么来初始化这样的东西... Y 扩展 X 所以它应该从 X 中获取所有值？（我认为...）

我在上面发布了一个计时器功能——我需要告诉 Y 类文件 ameba.health 是什么吗？或者 ？我想我只需要查找函数和类 >.>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T17:56:27.597

似乎是`periodic`引用的问题，因为您从不创建对象，例如

```
Y periodic = new Y(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T17:55:33.077

大概的值为`periodic`空。这是静态/实例字段的默认设置。您需要先为其分配一个非空引用，然后才能通过它调用方法。我们没有足够的信息来说明 的值`periodic` *应该*是什么——你是应该在某处创建一个新实例，还是使用现有的实例——但是在空引用上调用一个方法会给出一个`NullPointerException`...

如果您告诉我们更多有关您*希望*调用该方法的实例的信息，我们可能会提供进一步的帮助。

请注意，`Y`扩展的事实`X`在这里无关紧要。

# beagleboard - 嵌入式linux bitbake - 如何提取u-boot的源代码

> ID：10566113
> 
> 赞同：0
> 
> 时间：2012-05-12T17:53:44.280
> 
> 标签：beagleboard, u-boot

按照上的说明

[http://www.angstrom-distribution.org/building-angstrom](http://www.angstrom-distribution.org/building-angstrom)

我做了一个 $bitbake u-boot -c configure

它为 beagleboard 下载了 u-boot 的源代码和补丁。我想更改 u-boot 代码。如何从 bitbake 提取 u-boot 源以及应用的补丁？

文件夹内

构建/tmp-angstrom_v2012_05-eglibc/work/beagleboard-angstrom-linux-gnueabi/u-boot-2011.12-r8

里面有一个包含 u-boot 源的“git”文件夹。还有一个名为 2011.12 的文件夹，其中包含补丁。我不知道补丁是否已经应用或应用哪些补丁等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:43:17.737

这里有一组很好的步骤：http: [//elinux.org/EBC_Exercise_15_Configuring_U-boot](http://elinux.org/EBC_Exercise_15_Configuring_U-boot)。这是练习 13，您可能还需要查看练习 12。

祝你好运。

# php - 更改第一个 DropDownList 后如何从数据库中加载第二个 DropDown 列表

> ID：10566114
> 
> 赞同：0
> 
> 时间：2012-05-12T17:53:49.337
> 
> 标签：php, javascript, drop-down-menu

我正在构建一个 Web 应用程序。在某些时候，用户需要向表单输入数据。此表单有几个文本字段和`DropDownLists`.

其中一个 DDL 依赖于其先前的 DDL。发生的情况是，当用户从第一个 DDL 中选择一个值时，第二个 DDL 应该从数据库中加载与第一个 DDL 的所选值相关的数据。

到目前为止，我只实现了`PHP`and , `JS`（no或其他任何东西）来处理我的大部分问题。`AJAX``jQuery`

我想知道在选择第一个 DDL 上的项目后如何从数据库中填充第二个 DDL。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:01:54.823

这是一个例子：

[http://tutorialzine.com/2011/11/chained-ajax-selects-jquery/](http://tutorialzine.com/2011/11/chained-ajax-selects-jquery/)

谷歌是你的朋友 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:03:14.213

阿贾克斯是你最好的选择。 [这](http://roshanbh.com.np/2007/12/change-dropdown-list-options-values-from-database-with-ajax-and-php.html)会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:04:47.557

如果您习惯使用 jQuery（我强烈推荐），那么应该这样做：

```
$("#dropdown").on("change", function() {//change [dropdown] to the actual ID of your dropdown
    var selected=$(this).find("option:selected").val();//assuming your dropdown has a value to send, otherwise use text()

    $.get("options.php?selected="+selected, function(data) {
        var options=data.split("\n");
        var newSelectHTML="<select name=\"whatever\">\n";

        for (var i=0;i<options.length;i++) {
            newSelectHTML+="<option>"+options[i]+"</option>";
        }

        newSelectHTML+="</select>";
        $("#form").append(newSelectHTML);//again, change [form] to the correct ID.
    }
} 
```

这段代码简单地获取当前选择的 DDL 选项的值，ID 为“dropdown”（根据需要进行更改），并将其发送到 PHP 文件 options.php 中`$_GET["selected"];`。`\n`假设该文件随后输出由新行 ( )分隔的选项列表。然后，JavaScript 接受它，逐行拆分，遍历选项，并为新的 DDL 创建 HTML 并将其附加到元素 ID `form`。没有错误处理，但正如他们所说，这是读者的练习。返回的内容都在变量中`data`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T18:01:28.783

如果第二个下拉列表中的数据依赖于第一个下拉列表中的数据，那么您必须将第二个下拉列表的值加载到 javascript 对象中，如下所示：

```
// Given the options in the first dropdown are: "foo", "bar", and "baz"
var secondData = {
    foo: ['lorem', 'ipsum'],
    bar: [1,2,3],
    baz: []
} 
```

`secondData`将“更改”事件添加到第一个下拉列表，并给定该下拉列表的值，使用对象中包含的值加载第二个下拉列表的内容。

# twitter - 理论上推文的ID可以等于直接消息的ID吗？

> ID：10566116
> 
> 赞同：0
> 
> 时间：2012-05-12T17:54:20.240
> 
> 标签：twitter

在我的应用程序中，我可以成功读取和发送推文和直接消息，还可以读取它们各自的 ID。

理论上是否会发生某些推文的单个 ID 等于某些直接消息的 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:09:10.767

不会。Twitter的[Snowflake](http://engineering.twitter.com/2010/06/announcing-snowflake.html)意味着所有 ID 都是唯一的。因此，DM 和 Tweet ID 之间永远不会发生冲突。

# actionscript-3 - 如何使动态文本字段中的部分文本链接到另一个框架，就像超链接到 html 页面一样？

> ID：10566118
> 
> 赞同：0
> 
> 时间：2012-05-12T17:54:27.120
> 
> 标签：actionscript-3, hyperlink, flash-cs5, frame, dynamic-text

我在动态文本字段中有一个很长的经典文本，用 UIScrollBar 滚动它。它里面有很多引用，一部分是网络中的网站，一部分是我在一个带有文本字段的影片剪辑的不同帧中分发的其他文本。使用属性面板中的链接和目标字段从文本内部链接到外部网站没有问题。我使用带有 gotoAndStop 方法的函数使用按钮链接到特定框架没有问题。但我无法从文本中的选定单词导航到特定框架。实际上，我什至无法使用属性面板中的链接和目标字段导航到计算机内的文件。即使单击了“将文本呈现为 html”按钮，也不会呈现 Html 标记。由于滚动条，我无法将文本更改为静态。我可以' t 还在单词后面使用不可见的按钮，因为滚动会使它们不合适。我看不到 var 如何帮助我，因为它使文本字段仅显示选定的单词。锚似乎也无济于事，因为我无法定位文件，而只能定位 http。任何想法都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:52:53.773

你想要的都是可能的。但由于 Flash 文本字段错误，它有一个小缺点。首先，您的文本字段文本需要是 html 文本并且也是**可选**的。然后看这里： [Textfield链接事件](http://livedocs.adobe.com/flash/9.0_de/ActionScriptLangRefV3/flash/text/TextField.html#event%3alink)

```
 public function TextField_event_link() {
        myMP3 = new Sound();
        var text:TextField = new TextField();
        text.autoSize = TextFieldAutoSize.LEFT;
        text.multiline = true;
        text.htmlText = "Hello this is my little site. Click <a href=\"event:imprint\">here</a>for the imprint. And <a href=\"event:imprint\">here</a> for the about page. And if you're coming so far, also <a href=\"event:imprint\">here</a> for the exit";

        list.addEventListener(TextEvent.LINK, linkHandler);
        addChild(list);
    }

    private function linkHandler(linkEvent:TextEvent):void {
        switch(linkEvent.text)
        {
             case "imprint":
                 //display imprint
                 break;
             case "about":
                 //display about
                 break;
             case "exit":
                 //exit
                 break;
        }
    } 
```

您可以比较处理程序中的事件名称并发挥您的作用。如果您的文本不可选择，这将不起作用。如果 Adob​​e 已经用最新的播放器解决了这个问题，请不要这样做，但这困扰了我多年！

# c - 单行 fprintf 命令是线程安全的吗？

> ID：10566121
> 
> 赞同：5
> 
> 时间：2012-05-12T17:54:41.607
> 
> 标签：c, openmp

我正在使用 openmp，我的程序如下所示：

```
\#pragma omp parallel for

for(x = 0, y = 0, x < 5, x++, y++)

     function(x, y, fp);

void function(int x , int y, FILE* fp);
{
   fprintf(fp, "(%d, %d)\n", x y);
} 
```

我希望文件的内容为

```
(0, 0)
(2, 2)
(1, 1)
(3, 3)
(4, 4) 
```

排序无关紧要，但坐标 x, y 应该是有序的，即程序不应该生成类似 (2, 3) 的东西。这种行为是否总是得到保证？我在 linux 上使用 gcc 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:21:54.727

您的问题中有不相容的假设。OpenMp 不是 C 标准的一部分，因此 C 规范不能说明 OpenMp 的线程模型并确保任何关于其正确功能的安全性。直到最近，C 甚至还没有线程模型。

C11 现在有自己的线程模型，并且在该线程模型中，对 IO 流进行操作的函数是线程安全的：

> 每个流都有一个关联的锁，用于防止多个执行线程访问流时的数据竞争，并限制多个线程执行的流操作的交错。一次只能有一个线程持有这个锁。锁是可重入的：单个线程可以在给定时间多次持有锁。

我认为目前还没有完全实现 C11 的编译器，但通常 POSIX 系统上的 C 库可以满足这一特殊要求。当会有这样一个符合要求的实现时，将由位于其之上的 OpenMp 实现来记录其线程模型是否与 C11 的一致。

# jquery - 如何使用 jquery 一次追加文本和对象？

> ID：10566123
> 
> 赞同：1
> 
> 时间：2012-05-12T17:54:52.860
> 
> 标签：jquery

我有 2 个文本节点和 1 个 jquery 对象，我想将它们附加到 DOM 中，当我这样做时：

```
$('<div>')
.append("Ajax Failed, ")
.append($("<span>").addClass('counter').countDown({
    start:o.time,
         onEnd:function(){$.ajax(o.ajax);},
         onRetryEnd:function(){o.onFailed();}
 }))
 .append(" Seconds until resend request")
 .appendTo('#domElement').align({position:'absolute',parent:$('#domElement')}); 
```

它会完善（结果：Ajax 失败，6 秒后重新发送请求），但我想一次附加所有这些数据，例如：

```
 var counter = $("<span>").addClass('counter').countDown({
    start:o.time,
         onEnd:function(){$.ajax(o.ajax);},
         onRetryEnd:function(){o.onFailed();}
 });

 $('<div>').append('Ajax Failed, ' + counter + 'Seconds until resend request'); 
```

结果：Ajax 失败，[object object] 秒，直到重新发送请求。
有可能一次做吗？怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:57:57.117

这是因为最后一行中的加号。就像是：

```
 $('<div>').append('Ajax Failed, ', counter, 'Seconds until resend request'); 
```

应该管用。

# dependency-injection - 在温莎城堡上携带 CreationContext.AdditionalArguments

> ID：10566130
> 
> 赞同：4
> 
> 时间：2012-05-12T17:55:48.760
> 
> 标签：dependency-injection, castle-windsor, castle

我需要将一些参数传递给自定义 AbstractLifestyleManager 派生类型。

当我从容器请求一个类型的实例时，我使用以下重载：

```
T Resolve<T>(string key, object argumentsAsAnonymousType) 
```

例如：

```
public IHttpController CreateController(HttpControllerContext controllerContext, string controllerName)
{
    var controller = this.container.Resolve<IHttpController>(
        controllerName,
        new { requestProperties = controllerContext.Request.Properties });

    // ...
} 
```

然后，在自定义 AbstractLifestyleManager 派生类型中，我可以这样做：

```
var messageProperties = (IDictionary<string, object>)
            context.AdditionalArguments["requestProperties"]; 
```

它返回我预先传递的值。

但是，如果我调用`base.Resolve(context, releasePolicy)`AdditionalArguments 是 null 如果代码以递归方式输入自定义类型。

`base.Resolve`是否可以在调用之间传递/流动 AdditionalArguments ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T18:48:48.730

在实现生活方式管理器时，我不太确定流程是怎样的，但听起来 CreateContext AdditionalArguments 默认情况下不会传播到子上下文的问题。请参阅[另一个问题](https://stackoverflow.com/questions/10854701/resolving-httpcontrollercontext-with-castle-windsor)。

如果是这种情况，您可以尝试通过继承 DefaultDependencyResolver 来更改链接问题中描述的默认值。

# c - 未分配的字符串如何存储在内存中以及如何引用它？

> ID：10566131
> 
> 赞同：2
> 
> 时间：2012-05-12T17:55:55.867
> 
> 标签：c, string, pointers, reference, char

在这个例子中，两个字符串“jesus”似乎是相等的（相同的内存位置）。

```
printf("%p\n","jesus");
printf("%p\n","jesus"); 
```

另请注意：

```
printf("%p\n",&"jesus");
printf("%p\n","jesus"); 
```

打印相同，但是：

```
char* ptrToString = "jesus";
char* ptrToString = &"jesus"; //ERROR 
```

所以我想知道未分配的字符串如何存储在内存中以及如何指向它......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T18:01:18.623

`"jesus"`首先，为什么是`&"jesus"`相同的：`"jesus"`是一个类型的数组`const char[6]`，它衰减为指向第一个元素的指针。获取数组的地址会给你一个*指向数组*的指针，它的类型是`const char (*)[6]`。但是，指向数组的指针在数值上与指向其第一个元素的指针相同（只是*类型*不同）。

这也解释了为什么最后一行有错误 - 类型*类型*错误。你需要：

```
 const char (*pj)[6] = &"jesus"; 
```

最后，问题是重复的字符串文字是否具有相同的地址。这完全取决于编译器。如果它非常幼稚，它可以为源代码中每次出现的字符串文字存储一个单独的副本。如果它稍微聪明一点，它只会为每个字符串文字存储一个唯一的副本。字符串文字当然存储在内存中的某个地方，通常存储在程序映像的只读数据段中。将它们视为静态初始化的全局变量。

还有一件事：您的原始代码实际上是**undefined behavior**，因为`%p`需要一个`void *`参数，而不是 a`const char *`或 a `const char (*)[6]`。所以正确的代码是：

```
printf("%p\n%p\n", (void const *)"jesus", (void const *)&"jesus"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:12:53.080

C 是一种经过仔细指定的语言，我们可以对您的示例进行许多观察，以回答一些问题。

1.  字符文字作为初始化数据存储在内存中。他们有类型`array of char`。
2.  它们不一定是*字符串*，因为`nul`字节可以嵌入`\0`.
3.  不要求相同的字符串文字必须是唯一的，但是如果程序尝试修改字符串文字会发生什么，这是未定义的。这有效地允许它们在实现认为合适时是不同的或“实习的”。
4.  为了使最后一行工作，您需要：

    `char (*ptrToString)[] = &"jesus"; // now not an ERROR`

# eventbrite - 如何从 Eventbrite API 注册某些活动的门票

> ID：10566137
> 
> 赞同：3
> 
> 时间：2012-05-12T17:57:13.747
> 
> 标签：eventbrite

我正在查看 eventbrite api，我只是想知道有没有办法可以为某个事件注册一张新票，知道它是 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T01:55:33.087

Eventbrite 结合了[基于 Web 的工作流程](http://developer.eventbrite.com/doc/workflows/)来执行该任务。

提供指向您的活动页面的链接应允许用户自行完成注册。您还可以使用 Eventbrite 的基于 Web 的活动管理工具手动添加与会者。

出于安全和隐私方面的考虑，此功能不太可能作为 API 方法提供。

# c# - 如何检查多行文本框是否包含字符串？

> ID：10566148
> 
> 赞同：-4
> 
> 时间：2012-05-12T17:59:02.267
> 
> 标签：c#, winforms, textbox

.equals(textbox.text) 会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:05:50.077

您可以使用包含字符串的方法来找出它有一些您想要搜索的字符串。如果用于检查两个字符串是否具有相同的值，则使用相等方法。

试试这个在其他字符串中查找字符串。

```
textbox.Text.Contains("string to search"); 
```

# jquery - 带有轮播的脚本 Jquery 滑块

> ID：10566154
> 
> 赞同：0
> 
> 时间：2012-05-12T17:59:52.123
> 
> 标签：jquery, html, css, carousel

在过去的几天里，我一直在尝试制作一个 Jquery 滑块，但没有运气。我想知道是否有人可以帮我给这个 Jquery：http: [//jsfiddle.net/b374B/1/slider](http://jsfiddle.net/b374B/1/)最后一点，我在脚本方面很迷茫。还知道这个带有轮播的 Jquery 是基于这个站点的一个：http: [//halo.xbox.com/en-us](http://halo.xbox.com/en-us)

我将不胜感激有关如何执行此操作的所有说明或教程。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:04:09.363

这里有一些不错的 jQuery 插件可以解决问题：

*   [http://thomaslanciaux.pro/jquery/jquery_carousel.htm](http://thomaslanciaux.pro/jquery/jquery_carousel.htm)
*   [http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/](http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/)
*   [http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)
*   [http://baijs.nl/tinycarousel/](http://baijs.nl/tinycarousel/)

如果您对 jQuery 有一个大致的了解，应该很容易使用其中的任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:05:48.783

[**Nivo Slider**](http://nivo.dev7studios.com/)最棒的 jQuery Slider。

集成 16 种独特的过渡效果非常简单。

[使用 Nivo Slider 的高级教程](http://nivo.dev7studios.com/support/)

# php - 如何在我的网站上关注使用 Twitter 登录的用户？

> ID：10566155
> 
> 赞同：2
> 
> 时间：2012-05-12T18:00:00.753
> 
> 标签：php, twitter, twitter-oauth

```
require("twitteroauth/twitteroauth.php");  
session_start();
//Site Account
$siteauth = new TwitterOAuth('{Consumer key}', '{Consumer secret}', '{Access token}', '{Access token secret}');
$access_token = $siteauth->getAccessToken($_GET['oauth_verifier']);
$_SESSION['access_token'] = $access_token;
$site_info = $siteauth->get('account/verify_credentials');

var_dump($site_info); 
```

我正在尝试创建一个 $twitteroauth 对象以使用下一个代码：

```
$follows_faelazo = $siteauth->get('friendships/exists', 'MY-VISTOTR-ACCOUNT', 'user_b' => 'MY-SITE_ACCOUNT'));
if(!$follows_faelazo){
    echo 'You are NOT following @faelazo!';
    $siteauth->post('friendships/create', array('screen_name' => 'MY-VISTOR'));
} 
```

我想做的是关注使用 twitter 登录我的网站的用户，知道有什么问题吗？我对 twitter API 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:13:20.077

请转到[twitter 开发](https://dev.twitter.com/)-> 我的应用程序 -> 你的应用程序 -> 设置 -> 应用程序类型设置为读取、写入和访问直接消息。

首先，您正在检查您是否已经关注了该人。要做到这一点，需要 2 个参数。

```
 // uname
 1.) USER_FOLLOWING
 2.) USER_FOLLOWED 
```

现在第二个调用将是跟随方法，所以你可以跟随，因为这 1 个参数是 req。

```
//this can be uid/uname
1.) USER_T0_BE_FOLLOWED 
```

对于上述内容，请确保您使用适当的参数调用方法。

例如）首先你需要传递 4 个参数，client_id，client_secret，outhid，outhsecret

最初在此用户需要对应用程序进行身份验证之前。

其他一切都很好，希望您传递正确的参数，这只是一个问题。

# java - while(true) 与 socket.accept()

> ID：10566157
> 
> 赞同：1
> 
> 时间：2012-05-12T18:00:23.230
> 
> 标签：java, sockets

我阅读了一些关于 Java 中套接字的教程，我发现不同的示例对如何使用 ServerSocket 类有不同的解释。

例如，这里有两种不同的实现：

```
 Socket s = serverSocket.accept();
 //using s 
```

和

```
while(true)
{
   Socket s = serverSocket.accept();
} 
```

这两种情况有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T18:02:12.280

第一个只接受一个连接，而第二个将继续接受更多连接（每次达到`Socket s = serverSocket.accept();`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T18:02:26.523

从文档：

> 侦听要与此套接字建立的连接并接受它。该方法阻塞，直到建立连接。

在第一个示例中，您只使用一个连接，在第二个示例中使用无限连接，直到您手动停止它们 ( `break`)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T18:03:07.770

第二个例子*显然*`accept`永远保持连接。

# apache - 带有简单 .htaccess 文件的内部服务器错误 (500)

> ID：10566158
> 
> 赞同：0
> 
> 时间：2012-05-12T18:00:41.610
> 
> 标签：apache, .htaccess

我正在尝试在我的网络服务器上启用图像等缓存，所以我制作了这个`.htaccess`文件，但我的网络服务器显示内部错误 500。

这是文件，对我来说看起来不错...

```
<FilesMatch "\.(jpg|jpeg|png|gif|swf)$">
Header set Cache-Control "max-age=604800, public"
</FilesMatch> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T18:37:23.797

它在我自己的服务器上运行良好，所以那里没有错误……也许 mod_headers 没有启用？或者，也许您使用了一些 Apache 无法理解的奇怪编码？如果您只是将其复制粘贴到一个新文件中并覆盖现有文件怎么办？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T18:12:03.370

**您需要检查 apache 中的 mod_rewrite 模块是否已加载。这里是如何做到这一点的方向：**

[http://roshanbh.com.np/2008/04/check-enable-mod_rewrite-apache.html](http://roshanbh.com.np/2008/04/check-enable-mod_rewrite-apache.html)

# hadoop - 如何在hadoop dfs中检查集群的完整路径

> ID：10566162
> 
> 赞同：0
> 
> 时间：2012-05-12T18:01:29.613
> 
> 标签：hadoop, cluster-computing, microsoft-distributed-file-system

hadoop dfs 默认只有相对路径。例如

> hadoop dfs -ls / .... /tmp1/ .... /tmp2/

如何检查它来自哪个集群。完整路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:50:43.003

你只有一个集群，它是 Hadoop 集群，在这个集群中，你有一个 Namenode（可以添加 avatar 节点或备份节点）和多个 datanode。HDFS 在集群级别配置，因此 namenode 运行 HDFS 主组件，所有数据节点都运行 HDFS 从组件，但是从逻辑角度来看，集群中只有一个 HDFS 分散。

因此，现在当您调用 hadoop Dfs -ls 命令时，您将获得 HDFS 的逻辑视图，它将显示每个节点上可用的文件系统视图。这是每个人在任何节点都会看到的。

HDFS 配置解释了 HDFS 在你的 namenode 和 datanodes 中配置的物理文件夹。打开你的 conf/hdfs-sites.xml，它会告诉你物理路径是什么

```
<property>
 <name>dfs.name.dir</name>
 <value>FOLDER_INFO</value>
</property>
<property>
 <name>dfs.data.dir</name>
 <value>FOLDER_INFO</value>
</property> 
```

# php - 使用 jQuery 设置 cookie 使用 PHP 检索

> ID：10566169
> 
> 赞同：0
> 
> 时间：2012-05-12T18:02:50.783
> 
> 标签：php, jquery

我正在尝试在 SUCCESS 上使用 jQuery 设置 cookie 并使用 PHP 检索它 我的代码如下所示：

```
$.ajax({
    url: "ajax.php",
    type: "POST",
    data: { 
        tid: '.$testID.',
        do:"'.$do.'"
    },
    success: function( html ) {
        $("#partBox").html( html ); 
        var hgt = Math.ceil(($("#partBox").height() - 31) / 2); 
        $.cookie("partBoxH", hgt);
    }
}); 
```

和我的PHP：

```
isset($_COOKIE['partBoxH']) ? $_COOKIE['partBoxH'] : '50' 
```

由于某种原因它似乎不起作用......我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:08:40.263

首先设置 cookie，然后执行 AJAX 调用，如下所示：

```
$.cookie("partBoxH", hgt); 
```

比 AJAX 调用：

```
$.ajax({
    url: "ajax.php",
    type: "POST",
    data: { 
        tid: '<?php echo $testID;?>',
        do:"'<?php echo $do;?>'"
    },
    success: function( html ) {
        $("#partBox").html( html ); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:12:35.370

php 代码是否位于文件 ajax.php 中？...
在他的情况下，您是在 ajax 调用之后设置 cookie（成功时）。

# php - 从 image.php 将图像发布到 facebook

> ID：10566175
> 
> 赞同：-1
> 
> 时间：2012-05-12T18:03:46.150
> 
> 标签：php, facebook, image, facebook-graph-api

在我的索引文件中，我显示了来自 image.php 文件的随机图像。我正在尝试找到将索引文件中的图像显示发布到 facebook 墙上的方法。

有什么办法可以将 image.php 生成的图像发布到 facebook 墙上？

```
//index file
<img src="image.php">

//post to wall file
$facebook->api("/me/feed", "post", array(
    'message' => "",
    'picture' => "",       //same image from image.php goes here
    'link' => "",
    'name' => "",
    'caption' => ""
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:13:02.847

如果您的网站是 example.com，这应该可以正常工作：

```
'message' => 'http://example.com/image.php', 
```

注意：我建议与您的引号保持一致 - 始终使用单引号或双引号，不要像您在这里所做的那样混合它们。

## 更新

将显示图像的图像标签替换为：

```
//index file
<img src="image.php?postfb=1"> 
```

*图像.php*：

```
// image selection/generation code first
// there's probably an URL to the image here somewhere, I'll assume its $image_url

// then:
if (isset ($_GET ['postfb'])) {
    //post to wall file
    $facebook->api("/me/feed", "post", array(
        'message' => "",
        'picture' => $image_url, 
        'link' => "",
        'name' => "",
        'caption' => ""
    ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:50:16.397

试试这个代码

将图像路径存储在 $img_path 变量中，如下所示

```
$img_path = file_get_contents('imgage.php'); 
```

如果 image.php 显示图像的真实路径，例如：[http://www.example.com/image/sample.jpg](http://www.example.com/image/sample.jpg)。如果不让它成为真正的路径....否则它 fb 不会接受图像...

贴在FB墙上的代码

```
 $attachment = array('message' => 'message'
           'name' => 'Sample',
           'picture' => $img_path);

 $result = $facebook->api('/'. $fb_id . '/feed/', 
                          'post',
                           $attachment); 
```

# php - 从mysql的任何特定行单元格中提取详细信息

> ID：10566176
> 
> 赞同：0
> 
> 时间：2012-05-12T18:03:51.387
> 
> 标签：php, mysql

我想知道如何从 MySQL 数据库中的任何特定行单元格中提取详细信息。这些详细信息位于 MySQL 表的一个单元格中。具体来说，我想提取

```
cwall_id which is photos1187       
uri    which is photos/viewstory/1187
name     which is nmart
thumb which is uploads/userfiles/201205/13_03_pceb9.jpg 
```

我有这个：

```
a:1:{i:0;s:275:"a:4:{s:8:"cwall_id";s:10:"photos1187";s:3:"uri";s:21:"photos/viewstory/1187";s:4:"name";s:5:"nmart";s:5:"thumb";a:3:{i:0;s:40:"uploads/userfiles/201205/13_03_pceb9.jpg";i:1;s:40:"uploads/userfiles/201205/13_03_0wlih.jpg";i:2;s:40:"uploads/userfiles/201205/13_03_tq5wf.jpg";}}";} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:58:37.367

如果我理解正确，此单元格信息已使用序列化[http://php.net/manual/en/function.serialize.php保存](http://php.net/manual/en/function.serialize.php)

您需要先`unserialize` [http://www.php.net/manual/en/function.unserialize.php](http://www.php.net/manual/en/function.unserialize.php)它才能提取您需要的信息..

例子

```
$cell = 'a:1:{i:0;s:275:"a:4:{s:8:"cwall_id";s:10:"photos1187";s:3:"uri";s:21:"photos/viewstory/1187";s:4:"name";s:5:"nmart";s:5:"thumb";a:3:{i:0;s:40:"uploads/userfiles/201205/13_03_pceb9.jpg";i:1;s:40:"uploads/userfiles/201205/13_03_0wlih.jpg";i:2;s:40:"uploads/userfiles/201205/13_03_tq5wf.jpg";}}";}';
$list = unserialize($cell);
$info = unserialize($list[0]);
var_dump($info); 
```

输出

```
array
  'cwall_id' => string 'photos1187' (length=10)
  'uri' => string 'photos/viewstory/1187' (length=21)
  'name' => string 'nmart' (length=5)
  'thumb' => 
    array
      0 => string 'uploads/userfiles/201205/13_03_pceb9.jpg' (length=40)
      1 => string 'uploads/userfiles/201205/13_03_0wlih.jpg' (length=40)
      2 => string 'uploads/userfiles/201205/13_03_tq5wf.jpg' (length=40) 
```

你想要的信息

```
echo $info['cwall_id'] ;
echo $info['uri'] ;
echo $info['thumb'][1] ; 
```

# javascript - Backbone：从客户端部分的 json 文件中获取数据

> ID：10566178
> 
> 赞同：3
> 
> 时间：2012-05-12T18:04:41.203
> 
> 标签：javascript, json, backbone.js

使用`Backbone.js`，我想在模型或集合实例上调用 fetch 方法时从客户端部分的 Json 文件中获取数据。

`url property`我集合中的 ( )`MyCol`指向以下 json 文件，如下所示：

```
[
  {title: "_My trip to Bali", src: "bali-trip.jpg"},
  {title: "_The flight home", src: "long-flight-oofta.jpg"},
  {title: "_Uploading pix", src: "too-many-pics.jpg"}
] 
```

我执行以下命令：

```
myCol = new MyCol();
myCol.fetch(); // the Request Method GET is ok 
myCol.toJSON(); // [] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:44:16.570

请记住 fetch 不是同步函数。fetch 方法将向服务器发起请求，并通过事件或回调向您发出响应警报。

查看 fetch 方法的主干文档[http://documentcloud.github.com/backbone/#Model-fetch](http://documentcloud.github.com/backbone/#Model-fetch)。

尝试做这样的事情。

```
myCol = new MyCol();
myCol.fetch({
    success: function() { //This is fired if the request is succesful
        myCol.toJSON();
    }
}); 
```

或者

```
myCol = new MyCol();
myCol.on('change', function() { //This is fired if the model's attributes change
   myCol.toJSON();
});
myCol.fetch(); 
```

或者正如@roberkules 提到的， fetch 返回一个[jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)，所以你可以这样做。

```
myCol = new MyCol();
myCol.fetch()
     .done(function() {
         myCol.toJSON();
      })
      .fail(function() {
          alert('Oh No!');
      }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:35:06.027

@fguillen 说得对，您可以简单地使用`success and error callbacks`. 无论如何，由于成员需要是字符串，因此错误是您的 json 格式。

试试这个，它会工作：

```
[
  {"title": "_My trip to Bali", "src": "bali-trip.jpg"},
  {"title": "_The flight home", "src": "long-flight-oofta.jpg"},
  {"title": "_Uploading pix", "src": "too-many-pics.jpg"}
] 
```

# php - 有没有办法和厨师一起运行“蛋糕模式创建”？

> ID：10566180
> 
> 赞同：0
> 
> 时间：2012-05-12T18:04:47.617
> 
> 标签：php, mysql, cakephp, chef-infra, vagrant

我正在使用 Vagrant + Chef Solo 来设置 CakePHP 应用程序。我希望能够在我的食谱中调用“蛋糕模式创建”来创建数据库模式。我已将以下内容添加到我的默认配方中：

```
execute "create-db" do
  command "mysql -u root -p#{node[:mysql][:server_root_password]} -e 'CREATE DATABASE cakephp;'"
end

execute "load-db-schema" do
  command "/vagrant/cakephp/lib/Cake/Console/cake schema create -app /vagrant/cakephp/app"
end 
```

但是“蛋糕模式创建”任务需要用户干预（即，如果他们*真的*想删除所有表并重新创建它们，它会提示用户）。这个[问题](http://cakephp.lighthouseapp.com/projects/42648/tickets/1996-cake-schema-create-without-user-intervention)在 2011 年底打开，但看起来它不会去任何地方......

有没有办法配置厨师与脚本交互？

如果没有，有没有办法用 CakePHP 解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:00:11.630

目前没有办法用 CakePHP 做到这一点。但是，您可以通过将一系列答案输入脚本来绕过它。[我在这里](https://stackoverflow.com/questions/399734/input-from-within-shell-script)找到了答案。

如果要回答`'y'`每个提示，可以使用：

```
echo 'y' | cake schema create 
```

如果您只想使用默认值，您可以使用：

```
printf "\n\n" | cake schema create 
```

如果你想使用特定的响应，你可以列出它们，用换行符分隔。这将发送`'y'`然后`'n'`，删除表，而不是重新创建它们：

```
printf "y\nn\n" | cake schema create 
```

# javascript - 使用 Jquery 将 HTML 标记属性值存储在变量中

> ID：10566183
> 
> 赞同：1
> 
> 时间：2012-05-12T18:05:31.420
> 
> 标签：javascript, jquery, html

我正在使用 JQuery 开发应用程序。这是我正在使用的 HTML 代码片段：

```
<MarkNag class="altcheckboxoff" id="markable_38" Azpimark_id="100038">helburua </MarkNag>    
<MarkNag class="altcheckboxoff" id="markable_2"  Azpimark_id="100002">Oriolek </MarkNag>
<MarkNag class="altcheckboxoff" id="markable_39" Azpimark_id="100039">gas liberalizazioa </MarkNag> 
```

我在 HTML 页面中有下一个 JQuery 脚本：

```
<script type='text/javascript'>
   $("MarkNag").click(function (){
      $(this).toggleClass("highlight");
   });
</script> 
```

如果单击此 MarkNag 标记，我想知道如何将“markable_39”存储在变量中。我想我应该使用 .data()。但我真的不知道怎么做。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:10:11.823

此外，您可以只使用`this.id`，例如：

```
var id = this.id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T18:10:33.317

像这样做

```
$("MarkNag").click(function () 
 {
       $(this).toggleClass("highlight");

       var IdOfTag = this.id;
       //or
       IdOfTag = $(this).attr('id');  

 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T18:06:41.473

实际上，正确的代码是`$(this).attr("id")`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T18:12:21.287

```
$("MarkNag").click(function (){
   $(this).toggleClass("highlight");

   alert(this.id);               // Method 1: this.id
   alert($(this).attr('id'));    // Method 2: $(this).attr('id')
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T18:51:04.010

**在这里，您将从事件发生的地方获取对象**

```
var eventobject = arguments.callee.caller.arguments[0]; 
```

**在这里你可以访问 currentTarget 的任何属性（在本例中为 id）**

```
var id = $(eventobject.currentTarget).attr("id"); 
```

# python - 在 Python 中从一个类“移动”到另一个类

> ID：10566193
> 
> 赞同：2
> 
> 时间：2012-05-12T18:06:57.143
> 
> 标签：python, oop

所以，我正在解决这个问题，如果有人能指出我正确的方向，我将不胜感激。让我为你设置。

我有 1 个名为房间的 Python 文件/模块，里面充满了类，如下所示：

```
class Intro(object):

    def __init__(self):
         # Setting up some variables here

    def description(self):
        print "Here is the description of the room you are in" 
```

哪个很酷？然后在另一个名为 Engine 的文件/模块上。我有这个：

```
import rooms

class Engine(object):

    def __init__(self, first_class):
        self.lvl = first_class

    def play_it(self):
        next_lvl = self.lvl

        while True:
            # Get the class we're in & run its description
            next_lvl.description() # it works.
            # But how do I get the next class when this class is done? 
```

看看我想要发生的事情是基于用户在每个房间/级别类中的决定，引擎调用一个带有其描述功能/属性的新类。那有意义吗？还是我应该考虑另一种方式？我有时会倒退。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:36:24.413

将选择接下来要使用的班级委托给房间。例如

```
class Intro(object):

    def __init__(self):
         # Setting up some variables here

    def description(self):
        print "Here is the description of the room you are in"

    def north(self):
        return Dungeon()

    def west(self):
        return Outside()

    #etc 
```

因此，当玩家在 Intro 房间中说“向西”时，引擎会调用`room.west()`并且`Intro`房间返回`Outside`房间。

希望这是足够的提示！我希望你会想要自己设计。

# ruby - ajax响应后获取/转储/下载页面

> ID：10566195
> 
> 赞同：0
> 
> 时间：2012-05-12T18:07:25.580
> 
> 标签：ruby, ajax, nokogiri, response

这里的示例代码：

```
需要'nokogiri'
需要'open-uri'

开始
    doc = Nokogiri::HTML(open(url))
救援
    提出“Fehler ist aufgetretten...”
结尾

```

页面的某些部分是异步加载的，我缺少一些值，这些值稍后会加载。有什么方法可以打开 url，等待 10 秒，然后将其分配给变量**doc**？欢迎使用 bash/lynx/wget 的任何解决方案/想法：)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:37:11.407

不幸的是，等待 10 秒是行不通的，因为 open-uri 和 Nokogiri 都不会执行异步加载内容的 javascript。您需要使用像[Watir](http://watir.com/)或[Watir-webdriver](http://watirwebdriver.com/)这样的浏览器驱动程序。如果 JRuby 是一个选项，您可以使用[Celerity](http://celerity.rubyforge.org/)，它是一个支持*某些*javascript（使用 Watir API）的浏览器模拟器，并且可能会执行您需要的任务。

# python - 为什么附加到列表会破坏我的 for 循环？（Python）

> ID：10566198
> 
> 赞同：1
> 
> 时间：2012-05-12T18:07:34.703
> 
> 标签：python, loops, append

```
for family in city.familyList:
    for member in family.membersList:
        if member.sex == "male":
            if member.status == "eligible":
                print "There were", len(family.membersList), "members of family", family.familyName
                family.membersList.remove(member)
                print "Now there are", len(family.membersList), "members of family", family.familyName
                member.status = "needs a wife"
                print member.firstName, member.status
                print "There were", len(city.familyList), "families"
                city.familyList.append(Family(member.lastName, member))
                print "Now there are", len(city.familyList), "families" 
```

使用这段代码，我试图遍历家庭成员列表，找到 18 岁以上的男性，将他们从家庭中移除，并开始他们自己的家庭。如果我在循环末尾注释掉附加，它可以正常工作（当然，不会增加家庭的数量）。如果我执行附加，这就是它的样子：

```
Ticking Disan
There were 5 members of family Evnes
Now there are 4 members of family Evnes
Gregor needs a wife
There were 6 families
Now there are 7 families
There were 7 members of family Bhworth
Now there are 6 members of family Bhworth
Ewan needs a wife
There were 7 families
Now there are 8 families

debugger.run(setup['file'], None, None)
  File "C:\Users\Mark\Desktop\eclipse-SDK-3.7.2-win32\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc\pydevd.py", line 1060, in run

pydev_imports.execfile(file, globals, locals) #execute the script
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 610, in <module>
    main()
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 74, in main
    done = menu()
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 77, in menu
    genWorld()
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 116, in genWorld
    dispWorld(oneWorld)
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 135, in dispWorld
    displayTick(world)
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 317, in displayTick
    calcMarriage(city)
  File "C:\Users\Mark\workspace\WorldPop\WorldPop.py", line 359, in calcMarriage
    for member in family.membersList:
TypeError: iteration over non-sequence 
```

我意识到当 for 循环循环回到起点以搜索新的 memberList 时，问题就出现了，我只是不明白为什么执行附加会破坏循环。非常感谢任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:32:58.533

您要附加的新`Family`实例有一个`membersList`属性，但它不支持迭代（for/in）。这就是您收到此异常的原因。

即使在修复了这个问题之后，您也可以通过在迭代序列时修改序列来为自己准备好惊喜。尝试这个：

```
for family in city.familyList[:]:
    for member in family.membersList[:]:
        # ... 
```

切片语法创建每个列表的`[:]`副本，因为它存在于循环的开头。对原始列表的修改不会影响副本，因此在循环执行期间不会有任何意外。

如果您确实需要在循环中包含在`for`循环中找到/创建的新项目`for`，我建议迭代一个`Queue.Queue`对象并将每个对象插入到该队列中进行探索。当没有新的探索时，队列将为空并且循环将停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:22:29.193

一般来说，修改您正在迭代的集合是一个非常糟糕的主意（您既要删除又要`family.membersList`添加到`city.familyList`）。

根据您正在迭代的数据结构和迭代算法，更改迭代集合可能会导致项目被跳过或多次查看。我认为这在大多数情况下都是不安全的，除非文档明确说明。

# javascript - 为什么属性不透明度可用于阅读但字体大小不可用？

> ID：10566199
> 
> 赞同：2
> 
> 时间：2012-05-12T18:07:58.307
> 
> 标签：javascript

如果我想读取 javacript 中的不透明度值，我可以使用

```
element.style.opacity 
```

但如果我想要 fontSize 我必须使用下面的函数。

```
function findFontSize( element_id )
{
    var element = document.getElementById( element_id );  
    // var theCSSprop = element.style.fontSize; // Does not work  
    // var theCSSprop = element.getPropertyValue("font-size"); // Does not work
    var theCSSprop = window.getComputedStyle( element, null ).getPropertyValue("font-size");  // This works
    alert( theCSSprop ); 
} 
```

有关的

[http://jsfiddle.net/tUc5v/](http://jsfiddle.net/tUc5v/)

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:17:52.460

显式定义的 CSS 样式和继承的样式有不同的语法。我猜测（尽管您的 jsfiddle 与问题不匹配）正在显式设置不透明度，但 fontSize 是继承的。

更新：找到这个旧评论，以为我会多给一点......

如果一个元素没有在样式表或内联中明确定义的样式，那么它将回退到无法通过该`element.style.property`方式访问的计算样式。

另一个区别是，样式对象上的显式样式是驼峰式，而计算样式是连字符大小写。

另外需要注意的是，通过样式对象访问的属性比 window.getComputedStyle（或 document.defaultView.getComputedStyle）快 3 到 4 倍。

这是一个可以为任何样式执行此操作的基本功能（它不检查不正确的输入等。）

```
/**
 * 
 * @param el Element
 * @param CSS property in hyphen case 
 * @param pseudo pseudo selector (optional, e.g. '::before')
 */
function getStyleValue(el, property, pseudo) {
    // convert hyphen-case to camelCase
    const elStyle = el.style[property.replace(/(\-[a-z])/g, $1 =>  $1.toUpperCase().replace('-',''))];
    return ((elStyle !== '' && !pseudo) 
        ? elStyle
        : window.getComputedStyle(el, pseudo).getPropertyValue(property));
} 
```

# php - PHPmailer gmail 'from' 是 gmail 帐户

> ID：10566200
> 
> 赞同：3
> 
> 时间：2012-05-12T18:08:07.143
> 
> 标签：php, email, gmail, phpmailer

我正在尝试使用 PHPmailer 和 gmail 发送邮件。但是，当我从我的 gmail 帐户发送邮件而不是不回复时。如何将无回复设置为来自？

我有的代码：

```
$mail = new PHPMailer();  

$mail->Mailer = "smtp";
$mail->Host = "ssl://smtp.gmail.com";
$mail->Port = 465;
$mail->SMTPAuth = true; 
$mail->Username = "myAccount@web.com"; 
$mail->Password = "password"; 

$mail->From     = "no-reply@web.com";
$mail->AddAddress($to);  
$mail->AddReplyTo("no-reply@web.com","no-reply");

$mail->Subject  = $subject;
$mail->Body     = $msg;
$mail->WordWrap = 150; 
$mail->send(); 
```

我收到的邮件（标题）：

```
Return-Path: <myAccount@web.com> 
```

应该是 no-reply@web.com

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:56:06.930

我建议尝试两种选择：

1.  登录到 myaccount@web.com 的 Google Apps 邮件帐户，依次转到设置、帐户、发送邮件为，并确保 no-reply@web.com 已得到验证。我没有对此进行测试，但这应该允许从 no-reply@web.com 发送邮件，而不是代表 myaccount@web.com 从 no-reply@web.com 发送邮件。

2.  实际上使用用户名 no-reply@web.com 在 Google Apps 上创建一个用户，并通过该帐户发送电子邮件。如果 myaccount@web.com 需要副本，您始终可以密件抄送地址并在 no-reply@web.com 上设置过滤器，以将任何故障转发到 myaccount@web.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:29:57.297

你不能这样做。想象一下发送邮件，提示您从某个地址回复您的银行帐户凭据`validation@yourbank.com`。

要获得无回复地址，您必须有权访问`@your.domain`（不是 gmail）中的邮件服务器并在那里创建此类帐户，然后使用此帐户发送电子邮件。

# php - jquery比较两个字段值

> ID：10566202
> 
> 赞同：0
> 
> 时间：2012-05-12T18:08:19.780
> 
> 标签：php, javascript, jquery, html, css

嗨，我有一个注册表单，它有六个输入字段

# html代码

```
<div id="signup">
    <form  id="suform" method="POST" action="signup/newUser">
        <p>
            <label>Frist Name</label>
            <input type="text" name="fName"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Last Name</label>
            <input type="text" name="lName"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Email</label>
            <input type="text" name="Email"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Mobile Number</label>
            <input type="text" name="MNumber"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Password</label>
            <input type="password" name="Password"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <label>Re Password</label>
            <input type="password" name="RePassword"/>
            <span class="errorMessage"></span>
        </p>
        <p>
            <input type="submit" class="button" value="sign up"/>
        </p>
    </form>
</div> 
```

当用户单击注册按钮时，首先我确保没有输入字段为空，如果我发现任何输入字段为空，那么我会在该输入字段左侧打印一条错误消息，

# jQuery代码

```
$(document).ready(function(){
    $('#suform').on('submit', function(e){
        e.preventDefault();
        var errorCount = 0;
        $('span.errorMessage').text(''); // reset all error mesaage
        $('input').each(function(){
            var $this = $(this);
            if($this.val() === ''){
                var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        if(errorCount === 0){
            $(this)[0].submit(); // submit form if no error
        }
    });
}); 
```

我希望用户输入他的密码两次以确保他保存它

我的问题是如何检查两个密码输入字段是否相等，如果不相等，我想在这两个输入字段的左侧打印一条消息错误

[代码](http://jsfiddle.net/Wiliam_Kinaan/8wV58/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:16:08.837

*检查字段并在没有*jQuery的情况下显示错误：

```
if (document.forms[0].Password.value != document.forms[0].RePassword.value) {
    document.forms[0].Password.parentNode.getElementsByClassName("errorMessage")[0].innerHTML="Passwords aren't the same!";
    document.forms[0].RePassword.parentNode.getElementsByClassName("errorMessage")[0].innerHTML="Passwords aren't the same!";
} 
```

如果页面上有多个表单（甚至只是一个搜索表单），您需要`document.forms[0]`相应地进行调整。

要在表单中使用此代码，请添加`onsubmit="return checkForm();"`到表单标签，例如：

```
<form  id="suform" method="POST" action="signup/newUser" onsubmit="return checkForm();"> 
```

然后，在您的脚本标签中，创建函数 checkCode，如果出现问题，它将返回 false（换句话说，停止表单提交）：

```
<script type="text/javascript">
<!--
    function checkCode() {
        if (document.forms[0].Password.value != document.forms[0].RePassword.value) {
            document.forms[0].Password.parentNode.getElementsByClassName("errorMessage")[0].innerHTML="Passwords aren't the same!";
            document.forms[0].RePassword.parentNode.getElementsByClassName("errorMessage")[0].innerHTML="Passwords aren't the same!";
            return false;
        }
    }
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T18:18:12.730

好吧，我想这可能会奏效。，

```
 var password= $('input[name="Password"]').val();
 var repass= $('input[name="RePassword"]').val();

 if(password!=repass){
  var error = 'Password not matching';
       $('input[name="RePassword"]').next('span').text(error);
       $('input[name="Password"]').next('span').text(error);
         errorCount = errorCount + 1;  
  }else if(password=="" || repass==""){
            if(password==""){
        var error = 'Please enter a password.';
       $('input[name="Password"]').next('span').text(error)
         errorCount = errorCount + 1;  
    }else{
           var error = 'Please enter a repassword.';
       $('input[name="RePassword"]').next('span').text(error)
         errorCount = errorCount + 1;  
  }
   }
   }else{
     continue;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T18:27:45.260

```
 $(document).ready(function(){
    $('#suform').on('submit', function(e){
        e.preventDefault();
        var errorCount = 0;
        $('span.errorMessage').text(''); // reset all error mesaage
        $('input').each(function(){
            var $this = $(this);
            if($this.val() === ''){
                var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        if($('input[name="Password"]').val() != $('input[name="RePassword"]').val())
        {
            var error = 'Password not match'; // take the input field from label
            $('input[name="RePassword"]').next('span').text(error);
            errorCount = errorCount + 1;   
        }
        if(errorCount === 0){
            $(this)[0].submit(); // submit form if no error
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T18:13:00.963

你可以这样做：

```
var pass1 = $('input[name=Password]').val();
var pass2 = $('input[name=RePassword]').val();
if(pass1 != '' && pass1 != pass2) {
    //show error
    var error = 'Password confirmation doesn\'t match.';
    $('input[name=Password]').next('span').text(error);
    $('input[name=RePassword]').next('span').text(error);
    errorCount = errorCount + 1;   
} 
```

标签中的“for”属性使用如下：

```
<label for="myPasswordField">
    <input type="password" id="myPasswordField" name="Password" />
</label> 
```

因此，当您单击标签时，这会将焦点设置在具有该 ID 属性的相关元素上。

要检查电话字段是否是您需要的号码：

```
var mobile = $('input[name=MNumber]').val();
if(isNaN(parseFloat(mobile )) && !isFinite(mobile )) {
    var error = 'Mobile number incorect.';
    $('input[name=MNumber]').next('span').text(error);
    errorCount = errorCount + 1; 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T18:17:11.743

像这样的东西？[http://jsfiddle.net/K5CMC/](http://jsfiddle.net/K5CMC/)

```
var $this = $(this);

            if($this.val() === ''){
                var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }else if($this.attr('id') === 'Password'){
                //compare the two fields
                if($('#Password').val() !== $('#RePassword')){
                    //they don't match, do stuff

                }
            } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-12T18:25:23.460

你可以像[JsFiddle 上的这个 Demo 那样做](http://jsfiddle.net/H9f2f/)

```
$(document).ready(function(){
    $('#suform').on('submit', function(e){
        e.preventDefault();
        var errorCount = 0;
        $('span.errorMessage').text(''); // reset all error mesaage
        $('input').each(function(){
            var $this = $(this);
            if($this.val() === ''){
                var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
            else
            if($(this).attr('name') == "RePassword")
                if($('input[name=Password]').val() != $(this).val())
                    alert("must have same password");
        });
        if(errorCount === 0){
            $(this)[0].submit(); // submit form if no error
        }
    });
});​ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-12T18:14:03.410

```
 <p>
        <label>Password</label>
        <input type="password" name="Password"/>
        <span class="errorMessage"></span>
    </p>
    <p>
        <label>Re Password</label>
        <input type="password" name="RePassword"/>
        <span class="errorMessage"></span>
    </p>

if ( $("input[type=password][name='Password']").val() == $("input[type=text][name='RePassword']").val(){
    //Do this
} 
```

# python - 如何在保留括号的同时拆分字符串

> ID：10566204
> 
> 赞同：3
> 
> 时间：2012-05-12T18:08:37.560
> 
> 标签：python, regex

我正在拆分字符串以生成字典的键，但我遇到了括号问题。

我想把字符串**当代建筑（2000 ce to present）**分成三个键：`contemporary`、`building(s)`和`(2000 c.e. to present)`

到目前为止，我一直在使用`re.findall('\w+', key)`

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:30:23.940

`re.findall('[(][^)]*[)]|\S+', key)`如果括号内没有括号，您也可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T18:20:48.517

您可能可以使用正则表达式来做到这一点。你绝对可以用解析器来做到这一点。不过，这两者都非常复杂，所以除非您需要更多的功能和通用性，否则为什么不将这些部分合并`re.findall('\w+', key)`在一起呢？

```
parts = re.findall('[\w)(\.]+', key)
[parts[0], parts[1], parts[2] + " " + parts[3] + " " + parts[4] + " " + parts[5]] 
```

更一般地，您可以遍历计算开括号和右括号的数量的部分。保留一个计数器，该计数器为每个打开的括号递增，为每个关闭的括号递减。每次计数器从 0 变为 1 时，开始连接部分并在再次达到 0 时停止。

这些简单的解决方案取决于您的字符串是否相当简单且表现良好，但所有解决方案都会在某种程度上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T19:01:51.430

以下正则表达式应该使用`re.findall`：

```
(?:\w+(?:\(\w+\))?)|(?:\([\w\ \.]+\))) 
```

第一组`(?:\w+(?:\(\w+\))?)`匹配一系列单词字符，后跟括号内的一系列可选单词字符。

```
\w+ - word character one or more times
\(\w+\)? - (optional) opening parenthesis, word character one or more times,
           closing parenthesis 
```

第二组`(?:\([\w\ \.]+\)))`匹配括在括号中的任何单词字符、空格或句点。

```
\([\w\ \.]+\) - opening partnthesis, (either a word character,
                space or period one or more times), closing parenthesis 
```

每个组的`?:`开头只是意味着不捕获它，因此`.findall`只返回您想要的匹配项。

这只保证在您提供的示例或非常相似的示例上有效，并且如果输入中会有更多差异，则可以做一些额外的考虑，但这是一个开始。

# iphone - 将 UIImageView 添加到 UITableViewCell？

> ID：10566205
> 
> 赞同：0
> 
> 时间：2012-05-12T18:08:38.470
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我在将 UIImageView 添加到单个 UITableView 单元格时遇到了真正的麻烦。在我的故事板中，我有一个 UITableViewController 和四个原型动态单元格。其中三个与正常的左侧细节单元格一样好，并且工作正常。但是其中一个我需要有一个 UIImageView 。

所以我在单元格中添加了所说的视图，给单元格一个带有属性的自定义类，这样我就可以访问图像视图。

我有以下单元格：

标题单元格。
图像单元。
网址单元格。
笔记单元格。

表格视图的内容会根据用户是否要添加 URL、注释或图像而改变。所以用户总是看到标题单元格和其他单元格之一。

这是我的代码，无论出于何种原因，我都无法让 UIImageView 显示在该图像单元格上。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"Cell";

    //0 = Image
    if ([[NSUserDefaults standardUserDefaults] integerForKey:@"NewScrapbookEntry"] == 0) 
    {
        if (indexPath.row == 0) CellIdentifier = @"titleCell";
        if (indexPath.row == 1) CellIdentifier = @"imageCell";
        if (indexPath.row == 2) CellIdentifier = @"notesCell";
    }
    //1 = URL
    else if ([[NSUserDefaults standardUserDefaults] integerForKey:@"NewScrapbookEntry"] == 1) 
    {
        if (indexPath.row == 0) CellIdentifier = @"titleCell";
        if (indexPath.row == 1) CellIdentifier = @"urlCell";
        if (indexPath.row == 2) CellIdentifier = @"notesCell";
    }
    //2 = Notes
    else if ([[NSUserDefaults standardUserDefaults] integerForKey:@"NewScrapbookEntry"] == 2) 
    {
        if (indexPath.row == 0) CellIdentifier = @"titleCell";
        if (indexPath.row == 1) CellIdentifier = @"notesCell";
    }

    ScrapbookImageDetailCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[ScrapbookImageDetailCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
        cell.editingAccessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    [cell setBackgroundColor:[UIColor colorWithRed:250.0f/255.0f green:250.0f/255.0f blue:250.0f/255.0f alpha:1.0f]];
    [cell setSelectionStyle:UITableViewCellSelectionStyleGray];

    cell.textLabel.adjustsFontSizeToFitWidth = YES;

    cell.textLabel.text = [firstSection objectAtIndex:indexPath.row];
    cell.detailTextLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:13.0f];
    cell.detailTextLabel.numberOfLines = 0;
    cell.accessoryView = nil;

    switch (indexPath.section) 
    {
        case 0:
            switch (indexPath.row) 
        {
            case 0: 
            {                
                cell.detailTextLabel.text = scrapbook.title;
            } 
                break;

            case 1: 
            {
                //0 = Image
                if ([[NSUserDefaults standardUserDefaults] integerForKey:@"NewScrapbookEntry"] == 0) 
                {
                    cell.detailTextLabel.text = nil;
                    cell.iv.image = [UIImage imageNamed:@"image.png"];
                }
                //1 = URL
                else if ([[NSUserDefaults standardUserDefaults] integerForKey:@"NewScrapbookEntry"] == 1) 
                {
                    cell.detailTextLabel.text = scrapbook.url;
                }
                //2 = Notes
                else if ([[NSUserDefaults standardUserDefaults] integerForKey:@"NewScrapbookEntry"] == 2) 
                {
                    cell.detailTextLabel.text = scrapbook.notes;
                }
            } 
            break;

            case 2:
            {
                cell.detailTextLabel.text = scrapbook.notes;
            }
            break;

            default:
                break;
        }
        break;

        default:
            break;
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T18:45:48.217

为什么要更改标识符值？您只需制作自定义单元格，并在行的高度中，检查它是否是您想要的行，并返回图像的高度，否则为默认大小，在单元格中为行方法，再次检查所需的行并添加图像你想添加其他使 imageview 为零。

# http - 如何在不杀死服务器资源的情况下建立持久的 TCP 连接？

> ID：10566208
> 
> 赞同：0
> 
> 时间：2012-05-12T18:08:54.740
> 
> 标签：http, connection

我正在编写一个玩具示例来进行 NAT 遍历。对广泛使用的桌面应用程序如何做到这一点感兴趣，我使用了wireshark 来尝试分析它的流量。在对输出进行一些研究后，我意识到服务器通知（例如，“新文件添加到您的 xxx 文件夹”）使用某种 Comet 机制工作，具有长寿命的 HTTP 连接。但最让我吃惊的是，尽管流量很低（1 个 HTTP GET 及其每分钟的响应），但 TCP 连接从未关闭。我可以保证连接在至少 20 分钟内没有关闭。

到目前为止，我的理解是同时打开大量长寿命的 TCP 连接会很快消耗服务器的资源（主要是内存方面）。所以我的问题是，这种应用程序如何能够长时间有效地保持如此大量的 TCP 和 HTTP 连接同时打开？他们是否使用某种特殊的服务器？还是只需要添加硬件以进行水平扩展？

我用谷歌搜索了很多试图找到答案，但没有运气。也许我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:48:06.513

也许你可以看看[epoll](http://en.wikipedia.org/wiki/Epoll) (Linux)、[kqueue](http://en.wikipedia.org/wiki/Kqueue) (freebsd)、[libev](http://software.schmorp.de/pkg/libev.html)和 libevent 来了解一下。

来自 epoll 的维基百科页面：“其中观看的文件描述符的数量很大”。您可以用 TCP 套接字替换“监视的文件描述符”。

# gwt - 使用 UiBinder 生成单元格

> ID：10566211
> 
> 赞同：3
> 
> 时间：2012-05-12T18:10:01.873
> 
> 标签：gwt, uibinder

GWT 提供以下作为为 a 构建单元的示例`CellList`：

```
 /**
   * A simple data type that represents a contact.
   */
  private static class Contact {
    private static int nextId = 0;

    private final int id;
    private String name;

    public Contact(String name) {
      nextId++;
      this.id = nextId;
      this.name = name;
    }
  }

  /**
   * A custom {@link Cell} used to render a {@link Contact}.
   */
  private static class ContactCell extends AbstractCell<Contact> {
    @Override
    public void render(Context context, Contact value, SafeHtmlBuilder sb) {
      if (value != null) {
        sb.appendEscaped(value.name);
      }
    }
  } 
```

如果我有一个复杂的单元格，那么简单地返回一个安全的 HTML 字符串`render()`会变得乏味。有没有办法为此使用 UiBinder，或者比手动构建 HTML 字符串更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T19:22:18.397

GWT 2.5 将`UiRenderer`为此添加：利用`*.ui.xml`模板构建*渲染器*，使用模板变量，在渲染时获取子元素的句柄等。

在等待 GWT 2.5 之前，您可以使用`SafeHtmlTemplates`，将*模板*拆分为单独的方法，然后将它们组合以构建单元格的内容。

# objective-c - 如何从在线目录加载 UIImage 数组中的图像并将其存储在 App 中

> ID：10566216
> 
> 赞同：0
> 
> 时间：2012-05-12T18:10:40.640
> 
> 标签：objective-c, ios, xcode

当我的应用程序从网站启动时，我想加载多个图像（即[http://hello.com/images/](http://hello.com/images/)中的所有图像，名为 1.png、2.png、3.png..），以便图像可以在程序中的任何地方使用，而无需每次我想访问它们时重新加载它们。

我可以简单地创建一个包含静态 NSArray 的类并在开始时填充它，然后在需要图像时创建此类的实例，或者有更好的方法吗？

现在，我正在使用以下代码加载图像：

```
UIImage *image =[[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://hello.com/images/%@.png,item]]]]; 
```

我想让应用程序尽可能高效，所以我担心创建多个对象会使其要求很高。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:29:46.710

您可以尝试在应用程序启动时在单独的线程中异步下载图像并稍后使用它。

[这](https://stackoverflow.com/questions/1728631/asynchronous-request-to-the-server-from-background-thread)是张贴者使用自定义类在后台异步下载图像的SO问题和答案。

试试这个以有效下载图像，UI 也不会被阻止。

# asp.net - 图像不在浏览器中渲染 - MVC3 razor

> ID：10566218
> 
> 赞同：1
> 
> 时间：2012-05-12T18:11:01.973
> 
> 标签：asp.net, asp.net-mvc-3, image, web

我正在尝试学习 MVC3 剃须刀，但每当我尝试显示存储在本地计算机上的图像时，我都会遇到障碍。图像显示为图像占位符（如下所示），而不是浏览器渲染图像。

[占位符图片](http://img694.imageshack.us/img694/1430/imgplaceholder.png)

我试图将其简化为仅使用常规的 html img 标签，但没有运气。但是，当它指向网络上托管的图像时，一切正常。路径是正确的，因为它显示的是占位符而不是红色 x（它在找不到图像时显示）。

```
<img id="img" src="file:///C:/WebSite/Images/img1.jpg" alt="" /> 
```

我唯一能想到的是某种未正确设置的权限或配置。我已经为指向图像的文件夹和图像本身设置了权限。我的 Web.config 是默认的，我对 global.aspx 所做的唯一更改是注册路由。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Trending", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:32:47.120

您可以使用 Url.Content 帮助程序，假设您的 Images 文件夹位于应用程序的根目录中，它将类似于：

```
<img id="img" src="@Url.Content("~/Images/img1.jpg")" alt="" /> 
```

# php - 欧元符号编码 - PHP

> ID：10566221
> 
> 赞同：2
> 
> 时间：2012-05-12T18:11:33.383
> 
> 标签：php, curl, encoding, euro

我尝试了很多不同的东西，但无法显示欧元符号。我正在使用 cURL 来解析页面。页面以 ISO-8859-1 编码

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

页面上有一个欧元符号，当我使用

```
$curl_scraped_page = curl_exec($ch); 
```

我刚拿到一颗里面有问号的黑色钻石。

我在这个网站上看到了很多相关的问题和答案，但它们并没有真正起作用。

**编辑：**我尝试使用以下内容：

```
$curl_scraped_page = preg_replace('/charset=(.*)"/', 'charset="UTF-8"', $curl_scraped_page); 
```

和

```
$curl_scraped_page = iconv('iso-8859-1', 'UTF-8', $curl_scraped_page); 
```

和

```
$curl_scraped_page = utf8_encode(curl_exec($ch)); 
```

我想另一个问题是，要显示欧元符号，我需要使用 UTF-8 还是 ISO-8859-1？

**EDIT2：**我试过这个：

```
echo "Encoding is $enc";
echo iconv($enc, "ISO-8859-1", $curl_scraped_page); 
```

结果是：

```
Encoding is ISO-8859-1 
```

但仍然没有欧元符号。当我查看页面的源代码时，它仍然显示菱形问号，但是当我在浏览器上单击“查看”并将其更改为 ISO-8859-1 时，会出现欧元符号。那么是浏览器的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:11:42.270

Just Apply`htmlentities(curl_exec($ch))` 这不会在特殊字符处中断

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:34:45.387

在进行 cURL 解析之前，我将 cURL 设置为以 ISO-8859-1 编码进行解析

```
header('Content-Type: text/html; charset=iso-8859-1');
$curl_scraped_page = curl_exec($ch); 
```

这意味着它采用页面上的欧元符号。然后，当我用欧元符号回显内容时，我不必担心编码，因为我认为它会自动格式化为我使用的任何编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T18:16:13.530

尝试为 curl 设置标题

```
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; 
curl_setopt($ch, CURLOPT_HTTPHEADER, $header); 
```

curl 可能会默认设置为“UTF-8”连接。

编辑：

使用 "utf8_decode" 将其转换为 iso 时会发生什么？

[PHP: curl_setopt](http://php.net/manual/de/function.curl-setopt.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T18:31:31.370

Web 浏览器不使用元标记来确定字符集，除非不存在声明字符集的 http 标头。这是后备，大多数网络服务器通过 http 标头指定字符集，因此元标记通常在实践中被忽略。

我是说：该页面可能是不同的字符集。

检查 http 标头。然后再次通过 http 标头而不是元标记声明您自己的页面以匹配。或者将字符串转换为您喜欢的编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T18:15:41.673

只需将相同的元 Content-Type 声明添加到您正在回显检索到的页面的网页。

# java - 在类中使用 getter / setter - 好习惯还是坏习惯？

> ID：10566222
> 
> 赞同：6
> 
> 时间：2012-05-12T18:11:35.870
> 
> 标签：java, setter, getter

在类的内部代码中使用 getter/setter 而不是直接访问实例变量，这是好的做法还是坏的做法？至少对于 setter 来说，可以添加额外的代码来验证值，但对于 getter 来说，这只是开销？Java 编译器有多智能，如果我的 getter/setter 只是直接设置/获取值，Java 会优化我的代码并通过直接访问实例变量来替换 getter/setter，所以没有方法调用开销？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T18:23:26.077

直接访问该字段更为常见。对于在其他类中使用您的代码的程序员来说，setFieldName 方法的价值更为明显。由于隐藏了实现细节，他们可能无法意识到可以接受的值范围，因此保持字段私有并迫使其他开发人员通过 setter 是有意义的。但是在你自己的类中，使用 setter 的情况要弱得多。如果您查看 java API 的源代码，您会发现 getter / setter 方法通常不在类中使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T18:14:55.627

没有必要在类中这样做，除非想在这些 getter / setter 中执行额外的操作。对类成员的访问可以在内部直接访问类，如：

*   隐藏的原因主要是为了隐藏实现（并且没有必要对类本身隐藏实现）
*   getter 和 setter 直接访问成员，所以调用它们只是为了避免直接访问成员有点，嗯......多余的。

关于性能 - 老实说，我认为在大多数情况下，您不应该考虑它，您应该根据可读性、可扩展性和可维护性来决定是调用方法还是直接访问，而不是考虑是否需要另一个纳秒或不。从长远来看，这种方法是有回报的。有优化的地方，你应该有效率，但是一旦代码库超过 20 行，保持代码清晰和可维护就更重要了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:29:17.007

直接访问是一件好事。但是，在同一个类中，没有人可以说 getter/setter 访问是不好的。如果你正在开发一个Java bean，你肯定会明白我在说什么。认为您正在尝试将 JTextField 的用户输入作为字符串获取。在这种情况下，getter 方法将允许您做很多事情，包括字符串截断、修剪、大写、小写等。如果您只是通过访问直接变量（例如：String s = textField.getText ())，你会发现很难做到。所以，我认为，好或坏取决于情况和你正在开发的东西

# typo3 - Typo3：tt_news 中的自定义订单

> ID：10566224
> 
> 赞同：2
> 
> 时间：2012-05-12T18:11:54.563
> 
> 标签：typo3, tt-news

我使用 tt_news 在页面中设置了员工列表，但现在我意识到没有直观的模式可以更改员工在列表中出现的顺序。可以通过更改“日期”字段来完成，但这个概念对于编辑者来说可能有点奇怪。是否可以以更简单的方式进行自定义顺序，有点像内容元素的“向上”和“向下”按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:52:29.090

[tt_news 记录的手动排序](http://typo3.org/extensions/repository/view/ics_newssorting)有一个扩展

如果它不符合您的需求，请尝试使用关键字搜索网络：`typo3 tt_news manual sorting`

# java - 类路径和 java.library.path 之间的区别？如何在linux和windows中设置它？

> ID：10566237
> 
> 赞同：0
> 
> 时间：2012-05-12T18:13:15.083
> 
> 标签：java, jakarta-ee, classpath, java-web-start, java.library.path

这是我的问题 - 我弹出错误消息 - “java.library.path 中没有 XXX”//注意：XXX 是 API 的一些 .dll

实际上我正在运行 .jnlp 文件；这将启动 java web start。软件安装说明说安装 jre 32 位才能运行。我使用 64 位的 linux mint 并且已经有 jre 64 用于其他目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:17:09.623

如果安装说明说要安装 32 位 JRE 来运行程序，那么这就是您必须做的。32 位本机库不适用于 64 位进程（由 64 位 JRE 创建）。32 位和 64 位 JRE 可以同时存在于同一台计算机上——这应该不是问题。

不用担心库路径，Java web start 会为您处理好它。

您确实需要使用标签而不是JNLP 文件中`<nativelib>`的常规标签来指定本机库。`<jar>`LWJGL 库的示例：

```
 <resources>
    <jar href="lwjgl.jar"/>
    <jar href="lwjgl_util.jar"/>
  </resources>

  <!-- LWJGL Linux 64-bit native libraries -->
  <resources os="Linux" arch="amd64">
    <nativelib href="lwjgl-amd64-linux.jar"/>
  </resources>
  <resources os="Linux" arch="x86_64">
    <nativelib href="lwjgl-amd64-linux.jar"/>
  </resources>

  <!-- LWJGL Linux 32-bit native libraries -->
  <resources os="Linux" arch="x86">
    <nativelib href="lwjgl-x86-linux.jar"/>
  </resources>
  <resources os="Linux" arch="i386">
    <nativelib href="lwjgl-x86-linux.jar"/>
  </resources>

  <!-- LWJGL Windows 64-bit native libraries -->
  <resources os="Windows" arch="amd64">
    <nativelib href="lwjgl-amd64-win.jar"/>
  </resources>
  <resources os="Windows" arch="x86_64">
    <nativelib href="lwjgl-amd64-win.jar"/>
  </resources>

  <!-- LWJGL Windows 32-bit native libraries -->
  <resources os="Windows" arch="x86">
    <nativelib href="lwjgl-x86-win.jar"/>
  </resources>
  <resources os="Windows" arch="i386">
    <nativelib href="lwjgl-x86-win.jar"/>
  </resources>

  <!-- LWJGL MAC OS/X native libraries -->
  <resources os="Mac">
    <nativelib href="lwjgl-macosx.jar"/>
  </resources> 
```

在您的情况下，我想您只有 32 位本机库，并且可能不适用于许多操作系统。

# php - PDO 连接异常捕获

> ID：10566238
> 
> 赞同：2
> 
> 时间：2012-05-12T18:13:26.793
> 
> 标签：php, exception-handling, pdo, try-catch

我在使用 PDO 时遇到了困难。我扩展了 PDO 类，每次在连接数据库时出错（密码错误等），它都不会捕获异常。

这是当前代码：

```
public function __construct() {
    $dsn  = 'mysql:host=' . Config::host .
            ';dbname='    . Config::db;
    $user = Config::user;
    $pass = Config::pass;
    $opts = array(
        \PDO::ATTR_PERSISTENT => true,
        \PDO::ATTR_ERRMODE    => \PDO::ERRMODE_EXCEPTION 
    ); 

    try {
        parent::__construct($dsn, $user, $pass, $opts);
    } catch(PDOException $e) {
        echo $e->getMessage();
    }

} 
```

这是显示的错误：

```
Fatal error: Uncaught exception 'PDOException' with message 
'SQLSTATE[HY000] [1045] Access denied for user 'root'@'localhost'
(using password: YES)' in
/home/rasmus/www/n1_cms/N1/Core/Database.php on line 21

PDOException: SQLSTATE[HY000] [1045] Access denied for user
'root'@'localhost' (using password: YES) in
/home/rasmus/www/n1_cms/N1/Core/Database.php on line 21 
```

**编辑：解决方案**

由于使用了命名空间，它不起作用。

改变：

```
catch(PDOException $e) 
```

至：

```
catch(\PDOException $e) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:43:30.217

似乎您的命名空间中不存在类“PDOException”。尝试更改 catch 块：`catch(\PDOException $e)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:38:02.457

移动 try/catch 内`parent::__construct($dsn, $user, $pass, $opts);`

# android - 当我从另一个返回主视图时未显示 Android 微调器

> ID：10566241
> 
> 赞同：0
> 
> 时间：2012-05-12T18:13:46.800
> 
> 标签：android, views, spinner, nested-class

我是 Android 新手，正在尝试导航和显示信息。我成功地在这个应用程序的主视图上放置了一个微调器，但是当我单击另一个视图（通过执行 goFilter 的按钮）并返回（通过执行 goHome 的按钮）时，会出现一个占位符。我确定这与 goHome 未加载微调器类信息有关，但我不知道如何以不同的方式进行操作。

建议？.java 代码如下：

```
package com.example.hellorelative;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.AdapterView;

public class HelloRelative extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Spinner spinner = (Spinner) findViewById(R.id.spinner);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.planets_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

    }
    public class MyOnItemSelectedListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parent,
            View view, int pos, long id) {
          Toast.makeText(parent.getContext(), "The planet is " +
              parent.getItemAtPosition(pos).toString(), Toast.LENGTH_LONG).show();
        }

        public void onNothingSelected(AdapterView parent) {
          // Do nothing.
        }
    }
    public void goFilter(View view) {
        setContentView(R.layout.c_filter);
    }
    public void goHome(View view) {
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:35:55.367

您的 go 方法实际上似乎并没有让应用程序去任何地方，您只需更改活动的布局。

我猜第二个布局没有带有 id 的微调器元素。这就是它消失的原因。

而且由于您永远不会启动另一个活动并返回到该活动，因此不会调用 onCreate() 方法，并且不会再次设置您的微调器。

您想要做的是为您的过滤器视图创建一个额外的活动并使用

```
startActivity(new Intent(this, filterActivity.class) 
```

或者

在您的过滤器布局中提供微调器“可能”工作。如果您不希望它可见，只需将其设置为消失即可。

```
spinner.setVisibility(View.GONE); 
```

# excel - 如果与 1 个条件相同，则 2 个条件的条件格式

> ID：10566242
> 
> 赞同：0
> 
> 时间：2012-05-12T18:13:56.237
> 
> 标签：excel, openoffice-calc

我有一个效果很好的条件公式。现在，我想对**两个条件**使用条件格式（使用相同的单元格 + 附加一个），并且我已经根据在线教程制作了一个公式，但它不起作用。这是它的样子

```
AND($Sheet1.$I1="John Doe";$Sheet1.$C1="Done")=TRUE() 
```

并在`Cell Style`我选择了我自己的格式。

具有一个参数的公式如下所示。

```
AND($Sheet1.$I1="John Doe")=TRUE() 
```

它是唯一有效的。

我可以有两个这样的公式，一个检查一个单元格，另一个检查同一个单元格+附加单元格吗？我想根据单元格值应用两种不同的格式。

**编辑**

问题在于 2 个公式出现在**同一行**中。具有 2 个条件参数的公式有效，但在同一行中时无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:25:33.327

检查控制面板 > 区域和语言 > 格式 > 其他设置... >**列表分隔符：**无论是选项`;`还是`,`在公式中使用该符号...

* * *

**编辑：**您可能需要更改条件格式的顺序：

*   对于 2003 或更早版本的 Excel + for 2007，当您选中**停止**选项时：确保最严格的条件是第一个
*   对于具有多种条件格式的 2007 年：确保所有应用格式相互替换的顺序是您想要的方式

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-14T11:03:21.887

例如，似乎不允许有这样的功能：

```
AND($I1="John Doe")=TRUE() //-> format Red

AND($I1="John Doe";$C1="Done")=TRUE() //-> format Blue 
```

它适用于两种样式。

正确的做法是这样的：

```
AND($I1="John Doe";NOT($C1="Done"))=TRUE()  //-> format Red

AND($I1="John Doe";$C1="Done")=TRUE()  //-> format Blue 
```

# javascript - Backbone.js：解码获取的数据

> ID：10566244
> 
> 赞同：1
> 
> 时间：2012-05-12T18:13:58.717
> 
> 标签：javascript, ajax, backbone.js

使用`Backbone.js`我需要执行以下任务：

1）从服务器获取数据
2）`Decoding the Fetched Data` （对此数据执行一些操作）
3）将这些数据注入我的视图，然后注入我的 HTML 模板

关于第二个任务（解码获取的数据），
在 MVC 上下文中实现它的最佳位置/方式/模式是什么？

* * *

一些要编码的数据是关于权利的，如下所示：

```
READ               = 0x01,
CREATE_USER        = 0x08,
CREATE_WORKSPACE   = 0x10,
UPDATE             = 0x20, 
```

我需要对它们进行编码以使用掩码进行位操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:12:16.823

您可以在模型中提供自己的[`parse`](http://documentcloud.github.com/backbone/#Model-parse)实现：

> **解析** `model.parse(response)`
> 
> **每当服务器返回模型的数据时，都会调用**parse**`fetch` ， in和`save`。该函数传递原始`response`对象，并应返回要在模型上设置的属性哈希。**

 **所以你会有这样的事情：

```
parse: function(response) {
    var parsed_response = _(response).clone();
    // do your bit wrangling on parsed_response and remove what you don't want...
    return parsed_response;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:42:54.727

在像 Backbone.js 这样的 MV* 框架中执行此操作的最佳位置可能是模型。Backbone 模型可以更像是模型视图演示器意义上的演示模型，它包含计算属性形式的共享演示逻辑。如果派生属性仅在单个视图中使用，则可以为仅将其粘贴到视图中进行论证。

您可能想要做的一件事是将基础属性绑定到计算属性，以便自动反映任何更改。**

# iphone - 如何继承 UITextView

> ID：10566247
> 
> 赞同：1
> 
> 时间：2012-05-12T18:14:34.277
> 
> 标签：iphone, uitextview, subclass, uiactionsheet, uiresponder

我如何继承`UITextView`in以 `UIActionSheet`覆盖in 。`canBeforeFirstResponder``disable copy, select, and select all``UITextView`

```
#import <UIKit/UIKit.h>

@class English;

@protocol EnglishDelegate

- (void)dismissViewDidFinish:(UIViewController *)viewController;

@end

@interface English: UIViewController <UITextViewDelegate, UIScrollViewDelegate>

{
id<EnglishDelegate> delegate;
UITextView *textView;
UINavigationBar *navBar;
UINavigationController *navigationController;

}

@property (nonatomic, retain) UITextView *textView;
@property (nonatomic, assign) UINavigationBar *navBar;
@property (strong, nonatomic) UINavigationController *navigationController;
@property (nonatomic, assign) id<EnglishDelegate> delegate;
@property (nonatomic, retain) UIScrollView *scrollView; 

-(void)dismissView:(id)sender;

@end 
```

任何人都知道如何在 h 文件中对其进行子类化。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:36:37.900

您不会`UITextView`在另一个类中进行子类化；您只需将其子类化到另一个文件中并按`canBecomeFirstResponder`如下方式覆盖：

```
- (BOOL)canBecomeFirstResponder {
    return NO;
} 
```

# python - 读取多个文件并更改字段

> ID：10566248
> 
> 赞同：1
> 
> 时间：2012-05-12T18:14:45.480
> 
> 标签：python, bash, awk

我有 2 个这样的文件：

文件 1

> 1 2 3 。. .
> 
> **1 -2** 4。. .
> 
> 1 2 5 。. .
> 
> . . . . . .
> 
> . . . . .

文件 2

> 1 0.33 3 . . .
> 
> 2 0.14 4 。. .
> 
> 3 2.155 5 . . .
> 
> . . . . . .
> 
> . . . . . .

我需要逐行检查file1中的条件（$1==1 && $2==-2）并修改file2中的相应行，$3=-2

我正在尝试：

```
awk -F '\t' '{ BEGIN { FS=OFS="\t" } if ($1==1 && ($2==-2) {getline < "file2" ; $3=8; print $0} else {getline < "file2" ; print $0}  }' file1 
```

所以输出文件应该是：

> 1 0.33 3 . . .
> 
> 2 0.14 **8** 。. .
> 
> 3 2.155 5 . . .
> 
> . . . . . .
> 
> . . . . . .

但似乎修改了某些字符或空格。也许使用 Python 更容易解决这个问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:26:55.957

您不需要使用`-F`，因为您正在设置`FS`并`OFS`在您的`BEGIN`块内。

你有一些花括号和括号不合适。

```
$ awk 'BEGIN { FS = OFS = "\t" } {if ($1 == 1 && $2 == -2) {getline < "file2"; $3 = 8} else {getline < "file2"}; print  }' file1
1   0.33    3
2   0.14    8
3   2.155   5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:08:45.557

我用`bash`&做了`sed`，我不知道为什么（但`bash`问题上有标签，所以有点主题）：

```
$ cat /tmp/1
1   2   3   .   .   .
1   -2  4   .   .   .
1   -2  5   .   .   .
.   .   .   .   .   .
.   .   .   .   . 
```

（制表符分隔）

```
$ cat /tmp/2
1   0.33    3   .   .   .
2   0.14    4   .   .   .
3   2.155   5   .   .   .
.   .   .   .   .   .
.   .   .   .   .   .

$ lines=`grep -n "^1      -2      " /tmp/1 | sed 's/:.*//'`
$ for l in $lines; do sed -ri "${l}s/^(\S*)\t(\S*)\t\S*/\1\t\2\t8/" /tmp/2; done
$ cat /tmp/2
1   0.33    3   .   .   .
2   0.14    8   .   .   .
3   2.155   8   .   .   .
.   .   .   .   .   .
.   .   .   .   .   . 
```

*这可能是糟糕的脚本，我从来不擅长 bash，但我会通过发布它来证明浪费的时间。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:50:06.943

您还想设置输出字段分隔符`awk`：

```
awk -F '\t' -v OFS='\t' ' { if ... }' file1 
```

仅供参考，`paste`and`cut`命令可以简化`awk`脚本：

```
cut -f1,2 file1 | paste - file2 | \
awk -F '\t' -v OFS '\t' '$1==1 && $2==-2 {$5=8}; {print}' | \
cut -f3- 
```

您只从 file1 的每一行中取出前两个字段，用于`paste`将它们添加到 file2 中相应行的开头，然后在适当的情况下修改字段*5*（对应于 file2 中的字段 3）并输出整行，最后剥离从file1中取出字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T22:44:58.870

既然你问到 python

```
#!/usr/bin/env python

with open('f1') as  fd:
    f1 = [map(int,i.strip().split()) for i in fd]
with open('f2') as  fd:
    f2 = [map(float,i.strip().split()) for i in fd]

for n, f in enumerate(f2):
    if f1[n][0] == 1 and f1[n][1] == -2:
        print f[0], f[1], 8
    else:
        print f 
```

# scala - 案例类构造函数看似虚假的“不接受参数”错误

> ID：10566253
> 
> 赞同：6
> 
> 时间：2012-05-12T18:15:04.963
> 
> 标签：scala, case-class

我有一个案例类，它的构造函数有几个参数，我定义了一个随附的类对象，该对象定义了一个替代构造函数，该构造函数采用一组不同的参数，如下所示：

```
case class MyClass (c: Char, mc: List[MyClass]) 

object MyClass {
  def apply(c: Char, mc: MyClass): MyClass = {
    MyClass(c, List(mc))
  }
} 
```

我想在 a 中使用*原始*案例类构造函数`foldRight`：

```
object SomeStuff {
  def problem (s: String) {
    assert(!s.isEmpty)

    val zero = MyClass('a', Nil)

    val mc2 = "Pillsy Pillsy Pillsy" foldRight(zero) {
      MyClass(_, List(_))
    }
  }
} 
```

当我这样做时，我从编译器收到一条错误消息：“MyClass 不接受参数。” 如果我注释掉该部分`val mc2 = ...`，这个问题就会消失，但`MyClass`显然是在`zero`. 我觉得我一定错过了一些非常基本的东西，但我不知道它是什么。我尝试了几种解决方法，比如定义一个辅助方法或一个函数值作为 的第二个参数`foldRight`，但都没有帮助，这并不奇怪，因为我基本上是在随机摸索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T18:32:43.960

首先，`foldRight`接受两个参数，因此您不能使用运算符表示法（以其当前形式），但您可以：

```
("foo" foldRight zero) { ... } 
```

或者，

```
("foo" :\ zero) { ... } 
```

二、`{ MyClass(_, List(_)) }`将脱糖成

```
{ x => MyClass(x, y => List(y)) } 
```

因此，您应该命名参数并使用`new`关键字来确保调用构造函数而不是`apply`方法：

```
"Pillsy Pillsy Pillsy".foldRight(zero) { (c, mc) =>
  new MyClass(c, List(mc))
} 
```

`apply`或者如果您想使用下划线，请使用补充方法：

```
"Pillsy Pillsy Pillsy".foldRight(zero) { MyClass(_, _) } 
```

# xna - XNA - 绘制缩放的 2D 精灵

> ID：10566254
> 
> 赞同：0
> 
> 时间：2012-05-12T18:15:18.260
> 
> 标签：xna, zooming, textures

我有一个基于瓷砖的游戏。每个瓦片纹理都被加载，然后我将每个瓦片贴在一起绘制，形成一个连续的背景。我实际上遵循了本教程来获取 xml 文件。

[http://www.xnadevelopment.com/tutorials/looksleveltome/looksleveltome.shtml](http://www.xnadevelopment.com/tutorials/looksleveltome/looksleveltome.shtml)

纹理的来源是 50x50。

但是，它仅适用于比例为 1（或更低），如果比例更大

结果：正常大小（50 像素和比例 1） [http://imageshack.us/photo/my-images/525/smallzp.jpg/](http://imageshack.us/photo/my-images/525/smallzp.jpg/)

更大的尺寸（放大或 100 像素的 xml 文件） [http://imageshack.us/photo/my-images/577/largeki.jpg/](http://imageshack.us/photo/my-images/577/largeki.jpg/)

我们可以看到瓷砖之间有线条，这些线条不在纹理中。这里实际上并没有那么糟糕，但在我的游戏图块中，它就是这样做的：http: [//imageshack.us/photo/my-images/687/zoomedsize.png/](http://imageshack.us/photo/my-images/687/zoomedsize.png/)

无论我增加 xml 文件中的平铺大小、绘制时更改比例还是使用我的相机进行缩放，都会出现相同的效果。

```
//zoom code
public Matrix GetTransformation()
{
    return
       Matrix.CreateTranslation(new Vector3(-_pos.X, -_pos.Y, 0)) *
       Matrix.CreateRotationZ(Rotation) *
       Matrix.CreateScale(new Vector3(Zoom, Zoom, 1)) *
       Matrix.CreateTranslation(new Vector3(_device.Viewport.Width * 0.5f, _device.Viewport.Height * 0.5f, 0));
}

//draw
_spriteBatch.Begin(SpriteSortMode.Immediate, 
  BlendState.AlphaBlend, null, null, null, null,
  _camera.GetTransformation());

//for each tile
theSpriteBatch.Draw(mSpriteTexture, Position, Source, 
  Color.Lerp(Color.White, Color.Transparent, mAlphaValue),
  mRotation, new Vector2(mSource.Width / 2, mSource.Height / 2),
  Scale, SpriteEffects.None, mDepth); 
```

是否有一个原因？一种修复它以在缩放时具有连续纹理的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:21:36.723

问题在于您的采样器状态，gpu 正在尝试对点附近的颜色进行采样以对其进行插值。

在您的 spriteBatch.Begin() 中使用 SamplerState.PointClamp 它将被修复。

# iphone - 重启 iPhone 设备时核心数据丢失

> ID：10566255
> 
> 赞同：0
> 
> 时间：2012-05-12T18:15:21.930
> 
> 标签：iphone, core-data, reboot, xcdatamodel

我创建了一个使用两个 xcdatamodel 文件来保存数据的应用程序。一切正常，数据可以成功保存和加载。但奇怪的是，当我重新启动设备时，一个模型中的数据会丢失，而另一个模型中的数据仍然存在。它通常发生在 iOS 5.0 上并且设备被密码锁定。

有没有人也有这个问题？请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:30:00.937

听起来像是保存了一个或多个托管对象上下文。发生这种情况的一种方法是，如果您的上下文是另一个上下文的子上下文。向子上下文发送`save`消息只是将修改后的对象添加到父级，但不会保存到您的文件中。要将数据实际保存到文件中，您必须确保保存根上下文。

# mysql - 对于这种情况，哪种 MySQL Join 查询更可取？

> ID：10566256
> 
> 赞同：0
> 
> 时间：2012-05-12T18:15:25.713
> 
> 标签：mysql, sql

我有两张桌子..TableA 和 TableB

在 TableA.. 我有 5 个字段..（空）（只有具有 Autoincrement-ID 字段的结构）

在表 B ..我有 7 个字段（完整的 ..10 万条记录）

TableA 是空的 .. 我想从 TableB 中添加一个完整的列 ..

即**TableB 中**的字段“ID”应插入**TableA 中的字段“值”内。**.

即**TableB 中的**完整列“ID”应该被复制/插入到**TableA 中作为列“值”**

这里没有匹配案例，所以我不能使用 WHERE 子句...

我到底使用了外连接或内连接或完全连接..

请给个建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:19:05.733

```
INSERT INTO TableA(value) SELECT id FROM TableB 
```

# php - OOP mutli lang，制作要包含的文件

> ID：10566258
> 
> 赞同：0
> 
> 时间：2012-05-12T18:15:32.153
> 
> 标签：php, oop, include

所以我想让我的页面有多语言功能，比如德语、英语和匈牙利语。我开始在 PHP 中学习 OOP，现在我强迫自己在任何事情上都使用 OOP，这当然不是一个好主意，但我尝试学习。所以这就是我到目前为止得到的：

```
<?php

class class_lang {

    private $language;

    public function __construct() {
        $this->language = $_GET['lang'];
    }

    public function select_lang($var);

        return ('language_'.$this->select_lang($var));
}

?> 
```

那么发生了什么。在我的索引页面上，当我单击 1 时，我得到了 3 个链接（国旗），我的班级从 url 获取值，如下所示：href="index.php?lang=uk"。现在我不确定如何制作字符串：因为我想要包含的 lang 文件看起来像 language_uk.php 、 language_ge.php 等......所以我只想创建那个字符串并将其传递回我的索引页面中的值，以便我可以包含正确的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:10:38.090

(1) 在 PHP 中，字段成员用前导“$”声明，但后来，没有它，并以“$this->”为前缀。所以：

```
$language; 
```

变成：

```
$this->language 
```

(2) Extra，去掉方法头的分号：

```
public function select_lang($var)
{
   return ('language_' . $this->language($var));
} 
```

(3) 另外，在返回值的方法中添加一个临时变量，它不是语法要求的，但是，将允许您调试（“ToString”），并避免很多问题：

```
public function select_lang($var)
{
   $Result = ('language_' . $this->language)
   return $Result;
} 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:48:36.630

尝试公开 var $language ，构造可以过滤和验证 GET var，将对象保存在某处（会话）以与对象交互 您可以使用的其他方法是 ChangeLang SetLang LoadLangFile SaveToSession 许多其他..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:34:37.217

如果我理解正确，这应该有效：

```
return 'language_' . $this->language; 
```

# jquery - 如何使用 Jquery 定位特定的 JSON 输出？

> ID：10566266
> 
> 赞同：0
> 
> 时间：2012-05-12T18:16:36.930
> 
> 标签：jquery, multidimensional-array, json

在链接的 jsfiddle 中，我试图从 JSON 输出某个结果。我认为问题是线路

```
var address = data[results][0][address_components][1][long_name]; 
```

但通过反复试验，我仍然无法定位所需的数据。

[http://jsfiddle.net/JzMuy/](http://jsfiddle.net/JzMuy/)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:18:36.547

实际上问题是您不能执行跨站点访问请求。您要么必须使用服务器端代码，要么使用 JSONP api（如果它提供）

# php - 使用索引循环遍历数组的正确 PHP 语法

> ID：10566270
> 
> 赞同：0
> 
> 时间：2012-05-12T18:17:28.537
> 
> 标签：php, arrays, foreach

我对 PHP 很陌生，我试图循环遍历一个数组并在 5 个项目后停止。我正在使用以下内容：

```
 $images = ( $f->APIVer == "1.2.2" ) ? $images['Images'] : $images;
            // Display the thumbnails and link to the medium image for each image
            foreach ( $images as $index => $image) {

                echo '<li><a href="'.$image['XLargeURL'].'"><img src="'.$image['TinyURL'].'" alt="thumbnail"/></li>';
            }
            while ( $index < 5 );
        } 
```

虽然它似乎不起作用......我做错了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T18:22:23.540

如果数组具有从零开始的索引，您可以执行以下操作：

```
foreach ( $images as $index => $image) {
    if ($index == 5) break;
    echo '<li><a href="'.$image['XLargeURL'].'"><img src="'.$image['TinyURL'].'" alt="thumbnail"/></li>';
} 
```

否则，您可以添加自己的计数器：

```
$i = 0;
foreach ( $images as $index => $image) {
    $i++;
    if ($i == 5) break;
    echo '<li><a href="'.$image['XLargeURL'].'"><img src="'.$image['TinyURL'].'" alt="thumbnail"/></li>';
} 
```

您尝试的是另一种类型的循环：

```
$index = 0;
do {
    echo '<li><a href="'.$images[$index]['XLargeURL'].'"><img src="'.$images[$index]['TinyURL'].'" alt="thumbnail"/></li>';
    $index++;
} while ( $index < 5 ); 
```

或者：

```
$index = 0;
while ( $index < 5 ) {
    echo '<li><a href="'.$images[$index]['XLargeURL'].'"><img src="'.$images[$index]['TinyURL'].'" alt="thumbnail"/></li>';
    $index++;
} 
```

另一种选择是`for`循环：

```
for($index=0; $index < 5; $index++) {
    echo '<li><a href="'.$images[$index]['XLargeURL'].'"><img src="'.$images[$index]['TinyURL'].'" alt="thumbnail"/></li>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:20:39.983

```
 $images = ( $f->APIVer == "1.2.2" ) ? $images['Images'] : $images;
   $nm = 0;
   foreach ( $images as $index => $image) {
      if($nm < 5){
           echo '<li><a href="'.$image['XLargeURL'].'"><img src="'.$image['TinyURL'].'" alt="thumbnail"/></li>';
         }
       $nm++;
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:22:01.513

它应该是这样的：

```
$images = ( $f->APIVer == "1.2.2" ) ? $images['Images'] : $images;

$i = 0;
// Display the thumbnails and link to the medium image for each image
foreach ( $images as $index => $image) {
    if ($i == 5) break;
    echo '<li><a href="'.$image['XLargeURL'].'"><img src="'.$image['TinyURL'].'" alt="thumbnail"/></li>';
    $i++;
} 
```

`while`本身就是一个循环，就像`foreach`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T18:23:20.133

鉴于这`$index`是一个整数，您可以跳出循环：

```
foreach ($images as $index => $image) {
    echo '<li><a href="'.$image['XLargeURL'].'"><img src="'.$image['TinyURL'].'" alt="thumbnail"/></li>';
    if ($index >= 5) {
        break;
    }
} 
```

# html - 在“http://www”上访问相同的域 iframe 高度时访问被拒绝

> ID：10566271
> 
> 赞同：1
> 
> 时间：2012-05-12T18:17:41.100
> 
> 标签：html, iframe

我正在尝试在同一域上调整 iframe 的大小。

这就是我所拥有的：

在父页面的头部，我有这个：

```
<script language="javascript">

function autoResize(obj){
    newheight=obj.contentWindow.document.body.scrollHeight;
    obj.height= (newheight) + "px";
}
</script> 
```

然后在正文中，我的 iframe 标签：

```
<iframe src="http://<?php echo $_SERVER['HTTP_HOST']; ?>/shop/" width="100%" height="450px" id="iframe1" marginheight="0" frameborder="0" scrolling="no" onLoad="autoResize(this);"></iframe> 
```

当我使用[http://example.com时一切正常，而当我使用](http://example.com)[http://www.example.com](http://www.example.com)时出现访问被拒绝错误。

我尝试通过以下方式解决问题：

```
document.domain = "<?php echo $_SERVER['HTTP_HOST']; ?>"; 
```

但是，它并没有解决它，而是恶化了它 - [http://example.com](http://example.com)和[http://www.example.com](http://www.example.com)在 Internet Explorer 上都不起作用。

我已经看到了几个关于这个的问题，很明显这是一个主机、端口和协议问题，但还没有得到解决方案。

请问，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:21:33.833

`www.example.com`不一样`example.com`。`www`只是一个子域，恰好是最常用来指定主网站的。通常这两者被视为同义词，但并非总是如此。

尝试这个：

```
<iframe src="/shop/" ... ></iframe> 
```

这会将框架加载到与主页完全相同的域上。

# html - 从表单提交中排除单选按钮，而不禁用它们

> ID：10566272
> 
> 赞同：2
> 
> 时间：2012-05-12T18:17:42.430
> 
> 标签：html, forms, radio-button

我正在使用一些单选按钮来影响 jQuery 小部件的行为状态。该小部件可以在表单中使用，但是，由于这些收音机不包含任何实际数据，我不希望它们向服务器提交噪音，或者对将在其表单中使用该小部件的人造成命名冲突。

这里有两个潜在的解决方案开始，但还不令人满意：

*   **删除`name`属性**：对于其他输入似乎工作正常，但将我的收音机变成复选框：它会杀死它们之间的链接，因此选择一个不会取消选择其他输入。有没有一种 HTML 方式（即除了 Javascript 事件）来绑定它们而没有`name`属性？
*   **禁用输入**：正如预期的那样，没有提交任何内容，但是收音机变成灰色并且无法单击。有什么方法可以让它们保持可点击但不可提交，比如在提交时禁用？

尽可能，我宁愿寻找一个跨浏览器的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:06:28.123

尝试在提交之前调用一个函数，该函数会禁用单选按钮。

```
function disableBtn() {
  document.getElementById('idbtn1').setAttribute('disabled', 'disabled');
  document.getElementById('idbtn2').setAttribute('disabled', 'disabled');
  return true;
} 
```

然后，在形式上：

```
<form action="file" method="post" onsubmit="return disableBtn()"> 
```

# c++ - 在 C++ 中限制通过套接字传输的数据

> ID：10566275
> 
> 赞同：1
> 
> 时间：2012-05-12T18:18:10.243
> 
> 标签：c++, sockets, compression, video-streaming, bandwidth

我正在开发一个 USB 重定向软件，它通过在客户端机器上添加一个虚拟 USB 设备来重定向网络上的 USB 设备。一切正常，但客户抱怨说，当他连接分辨率为 640X480 的网络摄像头时，100 Mbps 网络阻塞。我已经在 1 Gbps 适配器上测试了网络摄像头，它使用了大约 16% (160 Mbps) 的带宽。网络摄像头应该占用这么多带宽吗？无论如何，他希望网络使用率低于 50 Mbps。

我尝试压缩从 DeviceIoControl 获得的数据，然后在客户端将其解压缩，然后再将其传递给 DeviceIoControl。适用于文件传输，但视频停止工作，带宽下降到 50 Mbps 左右。我曾尝试在发送数据之前添加短暂的延迟，但这也会导致黑屏。现在我正在考虑以某种方式将相机分辨率强制降低到 320X240。我不确定是否有任何其他方法可以减少 DeviceIoControl 抛出的数据。

如果您能分享您的想法并引导我朝着正确的方向前进，我将不胜感激。提前致谢。

编辑：

它是一个 YUV2 格式的网络摄像头。

是否有任何开源库可用于降低 Windows 平台上网络摄像头的帧速率或分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:25:16.363

如果数据未压缩：640 px/line × 480 lines/frame × 30 frames/sec × 24 bit/px ≈ 211 Mbps

您可以查看网络摄像头的文档，它是否支持某种压缩或帧速率控制。

# java - px和dp单位之间的转换

> ID：10566283
> 
> 赞同：-4
> 
> 时间：2012-05-12T18:19:04.520
> 
> 标签：java, android, layoutparams, density-independent-pixel

我想`layout_marginTop`使用`setLayoutParams()`. 但我想知道这个`dp`单位的价值是多少？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:18:10.610

显示的逻辑[密度](http://developer.android.com/reference/android/util/DisplayMetrics.html#density)在`DisplayMetrics`类中给出，并且可以通过以下方式检索，

```
getResources().getDisplayMetrics().density 
```

因此，要转换`dp`为`px`，您会这样做，

```
int density = getResources().getDisplayMetrics().density;
int px = (int) (dp * density); 
```

要转换`px`为`dp`，只需执行逆运算，

```
int dp = px/density; 
```

# iphone - 如何制作轮式的圆形动画？

> ID：10566286
> 
> 赞同：1
> 
> 时间：2012-05-12T18:19:18.363
> 
> 标签：iphone, xcode

我想做一个像这样的圆形动画：http: [//itunes.apple.com/us/app/circle-whos-around-you/id488720081 ?mt=8](http://itunes.apple.com/us/app/circle-whos-around-you/id488720081?mt=8)

基本上使用滚动显示的人..见附件

# ajax - CGI::Ajax 无法控制返回的表格 css 样式？

> ID：10566287
> 
> 赞同：1
> 
> 时间：2012-05-12T18:19:18.230
> 
> 标签：ajax, perl, jquery-ui, cgi, tablesorter

我对使用 CGI::Ajax 有疑问。

我的 CGI::Ajax 注册函数将返回一个表格，我想通过使用 jquery 插件 tablesorter 来控制表格的样式

结果表被返回，但我无法控制它的样式，即我无法在调用函数中使用插件tablesorter对表进行排序

主要部分代码如下，这些只是部分代码，如有标点问题，请忽略

如您所见，主程序“show_html”可以对表“metatable”进行排序；但是，即使我将 id='resulttable' 放在那里，返回表“resulttable”也无法排序。

有人可以帮我解决这个问题吗？

谢谢

```
my $cgi = CGI->new();
my $pjx = CGI::Ajax->new('js_fun'=>\&perl_fun);

sub per_fun{
...
print $cgi->start_table({id=>'resulttable'}),
...
}

sub show_html{ //partial code
print $html_fh $cgi->start_html(
  -title=>'Selected GEO MetaData',

  -style=> {-src=>[ "jquery-ui-1.8.20.custom.css",
            "jq_tablesorter/themes/green/style.css",
        "jq_ui_redmond/css/selectable.css",
          ]
    },    
  -script=>[
            { -type => "text/javascript",
              -src => "$tempdir/jq/js/jquery-1.7.2.min.js"
            },
            { -type => 'text/javascript',
              -src => "$tempdir/jq/jq_tablesorter/jquery.tablesorter.min.js"
            },
    { -type => 'text/javascript',
              -src => "$tempdir/jq/jq_ui_redmond/js/jquery-ui-1.8.20.custom.min.js"
            },
           q<
                  $(document).ready(function(){
                    $("#metatable").tablesorter();
            $("#resulttable").tablesorter();
     )}

      ....

 $("#done").click(function(){
            $("#metatable").slideUp();
            js_fun(['val1'],['result1']); //ajax
            return false;
            })

.....

print $cgi->div({id=>'result1'});

.....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:52:25.817

在 AJAX 请求成功返回后，必须重做结果表到 sort 方法的绑定，如下所示：

```
$.post("ajax/jsfun", "['val1']", function(data) {
    $('#resulttable').html(data);
    $("#resulttable").tablesorter();
    }); 
```

# javascript - chrome和firefox javascript控制台 - 不同的返回值

> ID：10566290
> 
> 赞同：4
> 
> 时间：2012-05-12T18:20:31.180
> 
> 标签：javascript, firefox, google-chrome, console

> **可能重复：**
> [Chrome 的 JavaScript 控制台是否懒于评估数组？](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)

对于这个匿名函数，我有不同的输出，这取决于我使用的是 Chrome 开发者控制台还是 Firefox Firebug。为什么会这样？

```
(function(){
var t =["one","two"];
    console.log(t)

function a(m){
    t[2]="three";
    console.log(t)
};a(t)

function b(n){
    t[3]="four";
    console.log(t)
};b(t)
}())
["one", "two", "three", "four"]
["one", "two", "three", "four"]
["one", "two", "three", "four"] // chrome output

["one", "two"]
["one", "two", "three"]
["one", "two", "three", "four"]// firebug output 
```

# c# - 每个类型继承行为的表

> ID：10566293
> 
> 赞同：1
> 
> 时间：2012-05-12T18:21:19.587
> 
> 标签：c#, .net, entity-framework, orm

给定两个实体：父、子。

每个类型继承的表在以下情况下会做什么：

1.  您添加了一个名为 Child 的实体，其所有值均留空，但已填写其 Parent 属性。它会添加子实体还是仅添加父实体？

2.  如果 ID == id 的实体 Parent 存在，但它没有 Child，是否会针对具有谓词 ID == id 的存储库 Child 的查询返回任何内容？IE。这样的查询会被翻译成左连接还是交叉连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:00:15.737

1.  它总是会尝试在两个表中添加一个条目

2.  EF不会返回任何东西。生成的 SQL 是左连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:41:05.473

1.  您是否认为 EF 会检查子实体，如果所有属性都可以为空，如果是，那么它不会保存它？为什么会那样做？？此外，层次映射是规则，如果实体是子类型，那么它必须在子表中有记录。所以答案可能是否定的。即使子项中没有设置任何属性，它仍然会在表中创建记录。

2.  当它还没有机会查询它的类型时，EF 如何判断实体是否属于父类型？所以不，每次都会生成加入。

# wordpress - WordPress 发布的帖子和修订 + 自定义帖子类型

> ID：10566294
> 
> 赞同：2
> 
> 时间：2012-05-12T18:21:29.663
> 
> 标签：wordpress, custom-post-type, revisions

我偶然发现了一个问题，我必须在使用 wordpress 构建的网站上进行修订。

所以，它是这样的。我安装了 Capability Manager 插件，因此我能够创建一个新角色帐户并为该角色设置权限。之后我安装了修订版。我基本上所做的就是复制了 Contributor 角色并删除了一些东西。因此，新帐户现在只能编辑自己的帖子。编辑帖子时，修订版（插件）仅启用“发送到修订版”选项，因此用户无法发布它。问题是即使帖子是新的或已经发布的，每次更改都需要修改，而我设法做到了。之后，我安装了名为“仅管理您的帖子”的插件。我需要那个，以便可以添加新帖子的新用户无法看到他不是作者的其他帖子。

但我有一个小问题。修订插件不适用于自定义帖子类型、字段等（在这种特殊情况下为 Woothemes 主题）。因此，唯一可以更改的是帖子文本和标题，帖子下方的所有其他内容、自定义字段等都会被修订忽略。我需要你们的帮助和你们的意见，什么是这个问题的最佳解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:40:12.640

我做了一些搜索，发现了这个 - 原来的插件似乎没有开发对自定义帖子类型的支持，但是这个 exta 插件增加了这​​种支持

[http://wordpress.org/extend/plugins/custom-field-revisions/](http://wordpress.org/extend/plugins/custom-field-revisions/)

# javascript - 如何使用 Javascript 交换基于 cookie 的 div？

> ID：10566309
> 
> 赞同：0
> 
> 时间：2012-05-12T18:23:06.853
> 
> 标签：javascript, wordpress, session, caching, cookies

我正在为客户更新 wordpress 网站。我不得不打开服务器端缓存，因为由于插件太多，网站速度很慢。我对此无能为力，也无法禁用插件。

其中一个插件要求用户输入电子邮件以下载文件。如果插件看到有效的电子邮件，它会设置一个会话变量。然后页面重新加载。如果设置了该会话变量，则站点将显示一个下载按钮，而不是输入电子邮件表单字段和按钮。

由于启用了服务器端缓存，因此此功能将丢失。所以，我想做的是设置一个 cookie，然后检查 cookie 客户端，并交换 div 的内容（ id="download" ）。我对 Javascript 做的不多，并且无法使其正常工作。

我在 PHP 中设置了这样的 cookie：

```
setcookie( 'show_download', 1 ); 
```

我已经像这样设置了 div 的新内容（动态生成）：

```
setcookie( 'new_content', '<div class="btn-ss-downloads"><a target="_blank" href="/wp-content/plugins/ss-downloads/services/getfile.php?file=4v-zR6fc6f/9vaROBr/dTJd/Tg/D 0-dT.vBx">Download Series 20 Datasheet</a></div>' ); 
```

我有一个函数可以读取我从另一篇文章中获得的 Javascript 中的 cookie：

```
<script type="text/javascript">

    function readCookie(name) {
        var ca = document.cookie.split(';');
        var nameEQ = name + "=";
        for(var i=0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1, c.length); //delete spaces
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return "";
    }

</script> 
```

似乎正确的功能是调用`readCookie( 'show_download' );`. 如果 value = 1，则将 的内容与cookie`<div id="download"></div>`中存储的内容交换。`new_content`

鉴于我在这里介绍的作品，我如何在 Javascript 中完成这项工作？我想在我的 Wordpress 标题中添加一个 javascript 函数，如果它可以在这里工作的话。似乎我可以在页面呈现/加载后运行这个函数。我对浏览器和 javascript 的操作顺序不是很熟悉。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T02:19:58.087

为什么不考虑 AJAX？

如果需要检查地址的有效性，然后执行某些服务器操作以显示按钮，那么它看起来是使用 AJAX 的好地方。

```
$.post("downloader.php", { eml: mail_id })
    .done(function(data){ 
      if(data != "")
        $("div.btn-ss-downloads").html('<a href="' + data + '">Download</a>');
    }); 
```

这假定 downloader.php 进行了必要的检查并返回下载 URL。您可以将此逻辑（现在似乎是主页的一部分）分离到 downloader.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:39:03.177

这是你要找的吗？

```
(<head>)
<script type='text/javascript'>
    var showDownload = localStorage.getItem("showDownload") //or readCookie()
    if (showDownload == 1) {
        $(document).ready(function(){
            $("div.btn-ss-downloads").html("<a target='_blank'...</a>")
        )};
    }
</script>
(</head>) 
```

请参阅[http://api.jquery.com/html/](http://api.jquery.com/html/)和[https://developer.mozilla.org/en/DOM/Storage#localStorage](https://developer.mozilla.org/en/DOM/Storage#localStorage)

这使用 jQuery，您可以使用：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script> 
```

（这是少数几次我提倡将 jQuery 用于如此简单的事情之一，因为`$(document).ready`它太棒了！）

# jquery - 我想在 Ajax 请求后显示 Jquery UI 对话框（消息）

> ID：10566311
> 
> 赞同：1
> 
> 时间：2012-05-12T18:23:19.603
> 
> 标签：jquery, ajax, user-interface, dialog

首先：我想在我的 Jquery UI 消息框中显示带有 Ajax 请求的返回数据。第二：在下面的代码中，消息框仅出现 1 秒钟。我不知道为什么！！！！

```
<script>
  $(document).ready(function(){
    $("#dialog-confirm").dialog({
      autoOpen:false,
      resizable: false,
      height:140,
      modal: true,
      buttons: {
        "Ok": function() {
           $( this ).dialog( "close" );
        }
      }
    });

    $("#customer_form").submit(function(){
      $.get("../ajax/Services.php?Add=Add, function(data){
        if (data) {
          $("#dialog-confirm").dialog("open");
        }
      });
    });
  });
</script>
<body>
  <div id="dialog-confirm" title="MY TITLE">
    <p>
      SOME TEXT <span class="ui-icon ui-icon-alert"
                      style="float:right; margin:0 7px 20px 0;"></span>
    </p>
  </div>       
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:38:22.413

如果您希望将“某些文本”替换为`data`，则需要将其包装在 a 中`span`，以便您可以仅选择该元素而不会影响其旁边的图标：

```
 <div id="dialog-confirm" title="MY TITLE">
    <p>
      <span id="dialog-text"> </span>
      <span class="ui-icon ui-icon-alert"
                      style="float:right; margin:0 7px 20px 0;"></span>
    </p>
  </div> 
```

对于第二个问题，您看到的可能是正在加载的新页面。

您需要阻止该`submit`操作执行并真正提交。

```
$("#customer_form").submit(function(ev) {
    ev.preventDefault();
    if (data) {
      $("#dialog-text").html(data);
      $("#dialog-confirm").dialog("open");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:30:47.777

尝试修复您的代码：

**`"`在文件路径上**缺少**a**

 **```
$("#customer_form").submit(function(){
  $.get("../ajax/Services.php?Add=Add", function(data){
    if (data) {
      $("#dialog-confirm").dialog("open");
    }
  });
}); 
```

**要将返回的数据放在对话框中，您可以：**

```
$("#customer_form").submit(function(){
  $.get("../ajax/Services.php?Add=Add", function(data){
    if (data) {
      $("#dialog-confirm p").append(data);
      $("#dialog-confirm").dialog("open");
    }
  });
}); 
```

阅读：[Jquery .append()](http://api.jquery.com/append/)**

# asp.net-mvc-3 - 如何在 Windows azure 云中将新代码更新到我的站点？

> ID：10566318
> 
> 赞同：0
> 
> 时间：2012-05-12T18:24:34.473
> 
> 标签：asp.net-mvc-3, azure, cloud-hosting

我是新的 Windows 天蓝色用户。我已被选中使用 90 天试用帐户，并且可以将我的 ASP.NET MVC3 应用程序上传到我的帐户。我的网站现在也在运行。在我发布了我的网站之后，我在我的程序中添加了更多的模型、视图和控制器。现在我找不到更新我的应用程序的方法。我可以再次发布我的应用程序，但没有更新选项。我只想更新我的新代码，但包选项正在创建完整的应用程序。如何在 Windows azure 云中将新代码更新到我的站点？

[改变拼写]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:35:02.680

使用 Windows Azure，您可以通过以下方式发布/更新应用程序：

1.  登录到您的 Windows Azure 帐户。选择您托管的服务器名称，在顶部面板中您将看到“升级”选项，当您使用此选项时，您将有机会从本地文件系统或 Windows Azure 存储中选择您的 CSPKG 和 CSCFG 文件。一旦您选择了新的或更新的 CSPKG，您当前运行的服务将被升级。

2.  您还可以使用 Windows Azure PowerShell Cmdlet 使用“Update-Deployment”命令升级当前正在运行的托管服务：

    2.1 [http://wappowershell.codeplex.com/](http://wappowershell.codeplex.com/)

3.  您可以使用 Windows Azure 服务管理 API 创建的其他 3rd 方应用程序来升级/管理您当前运行的托管服务。

    3.1 [http://wapmmc.codeplex.com/](http://wapmmc.codeplex.com/)

    3.2 [http://www.cerebrata.com/Products/CloudStorageStudio/Default.aspx](http://www.cerebrata.com/Products/CloudStorageStudio/Default.aspx)

注意：使用 Visual Studio，如果您再次发布应用程序，它将删除当前正在运行的托管服务，然后在其上创建新服务，因此更新它不是一个好的服务。

最后基于您关于部分更新的问题，这是不支持的。即使您在代码中进行了单行更改，即使操作是“更新/升级”，部署也将被视为完整部署。没有差异包部署，因此每次更新 Windows Azure 应用程序时，都将使用新创建的 CSPKG 文件并升级托管应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:10:18.530

关于部分更新：如果您有多个角色，您可以选择升级单个角色（这将是*部署*的部分更新）。对于给定的角色，所有代码都被重新部署。如果您正在运行多个实例，则更新将在多组实例中推出，而不是同时在所有实例中推出。

对于静态内容等更新：如果您将这些内容移动到 blob 存储（css、jquery、图像等的好地方），那么您可以通过简单地将新项目单独上传到 blob 存储来更新此内容。这些更新不需要重建或重新部署任何代码。

如果您处于开发模式（例如非生产模式），您可以启用 Web 部署，这样就可以将您的应用程序快速更新到正在运行的实例。这仅适用于单实例模式，并且在执行频繁的代码+测试周期时非常有用。

# objective-c - 过滤 flickr 图像

> ID：10566327
> 
> 赞同：1
> 
> 时间：2012-05-12T18:25:42.680
> 
> 标签：objective-c, ios, cocoa-touch

我正在开发一个需要一些图像的 iPhone 应用程序。特别是我必须从互联网上检索一些图像，然后在特定的单元格中显示它们。

例如：敲击细胞麻木。1 我必须显示一些关于对象 A 的图像，点击单元格麻木。2 关于对象 B 等等。

您认为存储图像的最佳网站是 Flickr 吗？您认为将 Flickr 标签与 iPhone 请求“匹配”是可能的吗？什么是满足我需求的最佳解决方案？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:30:58.397

您的“iPhone”应用程序将根据 Web 服务器发布的 API 编写“请求”。[Flick API](http://www.flickr.com/services/api/)看起来适用于此。而且，这里是[Flickr API 的 Objective-C 框架](https://github.com/lukhnos/objectiveflickr)。

# c - 使用来自多个进程的 fseek/fwrite 写入文件的不同区域？

> ID：10566328
> 
> 赞同：7
> 
> 时间：2012-05-12T18:25:58.827
> 
> 标签：c, file-io, process, posix, mpi

我最近遇到了一些未经充分测试的遗留代码，用于将分布在多个进程（这些是基于 MPI 的并行计算的一部分）的数据写入同一个文件。这真的可以保证工作吗？

它是这样的：

*   所有进程都打开同一个文件进行写入。

*   每个进程调用`fseek`以寻找文件中的不同位置。此位置可能超出文件末尾。

*   然后每个进程将一个数据块写入文件中`fwrite`。查找位置和块大小使得这些写入完全平铺文件的一部分——没有间隙，没有重叠。

这能保证工作，还是有时会严重失败？没有锁定来序列化写入，实际上它们很可能是从同步点开始的。另一方面，我们可以保证它们正在写入不同的文件位置，这与尝试从多个进程写入“文件末尾”时遇到问题的其他问题不同。

我突然想到，这些进程可能位于通过 NFS 挂载文件的不同机器上，我怀疑这可能回答了我的问题——但是，如果文件是本地的，它会工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T18:41:41.840

我相信这通常会起作用，但不能保证我能找到。fwrite(3) 的 Posix 规范遵循 ISO C，并且两个标准都没有提到并发性。

所以我怀疑它通常会起作用，但 fseek(3) 和 fwrite(3) 是缓冲的 I/O 函数，所以成功将取决于库实现的内部细节。因此，绝对不能*保证*，但有各种理由期望它会起作用。

现在，如果程序使用 lseek(2) 和 write(2) 那么我相信你可以考虑保证结果，但现在它仅限于 Posix 操作系统。

有一件事似乎……很奇怪……为什么*MPI 程序*会决定通过*NFS*而不是消息 API 共享其数据？它看起来更慢、更不便携、更容易出问题，而且通常只是浪费 MPI 功能集。鉴于对单个 NFS 服务器的依赖，它肯定不再是分布式的。

# c# - C# Matrix 给出了奇怪的鼠标坐标

> ID：10566330
> 
> 赞同：1
> 
> 时间：2012-05-12T18:26:12.090
> 
> 标签：c#, matrix, coordinates, coordinate-transformation

我正在编写一个绘制多边形的自定义控件。我使用矩阵计算来缩放和剪切多边形，使它们适合控件。

我需要知道是否在其中一个多边形内单击了鼠标，所以我正在使用光线投射。

这一切似乎都可以单独工作，但是我现在遇到了一个问题，即检索相对于我正在使用的显示矩阵的鼠标坐标。

我使用以下代码：

```
// takes the graphics matrix used to draw the polygons
Matrix mx = currentMatrixTransform;            

// inverts it
mx.Invert();

// mouse position
Point[] pa = new Point[] { new Point(e.X, e.Y) };

// uses it to transform the current mouse position
mx.TransformPoints(pa);

return pa[0]; 
```

现在这适用于所有其他坐标集，我的意思是，一对鼠标坐标似乎给出了正确的值，就好像它已经通过了矩阵一样，但是它旁边的那个给出了一个值，就好像它没有通过下面的矩阵是向下移动控件时收到的鼠标值的输出。

> {X=51,Y=75} {X=167,Y=251} {X=52,Y=77} {X=166,Y=254} {X=52,Y=78} {X=166, Y=258} {X=52,Y=79} {X=166,Y=261} {X=52,Y=80} {X=165,Y=265} {X=52,Y=81} { X=165,Y=268}

如果它有助于用于绘制多边形的矩阵是

```
Matrix trans = new Matrix();
trans.Scale(scaleWidth, scaleHeight);            
trans.Shear(italicFactor, 0.0F, MatrixOrder.Append);
trans.Translate(offsetX, offsetY, MatrixOrder.Append);

e.Graphics.Transform = trans;
currentMatrixTransform = e.Graphics.Transform; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:50:15.137

每次调用它时，您都在反转矩阵。Matrix 是一个类，这意味着通过在`Invert()`上执行`mx`，您也在在 上执行它`currentMatrixTransform`。

您可以使用复制矩阵`Clone()`然后反转克隆，也可以`Invert()`在转换点后再次执行`pa`。

第二个反转示例：

```
// takes the graphics matrix used to draw the polygons
Matrix mx = currentMatrixTransform;            

// inverts it
mx.Invert();

// mouse position
Point[] pa = new Point[] { new Point(e.X, e.Y) };

// uses it to transform the current mouse position
mx.TransformPoints(pa);

// inverts it back
max.Invert();

return pa[0]; 
```

克隆示例：

```
// takes the graphics matrix used to draw the polygons
Matrix mx = currentMatrixTransform.Clone();

// inverts it
mx.Invert();

// mouse position
Point[] pa = new Point[] { new Point(e.X, e.Y) };

// uses it to transform the current mouse position
mx.TransformPoints(pa);

return pa[0]; 
```

# php - 根据查询类型和表将流量路由到特定的 MySQL 连接

> ID：10566332
> 
> 赞同：4
> 
> 时间：2012-05-12T18:26:31.727
> 
> 标签：php, mysql, database-design, abstraction

对于我认为是一个常见问题，在中等数量的搜索后没有返回任何内容。我有几个 mysql 服务器，上面有不同的表，每个服务器要么是主服务器，要么是读取从服务器。我想通过读取从属设备和所有其他 INSERT、UPDATE、ALTER 等路由所有 SELECT 和其他非表修改查询。到一个主人，并确保正确的主从组合实际上有我要问的表格。

**TLDR**：*基于表和查询类型（读取或写入）我想使用不同的 mysql 连接。*

为了以一种干净的方式做到这一点，我正在制作一个包装函数，它将检查查询并决定使用哪个连接。在这个函数中将是关于哪些表在哪些服务器上以及哪些是读取的从属或主控的详细信息。我将传入的只是一个包含 sql 语句的字符串。我知道如何使用正则表达式来实现这一点，但如果存在一个内置函数来解释 SQL 语法的任何可变性或我不知道的语句类型的可能性，我更愿意使用它。

**TLDR**：*有没有比正则表达式更好的方法来从 sql 查询的字符串中获取表名和查询类型？什么是读取类型 sql 操作的详尽列表？有没有人已经有一个好的正则表达式来查找所有 SQL 查询变体的 sql 语句部分？*

我想很多人在设置他们的系统时都遇到过类似的问题，至少他们中的一些人以类似的方式解决了这个问题。对任何这些方向的帮助将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:30:14.770

使用 SQL 解析器，例如：

*   [http://pear.php.net/package/SQL_Parser](http://pear.php.net/package/SQL_Parser)
*   [http://sourceforge.net/projects/txtsql/](http://sourceforge.net/projects/txtsql/)
*   [http://sourceforge.net/projects/osqlp/](http://sourceforge.net/projects/osqlp/)
*   [http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)
*   [http://www.phpclasses.org/package/5007](http://www.phpclasses.org/package/5007)
*   [http://www.phpclasses.org/package/4916](http://www.phpclasses.org/package/4916)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:51:47.453

像[Doctrine](http://www.doctrine-project.org/projects/orm.html)或[Propel](http://www.propelorm.org/)这样的 ORM处理这种情况的方式是将每个表与一个连接相关联，然后使用查询对象来构建生成的 SQL。

例如，要`SELECT`在 Doctrine 中构建查询，您可能会执行以下操作：

```
$users = UserTable::getInstance()
  ->createQuery()                      // SELECT is the default operation.
  ->andWhere('is_active = ?', $active)
  ->fetch(); 
```

如果您使用一个类以这种方式以分段方法为您构建查询，那么确定操作的性质和查询的主表是相当简单的。

# wordpress - Wordpress TinyMCE 的自定义样式

> ID：10566333
> 
> 赞同：4
> 
> 时间：2012-05-12T18:26:37.233
> 
> 标签：wordpress, tinymce, wordpress-theming

我已经阅读了几篇关于向 WYSIWYG (TinyMCE) 编辑器添加自定义样式的教程。它们似乎都不适用于最新版本的 Wordpress。我正在使用 v3.3.2。[来自法典](http://codex.wordpress.org/TinyMCE_Custom_Buttons)的说明有效，但以有限的方式......

注意：为了 100% 清楚，我正在尝试添加一个“样式”下拉列表，作者可以使用它来将我的自定义样式应用于文本。（请不要将我的问题与如何使用 editor-style.css 为编辑器设置样式相混淆...）

我设法使代码正常工作，但仅使用`my_mce_before_init()`. 这个版本的问题是它添加了一个泛型的类`<span>`。我正在尝试使用更强大的代码版本（如下所示），但有些地方不太对劲。样式下拉框出现，但它是空白的。如果我点击它，第一项是“样式”，但什么也不做。我怀疑我的阵列有问题。希望比我知识渊博的人可以让我直截了当。

这是我主题的functions.php中的相关代码...

这是我添加按钮的方法：

```
// Add the Style selectbox to the second row of MCE buttons
function my_mce_buttons_2($buttons)
{
    array_unshift($buttons, 'styleselect');
    return $buttons;
}
add_filter('mce_buttons_2', 'my_mce_buttons_2'); 
```

这是我添加样式的方法（当我取消注释时它起作用）：

```
//Define the actual styles that will be in the box
function my_mce_before_init($init_array)
{
    // add classes using a ; separated values
    //$init_array['theme_advanced_styles'] = "Section Head=section-head;Sub Section Head=sub-section-head";

    $temp_array['theme_advanced_styles'] = array(
        array(
            'title' => 'Section Head',
            'block' => 'h3',
            'classes' => 'section-head'
        ),
        array(
            'title' => 'Sub Section Head',
            'block' => 'h4',
            'classes' => 'sub-section-head'
        )       
    );

    $styles_array = json_encode( $temp_array['theme_advanced_styles'] );

            //  THIS IS THE PROBLEM !!!! READ BELOW
    $init_array['theme_advanced_styles'] = $styles_array;

    return $init_array;
}
add_filter('tiny_mce_before_init', 'my_mce_before_init'); 
```

**更新：我想通了（请参阅下面的答案）。在向下滚动之前，请注意上面代码`theme_advanced_styles`中的键是错误的。应该是`style_formats`在以我正在做的方式定义自定义样式时。我怀疑这是一个常见的错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:26:49.667

It seems you're using this (awesome) tutorial: [http://alisothegeek.com/2011/05/tinymce-styles-dropdown-wordpress-visual-editor/](http://alisothegeek.com/2011/05/tinymce-styles-dropdown-wordpress-visual-editor/)
Worked great for me so I compared your code with mine: it seems you lack a

```
'wrapper' => true 
```

as a fourth parameter to each sub-array. This is needed for adding a class on a parent element of your selection (it can broaden your selection) and not creating a new element around your exact selection before adding it a class.
Thus if you select part of a paragraph or part of 2 paragraphs, it'll select the whole paragraph(s) (not so sure about the 2 paragraphs thing, please test :) but at least it won't create inline element around your exact selection).

From the documentation (above link):

```
wrapper [optional, default = false]
  if set to true, creates a new block-level element
  around any selected block-level elements 
```

My customization:

```
$style_formats = array(
    array(
        'title' => 'Column',
        'block' => 'div',
        'classes' => 'col',
        'wrapper' => true
    ),
    array(
        'title' => 'Some div with a class',
        'block' => 'div',
        'classes' => 'some_class',
        'wrapper' => true
    ),
    array(
        'title' => 'Title with other CSS',
        'selector' => 'h3',
        'classes' => 'other_style'
    ),
    array(
        'title' => 'Read more link',
        'selector' => 'a',
        'classes' => 'more'
    )
); 
```

Hope it works for you

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:48:49.077

# 啊哈！

我发现了问题：定义自定义类的两个不同版本必须添加到设置数组中的不同键。

这个版本...

```
"Section Head=section-head;Sub Section Head=sub-section-head"; 
```

...需要是`'theme_advanced_styles'`.

而这个版本...

```
$style_formats = array(
array(
    'title' => 'Column',
    'block' => 'div',
    'classes' => 'col',
    'wrapper' => true
    ),
); 
```

...需要是`'style_formats'`TinyMCE 设置数组中的值。

我已更改为第二种样式，但没有注意到数组的不同键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T18:24:38.890

Wordpress 提供了向编辑器添加自定义样式表的功能：http: [//codex.wordpress.org/Function_Reference/add_editor_style](http://codex.wordpress.org/Function_Reference/add_editor_style)

# php - 使用salesforce SOAP api和合作伙伴wsdl使用php显示子查询结果时出现问题

> ID：10566335
> 
> 赞同：0
> 
> 时间：2012-05-12T18:26:49.140
> 
> 标签：php, soap, salesforce

这是一个代表我的问题的通用查询示例。

```
$query = "SELECT Account.Name, Name from Contract WHERE AccountId = '001U0000003q6scIAA'";
$response = $mySforceConnection->query($query);

foreach ($response->records as $record) {
$sObject = new SObject($response->records[0]);
var_dump($sObject);
echo $sObject->sobjects[0]->Name."<br/>\n";
echo $record->fields->Name."<br/>\n";
echo "*******************************<br/>\n";
echo "*******************************<br/>\n";
} 
```

问题是 Account.Name 字段不会显示。以防万一我的整个方法是错误的，我们的想法是获取分配给特定帐户的所有合同，并显示帐户名称和合同中的相关信息。（到目前为止，所有合约字段都显示完美。只是无法显示帐户名称）

提前感谢您的帮助！

这是 var_export() ..（我删除了所有自定义字段）

```
SObject::__set_state(array( 'type' => 'Contract', 'fields' => stdClass::__set_state(array(
'AccountId' => '001U0000003q6scIAA', 'Name' => 'test contract', '1' =>
SObject::__set_state(array( 'type' => 'Account', 'fields' => stdClass::__set_state(array( 
'Name' => 'test Account name', )), )), )), )) 
```

这是 var_dump() ...

```
object(SObject)#5 (2) { ["type"]=> string(8) "Contract" ["fields"]=> object(stdClass)#1871 (14) {
["AccountId"]=> string(18) "001U0000003q6scIAA" ["Name"]=> string(18) "Test Contract Name"
["1"]=> object(SObject)#1869 (2) { ["type"]=> string(7) "Account" ["fields"]=> object(stdClass)#1870 (1) { ["Name"]=> string(15) "Account Name" } } } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:34:39.717

所以我终于找到了让我走上正确道路的东西。这就是我解决它的方法......

```
foreach ($response->records as $record) {
    echo $record->fields->{1}->fields->Name."<br/>\n";
    echo $record->fields->Name."<br/>\n";
    echo "*******************************<br/>\n";
    echo "*******************************<br/>\n";
} 
```

我最初尝试过这种方法，但没有给出错误的 {}。因此，您所要做的就是查看 print_r() 输出，将数字更改为它在此处提供给您的数字 -`["1"]=> object(SObject)#1869`此查询将显示！

感谢大安试图提供帮助！

# regex - 对前一组应用负前瞻

> ID：10566336
> 
> 赞同：1
> 
> 时间：2012-05-12T18:27:00.103
> 
> 标签：regex, regex-negation

几个小时以来，我一直在努力让这种消极的前瞻性为我工作。只有当它后面没有'/CCC'时它才应该匹配我的字符串

[http://refiddle.com/1xb](http://refiddle.com/1xb)

```
/(^[\w]+)(?!./CCC$)/mg 
```

测试字符串：

```
BBB/CCC
AAA/DDD/CCC 
```

有人能指出为什么我的模式仍然匹配第一行的“BBB”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:29:18.877

首先，您必须转义`/`正则表达式的内部。

您还有一个不应该存在的点并且缺少单词边界：

```
/(^\w+)\b(?!\/CCC$)/mg 
```

[重提](http://refiddle.com/1xc)

# java - 局部变量的Javadoc？

> ID：10566338
> 
> 赞同：16
> 
> 时间：2012-05-12T18:27:17.943
> 
> 标签：java, eclipse, javadoc, local-variables

简短的问题：是否可以为局部变量创建 Javadoc？（我只想在 Eclipse 中将鼠标悬停在局部变量上时对其进行解释）感谢您的任何提示 :-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-09T11:11:24.920

可以使用`Annotations`.

创建一个简单的注释类型，如下所示：

```
@Retention(RetentionPolicy.SOURCE)
@Target(ElementType.LOCAL_VARIABLE)
@interface LocalVariableDocumentation {
    String value();
} 
```

并在您的局部变量上使用它：

```
@LocalVariableDocumentation("A very important object!")
Object anImportantObject; 
```

Eclipse 将在工具提示中显示注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T06:27:51.390

不，它不受支持，因为 JavaDoc 生成将忽略它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T18:31:00.817

局部变量应在其用法上方几行声明。如果需要，只需使用常规注释。但更重要的是，保持方法简短，为它们选择有意义的名称，并仅在需要时声明它们。大多数时候，完全没有必要对局部变量进行注释。

更喜欢

```
int numberOfBooks = books.size(); 
```

超过

```
// the number of books
int n;
... // 50 lines of code
n = books.size(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-04T23:37:27.980

只需链接到您的本地变量

```
String someLocalVariable;
/**
 * This a local variable: {@link #someLocalVariable}
 */ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-09T11:34:01.890

唯一可能的方法是使用全局变量。局部变量不能用 JavaDoc 注释。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-04-29T07:02:20.937

是的，这是可能的。只需在变量上方进行常规 javadoc 注释即可。

```
public class ExampleClass {
    /** A really cool variable */
    int localVariable;

    ... 
```

现在您可以将鼠标悬停在代码中的变量上方，然后将显示注释。

# spring - Spring RMI：handleRemoteConnectFailure

> ID：10566339
> 
> 赞同：0
> 
> 时间：2012-05-12T18:27:21.907
> 
> 标签：spring, connection, rmi

我有一个使用 Spring 3.0 创建的 RMI 客户端/服务器配置。

当客户端和服务器在同一台机器上运行时：

```
 rmi://localhost:1099/myService 
```

一切都好。当我在另一台机器上运行客户端时（服务器现在在 192.168.1.67 上运行）并且客户端“指向”：

```
 rmi://192.168.1.67:1099/myService 
```

我可以从客户端看到此错误消息：

```
 org.spring...RmiClientInterceptor handlerRemoteConnectFailure. 
  Could not connect to Rmi Service [rmi://192.1681.67:1099/myService] 
```

服务器是这样配置的：

```
 <bean id="myService" class="org.springframework.remoting.rmi.RmiServiceExporter">
       <property name="service" ref="myService"/>
       <property name="serviceInterface" value="org.myapp.MyService"/>
       <property name="serviceName" value="myService"/>
       <property name="alwaysCreateRegistry" value="true"/>
    </bean>

    <bean id="myService" class="org.myapp.MyServiceImpl" /> 
```

和客户：

```
 RmiProxyFactoryBean rpfb = new RmiProxyFactoryBean();
    rpfb.setServiceInterface(MyService.class);
    rpfb.setLookupStubOnStartup(true);
    rpfb.setRefreshStubOnConnectFailure(true);
    RMICustomClientSocketFactory socketFactory = new RMICustomClientSocketFactory();
    socketFactory.setTimeout(5000);
    rpfb.setRegistryClientSocketFactory(socketFactory);
    rpfb.setServiceUrl(getRmiUrl(address, port));
    rpfb.afterPropertiesSet(); 
```

我用嗅探器检查了服务器的 1099 端口，当客户端启动它的进程时，我可以看到一些数据在服务器端“发送”：

```
 JRMI..K
 ...192.168.1.65..
 ..192.168.1.65....
 P....w"..........................D.M...;.t..myService
 Q....w.....e...7B+@5..s}.....5org.springframework.remoting.rmi.RmiInvocationHandlerpxr..java.lang.reflect.Proxy.'. ..C....L..ht.%Ljava/lang/reflect/InvocationHandler;pxpsr.-java.rmi.server.RemoteObjectInvocationHandler...........pxr..java.rmi.server.RemoteObject.a...a3....pxpw2.
 UnicastRef..127.0.1.1..../.T~.X.....e...7B+@5...x
 R
 S
 T...e...7B+@5.. 
```

我的问题是：为什么如果客户端和服务器在同一台机器上运行，一切都很好，但在不同的机器上我会遇到这个问题？以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:44:20.040

我在windows上运行服务器，在linux（ubuntu）上运行客户端，一切正常。当我在 linux 上运行服务器并在 windows 上运行客户端时，我遇到了问题。

要在 linux 上修复它，只需使用以下命令运行服务器：`-Djava.rmi.server.hostname=192.168.1.67`.

# android - 如何从listview android中的姓名获取联系方式

> ID：10566341
> 
> 赞同：0
> 
> 时间：2012-05-12T18:27:45.590
> 
> 标签：android, android-intent, android-listview, android-contacts, android-cursor

我已经使用了这段代码，但结果不是我在列表视图中选择的名称的信息，而是来自其他名称的信息。

联系人管理器.java

```
protected void onListItemClick(ListView l, View v, int position, long id)
{
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, ContactEditor.class);
    i.putExtra(ContactsContract.Contacts._ID, id);
    startActivityForResult(i, 2);
} 
```

联系人编辑器.java

```
private Long mRowId;
mRowId = savedInstanceState != null ? savedInstanceState.getLong(ContactsContract.Contacts._ID):null;
    if (mRowId == null){
    Bundle extras = getIntent().getExtras();
    mRowId = extras != null ? extras.getLong(ContactsContract.Contacts._ID):null;
    }

populateFields();
private void populateFields(){
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
    if (mRowId != null)         
    {
        while (cur.moveToNext()) {
        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
        String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        mContactNameEditText.setText(name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:07:28.567

您必须询问您想要的 id。这要求每个联系人，并且只显示最后一个：

```
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
if (mRowId != null)         
{ 
```

尝试这样的事情：

```
if (mRowId != null)         
{
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, 
            ContactsContract.Contacts._ID + "=" + mRowId, null, null); 
```

# jquery - 在选择更改时使用 JQuery 选择文件后清除文件输入字段

> ID：10566342
> 
> 赞同：1
> 
> 时间：2012-05-12T18:27:52.163
> 
> 标签：jquery, html, forms

[使用来自http://www.appelsiini.net/projects/filestyle](http://www.appelsiini.net/projects/filestyle)的名为 filestyle 的 Jquery 插件。我有一个 id 为 adtype 的选择框。如果所选选项的值为 7，它将禁用 id 为“adfile”的文件输入。

当用户已经选择了一个文件时，问题就出现了。我找不到清除文件输入然后禁用它的方法。$('#adfile').val(''); 不起作用。

**查询**

```
$(function(){
  $('#adtype').change(function(){
    if($('#adtype option:selected').val()==="7"){
      $('#adfile').val('');
      $("#adfile").prop('disabled', true);
    }else{
      $("#adfile").prop('disabled', false);
    }
  });
}); 
```

**HTML**

```
<form id="someform" action="somepage" method="post">
  <select name="selectstuff" id="adtype">
    <option value="1">one</option>
    <option value="5">five</option>
    <option value="7">seven</option>
  </select>

  <input type="file" id="adfile" value="" />

  <input type="submit" value="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T18:45:59.603

`$('#adfile').val('');`我用过 `$('#adfile').attr('disabled', 'disabled');`

[演示](http://jsfiddle.net/dhirajbodicherla/qrLyM/)

注意：filestyle 插件`id,name`从文件输入元素中删除属性并添加`file`为类。我正在参考表单访问此元素。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-09T17:17:38.107

```
$(":file").filestyle('clear'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:55:42.463

```
<html>
<head>

<script type="text/javascript">
$(document).ready(function(){
    $('#adtype').change(function(){
        if($('#adtype option:selected').val()==="7"){
            $('#adfile').remove();
            $('#file_div').html('<input type="file" id="adfile" value="" />')
            $("#adfile").prop('disabled', true);
        }else{
            $("#adfile").prop('disabled', false);
        }
    });
});

</script>
</head>

<body>
    <div id="signup">
        <form id="someform" action="somepage" method="post">
       <select name="selectstuff" id="adtype">
<option value="1">one</option>
<option value="5">five</option>
<option value="7">seven</option>
</select>
        <div id="file_div">
         <input type="file" id="adfile" value="" />

        </div>

        <input type="submit" value="submit" />
        </form>

    </div>

</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T12:56:34.683

这对我有用。

```
$("#Elementid").val(null); 
```

# php - php中的日期时间比较

> ID：10566343
> 
> 赞同：0
> 
> 时间：2012-05-12T18:28:03.250
> 
> 标签：php, datetime, time

我有两个时间值，如下所示

```
$row2[0]=00:40:00;
$row1[5]=14:00:00;
$time=14:33:00
$time=$row[1]; 
```

我正在组合 $row2[0],$row1[5] 如下所示

```
$secs = strtotime($row2[0])-strtotime("00:00:00");
$result = date("H:i:s",strtotime($row1[5])+$secs);

$result=14:40:00 
```

我使用 if 条件，如图所示

```
if($row[1]>$row1[5] && $row[1]<$result)
{
$message=array("status"=>$result);
}
else
{
$message=array("status"=>'');
} 
```

但我知道`"status"=>""`它不正确

我想得到`"status"=>"14:40:00"`

请帮助我们获得正确的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:36:56.973

您似乎没有在`$row[1]`任何地方定义，因此它被视为`NULL`，它作为一个整数是`0`，它不能大于您在 中给出的时间`$row1[5]`。

尝试使用不那么模棱两可的变量名，这样可能更容易发现此类问题。

就我个人而言，我根本不明白为什么`if`会出现这种情况，只需将其和`else`块删除即可，仅留下`$message = array("status"=>$result);`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:36:26.680

这是真正的伪代码吗？因为

```
$row2[0]=00:40:00; 
```

不是真正的php代码！

```
$row2[0] = 00:40:00; // $row2[0] would be 0, because you are assigning an integer
$row2[0] = "00:40:00"; // $row2[0] would be "00:40:00", but as a string (!) 
```

顺便说一句，我总是会使用时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:40:42.117

我同意 Panique 的回答，我还想补充一下：

你声明了两个变量：

```
$row2[0]=00:40:00;
$row1[5]=14:00:00; 
```

但是您在 if 中调用了不同的数组元素

```
if($row[1]>$row1[5] && $row[1]<$result) 
```

解决这个问题，你应该让你的代码正常工作。

# vb.net - Metro + VB.net 中的默认页面

> ID：10566345
> 
> 赞同：2
> 
> 时间：2012-05-12T18:28:08.610
> 
> 标签：vb.net, windows-8, windows-runtime, visual-studio-2012, winrt-xaml

我正在尝试使用 Visual Basic 在 Windows 8 CP 上使用 VS11 制作 Metro 应用程序。出于某种原因，应用程序设置中通常的“默认对象”设置显示为灰色。您现在应该如何设置默认表单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:47:42.843

哦，看，我设法找到了自己的答案。在 App.xaml.vb 文件中，有这一行：

```
rootFrame.Navigate(GetType(BlankPage)) 
```

将括号中的变量设置为默认情况下要打开的页面。

# android - 放大 MapView 时出现黑区

> ID：10566349
> 
> 赞同：1
> 
> 时间：2012-05-12T18:29:39.977
> 
> 标签：android

我正在开发一个使用谷歌地图的 Android 应用程序，我面临一些问题：

1-我想在使用捏缩放时避免缩放级别 1，因为我得到了一些丑陋的东西，它看起来像这样：

![在此处输入图像描述](../Images/0ac44eef65d304d7b44a16e8906c0075.png)

我可以使用以下代码段使用缩放控件控制最小缩放：

```
zoomControls.setOnZoomOutClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            if (myMapView.getZoomLevel() == 3){
                Toast t = Toast.makeText(getApplicationContext(), "N other zoom levels", Toast.LENGTH_SHORT).show();

            }else{
                mapController.zoomOut();
            }
        } 
```

2-我想控制最大缩放级别，因为我的屏幕上有黑色区域

我该如何解决这两个问题，对此有任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:36:03.180

无论如何，您只需要像这样覆盖您的绘制方法：

```
@Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);
        if (mapView.getZoomLevel() < 1)
            mapView.getController().setZoom(2);
    } 
```

还要检查最高级别进行需要的全部更改。

# ruby-on-rails - 如何允许用户嵌入 YouTube 和 Vimeo 视频？

> ID：10566351
> 
> 赞同：1
> 
> 时间：2012-05-12T18:29:54.043
> 
> 标签：ruby-on-rails, ruby, youtube, vimeo

如何允许用户在我的 Rails 应用程序中嵌入 YouTube 和 Vimeo 视频？

1.  我会提供一个文本字段或文本区域，用户可以在其中添加他们希望嵌入的视频的链接。

2.  单击添加并在收集详细信息时让我的应用程序显示一个微调器。

3.  找到详细信息后，我希望它们在用户最终提交帖子之前显示在页面上。

我猜是 HTML，链接详细信息需要存储在数据库中，以便每次访问页面时都可以自动显示视频。

HTML5 有一个文件 API，它让我能够即时显示用户本地文件数据。想知道显示远程数据是否有类似的东西，或者是否会使用普通的 ajax？

有这样做的标准方法吗？还有关于如何在 Rails 中执行此操作的教程吗？希望以最安全和最可靠的方式进行此操作。

我喜欢教程和截屏视频，因此我非常感谢有关在哪里可以找到实现我想要实现的目标的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:52:26.623

尝试在用户发送表单之前使用开放图形协议来获取站点信息。

我建议以下宝石：

[https://github.com/intridea/opengraph](https://github.com/intridea/opengraph)

开放图协议：

[http://ogp.me/](http://ogp.me/)

而且我想您应该将所有获取的信息存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T06:27:49.990

[Video Thumb gem](https://github.com/tgezginis/video_thumb)可能正是您要找的。

它处理 vimeo、youtube 和可能的其他人。

然后，您只需执行以下操作：

```
<%= VideoPlayer::player(library_item.url, 700, 420).html_safe %> 
```

在您的视图中显示一个自动生成的嵌入代码。

# asp.net-mvc-3 - 是否可以在单声道下使用 Razor 2.0 视图引擎？

> ID：10566352
> 
> 赞同：7
> 
> 时间：2012-05-12T18:29:55.807
> 
> 标签：asp.net-mvc-3, razor, mono

我对 Razor 2.0 的[条件属性](http://www.asp.net/web-pages/overview/what%27s-new/top-features-in-web-pages-2#Changes_for_the_Beta_Version)功能很感兴趣，因此我尝试将 Razor 2.0 移植到我的 MVC3 应用程序中。我[点击此链接并](http://dotnet.dzone.com/articles/using-razor-v2-aspnet-mvc-3)**使用 ASP.NET 在 Windows 上**成功运行了我的简单应用程序（一个`HomeController`、一个`Index`操作和一个***~/Views/Home/Index.cshtml**视图）。

 **但是当我在 Ubuntu 的 mono 运行时部署我的应用程序时，它无法运行并继续报告**无法找到视图**的错误：

> “/”应用程序中的服务器错误未找到视图“索引”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：~/Views/Home/Index.aspx ~/Views/Home/Index.ascx ~/Views/Shared/Index.aspx ~/Views/Shared/Index.ascx ~/Views/Home/Index。 cshtml ~/Views/Home/Index.vbhtml ~/Views/Shared/Index.cshtml ~/Views/Shared/Index.vbhtml

这个错误我google了一下，大部分文章都说是视图编译的问题，所以我认为是mono无法正确使用新Razor引擎的编译器编译**Index.cshtml**引起的。

然后我将我的应用程序切换回 Razor 1.0 并且在单声道下一切正常，那么单声道无法运行 Razor 2.0 真的是个问题吗？或者有什么快速解决这个问题的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:56:31.910

理论上，Razor pages 与 Mono 一起使用 2.10.x 系列，但您必须将 Microsoft 的程序集与它捆绑到您的 Linux 机器中。

从[Mono 2.11.1开始，这些程序集现在默认捆绑在 Mono 中，因为 Microsoft 最近（2012 年](http://mono.1490590.n4.nabble.com/Mono-2-11-1-is-out-td4575466.html)[3 月](http://tirania.org/blog/archive/2012/Mar-28.html)）开源了 Razor 。

因此，如果我是你，我会尝试 Mono 2.11.3 来查看问题是否已经在上游解决。如果没有，请在[http://bugzilla.xamarin.com/](http://bugzilla.xamarin.com/)中提交一个带有独立测试用例的错误以重现它，并从此处链接到该错误。**

# multithreading - 提升线程和提升 Asio

> ID：10566356
> 
> 赞同：1
> 
> 时间：2012-05-12T18:30:06.547
> 
> 标签：multithreading, boost, boost-asio

我正在研究 Boost Threads 和 Asio（异步输入/输出），并编写了以下示例以将一些概念放在一起。

```
class Worker {
  private:
    boost::asio::io_service&     m_ios;
    boost::asio::deadline_timer  m_timer;
    unsigned                     m_cycles;
    unsigned                     m_time2wait;
    std::string                  m_threadName;

  public:
    Worker(boost::asio::io_service& ios,
           unsigned cycles, unsigned time2wait, const std::string& name);
    ~Worker ();
    void start ();
    void run ();
    void stop ();
};

Worker::Worker (boost::asio::io_service& ios,
                unsigned cycles, unsigned time2wait, const std::string& name)
: m_ios(ios),
  m_timer(ios, boost::posix_time::seconds (1)),
  m_cycles(cycles),
  m_time2wait(time2wait),
  m_threadName(name)
{
  logMsg(m_threadName, "is starting . . . ");
}

Worker::~Worker()
{
  logMsg(m_threadName, "is ending . . . ");
}

void Worker::start()
{
  logMsg (m_threadName, "start was called");

  m_timer.expires_at (m_timer.expires_at () +
              boost::posix_time::seconds (m_time2wait));
  m_timer.async_wait (boost::bind (&Worker::run, this));
}

void Worker::stop()
{
}

void Worker::run()
{
  if (m_cycles > 0)
  {
    logMsg (m_threadName, "run # ", m_cycles);
    --m_cycles;
    m_timer.expires_at (m_timer.expires_at() +
                        boost::posix_time::seconds(m_time2wait));
    m_timer.async_wait(boost::bind(&Worker::run, this));
  }
  else {
    logMsg (m_threadName, "end of cycling");
  }
}

void run_threads (boost::asio::io_service& io_srv)
{
  Worker worker_1(io_srv, 5, 2, "worker 1");
  Worker worker_2(io_srv, 5, 4, "worker 2");
  worker_1.start();
  worker_2.start();

  boost::shared_ptr <boost::thread> worker_Thread_One (
    new boost::thread (boost::bind (&boost::asio::io_service::run, &io_srv)));

  boost::shared_ptr <boost::thread> worker_Thread_Two (
    new boost::thread(boost::bind(&boost::asio::io_service::run, &io_srv)));

  worker_Thread_One->join();
  worker_Thread_Two->join();
}

int main (int argc, char** argv)
{
  boost::asio::io_service ios;

  run_threads(ios);

  return 0;
} 
```

我试图让一些线程并行工作，每个线程都通过一个特定的对象完成它的工作。该示例显然似乎有效，但我感觉混合线程和 Asio （糟糕的设计）是错误的。让线程与 Asio 一起工作是否正确（一个 io_service 用于多个线程）？

线程对象和“worker”对象是如何“绑定”在一起的？我认为他们不像我想的那样。例如，如果我实例化了两个对象和两个线程，我就有了预期的输出。如果我实例化两个对象和一个线程，则程序的输出是相同的。

（logMsg 是一个简单的 cout 包装器，带有互斥锁以同步输出操作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T03:54:08.410

只是一个系统任务处理者，`asio::io_service`它持有一个任务队列，并处理它，你不需要这样使用它，你应该创建一个包含你自己函数的线程`io_service::run()`。线程`io_service`可以是一对一的，也可以是多对一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:17:51.607

您的示例看起来正确，但在这种情况下没有必要使用 Asio。`io_service`当您用作线程池的工作队列时，Asio + 线程最有用。看看`io_service::post`你是否想以这种方式使用它。

# javascript - jquery sortable firefox not working drop 不重新排序

> ID：10566358
> 
> 赞同：1
> 
> 时间：2012-05-12T18:30:32.330
> 
> 标签：javascript, jquery, firefox, jquery-ui-sortable

我正面临 jQuery sortable 的下一个问题（在除 Firefox 之外的所有主要浏览器中都可以正常工作）

我有一个常见的 ul 结构，上面有 4 个 li 项目。al 列表显示和工作正常，您可以拖动项目（firefox）很酷，（我解决了溢出-y：auto；问题也）当您尝试将可拖动项目放到新位置时，问题开始，在 firefox 中， “放置区”不会出现，只有您可以拖动项目，我在几个帖子中进行了研究。

[jQuery UI 可排序滚动辅助元素偏移 Firefox 问题](https://stackoverflow.com/questions/2451528/jquery-ui-sortable-scroll-helper-element-offset-firefox-issue) [Firefox 4 jQuery UI 可排序](https://stackoverflow.com/questions/5543862/firefox-4-issue-with-jquery-ui-sortable) [jquery ui 1.8.16 和 firefox 6 问题 - 可排序无法正常工作](https://stackoverflow.com/questions/7227102/jquery-ui-1-8-16-firefox-6-sortable-not-working-properly-solved)

但是我找不到解决方案，我将向您展示问题的外观。 ![在此处输入图像描述](../Images/eee9efcf27544aa95707d6816dede8ce.png)

我的css，我认为我必须修改如下方式：

```
#list-attributes{width:40%; margin:35px 15px 45px 10px; position:relative;  overflow-y:auto;}
#list-attributes li{background:#F7F7F7; padding:20px; color:#666; width:auto; border:1px solid #CCC; position:relative; text-indent:30px; height:25px}
#list-attributes li div.icon{width:25px; height:35px; background:url(../img/search/sprite_search_filters.png) no-repeat; right:0; margin-right:10px; top:18px; position:absolute;}
#list-attributes li div.getinshape{background-position: 0 -297px}
#list-attributes li div.rekindlespiritually{background-position: 0 -357px}
#list-attributes li div.relaxandunwind{background-position: 0 -417px}
#list-attributes li div.gethealthy{background-position: 0 -477px}
#list-attributes li span.msg{ text-indent:28px; line-height:1.8}
#list-attributes li div.handler{color:#666; width:25px; height:25px; background:#00C4D9 url(../../dashboard/frontend/img/drag.png) no-repeat 5px 5px; cursor:move; display:inline-block; position:absolute; top:15px; left:8px} 
```

jQuery代码：

```
 $("#list-attributes").sortable({
                update : function () {
                     $('#attributeItems').val($('#list-attributes').sortable('toArray'));
                    //$("#info").load("process-sortable.php?"+order);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:56:56.253

好的，这就是答案，我想说这是一个很大的错误，我不知道为什么会发生。

在我的 css 文件中，我在 body 元素处

溢出-y：滚动；溢出-x：隐藏；

我刚刚将它从正文中删除并且可排序开始工作，但我还必须将溢出：自动添加到容器（通常是 ul）标签中。

这是一个非常“wtf”的错误，但我发现了它。希望将来有人面对这个问题可以解决它。如果您找到更好的方法，请告诉我。

# css - 通过 CSS 在 Div 中均匀和水平分布图像

> ID：10566359
> 
> 赞同：33
> 
> 时间：2012-05-12T18:30:35.410
> 
> 标签：css, html

我很难为我的案件找到具体信息。我想在一个 940px 的 div 中分配 3 个图像缩略图，以便与我的其余内容对齐。到目前为止，我已经让图像水平排列，但间距已关闭，所有内容都向左移动。

**这是我的CSS：**

```
#thumbs {   
  width: 940px;
  margin-top:90px;
  margin-left: auto; 
  margin-right: auto;
} 
```

**我的 HTML：**

```
<div id="thumbs">
  <a id="single_image" href="/dev/images/1.png">
    <img src="/dev/images/thumb1.png" alt=""/>
  </a>
  <a id="single_image" href="/dev/images/2.png">
    <img src="/dev/images/thumb2.png" alt=""/>
  </a>
  <a id="single_image" href="/dev/images/3.png">
    <img src="/dev/images/thumb3.png" alt=""/>
  </a>
</div> 
```

**示例图像**

**我目前拥有的：**

[![在此处输入图像描述](../Images/9587e2a50179102272bc11d8ca5cfec0.png)](https://i.stack.imgur.com/touGX.png)

**我想要达到的目标：**

[![在此处输入图像描述](../Images/cdc7d4cddc217f7f3ca4519677826ef0.png)](https://i.stack.imgur.com/HDN2m.png)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-12T18:43:13.657

使用我在此处的答案中显示的技术：[具有等间距 DIV 的流体宽度](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs/6880421#6880421)

这是您的代码：http: [//jsfiddle.net/thirtydot/JTcGZ/](http://jsfiddle.net/thirtydot/JTcGZ/)

**CSS：**

```
#thumbs {   
    width: 540px;
    margin-top:90px;
    margin-left: auto; 
    margin-right: auto;

     text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}
#thumbs a {
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
}
.stretch {
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0
} 
```

**HTML：**

```
<div id="thumbs">
    <a id="single_image1" href="#"><img src="http://dummyimage.com/150x150/444/fff" alt=""/></a>
    <a id="single_image2" href="#"><img src="http://dummyimage.com/150x150/444/fff" alt=""/></a>
    <a id="single_image3" href="#"><img src="http://dummyimage.com/150x150/444/fff" alt=""/></a>
    <span class="stretch"></span>
</div>​ 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-05-26T19:56:57.563

答案很简单，只需使用：

```
.container {
    display: flex;
    justify-content:space-between;
} 
```

就这样！

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-04-01T07:38:08.917

有一个干净的解决方案：

[http://radiatingstar.com/distribute-divs-images-equally-line](http://radiatingstar.com/distribute-divs-images-equaly-line)

```
#container {
    text-align: justify;
}
#container > div {
    width: 100px; /* Declare your value. Can be in relative units. */
    display: inline-block;
    vertical-align: top;
}
#container:after {
    content: "";
    width: 100%;
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-12T18:46:05.940

尝试添加

> 位置：相对；文本对齐：居中；

在#thumbs 中，并在#thumbs 中设置（或img）的宽度和边距。

像这样，测试各种值：

```
#thumbs a {
  width: 25%;
  margin: 0 4%;
  text-align:center;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-24T12:38:35.937

缺点`text-align: justify;`是每两个 inline-block 元素之间必须有空间，否则这两个元素会相互粘连。

您可以在此处检查此行为：http: [//jsfiddle.net/JTcGZ/1552/](http://jsfiddle.net/JTcGZ/1552/)

实现这一点的新的现代方法是使用 flex。

```
#thumbs {   
    display: flex;
    justify-content: space-between // flex-start | flex-end | center | space-around;
    align-items: stretch // flex-start | flex-end | center | baseline;
}
#thumbs a {
    display: inline-block;
} 
```

您还可以在现代浏览器中定义百分比宽度：

```
#thumbs a {
    width: calc((100% / 3) - 10px);
} 
```

请访问此页面以获取有关 flex 布局的更多详细信息：

[https://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-12T18:54:52.070

为什么不将包装 id div thumbs 用作顶部填充为 90px 的容器，而其他内部元素使用一个简单的类（不是 id，因此可以重用），所有这些都向左浮动。这样它们可以完美地水平对齐，并且包装容器也提供了您正在寻找的边距。您还将使用少得多的代码来完成您想要的。

# .net - RAILO CFML 中的 DESede (3DES) 加密

> ID：10566360
> 
> 赞同：1
> 
> 时间：2012-05-12T18:30:36.923
> 
> 标签：.net, encryption, coldfusion, railo, 3des

我已经尝试了很多天来尝试解决这个问题。

第 3 方网络服务要求我使用带有 ECB 和 PKCS7padding 的 3DES 发送加密数据 - 他们使用的是 .NET

railo CFML 中的加密功能仅限于 DESede，没有任何其他选项（即默认值用于密码模式和填充）。

有没有人在 Railo 中遇到过这个问题并提出了解决方案（也许是基于 java 的）？- 我在这里认真地把头发拉出来！

根据下面 Leigh 的建议，我做了一些更改：

我已经取得了一些进展，我认为这个密钥上有某种 MD5 散列。

我在网上搜索并稍微修改了您的解决方案 - 我认为填充不是必要的，但生成的加密字符串起初似乎是我应该期待的，但仔细检查它是不正确的：

```
IvParameterSpec = createObject("java", "javax.crypto.spec.IvParameterSpec");
Cipher = createObject("java", "javax.crypto.Cipher");
SecretKeySpec = createObject("java", "javax.crypto.spec.SecretKeySpec");
BASE64Decoder = createObject("java", "sun.misc.BASE64Decoder");
Str = createObject("java", "java.lang.String");
MessageDigest = createObject("java", "java.security.MessageDigest");

input  = "<xml><PanNumber>6280390027626871</PanNumber><Req_Currency_Code>826</Req_Currency_Code><Card_Pin>1234</Card_Pin><Till_Amount></Till_Amount><Auth_Code></Auth_Code></xml>";
key = "06098140901984F95E139F29B479D952CB6545C177D21456";

md = MessageDigest.getInstance("MD5");
md.update(key.getBytes("UTF-8"), 0, key.length());
keyBytes = md.digest();
newKey = tobase64(keyBytes);
keyBytes2  = binaryDecode(newKey, "base64");
keyBytes2  = arrayMerge(keyBytes, arraySlice(keyBytes, 1, 8));
allnewKey = binaryEncode(javacast("byte[]", keyBytes2), "base64");

encrypted = encrypt(input, allnewKey, "desede", "base64");
WriteDump("encrypted (CF): "& encrypted);` 
```

其结果是：**26sfwv2DHDj7EHYd5Qao8veDtPbKIcv8rDVhbLPDEaWHO27EUGRF6KrdbXe7NBUVADYMdGuagfO4Tev584dUcgKGJ2h6kWPZxooNUGMgL2xB7e00YOkLosA8wFD569sZUd1MGKuF9yCjY1zCsAE4SgohkcuK9YZ7BizQma99 / W9yOsIjAfHtAqGiep4tMTQ + eFASYtPybccsgi8H4brIB / HAu0kaDSAw**

预期的结果是： **26sfwv2DHDj7EHYd5Qao8veDtPbKIcv8rDVhbLPDEaWHO27EUGRF6MxaAzUpJDqQBq8NGgdqmtn6q / wVQNHGWrOE8 + aetKVC78nszS3ZO8AHjwoT1igv4lGl78n8jCHHU + KwnBT7KfXIYMTCuwO / MohIiFbGyhMXPsvv3 / G4OY1C2nEkN0LweLh4mTgtU8syT1M9XdmvwhaltsmPoFtoE9FujvQpJCY3**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T05:58:01.887

> railo CFML 中的加密功能仅限于 DESede，没有任何其他选项（即默认值用于密码模式和填充）。

是的，我相信它使用 java 的默认值，即`DESede/ECB/PKCS5Padding`与`TripleDES/ECB/PKCS7padding`.NET 兼容。因此，只要您使用 24 字节密钥，它就应该可以直接使用。

在不了解更多信息的情况下，我猜这可能是您的密钥大小有问题。.NET 支持 16 和 24 字节密钥，但 java 仅支持 24 字节密钥。因此，如果您的密钥只有 16 个字节，则需要用前八 (8) 个字节填充它，以使其能够被 Java/Railo 接受。

**CF/Railo 代码**

```
<cfscript>
    input  = "DESede (3DES) Encryption in RAILO CFML";
    key    = "ru8femXhTm9jwdGdhb/4Sw==";

    // pad the key with the first eight bytes. then convert back to base64
    keyBytes  = binaryDecode(key, "base64");
    keyBytes  = arrayMerge(keyBytes, arraySlice(keyBytes, 1, 8));
    newKey = binaryEncode(javacast("byte[]", keyBytes), "base64");

    encrypted = encrypt(input, newKey, "desede", "base64");
    WriteDump("encrypted (CF): "& encrypted);
</cfscript> 
```

**C# 代码**

```
byte[] input = Encoding.UTF8.GetBytes("DESede (3DES) Encryption in RAILO CFML");
byte[] key = Convert.FromBase64String("ru8femXhTm9jwdGdhb/4Sw==");

TripleDESCryptoServiceProvider algorithm = new TripleDESCryptoServiceProvider();
algorithm.Mode = CipherMode.ECB;
algorithm.BlockSize = 64;
algorithm.KeySize = 128; // 16 byte key
algorithm.Key = key;
ICryptoTransform cipher = algorithm.CreateEncryptor();
byte[] encrypted = cipher.TransformFinalBlock(input, 0, input.Length);
Console.WriteLine("encrypted (.NET): {0}", Convert.ToBase64String(encrypted)); 
```

**结果：**

```
encrypted (CF):   fMPlk0ZqHDwp2zzZs/Cng7Y6r8Acr55UPJYWJTruEesxkBApsEFo6w==
encrypted (.NET): fMPlk0ZqHDwp2zzZs/Cng7Y6r8Acr55UPJYWJTruEesxkBApsEFo6w== 
```

* * *

**更新：** 奇怪。当我对 .NET 中的密钥进行 MD5 哈希处理时，我得到了您的第一个结果，而不是“预期结果”

```
 String rawInput = "<xml><PanNumber>6280390027626871</PanNumber><Req_Currency_Code>826</Req_Currency_Code><Card_Pin>1234</Card_Pin><Till_Amount></Till_Amount><Auth_Code></Auth_Code></xml>";
    String rawKey = "06098140901984F95E139F29B479D952CB6545C177D21456";
    byte[] input = Encoding.UTF8.GetBytes(rawInput);
    byte[] key = MD5.Create().ComputeHash(Encoding.UTF8.GetBytes(rawKey));
    // ... rest of code 
```

**结果：**

```
encrypted (.NET): 26sfwv2DHDj7EHYd5Qao8veDtPbKIcv8rDVhbLPDEaWHO27EUGRF6KrdbXe7NB
UVADYMdGuagfO4Tev584dUcgKGJ2h6kWPZxooNUGMgL2xB7e00YOkLosA8wFD569sZUd1MGKuF9yCjY1
zCsAE4SgohkcuK9YZ7BizQma99/W9yOsIjAfHtAqGiep4tMTQ+eFASYtPybccsgi8H4brIB/HAu0kaDS
Aw 
```

# python - 我的精灵不会向右移动

> ID：10566361
> 
> 赞同：1
> 
> 时间：2012-05-12T18:30:44.397
> 
> 标签：python, pygame, sprite

早些时候我的精灵根本不会移动，所以我发布了代码，我大部分都修复了，但现在我的向上/向下箭头工作正常，但我的右键不起作用。（另外，当您按下两个键，然后放开一个键时，步行动画不起作用，但我现在并不急于解决这个问题。）而且我不想使用用户制作的课程。提前致谢。这是代码：

```
from pygame.locals import *
import pygame._view

pygame.init()
clock = pygame.time.Clock()

height = 500
width = 500
screen = pygame.display.set_mode((width, height), 0, 32)
pygame.display.set_caption('placeholder text')

photo = 'grassbackground.png'
background = pygame.image.load(photo).convert()

rectexist = False

photo1 = 1

user = pygame.sprite.Sprite()

change = False

up = False
down = False
left = False
right = False

speed = 5

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == K_UP:
                up = True
                change = True
            if event.key == K_DOWN:
                down = True
                change = True
            if event.key == K_LEFT:
                left = True
                change = True
            if event.type == K_RIGHT:
                right = True
                change = True

        if event.type == KEYUP:
            if event.key == K_UP:
                up = False
                change = False
            if event.key == K_DOWN:
                down = False
                change = False
            if event.key == K_LEFT:
                left = False
                change = False
            if event.key == K_RIGHT:
                right = False
                change = False

    if down and user.rect.bottom < height:
        user.rect.top += speed
    if up and user.rect.top > 0:
        user.rect.top -= speed
    if left and user.rect.left > 0:
        user.rect.left -= speed
    if right and user.rect.right < width:
        user.rect.right += speed

   if change == True:
        pygame.time.wait(110)
        photo1 += 1

    if change == False:
        photo1 = 1

    if photo1 == 1:
        user.image = pygame.image.load("1.png").convert()
        if rectexist == False:
            user.rect = user.image.get_rect()
        rectexist = True
        screen.blit(user.image, user.rect)

    if photo1 == 2:
        user.image = pygame.image.load("2.png").convert()
        screen.blit(user.image, user.rect)

    if photo1 == 3:
        user.image = pygame.image.load("3.png").convert()
        screen.blit(user.image, user.rect)

    if photo1 >= 4:
        photo1 = 1

    thesprites = pygame.sprite.RenderPlain((user))
    thesprites.update()

    screen.blit(background, (0, 0))
    thesprites.draw(screen)

    pygame.display.update()
    clock.tick(60) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:26:17.037

在你的代码中它说：

```
if event.type == K_RIGHT: 
```

它应该是：

```
if event.key == K_RIGHT: 
```

要继续制作动画，您需要稍微更改代码，添加：

```
key_pressed = [] 
```

在一开始的时候。然后对于每个按键块执行：

```
key_pressed.append(event.key) 
```

和 key-release 做：

```
key_pressed = [k for k in key_pressed if k != event.key] 
```

而不是`change=True`和`change=False`分别。然后在检查按下和释放的两个部分之后添加这些行：

```
if len(key_pressed) > 0:
    change = True
else:
    change = False 
```

那应该可以解决您的大部分问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T03:36:05.393

用于`pressed = pygame.key.get_pressed()`获取当前按下的所有键的字典（实际上是元组，但事物的结构方式可以将其视为字典）。你会这样使用它：

```
pressed = pygame.key.get_pressed()
if pressed[K_LEFT]:
    # move left
elif pressed[K_RIGHT]:
    # move right
# etc 
```

# python - 这是一个线程安全的模块，实际上你是怎么写的？

> ID：10566362
> 
> 赞同：0
> 
> 时间：2012-05-12T18:30:47.453
> 
> 标签：python, multithreading

我实际上正在使用一个涉及大量 mysql 操作的多线程程序，基本上这很痛苦，因为你必须想出一个聪明的方法来使所有查询工作。这让我想到了如何使模块线程安全。

无论如何，我试图以这种方式提出我的问题：假设您需要不断地将新内容附加到具有许多不同线程的 txt 文件中，`main.py`肯定会如下工作：

```
import threading

lock = threading.RLock()

def AppendStr(the_str):
    write_thread = threading.Thread(target = RealAppending, args = (the_str, ))
    write_thread.start()

def RealAppending(the_str):
    lock.acquire()

    the_file = open("test.txt", "a")
    the_file.append(the_str)
    the_file.close()

    lock.release()

def WorkerThread(some_arg):
    do stuff

    AppendStr("whatever you like")

for counter in range(100):
    new_thread = threading.Thread(target = WorkerThread, args = (some_arg, ))
    new_thread.start() 
```

好吧，问题是，如果我想让代码整洁且更易于维护，**如果我将下面的代码放入以下代码，它是否仍然有效** `write.py`：

```
import threading

lock = threading.RLock()

def AppendStr(the_str):
    write_thread = threading.Thread(target = RealAppending, args = (the_str, ))
    write_thread.start()

def RealAppending(the_str):
    lock.acquire()

    the_file = open("test.txt", "a")
    the_file.append(the_str)
    the_file.close()

    lock.release() 
```

**并这样做** `main.py`：（我并不真正了解`import`python中的工作原理）

```
import write

def WorkerThread(some_arg):
    do stuff

    write.AppendStr("whatever you like")

for counter in range(100):
    new_thread = threading.Thread(target = WorkerThread, args = (some_arg, ))
    new_thread.start() 
```

还有，如果有很多其他模块`write.py`以多线程方式使用，然后你导入这些模块并从那里`main.py`调用不同的模块怎么办。`def`一切都会按预期进行吗？如果不是，我应该怎么做才能设计一个可以像这样使用的终极线程安全模块？

**如果您`write.py`在许多其他模块中导入，它们是否都共享相同的`lock`？这些模块中变量的范围是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:46:14.277

这看起来像一个线程保存模块，但有错误：

这是一个更好的版本：

```
def RealAppending(the_str):
    lock.acquire()
    try:
        the_file = open("test.txt", "a")
        try:
            the_file.write(the_str) # write
        finally:
            the_file.close()
    finally: # if an error occurs
        lock.release() 
```

因为：

*   如果写入文件时发生错误，则必须释放锁

上面的语法适用于 python 2.3 及更低版本

这是完全相同的改进版本：

```
def RealAppending(the_str):
    with lock:
        with open("test.txt", "a") as the_file:
            the_file.write(the_str) # write 
```

所以是的，你的模块是线程保存的。可以添加一些东西来防止用户以非线程保存方式使用它：

```
# write.py
__all__ = ['AppendStr'] # put all functions in except the ones others shall not see
# so id you do from write import * nothing else will be imported but what is __all__ 
```

但是您仍然无法知道将字符串写入文件的顺序。

# django - 使用 Django 对 handlebars.js 模板进行服务器端渲染

> ID：10566364
> 
> 赞同：1
> 
> 时间：2012-05-12T18:30:48.807
> 
> 标签：django, handlebars.js

是否可以使用 Django 渲染车把模板？我试图避免提供需要在服务器端和客户端呈现的每个模板的两个副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:40:18.963

你想要[djangobars](https://github.com/mjumbewu/djangobars)。很好地解决了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:48:17.747

我创建了一个自定义标签来解决这个问题。它遍历解析器并在夹在 {% handlebars %} 和 {% endhandlebars %} 之间时忽略 handlebars 表达式

看看：[https ://github.com/anthonysutardja/Django-Template-Handlebars](https://github.com/anthonysutardja/Django-Template-Handlebars)

# xcode - 什么是 CompileC？

> ID：10566367
> 
> 赞同：13
> 
> 时间：2012-05-12T18:31:09.870
> 
> 标签：xcode

我很惊讶一个简单的谷歌搜索没有回答这个问题......我知道它是 XCode 使用的东西，但我也无法运行它或从命令行获取手册页。

它有什么作用，我在哪里可以找到信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-06T03:13:18.773

CompileC 是 xcodebuild 内部函数的记录表示。它是关于 build.log 文件中编译的基本信息的来源。对于具有 main.m 类的简单终端应用程序，CompileC 之后的信息指示：

*   目标文件（main.o，在 xcodebuild 过程中临时存储在哈希目录中）
*   方法文件（main.m）
*   编译模式（正常 - 我不知道其他选项 - 任何人？）
*   架构 (X86_64)
*   语言（目标-c）
*   编译器（com.apple.compilers.llvm.clang.1_0.compiler）

您不能直接从命令行访问 CompileC，但如果您愿意，可以从命令行对 Xcode 构建过程进行大量控制：

```
man xcodebuild 
```

# visual-studio-2008 - 在 VS2008 中加载和解析清单失败

> ID：10566371
> 
> 赞同：1
> 
> 时间：2012-05-12T18:31:58.057
> 
> 标签：visual-studio-2008, cuda

我正在尝试使用 cuda 工具包 4.1 在 VS2008 中设置 CUDA。我编写了简单的程序来打印 Hello World。我无法编译这个简单的程序。VS给我以下错误

`>Embedding manifest... 1>.\Debug\stream.exe.intermediate.manifest : general error c1010070: Failed to load and parse the manifest. The system cannot find the file specified. 1>Build log was saved at "file://c:\Users\myName\Documents\Visual Studio 2008\Projects\stream\stream\Debug\BuildLog.htm" 1>stream - 1 error(s), 0 warning(s) ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========`

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:24:18.267

清单文件根本没有生成，或者 Visual Studio 在错误的位置查找它。检查清单文件的名称和路径是否在`Solution Properties | Linker | Manifest File`和之间匹配`Solution | Properties | Manifest Tool`。您也可以通过关闭来临时解决此问题`Solution | Properties | Manifest Tool | Input and Output | Embed Manifest`，但这可能会导致应用程序运行出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:08:10.623

尝试从头开始创建一个新的 CUDA 项目。这适用于带有 CUDA 4.1 的 Visual Studio 2010：

*   打开 Visual Studio
*   选择`File | New | Project | Win32 Console Application`。无需更改应用程序设置。
*   右键单击解决方案中的项目。选择`Build Customizations`
*   选中 CUDA 4.1 目标框
*   右键单击项目并选择`Add | New Item | NVIDIA | CUDA | CUDA C/C++ file`
*   右键单击项目并选择`Properties`
*   中`Configuration Properties | Linker | Input | Additional Dependencies`，添加`cudart.lib`
*   编译

# visual-studio-2010 - 尝试在 VS2010 中创建 Azure 项目时，LoadPackage 调用失败错误消息

> ID：10566375
> 
> 赞同：2
> 
> 时间：2012-05-12T18:32:51.210
> 
> 标签：visual-studio-2010, azure

尝试在 Visual Studio 2010 中创建 Azure 项目时，我收到一个对话框，其中包含一条错误消息，指出“LoadPackage 调用失败”。

Visual Studio ActivityLog 显示以下错误：

> 466 错误 CreateInstance 包 [Microsoft.Cct.CctProjectPackage, Microsoft.VisualStudio.CloudService, Version=1.3.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a] {CCE67B96-C6C0-4765-93CB-995CF3BF913C} 80070002 VisualStudio 2012/05/ 12 18:14:17.357
> 
> 467 错误结束包加载 [Microsoft.Cct.CctProjectPackage，Microsoft.VisualStudio.CloudService，版本=1.3.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a] {CCE67B96-C6C0-4765-93CB-995CF3BF913C} 80004005 - E_FAIL VisualStudio 2012/05 /12 18:14:17.359
> 
> 468 警告包加载失败；跳过标志抑制的错误消息 {CCE67B96-C6C0-4765-93CB-995CF3BF913C} VisualStudio 2012/05/12 18:14:17.360 469 输入函数 CVsPackageInfo::HrInstantiatePackage {CCE67B96-C6C0-4765-93CB-9905CF3BF913C} VisualStudio 2 /12 18:14:17.399
> 
> 470 开始包加载 [Microsoft.Cct.CctProjectPackage，Microsoft.VisualStudio.CloudService，版本=1.3.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a] {CCE67B96-C6C0-4765-93CB-995CF3BF913C} VisualStudio 2012/05/12 18： 14:17.402
> 
> 471 错误 CreateInstance 包 [Microsoft.Cct.CctProjectPackage，Microsoft.VisualStudio.CloudService，版本=1.3.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a] {CCE67B96-C6C0-4765-93CB-995CF3BF913C} 80070002 VisualStudio 2012/05/ 12 18:14:17.403
> 
> 472 错误结束包加载 [Microsoft.Cct.CctProjectPackage，Microsoft.VisualStudio.CloudService，版本=1.3.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a] {CCE67B96-C6C0-4765-93CB-995CF3BF913C} 80004005 - E_FAIL VisualStudio 2012/05 /12 18:14:17.404
> 
> 473 警告包加载失败；跳过标志抑制的错误消息 {CCE67B96-C6C0-4765-93CB-995CF3BF913C} VisualStudio 2012/05/12 18:14:17.406

尝试加载任何 azure 项目时，会出现另一个对话框：

> 无法打开“HelloWorld.ccproj”，因为此版本的应用程序不支持其项目类型 (.ccproj)。

在此实例中，ActivityLog 中也出现了类似的错误，引用了相同的 CctProjectPackage 程序集。

* * *

到目前为止，我已经尝试安装、删除和重新安装最新版本的

*   Windows Azure SDK
*   VSCloudService.exe
*   Windows Azure 工具
*   适用于 .NET 的 Windows Azure 库

我尝试使用 Web 平台安装程序来安装必要的工具。我什至已经升级到 Visual Studio 2010 SP1 以及删除并重新安装 Visual Studio。

这些都没有解决问题。我已尝试搜索有关为什么 Microsoft.Cct.CctProjectPackage 或 Microsoft.VisualStudio.CloudService 程序集似乎无法通过 Google 加载的解释，唯一的建议似乎是重新安装这些工具，但这些工具不起作用。我什至尝试在 Bing 上搜索。

我没有想法，希望任何可能遇到类似问题或可以推荐其他尝试的人的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:56:08.003

感谢微软的支持，问题已得到解决。事实证明，Azure Tools 1.3 没有被正确卸载，这意味着 Visual Studio 在尝试加载 Azure 项目时会从中寻找文件，而不管是否安装了较新的版本。

解决方案是重新安装 Azure Tools 1.3，然后再次卸载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:46:03.693

我想知道您使用的是什么操作系统。如果您使用的是介于 Windows Vista 和 Windows Server 2008 R2 之间的操作系统版本，则安装过程非常简单。请确保您拥有最新的操作系统服务包和 Visual Studio 服务包。如果您使用的是较早版本的操作系统，例如 Windows XP，则不能不安装 Windows Azure SDK。另请检查 Visual Studio 的第三方插件是否可能会导致问题。如果您使用的是 Windows 8，则它无法使用一体化软件包。请单独安装每个组件。它还需要启用几个 Windows 组件。我建议您查看[http://www.windowsazure.com/en-us/develop/net/other-resources/windows-azure-on-windows-8/](http://www.windowsazure.com/en-us/develop/net/other-resources/windows-azure-on-windows-8/)了解更多信息。

最好的祝福，

明旭。

# objective-c - 如何将“nil”值插入绑定到 tableview 的数组中？

> ID：10566376
> 
> 赞同：1
> 
> 时间：2012-05-12T18:32:56.160
> 
> 标签：objective-c, nsarray

我想对一件事有一些提示：

在绑定到 tableview 列的数组中，我有一些数字（浮点）值。使用标有“0”、“1”、“2”等的界面按钮输入（放入数组中）这些值。还有一个“C”按钮可以取消条目。

后来，我对这个数组进行了一些计算。如果没有输入结果，则数组的对象不能为 0。“无值”当然用“nil”表示更好……但不允许将 nil 对象插入数组（nil 表示“数组结束”）。

NSArray 包含对象。也就是说，在这里，这些对象必须是 NSNumbers。所以我可以通过用 [NSNumber numberWithDouble:...] double 填充它来初始化我的数组？我不能在这里放零！

一个真正的 NSArray 不（不能）包含“洞”。但是我必须这样做，例如，如果第三项从未收到过价值。我怎样才能：

为我的 NSNumber 实现“未定义”值？使“C”按钮删除以前输入的结果？

必须有解决办法。在 ApplescriptObjC 中，我使用了一个技巧：我在每个按钮调用的方法中使用其标题进行了归因，因此：

```
 if sender's title as string is "C" then
 set item theRow of gResult to missing value -- the row was the selected line, gResult was a AS list.
 else
 set item theRow of gResult to sender's title as real
 end if 
```

我应该在这里做什么？- 选择一个特殊值（比如-1）来表示一个未定义的值，然后使用 NSPredicate 过滤我的数组？- 我怎么能把单元格变成“无”，因为特殊值是什么并出现在单元格中（甚至）

我确信这个问题有一个优雅的解决方案。但是现在我只是把我剩下的那一点头发撕掉了……</p>

感谢您的帮助……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:36:53.623

您可以添加一个 NSNull 对象来表示一个空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T18:55:30.917

NSArray 必须始终包含对象，nil 是指示数组结束的标志。因此，为了将 nil 值表示为对象，您应该使用 NSNull，如下所示：

```
[NSNull null] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:49:07.060

你需要在你的 NSArray 中有一个“杰出”的对象。当您看到那个杰出的对象时，您的代码会做一些不同的事情。这样一个“杰出”的对象通常被称为“哨兵”，它可以是任何东西。例如：

```
static NSNumber *theSentinel;

/* initialize theSentinel somewhere with */
theSentinel = [NSNumber numberWithFloat: <anyfloat-doesnt'-matter-which>]; 
```

然后在您的代码中：

```
NSNumber *selection = [NSArray objectAtIndex: <user selection>];

if (selection == theSentinel) { /* something */ }
else { /* main */ } 
```

在您的谓词中，您可以使用（用文字，而不是代码）：

```
predicate = (obj NOT EQUAL theSentinel) AND (rest of your predicate based on float) 
```

# magento - 从中获取价值 在 page.xml

> ID：10566379
> 
> 赞同：1
> 
> 时间：2012-05-12T18:33:16.340
> 
> 标签：magento

我需要在同一页面上使用相同的自定义块 2 次，但从数据库加载不同的值。

所以我需要将一个配置值（这里称为 SimpleMenuInstanceRef）从我的 page.xml 文件传输到块/模型，以便每个块都知道要从数据库加载哪些数据。

我正在用这个块做：

```
 <block template="simplemenu/leftMenuTemplate.phtml" type="simplemenu/standard" name="leftMenu" as="leftMenu" translate="label">
        <label>Left menu header</label>
        <action method="setSimpleMenuInstanceRef"><SimpleMenuInstanceRef>4</SimpleMenuInstanceRef></action>
        </block> 
```

这有点工作。在我的 leftMenuTemplate.phtml 我可以做一个

回声 $this->getSimpleMenuInstanceRef()

这将显示配置中的值。

但是我需要我的 blocks _construct 方法中的值，这样我就可以根据它的值加载数据。但是在 _construct 中执行 $this->getSimpleMenuInstanceRef 不会返回任何内容。那么如何在我的块代码中获取值，或者我是否需要以其他方式传输值？

编辑：将 __construct 更改为 _construct 以匹配真实代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:43:33.220

**更新：**尽管`createBlock`函数 (in `Mage_Core_Mode_Layout`) 具有`$arguments`数组的参数，但事实证明块构造函数（在 Magento 的现代版本中）没有通过属性传递

```
$block = $this->addBlock($className, $blockName);

...

public function addBlock($block, $blockName)
{
    return $this->createBlock($block, $blockName);
}

...

public function createBlock($type, $name='', array $attributes = array())
{
    ...
    $block = $this->_getBlockInstance($type, $attributes);
    ...
} 
```

所以这个答案的核心是不正确的。不过，我将答案留在这里，因为它包含其他有用的信息。

这是您尝试做的问题。

Layout XML 的每个节点都代表一行用于生成块的 PHP 代码。

当你说

```
<block template="simplemenu/leftMenuTemplate.phtml" 
```

幕后发生的事情看起来像这样（`$attributes`节点属性的表示在哪里）

```
$block = new $block($attributes); 
```

然后，Magento 遇到你的下一行

```
<action method="setSimpleMenuInstanceRef"><SimpleMenuInstanceRef>4</SimpleMenuInstanceRef></action> 
```

翻译为

```
$block->setSimpleMenuInstanceRef('4'); 
```

因此，您遇到的问题是在调用、 和方法时`__construct`，Magento 尚未处理该节点，因此您的值未设置。 `_construct``_prepareLayout``action`

一种可能的解决方案是将您的数据包含为块的属性（`my_data_here`如下）

```
<block template="simplemenu/leftMenuTemplate.phtml" type="simplemenu/standard" name="leftMenu" as="leftMenu" translate="label" my_data_here="4"> 
```

属性被传递到块的构造方法中。虽然基块没有`__construct`，但`Varien_Object`它扩展的类有

```
#File: lib/Varien/Object.php
public function __construct()
{
    $args = func_get_args();
    if (empty($args[0])) {
        $args[0] = array();
    }
    $this->_data = $args[0];

    $this->_construct();
} 
```

此构造函数将采用第一个构造函数参数并将其设置为对象（在这种情况下，对象是我们的块）的数据数组。这意味着您可以使用

```
$this->getMyDataHere();
$this->getData('my_data_here');
//... 
```

一个警告。

如果你想这样做，你不能在你的块中创建你自己的构造函数方法，因为这意味着 Varien_Object 构造函数永远不会被调用。这就是为什么要在所有块中使用单个下划线构造函数 (_construct)。

不久前我写了一篇文章，涵盖了所有的[事件生命周期方法](http://alanstorm.com/magneto_listener_lifecycle_block)，您可能会发现它很有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:38:49.650

是的，你需要。尝试将块声明为：

```
<block instance="4" template="simplemenu/leftMenuTemplate.phtml" type="simplemenu/standard" name="leftMenu" as="leftMenu" translate="label">
    <label>Left menu header</label>
</block> 
```

完成此操作后，您可以轻松访问“实例”变量：

```
protected function _construct() {
    parent::_construct();
    echo $this->getData('instance');
} 
```

# python - GAE/Python - 将请求从控制器传递到模型的最佳方式是什么？

> ID：10566382
> 
> 赞同：1
> 
> 时间：2012-05-12T18:34:22.547
> 
> 标签：python, google-app-engine, request

在下面的示例代码中，我说明了如何解决将请求从控制器传递到模型的问题。有一个更好的方法吗？

模型/MyModel.py

```
from google.appengine.ext import db

class MyModel(db.model):
    a = db.StringProperty(required=True)
    b = db.StringProperty(required=True)
    c = db.StringProperty(required=True)

class Update:
    def __init__(self, x)
        self.x = x

    def do_something(self)
        myquery = db.GqlQuery('SELECT * FROM MyModel WHERE a = :1' self.x)
        v = myquery.get()

        if not v:
            somevalue = MyModel(a = self.request.get('a'), # Doesn't work unless
                                b = self.request.get('b'), # the request has been
                                c = self.request.get('c')) # passed
            somevalue.put() 
```

控制器/MyController.py

```
import webapp2
from models.MyModel import Update

class WebHandler(webapp2.RequestHandler):
    def get(self):
        var_x = "string"
        var_y = "string"
        z = Update(var_x)
        z.request = self.request  # <--- Is there a better way?
        z.do_something() 
```

编辑：（5/30/2012）我最终创建了一个函数来将请求变量作为参数传递给模型。我希望有一些蟒蛇魔法可以避免所有重复，但我没有找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:10:52.167

将请求移交给模型意味着您正在混合模型和控制器。

通常模型甚至不应该知道他们甚至是一个请求。从请求中获取参数是控制器的工作，而不是模型。如果您的`do_something`方法必须使用参数，那么它应该将它们作为参数获取并返回结果（通常是实体）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:30:56.723

你需要更多的封装。另一个抽象层次是有用的。

创建一个表示您`MyModel`用于持久化的实际事物的类，使用`a`、`b`和`c`属性或属性：

```
class Thing(object):

   def __init__(a, b, c):
      self.a = a
      self.b = b
      self.c = c 
```

这个类对请求、数据存储或持久性一无所知。它是围绕事物本身的所有实际业务逻辑所在的地方。

您可以在不需要请求或数据库的情况下实例化此类，并且可以对所有业务逻辑进行单元测试，而无需模拟 GAE 的任何管道。

然后，您可以在您的请求处理程序中编写代码来实例化这个东西，例如：

```
def get(request):
  thing = Thing(a=request.get('a'), b=request.get('b'), c=request.get('c'))
  u = Update(some_params)
  u.do_something(thing) 
```

您可以添加一个类方法来`MyModel`放置一个东西，例如：

```
@classmethod
def put_thing(thing):
  model = MyModel(a=thing.a, b=thing.b, c=thing.c)
  model.put() 
```

然后您的`do_something`逻辑可以在`MyModel.put_thing(thing)`需要将其添加到数据库时调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T18:56:34.333

您可以使用 @classmethod 装饰器将更新作为类方法添加到 MyModel 类并调用 MyModel.update(a=x)

# javascript - jQuery UI：可拖动的“重置”循环变量？

> ID：10566384
> 
> 赞同：0
> 
> 时间：2012-05-12T18:34:33.057
> 
> 标签：javascript, jquery-ui, loops, draggable

我正在处理一个页面，该页面上有许多可拖动的“节点”，每个节点都有一个数字 ID。我根据我得到的一些服务器端数据创建这些：

```
for(var nodeid in data) { // data fetched by AJAX request

    // makeHTML generates an HTML snippet with ID #node-{nodeid}
    $("body").append(makeHTML(nodeid));

    // make nodes draggable, calling node action on stop
    $("#node-" + nodeid).draggable({
        stop: function(event, ui) {
            performAction(nodeid);
        }
    });
} 
```

所有对象都出现在页面上，并按照我的预期标记/给定 ID，但是每当我拖动某些东西时，它总是使用循环中`performAction()`的**最后一个**ID 调用，而不是与拖动对象关联的 ID。

是否有原因`nodeid`没有正确传递`performAction()`？我是否需要以不同的方式声明有关循环的内容？

# c++ - C++11 升级技巧

> ID：10566389
> 
> 赞同：3
> 
> 时间：2012-05-12T18:34:58.770
> 
> 标签：c++, c++11

我想开始过渡到在大型*跨平台*代码库中使用 C++11。主要问题是 C++11 支持的级别因使用的编译器而异。

除了在整个代码中乱扔宏之外，是否有人对如何缓解这种过渡有任何示例/建议？请提供特定功能的技术。例如：

```
// cpp11compat.h

// For compilers that do not have 'nullptr', we will define it as 'NULL'.
// Any misuses of 'nullptr' will be caught by C++11 compliant compilers.
// Obviously, this won't fix anything that depends on the type 'nullptr_t'
//
#ifdef STUPID_SUN_COMPILER
#define nullptr NULL
#endif 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:07:35.377

我建议您从找到当前编译器的 C++11 功能的最大公分母开始。有关调查，请参阅：[http](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport) ://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport 最广泛支持的功能包括`auto`,`decltype`和 move 语义，因此您可以从用这些重写代码开始，并进行 #define 修复对于不支持大多数其他平台支持的特定功能的平台（例如`nullptr`）。

对于所有配置文件的文件组织，您可能需要查看[Boost.Config](http://www.boost.org/doc/libs/1_49_0/boost/config/)的源代码它包含几个目录，按平台和用途排序。例如 config/platform/irix.hpp 包含所有针对 Irix 的平台特定的东西。

**编辑**：另一个模拟语言特征的好方法是查看[语言特征模拟](http://www.boost.org/doc/libs/?view=category_Emulation)标签的 Boost 库。它们包含诸如 Move、Foreach 和以前的 Lambda 之类的库，它们的语法与标准 C++11 功能非常相似（尽管不一定完全相同）。这使您可以让 Boost 担心平台兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:03:04.470

自该标准发布以来，时间已经过去了。虽然您可能可以通过 boost 实现几乎所有 C++11 功能，但今年可能不是开始此类迁移的最佳时机，除非您已经在这条路上，因为这将导致迁移两次。

所以我建议你在开始迁移之前再给编译器供应商一两年。同时，如果您认为 C++11 在整个代码库中对您非常重要，请尝试停止支持任何可能不会出现更新编译器的废弃平台。

（事实上​​，*永远不会*将大型代码库完全迁移到语言标准的下一个版本是完全正常和普遍的，但这与您当前的措辞方式无关。）

# javascript - 检查整数值是否是线性序列的一部分？

> ID：10566392
> 
> 赞同：1
> 
> 时间：2012-05-12T18:35:12.473
> 
> 标签：javascript, jquery, ajax

我有一个系统，每次用户按下“完成”按钮时，都会在现有数字 x 上加 20 (..-40,-20,0,20,40,60..)，这会使 x 增加20，通过Ajax，并将这个新值存储在数据库中，并用Ajax实时显示它的变化。

不过，随着这个数字的增加，我很难找到一种方法来检查它是否满足 Javascript 的线性方程。

基本上，我想在每次用户增加**200**点时发出一个“奖励”，因为增量是 20，我可以肯定它肯定会命中序列，这消除了大于/小于子句的需要。

基本上，我该如何表达：

```
if x = 200n (if x is 200,400,600,800,1000,1200,1400...) alert("yay"); 
```

我真的不明白用`JavaScript`or怎么可能`jQuery`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T18:37:23.640

您应该使用`modulus operator (%)`：

```
if (x % 200 === 0){
    // do what you want here.
} 
```

**%（模数）**

> 模运算符的使用如下：
> var1 % var2
> 模运算符返回第一个操作数取第二个操作数的模数。

[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators)

[**现场演示**](http://jsfiddle.net/gdoron/yxM6J/)

* * *

如果`x`可以为零，并且您要排除此值：

```
if (x && x % 200 === 0){
    // do what you want here.
} 
```

# javascript - 为什么这段 Javascript 代码不能在 Firefox 和 Chrome 中执行？

> ID：10566396
> 
> 赞同：0
> 
> 时间：2012-05-12T18:35:36.703
> 
> 标签：javascript, asp.net

我有这组 Javascript 代码可以在 IE（任何版本）中正常工作，但不能在 Mozilla Firefox 或 Google Chrome 上工作。有人可以告诉我为什么吗？

```
function returnData(strCode,strProgramCode,strName)
    {           
        parent.opener.document.all.txtCourseCode[7].value = strCode;      
        parent.opener.document.all.txtProgram[7].value = strProgramCode;                                                
        parent.opener.document.getElementById("txtCourseName8").innerHTML = strName;                

        window.close()
} 
```

仅供参考，此 Javascript 嵌入到使用 .NET Framework 1.1 编写的 .aspx 页面中。

**编辑**不起作用意味着：尽管明确调用了它们，但没有执行任何行。

示例：`window.close()`不关闭窗口

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:38:33.710

`document.all`是一个仅限 IE 的属性，所以显然它在其他浏览器中不起作用。

`document.all`无论如何你都不应该使用。从表面上看，你实际上想要：

```
parent.opener.document.getElementsByName('txtCourseCode')[7].value = strCode;
parent.opener.document.getElementsByName('txtProgram')[7].value = strProgramCode; 
```

# varnish - Varnish：显示原始 500 错误页面

> ID：10566397
> 
> 赞同：0
> 
> 时间：2012-05-12T18:35:47.133
> 
> 标签：varnish

当后端抛出 500 错误页面时，我可以配置 Varnish 以显示来自后端的原始页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:58:54.723

这是默认设置。我有一些`if (beresp.status == 500)`：s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T15:05:04.467

我假设您只想在某些环境（例如开发）中显示原始的 500 错误。

如果是这样，那么您可以为 Varnish 分配一个身份：

```
$ varnishd -i development 
```

然后在您的 VCL 中检查该身份：

```
sub vcl_fetch {
  if (server.identity ~ "^development") {
    return (deliver);
  }

  if (beresp.status == 500) {
    # ...
  }
} 
```

# google-apps-script - 作为服务发布的脚本的问题

> ID：10566398
> 
> 赞同：-2
> 
> 时间：2012-05-12T18:35:50.950
> 
> 标签：google-apps-script

此问题已在[此处](https://stackoverflow.com/questions/10563356/scripts-published-as-public-services-are-down)报告并已关闭。我确实看到当前将脚本作为服务发布存在问题。以前发布的脚本工作正常，但无法将新脚本作为服务发布。

将服务 URL 放入浏览器时，显示以下错误

> Google 文档遇到服务器错误。如果重新加载页面没有帮助，请>联系我们。
> 
> 要讨论此问题或其他问题，请访问 Google 文档帮助论坛。要查看 >已知问题的列表，请查看 Google Docs 已知问题页面。
> 
> 对不起，感谢您的帮助！- Google 文档团队

Apps 脚本仪表板显示所有服务运行正常。一个这样的例子是[https://docs.google.com/macros/exec?service=AKfycbypKC46e9mIpPerpki3iNfWYJb0IPnKLXq16IOJag](https://docs.google.com/macros/exec?service=AKfycbypKC46e9mIpPerpki3iNfWYJb0IPnKLXq16IOJag)

我能够毫无问题地将其他脚本作为服务发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T04:27:18.693

问题似乎已经解决了。我不再看到同一个脚本的错误。代码本身并不好

```
function doGet(e){
  var app = UiApp.createApplication(); 
  app.add(app.createLabel('Hello World'));
  return app;
} 
```

当我遇到问题时，并不是我创建的每个脚本都出现了问题。其中一个脚本随机出现此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:19:02.527

问题仍未解决。我刚刚对客户域以及我们的域进行了快速测试。

当您将服务发布为公共（匿名访问）服务时，服务已关闭。从昨天开始就这样了……

* * *

更新：今天我已经解决了这个问题。似乎有些东西改变了响应的处理方式。由于无法将纯 html/json 发送回调用方，因此我们使用带有一些信息的“throw”子句传播回客户端。

从此更改代码后：

 `````
function doGet(e) {
    throw 'HTTP get not supported.';
} 
````  `对此：

 `````
function doGet(e) {
  var app = UiApp.createApplication(); 
  app.add(app.createLabel('HTTP get not supported.'));
  return app;
} 
````  `和 doPost 方法一样，发布的服务现在可以工作了。````

# vb.net - 自动激活属性？

> ID：10566399
> 
> 赞同：0
> 
> 时间：2012-05-12T18:36:01.987
> 
> 标签：vb.net

假设我声明一个这样的类：

```
Class tst
  Public Props As New Dictionary(Of String, MyProp)
End Class 
```

并添加了一些属性：

```
Dim t As New tst
t.Props.Add("Source", new MyProp(3)) 
```

但现在想像这样访问它：

```
t.Source 
```

如何在不知道吸气剂名称的情况下创建吸气剂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:52:58.297

好的，如果您坚持“自动激活”，我所知道的唯一方法是将代码生成为字符串，然后在运行时使用 System.CodeDom.Compiler 命名空间中的类对其进行编译。我只用它从头开始生成完整的类，所以我不知道你是否可以让它为已经存在的类添加属性的需要工作，但如果你编译扩展方法也许你可以运行。

.NET 框架包括 CodeDomeProvider 类的多个实现，每种语言一个。您很可能会对 Microsoft.VisualBasic.VBCodeProvider 类感兴趣。

首先，您需要创建一个 CompilerParameters 对象。您需要使用生成的代码需要引用的所有库的列表来填充其 ReferencedAssemblies 集合属性。将 GenerateExecutable 属性设置为 False。将 GenerateInMemory 设置为 True。

接下来，您需要使用要编译的源代码创建一个字符串。然后，调用 CompileAssemblyFromSource，将 CompilerParameters 对象和源代码字符串传递给它。

CompileAssemblyFromSource 方法将返回一个 CompilerResults 对象。Errors 集合包含编译错误列表（如果有），并且 CompiledAssembly 属性将是对已编译库的引用（作为 Assembly 对象）。要创建动态编译类的实例，请调用 CompiledAssembly.CreateInstance 方法。

如果您只是生成少量代码，那么编译它非常快。但如果代码很多，您可能会注意到对性能的影响。

下面是一个如何生成包含单个动态属性的动态类的简单示例：

```
Option Strict Off

Imports System.CodeDom.Compiler
Imports Microsoft.VisualBasic
Imports System.Text

Public Class Form3
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim code As StringBuilder = New StringBuilder()
        code.AppendLine("Namespace MyDynamicNamespace")
        code.AppendLine("   Public Class MyDynamicClass")
        code.AppendLine("       Public ReadOnly Property WelcomeMessage() As String")
        code.AppendLine("           Get")
        code.AppendLine("               Return ""Hello World""")
        code.AppendLine("           End Get")
        code.AppendLine("       End Property")
        code.AppendLine("   End Class")
        code.AppendLine("End Namespace")
        Dim myDynamicObject As Object = generateObject(code.ToString(), "MyDynamicNamespace.MyDynamicClass")
        MessageBox.Show(myDynamicObject.WelcomeMessage)
    End Sub

    Private Function generateObject(ByVal code As String, ByVal typeName As String) As Object
        Dim parameters As CompilerParameters = New CompilerParameters()
        parameters.ReferencedAssemblies.Add("System.dll")
        parameters.GenerateInMemory = True
        parameters.GenerateExecutable = False
        Dim provider As VBCodeProvider = New VBCodeProvider()
        Dim results As CompilerResults = provider.CompileAssemblyFromSource(parameters, code)
        If results.Errors.HasErrors Then
            Throw New Exception("Failed to compile dynamic class")
        End If
        Return results.CompiledAssembly.CreateInstance(typeName)
    End Function
End Class 
```

请注意，我从不使用`Option Strict Off`，但为了在此示例中简单起见，我将其关闭，以便我可以简单地调用`myDynamicObject.WelcomeMessage`而无需自己编写所有反射代码。

使用反射调用对象的方法可能是痛苦和危险的。因此，在生成的程序集和调用生成的程序集的固定程序集都引用的共享程序集中提供基类或接口会很有帮助。这样，您可以通过强类型接口使用动态生成的对象。

根据您的问题，我认为您只是更习惯于 JavaScript 等动态语言，因此您只是在使用错误的思维方式考虑解决方案，而不是您真的需要甚至应该这样做。但是，在某些情况下，知道如何在 .NET 中执行此操作肯定很有用。这绝对不是您想要定期做的事情，但是，如果您需要支持自定义脚本来执行复杂的验证或数据转换，这样的事情可能非常有用。

# java - 如何从eclipse自动部署maven项目到tomcat

> ID：10566406
> 
> 赞同：4
> 
> 时间：2012-05-12T18:36:49.437
> 
> 标签：java, eclipse, tomcat, web-applications, maven

见标题。我还希望在每次更改后重新部署该项目。我是这个领域的新手，所以我的知识不是很好。我尝试在这里搜索和搜索，但找不到任何答案。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:14:48.890

[您可以使用Cargo](http://cargo.codehaus.org/) Tomcat 插件轻松部署 webapp 。以下是有关此主题的有用文章：

[使用 Cargo 插件的 Maven Tomcat 部署。](http://www.java-tutorial.ch/maven/maven-tomcat-deployment-using-cargo)

[使用 Maven、Tomcat 和 Cargo 进行自动部署。](http://dpillay.wordpress.com/2009/04/12/maven-cargo-tomcat-auto-deployment/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T21:58:49.403

在 Eclipse 中有两个插件组合在一起可以很好地执行您想要的操作：

1.  [M2E](http://www.eclipse.org/m2e/)：M2Eclipse，处理与 Maven 相关的一切。
2.  [Eclipse Web Tool Platform (WTP)](http://www.eclipse.org/webtools/)：处理与 Java EE 相关的所有内容（Tomcat、JBoss 等...）

要使 M2E 与 WTP 正常工作，您需要添加 m2e-wtp。[您可以在这里](https://github.com/sonatype/m2eclipse-wtp/wiki)找到一些有用的信息以及一些很好的链接。

我将从 Eclipse Java EE 发行版（它已经包含 Eclipse-WTP）开始，然后添加 M2E（通过他们的更新站点或通过 Eclipse 市场：查找 M2E 和 M2E-WTP）。

从那里，您可以创建一个 Web 项目，并且可以在 Tomcat 服务器上运行它。第一次尝试在服务器上运行项目时，您将安装 Tomcat，它会出现在名为“Server”的视图中。双击服务器配置端口、自动部署等...

# c++ - 每个 QWizardPage 的 QWizard 和表单

> ID：10566413
> 
> 赞同：1
> 
> 时间：2012-05-12T18:38:15.770
> 
> 标签：c++, qt, qt-creator, qt-designer

我正在为我的大学项目编写 Qt 应用程序。作为我的主要小部件，我选择了 QWizard。我决定为向导中的每个 QWizardPage 创建一个表单（ui 文件）。我将页面添加到 QWizard，一切顺利。但是，我的 WizardPages 需要在它们之间传递变量，尽管我一直在尝试这样做，但我没有找到解决方案。有没有简单的方法来做到这一点？我想如果我没有使用 QtDesigner，它可能会更容易完成，但我真的更愿意避免重写 UI。

为了清楚起见，我得到的是：具有自己的 UI 表单的 QWizard 主小部件，页面在 QtDesigner 中提升为我自己的类。每个类都有自己的 UI 表单。为了设置我`ui->setup(this)`在 QWizard 的构造函数中调用的 UI。我正在努力解决的问题是在页面之间传递变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:28:03.667

因此，您可以使用[QWizard 的字段机制](http://qt-project.org/doc/qt-4.8/qwizard.html#registering-and-using-fields)。

# c++ - 在 VC++ 2008 中嵌入/加载 DLL 作为资源？

> ID：10566417
> 
> 赞同：0
> 
> 时间：2012-05-12T18:38:41.557
> 
> 标签：c++, visual-c++, embedded-resource

正如主题的描述/标题所说，这是一种可能性吗，因为我一直在谷歌和其他来源上搜索，没有任何运气，我来这里问这个问题......

是否有可能将 a`DLL`作为资源嵌入到我的最终可执行文件中，然后调用它/就好像它是当前目录和/或系统目录中的外部文件一样？

我已经尝试了很多没有运气的事情，一些所说的解决方案效果不佳，我似乎已经将它嵌入到`DLL`我的`.rc`文件中，但是我对尝试调用它的问题感到震惊，也许它需要保存到磁盘上的物理文件中，我不确定。

[编辑]

下面是目前我已经实现的代码，仍然没有任何成功；我仍然面临`The program can't start because soandso.dll is missing from your computer.`

下面的代码，-/

```
int WINAPI WinMain ( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd )
{
    HRSRC hRes = FindResource( hInstance, MAKEINTRESOURCE("#101"), "IDR_DLLRESOURCE_101" );
    HGLOBAL hData = LoadResource( hInstance, hRes );
    LPVOID lpFile = LockResource( hData );
    DWORD dwSize = SizeofResource( hInstance, hRes );

    HANDLE hFile = CreateFile("soandso.dll", GENERIC_READ | GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);
    HANDLE hFilemap = CreateFileMapping(hFile, 0, PAGE_READWRITE, 0, dwSize, 0);
    LPVOID lpBaseAddr = MapViewOfFile(hFilemap, FILE_MAP_WRITE, 0, 0, 0);

    CopyMemory(lpBaseAddr, lpFile, dwSize);
    UnmapViewOfFile(lpBaseAddr);
    CloseHandle(hFilemap);
    CloseHandle(hFile);
    return 0;
} 
```

预先感谢您提供的任何和所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:58:34.710

它与 Windows 处理 PE32 文件格式的可执行代码的方式根本不兼容。它*必须*存在于文件中，Windows 会创建一个内存映射文件以将其映射到内存中。尝试将其从资源加载到内存中需要您接管 Windows 加载程序的所有职责。这包括如果代码不能位于预期的基地址，则重新定位代码，查找并加载所有相关的 DLL 并调用它们的 DllMain() 方法。

特别是 DLL_THREAD_ATTACH 和 DETACH 通知几乎不可能自己实现，因为您无法控制创建的每个线程。很难做到正确，并且没有一个 winapi 可以帮助您做到这一点。这是不值得的。与将 DLL 的代码链接到您的 EXE 映像相比，肯定没有竞争力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:40:38.557

加载 DLL 的唯一受支持方式是从文件中加载。因此，当您需要加载此 DLL 时，提取资源，将其保存到文件中（例如在临时目录中），然后调用`LoadLibrary`并`GetProcAddress`链接到库。

# c# - 开发可排序多级列表的最佳结构是什么？

> ID：10566419
> 
> 赞同：0
> 
> 时间：2012-05-12T18:39:00.407
> 
> 标签：c#, sql, sql-server, common-table-expression, recursive-query

我需要开发一个良好的表结构来使用 SQL Server 数据库创建**可排序的多级列表。**

这是我开发可排序多级列表的方式的示例：

```
A
├──B
|  ├──E
|  ├──F
|  ├──O
|
├──C
|  ├──M
| 
```

我的表结构：

```
ID   Title   Parent   Sort
---------------------------
1    A       Null     0
2    B       A        0
3    E       B        0
4    F       B        1
5    O       B        2
6    C       A        1
7    M       C        0 
```

现在，您介意告诉我开发此类列表的**最佳方法吗？**非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:11:13.540

只需按照您概述的结构即可。SQL Server 支持通过 CTE 进行递归查询，类似这样的方法可以为您解决问题：

```
WITH tree AS (
  SELECT id, name, parent,
         0 AS level,
         CAST(sort AS varchar(90)) AS path,
         CAST(name AS varchar(90)) AS fullname
    FROM test WHERE parent IS NULL
  UNION ALL
  SELECT t.id, t.name, t.parent, tree.level + 1,
         CAST(tree.path + '.' + CAST(t.sort AS varchar) AS varchar(90)),
         CAST(tree.fullname + '.' + t.name AS varchar(90))
    FROM test t
    JOIN tree ON t.parent = tree.name
)
SELECT id, name, parent, level, path, fullname FROM tree
ORDER BY path; 
```

我在这里建立一些额外的信息字段：

*   `level`, 表示节点距根的深度；
*   `path`，它是根据您的`sort`字段构建的，用于对树进行正确排序；
*   `fullname`- 只是完整节点名称的一个很好的视图。

[您可以在此处](http://www.sqlfiddle.com/#!3/1e3e1/9)尝试此查询。

请考虑数据的大小——对于巨大的数据结构，您可能希望将谓词推送到内部查询中以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:49:00.450

设计一张包含所有必需详细信息的表，添加 ID 和 ParentID，在 ID 上右外连接 ParentID。完毕。

# linux - 信号快捷键和进程组

> ID：10566420
> 
> 赞同：1
> 
> 时间：2012-05-12T18:39:00.453
> 
> 标签：linux, process, fork

我有一个关于 Linux 系统中信号的简单问题。据我了解，每个过程都有它的`PID`和`PGID`。当我创建一个进程时，它会变得独一无二`PID`，现在如果我要创建一个具有`fork()`功能的新进程，我会得到具有不同`PID`但相同的子进程`PGID`。

现在，代码

```
#include<stdio.h>
#include<unistd.h>
int main()
{
  int i=3;
  int j;
  for(j=0;j<i;++j)
  {
      if (fork() == 0)
      {
          while(1)
          {

          }
      }
  }
  printf("created\n");
  while(1)
  {

  }
  return 0;
} 
```

当我编译这个程序并使用命令运行它时

```
./foo 
```

等一下，他创建了他的孩子，我做`CTRL-C`，然后`ps aux`我可以看到父母和孩子都走了，但如果我这样做

```
./foo 
```

等待分叉完成并在其他终端执行

```
kill -INT <pid_of_foo> 
```

`ps aux`我可以看到父母已经走了，但孩子们还活着，正在吃我的 CPU 。

我不确定，但似乎`CTRL-C`将信号发送到某个进程组中的每个进程，并且`KILL -SIGNAL pid`命令将信号发送到带有`PID=pid`not的进程`PGID=pid`。

我在正确的轨道上吗？如果是，为什么组合键会杀死进程`PGID`而不是`PID`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:21:06.487

### 信号传递、进程组和会话

是的，你在正确的轨道上。

自 BSD 发布以来的现代 Unix 变体实现了*会话*和*进程组*。

您可以将会话视为一组进程组。这个想法是，在 tty 或伪 tty 线上单次登录所产生的所有内容都是会话的一部分，与单个 shell 管道或其他逻辑进程分组相关的内容将被组织到单个进程组中。

这使得在前台和后台之间移动“工作”和传递信号更加方便。shell用户大多不需要担心单个进程，而是可以直观地控制-C一组相关命令。

键盘生成的信号在会话中被发送到前台进程组。您正在使用的 CLI`kill`命令将信号传递给各个进程。如果您想尝试复制 ^C 传递机制，您可以使用`kill 0`；这会将信号发送给同一进程组的每个成员，如果从脚本执行，它可能会执行您想要的操作。

* * *

^(*注意：*我编辑了您的问题以将 GPID 更改为 PGID。)

# drupal - drupal 7导入书集父/书ID

> ID：10566422
> 
> 赞同：0
> 
> 时间：2012-05-12T18:39:20.143
> 
> 标签：drupal, import, drupal-7

我需要将一本书（某种手册）从表达式引擎网站迁移到 drupal 7。我将使用核心书模块将书放入。由于这是一次性导入，我使用了一个简单的自定义导入脚本，基于这个：[http](http://www.group42.ca/creating_and_updating_nodes_programmatically_in_drupal_7) ://www.group42.ca/creating_and_updating_nodes_programmatically_in_drupal_7 。我希望能够设置每个书页的父 ID，但我找不到如何做到这一点。我已经尝试了一些直观的东西，比如

```
`$node->pid = $parentId;` 
```

和别的...

但是，我完全迷失了应该在 api.drupal.org 上查找此信息的地方。任何人都可以指出我正确的方向吗？

我不知道您是否还需要将此页面明确设置为这本书，或者设置父母是否就足够了......

谢谢，

乔里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:23:37.513

检查这个[http://api.drupal.org/api/drupal/modules%21book%21book.module/function/book_node_insert/7](http://api.drupal.org/api/drupal/modules%21book%21book.module/function/book_node_insert/7)

还有这个

[http://api.drupal.org/api/drupal/modules%21book%21book.module/function/book_node_update/7](http://api.drupal.org/api/drupal/modules%21book%21book.module/function/book_node_update/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-26T18:06:42.930

Sergey Litvinenko 指出代码的重要部分

```
<?php
define('DRUPAL_ROOT', dirname(__FILE__).'/../../../..');
chdir(DRUPAL_ROOT);

require_once "./includes/bootstrap.inc";
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

$node = entity_create(
    'node',
    array(
      'type' => 'book_name',
      'title' => 'test',
      'body' => array(
        'und' => array(
          array(
            'value' => 'body text here',
            'format' => 2, // Full html
          ),
        ),
      ),
      'field_name' => ...
    )
);
$node->uid = 2; // user id for author
node_save($node);

// book: 
$node->book['bid'] = 21; // nid of the Top-Level Element or 'new' to create new top Level Book
$node->book['plid'] = 2607; // mlid of the parent book-page from table 'book' in db
_book_update_outline($node); 
```

# php - mobwrite 问题 - 守护进程无法启动

> ID：10566425
> 
> 赞同：1
> 
> 时间：2012-05-12T18:39:29.460
> 
> 标签：php, python, linux, unix, daemon

我安装了[http://code.google.com/p/google-mobwrite/wiki/Daemon](http://code.google.com/p/google-mobwrite/wiki/Daemon) MobWrite，但是当我尝试运行它时，守护进程无法启动并返回以下内容：（有什么建议吗？）

```
 root@mobs:~/mobwrite/daemon# python2.4 mobwrite_daemon.py
    Traceback (most recent call last):
      File "mobwrite_daemon.py", line 728, in ?
        main()
      File "mobwrite_daemon.py", line 703, in main
        mobwrite_core.CFG.initConfig(ROOT_DIR + "lib/mobwrite_config.txt")
    AttributeError: 'module' object has no attribute 'CFG'
    root@mobs:~/mobwrite/daemon# nohup python2.4 mobwrite_daemon.py
    nohup: ignoring input and appending output to `nohup.out'
    root@mobs:~/mobwrite/daemon# ps waux |grep mobwrite
    root      1202  0.0  0.2   6156   668 pts/0    S+   18:35   0:00 grep --color=au                                to mobwrite 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:46:24.063

回到你解压的目录，对我来说它叫做 mobwrite_daemon。然后，您需要将目录 lib 及其所有内容复制到运行守护程序的目录中。那会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T13:59:31.350

在 2014 年 6 月 16 日的日期，当您下载 zip 文件时，您将拥有以下架构：

```
mobwrite_daemon
    daemon  => (data, lib)    // "A" lib folder
    demos
    html
    tests
    lib                    // "B" lib folder
    ... 
```

要运行守护程序并避免 `AttributeError: 'module' object has no attribute 'CFG'`错误，您需要将“A”lib 文件夹替换为“B”lib 文件夹。

# iphone - 如何用 iPhone 计算我的速度？

> ID：10566426
> 
> 赞同：4
> 
> 时间：2012-05-12T18:39:47.843
> 
> 标签：iphone, ios

> **可能重复：**
> [如何使用 iphone 计算我们汽车的速度](https://stackoverflow.com/questions/3818902/how-to-calculate-speed-of-our-car-using-iphone)

如何用 iPhone 计算我的速度？例如，我可能想在驾驶时测量汽车的速度。我该如何实施？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T20:11:52.337

尝试这样的事情：

```
- (id) init
{
    self = [super init];
    if (self != nil) {
        self.manager = [[CLLocationManager alloc] init];
        self.manager.delegate = self;
        [self.manager startUpdatingLocation];
    }
    return self;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"Speed = %f", newLocation.speed);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:25:28.813

1>您可以使用 GPS 使用定位服务获取特定时间点的经纬度，并且在一定时间段后您可以得到相同的时间说 t。您可以从经纬度和划分中获取经过的距离它被用来获得速度

[请参阅 Apple GPS 文档](https://developer.apple.com/library/ios/#codinghowtos/DataManagement/_index.html)

2>如果您从停止开始，您可以使用加速度计，您应该能够根据设备随时间的加速度计算您行进的距离。

[请参阅 Apple Accelerometer 文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAcceleration_Class/Reference/UIAcceleration.html)

# ios - 在 iOS 应用中弹出广告？

> ID：10566431
> 
> 赞同：0
> 
> 时间：2012-05-12T18:40:44.030
> 
> 标签：ios, ads

我一直在玩 Djinnworks、Like Line surfer 等的游戏。他们如何弹出新应用程序？我在互联网上搜索过，找不到任何东西。

有没有办法做到这一点并在线更新广告？就像那里的新游戏机翼套装火柴人一样，它的广告每周都会更改而没有更新。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:07:53.267

将广告作为图片放在您的服务器上并从那里加载到应用程序中，然后您可以更改服务器上的图片（因此也可以更改应用程序中的广告），而无需更新应用程序。

您还可以执行以下操作：仅每两周检查一次新广告，以节省带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T18:30:20.413

[通过http://chartboost.com 之](http://chartboost.com)类的服务使用交叉促销。

这允许您仅显示您自己的应用程序并控制它们何时显示。这使您可以在推广其他应用程序的同时提供最佳的用户体验。

# java - JAVA - 如何在 selenium 中使用 xpath

> ID：10566437
> 
> 赞同：6
> 
> 时间：2012-05-12T18:41:47.363
> 
> 标签：java, select, xpath, selenium

我有这个 html 代码：

```
<select name="category" id="category">
    <option value="0">&laquo;Seleziona la categoria&raquo;</option>
    <option value='1' style='background-color:#ddd' disabled="disabled" id='cat1' >-- VEICOLI --</option>
    <option value='2'  id='cat2' >Auto</option>
</select> 
```

我必须选择由`option`带有 text的标签标识的 WebElement `Auto`。我尝试了一些解决方案，例如：

```
d.findElement(By.xpath("/select[@id=category]/option[@id=cat2]")).click();
d.findElement(By.xpath("/select[@id=category]/option[text()='Auto']")).click();
d.findElement(By.xpath("//select[@id=category]/option[Auto]")).click(); 
```

但每个人都给我：

```
Exception in thread "main" org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"xpath","selector":"/select[@id=category]/option[@id=cat2]"} ( and other xpath i tried)
Command duration or timeout: 1.52 seconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html 
```

什么是正确的语法？有人能帮我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-12T20:08:01.593

您的 XPath 语法不正确。您需要在要匹配的文本属性值周围加上引号。尝试：

```
d.findElement(By.xpath("//select[@id='category']/option[@id='cat2']")).click(); 
```

# android - 处理 java Socket 服务器中的所有客户端

> ID：10566438
> 
> 赞同：0
> 
> 时间：2012-05-12T18:41:54.753
> 
> 标签：android, sockets

我有一台服务器，我正在尝试向所有客户端发送一个特定的输入（字符串）。我的代码在这里：

```
serverSocket = new ServerSocket(SERVERPORT);
            while (true) 
                {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    mClients.add(client);                        
                    boolean finished = false;
                    try                             
                        {
                        for (int i=0; i<mClients.size(); i++) 
                        {
                            Socket well = mClients.get(i);
                            DataInputStream in = new DataInputStream(well.getInputStream());
                            PrintStream out = new PrintStream(well.getOutputStream());                                
                            // Print a message:
                            System.out.println("Client from : " + client.getInetAddress() + " port " + client.getPort());
                            // now get the input from the socket...                  

                                while(!finished) 
                                {
                                    String st = in.readLine();
                                    // Send the same back to client
                                    out.println(st);
                                    // Write it to the screen as well
                                    System.out.println(st);
                                    // If the input was "quit" then exit...
                                    if (st.equals("quit")) { finished = true; System.out.println("Thread exiting..."); }
                                }
                        } 
```

看来我做错了什么。无论如何，我正在尝试将所有连接的套接字存储到一个向量中，然后将其中一个接收到的字符串发送给它们。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:42:09.680

在第一个 while(true) 语句中，仅侦听传入连接，然后创建一个单独的线程来处理该客户端连接。

从那里，您可以将在每个线程中创建的每个 outPutStream 添加到全局 ArrayList 中。遍历arrayList（使用字符串参数为此创建一个方法）并在所述方法中写入您想要的任何消息。

查看[有关套接字通信的 Oracle 教程以](http://www.oracle.com/technetwork/java/socket-140484.html)获取帮助

# perl - 在 Perl 中解析位字符串

> ID：10566443
> 
> 赞同：0
> 
> 时间：2012-05-12T18:43:00.797
> 
> 标签：perl, binary

在使用 unpack 时，我曾希望 b3 会返回一个位串，长度为 3 位。

我希望编写的代码（用于解析 websocket 数据包）是：

```
my($FIN,$RSV1, $RSV2, $RSV3, $opcode, $MASK, $payload_length) = unpack('b1b1b1b1b4b1b7',substr($read_buffer,0,2)); 
```

我注意到这并没有达到我的预期。

如果我使用 b16 而不是上面的模板，我会将整个 2 个字节作为“1000000101100001”加载到第一个变量中。

那太好了，我对此没有任何问题。

我可以通过做一堆子字符串来使用我到目前为止所拥有的东西，但是有没有更好的方法呢？我希望有一种方法可以使用类似于我尝试制作的模板来处理该位字符串。某种功能，我可以在右侧传递数据包的规范，在左侧传递变量列表？

编辑：我不想用正则表达式来做这件事，因为它会处于一个非常紧密的循环中，会经常发生。

Edit2：理想情况下，能够指定位串应该被评估为什么（布尔值、整数等）会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:35:06.693

如果我理解正确，您的目标是将 2 字节输入拆分为 7 个新变量。为此，您可以使用按位运算。这是如何获得`$opcode`价值的示例：

```
my $b4 = $read_buffer & 0x0f00;  # your mask to filter 9-12 bits
$opcode = $b4 >> 8;              # rshift your bits 
```

您可以对所有变量执行相同的操作（如果需要，可以在单个语句中），并且它应该以合理的良好速度执行。

# android - 翻译 Objective-C 代码以识别指向 Java for Android 的链接

> ID：10566449
> 
> 赞同：-3
> 
> 时间：2012-05-12T18:43:50.123
> 
> 标签：android, objective-c

我正在开发一个 android 应用程序，我想识别 EditText 内的链接。我有下一个在objective-c中工作的代码，我想用java来做。我想这将与向量（字符串链接 []）有关，但我不知道。

```
NSError *qwerror = nil;
NSRegularExpression *qwregex = [NSRegularExpression regularExpressionWithPattern:@"(http://\\w+.\\w+.\\w+.\\w+.\\w+.)" options:0 error:&qwerror];
NSArray *qwmatches = [qwregex matchesInString:textView.text options:0 range:NSMakeRange(0, textView.text.length)];
NSMutableArray *qwwords = [NSMutableArray array];
for (NSTextCheckingResult *qwmatch in qwmatches) {
    NSRange qwwordrange = [qwmatch rangeAtIndex:1];
    NSString *qwword = [textView.text substringWithRange:qwwordrange];
    [qwwords addObject:qwword];
}
NSString *allLinks = [qwwords componentsJoinedByString:@" "]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:03:55.343

这可能有效：

```
import java.net.URL;
import java.util.List;

String input = /* text from edit text */;

String[] words = input.split("\\s");
List<URL> urls;

for (String s : words)
{
    try 
    {
        urls.add(new URL(s));
    }
    catch (MalformedURLException e)
    {
        // not a url
    }
}

// urls contains all urls from 'input'. 
```

# css - 防止 Twitter 引导为空 填充下一个 价值

> ID：10566451
> 
> 赞同：30
> 
> 时间：2012-05-12T18:45:25.393
> 
> 标签：css, twitter-bootstrap

你好 CSS 大师，

我喜欢 twitter 引导程序，并且我正在基于它设计很多项目的原型，我遇到了这个问题，如果 dd 标签里面没有 HTML，另一个 dd 会代替它，我理解为什么会这样，因为dl 的样式方式它允许 dd 如果内容需要扩展到多行，我不想破坏这个可爱的样式，我只想修改它，所以如果 dd 值为空，它会'不会崩溃，所以在我在这里做任何疯狂的事情之前，比如服务器端隐藏空值，或者修改原始行为甚至添加 jQuery，我想知道是否有人可以提供帮助，这是一张图片来进一步说明我在说什么，它是 RTL，所以 dt 在右边。

![](../Images/49ed9043773680f4e8b8037fe02a1965.png)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-10T14:38:00.737

我使用了这种样式覆盖。

```
.dl-horizontal > dd:after {
  display: table;
  content: "";
  clear: both;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-29T04:43:58.227

根据[开发人员](https://github.com/twbs/bootstrap/pull/3821#issuecomment-6561752)的说法，`<dd>`永远不应该为空（我不同意）。

而且我认为他更喜欢用户将`clearfix`类添加到`<dd>`可能为空的 s 中。

`<dd class="clearfix"></dd>`

**更新**

此修复程序包含在 3.2 之后，请参阅[发行说明](https://github.com/twbs/bootstrap/issues/12736)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T10:48:30.880

例子：

```
<dd><%= @route.id %>&nbsp;</dd> 
```

[http://www.sitepoint.com/forums/showthread.php?442551-When-dd-%28in-a-definition-list%29-is-empty-below-content-is-pulled-upwards](http://www.sitepoint.com/forums/showthread.php?442551-When-dd-%28in-a-definition-list%29-is-empty-below-content-is-pulled-upwards)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-29T07:21:41.913

如果我正确解释[了这个提交](https://github.com/twitter/bootstrap/commit/37f4a25be436e8b25004d22541809032d8354600)，这将是 3.0.0 中的默认行为。在此之前，您还可以尝试添加`dl-horizontal`以替代 simple `clearfix`。

```
<dd class="dl-horizontal"></dd> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-08T05:11:26.667

也许你可以试试：

```
dd {
    display: inline-block;
} 
```

# spring - 如何使用spring事务管理器为非只读方法刷新休眠会话？

> ID：10566452
> 
> 赞同：2
> 
> 时间：2012-05-12T18:45:26.443
> 
> 标签：spring, hibernate

我已经阅读了几个主题，但仍然不明白。我有一个在 DAO 层上使用休眠的 spring mvc 应用程序。sessionFactory 和事务管理器以标准方式配置，服务层使用`@Transaction` 我也使用`OpenSessionInViewFilter`。我知道此过滤器将会话刷新模式设置为 NEVER，但随后 tx 管理器将每个 tx 设置为 AUTO 并在提交 tx 后将其返回。我也得到会话作为`sessionFactory.getCurrentSession()`。

我的问题是非只读方法。方法完成后，对象不会出现在数据库中。只有在我明确调用 session.flush() 之后，会话状态才与数据库同步。对我来说，这不是一种正常的方式。我认为应该有一个用于 tx manager 的属性，或者 sessionFactory 或另一个为非只读方法自动提交的 bean。

那么，为什么 FlushMode.AUTO 可能不起作用？在每个非只读方法中手动调用 session.flush() 是否正常？

```
<bean name="sessionFactory"
      class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
      p:dataSource-ref="aimsDataSource">
    <property name="packagesToScan">
        <list>
            <value>net.adaptiveservices.aims.rc.model</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop> <!--TODO Remove in production-->
        </props>
    </property>
</bean>

<bean name="transactionManager"
      class="org.springframework.orm.hibernate3.HibernateTransactionManager"
      p:sessionFactory-ref="sessionFactory"/> 
```

# version-control - 将现有的远程仓库拉入 Hg 中的空仓库

> ID：10566461
> 
> 赞同：1
> 
> 时间：2012-05-12T18:46:50.177
> 
> 标签：version-control, mercurial

```
mkdir test_remote
cd test_remote
hg init
hg pull existing_remote_repo (bitbucket, ssh, etc) 
```

这是一件坏事吗？当我开始从 test_remote 推送更改时有任何潜在危险吗？会有头部差异，生成不同的变更集，不管它是什么？

这样做，是不是等价的`hg clone`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:54:50.613

是的，它相当于`hg clone`. 不，不会有任何问题。

# javascript - 对象Javascript循环的动态属性名称

> ID：10566465
> 
> 赞同：4
> 
> 时间：2012-05-12T18:47:46.623
> 
> 标签：javascript

在 Javascript 中是否有一种巧妙的方法来遍历数组中对象的属性名称？

我有几个属性的对象，包括 guest1 到 guest100。除了下面的循环之外，我还想要另一个循环遍历 guestx 属性而无需长时间写出来的循环。如果我必须将下面的代码写到 results[i].guest100 中，这将是一个很长的列表，那将是一些难看的代码。

```
for (var i = 0; i < results.length; i++) {
if (results[i].guest1 != "") {
    Do something;
}
if (results[i].guest2 != "") {
    Do something;
}
if (results[i].guest3 != "") {
    Do something;
}
etcetera...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T18:52:15.603

试试这个：

```
for (var i = 0; i < results.length; i++) {
    for (var j=0; j <= 100; j++){
        if (results[i]["guest" + j] != "") {
            Do something;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T18:50:43.977

`[]`通过在对象属性语法中构造字符串名称来访问属性：

```
// inside your results[i] loop....
for (var x=1; x<=100; x++) {
  // verify with .hasOwnProperty() that the guestn property exists
  if (results[i].hasOwnProperty("guest" + x) {
     // JS object properties can be accessed as arbitrary strings with []
     // Do something with results[i]["guest" + x]
     console.log(results[i]["guest" + x]);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T18:51:17.797

我认为您会发现“in”运算符很有用：

```
if (("guest" + i) in results[i]) { /*code*/ } 
```

干杯

# r - 'names' 属性必须与向量的长度相同

> ID：10566473
> 
> 赞同：27
> 
> 时间：2012-05-12T18:49:37.180
> 
> 标签：r

卡在 R 中的一个错误。

```
 Error in names(x) <- value : 
      'names' attribute must be the same length as the vector 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-13T00:08:53.310

本着@Chris W 的精神，试着复制你得到的确切错误。一个例子会有所帮助，但也许你正在做：

```
 x <- c(1,2)
  y <- c("a","b","c")
  names(x) <- y

Error in names(x) <- y : 
  'names' attribute [3] must be the same length as the vector [2] 
```

我怀疑您正在尝试为`x`比您的名称向量 ( ) 短的向量 ( `y`) 命名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T19:19:05.870

根据您在循环中所做的事情，`%in%`运算符返回向量的事实可能是一个问题；考虑一个简单的例子：

```
c1 <- c("one","two","three","more","more")
c2 <- c("seven","five","three")

if(c1%in%c2) {
    print("hello")
} 
```

然后发出以下警告：

```
Warning message:
In if (c1 %in% c2) { :
  the condition has length > 1 and only the first element will be used 
```

如果您的 if 语句中的某些内容取决于特定数量的元素，并且它们不匹配，那么就有可能获得您看到的错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-25T22:30:17.183

我想用下面的例子来解释这个错误：

```
> names(lenses)
[1] "X1..1..1..1..1..3" 
```

> names(lenses)=c("ID","Age","Sight","Astigmatism","Tear","Class") 名称错误（lenses）=c("ID", "Age", "Sight ", "Astigmatism", "Tear", : 'names' 属性 [6] 必须与向量 [1] 的长度相同

由于许多属性不匹配而发生错误。我只有一个，但试图添加 6 个名字。在这种情况下，会发生错误。请参阅下面正确的一个:::::>>>>

```
> names(lenses)=c("ID")
> names(lenses) 
```

> [1] “身份证”

现在没有错误了。

我希望这个能帮上忙！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-25T01:12:22.267

我已经看到了这样的错误，我解决了它。您的数据集中可能存在缺失值。每列中的观察数也必须相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-01T23:34:32.240

我有这个，由于缩放的数字变量没有作为数字返回，而是作为矩阵返回。将任何转换后的变量恢复为 as.numeric() ，它应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-31T16:01:46.443

我犯的导致此错误的错误是尝试在循环中重命名我不再在 SQL 中选择的列。*这也可能是由于尝试在您计划*选择的列中执行相同的操作而引起的。确保您尝试更改的列确实存在。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-02T07:14:44.000

对我来说，这个错误是因为我的一些数据标题是两个名称，我将它们合并为一个名称，一切顺利。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-21T14:36:47.427

我出于愚蠢的原因遇到了同样的错误，我认为是这样的：

在 R Studio 中工作时，如果您尝试将新对象分配给现有名称，并且当前使用 View() 打开了具有现有名称的对象，则会引发此错误。

关闭对象“查看”面板，然后它就可以工作了。

# matlab - 这段代码如何在 matlab 中用于人工智能

> ID：10566479
> 
> 赞同：0
> 
> 时间：2012-05-12T18:50:35.163
> 
> 标签：matlab

我从昨晚开始就在尝试这段代码，但我不明白这段代码在做什么。实际上我是matlab编程的初学者

```
 load('79.mat')
 trainingData=d79;
 colormap(gray);
 colormap(grey);
 x=reshape(d79(1234,:),28,28);
 y = x(:,28:-1:1); 
 pcolor(y'); 
```

请帮助我理解这段代码。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:55:38.413

这很简单。以下是逐行解释：

1.  从数据文件加载数据
2.  将加载的数据放入名为 trainingData 的变量中
3.  设置用于绘图的颜色图
4.  取加载矩阵的第 1234 行，将其转换为 28×28 矩阵，并将其存储在变量`x`. 因此，例如，在较小的范围内，[5 6 7 8] 被转换为矩阵 [5 7; 6 8] 如果您想将该矩阵重塑为 2×2。
5.  颠倒 的列顺序`x`并将其放入`y`. 所以最后一列变成第一列，倒数第二列变成第二列，以此类推。
6.  这是 中包含的值的棋盘图`y`。

编辑以包含第 5 行和第 6 行的更多详细信息：

重塑线假设有一行编号为 1234，并且该行中有 784 (28*28) 个元素。它取出该行，并从中制作一个 28x28 矩阵，方法是取出前 28 个元素，将它们放入新矩阵的第一列，然后取出接下来的 28 个元素，使其成为第二列，依此类推，再增加 26 个次。最后的矩阵是 names `x`。

对于这一`y`行，就像我说的那样，它只是反转 的列`x`，将最后一列放在第一位，将倒数第二列放在第二位，依此类推，直到 的第一列`x`作为 的最后一列`y`。

# java - CellList 空小部件和 AsyncDataProvider 出现问题

> ID：10566483
> 
> 赞同：1
> 
> 时间：2012-05-12T18:50:44.727
> 
> 标签：java, gwt, celllist

我有一个要填充的 CellList `AsyncDataProvider`：

```
 @UiField(provided = true)
  CellList<PlayerDataEntity> friendCellList;

  @Inject
  FriendListViewImpl(FriendListController controller) {
    friendCellList = new CellList<PlayerDataEntity>(new PlayerCell());

    initWidget(uiBinder.createAndBindUi(this));

    // if we don't set the row data to empty before trying to get the real data,
    // the empty list widget will never appear. But if we do set this, 
    // then the real data won't show up. 
    friendCellList.setRowData(Lists.<PlayerDataEntity>newArrayList());

      new AsyncDataProvider<PlayerDataEntity>() {
        @Override
        protected void onRangeChanged(final HasData<PlayerDataEntity> display) {
          rpcService.getPlayers(new AsyncCallback<List<PlayerDataEntity>>() {
              @Override
              public void onSuccess(List<PlayerDataEntity> result) {
                 display.setRowData(0, result);
              }
            });
      }
    }.addDataDisplay(friendCellList);

    friendCellList.setEmptyListWidget(new Label("No friends found"));
  } 
```

如果我最初没有将行数据设置为空列表，那么如果 RPC 服务返回空列表，则空列表小部件将不会显示。但是，如果我最初将行数据设置为一个空列表，并且 RPC 返回一个非空列表，那么该数据将不会显示在小部件中。

`CellList`我一定是误解了API 的某些方面。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:18:27.953

如果您知道总列表（不仅仅是范围内的列表）为空，那么您可以设置`display.setRowCount(0)`，因此 CellList 将显示“未找到朋友”。

如果您的服务总是返回整个列表，这可以很容易地完成，例如

```
public void onSuccess(List<PlayerDataEntity> result) {
  display.setRowCount(result.size());
  display.setRowData(0, result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:23:22.603

将以下行添加到方法中：

```
@Override
public void onSuccess(List<PlayerDataEntity> result) {
   display.setRowData(0, result);
   ((CellList<PlayerDataEntity>) display).redraw();
} 
```

# android - android：如何持久存储 Spanned？

> ID：10566486
> 
> 赞同：12
> 
> 时间：2012-05-12T18:50:54.550
> 
> 标签：android, serialization, parcelable, spanned

我想永久保存一个 Spanned 对象。（我现在一直保存它基于的字符串，但是在它上面运行 Html.fromHtml() 需要超过 1 秒，显着减慢了 UI。）

我看到 ParcelableSpan 和 SpannedString 和 SpannableString 之类的东西，但我不确定该使用哪个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T19:11:55.470

现在，`Html.toHtml()`是您唯一的内置选项。`Parcelable`用于进程间通信，并非设计为持久的。如果`toHtml()`不涵盖您正在使用的所有特定类型的跨度，您将不得不制定自己的序列化机制。

由于保存对象涉及磁盘 I/O，因此无论如何都应该在后台线程中执行此操作，而不管`toHtml()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-14T12:14:51.073

我有类似的问题；我使用 SpannableStringBuilder 来保存一个字符串和一堆跨度，我希望能够保存和恢复这个对象。我编写了这段代码以使用 SharedPreferences 手动完成此操作：

```
 // Save Log
    SpannableStringBuilder logText = log.getText();
    editor.putString(SAVE_LOG, logText.toString());
    ForegroundColorSpan[] spans = logText
            .getSpans(0, logText.length(), ForegroundColorSpan.class);
    editor.putInt(SAVE_LOG_SPANS, spans.length);
    for (int i = 0; i < spans.length; i++){
        int col = spans[i].getForegroundColor();
        int start = logText.getSpanStart(spans[i]);
        int end = logText.getSpanEnd(spans[i]);
        editor.putInt(SAVE_LOG_SPAN_COLOUR + i, col);
        editor.putInt(SAVE_LOG_SPAN_START + i, start);
        editor.putInt(SAVE_LOG_SPAN_END + i, end);
    }

    // Load Log
    String logText = save.getString(SAVE_LOG, "");
    log.setText(logText);
    int numSpans = save.getInt(SAVE_LOG_SPANS, 0);
    for (int i = 0; i < numSpans; i++){
        int col = save.getInt(SAVE_LOG_SPAN_COLOUR + i, 0);
        int start = save.getInt(SAVE_LOG_SPAN_START + i, 0);
        int end = save.getInt(SAVE_LOG_SPAN_END + i, 0);
        log.getText().setSpan(new ForegroundColorSpan(col), start, end, 
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    } 
```

在我的情况下，我知道所有跨度都是 ForegroundColorSpan 类型并带有 SPAN_EXCLUSIVE_EXCLUSIVE 标志，但是可以轻松调整此代码以适应其他类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-17T09:19:27.797

我的用例是将 Spanned 放入 Bundle 中，而 Google 将我带到了这里。@CommonsWare 是正确的，Parcelable 不适合持久存储，但可以存储到 Bundle 中。大多数跨度似乎扩展了 ParcelableSpan，因此这在 onSaveInstanceState 中对我有用：

```
ParcelableSpan spanObjects[] = mStringBuilder.getSpans(0, mStringBuilder.length(), ParcelableSpan.class);
int spanStart[] = new int[spanObjects.length];
int spanEnd[] = new int[spanObjects.length];
int spanFlags[] = new int[spanObjects.length];
for(int i = 0; i < spanObjects.length; ++i)
{
    spanStart[i] = mStringBuilder.getSpanStart(spanObjects[i]);
    spanEnd[i] = mStringBuilder.getSpanEnd(spanObjects[i]);
    spanFlags[i] = mStringBuilder.getSpanFlags(spanObjects[i]);
}

outState.putString("mStringBuilder:string", mStringBuilder.toString());
outState.putParcelableArray("mStringBuilder:spanObjects", spanObjects);
outState.putIntArray("mStringBuilder:spanStart", spanStart);
outState.putIntArray("mStringBuilder:spanEnd", spanEnd);
outState.putIntArray("mStringBuilder:spanFlags", spanFlags); 
```

然后可以通过以下方式恢复状态：

```
mStringBuilder = new SpannableStringBuilder(savedInstanceState.getString("mStringBuilder:string"));
ParcelableSpan spanObjects[] = (ParcelableSpan[])savedInstanceState.getParcelableArray("mStringBuilder:spanObjects");
int spanStart[] = savedInstanceState.getIntArray("mStringBuilder:spanStart");
int spanEnd[] = savedInstanceState.getIntArray("mStringBuilder:spanEnd");
int spanFlags[] = savedInstanceState.getIntArray("mStringBuilder:spanFlags");
for(int i = 0; i < spanObjects.length; ++i)
    mStringBuilder.setSpan(spanObjects[i], spanStart[i], spanEnd[i], spanFlags[i]); 
```

我在这里使用了 SpannableStringBuilder，但据我所知，它应该与任何实现 Spanned 的类一起使用。可能可以将此代码包装到 ParcelableSpanned 中，但目前这个版本似乎还不错。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-09T16:33:12.103

从丹的想法：

```
public static String spannableString2JsonString(SpannableString ss) throws JSONException {
    JSONObject json = new JSONObject();
    json.put("text",ss.toString());
    JSONArray ja = new JSONArray();

    ForegroundColorSpan[] spans = ss.getSpans(0, ss.length(), ForegroundColorSpan.class);
    for (int i = 0; i < spans.length; i++){
        int col = spans[i].getForegroundColor();
        int start = ss.getSpanStart(spans[i]);
        int end = ss.getSpanEnd(spans[i]);
        JSONObject ij = new JSONObject();
        ij.put("color",col);
        ij.put("start",start);
        ij.put("end",end);
        ja.put(ij);
    }
    json.put("spans",ja);
    return json.toString();
}
public static SpannableString jsonString2SpannableString(String strjson) throws JSONException{
    JSONObject json = new JSONObject(strjson);
    SpannableString ss = new SpannableString(json.getString("text"));
    JSONArray ja = json.getJSONArray("spans");
    for (int i=0;i<ja.length();i++){
        JSONObject jo = ja.getJSONObject(i);
        int col = jo.getInt("color");
        int start = jo.getInt("start");
        int end = jo.getInt("end");
        ss.setSpan(new ForegroundColorSpan(col),start,end,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    }
    return ss;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-02T01:05:36.060

我想出的一个解决方案是使用带有自定义序列化器/解串器的 GSON。该解决方案结合了其他答案中提到的一些想法。

定义一些 JSON 键

```
/* JSON Property Keys */
private static final String PREFIX = "SpannableStringBuilder:";
private static final String PROP_INPUT_STRING = PREFIX + "string";
private static final String PROP_SPAN_OBJECTS= PREFIX + "spanObjects";
private static final String PROP_SPAN_START= PREFIX + "spanStart";
private static final String PROP_SPAN_END = PREFIX + "spanEnd";
private static final String PROP_SPAN_FLAGS = PREFIX + "spanFlags"; 
```

Gson 串行器

```
public static class SpannableSerializer implements JsonSerializer<SpannableStringBuilder> {
    @Override
    public JsonElement serialize(SpannableStringBuilder spannableStringBuilder, Type type, JsonSerializationContext context) {
        ParcelableSpan[] spanObjects = spannableStringBuilder.getSpans(0, spannableStringBuilder.length(), ParcelableSpan.class);

        int[] spanStart = new int[spanObjects.length];
        int[] spanEnd= new int[spanObjects.length];
        int[] spanFlags = new int[spanObjects.length];
        for(int i = 0; i < spanObjects.length; ++i) {
            spanStart[i] = spannableStringBuilder.getSpanStart(spanObjects[i]);
            spanEnd[i] = spannableStringBuilder.getSpanEnd(spanObjects[i]);
            spanFlags[i] = spannableStringBuilder.getSpanFlags(spanObjects[i]);
        }
        JsonObject jsonSpannable = new JsonObject();
        jsonSpannable.addProperty(PROP_INPUT_STRING, spannableStringBuilder.toString());
        jsonSpannable.addProperty(PROP_SPAN_OBJECTS, gson.toJson(spanObjects));
        jsonSpannable.addProperty(PROP_SPAN_START, gson.toJson(spanStart));
        jsonSpannable.addProperty(PROP_SPAN_END, gson.toJson(spanEnd));
        jsonSpannable.addProperty(PROP_SPAN_FLAGS, gson.toJson(spanFlags));
        return jsonSpannable;
    }
} 
```

Gson 解串器

```
public static class SpannableDeserializer implements JsonDeserializer<SpannableStringBuilder> {
    @Override
    public SpannableStringBuilder deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext jsonDeserializationContext) throws JsonParseException {
        JsonObject jsonSpannable = jsonElement.getAsJsonObject();
        try {
            String spannableString = jsonSpannable.get(PROP_INPUT_STRING).getAsString();
            SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(spannableString);
            String spanObjectJson = jsonSpannable.get(PROP_SPAN_OBJECTS).getAsString();
            ParcelableSpan[] spanObjects = gson.fromJson(spanObjectJson, ParcelableSpan[].class);
            String spanStartJson = jsonSpannable.get(PROP_SPAN_START).getAsString();
            int[] spanStart = gson.fromJson(spanStartJson, int[].class);
            String spanEndJson = jsonSpannable.get(PROP_SPAN_END).getAsString();
            int[] spanEnd = gson.fromJson(spanEndJson, int[].class);
            String spanFlagsJson = jsonSpannable.get(PROP_SPAN_FLAGS).getAsString();
            int[] spanFlags = gson.fromJson(spanFlagsJson, int[].class);
            for (int i = 0; i <spanObjects.length; ++i) {
                spannableStringBuilder.setSpan(spanObjects[i], spanStart[i], spanEnd[i], spanFlags[i]);
            }
            return spannableStringBuilder;
        } catch (Exception ex) {
            Log.e(TAG, Log.getStackTraceString(ex));
        }
        return null;
    }
} 
```

因为`ParcelableSpan`您可能需要像这样将类型注册到 GSON：

```
RuntimeTypeAdapterFactory
  .of(ParcelableSpan.class)
  .registerSubtype(ForegroundColorSpan.class);
  .registerSubtype(StyleSpan.class); //etc. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-19T03:26:30.563

我的用例是将 TextView 的内容（包括颜色和样式）转换为十六进制字符串/从十六进制字符串转换。根据 Dan 的回答，我想出了以下代码。希望如果有人有类似的用例，它会为您省去一些麻烦。

将 textBox 的内容存储到字符串：

```
String actualText = textBox.getText().toString();
SpannableString spanStr = new SpannableString(textBox.getText());

ForegroundColorSpan[] fSpans = spanStr.getSpans(0,spanStr.length(),ForegroundColorSpan.class);
StyleSpan[] sSpans = spanStr.getSpans(0,spanStr.length(),StyleSpan.class);

int nSpans = fSpans.length;
String spanInfo = "";
String headerInfo = String.format("%08X",nSpans);
for (int i = 0; i < nSpans; i++) {
    spanInfo += String.format("%08X",fSpans[i].getForegroundColor());
    spanInfo += String.format("%08X",spanStr.getSpanStart(fSpans[i]));
    spanInfo += String.format("%08X",spanStr.getSpanEnd(fSpans[i]));
}

nSpans = sSpans.length;
headerInfo += String.format("%08X",nSpans);
for (int i = 0; i < nSpans; i++) {
    spanInfo += String.format("%08X",sSpans[i].getStyle());
    spanInfo += String.format("%08X",spanStr.getSpanStart(sSpans[i]));
    spanInfo += String.format("%08X",spanStr.getSpanEnd(sSpans[i]));
}

headerInfo += spanInfo;
headerInfo += actualText;
return headerInfo; 
```

从字符串中检索 textBox 的内容：

```
 String header = tvString.substring(0,8);
        int fSpans = Integer.parseInt(header,16);
        header = tvString.substring(8,16);
        int sSpans = Integer.parseInt(header,16);
        int nSpans = fSpans + sSpans;
        SpannableString tvText = new SpannableString(tvString.substring(nSpans*24+16));
        tvString = tvString.substring(16,nSpans*24+16);

        int cc, ss, ee;
        int begin;
        for (int i = 0; i < fSpans; i++) {
            begin = i*24;
            cc = (int) Long.parseLong(tvString.substring(begin,begin+8),16);
            ss = (int) Long.parseLong(tvString.substring(begin+8,begin+16),16);
            ee = (int) Long.parseLong(tvString.substring(begin+16,begin+24),16);
            tvText.setSpan(new ForegroundColorSpan(cc), ss, ee, 0);
        }
        for (int i = 0; i < sSpans; i++) {
            begin = i*24+fSpans*24;
            cc = (int) Long.parseLong(tvString.substring(begin,begin+8),16);
            ss = (int) Long.parseLong(tvString.substring(begin+8,begin+16),16);
            ee = (int) Long.parseLong(tvString.substring(begin+16,begin+24),16);
            tvText.setSpan(new StyleSpan(cc), ss, ee, 0);
        }

        textBox.setText(tvText); 
```

检索代码中 (int) Long.parseLong 的原因是因为样式/颜色可以是负数。这会使 parseInt 跳闸并导致溢出错误。但是，执行 parseLong 然后转换为 int 会给出正确的（正或负）整数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-21T18:19:36.720

这个问题很有趣，因为你必须从 SpannableString 或 SpannableStringBuilder 中保存所有你想要的信息，Gson 不会自动选择它们。使用 HTML 对我的实现来说不能正常工作，所以这里有另一个可行的解决方案。这里的所有答案都不完整，您必须执行以下操作：

```
class SpannableSerializer : JsonSerializer<SpannableStringBuilder?>, JsonDeserializer<SpannableStringBuilder?> {

    private val gson: Gson
        get() {
            val rtaf = RuntimeTypeAdapterFactory
                    .of(ParcelableSpan::class.java, ParcelableSpan::class.java.simpleName)
                    .registerSubtype(ForegroundColorSpan::class.java, ForegroundColorSpan::class.java.simpleName)
                    .registerSubtype(StyleSpan::class.java, StyleSpan::class.java.simpleName)
                    .registerSubtype(RelativeSizeSpan::class.java, RelativeSizeSpan::class.java.simpleName)
                    .registerSubtype(SuperscriptSpan::class.java, SuperscriptSpan::class.java.simpleName)
                    .registerSubtype(UnderlineSpan::class.java, UnderlineSpan::class.java.simpleName)
            return GsonBuilder()
                    .registerTypeAdapterFactory(rtaf)
                    .create()
        }

    override fun serialize(spannableStringBuilder: SpannableStringBuilder?, typeOfSrc: Type?, context: JsonSerializationContext?): JsonElement {
        val spanTypes = spannableStringBuilder?.getSpans(0, spannableStringBuilder.length, ParcelableSpan::class.java)
        val spanStart = IntArray(spanTypes?.size ?: 0)
        val spanEnd = IntArray(spanTypes?.size ?: 0)
        val spanFlags = IntArray(spanTypes?.size ?: 0)
        val spanInfo = DoubleArray(spanTypes?.size ?: 0)
        spanTypes?.forEachIndexed { i, span ->
            when (span) {
                is ForegroundColorSpan -> spanInfo[i] = span.foregroundColor.toDouble()
                is StyleSpan -> spanInfo[i] = span.style.toDouble()
                is RelativeSizeSpan -> spanInfo[i] = span.sizeChange.toDouble()
            }
            spanStart[i] = spannableStringBuilder.getSpanStart(span)
            spanEnd[i] = spannableStringBuilder.getSpanEnd(span)
            spanFlags[i] = spannableStringBuilder.getSpanFlags(span)
        }

        val jsonSpannable = JsonObject()
        jsonSpannable.addProperty(INPUT_STRING, spannableStringBuilder.toString())
        jsonSpannable.addProperty(SPAN_TYPES, gson.toJson(spanTypes))
        jsonSpannable.addProperty(SPAN_START, gson.toJson(spanStart))
        jsonSpannable.addProperty(SPAN_END, gson.toJson(spanEnd))
        jsonSpannable.addProperty(SPAN_FLAGS, gson.toJson(spanFlags))
        jsonSpannable.addProperty(SPAN_INFO, gson.toJson(spanInfo))
        return jsonSpannable
    }

    override fun deserialize(jsonElement: JsonElement, type: Type, jsonDeserializationContext: JsonDeserializationContext): SpannableStringBuilder {
        val jsonSpannable = jsonElement.asJsonObject
        val spannableString = jsonSpannable[INPUT_STRING].asString
        val spannableStringBuilder = SpannableStringBuilder(spannableString)
        val spanObjectJson = jsonSpannable[SPAN_TYPES].asString
        val spanTypes: Array<ParcelableSpan> = gson.fromJson(spanObjectJson, Array<ParcelableSpan>::class.java)
        val spanStartJson = jsonSpannable[SPAN_START].asString
        val spanStart: IntArray = gson.fromJson(spanStartJson, IntArray::class.java)
        val spanEndJson = jsonSpannable[SPAN_END].asString
        val spanEnd: IntArray = gson.fromJson(spanEndJson, IntArray::class.java)
        val spanFlagsJson = jsonSpannable[SPAN_FLAGS].asString
        val spanFlags: IntArray = gson.fromJson(spanFlagsJson, IntArray::class.java)
        val spanInfoJson = jsonSpannable[SPAN_INFO].asString
        val spanInfo: DoubleArray = gson.fromJson(spanInfoJson, DoubleArray::class.java)
        for (i in spanTypes.indices) {
            when (spanTypes[i]) {
                is ForegroundColorSpan -> spannableStringBuilder.setSpan(ForegroundColorSpan(spanInfo[i].toInt()), spanStart[i], spanEnd[i], spanFlags[i])
                is StyleSpan -> spannableStringBuilder.setSpan(StyleSpan(spanInfo[i].toInt()), spanStart[i], spanEnd[i], spanFlags[i])
                is RelativeSizeSpan -> spannableStringBuilder.setSpan(RelativeSizeSpan(spanInfo[i].toFloat()), spanStart[i], spanEnd[i], spanFlags[i])
                else -> spannableStringBuilder.setSpan(spanTypes[i], spanStart[i], spanEnd[i], spanFlags[i])
            }
        }
        return spannableStringBuilder
    }

    companion object {
        private const val PREFIX = "SSB:"
        private const val INPUT_STRING = PREFIX + "string"
        private const val SPAN_TYPES = PREFIX + "spanTypes"
        private const val SPAN_START = PREFIX + "spanStart"
        private const val SPAN_END = PREFIX + "spanEnd"
        private const val SPAN_FLAGS = PREFIX + "spanFlags"
        private const val SPAN_INFO = PREFIX + "spanInfo"
    }
} 
```

如果还有其他类型的跨度，您必须在 when 部分添加它们并选择跨度的相关信息，很容易将它们全部添加。

RuntimeTypeAdapterFactory 在 gson 库中是私有的，您必须将其复制到您的项目中。 [https://github.com/google/gson/blob/master/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java](https://github.com/google/gson/blob/master/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)

现在使用它！

```
val gson by lazy {
    val type: Type = object : TypeToken<SpannableStringBuilder>() {}.type
    GsonBuilder()
            .registerTypeAdapter(type, SpannableSerializer())
            .create()
}
val ssb = gson.fromJson("your json here", SpannableStringBuilder::class.java) 
```

# .net - 如何克隆动画画笔？

> ID：10566487
> 
> 赞同：2
> 
> 时间：2012-05-12T18:51:01.227
> 
> 标签：.net, wpf, animation, clone, brush

我有一个动画[画笔](http://msdn.microsoft.com/en-us/library/ms634880)对象，我想[克隆](http://msdn.microsoft.com/en-us/library/system.windows.media.brush.clone.aspx)这个画笔。

```
ColorAnimation ani = new ColorAnimation(Colors.White, TimeSpan.FromSeconds(1))
{ RepeatBehavior = RepeatBehavior.Forever, AutoReverse = true };

SolidColorBrush brush1 = new SolidColorBrush(Colors.Black);
brush1.BeginAnimation(SolidColorBrush.ColorProperty, ani);

SolidColorBrush brush2 = brush1.Clone();

// brush2 is not an animated Brush

if (!brush2.HasAnimatedProperties)
    MessageBox.Show("I don't want this!"); 
```

正如 MSDN Library 所说（Brush.Clone 方法）：

> 创建此 Brush 的可修改克隆，制作此对象值的深层副本。复制依赖属性时，此方法复制资源引用和数据绑定（但它们可能不再解析），但不复制动画或其当前值。

那么，克隆我的动画画笔的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:11:23.573

您需要在克隆上重新创建动画。没有其他办法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:03:15.483

一种可靠的方法可能是扩展`Brush`类并`ICloneable`在派生类中实现。

然后，您的自定义`Clone`方法可以处理您需要克隆的任何内容的克隆。

# c++ - 初始化结构/类中的向量并打印出来

> ID：10566489
> 
> 赞同：0
> 
> 时间：2012-05-12T18:51:07.643
> 
> 标签：c++, vector, constructor, iterator

我实际上是在尝试在结构/类的构造函数中初始化向量。

我想出了这些，下面的内容编译没有错误，但是没有打印出向量中的内容。我想知道为什么，我们将不胜感激！

```
struct MyInt
{
friend ostream &operator<<(ostream &printout, const MyInt &Qn)
{
    printout<< Qn.value << endl;
    return printout;
}

     int value;
     MyInt (int value) : value (value) {}
};

struct MyStuff
{
    std::vector<MyInt> values;

MyStuff () : values ()
    {
        values.reserve (10); // Reserve memory not to allocate it 10 times...
    }
};

int main()
{
MyStuff *mystuff1;
MyStuff *mystuff2;

for (int i = 0; i < 10; ++i)
{
        mystuff1->values.push_back (MyInt (i));
}

for (int x = 0; x < 5; ++x)
{
        mystuff2->values.push_back (MyInt (x));
}

vector<MyInt>::iterator VITER;

for (VITER =mystuff1->values.begin(); VITER!=mystuff1->values.end(); ++VITER)
{
    cout<< *VITER;
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:53:13.250

未定义的行为。您的指针无效。由于您根本不需要指针，因此只需使用值：

```
MyStuff mystuff1, mystuff2;

// ...
mystuff1.push_back(...); // et cetera 
```

另外，如果你不保留，它仍然不会分配10次。`vector`实现足够聪明，不会每次将容量增加 1。

# wamp - Wamp 服务器被禁止

> ID：10566490
> 
> 赞同：2
> 
> 时间：2012-05-12T18:51:16.767
> 
> 标签：wamp, wampserver

我在新计算机上安装了最新的 WAMP 2.2d x64（没有以前的或卸载/重新安装的 wamp 版本）。

安装后，运行 wamp 服务器并将其联机（否则 localhost 也被禁止）我尝试打开 phpmyadmin。

我收到一个错误：

```
Forbidden

You don't have permission to access /phpmyadmin/ on this server. 
```

我不知道为什么会这样。我还没有更改任何设置。在我的另一台计算机上，我运行旧版本的 wampserver，据我所知，安装后运行 phpmyadmin 或 localhost 没有任何问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:47:32.937

左键单击该图标，然后单击“联机”（否则，当您指向 WAMP 图标时，它会显示服务器脱机，尽管该图标是绿色的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-17T08:03:53.203

需要进行以下更改才能解决此问题

从 WampServer 图标，左键单击，选择 Apache > Alias Directories > .../phpmyadmin/ > Edit alias 以打开别名配置文件：

```
 <Directory "c:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
    </Directory> 
```

修改以下行（添加 ::1）

```
 Allow from 127.0.0.1 ::1 
```

再次重新启动 wamp 检查解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T18:58:35.190

wamp 服务器可能没有访问 phpmyadmin 目录的权限。右键单击并以管理员身份运行 wamp 服务器。

你在程序文件中安装了 wamp 和 phpmyadmin 吗？

如果是，我建议您直接在 C: 或其他地方卸载并安装它。

更新：

看一下这个。

[WAMP 错误：禁止您无权访问此服务器上的 /phpmyadmin/](https://stackoverflow.com/questions/8366976/wamp-error-forbidden-you-dont-have-permission-to-access-phpmyadmin-on-this)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-12T00:33:21.500

尝试将 localhost/phpmyadmin/ 更改为 127.0.0.1/phpmyadmin/

# javascript - 离开站点跨浏览器（JS）之前确认消息

> ID：10566493
> 
> 赞同：5
> 
> 时间：2012-05-12T18:51:32.273
> 
> 标签：javascript

想要在有人离开我的网站之前出现一个确认框。如果他们离开，他们的信息将会丢失，而您不希望这样做。请具体说明我是否应该输入代码，所以因为我不是最好的编码员......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T18:52:25.110

```
window.onbeforeunload = function(){
    return "Are you sure you wanna leave my site?";
} 
```

# ruby-on-rails - Rails 正在搜索 .erb 视图而不是 .haml

> ID：10566500
> 
> 赞同：0
> 
> 时间：2012-05-12T18:52:48.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

Rails 给出 500 错误（在使用乘客的生产环境中）。生产日志说它缺少视图：

```
Started GET "/" for at 2012-05-12 20:34:18 +0200
Processing by EventCalendarsController#index as HTML
Completed 500 Internal Server Error in 18ms

ActionView::MissingTemplate (Missing template event_calendars/index, application/index with {:locale=>[:it], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
  * "/home/regroup/calendar/app/views"
  * "/home/regroup/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.0.4/app/views"
):
  app/controllers/event_calendars_controller.rb:24:in `index' 
```

我确定`bundle install`安装了两者`haml`和`haml-rails`宝石。这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

gem 'mysql2'
gem 'devise'
gem 'cancan'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'haml-rails'
  gem "twitter-bootstrap-rails"
end

gem 'jquery-rails' 
```

这里有什么问题？我是否需要更改某些内容才能使其在生产环境中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T18:54:01.780

尝试替换`gem 'haml-rails'`out of assets group 并将其放在 `gem 'cancan'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:03:24.330

根据[Rails assets guide](http://guides.rubyonrails.org/asset_pipeline.html#upgrading-from-old-versions-of-rails)，bundler 中的资产组只能用于：

> Gems 仅用于资产，默认情况下在生产环境中不需要。

您应该`gem 'haml-rails'`退出资产组。

# android - Android SQLite & 删除记录恢复

> ID：10566501
> 
> 赞同：0
> 
> 时间：2012-05-12T18:52:49.013
> 
> 标签：android, sqlite, data-recovery

从我阅读一些 android 取证文章中，我了解到 sqlite 记录可以恢复，但前提是 sqlite 没有使用 SQLITE_SECURE_DELETE 选项编译（用“0”覆盖已删除的内容）或没有触发真空（返回给操作系统未分配的空间）+ sqlite 还有一个选项可以自动吸尘。

**在恢复已删除记录方面，您对 Android 了解多少？它是用这个选项编译的吗？欢迎意见，链接，任何东西**

PS。我也知道其他删除方式，通过将行中的特定标志标记为已删除..但数据仍然存在..所以我对此不感兴趣！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:12:53.717

所以我做了这些测试，但只在 android 2.2 的模拟器上进行（我没有 root 手机）

发了 15 条短信，全部删除，再发 5 条新短信。。结论：

*   通用 SQLite 查看器无法查看已删除的 SMS
*   已删除但未覆盖的 SMS 仍存在于 db 文件中，并且可以使用十六进制工具 (winHex) 或更专业的应用程序 (Oxygen Forensic SQLite 之类..) 原样查看
*   删除的 SMS 将被同一张表（SMS 和 MMS 表）上的新插入覆盖。这意味着从 mmssms.db 数据库中的其他表上插入不会覆盖 SMS-MMS 表中的任何内容
*   SMS按删除顺序被覆盖（它们被添加到“可用空间堆栈”中......并按在此处添加它们或“删除”的顺序被覆盖）
*   因此可以完全恢复短信（如果没有收到或发送新短信..因为它们是存储在同一个表中的展位..对于 MMS 相同..同一个表）
*   部分短信恢复是不可能的（已删除短信的全部空间被填充填充的新短信占用，因此使用十六进制工具查找旧已删除短信的剩余部分）
*   总结：未使用 SQLITE_SECURE_DELETE 选项 & 未触发 Vacuum()

格拉西亚斯

# paypal - 我们应该为我们的免费脚本和应用程序使用捐赠按钮吗

> ID：10566507
> 
> 赞同：0
> 
> 时间：2012-05-12T18:53:26.287
> 
> 标签：paypal

首先我不确定这是否是问这个问题的正确地方，但我在这里发现了几个捐赠问题。所以我想我应该在 stackoverflow 上问它，但如果我错了，请让我访问正确的堆栈交换网络站点。

我们是一群创建免费下载的网络脚本和应用程序的人，我们从不向任何人收费。但有时我们真的很难把钱花在一个我们不会赚钱的项目上。那么在我们的网站上使用贝宝捐赠按钮是否是个好主意。

除了我和我的一些伙伴之外，我们还有其他一些志愿者，他们一直在创建这些免费的 Web 应用程序，因此我们需要一些方式来鼓励他们并为他们的辛勤工作支付一些费用。由于我们没有从该网站获得收入，因此无法直接支付。

有人可以建议一种更好的方法来鼓励所有贡献者，因为我发现捐赠按钮会有所帮助。我仍然不确定，也不想采取任何错误的步骤

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:20:45.640

我推荐[Flattr](https://flattr.com/)。它介于 PayPal 小额捐款和 Facebook Like 按钮之间：

如果用户点击它，Flattr 将记住该网站，并且在月底，所有被该用户“奉承”的人都会从该用户那里获得一定的经济捐助。该系统的好处是您的用户只需单击一次即可表示他们的支持（无论是在道德上还是在经济上）。同样，使用 Flattr，用户希望花费的所有钱都会到达您（希望还有您的志愿者），在将钱存入您的 Flattr 帐户时会支付费用。

由于其（相当高的）费用，如果您期望更大的捐款，我只会推荐 PayPal。

# android - 用于管理屏幕亮度的按钮

> ID：10566511
> 
> 赞同：0
> 
> 时间：2012-05-12T18:54:35.443
> 
> 标签：android, android-layout, android-intent, android-widget

我正在尝试创建一个始终处于活动状态的应用程序（即永远不会进入后台），并带有一个按钮，当按下该按钮时会降低屏幕亮度。我声明我不是 Android 编程方面的专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:01:24.800

您可以将屏幕亮度 o 按钮单击设置为：

**第一种方式：**

```
@Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   int curBrightnessValue=android.provider.Settings.System.getInt(
       getContentResolver(),android.provider.Settings.System.SCREEN_BRIGHTNESS);
   setBrightness(curBrightnessValue-25);//set BRIGHTNESS
  }
private void setBrightness(int brightness) {  
    try {  
      IHardwareService hardware = IHardwareService.Stub.asInterface(  
      ServiceManager.getService("hardware"));  
      if (hardware != null) {  
        hardware.setScreenBacklight(brightness);  
      }  
    } catch (RemoteException doe) {            
    } 
```

清单.xml

```
<uses-permission android:name="android.permission.HARDWARE_TEST"></uses-permission> 
```

**第二种方式：**

```
@Override
   public void onClick(View arg0) {
   // TODO Auto-generated method stub
   int curBrightnessValue=android.provider.Settings.System.getInt(
   getContentResolver(),android.provider.Settings.System.SCREEN_BRIGHTNESS);
   int SysBackLightValue = curBrightnessValue-25;
   android.provider.Settings.System.putInt(getContentResolver(),
   android.provider.Settings.System.SCREEN_BRIGHTNESS,
   SysBackLightValue);
  } 
```

AndroidManifest.xml：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

最后，对于其他设置亮度的方法，请参阅[这篇](https://stackoverflow.com/questions/1791340/adding-screen-brightness-controls-to-android-application)文章

# c# - 在批量复制准确之前将数据类型转换为日期

> ID：10566513
> 
> 赞同：0
> 
> 时间：2012-05-12T18:54:48.347
> 
> 标签：c#, sql-server-2008

> **可能重复：**
> [将 C# 中的 nvarchar 值转换为 Sql 中的等效日期/时间](https://stackoverflow.com/questions/10566692/converting-nvarchar-value-in-c-sharp-to-date-time-equivalent-in-sql)

我从 txt 文件中读取的数据包含不同的列。在插入数据库之前，我需要将一列的类型转换为日期/时间

```
SqlBulkCopy bc = new SqlBulkCopy(Consql.ConnectionString, SqlBulkCopyOptions.TableLock);
bc.DestinationTableName = "name";
bc.ColumnMappings.Add(dt.Columns[0].ColumnName, "IDATE");
bc.ColumnMappings.Add(dt.Columns[1].ColumnName, "ITIME");
bc.ColumnMappings.Add(dt.Columns[2].ColumnName, "TECHID");
bc.ColumnMappings.Add(dt.Columns[5].ColumnName, "CNTRC");
bc.BatchSize = dt.Rows.Count;
Consql.Open(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:33:50.297

我认为要使用 SqlBulkCopy 你需要实现 IDataReader 接口。实现它，您可以将源文件中的值转换为所需的类型。

您的自定义阅读器可能如下所示

```
 public class Reader : IDataReader
    {
        readonly StreamReader _streamReader;

        readonly Func<string, object>[] _convertTable;
        readonly Func<string, bool>[] _constraintsTable;

        string[] _currentLineValues;
        string _currentLine;

        //Constructing reader you can specify your converters     
        public Reader(string filepath, Func<string, bool>[] constraintsTable, Func<string, object>[] convertTable)
        {
            _constraintsTable = constraintsTable;
            _convertTable = convertTable;
            _streamReader = new StreamReader(filepath);

            _currentLine = null;
            _currentLineValues = null;
        }

        public object GetValue(int i)
        {
            try
            {
                return _convertTable[i](_currentLineValues[i]);
            }
            catch (Exception)
            {
                return null;
            }
        }

        public bool Read()
        {
            if (_streamReader.EndOfStream) return false;

            _currentLine = _streamReader.ReadLine();

            _currentLineValues = _currentLine.Split(/*any column splitter*/);

            var invalidRow = false;
            for (int i = 0; i < _currentLineValues.Length; i++)
            {
                if (!_constraintsTable[i](_currentLineValues[i]))
                {
                    invalidRow = true;
                    break;
                }
            }

            return !invalidRow || Read();
        }

//other methods...
} 
```

您可以像这样使用它（将源列之一转换为 DateTime）：

```
static void Main(string[] args)
        {
            // Create Reader
            var reader = GetReader();

            // DB connection string
            var connectionString = @"Server={blah};initial catalog={blah-blah};Integrated Security=true";     

            using (var loader = new SqlBulkCopy(connectionString, SqlBulkCopyOptions.Default))
            {
                loader.ColumnMappings.Add(0, 2);
                loader.ColumnMappings.Add(1, 1);
                loader.ColumnMappings.Add(2, 3);
                loader.ColumnMappings.Add(3, 4);

                loader.DestinationTableName = "Customers";
                loader.WriteToServer(reader); 

                Console.WriteLine("Done!");
            }

            Console.ReadLine();
        }

        static IDataReader GetReader()
        {
            var sourceFilepath = "sqlbulktest.txt";
            //our converters!
            var convertTable = GetConvertTable();

            var constraintsTable = GetConstraintsTable();

            var reader = new Reader(sourceFilepath, constraintsTable, convertTable);
            return reader;
        }

        static Func<string, bool>[] GetConstraintsTable()
        {
            var constraintsTable = new Func<string, bool>[4];

            constraintsTable[0] = x => !string.IsNullOrEmpty(x);
            constraintsTable[1] = constraintsTable[0];
            constraintsTable[2] = x => true;
            constraintsTable[3] = x => true;
            return constraintsTable;
        }

        static Func<string, object>[] GetConvertTable()
        {
            var convertTable = new Func<object, object>[4];

            convertTable[0] = x => x;

            convertTable[1] = x => x;

            // Convert to DateTime from specific format!
            convertTable[2] = x =>
                              {
                                  DateTime datetime;
                                  if (DateTime.TryParseExact(x.ToString(), "dd.MM.yyyy", CultureInfo.InvariantCulture,
                                        DateTimeStyles.None, out datetime))
                                  {
                                      return datetime;
                                  }
                                  return null;
                              };     

            convertTable[3] = x => Convert.ToInt32(x);

            return convertTable;
        } 
```

# python - 使用 MSN 协议运行 twisted.words 示例的异常

> ID：10566516
> 
> 赞同：1
> 
> 时间：2012-05-12T18:54:53.180
> 
> 标签：python, twisted

我正在运行 Twisted 文档中的 twisted.words MSN 协议示例：http: [//twistedmatrix.com/projects/words/documentation/examples/msn_example.py](http://twistedmatrix.com/projects/words/documentation/examples/msn_example.py)

但是，当我运行这个示例脚本时，我得到了 UnhandledError 异常：

```
2012-05-12 15:39:51-0300 [-] Log opened.
2012-05-12 15:39:51-0300 [-] Starting factory <twisted.internet.protocol.ClientFactory instance at  0x8c6c18c>
2012-05-12 15:39:52-0300 [Dispatch,client] Starting factory <twisted.words.protocols.msn.NotificationFactory instance at 0x8c6c2cc>
2012-05-12 15:39:52-0300 [Dispatch,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0x8c6c18c>
2012-05-12 15:39:53-0300 [Notification,client] Starting factory <twisted.internet.protocol.ClientFactory instance at 0x8c710ec>
2012-05-12 15:39:53-0300 [Notification,client] Unhandled Error
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/twisted/python/log.py", line 84, in callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/log.py", line 69, in callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/context.py", line 81, in callWithContext
    return func(*args,**kw)
--- <exception caught here> ---
  File "/usr/lib/python2.7/dist-packages/twisted/internet/selectreactor.py", line 146, in _doReadOrWrite
    why = getattr(selectable, method)()
  File "/usr/lib/python2.7/dist-packages/twisted/internet/tcp.py", line 460, in doRead
    rval = self.protocol.dataReceived(data)
  File "/usr/lib/python2.7/dist-packages/twisted/protocols/basic.py", line 564, in dataReceived
    why = self.lineReceived(line)
  File "/usr/lib/python2.7/dist-packages/twisted/words/protocols/msn.py", line 670, in lineReceived
    handler(params.split())
  File "/usr/lib/python2.7/dist-packages/twisted/words/protocols/msn.py", line 848, in handle_USR
    authData=params[3])
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 108, in execute
    return succeed(result)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 71, in succeed
    d.callback(result)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 360, in callback
    assert not isinstance(result, Deferred)
exceptions.AssertionError: 

2012-05-12 15:39:53-0300 [Notification,client] Stopping factory <twisted.words.protocols.msn.NotificationFactory instance at 0x8c6c2cc>
2012-05-12 15:39:55-0300 [PassportNexus,client] Starting factory <twisted.internet.protocol.ClientFactory instance at 0x8d014cc>
2012-05-12 15:39:55-0300 [PassportNexus,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0x8c710ec>
2012-05-12 15:39:56-0300 [PassportLogin,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0x8d014cc> 
```

*   Python 2.7.2+
*   扭曲的 11.0.0
*   pyOpenSSL 0.12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:26:45.103

我以前从未使用过 twprotocols.msn 协议，但在我看来，Twisted 的第 846 行有`msn.py`一个[错误](http://twistedmatrix.com/trac/browser/tags/releases/twisted-11.0.0/twisted/words/protocols/msn.py#L846)。这是有问题的功能：

```
def handle_USR(self, params):
    if len(params) != 4 and len(params) != 6:
        raise MSNProtocolError, "Invalid Number of Parameters for USR"

    mechanism = params[1]
    if mechanism == "OK":
        self.loggedIn(params[2], unquote(params[3]), int(params[4]))
    elif params[2].upper() == "S":
        # we need to obtain auth from a passport server
        f = self.factory
        d = execute(                                                   # <------- here
            _login, f.userHandle, f.password, f.passportServer,
            authData=params[3])
        d.addCallback(self._passportLogin)
        d.addErrback(self._passportError) 
```

`defer.execute`使用`msn._login`及其参数调用，但`msn._login`应该返回一个 Deferred。与可能返回 Deferred 的函数一起使用是不合适`defer.execute`的，因为它将立即被包装在另一个 Deferred via`defer.succeed`中，并且 Deferred 不能将其他 Deferred 作为结果保存。

`execute`应该使用那里的电话`defer.maybeDeferred`。我希望如果您从文件顶部添加`maybeDeferred`导入并将此调用更改为调用，它将开始工作（或至少由于不同的错误而开始失败:​​)）。`twisted.internet.defer``execute``maybeDeferred`

# javascript - HTML5 画布图像剪辑

> ID：10566517
> 
> 赞同：2
> 
> 时间：2012-05-12T18:54:56.690
> 
> 标签：javascript, html, canvas

像我在画布tileset图像中的东西。 [http://i947.photobucket.com/albums/ad320/kev1030_photos/btiles2032.png](http://i947.photobucket.com/albums/ad320/kev1030_photos/btiles2032.png)

如果我单击第一个图块返回 0，如果单击第 10 个图块返回 9 并且 ... 和 ...

如何在 HTML5 画布上剪辑图块集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:32:37.947

剪辑在这里不是正确的词。剪辑是指您仅将图像或路径的一部分绘制到屏幕上。

您可以称其为“命中测试”或“对象拾取”或“细胞检测”。

这只是简单的数学。每个图标都是 32 + 2 黄色，因此您可以这样做来找出哪个单元格：

```
can.addEventListener('mousedown', function(e) {
    var mouse = getMouse(e, can);
    var x = Math.floor(mouse.x / 34);
    var y = Math.floor(mouse.y / 34);
    alert(x + (y*16)); // because there are 16 in a row
}, false); 
```

这是一个工作示例：

[http://jsfiddle.net/YH8b8/](http://jsfiddle.net/YH8b8/)

# ruby-on-rails - 自定义路径生成器

> ID：10566524
> 
> 赞同：2
> 
> 时间：2012-05-12T18:55:58.470
> 
> 标签：ruby-on-rails, ruby, url, routes, helper

我以为我知道如何覆盖路径助手，但我没有得到预期的行为。

我尝试将这样的内容添加到我的 ApplicationHelper 中：

```
def post_path(post)
  "/posts/#{post.id}/#{post.url}"
end 
```

但由于某种原因，在我的一个控制器中，当我尝试使用`post_path(@post)`它时，它只返回完整的 url，类似于`/posts/4faddb375d9a1e045e000068/asdf`（这是浏览器中的当前 url）而不是`/posts/4faddb375d9a1e045e000068/post-title-here`.

在我的路线文件中：

`get '/posts/:id/:slug' => 'posts#show', :as => 'post'`

奇怪的是，如果我使用`post_path(@post, @post.url)`，它可以正常工作。如果在视图中我使用`post_path(@post)`它可以正常工作。（`@post.url`返回 url 友好的标题）

万一你不知道，我试图最终得到类似于stackoverflow的行为，其中url包含id和最后一个slug，如果slug与给定id的模型不匹配，它会重定向到正确的网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:29:44.233

我会尝试将整体`def post_path`放入`application_controller.rb`并使其成为`helper_method :post_path`. 你会得到两全其美的。

# java - 在执行 mvn exec:java 时设置自定义类路径

> ID：10566530
> 
> 赞同：0
> 
> 时间：2012-05-12T18:57:34.177
> 
> 标签：java, maven, classpath

我有一个从 jar 运行 main 方法的简单用例。这个 jar 作为 mvn packge 的一部分创建并存储在 myproject/target/myproject-jar-withdependencies

我现在如何运行它是使用一个简单的 java -cp {path-to -jar} {mainclass} 。我正在尝试为此使用 mvn exec 插件，但运行它时遇到问题

关键是我需要强制 maven 在 target/ 目录中的 jar 中找到主类。我尝试使用参数标记使用 -cp 和 jar，但不幸的是，这也不起作用。Maven 似乎没有将目标目录中的 jar 识别为属于类路径

我需要在 exec 插件中指定自定义类路径（mvn exec 中的文档对此没有提供太多信息）

任何指针都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T15:17:28.423

在评论中回答：

> 很抱歉更新太晚了。但这是固定的。我的 pom 配置错误 – Nitin 2013 年 2 月 8 日 23:47

# mysql - 两个数据库的列作为外键引用

> ID：10566531
> 
> 赞同：0
> 
> 时间：2012-05-12T18:57:58.897
> 
> 标签：mysql, sql, database

我有 2 个数据库 A 和 B

在 A 中有一个表，其中一个列是 B 表中元素的列条目（id_A=id_B）。在创建 B 时，我应该如何将 A 的表的列作为外键引用？或者我只需要忽略，一旦编码，我会将 A 的表称为“A.Table”。我在 mysql 5.3 中执行此操作。谢谢你。

**[更新]**

我的意思是当我做这样的事情时

```
CREATE DATABASE B;

USE B;

CREATE TBLE BT(id int primary key,
               _id int foreign key(_id) references A.TableX(_id)); 
```

这是一个正确的命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:14:10.670

是的，这是正确的 - 进行了一些修改：

```
CREATE TABLE B.tableB
( id int
, _id int 
, primary key (id)
, foreign key (_id)            --- the FK should not be declared inline in MySQL
    references A.TableX(_id)   --- (_id) should be the the PK of tableX in db A
) ; 
```

# bash - Bash 如何在不同的目录上下文中执行命令？

> ID：10566532
> 
> 赞同：118
> 
> 时间：2012-05-12T18:58:03.303
> 
> 标签：bash, shell, working-directory

我有一个从非常特定的目录中调用的通用命令。该程序只有一个可执行文件位于 /bin 中，当前工作目录对于正确运行它非常重要。该脚本会影响运行它的目录中的文件。

现在，我还有一个自定义 shell 脚本，它在一个目录中执行一些操作，但我需要调用上面提到的那个命令，就好像它在另一个目录中一样。

您如何在 shell 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-05-12T19:04:37.153

在子shell中使用`cd`；使用这种 subshel​​l 的简写方式是括号。

```
(cd wherever; mycommand ...) 
```

也就是说，如果你的命令有一个它需要的环境，它应该真正确保环境本身，而不是把责任放在任何可能想要使用它的东西上（除非它是在井的上下文中非常特殊的情况下使用的内部命令定义了更大的系统，这样任何调用者都需要确保它需要的环境）。通常这将是某种 shell 脚本包装器。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-12T19:04:28.950

```
(cd /path/to/your/special/place;/bin/your-special-command ARGS) 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-05-12T19:05:40.507

为此，您可以使用`cd`内置函数或内置`pushd`函数。`popd`例如：

```
# do something with /etc as the working directory
cd /etc
:

# do something with /tmp as the working directory
cd /tmp
: 
```

您可以像使用任何其他命令一样使用内置命令，并且可以在脚本中多次更改目录上下文。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-11-06T18:42:47.570

## 如果要返回当前工作目录：

```
current_dir=$PWD;cd /path/to/your/command/dir;special command ARGS;cd $current_dir; 
```

1.  我们正在设置一个`current_dir`等于您的变量`pwd`
2.  之后，我们将前往`cd`您需要运行命令的地方
3.  然后我们运行命令
4.  然后我们将`cd`回到我们的变量`current_dir`

@apieceofbart 的另一个解决方案 `pushd && YOUR COMMAND && popd`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-30T16:20:01.197

只是一个有用的信息：

这会将shell目录更改为`~/project`

```
function mymake() {
    cd ~/project && make $1
} 
```

这不会

```
function mymake() (
    cd ~/project && make $1
) 
```

跑步

```
mymake something 
```

# oop - 在 MATLAB 中清除类定义

> ID：10566533
> 
> 赞同：7
> 
> 时间：2012-05-12T18:58:18.547
> 
> 标签：oop, class, matlab

该命令`clear classes`清除当时加载到内存中的所有类定义。

是否可以只清除特定的类定义？

编辑：我感兴趣的是从内存中删除特定的类*定义，而不是类实例。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T11:11:07.907

当我编写新的 HPF 类时，我自己也遇到了这个问题。所以我尝试了一些东西，因为当我调试新类时，我做了很多更改，然后进行测试。

“清除功能”没有帮助。我什至尝试过“清除 hpf”。但清除所有实例似乎确实如此。例如：

```
>> x = hpf(3);
>> x+2
ans =
5

>> whos
  Name      Size            Bytes  Class     Attributes

  ans       1x1               248  hpf                 
  x         1x1               248  hpf                 
  y         1x1                 8  double 
```

所以现在我对这个类做了一个微不足道的改变并保存了它。

```
>> z = hpf(17);
Warning: The class file for 'hpf' has been changed; but the change cannot be applied because objects based on the old class file still exist. If you use
those objects, you might get unexpected results. You can use the 'clear' command to remove those objects. See 'help clear' for information on how to remove
those objects. 

>> clear functions
>> clear hpf
>> clear x
>> clear z
>> x = hpf(3);
Warning: The class file for 'hpf' has been changed; but the change cannot be applied because objects based on the old class file still exist. If you use
those objects, you might get unexpected results. You can use the 'clear' command to remove those objects. See 'help clear' for information on how to remove
those objects. 
```

所以我仍然收到警告，告诉我 MATLAB 仍然存在问题。但是，我仍然在内存中有一个很容易忘记的 HPF 实例。

```
>> clear ans
>> clear x
>> whos
  Name      Size            Bytes  Class     Attributes

  y         1x1                 8  double              

>> x = hpf(3);
>> x+23
ans =
26 
```

只要我也删除了该实例，MATLAB 就不再给我警告。请注意，我从来不需要发出“清除类”命令。变量 y，一个 double，仍然存在以证明这一事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:17:24.957

这是一种方法：

% 设置`ClassName`为匹配您希望清除其实例的类的名称。

```
ClassName = 'MyClass'; 
```

% 这是代码：

```
VarsStruct = whos;
VarsCellArray = cat(3, cellstr(char(VarsStruct(:).name)), cellstr(char(VarsStruct(:).class)));
ClassInstanceIndices = find(ismember(VarsCellArray(:,:,2), ClassName));
ClassInstanceNames = VarsCellArray(ClassInstanceIndices,:,1)';
clear(ClassInstanceNames{:}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T23:20:01.180

要清除包含所有常量属性数据的类定义，需要执行以下两项操作

1.  从内存中清除类的所有实例
2.  问题`clear classname`。

必须按上述顺序进行。颠倒顺序将使 Constant 属性数据停留在内存中（截至 R2013b），直到`clear classes`发布。

# android - Android，如何获取 ViewGroup 的宽度和高度？

> ID：10566534
> 
> 赞同：0
> 
> 时间：2012-05-12T18:58:24.577
> 
> 标签：android, height, width, viewgroup

在我的应用程序中，我需要知道主要活动容器的大小。我写了以下代码：

```
Button btnActionMenu = (Button) findViewById(R.id.actionbar_menu);
        btnActionMenu.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                int width = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 40, getResources().getDisplayMetrics());
                RelativeLayout rlContainer = (RelativeLayout) findViewById(R.id.inner_content);
                Bitmap bitmap = Bitmap.createBitmap(rlContainer.getLayoutParams().width, rlContainer.getLayoutParams().height, Config.ARGB_8888);//
                Canvas canvas = new Canvas(bitmap);
                rlContainer.draw(canvas);
                SlideoutHelper.setBitmap(bitmap, width);
                startActivity(new Intent(Home.this, MenuActivity.class));
                overridePendingTransition(0, 0); 
            }
        }); 
```

`rlContainer`是活动的根容器。当我运行并单击按钮时，应用程序崩溃并且 Logcat 说“**应用程序空指针异常**”并指向行

```
Bitmap bitmap = Bitmap.createBitmap(rlContainer.getLayoutParams().width, rlContainer.getLayoutParams().height, Config.ARGB_8888); 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:18:27.243

您是否尝试过 getMeasuredHeight 和 getMeasuredWidth 或 getHeight 和 getWidth （在 rlContainer 变量上）？

请注意，这仅在视图准备好后才有效，而不是在 onCreate() 方法中。但是，它会在这种情况下工作，因为它位于与用户相关的操作中，该操作发生在向用户显示视图之后。

顺便说一句，关于您的代码，“rlContainer.getLayoutParams().width”可能会返回负值，以防它是 wrap-content 或 match-parent 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:19:07.460

尝试这个 ：

```
 v.measure(
    MeasureSpec.makeMeasureSpec(v.getLayoutParams().width,MeasureSpec.EXACTLY),
    MeasureSpec.makeMeasureSpec(v.getLayoutParams().height, MeasureSpec.EXACTLY));
    v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());
    Bitmap bitmap = Bitmap.createBitmap(v.getWidth(), v.getHeight()
   ,Bitmap.Config.RGB_565); 
```

# jaxb - 避免为此 simpleType 生成 jaxb 枚举类...（或改用字符串）

> ID：10566537
> 
> 赞同：1
> 
> 时间：2012-05-12T18:58:47.860
> 
> 标签：jaxb

我们有一个 10,000 的枚举，有人将它放入 xsd 中，它在 java 中生成了一个 60,000 行的文件，该文件无法编译，说代码太大

```
[错误] 无法在项目框架上执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile)：编译失败
[错误] /Users/dhiller/Space/ifp-core/framework/target/generated-sources/com/framework/util/LanguageCodeSimpleType.java:[7627,4] 代码太大

```

无论如何在jaxb中

1.  将 simpletype 映射到 String 以在各处生成字符串
2.  只是排除元素，因为我认为人们没有使用它

（我可能只是将它从模式中删除，看看人们是否抱怨）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T12:56:41.100

这可能会有所帮助 - 不再生成枚举类。

```
<jaxb:typesafeEnumClass map="false" /> 
```

[如何避免映射到枚举类](https://jaxb.java.net/guide/Avoid_strong_databinding.html#Avoid_mapping_to_enum)

# perl - 使用 Perl 删除字符串末尾的尾随逗号

> ID：10566539
> 
> 赞同：3
> 
> 时间：2012-05-12T18:59:02.507
> 
> 标签：perl, csv, comma, trailing

我正在解析一个 CSV 文件，其中每一行如下所示。

10998,4499,SLC27A5,Q9Y2P5,GO:0000166,GO:0032403,GO:0005524,GO:0016874,GO:0047747,GO:0004467,GO:0015245,,,,,,,,,,,,,,, ,,,,,,,,,,,,,,,,,,,,,,

每行末尾似乎都有逗号。

我想获得第一个术语，在本例中为“10998”，并获得与其相关的 GO 术语的数量。所以我在这种情况下的输出应该是，

## 输出：

10998,7

但它显示的是 299。我意识到每行总共有 303 个逗号。而且我无法找到删除尾随逗号的简单方法。谁能帮我解决这个问题？

谢谢！

## 我的代码：

```
use strict;
use warnings;

open my $IN, '<', 'test.csv' or die "can't find file: $!";
open(CSV, ">GO_MF_counts_Genes.csv") or die "Error!! Cannot create the file: $!\n";
my @genes = ();

my $mf;
foreach my $line (<$IN>) {
    chomp $line;
    my @array = split(/,/, $line);
    my @GO = splice(@array, 4);
    my $GO = join(',', @GO);
    $mf = count($GO);
    print CSV "$array[0],$mf\n";
}

sub count {
    my $go = shift @_;
    my $count = my @go = split(/,/, $go);
    return $count;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:44:06.337

我会使用 juanrpozo 的解决方案进行计数，但如果您仍然想按照自己的方式进行，请使用正则表达式替换删除逗号。

```
$line =~ s/,+$//; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T23:08:05.010

我建议使用这种更简洁的方式来编写程序。

请注意，该行`my @data = split /,/, $line`会丢弃尾随的空字段（`@data`只有 11 个字段包含您的示例数据），因此无论是否预先删除尾随逗号都会产生相同的结果。

```
use strict;
use warnings;

open my $in, '<', 'test.csv' or die "Cannot open file for input: $!";
open my $out, '>', 'GO_MF_counts_Genes.csv' or die "Cannot open file for output: $!";

foreach my $line (<$in>) {
  chomp $line;
  my @data = split /,/, $line;
  printf $out "%s,%d\n", $data[0], scalar grep /^GO:/, @data;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T19:23:45.120

你可以`grep`申请`@array`

```
my $mf = grep { /^GO:/ } @array; 
```

假设`$array[0]`从不匹配`/^GO:/`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-12T19:43:27.647

对于您的每一行：

```
foreach my $line (<$IN>) {
    my ($first_term) = ($line =~ /(\d+),/);
    my @tmp = split('GO', " $line ");
    my $nr_of_GOs = @tmp - 1;
    print CSV "$first_term,$nr_of_GOs\n";
} 
```

# objective-c - 来自两个 NSImage 的 NSImage

> ID：10566544
> 
> 赞同：0
> 
> 时间：2012-05-12T19:00:17.923
> 
> 标签：objective-c, macos, cocoa

我有一个矩形 NSImage A，我想缩放以嵌入到保持 A 比例的方形透明图像 B 中。所以，最后我会得到一个带有矩形的正方形图像。

我该如何构图？我的意思是，如何在另一个 NSImage 上绘制 NSImage 并保存生成的图像？

我一直在阅读有关在 beizer 内裁剪 NSImage 的内容，但我需要保持比率而不是填充 beizer 正方形。

我希望你明白我想要什么。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:23:57.597

“可可绘图指南”有一个名为“绘制到图像”的部分。从该文档中：

> 可以通过将焦点锁定在 NSImage 对象上并将其他图像或路径绘制到图像上下文中来以编程方式创建图像。此技术对于创建要渲染到屏幕的图像最有用，尽管您也可以将生成的图像数据保存到文件中。

那里有示例代码。

# amazon-web-services - 如何在 aws beanstalk 中部署 wso2 产品？

> ID：10566545
> 
> 赞同：0
> 
> 时间：2012-05-12T19:00:25.167
> 
> 标签：amazon-web-services, wso2, amazon-elastic-beanstalk

我想使用 beanstalk 在 aws 中部署 wso2 产品。

理论上应该可以按照 webapp 模式下的部署说明进行操作。

[http://wso2.org/project/carbon/3.2.2/docs/admin_guide.html#webappmode](http://wso2.org/project/carbon/3.2.2/docs/admin_guide.html#webappmode)

有没有人设法做到这一点？
需要哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:31:40.677

按照您共享的文档 [1] 应该可以工作。

但是，除非您真的有要求，否则不鼓励在 Web 应用程序模式下运行 WSO2 产品。这是因为 Web 应用容器会限制 WSO2 产品，其中 WSO2 产品可以在独立模式下独立运行。在 EC2 上独立运行 WSO2 可能更合适。

[1] [http://wso2.org/project/carbon/3.2.2/docs/admin_guide.html#webappmode](http://wso2.org/project/carbon/3.2.2/docs/admin_guide.html#webappmode)

# cordova - PhoneGap CoffeeScript Hello World

> ID：10566546
> 
> 赞同：2
> 
> 时间：2012-05-12T19:00:28.897
> 
> 标签：cordova, coffeescript

我是 PhoneGap/CoffeeScript 的新手，试图让一个 Hello World 应用程序在 iOS 中运行，我想知道我做错了什么。

这将是我的标准 index.html：

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
  <meta charset="utf-8">

  <script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js"></script>
  <script type="text/javascript" charset="utf-8" src="app.js"></script>

  </head>
  <body onload="onBodyLoad()">
  <h1>Hey, it's Cordova!</h1>
  <p>Don't know how to get started? Check out our <em><a target="_blank" href="http://docs.phonegap.com/en/edge/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS">Getting Started Guide</a></em>

  </body>
</html> 
```

从 app.coffee 生成的 app.js 看起来像这样：

```
(function() {
    var onBodyLoad, onDeviceReady;

    onBodyLoad = function() {
        return document.addEventListener("deviceready", onDeviceReady, false);
    };

    onDeviceReady = function() {
        return navigator.notification.alert("This alert never happens!");
    };

}).call(this); 
```

当我删除 app.js 的第一行“ *(function() {* ”和最后一行“ *}).call(this);* ”时，会收到警报，一切正常。但我想有一个比每次 CoffeeScript 编译成 JavaScript 时都删除这些行更好的方法。

非常感谢，雅各布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:02:32.780

Coffeescript 将每个文件包装在一个函数中，以防止它污染全局命名空间。如果您*真的*想这样做，您可以更改`onBodyLoad`to的声明`window.onBodyLoad`，但最佳实践明确反对将 ​​Javascript 调用放在 HTML 元素中，例如`onload`.

这是一个[流行问题](https://stackoverflow.com/questions/7082373/coffeescript-wrapping-files-in-a-function#comment8477696_7082373)的变体。[这](https://stackoverflow.com/a/7082464/760389)是一个示例，说明如何使用事件侦听器在页面加载时不显眼地调用您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:03:30.193

CoffeeScript 提供了一个禁用包装的`bare`选项。`-b`

# python - OSX - “NumPy/SciPy 需要 Python 2.6 才能安装”

> ID：10566554
> 
> 赞同：1
> 
> 时间：2012-05-12T19:01:51.760
> 
> 标签：python, macos, numpy, scipy

我刚买了一台新机器（osx-lion），我正在尝试重新安装我的所有工具。我正在尝试安装 NumPy 和 SciPy。我知道 Apple 发布的版本并不是让 NumPy 和 SciPy 高兴的原因，所以我去了 Python.org 并安装了推荐的版本（2.7.3），运行顺利。现在当 I 时`which python`，它指向新的 2.7 版本，该版本与机器随附的版本不同。我的`PATH`变量还包含 2.7 (python.org) 版本的路径。

然后我下载了 NumPy 并收到消息：

`numpy 1.6.1 cannot be installed on this disk. numpy requires python.org Python 2.6 to install.`

于是我尝试了 SciPy，得到了同样的信息：

`scipy 0.10.1 can't be installed on this disk. scipy requires python.org Python 2.6 to install.`

经过一番谷歌搜索，我看到所需的 2.6 只是 2.6*或更高*版本，并且我确实安装了 Python.org 版本（2.7），但我一定遗漏了一些东西。

编辑 - 只是尝试重新启动机器，以防某些更改需要重新启动才能生效，但这没有帮助。

任何帮助将不胜感激。谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T20:48:32.067

在不经历版本冲突的情况下安装 numpy 和 scipy 的一种简单易行的方法是使用[Enthought](http://www.enthought.com/) python 发行版。他们有一个免费版本，其中包括 python 和您想要的两个包，以及我非常喜欢的 iPython 控制台。他们还提供更广泛的发行版，仅用于学术用途，否则您必须付费。

python.org 建议安装 python 2.x 的更新版本，而不是 OSX 附带的版本。按照这个建议，我能够不假思索地让 scipy 和 numpy 工作。以下是我正在使用的版本（缺少一些版本号，我的笔记不完整）：

*   来自 python.org 的 Python 2.7.2（64 位）
*   numpy/scipy（OSX 10.6 构建）
*   ipython 0.12
*   阅读线
*   matplotlib

归根结底，enthought.com 是安装一切的最简单方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T20:19:56.960

安装最新版本的 Xcode/devtools 和 fortran ( [http://www.scipy.org/Installing_SciPy/Mac_OS_X](http://www.scipy.org/Installing_SciPy/Mac_OS_X) )。

确认python版本

```
python --version 
```

安装点子

```
sudo easy_install pip 
```

安装 numpy

```
sudo pip install numpy 
```

如果它抱怨您安装了旧版本的颠簸，请升级它。

```
pip install numpy --upgrade 
```

检查它失败了多少次测试；）

```
sudo pip install nose
python
import numpy as np
np.test('full') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T19:59:59.093

如果您安装了 OSX 开发人员工具，您应该可以从源代码安装而不会遇到太多麻烦。

*   确保在 Python.org 安装中安装了 setuptools/distribute：从新的 python运行[distribute_setup.py](https://pypi.org/project/distribute/#distribute-setup-py)
*   确保你有 scipy 的 gfortran 编译器。这只是`brew install gfortran`如果您使用[Homebrew](https://brew.sh/)。
*   用权`easy_install`做事`easy_install numpy; easy_install scipy`。（或者，`easy_install pip`然后`pip install numpy; pip install scipy`。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-12T19:10:46.577

我不确定 osx 是如何工作的，但是如果它提示您输入目录，请选择您安装 python 2.7 的目录

你也可以在这里下载 2.6 的 numpy：（通过 sourceforge） [http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-py2.6-python.org-macosx10.3 .dmg/下载](http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-py2.6-python.org-macosx10.3.dmg/download)

注意：当我在他们的网站上遇到这个时，我正在搜索 2.6 的 scipy：“请注意，Mac OS X 二进制文件与来自 python.org 的 Python 一起工作，而不是与 Apple 提供的 Python 一起工作。”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T02:47:47.313

我建议使用[https://twitter.com/fonnesbeck](https://twitter.com/fonnesbeck)的超级包，您可以在此处找到安装脚本[http://fonnesbeck.github.io/ScipySuperpack/](http://fonnesbeck.github.io/ScipySuperpack/)

Enthought 的天篷对于他们没有自己构建的软件来说是一大笔钱。

# android - 如何使图像旋转看起来干净？安卓 GL ES

> ID：10566556
> 
> 赞同：1
> 
> 时间：2012-05-12T19:02:02.177
> 
> 标签：android, opengl-es, rotation, sprite, mdpi

我正在阅读一本名为《开始安卓游戏》的书。

在书中，它在 SpriteBatcher 类中有以下方法......

```
public void drawSprite(float x, float y, float width, float height, float angle, TextureRegion region) {
    float halfWidth = width / 2;
    float halfHeight = height / 2;

    float rad = angle * Vector2.TO_RADIANS;
    float cos = FloatMath.cos(rad);
    float sin = FloatMath.sin(rad);

    float x1 = -halfWidth * cos - (-halfHeight) * sin;
    float y1 = -halfWidth * sin + (-halfHeight) * cos;
    float x2 = halfWidth * cos - (-halfHeight) * sin;
    float y2 = halfWidth * sin + (-halfHeight) * cos;
    float x3 = halfWidth * cos - halfHeight * sin;
    float y3 = halfWidth * sin + halfHeight * cos;
    float x4 = -halfWidth * cos - halfHeight * sin;
    float y4 = -halfWidth * sin + halfHeight * cos;

    x1 += x;
    y1 += y;
    x2 += x;
    y2 += y;
    x3 += x;
    y3 += y;
    x4 += x;
    y4 += y;

    verticesBuffer[bufferIndex++] = x1;
    verticesBuffer[bufferIndex++] = y1;
    verticesBuffer[bufferIndex++] = region.u1;
    verticesBuffer[bufferIndex++] = region.v2;

    verticesBuffer[bufferIndex++] = x2;
    verticesBuffer[bufferIndex++] = y2;
    verticesBuffer[bufferIndex++] = region.u2;
    verticesBuffer[bufferIndex++] = region.v2;

    verticesBuffer[bufferIndex++] = x3;
    verticesBuffer[bufferIndex++] = y3;
    verticesBuffer[bufferIndex++] = region.u2;
    verticesBuffer[bufferIndex++] = region.v1;

    verticesBuffer[bufferIndex++] = x4;
    verticesBuffer[bufferIndex++] = y4;
    verticesBuffer[bufferIndex++] = region.u1;
    verticesBuffer[bufferIndex++] = region.v1;

    numSprites++;
} 
```

**我的问题是如何平滑地旋转如下图所示的图像，以使图像中的线条看起来不像素化？**

我确实有正确尺寸和 DPI 的图像，并且在旋转之前看起来很棒，但是当它旋转时，线条的边缘看起来并不那么好。

![在此处输入图像描述](../Images/c742ff874d051041207f7b19f63d7ee2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:14:08.837

您可以尝试使用 LINEAR 采样而不是 NEAREST，尽管我很难在没有看到问题图片或看到纹理创建代码的情况下猜测更多。

# python - python：从压缩文本文件中读取行

> ID：10566558
> 
> 赞同：84
> 
> 时间：2012-05-12T19:02:49.947
> 
> 标签：python, large-files, compression

使用python从gz压缩的文本文件中读取一行而不完全提取文件是否容易？我有一个大约 200mb 的 text.gz 文件。当我提取它时，它变成了 7.4gb。这不是我必须阅读的唯一文件。对于整个过程，我必须阅读 10 个文件。虽然这将是一个连续的工作，但我认为在不提取整个信息的情况下这样做是一件明智的事情。我什至不知道这是可能的。如何使用python完成？我需要逐行阅读文本文件。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2015-06-16T12:54:05.150

使用[gzip.GzipFile](http://docs.python.org/library/gzip.html#gzip.GzipFile)：

```
import gzip

with gzip.open('input.gz','rt') as f:
    for line in f:
        print('got line', line) 
```

注意：`gzip.open(filename, mode)`是 的别名`gzip.GzipFile(filename, mode)`。我更喜欢前者，因为它看起来类似于`with open(...) as f:`用于打开未压缩文件。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-12T19:10:21.270

你可以在 python 中使用标准的 gzip 模块。只需使用：

```
gzip.open('myfile.gz') 
```

将文件作为任何其他文件打开并读取其行。

更多信息：[Python gzip 模块](http://docs.python.org/library/gzip.html)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-05-12T19:04:55.143

您是否尝试过使用[gzip.GzipFile](http://docs.python.org/library/gzip.html#gzip.GzipFile)？参数类似于`open`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-27T21:26:13.883

gzip 库（显然）使用`gzip`，这可能有点慢。[你可以通过系统调用pigz](https://zlib.net/pigz/)来加快速度， pigz是`gzip`. 缺点是您必须安装`pigz`，并且在运行过程中会占用更多内核，但速度更快且内存密集度不高。然后对文件的调用变为`os.popen('pigz -dc ' + filename)`而不是`gzip.open(filename,'rt')`. pigz 标志`-d`用于解压缩和`-c`stdout 输出，然后可以通过`os.popen`.

下面的代码接收一个文件和一个数字（1 或 2），并计算文件中具有不同调用的行数，同时测量代码所用的时间。在 中定义以下代码`unzip-file.py`：

```
#!/usr/bin/python
import os
import sys
import time
import gzip

def local_unzip(obj):
    t0 = time.time()
    count = 0
    with obj as f:
        for line in f:
            count += 1
    print(time.time() - t0, count)

r = sys.argv[1]
if sys.argv[2] == "1":
    local_unzip(gzip.open(r,'rt'))
else:
    local_unzip(os.popen('pigz -dc ' + r)) 
```

调用这些函数来`/usr/bin/time -f %M`测量 28G 文件上进程的最大内存使用量，我们得到：

```
$ /usr/bin/time -f %M ./unzip-file.py $file 1
(3037.2604110240936, 1223422024)
5116

$ /usr/bin/time -f %M ./unzip-file.py $file 2
(598.771901845932, 1223422024)
4996 
```

表明使用基本相同的最大内存，系统调用大约快五倍（10 分钟比 50 分钟）。还值得注意的是，根据您在文件中读取每行所做的操作可能不是限制因素，在这种情况下，您选择的选项无关紧要。

# java - 如何编写适合所需模式而不适合其他模式的正则表达式？

> ID：10566560
> 
> 赞同：0
> 
> 时间：2012-05-12T19:02:59.623
> 
> 标签：java, regex

我正在编写一个简化的 Java 编译器。我为变量名写了一个正则表达式：“(_?[a-zA-Z]+[\w]*)”

我想补充一点，名称不能是某些单词，例如 int、double、true、false...

我尝试使用 ^ ，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:13:50.310

它可以用 RE 来完成，但人类编写它并不容易。将关键字视为扫描器中的标识符，然后在标记器中区分标识符与关键字。这应该容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:03:54.470

我不认为这应该通过正则表达式来做到这一点，而是可以更好地使用 a`HashSet<String>`和 exclude 包含在集合中的标识符名称来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:29:38.363

^ 用于其他用途：

> ^ 可能出现在模式的开头，以要求匹配出现在一行的最开头。例如，^abc 匹配 abc123 但不匹配 123abc。

考虑使用 "(?!...)" ：

> (?!...) 是一个否定的前瞻，因为它要求指定的模式不存在。

我建议，如果不可能或太难，请改用真正的编码。有时，正则表达式可能比真正的优化代码慢得多，而且它们可能非常令人困惑，并且您可能很难找出您所写的内容有什么问题。

要尝试您的正则表达式，请查看以下内容：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

如需快速参考，请查看以下内容： [http ://www.autohotkey.com/docs/misc/RegEx-QuickRef.htm](http://www.autohotkey.com/docs/misc/RegEx-QuickRef.htm)

# javascript - Javascript 数组帮助（多维？）

> ID：10566566
> 
> 赞同：0
> 
> 时间：2012-05-12T19:03:36.827
> 
> 标签：javascript, xml, google-maps-api-3

我有一个从 XML 文件中提取数据的函数。我正在尝试将该数据存储在一个数组中，这样我就可以遍历该数组并对其进行过滤。因此，当数组中的“Time_of_Day”（来自下拉菜单）=“Time_of_Day”值时，我的数组将过滤。

现在我只需要帮助构建阵列。然后我将尝试了解如何遍历它并找到“Time_of_Day”的值。

这是我从 XML 文件中提取数据的函数。现在我的数组只存储名称值（主要是因为我不知道我在做什么）。

```
var markerfilter = new Array();
MYMAP.placeMarkers = function(filename) {
$.get(filename, function(xml){
    $(xml).find("marker").each(function(){
        var name = $(this).find('name').text();
        var address = $(this).find('address').text();
        var address2 = $(this).find('address2').text();
        var Meeting_Type = $(this).find('Meeting_Type').text();
        var Time_of_Meeting = $(this).find('Time_of_Meeting').text();
        var Day_of_Meeting = $(this).find('Day_of_Meeting').text();
        var Open_Meeting = $(this).find('Open_Meeting').text();
        var Wheelchair = $(this).find('Wheelchair').text();
        var ASL = $(this).find('ASL').text();
        var Comments = $(this).find('Comments').text();
        markerfilter.push(name);

        var MeetingType = document.getElementById("Meeting_Type");
        var type = MeetingType.options[MeetingType.selectedIndex].text;
        var DayofMeeting = document.getElementById("Day_of_Meeting");
        var day = DayofMeeting.options[DayofMeeting.selectedIndex].text;
        var TimeofMeeting = document.getElementById("Time_of_Meeting");
        var time = TimeofMeeting.options[TimeofMeeting.selectedIndex].text;

        // create a new LatLng point for the marker
        var lat = $(this).find('lat').text();
        var lng = $(this).find('lng').text();
        var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));

        // extend the bounds to include the new point
        MYMAP.bounds.extend(point);

        var marker = new google.maps.Marker({
            position: point,
            map: MYMAP.map
        });

        var infoWindow = new google.maps.InfoWindow();
        var html='<b><u>'+name+'</b></u><br />'+address2+'<br />'+address+'<br />'+Meeting_Type+',&nbsp'+Time_of_Meeting+',&nbsp'+Day_of_Meeting+'<br />Open Meeting:&nbsp'+Open_Meeting+'<br />Wheelchair Accessible:&nbsp'+Wheelchair+'<br />ASL:&nbsp'+ASL+'<br />Comments:&nbsp'+Comments;
        google.maps.event.addListener(marker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(MYMAP.map, marker);
        });
        MYMAP.map.fitBounds(MYMAP.bounds);
        });
    });
} 
```

创建的 XML 文件如下所示：

```
<markers>
    <marker>
        <name>AA at Greek Food</name>
        <address>292 Danforth Avenue  Toronto, ON</address>
        <address2>Asteria</address2>
        <Meeting_Type>AA</Meeting_Type>
        <Time_of_Meeting>Late</Time_of_Meeting>
        <Day_of_Meeting>Wednesday</Day_of_Meeting>
        <Open_Meeting>Yes</Open_Meeting>
        <Wheelchair>Yes</Wheelchair>
        <ASL>Yes</ASL>
        <Comments>Greek food is good.</Comments>
        <lat>43.677322</lat>
        <lng>-79.353729</lng>
    </marker>
    <marker>
        <name>CA over Sushi</name>
        <address>18 Jane Street, Toronto, ON</address>
        <address2>ASA Sushi</address2>
        <Meeting_Type>CA</Meeting_Type>
        <Time_of_Meeting>Early</Time_of_Meeting>
        <Day_of_Meeting>Monday</Day_of_Meeting>
        <Open_Meeting>No</Open_Meeting><Wheelchair>Yes</Wheelchair>
        <ASL>No</ASL>
        <Comments>CA eating Sushi.</Comments>
        <lat>43.649773</lat>
        <lng>-79.484772</lng>
    </marker>
<markers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:24:30.640

你可能想做这样的事情：

```
$(xml).find("marker").each(function() {
    markerfilter.push({
        name: $(this).find("name").text(),
        address: $(this).find("address").text()
        // and so on
    });
});
console.log(markerfilter);​

// the markerfilter array will look like:
// 
// [
// {name: "name1", address: "address1", /*...*/},
// {name: "name2", address: "address2", /*...*/},
// .
// .
// .
// ] 
```

# 编辑

查看您的 XML，我认为创建这样的关联数组要容易得多：

```
$(xml).find("marker").each(function() {
    var markerdata = {};
    $(this).children().each(function() {
        markerdata[this.tagName] = $(this).text();
    });
    markerfilter.push(markerdata);
});
console.log(markerfilter); 
```

# [演示在这里](http://jsfiddle.net/salman/ypWHR/)

# php - Symfony2 控制器和 Javascript 参数传递

> ID：10566567
> 
> 赞同：1
> 
> 时间：2012-05-12T19:03:41.977
> 
> 标签：php, javascript, jquery, symfony

我正在使用 symfony2 开发应用程序。我想知道如何从控制器中的模板接收参数，因为我想将参数的值存储在数据库中。该参数将在模板内的 JavaScript 脚本中获取其值，并且必须在提交按钮时传递给控制器​​。这是脚本：

```
$("MatchedTag").click(function () 
 {
       $(this).toggleClass("highlight");

       var IdOfTag = this.id;  

 }); 
```

我想在控制器中接收的变量是 IdOfTag。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T07:46:58.437

在我们的应用程序中，我们使用两种方法。

# 第一种方法

第一种方法是在 twig 中创建“配置”文件，该文件将包含在标题中的某处。该文件包含脚本中需要的所有 JS 变量。这些变量的这些值是从控制器传递的。然后在“参数”文件的**树枝模板中，您只需将它们添加到适当的位置：**

```
 <script>
       myObj.var = "{{ var_from_controller }}";
   </script> 
```

# 第二种方法

另一种方法是将所需的变量放入 html 标签的附加自定义属性中。当我们需要采取某些路线时，我们通常会这样做。

```
 <p id="myDataHolder" data-src="{{ path('MyUserBundle_ajax_route') }}">blah</p> 
```

然后，在您的 JS 中，您只需解析该标签的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:08:11.200

您可以使用 AJAX 传递变量（查看[$.ajax](http://api.jquery.com/jQuery.ajax/)、[$.post](http://api.jquery.com/jQuery.post/)、[$.get](http://api.jquery.com/jQuery.get/) - jQuery）或添加隐藏输入字段以形成具有所需值的表单。

## 例子

如果您想使用 jQuery.ajax 传递`IdOfTag`给`/path/controller/tags`（例如），您的代码将如下所示：

```
$("MatchedTag").click(function () 
 {
       $(this).toggleClass("highlight");

       var IdOfTag = this.id;  
       $.ajax({
          url: "/path/controller/tags",
          type: "POST",
          data: { "tag_id" : idOfTag },
          success: function(data) {
             //(success) do something...
             //variable "data" contains data returned by the controller. 
          }
       });
}); 
```

然后在控制器中你可以`idOfTag`通过`$_POST["tag_id"]`

好看并检查上面的链接。

# javascript - 为 addClass/removeClass 提供持续时间

> ID：10566568
> 
> 赞同：2
> 
> 时间：2012-05-12T19:03:42.087
> 
> 标签：javascript, jquery, css, css-transitions

我正在尝试设置一些相同类的 add/removeClass 函数，具体取决于发生的情况。它可以工作，但问题是一个（绑定到 loadstart 的函数）需要与其他两个不同长度的持续时间，因此 put`transition-duration`不起作用。

我四处寻找方法，但他们没有工作。

CSS是

```
#MyT{
    height:786px;
    width:1024px;
    position:absolute;
    z-index:2;
    transition: opacity 1.0s linear;
    -webkit-transition: opacity 1s linear;
    margin-left:-8px; 
    margin-top:-16px;
}
.clear {
    opacity: 0;
} 
```

脚本是

```
 $('#myVid').bind("ended", function(){  
      $('#MyT').removeClass('clear');
    });

 $('#myVid').bind("loadstart", function(){          
      $('#MyT').removeClass('clear');
    });

 $('#myVid').bind("playing", function(){  
      $('#MyT').addClass('clear');
    }); 
```

我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:24:04.827

** 编辑：

尝试类似：`setTimeout("$('#MyT').removeClass('clear')", 500);`

. . . . . . . . . . . . . . . . . .

jQuery 的**延迟**函数可能对此有所帮助。

更多细节在这里：[http ://api.jquery.com/delay/](http://api.jquery.com/delay/)

# php - Yii 我想获取用户有权执行的所有操作

> ID：10566571
> 
> 赞同：1
> 
> 时间：2012-05-12T19:03:54.750
> 
> 标签：php, yii

如何取回我在 accessrules 函数中定义的操作

```
public function accessRules(){
    return array(
                 'allow',
                 'actions'=>array('create','update' ...),
                  ....
                 )
} 
```

我需要它们是出于显示原因，例如 if(in_array('create',$actions)) echo CHtml::link('link to create form') 或者可能类似于 if(user->isAutorizedToPerfoem('create')) .

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:03:18.287

我认为当您使用 accessControl 过滤器时这是不可能的。在这种情况下，授权数据直接保存在控制器中，因此从技术上讲，您必须在控制器中才能看到 accessRules()。据我所知，您无法手动检查访问权限。过滤器在那里工作。您可以通过调用 $this->accessRules 查看访问规则，但是您必须在控制器中。

您可能必须使用 RBAC 并在外部保存您的访问规则。阅读这里了解更多信息：[Yii 文档 - 基于角色的访问控制](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control)

还有一个非常强大的 Yii 扩展，叫做 Rights，它为 RBAC 提供了一个后端。

目前这似乎有点矫枉过正，但 RBAC 的灵活性无与伦比。如果您使用它，您可以检查访问权限，如`Yii::app->user->checkAccess('post.create')`，以及许多其他内容。

# java - 带有嵌入斜杠的奇怪文件名 - Mac/Windows 冲突

> ID：10566576
> 
> 赞同：1
> 
> 时间：2012-05-12T19:04:46.670
> 
> 标签：java, windows, macos, zip, filenames

这周我写了一些代码来生成 zip 文件，并尝试在 Windows 和 Mac 机器上使用它。Mac 工作正常（它是在考虑 Mac 的情况下编写的），但 Windows 不那么好。生成的 zip 文件在我的 Mac 上打开时，包含如下所示的单级文件：

![通过 Mac 查看的文件名。](../Images/63b13cd7380618e4c2f90432b2fc2dab.png)

而不是 flash_out/assets 等预期的嵌套文件系统。我并不十分关心如何修复生成这些文件的代码，但我更关心修复这些特定文件，以便我可以在我的 mac 上编译它们。就目前而言，我不能使用这些。

奇怪的是，在 Windows 机器上打开这个 zip 确实将其解释为一系列包含文件的嵌套文件夹。但是将该文件系统压缩并将其发送回 Mac，问题仍然存在。我以前从未见过这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:51:06.667

假设您使用的是 bash shell，请 cd 进入包含乱码文件路径的文件夹，然后尝试以下操作：

```
for badfile in *\\*; do
    goodfile="${badfile//\\//}"
    mkdir -p "$(dirname "$goodfile")"
    mv "$badfile" "$goodfile"
done 
```

# javascript - jQuery将li附加到ul不可点击

> ID：10566579
> 
> 赞同：1
> 
> 时间：2012-05-12T19:05:23.910
> 
> 标签：javascript, jquery, html, sequential

我有[以下代码](http://jsfiddle.net/jackdent/3cKGb/)将数据添加到无序列表中。麻烦的代码如下：

```
$('li:not(:first-child)').click(function() {
    var clickedLi = this;
    $(this).parent().prepend(clickedLi);
    var selectedLi = $(this).text();
    alert(selectedLi);
 $(this).parent().parent().nextAll().children('ul').children().replaceWith('<li>Please select</li>');

    //ajax call
    var returnedData = "<li>Dataset1</li><li>Dataset2</li><li>Dataset3</li>";

    //populate next with returned data
    $(this).parent().parent().next().children('ul').append(returnedData);
});​ 
```

如果单击第一个 ul 中的一个选项，数据将添加到第二个 ul。但是，这个ul下的列表项是不可点击的，我需要它们是这样的，这样'链'才能继续。

错误在哪里？任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:10:35.297

尝试：（如果您使用 jQuery 大于 1.6.8。）

```
$(document).on('click','li:not(:first-child)',function() { 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:10:00.383

我可以假设，根据您的代码判断，您希望新添加的 li 继承您附加到现有行为的行为。不幸的是，它不能与以这种方式编写的代码一起使用。

您需要以“可观察”的方式附加单击事件，以便新添加到 dom 的元素将附加事件处理程序。

为此，您必须使用该`.on`方法。[您可以在此处](http://api.jquery.com/on/)查看其参考

# matrix - 在 Stata 中，如何按名称操作矩阵元素？

> ID：10566583
> 
> 赞同：0
> 
> 时间：2012-05-12T19:05:48.430
> 
> 标签：matrix, linear-algebra, matrix-multiplication, stata

在 Stata 中，在回归之后，我知道可以按名称调用存储结果的元素。例如，如果我想操作变量 的系数`precip`，我只需键入`_b[precip]`。我的问题是如何在`tabstat`命令之后执行相同的操作？例如，假设我想将系数乘以`precip`的样本均值`precip`：

```
 reg --variables in regression--
    tabstat --variables in regression--
    mat X=r(StatTotal)
    mat Y=_b[precip]*X[1,precip] 
```

啊，要是这么简单就好了。但是很可惜，在最后一行 X[1, precip] 是无效的语法。奇怪的是，Stata 确实承认`display X[1, precip]`. `precip`如果不是我使用`precip`出现在`X`向量中的列号， Stata 就会知道我要做什么。如果我只做一次这个操作，没问题。但是我需要多次执行此操作（对于几种不同的模型规格）以及将向量中的位置从一个模型更改为下一个模型的几个变量，所以我不能只使用列号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:55:08.030

我还不确定我是否完全理解你想要做什么，但这是我试图重现你正在做的事情：

```
 sysuse auto, clear
    regress price mpg foreign weight
    tabstat mpg foreign weight, save
    matrix X = r(StatTotal)
    matrix Y = _b[mpg]*X[1, colnumb(X, "mpg") ] 
```

如果您需要将其放入一个循环中，那也是可行的：

```
 matrix bb = e(b)
    local explvar : colnames bb
    foreach x in `explvar' {
      if "`x'" != "_cons" {
        matrix Y_`x' = _b[`x'] * X[1, colnumb(X, "`x'")]
      }
      else {
        matrix Y_`x' = _b[`x']
      }
    } 
```

您可能希望将其放入`program`您将在每次回归模型估计调用之后调用的，例如：

```
 program define reg2mat , prefix( name )

      if "`e(cmd)'" != "regress" {
        // this will intentionally produce an error
        regress
      }

      tempname bb

      matrix `bb' = e(b)
      local explvar : colnames `bb'
      foreach x in `explvar' {
        if "`x'" != "_cons" {
          matrix `prefix'_`x' = _b[`x'] * X[1, colnumb(X, "`x'")]
        }
        else {
          matrix `prefix'_`x' = _b[`x']
        }
      }
    end // of reg2mat 
```

在许多层面上，它并不理想，因为它使用 Stata 内存中的（全局）矩阵进行操作；大多数时候，这是一个坏主意，因为程序应该只使用它们本地的对象进行操作。

我怀疑您想要做的事情是以一种或另一种方式通过无所不能的`margins`命令，或通过适当的`predict`，或`matrix score`（这是 的低级版本`predict`）来解决的。仅当您的回归量是正交的时，将影响归因于变量才有意义，这仅发生在精心设计和进行的实验中。

# php - 使用 ZeroMQ 和 PHP 创建 TCP 管道架构？

> ID：10566585
> 
> 赞同：0
> 
> 时间：2012-05-12T19:06:21.133
> 
> 标签：php, zeromq

在看到 ZeroMQ 是 Ian Barber 的答案 (http://vimeo.com/20605470) 之后，我对测试他提出的管道模式感到很兴奋。但是，他使用了一个 IPC 示例：[https ://github.com/ianbarber/ZeroMQ-Talk/tree/master/worker](https://github.com/ianbarber/ZeroMQ-Talk/tree/master/worker)

这应该如何与 TCP 一起工作？我如何通过 TCP 而不是进程分叉来实例化工作人员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:08:30.397

它看起来几乎完全一样，但不是使用`ipc://`套接字名称，而是使用`tcp://`套接字名称。所以代替这个：

```
$work->bind("ipc:///tmp/work");
$ctrl->bind("ipc:///tmp/control"); 
```

你可能有这个：

```
$work->bind("tcp://*:8080");
$ctrl->bind("tcp://*:8081"); 
```

这有`work`监听端口`8080`的套接字和监听端口的`ctrl`套接字`8081`。您的`connect`操作将类似于：

```
$work->connect("tcp://1.2.3.4:8080"); 
```

（假设您的服务器的 IP 地址是`1.2.3.4`）。

# python - 关于 Python CSV 格式的建议

> ID：10566586
> 
> 赞同：2
> 
> 时间：2012-05-12T19:06:26.013
> 
> 标签：python, python-3.x

我编写了一个代码来执行一些简单的 csv 格式，但我知道它并没有它可能的那么好。

**这是输入**

```
1,a
1,b
1,c
2,d
2,e
3,a
3,d
3,e
3,f 
```

**这是我想要的输出**

```
['1','a','b','c']
['2','d','e']
['3','a','d','e','f'] 
```

**这是我写的代码**

```
import csv
input = csv.reader(open('book1.csv'))
output = open('output.csv', 'w')
job=[0,0]
for row in input:
    if row[0] == job[1]:
        job.append(row[1])
    else:
        print(job)
        #output.write(",".join(job))
        job[1] = row[0]
        job = [job[0], job[1]]
        job.append(row[1]) 
```

这是输出

```
[0,0]
[0, '1', 'a', 'b', 'c']
[0, '2', 'd', 'e'] 
```

**我的问题如下**

如何完成该行的 else 语句？另外，我怎样才能摆脱添加 0 作为集合中的第零个元素。我还希望代码输出最后一个“作业”集。最后，有人对改进此代码有任何建议吗？

我问是因为我想在编写代码方面做得更好，而不是仅仅将代码拼凑在一起。任何回应将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:29:47.093

您要做的是将第二列按第一列分组。Python为此提供了一个工具[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
groups = itertools.groupby(input, key=operator.itemgetter(0)) 
```

是产生`(key, group)`元组的迭代器，其中`key`是行中的第一项，每个`group`是组中行的迭代器。

[`operator.itemgetter`](http://docs.python.org/library/operator.html#operator.itemgetter)`[]`与语法 做同样的事情——获取指定的项目。`operator.itemgetter(0)`是相同的：

```
def itemgetter_0(seq_or_mapping):
    return seq_or_mapping[0] 
```

要提取值并创建列表，您可以：

```
output = [[key] + map(operator.itemgetter(1), group) for key, group in groups] 
```

它以 开头每个列表，`key`然后从每行中提取第二项并将它们添加到列表中。

对于您的示例输入，输出将是：

```
[['1', 'a', 'b', 'c'], ['2', 'd', 'e'], ['3', 'a', 'd', 'e', 'f']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:17:11.093

为了“在编写代码方面做得更好”，您需要能够编写和理解基本代码，以及知道如何拨打快递`groupby`或其他任何东西。

尝试回答您提出的实际问题，以下是使您的代码正常工作所需的最小更改：

```
import csv
input = csv.reader(open('book1.csv'))
output = open('output.csv', 'w')
job = []
for row in input:
    if not job: # first row in input file
        job = row
    elif row[0] == job[0]:
        job.append(row[1])
    else:
        print(job)
        #output.write(",".join(job))
        job = row
if job: # emit the last job (if any)
    print(job) 
```

# objective-c - 从 Dropbox 下载文件并保存到路径

> ID：10566587
> 
> 赞同：3
> 
> 时间：2012-05-12T19:06:27.667
> 
> 标签：objective-c, xcode

我正在尝试通过以下方式从保管箱中保存文件：

```
NSString *fileName = [NSString stringWithFormat:@"/newFile.json"];
// Do any additional setup after loading the view, typically from a nib.

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString* path2 = [documentsDirectory stringByAppendingPathComponent: 
                  [NSString stringWithFormat:@"%@", fileName]];

[[self restClient] loadFile:fileName intoPath:path2]; 
```

该文件位于 apps/appname/sandbox/newFile.json 下

但我收到此错误：

2012-05-12 21:05:46.824 快速作业和业务 [934:707] [警告] DropboxSDK：向 /1/files/sandbox/newFile.json 发出错误请求 - 找不到文件

但是文件在那里！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:11:58.293

我发现为了访问所有的保管箱文件夹，即使在沙箱文件夹中，您的应用也需要设置为“完全保管箱访问”，否则会出现此错误。这个问题只有在尝试从 Dropbox 下载时才会出现，而不是在上传或在 UITableView 中加载元数据时出现。

# c++ - 通过引用方法传递对象

> ID：10566590
> 
> 赞同：1
> 
> 时间：2012-05-12T19:06:50.383
> 
> 标签：c++, object, reference

我认为我做的错误很愚蠢，但我不知道我做错了什么。我有一个包含静态和非静态变量以及一些方法的类，它们都是公共的。在我的程序中，我想创建一个对象并通过引用将此对象传递给通用方法。

该程序无法编译，编译器会抛出非常奇怪的错误消息。

> 架构 x86_64 的未定义符号：“prueba::num”，引用自：ccbRZYqe.o 中的 _main ccbRZYqe.o 中的metodoC(prueba*) ccbRZYqe.o 中的prueba::prueba() “prueba::flag”，引用自：ccbRZYqe.o 中的 medoC(prueba*) collect2: ld 返回 1 个退出状态

代码

```
#include <iostream>

using namespace std;

class prueba
{
    private:
    public:
        static bool flag;
        static int num;
        float complejo;

        // Metodos
        //--------------
        prueba()
        {
            flag = false;
            num = 0;
            complejo = 0.0; 
        }

        void inicio()
        {
            flag = true;
            num = 5;
            complejo = 3.2;
        }

        bool cambio()
        {
            flag++;
            num++;
            complejo++;
        }
};

bool metodoC(prueba* ensayo)
{
    cout << "-----------------------------------------" << endl;
    cout << "- flag: " << ensayo->flag << endl;
    cout << "- num: " << ensayo->num << endl;
    cout << "- Complejo: " << ensayo->complejo << endl;
    cout << "-----------------------------------------" << endl;

    return true;
}

//-----------------------------------
//      M   A   I   N
//-----------------------------------
int main(int argc, char *argv[]) 
{
    prueba test;

    test.inicio();

    test.num += 2;
    test.complejo += 5.2;

    metodoC( &test );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T19:10:47.853

您需要定义静态成员。它们只是被声明的。

```
class prueba {
  // as before
}; 
```

并在**实现文件**中：

```
bool prueba::flag=false;
int prueba::num=0; 
```

请注意，您不应将定义放在标题中，因为您将获得每个翻译单元的静态定义。您需要将它们放在一个实现文件中，然后使用该文件来制作客户端可以构建的单个目标文件。

不过要小心，每次实例化一个新`prueba`对象时，都会重置构造函数中的静态成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:16:23.200

类中的静态成员应在类内声明，但在类外定义

```
 `bool prueba::flag=false;`
       int prueba::num=0;` 
```

在类之后添加这些并从构造函数中删除它们的定义。

它会为你工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:13:06.013

我认为错误是因为 prueba 中的 num 值被声明为静态，因此通过以下方式访问它： test.num 将不起作用，这就是该值未定义的原因。

如果将其更改为 prueba::num += 2; 它应该可以正常工作，还可以添加适当的初始化程序：

```
bool prueba::flag = false;
int prueba::num = 0; 
```

# c++ - 具有可变大小和可变类型的 c++ 容器

> ID：10566594
> 
> 赞同：0
> 
> 时间：2012-05-12T19:07:47.203
> 
> 标签：c++, list, struct

我正在尝试创建类似列表的内容。但是，列表的不同实例可能具有不同数量的条目，并且条目的类型基于用户给出的输入。例如，用户声明他们希望列表中每个条目的结构包含一个 int id、一个 std::string 名称、一个双精度指标 A 和一个长指标 B。基于此输入，创建以下内容：

```
struct some_struct {
    int id;
    std::string name;
    double metricA;
    long metricB;
}

list<some_struct> some_list; 
```

用户输入可以从文件中读取，在屏幕上输入等。此外，它们是 some_struct 中可变数量的条目。换句话说，它可能有上面列出的条目，它可能只有 2 个，或者它可能有 10 个完全不同的条目。有没有办法创建这样的结构？

此外，必须能够将比较运算符应用于 some_struct 的每个成员。我可以使用 boost::any 来存储数据，但这会给比较运算符带来问题，并且会产生比理想情况更多的开销。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:33:13.723

C++ 是一种强类型语言，这意味着您必须*声明*您的数据结构类型。为此，您不能声明`struct`具有任意数量或类型的成员，它们必须预先知道。

当然，现在有一些方法可以在 C++ 中处理此类问题。仅举几例：

*   使用映射（或`std::map`或`std::unordered_map`）来创建“表”而不是结构。将字符串映射到字符串，即名称到值的字符串表示形式，并将它们解释为您的心。
*   使用预先罐装的变体类型，例如`boost::any`.
*   使用*多态性*- 将指向基址的指针存储在列表中，并在值上调用虚拟机制调度操作。
*   为您的输入*语言*创建一个*类型系统*。然后有每种类型的值表，并从列表中指向适当的表。

 *可能有与 C++ 程序员一样多的其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:37:10.340

有很多方法可以解决具有不同成员的数据结构问题，而最好的方法很大程度上取决于它的使用方式。

最明显的是使用继承。您从基类中获得所有可能性：

```
struct base_struct { 
    int id;
    std::string name;
};

list<base_struct*> some_list;

struct some_struct : public base_struct {
    double metricA;
};

struct some_other_struct : public base_struct {
    int metricB;
};

base_struct *s1 = new some_struct;
s1->id = 1;
// etc

base_struct *s2 = new some__other_struct;
s2->id = 2;
// etc

some_list.push_back(s1);
some_list.push_back(s2); 
```

棘手的一点是，您必须确保当您取出元素时，您的大小写正确。 `dynamic_cast`可以以类型安全的方式执行此操作：

```
some_struct* ss = dynamic_cast<some_struct*>(some_list.front()); 
```

您可以使用以下方式在投射之前查询名称`type_info`：

```
typeid(*some_list.front()).name(); 
```

请注意，这两者都需要使用 RTTI 构建，这通常是可以的，但并非总是如此，因为 RTTI 会降低性能并且会增加内存占用，尤其是在广泛使用模板的情况下。

[在之前的项目中，我们使用boost any](http://www.boost.org/doc/libs/1_49_0/doc/html/any.html)处理过类似的事情。的优点`any`是它允许您混合不是从彼此派生的类型。回想起来，我不确定我是否会再次这样做，因为它使代码在运行时有点太容易失败，因为类型检查被推迟到那时。（这种`dynamic_cast`方法也是如此。

在糟糕的旧 C 时代，我们用 a 解决了同样的问题`union`：

```
struct base_struct {
    int id;
    std::string name;
    union {  // metricA and metricB share memory and only one is ever valid
        double metricA;
        int metricB;
    };
}; 
```

同样，您有一个问题，您必须自己处理确保它是正确的类型。

在 STL 之前的时代，许多容器系统被编写为采用`void*`，再次要求用户知道何时进行转换。从理论上讲，您仍然可以通过说`list<void*>`但您无法查询类型来做到这一点。

编辑：永远不要*使用*这种`void*`方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:35:41.073

我最终使用了一个带有 boost::variant 的列表。性能远好于使用 boost::any。它是这样的：

```
#include <boost/variant/variant.hpp>
#include <list>

typedef boost::variant< short, int, long, long long, double, string > flex; 
typedef pair<string, flex> flex_pair;
typedef list< flex_pair > row_entry;

list< row_entry > all_records; 
```*

# php - 如何提高 Zend Lucene 的性能？

> ID：10566595
> 
> 赞同：3
> 
> 时间：2012-05-12T19:07:51.600
> 
> 标签：php, zend-framework, lucene, full-text-search, zend-search-lucene

我目前正在努力加快我的[Zend Lucene](http://framework.zend.com/manual/en/zend.search.lucene.html)索引。它包含大约 100 万份文档。在某些情况下，搜索它最多需要 0.4 秒。这是不可接受的。我希望它可以在最多 0.1 秒内返回结果。

该文档不包含有关引擎性能问题的任何信息，除非它说引擎具有良好的可扩展性。我唯一学到的是使用`optimize()`方法的可能性。然而，这还不够。因此，我有两个问题：

1.  添加到每一行（文档）的字段顺序是否重要（就性能而言）？

2.  我可以使用任何其他参数来加速它吗？也许它可能是一些用于索引的参数或一些服务器设置（更多内存等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T19:20:05.347

我建议迁移到真正的 Lucene（或 Solr）以获得更好的性能。

否则，请尝试减少您存储和/或索引的字段数量。也许在您的网络服务器进程上运行 ulimit 以释放更多内存。

# php - Magento-当我在管理面板中按 SKU 对产品进行排序时出错

> ID：10566597
> 
> 赞同：1
> 
> 时间：2012-05-12T19:07:56.250
> 
> 标签：php, mysql, magento-1.6

当我按 SKU 对管理员面板中的产品进行排序时，出现此错误

```
a:5:{i:0;s:845:"SELECT `e`.*, `at_qty`.`qty`, `at_status`.`value` AS `status`, `at_visibility`.`value` AS `visibility`, `at_sku`.`value` AS `sku` FROM `catalog_product_entity` AS `e`
 LEFT JOIN `cataloginventory_stock_item` AS `at_qty` ON (at_qty.`product_id`=e.entity_id) AND (at_qty.stock_id=1)
 INNER JOIN `catalog_product_entity_int` AS `at_status` ON (`at_status`.`entity_id` = `e`.`entity_id`) AND (`at_status`.`attribute_id` = '89') AND (`at_status`.`store_id` = 0)
 INNER JOIN `catalog_product_entity_int` AS `at_visibility` ON (`at_visibility`.`entity_id` = `e`.`entity_id`) AND (`at_visibility`.`attribute_id` = '95') AND (`at_visibility`.`store_id` = 0)
 LEFT JOIN `catalog_product_entity_varchar` AS `at_sku` ON (`at_sku`.`entity_id` = `e`.`entity_id`) AND (`at_sku`.`attribute_id` = '68') AND (`at_sku`.`store_id` = 0) ORDER BY `sku` ASC LIMIT 20

";i:1;s:3310:"#0 C:\xampp\htdocs\homelicious\lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 C:\xampp\htdocs\homelicious\lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 C:\xampp\htdocs\homelicious\lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 C:\xampp\htdocs\homelicious\lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `e`.*, `...', Array)
#4 C:\xampp\htdocs\homelicious\lib\Varien\Db\Adapter\Pdo\Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `e`.*, `...', Array)
#5 C:\xampp\htdocs\homelicious\lib\Zend\Db\Adapter\Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query('SELECT `e`.*, `...', Array)
#6 C:\xampp\htdocs\homelicious\lib\Varien\Data\Collection\Db.php(687): Zend_Db_Adapter_Abstract->fetchAll('SELECT `e`.*, `...', Array)
#7 C:\xampp\htdocs\homelicious\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(1045): Varien_Data_Collection_Db->_fetchAll('SELECT `e`.*, `...')
#8 C:\xampp\htdocs\homelicious\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(869): Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false)
#9 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(526): Mage_Eav_Model_Entity_Collection_Abstract->load()
#10 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Catalog\Product\Grid.php(90): Mage_Adminhtml_Block_Widget_Grid->_prepareCollection()
#11 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(618): Mage_Adminhtml_Block_Catalog_Product_Grid->_prepareCollection()
#12 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(624): Mage_Adminhtml_Block_Widget_Grid->_prepareGrid()
#13 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(862): Mage_Adminhtml_Block_Widget_Grid->_beforeToHtml()
#14 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Text\List.php(43): Mage_Core_Block_Abstract->toHtml()
#15 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#16 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Model\Layout.php(529): Mage_Core_Block_Abstract->toHtml()
#17 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Action.php(391): Mage_Core_Model_Layout->getOutput()
#18 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\controllers\Catalog\ProductController.php(296): Mage_Core_Controller_Varien_Action->renderLayout()
#19 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Action.php(420): Mage_Adminhtml_Catalog_ProductController->gridAction()
#20 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('grid')
#21 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#22 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Model\App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#23 C:\xampp\htdocs\homelicious\app\Mage.php(640): Mage_Core_Model_App->run(Array)
#24 C:\xampp\htdocs\homelicious\index.php(80): Mage::run('', 'store')
#25 {main}";s:3:"url";s:126:"/homelicious/index.php/admin/catalog_product/grid/key/836f4c761c6eeda64b95dd46d98ed6b0/sort/sku/dir/asc/?ajax=true&isAjax=true";s:11:"script_name";s:22:"/homelicious/index.php";s:4:"skin";s:5:"admin";} 
```

然后只有退出然后登录，我才能进入我的产品。

然后我拿这个

```
a:5:{i:0;s:845:"SELECT `e`.*, `at_qty`.`qty`, `at_status`.`value` AS `status`, `at_visibility`.`value` AS `visibility`, `at_sku`.`value` AS `sku` FROM `catalog_product_entity` AS `e`
 LEFT JOIN `cataloginventory_stock_item` AS `at_qty` ON (at_qty.`product_id`=e.entity_id) AND (at_qty.stock_id=1)
 INNER JOIN `catalog_product_entity_int` AS `at_status` ON (`at_status`.`entity_id` = `e`.`entity_id`) AND (`at_status`.`attribute_id` = '89') AND (`at_status`.`store_id` = 0)
 INNER JOIN `catalog_product_entity_int` AS `at_visibility` ON (`at_visibility`.`entity_id` = `e`.`entity_id`) AND (`at_visibility`.`attribute_id` = '95') AND (`at_visibility`.`store_id` = 0)
 LEFT JOIN `catalog_product_entity_varchar` AS `at_sku` ON (`at_sku`.`entity_id` = `e`.`entity_id`) AND (`at_sku`.`attribute_id` = '68') AND (`at_sku`.`store_id` = 0) ORDER BY `sku` ASC LIMIT 20

";i:1;s:5626:"#0 C:\xampp\htdocs\homelicious\lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 C:\xampp\htdocs\homelicious\lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 C:\xampp\htdocs\homelicious\lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 C:\xampp\htdocs\homelicious\lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `e`.*, `...', Array)
#4 C:\xampp\htdocs\homelicious\lib\Varien\Db\Adapter\Pdo\Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `e`.*, `...', Array)
#5 C:\xampp\htdocs\homelicious\lib\Zend\Db\Adapter\Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query('SELECT `e`.*, `...', Array)
#6 C:\xampp\htdocs\homelicious\lib\Varien\Data\Collection\Db.php(687): Zend_Db_Adapter_Abstract->fetchAll('SELECT `e`.*, `...', Array)
#7 C:\xampp\htdocs\homelicious\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(1045): Varien_Data_Collection_Db->_fetchAll('SELECT `e`.*, `...')
#8 C:\xampp\htdocs\homelicious\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(869): Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false)
#9 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(526): Mage_Eav_Model_Entity_Collection_Abstract->load()
#10 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Catalog\Product\Grid.php(90): Mage_Adminhtml_Block_Widget_Grid->_prepareCollection()
#11 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(618): Mage_Adminhtml_Block_Catalog_Product_Grid->_prepareCollection()
#12 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Grid.php(624): Mage_Adminhtml_Block_Widget_Grid->_prepareGrid()
#13 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(862): Mage_Adminhtml_Block_Widget_Grid->_beforeToHtml()
#14 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#15 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('grid', true)
#16 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Catalog\Product.php(79): Mage_Core_Block_Abstract->getChildHtml('grid')
#17 C:\xampp\htdocs\homelicious\app\design\adminhtml\default\default\template\catalog\product.phtml(46): Mage_Adminhtml_Block_Catalog_Product->getGridHtml()
#18 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
#19 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml\defau...')
#20 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#21 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Template.php(81): Mage_Core_Block_Template->_toHtml()
#22 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Widget\Container.php(308): Mage_Adminhtml_Block_Template->_toHtml()
#23 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Adminhtml_Block_Widget_Container->_toHtml()
#24 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Text\List.php(43): Mage_Core_Block_Abstract->toHtml()
#25 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#26 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#27 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#28 C:\xampp\htdocs\homelicious\app\design\adminhtml\default\default\template\page.phtml(74): Mage_Core_Block_Abstract->getChildHtml('content')
#29 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Template.php(241): include('C:\xampp\htdocs...')
#30 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml\defau...')
#31 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#32 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\Block\Template.php(81): Mage_Core_Block_Template->_toHtml()
#33 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Adminhtml_Block_Template->_toHtml()
#34 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Model\Layout.php(529): Mage_Core_Block_Abstract->toHtml()
#35 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Action.php(391): Mage_Core_Model_Layout->getOutput()
#36 C:\xampp\htdocs\homelicious\app\code\core\Mage\Adminhtml\controllers\Catalog\ProductController.php(180): Mage_Core_Controller_Varien_Action->renderLayout()
#37 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Action.php(420): Mage_Adminhtml_Catalog_ProductController->indexAction()
#38 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#39 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#40 C:\xampp\htdocs\homelicious\app\code\core\Mage\Core\Model\App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#41 C:\xampp\htdocs\homelicious\app\Mage.php(640): Mage_Core_Model_App->run(Array)
#42 C:\xampp\htdocs\homelicious\index.php(80): Mage::run('', 'store')
#43 {main}";s:3:"url";s:88:"/homelicious/index.php/admin/catalog_product/index/key/d7d0ed1358caec71a5669256178845c3/";s:11:"script_name";s:22:"/homelicious/index.php";s:4:"skin";s:5:"admin";} 
```

# javascript - 如何控制 ASP.NET Validator 控制客户端验证

> ID：10566599
> 
> 赞同：3
> 
> 时间：2012-05-12T19:08:09.073
> 
> 标签：javascript, asp.net, validation, requiredfieldvalidator

以下是运行以下代码后我的页面的输出：

我`ValidatorEnable`在我的情况下使用客户端验证（如果您知道更好的方法，请告诉我。）

我的问题是：

如屏幕截图所示，我有一个带有复选框和下拉列表的网格视图。

因此，如果用户选中该复选框，它会启用下拉列表以从中进行选择。如果用户单击提交按钮，它会验证并要求用户从下拉列表中选择任何选项。

问题：

但问题是：它验证所有行而不是我单击的行。

我如何强制验证用户在复选框上选中的特定行？

![在此处输入图像描述](../Images/d171bd97043834f8e66fcfcbe5ecec35.png)

```
 <asp:GridView ID="gv" runat="server" AutoGenerateColumns="False" DataKeyNames="Id" OnRowDataBound="gv_RowDataBound"
            EnableModelValidation="True">
            <Columns>
                <asp:BoundField DataField="ID" ControlStyle-Width="250px" HeaderText="ID" SortExpression="ID" />
                <asp:BoundField DataField="FirstName" ControlStyle-Width="250px" HeaderText="FirstName"
                    SortExpression="FirstName" />
                <asp:BoundField DataField="LastName" ControlStyle-Width="250px" HeaderText="LastName"
                    SortExpression="LastName" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:CheckBox ID="checkbox1" runat="server" />
                        <asp:DropDownList ID="ddl_PaymentMethod" runat="server">
                                    <asp:ListItem Value="-1">----</asp:ListItem>
                                    <asp:ListItem Value="0">Month</asp:ListItem>
                                    <asp:ListItem Value="1">At End</asp:ListItem>
                                    <asp:ListItem Value="2">At Travel</asp:ListItem>
                                </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="requiredDDL" runat="server" ControlToValidate="ddl_PaymentMethod"
                            ErrorMessage="Please select" InitialValue="-1" Display="Dynamic"></asp:RequiredFieldValidator>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Value">
                    <ItemTemplate>
                        <asp:TextBox ID="txt_Value" runat="server" Width="58px" Text="0"></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>

protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
 if (e.Row.RowType == DataControlRowType.DataRow)
 {
    CheckBox checkbox1 = (CheckBox)e.Row.FindControl("checkbox1");
    DropDownList ddl_PaymentMethod = (DropDownList)e.Row.FindControl("ddl_PaymentMethod");
    ddl_PaymentMethod.Attributes.Add("disabled", "disabled");

   checkbox1.Attributes.Add("onclick", "javascript:EnableCheckBox('" + ddl_PaymentMethod.ClientID + "','" + checkbox1.ClientID + "')"); 
 }
}

function EnableCheckBox(ddl, chk) {

  var ddl_PaymentMethod = document.getElementById(ddl);
  var _chkbox = document.getElementById(chk);
  if (_chkbox.checked) {
      ddl_PaymentMethod.disabled = false;
      validateCheckBox(ddl_PaymentMethod, true);
   }
   else { 
      ddl_PaymentMethod.disabled = true;
      validateCheckBox(ddl_PaymentMethod, false);
   }
}

function validateCheckBox(ddl, state) {
    ValidatorEnable(document.getElementById(ddl.id, state));             
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:42:21.923

让它为你工作...... gridview：

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="False" DataKeyNames="Id"  OnRowDataBound="gv_RowDataBound">
        <Columns>
            <asp:BoundField DataField="ID" ControlStyle-Width="250px" HeaderText="ID" SortExpression="ID" />
            <asp:BoundField DataField="FirstName" ControlStyle-Width="250px" HeaderText="FirstName"
                SortExpression="FirstName" />
            <asp:BoundField DataField="LastName" ControlStyle-Width="250px" HeaderText="LastName"
                SortExpression="LastName" />
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:CheckBox ID="checkbox1" runat="server" />
                    <asp:DropDownList ID="drpPaymentMethod" runat="server">
                                <asp:ListItem Value="-1">----</asp:ListItem>
                                <asp:ListItem Value="0">Month</asp:ListItem>
                                <asp:ListItem Value="1">At End</asp:ListItem>
                                <asp:ListItem Value="2">At Travel</asp:ListItem>
                            </asp:DropDownList>
                    <asp:RequiredFieldValidator ID="rfv" InitialValue="-1" ControlToValidate="drpPaymentMethod" Enabled="false" Display="Static" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>

                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Value">
                <ItemTemplate>
                    <asp:TextBox ID="txt_Value" runat="server" Width="58px" Text="0"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

CS：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            CheckBox checkbox1 = e.Row.FindControl("checkbox1") as CheckBox;
            RequiredFieldValidator rfv = e.Row.FindControl("rfv") as RequiredFieldValidator;
            DropDownList drpPaymentMethod = (DropDownList)e.Row.FindControl("drpPaymentMethod");
            // you can just pass "this" instead of "myDiv.ClientID" and get the ID from the DOM element
            checkbox1.Attributes.Add("onclick", "UpdateValidator('" + checkbox1.ClientID + "','" + drpPaymentMethod.ClientID + "','" + rfv.ClientID + "');");
            if (!checkbox1.Checked)
                drpPaymentMethod.Attributes.Add("disabled", "disabled");
        }
    } 
```

javascript:

```
function UpdateValidator(chkID, drpID, validatorid) {
        //enabling the validator only if the checkbox is checked
        var enableValidator = $("#" + chkID).is(":checked");

        if (enableValidator)
            $('#' + drpID).removeAttr('disabled');
        else
            $('#' + drpID).attr('disabled', 'disabled');

        var vv = $('#' + validatorid).val();

        ValidatorEnable(document.getElementById(validatorid), enableValidator);
    } 
```

# mongodb - 如何使用 c# 在 mongodb 中增加一个字段

> ID：10566602
> 
> 赞同：8
> 
> 时间：2012-05-12T19:08:41.740
> 
> 标签：mongodb, mongodb-.net-driver, 10gen-csharp-driver

认为这会很简单，但我的价值保持不变（0）。

我想做的是在用户收到他们尚未阅读的消息时增加我的 UnreadMessages 字段，然后在他们收到消息时减少它。所以我认为这样的代码会起作用：

```
var userHelper = new MongoHelper<User>();
//increment
userHelper.Collection.Update(Query.EQ("Id", userId.ToId()), Update.Inc("UnreadMessages", 1));
//decrement
userHelper.Collection.Update(Query.EQ("Id", userId.ToId()), Update.Inc("UnreadMessages", -1)); 
```

运行这些后，不会引发任何错误，但值也不会改变。不，我没有一个接一个地运行，因为上面的代码可以被解释:)

**更新**

这是我的助手类：

```
public class MongoHelper<T> : Sandbox.Services.IMongoHelper<T> where T : class
{
    public MongoCollection<T> Collection { get; private set; }

    public MongoHelper()
    {
        var con = new MongoConnectionStringBuilder(ConfigurationManager.ConnectionStrings["MongoDB"].ConnectionString);
        var server = MongoServer.Create(con);
        var db = server.GetDatabase(con.DatabaseName);
        Collection = db.GetCollection<T>(typeof(T).Name.ToLower());
    }
} 
```

多亏了特拉维斯的回答，我才能做到这一点：

```
MongoHelper<UserDocument> userHelper = new MongoHelper<UserDocument>();
            var user = userHelper.Collection.FindAndModify(Query.EQ("Username", "a"), SortBy.Null, Update.Inc("MessageCount", 1), true).GetModifiedDocumentAs<UserDocument>(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T12:16:27.817

不确定你的助手是做什么的。这是我使用的一个工作片段：

```
 var query = Query.And(Query.EQ("_id", keyName));
        var sortBy = SortBy.Null;
        var update = Update.Inc("KeyValue", adjustmentAmount);
        var result = collection.FindAndModify(query, sortBy, update, true); 
```

因此，“查询”查找文档，更新执行增量，FindAndModify 将它们放在一起并实际访问数据库。

# c# - C# 中的 Powershell 和交换

> ID：10566603
> 
> 赞同：3
> 
> 时间：2012-05-12T19:08:56.013
> 
> 标签：c#, powershell, exchange-server

我在 C# 中有以下代码，用于通过 powershell 连接交换。

以下代码可以正常工作，但是我还需要一个命令才能使用交换 cmdlet。

这是我现在拥有的代码。

```
Runspace runspace = System.Management.Automation.Runspaces.RunspaceFactory.CreateRunspace();
PowerShell powershell = PowerShell.Create();

PSCommand command = new PSCommand();
command.AddCommand("New-PSSession");
command.AddParameter("ConfigurationName", "Microsoft.Exchange");
command.AddParameter("ConnectionUri", new Uri("https://ps.outlook.com/powershell/"));
command.AddParameter("Credential", creds);
command.AddParameter("Authentication", "Basic");
command.AddParameter("AllowRedirection");

powershell.Commands = command;

try
{
    runspace.Open();
    powershell.Runspace = runspace;

    Collection<PSObject> commandResults = powershell.Invoke();

    StringBuilder sb = new StringBuilder();

    foreach (PSObject ps in commandResults)
    {
        sb.AppendLine(ps.ToString());
    }

    sb.AppendLine();

    lbl.Text += sb.ToString();
}
finally
{
    // dispose the runspace and enable garbage collection
    runspace.Dispose();
    runspace = null;
    // Finally dispose the powershell and set all variables to null to free
    // up any resources.
    powershell.Dispose();
    powershell = null;
} 
```

我的问题是我仍然需要运行第一个命令的输出`import-pssession $session`所在的命令。`$session`但是我不确定如何将该输出声明为变量 $session 或类似的东西：

```
 PSCommand command = new PSCommand();
 command.AddCommand("Import-PSSession");
 command.AddParameter("Session", #Not sure how to put session info which is what the first command produces into here.); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:25:33.463

您可以尝试使用创建远程运行空间来代替，下面给出了一个示例。您可以参考以下文章[http://msdn.microsoft.com/en-us/library/windows/desktop/ee706560(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706560%28v=vs.85%29.aspx)。

```
string schemaURI = "http://schemas.microsoft.com/powershell/Microsoft.Exchange";
Uri connectTo = new Uri("https://ps.outlook.com/powershell/");
PSCredential credential = new PSCredential(user,secureStringPassword ); // the password must be of type SecureString
WSManConnectionInfo connectionInfo = new WSManConnectionInfo(connectTo,schemaURI, credential);
connectionInfo.MaximumConnectionRedirectionCount = 5;
connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Basic;

try
{
    Runspace remoteRunspace = RunspaceFactory.CreateRunspace(connectionInfo);
    remoteRunspace.Open();
}
catch(Exception e)
{
    //Handle error 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:26:24.593

尝试以下技术网博客 [http://blogs.technet.com/b/exchange/archive/2009/11/02/3408653.aspx中的“使用本地运行空间的远程请求（编写远程类脚本）”部分](http://blogs.technet.com/b/exchange/archive/2009/11/02/3408653.aspx)

我相信你想要实现的是：

```
 // Set the runspace as a local variable on the runspace
    powershell = PowerShell.Create();
    command = new PSCommand();
    command.AddCommand("Set-Variable");
    command.AddParameter("Name", "ra");
    command.AddParameter("Value", result[0]);
    powershell.Commands = command;
    powershell.Runspace = runspace;
    powershell.Invoke(); 
```

其中 result[0] 是创建的第一个远程会话的结果。让我知道这是否有帮助。

# c# - 在 C# 中调用 System.Delegate 类对象

> ID：10566604
> 
> 赞同：7
> 
> 时间：2012-05-12T19:09:12.700
> 
> 标签：c#, delegates, invoke, late-binding

我正在尝试构建一个使用 System.ComponentModel.ISynchronizeInvoke 的对象，该对象具有以下方法：（除其他外）

```
 public object Invoke(Delegate method, object[] args) 
```

使用给定参数调用方法的最佳方法是什么？我可以用：

```
 public object Invoke(Delegate method, object[] args)
    {
        return method.DynamicInvoke(args);
    } 
```

但这是迟到的。我的直觉是，这是调用该方法的唯一方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:41:22.767

我认为它在逻辑上不可能是任何其他方式。委托可以封装任何签名的`method`方法（具有任何数量和类型的参数，以及任何类型的返回值或 void）。解析其签名并使用提供的参数调用它（在验证它们的数量和类型是否正确之后）的唯一方法是在运行时通过反射。

如果您没有实现`ISynchronizeInvoke`接口并且可以定义自己的方法，那么您可以将`method`参数限制为仅接受特定签名的方法委托；在这种情况下，您可以直接调用它们。

例如，要执行不带参数但有返回值的方法，您可以使用：

```
public TResult Invoke<TResult>(Func<TResult> method)
{
    return method();
} 
```

要执行一个接受三个参数且没有返回值的方法，您可以使用：

```
public void Invoke<T1,T2,T3>(Action<T1,T2,T3> method, T1 arg1, T2 arg2, T3 arg3)
{
    method(arg1, arg2, arg3);
} 
```

# html - Css 编码风格 - 选择器嵌套

> ID：10566605
> 
> 赞同：0
> 
> 时间：2012-05-12T19:09:23.143
> 
> 标签：html, css, coding-style

我正在努力建立一种可靠且响应迅速的编码风格。我的一般问题涉及样式化子类。我先举个例子：

```
 <div class="pageHeader">
        <div class="cnt">
            <div class="logo">
                <a href="#" title="logo">My Logo</a>
            </div> <!-- .logo-->
            <div class="menu">
            </div> <!-- .menu-->
        </div> <!-- .cnt-->
    </div><!-- .pageHeader --> 
```

我使用 pageContainer / pageHeader/ pageBody / pageFooter 表示法作为我的主页结构。那么问题来了：我应该如何编写特定的选择器，例如 .logo ？我应该使用哪种表示法以及为什么：

```
.pageHeader .cnt .logo a {}
.pageHeader .logo a {}
.cnt logo a{}
.logo a{} 
```

显然，如果您在这种情况下对符号有更好的想法，请告诉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:14:20.833

2号线

```
.pageHeader .logo a {} 
```

原因是我不想担心在应用程序的其他地方重用通用类名，所以我想通过它的“组件”容器来限定所有内容。另一方面，我不想默认为最大特异性水平，这就是我不做第 1 行的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:24:05.977

在您提供的特定示例中，最好使用`#logo`and `#logoHref`id 选择器，因为它们将在整个页面中是唯一的。此外，最好尽可能使用子选择器（`.pageHeader > .cnt > .logo`），因为浏览器从右到左评估选择器，因此最好尽早切断 DOM 遍历。然而，这仅适用于具有大量元素/规则的大页面是完全合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:26:44.897

您应该尽可能使用最短的 CSS 选择器，该选择器足够具体以选择您想要的内容，但不要太模糊以至于可能会选择其他内容。

CSS 选择器从右到左读取，这意味着 .pageHeader .logo 会找到 .logo，然后读取 DOM 以确保 .pageHeader 的实例是父级，从而选择该 .logo 元素。但是如果您要使用 .pageHeader .cnt .logo，它会找到所有 .logo，然后确保 .cnt 是父级，然后检查 .pageHeader。.cnt 检查是不必要的（这通常取决于您的标记，但希望您明白）

更好的是，为您的徽标提供一个 ID (#logo)，然后使用 #logo 选择它。ID 的性能更高，其次是类，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T19:16:15.720

如果我的意图正确，我认为[SASS](http://sass-lang.com/)将为您提供更好的服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T19:24:18.237

首先在 html5 中存在 web 语义，您可以使用 tag , , , 最好使用它而不是 class 或 id pageHeader、pageFooter 等。

第一个、第三个和第四个选项效果很好。

我建议将 id="logo" 更改为 class="logo" 并使用：

```
#logo a {} 
```

因为徽标在所有 html 代码中肯定是唯一的。

# php - 从表单运行函数

> ID：10566607
> 
> 赞同：-1
> 
> 时间：2012-05-12T19:09:57.210
> 
> 标签：php

我想在表单中添加一个函数，所以当点击提交按钮时，会执行一个函数而不是离开页面。

而且我不能使用 $_POST，因为我需要 url。

这是我的脚本：

```
function submitclicked()
    {
    echo 'Hello World'; 

    }
    <form action="" method="post" id="TransactionAddForm">
    <input type="hidden" id="TransactionAccountID" value="'.$zpid.'" name="data[Transaction][account_id]">
    <input type="hidden" id="TransactionAmount" value="'.$_POST['price'].'" name="data[Transaction][amount]">
    <input type="hidden" id="TransactionDesc" value="'.$desc.'" name="data[Transaction][desc]">
    <input type="hidden" id="TransactionRedirectUrl" value="'.$backurl.'" name="data[Transaction][redirect_url]">
    <div class="submit"><input type="image" src="http://www.zarinpal.com/img/merchant/merchant-6.png" ></div>
    </form>; 
```

Tnx 为您提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:13:06.090

你的基本理解是有缺陷的。PHP 是一种服务器端语言，也就是说，它运行在服务器端。它无法捕获按钮点击或浏览器事件。它只能处理从客户端到服务器的请求。

您的函数只能在表单提交到服务器**后运行。**

对于您的问题，请使用 JavaScript。

此外，您在这里拥有的不是表格。用户在此处没有可供选择的表单控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:12:22.460

`return false;`在提交时调用的函数末尾添加一个。这样，表单将不会被提交。您还可以添加一个简单的按钮，它是 type `button`，而不是 type `submit`。这些按钮也不会提交表单。

-- 编辑 -- 我假设您想在单击提交按钮时调用 JavaScript 函数。任何 PHP 当然是服务器端的......

# jquery - jquery检查是否检查了收音机或是否正在检查

> ID：10566610
> 
> 赞同：-2
> 
> 时间：2012-05-12T19:10:34.127
> 
> 标签：jquery

```
<input type="text" id="textbox">
<input type="radio" id="radio1" name="on">
<input type="radio" id="radio2" name="off"> 
```

只有在选择＃Radio1（第一次Pageload）时，才需要显示#TextBox。或者在第一页加载时选择#radio2，并且用户单击#radio2，文本框也应该显示。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:12:53.753

如果我得到你想要的正确：

```
$(function(){
    if ($('#radio1').is(':checked')){ // if the radio1 is checked when the page
        alert($('#textbox').val());   //  was loaded, display textbox value
    }

    $('#radio2').click(function(){  // When the radio2 is clicked
        alert($('#textbox').val()); // show textbox value.
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:25:03.887

[演示](http://jsbin.com/izugob/edit#javascript,html,live)

```
if( $('input#radio1').is(':checked') ){
  $('#textbox').show();
}

$('input#radio1, input#radio2').on('change',function(){
   $('#textbox').show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:21:48.650

```
$(function(){
    $('#radio1').on('click', function() {
      if(this.checked) {
         $('#textbox').show();
      } else $('#textbox').hide();
    }).click();  // firing a initial click

    $('#radio2').on('click', function() {
         $('#textbox').show();
    });
}); 
```

# php - 使用 php 获取 xml 数据并将其打印到 div 时的空白页

> ID：10566615
> 
> 赞同：0
> 
> 时间：2012-05-12T19:10:53.107
> 
> 标签：php, xml, json, session, curl

我尝试在会话中将数据从 xml 提取到 php 并在 div 中打印，但它显示空白页.. 我尝试了不同的方式.. 下面是另一种打印方式，但结果仍然相同..

```
<?php
session_start();

$yql_base_url = "http://query.yahooapis.com/v1/public/yql";  
$yql_query = "select * from yahoo.finance.quotes where symbol in ('XAUUSD=X','XAGUSD=X','PLN12.NYM','PAK12.NYM','USDCAD=X')";  
$yql_query_url = $yql_base_url . "?q=" . urlencode($yql_query);
$yql_query_url .= "&env=http://datatables.org/alltables.env";
$yql_query_url .= "&format=json";
$session = curl_init($yql_query_url);  
curl_setopt($session, CURLOPT_RETURNTRANSFER,true);      
$json = curl_exec($session);
$phpObj =  json_decode($json);  
if(!is_null($phpObj->query->results)){  
}  
if(!is_null($phpObj->query->results)){  
    foreach($phpObj->query->results->quote as $quotes){  
        $quotes = $_SESSION[''];
        $_SESSION['Ask'] = $Ask;
        $_SESSION['Bid'] = $Bid;
        $_SESSION['AskRealtime'] = $AskRealtime;
        $_SESSION['BidRealtime'] = $BidRealtime;
        $_SESSION['LastTradeDate'] = $LastTradeDate;
        $_SESSION['LastTradePriceOnly'] = $LastTradePriceOnly;
        $_SESSION['LastTradeTime'] = $LastTradeTime;
  }  
}  
?>
<body>
<div>
<ul>
<li><?php echo $_SESSION['Ask'];?></li>
<li><?php echo $_SESSION['Bid'];?></li>
<li><?php echo $_SESSION['AskRealtime'];?></li>
<li><?php echo $_SESSION['BidRealtime'];?></li>
<li><?php echo $_SESSION['LastTradeDate'];?></li>
<li><?php echo $_SESSION['LastTradePriceOnly'];?></li>
<li><?php echo $_SESSION['LastTradeTime'];?></li>
</ul>
</div>
</body> 
```

有人可以建议吗

我什至尝试编辑“foreach($...

```
foreach($phpObj->query->results->quote as $quotes){  
        echo $quotes['Ask'];
        echo $quotes['Bid'];
        echo $quotes['AskRealtime'];
        echo $quotes['BidRealtime'];
        echo $quotes['LastTradeDate'];
        echo $quotes['LastTradePriceOnly'];
        echo $quotes['LastTradeTime'];
        } 
```

在此先感谢
XML 由 YQL 生成

```
<query yahoo:count="5" yahoo:created="2012-05-12T21:27:10Z" yahoo:lang="en-US">
<diagnostics>
<publiclyCallable>true</publiclyCallable>
<redirect from="http://datatables.org/alltables.env" status="301">http://www.datatables.org/alltables.env</redirect>
<url execution-start-time="404" execution-stop-time="830" execution-time="426" proxy="DEFAULT">http://datatables.org/alltables.env</url>
<url execution-start-time="846" execution-stop-time="1256" execution-time="410" proxy="DEFAULT">http://www.datatables.org/yahoo/finance/yahoo.finance.quotes.xml</url>
<url execution-start-time="1464" execution-stop-time="1465" execution-time="1" proxy="DEFAULT">http://download.finance.yahoo.com/d/quotes.csv?f=aa2bb2b3b4cc1c3c6c8dd1d2ee1e7e8e9ghjkg1g3g4g5g6ii5j1j3j4j5j6k1k2k4k5ll1l2l3mm2m3m4m5m6m7m8nn4opp1p2p5p6qrr1r2r5r6r7ss1s7t1t7t8vv1v7ww1w4xy&s=XAUUSD%3DX,XAGUSD%3DX,PLN12.NYM,PAK12.NYM,USDCAD%3DX</url>
<query execution-start-time="1262" execution-stop-time="1465" execution-time="203" params="{url=[http://download.finance.yahoo.com/d/quotes.csv?f=aa2bb2b3b4cc1c3c6c8dd1d2ee1e7e8e9ghjkg1g3g4g5g6ii5j1j3j4j5j6k1k2k4k5ll1l2l3mm2m3m4m5m6m7m8nn4opp1p2p5p6qrr1r2r5r6r7ss1s7t1t7t8vv1v7ww1w4xy&s=XAUUSD%3DX,XAGUSD%3DX,PLN12.NYM,PAK12.NYM,USDCAD%3DX]}">select * from csv where url=@url and columns='Ask,AverageDailyVolume,Bid,AskRealtime,BidRealtime,BookValue,Change&PercentChange,Change,Commission,ChangeRealtime,AfterHoursChangeRealtime,DividendShare,LastTradeDate,TradeDate,EarningsShare,ErrorIndicationreturnedforsymbolchangedinvalid,EPSEstimateCurrentYear,EPSEstimateNextYear,EPSEstimateNextQuarter,DaysLow,DaysHigh,YearLow,YearHigh,HoldingsGainPercent,AnnualizedGain,HoldingsGain,HoldingsGainPercentRealtime,HoldingsGainRealtime,MoreInfo,OrderBookRealtime,MarketCapitalization,MarketCapRealtime,EBITDA,ChangeFromYearLow,PercentChangeFromYearLow,LastTradeRealtimeWithTime,ChangePercentRealtime,ChangeFromYearHigh,PercebtChangeFromYearHigh,LastTradeWithTime,LastTradePriceOnly,HighLimit,LowLimit,DaysRange,DaysRangeRealtime,FiftydayMovingAverage,TwoHundreddayMovingAverage,ChangeFromTwoHundreddayMovingAverage,PercentChangeFromTwoHundreddayMovingAverage,ChangeFromFiftydayMovingAverage,PercentChangeFromFiftydayMovingAverage,Name,Notes,Open,PreviousClose,PricePaid,ChangeinPercent,PriceSales,PriceBook,ExDividendDate,PERatio,DividendPayDate,PERatioRealtime,PEGRatio,PriceEPSEstimateCurrentYear,PriceEPSEstimateNextYear,Symbol,SharesOwned,ShortRatio,LastTradeTime,TickerTrend,OneyrTargetPrice,Volume,HoldingsValue,HoldingsValueRealtime,YearRange,DaysValueChange,DaysValueChangeRealtime,StockExchange,DividendYield'</query>
<javascript execution-time="260" instructions-used="302744" table-name="yahoo.finance.quotes"/>
<warning>Unable to sort response according to field 'Ask,Bid,AskRealtime,BidRealtime,LastTradeDate,LastTradePriceOnly,LastTradeTime'.</warning>
<user-time>1525</user-time>
<service-time>837</service-time>
<build-version>27222</build-version>
</diagnostics>
<results>
<quote symbol="XAUUSD=X">
  <Bid>1585.30</Bid>
  <AskRealtime/>
  <BidRealtime/>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>1580.3002</LastTradePriceOnly>
  <LastTradeTime>5:15pm</LastTradeTime>
  <Ask>1575.30</Ask>
</quote>
<quote symbol="XAGUSD=X">
  <Bid/>
  <AskRealtime/>
  <BidRealtime/>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>28.858</LastTradePriceOnly>
  <LastTradeTime>5:39pm</LastTradeTime>
  <Ask/>
</quote>
<quote symbol="PLN12.NYM">
  <Bid/>
  <AskRealtime>1478.60</AskRealtime>
  <BidRealtime>1462.90</BidRealtime>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>1465.30</LastTradePriceOnly>
  <LastTradeTime>5:02pm</LastTradeTime>
  <Ask/>
</quote>
<quote symbol="PAK12.NYM">
  <Bid/>
  <AskRealtime>0.00</AskRealtime>
  <BidRealtime>0.00</BidRealtime>
  <LastTradeDate>3/23/2012</LastTradeDate>
  <LastTradePriceOnly>658.80</LastTradePriceOnly>
  <LastTradeTime>7:12am</LastTradeTime>
  <Ask/>
</quote>
<quote symbol="USDCAD=X">
  <Bid>1.0005</Bid>
  <AskRealtime/>
  <BidRealtime/>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>1.001</LastTradePriceOnly>
  <LastTradeTime>5:55pm</LastTradeTime>
  <Ask>1.0015</Ask>
</quote> 
```

我想从所有 <quote symbol=".." > 中获取所有 Ask、Bid、AskRealtime... 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:35:07.960

在 curl_init 之前添加这一行

```
$yql_query_url .= "&env=http://datatables.org/alltables.env"; 
```

如果这样做，返回的数据将被正确解析为 $phpObj。你现在得到一个空白页面的原因是因为你从未设置 $Ask、$Bid、$AskRealTime 等变量 - 但你将它们分配给你的会话变量。

要解决此问题，请删除此行：

```
$quotes = $_SESSION['']; 
```

并将以下每一行更改为：

```
$_SESSION['Ask'] = $quotes->Ask; 
```

我不明白您要做什么或您要如何存储数据-这些会话变量原样将在循环的每次迭代中被覆盖。不管怎样，那是你的事。我已经向您展示了如何正确提取数据。你可以弄清楚你想如何存储它。

# c# - C#，如何创建一个事件并在另一个类中监听它？

> ID：10566617
> 
> 赞同：3
> 
> 时间：2012-05-12T19:11:10.677
> 
> 标签：c#, winforms

我无法弄清楚如何做到这一点，这是示例代码。我想做的事。

```
public Class MainForm : Form
{
    MyUserControl MyControl = new MyUserControl;
    private void Button_Click(object sender, EventArgs e)
    {
        //Create MyEvent
    }    
}

public Class MyUserControl : UserControl
{
    //listen for MyEvent from MainForm, and perform MyMethod
    public void MyMethod()
    {
         //Do Stuff here
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:18:19.887

第 1 步）在 MainForm 上公开一个事件……比如说……

```
public event Action simpleEvent 
```

步骤 2) 为 MyUserControl 提供一个构造函数，该构造函数采用 MainForm 实例并将操作绑定到该事件

```
public MyUserControl(MainForm form) {
    form += () => Console.WriteLine("We're doing something!")
} 
```

步骤 3) 在 MainForm.Button_Click 中引发事件

```
if(simpleEvent != null) simpleEvent(); 
```

注意：您可以注册自己的委托并使用 lambda 表达式以外的东西。有关更详尽的解释，请参阅[http://msdn.microsoft.com/en-us/library/17sde2xt.aspx](http://msdn.microsoft.com/en-us/library/17sde2xt.aspx)

你的最终结果看起来像......

```
public Class MainForm : Form
{
    public event Action MyEvent;

    MyUserControl MyControl = new MyUserControl(this);
    private void Button_Click(object sender, EventArgs e)
    {
        if(simpleEvent != null) simpleEvent();
    }    
}

public Class MyUserControl : UserControl
{
    //listen for MyEvent from MainForm, and perform MyMethod
    public MyUserControl(MainForm form) {
        simpleEvent += () => MyMethod();
    }

    public void MyMethod()
    {
         //Do Stuff here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:17:52.827

这是如何委派私人成员的事件，以便外部可以收听它。

```
public event EventHandlerType EventHandlerName
{
    add
    {
        this._privateControl.EventHandlerName += value;
    }
    remove
    {
        this._privateControl.EventHandlerName -= value;            
    }
} 
```

另一种选择是在您的表单类中有一个事件：

```
public event EventHandler MyEvent; 
```

并监听私有成员的事件：

```
this._customControl.SomeEvent += this.SomeEventHandler; 
```

有了这个：

```
private void SomeEventHandler(object sender, EventArgs e)
{
    if (this.MyEvent != null)
    {
        this.MyEvent(this, e);
    }
} 
```

在这两种情况下，外部的用法是相同的：

```
var form = new Form1();

form1.MyEvent += (o, e) => { Console.WriteLine("Event called!"); }; 
```

底线是您必须在表单内实现功能以允许外部订阅/收听内部事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:29:17.657

```
//listen for MyEvent from MainForm, and perform MyMethod 
```

那是错误的方法。在控件中发布事件很有用，控件不可能猜到它将如何被使用。然而，它当然不应该*知道*任何关于可能以它被丢弃的形式可用或不可用的事件的任何信息。当表单（还）没有事件时，这有一个令人讨厌的习惯。坏的也是，设计时的崩溃会出现该死的白屏并阻止您解决问题。

表单不必猜测，它确切*地*知道它有什么控件。因此，您可能希望在表单中的任何位置引发事件，只需直接调用控件的 MyMethod 方法即可。如果由于某种原因这是错误的，例如删除控件而不是调用，那么您只会得到一个易于修复的编译错误。

# objective-c - uitableview 数组内容丢失

> ID：10566619
> 
> 赞同：0
> 
> 时间：2012-05-12T19:11:20.257
> 
> 标签：objective-c, arrays, uitableview

我有一个数组，它在页面加载时包含 200 个对象，我将这些（可变副本）复制到一个名为 filtersarray 的临时数组中，然后将其显示在 uitableview 中。这一切都很好:)

i then have a segment selector which when selected is supposed to filter my orginal array using a predictate and filteredarray will now hole the contents of the objects which meet the predictate criteria again from what i can see this is working fine :)

然后我尝试重新加载我的表格视图（再次使用过滤数组），当我单步执行时，过滤数组中的前几个对象似乎工作正常，但是如果这是正确的词，过滤数组似乎被“清空”，并且我的代码在之后崩溃表已开始刷新。我确定这一定是内存问题或其他问题。我对目标 c 很陌生，所以任何帮助都将不胜感激。我在下面列出了我的一些代码

```
- (void)viewDidLoad
{
[super viewDidLoad];    
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
filteredArray = [appDelegate.originalArray mutableCopy];    
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *cellidentifier = @"customcell";
customcell *cell = (customcell *)[tableView dequeueReusableCellWithIdentifier:
                                  cellidentifier];
array_details *arrayObj = [filteredArray objectAtIndex:indexPath.row];

// UITableViewCell cell needs creating for this UITableView row.
if (cell == nil)
{
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"customcell" owner:self options:nil];

    for (id currentObject in topLevelObjects) {
        if ([currentObject isKindOfClass:[customcell class]]) {
            cell = (customcell *) currentObject;
            break;
        }
    }
}

    cell.line1.text = arrayObj.line1;
    cell.line2.text = arrayObj.line2;
return cell;
}

-(IBAction)change_segment:(id)sender;{
if(segmentcontrol.selectedSegmentIndex == 2){
    filteredArray = [appDelegate.originalArray mutableCopy];      
    NSPredicate *testForTrue = [NSPredicate predicateWithFormat:@"selected == YES"];
    filteredArray = [filteredArray filteredArrayUsingPredicate:testForTrue]; 
}   

[my_table reloadData];  // its when i do this that the array filtered array seems to somehow get "emptied" 
```

并且我的过滤数组在 my.h 文件中声明为 nsmutable 数组

```
NSMutableArray *filteredArray; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:41:52.573

由于您有一个 NSMutableArray，我建议您使用`filterUsingPredicate:`而不是`filteredArrayUsingPredicate:`. 您开始使用的过滤数组被保留，因为您通过副本获得它，但您在`change_segment:`方法中替换它的不是。

（我**怀疑**这是问题所在，但崩溃的详细信息及其相关异常会使诊断更容易。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:46:03.440

保留你的数组。在 -dealloc 中释放它。

filtersArray = [appDelegate.originalArray mutableCopy]retain];

# c# - 如何在 ASP.NET 中将应用程序/八位字节流保存到 Sql Server

> ID：10566622
> 
> 赞同：0
> 
> 时间：2012-05-12T19:11:29.037
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc-3, sql-server-2008

我正在尝试在 ASP.NET MVC3 中使用 Ajax（Valums Ajax 文件上传）上传文件，我的代码适用于 IE，但不适用于 Firefox 或 Chrome，我为服务器端的应用程序/八位字节流，我该怎么做读取并将其转换为 byte[] 以便将它们保存在 DB 中？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:39:30.343

您可以将请求流读入 a`MemoryStream`然后从内存流中读取所有字节将为您提供`byte[]`

# java - 未设置休眠@onetomany FK

> ID：10566627
> 
> 赞同：0
> 
> 时间：2012-05-12T19:12:48.057
> 
> 标签：java, hibernate

我有 2 节课

```
@Entity 
@Table(name = "user")
public class User 
@Id
@Column(name = "id")
@GeneratedValue
private int id;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "user")
@Cascade({CascadeType.ALL})
private Collection<Book> userBooks;
}
@Entity 
@Table(name = "books")
public class Book
@Id
@Column(name = "id")
@GeneratedValue
private int id;

@ManyToOne
private User user;
} 
```

这里还有一些代码：

> ```
>  User user = new User();
>     user.setUserName("Gleeb");
>     user.setUserPassword("gleeb"); 
> ```

```
 Book book = new Book();
    book.setTitle("some book ");
    book.setbookType(1);
    user.addUserbook(book);

    userService.save(user); 
```

我正在尝试创建一个新用户并向其中添加一本新书。当我保存用户时

> session.saveOrUpdate(用户);

保存了用户，保存了书，但在书表中，未设置 user_id。并留空。

这是为什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:50:05.177

您没有显示您的代码，但连接表可能没有填充，因为您忘记初始化图书的用户字段。在双向关联中，所有者方是没有 mappedBy 属性的一方，JPA 使用这一方来了解关联是否存在。

# sqlite - 用于创建、设计和管理 (GUI) SQLite 的程序

> ID：10566634
> 
> 赞同：1
> 
> 时间：2012-05-12T19:13:37.753
> 
> 标签：sqlite

您知道哪些程序用于主题？快速谷歌搜索揭示了 2 个前卫：

1.  [sqlite-manager](http://code.google.com/p/sqlite-manager/)（Firefox 扩展）
    并非所有功能都可以通过 GUI 实现，但非常易于使用和开源。

2.  [SQLite Administrator](http://sqliteadmin.orbmu2k.de/)
    Screenshots 看起来很漂亮，但仅适用于 Win。

请告诉我您对程序的看法，而不仅仅是链接。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:20:58.960

好吧，我正在使用[Navicat Premium](http://www.navicat.com/)。它不是免费的，它需要花钱，但在使用多个数据库系统（包括 Sqlite）时，它是一个非常好的工具。它具有许多不错的功能，例如从一个窗口处理多个数据库，跨不同数据库导入/导出/同步数据和模式等。

还有 Navicat for SQLite，我认为它的成本更低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:42:49.887

我找到[了这张](http://www.sqlite.org/cvstrac/wiki?p=ManagementTools)表，可能这些信息对某人有帮助。

而这个问题是重复[的](https://stackoverflow.com/questions/505220/recommendation-for-sqlite-db-manager-application?rq=1)。正好赶上嘿嘿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-31T05:47:17.730

您可以尝试[SQLitespy](http://www.yunqa.de/delphi/doku.php/products/sqlitespy/index)。我发现它非常有用。它的 GUI 使探索、分析和操作 SQLite3 数据库变得非常容易。

# c++ - 带有元数据的 Lua 回调

> ID：10566635
> 
> 赞同：0
> 
> 时间：2012-05-12T19:13:47.913
> 
> 标签：c++, lua, luabind

我想在 Lua 中为脚本编写者设置几个函数，但是当调用这些函数时，我希望它们实际调用一个带有我定义的参数的函数。这可能看起来像：

卢阿：

```
 foo1()
    foo2() 
```

C++：

```
int myFunction( lua_State * context )
{
    int numArgs = lua_gettop( context );
    int topOfStack = -3;
    bool lightUserDataFlag = lua_islightuserdata( context, topOfStack );

    if( lightUserDataFlag )
    {
    }
} 
```

}

所以我对设置有点困惑。我正在尝试使用参数注册回调。这就是我到目前为止所拥有的，并且有些东西没有通过函数注册来保存参数；它似乎只保存我添加的最后一个参数。

```
void setupCallback()
{
    lua_register( context, "foo1", Callback);
    lua_pushlightuserdata( context, &value[0] );
    lua_register( context, "foo2", Callback);
    lua_pushlightuserdata( context, &value[1] );
} 
```

当 lua 调用我的回调时，我总是看到 value[1]，而不是 value[0]。我使用了注册回调然后添加表格的概念，但我不确定这会让我更进一步。

至于原因：我正在尝试抽象函数名称以使我们的 lua 程序员更容易编写代码，但这些只需要转换为相同的参数化函数。想想它通过传递一个参数来添加更改设置，但命名不同。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T19:20:54.437

您可能希望将这些上下文值附加为函数的上值。看看`lua_pushcclosure()`。

结合 Mickey Kawick 的评论：

```
int Callback (lua_State *context)
{
    int val= lua_tointeger( context, lua_upvalueindex(1) );
    cout << val << endl;
    ...
} 

void setup()
{
    lua_pushnumber( context, 3 );
    lua_pushcclosure( context, Callback, 1 );
    lua_setglobal( context, "foo1" );

    lua_pushnumber( context, 42 );
    lua_pushcclosure( context, Callback, 1 );
    lua_setglobal( context, "foo2" );
} 
```

# ruby-on-rails - Rails：使用参数/环境变量从 rake 任务调用邮件程序

> ID：10566640
> 
> 赞同：0
> 
> 时间：2012-05-12T19:14:30.667
> 
> 标签：ruby-on-rails, rake

使用这个 railscast [http://railscasts.com/episodes/127-rake-in-background?autoplay=true](http://railscasts.com/episodes/127-rake-in-background?autoplay=true)作为例子/灵感（即我不是试图实现 rails cast 代码，只是用它作为灵感） ，我试图将一个由 user.rb 模型中的 after_create 回调触发的邮件程序移动到一个 rake 任务中，这样它就会在后台运行。在我将它移入 rake 任务之前，邮件程序正在工作，但它不再工作了。

我没有从 User.rb 模型调用邮件程序，这是它最初的设置方式（参见 user.rb 中注释掉的代码），而是调用 rake 任务，然后调用 UserMailer.welcome_email 方法。

在原始代码中，“self”（来自 User.rb）作为参数提交给`welcome_email(user)`user_mailer.rb 中的方法。在我尝试将其转换为 rake 任务时，我将“self”分配给 USER_INSTANCE，它应该在 mailer.rake 中作为 ENV[“USER_INSTANCE”] 提取。railscast 也提出了这一点。

一路上的某个地方它不起作用。有任何想法吗？

用户.rb

```
 after_create :send_welcome_email

  def send_welcome_email
    system "rake :send_mailing USER_INSTANCE=self &"   #note the & forks the task
    #UserMailer.welcome_email(self).deliver  <-- how it was originally. 
  end 
```

邮件程序.rake

```
desc "Send mailing"
task :send_mailing => :environment do

 UserMailer.welcome_email(ENV["USER_INSTANCE"]).deliver  #moved from user.rb to here but now with environment variable instead of parameter
end 
```

未更改 User_mailer.rb

```
 class UserMailer < ActionMailer::Base
  default :from => "blahblah@gmail.com"

  def welcome_email(user)
    mail(:to => user.email, :subject => "Invitation Request Received")
  end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:57:34.200

目前你正在这样做

`system "rake :send_mailing USER_INSTANCE=self &"`

这与转到命令行并键入相同

`rake :send_mailing USER_INSTANCE=self &`

self 只是一个文字字符串，我认为您要做的是

`system "rake :send_mailing USER_INSTANCE=#{self} &"`

但这最终将等同于在命令行上运行它

`rake :send_mailing USER_INSTANCE=<User::xxxxx>`

rake 不会将其序列化到您的 User ActiveRecord 对象中；当您使用系统外壳时，与调用代码无关

另一种选择 - 你的 rake 任务可以采用一个整数 - user_id 然后通过 User.find 访问记录，但它变得更加复杂，因为 after_create 将在事务中运行，所以一旦你的 rake 任务运行，它可能已经完成，也可能没有完成交易

我建议不要尝试重新发明一种在 Rails 中进行后台处理的方法，已经有很好的尝试和真正的解决方案可用

有关一些选项，请参见[http://railscasts.com/?tag_id=32](http://railscasts.com/?tag_id=32)

# android - Android WebView 不会在 Gingerbread 及以下版本中加载 CORS 内容

> ID：10566643
> 
> 赞同：0
> 
> 时间：2012-05-12T19:15:00.137
> 
> 标签：android, ajax, android-webview, cors

我已经在 Android 中设置了一个基本的 WebView，并将其指向我的根域上的一个 url（例如[https://example.com](https://example.com)）。我想在另一个端口上连接到 sockjs 服务器，但在同一个域上（例如[https://example.com:81](https://example.com:81)）。

现在，它在默认的 Android 浏览器中就像一个魅力 - 但不是在 WebView 中。WebView 在 Android 4.0 中加载我的 (CORS) Ajax 请求，但在 fx 中。姜饼和 Froyo 没有。

Sockjs 设置标题：`Access-Control-Allow-Origin:https://example.com`

谢谢！

**更新：**我发现没有 https 一切都很好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:38:07.233

好的，我发现我的 CA Startcom SSL Authority 不受 Android 信任，并且由于我的页面位于 WebView 中，因此我没有看到警告消息。我插入此代码以使其“信任”我的证书：

```
mainWebView.setWebViewClient(new WebViewClient() {
    public void onReceivedSslError (WebView view, SslErrorHandler handler, SslError error) {
        handler.proceed() ;
    }
}); 
```

希望这可以帮助任何有同样问题的人。

# c# - 实体框架将聚集索引与主键分开

> ID：10566646
> 
> 赞同：3
> 
> 时间：2012-05-12T19:15:15.013
> 
> 标签：c#, .net, entity-framework, database-design

我有一个表模式，其中主键是 a `uniqueidentifier`，聚集索引是类型的标识列`bigint`。

这个想法是 Guid 索引很可能会被碎片化，如果它会被碎片化，我更喜欢它不是聚集索引，因为那样它真的会减慢插入速度。即我希望尽可能多地顺序插入行。

但是我不希望聚集索引传播到 EF 中的概念层。聚集索引只是所谓记录的物理位置，程序员不需要知道任何关于它的信息。就他们而言，他们只处理Guid PK。所以我从模型中删除了该属性。

然而，项目编译抱怨聚集索引列不可为空，并且没有默认值，考虑到它是标识列并且既不能有默认值也不能为空，这两者都是荒谬的。

我该怎么做才能让项目编译？

注意：我不想争论 Guid vs. Sequential Guid vs. Int Id。该系统必须能够横向扩展，这意味着我所关心的 Guid PK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:37:37.583

您应该检查该属性的`EntityKey`值是否`true`在 EDMX 中设置为。

# google-app-engine - 谷歌应用引擎 - aptana 工作室

> ID：10566648
> 
> 赞同：1
> 
> 时间：2012-05-12T19:15:37.453
> 
> 标签：google-app-engine, pydev, aptana3

我正在尝试将 aptana studio (pydev) 用于 google appengine 项目。我在配置 appengine 时遇到问题。如何在 MAC 上找到 google appengine 目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:00:58.253

尝试：`/usr/local/bin/`

如：`/usr/local/bin/dev_appserver.py`

# python - GTK 弹出菜单未出现在鼠标位置

> ID：10566650
> 
> 赞同：3
> 
> 时间：2012-05-12T19:15:49.123
> 
> 标签：python, menu, gtk

我正在尝试使用如下所示的处理程序在按钮单击时创建一个 Gtk 弹出菜单：

```
def code_clicked(self,widget,event):
    newmenu=Gtk.Menu()
    newitem=Gtk.MenuItem('hello')
    newmenu.append(newitem)
    newitem1=Gtk.MenuItem('goodbye')
    newmenu.append(newitem1)
    newmenu.show_all()
    newmenu.popup(None,None,None,None,event.button,event.time)
    return True 
```

菜单永远不会出现。理论上，popup 中的第三个参数 func 如果设置为 Null，则将位置设置为光标位置。我认为问题就在那里，因为如果我将 func 设置为`lambda x,y: (event.x,event.y,True)`，它会在光标上方约 100 像素处显示弹出菜单。

我想找到一些方法在我的光标处弹出这个菜单。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T02:58:06.360

您需要窗口的根位置。所以

```
 menu.popup(None, None, 
                   lambda menu, data: (event.get_root_coords()[0],
                                       event.get_root_coords()[1], True),
                   None, event.button, event.time) 
```

应该将弹出窗口放在正确的位置。在这里工作。

至于 Jon Black 的回答，在 GTK3 中，问题是正确的，请参阅[http://developer.gnome.org/gtk3/3.4/GtkMenu.html#gtk-menu-popup](http://developer.gnome.org/gtk3/3.4/GtkMenu.html#gtk-menu-popup)不推荐使用的 pygtk 绑定只能像您描述的那样工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:41:17.187

您`event.time`作为 data 参数传递，该参数又传递给*func*以确定菜单位置。将您的呼叫更改为以下内容应该可以解决它：

```
newmenu.popup(None, None, None, event.button, event.time) 
```

# javascript - 是否可以从单独的 .js 文件向 jQuery 对话框添加功能？

> ID：10566659
> 
> 赞同：2
> 
> 时间：2012-05-12T19:16:48.437
> 
> 标签：javascript, jquery, jquery-ui

我想向 jQuery UI 对话框添加一个函数。我想这样做，而无需实际下载带有 jQ​​uery UI Dialog 源代码的 .js 文件并对其进行编辑。是否可以从单独的 .js 文件中执行此操作？

一些进一步的解释：假设我想添加名为“func1”的自定义函数。编码后，我应该可以这样称呼它：

```
($"#dialog").dialog("func1"); 
```

如果不编辑原始 jQuery Dialog 源代码，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:09:14.573

好的，我终于找到了答案：D

```
(function($){
    var _init = $.ui.dialog.prototype._init;

    //Init
    $.ui.dialog.prototype._init = function() {
        var self = this;
                _init.apply(this, arguments);

              //here you can do custom init
    };

    //Custom Dialog Functions
    $.extend($.ui.dialog.prototype, {
        func1: function() {
                        alert("f1");
        },
        func2: function() { 
            alert("function 2");
        }
    });
})(jQuery); 
```

我已经从这篇文章中弄清楚了：

[http://www.droptoframe.com/?p=35](http://www.droptoframe.com/?p=35)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:25:51.650

我没有测试过，但我认为它应该可以工作：

```
$.fn.dialog = (function() {
    var cached_function = $.fn.dialog;

    return function() {

        if (arguments[0] !== "func1") 
            cached_function.apply(this, arguments);
        else {
            // Do what you want here...
        }
    };
}());​ 
```

# c# - 解释下面程序的输出？

> ID：10566660
> 
> 赞同：4
> 
> 时间：2012-05-12T19:16:52.893
> 
> 标签：c#, oop

```
class Program
{
    static void Main(string[] args)
    {
        A a = new A();
        a.print();

    }
}

class Employee
{
    public string Name { get; set; }
}

class A
{
    public void print()
    {
        Employee emp = new Employee { Name = "1" };
        Func2(emp);

        Console.WriteLine(emp.Name);
        Console.ReadLine();
    }

    private void Func2(Employee e)
    {
        Employee e2 = new Employee { Name = "3" };
        e = e2;

    }

} 
```

运行上述程序后，我得到“1”作为答案，我无法理解如何？谁能解释一下，根据我的答案应该是“3”-谢谢

但是当我调用下面定义的 Func1 方法时：-

```
private void Func1(Employee e)
{
    e.Name = "2";
} 
```

我得到“2”作为答案。现在，如果 e 作为值类型传递，那么它为什么会给我“2”作为答案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T19:20:00.533

这是让您关注的一点`Func2`：

```
private void Func2(Employee e)
{
    Employee e2 = new Employee { Name = "3" };
    e = e2;
} 
```

`Employee`是引用类型（类），但*引用*本身是按值传递的——它是引用的*副本*。

然后，您为此副本分配了一个新引用，但*原始*引用（从中复制）没有更改。因此，你得到一个`1`.

如果通过引用传递*引用*本身，则可以对其进行修改：

```
private void Func2(ref Employee e)
{
    Employee e2 = new Employee { Name = "3" };
    e = e2;
} 
```

如您所料，以上将产生`3`。

* * *

更新，关于您添加的`Func1`：

引用是一个副本，但仍指向*同一个*对象 - 您正在更改此对象的状态（设置`Name`属性），而不是基础对象引用本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:19:39.713

当您调用时，它**按值**`Func2`传递引用。在方法内部赋值不会改变存储的值，它只是给局部变量分配一个不同的值。**`e``emp``e`**

 **如果要通过引用传递，请使用`ref`关键字。

```
Func2(ref emp);

private void Func2(ref Employee e)
{
    // etc... 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:55:55.680

在`func2`您正在创建一个新的员工实例并为其分配一个值。就像`func1`您只是在修改已经创建的实例一样，因此更改会被反映回来。**

# asp.net-mvc - ListBoxFor 的宽度应始终在 asp.net mvc 中拉伸最大

> ID：10566661
> 
> 赞同：0
> 
> 时间：2012-05-12T19:17:29.850
> 
> 标签：asp.net-mvc

```
@Html.ListBoxFor(x => x.SelectedIds, new SelectList(Model.DisplayList, "Id", "Name")) 
```

上面的 asp.net mvc 代码呈现了一个`<select>-tag.`

如何将宽度设置为水平拉伸 100% ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:02:57.237

上面的代码将呈现带有 multiple="multiple" 属性的“select”标签。现在，不确定我是否理解您的问题，但如果您在选择标签上设置属性 style="width:100%" 它将水平拉伸。

如果我错过了你的观点，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:38:12.653

但是...这有效：

```
@Html.ListBoxFor(x => x.SelectedIds, new SelectList(Model.DisplayList, "Id", "Name"),new {style="width:100%;"} ) 
```

# php - 使用 XML_Serializer 删除 XML 属性

> ID：10566664
> 
> 赞同：0
> 
> 时间：2012-05-12T19:18:13.397
> 
> 标签：php

希望这里有一两个经验丰富的 XML_Serializer PEAR 类用户

我正在使用 XML_Serializer 解析 XML 文件

我正在使用这个 PEAR 类，以便我可以获取整个内容并将其放入一个数组中（为什么另一个故事是另一个时间）

目前，它还采用标签的属性及其值，如下所示：

```
<prod id="88966064" pre_order="no" web_offer="no" in_stock="no" stock_quantity="0">
<pId>608</pId>
<isbn>0000000000000</isbn> 
```

并将它们添加到返回的数组中，如下所示：

```
XML_Serializer_Tag] => Array(
         [id] => 88966064
         [pre_order] => no
         [web_offer] => no
         [in_stock] => no
         [stock_quantity] => 0
) 
```

XML_Serializer 中是否有任何选项允许我使用没有属性的 XML 数据，只使用它们之间的标签和数据，即仅？

```
<pId>608</pId>
<isbn>0000000000000</isbn> 
```

数据是动态的，因此单独删除它们的解决方案是行不通的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:13:11.710

XML_Unserializer 将其 'parseAttributes' 选项默认为 FALSE [1]。尝试将其显式设置为 FALSE 并查看是否有帮助。

[1] -- [https://pear.php.net/manual/en/package.xml.xml-serializer.xml-unserializer.options.php](https://pear.php.net/manual/en/package.xml.xml-serializer.xml-unserializer.options.php)

# objective-c - 如何恢复正在使用 presentMoviePlayerViewControllerAnimated 播放的电影

> ID：10566666
> 
> 赞同：2
> 
> 时间：2012-05-12T19:18:22.617
> 
> 标签：objective-c, ios5, mpmovieplayercontroller

我正在使用此代码来显示电影：

```
 MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc]
 initWithContentURL:movieURL];
 mp.moviePlayer.movieSourceType = MPMovieSourceTypeUnknown;
 [self presentMoviePlayerViewControllerAnimated:mp]; [mp.moviePlayer play]; 
```

代码工作正常。但是，当应用程序在播放电影时进入后台时，当应用程序返回前台时，不会显示电影播放器​​。（我看到调用的控制器的视图`presentMoviePlayerViewControllerAnimated:mp`

进入前台时是否可以恢复应用程序进入后台之前正在播放的电影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:07:49.353

您是否将 UIBackgroundmode 设置为音频，并且在应用程序进入前台后播放视频也存在问题。请参阅 MPMoviePlayerViewController[上的本教程](http://iphoneincubator.com/blog/audio-video/play-video-with-mpmovieplayercontroller-in-ios-3-0-and-3-24-0)您也可以尝试使用 MPMoviePlayerViewController ，它具有实现各种通知的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:33:34.080

您可以实施通知技术来处理它。在正在播放电影播放器​​的类中添加一个通知，并将其关联一个选择器。当应用程序进入后台然后在委托方法中

```
- (void)applicationDidEnterBackground:(UIApplication *)application

{

// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 

 // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.

    UIApplication *app = [UIApplication sharedApplication];
    UIBackgroundTaskIdentifier bgTask = 0;

    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
    }];

} 
```

编写此代码。实际上，当应用程序进入后台时，它会暂停 MPMoviePlayerController，因此当它进入前台时，您会发布通知，该通知调用实现电影控制器的类中的方法并在此方法中再次播放。

```
-(void)playIntroAnimationAgain

{

[[NSNotificationCenter defaultCenter]removeObserver:self name:NOTIFICATION_PlayAgain_Player object:nil];

        [self.moviePlayerController play];

       [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playIntroAnimationAgain)name:NOTIFICATION_PlayAgain_Player object:nil];
} 
```

它解决了我的问题。

# rgb - 无损 RGB 到 Y'CbCr 转换

> ID：10566668
> 
> 赞同：9
> 
> 时间：2012-05-12T19:18:24.707
> 
> 标签：rgb, color-space, lossless-compression

我正在尝试无损压缩图像，并且为了利用规律性，我想将图像从 RGB 转换为 Y'CbCr。（我所说的 RGB 和 Y'CbCr 的确切细节在这里并不重要；RGB 数据由三个字节组成，我有三个字节来存储结果。）

转换过程本身非常简单，但有一个问题：虽然转换在数学上是可逆的，但实际上会存在舍入误差。当然，这些错误很小并且几乎不明显，但这确实意味着该过程不再是无损的。

我的问题是：是否存在转换，将三个八位整数（代表红色、绿色和蓝色分量）转换为三个其他八位整数（代表类似于 Y'CbCr 的颜色空间，其中两个分量仅随相对于位置，或者至少小于 RGB 颜色空间），并且可以在不丢失信息的情况下反转？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T17:06:52.327

**YCoCg24**

这是一种我称之为“YCoCg24”的颜色转换，它将三个八位整数（表示红色、绿色和蓝色分量）转换为三个其他八位（有符号）整数（表示类似于 Y'CbCr 的颜色空间），以及是双射的（因此可以在不丢失信息的情况下进行反演）：

```
 G          R          B     Y          Cg         Co
 |          |          |     |          |          |
 |          |->-(-1)->(+)   (+)<-(-/2)<-|          |
 |          |          |     |          |          |
 |         (+)<-(/2)-<-|     |->-(+1)->(+)         |
 |          |          |     |          |          |
 |->-(-1)->(+)         |     |         (+)<-(-/2)<-|
 |          |          |     |          |          |
(+)<-(/2)-<-|          |     |          |->-(+1)->(+)
 |          |          |     |          |          |
 Y          Cg         Co    G          R          B

forward transformation       reverse transformation 
```

或在伪代码中：

```
function forward_lift( x, y ):
    signed int8 diff = ( y - x ) mod 0x100
    average = ( x + ( diff >> 1 ) ) mod 0x100
    return ( average, diff )

function reverse_lift( average, signed int8 diff ):
    x = ( average - ( diff >> 1 ) ) mod 0x100
    y = ( x + diff ) mod 0x100
    return ( x, y )

function RGB_to_YCoCg24( red, green, blue ):
    (temp, Co) = forward_lift( red, blue )
    (Y, Cg)    = forward_lift( green, temp )
    return( Y, Cg, Co)

function YCoCg24_to_RGB( Y, Cg, Co ):
    (green, temp) = reverse_lift( Y, Cg )
    (red, blue)   = reverse_lift( temp, Co)
    return( red, green, blue ) 
```

一些示例颜色：

```
color        R G B     Y CoCg24
white      0xFFFFFF  0xFF0000
light grey 0xEFEFEF  0xEF0000
dark grey  0x111111  0x110000
black      0x000000  0x000000

red        0xFF0000  0xFF01FF
lime       0x00FF00  0xFF0001
blue       0x0000FF  0xFFFFFF 
```

**G、RG、BG色彩空间**

另一种颜色转换，将三个八位整数转换为三个其他八位整数。

```
function RGB_to_GCbCr( red, green, blue ):
    Cb = (blue - green) mod 0x100
    Cr = (red  - green) mod 0x100
    return( green, Cb, Cr)

function GCbCr_to_RGB( Y, Cg, Co ):
    blue = (Cb + green) mod 0x100
    red  = (Cr + green) mod 0x100
    return( red, green, blue ) 
```

一些示例颜色：

```
color        R G B     G CbCr
white      0xFFFFFF  0xFF0000
light grey 0xEFEFEF  0xEF0000
dark grey  0x111111  0x110000
black      0x000000  0x000000 
```

**评论**

似乎有不少[无损色彩空间变换](https://www.eurasip.org/Proceedings/Eusipco/Eusipco2000/SESSIONS/THUAM/SS2/CR1790.PDF)。Henrique S. Malvar 等人提到了几种无损色彩空间变换。[“用于图像压缩的基于提升的可逆颜色变换”](http://research.microsoft.com/pubs/102040/2008_colortransforms_malvarsullivansrinivasan.pdf)；[JPEG XR](http://en.wikipedia.org/wiki/JPEG_XR#Compression_algorithm)中有无损色彩空间转换；[几个“无损JPEG](http://www.eecs.qmul.ac.uk/~phao/Papers/ICSP04-iJPEG.pdf) ”提案中使用的原始可逆颜色变换（ORCT） ；G、RG、BG色彩空间；Malvar 等人似乎对 24 位 RGB 像素的 26 位 YCoCg-R 表示非常兴奋。

然而，几乎所有这些都需要超过 24 位来存储转换后的像素颜色。

我在 YCoCg24 中使用的“[提升](http://en.wikipedia.org/wiki/Generalized_lifting)”技术类似于 Malvar 等人的技术以及 JPEG XR 中的无损色彩空间转换。

因为加法是可逆的（加法模 0x100 是双射的），所以可以由以下[Feistel 网络产生的从 (a,b) 到 (x,y) 的](http://en.wikipedia.org/wiki/Feistel_network)*任何*变换都是可逆和双射的：

```
 a        b
 |        |
 |->-F->-(+)
 |        |
(+)-<-G-<-|
 |        |
 x        y 
```

其中 (+) 表示 8 位加法（模 0x100），abxy 都是 8 位值，F 和 G 表示任意函数。

**细节**

为什么你只有 3 个字节来存储结果？这听起来像是适得其反的[过早优化](http://c2.com/cgi/wiki?PrematureOptimization)。如果您的目标是在合理的时间内将图像无损压缩成尽可能小的压缩文件，那么中间阶段的大小是无关紧要的。它甚至可能适得其反——“更大”的中间表示（例如可逆颜色变换或 26 位 YCoCg-R）可能会导致最终压缩文件大小小于“较小”的中间表示（例如 RGB 或YCoCg24)。

编辑：哎呀。“(x) mod 0x100”或“(x) & 0xff”中的任何一个都给出完全相同的结果——我想要的结果。但不知何故，我将它们混杂在一起，产生了一些行不通的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:47:49.630

我确实找到了 JPEG 2000 使用的一个这样的解决方案。它被称为可逆颜色变换 (RCT)，它在[Wikipedia](https://en.wikipedia.org/wiki/JPEG_2000#Color_components_transformation)以及[JPEG 站点上](http://www.jpeg.org/.demo/FAQJpeg2k/functionalities.htm#What%20is%20the%20RCT?)都有描述（尽管舍入方法不一致）。然而，结果不如不可逆颜色变换。

我还在Soo-Chang Pei 和 Jian-Jiun Ding的论文*改进的可逆整数到整数颜色变换*中找到了一种更好的方法。但是，该论文中描述的方法以及 JPEG 2000 使用的方法需要额外的位来存储结果。这意味着转换后的值不再适合 24 位。

# java - Android：参数不通过 if-else 语句？

> ID：10566669
> 
> 赞同：0
> 
> 时间：2012-05-12T19:18:29.807
> 
> 标签：java, android, if-statement, parameters, parameter-passing

我正在使用 LogCat 来显示我的值，但它不能通过我的 if 语句工作？

```
 Parameters p = mCamera.getParameters();
    p.setFlashMode(Parameters.FLASH_MODE_OFF);
    mCamera.setParameters(p);
    mCamera.startPreview();
    Log.d("Torch","MODE AUTO: " + p.getFlashMode() + "," + Parameters.FLASH_MODE_AUTO);

    //Flash Button
    final Button flashButton = (Button) findViewById(id.camera_flash);
    flashButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Parameters p = mCamera.getParameters();
            Log.d("Torch","MODE : " + p.getFlashMode() + "," + android.hardware.Camera.Parameters.FLASH_MODE_OFF);

            // TODO Auto-generated method stub
            if(p.getFlashMode() == Parameters.FLASH_MODE_ON){
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("Off");
                Log.e("Torch","MODE OFF");

            }else if(p.getFlashMode() == Parameters.FLASH_MODE_OFF){
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("TORCH");
                Log.e("Torch","MODE TORCH");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_AUTO){
                p.setFlashMode(Parameters.FLASH_MODE_ON);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("ON");
                Log.d("Torch","MODE ON: " + p.getFlashMode() + "," + android.hardware.Camera.Parameters.FLASH_MODE_AUTO);

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_TORCH){
                p.setFlashMode(Parameters.FLASH_MODE_ON);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.e("Torch","MODE AUTO");

            }/*else
                p.setFlashMode(Parameters.FLASH_MODE_AUTO);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.d("Torch","MODE AUTO: " + p.getFlashMode() + "," + android.hardware.Camera.Parameters.FLASH_MODE_AUTO);

            }   */      
        } 
```

我得到`MODE AUTO: off,auto`（在我的 onCreate 内）和`MODE: off,off`（在 onClick 内）。这些是我的测试，所以理论上，如果我的 onCreate 是，`off,auto`那么它应该通过`if(p.getFlashMode() == Parameters.FLASH_MODE_OFF)`，但不是吗？

有什么理由不通过我的 if 语句？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:40:07.510

`Camera.Parameters.FLASH_MODE_ON`,`Camera.Parameters.FLASH_MODE_OFF`是`Strings`.([这里](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FLASH_MODE_OFF)) 你需要比较使用`equals()`.

`if(p.getFlashMode().equals(Parameters.FLASH_MODE_ON))`

# php - 服务器上的PHP日期时间问题

> ID：10566671
> 
> 赞同：1
> 
> 时间：2012-05-12T19:19:02.403
> 
> 标签：php, datetime

我正在尝试将一个时区的时间转换为另一个时区的时间，如[如何通过 PHP 轻松地将日期从 UTC 转换？](https://stackoverflow.com/questions/952975/how-can-i-easily-convert-dates-from-utc-via-php)如下所示。

```
$dateTime = new DateTime("2009-04-01 15:36:13");
$dateTime->setTimezone(new DateTimeZone('Asia/Kolkata'));
echo $dateTime->format("Y-m-d H:i:s"); 
```

在本地主机上进行测试时，这似乎工作正常，但在我的开发服务器上，页面会引发 500 内部服务器错误（如果通过 ajax 调用），或者页面只是从那行代码开始中断。

localhost 和我的开发服务器都使用 PHP 5.3.5。

有什么理由为什么这不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T19:24:19.843

检查 apache 错误日志，它应该包含您得到的确切错误。其他一切都只是疯狂的猜测：D

# linux - 将目录和所有文件添加到svn的简单命令

> ID：10566675
> 
> 赞同：1
> 
> 时间：2012-05-12T19:19:40.133
> 
> 标签：linux, svn

是否有一个简单的命令来添加一个目录和它下面的所有文件`svn`？

我已经尝试过`svn add directory`这对我来说很有意义，但这并没有按预期工作。我用谷歌搜索了它，有些解决方案对于如此简单的事情都显得有些啰嗦。

这样做的标准方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:06:08.357

`svn add directory`仅在尚未添加目录时才有效。添加所有新文件不是 svn world 中的标准操作。Git 做到了这一点，但那是偏离轨道。

您通常可以应付，`svn add directory/*`但它会丢失现有子目录中的新文件。所以：

*   目录/newDirectory/file -> 添加
*   目录/oldDirectory/file -> 未添加

如果您确实需要在目录层次结构中的任何位置添加任何文件，那么这一行将为您设置一个别名来执行此操作：

```
alias svn_addall="svn st|grep ^?|sed 's/./svn add/'|sh" 
```

将其放入您的 .profile 中，您就可以随时轻松访问它。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:22:33.427

`svn add folder`将添加文件夹及其内容。它怎么不像你期望的那样工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:26:29.640

有趣的。你用的是哪个版本的svn。我在 Mac 上使用 svn 1.6。它对我有用。当我查看 svn 的手册页时，默认情况下该命令似乎是递归的。您可以通过以下方式允许该行为：

```
--depth ARG              : limit operation by depth ARG ('empty', 'files',
                        'immediates', or 'infinity') 
```

# asp.net - asp.net mvc 3，动态数组

> ID：10566676
> 
> 赞同：0
> 
> 时间：2012-05-12T19:19:52.117
> 
> 标签：asp.net, arrays

我是 ASP.Net MVC 3 的初学者，我将制作一个动态数组，最初必须向我显示前十个元素，当我单击查看更多显示所有数组元素时

这就是我所做的：

```
<table>
@foreach (var tweet in Model)
{               
    <tr>
        <td>
            <img alt="" src="@tweet.ProfileImageUrl" />
            <br />
            <input id="rowIDs" type="checkbox" />
        </td>
        <td>
            <strong>@tweet.Name</strong>
            <br />
            Friends: <strong>@tweet.FriendsCount</strong>
        </td>
    </tr>
}
</table> 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:23:07.380

最简单的方法（在我看来）是使用查询字符串创建页面本身的锚点。

您的视图必须有这样的锚点：

```
<a href="@(Request.Url.AbsoluteUri + "?fullComment=true")">All Comments</a> 
```

而相对控制器（`HttpGet`，不`HttpPost`（如果有的话））必须是这样的：

```
public ViewResult List(bool fullComment=false)
{
    if (fullComment)
        return View(dbContext.EntityList.ToList());
    else
        return View(dbContext.EntityList.Take(5).ToList());
} 
```

**注意**：如果页面已经有查询字符串，在创建锚链接时，必须注意这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:35:48.433

您必须在控制器中放入 10 个项目，

```
return View(array.Take(10).Skip(page)); 
```

不再使用按钮。使用寻呼机。您需要 peredovat 变量 Pag。

# java - 漏斗分析计算，你会如何计算漏斗？

> ID：10566680
> 
> 赞同：6
> 
> 时间：2012-05-12T19:20:23.270
> 
> 标签：java, math, hadoop, mapreduce, bigdata

假设我跟踪用户在网站上进行的“事件”，事件可以是：

1.  浏览主页
2.  将商品添加到购物车
3.  查看
4.  已支付订单

现在，这些事件中的每一个都存储在一个数据库中，例如：

session_id event_name created_date ..

所以现在我想构建一个报告来显示一个特定的漏斗，我将定义如下：

```
Step#1   event_n
Step#2   event_n2
Step#3   event_n3 
```

所以这个特定的漏斗有 3 个步骤，每个步骤都与任何事件相关联。

鉴于我拥有的上述数据，我现在如何为此构建报告？

**注意：只是想清楚一点，我希望能够创建我定义的任何渠道，并能够为其创建报​​告。**

我能想到的最基本的方法是：

1.  获取数据库中每个步骤的所有事件
2.  第 1 步将是，x% 的人执行 event_n
3.  现在我将不得不查询也执行了步骤#1 的步骤#2 的数据，并显示 %
4.  与#3 相同，但对于步骤#3 具有步骤#2 的条件

我很好奇这些在线服务如何在托管的 Saas 环境中显示这些类型的报告。map-reduce 是否以某种方式使这变得更容易？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-04T11:12:18.080

首先给出答案，使用标准 SQL，给定您的假设：有一个表 EVENTS 具有简单的布局：

```
EVENTS
-----------------------------
SESION_ID , EVENT_NAME , TMST 
```

要获取在某个时间执行步骤#1 的会话：

```
-- QUERY 1
SELECT SESSION_ID,MIN(TMST) FROM EVENTS WHERE EVENT_NAME='event1' GROUP BY SESSION_ID; 
```

在这里，我假设 event1 可以在每个会话中发生不止一次。结果是在某个时间展示 event1 的唯一会话列表。

为了获得 step2 和 step3，我可以这样做：

```
-- QUERY 2
SELECT SESSION_ID,MIN(TMST) FROM EVENTS WHERE EVENT_NAME='event2' GROUP BY SESSION_ID;
-- QUERY 3
SELECT SESSION_ID,MIN(TMST) FROM EVENTS WHERE EVENT_NAME='event3' GROUP BY SESSION_ID; 
```

现在，您要选择按顺序执行 step1、step2 和 step3 的会话。更准确地说，您需要计算执行第 1 步的会话数，然后计算执行第 2 步的会话数，然后计算执行第 3 步的会话数。基本上，我们只需要将上述 3 个查询与左连接结合起来，就可以列出进入漏斗的会话以及它们执行的步骤：

```
-- FUNNEL FOR S1/S2/S3
SELECT 
  SESSION_ID, 
  Q1.TMST IS NOT NULL AS PERFORMED_STEP1,
  Q2.TMST IS NOT NULL AS PERFORMED_STEP2,
  Q3.TMST IS NOT NULL AS PERFORMED_STEP3
FROM
  -- QUERY 1
  (SELECT SESSION_ID,MIN(TMST) FROM EVENTS WHERE EVENT_NAME='event1' GROUP BY SESSION_ID) AS Q1,
LEFT JOIN
  -- QUERY 2
  (SELECT SESSION_ID,MIN(TMST) FROM EVENTS WHERE EVENT_NAME='event2' GROUP BY SESSION_ID) AS Q2,
LEFT JOIN
  -- QUERY 3
  (SELECT SESSION_ID,MIN(TMST) FROM EVENTS WHERE EVENT_NAME='event2' GROUP BY SESSION_ID) AS Q3
-- Q2 & Q3
ON Q2.SESSION_ID=Q3.SESSION_ID AND Q2.TMST<Q3.TMST
-- Q1 & Q2
ON Q1.SESSION_ID=Q2.SESSION_ID AND Q1.TMST<Q2.TMST 
```

结果是在第 1 步进入渠道的唯一会话列表，并且可能已继续到第 2 步和第 3 步......例如：

```
SESSION_ID_1,TRUE,TRUE,TRUE
SESSION_ID_2,TRUE,TRUE,FALSE
SESSION_ID_3,TRUE,FALSE,FALSE
... 
```

现在我们只需要计算一些统计数据，例如：

```
SELECT
  STEP1_COUNT,
  STEP1_COUNT-STEP2_COUNT AS EXIT_AFTER_STEP1,
  STEP2_COUNT*100.0/STEP1_COUNT AS PERCENTAGE_TO_STEP2,
  STEP2_COUNT-STEP3_COUNT AS EXIT_AFTER_STEP2,
  STEP3_COUNT*100.0/STEP2_COUNT AS PERCENTAGE_TO_STEP3,
  STEP3_COUNT*100.0/STEP1_COUNT AS COMPLETION_RATE
FROM
(-- QUERY TO COUNT session at each step
  SELECT
    SUM(CASE WHEN PERFORMED_STEP1 THEN 1 ELSE 0 END) AS STEP1_COUNT,
    SUM(CASE WHEN PERFORMED_STEP2 THEN 1 ELSE 0 END) AS STEP2_COUNT,
    SUM(CASE WHEN PERFORMED_STEP3 THEN 1 ELSE 0 END) AS STEP3_COUNT
  FROM
    [... insert the funnel query here ...]
) AS COMPUTE_STEPS 
```

等等瞧！

现在进行讨论。第一点，鉴于您采用“设置”（或功能）思维方式而不是“程序”方法，结果非常简单。不要将数据库可视化为具有列和行的固定表的集合......这就是它的实现方式，但它不是您与之交互的方式。都是套装，你可以按照你需要的方式安排套装！

第二点，如果您使用的是 MPP 数据库，查询将自动优化为并行运行。您甚至不需要对查询进行不同的编程，使用 map-reduce 或其他任何东西......我在我的测试数据集上运行了相同的查询，其中包含超过 1 亿个事件，并在几秒钟内获得结果。

最后但并非最不重要的一点是，查询打开了无限的可能性。只需按推荐人、关键字、登陆页面、用户信息对结果进行分组，并分析哪个提供了最佳转化率！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T04:54:42.797

您考虑这一点的方式的核心问题是您正在考虑 SQL/表类型模型。每个事件都是一个记录。NoSQL 技术的优点之一（您对此有所了解）是您可以自然地将记录存储为每个记录一个会话。以基于会话的方式存储数据后，您可以编写一个例程来检查该会话是否符合该模式。不需要做连接或任何事情，只需在会话中的事务列表上循环。这就是半结构化数据的力量。

如果您将会话存储在一起怎么办？然后，您所要做的就是遍历每个会话并查看它是否匹配。

在我看来，这是 HBase 的一个很棒的用例。

使用 HBase，您将会话 ID 存储为行键，然后将每个事件存储为值，并将时间戳作为列限定符。这给您留下的是按会话 ID 分组在一起的数据，然后按时间排序。

好的，所以现在您想弄清楚有多少会话执行了行为 1、2、3。您在此数据上运行 MapReduce 作业。MapReduce 作业将为每个行键/值对提供一个会话。在数据上编写一个循环以检查它是否与模式匹配。如果它确实计数+ 1，如果不是，则不要。

* * *

在不使用 HBase 的情况下，您可以使用 MapReduce 对静止的无组织数据进行会话。按会话 ID 分组，然后在 reducer 中，您将与该会话关联的所有事件组合在一起。现在，您基本上处于使用 HBase 的位置，您可以在 reducer 中编写一个检查模式的方法。

* * *

如果您没有大量可笑的数据，HBase 可能会过大。在这种情况下，任何可以分层存储数据的数据库都会很好。MongoDB、Cassandra、Redis 都会浮现在脑海中，各有优缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T22:14:23.030

我最近发布了一个开源 Hive UDF 来做到这一点：[hive-funnel-udf](https://github.com/yahoo/hive-funnel-udf)

用于此类漏斗分析任务非常简单，您只需编写 Hive，无需编写自定义 Java MapReduce 代码。

不过，这仅在您使用 Hive/Hadoop 存储和查询数据时才有效。

# ruby-on-rails - 回形针 - 查询 INSERT 中未传递的图像属性

> ID：10566681
> 
> 赞同：1
> 
> 时间：2012-05-12T19:20:44.780
> 
> 标签：ruby-on-rails, paperclip

我有回形针网站上的所有默认设置。当我创建一个新应用程序并将设置放入时，一旦我保存了我的模型，“照片”回形针属性就会很好地保存，一切都很好（这里是 SQL INSERT 示例）：

```
"photo"=>#<ActionDispatch::Http::UploadedFile:0x007f990a3d92d0
@original_filename="Screen Shot 2011-10-21 at 6.02.56 AM.png",
@content_type="image/png", @headers="Content-Disposition: form-data;
name=\"event[photo]\"; filename=\"Screen Shot 2011-10-21 at 6.02.56
AM.png\"\r\nContent-Type: image/png\r\n" 
```

我得到：

```
[paperclip] Saving attachments 
```

现在在我使用 Devise 和 Cancan 的其他应用程序中，我有完全相同的回形针设置，我确实得到了

```
[paperclip] Saving attachments. 
```

但是，**它不会保存“照片”，并且根本看不到照片属性被定义** 。现在我看到了一个类似的帖子得到解决添加

```
attr_accessible photo 
```

到模型，我做到了，但仍然无法正常工作。我在这上面浪费了这么多时间，有时我觉得我应该创建自己的图片上传......

任何想法？谢谢！

顺便说一下。我添加的**简单脚手架对象**上的相同问题

> attr_accessible :照片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:25:36.663

If you're using a framework like jQuery Mobile or some sort of AJAX/PJAX mechanism, your uploads will be lost as POST in Ajax, since JS cannot read your local files...

You'll have to use some uploadify-like plugin or submit your form the "regular" way.

Edit: To make things clear, the easiest way will be to add data-ajax="false" as a form attribute. In Rails 3, using the form helper, you'd write something along those lines:

```
<%= form_for (@my_object, html: {data: {ajax: false}}) do |f| %>
    ...
<% end %> 
```

# php - 电子邮件验证 jquery

> ID：10566683
> 
> 赞同：-3
> 
> 时间：2012-05-12T19:20:51.080
> 
> 标签：php, javascript, jquery, html, css

> **可能重复：**
> [JQuery 验证电子邮件地址正则表达式](https://stackoverflow.com/questions/2855865/jquery-validate-e-mail-address-regex)

嗨，我有一个引用电子邮件输入字段的表单中的输入，当用户单击提交按钮时，我想确保电子邮件输入字段值具有这样的形式

```
example@hotmail.com 
```

或者

```
example@gmail.com 
```

或者

```
example@yahoo.com 
```

输入字段是这个

```
<p>
            <label>Email</label>
            <input type="text" name="Email"/>
            <span class="errorMessage"></span>
        </p> 
```

# jQuery代码

```
$(document).ready(function(){
    $('#suform').on('submit', function(e){
        e.preventDefault();
        var errorCount = 0;
        $('span.errorMessage').text(''); // reset all error mesaage
        $('input').each(function(){
            var $this = $(this);
            if($this.val() === ''){
                var error = 'Please fill ' + $this.prev('label').text(); // take the input field from label
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        if(errorCount === 0){
            var mobileNumber = $('input[name=MNumber]');
            var email = $('input[name=Email]');
            if(isNaN(parseFloat(mobileNumber )) && !isFinite(mobileNumber )) {
                var error = 'Mobile number incorect.';
                $('input[name=MNumber]').next('span').text(error);
                errorCount = errorCount + 1; 
            }else{      
                var password= $('input[name="Password"]').val();
                var repass= $('input[name="RePassword"]').val();
                if(password!=repass){ // ensrue the two passwords are the same
                    var error2 = 'Password not matching';
                    $('input[name="RePassword"]').next('span').text(error2)
                    errorCount = errorCount + 1;  
                }else{
                    $(this)[0].submit(); // submit form if no error
                }
            }
        }
    });
}); 
```

我的 html 、 css 和 jquery 代码是这里 [代码](http://jsfiddle.net/Wiliam_Kinaan/zEBY9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:25:25.383

正则表达式是一种验证方法：

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

将用户输入的电子邮件传递给此函数，它将检查其格式并相应地返回 true 或 false

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:26:32.217

如果我对您的理解正确，您想验证表格上填写的电子邮件地址：

**添加到您的功能**

```
// validate proper email address
var reg = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;

if (reg.test(value) == false) {
  // email invalid, do stuff
} else {
  // email valid, do stuff
} 
```

*这个正则表达式检查为许多许多问题提供的电子邮件！*

# 编辑：

**你的功能有一些错别字，在这里它功能齐全：**和一个[工作小提琴！](http://jsfiddle.net/zuul/DyGYw/)

```
$(document).ready(function(){

    // form submit
    $('#suform').on('submit', function(e){

        // prevent default behavior
        e.preventDefault();

        // reset errors counter
        var errorCount = 0;

        // clear error message
        $('span.errorMessage').text('');

        // run by each input field to check if they are filled
        $('input').each(function(){

            var $this = $(this);

            if($this.val() === ''){
                // take the input field from label
                var error = 'Please fill ' + $this.prev('label').text();
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });

        // no errors so far, let continue and validate the contents
        if(errorCount === 0){

            // get mobile number
            var mobileNumber = $('input[name=MNumber]').val();

            // get email address
            var email = $('input[name=Email]').val();

            // get password and password repeat
            var password= $('input[name="Password"]').val();
            var repass= $('input[name="RePassword"]').val();

            // regular expression to validate the email address
            var reg = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;

            // try to validate the email
            if (reg.test(email) == false) {
              $('input[name=Email]').next('span').text('Email address is invalid!');
              errorCount = errorCount + 1;
            } else {

                if(isNaN(parseFloat(mobileNumber )) && !isFinite(mobileNumber )) {
                    var error = 'Mobile number incorect.';
                    $('input[name=MNumber]').next('span').text(error);
                    errorCount = errorCount + 1;
                } else {
                    // ensrue the two passwords are the same
                    if(password!=repass){
                        var error2 = 'Password not matching';
                        $('input[name="RePassword"]').next('span').text(error2);
                        errorCount = errorCount + 1;  
                    }else{
                        $(this)[0].submit(); // submit form if no error
                    }
                }
            }
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:24:08.227

您可以使用此功能：

```
function validateEmail(email) {
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    if( !emailReg.test( email ) ) {
        return false;
    } else {
        return true;
    }
} 
```

# python - uwsgi、gevent 和异步循环 - UnboundLocalError：分配前引用的局部变量“query_string”

> ID：10566685
> 
> 赞同：1
> 
> 时间：2012-05-12T19:20:53.573
> 
> 标签：python, wsgi, gevent, uwsgi

我的堆栈是 uWSGI 1.2.2、bottle 和 gevent 1.0b2。我正在尝试执行以下异步操作。

1）尽可能快地提供像素图像并关闭连接 2）然后我将查询字符串传递给一个函数，以便我可以使用 gevent 将数据异步写入 redis 3）根据[http://projects.unbit上的 uwsgi 文档.it/uwsgi/wiki/Gevent](http://projects.unbit.it/uwsgi/wiki/Gevent)我似乎做对了。4）在日志中我得到这个错误。我为像素提供服务，但......

```
Traceback (most recent call last):
  File "/home/ubuntu/workspace/bottleServer.py", line 222, in upixel
    gevent.spawn(pixelRedisWrite,cookie_id,query_string,yield_time)
UnboundLocalError: local variable 'query_string' referenced before assignment
[pid: 28173|app: 0|req: 91/91] 120.28.191.173 () {40 vars in 1909 bytes} [Sat May 12 19:07:24 2012] GET /upixel?bid=eydhdmlkJzogJ2luZm9AYWRtYWdpYy5jby5qcCcsICdjcmlkJzogJzIwNzY3MDczNTE1JywgJ21hYm 
```

所以....为什么会这样？查询字符串在那里....

这是我启动 uwsgi 的方式

```
sudo /usr/local/bin/uwsgi --loop gevent --socket :3031 --wsgi-file /home/ubuntu/workspace/bottleServer.py --master --async 10 --listen 100 --processes 1 

def pixelRedisWrite(ckid,qs,yield_time):
    pass

@route('/upixel/')
@route('/upixel')
def upixel():
    sw = stopwatch.Timer()

    if request.get_cookie('rtbhui'):
        cookie_id = request.get_cookie('rtbhui')
    else:
        cookie_id=str(uuid4())
        response.set_cookie('rtbhui', cookie_id , max_age=31556952*2, domain='rtb.rtbhui.com')

    cookie_id='test'
    response.content_type = 'image/gif'
    sw.stop()
    yield_time = int(sw.elapsed * 1000)
    if request.query.bid:
        query_string = base64.b64decode(request.query.bid)
        query_string = ast.literal_eval(query_string)
        #pixelRedisWrite(cookie_id,query_string,yield_time)
    yield pixel
    #print 'gggggg',query_string
    gevent.spawn(pixelRedisWrite,cookie_id,query_string,yield_time)

if __name__ == "__main__":
    # Interactive mode
    run(host='localhost', port=8080)
else:
    # Mod WSGI launch
    os.chdir(os.path.dirname(__file__))
    application = default_app() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:12:29.470

这与 gevent 或 uwsgi 无关。您`query_string`仅在某些情况下定义（何时`request.query.bid`为真）。如果它不是真的，变量是未定义的并`UnboundLocalError`告诉你。

# iphone - fmdb fmresultset 未加载任何内容

> ID：10566688
> 
> 赞同：0
> 
> 时间：2012-05-12T19:20:59.113
> 
> 标签：iphone, ios, cocos2d-iphone, fmdb

我和一些朋友正在 cocos2d 中开发游戏 :)，我使用 fmdb 进行一些设置。其实我有这个代码：

* * *

NSString *path = [[NSBundle mainBundle] pathForResource:@"myDB" ofType:@"sqlite"];

mainDB = [FMDatabase databaseWithPath:path];

```
if ([mainDB open])
    NSLog(@"did open db");
else 
    NSLog(@"did not open db");

_stages = [[NSMutableArray alloc] init];

[mainDB open];

FMResultSet *FResult = [mainDB executeQuery:@"select * from stagesTable"];

NSLog(@"columns : %d",[FResult columnCount]); 
```

if ([FResult next])
NSLog(@"have objects");
else
NSLog(@"没有对象");

```
NSLog(@"with %d objects",[_stages count]);

[mainDB close]; 
```

* * *

但是 FResult 没有存储任何东西，mainDB 确实打开了，但是列是 0 对象是 0 并且它总是说它没有任何对象。有什么问题？感谢：D ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:38:13.537

尝试设置并观察控制台上的输出`logsErrors=YES;`。`mainDB`

你永远不会填充 _stages ，所以它总是有零个对象..

# apache-flex - Flex 4.6 自定义列表排序

> ID：10566691
> 
> 赞同：1
> 
> 时间：2012-05-12T19:21:58.990
> 
> 标签：apache-flex, list, sorting, collections, adobe

所以我的问题似乎很简单，但看在上帝的份上，我无法弄清楚。所以我请求你的帮助。我在包含商店的移动应用程序中有一个简单的列表。我想将它们缩短到与地图中心的距离。

似乎我需要一个自定义排序功能，但我不确定我必须在其中做什么。

我在用

```
testDist.setLatLng(propertyList.selectedItem.lat,propertyList.selectedItem.lng);

dist.text=""+GeodesicCalculatorUtil.calculateGeodesicDistance(FlexGlobals.topLevelApplication.currentLatLng2,testDist,DistanceUnits.KILOMETERS) 
```

要获得一家商店的距离，我必须将其与下一家进行比较。但是我不知道如何在比较功能中做到这一点。如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:50:09.823

由于这对于使用 MapQuest 作为地图系统的人来说似乎是一个常见问题，因此我提供了我的解决方案，用于按与任何列表的距离对自定义 POI 进行排序。这是移动应用程序的解决方案，这就是我在数据网格上使用列表的原因。

```
protected function sort_clickHandler():void
            {               

                var dataSortField:SortField = new SortField();
                dataSortField.numeric = true;

                /* Create the Sort object and add the SortField object created earlier to the array of fields to sort on. */
                var numericDataSort:Sort = new Sort();

                numericDataSort.compareFunction=sortFunction;

                /* Set the ArrayCollection object's sort property to our custom sort, and refresh the ArrayCollection. */
                getAllMarkersResult.lastResult.sort = numericDataSort;
                getAllMarkersResult.lastResult.refresh();
            }

            private function sortFunction(a:Object, b:Object, array:Array = null):int
            {

                var aPoi:LatLng = new LatLng(a.lat,a.lng);
                var bPoi:LatLng = new LatLng(b.lat,b.lng);

                var i:Number=GeodesicCalculatorUtil.calculateGeodesicDistance(FlexGlobals.topLevelApplication.currentLatLng2,aPoi,DistanceUnits.KILOMETERS);
                var j:Number=GeodesicCalculatorUtil.calculateGeodesicDistance(FlexGlobals.topLevelApplication.currentLatLng2,bPoi,DistanceUnits.KILOMETERS);

                return ObjectUtil.numericCompare(i, j);

            } 
```

# mongodb - Azure 云上的 MongoDB

> ID：10566693
> 
> 赞同：-1
> 
> 时间：2012-05-12T19:22:10.637
> 
> 标签：mongodb, azure

用于 Azure 生产的 MongoDB 准备好了吗？任何人都可以分享一些经验吗？使用它来刺激似乎缺少舒适感。

你怎么看 ？

> 编辑：由于我的问题存在误解，我将尝试重新定义它。我从社区中查看的信息是共享在 Windows azure 上运行 mongo 的人的信息，以分享它的经验。我所说的经验不是如何在云中运行它（我们已经有关于 10gens 常见问题的手册），也不是它有多少错误（我们可以在 mongo-azure jira 中看到）。我正在寻找的是性能如何？在 azure 上运行 mongodb 是否有任何问题（副作用）？mongodb如何处理VM回收？有人试过分片吗？最后，来自 10gens 的 mongo-azure worker 角色在生产中使用它是否稳定？

希望这能解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:08:40.790

这里稍微澄清一下。MongoDB 本身是生产就绪的。并且 MongoDB 在 Windows Azure 中工作得很好，只要你设置了*脚手架*让它在环境中工作。这通常需要设置 Azure 驱动器，以提供持久存储。或者，使用副本集，您可以有效地在集合成员之间获得最终一致性。然后，您可以考虑使用独立设备（或带热备份的独立设备）。就个人而言，我更喜欢复制集模型，这是生产 MongoDB 系统的典型指导。

至于 10gen 对 Windows Azure 的支持：虽然@SyntaxC4 指向的页面确实阐明了包装器处于预览状态，但请注意，*包装器*是启动 MongoDB 的脚手架代码。该脚手架最初于 2011 年 12 月发布，此后进行了一些调整。它使用生产的 MongoDB 位（并且与 5 月 9 日发布的 2.0.5 版配合得很好）。一个警告是 MongoDB 副本集角色与您的应用程序角色一起部署，因为客户端应用程序需要对所有副本集节点的可见性（以正确构建集）。为避免此限制，您需要运行 mongos 和入口点（这不是 10gen 的脚手架解决方案的一部分）。

暂时忘记预览脚手架：我有客户在生产中运行 MongoDB，使用自定义脚手架。其中一个是运行一个相当大的部署，有多个分片，每个分片使用一个副本集。

那么... 它在 Windows Azure 中是否有效？是的。您是否应该利用 10gen 提供的脚手架？如果您只是在寻找一种简单的方法来启动副本集，我认为这很好。如果你想要一个独立的模型，或者一个分片模型，或者如果你需要一个单独的 MongoDB 部署，你现在需要自己做（或者修改 10gen 发布的项目）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:29:00.023

MongoLab 现在在 Azure [MongoLab 博客上提供 Mongo 作为服务](http://blog.mongolab.com/2012/10/azure/)

免费演示帐户为 0.5 GB 存储空间可在[Windows Azure 商店中使用](http://www.windowsazure.com/en-us/store/overview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:59:22.230

[他们网站](http://www.mongodb.org/display/DOCS/MongoDB+on+Azure)上的警告消息说这是一个预览。这意味着在 Windows Azure 的产品级别上将不支持它。

如果您想在舒适的水平上形成自己的意见，您可以查看[他们的错误跟踪系统](https://jira.mongodb.org/browse/AZURE)并了解人们当前报告的问题。

# python - 在 python 中检查重复项的最快方法是什么？

> ID：10566701
> 
> 赞同：4
> 
> 时间：2012-05-12T19:22:37.783
> 
> 标签：python, dictionary, hashmap, set, duplicates

使用字典似乎很理想。

例如：

```
history = {}
for i in collection:
    if i not in history:
        history[i] = None
        # fancy computation here 
```

使用 set() 类型会一样快吗？set() 不需要我向哈希键添加愚蠢的 None 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T19:24:06.080

是的，你应该使用一套。

* * *

> 使用 set() 类型会一样快吗？

不，它不会那么快。它会*更快*。

* * *

**更新**

有些人发布了基准测试，表明 set 比 dict 慢。我认为这有点令人惊讶，因为它们基本上具有相同的底层实现，只是集合更简单。我认为我找到了缓慢的原因：

```
def set_way():
    my_set = set()
    my_set_add = my_set.add   # remember the method
    for ele in x:
        if ele not in my_set:
            my_set_add(ele)   # call the method directly 
```

结果：

```
dict time : 1.896939858077399
set time : 1.8587076107880456 
```

正如预期的那样，Set 现在稍微快了一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T19:38:37.613

字典似乎更快。

```
import timeit
import random as rn

x  = [rn.choice(xrange(10000)) for i in xrange(1000)]

def set_way():
    my_set = set()
    for ele in x:
        if ele in my_set:
            return True
        else:
            my_set.add(ele)
    else:
        return False

def dict_way():
    dicto = {}
    for ele in x:
        if ele in dicto:
            return True
        else:
            dicto[ele] = None
    else:
        return False

num = 10000

set_time = timeit.timeit(set_way, number = num)
print 'set time :', set_time
dict_time = timeit.timeit(dict_way, number = num)
print 'dict time :', dict_time 
```

结果：

```
set time : 0.619757678699
dict time : 0.466664548148 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:30:54.850

dicts 更快，但只有一点点：

```
import timeit

setup = """
x = range(10000)
s = set(range(5000))
d = dict.fromkeys(range(5000))
"""

print '# set', timeit.timeit('for i in x: z = i in s', setup, number=1000)
print '# dic', timeit.timeit('for i in x: z = i in d', setup, number=1000)

# set 1.18897795677
# dic 1.1489379406 
```

然而，除非性能是绝对关键的，否则为了可读性，您应该使用集合。

当然，正如您的问题所暗示的那样，我们正在谈论可散列类型。不可散列的类型，如容器，需要其他技术。

为了完整起见，以下是不同修改方法的基准：

```
import timeit

setup = """
x = range(10000)
s = set(range(5000))
d = dict.fromkeys(range(5000))

add_method = s.add
"""

print '# set-add     ', timeit.timeit('for i in x: s.add(i)', setup, number=1000)
print '# set-closure ', timeit.timeit('for i in x: add_method(i)', setup, number=1000)
print '# dict []     ', timeit.timeit('for i in x: d[i]=None', setup, number=1000)
print '# d.setdefault', timeit.timeit('for i in x: d.setdefault(i)', setup, number=1000)

# set-add      1.96829080582
# set-closure  1.2261030674
# dict []      0.982795000076
# d.setdefault 2.27355480194 
```

`dict[i]`是最快的，但这一次并不奇怪，因为不涉及函数调用。

# c++ - 我正在尝试为 C++ 中的数组创建一个添加函数

> ID：10566702
> 
> 赞同：-1
> 
> 时间：2012-05-12T19:22:47.247
> 
> 标签：c++, arrays

此添加函数将采用单个参数，该参数将是要添加到数组中的项目。我试过使用 for 循环，但它没有像我预期的那样工作。我目前只是想做这样的事情：

```
 bool homeworklist::add (homework h)
    {
    int i = 0;

    if(current_size < LIST_MAX){

        current_size += 1;

        list[i] = h;

        ++i;

        return true;
    }
    return false;
} 
```

current_size 只是一个计数器。list 是一个属于 homeworklist 类的数组 list 接受作业对象。如果对象添加成功，则该函数返回 true，如果添加不正确，则返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:28:07.457

该变量`i`是本地的，这意味着每次调用此函数时，它都会被初始化为 0，因为这行：

```
int i = 0; 
```

这反过来意味着在后续`if`语句中，您将元素分配到第一个位置，**每次**。

你可以创建`i`一个类成员，就像你可能声明的那样`current_size`。或者可能是你可以利用`current_size`它自己。

# css - 在 IE 9 中使用 CSS 在 div 中垂直居中多个可变大小的图像

> ID：10566703
> 
> 赞同：0
> 
> 时间：2012-05-12T19:22:50.743
> 
> 标签：css, internet-explorer, html, vertical-alignment

我已经看过并阅读了很多关于这个主题的帖子，但没有一个在我的环境中起作用，或者我做错了什么。我有一个 div，其中包含各种未知大小的图像和文本。我希望所有图像和 div 中的所有图像都垂直居中。我正在使用 Internet Explorer 9。

这是我的代码，为了简单起见，我删除了我尝试过的所有各种技术：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">
div.header
{
height:75px;
background-color:#FFF;
padding-left:10px;
padding-right: 10px;
}
div.headerleft
{
border: none; 
float: left; 
margin: 0; 
padding: 0; 
}

div.headerright
{
border: none; 
float: right; 
margin: 0; 
padding: 0; 
}
h1
{
font: 44px Tahoma, Geneva, Verdana, sans-serif;
margin-bottom: 0;
margin-top: 0;
padding-bottom: 0; 
padding-top: 0;
}   

img.centerImage
{
vertical-align:middle;
}    
</style>
</head>
<body>
<form id="form1" runat="server">
<div class="header">
    <div class="headerleft">
        <img class="centerImage" border="0" alt="Test 1" src="../Images/test1.jpg" />
        <img class="centerImage" border="0" alt="Test 2" src="../Images/test2.jpg" />
    </div>
    <div class="headerright">
        <h1>
            Centered Text Vertically
        </h1>
    </div>
</div>
</form>
</body>
</html> 
```

我想强调一下，文本和图像的大小未知。我发现这肯定会使解决方案复杂化。另外，根据 ActiveX 要求，我使用的是 Internet Explorer 版本 9。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:52:12.913

要使用垂直对齐，最好设置一个显示设置为表格单元格的包装器：

请参阅此[小提琴示例！](http://jsfiddle.net/zuul/eNXzp/)

**CSS：**

```
/* the vertical alignment class */
.centerImage {
    display: table-cell;
    vertical-align:middle;
} 
```

**HTML**

```
...
<div class="headerleft">
  <span class="centerImage">
    <img border="0" alt="Test 1" src="path_to_image.jpg" />
  </span>
  <span class="centerImage">
    <img border="0" alt="Test 2" src="path_to_image.jpg" />
  </span>
</div>
<div class="headerright">
  <h1 class="centerImage">Centered Text Vertically</h1>
</div>
... 
```

**测试：**

IE9、IE8、OPERA、Safari、火狐、K-MELEON、谷歌浏览器

**笔记：**

您应该为正确的 HTML 验证指定图像的宽度和高度，以便浏览器更好地理解。

**阅读有关此的更多信息：**

[CSS 显示属性](http://www.w3schools.com/cssref/pr_class_display.asp) | [CSS 垂直对齐属性](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp) | [CSS技巧：什么是垂直对齐？](http://css-tricks.com/what-is-vertical-align/)

* * *

# 已编辑

关于reisio给出的评论，要让左边的图像和右边的文本有相同的垂直点，我们可以用一个更简单的解决方案：

看[这里的小提琴！](http://jsfiddle.net/zuul/eNXzp/3/)

**相关的 CSS**

```
/* the trick you want */
.centerImage {
    vertical-align:middle;
}
div.headerleft {
    border: none;
    float: left;
    margin: 0;
    padding: 0;
    line-height: 75px;
}

div.headerright {
    border: none;
    float: right;
    margin: 0;
    padding: 0;
    line-height: 75px;
}
h1 {
    font-size: 44px;
    font-family: Tahoma, Geneva, Verdana, sans-serif;
    margin-bottom: 0;
    margin-top: 0;
    padding-bottom: 0;
    padding-top: 0;
} 
```

**相关的 HTML**

```
<div class="headerleft">
  <img class="centerImage" border="0" alt="Test 1" src="path_to_img.jpg" />
  <img class="centerImage" border="0" alt="Test 2" src="path_to_img.jpg" />
</div>
<div class="headerright">
  <h1 class="centerImage">Centered Text Vertically</h1>
</div> 
```

对于这个解决方案，我们使用设置为 img 标签的 vertical-align 和 line-height 来创建相同的垂直点并垂直对齐文本。

**你可以阅读：** [CSS line-height 属性](http://www.w3schools.com/cssref/pr_dim_line-height.asp)

# 已编辑

如果您无法`height`为图像设置 a，解决问题的唯一方法是使用一些**JavaScript****动态**查找最高图像并将其应用`height`到标签上`line-height`。`H1`

看到这个[工作小提琴！](http://jsfiddle.net/zuul/eNXzp/4/)

查询

```
$(document).ready(function() {

    // initialize the variable to 0
    var height = 0;

    // run by each image to find the tallest
    $('.headerleft img').each(function() {
        height = ($(this).outerHeight(true)>height) ? ($(this).outerHeight(true)) : height;
    });

    // vertical center the text
    $('.headerright h1').css({"line-height": height + "px"});
}); 
```

**注意：** *从**and中**删除了，因为不再需要它！`line-height``div.headerleft``div.headerright`*

# c++ - 将成员函数作为成员函数的参数传递

> ID：10566704
> 
> 赞同：1
> 
> 时间：2012-05-12T19:23:30.800
> 
> 标签：c++, class, function, pointers, member

我正忙于在引擎中创建一个 leveleditor 类，但我坚持将成员函数作为另一个成员函数的参数传递。

首先我做了一个typedef

```
typedef void (LevelEditor::*CallFunctionPtr)(); 
```

然后我做了一个成员函数来检查用户是否用鼠标点击了一个hitregion。如果是这样，则需要调用另一个函数。所以我的第一个成员函数有 2 个参数

关卡编辑器.h

```
void CheckClickCollision(HitRegion* region, CallFunctionPtr callFunctionPtr); 
```

关卡编辑器.cpp

```
void LevelEditor::CheckClickCollision( HitRegion* region, CallFunctionPtr callFunctionPtr)
{
    if(GAME_ENGINE->GetLButtonMouseState())
    {
        if(!m_bIsLeftPressed && region->HitTest(m_MousePosition))
            (this->*callFunction)();

        m_bIsLeftPressed = true;
    }
    else
        m_bIsLeftPressed = false;   
} 
```

然后我有两个愚蠢的示例成员函数：

关卡编辑器.h

```
void LevelUp();
void LevelDown(); 
```

关卡编辑器.cpp

```
void LevelEditor::LevelUp()
{
    ++m_iCurrentLevel;
}

void LevelEditor::LevelDown()
{
    if(m_iCurrentLevel > 0)
        --m_iCurrentLevel;
    else
        return;
} 
```

现在我想在每个滴答声中调用该函数来检查是否有命中。所以在我的刻度函数中：

```
CheckClickCollision(m_LeftArrowRegionPtr, LevelDown);
CheckClickCollision(m_RightArrowRegionPtr, LevelUp); 
```

在这里，我得到了 LevelDown 和 Levelup 的错误：

错误：void (LevelEditor::*)()" 类型的参数与 "CallFunctionPtr *" 类型的参数不兼容

不知道如何解决。尝试了不同的东西，没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:28:38.593

尝试

```
CheckClickCollision(m_LeftArrowRegionPtr, &LevelEditor::LevelDown);
CheckClickCollision(m_RightArrowRegionPtr, &LevelEditor::LevelUp); 
```

为方便起见，这里是工作示例（编译器是 GCC 4.7）：

```
#include <stdio.h>

class LevelEditor;

typedef void (LevelEditor::*CallFunctionPtr)();

class LevelEditor
{
public:
    LevelEditor() {}

    void CheckClickCollision(void* region, CallFunctionPtr callFunction)
    {
        (this->*callFunction)();
    }

    void LevelUp() { printf("up\n"); }
    void LevelDown() { printf("down\n"); }

    void Test()
    {
        CheckClickCollision(NULL, &LevelEditor::LevelDown);
        CheckClickCollision(NULL, &LevelEditor::LevelUp);
    }
};

int main()
{
    LevelEditor e;
    e.Test();

    return 0;
} 
```

另一种调用方式：

```
 void Test()
    {
        CallFunctionPtr p;
        p = &LevelEditor::LevelDown;
        CheckClickCollision(NULL, p);
        p = &LevelEditor::LevelUp;
        CheckClickCollision(NULL, p);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:48:07.960

如果您有支持的编译器，则需要使用`std::function`and或 lambdas。`std::bind`

```
void LevelEditor::CheckClickCollision( HitRegion* region, std::function<void()> callFunction)
{
    if(GAME_ENGINE->GetLButtonMouseState())
    {
        if(!m_bIsLeftPressed && region->HitTest(m_MousePosition))
            callFunction();

        m_bIsLeftPressed = true;
    }
    else
        m_bIsLeftPressed = false;   
}

void Test()
{
    // lambda
    CheckClickCollision(NULL, [this] { LevelDown(); });
    // bind
    CheckClickCollision(NULL, std::bind(&LevelEditor::LevelDown, this));
} 
```

# jquery - 如何将值从 jquery 附加到 html 文档

> ID：10566711
> 
> 赞同：1
> 
> 时间：2012-05-12T19:24:12.030
> 
> 标签：jquery

大家好，提前感谢您阅读本文。我目前使用一个我非常喜欢的滑块图片库，但不幸的是没有给你放大/缩放所选照片的​​选项。所以我找到了另一个可以解决问题的 jquery 脚本（称为漂亮的照片）。唯一的问题是漂亮的照片脚本不理解当前选择的图像是什么，并且总是显示该组的第一张照片。所以我想我必须从第一个脚本中获取当前照片值并将其附加到 preety 照片脚本读取的 href 值以放大当前照片。

我的html代码是

```
 <ul class="gallery clearfix">
        <li><a rel="prettyPhoto[gallery]"   href="../images/large/<#OBJECT#>_<#CURRENT_IMAGE#>.jpg">
        <img  src="../images/medium/<#OBJECT#>_1.jpg"  />
                    </a></li>
        </ul>
                    </div> 
```

获取当前照片值的 jquery 脚本部分是..

```
 var x = parseInt($("#currentPhoto").text()); 
```

所以我认为我必须将 x 值传递给我的 href 链接。我希望我说清楚了。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:28:18.110

我认为你的意思是`src`属性：

```
 var x = $("#currentPhoto").attr('src');
 $("a").attr('href', x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:28:59.810

```
$("a[rel='prettyPhoto[gallery]'").attr({href:x}); 
```

这段代码会将 attr href 设置为值 X；

或者实际上您只有数字，然后我们将相应地格式化它。

```
x = "../link/to/your/images/image_prefix_"+x+".ext"; 
```

# php - 带有按钮“是”“否”的确认框，没有 jquery 和 VBscript

> ID：10566714
> 
> 赞同：0
> 
> 时间：2012-05-12T19:24:18.987
> 
> 标签：php, javascript, ajax

> **可能重复：**
> [Javascript 确认弹出窗口是，否按钮而不是确定和取消](https://stackoverflow.com/questions/823790/javascript-confirm-popup-yes-no-button-instead-of-ok-and-cancel)

请有人帮我在不使用 jquery 或 VB.Script 的情况下使用“是”和“否”按钮制作一个确认框。我搜索了很多，但我用 jquery 得到了所有答案，但这不是我的要求。

我必须从确认框函数调用另一个函数。我在下面使用的代码

HTML

```
<a href="#" onlick="show_confirm('<?php echo $cat_id; ?>')">Delete</a> 
```

和 Javascript

```
<script type="text/javascript">
function show_confirm(cat_id)
{
  var conf = confirm("Are you sure you want to delete the file");
  if (conf ==true)
  {
    deleteCatagory(cat_id);
  }
}

function deleteCatagory(cat_id)
{
  var obj = document.getElementById("file_"+cat_id);
  callAjax(cat_id,obj);
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:34:46.927

很简单。您必须自定义编码一个带有“是”和“否”按钮的 HTML 框。Yes 按钮执行代码并隐藏框，No 按钮只是隐藏框。像这样简单的事情：

**HTML**

```
<div id="confirmation">
Are you sure you want to delete the category?<br>
<input type="button" onclick="deleteCategory(document.getElementById('catID').value);this.parentNode.style.display='none';" value="Yes">
<input type="button" onclick="this.parentNode.style.display='none';" value="No">
<input type="hidden" id="catID" value="0">
</div> 
```

**CSS**

```
<style type="text/css">
<!--
#confirmation {
display: none;
position: absolute;
top: 50%;
left: 50%;
background-color: white;
border: 2px solid white;
padding: 3px;
text-align: center;
width: 200px;
height: 50px;
}
</style> 
```

**更新`show_confirm()`：**

```
function show_confirm(catID) {
    document.getElementById('catID').value=catID;
    document.getElementById('confirmation').style.display='block';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:32:11.993

你需要自己创建它，这个：[http](http://dev.sencha.com/deploy/ext-4.0.0/examples/message-box/msg-box.html) ://dev.sencha.com/deploy/ext-4.0.0/examples/message-box/msg-box.html似乎有办法做到这一点，但这是来自5分钟的谷歌搜索。其他人建议使用 div 来做，这是我个人的喜好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T19:35:54.847

如果您对确认框为您提供的“确定”或“取消”选项感到满意，您只需要更正通话中的错字即可。我会这样做

```
<a href="JavaScript:void(0);" onclick="show_confirm('<?php echo $cat_id; ?>');">Delete</a>​ 
```

但是，如果您想更改默认文本，那么默认`confirm`弹出窗口就不走运了。你必须想出一个基于 html 的“弹出窗口”。

# java - 使用纸莎草在 eclipse 上显示一个 uml 文件

> ID：10566717
> 
> 赞同：0
> 
> 时间：2012-05-12T19:24:36.057
> 
> 标签：java, eclipse, uml, modeling

我想展示一个由 MoDisco 用 Papyrus 生成的 uml 文件，因为 UML2Tools 不适用于 eclipse indigo。那么有人可以解释一下我该怎么做吗？因为我看不到东西，虽然有一个 uml 文件。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:37:25.037

UML2 files are the model behind papyrus diagrams. You can import such a model into a papyrus model (importing the packages), but it is not automatically shown - you must add the elements you want to show manually.

# eclipse - 在 Eclipse 中自动缩进新行 - 如何禁用？

> ID：10566718
> 
> 赞同：10
> 
> 时间：2012-05-12T19:24:39.390
> 
> 标签：eclipse, code-formatting

这似乎是一个常见问题解答问题，因为我知道在 Eclipse 中为 Java 代码设置缩进的正确答案应该是什么（Windows -> Preferences -> Java -> Code Style -> Formatter），但我找不到确切的答案一个导致以下行为的选项，我想禁用它。

问题：每次我在一行上的一些文本之后按 Enter 键，编辑器都会将文本光标移动到前一行的开头，而不是添加一级缩进。如何在 Indigo 中禁用此功能？我需要每个新行都从上面的源代码行开始的位置开始。我在格式化程序首选项中尝试了很多控件 - 到目前为止没有任何帮助。也许我错过了什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-13T08:00:59.647

我发现了这个：Preferences -> Java -> Editor -> Typing，复选框**Enter 键调整新行上的缩进**。（此选项卡为编辑器提供了除格式化程序之外的额外智能，并且可以即时工作。根据个人编码实践调整其中一些选项可能会有所帮助。）

不幸的是，当此复选框关闭时，即使选项**自动插入正确位置：大括号**和**自动关闭 {Braces}**都打开，编辑器也会停止添加成对的花括号。我不明白为什么缩进选项会影响大括号，并且实际上禁用了这种非常方便的模式。

PS Smart 插入模式也已开启。

# facebook - 通过外部应用程序管理和删除 Facebook 评论

> ID：10566719
> 
> 赞同：1
> 
> 时间：2012-05-12T19:24:55.460
> 
> 标签：facebook, facebook-graph-api, comments, spam

我想在我们的网站上整合 facebook 评论（许多文章，许多作者）。根据经验，这些评论必须经过审核，我想实现两件事：

1.  应用自己的过滤技术来识别垃圾邮件并阻止发布。
2.  对谁可以进行审核进行精细控制（例如，作者对自己文章的评论）

你能告诉我如何实现这一目标吗？

到目前为止我的知识：如果我使用评论框，所有内容都会直接提交给 Facebook。我将能够通过 Graph API 访问评论，但不能以编程方式修改它们（例如，在 facebook 中删除它们？）。

a) 当我从 Graph-API 获得评论 ID 时，有没有办法通过 API 删除评论？

b) 或者，可以间接提交评论（访问者输入评论，版主批准，评论发送到 FB）

# actionscript - 你什么时候不使用-static-link-runtime-shared-libraries？

> ID：10566721
> 
> 赞同：3
> 
> 时间：2012-05-12T19:25:18.973
> 
> 标签：actionscript

`-static-link-runtime-shared-libraries`使用 编译 Actionscript 项目时，您是否有理由不将其设置为 true `mxmlc`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:46:40.460

如果您有多个应用程序用于一个项目，则使该框架可用作 RSL，从而使其他应用程序能够从缓存中加载它（它已由第一个应用程序加载到那里）并节省带宽和时间。如果将静态链接设置为 true，则每个应用程序都将包含增加文件大小的框架类。

如果您只有一个应用程序 .swf，链接框架作为 RSL 可以节省更新带宽 - 如果只有主 .swf 更改，您可以绕过缓存再次加载它，但加载所有缓存的 .swcs。

# jquery - jquery设置一个表格行的颜色

> ID：10566726
> 
> 赞同：-2
> 
> 时间：2012-05-12T19:26:01.557
> 
> 标签：jquery, colors

我需要能够将 jquery 中单个表行的颜色更改为红色，并将所有其他列为白色。

我已经为每个人设置了一个类，例如`<tr class=row1>`, `<tr class=row2>`。应该着色的当前行 id 的 javascript 变量是`id`.

我从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:31:13.930

```
$('tr:eq(0)', 'table')
    .siblings('color', '#fff') // select all tr except first one and change color
    .andSelf() // target to the first one
    .css('color', '#f00'); ​​​// change color of first tr 
```

您可以`:eq(index)` 根据目标元素更改索引。

**[演示](http://jsfiddle.net/bLA6F/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:33:42.343

我建议使用CSS，

例如，如果您想将 class="row1" 的第 3 行设置为红色，

```
 .row1:nth-child(3){
     background-color: red;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:28:44.353

## *[jsBin 演示](http://jsbin.com/oyicoy/edit#javascript,html,live)*

```
$('table tr').eq(  ).css({color:'red'}).siblings().css({color:'white'});
//               ^^-- set here the index number of the row you desire to change color 
```

# php - 对象数组的调用方法？

> ID：10566729
> 
> 赞同：1
> 
> 时间：2012-05-12T19:26:18.140
> 
> 标签：php, arrays, object, methods

如何从对象数组（包含对象数组）中调用方法。我读到：[在 PHP 中的对象数组中的每个项目上使用对象方法的结果获取数组，](https://stackoverflow.com/questions/1835791/get-array-with-results-of-object-method-on-each-item-in-an-array-of-objects-in-p)但无法获取。

这是我的测试代码：第一个对象保存属性，然后一个对象保存多个属性的记录。

```
/*--------------------------------- */
class SqliteAttribute {

    private $_fieldname = '';
    private $_fieldvalue = '';
    private $_type = 'TEXT';
    private $_key = true;

    function __construct($fieldname, $fieldvalue, $text, $key) {
        $this->_fieldname  = $fieldname;
        $this->_fieldvalue = $fieldvalue;
        $this->_text       = $text;
        $this->_key        = $key;
    }

    function AsArray() {
        $tempArray = array('fieldname'     => $this->_fieldname,
                           'fieldvalue'    => $this->_fieldvalue,
                           'type'          => $this->_type,
                           'key'           => $this->_key
        );
        return $tempArray;
    }
}

/*--------------------------------- */
class SqliteRecord {

    private $_attributes = array();

    function __construct() {
    }

    function AddAttribute($fieldname, $fieldvalue, $text, $key) {
        $attribute          = new SqliteAttribute($fieldname, $fieldvalue, $text, $key);
        $this->attributes[] = $attribute;
        var_dump($this->_attributes); // shows it!
    }

    function AsArray() {
        $temp_array = array();
        var_dump($this->_attributes); // shows nothing
        foreach ($this->_attributes as $key => $value) {
            $temp_array[] = $value->AsArray();
        }
        return $temp_array;
    }

} 
```

我这样称呼它

```
function updateFiles($files, $rootpath) {
    $recordset = new SqliteRecordSet;
    foreach ($files as $file) {
        $record = new SqliteRecord;
        $record->AddAttribute('Path', $file[0], 'TEXT', true);

        print_r($record->AsArray()); // shows nothing       
    }

    $recordset->insertIfNotExist_index();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:57:23.480

$this->attributes 与 $this->_attributes

您应该始终开发代码，将错误报告设置为 E_ALL 并打开 display_errors。php 会在这里通知你你的错误。

# mysql - 选择具有相同字母的数据

> ID：10566730
> 
> 赞同：0
> 
> 时间：2012-05-12T19:26:18.833
> 
> 标签：mysql, sql

我遇到了这个 SQL 的问题：

```
$sql = mysql_query("SELECT $menucompare ,
  (COUNT($menucompare ) * 100 / (SELECT COUNT( $menucompare )
  FROM data WHERE $ww = $button ))  AS percentday FROM data WHERE $ww >0  "); 
```

*   `$menucompare`是表字段名称选择的任何字段并包含以下数据
*   `$button`是选择的周数（比如说第 6 周）
*   `$ww`具有第 '6' 周数的行的表字段名称

例如，我有这样的数据`$menucompare`：

```
123456bool
521478bool
122555heel
147788itoo 
```

我想选择那些在最后一个数据中具有相同单词的人并制作百分比。

输出应该是这样的：

*   bool -- `50%` (2 个条目)
*   鞋跟—— `25%` （1 个条目）
*   itoo -- `25%` (1 个条目)

对我的 SQL 的任何清晰将不胜感激。我周围没有找到类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:44:03.980

好吧，以这种格式保存数据可能不是最好的方法，如果可能的话，将字段分成 2 个单独的字段。

首先，您需要从字段末尾提取字符串部分。

*   如果字符串/数字部分的长度是固定的，那么这很容易；
*   如果没有，您应该使用正则表达式，不幸的是，MySQL 默认不存在。有一个解决方案，检查这个问题：[How to do a regular expression replace in MySQL?](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

我假设，数字部分是固定的：

```
SELECT s.str, CAST(count(s.str) AS decimal) / t.cnt * 100 AS pct
  FROM (SELECT substr(entry, 7) AS str FROM data) AS s
  JOIN (SELECT count(*) AS cnt FROM data) AS t ON 1=1
 GROUP BY s.str, t.cnt; 
```

如果你将有`regexp_replace`功能，那么`substr(entry, 7)`应该更换以`regexp_replace(entry, '^[0-9]*', '')`达到所需的效果。

`substr`可以在[这里](http://www.sqlfiddle.com/#!2/6bde8/6)测试变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:41:20.607

在解决这样的问题时，我会分两步进行：

1.  独立于表示语言（PHP？）对 SQL 进行排序。
2.  在你知道你得到了正确的查询之后，对查询的参数化和结果的呈现进行排序。

由于这个问题被标记为“SQL”，我只打算解决第一个问题。

第一步是整理查询：

```
SELECT menucompare,
       (COUNT(menucompare) * 100 / (SELECT COUNT(menucompare) FROM data WHERE ww = 6))
          AS percentday
  FROM data
 WHERE ww > 0; 
```

`$`这会从大多数变量位中删除符号，并用 6 代替按钮值。这使它更容易理解。

您想要的输出似乎需要保留字符串的最后四个字符以`menucompare`用于分组和计数目的。

要汇总的数据将通过以下方式选择：

```
SELECT SUBSTR(MenuCompare, -4) AS Last4
  FROM Data
 WHERE ww = 6 
```

百分比中的除数是此类行的计数，但子字符串不是计算它们所必需的，因此我们可以这样写：

```
SELECT COUNT(*) FROM Data WHERE ww = 6 
```

这正是你所拥有的。

百分比中的红利将是每个子字符串的组数。

```
SELECT Last4, COUNT(Last4) * 100.0 / (SELECT COUNT(*) FROM Data WHERE ww = 6)
  FROM (SELECT SUBSTR(MenuCompare, -4) AS Last4
          FROM Data
         WHERE ww = 6
       ) AS Week6
 GROUP BY Last4
 ORDER BY Last4; 
```

当您证明这是可行的时，您可以重新参数化查询并处理结果的表示。

# php - 如何将 GMT 时区传递给 PHP DateTime 对象？

> ID：10566733
> 
> 赞同：2
> 
> 时间：2012-05-12T19:26:38.047
> 
> 标签：php, datetime, timezone

PHP DateTime 对象（更具体地说，DateTimeZone 对象）[**支持许多时区**](http://il.php.net/manual/en/timezones.php)。这一切都很好，但是有没有办法将 GMT 偏移量作为时区传递？

我知道可以简单地增加或减少时间并应用一些数学，但我想知道是否有一种内置的、强大的做事方式（或者我是否需要为此创建自己的抽象层）。

TL;DR 如何`GMT+N`在 PHP 的 DateTime 或 DateTimeZone 对象中将值作为时区传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:42:04.483

你可以这样做：

```
$tz = new DateTimeZone('etc/GMT+2'); 
```

但是有这个警告：

> 请不要使用此处列出的任何时区（UTC 除外），它们仅出于向后兼容的原因而存在。

该列表仅支持整个小时。您的一些用户可能生活在不按小时对齐的时区。另请注意，如果用户通过 UTC 偏移选择时间，他们将不得不在夏令时/夏令时期间每年更改两次。按位置选择消除了这种需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:44:07.413

您可以尝试使用“Etc/GMT??” [http://php.net/manual/timezones.others.php](http://php.net/manual/timezones.others.php)中列出的时区

不幸的是，这些值仅被标记为“向后兼容的原因”，但如果没有其他方法可以做到这一点，您也可以使用它们。请注意，这些值不包括纽芬兰等某些地区使用的 :30 偏移量，因此您稍后会遇到问题。

另一种选择是手动创建一个数组（），将每个时区映射到位于该区域某处的时区名称：

```
array(
    0 => "UTC",
    1 => "Europe/Paris",
    ...
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:44:15.223

您可以使用 DateTime 和 setTimestamp 执行此操作

说时间格式是这样的`Sun, 13 May 2012 01:07:00`

```
$currentDate = new DateTime();

$currentDate->setTimestamp(strtotime( $time.' GMT+0400')); 
```

> **注意**：您必须注意 DST

# ios - 动态单元格高度 iOS

> ID：10566736
> 
> 赞同：0
> 
> 时间：2012-05-12T19:26:46.163
> 
> 标签：ios, uitableview

我正在尝试动态重新计算包含`UITextView`. 单元格的高度取决于 UITextView 的高度。

下面的源代码重新计算表格中每个单元格的高度。这是来自 的一些文本`NSDictionary`。重新计算所有高度后，我用包含在数组 heightCells 中的新高度重新加载我的表格视图；

```
UITextView *tempTextView = [[UITextView alloc] init];
UIFont *font = [UIFont fontWithName:@"Helvetica" size:16.0];
[tempTextView setFrame:CGRectMake(10, 63, 300, 9999)];
[tempTextView setFont:font];
NSString *str =  [d valueForKey:@"definition"]; // set long text
tempTextView.text = str;
CGRect frame = tempTextView.frame;
frame.size.height = tempTextView.contentSize.height + 20.0;
tempTextView.frame = frame;
[tempTextView sizeToFit];
int height = tempTextView.frame.size.height + 150.0; // set padding 150.0 px
[heightCells addObject:[NSNumber numberWithFloat:height]]; 
```

`UITableView`方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return [[heightCells objectAtIndex:indexPath.row] floatValue];
} 
```

在非视网膜显示器上一切正常并且重新计算的高度正确，但在视网膜显示器上我有重新计算的问题。我知道视网膜而不是视网膜有一个 320x480 点视图，它不应该影响重新计算。但就我而言，这是出现的。

请看下面的截图。正如您在屏幕截图中看到的，共享按钮后的底部填充与视网膜显示不同，而不是视网膜显示。而且我不知道这是哪种问题。

![视网膜](../Images/1ac4d088c95eaf09b637ec3e9ff4f340.png)

![不是视网膜](../Images/8a08254f3d7e37f4000397bf091b5bce.png)

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:57:02.023

似乎`tempTextView`' 的框架在`UITableViewCell`. [我在这个答案](https://stackoverflow.com/a/10461833/1357250)中描述了我的工作技术。

# mysql - 如何在mysql查询中选择与最大日期相对应的值

> ID：10566739
> 
> 赞同：1
> 
> 时间：2012-05-12T19:27:07.347
> 
> 标签：mysql, max, min

我正在尝试编写一个查询，该查询通过 id 从表组中获取最大值和最小值。基本上，我有一个表格，可以从现有的 contract_id 中添加新的年度金额的续订，如下所示：

```
客户 ID | 合同编号 | 开始日期 | 结束日期 | 收入
6 | 125 | 2012-01-01 | 2012-12-31 | 10,000
6 | 126 | 2012-01-01 | 2013-12-31 | 5,000
6 | 125 | 2013-01-01 | 2013-12-31 | 12,000
6 | 126 | 2014-01-01 | 2015-12-31 | 8,000

```

我想取最小 start_date、最大 end_date 和该 end_date 的相应收入，按给定 customer_id 的contract_id 分组。

因此，理想情况下，查询将返回：

```
客户 ID | 合同编号 | 开始日期 | 结束日期 | 收入
6 | 125 | 2012-01-01 | 2013-12-31 | 12,000
6 | 126 | 2012-01-01 | 2015-12-31 | 8,000

```

我可以得到最大的东西，但是我在同一个查询中同时提取 MAX 和 MIN 时遇到了麻烦。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:31:18.077

使用联合使您能够将查询分成两半 - 一个用于“max”，另一个用于“min”，并且不要使用 min 函数的 max；而是按目标字段对数据进行排序并获取第一行。

```
select * from (
  select * from mytable
  where customer_id = ?
  order by start_date, created_at
  limit 1) x
union all
select * from (
  select * from mytable
  where customer_id = ?
  order by end_date desc, created_at desc
  limit 1
) y 
```

注意：这将始终返回 2 行，即使“min”和“max”行是同一行（如果客户只有一行）

### 编辑：

还订购`created_at`以打破关系（来自稍后添加的评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:52:14.843

您应该尝试此查询还查看屏幕截图以进行验证（*见图 1*）

```
SELECT r.`contract_id`,r.`start_date`,
(SELECT sub_r.`end_date` FROM `table` sub_r where sub_r.`contract_id` = r.`contract_id` 
ORDER BY sub_r.`revenue` DESC limit 1 )
AS `end_date`,
(SELECT sub_r.`revenue` FROM `table` sub_r where sub_r.`contract_id` = r.`contract_id` 
ORDER BY sub_r.`revenue` DESC limit 1 )
AS `revenue` 
FROM `table` r GROUP BY r.`contract_id`; 
```

> 图 1

![在此处输入图像描述](../Images/0dfee5fbc7797ccf87bc89552a5ecaaf.png)

# java - Groovy 或 Java 上的跨平台蜂鸣声

> ID：10566740
> 
> 赞同：2
> 
> 时间：2012-05-12T19:27:14.633
> 
> 标签：java, windows, linux, audio, groovy

我正在使用 Groovy 开发十六进制编辑器（请参阅[http://github.com/mcmenaminadrian](http://github.com/mcmenaminadrian)），我想给它一个类似 vi 的界面。

因此，在 vi 模式下，当用户按下退出键时，它应该发出“哔”声。我怎样才能做到这一点？如果我使用 java.awt.Toolkit.getDefaultToolkit().beep() 没有任何反应（无论如何在 Linux 上），如果我使用 System.out.print("\007"); System.out.flush() 我只是得到一个字符出现在控制台上。

由于这只是为应用程序增添光彩的东西我不想要很多代码（如其他一些答案中所建议的那样），所以也许没有可靠的方法来做到这一点 - 在这种情况下，哪个选项适用于 Windows，有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:30:48.330

I've always used `System.out.println("\b");`, should work cross-platform.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:53:17.177

它`println("\u0007")`- 你忘记了 \u，虽然 java.awt.Toolkit.getDefaultToolkit().beep() 应该可以工作 - 在 OS X 上都对我有用

你也可以使用`println((char)7)`

此外， beep() 应该更便携。您确定您的 Linux 机器有音频，并且扬声器已打开/打开吗？

# wmi - 无法访问 PerfRawData 或 PerfFormattedData

> ID：10566743
> 
> 赞同：1
> 
> 时间：2012-05-12T19:27:37.993
> 
> 标签：wmi

我的系统中缺少 Win32_PerfFormattedData_* 和 Win32_PerfRawData_* 类。

我正在运行 64 位的 Windows 7，并使用[WMICodeCreator](http://www.microsoft.com/en-us/download/details.aspx?id=8572 "WMI 代码创建者")浏览可用的类。WMICodeCreator 和我的 C# 代码都不能从它们那里获取信息，而且我还没有找到任何讨论这个特定问题的讨论板。

所有其他 WMI 类都运行良好。

会不会是我还没有启动的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:42:22.593

启动 perfmon 以查看计数器是否存在。如果您看不到计数器或 perfmon 显示一些不连贯的数据，则您的计数器已损坏；你将不得不重建计数器。一些可能对您有所帮助的链接：

[http://blogs.technet.com/b/yongrhee/archive/2009/10/06/how-to-rebuild-performance-counters-on-windows-vista-server2008-7-server2008r2.aspx](http://blogs.technet.com/b/yongrhee/archive/2009/10/06/how-to-rebuild-performance-counters-on-windows-vista-server2008-7-server2008r2.aspx)

[http://support.microsoft.com/kb/300956](http://support.microsoft.com/kb/300956)

[http://social.msdn.microsoft.com/Forums/en-US/perfctr/thread/51528a4d-509e-4f09-984d-367ecb4fff25](http://social.msdn.microsoft.com/Forums/en-US/perfctr/thread/51528a4d-509e-4f09-984d-367ecb4fff25)

# php - 如何从网页中获取内部链接？

> ID：10566747
> 
> 赞同：4
> 
> 时间：2012-05-12T19:28:04.630
> 
> 标签：php, parsing, dom, xpath, html-parsing

我`XPath`用来解析 HTML 网页以获取所有内部链接。`DOMXPath`将返回 中提供的所有链接`href`。如何分离内部链接和外部链接？

我引入了一系列字符串检查来删除外部链接；但问题是有不同的方法可以链接内部页面，例如

```
 page.html
    /page.html
    http://domain.com/page.html
    http://subdomain.domain.com/page.html
    .... 
```

区分内部链接（到当前域的任何链接，包括其子域）和外部链接（到任何其他域）的最安全方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T19:01:26.183

这是我使用 preg_match 编写的一个小示例。让我知道它是否有帮助。

```
<?php
function get_a_href($url){
    $url = htmlentities(strip_tags($url));
    $ExplodeUrlInArray = explode('/',$url);
    $DomainName = $ExplodeUrlInArray[2];
    $file = @file_get_contents($url);
    $h1count = preg_match_all('/(href=["|\'])(.*?)(["|\'])/i',$file,$patterns);
    $linksInArray = $patterns[2];
    $CountOfLinks = count($linksInArray);
    $InternalLinkCount = 0;
    $ExternalLinkCount = 0;
    for($Counter=0;$Counter<$CountOfLinks;$Counter++){
     if($linksInArray[$Counter] == "" || $linksInArray[$Counter] == "#")
      continue;
    preg_match('/javascript:/', $linksInArray[$Counter],$CheckJavascriptLink);
    if($CheckJavascriptLink != NULL)
    continue;
    $Link = $linksInArray[$Counter];
    preg_match('/\?/', $linksInArray[$Counter],$CheckForArgumentsInUrl);
    if($CheckForArgumentsInUrl != NULL)
    {
    $ExplodeLink = explode('?',$linksInArray[$Counter]);
    $Link = $ExplodeLink[0];
    }
    preg_match('/'.$DomainName.'/',$Link,$Check);
    if($Check == NULL)
    {
    preg_match('/http:\/\//',$Link,$ExternalLinkCheck);
    if($ExternalLinkCheck == NULL)
    {
    $InternalDomainsInArray[$InternalLinkCount] = $Link;
    $InternalLinkCount++;
    }
    else
    {
    $ExternalDomainsInArray[$ExternalLinkCount] = $Link;
    $ExternalLinkCount++;
    }
    }
    else
    {
    $InternalDomainsInArray[$InternalLinkCount] = $Link;
    $InternalLinkCount++;
    }
    }
    $LinksResultsInArray = array(
    'ExternalLinks'=>$ExternalDomainsInArray,
    'InternalLinks'=>$InternalDomainsInArray
    );
    return $LinksResultsInArray;
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:32:18.173

使用[substr()](http://php.net/manual/en/function.substr.php)查看前 4 个字符是否为 http。

如果是，请使用[parse_url()](http://php.net/manual/en/function.parse-url.php)函数检查主机是否相同。如果不是，那是内部的。

# playframework - tagCloud 使用哪个 API 来玩！框架？

> ID：10566749
> 
> 赞同：2
> 
> 时间：2012-05-12T19:28:13.400
> 
> 标签：playframework, tag-cloud

我正在为我正在使用的网络应用程序实现一个 tagCloud！框架来开发。我只是想问最好用的 API 是什么，我试图搜索在线教程，但没有找到。我想将此 tagCloud API 与数据库集成。所以我正在寻求有关使用哪个 API 的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T03:19:56.973

您可以使用[Echovoice 标签云生成器](https://echovoice.com/demos/tag-cloud)。它根据您的文本创建云并返回 PNG 的 base64 表示。这些方法可以很容易地通过 JavaScript 调用。

免责声明：我做了这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:12:47.303

我使用了来自 Google Visualization API - [http://visapi-gadgets.googlecode.com/svn/trunk/termcloud/doc.html](http://visapi-gadgets.googlecode.com/svn/trunk/termcloud/doc.html)的标签云。

它非常易于使用，只需使用 javascript 输出数据并为您的客户端生成标签云。

# vb.net - VB.net 中的阶乘程序和版本问题

> ID：10566756
> 
> 赞同：0
> 
> 时间：2012-05-12T19:29:30.723
> 
> 标签：vb.net

我买了 Francesco Balena 的 Visual Basic.net Core Reference 一书，并希望学习 Visual Basic，但我在本书的第一个控制台代码示例上已经遇到了问题。你是不是觉得这本书太老了，样本不再兼容今天的 VB.net？编译器提示我缺少 Sub Main()，但 Francesco 书中的示例没有 Sub Main()

```
Module MathFunctions 
'A public constant
Public Const DoublePI as Double = 6.2831853
'A private array
    Private factValues(169) As Double
'Return the factorial of a number in the range 0-169
    Public Function Factorial(ByVal n As Integer) As Double
'evvaluate all possible values in advance during the first call.
        If factValues(0) = 0 Then
            Dim i As Integer
            factValues(0) = 1
            For i = 1 To 169
                factValues(i) = factValues(i - 1) * CDbl(i)
            Next
        End If
'check the argument
        If n >= 0 And n <= 169 Then
'return the value in the array if argument is in range
            Factorial = factValues(n)
        Else
'raise an error otherwise
            Err.Raise(6, , "Overflow")
        End If
    End Function
      'The following code block (except End Module) is what I added to the code sample, but I'm still not getting any output from the console
    Sub Main()
     Factorial(32)
    End Sub
    End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:46:45.573

该程序执行得非常好。

您可能期望看到函数的返回值 - 但是，您没有在任何地方输出它。

如果您将您的更改`Main`为以下内容，您将看到结果：

```
Sub Main()
 Console.WriteLine(Factorial(32))
End Sub 
```

# assembly - 组装 FPU 堆栈断裂；导致 -1.#IND

> ID：10566759
> 
> 赞同：1
> 
> 时间：2012-05-12T19:30:07.727
> 
> 标签：assembly, x86, stack, nan, fpu

一般来说，我对组装很陌生，尤其是对 FPU 的使用。

我正在为学校写一个计算随机数数组的标准偏差的作业。

数组已加载，平均计算工作正常。整个过程适用于 7 个值或更小的数组，但返回 -1.#IND（这意味着 NaN？）对于 8 个或更多元素的数组大小。

循环中发生了一些事情，对 (mean - element)^2 值求和。我不确定发生了什么，但我假设 FPU 堆栈以某种方式中断。

如果有人能指出我正确的方向，我会非常高兴。

fla = REAL8

```
; STD DEVIATION
stdDev:
        call    meanCalcFunc            ; fmean = loaded

        mov     ebx, offset array1      ; Location of Element into EBX
        mov     ecx, [esp+4]            ; ECX = num of elements in array
        mov     mem1, 0                 ; Mem1 = 0
        fld     mem1                    ; ST = 0
        fstp    fla                     ; fla = ST = 0

mainFunc:
        mov     eax, [ebx]              ; Array Element into EAX
        mov     mem1, eax               ; Array Element into mem1
        fld     fmean                   ; ST = mean of array

        fisub   mem1                    ; mean - element -> ST

        fld     ST                      ; Now ST and ST(1) = difference of mean - element
        fmulp   ST(1), ST               ; Difference^2 in ST(1)

        fld     ST(1)                   ; Copy Difference^2 to ST

        fadd    fla                     ; FLA += Difference^2
        fstp    fla                 

        add     ebx, 4                  ; Move to next element in array
        loop    mainFunc

        fld     fla                     ; ST = Sum of squares

        mov     ecx, [esp+4]            ; Num of elements to ECX
        mov     mem1, ecx               ; Num of elements to mem1

        fidiv   mem1                    ; ST = Sum of squares / num of elements

        fst     fla

        fsqrt                           ; ST = final result

        fstp    fla                     ; flb = final result

        INVOKE _gcvt, fla, 8, ADDR outstring
        output  devlbl, outstring

        ret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T19:45:28.043

您的循环包含不平衡数量的加载和弹出，因此每次循环迭代都会在 x87 堆栈上多留下一项。当堆栈溢出时，您会得到正在观察的结果。不要那样做。

```
instruction        elements on stack
-------------------------------------------
mainFunc:          k
fld     fmean      k + 1
fisub   mem1       k + 1
fld     ST         k + 2
fmulp   ST(1), ST  k + 1
fld     ST(1)      k + 2
fadd    fla        k + 2
fstp    fla        k + 1
loop    mainFunc   k + 1 
```

# objective-c - 使用 touchesBegan 完全执行动作

> ID：10566761
> 
> 赞同：0
> 
> 时间：2012-05-12T19:30:45.620
> 
> 标签：objective-c, uiimageview, touchesbegan

我正在使用 - (void)touchesBegan... 来判断用户是否点击了屏幕上的任何位置。一旦用户点击屏幕，就会执行一个动作。然而，只要那个人抬起手指，动作就会停止。具体来说，当用户点击时，我正在运行一次 imageView.animateImages。我想这样做，如果他们点击并放手，动画将继续运行（我将 repeatCount 设置为 1）。有谁知道如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:59:21.090

You should probably use NSNotifications. Try something like this:

```
...

NSNotificationCenter *nc = [NSNotificationCenter defaultCenter]; 
[nc addObserver:self selector:@selector(nameOfAnimationMethod) name:@"touched" object:nil];

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [nc postNotificationName:@"touched" object:self]; 
} 
```

Let me run you through what this does. It creates a notification center, and adds the current object as an observer to the notification center, listening for the notification "touched". When the notification center posts the said notification, the object runs the method (selector) "nameOfAnimationMethod". If you look at the touchesBegan method override, you'll see that I posted a notification by the name "touched". This will trigger the object to run the method that you wanted it to.

# ms-access - 如何通过忽略一列对访问进行 sql 查询

> ID：10566764
> 
> 赞同：1
> 
> 时间：2012-05-12T19:31:08.157
> 
> 标签：ms-access

如何仅使用一列过滤查询，而不管其他列在 sql ms-access 中具有相同字段还是不同字段。

```
TABLE
person    product    sales

A         Z          100
B         R          100
A         R          200
A         X          500 
```

我希望结果是：

```
person   product    sales    total_sales
A        Z          100        800
A        R          200        800
A        X          500        800
B        R          100        100 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T05:05:14.507

在您的查询中，您可以使用子查询来获取您想要的 total_sales 字段的结果。

```
SELECT person, product, sales, (
    SELECT SUM(sales) AS sum_of_sales
    FROM sales_table sub_sales
    WHERE sub_sales.person = main_person.person
) AS total_sales
FROM person_table main_person
JOIN product_table main_product
JOIN sales_table main_sales 
```

只是伪代码，您当然需要创建正确的连接。

# java - JAXB returns null for attributes with a namespace

> ID：10566766
> 
> 赞同：5
> 
> 时间：2012-05-12T19:31:15.033
> 
> 标签：java, jaxb

I need to unmarshall an XML that has namespaces for the attributes, for instance

```
<license license-type="open-access" xlink:href="http://creativecommons.org/licenses/by/2.0/uk/"><license-p> 
```

This attribute is defined as

```
@XmlAttribute(namespace = "http://www.w3.org/TR/xlink/")  
@XmlSchemaType(name = "anySimpleType")  
protected String href; 
```

But when I try to retrieve the href, it is null. What should I add/modify to the jaxb code in order to get the right value? I already tried to avoid namespaces but it did not work, still null. I also tried with `@XmlAttribute(namespace = "http://www.w3.org/TR/xlink/", name = "href")` but it did not work either.

The top of the XML file is:

```
<DOCTYPE article
  PUBLIC "-//NLM//DTD v3.0 20080202//EN" "archive.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" article-type="article"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:10:01.360

Below is an example of how to specify the `namespace` property on the `@XmlAttribute` annotation.

**input.xml**

```
<article xmlns:xlink="http://www.w3.org/1999/xlink">
    <license xlink:href="http://creativecommons.org/licenses/by/2.0/uk/"/>
</article> 
```

**License**

```
package forum10566766;

import javax.xml.bind.annotation.XmlAttribute;

public class License {

    private String href;

    @XmlAttribute(namespace="http://www.w3.org/1999/xlink")
    public String getHref() {
        return href;
    }

    public void setHref(String href) {
        this.href = href;
    }

} 
```

**Article**

```
package forum10566766;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Article {

    private License license;

    public License getLicense() {
        return license;
    }

    public void setLicense(License license) {
        this.license = license;
    }

} 
```

**Demo**

```
package forum10566766;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Article.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10566766/input.xml");
        Article article = (Article) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(article, System.out);
    }

} 
```

**Output**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<article xmlns:ns1="http://www.w3.org/1999/xlink">
    <license ns1:href="http://creativecommons.org/licenses/by/2.0/uk/"/>
</article> 
```

**Want to Control the Namespace Prefixes?**

If you want to control the namespace prefixes used when the document is marshalled to XML check out the following article:

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

# java - 我需要将我的 java 应用程序连接到 windows 7 x64 中的 accses 数据库吗？

> ID：10566770
> 
> 赞同：0
> 
> 时间：2012-05-12T19:32:05.460
> 
> 标签：java, sql, windows-7, database-connection, ms-access-2007

```
try{
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

        Connection conn= DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=D:\\DataBase1.mdb","","");
     int id=Integer.parseInt(JOptionPane.showInputDialog("Enter ID"));
     String name=JOptionPane.showInputDialog("Enter Name");
     String Phone=JOptionPane.showInputDialog("Enter PHone");
String mobile=JOptionPane.showInputDialog("Enter Moblie");
//String sql="insert  into friends values "id,'"+home
     Statement ss=conn.createStatement();
       ss.executeUpdate("insert into friends values("+id+",'"+name+"','"+Phone+"','"+mobile+"')");
        Statement s=conn.createStatement();

        ResultSet res=s.executeQuery("select*from friends order by id");
        while(res.next()){
            System.out.println(res.getString(1)+"\t"+res.getString(2)+"\t"+res.getString(3)+"\t"+res.getString(4));

        }
    }catch(Exception e){
     JOptionPane.showMessageDialog(null, e.getMessage());
    }

    } 
```

这是我的代码但是当我运行它时这个异常显示（“java.sql.SQLException: ??[Microsoft][ODBC Driver Manager] ???? ??? ???”）不知道是什么问题请帮忙？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:43:27.773

使用 PreparedStatement 代替 Statement 怎么样？我认为您的代码不接受硬编码的变量！而且，为了避免陷入更多麻烦，请记住关闭连接。

你还需要星星周围的空间`"select * from friends order by id"`

# python - Python 类实例 __dict__ 不包含所有实例变量。为什么？

> ID：10566774
> 
> 赞同：3
> 
> 时间：2012-05-12T19:32:28.017
> 
> 标签：python, class, python-2.7

这是一个关于实例变量的新手 Python 问题。

考虑以下 Python 2.7 类定义：

```
class Foo(object):
    a = 1

    def __init__(self):
            self.b = 2

    def __repr__(self):
            return "%s" % self.__dict__ 
```

现在，当我创建 , 的实例时`Foo`，`Foo.__dict__`contains `b`，但不是`a`.

```
>>> x=Foo()
>>> x
{'b': 2}
>>> dir(x)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', 
 '__getattribute__', '__hash__', '__init__', '__module__', '__new__', 
 '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__',
 '__str__', '__subclasshook__', '__weakref__', 'a', 'b']
>>> x.__dict__
{'b': 2} 
```

在这里，我认为我对 Python 之道有很好的掌握。

`x.a`和有什么区别`x.b`？据我所知，它们都是实例变量。

**编辑**：好的，重新阅读我看到的[Python 文档](http://docs.python.org/tutorial/classes.html#class-objects)`Foo.a`是*类属性*而不是实例变量。嗯......我想混乱来自这样一个事实，即我可以分配一个新值`x.a`并且新值只影响`x`实例 - 我想我现在在`Foo.a`属性顶部为一个成员变量起别名：

```
>>> y=Foo()
>>> y.a = 2
>>> y
{'a': 2, 'b': 2}
>>> x
{'b': 2}
>>> x.a
1
>>> z=Foo()
>>> z
{'b': 2}
>>> z.a
1
>>> Foo.a
1
>>> x.a
1
>>> y.a
2 
```

所以，现在我覆盖之前的值`Foo.a`，它会影响所有`Foo`没有别名的实例`Foo.a`：

```
>>> Foo.a=999
>>> x.a
999
>>> y.a
2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T19:33:28.253

你`a`不是一个实例变量。您将其定义为类的一部分。

```
>>> class Foo(object):
...    a = 1
...
>>> Foo.a
1 
```

如果你想要一个实例变量，你应该把它放在`__init__`方法中，因为这个方法在你的对象被创建时被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T19:33:20.140

`a`不是实例属性，而是类属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:54:01.977

这可以进一步帮助您吗？

```
>>> class X(object):

    def __getattribute__(self, name):
        print name
        return object.__getattribute__(self, name)

>>> l = dir(X())
__dict__
__members__
__methods__
__class__
>>> l
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__'] 
```

# node.js - 我如何在 jqtpl-node 中定义变量

> ID：10566775
> 
> 赞同：1
> 
> 时间：2012-05-12T19:33:06.487
> 
> 标签：node.js, jquery-templates, express

我在 jqtpl 中使用 express js，我需要在 jqtlp 中定义临时变量以保留每个循环的一些信息。这是我的尝试：

```
{{var tmp = ""}}
{{tmp = ""}}
${var tmp = ""} 
```

我的尝试总是不起作用。如何定义变量？有可能吗？不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:43:50.707

您可以通过评估模板标签中的表达式来定义局部变量：

```
${( $local = 'Local variable' ),''} 
```

# php - Linux 和 Windows 进程之间的 IPC

> ID：10566779
> 
> 赞同：1
> 
> 时间：2012-05-12T19:33:34.823
> 
> 标签：php, asp.net, mysql, oracle, informix

Linux进程如何访问和查询一个托管在windows系统中的数据库？我有一个带有 mysql 的 Web 应用程序，我将不得不在 Linux 中创建一个数据库，然后我需要一个应用程序来访问 Windows 中数据库中的 [inner join] 表和 Linux 中的那个表。

我公司的一位项目经理正在考虑使用服务器脚本和 mysql 数据库数据向 yahoo messenger 发送消息。消息存储在一个表中，并在特定的设置日期触发。她使用为 Linux 系统制作的库来发送消息（IPC 类型）。我有点搞砸了，想知道这是否真的可行。

我得出的结论是，这个家伙实际上不知道 IPC 是什么，只是尝试用 Messenger 搞乱一个普通的库。还是我？你的想法和解释是我将在周一的谈话中战斗的内容，我喜欢嘴上的战斗！

我打赌他正在使用这个[http://labs.gree.jp/Top/OpenSource/DBus-en.html](http://labs.gree.jp/Top/OpenSource/DBus-en.html)

??????????

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:37:48.410

> 问：Linux 和 Windows 进程之间的 IPC

答：您最好的选择可能是 1) 套接字（如果可行），或 2) Web 服务

> 问：我公司的一位项目经理想使用服务器脚本和 mysql 数据库数据向 yahoo messenger 发送消息。

问：他/她一直在吸烟吗？团队可以分享一两个toke吗？

> 问：我有一个带有 mysql 的 Web 应用程序，我将不得不在 Linux 中创建一个数据库，然后我需要一个应用程序来访问 Windows 中数据库中的 [inner join] 表和 Linux 中的那个。

这确实是一个单独的问题。如果两台服务器位于同一 LAN 上，则有多种“链接”选项。

否则，我只会将单独的数据库*视为*单独的数据库并使用某种 Web 服务（Windows 上的 WCF 可能是一个不错的选择；Linux 上的 Tomcat 或 JBoss）来“链接”两者。

# database-design - 用于合并数据库的复合主键或 guid

> ID：10566783
> 
> 赞同：2
> 
> 时间：2012-05-12T19:34:27.580
> 
> 标签：database-design, relational-database, replication

我有这样的场景：

我有很多机器，每台机器上都有数据库。还有一台客户端机器可以从所有机器中提取数据并添加到他的本地数据库中（它可能有以前下载的数据）。因此，“许多”数据库上的表需要一些唯一标识符。

`many`- 每台机器上的数据库

`merged`- 从数据库中提取数据的客户端计算机上的`many`数据库。

我的两个想法：

1.  `GUID``many`数据库和`GUID`合并数据库中的主键。在这里，我还需要机器的列 id 来区分机器之间的行。

2.  数据库中的整数主键`many`和合并中的复合键（机器的 GUID id +`many`数据库中的整数主键）

    这里我假设每个`many`数据库本身不需要 GUID，而只需要`merged`一个，所以 GUID 是唯一需要的`merged`，它是一个复合键。

对于这种情况，什么是更好的选择？也许我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:24:02.750

`GUID` is ideal for such a system - it practically ensures that no primary key collisions will occur. Since you are designing it, you can use GUIDs as temporary identifiers in your `many` databases and replace them with integer keys in the `merged` one.

Another option is to partition the ID's between the `many` databases, so each can only use a range of IDs that non of the others can use. This is not trivial to do well (i.e. without having an estimate of how long these databases can exist without resync you may "overflow", you need to be able to offer additional ranges once a database "runs out" etc...) and may not suit your particular needs.

# php - 使用 mysql 和 php 只返回一次月份和日期

> ID：10566788
> 
> 赞同：0
> 
> 时间：2012-05-12T19:35:08.293
> 
> 标签：php, mysql, arrays, date

我正在创建一个帖子存档，我想在以年/月格式创建文章时创建存档链接。

数据库中创建的日期以`YYYY-MM-DD`格式存储，到目前为止已经写了。

```
$archive =
  mysql_query("SELECT DISTINCT DateCreated FROM blog ORDER by DateCreated")
  or die("Could not execute query");

while($row = mysql_fetch_array($archive) ){ 
  $Date = explode("-", $row["DateCreated"]);
  $Year = $Date[0];
  $Month = $Date[1];

  // Months of the year.
  $MonthName = array(
    "01" => "JAN",
    "02" => "FEB", 
    "03" => "MAR",
    "04" => "APR",
    "05" => "MAY",
    "06" => "JUN",
    "07" => "JUL",
    "08" => "AUG",
    "09" => "SEP",
    "10" => "OCT",
    "11" => "NOV",
    "12" => "DEC");    

 $archiveData .=
   "<a href='archive.php?".$Year."-".$Month.
   "'>".$MonthName[$Month]."-".$Year."</a><br />"; 
} 
```

如果我将这些日期存储在我的数据库中

```
2012-04-07, 
2012-05-02, 
2012-05-13, 
2012-02-22, 
```

然后上面的代码生成链接为

```
FEB-2012, 
APR-2012, 
MAY-2012, 
MAY-2012, 
```

它显示了已经添加的月份，我需要做的是限制它只显示一次。

我想我需要更改查询但不确定如何获得我需要任何帮助的结果将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:39:50.907

```
SELECT DISTINCT
  YEAR(DateCreated) AS yyyy,
  MONTH(DateCreated) AS mm
FROM blog 
ORDER BY DateCreated 
```

并相应地

```
$Year = $row["yyyy"];
$Month  = $row["mm"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:40:40.083

你会尝试选择

```
DATE_FORMAT(DateCreated , '%m/%Y') 
```

而不是“创建日期”？不确定结果，但据我所知，这应该可以解决您的问题。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T19:47:05.120

我认为这个查询对你来说是完美的——它选择前 3 个月的字母和时间戳的年份。

```
SELECT 
   substr(MONTHNAME(DateCreated), 1, 3) as month, 
   YEAR(DateCreated) as year
FROM blog 
ORDER by DateCreated DESC 
```

**编辑：** 经过几次测试，我为您做了完美的查询-它以`JAN-2012`格式返回日期，因此无需在 PHP 中格式化日期。这里是：

```
SELECT 
   CONCAT( UPPER(substr(monthname(DateCreated), 1 ,3)), '-', YEAR(DateCreated)) as date
FROM blog 
ORDER by DateCreated DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T19:56:40.617

我的最终结果是这样的。

```
$archive = mysql_query("SELECT DISTINCT YEAR(DateCreated) AS YYYY, MONTH(DateCreated) AS MM FROM blog ORDER BY DateCreated") or die("Could not execute query");

                while($row = mysql_fetch_array($archive) ){

                $Year               = $row["YYYY"];
                $Month              = sprintf("%02s",$row["MM"]);

                // Months of the year.
                $MonthName = array(
                                    "01" => "JAN",
                                    "02" => "FEB", 
                                    "03" => "MAR",
                                    "04" => "APR",
                                    "05" => "MAY",
                                    "06" => "JUN",
                                    "07" => "JUL",
                                    "08" => "AUG",
                                    "09" => "SEP",
                                    "10" => "OCT",
                                    "11" => "NOV",
                                    "12" => "DEC"
                                );    

                    $archiveData .=   "<a href='archive.php?".$Year."-".$Month."'>".$MonthName[$Month]."-".$Year."</a><br />"; 
                } 
```

# c - 结构无效的初始化程序错误

> ID：10566790
> 
> 赞同：3
> 
> 时间：2012-05-12T19:35:10.017
> 
> 标签：c

我有两种结构，一种是基本的，position_3d。另一个是雷。

```
typedef struct{
float x,y,z;    
} position_3d;

typedef struct{
vector_3d direction;
position_3d startPosition;  
} ray; 
```

我已经实现了一个返回 position_3d 结构的函数

```
position_3d getIntersectionPosition(ray r, sphere s){
    position_3d pos; 
    //some code

    pos.x = r.startPosition.x + t*r.direction.x; 
    pos.y = r.startPosition.y + t*r.direction.y; 
    pos.z = r.startPosition.z + t*r.direction.z;  
    return pos; 
} 
```

当我打电话时

```
position_3d pos = getIntersectionPosition(r, s); 
```

我得到了这个错误无效的初始化程序。我正在使用 gcc。编译命令是 gcc prog.c -o prog.out -lm -lGL -lGLU -lglut

我现在真的被困住了！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:52:55.633

是线

```
position_3d pos = getIntersectionPosition(r, s); 
```

在文件范围（那么这是一个错误，因为初始化程序不是常量）或块范围（那么它应该可以工作）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:08:19.780

在我们看到代码是否应该可编译之前，还有很多空白需要填补：

*   类型`sphere`?
*   类型`vector_3d`?
*   变量`t`?

当我们为这些类型提出看似合理的假设时，如以下代码（文件`sphere.c`）：

```
typedef struct
{
    float x,y,z;
} position_3d;

typedef struct
{
    float x, y, z;
} vector_3d;

 typedef struct
{
    vector_3d direction;
    position_3d startPosition;
} ray;

typedef struct
{
    float radius;
    position_3d centre;
} sphere;

position_3d getIntersectionPosition(ray r, sphere s)
{
    position_3d pos;
    float t = s.radius;

    pos.x = r.startPosition.x + t*r.direction.x;
    pos.y = r.startPosition.y + t*r.direction.y;
    pos.z = r.startPosition.z + t*r.direction.z;
    return pos;
}

position_3d func(ray r, sphere s)
{
    position_3d pos = getIntersectionPosition(r, s);
    return pos;
} 
```

然后我可以编译使用：

```
$ /usr/bin/gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
       -Wold-style-definition -c sphere.c
sphere.c:24: warning: no previous prototype for ‘getIntersectionPosition’
sphere.c:35: warning: no previous prototype for ‘func’
$ 
```

这些警告是正确的；它们由`-Wmissing-prototypes`选项提示。通常，会有一个声明类型和函数的标题。

因此，通过演示，如果编写得当，代码可能是正确的。在 C 中，您不能修改代码以使其显示为：

```
ray         r;
sphere      s;
position_3d pos = getIntersectionPosition(r, s);

position_3d func(void)
{
    return pos;
} 
```

然后发出警告：

```
sphere.c:43: error: initializer element is not constant 
```

但是，如果您使用`g++`而不是编译`gcc`（并删除特定于 C 的选项，离开）：

```
$ g++ -O3 -g -Wall -Wextra -c sphere.c
$ 
```

然后它可以干净地编译——再次证明 C 和 C++ 不是同一种语言，而不是你声称的那样。

我得到的错误不是你声称得到的错误。这意味着我无法准确猜测您在代码中所做的事情。所以，请：

*   **修改此示例代码**，直到它重现您遇到的错误。请注意，编译不需要头文件，不需要库（我们只需要获取一个目标文件，因此库是无关紧要的；除了标准头文件之外，您没有使用任何东西，看起来（最多），但删除了所有相关的头文件到 GL）。允许使用 C 标准或 POSIX 标准的标头，但不是必需的。
*   **将此代码的修改添加到问题的末尾**（保持现有材料不变）。
*   **显示您在这组严格的 C 编译选项下**得到的确切编译器警告。**（这意味着应该至少有两个警告——因为缺少以前的原型。但也应该有一个错误，你声称的那个会阻止你的代码工作。）我们应该能够关联你的错误中的行号对您显示的代码微不足道的消息。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:44:00.050

问题是由于功能顺序不正确。我的意思是我需要在调用它们之前定义所有函数的签名。**

# facebook - 从 facebook 应用程序中删除提要项目

> ID：10566791
> 
> 赞同：1
> 
> 时间：2012-05-12T19:35:15.037
> 
> 标签：facebook, facebook-graph-api, facebook-authentication

facebook 应用程序是否可以从用户的提要中删除特定项目？这些项目可以由用户安装的朋友或其他应用程序或在用户墙上发布的朋友应用程序生成。

如果这是可能的，那么需要什么样的权限才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:48:14.787

见这里：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

> 只要**您的应用程序创建了帖子，您就可以删除帖子**。您可以通过向具有 publish_stream 权限的 POST_ID 对象发出 HTTP DELETE 请求来删除帖子。

所以对您的问题的回答是：不，您不能删除随机帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:55:04.920

应用程序只允许删除该应用程序创建的帖子。您将无法删除其他用户/应用程序发布的内容。

删除（以及发布）帖子需要`publish_stream`获得许可。

如果您知道`id`提要故事的内容，只需发出`DELETE`请求：

```
https://graph.facebook.com/POST_ID?method=delete 
```

# ef-code-first - Entity Framework Code First，一个类有两个对另一个类的引用

> ID：10566794
> 
> 赞同：1
> 
> 时间：2012-05-12T19:35:30.920
> 
> 标签：ef-code-first

我喜欢 EF Code First，但有时在 SQL 中定义表似乎更容易。

在这种情况下，我有两个模型，如下所示：

```
public class Book
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<BookRecommendation> BookRecommendations { get; set; }
    // additional properties about the item
}

public class BookRecommendation
{
    public int Id { get; set; }
    // public int BookId { get; set; } // from attempts to use data annotations
    public virtual Book Book { get; set; }
    // public int BookRecommendedId { get; set; } // from attempts to use data annotations
    public virtual Book BookRecommended { get; set; }
    // additional properties about the relationship between the two items
} 
```

不幸的是，我无法让它与数据注释或流式 API 一起正常工作。

在 Entity Framework 4.1 code first ，[Entity Framework 4.1 InverseProperty Attribute 和 ForeignKey](https://stackoverflow.com/q/5828394/11912)中存在[多个指向同一个表的](https://stackoverflow.com/q/6015964/11912)问题，以及其他类似的问题，但这些问题往往涉及两端的集合。

我的模型可能是错误的，因为很早就开始感到沮丧，我想如何在 SQL 中做到这一点：

```
Book
    Id
    Name
    // other properties

Recommendation
    Id
    BookId
    RecommendedBookId
    // other properties 
```

`Book.Id : Recommendation.BookId`然后在和之间会有外键`Book.Id : Recommendation.RecommendedBookId`。

我需要通过数据注释或流畅的 API 做什么才能使其正常工作，或者我应该如何修改我的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:10:15.083

```
public class Book
{
    public int BookID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<BookRecommendation> BookRecommendations { get; set; }

}

public class BookRecommendation
{
    public int BookRecommendationID { get; set; }
    public int BookID { get; set; } 
    public string remarks { get; set; } //Some recommendation text

    public virtual Book Book { get; set; }

} 
```

我想这应该可以解决问题！它将为它创建一个 Book 实体和一个 Recommendations 集合。这意味着一本书可以有很多推荐，而推荐只属于一本书。当一本书被创建，然后你尝试为它写推荐信时，你会看到有一个下拉框，通过它的“BookID”来显示这本书的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T08:50:29.573

好问题。抱歉，我花了一年时间才找到这个。

您需要告诉 EF 您与 Book 的 2 个关系中的哪一个是 BookRecommendation 使用 InversePropertyAttribute 指向的[那个](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.inversepropertyattribute.aspx)。在代码中：

```
public class Book
{
    public int Id { get; set; }
    public string Name { get; set; }

    [InverseProperty("BookRecommended")]
    public virtual ICollection<BookRecommendation> BookRecommendations { get; set; }
    // additional properties about the item
}

public class BookRecommendation
{
    public int Id { get; set; }

    [ForeignKey("Book")]
    public int BookId { get; set; }
    public virtual Book Book { get; set; }

    [ForeignKey("BookRecommended")]
    public int BookRecommendedId { get; set; }
    public virtual Book BookRecommended { get; set; }
} 
```

因此，Book 上的 InverseProperty 将 BookRecommended 属性命名为 BookRecommendation 上的属性，因此 EF 清楚地知道该 FK 指的是 2 个 FK 中的哪一个。为了更好地衡量，2 ForeignKey 属性可以显式命名 BookRecommendation 上的 FK 属性 - 如果需要，您可以摆脱额外的属性，但如果您保留它们，则该属性必须存在。

# database - 没有区分列的 Symfony 2 项目中的 Doctrine 2 继承？

> ID：10566795
> 
> 赞同：0
> 
> 时间：2012-05-12T19:35:31.773
> 
> 标签：database, inheritance, symfony, doctrine-orm

我正在为有两种用户类型的 Symfony 2 创建一个包。将只使用一种用户类型（该类在服务配置中指定）。我定义了两个`User`继承自一个通用基类的类（使用单表继承）。但是，鉴别器列对我来说似乎是浪费空间。有没有办法在不使用 STI 的情况下从基类继承？

如果我忽略`InheritanceType`注释，Symfony 控制台命令`doctrine:update:schema`会尝试创建用户表两次并抛出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:28:54.917

继承模型依赖于鉴别器列来工作。你不能离开它。

这不是浪费空间。你用一点空间换取更可靠和高性能的 ORM。

# android - Webkit 渐变文本在 android 上显示为实心块

> ID：10566799
> 
> 赞同：1
> 
> 时间：2012-05-12T19:36:32.257
> 
> 标签：android, text, webkit

我正在为文本使用 webkit 渐变，并回退为纯色，但在 android 上它只显示为一个纯色渐变块。有没有办法让它在 android o/s 上工作或至少使用纯色后备？

```
color:#eaeaea;
background: -webkit-gradient(linear, left top, left bottom, from(#F4F4F4), to(#555));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent; 
```

# algorithm - 保护空中协议的最佳实践

> ID：10566805
> 
> 赞同：0
> 
> 时间：2012-05-12T19:37:38.793
> 
> 标签：algorithm, security, md5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:51:25.470

我假设，每个节点“知道”它应该从中获取命令的节点 - 在这种情况下，接收节点为它将从中获取命令的每个节点存储一个（简单）密钥，然后将三个字段添加到协议中：

*   一个盐（发件人创建的随机数）
*   序号
*   身份验证字段

发送者和接收者都为 tx->rx 关系存储最后使用的序列号，发送者在每个命令中都会增加它。

发送者和接收者都创建连接的哈希（SHA1？）`SequenceNumber+Command+SequenceNumber+salt+nodekey`

**编辑：** `nodekey`是**发送**节点的密钥

发送方将此作为身份验证字段发送，接收方将其与身份验证字段进行检查并仅在序列号高于 LRU 序列号且身份验证字段检查正常时接受命令。

这对于重放攻击是安全的，因为它涉及序列号重用。

**编辑：**

评论中有关于序列号同步丢失的担忧，但建议的解决方案对此有弹性：只有**发送方**会增加 SN，接收方将接受高于上次使用的所有 SN。消息的丢失会使 SN 跳变，但仍会被接受为高于 LRU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:17:21.837

> 假设我使用类似 MD5 的方式加密消息，我将传输类似“767b79ebb8061054d3ad1eaef428b469”的内容，

您不使用 MD5 加密。您发送命令的哈希值。这意味着在接收端，您需要有一个反向查找表来将您发送的消息摘要映射到相应的命令。

> 攻击者只需要复制该字符串并重新发送即可获得相同的结果。

这是一个有效的问题，它属于[Replay Attack](http://en.wikipedia.org/wiki/Replay_attack)的类别。有很多方法可以解决这个问题，但您需要付出相当多的努力来重新设计您的发射器和接收器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T20:56:58.217

由于您使用的是微控制器，因此我假设您没有最先进的加密功能，而易于实现的东西通常是 imo 的最佳方式。

如果您的控制器上有可用的 MD5，我会使用 Eugen Rieck 方法，但我只想说，您只能使用每个键一次，例如 10 天或其他时间（取决于您发送的数据量）。

这使得它已经更加安全，除非他们进行一些长期聆听，否则他们将无法使用您的命令。

请记住，这是一种[通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)性，如果他们的攻击者知道它只有 10 天的冷却时间，它就不会起作用。

如果您的设备上确实有加密功能和当前时间，我只会在当前时间使用基本的基本加密功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-12T19:49:52.470

您应该考虑使用某种依赖于密钥的加密。当然，关键可能必须以两个控制器可以保持同步的某种方式确定——也许使用一天中的时间的某种方式就足够了。类似于 PHP 的`time()`函数，四舍五入到最接近的百位。每个控制器在收到信号时都可以检查当前的舍入时间戳和之前的时间戳，因此如果攻击者收到加密信号，它最多只能重复使用 200 秒。根据传输每个信号所需的时间和所需的安全级别（以及可能错过信号的逃脱频率），您可能会舍入到十到五秒。使用一些伪代码（四舍五入到十）：

**发送：**

```
signal=encrypt(outgoing, round(time, 10))
sendSignal(signal) 
```

**接收：**

```
signal=decrypt(incoming, round(time, 10))
if (invalid(signal)) {signal=decrypt(incoming, round(time, 10)-10)}
interpretSignal(signal) 
```

如第二行所示，您需要某种方法来确定解密信号是否有效。

这就是我想出的一种应该始终相当同步的通用密钥机制。但是，基本思想是使用发送者和接收者都知道或可以确定的频繁更改的密钥对信号进行加密。

# java - GREP 如何只检索仅包含指定字母的单词？

> ID：10566812
> 
> 赞同：2
> 
> 时间：2012-05-12T19:38:54.640
> 
> 标签：java, regex, grep

我想弄清楚如何用 grep 做以下事情（给定一个字典文件来 grep）

1.  仅查找**仅**包含以下字符的单词：`dgo`

    示例：狗，上帝

2.  查找包含以下**所有**字符的任何单词（至少一次）：`dgo`

    示例：教条，togaed 等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:50:31.680

```
1\. egrep "^[dgo]+$" /usr/dict/words
2\. egrep "(d.*((g.*o.*)|(o.*g.*)))|(g.*((d.*o.*)|(o.*d.*)))|(o.*((d.*g.*)|(g.*d.*)))" /usr/dict/words 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:53:34.410

仅有的：

```
 ^[god]+$ 
```

全部：

```
 (?=.*g)(?=.*o)(?=.*d) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T21:46:48.483

第二：

```
 grep d /usr/dict/words | grep o | grep  g 
```

# audio - 如何访问扬声器播放的波形？

> ID：10566814
> 
> 赞同：1
> 
> 时间：2012-05-12T19:39:30.220
> 
> 标签：audio, language-agnostic, project

我正在寻找一个项目，通过分析输出的波形来改变馈入扬声器的波形。我知道 MATLAB 有一些非常好的工具可以改变扬声器播放的波形，但我真的更喜欢使用更好更有效的语言。对于这个项目来说，最好的语言/包是什么？理想情况下，我希望能够简单地将波添加到扬声器已经播放的内容中。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:17:45.690

对于跨平台，您可以尝试使用[PortAudio](http://www.portaudio.com/)库，并将 C 作为实时 DSP 代码最常用的语言。

您可以通过将扬声器前面的线路输出或麦克风插入 USB ADC 来捕捉扬声器的声音。

# perl - Rapidshare API - Perl 脚本

> ID：10566816
> 
> 赞同：1
> 
> 时间：2012-05-12T19:39:40.883
> 
> 标签：perl, api, rapidshare

我正在尝试将 Rapidshare Upload 脚本实施到我的项目中，但它似乎已经过时了。我总是在终端收到以下错误：

```
File /home/googles/Downloads/weave_minimal.tgz has 10953 bytes. Calculating MD5HEX...
MD5HEX is 12c7dfef24eb0bb249a1f4723cd8daf6 (10953 bytes analyzed)
Trying to upload to your prem account.
Getting upload server infos.
Uploadserver invalid? Internal error! 
```

这是脚本： http: [//pastebin.com/wSPWa84B](http://pastebin.com/wSPWa84B)

我很高兴得到任何帮助，很快就可以开始工作了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:11:29.047

我发现了两个问题： 1\. url 应该是`http://rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver`并且你必须使用 HTTP/1.1 连接到 RS 服务器。因此，您用来连接 RS 的每条线路都应如下所示：

```
print $socket qq|GET /cgi-bin/rsapi.cgi?sub=nextuploadserver HTTP/1.1\r\nHost: rapidshare.com\r\n\r\n| 
```

有关 HTTP/1.1 的更多信息，请参阅[rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

我希望这有帮助！

# jquery - 试图弄清楚如何只遍历 div 中的元素而不是 div 中的 div

> ID：10566817
> 
> 赞同：1
> 
> 时间：2012-05-12T19:39:42.357
> 
> 标签：jquery

我正在构建一个动态表单系统，它将自动组装一个 HTML 表单并通过使用单个 form.js 文件使其具有交互性，该文件将适用于系统内构建的所有表单。我已经完成了表单系统，并且在大多数情况下 form.js 已经完成，除了嵌套 div 的错误。

**一点背景**：如果需要，我会发布我正在测试的表格，但我认为这足以解释我的需求。我正在使用一种将问题依赖项放在 div 中的表单，以便如果问题得到回答，则依赖项将显示出来。为了更好地理解这是如何工作的，表单系统允许无限嵌套依赖项。如果问题 1 有一个依赖问题，并且该依赖有一个依赖，而问题 2 有一个依赖，它看起来像：

```
Question 1:
    -> Dependency Question 1-1
         -> Dependency Question 1-1-1
Question 2
    -> Dependency Question 2-1 
```

依赖项的每个部分都进入自己的包含 div 以进行样式和组织：

```
<form>    

    <!-- Other elements (not div) mainly form input, labels, and fieldsets-->

    <div id="dep-1" class="dependency">

        <!-- Other elements (not div) mainly form input, labels, and fieldsets-->

        <div id="dep-1-2" class="dependency">

            <!-- Other elements (not div) mainly form input, labels, and fieldsets-->

            <div id="dep-2-1" class="dependency">

                <!-- Other elements (not div) mainly form input, labels, and fieldsets-->

            </div>

        </div>

    </div>

</form> 
```

id 只是为了展示，它们是由表单系统自动生成的。

**我的问题**：我的每件事都按照我想要的方式工作，或者我是这么想的。我在使用主 js 文件来控制所有表单时遇到的唯一问题是嵌套的 div。在表单加载时，我使用 jQuery 禁用所有依赖项以防止表单提交它们。问题是当我重新打开它们时。我想要的功能仅适用于我所在的依赖项 div，只为该 div 启用 :input，而不是在子 div 中。目前，父 div 中的所有子 div :input 都已启用。我尝试了多种方法来防止它进入儿童 div 并在 Google 和 SO 上花费超过 2 个小时。仍然没有运气......所以我在这里寻求你的帮助！

**用于此的 form.js 代码**

```
function _toggleDependencyContainer(id, result) {
    if (result === true) {
        // Allow only input of parent dependency div, not children dependency divs
        $('#'+id).find(':input').each(function() { // **THIS LINE IS THE ISSUE!!**
            $(this).removeAttr("disabled");
        });
        $('#'+id).slideDown();
    } else {
        // Disable all children input through all child divs
        $('#'+id).slideUp().find(':input').each(function() {
            $(this).attr("disabled", "disabled")
        });
    }   
}
function _toggleElementDependencies(element) {
    if (element.type === undefined) {
        console.log('element.type is undefined');
        return;
    }
    // Get the dependency ID and result then toggle
    switch(element.type.toLowerCase()) {
        case 'select':
        case 'select-one':
        case 'select-multiple':
            $("#"+element.id+" option").each(function () {
                var id = element.id+'-'+this.value+'-dep';
                var result = this.selected;               
                if (id === undefined || id == null) {
                    return;
                }
                _toggleDependencyContainer(id, result);             
            });
            return;
            break;
        case 'radio':
        case 'checkbox':
            var id = element.id+'-dep';
            var result = $(element).is(':checked');
            break;
        case 'file':
        case 'password':
        case 'text':
        case 'textarea':
            var id = element.id+'-dep';
            var result = ( $.trim( $(element).val() ) ) ? true : false;
            break;
        default:
            return;
            break;
    }
    if (id === undefined || id == null) {
        return;
    }
    _toggleDependencyContainer(id, result);
}

$(document).ready(function() {

    $('.dependency').hide(); // hide all dependencies
    //
    // Scan page for forms
    // Loop through each form and process the elements to toggle dependencies
    $('form').each(function(i) {
        // Find all the input elements
        $('#'+this.id).find(':input').not(':disabled').each(function(i) {
            _toggleElementDependencies(this);
        });     
    });

    // Monitor form elements to toggle dependencies
    $(':input').blur(function() {
        _toggleElementDependencies(this);
    });
    $(':radio, :checkbox').click(function() {
        $('input[name="'+this.name+'"]').each(function(i) {
            _toggleElementDependencies(this);
        });
    });
    $('select').change(function() {
        _toggleElementDependencies(this);
    });

}); 
```

我希望一些 jQuery 大师能给我我缺少的片段。我尝试使用 .not() 选择器，但我认为我为子 div 使用了错误的标识符。我试过了：

```
$('#'+id).not('div>div').find(':input').each(...);
$('#'+id).not('div:first').find(':input').each(...);
$('#'+id).not('div:first-chil').find(':input').each(...);
$('#'+id).not('div').find(':input').each(...); 
```

还有更多，但我想我错过了一些简单的东西..

**编辑** 我正在添加我用来帮助理解布局的表单

```
<form method="post" action="/_projects/newForm/" id="test" name="test">
    <fieldset>
        <legend>One</legend><label for="first-name">First Name&nbsp;<span class="required-icon">*</span></label>
        <input type="text" value="test" class="required" title="First Name" id="first-name" name="first_name">
        <div class="dependency" id="first-name-dep" style="display: block;">
            <label for="first-name2">First Name 2</label>
            <input type="text" title="First Name 2" id="first-name2" name="first_name2">
                <div class="dependency" id="first-name2-dep" style="display: none;">
                    <label for="first-name3">First Name 3</label>
                    <textarea title="First Name 3" id="first-name3" name="first_name3" disabled="disabled"></textarea>
                </div>
        </div>
        <label for="last-name">Last Name</label>
        <input type="text" title="Last Name" id="last-name" name="last_name">
        <label for="last-name2">Last Name2</label>
        <input type="text" title="Last Name2" id="last-name2" name="last_name2">
        <label for="radio-test">Radio Test&nbsp;<span class="required-icon">*</span></label>
        <fieldset class="options-cage" id="options-cage-radio-test">
            <label for="radio-test-1">
                <input type="radio" class="required" title="Yes" value="1" name="radio_test" id="radio-test-1">
                &nbsp;Yes
            </label>
            <label for="radio-test-2">
                <input type="radio" class="required" title="No" checked="checked" value="2" name="radio_test" id="radio-test-2">
                &nbsp;No
            </label>
        </fieldset>
        <div class="dependency" id="radio-test-1-dep" style="display: block;">
            <label for="radio-dep">Radio Dep&nbsp;<span class="required-icon">*</span></label>
            <input type="text" class="required" title="Radio Dep" id="radio-dep" name="radio_dep">
                <div class="dependency" id="radio-dep-dep" style="display: none;">
                    <label for="radio-dep2">Radio Dep 2</label>
                    <input type="text" title="Radio Dep 2" id="radio-dep2" name="radio_dep2" disabled="disabled">
                        <div class="dependency" id="radio-dep2-dep" style="display: none;">
                            <label for="radio-dep3">Radio Dep 3&nbsp;<span class="required-icon">*</span></label>
                            <fieldset class="options-cage" id="options-cage-radio-dep3">
                                <label for="radio-dep3-1">
                                    <input type="radio" class="required" title="Yes" value="1" name="radio_dep3" id="radio-dep3-1" disabled="disabled">&nbsp;Yes</label>
                                <label for="radio-dep3-2">
                                    <input type="radio" class="required" title="No" checked="checked" value="2" name="radio_dep3" id="radio-dep3-2" disabled="disabled">&nbsp;No</label>
                            </fieldset>
                            <div class="dependency" id="radio-dep3-1-dep" style="display: none;">
                                <label for="radio-dep4">Radio Dep 4&nbsp;<span class="required-icon">*</span></label>
                                <input type="text" class="required" title="Radio Dep 4" id="radio-dep4" name="radio_dep4" disabled="disabled">
                                    <div class="dependency" id="radio-dep4-dep" style="display: none;">
                                        <label for="radio-dep5">Radio Dep 5</label>
                                        <input type="text" title="Radio Dep 5" id="radio-dep5" name="radio_dep5" disabled="disabled">
                                            <div class="dependency" id="radio-dep5-dep" style="display: none;">
                                                <label for="radio-dep6">Radio Dep 6&nbsp;<span class="required-icon">*</span></label>
                                                <fieldset class="options-cage" id="options-cage-radio-dep6">
                                                    <label for="radio-dep6-1">
                                                        <input type="checkbox" class="required" title="Yes" value="1" name="radio_dep6" id="radio-dep6-1" disabled="disabled">
                                                        &nbsp;Yes
                                                    </label>
                                                    <label for="radio-dep6-2">
                                                        <input type="checkbox" class="required" title="No" checked="checked" value="2" name="radio_dep6" id="radio-dep6-2" disabled="disabled">
                                                        &nbsp;No
                                                    </label>
                                                </fieldset>
                                            </div>
                                    </div>
                            </div>
                        </div>
                </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Two</legend><label for="last-name3">Last Name3</label>
        <input type="text" title="Last Name3" id="last-name3" name="last_name3">
            <label for="checkbox-test">Checkbox Test&nbsp;<span class="required-icon">*</span></label>
            <fieldset class="options-cage" id="options-cage-checkbox-test">
                <label for="checkbox-test-10">
                    <input type="checkbox" class="required" title="Yup" value="10" name="checkbox_test[]" id="checkbox-test-10">&nbsp;Yup</label>
                <label for="checkbox-test-12">
                    <input type="checkbox" class="required" title="Nope" checked="checked" value="12" name="checkbox_test[]" id="checkbox-test-12">&nbsp;Nope</label>
            </fieldset>
            <label for="select-test">Select Test&nbsp;<span class="required-icon">*</span></label>
            <select title="Select Test" id="select-test" name="select_test" class="input-select required">
                <option value="">- Please Select</option>
                <option value="1">one</option>
                <option value="2">two</option>
            </select>
    </fieldset>
    <fieldset>
        <input type="hidden" value="test" id="formID" name="formID">
        <input type="hidden" value="dd7c7fae86db8988669231b67ce637138aa6c180" id="csrf" name="csrf">
        <input type="submit" value="Submit">
        <input type="reset" title="Reset the form?" value="Reset">
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:49:35.450

> *“我想要的功能仅适用于我所在的依赖 div，仅启用该 div 的 :input，而不是在子 div 中。”*

如果我明白这一切，你会改变这个：

```
$('#'+id).find(':input').each(function() { 
```

对此：

```
$('#'+id).children(':input').each(function() { 
```

我的理解是您只想针对*子*输入。您有时似乎使用术语“孩子”来指代所有*祖先*，而实际上，孩子仅意味着下一级嵌套。

继续祖先的比喻，嵌套更深的元素是孙子、曾孙等。

该`.find()`方法查看所有祖先，而该`.children()`方法仅查看子项。

* * *

旁注：您不需要显式编码`.each()`. 你可以这样做：

```
 $('#'+id).find(':input').removeAttr('disabled'); 
```

并且该方法将应用于所有匹配项。

* * *

事实证明，由于`fieldset`容器的原因，DOM 选择有点复杂，我们可以这样做：

```
$('#' + id + ' > :input, #' + id + ' > fieldset :input') 
```

这相当于：

```
$('#' + id).children(':input').removeAttr('disabled')
$('#' + id).children('fieldset').find(':input').removeAttr('disabled') 
```

尽管可以缓存初始 ID 选择，但我倾向于使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:51:49.973

由于我们不知道“其他元素（不是 div）主要形成输入、标签和字段集”的确切 DOM 树是什么，因此您可以使用此代码在元素内部而不是在其依赖项中查找输入`div`。

**更新后的版本：**

```
$("#" + id + " > :input, #" + id + " :not(div) :input").each(function() {
   // ...
}); 
```

**演示：http:** [//jsfiddle.net/m7nWK/2/](http://jsfiddle.net/m7nWK/2/)

# php - PHP Smarty tpl，为所有页面调用相同的php代码

> ID：10566818
> 
> 赞同：1
> 
> 时间：2012-05-12T19:39:44.977
> 
> 标签：php, web, master-pages, smarty3

所以我想使用类似于 asp.net 处理母版页的 smarty，即我想创建一个 master.tpl 文件，该文件负责始终呈现大部分页面（页眉、页脚、背景等），但是我在每个页面上都有一个我想要的下拉菜单，它有一些动态数据，我不想在每个使用 master.tpl 文件的 php 脚本中调用或重现这个函数，我想要一种方法，当那个 tpl文件被使用，另外运行正确的脚本。

我希望以正确的方式做到这一点，所以不要使用 {php} 或其他任何不推荐使用的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:55:17.340

渲染一个单独的 smarty 模板并将其添加到配置文件中

```
$smarty->assign('items',getmenuitems());

$menu = $smarty->fetch('mymenu.tpl');

$smarty->assign('dynamic_menu',$menu); 
```

如果您将这样的代码放在每个页面上调用的配置文件等中，它应该可以执行您想要的操作。然后 {$dynamic_menu} 可以放在你的主模板中。

另一方面，我发现为 smarty 使用不同的分隔符可以消除使用值得脚本等的痛苦。

```
$smarty-> left_delimiter = '{['; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:31:58.503

只需通过 smarty 调用包含它。{include file="path" name_of_variable=$value_of_variable}。在 php 代码中，只需执行附加代码，即可在每个页面上生成数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:21:59.383

所以，我最终写了一个插件（这比我最初想象的要简单得多），只返回一个字符串，包含`<li>`项目，我想知道是否可以在 foreach 循环中调用这个函数，我无法理解昨晚上班。

# java - Java中的列表创建

> ID：10566823
> 
> 赞同：0
> 
> 时间：2012-05-12T19:40:11.117
> 
> 标签：java

我正在尝试在 Java 中创建如下列表。也许我对 OOP 和 Java 很天真，因此我无法解决它。

我需要创建一个下表

```
Character Count Price
   A       1      2
   B       1      12
   C       1      1.25
   D       1      0.15
   A       4      7
   C       6      6 
```

我创建了一个类，如下所示：

```
class ProductList {
    private char ProductName;
    private double Price;
    private int Count;  

    public char getProductName() {
    return ProductName;
}
public void setProductName(char productName) {
    ProductName = productName;
}
public double getPrice() {
    return Price;
}
public void setPrice(double price) {
    Price = price;
}
public int getCount() {
    return Count;
}
public void setCount(int count) {
    Count = count;
}
} 
```

然后是我的主类，它创建了上面的产品表列表。

```
public class ProductEntryList {
     public static void main(String[] args) {
        ProductList[] entry = new ProductList[6];
        //Product Entry for A
        entry[0].setProductName('A');
        entry[0].setCount(1);
        entry[0].setPrice(2);

            //Similarly for other entries of product

        for(int loop = 0;loop<entry.length;loop++) {
            System.out.print(entry[loop].getProductName()+" ");
            System.out.print(entry[loop].getCount()+" ");
            System.out.print(entry[loop].getPrice()+"\n");
        }
    }
} 
```

我很困惑为什么我会得到

```
 Exception in thread "main" java.lang.NullPointerException
    at ProductEntryList.main(ProductEntryList.java:13) 
```

任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:47:52.327

在 null 引用上使用点 (.) 运算符时会引发 Nullpointerexception。

如我所见，在你的主要方法的第一行，

```
ProductList[] entry = new ProductList[6]; 
```

您只是在初始化数组，而不是初始化数组中的产品列表条目。所以数组包含空条目。

您需要在该行之后添加以下代码：

```
for(int i=0;i<entry.size();i++)
{
    entry[i]=new ProductList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:43:40.423

编码

```
ProductList[] entry = new ProductList[6]; 
```

创建一个类型为 的新数组，`ProductList`默认情况下初始化为`null`. 在对它们执行点操作之前，您必须将它们初始化为某些东西，例如`entry[0] = new ProductList();`.

顺便说一句，请注意 Java 的命名约定——类通常大写，变量使用驼峰式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:56:42.893

@Makoto 绝对正确。您正在初始化一个可以容纳 6 个元素的字段。所有元素默认为空。在您的主要方法中，您必须为数组初始化 ProductList：

```
 entry[0] = new ProductList();
    entry[0].setProductName('A');
    entry[0].setCount(1);
    entry[0].setPrice(2); 
```

其他的仍将为空。但是如果数组中只有一个对象，它仍然会失败。您的 for 循环将遍历所有字段，对于第一个应该成功，但对于另一个（为空）您尝试访问空对象。因此，再初始化 5 个 ProductList 对象，并将它们放入数组中，它应该可以工作:)

# c++ - 使用哪个 STL 容器？

> ID：10566826
> 
> 赞同：7
> 
> 时间：2012-05-12T19:40:34.280
> 
> 标签：c++, stl, containers

如果出现以下情况，我应该使用哪个 STL 容器：

1.  定期插入和删除数据。
2.  定期随机访问数据。

例如：dataset(4,10,15) 如果我想找到最接近 9 的数字，那么它应该返回 10。

1.  我只存储一个整数。
2.  它需要排序
3.  可以去 100k 数据集

我想过使用向量，但是向量插入和删除很昂贵。

```
 vector<int> 
```

如果我要使用列表，我必须在访问数据之前访问 O(n) 个元素。

```
 list<int> 
```

我正在考虑使用 set，因为如果它被排序会很好，但我不太确定使用 SET 的效率

所以我希望有人能给出一个好的解决方案！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-12T19:45:31.260

我认为您应该查看此 SO 帖子：[在哪种情况下我使用特定的 STL 容器？](https://stackoverflow.com/questions/471432/in-which-scenario-do-i-use-a-particular-stl-container)无论您打算做什么，对于小尺寸矢量都将适合大多数情况。

该图表是一个指南，定期访问容器的事实不会影响容器的选择，除非您关心容器的大小，否则您存储 int 的事实并不重要，在这种情况下，指针的开销列表容器或地图对您来说很重要吗？

排序是由 map 自动完成的，但是如果容器大小足够小以适合内存，则对向量和列表进行排序可能会非常快。

数据插入针对容器中任何位置的列表和映射进行了优化，对于映射，您可以获得它会自行排序的好处，但是如果大小足够小，那么使用新条目构建新向量可能仍然非常快。

您可能还想考虑哈希映射，您仍然最好对您的代码进行分析，尝试根据您的使用情况来猜测什么是最佳的，并且您确实需要测量和分析。

您也可以只确定 STL`<map>`是一个足够好的平衡或 a`<set>`并使用这些容器，因为它们会自动对插入和删除进行排序并且查找速度很快，但是维护每个条目中的指针的开销会增加与向量相比使用的内存，如果您不关心这一点，那么您可以考虑使用这些容器。

尽管如此，如果它很重要，那么测试和分析并比较每个容器的性能，您会惊讶于代码将如何执行您的假设。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-12T19:52:11.003

如果要求只是性能，则选择基本上应该始终是`std::vector`.

它避免了基于节点的数据结构（树和列表）的许多内存分配，并利用空间局部性进行更有效的遍历。

当然，向量中间的插入/删除需要移动元素，但即使这样也很少足以使向量比其他数据结构慢。

我看到使用其他数据结构的唯一真正原因是：

*   `std::map`/ `std::set`：这些非常方便。美观且易于使用，因此如果不需要最佳性能，我会在需要排序容器或键/值映射时使用它们。（为了获得最佳性能，排序向量可能更可取）
*   所有其他容器：在面对修改时保证提供的正确性可能很有用：向量经常重新分配和移动其内容，这会使指向向量的指针和迭代器都无效。其他数据结构在那里提供更强的保证（对于 a `deque`，指针在末端插入/删除后保证保持有效，但迭代器仍可能无效。对于和`list`，指针和迭代器都保证在插入/移动）`set``map`

当然，这些只是经验法则。

当涉及性能时，唯一普遍正确的规则是“自己进行基准测试”。我可以告诉你 a`vector`在许多常见场景中的典型表现，但我不能告诉你它在*你的*代码中的表现，以及*你的**编译*器和标准库。因此，如果您担心性能，请测量它。尝试不同的替代方案，看看哪个更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T19:52:00.490

一个集合足够有效地插入/删除/访问，并且它总是被排序的。唯一要考虑的是集合中的条目是 const （所以顺序不会被破坏），所以要改变，你应该删除、更新和插入

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T19:43:54.560

您的问题的答案完全取决于您的数据集大小，随着列表增长到巨大的大小，进行线性遍历以获取您需要删除/插入的元素所花费的时间远远超过它所花费的时间用于向量进行删除/插入。因此，如果您的数据集很小，请使用列表，如果很大，请使用向量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T19:44:31.080

如果需要排序，使用二叉搜索树

# .net - 如何模仿 WPF 中未打开的焦点组合框的“输入”行为（文本搜索）？

> ID：10566836
> 
> 赞同：0
> 
> 时间：2012-05-12T19:41:27.243
> 
> 标签：.net, wpf, combobox, text-search

标准 WPF 组合框具有类型输入功能。即：当组合框有焦点并且用户键入一些字母时，组合框中的选定项目会发生变化（相对于键入的字母）。

**重要的**

我不是指 IsEditable 设置为 True 的组合框，也不是指打开的组合框列表。我的意思是带有几个文本项的纯简单组合框：

![在此处输入图像描述](../Images/e670e58e11391c1ba1f13eb2a2436c23.png)

## 问题

如何在我的自定义构建组合框中模仿这种行为？（它是从头开始构建的，除了提到的功能外，它模仿了所有东西）。

我的组合框是使用经典模式构建的：一个工具按钮、一个弹出窗口和一个弹出窗口内的列表框（假设我没有在所描述的模式中包含所有附加功能）。列表框完美支持“输入”功能。所以我的想法是将所有击键从切换按钮带到列表框：

```
Private Sub MyToggleButton_PreviewKeyDown(sender As Object, e As System.Windows.Input.KeyEventArgs) Handles MyToggleButton.PreviewKeyDown
    MyListBox_PreviewKeyDown(Me, e)
End Sub

Private Sub MyListBox_PreviewKeyDown(sender As Object, e As System.Windows.Input.KeyEventArgs) Handles MyListBox.PreviewKeyDown
    MyBase.OnPreviewKeyDown(e)
End Sub 
```

但由于某种原因，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:54:27.417

看看这篇文章。

[http://www.codeproject.com/Articles/66890/A-Keyboard-Selection-Enabled-ComboBox-in-Silverlig](http://www.codeproject.com/Articles/66890/A-Keyboard-Selection-Enabled-ComboBox-in-Silverlig)

虽然这篇文章是为 silvelight 设计的，但它应该让您了解所需的步骤。

除非您发布有关如何实现组合框的代码，否则没有人可以提供完整的解决方案

# java - 为 JFrame 和所有子组件添加监听器

> ID：10566840
> 
> 赞同：2
> 
> 时间：2012-05-12T19:42:35.927
> 
> 标签：java, swing

在一个 Swing 项目中，我使用了 a`JFrame`并将其分为三个部分：***菜单窗格***、***上下文窗格***和***状态窗格***。

状态窗格向用户显示他的操作是否成功，以及用户在执行操作时可能想知道的其他信息。例如，如果用户单击上下文菜单中的删除按钮，状态面板会指示操作是否成功完成。

状态面板的问题是它需要在一段时间后更新其状态。例如，如果用户单击另一个按钮或浏览上下文窗格中的其他页面，则状态窗格不应仍显示上次删除操作的结果。

我可以想到两种解决方法：

1.  几秒钟后清除状态。
2.  `JPanels`为所有组件（ 、和 ...）添加鼠标或键盘操作侦听器，`JTextFields`以便它们在鼠标或键盘的活动时调用状态面板以清除状态。

虽然实现第一个选项比较简单，但还不够。我想我需要将两者结合起来。但是问题是，如果我想将这些动作侦听器添加到所有组件，这将是一种非常肮脏的方法。也许我可以将它添加到主框架。我做了（代码在下面给出），但如果只有当鼠标在框架自己的面板上移动时才有效（例如，不在上下文窗格上）

你有什么建议吗？

```
 JFrame.this.addMouseMotionListener(new MouseMotionListener() {

        @Override
        public void mouseDragged(MouseEvent me) {
        }

        @Override
        public void mouseMoved(MouseEvent me) {
            Config.statusPanel.clearStatus();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:58:33.190

不，为此使用 MouseListener 有点疯狂，你自己说这是一个肮脏的解决方案。相反，我认为你最好使用 PropertyChangeListener 来监听你的类的状态，很可能是 Model 类，而不是任何视图类。

例如，用户按下一个 JButton（视图类中的一个组件），控件类对这个按钮的按下做出反应并告诉模型改变它的状态。然后，您的状态窗格的 PropertyChangeListener 将响应模型的状态更改并更新其自己的视图。这是解决此问题的最干净的大多数 OOP 方法。

为了使其正常工作，您的程序应该基于模型-视图-控制器模式的变体之一，但无论如何它都应该这样做。

# c# - 将各种数据类型的数组从 AS3 发送到 .NET WCF (basicHttpBinding)

> ID：10566841
> 
> 赞同：0
> 
> 时间：2012-05-12T19:42:46.963
> 
> 标签：c#, web-services, actionscript-3, serialization, soap

如果我想调用一个 SOAP WebService（由 C# 上的 WCF 实现），并作为参数之一发送一个包含多种对象类型的数组。

例子：

```
var array:Array = new Array();
array.push(1);
array.push(Number(300));
array.push("Some text");
WebService.Foo(array); 
```

在 Web 服务端，我只能将它作为 接收`XmlNode[] OperationRequest`，它具有简单的结构，没有为每个成员指定数据类型。

有没有办法序列化数据并通过 Web 服务发送，以便轻松反序列化为包含具有相同数据类型的相同对象的数组？（假设我们可以稍微简化一下类型 [int = int, long = number, etc]）

谢谢，罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:19:53.223

我建议[JavaScriptObjectNotation](http://json.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:11:55.080

您可以尝试使用 flex RPC 库。有一个内置的 SOAP 实现。为此，您需要深入研究 rpc 库。您需要将 rpc.swc 与 framework.swc 链接到数组集合等。您不需要 Flex 应用程序即可使用 rpc 库。

# android - 无法使 javah 与我的 Eclipse Android 项目一起使用

> ID：10566842
> 
> 赞同：0
> 
> 时间：2012-05-12T19:42:48.010
> 
> 标签：android, java-native-interface, java, javah

好的，伙计们，我已经阅读了很多 javah 用法的示例，但仍然没有运气。我有 Eclipse Android 项目，所以我尝试以下操作：

```
cd /path_to_project/
javah -classpath ./bin/classes com.package.ClassName 
```

我得到什么：

```
class file for android.app.Activity not found 
```

好的，所以，它看到了我的类，我只需要将 android.jar 添加到类路径：

```
javah -classpath ./bin/classes:path_to_sdk/android.jar com.package.ClassName 
```

我得到：

```
Could not find class file for com.package.ClassName 
```

“你在开玩笑！你刚刚看到它，现在你找不到它！”，我说。

请，任何帮助！我在这里很绝望。

尝试使用 javac 编译简单的 java 类，然后使用 javah - 它工作正常。

**我的环境：** Windows 7，cygwin。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T04:01:09.467

我将分享我为让 javah 为我工作所做的工作。我希望它有所帮助。

例如，我有一个包名为“com.android.MyProgram”的项目。活动源代码文件位于“Path-To-Project/src/com/android/MyProgram”目录中，源代码文件名为“MyProgram.java”并实例化名为“MyProgram”的类。我的本机代码位于名为“Path-To-Project/jni”的目录中。我将使用以下命令行为该项目运行“javah”，从“Path-To-Project”目录运行：

javah -cp src -d jni com.android.MyProgram.MyProgram

再次，我希望这会有所帮助。

# java - Java EE 容器 - 自管理线程？

> ID：10566843
> 
> 赞同：0
> 
> 时间：2012-05-12T19:42:50.727
> 
> 标签：java, jakarta-ee, tomcat, jboss, glassfish

是否可以在 Java EE 服务器中启动例如 OrientDB 服务器实例？

这是可能的还是我只需要在容器内使用 Servlet 或 EJB？

你能给我一个关于如何启动一个管理它自己的线程的应用程序的简单例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:44:19.080

您可以在同一个 JVM，甚至是 Java EE 容器中启动 OrientDB。查看本指南：[http](http://code.google.com/p/orient/wiki/EmbeddedServer) ://code.google.com/p/orient/wiki/EmbeddedServer 。

您可以创建一个 Servlet，只需按照说明启动服务器即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:02:10.620

可以在 JavaEE 中启动应用程序。JavaEE 服务器不会强迫您不使用自己的线程。

以下是如何启动嵌入式（进程中）HSQLDB 的示例：

```
Connection c = DriverManager.getConnection("jdbc:hsqldb:file:testdb", "sa", ""); 
```

当然，您需要在 OrientDB 进程中运行代码，我认为 OrientDB 不能以这种方式启动（在进程中）。它必须有自己的过程。

# jquery - jQuery - 在加载时重新排序

> ID：10566844
> 
> 赞同：2
> 
> 时间：2012-05-12T19:43:20.217
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有以下可排序的顺序作为默认值

```
<ul id="sortable">
<li id="1">Item 1</li>
<li id="2">Item 2</li>
<li id="3">Item 3</li>
</ul> 
```

但是假设用户将项目 3 移动到位置 1 然后我将其保存到数据库中，现在新位置是 3,1,2

当他们访问要编辑的页面时，我将新订单放入此 div

```
<div id="position">3,1,2</div> 
```

但是我不知道如何在页面加载时使用来自 id="position" 的新位置重新排序可排序我已经查看了所有可排序的方法，但找不到执行此操作的方法。

```
$( "#sortable" ).sortable(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:32:04.560

试试这个：

```
var orderArray = $('#position').text().split(',');
var listArray = $('#sortable li');
for (var i = 0; i < orderArray.length; i++) {
   $('#sortable').append(listArray[orderArray[i]-1]);
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/VjtYJ/1/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-21T04:36:17.837

如果项目 ID 是字母：

```
<ul id="sortable">
  <li id="a">Item a</li>
  <li id="b">Item b</li>
  <li id="c">Item c</li>
</ul>
<div id="position">c,a,b</div> 
```

试试这个：

```
var orderArray = $('#position').text().split(',');
var str = '';
for (var i = 0; i < orderArray.length; i++) {
   str += '<li id="'+orderArray[i]+'">'+orderArray[i]+'</li>';
}​
$('#sortable').html(str); 
```

它对我有用！

# php - 如果 mySQL 查询成功，则执行某些操作

> ID：10566845
> 
> 赞同：0
> 
> 时间：2012-05-12T19:43:23.477
> 
> 标签：php, mysql, if-statement

我有以下 mySQL 查询：

```
$content = mysqli_query($dblink, "SELECT * FROM passwordrecovery WHERE code = '$formcode'");

            while($row = mysqli_fetch_array($content)) {
                $db_username = $row['username'];
                $db_email = $row['email'];
                $db_code = $row['code'];
            } 
```

我想在这里某处添加一个 IF 语句来检查查询是否成功，但我不确定在哪里。

基本上，我有一个表单，用户可以在其中插入代码（通过电子邮件发送）来检索他们的密码。但是他们可能会犯错误并输入数据库中不存在的代码，我想考虑这种情况并返回错误。我只是不知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:46:22.500

在查询失败时，`$content`将是`FALSE`而不是结果资源。检查它是不是假的。如果他们输入了一个不存在的代码，您将不会返回任何行，因此请通过 . 检查至少一行[`mysqli_num_rows()`](http://php.net/manual/en/mysqli-result.num-rows.php)。

```
$content = mysqli_query($dblink, "SELECT * FROM passwordrecovery WHERE code = '$formcode'");

if ($content) {
    // Check for at least one row returned
  if (mysqli_num_rows($content) < 1) {
    // Invalid lookup, show error to user
  }
  // Got a row back, so query was valid
  else {
    while($row = mysqli_fetch_array($content)) {
      $db_username = $row['username'];
      $db_email = $row['email'];
      $db_code = $row['code'];
    }
  } 
}
else {
  // Query failure - display error to user
  // and check mysqli_error() internally for debugging
} 
```

我们假设您已经`$formcode`通过`mysqli_real_escape_string($formcode)`.

# jquery - 如何保持空列表可排序？

> ID：10566846
> 
> 赞同：1
> 
> 时间：2012-05-12T19:43:23.690
> 
> 标签：jquery, jquery-ui

我在这个 JSFiddle 上使用 sortable：http: [//jsfiddle.net/aJTe5/](http://jsfiddle.net/aJTe5/)

这是一个团队组织系统。我遇到的问题是，如果您将第 3 队的所有球员拖到其他球队，则无法将球员重新添加到第 3 队。关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:52:11.953

将属性设置为`ul`标签，当没有元素时，它变得无宽度和无高度：

```
ul {
   min-width: 128px;
   min-height: 20px;
} 
```

[http://jsfiddle.net/aJTe5/2/](http://jsfiddle.net/aJTe5/2/)

# class - 使用 super() 将参数传递给正确的继承类

> ID：10566847
> 
> 赞同：0
> 
> 时间：2012-05-12T19:43:27.307
> 
> 标签：class, python-3.x

假设一个类继承了 2 个类：一个有 1 个参数，另一个没有。如何确保将参数传递给独立于子类顺序的接受参数的类？

具体来说，我对这个例子有疑问：

```
class Generic(object):
    def __init__(self,data): 
        self.data=data
    def do_data(self):
        print(self.data)
class Generic2(object):
    def __init__(self):
        pass
    def no_data(self):
        print("No_data")
class MyClass(Generic2,Generic):
    def __init__(self,data):
        self.data=data
        super().__init__(data)
A=MyClass("A") 
```

由于**init**参数返回 TypeError。

只需使用以下方法更正错误：

```
 ...
 class MyClass(Generic,Generic2):
  ... 
```

我假设`super()`使用 MRO 来决定初始化哪个类。

问题是：在 Python3 中，如何确保将参数发送到正确的子类，而与子类的顺序无关？

（温柔点......我对任何事情都非常了解！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:37:47.947

相关：[https](https://fuhm.net/super-harmful/) ://fuhm.net/super-harmful/ 。

只需使用您要直接初始化的类：

```
class MyClass(Generic2, Generic):
    def __init__(self, data):
        Generic.__init__(data)
        self.data = data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T08:03:39.447

一些扩展和评论对于评论来说太长了：

当您确切知道类层次结构的外观时，您可以直接调用要调用的方法。当您不确定类层次结构的外观时， super() 是必需的。例如，当您创建一个库时就是这种情况。您不知道人们将如何使用该库以及他们将使用您的哪些基类。因此，您需要确保所有类的接口都相同，并且所有类都调用 super()。

但是一旦类的接口不一样， super() 就不再有用了，部分原因是你不能再以任意顺序调用类。您现在*必须*按特定顺序初始化它们，然后您必须明确该顺序。

# java - 创建文档比较软件

> ID：10566854
> 
> 赞同：2
> 
> 时间：2012-05-12T19:43:53.440
> 
> 标签：java, php, python

我想创建一个应用程序，该应用程序可以通过读取两个文档中的文本并比较它们来确定是否在两个文档之间复制了某些文本。我想知道是否有人曾经尝试过这样做，以及处理相同问题的最佳方法是什么。如果涉及机器学习和自然语言处理：达到什么水平？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:06:29.340

有些技术完全依赖于集合论概念

尝试[http://en.wikipedia.org/wiki/W-shingling](http://en.wikipedia.org/wiki/W-shingling) 以获得良好的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:28:25.597

我相信[**Copyscape**](http://www.copyscape.com/)使用**4-gram**来帮助确定唯一性。

这些字符串称为[**N-Grams**](http://en.wikipedia.org/wiki/N-gram)。

但是，另一个与[**语言无关的算法相关的**](http://www.catalysoft.com/articles/StrikeAMatch.html)[**SO 答案**](https://stackoverflow.com/a/653165/1333791)在字符的基础上比较二元组。它已经在 J​​ava 中实现，这将有助于节省时间。[](http://www.catalysoft.com/articles/StrikeAMatch.html)

# python - 在python中通过正则表达式匹配数字的第一个实例

> ID：10566859
> 
> 赞同：0
> 
> 时间：2012-05-12T19:44:16.353
> 
> 标签：python, regex

我是正则表达式的新手，需要通过一次读取一个条目来提取“Chr”数字。

例如，对于以下数据：

```
Chr6_clust92082
Chr7_clust13
Chr7_clust256
Chr7_clust3678
Chr7_clust42
Chr7_clust5
Chr7_clust130538 
```

第一个条目应该返回“6”，因为它就在“Chr”之后和“_”之前。请为此建议特定的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:00:34.620

如果要匹配多次，最好编译模式：

```
c = re.compile('Chr(\d)_') 
```

如果你可以有大于 9 的 chr-numbers，它应该是：

```
c = re.compile('Chr(\d*)_') 
```

那么你会这样做：

```
t = 'Chr6_clust92082'
n = int(re.match(c, t).groups()[0]) 
```

当然，只需更改每次迭代的 t 即可。

尽管您要求使用正则表达式，但由于该模式非常简单，因此可能值得使用：

```
n = int(t.split("_",1)[0][3:]) 
```

我为你的模式的 1110000 个字符串（不要问我为什么）计时，它花了 8.8 秒，而正则表达式版本花了 21.4 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:48:42.187

你可以写这个正则表达式：

```
re.match('Chr(\d+)_.*','Chr6_clust92082') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:48:52.293

这不是 stackoverflow 上欢迎的问题类型。没有人会做你的工作。您需要的正则表达式真的很容易找到。

我建议你这个在线工具：[http ://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)

查找正则表达式有很大帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T19:56:27.910

使用以下，即使有多个数字，它也会看起来 -

```
re.findall(r'^Chr([\d]+)_', 'Chr6_clust92082')[0] 
```

# c++ - C++ 在“if-else”之外声明类变量

> ID：10566862
> 
> 赞同：3
> 
> 时间：2012-05-12T19:45:28.353
> 
> 标签：c++, overloading

是否可以在“if-else”之外声明类变量并在“if-else”中对其进行初始化？

像这样的东西：

```
myClass mc;
if (bOOlVar){
  mc(10);
}
else{
  mc(10,20);
} 
```

假设我的 myClass 有 2 个缺点（一个接收 int，一个接收 2 个 int）

多谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T19:47:54.820

```
auto mc = (boolVar? MyClass( 10 ) : MyClass( 10, 20 )); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T19:48:15.347

这是不可能的。可能的关闭是这样的：

```
myClass mc(10);
if (!bOOlVar)
{
  mc = myClass(10,20); //if assignment is allowed
} 
```

# ruby-on-rails - 如何在 Rails 中使用 form_for 仅更改模型中的一个属性

> ID：10566865
> 
> 赞同：0
> 
> 时间：2012-05-12T19:46:34.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, form-for

我想更改我的用户模型的配置文件属性，它只是 form_for 中的一个字符串。我遇到了一个问题，当我更新我的个人资料属性时，我的密码被设置为空白。

也就是说，我的用户帐户有密码，但是当我更改个人资料时，我的密码变为空白。下次我尝试登录时，我只是将密码字段留空。

**如何在不更改密码的情况下更改我的个人资料字段？**

谢谢。

这是我下面的表格和更新操作。我正在传递一个名为 updates_password 的隐藏字段，它是一个布尔值，用于指示是否需要密码验证和确认。

edit_profile.html.erb

```
<%= form_for @user, :html => { :multipart => true } do |f| %>

  <%= f.label :profile %>
  <%= f.text_area :profile%>

  <%= f.hidden_field :updating_password, :value => "false" %>

  <%= submit_tag "update" %>

<% end %> 
```

users_controller.rb

```
def update
  @user = User.find(params[:id])
  @user.updating_password = params[:user][:updating_password]

  #for updating profile only
  if(@user.updating_password == 'false')
    if @user.update_attribute('profile', params[:user][:profile])
      redirect_to @user
    else
      @title = "Edit user"
      render 'edit'
     end
   end

  #for updating everything else including password
  if(@user.updating_password == 'true')
    if @user.update_attributes(params[:user])
      redirect_to @user
    else
      @title = "Edit user"
      render 'edit'
    end
  end
end 
```

我将从我的 user.rb 文件中添加相关的 updates_password 片段：

```
validates_presence_of :password, :if => :should_validate_password?
validates_confirmation_of :password, :if => :should_validate_password?

  def should_validate_password?
    updating_password || new_record?
  end 
```

# google-maps - 谷歌地图应用缓存但不离线

> ID：10566871
> 
> 赞同：1
> 
> 时间：2012-05-12T19:47:14.463
> 
> 标签：google-maps, html5-appcache

我正在构建一个移动网络应用程序（html5、javascript），并且我使用 html5 的应用程序缓存来实现离线功能。我有谷歌地图的问题。我缓存了我需要的所有文件，并从应用程序缓存中运行我的应用程序。但是当我尝试使用谷歌地图 api 3 时，一切都出错了（请记住，我有互联网连接，我不想离线使用谷歌地图）。我不知道在清单文件中包含什么以使应用程序从 Internet 获取所需的文件。我必须在清单文件中包含什么，以便 google maps api 3 的 GET 请求不会失败。

谢谢大家的回复。

阿尔基斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T05:07:19.293

您现在可以使用：

```
NETWORK
* 
```

这意味着所有未缓存的资源都需要连接。

# android - 如何在android中进行活动淡化转换

> ID：10566876
> 
> 赞同：1
> 
> 时间：2012-05-12T19:47:50.317
> 
> 标签：android, xml, animation, layout, android-activity

如何使actcity在android中消失？我使用了以下代码，但没有任何反应

```
public class MetroActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.metro_splash);
        getWindow().setWindowAnimations(R.anim.intro_anim);
        Runnable r= new Runnable() {

            @Override
            public void run() {
                Intent i = new Intent(getApplicationContext(),MainActivity.class);
                startActivity(i);

            }
        };
        Handler h = new Handler();
        h.postDelayed(r, 3000);

    }
} 
```

动画xml：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="100"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="1.0" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:01:14.053

使用此代码在两个活动之间进行平滑淡入淡出：

**res/anim 中的 fadein.xml：**

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/accelerate_interpolator"
   android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="100" /> 
```

**res/anim 中的淡出.xml**

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/accelerate_interpolator"
   android:fromAlpha="1.0" android:toAlpha="0.0" android:duration="100" /> 
```

将以下内容放在Activity MainActivity 的onCreate 方法中。在 setContentView 为我工作之前。

```
overridePendingTransition(R.anim.fadein, R.anim.fadeout); 
```

注意：如果您使用的是 Android2.o 或更高版本，则 overridePendingTransition 工作

**编辑：**

或将此代码放入 MainActivity 后尝试

```
 @Override
    public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.metro_splash);
    getWindow().setWindowAnimations(R.anim.intro_anim);
    Animation anim = AnimationUtils.loadAnimation(this,R.anim.animation);
    // 'body' is root layout id  which is for MainActivity
    findViewById(R.id.body).startAnimation(anim);
    } 
```

# python - 尝试从 Tkinter Canvas 中删除项目时出错

> ID：10566879
> 
> 赞同：0
> 
> 时间：2012-05-12T19:47:58.930
> 
> 标签：python, tkinter

当我想关闭应用程序时，我收到以下错误：

```
Exception _tkinter.TclError: 'invalid command name ".47045488"' in <bound method
RootJoint.__del__ of <skeleton.RootJoint object at 0x0000000002CDDBA8>> ignored 
```

这是来自的相关部分`RootJoint`：

```
def __init__(self, canvas):
    self.parent = None
    self.angle = 0.0
    self.distance = 0.0

    topleft = 0 - Joint.SQUARE_HALF_SIDE, 0 + Joint.SQUARE_HALF_SIDE
    bottomright = 0 + Joint.SQUARE_HALF_SIDE, 0 - Joint.SQUARE_HALF_SIDE

    self._joint = canvas.create_rectangle(*(topleft + bottomright))
    canvas.itemconfig(self._joint, fill=RootJoint.COLOR_NORMAL)

    self.canvas = canvas

def __del__(self):
    self.canvas.delete(self._joint) 
```

这是创建画布和根关节的地方：

```
def main():
    root = tk.Tk()
    root.geometry('640x480')

    canvas = tk.Canvas(root)
    canvas.pack(fill=tk.BOTH, expand=True)

    rootjoint = skeleton.RootJoint(canvas)

    root.mainloop() 
```

为什么会出现此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:04:00.393

问题是

**德尔**

当对canves的最后一个引用丢失并且对象被删除时调用。

你想要的是

```
def __init__(...):
    ...
    self.bind("<Destroy>", self.onDestroy)
def onDestroy(self, event):
    self.canvas.delete(self._joint) 
```

首先画布和所有元素将被销毁和破坏，然后删除

# android - Android - 签名密钥过期时会发生什么？

> ID：10566884
> 
> 赞同：11
> 
> 时间：2012-05-12T19:48:30.503
> 
> 标签：android, apk, code-signing, android-install-apk, code-signing-certificate

如果签名密钥过期，现有的 apk 会拒绝安装，还是仅仅意味着新应用无法使用该密钥进行签名？

我们建议使用 25 年以上到期的密钥，Google Play*要求*至少 2033-10-22 到期！然而，出于安全原因（摩尔定律、破解算法等），有些人可能希望更频繁地*更新*[他们](https://stackoverflow.com/questions/2881904/how-to-sign-an-apk-with-more-than-one-certificate)的密钥。

 *如果一个apk的key过期了，有没有办法安装它（不依赖开发者重新发布）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T03:48:38.603

> 如果签名密钥过期，现有的 apk 会拒绝安装，还是仅仅意味着新应用无法使用该密钥进行签名？

`jarsigner`将拒绝使用过期密钥，并且在安装时 Android 将拒绝使用旧密钥签名的 apk，但已安装的应用程序将继续正常运行。

[https://developer.android.com/guide/publishing/app-signing.html](https://developer.android.com/guide/publishing/app-signing.html)

> 如果一个apk的key过期了，有没有办法安装它（不依赖开发者重新发布）？

是的，可以[使用您自己的证书](https://stackoverflow.com/questions/3267216/can-i-resign-an-apk-with-a-different-certificate-than-what-it-came-with)对 apk 进行签名。*

# c# - HttpWebRequest、重定向、实时站点上的分块编码错误，但在本地 IIS Express 上工作

> ID：10566885
> 
> 赞同：3
> 
> 时间：2012-05-12T19:48:32.237
> 
> 标签：c#, redirect, httpwebrequest, chunked-encoding

我有一些代码可以使用 C# 创建 HTTP POST WebRequest 并将一些数据发布到 https 站点。然后该站点重定向到一个新的 URL 并返回一些数据。

这在我运行 IIS Express 的本地机器上工作得很好，但在我的生产服务器上抛出一个异常，说`Content-Length or Chunked Encoding cannot be set for an operation that does not write data.`.

这是代码的样子：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.AllowAutoRedirect = true;
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = data.Length;
request.UserAgent = userAgent;

StreamWriter stOut = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.ASCII);
stOut.Write(data);
stOut.Close();

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
if (response.StatusCode == HttpStatusCode.OK)
{
    using (StreamReader stIn = new StreamReader(request.GetResponse().GetResponseStream()))
    {
        string responseHtml = stIn.ReadToEnd();
        Uri downloadUri = GetDownloadUri(responseHtml);

        return downloadUri;
    }
}

throw new HttpException((int)response.StatusCode, response.StatusDescription); 
```

有什么想法有什么问题，什么是好的解决方案？

//约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T04:50:41.950

我有一个类似的问题。在生产中，所有 url 都会自动重定向到 https。似乎 HttpWebRequest 无法处理重定向并抛出此异常消息。

# ruby-on-rails - 如何在验证错误和表单重定向中保留虚拟属性？

> ID：10566889
> 
> 赞同：0
> 
> 时间：2012-05-12T19:48:57.540
> 
> 标签：ruby-on-rails

我在这个[Railscast](http://railscasts.com/episodes/102-auto-complete-association-revised?view=asciicast)之后设置了一个自动完成关联。

我正在使用`find_or_initialize`而不是`find_or_create`在虚拟 category_name 属性上，因为我需要通过其他一些逻辑传递值。

如果父模型验证失败（railscast 中的产品），保持此虚拟属性的最佳方法是什么。`category_name`如果出现错误，我希望在保存路径呈现表单后保留用户输入的内容。

我认为可以通过 访问该值`params[:category_name]`，但我无法将其设置回该字段。

感谢任何想法。

**编辑**

控制器

```
class ProductsController < ApplicationController

  ...

  def create
    @product = current_user.products.build(params[:prerep])

    if @products.save
      DO SOME STUFF...

      respond_to do |format|
        format.html { redirect_to(@product, :notice => 'Product was successfully created.') }
        format.xml  { render :xml => @product, :status => :created, :location => @product }
      end

    else
      respond_to do |format|
        format.html { render :action => "new" }
        format.xml  { render :xml => @product.errors, :status => :unprocessable_entity }
      end
    end
  end
end 
```

模型：

```
class Prerep < ActiveRecord::Base
  attr_accessible ..., :category_name, ... 
  attr_reader ...
  attr_accessor ...

  belongs_to :user, :category

  has_many ...

  validates ...

  def category_name
    category.try(:name)
  end  

  def category_name=(name)
    product_category = Category.find_or_initialize_by_name(name) if name.present?
    self.category = if product_category.new_record?
      product_category ...SET SOME ATTRIBUTES...
      product_category.save(:validate => false)
      product_category
    else
      product_category
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T19:50:25.337

我想我会回答这个问题，因为我遇到了完全相同的问题，但我找不到一个答案。

最好的方法是手动验证您需要验证的所有内容。`validates`因此，您必须自己在控制器中进行，而不是让过滤器来做。因此，如果您的属性是用户名、电话和电子邮件，请不要`validates :email, presence: true`在模型中执行，而是在控制器中手动执行。这样，如果你有额外的参数，你可以在你的控制器或它的助手中添加另一个验证方法来进行验证，它让你有机会坚持这个。

希望这可以节省人们的时间，因为似乎没有更简单的方法来解决问题。我的意思是，无论如何，rails 已经大大加快了我们的开发时间，再多几行代码不会杀死我们；）

# python - 如何使用特定的迭代器开始循环

> ID：10566890
> 
> 赞同：2
> 
> 时间：2012-05-12T19:49:04.557
> 
> 标签：python

我想在几个循环中循环一个列表，总是从最后一个循环的项目开始：

```
import itertools as it
list1=[1,2,3,4,5,6,7,8]
a=iter(list1)
while a.next()!= 8:
    a,b=it.tee(a) #copy the iterator
    while b.next()!=8:
        b,c=it.tee(b)
        while c.next()!=8:
            print "yaaay" 
```

在这段代码中，我可以使用外循环的当前迭代器开始我的循环。如何在不使用 slice 的情况下以更 Pythonic 的方式执行此操作？

这是我正在考虑的更pythonic方式的示例：

```
list1=[1,2,3,4,5,6,7,8]
a=iter(list1)
for k1 in list1:
    for k2=k1 in list1:
        for k3=k2 in list1:
            print "yaaay" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:04:50.793

据我了解，您正在寻找在某个时候“保存”生成器状态然后“恢复”它的方法。使用`tee`是正确的想法，[PEP 0323](http://www.python.org/dev/peps/pep-0323/)对此有更多信息。

```
import itertools

lst = range(10)
it = iter(lst)

while True:
    print it.next(), '>>',
    it, saved = itertools.tee(it)
    for subitem in it:
        print subitem,
    it = saved
    print 
```

更新：

```
import itertools

class fancy_it(object):
    stack = []

    def __init__(self, iterable=None):
        if not iterable:
            prev = fancy_it.stack[-1]
            prev.it, iterable = itertools.tee(prev.it)
        self.it = iter(iterable)

    def __iter__(self):
        fancy_it.stack.append(self)
        try:
            while True:
                yield self.it.next()
        except StopIteration:
            fancy_it.stack.pop()
            raise StopIteration

for x in fancy_it(range(10)):
    print x
    for y in fancy_it():
        print '**', y
        for z in fancy_it():
            print '****', z 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:05:04.940

您可以尝试[`itertools.combinations_with_replacement`](http://docs.python.org/library/itertools.html#itertools.combinations_with_replacement)，它将在同一组元素上循环，但在单个 for 循环中而不是三个：

```
import itertools
list1 = [1,2,3,4,5,6,7,8]
for k1, k2, k3 in itertools.combinations_with_replacement(list1, 3):
     print k1, k2, k3 
```

要将其再次转换为相当于三个 for 循环，您可以[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)像这样使用：

```
import itertools
import operator

list1 = [1,2,3,4,5]
combos = itertools.combinations_with_replacement(list1, 3)

for k1, k1_groups in itertools.groupby(combos, operator.itemgetter(0)):
    for k2, k2_groups in itertools.groupby(k1_groups, operator.itemgetter(1)):
        print k1, k2, '==>',
        for _, _, k3 in k2_groups:
            print k3,
        print 
```

这打印出来

```
1 1 ==> 1 2 3 4 5
1 2 ==> 2 3 4 5
1 3 ==> 3 4 5
1 4 ==> 4 5
1 5 ==> 5
2 2 ==> 2 3 4 5
2 3 ==> 3 4 5
2 4 ==> 4 5
2 5 ==> 5
3 3 ==> 3 4 5
3 4 ==> 4 5
3 5 ==> 5
4 4 ==> 4 5
4 5 ==> 5
5 5 ==> 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T20:07:13.920

```
l = [...]
for i, k1 in enumerate(l):
    for i, k2 in enumerate(l[i:]):
        # this loop skippes the elements after k1
        ... 
```

# php - 在php中合并2个数组

> ID：10566891
> 
> 赞同：1
> 
> 时间：2012-05-12T19:49:17.813
> 
> 标签：php, arrays, merge

这似乎很简单，但我无法弄清楚。我需要为 2 个数组返回一个数组合并，它们不完全相同，一个是全局多维数组。

```
global $animals;

$array1 = array('dogs' => __('Dogs'), 'cats' => __('Cats'));  //localized
$array2 = $animals;  //not localized

the var_dump of $array2 is:

array
  'ducks' => 
    array
      'width' => int 350
      'height' => int 350
      'crop' => boolean true
  'cows' => 
    array
      'width' => int 750
      'height' => int 150
      'crop' => boolean true 
```

我需要`$merge = array_merge($array1, $array2);`像这样返回一个数组。

```
array('dogs' => __('Dogs'), 'cats' => __('Cats'), 'ducks', 'cows'); 
```

但我得到了各种奇怪的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T19:52:19.357

试试这个：

```
$merge = array_merge($array1, array_keys($array2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:53:04.463

尝试

```
$animalNames = array_keys($animals); 
```

# php - 在javascript中格式化字符串

> ID：10566892
> 
> 赞同：0
> 
> 时间：2012-05-12T19:49:19.410
> 
> 标签：php, javascript, jquery, json

我正在对 PHP 脚本进行 jQuery Ajax 调用，该脚本在 Javascript 中返回此字符串变量：

```
"<div id=\"page\">\r\n\r\n\t" 
```

我可能在这里遗漏了一些简单的东西，但是有没有办法恢复`\r\n`到`<br/>`，但更重要的是，恢复`\"page\"`到`"page"`? 我就是想不通。

Javascript 看起来像这样：

```
 $.ajax({
        type: 'POST',
        dataType: "JSON",
        url:  sameURLasPHPscript,
        success:function(data){
            // successful request; do something with the data
            $('body').text(data);
        },
        error:function(){
            // failed request; give feedback to user
            alert('ErrorMessage');
        }
    }); 
```

我的 php 文件如下所示：

```
 $url = "someURL/controller/action/getID";

        $a = file_get_contents($url);           

        echo json_encode($a); 
```

**编辑：解决方案可以在这里找到：[http ://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content](http://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:52:14.647

您可以使用此函数去除斜线： [http ://phpjs.org/functions/stripslashes:537](http://phpjs.org/functions/stripslashes:537)

你可以用这个函数替换\r\n： [http ://phpjs.org/functions/nl2br:480](http://phpjs.org/functions/nl2br:480)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:10:31.223

您的服务器正在发送 JSON 编码数据，您应该同样对待它。更改 jQuery.ajax 的参数，使其需要 JSON 数据。然后 jQuery 将解析数据并处理所有`\"`,`\r`和`\n`.

# 编辑

比较这两个 jQuery 函数的输出：

```
$('body').text("<b>bold</b>"); // will write <b>bold</b> literally
$('body').html("<b>bold</b>"); // will write bold in bold font 
```

您需要使用[`jQuery.html`](http://api.jquery.com/html/)函数将 HTML 显示为 HTML。

# android - 在android中缩放动态布局

> ID：10566901
> 
> 赞同：0
> 
> 时间：2012-05-12T19:50:18.983
> 
> 标签：android

我在布局 XML 的线性布局中放置了一个图像视图。我喜欢在运行时在图像上添加几个按钮。单击按钮时，我需要执行一些操作。我想缩放布局（以及静态图像和动态按钮）。即使在缩放状态下，也会感应到按钮点击。有什么办法吗？我需要在这里自定义布局吗？任何关于自定义布局和缩放的指针都是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:18:28.143

您可以使用其中包含 imageView 的相对布局来填​​充所有内容，而缩放按钮也存在但仅附加到底部（例如）。

# android - 小部件上的 PendingIntent

> ID：10566904
> 
> 赞同：0
> 
> 时间：2012-05-12T19:51:33.197
> 
> 标签：android, widget, android-pendingintent

`eventClick`我正在开发一个用于显示联系人的 Android 小部件，但是当我单击联系人图像时无法创建。

例如，我使用 a`StackRemoteViewsFactory`将联系人添加到我的`GridView`.

这是我的代码：

```
public RemoteViews getViewAt(int position) {

    Bitmap photo = loadContactPhoto(mContext.getContentResolver(), mWidgetItems.get(position).id);

    RemoteViews rv = new RemoteViews(mContext.getPackageName(), R.layout.contact_item);
    rv.setTextViewText(R.id.name, mWidgetItems.get(position).name);
    if (photo != null) {
        rv.setImageViewBitmap(R.id.image, photo);
    }

    final Intent fillInIntent = new Intent();
    final Bundle extras = new Bundle();
    extras.putLong(FavoriteContactsWidgetProvider.CONTACT_ID, mWidgetItems.get(position).id);
    fillInIntent.putExtras(extras);
    rv.setOnClickFillInIntent(R.id.contact_frame, fillInIntent);

    return rv;
}

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    for (int i = 0; i < appWidgetIds.length; ++i) {
        final Intent intent = new Intent(context, FavoriteContactsWidgetService.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);

        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));

        RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        rv.setRemoteAdapter(appWidgetIds[i], R.id.grid_view, intent);

        final Intent onClickIntent = new Intent(context, FavoriteContactsWidgetProvider.class);

        onClickIntent.setAction(FavoriteContactsWidgetProvider.CLICK_ACTION);
        onClickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);
        onClickIntent.setData(Uri.parse(onClickIntent.toUri(Intent.URI_INTENT_SCHEME)));

        final PendingIntent onClickPendingIntent = PendingIntent.getBroadcast(context, 0, onClickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        rv.setPendingIntentTemplate(R.id.image, onClickPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds[i], rv);
    }
    super.onUpdate(context, appWidgetManager, appWidgetIds);
} 
```

有人有一些想法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T09:26:09.543

注意这一行：

```
 rv.setPendingIntentTemplate(R.id.image, onClickPendingIntent); 
```

我认为您应该将 R.id.image 替换为 R.id.grid_view，因为 Google 的文档已将 viewId 解释为方法 setPendingIntentTemplate（int viewId , PendingIntent 未决IntentTemplate),

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:16:56.320

您需要在 WidgetProvider 的 onRecieve() 方法中接收待处理的意图广播。

还要确保在 android manifest 的 WidgetProvider 条目（接收器）中将该广播操作作为意图过滤器。

# c# - 在 SQL Server 中存储 excel 文件

> ID：10566907
> 
> 赞同：0
> 
> 时间：2012-05-12T19:51:43.847
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008-r2

我正在为这种情况寻找一个好的解决方案：

*   我有一个带有 SQL Server 2008 R2 后端的 asp.net 应用程序。
*   我需要允许用户上传文件并将其保存以供以后检索。
*   我还需要解析这个文件以便在数据库端进行查询。所以我需要这个文件中的数据作为数据表和来自 sql 的数据来组合结果。

所以这就是我的想法：

1.  将excel 文件存储在 SQL Server 中`varbinary(max)`- 这将允许稍后通过 .net 轻松检索文件。
2.  解析：一种方法是在用户上传文件时使用openxml或一些第3方库将其解析为数据表并将其传递给将返回结果集的存储过程。

我不喜欢这种方法，因为这意味着我们必须将大量数据传递给数据库两次（第一次传递整个文件时，第二次传递数据集时。

关于如何更有效地做到这一点的任何建议？是否可以使用以下方式从 varbinary max 读取数据：

```
SELECT *
FROM OPENDATASOURCE('Microsoft.ACE.OLEDB.12.0', 
                    'Data Source=D:\TestJET.xls;
                    Extended Properties=''Excel 12.0;HDR=NO;IMEX=1;ImportMixedTypes=Text''')...[Sheet1$] 
```

但没有实际创建文件？

或者也许可以不将整个文件传递给数据库，而是从数据表中构造回 excel 文件？

或者也许`varbinary(max)`不是最好的解决方案，而是更好地使用不同的数据类型，如 XML？

Excel 文件非常简单。一张没有宏或公式的样式表。（虽然不能转换为 CSV）文件大小为 200-800kb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:44:31.293

您从数据库构建 excel 文件的想法很有趣 - 这表明获取上传的**相同**文件并不重要，只需包含相同*信息*的文件即可。那是对的吗？

如果是这样，我会在服务器上解析上传文件（我喜欢用于 C# excel 工作的[ClosedXML](http://closedxml.codeplex.com/)），将相关数据以查询友好的形式存储在数据库中，然后丢弃原始文件。当用户要求返回文件时，为他们创建一个具有正确内容的新文件。

小心 XML 数据类型列 - 它们对您可以使用它们执行的操作有[限制。](http://msdn.microsoft.com/en-us/library/ms187107%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:18:01.540

您可以使用 FileUpload 控件将文件上传到您的服务器，然后可以在每次需要时检索该文件。

从那里您可以使用 OleDbConnection 读取 excel 文件，将每个获取的记录添加到列表中以逐个迭代，然后将它们插入到您的数据库中。

这是一个使用三个类的小示例：CConexion（处理 OleDbConnection 进程）、ExcelParser（读取获取的记录并将其插入到您的数据库中，以便您可以在需要时对其进行查询）和 ExcelRecord，它表示每个注册表上的数据容器你的 Excel 文件。

当您的计算机上有 MS Office Excel 2010 时，会安装这些 OleDb 库。我已经测试了代码并且运行良好。

该 excel 文件在示例中称为 Hoja1.xlsx，并存储在 TestApp 根目录下名为 Files 的文件夹中，当您打开它时，会出现三个记录，每个记录有两个字段（A1，B1），（A2，B2） ,(A3,B3) 在文件的第一张也称为 Hoja1.xlsx

```
 ''CConexion Class:

    Imports System.Data.SqlClient
    Imports System.Data.OleDb
    Imports System.Data

    Public Class CConexion

    #Region "Private Variables"

        Dim sOleDbConnectionString As String = String.Empty
        Dim conexionOleDb As New OleDbConnection()

    #End Region

    #Region "Con_Ole"

        Public Interface IConexionOleDb

            Property retConexionOleDb() As OleDbConnection
            Sub retOpenOleDb()
            Sub retCloseOleDb()

        End Interface

        Public Property retConexionOleDb() As OleDbConnection

            Get
                Return conexionOleDb
            End Get
            Set(ByVal value As OleDbConnection)

            End Set

        End Property

        Public Sub retOpenOleDb()

            If Not conexionOleDb.State = System.Data.ConnectionState.Open Then
                conexionOleDb.Open()
            End If

        End Sub

        Public Sub retCloseOleDb()

            If Not conexionOleDb.State = ConnectionState.Closed Then
                conexionOleDb.Close()
            End If

        End Sub

    #End Region

    #Region "Constructors"

        Public Sub New()

        End Sub

        Public Sub New(ByVal rutaOleDb As String)

            sOleDbConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" _
                                                        & "Data Source=" & rutaOleDb _
                                                        & ";" & "Extended Properties=Excel 12.0;"
            conexionOleDb.ConnectionString = sOleDbConnectionString

        End Sub

    #End Region

    End Class

    ''ExcelRecord Class:

    Public Class ExcelRecord

        Private _RId As Short = 0
        Public Property RId() As Short
            Get
                Return _RId
            End Get
            Set(ByVal value As Short)
                _RId = value
            End Set
        End Property

        Private _RText As String = String.Empty
        Public Property RText() As String
            Get
                Return _RText
            End Get
            Set(ByVal value As String)
                _RText = value
            End Set
        End Property

        Public Sub New()

        End Sub

        Public Sub New(ByVal Rid As Short, ByVal RText As String)
            Me.RId = Rid
            Me.RText = RText
        End Sub

    End Class

    ''ExcelParser Class:

    Imports System.Data.OleDb
    Imports System.Collections.Generic

    Public Class ExcelParser

        Private Function InsertRecords(ByVal objExcelRecords As List(Of ExcelRecord)) As Boolean
        ''Your code for insertion here
            Return True
        End Function

        Public Function ReadExcel(ByVal filePath As String) As Short

            Dim cn As New CConexion(filePath)
            Dim dr As OleDbDataReader
            Dim OperationState As Boolean = False
            Dim objExcelRecords As New List(Of ExcelRecord)

            Try

                Dim cmd As New OleDbCommand("Select * from [Hoja1$]", cn.retConexionOleDb)

                cn.retOpenOleDb()
                dr = cmd.ExecuteReader

                While dr.Read    

                    Dim objExcelRecord As New ExcelRecord(CShort(dr(0)), CStr(dr(1)))
                    objExcelRecords.Add(objExcelRecord)

                End While

                OperationState = InsertRecords(objExcelRecords)
                CType(dr, IDisposable).Dispose()

            Catch ex As Exception

            Finally

                cn.retCloseOleDb()
                cn.retConexionOleDb.Dispose()

            End Try

            Return OperationState

        End Function

    End Class

''Test Page ExcelReader.aspx.vb
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If Not Page.IsPostBack Then

            Dim filePath As String = Server.MapPath("~\Files\Hoja1.xlsx")
            Dim objExcelParser As New ExcelParser()

            If objExcelParser.ReadExcel(filePath) Then
                Response.Write("Read!")
            Else
                Response.Write("No Read!")
            End If

        End If

    End Sub 
```

让我知道这是否适合您。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:56:51.967

您可能希望查看 SQL 2008 r2 的 FILESTREAM 功能以将文件存储在服务器中。这是一个[概述](http://channel9.msdn.com/Learn/Courses/SQL2008R2TrainingKit/FILESTREAM/FilestreamDemo/Overview)和一篇很好的[博客文章](http://lennilobel.wordpress.com/tag/filestream/)。我不确定您的文件类型或您需要从中删除什么，但您可以选择使用批量插入，或者您已经指出 OPENDATASOURCE 或稍后执行进程，然后使用 FILESTREAM 中的 ID 加载数据以链接数据。

# android - ImageView 未在 android Titan 中显示

> ID：10566919
> 
> 赞同：4
> 
> 时间：2012-05-12T19:53:09.447
> 
> 标签：android, titanium-mobile

我在 android 的 app.js 文件中有这段代码，在我的资源中有一个 images 文件夹：

```
var win = Titanium.UI.createWindow({

    title : "my Name is Reyjohn",
    backgroundColor : "#FFFFFF",

    exitOnClose : true

})

var img = Titanium.UI.createImageView({

    image:"images/Hypedin.png",
    height:20,
    width:30

});

win.add(img);

win.open(); 
```

但它没有在背景中显示任何图像，我在哪里做错了？我是钛新手，请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:20:21.770

尝试将另一个 / 添加到路径中，例如：

```
image:"/images/Hypedin.png", 
```

您也可以尝试设置正确的 Positioning：

```
top: 0,
left: 0 
```

你检查过日志/输出吗？有错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:15:33.087

你的代码没有错。检查并确保`images/Hypedin.png`那里有正确的拼写。可能是笔误。

# ajax - Ajax.BeginForm 替换下拉列表的整个页面

> ID：10566923
> 
> 赞同：22
> 
> 时间：2012-05-12T19:53:19.053
> 
> 标签：ajax, asp.net-mvc, razor

**目的**

我有一个简单的表列出名称（在部分视图中），在它上面有一个包含这些名称的下拉列表。目的是根据下拉列表中选择的名称过滤表。一旦下拉列表中的选定值发生更改，过滤就会发生，并且应该再次只呈现部分视图。

**问题**

当我在下拉列表中选择一个值时，部分视图不会在另一个视图中呈现，而是显示为整个页面。但是，当我在我的 Ajax.BeginForm 块中包含一个提交按钮并触发提交按钮上的操作时，它确实按预期工作......

**编码**

*控制器*

```
public PartialViewResult Filter(string filterName) {
    var names = from p in db.People
                select p;

    if (!String.IsNullOrEmpty(filterName))
    {
        names = names.Where(p => p.Name.Equals(filterName));
    }

    return PartialView("_PersonsTable", names);
} 
```

*看法*

```
@model IEnumerable<Sandbox.Models.Person>

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

@using (Ajax.BeginForm("Filter", "Person", new AjaxOptions { 
    HttpMethod = "Get", UpdateTargetId = "SearchResults", InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace }))
{
    @Html.DropDownList("filterName", new SelectList(ViewBag.Names), "Select a name", new   { onchange = "this.form.submit()" })
}

@Html.Partial("_PersonsTable") 
```

*局部视图*

```
@model IEnumerable<Sandbox.Models.Person>

<table id="SearchResults">
    <tr>
        <th>
            Name
        </th>
        <th>
            Age
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Age)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
            @Html.ActionLink("Details", "Details", new { id=item.ID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ID })
        </td>
    </tr>
}
</table> 
```

那么为什么我的 searchResults 表没有呈现为部分视图？

我的 _Layout 视图中包含这些脚本：

```
<script src="/Scripts/jquery-1.7.2.js" type="text/javascript"></script>
<script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="/Scripts/MicrosoftAjax.debug.js" type="text/javascript"></script>
<script src="/Scripts/MicrosoftMvcAjax.debug.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-12T21:40:23.883

在您的下拉列表中替换：

```
new { onchange = "this.form.submit()" } 
```

和：

```
new { onchange = "$(this.form).submit();" } 
```

也摆脱所有`MicrosoftAjax*.js`脚本。这些是完全遗留的，不应在 ASP.NET MVC 3 和更新的应用程序中使用。如果您从旧版本迁移，它们仅出于兼容性原因而提供。`jQuery.js`并且`jquery.unobtrusive-ajax.js`足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:34:42.823

不确定我是否理解正确，但如果提交按钮可以正常工作，为什么不这样做：

```
@Html.DropDownList("filterName", new SelectList(ViewBag.Names), "Select a name", new   { onchange = "clickMe('mybuttonId')" }) 
```

并编写小脚本

```
function clickMe(id) {
  $('#' + id).click() // where id is id of button that should submit the form.
} 
```

如果您不想显示该按钮，则只需将其隐藏即可。这是一个 hack，如果它不符合您的需求，我们可以进一步调查。

# php - 如何从 Magento 的媒体图像路径中删除商店代码？

> ID：10566924
> 
> 赞同：1
> 
> 时间：2012-05-12T19:53:25.330
> 
> 标签：php, magento

我正在使用 Testimonial Pro 扩展，它使用以下函数来显示图像：

src="getUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA).$testimonial->getTestimonialImg() ?>"

但是，这会生成带有商店代码的图像路径，例如[http://domain.com/us/media/image.jpg](http://domain.com/us/media/image.jpg) 这不起作用。我的其他扩展之一要求我将商店代码添加到 URL 以正确显示语言，因此禁用它不是一种选择。

那么如何修改此脚本以调用不包含商店代码的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:03:18.540

尝试使用以下参数之一：http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/reference/geturl_function_parameters#parameter_2_-_routeparams](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/geturl_function_parameters#parameter_2_-_routeparams)

我的赌注是

```
src="<?php Mage::getUrl('media',array('_type'=>'direct_link')) . $testimonial->getTestimonialImg() ?>" 
```

# eclipse - Eclipse CDT 在执行“构建项目”或“构建全部”时会编译其他内容

> ID：10566932
> 
> 赞同：0
> 
> 时间：2012-05-12T19:54:26.750
> 
> 标签：eclipse, eclipse-cdt

我有一个简单的 eclipse CDT 项目和一个非常简单的 makefile。当我点击 build-all 时，它会编译 makefile，但还会编译一些额外的东西，这些东西需要多花 3-5 秒（这很烦人）。

![附加编译图像 1](../Images/86425836261dcc280dffbc0866378dbc.png) ![附加编译图像 2](../Images/6c09e9cbfc1df4e45c9ae716beab68fe.png)

任何想法为什么会发生在我身上？这发生在 Eclipse Indigo 和 OSX Lion 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:35:42.263

这个文件是为“扫描仪发现”编译的（谷歌这个更多）。这有助于 Eclipse 确定您的默认包含文件/设置是什么，因此它们可以与内部扫描仪一起使用。

# facebook - 使用 Facebook 评论插件时无法处理“comment.create”事件

> ID：10566937
> 
> 赞同：0
> 
> 时间：2012-05-12T19:55:07.990
> 
> 标签：facebook, events, plugins, comments

我正在使用 Facebook 评论插件，我想处理评论创建事件以在服务器端执行一些 ajax 操作。

我的代码（头标签）：

```
 <script>
  window.fbAsyncInit = function() {
        FB.init({
          appId      : 'App_ID', // App ID
          channelURL : '//www.dealaumaroc.com/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          oauth      : true, // enable OAuth 2.0
          xfbml      : true  // parse XFBML
        });
        console.log('fb init');
          FB.Event.subscribe('comment.create', function(response)
                  {
                    alert(response);
                    console.log(response);
                  });
          FB.Event.subscribe('comment.remove',
            function (response) {
                alert('remove', response);
                console.log(response);
            });
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         d.getElementsByTagName('head')[0].appendChild(js);
       }(document));
</script> 
```

html代码：

```
<fb:comments href="http://www.dealaumaroc.com/dolo/${deal.path}" num_posts="2" width="470" notify="true"></fb:comments> 
```

当我添加评论时，评论添加成功，但未处理事件。我发现很多关于这个问题的帖子，我使用了相同的代码，我看不出为什么？

# jquery - 如何在 jquery 移动网页中嵌入谷歌搜索结果？

> ID：10566941
> 
> 赞同：0
> 
> 时间：2012-05-12T19:55:22.327
> 
> 标签：jquery, jquery-mobile, embed

我需要输入一个词并将谷歌搜索结果嵌入到 jquery 移动应用程序中。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:11:29.380

我不知道这是否适合您的情况，但您可以查看[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

只是有点糟糕，他们在一定数量的查询后收费。

# css - GWT：如何在 Cell List 中实现手风琴效果？

> ID：10566942
> 
> 赞同：0
> 
> 时间：2012-05-12T19:55:23.373
> 
> 标签：css, gwt, accordion, rpc, celllist

我有一个 RPC 生成的带有标题和正文的小部件列表。我想垂直显示它们，只显示标题。当用户单击标题时，相应的正文会向下滑入视图，而任何其他打开的正文都会滑出视图。

手风琴效果可以通过 StackPanel 来实现。但是，我还希望 CellList 和 AsyncDataProvider 提供的分页和访问远程数据的便利性。[看起来](http://code.google.com/p/google-web-toolkit/issues/detail?id=6328)这两者将在 GWT 2.5 中一起提供，不幸的是尚未推出。

我的另一个想法是只使用一个 CellList，并在每个单元格上使用相对定位来获得手风琴效果。逻辑很容易实现，但是从单元格列表中抓取单元格并弄乱它们的`style`属性似乎是一种肮脏的黑客行为。

有一个更好的方法吗？

**跟进**：（我不确定这是否应该是一个单独的问题。） CellList 的结构看起来像这样：

```
<div __gwtcellbasedwidgetimpldispatchingfocus="true" __gwtcellbasedwidgetimpldispatchingblur="true" class="GJOQRHCBPB GJOQRHCBMK">  

<div onclick="" __idx="0" class="GJOQRHCBLB" style="outline:none;" tabindex="0">
  <!-- my cell html -->
</div>
<div onclick="" __idx="1" class="GJOQRHCBLB" style="outline:none;" tabindex="1"> <!-- ... -->
<div onclick="" __idx="2" class="GJOQRHCBLB" style="outline:none;" tabindex="2"> <!-- ... -->
<!-- ... -->
</div></div> 
```

为我的单元格设置样式很容易，并且可以在页面上正确显示。但是，我的单元格样式不会影响父 div（带有`__idx`），它们仍然会延伸整个原始长度。这意味着如果您单击单元格列表“应该”的位置下方，将触发选择事件。如果我可以直接访问和设置`__idx`div 的样式，则可以解决此问题，但恐怕这是一个非常肮脏的 hack。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:54:32.540

GWT 2.5 将添加的是一种为**a`CellTable`** (or `DataGrid`) 中的单个项目构建多行的方法；它不会改变`CellList`s 的任何东西。此外，您仍将负责处理事件以展开/折叠行，可能为它们设置动画，并且*最多一个展开的行*也不会免费提供。

总而言之，它不会为您的用例改变任何东西。

您需要在单元格的渲染/事件处理中烘焙此展开/折叠行为。至于折叠其他行，您必须从列表级别开始处理 DOM（即找到所有可折叠元素并确保它们已折叠，然后展开需要它的行）。
或者，您可以使用 a `NoSelectionModel`or`SingleSelectionModel`并简单地将选定/最后选定的项目呈现为展开状态，而其他项目则折叠（`SelectionHandler`如果需要，则触发重绘）。不过，您可能会丢失动画。

# excel - Excel VBA：通过 VBA 访问单元格的跟踪更改

> ID：10566943
> 
> 赞同：0
> 
> 时间：2012-05-12T19:55:36.543
> 
> 标签：excel, vba, tracking

有没有办法通过 VBA 访问单元格的跟踪更改信息？当您将鼠标悬停在已修改的单元格上时，Excel 通常会显示此信息。我希望能够检查上次修改的日期/时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:52:52.603

为避免对您的问题进行假设，请更清楚。特别是对于鼠标悬停部分...在回答说明中，''IF'' 您要求一种方法来跟踪工作表中特定单元格中发生的更改，然后 Cell 可以被视为一个范围，您可以使用 sheetChange 事件. 您可以轻松找到许多简单的示例。你可以试试[http://vbaexpress.com/kb/getarticle.php?kb_id=909](http://vbaexpress.com/kb/getarticle.php?kb_id=909)

# orchardcms - Orchard CMS 页面和页脚中的自定义 html？

> ID：10566944
> 
> 赞同：1
> 
> 时间：2012-05-12T19:55:40.030
> 
> 标签：orchardcms

我仍在尝试围绕区域、小部件和图层进行思考，所以请放轻松。

我正在尝试设置一种方式，即 Orchard CMS 管理部分中的每个内容页面都可以有一个附加字段，可以添加可以在自定义主题的特定位置呈现的自定义 html。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:05:20.293

如果您希望每个页面都有不同的 html 内容，请使用 html 字段，并让您的主题将其放置在您想要的任何位置。

如果您要包含的 html 对于每个页面都相同，请使用 html 小部件并将其放置在您希望显示的区域中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:11:25.260

不确定“管理部分中的每个内容页面”是什么意思，但有一个 HTML 字段应该可以解决问题。

# java - Spring Framework 在 JBoss 上看不到 cglib

> ID：10566955
> 
> 赞同：1
> 
> 时间：2012-05-12T19:57:47.113
> 
> 标签：java, spring, jboss5.x, cglib

我的应用程序在 JBoss 5.1.0.GA 上使用 Spring Framework 3.0.5。框架由服务器提供，即框架库放在`server/<servername>/lib`目录下。该服务器由第三方管理，因此我无法将任何库添加到该服务器提供的环境中。在我的应用程序中必须使用 cglib。Spring 将其用于代理目的。cglib 不在 中`server/<servername>/lib`，因此我使用 maven将其包含`cglib-2.2.2.jar`在我的应用程序中。`.war`

问题是部署时出现以下错误：

> 无法代理目标类，因为 CGLIB2 不可用。将 CGLIB 添加到类路径或指定代理接口。

我检查了我的应用程序`.war`的 cglib 并在`WEB-INF/lib`目录中找到了它。AFAIK 位于此目录中的 jar 中的所有类都在类路径中，以及 .jar 中的类`server/<servername>/lib`。为什么Spring找不到cglib？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:05:28.903

对于这个问题，JBoss 类加载器层次结构只能“向下”查看，即系统类加载器加载的类无法看到应用程序 lib 目录中的类。所以服务器的 lib 目录中的 Spring 库无法在您的应用程序的 lib 目录中看到 cglib。

可能的解决方案，按优先顺序排列：

1.  从服务器的 lib 目录中删除 Spring JAR。他们不应该在那里，这只是一个坏主意。但是你说你不能这样做。
2.  将 cglib 添加到服务器的 lib 目录。由于与上述相同的原因，这不是一个选项。
3.  将 Spring JAR 的副本添加到应用程序的 lib 目录。确保它们与服务器的完全相同，否则您将面临奇怪的类版本冲突的风险。这应该允许解析 cglib。

选项 3 远非理想，因为在类加载器之间复制类是类加载器问题的一个秘诀，但它可能是您唯一的选择。

# python - 为什么它必须是 GUI 线程的上下文？

> ID：10566965
> 
> 赞同：1
> 
> 时间：2012-05-12T19:59:46.637
> 
> 标签：python, multithreading, user-interface, wxpython

这是 wxPython 源文件的摘录：

```
 """
    Create the output window if needed and write the string to it.
    If not called in the context of the gui thread then uses
    CallAfter to do the work there.
    """ 
```

这在内部如何运作？为什么与 GUI 相关的调用不由其他线程直接进行很重要？

您是否知道图表或以简短的方式解释此类 GUI 概念的东西？

我很乐意，如果我不必阅读小说来理解这个问题，以便我知道如何选择我的设计。

* * *

**编辑：**

这是为了下面的讨论：

![图表](../Images/b983fb00b3b47ec2404ac3d0c80b9fca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:26:38.847

这很容易。想想一个队列，wxPython 有它自己的内部事件队列，当你调用 MainLoop 时，你会导致 wxPython 处理它`app`，这将从主线程调用。因此，每当您修改小部件时，它都不会干扰正在处理事件队列的 MainLoop。但是当您添加线程时，不止一个线程正在操作 GUI 和/或事件队列和 GUI 访问不同步。这就是 wx.CallAfter 有用的地方，它只是向 Event-Queue 添加一个伪事件，它将调用您指定的函数，因此它将从主线程执行，并且只有一个线程正在访问 GUI。请注意，当您传递的函数需要一段时间才能返回时，GUI 将冻结，因为不再处理事件（如移动或点击）。

相关：[http ://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)

# asp.net - 将鼠标悬停在 Asp.Net 点图上的点上

> ID：10566966
> 
> 赞同：0
> 
> 时间：2012-05-12T19:59:48.213
> 
> 标签：asp.net, charts, hover

我正在使用 ASP.NET 创建一个网站，并且正在使用 stock Chart 控件将一些数据点映射到散点图上。我想要的是能够将鼠标悬停在一个点上并显示一个小的用户控件，其中包含有关该数据点的一些信息。这是可能的还是我应该在 MS Controls 之外寻找解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:13:58.573

您可能正在从 Microsoft 图表中寻找类似工具提示功能的东西。

看看这个

[http://blogs.msdn.com/b/alexgor/archive/2008/11/11/microsoft-chart-control-how-to-using-keywords.aspx](http://blogs.msdn.com/b/alexgor/archive/2008/11/11/microsoft-chart-control-how-to-using-keywords.aspx)

[如何在 MS Chart 上显示工具提示](https://stackoverflow.com/questions/8136072/how-to-show-tooltip-on-ms-chart)

# liferay - Liferay 6.1 EE / Liferay Developer Studio / Tomcat 7 - 端口 8080 已在使用？

> ID：10566972
> 
> 赞同：1
> 
> 时间：2012-05-12T20:00:38.647
> 
> 标签：liferay, tomcat7

在生产机器上配置 Liferay Developer Studio 并在尝试启动 Tomcat 7 时收到端口 8080 已在使用中的错误。找不到任何地方来更改端口或知道什么可能已经在 8080 上运行。

如何找出 8080 上已经运行的内容并将其关闭？或如何配置 Tomcat 在另一个端口上运行？

非常感谢任何帮助

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:12:49.603

您可以在 conf/server.xml 中配置 tomcat 的端口（在其中搜索“端口” - 出现多次）。随心所欲地改变。

当您谈论生产系统时：理想情况下，这些系统应该真正被管理，如果有您不知道的软件正在运行，我会有点担心。您只需将浏览器连接到[http://your.machine:8080/](http://your.machine:8080/)并检查您在此处看到的内容，假设它在 http 协议中进行响应。

还有哪些其他工具可用于检测占用该端口的内容取决于您的操作系统。从“netstat”开始（Windows 上的“netstat help”，基于 unix 的操作系统上的“man netstat”或“netstat --help”）——它在 Windows 和 Linux 上可用，我假设在 MacOS 上也是如此（无法测试） . 而且，当然，对于端口上的 http：只需将浏览器指向它即可查看响应内容

# android - 横向模式下的 PreferenceFragment 加上标题

> ID：10566973
> 
> 赞同：0
> 
> 时间：2012-05-12T20:00:47.370
> 
> 标签：android, android-fragments, landscape, preferenceactivity

如何配置首选项活动以自动在左侧显示首选项标题并在右侧显示所选标题的详细信息？你能指点我一些文档吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:02:09.993

从[文档](http://developer.android.com/reference/android/preference/PreferenceActivity.html)中，

> 此活动显示一个或多个首选项标题，每个首选项都与一个 PreferenceFragment 相关联以显示该标题的首选项。然而，这些关联的实际布局和显示可能会有所不同；目前可能采取两种主要方法：
> 
> 在小屏幕上，首次启动时，它可能仅将标题显示为单个列表。选择其中一个标题项将重新启动活动，它只显示该标题的 PreferenceFragment。在大屏幕上，可以将标题和当前 PreferenceFragment 一起显示为窗格。选择标题项会切换为显示该项的正确 PreferenceFragment。

因此，运行 Android 3.0+ 的大屏幕平板电脑会自动支持您所描述的行为。

# django - 同时运行 Django fcgi 守护进程

> ID：10566974
> 
> 赞同：1
> 
> 时间：2012-05-12T20:00:48.550
> 
> 标签：django, fastcgi, upstart

我在 Ubuntu脚本中有以下两个`exec`语句：`upstart`

```
exec /bin/su -c "cd /var/www/ssrc/jvwf/; \
python /var/www/ssrc/jvwf/manage.py runfcgi --settings=spzr.settings-admin \
--pythonpath=/var/www/ssrc/jvwf method=prefork socket=/tmp/www/spzr-adm.socket \
pidfile=/tmp/www/spzr-adm.pid minspare=2 maxspare=4 maxchildren=10 \
maxrequests=65535 daemonize=false" - www-data

exec /bin/su -c "cd /var/www/ssrc/jvwf/; \
python /var/www/ssrc/jvwf/manage.py runfcgi --settings=spzr.settings-live \
--pythonpath=/var/www/ssrc/jvwf method=prefork socket=/tmp/www/spzr.socket \
pidfile=/tmp/www/spzr.pid minspare=2 maxspare=4 maxchildren=10 \
maxrequests=65535 daemonize=false" - www-data 
```

第二个命令仍然存在，而第一个命令停止工作。当两个命令的顺序颠倒时也会发生同样的情况。

当使用与上述完全相同的语法从同一个新贵服务单独（即单独）运行时，这两个命令都可以完美运行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:18:05.463

每个 upstart 作业只能有一个主程序，因此运行两件事意味着有两个 upstart 作业。

因此，您需要将它们拆分为具有唯一名称的两个单独的作业。如果你想一起控制他们，你可以有他们跟随的第三个控制工作

/etc/init/control-fcgi.conf：

```
start on runlevel [2345]
stop on runlevel [016] 
```

然后其他两个都会这样做：

```
start on starting control-fcgi
stop on stopping control-fcgi 
```

# java - 获取所有系统壁纸

> ID：10566975
> 
> 赞同：8
> 
> 时间：2012-05-12T20:00:50.013
> 
> 标签：java, android, system, wallpaper

有没有办法以编程方式获取所有 android 系统壁纸？

我知道如何通过 获取当前的`WallpaperManager`，然后将其保存到磁盘。但我想知道是否有办法访问操作系统中包含的所有充当系统壁纸的图片

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:46:06.480

所有壁纸都位于启动器应用程序中。由于启动器的名称及其资源可能因设备而异，因此无法创建可靠的方法来执行此操作。

在 Android 上，壁纸位于 Launcher2.apk:res/drawable *-somedpi*中。在我的设备上，它们位于 drawable-hdpi 文件夹中，但在其他设备上可能会有所不同。

[首先获取此](https://stackoverflow.com/a/7205854/1005915)答案中描述的启动器（com.android.Launcher2.apk）的资源。

然后您可以使用类似于[此](https://stackoverflow.com/questions/1495585/how-can-i-get-a-directory-listing-of-resources-from-my-android-app)问题中的方法列出资源。

我自己还没有尝试过所有这些，所以它可能无法按预期工作。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-18T23:54:25.807

只需弄清楚它们的保存位置并以这种方式访问​​它们。

# javascript - jquery队列到父母而不是特定的孩子？

> ID：10566976
> 
> 赞同：0
> 
> 时间：2012-05-12T20:00:51.583
> 
> 标签：javascript, jquery, animation, queue, children

我正在对 div 的孩子制作一些动画，孩子们在悬停时一次制作一个动画，而另一个正在停止，有时也被移除。我想要的是当所有动画停止/停止/或不再移动时的回调 - 换句话说。

...我试图做这样的事情，直接排队到父母，但这似乎根本不起作用：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" >
            $(document).ready(function(){   

                $('div.start').click(function(){

                    $('<img style="display:block;display:none;" src="http://www.laserpros.com/images/site/HP_Circle_Logo_Vector1_small.jpg">')
                    .appendTo($(this))
                    .animate({opacity:0},0)
                    .css('display','block')
                    .animate({opacity:1},2000,function(){});

                    $(this).queue(function(){
                        $('#gotcha').html(1+parseInt($('#gotcha').html()));
                    });

                });         
            });
            </script>
        <style>
            div.start{
                background-color:#0057D8;
                width:100px;
                float:left;
            }
            div#gotcha{
                float:left;
                width:100px;
            }
        </style>
    </head>
    <body>
        <div></div>
        <div class="start">Start</div>
        <div id="gotcha">
            0
        </div>
    </body>
</html> 
```

一旦动画完成，这个数字应该会改变，但这永远不会发生。我还有其他方法可以做吗？或者也许以某种方式获得 fx 的剩余时间，并使用 setTimeout？

任何建议表示赞赏。

**编辑**：我为什么要这样做？

实际上，我有一系列小拇指图像，在将它们悬停时，它们会在 dom 中创建更大的对应物，这些图像会在加载时将自己附加到展示 div。附加的图像相互堆叠，以实现平滑的过渡效果，最新加载的图像正在动画，同时也阻止其他兄弟姐妹动画。悬停后，我想在所有动画停止后创建一个超时以缩放回原始图片。我尝试使用 .children('img:last').queue(function(){}) 将缩放返回效果排队到最新的孩子，但是因为它们是与加载事件异步加载的，所以它们的顺序不清楚，而且一次动画完成了，如果我们不快速取消悬停，它会采用 opacity 1 并从父级中移除其他兄弟姐妹。所以'

**编辑 2**：现在我稍微修改了我的代码，我只在加载后将 img 附加到 div，所以最后加载的总是可用 img: last 选择器，但有些东西告诉我，这也不受 bug 保护.

现在我在想最好的办法是做这样的事情：

1.  为所有孩子获取 isAnimated。
2.  如果动画 - 获取持续时间并设置超时事件。
3.  如果否 - 直接执行事件。

但问题是我不知道如何获得动画的剩余持续时间。如果您对此提出一些建议，那将有很大帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:18:00.610

我不确定我是否正确理解了这个问题，但似乎每次用户点击“开始”时，图像都会出现并且数量会增加！如果是这样的话：

请参阅此 Fiddle[工作示例！](http://jsfiddle.net/zuul/BvvwJ/)

**查询**

```
$('div.start').click(function(){
  var $me = $(this),
      src = 'http://www.laserpros.com/images/site/HP_Circle_Logo_Vector1_small.jpg';

  $('<img style="display:block;display:none;" src="'+src+'">')
    .appendTo($me)
    .css({"display":"block", "opacity":0})
    .animate({opacity:1},2000,function(){
      $('#gotcha').html(1+parseInt($('#gotcha').html()));
    });
}); 
```

**CSS**

```
div.start {
  background-color:#0057D8;
  width:100px;
  float:left;
}
div#gotcha {
  float:left;
  width:100px;
} 
```

**HTML**

```
<div></div>
<div class="start">Start</div>
<div id="gotcha">0</div> 
```

* * *

# 已编辑

**根据评论的要求编辑，**仅当排队动画为空时更新#gotcha。

查看新的[Fiddle 示例！](http://jsfiddle.net/zuul/BvvwJ/2/)

**HTML**

```
<div class="start">Start</div>
<div id="gotcha">0</div> 
```

**查询**

```
// Jquery Object and image SRC
var $me = $('div.start'),
    src = 'http://www.laserpros.com/images/site/HP_Circle_Logo_Vector1_small.jpg';

// On click over "start"
$me.on("click", function(){
    $('<img style="display:block;display:none;" src="'+src+'">')
        .appendTo($me)                                // append img to div
        .css({"display":"block", "opacity":0})        // hide img
        .animate({opacity:1},2000, function() {       // animate
            if ($me.queue('fx').length==0) {          // if queue is empty
                $('#gotcha').html("1");               // update #gotcha to 1
            }
        });
}); 
```

**CSS**

```
div.start {
    background-color:#0057D8;
    width:100px;
    float:left;
}
div#gotcha {
    float:left;
    width:100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:24:17.313

由于动画的时间是恒定的，结果只是在适当的时候捕捉它，我决定使用一般变量，所以在开始动画之前我将变量设置为动画长度。

例如。

```
time=400; 
```

然后我用这个计时器制作动画。稍后我可能会为动画添加步进函数以更精确地确定数字......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:47:50.447

我试图做的事情看起来简直是不可能的。

提出的问题的解决方案如下：

为孩子的动画制作步骤并设置完成它所需的时间。

然后取这个变量，并设置超时，所以它会在动画之后执行。

也有可能任何孩子都可以写入该变量，因此我们不需要搜索它们。

最后它完美地完成了我的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T02:40:02.197

据我所知，您正在尝试在给定元素集合的所有动画完成后运行回调。在这种情况下，父元素的子元素：

```
$(parentElement).children().promise().done( function() {
  alert("Animation complete!");
} 
```

# c# - 通过联合登录在没有用户凭据的情况下访问用户 Google 阅读器供稿

> ID：10566977
> 
> 赞同：1
> 
> 时间：2012-05-12T20:00:57.643
> 
> 标签：c#, google-reader

在尝试实现这一点之前，我想知道是否真的可以通过[联合登录](https://developers.google.com/accounts/docs/OpenID)在没有用户凭据的情况下访问用户的 Google 阅读器供稿，以避免不得不处理和保护他的凭据。

有人对这个有经验么？

# javascript - 修改 JavaScript 以排除第一列打开新页面

> ID：10566980
> 
> 赞同：0
> 
> 时间：2012-05-12T20:02:04.640
> 
> 标签：javascript

我有一个包含数据的 html 表。当我单击表格行时，我使用此 JavaScript 打开新页面：

```
function addOnclickToDatatableRows() {
                //gets all the generated rows in the html table
                var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                //on every row, add onclick function (this is what you're looking for)
                for (var i = 0; trs.length > i; i++) {
                    trs[i].onclick = new Function("rowOnclick(this)");
                }
            }

            function rowOnclick(tr) {
                var elements = tr.cells[0].childNodes;
                for(var i = 0; elements.length > i; i++) {
                    if ((typeof elements[i].id !== "undefined") &amp;&amp;
                    (elements[i].id.indexOf("lnkHidden") > -1)) {
                        //opne in a new window//  window.open(elements[i].href);
                        location.href=elements[i].href
                        break;
                    }
                }
                return false;
            } 
```

单击一行时，如何修改脚本以排除第一列。在表格的第一列上，我有不想单击并打开新页面的复选框

最好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:21:42.950

你可以做几件事：

如果您想继续使用您提供的脚本，您可以在 td 而不是 tr 上设置 onclick 并跳过第一个。你必须写……你自己之间的部分，但这应该不难

```
function addOnclickToDatatableRows() {
  //gets all the generated rows in the html table
  var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
  //on every row, add onclick function (this is what you're looking for)
  for (var i = 0; trs.length > i; i++) {
     var tds = trs[i].getElementsByTagName('td');        
     for (var j = 1; j <= tds.length; j++) {
       tds[j].onclick = new Function("colOnclick(this)");
     }
  }
}

function colOnclick(td) {
  var link = ...get the link from the tr using parentNode...
  location.href=link
  return false;
} 
```

但是，我会像这样更改 html 和 javascript：

1.  在标签的`data-`属性中放置单击行时要打开的链接。`TR`（例如`<tr data-link="http://www.link.com")>`
2.  仅使用一个 onclick 处理程序：将其放在桌子上
3.  我点击处理程序找出目标：

    ```
    function handler(e) {

      var targ;
      if (!e) var e = window.event;
      if (e.target) targ = e.target;
      else if (e.srcElement) targ = e.srcElement;

      do stuff with targ...
    } 
    ```

4.  如果目标在第一个 td 或 tr 内，则忽略它。否则确定目标所在的tr，获取data-link属性并打开它。

我也会使用 jQuery 或类似的东西来完成繁重的工作。在这种情况下，它会容易得多。您需要的唯一代码是：

的HTML：

```
<table id="idOfTable">
    <tr data-link="http://www.ledlamp.nl">
        <td>col1</td>
        <td>col2</td>
        <td>col3</td>
    </tr>
    <tr data-link="http://www.isaac.nl">
        <td>col1</td>
        <td>col2</td>
        <td>col3</td>
    </tr>
</table> 
```

jQuery ​</p>

```
$('#idOfTable').delegate('td:gt(0)', 'click', function() { 
   document.location.href = $(this).closest('tr').data('link')
});​ 
```

在其中，我选择您要处理所有点击的表格。只有与 CSS3 选择器匹配的点击元素`td:gt(0)`才会被监听。（这个选择器返回所有不是第一个的 td。）。单击时，它会找到最近的 TR（其 TR 父级）并使用该`.data()`函数获取数据链接属性。正如您所见，jQuery 只需几行代码就可以非常强大。

我为您创建了一个 jsfiddle 示例。这是：http: [//jsfiddle.net/TDjhT/](http://jsfiddle.net/TDjhT/)

# php - 保持用户登录的正确和安全/可靠的方法是什么？饼干？会议？PHP && MYSQL

> ID：10566988
> 
> 赞同：27
> 
> 时间：2012-05-12T20:04:03.910
> 
> 标签：php, mysql, session, cookies

后来我问如何正确注销用户，现在我发现仅使用 cookie 来保持用户登录根本不安全。

将密码保存在 cookie 中并不是一种安全的方法，所以我的问题是，在我的网站上创建（登录/保持用户登录）的正确方法是什么？

目前我存储的用户 ID 与显示 X 用户配置文件所需的 url 相同，电子邮件和密码在 MD5 中加密。

Setcookie 是我在成功登录时使用的唯一函数。我只使用会话来存储随机数以避免重复提交表单。隐藏字段。

• 你能告诉我正确和安全的方法吗？
• 你的方法是什么？

仅限 PHP。两个月的php，都从你的回答中学到了。谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-12T20:25:46.320

First, let me tell you this. Nothing is 100% secure. Nothing is air tight, and nothing is sacred. If motivated enough, an attacker will break every server-side defense you may put (unless you are using HTTPS, which is a different story).

You may use cookies, but cookies are highly exposed and easily modified. Never store private data, or access levels in a cookie. As it is easily stolen/modified by an attacker.

Sessions are not 100% safe either. The session ID, which the server uses to identify the client, is sent by one of 2 ways. a $_GET variable (bad), or a cookie (better, but still pretty bad). Meaning, if you are logged in as the administrator, over an unsecured WiFi, a skilled attacker (and by skilled I mean a pr0 haxx0r that downloaded a simple HTTP sniffer) can easily steal your SESSION ID. And while not getting your password, the server will wrongly identify the attacker as you, and grant him any access you may have/had.

So what to do? Sessions are on most cases safe. Advise your users to not log in under an unsecured network (buses, internet cafes, etc.). If you want to allow your user authorization to persist over time, a cookie is required. I usually use a 2 cookie system if I need that:

```
userid=12345
hash=password_hash($userid . $hashed_password, PASSWORD_DEFAULT) 
```

Then I have something to match against, and the user's details weren't revealed.

* * *

But like I said, in the end of the day, if you really REALLY wanted to secure your users, in above to everything else written in this answer, get yourself HTTPS.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-12T20:17:44.343

我会使用会话。

为了在安全方面有所帮助，一旦验证了用户凭据，请使用[session_regenerate_id](http://php.net/manual/en/function.session-regenerate-id.php) - 因为会话 id 是在 cookie 中传递的内容，如果有人在处理登录时四处嗅探，这很重要。

不要在会话中存储与访问凭据有关的任何信息 - userId 通常就足够了；我个人构建了一个存储在会话中的用户对象（这些对象在请求之间自动序列化/反序列化 - 但您可以独立阅读）。

如果您希望设置一个 cookie，以便用户在下次访问时不必登录，则可以存储 userId 和一个自动生成的令牌，可以在数据库（或类似的）中进行检查 - 我也会在检查中添加额外内容 -就像将最后一个 ipaddress 与要检查的令牌一起存储一样，如果它们不匹配，则再次要求登录。

有很多方法可以采用——我不提供全部/“最好的”——让 php 社区中的人审查你的代码——这样你会学到更多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-12T20:49:25.530

如果某人有登录名和密码，则可以在他们的浏览器中将其设置为 cookie，这样他们就不必每次访问您的网站时都重新登录。您几乎可以在浏览器 cookie 中存储任何内容。问题是用户可以随时阻止或删除cookies。例如，如果您网站的购物车使用了 cookie，并且有人将浏览器设置为阻止它们，那么他们就无法在您的网站上购物。

当您在 cookie 中存储数据时，您必须绝对确定用户不会以任何方式篡改数据。没有办法阻止用户更改 cookie 中的数据；这太容易了。因此，为了确保您的网站不接受包含更改数据的 cookie，您需要加密 cookie 值或使用允许您验证其完整性的哈希对其进行签名。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-28T05:32:48.390

最佳实践是使用 PHP 会话。

PHP 会话是通过让浏览器在会话期间每次发出请求时返回一个称为*会话 ID的加密安全（即，下一个有效值不可猜测）字符串来维护的。*最好和最安全的方法是给浏览器一个*会话 cookie*，然后它将随每个请求一起发送。

使用*会话 cookie*的另一种方法是将 PHP 会话 ID 作为 GET 变量包含在请求 URL 本身中。示例 URL 可能类似于：

`https://www.example.com/mypage.php?PHPSESSID=cteekbf64igp5vdjjkktvoeb97`

这不如使用 cookie 安全，因为 URL 可能会意外地被共享或通过其他方式被盗。

安全性是多层的，就像洋葱一样（就像常见的例子一样）。你做的东西越安全，确保它安全所需的努力就越多，使用起来就越不方便。这是一个成本效益的权衡。所以你必须问，你的数据有多重要，你的用户的隐私和安全等。

对我来说，基本级别是使用 PHP 会话，其会话 ID 强制位于 cookie 中（阻止禁用 cookie 的用户），始终对数据和 cookie 进行 SSL 加密，并确保各种 PHP 设置影响会话的安全性设置为最佳、最安全的设置。您需要阅读这些页面和子页面上的所有内容：

*   [http://php.net/manual/en/intro.session.php](http://php.net/manual/en/intro.session.php)
*   [http://php.net/manual/en/session.security.php](http://php.net/manual/en/session.security.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-18T05:52:20.960

正如@Madara 所说，没有什么是 100% 安全和正确的，但从开发人员的角度来看，我会说每种保留用户会话数据的方法都有其自身的优点和缺点。

**Cookie 中的用户数据与会话**

如果您将用户的会话数据保存在 cookie 中，它将消耗更少的服务器 RAM 内存和处理，因为您不必将登录的用户信息保存到 RAM 中。此外，如果用户增加，则建议将用户会话数据保存在 cookie 中而不是会话中，因为保持会话会消耗服务器资源，并且您的应用程序有时可能会变慢且无响应。好像您将用户的登录数据保留在会话中它比 cookie 更安全，但它会消耗更多的服务器资源。

**最后一点：** 如果您的应用程序使用的是 HTTPS 协议，那么这两种方法在其自己的实现中都是正确的，那么安全性不应该成为问题。所以我建议根据应用程序和业务模型的要求使用保留用户会话数据的方法。

# javascript - 被简写语法弄糊涂了：x > 0 ? 1：-1；

> ID：10566990
> 
> 赞同：5
> 
> 时间：2012-05-12T20:04:20.197
> 
> 标签：javascript, syntax, conditional-operator

以下 Javascript 语法是什么意思？请描述整个语法：

```
var x = 0;
x > 0 ? 1 : -1;  // confused about this line
alert(x); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-12T20:05:45.970

这本身没有任何意义。您将 alert`x`的值，即 0，仅此而已。除非您将第二个语句分配给某物，否则第二个语句是没有意义的。但是，如果您会这样做：

```
var x=0;
var y = x > 0 ? 1 : -1;
alert(y); 
```

你会得到-1。

**[Conditional Operator](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)**是 IF 语句的简写，它基本上说：

> 断言如果`x > 0`。如果是，则分配 1。如果不是，则分配 -1。

或者更一般的形式：

```
CONDITION ? VALUE_IF_TRUE : VALUE_IF_FALSE; 
```

在哪里：

*   `CONDITION`- 可以是任何计算为布尔值的东西（即使在类型杂耍之后）。
*   `VALUE_IF_TRUE``CONDITION`-被断言的情况下要返回的值`TRUE`。
*   `VALUE_IF_FALSE``CONDITION`-被断言的情况下要返回的值`FALSE`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:21:48.240

那就是**条件运算符**。它是一个三元运算符，因为它有三个操作数。它通常被称为三元运算符，但该术语相当宽松，因为任何具有三个操作数的运算符都是三元运算符。恰好 is 是唯一常用的三元运算符。

这是什么意思？表达方式

```
a?b:c 
```

计算结果为`b`if`a`计算结果为 true，否则表达式计算结果为`c`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:12:31.600

这是一个三元运算符（？）

把它想象成一个 IF 语句。

'?' 之前的陈述 是您的 if 语句的条件。如果语句为真，紧接在“：”之前的内容是将执行/分配的内容。如果语句为假，则在“：”之后将执行/分配的内容。

但是，您的代码只会警告 0，因为您没有从三元运算符分配任何内容。

基本上你的代码还不如说。
`x = 0; alert(x); // this would alert 0`

您需要将其修改为：
`x = 0; var y = x > 0 ? 1 : -1; alert(y);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T20:05:21.633

它将是-1。这称为[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)。

基本上它扩展到此（假设您打算放在`x=`第二行的开头）。

```
if(x>0){
  x = 1
} else {
  x = -1
} 
```

# matlab - 是否可以在 MATLAB 环境内部和外部执行编译代码？

> ID：10566991
> 
> 赞同：3
> 
> 时间：2012-05-12T20:04:36.843
> 
> 标签：matlab, matlab-guide

让我解释一下我想要做什么。我有一个用 Matlab 编码的应用程序，我想将它提供给 Matlab 用户和非 Matlab 用户。所以你会说：只是编译它并部署一个可执行文件。美好的。

但是部署的应用程序在某种程度上限制了你可以做什么（非常重要的是，你不能执行其他 M 文件）所以我还想让 Matlab 用户可以从 Matlab 中启动部署的应用程序并提供这些高级功能对于这些家伙。那么有可能吗？

当然，我可以提供两个版本：A .exe 和 .m 但这不是很优雅，也许有一个很好的技巧可以做到这一点。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:33:53.423

您可以`eval`在部署的应用程序中使用。您也可以阅读`.m`文件，因为它们只是文本。因此，阅读文件，逐行评估，然后就可以`.m`在编译的 Matlab 程序中使用 3d 方脚本文件。

您将无法以这种方式使用函数，只能使用脚本。

我唯一不确定的是它是否合法。我不能保证，您必须自己联系 Mathworks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:06:48.667

Matlab 没有执行此操作的内置功能，并且检测是否有人安装了 Matlab 取决于操作系统。