# StackOverflow 问答 11125000-11125999

# java - Java：在 Windows 中增加堆大小不会生效

> ID：11125002
> 
> 赞同：0
> 
> 时间：2012-06-20T17:32:03.367
> 
> 标签：java, memory, windows-7, heap-memory

我从命令行运行以下代码：

```
public class MemoryTest {

    public static void main(String[] args) {
        Runtime rt = Runtime.getRuntime();
        long maxMb = rt.maxMemory()/(1024*1024);
        System.out.println("Your JVM will use up to " + maxMb + " MB of memory for its heap");
    }

} 
```

它输出：*247 MB*

然后我转到控制面板 -> Java 选项卡 -> 视图 -> 运行时参数列中的**Java**图标。我输入以下内容：*-Xms512M -Xmx1024M*

然后我再次运行内存测试。输出：*247 MB* ​​。

为什么不增加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:35:58.710

如果是从命令行运行java，需要在命令行中指定

尝试

```
java -mx1g MemoryTest 
```

# javascript - 用 jQuery 创建新的 div？

> ID：11125017
> 
> 赞同：0
> 
> 时间：2012-06-20T17:32:54.973
> 
> 标签：javascript, onclick

我的页面中有这六个静态 div，我想创建一个更新变量并向页面添加新 div 的按钮。这是我到目前为止所拥有的：

```
function addSlot(){
   maxChecks = maxChecks+1;
   $("#list").append("<div id ='member7' class='member'></div>");
} 
```

所以这增加了一个 div，但问题是新的 div 总是会有一个 'member7' 的 id。如何使下次单击按钮时，下一个新 div 是 member8，然后是 member9，等等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:36:41.900

用这个 ：

```
function addSlot(){
   maxChecks = maxChecks+1;
   var count = jQuery('.member').length;
   var div_id = count + 1;
   $("#list").append("<div id ='member" + div_id + "' class='member'></div>");
} 
```

获取具有类“成员”的 div 的总数，然后在 DIV id 中执行 +1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:35:29.980

这很简单：

```
function addSlot( i ){
  maxChecks = maxChecks+1;
  $("#list").append("<div id ='member" + i + "' class='member'></div>");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T17:35:53.817

这不是一个真正的 jQuery 问题。你只需要一个`addSlot`方法之外的计数器：

```
var counter = 1;
function addSlot(){
   maxChecks = maxChecks+1;
   $("#list").append("<div id ='member" + (counter++) + "' class='member'></div>");
} 
```

显然，这不是唯一的方法。例如，如果您希望 ID 始终与成员 div 的数量保持一致，请参见[Nishu 的回答。](https://stackoverflow.com/a/11125069/105570)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T17:37:35.487

这将在函数本身中缓存计数，无论调用上下文如何，而不是将计数分配给全局变量。

```
function addSlot(){
   var count = (addSlot.count || 0) + 1;
   $("#list").append("<div id='member" + count + "' class='member'></div>");
   addSlot.count = count;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T17:37:37.237

或者

```
function addSlot(){
   maxChecks = maxChecks+1;
   $("#list").append("<div id ='member" + ( $('.member').length + 1) + "' class='member'></div>");
} 
```

# facebook - 我的网页 og metas 不被阅读

> ID：11125020
> 
> 赞同：0
> 
> 时间：2012-06-20T17:33:09.280
> 
> 标签：facebook, .htaccess, facebook-graph-api, facebook-opengraph

我添加了一些元 og，所以当人们分享页面时......你知道的。

事情是当您尝试共享页面时：[http://mypage.com](http://mypage.com)，就好像该页面没有任何内容，而当我这样做时[http://mypage.com/index.html](http://mypage.com/index.html)它会读取所有元数据适当地。

有什么想法吗？我什么都试过了！

干杯，

奥托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:19:12.350

这可能是 Facebook 端的缓存问题。 [http://mypage.com](http://mypage.com)和[http://mypage.com/index.html](http://mypage.com/index.html)被视为不同的页面，一个可能被 Facebook 缓存而另一个还没有被缓存。即使使用 linter 工具 (developers.facebook.com/tools/debug) 也可能不会刷新 Facebook 的缓存并开始使用新的 OG 标签。我们在meltedjoystick.com 上遇到了这个问题，我们只需要在重新抓取页面时等待缓存被纠正。我们花了大约 10 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:30:43.427

如果您实际上链接了您的页面，那么回答您的问题会容易得多，opengraph 标签真的很古怪，所以任何事情都可能是问题所在。

最常见的问题是 og:url 标签。你提供一个吗？它指向正确的位置吗？虽然您可能认为 Facebook 会查看您的页面以获取 og:description 和其余信息，但它实际上会查看您的页面以获取 og:url 然后转到该标记中指定的 URL 以查找实际数据。

除此之外，请务必使用[OpenGraph 调试器工具](https://developers.facebook.com/tools/debug)查看是否可以发现任何简单的问题。在顶部查找重定向，然后单击底部的链接以完全按照 Facebook 看到的方式查看页面。

# css - 覆盖多个类

> ID：11125025
> 
> 赞同：0
> 
> 时间：2012-06-20T17:33:26.253
> 
> 标签：css

如果我试图覆盖多个类中的特定标签，我是否必须为每个类明确地写出来，或者有没有办法将它们组合起来。例如我有：

```
.class1 { }
.class2 { }
.class1 h2 {
    <!-- some code -->
} 
```

而且我想将class1中h2标签的代码也应用于class2中的h2标签，有没有办法为class1和class2定义它而无需两次编写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:34:55.723

你想要[选择器分组](http://www.w3.org/TR/CSS2/selector.html#grouping)：

```
.class1 h2,
.class2 h2 { ... } 
```

引用规范：

> *在这个例子中，我们将三个具有相同声明的规则压缩为一个。因此，*
> 
> ```
> h1 { font-family: sans-serif }
> h2 { font-family: sans-serif }
> h3 { font-family: sans-serif } 
> ```
> 
> *相当于：*
> 
> ```
> h1, h2, h3 { font-family: sans-serif } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:38:45.993

如果你想让 css 应用于页面中的所有 h2，你可以定义它的页面级别。但是如果你只想申请 class1 & class2 ，你将不得不写两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:44:29.933

如果您在多个类中具有相同的 css 样式，那么您应该组合这些类，以优化代码。

您可以对 css 类进行分组。

```
.class1 h1{ ........}
.class2 h2{ ........ } 
```

这意味着，h2 元素将具有 class1 css 样式。

```
.class1,.class2{..........} 
```

这意味着，class1、class2 都具有相同的 css 样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:46:38.863

```
 <h2 class="class1 class2">This is my taunt</h2> 
```

这是实现多个类的标准方法。作为一般规则，您应该定义预先知道将重叠的类，以排除您知道将在另一个类中的声明。为常见的属性/值对创建第三类。

# php - php的AWS elasticache连接问题

> ID：11125029
> 
> 赞同：2
> 
> 时间：2012-06-20T17:33:55.473
> 
> 标签：php, memcached, amazon-elasticache

我在**aws上使用****elasticache**集群。细节是

 **```
Engine: Memcached
Cache Engine Version: 1.4.5 
```

在对节点进行 telnet 时，使用节点 ip-port 始终可以访问 memcached 服务器。但是当尝试连接 PHP 时，有时根本没有创建 memcache 对象。

客户端使用**php-pecl-memcache-3.0.5**进行连接。

正在使用的代码是

```
$cache = memcache_connect(MEMCACHE_HOST, MEMCACHE_PORT); 
```

有时会发生**$cache**对象没有被创建。

请指导我如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T16:09:03.450

现在使用更新版本的 memcached（目前是 1.4.14），我相信连接问题可能是 1.4.5 版本的 memcache 中的错误的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T20:36:58.940

试试这个：

```
<?php

$server_endpoint = "xxx.xx.xfg.sae1.cache.amazonaws.com";
$server_port = 11211;

if (version_compare(PHP_VERSION, '5.4.0') < 0) {
    //PHP 5.3 with php-pecl-memcache
    $client = new Memcache;
    $client->connect($server_endpoint, $server_port);
    //If you need debug see $client->getExtendedStats();
    $client->set('myKey', 'My Value PHP 5.3');
} else {
    //PHP 5.4 with php54-pecl-memcached:
    $client = new Memcached;
    $client->addServer($server_endpoint, $server_port);
    $client->set('myKey', 'My Value PHP 5.4');
}

echo 'Data in the cluster: [' . $client->get('myKey') . ']'; 
```**

# r - 通过 sapply() 或 lapply() 将多个对象传递到一个函数中，同时在函数内部保持替代 () 的功能

> ID：11125036
> 
> 赞同：3
> 
> 时间：2012-06-20T17:34:12.230
> 
> 标签：r

我的代码如下：

```
x<-read.table('1')
y<-read.table('2')
z<-read.table('2')

MyFunc<-function (data){
  plot(data[1]~data[2])
  title(main=substitute(data))
  data.new <- some.manipulations(data)
  write.csv(data.new,file=paste(substitute(data),".csv",sep=""))
}

my.list <- list(x,y,z)
lapply(mylist,MyFunc) 
```

我希望它为 25 个左右不同的表生成一个图形和一个 .csv 文件。如果我单独调用它，它工作正常 - 例如，如果我执行：

```
MyFunc(x) 
```

我得到一个标题为“x”的图表和一个文件 x.csv 我的问题是我需要这样做很多次，当我将所有表放在一个列表中并尝试使用 lapply 或 sapply 时，每个表都会以某种方式失去它的名字所以该图没有标题，并且未创建文件，因为*空白*.csv 不是可行的文件名。我还尝试连接对象：

```
my.list <- c(x,y,z) 
```

这产生了同样的问题。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:10:30.293

处理此类事情的常用方法是将所需的名称也发送给函数。在这种情况下，使用所需名称命名列表中的元素可能会有所帮助。也许是这样的：

```
f <- c('1', '2', '3')
d <- lapply(f, read.table)
names(d) <- f # optionally some other names

MyFunc <- function(dat, nam) {
  plot(dat[1]~dat[2])
  title(main=nam)
  dat.new <- some.manipulations(dat)
  write.csv(dat.new, file=paste(nam, ".csv", sep=""))
}

lapply(names(d), function(n) MyFunc(d[[n]], n)) 
```

# parameters - Liferay portlet 参数传递给不同的 portlet

> ID：11125042
> 
> 赞同：4
> 
> 时间：2012-06-20T17:34:26.507
> 
> 标签：parameters, liferay, portlet, param

所以我用谷歌搜索了一整天，得到的答案很少，但他们都失败了。更不用说所有解决方案都超过 3 年了。我正在使用 LR 6.1 CE。将不胜感激简单的工作示例，因为其他答案总是让我获得空值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T20:36:52.520

有 2-3 种方法可以做到这一点，但试试这个。

`portletSession`从`portletRequest`. _ 使用`setAttribute()`具有 3 个参数的方法。第三个参数应该是`PortletSession.APPLICATION_SCOPE`.

从 portlet 会话中获取第二个 portlet 的值。使用相同`APPLICATION_SCOPE`的来获得它。

**编辑：**

您还需要将以下标签的值`false`设为`liferay-portlet.xml`共享参数

```
<private-request-attributes>false</private-request-attributes>
<private-session-attributes>false</private-session-attributes> 
```

[您可以在DTD](http://www.liferay.com/dtd/liferay-portlet-app_6_1_0.dtd)中阅读有关这些参数的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:00:13.610

此代码从其他 portlet 调用一个 Action 并发送 2 个参数

您可以使用 ：

```
liferay-portlet:renderURL
liferay-portlet:actionURL

<liferay-portlet:actionURL name="addWallEntry" plid="<%= portletId2 %>" portletName="3_WAR_socialnetworkingportlet" var="shareUrl">
<portlet:param name="redirect" value="<%= viewFolderURL.toString() %>" />
<portlet:param name="comments" value="<%= shareMessage %>" />

 </liferay-portlet:actionURL>

<liferay-ui:icon image="share" url="<%= shareUrl %>"/> 
```

并且你必须知道plid的概念：引用的页面布局id portletName：引用的portlet名称

renderURL 和 actionURL 是 Liferay 提供的扩展标准 tlds 的标签。注意：这种通信不是 Portlet JSR168 和 JSR286 标准的一部分。

plid是我们部署一个portlet所在页面的id，我们可以使用LayOutLocalService来查找id，或者直接在数据库中查询。

portletName 是portlet 的标识符，并且是portlet 的部署描述符的一部分。此 id 由 portletId+ *WAR* +thenameofwar组成，它封装了 portlet，如果 portlet 是可实例化的，则可以选择*INSTANCE 。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:03:23.507

我附上了一个带有请求和会话属性的简单 liferay-portlet.xml 的演示。

```
<?xml version="1.0"?>
<!DOCTYPE liferay-portlet-app PUBLIC "-//Liferay//DTD Portlet Application 6.1.0//EN" "http://www.liferay.com/dtd/liferay-portlet-app_6_1_0.dtd">

<liferay-portlet-app>
    <portlet>
        <portlet-name>testRedirect</portlet-name>
        <icon>/icon.png</icon>
        <instanceable>false</instanceable>
        <private-request-attributes>false</private-request-attributes>
        <private-session-attributes>false</private-session-attributes>
        <header-portlet-css>/css/main.css</header-portlet-css>
        <footer-portlet-javascript>/js/main.js</footer-portlet-javascript>
        <css-class-wrapper>testRedirect-portlet</css-class-wrapper>
    </portlet>
    <role-mapper>
        <role-name>administrator</role-name>
        <role-link>Administrator</role-link>
    </role-mapper>
    <role-mapper>
        <role-name>guest</role-name>
        <role-link>Guest</role-link>
    </role-mapper>
    <role-mapper>
        <role-name>power-user</role-name>
        <role-link>Power User</role-link>
    </role-mapper>
    <role-mapper>
        <role-name>user</role-name>
        <role-link>User</role-link>
    </role-mapper>
</liferay-portlet-app> 
```

# iphone - 在滑动图像时在 UIScrollView 中缩放 UIImageView 导致偏移

> ID：11125043
> 
> 赞同：1
> 
> 时间：2012-06-20T17:34:26.800
> 
> 标签：iphone, ios, uiscrollview, uiimageview

我正在尝试`UIImageView`使用捏合手势来缩放 a，如下面的代码所示：

```
- (void)scaleImage:(UIPinchGestureRecognizer *)recognizer
{
    if([recognizer state] == UIGestureRecognizerStateEnded)
    {
        previousScale = 1.0;
        scrollView.contentSize = CGSizeMake(imageViewPic.frame.size.width, imageViewPic.frame.size.height);
        return;
    }
    CGFloat newScale = 1.0 - (previousScale - [recognizer scale]);
    CGAffineTransform currentTransformation = imageViewPic.transform;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransformation, newScale, newScale);
    imageViewPic.transform = newTransform;
    previousScale = [recognizer scale];
} 
```

我的问题是，如果我尝试移动新缩放的图像，它会从底部和右侧偏移（如下图所示），并且我无法从顶部和左侧完全向下移动（有区域我没有看到）。我究竟做错了什么？我得到了图像视图从转换中获得的新宽度和高度，这些值不是我应该在滚动视图内容中使用的新值吗？

![在此处输入图像描述](../Images/80c0c23bccd3d37814f0251eb6b526ba.png)

# android - 动态活动

> ID：11125046
> 
> 赞同：0
> 
> 时间：2012-06-20T17:34:34.867
> 
> 标签：android

我为我的应用程序做了一个布局，它使用了很多活动。我将我的应用程序发送给了我的朋友，他说我的布局完全错误，他告诉我我不需要使用尽可能多的活动和 dailog，并使活动动态化。他告诉我阅读有关此内容的信息，这将对我有所帮助。现在正如您在链接中看到的那样。我已尽力展示我所追求的。我一直在网上寻找，但在我得到他所说的之后找不到是什么，我可以改变对同一活动的看法，但我看不到如何使用所有这些信息而只使用 1 个活动。在我看来，该应用程序运行缓慢如果有人可以向我展示指向博客、网站、视频等的链接，以向我展示这是如何完成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:52:26.817

我相信你朋友的意思是数据和视图不应该紧密联系在一起。根据您的插图，您只需要 1 个活动和 1 个布局。然后您可以使用存储在 XML、JSON 或 SQLite 等中的数据将数据添加到您的 ListView（和 Binder）。这些是基本步骤：

1.  Activity 和视图是在`onCreate()`.
2.  数据从它碰巧所在的地方读取，然后转换成活页夹可以理解的结构。（例如 HashMap 列表）。
3.  binder 将数据“粘合”到 ListView 以将它们绑定在一起。
4.  ListView 被渲染到屏幕上以便与用户交互。

正确实现的绑定器将能够使用一种 ListView 布局和一种具有良好性能的 ListView 项布局。查看[ListView 示例代码](http://developer.android.com/resources/tutorials/views/hello-listview.html)。它使用基本的活页夹`ArrayAdapter`（

# tree - dijit 树溢出 div 但不滚动

> ID：11125051
> 
> 赞同：1
> 
> 时间：2012-06-20T17:35:09.203
> 
> 标签：tree, scroll, overflow, dojo

我有一个包含几个 div 的简单页面，我打算用各种 dijit 小部件填充这些 div。如果我插入太多文本，我有一个 div 可以正确滚动，但是如果我插入 dijit 树，树项会溢出 div 但不会发生滚动。代码如下，为了清晰起见，内联样式。如果这会使树更容易，我愿意为树使用声明性模式，但也许你可以告诉我如何按原样修复它，以便 dijitTree 将留在自己的 div 内并滚动。

谢谢。下面的代码：

```
<html>
<head>
    <title>Test dijit Tree Overflow</title>
    <style type="text/css">
        @import "http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/resources/dojo.css";
        @import "http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit/themes/tundra/tundra.css";
        @import "http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit/themes/dijit.css";
    </style>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" djConfig="isDebug:true, parseOnLoad: true"></script>
    <script type="text/javascript">
        dojo.require("dojo.data.ItemFileReadStore");
        dojo.require("dijit.Tree");
    </script>
<script type="text/javascript">
var snidTree = [{ id: 'tn1', label: 'Tree Node 1', },{ id: 'tn2', label: 'Tree Node 2', },{ id: 'tn3', label: 'Tree Node 3', },{ id: 'tn4', label: 'Tree Node 4', },{ id: 'tn5', label: 'Tree Node 5', },{ id: 'tn6', label: 'Tree Node 6', },{ id: 'tn7', label: 'Tree Node 7', },{ id: 'tn8', label: 'Tree Node 8', },{ id: 'tn9', label: 'Tree Node 9', },{ id: 'tn10', label: 'Tree Node 10', },{ id: 'tn11', label: 'Tree Node 11', },{ id: 'tn12', label: 'Tree Node 12', },{ id: 'tn13', label: 'Tree Node 13', },{ id: 'tn14', label: 'Tree Node 14', },{ id: 'tn15', label: 'Tree Node 15', },{ id: 'tn16', label: 'Tree Node 16', },{ id: 'tn17', label: 'Tree Node 17', },{ id: 'tn18', label: 'Tree Node 18', },{ id: 'tn19', label: 'Tree Node 19', },{ id: 'tn20', label: 'Tree Node 20', },{ id: 'tn21', label: 'Tree Node 21', },{ id: 'tn22', label: 'Tree Node 22', },{ id: 'tn23', label: 'Tree Node 23', },{ id: 'tn24', label: 'Tree Node 24', },{ id: 'tn25', label: 'Tree Node 25', },{ id: 'tn26', label: 'Tree Node 26', },{ id: 'tn27', label: 'Tree Node 27', },{ id: 'tn28', label: 'Tree Node 28', },{ id: 'tn29', label: 'Tree Node 29', },{ id: 'tn30', label: 'Tree Node 30', },{ id: 'tn31', label: 'Tree Node 31', },{ id: 'tn32', label: 'Tree Node 32', },{ id: 'tn33', label: 'Tree Node 33', },{ id: 'tn34', label: 'Tree Node 34', },{ id: 'tn35', label: 'Tree Node 35', },{ id: 'tn36', label: 'Tree Node 36', },{ id: 'tn37', label: 'Tree Node 37', },{ id: 'tn38', label: 'Tree Node 38', },{ id: 'tn39', label: 'Tree Node 39', },{ id: 'tn40', label: 'Tree Node 40', } ];

function prepare() {
        var store = new dojo.data.ItemFileReadStore({
            data: { identifier: 'id', label : 'label', items: snidTree }
        });
        var treeModel = new dijit.tree.ForestStoreModel({ store: store });
        var treeControl = new dijit.Tree({
            model: treeModel,
            showRoot: false,
            _createTreeNode: function(/*Object*/ args){
                var tnode = new dijit._TreeNode(args);
                tnode.labelNode.innerHTML = args.label;
                return tnode;
            },
        onClick: function(c,n,e) {
              myTreeClick(this,c,n,e);
          }
        }, "left" );
}
dojo.ready(prepare);
function myTreeClick(tree,child,node,event) {
  dojo.byId("footer").innerHTML = child.label + " was clicked";
}
</script>
</head>
<body class="tundra">
<div id='header' style="width:100%;
    background: #FC8;
    position: absolute;
    height: 30px;
    font-size: 150%;
    text-align: center;
    top: 0;">HEADING GOES HERE</div>
<div id='middle' style="width:100%;
    background: #8FC;
    position: absolute;
    top: 30px;
    bottom: 30px;">
  <div id='left' style="background: #FFF;
    position: absolute;
    overflow: scroll;
    left: 0;
    top: 0;
    width: 25%;
    height: 100%;">
  </div>
  <div id='right' style="background: #CF8;
    position: absolute;
    left: 25%;
    top: 0;
    width: 75%;
    height: 100%;">
    <div id='charts' style="background: #DF7;
      position: absolute;
      width: 100%;
      top:0;
      height:60%;">
CHARTS GO HERE
    </div>
    <div id='sliders' style="background: #BF9;
      position: absolute;
      width: 100%;
      bottom:0;
      height:40%;">
SLIDERS GO HERE
    </div>
  </div>
</div>
<div id='footer' style="width:100%;
    background: #8CF;
    position: absolute;
    height: 30px;
    font-size: 100%;
    bottom: 0;">footer</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:57:22.813

对不起，如果它是微不足道的，但我当然希望溢出：自动设置在你想要滚动的 div 上......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T15:33:21.447

我在 dijit.Tree 中遇到了类似的滚动问题。我发现树继承了 ContentPane 的行为，这意味着就布局策略而言，它将表现为 ContentPane。这是我的问题的解决方案：

CSS类：

```
.TreeHeightClass {
   height: 350;
   overflow: scroll;
} 
```

将课程应用于您的“树”：

```
domClass.add(treeControl.domNode, "TreeHeightClass"); 
```

希望这能解决您的问题。

问候

# java - 使用不同文件的 JDBC 连接

> ID：11125053
> 
> 赞同：5
> 
> 时间：2012-06-20T17:35:24.183
> 
> 标签：java, jdbc, methods

首先很抱歉标题的名称，但我不知道如何放置另一个，因为英语不是我的母语。

我有以下方法连接到数据库：

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.SQLException;

public class PgConnect {
    public  void connect() {
        Connection connection = null;
        try {
            connection = DriverManager.getConnection("jdbc:postgresql://pgserver:5432/db", "test","test123");
        } catch (SQLException e) {
            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return;
        }
        if (connection != null) {
            System.out.println("Connection working");
        } else {
            System.out.println("Failed to make connection!");
        }
    }
} 
```

我需要做的是`PgConnect`在下面的代码中包含方法。基本上我需要这个，因为我有多种类型的 SQL 对数据库的调用，并且将其更改为这种方式将很容易维护，因为凭据/主机将仅在一个文件上。

我相信改变应该是我有评论的地方

```
// i want to change this, for using the method on the first file. 
```

如果我错了，请纠正我。

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class ReturnResults {

    public static void main(String[] args) {
        Connection connection = null;
        try {
                // i want to change this, for using the method on the first file.
            connection = DriverManager.getConnection("jdbc:postgresql://pgserver:5432/db", "test","test123");

        } catch (SQLException e) {
            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return;
        }
        if (connection != null) {

            String result = null;
            String selectString = "select * from mwp.servers where env='TEST' order by server";
            //result ="iServer\tLabel\n";

            try {

                Statement stmt = connection.createStatement();
                ResultSet rs = stmt.executeQuery(selectString);

                while (rs.next()) {

                    String iEnv     = rs.getString("env");
                    String iServer  = rs.getString("iserver");
                    String iLabel   = rs.getString("label");
                    String iTitle   = rs.getString("title");
                    String iLogin   = rs.getString("login");

                    result=iEnv+"\t"+ iServer+"\t"+iLabel+"\t"+iTitle+"\t"+iLogin;

                    System.out.println(result);
                }
                stmt.close();
                connection.close();

            } catch(SQLException ex) {
                System.err.println("SQLException: " + ex.getMessage());
            }

        } else {
            System.out.println("Failed to make connection!");
        }
    }
} 
```

我知道如何在 Perl 上做到这一点，但我没有任何 Java 实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:46:12.153

制定你的`connect()`方法`static`，然后你可以这样称呼它

```
Connection con = PgConnect.connect(); 
```

还要编辑你的方法 connect to `Connection`，因为你需要返回`Connection`not `void`。

```
public static Connection connect() throws SQLException {
    try {
        Connection con = DriverManager.getConnection("jdbc:postgresql://pgserver:5432/db", "test","test123");
        // ...
        return con;
    } 
    catch (SQLException e) {
        e.printStackTrace();
        return null;
    } 
```

还有另一种更清洁的方法。这是我旧项目的示例。

```
private static DataSource getOracleDBConnection() throws NamingException {
        Context c = new InitialContext();
        return (DataSource) c.lookup("java:comp/env/OracleDBConnection");
    }

    public static Connection getOracleDatabaseConnection() {

        Connection conn = null;
        try {
            conn = OracleDAOFactory.getOracleDBConnection().getConnection();
        } 
        catch (NamingException ex) {
            Logger.getLogger(OracleDAOFactory.class.getName()).log(Level.SEVERE, null, ex);
        }
         catch (SQLException ex) {
            Logger.getLogger(OracleDAOFactory.class.getName()).log(Level.SEVERE, null, ex);
        }
        return conn;
    } 
```

我正在使用`NetBeans`，所以我不知道您如何在其他 IDE 中执行此操作，但是当您按下时`ALT+Insert`，将显示一个小菜单，您可以选择**“使用数据库...”**并只需单击几下即可自动创建你`Connection`的数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:46:27.410

隐藏凭据的一种方法是创建`connect`一个静态函数返回`Connection`，如下所示：

```
public class PgConnect {
    public static Connection connect() throws SQLException {
    try {
        Connection res = DriverManager.getConnection("jdbc:postgresql://pgserver:5432/db", "test","test123");
        if (res != null) {
            System.out.println("Connection working");
        } else {
            System.out.println("Failed to make connection!");
        }
        return res;
    } catch (SQLException e) {
        System.out.println("Connection Failed! Check output console");
        e.printStackTrace();
        throw e;
    }
} 
```

}

然后你可以像这样使用它：

```
try {
    connection = PgConnect.connect();
} catch (SQLException e) {
    System.out.println("Connection Failed! Check output console");
    e.printStackTrace();
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:48:11.607

您可以使用上面指定的方法，而不是 return`void`返回连接：

```
public class PgConnect {
    //changing the method declaration to return a Connection
    public Connection connect() {
        Connection connection = null;
        try {
            connection = DriverManager.getConnection("jdbc:postgresql://pgserver:5432/db", "test","test123");
        } catch (SQLException e) {
            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return null;
        }
        if (connection != null) {
            System.out.println("Connection working");
        } else {
            System.out.println("Failed to make connection!");
        }
        return connection;
    }
}

public class ReturnResults {

    public static void main(String[] args) {
        Connection connection = null;
        PgConnect oPgConnect;
        try {
        //this is where you call your method object...
        oPgConnect = new PgConnect();
        //once created, you call the method to get the connection...
        connection = oPgConnect.connect();
        //after get the connection, keep with the method logic...
        if (connection != null) {
            //your logic code...
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T17:50:04.540

据我了解，您想从into调用该`connect()`方法，以便您可以使用该对象。`PgConnect.java``ReturnResults.java``Connection`

你可以做两件事——

1.  您可以扩展`PgConnect.java`in `ReturnResults.java`like`public class ReturnResults extends PgConnect`然后使用该`connect`方法。
2.  您可以使您的`PgConnect`班级静态并像`PgConnect.connect()`在`ReturnResults`班级中一样使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:26:14.867

你是说要拉出一个连接到它自己的函数中，这样每次需要进行sql调用时都可以调用它？如果我不在基地，这似乎就是你要问的对不起......

但是，如果这是您要问的，那么您就在正确的轨道上，因为这是要做的标准事情...

你为什么不试试这个，我试图不仅给你一个答案，而且给你一些最佳实践，让你开始，让你的生活更轻松。....（我假设 PGConnect.java 位于同一个包中，如果没有相应地解析您的地址。SO 上的许多其他帖子都会描述这一点。它是 java/大多数编程语言中的基本内容。）更新您的第一个文件看起来像这样，请注意我正在使函数获取静态连接，并且我正在将异常传递给调用方法，这样我们就可以逐个处理这些异常。我什至更喜欢将它们完全从数据层传递出去，这样您就可以在应用程序中获得良好的错误报告，但这在很大程度上取决于您设计该应用程序的方式。

```
package DatabaseCodePackage; //name you package something descriptive, its your call place both files into this package.

import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.SQLException;

public class PgConnect {

    public static Connection getConnection(String username, String password) throws SQLException
    {
        return DriverManager.getConnection("jdbc:postgresql://pgserver:5432/db", username, password);
    } 
```

将第二个文件更新为这样的内容...。如果您使用任何动态搜索值，那么直接在 JDBC 中输入 SQL 是非常令人沮丧的，我假设您最终会这样做，因为几乎每个应用程序都会在某个地方这样做。请参阅[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)使用准备好的语句。我重写了您的 SQL 以使用准备好的语句。

```
package DatabaseCodePackage; //name you package something descriptive, its your call place both files into this package. 

import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class ReturnResults {

public static void main(String[] args) {

     Stirng result = null; 
     try{
         result = selectAllWithEnv("TEST");

      // I catch exceptions here because i like to let exception pass entirely out of the
      // data layer, this way the control logic calling for the database information can decide what to do when it 
      // cant get the information it wants. This is especailly good in a MVC type project. 
    } catch (NullPointerException npe){
        result = "Connection Failed! Check output console : " + e.getMessage();
        e.printStackTrace();
        return;
    } catch (SQLException e) {
        result = "SQL failure! Check output console : " + e.getMessage();
        e.printStackTrace();
        return;
    } finally { 
        System.out.println(result); 
    }
}

public static String selectAllWithEnv(String var) throws SQLException, NullPointerException {
    String SQL = "select * from mwp.servers where env=? order by server";
    Connection connection = null;
    StringBuilder sb = new StringBuiler();
    try {
        connection = PgConnect.getConnection();
        PreparedStatement ps = connection.prepareStatement(SQL);
        ps.setObject(1, var);
        ResuletSet rs = ps.executeQuery();

        while (rs.next()) {

            String iEnv     = rs.getString("env");
            String iServer  = rs.getString("iserver");
            String iLabel   = rs.getString("label");
            String iTitle   = rs.getString("title");
            String iLogin   = rs.getString("login");

            sb.append(iEnv + "\t" + iServer + "\t" + iLabel + "\t" + iTitle + "\t" + iLogin + "\n");
         }
    } finally {
        connection.close();
    }
    return sb.toString();
} 
```

另请注意，我将 放在`con.close()`finally 块中。总是总是这样做。如果您最终在 try 块中抛出异常，这将确保它被调用。如果你不这样做，你的连接会保持很长时间，这会对性能产生非常负面的影响。如果您在企业环境中工作，并且您不这样做，那么您可能会在某些时候遇到 DBA 的问题，因为您不会终止您的应用程序连接。如果您不在同一个连接上使用多个语句，则它是多余的，因此在调用时没有理由调用`stmt.close()`它`con.close()``con.close()`

# makefile - 具有两个同名目标的 Makefile

> ID：11125057
> 
> 赞同：3
> 
> 时间：2012-06-20T17:35:39.567
> 
> 标签：makefile

我有一个包含包含语句的生成文件。我无法控制包含的 makefile 的内容。不过，我希望能够在“一些”（不是全部）目标之前添加一些预处理步骤。考虑以下示例：

```
install:
      @echo "install target"

include othermakefile.mk 
```

*othermakefile.mk 也*包含*安装*目标。如果我运行此脚本，make 会发出警告并忽略第一个*安装*目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:47:23.237

没有比这更容易的了：

```
install: pre_install

.PHONY: pre_install
pre_install:
    do preinstallation things

include othermakefile.mk 
```

**编辑：**
如果您想在*preqs 或其任何 preqs*`pre_install`之前运行，这是一种方法。它既粗糙又丑陋，但它可以完成工作：`install`

 *```
install: pre_install
    $(MAKE) -f othermakefile.mk $@

.PHONY: pre_install
pre_install:
    do preinstallation things 
```

请注意，这不一定会重建 的所有先决条件`install`，因此其中一些可能会保持旧状态并且不会反映 的效果`pre_install`。如果这还不够好，并且您想要`pre_install`在*所有*其他先决条件之前，您可以添加一个选项标志：

```
install: pre_install
    $(MAKE) --always-make -f othermakefile.mk $@ 
```

现在 Make 将假定所有目标都已过时，并从头开始重建（之后`pre_install`）。*

# jquery - 根据悬停在一组相应的链接上交换不同的 Divs

> ID：11125059
> 
> 赞同：0
> 
> 时间：2012-06-20T17:35:41.677
> 
> 标签：jquery

首先让我说我意识到从可访问性的角度来看这不是最好的主意，但功能不是我来决定的:)

我希望一次有一个可见的“内容框”（总共三个） - 当前显示哪个框将取决于悬停在哪个相应链接上（并且框一将显示在页面加载之前任何悬停动作）。

如果我们想象我有以下 HTML：

```
<ul>
    <li id="link-one">Link One</li>
    <li id="link-two">Link Two</li>
    <li id="link-three">Link Three</li>
</ul>

<div id="box-one">Content for box one.</div>
<div id="box-two">Content for box two.</div>
<div id="box-three">Content for box three.</div> 
```

我希望 #box-one 默认显示。然后，如果将 #link-2 或 #link-three 悬停在上方，则 #box-2 或 #box-3 将相应显示。

如果在传输过程中有一个淡入淡出的动画，那就太好了。

这是我正在处理的思路——我意识到这不是有效的 jQuery 语法，但如果有人能帮我把它变成真实的东西，我将不胜感激！

```
if ($(#link-one).mouseenter(function() {
    $(#box-one).show();
    $(#box-two).hide();
    $(#box-three).hide();
});)

if ($(#link-two).mouseenter(function() {
    $(#box-two).show();
    $(#box-one).hide();
    $(#box-three).hide();
});)

if ($(#link-three).mouseenter(function() {
    $(#box-three).show();
    $(#box-one).hide();
    $(#box-two).hide();
});) 
```

自我批评：添加新的链接/框组合后，我的代码无法很好地扩展。这似乎非常低效，但我不确定如何实现这一目标。当要显示新框时，可能有更好的方法来实现淡入/淡出传输。任何想法都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:38:29.080

将 div id 或类放在锚点中

```
<a href="#" rel="divName">...</a> 
```

将单击处理程序或悬停或鼠标输入（无论您喜欢什么）绑定到锚点，如果需要，添加一个类，然后抓住该 divName 来显示它。隐藏所有内容并显示那个。你可以用 li 做同样的事情

就像是

```
$('.className').bind('mouseenter', function() {
    //grab the rel attribute
    var divName = $(this).attr('rel');
    // hide all boxes

    // show the right box
    $('#' + divName).show();
}); 
```

为了隐藏，我会将您的框分组在一个 div 中，以便您可以更好地定位它

# android - 如何向活动添加背景图像并将其与右下角对齐？

> ID：11125060
> 
> 赞同：0
> 
> 时间：2012-06-20T17:35:44.550
> 
> 标签：android, android-layout

我有一个活动，我暂时称它为 mainactivity。我想知道如何给它加上背景。我知道如何通过添加来添加背景`android:background="@drawables/background"`

但我想将它对齐到右下角（重力）并保持它的原始比例，因为背景标签正在拉伸它

这就是我到目前为止所得到的。一个styles.xml 文件和线性布局上的背景标签设置为@style/Background

样式文件：

```
 <style name="Background">
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/background" 
        android:gravity="bottom|right"
/>
    </style> 
```

我要添加/更改什么（或我能做的任何其他事情）以使可绘制的“锁定”到右下角？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:39:17.883

您可以创建一个指定*源可绘制对象*和*重力的新**位图可*绘制对象，然后将该可绘制对象用作背景。

 **例如，创建一个名为的新*位图可绘制对象*`aligned_background.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="bottom|right"
    android:src="@drawable/background" /> 
```

然后将背景设置为`@drawable/aligned_background`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:10:02.413

大家好，对此有何看法。借助此页面上的第一个答案。我有一个适合我的文件。我有一个可绘制的位图 XML 文件。然后 main.xml 上的线性布局将其背景标记设置为“@drawable/aligned background”

正是我想要的文件（aligned_background）如下：现在很好！我得到了它。这是我最后的可绘制位图，对我很有用！

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="bottom|right"
    android:src="@drawable/background" 
    android:adjustViewBounds="true"
    android:scaleType="fitStart"/> 
```

谢谢！**

# php - 如何在发送它们之前在 php 中修改时事通讯中的 html 链接？

> ID：11125061
> 
> 赞同：0
> 
> 时间：2012-06-20T17:35:45.637
> 
> 标签：php, regex, hyperlink, html-email

我正在编写一个时事通讯应用程序，我需要使可能出现在客户时事通讯中的用户定义链接发生变化，以便检测到的链接像

```
<a href="http://whateverclientsite.com/">blah</a> 
```

变成

```
<a href="http://mysite.com/redirect.php?utm_source=Emails&utm_medium=MyNewsletterSubject&utm_campaign=MyNewsletterCampaign&eid=123123&mailid=234234&url=http://whateverclientsite.com/>blah</a> 
```

我的redirect.php 将是一个带有一些谷歌分析代码的页面，该代码将触发（因此我可以跟踪新闻通讯生成的链接点击次数），然后将自身重定向到用户定义的url [http://whateverclientsite.com](http://whateverclientsite.com)。

我必须在 php 中而不是在客户端 javascript 中重写此链接，因为必须在发送时事通讯之前完成更改。

我在这里寻找的是进行 url 重写的代码，我已经在使用的谷歌东西。应该是一个相当简单的正则表达式操作，但我的正则表达式技能很烂。

如果我在任何答案出现之前让它工作，我会回帖。

PS：我还需要清除某些 url 和图像标签，以免它们被重写。例如，不应重写任何指向 mysite.com 的链接。

PS 整个时事通讯在我必须处理它时以 php 字符串的形式存在。我
`$newsletter = rewriteurls($newsletter, $url_exceptions_array);`
正在考虑的函数调用也是如此 - 所以我的问题是，我应该如何定义 rewriteurls()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:18:01.413

URL 形成规则非常复杂（[rfc](http://www.ietf.org/rfc/rfc3986.txt)）。而且html属性也很复杂。但是，如果您不介意在召回方面进行权衡，那么您可以：

```
$new_url = preg_replace(
    '@href=(?:\'|")?(?P<url>[\w?&=+/%#.:-]*)(?:\'|")?@i', 
    'href="redirect.php?u=$1"', # replace this with desired wrapper
    $your_feed); 
```

此功能在以下情况下失败：错误的方案（如`abbbc://this.is.invalid.url`）、错误的标签（`<link href=...`）、空格（`href =`），但您不太可能遇到这些情况。如果你这样做了，改进这个正则表达式来覆盖缺失的东西。

让我们看看这个正则表达式是由什么组成的（下面是不可用的）。

```
@ <-- delimiter
  href=(?:\'|")? <-- href=' or href=" or href=
  (?P<url> <-- capturing part
    [\w?&=+/%#.:-]* <-- a-zA-Z0-9_?/=+%#.:-& from zero to infinity times
  )
  (?:\'|")? <-- close href value
@i <-- delimiter, case insensetive modifier. HREF will work too 
```

# php - PHP simpleXML 范围

> ID：11125062
> 
> 赞同：1
> 
> 时间：2012-06-20T17:35:53.227
> 
> 标签：php, xml, arrays, parsing, xml-parsing

这是我第一次使用 XML 文档。我想要做的是从 spotify 搜索中提取一些信息。例如此页面：[Spotify 结果](http://ws.spotify.com/lookup/1/?uri=spotify%3aalbum:77Tgq2oSMvgP4Y9pBVKRJa&extras=trackdetail)

我对范围界定不是那么好，到目前为止我所知道的一切都来自教程。

我希望最终结果看起来像这样：

```
(Album Name) - (Artist Name) (year)

(track number) - (Track Name) - (length)
(track number) - (Track Name) - (length)
(track number) - (Track Name) - (length)
... 
```

这是我到目前为止的代码。

```
<?php
 function print_r2($val){
        echo '<pre>';
        print_r($val);
        echo  '</pre>';
}

$URL = "http://ws.spotify.com/lookup/1/?uri=spotify:album:77Tgq2oSMvgP4Y9pBVKRJa&extras=trackdetail";

$xml = simplexml_load_file($URL) 
   or die("Error: Cannot create object");

//print_r2($xml);

foreach($xml->children() as $album){
    echo($album->name);
    echo($album->artist->name);
    echo($album->released);

    foreach($album->children() as $track => $data){
      echo $data->{'track-number'};
      echo("  -  ");
      echo $data->name;
      echo("  -  ");
      echo $data->length;
      echo "<br />";
    }
}

?> 
```

我遇到的问题是没有显示艺术家姓名和年份，而且它还添加了更多的“-”，然后就需要了。（猜测它与 children() 有关，但不输出任何数据。）

另外，我正在考虑将这些信息保存到一个数组中，然后将这些数据处理到一个 SQL 数据库中。如果您知道使用数组编写它的更好方法，那就太棒了。（一举两得）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:52:34.880

根节点是“专辑”。`$root->children()`当您应该将根节点视为专辑对象时，您正在引用。

```
$url = "http://ws.spotify.com/lookup/1/?uri=spotify:album:77Tgq2oSMvgP4Y9pBVKRJa&extras=trackdetail";

$album = simplexml_load_file($url)
    or die("Error: Cannot create object");

echo("name: " . $album->name . "\n");
echo("artist: " . $album->artist->name . "\n");
echo("released: " . $album->released . "\n");
echo "Tracks:\n" ;
foreach($album->tracks->children() as $track){
    echo "  " . $track->{'track-number'} .
        "  -  " .
            $track->name .
            "  -  " .
            $track->length .
            "<br />\n";
} 
```

输出：

```
name: Be Lifted High
artist: Bethel Live
released: 2011
Tracks:
1  -  You Are Good (feat. Brian Johnson)  -  265.520000<br />
2  -  One Thing Remains (feat. Brian Johnson)  -  300.973000<br />
3  -  Furious (feat. Jeremy Riddle)  -  316.440000<br />
4  -  Be Lifted High (feat. Brian Johnson)  -  414.493000<br />
5  -  God I Look To You (feat. Jenn Johnson)  -  452.520000<br />
6  -  I Will Exalt (feat. Amanda Falk)  -  404.880000<br />
7  -  What Would I Have Done (feat. Brian Johnson and Jenn Johnson)  -  373.160000<br />
8  -  Hope's Anthem (feat. William Matthews)  -  345.160000<br />
9  -  Love Came Down (feat. Brian Johnson)  -  306.880000<br />
10  -  Deep Cries Out (feat. William Matthews)  -  314.480000<br />
11  -  God Of The Redeemed (feat. Jeremy Riddle)  -  368.426000<br />
12  -  Forever And A Day (feat. Jenn Johnson)  -  425.466000<br />
13  -  One Thirst (feat. Jeremy Riddle and Steffany Frizzell)  -  425.493000<br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:54:08.720

一种将 XML 解析为可用数组的超级简单方法如下：

```
<?php 
$xml = file_get_contents('http://ws.spotify.com/lookup/1/?uri=spotify:album:77Tgq2oSMvgP4Y9pBVKRJa&extras=trackdetail');

//Type cast XML into Array
$a = json_decode(json_encode((array) simplexml_load_string($xml)),1);

//See the full array
//print_r($a);

echo $a['name'].' - '.$a['artist']['name'].' - '.$a['released'].'<br />'.PHP_EOL;

foreach($a['tracks']['track'] as $track){
    echo $track['track-number'].' - '.$track['name'].' - '.secondsToTime($track['length']).'<br />'.PHP_EOL;
}

/*
Be Lifted High - Bethel Live - 2011<br />
1 - You Are Good (feat. Brian Johnson) - 4m25s<br />
2 - One Thing Remains (feat. Brian Johnson) - 5m0s<br />
3 - Furious (feat. Jeremy Riddle) - 5m16s<br />
4 - Be Lifted High (feat. Brian Johnson) - 6m54s<br />
5 - God I Look To You (feat. Jenn Johnson) - 7m32s<br />
6 - I Will Exalt (feat. Amanda Falk) - 6m44s<br />
7 - What Would I Have Done (feat. Brian Johnson and Jenn Johnson) - 6m13s<br />
8 - Hope's Anthem (feat. William Matthews) - 5m45s<br />
9 - Love Came Down (feat. Brian Johnson) - 5m6s<br />
10 - Deep Cries Out (feat. William Matthews) - 5m14s<br />
11 - God Of The Redeemed (feat. Jeremy Riddle) - 6m8s<br />
12 - Forever And A Day (feat. Jenn Johnson) - 7m5s<br />
13 - One Thirst (feat. Jeremy Riddle and Steffany Frizzell) - 7m5s<br />
*/

function secondsToTime($seconds){
     // minutes
    $divisor_for_minutes = $seconds % (60 * 60);
    $minutes = floor($divisor_for_minutes / 60);

    // seconds
    $divisor_for_seconds = $divisor_for_minutes % 60;
    $seconds = ceil($divisor_for_seconds);

    // return the final song len string
    return $minutes."m".$seconds."s";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:57:21.057

这样的事情可能对你有用：

```
<?php
$url = "http://ws.spotify.com/lookup/1/?uri=spotify:album:77Tgq2oSMvgP4Y9pBVKRJa&extras=trackdetail";
$xml = new SimpleXMLElement(file_get_contents($url));

$album = array(
    'name' => (string) $xml->name,
    'artist' => (string) $xml->artist->name,
    'released' => (string) $xml->released,
    'tracks' => array()
);

foreach ($xml->tracks->track as $track) {
    $album['tracks'][] = array(
        'number' => (string) $track->{'track-number'},
        'name' => (string) $track->name,
        'length' => (string) $track->length
    );
}

print_r($album); 
```

# spring - 405 Method Not Allowed：不支持请求方法“GET”

> ID：11125071
> 
> 赞同：0
> 
> 时间：2012-06-20T17:36:47.070
> 
> 标签：spring, google-app-engine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:37:25.267

您在 createUploadURL 中指定的 URL 将在上传完成后发送到 - 您确定此 URL 具有 POST 处理程序吗？

# windows - Windows 上的 Oracle 连接问题

> ID：11125072
> 
> 赞同：1
> 
> 时间：2012-06-20T17:36:51.703
> 
> 标签：windows, oracle, connection

我在 Windows Vista PC 上安装了 Oracle 11g RDBMS 和 11g Forms and Reports。

没有设置环境变量`ORACLE_SID`，`ORACLE_HOME`或`TNS_ADMIN`

注册表设置`HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\`：

```
#Database
ORACLE_HOME = E:\app\Tams\product\11.1.0\db_1
ORACLE_SID = orcl
#Forms and Reports
ORACLE_HOME = C:\bimwh\Oracle_FRHome1
TNS_ADMIN = E:\app\Tams\product\11.1.0\db_1\NETWORK\ADMIN

#tnsnames.ora
tams=
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = Tams-PC)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )

#sqlnet.ora
SQLNET.AUTHENTICATION_SERVICES= (NTS)
NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)

#listener.ora
LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = Tams-PC)(PORT = 1521))
    )
  )

#tnsping
C:\>tnsping tams

Used parameter files:
E:\app\Tams\product\11.1.0\db_1\NETWORK\ADMIN\sqlnet.ora

Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = Tams-PC)
(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = orcl)))
OK (0 msec)

#sqlplus
C:\>sqlplus user/pass@tams  - HANGS.
C:\>sqlplus user/pass@orcl  - ORA-12154.
C:\>sqlplus user/pass       - CONNECTS.

#Forms and Reports Builder
user/pass/tams - ORA-12154 on Reports - HANGS on Forms.
user/pass/orcl - ORA-12154 on both.
user/pass      - CONNECTS.

#Forms Runtime
ORA-12560 TNS protocol adapter error 
```

谢谢你尽你所能的帮助。塔姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:50:46.447

看起来侦听器似乎没有在侦听任何数据库。listener.ora 中唯一的条目是监听器定义本身。通常还有一个侦听器正在侦听的数据库列表。网络管理器可用于配置侦听器以侦听本地数据库。一旦 listener.ora 正在侦听数据库，connect user/pass@net-service-name 应该可以工作。

# jquery - 在 Jqgrid EDIT 表单上显示成功消息

> ID：11125073
> 
> 赞同：2
> 
> 时间：2012-06-20T17:37:00.310
> 
> 标签：jquery, asp.net-mvc-3, model-view-controller, jqgrid

**编辑 PRMS**

```
edit: { 

addCaption: "Add CDM",
bSubmit: "Submit",
bCancel: "Cancel",  
bClose: "Close",
saveData: "Data has been changed! Save changes?",
bYes: "Yes",
bNo: "No",
bExit: "Cancel",

//serializeEditData: serailize,  
//editData: {new_CDM_ID: function() { return $('#cdmID').val();} },  
closeOnEscape: true,  
recreateForm: true,  
width: '450',  
afterSubmit: function (response, postdata) {  
var result = jQuery.parseJSON(response.responseText);  
return [result.success, result.message, result.id];
//return [success, message, new_id]  

} 
```

**问题**

我能够在**afterSubmit**事件中捕获错误消息，并且还能够在 jqgrid 的编辑表单上显示它。但是成功消息也没有发生。我能够捕获它，但无法在 jqgrid 的编辑表单上显示。我是否应该使用不同的事件来显示成功消息。

我的要求是：

1.  以红色显示错误消息（工作）
2.  以绿色显示成功消息（不工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:40:03.067

方法“afterSubmit”的[文档说：](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events) *“（如果成功为真，则忽略消息）。”*

你应该使用黑客。将此代码放在您的 afterSubmit 方法中。：

```
if(response.status == 200){ 
      $(".topinfo").html("info message"); 
      var tinfoel = $(".tinfo").show();
      tinfoel.delay(3000).fadeOut();
      return [true,''];
} else {
      return [false,'error message'];
} 
```

这适用于 jqGrid 4.4.1 的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T10:40:14.273

只是从@Gab 中汲取灵感，这是我的最终代码，效果很好。closeAfterEdit 如果设置为真，上述解决方案不显示味精，所以我创建了新对话框。

```
function(response) { if(response.status == 200)                                                                             
{ 
        jQuery.jgrid.info_dialog("Info","<div class=\"ui-state-highlight\" style=\"padding:5px;\">Record updated!</div>", 
                                    jQuery.jgrid.edit.bClose,{buttonalign:"right"});

        jQuery("#info_dialog").delay(3000).fadeOut();

        return [true,""];
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-20T12:53:52.330

您可以使用以下代码：

```
 afterSubmit: function (response, postdata) {
            var myInfo = '<div class="ui-state-highlight ui-corner-all">'+
                         '<span class="ui-icon ui-icon-info" ' +
                             'style="float: left; margin-right: .3em;"></span>' +
                         "Done Successfully!!!"
                         '</div>',
                $infoTr = $("#TblGrid_" + $.jgrid.jqID(this.id) + ">tbody>tr.tinfo"),
                $infoTd = $infoTr.children("td.topinfo");
                $infoTd.html(myInfo);
                $infoTr.show();
               setTimeout(function () {
                    $infoTd.children("div")
                        .fadeOut("slow", function () {
                            // Animation complete.
                              $infoTr.hide();
                        });
                }, 3000);
           // failcount = 0;
          //  totalcount = 0;
            return [true, "", ""]; // response should be interpreted as successful
        }, 
```

# python - python：使用动态命名在项目中导入模块

> ID：11125074
> 
> 赞同：0
> 
> 时间：2012-06-20T17:37:02.853
> 
> 标签：python

我的项目布局如下：

```
run.py
jobs/
   job1.py
   job2.py 
```

`job1.py`非常基本：

```
class job1():

    def __init__(self):
        print 'yo' 
```

在 run.py 中，我有：

```
name = 'job1'
classname = 'jobs.%s' % name
__import__(classname) 
```

这显然不起作用：

```
Traceback (most recent call last):
  File "run.py", line 5, in <module>
    __import__(classname)
ImportError: No module named jobs.job1 
```

以这种方式导入模块的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:39:49.027

first of all create a `__init__.py` file inside jobs folder, to make this `jobs.jobs1` thing work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:40:22.333

Add this to your `__init__.py` in `jobs` directory

```
import os
jobs = {}
for module in (name for name in os.listdir(".") if name.endswith(".py")):
    jobs[module] = __import__(module) 
```

Then just use it like this

```
from jobs import jobs 
```

# sql - 用减法组合两个 SQL 语句

> ID：11125076
> 
> 赞同：2
> 
> 时间：2012-06-20T17:37:10.590
> 
> 标签：sql, vba

我有两个要合并的 sql 语句。我确信这可以使用某种连接命令来完成，但我不太擅长使用它们，所以我希望有人能从这里提供帮助。

我想从：

```
SELECT DISTINCT CLOCFILEOT.CKEVNHM2.EVLEV1 AS WOSFROM 
FROM 
  CLOCFILEOT.CKEVNHM2, 
  (
    SELECT DISTINCT CONCAT('0',CPJDDTA81.F4801.WADOCO) AS WOS 
    FROM 
      CPJDDTA81.F4801,
      CPJDDTA81.F4102 
    WHERE 
          CPJDDTA81.F4102 .IBITM = CPJDDTA81.F4801.WAITM 
      AND CPJDDTA81.F4801.WASRST IN( '30', '45' ) 
      AND CPJDDTA81.F4102.IBSRP4 IN( 'ECT' )
      AND CPJDDTA81.F4801.WAMMCU = '      ECT001'
  ) SELECTEDWOS 
WHERE 
      CLOCFILEOT.CKEVNHM2.EVLEV1 = WOS 
  AND CLOCFILEOT.CKEVNHM2.EVLAB1 = 'E500' 
```

并从该列表中减去以下内容：

```
SELECT DISTINCT CLOCFILEOT.CKEVNHM2.EVLEV1 AS WOSTOSUBTRACT 
FROM 
  CLOCFILEOT.CKEVNHM2, 
  (
    SELECT DISTINCT CONCAT('0',CPJDDTA81.F4801.WADOCO) AS WOS 
    FROM 
      CPJDDTA81.F4801, 
      CPJDDTA81.F4102 
    WHERE 
          CPJDDTA81.F4102.IBITM = CPJDDTA81.F4801.WAITM 
      AND CPJDDTA81.F4801.WASRST IN( '30', '45' ) 
      AND CPJDDTA81.F4102.IBSRP4 IN( 'CAB' )
      AND CPJDDTA81.F4801.WAMMCU = '      STH001'
  ) SELECTEDWOS 
WHERE 
  CLOCFILEOT.CKEVNHM2.EVLEV1 = WOS 
```

我在 adodb vba 中这样做，它有时会限制使用的 sql 命令的类型。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:46:23.100

您可以处理此问题的一种方法是使用[EXCEPT](http://msdn.microsoft.com/en-us/library/ms188055.aspx)

如果这不是一个选项，您也可以尝试使用`NOT IN`：

```
SELECT DISTINCT EVLEV1 AS WOSFROM 
FROM CLOCFILEOT.CKEVNHM2
   , 
   (
      SELECT DISTINCT CONCAT('0', WADOCO) AS WOS 
      FROM CPJDDTA81.F4801
         , CPJDDTA81.F4102 
      WHERE IBITM = WAITM 
         AND WASRST IN( '30', '45' ) 
         AND IBSRP4 IN( 'ECT' )
         AND WAMMCU = '      ECT001'
   ) AS SELECTEDWOS 
WHERE EVLEV1 = WOS 
   AND EVLAB1 = 'E500'
   AND EVLEV1 NOT IN
   (
      SubQuery Here
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:47:28.873

在第一个查询中...我不确定您为什么要进行交叉联接并与其中一个表不同。您可以完全消除第二个表。如果您想要更好的答案.. 您必须让我们知道这些列来自哪个表。

您可以左加入并查找空值

```
select <col a>
from <table A> 
left join <table B>
  on <col a> = <col b>
where <col b> is not null 
```

或做..

```
select <col a>
from <table A>
where <col a> not in (
    select <col b>
    from <table B>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:50:16.887

结合你们的帮助和改变周围的事情，我为任何关心的人提供了一个解决方案：

```
SELECT WOSTO, AREATO, WOSFROM, STATIONFROM
FROM
(
   SELECT DISTINCT CONCAT('0', WADOCO) AS WOSTO, IBSRP4 AS AREATO
      , WOSFROM AS WOSFROM, PWOSFROM AS PWOSFROM, STATIONFROM AS STATIONFROM
   FROM CPJDDTA81.F4801
      , CPJDDTA81.F4102
      ,
      (
         SELECT DISTINCT EVLEV1 AS WOSFROM, EVLAB2 AS PWOSFROM
            , EVLAB1 AS STATIONFROM
         FROM CLOCFILEOT.CKEVNHM2
            ,
            (
               SELECT DISTINCT CONCAT('0', WADOCO) AS WOS
               FROM CPJDDTA81.F4801, CPJDDTA81.F4102
               WHERE IBITM = WAITM
                  AND WASRST IN( '30', '45' )
                  AND IBSRP4 IN( 'ECT' )
                  AND WAMMCU = '      ECT001'
            ) AS SELECTEDWOS
            WHERE EVLEV1 = WOS
               AND EVLAB1 = 'E500'
      ) AS ORIGINALWOS
      WHERE IBITM = WAITM
         AND WAPARS = PWOSFROM
         AND IBSRP4 = 'CAB'
         AND WAMMCU = '      STH001'
) AS SELECTEDWOS
LEFT JOIN CLOCFILEOT.CKEVNHM2 ON SELECTEDWOS.WOSTO = CLOCFILEOT.CKEVNHM2.EVLEV1
WHERE CLOCFILEOT.CKEVNHM2.EVLEV1 IS NULL 
```

# angularjs - Angular JS 指令是否有渲染后回调？

> ID：11125078
> 
> 赞同：139
> 
> 时间：2012-06-20T17:37:27.920
> 
> 标签：angularjs

我刚刚得到我的指令来拉入一个模板以附加到它的元素，如下所示：

```
# CoffeeScript
.directive 'dashboardTable', ->
  controller: lineItemIndexCtrl
  templateUrl: "<%= asset_path('angular/templates/line_items/dashboard_rows.html') %>"
  (scope, element, attrs) ->
    element.parent('table#line_items').dataTable()
    console.log 'Just to make sure this is run'

# HTML
<table id="line_items">
    <tbody dashboard-table>
    </tbody>
</table> 
```

我还使用了一个名为 DataTables 的 jQuery 插件。它的一般用法是这样的：$('table#some_id').dataTable()。您可以将 JSON 数据传递到 dataTable() 调用中以提供表数据，或者您可以将数据已经在页面上，它会完成剩下的工作。我正在做后者，在 HTML 页面上已经有了行.

但问题是我必须在 DOM 准备好之后调用 table#line_items 上的 dataTable() 。我上面的指令在模板附加到指令的元素之前调用 dataTable() 方法。有没有办法可以在追加后调用函数？

谢谢您的帮助！

安迪回答后更新1：

我想确保链接方法只在页面上的所有内容之后才被调用，因此我更改了指令以进行一些测试：

```
# CoffeeScript
#angular.module(...)
.directive 'dashboardTable', ->
    {
      link: (scope,element,attrs) -> 
        console.log 'Just to make sure this gets run'
        element.find('#sayboo').html('boo')

      controller: lineItemIndexCtrl
      template: "<div id='sayboo'></div>"

    } 
```

我确实在 div#sayboo 中看到了“嘘”。

然后我尝试我的 jquery 数据表调用

```
.directive 'dashboardTable',  ->
    {
      link: (scope,element,attrs) -> 
        console.log 'Just to make sure this gets run'
        element.parent('table').dataTable() # NEW LINE

      controller: lineItemIndexCtrl
      templateUrl: "<%= asset_path('angular/templates/line_items/dashboard_rows.html') %>"
    } 
```

那里没有运气

然后我尝试添加超时：

```
.directive 'dashboardTable', ($timeout) ->
    {
      link: (scope,element,attrs) -> 
        console.log 'Just to make sure this gets run'
        $timeout -> # NEW LINE
          element.parent('table').dataTable()
        ,5000
      controller: lineItemIndexCtrl
      templateUrl: "<%= asset_path('angular/templates/line_items/dashboard_rows.html') %>"
    } 
```

那行得通。所以我想知道代码的非计时器版本出了什么问题？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2014-03-20T17:43:39.280

如果没有提供第二个参数“delay”，则默认行为是在 DOM 完成渲染后执行该函数。因此，不要使用 setTimeout，而是使用 $timeout：

```
$timeout(function () {
    //DOM has finished rendering
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-28T14:16:46.950

我有同样的问题，我相信答案是否定的。请参阅[Miško 的评论](https://github.com/angular/angular.js/issues/1306#issuecomment-8200414)和小组中的一些[讨论](https://groups.google.com/forum/?fromgroups=#!topic/angular/SCc45uVhTt8)。

Angular 可以跟踪它为操作 DOM 所做的所有函数调用是否已完成，但由于这些函数可能会触发异步逻辑，这些逻辑在它们返回后仍在更新 DOM，因此不能期望 Angular 知道它。Angular 提供的任何回调有时*可能会*起作用，但依赖它并不安全。

正如您所做的那样，我们使用 setTimeout 启发式地解决了这个问题。

*（请记住，不是每个人都同意我的观点——你应该阅读上面链接上的评论，看看你的想法。）*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-20T18:58:21.130

您可以使用“链接”功能，也称为 postLink，它在模板放入后运行。

```
app.directive('myDirective', function() {
  return {
    link: function(scope, elm, attrs) { /*I run after template is put in */ },
    template: '<b>Hello</b>'
  }
}); 
```

如果您打算制定指令，请阅读此书，这是一个很大的帮助：[http ://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-01T11:30:05.873

虽然我的回答与数据表无关，但它解决了 DOM 操作的问题，例如 jQuery 插件初始化，用于在以异步方式更新其内容的元素上使用的指令。

与其实现超时，不如添加一个监听内容更改（甚至是额外的外部触发器）的手表。

在我的例子中，一旦 ng-repeat 完成创建了我的内部 DOM，我就使用这个解决方法来初始化一个 jQuery 插件——在另一种情况下，我用它来只是在控制器改变范围属性后操作 DOM。这是我做的...

HTML：

```
<div my-directive my-directive-watch="!!myContent">{{myContent}}</div> 
```

JS：

```
app.directive('myDirective', [ function(){
    return {
        restrict : 'A',
        scope : {
            myDirectiveWatch : '='
        },
        compile : function(){
            return {
                post : function(scope, element, attributes){

                    scope.$watch('myDirectiveWatch', function(newVal, oldVal){
                        if (newVal !== oldVal) {
                            // Do stuff ...
                        }
                    });

                }
            }
        }
    }
}]); 
```

**注意：**除了将 myContent 变量转换为 my-directive-watch 属性的 bool 之外，还可以想象那里的任意表达式。

**注意：**像上面示例中那样隔离范围只能对每个元素执行一次 - 尝试在同一元素上使用多个指令执行此操作将导致 $compile:multidir 错误 - 请参阅：[https ://docs.angularjs.org /error/$compile/multidir](https://docs.angularjs.org/error/%24compile/multidir)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-21T08:50:28.380

回答这个问题可能为时已晚。但是仍然有人可能会从我的回答中受益。

我有类似的问题，就我而言，我无法更改指令，因为它是一个库，更改库的代码不是一个好习惯。所以我所做的是使用一个变量来等待页面加载，并在我的 html 中使用 ng-if 来等待渲染特定元素。

在我的控制器中：

```
$scope.render=false;

//this will fire after load the the page

angular.element(document).ready(function() {
    $scope.render=true;
}); 
```

在我的 html 中（在我的情况下，html 组件是一个画布）

```
<canvas ng-if="render"> </canvas> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-30T19:57:47.310

我有同样的问题，但使用 Angular + DataTable 和`fnDrawCallback`+[行分组](http://www.datatables.net/examples/advanced_init/row_grouping.html)+ $compiled 嵌套指令。我在我的`fnDrawCallback`函数中放置了 $timeout 来修复分页渲染。

在示例之前，基于 row_grouping 源：

```
var myDrawCallback = function myDrawCallbackFn(oSettings){
  var nTrs = $('table#result>tbody>tr');
  for(var i=0; i<nTrs.length; i++){
     //1\. group rows per row_grouping example
     //2\. $compile html templates to hook datatable into Angular lifecycle
  }
} 
```

示例后：

```
var myDrawCallback = function myDrawCallbackFn(oSettings){
  var nTrs = $('table#result>tbody>tr');
  $timeout(function requiredRenderTimeoutDelay(){
    for(var i=0; i<nTrs.length; i++){
       //1\. group rows per row_grouping example
       //2\. $compile html templates to hook datatable into Angular lifecycle
    }
  ,50); //end $timeout
} 
```

即使是短暂的超时延迟也足以让 Angular 渲染我编译的 Angular 指令。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-21T10:51:47.780

没有任何解决方案对我有用，因为我接受了超时。这是因为我使用的是在 postLink 期间动态创建的模板。

但是请注意，可能会有“0”超时，因为超时会将被调用的函数添加到浏览器的队列中，这将在角度渲染引擎之后发生，因为它已经在队列中。

参考这个：[http ://blog.brunoscopelliti.com/run-a-directive-after-the-dom-has-finished-rendering](http://blog.brunoscopelliti.com/run-a-directive-after-the-dom-has-finished-rendering)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-11T04:21:15.367

这是一个在浅渲染后对动作进行编程的指令。浅我的意思是它会在渲染那个元素之后进行评估，这与它的内容*何时被渲染无关。*因此，如果您需要一些子元素来执行后期渲染操作，您应该考虑在那里使用它：

```
define(['angular'], function (angular) {
  'use strict';
  return angular.module('app.common.after-render', [])
    .directive('afterRender', [ '$timeout', function($timeout) {
    var def = {
        restrict : 'A', 
        terminal : true,
        transclude : false,
        link : function(scope, element, attrs) {
            if (attrs) { scope.$eval(attrs.afterRender) }
            scope.$emit('onAfterRender')
        }
    };
    return def;
    }]);
}); 
```

那么你可以这样做：

`<div after-render></div>`

或任何有用的表达方式，如：

`<div after-render="$emit='onAfterThisConcreteThingRendered'"></div>`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-26T14:37:28.787

我使用以下指令进行了此操作：

```
app.directive('datatableSetup', function () {
    return { link: function (scope, elm, attrs) { elm.dataTable(); } }
}); 
```

在 HTML 中：

```
<table class="table table-hover dataTable dataTable-columnfilter " datatable-setup=""> 
```

**如果上述方法对您不起作用，则进行故障排除。**

1) 请注意，“datatableSetup”等同于“datatable-setup”。Angular 将格式更改为驼峰式。

2) 确保 app 在指令之前定义。例如简单的应用程序定义和指令。

```
var app = angular.module('app', []);
app.directive('datatableSetup', function () {
    return { link: function (scope, elm, attrs) { elm.dataTable(); } }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-26T07:14:28.487

由于无法预期加载顺序，因此可以使用简单的解决方案。

让我们看一下指令-“指令的用户”的关系。通常指令的用户会向指令提供一些数据或使用指令提供的一些功能（函数）。另一方面，该指令期望在其范围内定义一些变量。

如果我们能够确保所有玩家在尝试执行这些操作之前都满足了他们的所有操作要求 - 一切都应该很好。

现在的指令：

```
app.directive('aDirective', function () {
    return {
        scope: {
            input: '=',
            control: '='
        },
        link: function (scope, element) {
            function functionThatNeedsInput(){
                //use scope.input here
            }
            if ( scope.input){ //We already have input 
                functionThatNeedsInput();
            } else {
                scope.control.init = functionThatNeedsInput;
            }
          }

        };
}) 
```

现在是指令 html 的用户

```
<a-directive control="control" input="input"></a-directive> 
```

在使用该指令的组件的控制器中的某处：

```
$scope.control = {};
...
$scope.input = 'some data could be async';
if ( $scope.control.functionThatNeedsInput){
    $scope.control.functionThatNeedsInput();
} 
```

就是这样。有很多开销，但您可能会丢失 $timeout。我们还假设使用指令的组件在指令之前被实例化，因为我们依赖于在指令被实例化时存在的控制变量。

# c++ - 如何使用 SSE 或 GLSL 优化“u[0]*v[0] + u[2]*v[2]”代码行

> ID：11125083
> 
> 赞同：10
> 
> 时间：2012-06-20T17:37:50.030
> 
> 标签：c++, c, optimization, sse, glm-math

我有以下功能（来自开源项目[“重铸导航”](http://code.google.com/p/recastnavigation/)）：

```
/// Derives the dot product of two vectors on the xz-plane. (@p u . @p v)
///  @param[in]     u       A vector [(x, y, z)]
///  @param[in]     v       A vector [(x, y, z)]
/// @return The dot product on the xz-plane.
///
/// The vectors are projected onto the xz-plane, so the y-values are ignored.
inline float dtVdot2D(const float* u, const float* v)
{
    return u[0]*v[0] + u[2]*v[2];
} 
```

我通过 VS2010 CPU 性能测试运行它，它告诉我，在这个函数中的所有重铸代码库代码行中`u[0]*v[0] + u[2]*v[2]`CPU 最热。

我如何 CPU 优化（例如通过 SSE 或[GLM 之类的 GLSL（如果在这种情况下更容易或更快且合适）](http://glm.g-truc.net/index.html)）这条线？

编辑：调用出现的上下文：

```
bool dtClosestHeightPointTriangle(const float* p, const float* a, const float* b, const float* c, float& h) {
    float v0[3], v1[3], v2[3];
    dtVsub(v0, c,a);
    dtVsub(v1, b,a);
    dtVsub(v2, p,a);

    const float dot00 = dtVdot2D(v0, v0);
    const float dot01 = dtVdot2D(v0, v1);
    const float dot02 = dtVdot2D(v0, v2);
    const float dot11 = dtVdot2D(v1, v1);
    const float dot12 = dtVdot2D(v1, v2);

    // Compute barycentric coordinates
    const float invDenom = 1.0f / (dot00 * dot11 - dot01 * dot01);
    const float u = (dot11 * dot02 - dot01 * dot12) * invDenom;
    const float v = (dot00 * dot12 - dot01 * dot02) * invDenom; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-27T12:09:56.920

在纸上尝试了一些东西之后，我想出了一些*可能*对你有用的东西。它是 SSE 中函数的适当并行化/矢量化实现。

然而，它确实需要数据重组，因为我们将同时对 4 个三角形进行并行处理。

我将逐步分解它并在这里和那里使用指令名称，但请使用 C 内在函数（_mm_load_ps()、_mm_sub_ps() 等，它们在 VC 中的 xmmintrin.h 中）——当我谈到寄存器时只是意味着__m128。

步骤1。

我们根本不需要 Y 坐标，因此我们设置了指向 X 和 Z 对的指针。每次调用至少提供 4 对（即总共 4 个三角形）。**我将把每个 X 和 Z 对称为一个顶点。**

第2步。

使用 MOVAPS（要求指针对齐到 16 位）将每个指针指向的前两个顶点加载到寄存器中。

*从a*加载的寄存器如下所示： [ a0.x, a0.z, a1.x, a1.z ]

第 3 步。

现在，使用一条减法指令，您可以一次计算 2 个顶点的增量（您的*v0*、*v1*、*v2*）。

不仅要计算前 2 个三角形的*v0*、*v1*和*v2*，还要计算后 2 个三角形！正如我所说，您应该为每个输入提供总共 4 个顶点或 8 个浮点数。只需**对该数据重复步骤 2 和 3**。

现在我们有 2 对*vx*寄存器，每对包含 2 个三角形的结果。我将它们称为*vx_0*（第一对）和*vx_1*（第二对），其中*x*是从 0 到 2。

第4步。

点产品。为了并行化重心计算（稍后），我们需要 4 个三角形中每个三角形的每个点积的结果，在 1 个单个寄存器中。

因此，例如，在您计算*dot01*的地方，我们将做同样的事情，但一次计算 4 个三角形。每个*v* -register 包含 2 个向量的结果，因此我们首先将它们相乘。

假设*u*和*v* - 点积函数中的参数 - 现在是*v0_0*和*v1_0*（用于计算*dot01*）：

*将u*和*v*相乘得到： [ (v0_0.x0) * (v1_0.x0), (v0_0.z0) * (v1_0.z0), (v0_0.x1) * (v1_0.x1), (v0_0.z1) * (v1_0.z1)]

由于*.x0* / *.z0*和*.x1* / *.z1* ，这可能看起来令人困惑，但看看在第 2 步加载的内容：*a0*，*a1*。

如果现在这仍然感觉模糊，请拿起一张纸从头开始写。

接下来，仍然对于相同的点积，对*v0_1*和*v1_1*（**即第二对三角形**）进行乘法运算。

现在我们有 2 个寄存器，每个寄存器有 2 个 X 和 Z 对（总共 4 个顶点），相乘并准备加在一起形成 4 个单独的点积。SSE3 有一个指令可以做到这一点，它被称为 HADDPS：

xmm0 = [A、B、C、D] xmm1 = [E、F、G、H]

HADDPS xmm0, xmm1 这样做：

xmm0 = [A+B, C+D, E+F, G+H]

它将从我们的第一个寄存器和第二个寄存器中获取 X 和 Z 对，将它们加在一起并将它们存储在目标寄存器的第一个、第二个、第三个和第四个组件中。Ergo：此时我们已经为所有 4 个三角形得到了这个特殊的点积！

**现在对所有点积重复此过程：*dot00*等。**

第 5 步。

最后一个计算（据我所提供的代码所见）是重心的东西。这是代码中的 100% 标量计算。但是您现在的输入不是标量点积结果（即单个浮点数），它们是 SSE 向量/寄存器，4 个三角形中的每一个都有一个点积。

因此，如果您通过使用对所有 4 个浮点数进行操作的并行 SSE 操作将其平面化，您最终将得到 1 个寄存器（或结果）携带 4 个高度，每个三角形 1 个高度。

由于我的午休时间已经过去了，我不会把这个拼出来，但考虑到我给出的设置/想法，这是最后一步，应该不难弄清楚。

我知道这个想法有点牵强，需要从上面的代码中得到一些爱，也许还有一些用铅笔和纸的质量时间，但它会很快（如果你愿意，你甚至可以在之后添加 OpenMP ）。

祝你好运 ：）

（请原谅我的模糊解释，如果需要，我可以启动该功能=））

**更新**

我已经编写了一个实现，但它并没有像我预期的那样进行，主要是因为 Y 组件超出了您最初粘贴在问题中的代码段（我查了一下）。我在这里所做的不仅是要求您将所有点重新排列成 XZ 对并每 4 个输入它们，而且还输入 3 个指针（用于点 A、B 和 C）以及 4 个三角形中每个三角形的 Y 值。从当地的角度来看，这是最快的。我仍然可以对其进行修改，以减少被调用者端的侵入性更改，但请让我知道什么是可取的。

然后是免责声明：这段代码非常简单（我发现它在 SSE 方面与编译器一起工作得很好......他们可以根据需要重新组织，x86/x64 CPU 也参与其中）。还有命名，这不是我的风格，也不是任何人的风格，只要你认为合适就行。

希望它有所帮助，如果没有，我会很乐意再过一遍。如果这是一个商业项目，我猜也可以选择让我加入；）

无论如何，我已经把它放在了 pastebin 上：http: [//pastebin.com/20u8fMEb](http://pastebin.com/20u8fMEb)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T18:31:00.963

您可以使用 SSE 指令实现单点积，但结果不会比现在编写的代码快得多（甚至可能更慢）。您的重写可能会破坏有助于当前版本的编译器优化。

为了从使用 SSE 或 CUDA 重写中获得任何好处，您必须优化调用该点积的循环。对于 CUDA 来说尤其如此，因为执行一个点积的开销会很大。只有将数千个向量发送到 GPU 以计算数千个点积，才能看到加速。同样的想法也适用于 CPU 上的 SSE，但您可能会看到在较少数量的操作上有所改进。不过，它仍将不仅仅是*一个*点积。

最简单的尝试可能是`g++ -ftree-vectorize`. GCC 将能够内联您的小函数，然后尝试为您优化循环（实际上它可能已经是，但没有 SSE 指令）。树矢量化器将尝试自动执行您建议手动执行的操作。它并不总是成功的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T13:54:23.897

SSE 指令用于优化处理以整数或浮点数表示的大数据块的算法。典型的大小是需要以某种方式处理的数以百万计的数字。优化只处理四个（或二十个）标量的函数是没有意义的。您从 SSE 获得的收益可能会因函数调用开销而损失。一次函数调用处理的合理数字至少为千。通过使用 SSE 内在函数，您可能会获得巨大的性能提升。但很难根据您提供的信息为您提供适合您需求的具体建议。您应该编辑您的问题并提供更高级的问题视图（位于调用堆栈更深处的函数）。例如，每秒调用 dtClosestHeightPointTriangle 方法多少次并不明显？这个数字对于客观判断向 SSE 过渡是否具有实用价值至关重要。数据的组织也很重要。理想情况下，您的数据应存储在尽可能少的线性内存段中，以有效利用 CPU 的缓存子系统。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T13:29:54.963

您要求提供算法的 SSE 版本，所以它是：

```
// Copied and modified from xnamathvector.inl
XMFINLINE XMVECTOR XMVector2DotXZ
(
    FXMVECTOR V1, 
    FXMVECTOR V2
)
{
#if defined(_XM_NO_INTRINSICS_)

    XMVECTOR Result;

    Result.vector4_f32[0] =
    Result.vector4_f32[1] =
    Result.vector4_f32[2] =
    Result.vector4_f32[3] = V1.vector4_f32[0] * V2.vector4_f32[0] + V1.vector4_f32[2] * V2.vector4_f32[2];

    return Result;

#elif defined(_XM_SSE_INTRINSICS_)
    // Perform the dot product on x and z
    XMVECTOR vLengthSq = _mm_mul_ps(V1,V2);
    // vTemp has z splatted
    XMVECTOR vTemp = _mm_shuffle_ps(vLengthSq,vLengthSq,_MM_SHUFFLE(2,2,2,2));
    // x+z
    vLengthSq = _mm_add_ss(vLengthSq,vTemp);
    vLengthSq = _mm_shuffle_ps(vLengthSq,vLengthSq,_MM_SHUFFLE(0,0,0,0));
    return vLengthSq;
#else // _XM_VMX128_INTRINSICS_
#endif // _XM_VMX128_INTRINSICS_
}

bool dtClosestHeightPointTriangle(FXMVECTOR p, FXMVECTOR a, FXMVECTOR b, FXMVECTOR c, float& h)
{
    XMVECTOR v0 = XMVectorSubtract(c,a);
    XMVECTOR v1 = XMVectorSubtract(b,a);
    XMVECTOR v2 = XMVectorSubtract(p,a);

    XMVECTOR dot00 = XMVector2DotXZ(v0, v0);
    XMVECTOR dot01 = XMVector2DotXZ(v0, v1);
    XMVECTOR dot02 = XMVector2DotXZ(v0, v2);
    XMVECTOR dot11 = XMVector2DotXZ(v1, v1);
    XMVECTOR dot12 = XMVector2DotXZ(v1, v2);

    // Compute barycentric coordinates
    XMVECTOR invDenom = XMVectorDivide(XMVectorReplicate(1.0f), XMVectorSubtract(XMVectorMultiply(dot00, dot11), XMVectorMultiply(dot01, dot01)));

    XMVECTOR u = XMVectorMultiply(XMVectorSubtract(XMVectorMultiply(dot11, dot02), XMVectorMultiply(dot01, dot12)), invDenom);
    XMVECTOR v = XMVectorMultiply(XMVectorSubtract(XMVectorMultiply(dot00, dot12), XMVectorMultiply(dot01, dot02)), invDenom);
} 
```

XMVector2Dot 取自 xnamathvector.inl，我将其重命名并修改为在 X/Z 坐标上进行操作。

XNAMath 是微软的一个伟大的矢量化跨平台数学库；我也通过导入 sal.h 标头在 OS X 上使用它（我不确定那里的许可问题，所以要小心）。
事实上，任何支持内部 SSE 的平台*都应该*支持它。

有几点需要注意：

*   您需要使用 XMLoadFloat3 方法将浮点数加载到 XMVECTOR 中；这会将未对齐的 float3 加载到 __m128 结构中。
*   您可能不会看到此 SSE 代码（配置文件！！）的任何性能改进，因为将未对齐的浮点数加载到 SSE 寄存器中会降低性能。
*   这是算法到 SSE 的强力转换，如果你比我更聪明，并且实际尝试理解算法并实现 SSE 友好版本，你会获得更好的运气。
*   通过将整个应用程序转换为使用 XNA Math/SSE 代码而不是仅仅使用一小部分代码，您将获得更好的运气。至少强制使用对齐的向量类型（XMFLOAT3A 或 struct __declspec(align(16)) myvectortype { };）。
*   不鼓励直接 SSE 汇编，尤其是在 x64 中，有利于内在函数。

# sorting - jqGrid：按索引排序

> ID：11125084
> 
> 赞同：0
> 
> 时间：2012-06-20T17:37:50.327
> 
> 标签：sorting, jqgrid

我无法让列按“名称”值以外的索引进行排序。在这种情况下，我试图按周顺序而不是字母数字顺序对聚合类型列（值是星期几）进行排序。为此，我添加了一个索引列（“聚合类型索引”），其中包含整数的星期几。但是，使用此配置，它无法按索引或名称对该列进行排序。有人可以指出我的错误吗？

我发布了页面上的所有 js 和 css，因为我还有另外两个问题，如果你发现问题很大，否则我会继续寻找。我希望能够启用列重新排序并能够调整网格的大小（两者都显示在[http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)在 3.6 中的新选项卡下）。这两个选项都不起作用。

```
<link rel="stylesheet" type="text/css" href="/static/latest_ui/themes/base/jquery.ui.all.css"/> 
<link rel="stylesheet" type="text/css" media="print" href="/static/css/print.css"/>

<script src="/static/js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/static/latest_ui/ui/jquery.ui.core.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.widget.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.position.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.button.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.menu.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.menubar.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.tabs.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.datepicker.js"></script>
<script src="/static/js/custom.js"></script>

<link rel="stylesheet" type="text/css" media="all" href="/static/css/custom_style.css" />
<link rel="stylesheet" type="text/css" media="all" href="/static/css/custom_colors.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/static/css/ui.jqgrid.css" />

<body>
<table id="grid_reports"></table>
<div id='pager'></div>
</body>

<script src="/static/latest_ui/ui/jquery.ui.resizable.js"></script>
<script src="/static/latest_ui/ui/jquery.ui.sortable.js"></script>
<script src="/static/js/grid.locale-en.js" type="text/javascript"></script>
<script src="/static/js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="/static/js/jqGrid_src/grid.jqueryui.js"></script>

<script>
$(function() {
jQuery("#grid_reports").jqGrid({
sortable: true,
datatype: "local",
height: 500,
width: 300,
colNames:['Series', 'Agg Type', 'Days'],
colModel:[{'index': 'By series', 'align': 'left', 'sorttype': 'text', 'name': 'By series', 'width': 65}, {'index': 'Aggregation type-index', 'align': 'left', 'sorttype': 'int', 'name': 'Aggregation type', 'width': 75}, {'index': 'Days since event', 'align': 'center', 'sorttype': 'text', 'name': 'Days since event', 'width': 50}],

rowNum:50,
pager: '#pager',  
sortname: 'Aggregation type',       
sortorder: 'desc',   
altRows: true,                                                              
rowList:[20,50,100,500,10000],
viewrecords: true,
gridview: true,
caption: "Report for 6/19/12"               
});
jQuery("#grid_reports").navGrid("#pager",{edit:false,add:false,del:false});
jQuery("#grid_reports").jqGrid('gridResize',{minWidth:60,maxWidth:2500,minHeight:80, maxHeight:2500});

var mydata = [{'Days since event': 132, 'Aggregation type': 'Date=Fri', 'By series': 'mean', 'Aggregation type-index': 5}, {'DIM at event': 178, 'Aggregation type': 'Date=Thu', 'By series': 'mean', 'Aggregation type-index': 4}, {'DIM at event': 172, 'Aggregation type': 'Date=Wed', 'By series': 'mean', 'Aggregation type-index': 3}, {'DIM at event': 146, 'Aggregation type': 'Date=Tue', 'By series': 'mean', 'Aggregation type-index': 2}, {'DIM at event': 132, 'Aggregation type': 'Date=Sat', 'By series': 'mean', 'Aggregation type-index': 6}, {'DIM at event': 162, 'Aggregation type': 'Date=Mon', 'By series': 'mean', 'Aggregation type-index': 1}, {'DIM at event': 139, 'Aggregation type': 'Date=Sun', 'By series': 'mean', 'Aggregation type-index': 0}];
for(var i=0;i<=mydata.length;i++)
jQuery("#grid_reports").jqGrid('addRowData',i+1,mydata[i]);
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:12:58.350

您在代码中有一些问题：

*   您应该使用没有空格或元字符的`name`和属性（请参见[此处](http://api.jquery.com/category/selectors/)）。例如，您可以重命名“Aggregation_type”中的列名。`index``'Aggregation type'`
*   *只有在远程数据*的情况下（在or的情况下），您才能对`name`和`index`属性使用不同的值。*`datatype: "json"``datatype: "xml"`*
**   你不应该填充网格`addRowData`。这是我所知道的最慢的方式。更好和更容易的是移动`mydata`代码顶部的定义（在创建网格之前），`id`在数组的每个项目中包含附加属性并使用`data: mydata`jqGrid 选项。如果网格将与数据一起创建，则会对数据进行排序并显示第一页数据。*   如果您需要实现任何自定义排序，您可以将`sorttype`列的属性定义为*函数*而不是默认值`'text'`（例如，请参见[此处](https://stackoverflow.com/questions/7917321/jqgrid-custom-sorting/8001822#8001822)和[此处](https://stackoverflow.com/a/3329852/315935)）。例如，该函数可以为`'Date=Fri'`value 返回 4，为 . 返回 5 `'Date=Sat'`。然后，您可以根据需要实现精确的自定义排序。*

# vba - Excel 2007 功能区组合框事件

> ID：11125088
> 
> 赞同：0
> 
> 时间：2012-06-20T17:38:04.083
> 
> 标签：vba, combobox, excel-2007, ribbon

在 Office 2007 中，我根据此处的材料在功能区上创建了一个组合框 [Source Page](http://roymacleanvba.wordpress.com/2009/12/16/308/) 组合框工作正常，除了当我连续选择相同的项目时，在这种情况下 onChange 事件不会触发。有没有办法解决这个问题。似乎 onAction 事件不适用于 ComboBox。

我真的很感激任何帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:41:17.940

似乎两个组合框都只有一个“onChange”事件，所以除非我们更改选择，否则不会触发。也许下拉列表可能会起作用，因为它有一个“onAction”事件。作为一种解决方法，我在列表顶部放置了一个虚拟对象，可用于更改选择。我知道这是一个愚蠢的解决方法，但在我检查其他选项（如下拉列表）之前必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:44:09.743

`oRibbonCMM.InvalidateControl ("yourcontrolID")`选择项目后使用 a ，我还没有测试过，但我认为它应该可以工作

# android - 生成列表视图时出现错误消息

> ID：11125089
> 
> 赞同：-2
> 
> 时间：2012-06-20T17:38:04.040
> 
> 标签：android, error-handling

```
 06-20 22:53:42.240: E/AndroidRuntime(657): FATAL EXCEPTION: main
    06-20 22:53:42.240: E/AndroidRuntime(657): java.lang.NullPointerException
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.ListView.onMeasure(ListView.java:1127)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.View.measure(View.java:8313)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.View.measure(View.java:8313)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.View.measure(View.java:8313)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.View.measure(View.java:8313)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.View.measure(View.java:8313)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.os.Handler.dispatchMessage(Handler.java:99)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.os.Looper.loop(Looper.java:123)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at java.lang.reflect.Method.invokeNative(Native Method)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at java.lang.reflect.Method.invoke(Method.java:507)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    06-20 22:53:42.240: E/AndroidRuntime(657):  at dalvik.system.NativeStart.main(Native Method)
    06-20 22:53:44.380: I/Process(657): Sending signal. PID: 657 SIG: 9 
```

谁能告诉我这个错误日志说什么？

```
public class Timetablledisplay extends Activity {

ListView lv;
TextView tv;
TextView td;

Gallery myHorizontalListView1;
Gallery myHorizontalListView2;
Gallery myHorizontalListView3;
Gallery myHorizontalListView4;
Gallery myHorizontalListView5;
Gallery myHorizontalListView6;

static int position;
int datepos=0;
Button back,front; 

TextView e1,e2,e3,e4,e5,e6;

String p0[]={"Free","Free","Free","Free","Free","Free"};
String p01[]={"Free","Free","Free","Free","Free","Free"};
String p1[]=new String[40];
String p2[]=new String[40];
String p3[]=new String[40];
String p4[]=new String[40];
String p5[]=new String[40];
String p6[]=new String[40];

String sub[]=new String[40];
String sub1[]=new String[40];
String sub2[]=new String[40];
String sub3[]=new String[40];
String sub4[]=new String[40];
String sub5[]=new String[40];

String[] sw=new String[23];
String restoredText,restoredText1,restoredText2;

String x[]={"Attended","Bunked","Free Hour"};
String x1[]={"Attended","Bunked","Holiday"};

Calendar c = Calendar.getInstance();
Date newDate1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.timetabledisplay);
    try{
        getSettings();
        getTimeTablesetting();

        Log.d("ERRRRRORRR",""+p1[0]);

        lv=(ListView)findViewById(R.id.listView1);
        tv=(TextView)findViewById(R.id.textdate);
        td=(TextView)findViewById(R.id.textday);

        c.add(Calendar.DATE, 0);
        newDate1 = c.getTime();

        td.setText(setdate(newDate1.getDay()));
        try{
            int i;
            //get it from database
            for(i=0;i<ProjectBunkitActivity.pos;i++){
                p1[i]=sub[i];
                p2[i]=sub1[i];
                p3[i]=sub2[i];
                p4[i]=sub3[i];
                p5[i]=sub4[i];
                p6[i]=sub5[i];
            }
            Log.d("ERRRRRORRR",""+p1[0]);
            dateUpdate();
            Log.d("DATEUPDATE", "HGJVVM");

            front=(Button)findViewById(R.id.fwdarrow);
            back=(Button)findViewById(R.id.bckarrow);

            Log.d("DBBBBBBPOSITION5",""+position);

            Calendar cal=Calendar.getInstance();
            Date newd=cal.getTime();
            Log.d("date",""+newd.getDay());
            try{
                if(setdate(newDate1.getDay())=="MON")
                {
                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p1);
                    lv.setAdapter(adapter);
                }
                else if(setdate(newDate1.getDay())=="TUE"){

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p2);
                    lv.setAdapter(adapter);

                }
                else if(setdate(newDate1.getDay())=="WED"){

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p3);
                    lv.setAdapter(adapter);

                }
                else if(setdate(newDate1.getDay())=="THU"){

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p4);
                    lv.setAdapter(adapter);

                }
                else if(setdate(newDate1.getDay())=="FRI"){

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p5);
                    lv.setAdapter(adapter);

                }
                else if(setdate(newDate1.getDay())=="SAT"){

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p6);
                    lv.setAdapter(adapter);

                }
                else 
                {

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            R.layout.listarray, android.R.id.text1, p1);
                    lv.setAdapter(adapter);

                }

            }catch (Exception e) {
                // TODO: handle exception
            }

            lv.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1, final int arg2,
                        long arg3) {
                    // TODO Auto-generated method stub

                    AlertDialog.Builder builder = new AlertDialog.Builder(Timetablledisplay.this);
                    builder.setTitle("Pick a choice");
                    builder.setSingleChoiceItems(x, -1, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int item) {
                            //Toast.makeText(getApplicationContext(), x[item], Toast.LENGTH_SHORT).show();

                            if(newDate1.getDay()==1){
                                changeLabel(arg2, item, p1, 1);
                            }
                            else if(newDate1.getDay()==2){
                                changeLabel(arg2, item, p2, 2);
                            }
                            else if(newDate1.getDay()==3){
                                changeLabel(arg2, item, p3, 3);
                            }
                            else if(newDate1.getDay()==4){
                                changeLabel(arg2, item, p4, 4);
                            }
                            else if(newDate1.getDay()==5){
                                changeLabel(arg2, item, p5, 5);
                            }
                            else if(newDate1.getDay()==6){
                                changeLabel(arg2, item, p6, 6);
                            }
                            else{
                                changeLabel(arg2, item, p0, 7);
                            }
                            updateview();
                            dialog.dismiss();
                            DBmanager(attendance(),newDate1);
                            //defaultview();
                            Log.d("aaaaaaaaaaaaaaaaaaaaa","bbbbbbbbbbbbbbbbbbbbbbbb");

                        }
                    });
                    AlertDialog alert = builder.create();
                    alert.show();               

                }
            });

            back.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    newDate1.setDate(newDate1.getDate()-1);
                    update(newDate1);

                    if(updateViewUsingDB()==null){

                        defaultview();

                    }
                    else
                    {

                        switch (newDate1.getDay())
                        {
                        case 0:
                            p0=updateViewUsingDB();
                            break;
                        case 1:
                            p1=updateViewUsingDB();
                            break;
                        case 2:
                            p2=updateViewUsingDB();
                            break;
                        case 3:
                            p3=updateViewUsingDB();
                            break;
                        case 4:
                            p4=updateViewUsingDB(); 
                            break;
                        case 5:
                            p5=updateViewUsingDB();
                            break;
                        case 6:
                            p6=updateViewUsingDB();
                            break;
                        default:

                        }

                    }                  
                    updateview();
                    DBmanager(attendance(),newDate1);

                }
            }); 
            front.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    newDate1.setDate(newDate1.getDate()+1);
                    update(newDate1);

                    if(updateViewUsingDB()==null){

                        defaultview();

                    }
                    else
                    { 

                        switch (newDate1.getDay())
                        {
                        case 0:
                            p0=updateViewUsingDB();
                            break;
                        case 1:
                            p1=updateViewUsingDB();
                            break;
                        case 2:
                            p2=updateViewUsingDB();
                            break;
                        case 3:
                            p3=updateViewUsingDB();
                            break;
                        case 4:
                            p4=updateViewUsingDB();
                            break;
                        case 5:
                            p5=updateViewUsingDB();
                            break;
                        case 6:
                            p6=updateViewUsingDB();
                            break;
                        default:

                        }

                    }   
                    updateview();
                    DBmanager(attendance(),newDate1);

                }
            });

            Log.d("DBBBBBBPOSITION2JGH",""+position);

            DBmanager(attendance(),newDate1);

        }catch (Exception e) {
            // TODO: handle exception
        }

    }catch (Exception e) {
        // TODO: handle exception

        Log.d("ERRRRRORRR","DONE");

    }

}

public void defaultview(){
    try{
        for(int i=0;i<ProjectBunkitActivity.pos;i++){
            p1[i]=sub[i];
            p2[i]=sub1[i];
            p3[i]=sub2[i];
            p4[i]=sub3[i];
            p5[i]=sub4[i];
            p6[i]=sub5[i];
        }
    }catch (Exception e) {
        // TODO: handle exception
    }

}

public String attendance(){

    String attn=null;
    try{
        switch (newDate1.getDay())
        {
        case 0:
            attn=stringConcat(p0);
            break;
        case 1:
            attn=stringConcat(p1);
            break;
        case 2:
            attn=stringConcat(p2);
            break;
        case 3:
            attn=stringConcat(p3);
            break;
        case 4:
            attn=stringConcat(p4);
            break;
        case 5:
            attn=stringConcat(p5);
            break;
        case 6:
            attn=stringConcat(p6);
            break;
        default:
            attn=stringConcat(p0);     
        }
    }catch (Exception e) {
        // TODO: handle exception
    }
    return attn;

}

public void DBmanager(String attendance,Date theDate){

    try{
        Random rand=new Random();

        int i=newDate1.getDate(); 
        String s=setdate(newDate1.getDay());
        String mnth=setmon(newDate1.getMonth());
        long timevar=newDate1.getTime();

        int k;
        k=(100*newDate1.getDate())+newDate1.getMonth();
        SQLiteDatabase db=openOrCreateDatabase("bunkDBNxTGeN", MODE_PRIVATE, null);

        ContentValues cv= new ContentValues();
        cv.put("curId", position);
        cv.put("curPos",k);
        cv.put("curDay",s);
        cv.put("curDate",i);
        cv.put("curMnth",mnth);
        cv.put("curAttend",attendance);
        cv.put("curTime", timevar);

        position=rand.nextInt(10000-0)+0;

        db.execSQL("CREATE TABLE IF NOT EXISTS theTable(curId INT(3),curPos INT(3),curTime INT(20),curDate INT(2),curDay VARCHAR,curMnth VARCHAR,curAttend VARCHAR);");

        db.insert("theTable",null, cv);

        Cursor c=db.rawQuery("SELECT * FROM theTable", null);
        c.moveToLast(); 
        Log.d("DB Message1", c.getString(c.getColumnIndex("curId")));
        Log.d("DB Message1", c.getString(c.getColumnIndex("curPos")));
        Log.d("DB Message2", c.getString(c.getColumnIndex("curDate")));
        Log.d("DB Message3", c.getString(c.getColumnIndex("curDay")));
        Log.d("DB Message4", c.getString(c.getColumnIndex("curMnth")));
        Log.d("DB Message5", c.getString(c.getColumnIndex("curAttend")));
        Log.d("DB Message6", c.getString(c.getColumnIndex("curTime")));

        db.execSQL("CREATE TABLE temp AS SELECT * FROM theTable ORDER BY curTime");
        db.execSQL("DROP TABLE theTable");
        db.execSQL("ALTER TABLE temp RENAME TO theTable");
        db.execSQL("DELETE FROM theTable WHERE curId NOT IN (SELECT curId FROM theTable GROUP BY curPos);");

        c.close();
        db.close();

    }catch (Exception e) {
        // TODO: handle exception
        Log.d("DB Message Error",e.toString());

    }

}
@SuppressWarnings("finally")
public String stringConcat(String [] arr){

    String str = "";
    try{
        for (int i = 0;i<arr.length; i++) {
            str = str+arr[i];
            if(i<arr.length-1){
                str = str+",";
            }
        }

    }catch (Exception e) {
        // TODO: handle exception
    }
    finally{

        return str;
    }

}

@SuppressWarnings("finally")
public String [] stringUncat(String str)
{
    String[] arr=null;
    try{

        arr= str.split(",");
    }catch (Exception e) {
        // TODO: handle exception
    }
    finally{
        return arr;
    }

}

public String[] updateViewUsingDB(){

    int curDate;
    curDate=(100*newDate1.getDate())+newDate1.getMonth();

    String s12=null;
    String s123[];
    int index,x;
    SQLiteDatabase db=openOrCreateDatabase("bunkDBNxTGeN", MODE_PRIVATE, null);

    try{
        if (db == null) {
            Log.d("Database", "Not Found!!!");
        } 
        else {

            Cursor c=db.rawQuery("SELECT * FROM theTable", null);
            c.moveToFirst();
            index=c.getColumnIndex("curPos");
            x=Integer.parseInt(c.getString(index));
            while(index!=-1) 
            {
                if(x==curDate)
                {

                    s123=stringUncat(c.getString(c.getColumnIndex("curAttend")));
                    db.close();
                    return s123;

                }
                else{

                    c.moveToNext();
                    index=c.getColumnIndex("curPos");
                    x=Integer.parseInt(c.getString(index));

                }
            }

            Log.d("DATABASE","UREAKAAAAAAAAAAAAAAAA"+s12);

        }
        db.close();

    }catch (Exception e) {
        // TODO: handle exception
        Log.d("DATABASE INFO",e.toString());
        db.close();

    }

    db.close();
    return null;

}

public void updateview()
{
    Log.d("DATEUPDATAVSCXZVAQAndlekdn", p1[0]);

    try{ 

        Log.d("DATEUPDAfSFSffdsFSDFAFkSDACDCSDndlekdn", p1[0]);

        if(setdate(newDate1.getDay())=="MON")
        {
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p1);
            lv.setAdapter(adapter);
        }
        else if(setdate(newDate1.getDay())=="TUE"){

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p2);
            lv.setAdapter(adapter);
            Log.d("DATEUPDATFwegfegewgRGSggekndlekdn", p1[0]);

        }
        else if(setdate(newDate1.getDay())=="WED"){

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p3);
            lv.setAdapter(adapter);

        }
        else if(setdate(newDate1.getDay())=="THU"){

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p4);
            lv.setAdapter(adapter);

        }
        else if(setdate(newDate1.getDay())=="FRI"){

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p5);
            lv.setAdapter(adapter);

        }
        else if(setdate(newDate1.getDay())=="SAT"){

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p6);
            lv.setAdapter(adapter);

        }

        else 
        {

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    R.layout.listarray, android.R.id.text1, p0);
            lv.setAdapter(adapter);

        }
        Log.d("DATEUPDAEFWEGFRHTkndlekdn", p1[0]);

    }
    catch (Exception e) {
        // TODO: handle exception
    }

}

public void dateUpdate(){

    try{

        int m;
        Calendar c = Calendar.getInstance();
        Date newDate = c.getTime();
        Log.d("DateXXX","heyyy");

        String s=setdate(newDate.getDay());
        String x=setmon(newDate.getMonth());

        Log.d("DATEEEEE",""+newDate.getDate());

        m=newDate.getDate();
        td.setText(s);
        tv.setText(x+","+m);
        updateview();
    }
    catch (Exception e) {

        Log.d("HEY THEREs An ERROR",e.toString());
    }

}
public void update(Date p)
{
    try{
        int m;

        String s=setdate(p.getDay());
        String x=setmon(p.getMonth());

        m=p.getDate();
        td.setText(s);
        tv.setText(x+","+m);
    }
    catch (Exception e) {

        Log.d("HEY THERE An ERROR",e.toString());
    }

}

private String setmon(int month) {
    // TODO Auto-generated method stub
    String d=null;
    try{
        switch (month){

        case 0:d="JAN";
        break;
        case 1:d="FEB";
        break;
        case 2:d="MAR";
        break;
        case 3:d="APL";
        break;
        case 4:d="MAY";
        break;
        case 5:d="JUN";
        break;
        case 6:d="JULY";
        break;
        case 7:d="AUG";
        break;
        case 8:d="SEP";
        break;
        case 9:d="OCT";
        break;
        case 10:d="NOV";
        break;
        case 11:d="DEC";
        break;

        default:d="JAN";

        }
    }catch (Exception e) {
        // TODO: handle exception
    }
    return d;
}

private String setdate(int day) {
    // TODO Auto-generated method stub
    String d=null;
    try{
        switch (day)
        {
        case 0:d="SUN";
        break;
        case 1:d="MON";
        break;
        case 2:d="TUE";
        break;
        case 3:d="WED";
        break;
        case 4:d="THU";
        break;
        case 5:d="FRI";
        break;
        case 6:d="SAT";
        break;
        default:d="MON1";
        }
    }catch (Exception e) {
        // TODO: handle exception
    }
    return d;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    try{
        MenuInflater inflater = getMenuInflater(); //
        inflater.inflate(R.menu.menu, menu); //
    }catch (Exception e) {
        // TODO: handle exception
    }
    return true; 
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    try{
        switch (item.getItemId()) { 
        case R.id.itemPrefs:
            startActivity(new Intent(this, ProjectBunkitActivity.class)); 
            break;
        case R.id.itemPrefs1:
            startActivity(new Intent(this,Display.class));
        }
    }catch (Exception e) {
        // TODO: handle exception
    }

    return super.onOptionsItemSelected(item);
}

public String[] changeLabel(int i,int j,String[] p,int l) {
    // TODO Auto-generated method stub
    //p6[arg2]=x[item];
    try{
        String storage[][]={
                sub,
                sub1,
                sub2,
                sub3,
                sub4,
                sub5,p01};

        //Toast toast = Toast.makeText(Timetablledisplay.this,storage[l-1][i],Toast.LENGTH_SHORT);
        //toast.show();
        switch (j) {
        case 0:

            p[i]=storage[l-1][i];

            break;
        case 1:p[i]="BNK";
        break;

        case 2:p[i]="FREE";
        break;

        default:
            break;
        }

        DBmanager(attendance(),newDate1);
    }catch (Exception e) {
        // TODO: handle exception
    }
    return p;

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    try{
        Calendar ca=Calendar.getInstance();
        ca.add(Calendar.DATE, 0);
        Date dres=ca.getTime(); 
        newDate1=dres;

        Log.d("DATEUPDATE", "DONE");
        dateUpdate();

    }
    catch (Exception e) {
        // TODO: handle exception
        Log.d("DATEUPDATE", e.toString());

    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    try{
        super.onPause();

        Log.d("DATqewDATE", "jhwedhjkebjd");
    }catch (Exception e) {
        // TODO: handle exception
    }

    //      SharedPreferences.Editor editor = getPreferences(0).edit();
    //      editor.putInt("position",position);     
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onRestoreInstanceState(savedInstanceState);
    Log.d("DATEUPDATE", "HGJVVM");

    try{
        p1=savedInstanceState.getStringArray("mond");
        p2=savedInstanceState.getStringArray("tued");
        p3=savedInstanceState.getStringArray("wedd");
        p4=savedInstanceState.getStringArray("thud");
        p5=savedInstanceState.getStringArray("frid");
        p6=savedInstanceState.getStringArray("satd");

        Calendar ca=Calendar.getInstance();
        ca.add(Calendar.DATE, 0);
        Date dres=ca.getTime();
        newDate1=dres;

        Log.d("DATEUPDATE1212", "DONE");
        dateUpdate();
    }catch (Exception e) {
        // TODO: handle exception
    }

}

@Override
protected void onSaveInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onSaveInstanceState(savedInstanceState);
    try{
        savedInstanceState.putStringArray("mond", p1);
        savedInstanceState.putStringArray("tued", p2);
        savedInstanceState.putStringArray("wedd", p3);
        savedInstanceState.putStringArray("thud", p4);
        savedInstanceState.putStringArray("frid", p5);
        savedInstanceState.putStringArray("satd", p6);
    }catch (Exception e) {
        // TODO: handle exception
    }
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub

}

public void getSettings(){

    try{

        SharedPreferences prefs = getSharedPreferences("myfile",0); 
        restoredText = prefs.getString("text", null); 
        restoredText1 = prefs.getString("cpd", null);
        restoredText2= prefs.getString("nos", null);

        int pos1=prefs.getInt("pos",1);
        int l=0;

        if (restoredText != null) {

            Log.d("HHHHH", "Here"+pos1); 
            try{

                for(int j=0;j<=pos1-1;j++) 
                {
                    sw[l]=prefs.getString("sub"+l,null); 
                    Log.d("DATA FROM PREFS",sw[l]);
                    l++;

                }
            }
            catch(Exception e)
            {
                Toast toast = Toast.makeText(Timetablledisplay.this,e.toString()+"5",Toast.LENGTH_SHORT);
                toast.show();

            } 
            getTimeTablesetting();

        }
    }catch (Exception e) {
        // TODO: handle exception
    }

}

public void getTimeTablesetting(){

    SharedPreferences prefs = getSharedPreferences("myTime",0);

    try{
        if(ProjectBunkitActivity.pos==prefs.getInt("pos",0)){ 
            if(prefs.getString("sub"+2, null) != null)
            {
                for(int i=0;i<prefs.getInt("pos",0);i++)
                {
                    sub[i] = prefs.getString("sub"+i, null); 
                    sub1[i] = prefs.getString("sub1"+i, null); 
                    sub2[i] = prefs.getString("sub2"+i, null); 
                    sub3[i] = prefs.getString("sub3"+i, null); 
                    sub4[i] = prefs.getString("sub4"+i, null); 
                    sub5[i] = prefs.getString("sub5"+i, null); 

                    Log.d("DATA FROM PREFS FOR TIME TABLE",sub[i]+i);

                }
            }
        }
    }catch (Exception e) {
        // TODO: handle exception
        Log.d("DATA FROM PREFS FOR TIME TABLE","ERROR");

    }

}

} 
```

此代码从首选项中获取一些值并将其转换为列表视图，并在按下后退或前按钮时更新日期。它还将数据写入数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:53:25.107

可能只有两个可能的原因`NullPointerException`：

*   对于适配器应该放置数据`id`的位置，您给出了错误的答案。`TextView`例如，如果您使用此构造函数：

    `ArrayAdapter<...>(Context, R.layout.layout_file, R.id.textview, List data);`

然后`R.id.textview`不是`id`一个`View`存在于 中的`R.layout.layout_file`。

*   您在/中有一个`null`值，表示传递给适配器的数据`List``array`

你在布局文件中`TextView`有一个吗？如果没有，那就是你问题的根源。`id` `@android:id/text1``R.layout.listarray`

**编辑：** 查看您的代码，问题可能是那些`p1`,`p2`数组。您将它们声明为 size `40`，但是您是否填充了它们中的所有位置？您是否有`40`要放入这些数组的值？如果没有，那么在某些时候您将只有`null`值并且适配器不喜欢那样。

将其中的值打印到`logcat`并查看这些数组中是否有`null`值。如果你这样做，那么这很可能是你的问题。

# django - 从 Django 响应中删除所有或大部分标头

> ID：11125090
> 
> 赞同：0
> 
> 时间：2012-06-20T17:38:07.937
> 
> 标签：django, http, http-headers, django-views

我通过原始连接连接到我的 Django 应用程序。此应用程序中的带宽稀缺。这是我得到的回应。

```
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 20 Jun 2012 07:58:18 GMT
Content-Type: application/text
Connection: close
Content-Length: 11
X-Varnish: 311740110
Age: 0
Via: 1.1 varnish

My Webpage. 
```

有没有办法删除所有标题，只返回“我的网页。”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:59:28.003

首先，添加标题是有原因的，您可能会发现客户无法在没有标题的情况下正确显示您的网站。

话虽如此：

为此，我将添加一个中间件类，以删除其`process_response`方法中的所有标头。您需要将中间件作为第一项放入，`MIDDLEWARE_CLASSES`因为这意味着它将在响应实际发送给用户之前作为最后一个中间件类进行处理。有关更多信息，请参阅 Django 的[中间件文档](https://docs.djangoproject.com/en/dev/topics/http/middleware/)。

# vb6 - 我可以根据其类型创建一个新对象吗？

> ID：11125094
> 
> 赞同：2
> 
> 时间：2012-06-20T17:38:21.807
> 
> 标签：vb6

给定一个 clsPerson 类型的对象：

```
dim oP as New clsPerson
oP.FirstName = "Sam" 
```

有没有办法询问变量`oP`并创建该类型的新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:37:11.870

如果该类已正确注册到 COM（即来自 ActiveX dll 项目），则可以：

```
Option Explicit

Private Type Guid
  Data1 As Long
  Data2 As Integer
  Data3 As Integer
  Data4(0 To 7) As Byte
End Type

Private Const CLSCTX_INPROC_SERVER As Long = 1
Private Const IID_IUnknown As String = "{00000000-0000-0000-C000-000000000046}"

Private Declare Function CLSIDFromString Lib "ole32.dll" (ByVal lpsz As Long, ByRef pclsid As Guid) As Long
Private Declare Function IIDFromString Lib "ole32.dll" (ByVal lpsz As Long, ByRef lpiid As Guid) As Long
Private Declare Function CoCreateInstance Lib "ole32.dll" (ByRef rclsid As Guid, ByVal pUnkOuter As Long, ByVal dwClsContext As Long, ByRef riid As Guid, ByRef ppv As Object) As Long

Public Function GetAnotherInstanceOf(ByVal this As Object) As Object
  Static iunk As Guid
  If iunk.Data4(7) = 0 Then
    IIDFromString StrPtr(IID_IUnknown), iunk
  End If

  Dim ti As TLI.TypeInfo

  With New TLI.TLIApplication
    Set ti = .ClassInfoFromObject(this)
  End With

  Dim clsid As Guid
  CLSIDFromString StrPtr(ti.Guid), clsid

  CoCreateInstance clsid, 0, CLSCTX_INPROC_SERVER, iunk, GetAnotherInstanceOf
End Function 
```

用法：

```
Dim s As New MSXML2.DOMDocument60

Dim clone As Object

MsgBox TypeName(clone)
Set clone = GetAnotherInstanceOf(s)
MsgBox TypeName(clone) 
```

可在项目 -> 参考`TLI`中找到。`TypeLib Information`

# ruby-on-rails - 控制器动作中的 Rails 3.2 DoubleRenderError

> ID：11125095
> 
> 赞同：0
> 
> 时间：2012-06-20T17:38:23.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有一个自定义控制器操作，如下所示。我有一个带有复选框的表单，允许我通过使用 Prawn 将所选项目写入 pdf 文件来打印它们。有任何想法吗？

我收到以下错误。

```
AbstractController::DoubleRenderError (Render and/or redirect were called multiple
times in this action. Please note that you may only call render OR redirect, and
at most once per action. 
```

这是控制器的相关部分

```
class ShipmentsController < ApplicationController
  autocomplete :client, :name, :full => true
  autocomplete :product, :product_name, :full => true, :extra_data => [:product_code, :miller_product_code]

  respond_to :js, :html
def index
  if params[:status]
    @openshipments = Shipment.where(:status => params[:status]).search(params[:search1]).order(sort_column + " " + sort_direction).page(params[:page])
  else
    @shipments = Shipment.search(params[:search]).order(sort_column + " " + sort_direction).page(params[:page])
  end
end
def create
  ...
end
def edit
  ... 
end
def update
  ... 
end
def destroy
  ...
end

def print_open
  @printshipments = Shipment.find(params[:open_shipment_ids])

  respond_to do |format|
    format.pdf do
      @printshipments.each do |shipment|
        pdf = Prawn::Document.new
        pdf.text "bill_of_lading_#{shipment.bill_of_lading}"
       #removed send_data pdf.render, filename: "bill_of_lading_#{shipment.bill_of_lading}"
        File.open("public/bill_of_ladings/bill_of_lading_#{shipment.bill_of_lading}.pdf", "wb") { |f| f << pdf.render }
        shipment.update_attribute(:status, "PRINTED")

      end
    end
  end
  redirect_to shipments_path
end 
```

编辑：我可以通过删除 send_data 行来消除错误，但是我无法让表单重定向到我想要的页面。它只想渲染目录中的 javacript，可能是因为这是一个远程表单。我通过使用以下路线的 form_tag 调用 print_open。

```
 get '/shipments/status/:status' => 'shipments#index' 
```

当我在 print_open 方法的末尾使用 redirect_to shipping_path 时，它会呈现视图，但浏览器中的 url 仍然显示为：

```
http://localhost:3000/shipments/status/open 
```

代替：

```
http://localhost:3000/shipments 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:43:44.160

由于您正在循环遍历数组并调用`send_data`每个元素，因此您可能会`send_data`多次调用。这会给你你收到的例外。

# ajax - Rails中带有回形针的远程表单？

> ID：11125107
> 
> 赞同：1
> 
> 时间：2012-06-20T17:39:39.250
> 
> 标签：ajax, ruby-on-rails-3, forms

我有一个 Rails 应用程序并试图制作一个远程表单，到目前为止它并没有真正奏效..有人可以指出我在这里做错了什么：

所以模型：

```
class Media < ActiveRecord::Base
  attr_accessible :galaxy, :title, :rss_url, :avatar
  has_many :stories
  has_many :plots, :through => :stories

class Story < ActiveRecord::Base
  attr_accessible :content, :galaxy, :title
  validates_uniqueness_of :content
  belongs_to :media
  has_many :plots

class Plot < ActiveRecord::Base
  belongs_to :plotable, :polymorphic => true
  has_many :plots, :as => :plotable
  has_many :soundtracks, :as => :soundtrackable, :dependent => :destroy
  accepts_nested_attributes_for :soundtracks, :allow_destroy => true 
```

所以在 app/views/medias/show.html.erb:: 中查看

```
 <% @media.stories.each do |s| %>
   <%= form_for :plot, :remote => true, :html => { :id => 'pl_form' } do |f| %>
    <%= f.fields_for :soundtracks do |soundtrack_fields| %> 
       <%= soundtrack_fields.file_field :soundtrack %>
     <% end %>
    <%= text_field_tag :name, s.content, :style =>"display:none" %>
    <%= f.submit %>
   <% end %> 
```

app/views/plots/create.js.erb

```
var el = $('#new_pl');
  // We could also render a partial to display the plot here
  $('#plots').append("<%= escape_javascript( 
      simple_format( @plot.body ) 
    ) %>");
  el.find('input:text,textarea').val('');
  el.find('.errors').empty();
<% end %> 
```

控制器是标准的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:04:32.437

将 multipart true 添加到您的表单

```
 <%= form_for :plot, :remote => true, :html => { :id => 'pl_form', :multipart => true } do |f| %> 
```

来自 W3C 的[多部分](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

> 内容类型“multipart/form-data”应用于提交包含文件、非 ASCII 数据和二进制数据的表单

# django - Django中的登录屏幕 - 子类化或创建表单模板？

> ID：11125111
> 
> 赞同：0
> 
> 时间：2012-06-20T17:39:46.917
> 
> 标签：django

以前我一直在研究如何使用电子邮件地址而不是用户名注册的几种解决方案。我发现的所有资源都集中在创建自定义后端和滚动注册页面上。虽然这对我有用，但我找不到解释如何处理登录屏幕的单一解决方案。

> **首先，我使用电子邮件授权的方法**
> 
> 注册：我获取电子邮件地址并将其创建为用户名的哈希值并存储它。
> 
> 登录：我再次获取电子邮件地址并创建它的哈希并尝试找到具有相同哈希的用户名。

**它是如何在代码中完成的：**

在**设置中**：

```
AUTHENTICATION_BACKENDS = ('MyApp.auth_backends.CustomUserModelBackend',)
CUSTOM_USER_MODEL = 'MyApp.CustomUser' 
```

在**模型.py**

```
class CustomUser(User):
    timezone = models.CharField(max_length=50, default='Europe/London')
    objects = UserManager() 
```

我已经定制了这样的注册：

**视图.py**

```
def register_page(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = CustomUser.objects.create_user(
                username=md5(form.cleaned_data['email']).digest().encode('base64')[:-1],
                password=form.cleaned_data['password2'],
                email=form.cleaned_data['email']
            )   

            return HttpResponseRedirect('/register/success/')
    else:
        form = RegistrationForm()
    variables = RequestContext(request, {'form':form})
    return render_to_response('registration/register.html', variables) 
```

在**auth_backends.CustomUserModelBackend 中：**

计算给定电子邮件地址的哈希值以找到相关的用户名。

```
class CustomUserModelBackend(ModelBackend):
    def authenticate(self, username=None, password=None):
        try:
            # The parameter Username is here really just the email address, I get 
            # the hash for the email parameter and try to find the user.

            hash_user = md5(username).digest().encode('base64')[:-1],
            user = self.user_class.objects.get(username=hash_user)
            if user.check_password(password):
                return user
        except self.user_class.DoesNotExist:
            return None

    def get_user(self, user_id):
        try:
            return self.user_class.objects.get(pk=user_id)
        except self.user_class.DoesNotExist:
            return None

    @property
    def user_class(self):
        if not hasattr(self, '_user_class'):
            self._user_class = get_model(*settings.CUSTOM_USER_MODEL.split('.', 2))
            if not self._user_class:
                raise ImproperlyConfigured('Could not get custom user model')
        return self._user_class 
```

**现在我被登录屏幕困住了。**

我已经这样做了，但是我被重定向回登录屏幕而没有显示任何错误。

**网址.py**

```
(r'^login/$', 'django.contrib.auth.views.login'), 
```

**注册/login.html**

```
{% extends "base.html" %}
{% block title %}user login{% endblock %}
{% block head %}User login{% endblock %}
{% block content %}{% if form.errors %}
    <p>Your email and password didn't match</p>
{% endif %}
    <form action="." method="post">
        <p>
            <label for="id_username">Email:</label>{{ form.username }}
        </p>
        <p>
            <label for="id_password">Password:</label>{{ form.password }}
        </p>
        {% csrf_token %}
        <input type="hidden" name="next" value="/" />
        <input type="submit" value="login" />
    </form>
{% endblock %} 
```

我知道该解决方案已经存在问题，因为我需要“用户名”而不是字符字段的电子邮件输入。

1）我该怎么做才能覆盖字段类型？

2）我仍然无法登录，它说用户名与密码不匹配。

我在 Authenticate 中对其进行了调试，但没有找到用户

```
 hash_user = md5(username).digest().encode('base64')[:-1],
            user = self.user_class.objects.get(username=hash_user) 
```

同一个电子邮件地址的哈希值不总是相同的吗？我会错过什么？

**更新：**

我可以清楚地看到哈希码作为用户名保存在数据库中，我可以看到在 Authenticate`user = self.user_class.objects.get(username=hash_user)`中哈希码与数据库中的值相同。但是它仍然没有检索到用户。为什么？

![在此处输入图像描述](../Images/80baa7e75ae8ea793e05e870a36986da.png) ![在此处输入图像描述](../Images/f2190409ed8d3aa4872cb8924c27b212.png)

**更新 2：**

我发现了问题。我在那里错误地使用了一个逗号，这将哈希变成了一个元组。哦亲爱的

这是正确的并且有效：

```
hash_user = md5(username).digest().encode('base64')[:-1]
user = self.user_class.objects.get(username=hash_user) 
```

我们现在在这里有了完整的解决方案。就一件事。

有人能帮我解决 1) 吗？请问如何覆盖用户名字符字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:44:34.857

遗憾的是，[目前这是不可能的](https://docs.djangoproject.com/en/dev/topics/db/models/#field-name-hiding-is-not-permitted)。

# sql-server-2008 - A Query to remove relationships that do not belong

> ID：11125114
> 
> 赞同：0
> 
> 时间：2012-06-20T17:39:57.037
> 
> 标签：sql-server-2008, tsql

In a SQL Server 2008 R2 database, given this schema:

```
AgentsAccounts
_______________
AgentID int UNIQUE
AccountID

FinalAgents
___________
AgentID 
```

I need to create a query that does this: For each AgentID 'final' in FinalAgents remove all of the OTHER AgentID's from AgentsAccounts that have the same AccountID as 'final'. So if the tables have these rows before the query:

```
AgentsAccounts
AgentID    AccountID
1          A
2          A
3          B
4          B

FinalAgents
1
3 
```

then after the query the AgentsAccounts table will look like this:

```
AgentsAccounts
AgentID    AccountID
1          A
3          B 
```

What T-SQL query will delete the correct rows without using a curosr?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:38:01.863

Aaron 的帖子不太正确，因为当没有最终代理时，它会删除表中的所有内容。这个问题很清楚地表明，只有具有相同帐户的东西才应该被删除。如果将值“(5, 'C')”添加到代理帐户记录，您可以看到这一点。

以下仅删除最终代理表引用的帐户：

```
delete aa
from @AgentsAccounts aa join
     (select fa.AgentID, aa.AccountID
      from @FinalAgents fa join
           @AgentsAccounts aa 
           on fa.agentId = aa.agentId
     ) fa
     on fa.AccountID = aa.AccountID and
        fa.AgentID <> aa.agentID; 
```

我使用与 Aaron 的答案相同的命名约定来澄清差异。看看会发生什么：

```
INSERT @AgentsAccounts VALUES (1,'A'), (2,'A'), (3,'B'), (4,'B'), (5, 'C'); 
```

# javascript - 在 MouseOver 上暂停滑块幻灯片

> ID：11125115
> 
> 赞同：0
> 
> 时间：2012-06-20T17:39:57.213
> 
> 标签：javascript, jquery, slideshow

我修改了一个滑块脚本来模仿 ebay 在主页上的滑块。我对 Javscript 不够熟悉，无法修改代码以允许幻灯片在鼠标悬停时暂停。任何帮助，将不胜感激。

工作样本位于[http://camoshop.com/test.html](http://camoshop.com/test.html)

Javascript代码：

```
var TINY={};

function T$(i){return document.getElementById(i)}
function T$$(e,p){return p.getElementsByTagName(e)}

TINY.fader=function(){
function fade(n,p){this.n=n; this.init(p)}
fade.prototype.init=function(p){
    var s=T$(p.id), u=this.u=T$$('li',s), l=u.length, i=this.l=this.c=this.z=0;
    if(p.navid&&p.activeclass){this.g=T$$('li',T$(p.navid)); this.s=p.activeclass}
    s.style.overflow='hidden'; this.a=p.auto||0; this.p=p.resume||0;
    for(i;i<l;i++){
        if(u[i].parentNode==s){
            u[i].style.position='absolute'; this.l++; u[i].o=p.visible?100:0;
            u[i].style.opacity=u[i].o/100; u[i].style.filter='alpha(opacity='+u[i].o+')'
        }
    }
    this.pos(p.position||0,this.a?1:0,p.visible)
},
fade.prototype.auto=function(){
    this.u.ai=setInterval(new Function(this.n+'.move(1,1)'),this.a*1000)
},
fade.prototype.move=function(d,a){
    var n=this.c+d, i=d==1?n==this.l?0:n:n<0?this.l-1:n; this.pos(i,a)
},
fade.prototype.pos=function(i,a,v){
    for(j=0;j<this.u.length;j++){if(j!=this.c && j!=i)this.u[j].style.zIndex=0;}
    this.u[this.c].style.zIndex=1;
    var p=this.u[i]; p.style.zIndex=2;
    clearInterval(p.si); clearInterval(this.u.ai); this.u.ai=0; this.c=i;
    if(p.o>=100&&!v){p.o=0; p.style.opacity=0; p.style.filter='alpha(opacity=0)'}
    if(this.g){for(var x=0;x<this.l;x++){this.g[x].className=x==i?this.s:''}}
    p.si=setInterval(new Function(this.n+'.fade('+i+','+a+')'),20)
},
fade.prototype.fade=function(i,a){
    var p=this.u[i];
    if(p.o>=100){
        clearInterval(p.si); if((a||(this.a&&this.p))&&!this.u.ai){this.auto()}
    }else{
        p.o+=5; p.style.opacity=p.o/100; p.style.filter='alpha(opacity='+p.o+')'
    }
};
return{fade:fade}
}(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:58:56.580

将**fade.prototype.move**函数替换为以下代码

```
fade.prototype.move=function(d,a) {
   if($(this).is(":hover") == false)
      var n=this.c+d, i=d==1?n==this.l?0:n:n<0?this.l-1:n; this.pos(i,a)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:28:28.617

有人在 TinyFader 网站上发布的建议：

**对于那些询问暂停按钮的人，将以下代码添加到 'tinyfader.js'*

```
fade.prototype.pause=function(){  clearInterval(this.u.ai); }; 
```

*更换 ';' 那是在'fade.prototype.fade =function{...};'之后 带有“，”的函数，然后将其粘贴在“，”之后，因此您的代码看起来像...*

```
 //code snippet of tinyfader.js
..., 
fade.prototype.fade=function(i,a){  
var p=this.u[i];  
if(p.o>=100)
{clearInterval(p.si); if((a||(this.a&&this.p))&&!this.u.ai){this.auto()}  
}else{   
p.o+=5; p.style.opacity=p.o/100; p.style.filter='alpha(opacity='+p.o+')'  
} 
},
 fade.prototype.pause=function(){  clearInterval(this.u.ai); };
//end snippet 
```

*一旦代码到位，您可以使用“slideshow.pause()”或“slideshowname.pause()”调用暂停*函数*。要再次播放幻灯片，只需调用'slideshow.auto()'。**

执行此操作后...尝试仅通过 jQuery 或 javascript 在图像悬停时调用暂停功能...

亲自尝试并为我们提供您的体验...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T20:19:23.557

我将**fade.prototype.move**函数替换为以下代码

```
fade.prototype.move=function(d,a) {      
   if($("#"+$(this)[0]["n"]).is(":hover") == false) { 
      var n=this.c+d, i=d==1?n==this.l?0:n:n<0?this.l-1:n; this.pos(i,a)
   }
}, 
```

# css - Float a DIV after scrolling accross the DIV

> ID：11125121
> 
> 赞同：1
> 
> 时间：2012-06-20T17:40:17.540
> 
> 标签：css, html, css-float

This is the URL: [Check this URL](http://classictutorials.com)

In that there is a red ribbon with subscribe, like etc.

Its fixed on the top. All i want is the ribbon should start floating on the top of the page as soon as some one scrolls below it..again if he scrolls up the ribbon goes and sits in its place.

Basic idea is that ribbon should be visible to the user always.

How to acheive something like this in CSS?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:48:10.023

```
$(window).scroll(function(){
  if($(this).scrollTop()>$('#socio').position().top){
    $('#socio').css({position:'fixed',top:0});
  }else{
    $('#socio').css({position:'relative'});
  } 

}); 
```

像这样的东西应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:50:53.377

查看 Chris Coyier 的“持久标头”：
[http ://css-tricks.com/persistent-headers/](http://css-tricks.com/persistent-headers/)

> 这是一些代码，用于在滚动浏览该内容时使某些内容区域的标题保持在屏幕顶部可见。然后在您滚动过去相关部分时离开。

他还发布了[另一个](http://jqueryfordesigners.com/fixed-floating-elements/)实现的链接。

# git - git checkout systematicaly modify files

> ID：11125127
> 
> 赞同：1
> 
> 时间：2012-06-20T17:40:44.003
> 
> 标签：git, git-checkout

This is driving me crazy and I can't find why it's doing this...

```
git clone git@github.com:/my/working/repo.git
--I don't do anything in the working copy--
git status
--no modification/no file to be commited--
git checkout another_branch
--I don't do anything in the working copy--
git status
modified: /some/file/that/I/touched.php
modified: /some/file/that/I/touched2.php
modified: /some/file/that/I/touched3.php 
```

And when I do a git diff it shows only some line ending modifications. I see you coming... You're gonna tell me that I have to set autocrlf to false... Already tried that, and changes nothing...

If anyone has an idea on how to fix this i'd be more than pleased...

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:40:56.623

你应该试试：

```
git clone git@github.com:/my/working/repo.git
git branch another_branch
git checkout another_branch
git pull origin another_branch 
```

我希望它对你有用。

因为如果我们`git checkout another_branch`直接这样做，它将切换到远程分支，而不是在本地创建分支。

第二种方式是：

做`git checkout -b another_branch`

# javascript - Javascript 获取当前日期而不考虑时区

> ID：11125129
> 
> 赞同：3
> 
> 时间：2012-06-20T17:40:57.320
> 
> 标签：javascript, date, timezone

我正在寻找 javascript 代码，它将根据本地时区（客户端浏览器时区）给我当月的第一个日期。

目前我正在使用下面的代码：

```
var startDate =new Date (2012,5,1); 
```

这正确地给了我这个值：

> 2012 年 6 月 1 日星期五 00:00:00 EDT

但是，当我在贝鲁特的浏览器（格林威治标准时间 +2.00）中尝试相同的操作时，它“有时”会给出 5 月 31 日（这意味着如果我早上尝试它会给我 31 日，但贝鲁特下午时间可以正常工作）

基本上我需要获取本地浏览器当前的第一个日期。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:53:37.313

调用不带参数的[Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)函数，总是返回浏览器的当前时间，它从操作系统获取时间和时区。

试试这个：

```
var now = new Date(),
    first = new Date(now.getFullYear(), now.getMonth(), 1);
alert(first); 
```

​您可以尝试使用查看时区`now.getTimezoneOffset();`

# performance - Most efficient way to replace lowest list values in dataframe in R

> ID：11125131
> 
> 赞同：2
> 
> 时间：2012-06-20T17:40:59.107
> 
> 标签：performance, r, loops, dataframe

I have a dataframe, df, with a list/vector of numbers recorded for each subject for two repetitions of a test item.

```
subj item rep vec
s1 1 1 [2,1,4,5,8,4,7]
s1 1 2 [1,1,3,4,7,5,3]
s1 2 1 [6,5,4,1,2,5,5]
s1 2 2 [4,4,4,0,1,4,3]
s2 1 1 [4,6,8,7,7,5,8]
s2 1 2 [2,5,4,5,8,1,4]
s2 2 1 [9,3,2,6,6,8,5]
s2 2 2 [7,1,2,3,2,7,3] 
```

For each item, I want find 50% the mean of rep 1 and then replace the lowest numbers in the rep 2 vector with 0, until the mean of rep2 is less than or equal to the mean of rep1\. For example, for s1 item1:

```
mean(c(2,1,4,5,8,4,7))*0.5 = 2.1 #rep1 scaled down
mean(c(1,1,3,4,7,5,3)) = 3.4 #rep2
mean(c(0,0,0,0,7,5,0)) = 1.7 #new rep2 such that mean(rep2) <= mean(rep1) 
```

After removing the lowest numbers in rep 2 vector, I want to correlate the rep1 and rep2 vectors and perform some other minor arithmetic functions and append the results to another (length initialized) dataframe. For now, I'm doing this with loops similar to this pseudo code:

```
for subj in subjs:
  for item in items:
     while mean(rep2) > mean(rep1)*0.5:
       rep2 = replace(lowest(rep2),0)
     newDataFrame[i] = correl(rep1,rep2) 
```

Doing this with loops seems really inefficient; in R, is there a more efficient way to find and replace the lowest values in a list/vector until the means are less than or equal to a value that depends on that specific item? And what's the best way to append correlations and other results to other dataframes?

**Additional info:**

```
>dput(df)
>structure(list(subj = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 
 2L), .Label = c("s1", "s2"), class = "factor"), item = c(1L, 
 1L, 2L, 2L, 1L, 1L, 2L, 2L), rep = c(1L, 2L, 1L, 2L, 1L, 2L, 
 1L, 2L), vec = list(c(2, 1, 4, 5, 8, 4, 7), c(1, 1, 3, 4, 7, 
 5, 3), c(6, 5, 4, 1, 2, 5, 5), c(4, 4, 4, 0, 1, 4, 3), c(4, 6, 
 8, 7, 7, 5, 8), c(2, 5, 4, 5, 8, 1, 4), c(9, 3, 2, 6, 6, 8, 5
 ), c(7, 1, 2, 3, 2, 7, 3))), .Names = c("subj", "item", "rep", 
 "vec"), row.names = c(NA, -8L), class = "data.frame") 
```

I want this dataframe as the output (with rep1 vs. rep2 correlation and rep1 vs new rep2 correlation).

```
subj item origCorrel newCorrel
s1 1 .80 .51
s1 2 .93 .34
s2 1 .56 .40
s2 2 .86 .79 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:09:45.717

摆脱循环的典型策略是将子集数据上的所有计算都放入它们自己的函数中，然后在`aggregate`or函数中调用该`apply`函数。

```
two.cors=function(x,ratio=.5) {
  rep1=unlist(x[1,][['vec']])
  rep2=unlist(x[2,][['vec']])
  orig.cor=cor(rep1,rep2)
     while(mean(rep2) > mean(rep1)*ratio) {
   rep2[    which(rep2==min(rep2[which(!rep2==0)]))]=0
    }
  c(orig.cor,wierd.cor=cor(rep1,rep2))
} 
```

我想使用 daply 所以 get `plyr`，可以使用聚合或基本`*apply`函数

```
library(plyr) 
```

然后在您的数据集上调用该函数

```
 daply(df,c("subj","item"), .fun=function(x) two.cors(x,ratio=.4) ) 
```

这个输出可以重新格式化，但我把它留给你，因为我认为你需要额外的统计`two.cors`数据

# java - 如何为我的 servlet 缓存内容？

> ID：11125132
> 
> 赞同：0
> 
> 时间：2012-06-20T17:41:03.153
> 
> 标签：java, spring, google-app-engine, caching, servlets

我正在使用 Spring 3.1 开发在 Google App Engine 上运行的 Web 服务 servlet，由于我对这个游戏很陌生，我根本不知道我应该如何缓存东西。在 servlet 的生命周期内，我似乎可以在很多地方放置要维护的东西：

1.  应用程序上下文。在这里定义 bean 可以让我轻松地将它们注入到我的代码中。这似乎是最简单的解决方案，只需将我的 bean 范围设置为单例。
2.  Servlet 上下文。为此，当我的 servlet 启动时，我可以通过抓取它的实例并将其放入 ServletContext 中，然后执行`setAttribute()`.
3.  内存缓存。我还没有研究这么多，但我想我会得到一个缓存实例，然后像 ServletContext 一样将一个对象推入其中。

我很好奇的具体案例是创建用户帐户。我想保留所有用户 ID 的 HashSet，以便我可以检查请求的用户 ID 是否已在使用中。

除了上面的具体情况，包括使用每种不同技术的情况，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:52:21.353

在您的特定情况下，我建议您使用持久存储，例如数据存储或云 sql（您可以[在此处](https://developers.google.com/appengine/docs/java/datastore/)查看所有替代方案）。

Memcache 不是一个选项，因为您无法控制存储了多少元素。并且任何应用程序上下文也不是解决方案，因为实例实际上在不同的数据中心被多次加载和重新加载。

[另请注意，AppEngine 通过Users Service](https://developers.google.com/appengine/docs/java/users/)提供对使用 Google Accounts 或 OpenId 的支持。

# c# - Computing Hash while saving a file?

> ID：11125135
> 
> 赞同：7
> 
> 时间：2012-06-20T17:41:10.797
> 
> 标签：c#, hash

I have an `inputStream` that I want to use to compute a hash and save the file to disk. I would like to know how to do that efficiently. Should I use some task to do that concurrently, should I duplicate the stream pass to two streams, one for the the `saveFile` method and one for the`computeHash` method, or should I do something else?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:41:16.950

What about using a hash algorithms that operate on a block level? You can add the block to the hash (using the TransformBlock) and subsequently write the block to the file foreach block in the stream.

Untested rough shot:

```
using System.IO;
using System.Security.Cryptography;

...

public byte[] HashedFileWrite(string filename, Stream input)
{
    var hash_algorithm = MD5.Create();

    using(var file = File.OpenWrite(filename))
    {
        byte[] buffer = new byte[4096];
        int read = 0;

        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            hash_algorithm.TransformBlock(buffer, 0, read, null, 0);
            file.Write(buffer, 0, read);
        }

        hash_algorithm.TransformFinalBlock(buffer, 0, read);
    }

    return hash_algorithm.Hash;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-14T14:55:18.317

此方法将使用链式流复制和散列。

```
private static byte[] CopyAndHash(string source, string target)
{
    using (var sha512 = SHA512.Create())
    {
        using (var targetStream = File.OpenWrite(target))
        using (var cryptoStream = new CryptoStream(targetStream, sha512, CryptoStreamMode.Write))
        using (var sourceStream = File.OpenRead(source))
        {
            sourceStream.CopyTo(targetStream);
        }

        return sha512.Hash;
    }
} 
```

有关完整示例，包括取消和进度报告，请参阅[https://gist.github.com/dhcgn/da1637277d9456db9523a96a0a34da78](https://gist.github.com/dhcgn/da1637277d9456db9523a96a0a34da78)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:28:53.880

这可能不是最好的选择，但我会选择`Stream`后代/包装器，它可以直接将文件写入磁盘。

所以：

*   从获得`Stream`
*   有一个这样的成员`Stream _inner;`将是要写入的目标流
*   实施`Write()`和所有相关的东西
*   在`Write()`散列数据块并调用`_inner.Write()`

使用示例

```
Stream s = File.Open("infile.dat");
Stream out = File.Create("outfile.dat");
HashWrapStream hasher = new HashWrapStream(out);
byte[] buffer=new byte[1024];
int read = 0;
while ((read=s.Read(buffer)!=0) 
{
    hasher.Write(buffer);
}
long hash=hasher.GetComputedHash(); // get actual hash
hasher.Dispose();
s.Dispose(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T14:35:05.203

这是我的解决方案，它将结构数组（ticks 变量）写入 csv 文件（使用 CsvHelper nuget 包），然后使用后缀 .sha256 创建用于校验和的哈希

我通过将 csv 写入 memoryStream，然后将内存流写入磁盘，然后将 memorystream 传递给哈希算法来做到这一点。

该解决方案将整个文件保留为内存流。除了会使您耗尽内存的数 GB 文件之外，一切都很好。如果我不得不再次这样做，我可能会尝试使用 CryptoStream 方法，但这对于我可预见的目的来说已经足够了。

我已经通过第 3 方工具验证了哈希是有效的。

这是代码：

```
//var ticks = **some_array_you_want_to_write_as_csv**

using (var memoryStream = new System.IO.MemoryStream())
            {
                using (var textWriter = new System.IO.StreamWriter(memoryStream))
                {
                    using (var csv = new CsvHelper.CsvWriter(textWriter))
                    {
                        csv.Configuration.DetectColumnCountChanges = true; //error checking
                        csv.Configuration.RegisterClassMap<TickDataClassMap>();
                        csv.WriteRecords(ticks);

                        textWriter.Flush();

                        //write to disk
                        using (var fileStream = new System.IO.FileStream(targetFileName, System.IO.FileMode.Create))
                        {
                            memoryStream.Position = 0;
                            memoryStream.CopyTo(fileStream);

                        }

                        //write sha256 hash, ensuring that the file was properly written
                        using (var sha256 = System.Security.Cryptography.SHA256.Create())
                        {
                            memoryStream.Position = 0;
                            var hash = sha256.ComputeHash(memoryStream);
                            using (var reader = System.IO.File.OpenRead(targetFileName))
                            {
                                System.IO.File.WriteAllText(targetFileName + ".sha256", hash.ConvertByteArrayToHexString());
                            }
                        }

                    }

                }
            } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T18:17:37.120

您需要将流的字节填充到 a`byte[]`中以便对它们进行哈希处理。

# vhdl - 如何防止 Xilinx XST 从我的设计中合并网络？

> ID：11125142
> 
> 赞同：3
> 
> 时间：2012-06-20T17:41:41.553
> 
> 标签：vhdl, verilog, xilinx

我正在询问并回答这个问题，以便将来我可以再次找到它......

我如何防止 XST 将两个逻辑等效的网络合并为一个（这通常是节省资源的好主意，但从时序视图来看可能不是一个好主意）？

我有一个带有 2 个计数器的设计，它们由相同的 clk 驱动。XST 将计数器的最低位合并为一个计数器，但这是一个问题，因为在设计中，由于 IOB 布局限制，需要将这些计数器分开。我需要计数器（特别是计数器的最低位）是不同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:43:32.080

您需要在 RTL 中的网络上设置 2 个约束。检查您的网络的综合报告，以确保 XST 符合您的要求。

在 Verilog 中

```
(* equivalent_register_removal="no" *)
(* keep="true" *)
reg  signal_name ; 
```

在 VHDL 中

```
signal signal_name  : std_logic;
attribute equivalent_register_removal: string;   
attribute equivalent_register_removal of signal_name : signal is "no";
attribute keep:string;
attribute keep of signal_name :signal is "true"; 
```

# sql - Jquery.ajax 从数据库中检索数据

> ID：11125144
> 
> 赞同：0
> 
> 时间：2012-06-20T17:41:43.970
> 
> 标签：sql, asp.net-mvc-3

我正在创建 MVC3 站点并在其中使用分页（使用 PagedList；）来显示一堆数据。我有一个存储过程，每次调用可以获得超过 2000 行。

我使用 AJAX 和 JQUERY 来检索数据（`$.ajax`在 jquery 中调用）并对控制器中检索到的数据进行分页。所以我从存储过程中取回 2000 行数据并在控制器中对它们进行分页并显示 10 行数据。但是当我点击“下一个”/“上一个”链接时，控制器再次调用相同的存储过程并检索另外 2000 行，并在基于页码的控制器中显示数据。所以每次它获取 2000 行。

我在这里没有使用任何包装类。直接从控制器调用存储过程。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:45:51.267

您将不得不修改存储过程，以便将当前页码和要返回的记录数作为参数。这样分页将直接在 SQL Server 上完成，如果您担心效率，这是唯一正确的分页方法，因为它可以避免您从数据库中获取所有记录并在客户端上对它们进行切片。

# readability - 是否应该尽可能地压缩他们的代码？

> ID：11125145
> 
> 赞同：0
> 
> 时间：2012-06-20T17:41:45.517
> 
> 标签：readability, performance

编程新手，我持有（自我强加的）概念，即（代码）行数越少越好。因此，在编写某些东西时，我不是为片段使用单独的变量，而是将所有可以嵌套的内容都嵌套到一行中。例如：

```
preg_match('~><a href=~', substr(file_get_contents($match[1])), strpos($match[1], "help")), $match_rating) 
```

将上面的行分成单独的变量块是否更专业/通常更可取，使其看起来更像：

```
 preg_match($regExp, $bigString, $matches) 
```

..每个变量/片段都在上面用自己的行（和变量）定义？

我想知道这是否真的更好或更有效，因为它似乎会使其他人难以阅读和破译它。我意识到这可能是个人喜好类型的交易，但是否有一个普遍持有的（专业）标准来说明倾向于哪一方？

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:48:37.687

您的首要目标应该是生成可读的代码，清楚地说明您的意图（使用常见的成语）。

您的第二个目标应该是确保您的程序按预期工作（牢记目标 1）。

如果您实现了第一个目标并且发现存在性能/内存问题，*那么*您需要考虑如何使代码更高效。如果你到了这一部分，第一步是衡量问题出在哪里；然后修复那个部分（可能偏离上面的目标 1）——如果仍然存在性能/内存问题，请冲洗并重复。

在您的特定示例中，将部分表达式存储在变量中通常是有益的（例如，您可以在调试器中轻松检查它们或在调试时将它们打印出来）。如果你有一个不错的编译器，这不会对效率产生太大影响（如果需要，编译器可以优化你的代码）。

此外，最好保持行短，以便于阅读。您的第一个代码示例应该 - 至少 - 分成多行（即使保留一个表达式）

如果您使用变量来存储部分表达式结果，请选择指示该变量角色的名称——如果您可以使用多个 reg.ex，请选择一个名称来指示哪个是。这样，您将帮助您的读者更好地理解您的意图

*注意*：1) 和 2) 的排序取决于口味，但如果你追求“正确性”而不考虑“可读性”，你会发现自己难以理解，因此难以调试和难以维护代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:51:02.607

我认为最重要的（在大多数情况下）是您的代码是可读和可维护的。所以，如果你认为每个人都会很好地理解你在做什么，没有任何问题，那就顺其自然吧。

我个人仅在需要在其他地方重用它们时使用变量，或者当表达式非常大并且没有它们变得难以阅读时。它们也可以充当“标签”，帮助理解代码块是什么，或者做什么（因此不需要注释）。

但是为每件小事创建一个变量并不好，它会在你的代码中添加不必要的行。在您的某些情况下，我不会使用它们。

关于效率......创建变量本身并不是很消耗CPU，在大多数情况下，您只是创建对内存中已经存在的对象的引用，并且引用不会占用太多空间（如果我错了，请纠正我...）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:46:29.400

我不同意更少的代码行更好。如果不熟悉您的问题领域的人查看您的代码，他们是否能够理解它而无需先深入研究一堆不同的快捷功能？

如果稍后您需要进行优化，那么“工作”的完成位置也会更加清晰。循环依赖不容易被编译器优化，但很容易看出你是否编写了适用于数组的函数，而不是保存值的结构/类的数组，尽管显然直接使用数组你会有更多的代码比如果你通过指针误导或类似的东西模糊了计算。

至于您的具体示例，我认为使用变量声明来保存值是完全可以接受的，只要我可以进入 preg_match 并准确说明传递给函数的值正在做什么。如果您在更改值的情况下重复调用 preg_match ，您将特别希望执行第二种方法，因此您不必为每个函数调用进行初始化。

# android - Android ListView 返回 Null

> ID：11125147
> 
> 赞同：0
> 
> 时间：2012-06-20T17:42:04.427
> 
> 标签：android, listview, android-widget, android-activity

我正在设置一个简单的列表视图，还没有填充真实数据。但是，当尝试运行测试时，我每次都会得到一个空指针异常。我无法弄清楚是什么导致了问题。错误日志抱怨 setLayoutParams。这是我的代码：

```
public class Groups extends Activity {

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.groups_listviews);

        ListView lView = (ListView)findViewById(R.id.list_view_1);
        lView.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT, R.layout.groups_listviews_row));
        lView.setCacheColorHint(0);
        lView.setAdapter(null);
        lView.setOnItemClickListener(new OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
            }
        });
    } 
```

日志猫：

```
06-20 11:03:27.044: D/dalvikvm(3641): GC_EXTERNAL_ALLOC freed 64K, 43% free 3080K/5379K, external 2357K/2773K, paused 81ms
06-20 11:03:28.388: D/dalvikvm(3641): GC_EXTERNAL_ALLOC freed 6K, 43% free 3096K/5379K, external 4457K/4816K, paused 28ms
06-20 11:03:28.442: D/AndroidRuntime(3641): Shutting down VM
06-20 11:03:28.442: W/dalvikvm(3641): threadid=1: thread exiting with uncaught exception (group=0x40018560)
06-20 11:03:28.442: E/AndroidRuntime(3641): FATAL EXCEPTION: main
06-20 11:03:28.442: E/AndroidRuntime(3641): java.lang.RuntimeException: Unable to start activity ComponentInfo{com/com.main.Groups}: java.lang.NullPointerException
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.ActivityThread.access$1500(ActivityThread.java:124)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.os.Looper.loop(Looper.java:130)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.ActivityThread.main(ActivityThread.java:3806)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at java.lang.reflect.Method.invokeNative(Native Method)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at java.lang.reflect.Method.invoke(Method.java:507)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at dalvik.system.NativeStart.main(Native Method)
06-20 11:03:28.442: E/AndroidRuntime(3641): Caused by: java.lang.NullPointerException
06-20 11:03:28.442: E/AndroidRuntime(3641):     at com.main.Groups.onCreate(Groups.java:23)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-20 11:03:28.442: E/AndroidRuntime(3641):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
06-20 11:03:28.442: E/AndroidRuntime(3641):     ... 11 more 
```

答：我正在访问错误布局文件（list_view_1）的列表视图，感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:45:41.043

您正在将 a 传递`null`给您的`setAdapter()`方法，这将导致`NullPointerException`.

```
lView.setAdapter(null); 
```

A[`setAdapter()`](http://developer.android.com/reference/android/widget/ListView.html#setAdapter%28android.widget.ListAdapter%29)需要一个有效`ListAdapter`的参数。

[这是](http://www.vogella.com/articles/AndroidListView/article.html#listview_adapterintro)一个例子。

如果您确实需要一个空的 ListView，只需将 Adapter 上的数据集设置为空/null，而不是将适配器设置为 null。

* * *

编辑：

如果这不会导致问题，那么唯一可以抛出 a 的其他组件`NullPointerException`可能是您的`ListView`.

```
ListView lView = (ListView)findViewById(R.id.list_view_1); 
```

`ListView`检查您的 xml 中是否确实存在该 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:48:00.173

如果错误抱怨 setLayoutParams，通常它是 null 的方法的接收者（又名 ListView）。

我会检查是否

```
ListView lView = (ListView)findViewById(R.id.list_view_1); 
```

返回空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:22:17.243

我想我得到了错误。用于`new FrameLayout.LayoutParams(width, height, gravity)`而不是指定 Gravity 的参数是指定某种布局。

使用 int 更改最后一个参数以指定 Gravity（例如`Gravity.CENTER`），您的问题可能会得到解决。

# asp.net - send data from list to sharepoint application page

> ID：11125148
> 
> 赞同：0
> 
> 时间：2012-06-20T17:42:08.590
> 
> 标签：asp.net, sharepoint

is there any way to connect a SharePoint application page to a list in the SharePoint to save data inside form (in application page) to the list in the SharePoint i need to know it i can make connection code in the application page to connect to the list or if there is another way to do that

this is my code

```
 <asp:Content ID="Main" ContentPlaceHolderID="PlaceHolderMain" runat="server">
<input type="text" id="txta"/> <input type="text" id="txtb" /> 
<textarea id="txtarea" cols="10" rows="2">Text area</textarea> 
<input type="submit" /> </form>
 </asp:Content>
 <asp:Content ID="PageTitle" ContentPlaceHolderID="PlaceHolderPageTitle" runat="server"> Application Page </asp:Content> 
```

i need to write a code to add the information in this form ,when user insert his information and click submit data sent to share point list

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:20:47.463

首先，我会将您的表单输入更新为服务器控件，以便您可以从代码隐藏文件中轻松引用它们。然后在您后面的代码中，您将使用以下代码：

```
using (SPSite oSiteCollection = new SPSite("http://Site_Name"))
{
    using (SPWeb oWebsiteRoot = oSiteCollection.OpenWeb("/"))
    {
        SPList oList = oWebsiteRoot.Lists["Tasks"];

        SPListItem oListItem = oList.Items.Add();
        oListItem["Title"] = txtArea.Text;
        oListItem.Update();
    }
} 
```

# ruby - 循环中的 Ruby 奇怪的相等性检查'-'[0]

> ID：11125151
> 
> 赞同：0
> 
> 时间：2012-06-20T17:42:14.683
> 
> 标签：ruby

我真的无法理解下面的代码是如何工作的......

```
options.each { |p|  
  如果 p[0] == '-'[0]  
    休息  
  结尾...
```

它真的检查这个字符串吗？“-[0]”？？还是我错过了什么？
对不起这个愚蠢的问题，但我的思想现在被封锁了......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:48:24.860

在 Ruby 1.8 或更低版本中`'-'[0]`将为您提供 45，这是字符的 ASCII 值`-`。所以它所做的是检查是否`p[0]`等于 45。

在 Ruby 1.9 中，`'-'[0]`会给你`'-'`，所以`String#ord`如果你想要 ASCII 值，建议使用：

```
if p[0] == '-'.ord 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:05:22.820

比较看起来是针对 ruby​​ 1.8 和 1.9 版本之间不同的 string[index] 语义的解决方法。@robbrit 描述了这两者之间的不同行为。由于比较的左侧和右侧都使用 [0] 来获取字符串的第一个字符，因此它们要么都得到 ascii 序数（1.8），要么都得到单个字符长度的字符串（1.9），因此有一个在任一版本中进行有效比较。解决此行为差异的另一个常见构造是使用范围下标在任一版本的 ruby​​ 中获取单字符字符串，例如：

```
str[0..0] == '-' 
```

# javascript - JavaScript If/Else 条件和比较 - 差异

> ID：11125154
> 
> 赞同：3
> 
> 时间：2012-06-20T17:42:24.780
> 
> 标签：javascript, casting, comparison, boolean, conditional-statements

好的，这是我的简短问题：

我知道`===`and`!==`运算符将比较类型然后是值，`==`并且`!=`会转换类型然后只比较值。

`if(myVar)`和怎么样`if(!myVar)`？

`if(myVar == true)`和的行为有什么不同`if(myVar == false)`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:45:25.823

是，有一点不同。例如：

```
if('true' == true) {
    alert("This doesn't happen");
}

if('true') {
    alert("But this does happen.");
} 
```

原因？它们都转换为`number`s 以进行比较。`'true'`转换为`NaN`并`true`转换为`1`。

避免这种愚蠢，永远不要写`== true`or `== false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:48:39.543

是，有一点不同。正如您已经提到的，如果您将 value 与 进行比较，则会`==`发生*类型转换*。

如果值的类型不同，它们*都*将被转换为*字符串*或*数字*。如果其中一个值是*布尔值*而另一个不是，则两个值都将转换为*数字*。

比较算法在规范的[第 11.9.3 节中](http://es5.github.com/#x11.9.3)定义。重要的步骤在这里：

> 7\. 如果 Type(y) 为 Boolean，则返回比较结果`x == ToNumber(y)`。

所以`true`先转换为数字，然后`myVar`再转换为数字。

* * *

如果您只有`if(myVar)`，那么[该值将转换为 boolean](http://es5.github.com/#x12.5)：

> 2.如果`ToBoolean(GetValue(exprRef))`是真的，那么

* * *

[`ToNumber` *^([spec])*](http://es5.github.com/#x9.3)和[`ToBoolean` *^([spec])*](http://es5.github.com/#x9.2)可以返回非常不同的结果。

* * *

**注意**：如果实际上是一个布尔值，那么和`myVar`之间没有区别。`if(myVar == true)``if(myVar)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:57:04.410

是的，两者差别 `if(myVar) and if(!myVar)`很大`if(myVar == true) and if(myVar == false)`

在`if(myVar) and if(!myVar)`中，!myVar 将为每个“假”值返回真（空字符串、0、null、假、未定义、NaN）

while`if(myVar == true)`并`if(myVar == false)`检查 myVar 值是真还是假。即使 myVar 值为 NULL、NaN 或未定义的 0，它也会比较

`if(NULL == true)`

加起来 ：

```
NOT operator'!' converts a value into its opposite boolean equivalent. This is different than actually comparing two values.
And if you compare values with '==', JavaScript does type conversion which can lead to unexpected behavior (like undefined == null). 
```

# ruby-on-rails - rspec-rails + rabl 渲染视图，即使我不希望它们被渲染？

> ID：11125157
> 
> 赞同：2
> 
> 时间：2012-06-20T17:42:31.473
> 
> 标签：ruby-on-rails, rspec, rspec-rails, rabl

我正在使用 rabl 0.6.13、rspec-rails 2.10.1 和 rails 3.2.6。

我正在尝试单独指定我的控制器，但由于某种原因，我的 rabl 模板在我在控制器规范中使用的模拟中向我抛出了各种未定义的方法异常。我*没有*使用`render_views`. `render_views`我认为除非您在控制器规范中指定，否则 rspec 不会处理视图。我已经运行调试器以确保在块 rspec-rails 插入之前`render_views?`评估为`false`。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:35:28.710

啊，所以我想通了！这些评论中概述了它： - [https://github.com/nesquena/rabl/issues/37#issuecomment-6474467](https://github.com/nesquena/rabl/issues/37#issuecomment-6474467) - [https://github.com/rspec/rspec-rails/issues/565#issuecomment-6474362](https://github.com/rspec/rspec-rails/issues/565#issuecomment-6474362)

```
def self.call(template)
  source = if template.source.empty?
    File.read(template.identifier)
  else # use source
    template.source
  end

  %{ ::Rabl::Engine.new(#{source.inspect}).
      render(self, assigns.merge(local_assigns)) }
end # call 
```

rspec-rails 存根模板以获得空白源（而不是存根整个渲染过程，以便 rails 正确处理格式/mime-types/等），并且 rabl 处理程序看到空白源并决定读取文件系统。因此，无论是 rabl 还是 rspec-rails 都需要稍作调整才能使其正常工作。现在我已经修补了 rspec-rails：

```
class EmptyTemplatePathSetDecorator < ::ActionView::Resolver
  attr_reader :original_path_set

  def initialize(original_path_set)
    @original_path_set = original_path_set
  end

  # @api private
  def find_all(*args)
    original_path_set.find_all(*args).collect do |template|
      ::ActionView::Template.new(
        " ", # <======================== this is not "empty"
        template.identifier,
        template.handler,
        {
          :virtual_path => template.virtual_path,
          :format => template.formats
        }
      )
    end
  end
end 
```

# c# - 防止 Windows 服务管理器停止服务 c#

> ID：11125158
> 
> 赞同：6
> 
> 时间：2012-06-20T17:42:34.053
> 
> 标签：c#, .net, windows-services, wmi

我有一个带有我自己的注册处理程序的自定义 Windows 服务，当它收到来自服务管理器的停止命令时，如何防止它停止？我在服务和 GUI 之间建立了管道通信，我只想从 GUI 停止它，当我向 Windows 服务发送消息“停止”时，而不是在我尝试从 Windows 服务管理器停止它时。我正在使用 C#

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T17:48:04.213

这回答了你的问题了吗？

[http://bytes.com/topic/c-sharp/answers/444965-prevent-service-stopping](http://bytes.com/topic/c-sharp/answers/444965-prevent-service-stopping)

*将 CanStop 属性设置为 false。然后，您将需要一个用户可以用来请求停止的应用程序。然后，此应用程序将与您的服务通信（可能通过远程处理），如果条件允许，则自行停止。您应该能够通过将“CanStop”动态设置为 true，然后使用 ServiceController 类连接到自己并发出“Stop”命令来做到这一点。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:28:25.297

作为替代方案，您可以简单地保护服务设置（修改服务 DACL），以便只有特殊用户帐户（可能还有 SYSTEM）有权在安装期间停止服务并安装此特殊本地用户帐户。

然后，您的控制应用程序可以使用具有此特殊用户安全令牌的标准服务控制管理器功能，并且一切都将按预期工作，而无需执行任何异常操作。

# opengl - 使用 Image api 重新编译着色器的致命错误

> ID：11125167
> 
> 赞同：0
> 
> 时间：2012-06-20T17:42:55.680
> 
> 标签：opengl, glsl, opengl-4

我收到错误

```
fatal error C9999: *** exception during compilation *** 
```

例如，每当我尝试重新编译使用 Image api 进行纹理写入的 GLSL 着色器时

```
layout(binding = 0) coherent uniform image3D Voxels; 
```

但是，初始编译工作正常。有没有其他人遇到过这种情况，有没有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:03:22.927

好的，我想出了一个解决方法。本质上，我不得不让我的重新编译过程更具破坏性。

首先，（现在）有必要将所有着色器（vert、frag、geom 等）从着色器程序中分离出来。

其次，在重新编译单个着色器时，（现在）需要删除并重新创建一个新的着色器 ID

```
glDeleteShader(shader_id);
shader_id = glCreateShader(GL_FRAGMENT_SHADER); 
```

然后您可以重新加载着色器源，之后您可以安全地重新附加，或者更确切地说将新着色器附加到您的着色器程序，重新链接所有内容，希望一切正常。

# delphi - 样式化菜单栏项（Firemonkey）

> ID：11125169
> 
> 赞同：1
> 
> 时间：2012-06-20T17:43:10.347
> 
> 标签：delphi, delphi-xe2, styling, firemonkey

我似乎无法弄清楚如何更改 tmenuitem 对象的字体。我添加了一个菜单栏，并向其中添加了一个项目。我为菜单项创建了一个自定义样式。我可以更改背景颜色和笔触颜色等，但我不能更改文本部分的字体。如果我更改字体（大小或名称或其他任何内容），它会显示在样式编辑器中，但不会显示在表单设计器中或运行时。似乎字体以某种方式默认为某种东西。有没有其他人能够做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:14:45.887

FireMonkey 几乎会覆盖您为样式中的字体（字体、大小、样式）所做的任何设置。AFAIK 您想要进行的任何字体更改都必须在运行时完成。对于 TMenuItem，这意味着在创建菜单项后手动设置 Font 属性。

但是（我从来没有玩过这个）我看到人们说他们可以通过在创建组件后设置 StyleLookup 来更改字体。

您可能希望挂接到 OnApplyStyleLookup 事件以进行这些更新。

# ruby-on-rails-3.2 - Rails 3.2.6 错误消息（Windows 安装）

> ID：11125170
> 
> 赞同：0
> 
> 时间：2012-06-20T17:43:14.167
> 
> 标签：ruby-on-rails-3.2

我在我的 Windows 机器上安装了最新版本的 rails，当我尝试创建一个新应用程序时，我收到以下错误消息任何想法：

C:\Sites>rails new apexa C:/Ruby/lib/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/commands/application.rb: 12:in `expand_path': non-absolute home (ArgumentError) from C:/Ruby/lib/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/commands/application.rb:12 from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in`gem_original_require' 来自 C:/Ruby/ lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require' from C:/Ruby/lib/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/cli.rb:15 from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in`gem_original_require' 来自 C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require' from C:/Ruby/lib/ruby/gems/1.8/gems/railties-3.2.6/bin/rails:7 from C:/Ruby/bin/rails:19:in`load' 来自 C:/Ruby/垃圾箱/导轨：19

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T20:29:11.440

我有一个类似的问题，并在[这里](http://royontechnology.blogspot.com/2011_02_01_archive.html)找到了答案：

简而言之，重置您的 %HOME% 环境变量（至少在同一命令提示符下）并重试。

```
set HOME=
set HOMEDRIVE=
set HOMEPATH=
set HOMESHARE= 
```

# algorithm - 返回亚马逊搜索项目的排序算法

> ID：11125180
> 
> 赞同：1
> 
> 时间：2012-06-20T17:44:00.830
> 
> 标签：algorithm, search-engine, ranking, sorting

我想知道当您在亚马逊中输入商品搜索时，算法会如何工作。我猜越受欢迎的卖家可能排名越高，而且可能售出的产品数量越多，排名就越高。但就是这样吗？当来自不同国家的用户输入相同的查询时，肯定会观察到不同的结果，对吧？影响这种排名的因素有哪些？在实现排名时使用了哪些技术或算法？

谢谢！

# java - 有没有一种方法可以将字符串数组变量用作JAVA中另一个二维数组的索引？

> ID：11125183
> 
> 赞同：0
> 
> 时间：2012-06-20T17:44:20.023
> 
> 标签：java

我已经`string array d={monday,tuesday,wednesday}`在 J​​AVA 中声明了 a。我想将其`"d"`用作另一个二维数组中的索引`e[d][t]`，这样当我这样做时`d++`，星期一就变成了星期二……这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:47:22.683

看来您正在寻找

```
List<String> indexes = new ArrayList<String>();
Map<String, String> map=  new HashMap<String, String>();
//iterate through each keys
for(String index: indexes){
  String value  = map.get(index);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:28:28.397

好吧，你可以使用枚举

```
public enum FOO
{
monday(0),tuesday(1),...;
private int index;
private FOO(int index){ this.index = index; }
public int getIndex(){ return index; }
} 
```

这样，你就可以做到

```
FOO d = FOO.monday;
some_array[d.getIndex()][some_index]; 
```

你还可以实现某种函数 getNext()，让你第二天进入你的枚举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:16:29.827

此枚举映射是用有意义的数字顺序表示您的字符串值的最佳方式。但是，我仍然会使用哈希映射实现。它看起来像

```
HashMap<Weekday, ArrayList> = ... 
```

然后你仍然可以轻松地循环一周中的所有日子来获得你的价值观。

不过要小心。您并没有具体说明这些天正在访问什么样的值。大概是更多的字符串。你试图代表或完成什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:58:14.100

如果它是 C++，您可以重写`++`运算符来增加数组中的元素，但在 Java 中是不可能的（根据我的第一个视图）。

仍在搜索，保持线程打开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:06:00.710

好吧，您应该更好地使用哈希图来使设计更清晰。可能的解决方案如下。

```
List<Integer> indices = new ArrayList<Integer>();
Map<Integer, String> map=  new HashMap<Integer, String>();

Integer i= 0;

while(some condition){

   String str= map.get(i++);
} 
```

# cordova - PhoneGap 相机 - 拍照后无法按接受按钮

> ID：11125193
> 
> 赞同：1
> 
> 时间：2012-06-20T17:45:10.003
> 
> 标签：cordova, android-camera

我有一个非常奇怪的问题。当我使用 eclipse 作为 android 应用程序运行它时，不会发生这个问题（它仍然在我的手机上运行（调试？），而不是虚拟设备）。当我将应用程序导出到 apk 文件并将其安装在手机上时，就会发生这种情况。问题是我用相机拍照后无法按下接受按钮。当我按下接受按钮时，什么都没有发生，没有错误，没有强制关闭，什么也没有发生。

```
navigator.camera.getPicture(c_onSuccess, c_onFail, { quality: 90,
    destinationType: Camera.DestinationType.DATA_URL
}); 
```

权限

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

# python - Python - Flask - 在默认浏览器中打开网页

> ID：11125196
> 
> 赞同：11
> 
> 时间：2012-06-20T17:45:13.267
> 
> 标签：python, flask

我正在用 Python 做一个小项目。它分为两部分。

第一部分负责抓取网络并提取一些信息并将它们插入数据库。

第二部分负责使用数据库呈现这些信息。两个部分共享数据库。在第二部分中，我使用 Flask 框架将信息显示为带有一些格式、样式等的 html，以使其看起来更清晰。

两个部分的源文件都在同一个包中，但是要正确运行这个程序，用户必须像这样分别运行爬虫和结果展示器：

**蟒蛇爬虫.py**

进而

**蟒蛇演示者.py**

一切都很好，只是除了一件事。我的演示者要做的是创建 html 格式的结果并在用户的默认浏览器中打开带有结果的页面，但它总是打开两次，可能是由于存在 run() 方法，它在新线程中启动 Flask 和对我来说，事情变得多云。我不知道我应该怎么做才能让我的 Presenter.py 在运行后只打开一个选项卡/窗口。

这是我的代码片段：

```
from flask import Flask, render_template
import os
import sqlite3

# configuration
DEBUG = True
DATABASE = os.getcwd() + '/database/database.db'

app = Flask(__name__)
app.config.from_object(__name__)
app.config.from_envvar('CRAWLER_SETTINGS', silent=True)

def connect_db():
    """Returns a new connection to the database."""
    try:      
        conn = sqlite3.connect(app.config['DATABASE'])
    return conn
except sqlite3.Error:
    print 'Unable to connect to the database'
    return False

@app.route('/')
def show_entries():
    u"""Loads pages information and emails from the database and
    inserts results into show_entires template. If there is a database
    problem returns error page.
    """
    conn = connect_db()

    if conn:        
    try:            
        cur = connect_db().cursor()

        results = cur.execute('SELECT url, title, doctype, pagesize FROM pages')    
        pages = [dict(url=row[0], title=row[1].encode('utf-8'), pageType=row[2], pageSize=row[3]) for row in results.fetchall()]   

        results = cur.execute('SELECT url, email from emails')
        emails = {}

        for row in results.fetchall():                
            emails.setdefault(row[0], []).append(row[1])                

        return render_template('show_entries.html', pages=pages, emails=emails)

    except sqlite3.Error, e:
        print ' Exception message %s ' % e
        print 'Could not load data from the database!'
        return render_template('show_error_page.html')

else:
    return render_template('show_error_page.html')        

if __name__ == '__main__':
    url = 'http://127.0.0.1:5000'
    webbrowser.open_new(url)
    app.run() 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-20T19:09:51.880

我一直在 Mac OS X（带有 Safari、Firefox 和 Chrome 浏览器）上使用类似的代码，并且运行良好。猜你可能会遇到 Flask 的自动重载功能。设置`debug=False`，它不会尝试自动重新加载。

其他建议，根据我的经验：

*   考虑随机化您使用的端口，因为快速编辑-运行-测试循环有时会发现操作系统认为端口 5000 仍在使用中。（或者，如果您同时运行代码多次，比如不小心，端口确实仍在使用中。）
*   在启动浏览器请求之前，请给应用程序一点时间来启动。我通过调用`threading.Timer`.

这是我的代码：

```
import random, threading, webbrowser

port = 5000 + random.randint(0, 999)
url = "http://127.0.0.1:{0}".format(port)

threading.Timer(1.25, lambda: webbrowser.open(url) ).start()

app.run(port=port, debug=False) 
```

（如果您愿意，这一切都在`if __name__ == '__main__':`，或者在单独的“启动应用程序”功能中。）

# iphone - 为 UIWebView 设置最大缩放比例

> ID：11125205
> 
> 赞同：3
> 
> 时间：2012-06-20T17:46:07.377
> 
> 标签：iphone, objective-c, xcode

我尝试通过设置 UIWebview 的最大缩放比例

```
 webView.scrollView.maximumZoomScale=2.0;
        webView.scrollView.minimumZoomScale=1.0; 
```

但做不到。如果任何人有任何想法，请告诉..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T06:07:00.337

按照步骤 ：

1）添加静态`const float zoomSc = 3.0`；还要`UIScrollViewDelegate`在`.h`文件中添加

2) `yourWebView.scrollView.delegate = self`;

3）添加下面的scrollView委托方法

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale{

  if (scale > zoomSc)
  {
    scrollView.zoomScale= zoomSc;
  }
} 
```

**编辑**`range`：更改`zoom factor`

`UIWebViewDelegate's`在方法中添加以下这些。

**注意**：不要忘记为`UIWebView`

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
   //restrict zoomscale by adding javascript code
   //make changes to only maximum-scale value as i have set it to 10.0.
   NSString *strJSFunction = [NSString stringWithFormat:@"function increaseMaxZoomFactor(){ var element = document.createElement('meta'); element.name = \"viewport\"; element.content = \"maximum-scale=10.0\"; var head = document.getElementsByTagName('head')[0]; head.appendChild(element); }"];

  [webView stringByEvaluatingJavaScriptFromString:strJSFunction];
  [webView stringByEvaluatingJavaScriptFromString:@"increaseMaxZoomFactor()"];
} 
```

# python - Python中的交错列表

> ID：11125212
> 
> 赞同：25
> 
> 时间：2012-06-20T17:46:28.650
> 
> 标签：python, list

我有两个列表：
`[a, b, c] [d, e, f]`
我想要：
`[a, d, b, e, c, f]`

在 Python 中执行此操作的简单方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-20T17:51:08.533

这是一个使用列表推导的非常简单的方法：

```
>>> lists = [['a', 'b', 'c'], ['d', 'e', 'f']]
>>> [x for t in zip(*lists) for x in t]
['a', 'd', 'b', 'e', 'c', 'f'] 
```

或者，如果您将列表作为单独的变量（如其他答案）：

```
[x for t in zip(list_a, list_b) for x in t] 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-20T17:48:43.153

一种选择是使用`chain.from_iterable()`和的组合`zip()`：

```
# Python 3:
from itertools import chain
list(chain.from_iterable(zip(list_a, list_b)))

# Python 2:
from itertools import chain, izip
list(chain.from_iterable(izip(list_a, list_b))) 
```

**编辑**：正如评论中 sr2222 所指出的，如果列表的长度不同，这将无法正常工作。[在这种情况下，根据所需的语义，您可能希望使用文档配方部分](http://docs.python.org/library/itertools.html#recipes)中的 （更通用的）`roundrobin()` 函数：`itertools`

```
def roundrobin(*iterables):
    "roundrobin('ABC', 'D', 'EF') --> A D E B F C"
    # Recipe credited to George Sakkis
    pending = len(iterables)
    nexts = cycle(iter(it).next for it in iterables)
    while pending:
        try:
            for next in nexts:
                yield next()
        except StopIteration:
            pending -= 1
            nexts = cycle(islice(nexts, pending)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T18:03:11.533

这个仅适用于 python 2.x，但适用于不同长度的列表：

```
[y for x in map(None,lis_a,lis_b) for y in x] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T17:49:43.470

您可以使用内置函数做一些简单的事情：

```
sum(zip(list_a, list_b),()) 
```

# objective-c - 在 C++ 文件中带有 NSDate 的 EXC_BAD_ACCESS，为什么？

> ID：11125214
> 
> 赞同：0
> 
> 时间：2012-06-20T17:46:36.960
> 
> 标签：objective-c, memory-management, memory-leaks, objective-c++

所以，我必须在旧的 .cpp 文件中添加一个功能。它很大。所以用Objective C重写它不是一种选择。相反，我使用 Objective-C 添加了必要的功能（因为我需要很多 NSDate/NSDateFormatter 函数）。它工作得很好。但是，当调用 getter（在我的视图控制器上）时，我收到此错误：EXC_BAD_ACCESS。

这是代码的片段：

```
//.h file  -----------------
// C/C++ headers
#import <Foundation/NSDate.h>
#import <Foundation/NSDateFormatter.h>

namespace MySpace {
    class Session {
        private:
            // C++ stuff
            NSDate * startTime;
        public:
            // C++ stuff
            NSDate * getStartTime();
            Session(NSDate * startTime );
    };
}

// .cpp file -----------------
using namespace MySpace;
Session:Session (NSDate * startTime) {
    // unrelated code
    if (startTime == nil ){
        startTime = [NSDate date];
    }
    setStartTime( startTime);
    // unrelated code
}

void Session::setStartTime( NSDate * startTime){
    this->startTime = [startTime copy];
}

NSDate * Session::getStartTime() {
    return this->startTime; // here I get the EXC_BAD_ACCESS
} 
```

整个项目编译为 Objective-C++ 并启用了 ARC。我相信这个问题是因为ARC释放了成员'startTime'，并且当我调用getter时，它指向nil？

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:08:11.327

试试看：

```
NSDate * Session::getStartTime() {
    if (this == NULL) return nil;
    return this->startTime; // here I get the EXC_BAD_ACCESS
} 
```

更改使 getStartTime 不受 NULL this 指针的影响。

这有帮助吗？如果是这样，那么在某个地方，您正在使用一个悬空的 Session* 指针。

**第2步**

不是那个。那么：

```
@interface MyNSDate: NSDate
@end

@implementation MyNSDate

- (id) init
{
    self = [super init];
    if ( self == nil ) return nil;

    NSLog( @"MyNSDate %@ initialized", self );

    return self;
}

- (void) dealloc
{
    // ARC: no super call
    NSLog( @"MyNSDate %@ deallocated", self );
}

@end 
```

并将您班级中的 NSDate* 替换为 MyNSDate。检查消息，dealloc 中的断点...您应该能够找出日期何时被解除分配，合适与否，或排除该假设。

我脑海中闪过的另一个想法是缺少复制构造器。如果您在 ARC 和非 ARC 编译单元之间复制 Session，它可能会中断。你不应该那样做，但是，它发生了。

```
Session::Session( const Session& rhs )
{
    this->startTime = [rhs.startTime copy];
}

Session& Session::operator=( const Session& rhs )
{
    if ( this->startTime != rhs.startTime )
    {
        this->startTime = [rhs.startTime copy];
    }

    return *this;
} 
```

# perl - Perl 的 system() 会自动转义 Cygwin 中的字符吗？

> ID：11125224
> 
> 赞同：3
> 
> 时间：2012-06-20T17:47:21.740
> 
> 标签：perl, cygwin, system, windows-shell

我有使用 system() 函数调用 robocopy.exe 的 Perl 代码，但它看起来像是在修改参数。我正在使用 Chef，它通过 Cygwin 捆绑 Perl - “这是 perl，为 msys-64int 构建的 v5.8.8”。

我认为 Cygwin 正在转义一些字符，但 system() 不会向我显示它实际传递给 shell 的内容，所以我不知道如何正确格式化调用。

```
my $robocopyCmd = "robocopy.exe /a-:r /r:30 /w:10 c:/folder1 c:/folder2";
print "DEBUG: " . $robocopyCmd . "\n";
system($robocopyCmd); 
```

这是输出。

```
DEBUG: robocopy.exe /a-:r /r:30 /w:10 c:/folder1 c:/folder2

-------------------------------------------------------------------------------
ROBOCOPY     ::     Robust File Copy for Windows     ::     Version XP010
-------------------------------------------------------------------------------

Started : Wed Jun 20 10:33:05 2012

Source - R:\30\
Dest - W:\10\

Files :
Options : /COPY:DAT /A-:R /R:1000000 /W:30

------------------------------------------------------------------------------

ERROR : Invalid Parameter #4 : c:/folder1 
```

当我将调试输出剪切并粘贴到 shell（甚至是 Cygwin shell）中时，它运行得很好。但是，请查看 robocopy 输出，了解它告诉您 Source 和 Dest 的位置。请注意它如何将我的**/r:30**参数更改为**R:\30\**？

似乎某些东西（cygwin 或 perl 或 system()）在将某些字符传递给 shell 之前会自动转义它们。问题是我无法看到它发生了什么变化，所以我不知道如何自定义我的命令才能正常工作！

请注意，如果我使用反引号而不是 system() 函数，则行为完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:49:14.860

```
system($shell_cmd); 
```

永远不会逃避任何事情。能逃出什么？

问题是您试图在 bourne shell 中运行 Windows shell 命令。

```
system($shell_cmd) 
```

简称

```
system('sh', '-c', $shell_cmd) 
```

在 unix 系统上（包括 unix 仿真层，例如 Perl 的 cygwin 构建）。下面的工作吗？

```
system('cmd', '/c', $robocopyCmd); 
```

# java - 在 GridView Android 中查找元素时需要帮助

> ID：11125225
> 
> 赞同：1
> 
> 时间：2012-06-20T17:47:22.527
> 
> 标签：java, android, gridview

所以我有一个gridview，我想在其中找到一个特定的元素。

[网格 http://mytelcoit.com/wp-content/uploads/2010/02/Icon_with_Text.jpg](http://mytelcoit.com/wp-content/uploads/2010/02/Icon_with_Text.jpg)

就像假设如果用户单击配置文件 2，我的应用程序将创建一个新的相对布局，该布局将创建在配置文件 2 的正下方。为了实现这一点，我需要找出网格视图中的哪个元素已被单击。所以你能帮我解决这个问题吗？提前致谢。

我也试过这个解决方案它不起作用，它总是返回相同的视图[http://pastebin.com/aVsWv77G](http://pastebin.com/aVsWv77G)，这是第一个元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:01:08.437

试试这个

```
gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {
                           //Show the item selected
           Toast.makeText(getApplicationContext(),
            ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:50:47.120

**[编辑]** 在更好地理解你的问题之后。为了覆盖一些视图，我会使用 PopupWindow Contols。从下面的示例中，您可以获得屏幕上的位置（相对于父视图中的相对位置），然后使用该信息将 PopupWindow 放置在屏幕上您希望的任何位置。例如，如果（在上面的示例图像中）用户按下“Profile 4”，您可能不希望将新视图放在按钮下方，而是放在上方。PopupWindow 对象使您可以自由地将视图覆盖在屏幕上任何位置的任何布局类型的顶部。在此处查看示例 PopupWindow

[http://www.mobilemancer.com/2011/01/08/popup-window-in-android/](http://www.mobilemancer.com/2011/01/08/popup-window-in-android/)

[android中的弹出窗口](https://stackoverflow.com/questions/5944987/popupwindow-in-android)

**[原创]** 试试这个例子，它展示了如何在每个项目上设置动作监听器，等等......

[http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

# java - 我如何获得像 netbeans 调色板这样的可折叠窗格

> ID：11125231
> 
> 赞同：1
> 
> 时间：2012-06-20T17:47:34.150
> 
> 标签：java, swing, netbeans, panel

我喜欢 netbeans 调色板的风格（窗口 -> 调色板，在创建 gui 时最好看）。我想在我的应用程序中集成一个类似的可折叠面板，但我不知道如何找到这个组件。我猜它不是标准的摆动组件，虽然它看起来有点像 jTree。我戳了一下netbeans框架，但找不到相应的类。

我知道 swingx 的 JXTaskPane，但我真的更喜欢一种简单、干净的方式来隐藏、显示和分组 ui 组件，而不需要花哨的动画不必要地使我的应用程序膨胀。netbeans 调色板看起来很完美。但它怎么叫&我在哪里可以找到它？

# velocity - 速度找不到模板

> ID：11125236
> 
> 赞同：0
> 
> 时间：2012-06-20T17:47:55.400
> 
> 标签：velocity, filepath

我正在尝试启动并运行 Apache Velocity。我的包里有一`TestClass.class`门课。`my.test.package`

```
public class TestClass {
    public static Template getTestTemplate() throws Exception {
        Velocity.init();
        return Velocity.getTemplate("MyTestTemplate.vm");
    } 
} 
```

在同一位置 ( `my.test.package`) 我有`MyTestTemplate.vm`文件。

上面的代码导致抛出异常，说`Unable to find resource 'MyTestTemplate.vm'`. 我不确定问题是什么。Velocity 不会在同一个包中查找文件吗？（注：我原来是在resources文件夹下的文件，但为了测试目的，把它放在同一个文件夹下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:22:04.903

好的，想通了。

所以我想也许 Velocity 正在查看我的`WEB-INF/classes`文件夹。我看了看那里才发现`MyTestTemplate.vm`文件不在那里。结果我需要更新复制资源以包含`.vm`文件的 Ant 脚本。

```
<include name="**/*.vm"/> 
```

然后我需要更新我的配置，以便 Velocity 知道在`classes`文件夹中查找。

```
VelocityEngine velocityEngine = new VelocityEngine();
velocityEngine.setProperty("resource.loader", "class");
velocityEngine.setProperty("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader");
velocityEngine.init(); 
```

然后在拿到模板的时候，只需要在`WEB-INF/classes`part后面提供路径即可。

```
velocityEngine.getTemplate("path/to/resource/MyTestTemplate.vm"); 
```

我确信有一些方法可以让模板脱离文件路径，但我不再关心了；）

# oracle - 从一个过程到另一个过程的参数的变量

> ID：11125240
> 
> 赞同：-1
> 
> 时间：2012-06-20T17:48:05.927
> 
> 标签：oracle, parameters, plsql, package, procedure

使用包，如何将过程中的变量分配传递给另一个过程的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:09:13.653

我不确定您是否想知道全局变量或 OUT 参数的工作原理。下面是使用过程的 OUT 参数的示例。更多关于使用 IN 和 OUT 的信息可以在[这里找到](http://psoug.org/snippet/FUNCTIONS-IN-OUT-parameter_873.htm)

```
create or replace package TEST_PKG
IS
    procedure test(p_input IN NUMBER, p_output OUT NUMBER)
    IS
    BEGIN
        p_output := p_input * p_input;
    END test ;

    procedure testRun
    IS
        v_input NUMBER := 0;
        v_output NUMBER;
    BEGIN
        test(v_input, v_output);
        DBMS_OUTPUT.PUT_LINE('OUTPUT : ' || v_output );
    END test ;
END xyz; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:25:32.287

```
create or replace package xyz
IS
  procedure test 
  IS
   v_temp varchar2(20); --local variable
  BEGIN
    v_temp:=20; --assigning value to a variable

  --if procedure is within the same package,as this example shows ,then call as below  
  test2(v_temp);

  --if procedure is in another package say PQR then call as below,
  --but the procedure should be declared in the specification of the package PQR
  PQR.test2(v_temp);  

  --if procedure is not inside any package ,just a single procedure is there
  --,then call as below
  test2(v_temp);

   END test ;

   procedure test2(p_temp IN varchar2)
   IS
   BEGIN
   --do you processing
   END test2;
 END xyz; 
```

希望这可以帮助

# ruby - 从嵌套哈希中删除特定元素

> ID：11125250
> 
> 赞同：23
> 
> 时间：2012-06-20T17:48:36.190
> 
> 标签：ruby, hash-of-hashes

我正在尝试使用嵌套哈希。我有一副纸牌表示如下：

```
deck_of_cards = {
:hearts => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
            :queen => 10, :king => 10, :ace => 11},
:spades => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
            :queen => 10, :king => 10, :ace => 11},
:clubs => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
            :queen => 10, :king => 10, :ace => 11},
:diamonds => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, 
            :queen => 10, :king => 10, :ace => 11}
} 
```

我的目标是能够从牌组中取出一张特定的牌，并在没有那张牌的情况下归还牌组。任何人都可以帮助我如何遍历哈希并删除像两个俱乐部这样的卡吗？

```
deck_of_cards[:two][:clubs] 
```

此代码可用于删除一副牌，但我不知道如何删除特定牌

```
deck_of_cards.delete_if {|k, v| k == :spades} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-20T18:02:46.107

只需这样做：

```
deck_of_cards[:clubs].delete(:two) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-10T08:53:17.780

您也可以使用这样的点击函数删除元素并返回原始哈希

```
deck_of_cards.tap{|d| 
  d[:hearts].tap{|h| 
    h.delete(:two)
  }
} 
```

这将返回没有 :two 键的 deck_if_cards 哈希

你也可以在一行中完成

```
 deck_of_cards.tap{|d| d[:hearts].tap{|h| h.delete("two")}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-17T16:44:27.447

## 采用`.tap`

```
deck_of_cards.tap{ |deck_of_cards| deck_of_cards[:hearts].delete(:two) }
#=> { 
#     :hearts=>{:three=>3, :four=>4, :five=>5, :six=>6, :seven=>7, :eight=>8, :nine=>9, :ten=>10, :jack=>10, :queen=>10, :king=>10, :ace=>11}, 
#     :spades=>{:two=>2, :three=>3, :four=>4, :five=>5, :six=>6, :seven=>7, :eight=>8, :nine=>9, :ten=>10, :jack=>10, :queen=>10, :king=>10, :ace=>11}, 
#     :clubs=>{:two=>2, :three=>3, :four=>4, :five=>5, :six=>6, :seven=>7, :eight=>8, :nine=>9, :ten=>10, :jack=>10, :queen=>10, :king=>10, :ace=>11}, 
#     :diamonds=>{:two=>2, :three=>3, :four=>4, :five=>5, :six=>6, :seven=>7, :eight=>8, :nine=>9, :ten=>10, :jack=>10, :queen=>10, :king=>10, :ace=>11} 
#   } 
```

具有以优雅的方式返回完整哈希而不是仅删除的值的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T17:59:37.567

你有一个哈希里面有一个哈希，所以你可以这样做：

```
deck_of_cards.each {|k,v| v.delete(:two) if k == :clubs} 
```

您用于`each`遍历键和值，并在块内创建一个条件以删除内部哈希上的特定值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:01:41.700

你必须是这样的：

```
def remove_card deck, suit, number
  # do a deep clone
  new_deck = {}
  deck.each { |k, v| new_deck[k] = v.dup }

  # remove the card
  new_deck[suit] = new_deck[suit].reject { |k, v| k == number }

  new_deck
end 
```

将你的牌组表示为一对数组可能会更好，如下所示：

```
[ [:hearts, :two], [:hearts, :three], ... ] 
```

然后你可以去：

```
def remove_card deck, suit, number
  deck.reject { |(s, n)| n == number and s == suit }
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-19T12:30:02.273

我认为这种方法会为您完成工作

```
def nested_delete(card:, deck:)
  each do |hash_key, hash_value|
    if hash_key.to_s.eql?(deck)
      self[hash_key].delete(card.to_sym)
    end
  end
  self
end 
```

假设你想从套牌“红心”中删除卡片“六”你需要做的就是

```
deck_of_cards.nested_delete(card: 'six', deck: 'hearts') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-22T14:23:23.223

我确实在我的应用程序中将这个问题写为初始化程序，以添加一个调用`delete_nested_key`Hash 对象的方法。它删除哈希的嵌套键。您必须将 key_path 作为数组传递（只是要遍历的键列表以转到要删除的键）。

它似乎工作正常，但我只是写了它，所以它可能有问题。

```
class Hash
  module NestedKeyDeletion
    extend ActiveSupport::Concern

    included do
      def deleted_nested_key!(key_path)
        nested_hash = fetch_most_inner_hash(key_path)
        nested_hash.delete(key_path.last)

        self
      end

      private

      def fetch_most_inner_hash(key_path)
        nested_hash = self

        key_path.each_with_index do |key, index|
          return  nested_hash if index == key_path.size - 1
          nested_hash = nested_hash.fetch(key)
        end
      end
    end
  end
end

Hash.include(Hash::NestedKeyDeletion) 
```

然后你可以像这样使用它：

```
[1] pry(main)> x = { x: { y: 2} }
=> {:x=>{:y=>2}}
[2] pry(main)> x.deleted_nested_key!([:x, :y])
=> {:x=>{}}
[3] pry(main)> 
```

最好的问候，丹尼尔。

# android - Android App Force 从商店打开时关闭

> ID：11125253
> 
> 赞同：2
> 
> 时间：2012-06-20T17:48:38.510
> 
> 标签：android, mobile, titanium, titanium-mobile

我有一个使用 Titanium 的 1.8.2 SDK 创建的 Android 应用程序。我最近将它推向了市场（或 Google Play 商店，或者这些天孩子们称之为的任何东西），并且收到了一些关于应用程序在首次启动时关闭的抱怨。

在几个小时没有看到它之后，我终于发现每次我从 Google Play 中打开已安装的应用程序时......它都会崩溃并且重新打开本身就好了。如果我从应用程序列表或主屏幕打开，它会跳过整个崩溃的剧情并直接打开。

知道会发生什么让打开的上下文对应用程序*是否*打开如此重要吗？这个问题已经困扰了几天了，我似乎无法处理它。

任何见解将不胜感激。

谢谢。

**更新**

只是为了添加新信息，以下是我的应用程序从市场打开时产生的错误：

```
06-21 12:04:19.619 I/ActivityManager(  129): Starting activity: Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=org.inova.mobile/.VisitInovaActivity } from pid 540
06-21 12:04:19.649 D/Volley  (  540): [13] DiskBasedCache.put: Could not clean up file /data/data/com.android.vending/cache/main/1576876231-2119069592
06-21 12:04:19.779 I/ActivityManager(  129): Start proc org.inova.mobile for activity org.inova.mobile/.VisitInovaActivity: pid=7860 uid=10131 gids={1015, 3003}
06-21 12:04:19.889 D/StatusBarPolicy(  196): onSignalStrengthsChanged
06-21 12:04:19.889 D/StatusBarPolicy(  196): iconIndex=1
06-21 12:04:19.889 V/StatusBarPolicy(  196): cdmaLevel:2;max:4
06-21 12:04:19.889 D/StatusBarPolicy(  196): iconLevel:2
06-21 12:04:19.889 D/StatusBarService(  196): updateIcon slot=phone_signal index=20 viewIndex=14 old=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 ) icon=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 )
06-21 12:04:19.909 I/TiApplication( 7860): (main) [0,0] checkpoint, app created.
06-21 12:04:19.969 I/TiApplication( 7860): (main) [68,68] Titanium 1.8.2 (2012/02/23 17:46 59b3a90)
06-21 12:04:20.069 D/dalvikvm( 7860): GC_CONCURRENT freed 300K, 47% free 3033K/5639K, external 0K/0K, paused 2ms+3ms
06-21 12:04:20.129 D/Volley  (  540): [14] DiskBasedCache.put: Could not clean up file /data/data/com.android.vending/cache/main/-743566663-837635707
06-21 12:04:20.129 D/Volley  (  540): [13] DiskBasedCache.put: Could not clean up file /data/data/com.android.vending/cache/main/-743566663-826319580
06-21 12:04:20.160 D/Database( 7860): dbopen(): path = /data/data/org.inova.mobile/databases/Titanium, flag = 6, file size = 4096
06-21 12:04:20.160 D/MediaPlayer(  540): reset() in
06-21 12:04:20.160 V/MediaPlayer(  540): reset
06-21 12:04:20.160 D/MediaPlayer(  540): reset() out
06-21 12:04:20.200 D/Database( 7860): dbopen(): path = /data/data/org.inova.mobile/databases/Titanium, mode: wal, disk free size: 16 M, handle: 0x341758
06-21 12:04:20.250 D/Database( 7860): dbopen(): path = /data/data/org.inova.mobile/databases/Titanium, flag = 6, file size = 4096
06-21 12:04:20.330 D/Database( 7860): dbopen(): path = /data/data/org.inova.mobile/databases/Titanium, mode: wal, disk free size: 16 M, handle: 0x345838
06-21 12:04:20.380 I/TiApplication( 7860): (main) [406,474] Titanium Javascript runtime: v8
06-21 12:04:20.380 D/dalvikvm( 7860): Trying to load lib /data/data/org.inova.mobile/lib/libstlport_shared.so 0x4051bc80
06-21 12:04:20.390 D/dalvikvm( 7860): Added shared lib /data/data/org.inova.mobile/lib/libstlport_shared.so 0x4051bc80
06-21 12:04:20.390 D/dalvikvm( 7860): No JNI_OnLoad found in /data/data/org.inova.mobile/lib/libstlport_shared.so 0x4051bc80, skipping init
06-21 12:04:20.390 D/dalvikvm( 7860): Trying to load lib /data/data/org.inova.mobile/lib/libkroll-v8.so 0x4051bc80
06-21 12:04:20.420 D/dalvikvm( 7860): Added shared lib /data/data/org.inova.mobile/lib/libkroll-v8.so 0x4051bc80
06-21 12:04:20.910 E/TiLaunchActivity( 7860): (main) [535,1009] Android issue 2373 detected (missing intent CATEGORY_LAUNCHER), restarting app. org.inova.mobile.VisitInovaActivity@4052faa0
06-21 12:04:20.910 E/TiApplication( 7860): (KrollRuntimeThread) [0,1009] APP PROXY: ti.modules.titanium.app.AppModule@40530ac0
06-21 12:04:21.020 D/ATRecorder( 7860): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4058a280
06-21 12:04:21.020 I/TiRootActivity( 7860): (main) [0,0] checkpoint, on root activity resume. activity = org.inova.mobile.VisitInovaActivity@4052faa0
06-21 12:04:21.020 D/AndroidRuntime( 7860): Shutting down VM
06-21 12:04:21.020 W/dalvikvm( 7860): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
06-21 12:04:21.030 E/TiApplication( 7860): (main) [3,3] Sending event: exception on thread: main msg:java.lang.RuntimeException: Unable to resume activity {org.inova.mobile/org.inova.mobile.VisitInovaActivity}: java.lang.ClassCastException: java.lang.String; Titanium 1.8.2,2012/02/23 17:46,59b3a90
06-21 12:04:21.030 E/TiApplication( 7860): java.lang.RuntimeException: Unable to resume activity {org.inova.mobile/org.inova.mobile.VisitInovaActivity}: java.lang.ClassCastException: java.lang.String
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2460)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2481)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1847)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread.access$1500(ActivityThread.java:132)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.os.Looper.loop(Looper.java:150)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread.main(ActivityThread.java:4263)
06-21 12:04:21.030 E/TiApplication( 7860):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 12:04:21.030 E/TiApplication( 7860):  at java.lang.reflect.Method.invoke(Method.java:507)
06-21 12:04:21.030 E/TiApplication( 7860):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-21 12:04:21.030 E/TiApplication( 7860):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-21 12:04:21.030 E/TiApplication( 7860):  at dalvik.system.NativeStart.main(Native Method)
06-21 12:04:21.030 E/TiApplication( 7860): Caused by: java.lang.ClassCastException: java.lang.String
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ContextImpl$SharedPreferencesImpl.getBoolean(ContextImpl.java:3034)
06-21 12:04:21.030 E/TiApplication( 7860):  at org.appcelerator.titanium.TiProperties.getBool(TiProperties.java:108)
06-21 12:04:21.030 E/TiApplication( 7860):  at org.appcelerator.titanium.TiLaunchActivity.alertMissingLauncher(TiLaunchActivity.java:195)
06-21 12:04:21.030 E/TiApplication( 7860):  at org.appcelerator.titanium.TiLaunchActivity.onResume(TiLaunchActivity.java:345)
06-21 12:04:21.030 E/TiApplication( 7860):  at org.appcelerator.titanium.TiRootActivity.onResume(TiRootActivity.java:73)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1242)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.Activity.performResume(Activity.java:3957)
06-21 12:04:21.030 E/TiApplication( 7860):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2450)
06-21 12:04:21.030 E/TiApplication( 7860):  ... 12 more
06-21 12:04:21.591 D/StatusBarPolicy(  196): hasService()=true ,mDataState=2 ,mPhone.htcModemLinkOn()=false ,mDataActivity=0
06-21 12:04:21.591 D/StatusBarPolicy(  196): slotType[0]=empty
06-21 12:04:21.591 D/StatusBarService(  196): updateIcon slot=data_connection index=18 viewIndex=13 old=StatusBarIcon(pkg=com.android.systemui id=0x7f020020 level=0 visible=true num=0 ) icon=StatusBarIcon(pkg=com.android.systemui id=0x7f020015 level=0 visible=true num=0 )
06-21 12:04:22.632 D/Finsky  (  540): [1] 1.run: Referrer for org.inova.mobile cleared
06-21 12:04:26.616 D/StatusBarPolicy(  196): onSignalStrengthsChanged
06-21 12:04:26.626 D/StatusBarPolicy(  196): iconIndex=1
06-21 12:04:26.626 V/StatusBarPolicy(  196): cdmaLevel:2;max:4
06-21 12:04:26.626 D/StatusBarPolicy(  196): iconLevel:2
06-21 12:04:26.636 D/StatusBarService(  196): updateIcon slot=phone_signal index=20 viewIndex=14 old=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 ) icon=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 )
06-21 12:04:27.417 D/skia    (  267): purging 183K from font cache [22 entries]
06-21 12:04:27.447 D/StatusBarPolicy(  196): hasService()=true ,mDataState=2 ,mPhone.htcModemLinkOn()=false ,mDataActivity=4
06-21 12:04:27.447 D/StatusBarPolicy(  196): slotType[0]=empty
06-21 12:04:27.447 D/StatusBarService(  196): updateIcon slot=data_connection index=18 viewIndex=13 old=StatusBarIcon(pkg=com.android.systemui id=0x7f020015 level=0 visible=true num=0 ) icon=StatusBarIcon(pkg=com.android.systemui id=0x7f020015 level=0 visible=true num=0 )
06-21 12:04:27.477 D/dalvikvm(  267): GC_EXPLICIT freed 204K, 53% free 4090K/8647K, external 16896K/18944K, paused 70ms
06-21 12:04:28.468 D/PowerManagerService(  129): New lightsensor value:225, lcdValue:164
06-21 12:04:28.468 D/PowerManagerService(  129): lightSensorChangedLocked, buttonValue >= 0, mPowerState = 3
06-21 12:04:29.619 W/ActivityManager(  129): Launch timeout has expired, giving up wake lock!
06-21 12:04:29.859 W/ActivityManager(  129): Activity idle timeout for HistoryRecord{409e15c0 org.inova.mobile/.VisitInovaActivity}
06-21 12:04:34.924 D/dalvikvm(  540): GC_EXPLICIT freed 884K, 45% free 5802K/10503K, external 4915K/6227K, paused 73ms
06-21 12:04:39.919 D/dalvikvm(  267): GC_EXPLICIT freed 1K, 53% free 4089K/8647K, external 16896K/18944K, paused 54ms
06-21 12:04:44.904 D/dalvikvm( 1661): GC_EXPLICIT freed 2K, 47% free 3397K/6343K, external 0K/0K, paused 47ms
06-21 12:04:55.744 D/StatusBarPolicy(  196): onSignalStrengthsChanged
06-21 12:04:55.744 D/StatusBarPolicy(  196): iconIndex=1
06-21 12:04:55.744 V/StatusBarPolicy(  196): cdmaLevel:2;max:4
06-21 12:04:55.754 D/StatusBarPolicy(  196): iconLevel:2
06-21 12:04:55.764 D/StatusBarService(  196): updateIcon slot=phone_signal index=20 viewIndex=14 old=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 ) icon=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 )
06-21 12:04:59.338 I/InputDispatcher(  129): Application is not responding: AppWindowToken{40cf9910 token=HistoryRecord{409e15c0 org.inova.mobile/.VisitInovaActivity}}.  15015.5ms since event, 15015.4ms since wait started
06-21 12:04:59.338 I/WindowManager(  129): Input event dispatching timed out sending to application AppWindowToken{40cf9910 token=HistoryRecord{409e15c0 org.inova.mobile/.VisitInovaActivity}}
06-21 12:04:59.418 I/Process (  129): Sending signal. PID: 7860 SIG: 3
06-21 12:04:59.418 I/dalvikvm( 7860): threadid=4: reacting to signal 3
06-21 12:04:59.448 I/dalvikvm( 7860): Wrote stack traces to '/data/anr/traces.txt'
06-21 12:04:59.448 I/Process (  129): Sending signal. PID: 129 SIG: 3
06-21 12:04:59.448 I/dalvikvm(  129): threadid=4: reacting to signal 3
06-21 12:04:59.578 I/dalvikvm(  129): Wrote stack traces to '/data/anr/traces.txt'
06-21 12:04:59.578 I/Process (  129): Sending signal. PID: 255 SIG: 3
06-21 12:04:59.578 I/dalvikvm(  255): threadid=4: reacting to signal 3
06-21 12:04:59.588 I/dalvikvm(  255): Wrote stack traces to '/data/anr/traces.txt'
06-21 12:04:59.588 I/Process (  129): Sending signal. PID: 252 SIG: 3
06-21 12:04:59.588 I/dalvikvm(  252): threadid=4: reacting to signal 3
06-21 12:04:59.638 I/dalvikvm(  252): Wrote stack traces to '/data/anr/traces.txt'
06-21 12:04:59.638 I/Process (  129): Sending signal. PID: 196 SIG: 3
06-21 12:04:59.638 I/dalvikvm(  196): threadid=4: reacting to signal 3
06-21 12:04:59.638 I/dalvikvm(  196): Wrote stack traces to '/data/anr/traces.txt'
06-21 12:05:00.088 D/dalvikvm(  129): GC_CONCURRENT freed 1756K, 31% free 9570K/13767K, external 5619K/7016K, paused 3ms+9ms
06-21 12:05:00.259 D/dalvikvm(  129): GC_EXPLICIT freed 123K, 31% free 9550K/13767K, external 5619K/7016K, paused 113ms
06-21 12:05:00.299 D/StatusBarPolicy(  196): onSignalStrengthsChanged
06-21 12:05:00.309 D/StatusBarPolicy(  196): iconIndex=1
06-21 12:05:00.309 V/StatusBarPolicy(  196): cdmaLevel:2;max:4
06-21 12:05:00.309 D/StatusBarPolicy(  196): iconLevel:2
06-21 12:05:00.309 D/StatusBarService(  196): updateIcon slot=phone_signal index=20 viewIndex=14 old=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 ) icon=StatusBarIcon(pkg=com.android.systemui id=0x7f020009 level=0 visible=true num=0 )
06-21 12:05:00.849 E/ActivityManager(  129): ANR in org.inova.mobile (org.inova.mobile/.VisitInovaActivity),  time=44542709
06-21 12:05:00.849 E/ActivityManager(  129): Reason: keyDispatchingTimedOut
06-21 12:05:00.849 E/ActivityManager(  129): Load: 1.54 / 1.66 / 1.88
06-21 12:05:00.849 E/ActivityManager(  129): CPU usage from 15071ms to 0ms ago:
06-21 12:05:00.849 E/ActivityManager(  129):   0.9% 88/akmd: 0% user + 0.9% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0.8% 129/system_server: 0.4% user + 0.3% kernel / faults: 2 minor
06-21 12:05:00.849 E/ActivityManager(  129):   0.6% 68/emmc-qd: 0% user + 0.5% kernel + 0% iowait
06-21 12:05:00.849 E/ActivityManager(  129):   0% 1661/com.htc.bgp: 0% user + 0% kernel / faults: 59 minor
06-21 12:05:00.849 E/ActivityManager(  129):   0.1% 5/events/0: 0% user + 0.1% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0.1% 15/kondemand/0: 0% user + 0.1% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0% 11/bdi-default: 0% user + 0% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0% 59/atmel_wq: 0% user + 0% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0% 267/com.htc.launcher: 0% user + 0% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0% 311/com.swype.android.inputmethod:SwypeConnect: 0% user + 0% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0% 5527/com.lookout: 0% user + 0% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0% 70/kjournald: 0% user + 0% kernel + 0% iowait
06-21 12:05:00.849 E/ActivityManager(  129): 2.7% TOTAL: 1% user + 1.6% kernel
06-21 12:05:00.849 E/ActivityManager(  129): CPU usage from 918ms to 1448ms later:
06-21 12:05:00.849 E/ActivityManager(  129):   12% 129/system_server: 1.8% user + 10% kernel / faults: 3 minor
06-21 12:05:00.849 E/ActivityManager(  129):     9% 163/InputDispatcher: 0% user + 9% kernel
06-21 12:05:00.849 E/ActivityManager(  129):     1.8% 130/HeapWorker: 1.8% user + 0% kernel
06-21 12:05:00.849 E/ActivityManager(  129):     1.8% 3847/Binder Thread #: 0% user + 1.8% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0.8% 5/events/0: 0% user + 0.8% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0.8% 15/kondemand/0: 0% user + 0.8% kernel
06-21 12:05:00.849 E/ActivityManager(  129):   0.9% 88/akmd: 0% user + 0.9% kernel
06-21 12:05:00.849 E/ActivityManager(  129):     0.9% 7858/akmd: 0% user + 0.9% kernel
06-21 12:05:00.849 E/ActivityManager(  129): 11% TOTAL: 3.8% user + 7.6% kernel
06-21 12:05:01.019 I/InputDispatcher(  129): Dropping event because the pointer is not down.
06-21 12:05:01.019 I/InputDispatcher(  129): Dropping event because the pointer is not down.
06-21 12:05:05.394 D/dalvikvm(  634): GC_EXPLICIT freed 10K, 47% free 2913K/5447K, external 0K/0K, paused 80ms
06-21 12:05:05.494 W/ActivityManager(  129):   Force finishing activity org.inova.mobile/.VisitInovaActivity
06-21 12:05:05.494 I/Process (  129): Sending signal. PID: 7860 SIG: 9 
```

**更新**

应@pogo2065 的要求，我附上了使用 aapt 工具提取的 AndroidManifest 文件的 xmltree 转储：

```
N: android=http://schemas.android.com/apk/res/android
  E: manifest (line=1)
    A: android:versionCode(0x0101021b)=(type 0x10)0x6
    A: android:versionName(0x0101021c)="1.0.6" (Raw: "1.0.6")
    A: package="org.inova.mobile" (Raw: "org.inova.mobile")
    E: supports-screens (line=2)
      A: android:anyDensity(0x0101026c)=(type 0x12)0xffffffff
      A: android:smallScreens(0x01010284)=(type 0x12)0x0
      A: android:normalScreens(0x01010285)=(type 0x12)0xffffffff
      A: android:largeScreens(0x01010286)=(type 0x12)0xffffffff
    E: uses-sdk (line=2)
      A: android:minSdkVersion(0x0101020c)=(type 0x10)0x8
    E: application (line=6)
      A: android:label(0x01010001)="Visit Inova" (Raw: "Visit Inova")
      A: android:icon(0x01010002)=@0x7f020000
      A: android:name(0x01010003)="VisitInovaApplication" (Raw: "VisitInovaApplication")
      A: android:debuggable(0x0101000f)=(type 0x12)0x0
      E: activity (line=10)
        A: android:theme(0x01010000)=@0x7f050000
        A: android:label(0x01010001)="Visit Inova" (Raw: "Visit Inova")
        A: android:name(0x01010003)=".VisitInovaActivity" (Raw: ".VisitInovaActivity")
        A: android:configChanges(0x0101001f)=(type 0x11)0xa0
        E: intent-filter (line=11)
          E: action (line=12)
            A: android:name(0x01010003)="android.intent.action.MAIN" (Raw: "android.intent.action.MAIN")
          E: category (line=13)
            A: android:name(0x01010003)="android.intent.category.LAUNCHER" (Raw: "android.intent.category.LAUNCHER")
      E: activity (line=17)
        A: android:name(0x01010003)="ti.modules.titanium.map.TiMapActivity" (Raw: "ti.modules.titanium.map.TiMapActivity")
        A: android:launchMode(0x0101001d)=(type 0x10)0x2
        A: android:configChanges(0x0101001f)=(type 0x11)0xa0
      E: uses-library (line=18)
        A: android:name(0x01010003)="com.google.android.maps" (Raw: "com.google.android.maps")
      E: activity (line=20)
        A: android:name(0x01010003)="org.appcelerator.titanium.TiActivity" (Raw: "org.appcelerator.titanium.TiActivity")
        A: android:configChanges(0x0101001f)=(type 0x11)0xa0
      E: activity (line=21)
        A: android:theme(0x01010000)=@0x103000f
        A: android:name(0x01010003)="org.appcelerator.titanium.TiTranslucentActivity" (Raw: "org.appcelerator.titanium.TiTranslucentActivity")
        A: android:configChanges(0x0101001f)=(type 0x11)0xa0
      E: activity (line=22)
        A: android:theme(0x01010000)=@0x103000f
        A: android:name(0x01010003)="org.appcelerator.titanium.TiModalActivity" (Raw: "org.appcelerator.titanium.TiModalActivity")
        A: android:configChanges(0x0101001f)=(type 0x11)0xa0
      E: activity (line=23)
        A: android:name(0x01010003)="ti.modules.titanium.ui.TiTabActivity" (Raw: "ti.modules.titanium.ui.TiTabActivity")
        A: android:configChanges(0x0101001f)=(type 0x11)0xa0
      E: activity (line=24)
        A: android:name(0x01010003)="ti.modules.titanium.ui.android.TiPreferencesActivity" (Raw: "ti.modules.titanium.ui.android.TiPreferencesActivity")
      E: service (line=26)
        A: android:name(0x01010003)="org.appcelerator.titanium.analytics.TiAnalyticsService" (Raw: "org.appcelerator.titanium.analytics.TiAnalyticsService")
        A: android:exported(0x01010010)=(type 0x12)0x0
    E: uses-permission (line=31)
      A: android:name(0x01010003)="android.permission.ACCESS_NETWORK_STATE" (Raw: "android.permission.ACCESS_NETWORK_STATE")
    E: uses-permission (line=32)
      A: android:name(0x01010003)="android.permission.WRITE_EXTERNAL_STORAGE" (Raw: "android.permission.WRITE_EXTERNAL_STORAGE")
    E: uses-permission (line=33)
      A: android:name(0x01010003)="android.permission.ACCESS_WIFI_STATE" (Raw: "android.permission.ACCESS_WIFI_STATE")
    E: uses-permission (line=34)
      A: android:name(0x01010003)="android.permission.ACCESS_COARSE_LOCATION" (Raw: "android.permission.ACCESS_COARSE_LOCATION")
    E: uses-permission (line=35)
      A: android:name(0x01010003)="android.permission.INTERNET" (Raw: "android.permission.INTERNET")
    E: uses-permission (line=36)
      A: android:name(0x01010003)="android.permission.ACCESS_FINE_LOCATION" (Raw: "android.permission.ACCESS_FINE_LOCATION") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:07:12.280

看起来 Titanium Mobile SDK 2.1.2 和 2.2.0 已经修复了这个问题。

[https://jira.appcelerator.org/browse/TIMOB-9285](https://jira.appcelerator.org/browse/TIMOB-9285)

# javascript - 使用greasemonkey在现有脚本中禁用焦点功能

> ID：11125255
> 
> 赞同：0
> 
> 时间：2012-06-20T17:48:40.377
> 
> 标签：javascript, greasemonkey

跟进我之前的一个问题；

我的目标是制作一个自动单击按钮以在论坛上显示快速回复框的脚本，我已经成功地做到了。然而，现在的问题是，在每次页面加载时，它会直接进入快速回复的底部，因为文本字段确实是焦点所在。

我需要在greasemonkey中写什么来阻止它一直向下移动到文本字段？我猜我必须禁用“消息”焦点部分，但我不确定如何去做。

下面的脚本是在手头站点上生成的，而不是我一直在编写的脚本。

```
function hide_qr(show)
{
dE('qr_editor_div');
dE('qr_showeditor_div');
if (show && document.getElementById('qr_editor_div').style.display != 'none')
{
document.getElementsByName('message')[0].focus();
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:51:35.270

请注意，仅当此条件为真时，该元素才会被聚焦：

```
if (show && document.getElementById('qr_editor_div').style.display != 'none') {
  document.getElementsByName('message')[0].focus();
} 
```

如果`show`是`false`，则元素不会获得焦点。`show`也是此函数的唯一参数，因此如果将其设置为`false`，则元素不会聚焦。

因此，请尝试使用`hide_qr(false)`而不是运行该函数`hide_qr(true)`。

# python - 如何在 Python 中解析这个网页（并转换成字典）

> ID：11125260
> 
> 赞同：1
> 
> 时间：2012-06-20T17:48:48.877
> 
> 标签：python, parsing, search, mapping, html-parsing

我想从某个网页（在线书店）获取一些数据。

网页如下所示：[http ://www.rob389.com/dp/tr/11/9789754681383](http://www.rob389.com/dp/tr/11/9789754681383)

我想解析`<script>`包含以下字符串的部分：

```
tOBJ.DATA[0].MMM00_ITEM_CODE="9789754681383" 
```

其中*9789754681383*是 ISBN 号。

我首先需要找到并提取正确的`<script>`部分。

然后，我想遍历**tOBJ.DATA[0]**对象的内容并将其转换为如下所示的字典：

```
my_dict["MMM00_ITEM_CODE"] = "9789754681383"
my_dict["MMM00_TITLE"] = "Uykusuz Bir Gece" 
```

等等...

我想可以用几行数的python来做到这一点，但我不知道。

有什么建议么？

提前致谢。

PS：欢迎任何其他解析建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:30:14.507

你可以用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)和一些代码来做到这一点：

```
from bs4 import BeautifulSoup
import urllib2
from urlparse import urlsplit

def isbnExtractor(url):

    urlContent = url.strip('/').split('/')
    print urlContent[6] 
```

这应该可以解决问题。像这样：

```
PS python
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from parse import isbnExtractor
>>> url = "http://www.rob389.com/dp/tr/11/9789754681383"
>>> isbnExtractor(url)
9789754681383 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:14:21.370

我几乎总是推荐使用 BeautifulSoup - 然而，这个页面似乎有一个“<！-->”标签，它会杀死解析器。所以，`re`为了救...

```
import urllib
import re

url = 'http://www.rob389.com/dp/tr/11/9789754681383'
txt = urllib.urlopen(url).read()
pat = re.compile(r'tOBJ\.DATA\[0\]\.(\w+)\s*=\s*([^;]*);', flags=re.M|re.DOTALL)
my_dict = dict((k,v.strip('"')) for k,v in pat.findall(txt)) 
```

这会产生一个包含 132 个条目的字典，包括

```
'MMM00_ITEM_CODE': '9789751028440',
'MMM00_ORG_TITLE': '026512',
'MMM00_SRC_CODE': '9789754681383',
'MMM00_TITLE': 'Uykusuz Bir Gece',
'MMM00_TYPE': 'M',
'MMM00_WEIGHT': '0',
'MMM00_WIDTH': '13.6', 
```

如果您想将其限制为仅以“MMM00”开头的键，请尝试

```
my_dict = dict((k,v.strip('"')) for k,v in pat.findall(txt) if k.startswith('MMM00')) 
```

仅返回 15 个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:18:10.617

该页面是如此可怕的无效 XML，以至于所有使用`parse()`from`lxml.tree`后跟`xpath`etc 的正常方法都惨遭失败。所以看起来你最好的选择是：

```
>>> import re
>>> import urllib
>>> import pprint
>>> s = urllib.urlopen("http://www.rob389.com/dp/tr/11/9789754681383").read()
>>> magic = re.compile(r'tOBJ.DATA\[0\].([A-Z0-9_]+)="([^"]+)"')
>>> my_dict = dict(magic.findall(s))
>>> pprint.pprint(my_dict)
{'DISC_PERC': '15.0000000000',
 'EXCHANGE_RT': '2.2815',
 'LNK_PREFIX': 'uykusuz-bir-gece-jill-murphy',
 'LST_PRICE': '7.500000000000000',
 'LST_YAX02_CODE': 'YTL',
 'MMG00_CODE': '11',
 'MMG00_TITLE': 'Kitap',
 'MMM00_DESC': '...<br />Cad\xfdlar Okulu M\xfcd\xfcr\xfc, \\',
 'MMM00_DESC250': '...<br />Cad\xfdlar Okulu M\xfcd\xfcr\xfc, \\',
 'MMM00_DISC_PERC_SAL': '25',
 'MMM00_HEIGHT': '19.6',
 'MMM00_ITEM_CODE': '9789751028440',
 'MMM00_ORG_TITLE': '026512',
 'MMM00_SRC_CODE': '9789754681383',
 'MMM00_TITLE': 'Uykusuz Bir Gece',
 'MMM00_TYPE': 'M',
 'MMM00_WEIGHT': '0',
 'MMM00_WIDTH': '13.6',
 'MMM00_ZHEIGHT': '1',
 'MMS03_PRICE_1': '7.500000000000000',
 'MMS03_PRICE_2': '0.000000000000000',
 'MMS03_PRICE_3': '7.500000000000000',
 'MMS03_YAX02_CODE_1': 'YTL',
 'MMS03_YAX02_CODE_2': 'YTL',
 'MMS03_YAX02_CODE_3': 'YTL',
 'NWS01_DESC': "<BR>New Orleans'da do\xf0an Lillian Hellman'\xfdn ilkgen\xe7li\xf0i daha sonra oyunlar\xfdnda \xfcst\xfc kapal\xfd olarak yer bulacak olan tuhaf ve h\xfdrsl\xfd akrabalar aras\xfdnda ge\xe7ti. New Orleans ve New York aras\xfdnda mekik dokuyarak ge\xe7en y\xfdllarda etraf\xfdndaki farkl\xfd k\xfclt\xfcrleri g\xf6zlemleme \xfeans\xfd buldu. Liseyi bitirdikten sonra Columbia ve New York \xdcniversitesi'ne devam ettiyse de, e\xf0itimini yar\xfdda b\xfdrakarak bir yay\xfdnevinde \xe7al\xfd\xfemaya ba\xfelad\xfd. 1920'lerin bohem hayat\xfdna g\xf6z k\xfdrpt\xfd\xf0\xfd bu d\xf6nemde tan\xfd\xfet\xfd\xf0\xfd gen\xe7 yazar Arthur Kober ile evlenerek Hollywood'a ta\xfe\xfdnd\xfd. <BR><BR>1930'lar\xfdn ba\xfe\xfdnda MGM'de d\xfczeltmenlik yapt\xfd. Hevesli bir solcu oldu\xf0u bu y\xfdllarda, i\xfe arkada\xfelar\xfdn\xfd sendikala\xfemalar\xfd i\xe7in<A class=A2 href=\\",
 'NWS01_DESC400': '<A class=A3 href=\\',
 'NWS01_ID': '588',
 'NWS01_IMAGE': '/UD_OBJS/IMAGES/NWS/HSTTR/Hellman_L_231204_365_1.jpg',
 'ON_ESHOP': 'T',
 'PEP01_ID': '229016',
 'PEP01_NAME': 'Jill Murphy',
 'PRD_FNM01_ID': '23462',
 'PRD_FNM01_TITLE': 'Mandolin',
 'PRD_FNM01_TRD_TITLE': 'Say Yay\xfdnlar\xfd',
 'PUR_VAT_VALUE': '8',
 'SAL_PRICE': '6.3750000000',
 'SAL_VAT_VALUE': '8',
 'SAL_YAX02_CODE': 'YTL',
 'UD_10': '~410~|',
 'UD_10_VAL': 'T\xfcrk\xe7e',
 'UD_11': '~1000~|~803.2~|',
 'UD_11_VAL': '\xc7ocuk,\xd6yk\xfc',
 'UD_12': '~1000.4080~|',
 'UD_12_VAL': '\xc7ocuk | 07-12 Ya\xfe | Edebiyat',
 'UD_15': '978-975-468-138-3',
 'UD_15_VAL': '978-975-468-138-3',
 'UD_16': '~PB~|',
 'UD_16_VAL': 'Karton Kapak',
 'UD_19': '01/01/2010',
 'UD_19_VAL': '01/01/2004',
 'UD_2': 'The Worst Witch Strikes Again',
 'UD_20': '92',
 'UD_20_VAL': '92',
 'UD_21': '52',
 'UD_21_VAL': '52',
 'UD_22': '3',
 'UD_22_VAL': '3',
 'UD_23': '1',
 'UD_23_VAL': '1',
 'UD_24': '~HM1~|',
 'UD_24_VAL': '1\. Hamur',
 'UD_26': '7-12',
 'UD_26_VAL': '07-12',
 'UD_2_VAL': 'The Worst Witch Strikes Again',
 'UD_3': '~229016~|',
 'UD_30': '1',
 'UD_30_VAL': '1',
 'UD_31': '1',
 'UD_31_VAL': '1',
 'UD_34': '~1~|',
 'UD_34_VAL': '1-3 G\xfcn',
 'UD_36': '1',
 'UD_36_VAL': '1',
 'UD_39': 'VAR',
 'UD_39_VAL': 'Var',
 'UD_3_VAL': 'Jill Murphy',
 'UD_42': '~410~|',
 'UD_42_VAL': 'T\xfcrk\xe7e',
 'UD_6': '~239986~|',
 'UD_6_VAL': 'Seza Sunar',
 'YAX02_CODE': 'EUR'}
>>> 
```

# ruby-on-rails - Ruby on Rails 中的 Mixins 与 Citier 用于继承

> ID：11125261
> 
> 赞同：2
> 
> 时间：2012-06-20T17:48:50.137
> 
> 标签：ruby-on-rails, ruby

我面临一个我根本无法弄清楚的设计问题。我的数据库中有一个名为 Timed_Tests 的表。Timed_Tests 有一个名为 Timed_Test 的关联模型。

最近，我意识到我实际上需要三种功能略有不同的 Timed_Test。有当前的 Timed_Test，会有一个没有 Timed_Test 结束日期的 Test_Basic，还有一个带有几个附加属性的 Special_Test。

我试图找出最好的方法是设置它。我是否应该有一个包含所有不同类型测试的所有不同类型属性的大型测试表？我应该如何设置我的类继承结构？我应该使用citier（http://peterhamilton.github.com/citier/）吗？mixin 如何与 DB 架构相适应...？

我已经问了很多问题，但我知道它们有点含糊 - 请随时向我提出澄清问题，并随时回答我在上面考虑的任何问题。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:45:18.510

如果 SpecialTest 实例的特定属性不多，您可以安全地使用单表继承。这样，您可以自由地以任何所需的方式专门化您的类的行为，同时保持映射的简单性。

使用 mixins（因此不以任何方式继承表）将阻止您跨类检索测试实例。

# ios - 在 Interface Builder 中添加 UIViewController 时 Xcode 崩溃

> ID：11125262
> 
> 赞同：0
> 
> 时间：2012-06-20T17:48:50.967
> 
> 标签：ios, xcode, uiviewcontroller, interface-builder

我在 Xcode 中，我去编辑一个 nib 文件。我试图从对象库中拖动一个 UIViewController，但是一旦我这样做，Xcode 就崩溃了。我以前从未遇到过这个问题，但现在我无法将 UIViewController 添加到 nib 文件（同一项目中的其他文件和其他项目中的其他文件仍然存在问题）。

最初，问题出现在我使用的 Xcode 4.5 的 Developer Beta 中，但现在当我在旧版本的 Xcode 中尝试时，问题也出现了。

基本上，我一直无法找到解决此问题的方法。如果有人遇到过这个问题或知道如何解决它，那就太好了。

谢谢，卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:59:06.273

尝试删除所有 Xcode 首选项文件怎么样？似乎最新的 Xcode 测试版在那里打破了一些东西......

查看以下文件夹：

```
/Users/xyz/Library/Application Support/Developer/Shared/Xcode
/Users/xyz/Library/Application Support/Xcode
/Users/xyz/Library/Developer/Xcode
/Users/xyz/Library/Caches/com.apple.dt.Xcode 
```

# php - PHP 没有正确地回显这个范围

> ID：11125270
> 
> 赞同：0
> 
> 时间：2012-06-20T17:49:17.080
> 
> 标签：php, arrays

这是我的代码：

```
<?php
$myarray = range(49500,49600);
foreach ($myarray as $key => $item) {
    echo "paper_crumbs[" .$key . "] = {type: HEAD, cost: 0, is_member: false}; <br />";
}
?> 
```

而不是回显：

```
paper_crumbs[49500] = {type: HEAD, cost: 0, is_member: false}; 
paper_crumbs[49501] = {type: HEAD, cost: 0, is_member: false}; 
```

...ETC...

正如预期的那样，值一直达到 49,600，它从 0 变为 100，如：

```
paper_crumbs[0] = {type: HEAD, cost: 0, is_member: false}; 
paper_crumbs[1] = {type: HEAD, cost: 0, is_member: false}; 
```

非常感谢您的帮助！这是我第一次在这里发帖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:50:44.307

嗯...您正在使用键回显，并期望值会神奇地突然出现？

```
foreach(range(49500,49600) as $i) echo "paper_crumbs[".$i."] = ...<br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:51:51.307

而不是 "paper_crumbs[" .$key 。"] 试试 "paper_crumbs[" .$item . "]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:53:01.450

更改`echo "paper_crumbs[" .$key . "]`为`echo "paper_crumbs[" .$item . "]`。范围在数组值中，而不是键中。

# php - 使用 preg_match() 匹配字符串中的 UTF-8 短语

> ID：11125278
> 
> 赞同：0
> 
> 时间：2012-06-20T17:49:51.347
> 
> 标签：php, regex, preg-match

我正在尝试将字符串中的某些短语作为单词匹配（stristr 不起作用，因为我不想要包含“单词”的结果）

我使用这段代码：

```
function striword($string, $word) {
    return preg_match("/(?:[[:space:]]|^)" . $word . "(?:[^\w]|$)/i", $string);
} 
```

但是当我尝试匹配像“这是一个字符串”这样的字符串时，它不能按预期工作:(

例子：

```
//Phrase to match: "soda and beer"

striword($string, "soda and beer");

String 1: "I like soda and beer" MATCH: TRUE
String 2: "I like soda and beerbum" MATCH: FALSE
String 3: "I like soda and beer, it's nice!" MATCH: TRUE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:57:37.550

两种选择：

要么使用单词边界锚（如果您正在处理实际的字母数字单词，则很有用）：

```
preg_match("/\b" . $word . "\b/i", $string); 
```

或者使用空格作为分隔符：

```
preg_match("/(?:^|\s)" . $word . "(?:\s|$)/i", $string); 
```

如果您使用 Unicode 字符串并想匹配 Unicode 单词，请不要忘记`/u`修饰符。

# php - 如何获取网页上所有文件和 url 的列表

> ID：11125279
> 
> 赞同：-1
> 
> 时间：2012-06-20T17:49:54.460
> 
> 标签：php, url, curl, wget

我正在尝试获取网页上所有文件和 url 的列表。当您输入一些 url 时，它类似于[http://tools.pingdom.com上给出的列表。](http://tools.pingdom.com)现在我正在尝试使用 cURL 或 wget 在 php 中执行此操作。有人对我如何获得这种文件/路径列表有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:57:23.510

将文档保存在字符串中后，使用正则表达式查找所有 URL。

[使用正则表达式匹配 URL](https://stackoverflow.com/questions/442405/regex-to-match-all-valid-links)

[在 PHP 中使用正则表达式](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:55:20.807

```
$url="http://wwww.xyz.com";
$data=file_get_contents($url);
$data = strip_tags($data,"<a>");
$d = preg_split("/<\/a>/",$data);
foreach ( $d as $k=>$string ){
    if( strpos($string, "<a href=") !== FALSE ){
        $string = preg_replace("/.*<a\s+href=\"/sm","",$u);
        $stringu = preg_replace("/\".*/","",$string);
        $url = $string
    }
} 
```

编辑：

或者您可以使用此功能：

```
function getAllUrls($string)
{
    $regex = '/https?\:\/\/[^\" ]+/i';
    preg_match_all($regex, $string, $matches);
    return ($matches[0]);
}

$url_array = getAllUrls($string);
print_r($url_array); 
```

# asp.net-mvc-3 - MVC3 反向路由

> ID：11125280
> 
> 赞同：0
> 
> 时间：2012-06-20T17:49:55.227
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我正在将旧的 .aspx 页面转换为新的 MVC 页面的项目。我目前正在使用路由功能来映射现有的遗留页面以在幕后使用较新的 MVC 页面。这很好用，因为它保留了现有的 URL，但是，每当控制器需要重定向用户或使用 MVC Url.Action 链接时，它将用户发送到的 URL 是 MVC url，而不是路由的旧页面 url . 我意识到这是开箱即用的假设方式，但我想知道 MVC 是否具有某种“反向路由”功能。通过反向路由，我正在寻找允许 Url.Action("action") 返回与指定操作而不是默认 /controller/action 链接的路由 .aspx 关联 url 的东西。

例如，

这是一个示例路线

```
context.MapRoute("AboutUs", "pages/aboutus.aspx", new { controller = "default", action = "aboutus" }); 
```

这使 domain.com/pages/aboutus.aspx 可以在幕后完美地从 DefaultController 运行新的 MVC 操作“aboutus”。

但是，如果在另一个 MVC 页面上我有一个由

```
Url.Action("aboutus") 
```

它将它们指向 domain.com/mvc/aboutus。我希望它指向 domain.com/pages/aboutus.aspx 以保持整个站点的一致性。

感谢您提供的任何见解。我可能最终不得不重写 Url.Action 方法来查找路由并返回映射的 url，但我只是想检查现有功能，所以我不会重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:16:10.617

尝试使用 RouteUrl 扩展方法，它通过路由名称而不是路由参数匹配路由，如下所示：

```
Url.RouteUrl("aboutus") // route name 
```

MSDN：http: [//msdn.microsoft.com/en-us/library/dd460347](http://msdn.microsoft.com/en-us/library/dd460347)

# bottle - Bottle web 框架：任何方式来运行控制台/shell 并让它与 Werkzeug 一起工作？

> ID：11125283
> 
> 赞同：2
> 
> 时间：2012-06-20T17:50:20.003
> 
> 标签：bottle, werkzeug

我搜索但找不到一种简单的方法来运行类似于 Django`manage.py shell`或 Rail 的控制台或 shell`rails console`

由于我刚开始将 Bottle 用于现有项目，因此我只想在控制台中使用现有模型和管理器。我想出的最接近的是使用 ipdb 的 set_trace() 并从那里开始，但这无论如何都不理想。

另外，我尝试将 Bottle 与 Werkzeug 集成，但是当我按照说明进行操作时：

```
import bottle
app = bottle.Bottle()
werkzeug = bottle.ext.werkzeug.Plugin()
app.install(werkzeug) 
```

我收到以下回溯错误：

```
Traceback (most recent call last):
File "mysite.py", line 62, in <module>
werkzeug = bottle.ext.werkzeug.Plugin()
AttributeError: 'module' object has no attribute 'werkzeug' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:08:07.363

尝试通过在源代码开头添加以下内容来添加 importing bottle.ext.werkzeug：

```
import bottle.ext.werkzeug 
```

# matlab - 如何生成遍历速率图

> ID：11125284
> 
> 赞同：0
> 
> 时间：2012-06-20T17:50:20.870
> 
> 标签：matlab, implementation, simulation

在这篇[Coverage 论文](http://www.ynl.t.u-tokyo.ac.jp/publications/pdf1999/iros99/akino/akino.pdf)的图 20 中，显示了机器人导航的覆盖率。对于 5000 次迭代，如何绘制覆盖率与机器人在模拟中访问的计划点数的关系？我不知道如何实现以下公式以及如何填充矩阵 A 的数据。

`Coverage C = 1/N * (summation i=1 to N, A(i) )`

`A`表示每个小区的覆盖范围。

*   `A(i) = 1`当单元格 i 被覆盖时
*   `A(i) = 0`， 否则

机器人的工作空间`N`是一个 20*20 归一化单元单元的方形地形。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:15:40.953

鉴于：

*   `N`-- 20x20 矩阵，表示机器人的工作空间。
*   某种确定机器人工作空间中的单元格是否被“覆盖”的功能。`coverfun`让我们这样称呼它`A=coverfun(N,num_planned_pts_visited)`。很可能，您必须弄清楚如何根据特定领域的知识、论文或通过电子邮件发送论文的作者来编写此函数。

计算：

*   覆盖数量`C`。

代码可能看起来像这样：

```
MAX_PTS_VISITED = 5000;

C = zeros(MAX_PTS_VISITED,1);
for i = 1:MAX_PTS_VISITED,
   A = coverfun(N, i);
   C(i) = mean(A);
end

plot(1:MAX_PTS_VISITED, C); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:14:02.443

该公式只是将覆盖率计算为矩阵 A 的平均值，因此在 Matlab 中只需：

```
C = mean(A); 
```

如果单元格 i 被覆盖，则确实假设 A(i) == 1，否则为 0。要计算某个机器人轨道的覆盖范围，请将 A 初始化为 20x20 = 400 个零值，将每个机器人位置离散化到单元格网格，并将每个单元格设置为 A(i) = 1。如何执行此操作的确切实现真的取决于你的代码，我无法帮助你。

祝你好运

# jquery - 自定义工具提示正在创建在 IE 中可见的双重工具提示

> ID：11125285
> 
> 赞同：0
> 
> 时间：2012-06-20T17:50:24.993
> 
> 标签：jquery, internet-explorer, tooltip

~ 我在[http://cssglobe.com/lab/tooltip/01/](http://cssglobe.com/lab/tooltip/01/)上使用了 jQuery 工具提示脚本的一个稍微修改过的版本——我所做的唯一修改是将它设置为在区域链接上启动工具提示定期链接。在上面链接的示例中，IE 浏览器没有问题 - 内置的 IE 工具提示没有显示，只有自定义的。但是在我的页面上，除了自定义工具提示之外，IE 中的内置工具提示仍然显示。知道是什么原因造成的吗？

这是我正在使用的脚本：

```
this.tooltipText = function () {
    /* CONFIG */
    xOffset = 0;
    yOffset = 0;
    /* END CONFIG */
    $("a.tooltipText, area.tooltipText").hover(function (e) {
        this.t = this.title;
        this.title = "";
        $("body").append("<p id='tooltipText'>" + this.t + "</p>");
        $("#tooltipText").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px").fadeIn("fast");
    }, function () {
        this.title = this.t;
        $("#tooltipText").remove();
    });
    $("a.tooltipText, area.tooltipText").mousemove(function (e) {
        $("#tooltipText").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px");
    });
};
// starting the script on page load
$(document).ready(function () {
    tooltipText();
}); 
```

这是来自 html 的用于触发工具提示的示例：

```
<area shape="rect" coords="9,359,617,391" href="/link-here/" onclick="window.open(this.href,'','toolbar=no, location=no, addressbar=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=510, height=580, top=50, left=150'); return false;" target="_blank" class="tooltipText" title="<strong>First part bold</strong>  Rest of tooltip text goes here <strong>Read More...</strong>" /> 
```

我无法弄清楚我在做什么与这里使用的脚本不同：http: [//cssglobe.com/lab/tooltip/01/](http://cssglobe.com/lab/tooltip/01/)

一如既往，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:08:24.597

另一个标签的属性中的标签嵌套是无效的 html，可能是 IE 问题的根源

为了将标题的全文保留在标题属性中，并且仍然能够将其分隔为粗体和正常，您可以使用像“|”这样的分隔符 并在脚本中构建工具提示时在分隔符处拆分标题。

```
<img title="This will be bold | this is normal" src=""/> 
```

修改代码

```
this.tooltipText = function () {
/* CONFIG */
xOffset = 0;
yOffset = 0;
/* END CONFIG */
$("a.tooltipText, area.tooltipText").hover(function (e) {
    this.t = this.title;
    this.title = "";

    /* split title at pipe delimiter*/
    this.title_parts= this.t.split('|');
    this.tip_content='<strong>'+this.title_parts[0]+'</strong>'+this.title_parts[1]; 

    $("body").append("<p id='tooltipText'><strong>" +/*change===> */ this.tip_content + "</p>");
    $("#tooltipText").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px").fadeIn("fast");
}, function () {
    this.title = this.t;
    $("#tooltipText").remove();
});
$("a.tooltipText, area.tooltipText").mousemove(function (e) {
    $("#tooltipText").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px");
}); 
```

};

编辑：以下将在页面加载时完全删除标题，并存储在元素数据中

```
this.tooltipText = function () {
    /* CONFIG */
    xOffset = 0;
    yOffset = 0;
    /* END CONFIG */
    $("a.tooltipText, area.tooltipText").hover(function (e) {
        this.t = $(this).data('title');

        /* split title at pipe delimiter*/
        this.title_parts= this.t.split('|');
        this.tip_content='<strong>'+this.title_parts[0]+'</strong>'+this.title_parts[1]; 

        $("body").append("<p id='tooltipText'><strong>" +/*change===> */ this.tip_content + "</p>");
        $("#tooltipText").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px").fadeIn("fast");
    }, function () {
        /*this.title = this.t;*/
        $("#tooltipText").remove();
    }).attr('title', function(index, title){
        $(this).data('title', title);
        return '';
    });
    $("a.tooltipText, area.tooltipText").mousemove(function (e) {
        $("#tooltipText").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px");
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:05:59.577

IE中双工具提示问题的解决方法

问题解决了。IE 对于 IE 6、7、8、9 有这个问题，它会显示工具提示两次。需要告诉 IE 不要显示标题。我在 tne net 上找到了一个代码片段

`<!--[if IE]><script>for(i =0;i<document.images.length;i++){document.images[i].alt='';}</script><![endif]-->`

这不起作用，但我将“alt”更改为标题和宾果它可以正常工作

`<!--[if IE]><script>for(i =0;i<document.images.length;i++){document.images[i].title='';}</script><![endif]-->'` 将代码片段放在页面的底部或顶部，您的工具提示将在 IE 中正确呈现

# android - Android BaseAdapter：在 getView() 重新进入时 convertView null

> ID：11125286
> 
> 赞同：3
> 
> 时间：2012-06-20T17:50:27.330
> 
> 标签：android, baseadapter, convertview

我正在根据[http://bartinger.at/listview-with-sectionsseparators/](http://bartinger.at/listview-with-sectionsseparators/)中描述的技术构建一个带有部分的 ListView 。但我想通过对非部分项目重用 convertView 来扩展它。但是，我发现每次输入 getView() 方法时 convertView 变量都是空的。有人可以解释为什么会这样吗？

```
ViewHolder holder;
final ListViewItem item = items.get(position);

if (item.isSection()) {
    Section section = (Section)item;

    convertView = inflater.inflate(R.layout.section, null);
    TextView title = (TextView) convertView.findViewById(R.id.section_title);
    title.setText(section.title);
} else {
    if (convertView == null) {
        Log.d("Adapter", "convertView was null");
    }

    Server server = (Server)item;

    convertView = inflater.inflate(R.layout.server_row, null);
    holder = new ViewHolder();
    holder.serverName = (TextView) convertView.findViewById(R.id.server_name);
    holder.serverStatusIcon = (ImageView)convertView.findViewById(R.id.server_status_icon);
    convertView.setTag(holder);

    holder.serverName.setText(server.name);
}

return convertView; 
```

该列表正在创建和显示而没有错误，并且包含部分和非部分项目都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:13:22.243

您是否正确实施

```
getItemViewType (int position) ? 
```

参见 Android 的文档：

> 退货
> 
> 表示视图类型的整数。如果可以在 getView(int, View, ViewGroup) 中将一个视图转换为另一个视图，则两个视图应该共享相同的类型。注意：整数必须在 0 到 getViewTypeCount() - 1 的范围内。也可以返回 IGNORE_ITEM_VIEW_TYPE。

所以也许convertView总是空的，因为适配器不知道哪些项目属于一起，所以它不知道哪些通过被回收......

尝试这个：

```
@Override
public int getItemViewType(int position) {
    if (((MyItem)getItem(position)).isHeader()) {
        return 1;
    } else {
        return 0;
    }
}

@Override
public int getViewTypeCount() {
    return 2;
} 
```

您在 getItemViewType 中返回的索引只是将标头和非标头组合在一起的标识符。

在这种情况下，您必须在模型项中实现方法“isHeader”（或类似方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:52:20.893

感谢 Ixx 让我思考：我没有注意到我的清单太短了，它实际上从未填满屏幕，因此没有进行回收。

为了完整起见，我将补充一点，如果您创建多个视图类型，getView() 确实会返回 convertView - 即使您没有覆盖 getItemViewType() 和 getViewTypeCount() - 根据它们的默认实现（如下）。当然，这可能不是您想要的行为。

```
public int getItemViewType(int position) {
    return 0;
}

public int getViewTypeCount() {
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:59:50.813

我刚刚用我创建的 GridView 完成了这个。当我尝试将新膨胀的视图分配给 convertView 时遇到问题。我采用的通用结构是

```
public View getView(int position, @Nullable View convertView, ViewGroup parent) {

    View newView = null;
    TextView someText;

    // Test to see if there is already a view, if not create one, else use what is
    // already existant in convertView
    if (null == convertView) {
        // inflate your view type into newView here
        newView = myInflater.inflate(R.layout._________);

        // Get all of your subviews you wish to edit here from newView
        someText = (TextView)newView.findViewById(R.id._______);
    }else{
        // Get all of your subviews you wish to edit here from convertView
        someText = (TextView)convertView.findViewById(R.id._______);
    }

    // Perform all re-alignments, view layouts etc... here

    // Perform all updating of subviews data here

    // Return structure
    if (null == convertView) {
        return newView;
    } else {
        return convertView;
    }
} 
```

希望这可以帮助！

# c# - 求密集矩阵的均值

> ID：11125288
> 
> 赞同：0
> 
> 时间：2012-06-20T17:50:30.187
> 
> 标签：c#, visual-studio, matrix, mean

我正在尝试计算 C# 中密集矩阵中每一列的算术平均值，但我想知道是否可以完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:54:59.107

元代码

```
mean(int[,] data, int j)    
   int sum = 0;    
   for i=0 to data.Length - 1
      sum += data [i, j]
   end     
   return sum / data.Length; 
```

C# 代码

```
class Program
{
    static void Main(string[] args)
    {
        var data = new[,]
        {
            { 1.1, 2.2 }, 
            { 3.3, 4.4 }, 
            { 5.5, 6.6 }, 
            { 7.7, 8.8 }
        };

        double meanValue = Mean(data, 0);
    }

    public static double Mean(double[,] data, int columnIndex)
    {
        double sum = 0.0;
        int rowsCount = data.GetLength(0);

        for (int i = 0; i < rowsCount - 1; i++)
        {
            sum += data[i, columnIndex];
        }

        return sum / rowsCount;
    }
} 
```

# google-app-engine - 棘手的一对一无主关系查询

> ID：11125294
> 
> 赞同：1
> 
> 时间：2012-06-20T17:50:55.990
> 
> 标签：google-app-engine, jdo

我目前正在 GAE/Java 上开发基于位置的服务。我对此很陌生，我需要您对 JDO 查询部分的帮助。

我有两个持久类，Client 和 ClientGeolocation。第一个用于存储客户端属性（密钥 clientId、字符串名称、字符串设置等），第二个用于存储其地理位置更新（密钥 clientGeolocationId、密钥 clientId、长时间戳、双纬度、双经度）。由于一个客户随着时间的推移有数千条地理位置记录（每个位置更新一个），我决定在 ClientGeolocation 和 Client 类之间使用一对一的无主关系。

该服务允许用户查看其他用户是否在范围内（例如，他们在 5 分钟的步行距离内）。对每个请求使用 JDO 查询来实现这一点会太耗费资源/太慢，所以我将用户的最后一个地理位置放在 memcache 中并从那里进行检查。到目前为止，一切都很好。

问题是当应用程序冷启动并且 memcache 为空时，我想用存储中的数据填充 memcache（使用 JDO 查询），我根本不知道如何查询“每个用户的最后一个地理位置记录”至少一条不超过 180 分钟的记录”。

目前我能想到的最好的解决方案是分两部分进行。首先，要查询在过去 180 分钟内有记录的用户的 clientId 键（这将查询我希望的不同 clientId），然后对所有 clientId 执行查询，在其中我查询最后一个（按时间戳降序排列的前 1 个顺序）地理位置记录。这意味着如果第一个查询返回 10.000 个用户，那么我将对最后的地理位置记录进行 10.000 个查询。我有一种感觉，在 GAE 中有一个更好的解决方案:)。

你能帮我如何以正确的方式编写这个查询吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:59:44.097

这应该有帮助吗？ [http://www.datanucleus.org/products/accessplatform_3_0/jdo/jdoql_subquery.html](http://www.datanucleus.org/products/accessplatform_3_0/jdo/jdoql_subquery.html)

# python - django 不保留文件名

> ID：11125311
> 
> 赞同：0
> 
> 时间：2012-06-20T17:52:46.987
> 
> 标签：python, html, django

Chrome 将 zip 文件下载为“download.zip”，firefox 将其下载为“IEtEk_sk.zip.part”，Internet Explorer 甚至没有提示保存它，它试图在另一个窗口中打开原始内容。为什么在所有浏览器中都没有将下载保存为“dbs_custom_library.zip”，甚至在 IE 中根本没有下载？

html表单

```
<form action="/django/builder/buildit/" method="POST">
<input type="checkbox" name="list" value="val1" checked/>
<input type="checkbox" name="list" value="val2" checked/>
<input type="checkbox" name="list" value="thisispersian" checked/>
<input type="submit" value="Submit!" />
</form> 
```

视图.py

```
def zipit (file_paths):
  buffer= StringIO.StringIO()
  z= zipfile.ZipFile( buffer, "w" )
  for p in file_paths:
    if os.path.isdir(p):
      for dir, subdirs, files in os.walk(p):
        for f in files:
          filename = os.path.join(dir, f)
          z.write(filename, arcname = filename[31:])
    else:
      z.write(p, arcname = p[31:])
  z.close()
  buffer.seek(0)
  return buffer.getvalue()

def persian (mylist):
  files = []
  if 'val1' in mylist:
    files.append('/home/dbs/public_html/download/Persian/Books/val1.html')
  if 'val2' in mylist:
    files.append('/home/dbs/public_html/download/Persian/Books/val2.html')
  return files

def main(request):
  if request.method == 'POST':
    mylist = request.POST.getlist('list')
    if 'thisispersian' in mylist:
      files = persian(mylist)
    zipped = zipit(files)
    zipped['Content-Disposition'] = 'attachment; filename=dbs_custom_library.zip'
    return HttpResponse(zipped, mimetype="application/x-zip-compressed")
  else:
    return http.HttpResponseForbidden() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:03:18.870

您正在将 a 包装`HttpResponse`在 a 中`HttpResponse`。不要那样做。

# objective-c - NSArray 计数返回正确的数字，但数据访问出错

> ID：11125315
> 
> 赞同：1
> 
> 时间：2012-06-20T17:53:04.807
> 
> 标签：objective-c, nsarray, nsmanagedobjectcontext

我正在尝试获取数组中的项目数，以将其`right detail`放在`cell`. 有趣的是，我得到了正确的结果`count`，但是当我尝试`NSLog`返回数组时`<fault>`。

```
NSPredicate *searchPredicate = [NSPredicate predicateWithFormat:@"muscleGroup == %@ && specificExercise == %@ && date >= %@ && date < %@", theMuscleGroup, theExercise, fromDate, toDate];

NSFetchRequest *fetchRequestTemp = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"WeightLiftingInfo" inManagedObjectContext:_managedObjectContext];

[fetchRequestTemp setPredicate:searchPredicate];
[fetchRequestTemp setEntity:entity];
NSError *error;
NSArray *tempArray = [[NSArray alloc] initWithArray:[_managedObjectContext executeFetchRequest:fetchRequestTemp error:&error]];

NSLog(@"%@", tempArray);
NSLog(@"%d", [tempArray count]); 
```

**我的问题：** 基本上，我做错了什么？我是在不正确地初始化阵列还是试图不正确地记录它？

我已经研究了几个小时并尝试了不同的编码，但无法弄清楚。任何帮助，将不胜感激。**如果您需要更多信息，或者我正在根据 SO 做一些违反指南的事情，请在关闭此线程或“-1”之前告诉我。有怜悯，我是新的和倾斜的:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:58:09.267

当你执行你的 fetch 请求时，你会得到一个[managed object fault](https://developer.apple.com/documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)。也就是说，即使还没有从数据存储中加载真正的数据对象，也可以表示结果的类似代理的对象。故障知道数组中有多少对象等，并且当您访问对象时，故障将透明地加载真实对象。

所以，情况正常，不用担心。尝试*使用*结果而不是记录它们，我认为您会发现一切正常。

# ruby - 在 Ruby 中添加十六进制值的最佳方法

> ID：11125316
> 
> 赞同：4
> 
> 时间：2012-06-20T17:53:15.083
> 
> 标签：ruby

我有一个十六进制值（0x0020004E0000 ...这是硬件地址的基地址）。我需要将 0x04 添加到每个寄存器的基数。我一直在这样做，首先将基地址转换为以 10 为基数的数字，然后将 4 添加到该值。然后我通过字符串类 .to_s 和 .to_i 将总和转换回十六进制。

有没有更好的方法来做到这一点，所以我不会一直在 base 10 和 base 16 之间来回转换？（仅供参考，在我之前的 AppleScript 脚本中，我将十六进制数学添加到操作系统并让 bc 为我处理添加）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T17:55:50.870

`0x0020004E0000 + 0x04`

或者干脆

`0x0020004E0000 + 4`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:58:01.600

Ruby 中有四种表示整数值的方法

```
64        # integer
0x40      # hexadecimal
0100      # octal
0b1000000 # binary

# These are all 64. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:04:45.190

一个数字就是一个数字，不管它是如何在内部表示或向用户显示的。只需像添加任何其他号码一样添加它们。如果您想稍后*将*它们视为十六进制，那很好；格式化它们以输出。

您将表示与价值混淆了。Ruby 可以解析以十六进制表示的数字，就像解析十进制、二进制或八进制值一样。

`0x04 (Hex) == 4 (decimal) == 100 (binary)`

都是一样的。

# html - 如何防止网页布局破坏

> ID：11125317
> 
> 赞同：1
> 
> 时间：2012-06-20T17:53:18.673
> 
> 标签：html, css, layout

我有一个具有以下布局的网页：http: [//jsfiddle.net/h9Nn3/6/](http://jsfiddle.net/h9Nn3/6/)只要用户的浏览器足够宽（超过 700 像素左右），它看起来就像我想要的那样，但如果它更薄而不是它开始变得混乱起来，如果浏览器只是屏幕的一半，这有点正常，那么它看起来很糟糕。解决此问题的最佳方法是什么？

我认为最好的事情是，如果项目只是向下移动而不是重叠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:02:38.030

`min-width`正如[@anjunatl](https://stackoverflow.com/a/11125343/464744)指出的那样，您可以使用，也可以使用CSS3[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)。

它们让您可以针对所需的任何分辨率范围调整 CSS：

```
body {
  color: red;
}

@media screen and (max-width: 700px) {
  body {
    color: blue;
  }
} 
```

当用户的浏览器宽度小于 700px 时，新 CSS 生效并覆盖旧 CSS。您可以利用这一点，通过在媒体查询块中添加新规则来基本上修复您在网站上发现的任何错误。这样，它们只会以正确的分辨率显示和修复布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T17:55:22.757

将此 CSS 添加到 body 标签：`min-width: 700px;`

# javascript - 循环中的Jquery动态按钮对话框不填充功能

> ID：11125322
> 
> 赞同：0
> 
> 时间：2012-06-20T17:53:38.413
> 
> 标签：javascript, jquery, loops, dialog

我正在为 jQuery 对话框创建动态按钮。一个 json 对象包含按钮的信息。我正在使用 for in 循环来遍历对象中的每个属性。当我遍历新对象时，为每个按钮填充的匿名函数是空白的，但在对话框中实际单击时显示每个函数都填充了最后一个值。

对话框代码：

```
$('#dialogDiv').dialog({
        autoOpen:false,
        modal:true,
        resizable:false,
        width: 600,
        height:100,
        position:"center",
        overlay: { 
            opacity: 0.2, 
            background: "black" 
        } 
}); 
```

从 json 对象创建按钮的代码：

```
var obj1 = {but1:{Label:"button1"},but2:{Label:"button2"},but3:{Label:"button3"}};
var newObj = {};
for(var k in obj1){
    if (obj1.hasOwnProperty(k)){ 
        var ob2 = obj1[k];
        for(var x in ob2){
            var nl = ob2[x];
             newObj[nl] = function(){
                $(this).dialog("close");
                console.log(nl);
             }
        }
    }
} 
```

如果我遍历 newObj 每个函数都是空白的。

```
for(var z in newObj){
    console.log(newObj[z]);
} 
```

将按钮对象添加到对话框并打开它。

```
$('#dialogDiv').dialog({buttons : newObj});             
$('#dialogDiv').dialog("open"); 
```

当单击任何按钮时，控制台会显示它们对于函数内的 nl ​​变量都有相同的值。为什么没有正确设置？变量范围？我知道如果不使用第二个 for 循环，这可能会更容易编写，但我认为这是嵌套循环的范围问题。我也没有包含触发执行此操作的函数的单击事件的代码，但这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:48:08.153

```
var obj1 = { but1: { Label: "button1" }, but2: { Label: "button2" }, but3: { Label: "button3" } };
    var newObj = {};
    for (var k in obj1) {
        if (obj1.hasOwnProperty(k)) {
            var ob2 = obj1[k];
            for (var x in ob2) {
                var nl = ob2[x];
                var testfn = function (j) {
                    return function () {
                        alert("clicked on" + j);
                    }
                }
                newObj[nl] = testfn(nl);
            }
        }
    }

    for (var z in newObj) {
        newObj[z]();
    } 
```

# sql-server - 将数据从 Excel/CSV 导入 SQL Server

> ID：11125325
> 
> 赞同：2
> 
> 时间：2012-06-20T17:54:09.577
> 
> 标签：sql-server, excel, csv, import

我有一些关于将数据从 Excel/CSV 文件导入 SQL Server 的问题。让我先解释一下整体情况。

我们从多个来源以 Excel/CSV 格式接收数据。该数据将被导入到 SQ Server 的表格中。因为我们从多个来源接收数据，所以我们需要将 Excel 文件中的列映射到 SQL Server 表中的列。

我知道如果我们要手动执行此导入，则 DTS 或导入/导出向导是导入此数据的方法。但我有以下问题

1.  DTS/Import 导出向导是否有替代方案？

2.  如果我要编写一个用于导入数据的应用程序，我会或可以使用哪些 .net 框架类？出于某种原因，我不想在应用程序中使用或构建 SQL 脚本。这样做的最佳方法是什么？

3.  有什么方法可以减少映射数据所涉及的工作量？

任何建议，帮助将是最受欢迎的

问候

罗米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:57:38.450

DTS/Import 导出向导是否有替代方案？--**批量插入。**

如果我要编写一个用于导入数据的应用程序，我会或可以使用哪些 .net 框架类？出于某种原因，我不想在应用程序中使用或构建 SQL 脚本。这样做的最佳方法是什么？——SSIS **。**

有什么方法可以减少映射数据所涉及的工作量？—— **？**

SSIS 是一个非常强大的工具。可能想先探索该选项。您甚至可以使用 .net 构建自定义组件。

# icloud - 当 URL 报告 NSURLUbiquitousItemHasUnresolvedConflictsKey 为 true 但没有其他版本的 URL 时，这意味着什么？

> ID：11125326
> 
> 赞同：3
> 
> 时间：2012-06-20T17:54:12.353
> 
> 标签：icloud, uidocument, nsfileversion

为了测试冲突，我一直在两台设备上保存同一文档的两个不同版本。然后，在这两种设备上，我将能够查看`currentVersionOfItemAtURL`以查看“获胜”版本（在两种设备上都是相同的）以及`otherVersionsOfItemAtURL`or`removeOtherVersionsOfItemAtURL`以查看其他设备。

但是我现在似乎有一个处于奇怪状态的文档，`currentVersionOfItemAtURL`两个设备上的位置不同，并且没有`otherVersionsOfItemAtURL`or `removeOtherVersionsOfItemAtURL`。使用`getResourceValue:forKey:`with`NSURLUbiquitousItemHasUnresolvedConflictsKey`报告 URL 存在未解决的冲突，但我无法看到它们。

当 URL 报告 NSURLUbiquitousItemHasUnresolvedConflictsKey 为 true 但没有其他版本的 URL 时，这意味着什么？这是我需要在生产应用程序中处理的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-10T02:10:45.290

我遵循 Apple 示例代码来解决冲突，但在使用（旧）文档和数据存储（不是 iCloud Drive）在 ​​iOS8 上进行测试时发现，设置该`NSFileVersion`属性`resolved = TRUE`是不够的。`setResolved`有时会失败。

解决方案是`removeAndReturnError`在`unresolvedConflictVersionsOfItemAtURL`. 文档说（我的重点）：“对于您不再需要的任何版本，请调用`removeAndReturnError:`方法`NSFileVersion`来回收文件的存储空间。文档修订版将保留在**服务器**上，直到您将其删除。”

```
for (NSFileVersion *v in [NSFileVersion unresolvedConflictVersionsOfItemAtURL:conflictURL])
        if ([v removeAndReturnError:&error] == NO)
            MRLOGERROR(error); 
```

这似乎解决了这个问题。

注意我不会担心`currentVersionOfItemAtURL`设备之间的差异。我理解它本质上是任意的，将取决于设备上发生的订单更改。

另请注意，所有冲突解决操作都应包含在文件协调器中：

```
[[[NSFileCoordinator alloc] initWithFilePresenter:nil]
 coordinateWritingItemAtURL:self.conflictFileName options:0 error:&coordError byAccessor:
 ^(NSURL *conflictURL) {
....
/// resolve conflicts here
....
}]; 
```

# ruby-on-rails - 如何使用 Rails 3.1 在 Javascript 中渲染图像

> ID：11125327
> 
> 赞同：5
> 
> 时间：2012-06-20T17:54:28.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

Rails 3.1 现在要求您在使用`image_tag`资产管道渲染图像时使用。

我在我的应用程序中构建了无限滚动，并将代码放入 js.coffee 文件中。我希望在加载更多产品的同时呈现旋转加载 gif。我不能`image_tag`在这里使用，因为这个文件不支持 Rails 代码，但我已经把它写在这里，所以你明白我想要做什么。

```
jQuery ->
  if $('.pagination').length
    $(window).scroll ->
      url = $('.pagination .next_page').attr('href')
      if url && $(window).scrollTop() > $(document).height() - $(window).height() - 1200
        $('.pagination').html("<%= image_tag("loading.gif") %> Loading more...")
        $.getScript(url)
    $(window).scroll() 
```

以前，我只是用纯 HTML 编写它，使用`<img src=...`但这将不再适用于资产管道。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:03:25.123

使用纯 HTML 应该可以正常工作。

尝试使用：`<img src="/assets/loading.gif" />`如果你`loading.gif`在里面`assets/images`。

**2012 年 6 月 21 日更新**

根据[Ruby on Rails 指南第 2.2.3 节](http://edgeguides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)，将 .js 文件的文件扩展名更改为`filename.js.erb`或`filename.js.coffee.erb`将允许您在 javascript 中使用嵌入的 ruby​​。

然后，您可以使用`asset_path`帮助程序访问存储资产的路径。

# php - PHP：简单的 HTML DOM 解析器 - find() 中的多个属性？

> ID：11125331
> 
> 赞同：2
> 
> 时间：2012-06-20T17:54:50.310
> 
> 标签：php, web-scraping, simple-html-dom

我正在使用简单的 HTML DOM 解析器，但无法弄清楚如何获取具有 2 个或更多匹配属性的元素。

可悲的是，要获得前 2 个 div，这不起作用：

```
$html = "<div title='test a' class='a' >test a</div>
         <div title='test b' class='b' >test b</div>
         <div title='test c' class='c' >test c</div>";

$htmldom = str_get_html($html);
$ab = $htmldom->find("div[class=a][class=b]"); 
```

甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:59:40.557

您可以通过调用找到所有具有类`a`或类的div ：`b`

```
$ab = $htmldom->find("div[class=a], div[class=b]"); 
```

有关详细信息，[请参阅](http://simplehtmldom.sourceforge.net/manual.htm)“如何查找 HTML 元素 -> 高级”手册。

# arduino - 预处理器重复语句

> ID：11125345
> 
> 赞同：0
> 
> 时间：2012-06-20T17:55:43.833
> 
> 标签：arduino

我刚刚开始使用 Arduino。我似乎经常写这样的代码：

```
int input_pins[] = {6, 3, 8, 2};
int input_state[4];

void setup() {                
}

void loop() {
  for (int i = 0; i < 4; i++){
    input_state[i] = digitalRead(input_pins[i]); 
  }
} 
```

是否有预处理器（或类似的东西）来生成以下有效代码？

```
int input_state[4];

void setup() {                
}

void loop() {
  input_state[0] = digitalRead(6); 
  input_state[1] = digitalRead(3); 
  input_state[2] = digitalRead(8); 
  input_state[3] = digitalRead(2); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:39:20.063

Arduino 编程底层有 C++，为什么要使用像预处理这样有限的东西？

如果您从以下代码开始：

```
///////////////////////////////////////
class DigitalRead
{
public:
    DigitalRead(int pins[]);
    int operator[](const int index);
    int len;
    int *mypins;
};

DigitalRead::DigitalRead(int pins[])
{
   mypins = pins;
   for(len = 0; pins[len] != -1; len++) {};
}

int DigitalRead::operator[](const int index)
{
    if (index > len) return -1;
    return digitalRead(mypins[index]);
}
///////////////////////////////////////

int pins[] = {6, 3, 8, 2, -1};

DigitalRead input_state = DigitalRead(pins);

void setup()
{
}

void loop()
{
   // print the state of pin 6, change as needed
   Serial.println(input_state[0]);
} 
```

您可以改进一些事情（在 DigitalRead::DigitalRead 中设置输入引脚，例如）j。一旦工作正常，将`///////`行之间的内容移到库中。

# php - 使用 FPDF 时需要对齐顶部并换行？

> ID：11125347
> 
> 赞同：4
> 
> 时间：2012-06-20T17:55:48.770
> 
> 标签：php, sql, fpdf

嗨，我正在使用 fpdf 自动生成 pdf 以从 sql 读取数据>因为从 db 中提取的大部分内容都是大约 300 字的段落..它没有被我在 fpdf 中制作的列包裹..它只是一个单独的行..有没有办法在列中包装文本。输出图像附在帖子的末尾..还有一个问题，我怎样才能自动将此pdf发送到电子邮件

```
 <?php

require('fpdf.php');

//Connect to your database
$link = mysql_connect('www.xxxxxxx.co.uk', 'xxxxxxx', 'xxxxxx');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

//Create new pdf file
$pdf=new FPDF();

//Open file
$pdf->Open();

//Disable automatic page break
$pdf->SetAutoPageBreak(true);

//Add first page
$pdf->AddPage();

//set initial y axis position per page
$y_axis_initial = 25;

//print column titles for the actual page
$pdf->SetFillColor(232, 232, 232);
$pdf->SetFont('Arial', 'B', 12);
$pdf->SetY($y_axis_initial);
$pdf->SetX(5);
/*$pdf->Cell(30, 6, 'CODE', 1, 0, 'L', 1);
$pdf->Cell(30, 6, 'NAME', 1, 0, 'L', 1);
$pdf->Cell(30, 6, 'PRICE', 1, 0, 'R', 1);*/

$y_axis = $y_axis + $row_height;

mysql_select_db("web39-sdasdasd", $link);
$q = "SELECT qr_topics,start_of,differential_dia,things_not,investigations,risks FROM qr_table";
$result = mysql_query ($q, $link);

//initialize counter
$i = 0;

//Set maximum rows per page
$max = 25;

//Set Row Height
$row_height = 80;
$pdf->Cell(33, 6, '  ', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Starting off', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Differential diagnosis', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Not to miss', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Investigations', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Risks', 1, 0, 'L', 1);

$y_axis =(35);

while($row = mysql_fetch_array($result))
{

    $cad = $row['qr_topics'];
    $pad = $row['start_of'];
    $nad = $row['differential_dia'];
    $vad = $row['things_not'];
    $sad = $row['investigations'];
    $tad = $row['risks'];

    $pdf->SetY($y_axis);
    $pdf->SetX(5);
    $pdf->Cell(33,80,$cad,1,0,'L',1);
    $pdf->Cell(33,80,$pad,1,0,'L',1);
    $pdf->Cell(33,80,$nad,1,0,'L',1);
    $pdf->Cell(33,80,$vad,1,0,'L',1);
    $pdf->Cell(33,80,$sad,1,0,'L',1);
    $pdf->Cell(33,80,$tad,1,0,'L',1);

    //Go to next row
    $y_axis = $y_axis + $row_height;
    $i = $i + 1;
}

mysql_close($link);

//Send file
$pdf->Output();
?> 
```

输出如下所示

![在此处输入图像描述](../Images/a609db013d6e23774196505193a5604d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:50:10.107

```
$row_height = 80;
$pdf->Cell(33, 6, '  ', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Starting off', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Differential diagnosis', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Not to miss', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Investigations', 1, 0, 'L', 1);
$pdf->Cell(33, 6, 'Risks', 1, 0, 'L', 1); 
```

从 L 更改为 T 或 R

# xaml - 格式化 Xceed Grid 的 GroupBy 标头的显示

> ID：11125353
> 
> 赞同：0
> 
> 时间：2012-06-20T17:55:59.317
> 
> 标签：xaml, xceed-datagrid, xceed

我在 xceed 网格上使用 groupby 控件。我正在尝试格式化标题。我想去掉下图中圈出的部分。有任何想法吗？

![在此处输入图像描述](../Images/c1d26a5f79ad5fc5faa04b9166be3fa5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:48:20.243

我更改了对 FieldName 的绑定以匹配我需要的内容。

# mysql - Proxying/relaying a mysql connection (so that the server appears to be on localhost)

> ID：11125355
> 
> 赞同：1
> 
> 时间：2012-06-20T17:56:09.690
> 
> 标签：mysql, database, networking, tunnel

I have a MySQL server running on host A in my LAN. Host B has an application running that expects a MySQL server listening on default port, locally.

I need *something* that will listen on host B and relay everything to the real MySQL server.

What am I looking for?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:47:41.210

I believe you're looking for something like [mysqlproxy](http://forge.mysql.com/wiki/MySQL_Proxy)!

# c# - 缓存策略以获得更好的性能

> ID：11125358
> 
> 赞同：0
> 
> 时间：2012-06-20T17:56:28.827
> 
> 标签：c#, asp.net, .net, sql-server, caching

> **可能重复：**
> [内存中收集的 Linq 性能](https://stackoverflow.com/questions/11124273/linq-performance-for-in-memory-collection)

我有一个拥有大约 100 万用户的 Web 应用程序。该应用程序中的几乎每个网页都调用 GetUser() 方法（以加载活动流中的名字和其他用户详细信息）。现在我正在为每次调用访问数据库，我正在考虑将所有用户缓存在内存中并使用 Linq 从那里获取搜索结果或 GetUser()。

我唯一的问题是缓存所有用户（在内存中）是否是一个好主意。我会浪费我的内存吗？我个人认为从 RAM 中获取比从 DB 中获取要快得多（即使 DB 已经过优化和索引）。

请注意，我已经处理了缓存验证/更新/等。

stackoverflow 是否缓存所有用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:02:10.980

我们做了类似的事情，但没有转向 Linq，我们只是在每个 Web 服务器上安装了 SQL Server Express 的副本。我们会将用户数据更改推送到每个 Web 服务器，并且本地应用程序使用中间层，并且只定期从本地数据库中提取数据（但至少这是本地的，而不是每个人都访问数据库）。

您使用什么技术进行缓存，以及应用程序（或 Linq）如何知道何时刷新其本地副本，取决于允许缓存数据的陈旧程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:09:02.143

如果 GetUser 将在大多数时间返回同一组用户，并且如果大多数用户很少被检索到，您可以尝试一种混合方法，您可以设置一个字典（或其他一些集合）并首先检查该集合并且它确实不存在然后从数据库中获取它并将其存储到集合中。

使用这种方法，您还可以使用缓存，因为它已经具有内置机制来过时并自行清理。

话虽如此，我过去从事过一个项目，我们为用户做了同样的事情（尽管我们只有大约 100 个用户），我们所有的研究和测试发现每次访问数据库都更快。

# jquery - 使用 jquery ajax 从受密码保护的经典 ASP 页面获取数据

> ID：11125360
> 
> 赞同：0
> 
> 时间：2012-06-20T17:56:44.800
> 
> 标签：jquery, asp.net, ajax

是否可以使用 ajax 请求受密码保护的页面，传递凭据，然后从结果页面中获取 html？我一直在玩我的 asp.net mvc 应用程序，但到目前为止我还不能让它工作。这是我的看法：

```
 @Code
  ViewData("Title") = "Index"
 End Code

 <h2>eWeb Job Count</h2>
 <div id="mydiv">
 </div>

<script type="text/javascript">
$(document).ready(function() {
$.ajax({
    type: "POST",
    url: "http://102.143.240.117/dataviews.asp",
    data: "'Administrator', 'password'",
    datatype: "html",
    success: function (dataviewhtml) {
        $('#mydiv').html(dataviewhtml);

    },
    error: function (errorMessage) {
        $('#mydiv').html(errorMessage);
    }

});
});
</script> 
```

当我加载页面时，我没有收到任何错误消息......只是一个空白页面。是否可以通过 ajax 将数据传递到弹出窗口？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:02:05.973

对的，这是可能的。[**jQuery.ajax**](http://api.jquery.com/jQuery.ajax/)支持`username`和`password`选项，您可以在请求时传递：

```
$.ajax({
    type: "POST",
    url: "http://102.143.240.117/dataviews.asp",
    username : 'Administrator',
    password : 'password',
    datatype: "html",
    success: function (dataviewhtml) {
        $('#mydiv').html(dataviewhtml); 
    },
    error: function (errorMessage) {
        $('#mydiv').html(errorMessage);
    }
}); 
```

# java - 在 Tomcat7 服务器上用 Java 创建新实例时出现 XmlPullParser 异常

> ID：11125363
> 
> 赞同：1
> 
> 时间：2012-06-20T17:56:51.483
> 
> 标签：java, xml, tomcat

我正在使用带有 Tomcat 7 和 jre 7 的 Eclipse 开发动态 Web 应用程序。尝试解析 xml 字符串时收到以下异常：

**无法加载任何工厂类（即使是小的或完整的默认实现）；嵌套异常是：org.kxml2.io.XmlReader**

XmlPullParserFactory 工厂 = XmlPullParserFactory.newInstance();

这是 org.xmlpull.v1.XmlPullParserFactory 命名空间的一部分。

我已将 xmlpull_1_0_5.jar 放入 Tomcat lib 文件夹并重新启动它。我还将文件放在 WEB-INF lib 文件夹中。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:08:20.803

删除您拥有的并使用 KXML2 实现。从这里下载：[链接](http://kxml.sourceforge.net/)

更多[信息](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

# google-chrome - 在 Google Chrome 中使用 --js-flags 来获取 --trace 输出

> ID：11125364
> 
> 赞同：9
> 
> 时间：2012-06-20T17:56:53.740
> 
> 标签：google-chrome, v8

我在网上浏览了各种资源并进行了许多 Google 搜索，但我似乎找不到任何关于如何在 Google Chrome 中使用 V8 --trace-* 标志的具体说明。我看过一些“您也可以在 Chrome 中执行此操作”，但我无法找到我正在寻找的内容，输出如下：（片段靠近帖子的底部）[为 V8 优化](http://floitsch.blogspot.ca/2012/03/optimizing-for-v8-introduction.html)。

我找到了将数据记录到文件的参考：[Profiling Chromium with V8](http://code.google.com/p/v8/wiki/ProfilingChromiumWithV8)，我发现该文件可能命名为 v8.log：（丢失了该链接）但我没有找到任何关于如何生成的线索文件，或它所在的位置。它似乎不在 chrome 目录或用户目录中。

显然我还需要为 chrome.dll 启用 .map 文件，但我找不到任何可以帮助我的东西。

我更愿意为此使用 Chrome 的 V8 而不是构建 V8 和使用 shell 的原因是因为我想测试的 JavaScript 使用 DOM，我不相信它会包含在 V8 shell 中。但是，如果是这样，那就太好了，然后我可以重写代码以工作 sans-html 文件并进行测试。但我的猜测是 V8 本身就是 sans-DOM 访问，就像 node.js

所以总结一下；

*   在 Windows 7 Ultimate x64 上运行 Google Chrome Canary
*   捷径目标是`"C:\Users\ArkahnX\AppData\Local\Google\Chrome SxS\Application\chrome.exe" --no-sandbox --js-flags="--trace-opt --trace-bailout --trace-deop" --user-data-dir=C:\chromeDebugProfile`
*   寻找[这种](http://code.google.com/p/v8/wiki/ProfilingChromiumWithV8)类型的输出是否可以从 chrome 中记录下来
    *   如果是这样，日志在哪里？
    *   如果不是，我应该期待什么样的输出，再次，我在哪里可以找到它？

感谢您的任何帮助！

# 修改我如何得到为我工作的答案

使用下面的答案，我将 python 安装到它的默认目录，并修改了脚本，使其具有 chrome 的完整路径。从那里我将文件类型关联设置为 .py 文件到 python 并执行脚本。现在每次我打开 Chrome Canary 时它都会运行那个 python 脚本（至少在我重新启动我的电脑之前，我必须再次运行那个脚本）

结果正是我想要的！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T19:43:00.030

在 Windows 上，标准输出被 chrome.exe 是一个 GUI 应用程序这一事实所抑制。您需要将 PE 标头中的 Subsystem 字段从 to 翻转`IMAGE_SUBSYSTEM_WINDOWS_GUI`，`WINDOWS_SUBSYSTEM_WINDOWS_CUI`以查看 V8 输出到 stdout 的内容。

您可以使用以下（有点骇人听闻的）Python 脚本来做到这一点：

```
import mmap
import ctypes

GUI = 2
CUI = 3

with open("chrome.exe", "r+b") as f:
   map = mmap.mmap(f.fileno(), 1024, None, mmap.ACCESS_WRITE)
   e_lfanew = (ctypes.c_uint.from_buffer(map, 30 * 2).value)
   subsystem = ctypes.c_ushort.from_buffer(map, e_lfanew + 4 + 20 + (17 * 4))
   if subsystem.value == GUI:
       subsystem.value = CUI
       print "patched: gui -> cui"
   elif subsystem.value == CUI:
       subsystem.value = GUI
       print "patched: cui -> gui"
   else:
       print "unknown subsystem: %x" % (subsystem.value) 
```

关闭所有 Chrome 实例并执行此脚本。当您重新启动 chrome.exe 时，您应该会看到控制台窗口出现，并且您应该能够通过`>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-17T17:59:51.660

如果您不热衷于破解 chrome 的 PE 条目，那么可以选择 windows。

因为 chrome 应用程序不会在 Windows 上创建控制台标准输出，所以 v8（也是 d8 编译器）中的所有跟踪都被发送到 OutputDebugString。OutputDebugString 写入任何其他应用程序都可以读取的共享内存对象。

Microsoft 有一个名为 DebugView 的工具，它可以监控并在需要时流式传输到日志文件。

DebugView 是免费的，可从微软下载：[http ://technet.microsoft.com/en-us/sysinternals/bb896647.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)

# c - 马赫信号量是否在进程之间的共享内存中工作？

> ID：11125365
> 
> 赞同：4
> 
> 时间：2012-06-20T17:56:57.780
> 
> 标签：c, macos, ipc, semaphore, shared-memory

我有兴趣在共享内存中使用使用`semaphore_create(task, sem, policy, value)`from创建的信号量`mach/semaphore.h`来同步 Mac OS 中的两个进程。

我知道在 Linux 上使用`sem_init(sem, pshared, value)`,`pshared`在这种情况下必须为非零，但是我在 Mac 上找不到信息（`sem_init`未实现的地方），而且我真的不想使用命名信号量，因为我需要创建很多其中。

我尝试了一个最小的示例，但它似乎不起作用，所以我想知道是我做错了什么还是它不起作用。我也对其他进程间锁定替代方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T11:22:45.200

OSX 不支持匿名信号量。实现函数调用是为了获得 posix 合规性，但是如果您检查返回代码，它们实际上会出现未实现的错误。我在这里写了一篇关于 OSX 和未命名信号量的详细信息，以及一个建议的解决方案： [Unnamed-semaphores-and-pososx](http://ck-hack.blogspot.com/2013/09/unnamed-semaphores-and-pososx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:15:12.047

这是关于 semaphore_create 和朋友的文档： [https ://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KernelProgramming/synchronization/synchronization.html](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KernelProgramming/synchronization/synchronization.html)

我没有 Mac，所以我无法测试任何东西，但我看不出有任何理由说明为什么无法使用未命名的信号量。

# windows - 如何将自签名证书链接到根证书？

> ID：11125366
> 
> 赞同：0
> 
> 时间：2012-06-20T17:56:59.763
> 
> 标签：windows, outlook, certificate, ms-office

我可以使用 Office 的 Selfcert.exe 工具创建自签名数字证书，但我不知道如何将其链接到根证书。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:33:07.770

如果您希望自签名证书从根证书继承信任，则无法做到这一点。

证书的全部意义在于证书颁发机构（根证书）已通过某种非电子方式验证了您的身份，并为此*颁发*了证书。因此，在您破解证书颁发机构的根密钥之前，您不能自己发布一个 - 希望这不是一件容易的事。

# c# - 数据返回客户端后继续执行 ASP.NET 脚本

> ID：11125370
> 
> 赞同：0
> 
> 时间：2012-06-20T17:57:06.100
> 
> 标签：c#, ajax, asp.net-mvc, file-upload

我正在开发一个项目，用户将在该项目中将文件上传到将被解析的服务器。

我希望用户在上传完成后收到一条状态消息，然后让他们能够轮询服务器以获取有关解析状态的更新。

我正在考虑使用 ajax 文件上传，当客户端从服务器收到上传成功消息时，它开始每 2 秒轮询一次状态。我不知道如何在服务器继续执行解析器并能够跟踪该执行状态的同时将数据返回给用户。

从控制器返回视图后继续执行脚本的最佳方法是什么。

编辑：

我怀疑我可能需要生成另一个进程，但我不知道该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:45:34.827

我认为在这种特殊情况下，将文件处理与 Web 请求分离是有意义的。CM 建议的 ThreadPool.QueueUserWorkItem 方法是一种选择，但您可能还需要考虑使用真正的队列机制（如 MSMQ 或 RabbitMQ）并在单独的应用程序中处理您的上传。通过这种方式，您的 Web 层与您的业务流程分离，并且您可以根据需要独立扩展每个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:45:23.673

我见过的一种简单方法是使用 ThreadPool.QueueUserWorkItem 以及一个跟踪状态后台线程的静态列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:01:47.563

你应该看看 SignalR ( [https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR) )，它是一个用于构建 Web 应用程序的库，客户端和服务器之间的通信非常简单。

如果您想了解如何进行后台处理，您可以使用线程来启动一个线程，该线程即使在网页返回给用户后也会运行。StackOverflow 和网络上有很多这样的例子。

# java - 使用 php 和 java 加密内容

> ID：11125371
> 
> 赞同：5
> 
> 时间：2012-06-20T17:57:08.030
> 
> 标签：java, php, encryption

我有一个带有 java 和 PHP 文件的应用程序。java 文件将内容发送到 PHP 文件，而这个将响应发送到 java 文件，通过 HTTP 一切。我有 JSON 格式的响应。

我想加密信息并在另一端对其进行解码，`java->php`并且`php->java`（这是最重要的）但我不知道该怎么做。

编辑：我正在尝试 BLOWFISH，这是我在 PHP 中的代码（加密数据并发送到 Java）和 Java（获取数据并解码）

**PHP**

```
$key = "this is the key";
$crypttext = mcrypt_encrypt(MCRYPT_BLOWFISH, $key, $result_json, MCRYPT_MODE_ECB);
echo($crypttext); 
```

**JAVA**

```
public String decryptBlowfish(String to_decrypt, String strkey) {
    System.out.println(to_decrypt);
    try {
        SecretKeySpec key = new SecretKeySpec(strkey.getBytes(), "Blowfish");
        Cipher cipher = Cipher.getInstance("Blowfish");
        cipher.init(Cipher.DECRYPT_MODE, key);
        byte[] decrypted = cipher.doFinal(to_decrypt.getBytes());
        return new String(decrypted);
    } catch (Exception e) {
        System.out.println(e.getMessage());
        ;
        return null;
    }
} 
```

* * *

```
System.out.println(decryptBlowfish(result, "this is the key")); 
```

* * *

我执行时的结果是：

```
Input length must be multiple of 8 when encrypting with padded cipher 
```

或者有时

```
Given final block not properly padded 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:09:40.700

同意使用 SSL 证书和加密连接到 HTTPS/SSL 站点的客户端 java 应用程序的 SSL 的评论：[http ://www.mkyong.com/java/java-https-client-httpsurlconnection -example/](http://www.mkyong.com/java/java-https-client-httpsurlconnection-example/)接下来你可能想要一个 HTTPS/SSL php 服务器，这应该会有所帮助：[http](http://cweiske.de/tagebuch/ssl-client-certificates.htm) ://cweiske.de/tagebuch/ssl-client-certificates.htm或者使用这个开源库： http: [//nanoweb.si。千兹/](http://nanoweb.si.kz/)

如果上述方法失败，那么我不知道，但最后的手段是自己编写，你可能永远不知道它到底有多安全？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T21:55:26.220

您可能希望使用相同的算法进行解码/解密，即*"blowfish/ecb/nopadding"*而不是*"blowfish"*。

```
private static final String DECRYPTION_ALGORITHM = "blowfish/ecb/nopadding";
private static final String KEY_ALGORITHM = "blowfish";
private static byte[] decrypt(byte[] keyData, byte[] valueData) throws Exception {
    SecretKeySpec keySpec = new SecretKeySpec(keyData, KEY_ALGORITHM);
    Cipher cipher = Cipher.getInstance(DECRYPTION_ALGORITHM);
    cipher.init(Cipher.DECRYPT_MODE, keySpec);
    return cipher.doFinal(valueData);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T18:06:22.557

如果你不想要 SSL，我也推荐，你可以试试这个：

```
$str = 'hello world'; //your input data
$pass = 'haj83kdj843j'; //something random, the longer the better
$l = strlen($pass);

for ($i=0; $i<strlen($str); $i++)
{
  $str[$i] = chr(ord($str[$i]) + ord($pass[$i % $l]));
} 
```

用您想要的任何语言编写编码器/编码器既快速又容易。结果字符串是二进制字符串，因此您可能希望使用 base64_encode 或其他方式对其进行转换。应该提供相当好的安全性。

# c# - 为什么在解析完成之前会遇到流结束？

> ID：11125372
> 
> 赞同：0
> 
> 时间：2012-06-20T17:57:17.377
> 
> 标签：c#, stream, networkstream

我不确定为什么这会在解析完成之前抛出错误 End of stream 。我查看了此[链接](https://stackoverflow.com/questions/306596/end-of-stream-encountered-before-parsing-was-completed)，但那里没有解决我的问题。我使用断点来找到它引发错误女巫的确切点

```
 Console.WriteLine("Message from client "); 
```

提前致谢

```
 if (stream.DataAvailable)
   {
       byte[] buffer = new byte[10024];
       int byteCount = stream.Read(buffer, 0, buffer.Length);
       byte[] inBytes = new byte[byteCount];
       for (int counter = 0; counter < byteCount; counter++)
           inBytes[counter] = buffer[counter];
       BinaryFormatter formatter = new BinaryFormatter();
       MemoryStream memory = new MemoryStream();
       memory.Write(inBytes,0,inBytes.Length);
       object message = (object)formatter.Deserialize(memory);
       Console.WriteLine("Message from client ");
       memory.Close();
   } 
```

编辑*这是我的错，这里的实际代码没有任何问题，我在客户端犯了错误。我使用 Encoding.ASCII 而不是 binaryformatter。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:59:07.300

好吧，您假设一次调用`stream.Read`将读取*所有*数据。这几乎总是一个错误，尤其是当它是网络流时。

你有什么理由不只是`formatter.Deserialize(stream)`首先打电话吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:32:54.713

这是我的错，这里的实际代码没有错，我在客户端犯了错误。我使用 Encoding.ASCII 而不是 binaryformatter。

# performance - Powershell 查询性能计数器

> ID：11125377
> 
> 赞同：0
> 
> 时间：2012-06-20T17:57:27.817
> 
> 标签：performance, powershell

是否有更好的方法来列出特定进程的计数器属性：

```
$pids = get-counter -listset process | get-counter -maxsamples 1 | select -expandproperty countersamples | where {$_.path -like "w3wp"} | select cookedvalue | ForEach {$_.cookedvalue} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:25:45.553

您也可以使用 WMI 类“Win32_PerfFormattedData_PerfProc_Process”来执行此操作：

```
Get-WmiObject -Class Win32_PerfFormattedData_PerfProc_Process -Filter "Name='w3wp'" 
```

这将为您提供与 w3wp 进程有关的性能计数器数据。

# objective-c - 大量的按位枚举

> ID：11125378
> 
> 赞同：0
> 
> 时间：2012-06-20T17:57:35.050
> 
> 标签：objective-c, enums, bit-manipulation

我有一个关于按位枚举的问题，我似乎无法解决。我有许多由按位枚举表示的标志，如下例所示：

```
enum
{
    EnumNone=0,
    EnumOne = 1<<0,
    EnumTwo = 1<<1,
    EnumThree = 1<<2,
    EnumFour = 1<<3
};
typedef NSUInteger MyEnum; 
```

上面的例子一切都很好。根据我的研究和stackoverflow中的各种有用的帖子（[例如this](https://stackoverflow.com/questions/2936480/bitwise-or-of-constants)），我得出结论，使用上面的例子，我基本上得到了32个选项（或者如果你愿意的话），每个选项代表32中的1位-bit系列的选项，基本告诉我可以一路走到`EnumThirtyTwo = 1 << 31`.

***我的问题是这样的：***

假设我有超过 32 个（例如 75 个）标志来表示使用按位枚举。怎样才能最好地表现出来？

```
enum
{
    EnumNone=0,
    EnumOne = 1<<0,
    EnumTwo = 1<<1,
    EnumThree = 1<<2,
    EnumFour = 1<<3,
    ...
    ...
    EnumSeventyFive = 1<<75
};
typedef NSUInteger MyEnum; 
```

将我的枚举类型的声明更改为：`typedef long int MyEnum;`或`typedef long MyEnum`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:36:29.610

您可以使用一些简单的宏/函数和一个`struct`包含`char`足够大小的数组 - 为您*提供按值调用的*语义，即就像真正的枚举一样。例如（直接输入答案）：

```
typedef struct
{
    char bits[10]; // enough for 80 bits...
} SeventyFiveFlags;

typedef enum
{
   EnumOne = 0,
   ...
   EnumSeventyFive = 74
} SeventyFiveFlagNames;

NS_INLINE BOOL testFlag(SeventyFiveFlags flags, SeventyFiveFlagNames bit)
{
   return (flags.bits[bit >> 3] & (1 << (bit & 0x7))) != 0;
} 
```

*但是，如果您对引用调用*语义没问题，您也可以使用 bitstring(3) 函数/宏。这些创建（堆或堆栈）任何长度的位串。使用您的枚举为位数提供符号名称而不是掩码，例如：

```
#include <bitstring.h>

typedef enum
{
   EnumOne = 0,
   ...
   EnumSeventyFive = 74,
   SeventyFiveFlagsSize = 75
} SeventyFiveFlagNames;

typedef bitstr_t *SeventyFiveFlags;

// local (stack) declaration & use
SeventyFiveFlags seventyFive;
bit_decl(seventyFive, SeventyFiveFlagsSize); // declare
bit_nclear(seventyFive, EnumOne, EnumSeventyFive); // set all false

if( bit_test(seventyFive, EnumFortyTwo) ) // test 
```

如果仅堆分配可以，您始终可以将其包装为一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:39:20.277

也许我在谈论一些无关紧要的事情。

我认为在枚举中有太多标志不是一个好习惯。拥有这么多标志，必须有办法将它们分组，例如：

```
enum
{
    EnumNone=0,
    EnumOne = 1<<0,
    EnumTwo = 1<<1,
    EnumThree = 1<<2,
    EnumFour = 1<<3
};
typedef NSUInteger widthRelated;

enum
{
    EnumNone=0,
    EnumOne = 1<<0,
    EnumTwo = 1<<1,
    EnumThree = 1<<2,
    EnumFour = 1<<3
};
typedef NSUInteger heightRelated; 
```

# java - 套接字 java 客户端-服务器

> ID：11125383
> 
> 赞同：0
> 
> 时间：2012-06-20T17:57:45.877
> 
> 标签：java, sockets

我必须用 Java 构建服务器和客户端。服务器在18163端口打开一个连接，客户端连接到服务器并建立一个数字X，服务器发送消息“猜测”，服务器收到消息反复尝试确定X的值给发送消息的客户端“我觉得 Y" 其中 Y 是一个整数的值。当客户端收到消息“我感觉 Y”发送到服务器时：如果数字正确，则“相同”，“如果数字不正确，则不相等”。如果数字正确，则服务器向客户端发送“关闭”，客户端关闭连接。

我必须在不使用线程的情况下实现这个程序！我试过了，但它不起作用。

客户：

```
public class Client{

  public static void main(String[] args)throws Exception{

    Socket c= new Socket("127.0.0.1",18163);

    BufferedReader inFromServer = new BufferedReader(new InputStreamReader(c.getInputStream()));
    DataOutputStream outToServer=new DataOutputStream(c.getOutputStream());

    int min=1,max=10;
    String frase;
    int n1;

    int numcasuale=(min+(int)(Math.random()*((max - min)+1)));

     System.out.println("Num casuale generato: "+numcasuale);

               do{
            frase=inFromServer.readLine();
                   n1=Integer.parseInt(frase);

                   System.out.println("DAL SERVER: PROVO "+n1);

              }while(!(n1==numcasuale));
                    outToServer.writeBytes("UGUALE\n");
        frase=inFromServer.readLine();
         if(frase.equals("CLOSE")){ 
               System.out.println("Esecuzione terminata.");
                       c.close(); 
                       }
  }
} 
```

服务器：

```
public class Server{

  public static void main(String[] args)throws Exception{
        ServerSocket ss = new ServerSocket(18163);

        int min=1,max=10,numcasuale;
        String dallclient;

        while(true){
          Socket c= ss.accept();
          System.out.println("Client connesso: "+ c.getRemoteSocketAddress()); 

          DataOutputStream alclient=new DataOutputStream(c.getOutputStream());

 BufferedReader dalclient =new BufferedReader(new InputStreamReader(c.getInputStream())); 

          dallclient= dalclient.readLine();

                 System.out.println("DAL CLIENT :"+dallclient);

                 do{
                   numcasuale=(min+(int)(Math.random()*((max - min)+1)));
                   alclient.write(numcasuale);
                               dallclient= dalclient.readLine();
                   System.out.println("DAL CLIENT: "+dallclient);
                  }while(!(dallclient.equals("UGUALE")));

                 }alclient.writeBytes("CLOSE\n");

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:13:34.673

我认为在服务器部分，您`\n`在这一行缺少一个：

```
while( !(dallclient.equals("UGUALE")) ); 
```

因为客户端正在发送`"UGUALE\n"`

```
outToServer.writeBytes("UGUALE\n"); 
```

# asp.net - 是否可以在 ASP.NET 负载测试会话中保留 WebTestContext？

> ID：11125385
> 
> 赞同：2
> 
> 时间：2012-06-20T17:58:02.117
> 
> 标签：asp.net, visual-studio, testing, load-testing, webtest

我想使用 Visual Studio 2010 Ultimate Load Test 对企业 Web 应用程序（我没有构建）进行负载测试。我希望每个虚拟用户在开始时登录，并在随机测试运行结束时注销。我可以正确配置负载测试来做到这一点。但是，有一个并发症。会话密钥被注入到 URL 中，如下所示：

```
http://ProductName/(S(ilv3lp2yhbqdyr2tbcj5mout))/System/Container.aspx 
```

我将 Visual Studio WebTest 转换为编码测试，然后使用使用会话特定 URL 的代码对其进行改造。这工作正常。我需要做的是在特定虚拟用户运行的各种测试中保留这个会话编码的 URL，从登录 WebTest 类开始，到注销 WebTest 类。

各个 WebTest 类能够在每个测试的开始和结束时登录和注销。但是，这并不是正常使用的准确表示。此应用程序模拟大型机终端，从不切断 Web 浏览器请求之间的连接或会话。每个会话都是一个长的交互式 HTTP 请求，就像大型机终端与 IBM AS400 等交互一样。用户通常在一天开始时登录大型机，并且（应该）在一天结束时注销。同样，此 Web 应用程序会维护 HTTP 请求，直到用户注销或 IIS 会话超时发生。因此，重要的是我在所有测试之间在 URL 中保持相同的会话，以确保内存泄漏和其他讨厌的错误不会累积。

请分享你的想法！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T06:40:57.630

**问题 1：在测试迭代中保持会话 ID**

您可以将数据存储在跨测试迭代持久的“用户上下文”中。它位于名称为“$LoadTestUserContext”的 WebTestContext 中。（但请注意，此上下文参数仅出现在负载测试运行中，而不出现在独立 Web 测试运行中）

```
// within WebTestPlugin.PreRequest() or MyExtractionRule.Extract()
// e is the corresponding eventargs object...
LoadTestUserContext userContext = (LoadTestUserContext)e.WebTest.Context["$LoadTestUserContext"];
...
// setting the value in the user context (i.e. in the extraction rule)
userContext["sessionId"] = "(extracted session id)";
...
// getting the value from the user context (i.e. in WebTestPlugin PreWebTest event)
e.WebTest.Context["sessionId"] = userContext["sessionId"]; 
```

您必须将 WebTestPlugin（从用户上下文中获取值到 Web 测试上下文中）添加到所有 Web 测试中，以使该值在所有测试中都可用。

**问题 2：仅在负载测试开始和结束时登录/注销**

*   将登录和注销功能提取到它们自己的单独测试中（请记住，注销测试还需要获取存储的 sessionId 的 WebTestPlugin）
*   在 Load Test 中，Edit Test Mix 对话框允许您指定 Initialize 和 Terminate 测试：将这些设置为您刚刚创建的 Login 和 Logout 测试
*   在负载测试场景中，将“新用户百分比”设置为 0。

* * *

**“新用户百分比”设置的一些附加说明**

“新用户百分比”设置名称不佳，并不表示其全部行为。

*   当“新用户”开始测试迭代时，它需要一个新的 $WebTestUserId（并获得一个新的用户上下文，这是您*不*想要的）
*   当非“新用户”开始测试迭代时，它会保留相同的旧 $WebTestUserId（以及您想要的旧用户*上下文*）

到目前为止，一切都很好。但出乎意料的是：

*   每个“新用户”在负载测试期间执行以下操作：

    `Initialize > web test iteration > Terminate`

*   非“新用户”在整个负载测试期间执行以下操作：

    `Initialize > iteration1 > iteration2 > ... > iterationN > Terminate`

换句话说，“新用户”不断地登录和退出（这是你不想要的）。非“新用户”在整个负载测试中仅登录和注销*一次*，并在持续时间内持续运行测试迭代（您确实想要）。

# google-apps-script - 解析我从 UrlFetch 收到的 XML 数据

> ID：11125387
> 
> 赞同：3
> 
> 时间：2012-06-20T17:58:06.850
> 
> 标签：google-apps-script

我想将从 UrlFetch 获得的数据解析到电子表格中，但我得到的只是未定义的，有人可以告诉我我做错了什么

xml 位于地址[https://dl.dropbox.com/u/11787731/Minecraft/bans.xml](https://dl.dropbox.com/u/11787731/Minecraft/bans.xml)

```
function runevery15mins() {
 var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("MC Bans");
 sheet.clearContents();
 var banURL = "https://dl.dropbox.com/u/11787731/Minecraft/bans.xml";

 var banXML = UrlFetchApp.fetch(banURL).getContentText();
 var banDOC = Xml.parse(banXML, false);
 var mcuser = banDOC.bans;

 var x = 0;
 for(var c=0; c>mcuser.length;c++){
   var name = mcuser.getElement("username")[c].getText();
   var date = mcuser.getElement("date")[c].getText();
   var reason = mcuser.getElement("reason")[c].getText();
   var duration = mcuser.getElement("duration")[c].getText();

 } 
 sheet.appendRow([name, date, reason, duration]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:58:34.950

您的代码中有一些小错误。

例如，for 循环中的第二个参数需要是`c<mcuser.length`.

使用 Xml 服务文档，这对我有用

```
function runevery15mins() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("MC Bans");
  sheet.clearContents();
  var banURL = "https://dl.dropbox.com/u/11787731/Minecraft/bans.xml";

  var banXML = UrlFetchApp.fetch(banURL).getContentText();
  var banDOC = Xml.parse(banXML, false);
  // Get all the child nodes from the document element that are 'user' nodes
  var mcusers = banDOC.getElement().getElements('user');

  for(var c=0; c<mcusers.length;c++){
    var user = mcusers[c];
    var name = user.getElement('username').getText();
    var date = user.getElement('date').getText();
    var reason = user.getElement('reason').getText();
    var duration = user.getElement('duration').getText();

    sheet.appendRow([name, date, reason, duration]);
 } 
} 
```

请注意，例如，该`sheet.appendRow`行位于循环内部，而不是您之前的外部。我还删除了 X 变量，因为我没有看到它有任何用途。

我还创建了一个`user`变量，它是一个 XmlElement，以便更容易理解如何获取每个节点的不同内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:06:32.583

你快到了。

看起来您需要深入研究另一个数组。此外，您对电子表格的回调应该在循环中。尝试这个：

```
...
var mcuser = banDOC.bans.user;

for(var i in mcuser){
   var name = mcuser[i].getElement("username").getText();
   var date = mcuser[i].getElement("date").getText();
   var reason = mcuser[i].getElement("reason").getText();
   var duration = mcuser[i].getElement("duration").getText();
   sheet.appendRow([name, date, reason, duration])
 } 
```

# php - Doctrine ODM / MongoDB 不重试查询？

> ID：11125389
> 
> 赞同：1
> 
> 时间：2012-06-20T17:58:12.170
> 
> 标签：php, mongodb, doctrine, doctrine-odm

我正在使用 Doctrine ODM 连接到 MongoDB。我有一个三节点副本集：两个完整副本和一个仲裁者。复制只是为了更高的可用性，我不寻求跨节点分布读取。我的应用程序`MongoCursorException`经常使用消息记录 s `not master and slaveok=false`。我没有看到任何证据表明 mongodb 日志中发生了故障转移事件并且主节点没有更改。更正：**故障转移确实发生**了，但常见的例外`not master and slaveok=false`经常出现，甚至在成功选举后6小时后出现6小时。

该怎么办？我看到我们的[学说 mongodb](http://github.com/doctrine/mongodb)版本包括[（实验性？）重试功能](https://github.com/doctrine/mongodb/pull/35)，但我没有看到启用它的简单方法。

不确定它是否重要，但这是一个 Symfony2 (v2.0) 应用程序。

[https://groups.google.com/d/topic/mongodb-user/6p710Rdycpg/discussion](https://groups.google.com/d/topic/mongodb-user/6p710Rdycpg/discussion)暗示我们*需要*重试（强调我的）：

> 您的应用程序必须编写为重新连接/重试，因为可能会出现任何数量的瞬态（网络）错误，这与**正常操作**期间的滚动升级过程非常相似。

[Mongo PHP 扩展文档](http://php.net/class.mongocursorexception)似乎解释了这一点：

> 如果第一次尝试由于某些原因失败，驱动程序将自动重试“普通”查询（而不是命令）。这是为了在副本集故障转移期间导致更少的异常（尽管您可能仍然需要处理一些）并掩盖暂时的网络问题。

而且我认为`doctrine-mongodb`只是使用 PHP 扩展来实际与 mongod 交谈。所以我有点困惑是否*应该*担心重试配置。

我想我解决了部分问题：按照[Kristina Chodorow 的建议，](https://groups.google.com/d/msg/mongodb-user/3RCCEdQAAYk/ChCI5PEudEgJ)我从连接字符串**中删除了仲裁器**。我不再看到带有 message 的任何 s 。我可能一直在点击[https://jira.mongodb.org/browse/PHP-392](https://jira.mongodb.org/browse/PHP-392)。`MongoCursorException``not master and slaveok=false`

但是，在故障转移期间，我仍然收到一些`MongoCursorException`消息`couldn't determine master`。例如，我刚刚进行了故障转移；根据 mongod 日志，几秒钟后选出了一个新的主节点，但 Web 应用程序甚至在 5 分钟后抛出了该异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:16:24.847

我假设您正在使用与 DoctrineMongoDBBundle 上的 2.0 分支相对应的标签之一（此时最高为 2.2.1）。Symfony 2.1+ 兼容性在捆绑包的标签版本 3+ 中。

配置类在文档管理器级别公开`retry_query`和`retry_connect`选项，默认为零。在 YML 中，配置如下所示：

```
doctrine_mongodb:
    # Other proxy, hydrator and connection configuration options

    default_document_manager: dm1

    document_managers:
        dm1:
            retry_query: 1
            retry_connect: 1
            # Other mapping, metadata and DM options follow 
```

[我意识到捆绑文档](http://symfony.com/doc/master/bundles/DoctrineMongoDBBundle/config.html)中没有提到这一点，所以我只是在[这个提交](https://github.com/doctrine/DoctrineMongoDBBundle/commit/bcfb6aa9cdcf616b1e844bf71090986d88519c2d)中添加了一个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:22:36.353

您是否已将 replicaSet 选项配置为指向您在 MongoDB 中配置的指定副本集？

[Symfony DoctrineMongoDBBundle 文档](http://symfony.com/doc/master/bundles/DoctrineMongoDBBundle/config.html)

查看底部的完整配置。据我所知，您需要在服务器配置行中命名所有服务器，并**在**选项部分中命名副本集。该页面上的文档并没有说得很清楚。

浏览代码。看起来重试系统应该是通过设置来配置的。

```
retryConnect
retryQuery 
```

与数据库名称处于同一级别。

这是我的 Zend Framework 配置的一个示例，它基本上做同样的事情。

```
; Database details
resources.odm.configuration.defaultDB = "test"
resources.odm.connection.options.replicaSet = "test-replica-set"
resources.odm.connection.server = "mongodb://rs1a.testing.com:27017,rs1b.testing.com:27017,rs1c.testing.com:27017"
resources.odm.configuration.retryConnect = 3
resources.odm.configuration.retryQuery = 3 
```

当我没有配置副本集时，我遇到了类似的错误。

# sharepoint - 阅读共享点归档（我是菜鸟）

> ID：11125392
> 
> 赞同：0
> 
> 时间：2012-06-20T17:58:18.953
> 
> 标签：sharepoint, powershell, powershell-2.0

```
. "C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\CONFIG\POWERSHELL\Registration\\sharepoint.ps1"
$spWeb = Get-SPWeb -Identity "http://nycs00058260/sites/usitp"
$splist = $spWeb.Lists["/Lists/OsEM1"]
$splist.GetItems("Item") | ForEach-Object{
 Write-Host $_["Item"]
} 
```

我尝试从归档的“项目”中提取值，但有人说“你不能在空值表达式上调用方法 >>>$splist.GetItems”

有人可以帮我找出原因并解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:09:42.987

`$splist`为空，因为当您设置`$splist = $spWeb.Lists["/Lists/OsEM1"]`它时找不到列表“/Lists/OsEM1”。我不相信您需要“/Lists/”部分。再试一次：

```
$splist = $spWeb.Lists["OsEM1"] 
```

# python - PyTables RuntimeError：迭代期间字典大小改变

> ID：11125397
> 
> 赞同：1
> 
> 时间：2012-06-20T17:58:34.643
> 
> 标签：python, multithreading, synchronization, pytables

我正在尝试在 PyTables 中编写一个 HDF，我目前正在我的一个线程中抛出这个运行时异常。顺便说一句，我正在锁定线程访问以在 PyTables 中编写特定表。

```
Exception in thread ICE_USF_T:
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
    self.run()
  File "C:\Users\jacob.bennett\development\MarketDataReader\IO\__init__.py", line 16, in run
    self.socket.rec()
  File "C:\Users\jacob.bennett\development\MarketDataReader\IO\MarketSocket.py", line 32, in rec
    self.parser.parse(self.sock.recv(10240))
  File "C:\Users\jacob.bennett\development\MarketDataReader\Parser\Parser.py", line 56, in parse
    Interface.writeTradUpdate(TradeUpdate(instrumentId, timestamp, messageType, tradeType, price, quantity))
  File "C:\Users\jacob.bennett\development\MarketDataReader\PyTablesInterface\Interface.py", line 19, in writeTradUpdate
    TradeDataWrapper.updateTrade(update.getInstrumentId(), update.getTimeStamp(), price, quant, update.getYearMonth(), update.getDay())
  File "C:\Users\jacob.bennett\development\MarketDataReader\PyTablesInterface\TradeDataWrapper.py", line 44, in updateTrade
    file.flush()
  File "C:\Python27\lib\site-packages\tables\file.py", line 2107, in flush
    for path, refnode in self._aliveNodes.iteritems():
RuntimeError: dictionary changed size during iteration 
```

# ios - iOS 应用首次运行用户教程

> ID：11125398
> 
> 赞同：0
> 
> 时间：2012-06-20T17:58:37.823
> 
> 标签：ios, highlight

我想在我的应用程序中添加一个集成的欢迎教程，它只突出显示几个按钮并教育用户一些功能是什么。我记得我在谷歌应用程序上看到过这个。是否有关于如何完成此操作的教程，或者它只是一个播放看起来像应用程序的视频文件.. 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T23:15:42.673

我同意詹姆斯的观点，用户控制的帮助/教程比视频更好。让用户控制在线帮助进行和/或取消的速度。更好的是，我喜欢将帮助集成到应用程序本身中，例如，当他们第一次访问特定屏幕时向用户显示帮助/提示，​​或者他们点击一个小问号按钮以弹出提示/帮助。

不过，我必须承认，我已经改变了对应用程序中集成帮助/提示的想法，现在倾向于认为它是设计失败。如果应用程序不直观且不易被发现，那么我作为设计师就失败了。我可以很容易地想象到需要在线帮助的足够复杂的应用程序，但是在您将时间投入到帮助/提示上之前，我敦促您考虑重新设计用户界面以消除对它的需求。一些最好的应用程序很直观，根本没有任何帮助屏幕。

但是，如果您要进行在线帮助，常见的解决方案是：

1.  向第一次使用的用户展示一系列全屏帮助页面，他们可以按照自己的节奏一次点击一个，重点强调视觉元素而不是文本描述。这是最接近你原来的问题。如果您愿意，您甚至可以在此帮助屏幕上为视觉元素的外观设置动画（给它一点类似视频的感觉），但让用户自行进入下一个屏幕（如果您需要多个屏幕）步伐。（您可以通过让主视图控制器确定这是否是用户第一次使用该应用程序来实现此效果，如果是，则使用 pushViewController/presentViewController 转到帮助屏幕（如果有其他帮助屏幕，则再次使用），并且然后完成后，弹出/关闭回到主视图控制器。）

2.  用户第一次进入特定屏幕时，要么显示很少的帮助/提示。或者，您可以将此帮助覆盖在屏幕本身的顶部，使其后面的实际屏幕变暗，以便用户知道他们处于不同的“帮助模式”，用小指针或其他视觉指示器将您的帮助链接到某些设计功能在帮助屏幕后面的屏幕上。（您可以通过让相关屏幕跟踪之前是否访问过它们来做到这一点，如果是，则覆盖帮助提示，当用户点击屏幕上的任何位置时，这些提示将被关闭。）

3.  放置一个帮助按钮，这将导致用户帮助提示在屏幕上弹出。这种方法的一个很好的例子是 Apple 的 iPad 版 iPhoto，它不仅包括显示在屏幕上各种控件旁边的提示/提示，而且在需要时还包含指向更实质性描述的链接。

最后，我建议 (a) 重新设计您的应用程序，这样就不需要帮助；但是，如果您不能 (b) 选择一个应用程序可以特别优雅地展示在线帮助，然后看看您是否可以自己重现这种效果。我不知道任何关于如何做到这一点的好的教程，但坦率地说，这些都不是非常复杂，所以你真的不应该有太多的问题来重现你想要的效果。如果您确实遇到了障碍，请回到 SO，并提出有关如何制作特定视觉效果的具体问题，我相信我们很乐意提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:45:25.453

你可以播放一个看起来像应用程序的视频，但如果他们想停止它，那很混乱而且看起来很傻，因为它显然是一个视频。更好的方法是创建自己的自定义覆盖视图，指向不同的按钮并为它们提供信息。通过这个实现，用户可以随时“停止”教程，而不必观看 40 秒的视频而没有捷径可走；您也可以通过这种方式添加一个选项以更轻松地再次查看教程。

# eclipse - 奇怪的“NoClassDefFound”错误

> ID：11125399
> 
> 赞同：0
> 
> 时间：2012-06-20T17:58:44.207
> 
> 标签：eclipse, eclipse-plugin

这个真的把我难住了。

设想：

*   Windows 7 64 位
*   Lotus Notes (8.5.2)
*   日食太阳神
*   带有 JDK 7 的 Java 6 更新 33（64 位）
*   为插件项目安装的 JRE 设置为使用安装在 Notes 下的 JVM（即`C:\NotesDev\Notes\jvm`）。
*   Target Platform 使用上面安装的 JRE，并在 Locations 选项卡上导入`framework\rcp\eclipse`和子文件夹。`framework\shared\eclipse`我可以看到两个文件夹之间总共有 713 个插件可用。
*   运行配置显示总共选择了 714 个插件（其中包括来自目标平台的 713 和我的）。我可以看到这个列表同时包含`org.eclipse.swt.win32.win32.x86_3.5.2.v34557f-RCP20100710-0200.jar`和`com.ibm.rcp.swtex.win32_6.2.2.20100729-1241.jar`。

问题：

1.  如果我没有在构建路径中明确包含上述两个 JAR 文件，应用程序将无法编译（尝试导入`org.eclipse.swt.widgets.Display`和`com.ibm.rcp.swt.swidgets.SToolItem`）。
2.  `NoClassDefFound`如果我在构建路径中包含上述 JAR 文件，应用程序会编译，但由于异常而不会运行。

问题：

1.  为什么我需要首先包含这些文件？它们是工作区的一部分，我引用的其他 JAR 文件似乎都不需要显式引用。
2.  为什么这在运行时失败？我的理解是，`NoClassDefFound`发生这种情况是因为该类在编译时可用，但在运行时不可用。但这发生在同一台机器上。（我正在尝试在本地调试它，我什至已将 JAR 文件标记为导出！）

在我看来，如果文件列在运行时配置的加载插件选项卡中，我就不必明确引用它们。我对此不正确吗？（请客气！我承认我不是这方面的专家。）

提前致谢。

PS 值得注意的是，如果我将文件包含在构建路径中，我可以看到它们在`MANIFEST.MF`文件中都被正确引用`.CLASSPATH`。

**清单.MF 内容**

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Plugin
Bundle-SymbolicName: com.satuit.crm.plugin;singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: com.satuit.crm.plugin.Activator
Bundle-Vendor: Satuit Technologies, Inc.
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.apache.axis,
 org.eclipse.ui;bundle-version="3.4.2",
 org.eclipse.core.runtime;bundle-version="3.4.0",
 org.eclipse.ui.views;bundle-version="3.3.1",
 com.ibm.rcp.jfaceex;bundle-version="6.2.2"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ActivationPolicy: lazy
Export-Package: com.satuit.crm.plugin,
 com.satuit.crm.plugin.document,
 com.satuit.crm.plugin.ui,
 com.satuit.crm.webservice.agent
Bundle-ClassPath: .,
 /NotesDev/Notes/framework/rcp/eclipse/plugins/org.eclipse.swt.win32.win32.x86_3.5.2.v3557f-RCP20100710-0200.jar,
 /NotesDev/Notes/framework/rcp/eclipse/plugins/com.ibm.rcp.swtex.win32_6.2.2.20100729-1241.jar,
 /NotesDev/lib/activation-1.1.1.jar,
 /NotesDev/lib/mail.jar,
 /NotesDev/lib/commons-lang3-3.1.jar,
 /NotesDev/lib/SatuitCRM_XML_API2.jar 
```

** .CLASSPATH 内容 **

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry exported="true" kind="con" path="org.eclipse.pde.core.requiredPlugins"/>  
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.eclipse.swt.win32.win32.x86_3.5.2.v3557f-RCP20100710-0200.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/com.ibm.rcp.swtex.win32_6.2.2.20100729-1241.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Workspace/lib/commons-lang3-3.1.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Workspace/lib/activation-1.1.1.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Workspace/lib/mail.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Workspace/lib/SatuitCRM_XML_API2.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.apache.axis_1.4.0.20100729-1241/axispatch.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.apache.axis_1.4.0.20100729-1241/axis.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.apache.axis_1.4.0.20100729-1241/jaxrpc.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.apache.axis_1.4.0.20100729-1241/saaj.jar"/>
    <classpathentry exported="true" kind="lib" path="C:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.apache.axis_1.4.0.20100729-1241/wsdl4j-1.5.1.jar"/>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:09:33.160

当找不到 Display 或 SToolItem 引用的类时，您也可能会收到 NoClassDefFound 错误。我知道确切找出找不到哪个类的唯一方法是使用 -verbose 选项运行 java 应用程序。您获得的日志记录比您想看到的要多得多，但是在所有这些输出行中的某个地方是一条错误消息，命名了无法找到的特定类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:32:00.153

OSGi MANIFEST 不接受系统上 jar 的绝对路径（它用于将 jar 包含在包中），如果您更新 Java 构建路径，它可能在部署时不起作用。

从根本上说，您正在编写一个 OSGi 包，并且必须小心使用类路径。看起来您必须更改 2 个不同的问题。

1.  org.eclipse.swt.win32.win32.x86_3.5.2.v3557f-RCP20100710-0200.jar 和 com.ibm.rcp.swtex.win32_6.2.2.20100729-1241.jar 已经是 OSGi 包。它们需要在您的目标平台中。然后，您需要将它们添加到Required-Bundles，就像com.ibm.rcp.jfaceex 一样。老实说，它们看起来像碎片。在这种情况下，应该自动获取 org.eclipse.swt.win32.win32.x86，因为您使用了 org.eclipse.ui，它重新导出了 org.eclipse.swt。可能是您需要在 com.ibm.rcp.swtex 上添加一个 Require-Bundle（win32 swtex 片段的可能主机包）

2.  您添加到 Bundle-ClassPath 的所有这些 jar。包中不需要的类是否已经在您的目标平台中？理想情况下，您希望从现有的 OSGi 包中使用它们。至少 org.apache.axis 已经是一个 OSGi 包。对于其余部分，如果您确实需要这些 jar 中的类，并且它们在目标平台中还没有作为导出包存在，则需要将它们转换为 OSGi 包并将它们包含在目标平台中**，或者**实际上将它们包含在您的 Eclipse 项目，然后从那里将它们添加到您的 Bundle-ClassPath （这将是一个项目根相对路径）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:59:27.817

好吧，事实证明，OSGI 清单*将*接受类路径上的绝对路径。惊喜，惊喜。

是否*应该*是另一回事。任何人都可以猜测，一旦部署应用程序会对应用程序产生什么影响。但是运行时和编译时错误已经消失，而且到目前为止似乎还没有重新出现。

再一次，我们认为的事实和实际事实证明是两个截然不同的东西。

# mysql - 为什么相同的查询给出两个不同的结果？

> ID：11125400
> 
> 赞同：5
> 
> 时间：2012-06-20T17:58:44.627
> 
> 标签：mysql, sql, optimization, indexing

我创建了两个表和插入的值，如下所示。

## 表格1

```
create table maxID (myID varchar(4));

insert into maxID values ('A001');
insert into maxID values ('A002');
insert into maxID values ('A004');
insert into maxID values ('A003'); 
```

## 表 2

```
create table maxID2 (myID varchar(4) PRIMARY KEY);

insert into maxID2 values ('A001');
insert into maxID2 values ('A002');
insert into maxID2 values ('A004');
insert into maxID2 values ('A003'); 
```

当我执行查询

```
SELECT myId, @rowid:=@rowid+1 as myrow 
FROM maxID, (SELECT @rowid:=0) as init
ORDER BY myrow desc
LIMIT 1; 
```

我得到输出

```
+++++++++++++
myid + myrow
+++++++++++++
A003 + 4
+++++++++++++ 
```

## 和

当我执行查询

```
SELECT myId, @rowid:=@rowid+1 as myrow 
FROM maxID2, (SELECT @rowid:=0) as init
ORDER BY myrow desc
LIMIT 1; 
```

我得到输出

```
+++++++++++++
myid + myrow
+++++++++++++
A004 + 4
+++++++++++++ 
```

两个表之间的区别在于，在第二个表中我的 myID 为`PRIMARY KEY`.

***[您可以在www.sqlfiddle.com](http://sqlfiddle.com/#!2/f375e/5)查看上述数据/结果。***

## 我的问题是

为什么当查询相同时我得到两个不同的结果？

***注意：这个问题与我的老问题******[Getting last record from mysql](https://stackoverflow.com/questions/8923366/getting-last-record-from-mysql)***有点相关，我几乎得到了答案，Yak 告诉我行的顺序不能保证。:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T18:04:55.837

这是因为当所选的字段集*完全*包括在给定的索引字段集中时，该索引用于检索数据而不是FullScan结果。

由于索引具有默认排序顺序，当原始表数据没有时，使用索引提取的数据因此以不同于来自全表扫描的顺序出现。

在您的情况下，当您使用主键时，第 4 行确实是第 4 行，因为内部 mysql（oracle，sql server ...）以这种方式组织它以更快地查找数据。

请注意，偶然地，您可能在两个查询中都获得了相同的结果，只是因为没有证明默认选择的结果顺序确实与插入的顺序相关。

最后，让我警告您，如果您计划在 mysql 中添加具有特定顺序的索引（例如[此处](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)描述的），以便以 DESC 顺序检索行，您不能这样做，因为它不是mysql中允许的功能：

> index_col_name 规范可以以 ASC 或 DESC 结尾。这些关键字被允许用于指定升序或降序索引值存储的未来扩展。目前，它们被解析但被忽略；索引值始终按升序存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T18:18:51.367

`Primary keys are returned in sorted order by default`

这就是为什么您会为两个查询获得不同的输出。

您也可以查看另一个示例：[here is the example](http://sqlfiddle.com/#!3/f57b2/1)

# python - 使用正则表达式剪切以特定字符开头的字符串？

> ID：11125401
> 
> 赞同：2
> 
> 时间：2012-06-20T17:58:53.263
> 
> 标签：python, regex

我正在处理一个平面文件，数据是逐行格式的，像这样

```
... blah blah blah | sku: 01234567 | price: 150 | ... blah blah blah 
```

我想提取 sku 字段，它是 8 字符长的数字。但是，我不确定是否应该使用拆分或正则表达式，我不太擅长在 python 中使用正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:13:07.970

假设您的`sku`值始终为 8 个字符长，并且始终以“sku”开头，并且可能还有一些“:”（中间有或没有空格），那么我将使用正则表达式`r'sku[\s:]*(\d{8})'`：：

```
>>> import re
>>> string = '... | sku: 01234567 | price: 150 | ... '
>>> re.findall(r'sku[\s:]*(\d{8})', string)[0]
'01234533' 
```

如果您的`sku`值长度可能是可变的，只需使用`r'sku[\s:]*(\d*)'`：

```
>>> import re
>>> string = '... | sku: 01234 | price: 150 | sku: 99872453 | blah blah ... '
>>> re.findall(r'sku[\s:]*(\d*)', string)[0]
'01234'
>>> re.findall(r'sku[\s:]*(\d*)', string)[1]
'99872453' 
```

**编辑**

如果你的 'sku' 后面跟着一些其他字符，比如`sku1`, `sku2`, `sku-sp`, `sku-18`or `sku_anything`，你可以试试：

```
>>> re.findall(r'sku\D*(\d*)', string)[0] 
```

这完全等同于：

```
>>> re.findall(r'sku[^0-9]*([0-9]*)', string)[0] 
```

这是非常普遍的。它将匹配以 开头的任何内容`sku`，然后是任何未确定数量的非十进制字符（`\D*`或`[^0-9]*`），以及一些十进制字符（`\d*`或`[0-9]*`）。它将返回后者（一串长度不确定的十进制字符）。

现在，我用来构建这些表达式的东西是什么意思：

### 量词

*   `*`：当跟随单个字符或一类字符时，该符号表示该表达式将匹配其所跟随的任何未确定数量的字符或类（`*`表示“0或一些”，`+`表示“至少一个”，`?`表示“0或1 ”）。
*   the`{}`的使用方式与 the `*`, the`+`和 the `?`, ie 相同。他们跟随一个字符或一类字符。它们也是量词。如果你说`c{4}`，它将匹配由恰好 4 个 'c' 组成的任何字符串。如果您说`c{1,6}`它将匹配由 1 到 6 'c' 组成的任何字符串。

### 班级

*   `[]`: 定义一类字符。`[abc]`表示任何字符“a”、“b”或“c”。`[a-z]`表示任何*小写*字母。`[A-Z]`、任意大写字母、`[a-zA-Z]`任意大小写字母、[0-9]任意十进制字符。如果你想用点或逗号匹配小数，加上加号、减号和“e”（例如，对于指数），只需说`[0-9,\.+-e]`.
*   类的`^`内部 - 用`[]`, 定义的意思是“倒置的类”，除了类之外的所有东西。然后，`[^0-9]`表示除十进制字符之外的`[^a-z]`任何内容，除小写字母之外的任何内容，等等。

### 预定义类

这些是在 python 中预定义的类，用于使正则表达式语法更友好：

*   `\s`: 将匹配任何间距字符（空格、制表符等）
*   `\d`: 将匹配任何十进制字符（0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ...这相当于`[0-9]`，这是在正则表达式中表示字符类的另一种方式）
*   `\D`: 将匹配任何*非*十进制字符...这等效于`[^0-9]`，这是在正则表达式中表达排除的字符类的另一种方式。
*   `\S`: 将匹配任何*非*空格字符...
*   `\w`: 将匹配任何“单词字符”
*   `\W`: 将匹配任何*非*单词字符
*   ...

### 团体

*   `()`定义了一些组。它们有很多用途。在这里，在 中`findall`，该组突出显示您希望表达式返回的内容 ... 即。`(\d{8})`或`[0-9]{8}`表示您希望表达式仅返回匹配的完整字符串中的 8 个十进制字符的字符串。

正则表达式真的很容易使用，而且非常有用。您只需要很好地了解他们可以做什么和他们不能做什么（它们仅限于常规语言。例如，如果您需要处理嵌套事物的级别，或者使用上下文无关语法定义的其他语言，那么正则表达式就赢了不够）。您可能希望查看以下页面：

*   [http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)
*   [http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:15:20.400

像下面这样的东西应该可以满足您的需要，而不依赖于确切的间距和定位：

```
>>> s = '... blah blah blah | sku: 01234567 | price: 150 | ... blah blah blah'
>>> match_obj = re.search(r'sku\s*:\s*(\d+)', s)
>>> match_obj.group(1)
'01234567' 
```

在您尝试使用该`.group()`方法访问匹配对象之前，您应该检查是否实际发生了匹配，即：`if match_obj: # do something with match`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:01:45.337

如果字符串中的所有 8 位数字都是 SKU 数字，则可以使用

```
re.findall(r"\b\d{8}\b", mystring) 
```

`\b`单词边界锚确保不会匹配较长数字/单词中的 8 位子字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:05:12.593

在我看来，您应该使用拆分、“sku:”和“|” 充当分隔符：

```
s = "blah blah blah | sku: 01234567 | price: 150 | ... blah blah blah"
s.split("sku:")[1].split("|")[0] 
```

这是检查：

```
s = "blah blah blah | sku: 01234567 | price: 150 | ... blah blah blah"
s1 = s.split("sku:")
if len(s1) == 2:
   print s1[1].split("|")[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:14:15.457

如果所有管道分隔的字段也是（键：值），那么您最好保留其余数据，除非您需要它——您已经不得不解析字符串......

```
s = "sku: 01234567 | price: 150"
dict( k.split(':') for k in s.split('|') )
# {sku': ' 01234567 ', ' price': ' 150'} 
```

可能想要修剪一些多余的前导空间

# java - JAVA RESTFull 服务器以“%”（百分比）作为值 @FormParam 获取 POST 数据

> ID：11125403
> 
> 赞同：0
> 
> 时间：2012-06-20T17:58:58.047
> 
> 标签：java, rest, post, parameters, jersey

我正在制作和**REST 客户端**，它接收带有数据的**POST**以用作查询的**过滤器**。我的问题是当客户向我发送一个**“%”**来搜索所有值时。

泽西岛向我发送以下错误

```
11:36:35,857 ERROR [Jersey REST Service]:260 - Servlet.service() for servlet Jersey REST Service threw exception
java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: "%ip%" 
```

产生此错误的代码是：

```
@POST
    @Path("/Comercial/{campo}")
    @Produces("application/json; charset=utf-8")
    public static Response findAll(
                @PathParam(value = "campo") String campo,
                @FormParam("filtro") String filtro){

        Object resposta = null;

        resposta = new JSONArray();
        campo = campo.substring(7);
        resposta = SequenciaControl.findDataByTable(campo,filtro);

        return Retorno.send(resposta);
    } 
```

如果我使用@QueryParam 将其作为 GET 接收，则此方法有效，但我需要将其作为 POST

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:37:33.597

`%25`在将其作为请求发送时，必须使用该百分比进行转义。

所以，`"%ip%"`应该是`"%25ip%25"`

# php - .htaccess 仅适用于 www。子域

> ID：11125404
> 
> 赞同：1
> 
> 时间：2012-06-20T17:59:01.243
> 
> 标签：php, apache, .htaccess

如何构造我的 .htaccess 文件，以便将 www 添加到地址 mysite.com 的开头，但不添加 www。到其他子域的开头，例如 test.mysite.com？我的 .htaccess 文件目前看起来像这样：

```
Options -Multiviews
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:02:05.550

就像是：

```
RewriteCond %{HTTP_HOST} ^mysite.com 
```

代替

```
RewriteCond %{HTTP_HOST} !^www\. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:02:32.903

我只是不知道只获取域命名字符的该死规则，所以我会尝试这个，但它可能会在某些主题上失败：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^[a-zA-Z0-9\-]+(\.[a-z]{2,4})+$
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php 
```

这将强制所有以一个单词和一个 TLD 开头的域被转发到 www.samedomain.tld 但子域不会被击中......

# java - 使用 Jackson JSON 查找字段类型

> ID：11125409
> 
> 赞同：1
> 
> 时间：2012-06-20T17:59:26.797
> 
> 标签：java, reflection, annotations, jackson

我正在尝试使用杰克逊进行反思。更具体地说，我想检索特定类中每个字段的类型、名称和值。我可以使用 获取字段的名称和值`ObjectMapper`，但似乎找不到检索类型的方法。我的代码如下：

```
ObjectMapper mapper = new ObjectMapper();

University uni = new University();
String uniJSON = mapper.writeValueAsString(uni);
System.out.println(uniJSON); 
```

输出：

```
{"name":null,"ae":{"annotationExampleNumber":0},"noOfDepartments":0,"departments":null} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:59:14.850

您可以使用[generateJsonSchema](http://jackson.codehaus.org/1.8.8/javadoc/org/codehaus/jackson/map/ObjectMapper.html#generateJsonSchema%28java.lang.Class%29)方法如下

```
try{
    ObjectMapper json=new ObjectMapper();
    json.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    System.out.println(json.generateJsonSchema(University.class).toString());
}catch(Exception e){
    throw new RuntimeException(e);
} 
```

这会生成一个 json 模式，您可以读取该模式以获取字段数据类型。请注意，此方法生成[JSON](http://www.json.org/)模式，因此，它仅使用 JSON 允许的数据类型（字符串、数字、布尔值、对象、数组和 null）。

如果你想要 Java 类型，你应该使用反射。请注意，存在循环引用、数组等复杂问题。如果您知道要识别其类型的属性的名称，则可以执行类似的操作。如果您传递像“principal.name”这样的参数，这适用于嵌套属性

```
private Class<?> getPropertyType(Class<?> clazz,String property){
try{
    LinkedList<String> properties=new LinkedList<String>();
    properties.addAll(Arrays.asList(property.split("\\.")));
    Field field = null;
    while(!properties.isEmpty()){
        field = clazz.getDeclaredField(properties.removeFirst());
        clazz=field.getType();
    }
    return field.getType();
}catch(Exception e){
    throw new RuntimeException(e);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:38:07.560

使用 Jackson 注释注释您的域类以执行此操作：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="type")
public class University { 
```

有关更多信息，请参见：http: [//www.cowtowncoder.com/blog/archives/2010/03/entry_372.html](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html)

# javascript - Facebook 的 Like Button 如何跨域访问将 HTML 添加到父窗口？

> ID：11125416
> 
> 赞同：1
> 
> 时间：2012-06-20T17:59:50.623
> 
> 标签：javascript, facebook, cross-domain

免责声明：我将尽力解释我所追求的，但我对跨域策略的了解非常有限。我在 Stack 周围搜索过，但如果我错过了答案，请告诉我。

我们在我们的网站上实现了标准的[Facebook Like/Send 按钮](http://developers.facebook.com/docs/reference/plugins/like/)。`Like`和按钮位于指向 facebook.com的`Send`iFrame 中。

当您单击该`Send`按钮时，HTML 将作为 Facebook iFrame 的同级附加（即添加到我们的 DOM）。

我想知道的是 FB 如何能够在不违反跨域政策的情况下将 HTML 添加到我们网站上的 div 中。

这是我的[小提琴](http://jsfiddle.net/tracyfu/L4a9N/)。要查看发生了什么，请在单击 时检查 DOM `Send`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:06:27.707

感谢@CBroe 指出我的答案：

通过[Mozilla](https://developer.mozilla.org/en/DOM/window.postMessage)

`window.postMessage`是一种安全启用跨域通信的方法。通常，只有当且仅当执行它们的页面位于具有相同协议（通常都是 http）、端口号（http 的默认值为 80）和主机（模document.domain 被两个页面设置为相同的值）。window.postMessage 提供了一种受控机制，以在正确使用时以一种安全的方式规避此限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:17:31.820

因为您使用 javascript 添加发送按钮，而不是使用 iframe。当您的页面正在加载/刚刚加载后，iframe 正在生成。

由于这个原因，脚本能够访问您和 Iframe 的内容和 DOM 元素并对其进行编辑。正如您所知道和提到的，iframe 无论如何都无法到达它的父级。

# asp.net - 如何在 GridView asp.net 中查找关于数据键的行索引

> ID：11125418
> 
> 赞同：1
> 
> 时间：2012-06-20T17:59:51.383
> 
> 标签：asp.net, c#-4.0, gridview, datakey

我有一个启用分页的gridview控件，我有一个datakey值，我想找到一个关于datakey值的行索引，我有这个代码，

```
protected int GetRowIndex(object userID)
{
  for(int i = 0l i <= GridView1.DataKey.Count -1 ; i++)
  {
    if(GridView1.DataKey[i].Value == userID)
    {
       return i;
    }   

  } 
```

}

但是这段代码存在问题，如果在该页面中找不到该用户 ID，它将返回 0，我的问题是如何更改页面索引以在所有页面中查找行。我正在使用 gridview 自己的分页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:52:57.403

对此没有直接支持，因为 GridView 没有将所有 DataKeys 存储在某个地方以供其搜索。它仅保留用于当前页面的一组 DataKey。更改页面索引不会自动“加载”该页面的 DataKey，以便您可以搜索每个页面。

您必须通过添加一个函数来解决这个问题，当给定用户 ID 时，该函数将返回要显示的页面。它可能被命名为 GetPageFromUserID(object userID)。此功能需要使用与网格相同的排序顺序、页面大小和过滤条件来搜索您的数据存储。

即使使用您将设置到 GridView.PageIndex 属性中的页面索引，您仍然必须在 GridView 上调用 DataBind() 以使其从数据库中加载行（和 DataKey），以便您可以使用上面的代码来查找行索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-21T05:39:37.427

```
 private static int IndexOfGridView(GridView gridView, int dataKeyId, int index)
    {
        foreach (GridViewRow gvRow in gridView.Rows)
        {
            var dataKey = gridView.DataKeys[gvRow.DataItemIndex];
            if (dataKey == null || (int)dataKey.Value != dataKeyId) continue;
            index = gvRow.DataItemIndex;
            break;
        }
        return index;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T18:36:33.273

您可能会在 GridView 中找到行索引：

```
rowIndex = theGridView.DataKeys.IndexOf(theDataKeyValue) 
```

我在一个我们仍在维护的旧 ASP.net VB 项目中发现了这个，希望它有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T06:24:14.660

```
string user_id = GridView1.SelectedDataKey["userID"].ToString(); 
```

在这里，您可以在 gridview 中获取所选数据的用户 ID

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
          DataKeyNames="userID" OnRowDataBound="GridView1_RowDataBound"
                OnSelectedIndexChanged="GridView1_SelectedIndexChanged" >

   <asp:CommandField ShowSelectButton="True"> </asp:CommandField>

    // write code

  </asp:GridView> 
```

你在 Gridview 中做分页概念，它最好在后端本身做，然后你会很容易显示数据，即你一次取 10 个数据，同时点击第一页，就像明智地一样。我在转发器中做过同样的概念与gridview相比很容易......

# postgresql - 在 Postgres 中使用触发器和序列创建自动增量字段

> ID：11125419
> 
> 赞同：6
> 
> 时间：2012-06-20T17:59:51.863
> 
> 标签：postgresql

我正在尝试使用触发器和序列创建一个自动增量字段（如 SERIAL）。我知道只能在字段上使用序列或序列类型，但我必须使用两种方法（触发器和安全）来解决这个问题

```
CREATE SEQUENCE AlimentosSequencia;

CREATE OR REPLACE FUNCTION AlimentoFuncion()
  RETURNS "trigger" AS
$BODY$
    BEGIN
      New.id:=nextval('AlimentosSequencia');
      Return NEW;
    END;
$BODY$

LANGUAGE 'plpgsql' VOLATILE;

CREATE TRIGGER AlimentosTrigger
  BEFORE INSERT
  ON alimento
  FOR EACH ROW
  EXECUTE PROCEDURE AlimentoFuncion(); 
```

我尝试了这种组合但不起作用，表 alimento 只有两个字段，整数 id（带触发器和序列的自动增量）和 varchar 名称。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T12:04:45.287

正如其他用户告诉您的那样，您不需要使用触发器。您可以像这样声明表：

```
CREATE SEQUENCE AlimentosSequencia;

CREATE TABLE alimento (
  id integer NOT NULL DEFAULT nextval('AlimentosSequencia') PRIMARY KEY
 ,name VARCHAR(255)); 
```

当您插入新记录时：

```
INSERT INTO alimento (name) VALUES ('lemon'); 
```

另一种可能性是将**id**字段声明为[*serial type*](http://www.postgresql.org/docs/9.1/static/datatype-numeric.html#DATATYPE-SERIAL)，它会自动创建序列。

**更新：** 好的，这是一个练习。那我不明白是什么问题？我已经测试了这段代码：

```
CREATE SEQUENCE AlimentosSequencia;

CREATE TABLE alimento (
  id integer NOT NULL PRIMARY KEY
 ,name VARCHAR(255));

 CREATE OR REPLACE FUNCTION AlimentoFuncion()
 RETURNS "trigger" AS
 $BODY$
 BEGIN
   New.id:=nextval('AlimentosSequencia');
   Return NEW;
 END;
 $BODY$
 LANGUAGE 'plpgsql' VOLATILE;

 CREATE TRIGGER AlimentosTrigger
 BEFORE INSERT
 ON alimento
 FOR EACH ROW
 EXECUTE PROCEDURE AlimentoFuncion();

 INSERT INTO alimento (name) VALUES ('lemon'); 
```

它可以毫无问题地工作。

# c# - DataContext 不包含参数为 0 的构造函数

> ID：11125420
> 
> 赞同：2
> 
> 时间：2012-06-20T17:59:52.523
> 
> 标签：c#, linq-to-sql, constructor

我正在学习这个，所以请耐心等待......我正在尝试创建数据库对象来访问表。

```
AppDatabaseDataContext appDb = new AppDatabaseDataContext(); 
```

这给了我一个错误，所以我创建了构造函数......

```
public AppDatabaseDataContext()
{

} 
```

现在这告诉我它`System.Data.Linq.DataContext`不包含带 0 个参数的构造函数。为什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:09:13.000

您需要指定一个连接字符串。如果您知道它总是相同的（例如，localhost），您可以在无参数构造函数中对其进行硬编码：

```
public AppDatabaseDataContext()
    : this(@"Data Source=localhost;Initial Catalog=Foo;Integrated Security=True")
{
} 
```

请注意我们如何链接构造函数来调用使用连接字符串的版本。这样，您可以使用无参数构造函数实例化数据上下文，它将使用此默认连接字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T21:29:36.053

有时 LINQ2SQL 可能会在属性窗口上变得混乱，并且连接字符串可能会消失。如果可以，重新启动，删除 de Dbml，但不要忘记从 web.config 中删除连接字符串。将新的 Linq2SQL 添加到您的项目中，并让 LINQ2SQL 在 web.config 中为 U 创建连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T11:16:30.117

真奇怪。过去每次我使用“LINQ to SQL”DataContext 时，它总是为我创建一个 0 参数构造函数。

但是今天，我发现有时，在设计器中，它不允许我在“属性”窗口中选择特定的（已知的）连接字符串......当这种情况发生时，它拒绝创建这个 0 参数构造函数。

解决方案是自己手动添加。

我的 web.config 包含一个名为的连接字符串`MikesConnectionString`：

```
<configuration>
  <connectionStrings>
    <add name="MikesConnectionString" connectionString="Data Source=localhost;Initial Catalog=MikesDatabase;Integrated Security=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

...所以在我的**survey.designer.cs**文件中，我添加了这个：

```
public SurveyDataContext() :
            base(global::System.Configuration.ConfigurationManager.ConnectionStrings["MikesConnectionString"].ConnectionString, mappingSource)
{
     OnCreated();
} 
```

任务完成。

但是很奇怪。很奇怪。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-12T09:37:16.803

```
Just Change your connection string just like  
<connectionStrings>
    <add name="DBLabConnectionString" 
         connectionString="Data Source=.\SQLExpress;Initial Catalog=DatabaseName;
         Integrated Security=True" 
         providerName="System.Data.SqlClient" />
 </connectionStrings> 
```

# refresh - 在 Java 中刷新 JPanel

> ID：11125421
> 
> 赞同：0
> 
> 时间：2012-06-20T17:59:53.493
> 
> 标签：refresh, jpanel, graphics2d

我正在尝试通过按钮画​​线。

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    g2 = (Graphics2D) g;
    g2.setColor(Color.BLACK);
    g2.setStroke(new BasicStroke(2));
    for (int i=0;i<18;i++)
    {
        g2.draw(new Line2D.Double(2+i*20, 0, 2+i*20, 260));
        g2.draw(new Line2D.Double(0, 2+i*20, 360, 2+i*20));
    }
    g2.setColor(Color.RED);
}
public void drawDiagonallyLineDownLeft()
{
    int newXCoord=xDrawCoord+20;
    int newYCoord=yDrawCoord+20;
    g2.drawLine(xDrawCoord, yDrawCoord, newXCoord, newYCoord);
    xDrawCoord=newXCoord;
    yDrawCoord=newYCoord;
    repaint();
} 
```

drawDiagonallyLineDownLeft 方法绘制 Line。我尝试在构造函数中使用它，它工作正常。这是 JButton 的监听器

```
public void actionPerformed(ActionEvent arg0) 
            {
                panel.drawDiagonallyLineDownLeft();
                panel.revalidate();
                panel.repaint();
            } 
```

它也可以正常工作。我以方法在控制台中打印了消息，打印正常。但是当我按下按钮时没有线路。我认为，我应该以某种方式刷新它，我使用了所有我知道的方法，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:34:22.500

当您调用 repaint 时，所有绘图都被擦除，您必须在方法中进行绘制`paintComponent(Graphics g)`

`paintComponent(Graphics g)`在某些情况下会自动调用（窗口调整大小等）

# php - 在非线程环境中使用线程安全扩展（APC）有什么危害吗？(PHP)

> ID：11125424
> 
> 赞同：5
> 
> 时间：2012-06-20T18:00:08.830
> 
> 标签：php, multithreading, thread-safety, compatibility, apc

我打算使用[带有 Progress Bar 的 Simple PHP Upload](http://www.johnboy.com/php-upload-progress-bar/)，它说我需要 APC 扩展。我有两个 APC 选项，线程安全的和非线程安全的。

使用 phpinfo，我发现启用了线程安全，但我不确定 php 是否真的在运行多线程。我听说 php 仍然是多线程的测试版。

无论如何，如果我的 PHP 不是多线程的并且不是“线程安全的”，那么使用 APC 的线程安全版本会有问题吗？

tl；dr 版本：线程安全的 APC 是否意味着更高的兼容性（在 php 单线程/多线程中工作），还是意味着需要多线程（仅在 php 多线程中工作）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:42:05.287

> 如果我的 PHP 不是多线程的并且不是“线程安全的”，那么使用 APC 的线程安全版本会有问题吗？

是的 - 它不会工作，期间。线程安全是一个编译设置，必须与 PHP 本身和所有扩展匹配，否则无法加载。[这是一篇](http://www.iis-aid.com/articles/my_word/difference_between_php_thread_safe_and_non_thread_safe_binaries)详细解释差异的文章。

请注意，除了 TS/NTS 设置之外，您*还*需要 CPU 架构（x86 与 x64）和用于编译的 Visual Studio 版本（VC6 与 VC9）匹配，以使扩展工作，*以及*扩展可能仅适用于 PHP 的某个主要版本。

所有这一切意味着要获得正确的预编译二进制扩展以与您的 PHP 安装一起工作是非常困难的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T18:09:15.223

我建议使用线程安全版本。虽然非线程安全版本可能更快，但如果 PHP 支持线程（或其扩展支持），那么拥有额外的兼容性是一个好主意。

# c# - 在 C# 中生成连接字符串

> ID：11125425
> 
> 赞同：4
> 
> 时间：2012-06-20T18:00:10.460
> 
> 标签：c#, odbc, connection-string

我正在尝试编写一个应用程序，让用户连接到任意数据库，假设他们有正确的 ODBC 驱动程序。但是，我被困在连接字符串上。对于任何特定的数据库类型，很容易在网上查找并找到需要哪些关键字/值对，但是驱动程序本身是否可以访问这些信息？

我想做的是让用户从列表（由 SQLDrivers 生成）中选择他们想要的驱动程序，然后生成一个表单，提示他们输入生成字符串所需的关键字，这样我的应用程序就不需要知道特定的 ODBC 驱动程序。有没有办法做到这一点？还是我必须分别对每一个支持进行硬编码？也许连接字符串不是要走的路，还有另一种我忽略的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:16:15.753

2010 年微软发布了 VS2010 Connection 对话框供我们小人物使用。它很棒，应该做你想做的，并且可以自由分发。[可以在此处](http://archive.msdn.microsoft.com/Connection/Release/ProjectReleases.aspx?ReleaseId=3863)找到对话框及其源代码的下载。

为了让您开始：一旦您编译了代码，您将需要包含对`Microsoft.Data.ConnectionUI`和`Microsoft.Data.ConnectionUI.Dialog`的引用`Microsoft.Data.ConnectionUI.SqlCeDataProvider`。然后调用该对话框

```
// Initialisation.
DataConnectionDialog dcd = new DataConnectionDialog();
DataConnectionConfiguration dcs = new DataConnectionConfiguration(null);
dcs.LoadConfiguration(dcd);

// Edit existing connection string.
if (!String.IsNullOrEmpty(strExistingConn))    
    dcd.ConnectionString = strExistingConn;

// Launch Microsoft's SqlConnection dialog.
string strSqlFinConn = String.Empty;
if (DataConnectionDialog.Show(dcd) == DialogResult.OK)
{
    // Load tables as test.
    using (SqlConnection connection = new SqlConnection(dcd.ConnectionString))
        connection.Open();
}
dcs.SaveConfiguration(dcd);
return dcd.ConnectionString; 
```

如果这不是您想要的，那么@HackedByChinese 的答案似乎是最好的方法。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T18:01:41.810

你可以看看[`ConnectionStringBuilders`](http://msdn.microsoft.com/en-us/library/ms254947.aspx)他们是否有帮助。

您可以使用以下代码枚举可配置属性，这将允许您创建配置表单。

```
var builder = new SqlConnectionStringBuilder();

var properties = (from key in builder.Keys.OfType<string>()
                  select key); 
```

`properties`包含：

```
Data Source 
Failover Partner 
AttachDbFilename 
Initial Catalog 
Integrated Security 
Persist Security Info 
User ID 
Password 
Enlist 
Pooling 
Min Pool Size 
Max Pool Size 
Asynchronous Processing 
Connection Reset 
MultipleActiveResultSets 
Replication 
Connect Timeout 
Encrypt 
TrustServerCertificate 
Load Balance Timeout 
Network Library 
Packet Size 
Type System Version 
Application Name 
Current Language 
Workstation ID 
User Instance 
Context Connection 
Transaction Binding 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T02:26:09.547

实际上，我在[http://msdn.microsoft.com/en-us/library/windows/desktop/ms715433(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms715433(v=vs.85).aspx)找到了一种非常简单的方法来解决这个问题。

如果您使用不完整的连接字符串（例如，仅包含 Driver 关键字的连接字符串）调用 ODBC API 函数 SQLDriverConnect 并将最后一个参数设置为 SQL_DRIVER_COMPLETE，它将弹出一个由驱动程序生成的对话框，提示输入任何未包含的必需信息，然后在关闭后返回完成的连接字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:47:32.033

除了已经发布的好的答案之外，您可能还想看看 ODBC API [SQLBrowseConnect](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714565%28v=vs.85%29.aspx)。

# javascript - javascript控制html所以外部js看不到html名称字段

> ID：11125426
> 
> 赞同：0
> 
> 时间：2012-06-20T18:00:16.053
> 
> 标签：javascript, html, anytime

我正在使用 js+html 构建表单，但遇到了问题。在我的表单的一部分中，用户应该能够单击文本字段并从日历中选择日期和时间（**MAM3 的anytime.js**），并且由于我的表单（*部分代码*）是这样构建的：

```
third_list = "<table class='table'>";
if (radio_array[genIndex] == reserve) {
    third_list += "<tr><td id='Date:'><label><span id='Date'>Date:</span><input type='text' id='Date' name='_date' size='20' onfocus='showMessage()'/></label></td>";
    third_list += "<td id='Time:'><label><span id='Time'>Time:</span><input type='text' id='Time' name='_time' size='20' /></label></td>";
    document.getElementById("third").innerHTML = third_list;
    l3_value = "";
    return;
} 
```

并将其放入 html 中：

```
 <script type="text/javascript">
    AnyTime.widget
        ( "Date",
            { format: "%m/%d/%Z" }
        );
    AnyTime.widget
        ( "Time",
            { format: "%h:%i:%p" }
        );
    </script> 
```

它不会弹出日历。

**旁注：**我已经包含了所有必需的 js&css 文件，并尝试查看它是否适用于 js 的单独文本字段，并且它有效。我认为它不起作用的原因是它是由 js 控制的，所以**anyny.js**不会将其视为**html 名称字段**。

**SN2：**我的 js 中的 onfocus='showMessage()' 是在用户单击文本字段时显示一条消息。

我如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:03:24.850

几个问题：

首先，您有多个元素的`id`值`Date`和`Time`。`id`值在文档中**必须**是唯一的。我希望脚本没有得到它期望的元素并且无法初始化。[AnyTime](http://www.ama3.com/anytime/)的文档似乎建议它使用您提供的第一个参数`AnyTime.widget`作为 an`id`并期望获得一个输入字段。在您的情况下，它通常不会在大多数浏览器上，因为当面对具有重复`id`s 的无效结构时，大多数浏览器会在您请求带有 that 的“the”元素时返回第一个`id`，在您的情况下是 a`span`而不是一个输入字段。

你的`Date`元素：

```
<span id='Date'>Date:</span><input type='text' id='Date' ... />
<!--      ^--- one                                 ^--- two --> 
```

这`Time`是同一类问题。

除此之外，我怀疑您需要确保在调用`AnyTime.widget`. 我不知道您在哪里有`script`调用它的标签，但是您需要做的是在执行该行*后进行此调用*

```
document.getElementById("third").innerHTML = third_list; 
```

...以便有问题的元素存在于 DOM 中。例如：

```
third_list = "<table class='table'>";
if (radio_array[genIndex] == reserve) {
    third_list += "<tr><td id='Date:'><label><span id='Date'>Date:</span><input type='text' id='Date' name='_date' size='20' onfocus='showMessage()'/></label></td>";
    third_list += "<td id='Time:'><label><span id='Time'>Time:</span><input type='text' id='Time' name='_time' size='20' /></label></td>";
    document.getElementById("third").innerHTML = third_list;
    l3_value = "";
    setUpWidgets();
    return;
}

// ...elsewhere in the same scope or a containing scope:
function setUpWidgets() {
    AnyTime.widget
        ( "Date",
            { format: "%m/%d/%Z" }
        );
    AnyTime.widget
        ( "Time",
            { format: "%h:%i:%p" }
        );
} 
```

这会创建一个函数，当元素存在时调用该函数。

* * *

旁注：你也有一个`id`看起来像这样的：

```
 <td id='Date:'> 
```

尽管这[在 HTML5中](http://www.w3.org/TR/html5/elements.html#the-id-attribute)[有效`id`](http://www.w3.org/TR/html5/elements.html#the-id-attribute)，但[在 HTML4](http://www.w3.org/TR/html401/types.html#type-name)中[无效，在 CSS 中无效](http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)。因此，如果您尝试`id`在 CSS 样式的选择器中使用它（例如，使用 jQuery），您可能会遇到麻烦。

# python - NumPy 数组的大小

> ID：11125429
> 
> 赞同：45
> 
> 时间：2012-06-20T18:00:29.563
> 
> 标签：python, arrays, matlab, numpy, size

是否有等效于 MATLAB

```
 size() 
```

Numpy中的命令？

在 MATLAB 中，

```
>>> a = zeros(2,5)
 0 0 0 0 0
 0 0 0 0 0
>>> size(a)
 2 5 
```

在 Python 中，

```
>>> a = zeros((2,5))
>>> 
array([[ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]])

>>> ????? 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-20T18:02:01.690

这在 NumPy 中称为“形状”，可以通过`.shape`属性请求：

```
>>> a = zeros((2, 5))
>>> a.shape
(2, 5) 
```

如果你更喜欢一个函数，你也可以使用`numpy.shape(a)`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-10-02T13:52:48.227

是的 numpy 有大小功能，形状和大小不太一样。

输入

```
import numpy as np
data = [[1, 2, 3, 4], [5, 6, 7, 8]]
arrData = np.array(data)

print(data)
print(arrData.size)
print(arrData.shape) 
```

输出

> [[1, 2, 3, 4], [5, 6, 7, 8]]
> 
> 8#尺寸
> 
> (2, 4) # 形状

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-05T17:52:09.237

[w,k] = a.shape 如果您想将其用于 matlab 中的循环，则可以让您访问各个尺寸

# iphone - File Manager - File Not Found - Objective C

> ID：11125437
> 
> 赞同：0
> 
> 时间：2012-06-20T18:01:22.850
> 
> 标签：iphone, objective-c, ios, file, ios5

This is driving me crazy...

With this simple code I keep getting file not found on my ipad device...

```
NSFileManager *filemgr;

    filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: @"scoreCards.dgs" ] == YES)
        NSLog (@"File exists");
    else
        NSLog (@"File not found"); 
```

![Xcode](../Images/2730d149b54b6312c0e9836e3c9d0bc4.png)

**Am I missing something?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:11:08.110

You need to get the resource file path using `pathForResource:ofType:` method of `NSBundle` class.

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"scoreCards" ofType:@"dgs"];
if ([filemgr fileExistsAtPath:path ] == YES) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:07:45.910

Assuming that your file is bundled with the app, you could use:

```
NSFileManager *filemgr;
filemgr = [NSFileManager defaultManager];

NSString* filePath = [[NSBundle mainBundle] pathForResource:@"scoreCards" ofType:@"dgs"]
if ([filemgr fileExistsAtPath: filePath ] == YES)
... 
```

# asp.net - 如何正确传递动态表单输入（asp:TextBox）

> ID：11125444
> 
> 赞同：0
> 
> 时间：2012-06-20T18:01:48.687
> 
> 标签：asp.net, webforms

我有一个看起来像这样的页面：

```
Head and body tags...

<form runat="server">
    <ul>
        <asp:RequiredFieldValidator runat="server" id="reqUser" controltovalidate="Username" errormessage="<li>There is no username!</li>" />
        More validators...
    </ul>

    <h3><span style="color: Red;">*</span>Username</h3>
    <asp:TextBox runat="server" id="Username" /></br>
    More textboxes...
</form> 
```

问题是，我发现基于 id 的 id`<asp:Textbox />`创建了名称，但格式很奇怪（`id=" MainContent_originalID"`和`name="ctl00$MainContent$originalID"`）

对我来说，让它自己提交表单是可以的。该代码可以处理该问题。问题是，我不知道我在使用时`Request.Form["Name"]`是否必须使用原始ID或处理后提供的名称。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:03:53.643

我相信您必须在处理后使用提供的名称的代码。但是，我认为可能有一种方法可以根据原始名称获取该名称。

就像是：

```
originalName.ClientID 
```

请参阅： http: [//www.codeproject.com/Tips/95796/How-to-get-the-id-name-of-the-ASP-NET-server-contr](http://www.codeproject.com/Tips/95796/How-to-get-the-id-name-of-the-ASP-NET-server-contr)

**PS**您必须使用原始ID名称与语句（controllName.UniqueID）

# objective-c - iOS 中的 ViewDidLoad 和 UINavigationController？

> ID：11125445
> 
> 赞同：0
> 
> 时间：2012-06-20T18:01:48.980
> 
> 标签：objective-c, ios, xcode, model-view-controller

我有一个基于`UINavigationController`. 有一个带有按钮的菜单屏幕（推送到导航控制器堆栈）到其他 9 个“子屏幕”之一。这些子屏幕都没有与任何其他屏幕相连。当用户在“子屏幕”上完成输入数据时，他们可以按下完成按钮，该按钮将弹回原始菜单屏幕。（如果您难以想象这一点，请想象一棵像故事板一样的树，其中有一个根 ViewController，然后是 9 个叶 viewController）。

好的，所以有了这个设置，我有几个关于如何`viewDidLoad`工作的问题。

~ 首先，`viewDidLoad`应该是每次我们过渡到子屏幕时调用。例如，假设我从菜单屏幕转到子屏幕“B”，返回菜单屏幕，然后返回子屏幕“B”。B的`viewDidLoad`方法应该被调用两次吗？如果没有，为什么我的会被调用两次？

~ 其次，假设每次都会被调用，如果我有很多长的操作需要为每个子屏幕执行一次，我该怎么办？我应该把它们放在哪里（如果我把它们放进`viewDidLoad`去，如果用户在这个页面和菜单之间来回切换，它会发生多次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:08:27.433

要回答您的问题：

1.  是的，通常 B 的 viewDidLoad 方法应该在每次被推送到 UINavigationController 的堆栈时调用。这是因为每次将 B 从堆栈中弹出时，它通常都会被释放，并且每次您转到 B 时，都会创建 B 的新实例。

2.  可能有很多方法可以处理这种情况。如果不确切地看到您正在尝试做什么，就很难说出什么适合您。一种方法是创建一个处理处理的[单例对象。](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)这可能比在 UIViewController 中处理它更好的原因是单例可以在应用程序的整个生命周期中存在，而 UIViewControllers 通常具有相对较短的生命周期。单例对象可以只创建一次，它们可以管理您需要在应用程序的生命周期中持久保存的任何操作和数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:19:12.490

`viewWillAppear`每次视图出现时都会被调用。`viewDidLoad`仅在构造视图时调用 - 例如在`initFromNibNamed`访问视图时调用视图控制器之后。`viewWillAppear`每当您的视图控制器不在视图中但进入视图时都会调用 - 因此当您的视图控制器被推送时，`viewWillAppear`会被调用。所以你可能认为你`viewDidLoad`被调用了两次，但实际上它可能不是。所以你应该把方法放在`viewDidLoad`. 你在做什么需要很长时间？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:42:27.220

1、viewDidLoad在视图加载时调用，viewWillAppear在视图可见时调用。

如果您的 viewDidLoad 被多次调用，这意味着您每次显示它时都在加载视图，并且每次弹出它时都释放它。如果您发布一些代码，我可以帮助您更好地识别问题。

你可以做的是这样的：

在您的“根”viewController 类中，将每个“叶”ViewController 声明为成员，假设它们被称为leafController1、leafController2 等，并为它们创建保留属性。

```
@interface YourRootViewController : UIViewController {
    LeafController1Class *leafController1;
    LeafController2Class *leafController2;
    // ...
}

@property (nonatomic, retain) LeafController1Class *leafController1;
@property (nonatomic, retain) LeafController2Class *leafController2;

// ...

@end 
```

在您的顶级 ViewController 的 ViewDidLoad 中，使用“initWithNibName”等（或您为创建它们所做的任何事情）初始化所有叶控制器。像这样保留他们的实例：

```
self.leafController1 = [[[LeafController1Class alloc] initWithNibName:@"LeafController1NibName" bundle:nil] autorelease]; 
```

当用户按下按钮时，将正确的叶子推送到导航控制器：

```
[myNavigationController pushViewController:leafController1 animated:YES]; 
```

当您现在弹出叶控制器时，它们将保留在内存中，因为您保留了它们。这样，只要您始终将视图控制器的相同实例推送到导航控制器，您的 viewDidLoad 只会为每个叶子调用一次。

2\. 与视图相关的繁重代码应在视图加载完毕后执行，即由viewDidLoad触发。但是，保留其他保存有关您的应用程序信息的类可能是一个好主意，这些类不是视图控制器并且与 UI 分开。繁重的计算最好在后台进行，或者在第一次加载应用程序时进行。

# css - Bootstrap自定义下载中的颜色？

> ID：11125447
> 
> 赞同：1
> 
> 时间：2012-06-20T18:01:49.443
> 
> 标签：css, colors, twitter-bootstrap, less

因此，我使用 Bootstrap[自定义和下载页面](http://twitter.github.com/bootstrap/download.html "Bootstrap 自定义和下载页面")来生成具有自定义颜色的 Bootstrap 文件版本。我的想法是我想添加一些其他颜色（例如@purpleLight）以更轻松地维护网站设计，所以我查看了网站生成的下载内容，我的自定义似乎没有出现在任何地方，更不用说在某个地方让我添加其他人。这是网站吐出的 bootstrap.zip 中的内容：

*   css
    *   引导程序.css
    *   bootstrap.min.css
*   图像
    *   glyphicons-halflings.png
    *   glyphicons-halflings-white.png
*   js
    *   引导程序.js
    *   bootstrap.min.js

……就是这样。因此，据我所知，这些文件中没有任何颜色。下载中不包含 LESS 文件。难道我做错了什么？网站做错了吗？我只是没有看到实际上存在的东西吗？尽我最大的不同，无论我选择何种自定义选项，下载似乎都是相同的......

而且，等待谁在这里搞砸，我为我的 Bootstrap 网站定制调色板的最佳替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:28:57.360

您无法使用自定义下载工具添加更多 LESS 变量。您只能重新定义现有变量的值。下载后，该工具会使用这些设置的变量进行编译，但由于您没有获得 LESS 文件，因此之后您将无法添加更多变量，例如您提到的@purpleLight。

如果你想用更多的 LESS 变量扩展 Bootstrap，你必须下载[完整的源代码](https://github.com/twitter/bootstrap/)并从包含的 LESS 文件中编译你的 css。`variables.less`文件夹中有一个文件`less/`可以添加您的@purpleLight。

# javascript - 一起使用 Javascript 的 string.link 和 onclick

> ID：11125448
> 
> 赞同：1
> 
> 时间：2012-06-20T18:01:49.890
> 
> 标签：javascript, pagination

是否可以同时使用 javascript string.link 和 onclick 函数。我要做的是创建分页链接以浏览网站。我有两个功能：`pagination`和`showpagination`如下所示。

```
function pagination(currentpage){
  if(currentpage<5) {
    start = 1;
    end = 10;
    function showpagination(start,end,currentpage); 
  } else {
    start = currentpage -4;
    end = currentpage + 5;
    showpagination(start,end,currentpage);
  }
}

showpagination(start,end,current) {
  here i loop through the array from start to end.
} 
```

我想要做的是将每个页码显示为链接，然后在被点击时触发分页功能及其值。我尝试将 string.link 和 onclick 绑定在一起，但它不起作用。

如果有人知道解决此问题的方法，请告诉我。

提前致谢。

# java - 是否有任何理由不总是使用 AtomicInteger 作为数据成员？

> ID：11125449
> 
> 赞同：5
> 
> 时间：2012-06-20T18:01:51.957
> 
> 标签：java, multithreading, performance, atomic

在像 Android 这样的多线程环境中，一个简单的`int`变量可以由多个线程操作，在某些情况下仍然可以使用 an`int`作为数据成员吗？

An`int`作为局部变量，仅限于对其具有独占访问权限的方法的范围（因此修改它的开始和结束总是在同一个线程中），在性能方面非常有意义。

但作为数据成员，即使被访问器包装，也会遇到众所周知的并发交错修改问题。

因此，看起来“稳妥行事”，人们可以`AtomicInteger`全面使用。但这似乎非常低效。

你能举一个线程安全`int`数据成员使用的例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:02:56.983

> 是否有任何理由不总是使用 AtomicInteger 作为数据成员？

是的，有充分的理由*不*总是使用`AtomicInteger`. 由于构造比本地构造和用于设置/获取基础值 的其他构造，它`AtomicInteger`可以至少慢一个数量级（可能更多） 。意味着*每次*访问时都会跨越内存屏障，这会导致相关处理器上的缓存内存刷新。`volatile``int``Unsafe``int``volatile`*`AtomicInteger`*

 *此外，仅仅因为您已将所有字段都设置为，`AtomicInteger`并不能在访问多个字段时保护您免受竞争条件的影响。对于何时使用`volatile`,`synchronized`和`Atomic*`类做出正确的决定是无可替代的。

例如，如果您希望在线程程序中以可靠的方式访问一个类中有两个字段，那么您将执行以下操作：

```
synchronized (someObject) {
   someObject.count++;
   someObject.total += someObject.count;
} 
```

如果这两个成员都具有，`AtomicInteger`那么您将访问两次，因此跨越 2 个内存障碍，而不仅仅是 1 个。此外，分配`volatile`比. 此外，由于这两个操作的数据竞争条件（与上面的块相反），您可能无法获得正确的.`Unsafe``AtomicInteger``synchronized``total`

> 你能举一个线程安全的 int 数据成员使用的例子吗？

除了制作它之外`final`，`int`除了标记它`volatile`或使用`AtomicInteger`. 没有什么神奇的方法可以在所有字段上绘制线程安全。如果有那么线程编程将很容易。挑战在于找到放置`synchronized`积木的正确位置。找到应该用 标记的正确字段`volatile`。找到合适的地方使用`AtomicInteger`和朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:07:07.143

如果您有有效的不可变`int`s，您可以避免以计算成本为代价不确保同步。一个例子是`hashCode`

```
int hash = 0;

public int hashCode(){
   if(hash == 0){
     hash = calculateHashCode(); //needs to always be the same for each Object
   }
   return hash;
} 
```

这里明显的权衡是对同一个哈希值进行多次计算的可能性，但如果替代方案是哈希码，则`synchronized`可能会产生更糟糕的影响。

这在技术上是线程安全的，尽管是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:30:16.627

线程安全不仅与原子 int 分配有关，还需要仔细设计锁定模式以使代码保持一致。

如果您有两个`Account`具有公共数据成员的类，请`Balance`考虑以下简单代码。

```
Account a;
...
int withdrawal = 100;
if(a.Balance >= withdrawal)
{
    // No atomic operations in the world can save you from another thread
    // withdrawing some balance here
    a.Balance -= withdrawal
}
else
{
   // Handle error
} 
```

说实话。在现实生活中，原子分配很少足以解决我现实生活中的并发问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:04:52.833

这取决于它是如何使用的。其他数据。一个类封装了一个行为，所以一个变量通常没有其他变量几乎是没有意义的。在这种情况下，最好保护（*）属于一起（或整个对象）的数据成员，而不是只保护一个整数。如果你这样做，那么`AtomicInteger`是不必要的性能损失

(*) 使用常见的线程安全机制：互斥量、信号量、监视器等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-11T01:21:02.500

我猜谷歌看到了 OP 并更新了他们关于这个主题的文档以更清晰：

“AtomicInteger 用于原子递增计数器等应用程序，不能用作 Integer 的替代品。”

[https://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger](https://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger)*

# java - 禁用 setOnKeyPressed 的自动重复 (JavaFX 2.1)

> ID：11125451
> 
> 赞同：4
> 
> 时间：2012-06-20T18:02:00.687
> 
> 标签：java, javafx-2, autorepeat

我正在用 JavaFX2.1 做作业，但我的`setOnKeyPressed`方法有问题。我的程序模拟钢琴，所以每次单击按钮时它都会发出声音：“Q”是“do”，“W”是“re”等等......我还有（现在）鼠标输入，稍后将被禁用，因为我不能同时弹奏多个音符...

我的问题：如果我按住一个键（当然是在键盘上，而不是用鼠标），它的关联事件将在循环中触发......我做了几个测试，注意到只有`setOnKeyPressed`触发，而不是 setOnKeyReleased。

我做了一些解决方法，但他们没有做我期望的事情：

*   添加一个布尔值以了解该键是否已被释放，从而禁用一次按下多个键的可能性。
*   播放完声音后关闭音量（并在释放键时将其恢复到其值）似乎也适用于多个键，但与按住鼠标时相比，声音的持续时间要短得多在同一把钥匙上。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:14:20.977

您不能禁用多个事件，因为它是系统行为。对您来说最好的解决方案是改进布尔标志方法来存储每个键的标志。例如下一个方式：

```
 final Set<String> pressedKeys = new HashSet<String>();

    keyboard.setOnKeyPressed(new EventHandler<KeyEvent>() {

        @Override
        public void handle(KeyEvent t) {
            String note = t.getText();
            if (!pressedKeys.contains(note)) {
                // you may need to introduce synchronization here
                pressedKeys.add(note);

                playNote(note);
            }
        }
    });
    keyboard.setOnKeyReleased(new EventHandler<KeyEvent>() {

        @Override
        public void handle(KeyEvent t) {
            pressedKeys.remove(t.getText());
        }
    }); 
```

# scroll - 在网站上看不到页脚，也无法滚动查看

> ID：11125458
> 
> 赞同：0
> 
> 时间：2012-06-20T18:02:12.340
> 
> 标签：scroll, footer

我的网站上有一个固定的页脚：http: [//starprovisions.com/dev/bacchanalia.html](http://starprovisions.com/dev/bacchanalia.html) 在我的 1360x768 屏幕上，我只能看到页脚的顶部，当我尝试滚动时，它要么不滚动，要么不滚动确实，页脚不会随整个网站滚动，而是停留在内容下方。有没有办法解决这个问题，让整个网页上下滚动，这样我们就可以看到页脚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:10:09.403

您必须将其位置设置为相对，因此它将位于您的主要内容下方。这样它就可以让你向下滚动

```
#footer {
    height: 75px;
    background: 
    white;
    margin: auto;
    position: relative; /*Added this*/
    width: 100%;
 } 
```

而且对于您的html css，您应该删除

```
 overflow-y: scroll; 
```

如果您不想在窗口一侧不断显示滚动条。

# java - Java 正则表达式：负前瞻

> ID：11125459
> 
> 赞同：35
> 
> 时间：2012-06-20T18:02:16.100
> 
> 标签：java, regex, negative-lookahead, regex-lookarounds

我正在尝试制作两个匹配 URI 的正则表达式。这些 URI 的格式为：`/foo/someVariableData`和`/foo/someVariableData/bar/someOtherVariableData`

我需要两个正则表达式。每个都需要匹配一个，而不是另一个。

我最初想出的正则表达式分别是： `/foo/.+`和`/foo/.+/bar/.+`。

我认为第二个正则表达式很好。它只会匹配第二个字符串。然而，第一个正则表达式匹配两者。所以，我开始（第一次）用消极的前瞻来玩。我设计了正则表达式`/foo/.+(?!bar)`并设置了以下代码来测试它

```
public static void main(String[] args) {
    String shouldWork = "/foo/abc123doremi";
    String shouldntWork = "/foo/abc123doremi/bar/def456fasola";
    String regex = "/foo/.+(?!bar)";
    System.out.println("ShouldWork: " + shouldWork.matches(regex));
    System.out.println("ShouldntWork: " + shouldntWork.matches(regex));
} 
```

而且，当然，他们俩都决心`true`.

有人知道我在做什么错吗？我不一定需要使用负前瞻，我只需要解决问题，我认为负前瞻可能是一种方法。

谢谢，

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-20T18:03:52.433

尝试

```
String regex = "/foo/(?!.*bar).+"; 
```

或者可能

```
String regex = "/foo/(?!.*\\bbar\\b).+"; 
```

以避免在`/foo/baz/crowbars`我假设您确实希望该正则表达式匹配的路径上出现故障。

**说明：（**没有 Java 字符串所需的双反斜杠）

```
/foo/ # Match "/foo/"
(?!   # Assert that it's impossible to match the following regex here:
 .*   #   any number of characters
 \b   #   followed by a word boundary
 bar  #   followed by "bar"
 \b   #   followed by a word boundary.
)     # End of lookahead assertion
.+    # Match one or more characters 
```

`\b`，“单词边界锚”，匹配字母数字字符和非字母数字字符之间的空白空间（或字符串的开头/结尾和 alnum 字符之间）。因此，它在in之前`b`或之后匹配，但在and in之间不匹配。`r``"bar"``w``b``"crowbar"`

Protip：看看[http://www.regular-expressions.info](http://www.regular-expressions.info) - 一个很棒的正则表达式教程。

# imagemagick - ToolTwist 控制器在生成图像时挂起

> ID：11125462
> 
> 赞同：2
> 
> 时间：2012-06-20T18:02:20.623
> 
> 标签：imagemagick, tooltwist

使用 ToolTwist 控制器生成大型站点时，服务器挂起。使用 ps -ef 我可以看到有一个 ImageMagick 'convert' 命令似乎永远不会完成。如果我终止转换过程，则生成继续。

如果我从日志文件或使用 ps 获得完整的转换命令，我可以毫无问题地从命令行运行它。每次我在控制器中运行生成过程时，它都会卡在不同的地方。

它挂起的频率似乎是零星的，可能每 1,000 张图像才会出现一次。

我在 Macbook Pro 上运行 OSX 10.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:11:53.110

这是 ImageMagick 中的一个已知错误 - 请参阅[http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19962](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19962)

解决办法是定义一个环境变量：export MAGICK_THREAD_LIMIT=1

您需要在启动 Controller 的 tomcat 服务器之前执行此操作。

# php - 如果连接保持活动状态如何读取直到流 php 结束

> ID：11125463
> 
> 赞同：12
> 
> 时间：2012-06-20T18:02:20.433
> 
> 标签：php, http

```
$f = fsockopen("www....",80,$x,$y);

fwrite("GET request HTTP/1.1\r\nConnection: keep-alive\r\n\r\n");

while($s = fread($f,1024)){
    ...
} 
```

上面的档位是因为`Connection: keep-alive`, 和`Connection: close`.

你如何做到不停滞不前？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T22:46:42.867

这取决于响应，如果`transfer-encoding`响应是`chunked`，那么您会一直阅读，直到遇到“最后一个块”（`\r\n0\r\n`）。

如果`content-encoding`是`gzip`，那么您查看`content-length`响应标头并读取那么多数据，然后对其进行膨胀。如果`transfer-encoding`也设置为分块，则必须对解码的响应进行分块。

最简单的事情是构建一个简单的状态机来从套接字读取响应，同时仍有数据留给响应。

读取分块数据时，您应该读取第一个块长度（以及任何分块扩展），然后读取与块大小一样多的数据，直到最后一个块为止。

换一种方式：

*   读取 HTTP 响应头（读取小块数据，直到遇到`\r\n\r\n`）
*   将响应标头解析为数组
*   如果`transfer-encoding`是分块的，则逐块读取和解块数据。
*   如果`content-length`设置了标头，您可以从套接字读取那么多数据
*   如果`content-encoding`是gzip，解压读取的数据

完成上述步骤后，您应该已经阅读了整个响应，您现在可以在同一个套接字上发送另一个 HTTP 请求并重复该过程。

另一方面，除非您绝对需要保持连接，否则只需`Connection: close`在请求中设置，您就可以安全地读取`while (!feof($f))`.

目前我没有任何用于读取和解析 HTTP 响应的 PHP 代码（我只使用 cURL），但如果您想查看实际代码，请告诉我，我可以解决问题。我还可以向您推荐我编写的一些 C# 代码，这些代码可以完成上述所有操作。

编辑：这是`fsockopen`用于发出 HTTP 请求并演示读取保持活动连接的工作代码，并可能使用分块编码和 gzip 压缩。经过测试，但没有受到折磨 - 使用风险自负！！！

```
<?php

/**
 * PHP HTTP request demo
 * Makes HTTP requests using PHP and fsockopen
 * Supports chunked transfer encoding, gzip compression, and keep-alive
 *
 * @author drew010 <http://stackoverflow.com/questions/11125463/if-connection-is-keep-alive-how-to-read-until-end-of-stream-php/11812536#11812536>
 * @date 2012-08-05
 * Public domain
 *
 */

error_reporting(E_ALL);
ini_set('display_errors', 1);

$host = 'www.kernel.org';

$sock = fsockopen($host, 80, $errno, $errstr, 30);

if (!$sock) {
    die("Connection failed.  $errno: $errstr\n");
}

request($sock, $host, 'GET', '/');

$headers = readResponseHeaders($sock, $resp, $msg);
$body    = readResponseBody($sock, $headers);

echo "Response status: $resp - $msg\n\n";

echo '<pre>' . var_export($headers, true) . '</pre>';
echo "\n\n";
echo $body;

// if the connection is keep-alive, you can make another request here
// as demonstrated below

request($sock, $host, 'GET', '/kernel.css');
$headers = readResponseHeaders($sock, $resp, $msg);
$body    = readResponseBody($sock, $headers);

echo "Response status: $resp - $msg\n\n";

echo '<pre>' . var_export($headers, true) . '</pre>';
echo "\n\n";
echo $body;

exit;

function request($sock, $host, $method = 'GET', $uri = '/', $params = null)
{
    $method = strtoupper($method);
    if ($method != 'GET' && $method != 'POST') $method = 'GET';

    $request = "$method $uri HTTP/1.1\r\n"
              ."Host: $host\r\n"
              ."Connection: keep-alive\r\n"
              ."Accept-encoding: gzip, deflate\r\n"
              ."\r\n";

    fwrite($sock, $request);
}

function readResponseHeaders($sock, &$response_code, &$response_status)
{
    $headers = '';
    $read    = 0;

    while (true) {
        $headers .= fread($sock, 1);
        $read    += 1;

        if ($read >= 4 && $headers[$read - 1] == "\n" && substr($headers, -4) == "\r\n\r\n") {
            break;
        }
    }

    $headers = parseHeaders($headers, $resp, $msg);

    $response_code   = $resp;
    $response_status = $msg;

    return $headers;
}

function readResponseBody($sock, array $headers)
{
    $responseIsChunked = (isset($headers['transfer-encoding']) && stripos($headers['transfer-encoding'], 'chunked') !== false);
    $contentLength     = (isset($headers['content-length'])) ? $headers['content-length'] : -1;
    $isGzip            = (isset($headers['content-encoding']) && $headers['content-encoding'] == 'gzip') ? true : false;
    $close             = (isset($headers['connection']) && stripos($headers['connection'], 'close') !== false) ? true : false;

    $body = '';

    if ($contentLength >= 0) {
        $read = 0;
        do {
            $buf = fread($sock, $contentLength - $read);
            $read += strlen($buf);
            $body .= $buf;
        } while ($read < $contentLength);

    } else if ($responseIsChunked) {
        $body = readChunked($sock);
    } else if ($close) {
        while (!feof($sock)) {
            $body .= fgets($sock, 1024);
        }
    }

    if ($isGzip) {
        $body = gzinflate(substr($body, 10));
    }

    return $body;
}

function readChunked($sock)
{   
    $body = '';

    while (true) {
        $data = '';

        do {
            $data .= fread($sock, 1);
        } while (strpos($data, "\r\n") === false);

        if (strpos($data, ' ') !== false) {
            list($chunksize, $chunkext) = explode(' ', $data, 2);
        } else {
            $chunksize = $data;
            $chunkext  = '';
        }

        $chunksize = (int)base_convert($chunksize, 16, 10);

        if ($chunksize === 0) {
            fread($sock, 2); // read trailing "\r\n"
            return $body;
        } else {
            $data    = '';
            $datalen = 0;
            while ($datalen < $chunksize + 2) {
                $data .= fread($sock, $chunksize - $datalen + 2);
                $datalen = strlen($data);
            }

            $body .= substr($data, 0, -2); // -2 to remove the "\r\n" before the next chunk
        }
    } // while (true)
}

function parseHeaders($headers, &$response_code = null, &$response_message = null)
{
    $lines  = explode("\r\n", $headers);
    $return = array();

    $response = array_shift($lines);

    if (func_num_args() > 1) {
        list($proto, $code, $message) = explode(' ', $response, 3);

        $response_code    = $code;

        if (func_num_args() > 2) {
            $response_message = $message;
        }
    }

    foreach($lines as $header) {
        if (trim($header) == '') continue;
        list($name, $value) = explode(':', $header, 2);

        $return[strtolower(trim($name))] = trim($value);
    }

    return $return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:59:22.180

以下代码对我来说没有任何问题：

```
<?php
$f = fsockopen("www.google.de",80);
fwrite($f,"GET / HTTP/1.1\r\n Connection: keep-alive\r\n\r\n");

while($s = fread($f,1024)){
    echo "got: $s";
}
echo "finished;";
?> 
```

有趣的是，**如果没有**keep-alive，这个例子对我来说就会停滞不前。您可以添加一个可以复制和粘贴并显示您的错误的示例吗？

# php - MySQL REGEXP 仅匹配整个单词

> ID：11125464
> 
> 赞同：0
> 
> 时间：2012-06-20T18:02:24.813
> 
> 标签：php, mysql, sql, regex, substring

如何匹配mysql中的整个单词？

例如，如果我输入“ **lau** ”，我**不想**匹配“ **laura** ”或“ **laurance** ”。

下面是我的工作查询，匹配 ' **lau** ' 和 ' **laura** '

```
SELECT *
FROM
(
    SELECT

        p.page_id,
        p.page_url AS url,
        p.page_title AS title,
        SUBSTRING_INDEX(p.page_content_1, ' ', 500) AS content,
        EXTRACT(DAY FROM p.page_backdate) AS date,
        EXTRACT(MONTH FROM p.page_backdate) AS month,
        EXTRACT(YEAR FROM p.page_backdate) AS year

    FROM root_pages AS p

    WHERE p.page_hide != '1'
    AND p.page_url != 'cms'
    AND p.page_url != 'search'

    ORDER BY p.page_created DESC
) x
WHERE x.content REGEXP  '>[^<]*lau' 
```

有什么想法可以解决我的问题`REGEXP`吗？

我使用的原因`REGEXP '>[^<]*searchtext'`是我的内容有html标签，例如，

```
<p class="heading-sitemap">About us</p>
<ul>
<li class="subheading-sitemap">The team</li>
<li><a href="#">Introduction to gt</a></li>
<li><a href="#">Simon x</a></li>
<li><a href="#">Cathrin xe</a></li>
<li><a href="#">Patrick x</a></li>
<li><a href="#">Laurence x</a></li>
<li><a href="#">Tessa x</a></li>>
</ul> 
```

我不想搜索这个词可能会落入诸如`<a href="http://laura.com">`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:11:38.280

让我们分解您当前的正则表达式：

```
>[^<]*lau

>      match the character '>'
[^<]*  match 0 or more non-'<' characters
lau    match 'lau' 
```

所以这将匹配以下内容：

```
>bbblau
>bbb<lau
>lau
><lau 
```

我假设您想要的是匹配以下内容：

```
>lau 
```

但不是：

```
>laubbb
><lau
>bbb<lau 
```

在这种情况下，以下正则表达式将起作用：

```
>lau( |<|$) 
```

编辑：使用 andrewsi 显示的方法可能更干净：

```
>lau[[:>:]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:11:20.137

这行得通吗？

正则表达式'[^<]*lau[[:>:]]'

根据[文档](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)， [[:>:]] 将匹配单词末尾的单词边界

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T03:23:23.077

andrewsi 代码对我不起作用，但是这个 REGEXP 解决了我的问题。

`m_city`正则表达式'[[:<:]]YOUR_CITY[[:>:]]'

# yii - 具有关系的 CGridView，ID 过滤器不起作用“违反完整性约束”

> ID：11125466
> 
> 赞同：0
> 
> 时间：2012-06-20T18:02:29.717
> 
> 标签：yii

我正在尝试制作一个可以从关系表中过滤数据的 cgridview。这是我第一次使用 CGridView，但我无法让它工作。帮助表示赞赏。我有2个问题。首先：我设法获得了我的用户的下拉过滤器（avtor，Novica 中的关系），但是当我选择一个时，它总是返回：“未找到结果。”。第二：当我尝试使用 Novica.ID 进行过滤时，出现此错误：（使用其他列进行过滤效果很好）

> 错误 500：
> 
> # CDb异常
> 
> CDbCommand 未能执行 SQL 语句：SQLSTATE [23000]：完整性约束违规：1052 where 子句中的列 'id' 不明确。执行的 SQL 语句是：SELECT COUNT(*) FROM `novica` `t` LEFT OUTER JOIN `uporabnik` `avtor`ON ( `t`. `uporabnik_id`= `avtor`. `id`) WHERE ((uporabnik_id = :id) AND (id=:ycp0)) (C:\xampp\htdocs\PEF\framework\db \CDbCommand.php:528)
> 
> ```
> 0
> C:\xampp\htdocs\PEF\framework\db\CDbCommand.php(425):
> CDbCommand->queryInternal('fetchColumn', 0, Array) 1
> C:\xampp\htdocs\PEF\framework\db\ar\CActiveFinder.php(762)：
> CDbCommand->queryScalar() 2
> C:\xampp\htdocs\PEF\framework\db\ar\CActiveFinder.php(155)：
> CJoinElement->count(对象(CDbCriteria)) 3
> C:\xampp\htdocs\PEF\framework\db\ar\CActiveRecord.php(1540)：
> CActiveFinder->count(对象(CDbCriteria)) 4
> C:\xampp\htdocs\PEF\framework\web\CActiveDataProvider.php(179)：
> CActiveRecord->count(对象(CDbCriteria)) 5
> C:\xampp\htdocs\PEF\framework\web\CDataProvider.php(193):
> CActiveDataProvider->calculateTotalItemCount() 6
> C:\xampp\htdocs\PEF\framework\web\CActiveDataProvider.php(129)：
> CDataProvider->getTotalItemCount() 7
> C:\xampp\htdocs\PEF\framework\web\CDataProvider.php(137):
> CActiveDataProvider->fetchData() 8
> C:\xampp\htdocs\PEF\framework\zii\widgets\CBaseListView.php(105):
> CDataProvider->getData() 9
> C:\xampp\htdocs\PEF\framework\zii\widgets\grid\CGridView.php(269):
> CBaseListView->init() 10
> C:\xampp\htdocs\PEF\framework\web\CBaseController.php(148)：
> CGridView->init() 11
> C:\xampp\htdocs\PEF\framework\web\CBaseController.php(173)：
> CBaseController->createWidget('zii.widgets.gri...', Array) 12
> C:\xampp\htdocs\PEF\protected\views\adminNovica\index.php(28):
> CBaseController->widget('zii.widgets.gri...', Array) 13
> C:\xampp\htdocs\PEF\framework\web\CBaseController.php(127)：
> 要求('C:\xampp\htdocs...') 14
> C:\xampp\htdocs\PEF\framework\web\CBaseController.php(96):
> CBaseController->renderInternal('C:\xampp\htdocs...', Array, true) 15
> C:\xampp\htdocs\PEF\framework\web\CController.php(870)：
> CBaseController->renderFile('C:\xampp\htdocs...', Array, true) 16
> C:\xampp\htdocs\PEF\protected\controllers\AdminNovicaController.php(19)：
> CController->renderPartial('index', Array) 17
> C:\xampp\htdocs\PEF\framework\web\actions\CInlineAction.php(50):
> AdminNovicaController->actionIndex() 18
> C:\xampp\htdocs\PEF\framework\web\CController.php(309)：
> CInlineAction->runWithParams(数组) 19
> C:\xampp\htdocs\PEF\framework\web\CController.php(287):
> CController->runAction(对象(CInlineAction)) 20
> C:\xampp\htdocs\PEF\framework\web\CController.php(266):
> CController->runActionWithFilters（对象（CInlineAction），数组）21
> C:\xampp\htdocs\PEF\framework\web\CWebApplication.php(276):
> CController->运行（''）22
> C:\xampp\htdocs\PEF\framework\web\CWebApplication.php(135):
> CWebApplication->runController('adminnovica') 23
> C:\xampp\htdocs\PEF\framework\base\CApplication.php(162):
> CWebApplication->processRequest() 24
> C:\xampp\htdocs\PEF\index.php(13): CApplication->run() 25 {main}
> ```

这些是我的表：

![呃](../Images/b58e5696c7337fcc57b74f359e9a5c50.png)

型号： Novica（英文：新闻）

```
public function relations() {
        return array(
            'uporabnik' => array(self::BELONGS_TO, 'DostopNovica', 'uporabnik_id'),
            'avtor' => array(self::BELONGS_TO, 'Uporabnik', 'uporabnik_id'),
        );
    }

public function search() {
        $criteria = new CDbCriteria;
        $criteria->compare('id', $this->id);
        $criteria->with = 'avtor';
        $criteria->compare('naslov', $this->naslov, true);
        $criteria->compare('datum', $this->datum, true);
        $criteria->compare('avtor.upime', $this->uporabnik_id, true); //avtor.upime (eng. author.username)

    return new CActiveDataProvider(get_class($this), array(
                'criteria' => $criteria,
                'sort' => array(
                    'defaultOrder' => 'datum DESC', //date
                ),
                'pagination' => array(
                    'pageSize' => 5
                ),
            ));
} 
```

行动：

```
 public function actionIndex() {
            $model = new Novica('search');
            if (isset($_GET['Novica']))
                $model->attributes = $_GET['Novica'];

            $params = array(
                'model' => $model,
            );

            if (!isset($_GET['ajax']))
                $this->render('index', $params);
            else
                $this->renderPartial('index', $params);
        } 
```

CGridView：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $model->search(),
    'filter' => $model,
    'columns' => array('id',
        array('name' => 'datum',
            'value' => 'date("j.n.Y G:i", strtotime($data->datum))'
        ),
        array(
            'name' => 'uporabnik_id',
            'value' => 'Uporabnik::Model()->FindByPk($data->uporabnik_id)->upime',
            'filter' => CHtml::listData(Uporabnik::model()->findAll(), 'id', 'upime'),
        ),
        'naslov'
    //specify the colums you wanted here
    ),
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:14:54.610

**问题1：**

在您的模型中使用

`$criteria->compare('avtor.id', $this->uporabnik_id, true);`

与关系 avtor 的 id 进行比较，因为这是您在 gridview 的下拉列表中定义的值。.. `CHtml::listData(Uporabnik::model()->findAll(), 'id', 'upime')`listData 语法是模型、值、文本..

**问题2：**

在您的模型中使用

`$criteria->compare('t.id', $this->id);`

t 是 yii 为表使用的默认别名……歧义的问题是该列`id`存在于两个表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T07:46:25.623

也许在你的数据库中你必须设置外键；更新时的级联和删除时的级联，如果这不起作用，我会怀疑问题出在模型中应该正确生成的关系上

# haskell - 我怎样才能内联这个函数？

> ID：11125469
> 
> 赞同：3
> 
> 时间：2012-06-20T18:02:43.993
> 
> 标签：haskell, parsec

我有两个函数，但其​​中一个函数只能从另一个函数调用，所以我想内联辅助函数。我的代码如下所示：

```
data PoS =  N | V | Adj | Adv | Phr

posEntity :: Parser PoS
posEntity = 
    do pos <- string "N." <|>
              string "V." <|>
              string "Adj." <|>
              string "Adv." <|>
              string "Phr."
       return (posToPoS pos)
    <?> "part of speech"

posToPoS pos
    | pos == "N." = N
    | pos == "V." = V
    | pos == "Adj." = Adj
    | pos == "Adv." = Adv
    | pos == "Phr." = Phr 
```

显然 posToPoS 应该被内联，但我不确定做这样的事情所需的语法。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:09:39.123

您可以将定义中的字符串内联到`posToPos`：

```
posToPoS "N." = N
posToPoS "V." = V
-- ... etc 
```

或者，您可以直接在解析器中使用以下方法：

```
import Control.Applicative hiding (<|>)

posEntity :: Parser PoS
posEntity = 
  (string "N."   *> pure N   <|>
   string "V."   *> pure V   <|>
   string "Adj." *> pure Adj <|>
   string "Adv." *> pure Adv <|>
   string "Phr." *> pure Phr)<?> "part of speech" 
```

（您可能需要在零件周围加上括号`string "foo" *> pure Foo`，我忘记了运算符的优先级是什么）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T18:05:30.877

GHC 可能会在优化时自动内联它。但是，要强制它这样做，只需`{-# INLINE posToPoS #-}`在代码中的某个位置添加，最好是紧挨着`posToPoS`.

为了使它成为本地的，以便只能`posEntity`看到它，你需要一个 where 子句。将其定义为：

```
data PoS =  N | V | Adj | Adv | Phr

posEntity :: Parser PoS
posEntity = 
    do pos <- string "N." <|>
              string "V." <|>
              string "Adj." <|>
              string "Adv." <|>
              string "Phr."
       return (posToPoS pos)
    <?> "part of speech" where
        posToPoS pos
            | pos == "N." = N
            | pos == "V." = V
            | pos == "Adj." = Adj
            | pos == "Adv." = Adv
            | pos == "Phr." = Phr 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:10:27.660

在您的示例中，一个简单的 case 语句似乎是一个更好的解决方案：

```
posEntity = 
    do pos <- string "N." <|>
              string "V." <|>
              string "Adj." <|>
              string "Adv." <|>
              string "Phr."
       return $ case pos of
                  "N." -> N
                  "V." -> V
                  "Adj." -> Adj
                  "Adv." -> Adv
                  "Phr." -> Phr
    <?> "part of speech" 
```

如果可以选择，模式匹配通常比相等比较更可取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:09:24.197

这是我想出来的。抱歉，如果我不清楚：

```
posEntity :: Parser PoS
posEntity = 
    do pos <- string "N." <|>
              string "V." <|>
              string "Adj." <|>
              string "Adv." <|>
              string "Phr."
       return (posToPoS pos)
    <?> "part of speech"
    where
      posToPoS pos
          | pos == "N." = N
          | pos == "V." = V
          | pos == "Adj." = Adj
          | pos == "Adv." = Adv
          | pos == "Phr." = Phr 
```

# c++ - 具有扩展接口的派生类的集合。如何在没有动态转换的情况下访问派生接口？

> ID：11125475
> 
> 赞同：1
> 
> 时间：2012-06-20T18:03:01.520
> 
> 标签：c++, oop

假设我有一个“动物”类型的抽象对象。动物有公纯虚法“吃”。

我想将 Animal 派生为“Dog”和“Cat”，每个都有一个扩展接口。例如，我希望 Dog 有一个公共方法“chaseTail”，而 Cat 有一个公共方法“destroyFurniture”。

我想在“世界”对象中制作一组动物。

我需要能够使用“getAnimalAtPosition”方法从 World 中检索这些动物，并且能够在我得到的 Animal 上任意调用 chatTail 或 destroyFurniture。

我想避免缓慢的dynamic_cast，测试位置是否是给定的动物或将chaseTail和destroyFurniture提升到Animal中，但我似乎在这里陷入了困境。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:50:28.780

[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)是一个可行的解决方案。该解决方案有两个主要参与者：

*   元素：具有共同父级的不同类型，将接受访问者。在这种情况下，元素是`Cat`和`Dog`共同的父母是`Animal`。
*   访问者：将访问元素的类，并且可以调用元素特定的操作，因为它具有特定元素类型的句柄。

对于此示例，从元素（Animal、Cat 和 Dog）开始：

```
class Animal
{
public:
  virtual ~Animal() {}
  virtual void eat() = 0;
};

class Cat: public Animal
{
public:
  void destroyFurniture();
  void eat(); 
};

class Dog: public Animal
{
public:
  void chaseTail();
  void eat();
}; 
```

接下来，创建一个将“访问”每个元素的访客。访问者将知道它正在操作的类型，因此它可以在两个特定元素上使用方法，例如`Cat::destroyFurniture()`和`Dog::chaseTail()`：

```
class Visitor
{
public:
   void visitDog( Dog& dog ) { dog.chaseTail();        }
   void visitCat( Cat& cat ) { cat.destroyFurniture(); }
}; 
```

`Animal`现在，添加一个接受 a`Visitor`作为参数的纯虚方法`void Animal::accept( Vistor& )`：这个想法是将 a 传递给 a `Visitor`，`Animal`并允许虚拟方法解析为特定的运行时类型。一旦解决了虚拟调用，实现就可以`visit`调用`Visitor`.

```
class Animal
{
public:
  ...
  virtual void accept( Visitor& ) = 0;
};

class Cat: public Animal
{
public:
  ...
  virtual void accept( Visitor& visitor ) { visitor.visitCat( *this ); }
}; 
```

请注意虚拟方法如何用于解析特定的元素类型，并且每个元素的`accept`实现都将调用访问者上的方法。这允许执行基于类型分支而不使用`dynamic_cast`，通常称为[双重分派](http://en.wikipedia.org/wiki/Double_dispatch)。

* * *

[这](http://ideone.com/h8g7f)是一个可编译的示例，演示了正在使用的模式：

```
#include <iostream>
#include <vector>

using std::cout;
using std::endl;

class Cat;
class Dog;

class Visitor
{
public:
   void visitCat( Cat& cat );
   void visitDog( Dog& dog );
};

class Animal
{
public:
  virtual ~Animal() {}
  virtual void eat() = 0;
  virtual void accept( Visitor& ) = 0;
};

class Cat: public Animal
{
public:
  void destroyFurniture()         { cout << "Cat::destroyFurniture()" << endl; }
  void eat()                      { cout << "Cat::eat()" << endl;              }  
  void accept( Visitor& visitor ) { visitor.visitCat( *this );                 }
};

class Dog: public Animal
{
public:
  void chaseTail()                { cout << "Dog::chaseTail()" << endl; }
  void eat()                      { cout << "Dog::eat()" << endl;       }  
  void accept( Visitor& visitor ) { visitor.visitDog( *this );          }
};

// Define Visitor::visit methods.
void Visitor::visitCat( Cat& cat ) { cat.destroyFurniture(); }
void Visitor::visitDog( Dog& dog ) { dog.chaseTail();        }

int main()
{
  typedef std::vector< Animal* > Animals;
  Animals animals;
  animals.push_back( new Cat() );
  animals.push_back( new Dog() );

  Visitor visitor;  
  for ( Animals::iterator iterator = animals.begin();
        iterator != animals.end(); ++iterator )
  {
    Animal* animal = *iterator;
    // Perform operation on base class.
    animal->eat();
    // Perform specific operation based on concrete class.
    animal->accept( visitor );
  }

  return 0;
} 
```

产生以下输出：

```
Cat::eat()
Cat::destroyFurniture()
Dog::eat()
Dog::chaseTail() 
```

* * *

请注意，在这个例子中，`Visitor`是一个具体的类。但是，可以为 创建整个层次结构`Visitor`，从而允许您基于 执行不同的操作`Visitor`。

```
class Visitor
{
public:
   virtual void visitCat( Cat& ) = 0;
   virtual void visitDog( Dog& ) = 0; 
};

class FurnitureDestroyingVisitor: public Visitor
{
   virtual void visitCat( Cat& cat ) { cat.destroyFurniture(); }
   virtual void visitDog( Dog& dog ) {} // Dogs cannot destroy furniture.
}; 
```

访问者模式的一个主要缺点是添加`Elements`可能需要对`Visitor`类进行更改。一般的经验法则是：

*   如果 Element 层次结构可能发生变化，则在基本 Element 类上定义操作可能会更容易。在此示例中，如果需要添加 、 和 ，则向 中添加虚拟方法可能`Cow`会`Horse`更容易。`Pig``doTypical``Animal`
*   如果元素层次结构是稳定的，但在元素上运行的算法正在发生变化，那么访问者模式可能是一个很好的候选者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:05:18.433

您可以在完全了解所有类的情况下做一个访问者模式的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:11:21.773

在运行时发现多态层次结构的动态类型的愿望通常表明设计错误。你可以尝试这样的事情：

```
struct Animal
{
    virtual ~Animal()             {              }
    void eat()                    { doEat();     }
    void performTypicalActivity() { doTypical(); }
private:
    virtual void doEat() = 0;
    virtual void doTypical() = 0;
};

struct Cat : Animal
{
    void destroyFurniture();
    void purr();
private:
    virtual void doTypical() { destroyFurniture(); purr(); }
}; 
```

现在您遍历您的集合并调用`p->performTypicalActivity()`每个元素。

# json.net - 在 Json.net 中全局设置 IgnoreSerializableAttribute

> ID：11125476
> 
> 赞同：13
> 
> 时间：2012-06-20T18:03:06.050
> 
> 标签：json.net, asp.net-web-api

我正在开发一个 ASP.NET WebApi (Release Candidate) 项目，我正在使用几个标有 [Serializable] 属性的 DTO。这些 DTO 不在我的控制范围内，因此我无法以任何方式修改它们。当我从 get 方法返回其中任何一个时，生成的 JSON 包含一堆 k__BackingFields，如下所示：

```
<Name>k__BackingField=Bobby
<DateCreated>k__BackingField=2012-06-19T12:35:18.6762652-05:00 
```

根据我所做的搜索，这似乎是[JSON.NET 的 IgnoreSerializableAttribute](http://json.codeplex.com/discussions/351981) 设置的问题，要解决我的问题，我只需要按照文章的建议在全局范围内设置它。如何在 ASP.NET Web api 项目中全局更改此设置？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-10T20:33:24.140

我找到了摆脱名称中的 k__BackingField 的简单方法。

这个片段应该在 Global.asax.cs 的 Application_Start() 中的某个地方：

```
JsonSerializerSettings jSettings = new Newtonsoft.Json.JsonSerializerSettings();
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = jSettings; 
```

看起来默认设置会处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:20:03.353

`DefaultContractResolver`由于该库没有为`JsonConvert`.

在您的静态包装器中，您可以定义一个静态合同解析器：

```
private static readonly DefaultContractResolver Resolver = new DefaultContractResolver
{
    IgnoreSerializableAttribute = true
}; 
```

您可以将其传递给`JsonSerializerSettings`包装器内的 , 中的每个序列化方法。然后你在整个项目中给你的班级打电话。

另一种方法是获取 JSON.NET 源代码并自行调整以默认使用该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T14:22:46.463

对我来说，以下解决了循环引用和`k__BackingField`.

在您`WebApiConfig`的方法中添加以下内容`Register()`：

```
JsonSerializerSettings jSettings = new Newtonsoft.Json.JsonSerializerSettings {

    ContractResolver = new DefaultContractResolver {
        IgnoreSerializableAttribute = true
    },
    ReferenceLoopHandling = ReferenceLoopHandling.Ignore
};

GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = jSettings; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-02-11T12:42:09.607

朋友，不要这样声明属性：

```
public String DiscretionCode { get; set; } 
```

但是，创建辅助变量，如旧......

```
private String discretionCode;

public String DiscretionCode 
{ 
    get { return discretionCode;}
    set { discretionCode = value; }
} 
```

# javascript - 如何使 ExtJS 拖放树仅被复制——而不是从显示中删除项目？

> ID：11125482
> 
> 赞同：1
> 
> 时间：2012-06-20T18:03:28.033
> 
> 标签：javascript, extjs, drag-and-drop

我使用 treeviewdragdrop 插件创建了一棵树，如下所示：

```
Ext.create('Ext.tree.Panel', {
            viewConfig: {
                plugins: {
                    ptype: 'treeviewdragdrop'
                },
                listeners: {
                    drop: function (... do stuff 
```

默认情况下，如果您将一个项目从一个父节点拖到另一个父节点，它*会移动*它，您可以按住 ctrl 单击复制，但我只想复制——也就是说，我不希望它停止在原始节点中显示。我没有做任何事情来影响商店，所以我没有强制删除

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T21:42:28.693

哦，这很容易。

添加副本：true，像这样：

```
Ext.create('Ext.tree.Panel', {
            viewConfig: {
                plugins: {
                    ptype: 'treeviewdragdrop'
                },
                copy: true,
                listeners: {
                    drop: function (... do stuff 
```

它确实改变了命中 drop listener 的数据，但可以使用。

# node.js - 来自 socket.io 的否定确认

> ID：11125487
> 
> 赞同：2
> 
> 时间：2012-06-20T18:03:45.453
> 
> 标签：node.js, socket.io

我正在使用 socket.io 将数据从我的服务器发送到客户端。在某些情况下，客户端失去了连接，但服务器只有在没有从 ckient 收到下一个心跳时才知道这一点。

在客户端失去其网络连接到服务器从没有心跳得到它的时间之间发送的消息丢失了，当客户端重新连接时我无法重新发送它们。

我知道我可以在我的消息中发送一个回调，客户端将在成功传递消息时调用该回调。但是这个回调是异步的，我不知道有什么方法可以知道消息传递失败。任何人都可以帮我找到如何捕获无法传递消息的问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:34:47.480

根据[文档](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)，您可以为

> 断开连接后 Socket.IO 应尝试与服务器重新连接多少次。在此之后，我们将发出 reconnect_failed 事件。

# java - 为什么 ArrayList 和 HashMap 等类不同步？

> ID：11125494
> 
> 赞同：1
> 
> 时间：2012-06-20T18:04:30.890
> 
> 标签：java, arraylist, synchronization, hashmap

我正在更新一个旧项目，我想知道是否应该删除一些在 IDE 中标记为“过时”的对象。有问题的对象是 Vector 和 Hashtable。我做了一些研究，似乎这些对象的较新的对应物 - ArrayList 和 HashMap - 基本上是相同的，只是没有同步。

我的问题是，我为什么要切换？我不是只是从我的应用程序中拿走了一点安全性以换取少量的速度吗？无论哪种方式，这似乎都不是一个具有纪念意义的决定，但我想我会在做出决定之前看看是否值得花时间。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T18:08:03.430

> 我不是只是从我的应用程序中拿走了一点安全性以换取少量的速度吗？

如果您唯一的线程安全性依赖于 and 的同步`Vector`，`Hashtable`那么您几乎肯定会遇到麻烦。

通常，更粗粒度的操作需要同步——“同步集合上的每个小操作并希望它足够好”的方法几乎从来都不是必需的，那么为什么要接受它的小打击呢？

如果您在线程之间共享可变数据（例如集合），则需要仔细考虑如何做到这一点 - 使用`Vector`并且`Hashtable`会给您一种错误的安全感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:10:09.000

`synchronized`会导致显着的性能损失，并且通常不是实现并发的最佳方法。

如果您需要线程安全的集合，请使用`java.util.concurrent`.

[这篇文章](http://www.ibm.com/developerworks/java/library/j-jtp07233/index.html)可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:16:32.903

我不能 100% 确定您是否获得了您认为的“安全”。我通常发现我想自己进行同步，而不是依赖内置的东西（无论是 Vector/Hashtable，还是 Collections.synchronizedList(new ArrayList())/Collections.synchronizedMap(new HashMap())) .

我倾向于更喜欢创建自己的锁定监视器并自己控制所有锁定。如果我不这样做，我往往会忘记锁定复杂的多步骤操作而不会注意到它。我喜欢它如何迫使您考虑系统中的锁定 - 否则实际上您不是很容易“感觉”安全。如果你做的不好，锁定真的会让你一头雾水，成为一堆错误。将锁定放在需要的地方并了解锁定如何保护您自己的访问是值得额外考虑的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-17T07:45:11.593

`Vector`Java API 的早期类，例如`Hashtable`和`StringBuffer`，被同步以使它们成为线程安全的。不幸的是，同步对性能有很大的负面影响，即使是在单个线程中使用这些集合时也是如此。

最好使用他们新的非同步替换：

*   `ArrayList`或`LinkedList`代替`Vector`
*   `Deque`代替`Stack`
*   `HashMap`代替`Hashtable`
*   `StringBuilder`代替`StringBuffer`

**代码示例**

```
Vector empList = new Vector(); 
```

**解决方案**

```
ArrayList empList = new ArrayList(); 
```

# java - 在 spring 服务类的所有实例之间共享一个 hashmap 实例

> ID：11125497
> 
> 赞同：2
> 
> 时间：2012-06-20T18:04:48.817
> 
> 标签：java, spring, real-time

我打算创建一个实时计数器。所以一个用户可以增加特定键的计数器值。而另一个通过 ajax 请求（在循环中或使用某种长轮询方法）获取更新的计数值。我将使用一个弹簧控制器，它将注入服务类我可以做如下的事情，还是有更好的方法：

```
@Service
public MyService{

//instance variable in spring injected service class, not sure if this correct
static final Map<String, Integer> myMap;

public void add(String key){
  Integer count = myMap.get(key);
  count++;
  myMap.put(key, count);
}

//accessed via ajax loop (and controller), if value changes update display
public Integer getCount(String key){
  return myMap.get(key)
}

@PostConstruct
public load(){
  myMap = new HashMap<String, Integer>(10){{//initialize}};
} 
```

**编辑**有几个答案，但不清楚哪个是最好的：同步添加方法？在另一个类（带注释的存储库）中创建地图并注入它？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:11:16.300

您可以，但需要注意这些问题：

*   地图最初是空的，但你从不检查空计数器；
*   add() 方法不会修改地图中的计数器。您需要在递增后将计数器放回地图中，因为 Integer 是不可变的。或者您需要在地图内存储可变计数器
*   多个线程在没有任何同步的情况下访问映射，这将导致错误、不稳定的行为或异常
*   如果您的应用程序集群在多台服务器中，此策略显然会失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:17:15.323

使用 ConcurrentHashMap

```
public void add(String key){
    Integer count = myMap.get(key);
    count= count++;
    myMap.put(key, count);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:19:03.690

`Integer`类是**不可变**的。这意味着您不能对其进行修改。因此，为了增加计数，您必须在增加后将其*放回地图中：*

```
public void add(String key){
  Integer count = myMap.get(key);
  count++;
  myMap.put(key, count);
} 
```

这引入的一个问题是**线程安全**。如果这个服务类将被多个线程同时访问，那么您必须确保以安全的方式访问它的数据。由于`myMap`正在修改，并且由于`HashMap`该类不是线程安全的，因此您必须使其成为线程安全的。一种方法是使用该`Collections.synchronizedMap()`方法。这将自动使 Map 实例成为线程安全的。

```
@PostConstruct
public load(){
  myMap = new HashMap<String, Integer>(10){{//initialize}};
  myMap = Collections.synchronizedMap(myMap);
} 
```

# mysql - 连接 2 个表，当连接行发生时从第 2 个表打印数据

> ID：11125498
> 
> 赞同：1
> 
> 时间：2012-06-20T18:04:51.870
> 
> 标签：mysql, join, logic

**案例：** 我有 2 个表，'contracts' 和 'members' 与 contract.id = members.cid 绑定。每个合同都有一个主要成员和几个次要成员（通常是主要成员的子女和配偶）。主要成员的详细信息（姓名、地址等）存储在表合约中，而额外成员的详细信息则保存在表成员中。（逻辑不好，我知道，但一开始就是一团糟，我需要时间重新设计数据库和网站）

**期望的输出：** 当我批量打印所有合同时（比如说，每周五），我还需要为每个成员打印一份合同副本，但要在合同中包含成员的详细信息，而不是主要成员。

**问题：** 这如何转化为 mysql 查询？好的，它是左连接，**但我怎么说“*从表中打印数据`members`而不是`contracts`连接行*”？**

出现在 2 个表中的主要字段是名称 + 姓氏，这些对于草稿查询示例应该足够了。

示例表和数据：

```
contracts
-------------------------
id  |  name  | surname | 
-------------------------
1   |  Tom   | Jones   |
2   |  Jamie | Oliver  |

members
--------------------------------
id  |  cid |  name  | surname | 
--------------------------------
1   |   1  |  Jack  | Jones   |
2   |   1  |  Anne  | Jones   |
3   |   2  |  Cathy | Wilson  | 
```

所以我想要的结果应该是：

```
cid | name   | surname |
--------------------------
1   |  Tom   | Jones   |
1   |  Jack  | Jones   |
1   |  Anne  | Jones   |
2   |  Jamie | Oliver  |
2   |  Cathy | Wilson  | 
```

如果我写

```
SELECT c.name as name, c.surname as surname, m.name as name, m.surname as surname
FROM contracts c
join members m on c.id = m.cid 
```

我只是以 name 和 name_1、surname 和 surname_1 结束，但我希望所有名称都属于 name 并且所有其他匹配的列也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:21:53.743

希望这有效:::

```
select c1.id, c1.name, c1.surname 
from contracts c1
union 
(Select m.id, m.name, m.surname 
  from 
members m left join contracts c on (c.id = m.cid)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:57:04.897

这就是我最终所做的并且它起作用了（字段名称不同，但语法很重要）：

```
SELECT u.id, u.onoma_u, u.name_u,
       coalesce(u.programa, aa.programa) as programa,
       coalesce(u.barcode, aa.barcode) as barcode,
       coalesce(u.plan, aa.plan) as plan,
       coalesce(u.im_exp, aa.im_exp) as im_exp,
       coalesce(u.symb, aa.symb) as symb
       FROM (SELECT a1.id, a1.onoma_u, a1.name_u, a1.programa, a1.barcode, a1.plan, a1.im_exp, a1.symb
       FROM aitisi a1 
        UNION
           SELECT a2.id, m.name, m.surname, NULL, NULL, NULL, NULL, NULL
           FROM members m
        JOIN aitisi a2 ON a2.id = m.symbid) u
       JOIN aitisi aa ON aa.id = u.id; 
```

我使用别名和 NULLS 作为虚拟字段来填充空白。

# ios - 从 iPad 屏幕移入后 UIButtons 无响应

> ID：11125506
> 
> 赞同：1
> 
> 时间：2012-06-20T18:05:17.207
> 
> 标签：ios, uibutton

描述可能有点混乱，我添加了图片以试图说明我所描述的内容。请让我知道我可以澄清什么以提供帮助。

我有一个 iPad 应用程序，其主视图是 xib。xib 的大小为 1024 x 1384，旨在以横向模式查看。iPad 屏幕底部有一排按钮可见。当按下其中一个按钮时，我移动框架，使这些按钮现在位于屏幕可见部分的顶部。还有一些其他元素从屏幕外开始，然后在移动后出现在屏幕上。

我遇到的问题是在屏幕外启动的 UIButton 没有调用与之关联的 IBAction。

我已经尝试将它设置为 YES ，但这似乎也没有任何区别。动画完成后我也尝试过 setNeedsDisplay 。

有人有想法么？

![在此处输入图像描述](../Images/080a30e784909d93668c12508ef92f57.png)

![在此处输入图像描述](../Images/88ea0de00752bdc6eed614f43cdf0e5b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:32:55.067

当您将视图添加到屏幕时，它会更改视图的大小以适应屏幕上的可见部分。因此，您的框架小于视图的总内容区域。移动框架不会为您做任何事情。它会将现有的可见内容向上移动，但不会更改视图以显示新的可见内容。

相反，您希望更改视图的`bounds.origin`，这将更改视图内容的可见部分。

**编辑：** 请注意，即使视图缩小了，我怀疑`clipsToBounds`主视图上的属性设置为`NO`. 这意味着它实际上会继续显示边界之外的内容，这就是它出现的原因。但是，命中测试仅适用于视图的实际帧。所有出现在边界之外的东西仍然是可见的，但它是不可*交互*的。

# c# - 将数据绑定到单独线程上的网格控件

> ID：11125510
> 
> 赞同：3
> 
> 时间：2012-06-20T18:05:39.950
> 
> 标签：c#, winforms, parallel-processing, task-parallel-library

我正在使用任务在单独的线程上获取数据，以便用户可以继续使用应用程序。我发现的问题是我的数据到我的网格的实际绑定也需要几秒钟。如何将我的数据绑定到与 FetchData() 调用相同的线程上？

```
Task<List<SomeData>> getData = new Task<List<SomeData>>(() =>
{
    List<SomeData> myData = FetchData(); // Expensive!
    return myData;
});

getData.Start();

Task processData = getData.ContinueWith(data =>
{
    grid.DataSource = data; // Takes a few second so now the UI thread is disrupted
}, TaskScheduler.FromCurrentSynchronizationContext()); // UI thread :( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:14:24.263

使用一个怎么样`BackgroundWorker`？只需将 backgroundworker 从工具箱拉到表单中，然后使用 BackgroundWorker 的 RunWorkerAsync 调用启动该进程。

在这种情况`DoWork`下，进行数据提取。

在这种情况`RunWorkerCompleted`下，将结果绑定到网格。

# c# - 如何修复执行多个 SQL 语句的超慢 EF/LINQ 查询

> ID：11125511
> 
> 赞同：5
> 
> 时间：2012-06-20T18:05:48.403
> 
> 标签：c#, .net, sql, linq, entity-framework

我有以下代码，这是不正常的：

```
TPM_USER user = UserManager.GetUser(context, UserId);
var tasks = (from t in user.TPM_TASK
             where t.STAGEID > 0 && t.STAGEID != 3 && t.TPM_PROJECTVERSION.STAGEID <= 10
             orderby t.DUEDATE, t.PROJECTID
             select t); 
```

第一行，`UserManager.GetUser`只是在数据库中进行简单的查找以获得正确的`TPM_USER`记录。但是，第二行会导致各种 SQL 混乱。

首先，它在这里执行了两条 SQL 语句。第一个抓取与该用户链接的*每一行*，`TPM_TASK`有时是数万行：

```
SELECT 
 -- Columns
 FROM  TPMDBO.TPM_USERTASKS "Extent1"
 INNER JOIN TPMDBO.TPM_TASK "Extent2" ON "Extent1".TASKID = "Extent2".TASKID
 WHERE "Extent1".USERID = :EntityKeyValue1 
```

对于有大量任务的用户，此查询大约需要 18 秒。我希望 WHERE 子句也包含 STAGEID 过滤器，这将删除大部分行。

接下来，它似乎对上面列表中的每一对执行一个新查询`TPM_PROJECTVERSION`：

```
SELECT 
 -- Columns
 FROM TPMDBO.TPM_PROJECTVERSION "Extent1"
 WHERE ("Extent1".PROJECTID = :EntityKeyValue1) AND ("Extent1".VERSIONID = :EntityKeyValue2) 
```

尽管这个查询很快，但如果用户在一大堆项目中有任务，它也会执行数百次。

我想生成的查询看起来像：

```
SELECT 
 -- Columns
 FROM  TPMDBO.TPM_USERTASKS "Extent1"
 INNER JOIN TPMDBO.TPM_TASK "Extent2" ON "Extent1".TASKID = "Extent2".TASKID
 INNER JOIN TPMDBO.TPM_PROJECTVERSION "Extent3" ON "Extent2".PROJECTID = "Extent3".PROJECTID AND "Extent2".VERSIONID = "Extent3".VERSIONID
 WHERE "Extent1".USERID = 5 and "Extent2".STAGEID > 0 and "Extent2".STAGEID <> 3 and "Extent3".STAGEID <= 10 
```

上面的查询将在大约 1 秒内运行。通常，我可以`JOIN`使用该`Include`方法指定。但是，这似乎不适用于属性。换句话说，我不能这样做：

```
from t in user.TPM_TASK.Include("TPM_PROJECTVERSION") 
```

有没有办法优化这个 LINQ 语句？我使用 .NET4 和 Oracle 作为后端数据库。

**解决方案：**

该解决方案基于 Kirk 在下面的建议，并且由于`context.TPM_USERTASK`无法直接查询而有效：

```
var tasks = (from t in context.TPM_TASK.Include("TPM_PROJECTVERSION")
             where t.TPM_USER.Any(y => y.USERID == UserId) &&
             t.STAGEID > 0 && t.STAGEID != 3 && t.TPM_PROJECTVERSION.STAGEID <= 10
             orderby t.DUEDATE, t.PROJECTID
             select t); 
```

它*确实*导致嵌套`SELECT`而不是`TPM_USERTASK`直接查询，但它似乎仍然相当有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:15:19.253

是的，您正在拉下特定用户，然后引用关系`TPM_TASK`。它正在拉下与该用户相关的所有任务，这正是它应该做的事情。当你这样做时，没有 ORM SQL 翻译。您正在获取一个用户，然后将他的所有任务放入内存，然后执行一些客户端过滤。这一切都是使用延迟加载完成的，因此 SQL 将异常低效，因为它无法批量处理任何内容。

相反，重写您的查询以直接针对`TPM_TASK`并过滤用户：

```
var tasks = (from t in context.TPM_TASK
         where t.USERID == user.UserId && t.STAGEID > 0 && t.STAGEID != 3 && t.TPM_PROJECTVERSION.STAGEID <= 10
         orderby t.DUEDATE, t.PROJECTID
         select t); 
```

请注意我们如何检查`t.USERID == user.UserId`. 这产生了相同的效果，`user.TPM_TASK`但现在所有繁重的工作都由数据库完成，而不是在内存中完成。

# jquery - 用 jquery 和 ajax 字符串加载更多？

> ID：11125517
> 
> 赞同：1
> 
> 时间：2012-06-20T18:06:24.163
> 
> 标签：jquery, ajax, load

我正在使用一个购物脚本，当您点击屏幕底部时，可以在同一页面上加载新产品，例如 Facebook 等。当您调用 page1 之类的页面时，可以为每个页面获取一个 AJAX 字符串.ajax 或 page2.ajax。我已经阅读了许多文章和教程，但我无法弄清楚这一点。

到目前为止，我所拥有的是：

HTML

```
<div id="collection-ajax">
    <div class="productsGrid">
    // products on page 1 //
    </div>
    // WHEN CATEGORIE HAS MORE PAGES THIS HAVE TO BE SHOWN AFTER THE PRODUCTS ABOVE
    <div id="loadmoreajaxloader" style="display:none;"><img src="ajax-loader.gif" /></div> 
```

AJAX 字符串（看起来像 json）是我放弃的其余产品之一：

```
{"page":1,"pages":2,"count":42,"url":"http:\/\/meules1.webshopapp.com\/woonkamer-en-keuken\/","products":[{"id":1750137,"vid":2765003,"image":"http:\/\/cdn.webshopapp.com\/i\/z1faly\/50x50x2\/newc.jpg","image_id":2156769,"brand":false,"code":"40-95407","ean":"40-95407","sku":"","score":false,"price":{"price":65,"price_money":"\u20ac65,00","price_money_with_currency":"\u20ac65,00 EUR","price_money_without_currency":"65,00","price_excl":54.6218,"price_excl_money":"\u20ac54,62","price_excl_money_with_currency":"\u20ac54,62 EUR","price_excl_money_without_currency":"54,62","price_incl":65,"price_incl_money":"\u20ac65,00","price_incl_money_with_currency":"\u20ac65,00 EUR","price_incl_money_without_currency":"65,00","price_old":109,"price_old_money":"\u20ac109,00","price_old_money_with_currency":"\u20ac109,00 EUR","price_old_money_without_currency":"109,00","price_old_excl":91.5966,"price_old_excl_money":"\u20ac91,60","price_old_excl_money_with_currency":"\u20ac91,60 
```

Jquery 是我面临的问题。我个人认为是这样的：

```
<script type="text/javascript">
var collectionPage  = {{ collection.page }};
var collectionPages = {{ collection.pages }};

function loadCollectionContent(){
    if(collectionPage < collectionPages){
        collectionPage++;  

        var url =  'http://shop.com/page' + collectionPage + '.ajax';

        $.getJSON(url, function(data){
            var listItems = [];
            $.each(data.products, function(index, product){
                var itemHtml = '' 
                // HERE I'M STUCK ON WHAT TO DO NEXT 
```

有人可以指点我一些方向吗？或者帮我写代码？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:49:15.597

你也可以这样做。

```
$("loadmoreajaxloader").click(function(){ 
     //on clicking the bottom of page or whatever div you want
$.ajax({
    url:database_more.pl //fetch data 
    success:function(data){
       $("loadmoreajaxloader").html(data);
 //embed it in the current page whatever you obtain
     }
  });
}); 
```

希望这可以帮助。仍然与您的方法不同。

谢谢。

# actionscript-3 - Flash VM 关闭时如何运行拆卸代码？

> ID：11125519
> 
> 赞同：1
> 
> 时间：2012-06-20T18:06:28.703
> 
> 标签：actionscript-3, flash, apache-flex

有没有办法在 Flash 即将关闭时注册要运行的代码（例如，当用户关闭浏览器或 DOM 操作导致嵌入式播放器被删除时）？

特别是，我希望我的应用程序向远程服务发送一个关闭数据包，以便用户的同行知道用户没有机会返回而无需等待超时。我正在使用 URLLoader 和 URLRequest 来维护 BOSH 连接，因此我欢迎适用于这种特定情况的解决方案。但是，如果有特定于 NetConnection 的解决方案，我相信我也可以从中学习。

我很高兴接受这个回调不会在 a 上运行，`kill -9`但如果有更优雅的退出路径允许一些代码执行，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:47:29.353

似乎更好的解决方案是通过服务器端来做到这一点，不是吗？服务器应该能够检测到断开连接，然后您可以使会话无效。

但是，您可以使用基于客户端/套接字的解决方案，尽管开销更大。使用 FMS 或其他一些 rtm 实时服务器，您可以将连接已断开的事件发送到您的 Web 服务器（尽管在网络连接性低或 Internet 断开的情况下您可能会遇到问题）。不过，我建议反对这一点，根据我的经验，FMS 很烂:)

设置极低的超时是不可能的吗？（即<10秒）

# android - Android中的Alert Box不让我点击，直接执行动作

> ID：11125520
> 
> 赞同：0
> 
> 时间：2012-06-20T18:06:33.290
> 
> 标签：android, android-intent, android-activity, android-alertdialog

我有一个按钮，单击时应显示一个仅包含“确定”按钮的警报对话框，单击时应转到另一个活动。但是这个对话框会出现几秒钟并进入活动而不让我单击或确认它。这是我用过的代码

```
 public void onClick(View v) {

    AlertDialog.Builder alertbox = new AlertDialog.Builder(InsertData.this);

    alertbox.setMessage("Object Location Stored!");

    alertbox.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
                // the button was clicked

                Intent a = new Intent(getApplicationContext(),MainMenu.class);
                startActivity(a);
            }

        });
        alertbox.show();

    } 
```

谁能帮我解决这个问题？谢谢你的建议。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:25:18.400

我不明白问题是什么。几天前，我尝试自己包含一个 AlertDialog。我看到有很多不推荐使用的方法。我最终使用了下面的代码。如果你喜欢试试这个

```
AlertDialog ad=new AlertDialog.Builder(this).create();
        ad.setTitle(R.string.app_name);
        ad.setMessage("MESSAGE");
        ad.setButton(AlertDialog.BUTTON_POSITIVE, "OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }}); 
        ad.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T00:47:44.850

这是一个想法，让我们看看您的 alertDialogs onClick 是否被调用。这将告诉您问题出在警报对话框还是其他问题上。您应该能够将其复制并粘贴到您的应用程序中，然后只需调用 showAlertDialog(); 从你想要的任何地方。发布调用 alertDialog 的代码。

```
public void showAlertDialog()
{

         AlertDialog.Builder alertDialogBuilder = new AlertDialog
            .Builder(YourActivity.this);
     alertDialogBuilder.setTitle("Look at me!");
     alertDialogBuilder
            .setMessage("Im an alert dialog")
            .setCancelable(true)
            .setNegativeButton("Okay",new DialogInterface.OnClickListener() 
            {
                public void onClick(DialogInterface dialog,int id) 
                {

                    Toast.makeText(YourActivity.this, "Alert dialog onClick",   
                                    Toast.LENGTH_SHORT).show();   

                    dialog.dismiss();

                }
            }
        );

    AlertDialog alertDialog = alertDialogBuilder.create();
    alertDialog.show();
} 
```

# asp.net - 关于 where 子句的 LINQ to 实体性能

> ID：11125521
> 
> 赞同：0
> 
> 时间：2012-06-20T18:06:44.180
> 
> 标签：asp.net, entity-framework, sql-server-2005, linq-to-entities

假设我在数据库中有一个包含 10k 条记录的表。我不再需要实际使用那些 10k 记录，但我仍然需要将它们保存在数据库中。该表现在将用于存储新数据。因此，除了表中已经存在的 10K 记录之外，还会有更多记录出现。与“旧”的 10K 记录相反，我确实需要处理新插入的数据。现在我这样做是为了获取我需要的数据：

```
List<Stuff> l = (from x in db.Table
            where x.id > id
            select x).ToList(); 
```

我现在的问题是：**LINQ（或一般的 SQL）中****的子句如何在幕后工作？`where`**是否要搜索整个表，直到`(x.id > id)`为真？因为假设表将从 10k 记录增加到 20K。**如果我知道**我只需要从某个点开始查看，那么查看整个 20 k 记录会有点傻。

在使用 LINQ to 实体时，我遇到了性能问题（不是戏剧性的，但足以被它激怒），我有点不明白，因为现代计算机筛选一个完全没有问题仅有 2 万条记录。有人建议我使用存储过程而不是 LINQ 查询，但我不知道这是否会提高性能？

任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:31:48.670

它的行为就像一个措辞相似的 SQL 查询。问题是您遇到的开销是发生在查询中还是发生在查询到列表的转换中。您编写的查询本身应该等同于：

```
Select ID, Column1, Column2, Column3, ... , Column(n+1)
From db.Table
Where ID > id 
```

根据数据的性质，此查询应该相当快。但是，在对其采取行动之前，查询本身不会被执行。在这种情况下，您将其转换为列表，这相当于对其进行操作。我找不到有人对我提出的关于这种做法的评论，但我发现它对保持性能清洁也很有帮助。除非您有一些非常具体的需要，否则您应该将查询保留为`IQueryable`. 将它们转换为列表会使工作量加倍，因为首先必须执行查询，然后必须将结果集转换为适当的`IEnumerable`（在本例中为列表）。

所以你有两个潜在的瓶颈。简单的查询可能需要很长时间才能查询大量数据，或者记录的数量可能会在创建列表的位置出现瓶颈。另一种可能性是`ID`在这种情况下的性质。如果它是数字，那将为您节省一些时间。如果它正在执行基于文本的搜索，那么它会更重。

要回答您的具体问题，是的，它将搜索数据库中的每条记录并返回与表达式匹配的所有记录。*编辑：如果数据库在相关列上有适当的索引，它不会搜索每条记录，而是使用索引来执行搜索。来自@Pleun 的评论。*

至于使用存储过程，这是一大堆废话，但它是一个完全可以接受的替代方案。我有几个程序经常对一个拥有超过 4000 万条记录的数据库运行类似的查询，到目前为止，我遇到的唯一性能问题是多个用户执行快速触发查询时的 CPU 使用率。为了解决您的特定问题，我建议您在 SQL Management Studio 中对其进行一些调整，直到您想要的查询以可接受的速度返回您的界面。然后，您可以将该查询转换为兼容的 Linq 语句。只要您将其保留为 a，`IQueryable`它应该会显示出类似的结果。

# jquery - Google Plus 垂直侧边栏菜单

> ID：11125524
> 
> 赞同：1
> 
> 时间：2012-06-20T18:06:59.123
> 
> 标签：jquery, google-plus

我真的很喜欢 Google+ 上当前的垂直菜单/图标（上面写着 Home、Profile、Explore...）。它一直存在并且易于导航。

有谁知道是否有任何类似工作的 JQuery 插件？

提前致谢！

# android - Facebook 访问令牌格式是否已更改？

> ID：11125529
> 
> 赞同：-1
> 
> 时间：2012-06-20T18:07:13.697
> 
> 标签：android, facebook, xmpp

我正在尝试将 Facebook Chat 集成到 android 中。

```
 facebook.authorize(this,new String[]{"xmpp_login"}, new DialogListener() {
            public void onComplete(Bundle values) {
                Log.w("XMPP","The Bundle Value is "+values);
                Log.w("XMPP","Connected Acess Token "+facebook.getAccessToken()+"App id "+facebook.getAppId());
                ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
                config.setSASLAuthenticationEnabled(true);
                XMPPConnection xmpp = new XMPPConnection(config);
                try
                {
                    SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM", SASLXFacebookPlatformMechanism.class);
                    SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);
                    xmpp.connect();
                    xmpp.login(facebook.getAppId(),facebook.getAccessToken());

               }
                catch(XMPPException e)
                {
                    Log.w("XMPP","Exception ");
                    e.printStackTrace();
                }

            } 
```

访问令牌是`AAACFZA9tieEABAN06ZBVMw33r0ZBbeszgPiy0Cr7Du400sFpz98cua3PAjjvKJS3dZCM7noAowPwjVr8xGBZBaV4etzAnlZCe6z0bn8itM3AZD`

访问令牌是正确的模式吗？

谁能指导我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:48:13.113

Facebook 已宣布从 6 月 6 日起必须通过 TLS 完成 XMPP 连接。

连接到 Facebook 的 XMPP 服务的应用程序将需要使用 STARTTLS 进行所有连接。
他们将开始拒绝未加密的连接。

[https://developers.facebook.com/blog/post/2012/05/16/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/05/16/platform-updates--operation-developer-love/)

# desire2learn - 欲望2学习价：课程从提供代码中获取orgUnitID

> ID：11125532
> 
> 赞同：2
> 
> 时间：2012-06-20T18:07:32.010
> 
> 标签：desire2learn

我正在做一些关于成绩和desire2learn Valence API 的工作。在我操作的上下文中，我们无法直接获取 orgUnitID。我们目前正在获取每门课程的课程代码，但没有获取 orgUnitID。由于 API 需要 orgUnitID 才能与课程进行任何交互，有没有办法使用课程的提供代码来查找 orgUnitID？谢谢，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:47:20.813

没有调用通过提供代码搜索课程，但是，提供代码设置在[OrgUnitInfo 结构](http://docs.valence.desire2learn.com/res/enroll.html#Enrollment.OrgUnitInfo)中。因此，我看到人们检索该结构作为间接获取实际 ID。（例如在[尝试检索成绩](https://stackoverflow.com/questions/10018065/how-do-i-export-grades-from-desire2learn)时）

例如，如果您有一个[用户 ID，](http://docs.valence.desire2learn.com/res/enroll.html#get--d2l-api-lp-%28D2LVERSION-version%29-enrollments-users-%28D2LID-userId%29-orgUnits-)您可以获得注册并从那里开始。

为了进一步回答，我需要了解您想如何参加课程？全球范围内还是针对特定用户或其他？

# c# - 如何使用 Web API 返回文件？

> ID：11125535
> 
> 赞同：117
> 
> 时间：2012-06-20T18:07:39.623
> 
> 标签：c#, asp.net-web-api

我正在使用*ASP.NET Web API*。
我想从 API（API 生成）下载带有 C# 的 PDF。

我可以让 API 返回一个`byte[]`吗？对于 C# 应用程序，我可以这样做：

```
byte[] pdf = client.DownloadData("urlToAPI");? 
```

和

```
File.WriteAllBytes()? 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-06-20T18:20:08.890

最好在其中返回带有 StreamContent 的 HttpResponseMessage。

这是示例：

```
public HttpResponseMessage GetFile(string id)
{
    if (String.IsNullOrEmpty(id))
        return Request.CreateResponse(HttpStatusCode.BadRequest);

    string fileName;
    string localFilePath;
    int fileSize;

    localFilePath = getFileFromID(id, out fileName, out fileSize);

    HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
    response.Content = new StreamContent(new FileStream(localFilePath, FileMode.Open, FileAccess.Read));
    response.Content.Headers.ContentDisposition = new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment");
    response.Content.Headers.ContentDisposition.FileName = fileName;
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/pdf");

    return response;
} 
```

**UPD**来自[patridge](https://stackoverflow.com/users/48700/patridge)的评论：如果其他人来到这里希望从字节数组而不是实际文件发送响应，您将要使用 new ByteArrayContent(someData) 而不是 StreamContent（请参阅[此处](https://stackoverflow.com/questions/12467546/is-there-a-recommended-way-to-return-an-image-using-asp-net-web-api/12468615#12468615)）。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-08-25T18:49:04.730

我做了以下动作：

```
[HttpGet]
[Route("api/DownloadPdfFile/{id}")]
public HttpResponseMessage DownloadPdfFile(long id)
{
    HttpResponseMessage result = null;
    try
    {
        SQL.File file = db.Files.Where(b => b.ID == id).SingleOrDefault();

        if (file == null)
        {
            result = Request.CreateResponse(HttpStatusCode.Gone);
        }
        else
        {
            // sendo file to client
            byte[] bytes = Convert.FromBase64String(file.pdfBase64);

            result = Request.CreateResponse(HttpStatusCode.OK);
            result.Content = new ByteArrayContent(bytes);
            result.Content.Headers.ContentDisposition = new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment");
            result.Content.Headers.ContentDisposition.FileName = file.name + ".pdf";
        }

        return result;
    }
    catch (Exception ex)
    {
        return Request.CreateResponse(HttpStatusCode.Gone);
    }
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2019-07-03T17:55:33.003

只是一个注释：如果我们想发送原始字节，`.Net Core`我们可以使用`FileContentResult`并将 contentType 设置为。`application/octet-stream`例子：

```
[HttpGet("{id}")]
public IActionResult GetDocumentBytes(int id)
{
    byte[] byteArray = GetDocumentByteArray(id);
    return new FileContentResult(byteArray, "application/octet-stream");
} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-12-29T22:32:51.087

`IHttpActionResult`以in为例`ApiController`。

```
[HttpGet]
[Route("file/{id}/")]
public IHttpActionResult GetFileForCustomer(int id)
{
    if (id == 0)
      return BadRequest();

    var file = GetFile(id);

    IHttpActionResult response;
    HttpResponseMessage responseMsg = new HttpResponseMessage(HttpStatusCode.OK);
    responseMsg.Content = new ByteArrayContent(file.SomeData);
    responseMsg.Content.Headers.ContentDisposition = new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment");
    responseMsg.Content.Headers.ContentDisposition.FileName = file.FileName;
    responseMsg.Content.Headers.ContentType = new MediaTypeHeaderValue("application/pdf");
    response = ResponseMessage(responseMsg);
    return response;
} 
```

如果您不想下载 PDF 并使用内置 PDF 查看器的浏览器，请删除以下两行：

```
responseMsg.Content.Headers.ContentDisposition = new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment");
responseMsg.Content.Headers.ContentDisposition.FileName = file.FileName; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-02T15:09:12.187

我一直想知道是否有一种简单的方法可以以更...“通用”的方式下载文件。我想出了这个。

这是一个简单的`ActionResult`方法，允许您从返回`IHttpActionResult`. 该文件存储在`byte[] Content`. 如果需要，您可以将其转换为流。

我用它来返回存储在数据库的 varbinary 列中的文件。

```
 public class FileHttpActionResult : IHttpActionResult
    {
        public HttpRequestMessage Request { get; set; }

        public string FileName { get; set; }
        public string MediaType { get; set; }
        public HttpStatusCode StatusCode { get; set; }

        public byte[] Content { get; set; }

        public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
        {
            HttpResponseMessage response = new HttpResponseMessage(StatusCode);

            response.StatusCode = StatusCode;
            response.Content = new StreamContent(new MemoryStream(Content));
            response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
            response.Content.Headers.ContentDisposition.FileName = FileName;
            response.Content.Headers.ContentType = new MediaTypeHeaderValue(MediaType);

            return Task.FromResult(response);
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-03T11:36:45.840

您可以尝试，从另一端下载文件的 HttpClient，同时您可以作为文件结果传递

```
 [HttpGet]
    [Route("api/getFile")]
    public async  Task<FileResult> GetFile(string Param1,string Param2)
    {
        try
        {
            Stream stream = null;
            string strURL = @"File URL";
            HttpClient client = new HttpClient();
            HttpResponseMessage httpResponse = await client.GetAsync(strURL);
            Stream streamToReadFrom = await httpResponse.Content.ReadAsStreamAsync();
            return File(streamToReadFrom, "{MIME TYPE}");

        }
        catch (Exception ex)
        {

            throw ex;
        }
        finally
        { 

        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-01T06:55:31.750

下载文件的另一种方法是将流内容直接写入响应的正文：

```
[HttpGet("pdfstream/{id}")]
public async Task  GetFile(long id)
{        
    var stream = GetStream(id);
    Response.StatusCode = (int)HttpStatusCode.OK;
    Response.Headers.Add( HeaderNames.ContentDisposition, $"attachment; filename=\"{Guid.NewGuid()}.pdf\"" );
    Response.Headers.Add( HeaderNames.ContentType, "application/pdf"  );            
    await stream.CopyToAsync(Response.Body);
    await Response.Body.FlushAsync();           
} 
```

# javascript - 仅使用 CSS 在位置之间设置动画？

> ID：11125537
> 
> 赞同：1
> 
> 时间：2012-06-20T18:07:52.853
> 
> 标签：javascript, animation, css, css-transitions

我想在 div 的“默认”状态/位置之间制作动画。例如：

Div**绝对**定位在一个类中，位于屏幕的*左侧*。类通过 JS 被移除（或被替换）并且 position 现在是**relative**。默认的相对位置实际上是在屏幕的另一侧。我想动画这个。

类似于 Dock 的东西，各种 div 作为 display-inline 中的图标，在 Dock 上水平居中。如果我“删除”其中一个图标，其余图标会稍微移到重新定位。我想让它们移动以填补空白。

过渡：一切都不起作用（我假设是因为该位置没有预定义的值）所以这甚至可能吗？有 JS 解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:14:00.370

完全可以按照您描述的方式进行。这是一个如何完成的活生生的例子。

[http://jsfiddle.net/nDr4y/3/](http://jsfiddle.net/nDr4y/3/)

您还可以从 css 中删除过渡，并使用[jquery 以](http://api.jquery.com/animate/)纯 JS 为元素设置动画。语法如下所示：

```
// in the object are the css properties you want to animate,
// the second argument is how long you want it to take in ms
$('.el').animate({ left: 100 }, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:15:23.910

您只需要找出目标坐标并使用 jQuery 或您使用的任何框架进行设置。除此之外，完全有可能。

[http://jsfiddle.net/Kd72u/](http://jsfiddle.net/Kd72u/)

# c# - 我可以在构造函数运行之前使用对象初始化语法为属性赋值吗？

> ID：11125538
> 
> 赞同：3
> 
> 时间：2012-06-20T18:07:55.710
> 
> 标签：c#, constructor, initialization

我正在使用将对象序列化为 XML `System.Xml.Serialization`，这需要我有无参数的构造函数。

因此，我尝试使用对象初始化语法将值分配给某些属性，然后在将对象序列化为 XML 之前根据需要使用构造函数逻辑来格式化这些值。

我的问题是构造函数在属性被赋值之前运行。一个简化的例子如下：

```
class Program
{
    static void Main(string[] args)
    {
        Foo myFoo = new Foo() { HelloWorld = "Beer", HelloWorldAgain = "More beer" };

        Console.WriteLine(myFoo.HelloWorld);
        Console.WriteLine(myFoo.HelloWorldAgain);

        Console.ReadLine();
    }
}

public class Foo : Bar
{
    public string HelloWorld { get; set; }

    public Foo()
    {
        Console.WriteLine("Foo Was Initialized");
        Console.WriteLine(HelloWorld);
    }
}

public abstract class Bar
{
    public string HelloWorldAgain { get; set; }

    public Bar()
    {
        Console.WriteLine("Bar was initialized");
        Console.WriteLine(HelloWorldAgain);
    }
} 
```

这将产生以下输出：

![输出](../Images/705a55b79c3d93fe2be4276ab28f4ed5.png)

如您所见，构造函数逻辑运行，然后属性被赋值。我需要这个以相反的方式工作。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T18:13:30.823

序列化要求你有一个无参数的构造函数，但并不限制你使用那个构造函数。

保留无参数构造函数以进行反序列化，但添加另一个构造函数，当您需要在代码中实例化类时，该构造函数接受您的值并执行所需的初始化。

对象初始化语法只是构造后设置属性的简写。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T18:11:27.057

不，对象初始化语法只是一个捷径。当你写：

```
Foo foo = new Foo { HelloWorld  = "Beer" }; 
```

编译器只是将其重写为与您编写时非常接近的内容：

```
Foo foo = new Foo();
foo.HelloWorld  = "Beer"; 
```

如果需要参数才能使对象存在，则应将它们作为参数放入构造函数中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T18:09:54.227

不，这是不可能的，因为为了能够初始化对象的属性，对象已经存在。它的存在是由 ctor在所有其他东西*之前运行来保证的。*

**如果**我们谈论“不运行默认构造函数”，就像一个概念性问题。您*可以*通过使用`static`属性来做到这一点。在这种情况下 Foo() 将不会被调用。但这自然不在当前的问题主题范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T18:14:11.220

可以说，语法具有欺骗性。这里发生了什么？

```
var myFoo = new Foo();
myFoo.HelloWorld = "Beer";
myFoo.HelloWorldAgain = "MoreBeer"; 
```

就是这样，我害怕。在构造函数运行*之前*根本不可能初始化属性。构造函数是在为对象分配内存并将默认值分配给字段之后“发生”的第一件事。

顺便说一句，您不需要使用对象初始化语法的括号。这同样好（但更具欺骗性）：

```
var myFoo = new Foo { HelloWorld = "Beer", HelloWorldAgain = "MoreBeer" }; 
```

查看您的问题，看起来您正在尝试做的事情（在序列化之前修改属性）不属于构造函数。

# jquery - jScrollPane scrollToElementstickToMiddle

> ID：11125548
> 
> 赞同：0
> 
> 时间：2012-06-20T18:08:40.427
> 
> 标签：jquery, jscrollpane, jquery-jscrollpane

所以，jScrollPane 很棒。太棒了。它有大量的选项和 API 调用，可以用来定制它。我目前正在使用它来滚动页面上的一些内容，并希望使用 scrollToElement 将我选择的 id 元素定位在中心。不幸的是，这不是我可以传递给 scrollToElement 的参数。它目前只允许（elem、stickToTop、animate）。

有没有人扩展插件以允许使用stickToCenter 参数？试图通过不重新创建某人可能已经做过的事情来节省自己的时间。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:51:26.040

好吧，我尝试添加该功能：

[对插件的完整版 ( http://jscrollpane.kelvinluck.com/script/jquery.jscrollpane.js](http://jscrollpane.kelvinluck.com/script/jquery.jscrollpane.js) )进行了以下更新：

***第 788 行：***

函数 scrollToElement（ele，stickToTop，**stickToMiddle**，**middleOffset**，动画）

***822、823 行***

添加了另一个搜索stickToMiddle参数并应用middleOffset的条件：

else if (eleTop < viewportTop || **stickToMiddle** ) { destY = (eleTop - settings.verticalGutter) - middleOffset;

***895线***

scrollToElement(e.target, false, **false** , **null** );

***1034行***

scrollToElement(e, true, **false** , **null** );

***第 1042 行：***

scrollToElement(e, true, **false** , **null** );

***1102线***

jsp.scrollToElement(element, true, **false** , **null** );

***1211号线***

scrollToElement：函数（ele，stickToTop，**stickToMiddle**，**middleOffset**，动画）

***1213线***

scrollToElement（ele，stickToTop，**stickToMiddle**，**middleOffset**，动画）；

* * *

完成此操作后，我现在可以在进行 API 调用时像这样使用它：

```
api.scrollToElement('#elem', false, true, 115); 
```

希望这最终能帮助寻找相同功能的人。请根据需要更新上述内容，并希望在未来的更新中添加。

# php - jQuery ajax 在带有链接的表单提交上失败

> ID：11125549
> 
> 赞同：0
> 
> 时间：2012-06-20T18:08:47.910
> 
> 标签：php, forms, jquery

在这个[问题](https://stackoverflow.com/questions/11121733/ajax-form-not-updating-values/11125356#11125356)的序列中，我在表单中获得的内容现在正在更新数据库。但是，当我单击此链接时

```
<a onclick="doUpdate()" href="#" id="commit-changes" class="uibutton submit_form">Gravar</a> 
```

jQuery .ajax 函数触发错误回调并使用信息更新数据库。

这是代码

```
function doUpdate()
{
              e.preventDefault();
              $.ajax({
                type: "POST",
                data: $("#validation").serialize(),
                cache: false,
                url:"modules/user/updateuser.php",
                success : function(data){
                    $("#response-update").html(data);
                },
                error:  function(data){
                    $("#response-update").html("Erro na submissão");
                }                
           });
          } 
```

我想获得成功回调，以便在用户保存数据时向用户显示一条好消息。

但是，如果我只是这样做

```
 <a href="#" id="commit-changes" class="uibutton submit_form">Gravar</a>
 <script>
 $(function(){
 $('#commit-changes').click(function(e){
              e.preventDefault();
              $.ajax({
                type: "POST",
                data: $("#validation").serialize(),
                cache: false,
                url:"modules/user/updateuser.php",
                success : function(data){
                    $("#response-update").html(data);
                },
                error:  function(data){
                    $("#response-update").html("Erro na submissão");
                }                
           });
          });
 });
 </script> 
```

“提交”根本不起作用。

我怎么解决这个问题？被这部分卡住了好几天！:(

编辑 - 表单的 HTML（这也是页面请求中加载的响应）

```
 $response.='<form id="validation" method="post"> 
                                <fieldset >
                                <input type="hidden" name="user_id" value="'.$_POST['user_id'].'"/>
                                <legend>Actualizar Dados Utilizador</legend>
                                      <div class="section ">
                                      <label>Nome<small>Insira o seu nome</small></label>   
                                      <div> 
                                      <input type="text" class="validate[required,custom[onlyLetterSp]] large" name="nome" id="f_required" value="'.utf8_encode($rcs_user->nome).'">
                                      </div>                                      
                                      </div>';
 $response.='<div class="section ">
                                      <label> Email<small>Insira o seu email</small></label>   
                                      <div> 
                                      <input type="text" class="validate[required,custom[email]] large" name="email" id="e_required" value="'.  utf8_encode($rcs_user->email).'">
                                      </div>
                                      </div>';

 $response.= '<div class="section">
                                        <label>Permissões<small>Seleccione o tipo de utilizador </small></label>   
                                        <div>
                                            <select class="medium" name="role">

                                                       '.$role.'                                                 

                                            </select>       
                                      </div>
                                      </div>                                      
                                     <div class="section">
                                            <label>Activo<small>Activar utilizador</small></label>

                                         <div>
                                            '.$activo.'
                                            <span class="f_help">ON / OFF  </span> 
                                        </div>
                                  </div>

                                  <div class="section last">
                                  <div>
                                     <a onclick="return doUpdate()" href="#" id="commit-changes" class="uibutton submit_form">Gravar</a><a class="uibutton special"   onClick="ResetForm()" title="Limpar Formulário"   >Limpar Formulário</a>
                                 </div>
                                 </div>

                                </fieldset></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:11:39.407

您是否将 jQuery 代码放入`document.ready`处理程序中？

```
jQuery(function ($) {
    // put jQuery here
}); 
```

第一个示例可以在没有的情况下工作`document.ready`（但没有多大意义，因为无论如何您都在使用 jQuery）。第二个不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:20:48.067

为了按预期执行**doUpdate()**函数，试试这个

修改锚标签**onclick**属性为

```
<a onclick="return doUpdate()" href="#" id="commit-changes" class="uibutton submit_form">Gravar</a> 
```

并将 doUpdate 函数更改为

```
function doUpdate()
{
  $.ajax({
     type: "POST",
     data: $("#validation").serialize(),
     cache: false,
     url:"modules/user/updateuser.php",
     success : function(data){
         $("#response-update").html(data);
     },
     error:  function(data){
         $("#response-update").html("Erro na submissão");
     }                
  });

  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:31:41.693

jquery ajax 成功/错误回调将根据是否收到 POST 请求触发，它与您发布到的文件中实际发生的情况无关。奇怪的是，您会收到错误回调并更新数据库，但您可以尝试让您发布的 php 文件给出响应，然后根据该响应运行成功/错误。

在你的 php 文件中，你可以有这样的东西：

```
$testQuery = "QUERY STRING HERE";
if(!mysql_query($testQuery))
{
    echo "error";
    exit;
}
else
{
    echo "sucess";
    exit;
} 
```

然后在您的 doUpdate 函数中，您可以根据 html 运行成功回调和输出

```
 function doUpdate()
{
              e.preventDefault();
              $.ajax({
                type: "POST",
                data: $("#validation").serialize(),
                cache: false,
                url:"modules/user/updateuser.php",
                success : function(data){
                   if(data == "success")
                   {
                       $("#response-update").html(data);
                   }
                   else
                   {
                       $("#response-update").html("Erro na submissão");
                   }                    
                }            
           });
          } 
```

您还可以使用“完成”回调，即使未收到 POST，它也会触发，但除了函数已运行之外，它不会告诉您任何其他信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:57:26.617

我有一个解决方案。不是最漂亮的，因为我想要一个纯 jQuery 解决方案，但是，它运行良好。

只需要改变

```
<a onclick="doUpdate()" href="#" id="commit-changes" class="uibutton submit_form">Gravar</a> 
```

到

```
<input onclick="doUpdate()" href="#" id="commit-changes" class="uibutton submit_form" value="Gravar" /> 
```

现在它适用于成功回调触发。

感谢您对此的所有帮助。

# jquery - 使用 JQuery-File-Upload 和 Paperclip 的多个文件上传错误

> ID：11125557
> 
> 赞同：3
> 
> 时间：2012-06-20T18:09:16.807
> 
> 标签：jquery, ruby-on-rails-3, paperclip

在使用[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)在 Rails 中上传多个文件的[教程](https://github.com/fedesoria/fily/tree/no-asset-pipeline)之后 ，一旦将属性*:multiple => true*添加到 file_field 中，似乎就会出现问题，例如

 *```
<%= f.file_field :path, :multiple => true %> 
```

出现以下错误：

```
Started POST "/pictures" for 127.0.0.1 at 2012-06-20 18:50:51 +0100
Processing by PicturesController#create as JSON
Parameters: {"utf8"=>"✓", "authenticity_token"=>"hcMORNvY1Rx/tbHv8wB+hLKzS92Nez5qHdgHXfcq+Nc=", "picture"=>{"path"=>[#<ActionDispatch::Http::UploadedFile:0x007fa183ba1a18 @original_filename="001.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"picture[path][]\"; filename=\"001.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/xq/dq4fkqnx0m36htfgdj2lxlb00000gn/T/RackMultipart20120620-60459-yeso39>>]}}
Completed 500 Internal Server Error in 1ms

Paperclip::AdapterRegistry::NoHandlerError (No handler found for [#<ActionDispatch::Http::UploadedFile:0x007fa183ba1a18 @original_filename="001.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"picture[path][]\"; filename=\"001.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/xq/dq4fkqnx0m36htfgdj2lxlb00000gn/T/RackMultipart20120620-60459-yeso39>>]):
app/controllers/pictures_controller.rb:14:in `create' 
```

有没有人遇到过这个问题的解决方案？

Rails：3.2.5，回形针：3.1.2，浏览器：Chrome 版本 19.0.1084.56，操作系统：Mac OS X 10.7.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:35:59.813

我一直在做同样的事情，但是文件字段没有多个 => true。您将无法使用文件浏览器对话框一次选择多个图像，但只要您不使用 IE，您仍然可以一次拖放多个文件，并且效果很好。

我没有在对话框中选择多个文件，但是一旦您完成了其余的设置工作，这只是一个小问题。*

# sql - 如何限制sql“group by”部分/案例中使用的第二个字段的行数，没有严格的小于或大于序列

> ID：11125561
> 
> 赞同：0
> 
> 时间：2012-06-20T18:09:30.433
> 
> 标签：sql, firebird2.5

有两个表：

```
CREATE TABLE STORE ( 
  ID INTEGER NOT NULL,  
  MEDICINE_ID INTEGER NOT NULL,  
  SHIPMENT_ID INTEGER NOT NULL,  
  PACKAGE_ID INTEGER NOT NULL,  
  QUANTITY INTEGER NOT NULL);  

CREATE TABLE ORDERS (  
  ID INTEGER NOT NULL,  
  CLIENT_ID INTEGER NOT NULL,
  STORE_ITEM_ID INTEGER NOT NULL,
  QUANTITY INTEGER NOT NULL,
  ORDERDATE DATE NOT NULL,
  STATE INTEGER DEFAULT 1 NOT NULL); 
```

我在这里只写了字段，没有生成器、触发器、键等

下一个视图选择每个日期最受欢迎的药物：

```
CREATE VIEW ORDERS_STORE_QTY
AS
SELECT
  O1.ORDERDATE,
  S1.MEDICINE_ID,
  SUM(O1.QUANTITY) AS QTY
FROM ORDERS O1
INNER JOIN STORE S1 ON (S1.ID = O1.STORE_ITEM_ID)
WHERE O1.STATE=5 /* the closed order */
GROUP BY O1.ORDERDATE, MEDICINE_ID
ORDER BY O1.ORDERDATE, SUM(O1.QUANTITY) DESC 
```

然后我将视图与自身进行左连接，并在条件下比较汇总数量：

```
SELECT T1.ORDERDATE, T1.MEDICINE_ID, T1.QTY
  FROM ORDERS_STORE_QTY T1
  LEFT OUTER JOIN ORDERS_STORE_QTY T2
  ON (
        T1.ORDERDATE = T2.ORDERDATE
        AND
        T2.QTY &gt; T1.QTY 
     )
   GROUP BY T1.ORDERDATE, T1.MEDICINE_ID, T1.QTY
   HAVING COUNT(T2.MEDICINE_ID) &lt; 5
   ORDER BY T1.ORDERDATE, T1.QTY DESC 
```

如果每天的所有汇总数量都不同，我没有问题。我的任务是将“最佳”药物限制为每天五种，但有时会有重复的数量，所以 我得到的不是序列**0、1、2、3、4 ：**
**0、1、2、2、2、3、4 , 5**例如。

如何更改查询（我宁愿不使用生成器也不使用非规范化）以真正限制行数？

所有代码都接近于纯 SQL（我希望如此）并为 Firebird 2.5 编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:18:25.093

我相信您可以将 self join 中的 on 子句更改为：

```
ON T1.ORDERDATE = T2.ORDERDATE AND 
   (T2.QTY > T1.QTY or
    (T2.QTY = T1.QTY and t2.Medicine_ID < t1.Medicine_ID)
   ) 
```

这样做是通过强制执行严格的排序来消除联系——首先是数量，然后是药物 ID。

哦，如果您使用支持窗口函数（row_number()）的数据库，这会容易得多；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:17:22.950

尝试将`DISTINCT`关键字添加到您的`SELECT`语句中以消除任何重复项。

# silverlight - 自动更新与数据库绑定的列表框而不刷新 Silverlight 中的页面...？

> ID：11125565
> 
> 赞同：0
> 
> 时间：2012-06-20T18:09:44.867
> 
> 标签：silverlight, linq, entity-framework, silverlight-4.0

我有一个 silvelight 绑定的列表框，它带有一个 Observable 集合，它从数据库中填充，如下所示：

```
 var item = new AllCommentsPerMaterialCategoryItem { CommenterName = name,
    Text = project.Text, ID = project.ID, NoLike = (int)project.NoLike, SID = l, PID = i,
    VID = (int)project.MID, Date = project.date.ToString() };
    =_viewModel.AllCommentsPerMaterialCategoryItem.Add(item);=  }

    ObservableCollection<AllCommentsPerMaterialCategoryItem> GenreList =   
    _viewModel.AllCommentsPerMaterialCategoryItem; //result from a call to a WCF 
     service which returns the observable collection 
        GenreList1 = _viewModel.AllCommentsPerMaterialCategoryItem;
      mainMenuList.ItemsSource = GenreList; 
```

我希望每当有人在数据库中添加新项目以在列表框中自动填充（更新刷新）以及每当我添加要添加到列表中的新项目时

我读到 Observable 集合将在内部实现“INoifyProbertyChange”，但它不起作用，我也不确定这是否会满足这些要求，我想它只会是第二个。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:16:33.893

`ObservableCollection`确实在内部实现`INotifyPropertyChanged`. 但是，它不会为您进入数据库。您需要在计时器上从数据库刷新或设置双工服务来通知您，然后`ObservableCollection`根据需要添加/删除项目。

最好的用法是创建一个属性，返回一个实例`ObservableCollection`并绑定到它，然后在事情发生变化时简单地修改集合。如果要换出整个集合，则需要确保属性本身通知属性已更改，因为`ObservableCollection`通知 UI 其集合已更改和通知存储它的变量之间存在重要区别更改为不同的集合。后者不会自动发生。

# c++ - 从 istringstream 读取时出现意外行为

> ID：11125566
> 
> 赞同：0
> 
> 时间：2012-06-20T18:09:45.227
> 
> 标签：c++, string, iostream, istringstream

我对流行为有疑问，请参见以下示例。我所期待的是，因为字符串中只有 5 个字符，当我试图读取 10 个字符时，流读取会卡住。相反，输出是“hellooooo”......最后一个字符被重复。我的问题有两个方面：首先，为什么？第二，无论如何让流表现得好像不再重复最后一个字符？

```
#include <sstream>
#include <iostream>
using namespace std;

int main(void) {
    char c;
    string msg("hello");
    istringstream iss(msg);
    unsigned int i = 0;
    while (i < 10) {
        iss >> c;
        cout << c;
        i++;
    }
    cout << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:17:24.177

您看到的是从处于错误状态的流中读取的结果。当您读取流中的最后一个元素（这是一个字符串流）时，该流变得错误，并且任何其他从中读取的尝试都将失败（并且保持提取变量不变）。

在进一步阅读之前，您必须检查提取操作是否成功：

```
if (iss >> c) {
  // succeess
} else {
  // failed to extract, handle error
} 
```

如果您使用连接到控制台的流（例如），您的呼叫`>>`会如您预期的那样被阻止。的行为`stringstream`不同（你不能指望奇迹般地包含更多数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:18:30.817

原因是当您读取到流的末尾时，之后的所有读取尝试都会失败，最后一个值会被读取到您的`c`.

如果您想阅读*最多*10 个字符：

```
while (i < 10 && is >> c) {
    cout << c;
    i++;
} 
```

这是有效的，因为流可以转换为`bool`，并且`true`如果流处于“良好”状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:21:09.990

***“最后一个字符重复”***
当`iss >> c`失败时，`c`保持不变。

通过直接评估这个表达式来检查值的提取是否成功: `if (iss >> c)`，但**不要**考虑调用`iss.good()`. 检查[这个答案](https://stackoverflow.com/a/8242142/1168156)并看看：
[那个时髦的 while (std::cin >> foo) 语法是如何工作的？](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.4)
[为什么我的输入似乎处理超过文件末尾？](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.5)

# php - 将时间戳转换为多个时区

> ID：11125568
> 
> 赞同：0
> 
> 时间：2012-06-20T18:09:50.853
> 
> 标签：php, datetime

> **可能重复：**
> [php中的时区转换](https://stackoverflow.com/questions/2505681/timezone-conversion-in-php)

这是我想做的一个简单的例子。

我有一个`$time`包含时间戳的变量。

现在，我想将其转换为不同时区的时间戳

有没有办法在不`date_default_timezone_set()`多次使用该功能的情况下做到这一点？

我知道我的观点可能看起来令人困惑且意义不大，因此请在评论中澄清任何疑问。

例如，如果我有 100 次调用来更改它：-

1.  它影响我的其他功能
2.  函数名称暗示其默认值
3.  它减慢了脚本的速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:16:20.047

您可以使用[DateTime](http://www.php.net/datetime)对象并使用[SetTimezone()](http://www.php.net/manual/en/datetime.settimezone.php)方法根据需要设置时区。

例如，以下代码：-

```
$datetime = new DateTime();
var_dump($datetime->getTimezone()->getName());
var_dump($datetime->format(DateTime::ISO8601));
$datetime->setTimezone(new DateTimeZone('UTC'));
var_dump($datetime->format(DateTime::ISO8601));
$datetime->setTimezone(new DateTimeZone('America/New_York'));
var_dump($datetime->format(DateTime::ISO8601)); 
```

给了我以下输出：-

```
string 'Europe/London' (length=13)
string '2012-06-20T20:33:29+0100' (length=24)
string '2012-06-20T19:33:29+0000' (length=24)
string '2012-06-20T15:33:29-0400' (length=24) 
```

我的开发服务器默认 TZ 是欧洲/伦敦，因此您可能会得到略有不同的结果。

这里有一个[支持的时区](http://www.php.net/manual/en/timezones.php)列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:13:46.853

给你一个我为在不同时区创建日期所做的事情的样本。这是我所做的

```
function create_date($format, $time, $offset = -6)
{   
    return gmdate($format, $time + (3600 * $offset));
} 
```

如果您想将其保留为时间戳格式，只需将其修改为如下所示。

```
function create_date($time, $offset = -6)
{   
    return $time + (3600 * $offset);
} 
```

**更新：**

如果您需要以文本形式输入时区，我将使用[PHP Timezone List](https://stackoverflow.com/questions/4755704/php-timezone-list)问题中的列表，然后在函数中对该数组进行简单查找以获取偏移量以使其工作。

**注意：**

要使其正常工作，原始时间必须是 GMT 时间

# javascript - HTML 表格和 JavaScript

> ID：11125570
> 
> 赞同：1
> 
> 时间：2012-06-20T18:09:56.270
> 
> 标签：javascript, html, css

是否可以使用 JavaScript 删除表中的数据并用新数据替换它？例如，您在表格中有文本，在该文本下方有一个显示“参加测验”的按钮，单击该按钮后，文本消失并出现测验。然后，在完成测验并单击提交按钮后，测验就会消失，并且会出现一条感谢消息。我正在尝试找出一种让用户保持在同一页面上的方法。我附上了一个截图，希望能帮助解释我在说什么。

![测验](../Images/3eea17ecbe9649b25ee5a4c596028b02.png)

```
<table width="1280" height="1024" border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
      <td colspan="3">
        <img src="images/asdfasd.gif" width="1280" height="239" alt=""></td>
      </tr>
    <tr>
      <td rowspan="2">
        <img src="images/asdf02.gif" width="110" height="785" alt=""></td>
      <td><div id="vsp_copy"><table width="1045" border="0">
  <tr>
    <td height="543" ><h2>VIDEO: THE REAL COST </h2>
    <iframe width="600" height="360" src="http://www.youtube.comdfas?rel=0" frameborder="0" allowfullscreen></iframe></td>
    <td><h2>sdfasdf</h2>
      <h2>asdfa</h2>
      <h2>asdf</h2>
      <p>asdf </p>
      <p>asdf</p>
      <p>asdf </p>
      <p>asdf</p>
      <p>adfsdf</p>
      <p><img src="images/asdfas.gif" width="357" height="37"></p></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:16:46.197

是的，可以这样做。一个简单的例子：

```
<div id="welcome">Welcome to quiz <button id="begin">Start</button></div>
<div id="quiz">
   Question1:.... <br/>
   Question2:.... <br/>
   <button id="submit">Submit</button>
</div>
<div id="thanks">Thank you for taking the quiz</div> 
```

你的 CSS 看起来像：

```
#quiz, #thanks { display: none; } 
```

你的jQuery：

```
$("#begin").click(function(){
    $("#quiz").show();
    $("#welcome").hide();    
});
$("#submit").click(function(){
    $("#thanks").show();
    $("#quiz").hide();    
}); 
```

这只是一个简单的例子，但我在这里试图传达的是如何操纵 DOM 以获得所需的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:16:13.317

您所说的是 Javascript 的最大方面之一，所以是的，这是可能的。

Javascript 使得操作 DOM 元素及其样式成为可能，例如，如果你想隐藏一个元素，你只需要：

```
document.getElementById(id).style.display = 'none'; 
```

想学习 Javascript？[从这里开始](https://developer.mozilla.org/en/JavaScript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:17:14.970

jQuery 使用类似的方法使这变得简单`replaceWith()`，但绝对不需要 jQuery。

这是经典的 DOM 操作。[这是一个示例](http://jsfiddle.net/taylorbuley/FN6Fg/)`after`，其中将 div div中的文本“之前”替换为`results`。

```
var node = document.createTextNode( 'After' ) //create a new text node 
var el = document.getElementById( 'result' ) //get existing element
el.innerHTML = ''; //clear inner contents
el.appendChild( node ) //append new text node 
​ 
```

# php - 如何在 Yii 创建页面中获取最后一个插入 id

> ID：11125572
> 
> 赞同：1
> 
> 时间：2012-06-20T18:10:03.040
> 
> 标签：php, yii

我有一个名为的模型`Invoice`。我已经做了必要的模型`CRUD for Invoice model`。`attributes`发票模型就像这样`Invoice Title, Invoice No, Invoice Issue Date, Description`。现在我希望这样，`when a user will redirect to invoice create page,the input field for Invoice No should be automatically filled in the create page with last inserted id +1 and it should have prefix like INV:.So the input field for Invoice No should be like this INV:12.`用户不需要按递增顺序手动填写发票。这是创建页面的图像.![在此处输入图像描述](../Images/e5c5a56c83e3131fa3e1955368fb1d81.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:39:30.090

首先==>`This is not a good idea to store Invoice number dependent on table's unique id`

所以你应该用文本插入最后一个发票号码的号码部分+1..

现在首先获取最后一个发票模型，然后找到其发票编号并填充该字段..

在控制器..

```
$model = new Invoice;

$last_invoice = Invoice::model()->find(array('order'=>'id DESC'));
$last_invoice_number = str_replace("INV:", "", $last_invoice->invoice_mumber);
$new_invoice_number = $last_invoice_number+1;

$model->invoice_number = "INV:".$new_invoice_number;

$this->render('create',array('model'=>$model)); 
```

**编辑：**

`Yii::app()->db->lastInsertId)`无法使用的原因..

首先，正如我首先所说的那样，它对来自表的唯一 ID 的依赖发票 ID 不利。第二，如果有人在其间的其他表中插入了一些东西怎么办..第三，如果数据库连接关闭并在两者之间启动怎么办..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:36:22.750

只是一个建议：

如果用户不需要填写发票号码，那么为什么不直接从显示中跳过它。我的意思是在创建时不要显示它。提交表单后，您可以在发票编号旁边显示所有提交的值。

提交表单后，您可以简单地通过 $model -> id 显示发票编号；其中 id 是数据库中的发票编号。

您可以使用发票编号作为数据库中的主要自动增量 bigint 值。然后在显示时使用 INV: 前缀。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T13:17:05.897

这是在 Yii 中获取最后插入 id 的简单方法。

```
 Yii::app()->db->getLastInsertId(); 
```

# .net - Unity.AutoRegistration - 仅注册具有相同名称的接口和类型

> ID：11125574
> 
> 赞同：1
> 
> 时间：2012-06-20T18:10:05.723
> 
> 标签：.net, unity-container, auto-registration

[当类型名称与接口名称匹配时， Unity.AutoRegistration](http://autoregistration.codeplex.com/)可以正常工作，例如，`TClass`和`ITClass`. 我希望接口名称不带前缀“T”，喜欢`IClass`并需要它`IClass`来匹配`TClass`。

但是当我重命名接口时，自动注册失败。我必须匹配类型/接口名称，还是有办法满足我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:12:28.760

与作者协商后，这里是所需的代码：

```
UContainer
    .ConfigureAutoRegistration()
    .LoadAssemblyFrom(Assembly.GetEntryAssembly().Location)
    .ExcludeSystemAssemblies()
    .Include(If.ImplementsITypeName, Then.Register())
    .Include(
        type => type.GetInterfaces().Any(i => i.Name.StartsWith("I") && i.Name.Substring(1) == type.Name.Substring(1)), Then.Register())
    .Include(If.ImplementsSingleInterface, Then.Register())
    .ApplyAutoRegistration(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:59:15.233

AutoRegistration 的代码已经很久没有动过了。[codeplex 上](http://tecx.codeplex.com/wikipage?title=AdvancedConfigurationEngineForUnity)的TecX 项目包含一个增强的 Unity 配置引擎，该引擎最初是 StructureMap 配置的一个端口。该引擎还支持注册约定。

默认约定之一将类注册`MyService`为接口的实现`IMyService`。它看起来就这么简单：

```
public class ImplementsIInterfaceNameConvention : IRegistrationConvention
{
  public void Process(Type type, ConfigurationBuilder builder)
  {
    if (!type.IsConcrete())
    {
      return;
    }
    Type pluginType = FindPluginType(type);
    if (pluginType != null && 
        Constructor.HasConstructors(type))
    {
      builder.For(pluginType).Add(type).Named(type.FullName);
    }
  }
  private static Type FindPluginType(Type concreteType)
  {
    string interfaceName = "I" + concreteType.Name;
    Type[] interfaces = concreteType.GetInterfaces();
    return Array.Find(interfaces, t => t.Name == interfaceName);
  }
} 
```

如果您需要一些自定义命名约定，那么修改上面的示例将非常容易。使用该约定来配置您的容器将如下所示：

```
var builder = new ConfigurationBuilder();
builder.Scan(s => 
          {
            s.AssembliesFromApplicationBaseDirectory();
            s.With(new MyCustomConvention());
          });
var container = new UnityContainer();
container.AddExtension(builder); 
```

# vb.net - Vb.net AddHandler MouseHover

> ID：11125578
> 
> 赞同：0
> 
> 时间：2012-06-20T18:10:20.870
> 
> 标签：vb.net, winforms, addhandler

我的代码：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim top As Integer = 0
        For i = 0 To 10
            Dim inLine As Integer = 8
            Dim left As Integer = 0
            For x = 0 To inLine
                Dim s As New Panel
                s.BackColor = Color.Black
                s.Width = 10
                s.Height = 10
                s.Left = left
                s.Top = top
                left = left + 20
                AddHandler s.MouseHover, AddressOf Panel1_MouseHover
                Me.Controls.Add(s)
            Next
            top = top + 20
        Next

    End Sub

        Private Sub Panel1_MouseHover(ByVal sender As Object, ByVal e As System.EventArgs)
   /////---- Some code!! :/ 
        End Sub 
```

我的代码将面板添加到我的 from 中，
我希望当鼠标悬停在面板上时面板更改背景颜色。

如果有人不明白：
当我的鼠标悬停在我添加到表单中的面板时，我如何更改面板的背景颜色？

```
Private Sub Panel1_MouseHover(ByVal sender As Object, ByVal e As System.EventArgs)
       /////---- Some code to change the panel color !! :/ 
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:17:28.620

我认为您缺少的部分是`sender`事件处理程序方法的参数将始终是引发事件的任何控件。不过，在使用它之前，我会将其转换为正确的类型，以便您充分利用智能感知和编译器类型检查的优势。

```
Private Sub Panel1_MouseHover(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim panel As Panel = CType(sender, Panel)
    panel.BackColor = Color.White
End Sub 
```

# java - 创建实体标签，但它为空

> ID：11125584
> 
> 赞同：2
> 
> 时间：2012-06-20T18:10:34.287
> 
> 标签：java, http, jersey, uri, response

在我的 Jersey Rest Service 中，我尝试创建一个实体标签：

```
String content = 12sdfs-345dsdfsdf-231yscysd;
String createdContent = create(content);
return Response.created(createdUri).entity(createdContent).build(); 
```

就像它写在球衣文档中一样。但是`createdContent`是`null`。怎么了？

完整的代码是：

```
@POST
@Consumes("application/x-www-form-urlencoded")
public Response postObject(@FormParam("number") int number) {

    ObjectDTO c = new ObjectDTO();;
    c.setNumber(number);

    String generatedId = generateID();
    c.setId(generatedId);
    c.setOwner(sec.getUserPrincipal().getName());
    return postAndGetResponse(c);
}

private Response postAndGetResponse(ObjectDTO object) {
    Response res;
    System.out.println(object);
    if(ObjectDAO.instance.getObjectDao().containsKey(object.getId())) {
        res = Response.serverError().status(409).build();
    } else {
        System.out.println(object);
        System.out.println(object.getId());
        String createdContent = create(object.getId());
        System.out.println(createdContent);
        res = Response.created(uriInfo.getAbsolutePath()).entity(createdContent).build();
        ObjectDAO.instance.getObjectDao().put(object.getId(), object);
    }
    return res;
} 
```

编辑：

[http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e188](http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e188)

第 2.5 章

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:50:31.827

要创建实体标签，只需调用`new EntityTag(string)`. 但是你想在上面的代码中实现什么？实体标签应附加到标题，而不是正文。

# xcode - Xcode sigabrt（很多关于这个没有答案的问题）

> ID：11125585
> 
> 赞同：1
> 
> 时间：2012-06-20T18:10:34.467
> 
> 标签：xcode, calculator, sigabrt

所以有很多这样的线程，但没有答案对我有用。所以，我正在使用 Xcode 4.2 和启用情节提要的单视图应用程序。它给了我 sigabrt 错误！

我正在制作一种叫做 Cool calc 的计算器。

[访问http://pastebin.com/awmizYJQ](http://pastebin.com/awmizYJQ)获取我的.H和 .M 信息

**在我的输出中它说**

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Aug  8 20:32:45 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".Attaching to process 1185.
2012-06-20 14:11:37.556 storyboardcoolcalc[1185:f803] Applications are expected to have a root view controller at the end of application launch 
```

编辑：我忘了添加最重要的信息..... sigabart 信息可在 imgur.com/yzCSS

# ssl - Heroku SSL 端点的问题

> ID：11125587
> 
> 赞同：5
> 
> 时间：2012-06-20T18:10:45.563
> 
> 标签：ssl, heroku, openssl

我正在尝试向 Heroku 添加 SSL 证书。该证书是从 Network Solutions 购买的。我完成了所有步骤并创建了一个 .csr 文件，将该文件上传到 NetworkSolutions，下载了他们的 .crt 文件包（MYSITE.crt、AddTrustExternalCARoot.crt、NetworkSolutionsDVServerCA.crt），然后结合了站点证书和中间证书(AddTrustExternalCARoot.crt) 捆绑包。当我尝试将我生成的 final.crt 文件添加到 Heroku 时，我得到：

```
!    Expires at can't be blank
!    Pem is invalid 
```

使用预览，我可以清楚地看到设置了“之后无效”，所以我不太确定这里发生了什么。

对于它的价值，我还尝试将 NetworkSolutionsDVServerCA.crt 与 MYSITE.CRT 结合起来，并将所有 3 结合起来。所有这些都没有运气。

这种事情不是我的强项（我相信你可以说出来），所以我很可能错过了一些东西，但如果你对它可能是什么有任何想法，我会很感激。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T12:03:05.023

我今天遇到了同样的问题。

以下是我修复它所遵循的步骤。

1.  按以下顺序（从站点证书到根证书）将证书文件组合到 .crt 或 .pem 文件中。让我们假设您命名它`Mysite_combined.crt`。

    MySite.crt、NetworkSolutionsDVServerCA.crt、AddTrustExternalCARoot.crt

2.  打开 Mysite_combined.crt 文件的内容将如下所示

    ```
    -----BEGIN CERTIFICATE-----
    ..
    -----END CERTIFICATE----------BEGIN CERTIFICATE-----
    ..
    -----END CERTIFICATE----------BEGIN CERTIFICATE----- 
    ```

现在，在每个证书之间插入换行符。确保编辑后的文件中没有空格或空行。内容现在应该看起来像

```
-----BEGIN CERTIFICATE-----
..
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
..
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE----- 
```

1.  现在使用命令将证书添加到 Heroku

    heroku 证书：添加 Mysite_combined.crt Mysite.key

**注意：**由于网络解决方案证书没有密码，您可以忽略在heroku站点中删除密码的步骤。如果您使用具有密码的密钥，请参阅[这篇文章](http://blog.matthodan.com/how-to-setup-heroku-hostname-ssl-with-godaddy)，其中详细介绍了如何为 heroku 设置 SSL。无论如何，您都应该执行上述步骤 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:12:16.223

很可能他们在将您的证书与中间证书放在一起时出错了。您应该查看是否没有缺少换行符或可能导致错误的额外换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:56:13.617

我也遇到了这个问题，就我而言，它原来是参数的顺序。显然 heroku 实用程序希望 .crt 文件位于 .key 文件之前。

换句话说：`heroku certs:add server.crt server.key`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:16:11.583

当我收到此错误时，我必须在我的 site.crt 末尾添加一个换行符，然后再运行此命令：

```
$ cat site.crt ca_bundle.pem > final.crt 
```

# javascript - 将变量从 Javascript webmethod 调用传递给成功函数

> ID：11125588
> 
> 赞同：-1
> 
> 时间：2012-06-20T18:10:49.417
> 
> 标签：javascript, asp.net, webmethod

我有一个按钮单击，我必须调用一个 webmethod，并且在方法成功时，我需要将参数“this”传递给函数。

```
 $(".login").click(function () {
     var parent = $(this).parent().parent();
     var id = $(parent).find(".selectbtn").attr("id");
     PageMethods.validateLogin(id, onSuccess, null);
 });

 function onSuccess(result) {
     if (result) {
         //here i need to delete the parent div, that is  var parent = $(this).parent().parent();
     }
 } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:14:57.150

您可以内联您的函数，以便它可以访问局部变量：

```
$(".login").click(function() {
    var parent = $(this).parent().parent();
    var id = $(parent).find(".selectbtn").attr("id");

    PageMethods.validateLogin(id, function (result) {
        if (result) {
            // just use parent here
        }
    }, null);
}); 
```

或者，您可以传递`parent`给您的`onSuccess`函数：

```
$(".login").click(function() {
    var parent = $(this).parent().parent();
    var id = $(parent).find(".selectbtn").attr("id");

    PageMethods.validateLogin(id, function(result) {
        onSuccess(result, parent);
    }, null);
});

function onSuccess(result, parent) {
    if (result) {
        // just use parent here
    }
} 
```

# jenkins - 在构建后脚本中获取构建状态

> ID：11125598
> 
> 赞同：16
> 
> 时间：2012-06-20T18:11:36.730
> 
> 标签：jenkins, jenkins-plugins

我想要一个构建后的钩子或类似的东西，这样我就可以有与例如 IRC 插件相同的输出，但是把它交给一个脚本。我能够获得所有信息，除了实际的构建状态。这只是不起作用，也不是“构建后脚本”、“构建后任务”、“参数化触发器”。

有一些非常丑陋的解决方法是可能的，但我想问一下，以防有人有更好的选择......没有编写我自己的插件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T15:31:34.123

它与 Groovy Post-Build Plugin 中提到的一样工作，但在执行的字符串中没有任何额外的引用。所以我不得不将实际功能放入一个 shell 脚本中，该脚本调用 curl，这反过来也需要引用 POST 参数。

```
def result = manager.build.result
def build_number = manager.build.number
def env = manager.build.getEnvironment(manager.listener)
def build_url = env['BUILD_URL']
def build_branch = env['SVN_BRANCH']
def short_branch = ( build_branch =~ /branches\//).replaceFirst("")
def host = env['NODE_NAME']
def svn_rev = env['SVN_REVISION']
def job_name = manager.build.project.getName()

"/usr/local/bin/skypeStagingNotify.sh Deployed ${short_branch} on ${host} - ${result} - ${build_url}".execute() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T21:36:09.880

[通过Groovy Post-Build 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)在后期构建步骤中使用 Groovy 脚本。然后，您可以通过[Jenkins Java API](http://javadoc.jenkins-ci.org/)访问 Jenkins 内部。该插件为脚本提供了变量*管理器*，可用于访问 API 的重要部分（请参阅插件文档中的*使用部分）。*

例如，您可以在 Windows 上执行一个简单的外部 Python 脚本并将其结果（以及构建结果）输出到构建控制台：

```
def command =  """cmd /c python -c "for i in range(1,5): print i" """
manager.listener.logger.println command.execute().text

def result = manager.build.result
manager.listener.logger.println "And the result is: ${result}" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-19T00:43:15.597

为此，我真的很喜欢[Conditional Build Step](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)插件。它非常灵活，您可以根据构建失败或成功选择要采取的操作。例如，这是我使用条件构建步骤发送构建失败通知的情况：

[![在此处输入图像描述](../Images/a162681619a045d0913f8bb5b114114b.png)](https://i.stack.imgur.com/pXlcy.png)

您还可以使用条件构建步骤来设置环境变量或写入您在后续“执行 shell”步骤中使用的日志文件。因此，例如，您可以创建一个包含三个步骤的构建：一个步骤编译代码/运行测试，另一个设置`STATUS="failed"`环境变量，然后第三个步骤发送电子邮件`The build finished with a status: ${STATUS}`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-04T14:07:14.463

非常简单的解决方案，也许不优雅，但它有效！

1：捕获所有你想捕获的构建结果（在本例中为 SUCCESS）。

2：注入一个以作业状态为值的环境变量

[![第1步](../Images/a23e1e765f1e9b6c2a0806f52a7e44c3.png)](https://i.stack.imgur.com/a7wTR.png)

3：对任何其他状态做同样的事情（在这种情况下，我从中止到不稳定）

[![在此处输入图像描述](../Images/237851a6ec6e365f65d4808e2ae42099.png)](https://i.stack.imgur.com/sAjiH.png)

4：在您可以将值用于您想做的任何事情之后.. 在这种情况下，我将它传递给 ANT 脚本！（或者您可以直接从 ANT 加载它作为环境变量...）

[![在此处输入图像描述](../Images/93baa77ded659efe999a7d2a289abe10.png)](https://i.stack.imgur.com/Mndjj.png)

希望它可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-10T11:47:44.810

## Groovy 脚本解决方案：-

在这里，我使用[groovy 脚本插件](https://wiki.jenkins.io/display/JENKINS/Groovy+plugin)来获取构建状态并将其设置为环境变量，因此可以使用构建[后任务插件](https://wiki.jenkins.io/display/JENKINS/Post+build+task)在构建后脚本中使用环境变量。

Groovy 脚本：-

```
import hudson.EnvVars
import hudson.model.Environment

def build = Thread.currentThread().executable
def result = manager.build.result.toString()  
def vars = [BUILD_STATUS: result]

build.environments.add(0, Environment.create(new EnvVars(vars))) 
```

后记：-

```
echo BUILD_STATUS="${BUILD_STATUS}" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T10:27:54.283

尝试[构建后任务](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task)插件...

它允许您根据日志输出指定条件...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-25T11:21:00.913

基本解决方案（请不要笑）

```
#!/bin/bash
STATUS='Not set'
if [ ! -z $UPSTREAM_BUILD_DIR ];then
  ISFAIL=$(ls -l /var/lib/jenkins/jobs/$UPSTREAM_BUILD_DIR/builds | grep "lastFailedBuild\|lastUnsuccessfulBuild" | grep $UPSTREAM_BUILD_NR)
  ISSUCCESS=$(ls -l /var/lib/jenkins/jobs/$UPSTREAM_BUILD_DIR/builds | grep "lastSuccessfulBuild\|lastStableBuild" | grep $UPSTREAM_BUILD_NR)
  if [ ! -z "$ISFAIL" ];then
     echo $ISFAIL
     STATUS='FAIL'
  elif [ ! -z "$ISSUCCESS" ]
  then
     STATUS='SUCCESS'
  fi
fi
echo $STATUS 
```

在哪里

$UPSTREAM_BUILD_DIR=$JOB_NAME

$UPSTREAM_BUILD_NR=$BUILD_NUMBER

从上游构建传递

当然“/var/lib/jenkins/jobs/”取决于你的詹金斯安装

# html - 谁能帮助弄清楚为什么我的 HTML 电子邮件在 IE/Chrome 中看起来不同？

> ID：11125601
> 
> 赞同：0
> 
> 时间：2012-06-20T18:11:47.077
> 
> 标签：html, css, email

我一直在设计一个 HTML 电子邮件模板，并且有一些我无法解决的错误。这是我的页面：

1.  当我在 IE 中查看页面时，最右边的列有一个非常大的右边距，我似乎无法摆脱。我试过设置margin-right：0px。

2.  在 Chrome 中查看时，FB 徽章不会完全停留在右下角。相反，它略微漂浮在上方。CSS 浮动不是 HTML 电子邮件中的选项。

有任何想法吗？我将不胜感激任何帮助。

一些注意事项：是的 - 嵌套表。对于那些不知道的人，为了确保不删除 html/css 格式，表格是 HTML 电子邮件的必需品。我最初使用纯 CSS 进行编码，但无济于事（不会在主要客户端上呈现）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:16:24.603

1.  您已将`td`宽度设置为 100px ..
2.  创建一个新列并将 td 设置为`valign="bottom"`and`align="right"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:18:01.130

关于您的 IE 问题，您的网页没有 DOCTYPE。结果，怪癖模式被激活。在 quirks 模式下，页面呈现方式不同。要禁用 quirks 模式，请在网页顶部添加 DOCTYPE：

```
<!doctype html> 
```

# salesforce - 在 APEX 沙盒中创建 PaymentConnect 处理器连接

> ID：11125605
> 
> 赞同：0
> 
> 时间：2012-06-20T18:12:15.490
> 
> 标签：salesforce, sandbox, apex-code, soql

现在，我正在为使用 Payconnect 和 PayPal 的捐赠系统编写控制器。

出于测试目的，我想使用“new pymt__Processor_Connection_c *”创建一个示例支付处理器连接对象。但是，我无法更新连接，因为*缺少必需的 PaymentConnect 设置字段 (pymt _PaymentConnect_Setup__c)。

我尝试在 PaymentConnect SalesForce 选项卡中创建新的 PaymentConnect 设置记录和新的 PayPal 处理器连接，但我的 SOQL 查询似乎找不到它。我怀疑这可能是因为我正在使用沙盒帐户进行编程。如果是这种情况，那么如何在我的测试处理器连接中正确设置 pymt__PaymentConnect_Setup__c 字段？

我的查询是：

```
pymt__Processor_Connection__c connection = [SELECT Id,
   pymt__Test_Mode__c, pymt__Enabled_Card_Types__c
   FROM pymt__Processor_Connection__c
   WHERE pymt__Processor_Id__c = 'PayPal']; 
```

我还是 APEX 和 StackOverflow 的新手，所以请感觉树来要求任何澄清或我的代码的其他部分。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:07:04.167

我不太了解 PaymentConnect 数据模型，但听起来好像为了创建您的测试条件，您需要创建一个链接到相关父 PaymentConnect 设置记录的处理器连接。您在这里有两个选择：

1.  推荐：提高您对 PaymentConnect 数据模型的理解，以便您可以在执行单元测试之前设置所有适当的测试数据。这需要同时创建 PaymentConnect 设置记录和我怀疑的连接。
2.  不太理想：通过 UI 在 Sandbox 中创建所有适当的配置数据。在您的单元测试中，为了实际查看该数据（我怀疑这是您遇到的 SOQL 问题），您需要添加注释以查看生产数据：

    ```
    @isTest (seeAllData = true) 
    ```

在 Salesforce.com API 的第 24 版中，生产数据默认与单元测试[隔离：在单元测试中将测试数据与组织数据隔离](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_data_access.htm)。我猜您的单元测试无法看到您在沙盒中创建的任何内容，因为您使用的是 API 的 v.24 或更高版本。

但是，再一次，始终是一个更强大的测试，您自己创建所有配置数据和测试条件。

希望这可以帮助。

# iphone - 分组 tableView 中的 UITableViewSeparator

> ID：11125607
> 
> 赞同：1
> 
> 时间：2012-06-20T18:12:21.010
> 
> 标签：iphone, uitableview

在 IB 中，

样式：分组，单线蚀刻，白色。我的视图的背景是清晰的颜色。

在这个 ViewController 的 viewDidLoad 中，我创建了一个虚拟背景视图：

```
UIView *tableBgView = [[UIView alloc] initWithFrame:self.tableView.frame];
tableBgView.backgroundColor = [UIColor clearColor];
self.tableView.backgroundView = tableBgView;
[tableBgView release]; 
```

在 cellForRowAtIndexPath 我有：

```
 UIView *bgView = [[UIView alloc] initWithFrame:cell.bounds];
    bgView.backgroundColor = [UIColor clearColor];
    cell.backgroundView = bgView;
    [bgView release]; 
```

我想要做的是使用矩形背景而不是圆角矩形来查找分组表，并且因为在我的 cellForRowAtIndexPath 中我创建了一个 clearColor backgroundView 来摆脱圆角矩形外观，所以我不再有分隔符了。我是否只需在此 bgView 底部添加另一个单像素 UIView 行来获取我的分隔符？或者，还有更好的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:50:51.803

给你，这是我的`drawRect:`，这将删除圆形单元格。如您所见，这也用于分组表视图控制器中。

这是一个示例图像：

![示例图像](../Images/a80db0a1db14c5771371a96177f9ae51.png)

`- (void) drawRect:(CGRect)rect { CGContextRef context = UIGraphicsGetCurrentContext();`

 ````
// A left and right margin
float margin = 10.0f;

// Copy the rect and modify it's values to match the margin
CGRect _rect = rect;
_rect.size.width = _rect.size.width - (margin * 2);
_rect.origin.x = margin;

// Fill with a background color, in this case, white.
[[UIColor whiteColor] set];
CGContextFillRect(context, _rect);

// Set a line color
[[UIColor grayColor] set];

// Shift the move point to match our margin
CGContextMoveToPoint(context, margin, _rect.size.height);

// Draw the line with the same width as the cell PLUS the margin (because we shifted it).
CGContextAddLineToPoint(context, _rect.size.width + margin, _rect.size.height);

// Finish
CGContextStrokePath(context); 
```` 

`}`

# c# - 显示无/删除 asp.net 代码后面的样式不起作用

> ID：11125609
> 
> 赞同：12
> 
> 时间：2012-06-20T18:12:32.193
> 
> 标签：c#, css, asp.net

我在我的页面上有一个按钮，在我这样做的代码后面：

`btnSaveLineItems.Style.Add("display", "none");`

但后来我想显示那个按钮，所以我尝试了这个：

`btnSaveLineItems.Style.Clear();`

这似乎没有重新显示按钮......开头的html标记有一个“style = display：none;” 在页面的开头..即使我尝试删除它，它也会保持这种风格？

当我的页面第一次启动时，我有这个：

`btnSaveLineItems.Style["display"] = "none";`

这在 HTML 中呈现如下：

`<input type="submit" name="ctl00$MainContent$btnSaveLineItems" value="Save" id="MainContent_btnSaveLineItems" title="Save changes?" style="border-color:#4B6C9E;border-style:Solid;display:none;" />`

然后发生一个事件（下拉框的选定索引更改事件），然后我执行以下操作：

`btnSaveLineItems.Style["display"] = "";`

我也试过：

`btnSaveLineItems.Style["display"] = "block";`

并且都呈现相同的 HTML：

`<input type="submit" name="ctl00$MainContent$btnSaveLineItems" value="Save" id="MainContent_btnSaveLineItems" title="Save changes?" style="border-color:#4B6C9E;border-style:Solid;display:none;" />`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T18:15:06.530

您可以通过以下方式删除该样式：

```
 btnSaveLineItems.Style["display"] = ""; 
```

或者

```
btnSaveLineItems.Style.Remove("display"); 
```

**编辑**：

> 那对我也不起作用...我想知道是不是因为下拉列表框位于更新面板内，而此按钮位于更新面板之外？

是的，默认情况下，您只能`UpdatePanel`在异步回发中更新当前的内容。最简单的方法是将您的 Button 放在另一个中`UpdatePanel`并添加`DropDownList`as `AsyncPostBackTrigger`：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true" OnSelectedIndexChanged="DdlChanged">
        <asp:ListItem Text="Item 1" Value="1"></asp:ListItem>
        <asp:ListItem Text="Item 2" Value="2"></asp:ListItem>
    </asp:DropDownList>
     </ContentTemplate>
    </asp:UpdatePanel>

     <asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <ContentTemplate>
        <asp:Button ID="btnSaveLineItems" Text="click me" runat="server" />
     </ContentTemplate>
     <Triggers>
        <asp:AsyncPostBackTrigger ControlID="DropDownList1" />
     </Triggers>
    </asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-21T06:44:11.823

这有效：

```
gv.Style.Add(HtmlTextWriterStyle.Top, "-44px"); 
```

添加样式

和

```
gv.Style.Remove("top"); 
```

删除样式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:22:30.453

```
btnSaveLineItems.Style["display"] = "block"; 
```

# asp.net-mvc-3 - 如何动态创建局部视图

> ID：11125611
> 
> 赞同：0
> 
> 时间：2012-06-20T18:12:35.760
> 
> 标签：asp.net-mvc-3, partial-views

我的数据库中有一个名为 Programs 的表。我想为每个程序显示一个选项卡。我正在尝试创建一个局部视图来执行此操作，然后我想将局部视图包含到需要具有这些选项卡的每个视图中。我的部分视图如下所示。

```
<div id="tabs">

    <ul>
        <li id="HomeTab">@Html.ActionLink("Dashboard", "Index", "Home")</li>
        <li id="Program1Tab">@Html.ActionLink("Program1", "Index", "Program")</li>
        <li id="Program2Tab">@Html.ActionLink("Program2", "Index", "Program")</li>
    </ul>
</div> 
```

我希望使用类似的东西动态创建标签

```
 @foreach (var ptype in Model)
    {
       <li id=\"@ptype.Name\"Tab>@Html.ActionLink(ptype.Name, "Index", "Project")</li>
    } 
```

但是我想知道如何在不使用控制器的情况下加载选项卡。我可以使用辅助类/方法绕过控制器直接访问模型吗？

更新：我也尝试创建一个辅助方法

```
namespace MyProject.Helpers
{
    public class ProgramTypes
    {
        public static List<ProgramType> ProgramTypesList()
        {
            MyDbContext db = new myDbContext();
            return db.ProgramTypes.ToList<Programtype>();

        }
    }
} 
```

然后使用

```
 @foreach (var ptype in MyProject.Helpers.ProgramTypes.ProgramTypesList()) 
```

但是我不确定这是否是正确的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:33:46.437

最好的解决方案是 - 将程序集合传递给您的视图

```
@model IQueyrable<Program>
<div id="tabs">
    <ul>
    @foreach (var ptype in Model)
    {
       <li>@Html.RenderPartial("ProgramTab", ptype)</li>
    }
    </ul>
</div> 
```

所以您必须创建另一个局部视图，在其中显示程序详细信息。如果你想像标签一样组织这个，你应该使用像 jquery tabs 这样的东西

**您不必只使用 RenderPartial 或 RenderAction 的 actionlink**

# r - 生成散点图，其中点的大小根据第三个变量而变化

> ID：11125612
> 
> 赞同：0
> 
> 时间：2012-06-20T18:12:37.560
> 
> 标签：r, excel, vba

可以在 R 中为点的大小生成一个图表，以表示每年的文档数。我曾尝试使用散点图在 Excel 中生成这样的图表，但没有用。

我知道这可以使用 R 中的世界地图和地图气泡来完成，但如果它可以只使用没有世界地图的图表来完成，那将非常有用。

我在这里[StackOverFlow Post上找到了这段代码](https://stackoverflow.com/questions/10238526/r-scatter-plot-with-hexadecimal-colors)

```
year <- 1:5 
logtrans <- log(year) 
size <- rep(15,5) 
intel2 <- data.frame(HexLogClock=c("#330000", "#FFFFCC", "#660000",
                                   "#FF0000", "#00FF00"),
                     stringsAsFactors=FALSE) 
symbols(year, logtrans, circles=size, inches=0.25, bg=intel2$HexLogClock) 
```

我希望能够产生这个数字，但圆圈的大小会根据每年的值而改变。

干杯，杰斯

示例数据集（抱歉格式化）

```
Country Year 2008   Year 2009 Year 2010 Year 2011
Argentina   35  60  89  120
Austrailia  56  89  75  100
Canada            25    65  89  148
Ireland 25  65  90  200
Italy             27    75  45  100
New Zealand 56  98  36  54
Spain             78    54  100 89
United Kingdom  56  102 158 238
United States   45  99  179 250 
```

我希望能够使用上面的 TXT 文件执行此操作，我使用命令读取数据！

```
 myData3 <- read.delim(file="noofpublications_Collab2.txt", header = TRUE, sep = "\t") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:33:54.650

```
symbols(year, logtrans, circles=logtrans, inches=0.25, bg=intel2$HexLogClock) 
```

通常你会使用一个data.frame：

```
DF <- data.frame(year, logtrans, color=intel2$HexLogClock) 
```

然后调用`symbols`变为：

```
symbols(DF$year, DF$logtrans, circles=DF$logtrans, inches=0.25, bg=DF$color) 
```

这也可以在更高级的绘图库之一中完成。我的偏好是`ggplot2`

```
library(ggplot2)
ggplot(DF, aes(x=year, y=logtrans, colour=color, size=logtrans)) + geom_point()\\ 
```

* * *

根据 OP 的评论和编辑，

重新创建一部分数据：

```
dat <- structure(list(country = c("argentina", "australia", "canada", "ireland", "italy"), year08 = c(35, 56, 25, 25, 27), year09 = c(60, 89, 65, 65, 75), year10 = c(89, 75, 89, 90, 45), year11 = c(120, 100, 148, 200, 100)), .Names = c("country", "year08", "year09", "year10", "year11"), row.names = c(NA, -5L), class = "data.frame") 
```

然后我会`melt`从`reshape2`包中使用。

```
library(reshape2)
dat.melt <- melt(dat, id.var='country') 
```

然后用 ggplot 绘图：

```
ggplot(dat.melt, aes(x=variable, y=value, colour=country, size=value)) + geom_point() 
```

在`aes`我已经设置了控制我的情节不同部分的事物的名称。这些点按国家/地区着色，并按值大小。但是，如果您愿意，您可以将其全部切换。

但是，我不知道这是否是您要进行的比较！

# javascript - 两个视图相交时如何添加事件监听器？

> ID：11125618
> 
> 赞同：1
> 
> 时间：2012-06-20T18:13:13.070
> 
> 标签：javascript, titanium, titanium-mobile

我正在使用 Titanium 工作室制作音乐游戏。我想将图像视图拖放到不同的位置，并在我将图像视图放在那个位置时听到音频！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:43:14.880

您可以检查图像和点的顶部，左侧，高度，宽度值，当它们相交时，铃声:)

```
//I tought variables are defined.
if(!(img_top>spot_top+height) && !(img_top+height<spot_top) && 
   !(img_left>spot_left+width) && !(img_left+width<spot_left)
{
   //intersected action.
} 
```

# regex - 这个 (mm-dd-yyyy) 正则表达式有什么问题？

> ID：11125623
> 
> 赞同：2
> 
> 时间：2012-06-20T18:13:35.423
> 
> 标签：regex, date

我正在尝试验证 mm-dd-(2012~2099) 日期格式。

我有以下正则表达式。

```
^(0[1-9]|1[0-2])-(0[1-9]|[10-31])-(20[12-99])$ 
```

当我运行以下代码时，我得到了错误。这个正则表达式有什么问题？

```
var reg = new RegExp("^(0[1-9]|1[0-2])-(0[1-9]|[10-31])-(20[12-99])$")
reg.test("05-33-2012")** 
```

当我取出年份部分，然后测试“05-33”时，它可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:20:51.443

正如 Oli 所说，[12-99] 并没有像你认为的那样做。

具体来说，`-`指的是一系列*字符*，而不是数字。所以`[12-99]`匹配...

```
1
2-9
9 
```

该表达式`20(1[2-9]|[2-9][0-9])`适用于日期 2012-2099

# maven - maven-shade-plugin：如何关闭压缩？

> ID：11125628
> 
> 赞同：5
> 
> 时间：2012-06-20T18:13:41.257
> 
> 标签：maven, compression, maven-shade-plugin

我刚刚尝试了 Shade 插件，但生成的 jar 总是被压缩。

如何关闭 jar 压缩？

这是pom：

```
<build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.4</version>
        <configuration>
            <archive>
                <compress>false</compress>
            </archive>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>1.7</version>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>shade</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
</plugins>
</build> 
```

谢谢

法布里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T07:38:34.817

[好的，在韦恩的回答](http://mail-archives.apache.org/mod_mbox/maven-users/201206.mbox/%3CCALy+7U=C+D+7D0KJ09kTaU0Fc88-+A-r0txh3Mxz9PA-BSA4mA@mail.gmail.com%3E)的帮助下，我终于设法关闭了 jar 压缩

这个链接：[http ://maven.apache.org/plugins/maven-shade-plugin/examples/use-shader-other-impl.html](http://maven.apache.org/plugins/maven-shade-plugin/examples/use-shader-other-impl.html)

# html - 浮动到两侧的 CSS 标注错误地流动

> ID：11125636
> 
> 赞同：1
> 
> 时间：2012-06-20T18:14:41.507
> 
> 标签：html, css

我正在尝试使用 CSS 在文本块中创建标注（例如块引号或相关图片）。它必须可以使用 Javascript 进行操作并与 CMS 一起使用，因此我不能将标注嵌入到文本块的中间并使其浮动。相反，标注位于文本块的顶部，我使用特定高度的推动器 div 将其向下移动到所需位置。

当所有标注都在文本块的同一侧时，此技术非常有效。问题是当我想要在每一侧进行标注时。第一个推动器 div 将第二个推动器 div 向下推动，即使它们浮动到不同的侧面并且都具有非常小的设置宽度。

这是问题的一个例子。推动器 div（通常为 0px 厚且透明）是侧面的红色条。它们都应该从块的顶部开始，就在标题下方。如您所见（至少如果您使用 Webkite/Gecko，我还没有尝试过其他任何方法），右侧的栏从左侧的栏下方开始。

[http://keaton.ws/Files/theCalloutProblem.html](http://keaton.ws/Files/theCalloutProblem.html)

我尝试过使用 HTML 的结构（将推送器和标注从其父 div 中取出）并更改几乎所有内容的显示属性，但没有任何效果。我所做的大多数更改都会导致文本无法正确换行。我知道这是一个相当模糊的问题，但任何帮助将不胜感激。

-基顿

这是代码，内联样式：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div style="width:750px; margin:0 auto;">
            <div style="width:750px;text-align:center;"><h1>This is the header</h1></div>
            <!-- Left Callout -->
            <div>
                <div style="width:0px;float:left;height:100px;"></div>
                <div style="width:200px;float:left;clear:left;"><!-- Callout Text --></div>
            </div>
            <!-- Right Callout -->
            <div>
                <div style="width:0px;float:right;height:250px;"></div>
                <div style="width:200px;float:right;clear:right;"><!-- Callout Text --></div>
            </div>
            <div style="width:700px; margin: 0 auto;">
                <!-- Body Text -->
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:21:11.570

在这些示例中，交替的左/右浮动始终具有相同的高度。

[http://meyerweb.com/eric/css/edge/slantastic/holiday.html](http://meyerweb.com/eric/css/edge/slantastic/holiday.html) http://meyerweb.com/eric/css/edge/slantastic/demo2.html（<--为什么这个链接无法点击？） [http ://csstextwrap.com/#export](http://csstextwrap.com/#export)

看来您必须按高度/位置对浮点数进行排序才能达到预期的效果：

[http://jsfiddle.net/ge5YG/2/](http://jsfiddle.net/ge5YG/2/)

# javascript - 基本的 Javascript 问题（增值）

> ID：11125639
> 
> 赞同：0
> 
> 时间：2012-06-20T18:14:55.533
> 
> 标签：javascript, html

这是我的小提琴：

[http://jsfiddle.net/JWww3/](http://jsfiddle.net/JWww3/)

我不确定为什么这段代码不起作用。

当我单击“+1”按钮时，我想向“ajout”变量添加+1。如果 ajout = 5（点击 5 次后）...那么 alert("Hello");

为什么我做错了？

这是我的代码：

HTML：

```
<input type="button" onclick="clickit();" id="click1" value="+1"/>​ 
```

JS：

```
var ajout = 0;
function clickit()
{
 ajout +=1;    
}

if (ajout==5)
{
alert("TEST");   
} 
```

​</p>

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:21:42.573

我认为这就是你想要的：

```
var ajout = 0;
function clickit()
{
    ajout += 1;

    if (ajout==5)
    {
        alert("TEST");   
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:23:55.983

尝试这个 ：

```
var ajout = 0;
jQuery('#click1').click(function(){
    ajout += 1;    
    console.log(ajout);
    if (ajout==5)
    {
    alert("TEST");   
    }
}); 
```

这是[演示](http://jsfiddle.net/JWww3/17/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:17:47.567

我想应该是

```
ajout += 1; 
```

而你所拥有的是

```
=+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T18:18:55.570

从 jsfiddle 中选择“no wrap (body)”选项。否则`clickit`函数只有在 DOM 加载后才定义，这意味着它永远不会被执行。

还要确保将其`alert`放入`clickit`函数内部，以确保在调用该函数时执行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:24:23.993

除了其他两个所说的之外，您的评估代码应该在函数内，否则每次单击按钮时都不会调用它，我认为这就是您所追求的。

```
var ajout = 0;
function clickit()
{
 ajout++;  
 if (ajout==5)
   alert("TEST");   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T18:22:11.437

尝试这个：

```
<input type="button" onclick="clickit();" id="click1" value="+1"/>
<script>
var ajout = 0;
function clickit()
{
 ajout += 1;    
    if (ajout==5)
    {
        alert("TEST");   
    }
}

</script> 
```

​</p>

# objective-c - Objective C 使用字符串调用方法

> ID：11125640
> 
> 赞同：5
> 
> 时间：2012-06-20T18:14:56.327
> 
> 标签：objective-c, string, methods, plist

嗨，我是目标 C 的新手，想知道是否有人可以帮助我解决这个问题。我有几种不同的方法，每种方法都需要 3 个输入值，通常使用

```
[self methodA:1 height:10 speed:3] 
```

但是我想从plist中的字符串中读取方法名称，例如，如果字符串是methodB，我会得到

```
[self methodB:1 height:10 speed:3] 
```

对于“方法C”

```
[self methodC:1 height:10 speed:3] 
```

等等。

任何想法我可以如何做到这一点我尝试使用 NSSelectorFromString 将字符串定义为选择器

```
NSString *string = [plistA objectForKey:@"method"];
SEL select = NSSelectorFromString(string);
[self performSelector:select:c height:b speed:a]; 
```

然而，这没有任何帮助将不胜感激。已尝试以下解决方案，但无法在这里工作是我尝试过的。

所以只是回顾一下我有一些方法，比如

```
 spawnEnemyA:2 withHeight:3 withSpeed:4  
 spawnEnemyB:3 withHeight:2 withSpeed:5 
```

我想从 plist 文件中读取我想传递给这些方法的值以及方法类型。我的代码如下，//////////////////////////////////// /////////////////

//这些是我从 plist 中读取的值，我希望我的方法使用

```
 int a = [[enemySettings objectForKey:@"speed"] intValue];
    int b = [[enemySettings objectForKey:@"position"] intValue];
    int c = [[enemySettings objectForKey:@"delay"] intValue];

   // I Also read the method name from the plist and combine it into a single string  
    NSString *method = [enemySettings objectForKey:@"enemytype"];
    NSString *label1 = @"spawn";
    NSString *label2 = @":withHeight:withSpeed:";
    NSString *combined = [NSString stringWithFormat:@"%@%@%@",label1, method,label2];

    //Check that the string is correct get spawnEnemyA:withHeight:withSpeed:
    CCLOG(@"%@",combined);

//This is the Invocation part 
    NSInvocation * invocation = [ NSInvocation new ];

    [ invocation setSelector: NSSelectorFromString(combined)];
    [ invocation setArgument: &c atIndex: 2 ];
    [ invocation setArgument: &b atIndex: 3 ];
    [ invocation setArgument: &a atIndex: 4 ];

    [ invocation invokeWithTarget:self ];

    [invocation release ]; 
```

///////////////////////////////////////// /////////////////

代码编译没有任何错误，但没有调用方法。有任何想法吗？干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T18:21:20.680

**您不能使用`performSelector`具有 3 个（或更多）参数的方法。**
但为了您的信息，这里是如何使用它：

```
SEL m1;
SEL m2;
SEL m3;

m1 = NSSelectorFromString( @"someMethodWithoutArg" );
m2 = NSSelectorFromString( @"someMethodWithAnArg:" );
m1 = NSSelectorFromString( @"someMethodWithAnArg:andAnotherOne:" );

[ someObject performSelector: m1 ];
[ someObject performSelector: m2 withObject: anArg ];
[ someObject performSelector: m2 withObject: anArg withObject: anOtherArg ]; 
```

对于超过 2 个参数的方法，**您将不得不使用[NSInvocation](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html)类**。
查看文档以了解如何使用它。

基本上：

```
NSInvocation * invocation = [ NSInvocation new ];

[ invocation setSelector: NSStringFromSelector( @"methodWithArg1:arg2:arg3:" ) ];

// Argument 1 is at index 2, as there is self and _cmd before
[ invocation setArgument: &arg1 atIndex: 2 ];
[ invocation setArgument: &arg2 atIndex: 3 ];
[ invocation setArgument: &arg3 atIndex: 4 ];

[ invocation invokeWithTarget: targetObject ];

// If you need to get the return value
[ invocation getReturnValue: &someVar ];

[ invocation release ]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T18:32:30.110

一般来说，这种活力通常表明一种反模式。以这种方式将数据与实现相结合通常不是最佳实践。

但有时，这是必要的。如果您要走这条路，那么鉴于您的各种方法声明可能如下所示：

```
- (void)methodAWidth:(NSUInteger)w height:(NSUInteger)h speed:(NSUInteger)s;
- (void)methodBWidth:(NSUInteger)w height:(NSUInteger)h speed:(NSUInteger)s;
- (void)methodCWidth:(NSUInteger)w height:(NSUInteger)h speed:(NSUInteger)s; 
```

你可能想要这样的东西：

```
NSString *selName = [NSString stringWithFormat:@"method%@Width:height:speed:", ... one of @"A", @"B", or @"C" ....];
SEL selector = NSelectorFromString(selName); 
```

然后：

```
if (![target respondsToSelector:selector])
    return; // no can do

void (*castMsgSend)(id, SEL, NSUInteger, NSUInteger, NSUInteger) = (void*)objc_msgSend;
castMsgSend(target, selector, 1, 10, 3); 
```

每个方法调用都被编译为对`objc_msgSend()`. 通过执行上述操作，您将创建一个完全类型安全/类型检查的调用站点，该站点通过正常的 Objective-C 消息传递机制，但选择器是动态定义的。\

虽然`performSelector:`（和多参数变体）很方便，但它们不能处理非对象类型。

* * *

而且，正如 MacMade 在评论中指出的那样，请注意浮点和结构返回。它们使用编译器在正常`[foo bar]`情况下自动处理的 objc_msgSend() 的不同变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:19:43.757

您可以直接使用`objc_msgsend`：

```
NSString *methodName = [plistA objectForKey:@"method"];
objc_msgSend(self, methodName, c, b, a); 
```

请注意，选择器必须包括所有部分，例如`@"method:height:speed:"`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T18:28:39.597

您应该将以下行替换为：

```
[self performSelector:select:c height:b speed:a]; 
```

并写下：

```
[self performSelector:select withObject:[NSArray arrayWithObjects:c,b,a,nil]]; 
```

# php - 如何使用 php / ajax 在指定的 div 中附加附加数据

> ID：11125653
> 
> 赞同：2
> 
> 时间：2012-06-20T18:15:39.993
> 
> 标签：php, javascript, jquery, ajax

我想知道是否有办法在单击链接后显示外部 php 文件，然后在单击不同链接后在其下方显示另一个外部文件（而不是 INSTEAD）。这是我的代码。

**索引.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<html>  
<head>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-   1.2.6.pack.js"></script>  
<script type="text/javascript" src="core.js"></script>   
</head>  
<body>   
<div id="menu">  
<ul>  
<li id="home"><a href="#downloads">DOWNLOADS</a></li>  
<li id="tutorials"><a href="#errors">ERRORS</a></li>  
</ul>   
</div>  
<div id="content">    
</div>  
</body>  
</html> 
```

**核心.js**

```
//On load page, init the timer which check if the there are anchor changes each 300 ms
$().ready(function(){
setInterval("checkAnchor()", 100);
});
var currentAnchor = null;
//Function which chek if there are anchor changes, if there are, sends the ajax    petition
function checkAnchor(){
//Check if it has changes
if(currentAnchor != document.location.hash){
    currentAnchor = document.location.hash;
    //if there is not anchor, the loads the default section
    if(!currentAnchor)
        query = "page=1";
    else
    {
        //Creates the  string callback. This converts the url URL/#main&id=2 in URL/?section=main&id=2
        var splits = currentAnchor.substring(1).split('&');
        //Get the section
        var page = splits[0];
        delete splits[0];
        //Create the params string
        var params = splits.join('&');
        var query = "page=" + page + params;
    }
    //Send the petition
    $("#loading").show();
    $.get("callbacks.php",query, function(data){
        $("#content").html(data);
        $("#loading").hide();
    });
}
} 
```

**下载.php**

```
<b>DOWNLOADS</b> 
```

**错误.php**

```
<b>ERRORS</b> 
```

**回调.php**

```
<?php  
//used to simulate more waiting for load the content, remove on yor projects!  
sleep(1);  
//Captures the petition and load the suitable section  
switch($_GET['page']){  
case "errors": include 'errors.php'; break;
case "downloads": include 'downloads.php'; break;

default: include 'downloads.php'; break;

}  
?> 
```

这工作得很好，除了它使用一个开关，我希望能够同时看到errors.php和downloads.php，而不仅仅是一个或另一个。

**编辑**

**伪代码**使其更清晰：

如果单击下载，则仅显示 download.php。如果单击错误，则仅显示 error.php（就在 downloads.php 之后），并且不要删除 downloads.php 或任何其他可能已包含在主页上或未包含在主页上的外部文件。

有什么建议么？

ps我已经浏览了很多很多关于这个的线程，这就是为什么我不能发布我尝试过的所有代码（抱歉我也不能包含链接，上次我的问题因为这样做而被否决...> :/) 所以我可以保证我已经完成了我的作业。

pss 如果您认为这值得一票否决，请善意解释原因。我愿意接受批评，但只是不赞成根本没有帮助。

**编辑：**

**将 core.js**更新为

```
$(document).ready(function(){
$('#menu li a').click(function() {
    var currentAnchor = $(this).attr('href');
    if(!currentAnchor)
        var query = "page=1";
    else
    {
        var splits = currentAnchor.substring(1).split('&');
        //Get the section
        var page = splits[0];
        delete splits[0];
        //Create the params string
        var params = splits.join('&');
        var query = "page=" + page + params;
    }
    //Send the petition
    $("#loading").show();
    $.get("callbacks.php",query, function(data){
        $("#content").html(data);
        $("#loading").hide();
    });       
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:19:35.367

如果你想同时显示两个页面，在你的 callbacks.php 页面中你应该能够做这样的事情（我所做的只是删除 switch 语句）：

```
include 'errors.php';
include 'downloads.php'; 
```

你有什么理由不能这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:37:55.217

编辑：

[此处删除了令人困惑的部分]

--

编辑：

**core.js**（修订版）

```
//On load page, init the timer which check if the there are anchor changes each 300 ms
$(document).ready(function(){
    $('#menu li a').click(function() {
        var currentAnchor = $(this).attr('href');
        if(!currentAnchor)
            var query = "page=1";
        else
        {
            var splits = currentAnchor.substring(1).split('&');
            //Get the section
            var page = splits[0];
            delete splits[0];
            //Create the params string
            var params = splits.join('&');
            var query = "page=" + page + params;
        }
        //Send the petition
        $("#loading").show();
        $.get("callbacks.php",query, function(data){
            $("#content").html(data);
            $("#loading").hide();
        });       
        return false;
    });
}​​​);​​​ 
```

--

编辑：

这个将“**附加**”数据[来自*下载*或*错误*]到现有内容。

```
 $.get("callbacks.php",query, function(data){
            $("#content").append(data);
            $("#loading").hide();
        }); 
```

希望这可以帮助。

# iphone - MPMoviePlayerController 不工作，也没有通知

> ID：11125655
> 
> 赞同：2
> 
> 时间：2012-06-20T18:15:49.337
> 
> 标签：iphone, ios5, video, mpmovieplayercontroller

有人可以指出为什么这行不通吗？

```
NSURL  *url = [NSURL fileURLWithPath:ImageName];

MPMoviePlayerController *video = [[MPMoviePlayerController alloc]  initWithContentURL:url];
            NSLog(@"%@", ImageName);
            NSLog(@" %@", url);
            [canvas addSubview:video.view];
            video.view.frame = canvas.bounds; 

//  [video setControlStyle:MPMovieControlStyleEmbedded];
    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(myMovieCallback:)  name:MPMoviePlayerPlaybackDidFinishNotification          object:video];
    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(myMovieCallback:)  name:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey     object:video];
    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(myMovieCallback:)  name:MPMoviePlayerPlaybackStateDidChangeNotification     object:video];
    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(myMovieCallback:)  name:MPMoviePlayerLoadStateDidChangeNotification         object:video];
    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(myMovieCallback:)  name:MPMoviePlayerNowPlayingMovieDidChangeNotification   object:video];
    [video prepareToPlay]; 
```

没有任何回调触发。只要在画布所在的地方留一个空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T07:13:55.430

将`MPMoviePlayerController`引用保存在实例变量或属性中对我有用。

# drupal - Drupal 7 烦人的内容输出

> ID：11125658
> 
> 赞同：1
> 
> 时间：2012-06-20T18:15:55.587
> 
> 标签：drupal, drupal-7, drupal-theming

我尝试覆盖以下所有模板：

*   page.tpl.php
*   区域.tpl.php
*   块.tpl.php
*   节点.tpl.php

我仍然在我的内容区域的顶部有以下标记：

```
<div class="field field-name-field-content field-type-text-long field-label-above"><div class="field-label">content:&nbsp;</div><div class="field-items"><div class="field-item even"> 
```

上面的每个模板除了通常吐出 $content 的最低限度之外什么都没有。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:29:30.833

听起来你正在寻找[`field.tpl.php`](http://api.drupal.org/api/drupal/modules!field!theme!field.tpl.php/7). 它是那些模板文件之一，例如`html.tpl.php`，常见主题有时不为其提供默认实现，因此它依赖于存在于`modules/field/theme`.

# php - 在 PHP 中使用 fwrite 但输出奇怪的错误

> ID：11125659
> 
> 赞同：-3
> 
> 时间：2012-06-20T18:15:56.373
> 
> 标签：php, fopen, fwrite, fclose

我目前正在使用 fwrite，这是错误输出：

```
Parse error: syntax error, unexpected ')' in /home/blah/blahblah.com/write/submit.php on line 5 
```

代码如下：

```
$strlen  = strlen ( $_REQUEST["content"] );
$content = $_REQUEST["content"];
$title   = $_REQUEST["title"];
$fp      = fopen( "/home/blah/blahblah.com/write/texts/" . $_POST["title"] . ".txt" , a+ );
fwrite ( $fp , $content , $strlen );
fclose ( $fp ); 
```

请帮忙！我什至试图输入文本的 strlen （这是不必要的），这样它就不会期待其他任何东西了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:17:23.160

需要引用的模式：

```
$fp = fopen( "/home/blah/blahblah.com/write/texts/" . $_POST["title"] . ".txt" , "a+" ); 
```

我怀疑它目前被解释为添加。

# css - nth-child:odd/even 删除 IE9 上的 td 边框

> ID：11125660
> 
> 赞同：1
> 
> 时间：2012-06-20T18:15:57.030
> 
> 标签：css, internet-explorer-9, css-selectors

我在`nth-child(odd)`为表格着色时遇到了这个问题。

在 IE9 中，它为 TD 绘制了正确的颜色，但它们的边框不可见。关于如何解决这个问题的任何想法？

示例可以在这里找到：http: [//jsfiddle.net/tYSZW/7/](http://jsfiddle.net/tYSZW/7/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:52:56.860

惊人的。我添加了位置：相对于我的 .CSS，现在边框出现在第 n 个孩子中！在出现背景色但不出现边框之前。

```
 .variations tr:nth-child(5n) td {
   background: none repeat scroll 0 0 #bbb195;
   filter: none;
   position: relative; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:33:38.947

删除`position:relative`此声明中的 ，它将起作用。

```
tbody td{
    font-size:12px;
    position: relative;
} 
```

# python - datetime TypeError：并非所有参数都在字符串格式化期间转换

> ID：11125662
> 
> 赞同：1
> 
> 时间：2012-06-20T18:16:09.627
> 
> 标签：python, string, datetime, string-formatting, netdna-api

我确信有更简单的方法可以做到这一点，但我不确定为什么我不断收到 TypeError。

```
 import datetime
   getdate = datetime.date.today()
   thirty = datetime.timedelta(days=30)
   last_month = getdate - thirty
   print json.dumps(api.get_zone_stats(3, "daily", "%s", "%s" %(last_month, getdate))) 
```

回溯（最近一次通话最后一次）：...

**TypeError：字符串格式化期间并非所有参数都转换了**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:17:31.250

问题在这里：

```
api.get_zone_stats(3, "daily", "%s", "%s" %(last_month, getdate)) 
```

该`%`运算符仅对前一个字符串起作用：

```
"%s" %(last_month, getdate) 
```

你有一个单一的两个变量`%s`。

试试这个：

```
api.get_zone_stats(3, "daily", "{0}".format(last_month), "{0}".format(getdate)) 
```

或这个：

```
api.get_zone_stats(3, "daily", str(last_month), str(getdate)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:18:05.707

在最后一行中，您尝试使用两个值格式化一个字符串，但该字符串仅包含一个填充点：

```
print json.dumps(api.get_zone_stats(3, "daily", "%s", "%s" %(last_month, getdate))) 
```

你的意思是以下吗？

```
print json.dumps(api.get_zone_stats(3, "daily", str(last_month), str(getdata))) 
```

# xcode - 我应该在 XCode IB 中使用哪个对象？

> ID：11125669
> 
> 赞同：0
> 
> 时间：2012-06-20T18:16:21.070
> 
> 标签：xcode, cocoa, user-interface, interface-builder

我在搞乱 Xcode 和 Interface Builder。我想做一个计时器或时钟类型的应用程序。数字应该是什么类型的对象？只是一个“标签”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:21:21.357

您可以使用“标签”（这是修改后的`NSTextField`），或者您可以使用不可编辑的标签，`NSTextField`甚至可以使用`NSView`带有自定义绘图方法的标签。

如果您仍在学习，我建议您使用标签并从那里开始。

链接到您的`AppDelegate`（或您正在使用的任何对象）时，请记住在您的属性声明上创建一个`IBOutlet`，以便您可以链接您的标签，如下所示：

```
@property (nonatomic, assign) IBOutlet NSTextField *clockLabel; 
```

并使用以下方法设置时钟值`setStringValue:`：

```
[self.clockLabel setStringValue:myString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:24:23.203

如果你只想显示数字，那么**UILabel**就可以了。

而且，如果你想要一些漂亮的外观，那么我会推荐一些漂亮的图形图像作为数字。

# jquery - 选择其中一个类以某个字符串开头的元素

> ID：11125673
> 
> 赞同：2
> 
> 时间：2012-06-20T18:16:33.987
> 
> 标签：jquery, jquery-selectors

我有以下 jQuery 代码：

```
$("body.page-calendar-practices-2012-05 #content-header h1#title") 
```

效果很好。我可以使用它来更改页面中的 html。但我真的想选择正文中以“page-calendar-practices”开头的类的页面，即：它将包括其他日期不同的页面。我尝试了以下方法：

```
$("body[class^=page-calendar-practices] #content-header h1#title") 
```

它没有用。怎么了？

**编辑**- 这是 HTML：

```
<body class="not-front logged-in page-calendar two-sidebars page-calendar-practices-2012-05 section-calendar" > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:27:04.490

`[class^=page-calendar-practices]`只会选择类属性以“page-calendar-practices”开头的元素；不是其中*一个类*以“page-calendar-practices”开头的元素。

所以它*会*选择一个像这样的元素：

```
<body class="page-calendar-practices-2012-05"> 
```

* * *

您可以使用`*`选择器：

```
$('body[class*=page-calendar-practices]') 
```

但这也会选择以下内容：

```
<body class="page some-page-calendar-practices"> 
```

* * *

或者，您可以使用以下简单检查进行过滤：

```
$('body').filter(function() {
    return ~(' ' + this.className).indexOf(' page-calendar-practices');
}).find('#content-header h1#title'); 
```

这比简单的“包含”选择器更冗长，但更准确。

这是小提琴：http: [//jsfiddle.net/DR9K4/](http://jsfiddle.net/DR9K4/)

* * *

为方便起见，您可以将自己的过滤器添加到 jQuery 中，如下所示：

```
jQuery.expr[':']['class-starts']​ = function(el, i, m) {
    return ~(' ' + el.className).indexOf(' ' + m[3]);
}; 
```

然后在任何你想要的地方简单地使用它：

```
$('body:class-starts(page-calendar-practices)'); 
```

在这里查看它的实际操作：http: [//jsfiddle.net/gEJeW/](http://jsfiddle.net/gEJeW/)

* * *

**更新：**在 jQuery 1.8 中，[Sizzle 引擎被完全重写](http://blog.jquery.com/2012/07/04/the-new-sizzle/)。作为更新的一部分，表达式扩展架构也进行了重新设计，因此上述功能将不再起作用。

如果您使用的是 jQuery 1.8+，请使用以下命令：

```
$.expr[':']['class-starts'] = $.expr.createPseudo(function (arg) {
    return function (el) {
        return ~(' ' + el.className).indexOf(' ' + arg);
    };
}); 
```

这是小提琴：http: [//jsfiddle.net/gEJeW/2/](http://jsfiddle.net/gEJeW/2/)

* * *

有关更多信息，请参阅此处：[Getting the "match" object in a Custom Filter Selector in jQuery 1.8](https://stackoverflow.com/questions/11624345/getting-the-match-object-in-a-custom-filter-selector-in-jquery-1-8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:29:18.617

您的尝试是寻找以您的字符串开头的类属性，而不是该属性中以您的字符串开头的特定类名。

我认为您可能只使用属性包含逻辑：

```
$("body[class*='page-calendar-practices'] #content-header h1#title") 
```

这可以匹配不以此开头的类名，但您似乎不太可能使用这样的类名。

* * *

如果你想准确地说，我认为你不能在一个简单的选择器中做到这一点——你可能需要一些 javascript 逻辑：

```
$(document.body).filter(function() {
    return((" " + this.className).indexOf(" page-calendar-practices") != -1);
}).find("#content-header h1#title"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:28:30.250

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

`jQuery('[attribute^="value"]')`

**描述：选择具有指定属性的元素，其值恰好以给定字符串开头。**

你的不是以它开头 - 它在中途有匹配的字符串

您想使用`*`选择器：[http ://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

# dotnetnuke - 将 CSS 类添加到 DnnModule 外部 div

> ID：11125676
> 
> 赞同：2
> 
> 时间：2012-06-20T18:16:48.743
> 
> 标签：dotnetnuke, skinning

有没有办法将自定义类添加到包含通过容器将模块放置在页面上时创建的“DnnModule”类的外部 div？目前，如果我制作了一个以特定宽度向左浮动的容器，除非我使用 javascript 进入 HTML 并将我的浮动属性添加到 DnnModule 级别 div，否则无法使用该布局。

例如，如果我使用脚手架系统 (bootstrap) 并希望添加几个不同大小的容器 (span3、span6、span12)，当我将模块添加到包含这些容器的内容窗格时，布局将被忽略，因为DNN 在每个模块周围添加的外部 div。从 CSS 布局的角度来看，这是非常有限的，它迫使皮肤开发人员创建许多单独样式的皮肤，而不是具有多个容器的几个皮肤，以提供更大的灵活性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:05:04.820

在 DotNetNuke.com 论坛上找到答案：

```
<script runat="server">    
    Private Sub Page_PreRender(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.PreRender
        Try
            Dim cParent As HtmlGenericControl = CType(Me.Parent, HtmlGenericControl)
            cParent.Attributes("class") = cParent.Attributes("class") + " span6"
        Catch ex As Exception
        End Try
    End Sub
</script> 
```

将此添加到容器 .ascx 文件中，我可以将自己的特定类插入到包装器 div 中。

来源： http: [//www.dotnetnuke.com/Resources/Forums/forumid/109/threadid/458919/scope/posts.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/109/threadid/458919/scope/posts.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:09:21.713

C#版本：

```
<script runat="server">    
    protected void Page_PreRender(object sender, EventArgs e) {
        try {
            HtmlGenericControl cParent = (HtmlGenericControl) this.Parent;
            cParent.Attributes["class"] += " span6";
        } catch (Exception ex) { 
            // do nothing 
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:18:35.730

我认为 DIV 总是由 DNN 自动添加，并且它总是有那个 DNNModule 类，我不认为皮肤或容器有一个扩展点来修改它。

这意味着我认为您最好的选择是使用 jQuery（IIRC 已融入当前的 DNN 图像），并在皮肤 .ascx 文件中对其进行初始化。

类似的东西（未测试）：

```
$(".DNNModule").addClass("MyMagicClass"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-16T17:46:10.557

这是一个老问题，但今天我有一个类似的问题，最后我使用这个其他解决方案尝试在后面的代码中添加一个 css 类：

```
<script runat="server">    
    protected void Page_PreRender(object sender, EventArgs e)
    {
        try
        {
            HtmlGenericControl body = (HtmlGenericControl)Page.FindControl("body");
            body.Attributes.Add("class", " fontSize" + Utils.SiteFontSize);
        }
        catch (Exception)
        {
            // do nothing 
        }
    }
</script> 
```

# javascript - 禁用asp.net菜单控件生成的javascript

> ID：11125679
> 
> 赞同：0
> 
> 时间：2012-06-20T18:16:56.600
> 
> 标签：javascript, asp.net, menu

我有一个使用 asp.net 菜单控件创建的菜单。我添加了 JQuery 脚本，将显示从弹出显示更改为展开手风琴风格。但是弹出仍然出现，所以总体上发生的是“鼠标悬停菜单->出现子菜单->子菜单回滚”

我正在寻找的是一种禁用 asp.net 生成的 javascript 的方法，它会导致子菜单出现在鼠标悬停时，以便我拥有的替换脚本可以独立运行。

在与此问题类似的其他答案中，我发现以下内容：

```
public class MyCustomMenu : System.Web.UI.WebControls.Menu
{
    protected override void OnPreRender(EventArgs e)
    {
        // Don't call base OnPreRender
        //base.OnPreRender(e);
    }
} 
```

但是，将其添加到我的 masterpage.cs 文件并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:27:51.920

如果您查看菜单控件呈现的 HTML，您会看到每个菜单元素在鼠标悬停时都有一个函数调用，称为 Menu_HoverStatic。要禁用它，只需在 ASPX 标记中包含一个同名的空函数：

```
<script type="text/javascript">
   Menu_HoverStatic = function () { };
</script> 
```

这将有效地禁用原始鼠标悬停。使用此方法，您可以在需要时禁用其他原始事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:43:59.733

不是每个人都熟悉的一件事是使用[控件适配器](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)来自定义标准控件的呈现方式。

使用适配器，您可以例如将菜单的输出更改为干净的`<ul>`元素`<li>`，将其与 jquery 集成等。

[这是在菜单上使用ASP.NET 2.0 CSS 友好控制适配器](http://cssfriendly.codeplex.com/)的示例：[http ://www.asp.net/cssadapters/WalkThru/WalkThrough.aspx#SimpleMenu](http://www.asp.net/cssadapters/WalkThru/WalkThrough.aspx#SimpleMenu)

# html - 如何在html中做表格？

> ID：11125686
> 
> 赞同：0
> 
> 时间：2012-06-20T18:17:25.097
> 
> 标签：html

我该如何做一个浏览按钮，点击它只会打开浏览框，并将文件的链接存储在它的值中，我不希望它连接到任何服务器或任何东西（所以我不确定对动作和方法属性做什么...）。基本上在用户浏览文件后，他们可以单击另一个按钮并发生 onclick 事件，但是当我尝试它时，它无法正常运行。

```
<form action="" method="POST">
    <input name="fileupload" id="fileupload" type="file">
    <input value="OK" type="submit" onclick="change_bg_img('Untitled.png');">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:35:15.100

你有一个输入`type="submit"`。单击它将提交表单，因此 JavaScript 将运行，然后页面将以默认状态重新加载。

如果您不想将数据提交到服务器，那么：

*   不要使用`<form>`
*   `type="button"`不使用`type="submit"`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T18:38:56.263

如前所述，您实际上并不需要这里的表格。

我在 jsfiddle 上做了一个工作示例：

[http://jsfiddle.net/h774q/2/](http://jsfiddle.net/h774q/2/)

使用按钮。为了获得最佳实践，请让您的点击事件处理程序远离标记；）

# python - GAE 在哪里存储永久链接？

> ID：11125690
> 
> 赞同：1
> 
> 时间：2012-06-20T18:17:31.860
> 
> 标签：python, google-app-engine, google-cloud-datastore, permalinks, data-storage

所以我在 python 中有以下代码 GAE 代码，它有点长，但基本上它允许用户发布到博客，然后将每个博客帖子保存到用户被重定向到的永久链接，并且用户可以永远重新链接到。永久链接 url 就是 blog/（博客文章 ID）。所以永久链接是通过重定向方法在 NewPost 处理程序中创建的（如果我错了，请纠正我），然后这些永久链接的列表存储在哪里？它可以以某种方式访问​​吗？因为我无法从视觉上看到它，所以这部分让我有点绊倒。

我从 Udacity.com 学到了所有这些代码，但他们并没有真正解释这一点，我可以让它工作，但不明白它是如何工作的。

```
import os
import re
from string import letters

import webapp2
import jinja2

from google.appengine.ext import db

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                               autoescape = True)

def render_str(template, **params):
    t = jinja_env.get_template(template)
    return t.render(params)

class BlogHandler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

    def render_str(self, template, **params):
        return render_str(template, **params)

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

def render_post(response, post):
    response.out.write('<b>' + post.subject + '</b><br>')
    response.out.write(post.content)

#front page
class MainPage(BlogHandler):
  def get(self):
      self.write('Hello, Udacity!')

def blog_key(name = 'default'):
    return db.Key.from_path('blogs', name)

#creates the database
class Post(db.Model):
    subject = db.StringProperty(required = True)
    content = db.TextProperty(required = True)
    created = db.DateTimeProperty(auto_now_add = True)
    last_modified = db.DateTimeProperty(auto_now = True)

    def render(self):
        self._render_text = self.content.replace('\n', '<br>')
        return render_str("post.html", p = self)

#front of blog with list of last 10 posts
class BlogFront(BlogHandler):
    def get(self):
        posts = db.GqlQuery("select * from Post order by created desc limit 10")
        self.render('front.html', posts = posts)

#displays the permalink page
class PostPage(BlogHandler):
    def get(self, post_id):
        key = db.Key.from_path('Post', int(post_id), parent=blog_key())
        post = db.get(key)

        if not post:
            self.error(404)
            return

        self.render("permalink.html", post = post)

#create a new post
class NewPost(BlogHandler):
    def get(self):
        self.render("newpost.html")

    def post(self):
        subject = self.request.get('subject')
        content = self.request.get('content')

        if subject and content:
            p = Post(parent = blog_key(), subject = subject, content = content)
            p.put()
            self.redirect('/blog/%s' % str(p.key().id()))
        else:
            error = "subject and content, please!"
            self.render("newpost.html", subject=subject, content=content, error=error)

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/unit2/welcome', Welcome),
                               ('/blog/?', BlogFront),
                               ('/blog/([0-9]+)', PostPage),
                               ('/blog/newpost', NewPost),
                               ],
                              debug=True) 
```

更新：

是否可以通过以下方式更改代码以使其对搜索引擎更加友好：

```
class NewPost(BlogHandler):
    def get(self):
        self.render("newpost.html")

    def post(self):
        subject = self.request.get('subject')
        content = self.request.get('content')

        if subject and content:
            p = Post(parent = blog_key(), subject = subject, content = content)
            p.put()
            #the change is in the following line:
            self.redirect('/blog/%s/%s' % (str(p.key().id(), str(p.subject)))
        else:
            error = "subject and content, please!"
            self.render("newpost.html", subject=subject, content=content, error=error) 
```

最后更新：

我使用以下代码解决了使其对搜索引擎更友好的问题：

```
 def post(self):
            subject = self.request.get('subject')
            content = self.request.get('content')

        if subject and content:
            p = Post(parent = blog_key(), subject = subject, content = content)
            p.put()
            subject = p.subject
            subject = subject.replace(' ', '25fdsa67ggggsd5')
            subject = ''.join(e for e in subject if e.isalnum())
            subject = subject.replace('25fdsa67ggggsd5', '-')
            subject = subject.lower()
            self.redirect('/blog/%s/%s' % (str(p.key().id(), str(subject)))
        else:
            error = "subject and content, please!"
            self.render("newpost.html", subject=subject, content=content, error=error) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:41:39.210

The ID of the blog post is all that is needed to retrieve it front the datastore, so there is no need for a mapping of any kind. A request comes in with the permalink URL, the ID is extracted from the URL, the post is retrieved from the datastore using the ID, the blog post is rendered.

It is a simple and effective strategy, but one area where it falls flat is search engine optimization. Most search engines would prefer a URL that has words in it rather than just a string of numbers and characters.

This is commonly called slugging, and it would require you to provide a mapping between the ID and a string. Several years ago, I wrote a mixin class that provided easy slugging for AppEngine/Python programs: [sluggable-mixin](http://code.google.com/p/sluggable-mixin/). It should still work.

# jquery - 带有getJson的jquery自动完成一次执行多个请求

> ID：11125693
> 
> 赞同：0
> 
> 时间：2012-06-20T18:17:38.073
> 
> 标签：jquery, asp.net-mvc, json, jquery-autocomplete

这是我的代码：

```
options = { 
        source: function(request, response) {
            $.getJSON('@Url.RouteUrl("Search")', { prefixText: request.term, count : 10 }, function (retour) {

                response( retour);

            });
         }

    };
    a = $('#test').autocomplete(options); 
```

如果我正在搜索测试，当我开始编写自动完成功能时，会请求 t、te、tes 并最终测试...

“测试”请求首先完成，因此自动完成显示良好的结果，但 2 秒后显示“tes”的结果

有没有办法在我写作时中止另一个请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:33:12.903

这是解决方案（感谢calixto）：

```
 if(xhr)
            {
                //kill the request
                xhr.abort();
            }

            xhr = $.getJSON('@Url.RouteUrl("Search")', { prefixText: request.term, count : 10 }, function (retour) {

                response( retour);

            }); 
```

# .htaccess - htaccess 和重写 url

> ID：11125697
> 
> 赞同：0
> 
> 时间：2012-06-20T18:17:54.150
> 
> 标签：.htaccess, url-rewriting, rewrite

目前我有一个 /en/ 文件夹是空的，除了 .htaccess 有以下内容

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)$ ../index.php?language=en$1 [NC] 
```

我用它来消除对

```
index.php?language=en 
```

在我所有的网址中。我想以一种我不再需要 /en/ 文件夹的方式修改 htaccess，除了里面的 htaccess 什么都没有。理想情况下，我希望在我的根文件夹中有一个读取 url 的 htaccess，如果它是 www.example.com/en/ 则重写为 www.example.com/index.php?language=en

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:22:54.447

这应该适合你：

```
RewriteRule ^en/(.*)$ index.php?language=en$1 [NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:27:13.070

将以下代码放入根文件夹中的 .htaccess 文件中。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^en/(.*)$ index.php?language=en$1 [L] 
```

这里 $1 也将附加 URL 的其余部分。如果您使用直接 url 请求文件，该条件也将有所帮助。

# eclipse - Eclipse Juno 的“预处理器包括路径、宏等” CDT 符号扫描仪

> ID：11125703
> 
> 赞同：10
> 
> 时间：2012-06-20T18:18:13.347
> 
> 标签：eclipse, eclipse-cdt, eclipse-juno

因此，这里对扫描仪发现进行了彻底检查：
[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=](https://bugs.eclipse.org/bugs/show_bug.cgi?id=290631)
[290631 http://dev.eclipse.org/mhonarc/lists/cdt-开发/msg24345.html](http://dev.eclipse.org/mhonarc/lists/cdt-dev/msg24345.html)

但是，我找不到有关如何使用它的任何信息。我最近从 Helios 升级到 Juno，现在我有 8000 个“语义错误”和大量未解决的包含。但是，我不知道如何使用这个新功能。我认为还没有任何文档。

我认为其目的是扫描您的项目并自动发现宏并包含目录，以帮助符号解析和项目导航。

如果我弄明白了，我会继续努力并更新这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T20:37:42.133

弄清楚了。

以此为指导：[https ://developer.mozilla.org/en/Eclipse_CDT](https://developer.mozilla.org/en/Eclipse_CDT)

在项目属性“C/C++ Build”中，我用我的构建命令替换了默认构建命令。我必须删除 -s 开关（静默开关），以便输出解析器可以从编译器命令中获取所有路径和宏。将“构建目录”指向包含我的 makefile 的目录。

在“C/C++ 常规”>“预处理器包括路径、宏等”下 > “Providers” 我选择了 CDT User Setting Entries 和 CDT GCC Build Output Parser。然后我不得不更改编译器命令模式以匹配我的 gcc 交叉编译器。为此，我只是将“gcc”更改为“arm-elf-gcc”。

完整构建后（第一次索引不要使用多核构建），右键单击您的项目，单击“索引”和“重建”。在此之后，输出解析器正确填充了索引，它们显示在“C/C++ General”>“Preprocessor Include Paths, Macros etc”下。> “参赛作品”

# php - PHP - 将复选框表单中的数据插入 MYSQL

> ID：11125704
> 
> 赞同：7
> 
> 时间：2012-06-20T18:18:15.733
> 
> 标签：php, mysql

这是我第一个使用服务器端技术的网站。这也是我第一次深入研究`PHP`并肩工作`MYSQL`。我一直在工作和学习。

我为一家小型舞会礼服企业的产品条目数据库创建了一个基本管理页面。

我一直在研究一种表单的功能，管理员可以使用它来将新条目上传到数据库。

其中一些条目包括：

> 着装名称[文字输入]
> 
> 颜色可用性 [复选框]

我在从 HTML 表单的多个复选框中获取数据到数据库时遇到了麻烦。

复选框中的选项应代表一个布尔值（是/否 - 1/0）

这是表单结构：

```
 <form action="inventory_list.php" enctype="multipart/form-data" name="myForm" id="myform" method="post">
    <table width="90%" border="0" cellspacing="0" cellpadding="6">
  <tr>
    <td width="20%" align="right">Dress Name</td>

    <td width="80%"><label>
    <input name="Dress_name" type="text" id="Dress_name" size="64" />
    </label>
    </td>
  </tr>

  <tr>
    <td align="right">Collections</td>
    <td>
    <label>
      <select name="collections" id="collections">
            <option value="other">Other</option>
            <option value="hermione">Hermione</option>
            <option value="jora">Jora</option>
            <option value="manon">Manon</option>
      </select>
    </label></td>
  </tr>
  <tr>
    <td align="right">Available Sizes</td>
    <td>
        <input type="checkbox" name="sizes[]" value="1" /> Sizes 2-6<br />
        <input type="checkbox" name="sizes[]" value="1" />  Sizes 6-10 <br />
        <input type="checkbox" name="sizes[]" value="1" /> Sizes 10-14<br />
        <input type="checkbox" name="sizes[]" value="1" />  Sizes 14-18 <br />
        <input type="checkbox" name="sizes[]" value="1" /> Sizes 18-22<br />
        <input type="checkbox" name="sizes[]" value="1" />  Sizes 22-26 <br />

   </td>
  </tr>
  <tr>
    <td align="right">Dress Colours</td>
    <td>
        <input type="checkbox" name="colours[]" value="1" /> Pinks/Reds <br />
        <input type="checkbox" name="colours[]" value="1" />  Blues/Greens <br />
        <input type="checkbox" name="colours[]" value="1" /> Violet/Purple<br />
        <input type="checkbox" name="colours[]" value="1" />  Yellow/Orange/Brown/Gold <br />
        <input type="checkbox" name="colours[]" value="1" /> Black/White<br />

   </td>
  </tr>
  <tr>
    <td align="right">Product Image</td>
    <td><label>
      <input type="file" name="fileField" id="fileField" />
    </label></td>
  </tr>      
  <tr>
    <td>&nbsp;</td>
    <td><label>
      <input type="submit" name="button" id="button" value="Add This Item Now" />
    </label></td>
  </tr>
</table>
</form> 
```

这是我为处理向数据库提交数据的表单而构建的 PHP。

```
<?php 
if (isset($_POST['Dress_name'])) {

$dress_name = mysql_real_escape_string($_POST['Dress_name']);
$collections = mysql_real_escape_string($_POST['collections']);
$sizesArray = $_POST['sizes'];
$coloursArray = $_POST['colours'];

foreach ($sizesArray as $key => $value)
{
    echo "Key = $key || Value = $value<br />";
}

foreach ($coloursArray as $ckey => $cvalue)
{
    echo "Key = $ckey || Value = $cvalue<br />";
}

//See if that product name is an identical match to another product in the system
$sql = mysql_query("SELECT ID FROM names WHERE Dress='$dress_name' LIMIT 1");
$productMatch = mysql_num_rows($sql); // count the output amount
if ($productMatch > 0) {
    echo 'Sorry you tried to place a duplicate "Product Name" into the system, <a href="inventory_list.php">click here</a>';
    exit();
}

 //Add this product into the database now
$sql = mysql_query("INSERT INTO names (Dress) 
    VALUES('$dress_name')") or die (mysql_error());
 $pid = mysql_insert_id();

 //Place image in the folder 
$newname = "$pid.jpg";
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$newname");
header("location: inventory_list.php"); 
exit();
}
?> 
```

如您所见，我已经将数据放入数组中。现在我碰到了一点砖墙，我似乎无法在任何地方找到一个有意义的答案。

如何将布尔值放入数据库表中的正确列中？

感谢您的时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T18:45:28.940

首先要知道的是，如果选中 HTML 复选框，则会返回结果，如果未选中，则不会返回任何内容。因此，在你的 html 中让你的值增加是很重要的：

```
<td align="right">Available Sizes</td>
<td>
  <input type="checkbox" name="sizes[]" value="1" /> Sizes 2-6<br />
  <input type="checkbox" name="sizes[]" value="2" />  Sizes 6-10 <br />
  <input type="checkbox" name="sizes[]" value="3" /> Sizes 10-14<br />
  <input type="checkbox" name="sizes[]" value="4" />  Sizes 14-18 <br />
  <input type="checkbox" name="sizes[]" value="5" /> Sizes 18-22<br />
  <input type="checkbox" name="sizes[]" value="6" />  Sizes 22-26 <br />
</td> 
```

完全规范化的数据库模式如下所示：

```
//Note that 'names' and 'collections are overloaded
  //words and should be avoided
table BRANDS 
  id INT AUTOINCREMENT
  collectionname VARCHAR

table SIZES
  id INT AUTOINCREMENT
  sizecategory VARCHAR //ie 'Sizes 18-22'

table COLOURS
  id INT AUTOINCREMENT
  colourname VARCHAR 

table INVENTORY
  id INT AUTOINCREMENT
  brandid INT FOREIGN KEY (BRAND)
  imageurl VARCHAR

table INVENTORY_SIZES
  inventoryid INT FOREIGN KEY
  sizeid FOREIGN KEY

table INVENTORY_COLOURS
  inventoryid INT FOREIGN KEY
  colourid FOREIGN KEY 
```

您的`BRAND`,`COLOURS`和`SIZES`表需要正确填充可用选项，理论上您可以使用这些表中的数据动态加载页面。这些表中每一行的 id 最终应该是复选框数组中的值。

```
//get your inputs
$query_values = array();
$query_values[':brandid'] = $dress_name = $_POST['Dress_name'];//note that you should change the value in your options here to the unique ids in your database.
$query_values[':sizeid'] = getSize($_POST[]);
$query_values[':colourid'] = getColour($_POST[]);
$query_values[':quantity'] = $_POST['quantity'];
$query_values[':imageurl'] = $_POST['imageurl'];

//Prepare and execute your sql
  //Note that PDO will handle escaping problematic inputs.
$sql = "INSERT INTO INVENTORY ('brandid', 'imageurl') VALUES (:brandid, :sizeid, :colourid, :quantity, :imageurl)";
executeInsert($sql, $query_values);
$inventoryid = mysql_insert_id();

saveSizes($_POST['sizes'], $inventoryid);
saveColours($_POST['colours'], $inventoryid);

function saveSizes($size_array, $inventoryid) {
  $sql = "INSERT INTO INVENTORY_SIZES ('inventoryid', 'sizeid') VALUES (:inventoryid, :sizeid)";
  foreach ($size_array as $sizeid) {
    $query_values = array();
    $query_values[':inventoryid'] = $inventoryid;
    $query_values[':sizeid'] = $sizeid;
    executeInsert($sql, $query_values);
  }
}

function saveColours($colour_array) {
  $sql = "INSERT INTO INVENTORY_COLOURS ('inventoryid', 'colourid') VALUES (:inventoryid, :colourid)";
  foreach ($size_array as $sizeid) {
    $query_values = array();
    $query_values[':inventoryid'] = $inventoryid;
    $query_values[':colourid'] = $colourid;
    executeInsert($sql, $query_values);
  }
}

function executeInsert($sql, $query_values) {
  $query = $conn->prepare($sql);
  $query->execute($query_values);
} 
```

请务必使用[PHP PDO](http://php.net/manual/en/book.pdo.php)来防范安全问题。我相当肯定其中一些可以更好地抽象/清理，但这应该可以完成工作。（虽然我也相当确定有一些小错误，因为我正在这样做并且没有测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:31:44.293

您需要将插入语句放在“if”之后的“else”语句中，以检查名称是否已存在于数据库中。

我不确定您到底要做什么，因为没有执行任何语句来将“复选框”值放入数据库中。您正在将`sizes`数组回显到作为管理员提交此表单后查看的输出，但您根本没有将其放入数据库中。

如果您可以共享数据库结构（列名），将会有所帮助。如果您没有任何 2-5 号和其他类别的列，请添加这些列，然后将您的插入语句更改为以下内容：

`INSERT INTO names (Dress,Size2to5,Size5to10,Size10to15,Size15to20) VALUES('$dress_name','$size[0]','$size[1]','size[2]','size[3]')`

希望这可以帮助。请让我们知道这是否适合您。

# ios - UILocalNotification 特殊字符警报正文

> ID：11125709
> 
> 赞同：2
> 
> 时间：2012-06-20T18:18:26.473
> 
> 标签：ios, ios5, uilocalnotification, ios4

在 iOS 5.1.1 上生成 UILocalNotification 时，我无法在 alertBody 中显示特殊字符，例如“%”。Apple 的文档特别指出 '%' char 的字符串格式化程序是 '%%'。

以下是相关代码：

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
localNotification.timeZone = [NSTimeZone defaultTimeZone];
localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:20.0];

localNotification.alertBody = [NSString stringWithFormat:@"Test %%"];
NSLog(@"Local notification's alert body is %@",localNotification.alertBody);
localNotification.alertAction = @"View";

localNotification.soundName = UILocalNotificationDefaultSoundName;
localNotification.applicationIconBadgeNumber = 1;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

如果我尝试绝对指定 alertBody，也会发生同样的事情： localNotification.alertBody = @"Test %";

我已经尝试过相同的代码来生成一个完美运行的 UIAlertView。这是iOS错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:01:22.717

我找到了一个涉及使用的部分解决方案

```
localNotification.alertBody = @"%%%%"; 
```

生成一个 '%' 字符。我猜这是iOS中的双重处理错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T18:22:17.510

我知道它说格式化程序是 %% 但通常在字符串中您使用反斜杠 \ 作为转义。因此，请尝试：“Test \%”。

# wordpress - WordPress 自定义分类法通过 2 个下拉菜单过滤

> ID：11125710
> 
> 赞同：1
> 
> 时间：2012-06-20T18:18:26.870
> 
> 标签：wordpress, drop-down-menu, filter

我有一个名为cataloag 的自定义帖子类型，我用它来显示帖子。有 2 个关联的自定义分类法，命名为 yy 和 mm。我已经使用自定义分类法创建了 2 个下拉列表，但希望能够从一个或两个中进行选择并更改查询以在点击时进行过滤？

我知道我需要 tax_query 将它们组合在一起，但是创建点击查询的功能超出了我的范围。

我已经附上了我设法放在一起的代码：http: [//pastie.org/4121839](http://pastie.org/4121839)

任何帮助将不胜感激。

# jquery - jQuery 点击与滑动

> ID：11125713
> 
> 赞同：1
> 
> 时间：2012-06-20T18:18:37.090
> 
> 标签：jquery, click, swipe

我正在开发一个特定于 iPad 的网站，我想做的是有一个可滑动的功能。在里面会有这个人可以回答的问题（问题在普通的 HTML 标签中）。

现在，我可以让滑动正常工作，但是当我单击问题（复选框、单选按钮等）时，什么也没有发生。我该如何解决这个问题？

我知道 touchstart 用于检测和移动东西，但是当用户尝试点击应该可以点击的东西时，我该如何忽略它？

**更新** 经过大量研究，我决定使用 touchwipe。它易于使用/实现，并且不会覆盖点击功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:35:02.240

我建议为您的网站使用 jQueryMobile。它不仅为移动网站提供了一些不错的 CSS/JS，而且您还可以利用其检测滑动的自定义事件：

*   `swipe`
*   `swiperight`
*   `swipeleft`

文档：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# jquery - 如何为添加由另一个脚本创建的类的悬停函数设置动画？

> ID：11125714
> 
> 赞同：1
> 
> 时间：2012-06-20T18:18:48.277
> 
> 标签：jquery, hover, find, jquery-animate, addclass

我正在使用现有模板工作，并且我已经获得了将类 ulDisplay 添加到列表项并在悬停时打开整个菜单的菜单。现在我想为动作制作动画而不是突然打开？菜单有四层深，因此找到多层深的孩子的线条很重要。

这是脚本：

```
$(document).ready(function() {

        $('ul#nav-primary').hover(function() { 

                $(this).addClass("ulDisplay");
                $(this).find('ul,li').removeClass("ulHide");
                $(this).find('ul,li').addClass("ulDisplay");

            },

        function() { 
            $('ul#nav-primary').removeClass("ulDisplay"); 
            $('ul#nav-primary').find('ul,li').removeClass("ulDisplay");
            $('ul#nav-primary li').find('ul,li').addClass("ulHide"); 
            })

    }); 
```

抱歉应该早点添加：

到目前为止我已经尝试过但不起作用的方法：

```
$(document).ready(function() {

            $('ul#nav-primary').hover(function() { 
                    $(this).slideToggle('normal');
                    $(this).find('ul,li').removeClass("ulHide");
                    $(this).find('ul,li').addClass("ulDisplay");
                },

            function() {  
                $('ul#nav-primary').slideToggle('normal');
                $('ul#nav-primary li').find('ul,li').removeClass("ulDisplay");
                $('ul#nav-primary li').find('ul,li').addClass("ulHide"); 
                })

        }); 
```

我也试过：

```
$(document).ready(function() {

            $('ul#nav-primary').hover(function() { 

                    //$(this).addClass("ulDisplay");
                    $('ul#nav-primary li').find('ul,li').removeClass("ulHide");
                    $('ul#nav-primary li').find('ul,li').addClass("ulDisplay").stop(true, true).slideToggle(1000);

                },

            function() { 
                //$('ul#nav-primary').removeClass("ulDisplay"); 
                $('ul#nav-primary li').find('ul,li').removeClass("ulDisplay").stop(true, true).slideToggle(1000);
                $('ul#nav-primary li').find('ul,li').addClass("ulHide"); 
                })

        }); 
```

最后：

```
$(document).ready(function() {

        $('ul#nav-primary').hover(function() { 

                //$(this).addClass("ulDisplay");
                $('ul#nav-primary li').find('ul,li').removeClass("ulHide");
                $('ul#nav-primary li').find('ul,li').addClass("ulDisplay", 1000);

            },

        function() { 
            //$('ul#nav-primary').removeClass("ulDisplay"); 
            $('ul#nav-primary li').find('ul,li').removeClass("ulDisplay", 1000);
            $('ul#nav-primary li').find('ul,li').addClass("ulHide"); 
            })

    }); 
```

这是HTML：

```
<div id="nav">
    <h3><a href="/TemplatePackage/subtopic/B/index.html">Topic Homepage</a></h3>
    <ul id="nav-primary">
        <li><a href="#">Level 1</a>
            <ul>
                <li><a href="#">Level 2</a>
                    <ul>
                        <li><a href="#">Level 3</a>
                            <ul>
                                <li><a href="#">Level 4 - Item 1</a></li>
                                <li><a href="#">Level 4 - Item 2</a></li>
                                <li><a href="#">Level 4 - Item 3</a></li>
                                <li><a href="#">Level 4 - Item 4</a></li>
                                <!--<li><a href="/TemplatePackage/subtopic/B/basic_info/screening/level4.html#5">Level 4 - Item 5</a></li>-->
                            </ul>
                        </li>
                        <li><a href="#">Level 3</a></li>
                        <li><a href="#">Level 3</a></li>
                        <li><a href="#">Level 3</a></li>
                    </ul>
                </li>
                <li><a href="#">Level 2</a></li>
                <li><a href="#">Level 2</a></li>
                <li><a href="#">Level 2</a></li>
                <li><a href="#">Level 2</a></li>
                <li><a href="#">Level 2</a></li>
            </ul>
        </li>
        <li><a href="#">Level 1</a>
            <ul>
                <li><a href="#">Level 2</a><ul>
                    <li><a href="#">Level 3</a>
                            <ul>
                                <li><a href="#">Level 4</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#">Level 1</a>
            <ul>
                <li><a href="#">Level 2</a></li>
            </ul>
        </li>
        <li><a href="#">Level 1</a></li>
        <li><a href="#">Level 1</a></li>
        <li><a href="#">Level 1</a></li>
    </ul>
</div>
<div class="bottom"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:23:57.443

jQuery UI（核心）可以[在添加类时转换一些属性](http://jqueryui.com/demos/addClass/)。

```
$(this).find('ul,li').addClass("ulDisplay",1000); // milliseconds 
```

但是，如果您所做的只是显示和隐藏嵌套的 UL 块，请尝试使用`.slideToggle()`（或单独使用`.slideDown()`and `.slideUp()`）而不是添加和删除类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:28:23.120

使用 JQuery 动画来做你想做的事。尝试使用`.toggle()`功能：

```
 $(document).ready(function() {

    $('#primaryMenu').hover(function() { 

            $(this).toggle('fast');
            //$(this).find('ul,li').removeClass("ulHide");
            //$(this).find('ul,li').addClass("ulDisplay");

        },

    function() { 
        $('#primaryMenu').toggle('fast'); 
        //$('ul#nav-primary').find('ul,li').removeClass("ulDisplay");
        //$('ul#nav-primary li').find('ul,li').addClass("ulHide"); 
        })

}); 
```

**更新**

使用不可更改的模板在大多数情况下都很好，但有些时候你会很紧张。然而，并非一切都丢失了！您可以使用 javascript 来更改代码，我在接受的答案中找到了这篇文章[Pure javascript method to wrap content in a div](https://stackoverflow.com/questions/6838104/pure-javascript-method-to-wrap-content-in-a-div)您可以找到以下代码：

```
 org_html = document.getElementById("slidesContainer").innerHTML;
 new_html = "<div id='slidesInner'>" + org_html + "</div>";
 document.getElementById("slidesContainer").innerHTML = new_html; 
```

我个人觉得这很神奇！并将其写下来，因为我认为它非常有用。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:01:49.590

好的，所以我要感谢你们两位的洞察力和帮助。它确实有助于找到答案。这是最终工作的代码：

```
$(document).ready(function() {  

     $('ul#nav-primary').find('li').hover(function() {   
          $(this).children('ul').slideDown('normal');
          $(this).children('ul').removeClass('ulHide');
          $(this).children('ul').addClass('ulDisplay');
          $(this).children('ul').children('li').removeClass('ulHide');
          $(this).children('ul').children('li').addClass('ulDisplay');
                });

}); 
```

非常感谢 EH_warch 和 Blazemonger

我发现的问题实际上在于 CSS： 观看此视频： http: [//jqueryfordesigners.com/video.php](http://jqueryfordesigners.com/video.php?f=animation-jump2.flv) ?f=animation-jump2.flv 这将帮助人们理解为什么动画中有跳跃。

# bash - bash中带有while循环的一元运算符

> ID：11125718
> 
> 赞同：1
> 
> 时间：2012-06-20T18:19:03.503
> 
> 标签：bash, while-loop, unary-operator

我正在尝试设置 bash 脚本，以便将文件从一个目录移动到指定的大小限制（在本例中为 1GB）。我试图让它进入循环，但我遇到了 while 语句的问题。它不断返回以下输出，我不知道为什么。如果我尝试在 while bash 中使用 "$currentSize" 表示它期望进行整数比较。但是 bash 中的变量应该是无类型的，所以我不能将它转换为整数，对吧？任何帮助都是适当的。

输出

```
54585096

1048576
./dbsFill.bsh: line 9: [: -lt: unary operator expected 
```

代码

```
#!/bin/bash

currentSize= du -s /root/Dropbox | cut -f 1
maxFillSize=1048576
echo $currentSize
echo $maxFillSize

cd /srv/fs/toSort/sortBackup
while [ $currentSize -lt $maxFillSize ]

do
        #fileToMove= ls -1
        #rsync -barv --remove-source-files $fileToMove /root/Dropbox/sortme
#       mv -t /root/Dropbox/sortme $(ls -1 | head -n 1)
        #find . -type f -exec mv -t /root/Dropbox/sortme {} \;
        #currentSize= du -s /root/Dropbox | cut -f 1
#       sleep 5
        echo Were are here
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:34:42.427

您要通过以下方式实现的目标：

```
currentSize= du -s /root/Dropbox | cut -f 1 
```

是捕获`/root/Dropbox`in的当前大小`currentSize`。那没有发生。那是因为在设置 shell 变量时空格很重要，所以有以下区别：

```
myVar=foo 
```

和

```
myVar= foo 
```

后者尝试`foo`在环境变量`myVar`设置为空的情况下进行评估。

底线：`currentSize`被设置为空，第 9 行变为：

```
while [ -lt 1048576 ] 
```

当然，`-lt`这不是 shell 在那种情况下所期望的一元运算符。

要实现您的意图，请使用[Bash 命令替换](http://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution)：

```
currentSize=$( du -s /root/Dropbox | cut -f 1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:24:31.950

> ```
> currentSize= du -s /root/Dropbox | cut -f 1 
> ```

这并不像你认为的那样。

```
currentSize=$(du -s /root/Dropbox | cut -f 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:25:45.480

您需要将您的“currentSize ...”行重写为

```
currentSize=$(du-s /root/Dropbox | cut -f 1) 
```

您的代码将 currentSize 的值留空。

您可以发现此类问题（稍加练习），但使用 shell 调试功能

```
set -vx 
```

在你的脚本的顶部，或者如果你认为你很确定哪里有问题，把你的可疑代码包围起来，比如：

```
set -vx
myProblematicCode
set +vx 
```

（`set +vx`关闭调试模式。）

我希望这有帮助。

# iphone - 基本的 CCArray 理解

> ID：11125726
> 
> 赞同：0
> 
> 时间：2012-06-20T18:19:29.343
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

对 C++ 和 Cocos2d-x 来说非常新，但我只是在玩弄 CCArray 并有一个问题。我习惯了 NSMutableArray 和 NSArray，我不必在创建时设置数组的大小。

使用 CCArray 我找到的每个示例都有大小设置

`CCArray *frames = CCArray::arrayWithCapacity(int)`

所以我的问题是，是否有可能让容量保持开放状态？以后会不会出问题？我可以在未来添加更多元素，就像我可以使用 NSMutableArray 一样，但不能使用 NSArray。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:39:53.597

在 cocos2d-x 中，CCArray 是可变的，即你可以给它添加元素。要创建没有容量的 CCArray 实例，可以使用`CCArray::array()`构造函数。CCMutableArray 是基于模板的容器，可以存储相同类型的对象。CCArray 将对象存储为 CCObject 实例，因此您必须在从 CCArray 实例获取对象后强制转换它们

# html - 为什么是比我说的要宽？

> ID：11125727
> 
> 赞同：29
> 
> 时间：2012-06-20T18:19:32.367
> 
> 标签：html, css, html-select, html-input

给定 a`<select>`和一个`<input>`元素，都指定为**200px**宽：

```
<!doctype html>
<body>
<select style="width: 200px"></select><br/>
<input  style="width: 200px" type="text">
</body>
<html> 
```

一个最终比另一个宽^(1,2,3,4)：

![在此处输入图像描述](../Images/9c6b26a6fd140aa64fd7780d2d87cc56.png)

这是什么*原因*？

如果有人能给出*原因*，也许解决方案会很明显，而不是[hack&pray](https://stackoverflow.com/questions/180647/how-to-line-up-html-input-elements)。

## 布局

应用的布局是完全合理的：

![在此处输入图像描述](../Images/97299dce66099d47168a2bcd5e9a2074.png)

* * *

**更新 1**：当我写这个问题时[，Chrome 将自己从**17**更新到**19**](http://www.codinghorror.com/blog/2011/05/the-infinite-version.html)。

**更新 2：**将填充`<input>`从**1**更改**为零**：

```
<!doctype html>
<body>
<select style="width: 200px"></select><br/>
<input style="width: 200px; padding: 0" type="text">
</body>
<html> 
```

不会使`<input>` **200px**宽（即不修复它）。

**更新 3：** [应用 CSS 重置](https://stackoverflow.com/a/11125884/12597)：

```
<!doctype html>
<head>
<style type="text/css">
   * {
       padding: 0;
       margin: 0;
   }
</style>
<body>
<select style="width: 200px"></select><br/>
<input style="width: 200px; padding: 0" type="text">
</body>
<html> 
```

不能解决问题：

![在此处输入图像描述](../Images/2fa6c4709386fede6e159d89f575e2bb.png)

此外，我对解决方案的兴趣不如解释。

## 脚注

*   ^(1、2、3) Chrome ~~17~~ 19、Firefox、Internet Explorer 9
*   ⁴在 Windows 7 64 位

## 奖金阅读

*   [如何在 IE6 中使 <option> 比 <select> 更宽？](https://stackoverflow.com/questions/1727635/how-to-make-option-wider-than-select-in-ie6)（我不希望选项比选择更宽，我没有使用 IE6）
*   [如何在选择列表中显示扩展选项？](https://stackoverflow.com/questions/1700807/how-to-show-extended-option-in-select-list)（下拉菜单的宽度匹配控件的宽度）
*   [比 Containing Div 更宽的 HTML 输入元素](https://stackoverflow.com/questions/1633522/html-input-element-wider-than-containing-div)（此处不包含`<div>`）
*   [如何排列 HTML 输入元素？](https://stackoverflow.com/questions/180647/how-to-line-up-html-input-elements)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-20T18:29:35.447

> ## 你的 <input> 不是太宽；你的 <select> 太窄了！
> 
> 真正的问题是该`<select>`元素的行为**不像**大多数元素那样。它使用一个
> 
> ```
> box-sizing: border-box; 
> ```
> 
> 其中是应用填充和边框***后***`width`元素的宽度；表现得好像它单独处于*“怪癖”*模式。
> 
>  **这与所有其他标准模式 html 元素背道而驰，后者使用：
> 
> ```
> box-sizing: content-box; 
> ```
> 
> 要修复它，请将 更改`<select>`为使用与 html 的其余部分相同的框模型：
> 
> ```
> select { box-sizing: content-box; } 
> ```
> 
> 或更改`<input>`为使用与选择相同的框模型：
> 
> ```
> input { box-sizing: border-box; } 
> ```**

 **输入元素的行为与大多数元素一样，使用`content-box`模型，其中`width`是应用填充和边框之前元素的宽度。

您的浏览器设置了默认填充和边框，因此它比您想要和/或预期的要大。我总是在样式表的顶部使用“CSS 重置”，如下所示：

```
* {
    padding: 0;
    margin: 0;
} 
```

这将确保任何元素上都没有默认填充或边距。

元素是另`select`一种情况，它的行为更像是一个启用的元素，它在其规范中`box-sizing: border-box`考虑了边框和填充。`width`

**如果您添加`box-sizing: border-box`到您的`input`元素，它将完全按照您的期望/想要的方式运行。**

编辑：加粗可能与您相关的部分。另一种解决方案是将`width`输入元素的指定值减少几个像素，使其与选择框的宽度相匹配。

小提琴演示了这两种解决方案：http: [//jsfiddle.net/n4yT2/2/](http://jsfiddle.net/n4yT2/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-21T14:57:23.160

这一切都要追溯到网景。

令人惊讶的是有多少人认为 IE 盒子模型是：

*   破碎的
*   被微软破解
*   [IE6坏了](https://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)

更有趣的是：

*   [Netscape 创建的盒子模型](http://www.jefftk.com/p/the-revenge-of-the-ie-box-model)客观上是*“正确的”* *（[存档](https://archive.fo/XPv7E)）*
*   当 W3C 决定标准化一个盒子模型时，他们选择了一个客观上*“错误”的盒子模型*
*   他们选择了一个盒子模型，没有浏览器在做，也没有网站在使用

Netscape 和 IE 已经同意，如果你告诉某个东西是 200px 宽：它将是 200px 宽。然后人们不得不忍受这种荒谬的 W3C 盒子模型的陌生感，例如：

*   你告诉某个东西要`200px`宽，在符合标准的浏览器中它会很`204px`宽
*   你告诉 a`select`很`200px`宽，在符合标准的浏览器中它会很`200px`宽

## HTML5 终于修复了 W3C 破盒模型

奇怪的是，一个 200px 宽的项目最终不是 200px 宽，以至于在 HTML5 中我们终于有能力返回到原始（正确的）Netscape/IE 框模型：

```
box-sizing: border-box 
```

按钮`75px`宽的地方很`75px`宽。

*   演示：[https ://jsfiddle.net/argxojcp/](https://jsfiddle.net/argxojcp/)

[![在此处输入图像描述](../Images/66db00630fe382c34c7719969faf50de.png)](https://i.stack.imgur.com/rUwyq.png)

```
* {

}

td {
}

.correct {
    box-sizing: border-box;
}
```

```
<table>
<thead>
    <tr><th></th><th>Correct</th><th>W3C</th></tr>
</thead>
<tbody>
    <tr>
        <td>text input</td>
        <td><input type="text" class="correct" style="width: 100px;">
        <td><input type="text" style="width: 100px;">
    </tr>
    <tr>
        <td>select</td>
        <td><select class="correct" style="width: 100px;">foo</select>
        <td><select style="width: 100px;">foo</select>
    </tr>
    <tr>
        <td>button</td>
        <td><input type="button" class="correct" style="width: 100px;">
        <td><input type="button" style="width: 100px;">
    </tr>
    <tr>
        <td>image</td>
        <td><input type="image" class="correct" style="width: 100px; border: 1px solid black;">
        <td><input type="image" style="width: 100px; border: 1px solid black;">
    </tr>
    <tr>
        <td>password</td>
        <td><input type="password" class="correct" style="width: 100px;">
        <td><input type="password" style="width: 100px;">
    </tr>
    <tr>
        <td>submit</td>
        <td><input type="submit" class="correct" style="width: 100px;">
        <td><input type="submit" style="width: 100px;">
    </tr>   

</tbody>
</table>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T18:22:10.130

因为浏览器使用输入框的尺寸（添加默认边框、填充、更改框大小等）来匹配它们（或操作系统的）本机 GUI 控件等效项。

然而，不幸的是，破解和祈祷的解决方案是显而易见的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T18:44:30.380

似乎`<select>`元素的行为就像它们一样`box-sizing: border-box`。但是，尝试将其更改为`box-sizing: content-box`不起作用（至少在 Chrome 19、OSX 10.7.4 上）。

应用 CSS 重置后，由于输入框的边框，大小差异仍然存在。如果你删除它们，这两个元素的宽度都将是 200px。见[演示](http://jsfiddle.net/UDjP5/)。**

# javascript - 是否可以上传并显示带有直接 HTML 的图像

> ID：11125733
> 
> 赞同：0
> 
> 时间：2012-06-20T18:19:51.740
> 
> 标签：javascript, jquery, html, plugins, file-upload

这不是我要发布代码的问题，而只是关于您是否可以上传图像然后在没有服务器端代码的情况下显示该图像的问题（使用 JS 或 Jquery 的直接 HTML ......或任何其他插件可用）。我是一个 .Net 和 Java 人，在 MVC、ASP 和 JSP 方面有丰富的经验，但我想知道这是否可以做到。我一直在寻找几个小时，没有看到任何东西，但我知道一定有办法。我已经尝试过 JotForm 和 DropBox，但还没有想出任何东西。

我会很感激对此没有任何反对或讽刺，这是一个简单的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:23:29.320

简短的回答：没有。没有任何服务器端语言，就没有上传。

但是，可以使用以下代码在客户端显示图像：

```
<input type = "file" id = "my-file-input" />
<img src = "" alt = "" id = "my-image" />

... later ...

<script>
if (window.webkitURL){
  // support for WebKit browsers
  window.URL = window.webkitURL;
}
$("#my-file-input").change(function (ev){
  var data = window.URL.createObjectURL(ev.target.files[0]);

  $("#my-image").attr("src", data);
});
</script> 
```

由于`window.URL`是新的 HTML5 功能，因此不能保证跨浏览器运行，但它在 Firefox 和 Chrome/Safari 中运行良好。

# jquery - MVC3 jQuery Autocomplete - 用户必须选择选项，发送到服务器的选项 ID

> ID：11125734
> 
> 赞同：2
> 
> 时间：2012-06-20T18:19:52.150
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, jquery-ui-autocomplete

**背景**
目前在我的一个项目中，我在`autocomplete`几个领域使用 jQuery。

为了提供上下文，应用程序记录`Runs`. 每个都`Run`必须有一个`Route`与之关联的。一个`Route`含义，用户跑到哪里。

当用户输入 a时，选项会显示`Route`他们的列表，但数据库需要验证。`Routes``autocomplete``RouteID`

为了弥补这一点，我将其存储`RouteID`在`HiddenFor`HtmlHelper 中。当用户从 中选择路线时`autocomplete`，将`HiddenFor`被分配。

**我的问题是**
如果用户输入 的全名`Route`，而不是从`autocomplete`列表中选择它或输入一个`Route`不存在的，`HiddenFor`将不会被分配。发生这种情况时，我必须`Route`通过其名称找到它并验证它是否存在于服务器上。

我希望不必为每个`autocomplete`.

**底线**
有没有让`autocomplete`行为更像一个`select list`？我希望用户别无选择，只能从`autocomplete`列表中选择一个选项的文本，并将所选选项的值发送到服务器。

如果我必须坚持该`HiddenFor`方法，是否至少有一种方法可以强制用户从`autocomplete`列表中选择一个选项？

* * *

*以下是我目前正在使用的代码*

**加价**

```
@Html.LabelFor(model => model.RouteID, "Route")
<input type="text" data-autocomplete-url="@Url.Action("../Route/GetRoutesByUser")" />
@Html.HiddenFor(m => m.RouteID) 
```

* * *

**jQuery**

```
 $('*[data-autocomplete-url]')
    .each(function () {
        $(this).autocomplete({
            source: $(this).data("autocomplete-url"),
            minLength: 2,
            select: function (event, ui) {
                log(ui.item.id, ui.item.name);
            }
        });
    }); 
```

* * *

**代码**

```
public ActionResult GetRoutesByUser(string term)
{
    var routeList = db.Routes.Where(r => r.Name.Contains(term))
                    .Take(5)
                    .Select(r => new { id = r.RouteID, label = r.Name, name = "RouteID"});
    return Json(routeList, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:32:00.127

我会为此使用该事件，如果未选择项目`change`，则清除该值：`input`

```
$('*[data-autocomplete-url]')
    .each(function () {
        $(this).autocomplete({
            source: $(this).data("autocomplete-url"),
            minLength: 2,
            select: function (event, ui) {
                log(ui.item.id, ui.item.name);
            },
            change: function (event, ui) { 
                if (!ui.item) { 
                    this.value = '';
                } else {
                    // Populate your hidden input.
                }
            }
        });
    });
}); 
```

**示例：http:** [//jsfiddle.net/urEzm/](http://jsfiddle.net/urEzm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:53:31.737

好吧，经过大量的摆弄，我想出了以下实现：

下面的代码是一个`HtmlHelper`被调用的`@Html.AutocompleteWithHiddenFor`. HtmlHelper 将创建一个`input`HTML 元素，该元素具有`data-autocomplete-url`基于`controller`和`action`传入的属性。

如果`input`元素需要 a`value`那么您也可以将其传入。`HiddenFor`将为`Model`传入的属性创建A ，并且`ValidationMessageFor`还将为 the 创建`Model`。

现在我所要做的就是使用`@Html.AutocompleteWithHiddenFor`, 并通过控制器和操作（可能还有值）传递我需要的任何表达式，**以获取自动完成功能并将 ID 传递给服务器而不是 text**。

**jQuery**

```
$(function () {
    function log(id, name) {
        var hidden = $('#' + name);
        hidden.attr("value", id);
    }

    $('*[data-autocomplete-url]')
    .each(function () {
        $(this).autocomplete({
            source: $(this).data("autocomplete-url"),
            minLength: 2,
            select: function (event, ui) {
                log(ui.item.id, ui.item.name);
            },
            change: function (event, ui) {
                if (!ui.item) {
                    this.value = '';
                } else {
                    log(ui.item.id, ui.item.name);
                }
            }
        });
    });
}); 
```

* * *

**自动完成助手类**

```
public static class AutocompleteHelper
{
     /// <summary>
     /// Given a Model's property, a controller, and a method that belongs to that controller, 
     /// this function will create an input html element with a data-autocomplete-url property
     /// with the method the autocomplete will need to call the method. A HiddenFor will be
     /// created for the Model's property passed in, so the HiddenFor will be validated 
     /// and the html input will not.
     /// </summary>
      /// <returns></returns>
      public static MvcHtmlString AutocompleteWithHiddenFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression, string controllerName, string actionName, object value = null)
      {
          // Create the URL of the Autocomplete function
          string autocompleteUrl = UrlHelper.GenerateUrl(null, actionName,
                                                       controllerName,
                                                       null,
                                                       html.RouteCollection,
                                                       html.ViewContext.RequestContext,                                                              
                                                       includeImplicitMvcValues: true);

           // Create the input[type='text'] html element, that does 
           // not need to be aware of the model
           String textbox = "<input type='text' data-autocomplete-url='" + autocompleteUrl + "'";

           // However, it might need to be have a value already populated
           if (value != null)
           {
               textbox += "value='" + value.ToString() + "'";
           }

           // close out the tag
           textbox += " />";

           // A validation message that will fire depending on any 
           // attributes placed on the property
           MvcHtmlString valid = html.ValidationMessageFor(expression);

           // The HiddenFor that will bind to the ID needed rather than 
           // the text received from the Autocomplete
           MvcHtmlString hidden = html.HiddenFor(expression);

           string both = textbox + " " + hidden + " " + valid;
           return MvcHtmlString.Create(both);
     }
} 
```

* * *

**看法**

```
@Html.LabelFor(model => model.RouteID, "Route")
@Html.AutocompleteWithHiddenFor(model => model.RouteID, "Route", "GetRoutesByUser") 
```

或者如果它需要一个*值*

```
@Html.LabelFor(model => model.Route, "Route")
@Html.AutocompleteWithHiddenFor(model => model.RouteID, "Route", "GetRoutesByUser", @Model.RouteName) 
```

# .net - 重新启动远程服务器 IIS 应用程序池。RPC 服务器不可用

> ID：11125736
> 
> 赞同：1
> 
> 时间：2012-06-20T18:20:05.827
> 
> 标签：.net, c#-4.0, iis-7.5, rpc

我有一项服务尝试在同一域中的不同服务器上重新启动应用程序池。该服务在域管理员帐户下运行。IIS 是 v.7.5 Windows 2008 R2 框。.NET 4.0。我们冒充此管理员帐户。

知道为什么会抛出这个错误吗？活动目录？该帐户没有 IIS 权限？

提前致谢。

从服务跟踪日志：

```
GetWebServer: Current Username [before impersonation]: 'MYDOMAIN\domain_admin_account'
GetWebServer: Current Username [during impersonation]: 'MYDOMAIN\domain_admin_account'
GetIISWebServer: Current Username: 'MYDOMAIN\domain_admin_account'
LoadMetaBase: Current Username: 'MYDOMAIN\domain_admin_account'
LoadMetaBase: serverDirectoryEntryPath: 'IIS://SERVERNAME/W3SVC'
The RPC server is unavailable.

The RPC server is unavailable.

GetWebServer: Current Username [after impersonation]: 'MYDOMAIN\domain_admin_account'
The RPC server is unavailable.

System.Runtime.InteropServices.COMException (0x800706BA): The RPC server is unavailable.

   at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
   at System.DirectoryServices.DirectoryEntry.Exists(String path)
   at SomeNamespace.IISManagement.IISWebServer.LoadMetaBase()
   at SomeNamespace.IISManagement.IISWebServer..ctor(String serverName)
   at SomeNamespace.IISManagement.IISWebServer.GetIISWebServer(String serverName)
   at SomeNamespace.IISManagement.IISManager.GetWebServer(String serverName)
   at SomeNamespace.IISManagement.IISManager.RestartApplicationPool(String serverName, String applicationPoolName)
   at SomeNamespace.Common.ServiceFunctions.IISAppPoolAction(String serverName, String appPoolName, String action) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:29:10.980

您是否在远程计算机上安装了 WMI 提供程序？有关更多信息，请参阅此[链接](http://learn.iis.net/page.aspx/162/managing-sites-with-iis39s-wmi-provider/)。

# java - 如果父类是可序列化的，在什么情况下您希望您的子类避免可序列化？

> ID：11125738
> 
> 赞同：2
> 
> 时间：2012-06-20T18:20:13.110
> 
> 标签：java, serialization, deserialization

```
 class Parent implements Serializable{

      ........
 }

 class Child extends Parent{

      private void writeObject(ObjectOutputStream oos) throws IOException {
            throw new NotSerializableException();
      }
      private void readObject(ObjectOutputStream oos) throws IOException {
            throw new NotSerializableException();
      }

 } 
```

上面的代码显示了`Serializable`如果父级已经实现，子级如何避免`Serializable`。这似乎是一个糟糕的设计，并且在某些方面令人困惑，所以我想知道您在什么情况下会考虑这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:25:50.717

如果父母被标记为，`Serializable`那么每个孩子都应该在设计上是可序列化的。否则，糟糕的设计选择不是你如何通过抛出异常来禁止序列化，而是**不应该****的事实`Parent``Serializable`**。

由于无法删除在祖先类中实现的接口，因此您别无选择：引发异常总是比序列化不应该序列化的东西更好，这会让您认为一切正常，直到出现问题与序列化的数据。禁止序列化总是有理由的：只需在子类中添加一个不可序列化的字段就足够了（除非您可以使用它，`transient`但如果该字段包含关键信息，这并不总是可能的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:36:13.510

发生这种情况的可能原因是父类最初可能没有设计*为父*类，而只是普通的可序列化类。所以后来，有人创建了一个不可序列化的子类——这并不意味着父类有“设计缺陷”。

如果您可能有一个不是 的特定子类，则`Serializable`唯一的缺点是如果尝试序列化，可能会出现运行时异常。如果您知道您的不可序列化子类永远不会被您的应用程序序列化，那么就没有真正的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:29:59.217

由于 Serializable 只是一个[标记接口](http://c2.com/cgi/wiki?TagInterface)，我认为上述构造没有太多意义。在 Java 中，无法隐藏此接口，这意味着您将受到使用 Child 类的代码的支配。它可以处理序列化异常，也可以不处理。

它处理此类类的一个示例是，当您在 Java Web 容器会话中拥有一些类时，这些类会被持久化/恢复到磁盘/从磁盘中恢复。在这种情况下，Tomcat 和其他容器通常只给出警告而不退出。

# c# - 如何将凸曲线拟合到一组数据点

> ID：11125740
> 
> 赞同：3
> 
> 时间：2012-06-20T18:20:23.943
> 
> 标签：c#, math, curve, curve-fitting

我有一组数据点 (x1,y1) (x2,y2) (x3,y3) 等。这些数据使得连续点的斜率大部分时间都在增加。但也有一些例外。我加载数据的软件期望斜率应该总是增加，或者换句话说，曲线应该是凸的。因此，我需要一组数据点 (x1,y1)、(x2,y2) 等，以便它删除“异常”数据点并用适当的数据点替换它们，这会导致斜率始终增加。

我打算编写一个程序（在 C# 中）来执行此操作，但我想我会在这里发布以检查这是否是一个标准问题并且可能已经存在解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:04:20.350

Solving the problem depends on the objective. You could restrict yourself to changing the Y coordinates of the points, while keeping X fixed. Then, a reasonable objective might be to minimize the sum of the absolute differences ABS(Y'-Y) between your new Y-value Y' and old value Y, for each point. (I have no idea whether this is reasonable for your problem, but it does not sound very unreasonable to me.)

Then the problem could be modelled as a linear program, see :

[http://en.wikipedia.org/wiki/Linear_programming](http://en.wikipedia.org/wiki/Linear_programming)

There are standard libraries to find the optimal solution in such cases.

# json - JSON REST Web api 的文本编码标准是什么？

> ID：11125742
> 
> 赞同：13
> 
> 时间：2012-06-20T18:20:33.017
> 
> 标签：json, rest, encoding, asp.net-mvc-4, asp.net-web-api

我正在使用 MVC4 和一些请求返回文本块构建一个 Web API，这些文本块可以包含换行符、特殊字符、中文和西班牙文文本。我应该如何转义/编码此信息以通过 api 发送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:28:31.293

像这样使用 UTF-8 编码的东西，作为一个简化的例子

```
public JsonResult Find(string term) 
{
    var items = service.Find(term);
    return Json(items,"application/json; charset=utf-8", JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T18:25:21.073

使用 UTF-8 编码文本，使用 JSON 和 HTTP 编码。够了。当您有换行符和其他特殊字符时，HTTP 编码很有用。

标准在这里 [http://www.ietf.org/rfc/rfc4627.txt?number=4627](http://www.ietf.org/rfc/rfc4627.txt?number=4627)

但是您应该知道，不同的 json 格式化程序在特殊情况下可能会产生略有不同的结果，例如在如何编码日期/时间的问题中。

使用 UTF-8 和 DataContractJsonSerializer 的示例：

```
 // Create a User object and serialize it to a JSON stream.
        public static string WriteFromObject()
        {
            //Create User object.
            User user = new User("Bob", 42);

            //Create a stream to serialize the object to.
            MemoryStream ms = new MemoryStream();

            // Serializer the User object to the stream.
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(User));
            ser.WriteObject(ms, user);
            byte[] json = ms.ToArray();
            ms.Close();
            return Encoding.UTF8.GetString(json, 0, json.Length);

        }

        // Deserialize a JSON stream to a User object.
        public static User ReadToObject(string json)
        {
            User deserializedUser = new User();
            MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
            DataContractJsonSerializer ser = new DataContractJsonSerializer(deserializedUser.GetType());
            deserializedUser = ser.ReadObject(ms) as User;
            ms.Close();
            return deserializedUser;
        } 
```

# php - 无法捕获异常

> ID：11125748
> 
> 赞同：2
> 
> 时间：2012-06-20T18:21:04.617
> 
> 标签：php, exception

我正在开发一个简单的 MVC 框架，我正在使用类的自动加载，我想用它`class_eixists()`来检查从 URI 解析的控制器名称是否确实存在并适当地响应。我从

```
$controller = "\\namespace\\controller";
if(class_exists($controller))
   $this->controllerObject = new $controller();
else
    // react appropriately 
```

如果类不存在，这最终会引发未捕获的逻辑异常。如果我的 google-fu 没有让我失望，那么这是使用自动加载和该`class_exists()`功能时的正常事件。我认为没什么大不了的，并将其包装在 try catch 中，但我仍然收到未捕获的异常，我看不出我做错了什么。

```
try {
     if (class_exists($controller))  {
        $this->controllerObject = new $controller(array_slice($parsedURI, 1));
        echo "controller is $controller<br />";
     }   
  } catch (LogicException $e) {
     $e->getMessage();
  } catch (Exception $e) {
     $e->getMessage();
  } 
```

错误输出如下。第 57 行是带有 ( `if (class_exists($controller))`) 的行。我手动更改了实际路径，因为系统管理员对公开的任何内部信息都抱有偏执。

```
Fatal error: Uncaught exception 'LogicException' with message 'Class 
Controller\Gibberish could not be loaded' in     some/path/private/webroot/assets/route.php:57 Stack trace: #0 [internal function]: 
spl_autoload('Controller\Gibb...') #1 
some/path/private/app/webroot/assets/route.php(57): class_exists('\Controller\Gib...') 
#2 some/path/private/app/webroot/index.php(32): Assets\Route-
>__construct('/add/webroot/...') #3 {main} thrown in 
some/path/private/app/webroot/assets/route.php on line 57 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:08:27.817

在我发布之前搜索了将近 2 个小时的答案，之后不到一半的时间我找到了答案。我无法捕获异常的原因是因为逻辑位于命名空间内的类的方法内。为了捕获`LogicException`它，它必须以 a 为前缀`\`来指定全局命名空间。

```
try {
   if (class_exists($controller))  {
      $this->controllerObject = new $controller(array_slice($parsedURI, 1));
      echo "controller is $controller<br />";
   }   
} catch (\LogicException $e) {
   $e->getMessage();
} 
```

我发现了另外两个具有相同问题的问题：

[PhpMailer 抛出致命异常](https://stackoverflow.com/questions/10147684/phpmailer-throwing-fatal-exceptions)

[Facebook PHP SDK 抛出无法捕获的 OAuthException](https://stackoverflow.com/questions/10402939/facebook-php-sdk-throwing-an-uncatchable-oauthexception)

# html - 如何减少 HTML 表格中的行空间

> ID：11125750
> 
> 赞同：0
> 
> 时间：2012-06-20T18:21:06.717
> 
> 标签：html

这似乎不是一个不同的要求，但只是无法完成，这是我的 html 页面：[http ://www.xiexianhui.com/baxjoomla15/index0.html](http://www.xiexianhui.com/baxjoomla15/index0.html)

如果您打开页面并查看源代码，您将看到：

```
tr.spaceUnder > td
{
  padding-bottom: -0.5em;
} 
```

用于控制表格中行之间的间距。如果我需要更多空间，它可以正常工作，但如果我需要更少的空间，它就无法工作。如何减少页面中的空间？

在某些情况下，我还需要重新调整图像大小，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:22:09.293

`padding`不能为负。将其设置为 0，尝试添加`cellpadding=0 cellspacing=0`到您的`<table>`标签，例如 `<table cellspacing=0 cellpadding=0>...</table>` 将其应用于每个表。然后，应用`margin: 0; padding: 0;`到每个表格的样式。顺便说一句，我建议您显示`td`没有图像的标签，边框宽度为 1 像素，以完全符合您的喜好。然后，当它们很好时，您可以添加图像。

**如果您希望每个图像完全适合单元格**，则需要使每个单元格的宽度总和完全相同，因为行/列的高度/宽度获取行/列中最大元素的值，除非您手动设置。

**更新** 尝试将下一行应用于您的代码：

```
$( "img" ).each( function(){ this.style.padding = 0; this.style.margin = 0; } )
$( "td" ).each( function(){ this.style.padding = 0; this.style.margin = 0; } ) 
```

这使我们更接近预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:28:18.843

你的`table`元素中有`td`元素。你应该只有 1 个，而不是 3 个表。

要删除表格的默认间距，您应该执行以下操作：

```
<table cellpadding="0" cellspacing="0"> 
```

您应该从 td 元素中删除表格，因为它们看起来毫无意义。像这样的东西：

```
<table width="780" border="0" align="center" cellspacing="0" bordercolor="#000000" id="content" name="content">
  <tr class="spaceUnder">
        <td width="300"><img src="1930.png" width="300" height="130" /></td>
        <td width="150"><img src="1931.png" width="149" height="130" /></td>
        <td width="150"><img src="1930.png" width="149" height="130" /></td>
        <td width="300"><img src="1651.png" width="300" height="130" /></td>
      </tr>

  <tr class="spaceUnder">
    <td width="150"><img src="1931.png" width="149" height="130" /></td>
        <td width="150"><img src="1931.png" width="149" height="130" /></td>
        <td width="300"><img src="1930.png" width="300" height="130" /></td>
        <td width="150"><img src="1931.png" width="149" height="130" /></td>
        <td width="150"><img src="1931.png" width="149" height="130" /></td>
   </tr>
</table> 
```

# css - 诺基亚 lumia 的响应式设计技巧

> ID：11125762
> 
> 赞同：2
> 
> 时间：2012-06-20T18:21:48.963
> 
> 标签：css, windows-phone-7, nokia, responsive-design

我正在为一些大型网站编写响应式布局，我想在最流行的移动设备上对其进行测试，至于 iphone、ipad 有很多信息，我可以在例如 ios 模拟器上对其进行测试，然后关于 nokia lumia 没有任何用处信息，我什至不知道那里的网络浏览器是什么，有什么地方可以找到有关它的信息吗？您有为诺基亚 lumia 开发 www 的经验吗？

感谢您的任何帮助 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:02:07.120

您可以在[规格页面](http://www.developer.nokia.com/Devices/Device_specifications/?filter1=windowsphone)上获取与 Lumia 设备相关的所有信息。[诺基亚维护](http://www.developer.nokia.com/Resources/Library/Design_and_UX/#!designing-for-nokia-platforms/designing-for-windows-phone-7.html)的指南和教程也很不错，但它们并不特定于 Web 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:18:42.377

看起来，视口元标记：

```
<meta name="viewport" content="width=device-width"> 
```

在为任何移动设备开发响应式设计中最为关键，就像一根魔杖，它解决了我的大部分问题。希望它对某人有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T12:17:51.667

此媒体查询在任何诺基亚 Lumia Mobile 中都能正常工作。

```
@media only screen 
and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : landscape) and (-ms-high-contrast: none), (-ms-high-contrast: active) {

// your code goes here

} 
```

并为 windows mobile 中的表格元素添加 css

```
table-layout: fixed 
```

# coldfusion - 尝试使用 CFMail 发送带有附件的邮件时出错

> ID：11125768
> 
> 赞同：1
> 
> 时间：2012-06-20T18:22:16.590
> 
> 标签：coldfusion, coldfusion-9, cfmail

我正在尝试发送一封带有附件的电子邮件，但我收到了一个我不熟悉的错误。

这是我的`<cfmail>`标签代码：

```
<CFMAIL FROM="test@test.com" TO="test2@test2.com"  SUBJECT="Test" type="HTML">
<P> This is the attachments test</P>
<p> For this test to be successful, we need to receive some file attachments with this email</p>
  <cfsilent>
    <cfloop query="result">

        <cfmailparam file="#result.NAME#" disposition="attachment">

    </cfloop>
  </cfsilent>
</cfmail> 
```

这是错误：

```
The resource 2011093475839213.txt was not found.

**The root cause was: ''.**

The error occurred in E:\sites\Example.Com\FolderExistsTest.cfm: line 71
69 :     <cfloop query="result">
70 :       
71 :         <cfmailparam file="#result.NAME#" disposition="attachment" type="text">
72 :     
73 :     </cfloop> 
```

请注意，我尝试附加的文件确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:34:51.123

这是指定文件路径的正确方法。

```
 <cfmailparam file="#CurrentDirectory#\#result.NAME#" disposition="attachment" type="text"> 
```

# ios - iOS - 可变数组问题？

> ID：11125775
> 
> 赞同：1
> 
> 时间：2012-06-20T18:22:31.870
> 
> 标签：ios, nsmutablearray

我一直有一个非常奇怪的问题。我有一个可变数组，它声称是可变的并声称响应 addObject:，但崩溃说它不可变。

这是代码：

```
NSLog(@"Can add object: %d", [[MySingleton sharedInstance].myArray respondsToSelector:@selector(addObject:)]);
if([[MySingleton sharedInstance].myArray isKindOfClass:[NSMutableArray class]])[[MySingleton sharedInstance].myArray addObject:objectToAdd];
else NSLog(@"Not mutable"); 
```

现在，如果我将它设置为可变副本，它就可以工作。

```
NSLog(@"Can add object: %d", [[MySingleton sharedInstance].myArray respondsToSelector:@selector(addObject:)]);
if([[MySingleton sharedInstance].myArray isKindOfClass:[NSMutableArray class]])[[MySingleton sharedInstance].myArray.mutableCopy addObject:objectToAdd];
else NSLog(@"Not mutable"); 
```

这是为什么？为什么它声称是可变的并且能够添加对象：，但除非我使用可变副本，否则它会崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:19:52.633

我希望这应该会更好一些。也许如果我写得足够多，现在这将是一个正确的答案。答案在主帖的评论中。我需要检查 isMemberOfClass 来检查它是否继承了类方法，而不是检查它是否属于某个类类型，因为它是可变的，但没有继承可变方法。

# algorithm - SCAN 和 LOOK 磁盘调度

> ID：11125776
> 
> 赞同：2
> 
> 时间：2012-06-20T18:22:48.277
> 
> 标签：algorithm, scheduling, disk

假设磁盘是空闲的，但有一个读头在空闲之前的方向。（假设读头在第 5 扇区，之前读过第 1 扇区，但现在没有请求。）当请求到来时，读头会继续向之前的方向前进，还是可以选择另一个方向？（假设一个请求来自第 4 扇区，在示例中，它是否必须继续正向，或者它是否可以立即开始反转？） LOOK 会简单地返回，但 SCAN 是否应该一直走到最后？

另外，假设我正在向外（从 1 到 100）前进并且我正在前往第 90 扇区但在我到达那里之前出现另一个请求，它位于 mi 当前位置和第 90 扇区之间，我是否阅读该请求然后前往 90，或者我要一直跑到 90，然后再回去吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:46:43.677

对于您的第一个场景（您没有挂起的 I/O，磁盘位于第 5 列）向外移动并且对第 4 列的请求来了：

*   使用 SCAN 时，磁盘的磁头仍需要转到最后一个柱面，然后返回第 4 柱面
*   使用 LOOK，因为没有更多请求，它可以将方向反向到第 4 缸的服务请求

在您的第二种情况下（您正朝 90 号气缸前进，但在您到达那里之前，您的当前位置和 90 号气缸之间会出现另一个请求）：

在这种情况下，无论是 SCAN 还是 LOOK，您都可以为位于当前头部位置下的所有等待服务的请求提供服务。因此，在您的示例中，它将在服务第 90 缸的请求之前服务第二个请求。

# php - 如何在 PHP 中打印或回显数组索引

> ID：11125785
> 
> 赞同：8
> 
> 时间：2012-06-20T18:23:09.363
> 
> 标签：php, arrays, printing, echo

我正在努力完成我的任务，这是现在要做的最后一件事。

我知道如果我想打印整个数组，我可以使用`foreach`许多不同的方法来打印整个数组

```
foreach($v as $k=>$variable_name) { echo "<p> This is index of $k. value is $variable_name <br/></p>";} 
```

但是如果我只想单独打印每个索引呢？

我想在每个表单下都显示错误消息，这就是为什么我希望每个表单都分开。

我试过了`$v[0]`，没有出现。

有什么技巧或我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:27:14.307

[array_keys()](http://php.net/manual/en/function.array-keys.php)将打印数组中的索引。

```
print_r(array_keys($arr)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T18:27:11.343

如果您在谈论关联数组，则需要直接获取索引：

例子：

```
$array = array ('test' => 'value1', 'test2' => 'value2');   
echo $array['test']; // value1 
```

您可以执行 print_r($array) 以查看格式正确的数组结构：

```
<pre>
<?php print_r($array);?>
</pre> 
```

相反，您正在做的是通过其数字索引获取一个值，例如

```
$array = array('test','test2','test3');
echo $array[0];  // test 
```

[进一步说明，您可以使用array_key_exists()](http://php.net/manual/en/function.array-key-exists.php)预先检查密钥是否存在：

```
var_dump(array_key_exists('test2',$array));  // (bool) TRUE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T18:30:01.673

如果您正在使用`foreach`循环，那么您可能正在使用关联数组（即`$v['inputName']`）因此，使用`$v[0]`不会起作用，因为索引不是由数字定义的 - 它们是由字母定义的。您可以使用`foreach`循环将所有值关联到编号索引，然后像这样使用它。

```
$x = array();
foreach($v as $key=>$value) {

   $x[count($x)] = $key;

}

echo $x[0]; 
```

在那种情况下`$x[0]`会起作用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-20T18:37:05.657

您可以使用 php [array_keys](http://php.net/manual/en/function.array-keys.php)函数来获取所有键。如果它的关联数组，

```
$array = array("color" => array("blue", "red", "green"),
               "size"  => array("small", "medium", "large"));
print_r(array_keys($array)); 
```

输出将是：

```
Array
(
    [0] => color
    [1] => size
) 
```

另一种方法是：

```
if(is_array($v){
    foreach($v as $k=>$value) { 
         echo "<br/>". $k ;  // $k is the key 
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T18:28:54.903

我相信你正在寻找这个： http: [//php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)

尝试（从上面的页面）：

```
<?php
  $array = array(0 => 100, "color" => "red");
  print_r(array_keys($array));

  $array = array("blue", "red", "green", "blue", "blue");
  print_r(array_keys($array, "blue"));

  $array = array("color" => array("blue", "red", "green"),
               "size"  => array("small", "medium", "large"));
  print_r(array_keys($array));
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T18:26:02.270

使用[print_r](http://php.net/manual/en/function.print-r.php)函数打印数组：

```
print_r($array) 
```

# jquery - 使用 jQuery 函数向 div 添加标签的故障

> ID：11125787
> 
> 赞同：0
> 
> 时间：2012-06-20T18:23:16.500
> 
> 标签：jquery

我必须用某人编写的这段代码来修复一个小故障，但我对 jQuery 的熟练程度不足以自己解决。也许这里有人可以帮助我。首先，我将尝试解释应该发生的事情......

基本上这个想法是你有一个人的名单，他们的名字旁边有复选框。在它们下方，您有六个可用的插槽（空 div）。当您选中一个框时，该人的姓名将插入到其中一个空 div 中。最多显然是六个。

棘手的部分是如果您取消选中您选中的框，名称应该从插槽中消失，并且它下面的所有名称都应该向上移动一个插槽以填补空白。这就是故障发生的地方。如果您连续两次取消选中一个框，第二次没有任何反应，或者第三次，等等......

这是我们目前拥有的 jQuery 函数：

```
$(function(){
$('input:checkbox').click(function(){
    var $cb = $(this),
        id  = this.id, // No need for `attr`
        member,
        prev;
    if(this.checked){  // No need for `attr`
        $("div[id^=member]").each(function() {
            if (!this.firstChild) {
                // It's empty, use it
                $(this).text($('label[for="'+ id +'"]').text()).attr("data-contents", id);
                return false; // Done
            }
        });
    }
    else {
        member = $('div[data-contents="' + id + '"]');
        if (member[0]) {
            member.empty('').removeAttr('data-contents');
            prev = member[0];
            member.nextAll().each(function() {
               if (!this.firstChild) {
                   return false; // Done
               }
               prev.appendChild(this.firstChild);
               prev = this;
            });
        }
    }
});
}); 
```

这是其中一个复选框和一些 div 的示例：

```
<input type='checkbox' name='check[]' id='155' value='155'/>
<label for='155'>John Doe</label>

<input type='checkbox' name='check[]' id='156' value='156'/>
<label for='156'>John Smith</label> 
```

和

```
<div id="member1" class="member"></div>
<div id="member2" class="member"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:38:52.423

你的脚本中有一些奇怪的不像 jQuery 的行为，但我们现在就让它过去吧。

正如我在浏览器的 DOM 检查器中看到的那样，问题是当您取消选中某个框时，它可能会将第二个 DIV 的内容重新分配给第一个 DIV，但不会同时重新分配该`data-contents`属性。

修改后的代码：

```
 prev.appendChild(this.firstChild);
 $(prev).attr('data-contents', $(this).attr('data-contents'));
 $(this).removeAttr('data-contents');
 prev = this; 
```

[http://jsfiddle.net/q6Vg9/](http://jsfiddle.net/q6Vg9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:17:22.960

```
var names = {};
    $(function () {
        $('[type=checkbox]').on('change', function (e) {

            // index of the checkbox
            var index = $('[type=checkbox]').index(this);

            // modify your names array
            if ($(this).attr('checked') == 'checked') { // add
                names[$('label').eq(index).text()] = 'dummy';
            } else { // remove
                delete names[$('label').eq(index).text()];
            }

            // clear all members
            $('.member').text('');

            // fill all members (if any)
            index = 0;
            for (name in names) {
                $('.member').eq(index++).text(name);
            }

            return false;
        });
    }); 
```

基本上，代码所做的是将所有检查过的名称存储在一个数组中。如果未选中名称，则将其从数组中删除。每次所有 div 都被清除并重新填充新数据。

你可以在这里查看：http: [//jsfiddle.net/NanYb/](http://jsfiddle.net/NanYb/)

我意识到我的代码与你的完全不同，但我希望你明白这一点。

# html - 无法在 Firefox 12 中换行

> ID：11125798
> 
> 赞同：0
> 
> 时间：2012-06-20T18:24:14.320
> 
> 标签：html, css

我正在尝试在表格中显示一段长文本（我从数据库中提取）。我在 Chrome、IE、Safari 或 Opera 中包装文本没有问题，但我找不到适用于 Firefox 的解决方案。我最初通过在表格单元格中插入文本来尝试这样做，但这不适用于任何浏览器，但是当我在 div 中插入文本时，这解决了问题。

我使用的 CSS 和 HTML 如下：

```
.test
{

    width: 100%;
    word-wrap: break-word;

}

<td>

    <div class = 'test'>

        ...Long Word Goes Here...

    </div>

</td> 
```

div 嵌套在表中的事实是否与它有任何关系（也许它正在继承父属性？），因为我在 Firefox 12 中看到了一个类似的示例：http: [//www.w3schools.com/css3 /tryit.asp?filename=trycss3_word-wrap](http://www.w3schools.com/css3/tryit.asp?filename=trycss3_word-wrap)

请问有谁知道如何解决这个问题？这似乎是与 Firefox 相关的一个非常常见的问题。我在网站上查看了几个与此问题类似的问题，但我一直无法找到解决方案。

任何帮助深表感谢，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:30:24.753

您的表格和单元格的样式如何？有两种非常不同的算法：有和没有**`table-layout: fixed;`**。
如果您看到`td`处理这个长单词的过程越来越大，请尝试将此声明添加到 table 中，并在`td`this 的父级上使用您想要的宽度`div`。

如果没有小提琴或我们可以重现您的问题的示例，很难说出更多信息，除了`word-wrap: break-word;`在 Firefox 和其他地方的一般情况下工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:55:07.567

我实际上意识到我的问题是什么。我正在使用包含在 pre 标记中的预格式化文本，这导致了问题。以下链接是我的问题的解决方案：http: [//css-tricks.com/snippets/css/make-pre-text-wrap/](http://css-tricks.com/snippets/css/make-pre-text-wrap/)

对此疏忽表示歉意，并感谢您帮助我！

# mysql - MySQL 错误 #1005（代码 150）

> ID：11125801
> 
> 赞同：0
> 
> 时间：2012-06-20T18:24:19.840
> 
> 标签：mysql, mysql-error-1005

我试过创建这个表，但我没有尝试过 FK 的作品。

```
CREATE TABLE `tb_AutSituacao` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `Nome` varchar(50) CHARACTER SET latin1 NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8

CREATE TABLE `tb_AutHistorico` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `Situacao` int(11) NOT NULL,
 `Data` date NOT NULL,
 `Agente` int(11) NOT NULL,
 `Proposta` int(11) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `AutHistorico_Situacao` (`Situacao`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8

ALTER TABLE `tb_AutHistorico` ADD FOREIGN KEY ( `Situacao` ) REFERENCES `sicor`.`tb_AutSituacao` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT; 
```

我总是得到“#1005 - 无法创建表 'tablename' (errno: 150)”。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:28:40.887

```
$ perror 150
MySQL error code 150: Foreign key constraint is incorrectly formed 
```

修正你的`FOREIGN KEY`定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-17T19:09:00.857

您的外键约束定义存在问题（请参阅[http://dev.mysql.com/doc/refman/5.7/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.7/en/innodb-foreign-key-constraints.html) - 调试的最后一段）

发生此错误时，定义本身不正确（语法错误）或引用的内容存在问题。你的语法是正确的，什么是引用是正确的，所以它很可能是架构引用。

我可以很好地运行这些语句，但我必须在创建表名前加上模式名称。否则，MySQL 将假定您正在尝试为您当前使用的数据库创建表。请参阅以下修改后的语句：

```
CREATE TABLE `sicor`.`tb_AutSituacao` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `Nome` varchar(50) CHARACTER SET latin1 NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

CREATE TABLE `sicor`.`tb_AutHistorico` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `Situacao` int(11) NOT NULL,
 `Data` date NOT NULL,
 `Agente` int(11) NOT NULL,
 `Proposta` int(11) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `AutHistorico_Situacao` (`Situacao`),
 CONSTRAINT `FK_Situacao` FOREIGN KEY (`Situacao`) REFERENCES `sicor`.`tb_AutSituacao` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8; 
```

另请注意，您不必在创建表后定义约束，而是可以将其包含在创建定义中，如上所示。

# sql - Windows Azure 上的 Web 应用程序和 WCF 服务部署

> ID：11125806
> 
> 赞同：2
> 
> 时间：2012-06-20T18:24:38.830
> 
> 标签：sql, wpf, wcf, azure, azure-sql-database

我有一个现有的应用程序，它包含以下部分
1- 客户 Web 应用程序
2- 客户 Web 服务
3- 管理员 WPF 应用程序
4- 管理员 Web 服务

我的任务是将应用程序和服务转换为 Azure 平台并进行部署。我有以下问题，如果有人帮助我，我将不胜感激

1- Web 应用程序正在使用 Memberhsip 提供程序。如何处理 ASPNETDB.MDF？
2- Web 应用程序正在使用会话。我可以直接将应用程序移动到 Azure 还是我需要先做一些事情？
3- Web 服务没有 *.asmx 文件并且正在使用服务主机。如何在 Azure 上部署它们？
4- 因为我有 2 个 Web 服务，我将不得不单独部署它们。我可以在单个 Azure 主机中部署 2 个 Web 服务和 1 个 Web 应用程序吗？
5-我可以部署 WPF 应用程序吗？

注意：所有这些应用程序的数据库都是相同的，将部署在 Sql Azure 上。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:19:15.013

要回答问题 1 和 2，我建议您查看[Azure Providers](http://azureproviders.codeplex.com/)，它们允许您在 Windows Azure 中使用 Table 和/或 Blob Storage 使用 MembershipProvider 和 Session。除此之外，还有其他利用[SQL Azure](http://support.microsoft.com/kb/2006191/en-us) (MembershipProvider) 和[AppFabric 缓存](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic3.aspx)(Session) 的实现。

那么对于第 3 个问题，使用服务主机部署 Web 服务应该不是问题。实际上，当您将 Web 角色部署到 Windows Azure 时，它​​只是在 Windows Server 2008 (R2) 实例上的 IIS 中运行，并且可以与服务主机一起正常工作（我假设您的意思是[ServiceHostFactory](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.servicehostfactory.aspx)）。

您的第四个问题是关于部署多个 Web 服务。这取决于您的需求和预算。一种选择是将 Web 应用程序和 2 个 Web 服务分别部署在一个 Web 角色上。要获得 SLA，这意味着您需要 6 个实例，但您将能够独立扩展每个组件。另一方面，您也可以将所有应用程序组合到一个 Web 角色中（您的初始成本会更低）。这可以通过在单个 Web 角色中使用多个虚拟应用程序来完成（如果您愿意，可以将其与主机标头结合使用）：http: [//blog.structuretoobig.com/post/2012/01/17/One-Azure -Web-Role-Multiple-Websites.aspx](http://blog.structuretoobig.com/post/2012/01/17/One-Azure-Web-Role-Multiple-Websites.aspx)

关于部署 WPF 应用程序的最后一个问题，这取决于。您需要考虑一些事项。如果您的 WPF 应用程序连接到您的 SQL Azure 数据库，最好从固定 IP 访问它，因为您需要[修改 SQL Azure 防火墙](http://msdn.microsoft.com/en-us/library/windowsazure/ee621782.aspx)以允许外部连接，这基于 IP（或 IP 范围） .

同样重要的是要注意 WPF 应用程序是客户端应用程序，它不能在 Windows Azure 中运行（您可以通过远程桌面，但这不是真正的解决方案 imo）。无论如何，您仍然可以“欺骗”用户认为它在云中运行，或者至少可以通过您的 Web 角色访问它：

*   您可以将其部署为 Web 角色中的[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d.aspx)应用程序
*   您可以将其转换为[XBAP](http://msdn.microsoft.com/en-us/library/aa970060.aspx)应用程序并将其托管在您的 Web 角色中，这样用户将永远不会离开浏览器，并且看起来就像在线托管应用程序一样。

# iphone - iPhone UINavigationBar 向上/向下移动

> ID：11125811
> 
> 赞同：0
> 
> 时间：2012-06-20T18:25:17.803
> 
> 标签：iphone, ios, uitableview, uinavigationcontroller, uinavigationbar

我在 UINavigationController 中有一个 UITableView。默认情况下，它在 iOS 上的 UINavigationBar 是固定的。但是我见过一些应用程序，当用户向下滚动时，UINavigationBar 会向上移出屏幕。我可以通过手动将 UINavigationBar 添加到 UITableView 的标题视图来实现这一点。但是，UINavigationBar 也会随着 UITableView 向下移动和缩回。我怎样才能使 UINavigationBar 只向上移出屏幕但从不向下移动到顶部以下？任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:39:18.040

您必须`-(void)scrollViewDidScroll:(UIScrollView *)scrollView`在 UITableView 委托上实现该方法，计算将 UINavigationBar（如果有）移动多少并将其向上移动。当表格视图向下移动时，它将向上移动。

EGOTableViewPullRefresh 中使用了类似的技术来动画刷新控件，[你可以在 GitHub 上找到它](https://github.com/enormego/EGOTableViewPullRefresh/blob/master/EGOTableViewPullRefresh/Classes/View/EGORefreshTableHeaderView.m#L185)。

# .net - 修改了 WPFToolkit，现在它不适用于每台计算机

> ID：11125816
> 
> 赞同：1
> 
> 时间：2012-06-20T18:25:30.190
> 
> 标签：.net, wpf, vb.net

我们必须对 WPFToolkit.dll 进行修改以添加一些水印文本。现在，当我们在某些计算机上安装它时（我找不到它们有什么不同），我明白了

> 无法加载文件或程序集 'WPFToolkit, Version=3.5.40128.1, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）标记文件“MaintenanceDIRECTE；component/menuprincipal.xaml”中的错误。

最后一部分（xaml 文件的名称）是主要形式，并在某些时候使用水印。

有没有办法防止这种情况发生，即强迫他们使用我们提供的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:21:11.077

原来答案只是简单地更改版本号，这样它就不会被识别为相同，因此不会导致这个问题......

# javascript - 将 [object HTMLCollection] 转换为 javascript 中的字符串

> ID：11125825
> 
> 赞同：2
> 
> 时间：2012-06-20T18:26:23.200
> 
> 标签：javascript, html, rest, zimbra

我正在尝试使用从 XML 文件中提取的数据`getElementByTagName`并返回`HTML Collection Object`，但我需要这些数据来发送 REST 请求，因此我需要将 HTML 集合对象转换为字符串。如何做呢？

这里有更多信息：

```
com_zimbra_om.prototype._responseHandler=
        function(response){
                try{
                    sid = response.xml.getElementsByTagName("session_id");
                    this.login_user();
                    }catch(e){
                            this._showErrorMsg(e);
                            } 
```

使用此功能，我试图`session_id`从 REST 响应中获取。这里`sid`（全局变量）是 HTML 集合对象。现在，当我尝试在下一个函数中使用它时：

```
com_zimbra_om.prototype.login_user = function(){
var url = selected_server + 'services/UserService/loginUser?SID=' +
                                    sid + '&username='+
                                    selected_username +
                                    '&userpass=' + 
                                    selected_password;
                var request_url = ZmZimletBase.PROXY + AjxStringUtil.urlComponentEncode(url); 
```

所以在这里我使用`sid`了我需要的字符串。

那么我应该如何将 HTML 集合对象转换为字符串？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T18:31:59.113

有了这些信息，我只能去

```
var objectHTMLCollection = document.getElementsByTagName("div"),
    string = [].map.call( objectHTMLCollection, function(node){
        return node.textContent || node.innerText || "";
    }).join(""); 
```

# stream - 无缓冲流的行为类似于行缓冲

> ID：11125826
> 
> 赞同：0
> 
> 时间：2012-06-20T18:26:33.137
> 
> 标签：stream, filestream, bufferedinputstream

我正在阅读有关流的信息，发现我们可以通过使用 setvbuf() 函数来控制流...它是在行缓冲模式下编写的，当遇到换行符并且在无缓冲时没有缓冲时，流将数据发送到文件。 ..所以我写了以下代码...

```
#include<stdio.h>

int main()
{

setvbuf(stdin, NULL, _IONBF, 40);
setvbuf(stdout, NULL, _IONBF, 40);
while(1)
{
char a[40];
int n;
n=fread(a, 1, 4, stdin);

if(n>0)
fwrite(a, 1, n, stdout);
}
return 0;
} 
```

所以我认为因为这些是无缓冲的流，所以输入应该在我写入屏幕后立即发送到标准输出......但是程序等待我在写完每一行后按回车然后只有输出出现在屏幕上（如fwrite 的结果）...我的问题是为什么程序在这些是无缓冲的流时等待输入（即换行符）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:31:10.647

我相信这是由于您的环境中的 shell 是如何工作的：您输入的数据在您按 Enter 之前不可用`stdin`，因此`fread`它会阻塞，直到它可以从流中读取某些内容

想想如果 shell 将每个字符都传递给缓冲区，你需要如何处理退格等

# python - 如何在 PyOpenGL 中使用 glBufferData()？

> ID：11125827
> 
> 赞同：5
> 
> 时间：2012-06-20T18:26:36.187
> 
> 标签：python, opengl, pyopengl, vertex-buffer

如何在 PyOpenGL python 绑定到 OpenGL 中使用 glBufferData()？

当我运行以下代码时

```
import sys
from OpenGL.GL import *
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtOpenGL import *

class SimpleTestWidget(QGLWidget):

    def __init__(self):
        QGLWidget.__init__(self)

    def initializeGL(self):
        self._vertexBuffer = glGenBuffers(1)
        glBindBuffer(GL_ARRAY_BUFFER, self._vertexBuffer)
        vertices = [0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5]
        glBufferData(GL_ARRAY_BUFFER, vertices, GL_STATIC_DRAW)    # Error

    def paintGL(self):
        glViewport(0, 0, self.width(), self.height())
        glClearColor(0.0, 1.0, 0.0, 1.0)
        glClear(GL_COLOR_BUFFER_BIT)

        glEnableClientState(GL_VERTEX_ARRAY)
        glBindBuffer(GL_ARRAY_BUFFER, self._vertexBuffer)
        glVertexPointer(2, GL_FLOAT, 0, 0)
        glColor3f(1.0, 0.0, 0.0)
        glDrawArrays(GL_QUADS, 0, 4)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    w = SimpleTestWidget()
    w.show()
    app.exec_() 
```

然后调用 glBufferData() 会导致错误消息

```
Haven't implemented type-inference for lists yet 
```

该代码应该在绿色背景上绘制一个红色矩形。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:24:57.387

作为一种解决方法，在支持列表之前，将顶点作为 numpy 数组传递：

```
vertices = numpy.array([0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5], 
                       dtype='float32') 
```

glVertexPointer 调用应该是`glVertexPointer(2, GL_FLOAT, 0, None)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-14T15:27:51.187

您还可以使用*数组*模块的*数组*对象：

 *```
from array import array
vert=[0.0,0.0,0.0,
      1.0,0.0,0.0,
      1.0,1.0,0.0,
      0.0,1.0,0.0]

ar=array("f",vert)
glBufferData(GL_ARRAY_BUFFER, ar.tostring(), GL_STATIC_DRAW) 
```

[https://docs.python.org/2/library/array.html](https://docs.python.org/2/library/array.html)*

# java - 从桌面应用程序启动浏览器

> ID：11125828
> 
> 赞同：0
> 
> 时间：2012-06-20T18:26:56.063
> 
> 标签：java, windows, browser, java-5

> **可能重复：**
> [让 java gui 在 Web 浏览器中打开网页](https://stackoverflow.com/questions/602032/getting-java-gui-to-open-a-webpage-in-web-browser) - 这完全不是重复的。我希望能够在浏览器中引用一个选项卡，而不仅仅是启动浏览器。

我有一个桌面应用程序，它有一个按钮，该按钮带有一个打开具有特定 URL 的新浏览器的操作。每次我按下按钮时，它都会打开一个新窗口/选项卡。我希望它刷新窗口/选项卡，如果它已经打开并且 URL 相同，而不是总是打开一个新的。启动初始窗口的代码非常简单：

```
final String errMsg = "Error attempting to launch web browser";
String osName = System.getProperty("os.name"); 
try{ 
    if (osName.startsWith("Windows")) 
        Runtime.getRuntime().exec( "rundll32 url.dll,FileProtocolHandler " + "www.stackoverflow.com");
}catch(Exception e){
    JOptionPane.showMessageDialog(null, errMsg + "\n" + e.toString());
} 
```

我在想也许我可以命名窗口/选项卡，所以当代码启动时，它会尝试查找名称并在存在时刷新它。但我很难找到这样的解决方案。此外，我目前的做法是否可以接受？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:46:50.167

将网络服务器组件添加到您的应用程序。然后启动浏览器指向您的网络服务器生成的页面，并在单击按钮时使用 AJAX 刷新浏览器内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:48:01.100

您可以以此为基础：

[让java gui在网络浏览器中打开网页](https://stackoverflow.com/questions/602032/getting-java-gui-to-open-a-webpage-in-web-browser)

以非操作系统特定的方式打开浏览器。

它可能不会让您对浏览器进行那种级别的控制。

您是否考虑过使用 JeditorPane，或者如果您需要额外的 javascript 支持，包括 javafx webview（基于 webkit）： [Integrating JavaFX 2.0 WebView into a Swing Java SE 6 Application](https://stackoverflow.com/questions/8374365/integrating-javafx-2-0-webview-into-a-swing-java-se-6-application)

# java - ActiveMQ - 如何检测非活动主题

> ID：11125829
> 
> 赞同：0
> 
> 时间：2012-06-20T18:27:01.767
> 
> 标签：java, activemq

我在 ActiveMQ 中使用带有简单生产者和消费者的非持久主题。生产者有时可能处于空闲状态，不发送任何消息。

我想在消费者端检测到这一点（主题中没有消息）并通知用户。

我该怎么做呢？找不到这方面的任何信息。

谢谢阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:08:52.047

消费者订阅主题。如果消费者没有收到任何消息，则意味着生产者处于空闲状态。与队列不同，主题中的消息本质上是瞬态的（忽略持久订阅的细节）。

每次从主题收到消息时，让您的消费者更新时间戳。此外，有一个单独的线程定期监视时间戳以通知用户时间戳是否早于 X 毫秒。

# postgresql - Postgresql 中的唯一行到列

> ID：11125830
> 
> 赞同：1
> 
> 时间：2012-06-20T18:27:02.260
> 
> 标签：postgresql, pivot, unpivot

我有按如下排序的数据表：

```
Item    |   Sample  |   Value   |
---------------------------------
Part A  |   Top     |   1.0     |
Part A  |   Bottom  |   4.0     |
Part A  |   Left    |   3.0     |
Part A  |   Right   |   2.0     |
Part A  |   Center  |   5.0     |
Part B  |   Top     |   6.0     |
Part B  |   Bottom  |   1.0     |
Part B  |   Left    |   1.0     |
Part B  |   Right   |   5.0     |
Part B  |   Center  |   9.0     |
Part C  |   Top     |   7.0     |
Part C  |   Bottom  |   5.0     |
Part C  |   Left    |   1.0     |
Part C  |   Right   |   2.0     |
Part C  |   Center  |   1.0     | 
```

我正在尝试对其进行进一步的统计分析。对于这些计算，理想的数据输出如下：

```
Item    |   Top     |   Bottom  |   Left    |   Right   |   Center  |
---------------------------------------------------------------------
Part A  |   1.0     |   4.0     |   3.0     |   2.0     |   5.0     |
Part B  |   3.0     |   1.0     |   1.0     |   5.0     |   9.0     |
Part C  |   7.0     |   5.0     |   1.0     |   2.0     |   1.0     | 
```

我相信在 MSSQL 中您可以使用 PIVOT 或 UNPIVOT 函数来完成此操作，但我不确定在 Postgresql 中。我发现的所有类似解决方案似乎都含糊不清。任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:40:35.810

为此使用[tablefunc](http://www.postgresql.org/docs/current/interactive/tablefunc.html)扩展的`crosstab()`功能。

我最近发布了多个带有链接和详细说明的示例。[尝试搜索](https://stackoverflow.com/search?q=%5Bpostgresql%5D%20user:939860%20crosstab&submit=search)。

# android - 更改系统亮度时闪烁

> ID：11125833
> 
> 赞同：0
> 
> 时间：2012-06-20T18:27:10.583
> 
> 标签：android, screen, brightness

我的应用程序是一个简单的“Brightness Changer”，它也改变了系统亮度（什么不容易实现：D）。
我实际上设置了所有东西并且它工作正常......除了一个小烦人的事情......每次亮度改变屏幕首先“闪烁”到最高亮度（如100％光）并且在半秒左右后，它更改为正确的亮度。

示例：系统亮度应为 120： 1\. 更改为 255（最大值），半秒更改为 120。

这是我的两个类的代码。Dummy 类用于“重置”（应用亮度更改所必需的。）

编辑：顺便说一句。我认为问题是“lp.screenBrightness = 100/100.0f;” 在虚拟活动中。但是没有它它就行不通：/

* * *

*测试.java*

```
public class Test extends Activity
{
    SeekBar seekbar;
    TextView value;
    TextView debug;
    Button button1;
    Button button2;
    Button button3;

    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        value = (TextView) findViewById(R.id.textview2);
        debug = (TextView) findViewById(R.id.textview3);
        seekbar = (SeekBar) findViewById(R.id.seekbar);
        button1 = (Button) findViewById(R.id.button1);
        button2 = (Button) findViewById(R.id.button2);
        button3 = (Button) findViewById(R.id.button3);

        seekbar.setOnSeekBarChangeListener( new OnSeekBarChangeListener()
        {
            public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
            {
                // TODO Auto-generated method stub
                int brightness = progress+1;
                double b = brightness/2.55;
                double c = Math.round(b*100)/100;
                int percent = (int) c;
                if (percent==0) {
                    value.setText("Lightlevel: !MIN!");
                }else if (percent==100){
                    value.setText("Lightlevel: !MAX!");
                }else{
                    value.setText("Lightlevel: "+percent+"%");
                }
                debug.setText("int brightness: "+brightness+" / double b:"+b+" / double c: "+c+" / int percent: "+percent);
                Settings.System.putInt(getContentResolver(),Settings.System.SCREEN_BRIGHTNESS, brightness);
            }

            public void onStartTrackingTouch(SeekBar seekBar)
            {
                // TODO Auto-generated method stub
                Intent in = new Intent(Test.this,DummyBrightnessActivity.class);
                startActivity(in);
            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }
        });

        button1.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Settings.System.putInt(getContentResolver(),Settings.System.SCREEN_BRIGHTNESS, 1);

                Intent in = new Intent(Test.this,DummyBrightnessActivity.class);
                startActivity(in);
            }

        });

        button2.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Settings.System.putInt(getContentResolver(),Settings.System.SCREEN_BRIGHTNESS, 127);

                Intent in = new Intent(Test.this,DummyBrightnessActivity.class);
                startActivity(in);
            }

        });

        button3.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Settings.System.putInt(getContentResolver(),Settings.System.SCREEN_BRIGHTNESS, 255);

                Intent in = new Intent(Test.this,DummyBrightnessActivity.class);
                startActivity(in);
            }

        });
    }
} 
```

*DummyBrightnessActivity.java*

```
public class DummyBrightnessActivity extends Activity{

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.dummy);

        WindowManager.LayoutParams lp = getWindow().getAttributes();
        lp.screenBrightness = 100/100.0f;
        getWindow().setAttributes(lp);

        Timer timer2 = new Timer();
        timer2.schedule(new TimerTask() {

           public void run() {

              finish();

           }

        }, 500);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:34:52.490

回答我自己的问题以备将来使用。

问题真的是`lp.screenBrightness = 100/100.0f;`。所以我把一些变量放在`intent`其中有正确的值`brightness`，所以我可以让它像`lp.screenBrightness = brightness;`。

我知道这有点短，但如果有人想了解更多，请在评论中提问。

# python - Django 管理表单未显示所有实例数据

> ID：11125835
> 
> 赞同：0
> 
> 时间：2012-06-20T18:27:12.713
> 
> 标签：python, django, django-admin

我的 django 管理表单没有显示给定对象数据的正确初始值。我尝试修改表单以在加载时显式设置初始值，但这也没有效果。我的代码如下所示：

```
DISCOUNT_OVERRIDE_CHOICES = (
        (None, ""),
        (Decimal('10'), _('10%')),
        (Decimal('20'), _('20%')),
        (Decimal('30'), _('30%')),
        (Decimal('40'), _('40%')),
        (Decimal('50'), _('50%')),
    )
    self.fields['discount'].choices = \
            DISCOUNT_OVERRIDE_CHOICES

    if self.instance.discount:
        self.initial['discount'] = \
                self.instance.discount 
```

上面的代码是我稍后在适当的 Admin 模型中使用 form = MyForm 调用的表单的一部分。发生的情况是管理页面将正确加载并显示所有适当的数据，但“折扣”字段的初始值将始终为空字符串，无选项，并且永远不会准确表示与对象一起存储的折扣百分比其数据填充表单。该字段也是唯一发生这种情况的字段，即使我不覆盖可用的选项，问题仍然存在（在这种情况下，总是在页面加载时选择 10% 的选项）

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:30:33.003

您的这部分代码是错误的

```
self.initial['discount'] = \
                self.instance.discount 
```

你应该做

```
self.fields['discount'].initial = \
                self.instance.discount 
```

# java - Java在德比查询结果中添加符号？

> ID：11125839
> 
> 赞同：1
> 
> 时间：2012-06-20T18:27:19.250
> 
> 标签：java, eclipse, unicode, internationalization, derby

我有一个 Apache Derby 数据库，我从 sql 文件中转储，但是由于某种原因，当我在 java 中查询数据库时，我在数据库中需要的一些唯一符号以其他符号为前缀，或者只是不正确. 我还使用了一种特殊的字体，所以我想知道这是否是问题所在，但是当我有一个 sqlite 数据库时，它运行得很好。当我从 ij 命令行工具查询数据库时，一切都很好。我不确定发生了什么事。

根据评论，相关信息编辑。

> 当我查询应该具有像 µ 这样的字符的列时，它会在 ¬ 上给出正确的字符（该字符就像重音，它应该出现在字符上）但 ¬ 不应该出现。

![这是一张更清晰的图片](../Images/67958ca84b9781ddf618c435ec65db7d.png)

> 在 arial 中，一种“普通”字体，查询看起来像这样“rwmklI mhlw 3 An¬µdu”，而从 ij 工具中，查询是“rwmklI mhlw 3 Anµdu”，这是正确的方式，它的方式是数据库。查询是这样的：

```
SELECT Gurmukhi, English, ShabadID FROM Shabad WHERE FirstLetterStr LIKE '%"+numberquery(text)+"%' 
```

# c# - 如何创建 C# 事件以处理来自 PostMessage() 的 MFC Windows 消息

> ID：11125843
> 
> 赞同：3
> 
> 时间：2012-06-20T18:27:35.237
> 
> 标签：c#, visual-c++, postmessage, cwnd, mfc-networking

我有一个使用 WINSOCK 的托管 C++ DLL。在接收时，它通过 PostMessage() 将自定义消息发送到 CWnd *。当从非托管 C++ 调用时，这可以正常工作。使用以下代码构造后，目标 CWnd * 在 C++ 类中注册：

```
// Registers a window (CWnd *) to receive a message when a valid
// incoming data packet is received on this UdpRetrySocket. 
void CUdpRetrySocket::RegOnReceive(CWnd *i_pOnReceiveWnd, UINT i_RecvMsgId = WM_USER_RECV_DATA_AVAIL)
{
    m_pOnReceiveWnd = i_pOnReceiveWnd;
    m_RecvMsgId = i_RecvMsgId;
} 
```

这是将消息发布到 CWnd 的代码 *

```
// If there is a pending incoming packet and there is a window
// registered for receive notification then post a message to it.
if (m_bInPktPending && m_pOnReceiveWnd != NULL)
    m_pOnReceiveWnd->PostMessage(m_RecvMsgId,
                                 (WPARAM)m_RecvSocket.LocalSockAddrIn().Port(),
                                 (LPARAM)this
                                ); 
```

我现在使用 C# Windows 窗体应用程序中的这个 CUdpRetrySocket 类。问题：

1.  从 C# Forms 类我如何获得一个 CWnd * 来注册我的 C++ CUdpRetrySocket 类

    [在这里找到答案#1](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/bdfb2783-4111-4ebf-b9ed-218200c09d03)

> ```
> // C++ Register Window Method
> void RegOnReceive(System::IntPtr i_Hwnd)
>    { m_pOnReceiveWnd = CWnd::FromHandle((HWND)i_Hwnd.ToPointer()); }
> 
> // C# Caller of Register Window Method
> class MyForm : Form
> {
>     . . .
>     cmdDev.RegOnReceive(Handle); 
> ```

1.  如何在我的 C# 窗口中创建事件以捕获此自定义 MFC 样式消息？

2.  即使窗口最小化，我也需要 C# 应用程序来处理数据包。如果 C# Forms 窗口最小化，它还会收到这些消息吗？

3.  有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:42:37.127

[在这里](http://forums.codeguru.com/archive/index.php/t-341896.html)找到如何创建事件处理程序
的答案您只需覆盖 Form.WndProc() 虚拟方法，测试特定的自定义消息 ID 并将所有其他消息传递给基类进行处理。

```
protected override void WndProc(ref System.Windows.Forms.Message message)
{
    if (message.Msg == MY_CUSTOM_WINDOW_MSG_ID)
    {
        // PROCESS EVENT HERE
    }            
    base.WndProc(ref message);
} 
```

测试表明最后一个问题的答案是YES。即使表单被最小化，消息也会被发送和处理。

# ios - xcode 4.3.3 iphone - 对象泄漏分配的对象以后没有引用

> ID：11125844
> 
> 赞同：0
> 
> 时间：2012-06-20T18:27:42.047
> 
> 标签：ios, xcode

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    self.listFeedConnection = nil;   // release our connection

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;   

    // create the queue to run our ParseOperation
    self.queue = [[NSOperationQueue alloc] init];

    // create an ParseOperation (NSOperation subclass) to parse the RSS feed data so that the UI is not blocked
    // "ownership of mediaListData has been transferred to the parse operation and should no longer be
    // referenced in this thread.
    //
    ParseOperation *parser = [[ParseOperation alloc] initWithData:listData delegate:self];

    [queue addOperation:parser]; // this will start the "ParseOperation"

    [parser release];
    [queue release];
    // ownership of mediaListData has been transferred to the parse operation
    // and should no longer be referenced in this thread
    self.listData = nil;
}

- (void)dealloc 
{
    [records release];
    [listFeedConnection release];
    [listData release];
    [queue release];

    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:41:23.493

If the error message comes from Xcode static analyzer, keep in mind that it is not perfect and it may have false positives. Actually, I don't see any problem with your code, but would suggest trying and replacing it with this:

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    self.listFeedConnection = nil;   // release our connection

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;   

    // create the queue to run our ParseOperation
    self.queue = [[[NSOperationQueue alloc] init] autorelease];

    // create an ParseOperation (NSOperation subclass) to parse the RSS feed data so that the UI is not blocked
    // "ownership of mediaListData has been transferred to the parse operation and should no longer be
    // referenced in this thread.
    //
    ParseOperation *parser = [[[ParseOperation alloc] initWithData:listData delegate:self] autorelease];

    [queue addOperation:parser]; // this will start the "ParseOperation"

    // ownership of mediaListData has been transferred to the parse operation
    // and should no longer be referenced in this thread
    self.listData = nil;
} 
```

# iphone - ASIHTTPRequest 有时不会收到标头

> ID：11125845
> 
> 赞同：2
> 
> 时间：2012-06-20T18:27:42.943
> 
> 标签：iphone, ios, timeout, asihttprequest

我以前从未遇到过这个问题，但有时当我从服务器请求数据时（大约 10% 的时间），我从未收到响应（甚至没有标题！）并且请求超时。我使用networkQueue，它的设置是这样的

```
 //when initializing
    networkQueue = [[ASINetworkQueue queue] retain];
    networkQueue.maxConcurrentOperationCount = 5;
    networkQueue.delegate = self;
    networkQueue.requestDidReceiveResponseHeadersSelector = @selector(request:DidReceiveHeaders:);
    networkQueue.requestDidFinishSelector = @selector(NetworkQueueRouter:);
    networkQueue.requestDidFailSelector = @selector(requestDidFail:); 
```

我用这个方法初始化请求

```
-(void)sendRequest:(NSURL *)url withParams:(NSDictionary *)params andUserInfo:(NSDictionary *)info{
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    request.delegate = self;
    NSString *jsonString = [params yajl_JSONString];
    [request setPostValue:jsonString forKey:@"json"];
    request.timeOutSeconds = 30;
    if (info != nil)    request.userInfo = info;
    [networkQueue addOperation:request];
    [networkQueue go];
} 
```

我只有在使用 iPhone 或 iPhone Simulator 时才会遇到这个问题。有时，当请求一直持续时，我会用相同的请求检查我的浏览器，当 iPhone 仍在请求时，我会立即从浏览器中获得响应。

有谁之前经历过这个吗？

# php - 在一页上检索客户/项目 MySql 数据

> ID：11125850
> 
> 赞同：0
> 
> 时间：2012-06-20T18:27:52.910
> 
> 标签：php, mysql

这可能很多，但希望我能正确理解所有内容。

我购买了这个时间跟踪器：[http ://codecanyon.net/item/the-simple-clientproject-tracker/48930](http://codecanyon.net/item/the-simple-clientproject-tracker/48930)

我要做的是在一个页面上列出所有客户及其相关项目。在构建时，您只能在侧边栏中将它们作为单独的列表单独查看，或者当您单击客户时，您将看到该客户的项目。但是，包含所有项目的所有客户的主列表会更好，这就是我试图在单个页面上实现的目标。

* * *

看起来有 3 个表相互通信，[ project, clients, project_clients ]

项目列：[ project_id, name, unique_id ]

客户列：[client_id, name]

Project_clients 列：[ project_id, client_id ]

* * *

以下是现有功能：

```
/*
This returns the list of clients that are created with a link to view a list of their projects
*/
function getClientList(){
global $db,$secret;
$return = '';

$return = '<ul class="client_list">';

$query = "SELECT * FROM clients";
$res = $db->query($query,'assoc');

if(!empty($res)){
foreach($res as $row):

$return .= '<li><a href="client.php?client='.$row['client_id'].'" class="clientname" title="This client has '.tot_projects($row['client_id']).' projects associated to them">'.stripslashes($row['name']).'</a></li>';

endforeach;

}else{
$return .= '<li>No Clients Yet</li>';
}
$return .= '</ul>';
return $return;
} 
```

--

```
/*
This will grab the each time a track was created and display it
@param MD5 $unique_id
*/

function getClientProjectTable($client_id){
global $db;
$clientLog = '';

//Get project_id
$query = "SELECT client_id FROM clients WHERE client_id = ".$db->prep($client_id);
$res = $db->query($query,'assoc');

$query = "SELECT project_id FROM project_clients WHERE client_id =".$db->prep($res[0]['client_id'])." ";
$resT = $db->query($query,'assoc');

//set vars
$thead = '<table id="timeLog" colspacing="0" colpadding="0" border="0">';
$thead .= '<thead><tr><th>Name</th><th>Hours</th><th></th></tr>
<tbody>';
$count_row = 0;
$alt = '';
$date = '';
$prevDate = '';
if($resT != false){
foreach($resT as $row):
$alt = ($count_row%2 == 0) ?'odd': '';

//Grab each track and process how much time has passed for it
$query = "SELECT name,unique_id FROM project WHERE project_id = ".$db->prep($row['project_id']);
$resProject = $db->query($query,'assoc');

$actions = '<a href="invoicebook.php?project_id='.urlencode($resProject[0]['unique_id']).'"><img src="images/invoice.png" alt="Invoice" style="vertical-align:middle;"/></a>';

//setup any actions to the row
$actions .= '<form name="projectDeleteAssign" action="process.php" method="post" style="display:inline; margin:0;" onsubmit="return confirmClientDelete();">
<input type="hidden" name="hiddenProjectID" value="'.$row['project_id'].'"  />
<input type="hidden" name="hiddenClientID" value="'.$res[0]['client_id'].'"  />
<input type="hidden" name="confirmDeleted" value="true"  />
<input type="submit" name="action" class="delete" value="Delete Assignment"  />
</form>';

//Check and see if you should check time based on if track has ended or is still running
$clientLog .= '<tr class="'.$alt.'"><td><a href="index.php?track='.urlencode($resProject[0]['unique_id']).'">'.stripslashes($resProject[0]['name']).'</a></td><td>'.tot_time($resProject[0]['unique_id'],'hours').'</td><td>'.$actions.'</td></tr>';

$count_row++;
endforeach;

}else{
$clientLog .= '<tr><td colspan="3">No Projects added to this client yet.</td></tr>';
}
$tfoot = '</tbody></table>';

return $thead.$clientLog.$tfoot;
} 
```

--

```
/*
This returns the list of projects that are created with a link to view a detail view of each
*/
function getProjectList(){
global $db,$secret;
$return = '';

$return = '<ul>';

$query = "SELECT * FROM project";
$res = $db->query($query,'assoc');

if(!empty($res)){
foreach($res as $row):
$u_id = md5(utf8_encode($row['project_id'].$secret));

$return .= '<li><a href="index.php?track='.$u_id.'" class="'.bResult($row['startStop_track'],'timeStart','time').'">'.stripslashes($row['name']).'</a></li>';

endforeach;
}else{
$return .= '<li>No Projects Yet</li>';
}

$return .= '</ul>';

return $return;
} 
```

--

```
/**
* 
* This will return the total number of projects
*/
function tot_projects($client = null){
global $db;

if($client){
$query = "SELECT count(p.project_id) FROM project p INNER JOIN project_clients pc ON pc.project_id = p.project_id WHERE client_id = ".$db->prep($client);
}else{
$query = "SELECT count(project_id) FROM project";
}
$res = $db->query($query,'row');

return $res[0][0];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:16:31.563

尝试用这个替换你的 getClientList 函数：

```
function getClientList2(){
    global $db,$secret;

    $return = "";

    $query = "SELECT * FROM clients";
    $res = $db->query($query,'assoc');

    if(!empty($res)){
        foreach($res as $row) {
            $return .= getClientProjectTable($row['client_id']);
        }
    }

    return $return;
} 
```

我已经删除了很多格式，但如果它有效，您可以再次添加它。

# build - 如何构建内容模块

> ID：11125854
> 
> 赞同：3
> 
> 时间：2012-06-20T18:28:07.473
> 
> 标签：build, chromium

我已经下载了 Chromium 的源代码，并且有所谓的内容模块 + content_shell（这是一个使用内容模块构建的基本浏览器）。我想建立这两个。我找不到任何有用的文档。我看到了一些 gypi 文件，但不知道如何使用它们。

PS 有没有我可以只下载 Content API + Content Shell 的软件包？这样他们两个都将与其他人完全分开？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T02:35:04.933

您需要遵循以下构建说明之一： http: [//dev.chromium.org/developers/how-tos/build-instructions-windows](http://dev.chromium.org/developers/how-tos/build-instructions-windows)或 [http://code.google.com/p/chromium/wiki/MacBuildInstructions](http://code.google.com/p/chromium/wiki/MacBuildInstructions)或 [http://code.google.com/p/chromium/wiki/LinuxBuildInstructions](http://code.google.com/p/chromium/wiki/LinuxBuildInstructions)。一旦您知道如何在适当的平台上构建，您要构建的目标就是“content_shell”。例如，在 Linux 上，要在调试模式下构建 content_shell，您可以像这样使用 ninja：

```
ninja -C out/Debug -j10 content_shell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-27T02:36:02.403

[https://chromium.googlesource.com/chromium/src/+/master/docs/testing/web_tests_in_content_shell.md](https://chromium.googlesource.com/chromium/src/+/master/docs/testing/web_tests_in_content_shell.md)

```
autoninja -C out/Default blink_tests 
```

# python - 在网站上运行搜索并返回结果的脚本

> ID：11125855
> 
> 赞同：2
> 
> 时间：2012-06-20T18:28:15.307
> 
> 标签：python, r, search

我有兴趣将以下过程自动化，以进行我正在进行的系统文献综述。

我有大量的致病因子列表，我想对医学文献进行批量搜索，并返回我从每种类型的错误中获得的结果，然后将它们放入一个漂亮的 CSV 文件中，以便我可以将它们读入 R 和处理一些统计数据/频率分布等。

我可以使用 excel 表和 CTRL C + CTRL V 来完成这一切，但这需要一些时间。

基本上，我需要某种方式与托管我要搜索的数据库的[OvidSP](http://ovidsp.uk.ovid.com/)对话，然后输入格式正确的字符串以进行我想要执行的确切搜索。然后让 OvidSP 为我运行搜索，并返回它获得的点击次数。我想如果他们有可用的 API，这将很容易——我已经直接通过电子邮件向他们发送了这个问题。

我想知道是否有人认为这是可能的，或者为这项任务编写脚本的最佳方法是什么。我有一些 Java、C++ 的经验并开始学​​习 R - 我还想知道 Python 是否有用？

这是我希望实现的快速说明

我想搜索的错误（可以说是通过 CSV 文件输入程序）
* 沙门氏菌
* 大肠杆菌
* 流感

在此处插入精美的程序，该程序使用我的凭据连接到 Ovid 并运行以下搜索

1 - 沙门氏菌和发烧和医院 - 返回 9342 结果
2 - 大肠杆菌和发烧和医院 - 返回 93821 结果
3 - 流感和发烧和医院 - 返回 323 结果

程序将此数据写入格式良好的 CSV 文件中，我可以将其用于一些统计信息

我希望这是有道理的！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:36:23.207

原则上这是可行的，大问题将是解析返回数据（可能很难，可能很容易）和身份验证（可能不难，但取决于他们网站的结构）。

您要查看的 python 模块是[urllib2](http://docs.python.org/library/urllib2.html)（用于请求）、[csv](http://docs.python.org/library/csv.html)（用于 csv）和[beautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

用 Python 编写此代码的好处是您可以交互地探索返回的 html（在 python shell 中），因此可以更轻松地弄清楚如何从您将返回的 html 中提取少量有趣的数据。

# forms - 验证在表中显示不正确的值 - Cakephp

> ID：11125856
> 
> 赞同：0
> 
> 时间：2012-06-20T18:28:15.860
> 
> 标签：forms, validation, cakephp, input

我有一个在 jQuery 对话框中弹出的编辑表单，它有一个 Ajax 提交按钮来执行验证，而无需关闭对话框或将其重定向到其他页面。我的问题是，在我的表单中，我显示了当前值以及新值的空输入框，如果新值不是数字，则当前值仍会更改为该值。

例如，如果编辑窗口显示“月内”当前值为 5，并且用户输入 5sdf，则验证将启动并说修复错误，但当前值列现在将显示 5sdf。我需要帮助保持当前值以保持其最新的有效值。

这是我在控制器中编辑操作的代码：

```
public function edit($id = null)
    {
        $this->LocalClock->id = $id;
        $this->set('isEditValid', false);
        $this->set('editValidationErrors', false);

        if ($this->request->is('get'))
        {
               $this->request->data = $this->LocalClock->read();
               $this->set('localClocks', $this->LocalClock->read());
            }
            else
            {
               if ($this->LocalClock->save($this->request->data))
               {
                $this->set('isEditValid', true);
                $this->set('editValidationErrors', false);
                $this->set('localClocks', $this->request->data);
            }
               else
               {
                $this->set('isEditValid', false);
                $this->set('editValidationErrors', true);
                $this->set('localClocks', $this->request->data);
               }
        }
    } 
```

这是我的edit.ctp：

```
<div id="edit_table">

<div id="edit_errors">
</div>

<?php echo $this->Form->create('LocalClock', array('action' => 'edit', 'inputDefaults' => array('label' => false))); ?>
<?php echo $this->Form->input('id', array('type' => 'hidden')); ?>

<table>
    <thead><tr>
        <th>Field</th>  <th>Current Value</th>  <th>New Value</th>
    </tr></thead>

    <tbody>
<tr><td>Name</td><td> <?php echo $localClocks['LocalClock']['name']; ?></td><td>  <?php echo $this->Form->input('LocalClock.name', array('id' => 'focusMeEdit'));?></td></tr>
    <tr><td>Auto Offset</td><td><?php echo $localClocks['LocalClock']['auto_offset'];?> </td><td><?php echo $this->Form->input('LocalClock.auto_offset');?> </td></tr>
    <tr><td>UTC Offset Sec</td><td><?php echo $localClocks['LocalClock']['utc_offset_sec'];?> </td><td><?php echo $this->Form->input('LocalClock.utc_offset_sec');?></td></tr>
    <tr><td>In Month</td><td><?php echo $localClocks['LocalClock']['in_month'];?></td>  <td><?php echo $this->Form->input('LocalClock.in_month');?> </td>  </tr>
    </tbody>
</table>

<?php
    // The Ajax Helper submit is used to submit the changes made to the edit form
    // because it allows the modal window to be loaded with the updated edit view
    // without leaving the modal window. 
    echo $this->Ajax->submit('Save Changes', array(
        'url' => array('controller' => 'localClocks', 'action' => 'edit'),
        'update' => 'edit_table'));

    // Call the close Dialog() function if data was validated sucessfully; valid == true. 
    // Else it stays open displaying validation error message.
    if (false != $isEditValid)
    {
        echo "<script>$('#[id*=dialog]').dialog('close');</script>";
        echo "<script>$('#success_messages').dialog('open');</script>";
        echo "<script>$('#success_messages').text('Local Clock Successfully Edited')</script>";
    }
    if(false != $editValidationErrors)
    {
        echo "<script>$('#edit_errors').html('<h3><em><font color=\"red\">Please Correct Errors Before Proceeding</font></em></h3>')</script>";
    }

echo $this->Form->end(); ?>

</div> 
```

我不确定问题是否在我的行为或观点中导致它发生。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:27:06.117

它是显示不正确值的标准行为。如果您输入了一个由于某种原因无效的长答案，您不希望删除该答案，否则您可能需要重新输入很多内容。

保存失败后为什么不读取原始记录，检查 $this->LocalClock->invalidFields() 是否有错误并将 $this->request->data 替换为受影响字段的原始值？

# c# - 找到动态创建的控件并将其隐藏

> ID：11125858
> 
> 赞同：-1
> 
> 时间：2012-06-20T18:28:21.227
> 
> 标签：c#, winforms

同样，我正在根据这篇[文章](http://bitvector.net/?p=41)动态创建按钮，现在我需要相应地隐藏它。如何找到和隐藏按钮。这对我来说是新的，因为我习惯于拖放并用它做事。任何帮助，将不胜感激。先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:31:34.613

使用我上一个问题中的示例，我添加了一个“名称”属性：

```
int lastX = 0;
for (int i = 0; i < 4; i++) {
  Button b = new Button();
  b.Name = "button" + i.ToString();
  b.Location = new Point(lastX, 0);
  this.Controls.Add(b);
  lastX += b.Width;
} 
```

现在您可以按名称访问它：

```
if (this.Controls.ContainsKey("button1"))
  this.Controls["button1"].Visible = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:31:04.557

```
var button = (from b in this.Controls.OfType<Button>()
              where b.Name == nameOfButton).First();

button.Hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:30:34.413

您必须知道您的控件的名称。然后使用这个：

```
foreach(Control control in Controls){
  if (control.Name == "your control name"){
      control.Visible = false;
  }
} 
```

例如，如果您的控件位于名为 mypanel 的面板中，则必须编写`foreach(Control control in mypanel.Controls)` Hope it help

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:31:03.073

如果您将动态创建的控件保存在 中`Dictionary<string, ControlType>`，您可以非常轻松有效地找到它们。当然，关键是您的控件名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T07:48:24.620

如果您的表单包含面板等容器，您应该进行递归搜索：

```
void SetVisible(Control c)
{
    if (control.Name == "your control name") 
          control.Visible = false; 

    foreach(Control control in c.Controls){       
      SetVisible(control);       
    }

} 
```

然后在某处打电话：

```
SetVisible(this); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-23T20:31:20.330

非常老的问题，但接受的答案对我不起作用，因为我的控件是嵌套的（另一个控件的子级）。

Controls.Find 方法对我有用，它为第二个参数传入“true”，告诉它搜索子项：

```
 Control c = panelControls.Controls.Find("MyControlName", true).FirstOrDefault();
        if (c != null && c is ComboBox) {
            ComboBox cmb = (ComboBox)c;
            cmb.Hide();
        } 
```

文档： [https ://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.controlcollection.find](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.controlcollection.find)

# php - Magento 自定义集合有重复数据

> ID：11125862
> 
> 赞同：2
> 
> 时间：2012-06-20T18:28:30.050
> 
> 标签：php, magento, adminhtml

此代码将使用自定义集合并使用网格打印文件列表，通过 Magento 的后端（adminhtml）进行下载或删除。

问题是在添加项目（ $dataCollection->addItem($dataObject) ）后，该集合多次重复，结果相同。

建议？
谢谢
~N

d($dataObject) 的输出：

```
#first loop
Varien_Object Object
(
[_data:protected] => Array
    (
        [filename] => 20120620_0950_UTC.xml
        [size] => 136740
        [date_modified] => 2012-06-20 14:50:20
    )

[_hasDataChanges:protected] => 1
[_origData:protected] => 
[_idFieldName:protected] => 
[_isDeleted:protected] => 
) 
```

```
#second loop
Varien_Object Object
(
[_data:protected] => Array
    (
        [filename] => 20120620_0954_UTC.xml
        [size] => 136740
        [date_modified] => 2012-06-20 14:54:41
    )

[_hasDataChanges:protected] => 1
[_origData:protected] => 
[_idFieldName:protected] => 
[_isDeleted:protected] => 
) 
```

d($dataCollection) 的输出：

```
Varien_Data_Collection Object
(
[_items:protected] => Array
    (
        [0] => Varien_Object Object
            (
                [_data:protected] => Array
                    (
                        [filename] => 20120620_0954_UTC.xml
                        [size] => 136740
                        [date_modified] => 2012-06-20 14:54:41
                    )

                [_hasDataChanges:protected] => 1
                [_origData:protected] => 
                [_idFieldName:protected] => 
                [_isDeleted:protected] => 
            )

        [1] => Varien_Object Object
            (
                [_data:protected] => Array
                    (
                        [filename] => 20120620_0954_UTC.xml
                        [size] => 136740
                        [date_modified] => 2012-06-20 14:54:41
                    )

                [_hasDataChanges:protected] => 1
                [_origData:protected] => 
                [_idFieldName:protected] => 
                [_isDeleted:protected] => 
            )

    )

[_itemObjectClass:protected] => Varien_Object
[_orders:protected] => Array
    (
    )

[_filters:protected] => Array
    (
    )

[_isFiltersRendered:protected] => 
[_curPage:protected] => 1
[_pageSize:protected] => 
[_totalRecords:protected] => 
[_isCollectionLoaded:protected] => 
[_cacheKey:protected] => 
[_cacheTags:protected] => Array
    (
    )

[_cacheLifetime:protected] => 86400
[_flags:protected] => Array
    (
    )
) 
```

* * *

代码：

```
class Rogue_Googlemerchant_Block_Adminhtml_Exporter_Grid extends Mage_Adminhtml_Block_Widget_Grid
{

public function __construct()
{
    parent::__construct();
    $this->setId('googlemerchantGrid');
    $this->setDefaultSort('entity_id');
    $this->setDefaultDir('ASC');
    $this->setSaveParametersInSession(true);
}

protected function _prepareCollection()
{
    $basePath = Mage::getBaseDir('base');
    $feedPath = $basePath . '/opt/googlemerchant/';
    $errPath = $basePath . '/var/log/googlemerchant/';
    $flocal = new Varien_Io_File();
    $flocal->open(array('path' => $feedPath));
    $dataCollection = new Varien_Data_Collection();
    $dataObject = new Varien_Object();

    foreach ($flocal->ls() as $item) {
        $dataObject->addData(
            array(
                'filename'     => $item['text'],
                'size'         => $item['size'],
                'date_modified'=> $item['mod_date']
            )
        );
        $dataCollection->addItem($dataObject);
        d($dataObject);
    }
    d($dataCollection);
    $this->setCollection($dataCollection);

    return parent::_prepareCollection();
}

protected function _prepareColumns()
{

    $this->addColumn('filename', array(
      'header'    => Mage::helper('googlemerchant')->__('File'),
      'align'     =>'left',
      'index'     => 'filename',
      'width'     => '200px',
    ));

    $this->addColumn('action', array(
        'header'  => Mage::helper('googlemerchant')->__('Action'),
        'width'   => '50px',
        'type'    => 'action',
        'getter'  => 'getId',
        'actions' => array(
            array(
                'caption' => Mage::helper('googlemerchant')->__('Download'),
                'url'     => array('base' => '*/*/download'),
                'field'   => 'entity_id'
            ),
            array(
                'caption' => Mage::helper('googlemerchant')->__('Delete'),
                'url'     => array('base' => '*/*/delete'),
                'field'   => 'entity_id'
            )
        ),
        'filter'    => false,
        'sortable'  => false,
        'index'     => 'stores',
        'is_system' => true,
    ));

    return parent::_prepareColumns();
}

public function getRowUrl($row)
{
    return $this->getUrl('*/*/download', array('entity_id' => $row->getId()));
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:02:03.373

发生的事情是您每次都将相同的对象添加到集合中。您需要`Varien_Object`为每个文件创建一个唯一的。在循环`$dataObject`内部创建，如下所示：`foreach`

```
//$dataObject = new Varien_Object();

foreach ($flocal->ls() as $item) {
    $dataObject = new Varien_Object();
    $dataObject->addData(
        array(
            'filename'     => $item['text'],
            'size'         => $item['size'],
            'date_modified'=> $item['mod_date']
        )
    );
    $dataCollection->addItem($dataObject);
    d($dataObject);
} 
```

# wpf - 我可以通过样式添加硬编码的 ComboBoxItems 吗？

> ID：11125863
> 
> 赞同：2
> 
> 时间：2012-06-20T18:28:29.870
> 
> 标签：wpf, combobox, styles

我有一个小应用程序，其中相同的 ComboBox 出现在多个位置，并且它始终具有相同的项目集。而不是每次我使用组合框时都这样做：

```
<ComboBox ...>
    <ComboBoxItem Content="1" Tag="1" />
    <ComboBoxItem Content="5" Tag="5" />
    <ComboBoxItem Content="10" Tag="10" />
    <ComboBoxItem Content="50" Tag="50" />
</ComboBox> 
```

我在想最好让项目成为我可以应用于每个 ComboBox 的样式的一部分。有谁知道如何使它工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:43:07.460

我经常用于具有相同项目列表的组合框的另一种方法是创建一个具有包含项目的集合属性的静态类，然后将其绑定`ItemsSource`到此静态属性

```
public static class StaticLists
{
    public static List<int> MyList { get; private set; }

    static Lists()
    {
        MyList = LoadSomeList();
    }
} 
```

和

```
<ComboBox ItemsSource="{Binding Source={x:Static local:StaticLists.MyList}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:45:10.987

作为 Rachel 建议的替代方案，如果您想保留所有 XAML，您可以将您的项目（不是 ComboBoxItems，而是支持数据项）放入资源中，然后绑定到该资源。

# c# - C#奇怪的方法调用使用指针？

> ID：11125869
> 
> 赞同：2
> 
> 时间：2012-06-20T18:28:43.877
> 
> 标签：c#, pointers, com

我找到了一个执行 directx com 导入的代码。但我不明白，它在我的代码中也不起作用。

就是这个代码：

```
internal unsafe Result GetCapabilities(out BufferCapabilities dSBufferCapsRef)
{
    BufferCapabilities.__Native native = BufferCapabilities.__NewNative();
    Result result = (Result) **(((IntPtr*) base._nativePointer))[(int) (((IntPtr) 3) * sizeof(void*))](base._nativePointer, (IntPtr) &native);
    dSBufferCapsRef = new BufferCapabilities();
    dSBufferCapsRef.__MarshalFrom(ref native);
    result.CheckError();
    return result;
} 
```

奇怪的 Line 是方法中的 Line 2。Result 结果 = .... _nativePointer 声明如下：

```
protected unsafe void* _nativePointer; 
```

所以我的回答是如何调用指针所指的cominterface的成员。我怎么称呼它：(base._nativePointer, (IntPtr) &native)。它是指针 _nativePointer 指向的接口的成员。

我知道我有点困惑，但我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:44:07.340

来自[MSDN - 指针类型（C# 编程指南](http://msdn.microsoft.com/en-us/library/y31yhkeb.aspx)：

> `*`执行指针间接。
> 
> `->`通过指针访问结构的成员。

您可以按如下方式使用它们：

`pointer->field` 或者 `(*pointer).field`

**注意：（**也来自[MSDN - 指针类型（C# 编程指南](http://msdn.microsoft.com/en-us/library/y31yhkeb.aspx)）：

> 您不能将间接运算符应用于 void* 类型的指针。但是，您可以使用强制转换将 void 指针转换为任何其他指针类型，反之亦然。

似乎有一条主线引起了混乱。我会尝试分解它：

```
Result result = (Result) **(((IntPtr*) base._nativePointer))[(int) (((IntPtr) 3) * sizeof(void*))](base._nativePointer, (IntPtr) &native); 
```

第一部分是相当不言自明的：`Result result = (Result)...`

然后我们有`**(((IntPtr*) base._nativePointer))`，它似乎将 base._nativePointer 转换为 IntPtr*，然后取消引用它两次。这意味着它必须指向另一个指针。我们取消引用一次以获取指向的指针，然后再次获取该指针的值。我们称之为`X`.

下一部分是`[(int) (((IntPtr) 3) * sizeof(void*))]`。它得到一个 void 指针的大小，然后将它乘以 3（不要问我为什么它首先被转换为 IntPtr）。然后它使用该值来索引 X。它从一开始就找到 X 的索引，即 3 void*'s。

最后一部分是`(base._nativePointer, (IntPtr) &native)`。这告诉我`X[3 void's]`（上面的伪代码）的值是一个函数，我们正在调用它。

总的来说，这行代码调用了一个存储在（或附近？）指向的指针中的函数`base._nativePointer`。该函数被传递参数`base._nativePointer`和`&native`（强制转换为 IntPtr），并返回一个`Result`.

# python - Python 输出到文件更高的浮点精度

> ID：11125878
> 
> 赞同：1
> 
> 时间：2012-06-20T18:29:21.907
> 
> 标签：python, file-io, floating-point, precision

以下：

```
>>>import struct
>>>struct.unpack('!d', ('40d11998e5035288').decode('hex'))[0]
>>>
>>>17510.3889778429 
```

我希望能够将值 17510.3889778429 打印到 .csv 输出文件。出于某种原因，当我将其写入文件时，它会舍入小数点并且只写：

```
17510.3889778 
```

我将如何以更高的精度打印它？

谢谢，内德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:38:19.607

假设您使用的是 Python 的 csv 模块，文档说非字符串数据是使用 格式化的`str()`，这似乎是发生截断的地方。所以你可以做的一件事是定义你自己的类，以你想要的方式进行字符串化：

```
class myFloat( float ):
    def __str__(self):
        return "%.12f"%self

 x = myFloat( 17510.3889778429 )
 print "%s"%x 
```

产量：

```
17510.388977842900 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:36:02.940

您可以使用任何适当的方法将数字转换为字符串并将字符串写入 CSV。

```
>>> x = 17510.3889778429
>>> s = str(x)
>>> s
'17510.3889778'
>>> s = '%17.11f' % x
>>> s
'17510.38897784290' 
```

# ios - 如何在 UIScroll 中获取当前的 UIView？

> ID：11125879
> 
> 赞同：1
> 
> 时间：2012-06-20T18:29:26.643
> 
> 标签：ios, uiscrollview

目前，我有一个带有 X UIView 作为页面的 UIScrollView。我想知道是否有办法获取当前显示的 UIView？

```
 mScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    mScroll.pagingEnabled = YES;
    NSInteger numberOfViews = 3;
    for (int i = 0; i < numberOfViews; i++) {
        CGFloat yOrigin = i * self.view.frame.size.width;
        MyICalView* awesomeView=[[MyICalView alloc] initWithFrame:CGRectMake(yOrigin, 0, self.view.frame.size.width, self.view.frame.size.height)];
        [mScroll addSubview:awesomeView];
        [awesomeView release];
    }
    mScroll.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);
    mScroll.delegate=self; 
```

有什么方法可以获取当前显示的**awesomeView**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:35:14.737

我认为这应该有效：

```
int pageIndex = mScroll.contentOffset.x/awesomeView.frame.size.width; 
```

只需将这些视图添加到数组中即可访问它们或将它们的标记设置为 0,1,2

# c# - 使用 Unity 在构造函数中使用的属性依赖注入

> ID：11125883
> 
> 赞同：5
> 
> 时间：2012-06-20T18:29:35.397
> 
> 标签：c#, dependency-injection, inversion-of-control, unity-container, containers

好的，我在基类中定义了一个依赖属性，我试图在其派生类的构造函数中使用它，但这不起作用，该属性显示为 null。Unity 在使用 container.Resolve() 解析实例后解析依赖属性；

我的另一种选择是将 IUnityContainer 参数添加到 MyViewModel 类构造函数中，并使用以下内容设置 ILogger 属性我自己：

```
public MyViewModel(IUnityContainer container)
{
  Logger = container.Resolve<ILogger>();
} 
```

**编辑：** @Wiktor_Zychla 的另一个建议是将构造函数注入的参数传递为：

```
public MyViewModel(ILogger _logger)
{
    Logger = _logger;
} 
```

这似乎工作正常，但我必须为我所有派生的 ViewModels 这样做..

但是后来我没有在我的基类中使用带注释的 ILogger 依赖项。请参阅下面的课程示例。问题是：我有哪些选择，或者我做错了什么？

谢谢！

我有一个这样的 ViewModel 基类：

```
public abstract class ViewModelBase
{
    [Dependency]
    public ILogger Logger { get; set; }
....
} 
```

然后我有一个类派生出：

```
public class MyViewModel : ViewModelBase
{
    public MyViewModel()
    {
         //I want to use my dependent property in constructor, but doesn't 

         Logger.Error("PRINT AN ERROR");
    }
} 
```

在我的应用程序入口点中，我将 ILogger 注册为单例和 MyViewModel 类：

```
container.RegisterType<ILogger, MyAppLogger>(new ContainerControlledLifetimeManager());
container.RegisterType<MyViewModel>(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:55:11.150

> Unity 在使用 container.Resolve() 解析实例后解析依赖属性；

如果你仔细想想，这很明显。只需尝试手动执行此操作。你不会成功的。为了能够注入属性，必须有一个实例，并且拥有一个实例意味着构造函数已被调用。

您的问题是由于您在构造函数中做的太多而引起的。从依赖注入的角度来看，构造函数应该只接受它的依赖（检查它们是否不为空），并将它们存储在私有字段中。做任何比这更多的事情都是反模式。你的构造函数中不应该有任何逻辑。

在构造函数中包含逻辑使得创建对象图不可靠，而构建对象图应该快速且可靠。

当你遵循这个原则时，就不会有问题，因为一旦你运行任何业务逻辑，你的类就会被完全实例化。由于构造函数应该只设置私有字段，所以不会出错，也没有任何理由`Logger.Error("PRINT AN ERROR");`像你一样调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:49:57.140

1）您可以在每个视图模型中使用不同的记录器实例，只需删除`ContainerControlledLifetimeManager`.

2）您可以`Type`通过在注册时指定每个视图模型来为每个视图模型注册不同的记录器。

```
container.RegisterType<ILogger, MyAppLogger>();
container.RegisterType<ILogger, MyOtherLogger>("uniqueNameOfAnILoggerRegistration);
container.RegisterType<MyViewModel>(new InjectionConstructor(
    new ResolvedParameter(typeof(ILogger), "uniqueNameOfAnILoggerRegistration"))); 
```

使用构造函数注入，您的视图模型将被注入一个全新的`MyOtherLogger`.

由于属性注入应该保留用于“很高兴”的值，并且您的类显然依赖于记录器的存在，我强烈建议使用 ctor 注入。

# flowplayer - 在 flowplayer 中缓冲

> ID：11125885
> 
> 赞同：0
> 
> 时间：2012-06-20T18:29:38.470
> 
> 标签：flowplayer

我有缓冲问题。

这是我的代码，我设置了 autoBuffering: true 但是当我从服务器运行视频时它看起来不像缓冲。当它在本地加载视频时它很好。

```
var player =  $f("player", {        
        src: "http://releases.flowplayer.org/swf/flowplayer-3.2.7.swf",
        version: [9, 115],
        onFail: function () {
            document.getElementById("info").innerHTML =
                     "You need the latest Flash version to see MP4 movies. " +
                        "Your version is " + this.getVersion();
        }
    }, {
        clip: {
            url:"http://path/Videos/04\. The White Shirt.mp4
            autoBuffering: true,
            bufferLength : 2, autoPlay: true,
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T04:30:49.943

正如[这里](http://chirale.wordpress.com/2009/05/30/video-on-flash-doesnt-buffer-maybe-a-flv-and-mp4-issue/)所说，问题可能与 MP4 的编码类型有关：

> 对于 MP4 文件，您必须将 MP4 元数据（“moov atom”）从文件末尾移动到开头

编辑：我刚刚测试了 qt-faststart（在 Debian 中与 ffmpeg 一起打包）：就像一个魅力！只需将您的视频编码为 MP4，然后运行：

```
qt-faststart encoded-video.mp4 encoded-for-streaming-video.mp4 
```

大小完全相同，但视频会立即播放。

# c++ - 对象组合与提供显式包装器

> ID：11125890
> 
> 赞同：1
> 
> 时间：2012-06-20T18:29:58.280
> 
> 标签：c++, oop

我有一个`A`看起来像这样的类：

```
class A {
// A's internal state
public:
  void someMethod();
  void anotherMethod();
}; 
```

我想`A`在另一个类中使用`B`。我不想`B`成为 的子类型`A`，但我希望`A`的公共方法能够以某种形式被`B`的用户访问。

实现此目的的一种方法是简单地将 的实例包含`A`为 的公共成员`B`：

```
class B {
public:
  A a;
  // other members
}; 
```

另一个是`A`成为 的私有成员，并提供围绕的公共方法的`B`包装器：`A`

```
class B {
  A a;
public:
  void someMethod(){ a.someMethod(); }
  void anotherMethod(){ a.anotherMethod(); }
} 
```

我想知道是否有一种“首选”方式来做到这一点（甚至可能不涉及上述两种选择），或者这只是一个偏好问题。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T18:31:47.063

还有一种方法是：

```
class B : private A
{
public:
    using A::someMethod;
    using A::anotherMethod;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:35:41.397

> 我想知道是否有一种“首选”方式来做到这一点（甚至可能不涉及上述两种选择），或者这只是一个偏好问题。谢谢。

恐怕这真的取决于细节。

当继承没有意义时，您更喜欢组合而不是继承是正确的。`A`你如何实现它取决于公开一个实例是否有意义。

是否存在`A`您不想更改的状态，或您不希望公开的功能？您是否希望在调用其中一个函数时执行任何预处理或后处理`A`？您是否关心用户是否将您的实例设置`A`为另一个？您可能会这样做（尽管您可以只创建一个 getter 函数），因此在这种情况下更喜欢包装函数。

`A`完全公开是否更有意义？如果是这样，您可以通过不编写一堆样板代码来节省时间。

这实际上归结为您的包装类的语义。

# c# - 将运行 javascript 作为 ASP 服务器控件呈现

> ID：11125894
> 
> 赞同：0
> 
> 时间：2012-06-20T18:30:02.750
> 
> 标签：c#, javascript, asp.net, servercontrols

在页面上呈现 ASP 服务器控件时，运行 JavaScript 的首选方法是什么？文档有点混乱/迟钝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:48:54.737

该文档更喜欢您使用页面的 ClientScriptManager 来呈现所有 javascript。我认为这是让您将 javascript 整合到可重用部分的努力，以便您渲染一次 javascript，无论您有多少控件。

您的方式是为每个控件发出 javascript。这不一定是坏事（特别是如果您是服务器控件的唯一用户）。

基本上，您只需将所需的脚本添加为控件的渲染阶段的一部分，并使用 HtmlTextWriter 输出它（可能就在您从渲染覆盖返回之前）。我发现有帮助类来提供帮助很有帮助。

# android - 如何在一个应用程序中使用两个对话框？

> ID：11125895
> 
> 赞同：0
> 
> 时间：2012-06-20T18:30:10.640
> 
> 标签：android, android-alertdialog

当我创建两个对话框时，即使另一个对话框的条件为真，也只显示一个..

这是代码

```
 if (z<=18){   
       showDialog(1);
    } else {
       showDialog(3);
    }
...................................................................................................................................................................
    protected Dialog onCreateDialog(int id)
    {
      if (id== 1)
      {
            AlertDialog.Builder b=new AlertDialog.Builder(this);
            b.setTitle("1st dialog");
            b.setPositiveButton("OK",new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                              // TODO Auto-generated method stub
                        }
                  });
            AlertDialog d=b.create();
            d.show();
      } 
      else 
      {
          AlertDialog.Builder b2=new AlertDialog.Builder(this);
          b2.setTitle("2nd dialog ");         
          b2.setPositiveButton("OK",new DialogInterface.OnClickListener() {

                      public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                      }
                });

          AlertDialog dialoog=b2.create();
          dialoog.show();
      }
      return super.onCreateDialog(id);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:40:57.060

why don't you initialize both of your AlertDialogs, and depending of the situation you just show one:

defining the dialogs:

```
 //infodialog
    infodialog = new AlertDialog.Builder(this).create();  
    infodialog.setTitle("INFO");  
    infodialog.setMessage(getApplicationContext().getString(R.string.info));  
    infodialog.setButton("OK", new DialogInterface.OnClickListener() {  
      public void onClick(DialogInterface dialog, int which) {  
        return;  }
    });
  //disclaimerdialog
    disclaimerdialog = new AlertDialog.Builder(this).create();  
    disclaimerdialog.setTitle("Disclaimer");  
    disclaimerdialog.setMessage(getApplicationContext().getString(R.string.disclaimer));  
    disclaimerdialog.setButton("OK", new DialogInterface.OnClickListener() {  
      public void onClick(DialogInterface dialog, int which) {  
        return;  }
    }); 
```

and picking one (i used a optionmenu and switch, you can use any if-function with your dialog.show ofcourse):

```
public boolean onOptionsItemSelected(MenuItem item) {
                switch (item.getItemId()){

                case R.id.info:
                    infodialog.show();
                    return true;
                case R.id.disclaimer:
                    disclaimerdialog.show();
                    return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:36:55.420

如果你在 if - else 中有它们，这两个条件怎么可能是真的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:37:17.597

这两种情况会`true`怎样？您正在使用`if` `else`彼此专有的条件检查，一次只有一个可以工作。因此只显示一个对话框。

# python - 删除网络的内部循环

> ID：11125902
> 
> 赞同：2
> 
> 时间：2012-06-20T18:30:29.950
> 
> 标签：python, networkx

我有一个由许多自循环组成的大图。我正在尝试删除所有内部循环，以便只剩下一个大（外部）循环。有没有办法找到给定循环中的所有边？我试过使用`graph.nodes_with_selfloops()`，`graph.selfloop_edges`但都没有让我走得很远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:08:03.630

我找到了一种使用 networkx.algorithms 库来解决这个问题的方法：

```
import networkx as netx
import networkx.algorithms as al

# build graph
g = netx.DiGraph()
edges = [(1,2),(2,3),(3,4),(4,1),(1,2),(2,5),(5,3),(3,4),(4,1)]
g.add_edges_from(edges)

# find cycles
cycles = al.simple_cycles(g)

# assuming that the exterior cycle will contain the most nodes
for cycle in cycles:
    print len(cycle) 
```

结果应该是：

>>> 5

>>> 6

# c++ - 我希望 Timer 应该只在前一个调用返回或完成执行时调用代码？

> ID：11125906
> 
> 赞同：-1
> 
> 时间：2012-06-20T18:30:50.357
> 
> 标签：c++

据我所知，定时器是异步运行的，所以如果应用了一个非常短的定时器，它会多次调用定时器代码，以防之前的调用没有完成......

如果先前的调用尚未完成，我不想调用计时器，因为这会导致我的程序中出现断言，因为多个调用尝试一次共享单个资源......这会产生异常并且程序终止......

请告诉我如何将计时器调用与其以前的函数调用同步..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:37:07.980

使用信号量。

当您开始上一个呼叫时，向下信号量。当你完成执行时向上信号量。

计时器可以随时触发，它会触发信号量并等待当前任务完成，然后再尝试访问该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:36:51.950

```
void OnTimer()
{
   static bool inTimer = false; 
   if ( inTimer ) 
       return; 
   inTimer = true;   
   .... // do things
   inTimer = false;
} 
```

# visual-studio-2010 - 如何从 Silverlight 写入 Visual Studio 2010 调试输出窗口？

> ID：11125912
> 
> 赞同：5
> 
> 时间：2012-06-20T18:31:10.137
> 
> 标签：visual-studio-2010, silverlight, debugging

我正在尝试让我的 Silverlight 应用程序写入 Visual Studio 2010 中的输出/调试窗口。

我已经尝试过`System.Diagnostics.Debug.WriteLine`和`System.Diagnostics.Debugger.Log`，当 VS 2010 调试器附加到进程时，这两者似乎都承诺将输出写入此窗口。

我将 VS 2010 附加到在 Silverlight 模式下托管 Silverlight 应用程序的 iexplore.exe，但我还没有看到任何我试图记录的输出。我确实看到了应用程序中发生的其他事情的日志消息；抛出异常、加载模块、线程死亡、绑定错误。我需要在 Silverlight 应用程序中做什么才能登录到同一位置？

我想我的替代方法是登录到全局 StringBuilder 并在调试器中中断进程并检查它，但这比查看实时记录的信息要方便得多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T19:56:08.033

`System.Diagnostics.Debug.WriteLine`确实做到了你的要求。我会检查几件事。

确保：

1.  您已连接到正确的 iexplore.exe 进程。启动了多个 iexplore.exe 进程，而不仅仅是一个。
2.  您的宿主项目设置为调试 Silverlight。这是宿主项目的项目属性中的一个选项。
3.  如果您在代码中设置了一个确实中断的断点 - 如果代码运行但未命中断点，那么您使用的代码版本错误。
4.  Visual Studio的输出窗口中的“显示输出：”设置为“调试”
5.  如果在输出窗口中单击鼠标右键，请确保除其他消息外还选中“程序输出”。

# android - 否定方向更改 - Android

> ID：11125913
> 
> 赞同：0
> 
> 时间：2012-06-20T18:31:10.120
> 
> 标签：android, screen-orientation, orientation-changes, android-orientation, android-screen

我正在开发一个只能横向显示某些页面的应用程序，我不想锁定屏幕显示，我希望拒绝 Android 进行方向更改。

有什么我可以用的吗？例如，在运行时方向更改时，Android 会询问是否可以转到该方向？

如果没有，如何锁定当前屏幕方向？我知道 setRequestedOrientation 可以做到这一点，但这意味着发现当前方向（甚至发现正确的方向，如“正常”或“反向”肖像/风景）并锁定它。

编辑：这个应用程序只有一个活动，并且根据它的状态（改变时间和用户输入）它可以旋转或不旋转，这是我的问题。

[如http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)所见，关于配置更改：

“自己处理配置更改防止系统在某些配置更改期间重新启动您的活动，但在配置发生更改时收到回调，以便您可以根据需要手动更新您的活动。”

即使配置发生了变化，我也希望在此之前阻止这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:51:53.200

在每个活动中添加一个。

```
public void checkActivityPos() {

    if(somthing == "this") {
        myActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    }else {
        myActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
} 
```

# wifi - 连接wifi热点后如何自动弹出网页？通过iptables？

> ID：11125915
> 
> 赞同：0
> 
> 时间：2012-06-20T18:31:12.913
> 
> 标签：wifi, iptables

连接wifi后是否可以使用iptables自动弹出？

我正在尝试创建一个 wifi 热点，该热点将在用户成功连接到我的 wifi 路由器后强制显示广告页面。尽管不一定要对它们进行身份验证。我只是不想在登录后立即弹出.. 这可能 w/iptables 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:39:22.417

我的路由器上的 iptables（在 nat 表中）中有类似的东西。

```
-A PREROUTING -i br1 -j BR1_GUEST_LIST

-A PREROUTING -d 10.254.0.1/32 -i br1 -p tcp -m tcp --dport 80 -j ACCEPT
-A PREROUTING -i br1 -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8081 
```

还有我的前锋表：

```
# Allow DNS
[0:0] -A INPUT -i br1 -p udp -m udp --sport 67:68 --dport 67:68 -j ACCEPT
[0:0] -A INPUT -i br1 -j BR1_GUEST

# Forbid self access on externals
[0:0] -A BR1_GUEST -d 192.0.2.1/32 -j REJECT --reject-with icmp-port-unreachable
[0:0] -A BR1_GUEST -d 192.0.2.2/32 -j REJECT --reject-with icmp-port-unreachable

# Allow web access this box
[0:0] -A BR1_GUEST -d 198.51.100.1/32 -p tcp -m tcp --dport 80 -j ACCEPT
[0:0] -A BR1_GUEST -d 198.51.100.1/32 -p tcp -m tcp --dport 443 -j ACCEPT

# Allow DNS
[0:0] -A BR1_GUEST -d 198.51.100.1/32 -p udp -m udp --dport 53 -j ACCEPT

# And web access on this IP too.
[0:0] -A BR1_GUEST -d 10.254.0.1/32 -p tcp -m tcp --dport 8081 -j ACCEPT
[0:0] -A BR1_GUEST -d 10.254.0.1/32 -p tcp -m tcp --dport 1723 -j ACCEPT
[0:0] -A BR1_GUEST -j BR1_GUEST_LIST
[0:0] -A BR1_GUEST -j REJECT 
```

我的是登录页面，但登录后，用户的 MAC 地址卡在 BR1_GUEST_LIST 中（在 nat 和转发表上）

```
-A BR1_GUEST_LIST -m mac --mac-source ff:aa:bb:cc:dd:ee -j ACCEPT 
```

一旦访问者看到或点击了广告，您就可以将他们添加到该列表中。

# php - 从一个表中获取另一个表中不存在的记录

> ID：11125917
> 
> 赞同：1
> 
> 时间：2012-06-20T18:31:25.813
> 
> 标签：php, mysql, group-by, unix-timestamp

我知道这个标题听起来可能已经有几十个类似的问题，但我认为这个有点不同。不过，如果已经有与我类似的问题，请指出我。

基本上，我有两个表：`users`和`resumes`. 以下是他们的架构片段：

```
users:
    id  signup_time
resumes:
    id  user_id  modified_time 
```

现在，我需要在用户指定的时间范围内（所有日期都是 UNIX 时间戳）获取所有没有简历的用户的总数，按天、周或月分组 - 按他们没有上传简历的日期， 一般来说。这是最困扰我的，因为如果不是分组，查询可能如下所示：

```
SELECT u.id FROM `jb_users` u WHERE
    u.id NOT IN (
        SELECT r.user_id FROM `jb_resumes` r
        WHERE (r.modified_time BETWEEN 1330581600 AND 1335848399)
    ) AND u.signup_time >= 1330581600 
```

例如，让我们考虑一些例子。希望这样更容易理解。

假设我们有数据：

```
users
    id  signup_time
    ---------------
    1   1340214369 (20.06.2012)
    2   1330754400 (03.03.2012)
    3   1329285600 (15.02.2012)
    4   1324447200 (21.12.2011)
resumes
    id  user_id  modified_time
    --------------------------
    1   1        1340214369 (20.06.2012)
    2   2        1330840800 (04.03.2012)
    3   2        1340214369 (20.06.2012)
    4   3        1334506920 (15.04.2012)
    5   3        1334638800 (17.04.2012)
    6   2        1334638800 (17.04.2012)
    7   3        1336798800 (12.05.2012) 
```

对于时间范围 01.03.2012 00:00:00 - 30.04.2012 23:59:59（按月分组），它应该返回：

```
count   user_ids    time
2       3,4         1330840800 (03.2012 - can be any date in the month, in fact)
1       4           1334506920 (04.2012 - can be any date in the month, in fact) 
```

对于相同的时间范围，但每天分组，它应该返回：

```
count   user_ids    time
2       3,4         1330840800 (04.03.2012)
2       2,4         1334506920 (15.04.2012)
1       4           1334638800 (17.04.2012) 
```

我希望这个问题足够清楚。如果没有，请告诉我。

数据将使用 PHP 处理，因此如果使用单个查询（即使使用子查询）无法实现，也可以使用 PHP 处理数据。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:56:58.040

这是我提出的按月分组的解决方案。我在本地 MySQL 安装中使用了您的数据来测试结果：

```
SELECT 
    COUNT(*) AS cnt,
    GROUP_CONCAT(b.id ORDER BY b.id) AS user_ids,
    a.monthgroup

FROM 
(
    SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY monthgroup
) a
CROSS JOIN 
    jb_users b
LEFT JOIN
    jb_resumes c ON 
        b.id = c.user_id 
        AND a.monthgroup = MONTH(FROM_UNIXTIME(modified_time))
WHERE
    b.signup_time < UNIX_TIMESTAMP('2012-04-30 23:59:59')
    AND c.user_id IS NULL
GROUP BY
    a.monthgroup
ORDER BY
    a.monthgroup 
```

![结果集](../Images/3c07745e7d431d468582cc46a1893f28.png)

这有点笨拙，所以我要看看我是否能想出一个更优雅的解决方案。

日分组解决方案：

```
SELECT 
    COUNT(*) AS cnt,
    GROUP_CONCAT(b.id ORDER BY b.id) AS user_ids,
    a.daygroup

FROM 
(
    SELECT MAKEDATE(YEAR(FROM_UNIXTIME(modified_time)), DAYOFYEAR(FROM_UNIXTIME(modified_time))) AS daygroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY daygroup
) a
CROSS JOIN 
    jb_users b
LEFT JOIN
    jb_resumes c ON
        b.id = c.user_id
        AND a.daygroup = MAKEDATE(YEAR(FROM_UNIXTIME(modified_time)), DAYOFYEAR(FROM_UNIXTIME(modified_time)))
WHERE
    b.signup_time < UNIX_TIMESTAMP('2012-04-30 23:59:59')
    AND c.user_id IS NULL
GROUP BY
    a.daygroup
ORDER BY
    a.daygroup 
```

**编辑：月份分组查询的解释**：

*由于您要求对解决方案进行解释，因此我是这样想的：*

我们首先要做的是从`modified_time`一个时间范围内的所有 s 中提取月份分组：

```
SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
FROM jb_resumes
WHERE modified_time BETWEEN 
    UNIX_TIMESTAMP('2012-03-01 00:00:00') 
    AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
GROUP BY monthgroup 
```

导致：

![第1步](../Images/c16c990ec2142a0d64a11820a3f25fe1.png)

然后为了比较`monthgroup`每个用户的组合，找出哪些用户在 内没有修改时间，我们必须在和所有用户`monthgroup`之间做一个笛卡尔积。`monthgroup`由于上面的查询已经使用 a `GROUP BY`，我们不能直接加入该查询，而是必须将其包装在一个子选择中才能进入`FROM`子句：

```
SELECT 
    a.monthgroup,
    b.*
FROM 
(
    SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY monthgroup
) a
CROSS JOIN 
    jb_users b
--
ORDER BY a.monthgroup, b.id #for clarity's sake 
```

导致：

![第2步](../Images/4c0bb459f5ead38ab18e3301824560d5.png)

现在我们有了`monthgroup`s 和 all `id`s 的组合，但是我们不想包括晚于时间范围的用户，所以我们通过在我们的子句`signup_time`中引入第一个条件来过滤掉它们：`WHERE`

```
SELECT 
    a.monthgroup,
    b.*
FROM 
(
    SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY monthgroup
) a
CROSS JOIN 
    jb_users b
WHERE
    b.signup_time < UNIX_TIMESTAMP('2012-04-30 23:59:59')
--
ORDER BY a.monthgroup, b.id #for clarity's sake 
```

导致：

![第 3 步](../Images/188e771f36fe8187f4ea0aa0b9c7f6ec.png)

通知`id` `1`已被过滤掉。**现在**我们可以通过以下方式进行比较`LEFT JOIN`：

```
SELECT 
    a.monthgroup,
    b.*,
    c.*
FROM 
(
    SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY monthgroup
) a
CROSS JOIN 
    jb_users b
LEFT JOIN
    jb_resumes c ON 
        b.id = c.user_id 
        AND a.monthgroup = MONTH(FROM_UNIXTIME(modified_time))
WHERE
    b.signup_time < UNIX_TIMESTAMP('2012-04-30 23:59:59')
--
ORDER BY a.monthgroup, b.id #for clarity's sake 
```

导致：

![第4步](../Images/fdb14cb3ebf6d8a2878b67a65c7f2469.png)

在这里，我们`LEFT JOIN`的条件是用户在其中进行了简历修改，`jb_resumes` ***并且***修改发生在该`monthgroup`值的月份内。如果用户在该月没有修改简历，则`LEFT JOIN`返回`NULL`表中的值。我们*希望*那些条件不满足的用户，因此我们必须将第二个条件放在`WHERE`子句中：

```
SELECT 
    a.monthgroup,
    b.*,
    c.*
FROM 
(
    SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY monthgroup
) a
CROSS JOIN 
    jb_users b
LEFT JOIN
    jb_resumes c ON 
        b.id = c.user_id 
        AND a.monthgroup = MONTH(FROM_UNIXTIME(modified_time))
WHERE
    b.signup_time < UNIX_TIMESTAMP('2012-04-30 23:59:59')
    AND c.user_id IS NULL
--
ORDER BY a.monthgroup, b.id #for clarity's sake 
```

导致：

![第 5 步](../Images/a4a4ccaf67595546547634fea7bed7f4.png)

最后，我们可以在`monthgroup`字段上进行分组并放入我们的`COUNT()`和`GROUP_CONCAT()`函数：

```
SELECT 
    COUNT(*) AS cnt,
    GROUP_CONCAT(b.id ORDER BY b.id) AS user_ids,
    a.monthgroup

FROM 
(
    SELECT MONTH(FROM_UNIXTIME(modified_time)) AS monthgroup
    FROM jb_resumes
    WHERE modified_time BETWEEN 
        UNIX_TIMESTAMP('2012-03-01 00:00:00') 
        AND UNIX_TIMESTAMP('2012-04-30 23:59:59')
    GROUP BY monthgroup
) a
CROSS JOIN 
    jb_users b
LEFT JOIN
    jb_resumes c ON 
        b.id = c.user_id 
        AND a.monthgroup = MONTH(FROM_UNIXTIME(modified_time))
WHERE
    b.signup_time < UNIX_TIMESTAMP('2012-04-30 23:59:59')
    AND c.user_id IS NULL
GROUP BY
    a.monthgroup
ORDER BY
    a.monthgroup 
```

给我们想要的结果：

![结果集](../Images/3c07745e7d431d468582cc46a1893f28.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:42:33.907

试试这个 ：

```
 SELECT count(u.id) FROM `jb_users` u WHERE
        u.id NOT IN (
            SELECT distinct r.user_id FROM `jb_resumes` r
            WHERE (r.modified_time BETWEEN 1330581600 AND 1335848399)
 ) AND u.signup_time >= 1330581600 GROUP BY FROM_UNIXTIME(u.signup_time) ORDER BY u.signup_time 
```

[FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)会将 unix 时间戳返回为日期格式。

它将按日期返回特定时间范围组内的总用户数。您可以根据需要转换日期格式。

我在内部选择查询中添加了**DISTINCT**关键字，因为一个用户可以多次更新简历，否则您也可以获得甚至不在该日期范围之间的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:01:13.673

不确定这是否可行，但您可以尝试使用 if 加入。

```
SELECT DISTINCT
if(r.modified_time NOT BETWEEN 1330581600 AND 1335848399, u.id, null) as UID
FROM `jb_users` u 
Left Join `jb_resumes` r ON u.id = r.user_id
WHERE
u.signup_time >= 1330581600 
```

# vb.net - 如何在 VB.NET 中删除事件处理程序

> ID：11125918
> 
> 赞同：7
> 
> 时间：2012-06-20T18:31:26.210
> 
> 标签：vb.net, winforms, handler

> **可能重复：**
> [VB.NET RemoveHandler 和匿名方法](https://stackoverflow.com/questions/7447168/vb-net-removehandler-anonymous-methods)

如果我添加这样的事件处理程序：

```
AddHandler s.Click, AddressOf Panel1_Click 
```

我怎样才能删除事件处理程序？

```
Private Sub Panel1_click(ByVal sender As Object, ByVal e As System.EventArgs)
    ' Remove code
End Sub 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T18:32:48.713

您可以使用`RemoveHandler`运算符执行此操作，例如：

```
Private Sub Panel1_click(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim panel As Panel = CType(sender, Panel)
    RemoveHandler panel.Click, AddressOf Panel1_Click
End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T18:33:06.157

与您添加它的方式相同：

```
RemoveHandler s.Click, AddressOf Panel1_Click 
```

[参考](https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/statements/removehandler-statement)

# cygwin - cygwin以Windows用户身份启动可执行文件的Windows路径

> ID：11125919
> 
> 赞同：0
> 
> 时间：2012-06-20T18:31:32.123
> 
> 标签：cygwin

cygwin 中是否有办法以 Windows 用户身份启动可执行文件的 Windows 路径？我正在使用 jEdit，当我启动 jedit.exe 时，它​​无法启动。只是有点坐在那里。当我从 Windows 启动时，效果很好。我可以使用 cygutils 什么的吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:30:23.007

使用`cygstart`. 它本质上等同于 Windows 的运行对话框：

```
cygstart notepad                        # Opens Notepad
cygstart .                              # Opens Explorer in the current directory
echo 'Hi' >file.txt ; cygstart file.txt # Opens file.txt in your default text editor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:06:08.787

原来我做了一些愚蠢的事情。我从没有打开 -X windows 的 SSH 终端启动程序。一旦我去了一个 cygwin 本地终端......程序运行良好。

实际问题是 jedit 进程隐藏了错误消息“No x display”等。这就是造成混乱的原因。

# linux - 判断getaddrinfo返回的addrinfo结构中哪些属于当前机器

> ID：11125921
> 
> 赞同：1
> 
> 时间：2012-06-20T18:31:34.260
> 
> 标签：linux, sockets, networking, getaddrinfo

我打电话`getaddrinfo`。它返回匹配地址的列表。其中一个属于发出呼叫的机器。我如何确定它是哪一个？

如果没有办法这样做，我还能做些什么来可靠且可移植地确定当前机器上特定网络接口的 IP 地址吗？

如果没有可移植的方式，Linux特有的方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:18:13.420

找到了一个函数，可以枚举所有网络接口并获取有关它们的信息，包括 IP 地址。该函数是[getifaddrs](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)，但请注意它似乎不可移植。无论如何，这暂时解决了我的问题。

# node.js - 如何通过node.js将cookie从couchd传递给客户端

> ID：11125923
> 
> 赞同：0
> 
> 时间：2012-06-20T18:31:41.107
> 
> 标签：node.js, cookies, couchdb, express

CouchDB 通过它的 _session API (http://wiki.apache.org/couchdb/Session_API) 内置了身份验证，但是我无法通过 node.js 将它提供的 cookie 传递给客户端

这是我的代码（我正在使用 express.js 登录是路由）：

```
exports.login = function(req, res){
  var request = require('request');

  var userData = {
    "name":req.body.email,
    "password": req.body.password
  };

  request.post({
    'url': 'http://wamoyo.iriscouch.com/_session',
    'json': userData,
  }, function (error, response, body) {
    if (!error && response.statusCode == 200) {
      console.log(body);
    }

    request('http://wamoyo.iriscouch.com/_session', function (error, response, body) {
      console.log(response.request.req._headers);
      // Write the Cookie
      res.setHeader("Set-Cookie", response.request.req._headers.cookie);
      return res.render('index', { title: 'BasicChat' })
    });
  });

}; 
```

这似乎不起作用，我也不知道调试它的好方法。任何帮助都会摇滚！

我的后备方案是像这样使用 Jquery Couch 插件：(https://wamoyo.iriscouch.com/loginer/_design/Loginer/attachments%2findex.html) 但是有很多原因会导致这很糟糕。

另外，我意识到这段代码还没有效率，我只是想让它现在工作。很抱歉，如果它很乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:10:40.863

看来我又找到你了，亲爱的网友：）

`nano`实现了这一点，如果你喜欢，你可以使用它：

*   [https://github.com/dscape/nano#using-cookie-authentication](https://github.com/dscape/nano#using-cookie-authentication)

这是一篇关于它的博客文章：

*   [http://mahoney.eu/2012/05/23/couchdb-cookie-authentication-nodejs-nano/#.T-JYHCtYsm8](http://mahoney.eu/2012/05/23/couchdb-cookie-authentication-nodejs-nano/#.T-JYHCtYsm8)

这是一个示例（来自 nano 的实际测试代码）

*   [https://github.com/dscape/nano/blob/master/tests/shared/cookie.js#L15-#L51](https://github.com/dscape/nano/blob/master/tests/shared/cookie.js#L15-#L51)

# html - 简单的 html div 衬里“错误”

> ID：11125930
> 
> 赞同：0
> 
> 时间：2012-06-20T18:32:05.547
> 
> 标签：html, css

所以我有这个相当奇怪的问题，我正在尝试排列一些`divs`但我遇到了这个奇怪的问题。假设如果我放入`<input type="checkbox" />`一个 div 并尝试将它与其他 div 排在同一行中，无论我尝试什么都行不通，但是如果我向第二个 div 添加一些文本，它突然开始工作，为什么会这样发生？

这是我的代码示例，可以让事情更清晰：http: [//jsfiddle.net/wxgVw/2/](http://jsfiddle.net/wxgVw/2/)

```
<div id="container">
    <div id="container2">
        <div id="left">
            <input type="checkbox" />
        </div>
        <div id="right">

        </div>
    </div>
</div>

body{
    margin:50px;
}

#container{
    width:770px;
    height:400px;
    border:1px solid red;
}

#container2{
    width:700px;
    height:50px;
    margin:10px;
    outline:1px solid red;
    padding:10px;
}

#left{
    width:30px;
    height:30px;
    outline:1px solid green;
    display:inline-block;
    zoom:1;
    *display:inline;
}

#right{
    width:400px;
    height:30px;
    outline:1px solid black;
    display:inline-block;
    zoom:1;
    *display:inline;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:34:41.303

每当你使用`display: inline-block`它总是一个好主意，也指定`vertical-align: top`（或`bottom`取决于你想要什么）。这将防止这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:37:48.767

您也可以使用 float 属性。只需将两个 div 浮动到左侧并确保 overflow: hidden 设置为上面的容器以防止浮动问题。

我编辑了你的样本：http: [//jsfiddle.net/wxgVw/4/](http://jsfiddle.net/wxgVw/4/)

```
#container2{
    width:700px;
    height:50px;
    margin:10px;
    outline:1px solid red;
    padding:10px;
    overflow:hidden;
}

#left{
    width:30px;
    height:30px;
    outline:1px solid green;
    float:left;
}

#right{
    width:400px;
    height:30px;
    outline:1px solid black;
    float:left;
} 
```

# java - 从 Scala 调用 Java vararg 方法时 :_* 做了什么？

> ID：11125931
> 
> 赞同：27
> 
> 时间：2012-06-20T18:32:15.143
> 
> 标签：java, scala

> **可能重复：（**[冒号下划线星号）在 Scala 中做了什么](https://stackoverflow.com/questions/6051302/what-does-colon-underscore-star-do-in-scala)
> [？`:_*`](https://stackoverflow.com/questions/6051302/what-does-colon-underscore-star-do-in-scala)

我正在使用 REPL 调用带有 Scala 数组的 Java vararg 方法。

如果我这样做，我会得到一个错误：

```
case class Person(name: String, age: Int)
val array = Array(classOf[String], classOf[Int])
Person.getClass.getMethod("apply", array) 
```

但是，如果我这样做，那么它会起作用：

```
Person.getClass.getMethod("apply", array:_*) 
```

我的问题是`:_*`做什么？它在 Scala API 中定义在哪里？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-20T18:43:03.257

添加`:_*`告诉编译器将数组视为可变参数。它在 Scala 和 Java 中的工作方式相同。如果我有方法

```
def foo(args: Int*) = args.map{_ + 1} 
```

我可以这样称呼它：

```
foo(1, 2, 3, 4) //returns ArrayBuffer(2, 3, 4, 5) 
```

但是如果我想将一个实际的序列传递给它（就像你一样`getMethod`），我会这样做：

```
val mylist = List(1, 2, 3, 4)
foo(mylist:_*) 
```

# android - OnTabChangeListener 空指针

> ID：11125934
> 
> 赞同：0
> 
> 时间：2012-06-20T18:32:39.317
> 
> 标签：android

我正在尝试在 TabHost 中创建选项卡的自定义颜色。

我已经实现`OnTabChangeListener`并且 MainActivity 正确加载。但是，当我单击一个新选项卡时，我得到一个空指针。我的错误在哪里？我无法理解问题所在。

[这是基于此示例](http://www.androidpeople.com/android-tabhost-tutorial-%E2%80%93-part-2)的违规代码

```
@Override  
public void onTabChanged(String tabId) {  
     for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
     {  
        tabHost.getTabWidget().getChildAt(i).setBackgroundDrawable(getResources().getDrawable(R.drawable.greygradient));  
     }
     tabHost.getTabWidget().getChildAt((tabHost.getCurrentTab())).setBackgroundDrawable(getResources().getDrawable(R.drawable.bluegradient));
} 
```

这是跟踪：

```
06-20 14:27:42.770: E/AndroidRuntime(1490): java.lang.NullPointerException
06-20 14:27:42.770: E/AndroidRuntime(1490):     at com.company.app.MainActivity.onTabChanged(MainActivity.java:72)
06-20 14:27:42.770: E/AndroidRuntime(1490):     at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:359)
06-20 14:27:42.770: E/AndroidRuntime(1490):     at android.widget.TabHost.setCurrentTab(TabHost.java:344)
06-20 14:27:42.770: E/AndroidRuntime(1490):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:132)
06-20 14:27:42.770: E/AndroidRuntime(1490):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:456)
06-20 14:27:42.770: E/AndroidRuntime(1490):     at android.view.View.performClick(View.java:2485)
06-20 14:27:42.770: E/AndroidRuntime(1490):     at android.view.View$PerformClick.run(View.java:9080) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:40:31.797

您应该使用 StackOverflow 示例：[如何更改 Android 选项卡小部件的背景？](https://stackoverflow.com/questions/2099959/how-do-i-change-the-background-of-an-android-tab-widget/3936685#3936685):-)

```
@Override  
public void onTabChanged(String tabId) {
    setTabColor(getTabHost());
}

private void setTabColor(TabHost tabhost) {
    for(int i=0;i<tabhost.getTabWidget().getChildCount();i++)
    {
        tabhost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#FF0000")); //unselected
    }
    tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab()).setBackgroundColor(Color.parseColor("#0000FF")); // selected
} 
```

**NullPointer 最可能的原因是您的 TabHost**，请检查它是否正在实例化，我假设您在 onCreate 中执行此操作。

如果您正在扩展 TabActivity，您可以`getTabHost();`从您的 Activity 上下文中调用。

# windows-phone - 仅使用 WP7 设备为 WP8 开发？

> ID：11125942
> 
> 赞同：2
> 
> 时间：2012-06-20T18:33:06.610
> 
> 标签：windows-phone, windows-phone-8

我从今天的 WP8 活动中不明白：我是否能够开发适用于 7.5 和 8 的应用程序，只有一个 7.5 (7.8) 设备进行测试？

我不喜欢 WP 模拟器，尽管它比 iOS/Android 更好。我知道在 Visual Studio 2012 中它会变得更好。但是还是！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:56:39.917

当前运行 Windows Phone 7.X 的设备将能够升级到 Windows Phone 7.8，但不能升级到 Windows Phone 8。

如果您想使用特定于 WP8 的功能，您要么必须等待硬件，要么使用 eumlator（如果可用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T15:58:13.233

> 我不喜欢 WP 模拟器

但你应该。Windows Phone 8 模拟器是一个功能齐全的 Hyper-V 模拟器，甚至可以运行非托管代码。

正如 Matt 所指出的，您将无法将 Windows Phone 8 应用程序部署到您的 Windows Phone 7 设备上，因此您需要新设备或使用模拟器。

由于 SDK 可能会在任何设备之前发布，我强烈建议您在仿真器中进行开发，直到真正的设备上市。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T18:22:46.967

您必须使用 Windows Phone 8 模拟器，或者交叉手指，相当于 XDA-Developers for Windows Phone 植根于您的手机型号，并且能够让 Windows 8 工作（提示：不太可能）

不过，Windows Phone 8 模拟器确实非常好。唯一的大麻烦是它需要硬件 Hyper-V 支持和 Windows 8。这意味着您无法在大多数虚拟化技术中运行手机模拟器。但是，我一直在使用 VMWare 9，它似乎包含一个“不受支持”的功能以允许 Hyper-V 工作。所以运行手机模拟器的唯一选择是购买 VMWare 9 或将物理机升级到 Windows 8

# php - 如何将字符串与 Xpath 1.0 进行比较？

> ID：11125944
> 
> 赞同：7
> 
> 时间：2012-06-20T18:33:20.307
> 
> 标签：php, xslt, xpath, xslt-1.0

我`<`在 Xpath 1.0 中遇到了字符串运算符的问题。

这个简单的 Xpath 表达式

```
'A' < 'B' (or the equivalent 'A' &lt; 'B') 
```

在我在 libxslt（这是一个 XSLT 1.0 引擎）中运行的 xslt 中没有评估为 true。

我检查了 XML Spy，它允许在 1.0 和 2.0 中测试 Xpath 表达式，果然，在 Xpath 2.0 中它的计算结果为`true`，但在 Xpath 1.0 中它的计算结果为`false`！

这是 Xpath 1.0 中的错误吗？

我应该使用什么其他表达式来比较两个字符串/字符的字母顺序？请注意，compare() 函数不起作用，因为这是一个 XSLT 2.0 函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T19:39:24.527

在 XPath 1.0 中，字符串比较仅针对`=`and定义`!=`，排序比较不可用。规范说

> 当要比较的对象都不是节点集并且运算符是 <=、<、>= 或 > 时，则通过将两个对象都转换为数字并根据 IEEE 754 比较数字来比较对象。

因此，您的两个操作数都被转换为浮点数，使它们都是 NaN。

我相信 Microsoft 的 XML 添加了扩展函数来处理这个问题，但当然这只有在您使用 MSXML 时才有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T21:43:38.220

是的，这是 XPath 1.0 的限制。（我认为将您不喜欢的限制称为“错误”是不合理的，尽管 XPath 2.0 的设计者显然同意您认为这是一个不受欢迎的限制）。

您已将问题标记为“xslt”，因此您可以在 XSLT 级别解决该问题，至少如果您的处理器具有节点集扩展：

```
<xsl:variable name="nodes">
  <node><xsl:value-of select="$A"/></node>
  <node><xsl:value-of select="$B"/></node>
</xsl:variable>

<xsl:for-each select="exslt:node-set($nodes)/*">
  <xsl:sort select="."/>
  <xsl:if test="position()=1 and .=$A">A comes first!</xsl:if>
</xsl:for-each> 
```

但也许是时候迁移到 2.0 了。是什么阻碍了你？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T06:38:50.110

希望这也证明对其他人有用，下面是我根据 Michael Kay 的建议编写的代码。我编写了一个自定义`compare`函数，它给出了与 Xpath 2.0 相同的结果。我还将`php`标签添加到问题中，以便更频繁地找到它。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:func="http://exslt.org/functions"
    xmlns:common="http://exslt.org/common"
    xmlns:custom="urn:myCustomFunctions"
    exclude-result-prefixes="func common custom" 
    extension-element-prefixes="func custom">

    <xsl:output method="xml"/>

    <func:function name="custom:compare">
        <xsl:param name="string1"/>
        <xsl:param name="string2"/>

        <func:result>
            <xsl:choose>
                <xsl:when test="$string1 = $string2">0</xsl:when>
                <xsl:otherwise>
                    <xsl:variable name="nodes">
                        <node><xsl:value-of select="$string1"/></node>
                        <node><xsl:value-of select="$string2"/></node>
                    </xsl:variable>
                    <xsl:for-each select="common:node-set($nodes)/*">
                        <xsl:sort select="."/>
                        <xsl:choose>
                            <xsl:when test="position()=1 and .=$string1">-1</xsl:when>
                            <xsl:when test="position()=1 and .=$string2">1</xsl:when>
                        </xsl:choose>
                    </xsl:for-each>
                </xsl:otherwise>
            </xsl:choose>
        </func:result>
    </func:function>

    <xsl:template match="/">
        <out>
            <test1><xsl:value-of select="custom:compare('A', 'B')"/></test1>
            <test2><xsl:value-of select="custom:compare('A', 'A')"/></test2>
            <test3><xsl:value-of select="custom:compare('C', 'B')"/></test3>
            <test4><xsl:value-of select="custom:compare('DD', 'A')"/></test4>
        </out>
    </xsl:template>

</xsl:stylesheet> 
```

运行这个（使用虚拟输入）的结果是

```
<?xml version="1.0"?>
<out>
    <test1>-1</test1>
    <test2>0</test2>
    <test3>1</test3>
    <test4>1</test4>
</out> 
```

对于那些希望自己在 php 中测试的人，这是我使用的代码：

```
<?php 
$xslt = new XSLTProcessor();
$xslt->importStylesheet( DOMDocument::load('testCompare.xslt') );
$xslt -> registerPHPFunctions();
$xml = new SimpleXMLElement('<test/>'); 
print $xslt->transformToXML( $xml );
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T19:11:46.380

这可能是丑陋的解决方案，并且在许多情况下不可行，但是对于简单的字母顺序比较，您可以使用`translate`. 以下片段只是一个可以进一步扩展的示例：

```
 translate('A','ABCD','1234') &lt; translate('B','ABCD','1234'); 
```

您的翻译表达式应涵盖所有字母，大写和小写，并且可以通过定义命名模板方便地重用。

# android - 如何定义哪个小部件应放置在主屏幕上以及恢复出厂设置后放置在哪个位置？

> ID：11125947
> 
> 赞同：1
> 
> 时间：2012-06-20T18:33:30.760
> 
> 标签：android, android-widget, android-firmware

假设我的 apk 使用平台密钥签名并作为系统的一部分：

我的应用程序有一个小部件，我想在从出厂重置重新启动设备后立即将其放置在（系统的默认设置 - Galaxy Tab P7500，Android 3.2）主屏幕上 - 就像在你之后谷歌搜索小部件已经存在一样'正在恢复出厂设置。

**我的问题是：它到底是在哪里定义的，哪个小部件应该放在主屏幕上，在出厂重置时放在哪个位置？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:16:26.060

看`AppWidgetService`和`/data/system/appwidgets.xml`。它将小部件提供者（应用程序）与小部件主机（启动器等）相匹配。小部件出现的确切位置由启动器本身使用 appWidgetId 进行控制以供参考。对于默认启动器（在 ICS 上），它保存在 launcher.db 数据库中。

所以如果你添加它`appwidgets.xml`并给它一个ID，然后在数据库中插入正确的行，它*应该*会出现在主屏幕上。

# java - 我需要 N 体分子模拟性能方面的帮助！！（java 小程序）

> ID：11125948
> 
> 赞同：1
> 
> 时间：2012-06-20T18:33:31.703
> 
> 标签：java, arrays, performance, optimization, particles

我在我的毕业项目上做了一些工作，并在 Lennard-Jones 势和库仑势下实现了几个分子结构 + 力计算 + 分子间键合（如图）

(http://img17.imageshack.us/img17/3133/simulasyon.png)

全部使用 Verlet 算法在一个线程中完成。

问题是：我正在使用“计算表”-array 来快速回答 x^(3.5),x^(1.4), (1/x).... 因为使用 java 的本机方法计算非常慢. 数组 - 访问时间真的很长，所以我尝试了“unsafe()”方法，但仍然很慢（只有 %10 的性能提升）。

试过 IntBuffer 和 DoubleBuffer 还是不行。

程序计算 O(n) 键计算，O(nlog(n)) Lennard-Jones（+ 额外泡利不相容原理）和 O(nlog(n)) 库仑力计算。1500+ 个粒子（和 7000+ 个键）的速度很差。

我已经检查了速度瓶颈在哪里（它是 Lennard Jones + Coulomb）。1500 个粒子的一个时间步计算需要 4 毫秒。我需要它是 1 毫秒。

只有当我可以像使用任何其他语言一样快地使用数组时（安全与否）。

还尝试用乘法和哈希图和列表替换除法（与数组的性能相同）。

你知道减少每个时间步的计算时间的任何其他方法吗？谢谢你。计算机：2.0 GHz 单核英特尔、1.2GB RAM、windows-XP SP-3 和 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-14T02:50:16.973

尝试使用 Chebyshev 多项式，而不是使用查找表。请记住，您只能在 ln(k) 步中对 x^k 求幂。

看起来可能有很多操作，但是 in 可以在不影响内存的情况下完成（因此不会影响缓存）这一事实可以使其比查找表快得多。

# performance - Powershell 获取 CPU 百分比

> ID：11125950
> 
> 赞同：3
> 
> 时间：2012-06-20T18:33:37.883
> 
> 标签：performance, powershell, cpu

关于如何在 Powershell 中获取进程的 CPU 百分比似乎没有任何简单的解释。我已经用谷歌搜索并在这里搜索过，但我没有看到任何确定的东西。有人可以用外行的方式解释如何获得进程的 CPU 百分比吗？谢谢！

这是让您入门的东西；）

```
$id4u = gps | ? {$_.id -eq 412}
function get_cpu_percentage {
# Do something cool here
}
get_cpu_percentage $id4u 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:00:11.380

使用 WMI：

```
get-wmiobject Win32_PerfFormattedData_PerfProc_Process | ? { $_.name -eq 'powershell' } | select name,  PercentProcessorTime 
```

功能：

```
 function get_cpu_percentage ($id )
{
(get-wmiobject Win32_PerfFormattedData_PerfProc_Process | ? { $_.idprocess -eq $id.id }).PercentProcessorTime
}

$id4u = gps | ? {$_.id -eq 412}
get_cpu_percentage -id $id4u 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T18:40:15.740

How about this?

```
gps powershell_ise | Select CPU 
```

Mind you, this is a scriptProperty and won't show anything for remote systems. This is known.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T11:02:00.213

get-counter 提供有关系统性能的信息。您也可以获取有关单个进程的信息。这里有更多关于它的信息：http: [//social.technet.microsoft.com/Forums/lv/winserverpowershell/thread/8d7502d4-9e67-43f7-94da-01755b719cf8](http://social.technet.microsoft.com/Forums/lv/winserverpowershell/thread/8d7502d4-9e67-43f7-94da-01755b719cf8)和这里[http://blogs.technet.com/b/ heyscriptingguy/archive/2010/02/16/hey-scripting-guy-february-16-2010a.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2010/02/16/hey-scripting-guy-february-16-2010a.aspx) 我不确定这是否是您要查找的内容，但这是使用进程名称和获取计数器的一种可能性.

注意：如果您有超过 1 个处理器，我相信您应该将结果除以处理器数量。您可以使用以下方法获取此值：

```
$env:NUMBER_OF_PROCESSORS

    function get_cpu_percentage {
    param([string[]]$myProc)
    return (get-counter -Counter "\Process($myProc)\% processor time" -SampleInterval 5 -MaxSamples 5 | select -ExpandProperty countersamples | select -ExpandProperty cookedvalue | Measure-Object -Average).average
    }
    get_cpu_percentage ("powershell") 
```

或使用 proc id 和 gps：

注意：我相信 get-process 返回的值是该进程自启动以来使用的 CPU 秒数。这不是使用的 cpu 百分比。

```
 function get_cpu_since_start{
    param ([system.object]$p)
    $id4ucpu = $p | select-object CPU
    return $id4ucpu.CPU
    }
get_cpu_since_start (gps | ? {$_.id -eq 412}) 
```

# jquery - IE 工具提示在负悬停时显示

> ID：11125955
> 
> 赞同：1
> 
> 时间：2012-06-20T18:33:47.513
> 
> 标签：jquery, css, tooltip

我正在制作一大包带有 CSS3 动画和过渡的工具提示，它们都可以工作，即使在具有后备功能的 IE 中也是如此，因此它们只显示在文本上方。

我正在使用以下内容来显示实际的工具提示。

```
.tooltip span {
width:200px;
height:auto;
padding: 5px;
left: 50%;
margin-left: -110px;
font-family:Verdana, Geneva, sans-serif;
font-size: 12px;
color: #000;
text-align: center;
border: 5px solid #57a0d8;
background:#FFF;
text-indent: 0px;
position: absolute;
pointer-events: none;
bottom: -120px;
opacity: 0;
text-shadow: 0 1px 0 rgba(255,255,255,.4);
box-shadow: 0px 0px 8px rgba(0,0,0,0.4); 
```

其余的只是简单的动画。现在，当我将鼠标悬停在 IE 中实际工具提示下方 120 像素处时，它会显示该工具提示。这是因为

```
bottom:-120px; 
```

在 CSS 中。

我正在使用 jQuery 尝试使用以下内容覆盖此问题：

**编辑：**

**新的 JS：**

```
 $(function() {
if ($.browser.msie && parseInt($.browser.version) < 9)
    {     
              $('.tooltip span').hide(); 
          $(".tooltip").hover(function() {
$(this).find('span').addClass(".bottomfix");
}, function() {
$(this).find('span').removeClass(".bottomfix");
});
    }
  }); 
```

**新的 CSS 修复：**

```
.bottomfix {
    bottom:0px;
} 
```

希望有一些有用的信息！代码有效，除了 CSS 更改。我一定做错了什么。是否有任何可能的解决方案我可以在 CSS 中更改以修复 IE 或使用 jQuery 的解决方案？

**编辑2：**

它在 IE8 中运行良好 - 但在 IE9 中悬停在 120px 底部边界内时仍会显示工具提示。迷茫不是这个词！

非常感谢您的帮助，我希望这足以让您了解我的意思！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:45:48.997

我认为您需要更改以下几行：

```
jQuery(this).addClass(".tooltip span"); 
```

至

```
jQuery(this).addClass("tooltip span"); 
```

不要使用`.className`with`addClass`或`removeClass`只使用没有点 like 的名称`className`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:50:18.223

改变

```
$(this).addClass(".tooltip span"); 
```

至

```
$(this).find('span').addClass("newStyle"); 
```

与`removeClass`

还，

在 CSS 中将样式名称从更改`.tooltip span`为。`.newStyle`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:14:38.947

如果您使用`display:none`而不是`opacity:0;`. 像这样写：

```
.tooltip span{
 display:none;
} 
```

# recursion - Pypy：为什么“更简单”的嵌套列表需要更长的时间才能展平？

> ID：11125957
> 
> 赞同：1
> 
> 时间：2012-06-20T18:34:02.310
> 
> 标签：recursion, pypy, flatten

我需要展平一些嵌套列表。写完 flatten 函数后，我自然是想看看有多少种方法可以破解它。我终于通过 pypy 运行它，很高兴地发现当列表变得非常深时，pypy 的运行速度明显快于 cpython。

但是，我看到一个奇怪的情况，一个更大、更复杂的列表、更多种类的元素的测试实际上比“更简单”的列表执行得更快。

元素较少的测试 1 的运行速度始终比测试 2 慢大约一秒（使用时间 pypy ./script.py）。

```
def flatten(lol):
    if not any([isinstance(i, list) for i in lol]):
        return lol

    flatter = [i for i in lol if not isinstance(i, list)]
    for sublist in lol:
        if isinstance(sublist, list):
            flatter.extend(sublist)
    return flatten(flatter)

def silly(l):
    return [l, [l]]

nested_function = [["kaplutis", ["mucus", ["my brain", ["is","filled",["with",["pus",]]]]]], "santa gertrudis",[[[[["innermost",flatten(["in", "func"])]]]]]]

tuples = ["empty tuple retained-->", (), ("2-tuple not flattened",), ("I'm the only thing in this tuple")]

dicts = [{"hip": "hop", "ster": "toad"}]

lone_dict = {"lone": 1, "dict": 2}

silly_list = ["1"]
for i in range(20):
    silly_list = silly(silly_list)

# test 1 - only the absurdly nested list
print(len(flatten(silly_list)))

# test 2 - absurdly nested list, with 
lol = [nested_function, tuples, dicts, lone_dict, silly_list]
print(len(flatten(lol))) 
```

我唯一能想到的是，当 JIT 在第二个测试中处理“silly_list”之前的更简单的嵌套列表时，我遇到了一些意外的优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:07:33.637

这个特殊的 flatten 函数确实在 cpython 和 pypy 中遇到了各种不好的性能点

我们前段时间在 irc 上发现了它，修复是创建一个完全不同的 flatten 函数，它在 cpython 中更快，在 pypy 上更快

我不记得网址了，如果 OP 能提供就好了

基本代码是

```
def flatten(items, akk=None)
 if akk is None:
   akk  = []
 for item in items:
   if isinstance(item, list):
     flatten(item, akk)
   else:
     akk.append(item) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:17:39.733

^(包含代码的答案而不是评论)

很难理解你的代码做了什么。确保它是正确的。后期优化。您可以针对以下内容测试结果：

```
def flatten(lst, nonscalar_types=list):
    for x in lst:
        if isinstance(x, nonscalar_types):
            yield from flatten(x) # pep 380
        else:
            yield x # non-list type 
```

### 例子

```
print(sum(1 for _ in flatten(lol))) 
```

# macos - 为 safari/chrome mac 用户嵌入 HTML5 YouTube 视频开始在 div 中播放，显示无属性

> ID：11125959
> 
> 赞同：1
> 
> 时间：2012-06-20T18:34:20.443
> 
> 标签：macos, html, youtube, embed

这是我的第一个问题，非常感谢您的耐心等待。我只对 safari/chrome mac 用户有一个奇怪的问题。这在 IE7、IE8、Chrome、FF 和 safari(windows) 中运行良好。试图确定和隔离与 safari/chrome 浏览器相关的问题，因为它们在页面加载时立即开始播放隐藏 div 中的嵌入视频。

我的公司重新设计了他们的主页，我最近在我们的网站上建立了它。我相当新，这是我第一个带有 JQuery 滑块、HTML5 等的个人网页（我无法在此处提供链接）。

页面说明：

1.  我有一个滑块，它使用 auto-advance.js 文件每 7 秒自动旋转一次图像。
2.  属于此图像列表滑块的图像之一具有“播放视频”按钮。下面是在“播放视频”href单击“隐藏图像”和“显示视频div”上调用javascript函数的图像映射区域

*Javascript函数：*

```
 `function doStuff() {
    $('div#vid').css('display','inline');
    $('img.hid').css('display','none');
    } 
```

`

*这是带有 HTML5 iframe youtube 嵌入代码的隐藏 div：*

```
 `<div style="display:none;" id="vid">
    <iframe class="youtube-player" type="text/html" width="770" height="430"        src="http://www.youtube.com/embed/cPoENdJx5DQ?       wmode=transparent&feature=player_embedded&autoplay=1&rel=0" frameborder="0"        allowfullscreen="false">
    </iframe>
    </div> 
```

` 一切在 Windows 中运行良好，但对于 mac 用户，视频开始在后台播放（因为 div 仍然隐藏，他们会听到视频中的音乐）。为了立即解决这个问题，我不得不在暂时解决了这个问题的网站上关闭了自动播放选项（这里我将其编辑回 1）。

我试图了解为什么 chrome/safari mac 浏览器会在页面加载本身而不是在单击 href“播放视频”按钮时自动播放视频。

我已经进行了详细的研究，只能找到这篇关于这个问题的文章：[http](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/CSS/Q_27722407.html) ://www.experts-exchange.com/Web_Development/Web_Languages-Standards/CSS/Q_27722407.html ，这让我觉得这可能是因为一些代码冲突可能吗？如果是这样，为什么 Windows 中的浏览器运行良好？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:41:15.090

I would suggest:

```
function vidrun(){
    var span = document.createElement("span");
    span.innerHTML = 'code here for video';
    document.getElementById("the surrounding element's id").appendChild(span);
) 
```

This will only add the video when you get to the time you want the video to automatically start playing instead of actually already loading the video and starting it.
All you will have to do to start the video playing when you get to that point is to call the `vidrun()` and done :]

# objective-c - Objective-C / JSON，字典数组，解析嵌套在字典中的数组

> ID：11125960
> 
> 赞同：1
> 
> 时间：2012-06-20T18:34:29.040
> 
> 标签：objective-c, json, parsing, nsarray, nested

我正在解析的 JSON 可以在这里找到“已编辑”。

我可以正确地从这个 JSON 中获取除通知和设备之外的所有对象。我在获取包含“deviceId”的设备字典数组时遇到了很多麻烦。我的代码现在看起来像这样

```
dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL:
                    iViuListOfCustomersURL];

    [self performSelectorOnMainThread:@selector(fetchedData:)
                          withObject:data waitUntilDone:NO];
});

- (void) fetchedData:(NSData *)responseData {
NSError* error;
NSDictionary* json;
    json = [NSJSONSerialization
                          JSONObjectWithData:responseData // 1

                          options:kNilOptions
                          error:&error]; 

    NSArray* customers = json; 

    for(int i = 0; i < customers.count ; i++){
        NSDictionary *customer = [customers objectAtIndex:i];
        cmsServer = [customer objectForKey:@"cmsServer"]; 
        iconUrl = [NSURL URLWithString:[customer objectForKey:@"iconUrl"]];
        wideLogo = [customer objectForKey:@"wideLogo"]; 
        customerNo = [NSNumber numberWithInt:[[customer objectForKey:@"customerNo"] intValue]];
        placeName = [customer objectForKey:@"placeName"];
        distance = [NSNumber numberWithFloat:[[customer objectForKey:@"distance"] floatValue]];
        placeId = [NSNumber numberWithInt:[[customer objectForKey:@"placeId"] intValue]];
        address = [customer objectForKey:@"address"];
        cmsName = [customer objectForKey:@"cmsName"]; 
        hasLocations = [NSNumber numberWithInt:[[customer objectForKey:@"hasLocations"]intValue]];
        isFavorite = [NSNumber numberWithInt:[[customer objectForKey:@"isFavorite"] intValue]];
        longitude = [NSNumber numberWithFloat:[[customer objectForKey:@"longitude"] floatValue]];
        latitude = [NSNumber numberWithFloat:[[customer objectForKey:@"latitude"] floatValue]];
        hasArtifacts = [NSNumber numberWithInt:[[customer objectForKey:@"hasArtifacts"]intValue]];

        // I have tried a number of things and this was what I had for the last try.
        devices = [NSArray arrayWithObject:[customer objectForKey:@"devices"]];
        NSLog(@"%@",devices.count);
    } 
```

}

我对objective-c比较陌生，想自己解决这个问题，但我在这个问题上花了太多时间，没有这些设备ID我无法继续。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:40:24.593

我不知道这是否会有所作为，但您是否尝试过：

```
devices = [NSArray arrayWithArray:[customer objectForKey:@"devices"]]; 
```

您可以尝试的另一件事是浏览其中的元素并将它们逐个添加到设备中：

```
for(DeviceObject *deviceObject in [customer objectForKey:@"devices"])
{
  [devices addObject:deviceObject];
} 
```

您可以查看的另一件事是您有时在 json 中传递的空值。

# grails - Grails：getAll抛出没有方法异常的签名？

> ID：11125961
> 
> 赞同：0
> 
> 时间：2012-06-20T18:34:31.093
> 
> 标签：grails, grails-orm

根据 Grails 文献

[http://grails.org/doc/2.0.x/ref/Domain%20Classes/getAll.html](http://grails.org/doc/2.0.x/ref/Domain%20Classes/getAll.html)

我应该能够做到这一点

```
 def biweeklyBatchRanges = BiweeklyBatchRange.getAll() 
```

没有得到这个

```
 groovy.lang.MissingMethodException: No signature of method: com.myplang.donation.BiweeklyBatchRange.getAll() is applicable for argument types: () values: []
Possible solutions: getAll(), getAt(java.lang.String), getId(), get(java.io.Serializable), getClass(), findAll() 
```

有任何想法吗？蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:42:59.217

除了使用 findAll 之外，从未得到过“答案”。（Grails 2.0.3）

# mysql - 在 MySQL、Grails 2 应用程序较长时间不活动期间保持池连接处于活动状态（或超时并获得新连接）的正确方法

> ID：11125962
> 
> 赞同：38
> 
> 时间：2012-06-20T18:34:33.947
> 
> 标签：mysql, grails, connection-pooling, connector-j

我有一个 grails 应用程序，它有一系列的高活动，但通常会持续几个小时到一整晚的不活动期。我注意到早上的第一批用户会遇到以下类型的异常，我相信这是由于池中的连接过时并且 MYSql 数据库关闭了它们。

我在谷歌搜索中发现了关于使用 Connector/J 连接属性 'autoReconnect=true' 是否是一个好主意（以及即使连接恢复客户端是否仍会出现异常）或是否设置的冲突信息其他属性会定期驱逐或刷新空闲连接、借用测试等。Grails 在下面使用 DBCP。我目前有一个简单的配置，如下所示，并且正在寻找有关如何最好地确保在长时间不活动期后从池中抓取的任何连接有效且未关闭的答案。

```
dataSource {
        pooled = true
        dbCreate = "update"
        url = "jdbc:mysql://my.ip.address:3306/databasename"
        driverClassName = "com.mysql.jdbc.Driver"
        dialect = org.hibernate.dialect.MySQL5InnoDBDialect
        username = "****"
        password = "****"
        properties {
          //what should I add here?
          }
    } 
```

例外

```
 2012-06-20 08:40:55,150 [http-bio-8443-exec-1] ERROR transaction.JDBCTransaction  - JDBC begin failed
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 64,129,968 milliseconds ago.  The last packet sent successfully to the server was 64,129,968 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3851)
    ...... Lots more .......
Caused by: java.sql.SQLException: Already closed.
    at org.apache.commons.dbcp.PoolableConnection.close(PoolableConnection.java:114) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-20T18:50:28.297

最简单的方法是配置连接池以指定要运行的查询以在将连接传递给应用程序之前对其进行测试：

```
validationQuery="select 1 as dbcp_connection_test"
testOnBorrow=true 
```

这个相同的“连接验证”查询可以在其他事件上运行。我不确定这些的默认值：

```
testOnReturn=true
testWhileIdle=true 
```

还有一些配置设置可以限制池中空闲连接的“年龄”，如果空闲连接在服务器端关闭，这可能很有用。

```
minEvictableIdleTimeMillis
timeBetweenEvictionRunsMillis 
```

[http://commons.apache.org/dbcp/configuration.html](http://commons.apache.org/dbcp/configuration.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-20T20:44:46.890

我不知道这是否是处理数据库连接的最佳方式，但我遇到了与您描述的相同的问题。我尝试了很多，最终得到了[c3p0 连接池](http://sourceforge.net/projects/c3p0/)。

使用 c3p0 您可以强制您的应用程序在一定时间后刷新数据库连接。

将`c3p0.jar`放入您的`lib`文件夹并将您的配置添加到`conf/spring/resources.groovy`.

我的`resources.groovy`样子是这样的：

```
import com.mchange.v2.c3p0.ComboPooledDataSource
import org.codehaus.groovy.grails.commons.ConfigurationHolder as CH

beans = {
    /**
    * c3P0 pooled data source that forces renewal of DB connections of certain age
    * to prevent stale/closed DB connections and evicts excess idle connections
    * Still using the JDBC configuration settings from DataSource.groovy
    * to have easy environment specific setup available
    */
    dataSource(ComboPooledDataSource) { bean ->
        bean.destroyMethod = 'close'
        //use grails' datasource configuration for connection user, password, driver and JDBC url
        user = CH.config.dataSource.username
        password = CH.config.dataSource.password
        driverClass = CH.config.dataSource.driverClassName
        jdbcUrl = CH.config.dataSource.url
        //force connections to renew after 4 hours
        maxConnectionAge = 4 * 60 * 60
        //get rid too many of idle connections after 30 minutes
        maxIdleTimeExcessConnections = 30 * 60
    }
 } 
```

# jquery - 如何从此取消 setTimeout？

> ID：11125967
> 
> 赞同：2
> 
> 时间：2012-06-20T18:34:47.077
> 
> 标签：jquery, settimeout

我需要有人告诉我如何取消或清除此功能的计时器。

```
//Html
    <a id="button" data-url="http://url.com">Click me!</a>

    Redirecting in <span id="timer"></span> seconds...
    <a href="javascript:void(0)" class="cancel">Cancel</a>
// jS
    $('a#button').click(function() {
        var url = $(this).attr("data-url");
        if( url.indexOf("http://")!==0 ){
                url = "http://"+url;
            }
        var seconds = 5,
            el = $('#timer')
        el.text(seconds)
        setTimeout(function countdown() {
            seconds--
            el.text(seconds)
            if (seconds > 0) {
                setTimeout(countdown, 1000)
            }
            else {
                window.open( url , "_self" )
            }
        }, 1000)
    })

    $('a.cancel').click(function(){
        clearTimeout(countdown);
    }); 
```

还告诉我我做错了什么以及为什么这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:35:55.727

你需要这样做：

```
 var myTime;
    $('a#button').click(function() {
    var url = $(this).attr("data-url");
    if( url.indexOf("http://")!==0 ){
            url = "http://"+url;
        }
    var seconds = 5,
        el = $('#timer')
    el.text(seconds)

myTime = setTimeout(function countdown() {
        seconds--
        el.text(seconds)
        if (seconds > 0) {
            myTime =setTimeout(countdown, 1000)
        }
        else {
            //window.open( url , "_self" )
            alert('no');
        }

}, 500);

})

$('a.cancel').click(function(){
        clearTimeout(myTime);

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T18:36:50.577

添加：

```
var myTime;

myTime = setTimeout(function countdown() {... 
```

清除它：

```
clearTimeout(myTime); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:39:32.923

one way to do it nicely is:

```
{
var myTime;
myTime = setTimeout(function countdown() {
//blah
alert('Test');
clearTimeout(myTime);
}, 500);
} 
```

then your variables are simply scoped.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T18:41:59.003

I would do it like this : (edit: check it here [http://jsfiddle.net/URHVd/3/](http://jsfiddle.net/URHVd/3/) and it works fine)

```
var timer = null; //this will be used to store the timer object
var seconds = 5;
var url = null;

function countdown() {
    seconds--;

    el.text(seconds);
    if (seconds > 0) {
        timer = setTimeout(countdown, 1000)
    }
    else {
        window.open( url , "_self" )
    }
}

$('a#button').click(function() {
    url = $(this).attr("data-url");

    if( url.indexOf("http://")!==0 ){
        url = "http://"+url;
    }        
    el = $('#timer');
    el.text(seconds)
    timer = setTimeout(countdown, 1000)
})

$('a.cancel').click(function(){
    clearTimeout(timer);
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T18:36:42.590

告诉`setTimeout`要清理什么：

```
countdown = setTimeout(function countdown() {...} 
```

确保`countdown`在脚本之上声明，以便它在`click`处理程序中可用。

# javascript - Highcharts：“打印全部”按钮

> ID：11125969
> 
> 赞同：8
> 
> 时间：2012-06-20T18:34:52.427
> 
> 标签：javascript, jquery, printing, highcharts

是否可以为 Highcharts 创建一个“全部打印”按钮，在该按钮上打印多个图表？

我知道可以导出多个图表，如 jFiddle 所示：http: [//jsfiddle.net/highcharts/gd7bB/1/](http://jsfiddle.net/highcharts/gd7bB/1/)但我不确定 Highcharts 是否允许使用类似的打印方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T18:42:16.223

exportChart 方法接受参数，因此您可以发送多个图表。但是，打印方法不接受任何参数。因此，要打印，您必须分别指定每个图表，如 chart1.print(); 和chart2.print(); 分别打印它们。

有两种解决方法：

1.  在不使用 Highcharts 打印的情况下打印整个页面。这是一个[**例子**](http://jsfiddle.net/gd7bB/635/)。

2.  您可以将两个图表都导出为 pdf 文件，然后在那里打印表格。这是一个关于如何[**将多个图表导出到一个 pdf**](http://jsfiddle.net/gd7bB/639/)的示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T14:05:27.890

这是直接进行打印的替代解决方案。它基于**chart.print()**函数，但它适用于多个图表。

在此处查看**演示**：http : [//jsfiddle.net/jim31415/q5Rzu/150/](http://jsfiddle.net/jim31415/q5Rzu/150/)

```
 //--------------------------------------------------------------------
        $("#print").click(function () {
            printCharts([chart1, chart2, chart3]);
        });

        //--------------------------------------------------------------------
        function printCharts(charts) {

            var origDisplay = [],
                origParent = [],
                body = document.body,
                childNodes = body.childNodes;

            // hide all body content
            Highcharts.each(childNodes, function (node, i) {
                if (node.nodeType === 1) {
                    origDisplay[i] = node.style.display;
                    node.style.display = "none";
                }
            });

            // put the charts back in
            $.each(charts, function (i, chart) {
                origParent[i] = chart.container.parentNode;
                body.appendChild(chart.container);
            });

            // print
            window.print();

            // allow the browser to prepare before reverting
            setTimeout(function () {
                // put the charts back in
                $.each(charts, function (i, chart) {
                    origParent[i].appendChild(chart.container);
                });

                // restore all body content
                Highcharts.each(childNodes, function (node, i) {
                    if (node.nodeType === 1) {
                        node.style.display = origDisplay[i];
                    }
                });
            }, 500);
        }
    }); 
```

# java - 当应用程序从服务器运行时，JNLP Desktop.browse 不起作用。我该如何解决？

> ID：11125973
> 
> 赞同：0
> 
> 时间：2012-06-20T18:35:24.223
> 
> 标签：java, hyperlink, jnlp, java-web-start

**Scenerio：**我在具有 html（可点击）链接的 java webstart 应用程序上有一个 jframe。当我从 Eclipse 将应用程序作为 java 应用程序运行时，它可以工作。但是当我从 jboss/tomcat 服务器启动它时，链接无法工作。

**附加信息**

项目已**签名**并将安全设置设置为**所有权限**

我该如何解决？

# c# - 保存和恢复在运行时创建的类型（不是对象）？

> ID：11125976
> 
> 赞同：2
> 
> 时间：2012-06-20T18:35:38.690
> 
> 标签：c#, xml, reflection, reflection.emit

在我们的应用程序（C# - .NET 4.5）中，我们有一个报告生成工具。该工具必须只接收 SQL 命令，对其进行验证，然后创建一个全新的报告，其中包含与 SQL 命令指定的名称和相应数据类型相同的可用字段，类似于 ORM 工具所做的事情。

由于这个工具的性质，我们使用反射和发射来创建一个全新的类。从 dataReader ( `System.Data.SqlClient.SqlDataReader`) 提供的字段中，我们可以创建类型并用相应的数据填充它。

这样做的结果是一个 IQueryable 对象，我可以在我的报告中使用它。

整个过程已经完成并经过测试，但是为了将报告、生成的类和 SQL 命令放在一起，我们需要将这种新类型保存在数据库中，因为或者我们的数据库布局和系统定义，这需要我提供一个 XML-将文件或字符串之类的方法转换为将在保存之前压缩并转换为 Base64 字符串的方法。

如果我要将报告保存到 DLL 文件中，这将是一项简单的任务，就像[这里](http://bytes.com/topic/c-sharp/answers/236687-can-you-save-type-created-typebuilder)显示的那样。

但是由于这种新类型必须转换为类似 XML 的格式，所以我有点迷失在这里。

我过去做过相反的事情：手动从纯 XML 文件完全创建一个类型。我也知道我可以做类似的事情，但它需要我循环进入类的每个细节/属性/方法/成员/等来创建 XML 文件。

**有什么方法（比如 .NET 框架的助手）可以帮助我吗？**
*与其 100% 手动完成，我还想将 XML 生成/解析委托给一个性能可能更好的工具......*

## 编辑：

人们，在发表评论之前阅读标题！我正在尝试为该类型保存一个 XML。**类型**。不是对象。类型。

@Mark Gravell 感谢您的提示。我会检查的。但是关于模式：有什么方法可以自动保存/加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:48:03.830

为了保存*类型*，我会说*要么*简单地存储模式，并在运行时重新创建*兼容*类型，要么只使用 AssemblyBuilder 等并将动态程序集配置为可保存，并将其作为 .dll 写入磁盘（或其他地方） ）。然后只需在运行时加载 .dll 并找到类型。任何一种方法都可以工作。如果您已经拥有从模式创建类型的代码，第一个可能更容易。

为了保存*数据*，我的第一直觉是`XmlSerializer`，但是它通过程序集生成工作，所以它*可能*不喜欢使用来自 TypeBuilder 的完全动态类型。如果 XmlSerializer 不满意，你可以试试 protobuf-net；这*也*适用于内存（默认情况下），所以应该很高兴。

然而！我应该注意，您可能还想考虑简单地使用 DataTable。虽然我对 DataTable没有太多*的爱，但它***正是**为这种情况而设计的：

*   它可以对仅在运行时定义的字段进行建模
*   它具有模式和数据的内置序列化
*   它实现了用于声明运行时模型的 ComponentModel API
    *   这意味着大多数工具都可以免费使用

# twitter - 我有很多推文的 ID；如何在不超过速率限制的情况下使用 Twitter API 获取他们的完整信息？

> ID：11125978
> 
> 赞同：2
> 
> 时间：2012-06-20T18:35:41.663
> 
> 标签：twitter

我有许多推文的 ID，我想从 Twitter 获取它们的完整信息，以便进行一些数据分析。显而易见的 API 方法 (https://dev.twitter.com/docs/api/1/get/statuses/show/:id) 似乎一次只使用一个 ID。这是一个问题，因为我们需要分析的推文数量远远超过每小时 350 次调用的 API 限制。

因此：是否有某种方法可以获取一*组*推文 ID 的完整信息，而不仅仅是一个，或者在同一个 HTTP 请求中提交许多 REST 调用，并让它在 API 限制中只计算一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:08:52.277

不幸的是，没有为推文提供批量查找。您需要一次执行一个请求并确定项目范围以应对速率限制。如果您有朋友想帮助您，您可能会要求他们授权您的应用程序并利用他们的权限来访问更多请求。

# java - 让项目一异常进入项目二

> ID：11125979
> 
> 赞同：1
> 
> 时间：2012-06-20T18:35:48.753
> 
> 标签：java, exception-handling

如何让项目一异常进入项目二

我的第二个项目中有两个项目我的方法有 try catch 块

我在我的第一个项目中调用该方法

我想让我的第二个项目异常进入第一个项目

任何人都有这种情况

**项目二**

```
public ProjectTwoClass{

 public static String projectTwoMethod(String someThing){
   try{
      .....
   }catch(Exception e){
     throw new RuntimeException("message");
   }
 }
} 
```

**项目一**

```
public ProjectOneClass  {
 public String projectOneMethod(String something){
   try{
     ProjectTwoClass.projectTwoMethod(someThing);
   }catch (Exception e){
     ....
      //i want here
   }
 }
} 
```

我不想删除项目二 try catch 块

任何想法都可以提前感谢

感谢 pradeep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:55:12.963

您正在做的是捕获异常并抛出一个新异常。您可以改为**重新抛出异常。**
为此，您只需`throw e`指定该方法可以通过添加`throws Exception`.

```
public ProjectTwoClass{

 public static String projectTwoMethod(String someThing) throws Exception {
   try{
      .....
   }catch(Exception e){
     throw e; // Rethrow the exception instead of creating a new one.
   }
 }
} 
```

# cygwin - 在 Cygwin 中，HBase jar 的路径似乎被破坏了

> ID：11125992
> 
> 赞同：1
> 
> 时间：2012-06-20T18:36:42.677
> 
> 标签：cygwin, hbase

我过去经常使用堆栈溢出，发现它非常有用，但我发现自己需要问我的第一个任务：

我正在开发一个将使用 Hbase 的 map reduce 项目。我正在 windows 上开发并使用 cygwin 的 shell 来运行 Hbase。我已按照在 Windows 上安装 Hbase 的所有安装步骤进行操作，但是当我尝试运行它时，出现以下错误：

> cygpath：错误转换“c:\cygwin\usr\local\hbase-0.92.1/conf:/usr/local/jre7/lib/tools.jar:c:\cygwin\usr\local\hbase-0.92.1: c:\cygwin\usr\local\hbase-0.92.1/lib/*.jar" - 未知错误 -1

然后它报告它找不到一些必要的 .jar 文件的主类，我假设这些文件与 cygpath 没有正确处理这些 jar 的路径有关。

任何帮助是极大的赞赏。

# .htaccess - 在 htaccess (CMS) 中添加新的 RewriteRule

> ID：11125993
> 
> 赞同：0
> 
> 时间：2012-06-20T18:36:45.203
> 
> 标签：.htaccess, mod-rewrite

我正在使用 CMS 并想修改 htaccess 以添加新的重写规则。CMS 已有以下规则：

```
RewriteRule ^(.*)/(.*) ./index.php 
```

我想添加的新规则应如下所示：

```
My_new_page/title_new_page/id -> target.php?id=$id 
```

我尝试如下，但没有成功：

```
RewriteRule ^My_new_page/(.*)/(.*)$ target.php?id=$2 
```

现在，如果我删除第一条规则，第二条规则可以正常工作。但是，我需要第一条规则才能使 CMS 正常工作。
所以他们似乎以某种方式相互干扰。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:57:45.187

确保`RewriteRule ^My_new_page/(.*)/(.*)$ target.php?id=$2`规则*在 CMS 规则之前*，否则 CMS 规则将匹配`My_new_page/title_new_page/id`并且您的规则永远不会被应用。

# php - 如何从类初始化中引用对象实例？

> ID：11125994
> 
> 赞同：0
> 
> 时间：2012-06-20T18:36:48.157
> 
> 标签：php

这是一个小例子。我想在这个类的许多其他方法中重用 mongodb 对象，而不是在每个函数中初始化它。

或者一般来说有更好的方法吗？

```
 <?php
class Model_Users extends Model 
{

    public static function _init()
    {
        $mongodb = \Mongo_Db::instance('content');
    }

    public static function get_user($name)
    {

        $user = $mongodb->get('users', array( 'name' => $name ));

        return  $user; 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:59:51.597

做这样的事情：

```
class Model_Users extends Model 
{
    private static $mongodb;

    public static function _init()
    {
        self::$mongodb = \Mongo_Db::instance('content');
    }

    public static function get_user($name)
    {

        $user = self::$mongodb->get('users', array( 'name' => $name ));

        return  $user; 
    }

} 
```

这样，您就可以创建在类中的每个方法中使用的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:23:09.823

这样的事情怎么样？注意，PHP 可能无法编译。我的帖子的主旨是您的模型对象不是数据库对象。创建一个独立的数据库对象，并提供大多数模型/DAO/ActiveRecord/任何类所需的基本功能。然后让你的模型专注于业务逻辑，而不是数据库代码。您可能会发现，如果您以后需要从 Mongo 切换到其他数据库，这会更容易，因为您已将所有数据库特定代码封装到一个地方。

因此，类似于以下内容。我的帖子是关于设计的，而不是语言。

```
class Db {
    private static $mongoDb;
    public static function _init() {
        self::$mongoDb = \Mongo_Db::instance( 'content' );
    }
    public static function getValue( $table, $name ) {
        $value = "";
        return self::$mongoDb->get( $table, array( "name", $name ) );
    }
}

class Model_Users extends Model {
    private $db;
    public static function _init() {
        $this->db = new Db();
    }
    public static function getUser( $name ) {
        return $this->db->getValue( "users", $name );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:58:13.373

我相信这就是使用`$this`. 它使对象的其余部分可以访问事物。

```
<?php
class Model_Users extends Model 
{

    private $mongodb;

    public static function _init()
    {
        $this->mongodb = \Mongo_Db::instance('content');
    }

    public static function get_user($name)
    {

        $user = $this->mongodb->get('users', array( 'name' => $name ));

        return  $user; 
    }
} 
```

# css - YUI 压缩器和 CSS 内容？

> ID：11125998
> 
> 赞同：5
> 
> 时间：2012-06-20T18:36:57.263
> 
> 标签：css, yui, yui-compressor, minify

我有一个包含以下代码的样式表：

```
.author-name:before {
 content:"by: ";
} 
```

当我通过 YUI Compressor 运行它时，我得到：

```
.author-name:before{content:"by:"} 
```

这是一个问题，因为它消除了预期的空白。我想使用 YUI Compressor 的特殊注释，像这样：

```
.author-name:before {
  /*!YUI-Compressor */content: "by: ";
} 
```

...可能会有所帮助，但似乎没有。此外，评论本身也被删除了。我的印象是 JavaScript 中以`/*!` [get reserved](http://developer.yahoo.com/yui/compressor/css.html)开头的注释，但实际上并没有发生。

没有对我的构建过程进行后处理以取消最小化，有没有办法做到这一点？我们目前正在使用 YUI 压缩器的 2.3.5 版本，并使用标志运行`--charset utf8 -v -o`

简而言之，我的问题是，有没有办法让 YUI Compressor 尊重`content:`值中的空格，或者在我不想缩小的块之前和之后添加 CSS 注释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:47:33.457

作为一种解决方法，请尝试使用 unicode 实体而不是空格字符本身：

```
.author-name:before {content: "by:\00A0"; } 
```

`\00A0`特别是非破坏空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T15:42:13.640

我使用版本 2.3.4 和 2.4.6 尝试了您的 css，并且都保留了字符串内的空间。所以它要么是一个非常具体的错误（在错误跟踪器中找不到任何东西），要么是其他问题。你确定这是一个 ascii 空格字符和常规撇号（不是 Windows 智能撇号或其他东西）吗？

当我在同一个 css 上运行测试时，用 unicode 字符 201C（左双引号）替换 ascii 引号，空格被删除。原因很简单：解析器不将其识别为字符串，因此它会去除空白。

无论如何，您可能想从这里[http://yuilibrary.com/download/yuicompressor/尝试最新版本。](http://yuilibrary.com/download/yuicompressor/)如果您的当前版本是使用某些包管理器安装的：只需从档案“build”文件夹中提取 .jar 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:45:49.170

您可以为内容添加边距：

```
.author-name:before {
    content: "by:";
    margin: 0 .35em 0 0;
} 
```