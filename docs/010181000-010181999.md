# StackOverflow 问答 10181000-10181999

# c# - 如何在 C# 中删除 Windows Phone 应用程序

> ID：10181009
> 
> 赞同：2
> 
> 时间：2012-04-16T20:13:34.103
> 
> 标签：c#, windows-phone-7, xna-4.0, tombstoning

如何在 csharp 中删除 csharp/XNA 4.0 应用程序？谷歌搜索教程只显示了如何在 silverlight 中执行此操作，而我制作的应用程序是在没有 silverlight 的 Visual Studio 2010 Windows Phone 游戏项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:26:45.143

像[这样](http://www.garethpw.co.uk/2010/11/tombstoning-in-phone-7-xna-games.html)或[这样](http://fiercedesign.wordpress.com/2011/08/29/windows-phone-mango-tombstoning-xna/)的东西？

编辑：这个头脑也可以很好[地](http://create.msdn.com/en-US/education/catalog/article/tombstoning_wp7_games)解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:42:21.007

按下手机/模拟器上的搜索按钮将墓碑您的应用程序。开始按钮也是如此。

# jquery-validate - jQuery Validate Plugin - 字段变为有效后未立即删除错误消息

> ID：10181010
> 
> 赞同：0
> 
> 时间：2012-04-16T20:13:41.423
> 
> 标签：jquery-validate

我正在尝试在如下表单上使用 jQuery Validate 插件：

JS：

```
<script src="jquery-1.7.1.js" type="text/javascript"></script>
<script src="jquery.validate.js" type="text/javascript"></script>
<script>
function ValidateFields() {

    $("#createProgramForm").validate({
        rules: {
            firstname: { required: true, minlength: 2 },
            lastname: { required: true }
        },
        messages: {
            firstname: { minlength: "Minimum 2 characters." },
            lastname: { required: "Please enter a last name." }
        }
    });

    if ($("#createProgramForm").valid()) {
        alert("Form is valid");
    }

}
</script> 
```

HTML：

```
<body>
<div id="page">
    <form id="createProgramForm">
        <p>
            <label for="firstname">
                First Name</label>
            <input name="firstname" id="firstname" type="text" />
        </p>
        <p>
            <label for="lastname">First Name</label>
            <input name="lastname" id="lastname" type="text" />
        </p>
        <p>
            <button onclick="ValidateFields();">Validate</button>
        </p>
    </form>
</div>
</body> 
```

当我单击验证时，验证错误消息会显示在字段旁边。[但是，一旦字段变为有效，就像这里](http://jquery.bassistance.de/validate/demo/)的演示一样，错误消息就不会消失。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:32:30.273

嗯，为我工作。也许尝试最新的 jquery.validate 插件？我用的版本在[这里](http://jzaefferer.github.com/jquery-validation/jquery.validate.js)

# delphi - 将命令行 SFTP 和 pgp 集成到 delphi 2010 解决方案中，有哪些选项？

> ID：10181012
> 
> 赞同：0
> 
> 时间：2012-04-16T20:13:49.810
> 
> 标签：delphi, delphi-2010, sftp, pgp

我们使用 Delphi 2010 进行开发，并希望将 SFTP 和 pgp 加密合并到入站和出站文件传输过程中。特别是寻找可以集成到我们拥有的作业脚本过程中的命令行解决方案。有谁知道我们可以尝试的两个好的免费解决方案？

PGP Freeware 6.5.8 (SDK 1.7.x) 或 PGP 7.0、8.0 (SDK 2.x) 是最佳选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:47:21.880

我推荐[SecureBlackBox](http://eldos.com/sbb/)。它支持 SFTP、FTPS、OpenPGP 等等。它似乎有点贵（价格各不相同；他们有一个价格计算器页面，根据您想要的软件包以及您希望如何许可它进行开发 - 没有运行时许可成本，只是为了清楚），但它们很漂亮易于使用，带有完整的源代码（至少在我们拥有的版本中），并且文档和示例看起来非常全面。它们可以轻松地用于构建非 GUI 或控制台应用程序，您可以根据需要将其与构建过程集成。

我与 Eldos 没有任何关系，Eldos 的开发者`SecureBlackBox`——只是我工作中的一个客户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T03:51:05.933

Chilkat 有一套可能对您有用的组件

# iphone - iPhone如何将视图控制器的视图添加到另一个视图控制器的视图？

> ID：10181013
> 
> 赞同：3
> 
> 时间：2012-04-16T20:13:57.287
> 
> 标签：iphone, objective-c, ios, uiview, uiviewcontroller

这一直在我的脑海中，我真的不知道如何正确地将视图控制器管理的视图添加到另一个视图控制器的视图中。

这不起作用，因为视图没有完成加载

```
self.messageViewController = [[PopupMessagesViewController alloc] initWithNibName:@"PopupMessagesViewController" bundle:nil];
[self.view addSubview:self.messageViewController.view]; 
```

**如何将视图控制器从笔尖创建的 UIView 添加到另一个视图控制器的视图？**如何在添加之前强制加载此类视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:34:33.573

您需要创建一个容器视图控制器。虽然 iOS 5 明确支持容器控制器，但您可以在以前的版本中创建容器控制器。iOS 5 所做的只是自动转发旋转/外观事件（可选......而且我个人觉得它们很烦人，在我准备好之前发送事件）并为您提供一些额外的方法以在您的实现中使用。创建 Container View Controller 的真正问题是将所有适当的事件发送到子控制器，并确保您以与 Apple 实现一致的方式管理控制器。否则，您的子控制器会出现奇怪的行为。在执行此操作之前，您确实需要确保完全了解视图控制器是如何工作的。我建议阅读以下内容：

这里有一些信息链接：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html) -向下滚动到：实现容器视图控制器

也在这里查看视图控制器生命周期，这将帮助您确定需要按哪个顺序进行哪些调用：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html# //apple_ref/doc/uid/TP40007457-CH10-SW1](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW1)

我建议阅读整个视图控制器编程指南......你可以从那里获得很多信息：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#/ /apple_ref/doc/uid/TP40007457-CH1-SW1](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457-CH1-SW1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:20:06.897

一般来说，不要那样做。您打破了一些关于如何使用 UIViewControllers 的假设，这可能会在未来给您带来问题。您将无法指望子视图的控制器接收您可能期望的所有 UIViewController 生命周期方法调用。

有效的解决方案是使用 iOS 5 容器视图控制器方法将子视图的控制器添加为子视图控制器，或者如果您需要封装该行为，则让一个非 UIViewController 控制器类负责管理该子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:21:35.843

试试这个

```
- (void)viewWillAppear: (BOOL)animated {
    [super viewWillAppear: animated];
    [self.messageViewController viewWillAppear];
}

- (void)viewDidAppear: (BOOL)animated {
    [super viewDidAppear: animated];
    [self.messageViewController viewDidAppear];
} 
```

# mysql - 连接池和审计

> ID：10181017
> 
> 赞同：0
> 
> 时间：2012-04-16T20:14:09.310
> 
> 标签：mysql, postgresql, connection-pooling, audit

主要问题是我想审核用户行为（使用触发器），但我们目前正在对我们的数据库使用连接池，所以不要将他们的用户名/ID 直接放在数据库中。

1.  我知道 MSSQL Server 中有一个 EXECUTE AS LOGIN 函数。MySQL 或 Postgres 中有类似的东西吗？

2.  除了从 ORM 而不是数据库进行审计之外，我还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T23:47:57.663

在 PostgreSQL 中，您可以使用[`SET ROLE`](http://www.postgresql.org/docs/current/static/sql-set-role.html)，[`SET SESSION AUTHORIZATION`](http://www.postgresql.org/docs/current/static/sql-set-session-authorization.html)但您必须在数据库中已定义角色。

您可以选择其中哪一个更适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:18:55.840

除了 SET ROLE 之外，还有另一个可能有用的选项[SET APPLICATION_NAME](http://www.postgresql.org/docs/9.1/static/runtime-config-logging.html#RUNTIME-CONFIG-LOGGING-WHAT)。这不一定是应用程序 - 只要您的应用程序的用户名适合 64 个字符，它就非常有用。

# google-app-engine - 使用 ndb 获取、修改和放置一批实体的最有效方法

> ID：10181018
> 
> 赞同：11
> 
> 时间：2012-04-16T20:14:15.060
> 
> 标签：google-app-engine, google-cloud-datastore, python-2.7, app-engine-ndb

在我的应用程序中，我执行了一些批处理操作。不幸的是，这有时需要永远更新 400-500 个实体。我拥有的是所有实体键，我需要获取它们，更新属性并将它们保存到数据存储区，保存它们可能需要 40-50 秒，这不是我想要的。

生病简化我的模型来解释我的工作（无论如何这很简单）：

```
class Entity(ndb.Model):
    title = ndb.StringProperty()

keys = [key1, key2, key3, key4, ..., key500]

entities = ndb.get_multi(keys)

for e in entities:  
    e.title = 'the new title'

ndb.put_multi(entities) 
```

获取和修改不会花费太长时间。我试图 get_async 进入一个 tasklet 以及其他任何可能的方法，只有在 get 或 forloop 需要更长的时间时才会改变。

但真正困扰我的是，一个put最多需要50秒......

在相当长的时间内完成此操作的最有效方法是什么。当然，我知道这取决于许多因素，例如实体的复杂性，但是放置所需的时间确实超出了我可以接受的限制。
我已经尝试过异步操作，tasklet ......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T04:54:54.507

我想知道是否进行较小的批量（例如 50 个或 100 个实体）会更快。如果你把它变成一个任务，你可以尝试同时运行这些小任务。

我还建议使用[Appstats](https://cloud.google.com/appengine/docs/python/tools/appstats)来查看它，看看这是否令人惊讶。

最后假设这使用 HRD，您可能会发现每批实体组的数量存在限制。此限制默认非常低。尝试提高它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:32:39.377

听起来像是 MapReduce 的设计目的。您可以通过同时获取和修改所有实体来快速完成此操作，跨多个服务器实例进行扩展。但是，使用更多实例会增加您的成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T23:11:39.320

我将假设您拥有所需的实体设计（即，我不会问您要做什么以及您应该如何拥有一个大实体而不是一堆小实体必须一直更新）。因为那样不会很好。( =

如果您使用任务队列怎么办？您可以创建多个任务，每个任务可以将其负责更新的键以及应设置的属性和值作为 URL 参数。这样工作被分解成可管理的块并且用户的请求可以在工作发生在后台时立即返回？那行得通吗？

# jquery - 将页面表单转换为模式对话框表单

> ID：10181024
> 
> 赞同：0
> 
> 时间：2012-04-16T20:14:36.523
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我正在寻找如何使用表单创建模式对话框；我已经在asp.net mvc上有表格，是一个页面；我想要，表单在模态对话框中收费。

任何人都知道该怎么做，或者我在哪里可以找到一些信息，因为我发现的一切都是在创建一个新表单，但我不知道如何做我需要的

```
 dialog.load(
  $("#dialog").dialog({
      close: function(event, ui) {
          dialog.remove();
      },
      resizable: false,
      height: 140,
      width: 460
      modal: true,
      buttons: {
          "Ok": function() {
              $(this).dialog("close");
              isConfirmed = true;
              $("form").submit();
           },
           Cancel: function() {
              $(this).dialog("close");
           }
       } 
```

我曾经使用过这样的东西，但我知道如何更改以使用表单来整理我的页面，或者如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:18:32.510

第一步是将此表单放入局部视图中，并让控制器操作为该局部视图提供服务。因此，让我们以一个示例控制器为例：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult MyForm()
    {
        var model = new MyViewModel();
        return PartialView(model);
    }

    [HttpPost]
    public ActionResult MyForm(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // there were validation errors => redisplay
            // the form so that the user can fix them
            return PartialView(model);
        }

        // at this stage validation has passed => we could do
        // some processing and return a JSON object to the client
        // indicating the success of the operation
        return Json(new { success = true });
    }
} 
```

MyForm 动作用于分别显示表单并在提交时对其进行处理。Index 操作将简单地提供一个包含允许弹出模式的链接的视图。

所以这里是`MyForm.cshtml`部分：

```
@model MyViewModel

@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "dialog", OnSuccess = "submitSuccess" }))
{
    @Html.LabelFor(x => x.Foo)
    @Html.EditorFor(x => x.Foo)
    @Html.ValidationMessageFor(x => x.Foo)
    <button type="submit">OK</button>
} 
```

最后是`Index.cshtml`视图：

```
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        // we subscribe to the click handler of the link
        $('#mylink').click(function () {
            // when the anchor is clicked we attach the dialog to the div
            var url = this.href;
            $('#dialog').dialog({
                open: function (event, ui) {
                    // when the dialog is shown we trigger an AJAX request
                    // to the MyForm action to retrieve the contents of the 
                    // form and show it
                    $(this).load(url);
                }
            });
            return false;
        });
    });

    // this function is used by the Ajax form. It is called
    // when the form is submitted.     
    var submitSuccess = function (result) {
        // we check to see if the controller action that was 
        // supposed to process the submission of the form
        // returned a JSON object indicating the success of the
        // operation
        if (result.success) {
            // if that is the case we thank the user and close the dialog
            alert('thanks for submitting');
            $('#dialog').dialog('close');
        }
    };
</script>

@Html.ActionLink("Show modal form", "myform", null, new { id = "mylink" })
<div id="dialog"></div> 
```

显然，应该将 javascript 外部化到一个单独的文件中，但出于演示的目的，我将其保留在视图中。

# c++ - Windows Mobile 隐藏任务栏和菜单栏

> ID：10181028
> 
> 赞同：0
> 
> 时间：2012-04-16T20:14:45.343
> 
> 标签：c++, windows, mobile, windows-mobile

在 Windows Mobile 设备上，我想隐藏任务栏和菜单栏。我从谷歌搜索中获得了以下代码，但它没有隐藏任务栏上的图标。如果可能的话，我想在隐藏任务栏时隐藏所有图标。

```
void TaskBar(BOOL lock)
{
    MessageInfo(TEXT("inside TaskBar()"));
    if(lock == TRUE)
    {
        CWnd* pWnd = CWnd::FindWindowW(TEXT("HHTaskBar"), NULL);

        if(pWnd)
        {
            pWnd->ShowWindow(SW_HIDE);
            pWnd->EnableWindow(FALSE);
        }
    }
    else if(lock == FALSE)
    {
        CWnd* pWnd = CWnd::FindWindowW(TEXT("HHTaskBar"), NULL);

        if(pWnd)
        {
            //pWnd->ShowWindow(SW_SHOW);
            pWnd->ShowWindow(SW_SHOWNORMAL);
            pWnd->EnableWindow(TRUE);
        }
    }
} 
```

为了隐藏菜单栏，我在谷歌上发现我可以通过注册表来做到这一点。我有 Windows Mobile 6.5.3，但这些注册表不存在：

```
[HKEY_LOCAL_MACHINE\Software\Microsoft\Shell\BubbleTiles]
"TextModeEnabled"=dword:00000001
"HardwareStartKeyEnabled"=dword:00000001
"HardwareDoneKeyEnabled"=dword:00000001 
```

那么我怎样才能隐藏菜单栏呢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:24:06.780

至于任务栏使用：

```
SHFullScreen(hWnd, SHFS_HIDETASKBAR);
SHFullScreen(hWnd, SHFS_HIDESIPBUTTON);
SHFullScreen(hWnd, SHFS_HIDESTARTICON); 
```

其中 hWnd 是您的主框架窗口句柄

我不确定菜单栏，可以通过不在资源中定义菜单或将应用程序窗口移动到其上方来隐藏它。

# ruby - 将 JS 变量注入到 haml 模板中

> ID：10181029
> 
> 赞同：1
> 
> 时间：2012-04-16T20:14:47.020
> 
> 标签：ruby, html, haml, local-storage

我正在尝试将 HTML5 localStorage 与 Ruby haml 模板一起使用，并且需要能够获取 localStorage.getItem('myItem') 的值以传递给 java 小程序（代码被剥离）：

```
- content_box("MyBox") do
  %object{:classid => "clsid:xxx"}
    %param{:name => "myItem", :value => "javascript:localStorage.getItem('myItem')"}
    %comment
      %EMBED{:myItem => "javascript:localStorage.getItem('myItem')"}
      %noembed 
```

有没有好的方法来做到这一点？我可以做类似的事情：

```
:javascript
  document.write("<param name='myItem' value="+localStorage.getItem('myItem')+">" 
```

但这太丑了！

请注意，这是我正在嵌入的对象，并且需要在 document_ready 之前存在该值；我无法选择对象并将值附加到 document_ready 上。我能想到的唯一另一种方法是提前进行 ajax 提交以使值成为 Ruby 变量，但这确实没有必要。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:25:54.700

有时唯一可行的方法是丑陋的。

如果您的数据存储在客户端上，那么创建服务器请求/页面/操作只是为了获取数据并以不同的形式将其直接传回客户端是不必要的，而且可以说更丑陋。

使用 javascript 添加`<param>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T23:12:00.803

如果对象无论如何都依赖于 JavaScript，那么您最好只用 JavaScript 编写整个元素，而不仅仅是参数。然后你可以在准备好的文件上做。

# c# - 从 Javascript 引发 DataGrid ItemCommand 事件

> ID：10181030
> 
> 赞同：0
> 
> 时间：2012-04-16T20:14:48.210
> 
> 标签：c#, javascript, asp.net, .net, datagrid

我正在使用 DataGrid 来显示从数据库中检索到的数据，我想知道是否可以使用 Javascript 引发网格的 ItemCommand 事件。

下面的代码片段大致显示了我在 DIV removeProductButton 的 onclick 处理程序中尝试执行的操作。我不想使用 asp:Button 或 asp:LinkBut​​ton，因为当前 DIV 的外观是使用 CSS 控制的，无论用于创建可点击触发器以允许未来使用的 HTML 元素类型如何，代码都应该可以工作外观和感觉定制。

```
<asp:datagrid id="itemGrid" runat="server" cellPadding="0" AutoGenerateColumns="False" GridLines="None">
    <Columns>
        <asp:TemplateColumn>
            <ItemTemplate>
                <div class="items">
                    <div class="product_title"><%#Eval("ItemID")%>.&nbsp;<%#Eval("ItemDescription")%></div>
                    <div class="product_image">
                        <img id="productImage_<%#Eval("ItemID")%>" src="<%#Eval("ThumbnailURL")%>" />
                    </div>
                    <div class="buttons">
                        <div id="removeProductButton" class="buttonStandard" onclick="Do Something HERE...">Remove</div>
                    </div>
                </div>
            </ItemTemplate>
        </asp:TemplateColumn>
    </Columns>
</asp:datagrid> 
```

我尝试在网格的 ItemCreated 事件中使用以下代码，但无法使其正常工作

```
private void itemGrid_ItemCreated(object sender, System.Web.UI.WebControls.DataGridItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item ||
        e.Item.ItemType == ListItemType.AlternatingItem)
    {
        dynamic itemData = e.Item.DataItem;

        HtmlGenericControl removeProductButton = (HtmlGenericControl)e.Item.FindControl("removeProductButton");

        removeProductButton.Attributes.Add("onclick", ClientScript.GetPostBackEventReference(removeProductButton, ""));
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:15:35.467

使用所需的 CommandName 将隐藏按钮添加到 ItemTemplate：

```
<asp:Button 
    ID="removeProductButton_hidden" 
    runat="server" 
    style="display:none;" 
    CommandName="YourCommandName" 
    Text="" /> 
```

确保您的“删除”div 具有 runat="server" 属性：

```
<div ID="removeProductButton" runat="server" class="buttonStandard">Remove</div> 
```

摆脱网格 ItemCreated 处理程序并创建一个网格 ItemDataBound 处理程序，如下所示：

```
public void grd_ItemDataBound(object sender, DataGridItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        HtmlGenericControl removeProductButton = (HtmlGenericControl)e.Item.FindControl("removeProductButton");

        Button removeProductButtonHidden = (Button)e.Item.FindControl("removeProductButton_hidden");

        removeProductButton.Attributes.Add("onclick", ClientScript.GetPostBackEventReference(removeProductButtonHidden, ""));
    }
} 
```

所以整个网格定义看起来像这样：

```
<asp:DataGrid 
    runat="server" 
    ID="itemGrid" 
    OnItemCommand="itemGrid_ItemCommand" 
    OnItemDataBound="itemGrid_ItemDataBound">
    <Columns>
        <asp:TemplateColumn>
            <ItemTemplate>
                <asp:Button 
                    ID="removeProductButton_hidden" 
                    runat="server" 
                    style="display:none;" 
                    CommandName="YourCommandName" 
                    Text="" />
                <div class="items">
                    <div class="buttons">
                        <div ID="removeProductButton" runat="server" class="buttonStandard">Remove</div>
                    </div>
                </div>
            </ItemTemplate>
        </asp:TemplateColumn>
    </Columns>
</asp:DataGrid> 
```

# php - 如何使用 php 在 html 变量中添加 html 语句？

> ID：10181033
> 
> 赞同：-1
> 
> 时间：2012-04-16T20:14:57.880
> 
> 标签：php, html

目前我有一个图像 html 语句，我想将它添加到 html 中

```
$html=file_get_contents('../template/'.$html);
    $img="<img src='http://localhost/fyp/ga/test.php?=$ga'>";
    file_put_contents($html,$img); 
```

但是，这会导致浏览器发出警告，并且它会在后面附加 img 语句，那么如何使用 php 将其添加到里面呢？谢谢你。

```
$img="<img src='http://localhost/fyp/ga/test.php?=$ga'>"; 
```

它收到这样的警告：

```
Warning: file_put_contents(<p> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /> <!-- Facebook sharing information tags --></p> <p> <meta content="*|MC:SUBJECT|*" property="og:title" /> </p> <p> <title></title> <style type="text/css"> /* Client-specific Styles */ #outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */ body{width:100% !important;} .ReadMsgBody{width:100%;} .ExternalClass{width:100%;} /* Force Hotmail to display emails at full width */ body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */ /* Reset Styles */ body{margin:0; padding:0;} img{border:0; height:auto; line-height:100%; outline:none; text-decoration:none;} table td{border-collapse:collapse;} #backgroundTable{height:100% !important; margin:0; padding:0; width:100% !important;} in C:\xampp\htdocs\fyp\mail\send.php on line 47 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:19:34.347

我假设您的 html 中有一个占位符。例如 {IMAGE}，您可以简单地将这个占位符替换为

```
<?php
  $html = str_replace("{IMAGE}","<img src='http://localhost/fyp/ga/test.php?=".$ga."'>",$html);
?> 
```

# python - 使用 setup.py bdist_rpm 删除 Django 测试

> ID：10181035
> 
> 赞同：1
> 
> 时间：2012-04-16T20:15:03.997
> 
> 标签：python, django, rpm, setuptools, setup.py

在使用 bdist_rpm 从 setup.py 文件创建 RPM 时，我试图删除所有测试目录以及 tests.py 文件。我尝试将它从 find_packages() 中排除，但它只删除了测试包，这只是问题的一半。任何 tests.py 文件都保留在没有测试目录的包中。如何同时删除测试目录和 tests.py 文件？这是我的 setup.py

```
from setuptools import setup, find_packages                                                      

setup(name='mydjangoui',
      version='1.0',
      description='A django application',
      package_dir={'':'mydjangoui'},
      packages=find_packages('mydjangoui', 
          exclude=['tests.*', '*.tests.*', '*.tests', 'tests']),
) 
```

我正在使用以下命令构建 rpm：

```
python setup.py bdist_rpm 
```

有一个 app ( `marketing`) 包含 tests.py、tests.pyo、tests.pyc 以及一些有效的 models.py 和 views.py 文件。我想在创建 RPM 之前从该应用程序中删除 tests.py[o|c] 文件。

输出自`find_packages(exclude=['*tests*'])`

```
>>> find_packages(exclude=['*tests*'])
['motd', 'assessment', 'account', 'platform', 'custom', 'catalog', 'utils', 'asset', 'editors', 'scheduler', 'base', 'marketing', 'results'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:43:15.280

**最终更新解决问题：**

使用以下`find_packages()`调用忽略任何名为 的模块或子模块`tests`：

```
setup(name='mydjangoapp',
  version='1.0',
  description='A django app',
  package_dir={'':'mock'},
  packages=find_packages('mock', exclude=['tests', '*.tests']),
) 
```

不过，我们可能仍有`tests.py`在生成的 RPM 中命名的文件。

要清除这些，请在项目文件夹中创建一个名为`MANIFEST.in`的文件，并向其中添加以下行，告诉`distutils`忽略`tests.py`任何文件夹中命名的文件：

```
recursive-exclude * tests.py 
```

这将不再包括，例如`marketing/tests.py`。

如果您收到有关不存在的、先前定义的文件的警告，请在重新创建 RPM 包之前清理生成的文件：

```
python setup.py clean --all 
```

希望有帮助。

# ruby-on-rails - 使用 rails helper 和 controller 方法

> ID：10181036
> 
> 赞同：0
> 
> 时间：2012-04-16T20:15:07.577
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

假设我有一个处理 Posts 和 Comment 对象的 Rails 应用程序。一个帖子`has_many`评论和每个评论`belongs_to`一个帖子。

每个评论都有一个`word_count`属性。Post 对象有一个`average_comment_word_count`属性，它是每个 Comment 的平均值`word_count`。

第一个问题是如果 Post 对象被异步修改（添加评论会影响平均字数），我应该在什么时候重新计算属性？什么时候返回对象？或者每次添加新评论时？它是否进入评论或发布帮助方法？哪个控制器函数应该调用这个方法？

此外，当我包含以下 Post 辅助方法时，我得到一个以 JSON 形式返回的 NULL 值。

```
def average_word_count
  @average_word_count = 0
  # current_user returns the current user object
  # user has_many posts and each post belongs_to a user
  current_user.posts.find(params[:id]).comments.each do |comment|
        @average_word_count += comment.word_count / current_user.posts.find(params[:id]).comments.count
  end

  @average_word_count
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:38:34.197

```
class Comment < ActiveRecord::Base
  belongs_to :post

  after_save :update_post_word_count

  def update_post_word_count
    average_wc = post.comments.average(:word_count)
    post.update_attributes average_comment_word_count: average_wc
  end      
end 
```

或者，仅在需要时派生它：

```
class Post < ActiveRecord::Base
  has_many :comments

  def average_comment_word_count
    comments.average :word_count
  end
end 
```

或者，如果它只是在流量较低的地方使用过一次，那么就无视得墨忒耳法则，并根据需要从 post 对象中计算它：

```
Average Comment Word Count: <%= @post.comments.average :word_count %> 
```

更新：正如@coreward 所指出的，这个答案的第一部分对异步更新没有用，但答案的其余部分可能仍然有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:11:41.367

您最好根据 ActiveModel 中已有的内容构建自定义计数器缓存来跟踪*单词总数*，然后只需计算评论以手动进行数学运算。

```
# you need a comments_count column and a words_count column in this table
class Post < ActiveRecord::Base
  has_many :comments

  def avg_words_per_comment
    words_count / comments_count
  end
end

class Comment < ActiveRecord::Base
  belongs_to :post, :counter_cache => true
  after_save { update_counters(post.id, :words => word_count }
  before_destroy { update_counters(post.id, :words => -word_count }
end

# And in your view:

<p> 
  The average comment for this post has <%= @post.avg_words_per_comment %> words.
</p> 
```

然后您无需担心异步性，并且视图上的计算量很小。

[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/counter_cache.rb#L65](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/counter_cache.rb#L65)

# java - Android 手机过滤器多播

> ID：10181037
> 
> 赞同：2
> 
> 时间：2012-04-16T20:15:12.357
> 
> 标签：java, android, multicast, android-wifi, xoom

**环境：**

手机：摩托罗拉 Xoom，型号 MZ601，Android 3.0.1
路由器：Netgear WNR3500U/WNR3500L

**问题：**

Android上有一个简单的Java多播监听器：

```
 public void listenMulticast(){
    try{
        WifiManager wifi = (WifiManager)App.getContext().getSystemService( Context.WIFI_SERVICE );

        /*****Get multicast lock*****/
        MulticastLock multicastLock = wifi.createMulticastLock("MyApp");
        multicastLock.setReferenceCounted(true);
        multicastLock.acquire();

        /*****Create a socket*****/
        MulticastSocket socket = new MulticastSocket(PORT);
        socket.joinGroup(InetAddress.getByName(HOST));

        /*****Receive a message*****/
        byte[] buf = new byte[1024];
        DatagramPacket packet = new DatagramPacket(buf, buf.length);
        socket.setSoTimeout(TIME_OUT);
        socket.receive(packet);
        ...
    } catch()

} 
```

应用程序在本地范围内接收多播（尝试使用组 224.0.0.250 和端口 6791）但没有看到（socket.receive() 方法中的超时异常）公共范围内的多播：228.5.6.7（和相同的端口 6791例如）。

安全权限是标准的：

```
<uses-sdk android:minSdkVersion="4"  android:targetSdkVersion="8"></uses-sdk>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"></uses-permission> 
```

我尝试在同一网络中使用不同的安卓手机，它们在组 228.5.6.7 上接收到多播。但是这个摩托罗拉 Xoom 只接收本地多播。

感谢您提出一些可能是错误的想法。

# html - 在 Razor 视图引擎中根据 cookie 设置 html 选择的选定值

> ID：10181040
> 
> 赞同：0
> 
> 时间：2012-04-16T20:15:22.300
> 
> 标签：html, asp.net-mvc-3, cookies, razor

我`<select>`在 Razor 视图上有一个元素。它呈现为带有语言值的下拉框。我通过自定义 cookie 和自定义 cookie 感知视图引擎设置语言。

假设我有一个 cookie 集（称为`language`）。我想要一个视图渲染，并`<option>`根据 cookie 值将相应标记为选中。如何使用 Razor 控制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:43:15.657

好吧，我会将选择放在强类型的局部视图中：

```
@inherits System.Web.Mvc.WebViewPage<Language>
@Html.DropDownListFor(x => x,
                    new SelectList((List<Language>)ViewBag.AllLanguages,
                    "Id",
                    "Text",
                    Model==null?-1:Model.Id), "Choose Language") 
```

我实际上会在我的控制器中设置值

```
public virtual ActionResult _MyAction()
{
    // get users language
    string selectedLanguage = "English"; // default
    if(Request.Cookies["language"] != null)
    {
        selectedLanguage = Request.Cookies["lang"].ToString();
    }

    // language list
    ViewBag.AllLanguages = context.Languages.ToList();

    // retrieve language from database - example using EF
    ViewBag.SelectedLanguage = context.Languages
                                      .FirstOrDefault(l=>l.Text==selectedLanguage); 
```

然后在我的主视图中

```
@Html.Partial("LanguageSelect", ViewBag.SelectedLanguage); 
```

这使选择哪种语言的逻辑远离实际选择列表的呈现。如果经常使用，您可以将所有这些逻辑放在一个共享方法中。

# bytearray - WinRT 将图像加载到字节数组中

> ID：10181046
> 
> 赞同：1
> 
> 时间：2012-04-16T20:15:46.637
> 
> 标签：bytearray, windows-8, microsoft-metro, windows-runtime, bitmapimage

我正在尝试学习如何与图像的一些 WinRT (Metro) 对象进行交互。基本上，我正在努力创建易于使用的“GetPixel”和“SetPixel”方法（类似于不能在 Metro 应用程序中使用的 System.Drawing.Bitmap 中的内容）。

为了测试，我创建了一个“位图”类。它基于我从 Metro 文件选择器控件获得的 IRandomAccessStream 加载。我能够将像素数据加载到 Byte 数组中，然后从中创建一个 BitmapImage，当我将它扔到 Image 控件中时，它可以在 XAML 表单上正确呈现。

这是我的问题，我可以查看字节数组并查看各个 ARGB 值，但是它的像素远远少于应有的像素。例如，我正在加载的图像是 254x197 像素 (254*197*4=200,152)。当我使用下面的代码加载我的 Byte 数组时，它只有 16,382 个字节（也不能被 4 等分）。我假设，这是压缩的？...我不知道。

我的问题是，我做错了什么。我想返回代表我应该拥有的 50,038 个像素的 200,152 个字节，这样我就可以创建 GetPixel(x,y) 和 SetPixel(x,y,Color) 方法。

```
Public Class Bitmap

    Public Sub New()

    End Sub

    Public Async Function Load(s As Windows.Storage.Streams.IRandomAccessStream) As Task
        Dim dr As New DataReader(s.GetInputStreamAt(0))
        Await dr.LoadAsync(s.Size)
        Me.Pixels = New Byte(s.Size - 1) {}
        dr.ReadBytes(Me.Pixels)

        ' We're going to get the height and the width of the image this way. ;)
        Dim bi As New BitmapImage
        Dim stream As New MemoryStream(Me.Pixels)
        bi.SetSource(New RandomStream(stream))
        Me.Width = bi.PixelWidth
        Me.Height = bi.PixelHeight
    End Function

    Public Function ToBitmapImage() As BitmapImage
        Dim bi As New BitmapImage
        Dim stream As New MemoryStream(Me.Pixels)
        bi.SetSource(New RandomStream(stream))
        Return bi
    End Function

    Public Property Pixels As Byte()
    Public Property Width As Integer = 0
    Public Property Height As Integer = 0

End Class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T23:39:40.483

我在[这里有一个 WinRT 版本的](http://bit.ly/WriteableBitmapExWinRT)[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)项目，可以满足您的需求。基本上，您需要将图像加载到 WriteableBitmap 中，然后通过调用 PixelBuffer.AsStream() 访问其像素缓冲区。然后您需要将流寻找到 x,y 位置 (y * bmp.PixelWidth + x) 才能读取像素值。然后还将您获得的 4 个字节转换为适合您的像素格式。

编辑*

WriteableBitmapEx 现在确实原生支持 WinRT。

# liferay - 为什么要使用 PortletURL？

> ID：10181047
> 
> 赞同：2
> 
> 时间：2012-04-16T20:15:48.457
> 
> 标签：liferay

这个帖子不是问题，当我浏览 Liferay 论坛时，有人提出了关于使用 PortletURL 的疑问。

在某些情况下，我在 javscript 方法中看到了这个 PortletURL

```
function createRowURL() {
   var portletURL = new Liferay.PortletURL();
   portletURL.setParameter("rowNumber", "25" );
   return portletURL.toString();
} 
```

在某些情况下，我在方法中看到这个 PortletURL `doView`，如图所示

获取 currentURL ：

```
PortletURL url = PortletURLUtil.getCurrent(renderRequest, mimeResponse or renderResponse) 
```

从 renderResponse 创建 PortletURL ：

1.  对于 RenderURL：

    ```
    PortletURL renderURL = renderResponse.createRenderURL(); 
    ```

2.  对于 actionURL：

    ```
    PortletURL actionURL = renderResponse.createActionURL(); 
    ```

谁能告诉我在哪种情况下 PortletURL 会有用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T23:39:05.997

Portlet 应用程序不同于普通的 Web 应用程序。Portlet 是称为门户的父页面内的迷你页面，多个门户成为一本书（Weblogic 术语）。在这种情况下，普通 URL 将不起作用。除了上面给出的原因，一个portlet 有一个不同状态的生命周期。您必须为 Portlet 容器提供一种方法来确定哪个 portlet 正在与它通信以及它处于什么状态 - 例如 portlet 的窗口状态 - 它是最小化、最大化还是正常。当然，PortletUrl 的另一个重要功能就是携带请求参数。如果您正在查看 PortletURL，您肯定会看到许多奇异的名称以及您提供的请求参数。

尽管 PortletURL 所需的大部分信息在许多情况下都很常见，但 PortletURL 的结构是依赖于实现的，并且它是由 Portlet 容器以一种或另一种方式生成的。距离我上次的生命射线体验已经有一段时间了。我从未在我的应用程序中使用过 liferay 特定的 javascript。我使用自己的 javascript/ajax 与门户容器进行通信。所以我只是猜测您提供的 javascript 方式也是 liferay 特定的，并且不能在不同的门户框架之间移植。

**编辑：在@PrakashK 的评论之后添加了 PortletURL 的类型及其差异和用法。**

有两种类型的 PortletURL：

1.  动作 URL，它们触发一个动作请求，然后是一个渲染请求。
2.  渲染 URL，它们触发渲染请求。

所以ActionURL 的目的是触发某种动作——比如按下按钮。动作请求将被 portlet 容器截获并发送到适当的动作请求处理程序，后者处理动作请求并设置渲染阶段使用的必要渲染参数。在 portlet 的生命周期中，呈现请求始终遵循操作请求。另一方面，正如其名称所暗示的，RenderURl 主要用于呈现portlet。

由于 RenderURL 的“呈现”性质，在 JSR168（Portlet 1.0）中，您不能直接通过 portlet 提供动态生成的资源。唯一的解决方法是使用额外的 servlet 来提供资源。这种方法的最大问题是 Servlet 无法参与 portlet 的生命周期。指向同一 Portlet Web 应用程序中资源的直接链接不能保证通过门户服务器，并且不会有可用的 Portlet 上下文。为了克服这个问题，在 JSR286（Portlet 2.0）中，引入了一种称为资源服务的特性和一种称为 ResourceURL 的新型 URL，以使 Portlet 能够动态地提供资源。ResourceURL 不是 PortletURL，尽管它们扩展了相同的 BaseURL。ResourceURL 和 ActionURL 最大的区别在于 ResourceURL 不会触发渲染请求。这使得对资源的 Ajax 请求成为可能。

有关 Portlet 2.0 的更多信息，请参阅[[JSR286]](http://developers.sun.com/portalserver/reference/techart/jsr286/jsr286.html)。

希望以上信息对您有用。

# php - 将 CSV 处理为带有键列标题的数组

> ID：10181054
> 
> 赞同：28
> 
> 时间：2012-04-16T20:16:14.383
> 
> 标签：php, arrays, csv, heading

我有一个 CSV，第一行包含字段名称。示例数据是...

```
"Make","Model","Note"
"Chevy","1500","loaded"
"Chevy","2500",""
"Chevy","","loaded" 
```

我需要将我的数据格式化为键值对数组，其中键名是列标题。我想第 1 行会是这样的：

```
$array = [
    "Make" => "Chevy",
    "Model" => "1500",
    "Note" => "loaded"
]; 
```

...第 2 行...

```
$array = [
    "Make" => "Chevy",
    "Model" => "1500",
    "Note" => ""
]; 
```

...和第 3 行...

```
$array = [
    "Make" => "Chevy",
    "Model" => "",
    "Note" => "loaded"
]; 
```

除了静态之外，我不确定如何执行此操作 - 问题是带有关联数据的列可能会从一个文件更改为下一个文件……重新排列、删除或添加的列。

非常感谢您的想法。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-16T20:21:27.163

```
$all_rows = array();
$header = fgetcsv($file);
while ($row = fgetcsv($file)) {
  $all_rows[] = array_combine($header, $row);
} 
```

```
print_r($all_rows); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-16T20:34:55.677

PHP 已经提供了您所需要的 99.9% `SplFileObject`，您可以通过扩展来添加缺少的 0.1%。在以下示例`CSVFile`中从它扩展：

```
$csv = new CSVFile('../data/test.csv');

foreach ($csv as $line)
{
    var_dump($line);
} 
```

使用您的示例数据：

```
array(3) {
  ["Make"]=>  string(5) "Chevy"
  ["Model"]=> string(4) "1500"
  ["Note"]=>  string(6) "loaded"
}
array(3) {
  ["Make"]=>  string(5) "Chevy"
  ["Model"]=> string(4) "2500"
  ["Note"]=> string(0) ""
}
array(3) {
  ["Make"]=>  string(5) "Chevy"
  ["Model"]=> string(0) ""
  ["Note"]=>  string(6) "loaded"
} 
```

`CSVFile`定义如下：

```
class CSVFile extends SplFileObject
{
    private $keys;

    public function __construct($file)
    {
        parent::__construct($file);
        $this->setFlags(SplFileObject::READ_CSV);
    }

    public function rewind()
    {
        parent::rewind();
        $this->keys = parent::current();
        parent::next();
    }

    public function current()
    {
        return array_combine($this->keys, parent::current());
    }

    public function getKeys()
    {
        return $this->keys;
    }
} 
```

如果你这样做，细节就会被很好地封装起来。此外，处理函数内部的错误（例如计数不匹配）更容易，`current()`因此使用数据的代码不需要处理它。

***编辑：***

但是，给出的示例在可重用性方面很短。与其从**SplFileObject**扩展，不如聚合它：

```
class KeyedArrayIterator extends IteratorIterator
{
    private $keys;

    public function rewind()
    {
        parent::rewind();
        $this->keys = parent::current();
        parent::next();
    }

    public function current()
    {
        return array_combine($this->keys, parent::current());
    }

    public function getKeys()
    {
        return $this->keys;
    }
} 
```

代码是*相同*的，但封装在构造函数中的细节被省略了。这种减少允许更广泛地使用该类型，例如（但不仅限于）上述**SplFileObject**：

```
$file = new SplFileObject('../data/test.csv');
$file->setFlags($file::READ_CSV);

$csv = new KeyedArrayIterator($file);

foreach ($csv as $line) {
    var_dump($line);
} 
```

如果现在听起来太冗长，可以再次对其进行包装以再次为其提供更好的外观：

```
class CSVFile extends KeyedArrayIterator
{
    /**
     * @param string $file
     */
    public function __construct($file)
    {
        parent::__construct(new SplFileObject($file));
        $this->setFlags(SplFileObject::READ_CSV);
    }
} 
```

由于**TraversableIterator的标准装饰能力，** **CSVFile**的第一个示例中的原始构造函数代码可以被 100% 复制。

最后一个添加还允许保持*使用***CSVFile**迭代器的原始代码完整：

```
$csv = new CSVFile('../data/test.csv');

foreach ($csv as $line) {
    var_dump($line);
} 
```

因此，只需快速重构以允许更多代码重用。您可以免费获得**KeyedArrayIterator**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-19T05:13:56.290

```
$csv_data = array_map('str_getcsv', file('Book.csv'));// reads the csv file in php array
$csv_header = $csv_data[0];//creates a copy of csv header array
unset($csv_data[0]);//removes the header from $csv_data since no longer needed
foreach($csv_data as $row){
    $row = array_combine($csv_header, $row);// adds header to each row as key
    var_dump($row);//do something here with each row
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-15T10:29:38.007

```
function processCsv($absolutePath)
{
    $csv = array_map('str_getcsv', file($absolutePath));
    $headers = $csv[0];
    unset($csv[0]);
    $rowsWithKeys = [];
    foreach ($csv as $row) {
        $newRow = [];
        foreach ($headers as $k => $key) {
            $newRow[$key] = $row[$k];
        }
        $rowsWithKeys[] = $newRow;
    }
    return $rowsWithKeys;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-09T10:42:09.317

在这一点上，我假设你已经解决了这个问题，但我想我会提出一个建议的方式来解决这个问题，可能不是最好/最优雅的解决方案，但它可以解决问题：

```
$row = 1;
$array = array();
$marray = array();
$handle = fopen('file.csv', 'r');
if ($handle !== FALSE) {
    while (($data = fgetcsv($handle, 0, ',')) !== FALSE) {
        if ($row === 1) {
            $num = count($data);
            for ($i = 0; $i < $num; $i++) {
                array_push($array, $data[$i]);
            }
        }
        else {
            $c = 0;
            foreach ($array as $key) {
                $marray[$row - 1][$key] = $data[$c];
                $c++;
            }
        }
        $row++;
    }
    echo '<pre>';
    print_r($marray);
    echo '</pre>';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-16T12:48:55.503

试试这个代码：

```
$query = "SELECT * FROM datashep_AMS.COMPLETE_APPLICATIONS";
$export= mysql_query($query);
$first = true;
$temp = $export[0];
//echo "<pre>"; print_r($first); exit;

header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=file.csv');
header('Pragma: no-cache');
header("Expires: 0");

$outstream = fopen("php://output", "w");

foreach($export as $result)
{
    if($first){
        $titles = array();
        foreach($temp as $key=>$val){
            $titles[] = $key;
        }
        //print_r ($titles);exit;
        fputcsv($outstream, $titles);
    }
    $first = false;
    fputcsv($outstream, $result);
}

fclose($outstream); 
```

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-04T08:59:48.017

试试这个

```
$csv = array_map("str_getcsv", file('file.csv', FILE_SKIP_EMPTY_LINES));    
$header = array_shift($csv); // get header from array

foreach ($csv as $key => $value) {    
    $csv[$key] = array_combine($header, $value);
    var_dump($csv[$key]['Model']);
}

var_dump($csv); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-12T13:02:17.407

在上面蒂姆库珀的回答中，而不是

```
$all_rows = array();
$header = null;
while ($row = fgetcsv($file)) {
    if ($header === null) {
        $header = $row;
        continue;
    }
    $all_rows[] = array_combine($header, $row);
} 
```

我会以更优雅和更有效的方式编写代码：

```
$rows = null;
$header = fgetcsv($file);
while ($row = fgetcsv($file)) {
    $rows[] = array_combine($header, $row);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-01T14:05:37.377

array_combine [()](http://php.net/manual/en/function.array-combine.php)函数仅在标题列与数据列匹配时才有效，否则会引发错误。

# php - php函数参数

> ID：10181055
> 
> 赞同：4
> 
> 时间：2012-04-16T20:16:15.670
> 
> 标签：php, function, arguments, optional-arguments

我不知道我是如何或从哪里得到这个想法的，但出于某种原因，我认为这是可能的。显然经过测试它不起作用，但是有没有办法让它起作用？我想设置 $value2 而无需为 $value1 输入任何内容。

```
function test($value1 = 1, $value2 = 2) {

echo 'Value 1: '.$value1.'<br />';
echo 'Value 2: '.$value2.'<br />';

}

test($value2 = 3);

// output
Value 1: 3
Value 2: 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T20:19:52.280

它并不完全可能按照您想要的方式。

简单地，

```
function test($value1 = null, $value2 = 2) {

echo 'Value 1: '.$value1.'<br />';
echo 'Value 2: '.$value2.'<br />';

}

test(NULL, $value2 = 3); 
```

或者，使用数组作为参数

```
function test($array) {

if(isset($array['value1'])) echo 'Value 1: '.$array['value1'].'<br />';
if(isset($array['value2'])) echo 'Value 2: '.$array['value2'].'<br />';

}

test(array('value2' => 3)); 
```

* * *

**更新：**

我的另一个尝试

```
function test() {
  $args = func_get_args();
  $count = count($args);
  if($count==1) { test1Arg($args[0]); }
  elseif($count == 2) { test2Arg($args[0],$args[1]); }
  else { //void; }
}

function test1Arg($arg1) {
   //Do something for only one argument
}
function test2Arg($arg1,$arg2) {
   //Do something for two args
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T20:27:23.180

您尝试执行的操作称为“关键字参数”或“命名参数”，与 Python 等其他脚本语言相比，PHP 中不可用。

如果您有具有数百个参数的函数，并且真的想要实现比 PHP 附带的更灵活的解决方案，您可以使用数组或对象构建自己的解决方法，可能与[func_get_args()](http://de.php.net/func_get_args "func_get_args()")结合使用。但这显然不如真正的关键字参数漂亮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:31:49.717

对于一个简单的函数，跳入 OOP 可能是不切实际的；但是，为了给这种变化火上浇油，在这种情况下，您可能会使用 OOP，无论好坏。

为方便起见，默认函数参数很难交换，但是，扩展类并非如此。这些意味着随着需要的变化而变化和变异。

```
class test {
    var $value1 = 1;
    var $value2 = 2;

    function __construct() {
        printf( "Value 1 = %s, value 2 = %s\n", $this->value1, $this->value2 );
    }
}

class test2 extends test {
    var $value2 = 42;
}

$me = new test();   // outputs Value 1 = 1, value 2 = 2
$me2 = new test2(); // outputs Value 1 = 1, value 2 = 42 
```

再一次，这不是最简单任务的实用解决方案，但是，它将允许您随意改变代码片段。重新考虑是否可以重写代码以利用这种风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T20:22:50.043

```
function test($value1 = null, $value2 = null) {
  $value1 = $value1 ?: 1;
  $value2 = $value2 ?: 2;
  echo 'Value 1: '.$value1.'<br />';
  echo 'Value 2: '.$value2.'<br />';
}

test(null, 3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T20:24:23.607

AFAIK，你不能按照你想要的方式修改参数的值。该手册甚至说这是无效的（http://php.net/manual/en/functions.arguments.php#example-153）。

您正在做的`test($value2 = 3);`是首先为一个新变量分配**一个**值`$value2`3，然后将其作为.**`test`**

 **但是，您可以创建一个函数，当您发送一个空参数时，它会获得一个分配的值：

```
function test($value1 = NULL, $value2 = 2) {

    if ($value1 === NULL)
        $value1 = 1 // $value1 default value

    echo 'Value 1: '.$value1.'<br />';
    echo 'Value 2: '.$value2.'<br />';

}

test(NULL, 3);

// output
Value 1: 1
Value 2: 3 
```

或者，更改变量的默认值：

```
function test($value2 = 2, $value1 = 1) {

    echo 'Value 1: '.$value1.'<br />';
    echo 'Value 2: '.$value2.'<br />';

}

test(3);

// output
Value 1: 1
Value 2: 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T20:28:46.300

这在 PHP 中是不可能的，尽管它很方便，但是有几种方法可以解决它。

```
function func($val1=null, $val2=null) {
    // Set default values.
    if (!$val1) $val1 = 1;
    if (!$val2) $val2 = 2;
    // Your code here.
}

func(null, 74); // Uses the default value of 1 for $val1. 
```

或者使用一个数组（如果你有很长的参数列表会更方便）*：*

```
function func($arr) {
    // Set default values.
    $val1 = isset($arr[1]) ? $arr[1] : 1;
    $val2 = isset($arr[2]) ? $arr[2] : 2;
    // Your code here.
}

func(array(2 => 74)); // Uses the default value of 1 for $val1. 
```

实际上，我有一个函数，它接受数组、键和默认值，并返回一个值，所以我可以将这些行写为

```
$val1 = Core::val($arr, 1, 1); // array, key, default
$val2 = Core::val($arr, 2, 2); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-16T20:20:02.703

将具有默认值的参数放在不带默认值的参数之后被认为是不好的做法。原因是它不允许简单地编写一个带有一堆逗号的函数。

在您的情况下，您应该将一个值传递给两个参数。即使该值为空。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-16T20:22:10.740

也许这就是你要找的：

```
 function test($value1, $value2) 
    {

      if ($value1!="") 
      {
         echo 'Value 1: '.$value1.'<br />'; 
      }
      else
      {
         echo 'Value 1: 3'<br />'; 
      }
      echo 'Value 2: '.$value2.'<br />';

    }

    test("", $value2 = 3);

    // output
    Value 1: 3
    Value 2: 2 
```**

# windows - 文件取消链接失败

> ID：10181057
> 
> 赞同：174
> 
> 时间：2012-04-16T20:16:29.143
> 
> 标签：windows, git

我正在尝试执行 git pull 并收到以下错误：

> 文件“lib/xxx.jar”的取消链接失败。我应该再试一次吗？（是/否）

无论我选择 y 还是 n 都无法达到可以拉或推的状态。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-04-16T21:27:40.193

这通常意味着一个进程仍在使用该特定文件（仍然有一个句柄）
（在 Windows 上，[`ProcessExplorer`](http://technet.microsoft.com/en-us/sysinternals/bb896653)擅长跟踪那种进程）

尝试关闭您的其他程序，然后重试您的`git pull`.

请注意，您可以使用[`GIT_ASK_YESNO`变量](https://stackoverflow.com/questions/3698369/git-rebase-got-unlink-of-file-failed-error).

* * *

2019 年 1 月更新：

使用 Git 2.21（2019 年第一季度），这应该更加固定，因为“ `git gc`”和“ `git repack`”在删除之前没有关闭他们发现不需要的打开的包文件，这在无法删除打开的文件的平台上不起作用。
这已得到纠正。

请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 5bdece0](https://github.com/git/git/commit/5bdece0d70578edda870b0cf04d598ba04e7a0a3)（2018 年 12 月 15 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 5104f8f](https://github.com/git/git/commit/5104f8f1acaecbe252cd0c561582052c12278b62))^(中，2019 年 1 月 18 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## `gc`/ `repack`: 需要时发布包
> 
> 在 Windows 上，如果进程仍持有句柄，则无法删除或重命名文件。
> 为了解决这个问题，我们引入了该`close_all_packs()`功能。
> 
> 早些时候，我们确保在生成包之前释放包`git gc`，以防`gc`想要删除不再需要的包。
> 
> 但是这个开发者忘记了它`gc`自己也需要放弃包，例如当通过`--aggressive`选项合并所有包时。
> 
> 同样，`git repack -d`想要删除过时的包，因此也需要关闭所有包句柄。

* * *

2016 年 1 月更新

这应该在 Git 2.8（2016 年 3 月）中得到修复（参见下面的 Git 2.19，Q3 2018）

请参阅[Johannes Schindelin (](https://github.com/dscho) [)的](https://github.com/dscho)[提交 d562102](https://github.com/git/git/commit/d5621020c1e0edfa998cb5c5e80cdf47f36ffb1a)、[提交 dcacb1b](https://github.com/git/git/commit/dcacb1b2ee42d3cc20e4720134f18ab5ba267f3a)、[提交 df617b5](https://github.com/git/git/commit/df617b529e9ebf01cde572b8f78f4dd8bc6c010b)、[提交 0898c96](https://github.com/git/git/commit/0898c96281044a1130f1a777660aaf17e782c4f6)（2016 年 1 月 13 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 3c80940](https://github.com/git/git/commit/3c809405cb35679dd5205bf0ea118b7ee9256abb))^(中，2016 年 1 月 26 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## `fetch`: 在垃圾收集之前释放包文件
> 
> 在自动 gc'ing 之前，我们需要确保打包文件被释放，以防它们需要重新打包和垃圾收集。
> 
> 许多`gc --auto`在退出之前运行“”的代码路径保持包文件的映射并将文件描述符留给它们打开，这对无法删除打开的文件的系统不友好。
> 他们现在在这样做之前关闭包装。

这解决了[`git-for-widows`问题 500](https://github.com/git-for-windows/git/issues/500)。

查看[用于验证该新方法的测试](https://github.com/git/git/commit/0898c96281044a1130f1a777660aaf17e782c4f6#diff-460c7b28c3b4d83da23f72d403d06b70R719)，一种可能的解决方法（因为 Git 2.8 尚未推出）将是人工提高`gc.autoPackLimit`.

```
git config gc.autoPackLimit 10000
git fetch
git config gc.autoPackLimit 50 # default value 
```

* * *

[git 2.8.4（2016 年 6 月）](https://github.com/git-for-windows/git/releases/tag/v2.8.4.windows.1)确实提到了[问题 755](https://github.com/git-for-windows/git/pull/755)，这也应该可以缓解这个问题（[提交 2db0641](https://github.com/git-for-windows/git/commit/2db0641fa2c7ff0ae2521b7045634cfd6d69d70d)）：

> ## 确保临时文件句柄不被子进程继承

* * *

实际上，上面提到的[`git-for-windows`问题 500](https://github.com/git-for-windows/git/issues/500)确实在 Git 2.19, Q3 2018 中得到了修复。
请参阅“ [Git - Unlink of file `.idx`and `.pack`failed (The only processowned handle to this file is `git.exe`)](https://stackoverflow.com/a/51755262/6309) ”

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-09-05T11:06:27.457

这是 Windows 特定的答案，所以我知道它与您无关......我只是为了将来的搜索者的利益而将其包括在内。

就我而言，这是因为我从非提升的命令行运行 Git。“以管理员身份运行”为我修复了它。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-06-04T19:44:52.737

对我来说，这是因为 Visual Studio 试图从 pull 中重新加载所有更改的文件。刷新 Visual Studio，然后运行`git gc`​​.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-24T09:17:36.437

在使用 GitHub for Windows 的 Windows 上，运行时我在 shell 中遇到了类似的错误`git gc`：

```
Unlink of file '.git/objects/pack/pack-0b40ae7eae9b83edac62e19c07ff7b4c175244f6.idx' failed. Should I try again? (y/n) 
```

我通过关闭 GitHub GUI 解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-30T10:31:22.973

尝试重新启动您的 Apache 或其他 Web 服务器，因为它可能已锁定您的某些文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-30T15:55:45.950

关闭 Visual Studio 和 Rubymine 并没有再次收到错误。其中之一是罪魁祸首。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-28T06:37:13.850

关闭您的 IDE，然后执行`git pull`. 它会起作用的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-28T13:35:09.670

在我的案例中，这是由 LESS 编译器 SimplLESS 引起的。您必须在系统托盘中关闭它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-12T03:15:17.307

我也遇到了这个问题，但是我发现是UltraEdit碍事，因为我用UE组织和编辑我的eclipse工作区~~

可能是因为 UE 对特定文件的旧版本有句柄，Git 无法取消链接。

在我关闭 UltraEdit 之后，问题就再也没有发生过。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-01T11:08:54.260

以上答案都不适用于我，但我运行带有 force 选项的 git gc 命令，它解决了我的情况。

'git gc --force'

[Windows 7，以管理员身份运行 => 命令提示符]

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-01T04:22:51.220

问题是因为您有一些处理这些文件的程序。我有一个建议，您应该使用 Unlocker 来查找正在处理它的程序：

[解锁器](http://www.filehippo.com/download_unlocker/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-05T14:03:11.887

我在 Windows XP 上遇到过这种情况，消息都卡在一个循环中，并且可以通过回复来清除。

通过关闭 Git-GUI 清除了卡在循环中的发生。（我在 bash shell 中运行 git merge -i 。）

其他情况可能是由于我的存储库中的大量文件而发生的。它主要发生在 .cod 文件中，我后来将其从版本控制中排除。（我确实有理由最初跟踪它们。）我相信原因可能与 Git 使用文件句柄的速率有关。

我想知道通过回复可以清除问题是否与Windows相关，因为之前的两个海报都提到了Windows，并且没有人说他们与其他操作系统有问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-02T14:24:34.010

我打开了 PHPStorm，关闭了它，一切都很好。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-05-09T18:27:55.477

我遇到了同样的问题，我从窗口任务管理器中关闭了所有相关程序。但是，它仍然无法正常工作。有趣的部分是我运行了“Git rebase”而不是“Git pull”并且它成功了！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-16T13:34:42.407

尝试在管理模式下运行命令行编辑器并运行命令。它帮助并解决问题。:)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-28T10:44:27.417

我在 Windows 上遇到了同样的问题。我试图在我的 Ubuntu VM 上访问文件时在 Windows 上运行 gc。Ubuntu 上的封闭终结者和文件资源管理器对我有用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-11-07T17:04:21.263

就我而言，我有一种修剪导致问题的标签的旧方法。我通过取消原始设置来解决它：

```
git config --global --unset remote.origin.fetch '\+refs/tags/\*:refs/tags/\*' 
```

然后将其添加到修剪服务器上已删除的分支：

```
git config --global fetch.pruneTags true 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-03T03:44:32.993

我遇到了同样的错误，并通过关闭 eclipse 并在使用文件时再次拉取来解决它。

# c# - 保护应用程序和后台代理之间的共享存储数据

> ID：10181058
> 
> 赞同：6
> 
> 时间：2012-04-16T20:16:35.820
> 
> 标签：c#, windows-phone-7, mutex, isolatedstorage, background-agent

根据[MSDN](http://msdn.microsoft.com/en-us/library/hh202944%28v=VS.92%29.aspx)，前台应用程序和后台代理之间通过隔离存储中的文件进行的通信应该受到 Mutex 的保护。

我能找到的唯一一篇描述如何做到这一点的文章是[Dina](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2011/11/this-is-continuation-of-this-post.html) Berry 的这篇文章。然而，她似乎只用互斥锁保护读取而不是写入。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T06:06:40.877

互斥锁可以跨多个进程锁定。如果您正在运行需要独占访问资源的计划任务，这在 Windows Phone 中将很有用。为了跨进程锁定互斥锁，必须为互斥锁命名。

监视器只能在进程内锁定。

互斥体示例：

电话应用任务：

```
public class DatabaseService
{
  private Mutex _mut=new Mutex("mutex control",false);
  public void AddToDatabase(DbObject row)
  {
    mut.WaitOne();
    SaveRow(row);
    mut.ReleaseMutex();
  }
} 
```

计划任务类：

```
public class ResourceUtilisation
{
  private Mutex _mut=new Mutex("mutex control",true);
  //.. does stuff
  private static void UseResource()
  {
    // Wait until it is safe to enter.
    _mut.WaitOne();

    //Go get dataabse and add some rows
    DoStuff();

    // Release the Mutex.
    _mut.ReleaseMutex();
  }
} 
```

在上面的示例中，我们一次只允许一个应用程序访问本地数据库资源。这就是我们使用互斥锁的原因。

监视器示例（使用锁定语法）：

电话应用任务：

```
public class DatabaseService
{
  private object _locker=new object();
  public void AddToDatabase(DbObject row)
  {
    lock(_locker)
        SaveRow(row);
  }
} 
```

计划任务类：

```
public class ResourceUtilisation
{
  private object _locker=new object();
  //.. does stuff
  private static void UseResource()
  {

    //Go get dataabse and add some rows
    lock(_locker)
        DoStuff();
  }
} 
```

在此示例中，我们可以阻止多个应用程序线程进入 SaveRow，并且可以阻止多个 ScheduledTask 线程进入 DoStuff 方法。我们不能用监视器做的是确保一次只有一个线程访问本地数据库。

这基本上就是区别。Monitor 也比 Mutex 快得多。

# asp.net-mvc - SignalR 在处理 NServiceBus 中的事件时未调用客户端函数

> ID：10181059
> 
> 赞同：1
> 
> 时间：2012-04-16T20:16:38.413
> 
> 标签：asp.net-mvc, nservicebus, signalr

我有一个 MVC 应用程序，我正在显示数据库中的记录，并且我能够创建新记录。当来自 Nservicebus 的 IEvent 处理程序完成时，我正在使用 SignalR 通知客户端。

**索引.cshtml**

```
<script src="signalr/hubs" type="text/javascript"></script>
<script>
    var myHub;

    $(function () {
        myHub = $.connection.userAccountHub;

        //add handler to handle the nofication
        myHub.testMsg = function () {
            alert("I would really like for this to work");
        };

        $.connection.hub.start();
    }); 
</script> 
```

**用户控制器.cs**

```
public class UserController : Controller
    {
        private readonly IBus _bus;    

public ActionResult Index()
        {
            return View(getalldata());
        }

[HttpPost]
        public ActionResult Create(CreateUserAccountModel user)
        {
            if (ModelState.IsValid)
            {
                _bus.Send(new CreateUserAccountCommand
                {
                    FirstName = user.FirstName,
                    LastName = user.LastName,
                    NetworkLogin = user.NetworkLogin
                });

                return RedirectToAction("Index");
            }

            return View(user);
        } 
```

**用户帐户中心**

```
public class UserAccountHub : Hub
    {

    } 
```

**UserAccountCreatedNotifyEventHandler.cs**

```
public class UserAccountCreatedNotifyEventHandler : IHandleMessages<UserAccountCreatedNotifyEvent>
    {
        public void Handle(UserAccountCreatedNotifyEvent message)
        {
            IConnectionManager connectionManager = AspNetHost.DependencyResolver.Resolve<IConnectionManager>();
            dynamic clients = connectionManager.GetClients<UserAccountHub>();

            clients.testMsg();
        }
    } 
```

基本上我会去 Index 操作，它只显示我的所有记录并有一个创建按钮。我单击创建按钮`@Html.ActionLink("Create", "Create", null, null)`，它调用了该`public ActionResult Create(CreateUserAccountModel user)`方法。启动总线，然后重定向到索引操作。服务总线做它的事情并且`UserAccountCreatedNotifyEventHandler Handle`方法被适当地触发。

这是我开始看到一些问题的地方。我调用适当的信号器方法来获取客户端，以便我可以广播消息`.testMsg()`，但是客户端没有收到消息。

所以简而言之，我的信号员`clients.testMsg`呼叫没有按预期运行。据我所知，我正在关注我在网上找到的代码示例，甚至是我拥有的其他测试项目。我假设我在做一些愚蠢的事情，但不能针对它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:57:44.277

在您的处理程序中，您需要创建一个到集线器的代理并调用代理上的方法。好吧，注入代理，因为每次创建它都会很昂贵！

见[http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-net-client](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-net-client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:28:23.020

尝试

```
myHub.client.testMsg = function(){....} 
```

不是

```
myHub.testMsg = function(){....} 
```

# c++ - InsertMenu/AppendMenu - 如何使用 C++ 和 win32 将图标添加到菜单和子菜单

> ID：10181063
> 
> 赞同：4
> 
> 时间：2012-04-16T20:16:53.250
> 
> 标签：c++, visual-c++

我使用 C++ 和 win32 编程编写了一个 shell 扩展 dll 上下文菜单程序。开发环境是 Visual Studio 2008 和 2010。在下面的示例代码中，我试图只为主菜单添加菜单图标。主菜单未显示菜单图标。（我需要为所有菜单项添加图标。）。

请更正以下代码。

```
QueryContextMenu(HMENU hmenu, UINT /*uInd*/, UINT idCmdFirst, UINT /*idCmdLast*/, UINT /*uFlags*/ )
{

    int id = 1;

    HBITMAP hBitmap = NULL;

    hBitmap = (HBITMAP)LoadImage((HMODULE)_AtlBaseModule.m_hInst,MAKEINTRESOURCE(IDB_MYBITMAP), IMAGE_BITMAP, 12, 12, 0);

    HMENU submenu = CreatePopupMenu();

    AppendMenu(submenu, MF_STRING|MF_ENABLED, uidCmdFirst + id++, L"XP");
    AppendMenu(submenu, MF_STRING|MF_ENABLED,uidCmdFirst + id++, L"VISTA");
    AppendMenu(submenu, MF_STRING|MF_ENABLED,uidCmdFirst + id++, L"Win 7");

    InsertMenu(hmenu, 4,MF_BYPOSITION|MF_POPUP, UINT(submenu), L"Windows");
    SetMenuItemBitmaps(hmenu,id++, MF_BITMAP, hBitmap,hBitmap);

    return id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:28:45.847

CreatePopUpMenu 也可以。您只需要使用 InsertMenu 而不是 AppendMenu。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-15T00:29:56.380

阅读 SetMenuItemBitmap [https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setmenuitembitmaps](https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setmenuitembitmaps)的定义没有 MF_BITMAP 标志之类的东西。

选项是 MF_BYCOMMAND 和 MF_BYPOSITION。似乎您正在尝试使用 MF_BYCOMMAND，但必须使用已赋予 MenuItens 的相同值。

您还必须检查 BITMAP 的格式。SetMenuItemBitmaps 只接受单色。我正在谷歌上做同样的事情并在这里取得了成功。谢谢你指路。

# jquery-mobile - JqueryMobile - 我的页面出现在过渡之前

> ID：10181064
> 
> 赞同：0
> 
> 时间：2012-04-16T20:16:57.913
> 
> 标签：jquery-mobile, cordova

我正在使用 JqueryMobile 设置一个应用程序。每当我点击我的导航时，下一页会出现在当前页面的顶部一秒钟然后消失，然后过渡开始并出现下一页。这是其他人都遇到的已知问题吗？如果是，我该如何解决。我知道闪烁过渡存在问题，但我认为这不一样。我正在使用未更改的 jquerymobile 文档。下面是我的代码：

[https://gist.github.com/2401211](https://gist.github.com/2401211)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:15:14.717

您的投诉/问题很常见。在 android 2.x 设备上，过渡可能特别可怕。这是他们博客的引述

> 我们在 1.0 之前做了大量工作以使我们的过渡尽可能平滑，但有两件重要的事情最终变得非常困难：需要在过渡之间滚动页面以及 Android 较差的动画性能。[资源](http://jquerymobile.com/blog/2012/02/28/announcing-jquery-mobile-1-1-0-rc1/)

话虽如此，我的建议是更新到 JQM 版本 1.1.0 最终版本。

使用它开始

```
<html> 
    <head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Hello world</p>      
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:28:26.487

试试[这个修复](http://blogs.bytecode.com.au/glen/2011/07/14/eliminating-annoying-flicker-transitions-with.html)：

```
.ui-page {
    -webkit-backface-visibility: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T00:29:17.427

这可能是使用相同 ID 的问题。检查以确保您的 ID 在每个页面上都不同。这就是我听起来的样子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T16:00:22.443

我已经多次遇到这个问题，就在我准备自杀的时候，发现问题出在一些自定义的 CSS 类中，我已经解决了！例如，我的身体声明中有：

```
body{
    margin: 0px;
} 
```

删除边距，瞧！有些东西是固定的！在其他应用程序中，我在自定义包装类声明中发现：

```
.wrapper{
    <blabla>
    position:absolute;
    <blabla>
} 
```

当然，这个“绝对”会强制引擎在绝对位置渲染页面，然后启动转换。

那么，如何解决您的问题？

我建议您对所有 .css 文件进行注释，并开始逐类测试，尝试转换，当转换失败时，您将看到“令人不安”的类。

试试看，如果它解决了您的问题，请告诉我们！

# android - 没有 XML 内容。请为您的文档添加根视图或布局

> ID：10181066
> 
> 赞同：3
> 
> 时间：2012-04-16T20:17:07.863
> 
> 标签：android

我正在开发一个安卓应用程序。我是 XML 新手。我收到消息说“没有 XML 内容。请为您的文档添加根视图或布局” XML 代码如下所示。请帮忙

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/ref" 
        android:textSize="15dp"/>
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/ref2" 
        android:textSize="15dp"/>

    <EditText
        android:id="@+id/uname"
        android:layout_width="150dp"
        android:layout_height="25dp"
        android:inputType="text"
        android:ems="5" >

        <requestFocus />
    </EditText>

   <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/ref3" 
        android:textSize="15dp"/>

    <EditText
        android:id="@+id/pwd"
        android:layout_width="150dp"
        android:layout_height="25dp"
        android:inputType="text"
        android:ems="5" />

    <Button
        android:layout_width="60dp" 
        android:layout_height="35dp"
        android:text="@string/ref" 
        android:id="@+id/bLogin" />
  </LinearLayout> 
```

----主要活动代码---

```
package com.android.disasterAlertApp;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class MainActivity extends Activity {
   /** Called when the activity is first created. */
   Button login;
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    login =(Button) findViewById(R.id.bLogin);
   }
}

----Manifest----
[2012-04-17 00:34:20 - Disaster Alert App] res\layout\main.xml:0: error: Resource entry      main is already defined.
[2012-04-17 00:34:20 - Disaster Alert App] res\layout\main.out.xml:0: Originally defined here.
[2012-04-17 00:34:20 - Disaster Alert App] C:\Users\Acer\workspace\Disaster Alert App\res\layout\main.out.xml:1: error: Error parsing XML: no element found
[2012-04-17 01:05:59 - Disaster Alert App] res\layout\main.xml:0: error: Resource entry main is already defined.
[2012-04-17 01:05:59 - Disaster Alert App] res\layout\main.out.xml:0: Originally defined here.
[2012-04-17 01:05:59 - Disaster Alert App] C:\Users\Acer\workspace\Disaster Alert App\res\layout\main.out.xml:1: error: Error parsing XML: no element found
[2012-04-17 01:11:14 - Disaster Alert App] res\layout\main.xml:0: error: Resource entry main is already defined.
[2012-04-17 01:11:14 - Disaster Alert App] res\layout\main.out.xml:0: Originally defined here.
[2012-04-17 01:11:14 - Disaster Alert App] C:\Users\Acer\workspace\Disaster Alert App\res\layout\main.out.xml:1: error: Error parsing XML: no element found
[2012-04-17 01:14:56 - Disaster Alert App] ------------------------------
[2012-04-17 01:14:56 - Disaster Alert App] Android Launch!
[2012-04-17 01:14:56 - Disaster Alert App] Connection with adb was interrupted.
[2012-04-17 01:14:56 - Disaster Alert App] 0 attempts have been made to reconnect.
[2012-04-17 01:14:56 - Disaster Alert App] You may want to manually restart adb from the Devices view.
[2012-04-17 01:17:27 - Disaster Alert App] Error in an XML file: aborting build.
[2012-04-17 01:37:10 - Disaster Alert App] res\layout\main.xml:0: error: Resource entry main is already defined.
[2012-04-17 01:38:42 - Disaster Alert App] res\layout\main.xml:0: error: Resource entry main is already defined.
[2012-04-17 01:38:42 - Disaster Alert App] res\layout\main.out.out.xml:0: Originally defined here.
[2012-04-17 01:38:42 - Disaster Alert App] C:\Users\Acer\workspace\Disaster Alert App\res\layout\main.out.out.xml:1: error: Error parsing XML: no element found
[2012-04-17 01:39:28 - Disaster Alert App] Error in an XML file: aborting build. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T20:34:26.297

**哦——看到“main.out.xml”了吗？** 当您使用 Eclipse 启动 XML 文件时，就会发生这种情况。只需删除 'out' xml 并保留 main.xml

当您点击 Play 时，请务必选择/正在编辑一个 .java 文件，否则 eclipse 将生成一个“out.xml”并且无法启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:28:34.533

我想指出 ADT Preview 21 中有一个错误 - 我在这里安装了预览工具来修复 MacBook Retina 模拟器错误：[Android Emulator do not scale to 100% for Mac Book Pro with Retina Display](https://stackoverflow.com/questions/11213037/android-emulator-do-not-scale-to-100-for-mac-book-pro-with-retina-display/12064580#12064580)。

但是，我现在无法打开任何布局，因为它们都给了我这个错误。我发现有一种解决方法：切换到 XML 视图并进行任何编辑——即使它是一个空格。保存，然后切换回图形布局，错误就消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:54:50.277

只需关闭eclipse并重新启动。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T10:08:45.037

为我工作：在eclipse中单击帮助->检查更新。如果您有可用的更新（特别是 Android 的东西） - 安装它们。

# jasper-reports - 在具有多个字段的字符串中格式化 iReport 中的变量

> ID：10181068
> 
> 赞同：1
> 
> 时间：2012-04-16T20:17:11.573
> 
> 标签：jasper-reports, ireport

我有一个具有以下表达式的文本字段：

```
$F{casNo} + " Total " + $P{chosenUom} + ": " + $V{total_COUNT} 
```

`casNo`是一个字符串，`chosenUom`是一个字符串。`total_COUNT`是双精度数的总和变量。变量显示`total_COUNT`，但它有 8 - 10 位小数（1.34324255234），我需要的只是类似于 1.34 的东西。

这是我已经尝试过的：

```
$F{casNo} + " Total " + $P{chosenUom} + ": " + new DecimalFormat("0.00").format($V{total_COUNT}).toString() 
```

任何帮助，将不胜感激

* * *

现在我只是在做基础数学，但我希望有一个真正的解决方案，而不是解决方法

```
((int)($V{total_COUNT}*100.0))/100.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:24:02.590

您可以使用以下命令格式化行内数字：

```
new DecimalFormat("###0.00").format(YOUR NUMBER) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:55:42.873

您可以将文本字段一分为二，一个包含除 $V{total_COUNT} 之外的所有内容，第二个仅包含 $V{total_COUNT}，但 Pattern 属性设置为“#0.00”之类的内容。

但是，您必须在布局方面有点创意，以防止不必要的自动换行和间距；例如，第一个文本字段可以是宽的和右对齐的，而包含计数的文本字段可以是左对齐的并且足够宽以容纳格式化的数字。

# java - Java：希望忽略某些超出范围的行

> ID：10181071
> 
> 赞同：0
> 
> 时间：2012-04-16T20:17:44.253
> 
> 标签：java, arrays

目前，我正在开发一个程序，该程序解析文件并从每行中取出 34-40 个字符并将它们放入数据库中的表中，但是每次遇到长度小于 34 个字符的行时，我的程序吐出这个错误：

> 警告：一般错误：字符串索引超出范围：40

我仍然是 Java 的新手，所以需要帮助。这是我的代码的一部分：

```
try
            {
                fstream                             = new FileInputStream(filename);
                DataInputStream in                  = new DataInputStream(fstream);
                BufferedReader br                   = new BufferedReader(new InputStreamReader(in));
                PreparedStatement deleteFields      = null;
                String deleteTable                  = "DELETE FROM info WHERE VOLSER IS NOT NULL;";
                deleteFields                        = conn.prepareStatement(deleteTable);
                deleteFields.executeUpdate();
                deleteFields.close();
                logger.info(deleteTable);
                PreparedStatement updateFields      = null;
                String[] qmarks                     = new String[linenumber];

                //Adding data to the database
                for(int i = 0; i < linenumber; i++)
                {
                    String cust                 = in.readLine();
                    String subCust              = cust.substring(34,40);
                    qmarks[i]                   = subCust;
                    String updateString         = "REPLACE INTO info" + " (VOLSER) " + "VALUE ('" + (qmarks[i]) + "');";
                    logger.info(updateString);

                    try
                    {   
                        updateFields = conn.prepareStatement(updateString);
                        updateFields.executeUpdate();
                        updateFields.close();
                    }
                    catch (SQLException e)
                    {
                        logger.warning("Error:" + e.getMessage());
                    }
                } 
```

该脚本将每天运行，因此为了清除昨天的数据，我必须删除表的所有内容并再次重新插入所有值。删除后，它开始构建一个新内容数组。有两种方法可以解决这个问题，我正在寻找社区的反馈，关于哪种方法是最好的。一种方法是我现在正在做的方式并尝试捕获字符 34-40，在以下示例中将产生 A00000

> TMSS0000N-02:00:30 将卷 A00000 移动到 NEXT

另一种方法是跳过所有其他行，只找到其中​​包含“MOVING VOLUME”的行[行开头的时间戳发生变化，所以我认为这种方式会更困难]。

FOR 循环中某处的简单 IF 语句会停止错误吗？例如：

```
if (cust.length >= 34) 
{
     cust.substring(34,40);
}
else 
{
     cust.substring = "XXXXXX";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:20:56.390

当你调用 时`cust.substring(34,40);`，你需要确保`cust.length >= 40`它会抛出你得到的异常。请参阅[javadoc`public String substring(int beginIndex, int endIndex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)：

> 引发 IndexOutOfBoundsException - 如果 beginIndex 为负数，或者 endIndex 大于此 String 对象的长度，或者 beginIndex 大于 endIndex。

# php - php mail() 函数以错误的顺序执行

> ID：10181072
> 
> 赞同：1
> 
> 时间：2012-04-16T20:17:49.677
> 
> 标签：php, email, sequence, usleep

我有 2 个邮件功能，如下所示：

```
mail( $from, '', 'mail1', $headers );
mail( $from, '', 'mail2', $headers ); 
```

如果我在 $from 中使用自己的电子邮件地址对其进行测试，有时我会先收到 mail1，有时我会先收到 mail2。我想总是先收到mail1。我尝试在 2 个邮件功能之间设置一个睡眠，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:20:51.700

你不能。您接收邮件的顺序不取决于您。邮件可能采用许多路径，并且在此过程中会在任何 SMTP 服务器上延迟。

最好的办法是伪造日期标题，使一封电子邮件看起来比另一封早一分钟发送。大多数邮件客户端将按发送日期排序。不过要小心这一点，不要走得太远。垃圾邮件发送者使用相同的策略，电子邮件提供商知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:21:14.713

在您的`mail`函数执行后，电子邮件的实际交付将留给 Mailservers。也就是说，在从服务器/PHP 代码释放对电子邮件的控制后，您无法控制哪个首先进入收件箱。

阅读[邮件传输代理](http://en.wikipedia.org/wiki/Message_transfer_agent)及其运作方式。

# c# - How to get a list of matched ID's using Linq?

> ID：10181073
> 
> 赞同：1
> 
> 时间：2012-04-16T20:17:58.507
> 
> 标签：c#, linq, collections, asp.net-4.0

I am maintaining a dictionary of clients that are logged in with `_clientList.Add(clientIDGuid, newsfeedClient);`

NewsfeedClient class:

```
public class NewsfeedClient
{
    /// <summary>
    /// Represents Newsfeed's own clientID
    /// </summary>
    public string ClientIDGuid { get; set; }  // also adding the dictionary's ID

    /// <summary>
    /// Represents the logged in client's session ID
    /// </summary>
    public string SessionID { get; set; }
    public string Nickname { get; set; }
    public int ProfileID { get; set; }

    public GeoLocation Location { get; set; }

    public List<MyDB.Models.Buddy> BuddyList { get; set; }

    [ScriptIgnore]
    public DateTime LastResponseTime { get; set; }

    public class GeoLocation
    {
        public float Latitude { get; set; }
        public float Longitude { get; set; }
    }
} 
```

The `Buddy` object contains a `ProfileID` property.

I want to get a list of all dictionary clientID's where the matching profileID is in the BuddyList of that new client.

I'm guessing that the Intersect method would come into play, as seen [here](https://stackoverflow.com/questions/9710341/linq-query-if-collection-contains-any-element-in-another-collection), but I'm not quite sure how to put this together without creating at least one `foreach` loop.

-- UPDATE --

The clientID is not == ProfileID these values are different.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:23:06.450

Try this, assuming I've read your question correctly:

```
var matches = _clientList
            .Where(c => c.Value.BuddyList.Any(b => b.ProfileID == c.Value.ProfileID))
            .Select(c => c.Key)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:24:31.807

Assuming, I have your question correct, it should be like so:

```
var matches = _clientList.ToList()
    .Select(x => x.Key)
    .Intersect(currentNewsFeed.BuddyList.Select(x => x.ProfileId))
    .ToList(); 
```

# windows-phone-7 - Windows Phone 按钮样式

> ID：10181079
> 
> 赞同：0
> 
> 时间：2012-04-16T20:18:21.033
> 
> 标签：windows-phone-7, windows-phone-7.1

如何在 Windows Phone 7 中放大按钮标题的字体大小？我看不到任何 FontSizep 属性，设置样式似乎都不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:25:14.083

只需设置`FontSize`...

```
<Button Content="I am a BIG Button" FontSize="50"/> 
```

# forms - Kohana 中的表单选择方法在 HTML 中包含“多个”属性（如果不是 NULL）

> ID：10181081
> 
> 赞同：0
> 
> 时间：2012-04-16T20:18:28.003
> 
> 标签：forms, select, kohana

我在 Kohana 3.2 中使用 form::select 助手来生成带有以下代码的选择输入（格式化为在此处显示）：

```
form::select('id_plyta', $plyta, $plyta_selected, 
    array('style' => 'width:300px', 'class' => 'sock_depend')); 
```

此代码生成以下 HTML（已格式化以在此处显示）：

```
<select name="id_plyta" class="sock_depend" style="width:300px" 
    multiple="multiple">
    ...
</select> 
```

问题是它`multiple="multiple"`在 HTML 中输出了一个额外的属性。我不希望它成为其中的一部分。

如果我放一个 NULL 而不是`$plyta_selected`那么它可以正常工作。

我如何摆脱`multiple="multiple"`它，为什么它甚至在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:28:20.340

当您查看它接受的参数列表时，请注意第三个：

```
 * @param   string   input name
 * @param   array    available options
 * @param   mixed    selected option string, or an array of selected options
 * @param   array    html attributes 
```

将参数发送给类的`select`方法时`Form`，如果第三个参数是数组，助手将自动包含`multiple="multiple"`以允许它在下拉选择中预选多个选项。

如果你只发送一个字符串值，那么它不会创建一个多框，不会包含`multiple`HTML 输入属性，它只会预先选择单个值。

# jquery - $(xml).find('someElement') ：使用 jquery 从带有命名空间的 xml 中提取值

> ID：10181087
> 
> 赞同：6
> 
> 时间：2012-04-16T20:18:44.863
> 
> 标签：jquery, xml, internet-explorer, firefox, google-chrome

以下代码适用于 Chrome，但不适用于 IE 或 FireFox。有人知道合适的跨浏览器代码吗？

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
<s:Header>
    <a:Action s:mustUnderstand="1">http://tempuri.org/SubscriptionService/Update</a:Action>
    <netdx:Duplex xmlns:netdx="http://schemas.microsoft.com/2008/04/netduplex">
        <netdx:Address>http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=4ed8a7ee-b124-e03e-abf0-a294e99cff73</netdx:Address>
        <netdx:SessionId>177b4f47-5664-d96c-7ffa-0a8d879b67dd</netdx:SessionId>
    </netdx:Duplex>
</s:Header>
<s:Body>
    <Update xmlns="http://tempuri.org/">
        <lstResponseStruct xmlns:b="http://schemas.datacontract.org/2004/07/FSS.Libs.Core.InterprocessData.RMS" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <b:DataA>
                <b:ValueA>1.339565</b:ValueA>
                <b:Status>None</b:Status>
            </b:DataA>
            <b:DataA>
                <b:ValueA>120.3717</b:ValueA>
                <b:Status>None</b:Status>
            </b:DataA>
            <b:DataA>
                <b:ValueA>133.563116</b:ValueA>
                <b:Status>None</b:Status>
            </b:DataA>
            <b:DataA>
                <b:ValueA>-0.0059159999999999994</b:ValueA>
                <b:Status>None</b:Status>
            </b:DataA>
        </lstResponseStruct>
    </Update>
</s:Body> 
```

以下是 JavaScript 片段...

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>

var nodes;
if (typeof DOMParser != "undefined")
    nodes = ((new DOMParser()).parseFromString(request.responseText, "application/xml")).getElementsByTagName("*");
else {
    request.responseXML.loadXML(request.responseText);
    nodes = request.responseXML.getElementsByTagName("*");
} 

for (var i = 0; i < nodes.length; i++) {
    var element = nodes[i];
    ...
    if ((element.localName == "Body" || element.baseName == "Body") && element.namespaceURI == "http://www.w3.org/2003/05/soap-envelope") {
        body = element;
        break;
}

$(body).find('DataA').each(function () {
    ... Do something
} 
```

出于某种原因，在每个浏览器中，“body”肯定包含 body xml，但是 $(body).find('DataA') 不会返回 IE 或 FireFox 的结果。

更新：

添加命名空间 $(body).find('b\\:DataA') 适用于 FireFox 和 IE，但会破坏 Chrome！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T14:14:30.353

在没有指定名称空间的情况下访问 XML 节点是一个问题。由于某种原因，Chrome 不想看到命名空间。

我发现“b\:DataA”选择器适用于 FireFox 和 IE，而“DataA”选择器适用于 Chrome。

所以...

```
$(xData.responseXML).find("b\\:DataA, DataA").each(function() { // Do Stuff }); 
```

似乎适用于 IE、FireFox 和 Chrome。

有关提高 XML 节点查找性能的更多信息和方法，请参见[http://www.steveworkman.com/html5-2/javascript/2011/improving-javascript-xml-node-finding-performance-by-2000/ 。](http://www.steveworkman.com/html5-2/javascript/2011/improving-javascript-xml-node-finding-performance-by-2000/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T11:25:01.987

**它工作正常！尝试这个，**

铬/火狐：

```
xml.children[0].childNodes[1].innerHTML; 
```

IE8+/Safari：

```
xml.childNodes[0].childNodes[1].textContent; 
```

IE8：

```
xml.documentElement.childNodes[1].text; 
```

示例代码在这里，

```
var xml = $.parseXML(XMLDOC); 

Var xmlNodeValue = ""; 

if(userAgent.match("firbox")){

xml.children[0].childNodes[1].innerHTML;

}else{ // IE8+

xmlNodeValue = xml.childNodes[0].childNodes[1].textContent; 

} 
```

# xml - 如何在xampp中使用xml数据库

> ID：10181090
> 
> 赞同：0
> 
> 时间：2012-04-16T20:18:47.300
> 
> 标签：xml, database, xampp

我有一个关于教师的项目，还有我的博士学位。教授希望我只使用 XML 数据库，而不是 MySQL 数据库。所以我的问题是如何在 xampp 上使用 XML 数据库，我应该使用哪个 xml 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:29:00.823

您可以从这里开始：[http ://en.wikipedia.org/wiki/XML_database](http://en.wikipedia.org/wiki/XML_database)

'xampp' 只是一组预配置的服务器（mysql、apache + php）。“xampp”与数据库的使用没有关系。

更新：如果您使用 php 作为应用程序后端并选择使用 BaseX 作为数据库，请查看[http://docs.basex.org/wiki/PHP_Example](http://docs.basex.org/wiki/PHP_Example)

# dynamics-crm-2011 - crm 2011 在单个实体内的多个表单之间切换

> ID：10181099
> 
> 赞同：3
> 
> 时间：2012-04-16T20:19:40.407
> 
> 标签：dynamics-crm-2011

我们目前使用每个实体的单一表单来设计我们的解决方案。我们目前有一组要求，其中 10 个左右的实体在功能和数据收集方面相似。理想情况下，我们希望实体具有 10 个左右的表单，并依赖于查找值，在单击自定义按钮时显示正确的表单。

我以前曾与一个供应商合作过，该供应商使用 JavaScript 在加载事件上使用GUID（使用*formid查询字符串参数）来显示正确的表单。*尽管这在 95% 的时间里都有效，但根据客户端机器的不同，它有时会由于时间问题而没有加载正确的表单，即在加载表单时代码没有正确执行。

是否有使用这种技术的最佳实践？

我想我的其他选择是 1）多个实体 2）一个带有标签/部分的表单，我在表单加载时显示/隐藏

我倾向于实施选项 2)

理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:45:47.397

CRM 2011 内部的多种形式仅适用于不同的角色。它并非旨在处理基于实体属性的表单之间的切换。

*   当然，您尝试做的事情是可能的，但是您会遇到问题并且需要 JavaScript 将用户切换到正确的表单类型。您还将导致用户每次加载表单两次（有点难看）

*   另一种选择是使用 JavaScript 在表单上显示/隐藏适当的元素（类似于 4.0）

*   或者，您可以将多个实体与一个通用 JS 文件一起用于任何类型的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:21:10.077

根据任何字段值，您可以通过 JavaScript 切换表单。

在 JavaScript 将页面重定向到 url：

[serverurl]/main.aspx?etn=[entityname]&extraqs=etc%3d[entitytypecode]%26formid%3d[formguid]%26id%3d%257b[recordguid]%257d&pagetype=entityrecord

在哪里

entityname = 实体名称（例如事件），

entitytypecode=实体类型代码（例如事件是 112），

formguid=您要重定向到的表单的 guid，

recordguid = 记录的 guid。如果您跳过 id 参数，表单将以创建模式打开。

# bash - Bash脚本不执行命令

> ID：10181108
> 
> 赞同：0
> 
> 时间：2012-04-16T20:20:08.037
> 
> 标签：bash

我有一个 bash 脚本，它应该检查程序的运行实例，如果它没有运行，则执行命令（用于测试目的的回显）。问题是，即使当我将命令直接复制/粘贴到命令行时，bash 也不会执行该命令。我想我的问题很简单，是由于我对脚本语言的幼稚造成的。

有问题的行：

```
ps -ef | grep -v grep | grep $SCRIPT > /dev/null || echo "`date` - $0 : $SCRIPT stopped. Restarting..." 
```

如果我将它粘贴到命令行，它可以完美运行，但是当我运行我的脚本时没有任何反应。建议？

编辑：我相信我已经解决了这个问题。`queue_reader.sh`为检查我愚蠢地命名为“的脚本而运行的脚本`check_queue_reader.sh`”，因此该`ps -ef`命令发现自己阻止了该脚本的`||`执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:51:30.167

请参阅原始帖子上的编辑。

我正在运行的脚本名为“check_queue_reader.sh”，并使用 grep 搜索`ps -ef`“queue_reader.sh”。这导致脚本自行定位，因此在到达时无法通过检查`||`

# c# - Monitor.TryEnter 与泛型类

> ID：10181113
> 
> 赞同：7
> 
> 时间：2012-04-16T20:20:22.407
> 
> 标签：c#, multithreading, locking

我有一种情况，为了测试，我只希望我的计时器方法（FooMethod）一次运行一个。在下面的示例中，FooMethod 作为委托传递给计时器。这个类有很多具体的实例。我认为通过使 _locker 静态，一次只能处理一个 FooMethod() 实例。但是当我运行应用程序时，多个线程一次通过 TryEnter() 行。

这就是我将每个类添加到新计时器的方式。这是在循环中为每个 foo 实例完成的：

```
_timers.Add(new Timer(foo.FooMethod, null, 0, 10000)); 
```

这是具有该方法的类：

```
public class Foo<T>
{
    private static readonly object _locker = new object();

    public void FooMethod(object stateInfo)
    {
        // Don't let threads back up; just get out
        if (!Monitor.TryEnter(_locker)) { return; }

        try
        {
            // Logic here
        }
        finally
        {
            Monitor.Exit(_locker);
        }
    }
} 
```

注意：通常，_locker 不是静态的；我不希望同一个线程在有机会完成之前进入该方法。我在这里将其更改为静态以进行测试。

我的第一个想法是，也许这不起作用，因为该类是通用的？并且每个具体类实际上都是它自己的类并且它们不共享 _locker 变量？真的吗？如果这是真的，我应该如何让具体类共享一个 _locker 变量？我是否需要将静态 _locker 变量添加到 Foos 可以访问的其他类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T20:28:13.187

> 我是否需要将静态 _locker 变量添加到 Foos 可以访问的其他类？

是的。

每个`Foo<T>`具有不同`T`参数的封闭类型都有自己的静态 _locker 对象。您可以使 Foo 从基类继承，并将静态对象放在那里。然后，所有类型都将使用相同的实例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T20:29:17.373

也许

```
public class Foo
{
   protected static readonly object _locker = new object();
}

public class Foo<T> : Foo
{
    public void FooMethod(object stateInfo)
    {        
        if (!Monitor.TryEnter(_locker)) { return; }

        try
        {
            // Logic here
        }
        finally
        {
            Monitor.Exit(_locker);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T20:34:01.293

你是对的。代码中引用的每个唯一类型`T`都会导致 CLR 为其生成一个新的具体类型，`Foo<T>`并且每个类型都有自己的一组静态成员。

您可以将代码重组为如下所示。它只是众多有效变体中的一种。

```
public class Foo
{
    private static readonly object _locker = new object();

    public void FooMethod(object stateInfo)
    {
        // Don't let threads back up; just get out
        if (!Monitor.TryEnter(_locker)) { return; }

        try
        {
            // Logic here
        }
        finally
        {
            Monitor.Exit(_locker);
        }
    }
}

public class Foo<T>
{
    public void FooMethod(object stateInfo)
    {
        Foo.FooMethod(stateInfo);
    }
} 
```

另外，请记住，您可以无限启动计时器，`period`以防止回调执行多次。`Change`在结束时再次调用以再次`FooMethod`排队计时器。由于您有多个计时器同时运行，您仍然会有多个同时执行的并发执行`FooMethod`，但至少现在每个计时器只有一个活动调用。这不是你所要求的，但我想我还是会指出这一点。

```
_timers.Add(new Timer(foo.FooMethod, _timers.Count, 10000, Timeout.Infinite));

public class Foo<T>
{
    public void FooMethod(object stateInfo)
    {
        try
        {
            // Logic here
        }
        finally
        {
            int index = (int)stateInfo;
            _timers[index].Change(10000, Timeout.Infinite);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T20:33:28.063

请将此类设为非泛型类型。这将满足您的需求。

```
public class Foo
{
    private static readonly object _locker = new object();

    public void FooMethod(object stateInfo)
    {
        // Don't let threads back up; just get out
        if (!Monitor.TryEnter(_locker)) { return; }

        try
        {
            // Logic here
        }
        finally
        {
            Monitor.Exit(_locker);
        }
    }
} 
```

# c++ - 生命周期短的分配会导致堆碎片吗？

> ID：10181114
> 
> 赞同：0
> 
> 时间：2012-04-16T20:20:38.037
> 
> 标签：c++, optimization, heap-memory, fragmentation

假设我有以下内容：

```
std::string TestFragmentation()
{
    std::vector<char> buffer(500);
    SomeCApiFunction( &buffer[0], buffer.size() ); // Sets buffer to null-terminated string data
    return &buffer[0];
} 
```

上述在堆上分配内存的向量会成为内存碎片的原因吗？我对碎片的理解是，只有在更大、更短的分配之间有小的、长期的分配（反之亦然）时才会真正发生。

我不想过早地优化这种情况，所以我想听听对这样的代码的一般看法。我知道各种专家不建议将大缓冲区放在堆栈上（毕竟这就是堆的用途），所以当我编写这样的代码时，这通常是我首先想到的。碎片化通常是需要分析的东西。我的心态应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:26:23.860

如果这是表达此代码功能的最自然方式，那么您应该这样做。除非你有一个非常不寻常的情况，你没有告诉我们，内存碎片甚至不应该出现在你的雷达屏幕上。

# f# - 带有 2 个 fs 文件的 F# 的“Hello, world”

> ID：10181118
> 
> 赞同：15
> 
> 时间：2012-04-16T20:20:52.297
> 
> 标签：f#

我来自 C# 背景到 F#。到目前为止，我编写了简单的程序，并在 F# 交互方面花费了很多时间。

我坚持用两个 .fs 文件创建一个 VS F# 项目。

示例代码：

```
// part 1: functions
let rec gcd (a : uint64) (b : uint64) =
    if b = 0UL then a
    else gcd b (a % b)

// part 2: main()
let a, b = (13UL, 15UL)
do printfn "gcd of %d %d = %d" a b (gcd a b) 
```

我想要两个 .fs 文件，即 Alg.fs 和 Program.fs，这样 Program.fs 将包含我正在工作的代码，而 Alg.fs 将包含算法。

*采取的步骤：*
我已经创建了这两个文件。编译器报错：`Files in libraries or multiple-file applications must begin with a namespace or module declaration, e.g. 'namespace SomeNamespace.SubNamespace' or 'module SomeNamespace.SomeModule'`

我已经插入`module Program`和`module Alg`。编译后的程序只执行来自 Alg.fs 的代码，完全忽略 Program.fs...

我在 Visual Studio 2010 中使用 F#
2.0。PS 我已经用谷歌搜索并检查[了一些帖子](https://lorgonblog.wordpress.com/2008/09/06/using-multiple-f-source-files-and-a-useful-debugging-technique/)，并阅读了有关[模块](http://msdn.microsoft.com/en-us/library/dd233221.aspx)的文档并在询问之前看到了相关[问题](https://stackoverflow.com/questions/793536/split-f-modules-across-multiple-files)。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T20:38:59.063

听起来这是一个项目中的文件顺序问题。最后一个文件是入口点（“主方法”），听起来你最后有 Alg.fs，最后需要 Program.fs。您可以通过 VS 解决方案资源管理器中的右键单击上下文菜单对它们重新排序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T20:57:02.467

这里至少需要考虑三个不同的事情：

1.  正如@Brian 所说，源代码控制文件的顺序也是编译顺序。这在大量使用类型推断的 F# 中很重要。确保`Alg.fs`出现`Program.fs`在您的 Visual Studio 文件列表中（试试这个：选择`Program.fs`并点击`Alt+Down Arrow`直到它位于底部）。

2.  由于`Alg.fs`和`Program.fs`现在都在模块中，您需要实际打开`Alg`模块`Program`以访问其绑定 ( `open Alg`)，或添加[`[<AutoOpen>]`](https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/core.autoopenattribute-class-%5Bfsharp%5D)属性 on `Alg`。

3.  正如@Daniel 所说，最后一个问题可能是程序入口点的定义。您需要*顶级*[`[<EntryPoint>]`](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/functions/entry-point)绑定上的一个属性，该属性也是最后一个文件中的最后一个函数。或者，无论如何，这默认为最后一个文件中的最后一个绑定，只需确保它具有正确的签名（请参阅 Daniel 的链接）。

# css - Crazy Div：悬停序列闪烁/不适用于所有浏览器

> ID：10181120
> 
> 赞同：0
> 
> 时间：2012-04-16T20:20:58.190
> 
> 标签：css, html, hover

更新：下面是我的代码示例：[现场示例](http://s225534480.onlinehome.us/stackoverflow.html)在 Safari 中效果最好，至少在我的比较中。

所以我正在尝试创建一个疯狂的悬停序列（因为某些东西的设计没有考虑网络）但是当悬停触发时我会变得疯狂闪烁。悬停在 Safari 中工作，但在 FireFox 中像疯了一样闪烁，我还没有检查 IE。请参阅下面的代码：

```
<html>
    <head>
    </head>
    <style>
        /* Melon */
        #melon_products1_a {
            position:absolute; 
            width: 140px; height: 220px; 
            top:320px; left: 195px; 
        }
        #melon_products1_a:hover + #melon_products1 {
            display:block; 
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px;
        }
        #melon_products1 {
            display:none; 
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px;
        }
        #melon_products2_a {
            position:absolute; 
            width: 130px; height: 100px; 
            top:535px; left: 275px;
        }
        #melon_products2_a:hover + #melon_products2 {
            display:block; 
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px;
        }
        #melon_products2 {
            display:none; 
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px;
        }
        #melon_products3_a {
            position:absolute; 
            width: 170px; height: 290px; 
            top:250px; left: 330px;
        }
        #melon_products3:hover + #melon_products3 {
            display:block; 
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px;
        }
        #melon_products3 {
            display:none; 
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px;
        }
        #melon_products {
            position:absolute; 
            width: 466px; height: 455px; 
            top:220px; left: 195px; 
            background:url(images/melon/melon_products.jpg);
        }
    </style>
    <body>
        <div id="melon_products"></div>
        <div id="melon_products1_a"></div>
        <div id="melon_products1">
            <img src="images/melon/melon_product1.jpg" width="466" height="455" />
        </div>
        <div id="melon_products2_a"></div>
        <div id="melon_products2">
            <img src="images/melon/melon_product2.jpg" width="466" height="455" />
        </div>
        <div id="melon_products3_a"></div>
        <div id="melon_products3">
            <img src="images/melon/melon_product3.jpg" width="466" height="455" />
        </div> 
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:01:46.410

没有图像（或工作示例）非常困难，但我想我知道你在找什么。我提供了一些示例代码和一个在线示例的链接。

## HTML

```
<div id="melon_products">
 <div class="hover_product" id="melon_products1"></div>
 <div>
  <div>Product 1</div>
 </div>
 <div class="hover_product" id="melon_products2"></div>
 <div>
  <div>Product 2</div>
 </div>
 <div class="hover_product" id="melon_products3"></div>
 <div>
  <div>Product 3</div>
 </div>
 <div class="default_info">Hover to learn more</div>
</div> 
```

## CSS

```
<style type="text/css">
/* Basic hover effect */
.hover_product {position:absolute;background:rgba(255,255,0,.5);}
.hover_product:hover {z-index:2;}
.hover_product + div {display:none;position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;background:rgba(255,0,255,1);}
.hover_product:hover + div {display:block;}
.hover_product:hover ~ .default_info {display:none;}

 /* Using this as placeholder for img */
.hover_product > div > div {width:466px;height:455px;display:inline-block;}

/* Product positioning */
#melon_products1 {width: 140px; height: 220px; top:100px; left: 75px; }
#melon_products2 {width: 130px; height: 100px; top:315px; left: 155px; }
#melon_products3 {width: 170px; height: 290px; top:30px; left: 185px; }
.default_info {width:100px;height:150px;position:absolute;right:10px;top:10px;}

/* Wrapper positioning */
#melon_products {position:relative; width: 466px; height: 455px; background:rgba(255,0,0,.5); }
</style> 
```

## 在线示例

*   [jsFiddle 示例](http://jsfiddle.net/4wb5P/6/)

# c - cast 从指针目标类型中丢弃限定符？

> ID：10181121
> 
> 赞同：8
> 
> 时间：2012-04-16T20:21:03.310
> 
> 标签：c, gcc

`-Wcast-qual`在 stristr() 的`return`行上输出此警告。问题是什么 ？

> 警告：cast 丢弃来自指针目标类型的限定符

```
char *stristr(const char *string, const char *substring)
{
size_t stringlength = strlen(string);
char *stringlowered = malloc(stringlength + 1);
strcpy(stringlowered, string);
tolower2(stringlowered); // in my source it has a different name, sorry.

char *substringlowered = malloc(strlen(substring) + 1);
strcpy(substringlowered, substring);
tolower2(substringlowered); // in my source it has a different name, sorry.

const char *returnvalue = strstr(stringlowered, substringlowered);
if(returnvalue != NULL)
{
    size_t returnvaluelength = strlen(returnvalue);
    returnvalue = string;
    returnvalue += stringlength - returnvaluelength;
}

free(stringlowered);
free(substringlowered);

return (char *)returnvalue;
} 
```

**编辑：**
在 glibc 2.15 的 strstr() 源代码中：

```
return (char *) haystack_start; // cast to (char *) from const char * 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T20:23:10.607

您已声明`returnvalue`为指向 a 的指针`const char`，但随后将其强制转换为指向非的指针`const char`。您已经丢弃了`const`限定符，所以编译器会抱怨您已经丢弃了它！

解决方案是要么改变函数的返回类型，要么找到一个非`const char`指向。您的函数中没有参数类型，因此如果您*确实*需要非`const`返回类型，可以考虑更改参数类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T20:22:57.943

您正在将一个`const char *`（我们称之为不可修改的字符串）转换为一个`char *`（可修改的字符串），您丢弃了`const`限定符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T12:29:25.047

尝试更改声明/分配

```
const char *returnvalue = strstr(stringlowered, substringlowered); 
```

到

```
char *returnvalue = strstr(stringlowered, substringlowered); 
```

然后删除返回行中的演员表（你不再需要它了）。

# sql - SQL查询根据另一个表中的列从一个表中获取数据？

> ID：10181123
> 
> 赞同：-3
> 
> 时间：2012-04-16T20:21:16.163
> 
> 标签：sql, database, oracle

例如，在我的桌子上

CountyID，County 和 CityID 在县表和城市表中我有表，例如

城市 ID 和城市

如何创建一个从县表中提取县并根据县表中的 cityid 拉出城市的报告。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:27:44.140

由于这是一个相当基本的问题，我会给你一个基本的答案，而不是为你做的代码。

如果表具有相互“匹配”的列，您可以将它们连接在一起以了解它们的共同点，并几乎像查询一张表一样查询结果。

根据您的需要，还有不同类型的连接 - 例如，您要连接在一起的一个表中的某些行可能没有对应的匹配项。

如果您确定一个城市肯定会有相应的县，请尝试在其匹配列 CityID 上将两个表内部连接并查询结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:28:38.267

两个表之间明显的共同链接是 CityID，因此您将加入其中。我认为您的数据组织错误，我会将 CountryID 放在 City 表中，而不是将 CityID 放在 country 表中。然后，根据选择的 CountryID，您可以根据它限制对 City 表的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:46:27.903

按照 Bridge 的回答，您显然是 SQL 的新手，并且有很多地方可以挖掘如何编写它们。但是，您应该训练自己的最基本的基础知识始终是应用表名或别名以防止歧义，并尽量避免使用可能被视为语言保留字的列名......它们似乎总是会咬人。

也就是说，最基本的查询是

```
select
      T1.field1,
      T1.field2,
      etc with more fields you want
   from
      FirstTable as T1
   where
      (some conditional criteria)
   order by
      (some column or columns) 
```

现在，在处理多个表时，您需要 JOIN... 通常 INNER 或 LEFT 是最常见的。内部手段必须在两个表中匹配。LEFT 表示必须匹配左侧的表格，无论右侧是否匹配...例如：

```
select
      T1.Field1,
      T2.SomeField,
      T3.MaybeExistsField
   from
      SomeTable T1
         Join SecondTable T2
            on T1.SomeKey = T2.MatchingColumnInSecondTable
         LEFT JOIN ThirdTable T3
            on T1.AnotherKey = T3.ColumnThatMayHaveTheMatchingKey
   order by
      T2.SomeField DESC,
      T1.Field1 
```

从这些示例中，您应该能够轻松地将表格及其相互关系合并到结果中......

# jquery - jQuery UI Draggable with revert:true and droppable with greedy:true

> ID：10181133
> 
> 赞同：0
> 
> 时间：2012-04-16T20:22:06.337
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

所以我需要在另一个droppable里面有一个droppable，两者都可以接受相同类型的draggables。

我做了两个 droppables 并将内部的一个设置为贪婪，它工作得很好......对于第一次拖放。放入内部 droppable 后，我尝试拖动到外部 droppable 中，“over”事件不会被触发，但是，当 drop 事件触发时。

看看这个小提琴来说明这个问题。您会注意到，在放入内部元素后，不再触发外部元素的 over 事件（控制台中没有日志）。

[http://jsfiddle.net/J7azG/52/](http://jsfiddle.net/J7azG/52/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-14T08:13:03.200

祝福你罗斯维尔。对我来说，它没有触发我设置的 hoverClass。我将其追溯到未触发的“过度”方法。我已经与这个错误斗争了几个小时，你发布的解决方案（jsfiddle.net/J7azG/53）对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T21:26:30.810

也许这可以帮助：

更改`revert:true`为`revert:'invalid'`

> 请参阅此小提琴以获取代码结果

[http://jsfiddle.net/penjepitkertasku/J7azG/134/](http://jsfiddle.net/penjepitkertasku/J7azG/134/)

```
$(".block").draggable({
    revert: 'invalid'
}); 
```

# jquery - 使用 jquery 从 DOM 中获取文本？

> ID：10181137
> 
> 赞同：0
> 
> 时间：2012-04-16T20:22:30.500
> 
> 标签：jquery, dom

我想使用 jQuery 获取 < p > 标记中的内容。所以我可以为每个玩家的名字创建一个 Java 变量。jquery 代码将 playerN1 设置为空白字符串，而不是玩家姓名。我想知道为什么 text() 没有抓住玩家的名字（< p > 标签中的内容）？

```
<!-- HTML -->
<div class="match1">
  <div id="m1.p1" class="col3 first last bracket_player1">
    <p class="name">Player1 Name</p>
  </div>
  <div id="m1.p2" class="col3 first last bracket_player2">
    <p class="name">Player2 Name</p></div>
  </div>
</div>
<div class="match2">
  <div id="m2.p1" class="col3 first last bracket_player1">
    <p class="name">Player1 Name</p>
  </div>
  <div id="m2.p2" class="col3 first last bracket_player2">
    <p class="name">Player2 Name</p></div>
  </div>
</div> 
```

```
// The jQuery
for (i = 0; i < 7; i++)
{
   var match = "m" + i;
   var elementID = "#"+match+".p1 "+"p";
   var playerN1 = $(elementID).text();
   console.log(elementID);
   console.log(playerN1);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:26:49.380

这是因为`.`在ID。 `#m1.p1`被解释为`ID=m1 AND class=p1`。您需要转义`.`([用 2 `\`s](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F) )。

```
var elementID = "#"+match+"\\.p1 "+"p"; 
```

或者使用[`[id=""]`选择器](http://api.jquery.com/attribute-equals-selector/)。

```
var elementID = "[id='"+match+".p1'] "+"p"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:25:54.370

你为什么不像这样抓住它们：

```
$('p.name').each(function() {
    console.log($(this).text());
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T20:26:06.320

您可以尝试使用`html()`而不是，`text()`但我感觉问题出`.`在 ID 中。我不确定这是否是 ID 的有效字符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T20:26:43.743

要使用类“名称”获取每个元素的值，您只需遍历它们：

```
$('.name').each(function(){
    var thisPlayer = this.text();
    console.log(thisPlayer);
}); 
```

# java - Java Calendar.add 给出错误的年份

> ID：10181138
> 
> 赞同：6
> 
> 时间：2012-04-16T20:22:30.930
> 
> 标签：java, calendar

我的程序获取当前日期，然后在循环中为该日期添加一周并打印出新日期。就像是：

```
Calendar cal = Calendar.getInstance();
for (int i=0; i < 52; i++) {
cal.add(Calendar.DATE, 7);
// print date out
} 
```

add 方法按我预期的方式工作，直到它到达 12 月 30 日，此时年份从 2012 年跳到 2013 年。

因此，使用今天 2012 年 4 月 16 日的日期，我测试了一些不同的输入：

```
this - cal.add(Calendar.DATE, 38*7);
yields- "date:1/7/2013"
this - cal.add(Calendar.DATE, 37*7);
yields- "date:12/31/2013"
this - cal.add(Calendar.DATE, 37*7-1);
yields- "date:12/30/2013"
this - cal.add(Calendar.DATE, 37*7-2);
yields- "date:12/29/2012" 
```

所以我注意到年份在 12 月 30 日和 12 月 31 日之前是正确的，然后在回到 1 月时再次更正。这样做有什么原因吗？它与 2012 年是闰年有什么关系还是我误解了 add 方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-06T18:09:30.573

你`SimpleDateFormat`是用来打印日期并`YYYY`用来产生年份的吗？如果是这样，那就是问题所在。因为`YYYY`产生的是周年而不是日历年。由于 2012 年 12 月 30 日在 2013 年的第 1 日历周，`YYYY`因此生成 2013 年。要获取日历年，`yyyy`请在`SimpleDateFormat`格式字符串中使用。

见[https://bugs.openjdk.java.net/browse/JDK-8194625](https://bugs.openjdk.java.net/browse/JDK-8194625)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-07T23:06:06.520

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:27:54.310

它应该是：

```
cal.add(Calendar.DAY_OF_YEAR, 7); 
```

`Calendar.DATE`与 相同`Calendar.DAY_OF_MONTH`。

# c - 无法在 Windows 上使用 MinGW 编译 GTK+ 程序

> ID：10181147
> 
> 赞同：1
> 
> 时间：2012-04-16T20:23:15.843
> 
> 标签：c, windows, gtk, mingw, glade

h 大家好。在我的 Linux 机器上，我使用 Glade 3 生成一个 XML 文件。我成功地将 XML 文件嵌入到程序中，并使用以下命令编译了 GTK+ 程序：

```
gcc -Wall -g `pkg-config --cflags --libs gtk+-2.0` prog.c 
```

该程序完全按照我的意愿运行。但是，在 Windows 上使用 Cygwin，我无法编译它。我已经安装了 MinGW 和 Windows GTK+ 2.0 包。它们都在 Z 驱动器的根目录上。pkg-config 工作正常，它向 GCC 发送了几个编译器和链接器选项。我没有收到任何“文件不存在”错误，并且我设置了 $PATH。我收到了大约十几个“未定义的引用”错误。每次调用 GTK 函数时都会出错。这是 pkg-config 输出的内容：

```
-mms-bitfields -IZ:/GTK+/include/gtk-2.0 -IZ:/GTK+/lib/gtk-2.0/include -IZ:/GTK+/include/atk-1.0 -IZ:/GTK+/include/cairo -IZ:/GTK+/include/pango-1.0 -IZ:/GTK+/include/glib-2.0 -IZ:/GTK+/lib/glib-2.0/include -IZ:/GTK+/include/libpng12  -LZ:/GTK+/lib -lgtk-win32-2.0 -lgdk-win32-2.0 -latk-1.0 -lgio-2.0 -lgdk_pixbuf-2.0 -lpangowin32-1.0 -lgdi32 -lpangocairo-1.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -lglib-2.0 -lintl 
```

我还应该提到我能够使用 Windows 版本的 Glade 3 来生成相同的 XML 文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:09:30.007

这与 glade XML 文件无关：[gcc 参数顺序](http://mail.gnome.org/archives/gtk-app-devel-list/2010-February/msg00036.html)在使用 mingw 构建时很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T09:11:00.410

我添加了一篇文章[如何为原生窗口（而不是 X 窗口）编译 gtk+ 应用程序？](https://stackoverflow.com/questions/18799904/how-to-compile-gtk-application-for-native-windows-and-not-for-x-windows)它描述了为 Windows 本地编译所需的确切步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:12:06.790

`pkg-config`输出只告诉你它找到了 .pc 文件。您需要确保所需的所有头文件和库都确实存在。请添加您也遇到的错误示例。

# windows-phone-7 - Windows Phone Facebook (OAuthException) (#1) 发生未知错误

> ID：10181148
> 
> 赞同：0
> 
> 时间：2012-04-16T20:23:19.160
> 
> 标签：windows-phone-7, facebook-c#-sdk

我有一个使用 facebook SDK 5.4.1 的 WP7 应用程序。我尝试将照片上传到 Facebook，但总是收到错误消息“(OAuthException) (#1) 发生未知错误”。

这是我的代码：

```
var app = new Facebook.FacebookApp(AuthKey);
var parameters = new Dictionary<string, object>
   {
       {"message","test"},
       {"description","test2"}
   };
FacebookMediaObject media = new FacebookMediaObject
{
   FileName = "1",
   ContentType = "image/jpeg"
};
WriteableBitmap wb = new WriteableBitmap(0, 0).FromResource("/Images/thumbnails/Color.png");
media.SetValue(wb.ToByteArray());
parameters.Add("source", media);
app.PostAsync("me/photos", parameters, new FacebookAsyncCallback(postResult)); 
```

我可以使用我的应用在 FB 墙上发布消息，但不能用于上传照片（我尝试上传不同尺寸的照片）。有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:34:25.300

您不能使用`wb.toByteArray()`- 您需要在上传之前将图像编码为 JPEG。

`Extensions.SaveJpeg()`是你要找的（[这里](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.extensions.savejpeg%28v=VS.92%29.aspx)）

# c++ - C++ 演练 cout.setf(ios::fixed); 和 cout.precision();

> ID：10181149
> 
> 赞同：8
> 
> 时间：2012-04-16T20:23:25.137
> 
> 标签：c++, walkthrough

```
/* Problem 38 */
        #include <iostream>
        using namespace std;
        class abc {
        double n;
          public:
        abc() { n = 67.5; cout << "1\n"; }
        abc(double num) { set(num); cout << "2\n"; }
        double get() const { cout<<"3\n"; return n; }
        virtual void set(double num) {
            if (num < 10)
            n = 10;
            else if (num > 100)
            n = 100;
            else
            n = num;
            cout << "4\n";
        }
        };
        class def: public abc {
        double m;
          public:
        def() { m = 6.2; cout << "5\n"; }
        def(double num1, double num2): abc(num1) {
            set(num2 - abc::get()); cout << "6\n"; }
        double get() const {
            cout << "7\n"; return m + abc::get(); }
        void set(double num) {
            if (num < 10 || 100 < num)
            m = num;
            else
            m = 55;
            cout << "8\n";
        }
        };
        void do_it(abc &var, double num)
        {   cout << var.get() << '\n';
        var.set(num);
        cout << var.get() << '\n';
        }
        int main()
        {   abc x(45);
        def y(2, 340);
        cout.setf(ios::fixed);
        cout.precision(3);
        do_it(x, 200);
        do_it(y, 253);
        cout << x.get() << '\n';
        cout << y.get() << '\n';
        return 0;
        } 
```

使用上面的代码，我只想知道下面两行在上面的代码中会做什么

`cout.setf(ios::fixed);` `cout.precision(3);`

请不要只给我答案，因为我正在为明天的期末考试做准备，所以我将不胜感激。

我搜索了一些消息来源说这是设置标志，但我真的不明白它的概念是什么以及它是如何工作的

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T20:44:56.107

```
cout.setf(ios::fixed) 
```

使 cout print 以固定的小数位数浮动，并且

```
cout.precision(3) 
```

将此数字设置为三。

例如，如果你有一个

```
double f = 2.5; 
```

然后

```
cout << f; 
```

将打印

```
2.500 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T20:48:57.193

关于如何格式化输出的优秀文档：[输出格式](http://www.arachnoid.com/cpptutor/student3.html)

当您尝试创建命令行 UI 时，它总是很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T13:01:38.400

```
#include<iostream>

using namespace std;

int main(){
    float large = 2000000000;
    cout << large;
    return 0;
} 
```

输出将以科学记数法表示：

```
2e+009 
```

为了获得原样的价值，您应该使用 `cout.setf(ios::fixed)`

```
#include<iostream>

    using namespace std;

    int main(){
        cout.setf(ios::fixed);
        float large = 2000000000;
        cout << large;
        return 0;
    } 
```

输出将保持默认精度，浮点数为 6。

```
2000000000.000000 
```

您可以将上述代码中的精度设置为：

```
cout.precision(7); 
```

......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-12T05:38:46.070

它类似于包含操作库：
include ：

```
<iomanip> 
```

然后使用以下功能

```
cout << fixed << showpoint;
cout << setprecision(3); 
```

# python - 试图从 scipy powerlaw fit 中获得合理的值

> ID：10181151
> 
> 赞同：11
> 
> 时间：2012-04-16T20:23:42.363
> 
> 标签：python, numpy, scipy, curve-fitting, least-squares

我正在尝试从我一直在运行的模拟代码中拟合一些数据，以找出幂律依赖性。当我绘制线性拟合时，数据拟合得不是很好。

这是我用来拟合数据的python脚本：

```
#!/usr/bin/env python
from scipy import optimize
import numpy

xdata=[ 0.00010851,  0.00021701,  0.00043403,  0.00086806,  0.00173611, 0.00347222]
ydata=[ 29.56241016,  29.82245508,  25.33930469,  19.97075977,  12.61276074, 7.12695312]

fitfunc = lambda p, x: p[0] + p[1] * x ** (p[2])
errfunc = lambda p, x, y: (y - fitfunc(p, x))

out,success = optimize.leastsq(errfunc, [1,-1,-0.5],args=(xdata, ydata),maxfev=3000)

print "%g + %g*x^%g"%(out[0],out[1],out[2]) 
```

我得到的输出是：-71205.3 + 71174.5*x^-9.79038e-05

虽然在图上拟合看起来与最小二乘拟合所期望的一样好，但输出的形式让我感到困扰。我希望常数会接近你期望的零（大约 30）。我期待找到比 10^-5 更大的功率依赖性。

我尝试重新调整我的数据并使用参数来优化.leastsq，但没有运气。我想要完成的事情是可能的，还是我的数据不允许这样做？计算成本很高，因此获得更多数据点并非易事。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T22:19:20.487

最好先取对数，然后用它`leastsquare`来拟合这个线性方程，这会给你一个更好的拟合。[scipy cookbook](http://www.scipy.org/Cookbook/FittingData)中有一个很好的示例，我在下面对其进行了调整以适合您的代码。

像这样的最佳拟合是：幅度 = 0.8955，指数 = -0.40943265484

正如我们从图表（和您的数据）中看到的那样，如果它符合幂律，我们不会期望幅度值接近`30`。与幂律方程 一样`f(x) == Amp * x ** index`，因此具有负指数：`f(1) == Amp`和`f(0) == infinity`。

![在此处输入图像描述](../Images/c9f3039fe46bdc680ddde38790cc14ce.png)

```
from pylab import *
from scipy import *
from scipy import optimize

xdata=[ 0.00010851,  0.00021701,  0.00043403,  0.00086806,  0.00173611, 0.00347222]
ydata=[ 29.56241016,  29.82245508,  25.33930469,  19.97075977,  12.61276074, 7.12695312]

logx = log10(xdata)
logy = log10(ydata)

# define our (line) fitting function
fitfunc = lambda p, x: p[0] + p[1] * x
errfunc = lambda p, x, y: (y - fitfunc(p, x))

pinit = [1.0, -1.0]
out = optimize.leastsq(errfunc, pinit,
                       args=(logx, logy), full_output=1)

pfinal = out[0]
covar = out[1]

index = pfinal[1]
amp = 10.0**pfinal[0]

print 'amp:',amp, 'index', index

powerlaw = lambda x, amp, index: amp * (x**index)
##########
# Plotting data
##########
clf()
subplot(2, 1, 1)
plot(xdata, powerlaw(xdata, amp, index))     # Fit
plot(xdata, ydata)#, yerr=yerr, fmt='k.')  # Data
text(0.0020, 30, 'Ampli = %5.2f' % amp)
text(0.0020, 25, 'Index = %5.2f' % index)
xlabel('X')
ylabel('Y')

subplot(2, 1, 2)
loglog(xdata, powerlaw(xdata, amp, index))
plot(xdata, ydata)#, yerr=yerr, fmt='k.')  # Data
xlabel('X (log scale)')
ylabel('Y (log scale)')

savefig('power_law_fit.png')
show() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T22:00:03.270

它有助于重新调整`xdata`规模，因此数字不会那么小。您可以在新变量中工作`xprime = 1000*x`。然后适合`xprime`与`y`.

最小二乘会找到合适的`q`参数

```
y = q[0] + q[1] * (xprime ** q[2]) 
  = q[0] + q[1] * ((1000*x) ** q[2]) 
```

所以让

```
p[0] = q[0]
p[1] = q[1] * (1000**q[2])
p[2] = q[2] 
```

然后`y = p[0] + p[1] * (x ** p[2])`

它还有助于将初始猜测更改为更接近您想要的结果，例如 `[max(ydata), -1, -0.5]`.

```
from scipy import optimize
import numpy as np

def fitfunc(p, x):
    return p[0] + p[1] * (x ** p[2])
def errfunc(p, x, y):
    return y - fitfunc(p, x)

xdata=np.array([ 0.00010851,  0.00021701,  0.00043403,  0.00086806,
                 0.00173611, 0.00347222])
ydata=np.array([ 29.56241016,  29.82245508,  25.33930469,  19.97075977,
                 12.61276074, 7.12695312])

N = 5000
xprime = xdata * N

qout,success = optimize.leastsq(errfunc, [max(ydata),-1,-0.5],
                               args=(xprime, ydata),maxfev=3000)

out = qout[:]
out[0] = qout[0]
out[1] = qout[1] * (N**qout[2])
out[2] = qout[2]
print "%g + %g*x^%g"%(out[0],out[1],out[2]) 
```

产量

40.1253 + -282.949*x^0.375555

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T22:34:36.830

使用线性最小二乘法获得指数拟合的标准方法是按照[fraxel 在他/她的回答中建议的方法](https://stackoverflow.com/a/10182515/208339)：将直线拟合到 log(y_i)。

然而，这种方法具有已知的数值缺点，特别是敏感性（数据的微小变化会导致估计值的巨大变化）。首选的替代方法是使用*非线性*最小二乘法——它不太敏感。但是，如果您对用于非关键目的的线性 LS 方法感到满意，请使用它。

# cocoa - 如何在快速枚举期间增加“分数”

> ID：10181152
> 
> 赞同：0
> 
> 时间：2012-04-16T20:24:06.393
> 
> 标签：cocoa, increment, fast-enumeration

我有以下代码，我想用它来检查用户答案并输出分数（满分 5 分）。我使用带有答案的 plist 并对照它检查 textField.text。我正在努力解决的是：如何使用这种方法获得输出分数？

```
- (IBAction)checkAnswers:(UITextField *)textField
{
NSString *path2 = [[NSBundle mainBundle] pathForResource:@"7A Cells Microscopes 3" ofType:@"plist"];
NSDictionary *dictionary = [[NSDictionary alloc] initWithContentsOfFile:path2];

NSString *tester = [NSString stringWithFormat:@"%i", textField.tag];

//   NSDictionary *secondDict = [dictionary valueForKey:tester];

//  NSString *answer = [secondDict valueForKey:@"Answer"];

// if ([textField.text isEqualToString:[[dictionary valueForKey:tester] valueForKey:@"Answer"]]) {
//      NSLog(@"YAY");
//  }

NSArray *allTextFields = [[NSArray alloc] initWithObjects:eyepiece, objectiveLens, focussingKnobs, stage, mirror, nil];

for (textField in allTextFields) {
                int x = 0;

    if ([textField.text isEqualToString:[[dictionary valueForKey:tester] valueForKey:@"Answer"]]) {
        x++;
        NSLog(@"%i", x);
    }

} 
```

任何帮助将非常感激！非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:34:24.843

假设您的其余代码都很好，只需移动**int x = 0;** 在 for 循环之外。您将 x 编码的方式在每个循环中都重置为 0 ......所以它永远不会计数。

# c - 多线程服务器中的分段错误

> ID：10181154
> 
> 赞同：0
> 
> 时间：2012-04-16T20:24:10.080
> 
> 标签：c, linux, multithreading, network-programming, pthreads

我已经在 Linux（Ubuntu 11.04 64 位内核 2.6.38）下为网络开发多线程服务器（使用 Pthreads）大约 2 个月了。

该代码目前约为 7000 行`C`。我一直在多个客户端连接到它并获得服务的网络中使用它。它运行得相当顺利。

突然我面临一个奇怪的问题。时不时地（大约 10 次中的 1 次）服务器由于分段错误而崩溃。我查看了所有代码，但似乎找不到背后的实际原因。任何人都可以指导我这里可能出了什么问题，或者我应该尝试哪些事情来找到实际的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:27:22.543

1.  启用核心文件生成。当应用程序崩溃时，加载调试器
2.  使用带有内存检查的 valgrind 运行您的应用程序
3.  编写单元测试。很多，并将覆盖率提高到 100%。
4.  使用[valgrind 的 hellgrind](http://valgrind.org/info/tools.html#helgrind)对您的应用程序进行压力测试，以测试多线程应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:06:18.107

100% 的覆盖率是不现实的，但只要勤奋，85%-95% 就可以合理地发生。

关于为什么会发生奇怪的错误：http: [//stromberg.dnsalias.org/~strombrg/checking-early.html](http://stromberg.dnsalias.org/~strombrg/checking-early.html)

你说这突然发生了。希望您一直在使用诸如 Mercurial、Git 或 SVN 之类的源代码控制系统。如果您有（或者您可能有夜间备份？），您可能应该回顾一下在问题开始时所做的更改，试图找到错误，这可能是未定义的内存引用。

# iphone - OAuth2Client #import "NXOAuth2.h" 文件未找到

> ID：10181155
> 
> 赞同：3
> 
> 时间：2012-04-16T20:24:17.710
> 
> 标签：iphone, ios, ipad, object, oauth

我正在尝试将 OAuth2Client 添加到项目中。我已按照[此处](https://github.com/nxtbgthng/oauth2client)列出的所有说明进行操作，但`NXOAuth2.h" File Not Found`在尝试时出现错误`import "NXOAuth2.h`。奇怪的是，Xcode 会转义完成这个标头，但在输入后立即给出错误。

如果有帮助，我可以将一个新程序上传到 github 上，只需添加 OAuth2Client 尝试。

标头搜索路径 ![标头搜索路径](../Images/17e07d96af2fba610a65cf578b3d25d9.png)

将二进制文件与库链接 ![将二进制文件与库链接](../Images/d71137473abff877279fce22556409e6.png)

OAuth2Client 构建阶段的公共标头 ![OAuth2Client 构建阶段的公共标头](../Images/96fc31bca50ad8596a9b192702fc944f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:49:42.850

您在那里的用户标题搜索路径对我来说看起来不正确。它应该设置为“$(SRCROOT)/path/to/the/external/library/OAuth2Client”。然后，这将解析为您要搜索头文件的实际路径。

![在此处输入图像描述](../Images/047381cf4988e855d45a5fb99782a6ea.png)

还要确保您已遵循自述文件中列出的所有步骤。即添加了 NXOAuth2Client 的目标作为目标依赖

![在此处输入图像描述](../Images/3a135f41d92d7c5939c21015991ab68b.png)

# javascript - javascript/jquery/mootools/other js lib-我可以在css3渐变上写文本吗

> ID：10181156
> 
> 赞同：0
> 
> 时间：2012-04-16T20:24:19.430
> 
> 标签：javascript, jquery, mootools

我有一个使用 CSS3 生成渐变的脚本。

我想用渐变做两件事，单独或一起 -

(a) 允许用户在用户选择的位置（使用鼠标光标指示）的渐变上写一些文本。

(b) 允许用户在编写文本时从一组要使用的字体中进行选择——字体可以是自定义字体或来自 Google Web Fonts 集合...

我计划在 GWT 应用程序中实现上述功能，因此任何类型的 javascript ，包括 mootools/jquery 之类的库对我来说都是可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:35:27.687

如果您的问题很简单，“我可以在 CSS3 渐变上写文本吗”，那么您的答案是肯定的。

CSS渐变，当使用时，充当元素的背景。

在元素上使用渐变背景与将背景颜色声明为红色或白色没有什么不同。

# symfony - 在文件上传时生成包含文件用户名的文件名

> ID：10181163
> 
> 赞同：0
> 
> 时间：2012-04-16T20:24:47.457
> 
> 标签：symfony, doctrine-orm, symfony-forms

我想让文件名看起来像：Username-OriginalFileName。[我的第一个解决方案是在我的文件实体中使用preUpload](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks)回调，如 Symfony 食谱中所述

```
 /**
  * @Assert\File(maxSize="6000000")
   */
 public $FILE_file;

 public $path;

    public function getPath()
    {
        return $this->path;
    }
    public function setPath($path)
    {
        return $this->path=$path;
    }

    public function getAbsolutePath()
    {
        return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
    }

    public function getWebPath()
    {
        return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
    }

    protected function getUploadRootDir()
    {
        return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {

        return 'uploads/files';
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */

    public function preUpload()
    {
        if (null !== $this->FILE_file) {
                      $username=$this->get('security.context')->getToken()->getUser()->getUsername();
            $this->path = $username.'-'.$this->path;
        }
    }

     /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */

        public function upload()
    {
        // the file property can be empty if the field is not required
        if (null === $this->FILE_file) {
            return;
        }

        $this->FILE_file->move($this->getUploadRootDir(),  $this->FILE_file->getClientOriginalName());

        $this->path = $this->FILE_file->getClientOriginalName();

        $this->FILE_file = null;
    } 
```

但似乎我无法从实体中获取容器。所以我试图在我的文件控制器中这样做：

```
 $filename=$username.'-'.$file->path;

                            $file->setPath($filename);      
                            $file->setFILEFormat($ext);
                           ...

                            $em1->persist($file); 
                            $em1->flush();
                            $file->upload();
                            $content=$file->getContent(); 
```

getContent 是一个打开文件并将其内容存储在字符串数组中的函数。由于某种原因，该文件被保留并使用其 OriginalName 从上传表单而不是 $filename 上传。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:16:48.620

文件与用户之间没有任何关系吗？否则你可以做类似的事情：

文件实体：

```
/**
 *
 * @ORM/ManyToOne(targetEntity="User" …)
 */
private $user;

public function preUpload()
{
    if (null !== $this->FILE_file) {
        $this->path = $this->user->getUsername().'-'.$this->path;
    }
} 
```

# html - 全局正则表达式搜索和替换以修复 XML 导出文件中的 HTML？

> ID：10181164
> 
> 赞同：0
> 
> 时间：2012-04-16T20:24:53.367
> 
> 标签：html, xml, regex, text, grep

我有一个相当大的 WordPress .XML 导出文件，该文件来自我将要迁移到 Drupal 的博客。导出文件的一个明显问题是它缺少`<p>`任何段落中断的标签。但是，标签存在于实际站点上。

从我从 XML 文件中的原始文本中可以看出，段落之间有多个换行符，而这些换行符应该只有一个`<p>`标记。我希望`<p>`使用 RegEx 全局添加一个有换行符和大写字母的标签，但我不知道它是如何工作的。导出文件中包含相关文本的示例 XML 标记是：

```
<content:encoded><![CDATA[Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida risus at sem interdum iaculis. Curabitur eget est tellus, quis viverra arcu. 

Cras posuere turpis imperdiet odio aliquet sollicitudin. Maecenas et neque eget quam fringilla tempor. Vivamus sodales vulputate consectetur. 

Sed ullamcorper elementum est, at dapibus orci fermentum vitae. Vivamus nisi turpis, pretium sed tincidunt et, dapibus at eros. Quisque neque magna, posuere eget eleifend ut. 
```

从上面可以看出，应该是段落之间有多个换行符。我正在考虑 RegEx 的换行符/大写字母组合，以便只放入一个`<p>`标签并专门针对`<content:encoded>`XML 标签，这样我就不会在 XML 文件的其他地方添加标签。使事情变得更复杂的另一个问题是，某些段落已经具有`<p>`编辑器在自定义类中添加的标签，例如`<p class="myclass">`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T13:59:20.353

这个问题之前在 StackOverflow 上讨论过。问题是，Wordpress 不会将 p 标签存储在其数据库中（如果您使用其所见即所得编辑器），这些标签是在呈现时由 wpautop() 函数创建的（而不是中断）。所以我编辑了 export.php 文件（运行 WP 3.4.1）并在那里添加了函数。您可以[在 Pastebin 上看到结果](http://pastebin.com/muHGVnfh)（更改在第 375 和 376 行）。

```
<content:encoded><?php echo wxr_cdata( apply_filters( 'the_content_export', wpautop( $post->post_content ) ) ); ?></content:encoded>
<excerpt:encoded><?php echo wxr_cdata( apply_filters( 'the_excerpt_export', wpautop( $post->post_excerpt ) ) ); ?></excerpt:encoded> 
```

您可以将整个代码复制并粘贴到文件 [root]/wp-admin/icides/export.php 中，然后再次运行导出。之前不要忘记备份文件 - 我不保证它适用于其他版本，但您可以了解如何编辑导出。

# f# - 嵌套类型提供程序

> ID：10181165
> 
> 赞同：2
> 
> 时间：2012-04-16T20:25:00.083
> 
> 标签：f#, nested, type-providers

我有一种类型的提供程序连接到网络以检索数据。并通过类型提供者机制产生（我们称之为虚构的）“静态类型”。

当然，我可能并不总是保持联系。我可能在卫星连接中断的私人飞机上大发雷霆。

有没有人体验过构建一个“离线类型提供者”，它（以某种方式）将一个类型（来自一个类型提供者）作为输入，将其定义存储在磁盘上，并在以后为您提供所述类型定义以便在前往 Koh 的途中轻松访问帕岸？

由于类型不允许作为 TP 的参数，我正在考虑提供程序集名称 + 类型名称以脱机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:54:32.093

这是编写 F# 类型提供程序的一个棘手方面。但我认为主要问题是，当你在私人飞机上进行开发并且使用类型提供程序来访问一些外部数据源时，你将无法*访问这些数据*。

**模式缓存**- 如果类型提供程序支持某种形式的模式缓存（即通过将模式存储在 XML 文件中，例如 @desco 提到的 LINQ to SQL），那么您将能够编写一些代码并编译它，但您仍然将无法*测试代码*。我认为这使得模式缓存对于私人飞机场景的用处不大。但是，在您在无权访问架构的构建服务器上构建代码的情况下，它很有用。

**本地数据**- 对于私人飞机场景，您可能需要某种本地数据（或子集），才能实际测试您编写的代码，然后您通常可以将类型提供程序指向您的本地副本（数据库， CSV 或 XML 文件等）。

**Meta-provider** - 我认为拥有 meta-provider 的想法非常酷 - 它应该在某种程度上起作用 - 您将能够缓存模式，但您可能无法缓存数据（也许是属性，但我猜方法行不通）。我认为应该可以将提供者的名称作为参数传递给您的元提供者。就像是：

```
type CachedDB = 
  SchemaCachingProvider<"FSharp.Data.TypeProviders.dll", "SqlDataConnection", ".."> 
```

我不知道有什么计划做这样的事情，但如果你开始了，我相信[FSharpX](https://github.com/fsharp/fsharpx)的人会有兴趣看看它:-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:31:49.537

您可以增强您的原始类型提供程序以在在线和离线模式下工作。即提供者尝试连接到数据源并获取模式，如果成功的模式缓存在磁盘上（以提供者可以理解的某种格式）。在该提供程序使用磁盘上的模式信息公开类型之后。如果由于某种原因无法连接到数据源 - 提供者检查缓存模式是否存在，如果存在 - 使用它。例如，标准类型提供程序（LINQ2SQL 或 EF）允许您指定在无法直接连接到数据库时可以使用的架构文件。

# php - 如何在 php 中修复 ftp_put() 上的“权限被拒绝”？

> ID：10181166
> 
> 赞同：3
> 
> 时间：2012-04-16T20:25:01.903
> 
> 标签：php, ftp

当我尝试上传文件时收到权限被拒绝消息：

```
Warning: ftp_put() [function.ftp-put]: Can't open that file: Permission denied in /home/kirby/public_html/members/upload_advanced.php on line 48 
```

该文件已经存在，如何启用 ftp_put() 来覆盖它。

另外，上传代码如下：

```
$upload = ftp_put($conn_id, "www/logos/web_".$row[username].".jpg",
                                  "../logos/web_" . $row[username] . ".jpg",  FTP_BINARY); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-07T17:29:08.480

要启用写访问，您必须编辑 /etc/vsftpd.conf 文件并取消注释

```
#write_enable=YES 
```

行，所以它应该读

```
write_enable=YES 
```

保存文件并使用 sudo service vsftpd restart 重新启动 vsftpd。 [https://askubuntu.com/a/410962](https://askubuntu.com/a/410962)

# android - 为什么子类化 GridView 时会出现 ClassCastException？

> ID：10181167
> 
> 赞同：1
> 
> 时间：2012-04-16T20:25:09.997
> 
> 标签：android

真奇怪; 出于某种原因，我很难让 GridView 的子类正确转换。我`Caused by: java.lang.ClassCastException: android.widget.GridView cannot be cast to com.dobydigital.dobixchange.CustomGridView`在尝试投射我的 CustomGridView 时得到。这是我的代码

CustomGridView.java

```
import android.widget.GridView;
public class CustomGridView extends GridView { 
```

文件浏览器片段.java

```
//# Other stuff omitted for brevity
private CustomGridView gridView;
public class FileBrowserFragment extends Fragment {
//# Stuff
}
//# .........
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    //# This cast here throws the exception
    gridView = (CustomGridView) getView().findViewById(R.id.grid_view); 
```

文件浏览器.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root_node"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<com.dobydigital.dobixchange.CustomGridView
    android:id="@+id/grid_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:numColumns="3"
    android:layout_weight="80" >
    <!-- Preview: listitem=@layout/image_tile -->
</com.dobydigital.dobixchange.CustomGridView>

<Button
    android:id="@+id/btn_confirm"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:text="Select this Directory" />

</LinearLayout> 
```

我不知道发生了什么事。我以前从未遇到过子类化布局的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:35:46.730

```
gridView = (CustomGridView) findViewById(R.id.grid_view); 
```

摆脱 getView()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:50:49.740

从问题的评论：你不小心膨胀并返回错误的布局`onCreateView()`:)

# android - 无法获取 URL https://dl-ssl.google.com/android/repository/addons_list-1.xml，原因：连接到 https://dl-ssl.google.com 被拒绝

> ID：10181168
> 
> 赞同：40
> 
> 时间：2012-04-16T20:25:12.997
> 
> 标签：android, sdk, fetch

当我尝试更新它时使用 Android SDK Manager 只会给出以下关于无法连接的消息。我试过禁用防火墙和反恶意软件。我还尝试以管理员身份运行并移至 c:\android。我正在运行 Windows 7 64 位。我也试过强迫等。

获取 URL [https://dl-ssl.google.com/android/repository/addons_list-1.xml](https://dl-ssl.google.com/android/repository/addons_list-1.xml)失败，原因：连接被拒绝 获取 URL [http://dl-ssl.google.com/android/repository失败/addons_list-1.xml](http://dl-ssl.google.com/android/repository/addons_list-1.xml)，原因：连接被拒绝

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-06-03T06:56:57.493

如果您使用**代理服务器**，请按照以下步骤操作：

1.  打开日食
2.  窗口 >> Android SDK 管理器 >> 选项
3.  输入您的代理服务器和端口。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-23T15:10:43.700

转到 Internet Explorer，进入选项 -> 连接 -> 局域网设置。应该有一个自动配置脚本选项，复制网址，将其粘贴到浏览器中，这会下载配置文件，在记事本中打开文件，其中会有一个代理地址和一个端口号，例如 192.234.10.23:88将地址粘贴到代理字段中，将端口 (88) 粘贴到 Android SDK 管理器工具 -> 选项对话框中的端口字段中。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-02-04T11:27:28.220

转到工具 -> SDK 管理器中的选项。检查https以强制http并尝试...为我工作

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-09T18:56:49.250

在尝试了我在 Internet 上找到的所有内容后，我得到了 Android Studio 安装的解决方案。如果您使用的是 Android Studio 并收到此错误：

找到`[Path_to_Android_SDK]\sdk\tools\android.bat`。就我而言，它位于`C:\Users\Nathan\AppData\Local\Android\android-studio\sdk\tools\android.bat`.

右键单击它，点击`Edit`，然后一直向下滚动到底部。

找到它说的地方：`call %java_exe% %REMOTE_DEBUG% ...`

将其替换为`call %java_exe% -Djava.net.preferIPv4Stack=true %REMOTE_DEBUG% ...`

重新启动 Android Studio/SDK，一切正常。这为我解决了许多问题，包括无法获取 XML 文件或创建新项目。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-02T17:23:20.353

以管理员身份运行 SDK Manager 将解决您的问题

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-07-05T18:23:29.830

经过7个小时的漫长搜索，我终于找到了路！以上解决方案都没有奏效，只有一个解决了这个问题！

如果您使用的是 Win7，那么您的防火墙会阻止 SDK 管理器检索插件列表。您必须将“android.bat”和“java.exe”添加到受信任的文件和宾果游戏中！一切都将开始工作！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-02-05T10:45:49.080

请执行下列操作。

1.  关闭 sdk manager 和 eclipse。

2.  转到您存储 adt 的文件夹。

3.  在该 adt 文件夹中，您会找到一个名为 tools 的文件夹。

4.  复制该文件夹的内容并将其粘贴到名为 copytools 的文件夹中。

5.  现在转到命令提示符并转到 copytools 的位置。

6.  然后执行命令 android.bat sdk manager 将启动。

7.  现在更新您想要的所有插件。它将更新您的原始文件夹。

8.  更新后删除副本。

享受。希望这可以帮助。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-01-23T12:51:07.850

我在下面遇到同样的问题是对我有用的解决方案

首先转到 Android SDK Manager 然后

然后选择工具，

选择选项

然后选中“强制使用 http://... 获取 https://... 源...”框

希望它也能帮助你。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-13T12:49:27.323

正如 srijan 所说，

检查您的实际代理设置，如果您使用代理脚本访问网络，它可能是（默认情况下）：代理服务器：代理/代理端口：8080

您可能在 Inter Explorer、Options、Connexions 设置中有这些信息.. 为我工作

您可能还需要向防火墙/防病毒软件添加规则。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-22T16:16:42.627

我在公司网络中遇到了这个问题。我在 8.8.8.8 添加了一个用于谷歌 DNS 的 DNS 条目，然后在下面添加了我自己的公司 DNS 服务器。在那之后工作得很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-04T17:40:43.923

我在 MacOS 上遇到了这个问题。我不得不取消选中 Android SDK Manager 首选项下的“使用下载缓存”。这行得通。我还重新创建了缓存文件夹并将我的用户设置为所有者，然后检查用户下载缓存。这也奏效了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-19T14:53:12.777

我今天遇到了同样的问题，花了我一整天的时间:-(我尝试了上面所有的建议，但没有一个能奏效。

最后，我卸载了 Comodo Firewall，一切正常。在卸载之前，我尝试将所有相关文件添加为 comodo 防火墙中的受信任应用程序，但它不起作用

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-13T15:58:45.337

如果您使用的是 Windows 7，只需以管理员权限运行 Eclipse 即可解决此问题。

刚刚在我的 Windows 7 64 位操作系统上尝试过。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-09-30T10:46:43.830

有时您需要在 SDK 管理器中添加代理设置 GoTO->Windows->SDK Manager->Tool->Otions 那里给 SERVER: proxy 和 PORT:8080

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-01-23T02:28:26.807

只需运行 android sdk 管理器，转到工具然后 obtions 和一个新窗口将出现标记底部的三个复选框并关闭它对我有用

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2014-06-29T01:52:30.523

在中国使用自由门代理。运行自由门，最新版本。运行 SDK Manager，工具 -> 选项，代理服务器 127.0.0.1，端口 8580。希望对您有所帮助。

# android - 子类化 SimpleAdapter 并覆盖 getView 导致 bindView() 出现问题

> ID：10181171
> 
> 赞同：0
> 
> 时间：2012-04-16T20:25:17.870
> 
> 标签：android, subclass, simpleadapter

我只是想继承 SimpleAdapter 并根据位置更改颜色（以及其他使元素更漂亮和相互区分的选项），但我在覆盖 getView 方法时遇到了麻烦。我刚刚从 SimpleAdapter 类的原始 getView 方法中调用的方法中复制了代码，该方法是 createViewFromResource ，我的代码现在看起来像这样：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v;

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater)thecontext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(layoutResource, parent, false);

    } else {

        v = convertView;

    }

    bindView(position, v);

    return v;
} 
```

这里没有什么破坏性的，正如我所说的，它是从原始适配器源中复制粘贴的 95%，我只是从构造函数中获取了一些变量，而不是在超类中声明的私有变量，因为我无法在子类中访问这些变量。我的问题是在返回视图之前调用的 bindView 方法。Eclipse 没有给我任何关于它在做什么的提示，我似乎也无法从我的子类中调用它。

> 方法 bindView(int, View) 未定义为类型 ChangeColorAdapter

如果我确实使用上面的代码，这就是我得到的，尽管我是从原始来源复制的。对我来说似乎有点奇怪。我正在 API 级别 8 (2.2) 编程并附有源代码。如果我查看 SimpleAdapters 的原始源代码，编辑器无法告诉我 bindView 调用的去向，但它不会在那里给出任何错误。

我在这里有什么问题吗？或者是什么导致了这个问题？我似乎找不到关于 bindView 方法的任何文档或描述，只是示例实现，主要来自游标适配器。任何提示都会很棒。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:50:33.820

我完全搞砸了这个。睡了几个小时后，我刚刚在 SimpleAdapter 类中找到了 bindView() 方法。它没有任何 java-doc，我可以发誓我昨天无法 ctrl-click 该功能，但今天它工作正常。由于该方法是私有的，您需要像我一样重新实现它，它现在运行得非常顺利。

# mysql - 使用索引列获取数据与 MySQL 范围标准哪个最好？

> ID：10181172
> 
> 赞同：-2
> 
> 时间：2012-04-16T20:25:24.510
> 
> 标签：mysql

TABLE 用户用户表结构。

```
 mysql> desc User;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| ID           | int(11)      | NO   | PRI | NULL    | auto_increment |
| EMAIL_ID     | varchar(250) | YES  |     | NULL    |                |
| IP_ADDRESS   | varchar(255) | YES  |     | NULL    |                |
| CREATED_TIME | bigint(20)   | YES  |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

该表包含数百万行，并且每天都会逐渐增加。

目标 ：

```
To getting past 12 month's user details from this table . 
```

首先获取在 12 个月之前创建的用户 ID。我的查询看起来像这样。

选项1：

```
Select * from User where ID > `Account created before 12 months` . 
```

选项 2：

```
Select * from User where CREATED_TIME > UNIX_TIMESTAMP(`2011-01-2011 00:00:00`)*1000; 
```

这对于获取详细信息很有效。并且此查询将被重复用于审计目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:32:19.603

尽量避免在每一行上调用函数。您可以像这样编写 WHERE 子句的第一部分来加快速度（特别是如果您将它与 CREATED_TIME 字段上的索引结合使用）：

```
Accounts.CREATED_TIME
BETWEEN UNIX_TIMESTAMP(CURRENT_DATE() - INTERVAL 1 DAY) * 1000
AND UNIX_TIMESTAMP(CURRENT_DATE() - INTERVAL 1 DAY) * 1000 + 999 
```

请注意，这只会使函数调用一次，并且可以使用 CREATED_TIME 字段上的索引来解析查询。

# java - 活动许可拒绝

> ID：10181176
> 
> 赞同：0
> 
> 时间：2012-04-16T20:25:48.617
> 
> 标签：java, android, android-activity, android-intent, permissions

我在我的 Android 应用程序中遇到了一个奇怪的权限拒绝，这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest package="test.mymax"
    android:versionCode="1"
    android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/splash"
        android:label="@string/app_name" android:debuggable="true">
        <activity
            android:name=".Test_mymaxActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="A_Info"></activity>
        <activity android:name="A_Info_Refresh"></activity>
        <activity android:name="_TagConnector"></activity>
        <activity android:name="_SQLconnect"></activity>
        <activity android:name="_TagReader"></activity>
        <activity android:name="_TagReader_Refresh"></activity>
        <activity android:name="Test_mymaxActivity"></activity>
    </application>

</manifest> 
```

我得到的错误是：ActivityManager: java.lang.SecurityException: Permission Denial:starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=test.mymax/。 Test_mymaxActivity } from null (pid=17572, uid=2000) 需要 null

请帮助我不知道出了什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:31:19.667

您两次声明了 Test_mymaxActivity。曾经在这里

```
 <activity
        android:name=".Test_mymaxActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
 </activity> 
```

并且低于第二次

```
 <activity android:name="Test_mymaxActivity"></activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:29:05.923

您可以发布您正在使用的请求许可的意图/代码吗？还是在启动您的活动时立即执行此操作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:30:54.230

您确定您声明了代码所需的所有权限（**使用互联网、检测电话状态等**）

这是文档：[Manifest permission - Android dev](http://developer.android.com/guide/topics/security/security.html)

# sparql - Jena：如何推断数据/性能问题

> ID：10181183
> 
> 赞同：6
> 
> 时间：2012-04-16T20:26:12.777
> 
> 标签：sparql, jena, ontology, inference, protege

我想使用 Jena 的推理功能，但是在使用 InfModel 时遇到了一些性能问题。

这是我的本体的简化概述：

特性：

```
hasX            (Ranges(intersection): X, inverse properties: isXOf)
|-- hasSpecialX (Ranges(intersection): X, inverse properties: isSpecialXOf)

isXOf           (Domains(intersection): X, inverse properties: hasX)
|--isSpecialXOf (Domains(intersection): X, inverse properties: hasSpecialX) 
```

此外，还有一个类“对象”：

```
Object hasSpecialX some X 
```

显式存储以下数据：

```
SomeObject a Object 
SomeX a X
SomeObject hasSpecialX SomeX 
```

使用以下查询，我想确定实例属于哪个类。根据所做的假设，应该只返回“SomeObject”。

```
SELECT ?x WHERE { ?x :hasX :SomeX . } 
```

但是，查询`ds.getDefaultModel()`不起作用，因为数据没有显式存储。`infModel`另一方面，当我使用时，查询永远不会完成。在中止之前，我一直在等待 25 分钟。（三重存储的大小约为 180 MB）

这是我的代码：

```
OntModel ont = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_MICRO_RULE_INF, null); 
ont.read("file:..." , "RDF/XML"); 

Reasoner reasoner = ReasonerRegistry.getOWLMicroReasoner(); 
reasoner = reasoner.bindSchema(ont); 

Dataset dataset = TDBFactory.createDataset(...); 
Model model = dataset.getDefaultModel(); 

InfModel infModel = ModelFactory.createInfModel(reasoner, model);

QueryExecution qe = null;
ResultSet rs;

try {
    String qry = "SELECT ?x WHERE { ?x :hasX :SomeX . }"; 
    qe = QueryExecutionFactory.create(qry, infModel); 
    rs = qe.execSelect(); 

    while(rs.hasNext()) {
        QuerySolution sol = rs.nextSolution(); 
        System.out.println(sol.get("x"));
    }
} finally {
    qe.close();
    infModel.close();
    model.close(); 
    dataset.close();
} 
```

上面的代码有什么问题吗，或者还有什么原因导致它不起作用？

除此之外，我想知道如果我“将推断的公理导出为本体”（由 Protege 提供）是否可以提高性能？

**编辑：** 我同时尝试使用 Pellet，但我仍然无法获得推断模型，正如我在另一个问题中所描述的那样：[OutOfMemoryError using Pellet as Reasoner](https://stackoverflow.com/questions/10279894/outofmemoryerror-using-pellet-as-reasoner)。那我还能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T22:51:32.423

关于性能，最好在断言数据之前进行推理，而不是在关闭 Jena 推理机制的情况下进行 SPARQL。您已经在使用 TDB，它是适合大型数据集的 Jena 组件。

如果直接使用推断数据没有获得预期的性能，那么我建议转移到更具可扩展性的三重存储（[4store](http://4store.org/)或[Virtuoso](http://www.openlinksw.com/dataspace/dav/wiki/Main/VOSRDF)）。

# ios - 使用 UIViewController 自定义动画

> ID：10181185
> 
> 赞同：0
> 
> 时间：2012-04-16T20:26:24.560
> 
> 标签：ios, xcode, quartz-graphics, modalviewcontroller

我正在使用自定义动画来展示我的视图控制器。这是代码：

```
-(void)launchCustomModal:(id)sender
{
    UIButton *buttonClicked = (UIButton *)sender;
    int selection;
    selection = buttonClicked.tag;
    [ticker removeFromSuperview];
    ticker = nil;

    if (selection == 3)
    {
        MyViewController *myVC = [[MyViewController alloc]initWithNibName:nil bundle:nil];
        modalViewController= [[UINavigationController alloc]initWithRootViewController:myVC];
        modalViewController.navigationBarHidden = YES;
        [modalViewController setToolbarHidden:YES];

        CGRect result = self.view.bounds;
        result.origin.y = -result.size.height;
        modalViewController.view.frame=result;
        [self.view addSubview:modalViewController.view];

        [UIView animateWithDuration:.375 
                         animations:^{ 
                             modalViewController.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
                         }
                         completion:^(BOOL finished) {
                             NSLog(@"Finished");          
                         }];
    }

    return;
} 
```

我注意到这种方法会导致非常滞后的过渡。如果我以正常模式启动 VC，它工作得非常顺利。此外，如果我只为独立于视图控制器的视图设置动画，它也可以完美地运行。我想知道是否有关于 VC 的某些东西可能导致它的动画效果如此糟糕？如果它是我正在做的事情的症状，或者视图控制器不应该以这种方式处理，等等。任何输入都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:31:13.127

这是 CALayer 阴影。删除它们，它工作正常。

# c# - 我需要帮助以编程方式更改 WinForms 中的组合框

> ID：10181187
> 
> 赞同：2
> 
> 时间：2012-04-16T20:26:25.933
> 
> 标签：c#, winforms, c#-4.0, combobox

```
int item = ComboBox.FindStringExact("Open"); 
    if (item >= 0) 
        ComboBox.SelectedItem = item; 
```

我想（以编程方式）将组合框中的项目选择为显示打开的项目

我的代码不起作用，但我将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:30:38.207

我相信你想要`SelectedIndex`而不是`SelectedItem`（我在这里*假设* `item >= 0`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T20:33:06.123

从你所说的听起来你想要

```
ComboBox.SelectedIndex = item; 
```

但是，我建议通过以下方式坚持使用 SelectedItem：

```
ComboBox.SelectedItem = "Open";  
//use the exact string that is used in the combobox. 
```

# php - PHP (mcrypt_encrypt) Ruby (AES-256-CBC) 加密不同的结果

> ID：10181193
> 
> 赞同：1
> 
> 时间：2012-04-16T20:26:48.243
> 
> 标签：php, ruby, encryption

我一直在尝试使用相同的密钥和 iv 加密 PHP 和 Ruby 中的字符串，但我总是得到不同的结果。

下面是PHP代码

```
$data = "This string needs to be encrypted";

$key = "1234567887654321abcdefghabcdefgh";

$iv = "1234567887654321abcdefghabcdefgh";

echo $encrypted_data = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $data, MCRYPT_MODE_CBC, $iv); 
```

下面是Ruby代码

```
data = "This string needs to be encrypted"

key = "1234567887654321abcdefghabcdefgh"

iv = "1234567887654321abcdefghabcdefgh"

aes = OpenSSL::Cipher::Cipher.new("AES-256-CBC")
aes.encrypt
aes.key = key
aes.iv = iv
encrypted_data = aes.update(data) + aes.final 
```

有人可以帮我在 PHP 和 Ruby 中获得相同的加密数据吗？我在 PHP 中加密了一些数据，然后在 Ruby 中解密，但没有取回数据。所以我认为问题在于 PHP 和 Ruby 的加密和解密机制的工作方式不同。如果我错了，请纠正我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:41:53.797

1.  不要对 IV 进行硬编码，这是不安全的。IV 必须是随机的，但可以是公开的，因此只需使用
    mcrypt_create_iv 并将其添加到密文的前面，然后在解密之前将其提取出来

2.  你可能有三个问题

    1.  MCRYPT_RIJNDAEL_256 *[不是](https://stackoverflow.com/a/4539318/980922)AES*。AES 是一个特定版本的 RIJNDAEL，它采用 128 位块大小和 128 位或 256 位密钥进行标准化。MCRYPT_RIJNDAEL_256 是具有 256 位块大小的 RIJNDAEL。您想使用实际上是 AES 的 MCRYPT_RIJNDAEL_128。对于 php，key 的长度只是由 key 的长度决定的。所以只要给它一个 256 位（32 个字符）的密钥就可以了。请注意，块大小并不会真正影响安全性，因此不必担心这种尊重，只需使用 256 位密钥的 AES：它对于 NSA 和绝密数据来说已经足够了。
    2.  填充。AES 只采用固定的 128 位块，因此您必须将文本填充为该大小的倍数。PHP 还不错，我相信 SSL 使用 pkcs7 填充。请注意，即使使用不同的填充方案，对于它们中的大多数来说，密文的开头应该是相同的，最后可能会有垃圾。

    3.  字符串编码。AES 是用位输入定义的，在 c 中通常这是一个字节数组。Ruby 和 PHP 使用字符串。我愿意打赌你的字符串编码是不同的。

# bash - 使用 AWK 从文件中读取行并创建变量

> ID：10181195
> 
> 赞同：0
> 
> 时间：2012-04-16T20:26:54.697
> 
> 标签：bash, awk, sungridengine, command-substitution

我有一个带有文件名列表的文本文件。我想使用 AWK 从特定的行号创建一个变量。我得到正确的输出使用：

```
awk "NR==\$Line" /myPath/fileList.txt 
```

我想将此输出分配给一个变量，并且从文档中我发现我希望以下工作：

```
INFILE=$(awk "NR==\$Line" /myPath/fileList.txt) 
```

或者

```
INFILE=`awk "NR==\$Line" /myPath/fileList.txt` 
```

然而，

```
echo "\$INFILE" 
```

为空白。我是 bash 脚本的新手，不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:58:59.913

AWK 命令的输出分配给变量。要查看变量的内容，请执行以下操作：

```
echo "$INFILE" 
```

您应该为您的 AWK 命令使用单引号，这样您就不必转义文字美元符号（文字字符串应该被引用，如果您想替换一个 shell 变量，请参见下文）：

```
awk 'NR == "$Line"' /myPath/fileList.txt 
```

这种`$()`形式比反引号形式更受欢迎（顺便说一句，我不明白为什么你要逃避反引号）。此外，您应该习惯性地使用小写或混合大小写的变量名，以避免与 shell 或环境变量的名称冲突。

```
infile=$(awk 'NR == "$Line"' /myPath/fileList.txt)
echo "$infile" 
```

如果您的意图是替换命名变量的值`$Line`而不是使用文字字符串“$Line”，那么您应该使用 AWK 的`-v`变量传递功能：

```
infile=$(awk -v "line=$Line" 'NR == line' /myPath/fileList.txt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:58:41.183

不要掩盖美元符号。

错误的：

```
 echo "\$INFILE" 
```

正确的：

```
 echo $INFILE
 echo ${INFILE}
 echo "$INFILE"
 echo "${INFILE}" 
```

如果您想将文本粘合在一起，${x} - 构造很有用。

```
 echo $INFILE0 
```

将查找变量 INFILE0。如果 $INFILE 为 5，则不会产生“50”。

```
 echo ${INFILE}0 
```

如果 INFILE 为 5，这将产生 50。

如果变量包含空格和或多或少不可预测的文本，撇号很有用。

如果您的 rownumber 是一个参数：

```
#!/bin/bash
Line=$1
INFILE=$(awk "NR==$Line" ./demo.txt)
echo "$INFILE" 
```

如果 INFILE 包含多个空格或制表符，则 echo $INFILE 会将它们压缩为单个空格，而 "$INFILE" 会保留它们。

# javascript - Highslide 缩放在 ie 8 上崩溃？

> ID：10181197
> 
> 赞同：1
> 
> 时间：2012-04-16T20:26:59.613
> 
> 标签：javascript, internet-explorer, crash

我已经尝试了很多方法来修复它，但我无法做到。它适用于每个浏览器，但即。这是我的代码的链接，[http://jsfiddle.net/sTLKn/](http://jsfiddle.net/sTLKn/)

如果你想看这个网站，这是链接，[http ://grupomudde.com.br/clientes/pousada/public/](http://grupomudde.com.br/clientes/pousada/public/)

如果有人可以帮助我，我将不胜感激，在此先感谢！

# opengl - OpenGL 灯光变化：环境到漫反射或镜面反射有效，但不是相反

> ID：10181201
> 
> 赞同：0
> 
> 时间：2012-04-16T20:27:23.827
> 
> 标签：opengl, light

我在 OpenGL 中遇到了灯光问题：

我用这段代码改变了我的球灯：

```
switch(option) {                                            
case ambient:                                               
  glLightfv(GL_LIGHT0,GL_AMBIENT,lum_ambient);              
  glMaterialfv(GL_FRONT,GL_SPECULAR,mat_ambient);           
  break;                                                    
case diffuse:                                               
  glLightfv(GL_LIGHT0,GL_DIFFUSE,lum_diffuse);              
  glMaterialfv(GL_FRONT,GL_DIFFUSE,mat_diffuse);            
  break;                                                    
case specular:                                              
  glLightfv(GL_LIGHT0,GL_SPECULAR,lum_speculaire);          
  glMaterialfv(GL_FRONT,GL_SPECULAR,mat_speculaire);        
  break;                                                    
} 
```

我可以从 Ambient 更改为漫反射或镜面反射。但是一旦我改变了，我就不能回到环境，更糟糕的是：要回到漫反射，我需要调用环境。

而且我不认为它来自这段代码：

```
 switch (key) {                              
   case 27:                                    
       exit(1);                                
   case '1':                                   
     option = ambient;                         
     glutPostRedisplay();                      
     break;                                    
   case '2':                                   
     option = diffuse;                         
     glutPostRedisplay();                      
     break;                                    
   case '3':                                   
     option = specular;                        
     glutPostRedisplay();                      
     break;                                    
   } 
```

知道我的问题来自哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:36:40.497

问题来自这样一个事实，即状态不会因为您更改了*其他*状态而消失。如果您有两个全局变量：

```
int x;
int y; 
```

改变`y`不影响`x`。如果你有这个 switch 语句：

```
switch(option)
{
case ambient:
  x = 4;
  break;
case diffuse:
  y = 6;
  break;
...
} 
```

如果你用 执行这个`diffuse`，然后用 执行它`ambient`， 的值是`y`多少？它*仍然是 6*。当然是，因为你没有改变它。

OpenGL 中没有“环境”、“漫反射”或“镜面”光照。这些中的每一个都只是每个灯的照明模型中的不同术语。也就是说，OpenGL 总是为每个灯光做*所有这些。*您看不到镜面反射照明组件的任何效果的原因是初始镜面反射材质颜色*为零*。这会产生一个零镜面光照分量。

一旦您更改了高光材质颜色，它将保持新值，直到您再次更改它。如果要“关闭”镜面光照，则需要将镜面材质颜色重置为零。其他人也是如此。

* * *

您正在尝试在三种照明模型的设置和默认设置之间切换。所以你必须真正做到这一点：你必须将值重置为 OpenGL 默认值。这些可以在 OpenGL 规范中找到。

但是，除了材质颜色之外，您还必须设置光强度。

如果您不想查看规范，这里是默认值：

*   环境光：`(0.0, 0.0, 0.0, 1.0)`
*   环境材料：`(0.2, 0.2, 0.2, 1.0)`
*   漫射光：（`(1.0, 1.0, 1.0, 1.0)`仅适用于light0。所有其他灯光默认为`(0.0 0.0, 0.0, 1.0)`
*   漫反射材质：`(0.8, 0.8, 0.8, 1.0)`
*   镜面光：（`(1.0, 1.0, 1.0, 1.0)`仅适用于 light0。所有其他灯光默认为 `(0.0 0.0, 0.0, 1.0)`
*   镜面材质：`(0.0 0.0, 0.0, 1.0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:40:50.617

首先，我会使用不同的灯光，而不仅仅是 Light0。另外，在打开新灯之前尝试关闭所有灯：

```
glDisable(GL_LIGHT0); 
```

一些帮助：[光源 - OPENGL](http://www.falloutsoftware.com/tutorials/gl/gl8.htm)

# ios - cocos2d中的自定义滚动视图不使用uikit

> ID：10181210
> 
> 赞同：1
> 
> 时间：2012-04-16T20:28:06.343
> 
> 标签：ios, cocos2d-iphone, scrollview

我目前需要在 cocos2d 中不使用 UIKit 的滚动视图来创建自定义滚动视图。我认为最好的方法是创建一个单独的层，然后将我所有的精灵添加到该层。但我不确定如何接收所有精灵的触摸事件。有没有最好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:43:19.927

你见过CCScrollLayer吗？它可能不适合您，但也许您可以复制它的接触方式。

*   [https://github.com/cocos2d/cocos2d-iphone-extensions/tree/develop/Extensions/CCScrollLayer](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/develop/Extensions/CCScrollLayer)
*   [http://www.cocos2d-iphone.org/forum/topic/17118](http://www.cocos2d-iphone.org/forum/topic/17118)

这里还有一个，不确定是分叉还是独立的：

*   [https://github.com/jerrodputman/CCKit](https://github.com/jerrodputman/CCKit)

但我在这些方面都没有取得太大的成功。弹跳和体验的其他部分永远不会感觉正确，所以我回到使用 UIScrollView 来处理触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:29:51.170

我一直面临同样的问题，我在这里找到了 SWScrollView：

[https://github.com/saim80/Cocos2D-Extensions](https://github.com/saim80/Cocos2D-Extensions)

比 CCScrollView 更能满足我的需求。它的作用更像 UIScrollView，因为 CCScrollView 更适合我所看到的分页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T22:05:28.970

有一个很好的框架叫做 CMMSimpleFramework。

[http://www.cocos2d-iphone.org/forum/topic/39018](http://www.cocos2d-iphone.org/forum/topic/39018)

[http://www.cocos2d-iphone.org/forum/topic/60354](http://www.cocos2d-iphone.org/forum/topic/60354)

有一些示例视频，回购链接在这些页面上。

One of the classes is a scrolling layer that might do what you need. To get the sample project to run, I had to comment out some game center authentication handler code that has changed, but after I did that the demo worked fine.

# javascript - 创建可重用 javascript web-app 的最佳实践

> ID：10181212
> 
> 赞同：0
> 
> 时间：2012-04-16T20:28:11.300
> 
> 标签：javascript, asp.net, html, web-applications

我第一次使用 javascript 编写一个网络应用程序。

我想知道使网络应用程序易于重用的最佳方法是什么，即制作一个包含 js 文件、html 和 css 的“包”，然后像这样加载它们`"load webapp"->launch it.`

目前我有一个`index.html`包含两个div：

*   第一个是特定于站点的主页
*   第二个，最初是隐藏的，是网络应用程序的面板

在主页中完成初始选择后，我会启动应用程序并调用 js 方法。

我想让这个更通用，我想知道 using 是否`jquery load()`可以是一个干净的解决方案（我目前正在使用 jquery）。这将加载 html，但我认为我仍然应该使用 lib/app.xml 手动加载页面中的 css。

任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:32:18.597

*只要确保尽可能*不将任何 CSS 或 JS 嵌入到 ASPX 页面中，始终将它们保存在单独的文件中，这样可以更轻松地重用某些方面，而无需四处寻找代码。我什至看到了用于封装一系列功能的 JavaScript 类，如果您有这种倾向，这也可能是一种选择:)。

在您所说的示例中，您最好在准备好文档时调用外部 JS 文件中的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:09:07.810

将您的 JS 组织为 JQuery 插件也可能是您的一种选择。将所有 JS 放入一个插件中可能没有意义，但如果你将工作拆分为小组件，这可能是有意义的。我不会提及任何特定的资源，因为资源太多而且我不想看起来像垃圾邮件发送者。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:34:58.357

jQuery load 不会帮你组织代码，或者动态加载 js，它有一个完整的其他功能（注册到 onLoad 事件，或者加载一个 html 页面，或者通过 ajax 加载部分页面）

如果您正在寻找动态加载 js 库，请使用 lab.js（位于[http://labjs.com](http://labjs.com)）或 require.js（位于[http://requirejs.org](http://requirejs.org)）。但请记住，也可以只拥有一个会被缓存并立即加载的大 js 文件。

至于组织你的js，它取决于应用程序。有时jQuery插件是要走的路。我已经开发了一个我在项目中使用的解决方案，我只是在这里与您分享：http: [//thebeast.heroku.com](http://thebeast.heroku.com)

# java - eclipse中的堆和栈

> ID：10181214
> 
> 赞同：0
> 
> 时间：2012-04-16T20:28:16.687
> 
> 标签：java, eclipse, out-of-memory, heap-memory, stack-overflow

我已经在 Eclipse 中编写了一个代码，它可以正常运行小输入值，但是一旦我的测试用例大小增加，我就会`OutOfMemoryException`出错`StackOverFlow`。

我试图用来`eclipse.exe -vmargs -Xmx1g`让我的堆输出到 1G，但我仍然得到同样的错误。当我尝试 2G 时，它说无法启动 JVM。

所以我想知道是否有任何方法可以让我运行这段代码。任何帮助，将不胜感激。提前致谢。

编辑：这是我的堆溢出的地方。输入样本太大并导致内存问题。

```
 while ((line = br.readLine()) != null) {

        String[] linevalue= (line.trim().split("\\s+"));
        int l= linevalue.length;
        dg.addNode(Long.parseLong(linevalue[0]));
        dg.addNode(Long.parseLong(linevalue[1]));
        dg.addEdge(Long.parseLong(linevalue[0]), Long.parseLong(linevalue[1]));

    } 
```

在另一个类中，存在以下代码，这里 mGraph 是一个 HashMap。

```
public boolean addNode(T node) {
    /* If the node already exists, don't do anything. */
    if (mGraph.containsKey(node))
        return false;

    /* Otherwise, add the node with an empty set of outgoing edges. */
    mGraph.put(node, new HashSet<T>());
    return true;
}

public void addEdge(T start, T dest) {
    /* Confirm both endpoints exist. */
    if (!mGraph.containsKey(start) || !mGraph.containsKey(dest))
        throw new NoSuchElementException("Both nodes must be in the graph.");

    /* Add the edge. */
    mGraph.get(start).add(dest);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:37:42.173

在 Eclipse 中，您可以在执行代码时设置 VM 的大小。

去`Run > Run configurations`。然后在选项卡`Arguments`中，放在`-Xms1000m`VM 参数下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:54:34.210

跟进 tskuzzy 的[回答](https://stackoverflow.com/a/10181333/104950)：

对于堆，

```
-Xms -Xmx 
```

对于堆栈

```
-Xss 
```

我会`1g`推荐`Xmx`和`Xmx`,`8m`和`-Xss`

# java - 使用 Maven 创建一个包含 JNLP 的 jar-with-dependencies.jar 的 .war 文件

> ID：10181216
> 
> 赞同：5
> 
> 时间：2012-04-16T20:28:24.930
> 
> 标签：java, maven, jnlp, java-web-start

我有一个 Maven 项目，它将 Swing 客户端构建为 jar-with-dependencies.jar 文件。我想使用 Java Web Start 来分发这个 my.gui-0.1.0-jar-with-dependencies.jar 文件。为此，我创建了一个单独的 Maven 项目，该项目使用 JNLP 工件构建了一个 .war 文件。我需要在这个 .war 文件中包含 my.gui-0.1.0-jar-with-dependencies.jar。

我无法确定 jar-with-dependencies.jar 文件的 Maven 坐标。如果我为 GUI 项目使用 Maven 坐标，它会将 GUI 项目的依赖项 .jar 文件放在 WEB-INF/lib 中，这不是我想要的。我需要在 .war 文件中有 my.gui-0.1.0-jar-with-dependencies.jar 文件本身。（我想它可能在 WEB-INF/lib 中。）

我如何告诉 Maven 依赖项是 jar-with-dependencies.jar 文件本身？

如果除了告诉 Maven 包含 jar-with-dependencies.jar 本身的机制之外还有其他方法也可以。jar-with-dependencies.jar 必须位于我正在创建以支持 Java Web Start 的 .war 文件中的某个位置。

我知道有一个 Maven Webstart 插件，但这[看起来像是一场噩梦](http://www.shaunabram.com/swing-webstart-maven/)，所以我只是自己构建一个带有必要 JNLP 工件的 .war 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T03:35:39.867

首先，您想要的是可供WAR 文件的用户*下载的 JAR 文件。*将 WEB-INF/lib 中的文件包含为 WAR 项目的标准依赖项不是您想要的。您最可能想要的是将 JAR 放在 WAR 中的不同目录中（例如`/downloads`）。

要在 Maven 中实现这一点，您可以使用[Maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin)。

1：使用依赖插件将你的 JAR 文件[复制](http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-artifacts.html)到临时构建目录。

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.4</version>
        <executions>
          <execution>
            <id>copy</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>my.group</groupId>
                  <artifactId>myartifact</artifactId>
                  <version>1.0</version>
                  <type>jar</type>
                  <overWrite>false</overWrite>
                  <outputDirectory>${project.build.directory}/webapp-downloads</outputDirectory>
                  <destFileName>myartifact.jar</destFileName>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

在这里，我们将您的 JAR 文件复制到 ${project.build.directory/webapp-downloads 目录

2：配置WAR插件，包含依赖插件生成的资源。

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
        <configuration>
          <webResources>
            <resource>                  
              <directory>${project.build.directory/webapp-downloads</directory>
              <targetPath>downloads</targetPath>
            </resource>
          </webResources>
        </configuration>
      </plugin> 
```

这将导致 JAR 文件捆绑在您的 WAR`downloads`目录下。然后，用户可以通过转到 /downloads/myartifact.jar 来下载它。

对于 webstart，您将使用适当的路径配置 JNLP，而不是让用户直接下载 JAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T10:19:53.333

如果您也想复制 .jnlp 文件，就像我的情况一样，您可以使用 unpack 目标。这是因为 webstart-maven-plugin 可以将 jars 和 jnlp 文件打包成一个 zip。

```
<execution>
    <id>unpack</id>
    <phase>process-resources</phase>
    <goals>
          <goal>unpack</goal>
    </goals>
    <configuration>
        <artifactItems>
         <artifactItem>
             <groupId>myGroup</groupId>
            <artifactId>myArtifact</artifactId>
            <version>1.0</version>
            <type>zip</type>
            <overWrite>true</overWrite>
            <outputDirectory>${project.build.directory}/webapp-downloads</outputDirectory>
        </artifactItem>
    </artifactItems>
    </configuration>
</execution> 
```

# php - PHP str_replace 困难与双引号

> ID：10181219
> 
> 赞同：1
> 
> 时间：2012-04-16T20:28:30.930
> 
> 标签：php, quotes, str-replace

我正在尝试清理用户可以在表单中输入的文本。我将不胜感激任何更快的方法和额外的预防措施，以确保不会通过此表单注入错误代码。但是我在删除双引号时遇到了特别的麻烦。

我的代码是：

```
str_replace(array('<','>',')','\$','(', '?', '.', ',' ,'!', '-', '+', '/', '\*', '\\', '"'), " ", $text) 
```

但它不会匹配并删除倾斜的引号，例如从 MS 单词“到”，这是正常的双引号。

你能帮我解决这个问题吗？

*我将 POST 用于表单，并且除了解析它之外，我没有将输入用于任何其他用途。

谢谢

这就是我想要做的一切

```
str_replace(array('"'), " ", $text) 
```

用空格替换双引号，但 PHP 无法识别来自 Microsoft Word 等程序的双引号。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T20:34:57.043

可以使用此功能删除 MS 智能引号。

```
function convert_smart_quotes($string) 
{ 
    $search = array(chr(145), 
                    chr(146), 
                    chr(147), 
                    chr(148), 
                    chr(151)); 

    $replace = array("'", 
                     "'", 
                     '"', 
                     '"', 
                     '-'); 

    return str_replace($search, $replace, $string); 
} 
```

或者将它们添加到您的代码中：

```
str_replace(array('<','>',')','\$','(', '?', '.', ',' ,'!', '-', '+', '/', '\*', '\\', '"', chr(145), chr(146), chr(147), chr(148)), " ", $text) 
```

[http://shiflett.org/blog/2005/oct/convert-smart-quotes-with-php](http://shiflett.org/blog/2005/oct/convert-smart-quotes-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:30:40.840

你想做什么？

有[htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php)函数可以保护所有未知输出不破坏 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:40:58.107

您可以将字符列入白名单，而不是将某些字符列入黑名单。然后用空格替换任何未列入白名单的字符，然后将多个空格规范化为一个空格。

```
$filtered = preg_replace(array('~\W~', '~[ ]{2, }~'), ' ', $text); 
```

# javascript - 从 Google 地图中删除路线

> ID：10181222
> 
> 赞同：5
> 
> 时间：2012-04-16T20:28:41.727
> 
> 标签：javascript, google-maps-api-3

我正在使用 google places api 在地图上显示地点列表。用户可以单独获取到每个地方的路线。路线在地图上显示得很好，一切正常，但每次他们获得前往不同地点的路线时，都会将其与旧路线一起添加到地图中。选择新地点时，我想覆盖地图上的现有路线。因此，任何时候都只会出现一组方向。理想情况下，我只希望在地图上标记一条路线并显示一个路线列表。

在设置新方向之前，我尝试添加以下内容以清除所有方向：

```
directionDisplay = new google.maps.DirectionsRenderer();
directionDisplay.suppressMarkers = true;
directionDisplay.setMap(null); 
```

如此处建议：[谷歌地图版本 3 删除方向标记](https://stackoverflow.com/questions/1835306/google-maps-version-3-remove-directions-markers)但无济于事。

无论通过多少谷歌搜索和搜索文档，我似乎都无法得到它。

任何帮助将不胜感激。

JA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T22:20:46.987

在渲染新方向之前无需清除方向。

为方向显示使用 1 个全局变量，当前方向将在您调用 setDirections() 以呈现新方向时立即被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T03:58:36.770

```
// in the global scope
var directions = [];

document.getElementById('submit').addEventListener('click', function () {
if (directions && directions.length > 0) {
  for (var i=0; i<directions.length; i++)
     directions[i].setMap(null);
  }
  directions = [];
  calculateAndDisplayRoute(directionsService, markerArray, stepDisplay, map, true, "SUBWAY");
});

function calculateAndDisplayRoute(directionsService,markerArray, stepDisplay, map, is_transit, transit_mode) {
            //var selectedMode = "TRANSIT";
            // First, remove any existing markers from the map.
            for (var i = 0; i < markerArray.length; i++) {
                markerArray[i].setMap(null);
            }

            if (is_transit == true){
                var request = {
                    origin: {lat: start_lat, lng: start_lon},
                    destination: {lat: end_lat, lng: end_lon},
                    travelMode: google.maps.TravelMode.TRANSIT,
                    transitOptions: {
                        modes: [google.maps.TransitMode[transit_mode]],
                    },
                    provideRouteAlternatives: true
                };
            }else{
                var request = {
                    origin: {lat: start_lat, lng: start_lon},
                    destination: {lat: end_lat, lng: end_lon},
                    travelMode: google.maps.TravelMode[transit_mode],
                    provideRouteAlternatives: true
                };
            }

            // Retrieve the start and end locations and create a DirectionsRequest using

            directionsService.route(request, function(response, status) {
                // Route the directions and pass the response to a function to create
                console.log(response)
                console.log(response.routes[0])

                var polyline = new google.maps.Polyline({
                    strokeColor: '#6855C9',
                    strokeOpacity: 1,
                    strokeWeight: 7
                });

                if (status == google.maps.DirectionsStatus.OK) {
                    for (var i = 0, len = response.routes.length; i < len; i++) {

                        directions.push(new google.maps.DirectionsRenderer({
                            map: map,
                            directions: response,
                            routeIndex: i  ,
                            suppressMarkers: true
                        }));

                        //showSteps(response, markerArray, stepDisplay, map);
                    }
                } else {
                    window.alert('Directions request failed due to ' + status);
                }

            });
        } 
```

# php - 如果我正在做“靠近我”选项，我应该在数据库中存储经度/纬度吗？

> ID：10181224
> 
> 赞同：4
> 
> 时间：2012-04-16T20:28:45.457
> 
> 标签：php, html, google-maps, geolocation

我正在建立一个目录，让您可以根据您当前的位置查看您周围的业务。目前，这些业务在数据库中存储为address1，address2，city，province，postal_code。

如果我想做距离，我也应该存储纬度/经度吗？解决这个问题的最佳方法是什么？

我正在使用 PHP、HTML5 地理定位和谷歌地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:06:18.147

除非您有其他方法来缩小数据库搜索范围，否则您可能*确实*希望保持 lat/long，因为它可以帮助您过滤数据库搜索以查找附近的地址。使用纬度/经度准确计算两点之间的精确距离很复杂，但它至少是缩小地址数量以更详细地查看的起点。

此外，如果您希望能够在没有数据连接的情况下运行，则需要使用一些数据来代替 Web 查找。可以从 lat-long 获得相当准确的距离，而不必过多担心经度线的收敛性，至少对于我周围的精度而言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:45:18.907

如果您查看谷歌地图中的距离服务，您不必“必须”，您可以传递地址或纬度，长：

[https://developers.google.com/maps/documentation/javascript/distancematrix](https://developers.google.com/maps/documentation/javascript/distancematrix)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:57:38.000

您不想为数据库中的每个条目进行距离计算，您需要缩小范围。postal_code 可能就足够了。如果不是，您可以通过将每个纬度/经度限制在该位置周围的范围内来快速缩小搜索范围；这提供了一个几乎是正方形的梯形区域，这可能就足够了。

# javascript - 价格计算器帮助（尝试添加下拉列表选项）使用 javascript/jquery

> ID：10181227
> 
> 赞同：0
> 
> 时间：2012-04-16T20:28:57.773
> 
> 标签：javascript, jquery, drop-down-menu, options, calculator

当我尝试添加选项时，我的价格计算器出现问题。（这里的 jsFiddle = [http://jsfiddle.net/wemdragon/ZG8m](http://jsfiddle.net/wemdragon/ZG8m)）

我想做的是它说的地方：

`var firstoption=$('select#myselect')`

我希望期权价值变成价格价值，但似乎做不到。它适用于我的购物车，但不适用于 JavaScript。

也许我试图在错误的地方添加值，我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:40:19.520

您的选择 id （至少在小提琴中）是 camelCased as`mySelect`但您正在尝试访问 id `#myselect`。除非您更改标记的 ID，否则这应该如下所示：

```
var firstoption = $('select#mySelect'); 
```

我还注意到您为不选择选项指定了默认值 0。出于某种原因，`!firstoption.val()`当 val() 为零时，返回 false 而不是 true，就像您的 if 语句似乎期望的那样。!0 在这种情况下显然是正确的。

我更改了逻辑以匹配您的标记，它的行为似乎与您预期或想要的一样：

```
if (firstoption.val() == 0) {
    error.html('Please include an option!');
    firstoption.focus();
} 
```

**编辑**更新的小提琴：http: [//jsfiddle.net/ZG8mv/8/](http://jsfiddle.net/ZG8mv/8/)

现在 focus() 执行将按错误的顺序显示。即，如果没有指定宽度*和*选项，则该框将获得焦点。以前，选项消息将胜过其他两个消息。

# ruby - 什么是允许块处理可变数量参数的干净方法？

> ID：10181229
> 
> 赞同：4
> 
> 时间：2012-04-16T20:29:00.750
> 
> 标签：ruby, block, proc

我以前遇到过这种情况，有些事情告诉我我通常处理它的方式不是最干净或最惯用的。

假设我有一个接受一个块的函数，它又可以接受 1 个或 2 个（比如说）参数。

```
def with_arguments(&block)
  case block.arity
  when 1
    block.call("foo")
  when 2
    block.call("foo", "bar")
  end
end

with_arguments do |x|
  puts "Here's the argument I was given: #{x}"
end

with_arguments do |x, y|
  puts "Here are the arguments I was given: #{x}, #{y}"
end 
```

打开`arity`似乎很hacky。有没有更标准的 Ruby 方法来实现这种事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T20:49:09.620

这是我将任意参数传递给 a 的方式`lambda`：

```
def with_arguments(&block)
  args = %w(foo bar)
  n = block.arity
  block.call *(n < 0 ? args : args.take(n))
end

with_arguments &lambda { |foo| }
with_arguments &lambda { |foo, bar| }
with_arguments &lambda { |*args| }
with_arguments &lambda { |foo, *args| }
with_arguments &lambda { |foo, bar, *args| } 
```

如果`n`为负数，则`lambda`接受任意数量的参数。正是`(n + 1).abs`这些论点是强制性的。可以使用该信息来决定要传递哪些参数。

如果`lambda`接受有限数量的参数，则只需传递 的第一个`n`元素`args`。如果它需要任意数量的参数，则只需传递整个参数数组。

`lambda`自身会处理`args`不足的情况：

```
with_arguments &lambda { |foo, bar, baz, *args| }
# ArgumentError: wrong number of arguments (2 for 3) 
```

* * *

您可以简单地将两个参数传递给块：

```
def with_arguments(&block)
  block.call 'foo', 'bar'
end

with_arguments { |x| puts x }              # y is not used
with_arguments { |x, y| puts x, y }        # All arguments are used
with_arguments { |x, y, z| puts x, y, z }  # z will be nil 
```

未使用的块参数将被丢弃，任何额外的参数都将设置为`nil`.

[这是特定于常规块的，如果给定错误数量的参数，`Proc`s](http://www.ruby-doc.org/core-1.9.3/Proc.html#method-i-call) - `lambda`s 将引发错误。您实际上可以通过调用来确定是否是这种情况[`Proc#lambda?`](http://www.ruby-doc.org/core-1.9.3/Proc.html#method-i-lambda-3F)

此外，如果您不打算存储块，那么简单地使用`yield`：

```
def with_arguments
  yield 'foo', 'bar'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:37:36.277

一些解决方案...

*   总是传递 2 个参数，即使一个必须为 nil
*   只需传递一个数组，该数组可能包含更多或更少的元素。这种方式为您提供了两全其美：由于多重分配的工作方式，您可以省略或提供额外的块参数而不会发出警告

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T10:25:17.167

```
def bar(&block)
    puts 'In bar'
    block.call(1) if block
    puts 'Back in bar'
    block.call(1,2) if block
end

1.9.3p392 :043 > bar do |*b| puts b.length end
In bar
1
Back in bar
2 
```

# static - 来自二进制可执行文件的静态调用图

> ID：10181230
> 
> 赞同：3
> 
> 时间：2012-04-16T20:29:02.820
> 
> 标签：static, binary, executable, call-graph

我想知道是否有任何方法可以静态分析 linux 中的二进制文件，并获取所有潜在的调用流/控制流。

本质上类似于 LLVM 和类似编译器给出的静态分析（具有潜在的别名），但来自二进制文件......（即我不需要重新编译等）

谢谢

# jquery-ui - jQuery UI DropShadow - 如何在 div 周围放置阴影

> ID：10181232
> 
> 赞同：2
> 
> 时间：2012-04-16T20:29:08.990
> 
> 标签：jquery-ui

我需要知道如何在此链接中获得像日期选择器这样的阴影

[http://taitems.github.com/Aristo-jQuery-UI-Theme/](http://taitems.github.com/Aristo-jQuery-UI-Theme/)

我需要使用默认类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T20:30:37.907

使用 CSS：

```
.ui-datepicker {
-moz-box-shadow: 0 4px 8px rgba(0,0,0,0.5);
-webkit-box-shadow: 0 4px 8px rgba(0,0,0,0.5);
box-shadow: 0 4px 8px rgba(0,0,0,0.5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T19:48:32.317

确保如果您运行的是 ie9，则该兼容模式已关闭，否则您将看不到阴影。花了我一个小时。

# php - 为什么 PHP 5.3.10 (fcgi) 会卡在这条线上？

> ID：10181235
> 
> 赞同：-7
> 
> 时间：2012-04-16T20:29:17.680
> 
> 标签：php

为什么 PHP 5.3.10 (fcgi) 会卡在这条线上？

```
<? echo $dadosboleto["ponto_venda"]." <img src='imagens/b.png' width=10 height=1> ".$tmp2?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T00:04:00.830

您的代码以 开头`<?`，要使其正常工作，您需要[`short_tag_open`](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)设置为 1。否则，您需要使用`<?php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:45:21.977

并不是说这将是解决方案-因为确实可能涉及其他代码..但首先，我宁愿选择一种更简洁的方式来编写该行代码：

1) `<?PHP echo($dadosboleto['ponto_venda']." <img src='imagens/b.png' width='10' height='1'> ".$tmp2); ?>`

2) `<?PHP echo($dadosboleto['ponto_venda']); ?>> <img src='imagens/b.png' width='10' height='1'> <?PHP echo($tmp2); ?>`

..希望这指向某个方向..

ps：注意双（“）和单（'）不要混淆

# java - 如何在 Spring 3 中将 View 中的表单中的对象列表绑定到 Controller

> ID：10181236
> 
> 赞同：1
> 
> 时间：2012-04-16T20:29:18.633
> 
> 标签：java, spring, jsp, spring-3

我希望我能清楚地解释我自己，因为我刚刚从 Spring 开始。

假设我有以下 bean：

```
public class UserAnswer {
    private String answer;

    public UserAnswer() {
    }
    public String getAnswer() {
        return answer;
    }
    public void setAnswer(String answer) {
        this.answer = answer;
    } 
```

这是一个重定向到我的视图的控制器方法。请注意传递给模型的参数

```
@RequestMapping(value="/usuarios/cambiar_estado", method=RequestMethod.POST)
    public String bloquearDesbloquearUsuario(@RequestParam (value="usuarioPinIdHidden", required=false) String pinId, Model model){
        try{
            List<Question> questionList = servicioAcceso.getSecurityQuestionsByUser(Long.parseLong(pinId));
            model.addAttribute("userAnswer", new UserAnswer());
            model.addAttribute("questionList", questionList);           
        }catch(Exception e){
            e.printStackTrace();
        }
            return "login/pregunta_seguridad";              
    } 
```

这是呈现问题列表的视图 login/pregunta_seguridad.jsp。我需要将列表的每个元素绑定到 UserAnswer 类型的项目列表：

```
<c:url var="url" value="/usuarios/compare_answers"/>
<form:form modelAttribute="userAnswer" action="${url}" method="POST">
    <c:if test="${not empty answerList}">
        <table class="summary" style="border: none;">
            <c:forEach var="question" items="${questionList}">
                <tr>
                    <td colspan="2">${question.description}</td>
                </tr>
                <tr>
                    <form:input path="answer" id="answer"/> 
                </tr>       
            </c:forEach>
        </table>
    </c:if>
    <div class="span-3 last">
            <button type="submit">Confirm</button>
    </div>
</form:form> 
```

我需要一种获取 UserAnswer 列表的方法

```
@RequestMapping(value="/usuarios/compare_answers", method=RequestMethod.POST)
    public String compareAnswer(Model model, UserAnswer userAnswer){
        try{
            //this is where I should receive a list of UserAnswer
        }catch(Exception e){
            e.printStackTrace();
        }
        return null;
    } 
```

我怎么能在春天做这样的事情？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:11:40.370

我认为您不能直接将对象列表绑定到表单支持 bean，而是可以绑定包含此列表的父类，例如 UserForm 类包含 UserAnswer 列表并将 UserForm 绑定为表单支持 bean。

# java - 加载多个属性文件

> ID：10181239
> 
> 赞同：21
> 
> 时间：2012-04-16T20:29:24.633
> 
> 标签：java, properties-file

是否可以在 Java 中堆叠加载的属性？例如我可以这样做：

```
Properties properties = new Properties();

properties.load(new FileInputStream("file1.properties"));
properties.load(new FileInputStream("file2.properties")); 
```

并从两者访问属性？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-16T20:31:12.337

你可以这样做：

```
Properties properties = new Properties();

properties.load(new FileInputStream("file1.properties"));

Properties properties2 = new Properties();
properties2.load(new FileInputStream("file2.properties"));

properties.putAll(properties2); 
```

注意：维护的所有密钥都是唯一的。因此，稍后使用相同键加载的属性将被覆盖。只是为了你的参考:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T20:33:45.733

是的，属性堆栈。`Properties`扩展`Hashtable`并`load()`简单地调用`put()`每个键值对。

[来自Source](http://www.mavenjava.com/sun/jdk/1.6.0/src/java/util/Properties.java.html#Properties.load0%28java.util.Properties$LineReader%29)的相关代码：

```
String key = loadConvert(lr.lineBuf, 0, keyLen, convtBuf); 
String value = loadConvert(lr.lineBuf, valueStart, limit - valueStart, convtBuf); 
put(key, value); 
```

换句话说，从文件加载不会清除当前条目。但是，请注意，如果两个文件包含具有相同键的条目，则第一个将被覆盖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T20:35:02.753

其实，是。你可以这样做。如果任何属性重叠，则新加载的属性将取代旧的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T20:37:08.223

是的，您需要在构造函数中传递默认属性文件。像这样，您可以将它们链接起来。

例如：

```
Properties properties1 = new Properties();
try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream("file1.properties"))){
    properties1.load(bis);
}

Properties properties2 = new Properties(properties1);
try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream("file2.properties"))){
    properties2.load(bis);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-22T15:20:27.003

这也应该有效。如果在 file1.properties 和 file2.properties 中定义了相同的属性，则 file2.properties 中的属性将生效。

```
 Properties properties = new Properties();
    properties.load(new FileInputStream("file1.properties"));
    properties.load(new FileInputStream("file2.properties")); 
```

现在属性映射将具有来自两个文件的属性。如果相同的键出现在 file1 和 file2 中，则来自 file1 的键的值将在属性中更新为 file2 中的值，因为我先调用 file1 然后调用 file2。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-16T15:51:26.050

您可以更动态地执行此操作，使用不确定数量的文件。

此方法的参数应该是一个包含属性文件路径的列表。我将方法设为静态，将其放在具有其他消息处理相关功能的类中，并在需要时简单地调用它：

```
public static Properties loadPropertiesFiles(LinkedList<String> files) {
    try {
        Properties properties = new Properties();

                for(String f:files) {
                    Resource resource = new ClassPathResource( f );
                    Properties tempProp = PropertiesLoaderUtils.loadProperties(resource);
                    properties.putAll(tempProp);
                }
                return properties;
    }
    catch(IOException ioe) {
                return new Properties();
    }
} 
```

# ruby-on-rails - 如何使用 git 管理具有单独客户端资产的代码库？

> ID：10181241
> 
> 赞同：1
> 
> 时间：2012-04-16T20:29:44.857
> 
> 标签：ruby-on-rails, git, version-control

我有一个项目，其中包含一个核心 Ruby on Rails 项目，该项目将为几个不同的客户部署。我希望能够更新核心应用程序，同时维护视图和公用文件夹中的单独更改。

换句话说，我每次更改 app/controllers/product_controllers.rb 时都需要所有客户端都获得该更改，同时为 Acme 和 Newco 分别管理 app/view/products/index.html.erb 或 public/css/styles.css和琼斯等。

这似乎与分支/标签要解决的问题不同，因为这些文件夹中的更改永远不会被合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:39:52.863

我只会为每个客户端创建单独的分支，并在每次进行重大更改时合并需要合并的更改（在您的案例控制器中），并保留特定于给定客户端的文件。

您还可以将代码划分为模块（我不会建议具体的方式 - 这取决于您，并且每个项目都不同）并将它们作为不同的项目保存。

在类 unix 系统中，如果您有类似“应用程序核心”（每个项目共有的东西）之类的东西，您甚至可以将其保存在一个文件夹中并使用符号链接在不同的项目中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:38:56.767

您仍然可以为每个客户端使用一个分支。不必合并分支。或者你可以为每个客户分叉。它与分支的不同之处在于它创建了一个单独的 repo

# jpa - 使用 JPA 2 的正确方法

> ID：10181244
> 
> 赞同：1
> 
> 时间：2012-04-16T20:29:59.520
> 
> 标签：jpa, jpql

我[在 Nabble 看到了这个链接](http://old.nabble.com/JPA%3a-Cascade.REMOVE-not-working-for-unidirectional-OneToMany-Relationship-td18574083.html)，有人（James Sutherland）对某人说他们正在“执行删除所有 JPQL 查询。这基本上类似于执行您自己的 SQL，您负责正确执行查询以维护您的约束。

这不是在 JPA 中删除对象的常规方法。在 JPA 中，您通常读取对象，然后对其调用 remove()。”。

我想知道这是不是真的；基于删除不仅仅是简单表格的难度，我开始认为这是正确的。

到目前为止，我的想法是这样做：

1.  执行选择语句，无论它们多么具体（例如
    ，选择所有学生课程 > 4 且分数 >= 60 以及
    2011 年至 2012 年之间的学生注册）。
2.  显示/编辑/删除对象（因此 EntityManager 合并/持久/删除）
3.  冲洗、起泡等

作为一种假设如何使用 JPA 的方法，这听起来是否合理，还是我不在基地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:47:24.567

此处讨论了 remove 的级联：[Google App Engine - DELETE JPQL Query and Cascading](https://stackoverflow.com/questions/2995693)。此外，例如，当使用乐观锁定时，进行批量更新不会更新版本列。因此批量更新/删除在 JPA 中有点残缺。

但我不会说*这不是在 JPA 中删除对象的正常方法*。当我需要根据某些条件删除 2、20 或 200 个对象时，首先选择并获取它们只是为了调用`remove()`每个对象在大多数情况下都是一个坏主意。

在规范中存在所有批量更新/删除之后是有原因的。

# c# - 如何使用情节提要为 Stackpanel 的边距设置动画？

> ID：10181245
> 
> 赞同：2
> 
> 时间：2012-04-16T20:30:06.410
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我想使用它，但它不起作用，我想在代码后面创建一个平铺动画，或者如果你知道这个 gol 的项目，请写信给我

```
 Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {
                        while(true){
                        Duration duration = new Duration(TimeSpan.FromSeconds(0.15));

                        // Create two DoubleAnimations and set their properties.
                        DoubleAnimation myDoubleAnimation1 = new DoubleAnimation();

                        myDoubleAnimation1.Duration = duration;
                        myDoubleAnimation1.From = -173
                        myDoubleAnimation1.To = 173;
                        Storyboard sb = new Storyboard();
                        sb.Duration = duration;

                        sb.Children.Add(myDoubleAnimation1);

                        Storyboard.SetTarget(myDoubleAnimation1, image);

                        // Set the attached properties of Canvas.Left and Canvas.Top
                        // to be the target properties of the two respective DoubleAnimations.
                        Storyboard.SetTargetProperty(myDoubleAnimation1, new PropertyPath(StackPanel.MarginProperty));

                        // Begin the animation.
                        sb.Begin();}
                    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:45:02.007

使用 a[`ThicknessAnimation`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.thicknessanimation.aspx)而不是 a [`DoubleAnimation`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.doubleanimation.aspx)。这几乎是一样的。

**编辑：**

如果你想让Animation没完没了的使用[`Timeline.RepeatBehavior`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.repeatbehavior.aspx)。

```
myThicknessAnimation1.RepeatBehavior = RepeatBehavior.Forever; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-12T08:15:16.263

如果有人需要，这是工作示例：

```
//Animate margin for Label, named "label" from right to left. from 300 to 0.

var sb = new Storyboard();
var ta = new ThicknessAnimation();
ta.BeginTime = new TimeSpan(0);
ta.SetValue(Storyboard.TargetNameProperty, "label");
Storyboard.SetTargetProperty(ta, new PropertyPath(MarginProperty));

ta.From = new Thickness(300, 30, 0, 0);
ta.To = new Thickness(0, 30, 0, 0);
ta.Duration = new Duration(TimeSpan.FromSeconds(3));

sb.Children.Add(ta);
sb.Begin(this); 
```

# c# - C# String.Format 与 '{' 字符

> ID：10181253
> 
> 赞同：3
> 
> 时间：2012-04-16T20:30:52.010
> 
> 标签：c#

我们可以在包含“{”字符的字符串中执行 String.Format 吗？

例子：`String.Format("a{a}a {0} bbb {1}", "val1", "val2");`

a{a}a 应该被解释为字符串的一部分，而不是作为格式化程序......

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T20:31:58.647

是的。使用两个`{`s，像这样：

```
String.Format("a{{a}}a {0} bbb {1}", "val1", "val2"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T20:31:41.200

用途：`{{`。顺便说一句，这是可以从[文档](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)中回答的：

> 要在格式中指定单个文字大括号字符，请指定两个前导或尾随大括号字符；即“ `{{`”或“ `}}`”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T20:31:47.517

您应该使用 {{ 和 }} 转义 { 和 }

# objective-c - 使用 UIPanGestureRecognizer 拖动 + 旋转触摸下车

> ID：10181255
> 
> 赞同：6
> 
> 时间：2012-04-16T20:31:01.403
> 
> 标签：objective-c, ios, drag-and-drop, rotation, uigesturerecognizer

我正在使用 UIPanGestureRecognizer 进行一些拖动和旋转计算。旋转角度正确，拖动位置几乎正确。问题是当你绕过盒子的中心时，需要根据角度进行调整，我不知道怎么做。

我已经包含了 180 度旋转的图片，但是在旋转过程中手指在哪里。我只是不知道如何调整以使块适当地停留在您的手指上。这是一个视频，只是为了澄清，因为这是奇怪的行为。[http://tinypic.com/r/mhx6a1/5](http://tinypic.com/r/mhx6a1/5)

**编辑：**这是一个真实世界的视频，讲述了应该发生的事情。问题在于，在 iPad 视频中，您的手指正在移动，而在现实世界中，您的手指将固定在移动项目的特定位置。所需的数学运算是沿着与实际中心不同的角度调整您的触摸位置。我只是无法弄清楚数学。[http://tinypic.com/r/4vptnk/5](http://tinypic.com/r/4vptnk/5)

![第一枪](../Images/0f0beda6987c2638e8d031c6ef3fe44f.png)

![第二枪](../Images/c8df47e41b1dd773abf843bae7dcde10.png)

![第三枪](../Images/23b0033a52c33be7cced4366411d28a6.png)

**非常感谢！**

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    if (gesture.state == UIGestureRecognizerStateBegan) {
        // set original center so we know where to put it back if we have to.
        originalCenter = dragView.center;

    } else if (gesture.state == UIGestureRecognizerStateChanged) {
        [dragView setCenter:CGPointMake( originalCenter.x + [gesture translationInView:self.view].x , originalCenter.y + [gesture translationInView:self.view].y )];

        CGPoint p1 = button.center;
        CGPoint p2 = dragView.center;

        float adjacent = p2.x-p1.x;
        float opposite = p2.y-p1.y;

        float angle = atan2f(adjacent, opposite); 

        [dragView setTransform:CGAffineTransformMakeRotation(angle*-1)];

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T13:26:10.797

我终于解决了这个问题并让它完美运行。坚持是对的吗？？

这是解决方案的代码，并带有一些注释来解释更改。

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    if (gesture.state == UIGestureRecognizerStateBegan) {
        // Get the location of the touch in the view we're dragging.
        CGPoint location = [gesture locationInView:dragView];

        // Now to fix the rotation we set a new anchor point to where our finger touched. Remember AnchorPoints are 0.0 - 1.0 so we need to convert from points to that by dividing
        [dragView.layer setAnchorPoint:CGPointMake(location.x/dragView.frame.size.width, location.y/dragView.frame.size.height)];

    } else if (gesture.state == UIGestureRecognizerStateChanged) {
        // Calculate Our New Angle
        CGPoint p1 = button.center;
        CGPoint p2 = dragView.center;

        float adjacent = p2.x-p1.x;
        float opposite = p2.y-p1.y;

        float angle = atan2f(adjacent, opposite); 

        // Get the location of our touch, this time in the context of the superview.
        CGPoint location = [gesture locationInView:self.view];

        // Set the center to that exact point, We don't need complicated original point translations anymore because we have changed the anchor point.
        [dragView setCenter:CGPointMake(location.x, location.y)];

        // Rotate our view by the calculated angle around our new anchor point.
        [dragView setTransform:CGAffineTransformMakeRotation(angle*-1)];

    }
} 
```

希望我一个月以上的奋斗和解决方案能在未来帮助别人。快乐编码:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-20T07:38:18.873

基于触摸事件 [https://github.com/kirbyt/KTOneFingerRotationGestureRecognizer](https://github.com/kirbyt/KTOneFingerRotationGestureRecognizer)

帮助我解决了类似的问题

# sql - 如果插入的值等于原始值，SQL Server 触发器更新（col）真还是假？

> ID：10181268
> 
> 赞同：1
> 
> 时间：2012-04-16T20:32:00.957
> 
> 标签：sql, sql-server, tsql, triggers

鉴于这个简单的示例触发器：

```
CREATE TRIGGER example_update
ON example_table
FOR UPDATE
AS BEGIN
   if update(someColumn) begin
      update example_table SET last_update_date = GETDATE() WHERE id IN (SELECT id FROM inserted);
   end
END 
```

如果 someColumn 的旧值和 someColumn 的新值相等，update(someColumn) 返回 true 还是 false？例如，如果我运行这两个 SQL 语句：

```
UPDATE example_table SET someColumn=1;
UPDATE example_table SET someColumn=1; 
```

第二个语句会触发我的触发器中的 if 块吗？

另外，如果我执行此操作，我的假设是否正确：

```
UPDATE example_table SET otherColumn=1; 
```

然后我的触发器中的 update(someColumn) 将返回 false。

如果这是重复，我深表歉意：该函数被称为 update 的事实使我的搜索结果充满了更新语句（这与 update 函数非常不同），并且使我很难确定这种行为。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T20:34:26.940

该`UPDATE()`函数不区分值是否已更改，仅区分列已更新。为此，您应该比较`inserted`和`deleted`伪表中的值。

# mysql - 打包 MSSQL 数据库以供第 3 方使用的最佳（最安全意识）方式？

> ID：10181277
> 
> 赞同：2
> 
> 时间：2012-04-16T20:32:56.487
> 
> 标签：mysql, sql-server, database, sql-server-2005, mysqldump

有人要求我转储托管在 MS SQL Server 2005 上的整个数据库，其中包含多个表，以供第三方导入/使用。

*   我的第一个想法是找到类似 mysqld_dump 的东西，它会给他们导入命令，这会引导我找到带有模式和数据的“生成脚本”，这应该可以工作。
    *   此选项的一个问题是具有主/外键要求的数据，它创建的脚本是否牢记这一点，应该没问题吗？我现在正在进行测试导入以尝试验证这一点；以为我会提到它。

* * *

*   建议为了更快地解决问题，只需卸载数据库并给他们 MDF 文件。我不确定我是否喜欢这个想法，因为我对存储在此文件中的所有内容都不是很熟悉。这对我们的服务器有安全风险吗？此文件中是否存储了与我们的服务器特别相关的引用，可能会造成损害？

我主要关心的是这里的安全性，只要他们得到数据，每个人都会很高兴。

任何我没有想到的建议甚至更好的选择都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:48:53.310

为什么不将数据库备份和恢复到第三方有权访问的服务器上，或者为他们部署在服务器上并限制他们的访问权限，只授予他们运行脚本和其他基本权限的能力？

# java - JAX-WS：使用 NodeList 以便 Excel Web Services Toolkit 可以使用 Web 服务

> ID：10181278
> 
> 赞同：0
> 
> 时间：2012-04-16T20:32:57.733
> 
> 标签：java, web-services, jax-ws

我遇到了几个问题，假设 Excel 电子表格调用我在 JAX-WS 中创建的 Java Web 服务并取回结果。但是，不发送或接收返回 NodeList 存在一些问题。我不确定我需要如何更改我的网络服务来处理这个问题。

另一个问题是 MS Office 2003 Web Service Toolkit 将 Web 方法定义为子例程而不是函数。

我的 web 方法在端点接口中定义为：

```
@WebMethod
@WebResult(name="CreateWorkOrderItemResponse")
CreateWorkOrderItemResponse createWorkItems(@WebParam(name = "CreateWorkOrderItemRequest")CreateWorkOrderItemRequest request); 
```

CreateWorkOrderItemRequest**定义**为：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "authentication",
    "createData"
})
@XmlRootElement(name = "CreateWorkOrderItemRequest", namespace="")
public class CreateWorkOrderItemRequest {

    @XmlElement(name = "authentication", required = true)
    protected Authentication authentication = null;
    @XmlElement(name = "create_data", required = true)
    protected ArrayList<CreateWorkOrderItemData> createData = new ArrayList<CreateWorkOrderItemData>();

    public Authentication getAuthentication() {
        return authentication;
    }

    public void setAuthentication(Authentication authentication) {
        this.authentication = authentication;
    }

    public ArrayList<CreateWorkOrderItemData> getCreateData() {
        return createData;
    }

    public void setCreateData(ArrayList<CreateWorkOrderItemData> createData) {
        this.createData = createData;
    }
} 
```

CreateWorkOrderItemResponse**定义**为：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "submissionResponse",
    "errorList"
})
@XmlRootElement(name = "CreateWorkOrderItemResponse")
public class CreateWorkOrderItemResponse{

    @XmlElement(name = "submission_response", required = true)
    protected SubmissionResponse submissionResponse = new SubmissionResponse();

    @XmlElementWrapper(name="error_list") 
    @XmlElement(name="error", required = true, nillable = true)
    protected ArrayList<Error> errorList = new ArrayList<Error>();

    public SubmissionResponse getSubmissionResponse() {
        return submissionResponse;
    }

    public void setSubmissionResponse(SubmissionResponse submissionResponse) {
        this.submissionResponse = submissionResponse;
    }

    public ArrayList<Error> getErrorList() {
        return errorList;
    }

    public void addError(Error error) {
        errorList.add(error);
    }

    public void addErrors(ArrayList<Error> errors) {
        for (Error error : errors) {
            errorList.add(error);
        }
    }

    public void setErrorList(ArrayList<Error> errorList) {
        this.errorList = errorList;
    }
} 
```

Web Service Toolkit 的结果如下所示：

```
Public Sub wsm_createWorkItems() 
    '***************************************************************** 
    'Proxy subroutine created from http://localhost:8080/gbswebsvcs/seiwebsvcs?wsdl. 
    '***************************************************************** 
    'Error Trap 
        On Error GoTo wsm_createWorkItemsTrap 

        sc_SEIWebServiceImplServ.createWorkItems 
        Exit Sub 
wsm_createWorkItemsTrap: 
    SEIWebServiceImplServErrorHandler "wsm_createWorkItems" 
End Sub 
```

但显然它应该更像这样：

```
Public Function wsm_createWorkItems(ByVal any_CreateWorkOrderItemRequest As MSXML2.IXMLDOMNodeList) As MSXML2.IXMLDOMNodeList

    '***************************************************************** 
    'Proxy function created from http://localhost:8080/gbswebsvcs/seiwebsvcs?wsdl. 
    '"wsm_createWorkItems, any_CreateWorkOrderItemRequest" is defined as XML. See Complex Types: XML Variables in 
    'Microsoft Office 2003 Web Services Toolkit Help for details on implementing XML variables. 
    '***************************************************************** 
    'Error Trap 
        On Error GoTo wsm_createWorkItemsTrap 

        Set wsm_createWorkItems = sc_DataServicesServer.createWorkItems(any_CreateWorkOrderItemRequest) 
        Exit Function 
wsm_createWorkItemsTrap: 
    DataServicesServerErrorHandler "wsm_createWorkItems" 
End Function 
```

我如何做到这一点？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:06:57.093

我实际上想通了这一点。我无法像以前那样接近它。我必须添加一些新的注释，以及文件夹的重组。我需要添加 ObjectFactory、package-info 和其他一些东西来让它运行。话虽如此，我认为这更像是一个 JBoss 问题。

# javascript - 为什么这些 HTML5 图像渲染（或不渲染！）取决于我刷新的速度？

> ID：10181281
> 
> 赞同：1
> 
> 时间：2012-04-16T20:33:15.903
> 
> 标签：javascript, html

1.  使用 Firefox 10.0.2 从此项目中打开 Framework.html：[http](http://code.google.com/p/unitspeeds-vhh/) ://code.google.com/p/unitspeeds-vhh/ （编辑：我现在正在预加载图标。如果您愿意，请使用[此修订版](http://code.google.com/p/unitspeeds-vhh/source/detail?r=dc009f2a3fc691383466f2292670874dcd7b95e7)尝试调试原始问题。）
2.  按 F5 刷新。
3.  快速按 F5 几次。

**预期**：单元图标（代码中的 unitIconObj）应始终呈现。
**实际**：它们永远不会在第一页加载时呈现。首先 F5 通常会显示所有图标。一些非常快速的 F5 重复会导致大多数（但不是全部）图标显示。

我要解决的基本问题是第一次无法正确渲染图标，我认为这意味着我需要预加载图像。我一直在尝试几种不同的方法来做到这一点，但这种行为并不是严格可重现的，而且我认为我对刷新和缓存的了解还不够，无法自己解决这个问题。图标本身是非常小的图像文件，所以我很惊讶地发现这是一个问题。

非常抱歉混乱的代码和问题——我是菜鸟！任何的建议都受欢迎。

编辑：这是我加载图像文件并渲染它的部分：

```
for (var x = 0; x < sortedOutput.length; x++)
    {
        // Draw the unit icon 
        var unitIconObj = new Image();
        if (sortedOutput[x].Filename == "--") // I don't have real icons for a few units
        {
            unitIconObj.src = "Icons/Creep.jpg";    
        } else 
        {
            unitIconObj.src = "Icons/" + sortedOutput[x].Filename + ".jpg";
        }
        speedContext.drawImage(unitIconObj, ChartBuffer+textBlock+2+4*iconSpace, 50+(x*iconSpace), BarHeight, BarHeight);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:07:38.793

您是否尝试过更改此设置，以便它等待调用 drawImage 函数，直到图像上的 onload 事件触发。这将确保在任何其他魔法发生之前加载图像。

```
for (var x = 0; x < sortedOutput.length; x++)
    {
    var unitIconObj= new Image();  
    unitIconObj.onload = function(){  

          speedContext.drawImage(unitIconObj, ChartBuffer+textBlock+2+4*iconSpace, 50+(x*iconSpace), BarHeight, BarHeight);  

    };  
    if (sortedOutput[x].Filename == "--") // I don't have real icons for a few units
        {
            unitIconObj.src = "Icons/Creep.jpg";    
        } else 
        {
            unitIconObj.src = "Icons/" + sortedOutput[x].Filename + ".jpg";
        } 
   } 
```

在这里找到这个：[https ://developer.mozilla.org/en/Canvas_tutorial/Using_images](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)

# java - 文本填充表

> ID：10181284
> 
> 赞同：0
> 
> 时间：2012-04-16T20:33:22.183
> 
> 标签：java, itext

我需要在第一列中填写一个数字，在第二列中填写数组中的某些数据。

所以它看起来像：

1 | 数据1

2 | 数据2

3 | 数据3

添加此数据的最佳方法是什么。

通常你会做类似的事情：

```
 Table table = new Table(3); 
 table.setWidth(100);           
 table.setDefaultVerticalAlignment(Element.ALIGN_TOP);           
 table.setCellsFitPage(true);            
 table.setPadding(2);            
 table.setSpacing(0);              
 for (int i = 1; i <= 6; i++) {            
 Cell cell = new Cell("Data " + i);            
 table.addCell(cell); } 
```

然后你会得到类似的东西：

数据 1 | 数据 2 | 数据 3

数据 4 | 数据 5 | 资料 6

是否有特定的方法来填充选定的单元格或者我看错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:37:04.743

```
Table table = new Table( 2 ); // 2 is the number of columns

table.setWidth( 100 );
table.setDefaultVerticalAlignment( Element.ALIGN_TOP ) ;
table.setCellsFitPage( true );
table.setPadding( 2 );
table.setSpacing( 0 );

for ( int i = 1 ; i <= 3 ; i++ )
{
     Cell leftCell = new Cell( i );
     Cell rightCell = new Cell( "Data " + i );

     table.addCell( leftCell );
     table.addCell( rightCell );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:06:16.367

作为旁注：可以在不再支持的相当旧版本的 iText 中找到 Table 类。最新版本使用 PdfPTable。

我强烈建议您升级到更新的版本，以获得所有最新的功能、错误修复和安全修复。

# c# - 使用约束时 C# 嵌套泛型的处理方式不同

> ID：10181289
> 
> 赞同：3
> 
> 时间：2012-04-16T20:33:58.667
> 
> 标签：c#, generics

使用嵌套泛型时，直接使用时编译器会失败，但在使用约束时可以正确编译。

例子：

```
public static void Test1<V, E>(this Dictionary<V, E> dict)
    where V : IVertex
    where E : IEdge<V>
{}

public static void Test2(this Dictionary<IVertex, IEdge<IVertex>> dict){} 
```

上面的两个扩展方法表面上具有相同的签名，但如果我现在尝试运行以下代码：

```
var dict = new Dictionary<VertexInstance, EdgeInstance>();

dict.Test1();
dict.Test2(); 
```

编译器会在“Test2”上出错，说明它无法使用内联嵌套泛型转换为泛型形式。我个人觉得 for 的语法`Test2`更直观。

我最初将其发布为一个问题的答案，该问题询问了使用通用约束和直接使用接口之间的区别，但我很好奇为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T20:49:33.107

扩展我的评论：

这些扩展方法当然没有相同的签名。`Dictionary<IVertex, IEdge<IVertex>>`不一样`Dictionary<VertexInstance, EdgeInstance>`。@Payo 是正确的；这是一个方差问题。类不能是协变或逆变的。接口可以，但前提是它们被标记为它，并且 IDictionary 不能被标记，因为它不安全，所以更改为 IDictionary 在这里没有帮助。

考虑是否允许这样做。您的 Test2 实现可能如下所示：

```
public static void Test2(this Dictionary<IVertex, IEdge<IVertex>> dict)
{
    dict.Add(new EvilVertex(), new EvilEdge());
} 
```

EvilVertex 和 EvilEdge 可以实现正确的接口，但不能从 VertexInstance 和 EdgeInstance 继承。然后调用将在运行时失败。因此，对 Test2 的调用无法证明是安全的，因此编译器不允许这样做。

> 谢谢你的回答；但是，约束版本内部可能有相同的代码并且会有相同的问题，不是吗？

No! The constraints version could *not* have the same code inside, because you can't convert from `EvilVertex` to `V`, nor from `EvilEdge` to `E`. You *could* force a cast from the type to the type parameter, by casting first to `object`, but that would of course fail at run time.

> Also, why is variance controlled at that level?

Because one purpose of generics is to prove the code's type safety at compile time.

> Your dict.Add should have the compilation error not the extension method in my view.

As mentioned, the call to dict Add *is* a compiler error for the generic version. It *can't* be a compiler error for the interface version, because in the context of Test2, all you know is that you're converting EvilVertex to IVertex, which is perfectly legal.

# iphone - Localizable.strings 已损坏？

> ID：10181291
> 
> 赞同：29
> 
> 时间：2012-04-16T20:34:01.853
> 
> 标签：iphone, xcode, localization, internationalization

我正在尝试包括我的应用程序的国际化，并且仅出于测试目的，我在文件 Localizable.string 中添加了一个简单的行。

这是我的整个文件：

> "测试语言环境" = "测试语言环境"

当我尝试运行我的应用程序时，我收到了这个错误：

> Localizable.strings:0：错误：验证失败：数据已损坏，无法读取。

我尝试将“文本编码”更改为 UTF-16，但没有解决任何问题。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-16T20:51:51.830

如果这是您的整个文件，请在末尾添加分号。将其更改为：

> "测试语言环境" = "测试语言环境" **;**

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-09-04T10:51:30.330

要获取更多详细信息，您可以从命令行使用 Property List 实用程序：

```
plutil -lint <your_strings_file>.strings 
```

该 `-lint`开关用于检查语法。如果您遇到错误，您将获得行号和更多信息，以及如何解决问题的更好指导。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-05T01:20:13.600

您可以使用此脚本验证您的 Localizable.strings 文件：

[https://github.com/dcordero/Rubustrings](https://github.com/dcordero/Rubustrings)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-17T11:19:21.937

就我而言，它是这样的：

```
/* Comment for Very Long Sentence */
"Very Long Sentence Very Long Sentence Very Long Sentence Very Long Sentence " =;
"Very Long Sentence Very Long Sentence Very Long Sentence Very Long Sentence "; 
```

（注意第一行末尾的' **= ;** ' 而不是 ' **= '）**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-26T16:43:20.490

在我的例子中，它是字符串中的括号——我需要在 \" 之前添加斜杠。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-05T16:59:16.957

我制作了一个小脚本来使用 plutil 检查整个文件夹 .strings 文件。

[https://github.com/CarlesEstevadeordal/check_strings](https://github.com/CarlesEstevadeordal/check_strings)

# jquery - 将下拉列表值传递给 Grails 中的 jquery

> ID：10181292
> 
> 赞同：0
> 
> 时间：2012-04-16T20:34:17.933
> 
> 标签：jquery, html, grails, drop-down-menu

我正在修改注册表单，并希望使用 jQuery 来简化表单。

该站点的用户可以是任何一个`Teachers`，也可以是`Donors`两者。 `Teachers`有`Donors`不需要的字段，反之亦然。因此，我没有在表格中填满所有字段并通过询问他们的教学年级水平来混淆国际用户，而是实施了一个下拉列表，以便用户可以选择他们的角色，并且通过该`append()`方法可以看到唯一的必填字段。

这是我迄今为止构建的表格：

```
<g:formRemote name="register" url="[controller:'user', action:'register']" onSuccess="showFields()">
    <dl>
        <dt>User name</dt>
        <dd><g:textField name="username" value ="${user?.username }"/></dd>

        <dt>Password</dt>
        <dd><g:passwordField name="password" value = "${user?.password }"/></dd>

        <dt>Repeat Password</dt>
        <dd><g:passwordField name="passwordRepeat" value = "${user?.passwordRepeat }" /></dd>

        <dt>Account Type</dt>
        <dd>
            <g:select name="role" from="${['Teacher', 'Donor', 'Both'] }"/>
        </dd>
    </dl>

    <input type="submit" value="Register" />
</g:formRemote> 
```

脚本是

```
<script type="text/javascript">
    $('#role').change(function(){
        var user = $('#role option:selected').text();

        alert(user);

        if (user == 'Teacher'){

        } else if (user == 'Donor'){

        } else {

        }

    });
</script> 
```

使用萤火虫，我已经验证了选择列表有 id `role`，但该功能没有触发。事实上，它完全被忽略了，无论我做出什么选择。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:46:23.677

问题是脚本是在 DOM 加载之前执行的。因此，当您尝试绑定事件处理程序时，该元素不存在。

所以你要做的就是将完整的函数包装在文档就绪事件中，它会在加载完整的 DOM 后尝试绑定更改事件处理程序。

```
$(document).ready(function (){
    $('#role').change(function(){
        var user = $('#role option:selected').text();

        alert(user);

        if (user == 'Teacher'){

        } else if (user == 'Donor'){

        } else {

        }
    });
}); 
```

或者您可以简单地在页面底部添加脚本。不推荐，但仅供参考...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:35:59.140

你需要做：

```
$("[name='role']").change(function () { 
```

您正在使用 id 属性选择`#name`，使用上面的代码您正在选择具有角色名称属性的元素。

# c# - 为 WPF 项选择布局控件

> ID：10181299
> 
> 赞同：0
> 
> 时间：2012-04-16T20:34:39.603
> 
> 标签：c#, wpf, winforms, wpf-controls

我正在尝试学习 WPF。虽然，我在布局和选择哪一个方面遇到了麻烦。我不想使用画布，因为重点是掌握 WPF 的窍门..

我决定将我的一个简单程序（在 Windows 窗体中）转移到 WPF..

我附上了简单的 1 页表单的图片。有人可以建议我如何在 WPF 中复制它吗？

![在此处输入图像描述](../Images/29a37bec379d48b314178f6e7ae42e80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:50:20.780

表单布局是一个有趣的困境。它们通常涉及大量样板代码，有许多技术可以在表单布局中删除样板代码，但它们是相当先进的 WPF 概念。

对您来说最简单的解决方案将是`StackPanel`布置您的部分并`Grid`在您的`GroupBox`控件中放置一个。

网格可以设置为 4 列：

1.  第 1 列标签
2.  Col 1 身体
3.  Col 2 标签
4.  Col 2 身体

使用堆栈面板资源中的全局样式，您可以定义默认视觉行为，这样项目最终不会接触：

```
<Style TargetType="TextBox">
  <Setter Property="Margin" "0,0,5,5" />
</Style> 
```

`TextBox`上面的样式将在可视树中所有控件的右侧和底部放置一个 5px 的边距。

这是在 WPF 中制作此 ui 的最简单（阅读：直截了当）的方法。它绝不是最好的，也不是最可维护的，但它应该可以在最多 10 分钟内完成。

还有其他方法可以使用 WPF 模拟表单布局，[例如这种](http://www.nbdtech.com/Blog/archive/2010/07/27/easy-form-layout-in-wpf-part-1-ndash-introducing-formpanel.aspx)方法或使用基本布局组件的其他组合。

例如：

```
<StackPanel>
  <!-- Vertical Stack Panel, Stacks Elements on top of each other -->
  <StackPanel Orientation="Horizontal">
    <!-- Horizontal Stack Panel, Stacks Elements left to right -->
    <Label Width="100">This Label is 100units Wide</Label>
    <TextBox />
  </StackPanel>
</StackPanel> 
```

不同的方法有不同的缺点，有些是 flex 宽度，有些不是，有些可以很好地使用列，有些则不能。我建议尝试使用 的许多子类，`Panel`看看它们都做了什么，或者你甚至可以[推出自己的](http://www.wpftutorial.net/CustomLayoutPanel.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:47:07.703

使用[Grid](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)作为容器，[TextBlock](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx) al 只读文本，[Textbox](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)作为可编辑文本和[Button](http://msdn.microsoft.com/en-us/library/system.windows.controls.button.aspx)。

使用这些元素并使用（例如）XAML：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
x:Class="MainWindow"
Width="640" Height="480" Background="White">

<Grid>
    <TextBlock HorizontalAlignment="Left" Height="20" Margin="34,30,0,0" 
        TextWrapping="Wrap" Text="Connection String" VerticalAlignment="Top" 
        Width="107" Foreground="Black"/>

    <TextBox HorizontalAlignment="Left" Height="18" Margin="170,32,0,0" 
        TextWrapping="Wrap" VerticalAlignment="Top" Width="379"/>

    <Button Content="Save" HorizontalAlignment="Left" Height="26" 
        Margin="529,387,0,0" VerticalAlignment="Top" Width="69"/>        
</Grid> 
```

您可以将所有对象放在[Window](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)中。但是，如果您愿意，可以以编程方式添加元素。这是结果： ![WPF 布局](../Images/7a372fab7ada40564c6a790cbdc55d86.png)

[这里](http://msdn.microsoft.com/en-us/library/aa970268(v=VS.90).aspx#Layout)介绍一下WPF布局。

# spring - 使用模板创建简单的 Spring Hibernate 实用程序项目：app-context 文件错误

> ID：10181300
> 
> 赞同：0
> 
> 时间：2012-04-16T20:34:41.233
> 
> 标签：spring, hibernate, sts-springsourcetoolsuite

我从 Spring 开始，我刚刚安装了 SpringSource Tool Suite。我正在尝试使用 Spring Template Project 创建一个新项目。我选择了 Simple Spring Hibernate Utility Project 选项。我创建的项目有错误。

src/main/resources/META-INF/spring 中的 app-context.xml 和 src/test/resources 中的 OrderPersistenceTests-context.xml 无效。

如果我在 src/test/java avec **Junit**中运行 OrderPersistenceTests.java ，则三个函数 testSaveAndFind()、testSaveAndGet()、testSaveOrderWithItems() 出错。

这是我得到的错误：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [com/monprojet/springhibernatedemo/OrderPersistenceTests-context.xml]; nested exception is java.lang.IllegalStateException: Unable to load schema mappings from location [META-INF/spring.schemas]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:81)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 24 more
Caused by: java.lang.IllegalStateException: Unable to load schema mappings from location [META-INF/spring.schemas]
    at org.springframework.beans.factory.xml.PluggableSchemaResolver.getSchemaMappings(PluggableSchemaResolver.java:153)
    at org.springframework.beans.factory.xml.PluggableSchemaResolver.resolveEntity(PluggableSchemaResolver.java:110)
    at org.springframework.beans.factory.xml.DelegatingEntityResolver.resolveEntity(DelegatingEntityResolver.java:85)
    at org.springframework.beans.factory.xml.ResourceEntityResolver.resolveEntity(ResourceEntityResolver.java:74)
    at com.sun.org.apache.xerces.internal.util.EntityResolverWrapper.resolveEntity(EntityResolverWrapper.java:107)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.resolveEntity(XMLEntityManager.java:1100)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.resolveDocument(XMLSchemaLoader.java:595)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2432)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1782)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 34 more
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1200(ZipFile.java:31)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459)
    at java.util.zip.ZipFile$1.fill(ZipFile.java:242)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)
    at java.io.FilterInputStream.read(FilterInputStream.java:116)
    at java.io.FilterInputStream.read(FilterInputStream.java:90)
    at java.util.Properties$LineReader.readLine(Properties.java:418)
    at java.util.Properties.load0(Properties.java:337)
    at java.util.Properties.load(Properties.java:325)
    at org.springframework.core.io.support.PropertiesLoaderUtils.loadAllProperties(PropertiesLoaderUtils.java:111)
    at org.springframework.beans.factory.xml.PluggableSchemaResolver.getSchemaMappings(PluggableSchemaResolver.java:144)
    ... 57 more 
```

这是我的配置文件的副本：

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <jdbc:embedded-database id="dataSource" type="H2"/>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <context:component-scan base-package="com.takealook.springhibernatedemo" />

</beans> 
```

**OrderPersistenceTests-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <import resource="classpath:/META-INF/spring/app-context.xml" />

</beans> 
```

有人可以帮助我吗？

感谢帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:01:46.473

那 spring.schemas 是什么？那是一个xml吗？如果是这样，请检查它是否在类路径中并且 xml 格式正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:57:48.647

## **如果您使用的是 Maven**，请从您的用户目录中清除 .m2 文件夹，构建项目，这应该会有所帮助。

希望有帮助，干杯，wajid

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:47:41.773

检查并确保包含 spring.schemas 的文件夹位于您的类路径中。您可能必须通过项目属性添加另一个源文件夹才能将其放在构建的类路径中。

# c# - 文字值（双精度类型）的奇怪、意外变化

> ID：10181308
> 
> 赞同：0
> 
> 时间：2012-04-16T20:35:18.150
> 
> 标签：c#, visual-studio-2010, double, constants

我觉得这里有一个简单的解决方案，但我似乎无法找到它。我有一个常量字面量 0.05。在我的程序的整个执行过程中，我发现双常量不被视为 0.05，而是被视为 0.049999...等。

为什么会发生这种情况，我该如何预防？

在此先感谢您的帮助！

-马特

PS - 我会发布快照以提供更多信息，但显然我不能因为我是新用户......老鼠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:53:07.097

0.05 没有二进制表示，因为 1/20 不是 2 的幂，所以浮点（双精度）表示只是近似它。另一方面，0.5 可以精确表示。

如果 v 是你的文字，那么 (v == 0.05) 应该是 'true'

# c# - 网络上有任何可用的开源文件查看器吗？

> ID：10181312
> 
> 赞同：-4
> 
> 时间：2012-04-16T20:35:29.040
> 
> 标签：c#, java, viewer

你们中的任何人都知道是否有 Java 或 C# 中的开源库可以查看 Quick View Plus 或 Oracle Outside-In Viewer 等文件？我目前正在做一个项目，我用 Lucene 和 Tika 索引了很多文档，但我想以原生形式显示文档。我不喜欢使用本地安装的程序，例如 Word of Acrobat 阅读器。

Thnx 先进！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:46:32.740

C＃

Log2Console 是一个开发工具，它提供了一个漂亮的 UI 来显示、过滤和搜索来自不同日志服务的日志消息：Log4Net、Log4j 和 NLog。它可以直接在本地或远程接收日志事件，也可以从日志文件中读取它们......它是用C#编写的。

[http://log2console.codeplex.com/](http://log2console.codeplex.com/)

爪哇

Chainsaw v2 是由 Log4j 开发社区成员编写的 Log4j 的配套应用程序。与许多开源项目一样，这个新版本建立在他人的灵感、想法和创作之上。Chainsaw v2 源于 Oliver Burn 编写的原始 Chainsaw 实用程序，灵感来自 ThoughtWorks Inc. 提供的 Log Factor 5 实用程序。

[http://logging.apache.org/chainsaw/index.html](http://logging.apache.org/chainsaw/index.html)

Java 和 C#

TraceTool：AC#、C++、Delphi、ActiveX 和 Java 跟踪框架和跟踪查看器：Tail、outputDebugString、事件日志，并支持 Log4J、Log4Net 和 Microsoft Enterprise Instrumentation Framework (EIF)。这也完全支持Pocket PC 开发（C++ 和DotNet）。

[http://tracetool.sourceforge.net/](http://tracetool.sourceforge.net/)

# ssas - 每列限制 20 亿个不同的值

> ID：10181316
> 
> 赞同：1
> 
> 时间：2012-04-16T20:36:01.030
> 
> 标签：ssas, sql-server-2012

根据[此链接](http://msdn.microsoft.com/en-us/library/bb522628.aspx)，SSAS 表格模型中的列限制为 20 亿个 DISTINCT 值。这是否适用于分区？

例如，假设我有一个包含 40 亿条记录的事实表和一个包含 1 到 4,000,000,000 值的 PK 列。根据上面的链接，我假设处理一旦达到限制就会失败。那么我可以对表进行分区并在分区级别应用 20 亿不同的限制吗？

此外，此限制是否适用于 DirectQuery 分区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T23:09:38.063

是的，一旦超过 2B 个不同的值，处理就会失败。解决此问题的一种方法是创建两个单独的表，然后使用 DAX 将它们合并在一起。

# android - 异步任务，BufferedReader

> ID：10181320
> 
> 赞同：0
> 
> 时间：2012-04-16T20:36:32.697
> 
> 标签：android, bufferedreader

我有一个 BufferedReader，当我尝试阅读它时，它只是挂起并且什么都不做，我这样做对吗？我在 AsyncTask 中使用它。

*   **编辑：**我有一个连接到 Wi-Fi 的平板电脑，它连接到我的计算机，它在端口 5334 上的 172.20.104.203 上广播，我可以看到线程何时启动，但之后什么也没有。

这是我的代码：

> ```
> try {
>        final BufferedReader in = new BufferedReader(
>        new InputStreamReader(socket.getInputStream()));       
>        String line = null;
>        while ((line = in.readLine()) != null) {
>           final String msg;
>           msg = (line);
>           Log.d("DeviceActivity", msg);
>        }
>     } catch (Exception e) {
>         e.printStackTrace();
>         Log.e("ClientAcivtity: Exception",
>         String.valueOf(e));
>     } 
> ```

*   **编辑** 我拥有所有正确的权限或任何东西，我在 AsyncTask 之外执行此操作，它运行良好，移动它是因为我不希望它在主线程中。

-**编辑**，这是完整的代码。

```
public class NetworkTask extends AsyncTask<Void, byte[], Boolean> {
        Socket nsocket; // Network Socket
        InputStream nis; // Network Input Stream
        OutputStream nos; // Network Output Stream
        private Handler handler = new Handler();

        Boolean connected = false;

        public static final int PORT = 5334;
        public String SERVERIP = "172.20.104.203";

        Socket socket;

        @Override
        protected void onPreExecute() {
            Log.i("AsyncTask", "onPreExecute");
            InetAddress serverAddr;
            try {
                serverAddr = InetAddress.getByName(SERVERIP);
                socket = new Socket(serverAddr, PORT);
                connected = true;
            } catch (UnknownHostException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.e("ClientAcivtity: Exception", String.valueOf(e));
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.e("ClientAcivtity: Exception", String.valueOf(e));
            }
        }

        @Override
        protected Boolean doInBackground(Void... params) { // This runs on a
                                                            // different thread
            boolean result = false;

            try {

                Log.d("ClientActivity", "C: Connecting...");
                if (socket != null) {
                    int cont = 1;
                    while (cont == 1) {
                        try {
                            Log.d("ClientActivity", "C: Sending command.");
                            PrintWriter out = new PrintWriter(
                                    new BufferedWriter(new OutputStreamWriter(
                                            socket.getOutputStream())), true);
                            // where you issue the commands
                            out.println("getPos");
                            Log.d("ClientActivity", "C: Sent " + "getPos");

                        } catch (Exception e) {
                            Log.e("ClientAcivtity: Exception",
                                    String.valueOf(e));
                        }
                        try {
                            final BufferedReader in = new BufferedReader(
                                    new InputStreamReader(
                                            socket.getInputStream()));
                            String line = null;
                            while ((line = in.readLine()) != null) {
                                final String msg;
                                msg = (line);
                                Log.d("DeviceActivity", msg);
                            }
                        } catch (Exception e) {
                            e.printStackTrace();
                            Log.e("ClientAcivtity: Exception",
                                    String.valueOf(e));
                        }
                        cont--;
                    }

                    Log.d("ClientActivity", "C: Closed.");
                }
            } catch (Exception e) {
                Log.e("ClientAcivtity: Exception", String.valueOf(e));
            }

            return result;
        }

        @Override
        protected void onProgressUpdate(byte[]... values) {
            if (values.length > 0) {
                Log.i("AsyncTask", "onProgressUpdate: " + values[0].length
                        + " bytes received.");
            }
        }

        @Override
        protected void onCancelled() {
            Log.i("AsyncTask", "Cancelled.");
        }

        @Override
        protected void onPostExecute(Boolean result) {
            if (socket != null) {
                if (connected) {
                    if (result) {
                        Log.i("AsyncTask",
                                "onPostExecute: Completed with an Error.");
                        try {
                            socket.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    } else {
                        Log.i("AsyncTask", "onPostExecute: Completed.");
                        try {
                            socket.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:52:45.660

尝试这样做：

```
final BufferedReader in = new BufferedReader(new InputStreamReader(
                                                    socket.getInputStream()));
StringBuffer buf = new StringBuffer();
int i;
while((i = in.read()) != -1){
    buf.append((char) i);
}

String data = buf.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:57:09.943

从套接字读取是一个相当困难的问题，具体取决于套接字实际连接到的位置以及另一端如何响应。

如果另一端的速度非常快，它可以为套接字提供足够的数据，以便读取例程实际上可以正常工作。但是，如果另一端有任何类型的延迟（只需要比您的读取例程慢，包括小的默认超时），那么即使另一端可能有数据，您的读取也会失败 - 只是到达有点太慢了在插座上。

根据您的需要，您可以将自己的最小和最大计时器包装在读取例程中。

请提供更多信息，我们可以更好地理解这个问题。

在许多情况下，需要有一个足够大的最小超时时间，以便另一方将数据推送到套接字——但您可能还需要一个最大时间来确定您实际希望等待数据到达的时间。

更新：

首先是runnable来启动监控线程。如果需要，您可以`monitoringCanRun`在循环中使用来中断线程。并且`monitoringThreadIsAlive`可以用来知道线程是否还在运行。

```
 monitoringCanRun = true;
    new Thread(new Runnable() {
    public void run() {
        monitoringThreadIsAlive = true;
        performMonitoring();
        monitoringThreadIsAlive = false;
    }
    }).start();
} 
```

和 performMonitoring 看起来像：

```
 public void performMonitoring() {
while (monitoringCanRun) {
   ... do your read in the while loop
    ...you might like to insert some delay before trying again...
    try { //we delay every partial read so we are not too fast for the other side
    Thread.sleep(100);
    } catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:36:53.537

我的*猜测*是，当您写出命令“getPos”时，底层 BufferedWriter 实际上并没有在线发送数据（您应该使用 tcpdump/wireshark 验证这一点）。如果是这种情况，服务器不会响应 readLine()，因为它从未收到命令。要验证此声明，请在`out.flush();`之后添加`out.println("getPos");`

真的，tcpdump 可能会给你一个比论坛上任何人更好的答案。

另请参阅[http://developer.android.com/reference/java/io/BufferedWriter.html](http://developer.android.com/reference/java/io/BufferedWriter.html)

# asp.net - NHibernate 配置错误 - 连接字符串？

> ID：10181322
> 
> 赞同：1
> 
> 时间：2012-04-16T20:36:52.753
> 
> 标签：asp.net, sql, nhibernate

我收到此错误：

------ 测试开始：程序集：ECEHire.Test.dll ------

测试'ECEHire.Test.Tests.GenerateSchema_Fixture.Can_generate_schema'失败：NHibernate.HibernateException：初始化字符串的格式不符合从索引49开始的规范。----> System.ArgumentException：初始化字符串的格式不符合从索引 49 开始的规范。在 NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action `1 scriptAction, Boolean export, Boolean justDrop) at NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Boolean script, Boolean export, Boolean justDrop) GenerateSchema_Fixture.vb(18,0): at ECEHire.Test.Tests.GenerateSchema_Fixture.Can_generate_schema() --ArgumentException at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue) at System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey) at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules) at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) at System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value) at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) at NHibernate.Connection.DriverConnectionProvider.GetConnection() at NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean export, Boolean justDrop)

0 次通过，1 次失败，0 次跳过，耗时 3.23 秒（NUnit 2.5.10）。

当我尝试测试我的 NHibernate 配置文件时。

配置文件是：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    <property name="dialect">NHibernate.Dialect.MsSql2005Dialect</property>
    <property name="connection.connection_string">Data Source=MyServerName;initial catalog=MyDatabaseName;Integrated Security=SSPI</property>
    <property name="connection.isolation">ReadCommitted</property>
    <property name="proxyfactory.factory_class">NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu</property>
  </session-factory>
</hibernate-configuration> 
```

我正在运行的测试是：

```
<Test()> _
Public Sub Can_generate_schema()

    Dim cfg = New Configuration()
    cfg.Configure()
    cfg.AddAssembly(GetType(Question).Assembly)
    Dim exp As NHibernate.Tool.hbm2ddl.SchemaExport = New NHibernate.Tool.hbm2ddl.SchemaExport(cfg)
    exp.Execute(False, True, False)

End Sub 
```

我相信这是一个连接字符串错误，但连接字符串是 web.config 文件的一部分，用于通过 ADO 查询数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:50:00.957

A few things to try:-

1.  Could it be something as simple as adding a ; (semi colon) e.g. `Integrated Security=SSPI;`
2.  Or try changing to `Integrated Security=True;`
3.  Or drop `connection.connection_string` and use `connection.connection_string_name`

In web.config

```
<connectionStrings>
  <add name="db" connectionString="Data Source=MyServerName;initial catalog=MyDatabaseName;Integrated Security=SSPI;"/>
</connectionStrings>

<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    ...
    <property name="connection.connection_string_name">db</property>
    ...
  </session-factory>
</hibernate-configuration> 
```

**Edit** The next thing to try is to make sure that the configuration file is being used in your test so try this:-

```
cfg.Configure(@"c:\hibernate.cfg.xml"); 
```

Making sure that the path IS totally correct, If this fails then put a break point at this line:-

```
cfg.AddAssembly(GetType(Question).Assembly) 
```

and then add this watch `cfg.Properties` and make sure that the connection string is present as a key value pair

**Edit2** For unit testing you would need to copy local true and get path from executing assembly OR create an app.config and use:-

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="hibernate-configuration"
      type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property ../>
    </session-factory>
  </hibernate-configuration>
</configuration> 
```

For a web site you could do:-

```
cfg.Configure(HttpContext.Current.Server.MapPath("~/hibernate.cfg.xml")); 
```

To be honest there are lots of options and this is really another question!

# c# - 验证单选框

> ID：10181325
> 
> 赞同：0
> 
> 时间：2012-04-16T20:37:08.603
> 
> 标签：c#

我只是想检查三个单选框之一是否已被选中，出于某种原因，即使在调试控制台中所有框 '.Selected = false' 它仍然跳过我的错误消息。任何帮助表示赞赏。

```
 if ((rdoIndoor.Checked = false ) && ( rdoOut.Checked = false ) && ( rdoSwimming.Checked = false ))
        {
            MessageBox.Show("Please select an event style");

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:39:01.757

您正在使用赋值运算符而不是比较运算符。`=`运算符用于赋值。用于`==`比较。

更好的是，完全摆脱您的`==`运算符，并使用`!`运算符，如下所示：

```
if ( !rdoIndoor.Checked && !rdoOut.Checked && !rdoSwimming.Checked )
{
    MessageBox.Show( "Please select an event style" );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:39:30.150

用于比较值的相等运算符是`==` 所以你的代码应该是：

```
if ((rdoIndoor.Checked == false ) && 
    ( rdoOut.Checked == false ) && 
    ( rdoSwimming.Checked == false )) 
...... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:43:02.037

使用双等号`(rdoIndoor.Checked **==** false)`等 单个“=”表示赋值，即从现在开始让“rdoIndoor.Checked”为假。双 '==' 是逻辑测试。你可能知道；）

# javascript - 显示最高等级的变量

> ID：10181327
> 
> 赞同：-4
> 
> 时间：2012-04-16T20:37:24.630
> 
> 标签：javascript

我怎样才能`var output`显示`var one OR two OR three Or four` 取决于排名顺序（最高“一”最低“四”），不包括未定义。例如

```
var one = //undefined
var two = "yes121";
var three = "no";
var four = "yes";
var output = // should be "yes121" as `var two` has the higest rank that is not undefined. 
```

我的输出为 var output = 一 + 二 + 三 + 四；但出于显而易见的原因，这对于我所要求的而言是不必要的。

## 阐明

如果我有四个变量“一”“二”“三”和“四”，我怎样才能将输出变量设置为排名最高的变量，即“一”（最低的是“四”），不包括排名较低的变量未定义的变量和排名较高的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:41:14.913

使用`||`运算符。它将返回最左边的非假值，例如表达式

```
var output = one || two || three || four; 
```

将返回`"yes121"`。但是 non-falsy 意味着空字符串也将是 false；要检查`undefined`你真的必须遍历一个值数组：

```
var vals = [undefined, "yes121", "no", "yes"];
var output = vals.reduce(function(a, b) {
    return (typeof a == "undefined") ? b : a;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:45:30.427

我对您的理解是否正确：您想返回 NAME 最接近零的变量，而忽略未定义 VALUE 的变量？

唯一的方法是一一测试它们是否未定义：

```
var one = //undefined
var two = "yes121";
var three = "no";
var four = "yes";
var output;

if (one !=== undefined) output = one;
else if (two !=== undefined) output = two;
else if (three !=== undefined) output = three;
else if (four !=== undefined) output = four; 
```

或者你可以这样做：

```
var output = one || two || three || four; 
```

但是，这可能会导致虚假表达式出现问题。（如 ''、0、-1、NaN 等）

但是：我认为你应该怎么做它创建一个数组，所以你可以遍历它：

# php - 用php和zend裁剪后如何重新保存图像？

> ID：10181332
> 
> 赞同：0
> 
> 时间：2012-04-16T20:37:40.350
> 
> 标签：php, zend-framework, image-processing, crop

我有一个功能可以将我的图片保存到磁盘：

```
public function uploadToDiskMulty($folderPath, $filename)
{
    // create the transfer adapter
    // note that setDestiation is deprecated, instead use the Rename filter
    $adapter = new Zend_File_Transfer_Adapter_Http();
    $adapter->addFilter('Rename', array(
            'target'    => $filename,
            'overwrite' => true
    ));

    // try to receive one file
    if ($adapter->receive($folderPath)) {
        $message = "success";
    } else {
        $message = "fail";
    }

    return $message;
 } 
```

然后我有一个裁剪图像的功能

```
public function uploadCroppedImage($image, $x, $y, $w, $h)
{
    $targ_w = 200;
    $targ_h = 300;
    $jpeg_quality = 90;

    $img_r = imagecreatefromstring(file_get_contents($image));
    $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

    imagecopyresampled($dst_r, $img_r, 0, 0, $x, $y, $targ_w, $targ_h, $w, $h);
} 
```

这`$image = http://test.com/test_folder/example.jpg`

这`$folderPath = /var/www/media/test_folder/`

和`$filename = example.jpg`

我的问题是我需要裁剪的图像路径，以便我可以通过该`uploadToDiskMulty`功能运行它。

`imagecopyresampled`返回真或假。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:39:31.770

您可以使用[`imagejpeg()`](http://php.net/manual/en/function.imagejpeg.php), 或您需要的等效类型输出它。

```
imagejpeg($dst_r, 'somepath/someimg.jpg'); 
```

# python - Django：使用条件对外键进行分组和排序

> ID：10181337
> 
> 赞同：3
> 
> 时间：2012-04-16T20:38:07.020
> 
> 标签：python, sql, django

我有一些记录人们聆听习惯的 Django 模型（有点像 Last.fm），如下所示：

```
class Artist(models.Model):
    name = models.CharField()

class Song(models.Model):
    artist = models.ForeignKey(Artist)
    title = models.CharField()

class SongPlay(models.Model):
    song = models.ForeignKey(Song)
    user = models.ForeignKey(User)
    time = models.DateTimeField()

class User(models.Model):
    # doesn't really matter! 
```

我想要一个用户页面，我可以在其中显示他们在过去一个月里听过的热门歌曲。最好的方法是什么？

到目前为止，我想出的最好的是：

```
SongPlay.past_month
    .filter(user=user)
    .values('song__title', 'song__id', 'song__artist__name')
    .annotate(plays=Count('song'))
    .order_by('-plays')[:20] 
```

上图`past_month`是一位仅过滤上个月比赛的经理。假设我们也已经有了正确`user`的过滤对象。

我想我的两个问题是：

*   **如何访问原始对象和`plays`注释？**
    根据我传递给的内容，这只是给了我某些值`values`。我更愿意访问原始对象——模型有我想调用的方法。

*   **我如何分组 from `SongPlay`to `Artist`？** 我想展示一张艺术家图表，以及一张歌曲图表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:04:12.527

`values`您可以在和中使用相同的字段`annotate`。

你有`Song`对象的主键（你可以只使用`song`而不是`song__id`），所以使用

```
Song.objects.get(id=...) 
```

对于第二个问题，使用和`song__artist`中的字段进行单独查询：`values``annotate`

```
from django.db.models import Count

SongPlay.past_month
    .filter(user=user)
    .values('song__artist')
    .annotate(plays=Count('song__artist'))
    .order_by('-plays')[:20] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:02:54.610

agf 已经向您展示了如何按 song_artist 分组。为了得到实际的 Song 对象，我将其存储在 memcached 中，或者如果您调用的方法相当简单，则将其设为静态方法或类方法。您还可以使用查询中的数据初始化 Song 对象，而不是实际保存它以访问此方法。可能有助于了解您要从 Song 对象调用的方法的详细信息。

# ssrs-2008 - SSRS 2008 R2 创建/修改角色

> ID：10181338
> 
> 赞同：3
> 
> 时间：2012-04-16T20:38:12.060
> 
> 标签：ssrs-2008, reporting-services

我正在运行 Reporting Services 2008 R2 的一个实例，并且想要自定义浏览器角色。默认情况下，该角色可以查看文件夹、报告和订阅报告。我想删除浏览器角色中的用户订阅报告的能力。

请让我知道是否可以进行此角色修改。如果没有，有没有办法创建一个只能查看文件夹和报告的新角色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:26:42.140

您可以轻松完成此操作，但实现此功能的路径有点不寻常。要像这样更改安全性，您需要使用 SQL Server Management Studio 连接到 SSRS： 服务器类型：Reporting Services 服务器名称：[http://servername/reportserver](http://servername/reportserver)

连接后，您可以展开 Security 文件夹，然后展开 Roles 文件夹以显示您的角色。双击“浏览器”以获取一个应该直截了当的属性窗口。您要取消选择的任务是“管理个人订阅”。

# c# - FormView 中具有公共属性的用户控件

> ID：10181343
> 
> 赞同：1
> 
> 时间：2012-04-16T20:38:49.840
> 
> 标签：c#, asp.net, formview, webusercontrol

我已将用户控件添加到表单视图项模板中，但已将公共属性添加到用户控件中，但我似乎无法弄清楚如何设置该属性。我尝试了以下方法：

```
<uc1:OfacControl id="OfacControl1" runat="server" AssetEvictionId='<%# Bind("AssetEvictionId") %>' /> 
```

但是该值永远不会正确设置。

我也尝试在 preRender 方法中的表单代码隐藏中执行此操作，如下所示：

```
var assetEvictionIdHiddenField = (HiddenField)oFormView.FindControl("AssetEvictionIdHiddenField");
var OfacControl1 = (Ofac)oFormView.FindControl("OfacControl1");

if (OfacControl1 != null && assetEvictionIdHiddenField != null)
    OfacControl1.AssetEvictionId = Convert.ToInt32(assetEvictionIdHiddenField.Value); 
```

这也不起作用。

这似乎是一个时间问题。看起来控件的呈现时间与设置值的时间不同。如果绑定语法不起作用，并且我不得不使用后面的代码，那么我应该使用哪个表单视图事件来设置值。我也尝试过 OnItemCreated 事件。这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:12:31.503

看来您正在尝试将控件设置在错误的位置。你应该在初始化中设置它。

[ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)说明如下：

> [在里面](http://msdn.microsoft.com/en-us/library/system.web.ui.control.init.aspx)
> 
> 在初始化所有控件并应用任何皮肤设置后引发。 单个控件的 Init 事件发生 在 [页面的](http://msdn.microsoft.com/en-us/library/system.web.ui.control.init.aspx)[Init](http://msdn.microsoft.com/en-us/library/system.web.ui.control.init.aspx)事件之前 。使用此事件来读取或初始化控件属性。

# mysql - mysql_exceptions.OperationalError: (1045, "Access denied for user 'root'@'localhost' (using password: YES)")

> ID：10181344
> 
> 赞同：17
> 
> 时间：2012-04-16T20:38:56.120
> 
> 标签：mysql, django, privileges

我已经开始使用 django，这是在 settings.py 中设置 'DATABASES' 后'runserver' 上的错误

```
mysql_exceptions.OperationalError: (1045, "Access denied for user 'root'@'localhost' (using password: YES)") 
```

我的 settings.py 部分代码：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'my_site',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'root',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }

} 
```

我已经创建了“my_site”数据库，并且权限设置正确（root 拥有所有权限）。我已经用“phpmyadmin”完成了这个操作。

出了什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T09:35:41.417

在控制台中运行

```
mysql> grant all privileges on *.* to root@localhost identified by 'password' with grant option; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T20:44:30.473

> 该指令表示将`username`SQL 语句添加为：

```
GRANT SELECT, INSERT, UPDATE, DELETE, LOCK TABLES ON winestores.* TO username@127.0.0.1 IDENTIFIED by 'password'; 
```

> 以 root 身份执行此操作后，我退出并尝试使用新用户重新登录。我得到了错误 1045。我通过以 root 身份重新登录并再次重新发出 SQL 语句来修复它，除了`username@localhost`. 有效！我不知道为什么？也许是'127.0.0.1'和'localhost'的IP之间的区别？？？

[如在dev.mysql.com](http://dev.mysql.com/doc/refman/5.0/en/access-denied.html)上所读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-20T09:54:09.357

经过两天的努力，我终于找到了问题所在。 **为 Django 站点设置 mysql 数据库的整个步骤是-**

> 您的 settings.py 文件必须看起来像 -

```
DATABASES = { 
   'default': {
       'ENGINE': 'django.db.backends.mysql',
       'NAME': 'django_db',   #Name of database you created
       'USER': 'root',        #Username of database you created
       'PASSWORD':'',         #Password of database you created
       'HOST': '',
       'PORT': '',
    } } 
```

注意：-上面给出的密码和用户名是我的本地主机，您已将其更改为您的。

> 1.  在 localhost 中创建一个数据库，将其命名为*django_db*（为此，您可以使用 lamp/wamp/Xampp 或 mysql 命令提示符）
>     
>     
> 2.  编辑文件*settings.py*并保存在 DATABASES 字段中打开数据库所需的密码，如下面的代码所示。
>     
>     
> 3.  打开终端。
>     
>     
> 4.  如果您使用的是虚拟环境，请使用 command -> ***workon env_name切换到它***
>     
>     
> 5.  现在***cd app_name***例如。光盘我的网站

第 3 步、第 4 步和第 5 步只是说明如何到达在您的应用程序中找到 manage.py 文件的文件夹。

> 6.要检查您是否在正确的目录中运行命令***ls -l***。如果您找到 manage.py 文件，那么一切正常，请继续
> 
> 7.python manage.py 迁移

如果您在运行上述命令时遇到任何错误，例如“没有名为 MySQLdb 的模块”，您可以访问该[链接](https://stackoverflow.com/questions/7459766/installing-mysql-python)

> 8.python manage.py syncdb
> 
> 9.python manage.py 运行服务器
> 
> 10.您将被要求输入您的 Django 管理员的用户名和密码，提供您想要打开 Django 管理员站点的任何内容。
> 
> 11.检查您的数据库中是否有一些表，位于 localhost 的 ` [http://localhost/phpmyadmin](http://localhost/phpmyadmin)。你现在可以走了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-04T06:51:19.847

对于遇到此问题的任何人 - 检查以确保数据库用户**主机**是`localhost`. 如果设置为`%`，它将不起作用，您将需要添加`localhost`或更改整体安全设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-27T12:21:30.240

当您的用户名或密码错误时会发生这种情况......所以再次检查用户名和密码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T20:42:05.873

您的数据库无法识别您的 root 用户和密码。如果您可以转到 phpmyAdmin 并尝试创建不同的用户和密码并分配给数据库，如果这不起作用，请尝试创建但使用创建用户进行控制台，并授予所有权限。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-05-26T12:09:16.537

仅供参考，如果您使用 XAMPP，请直接进入 localhost/phpmyad>Privileges 进行修改

# iphone - 如何以与 iphone 默认消息 (SMS) 应用程序在 UITextView 中插入多媒体内容相同的方式在 UITextView 中插入 UIImageView

> ID：10181349
> 
> 赞同：5
> 
> 时间：2012-04-16T20:39:03.723
> 
> 标签：iphone, ios5, ios4

我想在具有发送和相机按钮的工具栏的 UITextView 中插入 UIImageView，其方式与 iPhone 默认 SMS 应用程序相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:46:12.803

您最好使用 a`UIScrollView`并在其中管理`UITextView`s 和`UIImageView`s 。 `UITextView`不支持添加与文本内联的图像。事实上，它实际上不支持多行文本以外的任何内容。

根据您在下面的评论，我可以想到三件事来将图像作为文本输入框的一部分：

1.  他们没有使用`UITextView`，而是使用一些自定义视图。这种东西很难复制。
2.  他们将 a 作为子视图覆盖`UIImageView`并`UITextView`设置 contentInset ，`UITextView`因此没有重叠。
3.  他们使用单独`UIView`的来包含`UITextView`和`UIImageView`作为子视图，并根据需要简单地排列这些子视图。

2 和 3 都非常相似（只是方法略有不同），可能是您最好的方法。就个人而言，我认为 3 可能是最好的，因为它可以让您最大程度地控制两个视图的位置，但 2 也应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:12:57.270

我同意亚伦。根据我所见，我相信原生 SMS 应用实际上是一个 UITableView，它带有高度修改的 TableCells。然后 TableCells 是包含 UITextView 和 UIImageView 的复合视图，正如 Aaron 建议的那样。

前面可能需要做更多的工作，但我认为您会发现自定义使用上述元素定义自己的 UITableCell 将非常有用，并且符合整个 iOS 范例。*当您使用*本机范式时，事情会比反对/围绕它们工作得更好。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T09:35:02.557

您可以使用 UITextViewDelegate 和 ContentInset 来实现它。

```
 - (void)viewDidLoad 
 {
    self.textView.delegate = self;
    [self.textView addSubview:self.addedView];
    [self.textView setContentInset:UIEdgeInsetsMake(0, 0, CGRectGetHeight(self.addedView.frame), 0)];
 }

- (void)textViewDidChange:(UITextView *)textView
 {
    NSLog(@"%@",NSStringFromCGSize(textView.contentSize));
    __weak typeof(self) wself = self;
    [UIView animateWithDuration:0.5f animations:^{
      [wself.addedView setFrame:CGRectMake(0, textView.contentSize.height + 10, CGRectGetWidth(wself.addedView.frame), CGRectGetHeight(wself.addedView.frame))];
    }];
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:46:31.903

我有一个建议，尝试根据您的要求制作带有图像和文本的 html 文件，并将该 html 文件加载到 webview 中。

在这里，您还可以支持一些特定的文本粗体等。

我觉得很好看然后文本字段。

要使 webview 看起来像简单的滚动视图，只需将此方法放入您的代码中

别忘了写这个

`webView.opaque = NO;`,

`[self hideGradientBackground:webView];`和

```
- (void) hideGradientBackground:(UIView*)theView
{
    for (UIView * subview in theView.subviews)
    {
        subview.backgroundColor = [UIColor clearColor];
        if ([subview isKindOfClass:[UIImageView class]])
            subview.hidden = YES;

        [self hideGradientBackground:subview];
    }
} 
```

我希望这可以帮助你。

# windows-phone-7 - Windows Phone 7.1 浅色/深色主题管理

> ID：10181350
> 
> 赞同：5
> 
> 时间：2012-04-16T20:39:08.153
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

应用程序中的主题切换究竟是如何工作的？如果我覆盖默认样式怎么办？我还可以分别为浅色和深色主题定义不同的样式吗？为什么图标颜色会改变 - 即如果主题设置为深色，图标的黑色背景会变为白色。如果我将应用程序栏的背景样式明确覆盖为白色，它是否也会更改为白色？如何确保没有任何变化并且我的应用在 Light 和 Dark 主题中看起来相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T22:13:26.467

你见过这些吗？

Windows Phone 主题概述

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402557(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402557(v=vs.105).aspx)

Windows Phone 的主题资源

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769552(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769552(v=vs.105).aspx)

如何：为 Windows Phone 应用主题资源

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769545(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769545(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:06:20.167

我个人使用Jeff Wilcox 的[PhoneThemeManager](http://www.jeff.wilcox.name/2012/01/phonethememanager/)进行主题覆盖工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:44:37.133

当然，当涉及到浅色/深色主题支持时，最好在所有 Windows Phone 应用程序中使用相同的 UX，但我同意有时确实需要覆盖主题。

您可能可以在此线程中找到更多信息：[How to override WindowsPhone dark theme by light](https://stackoverflow.com/questions/6211635/how-to-override-windowsphone-dark-theme-by-light)

以前我也在使用本教程来自定义明暗主题： [http ://blog.richardszalay.com/2011/06/11/practical-support-for-light-dark-themes-on-windows-phone-7 /](http://blog.richardszalay.com/2011/06/11/practical-support-for-light-dark-themes-on-windows-phone-7/)

# iphone - 在输入字段中输入后，Webview 没有返回他的位置

> ID：10181355
> 
> 赞同：1
> 
> 时间：2012-04-16T20:39:37.677
> 
> 标签：iphone, uiwebview

我正在开发一些包含具有以下属性的 webview 的 iPhone 应用程序：

```
[[webView.subviews objectAtIndex:0] setScrollEnabled:NO];  //to stop scrolling

[[webView.subviews objectAtIndex:0] setBounces:NO]; //to stop bouncing 
```

在 webview 上有一个文本输入问题是，在我尝试输入输入后，键盘正在上升，所有页面也是如此。但在键盘关闭后，页面本身保持向上。

![例子](../Images/b1edf8e93ad395e0d9cd081d1a06ed9f.png) [1](https://i.stack.imgur.com/2bY7B.png)

因为 webview 没有滚动，所以在我重新启动应用程序之前无法正确查看页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:31:09.690

这是一个简单的解决方案。`- (void)viewDidLoad`首先在您的视图控制器中添加这行代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardDidHide:) 
                                             name:UIKeyboardDidHideNotification 
                                           object:nil]; 
```

这样您就可以在键盘隐藏时收到通知。

将以下方法添加到您的视图控制器：

```
- (void)keyboardDidHide: (NSNotification*) notification
{
    UIScrollView* scroll = nil;

    if([webView respondsToSelector: @selector(scrollView)])
        scroll = webView.scrollView; //iOS5 and up
    else
        scroll = [webView.subviews objectAtIndex:0]; //iOS4 and below

    [scroll setContentOffset: CGPointMake(0, 0)];
} 
```

这将导致您的 UIWebView 在键盘隐藏时滚动到 0, 0（顶部）。

# phpunit - 对对象的引用在 PHPUnit 中不起作用，但在正常的 PHP 执行中起作用

> ID：10181357
> 
> 赞同：0
> 
> 时间：2012-04-16T20:40:05.887
> 
> 标签：phpunit

PHP 5.3.10、PHPUnit 3.6.10

我在无法初始化对象的测试中调用代码，以便可以从中使用方法。问题是这是遗留代码，并且这个函数在我们的应用程序中经常使用。它本机在 PHP 下工作，但在 PHPUnit 内运行时则不行。这些调用访问我们为我们的应用程序拥有的 PHP 扩展。下面是一个非常简单的示例来演示该问题。

类文件来包装对我们的 PHP 扩展 (FOO) 的调用：

```
class FOO
{
    $private $Bar;

    pubilc function __construct()
    {
        $this->Bar = new OurPHPExtensionObject();
    }

    public function Option1($Variable)
    {
        return $this->Bar->OurPHPExtensionMethod($Variable);
    }

    public function _Option1($Variable)
    {
        return $Variable; // Dummy to test that code is loaded
    }
}
$Bar = new FOO(); 
```

这将创建对象并加载初始数据，因此它只完成一次。使用它的其他调用包括一个文件，该文件随后包含此类。随着应用程序继续运行，唯一的初始化是第一次完成，然后使用 global 关键字来引用这个对象来访问它的方法。

函数.php 示例：

```
require_once('FOO.class');
function CausesError($Parameter)
{
    global $Bar;    // Using $Bar defined from FOO.class
    $ErrorCreated = $Bar->Option1($Parameter);  // Call Option from Class
} 
```

然后，各个程序只需将 Function.php 文件包含在 require_once() 中，以确保从任何地方加载的文件只有 1 个实例。

示例文件：

```
require_once('Function.php');
echo CausesError('Variable Text') . "\n"; 
```

这会导致错误：

```
Fatal error: Call to a member function Option1() on a non-object in ... 
```

作为 PHPUnit 的新手，并试图尽量减少对现有代码的更改，直到我可以进行测试，我需要一些关于如何处理这个问题的建议。大量现有代码是通过简单地包含Function.php，然后调用该函数（CausesError）来调用该函数。我不知道如何让它返回数据。

然后我的测试文件在每次测试之前都有一个 setUp() 方法。

```
class TEST_Function extends PHPUnit_Framework_TestCase
{
    protected function setUp()
    {
        require_once('Function.php);
        echo _Option1('Sample') . "\n"; // Works and ECHOs to show code loaded
        echo Option1('Sample2') . "\n"; // Fails with the error
    }

    public function testFunctionOption1()
    {
        $this->assertEquals(Option1('English'), 'English'); // Error
    }
} 
```

我应该在测试中模拟该功能吗？我不确定哪些测试可能包含此功能，因为该功能已在整个代码中使用。

希望这描述了环境和代码布局。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:09:26.677

在阅读完您的问题后，我假设您遇到了其他问题：

```
require_once('Function.php'); 
```

将确保文件只加载一次。所以 to 的赋值`new FOO`只`$Bar`进行一次。由于该变量因此仅存在于单个测试函数的范围内，因此它仅在`setUp()`函数中可用。

`_Option1()`但情况可能并非如此，因为您没有发布and的定义，所以缺少更多细节来正确说明幕后发生的事情`Option1()`。

# asp.net - 如何检测 .net 应用程序中未导致错误的超时，仅延迟 8 秒？

> ID：10181358
> 
> 赞同：2
> 
> 时间：2012-04-16T20:40:06.373
> 
> 标签：asp.net, .net, post, ektron

我有一个运行 Ektron 8.02 SP3 的 Windows 2008 Enterprise R2 Server，这给我带来了一些我无法诊断的问题。

**所以我的问题不在于解决方案，而在于如何更好地分析 .net 应用程序/Windows 服务器。**每当您尝试发布由软件构建的表单时，需要 8 秒并更改返回页面（在此特定服务器上，它不会在具有相同代码库的其他机器上执行此操作）。似乎它试图与某物建立连接 8 秒，失败，然后返回页面而没有错误。更多事实：

*   这是一个没有被过度利用的强大虚拟机
*   数据库在同一台机器上运行，因此没有延迟。
*   从服务器本身提交时甚至会发生 8 秒延迟
*   服务器的事件查看器不报告任何看似相关的错误
*   配置文件 MSSQL 也不报告任何问题
*   Microsoft Network Monitor 没有报告任何明显的网络问题，尽管很难说，因为该工具没有清楚地报告长时间的连接尝试（据我所见）

我有足够的信心，在服务器上的表单 POST 期间有一些过程试图在某个地方建立连接，失败，然后继续完成其余的过程。它不会报告任何错误，并且表单都可以正常提交。

那么，说了这么多，我还能做些什么来调试它吗？我觉得我在黑暗中拍摄。谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:48:58.077

听起来这不是您编写的应用程序。如果是这样，潜在的解决方案就不同了。

第一步是使用 Windows 的性能监视器。选择选项（要观察的流程和/或性能属性），然后按步调运行流程。

如果性能监视器无法提供帮助，您将需要深入了解应用程序的真正内容。除非您正在编写应用程序，否则这很可能会比您想要的更困难。[您可以使用Reflector](http://www.reflector.net/)（付费）或[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)（免费） 调试不属于您自己的 .NET 应用程序。**但是**，这可能会违反许可协议（如果应用程序已购买，则可能会违反）。

除此之外，如果您想保持清醒并快速找到此问题，您将需要联系产品开发人员。

# ruby - Ruby 中的公钥加密演示

> ID：10181359
> 
> 赞同：2
> 
> 时间：2012-04-16T20:40:18.090
> 
> 标签：ruby, rsa

我写了下面的 ruby​​ 脚本来帮助我的学生理解公钥加密。我遵循此处显示的“铅笔和纸”方法：http: [//sergematovic.tripod.com/rsa1.html](http://sergematovic.tripod.com/rsa1.html)

只要不将 29 选为 p 或 q，这就可以正常工作。如果选择了 29，它将挂起计算密钥。谁能告诉我这是为什么？

```
#!/usr/bin/env ruby -wKU

#initialize
primes, p, q, n, z, k, j, m,e,d = nil

def prime
  primes = [2,3,5,7,11,13,17,19,23,29,31]
  primes.sample
end

#pick p
p= prime
puts "p: " + p.to_s

#pick q
q=p
while p==q
  q = prime
end
puts "q: " + q.to_s

#find n
n=p*q
puts "n: " + n.to_s

#find z
z=(p-1)*(q-1)
puts "z: " + z.to_s

#pick a relative prime of the totient
k=7

puts "k: " + k.to_s

#calculate secret key
j=0
while j*k % z != 1
  j+=1
end

puts "j: " + j.to_s
#message
m=16
puts "Message: " + m.to_s

#encrypt
e = m**k % n
puts "Encrypted: " + e.to_s

#decrypt
d = e**j % n
puts "Decrypted: " + d.to_s 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:45:23.397

当 29 被选为`p`或`q`时，`z`有 28 作为一个因子，因此`k = 7`不是您的评论**所**声称的全数的相对质数！

（这意味着`j*k % z`始终是 7 的倍数，因此您的循环永远不会终止。）

# javascript - 优化 Html5 画布中的内容渲染

> ID：10181364
> 
> 赞同：1
> 
> 时间：2012-04-16T20:40:51.287
> 
> 标签：javascript, canvas, render, raster-graphics, dirtyrectangle

我正在开发一个使用 Html5 画布的图形上下文来呈现视图层次结构的[开源库。](https://github.com/raweden/Openbox "开箱")但是我想做一些性能优化，允许更快地渲染完全不透明的内容。

*我怎么能实现这样的逻辑？*

*您是否知道有关如何实施此类系统的良好信息资源或教程？*

目前我正在使用类似于 ui-kit 的基本绘图模型，每个视图都代表一个屏幕上的矩形区域。渲染引擎与视图对象分开实现，并根据包含需要重绘的脏视图的列表来渲染内容。

*编辑：*

**库和当前渲染系统**
库是一个所谓的平台或抽象层，基于画布元素动态渲染图形的能力。我目前已经实现了管理显示列表等的基础知识，但还没有优化。

当前的渲染引擎正在使用缓冲区并缓存视图的绘图命令，以便以后可以重绘视图。然而，当只有一个视图无效时，需要重新绘制层次结构的绘制过程中存在过度的外壳。

*我如何实现一个系统来管理屏幕内容的脏矩形？*

# c# - Visual Studio 中的线程需要 Join 才能正常工作

> ID：10181367
> 
> 赞同：0
> 
> 时间：2012-04-16T20:41:07.217
> 
> 标签：c#, multithreading, visual-studio

这更像是一个*“我想知道”*的问题，而不是一个真正的问题。

在努力提高我的线程技能时，我遇到了以下难题。

**源代码**

```
internal class Program
{
    private static void Main(string[] args)
    {
        var thread = new Thread(() => Print("Hello from t"));
        thread.Start();
        //thread.Join();
    }

    private static void Print(string message)
    {
        Console.WriteLine(message);
    }
} 
```

**问题**

如果我从 Visual Studio 运行应用程序（无论是 Debug 还是 Release 配置），**除非**我等待线程退出（使用），否则`message`永远不会显示在输出窗口中。**`Join`**

 ****解决方案**

从命令提示符运行编译的可执行文件，您会看到预期的输出。

**我的问题**

我会大胆猜测并说 Visual Studio 环境使一切变得不同。

我想知道的是，如果我正在开发一个真实世界的应用程序，我将如何使用 Visual Studio 来调试所述应用程序，而不必被迫修改源代码（使用`Join`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:55:04.880

该调用`thread.Start()`只是启动子线程然后返回。由于这是你的`Main`函数的结束，程序完成并且它的进程在辅助线程有机会打印消息之前退出。

毫无疑问，Visual Studio 环境没有什么奇怪的，只是正常的 Windows 进程行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:55:19.363

在实际应用程序中，此代码不应出现，因为应用程序在线程完成之前退出的问题。如果你确实有这个问题，它通常表示代码有问题。

If you are making use of a message pump (WinForms) or similar (WPF), the application will run as normal, meaning it won't exit until the user (or the application) breaks the loop by requesting the application exit. In this case, the thread will work until it finishes, or until the program exits. `Thread.Join()` may need to be called anyway, depending on the scenario.

If you are creating a console application, `Thread.Join()` should be called at the end of the program to ensure the worker thread completes. An alternative is to start the message pump with `System.Windows.Forms.Application.Run()`. However, it is not designed for this, and should not be used unless you are interacting with the user.

另一方面，C#中有两种线程：前台线程和后台线程。主线程停止后，前台线程继续运行。当所有前台线程都完成后，后台线程就会停止。默认类型是前台线程。您可以使用该属性将线程显式设置为后台`Thread.IsBackground`。Visual Studio 显然对线程进行了监视，以至于前台线程不会阻止应用程序退出。在调试器之外运行程序可以正常工作。

确保所有线程在主线程之前终止仍然是一个好主意。`Main`如果您在退出后运行更高级的代码，谁知道会发生什么。**

# domain-driven-design - 我可以在聚合根中调用实体的操作吗？

> ID：10181369
> 
> 赞同：2
> 
> 时间：2012-04-16T20:41:14.590
> 
> 标签：domain-driven-design

根据标题，我有以下课程：

```
public class Company : AggregateRoot {
    public AddressBook AddressBook { get; set; }
}

public class AddressBook {
    public List<Address> Addresses { get; set; }

    public Address GetPrimaryAddress() {
        return Addresses.FirstOrDefault();
    }
} 
```

我是否可以致电：

```
company.AddressBook.GetPrimaryAddress(); 
```

或者我应该公开一个`GetPrimaryAddress()`方法`Company`，然后调用该`AddressBook`方法？

我知道我不应该**引用**AggregateRoot 中的实体，但我不确定调用操作的规则是什么。

### 更新

对于它的价值，下面是我的*实际*模型的图表（单击[此处](https://i.stack.imgur.com/GpcHX.png)查看全尺寸） 。包含有关应如何管理所有类型的联系人（个人/业务位置）的规则，例如删除主要联系人时会发生什么。它还解决了一些关于 RavenDB 如何存储嵌套实体的警告（本质上我们需要提供我们自己的 Id 策略 - 因此是 LastContactId 属性）。*`ContactList`*

 *![客户模型](../Images/80a1117f7b02b567b73e8f363345bac4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:44:18.960

首先，这完全取决于上下文，我假设 Company 确实是该特定上下文的 AR。同一个公司在其他上下文中可以是一个简单的对象。现在，我不喜欢教条地使用规则和模式，所以“规则”说什么并不重要。

在这种情况下，我不会公开地址，因为它似乎是公司内部的。作为公司的用户，我想要它的主要地址，我不在乎你使用AddresBook来组织它们。

举一个不太常见的例子：AR Human 有两个 Eye 对象。你会要求这个人给他一只眼睛，这样你就可以检查它们的颜色，还是直接问那个人他的眼睛是什么颜色？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:16:48.483

根据*聚合*模式：

> 对内部成员的瞬态引用只能在单个操作中使用。

含义 - 公司可以将其地址对象的引用传递给聚合之外的其他对象，但地址不能是聚合之外的任何其他对象的成员。

例如，对象用户可以向公司请求对地址的引用，但用户不能将地址作为其成员之一。

为什么这如此重要？

> 因为根控制着访问，所以它不会被内部结构的改变弄得措手不及。

如果对象 User 将 Address 作为其成员之一，它可能会在没有其 Company 的情况下将其从数据库中拉出，因此，Company 将对其内部结构的更改措手不及。

请看我写的一篇[文章，我在其中展示了为什么这个原则如此重要。](http://itziksaban.blogspot.com/2012/03/aggregate-ddd-boosting-performance.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:55:59.570

好问题，这是我在 DDD 中一直难以解决的问题之一 - 你是否总是通过它们的聚合根访问实体，并且在某些时候可能违反[了得墨忒耳定律](http://en.wikipedia.org/wiki/Law_of_Demeter)(AggregateRoot.EntityX.EntityY.DoStuff() ) ? 您是否使聚合根短路？您是否在聚合根级别为要访问的每个子子实体添加一个直接访问器，从而混淆聚合根？

解决这个问题的一种方法可能是：尝试让每个对象只与其直接或附近的邻居交谈，而不是与某个遥远的陌生人交谈。使用多个对象，每个对象都知道从聚合根到要访问的最终实体的一小部分路径。

*   第一个对象只知道聚合根，

*   它将 AggregateRoot.SubEntity1 注入第二个对象，

*   第二个对象又将 SubEntity1.SubEntity2 注入到第三个对象中

*   等等。

有趣的是，这揭示的一件事是您的一些域实体的（不）相关性。在地址示例中，问问自己是否感觉适合每个想要访问公司主要地址的对象都被注入地址簿。如果它看起来太复杂，也许你一开始就不应该有地址簿。也许它毕竟不是一个如此强烈的概念，以至于它应该成为无处不在的语言的一部分。

或者，也许您会发现 AddressBook 正是您的客户端对象使用的正确对象，并且该客户端对象在操作公司和地址时试图一次做太多事情。*

# dll - msvcp100.dll 丢失

> ID：10181374
> 
> 赞同：0
> 
> 时间：2012-04-16T20:41:39.587
> 
> 标签：dll, dependencies

我使用 Visual Studio 2010 在 C++ 中编写了一个程序，但是当我在某些使用 WinXP 的计算机上运行它时，它显示“无法启动，因为找不到 MSVCP100.dll”

如何防止对 Windows 不附带的 dll 的这种依赖？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:18:47.303

你不能阻止这种依赖，因为它是 Visual C++ 的核心运行时库。相反，在您的应用程序中包含 Visual C++ 2010 Redistributable 包（通常一个单独的链接就足够了，因为大多数人已经安装了它）

但是，如果实际上您的程序无法启动，因为一个以 D 结尾的 dll，例如 MSVCP100D.dll，那么您需要在发布模式下构建您的程序，默认情况下会将运行时间切换到非调试版本。您需要仔细检查项目中包含的任何其他包含的静态和动态库，以确保所有调试或所有发布版本都与您的构建相匹配。

如果您在查找哪些子项目引用了调试版本时遇到问题，您可以下载并运行depends.exe 并浏览该exe 文件来查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T09:51:31.827

抱歉迟到了，但是是的，您可以防止这种依赖，只需转到 yopur 项目的解决方案属性，转到 C/C++ > 代码生成器，然后在运行时库中将其从 MDd 更改为 MTd，将静态包含依赖库，并且不在运行时，这样在尝试运行 Dll 时避免运行时错误。

# yui - yui date 时间表

> ID：10181383
> 
> 赞同：0
> 
> 时间：2012-04-16T20:42:13.623
> 
> 标签：yui, schedule

我检查了[http://timetomeet.info/new/](http://timetomeet.info/new/)的代码。我想在[http://timetomeet.info/new/](http://timetomeet.info/new/)上制作与此处相同的时间选择器。是否有分 步说明如何操作？我需要 php 的输出来处理它（所以它应该是带有时间的数组或类似的东西）。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:44:55.493

我找到了解决方案。只需尝试将所有 js 提取为 yahoo 脚本即可。

# iphone - iOS - 从 iPad 访问在计算机上运行的 Web 服务

> ID：10181384
> 
> 赞同：0
> 
> 时间：2012-04-16T20:42:18.417
> 
> 标签：iphone, ios, web-services, ipad

我正在尝试测试我的 iPad 应用程序，该应用程序访问当前在我的机器上运行的 Web 服务。我怎样才能使应用程序可以调用 Web 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:45:01.790

最简单的方法是将 iPad 和 PC 连接到同一个无线网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:49:30.563

您网络中的每台计算机都有一个唯一的网络 IP（通常类似于“192.168.0.100”）。如果您知道如何连接到 localhost，通常只需将 localhost 更改为您尝试访问的计算机的网络 IP，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:57:25.353

如果您的机器是 Mac，我有一个类似的问题，在[这里](https://apple.stackexchange.com/questions/35282/browsing-web-page-stored-on-local-machine)得到了回答。在 Mac 上启用网络共享，您应该可以使用所有内容。

# html - 如何将我的按钮链接到正确的位置

> ID：10181385
> 
> 赞同：0
> 
> 时间：2012-04-16T20:42:20.740
> 
> 标签：html, css

好的，所以我正在用 HTML/Css 做一个网站问题是，当我单击“主页”按钮时，它会将我定向到我的 css 链接。我的主页被称为“new.html”，当我点击“home”而不是 background.css 时，我希望它去那里这是我的“New.html”

```
 <html>
    <head>
    <link rel="stylesheet" type="text/css" href="background.css"/>
    </head>
    <h1>Bully-Free Zone</h1>
    <h2>"Online harassment has an off-line impact"</h2>
    <a href="background.css" class="nav-link">Home</a>
    </body>
    </html> 
```

背景.css

```
body{/* IE10 */ 
background-image: -ms-linear-gradient(top left, #FC5B5B 0%, #555BB5 100%);

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top left, #FC5B5B 0%, #555BB5 100%);

/* Opera */ 
background-image: -o-linear-gradient(top left, #FC5B5B 0%, #555BB5 100%);

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top left, #FC5B5B 0%, #555BB5 100%);

/* Proposed W3C Markup */ 
background-image: linear-gradient(top left, #FC5B5B 0%, #555BB5 100%);
}
h1{color:black;text-align:center;font-size:40px;font-family:broadway;
}
h2{color:black; text-align:center;font-size:35px;font-style:italic;}
a{color:black; text-align:left; font-size:25px;font-family:broadway;}
a.nav-link:link
{
 color: black;
 text-decoration: none;
}
a.nav-link:visited
{
 color: black;
 text-decoration: none;
}
a.nav-link:hover
{
   color: black;
   text-decoration: none;
}
a.nav-link:active
{
   color: black;
   text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:43:44.077

不是很明显吗？改变这个：

```
<a href="background.css" class="nav-link">Home</a> 
```

对此：

```
<a href="new.html" class="nav-link">Home</a> 
```

计算机只做它被告知要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:45:01.537

改变

```
<a href="background.css" class="nav-link">Home</a> 
```

到：

```
<a href="new.html" class="nav-link">Home</a> 
```

您还应该插入

```
<body> 
```

在你之前

```
<h1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:46:17.010

更改此行：

```
<a href="background.css" class="nav-link">Home</a> 
```

到

```
<a href="new.html" class="nav-link">Home</a> 
```

# mercurial - 基于 Kiln Mercurial 存储库定义 Jenkins 构建作业

> ID：10181386
> 
> 赞同：3
> 
> 时间：2012-04-16T20:42:23.390
> 
> 标签：mercurial, jenkins, kiln

我在 Windows 2008 R2 机器上安装了 Mercurial 插件的 Jenkins 实例。我正在尝试在我的 KilnHQ 存储库上为 Maven 项目定义构建作业。由于身份验证失败，HG 克隆步骤无法检索代码。

我读过 Kiln 文档，它们只支持 HTTPS。没有 SSH 支持。但是，Jenkins 的 hg 插件不允许我输入用户名/密码。

如何通过 Jenkins 成功唤醒我的构建工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:11:01.983

对于（所有）http(s):// URL，将用户名和密码直接放在 URL 中是合法的。Mercurial 支持这一点。如果 Jenkins 的 Mercurial 插件没有破坏它，那么您可以这样做：

```
https://user:pass@kilnhost.com/path/to/repo 
```

如果这不起作用，您可以将身份验证信息放在 Jenkins 用户主目录的 Mercurial.ini 文件`[auth]`部分：[http ://www.selenic.com/mercurial/hgrc.5.html#auth](http://www.selenic.com/mercurial/hgrc.5.html#auth)

# java - 在ant中使用AndroidManifest.xml版本代码

> ID：10181394
> 
> 赞同：3
> 
> 时间：2012-04-16T20:42:52.147
> 
> 标签：java, android, ant

有谁知道是否可以从 AndroidManifest.xml 获取变量以**供 ant 使用**？

具体来说，我正在尝试以某种方式获取`versionCode`,`versionName`和`packageName`out 。

提前致谢。

* * *

## 结论

这似乎太麻烦了，而且由于这个问题很容易用 Maven 解决，所以我暂时放弃了快速解决方案的可能性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T22:29:56.037

也许有一个 android 专用的解决方案，我不知道，但除此之外，您可以将 android 清单文件视为任何其他 xml 文件 -> 所以您只需要一个用于解析 xml 文件并从中检索值的 ant 任务。

因为在 Java 中编写自定义 ant 任务并不是一门火箭科学——你已经可以尝试使用一些东西。

请参阅：[如何通过 ANT 解析 xml](https://stackoverflow.com/questions/2344295/how-to-parse-a-xml-by-ant)

所以在你的情况下，它会像（使用[http://www.oopsconsultancy.com/software/xmltask/](http://www.oopsconsultancy.com/software/xmltask/)）：

```
<target name="retrieveFromManifest" desciption="retrieveFromManifest">
    <taskdef name="xmltask" classname="com.oopsconsultancy.xmltask.ant.XmlTask"/>
    <xmltask source="${pathToAndroidManifestFile}">
        <copy path="/manifest/@android:versionCode" property="androidVersionCode"/>
        <copy path="/manifest/@android:versionName" property="androidVersionName"/>
        <copy path="/manifest/@package" property="androidPackage"/>
    </xmltask>
    <echo message="Version code: ${androidVersionCode}" />
    <echo message="Version name: ${androidVersionName}" />
    <echo message="package: ${androidPackage}" />
</target> 
```

编辑：

如果您考虑在您的 android 项目的 build.xml 中解析它，那么您就有了“开箱即用”的 xpath 任务。任何为 android 项目自动生成的构建文件都会导入全局 sdk 的构建文件`<import file="${sdk.dir}/tools/ant/build.xml" />`，其中您有：

```
<taskdef name="xpath"
        classname="com.android.ant.XPathTask"
        classpathref="android.antlibs" /> 
```

以及后面几行的示例用法：

```
<xpath input="AndroidManifest.xml" 
                expression="/manifest/application/@android:hasCode"
                output="manifest.hasCode" default="true"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-08T12:50:10.710

其实并不难：

```
<xmlproperty file="AndroidManifest.xml" prefix="mymanifest" collapseAttributes="true"/> 
```

你像这样使用它：

```
${mymanifest.manifest.android:versionName} 
```

# c# - 使用线程不断检查值的更改

> ID：10181395
> 
> 赞同：2
> 
> 时间：2012-04-16T20:42:57.030
> 
> 标签：c#, multithreading, continuous

我正在尝试创建一个线程，它将不断检查值的更改，然后在位于我的 GUI 中的 PictureBox 中直观地显示该更改。

我实际写的有点复杂，所以我在保持基本思想的同时简化了它，如果这还不够，我很乐意提供澄清：

```
public class CheckPictures
{
    PictureBox update;
    List<String> check;

    public CheckPictures(PictureBox anUpdate, List<String> aCheck)
    {
        update = anUpdate;
        check = aCheck;
    }

    public void start()
    {
        while(true)
        {
            if (aCheck[0] == "Me")
            {
                update.Image = Image.fromFile("");
            }
        }
    }
}

static int Main(string[] args)
{ 
    List<String> picturesList = new List<String>();

    CheckPictures thread1 = new CheckPictures(PictureBox1, picturesList);
    Thread oThread1 = new Thread(thread1.start));
} 
```

如果我要将字符串“Me”添加到图片列表中，我想要它做的是动态更改 PictureBox1 中的图片。上面的代码没有像我希望的那样工作。我原以为通过传递实际的 PictureBox 和 List，对其他地方的 List 的任何更改都是程序将被线程捕获。所以我的第一个问题是：这可能吗？如果是这样，我需要对我的代码进行哪些更改才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:54:47.100

您可能想要使用事件。您注册一个事件处理程序，当一个线程中发生某些变化时，它会调用另一个线程中的事件处理程序来完成工作。忙等待浪费cpu。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:51:42.073

你**绝对不想做一个无限循环**，这只会消耗cpu：

```
while(true)
{
      if (aCheck[0] == "Me")
      {
            update.Image = Image.fromFile("");
      }
 } 
```

我认为您应该研究[CountdownLatch](http://msdn.microsoft.com/en-us/magazine/cc163427.aspx)类。

```
public class CountdownLatch
  {
    private int m_remain;
    private EventWaitHandle m_event;

    public CountdownLatch(int count)
    {
      m_remain = count;
      m_event = new ManualResetEvent(false);
    }

    public void Signal()
    {
      // The last thread to signal also sets the event.
      if (Interlocked.Decrement(ref m_remain) == 0)
        m_event.Set();
    }

    public void Wait()
    {
      m_event.WaitOne();
    }
  } 
```

这里的基本思想是，您需要在线程上停止执行一段时间，并在满足某个条件时恢复（可能在另一个线程上）。

换句话说，您将拥有一个计数器，在特定条件下递减它的值，每当它变为零时，您就会触发您的事件，执行一些代码然后重新开始（停止执行并等待计数器变为零）。

在您的情况下，您可以将计数器设置为 1 并在您设置时递减它的值`aCheck[0] = "Me";`。这样您就不会浪费 CPU。

伪代码：

初始化计数器：

```
CountdownLatch latch = new CountdownLatch(1); 
```

让线程等待：

```
public void start()
{
    while(true)
    {
      latch.Wait(); //execution stops
      {
          //execution resumes once the latch counter is zero.
          if (aCheck[0] == "Me")  //double check you have what you need
          {
              update.Image = Image.fromFile("");
              latch = new CountdownLatch(1); //reset if you need to do it again
          }
      }
    }
} 
```

每当满足您的条件时（即`aCheck[0] = "Me";`）向您的锁存器发出信号：

```
latch.Signal(); 
```

最后一行将使线程恢复执行。好东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:12:54.450

添加新图片时创建一些对象，该对象将引发事件。例如代表图片集合的类：

```
public class PicturesCollection
{
    public event EventHandler<PictureAddedEventArgs> PictureAdded;
    private List<string> _pictures = new List<string>();

    public void Add(string name)
    {
        _pictures.Add(name);
        if (PictureAdded != null)
            PictureAdded(this, new PictureAddedEventArgs(name));
    }

    public IEnumerable<string> Pictures
    {
        get { return _pictures; }
    }
} 
```

如果您想为事件提供一些额外的数据，请创建自定义 EventArgs：

```
public class PictureAddedEventArgs : EventArgs
{
    public PictureAddedEventArgs(string name)
    {
        Name = name;
    }

    public string Name { get; private set; }
} 
```

您现在需要的一切 - 创建图片集并订阅该事件：

```
static int Main(string[] args)
{ 
    PicturesCollection pictures = new PicturesCollection();
    pictures.PictureAdded += Pictures_PictureAdded;
}

static void Pictures_PictureAdded(object sender, PictureAddedEventArgs e)
{
    if (e.Name == "Me")
        PictureBox1.Image = Image.fromFile("");
} 
```

如果您在应用程序的某处将新图片添加到集合中，它将引发 PictureAdded 事件，您可以处理和更新 PictureBox。在这种情况下不会浪费 CPU。

# c# - 正则表达式来隔离特定的子字符串

> ID：10181396
> 
> 赞同：0
> 
> 时间：2012-04-16T20:42:59.753
> 
> 标签：c#, regex

我有这个从 File.ReadAllText 中检索到的字符串：

```
6   11 rows processed 
```

如您所见，在本文档中始终有一个整数指定行号。我感兴趣的是它后面的整数和“处理的行”字样。所以在这种情况下，我只对子字符串“11 rows processed”感兴趣。

所以，知道每一行都以一个整数开头，然后是一些空格，我需要能够隔离它后面的整数和“处理的行”这个词，并将其返回到一个字符串本身。

有人告诉我，这很容易用 Regex 完成，但到目前为止，我还没有最微弱的线索来构建它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:46:15.500

您不需要正则表达式。只需在空格上拆分：

```
var fields = s.Split(new char[0], StringSplitOptions.RemoveEmptyEntries);
Console.WriteLine(String.Join(" ", fields.Skip(1)); 
```

在这里，我使用的事实是，如果您将一个空数组作为`char []`参数传递给`String.Split`，它会在所有空格上拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:46:04.590

这应该可以满足您的需要：

```
\d+(.*) 
```

这将搜索 1 个或多个数字 ( `\d+`)，然后将所有内容放在一个组中：

```
. = any character
* = repeater (zero or more of the preceding value (which is any character in the above
() = grouping 
```

但是，Jason 是正确的，因为您只需要使用拆分功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:55:14.537

`Regex.Replace()`使用以下正则表达式可以轻松完成此操作...

```
^\d+\s+ 
```

所以它会是这样的：

```
return Regex.Replace(text, @"^\d+\s+", ""); 
```

基本上你只是修剪第一个数字`\d`和后面的空格`\s`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T20:58:49.907

如果您需要使用正则表达式，它将是这样的：

```
string result = null;
Match match = Regex.Match(row, @"^\s*\d+\s*(.*)");
if (match.Success)
    result = match.Groups[1].Value; 
```

正则表达式从行首开始匹配：第一个空格（如果有），然后是数字，然后是更多空格。最后它提取行的其余部分并将其作为结果返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T20:50:26.463

PHP 中的示例（C# 正则表达式应该兼容）：

```
$line = "6 11 rows processed";
$resp = preg_match("/[0-9]+\s+(.*)/",$line,$out);

echo $out[1]; 
```

我希望我明白了你的意思。

# php - 用于处理针对 JSONWireProtocol 的 GET 或 POST 操作的 PHP CURL 函数

> ID：10181399
> 
> 赞同：1
> 
> 时间：2012-04-16T20:43:10.487
> 
> 标签：php, json, curl, selenium, webdriver

我没有任何运气来创建一个 curl 函数，该函数具有支持针对 json 有线协议的 GET 或 POST 操作的所有选项，如下所示 [http://code.google.com/p/selenium/wiki/JsonWireProtocol#留言](http://code.google.com/p/selenium/wiki/JsonWireProtocol#Messages)

我有一些类似的东西

```
class Myclass
{
    public static function curl($http_type, $full_url, $data=null){

      $ch = curl_init();
      curl_setopt($c, CURLOPT_URL, "$full_url");
      curl_setopt($c, CURLOPT_CUSTOMREQUEST, $http_type);
      curl_setopt($c, CURLOPT_RETURNTRANSFER, TRUE);
      curl_setopt($c, CURLOPT_HTTPHEADER,array("Expect:"));
      curl_setopt($c, CURLOPT_RETURNTRANSFER, TRUE);
      curl_setopt($c, CURLOPT_TIMEOUT, 120);
      curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
       if($data && $http_type == "POST"){
        $data= http_build_query($data);
        curl_setopt($c, CURLOPT_POSTFIELDS, $data);
       }

      $response = curl_exec($c);
      curl_close($c);
     return $response;
    }
} 
```

并在这样的事情上执行

```
$data_send = json_encode(array("url"=>"http://wwww.google.com"));
Myclass::curl("POST", "http://127.0.0.1:4444/wd/hub/session/{$session_id}/url", $data_send); 
```

并且为了执行并返回 webdriver 实例在 curl 操作上返回的任何内容。

# spring - 找不到 Excel 2007 和 Spring MVC DocumentBuilderFactory 的 Apache POI (poi-ooxml)

> ID：10181400
> 
> 赞同：1
> 
> 时间：2012-04-16T20:43:11.163
> 
> 标签：spring, model-view-controller, maven, apache-poi

我在尝试将 Apache POI poi-ooxml 库包含到我的项目中时遇到了一些麻烦。我正在使用 Maven 和以下依赖项：

```
 <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml</artifactId>
        <version>3.8</version>
    </dependency> 
```

但是在这样做之后，我无法再次启动我的 Spring MVC 应用程序，这是堆栈跟踪：

> 异常创建：org.springframework.beans.factory.BeanDefinitionStoreException：从 ServletContext 资源 [/WEB-INF/context/applicationContext.xml] 解析 XML 文档时出现意外异常；嵌套异常是 javax.xml.parsers.FactoryConfigurationError：找不到 javax.xml.parsers.DocumentBuilderFactory 的提供程序

所以，我的理解是 poi-ooxml 包含另一个 xml 解析器，它覆盖 Spring 用来读取其 xml 配置文件的默认 Java VM 默认解析器。

如果我排除以下 2 个库：

*   xmlbeans
*   xml-api

一切正常（我可以启动我的 Spring 应用程序），但当然 Apache POI 不再工作，因为他缺少这两个必需的库......

任何建议将不胜感激；）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:01:07.420

将 poi-ooxml 添加到我现有的 groovy 应用程序后，我遇到了类似的问题。我已将 xercesImpl 添加到项目中，它似乎正在工作。也许你应该试一试。

```
<dependency>
   <groupId>xerces</groupId>
   <artifactId>xercesImpl</artifactId>
   <version>2.9.1</version>
</dependency> 
```

# iphone - 在 AVMutableComposition 上设置轨道级别

> ID：10181403
> 
> 赞同：7
> 
> 时间：2012-04-16T20:43:17.730
> 
> 标签：iphone, avfoundation

我正在尝试将 4 个音轨组合成一个作品，然后将此作品导出到一个文件中。到目前为止，我的文件已成功创建，但所有音轨都以全音量播放，而不是我尝试设置的音量。这是我现在正在做的事情：

```
AVMutableComposition *trackComposition = [AVMutableComposition composition];

AVAsset *asset1 = ...
AVAsset *asset2 = ...
AVAsset *asset3 = ...
AVAsset *asset4 = ...

NSMutableArray *inputParams = [NSMutableArray arrayWithCapacity:4];

// Add 4 tracks to composition (but only if there are no errors and the track isn't muted
NSError *err;
if(asset1 && ![self trackIsMuted:1]){
    AVAssetTrack *rawTrack = [[asset1 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [trackComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset1 duration]) ofTrack:rawTrack atTime:kCMTimeZero error:&err];
    AVAudioMixInputParameters *audioParams = [self audioParamsForTrack:compositionAudioTrack volume:[self gainForTrack:1]];
    [inputParams addObject:audioParams];
}
if(asset2 && !err && ![self trackIsMuted:2]){
    AVAssetTrack *rawTrack = [[asset2 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [trackComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset2 duration]) ofTrack:rawTrack atTime:kCMTimeZero error:&err];
    AVAudioMixInputParameters *audioParams = [self audioParamsForTrack:compositionAudioTrack volume:[self gainForTrack:2]];
    [inputParams addObject:audioParams];
}
if(asset3 && !err && ![self trackIsMuted:3]){
    AVAssetTrack *rawTrack = [[asset3 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [trackComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset3 duration]) ofTrack:rawTrack atTime:kCMTimeZero error:&err];
    AVAudioMixInputParameters *audioParams = [self audioParamsForTrack:compositionAudioTrack volume:[self gainForTrack:3]];
    [inputParams addObject:audioParams];
}
if(asset4 && !err && ![self trackIsMuted:4]){
    AVAssetTrack *rawTrack = [[asset4 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [trackComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset4 duration]) ofTrack:rawTrack atTime:kCMTimeZero error:&err];
    AVAudioMixInputParameters *audioParams = [self audioParamsForTrack:compositionAudioTrack volume:[self gainForTrack:4]];
    [inputParams addObject:audioParams];
}

AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
audioMix.inputParameters = inputParams;

// Export the composition to a file
AVAssetExportSession *export = [AVAssetExportSession exportSessionWithAsset:trackComposition presetName:AVAssetExportPresetAppleM4A];

NSURL *outputURL = [NSURL fileURLWithPath:[[NSTemporaryDirectory() stringByAppendingPathComponent:[NSString guidString]] stringByAppendingPathExtension:@"m4a"]];

[export setOutputURL:outputURL];
[export setOutputFileType:@"com.apple.m4a-audio"];

[export setAudioMix:audioMix];

[export exportAsynchronouslyWithCompletionHandler:^{ ... }]; 
```

唯一有趣的是 audioParamsForTrack 方法，它在这里：

```
- (AVAudioMixInputParameters *)audioParamsForTrack:(AVAssetTrack *)track volume:(float)vol{
    AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:track];
    [audioInputParams setVolume:vol atTime:kCMTimeZero];

    return [audioInputParams copy];
} 
```

谁能发现我做错了什么？我尝试通过各种不同的音轨来创建音频参数，但似乎没有什么不同。我看到了一些关于曲目首选音量的信息 - 这对我有帮助吗？我在这一点上有点卡住了，感谢任何反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-23T04:07:43.087

我遇到了类似的问题，但对我有用的是在输入参数上明确设置轨道 ID：

```
 [audioInputParams setTrackID:compositionAudioTrack.trackID]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T18:44:55.327

调试时，我可以看到问题，但我不确定它为什么会发生。

当您将参数添加到数组时，如下所示：

```
[inputParams addObject:audioParams]; 
```

轨道 id 设置为 0，因此它永远不会附加到任何轨道：

从控制台：

```
<AVMutableAudioMixInputParameters: 0x16eab300, track ID = 0, volume mix: volume 0.010 at time 0.000> 
```

我通过不使用 audioParamsForTrack 方法解决了这个问题，而是在数组之前完成工作，如下所示：

```
NSMutableArray *inputParams = [NSMutableArray arrayWithCapacity:4];

            AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:AudioTrack];
            [audioInputParams setVolume:.01f atTime:kCMTimeZero];

            AVAudioMixInputParameters *audioParams = audioInputParams;
[inputParams addObject:audioParams];

            audioMix.inputParameters = inputParams; 
```

# jquery - 如果你知道如何让 JSON 与 Rails 3.2 一起工作，你能弄清楚吗？

> ID：10181406
> 
> 赞同：0
> 
> 时间：2012-04-16T20:43:40.897
> 
> 标签：jquery, ruby-on-rails, json

我正在尝试构建一个动态菜单，因此当用户选择一个国家/地区时，状态菜单会更新。

我正在查看我的开发日志，我看到该操作运行 db 查询，然后呈现 json.erb 文件，但我无法从浏览器获得任何响应。

这是我所拥有的：

**控制器/settings_controller.rb**

```
respond_to :html, :json

  def getstates
    @states = Country.find_by_iso(params[:account][:addresses_attributes]["0"][:country]).states
    respond_with(@states)
  end 
```

（注意：表单是嵌套表单，这就是为什么 params 哈希这么长。）

* * *

**设置/edit.html.erb**

```
<%= address.collection_select :country, Country.order(:name), :iso, :name, {:include_blank => true}, "data-remote" => true, "data-url" => "/settings/getstates", "data-type" => :json  %>

<%= address.select :state, [], {:include_blank => true}, :disable => true %> 
```

* * *

**设置/getstates.json.erb**

```
$(document).ready(function() {

    $("#account_addresses_attributes_0_country").bind('ajax:success', function(evt, data, status, xhr){
      var select = $('#account_addresses_attributes_0_state');

      if (data !== null) {
        select.removeAttr('disabled');
        $.each(data, function(key, value) {
          $("<option/>").val(value[1]).text(value[0]).appendTo(select);
        });
      } else {
        select.empty();
        select.attr('disabled', 'disabled');
      }
    });
}); 
```

（注意：我从[http://blog.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html](http://blog.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)获得此代码）

* * *

**开发日志**

```
Processing by SettingsController#getstates as JSON
  Parameters: {"account"=>{"addresses_attributes"=>{"0"=>{"country"=>"UY"}}}}
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "1"]]
  Country Load (0.2ms)  SELECT "countries".* FROM "countries" WHERE "countries"."iso" = 'UY' LIMIT 1
  Rendered settings/getstates.json.erb (0.3ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.3ms) 
```

这是我在开发日志中看到的输出。但在浏览器中什么都没有。我尝试添加警报和控制台日志方法，但没有。

如果有人能帮助我理解我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:38:37.700

首先，我对您的 .json.erb 视图有点困惑。当 REST 请求请求 JSON 时，您似乎正在返回 Javascript（在浏览器中执行）。

其次，我会看看你最喜欢的类似[Firebug](http://getfirebug.com/)的工具（无论是 Chrome 的开发者工具还是 Safari 的......随便。看看你向服务器发出的 AJAX 请求返回了什么。（也许不是你所期望的 - 一个错误代码或者你得到的东西与你 - 或`collection_select`期望的不同）。

我的猜测是您的 .json 视图正在吐回实际的 Javascript，然后（某些东西）尝试解析为 JSON，失败并在某处给出 Javascript 错误消息（中止 Javascript）。同样，追踪其中之一的最简单方法是使用类似 Firebug 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:00:57.120

如果您使用 Firebug 的控制台选项卡，您将看到发出 ajax 请求。然后您可以打开它并查看响应正文。就像 Ryan 建议您请求 JSON 但返回完整的 javascript 一样。因此，如果您要保持这种方式，则必须在回调函数中评估响应，即 eval(data) 或 jQuery 也有一个快捷方式，您可以在其中请求“脚本”类型；但是现在 RJS 已经从 Rails 中删除了，这有点令人不悦。相反，按照 Dan 的建议，将 settings/getstates.json.erb 的内容移动到您的编辑视图中，然后删除 getstates.json.erb 文件。为了帮助您完成这项工作，现在让请求/响应更简单。只需执行此操作并在 Firebug 中检查它以查看发生了什么。之后，将其连接起来以将响应内容转换为您的选项标签

```
$.get("/settings/getstates", function(data){
  console.log(data);
}, 'json') 
```

# prolog - Prolog逻辑流程

> ID：10181409
> 
> 赞同：1
> 
> 时间：2012-04-16T20:44:06.650
> 
> 标签：prolog, logic

我对 Prolog 完全陌生，正在做家庭作业。我的程序应该采用两个长度相等的列表，并执行 D = sqrt((X1-Y1)^2 + (X2-Y2)^2 + ... + (XN-YN)^2)。我已经编写了代码来获得正确的答案，但它没有正确呈现它。我认为这可能是逻辑流程的问题，因为它似乎以无限循环结束。它应该看起来像：

```
?- distance([1,2,3], [2,3,4], D).
D = 1.732051. 
```

我的代码给了我正确的结果，但它的打印结果如下：

```
?- distance([1,2,3],[2,3,4],D).
1.732051
true 
```

只是因为我在那里有一行来打印结果。在我按下回车键之前它也不会结束（没有句点），这就是为什么我担心我有一个循环。如何改写我的代码或重定向我的逻辑，以使其正常打印？

```
distance([],[],D) :-
  F is sqrt(D),
  format("~f~n", [F]).

distance([A|T1], [B|T2], D) :-
  var(D),
  S is (A-B)*(A-B),
  distance(T1, T2, S);
  C is A-B,
  E is C*C,
  F is D+E,
  distance(T1, T2, F). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T22:09:32.210

您的程序不会进入无限循环，否则您很可能会在某些时候遇到堆栈溢出错误。发生的事情是您的代码留下了一个开放的选择点，因此最终解释器尝试重做（不成功）。您没有得到预期的结果，因为调用过程中使用的变量 D 永远不会被绑定。

您最好考虑如何递归地建模它来解决这个问题。在这种情况下，您可以例如在输入列表为空时拆分问题，而当它们不是时（我在这里假设使用空列表调用您的过程将产生 0 结果）。

因此，在这种情况下，您将创建两个子句，一个用于基本情况（空列表），另一个用于递归步骤。我还将使用 prolog 中使用的一种常用方法，该方法包括使用累加器。

因此，我们为 distance/3 创建了一个事实，它将调用另一个使用此累加器的过程：

```
distance(L1,L2,F) :-
    distance(L1, L2, 0, F). 
```

我们使用累加器在您的代码中保存项目差异平方和 (AB)*(AB) 的部分结果：

现在我们从基本情况（空列表）开始：

```
distance([],[],S,F) :-
  F is sqrt(S). 
```

在这里，我们声明当没有更多项目时的结果是累加器的平方根。

我们现在跟随递归步骤，计算每个列表中第一项的平方项差异并进行递归。

```
distance([A|T1], [B|T2], D, SQRT) :-
  S is D+(A-B)*(A-B),
  distance(T1, T2, S, SQRT). 
```

现在我们完成了：

```
?- distance([1,2,3],[2,3,4],D).
D = 1.7320508075688772. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:09:45.147

我不明白该`format`功能的使用，所以我所能做的就是提供我自己的尝试。我认为您的尝试有一个缺点，即在递归的基本情况方面没有明确说明。

考虑以下我的方法：

```
distance([],[],0).
distance([A],[A],0).
distance([A|T1],[B|T2],D) :-
    distance(T1,T2,F),
    D is sqrt((A-B)*(A-B) + F*F). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T22:11:36.400

我认为你应该使用累加器：

```
distance(L1, L2, D) :- 
    distance(L1, L2, 0, D).

distance([], [], TT, D) :-
    D is sqrt(D).

distance([X1 | Y1], [X2 | Y2], TT, D) :-
    TT1 is TT + (X1 - X2) * X1 - X2),
    distance(Y1, Y2, TT1, D). 
```

# sql-server - 表值函数、表变量和“必须声明标量变量”错误消息

> ID：10181410
> 
> 赞同：3
> 
> 时间：2012-04-16T20:44:10.333
> 
> 标签：sql-server

我正在构建一个返回表结果的函数

```
ALTER FUNCTION [brm].[fnComputeScores_NEW]
(
    @var1 TINYINT
)
RETURNS 
@ret TABLE
(
    [producerid] INT
    ,[CityId] INT
    , CityName VARCHAR(100)
)
AS 
BEGIN

INSERT INTO @ret
        SELECT [producerid], [CityId] from producers

--placeholder

RETURN
END 
```

到目前为止一切都很好

但是我想放在占位符中的代码

```
UPDATE @ret
SET
    CityName = Cities.Name
FROM
    @ret JOIN Cities
        ON @ret.CityId= Cities.CityId 
```

产生编译错误

> 必须声明标量变量“@ret”。

为什么？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:50:27.087

您不能在`FROM`. 这不是`UPDATE`……来自[http://msdn.microsoft.com/en-us/library/ms175010.aspx](http://msdn.microsoft.com/en-us/library/ms175010.aspx)：

> 在 FROM 子句之外，必须使用别名来引用表变量...

...所以你可以尝试：

```
UPDATE r
SET
    r.CityName = c.Name
FROM
    @ret AS r 
    INNER JOIN dbo.Cities AS c
    ON r.CityId = c.CityId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:00:21.817

我和OP有同样的问题。我在函数中有表变量，但出现错误

```
"Invalid use of side-effecting or time-dependent operator in 'UPDATE' within a function" 
```

除了，当我更改更新语句以使用表变量的实际名称而不是别名时，它起作用了。该函数是一个多语句函数，表变量是结果表（在函数开头定义）。不知道为什么它会起作用，但我建议尝试将其作为解决方案。

例如，我改变了：

```
update c
set column1=c.someValue+o.someValue
from @table as c inner join [otherTable] o on c.ID=o.ID 
```

进入：

```
update @table
set column1=c.someValue+o.someValue
from @table as c inner join [otherTable] o on c.ID=o.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T14:52:31.177

您不必使用别名；您实际上可以执行以下操作：（问题似乎出在 SQL 解析器中）。注意@ret 周围的括号。

```
UPDATE @ret
SET
    CityName = Cities.Name
FROM
    @ret JOIN Cities
        ON [@ret].CityId= Cities.CityId 
```

# iphone - 自定义背景在视图更改时没有动画

> ID：10181415
> 
> 赞同：0
> 
> 时间：2012-04-16T20:44:32.937
> 
> 标签：iphone, ios, xcode

我的标准视图和我在其中声明的分组 uitableview 有自定义背景

//RooViewController

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:NO]; //Hides the navigation bar

    //Add custom background
    self.view.backgroundColor = [UIColor clearColor];
    self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.png"]];

    [super viewWillAppear:animated];
} 
```

//GroupedTableviewController

```
- (void)viewWillAppear:(BOOL)animated
{      
    //Add custom background
    self.tableView.backgroundColor = [UIColor clearColor];
    self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgplain.png"]];

    [super viewWillAppear:animated];
} 
```

问题是视图只是消失并重新出现，但是视图之间会发生动画从左到右滑动...如何将这些自定义背景添加到此视图更改动画中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:50:30.493

您需要设置正在出现的视图的背景视图，而不是父视图控制器的视图。通过设置父视图控制器的视图，您实际上是在切换该视图（不会动画），而出现的视图控制器的视图（显然是清晰的）是动画的。相反，添加背景视图到出现的视图控制器视图，或者在你的情况下，只需设置颜色：

`self.view.backgroundColor = UIColor colorWithPatternImage:[UIImage imageNamed:@"bgplain.png"]];`

我还注意到您在根视图控制器中更改了 parentView 的背景视图，这意味着父视图可能是 UINavigationView （也根据您的评论）。一般来说，您不应该更改 navigationController 的视图特性，主要是因为它旨在容纳其他视图/控制器，而不是显示自己的视图（当然，除了导航栏）。

所以我认为你不应该在每个视图控制器中搞乱`self.parentViewController.view`并坚持下去。`self.view`

# php - 更改 mySQL 中为零的列值

> ID：10181418
> 
> 赞同：-1
> 
> 时间：2012-04-16T20:44:44.377
> 
> 标签：php, mysql, sql, database

编辑：

桌子是巨大的！我可以进行备份，然后在本地尝试，如果一切顺利，我可以在服务器上复制相同的内容，但正如我所说，数据库有将近 500mb，它确实很大。感谢那些帮助过我的人：）

我想更改单元格值为 0 的“inside_position”列中的值

```
update TABLE_NAME SET inside_position=100 where inside_position=0; 
```

我不能把这个搞砸，所以我不会为此设置试错法。

希望您能够帮助我。

```
|Product_ID||Product_Code||Inside_position|
|   403    ||   EH009KP  ||       0       |
|   503    ||   GHSJSKD  ||       0       |
|   603    ||   KANSDAS  ||       1       |
|   703    ||   KJNKANS  ||       0       |
|   803    ||   KJHEERF  ||       0       |
|   903    ||   NBVDHQE  ||       5       |
|   910    ||   PKMRQEM  ||       0       |
|   980    ||   990KMNJ  ||       0       |
------------------------------------------- 
```

此表描述了我的问题，我想将 0 更改为 100。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:46:54.263

您发布的代码很好吗？

```
 update TABLE_NAME SET inside_position=100 where inside_position=0 
```

如果您担心它不起作用，为什么不将数据复制到一个虚拟表中，然后对它们运行查询，这样您就知道它肯定会起作用:)

# c# - 如何将单元测试应用于需要用户动态输入的 C# 函数？

> ID：10181421
> 
> 赞同：12
> 
> 时间：2012-04-16T20:45:00.560
> 
> 标签：c#, unit-testing, input, tdd

下面的函数从用户那里获取输入。我需要使用`Unit Testing`. 谁能告诉我如何测试这种需要用户动态输入的功能。谢谢

像`boundary value analysis`...

`numberOfCommands`应该`(0 <= n <= 100)`

```
public static int Get_Commands()
{
    do
    {
        string noOfCommands = Console.ReadLine().Trim();
        numberOfCommands = int.Parse(noOfCommands);             
    }
    while (numberOfCommands <= 0 || numberOfCommands >= 100);  

    return numberOfCommands;
} 
```

以编程方式提示将有很大帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T20:55:47.937

创建一个接口，传入接口接收文本。然后，在您的单元测试中，传入一个自动返回一些结果的模拟接口。

编辑代码细节：

```
public interface IUserInput{
    string GetInput();
}

public static int Get_Commands(IUserInput input){
    do{
       string noOfCommands = input.GetInput();
       // Rest of code here
    }
 }

public class Something : IUserInput{
     public string GetInput(){
           return Console.ReadLine().Trim();
     }
 }

 // Unit Test
 private class FakeUserInput : IUserInput{
      public string GetInput(){
           return "ABC_123";
      }
 }
 public void TestThisCode(){
    GetCommands(new FakeUserInput());
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:24:30.153

两个基本的东西：

1.  `Console.ReadLine`是一个外部依赖，应该以某种方式*提供*给你的方法（最好通过依赖注入）
2.  `Console.ReadLine`在底层使用[`TextReader`](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)基类，这就是应该提供的

所以，你的方法需要的是依赖`TextReader`（你可以用你的自定义接口进一步抽象它，但为了测试它就足够了）：

```
 public static int Get_Commands(TextReader reader)
 {
     // ... use reader instead of Console
 } 
```

`Get_Commands`现在，在真实应用程序中，您使用真实控制台调用：

```
 int commandsNumber = Get_Commands(Console.In); 
```

在您的单元测试中，您使用例如`StringReader`类创建假输入：

```
[Test]
public void Get_Commands_ReturnsCorrectNumberOfCommands()
{
   const string InputString = 
       "150" + Environment.NewLine + 
       "10" + Environment.NewLine;
   var stringReader = new StringReader(InputString);

   var actualCommandsNumber = MyClass.Get_Commands(stringReader);

   Assert.That(actualCommandsNumber, Is.EqualTo(10));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T11:41:02.420

您可以使用`Console.SetIn()`and`Console.SetOut()`来定义输入和输出。使用 StringReader 定义测试的输入，使用 StringWriter 捕获输出。

您可以查看我关于该主题的博客文章，以获得更完整的解释和示例： http: [//www.softwareandi.com/2012/02/how-to-write-automated-tests-for.html](http://www.softwareandi.com/2012/02/how-to-write-automated-tests-for.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T20:56:01.260

您可以将输入从文件重定向到标准输入，并在测试中使用它。您可以在程序本身中以编程方式执行此操作，也可以通过运行程序的 shell 执行此操作。

您还可以将所有“用户输入”外推到他们自己的类/函数中，这样就可以轻松地将“从用户那里获取一行文本”的函数替换为“返回此硬编码字符串以进行测试”的函数。如果这些函数中的每一个都在实现公共接口的类中，则可以很容易地将它们切换出来。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-16T20:58:49.053

在 Main() 你可以这样做：

```
int testCommand=Get_Commands();
Console.WriteLine(testCommand); 
```

但是，我不知道这是否是您想要的测试类型。除了简单地测试函数的结果之外，还有更多的问题吗？

# python - 如何将查询结果映射到 sqlalchemy 中的自定义对象？

> ID：10181427
> 
> 赞同：5
> 
> 时间：2012-04-16T20:45:04.280
> 
> 标签：python, sql, orm, sqlalchemy

我正在寻找一种方法来告诉 sqlalchemy 将一些标签上的复杂查询映射到自定义类`MyResult`而不是默认`RowProxy`类。这是一个简单的工作示例

```
'''
create table foo(id integer, title text);
create table bar(id integer, foo_id integer, name text);
insert into foo values(0, 'null');
insert into foo values(1, 'eins');
insert into bar values(0,0, 'nullnull');
insert into bar values(1,0, 'einsnull');
insert into bar values(2,1, 'zweieins');
''' 
```

和以下代码：

```
from sqlalchemy import *
from itertools import imap

db = create_engine('sqlite:///test.db')
metadata = MetaData(db)

class MyResult(object):
    def __init__(self, id, title, name):
        self.id = id
        self.title = title
        self.name = name

foo = Table('foo', metadata, autoload=True)
bar = Table('bar', metadata, autoload=True)

result = select([foo.c.id, foo.c.title, bar.c.name], foo.c.id == bar.c.foo_id).execute().fetchall() 
```

现在我正在寻找一种方法来告诉 sqlalchemy 执行从结果行到 MyResult 的映射。

```
row = result[0]
print type(row)
#<class 'sqlalchemy.engine.base.RowProxy'>
print row.items()
#[(u'id', 0), (u'title', u'null'), (u'name', u'einsnull')] 
```

我知道我可以用类似的东西手动进行映射

```
my_result = imap(lambda x: MyResult(**x), result) 
```

但我觉得这不是在 sqlalchemy 中处理它的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T15:55:25.787

从您的示例中可以看出，将返回超过 1 个 Foo `Foo.id = 0`，这将导致主键的重复值，而这反过来只会导致返回结果集的子集。在这种情况下，您可能`primary_key`还应该将其扩展到其他`Bar`列（如果它是唯一的，则 包含`Bar.id`或使用）。`Bar.name`

然后您可以使用[`from_statement`](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.from_statement)（如[Using Literal SQL](http://docs.sqlalchemy.org/en/latest/orm/tutorial.html?highlight=from_statement#using-literal-sql)中所述）来实现此目的：

```
sql_qry = select([foo.c.id.label("id"), 
                  foo.c.title.label("title"), 
                  bar.c.name.label("name")], 
                 foo.c.id == bar.c.foo_id)
my_result_qry = session.query(MyResult).from_statement(sql_qry)
for x in my_result_qry.all():
    print x 
```

但是，`MyResult`必须映射模型。您可以将其映射到一些虚拟（不存在的）表或视图。列的`label`s 也很重要，因为它们必须与类的列定义完全匹配（无论如何都**不会使用构造函数）。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T21:52:54.537

通过直接调用`select`，您将忽略 ORM 功能。您需要在课堂上[`mapper`](http://docs.sqlalchemy.org/en/latest/orm/mapper_config.html)使用`MyResult`。正如你所拥有的，`MyResult`只是一个普通的类。

像这样的东西：

```
Foo = mapper(MyResult, foo)
Bar = mapper(MyResult, bar)  # NOTE: MyResult itself is unchanged by this

session = Session()
# query against the mapper class
result = session.query(Foo).filter(Foo.title == 'xyz').one()
print result.name 
```

# jquery - 用于提交表单的 jQuery 加载

> ID：10181428
> 
> 赞同：0
> 
> 时间：2012-04-16T20:45:08.870
> 
> 标签：jquery

我目前正在研究一个多步骤查询表单，可以在以下位置找到：http: [//jsfiddle.net/xSkgH/47/](http://jsfiddle.net/xSkgH/47/)。

我正在尝试通过 jQuery AJAX 提交变量（process.php 将处理处理）并在最后一步用 process.php 中的 div 刷新 div 称为结果。我怎样才能做到这一点？

到目前为止，我已经设法使用 malsup ( [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/) ) 的 jQuery 表单插件来实现这一点。

我想切换到加载请求，并被告知使用以下内容：

```
$ ( '#last-step' ). load ( url , data , function (){}) 
```

它将发送一个发布请求，使用打印到响应 html 中的任何 url 填充“最后一步”的 html 内容。但我不确定如何替换下面的代码并使用.load：

我目前使用的代码可以在这里找到： [http ://codetidy.com/2522/](http://codetidy.com/2522/)

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:56:13.303

```
$('#test').submit( function() {
    var data =  $(this).serialize();
    var url = "http://www.google.com";

    $.post(url, data, function(data) {
      $('#last-step').html(data);
    });

    return false;
}); 
```

如果您可以改用“发布”。

否则，您需要循环所有输入区域并将它们组合成一个对象以与负载一起发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:53:00.590

如果您不想从头开始编写，我建议您寻找 jQuery 向导插件来为您处理步骤和它们之间的导航。做一个快速的谷歌搜索，我发现了一对：

*   [http://techlaboratory.net/products.php?product=smartwizard](http://techlaboratory.net/products.php?product=smartwizard)
*   [http://archive.plugins.jquery.com/project/formwizard](http://archive.plugins.jquery.com/project/formwizard)
*   [http://www.manasinc.com/best-free-jquery-wizard-plugins/](http://www.manasinc.com/best-free-jquery-wizard-plugins/)
*   更多的存在，我敢肯定。:)

做到这一点可能很困难，特别是如果您想使用浏览器历史记录来启用后退按钮以返回之前的步骤，因此请尝试利用现有工作。另外：在选择插件之前确定你想要做什么，这样你就不会在中途遇到限制。

# javascript - 如何通过按javascript / svg中的按钮将形状的半径设置为更大或更小

> ID：10181429
> 
> 赞同：3
> 
> 时间：2012-04-16T20:45:10.347
> 
> 标签：javascript, dom, svg

嗨，我有以下代码，我希望能够通过按下按钮来更改圆的半径，我不知道在样式后使用什么。在 document.getElementById("circle1").style.r="10"; 部分代码

```
<html>
    <head>
    <script>
    function circle() {
        document.getElementById("circle").style.r="50";
}

    function circle1() {
        document.getElementById("circle1").style.r="10";

} 

    </script>

    </head>
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg" >
     <circle id = "circle" cx = "100" cy = "800" r = "30" stroke="blue" stroke-width = "2" fill = "black"/>
     <circle id = "circle1" cx = "20" cy = "500" r = "30" stroke="blue" stroke-width = "2" fill = "black"/>
    </svg>
    <body>
    Set size of circles
    <input type="button" onclick="circle()" value="big" />
    <input type="button" onclick="circle1()" value="small" />
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T21:13:50.100

正如[pp19dd 所指出的，在他的回答](https://stackoverflow.com/a/10181587/82548)中，关键是`setAttribute()`，但是您似乎想要增加/减少元素的`r`属性`circle`（而不是简单地*将*其设置为特定值），您也需要使用`getAttribute()`。

这是一个相当简单的函数和实现，我认为它可以满足您的需求：

```
function circle(delta){
    if (!delta){
        return false;
    }
    else {
        var e = document.querySelectorAll('circle[id^=circle]'),
            changeBy = 10;
        if (delta == 'big'){
            e[0].setAttribute('r',parseInt(e[0].getAttribute('r'),10) + changeBy);
            e[1].setAttribute('r',parseInt(e[1].getAttribute('r'),10) + changeBy);
        }
        else if (delta == 'small'){
            e[0].setAttribute('r',parseInt(e[0].getAttribute('r'),10) - changeBy);
            e[1].setAttribute('r',parseInt(e[1].getAttribute('r'),10) - changeBy);
        }
    }
}

var inputs = document.getElementsByTagName('input'),
    buttons = [];

for (var i = 0, len = inputs.length; i < len; i++) {
    if (inputs[i].type == 'button') {
        inputs[i].onclick = function(){
            circle(this.value);
        }
    }
} 
```

​​<a href="http://jsfiddle.net/davidThomas/QkAB5/" rel="nofollow noreferrer">JS Fiddle 演示。

`r`请注意，我没有对圆圈属性的无效负值进行任何检查。您可能想自己添加。

为了简单起见，我使用`document.querySelectorAll()`了（而不是两次显式调用`document.getElementById()`）。这*将*在 Internet Explorer 中引起[问题](http://www.quirksmode.org/dom/w3c_core.html#t13)，尽管我不确定 SVG 在 Internet Explorer 中的实施情况如何*，*因此它可能不会让事情变得更糟。

尽管如此，IE 9 似乎完美地实现了该演示。这让我惊讶不已..！不过，IE 8 及更低版本，我不能说。

参考：

*   [`document.querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll).
*   [`element.getAttribute()`](https://developer.mozilla.org/en/DOM/element.getAttribute).
*   [`element.setAttribute()`](https://developer.mozilla.org/en/DOM/element.setAttribute).
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T20:55:05.790

要更改属性，请使用**setAttribute()**函数：

```
function circle() {
    document.getElementById("circle").setAttribute('r', "50" );
}

function circle1() {
    document.getElementById("circle1").setAttribute('r', "50" );
} 
```

例如，请参阅此 jsfiddle：http: [//jsfiddle.net/dGmxh/2/](http://jsfiddle.net/dGmxh/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:53:37.580

头部中的函数定义具有相同的名称，并且它们似乎没有右括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T11:14:35.150

或者使用 svg.js 库，它使许多这些 SVG 任务更友好，类似于 jQuery 如何使 JavaScript 更友好。无论如何，在 svg.js 中，您创建一个半径为 1 的圆，然后将其半径更改为 5，如下所示：

```
var circ = draw.circle(1).attr({ cx: 10, cy: 10, fill: 'none', stroke: 'yellow', 'stroke-width': 2 });
circ.attr({ rx: 5, ry: 5 }); 
```

如果要在 500 毫秒内对半径的变化进行动画处理，只需像这样添加 animate() 方法

```
circ.animate(500).attr({ rx: 5, ry: 5 }); 
```

您可以在 onclick() javascript 方法中简单地执行代码的第二行（更改半径的代码）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-16T20:48:22.950

使用点击

[http://www.w3schools.com/jsref/event_onclick.asp](http://www.w3schools.com/jsref/event_onclick.asp)

# memory-management - 如何使用 IMG_LOAD(path) 释放作为参数显式复制的 pSDL_Surface？

> ID：10181439
> 
> 赞同：1
> 
> 时间：2012-04-16T20:45:35.920
> 
> 标签：memory-management, sdl, pascal

*（注意：我用 Pascal 编码）*

在类的创建者中`TQuest`，我使用作为参数给出的 pSDL_Surface 初始化一些对象，如下所示：

`quests.Add( CPopuQuest.create('Get money ! ','Get more than $10,000', IMG_LOAD(MONEY_ICON), 1000, 10) );` （有趣的部分是`IMG_LOAD(MONEY_ICON)`MONEY_ICON 是图像的路径。

当我结束我的程序时，我在这一行的这个 CPopuQuest 对象的析构函数中得到一个错误：

`if badge<>nil then SDL_FreeSurface(badge)`

（徽章是复制由 IMG_LOAD(MONEY_ICON) 实例化的 pSDL_Surface 的属性）

它在大多数情况下都可以工作，但是有时我在关闭程序时仍然会出错...如果有人可以提供帮助:)（如您所见，我对 IMG_LOAD 的工作方式，返回的内容和调用时如何分配内存）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:15:19.077

任何`IMG_Load`返回的东西都可以安全地传递给`SDL_FreeSurface`，即使它返回一个空指针。（因此，您无需`badge <> nil`在调用之前进行检查`SDL_FreeSurface(badge)`。）

如果您在调用 时程序崩溃`SDL_FreeSurface`，那是由于您的程序中存在其他问题。该函数是释放任何`IMG_Load`加载内容的正确方法。这个问题中显示的一切都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:21:20.857

可能是你有内存泄漏。它可能不是表面，而是来自另一个代码。有一次，我犯了一个错误，即越界访问数组，它会更改表面并让调色板点不为空（它应该为空），当我调用 SDL_FreeSurface 时会引发错误。

# c# - 使用 LINQ 从 IGrouping 中选择特定元素

> ID：10181441
> 
> 赞同：3
> 
> 时间：2012-04-16T20:45:53.757
> 
> 标签：c#, linq

```
public class Item
{
    public int Id {get; set;}
    public bool Selected {get; set;}
}

List<Item> itemList = new List<Item>(){ /* fill with items */ }; 
```

我需要创建一个满足以下条件的项目列表。从`itemList`，我需要对项目进行分组`Id`，然后从每个组中选择一个项目。所选项目必须是其中之一`Selected == true`。如果组中没有项目被选中，那么任何项目都可以被选中，没关系，但必须选择一个。

基于这个问题： [How to get distinct instance from a list by Lambda or LINQ](https://stackoverflow.com/questions/1183403/how-to-get-distinct-instance-from-a-list-by-lamba-or-linq)

我能够将以下内容放在一起，这似乎可行：

```
var distinctList = itemList.GroupBy(x => x.Id, 
    (key, group) => group.Any(x => x.Selected) ? 
        group.First(x => x.Selected) : group.First()); 
```

有没有更有效或更简单的方法来实现这一目标？我试过`FirstOrDefault()`但似乎无法让它做我需要的。我对上述代码效率的担忧是对 Any() 的调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:59:31.763

您确实可以使用[`FirstOrDefault`扩展方法](http://msdn.microsoft.com/en-us/library/bb358452.aspx)，但使用[带有谓词的版本，](http://msdn.microsoft.com/en-us/library/bb549039.aspx)并将其与[合并运算符 ( `??`)](http://msdn.microsoft.com/en-us/library/ms173224.aspx)结合起来，如下所示（我在这里使用了查询语法以使其更容易）：

```
var distinctList =
    from item in itemList
    group item by item.Id into g
    select g.FirstOrDefault(i => i.Selected) ?? g.First(); 
```

使用 in 中的谓词`FirstOrDefault`，您将选择`Selected`属性为真的第一个项目。如果没有，那么假设您的类型是引用类型（这对于使用 很重要`FirstOrDefault`），它将返回`null`.

如果返回 null ，那么您将只返回组中的第一个项目（通过调用[`First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)），因为可以返回任何项目，并且如果*没有*`First`项目，组就不能存在（因此始终保证调用成功）。

基本上，您将选择器应用于分组*结果*，而不是*在*分组时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:06:06.930

`bool`您可以使用实现`IComparable<bool>`,`true`大于的事实`false`：

```
var distinctList = itemList.GroupBy(x => x.Id,  
    (key, group) => group.OrderByDescending(x => x.IsSelected).First()); 
```

但是，这需要对整个组进行枚举和排序，所以如果你坚持你的方法，你的表现会更好。

对于具有选定项目的组，您的方法需要将列表迭代两次，直到第一个选定项目的位置。您可以像这样删除该重复项：

```
var distinctList = itemList.GroupBy(x => x.Id,  
    (key, group) => group.FirstOrDefault(x => x.Selected) ?? group.First()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T20:19:56.800

更简单的答案[在这里](https://stackoverflow.com/a/8521200/1303737)

您可以使用

```
groupedSource.SelectMany(group => group).Single(item => item.Id == 1) 
```

# android - Android：支持包Fragment

> ID：10181442
> 
> 赞同：2
> 
> 时间：2012-04-16T20:45:56.743
> 
> 标签：android

我试过这个例子

[http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentPagerSupport.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentPagerSupport.html)

我为 API Level 15 构建并使用支持包。此功能会导致麻烦：

```
@Override
        public Fragment getItem(int position) {
            return ArrayListFragment.newInstance(position);
        } 
```

错误信息：

返回类型与 FragmentPagerAdapter.getItem(int) 不兼容

我发现了一个类似的问题，但我没有明确的解决方案 [无法从 android.support.v4.app.Fragment 转换为 android.app.Fragment](https://stackoverflow.com/questions/8993348/cannot-convert-from-android-support-v4-app-fragment-to-android-app-fragment)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:49:22.840

确保您使用的是此类：`android.support.v4.app.Fragment`而不是`android.app.Fragment`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T21:38:37.923

1.  导入`android.support.v4.app.Fragment`而不是`android.app.Fragment`.
2.  `getSupportFragmentManager()`使用而不是获取片段管理器`getFragmentManager()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T20:50:08.687

有一个 support.v13 可用，使用它。v4 对于 API 15 来说太旧了

# wpf - 将文本附加到静态资源

> ID：10181447
> 
> 赞同：6
> 
> 时间：2012-04-16T20:46:09.700
> 
> 标签：wpf, xaml, string-formatting, staticresource

如果我有标签：

```
<Label Content="{StaticResource Foo}" /> 
```

有没有办法在 xaml 中附加 *？

我正在寻找类似的东西：

```
<Label Content="{StaticResource Foo, stringformat={0}*" /> 
```

我从资源字典中放置控件的内容，因为该应用程序支持多种语言。我想知道是否可以在 xaml 中附加 *，这样我就不必创建一个事件，然后在该事件触发时附加它。

## 编辑：

在资源字典中，我有：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:system="clr-namespace:System;assembly=mscorlib"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                >

     <system:String x:Key="Foo">Name</system:String>

 </ResourceDictionary> 
```

在我的窗口中，我有：（我合并了最后一个字典）

```
 <Label Content="{StaticResource 'Foo'}" /> 
```

并显示名称

**我希望标签显示名称* 而不仅仅是名称**

也许用一种风格来实现这一点是可能的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T21:30:49.060

有多种方法可以做到：

1.  使用[ContentStringFormat](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contentstringformat.aspx)：

    ```
    <Label Content="{StaticResource Foo}" ContentStringFormat='{}{0}*'/> 
    ```

2.  使用[StringFormat 绑定](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)（它仅适用于字符串属性，这就是您需要使用 a`TextBlock`作为`Label`内容的原因）

    ```
    <Label>
       <TextBlock 
           Text="{Binding Source={StaticResource Foo}, StringFormat='{}{0}*'}"/>
    </Label> 
    ```

3.  或者您可以编写一个[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来附加`*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T22:21:02.473

感谢[@nemesv 的](https://stackoverflow.com/users/872395/nemesv)回答，这就是我最终得到的结果：

我创建了以下转换器：

```
using System;
using System.Windows.Data;
using System.Globalization;

namespace PDV.Converters
{
    [ValueConversion(typeof(String), typeof(String))]
    public class RequiredFieldConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return value.ToString() + "*";
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var str = value.ToString();
            return str.Substring(0, str.Length - 2);
        }
    }
} 
```

在我的 app.xaml 文件中，我创建了资源

```
<Application x:Class="PDV.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml"

             xmlns:conv="clr-namespace:PDV.Converters"  <!--  Include the namespace where converter is located-->
             >
    <Application.Resources>
        <ResourceDictionary >
            <conv:RequiredFieldConverter x:Key="RequiredFieldConverter" />
        </ResourceDictionary>
    </Application.Resources>

</Application> 
```

然后在我的应用程序中的任何地方，我都可以将该转换器用作：

```
 <Label Content="{Binding Source={StaticResource NameField}, Converter={StaticResource RequiredFieldConverter} }" /> 
```

# python - 如何在python中将成员函数作为参数传递？

> ID：10181450
> 
> 赞同：29
> 
> 时间：2012-04-16T20:46:13.503
> 
> 标签：python, python-2.7

我想传递类似于成员函数指针的东西。我尝试了以下。

```
class dummy:
    def func1(self,name):
        print 'hello %s' % name
    def func2(self,name):
        print 'hi %s' % name

def greet(f,name):
    d = getSomeDummy()
    d.f(name)

greet(dummy.func1,'Bala') 
```

预期输出为`hello Bala`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-16T20:50:16.460

`dummy.func1`是[unbound](https://stackoverflow.com/questions/114214/class-method-differences-in-python-bound-unbound-and-static)，因此只需要一个显式`self`参数：

```
def greet(f,name):
    d = dummy()
    f(d, name)

greet(dummy.func1,'Bala') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-30T18:23:45.927

由于`dummy`是类名，`dummy.func1`是未绑定的。

正如 phihag 所说，您可以创建一个实例`dummy`来绑定该方法：

```
def greet(f,name):
    d = dummy()
    f(d, name)

greet(dummy.func1, 'Bala') 
```

`dummy`或者，您可以在外部实例化`greet`：

```
def greet(f,name):
    f(name)

my_dummy = dummy()

greet(my_dummy.func, 'Bala') 
```

你也可以使用`functools.partial`：

```
from functools import partial

def greet(f,name):
    f(name)

my_dummy = dummy()

greet(partial(dummy.func1, my_dummy), 'Bala') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T20:52:46.567

你可以使用这样的东西：

```
class dummy:
  def func1(self,name):
      print 'hello %s' % name
  def func2(self,name):
      print 'hi %s' % name
def greet(name):
  d = dummy()
  d.func1(name)
greet('Bala') 
```

这完美地工作：[在键盘上](http://codepad.org/LrPzpquE)

# html - 用作底部边框的图像：可以在“之后”伪元素中重复图像并控制背景大小？

> ID：10181451
> 
> 赞同：0
> 
> 时间：2012-04-16T20:46:13.840
> 
> 标签：html, css

我们尝试使用单个图像作为底部边框没有成功。在此处查看我们的尝试：[仅将边框图像用于底部边框？我们的 CSS 似乎是在整个 div 中复制图像](https://stackoverflow.com/questions/10164393/use-border-image-only-for-bottom-border-our-css-seems-to-replicate-the-image-ac)

现在我们尝试使用“after”伪元素作为边框底部图像。

问题是我们不能在 content 属性中定义图像的大小，也不能让它在伪元素的宽度上重复。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:43:53.320

```
.some-div:after {
    content: '';
    display: block;
    width: 100px; /* example */
    height: 2px;
    background: url('../images/path-to-your-image.png') repeat-x;
} 
```

你只需要根据你的代码添加一些定位（浮动、绝对、任何东西）。

# javascript - Javascript ReferenceError：未定义的变量：Fo rmData

> ID：10181458
> 
> 赞同：0
> 
> 时间：2012-04-16T20:46:40.923
> 
> 标签：javascript, opera, form-data

我在使用下面的代码时遇到问题。该脚本将 2 个变量和一个文件发送到 php-script 以将其上传到服务器。在 Firefox 和 Chrome 中，一切运行顺利，但在 Opera 中我得到“ **ReferenceError: Undefined variable: FormData** ”。

无法在 IE 或 Safari 中测试，因为我使用的是 File API。脚本中还有其他功能，但只有这两个很重要，因为错误是在这里引起的。

```
datumActiviteit = "testxx";
naamActiviteit = "testyy";

function sendFiles() {
try{
    var imgs = document.querySelectorAll(".obj");
    for (var i = 0; i < imgs.length; i++) {
        new BestandenUploaden(imgs[i],imgs[i].file);
    }
}
catch(ex){alert(ex);}

}

function BestandenUploaden(img,file){
try{
    var formData = new FormData();
    formData.append("activiteit", naamActiviteit);
    formData.append("datum", datumActiviteit);
    formData.append("bestand", file);

    var oXHR = new XMLHttpRequest();
    oXHR.open("POST", "launcherV2.php");

    oXHR.onreadystatechange = function (oEvent) {
        if (oXHR.readyState==4 && oXHR.status==200) {
            if (oXHR.responseText == "continue") {
                img.parentNode.lastChild.style.opacity = "1.0";
                img.parentNode.lastChild.style.backgroundColor = "transparent";
                img.parentNode.lastChild.style.backgroundImage = "url(../afbeeldingen/rocket/complete.png)";
            }
            else {
                window.alert(oXHR.responseText);
            }
        }
        else{
            window.alert("readyState or status error :", oXHR.statusText);
        }
    };

    oXHR.send(formData);

}
catch(err){alert(err)};

}; 
```

有谁知道为什么只有 Opera(v11.62) 会抛出这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:05:13.893

[FormData](https://developer.mozilla.org/en/XMLHttpRequest/FormData)仅在 Opera v12 及更高版本中可用：http: [//caniuse.com/#search=FormData](http://caniuse.com/#search=FormData)

# css - 我在哪里将这个条件注释放在 IE 上的渐变背景？

> ID：10181460
> 
> 赞同：0
> 
> 时间：2012-04-16T20:46:50.550
> 
> 标签：css, internet-explorer-9, gradient

好的，我已经搜索了几个小时并找到了答案，但似乎没有一个对我有用。我正在尝试使用在 colorzilla.com 上生成的渐变背景。下面是我的代码。要“完成” ie 9 支持 colorzilla 说： 使用 IE9 支持完整的多级渐变（使用 SVG）。

为所有具有渐变的元素添加一个“渐变”类，并将以下覆盖添加到您的 HTML 以完成对 IE9 的支持：

```
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]--> 
```

但是我一生都无法弄清楚在哪里放置评论或应该在哪里放置“渐变”类

我必须在明天早上把这个上交（啊！）请帮忙！

代码（没有注释）：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<STYLE type=text/css>HTML {
    TEXT-ALIGN: center; FONT-FAMILY: Arial, Helvetica, sans-serif;background: #0067ad; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwNjdhZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUyJSIgc3RvcC1jb2xvcj0iIzI2ODhkMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM2MWExY2MiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #0067ad 0%, #2688d1 52%, #61a1cc 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#0067ad), color-stop(52%,#2688d1), color-stop(100%,#61a1cc)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #0067ad 0%,#2688d1 52%,#61a1cc 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #0067ad 0%,#2688d1 52%,#61a1cc 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #0067ad 0%,#2688d1 52%,#61a1cc 100%); /* IE10+ */
background: linear-gradient(top,  #0067ad 0%,#2688d1 52%,#61a1cc 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0067ad', endColorstr='#61a1cc',GradientType=0 ); /* IE6-8 */
 COLOR: #666666; FONT-SIZE: 18px
}
BODY {
    TEXT-ALIGN: center; FONT-FAMILY: Arial, Helvetica, sans-serif; COLOR: #fffde7; FONT-SIZE: 18px
}
#content {
    TEXT-ALIGN: justify; MARGIN: 0px auto; WIDTH: 720px
}
IMG {
    BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; BORDER-TOP: 0px; BORDER-RIGHT: 0px
}
</STYLE>

<META name=GENERATOR content="MSHTML 8.00.6001.18975"></HEAD>
<BODY>
<p><IMG alt=" Transcender IT Certification Success" 
src="http://www.transcender.com/images/logo.png" width=268 height=64></p>
<p><img src="http://www.transcender.com/images/downpostit.png" alt="Transcender will be right back" width="284" height="280"><BR>
  <BR>
</p>
<DIV id=content>
  <p>Sorry for the inconvenience, but the Transcender website will be 
    unavailable Saturday, April 21st for routine 
    maintenance. Please come back and visit us again on Sunday, April 22nd and get 
    10% off your next order*. Use promo code: <B>MANDOWN12</B>.  <br>
    <br>
    *Offer expires 4/23/12, excludes cd &amp; voucher purchase option
<BR>
    <BR>
    <BR><BR>
  </p>
</DIV></BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:51:26.260

看起来您正在将渐变应用于`HTML`标签，因此您可以将其用于条件块：

```
<!--[if gte IE 9]>
  <style type="text/css">
    html {
       filter: none;
    }
  </style>
<![endif]--> 
```

您可以将它放在上面列出的代码中的块之后（在`</style>`和之间`<meta>`）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T18:13:55.080

您可以像这样将代码放在`<head>`标签中。

```
<head>
    <!--[if gte IE 9]>
      <style type="text/css">
        .gradient {
           filter: none;
        }
      </style>
    <![endif]-->
</head> 
```

# c - 将 char * 转换为 char

> ID：10181463
> 
> 赞同：-1
> 
> 时间：2012-04-16T20:47:04.813
> 
> 标签：c

如何将 char * 转换为 char。

我有一个字符指针

`char * Data` 这有一些价值

我也有一个变量

`char result;`

我可不可以做

`result = *(Data)`?

如果我这样做，它会给我一个空指针赋值。

我想将值存储在循环中不同“数据”值的结果数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:52:03.193

您的代码是正确的，但您需要检查“数据”是否为空 - 这就是您遇到空指针分配的原因。确保您使用“数据”正确地迭代您的 char 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:52:01.307

您没有指定存储在`Data`.

`char *`通常指向一个字符数组。

您可能会得到一个空指针，因为`char* Data`尚未使用任何数据字符串进行初始化。

`result = *Data;`会给你第一个字符，但你必须首先在你的`Data`变量中有数据才能开始

# java - 从实体生成表 - 同步

> ID：10181465
> 
> 赞同：2
> 
> 时间：2012-04-16T20:47:07.633
> 
> 标签：java, jpa, netbeans, annotations, wizard

在 netbeans 中有一个很棒的向导函数可以从数据库（[Entity_Classes_From_Database](http://wiki.netbeans.org/TS_65_Entity_Classes_From_Database)）创建实体。该向导还创建 NamedQueries，如

```
@NamedQuery(name = "Customer.findAll", query = "SELECT c FROM Customer c");
... 
```

自动地。

是否还有一个功能可以反过来做，即让 NetBeans 从我的实体类创建一个数据库（也使用@ManyToOne 注释和其他复杂的模式）？实体的变化是否会反映到数据库中？

还是我必须先研究如何创建好的数据库？您创建企业应用程序的方式如何？我使用的是 NetBeans 而不是 Eclipse，因为有大量的向导（尤其是在涉及基于 REST 的 Web 服务时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:24:08.820

它不是必需的，因为从实体创建 RestService 时命名查询已过时，因为创建的外观具有完全相同的功能。

# cocos2d-iphone - 使用 CCParticleSystemQuad 滚动射击游戏的明星？

> ID：10181467
> 
> 赞同：0
> 
> 时间：2012-04-16T20:47:08.713
> 
> 标签：cocos2d-iphone, scroll, particles

我的初始化函数代码：

```
NSArray *starsArray = [NSArray arrayWithObjects:@"Stars1.plist", @"Stars2.plist", @"Stars3.plist", nil];
    for(NSString *stars in starsArray) {
        CCParticleSystemQuad *starsEffect = [CCParticleSystemQuad particleWithFile:stars];
        [self addChild:starsEffect z:-1];
    } 
```

问题是这些粒子会在几秒钟内出现并完全填满屏幕矩形。但我从一开始就需要满天繁星。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:25:30.640

将它们添加到图层，隐藏图层，然后在所有内容加载完成后取消隐藏图层。这样您就可以设置内容而不是立即显示。

这只是一种方法。另一个想法是在游戏和游戏逻辑过程开始之前将所有图像加载到 Cocos 中。这样在加载图像时就没有暂停和延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:14:38.473

根据[cocos2d 从未来特定时间开始粒子](https://stackoverflow.com/questions/6623611/cocos2d-starting-particles-from-a-specific-time-in-the-future)的答案，您可以手动更新粒子系统。cocos2d-x 中的示例：

```
CCParticleSystemQuad *particle = CCParticleSystemQuad::create("res/Particles/Stars1.plist");
for (int i = 0; i < 10; ++i) {
    particle->update(.1);
} 
```

您可能需要更改间隔以适应粒子。

# entity-framework - 当 2 个人同时保存数据时，Entity Framework 覆盖数据

> ID：10181471
> 
> 赞同：1
> 
> 时间：2012-04-16T20:47:28.067
> 
> 标签：entity-framework, repository-pattern, datacontext, edmx

在一个函数中，我传递相关值的列表并循环它们以将更改保存在数据库中。一切正常，直到 2 个人或更多人使用同一页面更新不同的实体。然后只保存最近进行更改的数据。

```
 public bool UpdatePermanentDifferenceBL(List<PermanentDifferenceProperties>                                permDiffDetails)
   {
       try
       {
           int permanentDifferenceID=0;
           int taxEntityID = 0;
           int mapid = 0;

           //using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required))
           //{

                  Topaz.DAL.PermanentDifference permDiff;

                      for (int i = 0; i < permDiffDetails.Count; i++)
                      {

                          if ((bool)(HttpContext.Current.Session[GlobalConstant.currentDataSet]) == true && (int)(HttpContext.Current.Session[GlobalConstant.snapShotID]) == 0)
                          {
                              using (var ctx = new TopazDbContainer())
                              {

                                   try
                                 {
                                      permanentDifferenceID = permDiffDetails[i].PermanentDifferenceID;
                                      taxEntityID = permDiffDetails[i].TaxEntityID;
                                      mapid = permDiffDetails[i].MapID;

                                      permDiff = new Topaz.DAL.PermanentDifference();

                                      permDiff = ctx.PermanentDifference.Where(p => p.PermanentDifferenceID == permanentDifferenceID && p.TaxEntityID == taxEntityID && p.MapID == mapid).SingleOrDefault();
                                      permDiff.Business = permDiffDetails[i].Business;
                                      permDiff.Interest = permDiffDetails[i].Interest;
                                      permDiff.Corporate = permDiffDetails[i].Corporate;
                                      permDiff.UnallocatedTax = permDiffDetails[i].UnallocatedTax;
                                      permDiff.Total = permDiffDetails[i].Total;
                                      permDiff.ModifiedBy = permDiffDetails[i].ModifiedBy;
                                      permDiff.ModifiedDate = DateTime.Now;
                                      ctx.SaveChanges();

                              }
                           catch (System.Data.OptimisticConcurrencyException ex)
                              {
                                    permanentDifferenceID = permDiffDetails[i].PermanentDifferenceID;
                                    taxEntityID = permDiffDetails[i].TaxEntityID;
                                    mapid = permDiffDetails[i].MapID;
                                    permDiff = new Topaz.DAL.PermanentDifference();                                  
                                    ctx.Refresh(System.Data.Objects.RefreshMode.StoreWins, permDiff);
                                    permDiff = ctx.PermanentDifference.Where(p => p.PermanentDifferenceID == permanentDifferenceID && p.TaxEntityID == taxEntityID && p.MapID == mapid).SingleOrDefault();
                                    permDiff.Business = permDiffDetails[i].Business;
                                    permDiff.Interest = permDiffDetails[i].Interest;
                                    permDiff.Corporate = permDiffDetails[i].Corporate;
                                    permDiff.UnallocatedTax = permDiffDetails[i].UnallocatedTax;
                                    permDiff.Total = permDiffDetails[i].Total;
                                    permDiff.ModifiedBy = permDiffDetails[i].ModifiedBy;
                                    permDiff.ModifiedDate = DateTime.Now;
                                    ctx.SaveChanges();
                                  }

                              }
                      }

                      //ctx.ContextOptions.UseLegacyPreserveChangesBehavior = true;

                  }

               //}

           //using (UnitOfWork uow = new UnitOfWork())
           //{
           //    for (int i = 0; i < permDiffDetails.Count; i++)
           //    {
           //        if ((bool)(HttpContext.Current.Session[GlobalConstant.currentDataSet]) == true && (int)(HttpContext.Current.Session[GlobalConstant.snapShotID]) == 0)
           //        {
           //            Repository.PermanentDifferenceRepository pDiffRepo = new Repository.PermanentDifferenceRepository(uow);
           //            Topaz.DAL.PermanentDifference permDiff = pDiffRepo.GetByEntityId(permDiffDetails[i].PermanentDifferenceID, permDiffDetails[i].TaxEntityID, permDiffDetails[i].MapID);

           //            permDiff.Business = permDiffDetails[i].Business;
           //            permDiff.Interest = permDiffDetails[i].Interest;
           //            permDiff.Corporate = permDiffDetails[i].Corporate;
           //            permDiff.UnallocatedTax = permDiffDetails[i].UnallocatedTax;
           //            permDiff.Total = permDiffDetails[i].Total;
           //            permDiff.ModifiedBy = permDiffDetails[i].ModifiedBy;
           //            permDiff.ModifiedDate = DateTime.Now;
           //            pDiffRepo.ApplyChanges(permDiff);

           //        }

           //        else
           //        {
           //            int snapshotID = (int)(HttpContext.Current.Session[GlobalConstant.snapShotID]);
           //            SnapShotPermanentDifferenceRepository pDiffRepo = new SnapShotPermanentDifferenceRepository(uow);
           //            SnapShotPermanentDifference permDiff = pDiffRepo.GetByEntityId(permDiffDetails[i].PermanentDifferenceID, permDiffDetails[i].TaxEntityID, permDiffDetails[i].MapID,snapshotID);

           //            permDiff.SnapshotID = snapshotID;
           //            permDiff.Business = permDiffDetails[i].Business;
           //            permDiff.Interest = permDiffDetails[i].Interest;
           //            permDiff.Corporate = permDiffDetails[i].Corporate;
           //            permDiff.UnallocatedTax = permDiffDetails[i].UnallocatedTax;
           //            permDiff.Total = permDiffDetails[i].Total;
           //            permDiff.ModifiedBy = permDiffDetails[i].ModifiedBy;
           //            permDiff.ModifiedDate = DateTime.Now;
           //            pDiffRepo.ApplyChanges(permDiff);

           //        }
           //    }
           //    uow.SaveChanges();
               return true;
           }
       catch (Exception ex)
       {
           TopazErrorLogs.AddTopazErrorLogBL(ex, 1, 1);
           throw new TopazCustomException(GlobalConstant.errorMessage);

       }

   } 
```

非常感谢任何紧急援助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:38:58.437

解决此问题的常用方法是向要处理并发的每个表添加额外的列。此列将具有`ROWVERSION`或`TIMESTAMP`数据类型。在 EDMX 中映射表后，您将获得一个新的计算类型属性`byte[]`并将其并发模式设置为固定。此设置将强制 EF 向每个 UPDATE 或 DELETE 语句添加额外的 WHERE 条件，以验证该行版本与从数据库加载记录时的版本相同。如果行版本不同（另一个线程更新了记录），则找不到修改的记录，您将获得异常。

每次您自动更新记录时，数据库都会更改该值。您只需要确保您的实体使用从数据库加载实体时检索到的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:13:16.647

道歉所有的视图状态，在某种程度上，会话是罪魁祸首，而不是 EntityFramework。

# maven - 如何在程序集中包含父源的源

> ID：10181473
> 
> 赞同：2
> 
> 时间：2012-04-16T20:47:33.227
> 
> 标签：maven

我在我的顶级项目（父级）中执行了一个程序集。我提取所有源代码以允许客户端编译项目。

问题是除了它自己的父项目之外的所有内容都被提取（如此处所述[）](http://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-source-inclusion-simple.html)。当然这不是一个真正的问题，因为它不包含源代码，但需要从提取的源代码编译项目。

那么我怎样才能将父级包含在他自己的程序集中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:51:18.407

最后，我只为父级添加了一个文件集：

```
<fileSets>
    <fileSet>
        <excludes>
            <exclude></exclude>
        </excludes>
        <includes>
            <include>*pom.xml</include>
            <include>src/**</include>
        </includes>
        <outputDirectory></outputDirectory>
    </fileSet>
</fileSets>
<moduleSets>
    <moduleSet>
        <includes>
            <include>com.xxx</include>
            <include>com.xxx</include>
        </includes>
        <sources>
            <excludeSubModuleDirectories>false</excludeSubModuleDirectories>
            <fileSets>
                <fileSet>
                    <excludes>
                        <exclude>**/target/**</exclude>
                    </excludes>
                </fileSet>
            </fileSets>
        </sources>
    </moduleSet>
</moduleSets> 
```

我为孩子的资源保留了模块，效果很好。谢谢大家

# objective-c - 目标 C - 使用 ASIHTTPRequest 来自 GET 的 HTTP/0.9 响应

> ID：10181474
> 
> 赞同：10
> 
> 时间：2012-04-16T20:47:40.023
> 
> 标签：objective-c, ios, rest, https, asihttprequest

我已经开始在我的 iOS 项目中使用 ASIHTTPRequest 来执行 REST 服务器方法调用，并且到目前为止非常成功。我只有一个奇怪的间歇性问题。偶尔我会从使用 [ASIHTTPRequest startAsynchronous] 得到以下响应：

HTTP/0.9 200 正常

发生这种情况时，我的服务器方法不会被调用。通常每个方法调用都会返回一个以“HTTP/1.1”开头的响应。我正在使用带有 GeoTrust/RapidSSL 证书的 HTTPS 来保护连接。有趣的是，我发现如果我尝试连接到 SSL 端口（443）但指定“http”作为协议，我会得到相同的“HTTP/0.9 200 OK”响应。

只是为了添加更多信息 - 问题主要发生在应用程序闲置一段时间后。例如，请求成功完成，然后让应用程序空闲一段时间，然后在下一个请求时出现问题，然后应用程序继续正常工作。

任何人都可以阐明可能发生的事情吗？

非常感谢，乔纳森

更新：当问题发生时，我已经粘贴了 ASIHTTPRequest 输出的一些调试信息：

```
2012-07-12 09:35:49.376 mytestapp[3038:18f07] [CONNECTION] Closing connection #13 because it has expired
2012-07-12 09:35:49.377 mytestapp[3038:18f07] [CONNECTION] Closing connection #14 because it has expired
2012-07-12 09:35:49.378 mytestapp[3038:18f07] [CONNECTION] Closing connection #15 because it has expired
2012-07-12 09:35:49.380 mytestapp[3038:18f07] [CONNECTION] Request #39 will use connection #16
2012-07-12 09:35:49.381 mytestapp[3038:18f07] [CONNECTION] Request #40 will use connection #17
2012-07-12 09:35:49.382 mytestapp[3038:18f07] [CONNECTION] Request #41 will use connection #18
2012-07-12 09:35:49.529 mytestapp[3038:18f07] [STATUS] Request <ASIHTTPRequest: 0x88a1e00> finished downloading data (0 bytes)
2012-07-12 09:35:49.529 mytestapp[3038:18f07] [STATUS] Request <ASIHTTPRequest: 0x88a1e00> received response headers
2012-07-12 09:35:49.530 mytestapp[3038:18f07] [AUTH] Request <ASIHTTPRequest: 0x88a1e00> has passed Basic authentication
2012-07-12 09:35:49.530 mytestapp[3038:18f07] [CONNECTION] Got no keep-alive header, will keep this connection open for 60.000000 seconds
2012-07-12 09:35:49.530 mytestapp[3038:18f07] [CONNECTION] Request #41 finished using connection #18
2012-07-12 09:35:49.531 mytestapp[3038:18f07] [STATUS] Request finished: <ASIHTTPRequest: 0x88a1e00>
2012-07-12 09:35:49.531 mytestapp[3038:15803] responseHeaders={
}
2012-07-12 09:35:49.531 mytestapp[3038:18f07] [STATUS] Request cancelled: <ASIHTTPRequest: 0x88a1e00>
2012-07-12 09:35:49.532 mytestapp[3038:18f07] [STATUS] Request cancelled: <ASIHTTPRequest: 0x88a0200>
2012-07-12 09:35:49.532 mytestapp[3038:18f07] [STATUS] Request <ASIHTTPRequest: 0x88a0200>: Cancelled
2012-07-12 09:35:49.532 mytestapp[3038:18f07] [CONNECTION] Request #39 failed and will invalidate connection #16
2012-07-12 09:35:49.533 mytestapp[3038:18f07] [STATUS] Request cancelled: <ASIHTTPRequest: 0x88a0a00>
2012-07-12 09:35:49.533 mytestapp[3038:18f07] [STATUS] Request <ASIHTTPRequest: 0x88a0a00>: Cancelled
2012-07-12 09:35:49.533 mytestapp[3038:18f07] [CONNECTION] Request #40 failed and will invalidate connection #17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:50:51.397

在这种情况下不确定 IOS 细节，但 HTTP 0.9 已完全放弃。这有明确的原因 - 它不支持“Host：”标头。这意味着单个 IP 根本无法拥有虚拟主机。这些东西在 90-s 结束时变得过时了。

这种反应在现实生活中不应该发生。如果仍然发生，则某些客户端发出了诸如“GET / HTTP/0.9”之类的请求。但是这些客户在大约 15 年前就消失了。

SSL 是 HTTP 不太了解的东西。所以我相信这不相关。设置 SSL 隧道，然后运行纯 HTTP。

作为结论，我会说您或某人可能触发了过时的方法。而IOS可能只是不知道如何处理它。也许 IOS 方法是包含主机名的有限方法，因此它不会触发。无论如何，如果客户真的在说 0.9，你不应该担心它，因为它无论如何都没有从大多数网站得到正确的答案。如果客户端说 1.1 而你回答 0.9，那么可能会以某种方式误解请求，并且会出现回退机制到最低的 HTTP 版本。也许您忘记为请求设置主机名或在其中出现语法错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:34:40.143

在网络上有一些关于这个问题的提及，基本上它与持久连接有关，当 Content-length 标头和一些错误服务器返回的内容本身出现问题时。它可能会搞砸浏览器和 iOS 框架，而且他们实际上并没有注意到标题。

这是[可能的解释之一](http://forums.mozillazine.org/viewtopic.php?f=38&t=1121915)。

尝试禁用持久连接，它应该会有所帮助。这个[建议](https://groups.google.com/d/msg/asihttprequest/fj4_Aln1Fe0/PCWprtSNhUAJ)来自 ASIHTTPRequest 的开发人员（情况非常相似）。

```
[httpRequest setShouldAttemptPersistentConnection:NO]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T22:02:32.960

`HTTP/0.9 200 OK`是一个不存在的消息头。HTTP/0.9 被定义为 request: `GET <Request-URI> HTTP/0.9 <CRLF>`，对其的响应是`[Entity-Body]`，没有任何状态行或标头。(<urn:ietf:rfc:1945>)

你的软件某处有错误。我猜该请求要么失败，要么尚未收到。

# c# - 使用字体类时这些符号 (& ~ |) 是什么意思

> ID：10181475
> 
> 赞同：3
> 
> 时间：2012-04-16T20:47:40.660
> 
> 标签：c#

我有以下代码

```
Font oldf;
Font newf;

oldf = this.richText.SelectionFont;

if (oldf.Bold)
  newf = new Font(oldf, oldf.Style & ~FontStyle.Bold);
else
  newf = new Font(oldf, oldf.Style | FontStyle.Bold); 
```

我知道那个代码，但我不知道这些符号 &,| 是什么意思 和 ~ 。
这些意思是（和，或，不是）还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:50:59.470

是的，

[& 是逻辑和](http://msdn.microsoft.com/en-us/library/sbf85k1c%28v=vs.100%29.aspx)

[| 是逻辑或](http://msdn.microsoft.com/en-us/library/kxszd0kx%28v=vs.100%29.aspx)

检查这些链接以获取描述。

[单击此处查看所有 C# 运算符说明](http://msdn.microsoft.com/en-us/library/6a71f45d%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:51:47.973

它们是按位运算。 `|`是 OR`&`是 AND，并且`~`不是。

您正在比较枚举的标志，因此每个（`Style`，`Bold`等）都是一个数字，是 2 的幂。使用标志进行位操作的神奇之处在于，两个标志的按位或将设置两个位。通过使用位掩码，某人可以确定您将哪些值进行或运算，或者是否使用了特定的“枚举”。

第一行要求`Style`设置为 true AND 的字体不是`Bold`。

第二个是寻找带有`Style`OR的字体`Bold`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:59:35.657

就像其他人所说的那样，它们是按位运算符。 `FontStyle`是一个位域（标志集）。

* * *

```
oldf.Style & ~FontStyle.Bold 
```

这意味着“删除粗体”，但查看底层数学，你会得到这样的*东西*。

```
(a) FontStyle.Bold  = 0b00000010;  // just a guess, it doesn't really matter
(b) oldf.Style      = 0b11100111;  // random mix here
// we want Bold "unset"
(c) ~FontStyle.Bold = 0b11111101;
=> (b) & (c)        = 0b11100101;  // oldf without Bold 
```

* * *

```
new Font(oldf, oldf.Style | FontStyle.Bold) 
```

这意味着我们要加粗字体。通过将其与存在值进行或运算（这也意味着已经为粗体的内容将保持粗体）。

```
(a) FontStyle.Bold  = 0b00000010;  // just a guess, it doesn't really matter
(b) oldf.Style      = 0b11100000;  // random mix here
=> (b) | (c)        = 0b11100010;  // oldf with Bold 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T20:50:51.543

你是对的，它们是逻辑位运算符。

```
new Font(oldf, oldf.Style & ~FontStyle.Bold); 
```

具有从你的整体风格中删除粗体属性的效果（当我开始时，这些对我来说总是有点倒退，不得不用和一些东西来摆脱它，但你会习惯的）。

```
new Font(oldf, oldf.Style | FontStyle.Bold); 
```

ORing 会将粗体枚举添加到您的样式中。

读一读，然后用一点纸弄清楚发生了什么，它非常聪明，而且这种编码到处都在使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T20:51:04.930

它们是逻辑位运算符。

这：

```
newf = new Font(oldf, oldf.Style & ~FontStyle.Bold); 
```

采用旧字体样式并通过对除（按位否定）粗体之外的每一位执行按位与来删除粗体。

然而这：

```
newf = new Font(oldf, oldf.Style | FontStyle.Bold); 
```

正在设置由 FontStyle.Bold 表示的位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T20:53:04.783

这些是按位运算符：http: [//msdn.microsoft.com/en-us/library/6a71f45d%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/6a71f45d%28v=vs.71%29.aspx)（“逻辑（布尔和按位）”行）

基本上，它们在位级别上工作。& 是与，| 是 OR，~ 不是。这是一个例子：

```
00000001b & 00000011b == 00000001b (any bits contained by both bytes)
00000001b | 00001000b == 00001001b (any bits contained in either byte)
~00000001b == 11111110b (toggle all bits) 
```

我在这里使用了单字节，但它也适用于多字节值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T20:55:56.330

变量是位标志枚举。因此，您可以将它们与按位与运算符“$”一起使用，或者将它们与按位或运算符“|”一起使用。

它们与枚举一起使用，因此允许您在下面指定多个选项示例。

```
[Flags]
enum Numbers {
  one = 1   // 001
  two = 2   // 010
  three = 4 // 100
}   

var holder = Numbers.two | Numbers.one; //one | two == 011

if ((holder & Numbers.one) == Numbers.one) {
  //Hit
}

if ((holder & Numbers.two) == Numbers.two) {
  //Hit
}

if ((holder & Numbers.three) == Numbers.three) {
  //Not hit in this example
} 
```

# c++ - 阅读表单中的数据竞赛 openMP 共享内存

> ID：10181485
> 
> 赞同：1
> 
> 时间：2012-04-16T20:48:55.433
> 
> 标签：c++, openmp, shared-memory

我知道在 openMP 编程中，将数据写入共享变量需要特定的仪式来防止数据竞争情况。但是，纯粹从可变场景中读取是否可能发生赛车情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:24:50.023

虽然并发读取内存位置是安全的，但如果读取更新某些内部状态，则从数据结构并发读取通常可能会导致竞争。两个例子是展开树（在读取时进行自我调整），以及为读取保留内部统计信息的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:10:27.793

在纯粹的阅读场景中，不可能有竞争条件。竞争条件仅在有写入时发生在读取中，因为它对您将读取的内容没有确定性（它可能是您读取的旧值或新写入的值）。

# cuda - CUDA 编程 - 共享内存配置

> ID：10181489
> 
> 赞同：1
> 
> 时间：2012-04-16T20:49:02.570
> 
> 标签：cuda, shared-memory

您能否解释一下在 CUDA 编程中使用“16 KB 共享内存 + 48K L1 缓存”或“48 KB 共享内存 + 16 KB L1 缓存”之间的区别？在时间执行中我应该期待什么？我什么时候可以期待更小的 GPU 时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:55:52.080

在 Fermi 和 Kepler nVIDIA GPU 上，每个 SM 都有一个 64KB 的内存块，可以配置为 16/48 或 48/16 共享内存/L1 缓存。您使用哪种模式取决于您的内核使用了多少共享内存。如果您的内核使用大量共享内存，那么您可能会发现将其配置为 48KB 共享内存可以提高占用率，从而获得更好的性能。

另一方面，如果您的内核根本不使用共享内存，或者每个线程只使用非常少量的内存，那么您可以将其配置为 48KB L1 缓存。

使用 CUDA 工具包中包含的电子表格可以最好地说明“非常少量”是多少，也可以[在此处](http://developer.nvidia.com/nvidia-gpu-computing-documentation)获得。此电子表格允许您调查每个块的不同共享内存和不同块大小的影响。

# c# - 用自定义 While 循环替换 WPF 故事板

> ID：10181496
> 
> 赞同：0
> 
> 时间：2012-04-16T20:49:42.703
> 
> 标签：c#, .net, wpf, storyboard

我想**用一些自定义的 WHILE 循环替换 WPF Storyboard**以检查是否可行。我的代码如下。

```
public void RestartAnimation(int seconds)
{
            da.From = this.ActualWidth; 
            da.To = -ContentActualWidth; 
            da.RepeatBehavior = RepeatBehavior.Forever;
            da.Duration = new Duration(TimeSpan.FromSeconds(seconds));
            Timeline.SetDesiredFrameRate(da, 15);

            if (sb.Children.Count == 0)
            {
                sb.Children.Add(da);
                Storyboard.SetTargetProperty(da, new PropertyPath("(Canvas.Left)"));
                Storyboard.SetTarget(da, cp);
                sb.Begin();
            }
} 
```

我想它应该是一些 Timer & WHILE 里面......

任何线索如何做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:17:53.187

我想说，不要使用 while 或任何其他循环，因为那样你会在循环运行时冻结你的程序。最简单的方法（不一定是最好的）是设置一个定时器，它每帧执行一次左右，因此每秒执行 30-120 次，并逐步让你的动画检测在定时器调用之间实际传递了多少实时时间。

因此，如果您需要以每秒 10 个单位的速度移动对象，并且您的计时器以某个快速间隔执行，我会找到最后一次计时器调用的时间，即当前时间，找到 dT(Time Change) , 并做 dT*10, 移动物体的单位数。

随着计时器的迭代，您应该会看到对象移动而不会冻结您的软件。

# php - 获取使用 file_put_contents 创建的文件大小

> ID：10181498
> 
> 赞同：1
> 
> 时间：2012-04-16T20:49:52.147
> 
> 标签：php

我正在使用**file_put_contents**上传文件。有什么方法可以像使用 *move_uploaded_file* 一样计算文件大小？我相信字符串长度和文件大小是两个不同的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:52:15.507

根据与[file_put_contents](http://us2.php.net/file_put_contents)返回值相关的文档：

> 该函数返回写入文件的字节数，失败时返回 FALSE。

因此，您应该能够执行以下操作：

```
$filesize = file_put_contents($myFile, $someData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:02:55.207

有一个函数`filesize()`可以计算文件的大小。您将文件路径作为参数传递：

```
$filesize = filesize("myfiles/file.txt"); 
```

然后，您可以使用这样的函数来格式化文件大小以使其更加用户友好：

```
function format_bytes($a_bytes) {
    if ($a_bytes < 1024) {
        return $a_bytes .' B';
    } elseif ($a_bytes < 1048576) {
        return round($a_bytes / 1024, 2) .' KB';
    } elseif ($a_bytes < 1073741824) {
        return round($a_bytes / 1048576, 2) . ' MB';
    } elseif ($a_bytes < 1099511627776) {
        return round($a_bytes / 1073741824, 2) . ' GB';
    } elseif ($a_bytes < 1125899906842624) {
        return round($a_bytes / 1099511627776, 2) .' TB';
    } elseif ($a_bytes < 1152921504606846976) {
        return round($a_bytes / 1125899906842624, 2) .' PB';
    } elseif ($a_bytes < 1180591620717411303424) {
        return round($a_bytes / 1152921504606846976, 2) .' EB';
    } elseif ($a_bytes < 1208925819614629174706176) {
        return round($a_bytes / 1180591620717411303424, 2) .' ZB';
    } else {
        return round($a_bytes / 1208925819614629174706176, 2) .' YB';
    }
} 
```

# matlab - 下标索引必须是实数正整数或逻辑数。在 MatLab 中使用 findpeaks

> ID：10181500
> 
> 赞同：0
> 
> 时间：2012-04-16T20:49:57.213
> 
> 标签：matlab, data-analysis

我一直在 MatLab 中使用 findpeaks 来定位波形的最大值和最小值，没有问题，但在过去 20 分钟左右出现错误：

> ？？？下标索引必须是实数正整数或逻辑数。

出现了一个我不知道为什么。即使用测试数据尝试简单的练习也会导致同样的错误。例如，如果我有数据集：

```
test = [ 0.1 0.5 0.9 0.5 0.2 0.6 1.0 0.7 0.3 0.1 ] 
```

并使用了代码：

```
peaks = test(findpeaks(test)); 
```

我希望结果：

```
peaks = [0.1 0.9 0.2 1.0 0.1 ] 
```

但由于某种原因，情况不再如此。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:54:34.490

[Findpeaks](http://www.mathworks.com/help/toolbox/signal/ref/findpeaks.html)返回峰值，而不是它们的索引。试试这个。

```
peaks=findpeaks(test) 
```

如果您还想找到局部最小值，

```
peaks = [findpeaks(test) -findpeaks(-test)] 
```

# mysql - 获取相关信息 MySQL Query

> ID：10181511
> 
> 赞同：0
> 
> 时间：2012-04-16T20:50:35.433
> 
> 标签：mysql

我有一个关于从 MySQL 数据库获取信息的问题。

上下文如下：

我有两张桌子，一张叫**品牌**，另一张叫**模型**（关于汽车）。

**品牌**表有 2 列：*id*和*name*。表模型有 3 列**：***id*、*brand*、*name*。

表模型中的品牌列根据表品牌存储对应的品牌id。

作为咨询，我的标准查询是：

```
SELECT * FROM model 
```

...获取表模型中的所有信息，例如

```
id=1, brand=1, model=modelName. 
```

从咨询到表模型，我应该对查询进行哪些更改以获取品牌名称而不仅仅是其 ID？例如

```
id=1, brand=brandName, model=modelName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:59:14.943

你可以试试这个

```
SELECT m.id, b.name, m.name FROM model m, brand b WHERE m.brand = b.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:55:00.603

像这样？

```
SELECT brands.brand, model.* FROM brands JOIN  models ON brands.id=models.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:53:51.153

尝试内连接

```
SELECT model.id, brand.brandName, model.modelName 
FROM model
INNER JOIN brand on model.id = brand.id 
```

# ipad - WebView 中的 Svg 渲染在 iPad3 上被像素化

> ID：10181512
> 
> 赞同：0
> 
> 时间：2012-04-16T20:50:36.890
> 
> 标签：ipad, uiwebview, webview, svg, titanium

我正在使用 Titanium SDK 开发移动应用程序（用于 iPad）。在 iPad1 和 iPad2 上一切正常。但在 iPad3 上，我的 Svg 图形画得很丑。我正在处理许多不同大小的 WebView 以显示 Svg。一些 WebView 进行了应有的渲染，但在一些 WebView 中，Svg 看起来像缩放的 png 或 jpg。Svg 是按需创建的，并嵌入到 html 中。Svg 样式由 CSS 完成。

我不知道为什么会发生这种情况......？

你的帮助会很棒！

THX 塔斯社

链接到屏幕截图 [在此处输入链接描述](http://dl.dropbox.com/u/69839046/IMG_0039.PNG)

# android - 有没有办法让我在我的 Android 应用程序中制作一个类似于 ICS 语音输入屏幕并带有闪烁的红光的屏幕？

> ID：10181522
> 
> 赞同：1
> 
> 时间：2012-04-16T20:51:09.763
> 
> 标签：android, voice

我正在制作一个语音转录软件，如果我可以复制您在 Android 上使用语音输入时显示的 UI 和 UI 样式会很好吗？

如果您不知道我的意思，这就是它的外观：[图片在这里](http://gottabemobile.wpengine.netdna-cdn.com/wp-content/uploads/2011/12/ICS-Screen15.jpg)

我这样做有什么选择？Google 是否提供任何类型的 API，或者有什么方法可以让我为我的应用窃取这个漂亮的屏幕？关键是我不想使用谷歌的语音搜索......我想录制音频并将其发送给人类转录，但我非常喜欢 UI，并希望在我的应用中使用类似的 UI .

# android - 在 android 的 listview 上列出来自 mysql 的结果

> ID：10181524
> 
> 赞同：0
> 
> 时间：2012-04-16T20:51:23.103
> 
> 标签：android, mysql, listview

我正在编写本教程，它是关于使用 Json 和 php 脚本查询 mysql 数据库，一切都很好，但我正在努力将您在 ListView 中看到的这些结果列出，而不是像您一样作为 TextView见下文。这似乎很容易，但我无法通过用 ListView 替换 TextView 来使其工作。图片：

![](../Images/33831943f9fe904e008d6f1e455b2355.png)

这是教程（里面的代码）： [http ://blog.erlem.fr/fr/applications-mobiles/android/27-android-blog/applications-mobiles/android/59-android-connexion-a-mysql-a -laide-de-php.html](http://blog.erlem.fr/fr/applications-mobiles/android/27-android-blog/applications-mobiles/android/59-android-connexion-a-mysql-a-laide-de-php.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:59:38.263

*以下所有内容都假设您已经将 JSON 解析为一个数组。请参阅[此以获取解析帮助。](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/ "这")*

ListViews 使用适配器来获取元素以填充列表行。您必须通过 List 或数组（ArrayList，你有什么）将 JSON 结果输入 SimpleListAdapter。

从[这个关于列表视图的页面](http://mylifewithandroid.blogspot.com/2008/03/my-first-meeting-with-simpleadapter.html)：

```
SimpleAdapter nommes = new SimpleAdapter( 
this, 
list,
R.layout.main_item_two_line_row,
new String[] { "line1","line2" },
new int[] { R.id.text1, R.id.text2 } ); 
```

（在您的情况下，您可以使用单行布局或本示例中的两行布局来显示/隐藏 id/name）

然后应用适配器

```
listView.setAdapter(nommes); 
```

**编辑：**

```
jObject = new JSONObject("<your JSON string from provider>");

// in my case: 

res = jObject.getJSONObject("results");

**dataAdapter = new ArrayAdapter<String>(this, R.layout.item, R.id.itemName);**

try {
  for (int r = 0; r < rslt.length(); r++){
    JSONArray jA = rslt.getJSONArray(Integer.toString(r));
    schoolLocString = jA.getString(0) +"|"+ jA.getString(1) +"[" + jA.optString(2);
    **dataAdapter.add(schoolLocString);**

  }
  **myListView.setListAdapter(dataAdapter);**
} catch (JSONException e) {
Log.v(TAG, "Exception " + e);
} catch (NullPointerException e){
Log.v(TAG, "NPE, no rslt");
} 
```

这是一种非常懒惰的方法，可能是不好的做法，但你可以理解。

# html - 媒体查询和 Opera mini - 错误在哪里 (min-width ...)

> ID：10181528
> 
> 赞同：0
> 
> 时间：2012-04-16T20:51:29.313
> 
> 标签：html, mobile, css, media-queries

有人可以向我解释一下，为什么这个例子：

[http://jsfiddle.net/vhCLs/](http://jsfiddle.net/vhCLs/)（或[http://cssdesk.com/fPS2s](http://cssdesk.com/fPS2s)）

不能在 Opera mini 中运行？以这些站点为例，[http](http://mediaqueri.es) ://mediaqueri.es在最新的 Opera Mobile 中工作非常好……也许这些站点使用了额外的 javascript？（我试图在源代码中找到它，但我的搜索不成功）

不要为我的英语不好发誓:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:20:48.367

尝试使用`max-device-with`而不是`max-width`移动支持。

# javascript - 使用 JavaScript 将月份名称转换为月份编号

> ID：10181538
> 
> 赞同：-1
> 
> 时间：2012-04-16T20:51:58.750
> 
> 标签：javascript

有没有比我下面使用 JavaScript 或 PHP 将月份名称转换为月份编号更好的解决方案？

我确实喜欢这样：

```
$monNum =  date('n',strtotime($staff->curMonth)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T20:53:47.143

您可以保留键/值对的对象，其中键是月份名称，值是月份编号：

```
var months = {
    January: 1,
    February: 2,
    ...
}; 
```

进而：

```
var monthNumber = months['April']; 
```

或者：

```
var monthNumber = months.April; 
```

# ios - 将播放停止暂停图标添加到 iPhone 媒体播放器应用程序

> ID：10181539
> 
> 赞同：0
> 
> 时间：2012-04-16T20:51:58.897
> 
> 标签：ios, xcode, icons, media-player

我已经构建了一个播放器应用程序。它有播放、停止、暂停倒带和 ff 按钮。

我在哪里可以找到按钮的“库存”图标？例如。YouTube 应用程序和显然所有其他“主流”播放器应用程序上使用的相同。

此外，当我从停止到播放或暂停时，按钮后面会出现白色的“闪光”。这是我在按钮后面以编程方式创建的东西吗？

我可能把一些简单的事情变得困难了。我只是不想创建“自定义”版本，如果包中有现成的真实版本。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-16T21:42:19.143

我注意到这个页面的浏览量相当多，我想更新一下我所取得的有限成功。

[我发现了一个名为Glyphish.com](http://glyphish.com/)的优秀网站，其中包含令人难以置信的艺术品选择。

希望这可以帮助。

# bash - 如何在 Bash 中更改全局背景颜色

> ID：10181544
> 
> 赞同：4
> 
> 时间：2012-04-16T20:52:17.210
> 
> 标签：bash, unix

我在[WebFaction](https://www.webfaction.com/faq/)（网络托管）上使用 Bash，并且想将我的终端默认设置为与黑色不同的背景颜色（可能是白色，但我想尝试一下）。我该怎么做呢？

我试过这样做：

```
cp /etc/DIR_COLORS ~/.dir_colors
(edit .dir_colors) 
```

但我只能找到各种目录和文件类型的前景色和背景色，而不是全局色。我应该去哪里看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:00:23.387

对不起，你不必用 Bash 来做。检查您的终端模拟器显示属性。

*注意*：外壳（在您的情况下为 Bash）可以更改文本和背景颜色，但进一步的 ANSI 颜色代码调用可能会丢失或更改该属性。

# asp.net-mvc - ASP MVC：发送电子邮件并返回消息（无 Json）

> ID：10181558
> 
> 赞同：0
> 
> 时间：2012-04-16T20:53:14.757
> 
> 标签：asp.net-mvc, sendmail

我怀疑在 ASP.NET MVC 3 中完成了一个项目，其中有一个联系表。它完美地工作问题是我想发送一条消息“电子邮件发送成功！” 完成您的提交。我没有使用 Json。什么是最合适的解决方案 谢谢！

编码：

联系.cshtml `

```
@model SSInstitucional.ViewModel.ContatoViewModel
 @using System.Web     

<link href="../../Content/themes/SCTecno.css" rel="stylesheet" type="text/css" />

@using (Html.BeginForm("EnviaEmail")) 
{
    @Html.ValidationSummary(true, "")

    <div id ="divContato" style="text-align:left;  margin-left:460px; margin-right:400px; font-family:Verdana;">

            <div id="txtNome" class="editor-label">
                @Html.LabelFor(model => model.Nome)
               <p>
                @Html.TextBoxFor(m => m.Nome, new { id = "Nome", size = 40, maxlength = "60" })
                @Html.ValidationMessageFor(model => model.Nome)
            </div>
            <div id="txtEmail" class="editor-field">
                @Html.LabelFor(model => model.Email)
                <p>
                @Html.TextBoxFor(m => m.Email, new { id = "Email", size = 40, maxlength = "200" })
                @Html.ValidationMessageFor(model => model.Email)
            </div>
            <div  id="txtAssunto"class="editor-label">
               @Html.LabelFor(model => model.Assunto)
                <p>
                @Html.TextBoxFor(m => m.Assunto, new { id = "assunto", size = 40, maxlength = "200" })
                @Html.ValidationMessageFor(model => model.Assunto)
            </div>
            <div id="txtMensagem" class="editor-field">
               @Html.LabelFor(model => model.Mensagem)
               <p>
                @Html.TextAreaFor(model => model.Mensagem, new { id = "mensagem", rows = "10", cols = "50", maxlength = "5000" })
                @Html.ValidationMessageFor(model => model.Mensagem)
            </div>

                <div id="Enviar" onClick="alert('E-mail enviado com sucesso!!')")>
             @SSHtml.SubmitStyledButton("Enviar")
                </div>

   </div>
} 
```

`

接触控制器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using SSInstitucional.ViewModel;
using System.Web.UI.WebControls;
using System.Net.Mail;
using System.Net;

using System.Diagnostics;

namespace SSInstitucional.Controllers
{

    public class ContatoController : Controller
    {
        //
        // GET: /Contato/

        public ActionResult Index()
        {
            return View();
            Debug.WriteLine("Debug Teste");
        }

        [HttpPost]
        public ActionResult Index(ContatoViewModel contatoViewModel)
        {
            string corpo = "Nome: " + contatoViewModel.Nome + "\n" +
                               "E-Mail: " + contatoViewModel.Email + "\n" +
                               "Assunto: " + contatoViewModel.Assunto + "\n\n" +
                               contatoViewModel.Mensagem;

            sendEmail(contatoViewModel.Nome, contatoViewModel.Email, contatoViewModel.Assunto, corpo);

            // return Json ( new { Sucess = true, MessageBox = "Email enviado com sucesso!" });
            // return Json (new { mbox = "E-Mail enviado com sucesso!" });
            return View();

        }

        public ActionResult EnviaEmail()
        {
            return View();
        }

        private void sendEmail(string fromName, string FromEmail, string subject, string body)
        {
            try
            {
                string smtpEmail = null;
                string usuarioEmail = null;
                string senhaEmail = null;
                int smtpPort = 0;
                bool enableSsl = false;

                MailMessage mail = new MailMessage();

                ////set the addresses
                mail.From = new MailAddress(FromEmail, fromName);
                mail.Sender = new MailAddress(FromEmail, fromName);
                mail.ReplyTo = new MailAddress(FromEmail, fromName);

                mail.To.Add(new MailAddress("myname@webmail.net", fromName));

                //set the content
                mail.Subject = subject;
                mail.Body = body;
                mail.Body += "\n\n------------------------------------------";
                mail.Body += "\n\nEmail de origem: " + FromEmail;
                mail.Body += "\n\n\nEmail enviado pelo Fale Conosco do site.";

                //send the message
                //SmtpClient smtp = new SmtpClient(smtpEmail);
                SmtpClient smtp = new SmtpClient("smtp.webmail.net");

                NetworkCredential credenciais = new NetworkCredential("contato@webmail.net", "sss1122");
                smtp.Credentials = credenciais;
                //smtp.Port = 587;
                if (smtpPort > 0)
                    smtp.Port = 25;

                // enable SSL
                if (enableSsl)
                    smtp.EnableSsl = true;

                smtp.Timeout = 120000;

                smtp.DeliveryMethod = SmtpDeliveryMethod.Network;

                smtp.Send(mail);
                {
                    ModelState.Clear();
                    //return mail(new { Message = "E-mail enviado com sucesso!" });
                }

            }
            catch (FormatException erroFormato)
            {
                throw new Exception("Falha ao enviar email. Verifique se seu email foi digitado corretamente.");
            }
            catch (Exception erro)
            {
                throw new Exception("Falha ao enviar email.");

            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:19:18.700

如果可以使用 js，则可以使用 MVC Ajax 表单。一个例子在这里[http://www.hanselman.com/blog/ASPNETMVCPreview4UsingAjaxAndAjaxForm.aspx](http://www.hanselman.com/blog/ASPNETMVCPreview4UsingAjaxAndAjaxForm.aspx)

你只需要更换

```
@using (Html.BeginForm("EnviaEmail")) 
{
   ....
} 
```

和

```
@using(Ajax.BeginForm("EnviaEmail", new AjaxOptions
                                                      {
                                                              UpdateTargetId = "form_wrapper_id",
                                                              InsertionMode = InsertionMode.Replace
                                                      }))
{
    ...
} 
```

并从Action返回一些按摩。此消息将被放入 ID 为“form_wrapper_id”的 HTML 标记中。如果您不能使用 js，Darin Dimitrov 的答案是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:02:26.267

您的表单当前指向`EnviaEmail`控制器操作。`EnviaEmail`控制器动作不做任何事情。它只会重新显示视图。它不发送任何电子邮件。所以我猜你的原始代码实际上是指向 Index POST 操作：

```
@using (Html.BeginForm())
{
    ...    
} 
```

从我在您的代码中可以看到，此 POST 操作会发送一封电子邮件并重新显示相同的视图。因此，一旦发送了电子邮件，您就可以在 ViewBag 中存储一些消息：

```
[HttpPost]
public ActionResult Index(ContatoViewModel contatoViewModel)
{
    string corpo = "Nome: " + contatoViewModel.Nome + "\n" +
                       "E-Mail: " + contatoViewModel.Email + "\n" +
                       "Assunto: " + contatoViewModel.Assunto + "\n\n" +
                       contatoViewModel.Mensagem;

    sendEmail(contatoViewModel.Nome, contatoViewModel.Email, contatoViewModel.Assunto, corpo);

    ViewBag.Message = "Email sent successfully";
    return View();
} 
```

然后在您的视图中显示此消息：

```
<div>@ViewBag.Message</div> 
```

# matlab - Matlab中的马氏距离

> ID：10181570
> 
> 赞同：2
> 
> 时间：2012-04-16T20:54:01.687
> 
> 标签：matlab, image-processing, statistics, pca

我试图找到一些点与原点的马氏距离。MATLAB 命令是 mahal(Y,X)

但是如果我使用它，我会得到 NaN 作为矩阵 X = 0，因为需要从原点找到距离。有人可以帮我解决这个问题。应该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:02:31.433

我认为你对正在做什么有点困惑`mahal()`。首先，计算 Mahalanobis 距离需要一组点，从中计算协方差。

在[该函数的 Matlab 文档中，](http://www.mathworks.com/help/toolbox/stats/mahal.html)它清楚地表明正在计算的距离是：

```
d(I) = (Y(I,:)-mu)*inv(SIGMA)*(Y(I,:)-mu)' 
```

其中`mu`是 的总体平均值，`X`是`SIGMA`的总体协方差矩阵`X`。由于您的总体由一个点（原点）组成，它没有协方差，因此`SIGMA`矩阵不可逆，因此在距离中获得 NaN/Inf 值的错误。

如果您知道要用于马氏距离的协方差结构，那么您可以使用上面的公式自己计算它。假设您关心的协方差存储在一个矩阵`S`中。你想要距离原点的距离，所以你不需要从 中的值中减去任何东西`Y`，你需要计算的是：

```
for ii = 1:size(Y,1)
    d(ii) = Y(ii,:)*inv(S)*Y(ii,:)'; % Where Y(ii,:) is assumed to be a row vector.'
end 
```

# python - Pyserial：无法配置端口：（5，'输入/输出错误）

> ID：10181576
> 
> 赞同：6
> 
> 时间：2012-04-16T20:54:29.030
> 
> 标签：python, linux, ubuntu, pyserial

在过去的两天里，我一直试图让以下两行 Python 代码运行，但没有取得多大成功：

```
import serial
ser = serial.Serial(0) 
```

每次我运行它时，我都会收到以下错误：

```
Traceback (most recent call last):
  File "./test.py", line 4, in <module>
    ser = serial.Serial(0)
  File "/usr/lib/python2.7/dist-packages/serial/serialutil.py", line 260, in __init__
    self.open()
  File "/usr/lib/python2.7/dist-packages/serial/serialposix.py", line 280, in open
    self._reconfigurePort()
  File "/usr/lib/python2.7/dist-packages/serial/serialposix.py", line 308, in _reconfigurePort
    raise SerialException("Could not configure port: %s" % msg)
serial.serialutil.SerialException: Could not configure port: (5, 'Input/output error') 
```

我正在运行 Ubuntu 11.10 64 位，带有 Pyserial 2.5 (python-serial 2.5-2.1) 和 Python 2.7 (python 2.7.2-7ubuntu2)，我的用户是拨出组的成员。

我也在工作中运行 Ubuntu 11.10 64 位，使用相同版本的 Python 和 Pyserial，问题似乎没有出现在那里。欢迎任何建议 - 我很困惑......

谢谢，多纳

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T21:01:22.893

如果端口不可用，则会引发此异常。在 Linux 上，您可以简单地指定要使用的端口的确切名称，例如

```
ser = serial.Serial('/dev/ttyACM0') 
```

# tinymce - 如何为 TinyMCE 实现“全选”？

> ID：10181579
> 
> 赞同：0
> 
> 时间：2012-04-16T20:54:33.787
> 
> 标签：tinymce

我有一个经过修改的 tiny_mce（版本 3.0.1）的应用程序。它已被修改并具有文件上传功能，这就是我无法升级 tiny_mce 的原因。除了 Internet Explorer 9 外，它运行良好。在 IE9 中，光标不显示，我不能写任何东西。

我找到了解决方法。

*   使网站兼容模式
*   右键单击编辑区域，然后单击“全选”

第二种解决方法更好。如何以编程方式全选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:06:23.313

> 第二种解决方法更好。如何以编程方式全选？

这取决于您要“全选”的时间点。

这是必要的代码：

```
 tinymce.get('my_editor_id').getBody().select(); 
```

要在初始化后立即执行此操作，代码是：

```
 setup : function(ed) {
      ed.onInit.add(function(ed, evt) {
           ed.getBody().select();
      });
   } 
```

# java - 如何避免 Hibernate 中的 LazyInitializationException？

> ID：10181584
> 
> 赞同：2
> 
> 时间：2012-04-16T20:54:55.130
> 
> 标签：java, hibernate, struts2, persistence

我使用 Hibernate 作为具有多个外键关系的数据库的 ORM。问题是有时我想获取这些相关的数据集，有时我不想，所以在这些集合上我将“fetch”设置为“lazy”。不幸的是，每次我尝试序列化这些对象时，Hibernate 都会抛出一个 LazyInitializationException，因为会话已关闭。使用 OpenSessionInView 过滤器只会导致 Hibernate 填充这些集合，从而首先破坏了拥有惰性集合的整个目的。

有没有一种简单的方法来序列化或以其他方式提取 POJO 中填充的数据而不触发 LIE，并且不必填充所有惰性集合？

编辑：这是我试图开始工作的一些示例代码，处理两个表，“部门”和“员工”，这是与部门建立一对多关系的孩子。我希望能够查看数据库中列出的部门，而不必加载属于所述部门的所有员工：

部门：

```
package com.test.model;
// Generated Apr 7, 2012 7:10:28 PM by Hibernate Tools 3.4.0.CR1

import java.util.HashSet;
import java.util.Set;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import static javax.persistence.GenerationType.IDENTITY;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

/**
 * Departments generated by hbm2java
 */
@Entity
@Table(name="Departments"
    ,catalog="test"
)
public class Departments  implements java.io.Serializable {

     private Integer id;
     private String name;
     private Set<Employees> employeeses = new HashSet(0);

    public Departments() {
    }

    public Departments(String name) {
        this.name = name;
    }
    public Departments(String name, Set employeeses) {
       this.name = name;
       this.employeeses = employeeses;
    }

     @Id @GeneratedValue(strategy=IDENTITY)

    @Column(name="Id", unique=true, nullable=false)
    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Column(name="Name", nullable=false)
    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @OneToMany(fetch=FetchType.LAZY, mappedBy="departments")
    public Set<Employees> getEmployeeses() {
        return this.employeeses;
    }

    public void setEmployeeses(Set employeeses) {
        this.employeeses = employeeses;
    }
} 
```

雇员：

```
package com.test.model;
// Generated Apr 7, 2012 7:10:28 PM by Hibernate Tools 3.4.0.CR1

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import static javax.persistence.GenerationType.IDENTITY;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

/**
 * Employees generated by hbm2java
 */
@Entity
@Table(name="Employees"
    ,catalog="test"
)
public class Employees  implements java.io.Serializable {

     private Integer id;
     private Departments departments;
     private String firstName;
     private String lastName;

    public Employees() {
    }

    public Employees(Departments departments, String firstName, String lastName) {
       this.departments = departments;
       this.firstName = firstName;
       this.lastName = lastName;
    }

     @Id @GeneratedValue(strategy=IDENTITY)

    @Column(name="Id", unique=true, nullable=false)
    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="DepartmentsId", nullable=false)
    public Departments getDepartments() {
        return this.departments;
    }

    public void setDepartments(Departments departments) {
        this.departments = departments;
    }

    @Column(name="FirstName", nullable=false)
    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    @Column(name="LastName", nullable=false)
    public String getLastName() {
        return this.lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
} 
```

我的动作类（由 Struts2 XSLT 结果序列化）：

```
package com.test.view;

import java.util.List;

import java.util.Iterator;

import com.opensymphony.xwork2.ActionSupport;
import com.test.controller.DepartmentsManager;
import com.test.model.Departments;
import com.test.util.HibernateUtil;

public class DepartmentsAction extends ActionSupport {
private DepartmentsManager departmentsManager;
private List<Departments> departmentsList;

public DepartmentsAction() {
    this.departmentsManager = new DepartmentsManager();
}

public String list() {
    this.departmentsList = departmentsManager.list();
    System.out.println("Execute called");
    HibernateUtil.createDTO(departmentsList);
    return SUCCESS;
}

public List<Departments> getDepartmentsList() {
    return departmentsList;
}

public void setDepartmentsList(List<Departments> departmentsList) {
    this.departmentsList = departmentsList;
}
} 
```

我的 Manager 类（Action 类调用它来填充部门列表）：

```
package com.test.controller;

import java.util.List;

import java.util.Iterator;

import org.hibernate.Criteria;
import org.hibernate.Hibernate;
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;

import com.test.model.Departments;
import com.test.util.HibernateUtil;

public class DepartmentsManager {
public List<Departments> list() {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Departments> set = null;
    try {
        Query q = session.createQuery("FROM Departments");
        /*Query q = session.createQuery("FROM Departments d JOIN FETCH d.employeeses e");*/
        q.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
        set = (List<Departments>) q.list();
    } catch (HibernateException e) {
        e.printStackTrace();
        session.getTransaction().rollback();
    }
    session.getTransaction().commit();
    return set;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:01:53.087

惰性集合仅在事务范围内工作（从数据库中检索拥有实体）。换句话说，您不应该传递带有未加载的惰性子实体或事务范围之外的集合的 Hibernate 实体。

如果要将实体传递给 JSP、序列化代码或其他任何东西，则需要构建另一个实体或使用 lazy="false"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T23:37:48.933

在视图中管理延迟加载的两种简单方法：

*   使用事务视图（包括将视图调用包装到 JTA 事务中（例如应用程序管理的）

*   在您的 bean 中使用扩展的持久性上下文并在您使用它时显式地刷新它，这意味着您一旦能够加载您的惰性对象。

有关更多信息，请查看此帖子及其所属的答案：

[JPA 在 JSF 视图中延迟加载集合 - 比使用过滤器更好的方法？](https://stackoverflow.com/questions/9935995/jpa-lazy-loading-collections-in-jsf-view-better-way-than-using-filters)

# jquery - Highcharts - 在带有对数 Y 轴的折线图系列中处理和显示零（或负）值的最佳方法

> ID：10181588
> 
> 赞同：6
> 
> 时间：2012-04-16T20:55:09.903
> 
> 标签：jquery, highcharts, zero, logarithm

在我的 HighChart 折线图中，系列数据是从我的 Ruby on Rails 应用程序动态提供的。有时系列值为零或更小，这对 HighCharts 来说是个问题，它会引发以下异常：

```
Highcharts Error #10
Can't plot zero or subzero values on a logarithmic axis 
```

因此，作为一种变通方法，我处理我的 ruby​​ 数组以有条件地用一个无关紧要的正数替换一个较小的零值，例如 0.00001，如下所示：

```
oil_vol_array = d_array[1].map { |e| (e < 0.0001) ? 0.0001 : e.round(3) } 
```

这可以防止抛出异常，但是如果起始值为零，则显示会显示从 0.0001 开始的图形（可以理解，因为我要求它这样做）。更理想的显示方式是将图表从零开始，但 HighChart 不喜欢它:(

有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T21:57:49.547

您是否尝试过使用[标签格式化程序](http://www.highcharts.com/ref/#yAxis-labels--formatter)？

```
var chart = new Highcharts.Chart({ 
    yAxis: {        
        labels: {
            formatter: function() {
                if(this.value === 0.00001){
                    return 0;
                } else {
                    return this.value;
                }
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T20:03:52.340

处理大数字时，最好将标准标签格式化程序用于 0 以外的值，否则您的标签将显示如下：1000000000... 将此替换“else”语句更改为对原始标签格式化程序方法的调用以下：

```
var chart = new Highcharts.Chart({ 
    yAxis: {        
        labels: {
            formatter: function() {
                if(this.value === 0.00001){
                    return 0;
                } else {
                    return Highcharts.Axis.prototype.defaultLabelFormatter.call(this);
                }
            }
        }
    }
}); 
```

# sql-server - 将包含数十亿行的表的数据类型从 int 更改为 bigint

> ID：10181591
> 
> 赞同：4
> 
> 时间：2012-04-16T20:55:25.050
> 
> 标签：sql-server, type-conversion

我有几张表，有数百万行，有些表有数十亿行，其中一列是 int 现在我正在更改为 bigint。我尝试使用 SSMS 更改数据类型，但由于事务日志已满，几个小时后它失败了。

我采取的另一种方法是创建一个新列并开始将值从旧列批量更新到新列，通过将`ROWCOUNT`属性设置为 100000，它可以工作，但速度很慢，并且它要求完整的服务器内存。使用这种方法，可能需要几天时间才能完成，并且在生产中是不可接受的。

更改数据类型的快速\最佳方法是什么？源列不是标识列且重复，允许为空。该表在其他列上有索引，禁用索引会加快进程吗？添加 Begin Tran 和 Commit 会有帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T22:09:03.753

我对 ALTER COLUMN 进行了测试，显示了进行更改所需的实际时间。结果表明，ALTER COLUMN*不是*瞬时的，所需时间呈线性增长。

```
RecordCt    Elapsed Mcs
----------- -----------
      10000      184019
     100000     1814181
    1000000    18410841 
```

我的建议是按照你的建议批量处理。创建一个新列，并随着时间的推移使用**ROWCOUNT**和**WAITFOR**的组合预填充该列。

对脚本进行编码，以便从表中读取 WAITFOR 值。这样，您可以在生产服务器开始陷入困境时即时修改 WAITFOR 值。您可以在非高峰时段缩短 WAITFOR。（您甚至可以使用 DMV 使您的 WAITFOR 值自动生成，但这肯定更复杂。）

这是一个复杂的更新，需要计划和大量的保姆。

抢

* * *

这是 ALTER COLUMN 测试代码。

```
USE tempdb;
SET NOCOUNT ON;
GO
IF EXISTS (SELECT * FROM sys.tables WHERE [object_id] = OBJECT_ID('dbo.TestTable'))
    DROP TABLE dbo.TestTable;
GO
CREATE TABLE dbo.TestTable (
    ColID   int              IDENTITY,
    ColTest int              NULL,
    ColGuid uniqueidentifier DEFAULT NEWSEQUENTIALID()
);
GO

INSERT INTO dbo.TestTable DEFAULT VALUES;
GO 10000

UPDATE dbo.TestTable SET ColTest = ColID;
GO

DECLARE @t1 time(7) = SYSDATETIME();
DECLARE @t2 time(7);

ALTER TABLE dbo.TestTable ALTER COLUMN ColTest bigint NULL;

SET @t2 = SYSDATETIME();

SELECT
    MAX(ColID)              AS RecordCt,
    DATEDIFF(mcs, @t1, @t2) AS [Elapsed Mcs]
FROM dbo.TestTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:58:34.213

一个简单的`alter table <table> alter column <column> bigint null`应该基本上没有时间。不会有任何转换问题或空检查 - 我不明白为什么这不会相对即时

如果您通过 GUI 执行此操作，它可能会尝试创建一个临时表，删除现有表，然后创建一个新表 - 绝对不要这样做

# ios - 如何进入 UINavigationController 同级视图？

> ID：10181597
> 
> 赞同：0
> 
> 时间：2012-04-16T20:55:57.050
> 
> 标签：ios, uitableview, uinavigationcontroller, navigation

我有一个导航控制器....和像这样的tableview：

项目 A >
项目 B >
项目 C >
项目 D >
地图 >

单击表格单元格当然会带您进入项目 X 的​​详细信息视图。地图视图显示项目 AD 的精确定位。注释标注上有一个披露按钮。披露按钮代码执行以下操作：

```
[self.navigationController popViewControllerAnimated:true];
//Now what??? 
```

此时我想做的是在弹出地图视图后推送项目 X 的​​详细视图。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:19:52.200

你的方法不正确。你有一个表格视图：

项目 A >（单击时推送项目 A 的详细信息视图） DetailsView (A)
项目 B >（单击时推送项目 B 的详细信息视图） DetailsView (B)
项目 C >（单击时推送项目 C 的详细信息视图） DetailsView (C)
Item D >（点击后推送项目 D 的详细信息视图） DetailsView (D)
地图 >（点击时推送地图视图）地图视图 >（点击披露按钮时，您需要推送 DetailsView 以获取适当的项目并更深一层）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:26:14.017

对此并不感到自豪，但是...我确实想出了一个解决方案。我根据用于设置 tableview 的数组的索引为各个注释设置标签值。

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {
//So, we clicked that disclosure button
//TODO: This is really hacky...  What is proper way to do this?
ServicesViewController *vc = [self.navigationController.viewControllers objectAtIndex:1];  
[vc infoButtonPressed:control.tag]; 
```

}

现在在 ServicesViewController 中我们可以这样做：

```
- (void) infoButtonPressed:(NSInteger) index {

// decided against this first step, as graver's answer explains, it does not really make sense
//[self.navigationController popViewControllerAnimated:false];

//index should be nav array index we want to push
//so simulate a table-row click
[self tableView:self.tableView didSelectRowAtIndexPath:[NSIndexPath indexPathForRow:index inSection:0]]; 
```

}

# haskell - 大多数出现在一个列表中

> ID：10181601
> 
> 赞同：2
> 
> 时间：2012-04-16T20:56:20.897
> 
> 标签：haskell

我有一个高阶函数，它需要：

```
results ["Red", "Blue", "Green", "Blue", "Blue", "Red"] 
```

并返回：

```
[(1,"Green"),(2,"Red"),(3,"Blue")] 
```

我需要使用结果函数并创建一个名为winner的新函数：

```
winner :: [Party ] -> Party
winner xs = 
```

这将输出最常出现的颜色并删除元组中的第一个元素，如果两种颜色具有相同的出现次数，它将输出两种颜色，例如：

```
winner ["Red", "Blue", "Green", "Blue", "Blue", "Red"] 
```

输出：

```
"blue" 
```

到目前为止，我已经尝试使用 snd 和 tail，但我不断收到错误。先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T21:32:10.917

如果你有这个`results`功能，一个简单的应用

```
maximumBy :: (a -> a -> Ordering) -> [a] -> a 
```

就足够了

```
import Data.List -- for maximumBy
import Data.Ord  -- for comparing

winner = snd . maximumBy (comparing fst) . results 
```

看见

> 如果两种颜色出现相同，则输出两种颜色

您需要不同的类型 - 当然还有不同的实现，但使用库函数仍然很容易：

```
import Data.List
import Data.Ord
import Data.Function

winners :: [Party] -> [Party]
winners = map snd . head . groupBy ((==) `on` fst) . sortBy (flip $ comparing fst) . results 
```

由于`results`已经生成了一个排序列表——我不想仅仅从示例输出中依赖它——没有必要再次排序，我们可以使用

```
winners = map snd . last . groupBy ((==) `on` fst) . results 
```

生成所有最常出现的元素的列表。如果只需要一个最频繁的元素，则可以通过

```
winner = snd . last . results 
```

从排序的频率列表中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T00:27:37.253

```
import Data.List
import Data.Ord
winner xs = head . maximumBy (comparing length) . group . sort $ xs
main = print  $ winner ["Red", "Blue", "Green", "Blue", "Blue", "Red"] 
```

看起来是最直接的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T06:45:35.617

如果要避免排序，可以使用具有功能的[MultiSet](http://hackage.haskell.org/packages/archive/multiset/0.2.1/doc/html/Data-MultiSet.html)`finMax`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T22:11:39.307

在`winners`函数中，您会得到 的列表`String`，然后您可以通过应用该`results`函数将其转换为 '(Int, String)' 元组的列表。然后，您想要获取这些元组中的最后一个（假设`results`以出现次数的升序返回元素）并返回该元组的第二个元素。您已经提到您已经尝试过该`snd`功能，所以唯一的麻烦是中间步骤，获取元组列表的最后一个元素，对吗？

返回最后一个元素的函数的类型应该是什么？它接受一个`(Int, String)`元组列表并返回一个元组，因此对类型的猜测可能是`[(Int, String)] -> (Int, String)`，但该函数并不需要知道它正在处理列表中的元组。它只需要返回列表的最后一个元素，因此更好的类型可能是`[a] -> a`. 有了这种类型，去[Hoogle](http://www.haskell.org/hoogle/)并在搜索框中输入它，你就会得到你需要的功能作为第二个结果。

对于只返回单个结果的获胜者函数，这应该足够了。如果您希望能够返回多个结果，那么 - 正如 Daniel Fischer 在他的回答中指出的那样 - 您需要另一个签名和稍微复杂的实现。我认为最简单的方法是通过过滤掉那些没有出现最大次数的元组来找到与最后一个元组具有相同出现次数的所有元组（再次假设出现的升序），然后转换结果元组列表到这些元组的第二个元素的列表，通过映射`snd`列表：

```
winners :: [String] -> [String]
winners xs = map snd maxOccursTuples
    where maxOccursTuples = filter isMaxOccursTuple occurrences
          isMaxOccursTuple tuple = fst tuple == maxOccurs
          maxOccurs = fst (last occurrences)
          occurrences = results xs 
```

# c# - MVC C# 视图不允许标记中的 if 语句

> ID：10181602
> 
> 赞同：0
> 
> 时间：2012-04-16T20:56:25.947
> 
> 标签：c#, html, asp.net-mvc, razor

我有一些代码，例如：

```
<table class="invisibleforprint">
    <thead>
        <tr class="mainheader">
            <th>@Html.ActionLink("Invoice Number", "Index", new { sortOrder= ViewBag.NumberSortParm })</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model) {
        <tr>
            <td class="invoiceActions">
                <input type="button" class="btnresetinvoice button" value="Reset" data-invoiceid="@item.InvoiceId" />
            </td>
        </tr>
    }</tbody>
</table> 
```

哪个编译好。我去并在输入中添加了一个 if 语句：

```
<table class="invisibleforprint">
    <thead>
        <tr class="mainheader">
            <th>@Html.ActionLink("Invoice Number", "Index", new { sortOrder= ViewBag.NumberSortParm })</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model) {
        <tr>
            <td class="invoiceActions">
                <input type="button" class="btnresetinvoice button" value="Reset" data-invoiceid="@item.InvoiceId" @{ if(item.PMApproved != true) { @:disabled="disabled" } } />
            </td>
        </tr>
    }</tbody>
</table> 
```

它给出了错误'}预期'

说什么？我添加了等量的左括号。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:15:18.823

```
<input type="button" class="btnresetinvoice button" value="Reset" data-invoiceid="@item.InvoiceId" @(item.PMApproved != true ? "disabled='disabled'" : "" ) /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:39:48.010

```
<input type="button" value="Reset" data-invoiceid="@item.InvoiceId" @(item.PMApproved ? "disabled=\"disabled\"" : null) /> 
```

或者你可以使用`@if`标签`<text>`：

```
<input type="button" value="Reset" data-invoiceid="@item.InvoiceId" @if(item.PMApproved) { <text>disabled="disabled"</text>} /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:01:44.077

您应该使用普通括号，而不是在 if 语句周围使用花括号。

IE：

```
@( if(item.PMApproved != true) { @:disabled="disabled" } ) 
```

你可以试一试吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T21:14:39.723

您可以执行以下色情内容（但请不要）：

```
<input type="button" class="btnresetinvoice button" value="Reset" data-invoiceid="@item.InvoiceId" @Html.Raw(item.PMApproved ? "disabled=\"disabled\"" : "") /> 
```

[或按照我的建议](https://stackoverflow.com/a/10169746/29407)使用助手：

```
@Html.ApproveButton(item) 
```

# html - 将标题和数据与大型数据集的可滚动 html 表对齐

> ID：10181604
> 
> 赞同：1
> 
> 时间：2012-04-16T20:56:38.037
> 
> 标签：html, html-table, width, sizing

我已经从 mysql 数据库构建了一些动态生成的表，并试图对其进行设置，以便数据行将滚动，而标题行则不会。这样您就不必滚动回页面顶部来查看您正在查看的列。

到目前为止，我的解决方案是将标题分离到自己的表格中，然后滚动一个只有这样数据的表格：

```
<table id='box-table-a' border='0' width='100%'>
     HEADER ROWS
</table>

<div style='resize:vertical; height:500px; width:100%; overflow:auto;'>";
    <table id='box-table-a' border='0' width='100%'>";
       DATA
    </table>
</div> 
```

![图片](../Images/8281adde41cdb8697c11967b09d1a050.png)

这有点工作，但标题和数据行中的列的宽度不同（见图）。关于如何让列相互对齐的任何建议？

# perl - CPAN 上的模块和分发有什么区别？

> ID：10181606
> 
> 赞同：8
> 
> 时间：2012-04-16T20:56:54.823
> 
> 标签：perl, cpan

我只是比较不同“存档网络”的数字，如 CPAN、CTAN、rubygems.org 等。CPAN 显示两个非常不同的数字：

*   105,774 个模块
*   24,657 次分发

由于我不是 Perl 程序员（我只是在准备大学演讲），我不熟悉 Perl 的措辞。我试图查找它们，只发现“模块”是由 Perl 本身定义的。据我了解，模块是具有命名空间的任何文件。

但是，我找不到任何关于什么是分布的声明。甚至 CPAN 也只显示模块列表，或者它们一起使用这两个词（作为“模块分布”）。任何人都可以清除我的想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T21:03:38.183

一个发行版将包含一个或多个模块、文档、构建脚本，通常还包含一个测试套件、文件清单、自述文件、更改日志和许可证信息。在一个发行版中捆绑在一起的模块通常是完整类库的一部分，或者至少所有相关工具都分为直观命名的包。

[以核心IO](https://metacpan.org/release/IO)分布为例，您可以看到它包含以下模块：

*   IO——加载各种IO模块
*   IO::Dir - 为目录句柄提供对象方法
*   IO::File - 为文件句柄提供对象方法
*   IO::Handle - 为 I/O 句柄提供对象方法
*   IO::Pipe - 为管道提供对象方法
*   IO::Poll - 系统轮询调用的对象接口
*   IO::Seekable - 为 I/O 对象提供基于搜索的方法
*   IO::Select - select 系统调用的 OO 接口
*   IO::Socket - 套接字通信的对象接口
*   IO::Socket::INET - AF_INET 域套接字的对象接口
*   IO::Socket::UNIX - AF_UNIX 域套接字的对象接口

# python - 是否可以在 django 中为特定主机启用调试？

> ID：10181609
> 
> 赞同：1
> 
> 时间：2012-04-16T20:57:05.233
> 
> 标签：python, django, apache, debugging

我有一个生产服务器，它使用 Apache / FastCGI / DJango 来提供我的网站。

这很好用，我有一些巧妙的设置，这意味着如果存在维护文件，全世界都会看到维护消息，但我的 IP 地址仍然可以在站点上使用。维护文件的检测是在 apache 级别完成的，但是有没有办法可以设置 DEBUG 设置（通常通过 settings.py 配置）以便为我的 IP 地址启用调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:45:24.243

我发现设置一个额外的子域来测试不同版本的 django 站点是最容易的。django 没有明确给出如何做到这一点的例子，这可能是一种不好的形式，因为它会导致人们做奇怪的事情。我的设置是 nginx/uwsgi Emperor，所以发布配置文件示例可能对您没有多大帮助。

# javascript - 在 jQuery UI 手风琴菜单中激活当前内容部分

> ID：10181610
> 
> 赞同：1
> 
> 时间：2012-04-16T20:57:07.127
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-accordion

我试图弄清楚如何根据当前正在查看的页面动态激活[jQuery UI Accordion菜单的正确内容部分。](http://jqueryui.com/demos/accordion/)我进行了广泛的搜索，似乎其他人过去曾遇到过这个问题，但我还没有找到适合我的解决方案。我知道`active`可以设置打开某个索引的菜单，但我需要动态地这样做。

我在想我可以使用该`activate`方法实现我想要的，但我似乎无法弄清楚。我想远离设置 cookie，因为这通常不适用于后退/前进按钮和通过特定 URL 直接导航。有人有想法么？提前致谢！

这是我的菜单的简化结构：

```
<div id="menu">
    <div id="sections">
        <div class="grouping accordion">
            <a id="heading1" href="#">Heading #1</a>
            <div class="sub-items">
                <a href="/item1">Item #1</a>
                <br />
                <a href="/item2">Item #2</a>
            </div>
        </div>
        <div class="grouping accordion">
            <a id="heading2" href="#">Heading #2</a>
            <div class="sub-items">
                <a href="/item4">Item #4</a>
                <br />
                <a href="/item5">Item #6</a>
            </div>
        </div>
    </div>
</div> 
```

这是我的 jQuery Accordion 初始化：

```
$('#sections').accordion({
    header: '> .accordion > a',
    autoHeight: false,
    collapsible: true,
    active: false,
    animated: 'slide'
}); 
```

因此，例如，如果您当前在`/item4`页面上，则应该展开 Heading #2 下的组。

**编辑：** 我发现似乎是一个很好的解决方案并将其发布为下面的答案，希望这会帮助有类似问题的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:17:06.943

如果每次页面点击都返回服务器（标准的非 Ajaxy 方式），服务器可以将“选定”类添加到适当的节点。所以你会在客户端得到这样的东西（我只写基本代码，跳过大部分标签）。

```
<ul id="menu">
  <li>
    <ul>
      <li>
      </li>
      <li class="selected">
        <a href="">Menu 102</a>
      </li>
    <ul>
  </li>
  <li>
  ...
  </li>
<ul> 
```

然后简单地找到合适的索引来赋予`activate`手风琴的属性。

```
$(document).ready(function() {
    var index = $("li.selected").parents("li").last().index();
    $("#menu").accordion({
      active: index,
      collapsible: true
    });
}); 
```

`parents("li").last()`jQuery 返回最上面的元素。这仅在您只有一个具有“已选择”类的子元素时才有效，这应该是您的菜单的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:47:59.107

在为菜单上的活动标题处理一些 CSS 时，我偶然发现了一个非常干净和简单的解决方案。看来是我想多了！

使用与问题中相同的 HTML，这是适用于我的 JavaScript：

```
//accordion menu
$('#sections').accordion({
    header: '> .accordion > a',
    autoHeight: false,
    collapsible: true,
    active: '.selected',
    animated: 'slide'
});

//add currentPage class to current menu item based on url
var url = window.location.href;
url = url.substr(url.lastIndexOf("/") + 1);
$("#sections").find("a[href='" + url + "']").addClass("currentPage");

//get id of header anchor tag
var headerId = $(".currentPage").parents(".accordion").children("a").attr("id");

//check if headerId is set, if so activate that id
if (headerId) {
    $('#sections').accordion('option', 'animated', false);
    $('#sections').accordion('activate', $('#' + headerId));
    $('#sections').accordion('option', 'animated', 'slide');
} 
```

这个解决方案非常简单，它从 url 获取当前页面并将其与手风琴菜单中的每个链接进行比较。如果找到匹配项，它会为该链接提供一个 currentPage 类（这允许我们通过 css 相应地设置该链接的样式）。然后它查找该链接的父类`.accordion`，找到第一个子链接（手风琴标题）并获取标题的 id。假设已经找到了一个标头 id，我们就可以使用该`activate`方法来展开正确的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:31:33.493

要激活特定选项卡，您需要使用该`accordion('activate', index)`方法。例子：

```
$( "#sections" ).accordion('activate', 2); 
```

但是，您将需要定义每页索引键的东西。您甚至可以动态生成它。我可能会创建一个 Pages 对象：

```
Pages = {
    "heading1" : {
        "id": 1,
        "is_active": false,
        "items": {
            "item1": {
                "href": "item1",
                "name": "Item #1"
            },
            "item2": {
                "href": "item2",
                "name": "Item #2"
            }
        }
    },

    "heading2" : {
        /* etc*/    
    },

} 
```

使用一些 jQuery 魔术，你可以遍历你的标题

```
var active_heading_index = null;

$.each(Pages, function(heading) {
    $.each(heading.items, function(item) {
        if($(location).attr('href') == item.href) {
            heading.is_active = true;
            // or
            active_heading_index = heading.id
        }
    });
});

if(active_heading_index) $( "#sections" ).accordion('activate', active_heading_index); 
```

无论如何，我确信有更清洁和更有效的方法来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T05:22:04.340

我用这段代码做到了：

```
var newsNum = parseInt(window.location.hash.slice(1));
$(document).ready(function(){
    $("#menu").accordion('activate', newsNum );
}); 
```

网址看起来像 example.com/index.html#1

# json - 当服务器在 Heroku 上时，JSON 传输是否会自动加密？

> ID：10181613
> 
> 赞同：0
> 
> 时间：2012-04-16T20:57:22.443
> 
> 标签：json, web-services, security, ssl, heroku

我在想我需要更安全的方式来在我的应用程序和 Heroku 上的服务器之间传输数据。我担心 MITM 攻击。然后我注意到 Web 服务器使用 https 地址。这是否意味着我发送到服务器的 JSON 是自动加密的？当服务器将 JSON 发送回客户端时呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:22:04.813

如果 JSON 请求的链接以 https 开头，则可以。JSON 只是通过 http/https 发送的内容，响应通过与查询相同的方法发送。

但是，如果您在网页上并且在后台进行了 ajax 调用，那么可能不会。

在所有情况下，这取决于 http get 请求的去向：如果它以 https 开头，那么你就可以了。

听起来你说对 json 数据的请求是通过 https 发出的，在这种情况下你很好。

# php - md5decrypter API

> ID：10181616
> 
> 赞同：1
> 
> 时间：2012-04-16T20:57:29.420
> 
> 标签：php, api, md5

所以，有这个网站 (http://md5decrypter.co.uk)，给定一个 md5 哈希，它将尝试返回原始字符串。

是否有 API 或有人制作了一个 PHP 类来使用它？我一个都找不到...

在你问之前，让我向你保证，我没有恶意。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:20:57.597

即使来自 md5decryptor 的人很好，他也不会仅仅因为你在问，就让你通过 HTTP 访问他的资产。与其他任何人一样，您可以使用需要验证码的公开可用的网络界面 - 它说明了一切。

或者简而言之：不，那里没有 PHP API。

但是，你为什么不自己经营呢？这是相当微不足道的：

```
$decryptors = array('Google', 'Gromweb');

foreach ($hashes as $hash) {
    echo "$hash";
    foreach($decryptors as $decrytor)
    {
        if (NULL !== ($plain = MD5Decryptor::plain($hash, $decrytor))) {
            echo " - found: $plain ($decrytor)";
            break;
        }
    }
    echo "\n";
} 
```

输出：

```
fcf1eed8596699624167416a1e7e122e - found: octopus (Google)
bed128365216c019988915ed3add75fb - found: passw0rd (Google)
d0763edaa9d9bd2a9516280e9044d885 - found: monkey (Google)
dfd8c10c1b9b58c8bf102225ae3be9eb - found: 12081977 (Google)
ede6b50e7b5826fe48fc1f0fe772c48f - found: 1q2w3e4r5t6y (Google) 
```

那些您无法直接查找的，您可以手动粘贴到该站点。请记住，如果更多的人像你一样思考，就会有越来越多的网站关闭（其中大多数已经关闭）。

```
abstract class MD5Decryptor
{
    abstract public function probe($hash);

    public static function plain($hash, $class = NULL)
    {
        if ($class === NULL) {
            $class = get_called_class();
        } else {
            $class = sprintf('MD5Decryptor%s', $class);
        }
        $decryptor = new $class();

        if (count($hash) > 1) {
            foreach ($hash as &$one) {
                $one = $decryptor->probe($one);
            }
        } else {
            $hash = $decryptor->probe($hash);
        }
        return $hash;
    }

    public function dictionaryAttack($hash, array $wordlist)
    {
        $hash = strtolower($hash);
        foreach ($wordlist as $word) {
            if (md5($word) === $hash)
                return $word;
        }
    }
}

abstract class MD5DecryptorWeb extends MD5Decryptor
{
    protected $url;

    public function getWordlist($hash)
    {
        $list = FALSE;
        $url = sprintf($this->url, $hash);
        if ($response = file_get_contents($url)) {
            $list[$response] = 1;
            $list += array_flip(preg_split('/\s+/', $response));
            $list += array_flip(preg_split('/(?:\s|\.)+/', $response));
            $list = array_keys($list);
        }
        return $list;
    }

    public function probe($hash)
    {
        $hash = strtolower($hash);
        return $this->dictionaryAttack($hash, $this->getWordlist($hash));
    }
}

class MD5DecryptorGoogle extends MD5DecryptorWeb
{
    protected $url = 'http://www.google.com/search?q=%s';

}

class MD5DecryptorGromweb extends MD5DecryptorWeb
{
    protected $url = 'http://md5.gromweb.com/query/%s';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:01:14.817

[BozoCrack](https://github.com/juuso/BozoCrack)是一个非常简单的 ruby​​ 脚本，它使用 google 作为彩虹表，并且非常擅长破解未加盐的 MD5 密码。查看代码，将其迁移到 PHP 应该不会太难。

PS：每个使用无盐MD5作为密码哈希算法的人都应该破解他的密码，一对一......不要使用md5，[使用bcrypt](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:06:48.303

你总是可以自己做：

```
<?php 
//From file or some John the ripper piped input
$wordlist=file('some_word_list.lst');

foreach ($wordlist as $word){
    $sql="INSERT INTO table (plain_word,hashed_word)values('$word','".md5($word)."')";
    ...
}
?> 
```

# javascript - 如何测试 Javascript 中的变量是否已初始化？

> ID：10181619
> 
> 赞同：8
> 
> 时间：2012-04-16T20:57:42.680
> 
> 标签：javascript

如何测试我的 javascript 代码中的变量是否已初始化？

这个测试应该返回 false

```
var foo; 
```

和真实的

```
var foo = 5; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T20:59:06.767

```
if (foo === undefined) { /* not initialized */ } 
```

或偏执狂

```
if (foo === (void) 0) 
```

这是您可以在 JavaScript 控制台中直接测试的东西。只需声明一个变量，然后在（好吧，*as*）表达式中使用它。控制台打印的内容很好地提示了您需要做什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T21:21:11.113

使用 typeof 运算符，您可以使用以下测试：

```
if (typeof foo !== 'undefined') {
    // foo has been set to 5
}
else {
    // foo has not been set
} 
```

我发现 jQuery basics [JavaScript Basics](http://jqfundamentals.com/#chapter-2)一章非常有用。

我希望这有帮助。

# javascript - 超链接的键盘快捷键 (jQuery)

> ID：10181624
> 
> 赞同：1
> 
> 时间：2012-04-16T20:58:17.300
> 
> 标签：javascript, jquery, hyperlink, keystrokes

我的网页上有六个链接（没有别的），我想给每个链接编号，从 1 到 6。让客户端在没有 ctrl 和 alt 等的情况下点击相应的数字键会很好。

这可能吗？使用 jquery 或其他 html 脚本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:10:27.387

这是 jQuery 的一个版本：

```
$(document).ready(function() {
   $("body").keypress(function(event) {
    var link = "#link";
      if(event.keyCode == 49) link += 1;
      if(event.keyCode == 50) link += 2;
      if(event.keyCode == 51) link += 3;
      if(event.keyCode == 52) link += 4;
      if(event.keyCode == 53) link += 5;
      if(event.keyCode == 54) link += 6;

      if(link != "#link") $(link).trigger("click");
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:01:23.767

如果您想在没有 alt 或 ctrl 键的情况下执行此操作，则需要 JavaScript。您可以将事件列表器附加到 html 或 body 标记并监听 keypress 事件。不要使用复杂的“if”语句，这是没有必要的。它可以像这样优雅（使用 jQuery）：

```
<a href="http://domain1.com" code="1">link1</a>
<a href="http://domain2.com" code="2">link2</a>
etc

$('body').keypress(function(e) {
  $('[code=' + String.fromCharCode(e.keyCode-48) + ']').click();
}); 
```

使用 ctrl/alt 键，您可以使用 accesskey html 属性：[http ://reference.sitepoint.com/html/a/accesskey](http://reference.sitepoint.com/html/a/accesskey)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:01:56.083

**没有 control + key**：查询中的按键事件监听器，并监听每个按钮的特定键码。

**使用 control + key**：您可以使用访问密钥 ( [http://www.cs.tut.fi/~jkorpela/forms/accesskey.html](http://www.cs.tut.fi/~jkorpela/forms/accesskey.html) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T21:06:29.773

```
$('body').bind('keypress', function(e) {
    if(e.keyCode==49){ // number 1 on the keyboard been pressed
        $('firstHref').click();
    } else if(e.keyCode==50) { // number 2
        $('secondHref').click();
    } else if(e.keyCode==51) { // number 3
        $('thirdHref').click();
    }else if(e.keyCode==52) { // number 4
        $('fourthHref').click();
    }else if(e.keyCode==53) { // number 5
        $('fiveHref').click();
    }else if(e.keyCode==54) { // number 6
        $('sixHref').click();
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T21:09:18.437

您可以尝试以下操作：[链接](http://jsfiddle.net/HwZX7/)（单击运行按钮，然后单击“结果”框内部，然后再按 numb 键。

```
$('body').bind('keypress', function(e) {
    if(e.keyCode==49){ // 1
                alert('1 key pressed');
     window.location = "http://www.stackoverflow.com/"                
    }
    if(e.keyCode==50){ // 2
                alert('2 key pressed');
       window.location = "http://jsfiddle.net/"               
    }
    if(e.keyCode==51){ // 3
                alert('3 key pressed');
       window.location = "http://www.google.com/"                 
    }
    if(e.keyCode==52){ // 4
                alert('4 key pressed');
      window.location = "http://www.stackoverflow.com/"                  
    }
    if(e.keyCode==53){ // 5
                alert('5 key pressed');
      window.location = "http://jsfiddle.net/"                  
    }
    if(e.keyCode==54){ // 6
                alert('6 key pressed');
       window.location = "http://www.google.com/"                 
    }
});​ 
```

# security - https 是否使这更安全？

> ID：10181626
> 
> 赞同：0
> 
> 时间：2012-04-16T20:58:26.857
> 
> 标签：security, http, rest, https, asp.net-web-api

我正在阅读 Web 服务的 API，所有方法都涉及发送 HTTP 请求到

```
https://example.com/api/APIVER/METHOD?apikey=APIKEY&user=USERNAME&password=PASSWORD 
```

需要明确的是，API 密钥和用户密码都是通过 URL 以纯文本形式发送的。但这是否可以，因为“所有 HTTPS 流量都已加密”，还是因为它们仍然是纯文本或 URL 有所不同？

如果这不安全，那么 API 维护人员需要做的最小更改是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:01:50.177

是的，HTTPS 使这更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:53:27.767

HTTPS 使这更加安全。

您还应该将敏感参数作为 POST 参数而不是 GET 查询字符串参数（HTTP BODY）发送。通常，查询字符串将由 Web 服务器日志（服务器端）以纯文本形式记录，因此可能无法看到它的系统管理员可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T22:14:07.557

HTTPS 将对每个请求中的 URL 进行编码，所以如果您担心网络嗅探，那么您就可以了。HTTPS 还添加了一个 nonce 值，因此您不会受到回复攻击。

根据基础设施，插入用户设备信任的虚假 SSL 证书并使用该证书通过代理路由请求是可能的。但是，这将需要对客户端计算机的管理员/根访问权限以使此类证书受信任（除非违反通常受信任的 CA），并且一旦需要管理员访问权限，所有赌注无论如何都会关闭。

不过，这仍然不是一个好主意，我担心开发人员忘记为 HTTPS 配置它。您有一个 API 密钥，那么为什么不使用 APIKEY 作为盐来获取密码并对其进行哈希处理。现在对于 API 调用，盐是等效的密码，但这意味着用户名和密码不能用于使用这些凭据登录到其他地方，例如 API 正在运行的网站（假设您让用户登录当然在那里。）

更好的办法是使用根本不通过网络的共享秘密，并将其用作盐。

# asp.net-mvc-3 - 为什么 Session 在 ASP.NET MVC 应用程序中是一场灾难？

> ID：10181629
> 
> 赞同：36
> 
> 时间：2012-04-16T20:58:48.547
> 
> 标签：asp.net-mvc-3, session-state

为什么说**我们不应该在 ASP.NET MVC 应用程序中使用 Session 变量**？我遇到了[这样的答案](https://stackoverflow.com/a/7705818/40521)。在这种情况下，我将如何维护请求中的值，例如登录用户信息和与他的帐户关联的一些相关数据？

这是[达林](https://stackoverflow.com/users/29407/darin-dimitrov)的回答。

> 为什么在 ASP.NET MVC 应用程序中使用 HttpContext.Current？永远不要使用它。即使在经典的 ASP.NET webforms 应用程序中，这也是邪恶的，但在 ASP.NET MVC 中，这是一场灾难，它使这个漂亮的 web 框架失去了所有乐趣。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T21:08:44.000

像 ASP.NET MVC 这样的框架的基本原则之一是它们是*无状态*的，就像 Web 一样。ASP.NET Web 窗体是在无状态环境上模仿有状态范式的尝试。换句话说， [这是一个谎言。](http://codebetter.com/robconery/2009/04/23/i-spose-i-ll-just-say-it-you-should-learn-mvc/)

在 ASP.NET MVC 应用程序中使用 Session 变量有点像在马的头上绑一个角，并称它为独角兽。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T23:59:23.330

您可以使用会话状态来持久化数据，TempData 功能默认使用 Session 来持久化数据。

您应该尽可能减少 session 的使用，原因是对所有请求的 session 进行锁定以防止 session 状态损坏，例如多个 Ajax 请求将因此而序列化。更多信息[在这里](http://blogs.msdn.com/b/rickandy/archive/2009/12/17/session-less-mvc-controller.aspx?Redirected=true)

您可以使用替代方法在请求之间持久化数据，例如您可以使用[CookieValueProvider](http://weblogs.asp.net/imranbaloch/archive/2011/07/26/using-the-features-of-asp-net-mvc-3-futures.aspx)，它是 MVC Futures 的一部分，用于将 cookie 数据绑定到模型。您也可以将数据作为隐藏字段保存在实际 DOM 中，但同样应该尽可能地最小化这些数据，因为数据的大小将反映在进出浏览器的网络流量中。

如果您的主存储很慢，我会考虑为您的 Web 应用程序使用另一个数据存储。例如 SQLServer CE 或嵌入式 RavenDB。

# php - 通过邮件正文使用 smtp 发送姓名和电子邮件

> ID：10181632
> 
> 赞同：0
> 
> 时间：2012-04-16T20:58:51.263
> 
> 标签：php, smtp, phpmailer

大家晚上好，我有 phpmailer 代码，它允许我连接到 smtp 谷歌服务并通过它发送消息，这是代码

```
 <?php 
require_once("class.phpmailer.php");
include("class.smtp.php"); 
$sname="=?UTF-8?B?".base64_encode($sname)."?=\n";
$smail=""; 
$rname="=?UTF-8?B?".base64_encode($rname)."?=\n"; 
$rmail="";
$sub="=?UTF-8?B?".base64_encode($sub)."?=\n"; 
$body=$n;   
$sname=$_POST['element_2'];
$n= $_POST['element_1'] . $_POST['element_3'];
$mail = new PHPMailer();
$mail->IsSMTP(); 
$mail->SMTPAuth = true;
$mail->SMTPSecure = "ssl";
$mail->Host = "smtp.gmail.com";
$mail->Port = 465;
$gmail="account@gmail.com";
$gpass="password";
$mail->Username = $gmail; 
$mail->Password = $gpass; 
$mail->AddReplyTo($smail,$sname); 
$rmail = "receive@hotmail.com";
$rname="me";
$mail->AddAddress($rmail, $rname); 
$mail->From = $smail; 
$mail->FromName = $sname;
$mail->Subject = $sub; 
$mail->MsgHTML($body); 
$mail->IsHTML(true); 
if(!$mail->Send()) {
echo "fail";
}else{
echo "success";
}
?> 
```

问题是，我无法获得发件人的姓名，我试图将其插入正文但无法成功

```
$n= $_POST['element_1'] . $_POST['element_3']; 
```

我的第二个问题是我还有一个主题的 3 个单选按钮，我用过

```
if(isset($_POST['radio1'])){
$sub = "free";
}
if(isset($_POST['radio2'])){
$sub = "premium";
} 
```

但仍然收到空主题，请您帮我提前谢谢

* * *

谢谢你的时间，我的第一个问题已经解决了，谢谢你，但不幸的是第二个问题没有。我给单选按钮赋予了相同的名称，并将它们的值更改如下

```
<input id="element_4_1" name="element_4" class="element radio" type="radio" value="free" />
<input id="element_4_1" name="element_4" class="element radio" type="radio" value="premium" /> 
```

当我选择一个单选按钮时，它的值应该是免费或溢价，但它的值是 1 我尝试了你的代码（我把它放在 $n 值下面）

```
$sub = isset($_POST['element_4']) ? $_POST['element_4'] : "no subject"; 
```

并尝试了这个

```
$sub = $_POST['element_4']; 
```

但它没有用你能继续帮助吗，请提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:22:31.720

放

```
$body=$n; 
```

后

```
$n= $_POST['element_1'] . $_POST['element_3']; 
```

如果实际上`$_POST['element_1'] and $_POST['element_3']`正在发布到此页面，它会起作用！

至于您的单选按钮，它们都应该具有相同的名称，并且值应该是您电子邮件的主题

```
$sub = isset($_POST['radio']) ? $_POST['radio'] : "no subject"; 
```

# arrays - Perl：合并哈希元素

> ID：10181633
> 
> 赞同：4
> 
> 时间：2012-04-16T20:58:51.920
> 
> 标签：arrays, perl, hash, merge, elements

我有 2 个哈希值。

```
my %hash1 = (
          '1.3.6.1.2.1.7.1.0' => 'switch_stuff1',
          '1.3.6.1.2.1.6.3.0' => 'switch_stuff4',
          '1.3.6.1.2.1.6.5.0' => 'switch_stuff5',
          '1.3.6.1.2.1.7.4.0' => 'switch_stuff2',
          '1.3.6.1.2.1.6.2.0' => 'switch_stuff3'
    );

my %hash2 = (
          '1.3.6.1.2.1.7.1.0' => 125858,
          '1.3.6.1.2.1.6.3.0' => 120000,
          '1.3.6.1.2.1.6.5.0' => 23766,
          '1.3.6.1.2.1.7.4.0' => 115336,
          '1.3.6.1.2.1.6.2.0' => 200
     ); 
```

如您所见，两个哈希的键值是相同的。

我需要做的是从中获取值**并将**`%hash1`它们**用作**`%hash2`.

输出：

```
$VAR1 = {
          'switch_stuff1' => 125858,
          'switch_stuff4' => 120000,
          'switch_stuff5' => 23766,
          'switch_stuff2' => 115336,
          'switch_stuff3' => 200
        }; 
```

**注意：**两个哈希中的键/值对的数量总是相同的。

或者，对我来说唯一重要的`%hash1`是价值观。

```
'switch_stuff1',
'switch_stuff4',
'switch_stuff5',
'switch_stuff2',
'switch_stuff3' 
```

因此，如果无法按照我描述的方式合并哈希，我可以改为将其`%hash1`转换为仅包含值的数组。

任何人都可以帮助 Perl 新手，或者至少为我指明正确的方向吗？任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T21:05:07.393

**预计到达时间：**

啊，我想我误解了你.. 你想将两个单独的值加入一个哈希中。轻松完成[`map`](http://perldoc.perl.org/functions/map.html)：

```
my %hash3 = map { $hash1{$_} => $hash2{$_} } keys %hash1; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T21:06:09.533

```
my $hash1 = {
          '1.3.6.1.2.1.7.1.0' => 'switch_stuff1',
          '1.3.6.1.2.1.6.3.0' => 'switch_stuff4',
          '1.3.6.1.2.1.6.5.0' => 'switch_stuff5',
          '1.3.6.1.2.1.7.4.0' => 'switch_stuff2',
          '1.3.6.1.2.1.6.2.0' => 'switch_stuff3'
};

my $hash2 = {
          '1.3.6.1.2.1.7.1.0' => 125858,
          '1.3.6.1.2.1.6.3.0' => 120000,
          '1.3.6.1.2.1.6.5.0' => 23766,
          '1.3.6.1.2.1.7.4.0' => 115336,
          '1.3.6.1.2.1.6.2.0' => 200
};  

my $hash3 = {}:

foreach $key (keys %$hash1) {
   $hash3->{$hash1->{$key}} = $hash2->{$key};
} 
```

# jmx - 使用 SOAP 的 WebSphere Application Server 7.0 的独立 jython JMX 客户端

> ID：10181638
> 
> 赞同：2
> 
> 时间：2012-04-16T20:59:26.957
> 
> 标签：jmx, websphere-7, jython-2.5

我正在尝试编写一个独立的 jython JMX 客户端来监视 WebSphere Application Server。它使用 SOAP 和 SSL 连接到 DMGR。

该代码在使用 WSADMIN 运行时有效，但在尝试将其作为独立 jython 客户端运行时失败。这让我相信代码是正确的，并且在尝试将其作为独立客户端运行时我缺少 JAR 或配置文件。此外，这在禁用 SSL 的情况下有效。

我有以下问题：

1.  如何在启用安全性的情况下建立连接（因此使用 SSL）？
2.  如何让我的客户端从另一台机器上运行？（需要哪些罐子？）

WAS 版本：Solaris 上的 7.0.0.21 ND

```
import java.util.Properties as Properties
import javax.management.ObjectName as ObjectName
import com.ibm.websphere.management.AdminClient as AdminClient
import com.ibm.websphere.management.AdminClientFactory as AdminClientFactory

class DeploymentManager:
    def __init__(self, host, soapport, user, password):
        self.host = host
        self.soapport = soapport
        self.user = user
        self.password = password

def create_admin_client(dmgrhost, dmgrsoapport, user, password):
    props = Properties()
    props.setProperty(AdminClient.CONNECTOR_TYPE, AdminClient.CONNECTOR_TYPE_SOAP)
    props.setProperty(AdminClient.CONNECTOR_HOST, dmgrhost)
    props.setProperty(AdminClient.CONNECTOR_PORT, dmgrsoapport)
    props.setProperty(AdminClient.CONNECTOR_SECURITY_ENABLED, "true");
    props.setProperty(AdminClient.USERNAME, user);
    props.setProperty(AdminClient.PASSWORD, password);
    props.setProperty("javax.net.ssl.trustStore",
                      "/opt/IBM/Profiles/dmgr01/etc/DummyClientTrustFile.jks");
    props.setProperty("javax.net.ssl.keyStore",
                      "/opt/IBM/Profiles/dmgr01/etc/DummyClientKeyFile.jks");

    adminClient = AdminClientFactory.createAdminClient(props)

    return adminClient

def get_servers():
    servers = [s for s in adminClient.queryNames(queryName, None).toArray()]

    return servers

def get_server_states(servers):
    serverstates = {}
    for server in servers:
        name = adminClient.getAttribute(server, "name")
        pid = adminClient.getAttribute(server, "pid")
        state = adminClient.getAttribute(server, "state")
        serverstates[name] = {'name' : name, 'state' : state, 'pid' : pid}

    return serverstates

DMGRs = []
DMGRs.append(DeploymentManager('dmgr1_host', 'dmgr1_soap_port', 'dmgr1_user', 'dmgr1_pw'))
DMGRs.append(DeploymentManager('dmgr2_host', 'dmgr2_soap_port', 'dmgr2_user', 'dmgr2_pw'))
DMGRs.append(DeploymentManager('dmgr3_host', 'dmgr3_soap_port', 'dmgr3_user', 'dmgr3_pw'))

for DMGR in DMGRs:
    adminClient = create_admin_client(DMGR.host, DMGR.soapport, DMGR.user, DMGR.password)
    queryName = ObjectName("WebSphere:*,node=*,type=Server,name=srv*")

    servers = get_servers()
    serverstates = get_server_states(servers)

    print '## %s ##' % DMGR.host
    keys = serverstates.keys()
    keys.sort()
    for key in keys:
        print '%s %s: %s' % (serverstates[key]['name'],
                             serverstates[key]['pid'],
                             serverstates[key]['state'])

    print 
```

这是我运行它时看到的错误：

```
jython -Dpython.path=/opt/IBM/WebSphere/AppServer/runtimes/com.ibm.ws.admin.client_7.0.0.jar:/opt/IBM/WebSphere/AppServer/plugins/com.ibm.ws.security.crypto.jar:/opt/IBM/WebSphere/AppServer/plugins/com.ibm.ws.runtime.jar -Dcom.ibm.SOAP.ConfigURL=/opt/IBM/Profiles/dmgr01/properties/soap.client.props was_common.py
Apr 16, 2012 3:07:39 PM com.ibm.ws.management.connector.interop.JMXClassLoader
WARNING: Could not find tmx4jTransform.jar in null/etc/tmx4jTransform.jar - Interoperability to older versions of WebSphere is disabled
Apr 16, 2012 3:07:40 PM com.ibm.ws.ssl.config.SSLConfigManager
INFO: ssl.disable.url.hostname.verification.CWPKI0027I
Apr 16, 2012 3:07:40 PM com.ibm.ws.security.config.SecurityObjectLocator
INFO: Client code attempting to load security configuration
Traceback (most recent call last):
  File "was_common.py", line 56, in <module>
    adminClient = create_admin_client(DMGR.host, DMGR.soapport, DMGR.user, DMGR.password)
  File "was_common.py", line 30, in create_admin_client
    adminClient = AdminClientFactory.createAdminClient(props)
        at com.ibm.websphere.management.AdminClientFactory.createAdminClientPrivileged(AdminClientFactory.java:632)
        at com.ibm.websphere.management.AdminClientFactory.access$000(AdminClientFactory.java:123)
        at com.ibm.websphere.management.AdminClientFactory$1.run(AdminClientFactory.java:206)
        at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:63)
        at com.ibm.websphere.management.AdminClientFactory.createAdminClient(AdminClientFactory.java:202)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)

com.ibm.websphere.management.exception.ConnectorException:     com.ibm.websphere.management.exception.ConnectorException: ADMC0016E: The system cannot create a SOAP connector to connect to host dmgr1_host at port dmgr1_soap_port 
```

注意：我将本示例中的一些值更改为通用值。

# image - 当图像通常是最大的 HTTP 请求时，为什么还要担心缩小 JS 和 CSS？

> ID：10181643
> 
> 赞同：4
> 
> 时间：2012-04-16T20:59:52.160
> 
> 标签：image, httprequest, minify, image-resizing

我想我的问题说明了一切。许多成功的网站使用大量用户输入的图像（例如 Instagram），在我看来，这似乎是天真的，源代码缩小可能会错过这条船。

不管一个设备正在编码（移动/桌面/两者），开发人员是否最好花时间担心他们提供的图像而不是他们的代码大小？

为了优化移动浏览器较慢的速度，我认为如果用户在手机上，最好有多个尺寸的图像并编写代码来提供最小的图像。

这听起来合理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:12:52.917

首先，我不知道许多开发人员确实“担心”脚本的缩小。许多面向公众的网站都不会打扰。

其次，缩小是去除不必要的空白，而减小图像的大小通常会降低其质量，因此存在一些差异。

第三，我相信，如果在部署过程中实施缩小步骤不是那么容易，那么它会更不受欢迎。它并没有节省太多带宽，但如果只需要几分钟来配置部署脚本来完成它，那为什么不呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:14:55.433

100KB 的数据对于一个中型 JS 库来说并不是轻量级的。您应该尽可能优化您的网站。如果通过缩小脚本可以将其缩小到一半大小，然后通过 gzip 压缩它，再节省三分之一，为什么不呢？

我不知道您是如何进行缩小的，但是有许多脚本可以自动执行该过程，并且通常会将您的所有 JS 动态捆绑到一个包中。这节省了带宽和麻烦。

我的理念始终是“使用你需要的东西”。如果可以在不损害任何东西的情况下为您和您的用户节省带宽，那就去做吧。如果您可以将图像压缩得很低并且它们仍然看起来不错，那么就这样做。同样，如果您的 Web 应用程序绝对必须具有某些功能，并且它需要相当多的空间，那么无论如何都要使用它。

# javascript - 使用Javascript将iso时间戳转换为日期格式？

> ID：10181649
> 
> 赞同：15
> 
> 时间：2012-04-16T21:00:28.040
> 
> 标签：javascript, jquery, date, timestamp, iso

这似乎是一个非常简单的问题，但我似乎无法得到答案。如何使用 JavaScript 转换 iso 时间戳以显示日期/时间？

时间戳示例：2012-04-15T18:06:08-07:00

任何帮助表示赞赏，谷歌让我失望了。谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-16T21:12:01.350

将其传递给 Date 构造函数。

```
> var date = new Date('2012-04-15T18:06:08-07:00')
> date
  Mon Apr 16 2012 04:06:08 GMT+0300 (EEST) 
```

有关日期的更多信息，请查看[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T21:24:18.263

最新版本的 javascript（某些最新浏览器中的 v1.85 或更高版本）可以直接处理 ISO 日期，因此您可以直接将字符串传递给`Date()`构造函数，如下所示：

```
var jsDate = new Date("2012-04-15T18:06:08-07:00"); 
```

但较旧的浏览器（IE9 之前的任何版本的 IE，4 之前的任何版本的 Firefox 等）都不支持此功能。对于那些浏览器，您可以像[datejs](http://code.google.com/p/datejs/)一样获得可以为您执行此操作的库，也可以像这样自己解析它：

```
var t = "2012-04-15T18:06:08-07:00";

function convertDate(t) {
    var dateRE = /(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)([+\-]\d+):(\d+)/;
    var match = t.match(dateRE);
    var nums = [], item, date;
    if (match) {
        for (var i = 1; i < match.length; i++) {
            nums.push(parseInt(match[i], 10));
        }
        if (nums[7] < 0) {
            nums[8] *= -1;
        }
        return(new Date(nums[0], nums[1] - 1, nums[2], nums[3] - nums[6], nums[4] - nums[7], nums[5]));
    }
}

var jsDate = convertDate(t); 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/QSgn6/](http://jsfiddle.net/jfriend00/QSgn6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T00:22:27.483

这是迄今为止我见过的最好的，它能够使用客户端的桌面时区并通过时区设置实时更改：

```
<script type="text/javascript">
    //Use: timeZoneConvert("2015-11-03T17:36:20.970");
    //Mon Nov 02 2015 17:36:20 GMT-0600 (Central Standard Time)  [Date object]

    //To format string use: timeZoneConvertFormatted("2015-11-03T17:36:20.970")
    //November 2, 2015 5:36 PM

    //Works even when I change client timezone to Pacific Standard
    //Mon Nov 02 2015 15:36:20 GMT-0800 (Pacific Standard Time)

var months = ["", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
function timeZoneConvert(dateStr) {
    var d = parse_iso8601(dateStr);
    //Change (- 360) constant for your server, mine is Central Standard
    var dTimezoneOffset = new Date(d.getTime() - ((new Date()).getTimezoneOffset() - 360)*60000);
    return dTimezoneOffset;
}   

function timeZoneConvertFormatted(dateStr) {
    return fDateTime(timeZoneConvert(dateStr));
}   

function fDateTime(date1) {
    var date = date1.getDate();
    var year = date1.getFullYear();
    var month = months[date1.getMonth() + 1];
    var h = date1.getHours();
    var m = date1.getMinutes();
    var ampm = "AM";
    if(m < 10) {
        m = "0" + m;
    }
    if(h > 12) {
        h = h - 12;
        var ampm = "PM";
    }
    return month + " " + date + ", " + year + " " + h + ":" + m + " " + ampm;
}

    var iso8601extended = /^\d{4}(-\d{2}(-\d{2}([T ]\d{2}(:\d{2}(:\d{2})?)?([,.]\d+)?(Z|[+-]\d{2}(:\d{2})?)?)?)?)?$/;
    var iso8601basic = new RegExp(iso8601extended.source.replace(/[:-]\\d/g, '\\d'));
    var firstNumber = /[^\d]*(\d+)/g;
    function parse_iso8601(s) {
        s = s.replace(/,/g, '.');
        var matches = iso8601extended.exec(s);
        if (matches) {
            s = s.substr(0, 10).replace(/-/g, '') + s.substr(10).replace(/:/g, '');
        }
        matches = iso8601basic.exec(s);
        if (!matches) {
            return null;
        }
        var d = new Date();
        d.setUTCFullYear(toNumber(matches[0].substring(0, 4)));
        d.setUTCMonth(matches[1] ? toNumber(matches[1].substr(0, 2)) - 1 : 0);
        d.setUTCDate(matches[2] ? toNumber(matches[2].substr(0, 2)) : 1);
        var hours = 0, minutes = 0, seconds = 0, milliseconds = 0;
        var fraction = matches[6] ? parseFloat(matches[6]) : 0;
        if (matches[3]) {
            hours = toNumber(matches[3].substr(1, 2));
            if (matches[4]) {
                minutes = toNumber(matches[4].substr(0, 2));
                if (matches[5]) {
                    seconds = toNumber(matches[5].substr(0, 2));
                    milliseconds = 1000 * fraction;
                } else {
                    seconds = 60 * fraction;
                }
            } else {
                minutes = 60 * fraction;
            }
        }
        if (!matches[7]) {
            d.setHours(hours);
            d.setMinutes(minutes);
        } else {
            d.setUTCHours(hours);
            d.setUTCMinutes(minutes);
        }
        d.setUTCSeconds(seconds);
        d.setUTCMilliseconds(milliseconds);
        if (matches[7] && matches[7] != 'Z') {
            offset = toNumber(matches[7].substr(1, 2)) * 60;
            if (matches[8]) {
                 offset += toNumber(matches[8].substr(0, 2));
            }
            d.setTime(d.getTime() + 60000 * offset * (matches[7].substr(0, 1) == '-' ? 1 : -1));
        }
        return d;
    }
    function toNumber(s) {
        return parseInt(s.replace(/^0+(\d)/, '$1'));
    }
</script> 
```

# c# - WebRequest 输入 URL

> ID：10181651
> 
> 赞同：-1
> 
> 时间：2012-04-16T21:00:47.863
> 
> 标签：c#, .net

> **可能重复：**
> [事件句柄和可见](https://stackoverflow.com/questions/10180156/event-handles-visible)

我是学习 WebRequest 的新手。这是我的代码

```
 WebRequest myRequest;
        myRequest = WebRequest.Create("");
        WebResponse myResponse = myRequest.GetResponse();
        Stream responseStream = myResponse.GetResponseStream();
        StreamReader reader = new StreamReader(responseStream);

        StringBuilder sb = new StringBuilder();
        string line = "";
        while ((line = reader.ReadLine()) != null)
        {
            sb.Append(line);
            sb.Append("\r\n");
        }
        textBox1.Text = sb.ToString(); 
```

我无法理解如何允许用户输入 URL 并单击按钮并显示该页面。可以帮助我理解。它说 myRquest = WebRequest.Create(""); 当用户在文本框中输入 URL 并单击 go 按钮时，它将转到该网页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:21:36.500

假设您的页面上有一个文本框 (txtUrl)，用户使用它来输入 URL。然后你会做这样的事情

```
 myRequest = WebRequest.Create(txtUrl.Text); 
```

这会将用户输入的 url 传递到 WebRequest.Create() 方法中。但是，您需要添加一些错误检查，以防用户未输入值或输入错误的 url 等。

# ruby-on-rails - 列出集合选择中的所有子类别

> ID：10181655
> 
> 赞同：0
> 
> 时间：2012-04-16T21:00:52.903
> 
> 标签：ruby-on-rails, forms, associations

构建用户提交数据的表单。我似乎无法理解或弄清楚 *collection_select* 方法是如何工作的。

本质上，我试图让我的用户在提交表单时选择他们的产品所属的子类别。collection_select 语法应该是什么样的？

我最终根据评论弄清楚了，这就是我最终的结果，以防它对其他人有所帮助。

```
<%= f.collection_select(:sub_category_id , SubCategory.find(:all), :id , :name) %> 
```

已编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:17:17.840

```
SubCategory.all 
```

代替

```
Sub_category.all 
```

# ruby-on-rails - 添加“：remember_token”时测试失败

> ID：10181661
> 
> 赞同：1
> 
> 时间：2012-04-16T21:01:46.527
> 
> 标签：ruby-on-rails

我正在关注 Michale Hartl 教程的第 8 章。当我添加：

```
 it { should respond_to(:remember_token) } 
```

对于 user_spec.rb 文件，测试失败，失败通知直接指向文件中的这一行。

在添加此行之前，所有测试都过去了。

添加此行之后（以及在运行测试之前）我采取的唯一其他步骤是运行一个记住令牌：

```
$ rails generate migration add_remember_token_to_users 
```

然后我更新了 db/migrate/[timestamp]_add_remember_token_to_users.rb 如下：

```
class AddRememberTokenToUsers < ActiveRecord::Migration
  def change
    add_column :users, :remember_token, :string
    add_index  :users, :remember_token
  end
end 
```

和往常一样开发和测试数据库：

```
$ bundle exec rake db:migrate
$ bundle exec rake db:test:prepare 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T01:56:51.840

作为`Spork`缓存 rails 环境，它在重新启动之前不知道迁移。

因此，您需要重新启动`Spork`服务器，以便它重新加载 Rails 环境，包括新的迁移。

# php - 如何结合数据库、文本区域等正确处理字符集

> ID：10181664
> 
> 赞同：0
> 
> 时间：2012-04-16T21:01:49.263
> 
> 标签：php, mysql, html

一劳永逸地，我想清楚如何在我的应用程序中处理 ü 等。我知道使用 UTF-8 是存储/表示这些奇怪字符的最佳方式。

所以我在我的 HTML 中声明了一个元字符集：

```
<meta charset="utf-8"> 
```

将内容存储在我的数据库中，它还需要正确的设置，所以我将排序规则设置为`utf8_general_ci`

![统一码](../Images/1215773dadcfcc7e97ec860f946dc19e.png)

据我了解，没有其他地方可以定义字符集。但问题是什么？

如果我进入 phpMyAdmin 并在内容字段中添加 jülich，然后通过 mysql 查询和 PHP 从数据库中减去内容。ü 正确显示。但是，如果我在 Textarea 中查看它，它会显示一个黑色菱形图形和一个白色 ? 在里面。

如果我在我的应用程序的文本区域中输入文本并提交，它会在文本区域中显示正确。但在网站上显示 Ã¼

这些是 phpMyAdmin 启动屏幕中的字符集设置： ![phpMyadmin](../Images/4414c469d1dcc8a7bb03c8367abf86fd.png)

作为对大安问题的回答：

特点％：

![phpMyadmin](../Images/3dbbdcd5deee28c7d1348526288f4c90.png)

```
character_set_client = utf8
character_set_connection = utf8
character_set_database = utf8
character_set_filesystem = binary
character_set_results = utf8
character_set_server = latin1
character_set_system = utf8
character_sets_dir = /usr/share/mysql/charsets/ 
```

整理%

![phpMyadmin](../Images/17b170748da3013ae9c32bd36aff8c7a.png)

```
collation_connection = utf8_general_ci
collation_database = utf8_general_ci
collation_server = latin1_swedish_ci 
```

我该如何解决这个问题？

**到目前为止我做过的事情：**

添加：`header('Content-type: text/html; charset=utf-8');`

添加：`$this->db->setAttribute(PDO::MYSQL_ATTR_INIT_COMMAND, "SET NAMES 'utf8'");`

添加：`<meta http-equiv="content-type" content="text/html; charset=utf-8" />`

添加：`$this->db = new PDO($dsn, $username, $password, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));`

**解决方案**

以上所有内容都像魅力一样工作。但是如果你使用一个函数来替换某些特殊的例程并通过`utf8_decode()`它返回被替换的字符串显然不会显示 ü ;(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:09:41.907

您应该真正阅读[MySQL 特定的 PDO 文档](http://www.php.net/manual/en/ref.pdo-mysql.php)，因为它明确指出 PDO::MYSQL_ATTR_INIT_COMMAND 常量只能在构造新数据库句柄时在 driver_options 数组中使用。

因此，您应该在创建 PDO 句柄时指定 MYSQL_ATTR_INIT_COMMAND 而不是使用 setAttribute，如下所示：

```
$this->db = new PDO($dsn, $username, $password,
                    数组（PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:06:09.587

我的猜测是这可能是浏览器方面的事情。还有几件事要检查：

1.  您的 Web 服务器为`Content-Type`标头发送什么？它使用`charset=utf-8`吗？
2.  `DOCTYPE`您的 HTML 页面中是否指定了不同的字符集？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:34:56.297

确保 phpMyAdmin*本身*已正确配置为使用 UTF8。听起来好像不是。

# css - 将图像与文本一起插入

> ID：10181665
> 
> 赞同：-1
> 
> 时间：2012-04-16T21:01:49.657
> 
> 标签：css, html

我正在尝试将图像与文本一起插入。当我插入 div 时，它会将图像放在下一行。div 设置了背景图像。这是我的代码：

```
Chat Rooms <div class="dot"></div> 
```

文本按中心对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:48:04.437

如果我正确理解了您的问题，您`<div>`将换行，因为默认情况下 div 标签有一个`display: block;`属性，简单地说，它告诉他们在他们自己的行上继续前进，并将他们周围的任何东西留在他们自己的上方或下方。

要更正此问题，您可以将这段 CSS 应用到您的文档中：

```
.dot {
    display: inline;
} 
```

将 div 的`display`属性设置为`inline`（并为其指定宽度和高度）应该允许它与周围的内容位于同一行。但是，我建议您改用一个`<img>`标签，该标签已经为您的情况提供了正确的行为。

有关`<img>`标签的参考，请访问此链接：
[https ://developer.mozilla.org/En/HTML/Element/Img](https://developer.mozilla.org/En/HTML/Element/Img)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:04:26.770

`float`与右或左选项一起使用

```
Chat Rooms <div class="dot" style="float: right;"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:10:37.393

> 浏览器总是在元素前后放置一个换行符。

[http://www.w3schools.com/tags/tag_div.asp](http://www.w3schools.com/tags/tag_div.asp)

所以你必须使用 float 属性来获得想要的结果：

```
<div class="dot" style="float: left"></div> 
```

或者，您可以执行以下操作：

```
<p>Chat Rooms <img src="link to your image" alt="altext" /> </p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T12:48:20.743

你可以这样做-

```
<div><span style="float:left;">chat room</span> <span class="dot"></span>
<div style="clear:both;"></div></div> 
```

# php - PHP中的选定字段

> ID：10181672
> 
> 赞同：2
> 
> 时间：2012-04-16T21:02:17.517
> 
> 标签：php, select

我有一个选择框，用户从下拉列表中选择性别（性别），他们的选择在选择标签中用“选择”指定。但盒子总是以“选择”结尾。以下语法有什么问题？

```
echo"<select name='sex'>
<option value='N' '". ($info['sex'] == "N" ? 'selected=selected':'') ."'>Choose</option>
<option value='M' '". ($info['sex'] == "M" ? 'selected=selected':'') ."'>Male</option>    
<option value='F' '". ($info['sex'] == "F" ? 'selected=selected':'') ."'>Female</option> 
</select>"; 
```

来自`$info['sex']`始终返回 N、M 或 F 的咨询 SQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:04:55.003

你`selected=selected`的被引用和输出就像

```
<option value='N' 'selected=selected'> 
```

当你运行你的代码时，使用这个

```
echo"<select name='sex'>
<option value='N' ". ($info['sex'] == "N" ? 'selected=\'selected\'':'') .">Choose</option>
<option value='M' ". ($info['sex'] == "M" ? 'selected=\'selected\'':'') .">Male</option>    
<option value='F' ". ($info['sex'] == "F" ? 'selected=\'selected\'':'') .">Female</option> 
</select>"; 
```

注意在and的转义引号`'selected=\'selected\''`和缺少单引号`". ($info['sex']``.">`

演示：[http ://codepad.org/AX95BzTR](http://codepad.org/AX95BzTR)

这是一个显示有问题的输出的小提琴：http: [//jsfiddle.net/JKirchartz/KB4rv](http://jsfiddle.net/JKirchartz/KB4rv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:06:06.793

它应该是：

```
selected=\"selected\" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:06:15.913

真的不知道这是否是答案，但试试这个： `". (($info['sex'] == "N") ? ('selected=\'selected\''):(NULL)) ."`

还要看看你的标签是否有 autocomplete="off" 或按 ctrl + f5 几次来确定。这在过去发生在我身上很多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T21:17:12.970

首先，尽量避免这种编码风格，而不是以其他方式在 HTML 中包含 PHP。

例如，它可以这样做：

```
<?php
$sex = "F"; //mockup data from DB
?>

<select>
        <option <?= $sex=="M" ? "selected='selected'" : "" ?> value='M' >Male</option>
        <option <?= $sex=="F" ? "selected='selected'" : "" ?> value='F' >Female</option>
</select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T21:23:13.373

如果`$info['sex']`是 N 或 M 或 F；

```
 echo "<select name=\"sex\">
    <option value=\"N\" ". ($info['sex'] == "N" ? "selected=\"selected\"" : "") .">Choose</option>
    <option value=\"M\" ". ($info['sex'] == "M" ? "selected=\"selected\"" : "") .">Male</option>    
    <option value=\"F\" ". ($info['sex'] == "F" ? "selected=\"selected\"" : "") .">Female</option> 
    </select>"; 
```

PS：单引号在 HTML 中使用是有效的，但它像贾斯汀比伯林一样是一个不好的趋势。

# java - 如何使用java有效地下载大型csv文件

> ID：10181675
> 
> 赞同：2
> 
> 时间：2012-04-16T21:02:29.420
> 
> 标签：java, large-files

我需要提供一个功能，用户可以在我的 Web 应用程序中下载 excel/csv 格式的报告。一旦我在 Web 应用程序中创建了一个创建 excel 的模块，然后读取它并发送到浏览器。它工作正常。这次我不想生成 excel 文件，因为我对文件系统没有那种级别的控制。我想一种方法是在 StringBuffer 中生成适当的代码并设置正确的内容类型（我不确定这种方法）。其他团队也有这个功能，但是当数据非常大时他们会很挣扎。考虑到数据的大小，提供此功能的最佳方式可能非常庞大。是否可以在没有客户端通知的情况下以块的形式发送数据（下载延迟除外）。我忘记补充的一个问题是当有非常大的数据时，它还会在服务器端产生问题（cpu 利用率和内存消耗）。我是否有可能读取固定数量的记录，例如 500 条，将其发送给客户端，然后再读取 500 条直到完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:35:12.153

您还可以生成 HTML 而不是 CSV，但仍将内容类型设置为 Excel。这对于着色和样式文本非常有用。

当客户端接受该压缩时，您也可以使用 gzip 压缩。通常有标准的方法，比如 servlet 过滤器。

绝不是 StringBuffer 或更好的 StringBuilder。最好把它流出来。如果您不（不能）调用 setContentength，则输出会分块（没有预测进度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:13:23.540

```
URL url = new URL("http://localhost:8080/Works/images/address.csv");  

                response.setHeader("Content-Type", "text/csv");  
                response.setHeader("Content-disposition", "attachment;filename=myFile.csv");

                URLConnection connection = url.openConnection();
                InputStream stream = connection.getInputStream();

                BufferedOutputStream outs = new BufferedOutputStream(response.getOutputStream());
                int len;
                    byte[] buf = new byte[1024];
                    while ((len = stream.read(buf)) > 0) {
                      outs.write(buf, 0, len);
                    }
                    outs.close(); 
```

# regex - powershell 正则表达式替换引号之间

> ID：10181677
> 
> 赞同：0
> 
> 时间：2012-04-16T21:02:34.793
> 
> 标签：regex, powershell

我正在尝试清理文件并使其以管道或波浪线分隔

该文件在整个文件中偶尔有文本限定符

像：

```
jim,jones,"123 Main St",Detroit,MI
connie,hill,"1234 Front St","St Marie, Detwa",WI 
```

我想去掉所有引号并替换分隔符而不干扰字段中的逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:14:09.537

如果您的数据实际上是 CSV，那么最简单的方法可能如下：

```
$data = Import-Csv csvdata.txt # -Header Name,LastName,Street,City,State # if no headers are there
$data | %{ ($_.Name,$_.LastName,$_.Street,$_.City,$_.State) -join '|' } | Out-File new.txt 
```

这利用 PowerShell 的本机 CSV 导入来构建具有属性的对象列表。然后，您可以使用自己的分隔符再次手动创建行（这是必要的，因为 Export-CSV 将始终引用每个字段）。

# objective-c - 从联系人列表中选择电子邮件后，MFMailComposeViewController 不会打开

> ID：10181678
> 
> 赞同：0
> 
> 时间：2012-04-16T21:02:36.683
> 
> 标签：objective-c, ios, email

我正在尝试向联系人列表中的联系人发送电子邮件。我正在使用一个`ABPeoplePickerNavigationController`. 用户选择联系人的电子邮件后，会发生以下情况：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier {

    if(property == kABPersonEmailProperty){
        [self dismissModalViewControllerAnimated:YES];
        ABMultiValueRef emails = ABRecordCopyValue(person, property);
        int index = ABMultiValueGetIndexForIdentifier(emails, identifier);
        NSString *emailValueSelected = (__bridge NSString*)ABMultiValueCopyValueAtIndex(emails, index);

        MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
        controller.mailComposeDelegate = self;
        [controller setSubject:@"the subject"];
        [controller setMessageBody:@"Hello there" isHTML:NO];
        [controller setToRecipients:[[NSArray alloc] initWithObjects:emailValueSelected, nil]];
        if (controller){
            [self presentModalViewController:controller animated:YES];
        }
        return NO;
    }
    return YES;
} 
```

该`emailValueSelected`变量具有正确的电子邮件值，并且所有代码似乎都可以毫无问题地执行（甚至是`if(controller){...}`语句的主体）。

问题是没有任何反应，电子邮件控制器从未显示。我已经尝试过`[self presentViewController:controller animated:YES completion:nil]`和`[self presentModalViewController:controller animated:YES];`。

我在我的应用程序的另一部分使用完全相同的代码来发送电子邮件并且它工作正常，所以我猜它与人员选择器有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T00:30:14.650

你在使用标签栏控制器吗？那你应该试试

```
[self.tabBarController presentModalViewController:controller animated:YES]; 
```

您还可以设置断点并执行 po 控制器以查看控制器是否已正确初始化（即它不是 nil）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:35:03.937

问题是被解雇的人员选择器模式与试图出现的电子邮件模式发生冲突。我通过使人物选择器模式立即消失而不是动画来解决它。

```
if(property == kABPersonEmailProperty){
    [self dismissModalViewControllerAnimated:NO];
    //etc...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T19:33:17.143

我成功地做了：

```
[peoplePicker presentViewController:picker animated:YES completion:nil]; 
```

代替：

```
[self presentViewController:picker animated:YES completion:nil]; 
```

# ruby-on-rails - Rails 验证一组对象

> ID：10181680
> 
> 赞同：1
> 
> 时间：2012-04-16T21:02:42.537
> 
> 标签：ruby-on-rails, validation, model

我有两个对象，Project 和 User，它们由一个名为 ProjectAssignment 的对象连接。ProjectAssignments 对象有一个附加字段：project_role。型号如下图。

```
class Project < ActiveRecord::Base
  #relationships
  has_many :project_assignments
  has_many :users, :through => :project_assignments
end

class ProjectAssignment < ActiveRecord::Base
  belongs_to :project
  belongs_to :user
  belongs_to :project_role
end

class User
  has_many :project_assignments
  has_many :projects, :through => :project_assignments
end 
```

我必须验证对于给定的项目，在任何时候都只有一个 ProjectAssignment 的 project_role 为“Principal Investigator”。我有点不确定如何在 ProjectAssignment 模型中编写验证。如果我先取消设置当前 PI，则 Principal Investigator 少于 1，如果在取消设置另一个之前将用户设置为 Principal Investigator，则多于 1 个。

```
class ProjectAssignment
  validates :allow_exactly_one_pi

  def require_exactly_one_pi  
    if self.project_role.name == 'Principal Investigator' and other_princ_inv_exists
      #more than one principle investigator set => error
    elseif was_principle_investigator
      #no principle investigator set => error
    end
  end
end 
```

有什么建议应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:42:36.793

这是一种完全不同的方法，采用摘要格式：

1）当你创建一个新项目时，询问应该是 PI 的用户，并建立第一个 ProjectAssignment 记录，这样就无需验证至少有一个 PI。

2) 在 ProjectController 和您的项目编辑视图中，创建某种“更改 PI”界面，在该界面中，您需要知道成为新 PI 的用户的 user_id 以及当前 PI 需要的 project_role_id如果他留在项目中，则分配，如果 project_role_id 为 nil，则表示应从项目中删除该用户。

这种方法将完全消除验证！

第一个答案是一个非常有趣的练习，我讨厌建议某人改变他们的整个方法，我宁愿尽我所能回答这个问题。但是在看到“验证”变得多么复杂之后，我认为在你的情况下最好不要依赖它们，你只需要对你的应用程序进行编码以确保你的条件得到满足。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T23:31:34.510

很好的问题。

首先，您必须将有关一个模型的某些内容暴露给另一个模型，有一种特定类型的角色（主要调查员），并且 ProjectAssignment 必须了解该“特殊情况”角色。但！它应该是跟踪该特殊状态的项目角色，因此我将向 ProjectRole 模型添加一个方法：

```
ProjectRole < ActiveRecord::Base
  def ispi?
    self.name == 'Principal Investigator'
  end
end 
```

然后，您必须弄清楚如何遍历所有 project_assignments 并确定其中是否有任何一个是主要调查员。您必须从 project_assignment 的实例访问 Class 方法。

```
class ProjectAssignment < ActiveRecord::Base
  validate :there_can_only_be_one_principal_investigator

  def there_can_only_be_one_principal_investigator
    error = false
    self.class.where('project_id = ?',self.project_id).each do |p|
      if p.project_role.ispi?
         error = true
         break
      end
    end
    if error
      #whatever
    end
  end
end 
```

现在你必须改变你的关联，ProjectAssignment 只能有一个角色，所以

```
class ProjectAssignment < ActiveRecord::Base
  belongs_to :project
  belongs_to :user
  has_one :project_role
end 
```

因此，现在您可以放心，如果该项目已经存在 Principal Investigator，您就不能使用 project_role == Principal Investigator 添加 ProjectAssignment。

更新怎么样，您使用 project_role == PI 更新 ProjectAssignment，并且已经有另一个带有 PI 的 ProjectAssignment，验证将捕获它。

现在你如何保证至少有一个 PI？我认为这意味着任何一个项目的第一个项目分配必须是 PI。这是你必须有点hackish的地方，你必须直接在ProjectAssignment模型中公开有关ProjectRole模型的知识。

```
validate  :there_must_be_at_least_one_principal_investigator

def there_must_be_at_least_one_principal_investigator
  if self.class.where('project_id = ?', self.project_id).count() == 0 AND !self.project_role_id == 1
     #error
  end
end 
```

我不太喜欢这个解决方案，因为 PI 角色的 id 为 1（或其他任何值）这一事实在另一个模型中被硬编码！为了使它不那么令人反感，您可以向 ProjectRole 模型添加一个 Class 方法

```
class ProjectRole < ActiveRecord::Base
  def self.piid
     1 # or whatever it is
  end
end 
```

然后这样做：

```
def there_must_be_at_least_one_principal_investigator
  if self.class.where('project_id = ?', self.project_id).count() == 0 AND ! self.project_role_id == ProjectRole.piid
     #error
  end
end 
```

现在，您如何更换首席调查员？你必须在一个单独的动作中做到这一点，即

```
class ProjectAssignmentController < ApplicationController
  def change_pi
     @proj_assignment1 = ProjectAssignment.find(params[:orig_pi_id])
     @proj_assignment2 = ProjectAssignment.find(params[:new_pi_id])
     @proj_assignment1.project_role_id = params[:new_role_for_orig_pi].to_i
     @proj_assignment1.save :validate=>false # it's OK,  you're taking care of it below
     @proj_assignment2.project_role_id = ProjectRole.piid
     @proj_assignment2.save
  end
end 
```

# cocoa - 从基于视图的表格视图中的按钮获取选定的行

> ID：10181683
> 
> 赞同：0
> 
> 时间：2012-04-16T21:02:52.447
> 
> 标签：cocoa, core-data, tableview, nsarraycontroller, target-action

我有一个基于视图的表格视图，带有一个显示弹出框的按钮：

![在此处输入图像描述](../Images/80fdd9db7f521b3ab296d2f0a66941ee.png)

我将如何将选定的设置为按住按下按钮的行。

我正在使用带有阵列控制器的核心数据。我计划让弹出窗口中的 tableview 显示相关对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:41:33.473

只需为每个单元格按钮添加一个等于行的标签，`button.tag = indexPath.row;` 然后在您的按钮中`selector`调用

```
[self tableView:self.tableView didSelectRowAtIndexPath:[NSIndexPath indexPathForRow:button.tag inSection:0]]; 
```

# c - 随机发生器

> ID：10181685
> 
> 赞同：0
> 
> 时间：2012-04-16T21:02:56.520
> 
> 标签：c, linux

我正在尝试找到生成 32 位随机/伪随机数并且可以复制的 ac 函数。（如 rand/srand 函数）。我不能使用 urandom，因为我无法像使用 srand/rand 那样重现序列。我必须编写自己的函数还是已经存在类似的函数？

谢谢

供将来参考，而其他人的建议很好。我最终做了这样的事情：

```
uint32_t generateRandom (unsigned int randomSeed) {
   uint32_t number = 0;
   int randomNumber, x;

   for (x=0; x<8;x++) {
       randomNumber = rand_r(&randomSeed) % 16;
       number |= (randomNumber<<(x*4));
       randomSeed++;
   }
   return (number);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:45:44.600

加入 2 个（或更多）`rand()`结果以获得所需的位数。
不好（因为它被夸大了）的例子：

```
uint32_t bit0 = rand() & 1;
uint32_t bit1 = rand() & 1;
/* ... */
uint32_t bit31 = rand() & 1;

uint32_t whole = bit0 | (bit1 << 1) | ... | (bit31 << 31); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:10:11.920

任何[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)或[滞后斐波那契生成器](http://en.wikipedia.org/wiki/Lagged_Fibonacci_generator)都可以。谷歌会发现你有很多最小的实现。

正如评论中所指出的，C 标准函数[`srand`](http://pubs.opengroup.org/onlinepubs/009695399/functions/rand.html)+`rand`也可以正常工作，所以你应该使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T22:04:48.500

从您对问题的评论中，我无法理解您为什么不使用`rand()`and `srand()`。是因为它们不在正确的范围内吗？如果是这样，请执行以下操作：

```
uint32_t random_num;
int i, random_byte;
srand(SEED_VALUE);

random_num = 0;
for (i = 0; i < 4; i++) {
    random_byte = rand() & 0xff;
    random_num = (randum_num << 8) + random_byte;
} 
```

不是最有效的代码，但相当快，应该做你想做的事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T21:10:40.427

许多这些函数的编写方式是[线性反馈移位寄存器](http://en.wikipedia.org/wiki/Linear_feedback_shift_register)的变体。如果你觉得你想自己写，我会做这样的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T21:17:14.963

RAND_MAX 在 linux 上是 2147483647，所以如果你不想扩大 rand() （并消除一半的可能性），使用[mrand48](http://www.unix.com/man-page/linux/3/mrand48/) () 并将返回值解释为 unsigned long

# jakarta-ee - OneToMany 复合主键场景

> ID：10181686
> 
> 赞同：0
> 
> 时间：2012-04-16T21:02:57.997
> 
> 标签：jakarta-ee, jpa

我有以下情况，避免明显的代码：

一个东西：

```
@Entity
@Table(name = "poliza")
public class Polizas implements Serializable {
    @Id
    @Column(name = "numero_poliza")
    private BigDecimal numero;
} 
```

一个或多个子对象：

```
@Entity
@Table(name = "Autos")
@IdClass(AutosPk.class)
public class Autos {
    @Id
    @Column(name = "auto_id")
    private BigDecimal autoId;
    @Id
    @ManyToOne
    @JoinColumn(name = "numero_poliza")
    private Polizas poliza;
} 
```

主键类：

```
public class AutosPk {
    private BigDecimal autoId;
    private BigDecimal poliza;
} 
```

到目前为止，一切正常。但是，如果我需要将 Autos 修改为此（添加其他对象的列表）：

```
@Entity
@Table(name = "Autos")
@IdClass(AutosPk.class)
public class Autos {
    @Id
    @Column(name = "auto_id")
    private BigDecimal autoId;
    @Id
    @ManyToOne
    @JoinColumn(name = "numero_poliza")
    private Polizas poliza;
    @OneToMany(mappedBy = "auto_id", cascade = { CascadeType.ALL })
    private List<AccesoriosAutos> accesorios;
} 
```

还有孩子：

```
@Entity
@Table(name = "acce_auto")
@IdClass(AccesoriosAutosPk.class)
public class AccesoriosAutos {
    @Id
    @Column(name = "cod_acces")
    private BigDecimal codAcces;
    @Id
    @ManyToOne
    @JoinColumns({@JoinColumn(name = "numero_poliza", referencedColumnName = "numero_poliza"),
        @JoinColumn(name = "cod_auto", referencedColumnName = "cod_auto")})
    private Autos auto;
} 
```

在主键类中：

```
public class AccesoriosAutosPk {
    private BigDecimal codAcces;
    private AutosPk auto;
} 
```

描述的映射是错误的，但我这样发布是因为我认为它解释了我的需要。我已经搜索了几页，但我找不到进行此映射的方法。

提前感谢您的阅读，

胡安·罗梅罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:38:37.703

从我的角度来说，我有几点要说：

1.  很奇怪你使用@IdClass 和@Id。
2.  Autos 类应将 accesorios 注释为 @OneToMany(mappedBy = "auto", ....)
3.  AccesoriosAuto 自动列只需使用 @JoinColumn(name="cod_auto") 进行注释

希望这可以帮助。

# c++ - 怎么了？四行代码中相同内容的三种不同类型？

> ID：10181693
> 
> 赞同：2
> 
> 时间：2012-04-16T21:03:41.390
> 
> 标签：c++, std

我从另一个关于碎片的问题中借用了这个，但我对此并不感到困扰。我更担心我根本不了解该功能。在类型和数据生命周期方面:(

相同的数据由 std::vector（具有内部元数据的动态数组类型）、指向其中的字符串数据的指针（返回参数）和声明的返回类型（即 std:string）表示。

问题：当 std::vector 将被销毁时，数据如何安全地从函数中取出？它是隐式复制的吗？向量中的 char 动态数组是否与向量“分离”并作为 std::string 类型返回，因此不需要大容量复制？有时，我认为 C++ 和标准库试图让我...

我已经使用 C++ 有一段时间了，但我的 'ed in 就是这样的东西。

```
std::string TestFragmentation()
{
    std::vector<char> buffer(500);
    SomeCApiFunction( &buffer[0], buffer.size() ); // Sets buffer to null-terminated string data
    return &buffer[0];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T21:06:40.727

a 存储的数据`std::vector`保证是连续的，因此`&buffer[0]`可以为您提供指向该数据开头的原始指针。¹

并且`std::string`有一个构造函数，它接受 a `const char *`，它复制数据。这在 return 语句中被隐式调用（编译器最多可以调用一个隐式转换操作以避免编译时错误）。

在这两种情况下（the`vector`和`string`样式字符串，并且不会超出缓冲区边界）。

* * *

[1\. 但是请注意，不能保证它会留在一个地方。一旦你扩大或缩小向量，它很可能会被复制到内存中的其他地方，从而使所有指向它的原始指针无效。如果`vector`自身被破坏，那么支持数据当然不再有效。]

# java - 游戏服务器网关设计

> ID：10181697
> 
> 赞同：3
> 
> 时间：2012-04-16T21:04:09.210
> 
> 标签：java, asynchronous, message-queue, netty

我正在尝试为始终连接的客户端构建通用服务器。

该架构由 4 个主要组件组成

*   有状态的应用服务器
*   无状态网关服务器
*   客户
*   排队系统和代理

工艺流程

1.  客户端连接到网关
2.  网关接受将会话 ID 发送回客户端
3.  客户端向网关发送消息
4.  网关将请求写入消息/任务队列
5.  守护进程读取队列上的消息并将它们转发到应用服务器的侦听套接字
6.  应用服务器通过其业务逻辑运行消息
7.  应用服务器稍后会向客户端发送相关消息到网关队列中
8.  网关上的线程读取其入站队列中的消息，然后将消息发送回消息中标识的客户端。
9.  网关维护客户端会话 ID 到客户端套接字对象的映射，以将传入消息转发到客户端套接字

我正在使用 Java Netty 作为网关。应用服务器也是 Java 语言。

我很想说这个设计就像 Mongrel2，但我不完全确定。我想说这更符合 Urban Airship 的 Helium 边缘服务器设计 (http://urbanairship.com/blog/2010/08/24/c500k-in-action-at-urban-airship/)

我的问题是： - 使用线程从入站队列中读取消息，然后将它们转发给客户端是个好主意吗？有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T22:38:36.053

您可能知道这种类型的应用程序在云服务方面已经存在，因此您不必重新发明轮子。搜索 hp.com 网站。

# javascript - 如何绑定到 jquery-mobile pagebeforeload 事件？

> ID：10181698
> 
> 赞同：1
> 
> 时间：2012-04-16T21:04:10.643
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

我越来越绝望地试图让 jQuery 移动*pagebeforeload*事件触发。这什么都不做：

```
 $(document).on("pagebeforeload", function( e, data ) {
        console.log("hello");
    }); 
```

根据[JQM docs](http://jquerymobile.com/test/docs/api/events.html)，语法是正确的。不过，什么也没有发生。谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T22:08:14.700

您的代码完全按原样为我工作。

![在此处输入图像描述](../Images/4f9ac59f852237090aa9fb944c94fc8d.png)

请务必注意，这仅在您加载单独的页面时才有效。它不适用于内部链接的页面，因为它实际上并没有加载页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:10:39.760

确保你包括`preventDefault();`否则，它会愉快地继续加载。

**文档：http:** [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

```
$( document ).bind( "pagebeforeload", function( event, data ){

    // Let the framework know we're going to handle the load.

    event.preventDefault();

    // ... load the document then insert it into the DOM ...
    // at some point, either in this callback, or through
    // some other async means, call resolve, passing in
    // the following args, plus a jQuery collection object
    // containing the DOM element for the page.

    data.deferred.resolve( data.absUrl, data.options, page );

}); 
```

# c# - 来自网络服务的日期时间显示问题

> ID：10181702
> 
> 赞同：0
> 
> 时间：2012-04-16T21:04:27.053
> 
> 标签：c#, wpf, wcf, web-services, rest

当日期时间从我的休息网络服务显示客户端时，我遇到了困难，我的客户端 wpf 应用程序代码如下所示：

```
 public MainWindow()
    {
        InitializeComponent();
        string uriGroups = "http://localhost:8000/Service/Student";
        XDocument xDoc = XDocument.Load(uriGroups);

        foreach(var node in xDoc.Descendants("Student"))
        {

            GroupBox groupbox = new GroupBox();
            groupbox.Header = String.Format(node.Element("StudentID").Value);
            groupbox.Width = 100;
            groupbox.Height = 100;
            groupbox.Margin = new Thickness(2);

            TextBlock textBlock = new TextBlock();
            textBlock.Text = String.Format(node.Element("FirstName").Value + " " + (node.Element("LastName").Value));
            textBlock.TextAlignment = TextAlignment.Center;

            TextBlock textBlock1 = new TextBlock();
            textBlock1.Text = String.Format(node.Element("TimeAdded").Value);
            textBlock1.TextAlignment = TextAlignment.Center;
            textBlock1.VerticalAlignment = VerticalAlignment.Bottom;

            StackPanel stackPanel = new StackPanel();
            stackPanel.Children.Add(groupbox);

            stackPanel.Children.Add(textBlock);
            stackPanel.Children.Add(textBlock1);
            stackPanel.Margin = new Thickness(10);

            MainArea.Children.Add(stackPanel);
        }

    } 
```

我的服务看起来像这样：

```
public class Student
{
    ....
            public DateTime TimeAdded;
        public string TimeAddedString
        {
            get
            {
                return this.TimeAdded.ToString("dd/MM/yyyy hh:mm:ss");
            }
        } 
```

但是输出看起来像这样：

![在此处输入图像描述](../Images/24fbc15c991b004787e7d26d1808a539.png)

我的客户端应用程序代码有没有办法截断或重新格式化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:08:28.417

您可以将其转换为 DateTime 然后使用[String.Format](http://www.csharp-examples.net/string-format-datetime/)

这是您可以使用的一种格式的示例：

```
String.Format("{0:M/d/yyyy}", ((DateTime)node.Element("TimeAdded").Value)) 
```

您还可以使用[DateTime.ToString(FORMAT)](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)

```
((DateTime)node.Element("TimeAdded").Value).ToString("d"); 
```

我假设 .Value 返回一个`object`，但如果它返回一个 DateTime 那么你可以放弃演员表。

如果您将字符串输入客户端，则需要使用[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

```
(DateTime.Parse(node.Element("TimeAdded").Value)).ToString("d");
String.Format("{0:M/d/yyyy}", DateTime.Parse(node.Element("TimeAdded").Value)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:13:09.297

您正在使用 TimeAdded...但我认为您应该使用 TimeAddedString

```
textBlock1.Text = String.Format(node.Element("TimeAdded").Value); 
```

应该

```
textBlock1.Text = String.Format(node.Element("TimeAddedString").Value); 
```

我相信

# javascript - 将脚本文件导入 ASP.NET 页面：intellisense 显示方法，但尝试调用一个错误。有任何想法吗？

> ID：10181703
> 
> 赞同：1
> 
> 时间：2012-04-16T21:04:26.950
> 
> 标签：javascript, asp.net

我将一个函数放在一个现有的.js 文件中（我尝试了两个不同的文件），以便该方法可以在多个地方使用，而无需重复代码。我什至创建了一个简单的函数，以确保它不是我的函数搞砸的东西。

```
function doNothing() {
    alert("Dammit."); 
} 
```

我可以在我的 .ascx 控件的智能感知列表中看到该方法，但是一旦我尝试进入它，它就会失败。

下面是我尝试引用该文件的方式，就查看方法而言，它似乎有效，但它不起作用。

```
<script src="/javascript/messages.js" language="javascript" type="text/javascript"></script> 
```

有任何想法吗？我可能犯的任何常见错误？看起来它应该工作。

注意：当方法在 .ascx 文件中时，即使缺少分号，它们也可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T02:46:01.107

即使 IntelliSense 建议`"/javascript/messages.js"`，如果您的应用程序安装在虚拟目录而不是网站的根目录下，路径也会出错。例如，JavaScript 文件的完整 URL 可能位于[http://www.example.com/myapp/javascript/messages.js](http://www.example.com/myapp/javascript/messages.js)，但由于该`src`属性以 a 开头`/`，浏览器将访问[http://www.example .com/javascript/messages.js](http://www.example.com/javascript/messages.js)（没有“myapp”虚拟目录）。

如果您使用的是 WebForms，则可以`src`按如下方式更改属性：

```
src='<%= this.Page.ResolveClientUrl("~/javascript/messages.js") %>' 
```

# python - 在 Flask (WSGI) 中使用全局单例，我是否需要担心竞争条件？

> ID：10181706
> 
> 赞同：24
> 
> 时间：2012-04-16T21:04:55.627
> 
> 标签：python, thread-safety, wsgi, flask, race-condition

Flask 的 hello world 演示是：

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

如果我这样修改怎么办：

```
from flask import Flask
app = Flask(__name__)

a = 1
b = 2
c = 3

@app.route("/")
def hello():
    a += 1
    b += a
    c += b
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

我了解 WSGI 应用程序可能有多个线程。该`hello`函数可能同时在多个线程上运行，然后我们就会有一个竞争条件。这个对吗？如果上面的代码不是线程安全的，我该怎么做才能使它成为线程安全的？

避免使用全局变量是一种可能的解决方案，但你能始终避免使用全局变量吗？如果我想要类似 python 对象缓存的东西怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-16T08:36:26.270

您可以尝试 werkzeug 的 Local 课程。这里有一些关于它的信息：[Context Locals](http://werkzeug.pocoo.org/docs/0.10/local/)

例子：

```
from flask import Flask
from werkzeug.local import Local
app = Flask(__name__)
loc = Local()
loc.a = 1
loc.b = 2
loc.c = 3

@app.route("/")
def hello():
    loc.a += 1
    loc.b += loc.a
    loc.c += loc.b
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:58:22.313

您可以查看`g`可以直接从烧瓶导入的对象，为该请求全局保留一个对象。如果您使用的是事件驱动的 WSGI 服务器（tornado、gevent 等），您应该没有任何问题。

# php - 用字符串替换变量

> ID：10181711
> 
> 赞同：2
> 
> 时间：2012-04-16T21:05:16.353
> 
> 标签：php, sql

我有这个代码

```
$sql3 = mysql_query (" ") ;
while($row3 =mysql_fetch_array($sql3)) {
  $sql4 = mysql_query (" SELECT $ww as yourplace FROM data WHERE $ww = 
     ".$row3[$ww]." and id_user = ".$userid." ");
  $row4 = mysql_fetch_array($sql4) ;
  $string = "<< You Here" ;
  echo "<tr><td width='100'>Week ".$row3[$ww]."</td>" ;
  echo "<td width='300' >".(int) $row3["percent"] ."%</td>";
  echo "<td width='300' > "?><?php echo $row4['yourplace'] ;?><?php "</td></tr>";
} 
```

如何用第 6`$row4['yourplace']`行替换第 10`$string`行。

现在`$row4['yourplace']`只出现在表中的特定行中，所以当我使用此代码时

```
$row4['yourplace'] = $string ; 
```

这将替换但将出现在表格的所有行中。所以我想被替换并出现在指定的行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:12:43.313

我仍然不确定你的 if 条件，但你可能想做这样的事情，

```
echo "<td width='300' > "?><?php if($sql4) echo $string else $row4['yourplace'] ;?><?php "</td></tr>"; 
```

您可以将 $sql4 替换为您的代码所具有的任何条件。

**更新：**

这是你可以做的，

```
if($row4[$ww] == $row3[$ww] && $row4['id_user'] == $userid )
 echo $string ;
else 
echo ""; 
```

# php - 不使用 PHP 提交联系表

> ID：10181715
> 
> 赞同：5
> 
> 时间：2012-04-16T21:05:45.007
> 
> 标签：php, javascript, forms, feedback, contact-form

我还是一名学生，今天我们的讲师告诉我们，无需使用 mailto: 函数即可提交联系我们表单的唯一方法是使用 PHP。

我发誓去年另一位讲师向我们展示了一种仅使用 javascript 的方法。

是否可以使用基本表单和 javascript 提交反馈/联系表单？如果是这样，您介意分享一个示例吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:08:54.517

您可以使用 JavaScript 通过一些参数重定向到`mailto:`，但这并不理想。还要记住，除了 URL 中的电子邮件地址之外的任何内容`mailto:`都是非标准的。虽然它适用于许多浏览器，但它并不适用于所有浏览器。

发送电子邮件的最佳方式是在服务器端，使用 PHP 或其他方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:17:14.190

表单由浏览器基于 HTML 创建/提交。JavaScript 通常用于增强表单（以许多不同的方式）。基本表单将其数据作为 POST 请求发送。要对数据做任何有用的事情，您需要服务器端代码来处理 POST 请求（例如 PHP）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:27:45.370

您不能向 javascript 提交表单并期望它执行任何操作。您需要一个服务器端脚本才能接收要处理的表单。Mailto 是一种特定于浏览器/操作系统的方法，不一定会调用任何东西。Javscript 可以在转到服务器进行进一步处理之前处理您的表单，但就像我说的那样，您需要提交到服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T21:36:16.347

没有 PHP 或浏览器支持，Javascript 无法捕获任何内容。您需要一个服务器端脚本来接收表单并对其进行处理。没有 PHP 或其他服务器端脚本的 Javascript 无法捕获表单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-10T23:37:24.120

您可以使用[emailjs.com 之](https://www.emailjs.com/)类的服务：

1）配置EmailJS：

```
<script type="text/javascript" src="https://cdn.emailjs.com/sdk/2.2.4/email.min.js"></script>
<script type="text/javascript">
   (function(){
      emailjs.init("user_USERID");
   })();
</script> 
```

2) 发送电子邮件：

```
var service_id = 'my_mandrill';
var template_id = 'feedback';
var template_params = {
    name: 'John',
    reply_email: 'john@doe.com',
    message: 'This is awesome!'
};

emailjs.send(service_id,template_id,template_params); 
```

它每月有 200 封免费电子邮件的限制，适用于简历/作品集网站。支持 reCaptcha。

EmailJS 支持不同的电子邮件提供商（包括自定义 SMTP 服务器），并为您提供日志和统计信息。

# php - PHP 读取的数组中的当前日期字段

> ID：10181717
> 
> 赞同：0
> 
> 时间：2012-04-16T21:05:58.107
> 
> 标签：php, arrays

我有一个由日期事件组成的数组，我使用 PHP 在网页上列出这些事件来生成显示日期排序表的页面。我正在尝试以适合我的特定格式将 PHP time() 函数插入到文本 (CSV) 数组的一个特定记录中，以便每次有人打开此页面时，该特定记录总是与当前我需要的格式的日期。我尝试了很多变体

```
 <?php print ((time() + '39681000000')/1000000); ?> 
```

有和没有 PHP 的打开和关闭标签，以及许多其他变体，但都没有成功。该记录只显示一个带有此功能的空白字段和​​标签，并且只显示没有标签的代码。PHP 函数单独工作正常，但插入记录字段时将无法工作。我似乎无法将任何 PHP 函数（更不用说这个）插入到记录字段中并让它工作，所以这个函数的编写方式似乎没有问题。

我也尝试在页面顶部将其声明为全局变量，然后在此字段中调用它，但这不起作用。我也没有高兴地尝试过 now() 函数。

谢谢，斯坦...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:39:30.137

在这种情况下，字符串替换可能是最好的选择（就像上面提到的 draw 一样）。尝试从 CSV 文件中删除 PHP 代码并将其替换为类似的内容`${DATE}`，然后在设置 $line 后立即导入 CSV 文件的 while 循环中放入类似内容：

```
$line = str_replace('${DATE}', (time() + 39681000000/1000000), $line); 
```

# iphone - AT&T 与 Verizon iPhone 视频播放

> ID：10181725
> 
> 赞同：0
> 
> 时间：2012-04-16T21:06:24.183
> 
> 标签：iphone, html, video

我有一组为 html5 编码的视频，这些视频在 AT&T iPhone 上可以正常播放，但在 Verizon iPhone 上不能播放。

以前有没有人遇到过这个问题，如果有，有没有人找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:57:30.130

AT&T 和 Verizon 之间的差异不会影响视频在任一设备上是否以一种或另一种方式播放。iOS 完全一样，只是在运营商相关功能方面存在细微差别。无论哪种方式，它都不会影响设备上的视频播放。

尝试将两台设备恢复到出厂设置并在设备上安装应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:23:55.347

Verizon 实际上已经[公开承认](https://ecache.vzw.com/imageFiles/Myacct/nda/images/docs/VerizonWirelessServiceInformation.pdf)(PDF) 在将图像和视频提供给移动客户之前对其进行压缩。虽然这不会引起问题，但它可能会在某种程度上解释为什么您的视频无法在 Verizon 网络上播放。如果您尝试通过 WiFi 网络而不是移动数据连接来传输视频，您的视频是否仍然会受到影响？

# oracle - 在 Oracle 中使约束可延迟

> ID：10181726
> 
> 赞同：4
> 
> 时间：2012-04-16T21:06:24.833
> 
> 标签：oracle, database-design, constraints

在 Oracle 中，是否可以使用诸如`alter table 'TBL_NM' modify constraint 'CONSTRAINT_NM' ... deferrable`使现有约束可延迟的语法，或者必须将约束删除并重新创建为可延迟？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T21:49:58.853

它必须被删除并重新创建。

# css - 我应该对伪元素使用单冒号还是双冒号？

> ID：10181729
> 
> 赞同：115
> 
> 时间：2012-04-16T21:06:34.237
> 
> 标签：css, internet-explorer-8, css-selectors, internet-explorer-7, pseudo-element

由于 IE7 和 IE8 不支持伪元素的双冒号表示法（例如`::after`or `::first-letter`），并且由于现代浏览器支持单冒号表示法（例如`:after`）以实现向后兼容性，我应该只使用单冒号表示法吗？ IE8 的市场份额下降到可以忽略不计的水平返回并在我的代码库中查找/替换？或者我应该包括两者：

```
.foo:after,
.foo::after { /*styles*/ } 
```

如果我关心 IE8 用户（可怜的亲爱的），单独使用 double 似乎很愚蠢。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-16T21:25:06.983

不要**将**两者与逗号结合使用。符合 CSS 2.1（不支持 CSS3）的用户代理将忽略整个规则：

> 当用户代理无法解析选择器（即，它不是有效的 CSS 2.1）时，它也必须忽略选择器和以下声明块（如果有）。
> 
> CSS 2.1 为选择器中的逗号 (,) 赋予了特殊含义。但是，由于不知道逗号在未来的 CSS 更新中是否会获得其他含义，因此如果选择器中的任何地方出现错误，则应该忽略整个语句，即使选择器的其余部分在 CSS 2.1 中看起来很合理。

[http://www.w3.org/TR/CSS2/syndata.html#rule-sets](http://www.w3.org/TR/CSS2/syndata.html#rule-sets)

但是，您可以使用

```
.foo:after { /*styles*/ }
.foo::after { /*styles*/ } 
```

另一方面，这比必要的更冗长。现在，您可以坚持使用一个冒号表示法。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-04-16T21:17:48.127

从[CSS3 选择器 REC](http://www.w3.org/TR/selectors/#pseudo-elements)：

> 这个 :: 符号是由当前文档引入的，以便在伪类和伪元素之间建立区分。
> 为了与现有样式表兼容，**用户代理还必须接受之前在 CSS 级别 1 和 2 中引入的伪元素的单冒号表示法**（即 :first-line、:first-letter、:before 和 :after）。本规范中引入**的新伪元素不允许**
> 这种兼容性。

 **似乎你对 CSS2.1 中已经存在的伪元素使用（仅）一个冒号表示法是安全的，因为 UA 必须向后兼容。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-11-19T21:35:24.557

关于考虑使用一个冒号“安全”，我绝对不同意@mddw 和@FelipeAls。

这种“即使它已被弃用，我也会使用它”的心态正是基于浏览器的技术在进步和进步方面如此缓慢的原因。

是的，我们希望保持与旧标准的兼容性。让我们面对现实吧，这是我们被处理的那手牌。但是，这并不意味着您可以通过忽略当前标准来支持已弃用的标准，从而在开发中偷懒。

最终目标应该是保持与当前标准的合规性，同时尽可能多地支持旧标准。

`:`如果在 CSS2 和CSS3 中使用伪元素`::`，我们不应该使用其中一个；我们应该同时使用**两者**。

为了完全回答最初提出的问题，以下是支持最新 CSS 实现（版本 3）的**最合适方法，同时保留对版本 2 的旧支持。**

```
.foo:after {
  /* styles */
}
.foo::after {
  /* same styles as above. */
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-16T03:01:43.890

*然而，为新的 javascript 和 CSS 使用polyfill*变得越来越流行，因此您可能只想坚持使用较新的双冒号 ( `::`) 语法，并为旧浏览器维护一个 polyfill，只要这是必要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-26T16:12:44.167

根据浏览器统计数据，IE 8.0 在美国的价值在过去一年中下降到不到 1%。

[http://gs.statcounter.com/browser-version-partially-combined-market-share/desktop/united-states-of-america/#monthly-201512-201612](http://gs.statcounter.com/browser-version-partially-combined-market-share/desktop/united-states-of-america/#monthly-201512-201612)

2015 年 12 月，IE 8.0 占据了**2.92%**的市场份额。2016 年 12 月，IE 8.0 的市场份额为**0.77%**。

以这样的下降速度停止支持旧版本的 IE 并开始使用 :: 表示伪元素并不是最糟糕的主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T21:08:16.460

包括这两种表示法当然更安全，但我看不到任何浏览器长时间放弃单一表示法，所以只有一个就可以了（它是有效的 CSS2。）

个人而言，我只使用单冒号表示法，主要是出于习惯。**

# r - 从 R 中的“标签属性”到 SPSS 中的“变量标签”的信息

> ID：10181730
> 
> 赞同：7
> 
> 时间：2012-04-16T21:06:38.933
> 
> 标签：r, export, labels, spss

我在 R 中工作，但我需要以 SPSS 格式提供一些带有“变量标签”和“值标签”的数据，但我有点卡住了。

`Hmisc`我使用's`label`函数为我的数据添加了变量标签。这会将变量标签添加为 a ，这在从包中`label attribute`使用时很方便。问题是我无法从包中获得将这些标签识别为变量标签的功能。我想我需要修改以在编写文件时使用as 。`describe()``Hmisc``write.foreign()``foreign``write.foreign()``label attribute``variable label``.sps`

我查看了 R 列表和 stackoverflow，但我只能在[R 列表中找到 2006 年关于将变量标签从 R 导出到 SPSS 的帖子](https://stat.ethz.ch/pipermail/r-help/2006-January/085941.html)，它似乎没有回答我的问题。

这是我的工作示例，

```
# First I create a dummy dataset
df <- data.frame(id = c(1:6), p.code = c(1, 5, 4, NA, 0, 5),  
                 p.label = c('Optometrists', 'Nurses', 'Financial analysts',
                 '<NA>', '0', 'Nurses'), foo = LETTERS[1:6])

# Second, I add some variable labels using label from the Hmisc package
# install.packages('Hmisc', dependencies = TRUE)
library(Hmisc)
label(df) <- "Sweet sweet data"
label(df$id) <- "id !@#$%^" 
label(df$p.label) <- "Profession with human readable information"
label(df$p.code) <- "Profession code"
label(df$foo) <- "Variable label for variable x.var"
# modify the name of one varibes, just to see what happens when exported.
names(df)[4] <- "New crazy name for 'foo'"

# Third I export the data with write.foreign from the foreign package
# install.packages('foreign', dependencies = TRUE)
setwd('C:\\temp')
library(foreign)
write.foreign(df,"df.wf.txt","df.wf.sps",  package="SPSS")

list.files()
[1] "df.wf.sps" "df.wf.txt" 
```

当我检查`.sps`文件时（请参阅下面 'df.wf.sps' 的内容）， my`variable labels`与 my 相同`variable names`，除了 foo 我重命名为“'foo' 的新疯狂名称”。这个变量有一个新的看似随机的名字，但是正确的`variable label.`

有谁知道如何将标签属性和变量名称导出为“变量标签”和“标签名称”到`.sps`文件中？也许有比我目前的方法更聪明的方法来存储“变量标签”？

任何帮助将不胜感激。

谢谢，埃里克

`write.foreign`使用从`foreign`包中导出的“df.wf.sps”的内容

```
DATA LIST FILE= "df.wf.txt"  free (",")
/ id p.code p.label Nwcnf.f.  .

VARIABLE LABELS
 id "id" 
 p.code "p.code" 
 p.label "p.label" 
 Nwcnf.f. "New crazy name for 'foo'" 
 .

VALUE LABELS
/
p.label  
 1 "0" 
 2 "Financial analysts" 
 3 "Nurses" 
 4 "Optometrists" 
/
Nwcnf.f.  
 1 "A" 
 2 "B" 
 3 "C" 
 4 "D" 
 5 "E" 
 6 "F" 
.

EXECUTE. 
```

### 2012 年 4 月 16 日太平洋夏令时间 15:54:24 更新；

我正在寻找的是一种调整方法`write.foreign`来编写一个`.sps`文件，其中这部分，

```
[…] 

VARIABLE LABELS
 id "id" 
 p.code "p.code" 
 p.label "p.label" 
 Nwcnf.f. "New crazy name for 'foo'" 

[…] 
```

看起来像这样

```
[…] 

VARIABLE LABELS
 id "id !@#$%^" 
 p.code "Profession code" 
 p.label "Profession with human readable information" 
 "New crazy name for 'foo'" "New crazy name for 'foo'" 

[…] 
```

最后一行有点雄心勃勃，我真的不需要名称中包含空格的变量，但我希望将标签属性传输到 .spas 文件（我使用 R 生成的文件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:57:17.707

试试这个功能，看看它是否适合你。如果没有，请添加评论，就故障排除而言，我可以看到我能做些什么。

```
# Step 1: Make a backup of your data, just in case
df.orig = df
# Step 2: Load the following function
get.var.labels = function(data) {
  a = do.call(llist, data)
  tempout = vector("list", length(a))

  for (i in 1:length(a)) {
    tempout[[i]] = label(a[[i]])
  }
  b = unlist(tempout)
  structure(c(b), .Names = names(data))
}
# Step 3: Apply the variable.label attributes
attributes(df)$variable.labels = get.var.labels(df)
# Step 4: Load the write.SPSS function available from
# https://stat.ethz.ch/pipermail/r-help/2006-January/085941.html
# Step 5: Write your SPSS datafile and codefile
write.SPSS(df, "df.sav", "df.sps") 
```

上面的示例假设您的数据名为`df`，并且您已经习惯`Hmisc`添加标签，如您在问题中所述。

## 更新：一个自包含的函数

如果您不想更改原始文件，如上例所示，并且在使用此功能时已连接到 Internet，则可以尝试此自包含功能：

```
write.Hmisc.SPSS = function(data, datafile, codefile) {
  a = do.call(llist, data)
  tempout = vector("list", length(a))

  for (i in 1:length(a)) {
    tempout[[i]] = label(a[[i]])
  }
  b = unlist(tempout)
  label.temp = structure(c(b), .Names = names(data))
  attributes(data)$variable.labels = label.temp
  source("http://dl.dropbox.com/u/2556524/R%20Functions/writeSPSS.R")
  write.SPSS(data, datafile, codefile)
} 
```

用法很简单：

```
write.Hmisc.SPSS(df, "df.sav", "df.sps") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:39:04.977

您链接到（[此处](https://stat.ethz.ch/pipermail/r-help/2006-January/085941.html)）的函数应该可以工作，但我认为问题在于您的数据集实际上没有编写 SPSS 脚本文件所需的`variable.label`和属性。`label.table`

我无法访问 SPSS，但请尝试以下操作，看看它是否至少为您指明了正确的方向。`dput`不幸的是，除了手动编辑输出之外，我没有看到一个简单的方法来做到这一点。

```
df = structure(list(id = 1:6, 
               p.code = c(1, 5, 4, NA, 0, 5), 
               p.label = structure(c(5L, 4L, 2L, 3L, 1L, 4L), 
                                   .Label = c("0", "Financial analysts",
                                              "<NA>", "Nurses", 
                                              "Optometrists"), 
                                   class = "factor"), 
               foo = structure(1:6, 
                               .Label = c("A", "B", "C", "D", "E", "F"), 
                               class = "factor")), 
               .Names = c("id", "p.code", "p.label", "foo"),
          label.table = structure(list(id = NULL,
                             p.code = NULL,
                             p.label = structure(c("1", "2", "3", "4", "5"),
                                      .Names = c("0", "Financial analysts", 
                                                 "<NA>", "Nurses", 
                                                 "Optometrists")),
                             foo = structure(1:6, 
                                  .Names = c("A", "B", "C", "D", "E", "F"))),
                             .Names = c("id", "p.code", "p.label", "foo")),
          variable.labels = structure(c("id !@#$%^",  "Profession code", 
                                 "Profession with human readable information",
                                 "New crazy name for 'foo'"), 
                            .Names = c("id", "p.code", "p.label", "foo")), 
          codepage = 65001L) 
```

将上述内容与`dput`您的示例数据集的输出进行比较。请注意，`label.table`and`variable.labels`已被添加，并且表示类似内容的行已`row.names = c(NA, -6L), class = "data.frame"`被删除。

## 更新

注意：这不适`write.foreign`用于 R 中的默认函数。要对此进行测试，您首先需要加载[这里](https://stat.ethz.ch/pipermail/r-help/2006-January/085941.html)`write.SPSS`共享的函数，并且（当然）确保您已加载包。然后，您编写文件如下：`foreign`

```
write.SPSS(df, datafile="df.sav", codefile="df.sps") 
```

# mysql - MySQL - 选择最近 10 位作者的最新帖子

> ID：10181736
> 
> 赞同：8
> 
> 时间：2012-04-16T21:07:12.123
> 
> 标签：mysql

我有一张包含许多不同作者的博客文章的表格。我想做的是展示 10 位最新作者的最新帖子。

每个作者的帖子都按顺序简单地添加到表中，这意味着单个作者可以运行多个帖子。我有很多时间想出一个查询来做到这一点。

这给了我最后 10 个唯一的作者 ID；它可以用作子选择来抓取每个作者的最新帖子吗？

```
SELECT DISTINCT userid
FROM posts
ORDER BY postid DESC 
LIMIT 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:27:11.590

```
select userid,postid, win from posts where postid in (
SELECT max(postid) as postid
FROM posts 
GROUP BY userid
) 
ORDER BY postid desc 
limit 10 
```

[http://sqlfiddle.com/#!2/09e25/1](http://sqlfiddle.com/#!2/09e25/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:19:42.607

您需要每个作者的最后一个 postid 的子查询，并按 postid DESC 排序。然后，将该结果连接到`posts`表中：

```
SELECT B.* FROM
(
    SELECT * FROM
    (
        SELECT userid,MAX(postid) postid
        FROM posts GROUP BY userid
    ) AA
    ORDER BY postid DESC
    LIMIT 10
) A INNER JOIN posts B
USING (user_id,post_id); 
```

确保你有这个索引

```
ALTER TABLE posts ADD INDEX user_post_ndx (userid,postid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T22:02:20.687

```
SELECT userid
     , MAX(postid) AS lastpostid
FROM posts
GROUP BY userid
ORDER BY lastpostid DESC 
LIMIT 10 
```

# javascript - 无论屏幕高度/宽度如何，如何使图像保持在屏幕底部？

> ID：10181741
> 
> 赞同：0
> 
> 时间：2012-04-16T21:07:41.967
> 
> 标签：javascript, html, css

当您滚动屏幕右下角的文本时，我正在尝试使图像出现。对于所有屏幕宽度和高度，我如何才能把它放在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:11:53.310

您可以在图像上使用固定定位并分配左侧、顶部、右侧或底部属性以满足您的需要，请参见：[http](http://www.w3schools.com/css/css_positioning.asp) ://www.w3schools.com/css/css_positioning.asp示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:14:02.147

这会起作用：

```
<style type="text/css">
    img.floating {
    position: absolute;
    bottom: 0px;
    left: 0px;
}
</style>
<img class="floating" src="url to image" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:19:31.550

`:hover`除非在链接上使用，否则不适用于 IE6。用这个。

```
<style type="text/css">
  #myFavoriteFooterImage {
    bottom:0px;
    right:0px;
    position:fixed;
    display:none;
  }
</style>
<script type="javascript">
    document.getElementById("mousyTextFunTime").onmouseover = function(){
        document.getElementById("myFavoriteFooterImage").style.display = "";
    };
    document.getElementById("mousyTextFunTime").onmouseout = function(){
        document.getElementById("myFavoriteFooterImage").style.display = "none";
    };
</script>

<div id="mousyTextFunTime">Text to mouse over</div>
<img id="myFavoriteFooterImage" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T21:16:41.583

为 :hover 在文本上创建一个 CSS 样式。

```
<style type="text/css">
#bottom { display:none; }
#text:hover #bottom {
display:block;
position:absolute;
left:0; // how far from the left
bottom:0;
}
</style>
<div id="text>TEXT</div>
<img src="bottomimage.jpg" id="bottom"> 
```

# xcode - Xcode 标头包含冲突

> ID：10181742
> 
> 赞同：1
> 
> 时间：2012-04-16T21:07:44.917
> 
> 标签：xcode

在我的项目中，我有这个标题：

```
src/thread/Semaphore.h 
```

在我的设置中，我将 src 作为包含文件夹（但不是直接 src/thread）。然而，当我尝试：

```
#include <semaphore.h> 
```

要将文件包含在 /usr/include/semaphore.h 中，Xcode 会继续包含 src/thread/Semaphore.h。当我从项目中删除文件时问题就消失了（我没有移动到垃圾箱，只是删除了引用，所以我仍然可以包含 #include "thread/Semaphore.h"），但这似乎是一个丑陋的解决方法。

如何防止 Xcode 递归添加包含目录？

# c# - 没有错误消息的 Protobuf-Net InvalidOperationException

> ID：10181745
> 
> 赞同：1
> 
> 时间：2012-04-16T21:07:48.017
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net, invalidoperationexception

我正在使用以下类来序列化带有前缀的单个对象 (T)，然后尝试使用 DeserializeItems() 方法反序列化回列表：

```
public class ProtobufSerializationProvider<T> : ISerializationProvider<T>
{
    readonly Type type; 
    readonly TypeModel model;

    public ProtobufSerializationProvider()
    {
        this.type = typeof(T); 
        this.model = createModel(this.type);
    }

    public byte[] Serialize(T instance)
    {
        byte[] buffer; 
        using (MemoryStream strm = new MemoryStream())
        {
            model.SerializeWithLengthPrefix
              (strm, instance, type, PrefixStyle.Base128, 1);

            buffer = strm.GetBuffer();              
        }
        return buffer; 
    }

    // here is the problem method
    public IEnumerable<T> DeserializeAll(MemoryStream stream)
    {
        return model.DeserializeItems<T>(stream, PrefixStyle.Base128, 1); 
    }

    TypeModel createModel(Type type)
    {
        try
        {
            RuntimeTypeModel runtimeModel = TypeModel.Create();
            this.addTypeToModel(runtimeModel, type);
            this.addTypePropertiesToModel(runtimeModel, type);
            return runtimeModel.Compile();
        }
        catch (Exception e)
        {
            throw e.InnerException;
        }
    }

    void addTypePropertiesToModel(RuntimeTypeModel typeModel, Type type)
    {
        PropertyInfo[] properties = type.GetProperties();
        for (int i = 0; i < properties.Length; i++)
        {
            Type innerType = properties[i].PropertyType;
            if (!innerType.IsPrimitive && !(innerType == typeof(string)))
            {
                addTypeToModel(typeModel, properties[i].PropertyType);
            }
        }
    }

    MetaType addTypeToModel(RuntimeTypeModel typeModel, Type t)
    {                
        var properties = t.GetProperties()
            .Select(p => p.Name)
            .OrderBy(name => name);

        return typeModel
            .Add(t, true)
            .Add(properties.ToArray());            
    }
} 
```

当我尝试枚举 IEnumerable（无论是通过强制转换 ToList() 还是计数 Count() 等）时，我得到一个默认的 InvalidOperationException“操作由于对象的当前状态而无效”。特别是 MoveNext() 方法将抛出错误：

```
enumerator.MoveNext() 
```

此外，必须在 DeserializeItems(stream) 返回之前打开流，我确保是这种情况。但是一旦 IEnumerable 成功返回，我就无法使用它。

不确定序列化项目是否有问题。我还注意到我的每个项目都是 256 个字节，尽管这些字节的很大一部分只是尾随的空值。

这是我作为测试序列化的类。请注意，我没有使用属性，因为我手动创建了模型：

```
public class NestedFoo
{
    public string NestedFooStr { get; set; } 
}

public class Foo
{
    public string Foo1 { get; set; }
    public string Foo2 { get; set; }
    public string Foo3 { get; set; }
    public string Foo4 { get; set; }

    public NestedFoo NestedFoo { get; set; }
} 
```

谢谢。

**更新**

从 MemoryStream.GetBuffer() 切换到 MemoryStream.ToArray() 后，消息会缩短，但尝试强制转换 IEnumerable .ToList() 或任何其他操作会产生相同的错误。

但是，我注意到，在切换到 .ToArray() 之后，IEnumerable 的“Current”属性在枚举到达 IEnumerable 中的最后一个元素之后，然后再抛出错误，而在第一个使用 .GetBuffer() 时，“Current”属性抛出错误时的元素。

我怀疑问题可能是 IEnumerable<> 不知道它什么时候没有元素，因为它到达了流的末尾？我将使用 SerializeWithLengthPrefix() 序列化的几个项目附加到单个字节 []，然后可能会有空值留在数组尾随。如果我将整个数组读入 DeserializeItems 方法，它是否需要知道如何终止或仅在检测到长度前缀时才继续（如我所料？）。

我还有一个问题是使用 SerializeWithLengthPrefix() 方法在多大程度上等同于使用 DataFormat.Group 枚举在一个操作中序列化一个列表，例如：

```
[ProtoContract]
public class ProtoList<T>
{
    [ProtoMember(1, DataFormat = DataFormat.Group)]
    public List<T> List { get; set; }

    public ProtoList() { }

    public ProtoList(IEnumerable<T> items)
    {
        this.List = new List<T>(items); 
    }
} 
```

使用这样的容器似乎表现得非常好，所以如果我想一次性序列化一个列表，我可能会选择这条路线。

但是，为了在添加项目时单独序列化项目，我目前正在使用我自己的前缀函数，所以如果我能让 Protobuf 前缀方法工作，那也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:58:47.367

256/尾随空值是因为您使用的是`MemoryStream.GetBuffer()`. 只要与 , 结合使用，此方法就*可以*`Length`，因为缓冲区过大。如果您想要一个大小合适的数组，请`ToArray()`改用。或者用于`ArraySegment<byte>`避免复制任何数据。

这也有可能修复异常（0 不是字段标题的有效值）。如果没有，请发表评论，以便我知道要更详细地查看。如果它确实解决了它，也请让我知道，我会尝试使错误消息（对于 0 字段标题的情况）更有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-18T09:42:01.707

只是为了确认，遇到了同样的问题。

不要使用标签/数据包ID为0。解决了一切。

# magento - 产品页面上的 Magento 错误

> ID：10181760
> 
> 赞同：1
> 
> 时间：2012-04-16T21:09:18.830
> 
> 标签：magento, product

我们的 Magento 产品页面收到此错误，但无法弄清楚原因：

```
a:5:{i:0;s:178:"无效的方法 Mxperts_Jquery_Block_Page_Html_Head::addExternalItem(Array
(
    [0] => external_js
    [1] => https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js
)
)";i:1;s:2635:"#0 /home/partytim/public_html/app/code/community/CorlleteLab/Imagezoom/Block/Catalog/Product/View.php(38): Varien_Object->__call(' addExternalItem'，数组）
#1 /home/partytim/public_html/app/code/community/CorlleteLab/Imagezoom/Block/Catalog/Product/View.php(38): Mxperts_Jquery_Block_Page_Html_Head->addExternalItem('external_js', 'https://ajax.go. ..'）
#2 /home/partytim/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): CorlleteLab_Imagezoom_Block_Catalog_Product_View->_prepareLayout()
#3 /home/partytim/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#4 /home/partytim/public_html/app/code/core/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('catalog/product...', 'product.info')
#5 /home/partytim/public_html/app/code/core/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('catalog/product...', 'product.info')
#6 /home/partytim/public_html/app/code/core/Mage/Core/Model/Layout.php(204): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#7 /home/partytim/public_html/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#8 /home/partytim/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(345): Mage_Core_Model_Layout->generateBlocks()
#9 /home/partytim/public_html/app/code/core/Mage/Cms/Helper/Page.php(112): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#10 /home/partytim/public_html/app/code/core/Mage/Cms/Helper/Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'no-route')
#11 /home/partytim/public_html/app/code/core/Mage/Cms/controllers/IndexController.php(75): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'no-route')
#12 /home/partytim/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Cms_IndexController->noRouteAction()
#13 /home/partytim/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('noRoute')
#14 /home/partytim/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#15 /home/partytim/public_html/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#16 /home/partytim/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#17 /home/partytim/public_html/index.php(80): Mage::run('', 'store')
#18 {main}";s:3:"url";s:24:"/chili-pepper-beads.html";s:11:"script_name";s:10:"/index.php";s :4:"皮肤";s:7:"默认";}
```

所有其他页面似乎都正确显示（产品网格、结帐、cms 页面等）

知道会发生什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:11:41.387

您正在尝试使用 addExternalItem 函数通过外部链接包含 jquery.min.js，但由于某种原因该函数失败。您可以尝试在本地托管 jquery 文件并将其包含在 page.xml 中

# javascript - 有人知道一个好的网络调试工具吗？

> ID：10181762
> 
> 赞同：0
> 
> 时间：2012-04-16T21:09:34.177
> 
> 标签：javascript, debugging, http

单击某个页面中的按钮（发布）时，我需要跟踪 javascript 和网络流量。

我想一步一步地处理代码。有没有办法做到这一点？（不调试我的代码，我需要看看浏览器对任何站点发生了什么）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:10:54.857

如果您希望从客户端进行调试，我发现内置工具中的 Google Chrome 非常方便。

[你可以在这里](https://developers.google.com/chrome-developer-tools/docs/overview)找到一个很好的介绍/概述

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T21:14:36.250

[http://getfirebug.com/](http://getfirebug.com/)

Firebug 与 Firefox 集成，在您浏览时将丰富的 Web 开发工具放在您的指尖。您可以在任何网页中实时编辑、调试和监控 CSS、HTML 和 JavaScript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T21:14:47.400

提琴手很棒： http: [//fiddler2.com/fiddler2/](http://fiddler2.com/fiddler2/)。它充当代理，允许您检查请求/响应周期的每个步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T05:21:56.420

如果您在 Windows 上，请尝试[HTTP 调试器](http://www.httpdebugger.com/)。

# javascript - 尝试在加载 javascript 动画之前隐藏 HTML 页面（超级新手版）

> ID：10181763
> 
> 赞同：0
> 
> 时间：2012-04-16T21:09:41.247
> 
> 标签：javascript, animation, load, flicker

我知道你在想什么，不要再这样了，对吧？

这是我的网站： http: [//mydesignfeti.sh/](http://mydesignfeti.sh/)

正如您将看到的，浏览器会加载正文及其所有内容，然后加载 javascript 动画。我想要的只是加载动画而不必事先查看内容加载。如果您缺乏想象力，只需刷新页面或单击左上角的徽标即可查看我希望页面如何加载。

我尝试使用 javascript 切换容器 div 的类显示，但显然我做错了。

建议？答案？笑吗？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:24:24.277

我对 Adob​​e Edge 的工作原理不是很熟悉，但基本的想法是您需要：

1.  使您的初始 html/css 与动画基本状态相匹配。

2.  使用 css 隐藏您的动画 div `display: none`，并在动画中添加第二个状态以显示所有元素（例如`display: block`），然后再将它们滑回屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:23:45.527

在 html 中设置容器 div 属性`style="display: none;"`，这将隐藏 html 元素，直到加载 javascript 动画。

# svn - SVN 合并修订范围：svn merge 如何知道它需要合并哪些修订？

> ID：10181768
> 
> 赞同：1
> 
> 时间：2012-04-16T21:10:09.957
> 
> 标签：svn, merge

我的问题有点复杂，请多多包涵。

我创建了一个分支来进行一些开发，现在我想将所有变更集合并到主干上。在分支的两个点，我将主干中的更改合并到分支中以再次更新。

```
mkdir trunk
cd trunk
svn co $TRUNK . 
```

**我在r2797**创建了分支，我对该分支的最后一次提交是**r3151**。

现在，当我独自将分支合并到我的工作副本主干时：

```
svn merge $BRANCH . 
```

我收到以下消息：

```
--- Merging r2798 through r3022 into '.': 
```

这很奇怪，为什么直到 r3151 才应用所有更改集？

所以我尝试指定合并命令的修订。

```
svn merge -r2797:3151 $BRANCH . 
```

但我得到相同的结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:47:56.410

SVN 使用 svn:mergeinfo 属性来跟踪合并。它可能不会合并其他修订，因为它们已经合并了。

有关详细信息，请参阅[http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.basicmerging.mergeinfo](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.basicmerging.mergeinfo)。

# php - MySQL PHP while循环-返回的记录少于预期

> ID：10181769
> 
> 赞同：1
> 
> 时间：2012-04-16T21:10:10.780
> 
> 标签：php, sql, while-loop

我遇到了一个有趣的问题，即使用一个带有几个连接的选择查询从 mysql 表中检索数据。

1）**查询：**

```
$task_details = "SELECT tasks.task, ";
$task_details = $task_details . "tasks.description,";
$task_details = $task_details . "tasks.finishby, ";
$task_details = $task_details . "responsibles.full_name, ";
$task_details = $task_details . "task_assignments.completed, ";
$task_details = $task_details . "tasks.id, ";
$task_details = $task_details . "responsibles.user_id ";
$task_details = $task_details . "FROM tasks,task_assignments,responsibles ";
$task_details = $task_details . "WHERE ";
$task_details = $task_details . "tasks.id = task_assignments.id_task AND ";
$task_details = $task_details . "responsibles.id = task_assignments.id_assignee AND ";
$task_details = $task_details . "tasks.id = $id_task;";

$task_details_q = mysql_query($task_details) or die(mysql_error()); 
```

1a）**结果示例查询：**

```
SELECT tasks.task, tasks.description, tasks.finishby, responsibles.full_name, task_assignments.completed, tasks.id, responsibles.user_id
FROM tasks, task_assignments, responsibles
WHERE tasks.id = task_assignments.id_task
AND responsibles.id = task_assignments.id_assignee
AND tasks.id =19 
```

2）**HTML/PHP代码：**

```
<table class="task_table">
        <thead>
            <th>Task</th>
            <th>Description</th>
            <th>Due date</th>
            <th>Person</th>
            <th>Completed</th>
        </thead>
        <?php

        $even = false;
        $trow = "";
while($row = mysql_fetch_array($task_details_q))
        {

            $trow = $trow . "<tr";
             if($even) $trow = $trow . " style=\"background-color: #f2f2ed; \"";
            $trow = $trow. ">";
            $trow = $trow . "<td >$row[0]</td>";
            $trow = $trow . "<td>" . $row[1] . "</td>";
            $trow = $trow . "<td>" . date('d-m-Y',$row[2]) . "</td>";
            $trow = $trow . "<td>$row[3]</td>";
            $trow = $trow . "<td style=\"text-align: center;\" >";
            if($row[4] > 0)
            {
                $trow = $trow . "<a href=\"javascript:modifyCompleted('remove','$row[6]',$row[5])\" title=\"Click to change completion of this task by this person\">yes</a>";
            }
            else
            {
                $trow = $trow . "<a href=\"javascript:modifyCompleted('add','$row[6]',$row[5])\" title=\"Click to change completion of this task by this person\">no</a>";
            }
            $trow = $trow . "</td>";
            $trow = $trow . "</tr>";

            $even =! $even;
            $number = $number + 1;
        }
            $trow = $trow . "<tr style=\"border-top: 1px solid #666666;\"><td></td><td></td><td></td><td></td>";
            $trow = $trow . "<td>";
            $trow = $trow . "<a href=\"javascript:modifyCompleted('add_all','all',$task_details_array[5])\" title=\"Click to complete all\">Complete all</a>";
            echo $trow;
        ?>
    </table><br />
    <span style="text-align: center;display:block;font-size: 12px;"><a href="tasks.php">Go back to task overview</a></span> 
```

3）**问题/问题**：由于某种原因，显示的表格总是省略**​​一条**记录。我在许多 PHP 脚本中使用了相同（或非常相似的概念），但从未遇到过相同的问题。我认为查询本身不是问题——当我直接对数据库运行它时，它会返回正确数量的值......（我认为）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:52:28.257

2件事：

1）您不应该在每次添加信息时提交答案。您应该单击原始问题下的“编辑”并将新信息添加到问题中。

2）我想如果我澄清如何`mysql_query`和`mysql_fetch_array`工作你会看到发生了什么。

当您`mysql_query`使用“SELECT”调用时，查询它会返回一个`resource`. 这`resource`只是对记录集的引用。然后，当您调用它时`mysql_fetch_array`，`resource`它将从集合中返回当前记录，并推进记录指针。

所以，当你第一次调用时`mysql_query`，记录指针指向第一个结果。然后你调用`mysql_fetch_array`第一条记录作为数组返回，并且指针前进到第二条记录。下次调用`mysql_fetch_array`此第二条记录时将返回，然后指针将指向第三条记录。

如果没有第 3 条记录，下次调用`mysql_fetch_array`将找不到对应的记录，会返回 false。

这就是您使用`while($row = mysql_fetch_array($task_details_q,MYSQL_NUM))`. 您将结果放入变量中`$row`并推进结果指针，然后使用`$row`. 最终，您会将指针前进到最后一个结果之外，并且`$row`将为 false，这将阻止您的 while 循环前进。

现在我已经了解了理论，这里是您的代码发生了什么（我将删除不相关的代码`//...`并在此过程中添加我自己的注释）：

```
$task_details_q = mysql_query($task_details) or die(mysql_error());
//now you have a resource $task_details_q, it points to the first result

$task_details_array = mysql_fetch_array($task_details_q,MYSQL_NUM);
//you retreive the first result, and advance the pointer to the second result

for($x=0;$x < sizeof($task_details_array);$x++)
{
            //you perform operations (echo'ing in this case) on your first result
    echo $x . ". : " . $task_details_array[$x] . "<br />";
}

//... HTML CODE SKIPPED

$even = false;
$trow = "";

//the first time this while statement is called you place the data from the second result in $row,
        //and advance the pointer to the third result
//the next time you go through the loop you try to place the data from the third result in $row,
        //since you say there are only 2 results to your query $row is simply false. 
        //This causes the while to stop executing and the code to continue on
while($row = mysql_fetch_array($task_details_q,MYSQL_NUM))
{
    //... PRINT TABLE CELLS FROM $row SKIPPED
}

//... REMAINING HTML SKIPPED 
```

我不确定您是否真的需要代码块：

```
$task_details_array = mysql_fetch_array($task_details_q,MYSQL_NUM);
for($x=0;$x < sizeof($task_details_array);$x++)
{
    echo $x . ". : " . $task_details_array[$x] . "<br />";
} 
```

或者如果您只是添加它进行调试。如果它只是用于调试，请将其删除，您的第一个结果将显示在 while 循环中。如果您需要`for`执行该循环，请对此答案发表评论，我将编辑我的答案以在`for`and`while`循环中使用第一个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:01:42.207

由于 php 似乎是正确的，因此问题的原因可能在于 html。您的标题行没有`<tr>`标签，因此浏览器可能会因为您缺少第一条记录而窒息。

修复此问题后，我建议在 html 验证器中检查您的 html，以确保那里没有更多错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:15:50.993

@Ben：这是和之间的完整`mysql_query($task_details)`代码`while($row = mysql_fetch_array($task_details_q))`：

```
 $task_details_q = mysql_query($task_details) or die(mysql_error());
 $task_details_array = mysql_fetch_array($task_details_q,MYSQL_NUM);

for($x=0;$x < sizeof($task_details_array);$x++)
{
    echo $x . ". : " . $task_details_array[$x] . "<br />";
} 
```

?>

```
<h3>Task details - "<?php echo strtoupper($task_name);  ?>"</h3>
<span class="notifierOK">Table below lists all people assigned to the task - including the status (complete / incomplete). To change person's status click on the 'yes' or 'no' link. If you then go back
to (<a href="tasks.php">previous page</a>) the completion percentage value will be re-calculated.</span><br />

<form id="task_details" method="post" name="task_details" style="margin-left: auto; margin-right: auto;width: 800px;box-shadow:10px 10px 5px #888888;">
<table class="task_table">
        <thead>
            <tr>
            <th>Task</th>
            <th>Description</th>
            <th>Due date</th>
            <th>Person</th>
            <th>Completed</th>
            <tr />
        </thead>
        <?php

        $even = false;
        $trow = "";

        while($row = mysql_fetch_array($task_details_q,MYSQL_NUM)) 
```

请注意，我已根据您的建议将“MYSQL_NUM”添加为数组类型，因此它不一定属于那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T13:50:16.787

我解决了，我有同样的问题。

```
$run_query = mysqli_query($conn, $stores);

                if ($run_query === false){
                    //error
                }else if (mysqli_num_rows($run_query)){
                    $row = mysqli_fetch_array($run_query);
                    echo 'bla bla bla' //on this echo I needed to show the data once.
                    $run_query =  null;
                    $run_query = mysqli_query($conn, $stores);
                    while ($row = mysqli_fetch_array($run_query)) { //and here I needed to show up the loops of the results of my query.} 
```

所以...我只是重置了运行查询的变量并重新运行了搜索。它对我有用！;)

# java - 对使用 Java 创建的 Excel 文件的访问权限

> ID：10181772
> 
> 赞同：4
> 
> 时间：2012-04-16T21:10:21.307
> 
> 标签：java, excel, jxl

我正在创建一个 Excel 文件，它应该是只读的。为此，我使用： `(sheetName).getSettings().setProtected(true);` 对于添加的每个新工作表。

只有具有管理员权限的人才能获得对该文件的完全访问权限，因此在确认用户具有管理员权限后，我会： `(workbookName).getSheet(0).getSettings().setProtected(false);`

在具有管理员权限的人打开文件后，它不再是只读的，直到普通用户`.getSettings().setProtected(true);`再次向其中添加更多内容。换句话说，有人可以在管理员访问文件之后和非管理员之前更改文件。我不知道如何解决它，也许你可以帮助我？

**--EDIT--**
用户正在向 excel 文件添加数据，用信息文件填充单元格 - 读取工作簿，复制，添加一些信息，写入和关闭工作簿。非管理员用户可以直接打开它以查看他们添加的内容是否存在，或者查看其他用户添加的内容，但他们不应该能够更改文件中的任何内容。

这是一个类似向导的应用程序，它会向用户询问数据，然后将单元格添加到文件中。添加数据的方法之一是[here](https://stackoverflow.com/questions/10096915/adding-a-comment-to-a-cell-in-an-excel-file-with-java-using-jxl-library)。该文件从用户那里收集个人信息。该应用程序仅用于添加数据，而不是用于访问它。用户只能通过双击输出直接访问文件，并且只能查看数据。管理员可以更改文件，其他用户不应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:28:01.213

如果您愿意为商业软件付费，最新版本的[ExtenXLS](http://extentech.com/estore/product_detail.jsp?product_group_id=1&product_id=381)对 Excel 支持的所有加密格式都有完整的读写支持。只需构造一个`EncryptedWorkBookHandle`而不是正常的`WorkBookHandle`. 这将使用未经修改的 JRE 支持的最强密码，用于 XLS 的 RC4 和用于 XLSX 的 128 位 AES。如果您想将 256 位 AES 与 OOXML 一起使用，并且您已经安装了[JCE 无限制策略](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)，您可以使用`MSOfficeEncrypter`该类来执行此操作。

[JExcelAPI](http://jexcelapi.sourceforge.net/)是一种流行的开源 Java 电子表格 API，似乎根本不支持加密。[Aspose.Cells](http://www.aspose.com/categories/java-components/aspose.cells-for-java/default.aspx)是一种商业产品，[支持强加密](http://www.aspose.com/documentation/java-components/aspose.cells-for-java/setting-strong-encryption-type.html)。Actuate 的 e.Spreadsheet 的文档似乎已经从网上消失了，所以我不知道它是否支持加密。

由于免费提供的 Java 电子表格 API 似乎都不支持编写加密电子表格，因此如果您不愿意使用商业软件，则需要想出一个解决方法。例如，您可以将电子表格写入加密的 ZIP 文件。java.util.zip 不支持加密，但它看起来像[Zip4j](http://www.lingala.net/zip4j/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:44:56.137

事情是这样的，因为您告诉用户可以在管理员删除保护时简单地对其进行编辑，似乎没有标准的替代方案。但是，如果这个文件正在使用中，那么没有其他人可以在外面修改它吗？因此，只需在管理员退出 excel 文件时再次保护它，并在管理员登录时删除保护。就像蒂姆说的那样。您可以创建单独的函数来编辑 excel 文件，然后执行

禁用保护写修改启用保护

在所有这些功能中。如果这是可行的，您可以使用 AspectJ 之类的东西来简化禁用保护和启用保护部分；

# jquery - 触发onClick jQuery函数？

> ID：10181777
> 
> 赞同：-1
> 
> 时间：2012-04-16T21:10:33.147
> 
> 标签：jquery, onclick

我有以下代码：

```
<a id="content4" class="navlink switcher" style="color:#002EB8" onclick="function(){$('#slider').nivoSlider();}" name="content4">Photos</a> 
```

但是，它不起作用。如何修改它/在 中放置一个新脚本`<head>`以使函数正确执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:13:34.277

不要使用`inline code`，以这种方式将点击事件附加到处理程序：

```
$(function() {
    $('#content4').click(function() {
        $('#slider').nivoSlider();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:21:53.183

也许你想要这样的[东西](http://jsfiddle.net/andreapier/P6Qxs/)？不是很清楚，下次再具体点试试！

# linux - 提供 Unix/Linux 上的检查信息的网络服务

> ID：10181778
> 
> 赞同：0
> 
> 时间：2012-04-16T21:10:33.543
> 
> 标签：linux, web-services, unix, daemon, snmp

我需要在 Unix（以及 Linux）机器中实现一个守护进程，它为网络中的其他功能创建一个检查列表。这应该有两种方式。

1）在客户端，我需要一个可以从网络访问我的服务器的功能（最好是Windows，但实际上任何语言都适合）

```
bool CheckMe (string serverName, string myStringToCheck){
     return ServiceProvidedByServer (serverName, myStringToCheck)
}; 
```

2）在 Unix/Linux 端，我需要一个访问文本列表文件的服务，如果字符串 myStringToCheck 存在或不存在于列表中，它会响应`true`or 。`false`

我该如何实施？第一次尝试是使用 LDAP 列表，但这是不允许的（我不应该为此创建一个 LDAP 组，但如果我可以在 Unix 中创建组则有效），所以我想到了 Unix 守护进程.

提前致谢。

**更新**

一个朋友给了我一个主意。也许会存在与 Unix 上的 Windows Active Directory 等价的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:38:02.563

Rpc 应该适合你。

[http://linux.die.net/man/3/rpc](http://linux.die.net/man/3/rpc)

我会推荐 DBUS，但恐怕它在 Windows 中不可用。

# c++ - 如何将 C++ 程序作为 Simulink 模块运行？

> ID：10181786
> 
> 赞同：1
> 
> 时间：2012-04-16T21:10:57.907
> 
> 标签：c++, matlab, visual-c++, udp, simulink

我用 C++ 编写了一个 UDP 套接字，以便从另一个程序接收字符串。现在我需要在 Simulink 项目中使用数据。我在 Simulink 中尝试了 UDP-receiver 块，但我无法分离数据字符串，所以我更喜欢尝试将我的 UDP 套接字（在 C++ 中）作为 Simulink 中的块运行。我知道我应该使用 S-Function，但我不知道如何或是否还有其他可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:12:44.797

有一个功能叫做`Legacy Code Tool`应该做你所追求的。从本质上讲，它简化了在使用现有`C`/时定义自定义 Simulink S-Function 模块的过程`C++`。我似乎记得使用`C++`代替时有一些限制，`C`但我认为它们不太重要......

# java - Java Web 服务客户端问题 - HTTP 标头 - 主机字段

> ID：10181788
> 
> 赞同：0
> 
> 时间：2012-04-16T21:11:08.357
> 
> 标签：java, web-services, websphere

我们有一个隐藏在 F5 设备后面的 Web 服务。F5 接受 https 请求，解密消息，然后将解密的消息发送到我们的 Web 服务。Web 服务向 F5 响应解密消息，然后 F5 加密并发送回 Web 服务请求的发起者。

此 Web 服务适用于以某些语言编写的客户端，但不适用于其他语言。这个问题是指基于 Websphere JRE 和库的 Java 实现。其他（工作）语言将 HTTP 标头的 Host 字段设置为 ourhost.net，而 Java（通过 https 发送时）将 HTTP 标头的 Host 字段设置为 ourhost.net:443。我意识到 https 来自端口 443，但我不明白为什么 Java 认为有必要在 Host 字段中包含该端口。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:17:02.307

由于 443 是 HTTPS 的默认端口，因此不需要将其包含在 Host 标头中，但这样做也没有错。请参阅[HTTP 1.1 规范的第 14.23 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)。

# objective-c - 需要在没有填充 0 的情况下解析一个字符串到日期

> ID：10181790
> 
> 赞同：0
> 
> 时间：2012-04-16T21:11:21.893
> 
> 标签：objective-c, ios, nsdateformatter

我已经阅读了很多示例，但我面临的问题是我得到的日期没有前导 0，而我发现的所有 Objective-c 内容都有它们。所以我需要记下日期：

2012 年 4 月 9 日下午 1:30

并确定是否是今天。我的位置是要么抓住今天的日期并将其与该字符串的第一部分进行比较，但正如我之前所说，我无论如何都找不到在没有前导 0 的情况下在目标 c 中创建日期。我希望避免手动解析该字符串以添加前导 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:46:42.380

使用 NSDateFormatter 对象

```
[dateFormatter setDateFormat:@"h:mm a"]; 
```

如果你想要 0

```
[dateFormatter setDateFormat:@"hh:mm a"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:52:36.977

我认为对日期格式字符串使用单个 M 选项将允许它解析单个数字的月份值：

[此处](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)指定了可能的日期格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T17:05:19.197

@ynistersix 答案是正确的。在[Data Formatting Guide](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)中，他们说`NSDateFormatter`遵循[http://unicode.org/reports/tr35/tr35-dates.html](http://unicode.org/reports/tr35/tr35-dates.html)

> h 1..2 11 小时 [1-12]。当用于骨架数据或在 API 中传递的用于灵活日期模式生成的骨架中时，它应该匹配区域设置（h 或 K）首选的 12 小时周期格式；它不应与 24 小时循环格式（H 或 k）匹配。**使用 hh 进行零填充**。

这与大多数其他语言一致。像[.NET](https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx)

> "h" 小时，使用从 1 到 12 的 12 小时制。

*   2009-06-15T01:45:30 -> 1
*   2009-06-15T13:45:30 -> 1

> "hh" 小时，使用从 01 到 12 的 12 小时制。

*   2009-06-15T01:45:30 -> 01
*   2009-06-15T13:45:30 -> 01

# ios - 导出核心数据实体的最佳实践

> ID：10181792
> 
> 赞同：7
> 
> 时间：2012-04-16T21:11:31.523
> 
> 标签：ios, objective-c, core-data, export, entity

我需要导出一些实体及其关系，以便将其导入其他 iOS 设备。例如：

```
A.relationship1 <------>> B.relationship1 (one to many)
B.relationship2 <-------> C.relationship1 (one to one) 
```

有没有办法序列化/反序列化（或其他方法）以“轻松”导出/导入核心数据模型的片段（由获取的结果控制器获取的对象及其关系？通过序列化所有数据包（NSData 或其他东西） ，反序列化并将其插入到上下文中（导入）。

请指出我正确的方向。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:27:43.060

我认为，对您来说最好的方法是将您的核心数据对象转换为 JSON，保存它，然后将其解码回来。

这是 Marcus Zarra 编码和解码的绝对出色的工作代码

[iPhone 上的 JSON 和核心数据](https://stackoverflow.com/questions/2362323/json-and-core-data-on-the-iphone)

# java - 如何在 Swing 应用程序中模拟 Ctrl + Shift + f1 并写入日志文件

> ID：10181793
> 
> 赞同：4
> 
> 时间：2012-04-16T21:11:32.123
> 
> 标签：java, swing, awtrobot

我有这个摆动的客户端-服务器应用程序。

我想以编程方式模拟“ **Ctrl+Shift+f1** ”效果，并为我为调试目的而加载的**某些帧**写入我的 log4j 日志文件。是否有我调用的摇摆方法来打开此选项？我该怎么做呢？

或者有没有更好的方法在加载和写入日志文件时了解布局？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T21:29:13.247

您可以使用 Robot 类很容易地模拟按键，它具有[按下和释放键](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html#keyPress%28int%29)的方法。

```
Robot r = new Robot();
r.keyPress(KeyEvent.VK_CONTROL);
r.keyPress(KeyEvent.VK_SHIFT);
r.keyPress(KeyEvent.VK_F1);
r.keyRelease(KeyEvent.VK_F1);
r.keyRelease(KeyEvent.VK_SHIFT);
r.keyRelease(KeyEvent.VK_CONTROL); 
```

# c++ - IntelliSense：我的函数中使用的每个变量都未定义标识符“[空白]”

> ID：10181802
> 
> 赞同：2
> 
> 时间：2012-04-16T21:12:28.287
> 
> 标签：c++, windows, visual-studio-2010, compiler-errors

我正在使用 Visual Studio。当我尝试编译我的代码时，对于“hexISOS”函数中使用的每个变量，我收到一条错误消息，指出 21“IntelliSense：标识符“[blank]”未定义”。我稍后在代码中定义了这些变量，想知道是否有人能告诉我出了什么问题。

我的代码如下所示：

```
#include <iostream>
#include <cmath>
using namespace std;

int hexISOS(double AX, AY, BX, BY, CX, CY, DX, DY)
{
    long double sol1, sol2;
    bool ans;

    sol1 = sqrt(pow((AX - CX), 2) + pow((AY - CY), 2));
    sol2 = sqrt(pow((BX - DX), 2) + pow((BY - DY), 2));

    if(sol1 == sol2)
    {
    ans = true;
    }

    else
    {
    ans = false;
    }

    cout << "\nThe distance between A and C is " << sol1 << endl;
    cout << "The distance between B and D is " << sol1 << endl;
    cout << "\nIsosceles = " << ans;

    return 0;
}

int main()
    {
    double AX, AY, BX, BY, CX, CY, DX, DY;

    cout << "AX: ";
    cin >> AX;

    cout << "\nAY: ";
    cin >> AY;

    cout << "\nBX: ";
    cin >> BX;

    cout << "\nBY: ";
    cin >> BY;

    cout << "\nCX: ";
    cin >> CX;

    cout << "\nCY: ";
    cin >> CY;

    cout << "\nDX: ";
    cin >> DX;

    cout << "\nDY: ";
    cin >> DY;

    hexISOS(AX, AY, BX, BY, CX, CY, DX, DY);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:16:19.253

您可以使用一次数据类型然后使用一堆变量名称的事情 - 就像在主函数的第一行一样 - 我认为您不能在函数的参数列表中这样做。尝试这样做，看看是否有帮助：

```
int hexISOS(double AX, double AY, double BX, double BY, double CX, double CY, double DX,
        double DY) 
```

编辑：我认为不合法的另一件事是：

```
long double sol1, sol2; 
```

您可能需要将其更改为以下内容：

```
long sol1;
double sol2; 
```

或类似的东西：

```
double sol1, sol2; 
```

# java - Spring 3.1 + Hibernate 4.1 Propagation.Supports 问题

> ID：10181807
> 
> 赞同：8
> 
> 时间：2012-04-16T21:13:06.557
> 
> 标签：java, spring, hibernate

我正在将我的项目从 Spring 3.0 +hibernate 3.6.x 迁移到 S3.1 + H4.1

我的新代码如下

```
 <context:component-scan base-package="x.y.z">
</context:component-scan>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="hibernateProperties">
 <props>
    <prop key="hibernate.dialect">org.hibernate.dialect.x</prop> 
    <prop key="hibernate.show_sql">true</prop> 
    <prop key="hibernate.hbm2ddl.auto">update</prop> 
    <prop key="hibernate.show_sql">true</prop> 
  </props>
     </property>
        <property name="annotatedClasses">
      <list>
        <value>x.y.z.entities.Student</value>        
         </list>
    </property>
  </bean>

<bean id="transactionManager" 
            class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

<aop:config>
    <aop:pointcut id="daoServicePoint" 
            expression="execution(* x.y.z.StudentDao.*(..))"/>
    <aop:advisor advice-ref="txAdvice" pointcut-ref="daoServicePoint"/>
  </aop:config>

  <tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>
      <tx:method name="save*" propagation="REQUIRED"/>
       <tx:method name="update*" propagation="REQUIRED"/>
       <tx:method name="delete*" propagation="REQUIRED"/>
     <tx:method name="get*" propagation="SUPPORTS" read-only="true"/>
    </tx:attributes>
  </tx:advice> 
```

当运行 getStudent 方法标记作为支持并且只读我得到

```
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1024) 
```

Spring 3.0 和 Hibernate 3.6.x 以前没问题，现在它被改变了。我从 Spring 论坛中发现，如果我需要使用，我需要标记事务 REQUIRED`sessionFactory.getCurrentSession();`

为了在我的代码中获得最大的并发速度，我使用了较低级别的技术。在执行需要多个 get/save/update/ 查询的操作时，我按照以下方式进行操作：

1.  被调用的方法标记为`SUPPORTS`。
2.  执行了所有获取查询，这些查询也被标记为`SUPPORTS`内部第一种方法。
3.  然后开始在同一方法内标记为的查询，`REQUIRED`这是我的可回滚事务开始的地方。

使用这种技术我得到了很好的性能改进，但是将我所有的方法标记为 REQUIRED 会破坏它。

如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T17:38:18.643

我在试验 Spring 和 Hibernate 3 / 4 时遇到了同样的问题。

看起来这是一个已知问题，在以下 JIRA 链接中进行了描述。

[https://jira.springsource.org/browse/SPR-9020](https://jira.springsource.org/browse/SPR-9020)

如果没有打开现有的事务/会话并且调用的方法@Transactional 配置为propagation = Propagation.SUPPORTS，则看起来Hibernate 4 版本的SpringSessionContext 不会打开新会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:04:25.007

我认为您仍然可以将事务标记为只读。不确定它是否对性能有影响。

# api - Foursquare 的开放图元数据

> ID：10181815
> 
> 赞同：0
> 
> 时间：2012-04-16T21:13:50.650
> 
> 标签：api, facebook-opengraph, foursquare

[与保存到foursquare](https://foursquare.com/business/brands/offerings/savetofoursquare) api集成时是否可以仅使用开放图形数据？

Foursquare API 声明：

> 为了让 Save tofoursquare 按钮在您的站点上工作，您的站点应该包含 hCard 或 OpenGraph 位置元数据，以便foursquare 知道您的网页所指的位置。

但是，当我使用以下数据加载我的页面时：

```
<head>
    <meta property="og:latitude" content="40.707992194260186"/>
    <meta property="og:longitude" content="-74.05560369801627"/>
    <meta property="og:street-address" content="222 Jersey City Blvd."/>
    <meta property="og:locality" content="Jersey City"/>
    <meta property="og:region" content="NJ"/>
    <meta property="og:postal-code" content="07305"/>
    <meta property="og:country-name" content="USA"/>
</head> 
```

根据[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

我收到“找不到与此页面匹配的场所”。来自[https://foursquare.com/business/brands/offerings/savetofoursquare/tester](https://foursquare.com/business/brands/offerings/savetofoursquare/tester)

我相信我应该收到以下地点：[https ://foursquare.com/v/liberty-science-center/4bf2e2fa6991c9b66e9f29e9](https://foursquare.com/v/liberty-science-center/4bf2e2fa6991c9b66e9f29e9)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:08:25.460

您必须提供一些附加信息（请参阅必需的[Open Graph](https://developers.facebook.com/docs/opengraphprotocol/)字段），尤其是。一个标题：

```
<meta property="og:title" content="Liberty Science Center" />
<meta property="og:type" content="landmark" />
<meta property="og:latitude" content="40.707992194260186" />
<meta property="og:longitude" content="-74.05560369801627" />
<meta property="og:street-address" content="222 Jersey City Blvd" />
<meta property="og:locality" content="Jersey City" />
<meta property="og:region" content="NJ" />
<meta property="og:postal-code" content="07305" />
<meta property="og:country-name" content="USA" />
<meta property="og:phone_number" content="201-200-1000" /> 
```

这应该指向[自由科学中心](https://foursquare.com/v/liberty-science-center/4bf2e2fa6991c9b66e9f29e9)。

# php - 以 4:1 的比例一一包含两个文件

> ID：10181816
> 
> 赞同：0
> 
> 时间：2012-04-16T21:13:55.063
> 
> 标签：php

我有两个文件 file4.php 和 file1.php

使用**INCLUDE**我如何将它们放在一个比例中，如果 file4.php 出现 4 次，那么 file1.php 应该出现 1 次，比例为 4:1。最佳实践是什么？

```
<?php 
  {
    include("file4.php");

} else {

    include("file1.php");
  }
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T21:17:34.980

这将显示两个页面之一，随着时间的推移，文件 4 的比例为 4：1。[http://en.wikipedia.org/wiki/Law_of_large_numbers](http://en.wikipedia.org/wiki/Law_of_large_numbers)

```
$randInt = rand (1, 5);

if ($randInt > 1) include("file4.php");
else include("file1.php"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T21:18:50.083

文件4.php：

```
$GLOBALS['counter']++; 
```

文件1.php：

```
$GLOBALS['counter']++; 
```

主文件：

```
if ($GLOBALS['counter'] % 5 == 0) {
    include('file1.php');
} else {
    include('file4.php');
} 
```

但是然后坐下来想知道为什么你需要这种东西。

# android - Android : 使锁屏不透明

> ID：10181817
> 
> 赞同：0
> 
> 时间：2012-04-16T21:13:57.670
> 
> 标签：android, lockscreen

出于某些实验目的，我想修改锁屏以使其在 Android 4.x 中不透明。我知道有很多关于锁屏的问题和很多从头开始编写新应用程序的建议。那些对我不起作用。我想使用现有的 android 源代码，修改并重新编译它。

有什么想法/建议？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:19:45.717

嗯，这是一项艰巨的任务，但如果您想要做更深入的事情，您可以从[这里](http://code.google.com/p/custom-rom-creator-studio/wiki/QuickStartupGuide)开始，或者更深入地从这里的 android 源代码库[开始。](http://source.android.com/source/initializing.html)

至于在哪里查看源代码，KeyGuard（这是真实名称）的东西 `/frameworks/base/core/res/res/layout/`在布局文件和`/frameworks/base/policy/src/com/android/internal/policy/impl/`Java 源代码下。

祝你好运！

# iphone - 来自 GCD 的线程读取旧值

> ID：10181819
> 
> 赞同：0
> 
> 时间：2012-04-16T21:14:02.220
> 
> 标签：iphone, objective-c, ios

我的问题是我正在使用`dispatch_async(dispatch_get_main_queue(), ^(void) { ... });`异步调用方法，在此方法中，根据某些条件我将布尔值设置为`YES`. 当在这个方法中读取这个布尔值时，它**总是**被它的旧值读取，即`NO`.

奇怪的是，当我在检查 bool 的行上设置断点时，一切都按预期进行！

编辑：这是产生线程的代码

```
dispatch_async(dispatch_get_main_queue(), ^(void) {
    [self drawFaceBoxesForFeatures:features forVideoBox:claporientation:curDeviceOrientation image:img];
}); 
```

方法本身

```
- (void)drawFaceBoxesForFeatures:(NSArray *)features forVideoBox:(CGRect)clap orientation:    (UIDeviceOrientation)orientation image:(UIImage *)image;
{
    if (![self getSendingRequestStatus]) {
        NSLog(@"Sending req");
        // send async request

         dispatch_async(dispatch_get_main_queue(),^ {
             sendingRequest = YES;
         } );
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:40:31.270

看起来您正在修改在块内部的块之外创建的 ivar。为了做到这一点并使 ivar 保持正确的值，您将需要`__block`像这样使用关键字：

```
@interface MyCoolClass : NSObject {
    @private
    __block int sendingRequest_;
} 
```

正如杰克劳伦斯在上面的推荐中所说，“[运行时] 在那个时间点拍摄所有相关对象/变量的快照”。标识符将`__block`告诉运行时它不应该将该 ivar 复制到堆中，并允许您将值分配给`sendingRequest_`块内部，即使该块只是在主线程上运行。

可以在[Blocks Programming Guide](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)中找到很多好的入门信息（包括上述信息） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:23:27.013

当原语被传递到一个块中时，它们被复制。因此，如果您将原始局部变量或实例变量放入块中，然后在创建块的同一方法（在创建块之后）或其他方法中更改它，它不会对块中的变量产生任何影响。对于局部变量，只需确保在创建块之前进行任何必要的更改。对于实例变量，您可以尝试使用某些 C: 来访问实例变量，`self->iVar`或者将其声明为属性并通过属性访问器访问它：`self.iVar`。

# php - 如何从这个 SimpleXMLElement 中获取值作为 PHP 中的字符串

> ID：10181820
> 
> 赞同：2
> 
> 时间：2012-04-16T21:14:02.943
> 
> 标签：php, simplexml

假设我有一个名为 $myXMLElement 的变量，当我转储该变量时，它看起来像这样。

```
SimpleXMLElement Object ( 
    [@attributes] => Array ( [id] => 7 ) 
    [0] => Kirkpatrick 
) 
```

我如何在 PHP 中获取 Kirkpatrick 的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:20:05.980

你有没有尝试过：

```
(string) $var[0] 
```

? 通常，您使用字符串转换来执行此操作，会将 SimpleXMLElements 转换为 XML nodeValue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:21:29.537

这应该得到值：

```
echo $myXMLElement->{'0'}; 
```

# c - 找到一个符号和其他“未解析的外部符号”

> ID：10181821
> 
> 赞同：1
> 
> 时间：2012-04-16T21:14:03.437
> 
> 标签：c, visual-c++, linker, visual-studio-2010

在我的 Visual Studio 2010 中有 2 个项目。一个是静态库（如果有人问，mhook 2.3），另一个是 DLL。两者都设置为编译为 /MT。

mhook 项目在其 mhook.h 中有两个函数：

```
BOOL Mhook_SetHook(PVOID *ppSystemFunction, PVOID pHookFunction);
BOOL Mhook_Unhook(PVOID *ppHookedFunction); 
```

dll 项目引用了 mhook 项目并同时使用了 Mhook_SetHook 和 Mhook_Unhook。使用相同的 mhook.h。当我编译 dll 项目时，我收到以下错误：

```
1>hookdll.obj : error LNK2001: unresolved external symbol _Mhook_Unhook 
```

注意，链接成功找到了 Mhook_SetHook。如果我注释掉 Mhook_Unhook 的使用，程序编译成功。

Dumpbin 建议这两个符号都存在于静态库中：

```
>dumpbin /symbols mhook-test.lib|find "Mhook"
015 00000000 SECT4  notype ()    External     | ?Mhook_SetHook@@YAHPAPAXPAX@Z (i
nt __cdecl Mhook_SetHook(void * *,void *))
122 00000000 SECT3B notype ()    External     | ?Mhook_Unhook@@YAHPAPAX@Z (int _
_cdecl Mhook_Unhook(void * *))
> 
```

我迷茫和困惑，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:16:25.747

回答：我显然是在混合 C++ 和 C 代码——手头的库是 C++，我的程序是 C。

我不得不在它周围添加 extern C，从这个[Using C++ library in C code](https://stackoverflow.com/questions/199418/using-c-library-in-c-code)中收集到：

```
#ifdef __cplusplus
extern "C" {
#endif
BOOL Mhook_SetHook(PVOID *ppSystemFunction, PVOID pHookFunction);
BOOL Mhook_Unhook(PVOID *ppHookedFunction);
#ifdef __cplusplus
} // extern "C"
#endif 
```

完成后，我的符号导出开始看起来好多了：

```
C:\Users\MACABRE\Documents\Visual Studio 2010\Projects\luahooker\Debug>dumpbin /
exports mhook.lib
Microsoft (R) COFF/PE Dumper Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file mhook.lib

File Type: LIBRARY

     Exports

       ordinal    name

                  _Mhook_SetHook
                  _Mhook_Unhook 
```

# android - Android SoundPool.play() 有时会滞后

> ID：10181822
> 
> 赞同：8
> 
> 时间：2012-04-16T21:14:04.090
> 
> 标签：android, soundpool

我目前正面临我的 android 游戏的问题。通常在调用 SoundPool.play() 时，该函数需要大约 0.003 秒才能完成，但有时需要 0.2 秒，这使我的游戏卡顿。他的异常从何而来？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T21:44:43.757

感谢蒂姆，使用线程播放似乎成功地解决了这个问题。

**线**

```
package org.racenet.racesow.threads;

import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

import org.racenet.racesow.models.SoundItem;

import android.media.SoundPool;

/**
 * Thread for playing sounds
 * 
 * @author soh#zolex
 *
 */
public class SoundThread extends Thread {

    private SoundPool soundPool;
    public BlockingQueue<SoundItem> sounds = new LinkedBlockingQueue<SoundItem>();
    public boolean stop = false;

    /**
     * Constructor
     * 
     * @param soundPool
     */
    public SoundThread(SoundPool soundPool) {

        this.soundPool = soundPool;
    }

    /**
     * Dispose a sound
     * 
     * @param soundID
     */
    public void unloadSound(int soundID) {

        this.soundPool.unload(soundID);
    }

    @Override
    /**
     * Wait for sounds to play
     */
    public void run() {         

        try {

            SoundItem item;
            while (!this.stop) {

                item = this.sounds.take();
                if (item.stop) {

                    this.stop = true;
                    break;
                }

                this.soundPool.play(item.soundID, item.volume, item.volume, 0, 0, 1);
            }

        } catch (InterruptedException e) {}
    }
} 
```

**声音项**

```
package org.racenet.racesow.models;

/**
 * SoundItem will be passed to the SoundThread which
 * will handle the playing of sounds
 * 
 * @author soh#zolex
 *
 */
public class SoundItem {

    public int soundID;
    public float volume;
    public boolean stop = false;

    /**
     * Default constructor
     * 
     * @param soundID
     * @param volume
     */
    public SoundItem(int soundID, float volume) {

        this.soundID = soundID;
        this.volume = volume;
    }

    /**
     * Constructor for the item
     * which will kill the thread
     * 
     * @param stop
     */
    public SoundItem(boolean stop) {

        this.stop = stop;
    }
} 
```

# machine-learning - 使用特征作为输入与使用它在 SVM 上构建多台机器

> ID：10181832
> 
> 赞同：2
> 
> 时间：2012-04-16T21:14:56.513
> 
> 标签：machine-learning, svm

我是一名本科生，在我的毕业论文中，我使用 SVM 来预测公共汽车到达其路线中的公共汽车站的时间。在进行了大量研究并阅读了一些论文之后，我仍然对如何为我的系统建模有一个关键疑问。

我们已经决定使用哪些特征，并且正在收集执行回归所需的数据，但令我们困惑的是使用某些特征作为 SVM 的输入或基于某些特征构建分离机器的含义或后果这些特征中。

例如，在[本文](http://www.tandfonline.com/doi/abs/10.1080/15472450600981009#preview)中，作者构建了 4 个 SVM 用于预测公交车到站时间：一个用于晴天高峰时段、雨天高峰时段、晴天非高峰时段以及最后一个用于非高峰时段和雨天的 SVM。 .

但是在[随后](http://onlinelibrary.wiley.com/doi/10.1002/atr.136/abstract)关于同一主题的论文中，他们决定使用单个 SVM，将天气状况和高峰/非高峰时间作为输入，而不是像以前那样将其分解为 4 个 SVM。

我觉得这是一种更多关于经验的事情，所以如果有人知道何时选择其中一种方法，我想听听你们的意见。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:02:42.523

Most important question: what is the data like? Second question: what model do you expect to capture this?

So if you want to use SVMs for some reason, keep in mind their basic mechanism is linear, and can only capture non-linear phenomena if data is transformed by a suitable kernel.

For a particular problem at hand that means:

1.  Do you have reason (plots, insights in the problem nature) to believe your problem is linear(ly separable)? Just use one linear svm.
2.  Do you have reason your problem consist of several linear subproblems? Use a linear svm on each of the subproblems.
3.  Does your data seem non-linearly grouped? Try an svm with something like rbf kernel.

Of course, you can just plug in and try, but checking the above may increase understanding of the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:46:41.380

没有其他办法：您必须自己找出答案。这就是你必须写这篇论文的原因。没有人从完美的解决方案开始。每个人都会犯错误。你的问题并不容易，当你从未做过类似的事情时，你不能说什么会起作用。尝试你在文献中找到的一切，比较结果，发展你自己的想法，......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T19:14:30.893

在您的特定问题中，我会选择单个 SVM。

以我不那么丰富的经验，我会考虑在几个 SVM 中解决问题，原因如下：1）类太不同，或者你的问题中有类和子类。例如在我的例子中：显微镜图像中有几种类型的抗体，它们都可能是阳性或阴性。因此，我没有定义 A_Pos、A_Neg、B_Pos、B_Neg……，而是首先确定图像是正面还是负面，然后确定第二个 SVM 中的类型。

2）特征提取成本太高。前提是您有可能具有发烧特征的类组。您可以先只提取一个小子集，而不是提取单个机器的所有特征，然后如果需要（结果概率不够高）提取更多特征。

3）判断实例是否属于问题。制作一个包含一个类和所有训练集实例的模型。如果要分类的实例是异常值，则停止。否则，使用包含所有类的第二个 SVM 进行分类。

关键词是“级联SVM”

# regex - 正则表达式：在 H1 标签中的冒号后匹配？

> ID：10181833
> 
> 赞同：1
> 
> 时间：2012-04-16T21:15:05.863
> 
> 标签：regex

我希望我问这个没问题，我搜索了 stackoverflow 并找到了类似的问题，但没有解决方案对我有用。

我有这样的 HTML： `<h1>Beatles: A Hard Days Night</h1>`现在我想要一个正则表达式来匹配冒号之后的所有内容。所以`A Hard Days Night`在这种情况下。

这是我尝试过的：

```
$pattern = "/<h1>\:(.*)<\/h1>/"; 
```

但这只是输出一个空数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:16:27.600

以下正则表达式应匹配：

```
<h1>[^:]+:\s+([^<]+) 
```

PowerShell 测试：

```
PS> '<h1>Beatles: A Hard Days Night</h1>' -match '<h1>[^:]+:\s+([^<]+)'; $Matches
True

Name                           Value
----                           -----
1                              A Hard Days Night
0                              <h1>Beatles: A Hard Days Night 
```

一点解释：

```
<h1>    # match literal <h1>
[^:]+   # match everything *before* the colon (which in this case
        # shouldn't include a colon itself; if it does, then use .*)
:       # Literal colon
\s+     # Arbitrary amount of whitespace
([^<]+) # Put everything up to the next < into a capturing group. 
```

# sql - DB2 SQL 求和和分组

> ID：10181835
> 
> 赞同：3
> 
> 时间：2012-04-16T21:15:29.270
> 
> 标签：sql, db2, sum, grouping

我在查询和分组时遇到问题。

我需要以下输出：

```
officr, cbal, sname  
ABC, 500.00, TOM JONES  
ABC, 200.00, SUE JONES  
ABC TOTAL 700.00  

RAR, 100.10, JOE SMITH  
RAR, 200.05,  MILES SMITH  
RAR TOTAL 300.15 
```

下面的 SQL 产生错误：

> [DB2 for i5/OS]SQL0122 - SELECT 列表中的列 SNAME 或表达式无效。

```
SELECT
    lnmast.officr,  SUM(LNMAST.CBAL), lnmast.sname
FROM
    LNMAST
WHERE LNMAST.RATCOD IN (6,7,8) AND STATUS NOT IN ('2','8')
group by lnmast.officr 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T22:04:33.237

> `GROUP BY GROUPING SETS`是一个用于分组/立方体数据的强大工具。它允许您将非聚合数据与聚合数据组合在一个查询结果中。

```
SELECT lnmast.officr,  SUM(LNMAST.CBAL), lnmast.sname
FROM LNMAST
WHERE LNMAST.RATCOD IN (6,7,8) 
  AND STATUS NOT IN ('2','8')
GROUP BY GROUPING SETS ((lnmast.officr, lnmast.sname),(lnmast.officr)) 
```

来自 IBM DOCS 的示例：[www.ibm.com/support/knowledgecenter/en/...](https://www.ibm.com/support/knowledgecenter/en/SSEPEK_11.0.0/sqlref/src/tpc/db2z_sql_groupingexamples.html) ：

```
 SELECT WEEK(SALES_DATE) AS WEEK,
         DAYOFWEEK(SALES_DATE) AS DAY_WEEK,
         SALES_PERSON, SUM(SALES) AS UNITS_SOLD       
  FROM SALES 
  WHERE WEEK(SALES_DATE) = 13
  GROUP BY GROUPING SETS ( (WEEK(SALES_DATE), SALES_PERSON),
                           (DAYOFWEEK(SALES_DATE), SALES_PERSON))
  ORDER BY WEEK, DAY_WEEK, SALES_PERSON 
```

这导致：

```
 WEEK        DAY_WEEK    SALES_PERSON    UNITS_SOLD 
  ----------- ----------- --------------- -----------
           13           - GOUNOT                   32
           13           - LEE                      33
           13           - LUCCHESSI                 8
            -           6 GOUNOT                   11
            -           6 LEE                      12
            -           6 LUCCHESSI                 4
            -           7 GOUNOT                   21
            -           7 LEE                      21
            -           7 LUCCHESSI                 4 
```

# regex - BASH 正则表达式匹配 - 包括括号中要匹配的字符列表中的括号？

> ID：10181836
> 
> 赞同：5
> 
> 时间：2012-04-16T21:15:40.193
> 
> 标签：regex, bash

我正在尝试做一个小的 bash 脚本，它会清理我喜欢的一些电视节目的下载剧集的文件和文件夹名称。它们通常看起来像“[www.Speed.Cd] - Some.Show.S07E14.720p.HDTV.X264-SOMEONE”，我基本上只是想去掉那个 speedcd 广告位。

在 BASH 中使用正则表达式匹配来删除 www.Speed.Cd、空格和破折号很容易，但对于我来说，我无法弄清楚如何在要匹配的字符列表中包含括号。[- [] 不起作用，[- \[]、[- \\[]、[- \\\[] 或我要删除的括号前面的任何数量的转义字符也不起作用。

这是我到目前为止所得到的：

```
[[ "$newfile" =~ ^(.*)([- \[]*(www\.torrenting\.com|spastikustv|www\.speed\.cd|moviesp2p\.com)[- \]]*)(.*)$ ]] &&
    newfile="${BASH_REMATCH[1]}${BASH_REMATCH[4]}" 
```

但它打破了括号。

有任何想法吗？

TIA，丹尼尔：）

编辑：我可能应该注意到我正在使用“shopt -s nocasematch”来确保不区分大小写的匹配，以防万一你想知道:)

编辑2：感谢所有做出贡献的人。我不能 100% 确定哪个答案是“正确的”，因为我的陈述有几个问题。实际上，最准确的答案只是对jw013发布的我的问题的评论，但我当时没有得到它，因为我还不明白空格应该被转义。我选择了 aefxx，因为那个人基本上说的是一样的，但有解释:) 也希望在 ormaaj 的答案上加上一个正确的答案标记，因为他发现我的表达有更严重的问题。

无论如何，我在上面使用的方法，试图匹配和提取部分以保留和留下不需要的部分真的不是很优雅，并且不会捕捉所有情况，甚至不是像“Some.Show.S07E14”这样非常简单的东西.720p.HDTV.X264-某人 - [ www.Speed.Cd ]”。相反，我重写了它以匹配并仅提取不需要的部分，然后对原始字符串上的部分进行字符串替换，就像这样（循环是在有多个品牌的情况下）：

```
# Remove common torrent site brandings, including surrounding spaces, brackets, etc.:
while [[ "$newfile" =~ ([[\ {\(-]*(www\.)?(torrentday\.com|torrenting\.com|spastikustv|speed\.cd|moviesp2p\.com|publichd\.org|publichd|scenetime\.com|kingdom-release)[]\ }\)-]*) ]]; do
    newfile=${newfile//"${BASH_REMATCH[1]}"/}
done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T22:36:19.220

好的，这是我第一次听说`=~`运营商，但这是我通过反复试验发现的：

```
if [[ $newfile =~ ^(.*)([-[:space:][]*(what|ever)[][:space:]-]*)(.*)$ ]] 
                          ^^^^^^^^^^              ^^^^^^^^^^ 
```

看起来很奇怪，但实际上确实有效（刚刚测试过）。

**编辑**
Linux 手册页 regex(7) 中的引用：

> 要在列表中包含文字 ]，请将其设为第一个字符（可能的 ^ 之后）。要包含文字 -，请将其设为第一个或最后一个字符，或范围的第二个端点。要将文字 aq-aq 用作范围的第一个端点，请将其括在“[.”中。和“.]”使其成为整理元素（见下文）。除了这些和一些使用 aq[aq 的组合（见下一段）之外，所有其他特殊字符，包括 aq\aq，在括号表达式中都失去了它们的特殊意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T21:59:10.663

每当您执行正则表达式时，将正则表达式放入变量中是 Bash 版本之间最兼容的，即使您确实设法避开了将它们直接放入测试表达式的所有陷阱。[http://mywiki.wooledge.org/BashPitfalls#if_.5B.5B_.24foo_.3D.2BAH4_.27some_RE.27_.5D.5D](http://mywiki.wooledge.org/BashPitfalls#if_.5B.5B_.24foo_.3D.2BAH4_.27some_RE.27_.5D.5D)

您当前的正则表达式看起来像您正在尝试选择匹配左括号之前的任何内容。我猜您实际上是在尝试从以下内容中保存例如 3 和 4：

```
$ shopt -s nocasematch
$ newfile='[ www.Speed.Cd ] - Some.Show.S07E14.720p.HDTV.X264-SOMEONE'
$ re='^.*[-[:space:][]*(www\.torrenting\.com|spastikustv|www\.speed\.cd|moviesp2p\.com)[][:space:]-]*(.*)$'
$ [[ $newfile =~ $re ]]
$ declare -p BASH_REMATCH
declare -ar BASH_REMATCH='([0]="[ www.Speed.Cd ] - Some.Show.S07E14.720p.HDTV.X264-SOMEONE" [1]="www.Speed.Cd" [2]="Some.Show.S07E14.720p.HDTV.X264-SOMEONE")' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T00:08:56.510

基本问题很简单，即使不是很明显。
BASH REGEX*完全*不受保护（来自 shell），并且不能被**“**​双引号​<strong>”保护。这意味着*每个*文字空间（和制表符等）都**必须**受到 baskslash `\`... 故事结尾的保护。剩下的只是让你的正则表达式满足你的需要的一个例子。

另一件事；在范围方括号构造内（在本例中与空格一起）， 使用`[\ []`and`[]\ ]`来匹配 `[`and 。`]`

例子：

```
newfile="[ ]"
[[ "$newfile" =~ ^[\ []\ []\ ]$ ]] &&
    echo YES ||
    echo NO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T21:36:45.473

您可以尝试这样的事情（尽管您不是 100% 清楚您要过滤哪些情况：

```
newfile="[ www.Speed.Cd ] - Some.Show.S07E14.720p.HDTV.X264-SOMEONE"

if [[ $newfile =~ ^(.*)([^a-zA-Z0-9.]*\[.*\][^a-zA-Z0-9.]*)(.*)$ ]]; then 
    newfile="${BASH_REMATCH[1]}${BASH_REMATCH[3]}"
fi

echo $newfile
# Some.Show.S07E14.720p.HDTV.X264-SOMEONE 
```

它只是剥离 之外的任何非alnum（和点）字符`[]`，以及内部的任何内容`[]`

# javascript - Jquery Flot“plothover”事件不起作用

> ID：10181837
> 
> 赞同：15
> 
> 时间：2012-04-16T21:15:54.860
> 
> 标签：javascript, jquery, html, jquery-plugins, flot

我有一个我似乎无法追踪的问题。我正在使用 Flot 绘制一些数据，超级简单。我想添加您在此处看到的悬停效果：[Flot Example](http://people.iola.dk/olau/flot/examples/interacting.html)

不幸的是，在任何情况下我都不能触发“plothover”事件。这是代码中的一个简短片段：

```
$.plot($chartArea, eventData, eventOptions);

$chartArea.bind("plothover", function (event, pos, item) {
    console.log('hovering!');
}); 
```

您需要在选项对象中设置什么来启用此行为吗？谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-16T21:19:40.833

像个白痴一样，我忘了包括网格选项。查看对象：

```
eventOptions = {
   points: {
        show: true
    },
    lines: {
        show: true
    },
    grid: { hoverable: true, clickable: true },
    xaxis: {
        min:earliestMessage.timestamp,
        max:currentTime,
        mode:"time",
        ticks:10
    }
}; 
```

注意网格参数。这就是缺少的东西。呸！

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:24:27.577

我不确定您的代码中的 $chartArea 是什么，但让我们尝试这样的事情：

```
var chartArea = $("#placeholder"); // your chart div

$.plot(chartArea, eventData, eventOptions);

$(chartArea).bind("plothover", function (event, pos, item) {
    console.log('hovering!');
}); 
```

# objective-c - 如何在可可触摸中存储属性

> ID：10181844
> 
> 赞同：0
> 
> 时间：2012-04-16T21:16:47.543
> 
> 标签：objective-c, cocoa-touch, attributes, property-list

我正在使用 Xcode 为 iPhone 编写一个程序。我在属性列表文件中为用户界面组件（如 uibutton、uilabel 等）定义了一些属性。我将一个属性定义为真正的名为“cornerradius”的属性。现在，我怎样才能从 plist 中正确获取这个值来分配 CGFloat？属性列表是定义属性的最佳方式吗？我有什么选择，你推荐什么教程？

在 plist 中：keycornerradius /key real 6.0 /real

在代码中：

```
NSDecimal cornerRadius;
cornerRadius = [[[dao libraryItemAtIndex:0] valueForKey:@"cornerradius"] decimalValue];
[layer setCornerRadius:(CGFloat)cornerRadius]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:39:24.537

如果您正在寻找程序范围，您应该使用[NSUserDefaultsController](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSUserDefaultsController_Class/Reference/Reference.html) ，请记住，使用 plist 您将只能存储和检索值，例如 NSNumber、NSString、NSArray、NSDictionary...

```
NSUserDefaults * standardUserDefaults = [NSUserDefaults standardUserDefaults];
[standardUserDefaults setObject:[NSNumber numberWithInt:7] forKey:@"someKey"];
[standardUserDefaults synchronize];//save to disk
// now use it
NSNumber * someNumber = [standardUserDefaults objectForKey:@"someKey"];
int someInt = [someNumber intValue]; 
```

# twitter-bootstrap - 初始化后如何更改 Twitter-Bootstrap 工具提示的位置？

> ID：10181847
> 
> 赞同：18
> 
> 时间：2012-04-16T21:17:11.757
> 
> 标签：twitter-bootstrap, tooltip

我想在文本框已经初始化后更改 Bootstrap 工具提示的位置：

```
// these don't work
$('#myTextbox').tooltip({ placement: 'left' });
$('#myTextbox').tooltip('options', 'placement', 'right' }); 
```

有什么办法吗？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-10-11T14:10:13.863

在 Bootstrap 2.x 中，答案如[ajbeaven](https://stackoverflow.com/users/161735/ajbeaven)所述：

```
$('#myTextbox').data('tooltip').options.placement = 'right'; 
```

但是，从 Bootstrap 3 开始，所有 Bootstrap 数据都使用以下命名空间`bs`：

```
$('#myTextbox').data('bs.tooltip').options.placement = 'right'; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-16T21:32:15.897

啊，找到答案了：

```
$('#myTextbox').data('tooltip').options.placement = 'right'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-29T00:05:53.283

添加到[Ben Cox](https://stackoverflow.com/users/2432911/ben-cox)的响应中，在 Bootstrap 4 中使用：

```
$('#myTextbox').data('bs.tooltip').config.placement = 'right'; 
```

# objective-c - NSWindow 不调整大小以适应 NSView - 有时？

> ID：10181851
> 
> 赞同：0
> 
> 时间：2012-04-16T21:17:16.373
> 
> 标签：objective-c, xcode, cocoa

我无法调整 NSWindow 的大小以适应 NSView。它必须是一个逻辑错误，因为它有效但不是一个动作。

我有一个空的 NSWindow，以及 3 个带有组件且大小不同的 NSView。

使用以下代码调整 NSWindow 的大小以适合 NSView 并显示它：

```
[_window setContentSize:_mainView.frame.size];
[_window setContentView:_mainView]; 
```

这段代码工作正常。

然而，在一个 NSView 中，我有一个后退按钮，虽然这会在 NSWindow 中显示正确的 NSView，但它不会重新调整它的大小。例如，初始窗口是一定大小，我单击切换到另一个视图并正确调整大小，我按下后退按钮，显示 NSView 但窗口保持相同大小？

谁能向我解释为什么当我切换回原来的 NSView 时，它不会调整 NSWindow 的大小？

提前谢谢大家。这是我拥有的完整代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [_window setContentSize:_mainView.frame.size];
    [_window setContentView:_mainView];
}

- (IBAction)switchSubtractionView:(id)sender {
    [_window setContentSize:_subtractionView.frame.size];
    [_window setContentView:_subtractionView];
}

- (IBAction)switchAdditionView:(id)sender {
    [_window setContentSize:_additionView.frame.size];
    [_window setContentView:_additionView];
}

// -----------------------------------------------------------------------
// THE FOLLOWING METHOD DISPLAYS THE NEW VIEW CORRECTLY BUT DOESN'T RESIZE
// -----------------------------------------------------------------------
- (IBAction)switchMainMenu:(id)sender {
    [_window setContentSize:_mainView.frame.size];
    [_window setContentView:_mainView];
} 
```

提前谢谢大家。

编辑：在我看来，当获取 VIEW.frame.size 时，如果重复使用它，它会失去它的价值吗？这对我来说似乎很奇怪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:03:49.140

窗口的内容视图必须始终调整大小以填充窗口的内容区域。因此，当您设置窗口的内容大小时，您实际上改变了当前内容视图的大小。这发生在您切换内容视图之前，因此您正在更改旧视图的大小。

在更改内容大小之前尝试将内容视图设置为新的一次性 NSView，然后设置新的内容视图。

# c++ - 如何使用 C++ WinAPI 在 Windows 机器上可靠地将本地时间转换为 UTC

> ID：10181855
> 
> 赞同：3
> 
> 时间：2012-04-16T21:17:30.003
> 
> 标签：c++, winapi, time, utc

我需要能够在 Windows 机器上将本地时间转换为 UTC。我找到了声称可以执行此操作的[SystemTimeToTzSpecificLocalTime API，但后来我阅读了它的描述并发现了这一点：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724949%28v=vs.85%29.aspx)

> SystemTimeToTzSpecificLocalTime 函数在以下情况下可能会错误地计算本地时间：
> 
> *   时区对旧年份和新年份使用不同的 UTC 偏移量。
> *   要转换的 UTC 时间和计算的本地时间是不同年份的。

我向 MS 提出的第一个反问：“编写可靠的 API 有多难？”

然后，实际的问题——你如何做到 100% 的工作？（并且不像 API 所暗示的那样。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T21:25:45.687

你的两个问题的答案是，这基本上是不可能的。这是计算机科学人员倾向于*讨厌*处理当地时间的原因之一。

以下是一些混淆问题的示例： 当我们从 2:00 跳回一个小时到 1:00 时，有两个 1:30。我们今天也无法知道十年后夏令时规则（如果有的话）将是什么。时区边界有时会移动，因此仅知道您今天处于太平洋时间可能不足以告诉我们您 85 年前的时区偏移量是多少。今天没有办法知道将来可能插入或不插入什么闰秒。

如果您发现自己处于可能的情况，则必须在特定情况下编写代码，以使这些操作在您的特定情况下成为可能。提供的操作是通用的，并提供“通常正确”的结果，而不限制可以使用它们的情况。

道德：不要使用本地时间，除了显示。即便如此，将过去或未来的时间转换为当地时间也是有问题的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T21:32:43.987

由于 DST 期间有时会在某些区域发生变化，因此很难写出在过去和未来的所有情况下都是正确的。

不过，我需要这个功能，我建议使用 C 函数（localtime、mktime、...）。我最近遇到了一个问题，即 Windows 函数 SystemTimeToTzSpecificLocalTime 在 Citrix 服务器上无法正常工作（Citrix 在时区方面做了一些奇怪（但高级）的事情），但 C 函数工作正常。

# jquery - 定义插件的默认值

> ID：10181859
> 
> 赞同：0
> 
> 时间：2012-04-16T21:17:49.240
> 
> 标签：jquery, plugins, default

我想为我的插件定义默认值，这是 javascript 代码：

```
var opts = {
    'width': 957,
    'height': 590,
    'left': ($(window).width() / 2) - (this.width),
    'top': ($(window).height() / 2) - (this.height)
};​ 
```

但`opts.left`返回`NaN`。什么是问题？

**编辑：**我想在我的对象中使用我的对象的*宽度。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:19:40.723

`this.width`不是数值。

> **NaN 值的来源**
> 
> 当算术运算导致未定义或不可表示的值时，将生成 NaN 值。这些值不一定代表溢出条件。NaN 还源于对没有原始数值可用的非数值的数值的尝试强制转换。

* * *

**根据评论更新：**

`this`不是对象，它是函数的调用者。所以`this.width`不会给你`width`财产的。

[**工作现场演示**](http://jsfiddle.net/F5YXW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:20:27.043

最有可能的`this.width`是返回~~`undefined`~~一个非数字值。

**例如：** `100 - undefined`将返回您`NaN`

尝试使用`$(this).width()`and `$(this).height()`,

```
var opts= {
      'width': 957,
      'height': 590,
      'left': ($(window).width()/2)-($(this).width()),
      'top':  ($(window).height()/2)-($(this).height())
}; 
```

以上内容应`this`在有效上下文中提供。

# eclipse - eclipse 错误 - 故意未实现的 javascript 翻译

> ID：10181860
> 
> 赞同：2
> 
> 时间：2012-04-16T21:17:52.723
> 
> 标签：eclipse

每当我尝试使用 Eclipse IDE 在 jsp 文件中编写 javascript 时，都会弹出一个错误消息，因为内部错误发生在：“JavaScript 翻译：/Wireless/Login.jsp”期间。

其中 Login.jsp 是我正在处理的 jsp。

如何在输入 javascript 时避免此错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:22:48.117

我得到了解决方案。转到您的工作区文件夹并找到 Workspace/.metadata/.mylyn 文件夹。删除 .mylyn 文件夹并重新启动 Eclipse。你不会得到 javascript 错误弹出窗口

# javascript - 在 Javascript 中添加表返回 null

> ID：10181863
> 
> 赞同：-6
> 
> 时间：2012-04-16T21:18:01.533
> 
> 标签：javascript

我试图用 js 做桌子，令我惊讶的是，如果你知道我的意思，这不是在公园里散步，当我知道有信息要吐出时，我的代码如何继续返回 null。

html结构应该是

```
<table>
<tbody>
<tr>
<th>info here info here</th>
</tr>
<tr>
<th>info here info here</th>
</tr>
</tbody>
</table> 
```

相反，我得到

```
<table>
    <tbody>
    <tr>
    <th>info here info here</th>
    <th>info here info here</th>
    </tr>
    </tbody>
    </table> 
```

这是我正在使用的 JS，我还添加了完整的代码来小提琴 totalF 返回 null

```
 function totalF(){
    var body = document.getElementById('body')[0];
    var tbl = document.createElement('table');    
    var tblbody = document.createElement('tbody');
    var tndiv = document.getElementById('tdcontainer');

    for (var j = 0; j < payments; j++){
        var row = document.createElement('tr');

        temp=round(principal);
        while(temp>0){    
            if(tndiv != null){
                var cell = document.createElement('td');
                var ndiv =  round(temp);

                cell.appendChild(ndiv);
                row.appendChild(cell);
            }
            tblBody.appendChild(row);
            temp-=monthly;
            }
        tbl.appendChild(tblBody);
        body.appendChild(tbl);
        tbl.setAttribute("border", "2");
        }
    } 
```

任何帮助是极大的赞赏。

编辑：抱歉添加到 jsfiddle [http://jsfiddle.net/Q4eCa/](http://jsfiddle.net/Q4eCa/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:22:44.250

尝试：

```
var body = document.body; 
```

您正在使用`document.getElementById('body')[0]`...这将不起作用，因为 getElementById 不返回数组，它返回单个元素。如果您没有 事件`[0]`，则只有在您实际将“body”的 id 添加到 body 元素时，它才会起作用......

（见小提琴：http: [//jsfiddle.net/Q4eCa/2/](http://jsfiddle.net/Q4eCa/2/)）

您还同时使用了`tblbody`and `tblBody`... 您需要选择一个，因为 javascript 区分大小写。

这也会引发错误：

```
var ndiv =  round(temp);
cell.appendChild(ndiv); 
```

因为您不能将字符串“附加”到 DOM 节点上。试试这个：

```
var ndiv =  round(temp);
cell.innerHTML = ndiv; 
```

这将使您大部分时间到达那里。那时，表格正在创建，而“计算”功能中只有错误。

# ruby - Ruby Activerecord IN 子句

> ID：10181864
> 
> 赞同：78
> 
> 时间：2012-04-16T21:18:03.883
> 
> 标签：ruby, activerecord

我想知道是否有人知道如何在 activerecord 中执行“IN”子句。不幸的是，“IN”子句几乎无法通过谷歌搜索，所以我必须在这里发布。基本上我想回答这样的问题“给我这些宿舍里的所有大学生，宿舍id在这个数组[id数组]中”。我知道如何在给定一个宿舍 id 的情况下编写查询，但我不知道如何在给定一组 id 的情况下编写查询。

任何帮助是极大的赞赏。我确定这是某个问题的转贴，所以一旦找到答案/更好的搜索词，我就会删除它。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-04-16T21:22:34.667

从[Rails 指南的 §3.3.3 子集条件](https://guides.rubyonrails.org/active_record_querying.html#subset-conditions)：

> 如果要使用`IN`表达式查找记录，可以将数组传递给条件哈希：
> 
> ```
> Customer.where(orders_count: [1,3,5]) 
> ```
> 
> 此代码将生成如下 SQL：
> 
> ```
> SELECT * FROM customers WHERE
> (customers.orders_count IN (1,3,5)) 
> ```

您还可以使用[arel](https://www.rubydoc.info/gems/arel/Arel/Nodes/In)语法：

```
Client.where(Client.arel_table[:order_count].in([1,3,5])) 
```

将生成相同的 SQL。

# java - Wicket 应用程序、序列化和 Java 计时器

> ID：10181865
> 
> 赞同：1
> 
> 时间：2012-04-16T21:18:06.987
> 
> 标签：java, serialization, timer, wicket

所以我在序列化、Wicket 和多线程项目方面的经验有些有限，所以请多多包涵。

本质上，我的 Web 应用程序类正在实例化一个 POJ（parentObject），它创建一个启动一个新计时器并实例化几个在其中也有计时器的子对象。这些子对象存储在 parentObject 类的列表中。我的 wicket 应用程序中的页面需要访问 parentObject，因此我将其设置为可访问：

```
public Object getParentObject
{
   return this.parentObject;
} 
```

它在每个页面中被检索，如下所示：

```
((MyApplication)Application.get()).getParentObject() 
```

当前的问题是 parentObject 和 childObjects 的 timertask 不再像应有的那样每分钟都被调用。我的日志记录了父对象的第一次启动，但日志消息永远不会再次输出，表明父对象的 timertask 的 run() 方法不是每分钟都在执行。

编辑：添加了更多代码以使问题更清楚

```
public class childObject implements Serializable
{
    private transient NamedParameterJdbcTemplate njt;
    private transient Timer timer;

    public childObject(DataSource ds)
    {
        this.njt = new NamedParamterJdbcTemplate(ds);
    }

    public void start()
    {
        timer = new Timer();

        timer.schedule(new TimerTask(){

            public void run()
            {
                //do some stuff that is never happening
            }

        }, 0, 60000);
    }
}

public class ParentObject implements Serializable
{
    private DataSource ds;
    private List<ChildObject> childObjects;
    private transient Timer;

    public ParentObject(DataSource ds)
    {
        this.ds = ds;
        //add some stuff to childObjects

        timer = new Timer();

        timer.schedule(new TimerTask(){

            public void run()
            {
                for(some condition)
                {
                    //Do some stuff

                    if(/*condition is met*/)
                    {
                        childObjects.get(i).start();
                    }
                }
            }

        }, 0, 60000);
    }
}

public MyApplication extends WebApplication
{
    private ParentObject object;
    private DataSource ds;

    public void init()
    {
        super.init();

        ApplicationContext context = new ClassPathXmlApplicationContext("/applicationContext.xml");
        ds = (DataSource) context.getBean("dataSource");

        parentObject = new ParentObject(ds);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:49:07.693

鉴于您的问题描述，我认为您将 ParentObject 直接绑定到您的组件，而不是绑定对 ParentObject 的引用。会话范围对象（实际上是所有页面、组件和模型）的序列化/反序列化会创建这些“新”实例（即使它们是原始父对象的反序列化副本）。

虽然您没有显示太多代码，但我怀疑您会执行以下操作：

```
public MyPage() {
    Object parentObject = ((MyApplication)Application.get()).getParentObject();
    add(new Label("timer", new PropertyModel(parentObject, "time")));
} 
```

这将父对象绑定到属性模型，并将父对象绑定到页面（通过标签组件）。你应该做的是：

```
public MyPage() {
    add(new Label("timer", new PropertyModel(this, "application.parentObject.time")));
} 
```

这将页面绑定到自身，并指示属性模型动态检索应用程序，并从应用程序获取父对象，并从该时间开始。这样您就不会将对象绑定到页面层次结构，而是动态检索它们。

另一种选择是使用 LoadableDetachableModel 从应用程序中检索父对象，并在呈现页面后将其分离。

```
public class ParentObjectModel extends LoadableDetachableModel<ParentObject> {
    @Override public ParentObject load() {
        return ((MyApplication)Application.get()).getParentObject();
    }
} 
```

有关模型的更多信息，请参阅[Wicket wiki](https://cwiki.apache.org/WICKET/working-with-wicket-models.html)。

# apache - 通过基于域名的 URL 访问 Java Spring 服务时，jQuery .ajax 调用返回错误

> ID：10181867
> 
> 赞同：3
> 
> 时间：2012-04-16T21:18:22.903
> 
> 标签：apache, html, jquery, dns, tomcat5.5

我的应用程序的 HTML5、jQuery Mobile 前端与 Java 服务器（Spring、Hibernate、MySQL）对话。该应用程序在我的笔记本以及 QA 环境中运行良好。在 QA 上，我使用服务器的 IP 地址访问应用程序。当我在 Live 环境中托管应用程序（与 QA 相同的服务器，但在 Tomcat 中使用不同的 Web 应用程序）并尝试使用带有域名的 URL 访问它时，应用程序中的 $.ajax 调用返回错误。

其中一个调用如下：

```
$.ajax({
   type : "GET",
   url : "http://www.smartcloudlearning.mobi:9080/SmartCloudLearningMobi/rest/resource/getResourceTypes",
   cache : false,
   async : false,
   dataType : 'json',
   success : function(rTypes) {
       Alert("success!");
   },
   error : function(XMLHttpRequest, textStatus, errorThrown) {
      alert("An error has occurred making the request: " + errorThrown);
   }
}); 
```

我在 Firefox 中收到以下错误：

```
An error has occurred making the request: [Exception... "Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)"  nsresult: "0x80004005 (NS_ERROR_FAILURE)"  location: "JS frame :: http://www.smartcloudlearning.mobi/js/jquery-1.7.1.min.js :: <TOP_LEVEL> :: line 4"  data: no] 
```

我在 Chrome 中收到以下错误：

```
An error has occurred making the request: Error: NETWORK_ERR: XMLHttpRequest: Exception 101 
```

在服务器日志中，我看到请求的 Spring 服务已成功调用，但客户端似乎没有收到数据！

如果我点击网址

```
http://www.smartcloudlearning.mobi:9080/SmartCloudLearningMobi/rest/resource/getResourceTypes 
```

直接在浏览器中，我得到了预期的结果！我觉得这在某种程度上是由于我如何将服务器请求从 Apache 转发到 Tomcat。

以下是 Apache / httpd 服务器的 httpd.conf 文件中的行：

```
ProxyPass /SmartCloudLearningMobi http://www.smartcloudlearning.mobi:9080/SmartCloudLearningMobi
ProxyPassReverse /SmartCloudLearningMobi http://www.smartcloudlearning.mobi:9080/SmartCloudLearningMobi 
```

谁能告诉我这里有什么问题？非常感激！

**我设法解决了这个问题：**

浏览器在 .ajax 调用时出现错误，因为我的 URL 中有端口号。当我从我的 QA URL 创建“实时” URL 时，端口号被转移。当我从 .ajax 调用的 URL 中删除端口号时，调用开始返回成功！

Jason Foglia，你的陈述“......还有港口......”促使我探索那个角度......非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:45:38.977

由于称为“同源策略”的安全概念不允许您从不同域调用服务，您可能会遇到错误。或者至少，不允许您调用该服务中的方法。

在这里找到相同的讨论 - [AJAX Cross Domain](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

但是，您可以使用 JSONP 实现跨域 - JSONP[上的维基百科](http://en.wikipedia.org/wiki/JSONP)

解决方案是将数据类型更改为 JSONP：

```
$.ajax({
   url:"http://www.smartcloudlearning.mobi:9080/SmartCloudLearningMobi...",
   dataType: 'jsonp',
   ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:36:45.973

尝试使用相对 url：如果这不起作用，则域名与 url 和端口相同。浏览器不允许跨域。

```
$.ajax({
   type : "GET",
   url : "/SmartCloudLearningMobi/rest/resource/getResourceTypes",
   cache : false,
   async : false,
   contentType : "application/json"
   dataType : 'json',
   success : function(rTypes) {
       Alert("success!);
   },
   error : function(XMLHttpRequest, textStatus, errorThrown) {
      alert("An error has occurred making the request: " + errorThrown);
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:22:02.163

浏览器在 .ajax 调用时出现错误，因为我的 URL 中有端口号。当我从我的 QA URL 创建“实时” URL 时，端口号被转移。当我从 .ajax 调用的 URL 中删除端口号时，调用开始返回成功！

Jason Foglia，你的陈述“......还有港口......”促使我探索那个角度......非常感谢！

# python - 使用 pyinstaller 打包一个 twistd 插件

> ID：10181868
> 
> 赞同：5
> 
> 时间：2012-04-16T21:18:23.953
> 
> 标签：python, twisted, pyinstaller, twistd

我创建了一个不错的 python Twisted 应用程序，带有一个用于 twistd runner 的插件，如 Twisted 文档中所述：http: [//twistedmatrix.com/documents/current/core/howto/tap.html](http://twistedmatrix.com/documents/current/core/howto/tap.html)。我在使用 PyInstaller 打包时遇到问题：在执行冻结的应用程序期间找不到我的 twistd 插件。

为了发布我的项目，我使用 twistd runner 模块创建了自己的顶级启动脚本，例如

```
#!/usr/bin/env python
from twisted.scripts.twistd import run
from sys import argv
argv[1:] = [
  '--pidfile', '/var/run/myapp.pid',
  '--logfile', '/var/run/myapp.log',
  'myapp_plugin'
]
run() 
```

接下来，我使用 PyInstaller 将其冻结为单目录部署。执行上面的冻结脚本失败，因为它找不到我的 twistd 插件（为简洁而编辑）：

```
~/pyinstall/dist/bin/mystartup?16632/twisted/python/modules.py:758:
UserWarning: ~/pyinstall/dist/mystartup?16632 (for module twisted.plugins)
not in path importer cache (PEP 302 violation - check your local configuration).

~/pyinstall/dist/bin/mystartup: Unknown command: myapp_plugin 
```

通常，Twistd 检查 Python 系统路径以在 twisted/plugins/myapp_plugin.py 中发现我的插件。如果我在启动脚本中打印扭曲插件列表，则该列表在 PyInstaller 生成的可执行文件中为空，例如

```
from twisted.plugin import IPlugin, getPlugins
plugins = list(getPlugins(IPlugin))
print "Twistd plugins=%s" % plugins 
```

我使用了一个有点默认的 PyInstaller 规范文件，没有指定隐藏的导入或导入钩子。

我喜欢带日志记录、pid 文件等的twistd 功能，所以我想避免完全放弃twistd runner 来规避插件问题。有没有办法确保在冻结的可执行文件中找到我的 twistd 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:59:58.670

我通过对一些扭曲的代码进行逆向工程找到了一种解决方法。在这里，我对插件导入进行了硬编码。这对我来说适用于 PyInstaller。

```
#!/usr/bin/env python
import sys

from twisted.application import app
from twisted.scripts.twistd import runApp, ServerOptions

import myapp_plugin as myplugin

plug = myplugin.serviceMaker

class MyServerOptions(ServerOptions):
    """
    See twisted.application.app.ServerOptions.subCommands().
    Override to specify a single plugin subcommand and load the plugin
    explictly.
    """
    def subCommands(self):
        self.loadedPlugins = {plug.tapname:plug}
        yield (plug.tapname,
               None,
               # Avoid resolving the options attribute right away, in case
               # it's a property with a non-trivial getter (eg, one which
               # imports modules).
               lambda plug=plug: plug.options(),
               plug.description)

    subCommands = property(subCommands)

def run():
    """
    Replace twisted.application.app.run()
    To use our ServerOptions.
    """
    app.run(runApp, MyServerOptions)

sys.argv[1:] = [
    '--pidfile', '/var/run/myapp.pid',
    '--logfile', '/var/run/myapp.log',
    plug.tapname] + sys.argv[1:]

run() 
```

# javascript - “提问”中的后退按钮事件捕获

> ID：10181870
> 
> 赞同：5
> 
> 时间：2012-04-16T13:29:16.567
> 
> 标签：javascript, dom, dom-events, back-button

后退按钮事件未被处理程序捕获，`window.onbeforeunload`也未被处理`onbeforeunload`程序处理。

Stack Overflow 上有几个问题询问如何捕获返回按钮而没有好的答案，但是如果用户在 Stack Overflow 上撰写新问题时点击浏览器的返回按钮，则会出现一个消息框询问他是否确定要继续弹出-向上。

这个消息框在 Chrome 和 Firefox 之间是不同的，感觉很原生。

那么，窗帘后面是什么？

如何让浏览器弹出一个消息框，让用户可以选择留在当前页面（如`onbeforeunload`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:52:17.117

> 后退按钮事件未被处理程序捕获，`window.onbeforeunload`也未被处理`onbeforeunload`程序处理。

不对。用纯 JavaScript检查[这个测试用例](http://jsfiddle.net/gYvwh/)- 后退按钮触发`onbeforeunload`就好了。检查了所有主要浏览器的最新版本：Chrome 18、Firefox 11 和 IE9。（复制链接地址，首先浏览到其他站点，然后浏览到小提琴并点击返回按钮）

所以我担心你的问题并不相关——你看到**的是**浏览器原生对话框。

# ruby-on-rails - 运行 Ruby on Rails 的最低规格 VPS

> ID：10181872
> 
> 赞同：10
> 
> 时间：2012-04-16T21:18:32.993
> 
> 标签：ruby-on-rails, ruby, vps

我想开始使用我的第一个 Ruby on Rails 应用程序。

它会拉出一张图片，同时显示一些关于图片的文本，并有一个小框来写一些关于图片的文本，一旦提交，这些文本将被写入数据库。

它不可能有超过 5 个并发用户，因为它是一个个人项目。

在 Rails 上运行 ruby​​ 所需的最低 VPS 规格是多少？是否有可能在 64mb（128 个突发）内存上或者我可以更低？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T22:36:53.683

我提倡的最低的是 512MB 系统。单独的 Ruby on Rails 堆栈可能有 50-100MB，除非你非常小心地修剪掉额外的东西。然而，在现代系统上，这只是一个微不足道的内存量，即使在 VPS 世界中，4096MB 也很常见。

[Linode](http://linode.com/)为基本的 512MB 系统提供 19.95 美元的计划，虽然不是最便宜的，但即使对于个人项目来说也非常实惠。有较便宜的供应商，但他们的服务质量可能会有很大差异。

如果您使用[Passenger](http://modrails.com/)，那么即使是512MB 的机器也可以运行多个负载较轻的站点。

您可能不想使用自己的 VPS，而是使用[Heroku](http://heroku.com/)，它不直接为客户分配内存，而是共享他们称为“Dynos”的 CPU 时间，这比 VPS 更抽象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-15T16:56:56.240

年轻的约瑟夫。你应该已经学会使用 git 并开始使用 Heroku。[Heroku](http://heroku.com "heroku")没有在网站上明确宣传，但他们提供免费计划。

# xcode - 从另一个视图中删除数组中的所有对象？Xcode iOS

> ID：10181877
> 
> 赞同：0
> 
> 时间：2012-04-16T21:18:55.723
> 
> 标签：xcode, arrays

请原谅我这太模糊了。我有一个应用程序，它根据用户浏览的位置填充了数组。一个是访问过的所有站点，并且可以在另一个视图控制器中访问，另一个是在用户键入时显示的文本视图中的所有文本输入。我不知道这是否重要，但我的问题是，我希望有一个设置页面，可以选择清除该数据。我可以从该视图自身的头文件中执行此操作，但不确定如何将 removeallobjects 命令发送到其他视图或数组。在每个视图中，我都有一个按钮来调用它：

```
-(IBAction)clearPreText {
UIAlertView *alert = [[UIAlertView alloc] 

                      initWithTitle:@"clear all predictive typing?"
                      message:@"press ok to clear"
                      delegate: self
                      cancelButtonTitle:@"cancel"
                      otherButtonTitles:@"ok", nil];

[alert show];

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 1) {

    [pastUrls removeAllObjects];
    [[NSUserDefaults standardUserDefaults] setObject:autocompleteUrls forKey:@"PastUrls"];

    [self.autocompleteTableView reloadData];

}} 
```

我想将这些按钮放在一个新视图中，一个设置页面。感谢一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T23:38:20.423

两个控制器都可以访问应用程序委托，而应用程序代理可以访问您的每个控制器。当我需要做这样的事情时，我通常通过应用程序委托来做。

# twitter-bootstrap - iPad 上的引导导航栏

> ID：10181879
> 
> 赞同：2
> 
> 时间：2012-04-16T21:19:24.733
> 
> 标签：twitter-bootstrap

bootstrap-responsive.css 文件很好地将导航栏变成了 iPad 上的下拉菜单。

我的问题是导航栏没有固定在屏幕顶部。相反，它尊重 body 标签上的 padding-top。

问：我是否只需将 padding-top:0 添加到 bootstrap-responsive.css 中？

还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:30:22.153

添加 bootstrap.css、bootstrap-responsive.css 后。将此添加到 css 文件中

```
body {
  padding-top: 60px;
  padding-bottom: 40px;
}

@media (max-width: 979px) {
  body {
    padding-top: 0;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T02:21:45.363

您是否在所有其他样式表之后包含 bootstrap-responsive.css ？如果你不是，我建议你这样做，因为我在 Rails 应用程序中遇到过类似的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:24:04.780

可能是未设置边距标签，因此回退到默认值（element.style），请尝试设置`margin: 0;`。或者，它可能是未设置位置属性，添加`'position: fixed; top: 0;'`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T23:09:44.437

您必须包含 bootstrap.css，然后是您的 css，然后是 bootstrap-responsive.css。

# android - 缩放和方向服务

> ID：10181881
> 
> 赞同：0
> 
> 时间：2012-04-16T21:19:32.113
> 
> 标签：android, iphone, google-maps-api-3

我希望强制 Google 方向服务缩放到最终目的地，而不是显示整个路线。这可能吗？如果是这样，你会怎么做？一旦设置了开始和结束位置并且调用了计算路线功能，我还想删除我设置的标记，这可能吗？我认为任何代码都不会帮助它在 v3 中完成。我一直在搜索，没有发现与缩放问题相关的任何内容。任何人都可以请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:35:07.670

好吧，这确实有帮助，现在看着它，我想也许应该添加我的代码。我先在这里试试。我希望“A”和“B”标记保留我已经为其他标记构建了数组额外的转弯方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:37:23.640

在初始化方向渲染器时首先传递这些选项：

```
{suppressMarkers:true,preserveViewport:true} 
```

...因此您将不会获得标记，并且地图在渲染时将不适合路线的边界。

然后，在渲染 route( `setDirections()`) 之后，调用它：

```
 directionsDisplay.setDirections(response);
        //set the center of the map to the end of the route
      map.setCenter(response.routes[0].legs[response.routes[0].legs.length-1].end_location);
        //set the zoom to the desired value 
```

（其中方向显示是方向渲染器实例）

# sql - 有趣的 t-sql 练习

> ID：10181882
> 
> 赞同：1
> 
> 时间：2012-04-16T21:19:34.297
> 
> 标签：sql, tsql

我正在尝试解决 t-sql 练习我需要通过 id 加入来使用第二个值更新第一个表。如果我无法加入，则使用默认 ID 中的值（默认 ID 是为空的 ID）

请运行它以查看它

```
declare @t as table (
    [id] INT
    ,val int
)

insert into @t values (null, null)
insert into @t values (2, null)
insert into @t values (3, null)
insert into @t values (4, null)

declare @t2 as table (
    [id] INT
    ,val int
)

insert into @t2 values (null, 11)
insert into @t2 values (2, 22)
insert into @t2 values (3, 33)

select * from @t
select * from @t2

update t
set t.val = t2.val
from @t as t join @t2 as t2
    on t.id = t2.id
        or 
        (
            (t.id is null or t.id not in (select id from @t2))
            and t2.id is null
        )

select * from @t 
```

这是结果

```
--@t
id      val
---------------
NULL    NULL
2       NULL
3       NULL
4       NULL

--@t2
id      val
---------------
NULL    11
2       22
3       33

--@t after update
id      val
---------------
NULL    11
2       22
3       33
4       NULL 
```

如何使最后一行的 val 等于 11？

```
4       11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:32:47.773

此解决方案左连接到 t2 两次，然后进行合并。

第二`ON`个连接上的 匹配连接失败的记录，然后查找“默认”情况。

```
UPDATE t
set t.val = COALESCE(t2.val,t3.val)
from @t as t 
    LEFT join @t2 as t2
    on t.id = t2.id
    LEFT JOIN @t2 t3 
    ON t2.id is null and t3.id is null 
```

[看到它在这里工作](https://data.stackexchange.com/stackoverflow/query/66958/sample-for-10181882)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:33:56.503

试试这个更新...

```
update t
set t.val = t2.val
from @t as t join @t2 as t2
    on t.id = t2.id
        or 
        (
            (t.id is null or not exists (select * from @t2 where id = t.id))
            and t2.id is null
        ) 
```

问题在于`not in`运算符和`null`值。这也可以工作......

```
update t
set t.val = t2.val
from @t as t join @t2 as t2
    on t.id = t2.id
        or 
        (
            (t.id is null or t.id not in (select id from @t2 where id is not null))
            and t2.id is null
        ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:23:40.490

这是一种可能会有所帮助的技术。

从您想要编写的简单代码开始：

```
MERGE INTO @t AS target 
   USING source 
      ON target.id = source.id 
WHEN MATCHED THEN
   UPDATE 
      SET val = source.val; 
```

`source`然后写一个满足要求的表表达式（ ）。

要求1：“通过id加入”

-- 简单的存在量化，例如

```
SELECT id, val
  FROM @t2 AS T2
 WHERE id IN ( SELECT id FROM @t ) 
```

要求 2：“如果我不能加入，则使用默认 ID 中的值（默认 iD 是为空的 ID）”

-- 首先`id`在目标中找到源中不存在的值：

```
SELECT id
  FROM @t
EXCEPT
SELECT id
  FROM @t2 
```

然后将结果与 Id 为空的源中的行交叉连接：

```
SELECT DT1.id, T2.val
  FROM ( SELECT id
          FROM @t
         EXCEPT
         SELECT id
          FROM @t2 ) AS DT1, 
       @t2 AS T2 
 WHERE T2.id IS NULL 
```

此时，您将需要查询一些测试数据以确保每个查询都满足其各自的要求。

将上述两个结果联合起来形成一个表表达式：

```
SELECT id, val
  FROM @t2 AS T2
 WHERE id IN ( SELECT id
                 FROM @t )             
UNION
SELECT DT1.id, T2.val
  FROM ( SELECT id
          FROM @t
         EXCEPT
         SELECT id
          FROM @t2 ) AS DT1, 
       @t2 AS T2 
 WHERE T2.id IS NULL 
```

然后将表表达式插入`MERGE`样板代码：

```
WITH source
     AS
     (
      SELECT id, val
        FROM @t2 AS T2
       WHERE id IN ( SELECT id
                       FROM @t )             
      UNION
      SELECT DT1.id, T2.val
        FROM ( SELECT id
                FROM @t
               EXCEPT
               SELECT id
                FROM @t2 ) AS DT1, 
             @t2 AS T2 
       WHERE T2.id IS NULL
     )
MERGE INTO @t AS target 
   USING source 
      ON target.id = source.id 
WHEN MATCHED THEN
   UPDATE 
      SET val = source.val; 
```

# ios5 - 触摸 HTML 链接时执行 segue

> ID：10181883
> 
> 赞同：2
> 
> 时间：2012-04-16T21:19:36.133
> 
> 标签：ios5, uiwebview, storyboard

我的应用中有一些使用 UIWebView 的 HTML 内容。我想在 HTML 内容中有一个链接，触发我的应用程序执行 segue 或加载另一个视图控制器。

例如，如果我有一些包含文本“查看我们当前的特价商品”的 HTML 内容，我想使用标签来启用“特价商品”以从情节提要加载特价商品视图控制器。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:50:26.007

我没有代码可以向您展示，但我相信我可以向您展示正确的方向，因为我以前必须这样做。这是一种方法。

1.  在超链接中创建一个具有唯一方案名称和路径的链接。例如使用 MyScheme://GoToThisScreen/Identifier。
2.  将 UIWebView 委托设置为您的文件所有者，并确保文件所有者实现 UIWebViewDelegate。
3.  覆盖 webView:shouldStartLoadWithRequest:navigationType: 并检查来自 Web 视图的 URLRequest。如果它不是您的方案（MyScheme），那么您可以让它通过。
4.  如果这是您的方案，您可以使用它来确定下一步。例如转到另一个屏幕。
5.  使用 UIStoryBoard 方法 instantiateViewControllerWithIdentifier: 将标识符分配给您希望实例化的场景（URI 的最后一部分）。请记住，您必须获得正确的故事板才能使用它。
6.  将您在第 5 步中收到的视图控制器推送到导航控制器中。

希望这可以帮助。

# android - 在片段之间切换

> ID：10181888
> 
> 赞同：0
> 
> 时间：2012-04-16T21:20:02.173
> 
> 标签：android, user-interface, android-fragments, interaction

我想制作一个与 Play Store 相同结构的应用程序。它被碎片分割。我有一个用于家庭的片段（accueil），一个用于列表的片段，一个用于详细信息（fiche）。我现在只有一个片段展示（我从手机开始，平板电脑会有所不同）

我可以使用操作栏选项卡在我的片段之间轻松切换。有用。

但是我不能，也不知道如何单击列表中的一个元素并用我的片段替换我的片段以获取详细信息。经过长时间的研究和尝试不同的事情，我做的最好的事情就是不崩溃，但什么也不做。否则它会因错误“java.lang.IllegalArgumentException: No view found for id 0x7f030002 for fragment FicheFragment{4115ce00 #2 id=0x7f030002}”而崩溃

因为是很多小文件，也不知道自己做错了什么，我觉得还是把我的项目发过来吧……（这是我唯一做的……）

[http://www.woofiles.com/dl-302110-VI7SbD2w-QuebecEnFetes.rar](http://www.woofiles.com/dl-302110-VI7SbD2w-QuebecEnFetes.rar)

谢谢....我对文档质量差感到非常沮丧....

尼克007

# objective-c - 重用以编程方式创建的 UITableView？

> ID：10181890
> 
> 赞同：0
> 
> 时间：2012-04-16T21:20:13.830
> 
> 标签：objective-c, ios, uitableview, subclass

我正在开发一个应用程序，它使用 UITableViews 和自定义的、编程的 UI 更改。例如，我有一些编程 UITableViewCell 更改：

```
...
cell.backgroundColor = [UIColor clearColor];
cell.textLabel.font = [UIFont fontWithName:@"Georgia" size:14];
cell.selectedBackgroundView = anImageView;
... 
```

和这样的 UITableView 设置：

```
self.table.separatorColor = [UIColor darkGrayColor]; 
```

我如何将 UITableView 和 UITableViewCell 的子类创建到每当我创建新表时，它将继承这些属性？我在每个表中都有所有这些属性（大约有 3-4 个），并且希望减少不必要的代码混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:34:53.040

我会做两个子类：

您自己的表格视图子类（您可以在 initWithFrame:style: 方法中对表格视图进行更改）和您自己的表格视图单元格子类（您可以在 initWithStyle:reuseIdentifier: 方法中进行更改）。

您可能还想覆盖表视图的 dataSource 属性，并创建自己的协议，强制该`-(UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)path`方法返回您的 UITableViewCell 子类而不是标准类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:35:03.207

UITableViewCell 将是最容易重用的，因为它们（应该）始终是一个单独的类（如果适用，还有 nib），但是，重用 Table View 本身需要一个子类。这有点多，考虑到在每个类的基础上制作 UITableView 是多么容易，但如果你觉得你必须这样做，你可以。请注意，UITableView 类在涉及子类时***非常挑剔。***

# php - 为类内抛出的所有异常设置异常处理程序？

> ID：10181893
> 
> 赞同：1
> 
> 时间：2012-04-16T21:20:47.213
> 
> 标签：php, class, exception-handling

我知道可以使用 set_exception_handler() 设置您自己的全局异常处理程序。但是是否可以在一个类中设置一个异常处理程序，并且只捕获类本身抛出的那些异常？我正在使用一个静态类，如果它有什么不同的话。

我想做这样的事情（即我正在寻找“set_class_exception_handler()”函数）：

```
class DB{

    $dbh = NULL;

    public static function connect( $host, $database, $username, $password, $db_type = 'mysql' ){
        static::$dbh = new PDO( $db_type.':host='.$host.';dbname='.$database, $username, $password );
    }

    public static function init(){
        set_class_exception_handler( array("DB", "e_handler") );
    }

    public static function e_handler($e){
        /* Log exception */
    }

    public static function test(){
        $stmt = $dbh->prepare("SELET username FROM users WHERE id=:id");
        // SELECT is misspelled and will result in a PDOException being thrown
    }

}

DB::init();
DB::connect( 'localhost', 'database', 'username', 'password' );
DB::test(); 
```

上面的代码应该导致异常被记录，但是应用程序中其他地方抛出的异常应该由默认的异常处理程序处理，而不是被记录。这有可能吗？最重要的是，我不想将我在 DB 类中所做的一切都包装在 try/catch 语句中以便能够记录任何异常。

还是可以仅将某些类型的异常重定向到异常处理程序，而让所有其他异常处理程序转到默认处理程序？似乎只能使用 set_exception_handler() 将所有异常或不重定向到自定义异常处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:37:37.683

如果我理解您的要求，您应该能够执行以下操作（未经测试）：

```
class DBException extends Exception
{
    public function __construct($message = null, $code = 0, Exception $previous = null)
    {
        parent::__construct($message, $code, $previous);

        error_log($message);
    }
}

class DB
{
    public static function test() {

        // We overrode the constructor of the DBException class
        // which will automatically log any DBexceptions, but will not autolog 
        // any other exceptions
        throw new DBException('Something bad happened.');
    }
}

// Calling code

// This will throw fatal due to uncaught exception
// Because we are not handling the thrown exception
DB::test(); 
```

**- 更新 -**

根据您的评论，您的代码片段非常接近。没有功能`set_class_exception_handler`，换成`set_exception_handler`. 不确定您是否已经阅读过这篇文章，但有一条与使用静态方法的文档相关联的评论似乎[可以](http://us2.php.net/manual/en/function.set-exception-handler.php)`set_exception_handler`工作。该评论是由“marques at displague dot com”发布的。

# java - 实现一个 responseHandler 接口

> ID：10181895
> 
> 赞同：1
> 
> 时间：2012-04-16T21:21:00.303
> 
> 标签：java, web-services, apache, httpclient

我正在实现 httpclient 响应处理程序。正在拨打的电话是`post`这样的

`result = httpclient.execute(httppost, responsehandler);`

现在我想实现我的响应处理程序。这样我就可以获取我的响应的状态代码。我只对状态码感兴趣，即 200、404、403，然后我想将此响应作为*int*值发送回来

就像是

```
public class MyResponseHandler implements ResponseHandler<Integer> {

    public Integer handleResponse(HttpResponse respons) throws ClientProtocolException, IOException {
        // TODO Auto-generated method stub
        return 0;
    } 
```

现在的问题是，我`response.getStatusCode()`在响应对象中看不到任何方法。如何获取我的 WS 调用的状态码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:23:12.547

使用`response.getStatusLine().getStatusCode()`.

*   [`HttpResponse#getStatusLine()`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpResponse.html#getStatusLine%28%29)
*   [`StatusLine#getStatusCode()`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/StatusLine.html#getStatusCode%28%29)

# wpf - WPF 中的单元测试路由事件

> ID：10181896
> 
> 赞同：1
> 
> 时间：2012-04-16T21:21:00.613
> 
> 标签：wpf, unit-testing, mvvm, mvvm-light

我正在创建一个 MVVM WPF 应用程序。在我的单元测试中，似乎我被迫注册一大堆 RoutedEventArgs 以在测试时传递给我的 VM 命令。虽然到目前为止我没有看到任何真正的问题，但我认为将 WPF 框架排除在我的单元测试之外会更好，例如清洁编码。我尝试模拟事件参数，但 WPF 框架抱怨事件参数未注册。我也在使用 MVVM Light。

问题是这样的：有没有办法模拟 RoutedEventArgs 以用于单元测试？你能建议一种不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:03:52.680

我们在 WPF 应用程序中更多地遵循模型-视图-演示器格式，但是我们在命令 CanExecute 和 Executed 函数中获得了我们需要的内容，然后将其传递到我们的可测试表示层。您可以使用类似的技术：

```
private void WhateverCommand_Executed(object sender, ExecutedRoutedEventArgs e) {   
    DoSomething(e.Parameter); 
} 
```

# silverlight - 在 Silverlight 中访问浏览器历史记录

> ID：10181898
> 
> 赞同：0
> 
> 时间：2012-04-16T21:21:07.120
> 
> 标签：silverlight, http-headers, browser-history

如果我在站点 abc.com 并访问我的站点 def.com，该站点托管了一个 silverlight 应用程序。如何在我的 silverlight 应用程序中找出我刚刚来自哪个域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:37:01.830

假设您通过链接访问您的站点（如果您只是输入您的网站地址，这将不起作用），您在 def.com 上的托管 ASPX 页面将收到一个引用 URL。

然后，您只需通过 Silverlight 控件的 InitParams 设置将其传递到 Silverlight 应用程序。

有关如何将属性传递给 Silverlight，请参阅[HttpRequest.UrlReferrer 属性](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer%28v=vs.90%29.aspx)和[此示例。](http://www.kunal-chowdhury.com/2010/07/how-to-pass-values-to-silverlight.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:59:28.003

你不能。您将不得不为此使用 Javascript，即使那样您也无法看到用户来自哪个站点，您可以返回上一页。

您可以通过检查 Web 服务器日志在服务器端执行此操作。

# io - qemu 与 seabios 一起启动

> ID：10181899
> 
> 赞同：1
> 
> 时间：2012-04-16T21:21:10.660
> 
> 标签：io, virtual-machine, qemu, bios

我使用修改后的 qemu 来测试 IOMMU，并且我也编译了 seabios，但是现在我不知道如何在我的 qemu 中使用特殊的“seabios”，因为我需要将它们结合在一起，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:51:15.440

您可以使用简单的命令行参数将您的 bios 文件传递​​给 qemu：`-bios mybios`

这是你想要的吗？

# asp.net - 在 asp.net 中引用事件参数的最佳方法

> ID：10181908
> 
> 赞同：2
> 
> 时间：2012-04-16T21:21:46.650
> 
> 标签：asp.net

最佳实践问题。

当我编写一些事件处理程序时，我遇到了一个问题，当我应该查看其他内容时，我查看了不正确的事件 (GridViewRowEventArgs)。

现在为了解决我的问题，我没有引用我正在查看的非常具体的事件，而是使用了 EventArgs，它似乎可以捕获任何可能的事件。所以，最后是问题；使用 EventArgs 而不是特定事件有问题吗？使用特定的调试问题会更好吗？大家的意见是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:29:04.167

如果控件是兼容的，那么它们的事件 arg 类将始终从通用 ASP-provided 继承`EventArgs`，这就是您的方法有效的原因。最终，如果您不需要*控件*通过自己的自定义事件参数类提供的额外信息，那么显然您可以完全不用它。

但是，从最佳实践的角度来看，我的感觉是使用控件提供的正确处理程序签名会更好，因为这使得可能正在处理您的代码并且无法读懂您的想法的人可以预测它，但是确实可以访问特定控件的文档。

# widget - 从活动启动 Android 小部件列表

> ID：10181911
> 
> 赞同：1
> 
> 时间：2012-04-16T21:21:58.000
> 
> 标签：widget, classname

有什么方法可以从活动中启动 android 小部件列表？一些喜欢示例代码：

```
 Preference button = (Preference)findPreference("button");
        button.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {
              @Override
              public boolean onPreferenceClick(Preference arg0) { 

              Intent myIntent = new Intent();
              myIntent.setClassName(packageName, className);
              startActivity(myIntent);

              return true;
              }
    }); 
```

或其他访问小部件列表的方式？

# batch-file - 批处理文件变量三明治

> ID：10181912
> 
> 赞同：-1
> 
> 时间：2012-04-16T21:22:08.117
> 
> 标签：batch-file, nested

我做了这批

```
@echo off
:U
set /a x=%x%+1
set /p var%x%=What is your data point (end to begin)
if %var%x%%==end (
SEt /a x=%x%-1
goto New
)
goto U
:next 
```

它才刚刚开始，主要问题是完全不同的东西（我不会说它，所以你不会回答它）因为你可能猜到我需要一种方法来在变量中包含一个变量（我认为它称为嵌套但我可能是错的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:12:43.560

您需要延迟扩展

```
@echo off
setlocal enableDelayedExpansion
:U
set /a x+=1
set /p var%x%=What is your data point (end to begin)
if !var%x%!==end (
  set /a x-=1
  goto New
)
goto U
:next 
```

注意 - 我简化了你的数学表达式。SET /A 表达式中的变量不需要用百分号括起来，和.`x+=1`一样`x=x+1`。

您的标签`goto New`与您的标签不符`:next`- 也许是个问题，也许是故意的。

# ruby-on-rails - Rails 依赖: :destroy 导致 ArgumentError

> ID：10181913
> 
> 赞同：2
> 
> 时间：2012-04-16T21:22:13.647
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations, foreign-key-relationship

我的 Rails 应用程序中有一个用户模型，如下所示

```
class User < ActiveRecord::Base
  has_many :parts, dependent: :destroy
  has_many :assemblies, dependent: :destroy
  has_many :packages, dependent: :destroy
  has_many :manufacturers, dependent: :destroy
  //more code here
end 
```

我也有`dependent: :restrict`其他一些型号。

当我在 中运行以下命令时`rails console`，我得到一个 ArgumentError：

```
u = User.first
u.parts 
```

调用会`u.parts`给出以下错误消息：

```
ArgumentError: Unknown key: dependent
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb:44:in `block in assert_valid_keys'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb:43:in `each_key'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb:43:in `assert_valid_keys'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/builder/association.rb:33:in `validate_options'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/builder/association.rb:24:in `build'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/builder/collection_association.rb:23:in `build'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/autosave_association.rb:139:in `build'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/builder/has_and_belongs_to_many.rb:8:in `build'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/builder/collection_association.rb:13:in `build'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations.rb:1600:in `has_and_belongs_to_many'
    from /home/david/code/PartSorter/app/models/part.rb:5:in `<class:Part>'
    from /home/david/code/PartSorter/app/models/part.rb:1:in `<top (required)>'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:469:in `load'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:469:in `block in load_file'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:468:in `load_file'
... 12 levels...
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:554:in `get'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:588:in `constantize'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/inheritance.rb:111:in `block in compute_type'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/inheritance.rb:109:in `each'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/inheritance.rb:109:in `compute_type'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/reflection.rb:172:in `klass'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/association.rb:117:in `klass'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/association.rb:165:in `find_target?'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/collection_association.rb:332:in `load_target'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/associations/collection_proxy.rb:88:in `method_missing'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.1/lib/rails/commands/console.rb:47:in `start'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.1/lib/rails/commands/console.rb:8:in `start'
    from /home/david/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.1/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我不确定为什么这不起作用 - 我按照[此处](http://guides.rubyonrails.org/association_basics.html)的指南添加了该`dependent`部分，但它不起作用。有任何想法吗？

编辑：part.rb 的内容如下：

```
class Part < ActiveRecord::Base
  has_many :part_packages
  has_many :packages, through: :part_packages
  belongs_to :manufacturer
  has_and_belongs_to_many :assemblies, :dependent => :restrict
  belongs_to :user

  validates :name, :user_id, :presence => true

  def quantity
    @quantity = 0
    self.part_packages.each do |pp|
      @quantity += pp.quantity
    end
    @quantity
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T21:41:39.793

`:dependent`不是 的有效选项[`has_and_belongs_to_many`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many)，因此您需要摆脱它并编写自己的解决方案来满足您的需求。

或者，您可能希望有一个显式连接模型而不是使用`has_and_belongs_to_many`. 这样您就可以使用`:dependent`与连接模型的关系。

# qt - 带有 Visual Studio 的 Qt - 无法编译移动的项目

> ID：10181917
> 
> 赞同：0
> 
> 时间：2012-04-16T21:22:32.040
> 
> 标签：qt, visual-c++, boost, msbuild, visual-studio-2010

我在 Visual Studio 2010 上有一个项目，它使用与 Qt 4.8 的集成、一些增强功能，所有这些东西都是用 SVN 版本化的。

一切都很好：我将解决方案文件夹从一个地方移动到另一个地方，在不同的计算机上编译它。但是，一旦我重命名了解决方案文件夹，并且当我尝试构建项目时 - 编译器只写了一个错误：

```
Error   1   error MSB6006: "cmd.exe" exited with code 1\.    C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   151 
```

但是当我返回旧解决方案文件夹的名称时 - 一切都会再次构建而没有任何错误！

正如我所想，编译器不能对 *.ui 文件使用自定义构建步骤并停止整个构建过程。可能，绝对路径存在一些问题，但我第二天找不到它:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:10:14.143

正如经常发生的那样，答案就隐藏在地上。

在观察构建输出时，我得到了这样的行：

```
1>  Uic'ing frmserver.ui...
1>  File 'C:\Users\Theurgist\Desktop\JamServer (?????)\JamServer\frmserver.ui' is not valid 
```

这个问题完全是因为 Qt 编译器工具无法正确使用包含 unicode 的路径（至少到 4.8 版）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:22:57.457

在您的 .sln 文件或 .vcxproj 文件中必须有一些对旧文件夹位置的引用。

您应该可以通过以下方式解决此问题：

*   关闭 Visual Studio
*   在您选择的文本编辑器中打开您的 .sln 文件及其加载的所有 .vcproj 文件
*   对旧文件夹名称进行搜索和替换，将其更改为新文件夹名称。

# php - 图像上的php gd文本中断

> ID：10181925
> 
> 赞同：1
> 
> 时间：2012-04-16T21:23:12.577
> 
> 标签：php, html, gd, gdi

我试图根据我的摩天大楼横幅宽度大小来打破一个长短语，它不能承受超过三个单词，我在互联网上搜索并找到了一个脚本，它通过将字符设置为长的短语来打破文本，这就是它。

```
<?

header("Content-type: image/png");
$string = $_GET['text']. '  Click Here';
$im     = imagecreatefrompng("../../images/skyscrapper.png");
$orange = imagecolorallocate($im, 0, 0, 0);
$px     = (imagesx($im) - 3.8 * strlen($string)) / 2;
$font = 'verdana.ttf';

// Break it up into pieces 10 characters long
$lines = explode('|', wordwrap($string, 10, '|'));

// Starting Y position
$y = 450;

// Loop through the lines and place them on the image
foreach ($lines as $line)
{
imagestring($im,3, $px, $y, $string, $orange);

    // Increment Y so the next line is below the previous line
    $y += 23;
}

imagepng($im);
imagedestroy($im);

?> 
```

问题是输出重复了该短语三次，而不是像此屏幕截图那样破坏了文本![文字不断重复](../Images/5ac76c3f801a0f1a7b131adf263f5fa5.png) ，有人可以帮助解释问题出在哪里，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T21:24:50.520

你没有改变`$string`你的循环。不应该是：

```
imagestring($im,3, $px, $y, $line, $orange);
                            ^^^^^ 
```

反而？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:30:00.950

也许更换

```
imagestring($im,3, $px, $y, $string, $orange); 
```

和

```
imagestring($im,3, $px, $y, $line, $orange); 
```

# git - 为一个存储库的不同分支选择提交

> ID：10181927
> 
> 赞同：1
> 
> 时间：2012-04-16T19:59:42.177
> 
> 标签：git

我在[http://readthedocs.org/](http://readthedocs.org/)有一个文档项目，它的源代码来自 github repo。由于我不确定一个或另一个文件可能需要的语法，因此我在 github 上创建了一个单独的分支来推送尽可能多的提交，以便在[http://readthedocs.org/](http://readthedocs.org/)上查看结果。

我希望以后能够选择提交并将它们推送到`master`我将从那​​里进行 PR 的分支。有这样的方法还是不好的方法，还有更合适的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:46:35.327

git cherry-pick 应该可以满足您的需求。文档在这里：[http ://schacon.github.com/git/git-cherry-pick.html](http://schacon.github.com/git/git-cherry-pick.html)

这允许您选择单个提交（从您的分支）并将它们应用到您的工作树。

例子：

```
jayray @ myrepo > git log
commit fd7aafce97949da4f80d5fd08b5d9bcc5e85b565
Date:   Mon Apr 16 16:50:52 2012 -0400

    added d

commit 9b40ed02b0d594391e81c0f19883f4bc05d8751c
Date:   Mon Apr 16 16:50:47 2012 -0400

    added c

commit 4359f39765aac74509a4ed876ba1266a2624797e
Date:   Mon Apr 16 16:50:41 2012 -0400

    added b

jayray @ myrepo > git checkout master
Switched to branch 'master'

jayray @ myrepo > git cherry-pick 9b40ed02b0d594391e81c0f19883f4bc05d8751c
[master 3b78d02] added c
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 c 
```

因此，这使我可以将分支中的单个提交应用到我的 master。您也可以指定多个提交。

# asp.net-mvc - Home 以外的控制器不会通过 MvcIntegrationTesting 测试

> ID：10181931
> 
> 赞同：0
> 
> 时间：2012-04-16T21:23:32.377
> 
> 标签：asp.net-mvc, integration-testing

我正在使用Steve Sanderson 精彩的[MVC 集成测试框架的](http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/)[改编版本](https://github.com/JonCanning/MvcIntegrationTestFramework/)。

如果我在我的应用程序中获取任何视图并通过这个框架（它基本上创建一个“假”工作请求[`HttpRuntime.ProcessRequest()`](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.processrequest.aspx)）来提供它，我可以在我的集成测试上下文中将它托管在 ASP.NET 运行时中。

我的问题是为什么从这个过程中得到的任何观点`HomeController`都会很好地通过这个过程，但任何其他控制器都会给出回应

> 路径“获取”被禁止

我可以将任何视图移动到 HomeController 并毫无问题地对其进行测试。我看不出两个调用之间的工作人员请求假的区别（url 不能承受）。我很茫然！

测试输出中的堆栈跟踪：

> ContentControllerTwitterReturnsTheTwitterView : FailedSystem.NullReferenceException : 对象引用未设置为对象的实例。
> 
> 服务器堆栈跟踪：位于 AppDomainProxy.cs 中 MvcIntegrationTestFramework.Hosting.AppDomainProxy.RunBrowsingSessionInAppDomain（SerializableDelegate`1 脚本）的 website.tests.ContentControllerTwitterTests.b__0（BrowsingSession session）：System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage（ IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs) at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg, Int32 methodPtr, Boolean fExecuteInContext)
> 
> 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(ref MessageData msgData, Int32 type) 在 MvcIntegrationTestFramework.Hosting 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) AppHost.cs 中的 .AppDomainProxy.RunBrowsingSessionInAppDomain(SerializableDelegate `1 script) at MvcIntegrationTestFramework.Hosting.AppHost.Start(Action`1 testScript)：website.tests.ContentControllerTwitterTests.ContentControllerTwitterReturnsTheTwitterView() 中的第 34 行 HomeControllerTwitterTests.cs：第 25 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:50:52.150

问题是命名......答案是

> *不要使用与解决方案中的文件夹相同的名称来命名您的控制器！*

老傻瓜：）

# python - random.choice 总是一样的

> ID：10181932
> 
> 赞同：5
> 
> 时间：2012-04-16T21:23:36.323
> 
> 标签：python

我有一个快速的问题。我目前正在使用 random.choice() 从列表中进行选择，并且想知道为什么它总是调用相同的项目。一旦我停止程序并重新启动它，它就会改变。谁能向我解释一下随机类是如何工作的并使它这样做的？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T21:46:14.253

这是我对您最有可能在做什么的猜测：

```
import random

l = [1,2,3,4,5]
random.Random(500).choice(l)
# 4
random.Random(500).choice(l)
# 4
random.Random(500).choice(l)
# 4 
```

如果您使用具有相同种子的实际 Random 类，并且每次都创建一个新实例，那么您正在执行相同的伪随机操作。这实际上是一项功能（播种），可让您在以后的例程运行中进行可重复的随机化。

要么用种子做到这一点：

```
l = [1,2,3,4,5]
r = random.Random(500) # seed number is arbitrary 
r.choice(l)
r.choice(l) 
```

或者使用方便的方法： `random.choice(l)`

# php - 从多个数组中获取正确的值

> ID：10181940
> 
> 赞同：0
> 
> 时间：2012-04-16T21:24:32.157
> 
> 标签：php, arrays, echo

我正在开发一个系统，我需要比较 2 个数组并回显正确的值

```
[1] => Array
        (
            [Message] => Array
                (
                    [id] => 4f8c74ce-8590-4e8b-a5ba-6f54b2158146
                    [user_id] => 1
                    [to_user_id] => 3
                    [created] => 2012-04-16 21:36:46
                    [last_message_id] => 8
                    [message_count] => 2
                )

            [MessageItem] => Array
                (
                    [0] => Array
                        (
                            [id] => 7
                            [message_id] => 4f8c74ce-8590-4e8b-a5ba-6f54b2158146
                            [user_id] => 1
                            [message] => Whola amigo
                            [read] => 0
                            [created] => 2012-04-16 21:36:46
                        )

                    [1] => Array
                        (
                            [id] => 8
                            [message_id] => 4f8c74ce-8590-4e8b-a5ba-6f54b2158146
                            [user_id] => 1
                            [message] => sdfsdfdsfdsfsdfds
                            [read] => 0
                            [created] => 2012-04-16 21:37:54
                        )

                )

        ) 
```

所以..我想

```
ECHO ['MessageItem]['message'] WHERE ['MessageItem]['id'] == ['Message]['last_message_id'] 
```

不知道如何使用 php 来实现这一点！？！

感谢您的任何帮助！

-汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:42:11.920

这个简单的解决方案适用于给出的示例：

```
$array = array(
            '1' => array(
                'Message' => array(
                    'id' => '4f8c74ce-8590-4e8b-a5ba-6f54b2158146',
                    'user_id' => 1,
                    'to_user_id' => 3,
                    'created' => '2012-04-16 21:36:46',
                    'last_message_id' => 8,
                    'message_count' => 2
                ),
                'MessageItem' => array(
                    array(
                        'id' => 7,
                        'message_id' => '4f8c74ce-8590-4e8b-a5ba-6f54b2158146',
                        'user_id' => 1,
                        'message' => 'Whola amigo',
                        'read' => 0,
                        'created' => '2012-04-16 21:36:46'
                    ),
                    array(
                        'id' => 8,
                        'message_id' => '4f8c74ce-8590-4e8b-a5ba-6f54b2158146',
                        'user_id' => 1,
                        'message' => 'sdfsdfdsfdsfsdfds',
                        'read' => 0,
                        'created' => '2012-04-16 21:37:54'
                    )
                )
        )
);

$searchKey = $array['1']['Message']['last_message_id'];

foreach ($array['1']['MessageItem'] as $messageItemArray) {
    if ($searchKey == $messageItemArray['id']) {
        echo $messageItemArray['message'];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:46:26.577

为此，您必须使用 for 循环进行扫描。

```
for($i=0; $i<count([MessageItem]);$i++){
 if(['MessageItem'][$i]['id'] == ['Message']['last_message_id']){
  echo ['MessageItem'][$i]['id'];
 }
} 
```

你可以使用这样的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:56:08.320

```
/**
 * Searches an array for the first element for which 
 * $match_callback returns true.
 *
 * @return mixed The key of the matching entry, or FALSE if no match was found.
 */
function array_find(array $haystack, $match_callback) {
    foreach ($haystack as $key => $value) {
        if ($match_callback($key, $value)) {
            return $key;
        }
    }
    return false;
}

$matching_key = array_find($my_array['MessageItem'], function($key, $messageItem) use ($my_array) {
    return $messageItem['id'] === $my_array['Message']['last_message_id'];    
});

echo 'Found key: ' . $matching_key .PHP_EOL; // 1
echo 'Message: ' . $my_array['MessageItem'][$matching_key]['message']; // sdfsdfdsfdsfsdfds 
```

其中 array_find() 类似于 PHP 的[array_search()](http://php.net/manual/en/function.array-search.php)，不同之处在于它采用布尔回调函数而不是固定值。调整匹配回调以适合您正在寻找的东西。

另请参阅：[匿名函数](http://php.net/manual/en/functions.anonymous.php)

# java - 多个套接字导致 ConnectException：连接被拒绝：连接

> ID：10181941
> 
> 赞同：3
> 
> 时间：2012-04-16T21:24:35.237
> 
> 标签：java, multithreading, sockets, multiprocessing, connectexception

我在 Windows XP 上的 Eclipse 中编程 java。我有一个多进程模拟，它使用 ProcessBuilder 来运行一个服务器和两个客户端。服务器启动一个线程来监听两个不同的套接字 - 每个客户端一个。我可以注释掉每个客户的代码，让其他的工作完美无缺。当我尝试同时运行它们时，一个客户端总是会出现 ConnectException 错误：连接被拒绝：连接。它似乎是哪个客户端运行速度较慢，尽管很难说。我可以在启动服务器之后但在客户端之前暂停，并且 netstat 验证两个套接字都处于活动状态。这可能是什么原因造成的？我在下面有一些简化的代码。

**更新：根据评论，我编辑了代码以在单个套接字上对服务器进行多线程处理，但我仍然遇到同样的问题。下面的代码反映了这些变化。似乎套接字正在由一个客户端打开和关闭，然后另一个客户端有机会打开它。我可以在每个客户端结束时抛出暂停语句，让另一个客户端完成，但这是一个修复，而不是解决方案。所以现在真正的问题是，我如何让 ServerSocket 一直监听直到我指示它关闭？**

服务器

```
try{
    server = new ServerSocket(sockNum); 
} catch (IOException e) {
        System.out.printf("Could not listen on port %d\n",sockNum);
        System.exit(-1);
}
while(true){
    ClientWorker w;
    try{
        Socket connection = server.accept();
        w = new ClientWorker(connection);
        Thread t = new Thread(w);
        t.start();
    } catch (IOException e) {
        System.out.printf("Accept failed: %d\n",sockNum);
        System.exit(-1);
    }
}

class ClientWorker implements Runnable {
    private Socket client;

          ClientWorker(Socket client) {
           this.client = client;
          }

          public void run(){
            Object line;
            ObjectInputStream in = null;
            PrintWriter out = null;
            try{
              in = new ObjectInputStream(client.getInputStream());
              out = new PrintWriter(client.getOutputStream(), true);
            } catch (IOException e) {
              System.out.println("in or out failed");
              System.exit(-1);
            }

            while(true){
                try{
                    line = in.readObject();
                    //Send data back to client
                    out.println("Sent from broker");
                    if(line instanceof String)
                        System.out.println(line);
                    else
                        System.out.println(line.getClass());                        
                } catch (IOException e) {
                    System.out.println("Read failed");
                    System.exit(-1);
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    } 
```

客户

```
 try{
    socket = new Socket("localhost", socketNum);
    out = new ObjectOutputStream(socket.getOutputStream());
    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    out.writeObject(message);
    String line = in.readLine();
    System.out.println(line);
    } catch (UnknownHostException e) {
        System.out.println("Unknown host: localhost.eng");
        System.exit(1);
    } catch  (IOException e) {
        System.out.println("No I/O");
        System.exit(1);
    } 
```

控制器

```
ProcessBuilder server = new ProcessBuilder("java.exe","-Xss64m","-cp","bin;jscheme.jar","ServerProcess");
server.redirectErrorStream(true);
Process runServer = server.start();

ProcessBuilder clientA = new ProcessBuilder("java.exe","-Xss64m","-cp","bin;jscheme.jar","ClientAProcess");
clientA.redirectErrorStream(true);
Process runClientA = clientA.start();

ProcessBuilder clientB = new ProcessBuilder("java.exe","-Xss64m","-cp","bin;jscheme.jar","ClientBProcess");
clientB.redirectErrorStream(true);
Process runClientB = clientB.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:33:47.467

“服务器启动一个线程来监听两个不同的套接字——每个客户端一个。”

不，请不要这样做！为每个客户端分配一个单独的监听套接字是不正常的设计。只需启动一个两个客户端都连接的侦听线程。当 accept() 返回时，为该客户端启动一个读取线程，传递由 accept() 调用返回的 ServerClient Socket。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:35:54.593

编写服务器的常用方法是在一个循环中侦听单个套接字。

对于每个传入的连接，产生一个线程来处理客户端，然后立即`listen`在同一个服务器套接字上再次执行。

在您的情况下，如果两个客户端尝试连接到同一个服务器端口，第二个客户端将始终得到“连接被拒绝”。第一个客户端获取连接，服务器不会`listen`在套接字上重新发出 a 。您还没有展示客户端如何获取他们的端口号，但我猜他们都试图连接到同一个端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:05:32.157

当我写这篇文章时，您的代码对我来说看起来不错。您有一个侦听新连接的**ServerSocket 。**每个连接发生时，都会设置一个新线程来处理它*并*为其提供自己的**Socket**。您的**Socket**和它们的线程应该是完全独立的。每个人的命运都应该完全独立于另一个人。他们不应该知道彼此的存在。

弄清楚它们如何相互作用并将它们分开。

可以尝试的一件事是设置 100 个客户端而不是 2 个。这可能会使问题更加明显；一吨TNT会留下比鞭炮更大的火山口。

另一个可能的问题：确保定期重置 ObjectOutputStream。这种 I/O 非常方便，但它可以做一些*非常*奇怪的事情。如果没有重置，如果你发送同一个对象两次，第二次它只会发送一个对第一个版本的引用，如果最新版本发生了变化，这是没有用的。此外，即使*使用*重置，如果您发送一个引用另一个对象的对象，*该*对象也将被发送到该行。（这可能非常好。您可以发送一个引用包含数百万个对象的庞大结构的单个对象，整个事物将被发送*并*保留其组织。**如果**您知道它在做什么，它非常巧妙且非常有用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:50:48.373

**来自 OP**

因此，在解决我认为不相关的问题的过程中，我似乎已经解决了最初的问题。我添加了两个主要内容。首先，我将客户端设置为在完成时发送“结束”命令，以便在尝试 readObject() 时套接字不会阻塞。其次，（我认为这是修复它的原因），我为 ServerSocket 定义了一个超时值，而不是让它未定义（又名无限）。当我在让事情正常工作后回去清理我的代码时，我尝试删除客户端进程中的暂停，但事情仍然有效！我的猜测是，在没有定义超时的情况下，当一个套接字在另一个套接字打开之前关闭时，ServerSocket 也会关闭。定义超时后，ServerSocket 将等到超时后再关闭。（这只是一个猜测。）

这是当前的工作代码。如果您认为修复的原因不同，请随时发表评论。

服务器

```
try{
    server = new ServerSocket(sockNum);
    server.setSoTimeout(timeOut);
} catch (IOException e) {
    System.out.printf("Could not listen on port %d\n",sockNum);
    System.exit(-1);
}

while(isActive){
    ClientWorker w;
    try{
        Socket connection = server.accept();
        w = new ClientWorker(connection);
        Thread t = new Thread(w);
        t.start();
    } catch (IOException e) {
        if(e instanceof SocketTimeoutException)
            isActive = false;
        else{
            System.out.printf("Accept failed: %d\n",sockNum);
            System.exit(-1);
        }
    }
}

 class ClientWorker implements Runnable {
        private Socket client;
        private Source source = Source.NONE;
        private String sourceName = "?";
        private Boolean threadActive = true;

        ClientWorker(Socket client) {
            this.client = client;
        }

        public void run(){
            Object line;
            ObjectInputStream in = null;
            PrintWriter out = null;
            try{
                in = new ObjectInputStream(client.getInputStream());
                out = new PrintWriter(client.getOutputStream(), true);
            } catch (IOException e) {
                System.out.println("in or out failed");
                System.exit(-1);
            }

            while(threadActive){
                try{
                    line = in.readObject();
                    if(line instanceof String){
                        if(line.equals("end")){
                            threadActive = false;
                        }else
                            sourceName = line;
                        }
                    } else 
                        handleData;
                } catch (IOException e) {
                    System.out.println("Read failed");
                    threadActive = false;
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                    threadActive = false;
                }
            }
            try {
                this.client.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

# bash - 带有数组的 ba sh 脚本适用于 linux 而不是 mac os x

> ID：10181942
> 
> 赞同：0
> 
> 时间：2012-04-16T21:24:36.853
> 
> 标签：bash

这是一个简单的脚本，从实际有用的东西中提炼出来，适用于 Fedora，但不适用于 OS X Lion。

```
declare -a directory_contents=($(ls .))
test -e ${directory_contents[0]}
echo $? 
```

在 linux 上它返回 0，即 test -e 通过。在 Mac 上，它返回 1。

知道这里可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T22:18:57.697

如果返回的第一个文件`ls`名称中有空格，`${directory_contents[0]}`则不会扩展为完整的文件名（仅到第一个空格）。这个条件适用于你的 OSX 测试而不是你的 Fedora 测试吗？

在声明语句之前添加以下行可能会解决问题：

```
IFS=$'\n' 
```

参考：[http ://www.linuxquestions.org/questions/programming-9/bash-passing-arrays-with-spaces-611159/](http://www.linuxquestions.org/questions/programming-9/bash-passing-arrays-with-spaces-611159/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T01:03:06.223

尼克的回答是正确的。但是您还应该记住，除了在高度受控的环境中，您`ls`不*应该*使用文件名来填充变量。还有许多其他方法可以选择单个文件名。

```
[ghoti@pc ~]$ ls -l foo*
-rw-r--r--  1 ghoti  wheel  0 Apr 16 21:01 foo bar.txt
-rw-r--r--  1 ghoti  wheel  0 Apr 16 21:01 foo.txt
[ghoti@pc ~]$ test1=`for i in foo*txt;do echo $i; break; done`
[ghoti@pc ~]$ echo $test1
foo bar.txt
[ghoti@pc ~]$ test2=`find . -name foo\*.txt -print | head -1`
[ghoti@pc ~]$ echo $test2
./foo.txt
[ghoti@pc ~]$ 
```

显然，并非所有方法都会以相同的顺序返回文件。

还要注意以连字符开头的文件名。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:59:33.143

我在最初的问题中忽略了澄清的是，我的“脚本”实际上是一个 bash 函数。我的问题的原因是“ls”正在解析为带有“--color = auto”的别名，将不可打印的字符添加到实际文件名中。

始终定义变量以保存脚本中使用的可执行文件的完整路径，例如“LS=/bin/ls”。而且，根据上面的答案， ls 可能不是强大的生产脚本的最佳选择。

# javascript - 使用选择显示表格的不同部分 - javascript

> ID：10181945
> 
> 赞同：0
> 
> 时间：2012-04-16T21:24:52.533
> 
> 标签：javascript, html

在我正在制作的表格中，我有一个像这样的“选择”：

```
<table>
       <tr id="first">
           <td>
               <select name="tournament">
                        <option value="">...</option>
                        <option value="INDIVIDUAL">INDIVIDUAL</option>
                        <option value="COUPLES">COUPLES</option>
                        <option value="TEAMS">TEAMS</option>
                </select>
          </td>
     </tr>
     <tr id="second">
          <td>
                ....Content....
          </td>
     </tr>
</table> 
```

例如，如果选择了选项值 COUPLES，我需要更改`<tr id="second">`. 选择的每个选项值都有不同的内容。根据选项，内容将是更多或更少的单元格。

请指导我看看我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:43:44.567

```
$('#first').on('change','[name="tournament"]', function(){
    $('#second td').html('my new content');
}); 
```

解释：

将事件侦听器附加到用于`name=tournament`侦听更改的选择项。当发生变化时，更新`#second`区域的内容。

这是您要求做的事情的基本概念，具体而言，更...具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:46:12.777

你可以这样做：

```
<table>
       <tr id="first">
           <td>
               <select name="tournament">
                        <option value="">...</option>
                        <option value="INDIVIDUAL">INDIVIDUAL</option>
                        <option value="COUPLES">COUPLES</option>
                        <option value="TEAMS">TEAMS</option>
                </select>
          </td>
     </tr>
     <tr id="second">
          <td>
                ....Content....
          </td>
     </tr>
</table>

<div style="display:none">
  <div id="INDIVIDUAL">content1</div>
  <div id="COUPLES">content1</div>
  <div id="TEAMS">content1</div>
</div>

$('select[name=tournament]').change(function() {
  $('#second td').html($('#' + $(this).val()).clone());
}); 
```

# javascript - 不同 JavaScript 和 jQuery 之间的冲突

> ID：10181946
> 
> 赞同：1
> 
> 时间：2012-04-16T21:24:54.183
> 
> 标签：javascript

我在我正在制作的网站上集成了不同的 JavaScript，现在我遇到了它们之间的冲突。该网站有时永远无法完成加载，并且图像滑块将难以显示其图像。

有没有什么好的工具或方法来发现这些冲突并解决它们？

有冲突的页面： http: [//cpanel12.proisp.no/~annaryuh/](http://cpanel12.proisp.no/~annaryuh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:27:59.493

您可以将您的 jQuery 代码封装在一个新的范围内，这样它就不会与其他库冲突，如下所示：

```
(function($){
     // your jQuery code here...
}(jQuery)); 
```

您也可以使用 jQuery 的`noConflict`方法返回`$`符号的原始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:28:23.307

您的网站首先包含同一文件的多个版本。这将导致冲突，因为多个函数具有相同的名称。（一个例子是[here](http://cpanel12.proisp.no/~annaryuh/wp-content/plugins/haiku-minimalist-audio-player/js/jquery.jplayer.min.js?ver=1.2)和[here](http://cpanel12.proisp.no/~annaryuh/wp-content/themes/annar2011/js/jquery.jplayer.min.js)）

# c++ - 无法链接到 OpenCV (Linux) 的共享库

> ID：10181947
> 
> 赞同：0
> 
> 时间：2012-04-16T21:25:02.437
> 
> 标签：c++, c, linux, opencv

行下写的问题已解决，但我面临一个新的相关问题。与以前略有不同，我将示例 OpenCV 代码编译并链接为：

```
g++ facedetect.cpp -o facedetection -I /home/harsh/Downloads/OpenCV-2.0.0/include/opencv/ -L/home/harsh/Downloads/OpenCV-2.0.0/lib/ -lcv -lcxcore -lcvaux -lml -lhighgui 
```

现在没有任何错误，但是当我使用运行可执行文件时

```
./facedetection 
```

我收到此错误：

```
./facedetection: error while loading shared libraries: libcv.so.2.0: cannot open shared object file: No such file or directory 
```

当我进行符号链接时，使用：

```
ln -s libcv.so libcv.so.2.0 
```

那么错误是：

```
ln: failed to create symbolic link 'libcv.so.2.0': File exists 
```

不知道如何解决这个问题。

提前致谢..

~~IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII~~

我正在尝试创建一个示例 OpenCV 程序的 linux 可执行文件，该程序将与 .so 文件动态链接，并将在**未**安装 OpenCV 的机器上执行，但 .so 文件将出现在该 linux 机器上。

我已经搜索了很多关于此的帖子，但仍然没有成功。

我像这样编译opencv：

```
cd OpenCV-2.0.0/
cmake -DBUILD_SHARED_LIBS=ON .
make 
```

然后在 OpenCV-2.0.0/lib 中创建所有编译的库

然后，在 samples/c 目录中，我这样做了：

```
g++ facedetect.cpp -o facedetection -I /home/harsh/Downloads/OpenCV-2.0.0/include/opencv/ -L/home/harsh/Downloads/OpenCV-2.0.0/lib/ -llibcv -llibcxcore -llibcvaux -llibml -llibhighgui 
```

但错误是：

```
/usr/bin/ld: cannot find -llibcv
/usr/bin/ld: cannot find -llibcxcore
/usr/bin/ld: cannot find -llibcvaux
/usr/bin/ld: cannot find -llibml
/usr/bin/ld: cannot find -llibhighgui
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T21:26:56.930

使用`-lcv`,`-lcxcore`等。

要链接到`libfoo.so`，标志是`-lfoo`，没有`lib`部分。

如果您的库不在默认运行时库搜索路径中（如何设置/管理取决于您的操作系统和发行版），您需要通知动态链接器它们的位置。（就像您在通过添加`-L`标志进行编译时必须这样做一样。）

在 Linux 上，这是通过设置环境变量来完成的`LD_LIBRARY_PATH`，例如：

```
export LD_LIBRARY_PATH=/home/harsh/Downloads/OpenCV-2.0.0/lib/:$LD_LIBRARY_PATH
./your_app 
```

# html - 表单项定位问题

> ID：10181956
> 
> 赞同：-1
> 
> 时间：2012-04-16T21:26:24.470
> 
> 标签：html, css

我有一个只有文本字段和一个按钮的表单。它们在同一行，首先是文本字段，然后是右侧的按钮。问题是，按钮会根据其上的标题进行扩展，并且文本字段必须填充其余的位置。为了实现这一点，我使用了这样的东西：

```
<html>
    <head>
        <style>
        #search_form {
        width:500px;
        }
        #search_button_container {
        float: right;
        }

        #search_field_container {
        overflow: hidden;
        }

        #search_field {
        width:92%;
        }

        </style>
    </head>
    <body>
        <form id="search_form">
        <div>
        <div id="search_button_container">
        <input type="submit" value="Search" id="search_submit" />
        </div>

        <div id="search_field_container">
        <input id="search_field" name="search_field" type="search" />                                       
        </div>                                  
       </div>                                                          
        </form>
    </body>
</html> 
```

在此标记中，按钮是第一项，但由于页面上的 float=right 它位于右侧，这正是我想要的，但这会使 tabindex 顺序混乱。选项卡时，首先按钮将处于焦点，然后是文本字段，但我需要文本字段是第一个。

注意：我无法将 tabindex=1 添加到 textfield 并将 tabindex=2 添加到按钮，因为在此搜索表单之上和之外还有其他元素，并且 tabindex 必须从上到下移动。

是否有另一种方法可以按照我想要的方式定位元素或重新排序 tabindex。在我的情况下，最好的解决方案是使用另一种样式来达到预期的结果，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:21:44.727

CSS 表格使用与 HTML 表格相同的算法，只是从语义上讲它与 HTML 表格无关。它只是以相同的方式在视觉上**呈现。**

然后你可以有 2 个单元格，它们组合起来有 100% 的宽度，并且每个单元格的内容仍然可以适应彼此的长度。如果提交按钮更长，搜索输入会更短。

这是一个演示它的**小提琴：http:** [//jsfiddle.net/4JvRV/1/](http://jsfiddle.net/4JvRV/1/)
如果它在 Chrome 中不起作用，请告诉我。
**兼容性**：IE8+ IE7 的
**后备**方案：IE7 和 IE6 会看到更短的烧焦...错误的文本输入，恕我直言，完全可以接受。或者，如果您愿意，您可以决定拥有 100% 的宽度并将它们显示在 2 行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:34:30.763

将按钮放在文本字段之后并将文本字段浮动到左侧。

# c# - 合并和排序列表

> ID：10181958
> 
> 赞同：1
> 
> 时间：2012-04-16T21:26:51.740
> 
> 标签：c#, visual-studio-2010

对 C# 来说非常新，使用 Visual Studio 2010。在我的旧 PHP 中，要构建这个菜单，我要做的是有 2 个超链接数组。如果“请求者”登录，将显示 Level1 数组，如果“管理员”登录，则将合并和排序并显示 Level1 和 Level2 数组。在 C# 中，在我的默认页面（有一个 Site.Master 页面）上，我发现自己这样做：

```
case NewCourseRequestView.Administrator:
    if (access.Administrator)
    {
        UserTypeLabel.Text = "Administrator Details:";

        AdministratorMenuList.Items.Add("View Un-Approved Requests");
        adminContent.Visible = true;
    }
    break;

case NewCourseRequestView.Requestor:
    if (access.Requestor)
    {
        UserTypeLabel.Text = "Requester Details:";

        RequestorMenuList.Items.Add("Request A New Course");
        RequestorMenuList.Items.Add("View My New Course Requests");
        requestContent.Visible = true;
    }
    break; 
```

我怎样才能

1.  让这些列表项充当超链接和
2.  将这 2 个列表放在 2 个单独的数组（集合？）中，如果我有 access.Administrator 则合并它们？

我需要一个相当具体的解释，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T23:15:28.087

我建议的第一件事是您需要一个对象作为集合的类型，这些对象将具有 URL 和 Text 属性。

```
class UrlText : IEquatable<UrlText>
{
    public string Url { get; set; }
    public string Text { get; set; }

    public UrlText(string url, string text)
    {
        this.Url = url;
        this.Text = text;
    }

    #region IEquatable<UrlText> Members

    public bool Equals(UrlText other)
    {
        return this.Url.Equals(other.Url);
    }

    #endregion
} 
```

现在您继续使用您的代码，稍作修改：

```
string baseUrl = "http://localhost/myapp";

case NewCourseRequestView.Administrator:
    if (access.Administrator)
    {
        UserTypeLabel.Text = "Administrator Details:";

        AdministratorMenuList.Items.Add(new UrlText(baseUrl + "/viewunapproved.aspx", "View Un-Approved Requests"));
        adminContent.Visible = true;
    }
    break;

case NewCourseRequestView.Requestor:
    if (access.Requestor)
    {
        UserTypeLabel.Text = "Requester Details:";

        RequestorMenuList.Items.Add(new UrlText(baseUrl + "/RequestCourse.aspx","Request A New Course"));
        RequestorMenuList.Items.Add(new UrlText(baseUrl + "/viewNewRequest.aspx","View My New Course Requests"));
        requestContent.Visible = true;
    }
    break; 
```

最后，每当您想要合并集合时，请执行以下简单操作：

```
public static List<UrlText> MergeLists(List<UrlText> listAdmin, List<UrlText> listUser)
{
    List<UrlText> result = new List<UrlText>();
    foreach (UrlText myMenuItem in listAdmin)
    {
        result.Add(myMenuItem);
    }

    foreach (UrlText myMenuItem in listUser)
    {
        if (!result.Contains(myMenuItem))
            result.Add(myMenuItem);
    }

    return result;
} 
```

并与它一起使用（从接口实现的 equals 方法允许我们正确使用列表的 Contains 方法）：

```
mergedList = MergeLists(AdministratorMenuList, RequestorMenuList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T23:34:00.737

我建议你先从设计开始，不管你使用什么语言。想象一下，您需要再添加一个具有不同菜单项集的用户类型（例如，“Guest”）。那需要做什么呢？添加一个“if”语句，基本上是复制粘贴。这一点都不好。现在想象一下当你有 10 种用户类型时会发生什么。你的 switch-case 语句将变成巨大的怪物，团队中的每个人（甚至你）都会害怕在那里添加新项目或更改现有项目。

好吧，那很伤心，让我们现在玩得开心:)

理想情况下，您的“客户端”代码（我想您将放入 Page_Load 方法中）将只有一行：

```
protected void Page_Load(object sender, EventArgs e){
    BuildMenu();
} 
```

在您的方法中只有一行并且“神奇地”整理所有内容是多么酷。

假设我们有某种策略来管理我们的用户类型的可用项目。基本界面非常简单：

```
public abstract class MenuItemsPolicy{

    public abstract List<MenuItem> GetMenuItems();

    protected virtual MenuItem CreateMenuItem(string text, string url){
        //add parameter checks, etc.
        MenuItem item = new MenuItem();
        item.Text = text;
        item.NavigateUrl = url;
        return item;
    }
} 
```

目前，我们有两种用户类型，所以我们将有两种实现。请求者：

```
public class RequestorMenuItems : MenuItemsPolicy{
    public override List<MenuItem> GetMenuItems(){
        return new List<MenuItem>(){
            CreateMenuItem("Request A New Course", "~/Courses/RequestNewCourse.aspx"),
            CreateMenuItem("View My New Course Requests", "~/Courses/ViewMyCourseRquests.aspx")
        };
    }
} 
```

还有一个管理员（注意“合并”在哪里）

```
public class AdministratorMenuItems : MenuItemsPolicy{
    public override List<MenuItem> GetMenuItems(){
        List<MenuItem> resultingMenuItems = (new RequestorMenuItems()).GetMenuItems();
        resultingMenuItems.Add(CreateMenuItem("View Un-Approved Requests", "~/Administration/ViewUnAprroved.aspx"));
        return resultingMenuItems;
    }
} 
```

如您所见，我们检索请求者的项目，然后在那里再添加一项。如果将来需要更改，您的客户端/调用代码将不了解实现细节，因为您依赖于抽象实体。这意味着您不需要更改客户端/调用代码，规则将被更改；或者如果将来需要更改特定用户类型的可用链接。

为了简化示例，我将枚举用于用户类型：

```
public enum UserAccessType{
    Requestor = 0,
    Administrator = 1
} 
```

现在，让我们看一下实现。我在页面上放置了一个简单而标准的 asp.net 菜单控件：

```
<form id="form1" runat="server">
    <asp:menu runat="server" Id="mainMenu"></asp:menu>
<div> 
```

这是“代码隐藏”：

```
public partial class _Default : System.Web.UI.Page{

    //We will initialize this variable a bit later 
    //for example from URL parameter ?userType=1 or something like that
    private UserAccessType _currentUserAccess;

    //Ideally, dictionary should be a member of a class
    //I left a simple dictionary just to avoid over-complicaation
    private readonly Dictionary<UserAccessType, MenuItemsPolicy> _userMenuItems = new Dictionary<UserAccessType, MenuItemsPolicy>();

    protected override void OnInit(EventArgs e){
        //Associating our user types with Menu Items
        _userMenuItems.Add(UserAccessType.Administrator, new AdministratorMenuItems());
        _userMenuItems.Add(UserAccessType.Requestor, new RequestorMenuItems());

        //Init the Current User / Access Type. For example, you can read the value from Request["UserType"]
        //Here I've just assigned a value
        _currentUserAccess = UserAccessType.Administrator;

        base.OnInit(e);
    }

    protected void Page_Load(object sender, EventArgs e){
        BuildMenu();
    }

    private void BuildMenu(){
        mainMenu.Items.Clear();
        var menuItems = GetMenuItems();
        foreach(var item in menuItems){
            mainMenu.Items.Add(item);
        }
    }

    private List<MenuItem> GetMenuItems(){
        MenuItemsPolicy currentPolicy = _userMenuItems[_currentUserAccess];
        return currentPolicy.GetMenuItems();
    }
} 
```

我希望，上面的例子回答了你的问题。当然，这个例子并不理想。但是，它有助于保持您的代码相对干净和可维护。

PS我确实建议你阅读这篇文章： http: [//objectmentor.com/resources/articles/Principles_and_Patterns.pdf](http://objectmentor.com/resources/articles/Principles_and_Patterns.pdf)

请参阅 OCP 示例 - 您会看到它与您的情况有多接近。

谢谢阅读 ：）

# python - 无法让 Python 从 SPSS 语法运行

> ID：10181961
> 
> 赞同：2
> 
> 时间：2012-04-16T21:27:07.303
> 
> 标签：python, spss

我安装了 Python 2.7.2 和 Python SPSS 插件，但是当我尝试从 SPSS 中使用 Python BEGIN / END 运行一个非常简单的语法时，我在输出窗口中得到的只是带有代码的日志行

我正在尝试运行以下

```
BEGIN PROGRAM PYTHON.
import spss
print "Hello world"
END PROGRAM. 
```

这就是输出窗口所说的：

```
BEGIN PROGRAM PYTHON.
import spss
print "Hello world"
END PROGRAM. 
```

我希望输出窗口说：

```
Hello world 
```

我没有看到任何错误或任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:40:56.493

我对 SPSS 的 R 扩展有很多问题，但仍未完全解决。
无论如何，该语句应该允许您查看代码的结果，因为它应该显示“生成的语法”：

```
SET PRINTBACK ON MPRINT ON
BEGIN PROGRAM PYTHON.
import spss
print "Hello World"
END PROGRAM. 
```

理论上应该在输出查看器中打印“Hello World”

我在[手册](ftp://public.dhe.ibm.com/software/analytics/spss/documentation/statistics/20.0/en/pythonplugin/Manuals/Python_Integration_Package_for_IBM_SPSS_Statistics.pdf)中检查了它，它应该可以工作。

# javascript - 如何覆盖 Google 可视化的包含维度？

> ID：10181967
> 
> 赞同：1
> 
> 时间：2012-04-16T21:27:44.290
> 
> 标签：javascript, google-visualization

我正在尝试使用 Google Visualizations 编写条形图。

[https://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)

条形图是动态生成并多次更改的。

Google Visualizations 似乎无法检测我通过 jQuery 动态附加的 div 元素的尺寸。因此，我想将条形图的尺寸硬编码到我输入 Google Visualizations 的选项中。

我怎么做？

我已经尝试过这些选项。

```
var options = {
    title: 'Comparing Kangeroos and Wallabies',
    vAxis: {title: 'Factors',  titleTextStyle: {color: 'red'}},
    legend: 'bottom',
    chartArea.width: '400px',
    fontName: 'Arial Narrow'
}; 
```

然而，Chrome Web Developer 只是注意到“chartArea.width”中有一个意想不到的时期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:39:03.817

尝试在您提供的[页面](https://developers.google.com/chart/interactive/docs/gallery/barchart#Configuration_Options)`chartArea:{width:400}`中的表格中的 chartArea 示例中显示。

编辑：更改为数字，因为它说“一个简单的数字是以像素为单位的值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:31:11.947

该示例显示：

```
title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Cups"} 
```

所以尝试“宽度”而不是“chartArea.width”

# c# - 复制粘贴代码中的错误：找不到类型或命名空间

> ID：10181969
> 
> 赞同：0
> 
> 时间：2012-04-16T21:27:49.493
> 
> 标签：c#

在尝试实现两点之间的查找路线时，我使用[了这篇文章](http://www.c-sharpcorner.com/UploadFile/cd80b9/finding-route-between-two-locations-in-windows-phone-7-using/)，但它产生了错误：

> 找不到类型或命名空间名称“findroute”（您是否缺少 using 指令或程序集引用？）

```
using findroute.geocodeservice;
  private void Geocode(string strAddress, int waypointIndex)
    {
        // Here we create the service variable and set the callback method using the GeocodeCompleted property.
        findroute.geocodeservice.GeocodeServiceClient geocodeService = new findroute.geocodeservice.GeocodeServiceClient("BasicHttpBinding_IGeocodeService");
        geocodeService.GeocodeCompleted += new EventHandler<findroute.geocodeservice.GeocodeCompletedEventArgs>(geocodeService_GeocodeCompleted);
        // Here we Set the credentials and the geocode query,which could be an address or location.
        findroute.geocodeservice.GeocodeRequest geocodeRequest = new findroute.geocodeservice.GeocodeRequest();
        geocodeRequest.Credentials = new Credentials();
        geocodeRequest.Credentials.ApplicationId = ((ApplicationIdCredentialsProvider)map1.CredentialsProvider).ApplicationId;
        geocodeRequest.Query = strAddress;
        // Now Making the asynchronous Geocode request, using the 'waypoint index' as
        //   the user state to track this request and allow it to be identified when the response is returned.
        geocodeService.GeocodeAsync(geocodeRequest, waypointIndex);
    } 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T21:35:26.797

您是否按照说明进行操作？

> *   转到解决方案资源管理器
> *   还要添加一个服务引用--> 右键单击​​引用
>     
>     
> *   添加服务参考
>     
>     
> *   在地址栏中输入 - `http://dev.virtualearth.net/webservices/v1/routeservice/routeservice.svc/mex`。这是为了在应用程序中使用 Route 相关的类。将此服务引用命名为`routeservice`.
>     
>     
> *   添加另一个服务引用`http://dev.virtualearth.net/webservices/v1/geocodeservice/geocodeservice.svc/mex`。这是为了在应用程序中使用 Geocode 相关的类。将此服务引用命名为`geocodeservice`.

*给出的实际*名称可能`findroute.routeservice`不仅仅是`routeservice`，但这基本上就是它要寻找的 - 使用您使用的任何名称相应地调整您的代码。

# jquery - jQuery preventDefault 停止序列化和后续的 ajax 调用

> ID：10181974
> 
> 赞同：1
> 
> 时间：2012-04-16T21:28:16.690
> 
> 标签：jquery, ajax, forms, serialization, submit

我有一个 php 页面，上面有多个表单，我希望 jquery 在单击提交后隐藏每个表单（不刷新页面）。每次创建 php 页面时，表单的 id 都是动态生成的并且是唯一的。

如果我不使用`preventDefault`，那么下面的脚本会提交数据，但它会刷新页面（我不想要）。如果我使用`preventDefault`，表单仍然提交，但没有数据（`serialize`似乎不起作用）。

```
<script>
$(document).ready(function() {
    $(".connection").click(function(e) {
        e.preventDefault();
        var data = $(this).serialize();
        var element = $(this);
        var connectid = element.attr("id");
        $.ajax({
            url: "/beta/membersarea.php",
            type: "POST",
            cache: false,
            data: data,
            success: function(data) {
                $("#connected_" + connectid).hide();
            }
        });
    });
});​   
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:30:20.880

`$(this)`在您的代码中是提交按钮，而不是表单...... `this`在 jQuery 处理程序中是处理程序附加到的 DOM 元素。

从此改变：

```
$(".connection").click 
```

对此：

```
$("form").submit(function(e) { 
```

**完整代码：**

```
$(document).ready(function() {
    $("form").submit(function(e) {
        e.preventDefault();
        var $element = $(this);
        var data = $element.serialize();
        $.ajax({
            url: "/beta/membersarea.php",
            type: "POST",
            cache: false,
            data: data,
            success: function(data) {
                $element.hide();
            }
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:31:47.767

preventDefault 是为了阻止默认操作，在这种情况下是正常的表单提交。我猜你的问题是你没有序列化正确的元素（表单）。尝试这个

`$(this)`表示当前项目。当您在提交按钮单击中访问 $(this) 时，它指的是表单中的提交按钮元素。不是持有提交按钮的表单。

```
$(document).ready(function () {
    $(".connection").click(function(e) {
        e.preventDefault();
        var data = $("form").serialize();
        var element = $(this);
        var connectid = element.attr("id");
        $.ajax({
            url: "/beta/membersarea.php",
            type: "POST",
            cache: false,
            data: data,
                success: function(data)
                {
                $("#connected_"+connectid).hide();
                }
              });
      });    
}); 
```

假设`connection`是提交按钮的类名。

# iphone - 试图找到一种比 RegEX 更快的方法来在 NSString 中查找 URL ...有什么想法吗？

> ID：10181977
> 
> 赞同：2
> 
> 时间：2012-04-16T21:28:40.627
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个`NSString`来自一个 37014 个字符长的 HTML 页面，其中散布着大约 20 个 URL。我使用此代码查找 URL 并将它们放在`NSArray`：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*\\.(?:jpg|gif|png))(?:\\?([^#]*))?(?:#(.*))?"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];
NSArray *matches = [regex matchesInString:final
                                  options:0
                                    range:NSMakeRange(0, [final length])]; 
```

问题在于，即使在 iPhone 4S 上，代码也需要 5 秒才能执行。一页太慢了……我需要浏览 20 个 HTML 页面！

有更快的方法吗？也许`NSScanner`或`NSRange`？有人有什么创意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T22:09:35.537

用.查看[NSDataDetector](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)`NSTextCheckingTypeLink`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T22:25:25.157

你的正则表达式有点极端。对于您可能确定不匹配的东西，它不会很快失败。从粗略的角度来看，您似乎正在对整个字符串进行几乎 N^2 次搜索。您应该尽可能早地消除匹配项。

您真的希望您的 URL 以非单词边界开始吗？

您的正则表达式试图过于笼统。分析您的数据，看看您是否真的希望解析格式如此自由的 URL。最后，你最好使用几个早期失败的正则表达式，而不是一个复杂到几乎匹配所有内容的正则表达式。

此外，请确保您在下载数据的后台线程中执行此操作。与下载相比，您的搜索应该不会花很长时间 - 虽然搜索 37k 字节需要 5 秒......我几乎可以用我的眼睛做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T00:37:58.567

AutoHyperlinks (https://bitbucket.org/sholt/autohyperlinks2/overview) 是一个非常出色的库。

# asp.net-mvc - @HtmlActionLink 可以应用于这种情况还是我需要使用其他东西？

> ID：10181981
> 
> 赞同：1
> 
> 时间：2012-04-16T21:29:13.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个 ActionResult Details()

```
// RETREIVE THE INDIVIDUAL DETAILS SHOWS
    public ActionResult Details(int id)
    {
        var item = from s in db.Shows.Where(si => si.ShowId == id) select s;

        return View(item);
    }
} 
```

更新后的 ul 现在如下：

```
<div id = "browseShow">  <ul>
@foreach (var item in Model)
{
    <li class = "lihead">
    @item.Title
    </li>
    <li class = "lihead">
    @item.Director.Name
    @Html.ActionLink((string)item.Director.Name, "Index" "Director", new { director = item.Director.Name }, null)
    </li>
    <li>
    <i>@item.Synopsis</i>
    </li> 
    <li class = "lihead">
    Price per ticket £
    @item.Price
    </li>        
} 
```

我已经更新了 index 方法来接收一个字符串：

```
 public ActionResult Index(string director)
    {
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:34:01.477

您使用了错误的重载`Html.ActionLink`

试试这个

```
@Html.ActionLink(item.Director.Name.ToString(), "Index", "Director", new { director = item.Director.Name }, null) 
```

现在，您将 RouteValues 作为 HtmlAttributes 传递。最后的额外空值将调用正确的空值。

原来的帖子被删除了，但是你也在`director`属性下传入了导演姓名，但是你的方法正在接收一个`int id`. 你也需要解决这个问题。

# php - 根据数据库字段显示图像

> ID：10181983
> 
> 赞同：0
> 
> 时间：2012-04-16T21:29:33.857
> 
> 标签：php, mysql

我有一个应用程序系统，在我的摘要页面（myaccount）上，我有一个用户必须填写的页面列表。但是我想在每个链接旁边显示一个图像（默认为十字）但是当用户保存它时特定页面和数据库字段“完成”从 0 变为 1，图像应更改为我的刻度图像。意味着该页面已完成。如果有人可以提供帮助，那就太好了。我还在学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:40:55.030

您的问题不完整，也没有具体说明您的问题。我假设你需要知道如何去做。在这种情况下，您可能会执行以下操作，

1.  一旦用户保存页面，您就会将该信息存储在某种数据库中，该信息将告诉您要显示哪个图像。

2.  当您打开主页时，只需转到数据库并检查该页面的记录是否存在于数据库中。如果确实如此，则显示勾号，否则显示交叉。

**更新：**

您将运行一个选择查询。例如。您的表是 PAGE，页面名称是“page1”（或任何其他唯一标识该页面的字段。）您的查询将类似于，

“从 PAGE 中选择完成，其中 Unique_Field = 'unique_page_field'”

然后你会有一个 if 检查，检查 if complete == 1 然后显示勾号，否则显示交叉。

如果你有一个非常大的页面集合，那么你可以运行一个查询，例如 SELECT complete、Unique_Field From PAGE，而不是为每个页面访问数据库，对于每个页面，你只需检查这个集合中的给定记录。因此，如果给定页面在集合中，则显示刻度，否则显示交叉。

**更新 IF 语句：** 假设您将采用第一种方法：

1.  您运行了查询：“SELECT complete From PAGE where Unique_Field = 'unique_page_field'”

现在你有了 $isComplete 变量中的值，这就是你将在 HTML 端代码中执行的操作，

```
<img src='<?php if($isComplete) echo "tick.jpg"; else echo "cross.jpg"; ?>' /> 
```

确保您的图像路径正确。

# jboss - Web 应用程序不会加入 Infinispan 集群

> ID：10181986
> 
> 赞同：3
> 
> 时间：2012-04-16T21:29:41.800
> 
> 标签：jboss, jar, war, infinispan

我最近一直在玩 Infinispan，以前没有使用过 Infinispan 的经验。

我遇到了一个有趣的问题，我想知道是否有人能够对此有所了解。

我有一个独立的 Java 应用程序 (GridGrabber.jar)，它捆绑了 Infinispan jar，并有一个类来添加/删除和列出网格中的项目。在应用程序中，我创建`CacheManager`如下：

```
DefaultCacheManager m = new DefaultCacheManager("cluster.xml"); 
```

该应用程序在命令行上运行`java -jar GridGrabber.jar`并且工作正常，当我在终端启动两个实例时，它们都聚集在一起，我可以从两个节点看到网格的内容：

```
Sam@macbook $ java -jar GridGrabber.jar -Djava.net.preferIPv4Stack=true -Djgroups.bind_addr=127.0.0.1
Apr 16, 2012 9:50:04 PM org.infinispan.remoting.transport.jgroups.JGroupsTransport start
INFO: ISPN000078: Starting JGroups Channel
Apr 16, 2012 9:50:04 PM org.infinispan.remoting.transport.jgroups.JGroupsTransport buildChannel
INFO: ISPN000088: Unable to use any JGroups configuration mechanisms provided in properties {}. Using default JGroups configuration!
Apr 16, 2012 9:50:05 PM org.jgroups.logging.JDKLogImpl warn
WARNING: receive buffer of socket java.net.DatagramSocket@bc794cc was set to 20MB, but the OS only allocated 65.51KB. This might lead to performance problems. Please set your max receive buffer in the OS correctly (e.g. net.core.rmem_max on Linux)
Apr 16, 2012 9:50:05 PM org.jgroups.logging.JDKLogImpl warn
WARNING: receive buffer of socket java.net.MulticastSocket@731de9b was set to 25MB, but the OS only allocated 65.51KB. This might lead to performance problems. Please set your max receive buffer in the OS correctly (e.g. net.core.rmem_max on Linux)
Apr 16, 2012 9:50:06 PM org.infinispan.remoting.transport.jgroups.JGroupsTransport viewAccepted
INFO: ISPN000094: Received new cluster view: [Samuel-Weavers-MacBook-Pro-62704|1] [Samuel-Weavers-MacBook-Pro-62704, Samuel-Weavers-MacBook-Pro-3360]
Apr 16, 2012 9:50:06 PM org.infinispan.remoting.transport.jgroups.JGroupsTransport startJGroupsChannelIfNeeded
INFO: ISPN000079: Cache local address is Samuel-Weavers-MacBook-Pro-3360, physical addresses are [fe80:0:0:0:e2f8:47ff:fe06:109a%5:51422]
Apr 16, 2012 9:50:06 PM org.jgroups.logging.JDKLogImpl warn
WARNING: Samuel-Weavers-MacBook-Pro-3360: not member of view [Samuel-Weavers-MacBook-Pro-62704|2]; discarding it
Apr 16, 2012 9:50:06 PM org.infinispan.factories.GlobalComponentRegistry start
INFO: ISPN000128: Infinispan version: Infinispan 'Brahma' 5.1.2.FINAL
Apr 16, 2012 9:50:06 PM org.infinispan.jmx.CacheJmxRegistration start
INFO: ISPN000031: MBeans were successfully registered to the platform mbean server.
Apr 16, 2012 9:50:12 PM org.infinispan.remoting.transport.jgroups.JGroupsTransport viewAccepted
INFO: ISPN000093: Received new, MERGED cluster view: MergeView::[Samuel-Weavers-MacBook-Pro-3360|3] [Samuel-Weavers-MacBook-Pro-3360, Samuel-Weavers-MacBook-Pro-62704], subgroups=[Samuel-Weavers-MacBook-Pro-62704|1] [Samuel-Weavers-MacBook-Pro-3360], [Samuel-Weavers-MacBook-Pro-62704|2] [Samuel-Weavers-MacBook-Pro-62704] 
```

现在，在这里它变得有趣。我还有一个部署在 AS7 上的 Web 应用程序（servlet + JSP），其目的是提供进入网格的数据的实时更新网页。servlet 调用与 GridGrabber 基本相同的代码并使用相同的 cluster.xml。

当它启动时，一切都部署好了，但是由于某种原因，它没有拾取网格中的其他节点，尽管它们都在同一台机器上运行并且互相看到没有问题。部署消息是：

```
 17:06:16,889 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
17:06:17,107 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
17:06:17,155 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
17:06:17,972 INFO  [org.xnio] XNIO Version 3.0.3.GA
17:06:17,972 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
17:06:17,981 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
17:06:17,990 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
17:06:18,006 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
17:06:18,013 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
17:06:18,017 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
17:06:18,038 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
17:06:18,062 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
17:06:18,070 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
17:06:18,077 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
17:06:18,103 INFO  [org.jboss.as.security] (MSC service thread 1-8) JBAS013100: Current PicketBox version=4.0.7.Final
17:06:18,121 INFO  [org.jboss.as.connector] (MSC service thread 1-3) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
17:06:18,134 INFO  [org.jboss.as.naming] (MSC service thread 1-4) JBAS011802: Starting Naming Service
17:06:18,173 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-4) JBAS015400: Bound mail session [java:jboss/mail/Default]
17:06:18,241 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-7) JBoss Web Services - Stack CXF Server 4.0.2.GA
17:06:18,290 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
17:06:18,407 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-7) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
17:06:18,802 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-7) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
17:06:18,885 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-7) JBAS015012: Started FileSystemDeploymentService for directory /Users/Sam/Downloads/jboss-as-7.1.1.Final/standalone/deployments
17:06:18,893 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found TwitterWebApp.war in deployment directory. To trigger deployment create a file called TwitterWebApp.war.dodeploy
17:06:18,894 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found SBTwitterStreamGui.war in deployment directory. To trigger deployment create a file called SBTwitterStreamGui.war.dodeploy
17:06:18,920 INFO  [org.jboss.as.remoting] (MSC service thread 1-5) JBAS017100: Listening on localhost/127.0.0.1:4447
17:06:18,920 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on /127.0.0.1:9999
17:06:19,018 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990
17:06:19,019 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 2479ms - Started 133 of 208 services (74 services are passive or on-demand)
17:06:19,031 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of "TwitterWebApp.war"
17:06:19,031 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "SBTwitterStreamGui.war"
17:06:19,426 INFO  [org.jboss.web] (MSC service thread 1-7) JBAS018210: Registering web context: /SBTwitterStreamGui
17:06:20,267 INFO  [org.jboss.web] (MSC service thread 1-3) JBAS018210: Registering web context: /TwitterWebApp
17:06:20,313 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "TwitterWebApp.war"
17:06:20,313 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "SBTwitterStreamGui.war"
17:06:23,399 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (http-localhost-127.0.0.1-8080-1) ISPN000078: Starting JGroups Channel
17:06:23,400 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (http-localhost-127.0.0.1-8080-1) ISPN000088: Unable to use any JGroups configuration mechanisms provided in properties {}. Using default JGroups configuration!
17:06:23,805 WARN  [org.jgroups.protocols.UDP] (http-localhost-127.0.0.1-8080-1) receive buffer of socket java.net.DatagramSocket@4ad6be89 was set to 20MB, but the OS only allocated 65.51KB. This might lead to performance problems. Please set your max receive buffer in the OS correctly (e.g. net.core.rmem_max on Linux)
17:06:23,807 WARN  [org.jgroups.protocols.UDP] (http-localhost-127.0.0.1-8080-1) receive buffer of socket java.net.MulticastSocket@7bb28246 was set to 25MB, but the OS only allocated 65.51KB. This might lead to performance problems. Please set your max receive buffer in the OS correctly (e.g. net.core.rmem_max on Linux)
17:06:26,824 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (http-localhost-127.0.0.1-8080-1) ISPN000094: Received new cluster view: [Samuel-Weavers-MacBook-Pro-102|0] [Samuel-Weavers-MacBook-Pro-102]
17:06:26,946 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (http-localhost-127.0.0.1-8080-1) ISPN000079: Cache local address is Samuel-Weavers-MacBook-Pro-102, physical addresses are [10.36.5.166:64952]
17:06:26,955 INFO  [org.infinispan.factories.GlobalComponentRegistry] (http-localhost-127.0.0.1-8080-1) ISPN000128: Infinispan version: Infinispan 'Brahma' 5.1.2.FINAL
17:06:26,956 WARN  [org.infinispan.config.TimeoutConfigurationValidatingVisitor] (http-localhost-127.0.0.1-8080-1) ISPN000148: Invalid <transport>: distributedSyncTimout value of 240000\. It can not be higher than <stateRetrieval>:timeout which is 120000
17:06:27,045 INFO  [org.infinispan.jmx.CacheJmxRegistration] (http-localhost-127.0.0.1-8080-1) ISPN000031: MBeans were successfully registered to the platform mbean server.
17:06:27,061 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Cache Size: 0
17:06:27,062 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Cluster Name: demoCluster
17:06:27,063 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Cluster Size: 1
17:06:27,063 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Cluster Members: [Samuel-Weavers-MacBook-Pro-102]
17:06:27,064 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) Cache Manager: org.infinispan.manager.DefaultCacheManager@3c818c4@Address:Samuel-Weavers-MacBook-Pro-102 
```

有谁知道是否有原因导致 AS7 部署看不到网格中的其他节点？在我看来，它应该可以工作，因为它们都在寻找相同的集群名称（demoCluster）并且它们都使用相同的 cluster.xml。cluster.xml 如下：

```
<infinispan
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="urn:infinispan:config:5.1 http://www.infinispan.org/schemas/infinispan-config-5.1.xsd"
      xmlns="urn:infinispan:config:5.1">

   <global>
      <transport clusterName="demoCluster"/>
      <globalJmxStatistics enabled="true"/>
   </global>

   <default>
      <jmxStatistics enabled="true"/>
      <clustering mode="distribution">
         <hash numOwners="2" rehashRpcTimeout="120000"/>
         <sync/>
      </clustering>
   </default>
</infinispan> 
```

我从部署消息中注意到的一件事是，Web 应用程序似乎使用了 ipv4 地址，而 jar 似乎使用了带有 JGroups 的 ipv6 地址，但我不确定这是否是根本原因。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:59:28.223

我似乎通过执行以下操作解决了这个问题：

我对 JGroups ipv4/ipv6 地址的看法是正确的，因此我通过提供以下 JVM 参数来强制独立应用程序使用 IPv4：`-Djava.net.preferIPv4Stack=true`

这里需要注意的一件事 - 我从终端运行独立 jar，并且 Web 应用程序正在从 Eclipse 中部署到 AS7 上。从终端运行 jar 时传递 JVM 参数不成功。但是，也可以从 Eclipse 内部运行应用程序，并在运行配置“运行”菜单->“运行配置”-> 在 Java 应用程序下添加新的（或编辑现有的）-> 参数-> VM 参数中为其提供 JVM 参数-> 将preferIPv4stack 参数粘贴到框中。

现在，当在 Eclipse 中同时运行独立应用程序和 Web 应用程序时，它们应该加入同一个集群并开始相互发送消息。

附带说明-在说“消息已删除-发件人不在窗口中”之后，我遇到了 JGroups 错误。经过进一步调查，事实证明，连接到（公司）VPN 导致消息被丢弃。一旦我关闭 VPN，它就开始完美运行。

希望这可以帮助有同样问题的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:20:21.853

如果您想在 AS7 中部署 Infinispan 实例，我强烈建议您按照[此处](https://docs.jboss.org/author/x/JwBo)的指南进行操作。这样，如果您最终在 AS7 中使用其他集群服务，您就不需要保留一个单独的通信层来承担它的负担......等等。

# jquery - jQuery 选择器、.hide() UL 和 LI 元素

> ID：10181990
> 
> 赞同：0
> 
> 时间：2012-04-16T21:30:20.487
> 
> 标签：jquery, hide

我试图有一个可扩展/可折叠元素的类别索引，当用户单击一个类别时，它会以“catSel”的 id 重建。

问题是当用户点击一个`<li>`并且'catSel' id被添加到它时，它仍然会受到 .hide(); 的影响。我不希望这样。我应该注意，如果用户单击一个`<ul>`元素，它不会受到 .hide(); 的影响，我可以让它工作。

我真正想要的是，如果一个`<ul>`或其任何`<li>`元素的 id 为“catSel”，`<ul>`则不会受到 .hide(); 的影响。

这是代码和示例链接，您可以看到`<ul>`未展开但其中一个`<li>`孩子的 id 为“catSel”

编辑：抱歉解释不好，我仍然不能很好地解释它，但我想要它，以便如果它的一个`<ul>`或一个子`<li>`元素有一个`id="catSel"`它不会受到`$('ul.catList:not(.level-0) li:has(ul):not(#catSel)').children('ul').hide();`.

更新：

我添加了这段代码：

```
// If an elementwith its id="catSel" show all of its parents and also update the parents class

    $('#catSel').parents().show();
    $('#catSel').parents().removeClass('plusimageapply');
    $('#catSel').parents().addClass('minusimageapply'); 
```

现在它似乎正在按照我想要的方式工作。感谢所有试图理解我的问题并帮助我的人。

jsfiddle：http: [//jsfiddle.net/nNR9W/](http://jsfiddle.net/nNR9W/)

HTML：

```
<li>
<a href="foo">Catalog Section 4</a>
<ul class="level-1 catList"><li class="plusimageapply">
    <a href="foo">Quick Disconnects</a>
    <ul class="level-2 catList" style="display: none; ">
        <li id="catSel" class="selectedimage">
            <a href="foo">Foster</a></li>
        <li class="selectedimage">
            <a href="foo">General Pump</a>
        </li>
        <li class="selectedimage">
            <a href="foo">Hansen</a>
        </li>
        <li class="selectedimage">
            <a href="foo">Parker</a>
        </li>
    </ul>
    </li>
    <li class="selectedimage">
        <a href="foo">Quick Disconnects O-Rings</a>
    </li>
</ul> 
```

​ jQuery：

```
$(document).ready(function() {
// Set expandable UL elements class to 'plusimageapply'
$('ul.catList li:has(ul):not(#catSel)').addClass('plusimageapply');
// Set unexpandable LI elements class to 'selectedimage'
$('ul.catList li:not(:has(ul))').addClass('selectedimage');
// Set expanded UL elements class to 'minusimageapply'
$('ul.catList li#catSel:has(ul)').addClass('minusimageapply');

// Hide expandable UL elements that are not currently selected with ID 'catSel'
$('ul.catList:not(.level-0) li:has(ul):not(#catSel)').children('ul').hide();

// **** FIXED MY PROBLEM ****
// If an elementwith its id="catSel" show all of its parents and also update the parents class
$('#catSel').parents().show();
$('#catSel').parents().removeClass('plusimageapply');
$('#catSel').parents().addClass('minusimageapply');
// **************************

// Function for expand/collapse elements
$('ul.catList:not(.level-0) li:has(ul)').each(function(column) {
    $(this).click(function(event) {
        if (this == event.target) {
            if ($(this).is('.plusimageapply')) {
                $(this).children('ul').show();
                $(this).removeClass('plusimageapply');
                $(this).addClass('minusimageapply');
            }
            else {
                $(this).children('ul').hide();
                $(this).removeClass('minusimageapply');
                $(this).addClass('plusimageapply');
            }
        }
    });
});
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T23:32:41.070

这是我想出的，试图破译你的问题。希望能帮助到你。

编辑：新[http://jsfiddle.net/nNR9W/18/](http://jsfiddle.net/nNR9W/18/)

# javascript - dojox.image.Gallery，未定义的图像源

> ID：10181992
> 
> 赞同：0
> 
> 时间：2012-04-16T21:30:22.020
> 
> 标签：javascript, xpages, dojo, lotus-domino

我对道场有一点小问题。在我的 XPages 应用程序中，我想用 dojox.image.Gallery 实现一个 imageGallery。

我已经设置了所有内容，并且我的代理返回了一些 JSON 数据，目前看来是有效的。

它的结构是这样的：

{ items: [ { "thumb":"linktothumbnail", "large":"linktolargepic", "title":"whatever1", "link":"www.google.de" },{... 等等。 ..

图片的网址是有效的，检查它。

一切正常，没有错误消息，除了一个。“NetworkError: 404 Not Found - [http://www.myserver.de/path/to/database.nsf/undefined](http://www.myserver.de/path/to/database.nsf/undefined) ” 我的 Thumbnailpicker 的 src 属性是“undefined”

我已经爬网了，到目前为止还没有结果。

这是我在 XPage 中的代码：

```
<xp:this.resources>
        <xp:dojoModule name="dojox.image.Gallery"></xp:dojoModule>
        <xp:dojoModule name="dojo.data.ItemFileReadStore"></xp:dojoModule>
        <xp:dojoModule name="dojo.parser"></xp:dojoModule>
    </xp:this.resources>
    <xp:div id="Wrapper">
        Test

        <div jsId="imageItemStore" dojoType="dojo.data.ItemFileReadStore"
            url="#{javascript:return facesContext.getExternalContext().getRequestContextPath() + '/returnMemberDataJSON?OpenAgent';}">
        </div>  

        <div id="gallery1" dojoType="dojox.image.Gallery"  imageHeight="400" imageWidth="550">
            <script type="dojo/connect">
                var itemRequest = {
                    query: {},
                    count: 20
                };
                var itemNameMap = {
                    imageThumbAttr: "label",
                    imageLargeAttr: "name"
                };
                this.setDataStore(imageItemStore, itemRequest, itemNameMap);
            </script>
        </div>

    </xp:div> 
```

对我来说似乎有效。我已经通过主题实现了 dojo 样式，因为它似乎没有自动完成。所有需要的图片也被导入。

我的页面上的结果是，ThumbnailPicker 应该在的地方，什么都没有，在代码中有，但是什么都没有显示。在此之下，我得到了带有按钮的幻灯片框，但没有图片。

您是否知道可能出了什么问题，或者由于某种原因这在 XPages 中根本不起作用？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:44:38.833

它可能与

```
<script type="dojo/connect"> 
```

部分。我在 dojo/connect 事件中遇到了一些特定于浏览器的问题。相反，您可以尝试将以下 CS JavaScript 添加到 XPage/自定义控件的 onClientLoad：

```
dojo.addOnLoad(function() {
  var itemRequest = { query: {}, count: 20 };
  var itemNameMap = { imageThumbAttr: "label", imageLargeAttr: "name" };
  dijit.byId('gallery1').setDataStore(imageItemStore, itemRequest, itemNameMap);
}); 
```

# excel - 在 Excel 单元格中创建超链接？

> ID：10181995
> 
> 赞同：6
> 
> 时间：2012-04-16T21:30:45.023
> 
> 标签：excel, vba

是否可以在仅使用单元格文本的一部分作为可点击链接的 Excel 单元格中创建超链接？IE 下表模型是否代表可以在 Excel 2010 中轻松构建的东西？

[一个模型 http://dl.dropbox.com/u/14119404/misc/Microsoft%20Excel%20-%20Book1_2012-04-16_14-24-47.jpg](http://dl.dropbox.com/u/14119404/misc/Microsoft%20Excel%20-%20Book1_2012-04-16_14-24-47.jpg)

我知道整个单元格可以很容易地变成一个超链接，但据我所知，不是单元格的特定部分。

通过超链接，我也指的是

*   (a) 另一个牢房或，
*   (b) 网址。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T23:24:22.837

创建超链接后，您可以格式化单元格中的文本，以便只有感兴趣的单词带有下划线/蓝色。超链接仍然有效，但显然每个单元格仍然只能有一个链接，单击文本中的任何位置都会触发超链接。

例如：

![在此处输入图像描述](../Images/08b765981463694595c6c7b8552c5f82.png)

```
Sub Tester()

    Dim rng As Range

    Set rng = ActiveSheet.Range("A1")

    rng.Parent.Hyperlinks.Add Anchor:=rng, Address:="", SubAddress:= _
        "Sheet1!A10", TextToDisplay:="this is long text"

    With rng.Font
        .ColorIndex = xlAutomatic
        .Underline = xlUnderlineStyleNone
    End With

    With rng.Characters(Start:=9, Length:=4).Font
        .Underline = xlUnderlineStyleSingle
        .Color = -4165632
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T21:11:35.270

我需要链接到单元格中显示的文件名，所以这对我有用：

```
ActiveSheet.Hyperlinks.Add Anchor:=Cells(row, column), Address:=file.Path, TextToDisplay:=file.Path 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T21:38:56.900

这在 Excel 中是不可能的。超链接与整个单元格相关联。

如果您查看[Excel 超链接对象的文档](http://msdn.microsoft.com/en-us/library/bb242296%28v=office.12%29.aspx)，您会发现它与 Range 相关联。如果可以将超链接与单元格内的跨度相关联，则超链接对象将需要具有关联的 Range 和[Characters](http://msdn.microsoft.com/en-us/library/bb255882%28v=office.12%29.aspx)对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-09T02:15:52.040

上面的一个班轮非常有帮助......因为我是新手，我无法发表评论。所以这是我上面的变体，它采用工作表上的每一行并从行上的值构建一个 URL。

```
CHGRow = 3
Worksheets("Page 1").Select
Cells(CHGRow, 1).Select

Do Until Application.CountA(ActiveCell.EntireRow) = 0

    URLVal = "https://our_url_here?some_parameter=" & Cells(CHGRow, cNumber)
    URLText = Cells(CHGRow, cNumber)
    ActiveSheet.Hyperlinks.Add Anchor:=Cells(CHGRow, cURL), Address:=URLVal, TextToDisplay:=URLText

    CHGRow = CHGRow + 1
    Cells(CHGRow, 1).Select

Loop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-02T20:21:57.157

我只是将你的一行分成两行，合并你需要的列中的单元格，让它看起来是单行，当你到达需要超链接的单元格时，你把单词放在顶部的单元格上，然后下面单元格中的链接。作为一种非技术性的解决方法，它看起来不错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-01T17:30:26.337

这是我用来在 Excel 电子表格单元格中的较大文本块中创建超链接字符串的一个很棒的烟雾和镜像解决方案。注意——如果您的工作表有多个编辑器，则不建议这样做，因为除非您能提供足够的保护，否则超链接可能会与其单元格中的文本错位。此过程中描述了一种执行方式，但可能会限制贡献者可以执行的操作：

1.  在 Excel 电子表格中，假设您没有试图保护所有单元格不被编辑，请选择工作表中的所有单元格，然后从“主页”功能区或右键单击弹出菜单中选择“设置单元格格式”。在“保护”选项卡上，选中然后取消选中“锁定”复选框以确保所有单元格都已解锁。
2.  现在选择将包含链接的（第一个）单元格。
3.  复制（不要剪切）要显示为剪贴板链接的文本。
4.  单击电子表格中的任意位置（最好是未使用的区域），然后使用“形状”图标下拉菜单或“文本”图标从“插入”功能区插入一个文本框。大小和形状并不重要，只是近似链接文本的大小。
5.  将剪贴板内容粘贴到文本框中。
6.  右键单击文本框并选择链接以向其添加超链接，并指定链接目标，无论是当前文档中的位置还是 URL。
7.  选择链接文本并将其设置为您希望链接显示的格式，例如蓝色、下划线等，因为在文本框中这显然不会像在单元格中那样自动出现。
8.  再次右键单击文本框，然后选择设置形状格式。在“设置形状格式”面板中，执行以下操作以使文本周围的形状正确适合并消除空白和边框：
    (a) 在“填充和线条”面板（第一个图标）上，选择“无线条”选项。
    (b) 在“大小和属性”面板（第 3 个图标）上，将所有 4 个边距设置为零 (0.00")，取消选中“将文本环绕在形状中”复选框，并选中“调整形状以适合文本”文本框。
    (c) 在“属性”下，确保选择以下内容：
    * 移动但不使用单元格调整大小
    * 锁定
    * 锁定文本
9.  如果您需要在多个单元格或同一单元格内的多个位置出现相同的超链接（即使目标不同），请通过右键单击选择其（现在不可见）边框来克隆您完成所有这些工作的文本框（警告 - 一个左键单击现在会将您带到链接目标！），将其复制到剪贴板，然后根据需要多次按 Ctrl+V。
10.  右键单击文本框（或其中一个，如果您克隆了它）并将其拖动到要显示链接的单元格，将其直接放置在与您的超链接匹配的原始文本上，以便在视觉上覆盖它并替换它（原始文本用作间隔以为其腾出空间）。上述第 8 项中采取的步骤应防止其覆盖或剪切原始文本周围的任何文本或标点符号。
11.  选择该单元格，然后从“主页”功能区的“格式”菜单中，选择“锁定单元格”以防止其内容意外更改文本框并将其与其隐藏的相应文本错位。
12.  对您创建的链接文本框的每个附加副本重复步骤 10 和 11。如果其中任何一个需要不同的链接目标，只需右键单击该文本框的副本，选择“编辑链接”，然后更新目标。
13.  从“主页”功能区的“格式”菜单中，选择“保护工作表”。选中标有“保护工作表和锁定单元格的内容”的框。
14.  还要检查该对话框中的所有其他框（假设您没有尝试以任何这些方式限制用户），但以下内容除外：
    * 格式化单元格
    * 格式化列
    * 格式化行
    * 编辑对象
    不选中这四个复选框以保护链接的文本框不会被选中、删除、移动或与其基础文本不对齐。（注意：如果添加、删除或调整行或列的大小，它们应该已经与它们的基础单元格一起移动，但如果没有这种保护，如果它们自己的行或列被调整大小，它们仍然会受到影响。）
15.  如果您想添加密码，请立即添加。完成后，单击确定以应用保护。您可以稍后从“格式”菜单中选择“取消保护工作表”以执行任何必要的编辑，但如果链接单元格、列或行被编辑或调整大小，您可能需要重新定位链接文本框（es）如果它移动了基础文本。
16.  测试您的超链接，以及如果您尝试编辑包含的单元格或调整包含的列或行的大小以确保工作表已准备好共享，会发生什么情况！