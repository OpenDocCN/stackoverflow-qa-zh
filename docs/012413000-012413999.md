# StackOverflow 问答 12413000-12413999

# gdb - 为什么 64 位应用程序中的 rsp 为零？

> ID：12413002
> 
> 赞同：0
> 
> 时间：2012-09-13T19:00:18.163
> 
> 标签：gdb, x86-64

我正在使用 gdb 连接到正在运行的 64 位进程，当我检查信息寄存器时，rsp 始终为 0x0。

在 32 位中，esp 有一个我可以保存和恢复的值（在协作的非 pthread 线程之间切换时）。在 64 位中，无论出于何种原因，堆栈指针都为零。

# jquery - 改变 jCarousel 方向

> ID：12413008
> 
> 赞同：2
> 
> 时间：2012-09-13T19:00:25.777
> 
> 标签：jquery, carousel, jcarousel

我有一个激活自动滑动模式的 jCarousel。当我到达一个具体的幻灯片编号时，我想反转运动的方向。换句话说，轮播向右移动，我希望它在幻灯片的索引为 5 时返回（向左）。我可以获取幻灯片的索引并在它为 5 时启动一个函数，但我不知道如何让它回去。

你知道这是否可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-19T13:14:36.623

```
//From Left to Right

$('.jcarousel').jcarouselAutoscroll({
    target: '-=1'
});

//From right to Left

$('.jcarousel').jcarouselAutoscroll({
    target: '+=1'
}); 
```

`=1` 指示滑块的位置，`-/+`符号指示方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:02:20.520

您可以尝试使用该选项`scroll: -1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:04:28.347

你有没有尝试添加`wrap: 'last',`到你的初始化？ [看这里](http://sorgalla.com/projects/jcarousel/examples/static_auto.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-11T13:47:09.443

[完成这些指南后](http://sorgalla.com/jcarousel/docs/reference/configuration.html#rtl)

`li`将方向更改为`right`：

```
.jcarousel li {
    float: right;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T19:13:46.750

您必须`rtl: true`在选项中进行设置。

（rtl 代表从右到左，默认为 false）

# sql - SQL/Oracle 连接多个函数

> ID：12413014
> 
> 赞同：1
> 
> 时间：2012-09-13T19:00:57.220
> 
> 标签：sql, oracle

我有一个查询，它给了我行动的结果。现在，我想要做的是将这个结果分成两部分，对于我拥有的 2 个不同的用户组......

```
Select Sum(Actions) From
(
Select
Count(Create_Dtime) As Actions
From Player_Tapjoy
Where
Trunc(Create_Dtime) = To_Date('2012-sep-12','yyyy-mon-dd')
Union All
Select 
Count(Create_Dtime) As Actions
From Player_aux_pt
Where Site = 'AppCircle' And
Trunc(Create_Dtime) = To_Date('2012-sep-12','yyyy-mon-dd')
); 
```

当前查询中的两个表都有 player_id 标签。还有另一个名为 player_source 的表，其中每个 player_id 都有组 ID (1-100)。我想通过 player_id 将当前查询映射到 player_source 表，以便我只能包含特定的 group_id（比如 1、2、3、4 和 6）。有什么建议么？

我想在我的第一个查询中包含的 ID 来自查询：

```
Select Player_Id From Player_Source S Inner Join Feature_Group_Xref F 
On S.Group_Id=F.Group_Id
where f.feature_name = 'BC' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:08:52.107

由于您只想包含特定的组 ID，并且 player_source 表具有组 ID，因此您需要将 player_source 表连接到“主”表 - tapjoy 和 aux_pt。您必须在 UNION 的每个组件上执行此操作，因为您正在聚合结果并且在聚合后将无法过滤单个记录。您提供了获取 group_ids 的查询，因此从 tapjoy/aux_pt 到 feature_group_xref 只需要内部连接。

结果如下：

```
Select Sum(Actions) From
(
Select
Count(t.Create_Dtime) As Actions
From Player_Tapjoy t inner join player_source s on (t.player_id = s.player_id)
Inner Join Feature_Group_Xref F On (S.Group_Id=F.Group_Id and f.feature_name = 'BC')
Where Trunc(t.Create_Dtime) = To_Date('2012-sep-12','yyyy-mon-dd')
Union All
Select 
Count(a.Create_Dtime) As Actions
From Player_aux_pt a inner join player_source s on (a.player_id = s.player_id)
Inner Join Feature_Group_Xref F On (S.Group_Id=F.Group_Id and f.feature_name = 'BC')
Where a.Site = 'AppCircle' And
Trunc(a.Create_Dtime) = To_Date('2012-sep-12','yyyy-mon-dd')
) 
```

# eclipse - 在我的 Eclipse 插件绑定中找不到文件

> ID：12413016
> 
> 赞同：0
> 
> 时间：2012-09-13T19:01:01.923
> 
> 标签：eclipse, plugins

我正在开发我的第一个 Eclipse 插件。除其他外，该插件使用以下代码执行 XSLT 转换：

```
Bundle bundle = Activator.getDefault().getBundle();
IPath smrlSsPath = new Path("/addins/smrl/smrl4odf2shore.xslt");
URL smrlSsUrl = FileLocator.find(bundle, smrlSsPath, Collections.EMPTY_MAP);
File smrlStylesheet = new File(FileLocator.toFileURL(smrlSsUrl).toURI());
xsltSource = new StreamSource(smrlStylesheet);
transFact = TransformerFactory.newInstance();
trans = transFact.newTransformer(xsltSource);
trans.setParameter("smrl.file", smrlFile.getAbsolutePath());
trans.transform(xmlSource, new StreamResult(outputTempFile)); 
```

文件 smrl4odf2shore.xslt 包括其他 XSLT 文件：

```
<xsl:include href="odf2shore.xslt"/> 
```

这在开发过程中工作正常。不幸的是，当我导出插件并将其部署在 Eclipse 实例中时，会出现错误：

```
ERROR:  'C:\Programy\eclipse\configuration\org.eclipse.osgi\bundles\837\1\.cp\addins\smrl\odf2shore.xslt (The system cannot find the file specified)'
FATAL ERROR:  'Could not compile stylesheet'
javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet 
```

我检查了错误指定的路径，发现只有文件：smrl4odf2shore.xslt。样式表 (odf2shore.xslt) 中包含的文件不存在。我已经在 /plugins/ 目录中检查了我的插件的 JAR 并且两个文件都在那里，所以似乎该文件仅从 /bundles/ 目录中丢失（eclipse 仅移动了代码中提到的文件，而不是样式表中的文件）。

你能告诉我我应该怎么做才能让 eclipse 将所有文件从 JAR 移动到 /boundles/ 目录？

# java - 将 HTML 实体（如 &）转换为 Latex

> ID：12413024
> 
> 赞同：0
> 
> 时间：2012-09-13T19:01:16.370
> 
> 标签：java, html, encoding, utf-8, latex

我正在编写一个应用程序来使用 Java 和 JSOAP 从网站上抓取一些文章。该应用程序将文章的某些部分编译为 .tex ( [LaTeX](http://www.latex-project.org/) ) 文档，然后使用 PDFLatex 将其转换为 PDF。

一些页面包含 HTML 实体，如 & 或 "，这些在 PDF 转换过程中会导致错误。如何解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:14:43.300

[tex-exchange 上的这个问题](https://tex.stackexchange.com/questions/37126/how-can-i-map-html-named-entities-to-latex-commands)有一个指向[简洁转换列表](https://gist.github.com/1431606)的链接。列是（按顺序）：

1.  html 实体（忽略大小写），没有 the`&`和 the`;`
2.  对应的unicode字符
3.  相应的乳胶命令（如果可用）。没有`\`

以此列表为起点编写一些转换代码应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:12:27.343

HTML 使用*标签*来构造数据，标签由字符序列定义。这些标签以某些字符开头并包含某些字符，如果要使用分隔标签部分的字符之一，则需要使用[字符实体](http://www.w3schools.com/tags/ref_entities.asp)来表示它们。

这意味着这`&amp;`不是对单个字符进行某种奇怪的编码，它实际上是五个字符，它们组合起来是向 HTML 渲染器（如 Web 浏览器）发出的信号，即只`&`显示该字符。

Tex 是一种不同的野兽，它没有`&`与 HTML 一样使用“裸”的限制，因此在使用 Tex 处理此类数据之前，您需要使用常规字符对所有 HTML 字符实体进行字符串替换。

请注意，有两种*类型*的字符实体。一组包括“命名”实体，分别为 like`&gt;`和`&lt;`(`>`和`<`)，而第二组是“编号”实体。编号实体看起来像`&#32;`，本例中的“32”指的是 ISO-8859-1 字符代码（本例中为空格）。

# php - 如何防止 apache 在 URL 路径中使用单斜杠减少双斜杠？

> ID：12413030
> 
> 赞同：4
> 
> 时间：2012-09-13T19:01:38.470
> 
> 标签：php, apache, url, path

Apache 有一种非常讨厌的倾向，即用单斜杠替换 URL 中的双斜杠。

例子：

请求网址：`http://example.com/myscript.php/foo//bar`

当我看着

```
$_SERVER['PATH_INFO']; 
```

var，路径信息将显示为：

```
foo/bar 
```

代替

```
foo//bar 
```

有谁知道解决这个问题？我相信这在 apache 的功能中根深蒂固......我不知道是否有某种 apache 标志可以调整以禁用此行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-12T22:35:30.307

> `http://example.com/myscript.php/foo//bar`

这`/foo//bar`是实际文件名后面的*附加路径信息*。虽然 Apache 确实减少了 PATH_INFO 服务器变量（传递给相应的 PHP 超全局变量）中的多个斜杠，但 $_SERVER['PHP_SELF'] 变量中仍然可以使用原始 URL（带有多个斜杠）。

`PATH_INFO`因此，您可以执行以下操作，而不是通过变量访问路径信息：

```
$pathInfo = str_replace($_SERVER['SCRIPT_NAME'],'',$_SERVER['PHP_SELF']); 
```

这只是从 PHP_SELF 中删除 SCRIPT_NAME，留下*路径信息*（如果有）。您可以使用 REQUEST_URI 而不是 PHP_SELF，但这包括查询字符串，因此您需要检查这一点。

因此，给定上述请求，其中`SCRIPT_NAME`是“/myscript.php”并且`PHP_SELF`是“/myscript.php/foo//bar”，那么结果`$pathInfo`是“/foo//bar”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:04:23.660

它是解析 URI 的 RFC 标准的一部分，因此您无法更改它。

甚至您的浏览器可能会在将请求发送到远程服务器之前对 URI 进行规范化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T23:26:52.160

nginx 有一个 merge_slashes 指令，允许合并斜杠以匹配位置，并且默认为关闭，这意味着默认情况下它不会合并。如果 RFC 中指定了合并行为，那么 nginx 肯定不会遵循。

# jquery - 在 jQuery Ajax 选项卡中加载淘汰赛绑定

> ID：12413031
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:01:44.583
> 
> 标签：jquery, knockout.js, jquery-tabs

**问题：**在 AJAX 模式下使用 jQuery 选项卡时，我加载了一个 .html 文件，该文件在元素上和 .html 页面底部具有数据绑定。我声明我的视图模型并应用绑定。绑定没有错误地应用，但是，没有一个数据绑定正在工作。

```
$("#index-tabs").tabs('select', 3); 
```

**所以流程是：** Existing jQuery Tab Site -> 加载带有敲除绑定的 ajax tab .html 文件并在最后应用绑定 -> 不应用所有元素绑定。

任何人都知道为什么会发生这种情况？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:05:01.337

你的`ko.applyBindings`电话是什么样的？如果您的新 html 末尾有一个脚本来创建您的视图模型并调用`ko.applyBindings`，那么它会尝试将该新视图模型应用于整个页面。rootNode 的 applyBindings 有第二个参数。如果你不传入一个元素，那么它将 window.document.body 作为根。查看这个[jsFiddle](http://jsfiddle.net/danbueno/6hRaQ/)以获取将两个视图模型应用于两个不同元素的示例。

# c++ - 与 boost::interprocess 共享映射

> ID：12413034
> 
> 赞同：6
> 
> 时间：2012-09-13T19:02:01.270
> 
> 标签：c++, boost, map, shared-memory, boost-interprocess

我有一个可能很难解决的简单要求。我确实找到了一些[这样](https://stackoverflow.com/questions/8503834/boost-interprocess-map-with-int-and-string)或[这样](https://stackoverflow.com/questions/11842082/map-in-shared-memory)的线索，但我似乎无法轻松使用它们。前者甚至没有为我翻译成可构建的代码。我对 Boost 没有经验，只能自己写这个，但在我看来，这可能是一个常见的要求。

我也遇到过[Interprocess STL Map](http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Interprocess_STL_Map)，但我还不能将它组装成工作代码。

我在想`boost::interprocess`是去这里的路，除非我想从头开始创建一些共享内存映射。

我不关心便携性。我需要一个可以与 MS 编译器一起使用的解决方案，特别是 VS 2010 附带的那个。

[这张海报](https://stackoverflow.com/questions/8503834/boost-interprocess-map-with-int-and-string)似乎或多或少想要做我想做的事情，除了我需要将 GUID 映射到任意长度的二进制缓冲区（但 int 到字符串同样可以作为起点）。不幸的是，我无法干净地编译代码，甚至无法从实验开始。

另外我有两个担忧：A）是否可以自动（或至少可预测地）增长/缩小共享内存以适应分配需求和 B）假设一个进程创建映射，另一个进程如何“附加”到它？

我不介意解决方案是否需要多个共享“段”以满足分配需求。它不一定必须是单个整体共享内存块。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T18:51:03.020

这是我为学习共享内存中映射的使用而编写的最近的示例。它编译得如此可能，您可以尝试使用它来满足您的要求。

创建共享内存并将映射放入其中的服务器进程的代码：-

```
#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/containers/map.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <functional>
#include <utility>

int main ()
{
    using namespace boost::interprocess;

    // remove earlier existing SHM
    shared_memory_object::remove("SharedMemoryName");

    // create new 
    managed_shared_memory segment(create_only,"SharedMemoryName",65536);

    //Note that map<Key, MappedType>'s value_type is std::pair<const Key, MappedType>,
    //so the allocator must allocate that pair.
    typedef int    KeyType;
    typedef float  MappedType;
    typedef std::pair<const int, float> ValueType;

    //allocator of for the map.
    typedef allocator<ValueType, managed_shared_memory::segment_manager> ShmemAllocator;

    //third parameter argument is the ordering function is used to compare the keys.
    typedef map<KeyType, MappedType, std::less<KeyType>, ShmemAllocator> MySHMMap;

    //Initialize the shared memory STL-compatible allocator
    ShmemAllocator alloc_inst (segment.get_segment_manager());

    // offset ptr within SHM for map 
    offset_ptr<MySHMMap> m_pmap = segment.construct<MySHMMap>("MySHMMapName")(std::less<int>(), alloc_inst);

    //Insert data in the map
    for(int i = 0; i < 10; ++i)
    {
            m_pmap->insert(std::pair<const int, float>(i, (float)i));
    }

    return 0;
} 
```

附加到内存并访问映射数据的客户端进程的代码。

```
#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/containers/map.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <functional>
#include <utility>
#include <iostream>

int main ()
{
    using namespace boost::interprocess;

    try
    {

            managed_shared_memory segment(open_or_create, "SharedMemoryName",65536);

            //Again the map<Key, MappedType>'s value_type is std::pair<const Key, MappedType>, so the allocator must allocate that pair.
            typedef int    KeyType;
            typedef float  MappedType;
            typedef std::pair<const int, float> ValueType;

            //Assign allocator 
            typedef allocator<ValueType, managed_shared_memory::segment_manager> ShmemAllocator;

            //The map
            typedef map<KeyType, MappedType, std::less<KeyType>, ShmemAllocator> MySHMMap;

            //Initialize the shared memory STL-compatible allocator
            ShmemAllocator alloc_inst (segment.get_segment_manager());

            //access the map in SHM through the offset ptr                                                         
            MySHMMap :: iterator iter;
            offset_ptr<MySHMMap> m_pmap = segment.find<MySHMMap>("MySHMMapName").first;

            iter=m_pmap->begin();
            for(; iter!=m_pmap->end();iter++)
            {
                   std::cout<<"\n "<<iter->first<<" "<<iter->second;
            }
    }catch(std::exception &e)            
    {
            std::cout<<" error  " << e.what() <<std::endl;
            shared_memory_object::remove("SharedMemoryName");
    }
    return 0;
} 
```

客户端进程的代码解释了如何使用“名称”和偏移指针，其他进程可以附加和访问服务器进程在 SHM 中创建的 Map 内容。但是，在创建新的共享内存段时分配大小（此处为“65536”），我不确定是否可以缩小大小，尽管您可能可以创建更多的共享内存块来扩展 SHM ...

希望它有所帮助...

# javascript - 如何获取用户库中所有艺术家的列表？

> ID：12413035
> 
> 赞同：0
> 
> 时间：2012-09-13T19:02:00.393
> 
> 标签：javascript, spotify

我错过了 Spotify 中 Artits 的概述，例如 iTunes 提供的内容。现在我想知道脚本如何检索用户库中的所有艺术家？

下面的代码不这样做。建议非常感谢！

```
function getAllAlbums() {
    var albums = models.Library.albums;
    var imageHTML = document.getElementById('albumsList');

    for(i=0;i<albums.length;i++){
        var link = document.createElement('li');
        var a = document.createElement('a');
        a.href = albums[i].uri;
        link.appendChild(a);
        a.innerHTML = albums[i].name;
        imageHTML.appendChild(link);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T00:22:16.237

我不太确定您要复制哪些 iTunes 功能或您要尝试使用 HTML 做什么，但如果您只是在寻找艺术家列表，该[api](https://developer.spotify.com/technologies/apps/docs/beta/dcdebc652c.html)提供了一种访问它们的简单方法。

在用户库中创建所有艺术家的列表很简单：

```
artistArray = models.library.artists
artistNameArray = [];
for(var i=0; i<artistArray.length; i++){
    artistNameArray[i] = artistArray[i].data.name;
} 
```

# cordova - jQuery 移动多页 phonegap 应用程序

> ID：12413041
> 
> 赞同：2
> 
> 时间：2012-09-13T19:02:31.233
> 
> 标签：cordova, jquery-mobile

我想开发一个具有登录页面的 phonegap 应用程序，如果登录成功，用户可以看到#page1，根据在#page1 上输入的详细信息，用户可以转到#page2 或#page3。我怎样才能实现这样的场景？我也遇到了[这个链接，如果我正在实现'](https://stackoverflow.com/questions/8044491/structuring-a-phonegap-jquery-mobile-application) [sage](https://stackoverflow.com/users/462121/sage) '在那篇文章中使用的那种布局，我如何让我的 other.html 页面包含在我的应用程序中？

实现基于用户输入以编程方式显示/隐藏而不是单击超链接的多个页面的最佳方法是什么？那是我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:19:47.153

Jquery mobile 在多页转换中也做同样的事情显示隐藏的概念。你也可以用你自己的方式来做。那是你的愿望。

通常页面转换可以通过下面的例子在jquery mobile phonegap中完成，

```
<html>
<head>
<!-- HERE YOU CAN ADD ALL YOUR INCLUDES -->
<head>
<body>

<!-- This page will show first -->
<div data-role="page" id="index">

    <div data-role="header" data-position="inline" id="indexheader" >
        <h1>Page 1 Heading</h1>
    </div><!-- /header -->

    <div data-role="content">
        <h3>page Content</h3>
    </div><!-- /content -->

    <div data-role="footer"  data-position="fixed">
    <h3>Footer Text</h3>
    </div><!-- /footer -->

<!-- SECOND PAGE -->
<div data-role="page" id="pagetwo">

    <div data-role="header" data-position="inline" id="page2header" >
        <h1>Page 2 Heading</h1>
    </div><!-- /header -->

    <div data-role="content">
        <h3>page Content</h3>
    </div><!-- /content -->

    <div data-role="footer"  data-position="fixed">
    <h3>Footer Text</h3>
    </div>

<!-- THRIRD PAGE -->
<div data-role="page" id="pagethree">

    <div data-role="header" data-position="inline" id="page3header" >
        <h1>Page 3 Heading</h1>
    </div><!-- /header -->

    <div data-role="content">
        <h3>page Content</h3>
    </div><!-- /content -->

    <div data-role="footer"  data-position="fixed">
    <h3>Footer Text</h3>
    </div>
</div>
</body>
</html> 
```

您必须使用 javascript 事件显示第二或第三页。

根据条件，像这样加载您的页面，

```
$.mobile.changePage($('#pagetwo')); /*page navigation the particular where data shown*/
$("#index").trigger("pagecreate"); /*This is like a page refresh in jquery*/ 
```

# tomcat - niceeditor 中的 uri 变化

> ID：12413043
> 
> 赞同：0
> 
> 时间：2012-09-13T19:02:37.447
> 
> 标签：tomcat, nicedit

我在我的网络应用程序中使用 niceeditor 插件。现在，问题是插件正在将图像上传到这个默认位置 [http://i.imgur.com/][1]。但我想将这些图像存储到我们服务器上我想要的位置。我读了这篇文章[http://eaktadiur.wordpress.com/2012/03/19/change-nicedit-upload-file-path/](http://eaktadiur.wordpress.com/2012/03/19/change-nicedit-upload-file-path/)，但我无法理解将 nic_uploaded.php 文件放在哪里。我试图把它放在我的tomcat服务器的根目录下，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:04:25.953

我建议您下载/打开[fillder2](http://www.fiddler2.com)，这将允许您在执行上传操作时准确查看 nicEdit 试图查询的 URI。

如果它仍然要访问 imgur.com，那么您需要确保在 nicEdit.js 中的`nicURI`属性`nicUploadButton`已从`'http://api.imgur.com/2/upload.json'`.

如果上传成功找到您的 nic_upload.php 文件，那么您必须确保您的定义正确，`'NICUPLOAD_PATH'`并且`'NICUPLOAD_URI'`相关文件夹存在。如果这不能解决问题，请检查 fiddler 是否有错误消息（使用 Web 视图），这可能会导致解决。

希望这可以帮助！

# python - 复杂的语法 - Python

> ID：12413046
> 
> 赞同：7
> 
> 时间：2012-09-13T19:02:56.380
> 
> 标签：python, syntax

我对编程很陌生，很多概念都不懂。有人可以向我解释第 2 行的语法及其工作原理吗？不需要缩进吗？而且，我可以从哪里学到这一切？

```
string = #extremely large number

num = [int(c) for c in string if not c.isspace()] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T19:05:05.327

那是一个[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，一种创建新列表的简写。它在功能上等同于：

```
num = []
for c in string:
    if not c.isspace():
       num.append(int(c)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T21:03:13.663

*它的意思正是它所说*的。

```
num   =        [          int(                      c)

"num" shall be a list of: the int created from each c 
```

* * *

```
for   c                           in string

where c takes on each value found in string 
```

* * *

```
if        not                     c .isspace() ]

such that it is not the case that c is a space (end of list description) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T21:26:11.873

只是为了扩展 mgilson 的答案，就好像您对编程很陌生，这也可能有点迟钝。自从几个月前我开始学习 python 以来，这是我的注释。

```
string = 'aVeryLargeNumber'
num = [int(c) for c in string if not c.isspace()] #list comprehension

"""Breakdown of a list comprehension into it's parts."""
num = [] #creates an empty list
for c in string: #This threw me for a loop when I first started learning
     #as everytime I ran into the 'for something in somethingelse':
     #the c was always something else. The c is just a place holder
     #for a smaller unit in the string (in this example). 
     #For instance we could also write it as:
     #for number in '1234567890':, which is also equivalent to 
     #for x in '1234567890': or 
     #for whatever in '1234567890'
             #Typically you want to use something descriptive.
     #Also, string, does not have to be just a string. It can be anything
     #so long as you can iterate (go through it) one item at a time
     #such as a list, tuple, dictionary.

if not c.isspace(): #in this example it means if c is not a whitespace character
        #which is a space, line feed, carriage return, form feed,
                #horizontal tab, vertical tab.

num.append(int(c))  #This converts the string representation of a number to an actual
        #number(technically an integer), and appends it to a list. 

'1234567890' # our string in this example
num = []
    for c in '1234567890':
        if not c.isspace():
            num.append(int(c)) 
```

通过循环的第一次迭代看起来像：

```
num = [] #our list, empty for now
    for '1' in '1234567890':
        if not '1'.isspace():
            num.append(int('1')) 
```

注意 1 周围的 ' '。' ' 或 " " 之间的任何内容都表示该项目是一个字符串。尽管它看起来像一个数字，但就 Python 而言，它不是。一个简单的验证方法是在解释器中输入 1 + 2 并将结果与​​ '1' + '2' 进行比较。看出区别了吗？使用数字，它可以按照您的预期将它们加在一起。使用字符串将它们连接在一起。

进入第二关！

```
num = [1] #our list, now with a one appended!
    for '2' in '1234567890':
        if not '2'.isspace():
            num.append(int('2')) 
```

所以它会一直持续下去，直到字符串中的字符用完，或者产生错误。如果字符串是 '1234567890.12345' 会发生什么？我们可以放心地说'。不是空格字符。所以当我们深入到 int('.') Python 会抛出一个错误：

```
Traceback (most recent call last):
    File "<string>", line 1, in <fragment>
builtins.ValueError: invalid literal for int() with base 10: '.' 
```

至于学习 Python 的资源，有很多免费教程，例如：

[http://www.learnpython.org](http://www.learnpython.org)

[http://learnpythonthehardway.org/book](http://learnpythonthehardway.org/book)

[http://openbookproject.net/thinkcs/python/english3e](http://openbookproject.net/thinkcs/python/english3e)

[http://getpython3.com/diveintopython3](http://getpython3.com/diveintopython3)

如果您想购买一本书进行学习，那么：[http](https://rads.stackoverflow.com/amzn/click/com/0596158068) ://www.amazon.com/Learning-Python-Powerful-Object-Oriented-Programming/dp/0596158068是我的最爱。不知道为什么收视率很低，但我认为作者做得很好。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T21:40:42.393

[PEP](http://www.python.org/dev/peps/pep-0202/)中的这些示例是一个很好的起点。如果你不熟悉，`range`你`%`需要退后一步，了解更多关于基础的信息。

```
>>> print [i for i in range(10)]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

>>> print [i for i in range(20) if i%2 == 0]
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

>>> nums = [1,2,3,4]
>>> fruit = ["Apples", "Peaches", "Pears", "Bananas"]
>>> print [(i,f) for i in nums for f in fruit]
[(1, 'Apples'), (1, 'Peaches'), (1, 'Pears'), (1, 'Bananas'),
 (2, 'Apples'), (2, 'Peaches'), (2, 'Pears'), (2, 'Bananas'),
 (3, 'Apples'), (3, 'Peaches'), (3, 'Pears'), (3, 'Bananas'),
 (4, 'Apples'), (4, 'Peaches'), (4, 'Pears'), (4, 'Bananas')]
>>> print [(i,f) for i in nums for f in fruit if f[0] == "P"]
[(1, 'Peaches'), (1, 'Pears'),
 (2, 'Peaches'), (2, 'Pears'),
 (3, 'Peaches'), (3, 'Pears'),
 (4, 'Peaches'), (4, 'Pears')]
>>> print [(i,f) for i in nums for f in fruit if f[0] == "P" if i%2 == 1]
[(1, 'Peaches'), (1, 'Pears'), (3, 'Peaches'), (3, 'Pears')]
>>> print [i for i in zip(nums,fruit) if i[0]%2==0] 
```

# android - 自定义 TextView-like 和文本绘图

> ID：12413052
> 
> 赞同：3
> 
> 时间：2012-09-13T19:03:07.790
> 
> 标签：android, android-canvas, android-custom-view

我正在尝试实现自定义视图来显示文本，但绘制文本时出现问题（文本为红色，视图的背景为绿色）：

![在此处输入图像描述](../Images/4b4173d49558f9a08c27d3e67ae739e6.png)

源代码在[pastebin](http://pastebin.com/pmzpxkQ0)上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:58:50.127

您的 onDraw() 方法存在一些问题。由于您没有显式更改文本对齐方式，因此默认情况下文本左对齐。在这种模式下，文本从左（x）到基线（y）上方的右方绘制。在您的代码 x = 0 和 y = 0 中，因此文本从 x=0 开始向基线 y = 0 的右侧和上方绘制，因此您的文本不可见。这是您的代码的修改版本：

公共类 FastTextView 扩展视图 {

```
private Context mContext;
private String mText = "";
private int mTextSize;
private Paint mPaint;

private int paddingLeft   = 0;
private int paddingRight   = 0;
private int paddingTop    = 0;
private int paddingBottom = 0;

private int fontSize = 100;

public void setText(String text)
{
    mText = text;
}

public FastTextView (Context context)
{
    super(context);
    initialize();
}

public FastTextView (Context context, AttributeSet attrs)
{
    super(context, attrs);
    initialize();
}

public void setPaddingLeft(int padding)
{
    paddingLeft = padding;
}

public void setPaddingRight(int padding)
{
    paddingRight = padding;
}

public void setPaddingBottom(int padding)
{
    paddingBottom = padding;
}

public void setPaddingTop(int padding)
{
    paddingTop = padding;
}

public void setFontSize(int size)
{
    fontSize = size;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    Rect rect = new Rect();
    mPaint.getTextBounds(mText.toString(), 0, mText.length(), rect);

    int width = Math.max(rect.width(), getSuggestedMinimumWidth()) + paddingLeft + paddingRight;
    int height = Math.max(rect.height(), getSuggestedMinimumHeight()) + paddingTop + paddingBottom;

    setMeasuredDimension(width, height);
}

/**
 * Initialize the view
 */
private void initialize()
{
    mContext = getContext();
    mPaint = new Paint();
    mPaint.setColor(Color.RED);
    mPaint.setTextSize(fontSize);
    mPaint.setTextAlign(Align.LEFT);
    setBackgroundColor(Color.GREEN);
}

@Override
protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);
    canvas.drawColor(Color.BLUE);
    int x = paddingLeft;
    int y = paddingTop + fontSize;

    if (mText.length() > 0) {
        canvas.drawText(mText, x, y-fontSize/4, mPaint);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:31:31.677

而不是使用 (L 91) 在视图顶部绘制文本：

`canvas.drawText(mText, 0, mText.length() - 1, 0, 0, mPaint);`

尝试：

`canvas.drawText(mText, 0, mText.length() - 1, 0, canvas.getHeight(), mPaint);`

请注意，对齐设置存储在`Paint`变量中。因此，如果您的文本仍未正确绘制，您可能应该更改它。

# javascript - 在 JavaScript 中创建 UTC 日期，添加一天，获取 unix 时间戳

> ID：12413060
> 
> 赞同：0
> 
> 时间：2012-09-13T19:03:36.910
> 
> 标签：javascript, timestamp, utc

我正在尝试在 JavaScript 中以 UTC 格式构建日期，同时指定一小时和一分钟，然后获取它的时间戳。

例如，如果我有 15 小时和 25 分钟，我正在这样做：

```
var to_date = new Date();
to_date.setUTCHours(15);
to_date.setUTCMinutes(25);
var to_utc = new Date(to_date.getUTCFullYear(), 
              to_date.getUTCMonth(), 
              to_date.getUTCDate(), 
              to_date.getUTCHours(), 
              to_date.getUTCMinutes(), 
              to_date.getUTCSeconds());
var to_unix = Math.round(to_utc.getTime() / 1000);
console.log(to_unix); 
```

问题是这似乎没有返回正确的时间戳。它设置的时间不是UTC，而是我的时区。知道如何在 UTC 中维护它吗？

如果超过当前时间，我还想在时间上添加一天。我试过检查 current 并添加`60*60*24`，但这返回的分钟/小时与我指定的不匹配。

任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:24:25.943

如果您正在修补现有的日期对象：

```
var d = new Date();
d.setUTCHours(15);
d.setUTCMinutes(25);
d.setUTCSeconds(0); 
```

`d`现在将代表今天 15:25 UTC。

如果你从头开始：

```
var d = new Date(Date.UTC(year, jsmonth, day, utchour, utcminute, utcsecond)); 
```

要获取 unix 时间戳，请使用`getTime`，它返回自 UTC 纪元以来的毫秒数，然后除以 1000 以转换为 unix 时间（以*秒*而不是*毫秒为单位*）：

```
Math.round(d.getTime() / 1000); 
```

`Date.now()`为您提供自纪元以来的 UTC 当前时间（以毫秒为单位）。添加一天并查看它是否在未来：

```
d.getTime() + (1000*60*60*24) > Date.now() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:11:41.973

使用您的代码尝试以下**[演示。](http://jsfiddle.net/QX6HA/3/)**

要摆脱时区，请使用`to_date.setHours(0,0,0,0);`将时间设置为`00:00:00:00`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:31:23.703

表单[链接](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)：getTimezoneOffset()方法返回UTC时间与本地时间的时差，单位为分钟。以下应该可以解决您的问题

```
var to_unix = Math.round( (Date.now() + (new Date().getTimezoneOffset()) )  / 1000);
console.log(to_unix); 
```

[jsfiddle](http://jsfiddle.net/aZ2BT/)

# c# - C# 中的 NetSuite 网络服务，设置批准状态

> ID：12413061
> 
> 赞同：1
> 
> 时间：2012-09-13T19:03:38.040
> 
> 标签：c#, web-services, netsuite

我们有一个项目，我们希望能够设置采购订单以通过 Web 服务获得批准。我们找不到如何执行此操作，并且通过我们的 Web 服务操作创建的每个 PO 都处于待批准状态。

supervisorApproval 似乎没有这样做

并且设置 orderStatus 似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:38:03.140

这两行应该这样做：

```
po.supervisorApproval = true;
po.supervisorApprovalSpecified = true; 
```

或者

```
po.orderStatus = PurchaseOrderOrderStatus._pendingBilling; (or whatever status you want it to go to)
po.orderStatusSpecified = true; 
```

确保列出了第二行。如果两者都存在，请检查集成日志并查看您的主管批准是否正在发送到 NetSuite。空值不会出现在请求中。

# php - 使用 PHP 选择并显示 MySQL 表中的所有字段以获取无限量的列

> ID：12413064
> 
> 赞同：1
> 
> 时间：2012-09-13T19:03:43.530
> 
> 标签：php, mysql

我正在尝试编写一个 PHP 函数，它将为许多不同的数据库表输出 HTML 中的所有字段。表格的行和列各不相同，所以我试图想出一个方法。

就像这里的例子 -[如何使用 PHP 获取列中的所有值？](https://stackoverflow.com/questions/5229501/get-all-values-in-a-column-using-php)

`"SELECT * FROM $mytable"`但是，如果我不知道数据库的每一行中有多少列或它们的名称，那么当每个数据库的列和行都不同时，如何从查询中输出数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:13:36.797

也许是这样的？

```
echo "<table>";

while ($row = mysql_fetch_array($query))
{
    echo "<tr>";

    foreach($row as $value)
    {
        echo "<td>".$value."</td>";
    }

    echo "</tr>";

}

echo "</table>"; 
```

**更新**

由于这个答案似乎仍然受到一些关注，我觉得有必要注意到它，因为它基于一个现在已经过时的示例（链接在原始问题中），所以这个答案本身也已经过时了。这是由于使用了`mysql`现已弃用/删除的扩展（取决于您的 PHP 版本）。相反，您应该使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T19:45:11.597

这将构建一个带有包含列名的标题行的表。在某些地方可能会更有说服力，但如果我了解您的要求，则解决方案会很糟糕。

```
function tableme($result){
    $header='';
    $rows='';
    while ($row = mysql_fetch_array($result)) { 
        if($header==''){
            $header.='<tr>'; 
            $rows.='<tr>'; 
            foreach($row as $key => $value){ 
                $header.='<th>'.$key.'</th>'; 
                $rows.='<td>'.$value.'</td>'; 
            } 
            $header.='</tr>'; 
            $rows.='</tr>'; 
        }else{
            $rows.='<tr>'; 
            foreach($row as $value){ 
                $rows .= "<td>".$value."</td>"; 
            } 
            $rows.='</tr>'; 
        }
    } 
    return '<table>'.$header.$rows.'</table>';
} 
```

只需`$result`从您的查询中调用它；

```
 echo tableme($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T06:51:51.130

```
$query = "SELECT * FROM `ios7_google`";

$result = mysql_query("SHOW COLUMNS FROM `ios7_google`.`graph_geo_table`");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
    mssql_field_name($result,0);
    //    print_r($row);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-01T15:44:46.680

我是 PHP 新手，之前很欣赏 Dave（Patrick Q 编辑）的帖子。我在下面的 mysqli 版本中建立了他们的示例。提供大量评论以帮助其他人了解正在发生的事情......作为一项功能，我已经将它包含在现在具有表格输出的每个页面中。

```
/*
Function: tabular_output (mysqli_query) as string
Utilization: Given the results of a successful mysqli_query, produce a dynamic table based on the columns identified.
<th> contents are based of the fields of the array.
<td> contents are based on contents associated to the relevant fields.
The table is not limited in size or length and table attributes can be controlled external to the function via CSS

Ref: http://www.php.net/manual/en/mysqli-result.fetch-fields.php
Ref: http://stackoverflow.com/questions/12413064/select-and-display-all-fields-from-mysql-table-for-indefinite-amount-of-columns
*/

function tabular_output($sql_result){
//Initiate header and rowdata for the table output.
$header='';
$rowdata='';

//Initiate header string.
$header='<tr>';
    //Assign the $sql_result field attributes to the $field array to output column headings.
    $field= mysqli_fetch_fields($sql_result);

    //Iterate through the field array to produce the name value in the header.
    foreach ($field as $val) {
        $header.= "<th>".$val->name."</th>";
    }

//Header string complete.
$header.='</tr>';

//Iterate through the data ($row) contained within the passed $sql_result.
while ($row = mysqli_fetch_array($sql_result))
{
    //Assign the $sql_result field attributes to the $field array to dynamically handle data contents.
    $field= mysqli_fetch_fields($sql_result);

    //Initiate the rowdata string.
    $rowdata.='<tr>';

    //Iterate through the field array to produce the associated $rowdata element.
    foreach ($field as $val) {
        $rowdata.= "<td>".$row[$val->name]."</td>";
    }
    $rowdata.='</tr>';

} //Rowdata string complete.
//Return the finished table string to the referring procedure.
return '<table>'.$header.$rowdata.'</table>';
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-13T19:12:51.607

您可以使用 SQL 命令`"SHOW TABLES"`获取数据库中所有表的列表。

然后，您可以遍历结果并查询每个表的字段。

# c# - 将列表中的数据绑定到网格控件

> ID：12413066
> 
> 赞同：2
> 
> 时间：2012-09-13T19:04:04.247
> 
> 标签：c#, asp.net-mvc-3, telerik-grid, telerik-mvc

我很难让数据显示在 Telerik Grid 控件中。`GraphDetail`我在我的 ViewModel 中填充了一个列表对象。然后尝试使用`Model.GraphDetail`将数据绑定到视图中的网格。该项目编译并运行没有错误，网格确实显示但它是空的。如果我单步执行代码，我可以看到`GraphDetail`正在填充数据。

这是我的视图模型：

```
namespace AESSmart.ViewModels
{
    public class ACVoltagesTelerikGraph
    {
        public long InverterID { get; set; }
        public string InverterName { get; set; }
        public double? voltage_ac_a { get; set; }
        public double? voltage_ac_b { get; set; }
        public double? voltage_ac_c { get; set; }
        public DateTime recordTime { get; set; }
    }

    public class GraphsACVoltagesViewModel
    {
        public DateTime startingDate { get; set; }
        public DateTime endingDate { get; set; }

        public string HCSeries { get; set; }
        public List<ACVoltagesTelerikGraph> GraphDetail { set; get; }

        public void setLists()
        {
            //Code to populate InverterGoups and Inverters
        }

        public void setSeries()
        {
            //Code to populate GraphDetail and HCSeries
        }
    }
} 
```

我的视图包含以下代码来显示网格：

```
@model AESSmart.ViewModels.GraphsACVoltagesViewModel

@(Html.Telerik().Grid(Model.GraphDetail)
    .Name("Grid")
    .DataBinding(dataBinding => dataBinding.Server())
    .Columns(columns =>
    {
        columns.Bound(o => o.InverterID).Title("InverterID").Width(25);
        columns.Bound(o => o.InverterName).Title("InverterName").Width(100);
        columns.Bound(o => o.voltage_ac_a).Title("Phase 1 Volts").Width(75);
        columns.Bound(o => o.voltage_ac_b).Title("Phase 2 Volts").Width(75);
        columns.Bound(o => o.voltage_ac_c).Title("Phase 3 Volts").Width(75);
        columns.Bound(o => o.recordTime).Title("Record Time").Width(150);
    })
    .Groupable()
    .Sortable()
    .Filterable()
    .Pageable(pager => pager.PageSize(3))
) 
```

这是结果的屏幕截图： ![在此处输入图像描述](../Images/5e0e952e24e81f28b098ebaf3bcaac41.png)

正如您从屏幕截图中看到的那样，网格是空的。 **那么，如何正确地将 ViewModel 中的 GraphDetail 列表绑定到网格？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:31:21.910

我实际上遇到了一个非常相似的问题。我无法根据列表填充图表。为了修复它，我不得不将列表更改为集合。尝试为您的方案使用以下代码：

```
public virtual ICollection<ACVoltagesTelerikGraph> GraphDetail { set; get; } 
```

此外，看起来您正在将数据构建为 ViewModel 中更大类的一部分。因此，您的控制器不会专门处理网格正在使用的模型的创建。因此，“服务器绑定”可能对您不起作用。更不用说，您似乎只是想向用户显示数据，根本不需要他们修改它。所以我会像这样在客户端进行数据绑定：

```
@(Html.Telerik().Grid(Model.GraphDetail)
    .Name("Grid")
    .DataBinding(dataBinding => dataBinding
        .Ajax()
        .OperationMode(GridOperationMode.Client)           
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:16:46.637

尝试改变这个：

`@(Html.Telerik().Grid(Model.GraphDetail)`

`.DataBinding(dataBinding => dataBinding.Server())`

对此：

`@(Html.Telerik().Grid<ACVoltagesTelerikGraph>()`

`.DataBinding(dataBinding => dataBinding.Ajax().Select("ActionName", "ControllerName"))`

# php - bootstrap twitter datepicker + modal - 日历出现在父屏幕而不是模式屏幕

> ID：12413070
> 
> 赞同：8
> 
> 时间：2012-09-13T19:04:19.973
> 
> 标签：php, javascript, jquery, ajax, twitter-bootstrap

我有一个表单 ( `Payment.php`)，我正在使用 twitter 引导程序在模式屏幕中显示该表单。在表单中，我有一个日期字段，我找到[了这个](http://www.eyecon.ro/bootstrap-datepicker/)引导插件。

但问题是日历是在父屏幕 ( `Index.php`) 中加载的，而不是在实际需要的模式表单上。

任何人都可以提出解决方案。

以下是我尝试过的代码。

进口：

```
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/datepicker.css" rel="stylesheet">
<script src="js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript" src="js/jquery-1.8.0.js"></script> 
```

PHP：

```
<div class="controls">
        <input data-datepicker="datepicker" class="span3" value="2012-09-13" data-date-format="yyyy-mm-dd" id="dp2" >
        </div> 
```

JS：

```
$('#dp2').datepicker(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T21:18:43.930

将 z-index 添加到 .datepicker 类并制作超过 .modal

```
.datepicker {
z-index: 9999;
top: 0;
left: 0;
padding: 4px;
margin-top: 1px;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T23:57:17.837

经过几次测试，我可以再次确认我对@m4k 答案的评论：通过 CSS 文件的 z-index 解决方案在 OS X 上的 Firefox 19 和 20 上不起作用。Chrome 可以。我没有在其他浏览器或操作系统上进一步测试它。

对我有用的解决方案是通过 jquery-ui 的 datepicker 配置设置 z-index，如下所示：

```
$('#datepicker').datepicker({ 
    beforeShow: function() { $('#datepicker').css("z-index", 1051); }
}); 
```

其中 z-index 作为模态之一应该更高（在引导程序 2.3 中，模态有 1050）。

一个更高级的解决方案可能是调用一个方法`beforeShow`来自动确定页面上当前最高的 z-index。在[http://www.west-wind.com/weblog/posts/2009/Sep/12/jQuery-UI-Datepicker-and-zIndex](http://www.west-wind.com/weblog/posts/2009/Sep/12/jQuery-UI-Datepicker-and-zIndex)你可以找到一个例子。

* * *

**更新：**自动设置 z-index 1 高于模态

简单示例如何确定底层模态的 z-index 是什么：

```
$("#datepicker").closest(".modal").css("z-index") 
```

因此，该`beforeShow`方法变为

```
$('#datepicker').datepicker({ 
    beforeShow: function() { 
      var $datePicker = $("#datepicker");
      var zIndexModal = $datePicker.closest(".modal").css("z-index");
      $datePicker.css("z-index", zIndexModal + 1); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-06T08:41:00.827

..这些都不适合我。我正在运行 bootstrap 2.3.2，无论我如何通过 javascript 尝试，bootstrap 的 javascript 总是会将 datepicker 的 z-index 重置回（在我的情况下）21。当然，有一种方法可以在 javascript 中做到这一点，但我找到相当干净的css方式。

所以，这成功了：

```
/* otherwise datepickers won't show in a modal dialog */
.datepicker {
    z-index:1051 !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T18:39:12.347

我遵循了 beforeShow 方法，但必须从输入中获取最接近的模态用于 z-index 计算，然后确保在单独的 div 上设置 z-index，即日历。

```
var DEFAULT_Z_INDEX = 10;

$('#my-date-input')
    .datepicker()
    .on('show', function() {

        // Make sure that z-index is above any open modal.
        var $input= $(this);
        var modalZIndex = $input.closest('.modal').css('z-index');
        var zIndex = DEFAULT_Z_INDEX;
        if (modalZIndex) {
            zIndex = parseInt(modalZIndex) + 1;
        }

        $('.datepicker').css("z-index", zIndex);
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T04:14:36.530

html

```
 <!-- Text input-->
<div class="form-group"> 
    <label class="col-sm-2 control-label" for="textinput">Date TO</label>
    <div class="col-sm-10">
      <input   type="text" id="DateToP"  name="DateToP" placeholder="Post Code" class="form-control datepicker">
    </div> 
</div> 
```

css

```
<style type="text/css">
 .datepicker {
    z-index:1051 !important;
  }
</style> 
```

jQuery

```
 $('#DateToP').datepicker({
       format: 'yyyy-mm-dd',
      autoclose: true
  }); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-10-01T18:44:35.167

我用了一个显示器：无；.datepicker 的 CSS 文件的属性。这很好用。

# iphone - 有没有办法动态更改视图以填充屏幕？

> ID：12413073
> 
> 赞同：1
> 
> 时间：2012-09-13T19:04:23.077
> 
> 标签：iphone, ios, uiview, uiviewcontroller, cgrectmake

在我的 iOS 应用程序中，我在另一个视图中定义了三个 Web 视图。可能并不总是使用其中两个 Web 视图，那么有没有办法让剩余的视图填满屏幕的其余部分？当您使用“fill_parent”时，android 中的等价物。

现在我正在通过改变框架来完成这一切，这真的很麻烦。

```
// There is no top banner, but it does use the footer
topBannerView.frame = CGRectMake(0, 0, 320, 0);
mainView.frame = CGRectMake(0, 0, 320, 400);
footerView.frame = CGRectMake(0, 400, 320, 60); 
```

有没有办法让 mainView 在不明确设置框架的情况下使用屏幕的其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:08:29.927

除了在值中进行硬编码之外，您还可以放入一些代码来查看正在显示的内容的大小并从中计算您的视图需要的大小。它可能看起来像：

```
if(!topBannerView.hidden)
{
  topBannerHeight = topBannerView.bounds.size.height; //syntax here might be a little off, can't test code right now, but I think it's close to this
}
else
{
  topBannerHeight = 0;
} 
```

重复其他 2 个视图，然后

```
topBannerView.frame = CGRectMake(0, 0, 320, topBannerHeight);
mainView.frame = CGRectMake(0, topBannerHeight, 320, mainViewHeight);
footerView.frame = CGRectMake(0, (mainViewHeight+topBannerHeight), 320, footerViewHeight); 
```

这种方式仍然有点笨拙，但是如果您将来想调整大小，它会更好一些。

编辑：我清理了语法，现在应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:17:32.773

如果你想让你的应用需要 iOS 6，你可以使用自动布局来做到这一点。

如果你想在 iOS 5 上运行，你必须在代码中完成。

# ruby-on-rails - 防止多个用户之间的表单提交冲突 (Rails 2.x)

> ID：12413074
> 
> 赞同：0
> 
> 时间：2012-09-13T19:04:23.357
> 
> 标签：ruby-on-rails, ruby

假设我在管理我的 Rails 2.x 支持的网站时有一个简单的表单。

```
<form action="/products/123">

  Price:
  <input type="text" name="product[price]" value="12.99"></input>

  Description:
  <textarea name="product[description]">
    A long and descriptive block of text goes here.
  </textarea>

  <input type="submit"></input>
</form> 
```

1.  管理员**Sally**想要更改描述。
2.  管理员**Sally**使用此表单打开页面并开始在文本区域中编写一些新的销售副本。
3.  几秒钟后，管理员**Joe**决定该产品需要上市销售
4.  管理员**乔**打开带有表单的页面
5.  管理员**乔**将价格降至 9.99 美元
6.  管理员**乔提**交表单，将数据库中的价格设置为 9.99 美元
7.  管理员**Sally**完成了副本的编写并提交了表单，但她浏览器中的价格字段仍然显示为 12.99 美元。
8.  **乔**很生气，对**莎莉**大喊大叫，因为她把价格改回来了，尽管她不知道自己只是这么做了。

因此，数据库更新为包含**Sally**在表单中的内容，删除了**Joe**在打开该页面时设置的价格。

当然，我不是第一个偶然发现此类问题的人，但我从来没有处理过它。那么首先，这类问题有名称吗？其次，有什么解决方案可以减少它的吸吮？

* * *

我想到了一些解决方案，但有些有严重的缺点。

*   `updated_at`如果时间戳在您打开表单时发生更改，请不要保存记录。但是您想要保存的内容会发生什么变化？您必须从表单中复制要更改的内容，重新加载编辑表单，然后将其粘贴回，希望在此期间没有其他人编辑任何内容。

*   表单加载时大多数字段被禁用，要求管理员“解锁”他们想要编辑的字段，并且只有解锁的字段在提交时被发送到服务器。这大大降低了大型表单发生冲突的可能性，但在内容编辑过程中增加了一堆点击，即使在 99% 的情况下都可以。

*   基于 JS 的解决方案会进行脏字段检查，禁用与加载表单时具有相同值的任何表单输入，因此只提交更改的字段，我想到目前为止我最喜欢这个选项。但这听起来确实有点复杂，并且涉及将我的模型转储到页面上的 JSON 以供表单提交处理程序进行比较。

但同样，我确信我不是第一个遇到这个问题的人。那么有没有标准的解决方案呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:08:24.633

Have you checked this: [http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html) ?

**UPDATE**

Well, it doesn't really explain what to do if `lock_version` is wrong, but at least it's better than `updated_at` I guess. It all depends on who wins and why. If **Sally** didn't touch price it seems reasonable to update price from **Joe**'s data when saving. Just add original values as hidden fields and compare them with **Sally**'s input when saving in case `lock_version` is wrong. If they both modified same field, well, no luck. Somebody should win, or you can go back to the edit page and highlight changes for acceptance.

# c# - 我希望文本框 AJAX 掩码编辑扩展器根据单选按钮选择进行更改

> ID：12413078
> 
> 赞同：0
> 
> 时间：2012-09-13T19:04:34.513
> 
> 标签：c#, javascript, asp.net, ajax

我创建了一个具有 C# 背景的 ASP.net 在线应用程序。我也在使用 AJAX MaskEditExtender。我对 AJAX 很陌生，不懂 Javascript。我需要做的是根据单选按钮的选择更改文本框 AJAX 掩码。在此示例中，他们选择薪水或小时工。我需要工资为“999,999”，每小时为“99.99”。

```
<asp:TextBox ID="finalwage" runat="server" Width="80px">$</asp:TextBox>
<!-- Salary Mask -->
    <asp:MaskedEditExtender 
            ID="MaskedEditExtender1" 
            runat="server" 
            TargetControlID="finalwage" 
            Mask="999,999" 
            MessageValidatorTip="true" 
            MaskType="Number" 
            InputDirection="RightToLeft" 
            AcceptNegative="None" 
            ErrorTooltipEnabled="true">
    </asp:MaskedEditExtender>
    <asp:MaskedEditValidator 
            ID="MaskedEditValidator1" 
            runat="server" 
            ControlExtender="MaskedEditExtender1" 
            IsValidEmpty="true" 
            MinimumValue="0" 
            MaximumValueMessage="Must enter a number" 
            ControlToValidate="finalwage" >
    </asp:MaskedEditValidator>
    <!-- Hourly Mask -->
    <asp:MaskedEditExtender 
            ID="MaskedEditExtender2" 
            runat="server" 
            TargetControlID="finalwage" 
            Mask="99.99" 
            MessageValidatorTip="true" 
            MaskType="Number" 
            InputDirection="RightToLeft" 
            AcceptNegative="None" 
            ErrorTooltipEnabled="true">
    </asp:MaskedEditExtender>
    <asp:MaskedEditValidator 
            ID="MaskedEditValidator2" 
            runat="server" 
            ControlExtender="MaskedEditExtender1" 
            IsValidEmpty="true" 
            MinimumValue="0" 
            MaximumValueMessage="Must enter a number" 
            ControlToValidate="finalwage" >
    </asp:MaskedEditValidator> 
```

…………

```
<asp:RadioButtonList 
        ID="RadioButtonList1" 
        runat="server" 
        AutoPostBack="true" 
        RepeatDirection="Horizontal" 
        OnSelectedIndexChanged="RadioButtonList1_SelectedIndexChanged">
    <asp:ListItem Text="Hourly" Value="Hourly"
    <asp:ListItem Text="Salary" Value="Salary" />
</asp:RadioButtonList> 
```

下面是我认为可行的 C# 代码：

```
protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (RadioButtonList1.SelectedValue = "Hourly")
    {
        MaskedEditExtender1.Mask = "99.99";
    }
    if (RadioButtonList1.SelectedValue == "Salary")
    {
        MaskedEditExtender1.Mask = "999,999";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:18:49.960

尝试将 RadioButtonList1_SelectedIndexChanged 代码移动到 Page_Init。我相信 RadioButtonList1_SelectedIndexChanged 在生命周期过程中为时已晚，无法更改掩码。

# c# - 基本库的 C# 通用继承问题

> ID：12413080
> 
> 赞同：0
> 
> 时间：2012-09-13T19:04:47.913
> 
> 标签：c#, generics, inheritance

给定基础库中定义的以下类/接口：

```
public interface IWorkContext {
    T Node<T>() where T : class, IHierachy<T>;
    IHierachyItem Node();
}

public interface IHierachyItem {
    int Id { get; set; }
    string Title { get; set; }
}

public interface IHierachy<T> : IHierachyItem where T : IHierachy<T> {
    T Parent { get; set; }
    IList<T> Children { get; set; }
}

public class WorkContext {
    public static IWorkContext Current {
        get { return DependencyResolver.Current.GetService<IWorkContext>(); }
    }
} 
```

在另一个库中具有以下实现（引用上面的基本库）：

```
public class DefaultWorkContext : IWorkContext {
    // Nhibernate session
    private readonly ISession _session;

    public DefaultWorkContext(ISession session) {
        _session = session;
    }

    public T Node<T>() where T : class, IHierachy<T> {
        return _session.Get<T>(2);
    }

    public IHierachyItem Node() {
        return Node<SiteMapNode>();
    }
} 
```

其中 SiteMapNode 存在于同一个库中（并映射到数据库表）：

```
public class SiteMapNode : IHierachy<SiteMapNode> {
    public virtual int Id { get; set; }
    public virtual SiteMapNode Parent { get; set; }
    public virtual string Title { get; set; }
    public virtual IList<SiteMapNode> Children { get; set; }

    public SiteMapNode() {
        Children = new List<SiteMapNode>();
    }
} 
```

我可以说以下内容来访问节点并获取父节点：

```
var node = WorkContext.Current.Node();
var parentNode = ((IHierachy<SiteMapNode>)node).Parent;

var node2 = WorkContext.Current.Node<SiteMapNode>();
var parentNode2 = node2.Parent; 
```

但是我不喜欢任何一种方法，因为选项 1 需要一个案例，而选项 2 需要我传递一个默认类型。

是否可以重构此示例，以便我可以像获取 Id 和 Title 一样访问父级和子级。

我希望我已经足够清楚地解释了这个问题。我会很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:25:38.873

如果您使用显式类型而不是`var`. 声明变量`var`不会使变量类型动态化，它只会让编译器确定变量需要的特定类型（这可能很危险，因为您不清楚它确定的类型）。

因此，声明了具有特定类型的变量（无论您是否知道该类型是什么），然后您只能访问该声明的类型知道的内容，除非您适当地转换它。

我认为最后没有办法在不指定类型作为类型参数（在尖括号中）或显式转换的情况下准确地完成你想要的。您显然想将非特定的继承/实现类型转换为方便的特定类型，但这需要告诉编译器特定类型才能成为。

但是通过改变你的方法，你可能会更接近你想要的。如果您使用非泛型`IHierarchy`怎么办？（同时更正拼写）如果...

```
public inetrface IHierarchy : IHierarchyItem
{
    IHierarchy Parent { get; set; }
    IList<IHierarchy> Children { get; set; }
} 
```

...然后任何`IHierarchy node`变量都可以访问`node.Parent`and `node.Children`... 并且`node.Id`因为`node.Title`是`IHierarchyItem`必需的，因此是已知的`IHierarchy`.

这种方法可以轻松处理层次结构方面并允许您的`WorkContext.Current`（等）返回值中的多态性，但它需要从那里进行显式转换才能访问特定于`IHierarchy`. 目前尚不清楚有多少问题可能适合您的目的。

您也可以`IHierarchy<T> : IHierarchy`在其上放置一个泛型，以允许按特定类型进行处理，而无需进一步转换。您可能必须显式而不是隐式定义一个或两个接口成员（在实现类中），以避免在没有泛型类型参数的属性上发生名称冲突。

**编辑添加：**

例如，类似：

```
public interface IHierarchy<T> : IHierarchy // Implies IHierarchyItem
    where T : IHierarchy<T>
{ ... } // As you had it. 
```

然后在您的实现类中：

```
public SiteMapNode : IHierarchy<SiteMapNode> // Implies IHierarchy
{
    private SiteMapNode _Parent;
    private IList<SiteMapNode> _Children;

    // Implicit implement of IHierarchyItem and members of SiteMapNode itself.
    int Id { get; set; }
    string Title { get; set; } 

    // Implicit implementation of IHierarchy<SiteMapNode> members
    // These are also members of SiteMapNode itself.

    SiteMapNode Parent
    {
        get { return _Parent; }
        set { _Parent = value; }
    }

    IList<SiteMapNode> Children
    {
        get return _Children;
        set _Children = value;
    }

    // Explicit implementation of IHierarchy members
    // The interface prefix is required to distinguish these from the
    // type-specific members above to declare different return types.

    IHierarchy IHierarchy.Parent
    {
        get { return _Parent; } // Might need (IHierarchy) cast
        set { Parent = (SiteMapNode)value; }
    }

    IList<IHierarchy> IHierarchy.Children
    {
        get { return _Children; } // Might need (IList<IHierarchy>) cast
        set { _Children = (IList<SiteMapNode>)value; }
    }
} 
```

（或者变得更漂亮，在 IHierarchy 实现中进行更多的完整性检查。）我可能还错过了一些其他需要的显式转换；我不肯定可以以这种方式直接转换列表，但我认为通过让 IHierarchy<T> 继承 IHierarchy 可以确保 SiteMapNode 是有效的 IHierarchy，因此列表的元素适用于两种列表类型）。如果该列表转换不起作用，您可能必须创建一个自定义通用集合类来将子级管理为未指定的 IHierarchy 和通用 IHierarchy<T>。

出于性能原因，您可能希望添加`IHierarchy _CastParent;`和`IList<IHierarchy> _CastChildren;`成员并保存这些对象的未指定 IHierarchy 强制转换以避免重复重铸它们。我建议您始终转换为特定类型（从未指定的设置时），但您可能会将特定类型的转换推迟到未指定的引用，直到实际需要它们。

现在，所有这一切，当然，只有当这种额外的复杂性实际上有助于满足您的需求时。它将允许您将层次结构对象作为未指定的类型（以后可能会更具体地转换，或者从不转换）或作为特定或通用的层次结构类型来处理，这将保留其类型知识以便在不进行转换的情况下进行处理。如果您想将它们作为特定于类型的层次结构处理，您仍然需要在某些时候转换为特定类型以从未指定的 IHierarchy 返回类型转换。

# java - 休眠未启动

> ID：12413081
> 
> 赞同：0
> 
> 时间：2012-09-13T19:04:50.930
> 
> 标签：java, mysql, spring, hibernate

我在春天有以下休眠配置，服务器在很长一段时间后启动但没有连接到数据库（数据库上没有模式）。因此，应该给出错误消息或使用`<prop key="hibernate.hbm2ddl.auto">create</prop>`.

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method = "close"> 
    <property name="driverClass" value="com.mysql.jdbc.Driver"/>
    <property name="jdbcUrl" value="jdbc:mysql://dburl:3306"/>
    <property name="user" value="user"/>
    <property name="password" value="pass!"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <property name="mappingResources">
        <list>
            <value>waf/resources/User.hbm.xml</value>
            <value>waf/resources/Post.hbm.xml</value>
            <value>waf/resources/Position.hbm.xml</value>
            <value>waf/resources/Comment.hbm.xml</value>
        </list>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">validate</prop>
            <!-- C3P0 CONNECTION POOL -->
            <prop key="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</prop>              
            <prop key="c3p0.acquire_increment">1</prop>             
            <prop key="c3p0.idle_test_period">100</prop>
            <prop key="c3p0.max_size">20</prop>
            <prop key="c3p0.max_statements">50</prop>
            <prop key="c3p0.min_size">1</prop>
            <prop key="c3p0.timeout">10</prop>
        </props>
    </property>
    <property name="dataSource">
        <ref bean="dataSource"/>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"> 
    <property name="sessionFactory">
        <ref bean="sessionFactory"/>
    </property> 
</bean> 
```

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:12:49.820

如果您正在使用连接池（如提到 c3po），则添加其他人提出的建议，然后在创建会话工厂时，它将尝试使用连接池支持的数据源，该数据源反过来将连接到数据库以预先创建和池连接。当你说它没有连接到数据库时——你怎么知道的？日志中有错误吗？我已经看到，如果 Hibernate 会话工厂无法自行配置，则会在日志中引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:23:42.343

Hibernate 不使用`hbm2ddl.auto`. 它只是创建 | 创建下降 | 等表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:26:36.533

浏览 HBM 文件，您给出如下..

**验证**而不是**创建**

我希望这不会创建 DDL。你能检查一下吗？还是有问题的错字？

# time - 在 Azure 中的角色之间同步时间

> ID：12413083
> 
> 赞同：2
> 
> 时间：2012-09-13T19:04:57.477
> 
> 标签：time, azure

我最近向 Azure 推送了一些新的 Web 和 Worker 角色，它们使用缓存基础架构在我们的一个业务流程中共享状态。在这种情况下，**Web 角色 A**将设置一个 DateTime 字段，然后**工作角色 B**将使用该字段作为各种内部业务流程的基础。在大多数情况下，Worker Role B 正在测量与 UtcNow 的时间差，这显然基于 Worker 角色主机系统时钟。

尽管很难精确测量，但 Web 角色的主机时钟和 Worker 角色的主机时钟之间似乎存在很大差异（*根据我们的需要）。*是否有一种机制可以在 Azure 中同步时钟，或者我应该使用其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:40:30.563

例如，您可以使用每 5 分钟运行一次的启动任务 + 计划任务来[将实例的时间与公共时间服务器同步](http://powershell.com/cs/media/p/9869.aspx)：

```
function Get-InternetTime { 
  $TcpClient = New-Object System.Net.Sockets.TcpClient 
  [byte[]]$buffer = ,0 * 64 
  $TcpClient.Connect('time.nist.gov', 13) 
  $TcpStream = $TcpClient.GetStream() 
  $length = $TcpStream.Read($buffer, 0, $buffer.Length); 
  [void]$TcpClient.Close() 
  $raw = [Text.Encoding]::ASCII.GetString($buffer) 
  [DateTime]::ParseExact($raw.SubString(7,17), 'yy-MM-dd HH:mm:ss', $null).toLocalTime() 
} 

Set-Date (Get-InternetTime) 
```

或者，您可以从 SQL Azure 数据库中获取时间，并将该时间用作所有实例的参考：

```
select getdate() 
```

# android - Android应用程序在模拟器上恢复网络时无异常退出

> ID：12413093
> 
> 赞同：2
> 
> 时间：2012-09-13T19:05:39.130
> 
> 标签：android, broadcastreceiver

我正在使用 BroadcastReceiver 来监听网络连接的变化。我通过 AndroidManifest.xml 文件注册了我的接收器。当我的模拟器将其状态从“已断开”更改为“已连接”时，将调用 BroadcastReceiver 的 OnReceiver() 函数。但是，当网络状态从“已连接”变为“已断开”时，我的应用程序将退出，没有错误、日志或异常。只是“不幸的是应用程序已停止工作”的消息。此消息显示在模拟器上，LogCat 窗口中没有异常或错误。

接收方在 xml 文件中注册为

```
<receiver android:exported="true" android:name="com.jumbybay.common.ConnectivityBroadcastReceiver">
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE">
            </action>
        </intent-filter>
</receiver>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

我在 LogCat 中看到的最后一件事如下

```
09-14 00:09:11.691: D/Tethering(149): MasterInitialState.processMessage what=3
09-14 00:09:47.991: D/ConnectivityService(149): ConnectivityChange for mobile: DISCONNECTED/DISCONNECTED
09-14 00:09:47.991: D/ConnectivityService(149): Attempting to switch to wifi
09-14 00:09:48.141: D/ConnectivityService(149): resetConnections(eth0, 3)
: E/(): Device disconnected 
```

任何帮助，将不胜感激。

# sql-server - SQL Server 2005 Encryption

> ID：12413096
> 
> 赞同：0
> 
> 时间：2012-09-13T19:05:54.920
> 
> 标签：sql-server, vb.net, vb6

I am developing an intranet application that contains a few connection strings in a database table with passwords (the previous developer did this - I know it is bad practice). The plan was to upgrade from SQL Server 2005 to SQL Server 2008, so I was going to wait for this and then use TDE (Transparent Data Encryption) as no changes are required to code even when the data is encrypted.

I have now discovered that we are not upgrading to SQL Server 2008\. What other options do I have to minimise changes required to the application? I thought of using the encryption facility in the web.config but I believe a lot of changes will be required. What other options do I have? There are two client applications that connect to it i.e. VB6 and VB.NT.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T23:20:50.413

我能想到您可以采取的三种选择。首先是让您的系统管理员从活动目录提供服务帐户，授予与 sql 帐户相同的权限，然后在 IIS 应用程序池的高级设置中配置应用程序标识属性。然后，您将能够从配置字符串中删除用户名和密码，并将其替换为属性“trusted_connection=true”。

其次，您可以应用列级加密来加密存储在数据库中的连接字符串。无需对 Intranet 应用程序进行任何代码更改即可完成此操作。您将需要重命名表，使用包含函数decryptautokeybycert 的旧表名创建一个视图。我将在帖子末尾发布一个示例。

第三，您可以让 DBA 配置服务器以强制使用 SSL\TLS 加密所有连接。

```
use master
go
create database EncryptedData
go
use EncryptedData
create master key encryption by password='P@ssw0rd!'

create certificate KeyProtection with subject='Key Protection'

create symmetric key ColumnKey 
    with algorithm=AES_256 
    encryption by certificate KeyProtection

create table SecretMessages(Ciphertext varbinary(4000))
go
create view dbo.MessageRecords 
as
select 
    cast(DECRYPTBYKEYAUTOCERT( cert_id('KeyProtection'), null,Ciphertext) as varchar(max)) MessageRecord
from dbo.SecretMessages
go 

open symmetric key ColumnKey decryption by certificate KeyProtection

insert into SecretMessages(Ciphertext) values (ENCRYPTBYKEY(key_guid('ColumnKey'),'Hello world 1'))
insert into SecretMessages(Ciphertext) values (ENCRYPTBYKEY(key_guid('ColumnKey'),'Hello world 2'))
insert into SecretMessages(Ciphertext) values (ENCRYPTBYKEY(key_guid('ColumnKey'),'Hello world 3'))
insert into SecretMessages(Ciphertext) values (ENCRYPTBYKEY(key_guid('ColumnKey'),'Hello world 4'))
insert into SecretMessages(Ciphertext) values (ENCRYPTBYKEY(key_guid('ColumnKey'),'Hello world 5'))
close symmetric key ColumnKey

select * from MessageRecords 
```

# linux - 用于比较文件的 Bash 循环

> ID：12413097
> 
> 赞同：4
> 
> 时间：2012-09-13T19:05:55.090
> 
> 标签：linux, bash, loops, if-statement, while-loop

我显然只是简单地遗漏了一些东西，并且知道问题在于它正在创建一个空白输出，这就是它无法比较的原因。但是，如果有人可以对此有所了解，那就太好了-我没有孤立它。

最终，我试图将`md5sum`存储在 txt 文件中的列表与存储在服务器上的列表进行比较。如果有错误，我需要它来报告。这是输出：

```
root@vps [~/testinggrounds]# cat md5.txt | while read a b; do
>   md5sum "$b" | read c d
>   if [ "$a" != "$c" ] ; then
>     echo "md5 of file $b does not match"
>   fi
> done
md5 of file file1 does not match
md5 of file file2 does not match

root@vps [~/testinggrounds]# md5sum file*
2a53da1a6fbfc0bafdd96b0a2ea29515  file1
bcb35cddc47f3df844ff26e9e2167c96  file2

root@vps [~/testinggrounds]# cat md5.txt
2a53da1a6fbfc0bafdd96b0a2ea29515  file1
bcb35cddc47f3df844ff26e9e2167c96  file2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T19:27:21.903

不是直接回答你的问题，而是[md5sum(1)](http://linux.die.net/man/1/md5sum)：

```
-c, --check
read MD5 sums from the FILEs and check them 
```

像：

```
$ ls
1.txt  2.txt  md5.txt
$ cat md5.txt
d3b07384d113edec49eaa6238ad5ff00  1.txt
c157a79031e1c40f85931829bc5fc552  2.txt
$ md5sum -c md5.txt
1.txt: OK
2.txt: OK 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T19:23:37.817

您遇到的问题是您的内部读取是在子外壳中执行的。在 bash 中，当您通过管道传输命令时会创建一个子 shell。一旦 subshel​​l 退出，变量 $c 和 $d 就消失了。您可以使用进程替换来避免子shell：

```
while read -r -u3 sum filename; do
   read -r cursum _ < <(md5sum "$filename")
   if [[ $sum != $cursum ]]; then
      printf 'md5 of file %s does not match\n' "$filename"
   fi
done 3<md5.txt 
```

重定向`3<md5.txt`导致文件以文件描述符 3 的形式打开。该`-u 3`选项使其`read`从该文件描述符中读取。内部`read`仍然从标准输入读取。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T21:14:45.210

我不打算争论。我只是尽量避免从内部循环中重复读取。

```
#! /bin/bash

cat md5.txt | while read sum file
do
    prev_sum=$(md5sum $file | awk '{print $1}')
    if [ "$sum" != "$prev_sum" ]
    then
        echo "md5 of file $file does not match"
    else
        echo "$file is fine"
    fi
done 
```

# java - 如何使用 Spring MVC 从表单中填充两个 bean？

> ID：12413105
> 
> 赞同：4
> 
> 时间：2012-09-13T19:06:06.880
> 
> 标签：java, spring-mvc, webforms, javabeans

所以我使用带有注释的 Spring MVC 3。

我有一个简单的 html 表单（实际上是 ExtJS），它包含三个字段。

```
1) Username
2) Password
3) Color 
```

好的，所以`username`属于`password`一个名为`User`. `color`属于另一个名为`Color`.

在我的用户控制器中，我有：

```
@RequestMapping(value = "/users/login", method = RequestMethod.POST)
@ResponseBody
  public String handleLogin(  @ModelAttribute("user") User paUser, 
                              @ModelAttribute("color") Color paColor, 
                              ModelMap map) {

    // at this point "paUser" contains both username AND password submitted from form

    // however, there is nothing in "paColor"

    ...

    return "user.jsp"
} 
```

我究竟做错了什么？

我是春天的新手，顺便说一句。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:10:16.037

通常您会创建一个表示表单的新类（这称为表单支持对象），例如`UserColorForm`，它包含请求正文中每个输入的属性。

您的控制器方法将如下所示：

```
@RequestMapping(value = "/users/login", method = RequestMethod.POST)
@ResponseBody
public String handleLogin(UserColorForm form, ModelMap map) {
    // now you can work with form.getUsername(), form.getColor() etc. 
```

如果 FBO bean 具有与表单输入名称匹配的属性名称，Spring 会将请求中的输入直接绑定到属性。即如果表单输入是`username=matt&color=blue`Spring 将创建我的表单的一个新实例并调用`setUsername("matt")`and `setColor("blue")`。

`@ResponseBody`顺便说一句，如果您要从方法 ( `user.jsp`)返回视图的名称，您可能不希望该方法被注释。`@ResponseBody`表示方法的返回值应该直接写入响应流。

# php - 事件日期时间在 mysql 中存储不正确

> ID：12413106
> 
> 赞同：0
> 
> 时间：2012-09-13T19:06:09.597
> 
> 标签：php, mysql, facebook, datetime, facebook-php-sdk

事件 'start_time' 被错误地存储到 mysql 数据库中。

错误存储的事件

[https://graph.facebook.com/112797205532177](https://graph.facebook.com/112797205532177) - 存储为 2012-10-12 19:00:00
正确的是 2012-10-13

```
{
"id": "112797205532177", 
"owner": {
    "name": "MUST...NOT...KILL", 
    "category": "Musician/band", 
    "id": "108837005801452"
}, 
"name": "METAL MEOWLISHA", 
"description": "W/ Brutailty", 
"start_time": "2012-10-13", 
"location": "The brass mug", 
"venue": {
    "id": "151496721577181"
}, 
"privacy": "OPEN", 
"updated_time": "2012-07-27T21:20:20+0000"
} 
```

[https://graph.facebook.com/278345158937377](https://graph.facebook.com/278345158937377) - 存储为 2012-11-18 18:00:00
正确的是 2012-11-19

```
{
"id": "280381075399709", 
"owner": {
    "name": "Lamb of God", 
    "category": "Musician/band", 
    "id": "9008741434"
}, 
  "name": "Lamb of God On Tour", 
  "description": "Wed/Oct-31\tLos Angeles, CA @ TBA\t", 
  "start_time": "2012-10-31", 
  "privacy": "OPEN", 
  "updated_time": "2012-09-05T21:37:29+0000"
} 
```

我一直在网上搜索解决方案。没有运气

目标是存储确切的字段“start_time”而不进行转换。我的代码中没有转换。我认为这与php设置有关

**编辑：添加了从图形 api 返回的结果，这是我的插入字符串（在 codeigniter**

```
$eventdata = array(
            'artists_name'=>$artists,
            'event_status'=>$event_stat,
            'formatted_datetime'=>$formatted_datetime,
            'formatted_location'=>$formatted_location,
            'event_id'=>$event_id,
            'venue_name'=>$venue_name,
            'venue_city'=>$vcity,
            'venue_region'=>$vstate,
            'venue_country'=>$vcountry,
            'venue_lat'=>$vlat,
            'venue_long'=>$vlong,
            'date_time'=>$date_time,
            'rsvp_url'=>$rsvp_url,
            'ticket_url'=>$ticket_url,
            'updated'=>$updated);
            $eventinsert = $this->db->insert_string('newEvents',$eventdata);
            $this->db->query($eventinsert); 
```

谢谢

**编辑这是完整的 php 文件**

```
include 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx',
));

$check = $facebook->api('278345158937377');
print_r ($check['start_time']);

?> 
```

到目前为止，我可以剥离一切。我觉得奇怪的是字符串结果会在显示之前自动转换。

facebook 网站上的图表和 fql 显示 2012-11-19 我的网站显示 2012-11-18

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:33:06.573

您的应用是否启用了[事件时区](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)迁移？

当我使用未启用迁移的应用程序生成的访问令牌查询事件 278345158937377 时，Facebook 返回`"start_time": "2012-11-19T01:00:00"`.

当我从启用了时区迁移的应用程序中创建它时，API 调用返回`"start_time": "2012-11-19"`.

尝试从应用仪表板的高级选项卡启用此迁移，看看是否能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:57:14.353

将 GMT 偏移量添加到时间并存储它。

例子：我在EST，时差是5小时，所以unix时间戳加18000

# jquery - 跳到 CSS3 过渡的结尾

> ID：12413108
> 
> 赞同：0
> 
> 时间：2012-09-13T19:06:15.807
> 
> 标签：jquery, html, css, css-transitions

我有一个应用程序，我试图从 jQuery .animate 切换到 CSS3 转换，以向左/向右移动卡片列表以响应滑动手势和按钮按下。

它现在很好用，除了一件事。我希望应用程序每次滑动一次移动一个“页面”卡片，而我能够保留这一点的唯一方法是在执行动画时防止滑动。否则，页面会突然失去对齐。

这对于手势滑动来说很好，但是如果用户单击按钮或转动旋钮来导航页面，则每次单击它应该移动一页。如果在动画期间单击它，我希望动画跳到最后并开始一个新动画。

使用 jQuery 很容易清除动画队列并跳到动画的末尾。这正是我想要的，但使用 CSS3。但是，到目前为止，我还无法弄清楚如何做到这一点。

下面是我尝试停止 CSS3 过渡，但它似乎不起作用（单击正方形一次滑动，单击中间滑动以删除 CSS3 过渡属性）。但是，第二次单击不会停止动画。

[http://jsfiddle.net/RnKyz/1/](http://jsfiddle.net/RnKyz/1/)

有什么方法可以跳到动画的结尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T00:33:24.307

您可以通过在开始原始动画之前添加一个类来“停止”动画，然后在您想要停止它时将其删除：

演示：http: [//jsfiddle.net/SO_AMK/LXqcz/2/](http://jsfiddle.net/SO_AMK/LXqcz/2/)

CSS：

```
#block {
    position: absolute;
    width: 100px;
    height: 100px;
    background: #ff0000;
}

.animate {
    transition: left 2s;
    -moz-transition: left 2s;
    -webkit-transition: left 2s;
    -o-transition: left 2s;
    -ms-transition: left 2s;
}​
​ 
```

jQuery：

```
$("#block").on("click", function() {
    $(this).addClass("animate").css("left", "300px");

    $(this).off("click");
    $(this).on("click", function() {
        $(this).removeClass("animate");
    });
});​ 
```

注意：我为演示简化了代码，完整的“固定”代码在这里：http: [//jsfiddle.net/SO_AMK/LXqcz/](http://jsfiddle.net/SO_AMK/LXqcz/)

# c++ - c++ overload pointer ostream

> ID：12413110
> 
> 赞同：1
> 
> 时间：2012-09-13T19:06:26.200
> 
> 标签：c++, arrays, class, pointers, overloading

I am a learning c++ and have a class project due in 5 days. I've spent 4 hours researching how to do this however I have not come up with an answer yet. Save me stack!

Problem. I have a pointer to a class which holds a dynamic array. I need to take that array and save it to a file to retrieve later. Here are my 2 headers and the implementation. I am not writing the code to "save to file" yet as that will be easy once I get around this issue. My problem is it keeps printing the address of the pointer and not the data within.

**vehReg.h**

```
class vehReg {
    public:
        /* STUFF */
    };
}
#endif 
```

**vehData.h**

```
#include "vehReg.h"

using namespace std;

class vehData {
    public:
        //CONSTRUCTORS
        vehData();

        //DECONSTRUCTOR
        ~vehData();

        //METHODS
        friend ostream &operator<<( ostream &output, const vehData &v);

    private:
        typedef unsigned long longType;
        typedef std::size_t sizeType;
        sizeType used,capacity;
        vehReg *data;
    };
}
#endif 
```

**vehData.cpp**

```
 //CONSTRUCTOR
    vehData::vehData(){
        capacity = 5;
        used = 0;
        data = new vehReg[capacity];
    }

    //DECONSTRUCTOR
    vehData::~vehData(){
        delete []data;
    }

    /* TRYING TO ACCOMPLISH THIS WITH AN OSTREAM OVERLOAD */
    void vehData::saveDataSloppy(){
        ofstream myFile;
        myFile.open ("database.db");
        for(int i=0;i<used;i++){
            myFile << data[i].getOwnerName() << "|";
            myFile << data[i].getVehicleLicense() << "|";
            myFile << data[i].getVehicleMake() << "|";
            myFile << data[i].getVehicleModel() << "|";
            myFile << data[i].getVehicleYear() << "\n";
        }
        myFile.close();
}

    void vehData::saveData(){
        cout << data;
    }

    ostream &operator<<(ostream &stream, const vehData &v){
        stream << v.data;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:18:51.357

`v.data`是一个指针，所以它打印一个指针。您希望它如何打印指针指向的任何内容。除了字符指针，`<<`总是打印你给它的东西（以某种方式格式化）。如果您不希望它打印指针，请给出其他内容。

假设它确实取消了指针的引用。它应该打印什么：一个 `vehReg`？20？指针没有关于大小的信息。如果您使用过`std::vector<vehReg>`（更好的选择），它会知道大小，但仍然没有过载`std::vector`，因为系统仍然不知道您希望它如何格式化（逗号分隔？每个都在新行上？）。而且您还没有告诉它如何打印`vehReg` 。

您显然了解如何重载的想法`<<`。您必须做的第一件事是也提供一个重载`vehReg`。并且两个重载都必须根据现有的重载来定义：没有一个 for `std::vector`，一个 for 指针不能做你想做的事（也不能做），所以你必须循环你的`<<`for `vehData`并输出每个元素，使用您决定的任何分隔符。（如果每个元素都在自己的行上，那么您可以使用`std::copy` and 一个`ostream_iterator`for 循环，但这可能比您目前所学的内容提前一点。）然后转发到`<<`for `vehReg`for each `vehReg`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:13:30.283

`v.data`是一个指针，所以它是一个内存地址。

`*v.data`是指针指向的内容（在这种情况下是整数）。

例如，

```
#include <iostream>

using namespace std;

void main () { 
int *ptr; 
int var = 5;
ptr = &var;
cout << ptr << endl;
cout << *ptr << endl;
system("pause");
} 
```

第一行将打印出如下内容：`0043F930`

第二行将打印出：`5`

这应该打印出数据数组中保存的元素。

```
void vehData::showStructure() const {
    for (int i = 0; i < capacity: i++) {
         cout << data[i];
    }
    cout << endl;
} 
```

# excel - 如何获取最后创建的书而不是 ThisWorkbook 的属性？

> ID：12413112
> 
> 赞同：0
> 
> 时间：2012-09-13T19:06:26.680
> 
> 标签：excel, vba

```
Dim fs As Object
Set fs = CreateObject("Scripting.FileSystemObject")
Dim folder As Object
Set folder = fs.GetFolder(ThisWorkbook.path)
Dim file As Object
Dim sKey As String
Dim fileDate As Date

For Each file In folder.Files
If file.DateCreated > fileDate Then
fileDate = file.DateCreated
'sKey = file.Name //  this works but I want next line instead
sKey = file.BuiltinDocumentProperties("Keywords").Value  //  Error is here
End If
Next file 
```

错误：对象不支持此属性或方法。
顺便说一句，这有效：

```
MsgBox ThisWorkbook.BuiltinDocumentProperties("Keywords").Value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:42:22.340

如果您不反对打开工作簿，那可能是最简单的方法：

```
Dim wb As Workbook
Set wb = Workbooks.Open(filename:=file.Name, ReadOnly:=True)
skey = wb.BuiltinDocumentProperties("Keywords").Value
wb.Close (False) 
```

或者，有一种[方法不需要打开工作簿](http://www.vbaexpress.com/forum/showthread.php?t=6827&highlight=DSOFile)，但需要[下载 dll](http://support.microsoft.com/?id=224351)。

# git - 在公共 .git 中，用户如何访问代码中的数据库，而不向他们透露登录凭据？

> ID：12413115
> 
> 赞同：0
> 
> 时间：2012-09-13T19:06:45.447
> 
> 标签：git

在公共存储库中，当您允许人们拉取分支时：

您如何允许他们访问您的数据库（与此相关的任何数据库），即放入连接代码，而不让他们知道您的凭据？

如果人们想帮助您的网站并需要访问您的数据库，如果该网站需要该数据库正常运行，使用什么秘密授予他们访问权限？他们只需要下载数据库的本地副本吗？

例如，当有人拉取 stackoverflow 的代码时，他们是否还包括一个清理过的数据库版本以供使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:27:15.273

一般来说，当您下拉代码时，数据库中的信息是不相关的，只有模式和可能的查找表。仅此而已，通常不会保存在存储库中。关于连接到数据库，大多数项目将 .gitignore 实际的配置文件，但有一个类似于 config.dist 的文件，其中包含配置的蓝图。然后，用户可以克隆项目，导入数据库，或者更可能运行迁移/安装脚本，然后使用系统上数据库的帐户详细信息复制和更新配置模板。同样，此步骤通常由安装脚本完成。

确切的用例会有所不同，但 PHP 世界中有许多示例，例如 GitHub 上的 symfony2 项目。

# algorithm - Byte-Pairing for data compression

> ID：12413116
> 
> 赞同：-3
> 
> 时间：2012-09-13T19:06:48.270
> 
> 标签：algorithm, compression

Question about Byte-Pairing for data compression. If byte pairing converts two byte values to a single byte value, splitting the file in half, then taking a gig file and recusing it 16 times shrinks it to 62,500,000\. My question is, is byte-pairing really efficient? Is the creation of a 5,000,000 iteration loop, to be conservative, efficient? I would like some feed back on and some incisive opinions please.

* * *

Dave, what I read was:
"The US patent office no longer grants patents on perpetual motion machines, but has recently granted at least two patents on a mathematically impossible process: compression of truly random data."
I was not inferring the Patent Office was actually considering what I am inquiring about. I was merely commenting on the notion of a "mathematically impossible process." If someone has, in some way created a method of having a "single" data byte as a placeholder of 8 individual bytes of data, that would be a consideration for a patent. Now, about the mathematically impossibility of an 8 to 1 compression method, it is not so much a mathematically impossibility, but a series of rules and conditions that can be created. As long as there is the rule of 8 or 16 bit representation of storing data on a medium, there are ways to manipulate data that mirrors current methods, or creation by a new way of thinking.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T00:42:19.967

通常，您所描述的“递归压缩”是海市蜃楼：压缩实际上并不是这样工作的。

首先，您应该意识到所有压缩算法都有可能扩展输入文件而不是压缩它。您可以通过一个简单的计数参数来证明这一点：请注意，任何文件的压缩版本必须不同于任何其他文件的压缩版本（否则您将无法正确解压缩该文件）。此外，对于任何文件大小`N`，可能存在固定数量的大小文件`<=N`。如果任何大小的文件`> N`都可以压缩到 size ，那么在“压缩”时`<= N`，相同数量的大小文件`<= N`必须扩展为 size 。`>N`

其次，“真正随机”的文件是不可压缩的。压缩之所以有效，是因为压缩算法希望接收具有某些可预测规律的文件。但是，“真正随机”的文件在定义上是不可预测的：每个随机文件都与其他具有相同长度的随机文件一样可能，因此它们不会压缩。

实际上，您有一个模型将某些文件视为比其他文件更有可能；要压缩此类文件，您希望为更有可能的输入文件选择较短的输出文件。 [信息论](http://en.wikipedia.org/wiki/Information_theory)告诉我们压缩文件最有效的方法是为每个概率`P`的输入文件分配一个长度为`~ log2(1/P)`位的输出文件。这意味着，理想情况下，给定长度的每个*输出*文件具有大致*相等的概率*，就像“真正随机”的文件一样。

在给定长度的完全随机文件中，每个文件都有概率`(0.5)^(#original bits)`。从上面看的最佳长度是`~ log2(1/ 0.5^(#original bits) ) = (#original bits)`——也就是说，原始长度是你能做的最好的。

因为一个好的压缩算法的输出几乎是随机的，重新压缩压缩文件会让你几乎没有收获。由于次优的建模和编码，任何进一步的改进实际上都是“泄漏”；此外，压缩算法往往会扰乱它们没有利用的任何规律性，从而使这种“泄漏”的进一步压缩更加困难。

* * *

有关此主题的更长时间的说明，以及许多此类失败命题的示例，请参阅[comp.compression FAQ](http://www.faqs.org/faqs/compression-faq/part1/section-8.html)。“递归压缩”的主张非常突出。

# asp.net-mvc - 在剃刀中混合服务器变量

> ID：12413119
> 
> 赞同：0
> 
> 时间：2012-09-13T19:07:02.090
> 
> 标签：asp.net-mvc, razor

在我看来，

id = "结果@result"

呈现的 html 是

```
id="Result 123" 
```

但是如何在没有空格的情况下获得 id

```
id = "Result123" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:10:24.290

你可以做：

```
id = "Result@(result)" 
```

有关更多有用示例，请参阅此[C# Razor 语法快速参考](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)。

# ios - Crop UIImage according to Image Resolution

> ID：12413120
> 
> 赞同：2
> 
> 时间：2012-09-13T19:07:06.600
> 
> 标签：ios

I have one `UIImageView`. Its content mode is set to `AspectFit`.

```
[imageView setContentMode:UIViewContentModeScaleAspectFit]. 
```

I need to crop a `subImage` from this image. This is the code which crops the image:

```
CGImageRef imageRef = CGImageCreateWithImageInRect([imageView.image CGImage], customRect);
UIImage *cropped = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef); 
```

where `customRect` is the rectangle from which I need to crop the image.

This is how I calculate it:

```
CGRect customRect = CGRectMake((cropView.frame.origin.x/xFactor),
                               (cropView.frame.origin.y/yFactor),
                               (cropView.frame.size.width/xFactor),
                               (cropView.frame.size.height/yFactor)); 
```

The problem comes in cropping. `CGImageCreateWithImageInRect` crops the given area according to the actual image size which, in some cases, is larger than the image view size. I tried using other approaches such as `UIGraphics:getImageFromCurrentImageContext` but these do not keep the image quality as much as it degrades them.

# jquery - 在 [] 之间选择内容

> ID：12413123
> 
> 赞同：-4
> 
> 时间：2012-09-13T19:07:26.850
> 
> 标签：jquery

我有这样的 HTML 代码：

```
<div class="inside">
<h2>Some text</h2>
Lorem Ipsum:<br />
  [423A18K5][R68A18K5]       
</div>

<div class="inside2">
<h2>Some other text</h2>
Lorem Ipsum:<br />
  [9903A1K5][P095GR31]       
</div> 
```

我需要做的：我必须使用 jQuery 选择 [ 和 ] 之间的所有代码（并稍后将它们传递给 ajax）。注意：我可以使用其他符号代替 []，但不能使用 HTML 标签。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:44:19.050

不确定您尝试从中获取数据的所有 div 是否都有一个公共类，或者它们是否像您的示例一样都是唯一的。您还为上面的 div 的内容提供了一个非常具体的格式。IE：

```
<div class="..."> ... [#s][#s]...</div> 
```

下面的代码假设您抓取的内容是相同的格式。基本上它选择你想要的 div，获取里面的文本，然后删除前导或结束空格，删除第一个 '[' 之前的任何内容，然后删除第一个 [ 和最后一个 ]，然后创建数组，在 '][ 上拆分'。

```
 var codes = $('.inside').text().trim().replace(/^[^\[]*/,'').replace(/^\[/,'').replace(/\]$/,'').split(']['); 
```

正则表达式可能会稍微清理一下，但它很简单并且有效。

# maven - Maven 可以向用户询问值并将它们输入到文件中吗？

> ID：12413124
> 
> 赞同：1
> 
> 时间：2012-09-13T19:07:33.027
> 
> 标签：maven, configuration

我有很多配置文件的值必须更改。我想知道是否有人运行“包”命令它可以要求一些值并将它们插入到我的项目文件中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:13:24.867

更好的方法是根据环境具有不同的属性/配置文件。

1.  产品
2.  开发

将这两组值保存在两个不同的文件中。有时指定文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:13:11.560

对于 90% 的构建任务，有 Maven。对于其他所有内容，都有[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)。

我建议创建一个自定义的 ant 脚本（可以嵌入到您的 中），提示用户输入并使用[Ant 输入任务](http://ant.apache.org/manual/Tasks/input.html)`pom.xml`写出您的配置文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:24:22.273

您可以使用 maven`-P`选择一个 maven 配置文件，然后选择它的属性文件。

```
<profiles>
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <resource.prefix>dev</resource.prefix>
        </properties>
    </profile>
    <profile>
        <id>prod</id>
        <properties>
            <resource.prefix>prod</resource.prefix>
        </properties>
    </profile>
</profiles> 
```

现在访问您的资源文件作为`${resource.prefix}_config.properties`. 因此，当配置文件为 prod 时，将`prod_config.properties`获取资源文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T07:23:27.123

[除非您执行noahz](https://stackoverflow.com/questions/12413124/can-maven-ask-the-user-for-values-and-enter-them-into-a-file/12413212#12413212)建议的一些 ant 操作，否则您无法真正让 maven 提示输入。

如果您不想使用 Profiles，您可以做的是在您的 pom 文件中使用属性。

例子：

```
<project>
    <groupId>abc</groupId>
    <artifactId>def</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <myProperty>someValue</myProperty>
    </properties>

    <build>
        <plugins>
            <plugin>
                ...
                <configuration>
                    <outputDir>${myProperty}</outputDir>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

您可以在 pom 文件中的任何位置使用该属性，甚至可以在过滤资源时使用该属性。

默认情况下，该属性可以为空，然后从命令行设置一个新值：

```
mvn package -DmyProperty=anotherValue 
```

并且`anotherValue`将传播到 pom 中使用它的任何地方。

* * *

[您可以在此处](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)阅读有关 Maven 资源过滤的信息。

如果您将文件放入其中，`src/main/resources`则可以使用上述属性进行过滤：

`src/main/resources/important-stuff.properties`

```
some.nice.property = Nice!
some.variable.property = ${myProperty} 
```

这应该添加到 pom 中：

```
<build>
    ...
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    ...
</build> 
```

过滤`important-stuff.properties`后的最终会`target/classes`在罐子里和罐子里，看起来像这样：

```
some.nice.property = Nice!
some.variable.property = anotherValue 
```

资源过滤真的很方便。

# c# - WriteableImage - how to obtain color of pixel?

> ID：12413125
> 
> 赞同：0
> 
> 时间：2012-09-13T19:07:33.950
> 
> 标签：c#, wpf

Like in the title. I need to obtain each value: red, green and blue of specific pixel. What is the best way to do that? I didn't find any examples of copypixels in WriteableImage.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:11:30.157

你可以使用`WriteableBitmapEx Framework`

链接：[http ://wp7rocks.com/marketplace/components/details/51](http://wp7rocks.com/marketplace/components/details/51)

# ruby-on-rails - Travis CI 构建失败：在任何源中都找不到 XXX

> ID：12413127
> 
> 赞同：0
> 
> 时间：2012-09-13T19:07:44.447
> 
> 标签：ruby-on-rails, gemfile, travis-ci

我正在将 Travis CI 用于 Rails 项目，并且我得到“在任何来源中都找不到 foobar-0.2.3 gem”。在`bundle install`舞台上。（对不起，现在不在我的电脑上，也不记得确切的宝石）

看起来这是因为该 gem 的新版本最近被放在 RubyGems 上，而旧版本的 gem（在我的 Gemfile.lock 中）被拉出。

我该如何解决这个问题？我应该手动进入我的 Gemfile.lock 并输入正确的版本吗？（手动编辑 Gemfile.lock 对我来说似乎很奇怪，不确定这是否是你应该做的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:18:17.780

手动编辑你的锁文件是不明智的，因为你不知道有问题的 gem 发生了什么变化，例如它可能添加了依赖项。

如果您使用[`bundle update gemname`](http://gembundler.com/man/bundle-update.1.html)Bundler，则会将该 gem 更新到最新的可用版本并自动更新您的 Gemfile.lock。您也可以在 Gemfile 中手动指定版本并运行`bundle install`.

# iphone - 核心数据 - 如何强制 NSPrivateQueueConcurrencyType 上下文串行保存？

> ID：12413128
> 
> 赞同：0
> 
> 时间：2012-09-13T19:07:48.290
> 
> 标签：iphone, core-data, concurrency

我对自 iOS 5 以来 CoreData 新支持的并发功能感到兴奋。

维护一个私有队列，所有保存或获取请求都可以通过该队列完成。

但是，我可以设置`the private queue`CoreData 以便**它一一执行请求**吗？

我的应用程序正在从多个提要中下载新闻项目。每次从一个提要下载和解析完成后，我只是通过私有队列将提要的项目保存到 CoreData 中。

但是，由于我同时从多个提要下载和解析，我总是有多个项目组，即`multiple save requests`CoreData。

现在的情况是，我猜 CoreData 只有多个线程，每个线程都将一组项目保存到数据库中。与此同时，我的 UI 卡住了。

你认为我可以控制私人队列，这样无论有多少同时保存的请求，它们都会一个一个完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:31:26.817

核心数据（可能）只使用一个串行队列或线程，因为它是串行的。我最近将我的应用程序从使用我创建的串行队列（应用程序是 4.3）转换为在 iOS 5 中使用这个新选项。在所有情况下，当您“执行阻止”时，该方法都以串行方式处理。此外，您现在可以从任何队列中调用“[moc performBlocK:...]”，因为该调用是线程安全的！

我相信您想要做的是让您的后台线程（最有可能添加选项）使用“performBlock：”（无需等待）。然后，您提供的块会以 FIFO 方式排队和处理。稍后，如果您的表想要获取对象，它可以发出“performBlockAndWait:”，或者您的代码可以选择使用 performBlock 请求最新的对象，并在提供的块消息结束时将对象集返回给您的应用程序你需要。

此外，我只经常在开发版本中保存，以验证有效性。一旦您确定一切正常，您就可以在下载所有数据后执行后台保存。

EIDT：重申一下 - 如果您在加载 viewController 时正在下载并使用图像或其他数据，并且发生了很多事情，那么这是进行保存的最糟糕的时间。使用计时器或dispatch_after，在一切看起来稳定后几秒钟，然后进行保存。

# java - How-to get chars represented by a range of ASCII values of a specific charset?

> ID：12413129
> 
> 赞同：0
> 
> 时间：2012-09-13T19:07:48.377
> 
> 标签：java, character-encoding

What I'm trying to do is generate an array of chars that represent certain ASCII values in a certain ISO/IEC charset. Let's say, if I'm intersted in ASCII values 211-217 of ISO/IEC 8859-7 charset then the result should be { Σ, Τ, Υ, Φ, Χ, Ψ, Ω }. I tried this:

```
for (int i = 211; i <= 217; i++) {
    System.out.println(String.valueOf((char)i));
} 
```

But the results are based on the default system charset.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:13:34.723

您不能将特定编码中的单个字符代码`char`直接转换为 s，因此您需要使用`byte[]`to`String`转换。由于 ISO-8859-7 是单字节编码，每个字符代码对应一个`byte`：

```
Charset cs = Charset.forName("ISO-8859-7");
for (int i = 211; i <= 217; i++) {
    String s = new String(new byte[] { (byte) i }, cs)
    System.out.println(
        String.format("Character %s, codepoint %04X", s, (int) s.charAt(0)));
} 
```

**编辑：**使用上面给出的输出格式，您可以确保按照[ISO-8859-7](http://en.wikipedia.org/wiki/ISO/IEC_8859-7)的规定正确解码 Unicode 代码点。如果您仍然看到`?`s 而不是字符，则说明输出有问题 - 您的控制台不支持这些字符。

检查结果`System.getProperty("file.encoding")`- 它应该是某种 Unicode（`UTF-8`等）。如果您从 IDE 运行代码，请检查其配置以了解控制台编码设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:14:53.130

你的问题并不完全清楚。我认为您的意思是您有 ISO-8859-7 编码的字符，并且您想将它们转换为 Java 字符（这是 UTF-16 编码的 Unicode 点）。

在这种情况下，试试这个：

```
byte[] encoded = new byte[7];
for (int e = 211; e <= 217; ++e) 
  encoded[e - 211] = (byte) e;
String s = new String(encoded, "ISO-8859-7");
for (int idx = 0; idx < s.length(); ++idx) 
  System.out.println(s.charAt(idx)); 
```

# iphone - How to call presentModalViewController from ParentViewController Method in paging app

> ID：12413131
> 
> 赞同：0
> 
> 时间：2012-09-13T19:07:50.643
> 
> 标签：iphone, objective-c, parent-child, presentmodalviewcontroller, parentviewcontroller

I'm using a Page App. I have a viewController A and this have a scrollView with 3 others viewController lets call them ViewController B,C,D and I switch controllers B,C,D using scroller's paging. My problem is: I want to call presentModalViewController from a button in ViewController B but when I do this in ViewControllerB.m

```
-(void) nextController{
    ViewControllerE *controllerE = [[[ViewControllerE alloc] init]autorelease];
    controllerE.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:controllerE animated:YES];
} 
```

It works and cover only B's view but I still can switch between E,C,D. I don't want this. I want to call this method from parent ViewController A, because when I call ViewController E, I want to make paging off.

I tried:

```
 [self.parentViewController presentModalViewController:controllerE animated:YES]; 
```

But didn't work.

Anyone can help me please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:54:54.853

这是什么结果：

```
[self.parentViewController presentModalViewController:controllerE animated:YES]; 
```

它会给你一个错误 - 有什么事情发生吗？

尝试用这个调试：

```
NSLog(@"%@", self.parentViewController); 
```

它给你什么结果？

# haskell - 在 Haskell 中实现主服务器循环？

> ID：12413136
> 
> 赞同：5
> 
> 时间：2012-09-13T19:08:11.373
> 
> 标签：haskell

实现需要等待异构事件集的服务器的主循环的普遍接受的方法是什么？那就是服务器应该等待（而不是忙等待），直到发生以下情况之一：

*   新的套接字连接
*   现有套接字上可用的数据
*   操作系统信号
*   第三方库回调

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T19:43:48.910

我认为您正在考虑具有单线程、非阻塞 I/O 和 select() 调用的 C 范例。

你可以设法在 Haskell 中编写类似的东西，但 Haskell 还提供更多功能：

*   [轻量级线程](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent.html)
*   安全高效的并发数据原语，如[Mvar](https://downloads.haskell.org/~ghc/latest/docs/html/libraries/base/Control-Concurrent-MVar.html)和[Chan](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/base/Control-Concurrent-Chan.html)
*   大枪： [软件事务内存](http://www.haskell.org/haskellwiki/Software_transactional_memory)

我建议您为与外界的每个单独的接触点创建一个新线程，并保持一切与 STM 协调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:17:17.670

使用`takeMVar`and`putMVar`在线程之间进行同步。如果不允许操作，它们通常会阻塞线程。阅读[ghc 文档](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/base/Control-Concurrent-MVar.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T02:43:45.707

我想澄清一下，对于您遇到的特定问题，我认为首先发布的两个解决方案比这个更好，但这是解决您提出的问题类型的一种方法。

一个简单的方法是让你的定义像

```
data SocketConn = ....
data DataAvail = ...
data OSSignal = ...
data Callback = ... 
```

并定义的未简化版本

```
data ServerEvent = Sok SocketConn | Dat DataAvail | Sig OSSignal | Call Callback

handleEvent :: ServerEvent -> IO ()
handleEvent (Soc s) = ....
handleEvent (Dat d) = ....
handleEvent (Sig o) = ....
handleEvent (Call c) = .... 
```

就像我说的，阅读其他答案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T16:19:19.793

软件事务内存 (STM) 是进行多路等待的主要方式。

但是，从外观上看，在您的情况下，您可能只想为每个任务生成一个单独的 Haskell 线程，并让每个这样的线程在没有任何事情发生时阻塞。

你不会想创建一千个操作系统线程，但是一千个 Haskell 线程一点也不麻烦。

（如果这些线程需要不时协调，那么再次，STM 可能是最简单、最可靠的方法。）

# android - Filtering by Text in LogCat

> ID：12413137
> 
> 赞同：0
> 
> 时间：2012-09-13T19:08:11.597
> 
> 标签：android, eclipse, android-logcat

Would it possible to filter text for a specific Tag?

I currently can filter Tags, but not specific text for a specific Tag.

**Reference** (Tag Filtering: [https://plus.google.com/106300001086744879268/posts/4hbonf2w51D](https://plus.google.com/106300001086744879268/posts/4hbonf2w51D))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:15:48.307

是的，这是可能的。

我的 LogCat 可以过滤 LogTag、Log Message、PID、App Name、LogLevel。

但就在我更新我的 SDK 和 ADT 时。

[]s 贝尔坦

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T19:16:31.163

您可以在创建标签时指定要查找的内容。您分配一个名称并调用该名称。

# sql - 项目和总计费时间的月度报告

> ID：12413145
> 
> 赞同：0
> 
> 时间：2012-09-13T19:08:50.830
> 
> 标签：sql, sql-server-2008

我正在尝试创建 sql 语句以显示每月在项目上花费的总时间，有人可以帮我查询 sql

```
SELECT Projects.projectID,
        Projects.projectName,
        billingsTimes.actualTotalTime,
        billingsTimes.taskID,
        Tasks.taskName
  FROM Projects_tasks
       INNER JOIN Projects ON Projects_tasks.projectID = Projects.projectID
       INNER JOIN Tasks ON Projects_tasks.taskID = Tasks.taskID
       INNER JOIN billingsTimes ON Tasks.taskID = billingsTimes.taskID 
```

![在此处输入图像描述](../Images/0227d11eb5917fb775fe44f4722b5007.png)

数据库图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:14:01.757

这会工作吗？：

```
SELECT  Projects.projectID,
        Projects.projectName,
        SUM(billingsTimes.actualTotalTime),
        billingsTimes.taskID,
        Tasks.taskName, 
        MONTH(billingTimes.createdOn),
        YEAR(billingTimes.createdOn)
FROM    Projects_tasks
        INNER JOIN Projects ON Projects_tasks.projectID = Projects.projectID
        INNER JOIN Tasks ON Projects_tasks.taskID = Tasks.taskID
        INNER JOIN billingsTimes ON Tasks.taskID = billingsTimes.taskID
GROUP BY
        Projects.projectID,
        Projects.projectName,
        billingsTimes.taskID,
        Tasks.taskName, 
        MONTH(billingTimes.createdOn),
        YEAR(billingTimes.createdOn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:15:42.633

```
select p.projectID,
    p.projectName,
    year(bt.createdOn) as Year,
    month(bt.createdOn) as Month,
    sum(bt.actualTotalTime) as TotalTime
from Projects_tasks pt
inner join Projects p on pt.projectID = p.projectID
inner join Tasks t on p.taskID = t.taskID
inner join billingsTimes bt on t.taskID = bt.taskID
group by p.projectID,
    p.projectName,
    year(bt.createdOn),
    month(bt.createdOn), 
```

# jquery - MVC4 - Refresh View based on the current index of a Model (which is a List of Items) - Next/Previous

> ID：12413146
> 
> 赞同：0
> 
> 时间：2012-09-13T19:08:50.793
> 
> 标签：jquery, asp.net, razor, asp.net-mvc-4

I have a MVC4 view that's bound to a list-Model (List). Now I have some fields that render the properties of an Item - so I initially render those fields with `Model.ElementAt(0)`. I now have `Next/Previous` buttons on my page that should move to the next/previous Item in my Model (List) and refresh the fields on the View. What's the best way to accomplish this (using jquery preferably)?

Something of this sort...

```
@model IQueryable<Item>
@{
    var items = this.Model.ToList();
    var i = 0;
    var item = items.ElementAt(i);

}
<script type="text/javascript">
    $(document).ready(function () {
        $('input:submit').click(function (event) {
        event.preventDefault();
            @{
                i++;
                item = items.ElementAt(i);
            }

            var str = @Html.Partial("_PartialView", item); /* when I have this - it gives a runtime error saying cannot instantiate an Interface */
            $("partialQuestion").html(str);
        });
    });
</script>

@using (Html.BeginForm())
{
        <div id="partialQuestion">
        @{
            Html.RenderPartial("_PartialView", item); // this basically renders some fields on a usercontrol that's has the @model of type Item
        }
        </div>
        <div>
            <input type="submit" value="Next" id="next" />
        </div>
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

# c# - 从 XML 中选择，构建数据结构

> ID：12413148
> 
> 赞同：0
> 
> 时间：2012-09-13T19:09:02.863
> 
> 标签：c#, xml, linq

我正在尝试基于 xml 内容构建数据结构。

结构如下所示：

```
Dictionary<string, List<Dictionary<string, string>>> 
```

XML 看起来像这样：

```
<Table name="testTable">
<Row>
  <Column name="test01" value="2029" />
  <Column name="test02" value="2029" />
</Row>
<Row>
  <Column name="test01" value="2029" />
  <Column name="test02" value="2029" />
</Row>
</Table>
<Table name="testTable01">
<Row>
  <Column name="test01" value="2029" />
  <Column name="test02" value="2029" />
</Row>
<Row>
  <Column name="test01" value="2029" />
  <Column name="test02" value="2029" />
</Row>
</Table> 
```

它应该导致类似的结果：

```
Dictionary<tableName, List<Dictionary<columnName, columnValue>>> 
```

使用一些嵌套的 foreach 循环来做到这一点是没有问题的，但我正在寻找一种方法来使用 LINQ 扩展方法“在一行中”做到这一点。我怎么能那样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:22:32.790

听起来你想要这样的东西：

```
var tables = doc.Descendants("Table")
                .ToDictionary(t => (string) t.Attribute("name"),
                              t => ExtractRowsFromTable(t));

...

private static List<Dictionary<string, string>> ExtractRowsFromTable(XElement table)
{
    return table.Elements("Row")
                .Select(row => row.Elements("Column")
                                  .ToDictionary(c => (string) c.Attribute("name"),
                                                c => (string) c.Attribute("value"))
                .ToList();
} 
```

你*可以*在一行中完成所有这些，基本上是内联`ExtractRowsFromTable`——但我*真的*不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:29:04.890

```
string xml = 
        @"<Root>
            <Table name=""testTable"">
                <Row>
                    <Column name=""test01"" value=""2029"" />
                    <Column name=""test02"" value=""2029"" />
                </Row>
                <Row>
                    <Column name=""test01"" value=""2029"" />
                    <Column name=""test02"" value=""2029"" />
                </Row>
            </Table>
            <Table name=""testTable2"">
                <Row>
                    <Column name=""test01"" value=""2029"" />
                    <Column name=""test02"" value=""2029"" />
                </Row>
                <Row>
                    <Column name=""test01"" value=""2029"" />
                    <Column name=""test02"" value=""2029"" />
                </Row>
            </Table>
        </Root>";
XDocument xDoc = XDocument.Parse(xml);
var table = xDoc
        .Descendants("Table")
        .Select(t => new
        {
            Name = t.Attribute("name").Value,
            Rows = t.Descendants("Row")
                    .Select(r=> r.Descendants("Column")
                                 .ToDictionary(c=>c.Attribute("name").Value,
                                               c=>c.Attribute("value").Value))
                    .ToList()
        })
        .ToList(); 
```

# jsp - 在不使用会话上下文的情况下将值保留在 Web 应用程序中

> ID：12413149
> 
> 赞同：2
> 
> 时间：2012-09-13T19:09:08.743
> 
> 标签：jsp, servlets

我有一个“变量”，用户可以在 JSP/Struts 应用程序中修改它，该变量必须在整个 Web 应用程序的会话中保持不变。他们可能会离开设置和查看它的页面（仍然留在应用程序中），当他们回来时，他们最后为该变量设置的值应该仍然存在。

显而易见的选择是将其存储为会话属性。这就是我几年前会做的事情。但是 Internet Explorer 8 和更高版本会导致 Web 应用程序用户对打开同一站点的所有浏览器进行一个会话。换句话说，如果用户在浏览器中打开我的应用程序，然后在另一个浏览器中再次打开它，他们共享一个会话。我认为他们正在共享代表该会话的 cookie。结果是，如果他们更改了一个浏览器会话中的值，那么该值也将在另一个浏览器中更改。

我的用户将在单个工作站上多次运行 Web 应用程序，我需要他们能够在不同的浏览器窗口（甚至选项卡）中为上述变量设置不同的值，并为此保持不同的值浏览器（或选项卡）的生命周期，但不影响同一应用程序的任何其他打开的浏览器（或选项卡）。

所以，据我所知，使用会话属性是不可能的。（嗯，有 IE -nomerge 选项，但没有办法强制用户使用该选项启动 IE）。

我希望我不是第一个处理这个问题的人，并且有人已经优雅地解决了这个问题，并且那个人阅读了这篇文章并做出了回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:45:37.177

如果它们都发回相同的会话 ID，则服务器无法区分不同的选项卡或窗口。但是，如果您需要这种功能，那么我会考虑将“差异”构建到 URL 中。例如，一个选项卡可能有 /myapp/xxxxx/，而另一个选项卡可能有 /myapp/yyyyy/。它们可能都共享同一个会话，但服务器仍然可以区分它们。只要浏览器总是在某处返回魔术部分（例如：xxxxx），URL 的实际格式并不重要。在服务器端，您可以根据 sessionid 和发出请求的 URL 跟踪每个会话的多个数字。

唯一需要决定的是您如何注意到新选项卡或窗口已打开，因为您必须分配一个新 URL，但这只是管道。例如，您可能有一个需要设置为匹配 URL 的本地 js 变量，然后当新选项卡打开时，此变量将不匹配，因此您可以转到新的适当 URL 并设置本地变量。

# python - “GuideSpider”对象不可下标

> ID：12413153
> 
> 赞同：1
> 
> 时间：2012-09-13T19:09:28.470
> 
> 标签：python, scrapy

我有一个 Scrapy 项目，我想用它来抓取一些网站。当我尝试将所有信息保存在 MySQL 数据库中时，标题中的错误会弹出。我到处阅读，发现这是一个“列表”问题，可能与 items[] 列表有关......您能帮我理解这个错误的含义以及我应该在哪里修复代码吗？还请解释原因，因为我想了解。非常感谢。

**蜘蛛代码：**

```
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders.crawl import Rule, CrawlSpider
from scrapy.selector import HtmlXPathSelector

from gscrape.items import GscrapeItem

class GuideSpider(CrawlSpider):
    name = "Dplay"
    allowed_domains = ['www.example.com']
    start_urls = [
        "http://www.examplea.com/forums/forumdisplay.php?f=108&order=desc&page=1"
    ]
    rules = (
        Rule(SgmlLinkExtractor(allow=("forumdisplay.php.*f=108.*page=")), callback='parse_item', follow=True),
    )

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)
        items = []
        sites = hxs.select('//div')
        for site in sites:
            item = GscrapeItem()
            item['title'] = site.select('a[@class="threadcolor"]/text()').extract()
            item['guide_url'] = site.select('a[@class="threadcolor"]/@href').extract()
            item['subject'] = site.select('./text()[1]').extract()
            items.append(item)
        return items 
```

**管道代码：**

```
from scrapy.exceptions import DropItem
from string import join
from scrapy import log
from twisted.enterprise import adbapi

import MySQLdb.cursors

class GscrapePipeline(object):

    def process_item(self, item, spider):
        if item['guide_url']:
                item['guide_url'] = "http://www.example.com/forums/" + join(item['guide_url'])
                return item
        else:
            raise DropItem()

class MySQLStorePipeline(object):

    def __init__(self):
        # @@@ hardcoded db settings
        # TODO: make settings configurable through settings
        self.dbpool = adbapi.ConnectionPool('MySQLdb',
            db='prova',
            host='127.0.0.1',
            user='root',
            passwd='',
            cursorclass=MySQLdb.cursors.DictCursor,
            charset='utf8',
            use_unicode=True
        )

    def process_item(self, spider, item):
        # run db query in thread pool
        query = self.dbpool.runInteraction(self._conditional_insert, item)
        query.addErrback(self.handle_error)

        return item

    def _conditional_insert(self, tx, item):
    # create record if doesn't exist.
    # all this block run on it's own thread
        tx.execute("select * from prova where guide_url = %s", item['guide_url'])
        result = tx.fetchone()
        if result:
            log.msg("Item already stored in db: %s" % item, level=log.DEBUG)
        else:
            tx.execute(\
            "insert into prova (title, guide_url, subject) "
            "values (%s, %s, %s)",
            (item['title'],
             item['guide_url'],
             item['subject']
                ))
            log.msg("Item stored in db: %s" % item, level=log.DEBUG)

    def handle_error(self, e):
        log.err(e) 
```

错误：**exceptions.TypeError：“GuideSpider”对象不可下标（第 47 行）pipelines.py**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T10:45:45.870

根据[文档](http://doc.scrapy.org/en/latest/topics/item-pipeline.html#process_item)：

```
process_item(item, spider) 
```

我的意思是在你的管道中：

```
def process_item(self, spider, item): 
```

你有错误的参数顺序，这意味着你传递给`_conditional_insert`你的蜘蛛而不是项目。

向我们学习调试器。安装[ipdb](https://pypi.org/project/ipdb/)并在第 47 行（有问题的行之前）放置：

```
import ipdb; ipdb.set_trace() 
```

当程序到达断点时，您将能够看到变量的值，手动调用方法并查看回溯。

# android - 带有复选框的 Android 联系人选择器

> ID：12413159
> 
> 赞同：6
> 
> 时间：2012-09-13T19:09:59.440
> 
> 标签：android, android-contacts

有很多关于同一主题的讨论，但在这里花了 4 个小时后，我找不到有效的描述或链接来制作带有复选框的联系人选择器。

我有一个带有**DONE**按钮`listview`和`checkbox`. 我设法正确显示了联系人。现在我想以 a `bundle`（我认为最好的方式）返回选定的联系电话号码，以便我可以在`onActivityResult()`. 我不确定我遵循的方式是否正确。

这是我的代码：

```
public class ContactPickerMulti extends ListActivity implements OnClickListener {

    // List variables
    public String[] Contacts = {};
    public int[] to = {};
    public ListView myListView;

    Button save_button;
    private TextView phone;
    private String phoneNumber;
    private Cursor cursor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contacts_multi);

        // Initializing the buttons according to their ID
        save_button = (Button) findViewById(R.id.contact_done);

        // Defines listeners for the buttons
        save_button.setOnClickListener(this);

        Cursor mCursor = getContacts();
        startManagingCursor(mCursor);

        ListAdapter adapter = new SimpleCursorAdapter(
                this,
                android.R.layout.simple_list_item_multiple_choice,
                mCursor,
                Contacts = new String[] { ContactsContract.Contacts.DISPLAY_NAME },
                to = new int[] { android.R.id.text1 });

        setListAdapter(adapter);
        myListView = getListView();
        myListView.setItemsCanFocus(false);
        myListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    }

    private Cursor getContacts() {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] { ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME };
        String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER + " = '"
                + ("1") + "'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";

        return managedQuery(uri, projection, selection, selectionArgs,
                sortOrder);
    }

    public void onClick(View src) {
        Intent i;
        switch (src.getId()) {
        case R.id.contact_done:

            SparseBooleanArray selectedPositions = myListView
                    .getCheckedItemPositions();
            SparseBooleanArray checkedPositions = myListView
                    .getCheckedItemPositions();
            if (checkedPositions != null) {
                for (int k = 0; k < checkedPositions.size(); k++) {
                     if (checkedPositions.valueAt(k)) {
                          String name =
                                 ((Cursor)myListView.getAdapter().getItem(k)).getString(1);
                            Log.i("XXXX",name + " was selected");
                        }
                }
            }

            break;
        }

    }
} 
```

我想将数字作为数组或列表发送。做这个的最好方式是什么？任何帮助或导致正确的道路都受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T12:53:43.063

我在以下代码中使用此代码`onClick`：

```
long[] id = getListView().getCheckedItemIds();//  i get the checked contact_id instead of position
        phoneNumber = new String[id.length];
        for (int i = 0; i < id.length; i++) {

            phoneNumber[i] = getPhoneNumber(id[i]); // get phonenumber from selected id

        }

        Intent pickContactIntent = new Intent();
        pickContactIntent.putExtra("PICK_CONTACT", phoneNumber);// Add checked phonenumber in intent and finish current activity.
        setResult(RESULT_OK, pickContactIntent);
        finish(); 
```

//

```
private String getPhoneNumber(long id) {
    String phone = null;
    Cursor phonesCursor = null;
    phonesCursor = queryPhoneNumbers(id);
    if (phonesCursor == null || phonesCursor.getCount() == 0) {
        // No valid number
        signalError();
        return null;
    } else if (phonesCursor.getCount() == 1) {
        // only one number, call it.
        phone = phonesCursor.getString(phonesCursor
                .getColumnIndex(Phone.NUMBER));
    } else {
        phonesCursor.moveToPosition(-1);
        while (phonesCursor.moveToNext()) {

            // Found super primary, call it.
            phone = phonesCursor.getString(phonesCursor
                    .getColumnIndex(Phone.NUMBER));
            break;

        }
    }

    return phone;
}

private Cursor queryPhoneNumbers(long contactId) {
    ContentResolver cr = getContentResolver();
    Uri baseUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI,
            contactId);
    Uri dataUri = Uri.withAppendedPath(baseUri,
            ContactsContract.Contacts.Data.CONTENT_DIRECTORY);

    Cursor c = cr.query(dataUri, new String[] { Phone._ID, Phone.NUMBER,
            Phone.IS_SUPER_PRIMARY, RawContacts.ACCOUNT_TYPE, Phone.TYPE,
            Phone.LABEL }, Data.MIMETYPE + "=?",
            new String[] { Phone.CONTENT_ITEM_TYPE }, null);
    if (c != null && c.moveToFirst()) {
        return c;
    }
    return null;
} 
```

以及您开始的最后`onActivityResult`一项活动`PickContactsActivity`

```
 // TODO Auto-generated method stub
    // super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK) {

        if (requestCode == Constants.REQUEST_CODE_PICK_CONTACT) {

            if (data != null) {

                String[] temp = data.getStringArrayExtra("PICK_CONTACT");

            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:42:13.933

在 中使用`startActivityForResult(newActivity)`时，`newActivity`您必须先调用 ，`setResult(RESULT_OK)`然后`finish()`关闭`Activity`。或者，您可以`Intent`在对`setResult(RESULT_OK, intent)`. 调用`setResult()`将导致调用你的实现`onActivityResult()`，你可以在哪里处理`Activity`. 因此，在您的情况下，您只需`Intenet`使用其中一种方法创建一个数组列表并将其添加到其中`putExtra()`。`Intent`然后将其传递到`onActivityResult()`您可以提取该信息的位置。有关更多信息，请参阅[意图](http://developer.android.com/reference/android/content/Intent.html)和[活动](http://developer.android.com/reference/android/app/Activity.html)。

# codeigniter - 如何在 CodeIgniter 中仅显示表单验证消息中的第二个参数？

> ID：12413160
> 
> 赞同：1
> 
> 时间：2012-09-13T19:10:01.980
> 
> 标签：codeigniter

例如，我的语言 form_validation 文件中有这一行：

```
$lang['min_length'] = "%s must be at least %s characters in length."; 
```

我希望输出是这样的：

```
$lang['min_length'] = "This field must be at least %s characters in length."; 
```

但是，问题是它在回显时看起来像这样：

**此字段的长度必须至少为您的姓名字符。**

这是错误的，因为它采用第一个 %s 而不是第二个 %s。

如何强制 CI 获取第二个 %s？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:13:20.703

由于`min_length`是表单验证库中的标准函数并通过该库处理，因此您只能通过更改核心库来实现。

但是有一种更简单的方法 - 使用表单验证库的回调函数：

```
$this->form_validation->set_rules('your_field', 'The Field label', 'callback_my_min_length[10]'); 
```

然后在您的控制器中，添加以下内容：

```
public function username_check($str, $min_length)
{
    if ( mb_strlen($str) >= $min_length)
    {
        return TRUE;
    }
    else
    {
        $this->form_validation->set_message('my_min_length', 'This field must be at least '.$min_length.' characters in length.');
        return FALSE;
    }
} 
```

我就是这样做的。

# javascript - Javascript中的空白是什么

> ID：12413161
> 
> 赞同：1
> 
> 时间：2012-09-13T19:10:06.837
> 
> 标签：javascript

> **可能重复：**
> [javascript中的void有](https://stackoverflow.com/questions/666936/what-is-the-point-of-void-in-javascript)
> [什么意义“javascript：void（0）”是什么意思？](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)

在任何地方我都看到这个`javascript:void(0);`我认为什么都不做。`javascript:;`（我认为可以代替这个）

那天我`javascript:void(x=document.getElementById('mytext').value);void(document.getElementById('mylabel').innerHTML=x);`在页面中看到了代码。

我的问题很简单，为什么无效？空有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:11:57.643

[MDN 文档页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

> 此运算符允许将产生副作用的表达式插入需要计算结果为 undefined 的表达式的位置。
> 
> void 运算符通常仅用于获取未定义的原始值，通常使用“void(0)”（相当于“void 0”）。在这些情况下，可以使用全局变量 undefined 代替（假设它没有被分配给非默认值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:12:13.537

[`void`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)是一个返回 的运算符`undefined`，尽管计算以下表达式。不需要括号。

在`javascript:`-urls 中使用它是因为任何返回值都会覆盖当前文档（如`document.write()`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:16:36.517

我相信这是一种替代方法，即使在 jQuery 中也可以简单地终止点击。当您将点击处理程序附加到锚标记时，您应该始终在处理程序末尾返回 false -

```
$("#btn").on('click',function(){
  // make toast
  return false;
}); 
```

返回 false 会取消该事件将执行的任何其他操作。

当您将 a 附加`javasctipt:void(0)`到`onclick`元素的时，您正在阻止该事件执行任何操作并将所有工作留给您的 JavaScript。

# c++ - 无法插入有序链表

> ID：12413163
> 
> 赞同：1
> 
> 时间：2012-09-13T19:10:09.280
> 
> 标签：c++, data-structures

我正在为我的班级编写一个三文件 C++ 程序。这个程序是有序链表。程序编译但在我尝试插入时崩溃（运行程序，选择选项按回车，键入一个 int 插入并按回车）。任何帮助将不胜感激。

驱动文件：

```
#include "SortedLinkedList.h"
#include <iostream>
using namespace std;

int displayMenu();
void proccessChoice(int, SortedLinkedList&);

int main()
{
    SortedLinkedList sSList;
    int choice = displayMenu();

    do
    {
        if (choice != 3)
        {
            proccessChoice(choice, sSList);
        }
    } while (choice != 3);

    return 0;
}

void proccessChoice(int input, SortedLinkedList& l)
{
    switch(input)
    {
        case 1:
            int num;
            cout << "Please enter a int: ";
            cin >> num;
            l.addItem(num);
        break;
        case 2:
            l.popFirst();
        break;
    }

}

int displayMenu()
{
    int choice;

    cout << "menu" << endl;
    cout << "===========" << endl;
    cout << "1\. add an int" << endl;
    cout << "2\. Show Sorted Linked List" << endl;
    cout << "3\. Exit" << endl;
    cin >> choice;
    cin.ignore();

    return choice;
} 
```

声明文件：

```
struct sslNode
{
    sslNode* next;
    int item;
};

class SortedLinkedList
{
private:
    sslNode* head;
    bool isEmpty ();

public:
    SortedLinkedList();
    ~SortedLinkedList();
    void addItem(int);
    int popFirst();
}; 
```

实施文件：

```
#include <iostream>
using namespace std;
#include "SortedLinkedList.h"

SortedLinkedList::SortedLinkedList()
{
    head = NULL;
}

SortedLinkedList::~SortedLinkedList()
{
    sslNode *temp, *nextLink;
    nextLink = head;

    while(nextLink != NULL)
    {
        temp = nextLink->next;
        delete nextLink;
        nextLink = temp;
    }
}

bool SortedLinkedList::isEmpty()
{
    return (head == NULL);
}

void SortedLinkedList::addItem(int itemToInsert)
{
    sslNode* cur; 
    sslNode* prev;
    sslNode* newNode = new sslNode();
    newNode->item = itemToInsert;
    newNode->next = NULL;

    cur = head;
    prev = NULL;
    bool moreToSearch (cur != NULL);

    while (moreToSearch) //Find insertion point
    {
        if (cur->item > newNode->item) // while current location has a greater value then what needs to be inserted move pointers forward.
        {
            prev = cur;
            cur = cur->next;
            moreToSearch = (cur != NULL);
        } 
        else // if current loacation and what is to be inserted are equal or less then we have found the point of insertion 
        {
            moreToSearch = false;
        }
    }

    if (prev = NULL)
    {
        newNode->next = head->next;
        head = newNode;
    }
    else
    {
        prev->next = newNode;
        newNode->next = cur;
    }

    //Insert as only item in list
    //Insert in found location
}

int SortedLinkedList::popFirst()
{
    sslNode* first;
    first = head->next;
    head = head->next;
    int item = first->item;

    return item;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:12:51.247

它崩溃是因为`head`初始化为`NULL`. 您可能想要制作一个虚拟头节点，具体取决于您的设计，或者`NULL`在`addItem()`.

事情是这样发展的：

排序链接列表

```
t::SortedLinkedList() // ctor is called
...
head = NULL

SortedLinkedList::addItem(int)
sslNode* cur;
...

cur = head;
...

bool moreToSearch (cur != NULL) // this is surely false
...

if (prev = NULL)
{
    newNode->next = head->next;
 ...//BUT head == NULL ! crash! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:19:37.280

你的问题是你忘记了=

```
if (prev = NULL)
{
    newNode->next = head->next;
    head = newNode;
}
else
{
    prev->next = newNode;
    newNode->next = cur;
}

if(prev = NULL) 
```

应该

```
if(prev == NULL) 
```

现在这总是错误的，因为 prev 变为 null 其计算结果为 false 然后它在

```
prev->next = newNode; 
```

因为您正在取消引用空指针。

在尝试插入任何内容之前，您还需要处理 head == NULL 的情况。基本上如果 head == NULL，head = newNode;

# ruby-on-rails-3 - 载波设置

> ID：12413164
> 
> 赞同：0
> 
> 时间：2012-09-13T19:10:09.983
> 
> 标签：ruby-on-rails-3, carrierwave

拜托，你能看看我的配置吗？我正在尝试在我的应用程序中设置carrierwave，但它在生产服务器中不起作用。它甚至可以作为生产环境在本地工作。问题是它将图像保存到 tmp 目录中，但结果是“空文件上传结果”。我尝试保存到文件并保存到 S3，结果相同。我正在使用乘客 - Nginx。

这两天我都生气了。任何关于如何调试的想法或提示都是受欢迎的。我设置了所有权限，所以我认为这不是权限问题。它可能是缓存的东西，文件存储在 tmp 目录中，但似乎应用程序不认为它们归用户所有？？？

谢谢！！！

```
#application.rb

require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  Bundler.require(*Rails.groups(:assets => %w(development test)))
end

module MyApp
  class Application < Rails::Application
    config.encoding = "utf-8"
    config.filter_parameters += [:password]
    config.active_support.escape_html_entities_in_json = true
    config.active_record.whitelist_attributes = true
    config.assets.initialize_on_precompile = false
    config.assets.enabled = true
    config.assets.version = '1.0'
  end
end

# avatar_uploader.rb

class AvatarUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick
  include ActiveModel::Conversion
  extend ActiveModel::Naming
  def extension_white_list
  %w(jpg jpeg gif png mp3)
end
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  storage :fog

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :resize_to_fill => [200,200]
  end

end

# carrierwave.rb

CarrierWave.configure do |config|
  config.fog_credentials = {
      :provider               => 'AWS',       # required
      :aws_access_key_id      => 'ACCESS',       # required
      :aws_secret_access_key  => 'SECRET',       # required
      :region                 => 'eu-west-1'  # optional, defaults to 'us-east-1'
  }
    config.fog_directory  = 'my_app_bucket' 
  end

# production.rb 

MyApp::Application.configure do

  config.cache_classes = true
  config.consider_all_requests_local       = true # default false, debug true
  config.action_controller.perform_caching = true #default true
  config.serve_static_assets = true  # Carrierwave true - Default false
  config.assets.compress = true
  config.assets.compile = false # false for real production
  config.assets.digest = true
  config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx
  config.log_level = :debug
  config.cache_store = :dalli_store
  config.assets.precompile += %w( search.js )
  config.i18n.fallbacks = true
  config.active_support.deprecation = :notify
  config.action_mailer.default_url_options = { :host => 'localhost' }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:21:23.070

解决了！

我的 ImageMagick 安装缺少代表。现在：

```
convert -list configure

    DELEGATES     bzlib fontconfig freetype jpeg jng lqr pango png x11 xml zlib 
```

# python - 以编程方式读取 Django Logger 数据？

> ID：12413170
> 
> 赞同：2
> 
> 时间：2012-09-13T19:10:21.933
> 
> 标签：python, django, logging

我正在使用 Django 来记录一堆日志。我的系统每分钟处理数百万个请求，因此为了延迟，我已将所有日志记录从我的 SQL DB 删除到 Django 记录器到平面文件。

然而，由于数百万行写入日志文件，我必须编写一些日志阅读器模块来读取这些日志并将其呈现在仪表板上，以便我可以每天查看它们。

所以我很好奇，Django（或一些 Django 片段）中是否有任何模块可以以编程方式读取记录器日志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:34:28.490

[Sentry](http://sentry.readthedocs.org/en/latest/index.html)可能是您问题的直接答案，但我建议您查看其他日志挖掘选项。

看看[Loggly](http://www.loggly.com/)，它提供了作为服务的日志记录，并且仪表板是预先构建的。[Orange](http://orange.biolab.si/)在 python 中也有工具包来执行此操作。[Python，频繁模式的网络日志数据挖掘](https://stackoverflow.com/questions/2925555/python-web-log-data-mining-for-frequent-patterns)可能会有所帮助。

# sql-server-2008-r2 - 数据库镜像 - 应用程序无法连接到镜像 - 命名管道提供程序：无法打开与 SQL Server 的连接 [53]

> ID：12413178
> 
> 赞同：1
> 
> 时间：2012-09-13T19:11:02.653
> 
> 标签：sql-server-2008-r2, connection-string, failover, database-mirroring

我有一个可以连接到主体的应用程序，但在故障转移期间无法连接到镜像。

（版主注意：请让我知道这个问题是否更适合 serverfault。我在这里发布它是因为我发现与此问题类似的问题比 serverfault 上的问题更多。）

这是我的应用程序在故障转移后尝试连接到镜像时收到的错误：

```
Named Pipes Provider: Could not open a connection to SQL Server [53].
Cannot open database "MY_DB_NAME" requested by the login. The login failed. 
```

我熟悉这样一个事实，即当最初连接到主体时，镜像服务器的名称被缓存以在故障转移期间使用，并且我在连接字符串中指定的故障转移伙伴仅在与主体的初始连接失败时使用.

这清楚地描述了我遇到的问题：

[http://blogs.msdn.com/b/spike/archive/2010/12/15/running-a-database-mirror-setup-with-the-sqlbrowser-service-off-may-produce-unexpected-results。 aspx](http://blogs.msdn.com/b/spike/archive/2010/12/15/running-a-database-mirror-setup-with-the-sqlbrowser-service-off-may-produce-unexpected-results.aspx)

...但是 SQL 浏览器服务正在运行，我无法弄清楚为什么连接到镜像时名称无法解析。

我假设必须运行一项服务以启用未运行的 NetBIOS 名称解析，因为这是我在 WireShark 中看到的一致而没有来自镜像的响应：

```
Source       Destination  Protocol Length Info
10.200.3.111 10.200.5.255 NBNS     92     Name query NB SQL-02-SVR-<00> 
```

**问题1：**什么可能导致问题？;-)

**问题 2：**我真的不想启用 NetBIOS（出于安全原因），我在镜像配置和连接字符串中使用 IP 地址（无 FQDN）。鉴于镜像伙伴在连接到主体时的缓存行为，有没有办法强制使用 TCP/IP，以便缓存的值是 IP 地址而不是名称？我需要运行 SQL Server Browser/Computer Browser 服务吗？

配置：

*   应用程序是使用 SDAC 6.5.9 的 Delphi XE2（我认为这与我正在使用的组件无关，因为它可以在其他带有镜像的安装中使用并且没有问题）
*   SQL Server 2012 Enterprise 作为默认实例安装在使用证书身份验证的非域配置中的 Principal、Mirror 和 Witness 上。
*   所有机器上的 Windows Server 2008 R2 SP1 64 位
*   在主体、镜像和客户端（应用程序运行的地方）禁用防火墙
*   在主体和镜像上启用 TCP/IP 和命名管道
*   镜像上运行的 SQL Server Browser 服务
*   在 Mirror 上运行的计算机浏览器服务
*   镜像配置为使用见证进行自动故障转移并且工作正常（我可以在镜像和主体之间来回切换而不会出现问题）
*   安装在客户端机器上的 SQL Native Client 2012
*   Principal 和 Mirror 上存在相同的应用登录（具有相同的 SID 和用户权限）
*   在我的应用程序日志中验证的正确服务器、故障转移伙伴、数据库名称、用户名和密码
*   在连接字符串中，主体服务器是“tcp:10.200.3.15,1433”，故障转移伙伴是使用 SQL Native 客户端的“tcp:10.200.3.16,1433”
*   我可以从客户端机器 ping 两台服务器
*   已在 WINS 选项卡下的适配器中启用 TCP/IP 上的 NetBIOS（在镜像和客户端计算机上）

我已经能够让应用程序在其他几个安装上使用镜像，但是这个让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:19:10.457

I found the problem, which was that the customer had the Principal and Mirror in one VLAN and the Client(s) in another. Although the IP addressing scheme was the same, the policy for communication between the VLANs prevented broadcast messages, which is why the NetBIOS query was failing on the client. A WINS or DNS server will be implemented to resolve this issue.

However, I am still interested in an answer to my Question #2, above.

# jdbc - WMB：在 ESQL 中，是否可以连接到定义为 JDBCProvider 可配置服务的数据源来代替 ODBC DSN？

> ID：12413187
> 
> 赞同：0
> 
> 时间：2012-09-13T19:11:39.173
> 
> 标签：jdbc, messagebroker, embedded-sql

我正在继承现有的以 ESQL 为中心（计算节点）的 WMB 流，该流通过 ODBC DSN 访问其数据库。我更喜欢使用可配置的服务来代替 ODBC DSN 来访问数据库，这是我在以 Java 为中心的流（JavaCompute 节点）中使用的。

是否可以配置 Compute 节点通过可配置服务与 db 通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T09:31:29.477

是的，但是您需要从 ESQL 调用 Java 类。

请参见[使用 JDBC 连接到应用程序数据库](http://www-01.ibm.com/support/docview.wss?uid=swg21404861)

# web-applications - Mercurial 项目托管

> ID：12413192
> 
> 赞同：0
> 
> 时间：2012-09-13T19:12:11.217
> 
> 标签：web-applications, mercurial, dvcs, project-hosting

我需要一个项目托管：

*   善变的支持；
*   轻量级但可用的问题跟踪器（github 非常接近）；
*   公共和私人存储库/跟踪器/wiki等支持；
*   很酷的可定制仪表板；
*   API 和钩子（可选，但很高兴拥有）。

我发现[codebasehq](http://codebasehq.com)看起来很有希望，但它不允许发布任何内容，但允许发布历史记录。

几点：

*   我可以支付良好的项目托管费用；
*   bitbucket 不是一个选项（省略了大量原因）；
*   可用性和可靠性对我来说是最重要的。

提前致谢。

**UPD1：我想从 bitbucket 迁移的主要原因：**

*   完全无法使用的问题跟踪器：每次使用它都会让我哭泣；
*   缺少[我为所有项目分配的票证列表](https://bitbucket.org/site/master/issue/4580/list-of-my-issues)，建议的解决方案似乎是早期的 alpha（存在可访问性问题并且缺乏基本功能）；
*   没有精心设计的通知系统（向我发送有关我的评论等的通知）
*   仪表板很烂；
*   对功能请求和错误报告的缓慢和“顽固”反应（恕我直言）。

**UPD2：**

根据我的标准列表，Assembla 是更合适的项目，然后是 fogbugz + klin，所以我授予@lazybadger 的答案赏金，但不接受它，因为 Assembla 对 mercurial 存储库的工作非常糟糕并且不关心用户。

感谢您的建议，伙计们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:00:50.527

我建议[FogBugz](https://www.fogcreek.com/fogbugz/) + [Kiln](https://www.fogcreek.com/kiln/)。

问题跟踪器是无价的。Wiki、AP、钩子、插件，应有尽有。

我们公司去年将项目托管+管理/问题跟踪切换到 FogBugz/Kiln，我们完全满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:17:12.430

我也必须推荐 Kiln & Fogbugz。为各种规模的团队提供一流的工具和灵活的定价。

这是 Fogcreek 联合创始人 Joel Spolsky 的 Youtube 视频链接，他谈论这些工具可以为您做什么。

[http://youtu.be/r5HNI9aMzOE](http://youtu.be/r5HNI9aMzOE)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T14:07:46.097

[Assembla](https://www.assembla.com/) - 独立[空间](https://www.assembla.com/workspaces)或[Assembla Portfolio](http://portfolio.assembla.com/)

我不得不提到：

*   问题跟踪器很好，可能不是那么轻量级，但不是重量级
*   [支持 Mercurial，但最近](http://blog.assembla.com/assemblablog/tabid/12618/bid/88300/Spring-Cleaning-at-Assembla.aspx)它是一个“可怜的表亲” - 基本功能没有丢失，但与 Git 或 SVN 自定义 repo-browser 相比，iframe 中的默认 hg repo-broswer 很难看
*   存在**带有定制工具的**私人和公共空间
*   仪表板作为单独的工具已被弃用（再次参见[Assembla 博客](http://blog.assembla.com/assemblablog/tabid/12618/bid/88300/Spring-Cleaning-at-Assembla.aspx)：“停止开发/支持维护当前安装，无新安装”），但[Space Stream-tab](https://www.assembla.com/spaces/customlocations-greylink/stream)是不错的候选者
*   [REST API](https://www.assembla.com/spaces/breakoutdocs/wiki/Assembla_REST_API)和[Webhooks 工具](https://www.assembla.com/spaces/breakoutdocs/wiki/Webhook_message_templates)

# iphone - NFC 配件 iCarte 110 到 Iphone

> ID：12413194
> 
> 赞同：2
> 
> 时间：2012-09-13T19:12:18.113
> 
> 标签：iphone, ios, nfc, mifare

> **可能重复：**
> [如何调用 iCarte SDK 方法来扫描 RFID](https://stackoverflow.com/questions/12073588/how-to-call-icarte-sdk-methods-for-scanning-rfid)

有人为[iCarte 110](http://www.icarte.ca/info110.shtml)开发吗？

我有它的 SDK，但我没有任何示例。仅使用文档进行开发非常困难。我正在谷歌搜索找到一个例子，但没有成功。

如果任何人都可以在 Iphone 上发布有关 Mifare connect with iCarte 110 的代码示例，它将对我有很大帮助。

谢谢！

# canvas - *reading* canvas ImageData 32 位类型数组是否比 8 位快得多？

> ID：12413197
> 
> 赞同：2
> 
> 时间：2012-09-13T19:12:25.110
> 
> 标签：canvas, getimagedata, typed-arrays

我知道操作 32 位类型的 ImageData 数组比 8 位要快得多（2 倍）。简单地阅读它们也是如此吗？

编写时，您将工作从 3 个索引增量和 4 个分配减少到 3 个位移位和单个分配，并将循环开销减少了 75%。要读回它们，您同样会减少循环开销并将增量转换为位移，但仍需要为 r、g、b、a 分配 4 个单独的变量。

这是 manip diffs 的工作台：http: [//jsperf.com/canvas-pixel-manipulation/24](http://jsperf.com/canvas-pixel-manipulation/24)

如果大部分速度提高来自于减少赋值，那么将我的读取繁重的代码转换为类型化数组可能不值得。在我花时间写另一个板凳之前，有人有这方面的经验吗？

谢谢！

# ant - Ant：在 antcall 构建文件中设置的属性会发生什么变化？

> ID：12413199
> 
> 赞同：1
> 
> 时间：2012-09-13T19:12:27.017
> 
> 标签：ant, build

我有一个混乱的构建。最后，目标最多执行 15 次。大多数目标被执行了十几次。这是因为构建和目标分为 10 个单独的构建文件（`build.xml`、`build-base.xml`、`compile.xml`等）。

在许多构建文件中，您一开始就有构建文件 `<property>`中所有目标之外的任务。这些通常在调用任何目标之前首先执行。

这是我的`build.xml`文件：

```
 <import file="build-base.xml"/>

 [...]

 <target name="compile-base">
      <antcall target="setup-tmpj"/>
      <ant antfile="compile.xml" target="compile-base"/>
      [...]
 </target> 
```

这是`compile.xml`文件：

```
 <import file="build-base.xml"/>

 <property name="target" value="1.5"/>
 <available file="target/gensrc/com"   property=gensrc.exists"/>

 [...]

 <target name="buildAndCompileCodeGen" unless=gensrc.exists">
    <blah blah blah/>
 </target>

 <target name="compile-base" depends="buildAndCompileCodeGen">
     <blah blah blah/>
 </target> 
```

我执行这个：

```
$ ant -f build.xml compile-base 
```

这将调用文件`compile-base`中的目标`compile.xml`。这取决于文件`buildAndCompileCodeGen`中的目标`compile.xml`。但是，`buildAndCompileCodeGen`只有在未设置属性时才会执行目标`gensrc.exists`。

该`compile.xml`文件中有一个`<available>`将设置`gensrc.exists`属性的任务，但该任务位于`compile.xml`. 是否曾经调用过该`<available>`任务，所以`gensrc.exist`设置好了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:40:58.647

好吧，我知道发生了什么...

是的，当我通过任务调用文件`compile-base`中的目标时，所有不在目标下的任务都会在我调用的目标执行之前执行。这意味着，如果代码已经存在，则调用目标但不执行。`compile.xml``<ant>``buildAndCompileCodeGen`

我所做的是将所有构建文件合并到一个大文件中，并摆脱所有`<ant>`和`<antcall>`任务。我已将`<available>`任务放在合并`build.xml`文件中。

在原来的情况下，我会先做一个`clean`，然后`compile-base`在`compile.xml`文件中调用。那时，`<available>`任务将运行。由于我进行了清理，因此该文件不存在，该属性`gencode.exists`未设置，并且`buildAndCompileCodeGen`目标将运行。

当我合并所有内容时，`<available>`任务将运行，设置`gencode.exists`属性。然后，当我执行 a 时`clean`，我会删除生成代码。但是，`buildAndCompileCodeGen`目标仍然不会执行，因为`gencode.exists`已经设置。

应该做的是这样的：

```
 <target name="compile-base"
     depends="buildAndCompileCodeGen">
     <echo>Executing compile-base</echo>
 </target>

 <target name="buildAndCompileCodeGen"
     depends="test.if.gencode.exists"
     unless="gencode.exists">
     <echo>Executiing buildAndCompileCodeGen</echo>
 </target>

 <target name="test.if.gencode.exists">
     <available file="${basedir}/target/gensrc/com"
         property="gencode.exists"/>
 </target> 
```

在这种情况下，我调用`compile-base`. 那将调用`buildAndCompileCodeGen`. 那将首先调用`test.if.gencode.exists`。即使`gencode.exists`已经设置了属性，也会这样做。在 Ant 查看`if`or`unless`参数之前，从属子句在目标上运行。这样，`gencode.exists`在我准备好执行`buildAndCompileCodeGen`目标之前，我不会设置。现在，可用任务将在我清理**后运行。**

# c# - 如何检查对象是否从接口派生？

> ID：12413201
> 
> 赞同：2
> 
> 时间：2012-09-13T19:12:32.850
> 
> 标签：c#, interface, polymorphism, derived-class

我有一些从接口派生的类，我希望能够检查代码以查看传入的对象是否从该接口派生，但我不确定方法调用...

```
interface IFile
{
}

class CreateFile : IFile
{
    string filename;
}

class DeleteFile : IFile
{
    string filename;
}

// Input here can be a string or a file
void OperateOnFileString( object obj )
{
    Type theType = obj.GetType();

    // Trying to avoid this ...
    // if(theType is CreateFile || theType is DeleteFile)

    // I dont know exactly what to check for here
    if( theType is IFile ) // its not, its 'CreateFile', or 'DeleteFile'
        print("Its an IFile interface");
    else
        print("Error: Its NOT a IFile interface");
} 
```

实际上，我有数百个来自该接口的派生类，我试图避免必须检查每种类型，并且在我从该类型创建另一个类时必须添加检查。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T19:14:22.497

`is`完全正确。
但是，您需要检查实例本身。

`obj.GetType()`返回`System.Type`描述对象的实际类的类的实例。

你可以只写`if (obj is IFile)`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T19:17:17.433

1.  `is`运营商工作，或者你可以这样做：

    ```
    if (someInstance is IExampleInterface) { ... } 
    ```

2.  或者

    ```
    if(typeof(IExampleInterface).IsAssignableFrom(type)) {
     ...
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T19:15:05.873

您将错误的参数传递给`is`. 正确的是

```
if (obj is file) {
    // ...
} 
```

`file`但是，如果您有一个直接接受参数的方法的重载，那就更好了。事实上，接受 an 的人如何`object`有效地使用它还不清楚。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T19:14:54.070

~~你可以使用`BaseType`：~~

 ~~```
if (type.BaseType is file) 
```~~  ~~因为`file`是一个接口，所以使用[Type.GetInterfaces](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces.aspx)来检查下面的接口`type`：

```
if (type.GetInterfaces().Any(i => i.Equals(typeof(file)) 
```

或者可能更快一点，使用[Type.GetInterface](http://msdn.microsoft.com/en-us/library/ayfa0fcd.aspx)：

```
if (type.GetInterface(typeof(file).FullName) != null) 
```

（这将搜索`type`任何继承的类或接口的接口。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T19:15:20.510

```
If( yourObject is InterfaceTest)
{
   return true;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T19:17:24.210

您可以创建如下扩展方法

```
 /// <summary>
    /// Return true if two types or equal, or this type inherits from (or implements) the specified Type.
    /// Necessary since Type.IsSubclassOf returns false if they're the same type.
    /// </summary>
    public static bool IsSameOrSubclassOf(this Type t, Type other)
    {
        if (t == other)
        {
            return true;
        }
        if (other.IsInterface)
        {
            return t.GetInterface(other.Name) != null;
        }
        return t.IsSubclassOf(other);
    }

    and use it like below

    Type t = typeof(derivedFileType);
    if(t.IsSameOrSubclassOf(typeof(file)))
    { } 
```~~

# c - 为什么我用这个程序得到大量的输出？

> ID：12413202
> 
> 赞同：0
> 
> 时间：2012-09-13T19:12:37.593
> 
> 标签：c

我正在尝试制作一个允许用户输入正整数的程序，该程序将输出每个数字相加的总和。例如，如果用户输入`54`，程序将输出`9`。出于某种原因，该程序正在输出异常巨大的数字。何时`54`是输入，输出将读取类似`5165451`or的内容`2191235`。我是 C 编程新手，但我看不出这段代码有什么问题。

```
//This program takes a positive integer
//from the user, and adds all the digits
//of the number together.

#include <stdio.h>

int main() {
  system("clear");
  int given, add, hold, i;

  printf("Enter a positive integer (up to 10 digits): ");
  scanf("%d", &given);                      //User input

  for (i = 0; i < 10; i++) {                //Loop to add digits
    hold = (given % 10);
    given = (given / 10);
    add = (add + hold);
  }
  printf("Sum of the digits is %d\n", add); //Output
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:14:50.617

```
int given, add, hold, i; 
```

你还没有初始化`add`，所以它包含未指定的数据，也就是垃圾。在未指定时使用它的值是未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:18:36.783

在循环之前插入`add = 0;`以查看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:30:29.937

我认为 for 循环是错误
的循环将运行 10 次，而 scanf 只会将输入输入到 int 数据类型的限制，即 32768。
你应该给定一个 long 数据类型。并使 for 循环为

```
for(;given!=0;)
     {
        hold = (given % 10);
        given = (given / 10);
        add = (add + hold);
     } 
```

当然初始化添加为零。

# ruby-on-rails - 如何使用 Devise 为用户创建两个用户配置文件？公开和私人档案

> ID：12413204
> 
> 赞同：0
> 
> 时间：2012-09-13T19:12:41.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个`User`模型，其中包含有关用户的所有标准信息 - （姓名、电子邮件、地址、电话、昵称等）。

所以在公开资料中，我只想显示姓名、电子邮件、电话。

但在私人资料中，我只想显示昵称。

最明显的答案是创建两个布局并将角色分配给正在查看这些布局的用户（从访客到管理员）。然后在每个布局上，只显示我想要显示的信息。

但我想做的和那根本不同。我希望用户在我的网站上以仅显示其私人凭据的“私人模式”进行操作。

此外，为了更进一步，我希望我的用户授予某些用户访问权限，以允许他们查看更多个人资料信息。

想想 Facebook 的隐私设置，用户可以在其中与特定的朋友群分享一些细节，并与所有朋友分享其他细节。

我可以使用 Devise 获得该功能吗？如果是这样，怎么做？

# javascript - 如何清空 Galleria 画廊的内容？

> ID：12413206
> 
> 赞同：1
> 
> 时间：2012-09-13T19:12:46.923
> 
> 标签：javascript, jquery, ajax, galleria

我有一组元素，我将它们“推送”到 Galleria 对象以获取动态内容。

不过，我需要先清空 Galleria - 有效地重新使用相同的 Galleria 对象。

```
Galleria.get(0).splice(0,-1);
for(var i=0;i<dat.length;++i){
     tempDat=eval('('+dat[i]+')');
     Galleria.get(0).push(tempDat);
}
Galleria.get(0).splice(0,1); 
```

这似乎一直有效，但现在没有。我有更好的选择吗？

此外，当它*工作*时，这个双重拼接的东西不会重置活动图像 - 我必须“向前”然后“向后”加载新的“第一个”图像。

我希望这一切都有意义。

谢谢，

# jquery - jQuery从数组中按类获取元素的索引位置

> ID：12413209
> 
> 赞同：17
> 
> 时间：2012-09-13T19:12:53.567
> 
> 标签：jquery, arrays, class, filter

我在一个页面上有多个音乐播放器，需要对它们进行索引以从中提取当前播放器的位置。问题是 the`currentPlayer`不是孩子，所以使用`.find`or`.filter`和 then`.index`将始终返回一个值 of`0`因为数组中没有其他内容。

所以我需要在数组中找到`.currentPlayer`'s 的索引。`player`

HTML（非常简化）：

```
<ul>
    <li>
        <article>
             <div class="player"></div>
        </article>
    </li>
    <li>
        <article>
             <div class="player currentPlayer"></div>
        </article>
    </li>
    <li>
        <article>
             <div class="player"></div>
        </article>
    </li>
</ul> 
```

JavaScript：

```
var player  = $('.player'),
    current = player.filter('.currentPlayer'),
    index = current.index(); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-13T19:16:44.220

`current.index()`将搜索其父元素。所以既然`current`是独生子，那就是零。

您可以将选择器传递给`.index`; 它会告诉 jQuery 在里面搜索你的元素。

```
var player  = $('.player'),
    current = player.filter('.currentPlayer'),
    index = current.index('.player'); 
```

或者，您可以告诉 jQuery 在数组中搜索特定元素：

```
var player  = $('.player'),
    current = player.filter('.currentPlayer'),
    index = player.index(current); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T19:19:01.477

您可能正在寻找

```
$('div.player').index($('.currentPlayer')) 
```

[http://jsfiddle.net/hmartiro/3Wzbd/](http://jsfiddle.net/hmartiro/3Wzbd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:32:01.067

```
var position = 0;
$('.player').each(function(i){
if ($(this).hasClass('currentPlayer') == true) { position = i; }
}); 
```

# java - 对 xslt 使用不同的编码

> ID：12413220
> 
> 赞同：2
> 
> 时间：2012-09-13T19:13:37.847
> 
> 标签：java, xml, xslt

对 xml 文档和 xslt 使用不同的编码会有什么影响。

xslt 样式表将具有 UTF-8 编码的输出，输入 xml 将没有声明编码并将使用字符串生成，在 xslt 内部将是：

```
<xsl:variable name="doc" select="document('file.xml')"/> 
```

该文件是 iso-8859-1。

使用不同的编码会影响输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:43:21.183

XSLT 操作的树是抽象对象，通常（但不一定）通过解析 XML 文档创建。这些抽象树中的字符来自 ISO 10646 和 Unicode 的字符库；用于输入 XML 的编码的任何变化都由 XML 解析器在构建树的任何表示之前进行调整。

因此，您的问题的答案是：如果使用的 XML 解析器知道输入编码，则不同编码对输入的影响为零。如果 XML 解析器不知道并接受编码，那么 XSLT 引擎根本无法读取输入。

# c# - Silverlight 客户端 HTTP 堆栈与浏览器 HTTP 堆栈

> ID：12413221
> 
> 赞同：1
> 
> 时间：2012-09-13T19:13:43.510
> 
> 标签：c#, wcf, silverlight, ssl, out-of-browser

我有一个用于连接 SSL WCF 服务的 silverlight 应用程序，它在 Web 浏览器中工作，但不在 OOB（浏览器外）模式下。

我发现另一个与此相关的帖子说 OOB 模式不支持 SSL 证书，因为客户端 http 堆栈与浏览器 http 堆栈不同。

任何人都可以解释这些差异或验证 Silverlight 不支持此功能吗？

我无法从 Microsoft 那里找到有关此问题的任何信息；但是，我在其他论坛上看到过其他一些类似问题的帖子。任何帮助将不胜感激。

下面是我发现的与此问题相关的另一个堆栈溢出帖子：

[Silverlight 和 SSL 客户端证书](https://stackoverflow.com/questions/3145759/silverlight-and-ssl-client-certificates)

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:47:29.073

我从 ms 找到了这个网址：http: [//msdn.microsoft.com/en-us/library/dd920295 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd920295(v=vs.95).aspx)

浏览器堆栈支持客户端证书，但客户端堆栈不支持。如果您处于受信任的浏览器外模式，当前存在一个问题（至少对于我们的应用程序），即使在浏览器堆栈中也无法使用客户端证书。

# java - Ray 和 intersectRayTriangle 是如何工作的？

> ID：12413222
> 
> 赞同：2
> 
> 时间：2012-09-13T19:13:45.330
> 
> 标签：java, android, libgdx

所以基本上我想检查来自大炮的激光束是否击中地形。要么我不理解 Ray 的概念，要么出了点问题。我们来看看这行代码

```
Intersector.intersectRayTriangle(intersectorRay, new Vector3(0.5f,1,0), new Vector3(0.5f,-1,0), new Vector3(1,0,0), hitPoint); 
```

intersectorRay 的原点为 0,0,0，方向为 1,0,0，所以我假设它从点 0,0 指向“直线右侧”。所以给定三角形顶点的坐标，它应该与它相交，对吗？代码返回假。

现在，另一方面，这一行返回 true：

```
Intersector.intersectRayTriangle(intersectorRay, new Vector3(0.5f,1,0), new Vector3(0.5f,-1,0), new Vector3(-1,0,0), hitPoint); 
```

对其他示例的测试证明，只有当 Ray 的原点在三角形内时它才会返回 true（很明显，在这种情况下它会击中某些东西......）。

我做错了什么？我从 9 月 6 日开始使用最新的夜间版本的 libgdx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:42:43.223

我要在这里说一下它在第一个示例中返回 false 的原因是因为光线没有穿过三角形的面，因为它与光线在同一 xy 平面上拍摄穿过。

相反，如果您的三角形位于 zy 平面上（或任何其他与光线射过的平面不完全一致的平面），我怀疑您会得到预期的结果。

# java - 深层嵌套如果...那么

> ID：12413224
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:13:58.060
> 
> 标签：java

此代码（损坏的）被 PMD 标记为嵌套太深。我个人总是用我编写过的任何语言以这种方式编写代码——尤其是大型数据库驱动的 for 循环。

这种编码风格真的不受欢迎吗？我发现它是最可维护和最干净的。

```
 for (MyList MyRegistry : listJSP) {
        if (meta.containsKey(MyRegistry.getFieldName()) && MyRegistry.getOrderType().equals(orderType)) {

            String CustomerInput = meta.get(MyRegistry.getFieldName())[0];
            String jspFieldName = MyRegistry.getFieldName();

            if (MyRegistry.getErrorsCheck()) {
                mapErrors = valUtil.adTextContainsErrors(CustomerInput, cms.getRegex("VALIDATION"));
                if (mapErrors.containsKey(Boolean.TRUE)) {
                    mapValidationErrors.put(jspFieldName, mapErrors.get(Boolean.parseBoolean("true")));
                    log.info("Errors " + "{}: ", CustomerInput);
                }
            }

            List<JSPFieldValidation> jSPFieldValidation = cms.getJSPFieldValidations(orderType, MyRegistry.getFieldName());
            for (JSPFieldValidation jspf : jSPFieldValidation) {

                String valRule = jspf.getValidationRule();

                if (valRule.equals("REQUIRED")) {
                    if (isEmpty(CustomerInput)) {
                        mapValidationErrors.put(orderType, orderType);
                        log.info(CustomerInput + "{}: ", valRule);
                    }
                }
                else {
                    Pattern p = cms.getRegex(valRule);
                    if (p != null) {
                        if (!isValid(CustomerInput, p)) {
                            mapValidationErrors.put(orderType, orderType);
                            log.info(CustomerInput + "{}", valRule);
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:16:11.460

静态分析工具根据普遍接受的（或可配置的）标准给出主观建议。

所以没有人能够给你正确的答案，如果你的循环嵌套太深。

如果您不喜欢 PMD 给您的建议，我建议您以不同方式配置 PMD，这样它就不会运行该规则或使用不同的参数运行它。

话虽如此，将一些逻辑提取到更小的方法中将是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:19:21.947

当您有嵌套循环和许多 if 和 else 时，该方法的[循环复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)会增加。它基本上表明了测试的难度。

将您的方法拆分为更小的方法，或者如果您对代码没有问题，您可以忽略它。

# jquery - 在无限滚动结束时删除祝贺弹出窗口

> ID：12413231
> 
> 赞同：1
> 
> 时间：2012-09-13T19:14:16.953
> 
> 标签：jquery, jquery-masonry

如何在无限滚动结束时删除弹出窗口。那个是说祝贺的。我尝试将消息设置为空“”，但这并不能阻止黑色弹出窗口的出现。

```
 loading: {
        finishedMsg: ""
   }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:17:25.610

尝试这个：

```
donetext     : "I think we've hit the end, Jim" ,
             // text displayed when all items have been retrieved
             // default: "<em>Congratulations, you've reached the end of the internet.</em>" 
```

[无限滚动文档](http://www.infinite-scroll.com/)

默认情况下，他说你的`congratulations`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T16:57:25.837

多年后，一位软件工程师将在地下室的几层灰尘和碎屑下发现这个问题。所以......尽管作者如此，但该插件的文档并不是很好。这并不明显，但是如果您想删除带有消息的弹出窗口，只需将对象中的`finishedMsg`变量设置`options`为空字符串即可：

```
jQuery('#main').infinitescroll({
    loading: {
        finishedMsg: ""
    }
}, function() {}); 
```

……瞧！该插件根本不会显示弹出窗口。

# wordpress - 从wordpress循环打印自定义字段值到php电子邮件模板？

> ID：12413234
> 
> 赞同：1
> 
> 时间：2012-09-13T19:14:24.517
> 
> 标签：wordpress

基本前提：允许最终用户输入他们的姓名、电子邮件并将他们选择的电子邮件（只是图像）发送给电子邮件收件人的邮件程序。收件人收到包含图像和问候消息的电子邮件模板。

我已经构建了电子邮件功能并且它可以工作，只需弄清楚如何打印从位于 wordpress 循环内部的自定义字段中吐出的数据。

这是到目前为止我为测试目的而模拟的电子邮件的正文：

```
$body = "
<html>
<head>
<title>new evite!</title>
</head>
<body>
<p>Here is your new evite</p>
<table>
<tr>
<td><img src='".$thePostID."' alt='' /></td>
</tr>
<tr>
<td>Name: $name<br />Email: $email<br />Comments: $comments</td>
</tr>
</table>
</body>
" 
```

$thePostID 定义：

```
$thePostID = the_field('evite_large_preview'); 
```

the_field 函数来自一个流行的 wordpress 插件，高级自定义字段。

the_field('evite_large_preview'); 只会从帖子中回显出图像的 URL。

$thePostID 没有回显任何值，因此当收件人检查他们的电子邮件时不会显示任何图像。

为什么会发生这种情况？该功能在网站上运行良好，但未显示在电子邮件正文中。

**编辑：我想通了：**

**使用 get_field 而不是 the_field 将“字段”存储为变量。将变量放在它自己的 wordpress 循环内解决了它。**

# php - POSTING 复选框的值出现问题

> ID：12413239
> 
> 赞同：0
> 
> 时间：2012-09-13T19:14:51.070
> 
> 标签：php, html

HTML：

```
<tr><td><input name="d1[]" type="checkbox" value"d1e1" /></td><td><input name="d1[]" type="checkbox" value="d2e1" />Event</td><td><input name="d1[]" type="checkbox" value="d3e1" />Event</td></tr>
<tr><td><input name="d1[]" type="checkbox" value"d1e2" />Event</td><td><input name="d1[]" type="checkbox" value="d2e2" />Event</td><td><input name="d1[]" type="checkbox" value="d3e2" />Event</td></tr>
<tr><td><input name="d1[]" type="checkbox"  value"d1e3" />Event</td><td><input name="d1[]" type="checkbox" value="d2e3" />Event</td><td><input name="d1[]" type="checkbox" value="d3e3" />Event</td></tr> 
```

PHP：

```
<?php
if(!empty($_POST['d1'])&& isset($_POST['d1']))
{
$dd=$_POST['d1'];
foreach($dd as $dp)
{
  echo $dp." <br> ";
}
}
?> 
```

现在的问题是，即使我选择了所有复选框，column1 中复选框的值，即 [d1e1, d1e2 & d1e3] 在输出中总是“打开”，但对于其他人来说，值打印正确，帮助我解决我的问题。提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:16:38.277

我认为您缺少 value 属性的等号。

# javascript - Javascript 日期格式，如 ISO，但本地

> ID：12413243
> 
> 赞同：46
> 
> 时间：2012-09-13T19:15:17.730
> 
> 标签：javascript

如何格式化 javascript 日期，如 ISO 格式，但在当地时间？

`myDate.toISOString()`我得到的时间是：“2012-09-13T19:12:23.826Z ”

但是在这里，现在是 22:13，那么如何以上述格式包含时区？

* * *

我最终做了...

```
pad=function(e,t,n){n=n||"0",t=t||2;while((""+e).length<t)e=n+e;return e}
c = new Date()
c.getFullYear()+"-"+pad(c.getMonth()+1)+"-"+pad(c.getDate()-5)+"T"+c.toLocaleTimeString().replace(/\D/g,':')+"."+pad(c.getMilliseconds(),3) 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2018-08-01T23:59:26.397

不需要图书馆！对于某些`Date`对象，例如`t = new Date()`

*   将本地时区偏移量从分钟转换为毫秒

    `z = t.getTimezoneOffset() * 60 * 1000`

*   从 t 中减去偏移量

    `tLocal = t-z`

*   创建移位日期对象

    `tLocal = new Date(tLocal)`

*   转换为 ISO 格式字符串

    `iso = tLocal.toISOString()`

*   删除毫秒和区域

    `iso = iso.slice(0, 19)`

*   用空格替换丑陋的“T”

    `iso = iso.replace('T', ' ')`

结果是一个不错的 ISO-ish 格式日期时间字符串，例如本地时区的“2018-08-01 22:45:50”。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2021-01-17T07:01:26.410

有点小技巧，但可以利用瑞典使用非常接近 ISO 的格式这一事实在一行中完成：

```
// Returns a string like 2021-01-17T01:59:57
function dateToISOButLocal(date) {
    return date.toLocaleString('sv').replace(' ', 'T');
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-11-16T10:25:01.170

为了方便起见，我按照 Denis Howe 所说的在下面作为现成的功能进行了介绍。

还有一个解决方法：在原始答案中 tz 不起作用，因为 t 是日期，而不是毫秒。

```
function dateToISOLikeButLocal(date) {
    const offsetMs = date.getTimezoneOffset() * 60 * 1000;
    const msLocal =  date.getTime() - offsetMs;
    const dateLocal = new Date(msLocal);
    const iso = dateLocal.toISOString();
    const isoLocal = iso.slice(0, 19);
    return isoLocal;
} 
```

有了这个，我得到了作为 URL 参数所需的字符串：

```
"2018-11-16T12:23:50" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-13T19:21:12.713

AFAIK 你不能在 javascript 中格式化日期（不使用外部库）。你能做的最好的就是“自己格式化”。我是说：

```
var date = new Date();
var year = date.getFullYear();
var month = date......

var ISOdate = year + "-" + month + "-" + .... ; 
```

但是有一些很好的库可以让你格式化日期！（阅读“格式”如中`library.getDate("YYYY-MM-DD.........");`）

编辑：

Moment.js 似乎是您正在寻找的东西：http: [//momentjs.com/](http://momentjs.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-03T15:26:22.203

我不太明白您需要哪个日期，但我认为您需要

```
 const ISOLocaleString = d => {
       const pad = n => n < 10 ? '0'+n : n;    
       return d.getFullYear()+'-'
            + pad(d.getMonth()+1)+'-'
            + pad(d.getDate())+'T'
            + pad(d.getHours())+':'
            + pad(d.getMinutes())+':'
            + pad(d.getSeconds())+'Z'
   } 
```

或者

```
 const ISOUTCLocaleString = d => {
        const pad = n => n<10 ? '0'+n : n;    
        return d.getUTCFullYear()+'-'
             + pad(d.getUTCMonth()+1)+'-'
             + pad(d.getUTCDate())+'T'
             + pad(d.getUTCHours())+':'
             + pad(d.getUTCMinutes())+':'
             + pad(d.getUTCSeconds())+'Z'
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-04T21:56:48.793

另一种方法是在 Date 对象上定义一个原型，该原型利用内置的*toISOString*方法（还提供了一个单独的函数）：

```
// Extend Date.prototype
Date.prototype.toLocalISOString = function() {
  // Get the local offset for the date in minutes
  let offsetMins = this.getTimezoneOffset();
  // Get a time value adjusted for the offset
  let localTimeMs = this - offsetMins * 6e4;
  // Make a new Date so don't affect this
  let date = new Date(localTimeMs);
  // Get the local offset sign (ECMAScript sign is opposite to usual)
  let utcOffsetSign = offsetMins > 0? '-' : '+';
  // Remove sign from offsetMins
  offsetMins = Math.abs(offsetMins);
  // Get offset hours and minutes, padd to 2 digits
  let utcOffsetHr = String(offsetMins / 60 | 0).padStart(2,'0');
  let utcOffsetMin = String(offsetMins % 60).padStart(2,'0');
  // Build offset string
  let utcOffsetString = `${utcOffsetSign}${utcOffsetHr}:${utcOffsetMin}`;
  // Return as adjusted ISO 8601 format string with adjusted offset
  return date.toISOString().replace('Z', utcOffsetString);
};

// E.g.
let date = new Date();
// Like 2020-08-04T14:52:38.613-07:00
console.log(`UTC  : ${date.toISOString()}\n` +
            `Local: ${date.toLocalISOString()}`);

// Stand alone function
function toISOLocal(date) {
  let offsetMins = date.getTimezoneOffset();
  let d = new Date(date - offsetMins*6e4);
  let offsetSign = offsetMins > 0? '-' : '+';
  offsetMins = Math.abs(offsetMins);
  let offsetHr = String(offsetMins / 60 | 0).padStart(2,'0');
  let offsetMin = String(offsetMins % 60).padStart(2,'0');
  return d.toISOString().replace('Z', `${offsetSign}${offsetHr}:${offsetMin}`);
}

// Like 2020-08-04T14:52:38.613-07:00
console.log(`fn   : ${toISOLocal(date)}`);
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-01T09:14:08.700

没有直接的方法可以做到这一点。但是，您可以使用`toLocaleString`创建一个可以轻松解析的字符串以使其成为 ISO 字符串。

这适用于节点：

```
function getLocalIsoTime(time, timezone) {
        const local = time.toLocaleString("en-US", {timeZone: timezone, hour12: false, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit"});
        return `${local.substr(6, 4)}-${local.substr(0, 2)}-${local.substr(3, 2)}T${local.substr(12, 8)}`;
    }

console.log(getLocalIsoTime(new Date(), 'Asia/Kolkata'));
```

一个更简单的版本适用于 node 15+ 和大多数现代浏览器：

```
function getLocalIsoTime(time, timezone) {
        return time.toLocaleString("en-CA", {timeZone: timezone, hour12: false}).replace(/, /, "T");
    }

console.log(getLocalIsoTime(new Date(), 'Asia/Kolkata'));
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-18T12:12:32.333

在原始帖子中，当前 ISO 日期为“2012-09-13T **19** :12:23.826Z”

如果想要的是一个尊重 ISO 规范但反映与 UTC 时间的本地偏移的日期，则目标答案应该是“2012-09-13T **22** :12:23.826+03:00”。

以下帖子中的最佳答案，代码片段尊重[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式/ [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt)

[https://stackoverflow.com/a/17415677/1563072](https://stackoverflow.com/a/17415677/1563072)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-07T01:44:45.143

[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)只是一种格式化日期的方法，因此可以应用于任何时区。

您是否尝试过对象方法的`timeZone`选项？[`Date`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)`toLocaleString`

[这个问题](https://stackoverflow.com/questions/15141762/how-to-initialize-a-javascript-date-to-a-particular-time-zone)有例子的答案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-30T08:55:59.433

这是我使用的方法。如果日期/月份/小时等是单个数字（例如将“6”变为“06”），请注意添加零

```
function formatLikeISO (d: Date): string {
    let lengthChecker = (str) => {
        if (str.length == 1) { return '0' + str; }
        return str;
    }

    let theDate = lengthChecker(String(d.getDate()));
    let month = lengthChecker(String(d.getMonth() + 1));
    let mins = lengthChecker(String(d.getMinutes()));
    let hours = lengthChecker(String(d.getHours()));
    let secs = lengthChecker(String(d.getSeconds()));

    let formatted =
        d.getFullYear() + '-' +
        month + '-' +
        theDate + ' ' +
        hours + ':' +
        mins + ':' +
        secs;

    return formatted;
} 
```

这将输出这种格式：

> “2021-06-30 11:31:34”

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-14T13:24:22.033

虽然这里的答案可能有效，但没有什么比简单的单线更简单的了：

```
new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60 * 1000).toISOString() 
```

* * *

##### 给有兴趣的人解释一下：

我们创建一个新的 Date 实例（外部实例）。
我们给它另一个 Date 实例（以毫秒为单位），从中减去时区偏移量（也以毫秒为单位，正或负）。所有这些我们都格式化成 ISO

# android - Android 小部件：updateAppWidget() 未调用 onDataSetChanged

> ID：12413245
> 
> 赞同：9
> 
> 时间：2012-09-13T19:15:29.610
> 
> 标签：android, android-widget, widget

我有一个运行良好的基于​​ ListView 的小部件，它依赖于 JSON Web 服务调用来填充自身。我有一个效果很好的刷新按钮，并强制从网络重新加载。我通过使用自定义广播来做到这一点，然后依次调用 onDataSetChanged() 和 updateAppWidget()。我发现，当 Android 自动更新小部件时（基于时间间隔设置它我的 XML 定义），似乎只调用了 updateAppWidget()，并且我的 onDataSetChanged() 函数从不运行，导致更新的时间戳（我在每个 updateAppWidget() 调用中更新），但数据过时。

如何强制 Android 在给定的时间间隔调用或触发 onDataSetChanged()？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T22:09:22.497

原来我需要`AppWidgetManager.notifyAppWidgetViewDataChanged(widgetId, view)`在我的`AppWidgetProvider.onUpdate()`方法中调用。

# mongodb - 如何使用 GORM / MongoDB 插件在 Grails 中的域对象中创建上限集合

> ID：12413249
> 
> 赞同：1
> 
> 时间：2012-09-13T19:15:50.087
> 
> 标签：mongodb, grails, grails-orm

我想知道是否可以将上限集合链接到域对象，例如：

类域对象 {

```
 static mapping = {
    createdOn capped: true, max: 1, size: 10000 
```

}

我没有找到从域对象中做到这一点的方法。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:38:34.080

我无法让它工作，所以我在 mongo 中手动创建了一个有上限的集合并在 grails 中使用它。它似乎工作得很好。

# php - 无法找到字符串中第一次出现的位置

> ID：12413259
> 
> 赞同：-4
> 
> 时间：2012-09-13T19:16:38.027
> 
> 标签：php, strpos

我需要在不重复的字符串中找到第一个字符出现的位置。到目前为止，我有我的`$pos`输出`0`。

```
<?php
$sentence = "some long string";
$found = false;

while(!$found && $sentence!== ""){
  $c = $sentence[0];
  $count = substr_count($sentence,$c);

  if ($count == 1) $found = true;
  else $sentence = str_replace($c,"",$sentence);
}
$pos = strpos($sentence, $c);
echo "$c: $pos"; 
```

它会输出`l:0`. 那是怎么回事？

我知道这`$pos = strpos($sentence, $c);`不是找到位置的正确方法。为什么我很困惑，当我回显 $c 时，它的值是“l”。所以，我想如果我在 strpos 中使用它的值，它会给我正确的位置。因此，为了获得有关如何提取第一个非重复字符位置的帮助，我想我会在 StackOverlow 上要求我指出正确的方向。不必是 d**ks，我只是在学习，我很感激帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:25:48.033

您的代码几乎是正确的。当我测试它时，我得到了'm：0'，这确实是第一个只出现一次的字符。位置为 0 的原因是您每次尝试新字符时都在缩小原始字符串。

我建议您在开始在其中查找字符之前复制字符串，然后使用副本来计算末尾的位置，而不是缩小的字符串。

```
<?php
$sentence = "some long string";
$sentence_copy = $sentence;
$found = false;

while(!$found && $sentence!== ""){
  $c = $sentence[0];
  $count = substr_count($sentence,$c);
  if ($count == 1) $found = true;
  else $sentence = str_replace($c,"",$sentence);
}

$pos = strpos($sentence_copy, $c);
echo "$c: $pos"; 
```

这给了我'm：2'，这是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:09:24.200

关于评论

> 我需要找到不重复的第一个字符的位置。

```
<?php
$numberOfOccurences = array_count_values(str_split($string, 1));
$uniqueCharacters = array_keys(
    array_filter($numberOfOccurences, function($c) { return $c == 1; })
);
echo $uniqueCharacters[0] . ':' . strpos($string, $uniqueCharacters[0]); 
```

这个想法很简单，我们不将字符串视为字符串，而是将字符串视为一组字符，计算每个字符，然后只保留出现一次的字符（`$c == 1`在`array_filter()`）和（假设函数是稳定的 [1] ) 拿第一个。

[1] “稳定”的意思是，他们保持秩序。如果不是，您必须遍历`$uniqueCharacters`并找到首先手动出现的那个。

```
$positions = array_map(
    $uniqueCharacters,
    functions ($character) use ($string) { return strpos($string, $character); }
);
$pos = min($positions);
echo "{$string[$pos]}:$pos"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:19:16.690

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

> 返回针相对于 haystack 字符串开头的位置（与偏移量无关）。另请注意，字符串位置从 0 开始，而不是 1。
> 
> 如果未找到针头，则返回 FALSE。

其次，`$c = $sentence[0]`不会`strpos($sentence, $c)`让你获得更多关于你已经知道的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T19:19:27.090

要在字符串中查找子字符串的位置，您应该使用 strpos 方法：

[http://www.php.net/manual/en/function.strpos.php](http://www.php.net/manual/en/function.strpos.php)

# c - 无法在共享库 (.so) 中找到符号

> ID：12413266
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:16:51.507
> 
> 标签：c, linux, debugging, shared-libraries

我正在尝试映射应该存在于共享库（.so）中的函数的地址。我成功地打开了库并尝试获取其中的函数地址：

```
fn_read = dlsym (handle, "functionName"); 
```

但是我收到一个错误，经过检查，错误是找不到该符号。我很确定我打这个电话是正确的。我也 100% 确定我尝试映射的函数包含在共享库本身中。我不确定在这里做什么...有人可以指出一些我可能忽略的错误/要点吗？

谢谢，法尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:20:24.940

如果该符号确实存在，则唯一合理的原因是`functionName`未声明的 C++ 函数`extern "C"`。您可以添加`extern "C"`组件，也可以确定损坏的名称并找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:22:00.160

尝试使用 unix/linux 命令`nm -g <library>.so`。它将列出您所有的`C`样式符号。

请注意，C++ 参与“名称修改”，因此如果您没有导出“C 样式”符号，则名称很可能被修改并且无法直接访问。 `nm -gC <library>.so`还将显示损坏的 C++ 名称。

如果您尝试访问 C++ 符号，并且名称修改导致了问题，那么遵循[C++ FAQ 中关于混合 C 和 C++](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)的指导可能会有所帮助。

# dictionary - stl map insert operator[] 对差

> ID：12413267
> 
> 赞同：1
> 
> 时间：2012-09-13T19:17:04.680
> 
> 标签：dictionary, stl, insert, operator-keyword

```
map<pair<double,double>,double> vectorDoubleMap;

vectorDoubleMap[ pair<double, double>(10, 10) ] = 1;          //1.
vectorDoubleMap.insert( pair<double, double>(10, 10), 1);     //2. 
```

“1。” 语句编译完成，但 '2.' 语句未编译。

这两种说法有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:29:23.717

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:29:13.593

看一下[插入](http://www.cplusplus.com/reference/stl/map/insert/)功能，您应该使用一对插入：

`vectorDoubleMap.insert( pair<pair<double,double>,double>(pair<double, double>(10, 10), 1));`

或利用 make_pair 函数使代码干净：

`vectorDoubleMap.insert( std::make_pair(pair<double, double>(10, 10), 1));`

当您遇到编译器错误时，首先要做的是阅读错误消息并检查 api 引用。

# sql-server - 使用聚合或子查询分组

> ID：12413269
> 
> 赞同：0
> 
> 时间：2012-09-13T19:17:15.803
> 
> 标签：sql-server, tsql

我该怎么做（不是生产，知道它不漂亮）：

```
SELECT mat1_01_06, count(mat1_01_06), MAX(mat_no),
MAX(
        (
          SELECT 
          document.mat_no
          FROM TimeMatters11.lntmu11.document 
          WHERE matter.sysid = document.mat_id and ccode = 'SUMS' 
        )
    )
FROM TimeMatters11.lntmu11.matter
WHERE con_no in 
('PR12-221' , '...', '...)
AND mat1_01_06 != ''
GROUP BY mat1_01_06
HAVING count(mat1_01_06) > 1
ORDER BY count(mat1_01_06) desc 
```

输出是

> 消息 130，级别 15，状态 1，第 7 行
> 无法对包含聚合或子查询的表达式执行聚合函数。

我只想要一个子文档编码为“SUMS”的 mat_no

## 编辑 2

没有子查询的输出

```
Index                Cnt    mat_no(not useful)
112565/11            25     12-61692
16601/11             12     12-58850
34934/11             12     12-58854
34935/11             12     12-61983
704612/12            12     12-55487
712166/12            11     12-55613
707588/12            9      12-55604
91394/11             8      12-57115 
```

期望的

```
Index           Cnt     Mat_no that contains doc 'SUMS' 
112565/11   25      12-61692
16601/11    12      12-58850
34934/11    12      12-58854
34935/11    12      12-61983
704612/12   12      12-55487
712166/12   11      12-55613
707588/12   10      12-55604 
```

mat_no 与索引是多对一关系，具有子文档“SUMS”的特定 mat_no 是主记录。然后我需要关注的那个。对不起，莉尔令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:30:48.760

这是你想要的吗？

```
SELECT mat1_01_06, count(mat1_01_06), MAX(mat_no),
       Mat_no =  (
          SELECT 
          MAX(document.mat_no)
          FROM TimeMatters11.lntmu11.document 
          WHERE matter.sysid = document.mat_id and ccode = 'SUMS' 
        )
FROM TimeMatters11.lntmu11.matter
WHERE con_no in 
('PR12-221' , '...', '...')
AND mat1_01_06 != ''
GROUP BY mat1_01_06
HAVING count(mat1_01_06) > 1
ORDER BY count(mat1_01_06) desc 
```

# xcode - 在 Xcode 中更改默认的对象库属性值

> ID：12413273
> 
> 赞同：0
> 
> 时间：2012-09-13T19:17:23.003
> 
> 标签：xcode

是否可以？例如，当您将新的 UILabel 从 Objects 库拖放到视图上时，它会设置为 System 17.0 Font、Left Justified、Autoshrink enabled 等。例如，我能不能让我从这一点开始添加的所有标签都是右对齐的，这样我就不必在添加时更改每个标签？

编辑：将术语从“属性”更改为“属性”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:21:05.107

我确实知道复制粘贴现有对象会保留所有内容 - 粘贴对象中的所有属性都将与复制对象在复制时的属性相同。这不正是我正在寻找的，因为它有一些陷阱。例如，我可以想象这样一种情况，我希望项目中的所有标签都具有相同的字体样式，但文本颜色和对齐方式不同，因此复制粘贴某些内容最终可能最终会创建更多工作。

编辑：将术语从“属性”更改为“属性”

编辑2：从我所看到的一切来看，复制粘贴似乎是创建具有非默认属性的新对象的唯一方法。除非有人想出更好的东西，否则将其标记为答案。

# asp.net - GridView 数据绑定

> ID：12413276
> 
> 赞同：0
> 
> 时间：2012-09-13T19:17:27.660
> 
> 标签：asp.net

我在 GridView 中有一个空字段，我要做的就是从另一个控件（即 DetailView 控件）填充这个空字段。当页面第一次加载时，Detail View 控件与数据一起加载，而 GridView 为空白。那么如何将 DetailView 中的 Post_ID 字段放入 GridView。有人可以在这里给我看一些详细的例子吗？在我的情况下，对于后面的代码，C# 是首选。这是我在 GridView 中的字段：

```
<asp:TemplateField HeaderText="Post ID"> 
            <ItemTemplate> 
                <asp:TextBox ID="TextBox0" runat="server"></asp:TextBox> 
            </ItemTemplate> 
        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:28:09.280

您可以将 gridview 绑定到与您的 detailview 相同的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:02:53.307

在这种情况下，对于最精简的绑定版本，我会像这样修改代码：

```
public void Page_Load(object sender, EventArgs e)
{
if (!IsPostBack) {
DataTable results = new DataTable();
using (SqlConnection connection = new SqlConnection(getconnectionstring()))
{
    connection.Open();
    using (SqlCommand command = new SqlCommand("SELECT firstname,lastname FROM crudtable",connection))
    {
        results.Load(command.ExecuteReader());
    }
}

DetailsView.DataSource = results;
DetailsView.DataBind();

GridView.DataSource = results;
GridView.DataBind();
}
} 
```

然后在你的 aspx 文件中：

```
//Put gridview tags here
<asp:TemplateField HeaderText="Post ID"> 
        <ItemTemplate> 
            <asp:TextBox ID="TextBox0" runat="server" Text='<%# Eval("Firstname") %>'></asp:TextBox> 
        </ItemTemplate> 
</asp:TemplateField> 
```

# c# - Asp.net 按钮单击事件和 MVC

> ID：12413285
> 
> 赞同：1
> 
> 时间：2012-09-13T19:18:27.307
> 
> 标签：c#, asp.net-mvc, event-handling

第一次单击按钮更改按钮文本时，第二次单击重定向到其他页面 -

```
public partial class _Default : System.Web.UI.Page
{
    int clickCount;
    protected void btn_clicked(object sender, EventArgs e)
    {
        clickCount++;
        if (clickCount == 1)
            (sender as Button).Text = "go to landing page";
        else
            Response.Redirect("LandingPage.aspx");
    }
} 
```

很明显，每次页面重新加载时，clickCount 都会重新初始化，并且 else 块永远不会执行。为了保持 clickCount 状态，我可以使用视图状态、会话状态、应用程序状态、隐藏字段或 JS 代码等。对于这种特殊情况，什么是最好的 -> 问题 1。

由于 MVC 是无状态的，并且在控制器中编写的类似代码也是如此，因此每次实例化 ActionHandler 或控制器时都会重新初始化 clickCount。您如何处理 ASP.NET MVC -> Ques 中的类似情况。2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:25:28.377

创建一个模型以传递到带有属性的视图中：

```
public int ClickCount{get;set;} 
```

然后在视图中，创建一个隐藏值

```
@Html.HiddenFor(f=>f.ClickCount) 
```

在控制器上的发布事件期间，更新模型

```
public ActionResult(ViewModel model){
model.ClickCount++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:28:43.347

如果我想跟踪按钮点击，我会使用谷歌分析。如果我想在自己的应用程序中跟踪它们，我会使用数据库（只需让它在提交或单击时更新数据库记录）。如果我没有/不能使用数据库，您可以创建一个隐藏字段并使用按钮点击次数不断更新它，如下所示：

控制器：

```
<HttpPost()>
Function MyFormPost(Optional ByVal clicks As Integer = 0) As ActionResult
  ViewBag.Clicks += clicks
  Return View()
End Function 
```

看法：

```
@Using Html.BeginForm()
    @Html.ValidationSummary(True)
    @Html.Hidden("clicks", ViewBag.Clicks)
End Using 
```

注意：这是 VB.NET。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:24:20.157

**问题 1**

依靠：

*   您是否需要在应用程序的其他任何地方使用此点击计数？
*   这是一个明智的信息吗？
*   如果用户看到这个计数有问题吗？

IMO，最好的解决方案是保持对视图状态的计数，但它可能会根据上述问题而改变。

**问题2**

这将是**非常**不同的。首先，您不会有“按钮单击事件”，您会从控制器*获取*（或*发布*）一个动作。因此，如您所见，这将需要一种完全不同的方法。

旁注：请记住，不仅 MVC 是无状态的。HTTP 在设计上是无状态的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T19:26:34.797

这可能不是解决此问题的最佳方法，但它应该使您走上正轨。

```
public partial class _Default : System.Web.UI.Page
{
    protected void btn_clicked(object sender, EventArgs e)
    {
        int clickCount;
        try
        {
            clickCount = int.Parse(Session["ClickCount"]);
            clickCount++;
        }
        catch
        {
            clickCount = 1; 
        }

        Session["ClickCount"] = clickCount;

        if (clickCount == 1)
        {
            (sender as Button).Text = "go to landing page";
        }
        else
        {
            Response.Redirect("LandingPage.aspx");
        }
    }
} 
```

通过使用 Session，如果用户离开页面并返回，它将持续存在。（仅在特定时间范围内。如果您希望它持续更长时间，请使用 cookie。）

# asp.net-mvc - 使用 WEB API 时，如何从 POST 中提取 HttpResponseMessage 的内容？

> ID：12413287
> 
> 赞同：22
> 
> 时间：2012-09-13T19:18:35.550
> 
> 标签：asp.net-mvc, serialization, asp.net-web-api, json.net

一个非常典型的 CRUD 操作将导致一个对象的 Id 设置一次。

因此，如果我在控制器上有 Post 方法，该方法接受一个对象（例如，JSON 序列化）并返回一个 HttpResponseMessage 并创建了 HttpStatusCode 并将 Content 设置为同一个对象，并将 Id 从 null 更新为整数，那么我该如何使用 HttpClient 来获取在那个 ID 值？

这可能很简单，但我看到的只是 System.Net.Http.StreamContent。从 post 方法返回一个 Int 会更好吗？

谢谢。

**更新（以下答案）：**

一个工作示例...

```
namespace TryWebAPI.Models {
    public class YouAreJoking {
        public int? Id { get; set; }
        public string ReallyRequiresFourPointFive { get; set; }
    }
}

namespace TryWebAPI.Controllers {
    public class RyeController : ApiController {
        public HttpResponseMessage Post([FromBody] YouAreJoking value) {
            //Patience simulated
            value.Id = 42;

            return new HttpResponseMessage(HttpStatusCode.Created) {
                Content = new ObjectContent<YouAreJoking>(value,
                            new JsonMediaTypeFormatter(),
                            new MediaTypeWithQualityHeaderValue("application/json"))
            };
        }
    }
}

namespace TryWebApiClient {
    internal class Program {
        private static void Main(string[] args) {
            var result = CreateHumour();
            Console.WriteLine(result.Id);
            Console.ReadLine();
        }

        private static YouAreJoking CreateHumour() {
            var client = new HttpClient();
            var pennyDropsFinally = new YouAreJoking { ReallyRequiresFourPointFive = "yes", Id = null };

            YouAreJoking iGetItNow = null;
            var result = client
                .PostAsJsonAsync("http://localhost:1326/api/rye", pennyDropsFinally)
                .ContinueWith(x => {
                                var response = x.Result;
                                var getResponseTask = response
                                    .Content
                                    .ReadAsAsync<YouAreJoking>()
                                    .ContinueWith<YouAreJoking>(t => {
                                        iGetItNow = t.Result;
                                        return iGetItNow;
                                    }
                );

                Task.WaitAll(getResponseTask);
                return x.Result;
            });

            Task.WaitAll(result);
            return iGetItNow;
        }
    }
} 
```

似乎受到 Node.js 的启发。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-13T19:50:49.747

您可以使用`ReadAsAsync<T>`

.NET 4（您也可以在没有延续的情况下做到这一点）

```
var resultTask = client.PostAsJsonAsync<MyObject>("http://localhost/api/service",new MyObject()).ContinueWith<HttpResponseMessage>(t => {
    var response = t.Result;
    var objectTask = response.Content.ReadAsAsync<MyObject>().ContinueWith<Url>(u => {
        var myobject = u.Result;
        //do stuff 
    });
}); 
```

.NET 4.5

```
 var response = await client.PostAsJsonAsync<MyObject>("http://localhost/api/service", new MyObject());
    var myobject = await response.Content.ReadAsAsync<MyObject>(); 
```

# c - 动态规划问题 - 斐波那契数列

> ID：12413294
> 
> 赞同：0
> 
> 时间：2012-09-13T19:18:55.950
> 
> 标签：c, dynamic-programming, fibonacci, unsigned-long-long-int

我正在阅读[这篇](http://en.wikipedia.org/wiki/Dynamic_programming#Fibonacci_sequence)维基百科文章，并尝试在 C 中实现基于“地图”的解决方案，其中“地图”只是一个 int 数组，初始化为 0。

出于某种原因，它工作到`fib(93)`，然后开始输出奇怪的数字。如果重要的话，我要指定`-std=c99`：

```
#include <stdio.h>
#include <stdlib.h>

// represents a fib num
typedef unsigned long long fib_t;

// the default value of our 'map'
const int FIB_NULL   = 0;

// could get from input, set here for now
const int FIB_MAX    = 100;

// our 'map' for fib nums
static fib_t *fibMap;

// calculate the fib num n
fib_t fib( unsigned int n )
{
    // if this num, n, is not 0 or 1, and is FIB_NULL, then calculate it
    if( n > 1 && FIB_NULL == fibMap[n] )
    {
        fibMap[n] = fib( n-1 ) + fib( n-2 );
    }

    // get it from the map
    return fibMap[n];
}

// used to setup the 'map' for the fibs
static void initFibMap()
{
    // emulate a map
    fibMap = malloc( sizeof(fib_t) * FIB_MAX);

    // initialize it to 'null'
    memset(fibMap, FIB_NULL, sizeof(fib_t) * FIB_MAX);

    // by definition
    fibMap[0] = 0;
    fibMap[1] = 1;
}

int main(int argc, char *argv[]) 
{
    // setup our 'map'
    initFibMap();

    for( unsigned int i=0; i<FIB_MAX; i++ )
    {
        // breaks on 94
        printf("Fib #%d: %llu\n",i, fib(i));
    }
} 
```

奇怪的输出：

```
// . . .
// . . .
// Fib #90: 2880067194370816120  // good
// Fib #91: 4660046610375530309  // good
// Fib #92: 7540113804746346429  // good
// Fib #93: 12200160415121876738 // good
// Fib #94: 1293530146158671551  // WHAT?
// Fib #95: 13493690561280548289
// Fib #96: 14787220707439219840
// Fib #97: 9834167195010216513
// Fib #98: 6174643828739884737
// Fib #99: 16008811023750101250 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:27:01.197

对于如此大的数字，您会遇到无符号整数溢出，这会导致“环绕”导致运算的原始结果 modulo`1 << bits`位是特定整数类型的位宽。如果要表示这些数字，则必须使用某种 bignum 库，例如[GNU GMP。](http://gmplib.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:43:15.163

随着数字越来越大，所以整数溢出，所以“环绕”正在发生，所以你可以使用 GNU GMP 库或使用字符串来表示数字，就像我对大数的阶乘所做的那样链接到[http://codepad.org/ bkWNV0JC](http://codepad.org/bkWNV0JC)

# visual-c++ - C ++ OpenGL鼠标在细线上拾取不起作用

> ID：12413295
> 
> 赞同：0
> 
> 时间：2012-09-13T19:18:57.390
> 
> 标签：visual-c++, opengl, mfc, line, picking

我是第一次使用拾取技术，我已经按照 NEHE 教程在 opengl 中使用拾取技术，我实际上需要检测正方形上的细线。但是我不确定为什么它没有正确检测到它，即使我从它的背景中删除了正方形，它仍然会随机选择其他选择，而不是我做出的选择。大多数时候它从来没有检测到......所以我做了另一个测试exe，我只放了2行并删除了方形背景，但它仍然没有被选中......有时它会在屏幕的其他部分被选中......这些线条离屏幕有点远，所以我给了缩放自由以清楚地看到线条是如何存在的，所以我也通过缩放检查了它......但仍然没有用。它非常令人困惑。

下面是我的代码我如何创建行

我的初始化代码

```
void COpenGLControl::oglInitialize(void)
{
    // Initial Setup:
    //
    static PIXELFORMATDESCRIPTOR pfd =
    {
        sizeof(PIXELFORMATDESCRIPTOR),
        1,
        PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,
        PFD_TYPE_RGBA,
        32, // bit depth
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        16, // z-buffer depth
        0, 0, 0, 0, 0, 0, 0,
    };

    // Get device context only once.
    hdc = GetDC()->m_hDC;

    // Pixel format.
    m_nPixelFormat = ChoosePixelFormat(hdc, &pfd);
    SetPixelFormat(hdc, m_nPixelFormat, &pfd);

    // Create the OpenGL Rendering Context.
    hrc = wglCreateContext(hdc);
    wglMakeCurrent(hdc, hrc);

    // Basic Setup:
    //
    // Set color to use when clearing the background.
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClearDepth(1.0f);

    // Turn on backface culling
    glFrontFace(GL_CCW);
    glCullFace(GL_BACK);

    // Turn on depth testing

    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);

    GLenum a = glGetError();
    CCTrace::Trace(L"COpenGLControl::oglInitialize return",a);

    OnDraw(NULL);
} 
```

这是我在鼠标点击时调用的选择方法

```
void CRightOGL::Selection(int mouse_x,int mouse_y)                                          // This Is Where Selection Is Done
{

    GLuint    buffer[512]={0};
    GLint   hits; // The Number Of Objects That We Selected

    // The Size Of The Viewport. [0] Is <x>, [1] Is <y>, [2] Is <length>, [3] Is <width>
    GLint   viewport[4];

    // This Sets The Array <viewport> To The Size And Location Of The Screen Relative To The Window
    glGetIntegerv(GL_VIEWPORT, viewport);
    glSelectBuffer(512, buffer);                                // Tell OpenGL To Use Our Array For Selection

    (void) glRenderMode(GL_SELECT);

    glInitNames();                                              
    glPushName(0);                                              

    glMatrixMode(GL_PROJECTION);                                
    glPushMatrix();                                             
    glLoadIdentity();                                           

    gluPickMatrix((GLdouble) mouse_x, (GLdouble) (viewport[3]-mouse_y), 30.0f, 30.0f, viewport);

    gluPerspective(35.0f, (GLfloat) (viewport[2]-viewport[0])/(GLfloat) (viewport[3]-viewport[1]), 0.01f, 2000.0f);
    glMatrixMode(GL_MODELVIEW);                             

    DrawTargetLines();                                          

    //DrawJawImage();   
    glMatrixMode(GL_PROJECTION);                                // Select The Projection Matrix
    glPopMatrix();                                              // Pop The Projection Matrix
    glMatrixMode(GL_MODELVIEW);                                 // Select The Modelview Matrix
    hits=glRenderMode(GL_RENDER);                               // Switch To Render Mode, Find Out How Many
                                                                // Objects Were Drawn Where The Mouse Was
    GLenum s = glGetError();
    if(s!=0) CCTrace::Trace(L"CRightOGL::oglDrawScene",s);

    if (hits > 0)                                               // If There Were More Than 0 Hits
    {
        int choose = buffer[3];                                 // Make Our Selection The First Object
        int depth = buffer[1];                                  // Store How Far Away It Is 
        //SetTeethSlice(choose);

        for (int loop = 1; loop < hits; loop++)                 // Loop Through All The Detected Hits
        {
            // If This Object Is Closer To Us Than The One We Have Selected
            if (buffer[loop*4+1] < GLuint(depth))
            {
                choose = buffer[loop*4+3];                      // Select The Closer Object
                depth = buffer[loop*4+1];                       // Store How Far Away It Is
            }       
        }
        ((CTeethBiometricApp*)::AfxGetApp())->setDialogSlider(choose);

    }
} 
```

这是绘制线功能来绘制 52 条不同的线

```
void CRightOGL::DrawTargetLines()
{

    glDisable(GL_TEXTURE_2D);
        //original line when you need to adjust the line use this block
        //  glVertex3d(-0.5,-0.23f,1.0f);                  
        //  glVertex3d( -0.1,-0.35f,1.0f);
        //-------------------------------------------------------------------

    float y1 = 0.25f, y2 = 0.37f;
    for(float loop=1;loop<51;loop++)
    {
        y1+=0.004f;
        y2+=0.004f;

        glLoadName(loop);                                       // Assign Object A Name (ID)
        glPushMatrix();                                         // Push The Modelview Matrix
        glLineWidth(3.0f);
        glBegin(GL_LINES);                      // Start Drawing Our Player Using Lines
        if(this->m_CurrentSlice==loop)
            glColor3f(1.0f,1.0f,0.0f);
        else
            glColor3f(1.0f,0.0f,0.0f);

        glVertex3d(-0.5,y1,1.0f);                  // Top Left Of Player
        glVertex3d( -0.1,y2,1.0f);                  // Bottom Right Of Player
                                                // Pop The Modelview Matrix
        glEnd(); 
        glPopMatrix();
    }
} 
```

这是我的绘图功能

```
void CRightOGL::oglDrawScene(void)
{

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glShadeModel(GL_SMOOTH);    

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

    glLoadIdentity();
    //glTranslatef(0.0f, 0.0f, -m_fZoom);//this is for zoom using left mouse click but no placing
    glTranslatef(m_fPosX, m_fPosY,-m_fZoom); // this is for placing + zooming using middle scroll button mouse click

    glRotatef(m_fRotX, 1.0f, 0.0f, 0.0f);//these two for mouse movement
    glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f);
    glRotated(90,0.0f, 0.0f, -1.0f);

    GLenum s = glGetError();

    DrawJawImage(); 
    DrawTargetLines();
    SwapBuffers(hdc);

    glFlush();

} 
```

我的测试前在这个保管箱上

[http://dl.dropbox.com/u/104183650/Release.zip](http://dl.dropbox.com/u/104183650/Release.zip)

请使用鼠标右键进行缩放并旋转鼠标左键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:35:04.947

这是一种已弃用的方法，您可以在 Internet 上找到的大多数教程都已过时且已弃用，包括来自 NeHe 的教程，使用有关 OpenGL 3.0+ 的资源，您会没事的；继续处理这段代码并用这种方法继续学习 OpenGL 是没有意义的。

# iphone - iOS - 如何指定另一个类的回调？

> ID：12413297
> 
> 赞同：3
> 
> 时间：2012-09-13T19:19:03.643
> 
> 标签：iphone, ios

我是一个iOS新手。我想为 Http 执行指定一个成功回调。但是，那是在另一个班级。我将如何指定它？我尝试了以下 -

```
[request setDidFinishSelector: @selector([[MyHttpCallbacks get] successHttpMethod]:)]; 
```

回调函数在 MyHttpCallbacks 中定义。这不起作用。如果我在同一个类中定义方法并像这样使用它，它工作正常 -

```
[request setDidFinishSelector: @selector(successHttpMethod:)]; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:28:32.910

```
MyHttpCallbacks *callbacks = [[MyHttpCallbacks alloc] init];
request.delegate = callbacks; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:29:54.330

我遇到了同样的问题，我创建了 HTTP 处理类（`ServerComm`在我的例子中）来调用委托方法。

我在最后添加的 ServerComm.h

```
@interface NSObject (ServerCommDelegate)
- (void)finishedLoading:(NSString*)result success:(BOOL)success;
@end 
```

服务器通信.m

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    ...

    if ( [delegate respondsToSelector:@selector(finishedLoading:success:)] ) {
        [delegate finishedLoading:aStr success:YES];
    }    
} 
```

在创建实例后的主类中

```
serverCommObj.delegate = self; 
```

然后方法

```
- (void)finishedLoading:(NSString*)result success:(BOOL)success 
{
    if (!success) {
        ...
    } else {
        ...
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:24:25.053

我相信你想实现的目标是不可能的（除非有人有黑客，我不知道）。我多次遇到这个问题，我不得不更改我的设计并将回调包含在与创建它的位置相同的类中。

虽然，仔细想想。（这是我自己没有尝试过的建议）您可以将回调类“包含”在 main 中，然后从那里调用一个选择器函数，该函数在回调中调用该函数。不是一个非常有效的黑客，但我认为它会起作用。

所以是这样的：

```
[request setDidFinishSelector: @selector(callbackFunction)]; 
```

在同一个类中回调：

```
- (void)callbackFunction {
    [MyHttpCallbacks get] successHttpMethod];
} 
```

successHttpMethod 位于另一个类中，您将其作为导入包含在内。

# java - InterviewStreet 不友好的数字 java

> ID：12413302
> 
> 赞同：3
> 
> 时间：2012-09-13T19:19:28.733
> 
> 标签：java, algorithm

有关此问题的更多信息，请查看此处：[https ://www.interviewstreet.com/challenges/dashboard/#problem/4f7272a8b9d15](https://www.interviewstreet.com/challenges/dashboard/#problem/4f7272a8b9d15)

有1个友好号码和N个不友好号码。我们想找出有多少数字正好整除友好数字，但不整除任何不友好数字。

输入格式：输入的第一行包含两个数字 N 和 K，用空格分隔。N是不友好号码的数量，K是友好号码。输入的第二行包含 N 个空格分隔的不友好数字。

输出格式：在一行中输出答案。

约束：

```
1 <= N <= 10^6

1 <= K <= 10^13

1 <= unfriendly numbers <= 10^18 
```

样本输入：

```
8 16

2 5 7 4 3 8 3 18 
```

样本输出：

```
1 
```

解释：给定友好数字 16 的除数是 { 1, 2, 4, 8, 16 }，不友好数字是 {2, 5, 7, 4, 3, 8, 3, 18}。现在1整除所有不友好的数字，2整除2，4整除4，8整除8，但16不整除任何一个。所以只有一个数字可以除掉友好的数字，但不除掉任何不友好的数字。所以答案是1。

很多人问过这个问题，但没有给出完美的答案。这不是重复的，因为其他人都关闭了，我要问这个问题

我使用 Eratosthenes 的筛子来优化不友好的数字（删除重复项，删除给定示例中不必要的数字，如 2 和 4。除以 2 和 4 的数字也除以 8，所以只有 8 wud 达到目的。完成所有这些后，我去除素数）

这是我的代码

```
import java.io.*;
import java.util.*;

public class unfriendly {
public static ArrayList<Long> refine_unfriendly(ArrayList<Long> uf){
    int n=uf.size();
    long x;
    for(int i=uf.size()-1;i>=0;i--){
        x=uf.get(i);
        for(int j=uf.size()-1;j>=0;j--){
            if(j==i)
                continue;
            if(j!=i && uf.get(j)%x==0){
                x=uf.get(j);
                uf.remove(i);
                break;
            }
            else if(j!=i && x%uf.get(j)==0){
                uf.remove(j);
                break;
            }
        }
    }
    return uf;
}

public static void print_output(long k,ArrayList<Long> uf){
    int n=uf.size(),count=0,i;
    long x,y;
    if(n==0)
        count++;
    for(x=2;x<=Math.sqrt(k);x++){
        if(k%x==0){
            for(i=0;i<n;i++){
                if(uf.get(i)%x==0)
                    break;
            }
            if(i==n)
                count++;
            if(k/x!=x){
                y=k/x;
                for(i=0;i<n;i++){
                    if(uf.get(i)%y==0)
                        break;
                }
                if(i==n)
                    count++;
            }
        }
    }
    for(i=0;i<n;i++){
        if(uf.get(i)%k==0)
            break;
    }
    if(i==n)
        count++;
    System.out.println(count);
}
public static void main(String[] args) throws Exception {
    Scanner in=new Scanner(System.in);
    int n=in.nextInt();
    long k=in.nextLong();
    ArrayList<Long> uf=new ArrayList<Long>();
    for(int i=0;i<n;i++)
        uf.add(in.nextLong());
    uf=refine_unfriendly(uf);
    print_output(k,uf);
}
} 
```

这仅解决了 6 个测试用例中的 1 个。其余的超出了时间限制。蛮力法（未精炼）解决了 3 个测试用例。有人请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:26:52.520

您只需生成 K 的所有除数（它需要 sqrt(K) 时间），并且您已经创建了一个新的唯一数组 GCD(a[i],K)，因为如果友好数的除数除以不友好数，则它必须除GCD(unfriendly number,K)，所以你只需使用 set ，因为 GCD(a[i],K) 有 nd(K) 数，其中 nd(K) 代表 K 的除数。所以算法只需要 O(nd(K)^2) 时间。

```
Here is main body of my code :

for(int i=1;i<=n;i++)
    mm.insert(gcd(a[i],k));

vv=(int)sqrt((double)k);

for(int i=1;i<=vv;i++)
    {
        if(k%i==0)
            {
                zz[++cur]=i;
                zz[++cur]=k/i;
            }
    }
if((ll)vv*(ll)vv==k)
    cur--;
int say=0;
for(int i=1;i<=cur;i++)
    {
        q=0;
        for(it=mm.begin();it!=mm.end();it++)
            if(*it%zz[i]==0)
                {
                    q=1;
                    break;
                }
        if(q==0)
            say++;
    }
cout<<say<<endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:08:05.957

首先，在 F 中生成 K 的所有因子。这可以在 O(√K) 时间内天真地完成。

对于每个不友好的数字 Ui，计算 gcd(K,Ui) 并将其存储在集合 S 中。对于 N 个坏数字，这需要 O(NlogK)。

最后，我们通过找到 F 中的因子数来计算答案，这些因子是 S 中无数的因子。因为两个集合最多包含 |F| 数字，那么这需要 O(|F|^2) 时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T20:01:48.270

你的提炼

```
for(int i=uf.size()-1;i>=0;i--){
    x=uf.get(i);
    for(int j=uf.size()-1;j>=0;j--){ 
```

`N`在不友好数字的数量上是二次的。由于`N`可能大到 10 ⁶，这可能是一个非常慢的操作。

对于 small `N`，检查整个不友好数字列表无论如何都很快，对于 large `N`，精炼成本高得令人望而却步。结论：放弃精炼，这是个坏主意。

`sqrt(k)`比检查每个数字是否除以快得多`k`，如果是，则它是否除任何不友好的数字是首先`k`从其素数分解中获得除数列表（除非`k`是素数或两个相近素数的乘积，那么这两种方式都差不多快）。如果`k`有许多除数（而要考虑的除数列表仍然很大），您可以通过计算最大公约数和下一个不友好的数字来排除其中的许多`g`，`k`从`g`列表中删除所有除数。一旦列表变得足够短，简单的成对检查

```
for u in unfriendlyNumbers
    for d in divisors
        if u%d == 0
            remove d from divisors 
```

成为更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T01:04:21.900

我的代码根据丹尼尔的算法

```
import java.io.*;
import java.util.*;

public class Solution {
public static long gcd(long a,long b){
    while (b != 0){
        long m = a % b;
        a = b;
        b = m;
    }
    return a;
}
public static ArrayList<Long> get_factors(long k){
    long x;
    ArrayList<Long> factors=new ArrayList<Long>();
    for(x=2;x<=Math.sqrt(k);x++){
        if(k%x==0){
            factors.add(x);
            if(k/x!=x){
                factors.add(k/x);
            }
        }
    }
    factors.add((long)1);
    factors.add(k);
    return factors;
}
public static void main(String[] args) throws Exception {
    Scanner in=new Scanner(System.in);
    int n=in.nextInt();
    long k=in.nextLong(),g;
    long[] unf=new long[n];
    ArrayList<Long> factors=new ArrayList<Long>();
    factors=get_factors(k);
    for(int i=0;i<n;i++){
        unf[i]=in.nextLong();
        g=gcd(k,unf[i]);
        for(int j=factors.size()-1;j>=0;j--){
            if(g%factors.get(j)==0)
                factors.remove(j);
        }
    }
    if(n==0)
        System.out.println(2);
    else
        System.out.println(factors.size());
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T12:49:52.823

您可以使用 GCD 获得不友好数和友好数 k 之间的所有公约数。在）

然后得到K的所有除数，O(sqrt(K))。

然后使用 O(N*sqrt(K)) 的两个内部循环获得 res :)。请享用 ;）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-28T18:52:15.557

正在运行但得分较低的代码可能是因为 findFactorsOfNumber 方法的时间复杂度更高：

```
import java.util.HashSet;
import java.util.Scanner;
import java.util.Set;

public class Solution {

    private Long n, k;
    private static long result = 0;
    private Set<Long> unfriendlyNumbers;

    private Solution() {
        this.unfriendlyNumbers = new HashSet<Long>();
    }

    public static void main(String[] args) {
        Solution solution = new Solution();
        Scanner scanner = new Scanner(System.in);
        solution.n = scanner.nextLong();
        solution.k = scanner.nextLong();
        for (long l = 0; l < solution.n; l++) {
            solution.unfriendlyNumbers.add(scanner.nextLong());
        }

        Set<Long> factors = findFactorsOfNumber(solution.k);

        // find gcd of k and each of n unfriendly numbers
        Set<Long> gcdSet = new HashSet<Long>();
        for (long unfriendlyNumber : solution.unfriendlyNumbers) {
            gcdSet.add(gcd(solution.k, unfriendlyNumber));
        }

        // check for those factors which are not the factors for any number in gcdSet
        result = factors.size();
        for (Long factor : factors) {
            for (long gcd : gcdSet) {
                if ((gcd >= factor && gcd % factor == 0)) {
                    result--;
                    break;
                }
            }
        }
        System.out.println(result);

    }

    private static Set<Long> findFactorsOfNumber(Long input) {
        long increment = 1;
        if (input % 2 != 0) {
            increment = 2;
        }
        Set<Long> list = new HashSet<Long>();
        for (long i = 1; i <= input / 2; i = i + increment) {
            if (input % i == 0) {
                list.add(i);
            }
        }
        list.add(input);
        return list;
    }

    public static long gcd(long p, long q) {
        if (q == 0) {
            return p;
        }
        return gcd(q, p % q);
    }

} 
```

# wordpress - 为什么 MAMP localhost 的 Wordpress 仪表板上没有样式，仅在 Chrome 上发生？

> ID：12413305
> 
> 赞同：1
> 
> 时间：2012-09-13T19:19:45.030
> 
> 标签：wordpress, google-chrome, mamp

我已经根据 Wordpress Codex 安装过程安装了 MAMP，它似乎从 /Users/username/Sites 运行良好，并为 Apache 使用端口 80。

我从 phpMyAdmin 界面创建了新数据库，并使用著名的 5 分钟安装成功地将 Wordpress 安装到其中。

新网站显示得很好，但是当我访问 Wordpress 仪表板区域时，我看到的是： [http ://www.evernote.com/shard/s19/sh/49a6c28c-0170-467a-a3f5-433d8ca4d4df/1863e78f5f870c7db6a41e0f18c03fca](http://www.evernote.com/shard/s19/sh/49a6c28c-0170-467a-a3f5-433d8ca4d4df/1863e78f5f870c7db6a41e0f18c03fca)

奇怪的是仪表板在 Firefox 中显示良好。显示这种不一致的是 Chrome。我曾多次尝试清除 Chrome 的缓存，但无济于事。

谁能帮我理解为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:50:42.287

为了解决此问题，您需要添加

```
define('CONCATENATE_SCRIPTS', false ); 
```

到您的 wp_config.php 文件。

# ruby - 在 Heroku 上执行 rake db:migrate 时出错

> ID：12413306
> 
> 赞同：18
> 
> 时间：2012-09-13T19:19:59.450
> 
> 标签：ruby, heroku, rake, database-migration

做的时候

`heroku run rake db:migrate`

执行所有迁移，然后，最后我总是收到以下消息：

`/app/vendor/bundle/ruby/1.9.1/bin/rake: No such file or directory - pg_dump -i -s -x -O -f /app/db/structure.sql dan79p98fykovu`

我无法将 pg_dump 添加到 Heroku 上的 PATH 中。如何处理？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-05T22:23:53.153

`structure.sql`问题是一旦迁移完成，rails 会尝试转储一个新的，并且由于`pg_dump`不存在而失败。为已部署的应用程序生成新的 structure.sql 是没有意义的，因此最好的解决方案是告诉 rails 不要这样做。

编辑您的`Rakefile`并覆盖任务。在它的末尾添加以下行应该可以做到：

```
Rake::Task["db:structure:dump"].clear if Rails.env.production? 
```

# django - Django查询关系的关系

> ID：12413308
> 
> 赞同：0
> 
> 时间：2012-09-13T19:20:09.220
> 
> 标签：django, orm, django-models, django-orm

我被困在困扰我的 Django ORM 问题上。我有一组由外键链接的模型，但要求有点奇怪。我需要按它们的关系列出项目。这很难解释，所以我试图在下面描述这一点，给定：

工作

*   多对多（获奖）

奖

*   ForeignKey(AwardCategory)

奖项类别

我需要列出工作项目，以便按奖励类别列出。期望的输出是：

工作实例 A

*   属于奖励类别实例 A 的奖励实例 A
*   属于奖励类别实例 A 的奖励实例 C
*   属于奖励类别实例 A 的奖励实例 G

工作实例A（与上述实例相同，但按不同的奖励类别列出）

*   属于奖励类别实例 B 的奖励实例 F
*   属于奖励类别实例 B 的奖励实例 R
*   属于奖励类别实例 B 的奖励实例 Z

工作实例 B

*   属于奖励类别实例 A 的奖励实例 B
*   属于奖励类别实例 A 的奖励实例 A

本质上，我想按奖项类别列出所有作品。我可以让它部分工作，但我的解决方案是肮脏和粗暴的。我想知道是否有更好的方法。我考虑使用 ManyToMany 和 through 属性，但我不确定我是否正确使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:35:19.083

根据模型的字段和关系调整以下内容：

```
for w in Work.objects.all():
    print w
    for award in w.award_set.order_by(awardcategory):
         print "%s that belongs to %s" % (award,award.awardcategory) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:18:09.653

所以我想出了一个类似的结果，但它仍然感觉有点脏:(

```
categories = AwardCategory.objects.all()
work = []
for cat in categories:
    work_in_cat = Work.objects.filter(awards__category=cat).distinct()
    for w in work_in_cat:
        work.append({
            'work': w,
            'category': cat,
            'awards': w.awards.filter(category=cat)
        }) 
```

这会产生我想要的结果，但是在 for 循环中这样做似乎是错误的！

# java - jsch sftp - 切换到父目录

> ID：12413309
> 
> 赞同：1
> 
> 时间：2012-09-13T19:20:17.423
> 
> 标签：java, android, sftp, jsch

我试图弄清楚如何使用 Jsch Sftp 去父目录。

我将当前路径存储在一个字符串中，我猜是 channelSftp.cd(String); 是我应该使用的。但是在当前路径上使用子字符串我感觉不对。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T20:00:20.430

与外壳相同：

```
channelSftp.cd(".."); 
```

# delphi - 德尔福 + ADO + dBase

> ID：12413316
> 
> 赞同：1
> 
> 时间：2012-09-13T19:21:06.393
> 
> 标签：delphi, ado, dbase

我正在尝试让这 3 个工作正常。如果我使用这个连接字符串

```
Driver={Microsoft dBASE Driver (*.dbf)};DriverID=277;OLE DB Services = -1;Extended Properties=dBase IV;Dbq=c:\mypath 
```

像这样`ADOTable1.Open`的操作非常快（好），但`GetIndexNames`什么也不返回（坏）。

如果我改用这个连接字符串

```
Provider=Microsoft.Jet.OLEDB.4.0;Extended Properties=dBASE IV;OLE DB Services=-1;Data Source=c:\mypath 
```

像这样`ADOTable1.Open`的操作非常慢（坏），而`GetIndexNames`返回索引名称的方式应该是（好）。

如何通过 ADO 获取 dBase 表的速度和索引信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:27:32.477

我们使用以下连接字符串，效果非常好。

```
Provider=MSDASQL.1;Persist Security Info=False;Extended Properties="Driver={Microsoft Visual FoxPro Driver};UID=;SourceDB=c:\mypath;SourceType=DBF;Exclusive=No;BackgroundFetch=Yes;Collate=Machine;Null=Yes;Deleted=Yes;" 
```

# python - 合并列表并执行检查

> ID：12413317
> 
> 赞同：0
> 
> 时间：2012-09-13T19:21:06.890
> 
> 标签：python, django, django-templates

我有一个活动的与会者名单。与会者对象被键入到配置文件对象。在视图中，我试图附加 3 个列表来弥补`attendee_list`。

模型.py

```
class Attendee(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    profile = models.ForeignKey(Profile)
    event = models.ForeignKey(Event)
    verified = models.BooleanField(default=False)
    from_user = models.BooleanField(default=False) 
```

视图.py

```
verified_attendees = [va.profile for va in Attendee.objects.filter(event=event, verified=True)]
unverified_attendees = [uva.profile for uva in Attendee.objects.filter(event=event, verified=False, from_user=True)
pending_attendees = [pa.profile for pa in Attendee.objects.filter(event=event, from_user=False, verified=False)]
attendee_list = ???? 
```

我想要完成的（模板）：

> {% 为参加者列表中的参加者 %}
> 
> ```
> ... 
> ```

```
Name            |       Status
--------------------------------------
Jon Doe         |       Pending
Annie Smith     |       Verified!
Abraham Snow    |       Confirm Yes/No? 
```

如何将这 3 个列表合二为一，并且仍然检查它们属于哪个列表（无论是在视图还是模板中）？我想要一个列表的原因是因为我将按字母顺序对与会者进行排序。提前感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:32:21.613

当你可以这样做时，为什么要首先分裂：

```
attendees = [(a.profile, a.verified, a.from_user)
                 for a in Attendee.objects.filter(event=event)] 
```

进而：

```
{% for attendee, verified, from_user in attendees_list %} 
```

`{% if verified %}`然后，您可以使用或`{% if from_user %}`块在模板级别控制每个人所说的内容。

或者，您可以这样做：

```
attendees = Attendee.objects.filter(event=event) 
```

并在模板中直接引用`attendee.profile`、`attendee.verified`和。`attendee.from_user`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:27:26.450

一个选项可能是创建一个元组列表：`(<profile>, <status>)`，然后您可以迭代第一个列表创建`(profile, 'verified')`，然后对其他列表执行相同操作，直到您有一个列表，您可以将其分配给参加者列表字段并传递给上下文?

# jquery - 背景图像在 Chrome 中偶尔会被部分截断

> ID：12413319
> 
> 赞同：0
> 
> 时间：2012-09-13T19:21:09.083
> 
> 标签：jquery, css, background-image

我正在与希望在其页面背景中使用微弱图像的客户合作，并且当用户将鼠标悬停在某个控件上时，背景图像变得清晰。我在 Firefox 中成功地做到了这一点。但是，Chrome 偶尔会给我带来麻烦。它似乎偶尔会切断背景图像的上半部分。不是每次，但有时。我不知道它是否有任何模式。这是它的样子（查看屏幕截图的左半部分）。

被切断：![隔断](../Images/eed595b891ced113ab23d2c889cb4b78.png) 没有被切断：![不切断](../Images/74743437856f46cddedff4473ac91deb.png) 实际页面位于： [https](https://www.isupelive.com/isupe/web/main.php) ://www.isupelive.com/isupe/web/main.php 只需使用谷歌浏览器在页面上刷新几次，问题应该复制品。

可以在页面上看到完整的 CSS 和 Javascript，但这里有一些摘录：

HTML 和 CSS：

```
<section id="thesection" style="background-image:url('../images/bg-95.png'); background-repeat:no-repeat; background-attachment:fixed; background-position: 0px 90px;"> 
```

Javascript/jQuery 在鼠标悬停时更改图像：

```
$(document).ready(function() { 
    // Preload Images 
    preload(['../images/bg-100.png', '../images/bg-95.png']);

    // Mouse over effect
    $("#logout").hover(
    function () {
        $("#thesection").css("background-image", "url('../images/bg-100.png')");
    }, 
    function () {
        $("#thesection").css("background-image", "url('../images/bg-95.png')");
    }
); 
```

任何想法为什么会发生这种情况或如何解决它？解决方法？提前致谢...

# jquery - 响应式菜单所需的“简单”CSS 调整

> ID：12413331
> 
> 赞同：0
> 
> 时间：2012-09-13T19:21:45.387
> 
> 标签：jquery, css, drop-down-menu, responsive-design

我找到了一个关于构建干净、响应迅速的菜单的很棒的教程，它几乎是完美的！

请查看 www.gymnasticsvillage.com/unifirst/navtest （不在 IE 中，因为我还没有添加 response.js！）并将您的浏览器减少到断点（480）

我还没有收到博客作者的回复，我知道这对于 CSS 大师来说可能很简单......我需要帮助的是：

1）当您打开子导航时，向下箭头图形应与向上箭头交换以提示用户折叠。我制作了图形“upArrow.png”，只是现在不知道该怎么办！

2）现在菜单充当滑板，但我会更像是手风琴，自动折叠另一个子菜单

我希望有人可以帮助...非常感谢！

如果有人想要一个很棒的教程，请查看！ [http://webdesign.tutsplus.com/tutorials/site-elements/big-menus-small-screens-responsive-multi-level-navigation/](http://webdesign.tutsplus.com/tutorials/site-elements/big-menus-small-screens-responsive-multi-level-navigation/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:26:39.390

目前，我正在使用 Twitter Bootstraps 下拉菜单。如果您不想使用它，也许您可​​以“窃取”他们如何实现响应式菜单的一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:37:27.500

当您打开子导航时，向上箭头

```
.nav > li:hover > a {
    border-bottom: 4px solid #D1D2D4;
    background-image: url("../images/upArrow.png");
    background-position: right center;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:39:52.587

我认为这很简单。

这是向上箭头所需的 CSS。将其添加到该部分的末尾`@media screen and (max-width: 480px) {`。

```
.nav li.hover > .parent {
    background-image: url('../images/upArrow.png');
} 
```

css 文件的第 146 行应该是这样，这样您就不会丢失箭头 ( `.nav > li > * a:hover`)：

```
background-color:#017865; 
```

js文件的第36行需要是这样的：

```
$(this).parent("li").toggleClass("hover").siblings('li').removeClass("hover"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T21:08:23.150

这是解决方案：

```
.nav li.hover > a {
    background-image: url("../img/upArrow.png");
}
.nav li li.hover > a {
    background-image: url("../img/upArrow.png");
} 
```

# zend-framework - Zend：将多个js文件添加到布局中

> ID：12413332
> 
> 赞同：0
> 
> 时间：2012-09-13T19:21:54.107
> 
> 标签：zend-framework, zend-layout

我试图将多个 js 文件添加到布局中。我想在助手中做到这一点。
这是我的助手的代码：

```
// class Zend_View_Helper_LoadJs extends Zend_View_Helper_Abstract

public function loadJs()
{
    $dir = '../public/js';      
    $dir = scandir($dir);

    $jsFiles = array();

    foreach($dir as $key => $value)
    {
        if($value != '.' && $value != '..')
            $jsFiles[] = $value;
    }

    if(is_array($jsFiles)){
        foreach($jsFiles as $key => $val)
        {
            $this->view->headScript()->appendFile($this->view->baseUrl('js/'.$val));
        }
    }

} 
```

在我的布局中，我有：

```
<?php $this->loadJs(); ?> 
```

问题是它没有添加任何js文件。
如果我之前放回声：

```
echo $this->view->headScript()->appendFile($this->view->baseUrl('js/'.$val)); 
```

或者

```
<?php echo $this->loadJs(); ?> 
```

然后脚本添加了几次相同的文件。
有人可以告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:39:08.010

试试这个（评论显示更改）：
**[编辑]**
好的，我想我明白了。为了使用这个助手来填充`headscript()`堆栈，我们必须将结果注册到视图渲染器。

```
public function loadJs() {
        $dir =  '../public/js';
        $dir = scandir($dir);
        //get bootstrap
        $bootstrap = Zend_Controller_Front::getInstance()->getParam('bootstrap');
        //get current view renderer
        $view = $bootstrap->getResource('view');
        $jsFiles = array();

        foreach ($dir as $key => $value) {
            if (!is_dir($value))
                $jsFiles[] = $value;
        }
        if (is_array($jsFiles)) {
            foreach ($jsFiles as $key => $val) {
                if (strpos($val, '.js') != FALSE) {
                    //assign file to headscript stack in the cuurent view renderer
                   $view->headScript()->appendFile($this->view->baseUrl('js/' . $val)). "\n";
                }
            }
        }
    } 
```

现在，当我们`headscript()`在布局中回显时，这些文件将被渲染一次。

*仅供参考，`init()`我在引导程序中执行我的视图*：

```
 //truncated because it's too long...
 protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();        
        //set doctype for default layout
        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);
        //set css includes
        $view->headLink()->setStylesheet('/css/normalize.css');  
        //add javascript files
        $view->headScript()->setFile('/javascript/modernizr.js'); 
        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

然后我在布局中使用了助手，如：

```
<?php echo $this->doctype() . "\n" ?>
<?php $this->LoadJs()  ?>
<html>
    <head>
        <?php echo $this->headTitle() . "\n"; ?>
        <?php echo $this->headMeta() . "\n"; ?>
        <?php echo $this->headLink() . "\n" ?>
        <?php echo $this->headscript() . "\n" ?>

        <!--[if IE]><script type="text/javascript" src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    </head> 
```

这样做，`LoadJs()`不会直接渲染任何东西，而是该方法只是将文件转储到`headscript()`占位符上。

我的结果：

```
<script type="text/javascript" src="/javascript/modernizr.js"></script> <!--added by bootstrap -->
<script type="text/javascript" src="/javascript/mediaelement/build/jquery.js"></script> <!-- added by bootstrap -->
<script type="text/javascript" src="http://schoenwolf.local/javascript/modernizr.js"> </script><!-- added by LoadJs --> 
```

我希望它也适用于你。

# razor - Asp.Net MVC4：确定 HtmlHelper 生成的表单输入的 Id

> ID：12413334
> 
> 赞同：2
> 
> 时间：2012-09-13T19:22:04.807
> 
> 标签：razor, asp.net-mvc-4

如果我像这样创建了一个文本框：

```
@Html.TextBoxFor(p => p.FirstName) 
```

有没有办法让我知道这个输入的 ID 是什么？其他控件或 javascript 引用此输入的方法？

我可以使用 htmlAttributes 参数对其进行标记；但是，我希望有一条更直接的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:28:58.403

您可以尝试使用此代码

延期

```
 public static MvcHtmlString GetFieldIdFor<TModel, TValue>(this HtmlHelper<TModel> html,
            Expression<Func<TModel, TValue>> expres) 
        { 
            var htmlFieldName = ExpressionHelper.GetExpressionText(expres); 
            var inputFieldId = html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(htmlFieldName); 
            return MvcHtmlString.Create(inputFieldId); 
        } 
```

页

```
<textbox for="<%= Html.GetFieldIdFor(m => m.FirstName) %>">FirstName:</textbox > 
```

脚本

```
<script> $.function('<%= Html.GetFieldIdFor(m => m.FirstName) %>'); </script> 
```

# cryptography - 在 Gladman 的 AES-CTR 实现中，if(b_pos) 代码部分的用途是什么？

> ID：12413335
> 
> 赞同：0
> 
> 时间：2012-09-13T19:22:04.643
> 
> 标签：cryptography, aes

试图了解 Brian Gladman 博士的 AES-CTR 实施。（http://gladman.plushost.co.uk/oldsite/AES/aes-src-12-09-11.zip aes_modes.c 第 849 行以后）我阅读了 CTR 算法，但这个实现让我很困惑。*我看不出它如何与 CTR 模式算法匹配。*

if(b_pos) 代码部分是做什么用的？

我也不明白条件 b_pos < AES_BLOCK_SIZE && len

因为 (AES_BLOCK_SIZE && len) 在 len > 0 时始终为 1。AES_BLOCK_SIZE 为 16。

```
 if(b_pos)
    {
        memcpy(buf, cbuf, AES_BLOCK_SIZE);
        if(aes_ecb_encrypt(buf, buf, AES_BLOCK_SIZE, ctx) != EXIT_SUCCESS)
            return EXIT_FAILURE;

        while(b_pos < AES_BLOCK_SIZE && len)
        {
            *obuf++ = *ibuf++ ^ buf[b_pos++];
            --len;
        }

        if(len)
            ctr_inc(cbuf), b_pos = 0;
    }

AES_RETURN aes_ctr_crypt(const unsigned char *ibuf, unsigned char *obuf,
            int len, unsigned char *cbuf, cbuf_inc ctr_inc, aes_encrypt_ctx ctx[1])
{   unsigned char   *ip;
    int             i, blen, b_pos = (int)(ctx->inf.b[2]);
    uint_8t buf[BFR_LENGTH];
    if(b_pos)
    {
        memcpy(buf, cbuf, AES_BLOCK_SIZE);
        if(aes_ecb_encrypt(buf, buf, AES_BLOCK_SIZE, ctx) != EXIT_SUCCESS)
            return EXIT_FAILURE;

        while(b_pos < AES_BLOCK_SIZE && len)
        {
            *obuf++ = *ibuf++ ^ buf[b_pos++];
            --len;
        }

        if(len)
            ctr_inc(cbuf), b_pos = 0;
    }
    while(len)
    {
        blen = (len > BFR_LENGTH ? BFR_LENGTH : len), len -= blen;

        for(i = 0, ip = buf; i < (blen >> 4); ++i)
        {
            memcpy(ip, cbuf, AES_BLOCK_SIZE);
            ctr_inc(cbuf);
            ip += AES_BLOCK_SIZE;
        }

        if(blen & (AES_BLOCK_SIZE - 1))
            memcpy(ip, cbuf, AES_BLOCK_SIZE), i++;

        if(aes_ecb_encrypt(buf, buf, i * AES_BLOCK_SIZE, ctx) != EXIT_SUCCESS)
            return EXIT_FAILURE;

        i = 0; ip = buf;
            while(i + AES_BLOCK_SIZE <= blen)
            {
                obuf[ 0] = ibuf[ 0] ^ ip[ 0]; obuf[ 1] = ibuf[ 1] ^ ip[ 1];
                obuf[ 2] = ibuf[ 2] ^ ip[ 2]; obuf[ 3] = ibuf[ 3] ^ ip[ 3];
                obuf[ 4] = ibuf[ 4] ^ ip[ 4]; obuf[ 5] = ibuf[ 5] ^ ip[ 5];
                obuf[ 6] = ibuf[ 6] ^ ip[ 6]; obuf[ 7] = ibuf[ 7] ^ ip[ 7];
                obuf[ 8] = ibuf[ 8] ^ ip[ 8]; obuf[ 9] = ibuf[ 9] ^ ip[ 9];
                obuf[10] = ibuf[10] ^ ip[10]; obuf[11] = ibuf[11] ^ ip[11];
                obuf[12] = ibuf[12] ^ ip[12]; obuf[13] = ibuf[13] ^ ip[13];
                obuf[14] = ibuf[14] ^ ip[14]; obuf[15] = ibuf[15] ^ ip[15];
                i += AES_BLOCK_SIZE;
                ip += AES_BLOCK_SIZE;
                ibuf += AES_BLOCK_SIZE;
                obuf += AES_BLOCK_SIZE;
            }

        while(i++ < blen)
            *obuf++ = *ibuf++ ^ ip[b_pos++];
    }
    ctx->inf.b[2] = (uint_8t)b_pos;
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:22:12.603

CTR 模式使 AES 像流密码一样工作。加密和解密时，对数据长度没有限制，尤其是在块对齐方面（就像其他模式一样，如 CBC）。

该函数`aes_ctr_crypt()`确实可以使用`ibuf`任意长度的输入数据 ( ) 调用。

问题在于，对于每次调用，函数都需要记住上一次的两件事：

1.  当前*计数器块*的值（即参数`cbuf`）
2.  *到目前为止它在当前计数器块*中消耗了多少字节（这是保存在参数中`ctx`并复制到局部变量中的信息`b_pos`）。

`b_pos`因此是密钥流中的位置模 16。

换句话说，当函数完成对某条数据的加密而没有消耗最后一个*计数器块*中的所有 16 个字节时，它会留下`b_pos`一个值`0<b_pos<16`，以便函数可以在下一次调用时从那里继续。值表示前一个*计数器块*`0`中的所有字节都已用完，是时候调用计数器函数了。

 *关于`b_pos < AES_BLOCK_SIZE && len`您应该将其阅读为：

```
(b_pos < AES_BLOCK_SIZE) && len 
```

因为运算符优先级。循环终止要么是因为您用完了“剩余的”密钥流字节（左手），要么是因为您用完了明文数据（右手）。*

# android - 某些 url 无法在 android 中播放在线广播

> ID：12413342
> 
> 赞同：0
> 
> 时间：2012-09-13T19:22:40.463
> 
> 标签：android, streaming

我正在构建一个 Android 应用程序，它将从我的国家流式传输多个广播电台，我使用

一些网址，它们对我不起作用。这里的代码：

```
 private void startStreamingAudio() {
        try { 
            final ProgressBar progressBar = (ProgressBar) findViewById(R.id.progress_bar);
            if ( audioStreamer != null) {
                audioStreamer.interrupt();
            }
            audioStreamer = new StreamingMediaPlayer(this,textStreamed, playButton, streamButton,progressBar);

            audioStreamer.startStreaming("http://stream.mosaiquefm.net/mosaique64k?MSWMExt=.asf",5208, 216);
            streamButton.setEnabled(false);
        } catch (IOException e) {
            Log.e(getClass().getName(), "Error starting to stream audio.", e);                  
        } 
```

因此，当我更改其他网址时，例如此网址：

> [http://npr.ic.llnwd.net/stream/npr_live24](http://npr.ic.llnwd.net/stream/npr_live24) 它工作正常。

我只是想知道，为什么代码适用于某些 URL，而不适用于其他一些！谢谢你帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:52:29.160

我不知道您的`StreamingMediaPlayer`课程是什么，但[支持的 Android 原生支持的媒体格式列表](http://developer.android.com/guide/appendix/media-formats.html)不包括 ASF。

# asp.net - 减少 asp.net 菜单膨胀的建议

> ID：12413343
> 
> 赞同：0
> 
> 时间：2012-09-13T19:22:42.747
> 
> 标签：asp.net, performance

我有一个 asp.net (3.5) 应用程序，它的页面大多是轻量级的，除了 aspnet 菜单的膨胀，它占从服务器传输的数据的大约 1/3。

该菜单出现在每个页面上（通过使用母版页），并且一遍又一遍地传输，从而减慢一切。

我该如何改善这种情况？

我有一些想法，但我对它们的了解还不够，不知道这样做是否是个好主意，或者我将如何编写它们。

如果你给我一个建议，你能否也给我一个链接来解释如何实施解决方案？

到目前为止，菜单是硬编码的，但可能会在某个时候从数据库中读取。

它怎么能被加载一次然后被每个网页使用，而不是每次都通过网络发送渲染 html？

# javascript - 是否可以使用 iframe API 在 iOS 的浏览器上播放 youtube 视频？

> ID：12413348
> 
> 赞同：2
> 
> 时间：2012-09-13T19:23:15.277
> 
> 标签：javascript, iphone, ios, ipad, youtube-api

我有一个带有视频背景的网站。自动播放在 iOS 中不起作用，因此需要用户单击。

单击 youtube 缩略图播放视频时，视频已加载到 youtube 应用程序中，是否可以在不加载应用程序的情况下将其加载到浏览器本身中？

这个想法是让用户浏览网站，同时在后台观看视频。必须在外部播放器上观看它会破坏交易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T20:23:40.823

这是不可能的。Apple 不允许在 iOS 浏览器中自动播放任何内容。

为了在浏览器上播放视频，您需要：

1.  来自用户的交互（点击）。
2.  用户必须直接与 youtube 播放器交互（点击触发 API 上播放方法的外部按钮将不起作用，您需要用户直接与播放器交互）。

不可能克服要求 1，并且您可以采取一些令人讨厌的 hack 来克服第 2 项（例如将不透明度为 0.01 的播放器放在其他元素之上，并使其看起来像是在单击该元素，而您正在实际上点击几乎看不见的播放器，从而伪造了一个播放视频按钮）。但就目前而言。

# view - Creating Activities in a Snapshot View in ClearCase

> ID：12413352
> 
> 赞同：1
> 
> 时间：2012-09-13T19:23:42.507
> 
> 标签：view, clearcase, snapshot-view

I would like to create an activity for my ClearCase snapshot view, but you cannot [ct setview](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/c_about_setup_view_ucmact.htm) to a snapshot and when I try to just [ct mkactivity](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkactivity.htm) I get the following error:

> my_snapshot> ct mkact
> 
> Create activity with automatically generated name? [yes] y
> 
> [27204] mkact_pre -- trigger firing
> 
> Stream feature 'MkactForbidden' does not allow creation of activities.
> 
> cleartool: Warning: Trigger "UTS_mkact_pre" has refused to let mkactivity proceed.
> 
> cleartool: Error: Unable to create activity.

Can you create activities in ClearCase snapshot views? Or are you restricted to creating activities in dynamic views?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:45:00.917

First, [`cleartool setview`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_setview.htm) is only for dynamic view (see "[Python and ClearCase setview](https://stackoverflow.com/questions/10252436/python-and-clearcase-setview)", for instance, for more).

[`mkact`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkactivity.htm) can create activity in any view, dynamic or snapshot, but in your case, a pre-op trigger on the `mkact` operation prevents you to create it.
You could try and set an *existing* activity: you might have to unselect the current one (`ct setact -none`) first.

But mainly you need to check with your ClearCase admin why this trigger prevents you to make any activity, which in effects prevents you to checkout or rebase or deliver in this stream.

# math - 求圆周的面积

> ID：12413354
> 
> 赞同：0
> 
> 时间：2012-09-13T19:24:02.727
> 
> 标签：math, geometry

我正在开发一种雷达，我在其中显示一些坐标。但是我有一个我无法解决的数学问题。这是雷达：

![在此处输入图像描述](../Images/eacb130017707826e2dd96007734fb95.png)

它有两个区域：安全区域（白色区域）和危险区域（红色区域）。安全区半径为30，整周半径为100。

我正在开发一种在危险区域创建随机坐标的功能，但为此，我需要在该区域随机选择 X 和 Y，但我不知道该怎么做。中心是 (0,0)

有小费吗？真的感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:26:28.003

只需使用[极坐标](http://en.wikipedia.org/wiki/Polar_coordinate_system)：

```
float radius = min + rand(max - min); // 30 + rand(0..70)
float angle = rand(-PI, PI)

int x = radius*cos(angle);
int y = radius*sin(angle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:29:16.093

如果您希望点在两个笛卡尔维度上均匀分布，那么您需要选择随机 x 和 y 坐标，然后丢弃任何不在所需区域内的结果。

# c# - 在 C# 中交换正 32 位整数中的位

> ID：12413356
> 
> 赞同：2
> 
> 时间：2012-09-13T19:24:07.390
> 
> 标签：c#, bit-manipulation

所以我试图解决这个问题：

> 给你一个随机的 32 位正整数，你要做的就是将第 3、4 和 5 位的位值与第 24、25 和 26 位的位值交换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T19:27:36.597

假设这是一个您不想要明确解决方案的问题，这里有一个提示：使用 屏蔽有问题的位`&`，进行移位，然后`OR`使用按位`|`。

您可以使用掩码“剪切”第 3、4 和 5 位，并使用`0x00000034`掩码“剪切”第 24、25 和 26 位`0x07000000`。

看看这个[解决](http://graphics.stanford.edu/~seander/bithacks.html#ReverseParallel)位反转问题的解决方案以获得灵感。

**编辑：（**回应“不是作业”评论）由于这不是作业，这里有一个更深入的解释：

```
unsigned int val = ... // your value
unsigned int bits_03_04_05 = val & 0x00000034;
unsigned int bits_24_25_26 = val & 0x07000000;
// Cut out "holes" at bits 3, 4, 5, 24, 25, and 26 of the original value
unsigned int res = val & ~(0x00000034 | 0x07000000);
// Put bits 3, 4, and 5 in place
res |= bits_03_04_05 << 21;
// Put bits 23, 24, and 25 in place
res |= bits_24_25_26 >> 21; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T19:33:41.413

怎么样：

```
 // snag the values from 3,4,5 (small) and 24,25,26 (large)
    int small = value & (7 << 2), large = value & (7 << 23);

    // remove the old values, and add in the new ones
    value = (value ^ (small | large)) | (large >> 21) | (small << 21); 
```

（将第 1 位计为 LSB；如果您的意思是第 0 位是 LSB，则将数字调整为 1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T00:09:30.293

要解决这个问题，您可以使用按位属性`operator&`并`operator|`在初始整数值和[掩码](https://en.wikipedia.org/wiki/Mask_(computing))之间应用它们。

假设您有一个初始值：

```
 unsigned int val;// your value 
```

你需要形成一个面具：

```
int setLSB = 1;   // 00000001

int atPosition = 4;

// shift the set bit 4 positions to the left
int mask = setLSB << atPosition;   // 00010000 
```

然后用它来检索、清除和设置位值：

```
// get bit at position 4
unsigned int valueOfFourthBit = val & mask;

// clear bit at position 4 and assign to result
unsigned int res = val & ~(mask);

// put the value of the 4th bit at wanted position
int wantedPosition = 21;
res |= valueOfFourthBit << wantedPosition; 
```

* * *

如果您需要一系列连续位，如您的情况 3，您可以执行以下操作：

```
int numberOfSetBits = 3;
int setLSBs = 0

for (int i =0; i < numberOfSetBits; ++i)
{
    setLSBs += (int) Math.Pow(2, i);
}

setLSBs = 7; // 00000111

// and then the masks for getting 3,4,5 and 24,25,26 bits become
int smallPosition = 3;
int largePosition = 24;

int smallMask = setLSBs << smallPosition; // 0x00000034
int largeMask = setLSBs << largePosition; // 0x07000000; 
```

其余的都包含在现有的答案中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-01T00:18:01.883

我不喜欢给定答案的一件事是它们都是硬编码的。这是一个更通用的解决方案：

```
int s32_Value = XYZ;
s32_Value = SwapBits(s32_Value, 1<<3, 1<<24);
s32_Value = SwapBits(s32_Value, 1<<4, 1<<25);
s32_Value = SwapBits(s32_Value, 1<<5, 1<<26);

int SwapBits(int s32_Value, int s32_Mask1, int s32_Mask2)
{
    bool b_Bit1 = (s32_Value & s32_Mask1) != 0;
    bool b_Bit2 = (s32_Value & s32_Mask2) != 0;
    s32_Value &= ~s32_Mask1;
    s32_Value &= ~s32_Mask2;
    if (b_Bit1) s32_Value |= s32_Mask2;
    if (b_Bit2) s32_Value |= s32_Mask1;
    return s32_Value;
} 
```

此函数也可用于包含位标志的枚举。例如，如果您想将 System.Windows.Forms.Control 的 Anchor 从左交换到右，反之亦然：

```
Ctrl.Anchor = (AnchorStyles)SwapBits((int)Ctrl.Anchor, (int)AnchorStyles.Left, (int)AnchorStyles.Right); 
```

这是枚举的定义：

```
// Specifies how a control anchors to the edges of its container.
[Flags]
public enum AnchorStyles
{
    // The control is not anchored to any edges of its container.
    None   = 0,
    // The control is anchored to the top edge of its container.
    Top    = 1,
    // The control is anchored to the bottom edge of its container.
    Bottom = 2,
    // The control is anchored to the left edge of its container.
    Left   = 4,
    // The control is anchored to the right edge of its container.
    Right  = 8,
} 
```

# jquery - 谷歌分析外部链接代码不起作用

> ID：12413361
> 
> 赞同：0
> 
> 时间：2012-09-13T19:24:24.103
> 
> 标签：jquery, google-analytics

我们当前的外部链接代码没有正常工作，所以我被要求制定一个新的集合。这是我从另一个网站上取下来的代码，但它看起来好像工作正常（保存 $().ready 它丢失了）。我很清楚 Google 建议您将 onclick 手动放入每个外部链接中，但是在我的网站上这样做是可行的，所以我将 JQuery 作为一个包罗万象的方法。我无法在用户通常无法访问的多个页面上实现此功能（由于监管偏执狂），因此不得不激活页面内分析以查看该页面的统计信息。尽管我发现（使用警报）_gaq.push 至少会触发，但没有点击外部链接注册。这是代码（现已修复）：

```
$().ready(function(){
    $("a").on('click',function(e){
        var url = $(this).attr("href");
        if (e.currentTarget.host != window.location.host) {
            _gaq.push(['_trackEvent', 'Outbound Link', e.currentTarget.host, url, 0]);
            if (e.metaKey || e.ctrlKey || this.target=="_blank") {
                 var newtab = true;
            }
            if (!newtab) {
                 e.preventDefault();
                 setTimeout('document.location = "' + url + '"', 100);
            }
        }
    });
}); 
```

(!newtab) if 是为了确保 _gaq.push 使用超时触发。有什么想法可以解决吗？

编辑：可能值得注意的是，这是一个外部文件。

Edit2：代码已更正错误，以便其他想要使用它的人轻松复制/粘贴。非常感谢迈克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:49:14.937

您的代码没有明显的问题。我不会尝试通过页面内分析来验证事件，而是尝试检查`__utm.gif`跟踪像素请求。执行此操作的几种不同方法是：

*   [Firebug](http://getfirebug.com/)或 Chrome 开发者工具中的网络标签。
*   像[Fiddler这样的 Web 调试代理](http://www.fiddler2.com/fiddler2/)
*   Google Analytics 调试脚本[ga_debug.js](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#gaDebug)将记录跟踪请求和错误。
*   [Google Analytics 跟踪代码调试器](https://chrome.google.com/extensions/detail/jnkmfdileelhofjcijamephohjechhna)是一个启用 ga_debug.js 的 Chrome 扩展。

我的偏好是使用 Chrome 开发者工具或 Fiddler。

页面上的分析代码可能有一个`_trackPageview`，因此当页面加载时，您会看到一个初始的 __utm.gif。

当 _trackEvent 触发时，您应该会看到一个新的 __utm.gif 请求正在发出。在 __utm.gif URL 中检查的内容包括：

*   utme=5(Outbound Link*host*URL) -- _trackEvent 参数
*   utmac=UA-1234567-8 -- 分析 UID

更正——小错误：`target=="_blank"`应该`this.target=="_blank"`在新窗口中打开的检查中。

# iphone - 应用程序流在 SKPaymentTransactionStatePurchasing 处停止

> ID：12413364
> 
> 赞同：2
> 
> 时间：2012-09-13T19:24:26.577
> 
> 标签：iphone, ios

我在应用购买中实施。一切都很好，但我的流程总是停在 SKPaymentTransactionStatePurchasing: 有人知道原因吗？请帮忙。

```
 - (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
  {
NSLog(@"transactions........%@",transactions);
NSLog(@"transactions count........%d",[transactions count]);
NSLog(@"transactions description ........%@",transactions.description);

  [[SKPaymentQueue defaultQueue] removeTransactionObserver:self];

for (SKPaymentTransaction *transaction in transactions)
{
    switch (transaction.transactionState)

    {
        case SKPaymentTransactionStatePurchased:
            [self completeTransaction:transaction];
            [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
             break;
        case SKPaymentTransactionStateFailed:
            [self failedTransaction:transaction];
            [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
            break;
        case SKPaymentTransactionStateRestored:
            [self restoreTransaction:transaction];
            [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
            break;
        case SKPaymentTransactionStatePurchasing:
            NSLog(@"purchasing");
         //   [self completeTransaction:transaction];
            break;
        default:
            NSLog(@"default case");
            break;
    }
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T05:19:06.317

这可能是因为您正在调用：

```
[[SKPaymentQueue defaultQueue] removeTransactionObserver:self]; 
```

通过调用它，您的应用将不再收到有关事务的其他更新的通知。尝试删除此行。

# php - PHP 包括 HTML 文件

> ID：12413368
> 
> 赞同：0
> 
> 时间：2012-09-13T19:24:32.680
> 
> 标签：php, wordpress, include, slideshow

我需要在 PHP 文件中包含一个 HTML 文件。HTML 文件包含以下内容：

```
 <div id="slideshow">
    <ul>
      <li>
        <img src="http://farm6.static.flickr.com/5270/5627221570_afdd85f16a_z.jpg" alt="" title="Light Trails" />
      </li>

      <li>
        <img src="http://farm6.static.flickr.com/5146/5627204218_b83b2d25d6_z.jpg" alt="" title="Bokeh" />
      </li>

      <li>           
        <img src="http://farm6.static.flickr.com/5181/5626622843_783739c864_z.jpg" alt="" title="Blossoms" />
      </li>

      <li>           
        <img src="http://farm6.static.flickr.com/5183/5627213996_915aa49939_z.jpg" alt="" title="Funky Painting" />
      </li>

      <li>           
        <img src="http://farm6.static.flickr.com/5182/5626649425_fde8610329_z.jpg" alt="" title="Vintage Chandelier" />
      </li>                          
    </ul>
  </div>   

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script src="/slideshow/js/craftyslide.min.js"></script>

  <script>
    $("#slideshow").craftyslide();
  </script> 
```

要包含我正在使用此 PHP 语句的 HTML 文件：

```
<?php include ('http://nicksgroent.dk/slideshow/demo.html' ); ?> 
```

但是，这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:26:55.460

```
<?php echo file_get_contents('http://nicksgroent.dk/slideshow/demo.html'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:27:23.410

您可能已关闭远程包含。( `allow_url_include`) 但是，根据链接，这不是包含远程文件的理想方式。你最好使用`file_get_contents`或 CURL。

请参阅[https://stackoverflow.com/a/1158392/1324019](https://stackoverflow.com/a/1158392/1324019)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:26:56.127

如果启用了 allow_fopen_url

```
$content = file_get_contents('http://nicksgroent.dk/slideshow/demo.html');
echo $content; 
```

或卷曲

```
$ch = curl_init('http://nicksgroent.dk/slideshow/demo.html');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$content = curl_exec($ch);
curl_close($ch);
echo $content; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T19:28:33.910

include 期望 php 文件和解析，请尝试以下操作；

```
$page = file_get_contents('http://nicksgroent.dk/slideshow/demo.html');
echo $page; 
```

# sql - 通过xml插入到sql server中的多个表中

> ID：12413372
> 
> 赞同：0
> 
> 时间：2012-09-13T19:24:40.127
> 
> 标签：sql, xml, sql-server-2008, xpath, xquery

我想插入多个表，即`Customer, Account, AccountTransactions`

**编辑**

*   `Entity - Customer`一对一
*   `Customer - Account`被映射为一对一
*   `Account - AccountTransactions`映射为一对多

`Entity(EntityId, EntityType)`EntityId 主键自动递增

`Customer(CustomerId, FName, LName)` CustomerId = EntityId 主键

`Account(AccountId, AccountNo, CustomerId)` AccountId PK，CustomerId FK

`AccountTransactions(TransactionId, PaymentDate, CurrentBalance, AccountId)`TransactionId PK，AccountId FK

我的 XML 是：

```
<CustomerList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" >
       <Customer>
              <CustomerId/>
              <CustomerName>Abhishek</CustomerName>
              <AccountId/>
              <AccountNumber>eba5d378-b</AccountNumber>
              <Transactions>
                     <Transaction>
                <TransactionId/>
                            <PaymentDate>2/2/2012</PaymentDate>
                            <Amount>500</Amount>
                     </Transaction>
                     <Transaction>
                <TransactionId/>
                            <PaymentDate>2/2/2012</PaymentDate>
                            <Amount>500</Amount>
                     </Transaction>
              </Transactions>
          </Customer>
       <Customer>
              <CustomerId/>
              <CustomerName>Yash</CustomerName>
              <AccountId/>
              <AccountNumber>A101202</AccountNumber>
              <Transactions>
                     <Transaction>
                <TransactionId/>
                            <PaymentDate>2/2/2012</PaymentDate>
                            <Amount>500</Amount>
                     </Transaction>
                     <Transaction>
                <TransactionId/>
                            <PaymentDate>2/2/2012</PaymentDate>
                            <Amount>500</Amount>
                     </Transaction>
              </Transactions>
       </Customer>
</CustomerList> 
```

我想在 xml 中为每个客户插入`Customer, Account, Transaction`表中，并在插入客户时将其 id 保存回 xml 并在`Account`表中用作外键

我可以看到唯一的方法是使用嵌套游标或嵌套 while 循环。有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:13:56.700

假设您有适当的表格 - 您绝对可以执行迭代方法，而不会出现任何凌乱的 kludgy 光标！

尝试这样的事情 - 现在这将处理客户和帐户，但您也绝对可以将其扩展到交易。

```
declare @input XML = '... your XML here .....';

CREATE TABLE #CustAcct (CustomerName VARCHAR(50), CustomerID INT, AcctNumber VARCHAR(50), AcctID INT);

-- first extract customer and account into from the XML, using a common table expression    
WITH CustomersAndAccounts AS
(
   SELECT
       CustomerName = CL.Cust.value('(CustomerName)[1]', 'varchar(50)'),
       AcctNumber = CL.Cust.value('(AccountNumber)[1]', 'varchar(50)')
   FROM 
       @input.nodes('/CustomerList/Customer') CL(Cust)
)
INSERT INTO #CustAcct(CustomerName, AcctNumber)
    SELECT CustomerName, AcctNUmber
    FROM CustomersAndAccounts

-- insert customers into 'Customer' table    
INSERT INTO Customer(CustomerName)
    SELECT CustomerName
    FROM #CustAcct

-- update the temporary working table with the appropriate ID's from the 'Customer' table    
UPDATE #CustAcct
SET CustomerID = c.CustomerID
FROM Customer c
WHERE #CustAcct.CustomerName = c.CustomerName

-- insert values into 'Account' table from the working table   
INSERT INTO Account(CustomerID, AccountNumber)
    SELECT CustomerID, AcctNumber
    FROM #CustAcct

-- update the working table from the values inserted
UPDATE #CustAcct
SET AcctID = a.AccountID
FROM Account a
WHERE #CustAcct.CustomerID = a.CustomerID AND #CustAcct.AcctNumber = a.AccountNumber

SELECT * FROM #CustAcct 
```

现在在下一步中，您可以解析每个客户/账户对的交易并将其插入到适当的表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:12:17.157

您还可以使用 SQLXML Bulkload 组件执行此操作：

如何使用 XML 批量加载组件将 XML 导入 SQL Server
[http://support.microsoft.com/kb/316005](http://support.microsoft.com/kb/316005)

# microsoft-metro - 有没有办法让 Visual Studio 在完成调试时不保留应用程序徽标？

> ID：12413375
> 
> 赞同：0
> 
> 时间：2012-09-13T19:24:50.603
> 
> 标签：microsoft-metro, windows-runtime, visual-studio-2012, windows-store

我对 Visual Studio 2012 有一个小问题。

基本上，我不断迭代调试已安装的 Windows 应用商店应用程序。我的问题是，每次我停止调试并需要更新和重新安装包时，尝试重新安装包时都会出错。

它遵循`fails to write to file ....Assets/logo.png`. 当我关闭正在调试它的 Visual Studio 实例时，文件被解锁并且包将正常安装。

除了重新启动 Visual Studio 之外，还有其他人遇到过这个问题并且知道任何解决方法吗？

# mongodb - 我可以强制副本集 PRIMARY 识别 mongodb 中新重新同步的 SECONDARY 成员的 optime 吗？

> ID：12413377
> 
> 赞同：0
> 
> 时间：2012-09-13T19:24:59.797
> 
> 标签：mongodb, replication

我最近有一个副本集成员几天不同步。使用[“重新同步一个非常陈旧的副本集成员”指令，](http://www.mongodb.org/display/DOCS/Resyncing+a+Very+Stale+Replica+Set+Member)我`mongod`在辅助机器上停止，清除数据目录，重新启动进程，让机器重新同步到主机器。

一切都很完美，至少看起来是这样。记录表明同步进行得很好。`rs.status()`最终，它显示为完成，在辅助机器上产生以下输出：

```
# The secondary machine's status for itself and its primary:
{
    "_id" : 0,
    "name" : "myprimary:myport",
    "health" : 1,
    "state" : 1,
    "stateStr" : "PRIMARY",
    "uptime" : 497,
    "optime" : {
        "t" : 1347562257000,
        "i" : 1
    },
    "optimeDate" : ISODate("2012-09-13T18:50:57Z"),
    "lastHeartbeat" : ISODate("2012-09-13T19:00:34Z"),
    "pingMs" : 3
    },
{
    "_id" : 2,
    "name" : "mysecondary:myport",
    "health" : 1,
    "state" : 2,
    "stateStr" : "SECONDARY",
    "optime" : {
        "t" : 1347562257000,
        "i" : 1
    },
    "optimeDate" : ISODate("2012-09-13T18:50:57Z"),
    "self" : true
} 
```

正如预期的那样，机器是同步的，并且共享一个 optime 值。但主机是另一回事。它仍然显示不同步的辅助节点，即使主节点的优化时间自重新同步完成后提前。

```
# The primary machine's status for itself and its secondary:
{
    "_id" : 0,
    "name" : "myprimary:myport",
    "health" : 1,
    "state" : 1,
    "stateStr" : "PRIMARY",
    "uptime" : 497,
    "optime" : {
        "t" : 1347562257000,
        "i" : 1
    },
    "optimeDate" : ISODate("2012-09-13T18:50:57Z"),
    "self" : true
    },
{
    "_id" : 2,
    "name" : "mysecondary:myport",
    "health" : 1,
    "state" : 2,
    "stateStr" : "SECONDARY",
    "optime" : {
        "t" : 1347103757000,
        "i" : 1
    },
    "optimeDate" : ISODate("2012-09-08T11:29:17Z"),
    "lastHeartbeat" : ISODate("2012-09-11T17:27:06Z"),
    "pingMs" : 3
} 
```

我错过了什么？起初我以为“等一下”，但已经快一个小时了，数据库在那段时间有插入。我可以强制主节点对次节点进行心跳检查，还是需要再次重新同步它们？

我能在初选上找到的唯一真正奇怪的是：

```
PRIMARY> use local;
PRIMARY> db.slaves.find()
{ "_id" : ObjectId("4f675b909d8e143a90055864"), "host" : "<hostIP>", "ns" : "local.oplog.rs", "syncedTo" : { "t" : 1347395837000, "i" : 1 } }
{ "_id" : ObjectId("50522761212b77e9637ad541"), "host" : "<hostIP>", "ns" : "local.oplog.rs", "syncedTo" : { "t" : 1347562257000, "i" : 1 } } 
```

这些是相同的主机（有问题的辅助机器）。我的理解是这应该显示一个条目，但如果没有更好地了解它跟踪的内容和更新方式，我会犹豫要不要触摸它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:43:50.490

尝试关闭辅助节点，删除主节点的 db.slaves 集合中的两个条目，然后重新启动辅助节点可能是个好主意。

数据文件是否证实机器同步？

# .net - Microsoft 是否允许访问内置方法定义？

> ID：12413379
> 
> 赞同：0
> 
> 时间：2012-09-13T19:25:12.713
> 
> 标签：.net, methods

作为程序员，我们大多使用 .NET 框架作为工具，它为我们提供了许多使用完整的功能。“.NET”本身包含类，类包含方法（我们使用）。
但我的问题是我们可以查看方法定义吗？微软允许我们吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:27:23.477

公共成员定义在 VS 中都很容易看到，无论是使用对象资源管理器还是框架成员上的 F12。默认情况下，非公共成员不可见。但是，这只是成员签名，而不是实现。

您可以反汇编 Microsoft DLL 以供阅读，它们还使框架源可用于调试/阅读。

请参阅：

*   [如何：调试 .NET Framework 源代码](http://msdn.microsoft.com/en-us/library/cc667410.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:27:30.340

对于大部分内容，是的，您可以下载参考源：[http](http://referencesource.microsoft.com/netframework.aspx) ://referencesource.microsoft.com/netframework.aspx 。它对于调试目的特别有用。

显然有些部分不包括在内（可能是与安全有关的敏感内容），最后我听到了。

# data-structures - 2d 瓦片地图 - 如何知道给定瓦片上有哪些单位？

> ID：12413382
> 
> 赞同：0
> 
> 时间：2012-09-13T19:25:33.043
> 
> 标签：data-structures

我有一个游戏，它是一个基于 2d 瓦片的地图。看起来像一个巨大的棋盘。玩家可以在瓷砖上拥有单位。我需要一种有效的方法来确定哪些单元位于给定的图块上。原因是我不想在将地图的一部分渲染到屏幕时减慢渲染循环。我不想花太多时间来查找哪些单位在哪个图块上。

现在我正在考虑这样的哈希映射：

```
// Java pseudo-code:
Map<Integer, List<Unit>> units = new HashMap<Integer, List<Unit>>();

// place a unit at tile x,y:
int xy = y * mapWidth + x;
List<Unit> matched = units.get(xy);
if (matched == null) {
    matched = new ArrayList<Unit>();
    units.put(xy, matched);
}
matched.add(new Airplane());

// render a portion of the map to screen, say tiles 20,5 to 50,17
for (int y = 5; y < 17 y++) {
    for (int x = 20; x < 50; x++) {
        List<Unit> matched = units.get(y * mapWidth + x);
        if (matched != null && matched.size() > 0) {
            draw(matched.get(0));
        }
    }
 } 
```

如果我有巨大的地图，我可以看到这会成为一个问题，并且玩家在地图的每个图块上都放置了一个单位（不太可能发生）。在这种情况下，我的哈希图中会有 mapWith*mapHeight 条目，每个值本身就是一个数组。

这是我对这个问题的天真看法，希望有任何提高查找速度的替代方案或上述单位占据地图每个图块的情况，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:23:03.530

我认为这种方法在更新场景时会受到影响。如果您的大多数单元要更改其位置，则会导致在查找中更新基础列表对象。因此，您需要首先查找旧位置的查找列表进行修改，然后查找新位置并执行相同操作。这消除了 hashmap 的好处。

我有一种感觉，更好的主意是从一个单元向上查找到一个瓦片。如果大部分时间单位数量少于瓷砖（一般情况，直到你没有开发 hurly-burly 屠杀游戏），那么从单位查找到当前瓷砖窗口会更好。

# php - 带有错误处理的 Wordpress 自定义登录

> ID：12413389
> 
> 赞同：2
> 
> 时间：2012-09-13T19:25:50.343
> 
> 标签：php, wordpress, login

嗨，我正在尝试获取我的 Wordpress 自定义登录名，该登录名位于 header.php 的下拉列表中，以在输入不正确的电子邮件或密码时显示错误，或者即使两者或 1 都留空。

这是我正在使用的登录表单

```
<?php
if ( ! is_user_logged_in() ) { // Display WordPress login form:
    $args = array(
      'redirect' => admin_url(), 
      'form_id' => 'loginform-custom',
      'label_username' => __( 'Username custom text' ),
      'label_password' => __( 'Password custom text' ),
      'label_remember' => __( 'Remember Me custom text' ),
      'label_log_in' => __( 'Log In custom text' ),
      'remember' => true
    );
    wp_login_form( $args );
} else { // If logged in:
    wp_loginout( home_url() ); // Display "Log Out" link.
    echo " | ";
    wp_register('', ''); // Display "Site Admin" link.
}
?> 
```

我从这里找到了这段代码： [https ://wordpress.stackexchange.com/questions/61267/prevent-wp-login-form-from-redirecting-to-wp-admin-when-there-are-errors](https://wordpress.stackexchange.com/questions/61267/prevent-wp-login-form-from-redirecting-to-wp-admin-when-there-are-errors)

```
function wp_authenticate($username, $password) {
    $username = sanitize_user($username);
    $password = trim($password);

    $user = apply_filters('authenticate', null, $username, $password);

    if ( $user == null ) {
        $user = new WP_Error('authentication_failed', __('<strong>ERROR</strong>: Invalid username or incorrect password.'));
    }

    $ignore_codes = array('empty_username', 'empty_password');

    if (is_wp_error($user) && !in_array($user->get_error_code(), $ignore_codes) ) {

        // Put your code here

    }

    return $user;
} 
```

我已将上述内容复制到我的主题文件夹中的 functions.php 中，但它不起作用 - 我是否必须在我的表单中调用它，如果是这样，如何？我应该在上面写什么代码：

// 把你的代码放在这里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:48:21.767

函数**wp_authenticate($username, $password)**是一个 WP 函数，所以不需要在 functions.php 中添加它。它可以在 wp-includes 目录中的**pluggable.php中找到。**

是的，您必须在表单或验证脚本中调用它，就像调用任何其他函数一样。例如：

```
$CheckValidUser = wp_authenticate($username, $password); 
```

我猜你应该在调用**is_user_logged_in()**之前调用它，否则不会有任何 $username 或 $password 因为 WP 已经拒绝了用户。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T05:49:13.553

如果用户单击登录按钮而不填写用户名和密码，则输入以下代码，`functions.php`它将移动到`wp-login.php`页面。

`functions.php`我们可以在文件中编写以下代码来解决这个问题。

```
add_action('init', 'prevent_wp_login');

function prevent_wp_login() {
        if(isset($_POST['log']) && isset($_POST['pwd']))
        if($_POST['log']=='' && $_POST['pwd']=='')
        {
                $page = write your redirect url;
                // Redirect to the your url
                wp_redirect($page);

        exit();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T06:39:18.323

wp_signon() 函数使用自定义登录，它对我来说工作正常：

```
require('wp-load.php'); 
$err = '';
$success = '';
global $wpdb,$current_user;
    $response = array();
    $data = json_decode(file_get_contents("php://input"));

    $email    = $data->email_id;
    $password = $data->password;
    $username = $wpdb->escape($email);
    $password = $wpdb->escape($password);
    $remember = true;
    if($remember) $remember = "true";
    else $remember = "false";
    $login_data = array();
    $login_data['user_login'] = $username;
    $login_data['user_password'] = $password;
    $login_data['remember'] = $remember;

    $user_verify = wp_signon( $login_data, false ); 
    set_current_user($user_verify->ID);
    if (is_user_logged_in()) 
    {
        get_currentuserinfo();

            $response['user_id']=$user_verify->ID;
            $response['first_name']=$current_user->user_firstname ;
            $response['last_name']=$current_user->user_lastname;
            $response['email']=$current_user->user_email;
      $status="success";
      $msg="";
    } else {    
      $status="failed";
      $msg="Invalid Credential.";
     } 
```

# html - 文件上传器未在表单提交时开始上传

> ID：12413391
> 
> 赞同：0
> 
> 时间：2012-09-13T19:25:54.040
> 
> 标签：html, forms, file-upload

我有一个简单的 HTML 表单设置，就像我通常设置的那样，但是表单的文件输入没有上传任何内容。当我提交表单时它不会在角落显示小消息`Uploading...(0%)`，并且无论我放入什么大小的文件，表单都会立即提交而不会开始文件传输。

有任何想法吗？

```
<form id="sform" name="sform" action="save.php?id=1" method="post">
<label>Company Name</label>
<br>
<input type="text" name="company" value="">
<p></p>
<label>Change Company Logo <span style="font-size:10px">(up to 1 MB) &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#CC0000">*Leave blank if no change wanted</span></span></label>
<br>
<input type="file" name="logo" style="vertical-align:middle">
<p></p>
<label>Company Trademark</label>
<br>
<input type="text" name="trademark" value="">
<p></p>
<label>Project Title</label>
<br>
<input type="text" name="prt" value="">
<p></p>
<label>Project Completion Percentage:</label>
<br>
<input id="per" type="number" min="0" max="100" name="per" onkeyup="checknum('per')" value="10">
<br>
<button>Submit</button>
</form> 
```

谢谢，

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:27:49.607

`enctype="multipart/form-data"`

将此属性添加到您的表单

# php - 使用 php 的 Ajax facebook 帖子

> ID：12413392
> 
> 赞同：0
> 
> 时间：2012-09-13T19:26:00.780
> 
> 标签：php, ajax, facebook, api

好的，所以我正在尝试使用 ajax 发布到 facebook。问题是我没有登录。这是正在请求的页面。config 仅包含我的 facebook 应用程序身份验证详细信息。我想我只是不明白在尝试使用 ajax 执行此请求时，我尝试过的所有操作都返回 0（无用户）。

```
<?php
require_once 'includes/config.php';

//Including facebook php sdk file
require_once 'includes/php-sdk/facebook.php';

//Creating our application instance
$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            'cookie' => true
        ));

//Get User ID
$user = $facebook->getUser();

if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
        $access_token = $facebook->getAccessToken(); 
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
    //In order to post to the page later on we need to generate an Access Token for that page, to do this we get me-accounts in the following api call
    $accounts = $facebook->api('/me/accounts');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:05:31.560

看看[https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)

它说的地方

```
$facebook = new Facebook(array(
  'appId'  => '344617158898614',
  'secret' => '6dc8ac871858b34798bc2488200e503d',
));

// Get User ID
$user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
//
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

试试这个代码，你可能从来没有使用 facebook 帐户登录过 API 使用（在这种情况下我指的是 getLogoutUrl() 和 getLoginUrl() 代码）在这种情况下你需要参考用户到 $loginUrl 使用例如：

```
header("location: $loginUrl"); 
```

# php - PDO：我尝试使用 json_encode 从 while 循环中显示多行

> ID：12413393
> 
> 赞同：0
> 
> 时间：2012-09-13T19:26:04.320
> 
> 标签：php, pdo, while-loop, json

这是我的问题...我正在尝试返回多行而不使用“喜欢”子句从我的 PDO 语句中刷新页面，问题是它只返回一行而不是其余的...有人可以帮我吗? 提前致谢

这是我的html表单：

```
<h2>Please insert the username you would like to search for</h2>

<div align="center" id="loader_div"><span id="search_result"></span></div>

<form action="send/search.php" method="post" id="search_form">
<input type="text" id="search_username" name="get_name" />
<input type="submit" name="submitsearch" />
</form>    
<div id="get_users">

</div> 
```

我的PHP如下：

```
$search = $_POST['get_name'];

$query = $db->prepare("SELECT *
                         FROM `users`
                         WHERE `users`.`username` LIKE ? LIMIT 10");

$query->bindValue(1, "%".$search."%", PDO::PARAM_STR);

try {
     $query->execute();

     $data['success'] = true;

     while($row = $query->fetch(PDO::FETCH_OBJ)) {

     $data['users'] = " ".$row->username." ";

     echo json_encode($data);   
     exit(); 
     }

} catch (PDOException $e) {
  die($e->getMessage());     
  exit();
} 
```

这是我的 jQuery 返回 PHP 结果：

```
$.ajax ({
type: "POST",
url: "send/search.php",
data: $('#search_form').serialize(),
dataType: "json",
success: function(data){
        if(data.success === true)
        {
          $("#display_users").html(data.users);
        },
error: function(xhr, status, et) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:28:36.423

`json_encode`and`exit`应该在 while 循环之外：

```
while($row = $query->fetch(PDO::FETCH_OBJ)) {

     $data['users'] .= " ".$row->username." ";    
}

echo json_encode($data);   
exit(); 
```

取决于您在客户端需要什么格式，您决定如何处理`$data['users']`，这也是一个选项：

```
$data['users'][] = " ".$row->username." "; 
```

# vim - Linux 和 Windows 配置文件路径冲突

> ID：12413394
> 
> 赞同：3
> 
> 时间：2012-09-13T19:26:06.160
> 
> 标签：vim

我的 .vimrc 文件中有这一行：

```
set directory=~/.vim/swapfiles// 
```

*（请注意，一个额外的斜杠会包含目录名而不仅仅是文件名，以减少冲突）*

上面的配置在我的 Linux 机器上运行良好，但问题是当我在 Windows 上使用相同的文件时，我收到一些关于文件无法读取的警告。这可能是因为 vim 正在寻找`~/.vim/swapfiles/`目录，不幸的是 Windows 没有。

有什么方法可以将我的交换文件存储在 Windows 上的某个地方*（如果可以的话更好`C:\Program Files\Vim\vimfiles\`）*？

* * *

## 案例#2

如果你得到了我上述问题的答案，这里是另一个。我也有一些类似的行：

```
autocmd filetype python source ~/path/to/file/python.vim 
```

Windows 在这一点上也很困惑。我该如何修补？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T20:17:05.630

如果您不`$MYVIM`想像 ZyX 建议的那样引入变量，也许另一种方法是将运行时文件放入而不是Windows`$HOME/.vim`上的默认值。`$HOME/vimfiles`然后，您可以`~/.vim/...`在任何地方使用。这也有助于跨多台混合平台机器同步文件。

```
" On Windows, also use '.vim' instead of 'vimfiles'; this makes synchronization
" across (heterogeneous) systems easier.
if has('win32') || has('win64')
    set runtimepath=$HOME/.vim,$VIM/vimfiles,$VIMRUNTIME,$VIM/vimfiles/after,$HOME/.vim/after
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:51:24.007

也许您想要的是`directory`根据中的条目进行设置`runtimepath`？尝试这个：

```
let &directory = substitute(&rtp, ",", "/swapfiles//,", "g") 
```

`runtimepath`使用Unix-y 系统上的默认设置，您将获得

```
$HOME/.vim/swapfiles//,
$VIM/vimfiles/swapfiles//,
$VIMRUNTIME/swapfiles//,
$VIM/vimruntime/after/swapfiles//,
$HOME/.vim/after// 
```

在 Windows 上

```
$HOME/vimfiles/swapfiles//,
$VIM/vimfiles/swapfiles//,
$VIMRUNTIME/swapfiles//,
$VIM/vimfiles/after/swapfiles//,
$HOME/vimfiles/after/swapfiles// 
```

我同意，后面的目录是不需要的，但是 vim 会选择存在的第一个目录并允许创建文件，所以如果你不创建 swapfiles 子目录，它们就不会被触及。

您可能需要考虑将这些添加到默认值而不是替换它，以便在不存在任何目录时可以使用默认值作为后备。

我不明白你为什么有你提到的自动命令。`runtimepath`with的默认设置`filetype plugin on`应该会为您解决这个问题。

当然，您始终可以选择明确检查平台并使用不同的设置，如

```
if has("win32")
  " settings for windows
elif has("win32unix")
  " settings for cygwin
elif has("unix")
  " settings for unix
elif has("macunix")
  " settings for macosx
endif 
```

如果你想在文件不存在的情况下避免错误，那么你可以在你的 vimrc 中使用以下定义

```
func! Source(file)
  if filereadable(a:file)
    exec "source " . fnameescape(a:file)
  endif
endfunction

com! -nargs=1 -complete=file Source call Source(<f-args>) 
```

并更改`source`为`Source`文件可能不存在的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T20:13:14.083

我完全同意 Geoff Reedy 的观点，认为 autocmd 是不必要的。在其他情况下，您可以使用`:runtime`代替`:source`. 它将自动搜索所有（用户和系统目录在`'runtimepath'`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T20:00:36.777

首先，vim 在 windows 上将所有正斜杠转换为反斜杠，因此使用斜杠不会造成伤害。以防万一您认为这可能是麻烦的根源。

其次，在 Windows 上拥有和所有其他目录并非不可能`~/.vim`，只是某些程序不想使用以点开头的名称。您可以将其添加到 runtimepath，因为它在 Windows 上默认不存在，并将所有用户配置移到那里。

第三，在大多数地方，您都有一个可以使用的文件名`$ENV_VAR`。它包括设置 &rtp、&directory 和使用`:source`. 所以解决方案可能如下：

```
if has('win16') || has('win95') || has('win32') || has('win64')
    let $MYVIM=$HOME.'/vimfiles'
else
    let $MYVIM=$HOME.'/.vim'
endif
set directory=$MYVIM/swapfiles
autocmd FileType python :source $MYVIM/after/ftplugin/python.vim 
```

（尽管我同意@Geoff Reedy 的观点，即不需要使用最后一行）。

最后，修改和存储东西`C:\Program Files`不是最好的主意，对你和程序本身都不是（顺便说一句，除非你告诉它，否则 vim 不会修改或存储东西）。它将通过安装、更新和卸载过程进行修改，而不是其他任何内容。

# extjs - 为生产构建应用程序

> ID：12413398
> 
> 赞同：1
> 
> 时间：2012-09-13T19:26:17.690
> 
> 标签：extjs, extjs4, extjs4.1

我发现本教程解释了如何构建您的生产应用程序。

我的项目结构如下；

```
ProjRoot
 --> app 
     *--> ext (this is the extjs folder)
     *--> model (model folder it contain the model files of the projec)
     *--> view
     *--> controller
     *--> store
     *--> resources
     *--> servercode
 --> app.html
 --> app.js 
```

正如教程所解释的，我从命令提示符导航到 ProjRoot 并输入以下代码；

```
sencha create jsb -a http://localhost/ProjRoot/app.html -p app.jsb3 
```

这创建了一个文件，它是 1kb app.jsb3

然后我执行了以下代码

```
sencha build -p app.jsb3 -d . 
```

这产生了2个文件。

1.) app-all.js 3KB

2.) all-classes.js 1KB

`app-all.js`包含连接在一起的 app.js 文件的代码，而其中`all-classes.js`没有任何代码；我在其中找到了以下代码。

```
/*
Copyright(c) 2012 Company Name
*/ 
```

根据教程，我应该能够在服务器中添加这两个文件并制作应用程序。但不幸的是，它对我不起作用。帮助 ？

而且，我添加了启动 html 文件，我在其中引用了上述 2 个文件。

有人可以给我一步一步的指示或告诉我我错过了什么吗？

**更新**

当我按照您的帖子中所述键入命令时，出现以下错误。我该如何解决？

```
C:\xampp\htdocs\ProjRoot>sencha create jsb -a a
pp.html -p proj.jsb3 -v
Error thown from your application with message: TypeError: 'null' is not a const
ructor 
```

# ios - 苹果如何看待新的 iOS6 应用商店详情？

> ID：12413408
> 
> 赞同：0
> 
> 时间：2012-09-13T19:26:45.813
> 
> 标签：ios, user-interface

如果您打开新的 iOS 应用商店，并使用任何应用，Apple 是如何实现整个视图的？

我的猜测是它是一个表格视图，但是他们是如何使屏幕截图能够像那样横向滚动的呢？

在没有性能问题的情况下，您将如何以最高效的图形方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:39:03.800

这看起来像 iOS 6 UICollectionView 控件。它是 iOS 6 的新功能。

iTunes 中有 WWDC 2012 视频，它们准确地展示了这种效果（以及许多其他效果）。还有代码示例。

# php - 根据 url 中的单词显示不同的文本

> ID：12413437
> 
> 赞同：0
> 
> 时间：2012-09-13T19:28:40.833
> 
> 标签：php, html, web

我有一个标题，基本上是这样说的：

" **论坛**

支持的好地方。"

我需要它显示在我网站的某些页面上，这些页面与论坛相关。

但是在其他页面上，我可能想要一个标题，例如：

" **捐赠**

帮助我们保持在线。"

网站论坛部分的地址与这些类似。

```
http://localhost/index.php?p=/discussions
http://localhost/index.php?p=/activity
http://localhost/index.php?p=/discussion/6/oh-dear#Item_1 
```

捐赠的可能是这样的：

```
http://localhost/index.php?p=/plugin/page/donate 
```

所以我需要一些方法来编写一个脚本

```
if url has (discussions, activity, discussion)
then use this header
"<b>Forum<b> <br> a great place for support

if else url has (donate)
then use this header
"<b>Donate<b> <br> help keep us online

else
use this header
"<b>Website<b> <br> this is our website 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:49:16.507

另一个（更优雅的）服务器端解决方案适合您...如果您的 URL 总是出现在`p`参数中的“路径”，您可以利用 PHP`explode()`和`in_array()`函数来使您的代码更易于处理。以这个网址为例 -

```
http://localhost/index.php?p=/plugin/page/donate 
```

如果我们`explode()`对变量执行一个函数`$_GET['p']`，我们会得到一个像这样的数组 -

```
Array(
  'plugin',
  'page',
  'donate'
) 
```

现在您可以执行一个`in_array()`函数来查看您要查找的字符串是否存在于该数组中 -

```
if (in_array('form',explode($_GET['p']){
  // we are in the forum!
} 
```

参考 -

*   [`in_array()`](http://php.net/manual/en/function.in-array.php)
*   [`explode()`](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:33:22.050

像这样的功能可能会有所帮助。如果您不知道如何从 url 获取变量，请使用 $_GET['p']

```
function contains($substring, $string) {
    $pos = strpos($string, $substring);

    if($pos === false) {
            // string needle NOT found in haystack
            return false;
    }
    else {
            // string needle found in haystack
            return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:34:17.617

如果你想在服务器端做这个，你总是可以使用 PHP 的[`strpos()`函数。](http://php.net/manual/en/function.strrpos.php)它将返回一个字符串在另一个字符串中的位置。因此，您所要做的就是检查[`$_SERVER['query_string']`](http://php.net/manual/en/reserved.variables.server.php)变量并执行`strpos()`搜索 -

```
if (strpos($_SERVER['QUERY_STRING'],'forum')) >= 0){
  // forum appears in the query string!
} 
```

该`strpos()`函数返回您正在搜索的字符串的索引，因此请记住这**`0`是一个有效的索引**。什么`strpos()`时候找不到匹配项。它会回来`false`的。

在这里，我正在检查[`$_SERVER`变量](http://php.net/manual/en/reserved.variables.server.php)之一，它们包含有关服务器的各种信息以及它的当前参数是什么。其中之一是查询字符串 - 这是`?`URL 中的所有文本。一旦我有了它，该`strpos()`函数将搜索该值中的某些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T19:31:28.767

使用 Javascript`location`对象：

```
url = location.href;
if (url.indexOf('discussions') && url.indexOf('activity') && url.indexOf('discussion')) {
  document.getElementById('parent').appendChild(child-element);
else if (url.indexOf('donate')) {
  document.getElementById('parent').appendChild(other-child-element);
}
else {
 document.getElementById('parent').appendChild(another-child-element);
} 
```

# vb.net - 防止 Visual Basic 将科学记数法常量转换为固定记数法

> ID：12413441
> 
> 赞同：1
> 
> 时间：2012-09-13T19:28:47.060
> 
> 标签：vb.net, visual-studio

> **可能重复：**
> [Visual Studio VB 漂亮的列表设置](https://stackoverflow.com/questions/2020615/visual-studio-vb-pretty-listing-settings)

每次我写：

`Dim foo As Double = 1E-9`

Visual Studio / Visual Basic 重写该行以读取

`Dim foo As Double = 0.000000001`

**如何阻止 Visual Studio / Visual Basics 的自动格式化，以便我可以以科学计数法存储这些数字？**

PS：当指数大于 14 或小于 -16 时，Visual Studio / Visual Basic 不会转换为固定表示法。

请注意，这个问题与如何向已编译应用程序的用户显示此数字无关，而是与源代码中的视觉表示有关。

# java - 如何读取特定元素的 XML 子节点值？

> ID：12413443
> 
> 赞同：0
> 
> 时间：2012-09-13T19:28:49.243
> 
> 标签：java, xml, dom, xml-parsing

我正在尝试使用 DOM 解析器读取具有特定元素属性值的子节点值。我的 xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<RootNode>
    <SubNode Sid="1">
        <title>some text</title>
        <data dId="1">some text</data>
        <data dId="2">some text</data>
        <ExData>1</ExData>
    </SubNode>
    <SubNode Sid="2">
        <title>some text</title>
        <data dId="1">some text</data>
        <data dId="2">some text</data>
        <data dId="3">some text</data>
        <data dId="4">some text</data>
        <data dId="5">some text</data>
        <ExData>1</ExData>
    </SubNode>
    <SubNode Sid="3">
        <title>some text</title>
        <data dId="1">some text</data>
        <data dId="2">some text</data>
        <data dId="3">some text</data>
        <ExData>1</ExData>
    </SubNode>
</RootNode> 
```

我正在尝试读取`data`one 的节点值`SubNode`。我已经检查了以下代码：

```
private void parseDocument()
{
    Element docEle = dom.getDocumentElement();
    NodeList nl = docEle.getElementsByTagName("SubNode");
    if(nl!= null && nl.getLength()>0)
    {
        for(int i=0; i<nl.getLength();i++)
        {
            Element el = (Element)nl.item(i);
            InfoBean que = getInfoBean(el);
            InfoBeanSet.add(que);
        }
    }
}
private InfoBean getInfoBean(Element el)
{
    int sId = Integer.parseInt(el.getAttribute("Sid"));
    String title = getTextValue(el,"title");    

    NodeList SingleOptionNode = el.getElementsByTagName("data");
    int nodeLen = SingleOptionNode.getLength();
    if(SingleOptionNode != null && nodeLen>0)
    {
        for(int i=0; i<nodeLen; i++)
        {
            Element el1 = (Element)SingleOptionNode.item(i);
            NodeList nextOption = el1.getChildNodes();
            Node currentNode = (Node) nextOption.item(0);
            int dId = Integer.parseInt(el1.getAttribute("dId"));
            String data = currentNode.getNodeValue();
            opt.add(new Option(data, dId));
        }
    }
    String ExData = getTextValue(el,"ExData");
    InfoBean ifb = new InfoBean(sId,title,opt,ExData);
    return ifb;
} 
```

它给出了所有 3 个子节点的数据节点值。如何读取具有属性值的一个 SubNode 元素子节点值。我能知道获取所有数据节点值的原因吗？我可以获得一些代码示例如何读取一个子节点元素的数据节点值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:36:07.883

此行在节点列表中的所有 SubNode 元素上引入了一个循环。

```
 for(int i=0; i<nl.getLength();i++) 
```

尽量不要那样做。

# java - 将参数从 JPanel 传递到 JFrame

> ID：12413447
> 
> 赞同：0
> 
> 时间：2012-09-13T19:29:01.840
> 
> 标签：java, swing, jpanel, paintcomponent

我有一个问题，我不知道如何解决它。我现在正在阅读（JAVA 如何编程第 9 版）。我的应用程序（第 9 章，第 390 页）需要创建随机数量的具有不同颜色的不同形状，然后布局（JFrame）包含一个 JPanel - 具有形状 - 和一个 JLabel - 具有这些不同形状的数量。我用随机颜色创建了随机形状，但形状的数量无法正确传递给 main 方法。它总是显示0。

> 随机形状.java

```
import java.awt.Color;
import java.awt.Graphics;
import java.util.Random;
import javax.swing.JPanel;

public class RandomShapes extends JPanel{

public int counter;
private Random random = new Random();

@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);

    drawLines(g);
}

public void drawLines(Graphics g){
    for(int i = 0 ; i < random.nextInt(20) ; i++){
        g.setColor(generateColor());
        g.drawLine(random.nextInt(getWidth()), random.nextInt(getHeight()), random.nextInt(getWidth()), random.nextInt(getHeight()));
        counter++;
    }

}

private Color generateColor(){
    Color color = new Color(random.nextInt(255), random.nextInt(255), random.nextInt(255));

    return color;
}

@Override
public String toString(){
    return String.format("%d",counter);
}
} 
```

> RandomShapesTest.java

```
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class RandomShapesTest{
public static void main(String[] args){
    RandomShapes shapes = new RandomShapes();
    JFrame application = new JFrame();

    JLabel status = new JLabel(shapes.toString());

    application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    application.add(shapes);
    application.setSize(600,600);
    application.add(status, BorderLayout.NORTH);
    application.setVisible(true);
}   
} 
```

顺便说一句，一个小技巧可能比完整答案更有帮助:)

问候，，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:47:12.557

该`counter`值在每次重绘时递增。这意味着每当您调整窗口大小或执行其他触发重绘的操作时，您的计数器都会增加并显示错误的值。

但是，`JLabel`当前显示 0，因为第一次重绘发生在您读取`toString()`方法中的计数值之后。

我建议您构建要在`RandomShapes`构造函数调用的方法中绘制的对象。您构建一个`Line2D.Float`对象列表，然后在您的绘画方法中绘制线条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:13:04.307

谢谢你们所有有用的答案，我解决了这个问题如下：

> CreateShapes.java

```
import java.awt.Color;
import java.awt.Graphics;

public class CreateShapes {

    private Graphics g;
    private Color myColor;
    private int x1, x2, x3, x4;

    public CreateShapes(int x1, int x2, int x3, int x4, Color myColor){
        this.x1 = x1;
        this.x2 = x2;
        this.x3 = x3;
        this.x4 = x4;
        this.myColor = myColor;
    }

    public void draw(Graphics g){
        g.setColor(myColor);
        g.drawLine(x1, x2, x3, x4);
    }
} 
```

> DrawShapes.java

```
import java.awt.Color;
import java.awt.Graphics;
import java.util.Random;
import javax.swing.JPanel;

public class DrawShapes extends JPanel{

    private Random randomNumber = new Random();
    private CreateShapes[] shapes;
    private int shapeCounter;

    public DrawShapes(){

        setBackground(Color.WHITE);

        shapes = new CreateShapes[1+randomNumber.nextInt(15)];

        for(int i = 0 ; i < shapes.length ; i++){
            int x1 = randomNumber.nextInt(600);
            int x2 = randomNumber.nextInt(600);
            int x3 = randomNumber.nextInt(600);
            int x4 = randomNumber.nextInt(600);

            Color color = new Color(randomNumber.nextInt(255), randomNumber.nextInt(255), randomNumber.nextInt(255), randomNumber.nextInt(255));

            shapes[i] = new CreateShapes(x1, x2, x3, x4, color);
        }

        shapeCounter = shapes.length;
    }

    public int getShapesNumber(){
        return shapeCounter;
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        for(CreateShapes shape : shapes){
            shape.draw(g);
        }
    }
} 
```

> RandomShapesTest.java

```
import java.awt.BorderLayout;
import javax.swing.JLabel;
import javax.swing.JFrame;

public class RandomShapesTest {
    public static void main(String[] args){

        DrawShapes drawShapes = new DrawShapes();
        JFrame application = new JFrame();

        String status = String.format("Lines : %d", drawShapes.getShapesNumber());

        JLabel statusBar = new JLabel(status);

        application.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        application.add(drawShapes);
        application.add(statusBar,BorderLayout.SOUTH);
        application.setSize(600,600);
        application.setVisible(true);
    }
} 
```

问候，，，

# sql - 做row_number时如何不计算0

> ID：12413448
> 
> 赞同：1
> 
> 时间：2012-09-13T19:29:01.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在做`row_number()`一些数据。

我的问题是我不想考虑`0`.

这是我的数据样本：

```
+-----------+-----+
| Alex      |   1 |
| Liza      |   2 |
| Harry     |   0 |
| Marge     |  24 |
| Bla       |   0 |
| Something | 234 |
+-----------+-----+ 
```

这就是我想要的：

```
+-----------+--------+------------+
|   name    | number | row_number |
+-----------+--------+------------+
| Harry     |      0 |          0 |
| Bla       |      0 |          0 |
| Something |    234 |          1 |
| Marge     |     24 |          2 |
| Liza      |      2 |          3 |
| Alex      |      1 |          4 |
+-----------+--------+------------+ 
```

如您所见，第三列是`the row_number()`

这就是我到目前为止所拥有的：

```
select name, number, row_number() over (partition by name order by name,number)
from myTable 
```

如何让上面的查询返回源数据中的`0`所有内容，并且**根本不将 0 计入 row_number 序列**？`0's`

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:32:40.853

试试这个[SQL 小提琴](http://sqlfiddle.com/#!6/e1b5b/5)：

```
SELECT name, number, 0 as [row_number]
FROM myTable
WHERE number = 0
UNION ALL
SELECT name, number, row_number() OVER (ORDER BY number DESC)
FROM myTable
WHERE number <> 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:35:35.887

试试这个：

```
select name, number,
       (case when number = 0 then 0
             else row_number() over (partition by iszero order by number desc)
        end) as row_number
from (select t.*, (case when number = 0 then 0 else 1 end) as iszero
      from myTable t
     ) t 
```

由于您按数字降序排序，因此如果没有数字为负数，则以下工作：

```
select name, number,
       (case when number = 0 then 0
             else row_number() over (order by number desc)
        end) as row_number
from myTable t 
```**

# java - DOMDocument getNodeValue() 返回 null（包含输出转义字符串）

> ID：12413450
> 
> 赞同：27
> 
> 时间：2012-09-13T19:29:09.480
> 
> 标签：java, xml, dom, escaping

我正在处理一个 DomDocument，它基本上是 SOAP Web 服务的 XML 结果。给你一个想法，这就是它的样子

```
...<ParentNode><ChildNode>&lt;output&gt;&lt;escaped&lt;string</ChildNode></ParentNode>... 
```

是的，ChildNode 的值是一个已转义输出的字符串，并且是封装在此 XML 中的 XML。我进行 DomDocument 处理的常规运行，例如

```
NodeList rows = dom.getElementsByTagName(ChildNode);
for(int i=0;i<rows.length;i++)
{
  System.out.println(rows[i].getParentNode()); // returns ParentNode
  System.out.println(rows[i].getNodeName()); // returns ChildNode
  System.out.println(rows[i].getNodeValue()); // returns null
} 
```

检查上面的代码后，您会意识到即使该节点为 ParentNode 和 NodeName 节点返回了正确的值，它在访问 getNodeValue() 时也会返回一个空值。这里有一个字符串，我可以在控制台输出中看到它。但是我不确定我在这里缺少什么技巧，输出转义是否以任何特定方式弄乱了它？

谢谢， 帕里加特

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-13T20:31:07.000

您想要`getTextContent()`而不是`getNodeValue()`- 后者总是为元素节点返回 null 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-03T10:07:33.780

代替

```
rows[i].getNodeValue() 
```

采用

```
rows[i].getNodeValue().getChildNodes().item(0).getNodeValue() 
```

# c# - 在网络上处理客户端和服务器端错误的正确方法是什么？

> ID：12413453
> 
> 赞同：0
> 
> 时间：2012-09-13T19:29:25.427
> 
> 标签：c#, asp.net

我是 Web 开发的新手（尽管对 WinForms developmentmet 并不陌生），我想知道在客户端和服务器端处理错误的正确和有效的方法。

例如，用户输入了错误的邮政编码（使用字母），我想通知用户输入了错误的邮政编码，我该如何处理？

我假设这将在客户端，但谁能给我看一个示例代码？您应该使用哪种脚本语言？你应该在屏幕上显示一条消息吗？你应该让错误信息可见吗？这样做的标准方法是什么？

示例二：用户单击在服务器数据库中运行查询的内容。发生错误。如何将错误通知用户？

通常在 Win Forms 中我可以这样做：

```
try
{
     CreateDirectoriesAndSystemFiles();
}
catch (Exception ex)
{
     ErrorLogger.LogError(ex.Source, ex.TargetSite.ToString(), "Error creating directories!; " + ex.Message);
     MessageBox.Show(ex.Message, "Error creating directories!", MessageBoxButtons.OK, MessageBoxIcon.Error);
     return;
} 
```

如何在 Web 环境中模仿上述内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:31:51.830

1 对于客户端通知，您可以使用验证器

链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)

这个链接是关于`RequiredFieldValidator`

你还有`CompareValidator, CustomValidator`等等……

链接：http: [//msdn.microsoft.com/en-us/library/ms972961.aspx](http://msdn.microsoft.com/en-us/library/ms972961.aspx)

这是很好的解决方案。

2 对于治疗异常，您可以使用`Global.asax`和`Applicatio_Error`

链接：http: [//msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:36:29.897

大多数人使用 jQuery validate 是因为它非常易于使用，同时非常强大和灵活。文档在这里[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)。Microsoft 默认将它们包含在 MVC 3 和 4 中，并将其用于模型验证客户端，因此如果您使用 MS 堆栈和 MVC，那是使用它的另一个好理由。Web 窗体中的情况有所不同，因为您倾向于使用内置的验证控件来处理客户端和服务器端的开箱即用参考[http://msdn.microsoft.com/en-us/library/a0z2h4sw(v =vs.100).aspx](http://msdn.microsoft.com/en-us/library/a0z2h4sw(v=vs.100).aspx) - 这些可以通过自定义验证器类型进行扩展，允许您指定您自己编写的用于处理定制功能的服务器和客户端方法。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:33:22.613

asp.net 可以对服务器端错误执行相同的 try/catch 处理。

就输入验证而言，您应该查看[Asp.net Input Validation Controls](http://msdn.microsoft.com/en-us/library/ms972961.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T19:33:46.950

例如 #2 你可以重定向到错误页面

```
try
{
     CreateDirectoriesAndSystemFiles();
}
catch (Exception ex)
{
     Response.Redirect("Error.aspx?err=" + ex.GetType());
} 
```

并在 Error.aspx 页面上解析 err 参数并将其显示给用户。

好主意是将其记录在数据库中（如果您使用它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T19:35:07.687

取决于您使用的是网络表单还是 MVC。

在 MVC 中，通常对于服务器端错误处理，我创建了一个 ApplicationController 类，该类继承并放置我的错误处理、日志记录和重定向逻辑，然后让我的控制器继承这个类。

对于网络表单，我将创建一个错误控件并将其包含在我的母版页中，并将服务器端错误反馈给它。

无论哪种情况，对于客户端，您都可以使用 jquery 和 javascript 进行字段验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T19:37:46.910

你问了很多问题，我试着回答几个：

1.  关于验证（邮政编码示例） - 首先，我不能强调这一点 -**始终验证服务器端**客户端代码（例如 javascript）上的内容可以轻松关闭/规避。即使您在客户端检查（并且您应该） - 也始终在服务器端检查它们。
    也就是说，使用什么验证框架取决于您使用的显示框架。我过去使用过[jquery 的验证](http://docs.jquery.com/Plugins/Validation)，对此我很满意。

2.  您应该使用哪种脚本语言？好吧，如果那个答案有一个正确的答案，那么有这么多就没有多大意义了，对吧:)
    无论如何，[jQuery](http://jquery.com/)非常流行，但[knockoutJS](http://knockoutjs.com/)也是如此，而且我听说[angular](http://angularjs.org/)越来越受欢迎。看看你喜欢哪一个

3.  对于服务器端的意外错误，有一些很好的建议。我喜欢阿吉拉斯·雅库布的。

祝你好运

# php - 在 PHP 的单行上显示来自不同表（由外键相关）的两个字段的数据

> ID：12413458
> 
> 赞同：0
> 
> 时间：2012-09-13T19:29:53.320
> 
> 标签：php, postgresql, row

我正在开发一个时间“打孔”系统，我正在尝试在 PHP 中构建一个表来水平显示 2 个表中的数据：

tb_users 作为你

tb_punch AS p

我希望数据显示如下：

```
 u.user   p.punch    p.punch    p.punch    p.punch
+-------+----------+----------+----------+----------+
|User 1 | 10:00:00 | 12:00:00 | 13:00:00 | 19:00:00 |
|User 2 | 08:00:00 | 12:00:00 |          |          |
|User 3 | 09:00:00 |          |          |          |
+-------+----------+----------+----------+----------+ 
```

等等...

但我得到了以下结果：

```
 u.user   p.punch    p.punch    p.punch    p.punch   p.punch    p.punch    p.punch
+-------+----------+----------+----------+----------+---------+----------+---------+
|User 1 | 10:00:00 |          |          |          |         |          |         |
|User 1 | 10:00:00 | 12:00:00 |          |          |         |          |         |
|User 1 | 10:00:00 | 12:00:00 | 13:00:00 |          |         |          |         |
|User 1 | 10:00:00 | 12:00:00 | 13:00:00 | 19:00:00 |         |          |         |
|User 2 | 10:00:00 | 12:00:00 | 13:00:00 | 19:00:00 |08:00:00 |          |         |
|User 2 | 10:00:00 | 12:00:00 | 13:00:00 | 19:00:00 |08:00:00 | 12:00:00 |         |
|User 3 | 10:00:00 | 12:00:00 | 13:00:00 | 19:00:00 |08:00:00 | 12:00:00 |09:00:00 |
+-------+----------+----------+----------+----------+---------+----------+---------+ 
```

我的意思是，当我想要按用户对打孔进行分组时，它每行重复每个 PUNCH。

这是我尝试执行此操作的方法：

```
$query = "SELECT u.user, p.punch FROM users u INNER JOIN punches p ON u.id = p.id_user"
$rt = pg_query($query) or die ("Error: [" . $query . "]");

$punches = array();
echo "<tbody>";
while($nt=pg_fetch_assoc($rt)){

    echo "<tr>";

    echo    "<td>" . $nt[user] . "</td>";

    $punches[] = $nt[punch]; 
    foreach ($punches as $punch){
        echo    "<td>" . date('H:i:s',strtotime($punch)) . "</td>";
    }
}
echo "</tr></tbody>";
?>
</table> 
```

关于可能出错的任何线索？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:57:29.763

我不建议您将 SQL 查询与表示层或工作流层混合使用。使用 Pomm 将允许您查询数据库，如下所示：

```
SELECT 
 u.user,
 ... -- other users fields
 array_agg(p.punch) AS punch_times 
FROM 
 users u 
   INNER JOIN punchs p ON u.id = p.id_user
GROUP BY
  u.user,
  ... -- other users fields 
```

并在名为`punch_times`. 所以你的模板会变成：

```
<tbody>
<?php foreach ($users as $user): ?>
  <tr>
    <td><?php echo $user['user'] ?></td>
    <td>
      <ul>
      <?php foreach ($user['punch-times'] as $punch_time): ?>
        <li><?php echo $punch_time->format('H:i:s') ?></li>
      <?php endforeach ?>
    </td>
  </tr>
<?php endforeach ?>
</tbody> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:34:37.227

尝试添加`GROUP BY u.id`到您的查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:34:40.537

试试`SELECT u.user, string_agg(p.punch,',') AS punches FROM users AS u JOIN punches AS p ON u.id=p.id_user GROUP BY u.user`。

然后像

```
while($nt = pg_fetch_assoc($rt)) {
    echo "<tr><td>{$nt['user']}</td>";
    echo "<td>",implode('</td><td>',explode(',',$nt['punches'])),"</td>";
    echo "</tr>";
} 
```

PS 另外，您的代码似乎产生了不平衡的`<tr>`/ `</tr>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:23:35.820

好吧，在我一个朋友的帮助下，我想通了。

我没有更改查询语句，只是标记了一些在特定条件下显示的 TR 和 TD。这是我所做的：

```
echo "<tbody>";
$prev_user = "";
$flag = true;

while($nt=pg_fetch_assoc($rt)){

    if ($flag) {
        echo "<tr>";
        echo "<td>" . $nt[user] . "</td>";
        $prev_user = $nt[user];
    }

    if ($prev_user != $nt[user]) {
        echo "</tr>";
        echo "<tr>";
        echo "<td>" . $nt[user] . "</td>";
    }

    echo "<td>" . date('H:i:s',strtotime($nt[punch])) . "</td>";

    $prev_user = $nt[user];

    $flag = false;

}

echo "</tbody>"; 
```

这解决了我的问题，现在我得到了这样的表格：

```
u.user   p.punch    p.punch    p.punch    p.punch
+-------+----------+----------+----------+----------+
|User 1 | 10:00:00 | 12:00:00 | 13:00:00 | 19:00:00 |
|User 2 | 08:00:00 | 12:00:00 |          |          |
|User 3 | 09:00:00 |          |          |          |
+-------+----------+----------+----------+----------+ 
```

# iphone - 为什么我不能在 CABasicAnimation 完成后设置图层的不透明度？

> ID：12413459
> 
> 赞同：2
> 
> 时间：2012-09-13T19:29:57.173
> 
> 标签：iphone, ios, ipad, core-animation, calayer

我有一个名为`specialLayer`. 像这样禁用不透明度的隐式动画：

```
self.specialLayer.actions = [NSDictionary dictionaryWithObjectsAndKeys:
                                            [NSNull null], @"opacity", nil]; 
```

只有两种方法可以访问这个子层。

```
- (void)touchDown {
    self.specialLayer.opacity = 0.25f;
}

- (void)touchUp {
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    animation.fromValue = [NSNumber numberWithFloat:self.specialLayer.opacity];
    animation.toValue = [NSNumber numberWithFloat:1.0];
    animation.duration = 0.5;
    animation.removedOnCompletion = NO;
    animation.fillMode = kCAFillModeForwards;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    [self.specialLayer addAnimation:animation forKey:@"opacity"];
} 
```

有时候是这样的：

1）用户按下按钮（按住）并调用 -touchDown 。specialLayer 的不透明度瞬间变为 0.25

2) 用户释放按钮并调用 -touchUp。specialLayer 的不透明度动画回到 1.0

此序列仅适用一次！

3）用户再次按下按钮（按住）并调用 -touchDown 。但是specialLayer的不透明度在屏幕上没有改变！即使`self.specialLayer.opacity = 0.25f;`被调用也没有任何反应。不透明度似乎保持在 1.0f。

4）用户抬起手指并调用-touchUp。specialLayer 的不透明度跳到 0.25 并从那里动画到 1.0f。

我检查了 NSLog 以确保按此顺序调用方法。他们是这样。

当我取消注释动画代码并将不透明度直接设置为 1.0 时，后续直接不透明度更改立即生效。绝对是导致问题的 CABasicAnimation。删除禁用隐式动画的代码对此问题没有影响。

我一生都无法弄清楚这里发生了什么。为什么 CALayer 在我为不透明度添加 CABasicAnimation 后一段时间后没有反映我设置的不透明度值？这是一个错误吗？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T19:46:01.340

您将动画设置`removedOnCompletion`为`NO`. 这意味着当动画完成时，它仍然停留在图层上并且仍然控制 的值以`opacity`进行渲染。当您第二次调用此代码时，新动画会替换旧动画，从而导致跳转（因为它现在使用新设置的动画`0.25f`作为起点）。

解决方案是停止设置`removedOnCompletion`为`NO`. 相反，您应该在添加动画的同时将图层的实际不透明度设置为与动画端点相同的值。

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
// you can omit fromValue since you're setting it to the layer's opacity
// by omitting fromValue, it uses the current value instead. Just remember
// to not change layer.opacity until after you add the animation to the layer
animation.toValue = [NSNumber numberWithFloat:1];
animation.duration = 0.5;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
[layer addAnimation:animation forKey:@"opacity"];
layer.opacity = 1; // or layer.opacity = [animation.toValue floatValue]; 
```

* * *

这是因为图层渲染的工作方式。当 CoreAnimation 将图层树渲染到屏幕上时，它会复制模型树并生成所谓的演示树。它通过复制所有图层，然后应用所有动画来做到这一点。因此，它遍历图层上的每个动画，将时间插入计时函数，将生成的进度插入 from/to 值之间的插值，并将最终值应用回表示层的属性。

因此，当您将动画永久保留在图层上时，此动画将始终覆盖该键的实际模型值。无论您更改多少次`layer.opacity`，控制的动画`opacity`将始终覆盖用于演示目的的值。

同样的原因也是为什么您可以`layer.opacity`在添加动画后将 设置为您想要的任何内容，因为动画将优先。只有当动画被移除时（默认情况下，当动画完成时）才会再次使用该属性的模型值。

# iphone - iOS 6 上的 Cocos2D 2.0 截图

> ID：12413460
> 
> 赞同：7
> 
> 时间：2012-09-13T19:30:03.017
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我有一个应用程序可以截取场景的屏幕截图并将其保存到文件中。我有这个工作，应用程序在商店里。今天，我已经下载了 iOS 6，但我使用的方法不再有效。我测试了所有我知道的让它工作，谷歌搜索并发现了这个：

[http://www.cocos2d-iphone.org/forum/topic/37809?replies=22#post-180983](http://www.cocos2d-iphone.org/forum/topic/37809?replies=22#post-180983)

用户似乎同意这适用于 iOS 5，但我已经在 iOS 6 上对此进行了测试，它正在生成黑色屏幕截图。

我不是 Cocos2D 方面的专家，所以我不能确切地说出这个人的代码有什么问题。作者在 github 上有一个示例项目，甚至他的项目也在 iOS 6 上生成黑色屏幕截图。

有什么线索吗？谢谢。

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-13T22:19:45.633

我不确定 GitHub 版本做了什么，但这段代码会截取屏幕截图，我刚刚在 iOS 6 上对其进行了测试，它运行良好。

```
+(UIImage*) screenshotWithStartNode:(CCNode*)startNode
{
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize winSize = [CCDirector sharedDirector].winSize;
    CCRenderTexture* rtx = 
    [CCRenderTexture renderTextureWithWidth:winSize.width 
                                 height:winSize.height];
    [rtx begin];
    [startNode visit];
    [rtx end];

    return [rtx getUIImage];
} 
```

你可以这样称呼它

```
CCScene *scene = [[CCDirector sharedDirector] runningScene];
CCNode *n = [scene.children objectAtIndex:0];
UIImage *img = [AppController screenshotWithStartNode:n]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T18:32:25.840

这适用于 Cocos2d V3。

```
+(UIImage*) screenshotWithStartNode:(CCNode*)startNode
{
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize viewSize = [[CCDirector sharedDirector] viewSize];
    CCRenderTexture* rtx =
    [CCRenderTexture renderTextureWithWidth:viewSize.width
                                     height:viewSize.height];
    [rtx begin];
    [startNode visit];
    [rtx end];

    return [rtx getUIImage];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T19:54:39.133

以上 2 个答案在 Cocos2d 3.2.1 中不起作用

这是 Cocos2d 3.2.1 + 的解决方案

```
-(UIImage*) takePresentScreenshot
{
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize size = [[CCDirector sharedDirector] viewSize];
    CCRenderTexture *renderTxture = [CCRenderTexture renderTextureWithWidth:size.width
                                                                  height:size.height];
    [renderTxture begin];
    [[[CCDirector sharedDirector] runningScene] visit];
    [renderTxture end];

    return [renderTxture getUIImage];
}

UIImage* screenshot = [self takePresentScreenshot]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-17T03:29:06.210

最佳答案适用于 iPad（我已经在 iPad v1 到 4 上进行了测试）。

它不适用于实际设备：iPhone5、iOS7。

但是，它确实适用于这种 iPhone 5 的模拟器！

这种不一致快把我逼疯了！

# json - Jquery $.Ajax 冻结浏览器

> ID：12413461
> 
> 赞同：1
> 
> 时间：2012-09-13T19:30:06.020
> 
> 标签：json, jquery

我有一个函数可以调用获取 Json 响应并在 Google Plots 中绘制数据……我每 90 秒执行一次此函数，因此它会使用最新数据更新我的图表……

这很好用，但是每当它正在处理时，它似乎会锁定浏览器几秒钟（甚至加载程序冻结）如果图形部分冻结我没关系，但我不希望加载程序或其他项目冻结我想要 UI在图表更新时仍然有效。

有人可以帮助我，也许我应该改变 $.ajax

这是代码：

```
function UpdateCharts() {
clearInterval(timerId);
BuildLineChart('power-chart', $('#datePower').val(), '1,28,32');
BuildLineChart('voltagecurrent-chart', currentDate, '13,15,17,5,7,9');
BuildLineChart('phasekw-chart', currentDate, '2,3,4');
BuildLineChart('phasevoltage-chart', currentDate, '13,15,17');
BuildLineChart('phasecurrent-chart', currentDate, '5,7,9,11');
timerId = setInterval(UpdateCharts, 90000);
}

// document ready function
$(document).ready(function() {
setTimeout(UpdateCharts, 5000);
}); 
```

构建折线图然后执行此操作：

```
 function onDataReceived(seriesData) {
            var p = $.plot(placeholder, seriesData.seriesData, options);
        }

        $.ajax({
            url: '/Charts/LineChart?SeriesToGraph=' + dataPoints + '&DatePull=' + chartDate,
            method: 'GET',
            async: false,
            cache: true,
            dataType: 'json',
            beforeSend: function() {
            $("." + placeHold + "-loader").html('<img src="/Assets/images/loaders/circular/066.gif" />');
            },
            complete: function() {
            $("." + placeHold + "-loader").html('');
            },
            success: onDataReceived
        }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T19:32:55.707

[async: false](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)导致浏览器在继续之前等待请求完成。将其更改为 async: true 并且它不会锁定浏览器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T19:32:55.020

你已经`async: false`设置好了。如果您将其设置为`async: true`，那么您的 AJAX 请求将异步发生并且*不应该*冻结您的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:35:40.273

你有没有试过

```
async: true 
```

?

从 [这里](http://api.jquery.com/jQuery.ajax/)。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。

# javascript - 总是需要javascript事件目标吗？

> ID：12413465
> 
> 赞同：2
> 
> 时间：2012-09-13T19:30:32.287
> 
> 标签：javascript, events

我是 JS 新手，我想知道事件是否总是需要目标元素？因为如果你做一些逻辑编程你不需要包含 DOM 元素，我也注意到在一些库中，即。Jquery，您可以在常规 JS 对象上触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:01:08.487

在这里，我为您做了一个示例，其中包含一些在页面加载后添加的事件和元素的代码：抱歉，语言不好。 [JSFIDDLE](http://jsfiddle.net/DWjYH/)

# sql - 此 SQL 触发器中的语法用于将插入的行和其他数据中的数据混合到另一个表中

> ID：12413469
> 
> 赞同：0
> 
> 时间：2012-09-13T19:30:40.573
> 
> 标签：sql, tsql, sql-server-2012

例如，我正在尝试这样做：

```
INSERT INTO 
   [LNK_54SD_Reporting].[54_SD_Membership].[Users] (ApplicationId, UserId, UserName, IsAnonymous, LastActivityDate) 
VALUES 
   (@ApplicationId, @UserGuid, [inserted].[email], 0, 0) 
```

但我得到了`inserted.email`无法绑定的错误。

根据建议，我也试过这个：

```
INSERT INTO 
    [LNK_54SD_Reporting].[54_SD_Membership].[Users] 
    (SELECT 
         ApplicationId, UserId, UserName, IsAnonymous, LastActivityDate) 
VALUES  
    (@ApplicationId, @UserGuid, i.[email], 0, 0 FROM INSERTED) 
```

这给了我一个 SELECT 错误

当我也尝试插入其他数据时，从插入触发器上的插入行获取数据的属性语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:50:06.167

根据您的信息...

```
 INSERT INTO [LNK_54SD_Reporting].[54_SD_Membership].[Users] 
 (ApplicationId, UserId, UserName, IsAnonymous, LastActivityDate) 
 SELECT @ApplicationId, @UserId, inserted.email, 0, 0
 FROM INSERTED 
```

虽然也许 LastActivityDate 应该是`Null`？

# php - mysql_insert_array 是一个致命错误

> ID：12413470
> 
> 赞同：0
> 
> 时间：2012-09-13T19:31:03.477
> 
> 标签：php

我正在尝试将下面数组的内容插入到我的 mysql 表中提供的字段中。但我收到致命错误：调用未定义函数 mysql_insert_array(); 有任何想法吗？

```
 <?php

 // Open database here
 $connect = mysql_connect("xxxxx", "xxxx", "xxxx") or         die('Couldn\'t connect to MySQL Server: ' . mysql_error());
    mysql_select_db("xxxx", $connect ) or die('Couldn\'t Select the database: ' . mysql_error( $connect ));
    // Let's pretend these values were passed by a form
   $_POST['name'] = "Bob Marley";
   $_POST['country'] = "Jamaica";
   $_POST['music'] = "Reggae";
  $_POST['submit'] = "Submit";

  // Insert all the values of $_POST into the database table `artists`, except
  // for $_POST['submit'].  Remember, field names are determined by array keys!
  $result = mysql_insert_array("artists", $_POST, "submit");

  // Results
    if( $result['mysql_error'] ) {
    echo "Query Failed: " . $result['mysql_error'];
      } else {
    echo "Query Succeeded! <br />";
    echo "<pre>";
    print_r($result);
     echo "</pre>";
    }

   // Close database

     ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T19:32:38.013

`mysql_insert_array`不是 PHP 函数，因此无法调用。

您应该改为使用`mysql_query`来插入您的数组。或者，您应该真正使用[mysql_pdo](http://php.net/manual/en/ref.pdo-mysql.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)库，因为这些`mysql_*`函数已被弃用。

# actionscript-3 - as3 带有 urlstream 的进度条

> ID：12413474
> 
> 赞同：0
> 
> 时间：2012-09-13T19:31:23.830
> 
> 标签：actionscript-3, flash, url

此进度条不起作用。知道为什么吗？

```
import flash.filesystem.*;
import flash.display.*;

var byteArray:ByteArray = new ByteArray();//Bytes from the URLStream will go here
var loader:Loader = new Loader();

var urlString:String = "http://massmediamail.com/testing/Rosary.zip";
var urlReq:URLRequest = new URLRequest(urlString);
var urlStream:URLStream = new URLStream();
var fileData:ByteArray = new ByteArray();
urlStream.addEventListener(Event.COMPLETE, loaded);
urlStream.load(urlReq);

function loaded(event:Event):void
{
urlStream.readBytes(fileData, 0, urlStream.bytesAvailable);
writeAirFile();
}

function writeAirFile():void
{

var file:File = File.applicationStorageDirectory.resolvePath("000Zip/Rosary.zip");
trace(File.applicationStorageDirectory.nativePath);
var fileStream:FileStream = new FileStream();
fileStream.open(file, FileMode.WRITE);
fileStream.writeBytes(fileData, 0, fileData.length);
fileStream.close();
trace("The file is written.");
done.text = "Yahoooo!";
more.text = "Now wait for the \"yippie!\"";
        //TotalLoaded.text = "Downloaded Zip";

fileStream.addEventListener(ProgressEvent.PROGRESS, onStreamProgress, false, 0, true);

    function onStreamProgress(event:ProgressEvent):void
    {

        TotalBytes.text = "" + event.bytesTotal + "";
        bb.text = "" + event.bytesLoaded + "";

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:46:36.900

将其附加到 URL 流，而不是 FileStream

# javascript - 用于处理对象和数组的 node.js 实用程序库？

> ID：12413476
> 
> 赞同：3
> 
> 时间：2012-09-13T19:31:29.667
> 
> 标签：javascript, node.js, utility

是否有用于处理对象和数组的良好实用程序库。

例如函数，如：extend、forEach、复制对象/数组等，

node.js 环境中常见的是什么？我想知道 underscore.js 有没有像样的替代品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T19:33:58.663

[underscore.js](http://underscorejs.org/)是这类东西的一个很好的默认值。[这是一个关于兼容性问题的线程](https://stackoverflow.com/a/10391938/1360261)，可能很方便。

编辑，根据您的要求提供下划线以外的内容：

据我所知，当您正在寻找额外的数组操作（很像 jQuery 用于 DOM 操作）时，下划线已成为事实上的标准。Joyent 维护了一个相当[彻底](https://github.com/joyent/node/wiki/Modules)的 node.js 兼容模块清单，唯一看似可比的实用程序似乎是一个[名为 fjs 的实验性库](https://github.com/idottv/fjs)，它强调柯里化（从源代码来看，大部分功能都来自于扩展下划线函数） ）。那里可能还有其他东西，但据我所知，下划线的渗透力和成熟度一无所知。

另一个编辑——如果你很好奇的话，这里有一些较旧的库，但是它们的维护已经下降了一点[——valentine](https://github.com/ded/valentine/blob/master/src/valentine.js)、[wu.js](http://fitzgen.github.com/wu.js/)、[Functional](http://osteele.com/sources/javascript/functional/)和[Sugar](http://sugarjs.com/api)。功能性和情人节可能会瘦一点；wu.js 看起来差不多，而且糖更胖。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T20:22:18.033

[lodash](http://lodash.com/)是您可能还想考虑的“下划线.js 的替代品*”。

> Lo-Dash v0.7.0 至少在 Chrome 5-21、Firefox 1-15、IE 6-9、Opera 9.25-12、Safari 3-6、Node.js 0.4.8-0.8.8、Narwhal 0.3 中进行了测试.2、RingoJS 0.8 和 Rhino 1.7RC5

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T12:44:14.230

对于扩展，您可以使用 Node 的内置`util._extend()`函数。

```
var
  extend = require('util')._extend,
  x = {a:1},
  y = extend({}, x); 
```

Node的_extend函数源码：[https ://github.com/joyent/node/blob/master/lib/util.js#L563](https://github.com/joyent/node/blob/master/lib/util.js#L563)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-02T18:12:44.383

看看 Ramdajs：[http: //ramdajs.com/0.22.1/index.html](http://ramdajs.com/0.22.1/index.html)

> Ramda 的主要特点是：
> 
> *   Ramda 强调更纯粹的功能风格。不变性和无副作用的功能是其设计理念的核心。这可以帮助您使用简单、优雅的代码完成工作。
>     
>     
> *   Ramda 函数是自动柯里化的。这使您只需不提供最终参数即可轻松地从旧函数构建新函数。
>     
>     
> *   对 Ramda 函数的参数进行了排列，以便于进行柯里化。要操作的数据通常最后提供。
>     
>     
> 
> 最后两点一起使得将函数构建为更简单的函数序列变得非常容易，每个函数都转换数据并将其传递给下一个函数。Ramda 旨在支持这种编码风格。

# ios - Apple 推送通知折叠键等效

> ID：12413477
> 
> 赞同：22
> 
> 时间：2012-09-13T19:31:34.097
> 
> 标签：ios, apple-push-notifications, collapse

使用 Google 推送通知时，我可以指定一个 collapse_key 值，这样设备就不会收到同一个 collapse_key 的多个通知。APNS 是否有类似的功能，或者有人知道模拟此功能的方法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-09-23T17:26:32.667

从 iOS 10 开始，使用 HTTP/2.0 APNS API，您可以指定`apns-collapse-id`标题并处理应用程序中的折叠逻辑。

折叠的通知将在设备上显示为一个通知，并不断更新新数据。每次更新通知时，它都会被推送到未读通知的顶部。

`apns-collapse-id`取自[https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html)的描述：

> 具有相同折叠标识符的多个通知作为单个通知显示给用户。该值不应超过 64 个字节。有关详细信息，请参阅服务质量、存储转发和合并通知。

并来自[https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1)：

> 当设备在线时，您发送的所有通知都会传递给用户并可供用户使用。但是，您可以通过在多个相同的通知中使用折叠标识符来避免显示重复的通知。折叠标识符的 APNs 请求标头键是 apns-collapse-id，并在表 6-2 中定义。
> 
> 例如，连续两次发送相同标题的新闻服务可以对两个推送通知请求使用相同的折叠标识符。然后，APN 将负责将这些请求合并为一个通知，以便传送到设备。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-29T21:34:26.277

在 iOS 10 中，有一个新的“apns-collapse-id”看起来可以满足这种需求。如果您有 Apple 开发者帐户，您可以查看 WWDC 2016 通知会话视频（707 介绍视频[https://developer.apple.com/videos/play/wwdc2016/707/](https://developer.apple.com/videos/play/wwdc2016/707/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-11T23:17:09.030

Doody P 的答案适用于远程通知，但对于本地触发的通知也有一个等价物：当您创建 UNNotificationRequest 时，您可以将[`identifier`](https://developer.apple.com/documentation/usernotifications/unnotificationrequest/1649634-identifier)参数设置为您一直用作折叠键的任何内容。触发后，推送通知将仅显示您使用该标识符发送的最新版本。

（我们通过 APN 静默发送推送通知，然后作为本地通知重新触发，因为我们需要确保我们的用户已登录。）

[在这个 WWDC 演讲](https://developer.apple.com/videos/play/wwdc2016/707/)中有方便的代码示例和管理传递的通知的演示- 关键部分是从 ~18:00 - 21:00。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T01:34:14.140

> 如果 APNs 尝试发送通知但设备处于离线状态，则通知会存储一段有限的时间，并在可用时发送到设备。
> 
> **仅存储特定应用程序的一个最近通知**。如果在设备离线时发送了多个通知，则每个新通知都会导致先前的通知被丢弃。这种只保留最新通知的行为称为合并通知。

[https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html)

`collapse_key`所以在iOS中不需要。

仅供参考，`collapse_key`仅在设备离线/不活动时有用：

> 此参数标识可以折叠的一组消息（例如，使用collapse_key：“可用更新”），以便在可以恢复传递时仅发送最后一条消息。这是为了**避免在设备重新联机或变为活动状态时发送太多相同的消息**（请参阅 delay_while_idle）。

[https://developers.google.com/cloud-messaging/server-ref#downstream](https://developers.google.com/cloud-messaging/server-ref#downstream)

**更新：**

对于 iOS 和 Android（使用 collapse_key），**如果设备离线**（即 Apple/Google 推送服务器无法访问它），**推送服务器会覆盖之前的任何通知**，并且只保留最后一个。

**如果设备在线**，那么我想**您可以根据收到的通知做任何您想做的事情**。至少在 Android 中，您可以决定是否要“堆积”，是否要覆盖通知区域中的任何先前通知，或者是否要覆盖相同类型的任何先前通知。

```
NotificationManager notificationManager = ...;
String appName = ...;
NotificationCompat.Builder builder = ...
// Always use the same id, so only the last notification will be displayed in the notification area.
int notId = 0;
// Always use a different id, so all notifications will pile up in the notification area
notId = new Random().nextInt(100000);
// Uses the type of notification as id, so you'll only have up to one notification per type
// in the notification area. It's like using collapse_key, but on the app itself.
// That type should should be some additional data in the notification you sent.
notId = notificationType;
Notification notification = builder.build();
notificationManager.notify(appName, notId, notification); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-13T21:57:39.253

iOS中没有这样的功能。但是，由于推送通知是由您控制的服务器发送的，因此您可以跟踪已发送到特定设备的通知，并决定是否发送新通知。换句话说，您将逻辑放在您的服务器代码中，而不是您的 iOS 应用程序代码中。

# .net - 有没有办法在 Visual Studio 中进行 Scala 编程？

> ID：12413489
> 
> 赞同：8
> 
> 时间：2012-09-13T19:32:02.507
> 
> 标签：.net, visual-studio, scala

我有 VS 2012 Ultimate RC，最近我对 Scala 很感兴趣，所以我想知道有没有办法（插件）在 VS 中进行简单的 Scala 编程？谷歌搜索显示了一些可能的承诺，但这些信息已有一年多的历史了。我知道 Scala 在 JVM 上运行，但我提到的信息提到了 .Net 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:50:45.737

截至 12 年 3 月，这是不可能的：

> Visual Studio 支持对 Scala.NET 程序进行分步调试，但不支持对其进行编辑。在 Scala 的 VS 扩展出现之前，可以使用现有（基于 JVM）的 IDE 开发 Scala.NET 程序

[源文件](http://lampwww.epfl.ch/~magarcia/ScalaNET/2011Q2/PreviewScalaNET.pdf)

该项目看起来有点废弃。

**更新：** 2015 年 9 月 8 日

Scala.NET 项目已停止（我相信是由于兴趣低下），该后端背后的人 Miguel Garcia 转而从事[GenB工作](http://magarciaepfl.github.io/scala/)

# haskell - 咖喱有什么好处？

> ID：12413495
> 
> 赞同：9
> 
> 时间：2012-09-13T19:32:31.160
> 
> 标签：haskell, functional-programming, currying

我认为我不太了解柯里化，因为我看不到它可以提供任何巨大的好处。也许有人可以用一个例子来启发我，说明它为什么如此有用。它真的有好处和应用，还是只是一个被过度欣赏的概念？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T20:30:07.983

*（ currying*和*partial application*之间存在细微差别，尽管它们密切相关；由于它们经常混合在一起，我将同时处理这两个术语。）

我第一次意识到好处的地方是当我看到切片运算符时：

```
incElems = map (+1)
--non-curried equivalent: incElems = (\elems -> map (\i -> (+) 1 i) elems) 
```

IMO，这很容易阅读。现在，如果 的类型`(+)`是`(Int,Int) -> Int`*，它是未curried 的版本，它会（反直觉地）导致错误——但是 curryied，它按预期工作，并且具有 type `[Int] -> [Int]`。

您在评论中提到了 C# lambdas。在 C# 中，你可以这样写`incElems`，给定一个函数`plus`：

```
var incElems = xs => xs.Select(x => plus(1,x)) 
```

如果您习惯于无点样式，您会发现`x`这里是多余的。从逻辑上讲，该代码可以简化为

```
var incElems = xs => xs.Select(curry(plus)(1)) 
```

由于缺少 C# lambdas 的自动部分应用程序，这很糟糕。这是决定柯里化在哪里真正有用的关键点：主要是当它*隐式*发生时。对我来说，`map (+1)`是最容易阅读的，然后是，如果没有很好的理由，应该避免`.Select(x => plus(1,x))`使用带有的版本。`curry`

现在，如果可读，好处总结为*更短、更易读和更少混乱的代码*——除非有一些滥用无点风格的做法（我很喜欢`(.).(.)`，但它是……特别的）

此外，如果不使用 curried 函数，lambda 演算将变得不可能，因为它只有一值（但因此是高阶）函数。

[* 当然它实际上是在 中`Num`，但目前它更具可读性。]

* * *

更新：currying 是如何工作的。

查看`plus`C# 中的类型：

```
int plus(int a, int b) {..} 
```

你必须给它*一个值的元组*——不是用 C# 术语，而是用数学语言；你不能只忽略第二个值。用haskell的话来说，就是

```
plus :: (Int,Int) -> Int, 
```

可以像这样使用

```
incElem = map (\x -> plus (1, x)) -- equal to .Select (x => plus (1, x)) 
```

输入的字符太多了。假设您希望将来更频繁地执行此操作。这里有一个小帮手：

```
curry f = \x -> (\y -> f (x,y))
plus' = curry plus 
```

这使

```
incElem = map (plus' 1) 
```

让我们将其应用于具体值。

```
incElem [1] 
= (map (plus' 1)) [1]
= [plus' 1 1]
= [(curry plus) 1 1]
= [(\x -> (\y -> plus (x,y))) 1 1]
= [plus (1,1)]
= [2] 
```

在这里你可以`curry`在工作中看到。它将标准的 haskell 风格的函数应用程序 ( `plus' 1 1`) 转换为对“tupled”函数的调用——或者，从更高的层次来看，将“tupled”转换为“untupled”版本。

幸运的是，大多数时候，您不必担心这一点，因为有自动部分应用程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T19:53:26.653

这不是自切片面包以来最好的事情，但如果你仍然使用 lambdas，那么在不使用 lambda 语法的情况下使用高阶函数会更容易。比较：

```
map (max 4) [0,6,9,3] --[4,6,9,4]
map (\i -> max 4 i) [0,6,9,3] --[4,6,9,4] 
```

当你使用函数式编程时，这些类型的结构经常出现，这是一个很好的捷径，可以让你从更高的层次考虑问题——你映射的是“ `max 4`”函数，而不是随机的恰好被定义为的函数`(\i -> max 4 i)`。它使您可以更轻松地开始思考更高级别的间接性：

```
let numOr4 = map $ max 4
let numOr4' = (\xs -> map (\i -> max 4 i) xs)
numOr4 [0,6,9,3] --ends up being [4,6,9,4] either way; 
                 --which do you think is easier to understand? 
```

也就是说，它不是灵丹妙药。有时你的函数参数对于你试图用currying做的事情的顺序是错误的，所以无论如何你都必须求助于lambda。然而，一旦你习惯了这种风格，你就会开始学习如何设计你的功能来很好地配合它，一旦这些神经元开始在你的大脑中连接起来，相比之下，以前复杂的结构就会开始变得明显。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T19:43:16.553

柯里化的一个好处是它允许部分应用函数而不需要任何特殊的语法/运算符。一个简单的例子：

```
mapLength = map length
mapLength ["ab", "cde", "f"]
>>> [2, 3, 1]
mapLength ["x", "yz", "www"]
>>> [1, 2, 3]

map :: (a -> b) -> [a] -> [b]
length :: [a] -> Int
mapLength :: [[a]] -> [Int] 
```

由于currying，该`map`函数可以被认为具有类型`(a -> b) -> ([a] -> [b])`，因此当`length`作为它的第一个参数应用时，它会产生`mapLength`类型的函数`[[a]] -> [Int]`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-13T21:17:05.383

柯里化具有其他答案中提到的便利功能，但它通常也有助于简化对语言的推理或实现一些代码比其他方式更容易。例如，柯里化意味着任何函数都具有与`a ->b`. 如果您编写一些类型为 的`a -> b`代码，则该代码可以与任何函数一起使用，无论它需要多少参数。

最著名的例子是这个`Applicative`类：

```
class Functor f => Applicative f where
    pure  :: a -> f a
    (<*>) :: f (a -> b) -> f a -> f b 
```

和一个例子使用：

```
-- All possible products of numbers taken from [1..5] and [1..10]
example = pure (*) <*> [1..5] <*> [1..10] 
```

在这种情况下，`pure`并`<*>`调整任何类型的函数以`a -> b`使用类型列表`[a]`。由于部分应用，这意味着您还可以调整类型的函数`a -> b -> c`以使用`[a]`and `[b]`，或`a -> b -> c -> d`使用`[a]`，`[b]`and `[c]`，等等。

之所以有效，是因为`a -> b -> c`与以下内容相同`a -> (b -> c)`：

```
(+)                             :: Num a => a -> a -> a
pure (+)                        :: (Applicative f, Num a) => f (a -> a -> a)
[1..5], [1..10]                 :: Num a => [a]
pure (+) <*> [1..5]             :: Num a => [a -> a]
pure (+) <*> [1..5] <*> [1..10] :: Num a => [a] 
```

柯里化的另一个不同用途是 Haskell 允许您部分应用类型构造函数。例如，如果您有这种类型：

```
data Foo a b = Foo a b 
```

...在许多情况下编写实际上是有意义的`Foo a`，例如：

```
instance Functor (Foo a) where
    fmap f (Foo a b) = Foo a (f b) 
```

即，`Foo`是一个带有 kind 的双参数类型构造函数`* -> * -> *`；`Foo a`，仅对一种类型的部分应用`Foo`，是一种类型构造函数 kind `* -> *`。 `Functor`是一个类型类，只能为 kind 的类型构造器实例化`* -> *`。既然`Foo a`是这种，你可以`Functor`为它做一个实例。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-13T23:44:29.013

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-13T20:31:20.430

在不指定您提出问题的上下文的情况下询问柯里化的好处是有些可疑的：

*   在某些情况下，如函数式语言，柯里化只会被视为具有更多本地变化的东西，您可以用显式的元组域替换东西。然而，这并不是说柯里化在这些语言中没有用。从某种意义上说，使用 curried 函数进行编程会让您“感觉”自己正在以更具功能性的风格进行编程，因为您通常会面临处理高阶函数的情况。当然，大多数时候，您将“填写”函数的所有参数，但在您希望以部分应用形式使用该函数的情况下，以柯里化形式执行此操作要简单一些。`curry`并且`uncurry`也有助于函数式编程语言中的某些便利，我可以将 Haskell 中的箭头视为您将使用的特定示例以及`curry`将`uncurry`事物应用于箭头的不同部分等...
*   在某些情况下，您想考虑的不仅仅是函数式程序，您可以将 currying / uncurrying 作为一种方式来说明构造逻辑的消除和引入规则，这提供了一个连接到一个更优雅的动机来说明它存在的原因。
*   在某些情况下，例如在 Coq 中，使用柯里化函数与元组函数可以产生不同的归纳方案，这可能更容易或更难使用，具体取决于您的应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-14T16:15:57.140

I used to think that currying was simple syntax sugar that saves you a bit of typing. For example, instead of writing

```
(\ x -> x + 1) 
```

I can merely write

```
(+1) 
```

The latter is instantly more readable, and less typing to boot.

So if it's just a convenient short cut, why all the fuss?

Well, it turns out that because function types are curried, you can write code which is polymorphic in the number of arguments a function has.

For example, the `QuickCheck` framework lets you test functions by feeding them randomly-generated test data. It works on any function who's input type can be auto-generated. But, because of currying, the authors were able to rig it so this works with *any number of arguments*. Were functions *not* curried, there would be a different testing function for each number of arguments - and that would just be tedious.

# java - ClassNotFoundException：org.springframework.web.context.ContextLoaderListener

> ID：12413505
> 
> 赞同：6
> 
> 时间：2012-09-13T19:33:22.860
> 
> 标签：java, spring, spring-mvc

我在我的项目中遇到了一些问题，这是一个 Spring MVC 项目。在这个项目中，对于持久层，我们使用的是 Hibernate。

以下是我的`web.xml`详细信息：

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/beanRefFactory.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

当我尝试运行此项目时，出现以下错误：

```
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我的类路径 jar 详细信息：

```
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/ant-1.6.5.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/ant-antlr-1.6.5.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/antlr-2.7.6.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/aopalliance-1.0.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/asm-attrs.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/asm.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/aspectjweaver-1.6.9.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/c3p0-0.9.1.2.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/c3p0-0.9.1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/cglib-2.1.3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/cglib-2.2.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/cglib-nodep-2.2.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/commons-collections-3.1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/commons-collections-3.2.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/commons-dbcp-1.4.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/commons-logging-1.1.1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/commons-pool-1.5.3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/dom4j-1.6.1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/ehcache-1.2.3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/ejb3-persistence.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/hibernate-annotations.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/hibernate-commons-annotations.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/hibernate-entitymanager.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/hibernate-search.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/hibernate-validator.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/hibernate3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/javassist-3.9.0.GA.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/jta-1.1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/jta.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/lucene-core-2.3.0.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/hibernate/oscache-2.4.1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/antlr-runtime-3.0.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/commons-beanutils-1.8.3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/commons-configuration-1.4.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/commons-logging-1.0.4.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/jstl.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/log4j-1.2.16.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.asm-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.beans-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.context-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.context.support-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.core-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.expression-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.jdbc-3.1.1.RELEASE.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.transaction-3.1.1.RELEASE.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.web-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/org.springframework.web.servlet-3.0.0.M3.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/slf4j-api-1.6.6.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/slf4j-log4j12-1.6.6.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/spring-orm-3.2.0.M1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/spring-oxm-3.2.0.M1.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/spring/standard.jar"/>
<classpathentry kind="lib" path="WebContent/WEB-INF/lib/misslenious/mysql-connector-java-5.1.8-bin.jar"/> 
```

任何指针或帮助都是非常可观的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:48:12.513

您在包含此类的类路径中缺少 spring-web jar (spring-web-3.2.0.M2.jar)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T05:12:55.333

1.尝试检查 jar 文件是否包含在 lib 文件夹中，否则有时 jar 文件已损坏尝试下载新的 jar 并包含它。2.您为jar文件提供的路径是否正确？可能是您提供了错误的路径位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T05:21:20.503

**ContextLoaderListener**用于将 Spring 与 Web 应用程序集成。

要解决 ClassNotFoundException 异常，请执行以下步骤：

1.  检查 (spring-web.jar) **spring-web-3.2.0.RELEASE.jar 的**类路径 （如果您使用 spring 3.x 运行，对于 spring spring 2.0 在类路径中添加 spring.jar）
2.  如果您正在使用 Eclipse 和 maven，请确保所有依赖项都正确包含在构建路径中。（检查 Java 构建路径）

3.  通过选择“清洁”来清洁您的服务器。

现在尝试运行您的项目。

如果您仍然遇到任何问题并且您正在使用基于 maven 的项目，请尝试以下给定步骤：

1.需要在父项目中声明maven-compiler-plugin

```
<build>
    [...]
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
    [...]
  </build> 
```

确保编译的类与目标（1.6）版本兼容。

1.  有时包含的项目依赖项会发生冲突，因此要解决冲突，请执行以下命令，

    mvn 依赖：tree -Dverbose -Dincludes=commons-collections

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-24T14:23:47.273

尝试使用另一个版本的“spring web.jar”。

# go - 为什么这个 Go 代码会阻塞？

> ID：12413510
> 
> 赞同：12
> 
> 时间：2012-09-13T19:33:48.850
> 
> 标签：go, goroutine

我写了以下程序：

```
package main

import (
    "fmt"
)

func processevents(list chan func()) {
    for {
        //a := <-list
        //a()
    }
}

func test() {
    fmt.Println("Ho!")
}

func main() {

    eventlist := make(chan func(), 100)

    go processevents(eventlist)

    for {
        eventlist <- test
        fmt.Println("Hey!")
    }
} 
```

由于通道事件列表是一个缓冲通道，我想我应该得到输出“嘿！”的 100 倍，但它只显示一次。我的错误在哪里？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-13T19:41:53.917

## 更新（Go 版本 1.2+）

从 Go 1.2 开始，调度程序的工作原理是**抢占式多任务**。这意味着原始问题中的问题（以及下面提供的解决方案）不再相关。

来自[Go 1.2 发行说明](http://golang.org/doc/go1.2#preemption)

> 调度程序中的抢占
> 
> 在以前的版本中，一个永远循环的 goroutine 可能会饿死同一线程上的其他 goroutine，当 GOMAXPROCS 只提供一个用户线程时，这是一个严重的问题。在 Go > 1.2 中，这部分得到了解决：调度程序在进入函数时偶尔被调用。这意味着任何包含（非内联）函数调用的循环都可以被抢占，从而允许其他 goroutine 在同一线程上运行。

## 简短的回答

它不会阻止写入。它陷入了无限循环`processevents`。这个循环永远不会屈服于调度程序，导致所有 goroutine 无限期地锁定。

如果您注释掉对 的调用`processevents`，您将得到预期的结果，直到第 100 次写入。此时程序会出现恐慌，因为没有人从通道中读取。

`runtime.Gosched()`另一种解决方案是在循环中调用 to 。

## 长答案

在 Go1.0.2 中，Go 的调度程序基于[Cooperative multitasking](http://en.wikipedia.org/wiki/Cooperative_multitasking)的原则工作。这意味着它通过让这些例程在特定条件下与调度程序交互来将 CPU 时间分配给在给定 OS 线程中运行的各种 goroutine。这些“交互”发生在 goroutine 中执行某些类型的代码时。在 go 的情况下，这涉及到执行某种 I/O、系统调用或内存分配（在某些条件下）。

在空循环的情况下，不会遇到这样的情况。因此，只要该循环正在运行，就永远不允许调度程序运行其调度算法。因此，这可以防止它将 CPU 时间分配给等待运行的其他 goroutine，并且您观察到的结果随之而来：您有效地创建了一个无法被调度程序检测或打破的死锁。

空循环在 Go 中通常是不需要的，并且在大多数情况下表明程序中存在错误。如果出于某种原因确实需要它，则必须通过`runtime.Gosched()`在每次迭代中调用来手动让步给调度程序。

```
for {
    runtime.Gosched()
} 
```

作为解决方案提到了设置`GOMAXPROCS`一个值。`> 1`虽然这将消除您观察到的直接问题，但如果调度程序决定将循环 goroutine 移动到它自己的 OS 线程，它将有效地将问题移动到不同的 OS 线程。除非您`runtime.LockOSThread()`在`processevents`函数开始时调用，否则无法保证这一点。即使那样，我仍然不会依赖这种方法来成为一个好的解决方案。简单地调用`runtime.Gosched()`循环本身，将解决所有问题，无论 goroutine 在哪个操作系统线程中运行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T07:02:50.007

这是另一种解决方案 - 用于`range`从通道中读取。此代码将正确地屈服于调度程序，并在通道关闭时正确终止。

```
func processevents(list chan func()) {
    for a := range list{
        a()
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T09:31:01.740

好消息，自 Go 1.2（2013 年 12 月）以来，原始程序现在可以按预期运行。您可以[在 Playground 上尝试一下](http://play.golang.org/p/2JVRIKM6Ux)。

这在[Go 1.2 发行说明](https://golang.org/doc/go1.2#preemption)中的​​“调度程序中的抢占”部分中进行了解释：

> 在以前的版本中，一个永远循环的 goroutine 可能会饿死同一线程上的其他 goroutine，当 GOMAXPROCS 只提供一个用户线程时，这是一个严重的问题。在 Go 1.2 中，这部分得到了解决：调度程序在进入函数时偶尔被调用。

# php - php Blowfish 解密加扰数据

> ID：12413515
> 
> 赞同：1
> 
> 时间：2012-09-13T19:34:13.517
> 
> 标签：php, blowfish, encryption-symmetric

我正在尝试加密 xml 字符串，将其保存在某处，然后稍后解密（在 cbc 模式下使用河豚）。

当我解密字符串时，它会打乱前 4 个字符。

```
$text = "<?xml version="1.0" encoding="ISO-8859-1"?> ....";
$td = mcrypt_module_open('blowfish', '', 'cbc', '');
$iv = 'kd84h28v';
$ks = mcrypt_enc_get_key_size($td);
$key = substr(md5('randomString1234'), 0, $ks);
mcrypt_generic_init($td, $key, $iv);
$cypher = mcrypt_generic($td, $text);
print mdecrypt_generic($td, $cypher);

# prints: çGÖºÌrsion="1.0" encoding="ISO-8859-1"?> 
```

我会改用`ecb`模式——它可以很好地解密——除了当前的 php 实现忽略了 iv。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:55:05.030

从[手册](http://php.net/mdecrypt_generic)：

> 在尝试解密数据之前，使用 mcrypt_generic_init() 重新初始化加密缓冲区非常重要。

所以你可能需要这样的东西：

```
mcrypt_generic_init($td, $key, $iv);
$cypher = mcrypt_generic($td, $text);
mcrypt_generic_deinit($td);
mcrypt_generic_init($td, $key, $iv);
print mdecrypt_generic($td, $cypher); 
```

# html - 从网页打开域上的共享文件夹

> ID：12413519
> 
> 赞同：2
> 
> 时间：2012-09-13T19:34:23.743
> 
> 标签：html

提前感谢您的帮助，

我正在构建一个非常简单的网页（单页），其中包含指向 bbc.com、cnn.com 等的链接（这很好用）

现在我需要在该页面上创建差异链接到我们内部共享驱动器上的各个位置，该驱动器已经从服务器映射到用户 pc（运行 win server 2008）。

wen 系统未连接到我们域的用户尝试访问共享驱动器（关闭后），他们总是被提示输入用户名和密码，然后他们可以访问驱动器。

我现在的问题是如何在我的 html 页面上创建此链接，以便当用户单击它时。它在 Windows 资源管理器中打开 (\10.10.0.1\k\Shared\HR)，而不是在现在的浏览器中。

```
<li data-tags="Logo Design"><a href="\\10.10.0.1\k\"><img src="images/portfolio/thumbs/image(5).jpg" alt="Illustration" /></a> 
```

这是我使用的线。

我已经阅读了这个链接，但他们没有回答我的问题，或者我不明白该怎么做，

[通过链接打开 Windows 资源管理器](https://stackoverflow.com/questions/7388641/opening-windows-explorer-via-link)

[通过 Web 浏览器打开部署在共享文件夹中的 ClickOnce 应用程序](https://stackoverflow.com/questions/6568304/open-click-once-application-deployed-in-shared-folder-by-web-browser)

[从不在域中的计算机访问共享文件夹](https://stackoverflow.com/questions/2736491/access-a-shared-folder-from-a-machine-not-in-the-domain)

[https://stackoverflow.com/questions/7249017/open-file-w-test-in-explorer-exe-not-in-chrome-or-internet-explorer-any](https://stackoverflow.com/questions/7249017/open-file-w-test-in-explorer-exe-not-in-chrome-or-internet-explorer-any) （这看起来像我需要的，但我不需要'不知道在哪里适合那里的代码）

[如何从网页 (asp.net) 启动 EXE](https://stackoverflow.com/questions/916925/how-to-launch-an-exe-from-web-page-asp-net)

我在我的系统上执行此操作，但会将其传输到服务器，并将在用户桌面上放置我的索引文件的快捷方式。

感谢您的帮助，我希望我已经提供了帮助我解决此问题所需的所有信息。

我们都使用谷歌驱动器的铬原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:40:47.483

这不会通过我知道的任何默认浏览器配置来完成，因为使用`file://`引用通常会导致浏览器尝试启动文件。也许搜索 Chrome 插件以查看是否有可用的东西来覆盖默认浏览器行为。

# delphi-7 - 重写流代码使其不使用任何单位有什么技巧？

> ID：12413520
> 
> 赞同：0
> 
> 时间：2012-09-13T19:34:26.810
> 
> 标签：delphi-7, delphi

我正在尝试移植[一些异或加密代码](http://www.delphigeist.com/2009/09/text-encryption-with-xor.html)，因此它不使用任何其他单位。我只想使用编译器本机支持的命令、变量和类型。

例如，这里有一些原始代码：

```
[...]
while (StreamIn.Position < StreamIn.Size) and
 ((StreamIn.Size -StreamIn.Position) >= szBuffer) do begin
 (* read 4 bytes at a time into a local integer variable *)
 StreamIn.ReadBuffer(buffer, szBuffer);
 (* the XOR encryption/decryption *)
 buffer := buffer xor theKey;
 buffer := buffer xor $E0F;
 (* write data to output stream *)
 StreamOut.WriteBuffer(buffer, szBuffer);
end;
[...] 
```

这是我的代码：

```
function __NativeEncrypt (const Key, Source : String) : String;
// this function should not be used directly
// use EncryptText and DecryptText
const
 szBuffer = SizeOf(Integer); (* 4 bytes *)
 szByteBuffer = SizeOf(Byte); (* 1 byte *)
var
 byteBuffer,
 buffer,
 index,
 theKey: Integer;
 StreamIn  : String;
 StreamOut : String;
 i : Integer;
begin
 theKey := hashKey(Key);
 StreamIn := Source;
 StreamOut := '';
 for i := 1 to Length (StreamIn) do begin
  buffer := Integer(StreamIn[i]);
  buffer := buffer xor thekey;
  buffer := buffer xor $E0F;
  StreamOut := StreamOut + char(Buffer);
 end;
 result := StreamOut; // wrong results.
 // to continue...
end; 
```

这个任务有什么技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:05:44.270

不使用图书馆提供的单元的唯一原因是作为学习练习。我认为没有其他理由通过拒绝使用工具的内置功能来故意削弱自己。对您的一般提示请求的任何回答都会剥夺您的学习经验。

大多数开发人员最终会在他们职业生涯的某个阶段从头开始重写*一些东西。*然而，除非是由患有极端不在这里投资综合症的主管强加的，否则这几乎总是一种个人经历。你不会从他们的经验中获益，就像你从自己做的工作中获益一样。自己动手将使您了解内置工具的作用，并可能让您深入了解为什么它们的设计方式是这样的。尽管您可能能够从其他人那里得到这些解释，但除非您实际上自己尝试过，否则无论如何您都不会真正欣赏这些解释。

我给你的建议是继续你的项目。我希望你觉得它很有趣，我祝你好运。如果您最终发现自己无法取得进一步的进展，请找出您遇到的具体问题，然后向其他人寻求帮助以解决该障碍。

# c# - 仅在输入失去焦点时保存表单

> ID：12413523
> 
> 赞同：0
> 
> 时间：2012-09-13T19:34:29.640
> 
> 标签：c#, asp.net, objectdatasource, formview

我正在使用`FormView`带有数据绑定 ( `ObjectDataSource`) 的表单 ()，并且我的所有输入字段都使用`'<%# Bind("field") %>'`.

一切正常，但我有两个问题（我发现了各种关于使用`this.Validate()`或的提示`.EndEdit()`- 但似乎没有一个工作）：

*   条目仅在离开输入字段后保存，因此失去焦点

假设我有一个 ID 为 Name 的文本框，然后输入“George”。当我将选项卡转到下一个文本框或单击其他位置并单击保存时-所有内容都已保存。但是当我将焦点放在文本框中时，值不会被保存。为什么会这样？我可以使用什么魔法来规避这个问题（JavaScript 来拯救？）。

*   我通过 Javascript 设置文本框的字段值 ( `element.value`)（在组合框中选择某些内容时）。

与上面相同的问题适用，只有当我给文本框焦点和标签时，值才会被保存。这产生了一个问题，我只希望用户在组合框中选择一些东西（文本框会相应地更新）并继续前进 - 我不希望用户之后单击文本框并再次跳出。

* * *

编辑：

我现在解决的第二个问题是通过 Javascript `textbox.focus();`（`combobox.focus();`

* * *

我假设这是相当普遍的，但我强大的 Google fu 并没有帮助我找到一个简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:37:08.380

`DataGridView`在使用控件时，Winforms 开发中可能会出现类似的问题。我通常将一些逻辑附加到提交按钮的`Click`事件以使`DataGridView`验证。我怀疑类似的解决方案在这里对你有用。

# build - MSBuild：并行构建和 .Net 项目

> ID：12413529
> 
> 赞同：10
> 
> 时间：2012-09-13T19:34:51.953
> 
> 标签：build, msbuild, parallel-processing

我编写了一个 MSBuild 项目文件，它尝试并行构建我的 VS2010 解决方案的所有配置：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <ItemGroup>
    <BuildFile Include="$(SourceRoot)MyProject.sln" />
    <Config Include="Debug">
      <Configuration>Debug</Configuration>
    </Config>
    <Config Include="Release">
      <Configuration>Release</Configuration>
    </Config>
  </ItemGroup>

  <Target Name="BuildAll" Outputs="%(Config.Configuration)">
    <Message Text="Start building for configuration: %(Config.Configuration)" />
    <MSBuild Projects="@(BuildFile)"
             Properties="Configuration=%(Config.Configuration)"
             Targets="Build" />
  </Target>  
</Project> 
```

我使用以下命令启动 msbuild：

```
msbuild /m /p:BuildInParallel=true /t:BuildAll buildall.proj 
```

问题是我的解决方案有许多 .Net 项目，它们都具有相同的输出文件夹。这些项目也使用相同的外部程序集。

因此，经常会同时生成两个输出可执行文件，并同时复制它们的依赖关系。这会导致错误，例如：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(3001,9): 
error MSB3021: 
Unable to copy file "xxx\NLog.dll" to "D:\src\Blackbird\shared\bin\debug\NLog.xml". The process 
cannot access the file 'xxx\NLog.dll because it is being used by another process. 
```

我认为这意味着：“2 个不同的项目使用 NLog 并尝试同时将其程序集复制到输出文件夹中”...

有没有办法解决这个问题？我真的很想避免修改解决方案中的所有项目。

查看任务源代码“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(3001,9)”，我发现可以让 msbuild 重试副本：

```
<Copy
    SourceFiles="@(ReferenceCopyLocalPaths)"
    DestinationFiles="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')"
    SkipUnchangedFiles="$(SkipCopyUnchangedFiles)"
    OverwriteReadOnlyFiles="$(OverwriteReadOnlyFiles)"
    Retries="$(CopyRetryCount)"
    RetryDelayMilliseconds="$(CopyRetryDelayMilliseconds)"
    UseHardlinksIfPossible="$(CreateHardLinksForCopyLocalIfPossible)"
    Condition="'$(UseCommonOutputDirectory)' != 'true'"
    > 
```

我尝试设置变量 CopyRetryCount，CopyRetryDelayMilliseconds，...我希望如果复制失败，几毫秒后完成的另一个复制会成功。但是我一直无法设置这些参数。我怎样才能改变它们？

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T00:08:43.170

我找到了解决方案

```
<MSBuild Projects="@(BuildFile)"
  Properties="Configuration=%(Config.Configuration);Retries=10;RetryDelayMilliseconds=50"
  Targets="Build" /> 
```

它按预期工作，但现在它会在重试副本之前生成警告

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(3001,9): 
warning MSB3026: Could not copy 
"D:\src\xxx\System.Data.SQLite.pdb" to "..\Debug\System.Data.SQLite.pdb". 
Beginning retry 1 in 50ms. The process cannot access the file 
'..\Debug\System.Data.SQLite.pdb' because it is being used by another process. 
```

在我上次的测试中，它产生了 36 次这个警告！有没有办法抑制警告 MSB0326？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T08:28:49.330

一般来说，在构建期间运行的任何东西都不能在其输入上获得排他锁——只有共享读锁。似乎您的构建过程中的某些内容（可能是 NLog，无论是什么）违反了这一点 - 它对输入进行了排他锁定`"xxx\NLog.dll"`，因此当另一个 msbuild 节点尝试复制相同的输入时，它会失败。

重试是针对您的特定症状的合理解决方法 - 尽管不能保证总是成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T19:14:47.810

我有同样的问题。我需要在我的 AntiVirus 中添加适当的例外，以避免扫描 MsBuild 生成的 DLL。

# android - 如何修复 android scrollView 高度？

> ID：12413532
> 
> 赞同：0
> 
> 时间：2012-09-13T19:35:00.980
> 
> 标签：android, button, scrollview

我正在尝试创建一个包含多个按钮的布局，但所有按钮都没有显示在屏幕上，所以我使用了滚动视图，但现在我遇到了一个问题，因为背景图像（高分辨率）。现在我在后按钮下得到了很大的空白空间。请提出一个解决方案，如何修复 scrollView 高度，使其不显示按钮下的空间。

像这样：[白色背景区域是移动可见屏幕，白色区域是背景图像。](http://i.stack.imgur.com/2aNh4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:39:32.670

最好的解决方案是使用适当大小的图像。如果您只想显示部分图像，但图像是高分辨率图像，那么加载整个图像是在浪费资源。

您可以将 ScrollView 包含在另一个视图中，并将父视图的背景设置为您想要的任何背景。正确设置两个视图的高度，您应该会达到您想要的结果。

层次结构将是

*   查看（带背景图片）
    *   带有按钮的滚动视图

# ruby-on-rails - 使用嵌套资源时出现路由错误

> ID：12413536
> 
> 赞同：0
> 
> 时间：2012-09-13T19:35:27.417
> 
> 标签：ruby-on-rails, routing, nested-resources

我有一个帖子和评论模型。Comment 属于一个 Post，它嵌套在 Post in routes 下。评论来自 Posts#show。我的路线如下所示：

```
 resources :posts do
    resources :comments, only: [:create, :edit, :update, :destroy]
  end 
```

如果用户提交的评论未通过验证，则 URL 将如下所示：

```
app.com/posts/:id/comments 
```

如果出于某种原因，用户决定在地址栏中按 Enter，则会出现路由错误：

```
Routing Error
No route matches [GET] "/posts/21/comments"
Try running rake routes for more information on available routes. 
```

这让我觉得有些奇怪。我理解为什么会发生错误，但这似乎不是可用性的好主意。有没有办法防止这种情况发生？

在进行友好重定向时，这将成为一个更大的问题。当发生友好重定向时，Rails 将使用 GET 请求重定向到同一个 URL，再次导致路由错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:15:21.033

如果您的路线是

```
resources :posts do
  resources :comments, only: [:create, :edit, :update, :destroy]
end 
```

那么编辑的 URL 将是

```
app.com/posts/:post_id/comments/:id/edit 
```

其中 :id 是评论。如果验证失败，您应该重定向回此 URL。

```
def update
  @post = Post.find(params[:post_id])
  @comment = @post.comments.find(params[:id])

  if @comment.update_attributes(params[:comment])
    redirect_to(edit_post_path(@post))
  else
    redirect_to(edit_post_comment_path(@post, @comment), :notice => "update failed")
  end
end 
```

更好的是，因为您已经位于正确的编辑 URL，

```
...
  else
    flash[:error] = "Error - could not update comment"
    render :action => "edit"
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:48:33.410

我认为避免它的最佳方法是为这种情况创建一个路由并重定向到对您的应用程序有意义的任何地方。类似于以下内容：

```
match "/posts/:id/comments" => redirect {|params| "/posts/#{params[:id]}" } 
```

用户将被重定向到帖子页面，而不是那个路由错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:53:23.163

不是最好的，但其他解决方案可能是通过帖子的嵌套属性添加评论。

# batch-file - DOS 级联命令的优先顺序

> ID：12413543
> 
> 赞同：0
> 
> 时间：2012-09-13T19:36:01.167
> 
> 标签：batch-file, dos

下面的代码有什么问题，它旨在仅在干净返回时报告某些事情已完成：

```
echo Other operations here & (echo Trying to launching Firefox & "%ProgramFiles(x64)%"\Mozilla\Firefox\Firefox.exe && echo Firefox has closed successfully) & echo More operations that should be done regardless here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:58:05.787

我相信你的语法是正确的，但你的期望是错误的。

您正在启动一个窗口应用程序 - 您的命令不会等待 Firefox 在继续之前关闭。您的代码可能正确报告 Firefox 已启动。只有当 Firefox 无法***启动***（可能它在机器上不存在）时，才会绕过您的条件代码。

通常，如果您想启动一个 Windowed 应用程序并等待它完成（关闭）然后再继续，那么您将使用 START /WAIT。

```
echo previous command & (start /wait "" yourApp.exe && echo successful closure) & echo additional commmands 
```

但是，我不确定它是否适用于像 Firefox 这样的浏览器。许多浏览器由多个可执行文件组成。启动可执行文件可能会启动辅助进程，然后关闭。即使浏览器仍在运行，您的命令也会很高兴地报告启动 exe 成功返回。同样，我不确定 Firefox 是否会这样。但如果是这样，那么问题就会变得更加困难。您必须运行一个轮询进程以查看 Firefox 是否仍处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T22:21:28.190

对不起，这个语法有效，周围的代码还有其他我没有意识到的问题。不要以为有人知道调试 DOS“脚本”的更好方法，它几乎和 VBS 错误消息一样糟糕！

# facebook - 将网站喜欢转移到粉丝专页喜欢

> ID：12413545
> 
> 赞同：3
> 
> 时间：2012-09-13T19:36:10.160
> 
> 标签：facebook, facebook-like

据我了解，Facebook 还为没有自己粉丝页面的普通网站提供“点赞”。

现在，如果一个人有一定数量的这样的喜欢，并决定开设一个专门的粉丝专页，有没有办法将这些“喜欢”分别转移到粉丝专页，还是必须从零开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:38:41.907

不，没有。“喜欢”是按页面/网站计算的，不可转让。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:17:18.410

请在此处查看迁移文档：[https ://developers.facebook.com/docs/reference/plugins/like/migration/](https://developers.facebook.com/docs/reference/plugins/like/migration/)

有一个不推荐使用的功能，很快就会被删除，其中喜欢一个 URL 作为该页面的 Open Graph 元标记中定义的管理员会导致创建一个类似于常规 Facebook 页面的“Open Graph 页面”。

现在有一个迁移选项可用，它将创建一个常规的 Facebook 页面并将粉丝迁移到新页面，其详细信息在该文档中。我相信这就像在应用程序设置中启用迁移选项并导航到 Open Graph 页面的管理界面一样简单，其中将显示一个按钮来开始迁移

# javascript - Javascript：使用绝对路径设置 img src

> ID：12413546
> 
> 赞同：1
> 
> 时间：2012-09-13T19:36:10.460
> 
> 标签：javascript, html, canvas, html5-canvas, image

我正在尝试手动将 img src 设置为文件系统上的路径，然后我想在画布上绘制该图像。我在用：

```
 var curr_canv = document.getElementById('c_main').getContext('2d');
    var img = new Image();

    img.width = 525;
    img.height = 400;

    img.src = "..\AAAA\BBBB\CCCC\myimage.jpg";

    curr_canv.drawImage(img,0,0); 
```

但是在我这样做之后，画布上什么也没有画出来。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:38:17.587

您需要将路径设置为*webserver*中的绝对路径。
浏览器中的 Javascript 无法访问任何文件系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:39:24.840

您正在使用

```
\ 
(backslash) 
```

代替

```
/ 
(forward-slash). 
```

JavaScript`\`用作转义字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:42:40.360

是的，路径必须在 web 文件夹或其他可访问的路径中。你可以看到你的代码在这里一般工作：http: [//jsfiddle.net/pwm36/8/](http://jsfiddle.net/pwm36/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T19:48:20.107

简短的回答是“你不能那样做”。在浏览器中运行的 Javascript 无法直接访问用户的文件系统。这是一般浏览器的安全功能。

HTML5 有一个相对较新的 FileSystem API，但它可能仍然无法满足您的需求，因为浏览器仍然“被监禁”。您无法访问浏览器保留的目录之外的任何文件。

您可能会考虑拖放 API。用户可以将文件拖放到您指定的区域，我认为您可以使用 Javascript 访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T20:08:36.950

就像其他人说的那样，您需要使用网络服务器提供的图像。或者使用“file://”协议。

请注意，将图像加载到您希望仅在加载图像后才能绘制的异步大头针中。

```
img.onload = function() {
   curr_canv.drawImage(img,0,0);
} 
```

有关更多信息，请参阅[MDN](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images#drawImage)。

# asp.net - 如何在 Telerik 的 RadEditor 上设置默认字体？

> ID：12413551
> 
> 赞同：2
> 
> 时间：2012-09-13T19:36:24.327
> 
> 标签：asp.net, telerik, radeditor

必须有一种简单的方法来设置字体名称下拉列表的默认选定字体。我一直在 Telerik 网站和论坛上四处寻找，但找不到简单的方法。也许没有简单的方法，但也许我就是找不到。

这是我的 RadEditor：

```
 <telerik:RadEditor ID="RadEditor1" runat="server" ContentFilters="MakeUrlsAbsolute,ConvertToXhtml,RemoveScripts"
                    EditModes="All" EnableResize="false" Font-Bold="false" Font-Names="Arial" Font-Size="8pt"
                    Height="230px" MaxHtmlLength="3000" MaxTextLength="3000" NewLineMode="Br" Skin="Web20">
                    <Tools>
                        <telerik:EditorToolGroup>
                            <telerik:EditorTool Name="ImageManager" />
                            <telerik:EditorSeparator />
                            <telerik:EditorTool Enabled="true" Name="FontName" />
                            <telerik:EditorTool Enabled="true" Name="FontSize" />
                            <telerik:EditorSeparator />
                            <telerik:EditorTool Enabled="true" Name="BackColor" />
                            <telerik:EditorTool Enabled="true" Name="ForeColor" />
                            <telerik:EditorTool Enabled="true" Name="Bold" />
                            <telerik:EditorTool Enabled="true" Name="Italic" />
                            <telerik:EditorTool Enabled="true" Name="Underline" />
                            <telerik:EditorSeparator />
                            <telerik:EditorTool Enabled="true" Name="Copy" />
                            <telerik:EditorTool Enabled="true" Name="Cut" />
                            <telerik:EditorTool Enabled="true" Name="Paste" />
                            <telerik:EditorTool Enabled="true" Name="AjaxSpellCheck" Text="Spell Check" />
                        </telerik:EditorToolGroup>
                    </Tools>
                    <ImageManager MaxUploadFileSize="1048576" SearchPatterns="*.jpg,*.jpeg,*.png,*.gif,*.bmp, *.ico"
                        UploadPaths="~/images/" ViewPaths="~/images/" />
                </telerik:RadEditor> 
```

我希望你们中的一个可以告诉我！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:43:29.857

这篇文章可能会有所帮助[http://www.telerik.com/help/aspnet-ajax/editor-default-font-for-editable-content.html](http://www.telerik.com/help/aspnet-ajax/editor-default-font-for-editable-content.html)

您还可以使用以下代码在 OnClientLoad 事件中设置默认的 FontName 标头下拉值：

```
var tool = editor.getToolByName("FontName");
tool.set_value("Tahoma"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T21:25:04.557

这有效：

编辑：

```
 <telerik:RadEditor ID="myEditor" OnClientLoad="RadEditorLoad" runat="server" ... > 
```

处理程序：

```
 function RadEditorLoad(editor, eventArgs) {

            // Set the Editor Default Font to Arial

             editor.get_contentArea().style.fontFamily = 'Arial'
        } 
```

在以下位置找到： [http ://www.telerik.com/community/forums/aspnet-ajax/editor/radeditor-setting-font.aspx](http://www.telerik.com/community/forums/aspnet-ajax/editor/radeditor-setting-font.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T12:40:02.597

创建具有以下内容的 css 文件“RadEditorContentArea.css”：

```
body 
{  
   font-family: Arial!important;
} 
```

将这个 css 文件添加为编辑器 css 文件，如下所示

```
<telerik:RadEditor runat="server" ID="RadEditor1">
    <CssFiles>
        <telerik:EditorCssFile Value="~/RadEditorContentArea.css" />
    </CssFiles>
</telerik:RadEditor> 
```

查看此链接了解更多信息： http: [//docs.telerik.com/devtools/aspnet-ajax/controls/editor/managing-content/content-area-appearance/default-font-for-editable-content](http://docs.telerik.com/devtools/aspnet-ajax/controls/editor/managing-content/content-area-appearance/default-font-for-editable-content)

# c++ - 没有运行时库的c ++链接stl

> ID：12413553
> 
> 赞同：1
> 
> 时间：2012-09-13T19:36:28.580
> 
> 标签：c++, exception, stl, runtime, libraries

所以我在无法链接任何运行时库或使用异常的环境中工作。但是，我们想利用 BOOST 或 STL。最初我们尝试在 boost::container::string/vector/map/... 中进行链接，但无法解决链接器错误。

所以目前我正在尝试链接 STL 的标头，为此我定义了以下预处理器指令：

#define _HAS_ITERATOR_DEBUGGING 0

#define _HAS_EXCEPTIONS 0

我能够成功地与#include 链接，并且我能够实例化一个std::vector，但是当我调用push_back(32); 时 在向量上，我收到以下链接器错误：

```
error LNK2001: unresolved external symbol "void (__cdecl* std::_Raise_handler)(class stdext::exception const &)" (?_Raise_handler@std@@3P6AXAEBVexception@stdext@@@ZEA)
error LNK2001: unresolved external symbol _invoke_watson
error LNK2001: unresolved external symbol "void __cdecl std::_Xlength_error(char const *)" (?_Xlength_error@std@@YAXPEBD@Z) 
```

我们正在使用 Visual Studio 2010（它是默认编译器）。我们希望在不久的将来迁移到 vs2012，如果它有助于解决这些错误，可以加快迁移速度。

在这些限制下（没有例外，没有运行时库）有没有办法链接 boost 或 STL？

谢谢！我们真的不想因为我们的环境限制而错过 STL/boost 的好处

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:46:06.760

这取决于您需要什么，但可能不是。

C++ 标准库中的所有容器都需要内存分配，它包含在运行时库中。所以，你不能：

```
std::vector<>
std::set<>
std::map<>
std::list<> 
```

您也许可以使用

```
std::array<>
std::tuple<> 
```

但你也可能不会。

所有的流都需要内存分配，而且大多数流都需要文件 i/o 系统调用，所以它们也被淘汰了。

由于不能使用容器，迭代器的大部分功能不再有用。

好消息是大多数 Boost 支持仅是标头，因此您不需要链接到 Boost 库。对于 Boost，只需尝试`#include`使用适当的标头即可。如果它编译和链接，你赢了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T20:07:09.243

首先，澄清一点。您不需要 Boost 即可使用标准模板库。STL 很久很久以前作为 C++ 标准库的一部分并入 C++。您已经将它作为 Visual Studio 2010 的一部分。

您需要通过无法“链接任何运行时库”来澄清您的意思。您甚至不允许使用标准的 C 和 C++ 运行时库吗？这意味着没有 I/O，没有数学函数，没有`new`，没有`delete`，什么都没有。如果您被允许使用标准库，那么您已经拥有了 STL。

然而，这里有一个问题。这个问题是 C++ 标准库抛出异常。异常是标准库函数报告错误的首选机制。如果这些函数`std::bad_alloc`无法按要求分配内存，则它们会抛出`std::out_of_range`，当您使用检查事物是否在范围内的访问器时它们会抛出，等等。`throw`在这些标准头文件中有很多调用。

您的“不抛出异常”是否仅适用于您，还是也适用于标准库？如果它适用于库以及你的程序员，你可以注销 C++ 容器、C++ I/O、C++ 字符串和几乎所有的 Boost。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T20:12:25.377

为了消除标准库中的异常，您需要一个不使用异常的库构建。设置这些宏是构建和使用此类库的一部分。我不认为微软发布了他们的库的无异常版本，但如果他们这样做了，你需要链接到它而不是正常的。如果没有，您需要考虑从 Dinkumware（向 Microsoft 提供该库的公司）获得该库的许可。www.dinkumware.com。

# python - 使用 glob.has_magic 可以吗？

> ID：12413559
> 
> 赞同：5
> 
> 时间：2012-09-13T19:37:08.923
> 
> 标签：python, glob

我有一些代码想知道路径是否有 shell 通配符，这似乎是在中心位置定义的东西。我发现 glob.has_magic() 提供了这个（它只是一个正则表达式：）`'[*?[]'`。但是这个方法没有在模块`__all__`列表中列出，也没有出现在 pydoc 中。

我应该将此正则表达式复制到我的代码中吗？（我宁愿不要）

是否存在在未来版本的 python 中删除此方法的风险，因为它没有出现在文档中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:44:23.713

我个人会复制正则表达式。它不像 glob 模式的定义会永远改变，迫使你在你的代码中改变它。标准库没有使该方法在外部可用这一事实意味着不能保证它将来不会改变。我不会担心它将来会发生变化（出于与上述相同的原因：glob 模式的定义不会改变）但我担心如果模块的实现被重构它可能会被删除不再需要。

# php - php - 从 url 获取当前页面的名称并重新格式化字符串

> ID：12413560
> 
> 赞同：1
> 
> 时间：2012-09-13T19:37:15.040
> 
> 标签：php, string, url, url-rewriting, str-replace

我有以下代码（1）从 url 获取页面/部分名称（2）清理字符串，然后将其分配给变量。

我想知道是否有任何建议可以改进此代码以提高效率，可能减少 if / else 语句。

此外，任何关于我如何编码的建议，以便它占 url 结构中子目录的 x 数量。现在我以非常手动的方式最多检查 3 个。

我希望它处理任何网址，例如：www.domain.com/level1/level2/level3/level4/levelx/...

这是我当前的代码：

```
<?php

    $prefixName = 'www : ';
    $getPageName = explode("/", $_SERVER['PHP_SELF']);
    $cleanUpArray = array("-", ".php");

    for($i = 0; $i < sizeof($getPageName); $i++) {
        if ($getPageName[1] == 'index.php')
        {
            $pageName = $prefixName . 'homepage';
        }
        else
        {
            if ($getPageName[1] != 'index.php')
            {                   
                $pageName = $prefixName . trim(str_replace($cleanUpArray, ' ', $getPageName[1]));
            } 
            if (isset($getPageName[2]))
            {
                if ( $getPageName[2] == 'index.php' )
                {
                    $pageName = $prefixName . trim(str_replace($cleanUpArray, ' ', $getPageName[1]));
                }               
                else
                {
                    $pageName = $prefixName . trim(str_replace($cleanUpArray, ' ', $getPageName[2]));
                }
            }
            if (isset($getPageName[3]) )
            { 
                if ( $getPageName[3] == 'index.php' )
                {
                    $pageName = $prefixName . trim(str_replace($cleanUpArray, ' ', $getPageName[2]));
                }               
                else
                {
                    $pageName = $prefixName . trim(str_replace($cleanUpArray, ' ', $getPageName[3]));
                }
            }   
        }           
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:01:33.963

您当前正在使用`for`-loop，但没有将`$i`迭代器用于任何事情 - 所以对我来说，您可以完全放弃循环。从我所见，您只希望文件之前的目录名称为`$pageName`，如果没有先前的目录，请将其设置为`homepage`.

您可以传递`$_SERVER['PHP_SELF']`to[`basename()`](http://php.net/basename)以获取确切的文件名，而不是检查索引，并且还可以`/`像您当前所做的那样拆分以获取“最后一个目录”。要获取最后一个目录，可以跳过索引，直接使用[`array_pop()`](http://php.net/array_pop).

```
<?php

$prefixName = 'www : ';
$cleanUpArray = array("-", ".php");

$script = basename($_SERVER['PHP_SELF']);
$exploded = explode('/', substr($_SERVER['PHP_SELF'], 0, strrpos($_SERVER['PHP_SELF'], '/')));
$count = count($exploded);

if (($count == 1) && ($script == 'index.php')) {
    // the current page is "/index.php"
    $pageName = $prefixName . 'homepage';
} else if ($count > 1) {
    // we are in a sub-directory; use the last directory as the current page
    $pageName = $prefixName . trim(str_replace($cleanUpArray, ' ', array_pop($exploded)));
} else {
    // there is no sub-directory and the script is not index.php?
}

?> 
```

如果您想要更多的*面包*屑 - 感觉，您可能希望保留每个单独的目录。如果是这种情况，您可以将中间`if else`条件更新为：

```
} else if ($count > 1) {
    // we are in a sub-directory; "breadcrumb" them all together
    $pageName = '';
    $separator = ' : ';
    foreach ($exploded as $page) {
        if ($page == '') continue;
        $pageName .= (($pageName != '') ? $separator : '') . trim(str_replace($cleanUpArray, ' ', $page));
    }
    $pageName = $prefixName . $pageName;
} else { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T17:44:16.573

我发现这段代码很有帮助

```
$protocol = strpos(strtolower($_SERVER['SERVER_PROTOCOL']),'https') === 
FALSE ? 'http' : 'https';            // Get protocol HTTP/HTTPS

$host     = $_SERVER['HTTP_HOST'];   // Get  www.domain.com

$script   = $_SERVER['SCRIPT_NAME']; // Get folder/file.php

$params   = $_SERVER['QUERY_STRING'];// Get Parameters occupation=odesk&name=ashik

$currentUrl = $protocol . '://' . $host . $script . '?' . $params; // Adding all

echo $currentUrl; 
```

# java - 不从文本输入写入文本文件

> ID：12413561
> 
> 赞同：0
> 
> 时间：2012-09-13T19:37:16.693
> 
> 标签：java, jtextfield

我已经编写了“将文本字段的内容写入文本文件”的代码。它没有错误，但它没有在文本文件中写入任何内容！任何人都可以帮助我并告诉我我的错误吗？或编辑代码并再次放置整个代码。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
    jButton1.addActionListener(new ActionListener(){
        public void actionPerformed(final ActionEvent e){
            handleActionPerformed(e);
        }
    });
}                                        

/**
* @param args the command line arguments
*/

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewJFrame().setVisible(true);
        }
    });
}

//do you really need to pass ActionEvent in this case?
protected void handleActionPerformed(ActionEvent e) {
    BufferedWriter writer = null;
    try
    {
        String text = jTextField1.getText(); //get the text from the text field
        writer = new BufferedWriter(new FileWriter("D:\\Definition.txt"));
        writer.write(text); //write it in the file
        writer.flush(); //flush the write-buffer
    }
    catch (IOException ioe)
    {
        ioe.printStackTrace();
    }
    finally { //always close the stream in finally block
        try {
            if(writer != null)
                writer.close();
        }
        catch(IOException b) {
            b.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:47:40.200

`handleActionPerformed(...)`什么也没做。我相信这应该有效......

```
jButton1.addActionListener(new ActionListener() {
  public void actionPerformed(final ActionEvent e) {
      handleActionPerformed(e);
  }                                     
}

//do you really need to pass ActionEvent in this case?
protected void handleActionPerformed(ActionEvent e) { 
 BufferedWriter writer = null;
 try
 {
   String text = jTextField1.getText(); //get the text from the text field
   writer = new BufferedWriter(new FileWriter("C:\\Definition.txt"));
   writer.write(text); //write it in the file
   writer.flush(); //flush the write-buffer
 }
 catch (IOException ioe)
 {
   ioe.printStackTrace();
 } 
 finally { //always close the stream in finally block
   try {
    if(writer != null) 
       writer.close();
   } catch(IOException e) {
     e.printStackTrace();
   } 
 }
} 
```

# r - lm() 线性模型 - 属性

> ID：12413562
> 
> 赞同：1
> 
> 时间：2012-09-13T19:37:18.967
> 
> 标签：r, lm

所以我对 lm() 命令有点困惑。我试过了`lm(x~y, mydata)`，`lm(y~x, mydata)`我得到了不同的输出。那么这只是将哪个变量用作 x 以及将哪个变量用作 y 吗？很抱歉问这样一个菜鸟问题，但我不确定，我找不到任何解释该命令参数的东西！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T19:43:19.563

答案可以在该功能的帮助页面上找到。在该`Details`部分中，我们有：

`A typical model has the form response ~ terms where response is the (numeric) response vector and terms is a series of terms which specifies a linear predictor for response.`

还有更多详细信息（也从`lm`帮助页面链接到`formula`。在 的详细信息部分`formula`，我们有：

`The ~ operator is basic in the formation of such models. An expression of the form y ~ model is interpreted as a specification that the response y is modelled by a linear predictor specified symbolically by model.`

总而言之，您以符号术语定义模型，其中 LHS 是您的响应变量，而 RHS 是您的预测变量。您会得到不同的答案，因为在一个模型中，`y`是您的响应变量，而另一个是`x`。

如果您不知道，您可以使用`?`命令行访问几乎所有功能的帮助页面，即`?lm`或`?formula`.

# c# - 实体框架代码优先方式——一对一关系

> ID：12413570
> 
> 赞同：1
> 
> 时间：2012-09-13T19:38:06.900
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我的模型协会（我相信）是一对一的：

```
public class Account
{
    [Key]
    [ForeignKey("BlockedAccount")]
    public virtual Guid AccountId { get; set; }
    public virtual string UserName { get; set; }

    public virtual BlockedAccount BlockedAccount { get; set; }
}

public class BlockedAccount
{
    [Key]
    public virtual Guid BlockedAccountId { get; set; }
    public virtual int BanLevel { get; set; }
    public virtual DateTime BannedDate { get; set; }
    public virtual DateTime ExpirationDate { get; set; }
    public virtual string Reason { get; set; }
} 
```

但是当我尝试使用它时，程序崩溃了，它给了我以下异常：

> INSERT 语句与 FOREIGN KEY 约束“FK_dbo.Accounts_dbo.BlockedAccounts_AccountId”冲突。冲突发生在数据库“Accounts”、表“dbo.BlockedAccounts”、列“BlockedAccountId”中。该语句已终止。

我在这里做错了什么？我想`AccountId`指出`BlockedAccountId`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:46:57.020

你是如何附加你的实体的？您不需要实际设置外键，只需附加到导航属性即可建立连接。这段代码，上面的模型对我有用：

```
 public class Account
{
    [Key]
    [ForeignKey("BlockedAccount")]
    public virtual Guid AccountId { get; set; }
    public virtual string UserName { get; set; }

    public virtual BlockedAccount BlockedAccount { get; set; }
}

public class BlockedAccount
{
    [Key]
    public virtual Guid BlockedAccountId { get; set; }
    public virtual int BanLevel { get; set; }
    public virtual DateTime BannedDate { get; set; }
    public virtual DateTime ExpirationDate { get; set; }
    public virtual string Reason { get; set; }

    public BlockedAccount()
    {
        BannedDate = DateTime.Now;
        ExpirationDate = DateTime.Now;
    }
}

public class Model : DbContext
{
    public DbSet<BlockedAccount> BlockedAccounts { get; set; }
    public DbSet<Account> Accounts { get; set; }
}
class Program
{

    static void Main(string[] args)
    {
        var b = new BlockedAccount()
            {
               BlockedAccountId = Guid.NewGuid()
            };
        var a = new Account();

        a.BlockedAccount = b;
        Model m = new Model();
        m.Accounts.Add(a);
        m.SaveChanges();
    }
} 
```

![在此处输入图像描述](../Images/986132086a2a757bfe918f7b2fef300e.png)

# java - 从 Stream 中读取一行并立即返回

> ID：12413573
> 
> 赞同：0
> 
> 时间：2012-09-13T19:38:38.850
> 
> 标签：java

我应该使用哪种方法（以及哪个类）从给定的 InputStream 读取一行，如果没有要读取的行，或者实际上在任何情况下，立即返回？

为清楚起见，我想知道哪个类提供了从 InputStream 读取一行并立即返回的方法 - 例如，如果没有要读取的行，则不要阻塞。

例如，据我所知， BufferedReader.readLine() 确实会阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:50:29.653

```
public final String pollLine(final BufferedReader reader)
    throws IOException {
   /* pick a reasonable look ahead */
  reader.mark(512);
  while (reader.ready()) {
    final int ch = reader.read();
    if (ch == -1
            || Character.getType(ch) == Character.LINE_SEPARATOR) {
      reader.reset();
      return reader.readLine();
    } 
  }
  reader.reset();
  return null;
} 
```

抱歉有任何错误，我已经在手机的小触摸屏键盘上输入了这个回复。

要回答您的问题，您可以查询[`Reader.ready`](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#ready())以确定您是否可以安全地阅读而不阻塞。

> **回报：**
> 
> 如果保证下一个 read() 不会阻塞输入，则为 true，否则为 false。请注意，返回 false 并不能保证下一次读取将阻塞。

# sass - DIV 不使用带有@omega 的 Susy 框架清除

> ID：12413575
> 
> 赞同：0
> 
> 时间：2012-09-13T19:38:43.823
> 
> 标签：sass, susy-compass

我正在尝试使用 Susy Compass 框架将 2 个 div 向右浮动并遇到一个清除问题：

```
<div class="div-1">
  <h2>DIV 1</h2>
</div><!--end div-1-->

<div class="div-2">
  <h2>DIV2</h2>
</div><!--end div-2-->

<div class="div-3">
  <h2>DIV 3</h2>
</div><!--end div-3-->

<div class="div-4">
  <h2>DIV 4</h2>
</div><!--end div-4-->

<div class="div-5">
  <h2>DIV 5</div>
</div><!--end div-5--> 
```

这是我的 Susy 布局代码：

```
#detail{

    .div-1{
        @include breakpoint($breakpoint-md){
            @include span-columns(7, 12);
            @include pre(1);
            background-color:pink;
        }
    }

    .div-2{
        @include breakpoint($breakpoint-md){
            @include span-columns(7,12);
            @include pre(1);
        }
    }

    .div-3{
        @include breakpoint($breakpoint-md){
            @include span-columns(7,12);
            @include pre(1);
        }
    }

    .div-4{
        @include breakpoint($breakpoint-md){
            @include span-columns(3,12);
            @include suffix(1);
            //@include omega;
            background-color:blue;
        }
    }

    .div-5{
        @include breakpoint($breakpoint-md){
            @include span-columns(3,12);
            @include post(1);
            //@include omega;
            background-color:orange;
        }
    }
} 
```

为了举例说明这是如何渲染的，下面是一个屏幕截图：

![在此处输入图像描述](../Images/98da890eeb95c9703b67fbff87b8cbe2.png)

如您所见，`div-3`并`div-5`没有清除到顶部，与`div-1`.

我想也许我可以使用`@alpha`mixin，但它在 Susy 1.0（我正在使用）中已被弃用。我也尝试过使用`@omega`on`div-3`并且`div-5`没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:16:04.680

这就是 CSS 浮动的工作原理。浮点数永远不会对齐到比前一个元素（div2）更高的位置。苏西对此无能为力。

您必须对标记进行调整才能使此布局正常工作 - 切换 div 的顺序，或在 div 1 和 2 周围添加包装器（我建议保留源顺序）。

或者，如果你想变得棘手，你可以处理 div 3 和 5 而不浮动它们。像这样的东西（为简单起见忽略断点）：

```
.div3, .div5 {
  @include pre(8);
  @include suffix(1);
} 
```

这应该将它们推到右侧，同时忽略浮动的 div 1、2 和 4。

# c - 使用 gcc 和 glib 的奇怪行为？

> ID：12413577
> 
> 赞同：0
> 
> 时间：2012-09-13T19:38:53.913
> 
> 标签：c, gcc, glib

它只在我在 if 语句之后再次打印 b 时打印描述，真的很奇怪的行为，当我删除最后一行时它不打印`description is ...`有谁知道为什么会发生这种情况以及我该如何解决这个问题？谢谢

```
char * b;
if (list!= NULL){
b = strdup ( (char *)g_object_get_data(G_OBJECT(list->data), "description") );
printf(" description is %s ", b);
}
printf("\nprinting b: %s\n", b); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:40:29.217

它似乎`stdout`是行缓冲的，即`printf`囤积输出，直到遇到换行符或其缓冲区填满。在第一个中添加换行符`printf`：

```
printf(" description is %s\n", b); 
```

为了*确保*输出缓冲区被刷新，你可以说：

```
fflush(stdout); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:42:50.767

您也可以随时使用 fflush() 刷新缓冲区

# javascript - 如何动态插入jquery代码

> ID：12413578
> 
> 赞同：0
> 
> 时间：2012-09-13T19:38:53.980
> 
> 标签：javascript, jquery, html, dhtml

我正在尝试在动态加载的内容上使用 jQuery 丰富的动画功能。

我可以像这样动态地将脚本插入到元素中：

```
var element = document.createElement("div");
element.innerHTML = "some html here";

var script  = document.createElement("script");
script.type = "text/javascript";
script.text = 'alert("Alert!");';

element.appendChild (script); 
```

当我尝试将 jquery 代码插入脚本元素时会出现问题。这不起作用并导致脚本根本不运行。

```
var element = document.createElement("div");
element.innerHTML = "some html here";

var script  = document.createElement("script");
script.type = "text/javascript";
script.text = 'alert("Alert!");\n';
script.text = script.text+'$("div").animate({height:300,opacity:0.4},"slow");\n';

element.appendChild (script); 
```

我可以成功地附加 javascript 代码来更改我想要的元素，但是使用 jquery 函数会简化事情。

使用 firebug，我可以看到脚本元素已加载到 dom 中，但是当我将 jquery 代码添加到其中时，没有任何反应，甚至没有警报。

我已将 jquery 源文件包含在我的主文档中，并将我的所有代码包装到一个 window.addEventListener('load', function()) 中，以便在页面完成加载时调用启动上述代码的函数。

有没有办法动态创建对 jquery 函数的调用？我会以正确的方式解决这个问题吗？我已经被难住了一段时间，谷歌还没有为我解决这个问题，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:45:21.387

这应该做你想要的：

```
$('body').append('<s' + 'cript>console.log("lol");</script>'); 
```

但是为什么你不将你的代码包装成一个你可以随时调用的函数呢？

```
function iAnimateThings() {
   $("div").animate({height:300,opacity:0.4},"slow");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:45:55.520

嘿，您的代码没有问题，您只是在这一行错过了一个引号

```
script.text = script.text+'$("div").animate({height:300,opacity:0.4},"slow")'; 
```

这是你的工作小提琴 [http://jsfiddle.net/vYut9/](http://jsfiddle.net/vYut9/)

# jquery - jQuery 跨域调用

> ID：12413579
> 
> 赞同：0
> 
> 时间：2012-09-13T19:38:54.693
> 
> 标签：jquery, python, cross-domain

我正在尝试使用 jQuery 进行跨域调用，但到目前为止非常不成功。我的 HTML 文件位于我的“C:/Temp”文件夹名称“test.html”上。我的 HTML 代码如下——

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>My Page</title> 
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
</head> 
<body> 
<input id="first_name" type="text" value="khan" />
<input id="clickme" type="button" value="Click Me!"/>

<script type="text/javascript">
    $(document).ready(function() {
        $("#clickme").click(function(){
            $.ajax({
                url: 'http://localhost:8008/qm/profile/' + $("#first_name").val() + "/",
                type: "GET",
                dataType: "jsonp",
                crossDomain : true,
                success: function(response)
                    {
                        alert(response.responseText);
                    },
                error: function()
                    {
                        alert("fail");
                    },
            });
        });
    });

</script>

</body>
</html> 
```

现在在服务器端，我有一个看起来像这样的小 Python 代码——

```
def profile(request, username):
    fullname = ''
    if username == 'khan':
        fullname = 'Khan Hannan'
    data = {'fullname': fullname}
    print data
    return HttpResponse(json.dumps(data)) 
```

python 代码位于 DJango 项目中。如果我直接调用 URL ('http://localhost:8008/qm/profile/khan')，我会从服务器收到 JSON 响应，但是当我通过 jQuery 输入相同的 URL 时，我不会'没有得到任何回应，但它失败了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:44:03.303

JSONP 的工作原理是将 JSON 包装在一个函数中，然后执行该函数以获取代码对象。

这是通过向服务器发送一个回调查询字符串值来完成的，然后它假设用它来包装 JSON 对象。

如果您检查发送到您的服务器的请求，您应该会看到一个正在发送的值，称为`callback=jquery[long number]`.

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:53:45.653

您需要创建一个 JSONP 回调构造，其中 JSON 返回值被传递给在`callback`请求参数中命名的回调函数。

Django Snippets 站点有一个[方便的 JSONP 装饰器，](http://djangosnippets.org/snippets/2208/)它会为您处理这个问题，并验证用户是否也已通过身份验证。

如果您不想使用该装饰器，至少`callback`在您的响应中使用请求参数，并设置正确的内容类型：

```
return HttpResponse("%s(%s)" % (request.GET['callback'], json.dumps(data)),
    content_type='application/javascript')) 
```

# blackberry - 黑莓信使桌面客户端

> ID：12413580
> 
> 赞同：0
> 
> 时间：2012-09-13T19:38:58.740
> 
> 标签：blackberry, bb-messenger

我想开发一个 Blackberry Messanger 桌面客户端，类似于[Fixmo Web Messenger](http://fixmo.com/fwm)但开源。这个想法是通过 USB 或 Wi-Fi 连接智能手机并从计算机使用 BBM。有人知道任何库或文档可以连接到 BBM 吗？

编辑：我发现了这个，[https](https://developer.blackberry.com/devzone/appworld/bbm) ://developer.blackberry.com/devzone/appworld/bbm 。我会看看它是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:51:37.727

目前无法使用当前的 BBM API 执行此操作。

# asp.net-mvc-3 - 联系表格电子邮件不起作用

> ID：12413581
> 
> 赞同：0
> 
> 时间：2012-09-13T19:39:06.610
> 
> 标签：asp.net-mvc-3, razor

我创建了一个联系人页面和联系人模型，其中包含`From` `Subject`和`Message`作为字符串值。现在，当我尝试使用以下代码从我的开发环境发送电子邮件时，它不起作用。我浏览了一下寻找解决方案，但有几件事我不清楚，因为我没有经常处理这个问题。

这是我用来发送电子邮件的方法。评论部分也是尝试之一。我得到的错误是：`System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond`

我意识到这可能与我在 dev.env 上有关，是吗？我究竟做错了什么？

```
public class Email
{
    public void Send(Contact contact)
    {
        MailMessage mail = new MailMessage(
            contact.From,
            ConfigurationManager.AppSettings["ContactEmail"],
            contact.Subject,
            contact.Message);
        //new SmtpClient().Send(mail);
        WebMail.Send(ConfigurationManager.AppSettings["ContactEmail"], contact.Subject, contact.Message, null, null, null, false, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:56:16.453

你可以这样发送邮件吗？

```
internal static void SendEmail(MailAddress fromAddress, MailAddress toAddress, string subject, string body)
{
    var message = new MailMessage(fromAddress, toAddress)
                      {
                          Subject = subject,
                          Body = body
                      };

    var client = new SmtpClient("smtpServerName");
    client.Send(message);
} 
```

参考。[asp.net mvc框架，自动发送邮件](https://stackoverflow.com/questions/461361/asp-net-mvc-framework-automatically-send-e-mail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:42:03.793

我认为您需要检查配置文件中的端口号。

# java - 如何用OpenGL更精确地绘制贝塞尔曲线？

> ID：12413582
> 
> 赞同：0
> 
> 时间：2012-09-13T19:39:16.103
> 
> 标签：java, opengl, graphics, bezier

我有一组点，我想使用这组点绘制贝塞尔曲线。对我来说重要的是曲线应该以精确的方式绘制，即非常接近原始数据值。

我使用以下代码：

```
gl.glMap1f(GL.GL_MAP1_VERTEX_3,0.0f,1.0f,3,numLines+1,ctrlpointBuf);
gl.glEnable(GL.GL_MAP1_VERTEX_3);

gl.glBegin(GL.GL_LINE_STRIP);
for (int i=0;i<=100;i++)
    gl.glEvalCoord1f(i/100.0f);
gl.glEnd(); 
```

使用这段代码，我得到了这张图片（蓝绿色 - 原始线，黑色 - 贝塞尔曲线），这很难说是精确的。

![在此处输入图像描述](../Images/e7c98f310491ec2a5247804e800b2458.png)

有没有办法让曲线更接近原点？

# c# - 表达式树可能不包含使用可选参数的调用或调用

> ID：12413583
> 
> 赞同：196
> 
> 时间：2012-09-13T19:39:19.910
> 
> 标签：c#, asp.net-mvc-3

> 表达式树可能不包含使用可选参数的调用或调用

```
return this.RedirectToAction<MerchantController>(x => x.Edit(merchantId)); 
```

其中 edit 有第二个可以为空的参数。

为什么是这样？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2017-10-11T13:13:40.867

尝试使用 Mock.setup 模拟具有多个默认参数的方法时出现相同的消息。我只需要在 lambda 中添加其他参数。

```
void someMethod(string arg1 = "", string arg2 = "")

mockedObject.Setup(x => x.someMethod(It.IsAny<string>(), It.IsAny<string>())) 
```

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2012-09-13T19:55:02.190

底层[表达式树 API](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.call.aspx)不支持可选参数。

对于 IL 编译的代码，C# 编译器会在编译时插入默认值（硬编码），因为 CLR 不支持在未显式提供参数时调用带有可选参数的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-16T13:58:50.353

错误：“异常树可能不包含使用选项参数的调用或调用”

为什么：因为您在调用方法时没有提供可选参数。主要是你在使用 IAsyncProxy 服务对象时通过 .net 核心获得这个。

修复：传递所有可选参数值，如果你可以使用默认值。

# c++ - Visual Studio中stricmp和_stricmp的区别？

> ID：12413585
> 
> 赞同：12
> 
> 时间：2012-09-13T19:39:29.543
> 
> 标签：c++, case-sensitive, string-comparison, case-insensitive

我可能会问一个愚蠢的问题，但我真的无法通过谷歌找到答案，而且我仍然是使用 MSVS 的初学者。

我最近需要使用函数来比较两个字符串。我不明白的是stricmp和_stricmp的区别。它们都可用于比较字符串并返回相同的结果。我去检查他们：

```
char string1[] = "The quick brown dog jumps over the lazy fox";
char string2[] = "The QUICK brown dog jumps over the lazy fox";

void main( void )
{
   char tmp[20];
   int result;
   /* Case sensitive */
   printf( "Compare strings:\n\t%s\n\t%s\n\n", string1, string2 );
   result = stricmp( string1, string2 );
   if( result > 0 )
      strcpy( tmp, "greater than" );
   else if( result < 0 )
      strcpy( tmp, "less than" );
   else
      strcpy( tmp, "equal to" );
   printf( "\tstricmp:   String 1 is %s string 2\n", tmp );
   /* Case insensitive */
   result = _stricmp( string1, string2 );
   if( result > 0 )
      strcpy( tmp, "greater than" );
   else if( result < 0 )
      strcpy( tmp, "less than" );
   else
      strcpy( tmp, "equal to" );
   printf( "\t_stricmp:  String 1 is %s string 2\n", tmp );
} 
```

结果表明它们是相同的：

```
Compare strings:
    The quick brown dog jumps over the lazy fox
    The QUICK brown dog jumps over the lazy fox

    stricmp:   String 1 is equal to string 2
    _stricmp:  String 1 is equal to string 2 
```

我想知道为什么...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T20:40:09.640

`stricmp`是 POSIX 函数，而不是标准 C90 函数。为避免名称冲突，Microsoft 弃用了不一致的名称 ( `stricmp`) 并建议`_stricmp`改用。功能上没有区别（`stricmp`只是 的别名`_stricmp`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T20:35:05.030

对于许多库函数，包括所有`<string.h>`函数，下划线前缀版本是/是微软的想法。我不记得具体是什么。

没有下划线的版本是高度可移植的。如果代码将由另一个编译器处理，则必须以某种方式处理使用`_stricmp()`、等的代码——编辑、等等。`_strcpy()``#defined`

# javascript - Twitter Bootstrap typeahead：使用“this”获取上下文/调用元素

> ID：12413594
> 
> 赞同：19
> 
> 时间：2012-09-13T19:39:58.903
> 
> 标签：javascript, jquery, twitter-bootstrap, closures, typeahead

我正在使用Twitter Bootstrap 2.1.1 和 jQuery 1.8.1的[Typeahead组件](http://twitter.github.com/bootstrap/javascript.html#typeahead)

我正在尝试从 typeahead 的`updater`函数中访问文本框元素。这是我当前的代码，效果很好：

```
$('#client-search').typeahead({
    source: function (query, process) {
        $.get(url, { query: query }, function (data) {
            labels = [];
            mapped = {};
            $.each(data, function(i,item) {
                mapped[item.label] = item.value;
                labels.push(item.label);
            });
            process(labels);
        });
    }
    ,updater: function (item) {
        $('#client-id').val(mapped[item]);
        return item;
    }
    ,items: 10
    ,minLength: 2
}); 
```

我在同一页面上有许多预先输入的搜索框。每个搜索框都有一个 id`#xxx-search`和一个对应的 id 隐藏输入`#xxx-id`。我想通过执行以下操作对所有内容重新使用相同的代码：

```
$('#client-search, #endClient-search, #other-search').typeahead({

    ...

    ,updater: function (item) {
        var target = $(this).attr('id').split('-')[0] + '-id';
        $('#'+target).val(mapped[item]);
        return item;
    }

    ... 
```

我认为这`this`将引用正在使用的文本框元素，但显然不是，因为我在 firebug 中得到一个未定义的错误：

```
$(this).attr("id") is undefined 
```

当我使用`this`而不是`$(this)`，我得到：

```
this.attr is not a function 
```

任何人都可以帮助完成这项工作吗？

* * *

**更新：答案，还有更多！**

感谢 benedict_w 在下面的回答，这不仅现在可以完美地工作，而且在可重用性方面我也做得更好。

这是我`<input>`的样子：

```
<input type="text" autocomplete="off"
    id="client-search"
    data-typeahead-url="/path/to/json"
    data-typeahead-target="client-id">
<input type="hidden" id="client-id" name="client-id"> 
```

请注意搜索框如何引用隐藏的 ID。这是新的js：

```
$(':input[data-typeahead-url]').each(function(){
    var $this = $(this);
    $this.typeahead({
        source: function (query, process) {
            $.get($this.attr('data-typeahead-url'), { query: query }, function (data) {
                labels = [];
                mapped = {};
                $.each(data, function(i,item) {
                    mapped[item.label] = item.value;
                    labels.push(item.label);
                });
                process(labels);
            });
        }
        ,updater: function (item) {
            $('#'+$this.attr('data-typeahead-target')).val(mapped[item]);
            return item;
        }
        ,items: 10
        ,minLength: 2
    });
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T19:44:26.177

您在另一个函数内部，因此您需要保存对外部闭包中元素的引用，然后可以将其传递给内部闭包的事件处理程序。您可以通过`$.each()`调用循环选择器来执行此操作，每次都保存对元素 (this) 的引用 - 例如

```
$('#client-search, #endClient-search, #other-search').each(function() {
    var $this = $(this);
    $this.typeahead({
        ...

        ,updater: function (item) {
            var target = $this.attr('id').split('-')[0] + '-id';
            $('#'+target).val(mapped[item]);
            return item;
        }
        ...
     }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-03T10:20:04.137

接受的答案是一个很好的答案，但只是想分享一个实际上不需要外部封闭的替代方案。我正在使用 bootstrap v2.3.1，您可以从`this.$element`.

例如：

```
$(':input[data-typeahead-url]').typeahead({
    source: function (query, process) {
        $.get(this.$element.attr('data-typeahead-url'), { query: query }, function (data) {
            labels = [];
            mapped = {};
            $.each(data, function(i,item) {
                mapped[item.label] = item.value;
                labels.push(item.label);
            });
            process(labels);
        });
    }
    ,updater: function (item) {
        $('#'+this.$element.attr('data-typeahead-target')).val(mapped[item]);
        return item;
    }
    ,items: 10
    ,minLength: 2
}); 
```

# ruby-on-rails - 智能复数总是智能的？

> ID：12413599
> 
> 赞同：10
> 
> 时间：2012-09-13T19:40:11.860
> 
> 标签：ruby-on-rails, model-view-controller, grammar

Ruby on rails 对模型、视图和控制器名称使用单数和复数约定。这非常好，因为可能有一个名为的模型`user`和一个名为 的控制器`users`。这几乎适用于每个单词，例如 user(s)、tree(s)、book(s)，因此每个只有 s 的单词构成复数形式。

但是，那些不需要 s 来构成复数形式的单词，例如以字母“y”结尾的单词呢？例如，城市和城市？rails 知道区别还是我需要写`city`and `citys`，即使它在语法上是错误的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T19:54:02.923

Rails 知道很多复数形式。它可以处理“城市”，例如：

```
1.9.2p318 :001 > "city".pluralize
 => "cities" 
1.9.2p318 :002 > "cities".singular
 => "city" 
```

但是，您可能会发现它不知道并且不会学习的复数形式。请参阅文档`ActiveSupport::Inflector`

> Rails 核心团队已经声明不会接受用于变形库的补丁，以避免破坏可能依赖错误变形的遗留应用程序。如果您发现不正确的变形并在您的应用程序中需要它，您需要自己更正它（如下所述）。

你如何自己纠正？在`config/initializers/inflections.rb`. 例如：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.plural /^(.*)(l)ens$/i, '\1\2enses'
end 
```

再次查看[ActiveSupport::Inflector](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)的文档，了解更多关于如何教 Rails 新的变形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:56:11.437

对于很多常见的，它知道如何很好地处理它。您可以通过执行以下操作在 IRB 中自己尝试：

```
require 'active_support/all'
ActiveSupport::Inflector.pluralize("city") 
```

你会得到一个值为“城市”的字符串。您还可以按照中列出的步骤添加和调整变形`config/initializers/inflections.rb`

# jsf - 使用 h:message 时去掉多余的消息

> ID：12413601
> 
> 赞同：0
> 
> 时间：2012-09-13T19:40:20.730
> 
> 标签：jsf, validation, message

在我的 JSF 2.0 应用程序中，每当验证失败时，我都会向用户显示一条带有`<h:message>`标记的消息。我总是在页面顶部收到一条额外的消息以及预期的消息。我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:44:21.947

显然您在`<h:messages>`页面顶部使用了 a 。如果您将其设置为仅显示全局消息（具有`null`客户端 ID 的消息，如 中`context.addMessage(null, message)`），那么客户端特定的消息将不会在那里重复。

```
<h:messages globalOnly="true" /> 
```

# c# - 在 Web 应用程序中使用 Highcharts javascript

> ID：12413606
> 
> 赞同：0
> 
> 时间：2012-09-13T19:40:41.437
> 
> 标签：c#, javascript, .net, highcharts

我正在我的 .Net 应用程序中试验 Highcharts。

我有一些需要包含的数据，但似乎无法弄清楚在哪里添加它。

```
 /*X axis coordinates*/
     List<int> lstXaxis = new List<int>();
     lstXaxis.Add(2007);
     lstXaxis.Add(2008);
     lstXaxis.Add(2009);
     lstXaxis.Add(2010); 
```

我需要设置公共属性，以便我的 aspx 页面可以访问它。

我是否在 aspx 页面后面的 C# 代码中包含这两个命令？

```
 public string Series1 { get; set; }
      public string Xaxis { get; set; } 
```

并使用访问器来转换 x 轴数据？

```
 JavaScriptSerializer oSerializer = new JavaScriptSerializer();
      Xaxis= oSerializer.Serialize(lstXaxis); 
```

我引用以下站点作为启动点： [http ://deebujacob.blogspot.com/2011/05/aspnet-and-highcharts.html](http://deebujacob.blogspot.com/2011/05/aspnet-and-highcharts.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:07:51.530

我发现了另一种更简单的在 .NET 中生成图表的方法。想象一下生成这样的图表；

```
 DataTable tbl; //your datatable with chart info.. 

//the series you would like to draw, first value corresponds to the name of the column, 2nd value to the title you would to use for that chart
string[] serieslist = { "allorders,All orders", "shippedorders, Shipped orders", "rejectedorders,Rejected orders" };

//getting the chart string
string chartString = chart.DrawChart(tbl, serieslist, "yearly-report", "date", "Yearly sales report", "my subtitle", "column", false); 
```

用 3 行绘制图表！

查看此博客输入以获取更多信息。[http://www.phronesisweb.com/blog/using-highcharts-with-net-without-any-extra-control-generating-a-highchart-chart-in-just-one-method/](http://www.phronesisweb.com/blog/using-highcharts-with-net-without-any-extra-control-generating-a-highchart-chart-in-just-one-method/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:23:04.273

xAxis 列表位于代码隐藏中。可能在页面加载时。

您提供的两个代码段：

```
 public string Series1 { get; set; }
  public string Xaxis { get; set; } 
```

和

```
 JavaScriptSerializer oSerializer = new JavaScriptSerializer();
  Xaxis= oSerializer.Serialize(lstXaxis); 
```

进入将在其上显示图表的任何页面的代码隐藏。

# excel - Excel 如果该行被标记，则为该列分配一个值

> ID：12413609
> 
> 赞同：0
> 
> 时间：2012-09-13T19:41:02.297
> 
> 标签：excel, csv

我有以下 csv 文件：

```
name, new_name, flag
a,,0
b,,1
c,c,0
d,,1 
```

我想让“new_name”列中的值成为“flag”行值为 1 的行中“name”列的值。我必须使用应用程序来执行此操作吗？或者有没有办法将这个方程放入“标志”列，然后将公式粘贴到该列的每一行中？

非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:48:37.797

如果您可以使用四列设置：

```
姓名 | 新名称 | 标志 | real_new_name
一个 0            
乙 1 乙
抄送 0 分
天 1 天

```

然后你可以设置`real_new_name`公式`=IF(C2=1,A2,B2)`并填写它。

否则，您将需要编写一个遍历每一行并在 flag=1 时执行的脚本。

# autocomplete - 在 Intellij 中显示带有自动完成参数信息的 Javadoc

> ID：12413610
> 
> 赞同：14
> 
> 时间：2012-09-13T19:41:04.060
> 
> 标签：autocomplete, intellij-idea, javadoc

在 Eclipse 中，当您要为方法输入参数时，自动完成功能将显示所有可能的组合以及与每个组合关联的 Javadoc。这也可以手动触发。

我试图让 Intellij 显示相同的信息，但我只能让它通过 Control-P 显示缩短的参数信息。有没有办法也显示相应的 Javadocs？

对于下面的示例，在 Eclipse 中，您可以获取每个不同 Date 构造函数的 Javadoc，以便在输入任何内容之前显示出来。但是在 Intellij 中，我只能在输入所有参数然后对该方法执行 Control-Q 后才能显示 JavaDocs。我无法在键入时显示 Javadocs。

在这种情况下，这是微不足道的，但有时参数名称没有标记，因此 Javadocs 可以很好地帮助选择您想要的重载方法。

蚀：

[![蚀](../Images/eff3f8e6f6d0054cc22e94bd1ef8dfc7.png)](https://i.stack.imgur.com/WVpzT.png)

智能：

[![智能](../Images/09b99dceb6f2834fd66737a81ae99c90.png)](https://i.stack.imgur.com/Bamop.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T08:00:18.310

这是一个已知的限制，请在 YouTrack 中[为这个功能请求](http://youtrack.jetbrains.com/issue/IDEA-18630)投票（它已经 4 岁了！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T07:48:38.987

也许您正在寻找这个新功能出现在 IntelliJ 2018.2 中，转到设置 | 编辑 | 一般 | 代码完成并打开 Show the documentation info popup in... 选项，我刚刚用新版本解决了这个问题。

# recursion - 帕斯卡三角行序列

> ID：12413619
> 
> 赞同：2
> 
> 时间：2012-09-13T19:41:58.643
> 
> 标签：recursion, scheme, pascals-triangle

我目前正在寻找帕斯卡三角形的行序列。我想输入行号并输出列表中的数字序列，直到该行。例如，`(Pascal 4)`将给出结果`(1 1 1 1 2 1 1 3 3 1)`。

我正在尝试使用我发现的算法。这是算法本身：

> V [c] = V [c-1] * ((r - c)/c)

*r*和*c*应该是行和列，并且V [0] =1。该算法可以在维基百科页面上标题为“计算和单个行或对角线”的部分中具体找到。

这是我到目前为止的代码：

```
(define pascal n)
  (cond((zero? n) '())
       ((positive? n) (* pascal (- n 1) (/ (- n c)c)))) 
```

我知道这几乎没什么，但我一直在努力寻找使用 a`let`或 a`lambda`来合并列值的函数范围。此外，我也一直在为递归而苦苦挣扎。我真的不知道如何建立基本案例以及如何进入下一步。基本上，我到处都迷路了。我知道这并没有显示太多，但我们将不胜感激朝着正确方向迈出的任何一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:43:41.463

[使用维基百科中的条目](https://en.wikipedia.org/wiki/Pascal%27s_triangle#Calculating_an_individual_row_or_diagonal_by_itself)作为指南，这是计算帕斯卡三角形中给定行和列的值的算法的简单实现，如链接中所述：

```
#lang racket

(define (pascal row column)
  (define (aux r c)
    (if (zero? c)
        1
        (* (/ (- r c) c)
           (aux r (sub1 c)))))
  (aux (add1 row) column)) 
```

例如，以下将返回前四行值，注意行和列都以零开头：

```
(pascal 0 0)

(pascal 1 0)
(pascal 1 1)

(pascal 2 0)
(pascal 2 1)
(pascal 2 2)

(pascal 3 0)
(pascal 3 1)
(pascal 3 2)
(pascal 3 3) 
```

现在我们需要一个程序将所有值粘在一起直到所需的行；这适用于球拍：

```
(define (pascal-up-to-row n)
  (for*/list ((i (in-range n))
              (j (in-range (add1 i))))
    (pascal i j))) 
```

结果如预期：

```
(pascal-up-to-row 4)
> '(1 1 1 1 2 1 1 3 3 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T20:46:15.483

我在[博客上](http://programmingpraxis.com/2011/12/06/pascals-triangle/)讨论了帕斯卡三角。

在您的问题中， Vc 的表达式仅适用于一行。这转化为这样的代码：

```
(define (row r)
  (let loop ((c 1) (row (list 1)))
    (if (= r c)
        row
        (loop (+ c 1) (cons (* (car row) (- r c) (/ c)) row))))) 
```

然后你只需将一堆行放在一起来制作三角形：

```
(define (rows r)
  (let loop ((r r) (rows (list)))
    (if (zero? r)
        rows
        (loop (- r 1) (append (row r) rows))))) 
```

这是输出：

```
> (rows 4)
(1 1 1 1 2 1 1 3 3 1) 
```

基本情况`(= r c)`在第一个函数和`(zero? r)`第二个函数中。

如果你想清楚地写下标，你可以采用 TeX 使用的表示法：下标由下划线引入，上标由插入符号引入，任何大于一个字符的都用大括号括起来。因此，您的符号中的 Vc 将是 V_c，而您的符号中的 Vc-1 将是 V_{c-1}。

# c# - 自定义控件在 Visual Studio 设计器中不更新

> ID：12413626
> 
> 赞同：7
> 
> 时间：2012-09-13T19:42:30.393
> 
> 标签：c#, winforms, visual-studio-2008, .net-3.5, windows-forms-designer

我正在创建一个布局单选按钮的自定义控件（不，它不一定是单选按钮。我只是想学习如何做到这一点，这样我就可以在路上制作一些更复杂的东西，其中可能包含多个通过 Items 属性添加的控件列表（类似于其他一些控件）。

我可以构建项目，将其从组件面板拖到表单上，并通过 Items 属性添加单选按钮。不幸的是，这不会在设计器中更新，除非您：

*   重建项目2-3次
*   在设计器中关闭并重新打开表单

起初我的逻辑是在初始化之后将它们放在构造函数中包含的表单上，但这不起作用，所以我转向 Form_Load。

我错过了什么？上述选项只是短期解决方法，而不是解决方案。

RBLTest.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WFCL_Library
{
    public partial class RBLTest : UserControl
    {
        private List<RadioButton> _items;

        private int leftSpacing = 100;
        private int topSpacing = 25;

        public RBLTest()
        {
            _items = new List<RadioButton>();
            InitializeComponent();
        }

        private void RadioButtonList_Load(object sender, EventArgs e)
        {
            int curLeftPos = 0;
            int curTopPos = 0;
            foreach (RadioButton rb in _items)
            {
                rb.Location = new Point(curLeftPos, curTopPos);
                rb.Size = new Size(85, 17);

                curLeftPos += leftSpacing;

                if (curLeftPos > this.Width)
                {
                    curLeftPos = 0;
                    curTopPos += topSpacing;
                }

                this.Controls.Add(rb);                
            }
        }

        [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
        public List<RadioButton> Items
        {
            get
            {
                return _items;
            }
            set
            {
                _items = value;
            }
        }
    }       
} 
```

RBLTest.Designer.cs

```
namespace WFCL_Library
{
    partial class RBLTest
    {
        /// <summary> 
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary> 
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Component Designer generated code

        /// <summary> 
        /// Required method for Designer support - do not modify 
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.SuspendLayout();
            // 
            // RBLTest
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.Name = "RBLTest";
            this.Size = new System.Drawing.Size(407, 44);
            this.Load += new System.EventHandler(this.RadioButtonList_Load);
            this.ResumeLayout(false);

        }

        #endregion

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T20:55:48.467

您不应该使用`Load`事件或构造函数，因为当您使用设计器工具添加控件时，`UserControl`会创建一个实例并`Load`触发事件。在您的情况下，发生这种情况时`_item`仍然是空的。另一个问题是序列化列表存在一些问题，所以我会使用一个数组：

```
public partial class RBLTest : UserControl {
    private RadioButton[] _items;

    private int leftSpacing = 100;
    private int topSpacing = 25;

    public RBLTest( ) {
        InitializeComponent( );
    }

    [DesignerSerializationVisibility( DesignerSerializationVisibility.Content )]
    public RadioButton[] Items {
        get {
            return _items;
        }
        set {
            _items = value;

            int curLeftPos = 0;
            int curTopPos = 0;
            foreach ( RadioButton rb in _items ) {
                rb.Location = new Point( curLeftPos, curTopPos );
                rb.Size = new Size( 85, 17 );

                curLeftPos += leftSpacing;

                if ( curLeftPos > this.Width ) {
                    curLeftPos = 0;
                    curTopPos += topSpacing;
                }

                this.Controls.Add( rb );
            }
        }
    }
} 
```

表单设计器中的结果：

![在此处输入图像描述](../Images/6bf1d21cbcf51c7a4570991305a51259.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:54:50.073

原因是您仅在 Load 事件中向 ControlsCollection 添加控件。这是我在谷歌上搜索的在 WinForms 中创建容器控件的教程：http: [//www.codeproject.com/Articles/9238/WinForms-Custom-Container-Control](http://www.codeproject.com/Articles/9238/WinForms-Custom-Container-Control)

# jquery - 使用选择器隐藏带有jquery的元素

> ID：12413627
> 
> 赞同：-2
> 
> 时间：2012-09-13T19:42:37.740
> 
> 标签：jquery, jquery-selectors, hide

1 中有 6 个问题。假设我有这个：

```
<body>
    <form>
        <h3>blah</h3>
        <table>
            <tr>
                <th>Input 1:</th>
                <td><input type="text" id="some-input-a" name="some-input-a" /></td>
            </tr>
            <tr>
                <th>Input 2:</th>
                <td><input type="text" id="other-input" name="other-input" /></td>
            </tr>
        </table>
        <h3>blah</h3>
        <table>
            <tr>
                <th>Input 3:</th>
                <td>
                    <select name="my-select" id="my-select">
                        <option value="1">My 1</option>
                        <option value="c">Your f</option>
                        <option value="m">This g</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>Input 4:</th>
                <td><input type="password" id="pass-input" name="next-input" /></td>
            </tr>
            <tr>
                <th>Input 5:</th>
                <td><input type="password" id="pass-confirm" name="pass-confirm" /></td>
            </tr>
        </table>
        <h3>blah</h3>
        <table>
            <tr>
                <th>Input 6:</th>
                <td><input type="text" id="next-one" name="next-one" /></td>
            </tr>
            <tr>
                <th>Input 7:</th>
                <td><input type="text" id="more-inputs" name="more-inputs" /></td>
            </tr>
            <tr>
                <th>Input 8:</th>
                <td><input type="text" id="form-input" name="form-input" /></td>
            </tr>
            <tr>
                <th>Input 9:</th>
                <td><textarea name="description" id="description" rows="5" cols="30"></textarea></td>
            </tr>
            <tr>
                <th>Input 10:</th>
                <td><input type="text" id="input-10" name="input-10" /></td>
            </tr>
        </table>
    </form>
</body> 
```

有没有简单的隐藏方法：

1.  第三张表完全
2.  Textarea所在的行
3.  ID 为“description”的元素所在的行
4.  第 3 表的第 2 行
5.  第 3 次`<h3>`
6.  第五个输入标签

使用选择器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:46:04.273

1.

```
$('form table:eq(2)').hide(); 
```

2.

```
$('form table tr').has('textarea').hide(); 
```

3.

```
$('#description').hide(); 
```

4.

```
$('form table:eq(2) tr:eq(1)').hide(); 
```

5.

```
$('form h3:eq(2)').hide(); 
```

6.

```
$('form input:eq(4)').parent().prev('td').hide(); 
```

阅读有关***[jQuery 选择器](http://api.jquery.com/category/selectors/)***的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:50:13.490

你使用 .hide() 来隐藏元素。你还有很多重复的问题。尝试这个

```
 1.) $('table:eq(2)').hide();

    2.) $('table tr').has('textarea').hide();

    3.) $('#description').parent().parent().hide();

    4.) $('table:eq(2) tr:eq(1)').hide();    

    5.) $('h3:eq(2)').hide();

    6.) $('table input:ep(4)').hide(); 
```

# jquery - 使用带有 html5 视频的 jquery

> ID：12413637
> 
> 赞同：0
> 
> 时间：2012-09-13T19:43:46.217
> 
> 标签：jquery, html5-video

我有一个做直播的网站。我有一些可以在 iPad 上成功播放的代码：

```
window.location = 'http://<?php echo DEVSTREAMWEB; ?>/<?php echo $session_id;?>/'+camerahash+'/playlist.m3u8'; 
```

哪里`DEVSTREAMWEB`是 url:`mysite.com:1935/web/_definst_`和 session_id 你猜对了，就是会话 id。Camerahash 是您可以流式传输的特定相机的内置哈希编号。

这会在 iPad 上打开一个新标签，效果很好。但是，我想将其更改为在 div 中播放。如果有人想全屏播放，他们只需点击全屏选项即可播放 html5 视频：

```
var theUrl = 'http://<?php echo DEVSTREAMWEB; ?>/<?php echo $session_id;?>'+camerahash+'/playlist.m3u8';
if($('#myfileplayer').length == 0) {
    var mydiv = $("#player");
    var myvideo = $("<video id='myfileplayer' src='"+theUrl+"' width='320' height='240' controls></video>");
    mydiv.append(myvideo);
} else {
    $('#myfileplayer').attr("src",theUrl); 
}

var video = document.getElementById('myfileplayer');
video.addEventListener('click',function(){
    video.play();
},false); 
```

我收到一个错误：`"NetworkError: 403 Forbidden - http://mysite.com:1935/web/_definst_/kgbh744hkbmguc95cbts8m02949e6212905e7e58998c03ba03a36d8e08cf1032ab/playlist.m3u8"`

这是正确的网址。我想知道我的报价是否正确`theUrl`？知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:06:55.940

叹。忘记斜线了

```
var theUrl = 'http://<?php echo DEVSTREAMWEB; ?>/<?php echo $session_id;?>/'+camerahash+'/playlist.m3u8'; 
```

# java - 如何对始终自动装配的接口进行单元测试 (Java)

> ID：12413640
> 
> 赞同：2
> 
> 时间：2012-09-13T19:43:53.867
> 
> 标签：java, spring, unit-testing, autowired

所以我有一个接口，我们称它为 X

所以在常规代码中我有：

```
public class doStuff()
{
@Autowired
private X x;

public stuff()
{
x.doYourThing();
}
} 
```

我不知道如何测试这个。

如果我尝试：

```
public class XTest()
{
  @Autowired
  private X x;
  public void test(){
  string val = x.FillUpVal();
  assertTrue("It didn't work",val=="hi");
  }

} 
```

我将 x 设为 null，因此它立即抛出 NullPointerException 并且测试失败。我正在寻找一些关于正确方法的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:12:14.777

实际上，您可以 @Autowire 模拟对象。我推荐 Mockito 框架。更多信息和示例：[http ://code.google.com/p/mockito/](http://code.google.com/p/mockito/)

[将 Mockito 模拟注入 Spring bean](https://stackoverflow.com/questions/2457239/injecting-mockito-mocks-into-a-spring-bean)

更多关于模拟：

> 在面向对象编程中，模拟对象是以受控方式模仿真实对象行为的模拟对象。程序员通常会创建一个模拟对象来测试其他对象的行为，就像汽车设计师使用碰撞测试假人来模拟人类在车辆碰撞中的动态行为一样。

[http://en.wikipedia.org/wiki/Mock_object](http://en.wikipedia.org/wiki/Mock_object)

# objective-c - 新的 Apple Mach-O 链接 (id) 错误

> ID：12413641
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:43:54.853
> 
> 标签：objective-c, linker-errors

昨晚，当我完成我的项目时，没有错误。但是今天，当我打开我的项目时，我遇到了 Apple Mach-O 链接 (id) 错误。这是错误：`Ld /Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Products/Debug-iphonesimulator/WhereAmI.app/WhereAmI normal i386 cd“/Users/chandlerdeangelis/Desktop/Real Estate应用程序“setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH”/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin :/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/平台/iPhone模拟器。

重复符号 _OBJC_IVAR_$_WhereAmIAppDelegate._window 在：/Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIAppDelegate。 o /Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIViewController.o 重复符号_OBJC_IVAR_$_WhereAmIAppDelegate._viewController在：/Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIAppDelegate。o /Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIViewController.o 重复符号 _OBJC_METACLASS_$_WhereAmIAppDelegate 在： /Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIAppDelegate.o /Users/chandlerdeangelis/Library/Developer /Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIViewController.o重复符号_OBJC_CLASS_$_WhereAmIAppDelegate在：/Users/chandlerdeangelis/Library/Developer/Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIAppDelegate.o /Users/chandlerdeangelis/Library/Developer /Xcode/DerivedData/WhereAmI-bdyziqhatjrwffgkgfvwvtoxdroa/Build/Intermediates/WhereAmI.build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIViewController.o ld：架构i386 clang的4个重复符号：错误：链接器命令失败退出代码 1（使用 -v 查看调用）` 谁能帮帮我？build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIViewController.o ld：架构 i386 的 4 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）`谁能帮忙我出去？build/Debug-iphonesimulator/WhereAmI.build/Objects-normal/i386/WhereAmIViewController.o ld：架构 i386 的 4 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）`谁能帮忙我出去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:00:30.983

几个符号 (WhereAmIAppDelegate._window, WhereAmIAppDelegate._viewController, ...) 被定义为重复：在*WhereAmIAppDelegate.o*和*WhereAmIViewController.o*中。

此错误的一个可能原因是您在某处导入了“.m”文件而不是“.h”文件。也许您`#import "WhereAmIAppDelegate.m"`在*WhereAmIViewController.m*中有一个“？

# python - 使用 Pygobject 和 Python 3 从内存数据中显示图像

> ID：12413645
> 
> 赞同：12
> 
> 时间：2012-09-13T19:44:17.210
> 
> 标签：python, python-3.x, gtk3, pygobject

我在 Python 3 中有一些 RGBA 数据，我想在 GTK3 窗口中显示它所代表的图像，而不使用任何额外的库。

我尝试的第一件事是编辑 a`Pixbuf`的数据，例如（http://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-The-GdkPixbuf-Structure.html#put-pixel - 抱歉，我'm only allowed 2 links) in the (C) documentation, using `Pixbuf.get_pixels()`. 但是，这给了我一个不可变的`bytes`对象，因此显然行不通。（一个 gdk-pixbuf 错误报告（668084，如果允许我会链接到它）涵盖了相同的功能，但从那以后东西必须有所改变。）

接下来，我尝试使用从数据创建 Pixbuf [`Pixbuf.new_from_data()`](http://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-Image-Data-in-Memory.html#gdk-pixbuf-new-from-data)，但这也有问题（请参阅 gdk-pixbuf 错误 674691）（是的，这就是我在评论 3 中）。

然后我查看了 Cairo: [`ImageSurface.create_for_data`](http://cairographics.org/documentation/pycairo/3/reference/surfaces.html#cairo.ImageSurface.create_for_data)should do this，但由于某种原因，这在 Python 3 绑定中尚不可用。（我已经用 Python 2 尝试过，然后将表面变成 a `Pixbuf`，然后将其包装在 a`gtk.Image`中，它可以工作。但我使用的是 Python3（即使这样，它也很混乱 - 毕竟 Cairo 是一个矢量图形库） ）。

我在某处找到了使用 PIL 将图像写入 PNG 文件然后将其读入 Pixbuf 的参考，但这太可怕了，使用了一个额外的库，而且 PIL 无论如何都不适用于 Python 3。

那么……还有其他方法吗？

## 工作代码

根据 Havok 的回答，这是一个工作示例：

```
from array import array

from gi.repository import Gtk as gtk, GdkPixbuf

pixels = array('H')
for i in range(20):
    for j in range(20):
        px = (i < 10, j >= 10, (i < 10) ^ (j < 10))
        pixels.extend(65535 * c for c in px)

header = b'P6 20 20 65535 '
img_data = header + pixels

w = gtk.Window()
w.connect('delete-event', gtk.main_quit)
l = GdkPixbuf.PixbufLoader.new_with_type('pnm')
l.write(img_data)
w.add(gtk.Image.new_from_pixbuf(l.get_pixbuf()))
l.close()
w.show_all()
gtk.main() 
```

编辑：实际上，为了正确起见，我认为在添加到标题之前需要一个`pixels.byteswap()`小端系统（尽管这些颜色当然无关紧要）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T07:13:49.507

哇，这将是一个艰难的，非常困难的。

PIL 或 Cairo 的 ImageSurface.create_from_data() 都不适用于 Python 3。您唯一的选择是直接使用 GdkPixbuf，但正如您所说，这不是一个完美的解决方案，特别是因为您希望使用 alpha 通道。我唯一的想法是你尝试使用这个：

[http://developer.gnome.org/gdk-pixbuf/stable/GdkPixbufLoader.html#gdk-pixbuf-loader-new-with-type](http://developer.gnome.org/gdk-pixbuf/stable/GdkPixbufLoader.html#gdk-pixbuf-loader-new-with-type)

正如我在此处末尾所做的那样：[Converting PIL GdkPixbuf](https://stackoverflow.com/questions/10341988/converting-pil-gdkpixbuf/10547272#10547272)

```
loader = GdkPixbuf.PixbufLoader.new_with_type('pnm')
loader.write(contents)
pixbuf = loader.get_pixbuf()
loader.close() 
```

并尝试查看支持哪些类型，找不到 C 文档所说的 PyGObject 版本`gdk_pixbuf_format_get_name()`和`gdk_pixbuf_get_formats()`. 使用[pnm 格式](http://en.wikipedia.org/wiki/Netpbm_format)，您将没有 alpha 通道。

**编辑**

太好了，您找到了 PyGObject 函数，在此处发布输出以用于文档目的：

```
>>> from gi.repository import GdkPixbuf
>>> formats = GdkPixbuf.Pixbuf.get_formats()
>>> [f.get_name() for f in formats]
['GdkPixdata', 'ras', 'tiff', 'wmf', 'icns', 'ico', 'png', 'qtif', 
 'wbmp', 'gif', 'pnm', 'tga', 'ani', 'xbm', 'xpm', 'jpeg2000', 
 'pcx', 'jpeg', 'bmp', 'svg'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T19:28:59.280

我没有安装 gtk3，但在 gtk2 中它工作得非常好：

```
import gtk
import cairo

def main():
    window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    window.set_title("Drawing Area")
    window.connect("destroy", lambda w:gtk.main_quit())

    sw = gtk.ScrolledWindow()
    area = Area()
    area.show()
    area.connect('expose-event', area.expose_handler)
    sw.add_with_viewport(area)
    window.add(sw)
    window.show_all()

class Area(gtk.DrawingArea):
    def __init__(self):
        super(Area, self).__init__()
        self.pixbuf = gtk.gdk.pixbuf_new_from_file("hard_drive_elements.png")

    def expose_handler(self, widget, event):
        cr = self.window.cairo_create()
        cr.set_operator(cairo.OPERATOR_SOURCE)
        cr.set_source_rgb(1,1,1)
        cr.paint()
        cr.set_source_pixbuf(self.pixbuf, 0, 0)
        cr.paint()

if __name__ == "__main__":
    main()
    gtk.main() 
```

![Drawing_area_from_pixbuf](../Images/93443df4615d6c30f95294ff14a6a068.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T21:27:21.170

这现在适用于 Python 3：

```
import gi
gi.require_version('Gtk', '3.0')
from gi.repository import Gtk, GdkPixbuf

pixels = open('test.raw', 'rb').read()
depth = 8
width = 460
height = 460
stride = width * 3
win = Gtk.Window()
win.connect('delete-event', Gtk.main_quit)
win.add(Gtk.Image.new_from_pixbuf(
    GdkPixbuf.Pixbuf.new_from_data(pixels, GdkPixbuf.Colorspace.RGB,
                                   False, depth, width, height, stride)))
win.show_all()
Gtk.main() 
```

您可以`.raw`使用 ImageMagick 从 JPEG 或其他常见图像格式创建图像：

```
convert test.jpeg -depth 8 -size 460x460 RGB:test.raw 
```

我没有检查是否可以加载 alpha 通道（透明度）数据，但`new_from_data()`需要一个布尔标志。

# python-imaging-library - Python 图像库：AttributeError：“NoneType”对象没有属性 XXX

> ID：12413649
> 
> 赞同：14
> 
> 时间：2012-09-13T19:44:33.880
> 
> 标签：python-imaging-library

我用 PIL 打开了一张图片，但是当我尝试用它`split()`来分割频道时，我得到了以下错误： `AttributeError: 'NoneType' object has no attribute 'bands'`

```
import Image
img = Image.open('IMG_0007.jpg')

img.split()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/blum/<ipython console> in <module>()

/usr/lib/python2.6/dist-packages/PIL/Image.pyc in split(self)
   1495         "Split image into bands"
   1496 
-> 1497         if self.im.bands == 1:
   1498             ims = [self.copy()]
   1499         else:

AttributeError: 'NoneType' object has no attribute 'bands' 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-13T19:44:33.880

通过谷歌搜索，我[在 SO 上找到了这条评论，指出 PIL 有时“懒惰”](https://stackoverflow.com/questions/12228829/python-image-library-make-area-of-image-transparent#comment16387831_12229109) 并且在打开后“忘记”加载。所以你必须这样做：

```
import Image
img = Image.open('IMG_0007.jpg')
img.load()
img.split() 
```

**也请+1原始评论！这个人做了真正的工作。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-27T07:24:53.067

我的问题是 PIL 没有正确安装。尝试读取 png 时，我会收到该错误。我的编译摘要产生了

```
--------------------------------------------------------------------
PIL 1.1.7 SETUP SUMMARY
--------------------------------------------------------------------
version       1.1.7
platform      linux2 2.7.3 (default, Apr 21 2012, 01:05:55)
              [GCC 4.6.3]
--------------------------------------------------------------------
*** TKINTER support not available
*** JPEG support not available
*** ZLIB (PNG/ZIP) support not available <===============
*** FREETYPE2 support not available
*** LITTLECMS support not available
-------------------------------------------------------------------- 
```

然后我选择“pip uninstall pil”并改用 Synaptic 包管理器。那解决了它。

# java - PMD 中的目标 JDK

> ID：12413652
> 
> 赞同：1
> 
> 时间：2012-09-13T19:44:48.930
> 
> 标签：java, pmd

我们使用的是 PMD 4.2.5，下面是我们看到的错误

```
java.lang.IndexOutOfBoundsException: Index: 318214, Size: 22665
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at net.sourceforge.pmd.cpd.MatchAlgorithm.tokenAt(MatchAlgorithm.java:50)
at net.sourceforge.pmd.cpd.MatchAlgorithm.hash(MatchAlgorithm.java:96)
at net.sourceforge.pmd.cpd.MatchAlgorithm.findMatches(MatchAlgorithm.java:59) 
```

我们已将`maxinimIndexcount`50 更改为 100。即使现在我们也看到了错误。

迁移到 PMD 5 会解决问题吗？在他们的错误修复中没有提到它。

我们还使用

```
<pmd id="pmdTask" rulesetfiles="${rulesets}" encoding="UTF-8" targetjdk="${targetjdk}"> 
```

在 PMD 5 中用什么替换了 targetjdk？

# vb.net - 在 VB.NET 中调用 Marshal.FinalRelease 后 Excel 的实例仍然存在

> ID：12413668
> 
> 赞同：2
> 
> 时间：2012-09-13T19:45:42.777
> 
> 标签：vb.net, excel, excel-interop

我在这里查看了一些关于在我的程序运行后摆脱 excel 实例的提示，但这些建议似乎都不起作用。当我最初运行它时，它将创建一个 excel 实例，但是当程序仍在运行时，我通过单击按钮重新运行此代码；它将创建另一个 excel 实例，但这一次它删除了它创建的实例，只留下了最初运行程序时创建的实例。

到目前为止，我所拥有的代码是这样的：（**截至 2012 年 9 月 14 日的更新代码）**

```
Private Sub GetBatchFileContents()

    Dim xlApp As Excel.Application
    Dim xlWB As Excel.Workbook
    Dim xlWS As Excel.Worksheet
    Dim xlRan As Excel.Range
    Dim xlVal(,) As Object
    Dim lastRow As Int32

    xlApp = New Excel.Application()
    xlWB = xlApp.Workbooks.Open(TextBox1.Text.ToString(), _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing, _
                                Type.Missing)
    xlWS = xlWB.Worksheets.Item(1)
    lastRow = xlWS.Cells(xlWS.Rows.Count, 1).End(Excel.XlDirection.xlUp).Row
    xlRan = xlWS.Range(xlWS.Cells(1, 1), xlWS.Cells(lastRow, 130))
    xlVal = xlRan.Value2()
    ReleaseObj(xlRan)
    ReleaseObj(xlWS)
    xlWB.Close(False, Type.Missing, Type.Missing)
    ReleaseObj(xlWB)
    xlApp.Quit()
    ReleaseObj(xlApp)

End Sub

Private Sub ReleaseObj(ByRef obj As Object)

    Try
        Marshal.FinalReleaseComObject(obj)
    Catch ex As Exception
        Stop
    Finally
        obj = Nothing
    End Try

    GC.Collect()
    GC.WaitForPendingFinalizers()
    GC.Collect()

End Sub 
```

提前感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:55:10.553

我遇到了与您描述的非常相似的问题。通过使用此示例代码，它对我有用

```
' set all Excel related  objects to nothing
columnHeaders = Nothing
range = Nothing
endCell = Nothing
startCell = Nothing
excelSheet = Nothing
excelSheets = Nothing
excelWorkbook.Close()
excelWorkbook = Nothing
excelApp.Quit()
' release com ressources 
 Marshal.FinalReleaseComObject(excelApp)  ' !

excelApp = Nothing
GC.Collect()
GC.WaitForPendingFinalizers() 
```

参见MSDN [`FinalReleaseComObject`](http://msdn.microsoft.com/de-de/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx) _[`ReleaseComObject`](http://msdn.microsoft.com/de-de/library/system.runtime.interopservices.marshal.releasecomobject.aspx)

**编辑**

```
Private Sub GetBatchFileContents()
    Dim xlApp As Excel.Application
    Dim xlWB As Excel.Workbook
    Dim xlWS As Excel.Worksheet
    Dim xlRan As Excel.Range
    Dim xlVal(,) As Object
    Dim lastRow As Int32

    xlApp = New Excel.Application()
    xlWB = xlApp.Workbooks.Open(TextBox1.Text.ToString(), _
                                Type.Missing, Type.Missing,  Type.Missing,  Type.Missing,  Type.Missing, _
                                Type.Missing,  Type.Missing,  Type.Missing, Type.Missing, Type.Missing, _
                                Type.Missing,  Type.Missing, Type.Missing,  Type.Missing)
    xlWS = xlWB.Worksheets.Item(1)

    ' original
    'lastRow = xlWS.Cells(xlWS.Rows.Count, 1).End(Excel.XlDirection.xlUp).Row

    ' new
    Dim range1 As Excel.Range
    range1 = xlWS.Cells(xlWS.Rows.Count, 1)
    Dim range2 As Excel.Range
    range2 = range1.End(Excel.XlDirection.xlUp)
    lastRow = range2.Row
    ReleaseObj(range1)
    ReleaseObj(range2)

    ' original
    'xlRan = xlWS.Range(xlWS.Cells(1, 1), xlWS.Cells(lastRow, 130))

    ' new
    Dim range1_1 As Excel.Range
    range1_1 = xlWS.Cells(1, 1)
    Dim rangeLastRow_130 As Excel.Range
    rangeLastRow_130 = xlWS.Cells(lastRow, 130)
    xlRan = xlWS.Range(range1_1, rangeLastRow_130)
    ReleaseObj(range1_1)
    ReleaseObj(rangeLastRow_130)

    ' unchanged
    xlVal = xlRan.Value2()
    ReleaseObj(xlRan)
    ReleaseObj(xlWS)
    xlWB.Close(False, Type.Missing, Type.Missing)
    ReleaseObj(xlWB)
    xlApp.Quit()
    ReleaseObj(xlApp)
End Sub 
```

我更改了您的代码以**将每个可能的 COM 实例分配给一个变量**并**显式释放**它！但由于它在我的计算机上运行良好，我无法对其进行测试。

此外，我发现一篇[**文章**](http://blogs.msdn.com/b/msdnforum/archive/2010/03/09/excel-does-not-quit-after-automation-from-net-side.aspx)描述了可能导致您所描述行为的原因。

> 您的 Excel 加载了一个**托管的 AddIn(Shared AddIn or VSTO AddIn)**，这违反了规则。在您的应用程序自动化 Excel 应用程序后，Excel 应用程序无法正确退出，因为加载的 AddIn 有一些未释放的基础 RCW。在这种情况下，即使您的自动化客户端终止，Excel 也不会退出。因此，解决此类问题的一个步骤是禁用所有插件以隔离根本原因。'（有关完整详细信息，请参阅文章）

*请让我知道我的建议是否适合您！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:14:45.860

我所做的基本概要。我在 Workbooks 功能的大图中将这个逻辑合并到了 Lock Down 过程中。我必须关闭 Echo，否则最终用户会在两个实例之间获得华丽的交互，因为我激活了一个工作簿/工作表，然后移动到另一个工作簿/工作表。您一定可以在这里使用一些东西;)。

这就是我在项目中使用的所有内容`srcwb.Close SaveChanges:=False`，它关闭了文件。我过去所做的是获得一个对象引用，`Application`这样我就可以获得实例的系统 ID 并从应用程序中关闭它。这当然是假设您拥有代码隐藏的 VBA/项目控制权，而不仅仅是平面数据文件。

否则，您将必须在父文件中创建一个集合对象，并在您打开一个新实例时将该应用程序实例存储在集合中，然后定期运行该集合并验证该实例是否处于活动状态。

# c# - LINQ 到 XML。如何得到一些字符串？

> ID：12413670
> 
> 赞同：1
> 
> 时间：2012-09-13T19:45:53.397
> 
> 标签：c#, xml, linq, linq-to-xml

我有xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<books>
  <book>
    <author>Ray</author>
    <album>Other</album>
    <cover size="large">LargeCover</cover>
    <cover size="mini">MiniCover</cover>
  </book>
</books> 
```

如何获取字符串“MiniCover”？

我写了代码，但它不起作用——字符串为空；

```
 string testLink = (@"Text.xml");

            XDocument xml = XDocument.Load(testLink);
            string cv = String.Empty;

            var c = from cover in xml.Elements("book")
                    where (string)cover.Attribute("size").Value == "mini"
                    select cover.Value;
            foreach (var item in c)
            {
                cv += item.ToString();
            }

            MessageBox.Show(cv); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:49:57.097

Xpath 可以简化你的代码

```
var covers = xDoc.XPathSelectElements("//cover[@size='mini']").ToList(); 
```

获取内部文本

```
var covers = xDoc.XPathSelectElements("//cover[@size='mini']")
                .Select(x => x.Value)
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:49:11.527

使用时，`Elements()`您必须更精确地指定结构。

在您的代码中，`cover`是一个`<book>`元素。而是`size`的一个属性`<cover>`。

```
 var c = from cover in xml.Elements("book")
                where (string)cover.Attribute("size").Value == "mini"
                select cover.Value; 
```

这应该有效：

```
 var c = from cover in xml.Elements("book")
                    .Elements("cover")
                where (string)cover.Attribute("size").Value == "mini"
                select cover.Value; 
```

# ios - iOS - 以毫秒精度在设备之间同步音频

> ID：12413672
> 
> 赞同：3
> 
> 时间：2012-09-13T19:45:59.140
> 
> 标签：ios, audio, time, synchronize

我需要以毫秒精度在联网设备中同步音频。我已经将一些效果很好但并不完全可靠的东西拼凑在一起：

1）服务器设备发送一个带有 timeSinceClick 参数的 rpc

2）客户端设备根据rpc在传输中花费的时间启动相同的点击，

3)System.Diagnostics.StopWatch 定期检查所有连接的设备，以确保播放与绝对时间没有太大偏差，并在必要时进行更正

有没有更优雅的方法来做到这一点？此外，如果将非 iOS 设备添加到混合中，我的做法需要手动同步：延迟差异使得自动化变得非常困难......

我满眼！

干杯，

格雷佐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:20:44.990

很难以毫秒精度在同一台机器上同步多个设备，所以如果你能够在多台机器上做到这一点，我会说你做得很好。对于您描述的步骤，我对 iOS 不够熟悉，但我可以告诉您如何以跨平台的方式处理此问题。也许你的方法等同于同样的事情。

1.  一台机器（“主机”）将向所有其他机器发送一个 UDP 数据包。
2.  所有其他机器都会尽快回复。
3.  接收回复所需的时间除以 2，将（大约）是从一台机器获取数据包到另一台机器所需的时间。（这必须经过验证。处理和发送数据包可能需要更长的时间？可能不会）
4.  重复步骤 1-3 后，忽略任何极值并对剩余结果取平均值，您就知道从一台机器到另一台机器获取消息需要多长时间。
5.  现在“同步”UDP数据包可以从主机发送到“从”机器。同步数据包将包含延迟信息，因此当保存机器接收数据包时，它们知道它们是 x 毫秒前发送的。可能需要发送几个同步数据包，以防网络延迟或丢弃其中一些。

# c# - “输入字符串的格式不正确。” 对于 Convert() 方法

> ID：12413677
> 
> 赞同：-2
> 
> 时间：2012-09-13T19:46:14.260
> 
> 标签：c#, .net, winforms

我已经调试了我的代码（如下），发现问题是转换文本框中的文本的 Convert() 方法。但我如何解决这个问题？

我在[这里](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/fc6b2e87-3d54-4608-b6bf-4723613333bf/)有一个类似问题的例子。

代码：

```
//METHODS
    static string RollDice (int dice)
    {
        Random roll = new Random();
        int rollOutput = roll.Next(1, dice);
        //NOTE: VERY IMPORTANT! EVERY TIME THE INPUT GOES INTO THIS
        //METHOD REMEMBER TO INCREACE IT BY ONE!
        //AND NEVER LET THE USER TO ROLL TO DICE QUICKLY ONE AFTER ANOTHER!
        string rollResult = rollOutput.ToString();
        return rollResult;
    }

    static void TwiceD20(int bonus, bool advantage)
    {
        string firstRollString = RollDice(21) + bonus;
        string secondRollString = RollDice(21) + bonus;
        int firstRoll = Convert.ToInt32(firstRollString);
        int secondRoll = Convert.ToInt32(secondRollString);

        switch(advantage)
        {
            case true:
                if (firstRoll >= secondRoll)
                {
                    MessageBox.Show(firstRollString);
                }
            else
                {
                    MessageBox.Show(secondRollString);
                }
                break;
            case false:
                if (firstRoll <= secondRoll)
                {
                    MessageBox.Show(firstRollString);
                }
                else
                {
                    MessageBox.Show(secondRollString);
                }
                break;
        }
    }

    //BUTTONS

    private void btn1d20_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Roll Result: " + RollDice(21)); 
    }

    private void btnAdv_Click(object sender, EventArgs e)
    {

        TwiceD20(Convert.ToInt32(textBox1d20.Text), true);
    }

    private void btnDisAdv_Click(object sender, EventArgs e)
    {
        TwiceD20(Convert.ToInt32(textBox1d20.Text), false);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:05:33.007

您已在字符串中添加了一个非整数。所以很自然你不能将它转换为 int，因为字符串不再只是一个 int。

```
string firstRollString = RollDice(21) + bonus;    // This won't convert back to an int
string secondRollString = RollDice(21) + bonus;   // This won't convert back to an int
int firstRoll = Convert.ToInt32(firstRollString); 
int secondRoll = Convert.ToInt32(secondRollString); 
```

为 RollDice 的字符串结果添加奖励只是将字符串“True”或“False”附加到 RollDice 的结果。我怀疑你认为它是在添加数字 0 或 1。

我会按照评论的建议做，让 RollDice 返回一个数字。然后你可以把它变成一个字符串，然后在你认为合适的时候对其进行操作。

或者，如果您不想返回任何内容，只需快速更改操作顺序即可。

```
int firstRoll = Convert.ToInt32(RollDice(21)); 
int secondRoll = Convert.ToInt32(RollDice(21)); 
string firstRollString = firstRoll + bonus;
string secondRollString = secondRoll + bonus; 
```

但是，不确定您打算让代码做什么，即使这样也可能对您不起作用。

# c# - Xna Texture.GetColor 没有得到正确的颜色信息

> ID：12413678
> 
> 赞同：0
> 
> 时间：2012-09-13T19:46:19.770
> 
> 标签：c#, xna, xna-4.0

我有一个名为的类`BaseDrawableComponent`继承自`DrawableGameComponent`

另一方面，我有一个继承自此的类，该类使用带有以下代码的 Draw 方法`BaseDrawableComponent`调用：`MySceneObject`

```
public override void Draw(GameTime gameTime)
{
    Color[] pixelColours = new Color[this.Texture.Width * this.Texture.Height];
    this.Texture.GetData<Color>(pixelColours);
    base.Draw(gameTime);
} 
```

当我调试时，我在`base.Draw(gametime)`. 我检查了数组`pixelColours`，每个项目的值都是`R:255 G:255 B:255 A:255`. 图像有很多不同的颜色，所以我不知道为什么所有的项目数组值总是相同的。

# java - Apache Solr 更新（如果存在）

> ID：12413682
> 
> 赞同：2
> 
> 时间：2012-09-13T19:46:39.997
> 
> 标签：java, apache, solr

我有以下问题和问题：据我所知，在 Apache Solr 中，更新基本上是删除（如果条目存在），然后是添加。我的问题是：Solr 是否有可能只在文档存在的情况下执行添加操作，而不使用代码进行检查（可能是一些配置）我正在使用 Java 和 SolrJ 与 Solr 一起工作（版本 3.6.1）。

编辑：有关我的基础架构的更多信息：

我有一个执行 SolrServer.commit() 操作的专用线程，因为我每秒索引很多文档（并且还删除/更新） - 一些文档也通过字段“linked_documents”在它们之间链接。所以基本上如果我需要在更新之前检查文档是否存在，我必须等待提交发生（这是非常不可行的）。

# php - 带有生命周期回调和注释驱动程序的学说类继承

> ID：12413684
> 
> 赞同：2
> 
> 时间：2012-09-13T19:46:45.597
> 
> 标签：php, inheritance, annotations, doctrine, mappedsuperclass

我在使用与生命周期回调相关的注释驱动程序时遇到了教义 orm 的问题。我有 2 节课：

1.  抽象模型（标记为 MappedSuperclass，具有生命周期回调）
2.  用户（扩展模型，标记为实体）

如果我将用户实例保存到数据库，则不会调用 prePresist 方法。如果我将方法移至 User 类，一切正常。

你能给我一个提示如何让继承按预期工作吗？（我尝试为扩展 Model 类的所有类设置 uuid 而不是 id）

你可以[在这个要点上观看](https://gist.github.com/3716979)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:40:00.833

注释元数据驱动程序[不支持](https://github.com/doctrine/doctrine2/blob/e6d9d1de47ff5a085e84d73dc3738bfecef2ab5f/lib/Doctrine/ORM/Mapping/Driver/AnnotationDriver.php#L449-L462)以这种方式使用生命周期回调。考虑改用[YAML](https://github.com/doctrine/doctrine2/blob/e6d9d1de47ff5a085e84d73dc3738bfecef2ab5f/lib/Doctrine/ORM/Mapping/Driver/YamlDriver.php#L568-L575)或[XML](https://github.com/doctrine/doctrine2/blob/e6d9d1de47ff5a085e84d73dc3738bfecef2ab5f/lib/Doctrine/ORM/Mapping/Driver/XmlDriver.php#L554-L559)映射器，因为它们允许这种用法。您仍然必须告诉驱动程序您的每个子类都有一些生命周期回调。

# haskell - 算术模式是否合法 Haskell？

> ID：12413685
> 
> 赞同：9
> 
> 时间：2012-09-13T19:46:53.897
> 
> 标签：haskell, compiler-errors, cross-platform, ghc, hugs

像这样的模式：

```
front :: [a] -> a
front (x:_) = x
front _ = error "Empty list" 
```

似乎在 Haskell 中很常见，但我清楚地记得当我开始学习 Haskell 时学习了以下内容：

```
dec :: (Integral a) => a -> a
dec (x+1) = x
dec _ = error "Bottom" 
```

但是，`ghc`似乎拒绝了那段代码，并指出：

> `Parse error in pattern: x + 1`

虽然`hugs`接受它就好了。那么，这是否有效的 Haskell 以及为什么这些编译器的行为不同。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T20:03:03.387

这就是所谓的`n+k`模式。它一般不受欢迎，已从[Haskell2010](http://hackage.haskell.org/trac/haskell-prime/wiki/RemoveNPlusK)规范中删除，GHC 默认不再启用它，这与尚未更新到最新规范的 Hugs 不同。它应该与启用标志的 GHCI 一起编译`-XNPlusKPatterns`。

有关更多详细信息，请参阅[此](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/syntax-extns.html#n-k-patterns)内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T02:25:57.877

在 haskell 98 中这是合法的，但在 haskell 2010 中被禁止，这就是最近版本的 GHC 实现的。另一方面，Hugs 多年未更新，并实现了 haskell 98。

不喜欢 n+k 模式，因为可能存在匹配的数字，例如`n+1`，但没有`n`适合的数字`n+1`。

考虑浮点数：存在一个适合的数字`n+1`（4294967296 :: Float 是 4294967295 的 n+1，但这个数字不能适合浮点数——比较`round (4294967296 :: Float)`和`round (4294967295 :: Float)`，两者都产生 4294967296）。

你也可能有反弹`+`（haskell 支持运算符重载），那么模式匹配意味着什么？为了避免这种歧义，不允许使用 n+k 模式。

如果您仍然想使用 n+k 模式，您可以在源文件的顶部使用语言编译指示：

```
{-# LANGUAGE NPlusKPatterns #-} 
```

PS：我相信这一切都是从[这个电子邮件线程](http://www.mail-archive.com/haskell@haskell.org/msg01261.html)开始的。

# asp.net-mvc - 使用 displayfor 时删除 ViewModel 中的验证

> ID：12413687
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:47:04.817
> 
> 标签：asp.net-mvc

我正在使用为某些属性指定了必填字段验证的视图模型。我能够使用“displayfor”创建相同模型的只读版本。在页面中，除了这个只读视图之外，还有其他控件以及提交。现在，当我单击“提交”时，它正在得到验证并且 ModelState 无效。如果我们仅将模型用于显示，如何删除验证。

**视图模型**

```
public class CustomerVM
{
 [Required]
 public string Name {get;set;}
} 
```

**看法**

```
@using (Html.BeginForm("CreateCustomer, "Customer", FormMethod.Post))
{   
 @Html.DisplayFor(o => o.Name)

 @..other input controls.@

 <input id="btnSave" type="submit" value="Save" />
} 
```

Model.State 无效，因为 name 呈现为标签，而 httppost 没有该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:13:15.337

这是[MetadataTypeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)派上用场的地方：

```
public class MyModel
{
  public string Name { get; set; }
}

public interface IMyModelValidation
{
  [Required]
  public string Name { get; set; }
}

[MetadataType(typeof(IMyModelValiation))]
public class MyModelValidation : MyModel { } 
```

现在`MyModel`没有验证并且`MyModelValidation`确实有验证，它们几乎可以互换使用。

*   元数据类型

> MetadataTypeAttribute 属性使您能够将类与数据模型分部类相关联。在这个关联的类中，您提供了数据模型中没有的附加元数据信息。
> 
> 例如，在关联的类中，您可以将RequiredAttribute 属性应用于数据字段。即使数据库模式不需要此约束，这也会强制为字段提供值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:55:48.603

您可以为此“只读”视图使用具有不同验证要求的不同视图模型。或者，您可以在控制器中使用 ModelState.Remove() 方法来消除您不想验证的属性的错误。IMO 单独的视图模型方法更好。

看到你的代码后编辑

添加一个隐藏的

```
@Html.DisplayFor(o => o.Name)
@Html.HiddenFor(o => o.Name) 
```

这会将数据传递回帖子上的控制器并导致 ModelState.IsValid == true

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T20:13:55.870

我并不是说这是最好的方法，但我必须做类似的事情，所以我设置了验证组。我创建了一个属性，将其放置在定义其验证组的每个模型属性上。然后在回发时，我在 ViewDataDictionary 上调用了一个扩展方法，并传入了我想要运行验证的验证组。这将删除所有其他组的任何验证消息。这是一些示例代码：

属性：

```
/// <summary>
/// Attribute that assigns the property on a model to a given
/// validation group. By using the ValidationGroupExtension 
/// and calling ValidateGroup on the ViewData validation errors
/// for properties that are not included in the validation group 
/// will be removed.
/// </summary>
public class ValidationGroup : Attribute
{
    /// <summary>
    /// The unique name of the group.
    /// </summary>
    public String Group { get; set; }

    public ValidationGroup(String group)
    {
        this.Group = group;
    }
} 
```

扩展：

```
/// <summary>
/// Used in conjunction with the ValidationGroup attribute to 
/// specify which fields in a model should be validated. The 
/// ValidateGroup extension should be called on ViewData before 
/// checking whether the model is valid or not.
/// </summary>
public static class ValidationGroupExtension
{
    /// <summary>
    /// Remove all validation errors that are assocaited with 
    /// properties that do not have the ValidationGroup attribute
    /// set with the specified group name.
    /// 
    /// This only handles flat models.
    /// </summary>
    /// <param name="viewData">View Data</param>
    /// <param name="model">Data model returned</param>
    /// <param name="group">Name of the validation group</param>
    /// <returns></returns>
    public static ViewDataDictionary ValidateGroup(this ViewDataDictionary viewData, Object model, String group)
    {
        //get all properties that have the validation group attribut set for the given group
        var properties = model.GetType().GetProperties()
            .Where(x => x.GetCustomAttributes(typeof(ValidationGroup), false)
                            .Where(a => ((ValidationGroup)a).Group == group).Count() > 0)
                            .Select(x => x.Name);

        //find all properties that don't match these properties
        var matchingProperties = viewData.ModelState.Where(x => !properties.Contains(x.Key)).ToList();

        //remove any property that isn't in the gorup
        foreach (var matchingProperty in matchingProperties)
        {
            viewData.ModelState.Remove(matchingProperty.Key);
        }

        return viewData;
    }
} 
```

在回发上：

```
ViewData.ValidateGroup(model, "my validation group name");
if (ModelState.IsValid)
{
    ...
} 
```

在视图模型上：

```
[Required]
[DisplayName("Name")]
[ValidationGroup("my validation group name")]
public string Name { get; set; } 
```

# ios - 我如何只能通过 iTunes URL 地址重定向到美国应用商店？

> ID：12413690
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:47:21.120
> 
> 标签：ios, app-store, itunes

假设有一个名为 Mega Jump 的应用程序。

这个可以在所有国家的 App Store 上找到。

这是美国商店的 iTunes 地址。

[http://itunes.apple.com/us/app/mega-jump/id370398167?mt=8](http://itunes.apple.com/us/app/mega-jump/id370398167?mt=8)

如果加拿大人在 iPhone 上点击此地址，它会重定向到加拿大 App Store。

我相信加拿大人也有美国商店帐户。

因此，我想通过 iTunes url 链接强迫他们到美国商店，以增加美国的销售额。

有没有办法做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:42:44.557

您不能链接到并为用户打开特定店面。用户每个帐户只有一个店面。如果用户拥有多个帐户，正如您可能正确假设或未正确假设的那样，无论用户最后使用哪个店面都是链接将尝试在其中打开内容的商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T21:50:59.473

iTunes 的 URL 通常有这样的国家代码：

```
https://itunes.apple.com/be/album/ 
```

因此，以这种方式执行 URL 就足够了，您是安全的。您还可以在域后使用不带国家/地区代码的 URL，并将其作为参数添加`&cc=it`为意大利或`&cc=gb`英国等，例如

```
https://itunes.apple.com/be/album/...../id......&cc=it 
```

我故意放点而不是歌曲的标题和歌曲ID的数字以避免广告

# javascript - IIFE 中的函数引用不可用？

> ID：12413693
> 
> 赞同：2
> 
> 时间：2012-09-13T19:47:44.367
> 
> 标签：javascript, scope, iife

如果我运行以下命令：

```
var fn = function(){}

(function(){
    fn();
}()); 
```

它在 Chrome 中抛出“TypeError: undefined is not a function”，在 Firebug 中抛出“TypeError: fn is not a function”。

不`fn`应该在这个范围链中可用，而不必这样做`window.fn`？

奇怪的是，如果我运行：

```
var fn = function(){}
console.log(fn);

(function(){
fn();
}()); 
```

然后它按预期运行：`fn`被记录为一个函数，并且在 Chrome 或 Firefox 中都没有引发错误。

这让我觉得很傻，就像我不应该声称了解 JS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:50:18.920

您忘记添加分号：

```
var fn = function(){};

(function(){
    fn();
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:50:34.130

该死的，这是ASI。

```
var fn = function(){};

(function(){
fn();
}()); 
```

# php - php通过网页下载csv文件

> ID：12413694
> 
> 赞同：1
> 
> 时间：2012-09-13T19:47:44.380
> 
> 标签：php, html

我正在尝试使用这个简单的代码通过我的网页下载 csv 文件，但没有成功。

```
 <?PHP
      header('Content-Type: application/csv'); 
      header('Content-Disposition: attachment; filename=test.csv'); 
      header('Pragma: no-cache');
      echo readfile('test.csv'); 
      ?> 
```

错误是“Internet Explorer 在我的网页上找不到“csv_download.php”文件链接

```
 <a href="csv_download.php">Click here to download the "CSV" file</a> 
```

有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:49:48.873

您的 PHP 文件不在您期望的 URL 上。尽可能设置完整路径：

```
<a href="/csv_download.php">... 
```

# dynamics-crm-2011 - 如何强制活动表单的 CRM Outlook 用户设置

> ID：12413695
> 
> 赞同：1
> 
> 时间：2012-09-13T19:47:44.350
> 
> 标签：dynamics-crm-2011

我想强制 Outlook CRM 用户使用 CRM 表单进行约会、联系、电子邮件和任务。这是通过 UserSettings.UseCrmFormForAppointment、UserSettings.UseCrmFormForContact、UserSettings.UseCrmFormForEmail、UserSettings.UseCrmFormForTask 属性控制的。我正计划为 UserSettings 实体创建一个插件，但是当我使用注册工具时，它说“无效的主要实体”。

有没有办法以不同的方式使用注册插件？如何强制 Outlook CRM 用户使用 CRM 表单进行活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:13:39.210

根据 SDK（特别是“\sdk\tools\message-entity support for plugins.xlsx”中的电子表格），`UserSettings`实体仅支持`RetrieveMultiple`消息。

也许您可以在记录上注册您的`create`插件`systemuser`？当然这不会阻止用户更改它，但它至少会设置默认值。对用户设置的更改也有（外部）机会导致`update`记录`systemuser`（我只是在推测）。在这种情况下，您也可以捕获该事件并强制执行不更改策略。

# regex - 解析食谱的自然语言成分数量

> ID：12413705
> 
> 赞同：10
> 
> 时间：2012-09-13T19:48:47.547
> 
> 标签：regex, ruby, nlp

我正在构建一个红宝石配方管理应用程序，作为其中的一部分，我希望能够将成分数量解析为我可以比较和扩展的形式。我想知道最好的工具是什么。

我最初计划使用一个复杂的正则表达式，然后是一些其他将人类可读的数字（如`two`或`five`）转换为整数的代码，最后是将 say`1 cup`和`3 teaspoons`转换为一些基本度量的代码。我控制输入，所以我将实际成分分开。但是，我注意到用户输入了抽象度量，例如`to taste`和`1 package`。至少对于抽象测量，我想我可以忽略它们并缩放并刮掉它们之前的任何数字。

这里还有一些例子

```
1 tall can
1/4 cup
2 Leaves
1 packet
To Taste
One
Two slices
3-4 fillets
Half-bunch
2 to 3 pinches (optional) 
```

这有什么技巧吗？我注意到用户似乎对数量的构成有些困惑。我可以尝试执行更严格的规则，并将诸如`tall can`和之类的东西推`leaves`入成分部分。但是，为了强制执行，我需要能够传达无效的内容。

我也不确定我应该将数量转换为什么“基础”测量。

这些是我的目标。

1.  **能够扩展食谱。** 任意度量单位，例如 `packages`不必缩放，但精确的度量单位喜欢`cups`或 `ounces`需要缩放。

2.  **找出“主要”成分。** 在这个问题的背景下，这将主要通过弄清楚配方中最大的成分是什么来完成。在生产中，必须有某种基于成分类型的修饰符，因为很明显，`flour`几乎从未将其视为“主要”成分。不过，`chocolate`可以少用，还是可以说是一个`chocolate cake`。

3.  **规范化输入。** 为了保持网站的一致性，我想保持一致的缩写。例如，`pounds`应该是，而不是`lbs`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T18:09:44.073

您提出了两个问题，识别/提取数量表达式（语法）并弄清楚它们的含义（语义）。

在确定正则表达式是否足以**识别**数量之前，您应该让自己对它们的外观有一个很好的模式（语法）。您的示例如下所示：

```
<amount> <unit> [of <ingredient>] 
```

where`<amount>`可以采取多种形式：

```
whole or decimal number, in digits (250, 0.75)
common fraction (3/4)
numeral in words (half, one, ten, twenty-five, three quarters)
determiner instead of a numeral ("an onion")
subjective (some, a few, several) 
```

金额也可以表示为两个简单`<amount>`s 的范围：

```
two to three
2 to 3
2-3
five to 10 
```

然后你有单位本身：

```
general-purpose measurements (lb, oz, kg, g; pounds, ounces, etc.)
cooking units (Tb, tsp)
informal units (a pinch, a dash)
container sizes (package, bunch, large can)
no unit at all, for countable ingredients (as in "three lemons") 
```

最后，有一种特殊情况的表达式永远不能与数量或单位组合，因此它们可以有效地作为两者的组合：

```
a little
to taste 
```

我建议将其作为**一个小型解析器来处理，**您可以根据需要对其进行详细或粗略的处理。如果这是您选择的工具，那么为所有这些编写正则表达式应该不会太难，但正如您所见，这不仅仅是文本替换的问题。将零件拉出并将每种成分表示为三元组`(amount, unit, ingredient)`。（对于可数，使用特殊单位“件”或其他；对于“一点”等，我会将它们视为特殊单位）。

这就留下了**转换或比较**数量的问题。很多地方都进行了单位换算，因此至少对于官方单位来说，您应该可以轻松获得换算表。例如，如果您输入“将 4 盎司转换为克”，Google 就会执行此操作。请注意，一汤匙是[三汤匙或四](http://www.asknumbers.com/TablespoonToTeaspoon.aspx)汤匙，具体取决于国家/地区。

您可以很容易地将定义明确的单位标准化为您最喜欢的单位，但非正式单位有点棘手。对于“a pinch”、“a dash”等，我建议找出近似重量，以便您可以正确缩放（10 pinches = 2 g，或其他）。罐头之类的东西是没有希望的，除非你能查到特定产品的尺寸。

另一方面，主观量是最简单的：如果你将“品尝”放大十倍，它仍然是“品尝”！

**最后一个想法：识别主要成分**还需要某种成分数据库，因为大小很重要：“一个鸡蛋”可能不是主要成分，但“一只小山羊，四等分”可能是主要成分。我会考虑将其用于第 2 版。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-14T13:56:05.103

正则表达式很难用于自然语言解析。就像您提到的那样，NLTK 可能是一个不错的选择，否则您会发现自己绕着圈子试图使表达式正确。

如果你想要一些 Ruby 类型的东西而不是 NLTK，请看一下 Treat：

[https://github.com/louismullie/treat](https://github.com/louismullie/treat)

此外，语言学框架也可能是一个不错的选择：

[http://deveiate.org/projects/Linguistics](http://deveiate.org/projects/Linguistics)

**编辑：**

我认为那里必须已经有一个 Ruby 配方解析器，这是您可能想要研究的另一个选项：

[https://github.com/iancanderson/ingreedy](https://github.com/iancanderson/ingreedy)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-22T22:59:05.097

如果你知道如何编写一个好的网络爬虫和解析工具，那里有很多免费的培训数据。

[http://allrecipes.com/Recipe/Darias-Slow-Cooker-Beef-Stroganoff](http://allrecipes.com/Recipe/Darias-Slow-Cooker-Beef-Stroganoff) - 这个网站似乎可以让您根据公制/英制和用餐人数转换食谱数量。

[http://www.epicurious.com/tools/conversions/common](http://www.epicurious.com/tools/conversions/common) - 这个网站似乎有很多转换常数。

对现有配方站点的一些系统抓取，这些站点以某种结构化格式（您可以通过阅读底层 html 发现）呈现成分、程序，这将帮助您建立一个非常大的训练数据集，这将使处理此类问题变得更加容易。

当您拥有大量数据时，即使是简单的学习技术也会非常有用。一旦你有大量数据，你就可以使用标准的 nlp 技巧（ngrams、tf-idf、naive bayes 等）来快速做一些很棒的事情。

例如：
**主要成分**
具有较高 idf（逆文档频率）的菜肴中的成分更有可能是主要成分。每道菜都提到盐，所以它的 idf 应该很低。很少有菜提到油，所以它应该有更高的 idf。大多数菜肴可能只有一种主要蛋白质，因此“鸡肉”、“豆腐”等短语应该比盐、洋葱、油等更罕见，也更有可能成为主要成分。当然也可能有“香菜”之类的项目' 这可能比 'chicken' 更罕见，但如果你在每道菜中都刮掉了一些相关的元数据，你也会得到可以帮助你解决这个问题的信号。大多数厨师可能不会在他们的食谱中使用香菜，但那些确实使用香菜的人可能很多。因此，对于任何成分名称，您都可以找出名称'

**缩放食谱**
大多数食谱网站都会提到特定菜肴的服务人数，并有一个单独的成分列表，其中包含适合该人数的数量。
对于任何特定的成分，您可以收集所有提及它的食谱，并查看为多少人规定的成分数量。这应该告诉您使用哪些短语来描述该成分的数量，以及数字如何缩放。您现在还可以收集使用特定短语描述数量的所有成分（例如，“切片”->（面包、奶酪、豆腐……）、“杯子”->（大米、面粉、坚果、.. .)) 并查看这些短语中最常见的短语并手动写下它们的扩展方式。

**规范化输入**
这似乎根本不是一个难题。手动整理常见缩写及其完整形式的列表（例如，'lbs' -> 'pounds'、'kgs' -> 'kilograms'、'oz' -> 'ounces' 等）应该可以解决 90% 的问题。每当您看到它们时，将新的缩略词添加到此列表中应该会使此列表在一段时间后变得非常全面。

总之，我要求您大幅增加数据的大小，并收集大量相关的元数据以及您抓取的每个食谱（作者信息、食物类型等），并使用所有这些结构化数据以及简单的 NLP/ML 技巧解决您在尝试构建智能食谱站点时将面临的大多数问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:35:11.560

就这些而言：

1.  我会对这些进行硬编码，这样如果你得到的盎司多，就用杯子，如果你得到的杯子比那么多，就用品脱、垃圾、加仑等。我不知道你怎么能避免除非有人已经编写了代码来处理这个问题。

2.  如果标题中有一种成分，它可能是主要成分。不过，您会遇到“燕麦葡萄干饼干”的问题。正如你所说，面粉、牛奶等不是主要成分。您还需要将培根、猪排、烤猪肉全部映射到猪肉，并将牛排、汉堡包等映射到牛肉。

3.  同样，这只是查看某物的数量，你知道人们会有磅、盎司等，所以尽量抢占他们并尽可能地写这个。您可能会错过一些，但随着您网站的发展，您将能够引入新的过滤器。

如果您完成所有这些工作，请考虑发布它，这样其他人就不必这样做了：）

# ruby-on-rails - 指定私有方法

> ID：12413706
> 
> 赞同：0
> 
> 时间：2012-09-13T19:48:53.310
> 
> 标签：ruby-on-rails, ruby, rspec

我的 Rails 模型中有一些私有方法。我想单独指定它（使用 rspec）。

我做这样的事情

```
 class TestModelA < ModelA
    def public_wrapper_method_A
      private_method_A_from_ModelA
    end
  end 
```

我为 TestModelA#public_wrapper_method_A 编写规范

我认为为私有方法编写规范很有用。

为这些私有方法编写测试的最佳方法是什么。

你们有什么感想 ？优点缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:58:22.303

我通常为私有方法留出一`context`组，然后`describes`为每个方法设置一个块。在块中，我定义了一个辅助方法来调用私有方法，然后`it`块使用该`call_xxx`方法访问私有方法。

```
context "private methods" do
  describe "#some_private_method" do
    def call_some_private_method
      some_obj.send(:some_private_method)
    end

    it "should return 'something'" do
      call_some_private_method.should == 'something'
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:56:35.590

您不必包装您的类来测试私有方法。您可以改用[发送](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)。

```
object.send(:foo_private_method) 
```

# php - 使用 SimpleXML 过滤掉项目

> ID：12413707
> 
> 赞同：0
> 
> 时间：2012-09-13T19:48:56.893
> 
> 标签：php, xml

一直在环顾四周，我很难过。基本上，我试图从 xml 提要中过滤掉一个结果，并将其隐藏在 html 输出中。我试图找出地点“Hornblower Cruises and Events”，如果存在，隐藏整个节点，它是所有节点的父节点。

这是网址： http: [//www.sandiegomagazine.com/goldstartest/rss3-exclude.php](http://www.sandiegomagazine.com/goldstartest/rss3-exclude.php)

这是我的代码：

```
<?php
 $myfeed = simplexml_load_file('https://www.goldstar.com/api/listings.xml?api_key=6d0d598c69dfecfcf028b0d2b3c9b693b606ad8c&postal_code=92101');
 $i = 0;
foreach ($myfeed as $goldstar): 
    $title=$goldstar->headline_as_html; 
    $summary=$goldstar->summary_as_html; 
    $dates=$goldstar->upcoming_dates->event_date->date; 
    $ourprice=$goldstar->our_price_range; 
    $fullprice=$goldstar->full_price_range; 
    $img=$goldstar->image; 
    $link=$goldstar->link; 
    $venue_name=$goldstar->venue->name;
    $venue_street=$goldstar->venue->address->street_address;
    $venue_locality=$goldstar->venue->address->locality;
    $venue_region=$goldstar->venue->address->region;
    $venue_zip=$goldstar->venue->address->postal_code;
    $venue_phone=$goldstar->venue->phone;
    $category=$goldstar->category_list->category->name;

   // if ($venue_name == 'Hornblower Cruises and Events'){
     // unset($myfeed->event);
        //echo $myfeed->asxml();

    //}

    if (++$i > 20) {
    // stop after 10 loops
    break;
}

?>

<html>
<head></head>
<body>

<div class="gs-item">
<div class="gs-itemcontent">

<h3 class="gs-cat"><?php echo $category; ?></h3>
<h2><a href="<?php echo $link; ?>" target="_blank"><?php echo $title; ?></a></h2>
<h4 class="gs-date">Date: <?php echo $dates; ?> <br/>For more show dates, <a href="<?php echo $link; ?>" target="_blank">click here</a></h4>

<img src="<?php echo $img; ?>" />
<p><?php echo $summary; ?></p>

<div id="gs-callout">
<span class="fullprice">Full Price: <?php echo $fullprice; ?></span>
<br/>
<span class="ourprice">Our Price:  <span class="gs-hilite"><?php echo $ourprice; ?></span></span>
 <p><a class="gs-button" href="<?php echo $link; ?>" target="_blank">Buy Tickets &raquo;</a></p>

</div>

<ul class="gs-venue">
<li><strong><?php echo $venue_name; ?></strong> | </li>
<li><?php echo $venue_street; ?></li>
<li><?php echo $venue_locality; ?>, <?php echo $venue_region; ?> <?php echo $venue_zip; ?></li>
<li><?php echo $venue_phone; ?></li>

</ul> 

</div>
<div class="gs-clear"></div>
</div>

    <?  endforeach; ?>

</body> 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:01:02.170

首先，您应该将从 SimpleXML 对象中获取的每个对象转换为相关类型。例如，您应该`(string)`在读取字段之前使用 put 转换字符串属性或节点：

```
$venue_name = (string)$goldstar->venue->name 
```

对于您关于过滤的问题，我建议您以自己的方式继续寻找匹配字符串，然后决定是否添加。

**编辑**

您正在尝试查看场地名称是否`'Hornblower Cruises and Events'`随后取消设置当前事件字段并将其作为 XML 回显？首先你应该写`unset($myfeed)`，因为它是事件字段本身。`asxml`如果您取消设置，下一步将不返回任何内容`$myfeed`。而且您`HTML`的代码有错误。在你的每个循环中`for`，你都在写：

```
<html>
<head></head>
<body> 
```

您应该将它们放在`for`. 他们没有结束标签。将结束标签放在`for`. 如果您只想获取没有场地名称的字段`'Hornblower Cruises and Events'`，请将`<?php if($venue_name != 'Hornblower Cruises and Events') : ?>`before`<div class="gs-item">`和 put `<?php endif; ?>`after `</ul>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:06:38.430

使用键控 foreach

```
 foreach ($myfeed as $key => $goldstar): 
```

然后使用 key 取消设置整个当前 xml

```
unset($myfeed->$key); 
```

或者用 unset($myfeed->$key->venue); 取消设置场地

或者，您可以只构建一个新的 obj 而不是尝试编辑现有的。在循环之前实例化一个新对象，然后只添加您想要保留的部分。

或者，如果您发现不需要的场地，您可以继续进行 foreach。唯一的缺点是您不会在 $myfeed 中获得 ok'd 列表的副本。所以...

```
if ($venue_name == 'Hornblower Cruises and Events') { continue; } 
```

# java - 从 Webapp 并行调用不同的 Web 服务

> ID：12413708
> 
> 赞同：4
> 
> 时间：2012-09-13T19:49:02.403
> 
> 标签：java, web-services, web-applications, stripes, java.util.concurrent

我们有一个 stipes (java) 网络应用程序，它需要从一个方法进行大约 15 次不同的网络服务调用。例如： ...

```
 public Resolution userProfile()
    {
        serviceOneCall();
        serviceTwoCall();
        serviceThreeCall();
        serviceFourCall();
        ....
        serviceTenCall();

        return new RedirectResolution("profiel.jsp");
    } 
```

所有这些都可以并行调用，并且不相互依赖。大多数所有这些调用都在做的一件事是将数据放入会话中，并且一两个可能会将数据放入会话中的同一个对象中，因此线程安全可能是一个问题。

任何人都可以提出一个同时调用所有这些的好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T20:14:53.077

使用`ExecutorService`带有线程池的 an 来为您需要调用的每个 WS 提交`Callable`s，并在有可能并发修改时在更新的对象上进行同步。

您可能希望使用[Guava 的](https://code.google.com/p/guava-libraries/)并发扩展来更轻松地管理`Future`s，例如使用`Futures.allAsList()`它将 a 转换`List<Future<T>>`为 a `Future<List<T>>`，因此您只需`get()`等待所有答案即可。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T20:16:52.047

并行执行这项工作的所有解决方案都将涉及产生新线程或将作业提交到线程池以发生远程网络调用。

避免线程安全问题的一个好方法是使用一个`executorService`并提交子类`Callable<T>`（到`submit(Callable)`or`invokeAll(Collection<Callable>)`方法）并让 Callables 返回响应值。这样，您的初始方法可以简单地处理每个调用的返回值，并选择在会话中设置响应或更新其他对象，而不是在另一个线程中进行这项工作。

所以基本算法：

1.  将这些调用中的每一个提交到`Callable<T>`子类中的 executorService
2.  收集`Future<T>`你从 executorService 取回的 s
3.  调用`Future.get()`每个阻塞，直到你有响应，然后处理响应，但是你希望回到主线程

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-13T19:56:55.340

```
for (i = 0; i <= numOfServiceCalls; i++) {
    new Thread(new Runnable() {
        switch(i) {
            case 1 : serviceOneCall();
                     break();
            case 2 : serviceTwoCall();
                     break();
            // Keep going with as many cases as you have.
        }
    });
} 
```

# adobe-indesign - 如何使用 Javascript 取消所有标记？

> ID：12413709
> 
> 赞同：1
> 
> 时间：2012-09-13T19:49:05.127
> 
> 标签：adobe-indesign

我正在努力解决我认为应该相当容易的事情。我有一些已经标记的文档，但这些应该重做。我已经启动并运行了所有脚本来更新标签，所以这很好，但到目前为止，我通过在结构窗格中选择它们并在运行我的脚本之前选择 untag 命令来删除所有标签。

显然我想用脚本来做这个，我发现我需要使用 associatedXMLElements.untag(); 但我不能让它工作......

有人可以帮我写剧本吗？我只是想删除每个标签，所以文档再次像最初制作时一样空白（只有根元素）......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T21:24:26.713

everyItem() 集合方法通常可以等效于循环使用。因此要迭代所有（打开的）文档，保留根元素但取消标记下面的所有内容，只需执行以下操作：

```
app.documents.everyItem().xmlElements.item(0).xmlElements.everyItem().untag(); 
```

# ruby-on-rails - 在 ActiveRecord::Rollback 期间保存记录

> ID：12413711
> 
> 赞同：0
> 
> 时间：2012-09-13T19:49:11.717
> 
> 标签：ruby-on-rails, activerecord

我在一个复杂的系统中工作，并且以某种方法存在记录无效并触发 ActiveRecord::Rollback 的可能性。

我的问题是：如果成功或 ActiveRecord::Rollback 被提出，该方法需要更新记录，我无法找到如何做到这一点。

有人可以帮我解决这个问题吗？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:54:28.320

您可以跳过验证

```
Model.save(validate: false) 
```

[导轨](http://guides.rubyonrails.org/active_record_validations_callbacks.html#skipping-validations)

# ssl - Netty - 在空闲超时处理程序中以 SSL 模式运行时从未调用过“Future.operationComplete”

> ID：12413714
> 
> 赞同：3
> 
> 时间：2012-09-13T19:49:16.517
> 
> 标签：ssl, netty, future

我们已经实现了以下`channelIdle`实现。

```
public void channelIdle(ChannelHandlerContext ctx, IdleStateEvent e) 
    throws Exception {

    Response response = business.getResponse();

    final Channel channel = e.getChannel();

    ChannelFuture channelFuture
            = Channels.write(
               channel, 
               ChannelBuffers.wrappedBuffer(response.getXML().getBytes())
    );

    if (response.shouldDisconnect()) {// returns true and listener _is_ added.
        channelFuture.addListener(new ChannelFutureListener() {
            @Override
            public void operationComplete(ChannelFuture future) throws Exception {
                channel.close(); // never gets called :(
            }
        });
    }
} 
```

在非 SSL 模式下运行时，这将按预期工作。

但是，在启用 SSL 的情况下运行时，该`operationComplete`方法永远不会被调用。我们已经在各种机器上验证了几次。空闲超时发生了很多次，但`operationComplete`没有被调用。我们没有看到任何异常被抛出。

我已经尝试跟踪代码以查看`operationComplete`应该在哪里调用，但它很复杂，我还没有完全弄清楚。

有电话`future = succeededFuture(channel);` 进来，`SslHandler.wrap()`但我不知道这是否意味着什么。从返回的未来`wrap`永远不会在`SslHandler`代码的其他地方使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:21:09.203

这听起来像一个错误。是否可以编写一个简单的“测试用例”来显示问题并在我们的 github 问题跟踪器 [1] 上打开一个问题。

一定要解释它是一直发生还是偶尔发生等等。

[1] [https://github.com/netty/netty/issues](https://github.com/netty/netty/issues)

# php - ZF2 - ServiceManager 依赖于控制器

> ID：12413715
> 
> 赞同：4
> 
> 时间：2012-09-13T19:49:18.423
> 
> 标签：php, zend-framework2

我正在尝试将我的 beta DI 代码转换为 ZF2 的发布版本。现在我一开始就摔倒了，似乎没有任何关于将东西注入控制器的文档，这让我认为在控制器中有依赖项是不正常的？

现在我`var_dump('blah');exit;`只是为了尝试让一些代码运行......我已经尝试了很多事情，现在我希望这可以工作：

模块.config.php

```
'controllers' => array(
    'invokables' => array(
        'indexController' => 'Application\Controller\IndexController',
    )
) 
```

模块.php

```
public function getControllerConfig() {
    return array(
        'factories' => array(
            'indexController'    => function(ControllerManager $cm) {
                var_dump('blah');exit;
            },
        ),
    );
} 
```

现在什么都没有发生，这非常令人沮丧......我读了一些关于为每个控制器创建工厂的内容，但我有 33 个，我发现这非常疯狂和愚蠢......？

我要注入的是用于抓取/保存用户的 userMapper 之类的东西。因此 registerAction 使用 userMapper 在数据库中创建一个用户，当您尝试登录时，它使用 userMapper 检查那里是否有用户等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T21:49:54.077

这里的问题是“indexController”被定义为可调用和工厂。我认为它首先检查可调用对象，所以当它找到它正在寻找的东西时，它永远不会尝试在工厂中运行代码。只需删除“invokables”数组中的条目。

我刚刚写了一篇关于这个主题的帖子。您可以使用闭包来完成，而不是为每个控制器创建一个单独的工厂类。如果依赖项是可调用的，或者使用选项数组轻松配置，那就更容易了，您只需要一个列出可以注入的类的数组即可。查看[http://zendblog.shinymayhem.com/2013/09/using-servicemanager-as-inversion-of.html](http://zendblog.shinymayhem.com/2013/09/using-servicemanager-as-inversion-of.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:37:03.200

您可以在任何 Module.php 中轻松地做到这一点

```
public function onBootstrap(\Zend\EventManager\EventInterface $e)
{
    $serviceManager = $e->getApplication()->getServiceManager();
    $myDependency = /*something*/;

    $controllerLoader = $serviceManager->get('ControllerLoader');
    $controllerLoader->addInitializer(function ($controller) use ($myDependency) {
        if (method_exists($instance, 'injectMyDependency')) {
            $controller->injectMyDependency($myDependency);
        }
    });
} 
```

让需要依赖的控制器实现一个接口并检查控制器是否是该接口的实例然后设置它，而不只是检查该方法是否存在......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T18:52:05.567

下面是我注入任意类的初始化程序代码。一开始很难掌握——要在实例化时自动注入控制器，你必须在 module.config.php 的“controllers”部分的“initializer”部分定义初始化程序——而不是在“service_manager”部分。基本上是为了创建对控制器和其余部分有效的通用“感知接口”——各自的初始化密钥对应该完全出现在这两个部分中......

```
// module/SkeletonClassmapGenerator/Item/ImplementedItem/ImplementedItemInitializer.php

namespace SkeletonClassmapGenerator\Item\ImplementedItem;

use Zend\ServiceManager\InitializerInterface;
use SkeletonClassmapGenerator\Provider\GenericInitializerTrait;

class ImplementedItemInitializer implements InitializerInterface
{
    static protected $T_NAMESPACE = __NAMESPACE__;
    static protected $T_CLASS = __CLASS__;
    use GenericInitializerTrait; 
} 
```

然后对于特征（显然在所有初始化程序之间共享）......

```
// module/SkeletonClassmapGenerator/Provider/GenericInitializerTrait.php

namespace SkeletonClassmapGenerator\Provider;

use Zend\ServiceManager\ServiceLocatorInterface;

trait GenericInitializerTrait
{
    public function initialize($instance, ServiceLocatorInterface $serviceLocator)
    {       
       if (isset(static::$T_CLASS)&&(isset(static::$T_NAMESPACE))){
       $classname = explode('\\', static::$T_CLASS);        
       $class = end($classname);
       preg_match('/([\w]*)Initializer$/i', $class,$matches);
       $basename = $matches[1];
        if(is_subclass_of($instance,static::$T_NAMESPACE.'\\'.$basename.'AwareInterface')) {
            $sl = (method_exists($serviceLocator,'getServiceLocator'))?
            $serviceLocator->getServiceLocator():$serviceLocator;
             $dependency  = $sl->get(static::$T_NAMESPACE.'\\'.$basename.'Interface');  // I use 'Interface' as postfix for Service Manager invokable names           
             $instance->{'set'.$basename}($dependency);
            }
       }
   } 
```

}

# shell - 循环 shell 脚本直到成功记录消息

> ID：12413716
> 
> 赞同：2
> 
> 时间：2012-09-13T19:49:29.607
> 
> 标签：shell

我正在尝试获取一个 shell 脚本来识别应用程序实例何时出现。这样它就可以继续发出命令。

我一直在想它会是这样的：

```
#/bin/bash

startApp.sh

while [ `tail -f server.log` -ne 'regex line indicating success' ]
do

sleep 5

done

echo "App up" 
```

但是，即使这有效，它也不会解决一些问题：

*   如果应用程序没有出现怎么办，它会等待多长时间
*   如果启动应用程序时出现错误怎么办
*   如何捕获日志行并回显它

我很接近，还是有更好的方法？我想这是其他管理员必须克服的问题。

**编辑：**

我在超级用户上找到了这个

[https://superuser.com/questions/270529/monitoring-a-file-until-a-string-is-found](https://superuser.com/questions/270529/monitoring-a-file-until-a-string-is-found)

```
tail -f logfile.log | while read LOGLINE
do
   [[ "${LOGLINE}" == *"Server Started"* ]] && pkill -P $$ tail
done 
```

我唯一的问题是它可能永远不会退出。有没有办法增加最长时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:53:17.220

好的，第一个答案很接近，但没有考虑到我认为可能发生的一切。

我改编了这个链接的代码：

[结束 tail -f 在 shell 脚本中开始](https://stackoverflow.com/questions/2041437/ending-tail-f-started-in-a-shell-script)

这是我想出的：

```
#!/bin/bash

instanceDir="/usr/username/server.name"
serverLogFile="$instanceDir/server/app/log/server.log"

function stopServer() {

    touch ${serverLogFile}

    # 3 minute timeout.
    sleep 180 &
    local timerPid=$!

    tail -n0 -F --pid=${timerPid} ${serverLogFile} | while read line 
    do
        if echo ${line} | grep -q  "Shutdown complete"; then
          echo 'Server Stopped'
          # stop the timer..
          kill ${timerPid} > /dev/null 2>&1
        fi
    done &

    echo "Stoping Server."
    $instanceDir/bin/stopserver.sh > /dev/null 2>&1

    # wait for the timer to expire (or be killed)
    wait %sleep

}

function startServer() {

    touch ${serverLogFile}

    # 3 minute timeout.
    sleep 180 &
    local timerPid=$!

    tail -n0 -F --pid=${timerPid} ${serverLogFile} | while read line 
    do
        if echo ${line} | grep -q  "server start complete"; then
          echo 'Server Started'
          # stop the timer..
          kill ${timerPid} > /dev/null 2>&1
        fi
    done &

    echo "Starting Server."
    $instanceDir/bin/startserver.sh > /dev/null 2>&1 &

    # wait for the timer to expire (or be killed)
    wait %sleep

}

stopServer
startServer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:57:17.447

好吧，`tail -f`永远不会退出，所以这不是你想要的。

```
numLines=10
timeToSleep=5
until tail -n $numLines server.log | grep -q "$serverStartedPattern"; do 
  sleep $timeToSleep
done 
```

确保它`$numLines`大于`$timeToSleep`服务器启动期间可能显示的行数。

这将永远持续下去；如果你只想允许这么多时间，你可以用这样的东西来限制循环迭代的次数：

```
let maxLoops=60 numLines=10 timeToSleep=5 success=0
for (( try=0; try < maxLoops; ++try )); do 
  if tail -n $numLines server.log | grep -q "$serverStartedPattern"; then
    echo "Server started!"
    success=1
    break
  fi
  sleep $timeToSleep
done

if (( success )); then
  echo "Server started!"
else 
  echo "Server never started!"
fi

exit $(( 1-success )) 
```

# php - Bigquery + PHP 示例

> ID：12413717
> 
> 赞同：5
> 
> 时间：2012-09-13T19:49:31.197
> 
> 标签：php, google-bigquery

有人可以提供将 Bigquery API 与 PHP 一起使用的工作示例。我看到有 python 和 java 的示例，但找不到 PHP 的任何内容。

这是 bigquery 浏览器[https://bigquery.cloud.google.com/?pli=1](https://bigquery.cloud.google.com/?pli=1)

例如，您可以在浏览器中运行此 SQL

```
SELECT corpus,count(*) FROM publicdata:samples.shakespeare 
group by corpus limit 5; 
```

我想通过 PHP 模拟类似的调用。

即使是关于如何使用 PHP API 的粗略示例也会有很大帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T21:05:21.917

使用适用于 PHP 的 Google API 客户端。这是一个执行单个同步查询作业的脚本的简单示例。这使用在可下载的 API 客户端中找到的类名。注意：从 SVN 提取的源具有不同的类名。请注意您必须在哪里为客户端密码、客户端 ID、重定向 URI 和项目 ID 添加您自己的值。

```
<?php

require_once 'google-api-php-client/src/apiClient.php';
require_once 'google-api-php-client/src/contrib/apiBigqueryService.php';

session_start();

$client = new apiClient();
// Visit https://developers.google.com/console to generate your
// oauth2_client_id, oauth2_client_secret, and to register your oauth2_redirect_uri.

$client->setClientId('XXXXXXXXXXXXXXX.apps.googleusercontent.com');
$client->setClientSecret('XXXXXXXXXXXXXXXXXXX');
$client->setRedirectUri('http://www_your_domain.com/somescript.php');

// Your project id
$project_id = 'XXXXXXXXXXXXXXXXXXXX';

// Instantiate a new BigQuery Client 
$bigqueryService = new apiBigqueryService($client);

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['access_token']);
}

if (isset($_SESSION['access_token'])) {
  $client->setAccessToken($_SESSION['access_token']);
} else {
  $client->setAccessToken($client->authenticate());
  $_SESSION['access_token'] = $client->getAccessToken();
}

if (isset($_GET['code'])) {
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}
?>
<!doctype html>
<html>
<head>
  <title>BigQuery API Sample</title>
</head>
<body>
<div id='container'>
  <div id='top'><h1>BigQuery API Sample</h1></div>
  <div id='main'>
<?php
  $query = new QueryRequest();
  $query->setQuery('SELECT TOP( title, 10) as title, COUNT(*) as revision_count FROM [publicdata:samples.wikipedia] WHERE wp_namespace = 0;');

  $jobs = $bigqueryService->jobs;
  $response = $jobs->query($project_id, $query);

  // Do something with the BigQuery API $response data
  print_r($response);

?>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-08T21:04:25.650

以前的答案有过时的代码。以下示例应适用于更新的 API ( [https://github.com/google/google-api-php-client/blob/master/src/Google/Service/Bigquery.php](https://github.com/google/google-api-php-client/blob/master/src/Google/Service/Bigquery.php) )：

```
require_once '../source/application/libraries/Google/autoload.php';

public function createGClient(){
  define("CLIENT_ID", "{PROJECT_ID}.apps.googleusercontent.com");
  define("SERVICE_ACCOUNT_NAME","{SERVICE_ACCOUNT EMAIL FROM CONSOLE}");
  define("KEY_FILE",'../{FILENAME}.p12');

  define("PROJECT_ID","{PROJECT_ID}");
  define("DATASET_ID","{DATASET_ID}");
  define("TABLE_ID","");

  $this->client = new Google_Client();
  $this->client->setApplicationName("{NAME}");

  $key = file_get_contents(KEY_FILE);
  $this->client->setAssertionCredentials(new Google_Auth_AssertionCredentials(SERVICE_ACCOUNT_NAME, array('https://www.googleapis.com/auth/bigquery'), $key, "notasecret"));
  $this->client->setClientId(CLIENT_ID);

  $this->service = new Google_Service_Bigquery($this->client);
}

public function runQuery(){
  // To see the a list of tables  
  print_r($this->service->tables->listTables(PROJECT_ID, DATASET_ID));

  // To see details of a table
  print_r($this->service->tables->get(PROJECT_ID, DATASET_ID, TABLE_ID));

  // To query a table
  $jobs = $this->service->jobs;
  $query = new Google_Service_Bigquery_QueryRequest();
  $query->setQuery("SELECT * FROM wherever;");
  $response = $jobs->query(PROJECT_ID, $query);
  print_r($response);
} 
```

这是在以下位置给出的示例的修改版本：http: [//michaelheap.com/using-the-php-sdk-with-google-bigquery/](http://michaelheap.com/using-the-php-sdk-with-google-bigquery/)用于服务帐户。要使用客户帐户，您需要使用 oauth2 并有一个 pingback 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T02:10:20.407

我在查找示例时遇到了很多问题。这是一个基本的异步查询，但可以演示当前 PHP API 的使用，您可以在此处查看用于异步查询的 API 的 Python/Java 示例：[https ://developers.google.com/bigquery/querying-data](https://developers.google.com/bigquery/querying-data)

请注意，我不是在参考如何设置 $client 凭据，因为它在其他地方有很好的记录。

```
 $bq = new Google_BigqueryService($client);

    //build query
    $sql = 'select * from example.table LIMIT 10';

    $job = new Google_Job();
    $config = new Google_JobConfiguration();
    $queryConfig = new Google_JobConfigurationQuery();
    $config->setQuery($queryConfig);

    $job->setConfiguration($config);
    $queryConfig->setQuery($sql);

    $insert = new Google_Job($bq->jobs->insert(PROJECT_ID,$job));
    $jr = $insert->getJobReference();
    $jobId = $jr['jobId'];

    $res = new Google_GetQueryResultsResponse($bq->jobs->getQueryResults(PROJECT_ID, $jobId));

//see the results made it as an object ok:
        var_dump($results); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T05:33:30.013

```
/**
 * Executes and returns bigQuery response with 'INTERACTIVE' priority
 * $this->service is the object of Google_Service_Bigquery
 *          $this->service = new Google_Service_Bigquery($this->client);
 * @param String $sql
 * @return Google_Service_Bigquery_GetQueryResultsResponse
 */
public function execute($sql) {
    $job = new Google_Service_Bigquery_Job();
    $config = new Google_Service_Bigquery_JobConfiguration();
    $queryConfig = new Google_Service_Bigquery_JobConfigurationQuery();
    $queryConfig->setQuery($sql);
    /**
     * Priority is set to INTERACTIVE for faster response options are 'BATCH'/'INTERACTIVE' 
     */
    $queryConfig->setPriority("INTERACTIVE");
    $config->setQuery($queryConfig);
    $job->setId(md5("$sql_{microtime()}"));
    $job->setConfiguration($config);

    $running = $this->service->jobs->insert('divine-builder-586', $job);
    /* @var $running Google_Service_Bigquery_Job */
    $jr = $running->getJobReference();
    $jobId = $jr['jobId'];
    $res = $this->service->jobs->getQueryResults('divine-builder-586', $jobId);
    /* @var $res Google_Service_Bigquery_GetQueryResultsResponse */
    return $res;
} 
```

# http - 原始超级集线器上的端口转发 http 端口 (80)

> ID：12413718
> 
> 赞同：0
> 
> 时间：2012-09-13T19:49:31.463
> 
> 标签：http, port

我目前正在开展一个项目，以使我的 apache 服务器上线，这是我的新手，所以这是我第一次做这样的事情。基本上我已经进入路由器并为我的本地 IP 地址请求端口 80 上的端口转发，但没有效果。当我使用网络工具对其进行测试时，该工具会告诉您端口是否打开，它会说它已关闭。更令人困惑的是，当我运行 netstsat -a 命令时，它将 http 显示为正在侦听。我不确定是防火墙问题还是我做错了。任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:47:03.753

您需要从本地网络外部进行测试。如果您在服务器上运行 netstat，它当然会说“正在侦听”。您的 Web 测试工具是否从防火墙外部运行？您还应该能够关闭手机上的 wifi 并测试您的宽带 IP 地址：80。您是从路由器上的端口 80 转发到服务器上的端口 80 吗？您的提供商是否有可能阻止住宅帐户的 80 端口？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-15T12:45:56.397

首先谷歌在线端口扫描器并要求它扫描端口 80。其次，如果您使用的是 Ubuntu ufw（防火墙）可能正在运行默认拒绝规则，请执行以下操作：sudo ufw allow 80

要检查它是否正常工作，只需将您的 WAN IP 插入浏览器 URL 栏，它应该连接到 /var/www/html/index.html 中的测试页面

# database - 从 Weka 中的数据库加载数据集时如何声明类

> ID：12413726
> 
> 赞同：1
> 
> 时间：2012-09-13T19:49:57.897
> 
> 标签：database, weka, class-attribute

我试图了解从数据库而不是文件加载数据时如何在 Weka 中表达以下 .arff 文件。.arff 文件具有以下形式：

```
@relation sample
@attribute expression string
@attribute tone {postive,negative}

@data
'this is a happy message', positive
'this is an unhappy message', negative 
```

在从数据库加载数据的情况下，由一个包含两个字段（表达式和音调）的表组成，我怎样才能让 weka 知道字段音调只有两个可能的值，正值或负值？

这两个字段都是字符串。我想在表达式上应用 NominalToString 过滤器以将其转换为 String 并应用 StringToWord 过滤器。但是由于色调属性，它无法完成......有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:27:28.560

“但是由于音调属性，它不能完成......” - 我不明白为什么。您只能处理“表达式”字段。您可以有选择地将 NominalToString 应用于您想要的任何属性。检查[setAttributeIndexes](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attributeNominalToString.html#setAttributeIndexes%28java.lang.String%29)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:02:47.030

我之前问过[同样的问题](https://stackoverflow.com/questions/11792905/same-instances-header-arff-for-all-my-database-queries)。您可能会在该问题中看到详细的答案和必要的代码。

简短的回答：您**将**来自外部文件的正确 arff 标头与来自数据库的数据合并。

# text - 删除 UITextView 文本

> ID：12413731
> 
> 赞同：0
> 
> 时间：2012-09-13T19:50:18.727
> 
> 标签：text, uitextview

这种方法不起作用是有原因的吗？

```
-(void)textViewDidBeginEditing:(UITextView *)textView
{
    textView.text = @"";
} 
```

我只是希望当我点击 UITextView 时，里面的文本被取消了......

感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:36:30.673

**代替：**

好的。这是您需要做的。首先，在你的类中添加协议：

```
@interface ClrssEditSearchVC : UITableViewController <UITextViewDelegate> 
```

然后进入 Interface Builder/Storyboard 并按住 Ctrl 键从源文件拖到`UITextView`源文件，它会为您提供创建事件的选项。然后将您的代码添加到新方法中。

**添加：**

您当前实施的另一件事。首先，在条款上进行修正。您正在使用 UITextField（不是 UITextView）。要使您的原始 impl 工作：

首先，请确保您已将协议添加到您的课程中。

```
@interface YourVC : UIViewController <UITextViewDelegate> 
```

其次，在您的`viewDidLoad`方法中，添加以下内容：

```
self.myTextField.delegate = self; 
```

最后，您的方法 sig 需要更改为 ("view" -> "field")：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField 
```

# assembly - 装配艺术中的 EX6.x86

> ID：12413737
> 
> 赞同：1
> 
> 时间：2012-09-13T19:50:39.090
> 
> 标签：assembly, x86, hla

我正在尝试手工完成第3.6.7 节在[组装艺术中的](https://nostarch.com/assembly2.htm)**自我修改代码练习**，并且不禁认为我在高/低字节交错方面做错了什么（我知道作者是如何这样做是为了他想象中的 x86 变体）或者文本中有错误。

也就是说，文中的程序是

```
 sub  ax, ax
   mov  [100], ax

a: mov  ax, [100]
   cmp  ax, 0
   je   b
   halt

b: mov  ax, 00c6
   mov [100], ax
   mov  ax, 0710
   mov [102], ax
   mov  ax, a6a0
   mov [104], ax
   mov  ax, 1000
   mov [106], ax
   mov  ax, 8007
   mov [108], ax
   mov  ax, 00e6
   mov [10a], ax
   mov  ax, 0e10
   mov [10c], ax
   mov  ax, 4
   mov [10e], ax
   jmp 100 
```

据说“将以下代码写入位置 100，然后执行它：”

```
 mov  ax, [1000]
   put
   add  ax, ax
   add  ax, [1000]
   put
   sub  ax, ax
   mov [1000], ax
   jmp 0004 
```

但是，由于多种原因，这对我来说没有意义（首先，它将 00 写入字节 100，这是一条应该跳转到的非法指令；其次，地址中的高/低位字节似乎被切换等）另一方面，如果我只是`mov ax, c`在 b 循环中的语句中交换高/低位字节，那么这似乎是正确的。所以：

**我错了（如果是，为什么？）还是应该交换 b 循环常量中的高/低字节？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:29:06.377

它不会在地址 100 存储 00，因为 x86 处理器是“小端”。当您将 00c6 存储为一个字时，首先存储 c6。

另一方面，自修改代码已经过时了很长时间。在现代处理器上，您不能写入代码段，也不能执行数据（至少在不跳过大量循环的情况下是这样）。另一个问题是指令缓存可能在您更改它之前很久就加载了未修改的代码。

您要么冒着执行旧代码的风险，要么必须刷新所有缓存，这会对性能产生巨大影响。简而言之 - 自我修改代码是不值得的。自从 1980 年代初的 PC/XT 以来，我就没有使用过它。

你为什么不跳过书中的一章？

# sql - 是否可以将新样式的内连接与外连接连接起来？

> ID：12413738
> 
> 赞同：2
> 
> 时间：2012-09-13T19:50:39.213
> 
> 标签：sql, oracle, join

是否可以将新的内连接样式与外连接结合起来？

例如，类似：

```
select * from
table1, table2
where table1.columnA = table2.columnB
left outer join table3
on table3.columnA = table1.columnA 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:52:29.120

是的，但是您必须将子句放在`WHERE`所有`FROM`and`JOIN`子句之后：

```
select * 
from table1, table2
left outer join table3 on table3.columnA = table1.columnA
where table1.columnA = table2.columnB 
```

但它丑陋且令人困惑，所以我不会完全*推荐*它。坚持一种风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:52:17.423

如果您使用 INNER 和 (LEFT) OUTER JOIN，它们必须位于 WHERE 子句之前。

# java - ai如何检测mysql的变化？

> ID：12413739
> 
> 赞同：0
> 
> 时间：2012-09-13T19:50:39.213
> 
> 标签：java, php, mysql, sql

我正在寻找一种方法来检测何时触发 sql 语句，它是哪个语句以及哪个数据库被修改。每次在 mysql 服务器（Linux 服务器/Ubuntu）上执行 sql 语句时，我都在寻找一种方法来捕获这些数据。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:51:50.820

用触发器怎么样？我以前用它们构建了复杂的审计系统，它们非常棒。

# iphone - iPhone - 20.0 和 20.0f 之间的区别

> ID：12413741
> 
> 赞同：0
> 
> 时间：2012-09-13T19:50:44.140
> 
> 标签：iphone, ios, xcode

我对我今天的经历感到非常困惑。我正在计算单元格高度。

这是代码：

```
float height = [text sizeWithFont:[UIFont systemFontOfSize:17.0f] constrainedToSize:CGSizeMake(300 - width - 20.0, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap].height; 
```

现在的问题是，当我将 ...systemFontOfSize: **17.0f**更改为 ...systemFontOfSize : **17.0**时，所以如果没有“f”，它会计算出错误的高度。

我的问题更多的是关于这个“f”代表什么以及它的作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:02:45.303

它告诉计算机这是一个浮点数。如果数字后面没有 f，则认为它是双精度数或整数（取决于是否有小数）。

```
20.0f -> float
20.0 -> double
20 -> integer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T20:04:25.980

嗯，这真的很奇怪，因为根据定义，C 将浮点数作为双精度值传递到堆栈上，并且由于 ObjC 方法变成了 C 函数，即使使用浮点数参数，浮点数也被扩展为双精度数。话虽如此，编译器可能会将 17.0 放入浮点数，然后将其扩展为双精度数，并且不知何故 iOS 正在查看该确切的二进制数（比较它），而如果您直接传递双精度数，则略有不同并最终成为分数字体。

所以我很好奇并决定尝试一个测试：

```
- (void)test:(float)foo
{
    union {
        float f;
        uint32_t u;
    } u;

    u.f = foo;
    NSLog(@"foo=%.15f hex=%x", u.f, u.u);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self test:17.0];
    [self test:17.0f]; 
```

输出：

```
2012-09-13 16:02:34.035 Searcher[73472:f803] foo=17.000000000000000 hex=41880000
2012-09-13 16:02:34.036 Searcher[73472:f803] foo=17.000000000000000 hex=41880000 
```

数字完全相同，与十六进制相同。您的代码中的其他地方显然有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:52:44.770

f 后缀只是告诉编译器哪个是浮点数，哪个是双精度数。如果没有“f”，所有计算都将具有双精度。

1.0f 浮动

1.0 双

# git - 孤儿分支的拉取请求

> ID：12413745
> 
> 赞同：6
> 
> 时间：2012-09-13T19:50:55.377
> 
> 标签：git, github, pull-request, orphan

我正在和一个朋友一起做一个托管在 github 上的小项目。

这个项目的特别之处在于我们想使用很多孤儿分支。但似乎我们不能对这样的分支进行拉取请求！？

Github 抱怨分支没有共同的历史（这当然是真的）。

所以问题是：我如何将一个完整的孤立分支从一个存储库“复制/拉”到另一个存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:38:50.737

我看不出拉取请求是如何工作的，但您可以这样做：

*   将目标存储库克隆到本地计算机。

*   创建并签出一个新的孤立分支

*   将远程分支孤儿分支合并到本地孤儿分支

*   将其推送到目标存储库。

# php - WordPress：试图让评论显示在主页上的问题

> ID：12413746
> 
> 赞同：0
> 
> 时间：2012-09-13T19:50:57.610
> 
> 标签：php, wordpress, indexing, comments

我试图让评论显示在主页上，但我遇到了问题。

```
$withcomments = 1;
comments_template(); 
```

我已将上面的 PHP 代码放在我的 index.php 文件中。出现评论框，但由于某种原因，评论没有出现。显然，这段代码是为了让评论和评论框都出现，所以我对为什么评论没有出现感到有点困惑。有没有人有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:19:08.000

如果不在单个帖子或页面上，Wordpress 不会显示评论模板。如果您想展示，那么您必须创建满足您要求的自定义功能。

当前函数位于 wp-includes >> comment-template.php 文件的第 851 行。

这是显示评论列表的自定义函数，将其放在 functions.php 主题文件中：

```
 function custom_comments_template( $file = '/comments.php', $separate_comments = false ) {
            global $wp_query, $withcomments, $post, $wpdb, $id, $comment, $user_login, $user_ID, $user_identity, $overridden_cpage;

            if ( empty($file) )
                $file = '/comments.php';

            $req = get_option('require_name_email');

            /**
             * Comment author information fetched from the comment cookies.
             *
             * @uses wp_get_current_commenter()
             */
            $commenter = wp_get_current_commenter();

            /**
             * The name of the current comment author escaped for use in attributes.
             */
            $comment_author = $commenter['comment_author']; // Escaped by sanitize_comment_cookies()

            /**
             * The email address of the current comment author escaped for use in attributes.
             */
            $comment_author_email = $commenter['comment_author_email'];  // Escaped by sanitize_comment_cookies()

            /**
             * The url of the current comment author escaped for use in attributes.
             */
            $comment_author_url = esc_url($commenter['comment_author_url']);

            /** @todo Use API instead of SELECTs. */
            if ( $user_ID) {
                $comments = $wpdb->get_results($wpdb->prepare("SELECT * FROM $wpdb->comments WHERE comment_post_ID = %d AND (comment_approved = '1' OR ( user_id = %d AND comment_approved = '0' ) )  ORDER BY comment_date_gmt", $post->ID, $user_ID));
            } else if ( empty($comment_author) ) {
                $comments = get_comments( array('post_id' => $post->ID, 'status' => 'approve', 'order' => 'ASC') );
            } else {
                $comments = $wpdb->get_results($wpdb->prepare("SELECT * FROM $wpdb->comments WHERE comment_post_ID = %d AND ( comment_approved = '1' OR ( comment_author = %s AND comment_author_email = %s AND comment_approved = '0' ) ) ORDER BY comment_date_gmt", $post->ID, wp_specialchars_decode($comment_author,ENT_QUOTES), $comment_author_email));
            }

            // keep $comments for legacy's sake
            $wp_query->comments = apply_filters( 'comments_array', $comments, $post->ID );
            $comments = &$wp_query->comments;
            $wp_query->comment_count = count($wp_query->comments);
            update_comment_cache($wp_query->comments);

            if ( $separate_comments ) {
                $wp_query->comments_by_type = &separate_comments($comments);
                $comments_by_type = &$wp_query->comments_by_type;
            }

            $overridden_cpage = false;
            if ( '' == get_query_var('cpage') && get_option('page_comments') ) {
                set_query_var( 'cpage', 'newest' == get_option('default_comments_page') ? get_comment_pages_count() : 1 );
                $overridden_cpage = true;
            }

            if ( !defined('COMMENTS_TEMPLATE') || !COMMENTS_TEMPLATE)
                define('COMMENTS_TEMPLATE', true);

            $include = apply_filters('comments_template', STYLESHEETPATH . $file );
            if ( file_exists( $include ) )
                require( $include );
            elseif ( file_exists( TEMPLATEPATH . $file ) )
                require( TEMPLATEPATH . $file );
            else // Backward compat code will be removed in a future release
                require( ABSPATH . WPINC . '/theme-compat/comments.php');
        } 
```

现在您可以在模板中使用此功能：

```
 <?php custom_comments_template( '', true ); ?> 
```

希望这个线程可以帮助你。祝一切顺利 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:36:59.823

您可以尝试使用该功能`wp_list_comments()`：

```
<ol class="commentlist">
<?php wp_list_comments(); ?>
</ol> 
```

法典中的更多信息：http: [//codex.wordpress.org/Function_Reference/wp_list_comments](http://codex.wordpress.org/Function_Reference/wp_list_comments)

# html - 仅使用 CSS 自定义复选框输入

> ID：12413747
> 
> 赞同：2
> 
> 时间：2012-09-13T19:51:02.633
> 
> 标签：html, css

我正在尝试仅使用 CSS 创建一个自定义复选框，但运气不佳。我尝试了 2 种不同的技术：

1.  [http://lea.verou.me/2011/05/rule-filtering-based-on-specific-selectors-support/](http://lea.verou.me/2011/05/rule-filtering-based-on-specific-selectors-support/)
2.  [自定义图像作为单选按钮](https://stackoverflow.com/questions/11025091/custom-images-as-radio-buttons)（derik 的建议）

第一个效果最好，并在 IE9、FF 和 Chrome 中正确显示。但是，chrome 中的功能似乎有点偏离。在 Chrome 上进行测试时，我无法单击图像来更改“已选中”，而是必须单击标签的文本。有没有人找到更好的，只有 CSS 的方式？有没有办法纠正 Chrome 中的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T20:32:12.200

迈克对此的一个很好的解决方案不是设置复选框的样式，而是设置复选框的标签并隐藏复选框按钮。

```
label { display: block; background: green; padding:10px; }
input[type="checkbox"] { display: none; }

<div>
<label for="example">Style me</label><input type="checkbox" id="example" />
</div> 
```

当您单击标签时，它将选中复选框，隐藏它并使用 css/javascript 对标签做任何您想做的事情。这比尝试设置复选框的样式更容易，因为所有浏览器都以不同的方式呈现输入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-28T19:07:29.807

您可以使用伪元素 :before。这样您仍然可以获得复选框的功能。在我的示例中，我只是更改了颜色，但您可以添加白色背景和您自己的带有背景的自定义图像：url(yourimage.png)。

在这里查看我的垃圾箱

[http://jsbin.com/ABoW/1/edit](http://jsbin.com/ABoW/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T20:13:48.707

我推荐这个版本： [http](http://equaltozero.ro/jquery-custom-form-v2-custom-input-type-checkbox-radio-and-custom-select-plugin/) ://equaltozero.ro/jquery-custom-form-v2-custom-input-type-checkbox-radio-and-custom-select-plugin/ （这是我创建的一个小插件）

也许你会发现这对你有用。:-)

根据“@Lelio Faieta”的建议，我将写下有关该链接的更多详细信息。

好吧，这个插件（jQuery 小插件）允许您使用输入类型（复选框和单选）设计，禁用操作和自定义 SELECT。这是一个可以让您更好地使用复选框的版本。

# asp.net-mvc - 如何记录控制器和操作详细信息？

> ID：12413749
> 
> 赞同：1
> 
> 时间：2012-09-13T19:51:10.910
> 
> 标签：asp.net-mvc

使用 ASP.NET MVC 4 RTW，如何将 MVC 控制器操作和参数记录到数据库？我想审核用户操作，但不想在每个控制器中复制一堆代码，或者更糟糕的是，在每个操作中复制代码。有什么我可以在全球范围内实施的吗？我了解 EF / 数据库方面的事情，所以这真的是关于 MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:20:03.183

您应该查看自定义操作过滤器。好的 MSDN 文章在这里[http://msdn.microsoft.com/en-us/library/dd381609(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd381609(v=vs.100).aspx)

filterContext.ActionDescriptor.ActionName 将为您提供要记录的操作的名称，filterContext.ActionDescriptor.ControllerDescriptor.ControllerName 可能会有所帮助，并且参数保存在 filterContext.ActionParameters

这些过滤器可以全局应用于配置 Global.asax 或 FilterConfig via 下的 App_Start 文件夹中的所有操作。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new LoggingFilterAttribute());
} 
```

**属性示例代码**

```
public class LoggingFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.HttpContext.Trace.Write("(Logging Filter)Action Executing: " +
            filterContext.ActionDescriptor.ActionName);

        base.OnActionExecuting(filterContext);
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.Exception != null)
            filterContext.HttpContext.Trace.Write("(Logging Filter)Exception thrown");

        base.OnActionExecuted(filterContext);
    }
} 
```

# jquery - 如何检查元素的类以及该类是否存在使父元素可见

> ID：12413750
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:51:12.553
> 
> 标签：jquery, css

默认情况下，父元素是不可见的。但是，根据单击的内容，子元素可能包含名为“selected”的类。我如何测试这个类，然后如果它存在，使整个列表可见？

```
 <ul style="display: none;">
       <li class="selected">a</li>
       <li>b</li>
       <li>c</li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:54:15.563

```
$('.selected').click(function(){$('li.selected').parents('ul:first').toggle()}); 
```

工作小提琴

[http://jsfiddle.net/tnCjn/](http://jsfiddle.net/tnCjn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:54:51.173

```
$('#selected').parent().show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:56:32.517

这应该适用于您的代码

```
$("#selected").parent().css("display", ""); 
```

但是如果你的意思不是Id，而是class，那么

```
$(".selected").parent().css("display", ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T19:59:26.743

试试这个

```
if( $('li').hasClass('selected')){
    $('li.selected').parent().show();
}​ 
```

检查[小提琴](http://jsfiddle.net/sushanth009/WtRAU/)

# html - 固定，100% 高度 div 导致窗口增长

> ID：12413751
> 
> 赞同：0
> 
> 时间：2012-09-13T19:51:16.003
> 
> 标签：html, css, scroll, height, fixed

我正在尝试创建一个位于论坛左侧并填充浏览器窗口高度的 100% 的 div。当您滚动时，它也会保持在固定位置。

到目前为止，我的代码在 Chrome 和 FF 中运行良好；但是，在 IE 中，当您继续向下滚动页面时，滚动条会展开，就像页面在增长一样。

```
#sidebar {
   background-color: #a75143;
   width: 240px;
   height: 100%;
   position: fixed;
   _position:absolute;
   top: 0;
   _top:expression(eval(document.body.scrollTop));
   left: 0;
   bottom: 0;
} 
```

我知道是什么原因造成的—— *_top:expression(eval(document.body.scrollTop));* --但这也是让 div 在 IE 中保持固定位置的原因。

此外，溢出：隐藏没有效果。

如果您想了解我在说什么，请在 Internet Explorer 中打开[此页面。](http://timberwoodhighs.proboards.com/index.cgi)

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:02:29.267

即使对于 IE，您也不应该需要该表达式。

以下对我来说很好......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en">
<head>

    <style type="text/css">
        #sidebar {
           background-color: #a75143;
           width: 240px;
           height: 100%;
           position: fixed;
           top: 0;
           left: 0;
           bottom: 0;
        }
    </style>

</head>

<body>
    <div id="sidebar"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:19:38.113

我能够在我的论坛上使用一些条件 CSS 和无效声明来解决这个问题。但是，上述 Jeremy 的解决方案在 ProBoards 之外效果最佳。

```
html, body { height: 100%; }
#sidebar {
   background-color: #a75143;
   width: 240px;
   height: 100%;
   position: fixed;
   _position:absolute;
   top: 0;
   _top:expression(eval(document.body.scrollTop));
   left: 0;
   bottom: 0;
}
</style>
<!--[if IE]>
<style type="text/css">
#sidebar-container { min-height: 100%; overflow: hidden; }
</style>
<![endif]-->

<div id="sidebar-container">
   <div id="sidebar">
      some content
   </div>
</div> 
```

# ios - 应用程序无法在 iPod touch 上运行

> ID：12413753
> 
> 赞同：0
> 
> 时间：2012-09-13T19:51:19.650
> 
> 标签：ios, xcode

我正在尝试在第 4 代 iPod Touch 上构建应用程序，但每次都出现“启动失败 - 无法获取进程 346 的任务”错误。我可以将它构建在 iPad 和 iPhone 上，但不能在 iPod touch 上构建。

发生的情况是它试图运行它，但屏幕随着旋转指示器变黑，并且 iPod 本身似乎进行了软重启，就像它回到锁定屏幕一样。

有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:58:36.967

如果您尝试在临时构建之上安装开发构建，有时会发生这种情况。从您的设备中删除该应用程序，然后重试。如果失败，请重新启动设备和您的机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:58:53.090

在您的 Entitlements.plist 中，检查 get-task-allow 是否设置为 true 以进行调试。

Apple [Technical Q&A QA1682](http://developer.apple.com/library/ios/#qa/qa1682/_index.html)提供了完整的解释。

# php - 拥有保存全局数据的容器类是个好主意吗？

> ID：12413756
> 
> 赞同：0
> 
> 时间：2012-09-13T19:51:26.733
> 
> 标签：php, oop, model-view-controller

我试图找到一种方法将所有 php 应用程序数据保存在一个地方。比如get和post参数、页面标题、分页结果等，避免使用全局变量。

将所有数据和控制器之间的交换保留在以下对象中是个好主意吗？

```
class container {

protected static $_instance;
protected $_instance_class;

public static function instance($instance_name = 'default')
{
    $c = __CLASS__;

    if ( ! isset($c::$_instance[$instance_name]))
    {
        $c::$_instance[$instance_name] = new $c();
        $c::$_instance[$instance_name]->_instance_class = $instance_name;
    }
    return $c::$_instance[$instance_name];
}

public function set($key, $val)
{
    // someting like $this->$key = $val;
}

public function get($key)
{
    // someting like retrun $this->$key;
}

} 
```

然后，例如在模型中

```
container::instance('messages')->set('error', 'some error'); 
```

并在控制器或视图中

```
container::instance('messages')->get('error'); 
```

或者有没有其他方法可以让数据从应用程序的任何地方都可以访问？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:00:58.073

您所谈论的内容称为[注册表模式](http://martinfowler.com/eaaCatalog/registry.html)（以及关于它的另[一篇好文章](http://css.dzone.com/books/practical-php-patterns/basic/practical-php-patterns-0)）。虽然它有一些缺点（例如，为了测试从 Registry 获取一些数据的方法，我们也必须模拟这个 Registry），但它肯定比使用全局变量或 Singletons 更好。

事实上，在 Zend Framework 1 中，这种模式是按[字面意思](http://files.zend.com/help/Zend-Framework/zend.registry.html)实现的：

```
// setting a value (usually done in Bootstrap)
Zend_Registry::set('index', $value);

// getting a value (usually in actions and/or models)
$value = Zend_Registry::get('index'); 
```

为了说明这种方法可能有什么问题，让我们分析以下内容：

```
class FooController extends Zend_Controller_Action {
    public function barAction() {
        $baz = Zend_Registry::get('baz');
        $model = new Some_Model($baz); 
        ...
    }
} 
```

问题很简单：`$baz`这里的东西是什么？它是一个对象吗？还是数组？还是其他一些野兽，例如功能或资源？您必须在这里依赖注释，这通常不是一件好事——除非您使用的是琐碎和常见的对象（如查询参数或数据库资源对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:58:02.863

*对于这种性质的事物，*对静态类进行硬编码引用的问题在于，您正在创建对这些静态类的紧密依赖。如果您决定将来更改“全局”属性的来源，那么您的应用程序中就会出现对该来源的引用。

如果您想要一个有点全局的属性实体，一个更好的方法是创建一些您将实例化的东西，并提供一个适合您的应用程序需要的接口。为了论证起见，我们称这个接口`GlobalConfigurationProvider`。然后，您的应用程序代码可能会期望（并依赖于）一些`GlobalConfigurationProvider`. 现在，如果您将来更改实现配置的方式，您只需要担心新元素 - 的新实例`GlobalConfigurationProvider`，而不是您引用配置提供程序的所有类、视图等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T20:04:04.070

不要使用全局容器类，而是考虑编程 OO 并将方法和变量放在一个类中。

在您的错误示例中，错误属于一个类，应该保留在那里。

对您的类的引用可以由全局注册表保存，或者更好的是，由 IoC 容器保存。

# javascript - 仅覆盖箭头键滚动事件

> ID：12413757
> 
> 赞同：1
> 
> 时间：2012-09-13T19:51:29.953
> 
> 标签：javascript, jquery, html, html-select

所以我正在创建一个自定义滚动框，因为标准的 html <select> 框并没有切割它（我需要显示两列，并且找不到如何使用 <select> 来执行此操作）。无论如何，我有一个可滚动的表格，它的工作方式正是我想要的。除了向上和向下箭头键触发整体滚动，而不是选择表中的前面或后面的元素。

html<select>上下适当绑定 [http://jsfiddle.net/a5YJK/](http://jsfiddle.net/a5YJK/)

我的自定义选择没有适当的上下 [http://jsfiddle.net/8zgxA/3/](http://jsfiddle.net/8zgxA/3/)

当我跑步时

```
$('#wrap *').scroll(function(e){}); 
```

我无法区分鼠标滚动和向上或向下箭头。我该如何区分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:09:00.197

只需检查滚动事件`e.keyCode`或`e.which`不存在滚动事件即可。

```
$(window).on('keyup scroll', function(e){
    console.log(e.keyCode); //undefined for mouse scroll

    if(e.keyCode && e.keyCode == 40){
        //down arrow, scroll might occur, so prevent it or do whatever
    }
}); ​ 
```

[演示](http://jsfiddle.net/mrobin/Q7KZ9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:57:31.740

```
<table onfocus="focused(1)" onblur="focused(0)" onkeypress="selectnext(event)">
.
.
.
</table>

<script type="text/javascript">
var currentrow = 0;
var tablefocused;
function focused(a)
{
switch(a)
{
case 1:
tablefocused = 1;
break;
case 0:
tablefocused = 0;
break;
}
}
function selectnext(e)
e.stopPropagation();
{
if(tablefocused==1)
{
switch(e.keyCode)
{
case 38:
currentrow = currentrow-1;
this.childNodes[currentrow].style.backgroundColor = "blue";
$('tr').css('background', '');
break;
case 40:
currentrow = currentrow+1;
this.childNodes[currentrow].style.backgroundColor = "blue";
$('tr').css('background', '');
break;
}
}
}
</script> 
```

我从这段代码中遗漏了一些细节，例如“currentrow”不应该变为-1，点击一行应该将 currentrow 的值更改为该行，等等

哦，为了防止滚动，您使用 stopPropagation() 函数来防止事件冒泡。

# django - 在 nginx 直接 memcached 缓存中实现生成？

> ID：12413758
> 
> 赞同：0
> 
> 时间：2012-09-13T19:51:30.403
> 
> 标签：django, caching, nginx

对于我的项目，我有一个这样的缓存设置：`nginx_cache(60*60)(MyView.as_view())`function sets a key in `memcached`of`nginx./URI`

Nginx 在决定从缓存返回页面或将请求发送到我的应用程序之前，会在 memcached 中查找该键。我遇到的问题是创建具有代数的缓存键，以便我可以使键组无效。

例如，对我来说理想的缓存键是`group_nameX:generationY:URL`......

Nginx 必须在不与 python 应用程序通信的情况下找出生成密钥。

这给我留下了一个人为的想法：通过 django 设置三个缓存值；

*   组名，无需与应用程序对话即可被 nginx 找到
*   该特定组名的世代号
*   完整的缓存键/输出（html 页面）

在 nginx 方面，我想我需要使用`LuaModule`and `Memc`。我从来没有使用过非香草 nginx，所以对我来说最好避免使用它，但我不知道我是否有选择。

[http://wiki.nginx.org/HttpLuaModule#ngx.location.capture](http://wiki.nginx.org/HttpLuaModule#ngx.location.capture)
[http://wiki.nginx.org/NginxHttpMemcModule](http://wiki.nginx.org/NginxHttpMemcModule)

我需要设置两个使用 Memc 获取密钥的内部位置指令。

我的主要位置指令会...

*   `$genkey set_by_lua`（捕获内部位置 get_key_name）
*   `$gen_number set_by_lua`（捕获内部位置 get_key_number_from_name）
*   `$memcached_key "$genkey-$gen_number-$request_uri"`

有没有办法简化这个缓存设置？有我不知道的普遍接受的方法吗？（可能 - 我正在编造这个！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:21:52.677

我可能会误解你想要什么，但你不能：

1.  在应用程序输出中添加一个 X-Generation（或任何你想称之为的）http 标头
2.  然后只需使用该值设置 memcached_key

在 nginx 方面，会产生类似的东西：

```
location /app/ {
  #add you're normal directives for app calling
  set $memcached_key group_nameX:$sent_http_X_Generation:$request_uri;
} 
```

有关访问 http 响应标头值的变量的更多信息，请参阅[http://wiki.nginx.org/HttpCoreModule#.24sent_http_HEADER](http://wiki.nginx.org/HttpCoreModule#.24sent_http_HEADER)

# python - 插入表 MySQL 和 Python

> ID：12413761
> 
> 赞同：0
> 
> 时间：2012-09-13T19:51:44.630
> 
> 标签：python, mysql

我运行以下代码，在研究了网络之后，我偶然发现了一种使用 Python 将记录插入 MySQL 的方法。我执行了以下代码

```
i = 0

for j in range(starting_index,ending_index):
    for i in range(0,len(s)):
            c.append(nnp_array_index_coloumn.count(i))
            add1 = add1 + c[i-1]
            add2 = add1 + c[i]
            var_string_1 = ', '.join('?' * len(nnp_array[add1:add2]))
            cursor.execute("INSERT INTO tblauto_tagged ( propernoun_SRNO,tagger,train ,propernoun,propernoun_ID)VALUES (%d, %s,%s, %s, %s)" % (j, str(iput),str(corpora), var_string_1,"AUX" ))
            for item in nnp_array_index_coloumn:
                    if item not in uniques:
                            uniques.append(item)
                            add1=0;add2=0 
```

## 产生了以下错误

```
Traceback (most recent call last):
File "C:/Users/vchauhan/Desktop/test_for_write.py", line 111, in <module>
cursor.execute("INSERT INTO tblauto_tagged ( propernoun_SRNO,tagger,train ,propernoun,propernoun_ID)VALUES (%d, %s,%s, %s, %s)" % (j, str(iput),str(corpora), var_string_1,"AUX" ))
Error: ('07001', '[07001] [MySQL][ODBC 5.1 Driver][mysqld-5.1.61-community]SQLBindParameter not used for all parameters (506) (SQLExecDirectW)') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:56:47.977

您*永远*~~不会~~ 在. 请参阅[db api 常见问题解答](http://wiki.python.org/moin/DbApiFaq)*`.execute()`*

 *用这个：

```
q = """
      INSERT INTO
        tblauto_tagged
        (
           propernoun_SRNO,
           tagger,
           train,
           propernoun,
           propernoun_ID
         ) VALUES (
           %d,
           %s,
           %s,
           %s,
           %s
          )
       """
cursor.execute(q,(j,str(iput),str(corpora),var_string_1,"AUX")) 
```*

# java - int 到缓冲区字节

> ID：12413764
> 
> 赞同：0
> 
> 时间：2012-09-13T19:51:51.917
> 
> 标签：java, bytebuffer

我有以下内容：

```
byte[] l = ByteBuffer.allocate(16).putInt(N).array(); 
```

但它将字节放在数组的开头而不是结尾我如何把它放在结尾？我也尝试过以下方法：

```
byte[] l = ByteBuffer.allocate(16).putInt(15 - (int)Math.ceil((Math.log(N)/Math.log(2))/8), N * 8).array(); 
```

但似乎适用于某些数字，但在其他数字中得到 ArrayIndexOutOfBoundsIndexException （它们低于 2 ^(16)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:33:27.583

> 它将字节放在数组的开头而不是末尾我如何将它放到末尾？我也尝试过以下方法：

这就是问题所在。尽管您调用`ByteBuffer.allocate(16)`，但这只是将容量设置为 16，但您的缓冲区仍然是空的。因此，当您尝试在索引 15 处添加内容时，那里什么也没有，您会得到一个 ArrayIndexOutOfBoundsException，因为缓冲区的大小仍然为 0，而您正在访问索引 15。在缓冲区填满之前，您无法写入缓冲区的末尾那个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:11:15.717

如前所述，ByteBuffer.putInt 将始终写入 4 个字节。那么怎么样

```
byte[] l = ByteBuffer.allocate(12).putInt(N).array(); 
```

以下程序显示了差异：

```
 int N = 99;

  byte[] l = ByteBuffer.allocate(16).putInt(N).array();
  System.out.println("N at start: " + DatatypeConverter.printHexBinary(l));

  l = ByteBuffer.allocate(16).putInt(12,N).array();
  System.out.println("N at end:   " + DatatypeConverter.printHexBinary(l)); 
```

打印出以下内容：

```
N at start: 00000063000000000000000000000000 
N at end:   00000000000000000000000000000063 
```

# html - 是否将溢出：自动设置为除 html 以外的所有元素是不好的做法？

> ID：12413767
> 
> 赞同：1
> 
> 时间：2012-09-13T19:52:04.100
> 
> 标签：html, css, overflow

在开始一个新设计时，我总是在我的样式表开始时推翻浏览器对所有元素的默认填充和边距：

```
* { margin: 0; padding: 0; } 
```

在阅读[了 j08691 关于保证金崩溃问题的答案后，](https://stackoverflow.com/a/12412985/880619)我意识到`overflow: auto`固定的比我所知道的要多。我想知道在 `overflow: auto`里面添加所有元素是否有用`html`（你不想在那里松开滚动条）。所以：

```
html * { overflow: auto; } 
```

我尝试将此规则添加到我们的一个站点，乍一看这很好用，但我担心它可能会破坏更奇特的元素（我现在不使用，但以后可能会）和... Internet Explorer .

你们中有人有默认的经验`overflow: auto`吗？这是一件坏事吗？我应该选择更温和的版本并`overflow: auto`仅在`div`元素上定义默认值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:54:55.080

是的，我确实认为这是不好的做法。仅当您不知道内容是否会破坏元素的大小时才应使用它。

# php - 使用 sfWidgetFormSelectCheckbox 从数据库中提取选择数组

> ID：12413775
> 
> 赞同：0
> 
> 时间：2012-09-13T19:52:39.060
> 
> 标签：php, widget, doctrine, symfony-1.4

我在 symfony 中设置了 3 个表：

一个翻书表、一个技能表和一个关系表，用于将每个技能 ID 与每个翻书 ID 连接起来。

当我构建模型时，symfony 正确构建了所有内容，并且默认为技能提供了一个下拉菜单，其中包含技能表中的所有技能作为选项。您可以选择一个选项，它会创建适当的关系。

我需要技能是多个选择的复选框，而不是单个选择下拉菜单，所以我正在使用`sfWidgetFormSelectCheckbox`小部件。

文档说使用“选择”来填充多个选择，如下所示：

```
$this->widgetSchema['skill_id'] = new sfWidgetFormSelectCheckbox(
  array('choices' => "choice1", "choice2", choice3"), 
  array('class' => 'text size-500')); 
```

我不知道如何从选项数组中的技能表中加载选项。我知道它们在某处，因为它们最初包含在默认小部件中。如何将它们拉出到单个复选框输入元素，其中值与技能 ID 匹配。

一些代码怎么样？

**架构：**

```
Flipbook:
  tableName: flipbook
  inheritance:
    extends: SvaGeneric
    type: concrete
  columns:
    title: { type: string(255) }
    career_associations: { type: clob }
    skills: { type: string(255) }
    skills_associations: { type: clob }
    program: { type: string(255) }
    program_associations: { type: clob }
    draft_id: { type: integer(10) }

FlipbookSkills:
  tableName: flipbook_skills
  columns:
    title: { type: string(255) }
  relations:
    Flipbook:
      foreignAlias: flipbook_skills
      alias: skills
      local: title
      onDelete: SET NULL   

FlipbookSkillRelations:
  tableName: flipbook_skill_relations
  actAs:
    SoftDelete: ~
  options:
  columns:
    flipbook_id: { type: integer(10), notnull: false }
    skill_id: { type: integer(10), notnull: false }
  relations:
    Flipbook:
      foreignAlias: flipbook_skills_flipbook
      alias: flipbook
      local: flipbook_id
      onDelete: CASCADE
    FlipbookSkills:
      foreignAlias: flipbook_skills_skills
      alias: flipbookskills
      local: skill_id
      onDelete: CASCADE 
```

**FlipbookSkillsRelationsForm.class.php：**

```
$this->widgetSchema['flipbook_id'] = new sfWidgetFormInputText(array(), array('class' => 'text size-500'));

$this->widgetSchema['skill_id'] = new sfWidgetFormSelectCheckbox(array('choices' => "**WHAT GOES HERE??**"), array('class' => 'text size-500'));

$useFields = array(
  'flipbook_id',
  'skill_id',
);

$this->useFields($useFields); 
```

让我知道我是否应该提供进一步的代码或解释。

**更新**

下面是模型中生成的 FlipbookSkillsTable.class：

```
<?php

/**
 * FlipbookSkillsTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class FlipbookSkillsTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object FlipbookSkillsTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('FlipbookSkills');
    }

    public function retrieveForFilter()
    {
      $res = $this->createQuery('s')
        ->select('s.id, s.name')
        ->orderBy('s.name ASC')
        ->execute(array(), Doctrine_Core::HYDRATE_NONE);

      // if you want an empty line
      $rets = array('' => '');
      foreach ($res as $ret)
      {
        $rets[$ret[0]] = $ret[1];
      }

      return $rets;
    }

    public function getAllFlipbookSkills() {
        $allSkills = Doctrine_Query::create()
            ->from('FlipbookSkills')
            ->orderBy('title ASC')
            ->execute();
    return $allSkills;
    }
} 
```

如果没有收到“未定义的方法”错误，我似乎无法从此文件中调用任何函数。我想这将是一个架构错误？

**更新 2**

这是正常工作的：

```
$this->widgetSchema['skill_id'] = new sfWidgetFormSelectCheckbox(array('choices' => Doctrine::getTable('FlipbookSkills')->getFlipbookskills()), array('class' => 'text size-500')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:43:52.973

我通常这样做：

添加一个自定义方法来检索 中的技能数组`SkillTable.class.php`，例如：

```
 /**
   * Retrieve array for display the select list for filter
   *
   * @return array
   */
  public function getFlipbookskills()
  {
    $res = $this->createQuery('s')
      ->select('s.id, s.name')
      ->orderBy('s.name ASC')
      ->execute(array(), Doctrine_Core::HYDRATE_NONE);

    // if you want an empty line
    $rets = array('' => '');
    foreach ($res as $ret)
    {
      $rets[$ret[0]] = $ret[1];
    }

    return $rets;
  } 
```

然后在您的表单中，将其称为：

```
$this->widgetSchema['skill_id'] = new sfWidgetFormSelectCheckbox(
  array('choices' => Doctrine::getTable('FlipbookSkills')->getFlipbookskills()), 
  array('class' => 'text size-500')
); 
```

# components - 第一个组件构建，需要帮助添加 joomla 类别功能

> ID：12413778
> 
> 赞同：0
> 
> 时间：2012-09-13T19:52:48.103
> 
> 标签：components, joomla1.5

我已经创建了一个产品输入组件的开头，它允许用户编辑现有产品或通过管理员部分输入新产品。我想采取的下一步（并且需要指导）是如何对产品进行分类。所以我会有类似的东西：

主板 - 奔腾 - 至强 - AMD

硬盘驱动器 - SATA - USB

基本示例，但我希望它能够理解重点。我看到 Joomla 在哪里有一个类别组件，但是我还没有找到一个很好的教程来说明我可以如何使用它。我想像使用文章一样为产品创建类别，然后将单个产品分配到这些类别中。

您能给我的任何指导将不胜感激，如果您需要更多信息，请随时提出任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:53:16.353

[http://docs.joomla.org](http://docs.joomla.org)实际上有很好的教程。 [http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories)

如果您是初学者，您真的应该查看整个教程，或者您可能想要获得 Joomla！编程书。

# c# - 未找到 MVC 4 SimpleMembership HasLocalAccount 方法

> ID：12413780
> 
> 赞同：7
> 
> 时间：2012-09-13T19:52:55.770
> 
> 标签：c#, asp.net-mvc-4, simplemembership

尝试`/account/manage`在生产服务器上访问时出现此错误：

```
System.MissingMethodException: Method not found: 'Boolean WebMatrix.WebData.ExtendedMembershipProvider.HasLocalAccount(Int32)'.
   at Microsoft.Web.WebPages.OAuth.OAuthWebSecurity.HasLocalAccount(Int32 userId)
   at PROJECT.Controllers.AccountController.Manage(Nullable`1 message)
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at Castle.Proxies.AsyncControllerActionInvokerProxy.InvokeActionMethod_callback(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at Castle.Proxies.Invocations.ControllerActionInvoker_InvokeActionMethod.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Glimpse.Mvc3.Interceptor.InvokeActionMethodInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.AsyncControllerActionInvokerProxy.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult)
   at System.Web.Mvc.Controller.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult)
   at System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__4(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

它在本地主机上工作正常。谷歌搜索一无所获。

还应该注意的是，我正试图让这个“简单”的成员资格提供程序在 sql 服务器上工作，而不是让它创建一个数据库。

ps 我在共享主机上。

**编辑**添加了完整的堆栈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T15:27:38.460

这个函数唯一做的就是查询`webpages_Membership`表。我的解决方法是复制该功能。如果我得到一个真正的答案，我会更新

```
internal static bool HasLocalAccount(int userId)
        {
            using (YOUREntities db = new YOUREntities ()) 
            {
                webpages_Membership wm = db.webpages_Membership.Where(x => x.UserId == userId).FirstOrDefault();

                if (wm != null) return true;
                return false;
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T13:06:22.497

Eonasdan 发布的原始功能对我不起作用。我不得不稍微调整一下才能让它工作。如果它对任何人有帮助，这里是：

```
@functions{
internal static bool HasLocalAccount(int userId){
    using ( var db = Database.Open("your_database_name") ) {
        dynamic id = db.QueryValue(@"SELECT UserId FROM webpages_Membership WHERE UserId=@0", userId);
        return id != null; // returns true if id is not null
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T07:57:08.977

I had this problem as well. In my case it was because I didn't have the MVC 4 binaries installed on my server.

The following SO question has instructions to install it:

*   [How to install ASP.NET MVC4 RC on a server (2008 and above )](https://stackoverflow.com/questions/10941011/how-to-install-asp-net-mvc4-rc-on-a-server-2008-and-above)

Then retry your account/manage link - it should work.

NB remember to unhack your HasLocalAccount() (if you implemented the workaround contained in other answers here).

# jquery - 使用rails中的下拉和Jquery重定向到编辑路径

> ID：12413781
> 
> 赞同：1
> 
> 时间：2012-09-13T19:52:59.573
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一个选择下拉项目。当用户选择项目时，我需要重定向到 item_id 的 edit_item_path。例如，如果用户选择了 id = 5 的项目，我需要重定向到 items/5/edit 路径

如何在 rails 3 和 jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:23:14.030

假设您的下拉列表如下所示：

```
<select id="editable_pages">
  <option value="1">Edit 1</option>
  <option value="2">Edit 2</option>
</select> 
```

在这种情况下，下面的 jquery 片段应该可以工作：

```
$('#editable_pages').change(function() {
    window.location = "items/+ $(this).find(":selected").text() +/edit";
}); 
```

更好的解决方案是使用 rails 路线助手。为此，您可以为每个选项添加带有 url 的 html5 数据属性，例如：

```
<option value="1" data-edit-url="<%= edit_item_url(1) %>">Edit 1</option>

$('#editable_pages').change(function() {
    window.location = $(this).find(":selected").data('edit-url');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T20:21:46.970

我会做这样的事情......

```
<% @item_paths = {""=>"", "Item 5" => edit_item_path(5), "Item 4" => edit_item_path(4)}%>
<%= select_tag :edit_item, options_for_select(@item_paths)%>

<script type="text/javascript">
      $('#edit_item').change(function() {
      window.location = $(this).find('option:selected').val();
      });
 </script> 
```

# cocoa - 通过 -setFrame 以外的方式设置的 NSView 框架：在自动调整大小之后

> ID：12413784
> 
> 赞同：2
> 
> 时间：2012-09-13T19:53:21.883
> 
> 标签：cocoa, nsview, autoresizingmask

我的应用程序通过`NSWindowController`. 在`-windowDidLoad`中，我根据窗口大小以编程方式设置按钮的框架，这取决于哪些按钮可见）。在 XIB 中为这些按钮适当地设置了自动调整大小的蒙版。问题是当窗口实际出现时，按钮看起来好像没有应用自动调整大小。

在调试这个问题时，我在调用 super's 后`NSButton`继承并覆盖`-setFrame:`以打印 frame ( ) 。使用它，我观察到框架设置了两次：首先是通过我的编程布局代码（调用此框架 A），然后一旦 Cocoa 根据用户偏好调整窗口大小（应用自动调整大小掩码，将框架设置为 B）。这些框架看起来都正确。`[self frame]``-setFrame:`

然而，当窗口出现时，就好像后一个`-setFrame:`调用没有持久的效果——按钮的框架现在回到了 A。这通过在调试器中中断并打印框架来验证——自动调整框架的更新已经恢复，但`-setFrame:`再也没有被叫过。

关于我为什么会看到这种行为的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T16:22:58.477

它最初会在`superview`被调整大小`setFrameSize:`时发生，但更常见的是在调用`superview`'`layoutSubtreeIfNeeded`方法时发生，而后者又会调用视图的`resizeWithOldSuperviewSize:`. 您可以通过子类化`NSView`, 在您的情况下`NSButton`，并`resizeWithOldSuperviewSize:`使用空方法覆盖来覆盖它

```
- (void)resizeWithOldSuperviewSize:(NSSize)oldSize {} 
```

但是，您也可以通过声明您不希望`NSView`自动布局系统调整大小来更优雅地解决问题。您可以通过以下方式做到这一点：

```
[<id> setAutoresizingMask:NSViewNotSizable];
[<id> setTranslatesAutoresizingMaskIntoConstraints:YES]; 
```

`<id>`你的实例在哪里`NSView`，所以如果你有一个出口

```
@property (weak) IBOutlet NSButton *myButton; 
```

那么你会设置

```
[self.myButton setAutoresizingMask:NSViewNotSizable];
[self.myButton setTranslatesAutoresizingMaskIntoConstraints:YES]; 
```

`setFrame:`然后用你想要的框架调用。第一行声明视图不是可调整大小的，而第二行声明掩码应该被自动布局系统视为一个约束。希望有帮助！

**编辑：** 对不起，出于某种原因，我将您的问题读作与我建议的相反，自动布局正在覆盖您的更改。但是，您想知道相反的情况。如果您正在使用`setAutoresizingMask:`，您尝试过`setTranslatesAutoresizingMaskIntoConstraints:YES`吗？如果您可以发布一个最小的工作示例，这也会有所帮助。

# python - 无法使用 macports install 导入 Python scipy 模块

> ID：12413790
> 
> 赞同：2
> 
> 时间：2012-09-13T19:54:02.003
> 
> 标签：python, osx-lion, scipy, macports

我刚刚重新安装了 OSX Lion，并决定使用 macports 来获取更新的 python，以及 numpy、scipy、matplotlib、ipython 等。经过一番大惊小怪，一切看起来都正确安装在 /opt/ 文件夹中，并且 numpy、matplotlib 和 ipython运行正常，但是当我尝试在 scipy 中导入模块时，我遇到了一个似乎回到稀疏模块的故障：

```
>>> import scipy.sparse as sparse
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/__init__.py", line 175, in <module>
from csr import *
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/csr.py", line 12, in <module>
from sparsetools import csr_tocsc, csr_tobsr, csr_count_blocks, \
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/sparsetools/__init__.py", line 4, in <module>
from csr import *
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/sparsetools/csr.py", line 25, in <module>
_csr = swig_import_helper()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/sparsetools/csr.py", line 21, in swig_import_helper
_mod = imp.load_module('_csr', fp, pathname, description)
ImportError: dlopen(/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/sparse/sparsetools/_csr.so, 2): Symbol not found: ___emutls_get_address
  Referenced from: /opt/local/lib/gcc45/libstdc++.6.dylib
  Expected in: /usr/lib/libSystem.B.dylib
 in /opt/local/lib/gcc45/libstdc++.6.dylib 
```

导入 scipy.stats 或类似的东西最终在同一个地方。我搜索了一堆并尝试修复各种 PATH 变量（在 python 解释器中和输出），以及隐藏默认的 python 安装（s？主库中的那个和 /usr/ 中的有什么区别？ ) 并重新安装 scipy，但什么也没做。

我对这些东西不是很熟悉或不舒服 - 在我擦拭并重新安装之前，我正在与 EPD 合作，但在获取新软件包以识别它之前遇到了问题。我将 python 用于科学的东西，因此并没有真正理解它的胆量！因此，非常感谢假设我几乎不了解 PATH 变量是什么的答案。

那么（a）有没有一种简单的方法来解决上面发生的事情？(b) 我应该删除一些东西并从头开始吗？(c) 是否有一种非痛苦的方式来获取 scipy、numpy、matplotlib 和 ipython（以及 qtconsole 和 html 笔记本所需的东西），并且能够在正确的位置安装新包？如果可能的话，我是否应该回到环保署（他们的学术电子邮件对我来说失败了，所以我继续前进）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:24:12.337

你可以试试[Enthought Python Free 发行版](http://www.enthought.com/products/epd_free.php)，它是免费的，而且通常很容易安装，并带有 Numpy、Scipy、matplotlib 等。

# python - Python 分布式/网络网络应用程序

> ID：12413792
> 
> 赞同：1
> 
> 时间：2012-09-13T19:54:03.487
> 
> 标签：python, web-applications, distributed

我应该构建一个小而简单的分布式（或者更确切地说是联网的）Web 应用程序，其中节点可以直接相互发送消息。我不知道如何解决这个问题。我知道如何通过套接字编程和桌面 UI 构建一个简单的分布式应用程序，而且我知道如何制作一个简单的我应该说是传统的服务器 - 客户端 Web 应用程序，但是通过使用 Web 技术来制作一个分布式 Web 应用程序......好吧，我没有线索。

我们的想法是拥有一个至少有一个服务器和 3 个以上客户端节点的小型系统。客户端节点应该能够相互交换消息，也应该能够与服务器交换消息。客户端必须能够在浏览器上显示交换的消息。我已经从这里阅读了教程、指南甚至一些相关的问题，关于如何做到这一点，但我不只是明白。我什至不知道从哪里开始。

我应该尝试使用 Django 和 AJAX 吗？对他们来说，我再次坚持认为流量仅在服务器和客户端之间，而不是在客户端之间。

我已经坚持了一个星期了，我变得非常绝望。有什么提示吗？任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:30:12.010

您可以使用[zeroMQ](http://www.zeromq.org/ "零MQ")。

是一个高性能异步消息库，旨在用于可扩展的分布式或并发应用程序。它提供了一个消息队列，但与面向消息的中间件不同，ØMQ 系统可以在没有专门的消息代理的情况下运行。该库旨在具有熟悉的套接字样式 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:12:07.077

基本上你应该设置你的服务器监听传入的客户端连接。然后，当它收到来自其中一个客户端的消息时，它应该将消息发送给所有连接的客户端。

困难的部分是您需要保持与每个客户端的开放连接。如果您使用 Django 之类的 Web 应用程序框架，这会有些复杂。

您也可以自己对服务器进行编程。它在概念上比使用 Django 或 Ajax 更清晰，并且是一个很好的学习练习。使用 python [SocketServer](http://docs.python.org/library/socketserver.html "套接字服务器")库。该库中的示例已经包含聊天客户端和服务器。

或者，您可以使用[Tornado](http://www.tornadoweb.org/ "龙卷风")网络服务器和[websockets](http://www.tornadoweb.org/documentation/websocket.html "网络套接字")进行尝试。Tornado 是一个高性能的异步网络服务器。Websockets 是相当新的 javascript 功能，允许您保持从服务器到客户端的永久连接打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:31:44.580

[asyncoro](http://asyncoro.sourceforge.net)是一个用于异步、并发、分布式、网络编程的 Python 框架，支持消息传递和通道，以便于点对点通信。如有必要，您还可以使用套接字来交换消息。示例目录中的文件 'remote_coro_*.py' 和 'remote_channel_*.py' 应该可以帮助您开始。

免责声明：我开发了 asyncoro。

# javascript - Jquery在函数之间传递表行

> ID：12413796
> 
> 赞同：0
> 
> 时间：2012-09-13T19:54:17.017
> 
> 标签：javascript, jquery, crud

我有一个使用 jQuery 编写的简单网格布局。我有一个问题。我想一次只允许一个编辑行。所以我跟踪当前的编辑行并在单击下一个编辑按钮时将其重置。仍然当我下次单击编辑时，它允许我进行编辑。completeEdit 工作正常，因为我也通过传递当前行从取消按钮调用它。

```
 var currentRowEdit =null;

   $(tableid + ".edit").live('click', function(event) {
            currentRowEdit = $(this).parent().parent();
            editRow(currentRowEdit);
    });

function editRow(row){
        if(currentRowEdit!=null){
            completeEdit(currentRowEdit);               
        }              
           $(row).find(".save").show();
           $(row).find(".cancel").show();
           $(row).find(".edit").hide();

    }

function completeEdit(row){             
         $(row).find(".save").hide();
          $(row).find(".cancel").hide();
         $(row).find(".edit").show();              
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:56:32.237

```
function completeEdit(row){
   $(row).find(".save").hide();
   $(row).find(".cancel").hide();
   $(row).find(".edit").show();   
   currentRowEdit = null; // reset the currentRowEdit
} 
```

### 根据评论

您的代码没有隐藏`.save`and`.cancel`按钮。因为，如果您查看代码流，您会注意到，在`completeEdit()`您`.show()`为这些按钮使用方法的函数之后。

结果，您的按钮在`completeEdit()`完成后隐藏，但在执行其余代码后`editRow()`，这些按钮再次变为可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:01:42.240

我相信您在同一行上调用了 completeEdit 和 editRow 。您应该在上一个上调用 completeEdit，在新上调用 editRow

```
 var currentRowEdit =null;

   $(tableid + ".edit").live('click', function(event) {
            completeEdit(currentRowEdit);
            currentRowEdit = $(this).parent().parent();
            editRow(currentRowEdit);
    });

function editRow(row){

           $(row).find(".save").show();
           $(row).find(".cancel").show();
           $(row).find(".edit").hide();

    }

function completeEdit(row){
         if(row==null){
           return;

        }
         $(row).find(".save").hide();
          $(row).find(".cancel").hide();
         $(row).find(".edit").show();    

    } 
```

# php - 如何在 Joomla 中创建表格？

> ID：12413799
> 
> 赞同：0
> 
> 时间：2012-09-13T19:54:27.073
> 
> 标签：php, joomla

我将启动 Joomla 做一些工作。在此之前我从未尝试过 Joomla。我有一个源代码，但我坚持创建表。如何使用命令行创建表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:26:45.183

也许您应该从[Joomla Component Creator](http://www.notwebdesign.com/joomla-component-creator/)开始，它将创建自定义组件所需的大部分文件。

# macos - fsevents-daemon vs FSEvents API

> ID：12413804
> 
> 赞同：1
> 
> 时间：2012-09-13T19:54:50.803
> 
> 标签：macos, cocoa, fsevents

I was checking apple Developer Documentation about FSEvents , but later in dropbox forums, i found this [https://forums.dropbox.com/topic.php?id=20771](https://forums.dropbox.com/topic.php?id=20771),

" I believe one would not use fsevents-daemon directly but would use the FSEvents API. .... "

Whats the difference between fsvents-daemon and FSEvents API. I wanted to Monitor File System changes in Mac OS , which will be the effective solution for me ? Whats the difference between fseventsd and dbfseventsd(Dropbox's).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:49:47.527

FSEvents daemon - your own Daemon reading /dev/fsevents to get File System Notifications. FSEvents API - Mac OS X's fseventsd process will read /dev/fsevents and gives you the File System Event Notifications.

Running your FSEvents Daemon will be best since it's from Kernel Space and will be faster than FSEvents API which is from User Space. Using FSEvents API with large number of Directory Hierarchies will be memory consuming too.

# database - Rails 3 无法重新创建数据库 - db:migrate 挂起

> ID：12413812
> 
> 赞同：0
> 
> 时间：2012-09-13T19:55:15.637
> 
> 标签：database, ruby-on-rails-3

我在本地对我的应用程序进行了一些测试，然后遇到了数据库死锁的情况。经过一番谷歌搜索后，我决定因为它只是开发人员，所以我会炸毁数据库并重新创建它。

只有这行不通。我已经重新创建了几次数据库，但从未遇到任何问题。

我可以运行一个 db:drop ok 并且 db:create 工作，但是当我运行 db:migrate 它只是挂起。

我已经重新启动，以防一个进程在数据库上有某种锁定但没有变化。

没有错误，当我这样做时 --trace 我一点也不聪明。

任何帮助将不胜感激，即使从哪里开始调试问题

这就是我对数据库配置的...

开发：适配器：sqlite3 数据库：db/dev.sqlite3 池：5 超时：5000

测试：适配器：sqlite3 数据库：db/test.sqlite3 池：5 超时：5000

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:27:59.727

我不是 100% 我是否应该说这个问题得到了回答，但它是固定的。感谢您的帮助，weexpectedTHIS，我开始查看 environment.rb、application.rb 和 boot.rb。我不会在里面放太多东西。我在 Environment.rb 中看到 my_app::Application.initialize! 行。

我假设这是它被冻结的地方。我对此进行了注释，果然 webrick 会加载，我至少可以运行 rake db:migrate 即使它失败了，我也可以进入 rails 控制台。显然，如果没有我注释掉的那行，该应用程序根本无法工作。所以我启动了控制台，注释掉了不同的东西，最终被注释掉的只是 my_app::Application.initialize！线。

我在rails控制台中输入了那条线，它挂了，我取消并再试了几次，然后砰的一声，它在几次运行后就正常了。不知道为什么。我遇到了其他有类似问题的人，但他只是奇迹般地开始工作，没有明显的原因。不幸的是，我在同一条船上，对将来遇到这种情况的人没有太大帮助。

应用程序初始化肯定有问题，但我不知道到底是什么。

此链接将详细介绍 Rails 中的初始化过程，因此如果有人遇到类似问题，可能需要阅读以获取想法。

[http://guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)

# log4j - 同一个 log4j 文件中的多个附加程序

> ID：12413814
> 
> 赞同：0
> 
> 时间：2012-09-13T19:55:22.067
> 
> 标签：log4j, rollingfileappender, smtpappender

我目前正在尝试将 log4j 配置为使用 2 个附加程序。调试信息应发送至日志，错误应发送至电子邮件地址以便立即处理。

目前，我的属性文件如下所示：

```
log4j.category.myCategory=DEBUG, myLogAppender
log4j.category.myCategory=ERROR, myEmailAppender

# myLogAppender is set to be a FileAppender.
log4j.appender.myLogAppender=org.apache.log4j.RollingFileAppender
log4j.appender.myLogAppender.File=d:/myLogs.log
log4j.appender.myLogAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.myLogAppender.layout.ConversionPattern=%-4r [%t] %-5p %c - %m%n
log4j.appender.myLogAppender.MaxFileSize=100KB
log4j.appender.myLogAppender.MaxBackupIndex=1

# myEmailAppender is set to be a EmailAppender.
log4j.appender.myEmailAppender=org.apache.log4j.net.SMTPAppender
log4j.appender.myEmailAppender.BufferSize=1
log4j.appender.myEmailAppender.SMTPHost=myHost
log4j.appender.myEmailAppender.From=error@mydomain.com
log4j.appender.myEmailAppender.Subject=Error in the module
log4j.appender.myEmailAppender.To=error@mydomain.com
log4j.appender.myEmailAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.myEmailAppender.layout.ConversionPattern=%-4r An error occured in the module. Please refer the myLogs.log on the server to get more details. The message was: [%t] %-5p %c - %m%n 
```

出于某种原因，log4j 仅发送具有此配置的邮件。一旦我注释掉第二行，log4j 就开始追加到日志文件中。

我做错什么了？如何获取调试信息以获取日志并将错误发送到邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:22:31.720

您应该使用某种过滤器，该过滤器使用有关您的任务级别的信息。但是只有 XML（不是属性文件）类型的配置支持使用过滤器。有关详细信息，请参阅：[http ://wiki.apache.org/logging-log4j/LogToAppenderByLevel](http://wiki.apache.org/logging-log4j/LogToAppenderByLevel)

# javascript - 从 Rally 中获取特定标签以计算另一个字段中的值

> ID：12413817
> 
> 赞同：2
> 
> 时间：2012-09-13T19:55:30.880
> 
> 标签：javascript, rally

我对拉力赛的开发非常陌生，所以我的问题可能听起来很愚蠢（但无法从拉力赛的帮助或以前的帖子中找到如何做到这一点）:)

我从集会自由格式网格示例开始——我的目的是实现一个商业价值计算器：我用一个 5 位数字填充分数字段，其中每个数字都是 1-5 范围内的分数。然后我计算一个商业价值作为计算的结果，其中每个数字都按预设的权重加权。我可以按商业价值对我的故事进行排序，以帮助我确定我的待办事项的优先级：这是第一步，而且很有效。

现在我想做的是让我的自由格式网格可编辑：我将我的每个数字提取为一个单独的列，但这些列是仅显示的。我怎样才能把它们变成可编辑的东西？我想要做的当然是根据每个自定义列中输入的值更新分数字段。

下面是一个例子：我有一个分数为“15254”的记录，这意味着商业价值标准 1 得分 1 分（满分 5 分），商业价值标准 2 得分 5 分（满分 5 分），依此类推......最后我的商业价值被计算出来如“1 * 1 + 5 * 2 + 2 * 3 + 5 * 4 + 4 * 5 = 57”。到目前为止，这是有效的部分。现在假设我发现第三个条件不应该得分 2 而是 3，我希望能够编辑相应列中的值并将我的得分字段更新为“15354”，并将我的商业价值显示为 60 而不是 57 .

这是我当前的代码，如果您能帮助我将该网格变成可编辑的东西，我将不胜感激:)

```
<!--Include SDK-->
<script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p2/sdk-debug.js"></script>

<!--App code-->
<script type="text/javascript">

    Rally.onReady(function() {

        Ext.define('BVApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {
            Ext.create('Rally.data.WsapiDataStore', {
                    model: 'UserStory',
                    autoLoad: true,
                    listeners: {
                        load: this._onDataLoaded,
                        scope: this
                    }
                });
            },

            _onDataLoaded: function(store, data) {
                var records = [];
                var li_score;
                var li_bv1, li_bv2, li_bv3, li_bv4, li_bv5, li_bvtotal;
                var weights = new Array(1, 2, 3, 4, 5);

                Ext.Array.each(data, function(record) {
                    //Let's fetch score and compute the business values...
                    li_score = record.get('Score');
                    if (li_score) {
                        li_bv1 = li_score.toString().substring(0,1);
                        li_bv2 = li_score.toString().substring(1,2);
                        li_bv3 = li_score.toString().substring(2,3);
                        li_bv4 = li_score.toString().substring(3,4);
                        li_bv5 = li_score.toString().substring(4,5);
                        li_bvtotal =
                            li_bv1*weights[0] +
                            li_bv2*weights[1] +
                            li_bv3*weights[2] +
                            li_bv4*weights[3] +
                            li_bv5*weights[4];
                    }
                    records.push({
                        FormattedID: record.get('FormattedID'),
                        ref: record.get('_ref'),
                        Name: record.get('Name'),
                        Score: record.get('Score'),
                        Bv1: li_bv1,
                        Bv2: li_bv2,
                        Bv3: li_bv3,
                        Bv4: li_bv4,
                        Bv5: li_bv5,
                        BvTotal: li_bvtotal
                    });
                });

                this.add({
                    xtype: 'rallygrid',
                    store: Ext.create('Rally.data.custom.Store', {
                        data: records,
                        pageSize: 5
                    }),
                    columnCfgs: [
                        {
                            text: 'FormattedID', dataIndex: 'FormattedID'
                        },
                        {
                            text: 'ref', dataIndex: 'ref'
                        },
                        {
                            text: 'Name', dataIndex: 'Name', flex: 1
                        },
                        {
                            text: 'Score', dataIndex: 'Score'
                        },
                        {
                            text: 'BusVal 1', dataIndex: 'Bv1'
                        },
                        {
                            text: 'BusVal 2', dataIndex: 'Bv2'
                        },
                        {
                            text: 'BusVal 3', dataIndex: 'Bv3'
                        },
                        {
                            text: 'BusVal 4', dataIndex: 'Bv4'
                        },
                        {
                            text: 'BusVal 5', dataIndex: 'Bv5'
                        },
                        {
                            text: 'BusVal Total', dataIndex: 'BvTotal'
                        }
                    ]
                });
            }
        });

        Rally.launchApp('BVApp', {
            name: 'Business Values App'
        });

                var exampleHtml = '<div id="example-intro"><h1>Business Values App</h1>' +
                '<div>Own sample app for Business Values</div>' +
                                '</div>';

                // Default app viewport uses layout: 'fit',
                // so we need to insert a container into the viewport
                var viewport = Ext.ComponentQuery.query('viewport')[0];
                var appComponent = viewport.items.getAt(0);
                var viewportContainerItems = [{
                    html: exampleHtml,
                    border: 0
                }];

                //hide advanced cardboard live previews in examples for now

                    viewportContainerItems.push({
                        xtype: 'container',
                        items: [appComponent]
                    });

                viewport.remove(appComponent, false);
                viewport.add({
                    xtype: 'container',
                    layout: 'vbox',
                    items: viewportContainerItems
                });
    });

</script>

<!--App styles-->
<style type="text/css">
    .app {
        /* Add app styles here */
    }
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:36:52.147

正如 Kyle 在他的评论中所说，最好的办法是扩展用户故事模型，而不是使用内存存储。

要扩展它，您可以使用 Rally.data.ModelFactory 来获取模型，然后执行以下操作：

```
Rally.data.ModelFactory.getModel({
    type: 'user story',
    success: function(model){
        this.CustomModel = Ext.define('BVModel', {
            extend: model,
            fields: [
                {name: 'Bv1'}
                ...
            ]
        });
    },
    scope: this
}); 
```

然后使用分数字段上的[转换](https://rally1.rallydev.com/apps/2.0p3/doc/#!/api/Ext.data.Field-cfg-convert)配置来设置计算字段的值。要在编辑中设置分数，您可能还需要在每个计算字段上进行转换配置。

然后告诉网格使用您的自定义模型而不是商店：

```
this.add({
    xtype: 'rallygrid',
    model: this.CustomModel,
    columnCfgs: [
        {
            text: 'FormattedID', dataIndex: 'FormattedID'
        },
        {
            text: 'ref', dataIndex: 'ref'
        },
        {
            text: 'Name', dataIndex: 'Name', flex: 1
        },
        {
            text: 'Score', dataIndex: 'Score'
        },
        {
            text: 'BusVal 1', dataIndex: 'Bv1'
        },
        {
            text: 'BusVal 2', dataIndex: 'Bv2'
        }
    ]
}); 
```

# actionscript-3 - 使用 AS3 的 hitTest 和 bitmapData 进行半碰撞

> ID：12413820
> 
> 赞同：3
> 
> 时间：2012-09-13T19:55:51.377
> 
> 标签：actionscript-3, collision-detection

所以我正在使用 AS3 开发一款游戏，目前我需要进行 2D 碰撞检查。为此，我自然而然地使用了 bitmapData 和 hitTest，但由于我不能正确地做到这一点，我决定使用 freeactionscript.com 的 CollisionTest 引擎。但是，即使在使用它时我也遇到了问题，我会尝试借助我包含的图像来解释它。

1.  设置 - 我有一个黄色字符和一个灰色方块。
2.  你可以清楚地看到黄色字符被灰色方块挡住了——此时我无法再往前走。
3.  绕过广场也很好，我也不能再往前走了。
4.  现在，这是一个难题——碰撞检测在右下角工作得很好。我可以在广场的任何其他部分自由走动，并且不会发生任何过度碰撞（即灰色方块之外）。

我正在使用这段代码：

```
public class CollisionTest 
{
    // vars
    private var _returnValue:Boolean;

    private var _onePoint:Point;
    private var _twoPoint:Point;

    private var _oneRectangle:Rectangle;
    private var _twoRectangle:Rectangle;

    private var _oneClipBmpData:BitmapData;
    private var _twoClipBmpData:BitmapData;

    private var _oneOffset:Matrix;
    private var _twoOffset:Matrix;

    /**
     * Complex collision test. Use this for objects that are rotated, scaled, skewed, etc
     * @param   clip1   Takes DisplayObjectContainer as argument. Can be a Sprite, MovieClip, etc.
     * @param   clip2   Takes DisplayObjectContainer as argument. Can be a Sprite, MovieClip, etc.
     * @return  Collision True/False
     */
    public function complex(clip1:DisplayObjectContainer, clip2:DisplayObjectContainer):Boolean
    {
        _returnValue = false;

        _twoRectangle = clip1.getBounds(clip1);
        _oneOffset = clip1.transform.matrix;
        _oneOffset.tx = clip1.x - clip2.x;
        _oneOffset.ty = clip1.y - clip2.y;  

        _twoClipBmpData = new BitmapData(_twoRectangle.width, _twoRectangle.height, true, 0);
        _twoClipBmpData.draw(clip1, _oneOffset);        

        _oneRectangle = clip2.getBounds(clip2);
        _oneClipBmpData = new BitmapData(_oneRectangle.width, _oneRectangle.height, true, 0);

        _twoOffset = clip2.transform.matrix;
        _twoOffset.tx = clip2.x - clip2.x;
        _twoOffset.ty = clip2.y - clip2.y;  

        _oneClipBmpData.draw(clip2, _twoOffset);

        _onePoint = new Point(_oneRectangle.x, _oneRectangle.y);
        _twoPoint = new Point(_twoRectangle.x, _twoRectangle.y);

        if(_oneClipBmpData.hitTest(_onePoint, 255, _twoClipBmpData, _twoPoint, 255))
        {
            _returnValue = true;
        }

        _twoClipBmpData.dispose();
        _oneClipBmpData.dispose();

        return _returnValue;
    } 
```

如果有人能提供帮助，那将极大地帮助我。如果您愿意，您可以[在这里](http://www.newgrounds.com/dump/item/eba82e170cd8cba8f220866891cb3330)亲自尝试。

提前致谢，-UPTX

tl;dr：hitTest 在灰色方块的 1/4 上工作，如下所示![包括图片](../Images/6dd8616ebc3fa70085bba792ea55b739.png)：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:09:24.860

据我了解您的问题：

```
public function complex(clip1:DisplayObjectContainer, clip2:DisplayObjectContainer):Boolean
{
    _returnValue = false;

    _twoRectangle = clip1.getBounds(clip1); 
```

此时，您将获得剪辑的**未转换**边界。例如，框在旋转时有另一个边界。在你的情况下这不是大问题，只是因为你的单位有更多的“圆形”而不是“盒子”形状。

但是，如果您使用居中的精灵，您将遇到的主要问题（如图所示） - 当一半内容位于“负”空间坐标中时。在这种情况下，方法`getBounds`返回负左上角。因此，在该对象的位图数据上，您将只有部分精灵。

如果您想**快速**修复您的方法，请将矩阵设置更改为

```
 _oneOffset.tx = clip1.x-clip2.x-_twoRectangle.x;
   _oneOffset.ty = clip1.y-clip2.y-_twoRectangle.x; 
```

和

```
 _twoOffset.tx = clip2.x - clip2.x-_oneRectangle.x;
   _twoOffset.ty = clip2.y - clip2.y-_oneRectangle.y; 
```

但请注意：要正确计算交点，您需要：

1）改变你的渲染方法。例如，您可以将您的对象附在某个父对象上并绘制该父对象 - 它会为您提供正确的边界框。

2）您可以手动计算边界：[从旋转的矩形计算边界框坐标](https://stackoverflow.com/questions/622140/calculate-bounding-box-coordinates-from-a-rotated-rectangle-picture-inside)

希望，它会有所帮助。

# python - 使用 App Engine 配置 Remote_api

> ID：12413826
> 
> 赞同：2
> 
> 时间：2012-09-13T19:56:16.813
> 
> 标签：python, google-app-engine, remoteapi

使用 Python，我正在尝试连接到我的 AppEngine 应用程序的 remote_api 处理程序，但我不断收到错误消息。我想要做的是设置 remote_api 存根以通过它路由数据库调用并直接访问我的应用程序的数据存储区。因此，首先，我导入 remote_api 库，然后在存根模块上调用 ConfigureRemoteApi，并尝试使用对远程数据存储的调用。这是一些示例代码：

```
from google.appengine.ext.remote_api import remote_api_stub

def test_remote_api():
    # This function is called when I want to use the remote api instead of the local datastore access
    remote_api_stub.ConfigureRemoteApi('myapp.appspot.com', '/_ah/remote_api', auth_func, '')

def auth_func:
    # This actually returns a tuple with my credentials to skip the console input
    return ('username', 'password') 
```

好的，现在，我已经使用 remote_api_shell.py 测试了我的登录信息和应用程序名称，但我收到如下错误：

```
File "C:\Program Files(x86)\Google\google_appengine\google\appengine\tools\dev_appserver_blobstore.py", line 79, in GetBlobStorage
return apiproxy_stub_map.apiproxy.GetStub('blobstore').storage
AttributeError: 'RemoteStub' object has no attribute 'storage' 
```

然后我得到一个 404: Not Found 从应用程序，我知道这是错误的，因为从 Web 访问应用程序确实给了我结果。我需要做什么来设置 remote_api_stub，这样我就不会收到这个错误？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T20:42:55.517

假设您现在正在使用高复制数据存储...

你的 app_id 可能是错误的，你还需要传递地址参数。不久前，我在阅读 appengine 的 oreilly 书时突然想到了这一点（书严重过时，不推荐）

```
def attach_to_app(app_id, user=None, password=None, path=None, address=None):
    """
    attaches to app_id instance at address (default: <app_id>.appspot.com)

    if you don't specify a user/password you will be prompted for one

    if you don't specify an address it is assumed to be
    <app_id>.appspot.com

    path: path to remote_api handler, if not
    specified, will use /_ah/remote_api 
    """
    path = path or "/_ah/remote_api"

    if not address:
        address = "%s.appspot.com" % app_id

    init_remote_api(app_id, path, address, user=user, password=password)

def auth_func():
    """
    function to prompt user for credentials
    """
    email_address = raw_input("Email Address: ")
    password = getpass.getpass("Password: ")
    return email_address, password

def init_remote_api(app_id, path, address, user=None, password=None):
    """
    generic wrapper to initialize the remoteapi for a given path

    required
    =========
    app_id : the app_id of the application to connect to
    path: the path to the remote_api handler ex: /_ah/remote_api
    address: server to connect to ex: myapp.appspot.com

    if user and password are not specified you will be prompted on
    connection if needed
    """
    if user and password:
        def my_auth():
            return (user, password)
    else:
        my_auth = auth_func

    remote_api_stub.ConfigureRemoteApi(app_id, path, my_auth, address)
    remote_api_stub.MaybeInvokeAuthentication()
    os.environ["SERVER_SOFTWARE"] = "Development (remote_api)/1.0"

# example
APP_ID = "s~myapp" # when hrds was introduced it became necessary to specify app_id and address note the "s~..."
ADDRESS = "myapp.appspot.com"
attach_to_app(APP_ID, address=ADDRESS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T13:01:39.563

如果您只对访问数据存储感兴趣，则可以使用[testBed](https://developers.google.com/appengine/docs/python/tools/localunittesting#Introducing_the_Python_Testing_Utilities)避免存根错误：

```
# First, create an instance of the Testbed class.
myTestBed = testbed.Testbed()

# Then activate the testbed, which prepares the service stubs for use.
myTestBed.activate()

# Next, declare which service stubs you want to use.
myTestBed.init_blobstore_stub()
myTestBed.init_logservice_stub() 
```

# java - 有没有办法将 DatagramSocket 绑定到特定网卡上的任何端口，或者如果我指定网卡我必须指定端口？

> ID：12413828
> 
> 赞同：4
> 
> 时间：2012-09-13T19:56:28.700
> 
> 标签：java, sockets, networking, udp

这在Java中是不可能的吗？DatagramSocket.bind 方法必须采用 NULL 或 IP:PORT。您不能只传递描述 NIC 的 IP，然后自动选择 PORT。除非我遗漏了一些东西，否则这没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:21:10.247

使用`DatagramSocket`. 这将绑定到任何端口。您不必使用 bind 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:32:26.007

只需将端口号指定为零，或者按照 Mike Q 的建议省略它。在这两种情况下，系统都会为您分配一个端口。

# algorithm - 将一个数谱转换为另一个数谱

> ID：12413829
> 
> 赞同：1
> 
> 时间：2012-09-13T19:56:31.317
> 
> 标签：algorithm, math

我正在尝试提出一个公式，将一个数谱转换为另一个数谱。例如：

`0 - 800`至`-1 - 1`

哪里`0 = -1`, `200 = -0.5`, `400 = 0`, `600 = 0.5`, `800 = 1`, 等等。

对我来说困难的部分似乎是负范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T20:00:02.343

如果你的范围是`a0, a1`and `b0, b1`，那么你`x`想去

```
((x-a0)/(a1-a0)) * (b1-b0) + b0 
```

基本上，`(x-a0)`是您距第一个范围的下侧多远，`(x-a0)/(a1-a0)`除以范围的宽度，因此该数字现在归一化为`[0, 1]`。之后，我们乘以`(b1-b0)`将范围扩大到新的比例，并添加`b0`以将其转移。

例如：

```
>>> a0, a1 = 0.0, 800.0
>>> b0, b1 = -1.0, 1.0
>>> 
>>> x = 400 # should go to 0
>>> x-a0
400.0
>>> (x-a0)/(a1-a0)
0.5
>>> (x-a0)/(a1-a0) * (b1-b0)
1.0
>>> (x-a0)/(a1-a0) * (b1-b0) + b0
0.0
>>> x = 0 # should go to -1
>>> (x-a0)/(a1-a0) * (b1-b0) + b0
-1.0
>>> x = 800 # should go to 1
>>> (x-a0)/(a1-a0) * (b1-b0) + b0
1.0 
```

# batch-file - Bat文件修改文件中的变量值

> ID：12413833
> 
> 赞同：0
> 
> 时间：2012-09-13T19:56:34.660
> 
> 标签：batch-file, cmd

`对于 deferredreportsdaemon.ini 文件，它具有以下内容：

```
ApplicationDatabaseClass=com.systems.pool.MySQLConnectionManager
ApplicationDatabaseUser=administrator
ApplicationDatabasePassword=test
ApplicationDatabaseName=envdata
ApplicationDatabaseServer=eis-mysql0:3308 
```

我想创建一个 bat 文件，它将提示变量 ApplicationDatabaseName 的新值，并在我输入文本后在文件中更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:53:25.617

此脚本会将当前重命名`deferredreportsdaemon.ini`为`deferredreportsdaemon.ini.old`并创建一个新的`deferredreportsdaemon.ini`.

注意：这可能不是***最好、最有效***的方法，但它似乎对我有用。此外，您将需要添加更多错误检查，因为我在这里不做任何事情......

```
@echo off

set /P DBNAME="Please enter an Application Database Name: "
set INI=deferredreportsdaemon.ini
set OLD=%INI%.old

copy /Y %INI% %OLD%
del %INI%

FOR /F "delims=\= tokens=1,2" %%K IN (%OLD%) DO (
    IF "%%K" NEQ "ApplicationDatabaseServer" echo %%K=%%L >>%INI%
)

echo ApplicationDatabaseServer=%DBNAME% >>%INI% 
```

初始ini文件内容：

```
ApplicationDatabaseClass=com.systems.pool.MySQLConnectionManager
ApplicationDatabaseUser=administrator
ApplicationDatabasePassword=test
ApplicationDatabaseName=envdata
ApplicationDatabaseServer=eis-mysql0:3308 
```

运行脚本并输入后`my_database_name`：

```
ApplicationDatabaseClass=com.systems.pool.MySQLConnectionManager 
ApplicationDatabaseUser=administrator 
ApplicationDatabasePassword=test 
ApplicationDatabaseServer=eis-mysql0:3308 
ApplicationDatabaseName=my_database_name 
```

# java - 带有许可开源库的闭源软件。

> ID：12413838
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:56:50.847
> 
> 标签：java, licensing, itext, jfreechart

我正在为我目前工作的公司开发一个 Java 应用程序。我想对源代码保密，但我需要知道如何集成应用程序中涉及的外部库（不知道如何获得许可）。

我正在使用这些库：

*   Xerial SQLiteJDBC（Apache 许可版本 2.0）
*   iTextPDF (AGPL)
*   JFreeChart(LGPL)

PS 该应用程序将仅在一台计算机上使用，不会分发。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:00:47.333

阅读许可并遵守其条款。

唯一棘手的是AGPL。假设您在美国，您可能应该获得一份法律意见书，说明您对该库的使用只是普通使用，因此不需要任何许可。在美国，如果您合法获得作品，您无需获得或遵守许可，就可以以普通的、预期的方式使用该作品。AGPL 不是 EULA。

例如，假设您购买了一本书，其中包含一个许可，上面写着“为了换取阅读本书的权利，您必须每年至少上网一次。不遵守此许可将撤销您阅读本书的权利”。您可以简单地拒绝许可，您仍然有权阅读该书，因为美国版权法并未赋予版权所有者使用该作品的专有权。因此，您不需要许可证提供的任何权利，因为您已经拥有它们。

请参阅[17 USC 106](http://www.law.cornell.edu/uscode/text/17/106)，其中列出了版权所有者根据美国法律享有的专有权。IANAL，所以你应该找律师给你一个你可以合法依赖的书面意见。

# asp.net - 如何绑定到路径然后重定向？

> ID：12413839
> 
> 赞同：0
> 
> 时间：2012-09-13T19:56:53.047
> 
> 标签：asp.net, .net, repeater, datalist

首先，对不起我的英语不好！我在 .Net FrameWork v4.0 中使用 C# Lang + Asp.Net

我想制作一个动态页面，在其中，我从数据库表中读取一些值，然后创建一些按钮。

我的表的每条记录在运行时都有一个按钮。现在，我想使用**DataList**绑定我的数据，并在 ItemTemplate 中使用按钮。在按钮的名称和文本中没有任何问题。

我的问题是绑定字符串到我的 Onclick 事件的路径，然后重定向到此路径 OnClick 的按钮。（此字符串路径是我的数据库表中的一个字段）

此外，我讨厌 Javascript。我使用 Internet Explorer < v8，但运行 Javascript 命令有问题！

我想要一种使用代码隐藏方法重定向的方法......

这是我的数据列表：

```
<asp:DataList ID="DataList1" runat="server" RepeatColumns="3" 
DataSourceID="LinqDataSourceMainCat">
<ItemTemplate>
    <asp:Button ID="Button1" runat="server" Text='<%# Eval("CatName") %>' 
        CssClass="Maininput" OnClick=??? />
</ItemTemplate> 
```

此图像显示我想要动态设置重定向方法的按钮：

![ItemTemplate 中的 DataList 按钮](../Images/bdcef5cd106b3df2665fdebc62fb94c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:02:03.310

我找到了答案！

```
<asp:DataList ID="DataList1" runat="server" RepeatColumns="3" 
DataSourceID="LinqDataSourceMainCat">
<ItemTemplate>
    <asp:Button ID="LinkBtn" CssClass="Maininput" Text='<%# Eval("CatName") %>' runat="server" 
        PostBackUrl='<%# string.Concat("~/Admin/MainCats/" , Eval("CatLinkName")) %>' />
</ItemTemplate> 
```

使用 PostBackUrl 就是答案，加油 :)

# iphone - 如何在 Xcode 中添加蓝牙

> ID：12413841
> 
> 赞同：0
> 
> 时间：2012-09-13T19:57:06.057
> 
> 标签：iphone, ios, ipad, device, core-bluetooth

我想知道如何在我的应用程序中添加蓝牙。我知道我需要导入“CoreBluetooth”。我只想播放一些声音并能够在使用蓝牙的另一台设备上听到它。我已经在Apple的网站上查找了。我不喜欢去苹果的网站，因为它需要发布。我的应用不接受 release 这个词，因为 ARC 已启用。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:47:24.003

许多蓝牙网络样板在 GameKit 中得到处理，包括同步对等点和发送数据。我建议看一下[GKSession](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKSession_Class/Reference/Reference.html)。

此外，如果您在 ARC 应用程序中使用在 ARC 之前编写的代码片段，您可以有效地忽略*发布*语句（尽管在某些情况下，您需要确保在它之后没有保留对对象的引用不需要）。

# actionscript-3 - 自动加载或嵌入资产文件夹

> ID：12413842
> 
> 赞同：1
> 
> 时间：2012-09-13T19:57:12.393
> 
> 标签：actionscript-3, flash, apache-flex, load, assets

我正在尝试找到一种方法来自动将多个资产加载到我用 AS3 制作的项目中。

场景：我有 135 个需要加载的 .png 文件，我有一个 ResourceManager 类，可以通过嵌入或加载器加载它，没什么新鲜的。有一个小问题，我每次制作嵌入/加载器时都需要提供每个名称（../assets/myImage.png）。我不想。

有没有办法指定路径，并以某种方式自动加载每个以 .png 结尾的文件？

我正在考虑制作一个 .bat 程序，该程序制作一个以 .png 结尾的文件列表，它可以制作一个 .txt 文件，然后使用 AS3，只需循环该文件并使用 Loader 类进行资产加载。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:17:50.327

我建议您使用诸如 PHP 之类的服务器脚本来返回格式化的 xml 文件，例如在本教程[中：xml 文件中的文件夹内容](http://www.php-help.ro/php-tutorials/output-folder-content-in-xml-file/)

然后，您只需读取该文件并加载文件。

我经常使用[BulkLoader](http://code.google.com/p/bulk-loader/)类来帮助加载这样的多个资产。

```
var xmlContentList:XML = [THE LOADED XML FILE FROM THE PHP];
var imageLoader:BulkLoader = new BulkLoader("image-loader");
for (var imageNode:XML in xmlContentList..image)
{
    imageLoader.add( imageNode.path );
}
imageLoader.addEventListener(BulkLoader.COMPLETE, onAllLoaded);
imageLoader.start(); 
```

# php - 在php页面中通过js强制下载txt

> ID：12413845
> 
> 赞同：-1
> 
> 时间：2012-09-13T19:57:18.537
> 
> 标签：php, javascript, download

我正在尝试自动下载一个 txt 文件（即时创建）。以下代码不起作用，因为用户被重定向到显示 txt 而不是下载它的页面。相反，我想要的是单击表单（代码的顶部）导致页面刷新（发生）然后下载文件。如果将文件格式更改为 rtf，例如，我可以下载它，但不能下载 txt。

=================不工作代码==================

```
 echo "
      <form name=\"fn\" action=\"index.php?option=com_comp\" method=\"post\">
      // more not related stuff
      <input type=\"image\" src=\"".JURI::root().
      "components/com_comp/images/download_icon.png\" .
      "\" name=\"downloadaddresses\">DOWNLOAD_RESULTS
      // more not related stuff";

      if($_POST['downloadaddresses_x']!=0) {

            $myfilename = "tmp/results.txt";
            $fh = fopen($myfilename, 'w');

            $recipients = $_POST['recipients'];
            $semicolon_separated = implode(";", $recipients);
            fwrite($fh, $semicolon_separated);
            fclose($fh);

            echo "<a href=\"".$myfilename."\" id=\"downloadlink\">
            This download should start automatically!</a>";
            echo "<script type=\"text/javascript\">
                     location.href = document.getElementById('downloadlink').getAttribute('href');
                </script>";
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T20:04:45.737

需要在 PHP 文件的头部指定内容类型

```
header('Content-Type: text/plain'); 
header('Content-Disposition: attachment; filename="your_filename_here.txt"');
echo file_get_contents('path_to_file.txt'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:59:56.430

标题，你明白了。

```
header("Content-type: text/plain") 
```

# linux - $* 在 shell 脚本中是什么意思

> ID：12413848
> 
> 赞同：14
> 
> 时间：2012-09-13T19:57:21.967
> 
> 标签：linux, bash, shell, unix, special-characters

`$*`在 shell 脚本中到底是什么意思？

例如考虑以下代码片段

```
$JAVA_HOME/bin/java/com/test/Testclass $* 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T20:00:23.620

这意味着传递给脚本或函数的所有参数，按单词分割。

它通常是错误的，应该替换为`"$@"`，它可以正确地分隔参数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T20:00:22.613

自己很容易找到答案：`man bash`→ `/\$\*`：

> **特殊参数**
> 
> shell 专门处理几个参数。这些参数只能被引用；不允许分配给他们。
> 
> *   扩展到位置参数，从一个开始。当扩展出现在双引号内时，它会扩展为一个单词，每个参数的值由**`IFS`**特殊变量的第一个字符分隔。即，`"$*"`等价于 `"$1c$2c..."`，其中 是变量`c`值的第一个字符。**`IFS`**如果**`IFS`**未设置，则参数以空格分隔。如果**`IFS`**为 null，则连接参数而不插入分隔符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T20:01:18.480

`$*`扩展为传递给该 shell 脚本的所有参数。

`$0`= shell 脚本的名称

`$1`= 第一个参数

`$2`=第二个参数...等

`$#`= 传递给 shellscript 的参数数量

# excel - VBA 代码设置，编译器错误：语法错误

> ID：12413858
> 
> 赞同：1
> 
> 时间：2012-09-13T19:58:21.453
> 
> 标签：excel, vba

我正在尝试为 Excel 中的 White 异方差检验开发一个函数。我只是在第一阶段，但我已经卡住了。我从数据分析中调用了外接回归方法。这将呈现第二阶段辅助回归所需的残差。但我得到了`compiler error`，这是没有信息的。这里的设置有什么问题？

```
Sub WhitesTest(Y As Range, X As Range)
    'This function will run the regression by default, but also report the White's Test for
    'heteroskedasticity

    Application.Run "ATPVBAEN.XLAM!Regress", Y, _
        X, False, False, , "", True, False, False _
        , False, , False
End Sub

Sub testWhitesTest()
    WhitesTest(Sheets("Sheet1").Range("A1:A6"),Sheets("Sheet1").Range("B1:B6"))
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T18:01:38.413

这个答案来自@Tim Williams：

> 从对 WhitesTest 的调用中删除括号 如果您正在调用函数，或者如果使用 Call WhitesTest()...，则仅使用括号。

# jquery - bxslider 无法正确显示

> ID：12413865
> 
> 赞同：1
> 
> 时间：2012-09-13T19:58:36.867
> 
> 标签：jquery

我有一个加载图片的 bxslider 组件。如果滑块没有图像，则显示默认图像，但如果您有一个图像，则显示两次。

我该如何补救？

# grails - grails中的uploadForm url

> ID：12413870
> 
> 赞同：0
> 
> 时间：2012-09-13T19:59:22.453
> 
> 标签：grails

我正在使用以下代码：

```
 ${childInstance.firstname}
<br/>
<g:uploadForm url="[action: 'upload', params:[id:childInstance.id]]">
        <input type="file" name="myFile" />
        <input type="submit" value="submit"/>
    </g:uploadForm> 
```

childInstance.firstname 正在工作并返回孩子的名字，但 childInstance.id 正在将“索引”字符串传递给我的上传控制器。

任何想法为什么？

如果我将其更改为指向另一种方法，它可以工作，但不是这个？

```
def upload() {
    def childInstance2  = Child.get(params.id)
    def f = request.getFile('myFile')
    if (f == null | f.empty) {
        flash.default = "file cannot be empty"
        errors.getFieldError("cannot be empty")
        return
    }
    def fName = f.getOriginalFilename()
    def picture = new Picture(orgName: fName, urlOrg: "http://localhost/"+fName, user:lookupPerson(), child:childInstance2 )
    f.transferTo(new File('/Users/sagarmichael/Desktop/photoUpload/'+fName))
    picture.save(flush: true, failOnError: true)
    response.sendRedirect("index")
} 
```

# jquery - jQuery 1.8.1 - live, livequery, on + change 不工作

> ID：12413874
> 
> 赞同：1
> 
> 时间：2012-09-13T19:59:29.273
> 
> 标签：jquery, firefox, live, livequery

我的代码是：

```
jQuery('#s_valor').on('change', function () {
    alert('Help mee!!');
}); 
```

'#s_valor' 已加载（jQuery.load），这适用于 Opera，但不适用于 Firefox 15。我正在使用 Ubuntu，我尝试过 live()、on() 和 livequery()，没有人工作在火狐 15 上。

有人给我小费吗？（对不起我的英语不好，我是巴西人）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:01:55.163

当你动态加载一个元素时，你需要使用`.on()`DOM 中已经存在的元素。通常最坏的情况是身体元素。例如：

```
jQuery('body').on('change', '#s_valor', function () {
    alert('Help mee!!');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:13:01.987

你把它附在文件里了吗？就绪功能.. 还在其中放置一个警报并检查 jQuery 文件是否与您的页面正确关联..

```
$(function() {
   jQuery('#s_valor').on('change', function () {
      alert('Help mee!!');
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:44:29.083

`$(document).on('click', 'p', $.noop);`

甚至

`$(document).delegate('p', 'click', $.noop);`

[http://jsperf.com/jquery-live-vs-delegate-vs-on/33](http://jsperf.com/jquery-live-vs-delegate-vs-on/33)

# javascript - Json数据包含日期和时间格式

> ID：12413876
> 
> 赞同：3
> 
> 时间：2012-09-13T19:59:45.157
> 
> 标签：javascript, jquery, json, date, time

我有以下 JSON 数据：

```
{
    "city": {
        "city_code":"DE0001516",
        "post":"28195",
        "forecast": {
            "2012-09-10": {
                "p":"24",
                "w":"10",
                "06:00": {
                    "p":"5",
                    "w":"20",
                    "tn":"15",
                    "tx":"21",
                    "w_txt":"wolkig"
                }
            }
        }
    }
} 
```

通常我通过这个函数读取数据：

```
function(data){ $("#").html(data.city.post); } 
```

如何从 06:00 获取数据？

```
function(data){ $("#").html( data.city.forecast.2012-09-10.06:00.w); } 
```

不起作用。我认为这与时间和日期格式有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:02:50.490

您无法读取包含这些特殊字符的属性名称。他们需要被引用：

```
data.city.forecast["2012-09-10"]["06:00"].w 
```

这是一个[相关的问题](https://stackoverflow.com/questions/2940424/valid-javascript-object-property-names)：

> 任何字符串都可以是属性名称……某些属性只能使用方括号语法访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:02:08.067

尝试：

```
data.city.forecast['2012-09-10']['06:00'].w 
```

* * *

另一个问题是`$("#")`。选择器似乎是错误的。您针对的是哪个元素？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T20:02:17.580

使用括号表示法：

```
data.city.forecast['2012-09-10']['06:00'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T20:03:59.813

试试这个

```
data.city.forecast["2012-09-10"]["06:00"].w 
```

# mysql - 选择具有复杂 JOIN 的行

> ID：12413879
> 
> 赞同：1
> 
> 时间：2012-09-13T20:00:00.797
> 
> 标签：mysql, database-design, join

我在编写查询以返回正确的数据时遇到了麻烦，而且我越来越不相信它甚至可以通过单个查询来实现。

我将日志记录存储在 MySQL 数据库中，其方式与 printf() 的工作方式非常相似，只是我必须将格式字符串与替换值分开存储。在搜索某些值的情况下，我想做的是以最有效的方式返回这些数据。

这是表设置：

```
CREATE TABLE `log` (
  `log_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `message` varchar(255) NOT NULL,
  `num_variables` int(10) unsigned NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`log_id`)
);

CREATE TABLE `variable` (
  `log_id` int(10) unsigned NOT NULL,
  `order` int(10) unsigned NOT NULL,
  `name` varchar(255) NOT NULL,
  `value_id` int(10) unsigned NOT NULL,
  KEY `log_id` (`log_id`),
  KEY `value_id` (`value_id`)
);

CREATE TABLE `value` (
  `value_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `value` varchar(255) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`value_id`),
  UNIQUE KEY `value` (`value`)
); 
```

这是一个示例用法：

```
log('user %email% invited %num% new players', 'him@example.com', 2); 
```

这将导致以下查询：

```
-- create the log record (resulting PK would be 1)
INSERT INTO log
(message, num_variables)
VALUES
('user %email% invited %num% new players', 'him@example.com', '2');

-- create the first value record (resulting PK would be 1)
INSERT INTO value
(value)
VALUES
('him@example.com');

-- create the first variable record (resulting PK would be 1)
INSERT INTO variable
(log_id, order, name, value_id)
VALUES
(1, 0, 'email', 1);

-- create the second value record (resulting PK would be 2)
INSERT INTO value
(value)
VALUES
('2');

-- create the second variable record (resulting PK would be 2)
INSERT INTO variable
(log_id, order, name, value_id)
VALUES
(1, 1, 'num', 2); 
```

现在我希望能够从数据库中提取日志记录，以及它们相关的变量和值。*具体来说，我需要日志消息，以及它的所有关联值*：

```
SELECT  log.id, log.message
        variable.order, variable.name
        value.value_id, value.value
FROM log
LEFT JOIN variable ON (log.log_id = variable.log_id)
LEFT JOIN value ON (variable.value_id = value.value_id) 
```

如果我想要**所有**日志记录，这很好用（忽略 log.log_id 和 log.message 对于任何具有多个变量的日志都会冗余返回的事实）。但我想要更多的特异性。

借用上面的例子，我希望能够指定我只想要包含“him@example.com”的“电子邮件”的日志记录，比方说。当我将其添加到我的查询中时...

```
SELECT  log.log_id, log.message
        variable.order, variable.name
        value.value_id, value.value
FROM log
LEFT JOIN variable ON (log.log_id = variable.log_id)
LEFT JOIN value ON (variable.value_id = value.value_id)
WHERE (variable.name = 'email' AND value.value = 'him@example.com') 
```

它将返回该日志/变量/值记录，但**不会**返回关联的“num = 2”记录（这是完全重建日志所必需的）。此外，假设我想指定第二个约束，比如“action”=“logged out”。我可以（错误地）将我的 WHERE 子句更改为如下所示：

```
-- won't return anything
WHERE (variable.name = 'email' AND value.value = 'him@example.com')
AND (variable.name = 'action' AND value.value = 'logged out') 
```

或这个：

```
-- will also return logs containing only ONE of the given constraints
WHERE (variable.name = 'email' AND value.value = 'him@example.com')
OR (variable.name = 'action' AND value.value = 'logged out') 
```

但在任何一种情况下，您都可以看到它错过了标记，并且没有返回我正在寻找的确切结果集。

我的桌子是否设计不佳（或不足或过度）？我是否以错误的方式接近查询？将派生数据字段存储在某处能给我我需要的东西吗？是否有一些我未能使用的 JOIN 可以解决问题？

**更新 1：**

variable.order 和 variable.name 只是确保将值正确插回 log.message 的两种不同方法。

**更新 2：**

根据评论，值得注意的是，这些表是简化帖子的人为示例 - 实际的表结构比呈现的稍微复杂一些。我只是将这种复杂性降低到问题的核心。简单的 use-a-single-table-and-serialize-the-value 技术对我不起作用。除此之外，我们需要能够非常快速地根据值查找这些日志，而这样的解决方案不会为我们提供适当的索引功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:08:37.967

怎么样：

```
...
WHERE log.id IN (SELECT l.id 
                 FROM log l 
                 INNER JOIN variable v ON l.log_id = v.log_id
                 INNER JOIN value vv ON v.value_id = vv.value_id
                 WHERE v.name = 'email' and vv.value = 'him@example.com') 
```

在不知道更大的数据样本的情况下，我无法真正评论表格设计。在这一点上，我确实质疑将变量和值表分开，除非这是一个一对多的关系变量-> 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:31:15.407

那么你可以想出以下结构

```
CREATE TABLE `logs` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `message` varchar(255) NOT NULL,
  `num_variables` int(10) unsigned NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
);

CREATE TABLE `logs_values` (
  `log_id` int(10) unsigned NOT NULL,
  `value_id` int(10) unsigned NOT NULL
);

CREATE TABLE `value` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name_id` int(10) unsigned NOT NULL,
  `value` varchar(255) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `value` (`value`)
);

CREATE TABLE `names`(
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

要获取所有日志记录，请运行此查询

```
SELECT * FROM logs
LEFT JOIN logs_values ON logs_values.log_id = logs.id
LEFT JOIN value ON logs_values.value_id = value.id
LEFT JOIN names ON value.name_id = names.id; 
```

获取指定值的所有日志记录

```
SELECT * FROM logs
LEFT JOIN logs_values ON logs_values.log_id = logs.id
LEFT JOIN value ON logs_values.value_id = value.id
LEFT JOIN names ON value.name_id = names.id
WHERE names.name = 'email' AND value.value = 'email@email.com'; 
```

结果

```
ID  MESSAGE NUM_VARIABLES   CREATED                           VALUE                 NAME
1   test       2            September, 13 2012 16:24:31-0400  email@email.com   email 
```

[SQL小提琴](http://sqlfiddle.com/#!2/5e540/3)

PS当然你需要设置所需的索引以获得更好的性能

# c# - jquery数据表如何填充ajax请求

> ID：12413883
> 
> 赞同：0
> 
> 时间：2012-09-13T20:00:06.320
> 
> 标签：c#, jquery, model-view-controller

因为我之前的问题太困惑了，所以我问了一个新问题。

我有这个 linq，我用它来检索数据作为 json

```
var res = from c in model.Data 
          select new object[] { c.Id, c.Time, c.Number}; 
```

c.Time 是 DateTime 对象，Id 和 Number 是整数。现在，当这个查询被执行时，我得到了在 model.Data 计数中重复的相同数据。如何重写此查询以使用 foreach 循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:02:47.077

您正在创建一个对象数组

请使用这个：

```
var res = from c in model.Data 
          select new { ID=c.Id, Time=c.Time, Number=c.Number}; 
```

然后该变量将包含具有属性 ID、时间和编号的对象列表。这个 List 将很容易转换为 JSON 对象数组。

# c# - MouseDown event not fireing

> ID：12413888
> 
> 赞同：0
> 
> 时间：2012-09-13T20:00:19.737
> 
> 标签：c#, .net, wpf, events

I want to add option to draw rectangle on image. But that is not problem. In order to get it working I need to use MouseDown, MouseUp and MouseLeave events of Image Control in WPF.

```
 <DockPanel Name="dockPanel1" Grid.ColumnSpan="2" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="15">
        <GroupBox Header="WebCam" Name="groupBox1" VerticalAlignment="Top" HorizontalAlignment="Left">
            <Grid>
                <Image HorizontalAlignment="Left" Margin="0" Name="pictureBoxMain" Stretch="Fill" VerticalAlignment="Top" MinHeight="240" MinWidth="320" StretchDirection="DownOnly" MaxWidth="960" MaxHeight="1200" MouseDown="pictureBoxMain_MouseDown" MouseUp="pictureBoxMain_MouseUp" MouseLeave="pictureBoxMain_MouseLeave" Panel.ZIndex="50" />
            </Grid>
        </GroupBox>
        <StackPanel HorizontalAlignment="Right" Name="stackPanel2" VerticalAlignment="Top" DockPanel.Dock="Right" Margin="15,0,0,0">
            <GroupBox Header="Controls" Name="groupBox2">
                <StackPanel Name="stackPanel1">
                    <Button Content="Start" Height="23" Name="buttonStartStop" Width="120" Margin="0" Click="buttonStartStop_Click" />
                    <Button Content="Video Properties" Height="23" Name="buttonVideoProperties" Width="120" Margin="0" Click="buttonVideoProperties_Click" />
                    <Button Content="WebCam Settings" Height="23" Name="buttonWebCamSettings" Width="120" Margin="0" Click="buttonWebCamSettings_Click" />
                </StackPanel>
            </GroupBox>
            <GroupBox Header="Motion Data" Name="groupBox3">
                <StackPanel>
                    <Label Content="Strength: 0" x:Name="labelMotionStrength" />
                    <Label Content="Count: 0" x:Name="timesWasMotionCounter" />
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </DockPanel> 
```

I'm talking about events of "pictureBoxMain". Why those events never fire? I'm clicking on my image like crazy and still nothing. What should I do to make those event working?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:24:40.657

Have you tried catching PreviewMouseDown?

```
To capture the same as MouseDown you need to use PreviewMouseDown event which is a tunneling event. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:17:55.927

I found the error. For some reason my picture box size was 0,0. I stretched it and now it works.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T20:26:21.577

You need to set the Source attribute of the Image to an image file or binding before the event handlers will work:

```
<Image HorizontalAlignment="Left" Margin="0" Name="pictureBoxMain" Stretch="Fill" VerticalAlignment="Top" MinHeight="240" MinWidth="320" StretchDirection="DownOnly" MaxWidth="960" MaxHeight="1200" MouseDown="pictureBoxMain_MouseDown" MouseUp="pictureBoxMain_MouseUp" MouseLeave="pictureBoxMain_MouseLeave" Source="test_image.png" Panel.ZIndex="50" /> 
```

# javascript - UIAutomation 放大图像

> ID：12413896
> 
> 赞同：0
> 
> 时间：2012-09-13T20:00:41.037
> 
> 标签：javascript, ios-simulator

我正在编写一个脚本来测试 iPhone 上的应用程序。我想放大图像。

我尝试做 pinchOpenFromToForDuration({x:80, y:150}, {x:30, y:150}, 2) 但我不断收到错误消息：

TypeError: 'undefined' is not a function (评估 'window.scrollViews()[0].images()[0].pinchOpenFromToForDuration({x:80, y:150}, {x:30, y:150}, 2)')

如果我在 iOS 模拟器中按住 Options 键并尝试放大图像，我可以做到。

图像具有以下坐标：rect{{-0, 115},{320, 200}}。

我究竟做错了什么？是否可以放大图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:59:32.433

问题是您试图调用`pinchOpenFromToForDuration`图像元素本身。捏合手势方法仅在 上可用`UIATarget`，因此您需要这样说：

```
target.pinchOpenFromToForDuration({x:80, y:150}, {x:30, y:150}, 2); 
```

我希望各个`UIAElement`对象也有一个捏合方法，但这是我们目前最好的方法。

# php - 如何计算两个日期之间的天数？

> ID：12413902
> 
> 赞同：0
> 
> 时间：2012-09-13T20:00:50.290
> 
> 标签：php, mysql, unix-timestamp

像这个[问题](https://stackoverflow.com/questions/2040560/how-to-find-number-of-days-between-two-dates-using-php "问题")有很多问题和答案，但我找不到任何在 MYSQL 查询中实际使用它的问题和答案。我需要根据从现在到表中某个日期之间的特定天数来查询数据库。我现在有一些方法可以在 mysql 查询中进行数学运算，但不太知道如何开始。

任何建议如何使用 PHP 和 mysql 做到这一点？

抱歉没有提及，我的日期字段是 unix 时间戳。那么我该如何使用这种格式来实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:04:49.507

`datetime`我假设您正在为字段寻找类似的东西：

```
SELECT *
FROM table
WHERE datetime_field BETWEEN (NOW() - INTERVAL 2 DAY) AND NOW() 
```

对日期字段稍作修改

```
SELECT *
FROM table
WHERE date_field BETWEEN (DATE(NOW()) - INTERVAL 2 DAY) AND DATE(NOW()) 
```

出于多种原因，您不应该使用 unix 时间戳字段来存储日期时间。但如果你真的坚持这样做。

```
SELECT *
FROM table
WHERE date_field BETWEEN UNIX_TIMESTAMP(NOW() - INTERVAL 2 DAY) AND UNIX_TIMESTAMP(NOW()) 
```

确保`WHERE`子句中的字段上有索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:02:34.500

你的意思是像 DateDiff 函数？

`SELECT DATEDIFF('2008-11-30','2008-11-29') AS DiffDate`

[http://www.w3schools.com/sql/func_datediff_mysql.asp](http://www.w3schools.com/sql/func_datediff_mysql.asp)

`$sql = "SELECT DATEDIFF('".$startDate."', '".$endDate."') AS DiffDate";`

然后通过 PDO 或 mysqli_ 函数运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T20:55:26.147

在 PHP 中，您可以这样做：

```
$date1 = '1348117200000'; //From table for date 09/20/2012    

$date2 = time(); //Current time 

$diffDate = $date1 - $date2; 
```

然后在您的查询中使用 $diffDate 。

```
 $sql = 'SELECT * FROM DATE_TABLE WHERE DATE_FIELD = ' . $diffDate; 
```

# php - 列表项继续在 PHP 中的下一行

> ID：12413905
> 
> 赞同：0
> 
> 时间：2012-09-13T20:01:01.710
> 
> 标签：php, newline, forms

我正在使用表单提交要保存到配置文本文件的项目列表，但这些列表项应该都在文本文件的同一行。然而，每次 PHP 分解并将列表项放入文件时，它会自动在`</li>`标记前添加一个新行。为什么？我该如何防止这种情况。

代码：

```
$pro = explode("\n",$_POST["pro"]);
$proo = "<ul>";

for($index=0; $index<count($pro);$index++)
{
    $proo .= "<li>";
    $proo .= $pro[$index];
    $proo .= "</li>";
}

$proo .= "</ul>";

$proo = str_replace("\n","",$proo); 
```

**编辑 1**

如果我回`$proo`显到网页中，它看起来像这样：

```
<ul><li>List Item 1
</li><li>List Item 2
</li><li>List Item 3
</li><li>List Item 4
</li><li>List Item 5</li></ul> 
```

为什么每个之前都有换行符`</li>`？

在那里的某个地方，它正在添加新的线条......

谢谢！

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T20:14:36.683

换行符可能是棘手的 windows 或 linux `\n`，`\r`所以我添加了一个修剪以在爆炸后删除任何额外的东西，似乎有效。我个人会使用 foreach() 父亲而不是 for() 但这只是我

```
$_POST["pro"]="1
2
3
4";

$pro = explode("\n",$_POST["pro"]);

$proo = "<ul>";
for($index=0; $index<count($pro);$index++)
{
    $proo .= "<li>".trim($pro[$index])."</li>";
}

$proo .= "</ul>";

echo $proo; 
```

输出：

```
<ul><li>1</li><li>2</li><li>3</li><li>4</li></ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:24:15.237

在您使用的任何系统中，[PHP_EOL](http://php.net/manual/en/reserved.constants.php#constant.php-eol)将等于相应的 End-Of-Line-char-sequence。

```
explode(PHP_EOL,$_POST["pro"]); 
```

上面的代码将始终有效。

换行符（PHP_EOL 值）是：
Windows：\r\n
*nix：\n
旧 Apple Macintosh（新的基于 unix）：\r

[PHP_EOL doc](http://php.net/manual/en/reserved.constants.php#constant.php-eol)

编辑：正如[Dagon](https://stackoverflow.com/users/557846/dagon)
所指出的，浏览器默认使用 Windows 的换行符。

```
explode("\r\n",$_POST["pro"]); 
```

那是要走的路

# visual-studio-2010 - 如何获取列表中另一个列表中的所有项目？

> ID：12413909
> 
> 赞同：0
> 
> 时间：2012-09-13T20:01:17.793
> 
> 标签：visual-studio-2010, linq, list, c#-4.0, lambda

我知道标题不是很好，但我认为代码会更好。

假设我有以下课程：

```
public class Test
{
    public List<Object> ObjectList = new List<Object>;
} 
```

现在假设我有一个`list<Test> listOfTest`列表中有 100 个项目，并且列表中的每个 Test 对象在其列表中都有 100 个项目`List<Object> ObjectList`。

我可以使用 LINQ、Lambda 表达式或任何东西从每个测试对象中快速获取所有对象吗？

目前我必须执行以下操作：

```
var items = new List<Object>();
foreach(var testobj in listOfTest)
{
    items.AddRange(testObj.ObjectList);
} 
```

我知道我可以做 listOfTest.foreach() 但归结为仍然需要 foreach。

我个人不喜欢这样，并且认为这几乎是一种 hack，必须有更好的方法来做到这一点。所以问题基本上是，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:08:50.690

怎么样：

```
var items = listOfTest.SelectMany(lt => lt.myInnerObject).ToList(); 
```

# php - MVC，CodeIgniter，在视图中使用条件语句？

> ID：12413921
> 
> 赞同：2
> 
> 时间：2012-09-13T20:02:14.407
> 
> 标签：php, codeigniter, templates

在我看来，使用条件块会破坏 MVC 架构的目的吗？

我有一个加载视图的控制器方法，并且我希望根据作为参数传递给该方法的页面 id 有一个不同的按钮组。

一切正常，但在我看来，我有几个：

```
<?php if($pageID == n) : ?>
    html content...
<?php endif; ?> 
```

这是一个坏习惯吗？如果是，有什么更好的解决方案？在我看来调用库方法似乎也是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:23:54.077

有几种方法可以避免该解决方案，但这实际上取决于问题的规模。

更好的解决方案可能类似于以下内容。

**看法**

```
<?php echo $conditional_html; ?> 
```

**控制器**

```
switch($pageID)
{
  case 1:
        $data['conditional_html'] = $this->load->view('the_first_id_html', TRUE);
        break;
  case 4:
  case 7:
  case 8:
        $data['conditional_html'] = $this->load->view('some_special_html', TRUE);
        break;
  case 13:
  case 18:
        $data['conditional_html'] = $this->load->view('the_secret_menu_html', TRUE);
        break;
  default:
    $data['conditional_html'] = $this->load->view('the_default_html', TRUE);
}
$this->load->vars($data); 
```

如果您不介意在视图中加载视图，另一种更简单的方法可能是这样的：

**看法**

```
<?php $this->load->view($conditional_html); ?> 
```

**控制器**

```
switch($pageID)
{
  case 1:
        $data['conditional_html'] = 'the_first_id_html';
        break;
  case 4:
  case 7:
  case 8:
        $data['conditional_html'] = 'some_special_html';
        break;
  case 13:
  case 18:
        $data['conditional_html'] = 'the_secret_menu_html';
        break;
  default:
    $data['conditional_html'] = 'the_default_html':
}
$this->load->vars($data); 
```

最后，您可以通过许多不同的方式来做到这一点，但我希望这可以为一些替代方法提供一些启示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:25:14.337

不，不是。视图应该包含 MVC 设计模式中的表示逻辑。

问题是，在 CodeIgniter 中，您没有真正的视图，只有模板。这与一个事实有关，CodeIgniter 的最初目的是模仿 RubyOnRails，而不是实现 MVC。

如果有人强迫我使用 CodeIgniter，我会在“视图”中使用类似这样的东西：

```
<?php

$pagelist = array(
   1 => 'foo/b',
   2 => 'foo/a',
   3 => 'foo/r',
   4 => 'lorem/ipsum'
);

$pageID = isset( $pagelist[ $pageId ]) ? $pageID : 1;

?>

<!DOCTYPE html>
<html>

    <!-- some stuff here -->
    <?php include '/path/to/views/' . $pagelist[ $pageId ]; ?>
    <!-- a bit more HTML -->

</html> 
```

`$this->load->view()`in（CI 称之为）控制器基本上只是一个美化的`include`/ `require`。这种方法没有什么神奇之处。

此外，您可能会觉得这很有趣：[http ://codeigniter.com/forums/viewthread/62366/](http://codeigniter.com/forums/viewthread/62366/)

# google-app-engine - 动态属性的实体查询

> ID：12413922
> 
> 赞同：0
> 
> 时间：2012-09-13T20:02:15.093
> 
> 标签：google-app-engine, properties, entity, datastore

我目前正在从事一个项目，我需要在该项目中从数据存储区（特别是 Google App Engine）中持久化和查询数据。

该实体将存储用户输入的有用信息。我的目标是为用户输入的每个单词创建一个属性。我目前的方法是让用户输入他们希望存储在单个文本框中的单词，并用空格分隔。当用户点击“提交”时，我会解析字符串并将每个单词存储在一个数组中。（所以句子“I will be home soon”变成 [I, will, be, home, soon]（不带逗号）。

问题是，我不知道会输入什么字，也不知道会有多少字。假设我可以正确地循环遍历我的数组并一次提取每个单词并将其存储为属性，我可以同时检索该特定实体的所有属性吗？

谢谢你的建议！-担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:10:50.053

这听起来像是 Expando 的工作。

# recursion - 方案列表列表压缩

> ID：12413925
> 
> 赞同：0
> 
> 时间：2012-09-13T20:02:24.703
> 
> 标签：recursion, scheme

如果我的输入是一个列表列表，那么我想输出一个包含输入元素的列表，以便它们像一副扑克牌一样被洗牌。

例如，如果输入是'((1 2 3) (4 5))，那么我希望输出显示为'(1 4 2 5 3)。

我的想法是首先从列表中的第一个列表中删除一个元素，然后将该列表的列表移动到列表的后面。这样，可以附加列表的下一个列表的第一个元素。

到目前为止，这是我的代码：

```
(define (shuffle ls)
   (if (null? ls) '()
       (cond ((null? car (ls)) (append (cdr (ls)) (list (cdr(car(ls)))))))
             (else (car (car (ls)))
                   (append (cdr (ls)) (list (cdr (car (ls))))
                   (shuffle (cdr (ls))))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:33:10.537

[这里的所有代码片段都需要先加载[SRFI 1。](http://srfi.schemers.org/srfi-1/srfi-1.html) ]

您似乎想要的是压缩列表：

```
> (zip '(1 2 3) '(4 5))
((1 4) (2 5)) 
```

但是，如您所见，当它到达最短列表的末尾时，它会停止。也许您可以编写一个自定义 zip，它会在所有元素用完后停止：

```
(define (my-zip l1 l2)
  (cond ((and (null? l1) (null? l2)) '())
        ((null? l1) (cons (car l2) (my-zip l1 (cdr l2))))
        ((null? l2) (cons (car l1) (my-zip (cdr l1) l2)))
        (else (cons* (car l1) (car l2) (my-zip (cdr l1) (cdr l2)))))) 
```

让我们试试吧！

```
> (my-zip '(1 2 3) '(4 5))
(1 4 2 5 3)
> (my-zip '(1 2 3) '(4 5 6 7))
(1 4 2 5 3 6 7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T00:15:40.257

这也可以...我使用鸡肉方案，所以我必须从 srfi-1“导入”过滤器。

```
(use srfi-1)
(define *deck* '((1 2 3 4) (5 6 7) (9 10 11 12)))

(define nullcar? 
  (lambda (x) 
    (if (not (null? x)) 
      (null? (car x)))))

(define nullcdr? 
  (lambda (x) 
    (if (not (null? x)) 
      (null? (cdr x)))))

(define notnulls 
  (lambda (x) 
    (filter (lambda (e) 
              (not (null? e))) 
            x)))

(define firsts 
  (lambda (l) 
    (if (not (null? l)) 
      (map (lambda (x) 
             (if (not (null? x)) 
               (car x) 
               '())) 
            l))))

(define shuf 
  (lambda (d) 
    (notnulls 
      (append (firsts d) 
              (if (not (nullcar? d)) 
                (if (not (nullcdr? d))  
                  (shuf (map cdr (notnulls d))) 
                  '()) 
               '()))))) 
```

干杯！

# ruby-on-rails-3 - RoR：我怎样才能让一个微帖子根据一个元素由两个单独的微帖子形式创建？

> ID：12413928
> 
> 赞同：0
> 
> 时间：2012-09-13T20:02:30.210
> 
> 标签：ruby-on-rails-3

我的微博有一个名为 type 的列，它是一个字符串。这可以是购买或出售。我想要两个单独的输入表单，如果您将内容输入到一个表单中，那么它会自动填写购买作为类型（在创建微帖子时），如果您将内容输入到另一个表单中，它会自动填写销售。.

这是我的表格

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

我最近在 micropost 数据表中添加了 type 作为列。这就是为什么（还）没有输入的原因。阅读上文了解我希望如何自动填写类型

我想一种方法是用一些东西来标识每个表单。然后在填写表格时，我可以以某种方式告诉它根据填写的表格自动填写隐藏类型字段。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:54:15.327

我想你指的是`hidden_field`这里。用于`hidden_field`将信息传递给控制器​​而不将其呈现给用户。这是购买的一种形式：

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= f.hidden_field :type, 'purchase' %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

另一个出售：

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to sell?" %>
    <%= f.hidden_field :type, 'sale' %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

# objective-c - NSPredicate 格式字符串不起作用

> ID：12413929
> 
> 赞同：3
> 
> 时间：2012-09-13T20:02:33.550
> 
> 标签：objective-c, cocoa, foundation

在我的代码中，我想检查一条记录是否已经存在，所以我知道是创建它还是更新它。但是我遇到了一个问题。问题是当我使用这个时：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"%@ == %@", ATTRIBUTE_ID, idNumber];
[request setPredicate:pred]; 
```

这行不通。它总是声称没有找到任何结果。但是，当我像这样重写它时它工作得很好：

```
NSExpression *lhs = [NSExpression expressionForKeyPath:ATTRIBUTE_ID];
NSExpression *rhs = [NSExpression expressionForConstantValue:idNumber];
NSPredicate *pred = [NSComparisonPredicate
                                     predicateWithLeftExpression:lhs
                                     rightExpression:rhs
                                     modifier:NSDirectPredicateModifier
                                     type:NSEqualToPredicateOperatorType
                                     options:0];
[request setPredicate:pred]; 
```

我在格式字符串中遗漏了什么或做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T20:07:36.750

你`ATTRIBUTE_ID`是一个键，所以你应该`%K`在格式字符串中使用它的那部分。

格式字符串看起来像这样（注释中指出的大写 K）：

```
[NSPredicate predicateWithFormat:@"%K == %@", ATTRIBUTE_ID, idNumber]; 
```

# php - 根据浏览器检测更改 PHP 包含

> ID：12413942
> 
> 赞同：2
> 
> 时间：2012-09-13T20:03:16.537
> 
> 标签：php, ios, include, browser-detection

我的网站在常规浏览器（IE / Chrome / Firefox）和 IOS 设备（iphone / ipad / ipod touch）上加载并看起来完全相同。但是，对于移动设备，菜单上的特定链接必须不同。它加载了一个我无法控制的非现场页面，但一个版本适用于普通浏览器，另一个适用于手机。

我网站上的所有内容都是由 PHP 添加的，包括一个专门用于菜单链接的内容。

我已经知道如何根据浏览器检测重定向到另一个特定于移动设备的页面，但我想知道是否有办法改变这个包含，这取决于哪个浏览器正在访问该站点。

这样做的目的是不让整个站点镜像只是为了直接在代码上包含不同的包含。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:45:57.493

如果您想编写自己的解决方案，您需要确保您的解决方案`browscap.ini`是最新的。您可以从[Browser Capabilities Project](https://browsers.garykeith.com/downloads)下载最新的。然后，更新您`php.ini`使用此作为指南：

```
[browscap]
browscap = /path/to/your/php_browscap.ini 
```

最后，您可以调用[`get_browser()`](http://php.net/manual/en/function.get-browser.php)PHP 来获取`ismobiledevice`值。

有一些 PHP 项目可以为您完成工作：

*   [php-mobile-detect](http://code.google.com/p/php-mobile-detect/)易于使用，并且看起来会定期更新。
*   [phpbrowscap](https://github.com/garetjax/phpbrowscap)使用 browscap，但如果您在共享主机环境中运行而无法访问您`php.ini`的修改`browscap`指令，则它可以工作。

# ruby-on-rails - 如何建模用户、教练的关系？

> ID：12413943
> 
> 赞同：0
> 
> 时间：2012-09-13T20:03:17.973
> 
> 标签：ruby-on-rails, database-design, activerecord, model

在现实世界中，假设您有运动员和教练。

在模型中我有一个用户。用户是运动员。现在一个用户也可以是任何其他用户的教练。您将如何以最佳方式对此进行建模？

我渴望：

`@user.coach?`=> 真/假

`@user.is_a_coach_of?(other_user)`=> 真/假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:23:33.087

如果一个用户只能有一个教练，那么您可以将用户表上的教练关联回用户表。典型的例子是员工表，其中每个员工只有一位经理（CEO 除外）。

```
class User
  has_one :coach, :class_name => "User"
  has_many :coachees, :foreign_key => :coach_id, :class_name => "User"

  def coach?
    0 < coachees.count
  end

  def is_a_coach_of?(other_user)
    coachees.include?(other_user)
  end
end 
```

如果一个用户可以有很多教练，那么使用一个教练表，其中包含字段 user_id（针对教练）和针对她教练的用户的 coachee_id。

```
class Coach
  belongs_to :user
  belongs_to :coachee, :class_name => "User"
end

class User
  has_many coaches, :foreign_key => :coachee_id
  has_many coach_users, :through => :coachs, :source => :user
  has_many coachees, class_name => "Coach"
  has_many coachee_users, :through => :coachees, :source => :coachee

  def coach?
    0 < coachees.count
  end

  def is_a_coach_of?(other_user)
    coachee_users.include?(other_user)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:10:39.790

我会有一个代表运动员和他们的教练之间关系的表格——每个运动员/教练关系的一行——教练和运动员 ID 都与用户数据相关。

```
CoachID | AthleteID 
```

如果任何用户都可以成为教练，那么这就是您所需要的，但如果您想将“教练”限制为某些用户，请将“IsCoach”属性添加到用户表

# php - 浏览器cookie。和其他实现相同效果的选项

> ID：12413944
> 
> 赞同：0
> 
> 时间：2012-09-13T20:03:25.363
> 
> 标签：php, jquery, cookies, browser-cache, jquery-cookie

我将如何创建一个 cookie 来存储一个浏览器会话或一天的随机添加的 body 类。我的意图是随机给每个用户一个身体背景图像，然后存储该图像，这样它就不会改变每次页面重新加载或当他们转到第 2 页时。

网站[http://www.midnightlisteners.com/](http://www.midnightlisteners.com/)

我正在使用这个 jQuery 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

但它不工作

我的 jQuery 代码：

我使用的代码：

```
if($.cookie('userBackground') === null) {
    var classes = ['body-bg1','body-bg2', 'body-bg3', 'body-bg4'];
    var randomnumber = Math.floor(Math.random()*classes.length);
    var chosenClass = classes[randomnumber];
    $('body').addClass(chosenClass );
    $.cookie('userBackground', chosenClass, { expires: 7, path: '/' });
} else {
   //todo verify cookie value is valid
   $('body').addClass($.cookie('userBackground'));
} 
```

我得到的错误：

```
Uncaught ReferenceError: require is not defined
Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'cookie' 
```

还有其他方法可以做到这一点吗？php? 纯JavaScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:17:53.543

**更新：**

如果你想让它只持续会话的长度，那么只需使用会话：

```
<?php 
if(!isset($_SESSION['bgclass'])) {
   // lets make our cookie!
   $classes = array('body-bg1','body-bg2', 'body-bg3', 'body-bg4');

   $classIndex = array_rand($classes);

   $_SESSION['bgclass'] = $classes[$classIndex];

}       

$bgclass = $_SESSION['bgclass'];
?> 
```

这样，在会话超时或浏览器关闭后，用户将获得一个新的 bgclass 值。

* * *

如果您已经运行 php，我会这样做。如果可以的话，更好地处理这个服务器端。它也有点简单：

```
<?php 
if(!isset($_COOKIE['bgclass'])) {
   // lets make our cookie!
   $classes = array('body-bg1','body-bg2', 'body-bg3', 'body-bg4');
   $expire = time()+(60*60*24); // expire 1 day form now
   $classIndex = array_rand($classes);

   $bgclass = $classes[$classIndex]; // had $class here as opposed to $classes

   setcookie('bgclass', $bgclass, $expire);

} else {
  $bgclass = $_COOKIE['bgclass'];
}
?>
<html>
  <head></head>
  <body class="<?php echo $bgclass ?>">
    ...
  </body>
</html> 
```

要记住的关键是 cookie 本质上是一个响应标头，因此您必须在标头发送之前执行此操作（即，来自 php 的任何内容都会输出到浏览器）。

# c# - C# - 检查变量是否已初始化

> ID：12413948
> 
> 赞同：29
> 
> 时间：2012-09-13T20:03:36.177
> 
> 标签：c#, initialization

我想检查变量是否在运行时以编程方式初始化。为了让这个原因不那么神秘，请看以下不完整的代码：

```
string s;

if (someCondition) s = someValue;
if (someOtherCondition) s = someOtherValue;

bool sIsUninitialized = /* assign value correctly */;

if (!sIsUninitialized) Console.WriteLine(s) else throw new Exception("Please initialize s."); 
```

并完成相关位。

一个 hacky 解决方案是使用默认值初始化 s：

```
string s = "zanzibar"; 
```

然后检查它是否改变：

```
bool sIsUninitialized = s == "zanzibar"; 
```

但是，如果`someValue`或`someOtherValue`碰巧也是“桑给巴尔”怎么办？然后我有一个错误。有更好的办法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T20:05:05.230

如果编译器知道变量没有被初始化，代码甚至不会编译。

```
string s;
if (condition) s = "test";
// compiler error here: use of unassigned local variable 's'
if (s == null) Console.Writeline("uninitialized"); 
```

在其他情况下，`default`如果变量可能尚未初始化，则可以使用关键字。例如，在以下情况下：

```
class X
{ 
    private string s;
    public void Y()
    {
        Console.WriteLine(s == default(string));  // this evaluates to true
    }
} 
```

该[文档](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/default-value-expressions)指出 default(T) 将为`null`引用类型和`0`值类型提供。正如评论中所指出的，这实际上与检查 null 相同。

* * *

这一切都掩盖了这样一个事实，即您应该`null`在首次声明变量时真正将变量初始化为或其他。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T20:09:34.937

在 C# 2.0 中，您有 Nullable 运算符，它允许您为迄今为止的值类型设置 null 的初始值，允许执行以下操作：

```
int? x = null;

if (x.HasValue)
{
    Console.WriteLine("Value for x: " + num.Value); 
} 
```

这会产生：“x 的值：空”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-13T20:07:40.933

只需默认分配它`null`，而不是字符串值

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-13T20:11:55.123

这是一种方法：

```
string s;
if (someCondition) { s = someValue; }
else if (someOtherCondition) { s = someOtherValue; }
else { throw new Exception("Please initialize s."); }

Console.WriteLine(s) 
```

这对于检查字符串是否为 null 可能更可取，因为 someValue 可能是一种有时可以返回 null 的方法。换句话说，也许 null 是初始化字符串的合法值。

就我个人而言，我喜欢这个胜过`isInitialized`一面旗帜。除非必须，否则为什么要引入额外的标志变量？我不认为它更具可读性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T20:05:49.903

您可以保留一个单独的标志，指示字符串已被初始化：

```
string s = null;
bool init = false;
if (conditionOne) {
    s = someValueOne;
    init = true;
}
if (conditionTwo) {
    s = someValueTwo;
    init = true;
}
if (!init) {
    ...
} 
```

这将处理分配时的情况`s`，包括分配时的情况`null`，空字符串或`"zanzibar"`.

另一种解决方案是制作一个静态字符串来表示“未初始化”值，并使用[`Object.ReferenceEquals`](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)而不是`==`检查它是否已更改。但是，`bool`可变方法更明确地表达了您的意图。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-24T15:44:45.520

我同意 Vytalyi 的观点，即应尽可能使用默认值 null，但是，并非所有类型（如 int）都可以为空。您可以按照 David W 的解释将变量分配为可空类型，但这可能会破坏大型代码库中的大量代码，因为在访问之前必须将可空类型细化为其原始类型。

这种通用方法扩展应该对那些处理大型代码库的人有所帮助，其中主要设计决策已经由前任做出：

```
public static bool IsDefault<T>(this T value) 
        => ((object) value == (object) default(T)); 
```

如果您从头开始，只需利用可空类型并将其初始化为空；该 C# 功能的实现是有原因的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T20:06:43.630

我选择永远无法使用的初始化值，典型值包括`String.Empty`、`null`、`-1`和 256 个字符的随机字符串生成器。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-13T21:04:31.913

通常，将默认值指定为`null`或`String.Empty`。对于不能使用这些“空”值的情况，定义一个常量来表示特定于应用程序的未初始化值：

```
const string UninitializedString = "zanzibar"; 
```

然后在您想要初始化或测试初始化​​时引用该值：

```
string foo = UnininitializedString;
if (foo == UninitiaizedString) {
  // Do something
} 
```

请记住，字符串在 C# 中是不可变的常量，因此实际上只有一个实例`UninitializedString`（这就是比较有效的原因）。

# sql - SQL 按天汇总

> ID：12413951
> 
> 赞同：2
> 
> 时间：2012-09-13T20:03:49.157
> 
> 标签：sql, oracle

我有一个简单的查询，每天都会吐出 new_users ......

```
Select trunc(create_dtime),Count(Player_Id) as New_Users
  From Player
 Where Trunc(Create_Dtime) >= To_Date('2011-APR-22','yyyy-mon-dd')
 Group By Trunc(Create_Dtime)
 Order by trunc(Create_Dtime) 
```

随着每一天的继续，我希望这个总数 new_users ......所以例如，如果当前查询吐出一个结果：

```
Apr 22
Apr 23
Apr 24 of 1000 new users each day... 
```

我希望这个新查询说：

```
Apr 22 = 1000 New users
Apr 23 = 2000
Apr 24 = 3000 
```

...依此类推，直到最后一个日期（今天）在一行中显示新用户总数。

让我知道这是否足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:22:48.173

我会使用累积和来做到这一点，Oracle 很乐意通过分析函数支持它：

```
select thedate, New_Users,
       sum(New_Users) over (order by thedate) as Cumulative_New_Users
from (Select trunc(create_dtime) as thedate, Count(Player_Id) as New_Users
      From Player
      Where Trunc(Create_Dtime) >= To_Date('2011-APR-22','yyyy-mon-dd')
      Group By Trunc(Create_Dtime)
     ) t
Order by 1 
```

# java - System.getProperty("user.dir") 不起作用

> ID：12413952
> 
> 赞同：4
> 
> 时间：2012-09-13T20:03:51.293
> 
> 标签：java

我需要从我的项目中获取相对路径来上传照片，但是当我`System.getProperty("user.dir");`在测试中运行时，它会返回`/home/user/workspace/Myproject`，但是如果我从我的 spring 控制器运行它，它只会返回`/home/user`。

任何人都可以提供可能正在发生的见解吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T20:06:00.507

该`user.dir`属性是您运行 Java 的当前工作目录。您在运行项目时正在启动 java，`/home/user/workspace/Myproject`但是当 Spring 运行它时，不能保证它是同一个工作目录。您是否正在寻找`user.home`（应该始终是`/home/user`）？

# ruby - 红宝石防止被零除

> ID：12413956
> 
> 赞同：-1
> 
> 时间：2012-09-13T20:04:06.317
> 
> 标签：ruby, divide-by-zero

在某些情况下这样的表达

```
...some loop
  solution = n[0].to_s+a[0]+n[1].to_s+a[1]+n[2].to_s+a[2]+n[3].to_s+a[3]+n[4].to_s+a[4]+n[5].to_s 
  puts solution if eval(solution) == 100

#=> `eval': divided by 0 (ZeroDivisionError) 
```

如何防止这种情况，或者可能跳过循环计算并继续

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:16:36.473

如果您真的只想跳过当前的计算并向前迈进，最简单的方法是使用 begin-rescue 语句

```
loop do
  begin
    solution = n[0].to_s+a[0]+n[1].to_s+a[1]+n[2].to_s+a[2]+n[3].to_s+a[3]+n[4].to_s+a[4]+n[5].to_s
    puts solution if eval(solution) == 100
  rescue ZeroDivisionError
    # catch error
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:12:57.810

哇。我猜测：

```
n[0].to_s+a[0]+n[1].to_s+a[1]+n[2].to_s+a[2]+n[3].to_s+a[3]+n[4].to_s+a[4]+n[5].to_s 
```

又名：

```
n[0].to_s +
a[0] +
n[1].to_s +
a[1] +
n[2].to_s +
a[2] +
n[3].to_s +
a[3] +
n[4].to_s +
a[4] +
n[5].to_s 
```

可以更好地写为：

```
n[0..5].map(&:to_s).zip(a[0..4]).flatten.join 
```

或者：

```
n.map(&:to_s).zip(a).flatten.join 
```

# c++ - 在 SWIG 包装器中导出评论

> ID：12413957
> 
> 赞同：5
> 
> 时间：2012-09-13T20:04:12.277
> 
> 标签：c++, comments, swig

假设我有一个 C++ 头文件 fun.hpp：

```
//existing description of what fun1 does
void fun1(int x);
//existing description of what fun2 does
void fun2(int x); 
```

我想生成一个 SWIG 包装器，以便评论将以目标语言显示：

1.  在单独的 HTML 文档中
2.  嵌入在目标生成的包装器代码中

有任何想法吗？

# php - 如何为两个或多个单独的 MySQL 表进行 PHP 插入

> ID：12413966
> 
> 赞同：0
> 
> 时间：2012-09-13T20:05:00.693
> 
> 标签：php, mysql

的HTML：

```
<html> 
<?php include 'C:\xampp\htdocs\paxdb\head.php';  
include 'config/menu.php';?>  
<div id="dataentry"> 

<!--This section is the demographic text field area--> 
<form method="post" action="dataentered.php"> 
First Name:&nbsp;<input type="text" name="First_Name"/></br> 
</br> 
Last Name:&nbsp;<input type="text" name="Last_Name"/></br> 
</br> 
E-mail:&nbsp;<input type="text" name="email"/></br> 
</br> 

<!--This section is the age range checkbox selection area--> 
<p><u><b>Age Range</b></u></p> 
<input type="checkbox" name="age[]" id="20-25" value="20-25"/>&nbsp;20-25</br> 
<input type="checkbox" name="age[]" id="26-30" value="26-30"/>&nbsp;26-30</br> 
<input type="checkbox" name="age[]" id="31-35" value="31-35"/>&nbsp;31-35</br> 
</div> 
<div id="checkboxes"> 
</div> 

<!--This section is the trips take checkbox area--> 
<div id="tripstodatetype"> 
<p><u><b>WHAT TYPE OF TRIPS TO DATE HAVE YOU TAKEN?</b></u></p> 
<input type="checkbox" name="trip2date[]" id="Bus" value="Bus">&nbsp;Bus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br> 
<input type="checkbox" name="trip2date[]" id="Car" value="Car">&nbsp;Car</br> 
<input type="checkbox" name="trip2date[]" id="Weekend fly-in" value="Weekend fly-in">&nbsp;Weekend fly-in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br> 
</div> 
<div id="tripstodateborder"> 
</div> 

<!--This section is the type of trip client likes best checkbox area--> 
    <div id="triplikebest"> 
<p><u><b>WHAT TYPE OF TRIP DO YOU LIKE BEST?</b></u></p> 
<input type="checkbox" name="triplikebest[]" value="Bus">&nbsp;Bus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br> 
<input type="checkbox" name="triplikebest[]" value="Car">&nbsp;Car</br> 
<input type="checkbox" name="triplikebest[]" value="Weekend fly-in">&nbsp;Weekend fly-in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br> 
</div> 
<div id="triplikeborder"> 
</div> 
```

**和 PHP：**

```
<html>
<?php
include 'head.php';
include 'config/menu.php'; 
$host="localhost";
$username="somename";
$password="somepass";
$dbname="pax";

$dbc = mysql_connect($host, $username, $password, $dbname); 
if (!$dbc) 
{ 
    die('Error connecting to MySQL server' . mysql_error()); 
    } 
mysql_select_db($dbname, $dbc); 

$first_name = mysql_real_escape_string($_POST['First_Name']);  
$last_name = mysql_real_escape_string($_POST['Last_Name']); 
$email = mysql_real_escape_string($_POST['email']); 
$age = $_POST['age']; 
$my_range = ""; 
foreach($age as $range) { 
   $my_range = $my_range . mysql_real_escape_string($range) . ", "; 
} 
$trip2date = $_POST['trip2date'];
$my_triprange = ""; 
foreach($trip2date as $triprange) { 
   $my_triprange = $my_triprange . mysql_real_escape_string($triprange) . ", "; 
} 
mysql_query("INSERT INTO `pax` (`First_Name`, `Last_Name`, `email`, `age`,`trip2date`)    
     VALUES('$first_name','$last_name','$email', '$my_range','$my_triprange')")  
     or die(mysql_error());  
mysql_close($dbc); 
?> 
<div class = "entered">
 <p>Success! Your Data Has Been Submitted.  Please click on <b>'DATA ENTRY'</b> above to enter another. </P>
 </div>
    <?php include 'footer.php';?>
    </div>  
    </div>
    </body>
</html> 
```

**如果我要将三元组数据放入一个单独的表中，我将如何转换 INSERT 查询以执行插入到新表中？（假设新/第二张表称为“旅行”）。-或者- 在这里使用第二个 INSERT 查询是否更有意义？如果是这样，它应该如何保持连接到第一个表/ID**

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:16:27.180

查看您的代码，您是否尝试将相同的数据两次输入到不同的表中？

如果不是，你应该让你的查询成为一个变量，所以该行会读到这样的内容......

```
$query1 = mysql_query("INSERT INTO `pax` (`First_Name`, `Last_Name`, `email`, `age`,`trip2date`)    
     VALUES('$first_name','$last_name','$email', '$my_range','$my_triprange')")  
     or die(mysql_error()); 
```

您可以考虑为另一个表重复插入语句，但使用原始代码中声明的相同变量。

如果我说错了，你能解释一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:16:29.060

```
mysqli_multi_query(); 
```

在此处阅读手册：http: [//php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

编辑：

```
<?php

  /* connection conf */
  // use p: if you want to have a persistent connection 
  // this will improve the speed and resource usage of opening a connection
  $host     = "p:localhost";
  $username = "somename";
  $password = "somepass";
  $dbname   = "pax";

  /* make connection */
  $lnk = mysqli_connect($host, $username, $password, $dbname);

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
  }

  /* prepare variables */
  $first_name = mysqli_real_escape_string($_POST['First_Name']);  
  $last_name  = mysqli_real_escape_string($_POST['Last_Name']); 
  $email      = mysqli_real_escape_string($_POST['email']); 
  $age        = $_POST['age']; 

  $my_range = ""; 
  foreach($age as $range) { 
    $my_range = $my_range . mysqli_real_escape_string($range) . ", "; 
  }

  $trip2date = $_POST['trip2date'];
  $my_triprange = ""; 
  foreach($trip2date as $triprange) { 
     $my_triprange = $my_triprange . mysqli_real_escape_string($triprange) . ", "; 
  }

  /* execute query */
  mysqli_query($lnk, "INSERT INTO `pax` (`First_Name`, `Last_Name`, `email`, `age`,`trip2date`) " .
                     "VALUES('$first_name','$last_name','$email', '$my_range','$my_triprange');"
               );  

  /* execute multi query INSERT */
  mysqli_multi_query($lnk, "INSERT INTO `pax` (`First_Name`, `Last_Name`, `email`, `age`,`trip2date`) " .
                           "VALUES('$first_name','$last_name','$email', '$my_range','$my_triprange');"
                           "COMMIT;"
                     );  

  /* execute multi query SELECT */
  $query  = "SELECT CURRENT_USER();";
  $query .= "SELECT `email` FROM `pax` ORDER BY `id` LIMIT 5";

  if (mysqli_multi_query($lnk, $query)) {
    do {
      /* store first result set */
      if ($result = mysqli_store_result($lnk)) {
        while ($row = mysqli_fetch_row($result)) {
          printf("%s\n", $row[0]);
        }
        mysqli_free_result($result);
      }
      /* print divider */
      if (mysqli_more_results($lnk))
       printf("-----------------\n");

    } while (mysqli_next_result($lnk));
  }  

  /* close conenction */
  mysqli_close($dbc); 

  // I used your code and some samples from the PHP manual.
  // Hope this piece of code helps you and others to understand mysqli better.
  // Thanks to PHP for having the best manual.

?> 
```

# javascript - JsFiddle 上的鼠标事件不起作用？

> ID：12413968
> 
> 赞同：1
> 
> 时间：2012-09-13T20:05:13.533
> 
> 标签：javascript, jsfiddle

我有我的小提琴，但我不明白为什么它没有在“onmouseout”事件上调用我的函数。 [http://jsfiddle.net/foreyez/Xf6LW/](http://jsfiddle.net/foreyez/Xf6LW/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:07:02.490

工作正常，您只需将函数放在文档的头部（或元素在 DOM 中之后的正文）。

**[jsFiddle 示例](http://jsfiddle.net/j08691/Xf6LW/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T20:07:36.713

这是因为当您选择 onLoad 选项时，您在 JavaScript 面板中创建的函数不是全局的。你的 JavaScript 被封装在一个函数中。

如果您确实希望它们是全球性的，您必须执行 j08961 建议的操作，通过更改该下拉列表以说没有包裹（身体或头部）将起作用

最好的解决方案是不要从 HTML 设置事件处理程序，无论如何这都是不好的做法，那么你就不会依赖全局函数或混合 HTML 和 JS。

```
<div id="myDiv">
</div>​
document.getElementById('myDiv').onmousemove = function() {
  alert('here');
} 
```

旁注：您应该已经注意到控制台中的错误说 myFunc 未定义或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T20:09:29.557

我认为这是 jsfiddle 的原因，它在 HTML 之后声明了所有 javascript。HTML 将运行并寻找 a`myFunc`而不是找到它。然后它会加载 JS，它甚至不会运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T20:09:48.427

将 myFunc 设为全局函数；

我使用 firebug 搜索了我的代码并得到了以下生成的代码。

```
window.addEvent('load', function() {
    //window.myFunc makes myFunc as a global function
    // It can be accessed from any were inside current window.
   window.myFunc = function myFunc(x)
   {
        alert('yo');
   }
    // function below is not available gloably.
    function myFunct1(){
        alert('yo1');
    }
}); 
```

见[jsfiddle](http://jsfiddle.net/Xf6LW/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T20:11:36.477

在这里您可以看到更改：[jsfiddle。](http://jsfiddle.net/Xf6LW/3/)

# ruby-on-rails - RoR 中的简单舍入在一个非常奇怪的情况下不起作用

> ID：12413973
> 
> 赞同：2
> 
> 时间：2012-09-13T20:05:28.843
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

> **可能重复：**
> [红宝石中的算术](https://stackoverflow.com/questions/1451015/arithmetic-in-ruby)

status_update 模型接受 2 个值，对它们进行一些简单的计算，然后从那里分配 'current_lbm' 和 'current_bf_pct'。

如果我不限制 current_lbm 和 current_bf_pct 将产生大量小数，因此我使用 .round(2) 方法将值限制为 2 个小数位。

这是执行此操作的方法。

```
after_initialize :default_values
.
.
def default_values      
 if self.current_bf_pct >= 0.5
   self.current_bf_pct /= 100
    if self.current_bf_pct <= 0.04
      self.current_fb_pct *= 100
    end 
 end
 self.current_fat_weight = self.current_weight * self.current_bf_pct
 self.current_lbm = self.current_weight - self.current_fat_weight
 self.current_fat_weight = self.current_fat_weight.round(2)
 self.current_lbm = self.current_lbm.round(2)
end 
```

结果如下：

```
09/13/2012 186.0 4.5 177.63 8.37
09/13/2012 187.0 5.5 176.72 10.29
09/13/2012 188.0 6.5 175.78 12.22
09/13/2012 189.0 7.5 174.83 14.18
09/13/2012 190.0 8.5 173.85 16.15
09/13/2012 191.0 9.5 172.86 18.15
09/13/2012 192.0 10.5 171.84 20.16
09/13/2012 193.0 11.5 170.81 22.2
09/13/2012 194.0 12.5 169.75 24.25
09/13/2012 195.0 13.5 168.68 26.33
09/13/2012 196.0 14.499999999999998 167.58 28.42
09/13/2012 197.0 15.5 166.47 30.54
09/13/2012 198.0 16.5 165.33 32.67
09/13/2012 199.0 17.5 164.18 34.82
09/13/2012 200.0 18.5 163.0 37.0 
```

我的问题是... 14.499999999999998 到底是怎么回事？

这些是视图的结果。current_bf_pct 行是日期中的第三行。它们不是小数，因为我在视图中将它们乘以 100。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:32:11.967

如果您按原样使用显示浮点数，则无法避免这种情况（请参阅[ruby​​ 中的算术](https://stackoverflow.com/questions/1451015/arithmetic-in-ruby)）。我建议您将浮点数转换为字符串以进行显示。

示例（您的实际结果可能会有所不同）：

```
>> 7.3-7.2
=> 0.09999999999999964 
```

转换为小数点后 1 位的字符串：

```
>> '%.1f' % (7.3-7.2)
=> "0.1" 
```

'%' 运算符是以下的简写：

```
sprintf '%.1f', (7.3-7.2) 
```

继续阅读`sprintf`。这是一个学习曲线，但它非常强大。

另一种解决方案是使用 BigDecimal （第二个参数是精度 - 确保您理解这意味着什么）：

```
BigDecimal(7.3-7.2, 1).to_s 
```

如果您使用足够大的精度，您将再次看到问题：

```
>> BigDecimal(7.3-7.2, 16).to_s
=> "0.09999999999999964" 
```

# java - Java RegEx Matcher.groupCount 返回 0

> ID：12413974
> 
> 赞同：10
> 
> 时间：2012-09-13T20:05:31.527
> 
> 标签：java, regex, matcher

我知道这已被问到，但我无法解决它

对于带有正文的书本对象（西班牙语）：（`"quiero mas dinero"`实际上要长一些）

我的`Matcher`不断返回 0：

```
 String s="mas"; // this is for testing, comes from a List<String>
    int hit=0;
    Pattern p=Pattern.compile(s,Pattern.CASE_INSENSITIVE);
    Matcher m = p.matcher(mybooks.get(i).getBody());
    m.find();
    System.out.println(s+"  "+m.groupCount()+"  " +mybooks.get(i).getBody());
    hit+=m.groupCount(); 
```

我一直`"mas 0 quiero mas dinero"`在控制台上。为什么哦为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T20:09:50.083

从[Matcher.groupCount()](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#groupCount%28%29)的 javadoc ：

> *返回此匹配器模式中的捕获组数。
> 按照惯例，零组表示整个模式。它不包括在此计数中。*

如果您从中检查返回值，`m.find()`则返回`true`和`m.group()`返回`mas`，那么匹配器确实找到了匹配项。

如果您要做的是计算`s`in的出现次数`mybooks.get(i).getBody()`，您可以这样做：

```
String s="mas"; // this is for testing, comes from a List<String>
int hit=0;
Pattern p=Pattern.compile(s,Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(mybooks.get(i).getBody());
while (m.find()) {
    hit++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T20:19:00.533

> 然后我怎么能在不循环的情况下找到字符串中“mas”（或任何其他）单词的数量？

您可以在 Apache Commons 中使用[StringUtils ：](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)

```
int countMatches = StringUtils.countMatches("quiero mas dinero...", "mas"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T10:28:52.257

您可以在正则表达式中添加括号，然后在您的示例中为“（mas）”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-04T08:10:30.123

> 您可以在正则表达式中添加括号，然后在您的示例中为“（mas）”。

这种方式不适合这个任务。它显示捕获组的数量包含 Matcher m 的结果。在这种情况下，即使对于像“mas mas”这样的输入文本的模式是“(mas)”，m.groupcount() 也会显示 1 - 一个且只有两个匹配项的组。

因此，第一个响应是正确的，并且唯一可能用于匹配计数。

# javascript - jQuery - 有条件地附加 HTML

> ID：12413981
> 
> 赞同：3
> 
> 时间：2012-09-13T20:05:53.537
> 
> 标签：javascript, jquery, regex

我正在尝试在 div 中的每个图像之后附加放大镜的图片。其中一些是链接的，在这种情况下，我希望它在`</a>`标签`img`后面的后面附加它。

我该怎么做：

```
<img src="a.jpg" .... /> 
```

变成：

```
<img src="a.jpg"><img src="mag.gif" /> 
```

和：

```
<a href="...."><img src="a.jpg" .... /></a> 
```

变成：

```
<a href="...."><img src="a.jpg"></a><img src="mag.gif" /> 
```

`img`请注意，标签前后可能有换行符。

这是怎么做的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:09:29.963

你可以使用`after`方法。

> 在匹配元素集中的每个元素之后插入由参数指定的内容。

```
$('img').after('<img src="mag.gif"/>') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T20:09:19.120

试试这个：

```
$('img[src="a.jpg"]').after('<img src="mag.gif" />'); 
```

这将在每个图像之后添加放大镜图像`src="a.jpg"`。

阅读有关 jQuery***[`.after()`](http://api.jquery.com/after/)***方法的信息。

你也可以***[`.insertAfter()`](http://api.jquery.com/insertAfter/)***像下面这样使用：

```
$('<img src="mag.gif" />').insertAfter('img[src="a.jpg"]'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T20:16:27.453

这是您的代码：

```
$('img').parent().not('a').children('img:first').after('<img src="mag.gif" />')​;
$('img').parents('a:first').after('<img src="mag.gif" />'); 
```

工作演示位于[http://jsfiddle.net/sURqy/](http://jsfiddle.net/sURqy/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T20:20:12.823

```
$.each($('img[src="a.jpg"]'), function(i) {
    var $element = $(this);
    if($element.parent('a').length) {
        $element = $element.parent();
    }
    $element.after('<img src="mag.gif"/>');
}); 
```

[演示](http://jsfiddle.net/vZaQu/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T20:22:00.193

## 这解决了你的条件逻辑

```
var $a_with_img = $('a').has('img');
var $img_no_a = $('img').not('a img');
var $elements = $.merge($img_no_a, $a_with_img);
$elements.after('<img src="mag.gif" />');​ 
```

# c# - 将 WPF 按钮 CommandParameter 绑定到 DataTemplate 中的按钮本身

> ID：12413985
> 
> 赞同：15
> 
> 时间：2012-09-13T20:06:04.457
> 
> 标签：c#, wpf, binding, datatemplate, commandparameter

我有一个 DataTemplate 代表我通过自定义 AppBarCommand 对象的集合声明的 AppBar 按钮。

```
 public AppBarCommand(RelayCommand command, string buttonstyle)
  {
     Command = command;
     ButtonStyle = buttonstyle;
  }

<DataTemplate>
   <Button Command="{Binding Command}"
           Style="{Binding ButtonStyle, Converter={StaticResource StringNameToStyleConverter}}"/>
</DataTemplate> 
```

我想添加一个 CommandParameter 绑定，但参数必须是 Button 本身。这样我就可以设置 Callisto 浮出控件的 PlacementTarget。这可能吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-13T20:12:27.553

```
<Button Command="{Binding Command}" 
        CommandParameter="{Binding RelativeSource={RelativeSource Self}}" /> 
```

例如，您的 Command 属性应该是`RelayCommand`:的通用版本`RelayCommand<object>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T20:14:34.373

像 Miklós Balogh 所说的那样回答，或者您可以：

```
<Button x:Name="MyButton" Command="{Binding Command}" CommandParameter={Binding ElementName=MyButton ... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-11T14:51:59.813

我有同样的问题，但我在不同的环境中使用它：

```
<MenuItem ItemsSource="{Binding MyList}">
    <MenuItem.ItemContainerStyle>
        <Style TargetType="{x:Type MenuItem}">
            <Setter Property="Command" Value="{Binding RelativeSource={ RelativeSource FindAncestor, AncestorType={ x:Type Window}}, Path= DataContext.MyListItemCommand}"/>
            <Setter Property="CommandParameter" Value="{Binding}" />
        </Style>
    </MenuItem.ItemContainerStyle>
</MenuItem> 
```

所以我假设即使你这样写

```
<Button Command="{Binding Command}" CommandParameter="{Binding}" /> 
```

它应该工作。

我还建议阅读[这篇文章](https://stackoverflow.com/questions/5488014/are-binding-path-and-binding-really-equal)以更好地理解它。

# java - 同步方法中的java线程安全错误

> ID：12413987
> 
> 赞同：0
> 
> 时间：2012-09-13T20:06:12.783
> 
> 标签：java, android, multithreading, thread-safety

我有这门课

```
package net.omnosis.mazegame.components;

import net.omnosis.mazegame.SlicedBitmap;
import android.graphics.Bitmap;

public class PlayerLayer extends DrawableLayer {

    private Player player;
    private XY tileImageSize;

    private int[] move = new int[] { 1, 2, 3, 4, 3, 2, 1, 6, 7, 8, 7, 6 };
    //private int[] move = new int[] { 8 };

    private int moveCount;
    private int moveCountMax = move.length;

    private Bitmap playerBitmap;
    public SlicedBitmap playerTiles;

    private int line;

    private static final int VERTICAL = 0;
    private static final int HORIZONTAL = 8;

    public PlayerLayer(Player player, Bitmap playerBitmap, XY tileImageSize) {

        this.playerBitmap = playerBitmap;
        this.tileImageSize = tileImageSize;
        playerTiles = new SlicedBitmap(playerBitmap, tileImageSize.x(), tileImageSize.y());

        setPlayer(player);

        update();
    }

    public final void setPlayer(Player player) {
        if (this.player != null) {
            this.player.removeListener(this);
        }

        this.player = player;
        player.addListener(this);
        update();
    }

    public void updateDirection() {
        Direction dir = player.getHeading();

        if (dir == Direction.LEFT || dir == Direction.RIGHT) {
            line = HORIZONTAL;
        } else if (dir == Direction.TOP || dir == Direction.BOTTOM) {
            line = VERTICAL;
        }
    }

    public synchronized void animate() {

        if (player.isMoving()) {

            moveCount++;

            if (moveCount >= moveCountMax) {

                player.finishMove();
                moveCount = 0;
            }
        } else {

        }

        updateDirection();
        super.update();
    }

    public void update() {
        updateDirection();
        super.update();
    }

    public XY getSpritePos() {
        XY playerPos = new XY(player.getCurrentPosition().x() * tileImageSize.x() + (tileImageSize.x() / 2), player.getCurrentPosition().y() * tileImageSize.y() + (tileImageSize.y() / 2));
        XY animationPos = getAnimationPos();
        return playerPos.add(animationPos);
    }

    public XY getAnimationPos() {
        double step = (double) tileImageSize.x() / moveCountMax * moveCount;
        return player.getHeading().multiply((int) step);
    }

    public Bitmap getBitmap() {

        if (moveCount >= moveCountMax) {
            System.out.println("BUG! MORE: " + moveCount + "  max: " + moveCountMax);
            moveCount = 0;
        }
        return playerTiles.getTile(move[moveCount] + line);
    }
} 
```

一个线程`animate`每 10 毫秒调用一次该方法。有时我会得到这个输出：`BUG! MORE: 12 max: 12`这是因为我在方法中再次检查了值`getBitmap()`。为什么？

我不明白，如果动画是`synchronized`，moveCount 怎么可能超过 11？

*如果模拟器滞后，这种情况会更频繁地发生。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:10:44.720

您`moveCount`在一个`synchronized`块中递增和重置，但是当您访问方法`moveCount`中的变量时，您没有在同一个锁上同步`getBitmap()`。

这意味着线程 A 可能位于`animate()`方法的中间，并且已递增`moveCount`到等于`moveCountMax`。然后线程 B 进入`getBitmap()`并读取线程 A 重置为 0`moveCount` *之前的值。*`moveCount`

通常，您不仅需要在写入变量的值时进行同步，还需要在从变量中读取时进行同步（在同一个锁上），特别是如果对该变量的操作之一（如您的`animate()`方法）涉及复合操作（递增，然后可能重置为 0）

顺便说一句，如果`moveCountMax`是一个常数值 ( `= moves.length`)，则将其标记为`final`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:12:21.383

您需要同步对共享可变数据的所有访问。您在增量上同步，这很好，但您不会在读入时同步`getBitmap`。这意味着线程可以`moveCount`在`getBitmap`递增时或之后立即读取。

想象一下，您递增`moveCount`并且在递增线程将其设置为 0 之前，另一个线程调用 getBitmap 的情况，`if (moveCount >= moveCountMax) {`此时可能为真。

# cakephp - 如何将验证错误字段名称转换为 CakePHP 中的输入名称？

> ID：12413988
> 
> 赞同：2
> 
> 时间：2012-09-13T20:06:15.763
> 
> 标签：cakephp

我有一个带有表单和验证的 CakePHP（最新版本）Web 应用程序，所有这些都使用传统的回发正常工作，但现在我正在切换一些表单以通过 ajax 提交。当出现验证错误时，我希望将它们以 JSON 格式返回到客户端，如下所示：

```
{
"success":false,
"errors":{
    "data[User][username]":["This is not a valid e-mail address"],
    "data[User][password]":["You must choose a password"]
}} 
```

**错误数组的键需要与表单字段上的名称属性相对应。**我们有一些预构建的客户端脚本，期望以这种方式格式化 JSON。好消息是这非常接近于 CakePHP 中的 validationErrors 对象。所以我目前在我的控制器中这样做：

```
if ($this->User->save($this->request->data)) {

} else {
    if ($this->request->is('ajax')) {
        $this->autoRender = $this->layout = false;
        $response['success'] = false;
        $response['errors'] = $this->User->validationErrors;
        echo json_encode($response);
        exit(0);
    }
} 
```

然而，这就是 JSON 响应的样子：

```
{
"success":false,
"errors":{
    "username":["This is not a valid e-mail address"],
    "password":["You must choose a password"]
}} 
```

请注意，**错误键中只有基本的数据库表字段名称。**它们不会转换为 FormHelper 通常会处理的 data[User][username] 格式。

在我返回之前有一些简单的方法来调整数组吗？我不想简单地循环并预先添加“data [User]”，因为这不够健壮。我想要一些可以放在一个地方并从各种控制器调用各种模型的代码。FormHelper 使用什么来提供输入名称属性？我可以利用它吗？我应该以某种方式使用 JSON 视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:58:20.383

那是因为这就是`$validationErrors`数组的格式化方式。要获得你想要的输出，你必须循环，没有办法绕过它。

```
foreach ($this->User->validationErrors as $field => $error) {
  $this->User->validationErrors["data[User][$field]"] = $error;
  unset($this->User->validationErrors[$field]);
} 
```

我建议改为将所有错误传递给`json_encode()`. `$this->validationErrors`是视图上可用的该请求的所有模型验证错误的组合列表（在渲染后编译）。您应该将显示逻辑（回显 json）移动到您的视图中，并在那里循环。

**在视图中**

```
$errors = array();
foreach ($this->validationErrors as $model => $modelErrors) {
  foreach ($modelErrors as $field => $error) {
    $errors["data[$model][$field]"] = $error;
  }
}
$response['errors'] = $errors;
echo json_encode($response); 
```

这将输出如下内容：

```
{
  "success":false,
  "errors": [
      "data[User][username]": "This is not a valid e-mail address",
      "data[User][password]": "This is not a valid password",
      "data[Profile][name]": "Please fill in the field"
  ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T06:54:59.857

```
I have created a small recursive function to create validation error as a string with column name so that can be passed as json object.

 /**
     * prepare erorr message to be displayed from js
     *
     * @param array   $errors  validation error array
     * @param stringn $message refernce variable
     *
     * @return void
     */
    public function parseValidationErrors($errors, &$message)
    {
        foreach ($errors as $columnName => $error) {
            $message .= "<strong>$columnName:</strong> ";
            foreach ($error as $i => $msg) {
                if (is_array($msg)) {
                    $this->_parseValidationErrors($msg, $message);
                } else {
                    $message .= str_replace("This field", "", $msg . " ");
                    isset($error[$i + 1]) ? $message .= " and " : $message;
                }
            }
        }
    } 
```

控制器代码是这样的。

```
if (!$this->YourModel->saveAll($modelObject)) {
                $errors = $this->YourModel->validationErrors;
                $message = '';
                $this->parseValidationErrors($errors, $message);
                $response = array('status' => 'error', 'message' => $message);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T08:29:25.753

```
$response['errors']['User'] = $this->User->validationErrors; 
```

# objective-c - 使用 NSJSONSerialization 提取内部 json 数据 xcode

> ID：12413991
> 
> 赞同：0
> 
> 时间：2012-09-13T20:06:33.360
> 
> 标签：objective-c, nsjsonserialization

我来自 URL 的 json 响应是：

```
[
 {"status":0,
  "id":"26",
   "content":"See info field for info",
   "time":1347565292761,
    "info": {"id":"26",
    "name":"Ruti",
    "twitterPageFollowers":null,
     "facebookPageLikes":null,
     "activeEmailClients":1}
  }
 ] 
```

我需要从中提取以下字符串：

```
twitterPageFollowers
facebookPageLikes
activeEmailClients 
```

我该怎么做？

我尝试像这样解析

```
NSData *urlData=[NSURLConnection sendSynchronousRequest:serviceRequest returningResponse:nil error:nil ];
    NSString *returnString=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSData *jsonData = [returnString dataUsingEncoding:NSUTF8StringEncoding];
    NSArray *json = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil];
    NSDictionary *response = [json objectAtIndex:0];
    NSString *info = [response objectForKey:@"info"];
    NSData *businessInfoString = [info dataUsingEncoding:NSUTF8StringEncoding];
    NSDictionary *businessInfo =
    [NSJSONSerialization JSONObjectWithData: businessInfoString
                                    options: NSJSONReadingMutableContainers
                                      error: nil]; 
```

并且返回数据没问题，但我得到 [__NSCFDictionary dataUsingEncoding:unrecognized selector sent to instance for last NSDictionary creation from info field。有什么问题或检索上述字段的更短方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:16:42.733

当您使用 检索“信息”字段`[response objectForKey:@"info"];`时，您已经得到一个`NSDictionary`！（而**不是**）`NSString`。

这就是为什么当您尝试调用`dataUsingEncoding:`此对象（您认为是 an `NSString`but is as `NSDictionary`）时，您会得到异常。

无需检索`"info"`key 的值，然后将其`NSData`转换为 JSONObject 并将其转换回 JSONObject，因为它已经是 JSONObject，即`NSDictionary`在您的情况下。为什么还要费心尝试来回转换它，而**`[response objectForKey:@"info"];`已经`businessInfo`**在代码末尾返回**了您期望的字典？**

# java - java字符串数字比较器对DropDownlist进行排序

> ID：12413993
> 
> 赞同：0
> 
> 时间：2012-09-13T20:06:41.600
> 
> 标签：java, comparator

`String Numeric Comparator`对下拉列表进行排序：

列表有 Ex: `1 per 1 months`, `1 per 2 months`......`2 per 12 months`

试过了`StringComparator`，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，`String Numeric Comparator`_ `NumericComparator`_`Split Comparator`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:12:39.730

您必须编写自己的比较器。首先，您必须计算 x / y ，其中文本为*x 每 y 个月*。然后您只需将 x1/y1 与 x2/y2 进行比较。

```
Comparator<String> comp = new Comparator<String>() {
    public int compare(String o1, String o2) {
        Double d1 = calcValue(o1);
        Double d2 = calcValue(o2);
        return d1.compareTo(d2);
    }

    private Double calcValue(String s) {
         Double x, y;
         // extract x and y from String s
         ...
         return x / y;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:11:10.537

您的 Comparator 自定义实现将帮助您：

```
Comparator<String> comp = new Comparator<String>() {
  public int compare(String o1, String o2) {
    // TODO
  }
}; 
```

# asp.net - 使用 UpdatePanel 的 ViewState 无效

> ID：12413995
> 
> 赞同：1
> 
> 时间：2012-09-13T20:06:57.493
> 
> 标签：asp.net, visual-studio-2008, webforms, viewstate

*（我正在使用开发 Web 服务器在 Visual Studio 2008 (ASP:NET 3.5) 上运行）*

**我有一个 asp.net 页面，其中：**

UpdatePanel 中有一个 SliderExtender 控件。

服务器端我正在捕捉滑块的 Changed 事件。

用户可以更改滑块值，一切正常。

**问题**

用户可以使用箭头来更改滑块的值，但是当他将箭头向下放置一段时间时，`Invalid ViewState`会引发“”异常。

```
Invalid viewstate. 
Client IP: 127.0.0.1
Port: 
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; InfoPath.2; .NET CLR 1.1.4322; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; MS-RTC LM 8; .NET4.0C; .NET4.0E)
ViewState: /wEPDwXJja... 
```

我在 Chrome 和 IE8 上尝试过，结果相同。

我理解它的发生是因为服务器端`Changed`方法被一次又一次地调用，并且当服务器处理速度被传入调用击败的时候到了。

**问题**

我怎样才能避免这个问题发生？

**我尝试了什么？**

*   [关于这个问题](https://stackoverflow.com/questions/576990/should-i-ignore-the-occasional-invalid-viewstate-error)的最受欢迎的建议。
*   覆盖页面渲染以将 ViewState 置于顶部。
*   建立一个 ViewStateUserKey。
*   在窗口加载之前禁用表单。
*   设置机器密钥。

**编辑**

这是代码：

```
<asp:TextBox runat="server" ID="txtSlider" AutoPostBack="true" Text="100" OnTextChanged="txtSlider_TextChanged"></asp:TextBox>
<asp:SliderExtender ID="sldSlider" Decimals="0" TargetControlID="txtSlider" Length="50" 
            BoundControlID="lblProporcion" runat="server" Minimum="0" Maximum="100" >
        </asp:SliderExtender>

protected void txtSlider_TextChanged(object sender, EventArgs e)
{            
    //Server processing, UpdatePanel's update....
} 
```

当用户移动滑块更改其值时，txtSlider 的文本属性会更改此事件以引发`txtSlider_TextChanged`事件。我想我可以使用 HiddenField 来存储我上次回发的时间，并在客户端使用它来定义 txtSlider 是否回发（如果至少 500 毫秒已经过去，那么继续回发）。

我正在研究最后一种方法，如果我设法解决这个问题，我会告诉你的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T13:40:07.340

我不再有这个问题，但我也没有解决这个问题。我正在捕获 Invalid ViewState 异常，因此用户不会注意到任何问题并且一切正常。

我在 global.asax 上做：

```
protected void Application_Error(object sender, EventArgs e)
{
    Exception exc = HttpContext.Current.Server.GetLastError().InnerException;
    if (exc != null)
    {
        //register the exception on error log table
    }
} 
```

如果有人对这个问题发表了真正的答案，我会立即取消标记。

# asp.net - 使用 IIS7 在本地运行 .NET 和经典 ASP

> ID：12413998
> 
> 赞同：0
> 
> 时间：2012-09-13T20:06:58.400
> 
> 标签：asp.net, iis-7, asp-classic

我有一台 Windows 7 开发机器，我的旧应用程序同时使用 ASP.NET 和经典 ASP。

我可以配置什么 IIS7 以便我可以在本地运行此应用程序？

目前，每当我需要测试 ASP 代码更改时，我都必须推送到不同的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:44:06.950

我们在工作中这样做。我们发现您无法共享经典的 asp 和 .Net 应用程序池。因此，请确保您的经典站点和 .Net 站点使用不同的应用程序池。

将经典池配置为在 .Net Framework 下具有“无托管代码”，并将托管管道设置为“经典”。配置 .Net 应用程序池以使用您正在使用的任何框架，并将“集成”用于托管管道。对我们来说，这些设置效果很好。

如果您在一个文件夹下共享经典和 .Net。右键单击经典站点，选择“管理网站”，然后选择“高级设置...”，然后选择经典应用程序池。然后确保在左侧窗格中浏览到站点的 .Net 部分。转到包含 .Net 的文件夹，右键单击它，然后在下一个对话框中选择“转换为应用程序”，选择您为 .Net 设置的应用程序池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:36:42.557

您可以在同一站点和应用程序上运行经典 ASP 代码和 ASP.NET 代码。很可能您只是没有正确配置它。如果是这样，请参阅下面此链接中有关如何配置的详细文章。

[为经典 ASP 支持配置 IIS 7](http://blogs.msdn.com/b/jaskis/archive/2009/07/20/iis7-classic-asp-http-404-3-an-error-occurred-on-the-server-when-processing-the-url-please-contact-the-system-administrator.aspx)