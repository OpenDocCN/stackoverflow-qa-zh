# StackOverflow 问答 11473000-11473999

# c# - 如何从另一台 PC 访问我的 Web 客户端

> ID：11473003
> 
> 赞同：0
> 
> 时间：2012-07-13T14:57:09.923
> 
> 标签：c#, asp.net, iis-7

我开发了一个 Web 客户端和一个 Web 服务，可以在我的 localhost 中正常工作。

对我来说，下一步是在我网络中的其他 PC 上对其进行测试。

我将我的 IP 发送给我的朋友可以说：195.50.12.65。从另一台电脑他们无法访问我的客户端。

所以我试试这个：“http://195.50.12.65/MyWebServices2/WebApp.aspx”（没有双引号）什么都没有。

接下来我从防火墙打开一个端口 80，但仍然没有任何关于下一步做什么的想法？

注意：我的客户端和服务是 C# 程序，使用记事本、asp.net 和 IIS，没有使用 Visual Studio（不要问为什么，我只是没有使用它）

# asp.net-mvc-4 - 使用 Configuration.Services.GetContentNegotiator() 时无法解析符号服务

> ID：11473007
> 
> 赞同：0
> 
> 时间：2012-07-13T14:57:17.060
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我想通过使用以下代码行来检索 conneg。

```
Configuration.Services.GetContentNegotiator 
```

它给了我一个错误“无法解析符号服务”。我正在使用 ASP.NET MVC 4 构建 ASP.NET Web API。服务是 System.Web.Http.HttpConfiguration 的公共属性，但我无法获得该对象的引用。

# c++ - 基类复制构造函数的可见性问题

> ID：11473011
> 
> 赞同：6
> 
> 时间：2012-07-13T14:57:27.360
> 
> 标签：c++, gcc, visibility, copy-constructor

我有一个类（我们暂时称之为`base`），它有一个受保护的接口，包括受保护的构造函数等。一些函数按值`base`返回一个实例`base`：

```
class base {
protected:
    base() {}
    base (base const &other) {}  // line 6
    base foo () {
        base ret;
        return ret;
    }
}; 
```

这些函数被包装在派生类中以返回派生类型，如下所示：

```
class derived : public base {
private:
    derived(base const &b) : base(b) {}
public:
    derived() : base() {}
    derived foo() {
        derived d(base::foo());  // line 21
        return d;
    }
}; 
```

为了便于从`base`返回类型转换为`derived`返回类型，我提供了一个私有构造函数`derived`来处理这个问题。

使用 gcc 4.1.2 在 Centos 5.8 上编译它会产生以下错误：

```
test.cpp: In member function ‘derived derived::foo()’:
test.cpp:6: error: ‘base::base(const base&)’ is protected
test.cpp:21: error: within this context 
```

在 Linux Mint 12 上使用 gcc 4.6.1 和 clang 2.9，代码编译文件，即使使用`-Wall -Wextra`，除了对的复制构造函数的`unused parameter`警告。`base`

我认为这可能是 gcc 4.1.2 中的编译器错误，但我在网上找不到任何东西。有没有人见过这个？

我无法在没有巨大痛苦的情况下更新编译器。除了将基类的复制构造函数公开之外，还有简单的解决方法吗？

* * *

**编辑**我`base b;`在第 21 行之前添加`derived::foo()`。在这种情况下，gcc 4.6.1 和 gcc 4.1.2 抱怨默认 ctor`base`是受保护的，clang 2.9 编译时没有警告。这就是 David Rodríguez - dribeas 在他的评论中所说的 - 默认 ctor 不能在`base`.

* * *

**编辑 2**似乎适用于此的标准段落是 11.5 [class.protected]。gcc 4.1.2 拒绝我的代码不正确似乎是正确的，我想知道为什么 gcc 4.6.1 和 clang 允许它。有关初步解决方案，请参阅我自己的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:05:05.680

您可以尝试的一种解决方法是为派生创建一个私有构造函数，该构造函数通过调用基函数来构造它的基：

```
class derived : base {
    struct from_base_foo {};
    derived( from_base_foo ) : base( base::foo() ) {}
public;
    derived foo() {
       return derived( from_base_foo() );
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:28:47.170

我的初步解决方案是制作`base`ctor 的副本`public`。要禁止`derived`使用 的复制 ctor 复制实例`base`，继承需要`protected`代替`public`. 生成的类现在看起来像这样：

```
class base {
protected:
    base() {}
public:
    base (base const &other) {}
protected:
    base foo () {
        base ret;
        return ret;
    }
};

class derived : protected base {
private:
    derived(base const &b) : base(b) {}
public:
    derived() : base() {}
    derived foo() {
        derived d(base::foo());
        return d;
    }
}; 
```

# objective-c - 如何在 iOS 库中向 Google Analytics 添加帐单国家/地区

> ID：11473012
> 
> 赞同：2
> 
> 时间：2012-07-13T14:57:31.767
> 
> 标签：objective-c, ios, google-analytics

我正在使用 Google Analytics SDK 中的 GANTracker 类跟踪交易。我不知道如何让它设置计费国家（utmtco）。在 JS 中这似乎是一个参数，但在 iOS 库中没有这样的东西。

```
- (BOOL)addTransaction:(NSString *)orderID
        totalPrice:(double)totalPrice
         storeName:(NSString *)storeName
          totalTax:(double)totalTax
      shippingCost:(double)shippingCost
         withError:(NSError **)error; 
```

这是我得到的最接近的。我试图像这样设置一个自定义变量 utmtco：

```
[[GANTracker sharedTracker] setCustomVariableAtIndex:1 name:@"utmtco" value:@"Country" withError:&error]; 
```

然而，这似乎没有做任何事情，因为调用没有 utmtco。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:44:54.177

不确定您在上面做什么，但我们确实创建了一个类方法。如果我们需要它返回国家，我们只需将国家名称设置为 NSString 并调用 [self trackpageView: country]; 希望这有帮助。

```
+(void) trackPageView: (NSString *)pageTracked {

        //Log(@"page view:%@", pageTracked);

        NSError *error;
        if (![[GANTracker sharedTracker] trackPageview: pageTracked
                                             withError:&error]) {
            // Handle error here
            Log(@"Google anaytics track page failed");
        }

    }
} 
```

# git - 钩子内的 Git 命令失败

> ID：11473016
> 
> 赞同：0
> 
> 时间：2012-07-13T14:57:47.887
> 
> 标签：git

当从 git bash 运行时，以下命令会成功运行并得到我想要的结果。

```
git rev-list --no-merges --pretty=oneline $new_ref --not $old_ref refs/heads/built 
```

当我在 git update 挂钩中运行相同的命令时，它会因此错误而失败。

```
fatal: ambiguous argument 'refs/heads/built': both revision and filename
Use '--' to separate filenames from revisions 
```

如果我添加`--`，我不会得到与从钩子外的 git bash 运行它时相同的结果。

似乎正斜杠有问题。我试过逃避它们等等......

任何想法，谢谢！

# http - 从 Web 浏览器多次发送 http 请求

> ID：11473021
> 
> 赞同：0
> 
> 时间：2012-07-13T14:58:00.900
> 
> 标签：http, web-applications

出于测试目的，我想从 Web 浏览器多次发送相同的 http 请求，以便我可以使用浏览器测试响应，而不是使用 CURL 命令。

有没有办法从网络浏览器做到这一点？

例如：

[http://abcxyz.com/style?font=sans](http://abcxyz.com/style?font=sans)

在 Web 浏览器中多次发送此请求

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:00:36.797

这个：

```
<script>
var url = "http://abcxyz.com/style?font=sans";

for (var i=0; i < 10; i++) {
  var xhr = XMLHttpRequest();
  xhr.open(url, true);
  xhr.send();
}
</script> 
```

向上述 URL 发送 10 个请求。

# javascript - 数组更新后的淘汰赛绑定

> ID：11473022
> 
> 赞同：1
> 
> 时间：2012-07-13T14:58:07.133
> 
> 标签：javascript, jquery, html, knockout.js

我有一个要从中删除项目的数组，但我正在计算要进行 UI 格式化的项目数。我需要能够进行绑定更新。

```
 ko.applyBindings(viewModel);
    getFoos();

var viewModel = {
    foos: ko.observableArray([]),

    reloadFoos: function () {
        getFoos();
    },

    removeFoo: function () {
        remove(this);
    }
};

var foo = function () {
    this.Id = ko.observable();
    this.Name = ko.observable();
    this.Count = ko.observable();
};

function remove(foo) {
    viewModel.foos.splice(viewModel.foos.indexOf(foo), 1);

    viewModel.foos.each(function(index) {
        viewModel.foos[index].Count = index%10 == 0;
    });
}

function getFoos() {
    viewModel.foos([]);
    $.get("/myroute/", "", function (data) {

        for (var i = 0; i < data.length; i++) {
            var f = new foo();
            f.Id = data[i];
            f.Name = data[i];
            f.Count = i%10 == 0;
            viewModel.foos.push(f);
        }

    });
}

            <div data-bind="foreach: foos">
                <div style="float: left">
                        <a href="javascript:void(0);" data-bind="click : $parent.removeFoo, attr: { id: Id }">
                            <label data-bind="value: Name"></label>
                        </a>
                </div>
                <!-- ko if: Count -->
                <div style="clear: left"></div>
                <!-- /ko -->
            </div> 
```

当 click 事件触发时，该项目将从数组中删除，但 if 绑定没有得到更新并且 ui 格式已关闭。我试图避免重新加载数据，因为 ui 块在删除和重新加载时会反弹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:06:58.593

您的 UI 没有更新，因为当您分配给 时`Count`，您没有分配为可观察对象。您正在用一个直接的布尔值替换 observable。因此，您的作业调用如下：

```
viewModel.foos[index].Count = index%10 == 0; 
```

将导致`viewModel.foos[index].Count`等于`true`或`false`，并且该值不会存储在可观察对象中。

那条线应该是这样的：

```
viewModel.foos[index].Count(index%10 == 0); 
```

这将正确设置可观察对象。请注意，您必须将所有分配更改为以这种方式设置的可观察对象。请参阅本页的“读写 Observables”部分：[Knockout Observables](http://knockoutjs.com/documentation/observables.html)。

# javascript - JavaScript 库在按住 alt/ctrl 时显示带有键盘快捷键的工具提示

> ID：11473023
> 
> 赞同：3
> 
> 时间：2012-07-10T15:34:43.990
> 
> 标签：javascript, accessibility

是否有一个 JavaScript 库，当用户按住 ctrl/alt 时，将在页面上具有`accesskey`使用该键的关联键盘快捷键（通过属性）的元素上显示工具提示？控制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:25:39.713

这就是我要找的东西：[KeyCandy](http://aaronmccall.github.com/KeyCandy/)。尽管按住 Ctrl 时我必须修复闪烁。

我知道我以前见过这样的事情。不确定是不是同一个。有人有更好的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:19:39.950

我认为[KeyTips](https://github.com/DamianEdwards/KeyTips-jQuery-Plugin)是我以前见过的。它当然看起来比 KeyCandy 更好，尽管我喜欢 KeyCandy 如何使 Ctrl 成为访问键的修饰符。

这是它的样子：

[![在此处输入图像描述](../Images/a1e3320dd01a1704178aaaeec4580444.png)](https://i.stack.imgur.com/lT6cy.png)

浏览器保留的快捷方式存在[一些问题，](http://code.google.com/p/chromium/issues/detail?id=33056)但由于这是一个内部 Intranet 站点，如果我将其设为chrome的[托管应用程序，](https://developers.google.com/chrome/apps/docs/developers_guide)[它将能够处理任何快捷方式](http://code.google.com/p/chromium/issues/detail?id=84332)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-19T03:48:41.010

您不需要任何用于键盘快捷键的库。只需使用 keydown 对象中传递的 Object 中的键。例如：

```
var element = document.querySelector("#element");
element.addEventListener("keydown", function (event) {
    //Ctrl+Alt+Del
    if (event.key === "Delete" && event.ctrlKey === true && event.altKey === true) {
        //Disables Ctrl+Alt+Del
        event.preventDefault();
        alert("You pressed Ctrl+Alt+Del, too bad!");
    }
    //Win+R (On Windows, it opens up the Run Prompt)
    else if (event.key === "r" && event.metaKey === true) {
        //Disable it once again
        event.preventDefault();
        alert("You can never 'run' from me!!");
    }
    //Create A Save Prompt When Users Ctrl+S
    else if (event.key === "s" && event.ctrlKey === true) {
        event.preventDefault();
        //Give The User Options
        alert("First choose an option to save, then continue.");
    }
}); 
```

然后，从那里，只需将`title`属性添加到元素，以创建浏览器生成的工具提示，并`focus()`在按下快捷方式时简单地在元素上。

JavaScript：

```
var element = document.querySelector("#element");

if (event.key === "h" && event.ctrlKey === true) {
    event.preventDefault();
    element.focus();
} 
```

HTML：

```
<p title="help section" id="element">Help Help Help<p> 
```

希望有帮助！

# android - 如何在 播放器比播放音频文件？

> ID：11473030
> 
> 赞同：0
> 
> 时间：2012-07-13T14:58:17.177
> 
> 标签：android, html, html5-video, html5-audio

由于 Android 2.2 的怪癖，我试图在一个`<video>`元素中播放音频文件。（Android 2.2 支持`<audio>`，但它的播放器[不支持音频编解码器](http://www.brianhadaway.com/html5-audio-support-on-android-devices/)；而它的视频播放器则没有这样的困难。）

它们播放得很好，但是当您播放视频时，它会接管整个设备，并带有（在音频文件的情况下）一个空白屏幕。在播放音频文件时，如何将图像放在屏幕上代替（不存在的）视频？（我试过设置标签的`poster`属性`<video>`。它不起作用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:20:03.997

使用默认媒体播放器是不可能的。如果你需要这样的功能，我想你会自己做的……</p>

# windows-phone-7 - 可移植类库 HttpUtility.UrlEncode

> ID：11473031
> 
> 赞同：28
> 
> 时间：2012-07-13T14:58:19.910
> 
> 标签：windows-phone-7, microsoft-metro, urlencode, portable-class-library

我知道可移植类库很好地支持发出 Web 请求。PCL 中是否有 HttpUtility.UrlEncode 的等价物？我需要它用于 Windows Phone 和 Metro 应用程序。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-13T17:02:22.517

使用`Uri.EscapeUriString`和`Uri.EscapeDataString`

两者之间的唯一区别是`EscapeDataString`它还对包含这些字符的 RFC 2396 保留字符进行编码`;/?:@&=+$`，

重要的是要注意，这些方法都没有对 RFC 2396 未保留字符进行编码，`-_.!~*'()` 因此如果您需要这些编码，则必须手动对它们进行编码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-10T21:30:58.900

## 网络实用程序

在有幸以 .NET 4.5（例如 Profile7）为目标的可移植类库中，许多 HttpUtility 方法在[`System.Net.WebUtility`](https://msdn.microsoft.com/en-us/library/system.net.webutility%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396).

```
using System.Net;

WebUtility.UrlEncode("some?string#"); 
```

## 潜在警告

虽然一些同级方法看起来与它们的 HttpUtility 对应方法相同，但这个方法在生成的编码之间略有不同。`WebUtility.UrlEncode`生成大写编码，同时`HttpUtility.UrlEncode`生成小写编码。

```
WebUtility.UrlEncode("?") // -> "%3F"
HttpUtility.UrlEncode("?") // -> "%3f" 
```

## 使其向后兼容

如果您依赖您的 PCL 代码生成与之前的 HttpUtility 代码完全相同的内容，您可以围绕此方法创建自己的辅助方法并对其进行正则表达式。

```
using System.Text.RegularExpressions;

public static string UrlEncodeOldSchool(string value) {
    var encodedValue = WebUtility.UrlEncode(value);
    return Regex.Replace(encodedValue, "(%[0-9A-F]{2})",
                         encodedChar => encodedChar.Value.ToLowerInvariant());
} 
```

（尽管这是一个简单的，但始终需要您自担正则表达式的风险。）

# html - 带有可见标题的固定表

> ID：11473033
> 
> 赞同：0
> 
> 时间：2012-07-13T14:58:25.510
> 
> 标签：html, css

我有两个表，其结构如下。第一个表用于表头，第二个表用于数据。我得到垂直滚动，这很好。当我滚动时，我需要标题与数据一起可见（标题：固定）。这在 Firefox 3.6 版本中运行良好，但在 Firefox 11、12 和 13 中它隐藏了标题。下面是代码。请告诉我：

```
<table cellspacing="1" cellpadding="5" width="90%" bgcolor="#538ED5" style="height: 300px; overflow-y: fixed">
<tr>
    <th colspan="2" align="center" bgcolor="#FFCC99" style="font-size:'.$textsize.';"><b>Dates</b></th>
    <th colspan="3" align="center" bgcolor="#CCFF99" style="font-size:'.$textsize.';"><b>EACM</b></th>
    <th colspan="3" align="center" bgcolor="#CCFF99" style="font-size:'.$textsize.';"><b>LOIS</b></th>
</tr>
<tr>
    <td>data1</td>
    <td>data2</td>
    <td>data3</td>
</tr> 
```

# c# - 注册从 ajaxified radgrid 操作 radwindow 的 Javascript 函数

> ID：11473034
> 
> 赞同：0
> 
> 时间：2012-07-13T14:58:25.850
> 
> 标签：c#, javascript, asp.net-ajax, radwindow

我正在尝试使用一些注册脚本打开一个 radwindow 客户端。

问题1：如果在启动时执行radwindow，是否有原因找不到，如果是，为什么以及如何修复它？

问题 2：每当我 ajaxify radgrid 事件不再触发。这是有道理的，因为没有回发发生，所以页面永远不会启动。如何让注册的脚本在 ajax 环境中执行？

---- 后面的相关代码----

```
 protected void RadgridProjects_ItemCommand(object source, Telerik.Web.UI.GridCommandEventArgs e)
    {
        if (e.CommandName == "Member")
        {
            Session["ProjectId"] = (e.Item as GridDataItem).GetDataKeyValue("ProjectId").ToString();
            radGridProjectMembers.Rebind();   //Not the same grid!

            ClientScriptManager cs = Page.ClientScript;

            string js = "<script type='text/javascript'>ShowWindow()</script>";
            cs.RegisterStartupScript(this.GetType(), "showwindow", js);

        }
     } 
```

---- Javascript函数----

```
 function ShowWindow()
    {
            alert("code fired");
            var radWin = $find("<%= RadWindow1.ClientID %>");
            radWin.show();

            radWin.moveTo(650, 450);
            radWin.set_width(500);
            radWin.set_height(400);
    } 
```

窗口永远不会打开，但我的测试警报确实会触发。应该注意的是，当我为脚本使用客户端事件时，窗口确实打开了。

# android - 为什么我的 720 像素图像在我的 720 像素银河 S3 中出现失真

> ID：11473037
> 
> 赞同：0
> 
> 时间：2012-07-13T14:58:33.527
> 
> 标签：android, android-image

我的问题就在标题中。我尝试将图像添加到我的布局中，我尝试使用带有 wrap_content 宽度和高度的 FrameLayout 背景，还尝试使用带有所有可能 fitScale 属性的 imageView。

我只是不明白为什么我的 720 像素宽度的图像在我手机屏幕的宽度上是一半，这是一个 720 像素宽度的三星 Galaxy S3....

我真正的问题：

确保我在应用中的照片不会失真的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:38:22.420

首先，您需要考虑屏幕密度和倾角值，而不是像素。这意味着您正在处理“虚拟屏幕”，其中 1 个下降（密度独立像素）代表不同数量的实际屏幕像素，具体取决于设备。

对于可绘制对象，您可以使用以下类别在任何屏幕上获得清晰的结果：

*   ldpi（比例因子 0.75）
*   **mdpi（默认/基线：比例因子 1.0）**
*   hdpi (1.5)
*   xhdpi (2.0)

根据这些比例因子创建不同大小的位图版本，以便在任何屏幕上获得清晰的结果。您应该从最高分辨率的 xhdpi 开始，以避免因放大而造成质量损失。

将这些不同的版本放入各自的可绘制文件夹（res/drawable-ldpi、res/drawable-mdpi...）。同一个位图的这些不同版本当然必须具有相同的文件名，否则将不起作用。

其次，您不应该对设备屏幕的高度和宽度做出强烈的假设。您需要对视图和图形进行布局，以便它们在不知道确切屏幕分辨率的情况下动态利用整个屏幕。但是，您可以根据[配置限定符对这些屏幕分辨率做出较弱的假设](http://developer.android.com/guide/practices/screens_support.html#support)

*   小的
*   普通的
*   大的
*   超大

尽量避免基于任何假设的视图的固定大小。始终避免在布局 XML 文件中使用“px”值。改用“蘸”。

阅读[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)的文档以获取更多信息。

您想要实现的声音就像您希望图像占据屏幕的整个宽度一样。

如果将图像设置为任何视图的背景（例如 FrameLayout），则显示的图像剪辑取决于该视图的大小。

如果该视图的 layout_width / layout_height 设置为 wrap_content，那么它的大小取决于其子视图的尺寸和排列。在 FrameLayout 的情况下，它取决于 FrameLayout 的单个子项的大小。

如果您使用的是 ImageView，则默认情况下图像将被缩放以适应 ImageView 的大小。ImageView 的大小取决于它的 layout_width / layout_height 值。如果您将这些值设置为 match_parent 并且 ImageView 有足够的“增长”空间，您应该能够看到您的图像在整个屏幕上伸展。

“成长空间”取决于布局中 ImageView 的上下文。它有占用空间的邻居吗？父视图是否太小（例如因为 wrap_content）？寻找这些可能的问题。

# c# - 你如何调试 MVC 4 API 路由？

> ID：11473038
> 
> 赞同：76
> 
> 时间：2012-07-13T14:58:42.703
> 
> 标签：c#, .net, asp.net-mvc, rest, asp.net-mvc-4

我有一个 WP7 游戏，它使用 RESTsharp 与我的 MVC4 RESTful 服务器进行通信，但我经常在发出有效请求时遇到问题，因此我想在它失败的地方进行调试。

这是一个例子，我的构造函数`GameController`被命中，但`Post`方法没有被命中，我不明白为什么。

客户端代码：

```
public void JoinRandomGame()
{
  client = new RestClient
  {
      CookieContainer = new CookieContainer(),
      BaseUrl = "http://localhost:21688/api/",
  };

  client.Authenticator = GetAuth();

  RestRequest request = new RestRequest(Method.POST)
  {
      RequestFormat = DataFormat.Json,
      Resource = "game/"

  };

  client.PostAsync(request, (response, ds) =>
  {});
} 
```

服务器代码：

```
 public void Post(int id)
    {
        if (ControllerContext.Request.Headers.Authorization == null)
        {
            //No auth
        }
        if (!loginManager.VerifyLogin(ControllerContext.Request.Headers.Authorization.Parameter))
        {
            //Failed login
        }

        string username;
        string password;
        LoginManager.DecodeBase64(ControllerContext.Request.Headers.Authorization.Parameter, out username, out password);
        gameManager.JoinRandomGame(username);
    } 
```

我的路线是这样的

```
 routes.MapHttpRoute(
            name: "gameAPI",
            routeTemplate: "api/game/{gameId}",
            defaults: new
            {
                controller = "game",
                gameId = RouteParameter.Optional
            }             
        ); 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2014-08-23T21:25:23.427

另一种方法是添加一个事件处理程序`Global.asax.cs`来接收传入的请求，然后在 VS 调试器中查看路由值。重写`Init`方法如下：

```
public override void Init()
{
    base.Init();
    this.AcquireRequestState += showRouteValues;
}

protected void showRouteValues(object sender, EventArgs e)
{
    var context = HttpContext.Current;
    if (context == null)
        return;
    var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(context)); 
} 
```

然后在里面设置断点`showRouteValues`，查看里面的内容`routeData`。

请记住，在 Web API 项目中，Http 路由位于 中`WebApiConfig.cs`，而不是`RouteConfig.cs`.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-13T16:44:54.077

RouteDebugger 可以很好地确定哪些路线将/不会被击中。

[http://nuget.org/packages/routedebugger](http://nuget.org/packages/routedebugger)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T08:58:41.027

测试路线有更多的可能性。您可以尝试手动测试或自动化作为单元测试的一部分。手动测试：

*   [路由调试器](http://nuget.org/packages/routedebugger)
*   [MVC API 跟踪](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)

自动化测试：

*   [MvcRouteTester](https://github.com/AnthonySteele/MvcRouteTester)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:26:07.210

您可以尝试 ASP.NET Web API 路由调试器。它是为 Web Api 编写的。[https://trocolate.wordpress.com/2013/02/06/introducing-asp-net-web-api-route-debugger/](https://trocolate.wordpress.com/2013/02/06/introducing-asp-net-web-api-route-debugger/) [http://nuget.org/packages/WebApiRouteDebugger/](http://nuget.org/packages/WebApiRouteDebugger/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T16:41:41.170

GameController 是从 ApiController 派生的吗？你在使用 WebApi 吗？

如果不是，那么我认为“/api/”是为新的 WebApi 功能保留的。尝试将您的路由和控制器名称更改为“gameapi”

但是，如果您使用的是 WebApi。

然后从你的 BaseUrl 中删除 api

```
 client = new RestClient
  {
      CookieContainer = new CookieContainer(),
      BaseUrl = "http://localhost:21688/",
  }; 
```

# google-app-engine - Google App Engine 动态后端不会停止

> ID：11473043
> 
> 赞同：0
> 
> 时间：2012-07-13T14:59:13.480
> 
> 标签：google-app-engine

（如果这不是 SO 的问题，我很乐意搬到别处）

我有一个 GAE 后端，我想定期从 cron 开始。在 SO 的其他问题的帮助下，我像这样设置了 backends.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<backends>
 <backend name="myBackend">
   <class>B1</class>
   <instances>1</instances>
<options>
     <dynamic>true</dynamic>
   </options>
 </backend>
</backends> 
```

和我这样的 cron.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
  <cron>
    <url>/doHardStuff</url>
    <description>doing long running stuff</description>
    <schedule>every 3 hours</schedule>
    <target>myBackend</target>
  </cron>
</cronentries> 
```

我使用`mvn-gae`目标上传它（我正在用 maven 在 java 中编写所有内容）`gae:deploy gae:backends-list gae:backends-update`

一切都很好，但是长时间运行的东西已经**完成**。即使完成了一切，动态后端仍然运行并吃掉我每天的后端配额。`_ah/stop`servlet 完成工作后，我可以在日志中看到请求；但是后端仍然在那之后运行。

如果我在 Main -> Backends -> Start/Stop 的引擎 Web 控制台中手动**停止**它，它会停止占用我的配额，但是，它**不会**在 cron 中的给定时间运行，并且 cron 作业将失败。

我应该怎么办？我希望后端*在给定时间启动，*并*在请求结束且机器空闲时停止*。我不希望它在不同的时间运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:11:18.553

它按预期工作。动态后端始终在仪表板的后端选项卡中“启动”，这意味着它们可以在需要时获取请求并启动实例。这不会消耗任何配额。

当后端收到请求时，它会使用配额启动实例`/_ah/start/`并消耗配额。当它在几分钟内没有任何服务请求时，它会通过请求停止实例`/_ah/stop/`。

要确定后端实例是否仍在运行，请切换到实例选项卡并选择后端“版本”。

请注意，动态后端有 15 分钟的配额惩罚，这可能是配额使用率高于预期的原因。

> 对于动态后端，计费在最后一个请求完成处理后十五分钟结束。

[http://developers.google.com/appengine/docs/python/backends/overview#Billing_Quotas_and_Limits](http://developers.google.com/appengine/docs/python/backends/overview#Billing_Quotas_and_Limits)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:20:23.790

根据网上的一些页面，似乎需要 15 分钟才能停止。

这似乎是可能的，我会试试看。

# lua - Lua 相当于 Python 的 Multiprocessing？

> ID：11473047
> 
> 赞同：4
> 
> 时间：2012-07-13T14:59:21.757
> 
> 标签：lua

在一些 Redis 加载测试中，LuaJIT 2.0 (beta) 的表现相当不错，大约是类似单线程 Python 脚本运行时间的 60%。

当使用 Python 的多处理模块对[大型文本文件进行分块](http://www.ngcrawford.com/2012/03/29/python-multiprocessing-large-files/)时，可以显着提高性能，从而将工作拆分到内核之间。

我假设在 Lua 中使用相同的方法会表现得更好，但作为 Lua 初学者，我还没有找到正确的方法。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:18:46.520

但是，正如 Mike Pall 所解释的，有 LuaThreads ，[它](http://lua-users.org/lists/lua-l/2006-04/msg00222.html)并不是[多](http://medek.wordpress.com/2009/01/22/lua-threads-and-stuff/)线程和互连任务的最佳解决方案（因为所有线程都会在 lua 状态上敲击单个锁）。

但是[LuaLanes](http://kotisivu.dnainternet.net/askok/bin/lanes/)可能会提供您需要的东西，但是，鉴于您正在使用/喜欢 LuaJIT 而不仅仅是普通 Lua，您可能可以利用 FFI 直接从 LuaJIT 生成系统线程并传递给它们一个 Lua 回调（我不确定然而，为了安全起见，这是 LuaJIT 邮件列表的内容）。

# android - 以非编程方式更改我的 xml 代码中的字符串

> ID：11473052
> 
> 赞同：0
> 
> 时间：2012-07-13T14:59:31.587
> 
> 标签：android, xml, string

您好我想知道是否有一种方法可以更改我的 xml 代码中的字符串值而不接触 .java 文件

例如，如果我在 strings.xml 中有

```
<string name="title"> This is my title</string> 
```

如果我可以在 main.xml 文件中更改具有值的字符串：这是**我的**标题

意思是让我的字符串的第三个单词加粗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:02:46.783

在你的`strings.xml`文件中

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="title"> This is <b>my</b> title</string> 
</resources> 
```

# sql - Grails 无法保存对象 ID

> ID：11473053
> 
> 赞同：0
> 
> 时间：2012-07-13T14:59:36.877
> 
> 标签：sql, oracle, grails, groovy

id 存在于参数中，但不保存到数据库中。例如

```
[book.id:1, comments: good] 
```

评论将保存到 db 但 book.id 不会。

我需要弄清楚如何将 params.book.id 保存到从 hasmany/belongsTo 关系创建的 db 列 BOOK_ID 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:15:44.953

好吧，看来我在我的域中拼错了一个关键参数。所以域期待 x 并且得到 y。因此 id 始终为空。我花了一段时间才发现它，我很困惑，因为我之前在另一个项目中成功实现了 ids。Grails 有一些 jira 问题也让人考虑其他可能性，但这次是我的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:25:34.920

你已经覆盖了`toString`，因此你的书总是由`name`而不是呈现`id`。如果您删除您的`toString()`方法，您将看到预期的结果。

如果您希望选择框与名称一起使用，只需添加`optionValue="name"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:56:39.170

默认情况下，每个元素的 value 属性将是对每个元素的 toString() 调用的结果。将其设置为 optionKey 允许该值成为列表中每个元素的 bean 属性。

请将选择更改为

```
<g:form action="review">
  <g:select name="book.id"
    from="${item.Book.list()}"
    value="${book?.id}"
    />

 <g:textField name="bookreview" value="${params?.bookreview}" /><br> 
```

请参考以下链接

[带有 optionkey 的 Grail 示例](http://grails.org/doc/latest/ref/Tags/select.html)

# java - 更改 Unitils DbUnitModule 的 TestListener

> ID：11473055
> 
> 赞同：1
> 
> 时间：2012-07-13T14:59:42.383
> 
> 标签：java, db2, dbunit, unitils

我正在尝试使用 Unitils 来帮助我进行数据库测试。我想使用 Unitils/DBMaintain 功能来禁用约束。然而，这有一些问题。我不希望使用 DBMaintain 为我创建数据库，但我希望使用它的约束禁用功能。我能够通过使用下面列出的自定义模块来实现这一点：

```
public class DisableConstraintModule implements Module {

     private boolean disableConstraints = false;

     public void afterInit() {
         if (disableConstraints) {
             DatabaseUnitils.disableConstraints();
         }
     }

     public void init(Properties configuration) {
         disableConstraints = PropertyUtils.getBoolean("Database.disableConstraints", false, configuration);
     }      
} 
```

这部分解决了我想要的，但是我希望能够只禁用我将在测试中使用的表的约束。我的测试将针对具有多个模式的数据库运行，每个模式都有数百个不同的表。DatabaseUnitils.disableConstraints() 禁用每个模式中每个表的约束，这太耗时且没有必要。

在搜索 dbmaintain 代码后，我发现 Db2Database 类确实包含一个用于禁用特定模式和表名基础上的约束的函数，但是此方法受到保护。我可以通过扩展 Db2Database 类或使用反射来访问它。

接下来，我需要能够确定我感兴趣的模式和表。我可以通过观察 @DataSet 注释来根据 xml 中的内容确定哪些模式和表是重要的。为此，我需要覆盖 TestListener，以便在它尝试插入数据集之前指示它使用 xml 禁用约束。这是我的尝试：

```
public class DisableConstraintModule extends DbUnitModule {

    private boolean disableConstraints = false;

    private TableBasedConstraintsDisabler disabler;

    public void afterInit() {
    }

    public void init(Properties configuration) {
        disableConstraints = PropertyUtils.getBoolean("Database.disableConstraints", false, configuration);

        PropertyUtils.getInstance("org.unitils.dbmaintainer.structure.ConstraintsDisabler.implClassName", configuration);
    }

    public void disableConstraintsForDataSet(MultiSchemaDataSet dataSet) {
        disabler.disableConstraints(dataSet);
    }

    protected class DbUnitCustomListener extends DbUnitModule.DbUnitListener {

        @Override
        public void beforeTestSetUp(Object testObject, Method testMethod) {
            disableConstraintsForDataSet(getDataSet(testMethod, testObject));
            insertDataSet(testMethod, testObject);
        }
    }

 } 
```

这是我想做的，但是我无法获得@DataSet 注释来触发我的 DbUnitCustomListener，而是调用默认的 DBUnitModule DbUnitListener。无论如何，我是否可以覆盖在使用 @DataSet 注释时调用哪个侦听器，或者是否有更好的方法一起禁用 DB2 数据库的特定模式和表级别的约束？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:20:09.050

您必须告诉 Unitils 使用您的 DbUnitModule 子类。您可以使用 unitils.properties 文件中的 unitils.module.dbunit.className 属性来执行此操作。听起来你已经弄清楚了这部分。

第二部分是重写 DbUnitModule 的 getTestListener() 以返回您的自定义侦听器。

有关示例，请参见这篇[文章。](http://www.adeptechllc.com/2009/07/02/unit-testing-using-in-memory-databases/)

# facebook - Facebook 请求访问令牌并获取电子邮件

> ID：11473056
> 
> 赞同：4
> 
> 时间：2012-07-13T14:59:43.310
> 
> 标签：facebook, facebook-graph-api

我的网站有一个 Facebook 登录脚本，目前运行良好。我想添加向用户请求电子邮件的功能，以及当前的基本信息。我知道我需要请求访问令牌，但我不知道如何。这是我当前的代码：

```
$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            'cookie' => true
        ));
$session = $facebook->getSession();

if (!empty($session)) {
    # Active session, let's try getting the user id (getUser()) and user info (api->('/me'))
    try {
        $uid = $facebook->getUser();

        $user = $facebook->api('/me/'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:35:40.003

```
You have to provide an extended permission for email at the time of login..
 $access_token = $this->facebook->getAccessToken();
        //check permissions list
        $permissions_list = $this->facebook->api('/me/permissions', 'GET', array('access_token' => $access_token));
        $permissions_needed = array('email');
        foreach ($permissions_needed as $perm) {
            if (!isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1) {
                $login = $facebook->getLoginUrl(array('scope' => 'email,user_birthday',
                'redirect_uri' => your site redirectUri,
                'display' => 'popup'
            ));
                header("location:$login");
            }
        }
        $user = $facebook->getUser();
        if ($user) {
            try {
                $userInfo = $facebook->api("/$user");
            } catch (FacebookApiException $e) {
                echo $e->getMessage();
            }
        }
        print_r($userInfo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:19:38.440

查看[服务器端身份验证过程](https://developers.facebook.com/docs/authentication/server-side/)- 这是您通过所需权限的地方（称为“范围”）。如果用户尚未登录，他们将看到一个登录面板，然后是一个单独的权限面板，用于您请求的任何高于基本权限但尚未授予的权限。然后，您将收到一个身份验证令牌或可以交换令牌的代码，然后您使用它来进一步查询用户并在响应中获取他们的电子邮件详细信息。

祝你好运！

# jquery - 如何在移动窗口滚动条时更改背景图像

> ID：11473057
> 
> 赞同：0
> 
> 时间：2012-07-13T14:59:48.887
> 
> 标签：jquery, html, css

我有两个容器 div，如下所示（背景和内容区域）。当您将鼠标悬停在内容区域上并滚动时，背景具有固定的位置并在悬停的不同时代发生变化。

然而，我的问题是，我是否希望背景随着窗口滚动条而改变（当您将鼠标悬停在内容区域上时它会改变）但不太确定如何去做？

```
<div class="background">            
    <div class="era t_1500 bg active"></div>            
    <div class="era t_1600 bg"></div>       
    <div class="era t_1700 bg"></div>
    <div class="era t_1800 bg"></div>
</div>

<div class="content-area">          
    <div id="t_1500">
        //some content
    </div>          
    <div id="t_1600">
        //some content
    </div>      
    <div id="t_1700">
       //some content
    </div>
    <div id="t_1800">
        //some content
    </div>
</div>

$('#t_1500, #t_1600, #t_1700, #t_1800').hover(   
    function(){ 
        var thatId = $(this).attr('id');
        var thisBg = '.' + thatId;
        if(!$(this).hasClass('active') {
            $('.background .era').hide();
            $(thisBg).show();               
        }
    }   
); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-13T15:06:31.403

我建议您使用查询视差，它易于使用并且可以满足您的需求

[http://stephband.info/jparallax/](http://stephband.info/jparallax/)

# android - Android数据库连接问题

> ID：11473060
> 
> 赞同：1
> 
> 时间：2012-07-13T14:59:57.677
> 
> 标签：android

你们好吗朋友.. 我太紧张了，因为我正在尝试将我的简单 android 应用程序与数据库连接起来。但它根本不起作用。我从这个网站上找到了很多有用的材料。希望你也能帮助我。

```
 here are the codes for each file. I can also see my db file in data/data directiry. 

    my SQLquery file ....

    package com.example.hotornot;

    //import android.app.Dialog;
    import android.content.ContentValues;
    import android.content.Context;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    //import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;
    //import android.widget.TextView;

    public class SQLquery {
        public static final String KEY_ROWID = "_id";
        public static final String KEY_NAME = "persons_name";
        public static final String KEY_HOTNESS = "persons_hotness";

        public static final String DATABASE_NAME = "HotOrNotdb";
        public static final String DATABASE_TABLE = "peopleTle";
        private static final int DATABASE_VERSION = 3;

        private DbHelper ourHelper;
        private final Context ourContext;
        private SQLiteDatabase ourDatabase;

         private static class DbHelper extends SQLiteOpenHelper
         {

            public DbHelper(Context context) {
                super(context, DATABASE_NAME,null, DATABASE_VERSION);
                // TODO Auto-generated constructor stub
            }
            private static final String DATABASE_CREATE = "CREATE TABLE proper ("+
                    "_id INTEGER PRIMARY KEY AUTOINCREMENT," +
                    "name TEXT NOT NULL,"+
                    "hotness TEXT NOT NULL"+
                    "); ";

            @Override
            public void onCreate(SQLiteDatabase db) {
                // TODO Auto-generated method stub
    //          db.execSQL("CREATE TABLE " + DATABASE_TABLE + "(" + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME + " TEXT NOT NULL, " + KEY_HOTNESS + " TEXT NOT NULL); ");
                db.execSQL(DATABASE_CREATE);

            }

            private static final int old = 1;

            private static final int nwver = 3;

            public void onUpgrade(SQLiteDatabase db, int old, int nwvwer) {
                // TODO Auto-generated method stub
                db.execSQL(" DROP TABLE IF EXISTS proper");
                //onCreate(db);
            }

         }
         public SQLquery (Context c)
         {

             ourContext = c;

         }
         public SQLquery open() throws SQLException
         {

             ourHelper = new DbHelper(ourContext);
             ourDatabase = ourHelper.getWritableDatabase();
             return this;
         }
         public void close()
         {

             ourHelper.close();

         }
        public long  createEntry(String nam, String hotnes) {

            ContentValues cv = new ContentValues();`enter code here`
            cv.put("name",nam);
            cv.put("hotness", hotnes);
            return ourDatabase.insert("proper", null, cv);

        }
    }

    ==========================================================================
    My "hotornot" file...
    package com.example.hotornot;

    import android.app.Activity;
    import android.app.Dialog;
    import android.database.sqlite.SQLiteException;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class hotorNot extends Activity implements OnClickListener
    {
       Button sqlUpdate, sqlView;
       EditText sqlName, sqlHotness;
       Boolean didItWork;

        public void onCreate(Bundle savedInstanceState) {
          try{ 
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_hotor_not);
            sqlUpdate = (Button) findViewById(R.id.button1);
            sqlView = (Button) findViewById(R.id.button2);

            sqlName = (EditText) findViewById(R.id.editText1);
            sqlHotness = (EditText) findViewById(R.id.editText2);

            sqlView.setOnClickListener(this);
            sqlUpdate.setOnClickListener(this);
          }catch(Exception exp)
          {

                didItWork = false;
                Dialog d = new Dialog(this);
                d.setTitle("sdfasf");
                TextView tv = new TextView(this);
                tv.setText("sdfsdf"+exp.toString());
                d.setContentView(tv);
                d.show();

          }
          }

        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_hotor_not, menu);
            return true;
        }
        @Override
        public void onClick(View v) {
            switch(v.getId())
            {
            case R.id.button1:
                try{
                String nam = sqlName.getText().toString();
                String Hotnes = sqlHotness.getText().toString();
                SQLquery sqll = new SQLquery(hotorNot.this);
                sqll.open();
                sqll.createEntry(nam,Hotnes);
                sqll.close();
                Dialog d = new Dialog(this);
                d.setTitle("In Button");
                TextView tv = new TextView(this);
                tv.setText("Button Pressed");
                d.setContentView(tv);
                d.show();
                }catch(SQLiteException e)
                {
                    didItWork = false;
                    Dialog d = new Dialog(this);
                    d.setTitle("Failed"+e.toString());
                    TextView tv = new TextView(this);
                    tv.setText("Failed"+e.toString());
                    d.setContentView(tv);
                    d.show();
                }finally{

                    if(didItWork){
                        Dialog d = new Dialog(this);
                        d.setTitle("Success");
                        TextView tv = new TextView(this);
                        tv.setText("Succeeded");
                        d.setContentView(tv);
                        d.show();
                    }

                }

                break;

            }
            // TODO Auto-generated method stub

        }

    }

===========================================================
 "AndroidManifest"  file
=============================================================
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.hotornot"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".hotorNot"
            android:label="@string/title_activity_hotor_not" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
==========================================================================
First i was getting sqlite exception that my database version is 3 and i have puted wrongly there 1 ... but when i had corrected it . than on clicking to button my apps creashes giving an error of "Unfortunatly hotornot has stopped"
And here are the error logs... 

    07-13 19:43:09.484: E/AndroidRuntime(586): FATAL EXCEPTION: main
    07-13 19:43:09.484: E/AndroidRuntime(586): java.lang.NullPointerException
    07-13 19:43:09.484: E/AndroidRuntime(586):  at com.example.hotornot.hotorNot.onClick(hotorNot.java:80)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at android.view.View.performClick(View.java:3511)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at android.view.View$PerformClick.run(View.java:14105)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at android.os.Handler.handleCallback(Handler.java:605)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at android.os.Handler.dispatchMessage(Handler.java:92)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at android.os.Looper.loop(Looper.java:137)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at java.lang.reflect.Method.invokeNative(Native Method)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at java.lang.reflect.Method.invoke(Method.java:511)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    07-13 19:43:09.484: E/AndroidRuntime(586):  at dalvik.system.NativeStart.main(Native Method)
    07-13 19:43:10.094: I/dalvikvm(586): threadid=3: reacting to signal 3
    07-13 19:43:10.134: I/dalvikvm(586): Wrote stack traces to '/data/anr/traces.txt'

Please help me...

Thanks .... 
```

# drupal - 如何允许用户在 Drupal 7.14 中创建幻灯片？

> ID：11473064
> 
> 赞同：0
> 
> 时间：2012-07-13T15:00:17.037
> 
> 标签：drupal, drupal-7, drupal-modules, slideshow

请我期待在**Drupal 7.14**中添加一些模块，允许我的用户添加幻灯片内容（带有文本的图像系列）。我也想知道是否可以对此类内容进行分类。

您认为哪些模块适合这种用途？或者只是有人如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T16:59:15.760

除了 YoloTats 所说的，您还可以使用 Views 幻灯片模块：[http ://drupal.org/project/views_slideshow/](http://drupal.org/project/views_slideshow/)

由于它也与视图一起使用，因此您绝对可以对内容进行分类。只需为您的图像、文本和类别设置一个新的内容类型，然后在带有幻灯片显示的视图中显示所有这些内容。views_slideshow 模块允许您通过各种过渡、节奏等循环浏览您的内容。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:28:44.237

您可以使用多个模块，这里有几个。我喜欢将它们与 Views 一起使用

[http://drupal.org/project/flexslider](http://drupal.org/project/flexslider)

[http://drupal.org/project/nivo_slider](http://drupal.org/project/nivo_slider)

# android - Gallery的Relativelayout中的EditText不起作用

> ID：11473071
> 
> 赞同：0
> 
> 时间：2012-07-13T15:00:28.660
> 
> 标签：android, android-edittext, gallery, android-relativelayout

在我的应用程序中，我使用了带有 imageview 和 edittext 的相对布局，并将这些布局中的每一个都设置在画廊中。当我在edittext中进行编辑时，它可以工作，但是当我尝试删除时，它并没有删除。

如果我在画廊中单独使用它们，而不是将 edittext 和 imageview 包装在相对布局中，那么一切正常。

任何人都可以说为什么它在包裹在相对布局中的情况下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:47:37.657

最后我得到了答案，我只需要在我的自定义库中重写一个调度键事件方法。

```
@Override
public boolean dispatchKeyEvent(KeyEvent event)
{
    boolean handled = false;

    if (getFocusedChild() != null)
    {
        handled = getFocusedChild().dispatchKeyEvent(event);
    }

    if (!handled)
    {
        handled = event.dispatch(this, null, null);
    }

    return handled;
} 
```

# apache2 - 出现错误“您无权访问此服务器上的 /。Apache/2.2.22 (Ubuntu) Server at localhost Port 80

> ID：11473072
> 
> 赞同：2
> 
> 时间：2012-07-13T15:00:29.910
> 
> 标签：apache2, lamp

尝试访问本地主机时，我更改了上面的错误文档。

```
DocumentRoot /home/kunal/Development/sites
<Directory /home/kunal/Development/sites>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

我为新文件运行了 a2ensite 并重新启动了 apache 服务器。我将我的站点文件夹权限设置为 777 权限。我仍然收到此错误。有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:44:55.160

我得到了同样的错误，我的路径和你的类似`/home/user/Dropbox/WebDev/ServerRoot`。通过在最后一个文件夹或您的站点文件夹上设置权限，我犯了与您相同的错误。

为我从文件路径的第三个文件夹设置您的权限我必须设置该`/Dropbox`文件夹的权限然后它开始工作我建议您设置`/Development`文件夹的权限，它将开始工作。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T23:22:05.190

我在`~/Dropbox`目录中找到的网站也遇到了同样的问题。我通过运行以下命令更改了目录的权限，之后一切都像魅力一样。

`$ chmod 755 ~/Dropbox`

希望这可以帮助。

# iphone - 将 iPhone 应用程序从远程机器获取到 iPod 进行测试

> ID：11473073
> 
> 赞同：0
> 
> 时间：2012-07-13T15:00:35.383
> 
> 标签：iphone, unit-testing, remote-debugging

我的问题是 - 我通过远程桌面连接在远程 Mac 上工作 - 从 Windows 主机。我在远程 Mac 上准备好了我的应用程序。我有我的 iPod，连接到我的 Windows 主机。如何将此应用程序安装到我的设备上以进行测试？

我通过 RDP 访问 mac。我编辑了 rdp 连接以允许本地 USB 访问我的远程 Mac，（远程）希望我的 Mac 将其视为设备。但它没有。

有什么办法可以看到我的 iPod？（我已经读过[这篇](http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices)文章，它需要 mac-to-ipod 直接连接。）

或者有没有其他途径可以让我的应用程序包在我的设备上通过 Windows 机器进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:42:28.047

首先，您必须将您的 iPod 添加到开发者门户（如果您还没有的话）。接下来，您可以进行构建和存档，将您的应用程序导出到管理器中。单击管理器中的应用程序版本，然后单击分发按钮并确保选择临时分发。这将为您提供应用程序的 .app 打包版本，然后可以将其从远程桌面发送到您的 Windows 机器，然后您可以将其拖到 iTunes 中并将其安装到您的 iPod 上。

如果您在短时间内测试大量不同版本的应用程序，那么我建议您使用试飞，在谷歌上很容易找到。它允许您通过临时 .app 包上传您的应用程序版本，然后可以使用手机上的试飞应用程序将其安装在您的所有设备上。我只建议您在大量设备上进行大量构建和测试时这样做。

希望这可以帮助

山姆

# jquery - 运行良好的 Javascript 字符串实用程序库

> ID：11473074
> 
> 赞同：4
> 
> 时间：2012-07-13T15:00:35.423
> 
> 标签：jquery, string, prototype

很长一段时间以来，我一直在思考为什么没有更强大的具有开发人员友好 API 的 Javascript 字符串实用程序库。我被 Rails 框架用含糖的实用方法宠坏了，比如：

> camelcase、camelize、分类、常量化、dasherize、deconstantize、解调、人性化、isBlank、参数化、复数、tableize、titlecase、titleize、下划线

我注意到其中一些你可以很容易地找到一次性的实现，但大多数实现与其他 JS 库一起使用时会很痛苦，因为它们通常使用一种令人讨厌的原型继承形式，会丢弃像 Jquery 或 Prototype 这样的任何添加库到原型中。

过去十年我是否一直住在壁橱里，这里有谁有魔力？我并不是真的在寻找如何实现的示例，而是寻找一个与 jQuery 和我已经在盒子里的其他玩具一起工作的库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:03:58.170

看看[UNDERSCORE STRING](http://epeli.github.com/underscore.string/)

> Underscore.string 是 JavaScript 库，用于舒适地操作字符串，是 Underscore.js 的扩展，灵感来自 Prototype.js、Right.js、Underscore 和漂亮的 Ruby 语言。
> 
> Underscore.string 为您提供了几个有用的功能：capitalize、clean、includes、count、escapeHTML、unescapeHTML、insert、splice、startsWith、endsWith、titleize、trim、truncate 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T08:59:58.120

另一个简洁的 String 库在这里：**[String JS](http://stringjs.com/)**它扩展了 String 原型，并且在所有浏览器（甚至是 Node.JS）上都能完美运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:05:14.107

[underscore.string](https://github.com/epeli/underscore.string#readme)可以解决问题。

```
var result = _.string.reverse("I love to teach the world");
alert(result) 
```

[样本](http://jsfiddle.net/VLyJd/)

# android - 当我将 includeFontPadding 设置为 false 时，是否会冒裁剪国际字符的风险？

> ID：11473076
> 
> 赞同：7
> 
> 时间：2012-07-13T15:00:38.753
> 
> 标签：android, textview, user-experience

为了摆脱 TextView 顶部的额外空间，我有将`includeFontPadding`属性设置为 false 的解决方案。

该项目将以多种语言实现国际化，包括中文、日文和其他非拉丁文字。的保留空间是否`includeFontPadding`保证为空白，或者我是否冒着通过将属性设置为 false 来裁剪任何高字符的风险？

# java - 匹配此字符串模式的正则表达式

> ID：11473078
> 
> 赞同：0
> 
> 时间：2012-07-13T15:00:44.990
> 
> 标签：java, regex, gwt

我正在尝试构造一个正则表达式以匹配 GWT (Java) 程序中的以下字符串模式

该模式必须匹配以下格式的字符串（基本上这是一个地址字符串，我试图发送到谷歌地图以获取坐标：

```
"2205 someStreet, Miami, USA"
OR
"someStreet, Miami, USA" 
OR
"Miami, USA"
OR
"2205 somestreet Miami USA "
All other variations should not be allowed 
```

到目前为止，我已经尝试过这些正则表达式

```
"([0-9a-zA-Z]+ ((\\s){0,1} | (,){0,1} (\\s){0,1}) [0-9a-zA-Z]$)+ "
"^[0-9a-zA-Z]+,|\\s[0-9a-zA-Z]+" 
```

虽然它们匹配一些可接受的字符串模式，但它们也匹配不可接受的字符串模式。

所以我想知道是否有人可以帮我解决这些问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:16:13.753

正如评论中提到的，最简单的方法是使用 4 个单独的正则表达式，而不是一个更容易出错的怪物复杂的正则表达式。（此外，如果您使用倍数，您可以更轻松地添加新的可接受模式。）

这些模式应该有效：

1.  对于“2205 someStreet, Miami, USA”：`\d+ \w+, [A-Za-z]+, [A-Z]+`

2.  对于“someStreet, Miami, USA”：`\w+, [A-Za-z]+, [A-Z]+`

3.  对于“美国迈阿密”：`[A-Za-z]+, [A-Z]+`

4.  对于“2205 somestreet Miami USA”：`\d+ \w+ [A-Za-z]+ [A-Za-z]+\s*`

我用`\w`街道名称来支持像“12th”这样的编号名称。

当然，这些句子假设城市只是一个单词。如果是“纽约”呢？它还假设街道是一个单词——“123 Broadway, Denver, USA”——并且不支持“123 West 12th Drive”之类的内容。您可能需要更多地考虑究竟什么是有效地址。

Google API 通常非常强大，所以我希望 Google Maps API 能够在地址格式检测方面做得不错。通过尝试进行此类验证，您很有可能只是为自己做额外的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:09:56.393

`,` *使用正则表达式*拆分您的字符串，然后根据需要逐步分析字符串 [3] 结果。

*评论后编辑*

您还必须分析`String[].length`以决定那些少于两个的`,`。

通过这种方式，您可以使用 trim() 删除之前/之后的尾随空格`,`，并且您可以专注于专用的简单正则表达式。

# r - 在R中随机合并两个向量

> ID：11473079
> 
> 赞同：0
> 
> 时间：2012-07-13T15:00:46.907
> 
> 标签：r

我有两个向量 x 和 y。与 y 相比，x 是一个更大的向量。例如（此处 x 设置为全零，但不一定是这种情况）

```
x = rep(0,20)
y = c(2,3,-1,-1) 
```

我想要完成的是在 x 中随机覆盖一些 y。所以在上面的例子中，x 看起来像

```
0,0,2,3,-1,-1,0,0,0,0,2,3,-1,-1,... 
```

基本上，我将遍历 x 中的每个值，提取一个随机数，如果该随机数小于某个阈值，我想在 x 中的接下来 4 个位置覆盖 y，除非我已经到达 x 的末尾。任何应用功能都有帮助吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:35:53.920

`x`一种简单的方法是从组合的两个向量中随机选择点（与 相同的长度）：

```
sample(c(x, y), length(x), replace = TRUE) 
```

如果您想在其中引入一些概率，您可以执行以下操作：

```
p <- c(rep(2, each = length(x)), rep(1, each = length(y)))
sample(c(x, y), length(x), prob = p, replace = TRUE) 
```

这就是说一个`x`点被选择的可能性是一个点的两倍（针对不同的概率相应地`y`更改 2 和 1 ）。`p`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:30:08.970

像下面这样的东西对我有用。

```
i = 1
while(i <= length(x)){
 p.rand = runif(1,0,1)
 if(p.rand < prob[i]){
  p[i:(i+length(y))] = y
  i = i+length(y)
 }
 i = i + 1
} 
```

其中 prob[i] 是某个概率向量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:39:21.480

简短的回答：是的:-)。写一些函数，比如

```
ranx <- runif(length(x)-length(y)+1)
# some loop or apply func...
if (ranx[j] < threshold) x[j:j+length(y)] <- y
# and make sure to stop the loop at length(y)-length(x) 
```

# groovy - 重用 Groovy CompilerConfiguration 对象

> ID：11473081
> 
> 赞同：0
> 
> 时间：2012-07-13T15:00:51.137
> 
> 标签：groovy, internals

我有一些代码创建了一个 Groovy CompilerConfiguration，其中包含使用 ImportCustomizer 添加的一堆隐式导入。我想知道在多个 GroovyClassLoaders 或 GroovyShell 中重用相同的 CompilerConfiguration 对象是否安全。我在 GroovyClassLoader 或 GroovyShell 中看不到任何会改变传入的 CompilerConfiguration 的代码，因此它可能是安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:19:02.987

As long as you're stick with `ImportCustomizer`, it is probably safe, but neither compilation customizers nor the compiler configurations are designed to be thread safe, so it's probably better to use distinct configuration objects. This is in general true for any class in the compilation process: it's not thread safe.

I can easily imagine a situation where you create a `CompilerConfiguration`, pass it to multiple `GroovyShell` instances and add customizers in different threads.

So I would say, unless you have a very good reason to share the same configuration (and I don't really see one :)), go the safe way and use distinct objects.

# c# - 通用和非通用接口

> ID：11473084
> 
> 赞同：9
> 
> 时间：2012-07-13T15:01:13.807
> 
> 标签：c#, generics

我遇到了很多情况，我声明了一个泛型接口，后来我需要这个接口的非泛型版本，或者至少是该接口上某些方法或属性的非泛型版本。我通常会声明一个新的非泛型接口并让它继承泛型接口。我遇到的问题显示在下面的示例中：

```
public abstract class FormatBase { }

public interface IBook<F> where F : FormatBase
{
    F GetFormat();
}

public interface IBook
{
    object GetFormat();
}

public abstract class BookBase : IBook<FormatBase>, IBook
{
    public abstract FormatBase GetFormat();

    object IBook.GetFormat()
    {
        return GetFormat();
    }
} 
```

由于声明 IBook（非通用）接口的唯一方法是显式的，你们如何将其抽象化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T15:07:57.067

只是委托：

```
public abstract class BookBase : IBook<FormatBase> {
  public abstract FormatBase GetFormat();

  object IBook.GetFormat() {
    return GetFormat();
  }
} 
```

或者，如果您仍想区分这两种方法，请委托给一个新方法：

```
public abstract class BookBase : IBook<FormatBase> {
  public abstract FormatBase GetFormat();

  public abstract object IBook_GetFormat();

  object IBook.GetFormat() {
    return IBook_GetFormat();
  }
} 
```

您还需要`new`避开“隐藏继承的成员”警告：

```
public interface IBook<F> : IBook 
where F : FormatBase {
  new F GetFormat();
} 
```

此外，让具体类决定具体可能更有意义`FormatBase`：

```
public abstract class BookBase<F> : IBook<F> 
where F : FormatBase {
  public abstract F GetFormat();

  object IBook.GetFormat() {
    return GetFormat();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T15:15:54.367

为什么你不能写显式接口的实现，而不是声明它是抽象的？

```
public abstract class BookBase : IBook<FormatBase>, IBook
{                
    public abstract FormatBase GetFormat();

    object IBook.GetFormat()
    {
        return GetFormat();
    }
} 
```

# ruby-on-rails-3 - 在 Rails 3 中，如何使配置 yaml 文件可重新加载？

> ID：11473086
> 
> 赞同：3
> 
> 时间：2012-07-13T15:01:19.200
> 
> 标签：ruby-on-rails-3, configuration, yaml

我正在将 Rails 应用程序从 2.3.14 升级到 3.0.5（升级到 3.1 和 3.2 的中间步骤）。

现有应用程序中已经内置了一个语言翻译系统。最终我们可能会迁移它以使用 ruby​​/rails I18n，但不是今天。

翻译系统在 .../app/config/initializer 中定义了一个初始化程序。初始化程序加载一个位于 .../app/config/messages.yml 的 yaml 文件，并将其按摩到一个新的散列中，该散列键在引用消息的模板的路径上。

碰巧的是，ApplicationController::Base.template 在 Rails 3 中不起作用，因此，现在我正在修改 messages.yml 文件，以便消息在控制器#action 上键入。将模板路径逐页更改为 controller#action 是一个繁琐的过程。如果我不必在每次更改后重新启动服务器，就不会那么乏味了。

当 .../app/config/message.yml 发生变化时，有没有办法让 Rails 重新运行初始化程序？

# java - 需要返回字符串，但只获得一个带有随机数生成器的 int

> ID：11473087
> 
> 赞同：1
> 
> 时间：2012-07-13T15:01:24.433
> 
> 标签：java, random, generator

无法弄清楚为什么我的代码只会在我需要一个字符串时返回一个 Int 并且帮助会很棒。下面的代码。我尝试将变量声明为 String 但没有运气。

我想返回 3 个随机字符串：cherry、grape、bell 或 x

```
import java.util.Scanner;
import java.util.Random;

public class slot {
    public static void main(String[] args)
    {
        String answer = "y";
        int cherry;
        int grape;
        int bell;
        int x;

        Random generator = new Random(); // random generator
        Scanner scan = new Scanner (System.in); // scanner class

        System.out.println("Would you like to play the slot machine?(y/n): ");
        answer = scan.nextLine();

        while(answer.equalsIgnoreCase("y"))
        {
             cherry = generator.nextInt(5); // generates a random number
            grape = generator.nextInt(5);
            bell = generator.nextInt(5);

            System.out.println("The three numbers of the slot machine are: " + cherry +grape +bell);

            if(cherry == grape && grape == bell)
               {
                System.out.println("JACKPOT! All three of the same");
               }

            if(cherry == grape || cherry == bell || grape == bell )
               {
                System.out.println("Close, you got two of the same!!");
               }
            else
               {
                System.out.println("Not a winner");
               }

            System.out.print("Try again?(y/n): ");
            answer = scan.nextLine();
            System.out.println();
        }

        System.out.println("Bye!!");

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T15:04:30.720

我会这样表述：

```
// The different results each "wheel" / "column" on the slot machine.
String[] results = { "cherry", "bell", "grape", "x" };

// Create a random result for each wheel.
String wheel1 = results[generator.nextInt(results.length)];
String wheel2 = results[generator.nextInt(results.length)];
String wheel3 = results[generator.nextInt(results.length)]; 
```

然后继续你的`if`陈述。（但`else if`为第二和第三个语句做）。

```
if (wheel1 == wheel2 && wheel2 == wheel3) {
    // jackpot
} else if (wheel1 == wheel2 || wheel2 == wheel3 || wheel1 == wheel3) {
    // two equal
} else {
    // all three different.
} 
```

如果您想更深入地了解该语言，我建议您查看`enum`s.

（请注意，`==`在 10 次中有 9 次使用比较字符串是一个坏主意。但是，在这里，我们不需要费心比较字符串*内容*，而是可以通过比较*参考值*来摆脱困境。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:15:04.800

您正在打印`int`s 的值。试试这个：你生成一个数字，然后根据这个数字选择你的字符串。

```
Random generator = new Random();
    int a = generator.nextInt(5); 
    int b = generator.nextInt(5);  
    int c = generator.nextInt(5); 

    String roll1 = null;
    switch(b){
    case 1: roll1 = "cherry";
            break;
    case 2: roll1 = "grape";
            break;
    case 3: roll1 = "bell";
            break;
    default: roll1 = "xxx";
             break;
    }
    //repeat for b and c with roll2 and roll3
    System.out.println(roll1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:04:04.130

将字符串声明为整数并不会使它们成为整数值。您需要做的是创建一个包含您正在使用的单词的数组。然后生成一个在数组范围内的随机 int 值。

然后，您将从数组中选择单词，该单词位于您拥有的随机 int 指定的位置。

编辑：对不起，我没有阅读你的整个问题。你能告诉我们打印的是什么吗？

# ms-access - VBA DoCmd.OutputTo 与 QueryDef

> ID：11473088
> 
> 赞同：0
> 
> 时间：2012-07-13T15:01:26.033
> 
> 标签：ms-access, vba

我一直在寻找使用开放参数导出查询的解决方案。我需要将查询导出为格式化的 Excel 电子表格，并且无法为正在使用的数据库创建其他表、查询、表单或报告。我使用 DoCmd.OutputTo 因为它导出格式化的查询，这与 DoCmd.TransferSpreadsheet 不同，但是我似乎无法使用定义的参数导出查询。我需要包含参数，否则用户将被迫输入开始和结束日期三次，因为数据库出于某种原因要求两次 startDate 和 endDate 并且为了保留 Excel 电子表格和随后的 Outlook 部分一致我将不得不要求用户再次输入他们以前的参数

```
Sub Main()
On Error GoTo Main_Err

'Visually Display Process
DoCmd.Hourglass True

Dim fpath As String
Dim tname As String
Dim cname As String
Dim tType As AcOutputObjectType
Dim tempB As Boolean

fpath = CurrentProject.path & "\"
'tType = acOutputTable
'tname = "APPROVED SWPS FOR LOOK AHEAD & BAR CHART"
tType = acOutputQuery
tname = "ASFLA&BC Query"
cname = "Temp BPC Calendar"

Dim qdfQry As DAO.QueryDef
Dim strStart As String
Dim strEnd As String

Set qdfQry = CurrentDb().QueryDefs(tname)

'strStart = InputBox("Please enter Start date (mm/dd/yyyy)")
'strEnd = InputBox("Please enter Start date (mm/dd/yyyy)")

qdfQry.Parameters("ENTER START DATE") = FormatDateTime("6/30/12", vbShortDate)   'strEnd
qdfQry.Parameters("ENTER END DATE") = FormatDateTime("7/1/12", vbShortDate) 'strStart

tempB = Backup(fpath, qdfQry, tType)
If (Not tempB) Then
    MsgBox "Excel Conversion Ended Prematurely..."
    Exit Sub
End If

'    tempB = sendToOutlook(qdfQry, cname)
'    If (Not tempB) Then
'        MsgBox "Access Conversion Ended Prematurely..."
 '        Exit Sub
'    End If

MsgBox "Procedure Completed Successfully"

Main_Exit:
    DoCmd.Hourglass False
    Exit Sub

 Main_Err:
    DoCmd.Beep
    MsgBox Error$
    Resume Main_Exit
End Sub

'************************************************************************************
'*
'*                                      Excel PORTION
'*
'************************************************************************************

Public Function Backup(path As String, db As DAO.QueryDef, Optional outputType As     AcOutputObjectType) As Boolean
On Error GoTo Error_Handler
    Backup = False
    Dim outputFileName As String
Dim name As String
Dim tempB As Boolean

'Set Up All Name Variablesand
name = Format(Date, "MM-dd-yy") & ".xls"

'Cleans Directory of Any older files and places them in an archive
SearchDirectory path, "??-??-??.xls", name

'See If File Can Now Be Exported. If Already Exists ask to overwrite
outputFileName = path & name

tempB = OverWriteRequest(outputFileName)

If tempB Then
    'Formats The Table And Exports Into A Formatted SpreadSheet
    'Checks if an output type was added to the parameter if not defualt to table
    If Not IsMissing(outputType) Then
        DoCmd.OutputTo outputType, db.name, acFormatXLS, outputFileName, False
    Else
        DoCmd.OutputTo acOutputTable, db.name, acFormatXLS, outputFileName, False
    End If
Else
    Exit Function
End If

Backup = True

Error_Handler_Exit:
    Exit Function

Error_Handler:
    MsgBox "MS Access has generated the following error" & vbCrLf & vbCrLf & "Error Number: " & _
Err.number & vbCrLf & "Error Source: Main Excel Backup" & vbCrLf & "Error Description: " & _
Err.Description, vbCritical, "An Error has Occured!"

Resume Error_Handler_Exit
End Function 
```

当前给出的 SQL 如下所示，为清楚起见省略了字段

```
PARAMETERS [ENTER START DATE] DateTime, [ENTER END DATE] DateTime;
SELECT [SWPS].STATION,
       [SWPS].START_DATE, 
       [SWPS].END_DATE, 
FROM [SWPS]
WHERE ((([SWPS].STATION) 
Like ("*")) 
AND (([SWPS].START_DATE)<=[ENTER END DATE]) 
AND (([SWPS].END_DATE)>=[ENTER START DATE]) 
AND (([SWPS].SWP_STATUS) In ("A","P","W","T","R"))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:05:40.853

我建议你更改查询的sql。

```
Dim qdfQry As DAO.QueryDef
Dim strStart As String
Dim strEnd As String

''You could use a query specifically for this
Set qdfQry = CurrentDb.QueryDefs(tname)

sSQL=qdfQry.SQL

NewSQL = "SELECT [SWPS].STATION, [SWPS].START_DATE, [SWPS].END_DATE, " _
       & "FROM [SWPS] WHERE [SWPS].STATION Like '*' " _
       & "AND [SWPS].SWP_STATUS In ('A','P','W','T','R') " _
       & "AND [SWPS].START_DATE)<=#" & Format(DateStart, "yyyy/mm/dd") & "# " _
       & "AND [SWPS].END_DATE)>=#" & Format(DateEnd, "yyyy/mm/dd") & "#"

qdfQry.SQL = NewSQL

''Do the excel stuff

''Reset the query
qdfQry.SQL = sSQL 
```

# python - 使用 python 在 Web 代理上抓取网站

> ID：11473091
> 
> 赞同：0
> 
> 时间：2012-07-13T15:01:39.377
> 
> 标签：python, authentication, cookies, proxy

我正在使用杜克图书馆网络代理来抓取我可以访问的数据库。我遇到的问题是，由于数据库是通过代理服务器访问的，因此我无法像数据库不需要代理身份验证那样直接抓取该数据库。

我尝试了几件事：

我编写了一个登录到 duke 网络的脚本 (https://shib.oit.duke.edu/idp/AuthnEngine')。

然后我在我的登录数据中硬编码：

```
login_data = urllib.urlencode({'j_username' : 'userxx',
                           'j_password' : 'passwordxx',
                           'Submit' : 'Enter'
                           }) 
```

然后我登录：

```
resp = opener.open('https://shib.oit.duke.edu/idp/AuthnEngine', login_data) 
```

然后我创建一个 cookie jar 对象来保存来自代理网站的 cookie。

然后我尝试用我的脚本访问数据库，它仍然告诉我需要身份验证。我想知道如何绕过代理服务器所需的身份验证。

如果您有任何建议，请让我知道。

谢谢你，简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:18:56.000

代理登录不存储 cookie，而是使用`Proxy-Authorization`标头。这个标头需要与每个类似的请求一起发送`Cookies`。标头与常规基本身份验证的格式相同，尽管可能有不同的格式（`Digest`, `NTLM`。）我建议您检查正常登录的标头并复制并粘贴`Proxy-Authorization`已发送的标头。

# .htaccess - .htaccess 将 URL 重写为其他 URL 没有参数？

> ID：11473095
> 
> 赞同：0
> 
> 时间：2012-07-13T15:01:50.470
> 
> 标签：.htaccess

我有一个名为`test.php`. `www.example.com/test.php`现在我希望如果你访问`www.example.com/directory/test.php`你会看到`test.php`.

所以我不想进行 301 重定向。但我确实希望人们参观`www.example.com/directory/test.php`。这样做的唯一方法是在我的 FTP 中创建一个新文件夹`directory`并上传到那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:06:22.573

您不必创建一个名为“目录”的新目录，您可以这样做

`RewriteRule ^directory/test\.php$ http://example.com/test.php [P]`

反而。

# c++ - 为什么 for_each + lambda 会触发 -Waggregate-return 警告？

> ID：11473099
> 
> 赞同：5
> 
> 时间：2012-07-13T15:02:23.527
> 
> 标签：c++, c++11

当使用 gcc 和标志尝试以下示例时，`-Waggregate-return`警告：`function call has aggregate value`触发：

```
struct Element {
// ... stuff ...
}

Container<Element> elements(10);
for_each(begin(elements),end(elements),[](Element& e){

// ... modify elements ...

}); 
```

据我所知，`-Waggregate-return`标志“警告是否定义或调用了返回结构或联合的任何函数”，因为如果我理解正确，您可能会通过返回足够大的对象来溢出堆栈。

但是，`for_each`返回lambda 的~~类型~~，其类型为`void`。为什么会触发警告？我错过了什么？如何改进我的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:39:46.940

> 为什么会触发警告？

据推测，警告是通过返回任何类或联合类型的东西来触发的。Lambdas 具有类类型，并`for_each`返回其函数参数，因此将触发警告。

也有可能返回的迭代器类型`begin(elements)`可能`end(elements)`会触发警告，具体取决于该`Container`类型如何实现迭代器。

> 如何改进我的代码？

我会禁用该警告；它与惯用的 C++ 并不真正兼容，因为从函数返回小类对象很常见。例如，它也会被触发`std::map::insert()`，它返回一对，以及许多其他标准库函数。

# javascript - 如何将较低的z级元素移动到透明png下方

> ID：11473101
> 
> 赞同：2
> 
> 时间：2012-07-13T15:02:27.100
> 
> 标签：javascript, jquery

我有以下网站，可以让我缩放图像并裁剪它和其他东西。您可以拖动和平移图像：

[http://thindery.com/jsfiddle/crop_move.html](http://thindery.com/jsfiddle/crop_move.html)

我想尝试在顶部实现一个掩码，我在这里做了：

[http://thindery.com/jsfiddle/crop_mask1.html](http://thindery.com/jsfiddle/crop_mask1.html)

问题是因为 mask.png 覆盖了整个butterfly.img，我不能再拖动和平移图像了。我正在尝试一种方法，可以将蒙版放在顶部，但仍然可以移动源图像。

有人对我可以研究的东西有一些想法、想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:22:07.770

您可以`pointer-events: none;`用于叠加图像，但我猜它不适用于所有浏览器。

```
#overlay {
  pointer-events: none;
} 
```

# javascript - 是否可以在不重新加载的情况下运行注入的脚本？

> ID：11473105
> 
> 赞同：0
> 
> 时间：2012-07-13T15:02:33.787
> 
> 标签：javascript, jquery, google-chrome-extension

我做了一个简单的自动表单填充器，将信息从创建的 html 发送到后台，然后发送到内容脚本，因此注入的脚本可以更改表单上的信息。

我知道一旦页面加载，内容脚本就会运行。我想知道是否可以再次运行内容脚本，而无需重新加载页面。

我`sendRequest`在内容脚本中获得了功能，我用它来确保它只有在页面准备好时才能获取信息。然后它将信息添加到表单中，然后等待我发送。

在内容脚本中，我添加了一个`onRequest`并且它可以工作（它获取信息）。但是，我看不到表单上的更改，除非我正在重新编辑页面。

我想知道是否可以这样做，如果可以，我应该学习哪些科目来实现这一点。

我是 chrome 扩展的新手，我仍在学习 :) 在其中 1 个页面中，我使用 jQuery，因此使用 jQuery 的答案也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:30:41.457

我发现如果我们`chrome.tabs.sendRequest`从**后台**创建一个，我们可以使用内容**脚本中的****chrome.extestion.onRequest**并且每次都会执行，因为它们几乎同时运行。

 **所以我从**背景**做了：

```
 chrome.tabs.query({}, function (tabs) {
        for (var i = 0; i < tabs.length; i++) {
            chrome.tabs.sendRequest(tabs[i].id, {...requests u want to send  }, function (response) {

            });

        }
    }); 
```

来自**内容脚本**：

```
chrome.extension.onRequest.addListener(function (request, sender, sendRespons) {
      //get requested info here
      //call functions.

      sendResponse({}); //send info back to background page.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:14:03.927

表单的目标可以是避免页面重新加载的 iframe。不确定它会有多大用处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:54:57.600

再次执行内容脚本的正确方法是使用[`chrome.tabs.executeScript`](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)方法。它接收两个参数。第一个参数是`tabId`，可以通过多种方式获得，例如[其中一个`chrome.tabs`事件](http://code.google.com/chrome/extensions/tabs.html#global-events)。用于`null`在当前选定的选项卡中执行内容脚本（注意：这也可能是一个活动的开发工具窗口！）。

例子：

```
// Reloads the current tab
chrome.tabs.executeScript(null, {code:'location.reload();'});

// Executes contentscript.js in the current tab
chrome.tabs.executeScript(null, {file:'contentscript.js'});

// Executes contentscript.js in all frames in the current tab
chrome.tabs.executeScript(null, {file:'contentscript.js', allFrames: true});

// Receives message from content script, and execute a content script:
chrome.extension.onMessage.addListener(function(details) {
    if (details.message === 'load a content script') {
        chrome.tabs.executeScript(details.sender.tab.id, {file: 'a_script.js'});
    }
});
     // The previous one is activated from a content script, as follows:
     chrome.extension.sendMessage('load a content script'); 
```

( `onMessage`and`sendMessage`必须用来代替`onRequest`and `sendRequest`，因为 Chrome 20)**

# objective-c - 从 Apple iCloud 恢复备份后，如何测试我的基于离线内容的应用程序是否正常工作？

> ID：11473112
> 
> 赞同：1
> 
> 时间：2012-07-13T15:03:06.283
> 
> 标签：objective-c, ios, icloud

我创建了一个基于离线内容的应用程序[新应用程序在应用程序商店中尚不可用]，并且我根据 iOS 数据存储指南将所有内容存储在缓存文件夹中。在 iCloud 备份期间不会为任何用户备份任何内容。在理想情况下，如果用户使用 iCloud 备份恢复他的设备，我的应用程序将在成功恢复操作后自动从应用商店安装。但是现在我的应用程序将没有任何内容已经下载并被用户使用，所以我需要再次下载所有内容。

问题是如何模拟这种情况，因为在我从 iCloud 恢复后，我的设备会尝试连接到应用商店并安装应用。由于这是一个新应用程序，我还没有在应用程序商店中发布它，所以在恢复操作后没有安装应用程序，并且在 iCloud 备份后我无法测试我的应用程序。

有没有更好的方法来模拟测试场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:13:53.070

您是否尝试过恢复然后手动安装您的应用程序（从 iTunes）？我认为 iOS 还原为应用程序恢复的数据使用了一个“安全的地方”，并将其保留一段时间，直到应用程序被有效安装。

# excel - 刷新时添加的 VBA 默认选择 PivotItems

> ID：11473117
> 
> 赞同：3
> 
> 时间：2012-07-13T15:03:21.773
> 
> 标签：excel, pivotitem, vba

当我刷新我的数据，然后使用以下代码对我的数据透视表进行刷新时，默认情况下会选择新添加的项目。有没有办法防止这种情况，因为这意味着我必须再次进入并取消选择？

```
 Dim pt As PivotTable
    Dim pf As PivotField
    For Each pt In Worksheets("Summary").PivotTables

    pt.PivotCache.MissingItemsLimit = xlMissingItemsNone
    pt.PivotCache.Refresh

    For Each pf In pt.PivotFields
       pf.AutoSort xlAscending, pf.Name
    Next pf
    Next pt

    Set pf = Nothing
    Set pt = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:59:20.853

根据我上面的评论，这样的事情应该可行。如果您有很多需要检查的数据透视字段，您可能可以创建一些函数来使其更容易或更高效。

```
Sub pt()

Dim pt As PivotTable, pf As PivotField, pi As PivotItem
Dim dict As Dictionary 'requires reference to Microsoft Scripting Runtime

For Each pt In Worksheets("Summary").PivotTables

    pt.PivotCache.MissingItemsLimit = xlMissingItemsNone

    Set dict = New Dictionary

    ' you will need to loop through each Fields PivotItem Collection separately 
    For Each pi In pt.PivotFields("myPivotField").PivotItems
        dict.Add pi.Name, 1
    Next

    pt.PivotCache.Refresh

   'again, you will need to loop through each one separately to check
    For Each pi In pt.PivotFields("myPivotField").PivotItems
        If dict.Exists(pi.Name) Then Else: pi.Visible = False
    Next

    For Each pf In pt.PivotFields
       pf.AutoSort xlAscending, pf.Name
    Next pf

Next pt

Set pf = Nothing
Set pt = Nothing

End Sub 
```

# jquery - 我如何为奇数和偶数 div 标签应用单独的样式

> ID：11473122
> 
> 赞同：0
> 
> 时间：2012-07-13T15:03:44.120
> 
> 标签：jquery, asp.net-mvc

我正在使用剃刀视图处理 asp.net mvc 4。我试图用 style 显示奇数​​ div 标签，`float:left`甚至用 style 显示 div 标签`float:right`。这里我的 div 标签是这样的，

```
 <div id="content" style="padding-top:80px;">
    @foreach (var item in (List<System.Data.DataRow>)ViewBag.List)
    {
        <a href="@string.Format("Products?id={0}",item[0])">
        <div class="img">

            <table align="center" cellspacing="12">
                <tr>
                    <td style="text-align: center;">
                        <b>@item[1]</b>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; color: DodgerBlue; font-size: xx-large; border-top: 1px solid Gray;
                        border-bottom: 1px solid gray; font-weight: bolder;">
                        $@item[2]
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        @item[3]
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        No Trail period
                    </td>
                </tr>
                <tr>
                <td>
                <div class="divOuter" style="float:left;margin:4px;width:100%;height:40px;text-align:left">
                 @foreach (var i in ProductOption.ProductOptions(Convert.ToInt32(item[0])))
                 {
                     <div class="divInner" style="display:inline;width:50%;"><input type="checkbox" value="@i[0]" checked="checked" /><span style="line-height:20px;font-weight:bold;">@i[0]</span></div>
                 }
                 </div>
                </td>
                </tr>
            </table>
        </div></a>
    }
</div> 
```

我有使用 jquery 之类的，

```
 $(document).ready(function () {
           $("div.divOuter div.divInner:odd").css("float","left");
           $("div.divOuter div.divInner:even").css("float", "right");
       }); 
```

我如何将 float:left 应用于奇数 div 标签，将 float:right 应用于偶数 div 标签。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:07:00.487

而不是设置`id`内部 div 的，将它们设置`class`为`divInner`. 然后将您的选择器更改为如下所示：

```
 $(document).ready(function () {
       $("div.divOuter .divInner:odd").css("float","left");
       $("div.divOuter .divInner:even").css("float", "right");
   }); 
```

ID 在 HTML 文档中应该是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:12:43.680

您遗漏了很大一部分 - 不能有多个具有相同名称的 id。您可以使用一个类，然后使用一个选择器，它会起作用。

见这里：http: [//jsfiddle.net/FMp35/3/](http://jsfiddle.net/FMp35/3/)

# python - xlsx 写作 - 在哪里指定？

> ID：11473129
> 
> 赞同：0
> 
> 时间：2012-07-13T15:03:59.517
> 
> 标签：python, xml, xlsx

我目前正在尝试在 python 中编写一个解析器，它读取 nessus 报告并生成 xlsx 文件。

有没有关于 xlsx 内部工作原理的详细描述？我很难通过查看 xml 文件来找出答案，我在其中指定了哪种样式应用于哪个工作表上的哪个单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:12:50.450

[您可以在ECMA 站点](http://www.ecma-international.org/news/TC45_current_work/TC45_available_docs.htm)上找到 OfficeOpenXML 标准的完整详细信息，但为什么不使用现有的 Python 库之一（例如 Eric Gazoni 的[openpyxl](https://bitbucket.org/ericgazoni/openpyxl/wiki/Home)）来实际生成 xlsx 文件，而不是自己构建呢？

# haskell - 记忆帕斯卡三角

> ID：11473130
> 
> 赞同：1
> 
> 时间：2012-07-13T15:04:01.680
> 
> 标签：haskell, ghci, memoization, pascals-triangle

我对解决问题的实际解决方案或其他方法不感兴趣，这是我需要帮助的记忆:)

我需要帮助解决记忆化的帕斯卡三角问题。我想得到三角形底部的中间数字。（欧拉计划 15）

第一个例子没有被记忆（虽然名字是这样暗示的）“20 20”不可解

第二次尝试是尝试做类似的事情：[http ://www.haskell.org/haskellwiki/Memoization](http://www.haskell.org/haskellwiki/Memoization)

第三是关于 no2 的 hlints 建议，如果这对某人来说更具可读性。

我收到这个错误，但我不确定它是否正确，即使它会编译......（从 ghci 运行，以 2 2 作为参数

```
no instance for (Num [a0])
arising from a use of `zmemopascals'
Possible fix: add an instance declaration for (Num [a0])
In the expression: zmemopascals 2 2
In an equation for `it': it = zmemopascals 2 2 
```

.

```
Code:
--1 
memopascals r c =  [[pascals a b | b<-[1..c]] | a<-[1..r]] !! (r-1) !! (c-1) 
 where pascals 1 _ = 1 
       pascals _ 1 = 1 
       pascals x y = memopascals (x-1) y + memopascals x (y-1) 

--2 
--xmemopascals :: Int -> Int -> Int 
xmemopascals r c =  map (uncurry pascals) (zip [1..] [1..]) !! (r-1) !! (c-1) 
 where pascals 1 _ = 1 
       pascals _ 1 = 1 
       pascals x y = memopascals (x-1) y + memopascals x (y-1) 

--3 
zmemopascals r c =  zipWith pascals [1 ..] [1 ..] !! (r-1) !! (c-1) 
 where pascals 1 _ = 1 
       pascals _ 1 = 1 
       pascals x y = memopascals (x-1) y + memopascals x (y-1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:29:35.557

Memoization 在您的函数中不起作用，因为像这样的调用`memopascals 5 5`会在内部构建三角形的一部分并从中返回单个值。另一个调用与 .`mempascals 6 6`内部的那个部分三角形没有任何联系`memopascals 5 5`。

为了有效的记忆，您希望将公共部分（如表示三角形中计算的数字的列表列表）放在一个单独的函数中，然后由访问特定索引的函数使用。这样，您可以使用相同的列表列表来查找不同的索引。

通常最简单的方法是编写一个`fullpascals :: [[Int]]`生成完整（无限）数据结构的函数，然后编写另一个函数来访问该数据结构，例如

```
memopascals x y = fullpascals !! (x-1) !! (y-1) 
```

在您的情况下`fullpascals`，将与您当前的功能之一相同，但没有特定索引的参数。它甚至可以`memopascals`在内部用于递归。

* * *

*旁注：*在`memoized_fib`wiki 的示例中，被记忆的“公共部分”不是直接所有 fib 的列表，而是访问所有 fib 列表的函数。效果是一样的，因为编译器足够聪明，可以优化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:35:03.200

```
zmemopascals r c =  zipWith pascals [1 ..] [1 ..] !! (r-1) !! (c-1) 
 where pascals 1 _ = 1 
       pascals _ 1 = 1 
       pascals x y = memopascals (x-1) y + memopascals x (y-1) 
```

并不是说它对错误很重要，但在最后一行，你想调用`zmemopascals`而不是`memopascals`.

在第一行中，您有两个列表索引运算符。所以`zipWith pascals [1 .. ] [1 .. ]`必须有`[[a]]`一些类型`a`。`pascals`说的定义

```
pascals :: Num t => Int -> Int -> t 
```

因此`zipWith pascals [1 .. ] [1 .. ] :: [t]`. 因此类型推断找到了`t = [a]`，但编译器没有找到实例`Num [a]`。

对于记忆，您必须为完整的三角形命名，就像@sth 建议的那样，以避免重新计算（斐波那契记忆仅起作用，因为编译器足够聪明，它的形式不能保证）。

另一种选择是使用`iterate`,构造三角形

```
pascal :: Int -> Int -> Integer
pascal n k = iterate nextRow [1] !! n !! k
  where
    nextRow ks = zipWith (+) (0:ks) (ks ++ repeat 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T00:02:27.250

有几个实现记忆的指导方针（看看[这里](https://stackoverflow.com/a/11466959/849891)最近的一些讨论）。

首先，在 GHC 编译器中使用 -O2 优化标志。其次，使用单态类型签名。命名您想要实现共享的中间列表。

然后，注意您的嵌套定义。如果嵌套定义依赖于其封闭（“外部”）范围内的参数值，这意味着对该外部函数的每次调用都必须重新创建其所有嵌套定义，因此不会有任何*一个*列表要共享，但有许多独立的独立的。

在您的函数中，分离并命名您想要共享的列表表达式，我们得到

```
memopascals r c = xs !! (r-1) !! (c-1) 
 where
   xs = [[pascals a b | b<-[1..c]] | a<-[1..r]] 
   pascals 1 _ = 1 
   pascals _ 1 = 1 
   pascals x y = memopascals (x-1) y + memopascals x (y-1) 
```

您的`xs`定义*取决于*`r`and的值`c`，但是您`memopascals`从嵌套的函数 中调用“外部”函数`pascals`。的每次调用`memopascals` *都*必须创建自己的副本，`xs`因为它依赖于`memopascals`的参数，`r`并且`c`. 无法分享。

如果您需要该依赖定义，则必须安排不要调用“超出范围”，而是留在该范围内，以便可以重用所有内部（“嵌套”）定义。

```
memopascals r c = f r c
 where
   f r c = xs !! (r-1) !! (c-1)
   xs = [[pascals a b | b<-[1..c]] | a<-[1..r]] 
   pascals 1 _ = 1 
   pascals _ 1 = 1 
   pascals x y = f (x-1) y + f x (y-1) 
```

现在，每次调用`memopascals`都会创建其内部定义（从其嵌套范围），然后它们相互调用，从不超出范围 - 因此列表`xs`被重用，实现共享。

但是另一个调用`memopascals`将创建它自己的列表内部定义的新副本`xs`，并将使用*它*。我们可以称之为*“本地”*共享，而不是“全局”共享（即记忆化）。这意味着它运行速度很快，但第二次调用相同参数的时间与第一次调用的时间相同——而不是完全记忆化的 0 时间。

只有一种方法可以实现*这一点*，那就是让你的`xs`定义独立。然后编译器可以将所有嵌套范围框架粉碎在一起，执行[lambda 提升](https://stackoverflow.com/questions/592584/what-is-lambda-lifting)将嵌套*闭包*转换为普通*lambda*等：

```
memopascals :: Int -> Int -> Integer
memopascals r c = [[pascals a b | b<-[1..]] | a<-[1..]] !! (r-1) !! (c-1) 
 where 
   pascals 1 _ = 1 
   pascals _ 1 = 1 
   pascals x y = memopascals (x-1) y + memopascals x (y-1) 
```

使用 -O2 开关，即使对于这个版本，GHC 也会执行完整的记忆。只要我们不忘记单态类型签名（或者它又是本地共享）。

# javascript - jquery自动滚动表行但表头固定？

> ID：11473143
> 
> 赞同：0
> 
> 时间：2012-07-13T15:05:00.370
> 
> 标签：javascript, jquery

我知道有代码示例/插件可以使标题固定并且表格可滚动。但我想要实现的是一旦加载表数据行就**自动滚动，但保持标题固定。**

是否有插件/jquery 代码可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:09:10.203

有一个 jQuery 插件：http: [//fixedheadertable.com/](http://fixedheadertable.com/)

将其与该站点的此代码集成：http: [//oncemade.com/animated-page-scroll-with-jquery](http://oncemade.com/animated-page-scroll-with-jquery)，您将能够实现这一目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:15:31.093

表格不会滚动

*   您可以创建一个浮动在表格顶部的假表格标题
*   使用 CSS 分隔表头并使其始终浮动[http://www.imaputz.com/cssStuff/bigFourVersion.html](http://www.imaputz.com/cssStuff/bigFourVersion.html)

将表格主体放在一个固定高度的 div 中，溢出：自动。然后写一个区间函数让它滚动

```
setInterval(function(){
   $('#scrolldiv').scrollTop($('#scrolldiv').scrollTop() + 10); //Just an example
}, 100) 
```

# couchbase - Couchbase 奇怪的视图行为，键为零

> ID：11473147
> 
> 赞同：1
> 
> 时间：2012-07-13T15:05:09.793
> 
> 标签：couchbase

我有一个数据库，其中包含用户之间的聊天消息（每个用户 1 条消息副本：1 条消息用于发送者，1 条用于接收者）。使用 2 台机器（1 台 linux 和 1 台 windows）运行 Couchbase server 2.0 集群。

我使用这样的地图功能来检索用户之间的消息：

```
function (doc) {
  if (doc.type == "msg"){
    emit([doc.OwnerId, doc.SndrId, doc.Date], {"Date":doc.Date, "OwnerId":doc.OwnerId, "RcptId":doc.RcptId, "SndrId":doc.SndrId, "Text":doc.Text, "Unread":doc.Unread, "id": doc.id, "type":doc.type});
    emit([doc.OwnerId, doc.RcptId, doc.Date], {"Date":doc.Date, "OwnerId":doc.OwnerId, "RcptId":doc.RcptId, "SndrId":doc.SndrId, "Text":doc.Text, "Unread":doc.Unread, "id": doc.id, "type":doc.type});
  }
} 
```

因此，如果我尝试从开始时接收一些消息（按日期排序），我使用了这样的 startkey 和 endkey：

```
startkey=[1,2,{}]
endkey=[1,2,0] 
```

但通过这种方式，我不会收到所有消息。要获取我需要使用的所有消息

```
startkey=[1,2,{}]
endkey=[1,2] 
```

这是一个例子。对于零键：

```
{"total_rows":1106,"rows":[
{"id":"msg_8aaca454-5580-4e49-a081-918d8eaba9d6","key":[8,75,1342200837278],"value":{"Date":1342200837278,"OwnerId":8,"RcptId":8,"SndrId":75,"Text":"02","Unread":false,"id":"8aaca454-5580-4e49-a081-918d8eaba9d6","type":"msg"}},
{"id":"msg_49417551-bdc9-477b-b8c2-1f36051bb930","key":[8,75,1342199880920],"value":{"Date":1342199880920,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"4","Unread":false,"id":"49417551-bdc9-477b-b8c2-1f36051bb930","type":"msg"}},
{"id":"msg_2724f077-1e76-4fbc-9a4b-f34cb71e2db0","key":[8,75,1342108023448],"value":{"Date":1342108023448,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"55","Unread":false,"id":"2724f077-1e76-4fbc-9a4b-f34cb71e2db0","type":"msg"}},
{"id":"msg_9cc91327-4ba3-45b5-ab64-f2ca63510e8d","key":[8,75,1341413650113],"value":{"Date":1341413650113,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"3","Unread":false,"id":"9cc91327-4ba3-45b5-ab64-f2ca63510e8d","type":"msg"}},
{"id":"msg_9a386663-8a2b-42d9-ae30-0634a98fe574","key":[8,75,1341413648335],"value":{"Date":1341413648335,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"1","Unread":false,"id":"9a386663-8a2b-42d9-ae30-0634a98fe574","type":"msg"}}
]
} 
```

使用不带零的键：

```
{"total_rows":1106,"rows":[
{"id":"msg_dc4b7758-1f0e-491c-a80d-bf3124dc0ad7","key":[8,75,1342200856186],"value":{"Date":1342200856186,"OwnerId":8,"RcptId":8,"SndrId":75,"Text":"03","Unread":false,"id":"dc4b7758-1f0e-491c-a80d-bf3124dc0ad7","type":"msg"}},
{"id":"msg_8aaca454-5580-4e49-a081-918d8eaba9d6","key":[8,75,1342200837278],"value":{"Date":1342200837278,"OwnerId":8,"RcptId":8,"SndrId":75,"Text":"02","Unread":false,"id":"8aaca454-5580-4e49-a081-918d8eaba9d6","type":"msg"}},
{"id":"msg_b2fe9ca0-aa28-41a6-ab3c-09ece6a5e14a","key":[8,75,1342200787811],"value":{"Date":1342200787811,"OwnerId":8,"RcptId":8,"SndrId":75,"Text":"01","Unread":true,"id":"b2fe9ca0-aa28-41a6-ab3c-09ece6a5e14a","type":"msg"}},
{"id":"msg_49417551-bdc9-477b-b8c2-1f36051bb930","key":[8,75,1342199880920],"value":{"Date":1342199880920,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"4","Unread":false,"id":"49417551-bdc9-477b-b8c2-1f36051bb930","type":"msg"}},
{"id":"msg_0d7dc822-b76c-42f9-87ba-3dc486100526","key":[8,75,1342180778835],"value":{"Date":1342180778835,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"Gcgjvv6gvvbnbvvbh B2B bb cb B2B","Unread":false,"id":"0d7dc822-b76c-42f9-87ba-3dc486100526","type":"msg"}},
{"id":"msg_6b26a65f-68e1-4728-87f1-59ea5e0f0c5d","key":[8,75,1342114611144],"value":{"Date":1342114611144,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"546546546546546546546546546546","Unread":false,"id":"6b26a65f-68e1-4728-87f1-59ea5e0f0c5d","type":"msg"}},
{"id":"msg_f89b09ac-ccf1-4958-85c0-259b0b68752b","key":[8,75,1342108583566],"value":{"Date":1342108583566,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"123","Unread":false,"id":"f89b09ac-ccf1-4958-85c0-259b0b68752b","type":"msg"}},
{"id":"msg_2724f077-1e76-4fbc-9a4b-f34cb71e2db0","key":[8,75,1342108023448],"value":{"Date":1342108023448,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"55","Unread":false,"id":"2724f077-1e76-4fbc-9a4b-f34cb71e2db0","type":"msg"}},
{"id":"msg_9cc91327-4ba3-45b5-ab64-f2ca63510e8d","key":[8,75,1341413650113],"value":{"Date":1341413650113,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"3","Unread":false,"id":"9cc91327-4ba3-45b5-ab64-f2ca63510e8d","type":"msg"}},
{"id":"msg_847b2901-95e3-49b9-8756-e495872558a8","key":[8,75,1341413649161],"value":{"Date":1341413649161,"OwnerId":8,"RcptId":75,"SndrId":8,"Text":"2","Unread":false,"id":"847b2901-95e3-49b9-8756-e495872558a8","type":"msg"}}
]
} 
```

谁能解释为什么它在第一种情况下不绑定所有消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:20:24.647

感谢 couchbase 团队的 Filipe Manana，他回答了这个问题。此问题是由 64 位平台上的 Erlang OTP R14B03（和所有先前版本）引起的。

这是 Filipe 修复此错误的提交[https://github.com/erlang/otp/commit/03d8c2877342d5ed57596330a61ec0374092f136](https://github.com/erlang/otp/commit/03d8c2877342d5ed57596330a61ec0374092f136)

有关更多详细信息，请参阅[http://www.couchbase.com/forums/thread/couchbase-view-not-rerunning-all-values](http://www.couchbase.com/forums/thread/couchbase-view-not-rerurning-all-values)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T16:49:54.300

NB CouchDB 和 CouchBase 与 Membase 和 MySQL 一样相似 = 以相同前缀开头的产品。最好不要让他们混淆！

这可能与排序是通过 ASCII（您所期望的）还是通过 unicode 排序规则进行的有关。更多信息在这里[http://wiki.apache.org/couchdb/View_collat](http://wiki.apache.org/couchdb/View_collation) ​​ion 但这适用于 CouchDB，而不是 CouchBase。也许这有帮助？

# jquery - 页面加载时在函数中自动填充文本框

> ID：11473148
> 
> 赞同：0
> 
> 时间：2012-07-13T15:05:13.437
> 
> 标签：jquery, function, pageload

我的目标是在我的程序页面加载时使用 3 个文本框

函数initializeFormForDebugging()

我可以在这里将它们填充到我程序的样式部分中，但他希望我改为在函数中调用它们。这是我的一个文本框的示例

```
<input id="txtCOGs" type="text" value="4000" /></td> 
```

有没有人对如何在函数中做同样的事情有建议，以及为什么将它们放在函数中而不是仅仅使用样式来自动填充框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:07:38.833

尝试这个：

```
 <input type="text" id="s" name="input" value="search"
      onfocus="if (this.value == 'search') {
                   this.value='' ;
                   this.style.opacity = 0.5;
                 }"
                 onblur="if (this.value == '') {
                      this.value = 'search';
                      this.style.opacity = 0.2;
                 }"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:08:13.430

您可以使用函数将内容添加到文本框。

```
function addToInput(id, text) {

    $("#" + id).val(text);

} 
```

要调用这个函数你可以`addToInput("txtCOGs", "4000");`在文档里面说准备好了。

# git - 本地仓库的“git reset --hard HEAD~1”后 Git 推送失败

> ID：11473150
> 
> 赞同：18
> 
> 时间：2012-07-13T15:05:20.993
> 
> 标签：git

我的工作站上有一个本地 git 存储库，我将其推送到保管箱位置，以便可以通过`git pull remote dropbox`.

昨天我在我的工作站上签入了一个更改，提交并`git push dropbox`编辑了它。我没有`git pull`从我的笔记本电脑上做 a，因为我怀疑我最终会放弃那个提交。

今天我决定放弃那个提交，所以在我的工作站上我做了：

```
git reset --hard HEAD~1 
```

到目前为止，一切都很好。现在我想把它推回 Dropbox，以便在我的笔记本电脑上我可以从*那里*合并和提交。所以在我的工作站上我尝试了：

```
git push dropbox 
```

git抱怨说：

> ！[rejected] master -> master (non-fast-forward) error: failed to push some refs to '\My Dropbox\dev\repos\xcast.git' 为了防止您丢失历史记录，非快进更新被拒绝在再次推送之前合并远程更改（例如“git pull”）。有关详细信息，请参阅“git push --help”的“关于快进的说明”部分。

如何让我的恶化和 Dropbox 再次同步？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-13T15:07:18.687

强制推送应该起作用：`git push -f dropbox`

Git 抱怨是因为你的遥控器仍然有额外的提交，因此你在历史上落后了。

# ios - iOS Storyboard - 从 ViewController 到另一个的自定义插座？

> ID：11473153
> 
> 赞同：4
> 
> 时间：2012-07-13T15:05:26.657
> 
> 标签：ios, storyboard, iboutlet

我正在尝试实现类似于 AplitView 的东西，您可以在情节提要中使用单独的场景并将 viewController 连接到另一个作为插座。这可能吗？

```
@Interface MenuNavigationController : UINavigationController

@property (nonatomic, strong) IBOUtlet MenuViewcontroller *menuViewController;

@end 
```

在 interfaceBuilder 中，我想拖放，并将另一个 viewController 分配给我的插座

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:31:26.830

Xcode 不允许您在故事板中的不同场景之间建立联系。它确实允许它知道的容器视图控制器的这种连接，比如 UISplitViewController，但不允许你自己的。有关此主题的一些有用想法，请参阅[在故事板中将子视图控制器链接到父视图控制器。](https://stackoverflow.com/q/8198698/643383)

# primefaces - 通知栏上的 commanButton 不响应操作

> ID：11473154
> 
> 赞同：1
> 
> 时间：2012-07-13T15:05:27.083
> 
> 标签：primefaces, action, notification-bar

我正在处理 Primefaces 并使用 notificationBar 作为我网站的登录菜单。但是 notificationBar 上的 commandButton 只响应*bar.hide()*。如果他/她不是带有名为*Sign Up*按钮的注册用户，我想将用户重定向到注册页面。如果我将按钮移动到另一个面板，它会响应。请问有什么帮助吗？代码如下：

```
 <p:notificationBar position="top" effect="slide" widgetVar="bar" style="height:195px;border-bottom:8px solid #DF431A;">  
            <p:panelGrid id="options" columns="1" style="margin-top:-5px;margin-right:150px">
                <h:outputText value="Sign Up" 
                              style="font-size:20px;" />

                <p:commandButton style="float:right;width:100%" value="Sign Up" onclick="bar.hide()" action="sign_up" type="button" />
            </p:panelGrid>
    </p:notificationBar> 
```

PS：我试过onclick，窗口位置等。

# xslt - 当属性的出现不特定时提取属性

> ID：11473159
> 
> 赞同：1
> 
> 时间：2012-07-13T15:05:43.653
> 
> 标签：xslt, xslt-1.0

我正在从表格的“td”中提取值背景颜色和宽度属性。

背景颜色和宽度有多种出现方式。吨

我有以下一组有效元素。

```
 1.<td style="BACKGROUND-COLOR: yellow; WIDTH: 52%"></td>
    (combination of BACKGROUND-COLOR and Width in one order)
    2.<td style="WIDTH: 52%;BACKGROUND-COLOR: green"></td>
    (combination of BACKGROUND-COLOR and Width in another order)
    3.<td style="WIDTH:52%;BACKGROUND-COLOR:    green"></td>
    (Spaces could vary from ":" and value)
    4.<td style="BACKGROUND-COLOR: gray"></td>
    (only BACKGROUND-COLOR in style)
    5.<td style="BACKGROUND-COLOR: Gray"></td>
    (Value of BACKGROUND-COLOR can be case sensitive)
    6.<td style="BACKGROUND-COLOR: #ffff00"></td>
    (value of BACKGROUND-COLOR can be hexadecimal also)
    7.<td bgcolor="#008000" style="WIDTH: 54%">
    (BACKGROUND-COLOR can occur as bgcolr also(hexadecimal code)
    8.<td bgcolor="yellow">
    (BACKGROUND-COLOR can occur as bgcolr also(string)) 
```

有效颜色及其代码列表：（所有值都区分大小写）

```
Yellow:#ffff00
Gray:#808080
Green:#008000 
```

输出：

```
1.<bgclr>Yellow</bgclr>
 <colwidth>52</colwidth>

2.<bgclr>Green</bgclr>
  <colwidth>52</colwidth>

3\. <bgclr>Green</bgclr>
  <colwidth>52</colwidth>

4.<bgclr>Gray</bgclr>

5.<bgclr>Gray</bgclr>

6.<bgclr>Yellow</bgclr>

7.<bgclr>Green</bgclr>
  <colwidth>54</colwidth>

8.<bgclr>Yellow</bgclr> 
```

我已经尽力解决这个问题，这对我来说看起来很复杂。

我还提供了有效的 xml 文件。

```
<tr>
        <td style="BACKGROUND-COLOR: yellow; WIDTH: 52%"></td>

        <td style="WIDTH: 52%;BACKGROUND-COLOR: green"></td>

        <td style="WIDTH:52%;BACKGROUND-COLOR:    green"></td>

        <td style="BACKGROUND-COLOR: gray"></td>

        <td style="BACKGROUND-COLOR: Gray"></td>

        <td style="BACKGROUND-COLOR: #ffff00"></td>

        <td bgcolor="#008000" style="WIDTH: 54%"></td>

        <td bgcolor="yellow"></td>

</tr> 
```

任何人都可以帮助解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:15:08.830

我们可以利用 xsl:apply-templates 和谓词的强大功能来避免很多痛苦的 xsl:choose 语句。模板方法还将为我们提供更加模块化的解决方案。

**这个 XSLT 1.0 样式表...**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="lowercase" select="'abcdefghijklmnopqrstuvwxyz'" />
<xsl:variable name="uppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" />

<xsl:template match="/">
 <tr>
  <xsl:apply-templates select="*/td"/>
 </tr>
</xsl:template>

<xsl:template match="td">
 <td>
   <xsl:apply-templates
     select="self::*[contains(@style,'BACKGROUND-COLOR:') or @bgcolor]"
     mode="bg-colour"/>
   <xsl:apply-templates
     select="self::*[contains(@style,'WIDTH:')]"
     mode="width"/>
 </td>
</xsl:template>

<xsl:template match="td[@bgcolor]" mode="bg-colour">
 <xsl:call-template name="render-bg-colour">
  <xsl:with-param name="raw-colour" select="@bgcolor" /> 
 </xsl:call-template>  
</xsl:template>

<xsl:template match="td" mode="bg-colour">
 <xsl:call-template name="render-bg-colour">
  <xsl:with-param name="raw-colour" select="
      substring-before( substring-after(concat(@style,';'),'BACKGROUND-COLOR:'), ';')" /> 
 </xsl:call-template>  
</xsl:template>

<xsl:variable name="palette">
 <colours>
   <colour>
      <code>#ffff00</code>
      <name>Yellow</name>
   </colour>
   <colour>
      <code>#808080</code>
      <name>Gray</name>
   </colour>
   <colour>
      <code>#008000</code>
      <name>Green</name>
   </colour>
 </colours>
</xsl:variable>

<xsl:template name="render-bg-colour">
 <xsl:param name="raw-colour" />
  <xsl:variable name="trim-colour" select="normalize-space( $raw-colour)" />
  <xsl:variable name="canon-colour" select="
      document('')//xsl:variable[@name='palette']/colours/colour[
       (translate($trim-colour, $uppercase, $lowercase) = 
        translate(name        , $uppercase, $lowercase)  ) or
    ($raw-colour = code)
    ]/name/text()"/>

 <bgclr>
   <xsl:value-of select="$canon-colour" />
 </bgclr>  
</xsl:template>  

<xsl:template match="td" mode="width">
 <colwidth>
   <xsl:value-of select="
     normalize-space( substring-before( substring-after(@style,'WIDTH:'), '%'))" />
 </colwidth>   
</xsl:template>

</xsl:stylesheet> 
```

**...应用于此输入文档时...**

```
<tr>
 <td style="BACKGROUND-COLOR: yellow; WIDTH: 52%"></td>
 <td style="WIDTH: 52%;BACKGROUND-COLOR: green"></td>
 <td style="WIDTH:52%;BACKGROUND-COLOR:    green"></td>
 <td style="BACKGROUND-COLOR: gray"></td>
 <td style="BACKGROUND-COLOR: Gray"></td>
 <td style="BACKGROUND-COLOR: #ffff00"></td>
 <td bgcolor="#008000" style="WIDTH: 54%"></td>
 <td bgcolor="yellow"></td>
</tr> 
```

**...将产生此输出文档...**

```
<tr>
  <td>
    <bgclr>Yellow</bgclr>
    <colwidth>52</colwidth>
  </td>
  <td>
    <bgclr>Green</bgclr>
    <colwidth>52</colwidth>
  </td>
  <td>
    <bgclr>Green</bgclr>
    <colwidth>52</colwidth>
  </td>
  <td>
    <bgclr>Gray</bgclr>
  </td>
  <td>
    <bgclr>Gray</bgclr>
  </td>
  <td>
    <bgclr>Yellow</bgclr>
  </td>
  <td>
    <bgclr>Green</bgclr>
    <colwidth>54</colwidth>
  </td>
  <td>
    <bgclr>Yellow</bgclr>
  </td>
</tr> 
```

# python - Apache 背后的 Twisted Web - 如何更正链接？

> ID：11473163
> 
> 赞同：0
> 
> 时间：2012-07-13T15:05:55.330
> 
> 标签：python, apache, twisted, reverse-proxy, twisted.web

我正在尝试使用 Python 的 Twisted 框架编写一个 Web 应用程序。如果作为独立服务器（ala twistd）运行，或者如果 Apache 反向代理它，我希望应用程序能够工作。例如

阿帕奇[https://example.com/twisted/](https://example.com/twisted/) --> [https://internal.example.com/](https://internal.example.com/)

在做了一些研究之后，似乎我需要使用 vhost.VHostMonsterResource 来完成这项工作。因此，我使用以下指令设置了 apache：

```
ProxyPass /twisted https://localhost:8090/twisted/https/127.0.0.1:443 
```

这是我的基本 SSL 服务器：

```
from twisted.web import server, resource, static
from twisted.internet import reactor
from twisted.application import service, internet
from twisted.internet.ssl import SSL
from twisted.web import vhost

import sys
import os.path
from textwrap import dedent

PORT = 8090
KEY_PATH = "/home/waldbiec/projects/python/twisted"
PATH = "/home/waldbiec/projects/python/twisted/static_files"

class Index(resource.Resource):
    def render_GET(self, request):
        html = dedent("""\
            <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
            <html>
            <head>
                <title>Index</title>
            </head>
            <body>
                <h1>Index</h1>
                <ul>
                    <li><a href="/files/">Files</a></li>
                </ul>
            </body>
            </html>
            """)
        return html

class ServerContextFactory:
    def getContext(self):
        """
        Create an SSL context.

        Similar to twisted's echoserv_ssl example, except the private key
        and certificate are in separate files.
        """
        ctx = SSL.Context(SSL.SSLv23_METHOD)
        ctx.use_privatekey_file(os.path.join(KEY_PATH, 'serverkey.pem'))
        ctx.use_certificate_file(os.path.join(KEY_PATH, 'servercert.pem'))
        return ctx

class SSLService(internet.SSLServer):
    def __init__(self):
        root = resource.Resource()
        root.putChild("", Index())
        root.putChild("twisted", vhost.VHostMonsterResource())
        root.putChild("files", static.File(PATH))

        site = server.Site(root)
        internet.SSLServer.__init__(self, PORT, site, ServerContextFactory())

application = service.Application("SSLServer")
ssl_service = SSLService()
ssl_service.setServiceParent(application) 
```

它几乎可以工作——但是当使用 apache 作为反向代理时，索引页面上的“文件”链接的行为并不像我想要的那样，因为它是一个绝对链接。

我的主要问题是，除了使用相对链接之外，是否有某种方法可以计算链接的完整 URL 路径应该是什么，以使链接仍然可以在独立服务器模式下工作？第二个问题是，我是否正确使用了 VHostMonsterResource？我没有找到太多文档，我从网上找到的示例中拼凑了我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:02:49.610

This seems like too much work. Why use VHostMonsterResource at all? You may have very specific reasons for wanting some of this but....Most times:

*   Have apache handle the ssl. apache then passes off to your twisted app serving non SSL goodies back to apache. Documentation all over the net on the apache config stuff.

*   you can sill add another server on an ssl port if you really want to

Haven't tested but structure more like:

```
root = resource.Resource()
root.putChild("", Index())
root.putChild("files", static.File(PATH))

http = internet.TCPServer(8090, server.Site(root))
# change this port # to 443 if no apache
https= internet.SSLServer(8443, server.Site(root), ServerContextFactory())

application = service.Application("http_https_Server")
http.setServiceParent(application)
https.setServiceParent(application) 
```

**Dev tip**: During development, for the cost of a couple of extra lines you can add an ssl server so that you can ssh into the running web_server and inspect variables and other state. Way cool.

```
ssl = internet.TCPServer(8022, getManholeFactory(globals(), waldbiec ='some non-system waldbiec passwork')) 
ssl.setServiceParent(application) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:54:47.073

因此，在深入研究 vhost.VHostMonsterResource 源之后，我确定我可以创建另一个资源，该资源可以让反向代理 URL 前缀由 Apache ProxyPass URL 中的附加标记指定。

首先，我终于发现 vhost.VHostMonsterResource 应该是后端网站中的一个特殊 URL，它从 URL 路径中编码的数据中找出反向代理主机和端口。URL 路径（无方案和网络位置）如下所示：

```
/$PATH_TO_VHMONST_RES/$REV_PROXY_SCHEME/$REV_PROXY_NETLOC/real/url/components/

$PATH_TO_VHMONST : Path in the (internal) twisted site that corresponds to the VHostMonsterResource resource.
$REV_PROXY_SCHEME : http or https that is being used by the reverse proxy (Apache).
$REV_PROXY_NETLOC : The net location (host and port) or the reverse proxy (Apache). 
```

因此，您可以通过在 URL 中编码此信息来控制反向代理的配置。结果是扭曲的站点将理解 HTTP 请求来自反向代理。

但是，如果您按照我的原始示例代理外部站点的子树，则此信息将丢失。所以我的解决方案是创建一个额外的资源来解码额外的路径信息。新的代理 URL 路径变为：

```
/$PATH_TO_MANGLE_RES/$REV_PROXY_PATH_PREFIX/$VHOSTMONST_MARKER/$REV_PROXY_SCHEME/$REV_PROXY_NETLOC/real/url/components/

$PATH_TO_MANGLE_RES : The path to the resource that decodes the reverse proxy path info.
$REV_PROXY_PATH_PREFIX : The subtree prefix of the reverse proxy.
$VHOSTMONST_MARKER : A path component (e.g. "vhost") that signals a VHostMonster Resource should be used to further decode the path. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:31:27.807

配置 Twisted 应用程序，使其知道自己的根位置。它可以使用该信息正确生成 URL。

# c# - 不使用表单身份验证的身份验证

> ID：11473166
> 
> 赞同：2
> 
> 时间：2012-07-13T15:06:06.907
> 
> 标签：c#, asp.net, security, authentication

我正在创建一个我希望用户注册的个人网站。我一直在查找需要采取的各种安全措施，并且很好奇我需要注意哪些主要事项。我决定不使用 ASP.NET Forms 身份验证，主要是为了自己创建身份验证过程的乐趣。这是我到目前为止所做的：

*   我有一个 MySQL 数据库，我在其中存储用户的登录信息，例如他们的密码和盐的哈希值
*   登录后，设置一个等于他们用户名的会话——这让我想到了一个问题：这是在不使用表单身份验证的情况下跟踪登录用户的最佳方式吗？例如，设置会话是这样的：

    `Session["User"] = username;`

有没有更好的方法来跟踪登录用户？或者这是一种可以接受但仍然安全的处理方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:43:55.837

> 有没有更好的方法来跟踪登录用户？

Microsoft 将表单身份验证设计为使用加密的 cookie，以及使用查询字符串的无 cookie 回退。所以他们显然认为这是比使用`Session`.

一个优点是，如果用户的 Session 丢失（超时，但如果在使用 InProc Session 时回收应用程序 - 这是默认设置），用户不会自动注销。

如果您真的想“自己动手”，我建议您考虑：

1.  编写一个自定义 MembershipProvider，它将与 FormsAuthentication 基础设施一起使用，但使您能够了解有关实现细节的一些信息。

2.  或者研究 FormsAuthentication 设计，并尝试复制其中的大部分（例如：您可能会忽略对无 cookie 身份验证的支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:20:40.017

在我看来，更好的方法是将用户信息保存在加密的 cookie 中，这样您的服务器就不需要跟踪会话中的每个用户。而且它比会话更可靠。您可以做的是仅使用从 FormsAuthentication 创建安全身份验证 cookie 的机制，并使用您自己的授权。

```
public void OnLoginClick(object sender, EventArgs e)
{
   if(MySqlValidUser(username, pass)) // this is where you would check if user is valid
   {
      FormsAuthentication.SetAuthCookie(username, null);
      Response.Redirect("/");
   }
} 
```

这样，如果您启用了表单身份验证，您可以轻松访问您的 asp.net 页面上的 User.Identity.Name 或 User.IsAuthenticated

```
<authentication mode="Forms" /> 
```

# windows - 如何将输入参数跟踪到 .exe？

> ID：11473171
> 
> 赞同：0
> 
> 时间：2012-07-13T15:06:38.340
> 
> 标签：windows, iis, asp-classic, exe, trace

我有一个将输入参数发送到另一个应用程序可执行文件的应用程序（IIS ASP）。

我将如何查找（在跟踪中）从其他应用程序传递给它的可执行输入参数？

ps 我没有可用于 asp 和 .exe 的源代码 yip 这是一个企业开发人员处理 Oracle 解决方案的有趣的黑匣子世界......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:12:58.787

您能否只创建一个与将其参数写入磁盘的 .exe 同名的基本控制台应用程序？

因此，您的 IIS 应用程序改为调用此应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:59:59.623

[进程资源管理器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)显示所有正在运行的进程的命令行参数

# c++ - 在 Code::Blocks 中编译 magick++ 的东西

> ID：11473172
> 
> 赞同：0
> 
> 时间：2012-07-13T15:06:39.483
> 
> 标签：c++, imagemagick, codeblocks, magick++

我正在用 magick++ 做一些实验，当我编译我的片段时，我只使用 g++ 和类型`g++ test.cpp `Magick++-config --cppflags --cxxflags --ldflags --libs` -o prog`，但我最近爱上了 Code:Blocks，我想知道如何告诉它像上面那样编译？我自己无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:31:21.433

从菜单打开→项目→构建选项导航到→编译器设置→其他选项并输入：

```
$\(Magick++-config --cppflags --cxxflags\) 
```

导航到→链接器设置并进入→其他链接器选项：

```
$\(Magick++-config --ldflags --libs\) 
```

逃避是必要的`\(`。`\)`请记住选择左侧的项目，而不是构建目标。

# android - GIT：两个不同的存储库和一个共享文件夹

> ID：11473176
> 
> 赞同：5
> 
> 时间：2012-07-13T15:06:48.357
> 
> 标签：android, ios, git, cordova, repository

我目前正在创建一个移动应用程序，并使用 Phonegap 将其部署到不同的平台。我们目前已经为 Android 平台和 iOS 平台创建了应用程序。Android 有一个 git 存储库，iOS 没有（还）。两个应用程序版本都有一个非常相似的 www 文件夹（只有 phonegap.js 和插件文件不同）。我希望为 iOS 创建一个辅助 GIT 存储库，它与原始存储库 (Android) 共享 www 文件夹，因此我不必每次都复制粘贴文件。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:47:37.817

除了[git submodule](http://git-scm.com/book/en/Git-Tools-Submodules)，你也可以试试[git-subtree](https://github.com/apenwarr/git-subtree)。您还可以检查[使用 git subtree 在项目之间共享代码](http://psionides.eu/2010/02/04/sharing-code-between-projects-with-git-subtree/)

# javascript - 如何将链接添加到部分谷歌饼图

> ID：11473177
> 
> 赞同：1
> 
> 时间：2012-07-13T15:06:51.297
> 
> 标签：javascript, jquery, jquery-ui, google-visualization

我的问题可能有点混乱，所以我会解释一下。

我使用[Google Charts](https://google-developers.appspot.com/chart/interactive/docs/quick_start)制作了一个简单的饼图。它工作得很好。我需要知道的是能够链接饼图的所有部分/部分以显示 jquery 模式/对话框弹出窗口。

我搜索了很长时间，但仍然找不到任何接近的东西。

感谢大家的阅读，希望有人可以帮助我:)

这是我的代码来显示我的图表

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1.0', {'packages':['corechart']});
  google.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Clan');
    data.addColumn('number', 'Vampire');
    data.addRows([
    <? foreach($this->toDisplay as $oClan) 
        {
            echo "['".$oClan->getName()."', ".count($oClan->getMembers()).']';
            echo ", ";
        } ?>
    ]);
    var options = {'title':'Effectif des clans',
                   'width':600,
                   'height':600};
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>
<body>
<div id="chart_div"></div>
</body> 
```

这里的代码与监听器做我想要的:)

```
<html>
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript"> 
  google.load('visualization', '1.0', {'packages':['corechart']});
  google.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Clan');
    data.addColumn('number', 'Vampire');
    data.addRows([
    <? foreach($this->toDisplay as $oClan) 
        {
            echo "['".$oClan->getName()."', ".count($oClan->getMembers()).']';
            echo ", ";
        } ?>
    ]);
    var options = {'title':'Effectif des clans',
                   'width':600,
                   'height':600};
    var chart = new      google.visualization.PieChart(document.getElementById('chart_div'));

    function selectHandler() {
      var selectedItem = chart.getSelection()[0];
      if (selectedItem) {
        var topping = data.getValue(selectedItem.row, 0);
        alert('The user selected ' + topping);
      }
    }

    google.visualization.events.addListener(chart, 'select', selectHandler);            
    chart.draw(data, options);

  }
</script>
</head>

<body>
<div id="chart_div"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:51:36.867

看看[select](https://developers.google.com/chart/interactive/docs/gallery/piechart#Events)事件；您可以设置自己的侦听器以对饼图切片中的点击做出反应（icCube 在[此处](http://demo3.iccube.com/icCube/doc/tutorial/ic3report-tutorial.html?ic3demo&ic3reportName=Overview)有一个示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:51:11.123

这是一个困难的问题，这不是一个完整的回答，而是关于如何解决这个问题的提示。

在这种情况下，有3种情况：

1.  ***API中有一种方法可以做到这一点。***我想情况并非如此，因为您必须仔细阅读文档，如果有办法通过 API 做到这一点，那么有人已经回答了这个问题 ;=)
2.  ***该库的实现提供了扩展挂钩。***您应该查看源代码，看看是否可以扩展饼图以创建自己的饼图并在每个饼图中添加一个链接。很有可能这是可能的，但要掌握他们的设计、代码和技术环境来做到这一点可能会很费力。*无论如何，如果您有时间，您应该真正尝试一下，这样做可以学到很多东西，并且这样做会增加您作为开发人员的价值。*
3.  ***上帝，如果你存在，请原谅我写了这篇文章。***如果您无法对其进行编码或挂钩，请破解它。您可以使用 insepctor 研究渲染后生成的 SVG 的结构，并构建一个漂亮的 jQuery 选择器并修补 svg。

    ```
    $mySvgElement.find("g")
        .get(indexComputedFromRetroengineering)
        .whatEverMakesYourPieSliceALink()
    ; 
    ```

第三种方法有很多缺点，包括以下（但不仅限于）：

*   您必须检查每个目标平台以查看您的 hack 是否有效，因为生成的 SVG 可能与解决平台特定问题不同。它甚至可以是 VML 或 Canvas（我不知道 Google Chart 对此有何看法，但许多图表库会根据上下文切换渲染技术）
*   如果升级库，您可能必须重写部分 hack，因为它们可以更改生成的 SVG 的结构。
*   有人必须在您的代码上工作的那一天，他/她会讨厌您。即使他们只知道你在这样做，他们也会恨你。
*   你会下地狱的。

但在某些情况下，它可能是唯一的方法。这取决于您想要多少，以及是否知道缺点和隐藏成本，您是否准备好为此付出代价。

# delphi - 重新排序 ADO 记录集列

> ID：11473180
> 
> 赞同：0
> 
> 时间：2012-07-13T15:06:56.743
> 
> 标签：delphi, ado, recordset

我有一个包含列 ej 的记录集

```
ID_PEOPLE

NAME

AGE 
```

我需要重新排序这些列

```
ID_PEOPLE

AGE

NAME 
```

此记录集用于填充 Excel 电子表格，并且需要更改记录集列顺序，因为在 Excel 中重新排序很慢。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:26:20.833

右键单击您的表/查询，选择字段编辑器。

如果没有字段，请按 CTRL+F。

根据需要拖动鼠标字段更改顺序。

或者，如果您有查询，您可以更改选择字段顺序：从表中选择 Field2、Field1。

或者您可以在您的表格/视图/程序中重新设计字段顺序。

# android - 你可以在安卓上使用 GSUtil 吗？

> ID：11473184
> 
> 赞同：0
> 
> 时间：2012-07-13T15:07:18.110
> 
> 标签：android, python, google-cloud-storage

是否可以在 android 上使用 Google Cloud Storage 实用程序 gsutil？要求是linux操作系统和python，所以理论上是可以的。我不知道适用于 android 的完整 python 端口，并且发现[了这篇关于 python on android 的帖子](https://stackoverflow.com/questions/101754/is-there-any-way-to-run-python-on-android)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:03:46.690

我想说的是，即使你能奇迹般地让它工作，它也比仅仅使用 Cloud Storage API 和[它的客户端库](https://code.google.com/p/google-api-java-client/wiki/APIs#Cloud_Storage_API)更难，也更容易损坏。

该 API 目前处于有限可用性状态，但您可以通过[Google API 控制台](https://code.google.com/apis/console)请求访问。

# ios - 多个 UIView 的重叠

> ID：11473189
> 
> 赞同：2
> 
> 时间：2012-07-13T15:07:23.613
> 
> 标签：ios, uiview, overlap, subviews

我正在自定义`UIView's`中创建多个自定义`UIView`。自定义子视图的创建是好的。它们看起来像这样：

![在此处输入图像描述](../Images/4650ec205741893c742e3df65877481a.png)

draw 方法非常简单：

```
[[UIColor brownColor] set];

CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(ctx,
                      5.0f);
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, 0.0f, 0.0f);
CGContextAddLineToPoint(ctx, 100.0f, 0.0);
CGContextAddLineToPoint(ctx, 130.0f, 25.0f);
CGContextAddLineToPoint(ctx, 100.0f, 50.0f);
CGContextAddLineToPoint(ctx, 0.0f, 50.0f);
CGContextClosePath(ctx);
CGContextStrokePath(ctx);
[super drawRect:rect]; 
```

将其添加到超级视图中也很简单：

```
 ITContextFigure *view = [[ITContextFigure alloc] initWithFrame:CGRectMake(location.x, location.y, 135.0f, 50.0f)];
    [view setBackgroundColor:[UIColor yellowColor]];
    [self addSubview:view]; 
```

所以我的问题是：

**1）如何检测一个与另一个重叠的时间？**

我看到了这个解决方案：

```
if (CGRectContainsRect([myImageView1 frame], [myImageView2 frame])) {
        NSLog(@"Overlaped, it's working!");
} 
```

但是，如果我有多个`UIViews`，则`for`在 the 上执行`super view`并检查每个子视图对我来说似乎不是一个好的解决方案。

**2）在这种情况下，可以做什么？**

![在此处输入图像描述](../Images/7cb991df6f45656ede6b57c194f818eb.png)

**我的主要目标**是检测何时发生这种情况：

![在此处输入图像描述](../Images/77c0a4e2759e59b4c94c0808deda4146.png)

* * *

**更新 1.0**

将尝试[这里](https://stackoverflow.com/questions/7361750/detecting-if-uiview-is-intersecting-other-uiviews)展示的内容，因为没有更优雅的方式。如果我能够实现它，我会将代码发布到 Github 上，如果有人需要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T23:49:15.217

您可以通过巧妙地对数据进行排序（这些称为扫描线或渗线算法）来显着减少需要进行的碰撞检测的数量。下面概述了如何将这种技术应用于您的情况。

将您的子视图排序为按 y 升序排列的数组。如果两个子视图共享相同的 y，则按升序排列它们。这是您的非活动列表，它构成了算法的主要输入。

该算法如下进行。

1.  当有非活动子视图时，选择一个`active_y`. 这是非活动列表上第一个子视图的 y 坐标。

2.  将所有具有原点的子视图移动`active_y`到工作列表中，按 x 升序排序。这是活动列表。

3.  运行活动列表碰撞测试每个子视图与列表中的后续子视图。您可以使用列表中的两个索引来执行此操作（我们称它们为`left`和`right`）。一旦你看到一个`right`不能与你相交的子视图，`left`你就可以推进`left`索引。

4.  在进行碰撞检测时，您还可以检查子视图现在是否完全位于`active_y`. 一旦出现，您应该将其从活动列表中删除。

当非活动列表上的所有子视图都已被消耗并且通过活动列表的最终运行完成时，该算法完成。

该算法大大减少了您需要执行的碰撞​​检测次数，大约为 O(n log n)，但它也可以简化碰撞检测本身。

由于活动列表是从左到右排序的，因此您在执行检测例程时始终知道哪个在左侧，哪个在右侧。因此，例如，在比较示例中的箭头形状时，您只需检查右侧形状的最左侧两个顶点是否落在左侧形状内。你可能会觉得`CGPathContainsPoint`有用。

如果您正在处理的不同形状的数量增加，那么您可能需要考虑将碰撞检测推入扫描线算法本身。这有点棘手，但基本上不是保存子视图指针的列表，而是保存构成形状的线段（不包括水平线段）。

# javascript - 服务器控件中 JavaScript 函数的范围

> ID：11473195
> 
> 赞同：1
> 
> 时间：2012-07-13T15:07:40.693
> 
> 标签：javascript, asp.net, custom-server-controls, servercontrols

由于我在使用用户控件时遇到的问题，我决定学习如何创建服务器控件。我希望能够为我的用户控件创建 JavaScript 函数，这样我就可以调用 userControl1.clientSideFunction(); 您实际上无法使用用户控件执行此操作，因为该函数只会作为 clientSideFunction(); 放入页面中；而实际上并没有附加到用户控件。有一些方法可以使用用户控件来完成此操作，但它并非旨在允许它。据我了解，服务器控件旨在实现这一点。我找不到太多关于它的信息，有人知道怎么做吗？这是我的控制的基本轮廓。

```
namespace ServerControl1
{
    public class Class1 : CompositeControl
    {
        private DevExpress.Web.ASPxEditors.ASPxButton btnTest;
        private DevExpress.Web.ASPxPopupControl.ASPxPopupControl popupTest;

        protected override void Render(HtmlTextWriter writer)
        {
            writer.Write("<h1>This is my control</h1>");      
        }

        protected override void CreateChildControls()
        {
            btnTest = new DevExpress.Web.ASPxEditors.ASPxButton();
            btnTest.Text = "wazzzup"; 

            popupTest = new DevExpress.Web.ASPxPopupControl.ASPxPopupControl();
            popupTest.Width = Unit.Pixel(500);
            popupTest.Height = Unit.Pixel(500);
            popupTest.Controls.Add(btnTest);
            popupTest.ShowOnPageLoad = true;
            Controls.Add(popupTest);                       
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:02:25.077

也许这会有所帮助：

[http://weblogs.asp.net/dwahlin/archive/2007/04/29/creating-custom-asp-net-server-controls-with-embedded-javascript.aspx](http://weblogs.asp.net/dwahlin/archive/2007/04/29/creating-custom-asp-net-server-controls-with-embedded-javascript.aspx)

编辑：

您将需要创建具有您需要/想要的属性和功能的控件的客户端版本（嵌入式 javascript 类）。客户端 javascript 类可能应该有一组对子控件的引用，以便于访问。它还应该存储对客户端控件本身的引用。一种方法是创建客户端类的新实例，并引用控件和子控件列表作为参数。上面的链接将向您展示如何嵌入 javascript 类。

# ruby-on-rails - Rails 表单创建空对象 - 嵌套资源

> ID：11473201
> 
> 赞同：1
> 
> 时间：2012-07-13T15:08:01.047
> 
> 标签：ruby-on-rails, ruby, forms, messaging

查看了许多资源，似乎无法弄清楚这一点。

我正在开发一个基于 BinaryMuse 代码的消息传递系统：

[https://github.com/BinaryMuse/so_association_expirement/compare/53f2263...master](https://github.com/BinaryMuse/so_association_expirement/compare/53f2263...master)

它没有响应功能，所以我正在尝试构建它。

我将以下代码添加到 UserConversations 控制器：

```
def update
    @user = User.find params[:user_id]
    @conversation = UserConversation.find params[:id]
    @conversation.user = current_user
    @message = @conversation.messages.build
    @message.conversation_id = @conversation
    @message.save
    redirect_to user_conversation_path(current_user, @conversation)
end 
```

以下是 UserConversations#show 视图：

```
<%= form_for(@conversation) do |f| %>
<%= f.fields_for :messages do |m| %>
    <div>
        <%= m.label :body %><br />
        <%= m.text_area :body %>
    </div>
<% end %>
<%= f.submit %> 
```

有了我所拥有的，就会创建一条具有正确会话 ID 的新消息。但是，它没有附加正文或 user_id。

任何想法我做错了什么？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:31:12.897

BinaryMuse（我正在使用的原始代码的创建者）非常棒，可以查看他的旧代码并添加一些内容来覆盖回复。那有多棒？这是他的东西的链接：

[带回复的消息系统](https://gist.github.com/6b8a9a9c6a75dd3eabc0)

PS也感谢帕特里克，我非常感谢你的洞察力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:21:24.840

这些行使用正确的 conversation_id 创建您的新消息。您的问题源于不涉及表单中传入的参数。

```
@message = @conversation.messages.build
@message.conversation_id = @conversation
@message.save 
```

理想情况下，您会想做类似的事情

```
def update
    @user = User.find params[:user_id]
    @conversation = UserConversation.find params[:id]
    @conversation.user = current_user
    if @conversation.update_attributes(params[:conversation])
        redirect_to user_conversation_path(current_user, @conversation)
    else 
        render(:action=>'edit')
    end
end 
```

让 update_attributes 处理更新“消息”。确保您已`accepts_nested_attributes_for`在`Conversation`模型中指定。

有关更多信息，我会看看

*   [Active Record 嵌套属性 (RailsDoc)](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

*   [多模型表单（导轨）](http://guides.rubyonrails.org/getting_started.html#building-a-multi-model-form)

# php - MailChimp：通过 API 向活动发送合并标签

> ID：11473202
> 
> 赞同：0
> 
> 时间：2012-07-13T15:08:02.323
> 
> 标签：php, mailchimp

我正在使用 MailChimp PHP API 和 oAuth2 连接到 MailChimp 并创建一个活动。除了我必须放在 . 例如，

```
<a href="*|FORWARD|*">forward</a> 
```

变成

```
<a href="/*|FORWARD|*">forward</a> 
```

当它到达 MailChimp 时。然后，当通过电子邮件发送时，它会删除整个内容。

```
<a>forward</a> 
```

我搞砸了一些事情，但似乎没有任何影响。我不知道是我，还是mailchimp，还是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:01:37.253

通过不将mergetag放在引号内来解决它

```
<a href=*|forward|*>Forward</a> 
```

# c# - 插入没有重复的mysql没有唯一键

> ID：11473205
> 
> 赞同：0
> 
> 时间：2012-07-13T15:08:17.093
> 
> 标签：c#, mysql

我有一个程序正在读取信用卡对帐单，我需要它来将其插入表中。我遇到的问题是，当我只使用 insert 时，它会让用户一遍又一遍地插入相同的信息。但是我真的不能将任何列设置为唯一，因为所有字段中都可能存在重复项。我拥有的字段是 DATE | 说明 | 金额
因此用户可以在同一日期在同一地点以相同的金额使用该卡。这些是月度报表，所以除了在使用唯一键时插入忽略之外，还有其他方法吗？布伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:14:49.950

您必须澄清业务规则：要求某些内容是唯一的（单列或列组合）或允许相同的行。

如果相同的行有效，即用户在同一日期，在同一地点以相同金额使用该卡两次，则您不能要求数据是唯一的。

如果已经存在相同的行，您可以做的是向用户添加警告（如果数据输入是交互式的）。如果您正在执行一些批量导入，如果所有（或至少一个连续的块）交易与已经存在的交易相同，您可能会发出警告。

# python - 关键字错误：使用 rpy2 在 geoR 中调用 as.geodata 函数

> ID：11473206
> 
> 赞同：0
> 
> 时间：2012-07-13T15:08:20.640
> 
> 标签：python, r, rpy2, geor

我正在`SyntaxError: keyword can't be an expression`编写我正在编写的脚本。

我在 Python 中使用`rpy2`（和 R 包`geoR`）来处理使用 R 的数据库函数从 PostgreSQL 数据库中检索的数据表。数据是具有坐标和 2 列数值数据的空间数据，将在地统计模型中使用。

数据库查询调用后，数据框对象 x 如下所示：

```
 easting northing location attrib1 attrib2    category
1  658394.3 204987.5       p1         4.91        26.17 soil
2  658657.1 205116.7       p2         4.85        27.43 soil
... 
```

我为 geoR 函数创建一个对象，如下所示：

从 rpy2.robjects.packages 导入 importr geo = importr('geoR')

调用 geoR 函数为

```
y=geo.as_geodata(x) 
```

有效，但没有参数 data.col，它将位置属性分配为数据属性。（坐标属性后的第一列是默认值。）

试：

```
y=geo.as_geodata(x,geo.data_col="4:5") 
```

产生：

```
SyntaxError: keyword can't be an expression 
```

我似乎无法绕过它。我在这里查看了一些帖子并在网上四处查看，但我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:55:55.347

Rpy2 是通往 Python 的桥梁，在必要时将 Python 类型映射到 R 类型。在这里，您传递了一个值为“4:5”的参数，即 Python `str`。该参数变为 R `character`（R 术语中的字符串向量）。

当您编写 R 函数调用时，例如`foo(bar = 4:5)`您正在编写的是 R 代码作为参数的值`bar`，该代码将被评估以提供实际参数。

我认为你想要的是：

```
from rpy2.robjects.vectors import IntVector
y=geo.as_geodata(x, data_col = IntVector((4,5))) 
```

或者

```
base = importr('base')
y=geo.as_geodata(x, data_col = base.c(4,5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:34:10.443

我认为错误是由于您尝试将两列传递给`data_col`命令。这是一个使用包中`meuse`数据集的工作示例`gstat`。

```
import rpy2.robjects as robjects
from rpy2.robjects.packages import importr 
geo = importr('geoR')
gstat= importr("gstat")
robjects.r("data(meuse)")
x = robjects.r("meuse")
y = geo.as_geodata(x,data_col=5,coords_col="1:2")
vario = geo.variog(y)
robjects.r.plot(vario) 
```

但是，您会注意到上述方法不起作用，因为`geoR`似乎没有得到`coords.col`or`data.col`参数。我不确定为什么会这样，但是解决这个问题的方法是编写一个包装函数。

```
robjects.r('''
geodata_python <- function(obj) {
        return(as.geodata(obj, data.col=5, coords.col=1:2))
}
''')
geodata_wrapper =  robjects.globalenv['geodata_python']
y = geodata_wrapper(x)
vario = geo.variog(y)
robjects.r.plot(vario) 
```

使用上述方法，您可以将附加参数传递给环境中`as.geodata`函数内的`geodata_python`函数`R`。

高温高压

# content-management-system - Django CMS 不在管理页面中，为什么？

> ID：11473210
> 
> 赞同：0
> 
> 时间：2012-07-13T15:08:23.170
> 
> 标签：content-management-system, django-admin

![在此处输入图像描述](../Images/9cee14a408dd9e3a8dbf5a5f42f04073.png)我遵循了本文档中的所有步骤：http: [//docs.django-cms.org/en/2.3/getting_started/tutorial.html#configuration-and-setup](http://docs.django-cms.org/en/2.3/getting_started/tutorial.html#configuration-and-setup)

一切正常，但在管理页面中我没有看到`cms`可以添加页面的块。我能错过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:40:12.760

我不知道你是否解决了这个问题，但我遇到了同样的问题：我输入了错误的 plugin_pool.register_plugin(MyPlugin)，这使得“CMS>Pages”部分在管理员中消失了。也许您的 cms_plugins.py 文件也有问题。当我尝试在模板中使用 {% extend some_variable %} 而不是 {% extend "base.html" %} 时，发生了类似的事情。我希望它有帮助

# gwt - 如何避免初始化继承模块的入口点

> ID：11473214
> 
> 赞同：1
> 
> 时间：2012-07-13T15:08:46.343
> 
> 标签：gwt

我有一个 GWT 模块，它定义了一个构建 UI 的入口点（我们称之为模块 A）。

我在另一个模块（比如模块 B）中继承模块 A，该模块通过自己的入口点构建自己的 UI，重用继承的模块 A 中定义的类。

我的问题是，当我初始化模块 B 时，模块 A 和 B 的入口点都被实例化并触发（通过 onModuleLoad 方法）。这会导致两个入口点依次修改相同的 UI，从而导致页面损坏。

所以，我想继承一个模块，但我不希望在应用程序初始化期间激活它的入口点。如何继承模块，但避免初始化其入口点类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:16:31.930

与其从 B 继承 A，并添加更多需要构建的入口点，不如考虑制作第三个模块。新的 Z 应该是 A 和 B 都需要的公共代码，并且不应该有入口点。这样，A 和 B 都可以从 Z 继承，并根据需要添加自己的入口点。

* * *

如果上面不能使用（例如，如果你不能编辑 A），另一种选择可能是在与 A 相同的包中添加一个新模块，将其命名为 A2，并为其赋予与 A 相同的内容，减去入口点。然后，B 可以改为从 A2 继承。

# c# - Twilio 语音转录替换

> ID：11473217
> 
> 赞同：4
> 
> 时间：2012-07-13T15:08:55.910
> 
> 标签：c#, sms, voice-recognition, twilio

我正在寻找使用[Twilio](http://www.twilio.com/)来

1.  接听电话
2.  转录声音
3.  用转录的录音给用户发短信

我有这个很好的设置，但是 Twilio 上的转录质量非常低。可能是它听不懂我的约克郡口音（毕竟它是一家加利福尼亚公司），但[其他人可能会用更清晰的声音抱怨](http://forum.twilio.com/twilio/topics/why_is_transcription_so_inaccurate_even_if_i_have_the_caller_spell_the_word_s?from_gsfn=true)它真的很糟糕。

我有一个想法，我可以换掉他们自己的转录服务并使用第三方。我认为我可以获取生成的 mp3 文件。所以我需要的是

1.  可通过网络服务或类似服务调用的第三方转录服务
2.  服务完成后生成回调
3.  该服务消耗 mp3 文件
4.  该服务实际上是合理地转录的。它不需要完美，因为文本会返回给用户进行更正，但它确实需要相当好。

有没有人有这样的经历？我不致力于 Twilio - 我仍处于概念验证阶段，因此一个完整的替代方案也会引起人们的兴趣。

这似乎是一个合理的事情。我有没有尝试过疯狂的事件？感谢所有回复。

只是为了完整性——我使用的是带有 Razor 引擎的 MVC 3 架构，但我认为这并不重要。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:47:10.607

这是提供转录的两个（我所知道的唯一）API。两者都提供机器和人工转录，具体取决于您的需求：

[VoiceCloud](http://www.voicecloud.com/features/api/)：您发布音频文件 (mp3/wav) 的链接，他们会在处理后将文本发送到回调 URL。机器转录为 0.10 美元/分钟，人工辅助转录为 0.009 美元/秒。我相信每月最低 250.00 美元仅适用于人工转录。

[QuickTate](http://quicktate.com/quicktate/api.php)：您通过 XML-RPC 提交音频文件或链接，QuickTate 将通过回调 URL 发送完成的转录。您还可以检查作业状态以获取部分转录。价格取决于预付款，他们也提供医疗质量。每个字大约 0.01 美元到 0.025 美元不等。

我都使用过，如果您需要高质量的转录，我的建议是 QuickTate（尽管 VoiceCloud 仍然会击败 Twilio 的原生转录的质量）。如果您有很多短文件，Quicktate 的成本可能会更低，因为 VoiceCloud（当我使用它时）的最低费用为 30 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:13:58.647

**谷歌语音！**

发送 mp3 会有点棘手，因为你必须实时播放它，但谷歌语音会自动转录语音邮件，我个人没有听到任何关于他们转录的负面评论。

我最近刚刚对我公司的 VoIP 和语音邮件解决方案进行了审查，而 Google Voice 是其中的重要组成部分。如果他们的转录有任何严重的问题，我可能会在搜索中偶然发现它们。

您还可以设置一个 Google Voice Lite 帐户，该帐户只是语音邮件而不是任何类型的电话附加功能。

# objective-c - 错误“解析问题：无法与以前的'类型名称'声明说明符结合”的真正含义是什么？

> ID：11473218
> 
> 赞同：1
> 
> 时间：2012-07-13T15:08:56.583
> 
> 标签：objective-c, xcode

我正在处理 Xcode 中的一个解析问题，它触发了一个失败的问题，而不是一个警告，并且关于此的信息很少或没有。它似乎与 LLVM 相关，但由于我不是编译器人员，所以存在的少量技术文档对我来说毫无意义，存在的非技术答案无助于解决这个问题。

我已经进入管理器并删除了该项目的派生数据，我确保设置了所有可以设置为目标应用程序的文件，清理了项目，搜索（无用）“类型名称”等。打开项目后仍然会立即出现此错误。当我今天将项目签出到一台新机器上时，这似乎已经开始，但直到我进行测试构建时我才注意到它。有任何想法吗？

我不仅在寻找一个让我度过一天的答案，我还在寻找对错误的解释，以便我将来避免它。[有一个“重复”的问题](https://stackoverflow.com/q/10419835/11976)，但没有有用的答案，也没有什么可以解释到底发生了什么

问题代码如下，错误标记在行上`@interface OCSystemReportParser ()`。

这是有问题的标题...

```
#import <Foundation/Foundation.h>

@interface OCSystemReportParser : NSObject

- (void) parseSystemReports:(NSArray *)systemReports;

@end 
```

...以及有问题的实施...

```
#import "OCSystemReportParser.h"

/*
 System Report Keys
 */
NSString* const OCKeyApplications = @"Applications";
NSString* const OCKeyHardware = @"Hardware";
NSString* const OCKeyMemory = @"Memory";
NSString* const OCKeySoftware = @"Software";

/*
 Parsed Data Keys
 */

const NSString 

@interface OCSystemReportParser () // ERROR IS FLAGGED HERE

// keywords whose data we need
@property (strong, readwrite, nonatomic) NSArray *actionableKeywords;
// lines for the current report
@property (strong, readwrite, nonatomic) NSArray *reportSource;
// key-value pairs for the information in the system report
@property (strong, readwrite, nonatomic) NSMutableDictionary *parsedData;
// completed dictionaries of parsed reports
@property (strong, readwrite, nonatomic) NSMutableArray *completedReports;

@end

@implementation OCSystemReportParser

@synthesize actionableKeywords = _actionableKeywords;
@synthesize reportSource = _reportSource;
@synthesize parsedData = _parsedData;
@synthesize completedReports = _completedReports;

#pragma mark -
#pragma mark Object Lifecycle Stack
#pragma mark -

#pragma mark -
#pragma mark File Input Stack
#pragma mark -

/*
 Kicks off the process of data collection. This is the only public method.
 */
- (void) parseSystemReports:(NSArray *)systemReports {
    //NSLog(@"OCSystemReportParser:parseSystemReports:%@", systemReports);

    for ( NSString *path in systemReports ) {

        // reset the dictionary
        self.parsedData = [NSMutableDictionary dictionary];

        // generate and parse the source data
        self.reportSource = [self createArrayWithReport:[self readReport:path]];
        //[self parseReport];

        // save the results
        [self.completedReports addObject:self.parsedData];
    }

    [self outputCompletedReports];

}

/* 
 returns a string of the content of the report file
 */
- (NSString *) readReport:(NSString *)path {
    //NSLog(@"OCSystemReportParser:readReport:%@", path);
    return nil;
}

/*
 returns an array containing the report data clean of empty lines and whitespace
 */
- (NSArray *) createArrayWithReport:(NSString *)reportData {
    //NSLog(@"OCSystemReportParser:createArrayWithReport:");
    return nil;
}

#pragma mark -
#pragma mark Housekeeping Stack
#pragma mark -

/*
 Handles the initialization and population of helper data
 */

- (void) initializeKeyValues {
    //NSLog(@"OCSystemReportParser:initializeKeyValues:");
    self.actionableKeywords = [NSArray arrayWithObjects:OCKeyApplications, OCKeyHardware, OCKeyMemory, OCKeySoftware, nil];
}

#pragma mark -
#pragma mark Data Parsing Stack
#pragma mark -

/*
 Kicks off the parsing of the strings in the report array
 */
- (void) parseReport {
    //NSLog(@"OCSystemReportParser:parseReport:");

}

/*
 Gets the computer type and user name from the header of the report
 */
- (void) parseUserInformation {
    //NSLog(@"OCSystemReportParser:parseUserInformation:");
    // information is in line 1
    // ComputerModel Firstname Lastname
}

#pragma mark -
#pragma mark File Output Stack
#pragma mark -

/*
 Kicks off the output process starting with the completed reports
 */
- (void) outputCompletedReports {
    //NSLog(@"OCSystemReportParser:outputCompletedReports:");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:16:19.870

```
const NSString 

@interface OCSystemReportParser () // ERROR IS FLAGGED HERE 
```

问题是那`const NSString`句话。它是无效的，或者以分号结尾，所以编译器说它不能与有意义的东西结合`@interface`起来`const NSString`。

# ruby-on-rails - Rails 导入 CSV - 无路线匹配

> ID：11473219
> 
> 赞同：0
> 
> 时间：2012-07-13T15:08:57.457
> 
> 标签：ruby-on-rails, csv, methods, import

我对 Rails 很陌生。我目前正在尝试将数据从 csv 文件导入到我的 rails 应用程序中。但是，当我在网上按照示例和指南进行操作时，我得到了错误：***没有路由匹配 {:action=>"import_csv", :controller=>"lists"}***我已经将它添加到我的 routes.rb 中。如果我的代码导致“无路由匹配”错误，谁能帮我检查一下出了什么问题？以下是我的文件：

### 列表控制器.rb

```
def import_csv

require 'fastercsv' 

respond_to do |format|
@csv=params[:file].read
@n=0
@parsed_file = CSV.parse(csv)
@parsed_file.each  do |row|
  @user_new = User.new
  @user_new.first_name = row[0]
  @user_new.last_name = row[1]
  @user_new.email = row[2]
  @user_new.address = row[3]
  @user_new.city = row[4]
  @user_new.state = row[5]
  @user_new.zip = row[6]
  @user_new.country = row[7]
  @user_new.notes = row[8]
  @user_new.birthday = row[9]
  @user_new.home_number = row[10]
  @user_new.mobile_number = row[11]
  @user_new.list_id = list_id
  @user_new.save
  @n=@n+1
  GC.start if n%50==0
    flash[:notice] = "CSV Imported Successfully, with  #{n} records"                                
end

format.html { redirect_to lists_url }
  format.json { head :no_content }
end
  end 
```

### 应用程序/视图/列表/show.html.erb

```
<%= form_for(:list, :url => list_import_csv_path,  :html => {:multipart => true}) do |f| %>
 <table>
    <tr>
        <td><label for="dump_file">Select a CSV File :</label></td>
        <td ><%= file_field_tag :file %></td>
    </tr>
    <tr>
        <td colspan='2'><%= submit_tag 'Submit' %></td>
    </tr>
</table>
<% end %> 
```

### 路线.rb

```
 resources :lists do
    get 'import_csv'
    #match '/import_csv/:id' => 'lists#import_csv', :as => :import_csv
  end 
```

### 耙路线

```
 identities GET    /identities(.:format)                        identities#index
                  POST   /identities(.:format)                        identities#create
     new_identity GET    /identities/new(.:format)                    identities#new
    edit_identity GET    /identities/:id/edit(.:format)               identities#edit
         identity GET    /identities/:id(.:format)                    identities#show
                  PUT    /identities/:id(.:format)                    identities#update
                  DELETE /identities/:id(.:format)                    identities#destroy
newsletter_cancel GET    /newsletters/:newsletter_id/cancel(.:format) newsletters#cancel
      newsletters GET    /newsletters(.:format)                       newsletters#index
                  POST   /newsletters(.:format)                       newsletters#create
   new_newsletter GET    /newsletters/new(.:format)                   newsletters#new
  edit_newsletter GET    /newsletters/:id/edit(.:format)              newsletters#edit
       newsletter GET    /newsletters/:id(.:format)                   newsletters#show
                  PUT    /newsletters/:id(.:format)                   newsletters#update
                  DELETE /newsletters/:id(.:format)                   newsletters#destroy
  list_import_csv GET    /lists/:list_id/import_csv(.:format)         lists#import_csv
            lists GET    /lists(.:format)                             lists#index
                  POST   /lists(.:format)                             lists#create
         new_list GET    /lists/new(.:format)                         lists#new
        edit_list GET    /lists/:id/edit(.:format)                    lists#edit
             list GET    /lists/:id(.:format)                         lists#show
                  PUT    /lists/:id(.:format)                         lists#update
                  DELETE /lists/:id(.:format)                         lists#destroy
            users GET    /users(.:format)                             users#index
                  POST   /users(.:format)                             users#create
         new_user GET    /users/new(.:format)                         users#new
        edit_user GET    /users/:id/edit(.:format)                    users#edit
             user GET    /users/:id(.:format)                         users#show
                  PUT    /users/:id(.:format)                         users#update
                  DELETE /users/:id(.:format)                         users#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:13:13.483

在`post`你`get`的`config/routes.rb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:16:43.147

您的表单是通过 POST 提交的，而路由是针对 GET 的。要么传递`:method => :get`给`form_for`助手，要么改变你的路线`post`（我更喜欢前者，因为你正在请求数据，而不是改变服务器上的任何东西）。

要为表单指定 GET 方法，您可以这样做

```
<%= form_for (:list, :url => list_import_csv_path, :method => :get, :html => {:multipart => true}) do |f| %> 
```

我也不确定强制启动垃圾收集是否是个好主意 - 如果它在处理请求时启动，它会降低你的性能。剩余的对象应该自动收集垃圾。

我还将提取 User 导出部分（可能到 上的静态方法中`User model`）：

```
require 'faster_csv'

class User < ActiveRecord::Base
  ...
  def self.import_from_csv(file)
    CSV.parse(file).each do |row|
      u = User.new(:first_name => row[0], :last_name => row[1] ...etc)
      return false if !u.save
    end
  end
end 
```

然后，在控制器中：

```
def import_csv
  respond_to do |format|
    if !User.import_from_csv(params[:file])
      format.html { render :show, :error => "Some error here" }
      format.json { render :json => "Some error here", :status => :unprocessable_entity }
    else
      format.html { redirect_to lists_url, :notice => "Import successful!" }
      format.json { :head => :ok }
    end
  end  
end 
```

# c# - 更改禁用组合框和复选框的背景颜色

> ID：11473223
> 
> 赞同：0
> 
> 时间：2012-07-13T15:09:13.393
> 
> 标签：c#, visual-studio-2008

我正在设置一个 Windows 窗体应用程序，我正在创建一个只读版本的表单和另一个版本的相同表单，用于添加/修改信息。在只读版本中，我正在设置表单，以便所有表单组件都是只读的。默认情况下，在 Visual Studio 2008 中，禁用表单组件时，该组件的 BackColor 属性将更改为灰色（ish）颜色。这可以通过在组件被禁用后设置组件的 BackColor 属性来简单地纠正；但是，对于 ComboBox 或 CheckBox，情况并非如此。一旦这些组件被禁用，我就无法修改它们的颜色。有谁知道在这些组件被禁用后如何更改它们的颜色？我尝试了以下代码，但无济于事。

```
comboBoxCategory.Enabled = false;
comboBoxCategory.BackColor = Color.White; 
```

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:30:18.847

我想这就是你要找的：

```
 comboBoxCategory.BackColor = System.Drawing.Color.White; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:19:23.327

在通过代码禁用它们后立即更改组合框和复选框的背景颜色

它们不是在这些控件被禁用或启用时触发的事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:15:07.727

你不能。

对于复选框，只需处理 OnCheck 事件并撤消它。

组合框最简单的解决方案是仅填充一项。如果用户单击，则让用户下拉，但不会有任何更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:15:09.110

我不相信你可以用这些开箱即用的控件来做到这一点。您可能必须扩展组合框并覆盖 OnPaint() 方法。

您还可以启用组合框，存储选定的值（当更改为只读模式时）并使用 SelectedIndexChanged 事件来维护选择。

我相信复选框也需要做同样的事情，但使用 CheckChanged 事件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-19T20:22:12.120

我在 VB 中制作的这段代码可以帮助您解决问题。将此代码放入您的表单中，将 comboBox1 更改为您的控件名称，将颜色更改为您喜欢的任何颜色 **.BackColor = Color.White**

```
Dim lbl_Box As Label
Private Sub Disable_control()

    If ComboBox1.Enabled = True Then
        lbl_Box = New Label
        With lbl_Box
            .Name = "lbl_Box"
            .BackColor = Color.White
            .Top = ComboBox1.Top + 1
            .Left = ComboBox1.Left
            .Width = ComboBox1.Width - 21
            .Text = ComboBox1.Text
            .Font = ComboBox1.Font
            .Padding = New Padding(0, 2, 0, 0)
        End With
        Me.Controls.Add(lbl_Box)
        ComboBox1.Enabled = False
        lbl_Box.BringToFront()
    Else
        lbl_Box.Dispose()
        Me.Controls.Remove(lbl_Box)
        ComboBox1.Enabled = True
    End If
End Sub 
```

*您可以将带有一些更改的代码放入**ComboBox1_EnabledChanged**事件中，而不是根据需要调用该过程。*

# css - 使用 Phonegap 在 iOS 模拟器上进行分辨率检测

> ID：11473225
> 
> 赞同：1
> 
> 时间：2012-07-13T15:09:17.443
> 
> 标签：css, ios, cordova, xcode4, ios-simulator

我在这个开发领域很新，我正在尝试使用 Phonegap 来制作 iOS 应用程序。我为不同的分辨率创建了四个不同的 CSS 文件。

```
<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="css/ipad.css" type="text/css" />
<link rel="stylesheet" media="only screen and (max-device-width: 2048px)" href="css/ipad-retina.css" type="text/css" />
<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="css/iphone.css" type="text/css" />
<link rel="stylesheet" media="only screen and (max-device-width: 960px)" href="css/iphone-retina.css" type="text/css" /> 
```

我发现模拟器总是加载相同的 CSS 文件，即使我更换了设备。有没有办法让它正确加载css文件？

谢谢大家，顺便说一句，我的 CSS 调用正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:31:23.043

这是实现您所追求的目标的一种方法。包括每个部分所需的特定 CSS。

```
/* Non-Retina */
    @media screen and (-webkit-max-device-pixel-ratio: 1) {
    }

    /* Retina */
    @media only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (-o-min-device-pixel-ratio: 3/2),
    only screen and (min--moz-device-pixel-ratio: 1.5),
    only screen and (min-device-pixel-ratio: 1.5) {
    }

    /* iPhone Portrait */
    @media screen and (max-device-width: 480px) and (orientation:portrait) {
    } 

    /* iPhone Landscape */
    @media screen and (max-device-width: 480px) and (orientation:landscape) {
    }

    /* iPad Portrait */
    @media screen and (min-device-width: 481px) and (orientation:portrait) {
    }

    /* iPad Landscape */
    @media screen and (min-device-width: 481px) and (orientation:landscape) {
    } 
```

# asp.net - 如何在行命令事件中从 gridview 中删除行？

> ID：11473226
> 
> 赞同：0
> 
> 时间：2012-07-13T15:09:20.730
> 
> 标签：asp.net, gridview, aspxgridview

我试图通过单击放置在gridview 内的ImageButton 从gridview 中删除行。我正在获取行索引，但不知道如何删除。我的 gridview 从会话绑定，我不想重新绑定 gridview。

这是我的代码：

```
protected void GVDetail_RowCommand(object sender, GridViewCommandEventArgs e)
  {
    if (e.CommandName.Equals("Remove"))
    {
      List<Class1> list = (List<Class1>)Session["value1"];
      int index = Convert.ToInt32(e.CommandArgument);
      GridViewRow gridRow = gvDetail.Rows[index];// (GridViewRow)(((ImageButton)e.CommandSource).NamingContainer);

      ((List<Class1>)Session["value1"]).RemoveAt(index);
    }
  } 
```

如果有人对此有任何想法，请帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:17:04.557

使用 gridview deleterow 方法。

```
void GVDetail_RowCommand_RowCommand(Object sender, GridViewCommandEventArgs e)
{
if(e.CommandName=="Remove")
{
     var id = Int32.Parse(e.CommandArgument);
     GVDetail.DeleteRow(id);

 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T07:11:54.047

```
protected void GVPurchaseOrderTax_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    try
    {
        if (dt.Rows.Count > 0)
        {
            dt.Rows[e.RowIndex].Delete();
            GVPurchaseOrderTax.DataSource = dt;
            GVPurchaseOrderTax.DataBind();
        }
    }
} 
```

# java - Google App 引擎：如何发送表单 POST？

> ID：11473228
> 
> 赞同：1
> 
> 时间：2012-07-13T15:09:36.410
> 
> 标签：java, html, google-app-engine

我有一个简单`Servlet`的发送电子邮件和一个`html-form`：

```
<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title>A form</title>
 </head>
 <body>
 <form action="feedback" method="post">

  <!-- Simple text field -->
 <label for="name">Name </label>
 <input type="text" name="name"/>
 <br/>

  <!-- Email -->
 <label for="email">Email </label>
 <input type="email" name="email"/>
 <br/>

  <!-- Textarea -->
 <label for="description">Description </label>
 <textarea  name="description" cols="50" rows="5">Type your comment here</textarea>
 <br/>

 <input type="submit" name="submit" value="Send Request"/>
 </form>
 </body>
</html> 
```

在 web.xml 文件夹中，我注册并映射了 servlet。但是当我按下发送按钮时，我得到：

HTTP 错误 404

访问/反馈时出现问题。原因：

```
NOT_FOUND 
```

我的问题还在哪里？

**--UPDATE--** http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee ">

```
<!-- Servlets -->
<servlet>
    <servlet-name>FeedbackServlet</servlet-name>
    <servlet-class>org.wunderapps.mailservice.server.FeedbackServlet</servlet-class>
</servlet>

<servlet>
    <servlet-name>TestAppServlet</servlet-name>
    <servlet-class>org.wunderapps.mailservice.server.TestAppServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>FeedbackServlet</servlet-name>
    <url-pattern>/wunderapps_mail_service/mail</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>TestAppServlet</servlet-name>
    <url-pattern>/wunderapps_mail_service/test</url-pattern>
</servlet-mapping>

<!-- Default page to serve -->
<welcome-file-list>
    <welcome-file>Wunderapps_mail_service.html</welcome-file>
</welcome-file-list> 
```

**小服务程序：**

```
package org.wunderapps.mailservice.server;

import java.io.IOException;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class FeedbackServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String name = req.getParameter("name");
        String description = req.getParameter("description");
        String email = req.getParameter("email");
        Properties props = new Properties();
        Session session = Session.getDefaultInstance(props, null);

        String msgBody = name  + " :Name" + "\n" + description + " :Description" + "\n" + email + " :EMAIL";

        try {
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress("apps@gmail.com",
                    "it works"));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress("testtesttest@gmail.com", "Your name"));
            msg.setSubject("Bestellung");
            msg.setText(msgBody);
            Transport.send(msg);

        } catch (Exception e) {
            resp.setContentType("text/plain");
            resp.getWriter().println("Something went wrong. Please try again.");
            throw new RuntimeException(e);
        }

        resp.setContentType("text/plain");
        resp.getWriter().println(
                "Thank you for your feedback. An Email has been send out.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:26:41.310

从您`web.xml`看来，url 模式存在一些问题，因此只有它给出 404 错误。更改`<form action="feedback" method="post">`为`<form action="/wunderapps_mail_service/mail" method="post">`或者，您也可以更改 web.xml。

```
<servlet-mapping>
    <servlet-name>FeedbackServlet</servlet-name>
    <url-pattern>/feedback</url-pattern>
</servlet-mapping> 
```

# php - php如何从变量中只返回字符值

> ID：11473229
> 
> 赞同：1
> 
> 时间：2012-07-13T15:09:37.393
> 
> 标签：php

我正在使用以下代码从变量中仅返回数字值，wounder 如何从变量中仅获取字符值“testing”并希望从字符串中删除“on”。

```
<?php
$valuecheck="testing on 123568";
$check1=preg_replace('/\D/', '', $valuecheck);
echo $check1;
?>

Output required:

testing 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:12:00.117

而不是`\D`, 使用`[^a-zA-Z]`（假设这就是“字符值”的意思）。基本上， put `[^SOMETHING]`，其中“某物”是您想要认为有效的所有字符的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:48:38.293

恐怕我的解决方案会更冗长：

```
$result = '';
$c = explode( ' ', $valuecheck );
foreach ($c as $ci) {
    if (preg_match( '[\D]', $ci ) == 1) { continue; }
    $result = $ci; break;
}
echo $result; 
```

将空格视为分隔符，这将忽略任何具有至少一个数字的字符串并返回找到的第一个“合格”字符串。

# c++ - 我在哪里可以放我的 MFC 控件初始化代码

> ID：11473232
> 
> 赞同：6
> 
> 时间：2012-07-13T15:09:49.500
> 
> 标签：c++, user-interface, mfc, custom-controls

我正在编写一个 MFC CEdit 派生控件，一旦控件的 m_hwnd 被填充，我需要添加初始化代码。

我可以覆盖哪个函数或者我可以处理哪个消息来实现这一点？

我尝试使用 OnCreate，但它似乎只适用于对话框

编辑：我正在初始化的是编辑的提示横幅

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:32:38.263

按照 Mark Ransom 的提示，我终于找到了一个更好的函数来实现我的初始化。虽然重载 CWnd::SubclassWindow 是个好主意，但这个函数不是虚拟的，它需要从子类指针调用。从 CWnd* 调用 SubclassWindow 将不起作用。

我找到了函数[CWnd::PreSubclassWindow](http://msdn.microsoft.com/en-us/library/8d463726%28v=vs.100%29.aspx)。它是虚拟的，在 SubclassWindow 之前被调用。由于 m_hwnd 在那里有效，因此这是编写我需要的代码的好地方。另外，这个函数是虚函数，由框架自动调用，所以我不用担心有好的指针类型

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T15:16:31.823

如果控件位于对话框上，则 OnCreate 不起作用，因为控件是在将其子类化为窗口类之前创建的 - 这发生在对话框的 DoDataExchange 中。

您可以覆盖 CWnd::SubclassWindow 并在您自己的代码之前调用基本方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:16:05.977

根据您正在初始化的具体内容，您可以覆盖`OnPaint()`，或者您可以将初始化代码添加到`OnInitDialog()`包含控件的 Dialog 类中。

# forms - 窗口内的流体形式问题

> ID：11473235
> 
> 赞同：0
> 
> 时间：2012-07-13T15:10:02.097
> 
> 标签：forms, layout, extjs, extjs4.1, fluid

我们必须创建满足以下条件的流体布局：

1.  Window中有一个Form。

2.  如果窗口宽度增加，那么表单宽度及其字段宽度也应该增加。

3.  如果窗口宽度减小，则表单宽度及其字段宽度应该减小，但只能达到一个限制。

4.  如果窗口宽度减小到超出限制，那么窗体上应该会出现一个滚动条。

我们尝试通过将 flex 赋予字段并将 minWidth 赋予窗体，假设 flex 将负责宽度的增加，并且如果窗口宽度进一步减小，窗体的 minWidth 将导致滚动。

但不幸的是，这不适用于以下测试用例：

```
<html>
    <head>
        <title>TEST</title>
        <link rel='stylesheet' href='resources/extjs/resources/css/ext-all.css' />
        <script type='text/javascript' src='resources/extjs/ext-all-dev.js'></script>
        <script type='text/javascript'>
            function getForm(){
                var form    =   {
                    xtype:'form',
                    region:'north',
                    height:100,
                    autoScroll:true,
                    minWidth:300,
                    title: 'Simple Form',
                    items: [
                    {
                        xtype:'container',
                        layout:'hbox',
                        items:[
                            {
                                xtype:'textfield',
                                fieldLabel: 'First',
                                name: 'first',
                                allowBlank: false,
                                width:100,
                                labelWidth:50,
                                flex:1
                            },{
                                xtype:'textfield',
                                fieldLabel: 'Last',
                                name: 'last',
                                allowBlank: false,
                                width:100,
                                labelWidth:50,
                                flex:1
                            }
                        ]
                    }]
                };
                return form;
            }
            function getWin(){
                var win =   Ext.create('Ext.window.Window',{
                    title:'Test Window',
                    height:400,
                    width:600,
                    layout:'border',
                    items:[
                        getForm(),
                        {
                            region:'center',
                            title:'Center Region',
                            html:'Center Region Content'
                        }
                    ]
                });
                return win;
            }
            Ext.onReady(function(){
                var win =   getWin();
                win.show();
            });

        </script>
    </head>
    <body>
    </body>
</html> 
```

关于如何实现这一目标的任何建议？或者这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:35:53.177

有一个类似的好例子： [http ://docs.sencha.com/ext-js/4-1/#!/example/form/anchoring.html](http://docs.sencha.com/ext-js/4-1/#!/example/form/anchoring.html)

这是与您的代码的混合。最小值和最大值在窗口容器中设置。如果窗口小于该部分所需的宽度，则表单上有一个带有 minWidth 的 autoScroll 和 autoWidth 配置来滚动。

在这里看到它：http: [//jsfiddle.net/Du9Nb/](http://jsfiddle.net/Du9Nb/)

```
Ext.require([
    'Ext.form.*',
    'Ext.window.Window'
]);

Ext.onReady(function() {
    var form = Ext.create('Ext.form.Panel', {
        border: false,
        fieldDefaults: {
            labelWidth: 50
        },
        url: 'save-form.php',
                autoScroll: true,
        autoHeight: true,
        bodyPadding: 5,

        items: [
            {xtype:'panel', 
             title:'Simple Form',
             minWidth: 400,
             layout: 'hbox',
             defaultType: 'textfield',
             items:[
            {
              fieldLabel: 'First',
                name: 'first',
                allowBlank: false,
                flex: 1,
                anchor:'100%'  // anchor width by percentage
            },{
                fieldLabel: 'Last',
                name: 'last',
                allowBlank: false,
                flex: 1,
                anchor: '100%'  // anchor width by percentage
            }
          ]
            }, {
                xtype: 'panel',
                title: 'Center Region',
                html: 'Center Region Content'

            }]
    });

    var win = Ext.create('Ext.window.Window', {
        title: 'Test Window - Resize Me',
        width: 600,
        height:400,
        minWidth: 300,
        minHeight: 200,
        layout: 'fit',
        plain: true,
        items: form,

        buttons: [{
            text: 'Send'
        },{
            text: 'Cancel'
        }]
    });

    win.show();
});​ 
```

# php - Facebook Graph API - 一年的朋友生日？

> ID：11473236
> 
> 赞同：0
> 
> 时间：2012-07-13T15:10:14.430
> 
> 标签：php, facebook, facebook-graph-api

我正在使用带有 friends_birthday 权限的图形 api。

我只得到月份和日期。如何获得年份？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:15:41.887

返回的信息基于该用户的隐私设置。如果用户允许它显示给朋友，那么您将收到年份。否则，只有您可以检索的信息是允许的。例如，如果您查看某个用户的个人资料，您会注意到显示的生日的唯一部分是月份和日期。如果是这种情况，则不会返回该年份，因为该用户未授予 Facebook 提供该信息的权限。没有办法解决这个问题。

# php - 定时事件只执行一次

> ID：11473237
> 
> 赞同：1
> 
> 时间：2012-07-13T15:10:27.363
> 
> 标签：php, jquery

我在将其投入使用时遇到了一些麻烦。

我有一个批准系统，用户单击链接以批准或不批准帖子。

所有内容都是通过 ajax 调用加载的，因此当用户单击时，会弹出一个信息窗口，提醒用户成功或错误，然后重新加载内容。

该脚本正在运行，但仅在第一次单击时。在第二次单击时，消息会在重新加载内容之前几乎瞬间闪烁并消失。

有人可以帮我解决这个问题吗？

这是代码

```
function activateSource(id) {
    $("#confirm-activate-" + id).toggle('slow');
    $(document).on('click', '.confirm-activate', function (e) {
        e.preventDefault();
        $.ajax({
            type: "POST",
            cache: false,
            data: {
                "source-id": id
            },
            url: "modules/source/activatesource.php",
            success: function (data) {
                $("#confirmation-response").html(data);
                dismissAlert();
            }
        })
    });
}

function dismissAlert() {
    setTimeout(function () {
        $("#confirmation-response").hide('blind', function () {
            loadSourceContent()
        }, 500);
    }, 2500);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:53:30.120

如果除了第一次尝试后消息闪烁和消失外一切正常，则说明[隐藏](http://api.jquery.com/hide/)功能有问题。您需要在再次调用 hide 之前显示“确认响应”，否则它只会闪烁。

尝试使用这个 -

```
function dismissAlert() {
    // Show the response
    $("#confirmation-response").show( 'blind', 150 );

    // Hide the response with a timeout
    setTimeout(function () {
        $("#confirmation-response").hide('blind', function () {
            loadSourceContent()
        }, 500);
    }, 2500);
} 
```

请参阅[此小提琴](http://jsfiddle.net/VayBF/)以进行演示。

您可能还想看一次[这个](https://stackoverflow.com/questions/11400184/cache-php-generated-image-until-it-changes)问题。

# python - python迭代字符串

> ID：11473241
> 
> 赞同：1
> 
> 时间：2012-07-13T15:10:53.797
> 
> 标签：python, string, file

我正在将“文章”的内容写入文本文件。

源文件：

```
lol hi
lol hello
lol text
lol test 
```

Python：

```
for line in all_lines:
    if line.startswith('lol '):
        mystring = line.replace('lol ', '').lower().rstrip()

article = 'this is my saved file\n' + mystring + '\nthe end' 
```

这是保存到 txt 文件的内容：

```
this is my saved file
test
the end 
```

这是我要保存到 txt 文件的内容：

```
this is the saved file
hi
hello
test
text
the end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:12:12.963

您每次都在替换字符串。您需要存储每一`lol`行​​的结果，然后将它们全部添加到`mystring`：

```
mystring = []
for line in all_lines:
    if line.startswith('lol '):
        mystring.append(line.replace('lol ', '', 1).lower().rstrip() + '\n')

article = 'this is my saved file\n'+''.join(mystring)+'\nthe end' 
```

在上面的代码中，我已经变成了列表，然后使用该方法`mystring`在最后变成了一个字符串。[`join`](http://docs.python.org/library/stdtypes.html#str.join)请注意，我已`\n`在每一行中添加了一个换行符 ( ) 字符，因为您希望该字符出现在输出中（并[`rstrip()`](http://docs.python.org/library/stdtypes.html#str.rstrip)删除它）。或者，您可以编写：

```
line.replace('lol ', '', 1).lower().rstrip(' ') 
```

它只允许`rstrip()`剥离空格而不是所有其他形式的空白。

* * *

**编辑**：另一种方法是编写：

```
mystring.append(line.replace('lol ', '').lower().rstrip()) 
```

和：

```
article = 'this is my saved file\n'+'\n'.join(mystring)+'\nthe end' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:16:26.110

...或作为单线，

```
mystring = ''.join(line[4:].lower() for line in all_lines if line.startswith('lol ')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:16:36.773

您可以采用这种不同的方法：

```
with open('test.txt') as fin, open('out.txt', 'w') as fout:
    fout.write('this is my saved file\n')
    for line in fin:
        if line.startswith('lol '):
            fout.write(line.replace('lol ', '').lower())
    fout.write('the end') 
```

# r - 在 R 中，如何创建具有动态列分配的函数？我想替换名称传递给 f'n 的列中的行值

> ID：11473245
> 
> 赞同：1
> 
> 时间：2012-07-13T15:11:07.893
> 
> 标签：r, function, replace

在 dataframe`df`和 column `a`，我想替换所有行的 all`is.na`和 all `a=2` `<- 0`。

这已经通过以下方式简单地实现：`df[is.na(df$a) | df$a==2, "a"] <- 0`

`b`我将在不同的列（ 、、、等）上一遍又一遍地这样做`c`，`d`所以我只是想看看我是否可以构建一个函数。我将简单地一遍又一遍地使用该功能。这样，如果我需要更改哪些值或哪些输出，这将是一项简单的任务。

这是一个小例子。首先是数据框：

```
df<-data.frame(
  a=sample(c(0,1,2), 10, replace=TRUE)
  ) 
```

现在一些缺失值：

```
df[sample(nrow(df), 3, FALSE), "a"] <- NA 
```

最后，替换的动作[我已经提到过]：

```
df[is.na(df$a) | df$a==2, "a"] <- 0 
```

我尝试了以下功能：

```
f.na<-function(df,col) df[is.na(df[,col]) | df[,col]==2, col]<-0
f.na(df, "a") 
```

我觉得它应该工作，但我不知道为什么它不工作。我得到：

> `[.data.frame`(df, , col)中的错误：选择了未定义的列

我知道我不能使用这个标志，所以我在网上阅读了一些内容后`$`尝试使用这种格式。`[]`我使用了`apply`一种函数，但后来我无法在数据框中使用结果。所以我采取了这种方式。我想我可以为需要修改的每一列反复迭代，但我认为函数解决方案会很好。

你能建议我应该尝试什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:21:23.503

我无法重现您的错误。但是，您的函数调用不会产生预期的效果，因为对函数`df`内部的修改`f.na`没有全局范围。相反，一种解决方案是让您的函数返回修改后的对象，如下所示：

```
set.seed(37337)
df<-data.frame(
  a=sample(c(0,1,2), 10, replace=TRUE)
)
df[sample(nrow(df), 3, FALSE), "a"] <- NA
f.na<-function(df,col) {
  df[is.na(df[,col]) | df[,col]==2, col] <- 0
  return(df)
}
(df.new <- f.na(df, "a"))
df[is.na(df$a) | df$a==2, "a"] <- 0
print(df) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:33:30.510

要通过存储在另一个变量中的名称访问数据框中的列（或列表的元素），您需要使用双括号`[[]]`而不是单括号。

但是，对于您正在做的事情，您可能想查看宏，请参阅[本期 Rnews](http://cran.r-project.org/doc/Rnews/Rnews_2001-3.pdf)中有关宏的文章以及包中的`defmacro`函数`gtools`。

# android - 强制应用程序选择应用程序

> ID：11473249
> 
> 赞同：0
> 
> 时间：2012-07-13T15:11:30.130
> 
> 标签：android

我开发了 2 个不同的应用程序，并且都有 QR 码扫描仪。现在每当我打开任何应用程序并尝试扫描代码时。它要求我选择应用程序来扫描代码。并显示这两个应用程序。如何强制我的应用程序不询问并选择自己的扫描仪？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:25:43.040

> 如何强制我的应用程序不询问并选择自己的扫描仪？

使用`Intent`指定组件的 （例如，`new Intent(this, MyScanner.class)`）。

但是，请不要发布`<intent-filter>`您不打算兑现的内容。如果您真的允许两个应用程序扫描条形码，理论上用户应该能够在这些应用程序之间进行选择，甚至可以从应用程序本身中进行选择。请参阅： [http ://commonsware.com/blog/2012/07/09/dont-advertise-intent-filters-that-are-not-yours.html](http://commonsware.com/blog/2012/07/09/dont-advertise-intent-filters-that-are-not-yours.html)

# jquery - 执行即时搜索时出现 jQuery 点击问题

> ID：11473252
> 
> 赞同：1
> 
> 时间：2012-07-13T15:11:38.253
> 
> 标签：jquery, html

我有一个名为`result`.

当我继续输入搜索查询时，`result`div 被填满`item` （使用 jQuery ajax）。

当我做，

```
$(".result").click(function(){
    alrert("click on whole result class captured")
}); 
```

我收到警报消息。但当我这样做时，

```
$(".item").click(function(){
    alert("click on single item captured")
}); 
```

我没有收到警报消息。为什么会这样？是因为在`divs`加载文档后插入了该项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:15:55.553

更喜欢使用`.on`

```
$(document).on("click", ".item", function(){
    alert("click on single item captured");
}); 
```

因为您的项目是动态添加的。

`click`或者`bind("click")`不能用于向 DOM 动态添加元素，因为您不会附加事件“绑定”。

`on("click")`（`live("click")`已弃用）通过 DOM 更改不断附加事件“绑定”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:17:04.103

利用`.on`

```
$(document).on("click", ".item", function() {
    alert("click on single item captured")
}); 
```

更多细节在这里[http://api.jquery.com/on/](http://api.jquery.com/on/)

# jquery - JQuery淡出然后加载

> ID：11473255
> 
> 赞同：1
> 
> 时间：2012-07-13T15:11:42.340
> 
> 标签：jquery

我对 JQuery 还很陌生，我遇到了淡出然后加载的问题。

我的代码是：

```
$("#refresh").live("click", function() {
    $("#postbit").fadeOut("slow");
       $("#postbit").load('load.php').fadeIn("slow");
    return false;
}); 
```

但这似乎不起作用。如果我之前没有 fadeOut 并且只是加载它，它工作正常。但是有没有办法让它先淡出然后让它慢慢淡入:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:13:19.583

`.fadeOut()`与许多其他 jQuery 函数一样，允许您指定在动画完成*后*执行的回调函数：

```
$("#refresh").live("click", function() {
    $("#postbit").fadeOut("slow", function() {
       $("#postbit").load('load.php').fadeIn("slow");
    });

    return false;
}); 
```

`.fadeOut()`一旦淡出动画完成，这将执行匿名函数（的第二个参数）内的代码。

* * *

顺便说一句，您不应该再使用`.live()`它，因为它已被弃用，而支持[`.on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:18:03.167

如果您使用的是 jQuery 1.7 或更高版本（可能，如果您是新手），则不应再使用`.live`，因为它不仅不好，而且在以后的版本中也会被删除。 [`return false`从事件也很糟糕](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)

```
// Change this to the known parent of #refresh
// Do you even need delegation?
$("#refresh").closest('*').on('click', '#refresh', function (e) {

   // Callback to fadeOut (after fadeOut): load
   $("#postbit").fadeOut('slow', function () {

      // So you can reference this element without selector later
      var $this = $(this);

      // Callback to load -- takes place after load completes
      $this.load('load.php', function () {
         $this.fadeIn('slow');
      });
   });

   // Prevent click from doing whatever it would normally do on #refresh
   e.preventDefault();
}); 
```

# xaml - 在 .NET 4.5 中将组合框双向绑定到静态属性

> ID：11473256
> 
> 赞同：0
> 
> 时间：2012-07-13T15:11:44.030
> 
> 标签：xaml, data-binding, combobox, .net-4.5, two-way-binding

好吧，我刚刚发布了[这个](https://stackoverflow.com/questions/11468502/twoway-binding-of-a-combobox-to-a-static-property)问题，但我认为我没有做错任何事情。我的代码（以及所有答案的代码）是正确的，但是我的开发机器使用 .NET4.5 运行，这显然与组合框的绑定有问题......

所以这里有一个新版本的问题：**如何将组合框的 SelectedItem 双向绑定到 .NET4.5 中的静态属性？**

以下代码片段在 .net4 中有效，但在 .NET4.5 中无效。在 4.5 中，只是所选值不会传播回我的静态属性。

我的视图模型：

```
public class MainWindowViewModel
{
    public static List<String> MyElements { get; set; }
    public static string SelectedElement { get; set; }

    static MainWindowViewModel()
    {
        MyElements = new List<string>() {"a", "b", "c"};
        SelectedElement = "a";
    }
} 
```

还有我的 XAML

```
<Window.Resources>
    <me:MainWindowViewModel x:Key="model"/>
</Window.Resources>

<StackPanel>
    <ComboBox
        ItemsSource="{Binding Source={x:Static me:MainWindowViewModel.MyElements}, Mode=OneWay}"
        SelectedItem="{Binding Source={StaticResource model}, Path=SelectedElement}" />
</StackPanel> 
```

有没有人知道如何在 .NET4.5 中实现 ComboBox 的 SelectedItem 到静态属性的这种双向绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T14:43:39.993

请参阅[我](https://connect.microsoft.com/VisualStudio/feedback/details/774112/net-4-5-compatibility-wpf-listbox-datagrid-binding-on-selecteditem-fails)关于 Microsoft Connect 的报告。每个`Selector`控件都受到此问题的感染。

最后，几周前微软发布了一个适当的补丁，该补丁已经通过 Windows Update 分发。[请参阅知识库 KB2805222](http://support.microsoft.com/kb/2805222/en-us)（WPF - 第 7 期）

> WPF - 问题 7： *假设您使用包含静态属性的绑定路径更改选择器属性（例如 SelectedItem 属性）或 ComboBox.Text 属性。在这种情况下，绑定不会对更改做出反应。具体来说，新值不会写入数据项。*

# c# - C# .NET SqlDependency

> ID：11473257
> 
> 赞同：2
> 
> 时间：2012-07-13T15:11:47.947
> 
> 标签：c#, .net, sql-server, sqldependency

我对 .NET 中 SqlDependency 的使用有疑问。我已经阅读了文档，但我仍然不清楚 OnChange 事件是否在其自己的线程中被调用。例如，如果我得到 30 个并发事件，它们每个都有自己的 OnChange 偶数处理程序吗？我问的原因是，如果在 OnChange 处理程序中完成的工作阻止了下一个事件，我不想用这个创建引擎。

例如，我有一个 Orders 数据库的 SqlDependency，每次有新订单时，我都会收到 OnChange 事件，然后我可以处理用户的订单。这不会阻止其他人进来，对吗？

另外，您是否发现使用此方法有任何问题？SqlDependency 似乎是一个非常强大的功能，所以我希望它可以这样工作。;)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:25:48.793

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)

根据上面链接中 SQLDependancy 类的 msdn 信息中的注释，quote->

```
"The OnChange event may be generated on a different thread from
 the thread that initiated command execution. " 
```

另一方面，在同一页面上是以下注释，quote->

```
"SqlDependency was designed to be used in ASP.NET or middle-tier 
 services where there is a relatively small number of servers 
 having dependencies active against the database. It was not 
 designed for use in client applications, where hundreds or
 thousands of client computers would have SqlDependency
 objects set up for a single database server. " 
```

# sql - HTMLForm 数据库最佳实践：RDBM、规范化、必填/可选字段、添加/删除字段

> ID：11473258
> 
> 赞同：0
> 
> 时间：2012-07-13T15:11:56.043
> 
> 标签：sql, forms, normalization

我在一所拥有多种表格的大学工作。我们正在将旧系统（表单数据 -> 电子邮件）转换为更高效的系统 (sql)，原因有很多：报告、速度、邮箱限制等。

我理解规范化和 sql 命令就好了......我挂断了这些：

1.  必需与可选字段（空或单独的表）
2.  对表单的更改（添加/删除字段以及它在表格设计中的反映方式）
3.  1:1 表比或 1:N 表比
4.  如果是1：N，这会影响每个表格的报告吗？

您是否知道一个网站/书籍/文章/教程，它提供了有关如何将表单数据存储在触及我关注的数据库中的大量信息？

或者，您能描述一下什么是“久经考验”的方法吗？

如果可能的话，我想以第三或第四次标准化为目标。

* * *

我最初的想法是：

1.  创建一个表“应用程序”，其中包含所有必需（永久）数据的字段。
2.  创建一个表“application_extra”，其中包含以下字段：application_id、field_title 和 field_value

但这可以用于报告吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T06:42:52.197

如果您正在处理静态表单，则表单/表格不会发生变化的真正风险，即使会发生变化，也需要快速更改表格列，以及一些 PHP 提交代码（即查询） ，就是这样。

动态表单有点不同（动态表单是由服务器以某种方式生成的表单，通过用户输入或服务器条件）。每个表单需要 2 个表，一个用于表单的结构，一个用于保存在其中的数据，其中结果以多对一的关系保存。

结构表示例：

```
CREATE TABLE IF NOT EXISTS `form_structure` (
  `id` int(10) unsigned NOT NULL,
  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'Name of the form element as appeared on its name attribute',
  `type` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT 'text' COMMENT 'Type of the form element (text, password, checkbox etc).',
  `label` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'Label for the form element.',
  `can_be_null` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Whether the form element can be null.',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

# android - 线程以未捕获的异常退出 (group=0x40a3b1f8)

> ID：11473259
> 
> 赞同：0
> 
> 时间：2012-07-13T15:11:56.113
> 
> 标签：android

自从我每次运行时将 AdMob 包含到我的应用程序中并单击一个按钮，该按钮会转到一个带有广告的页面

主要java：

```
 package com.co500.gdsg;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class GameDevStoryGuideActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button co = (Button) findViewById(R.id.combinations);
        co.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.co500.gdsg.COMBINATIONS"));
            }
        });

        Button jb = (Button) findViewById(R.id.jobs);
        jb.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.co500.gdsg.JOBS"));
            }
        });

        Button ty = (Button) findViewById(R.id.type);
        ty.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.co500.gdsg.TYPE"));
            }
        });

        Button con = (Button) findViewById(R.id.consoles);
        con.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.co500.gdsg.CONSOLES"));
            }
        });

        Button gen = (Button) findViewById(R.id.genre);
        gen.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.co500.gdsg.GENRE"));
            }
        });
    }
} 
```

显现

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:installLocation="preferExternal"
    package="com.co500.gdsg"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity 
        android:name="com.google.ads.AdActivity"
        android:configChanges="orientation|keyboard|keyboardHidden|screenLayout|uiMode|screenSize|smallestScreenSize"
        ></activity>
        <activity
            android:name=".GameDevStoryGuideActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Genre"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.GENRE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Combinations"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.COMBINATIONS" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Consoles"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.CONSOLES" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Notgood"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.NOTGOOD" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Hmm"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.HMM" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Notbad"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.NOTBAD" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Creative"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.CREATIVE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Amazing"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.AMAZING" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Jobs"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.JOBS" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Type"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.co500.gdsg.TYPE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:gravity="center"
    android:orientation="vertical" >

    <Button
        android:id="@+id/genre"
        android:layout_width="148dp"
        android:layout_height="wrap_content"
        android:text="Game Genre Unlocks" />

    <Button
        android:id="@+id/consoles"
        android:layout_width="148dp"
        android:layout_height="wrap_content"
        android:text="Consoles" />

    <Button
        android:id="@+id/combinations"
        android:layout_width="148dp"
        android:layout_height="wrap_content"
        android:text="Combinations" />

    <Button
        android:id="@+id/type"
        android:layout_width="148dp"
        android:layout_height="wrap_content"
        android:text="Game Type Unlocks" />

    <Button
        android:id="@+id/jobs"
        android:layout_width="148dp"
        android:layout_height="wrap_content"
        android:text="Jobs" />

</LinearLayout> 
```

consoles.xml（与其他 xml 类似）

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ScrollView android:layout_width="fill_parent" android:layout_height="fill_parent">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/consoleavail" />

    </LinearLayout>
</ScrollView>
<com.google.ads.AdView android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    ads:adUnitId="empty for a reason"
    ads:adSize="BANNER"
    ads:loadAdOnCreate="true"/>
</RelativeLayout> 
```

日志猫：

```
07-13 15:16:13.770: D/dalvikvm(4567): GC_FOR_ALLOC freed 17K, 2% free 7848K/8007K, paused 14ms
07-13 15:16:13.780: I/dalvikvm-heap(4567): Grow heap (frag case) to 9.377MB for 1769056-byte allocation
07-13 15:16:13.810: D/dalvikvm(4567): GC_CONCURRENT freed 2K, 2% free 9573K/9735K, paused 2ms+2ms
07-13 15:16:13.830: D/AndroidRuntime(4567): Shutting down VM
07-13 15:16:13.830: W/dalvikvm(4567): threadid=1: thread exiting with uncaught exception (group=0x40a3b1f8)
07-13 15:16:13.830: E/AndroidRuntime(4567): FATAL EXCEPTION: main
07-13 15:16:13.830: E/AndroidRuntime(4567): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.co500.gdsg/com.co500.gdsg.Consoles}: android.view.InflateException: Binary XML file line #23: Error inflating class com.google.ads.AdView
07-13 15:16:13.830: E/AndroidRuntime(4567):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-13 15:16:13.830: E/AndroidRuntime(4567):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:15:37.337

您正在使用以下语句

```
 startActivity(new Intent("com.co500.gdsg.CONSOLES")); 
```

这导致了问题。

利用

```
startActivity(new Intent(ActivityName.this,CONSOLES.class); 
```

Intent 的第一个参数应该是一个上下文，第二个应该是 className。这是一个目标类

PS :- 它会显示错误，因为找不到 ActivityName，请将 ActivityName 替换为您的 Activity 名称。

# java - 共享异常实例是否安全

> ID：11473263
> 
> 赞同：7
> 
> 时间：2012-07-13T15:12:06.257
> 
> 标签：java, exception, exception-handling

我们正在制作一个类似 Excel 的系统。当我们打开一个文档并发现不受支持的功能时，我们会抛出异常。我们只支持一小部分 excel 函数，这可能经常发生。问题是当有很多包含不受支持的功能的单元格时，会创建大量异常实例。创建这么多异常实例会消耗不可忽视的时间。

我们在异常类中没有任何特殊属性。我们需要知道的是抛出异常的事实。我们刚刚发现错误已经发生并将单元格标记为错误。

所以我们决定共享一个异常实例，并在需要时抛出它。异常实例可以由多个线程抛出。我怀疑堆栈跟踪可能已损坏，但是，我们没有看到它。我们只是捕获异常，并将相应的单元格标记为错误。

**我的问题是：在这种情况下，共享异常实例是否安全？** 好吧，我阅读了以下文章： [Java：Exception 类是线程安全的吗？](https://stackoverflow.com/questions/2668639/java-is-exception-class-thread-safe) 但上下文似乎有所不同。

感谢您提前阅读这个冗长的问题和回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:15:14.213

> ***[...] 共享异常实例是否安全？***

是的，如果你小心的话。

如果你不小心，[`getStackTrace`](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getStackTrace%28%29)例如可能会搞砸。要么确保每个线程都有它自己的异常对象，要么覆盖`getStackTrace`并返回一个空数组。

（JVM实际上在某些情况下会重用异常实例。如果内存不足，它将重用一个预先分配`OutOfMemoryError`的实例，而不是尝试创建一个新实例。在这种情况下，它`getStackTrace`返回一个空数组。）

**相关问题：**

*   [如果抛出两次，预分配的 OutOfMemoryError 如何如实实现 Throwable.getStackTrace？](https://stackoverflow.com/questions/9545807/how-can-a-preallocated-outofmemoryerror-truthfully-implement-throwable-getstackt)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T15:34:22.740

> 我怀疑堆栈跟踪可能已损坏。

它不会被破坏。

但是，由于在创建异常实例时会捕获堆栈跟踪，因此如果您重用异常，堆栈跟踪将不正确。同样，没有 API 方法可以在创建后更改异常的消息字符串，因此“共享”异常将始终具有相同的消息。

* * *

这具有过早优化和/或在“非异常”控制流中使用异常的“气味”。最好的方法是每次你都简单地创建一个新的异常实例`throw`，并且只有在你有一个明确的（真正的）性能问题时才搞乱异常共享。

**更新**- 显然这不是过早的优化。但是，您的分析表明您在创建异常实例上花费了大量时间，我建议您至少*考虑*涉及降低抛出异常频率的替代优化。

* * *

> 好吧，我必须重写 getStackTrace() 以返回一个空数组。

不，一个更好的主意是重写该`fillInStackTrace()`方法以不捕获一个。`Exception`在 Java 7 中还有一种使用构造函数参数的简洁方法可以做到这一点。

# maven-3 - 有人可以帮我如何在 Windows 7 上设置 Maven 的类路径

> ID：11473264
> 
> 赞同：0
> 
> 时间：2012-07-13T15:12:07.630
> 
> 标签：maven-3

我正在尝试在 win 7 上设置类路径，并且在尝试执行 mvn --version 时执行了所有必要的变量后，我收到此错误 -“mvn is not Recognized” 在系统变量中我设置了 M2_HOME 并且值为设置为 --- C:\Users\Amzi\Desktop\apache-maven-3.0.4-bin 到最后的路径变量中我设置了类似 ;C:\Users\Amzi\Desktop\apache-maven 的值-3.0.4-bin\bin 有人可以帮助我在这里做错了什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:37:04.347

要在 Windows 7 中从命令行运行 maven，您应该在下表中正确设置 JAVA_HOME、M2_HOME 和 PATH 环境变量：

```
 Start button -> Computer menu item -> Properties on right click menu item -> 
Advanced System Settings button on left panel -> Advanced tab in System Properties dialog ->
 Environment Variables button -> System variables table 
```

`JAVA_HOME`设置为安装JDK的目录：

```
C:\Program Files\Java\jdk1.7.0_06 
```

`M2_HOME`设置为 Maven 发行版的提取目录：

```
C:\Program Files\Maven\apache-maven-3.0.4 
```

`PATH`JDK 和 Maven 二进制文件的附加条目：

```
%JAVA_HOME%\bin;%M2_HOME%\bin; 
```

# dotnetopenauth - 通过 Javascript 验证访问

> ID：11473265
> 
> 赞同：1
> 
> 时间：2012-07-13T15:12:08.967
> 
> 标签：dotnetopenauth

我目前正在创建一个主要由三个部分组成的系统。有一台授权服务器和一台资源服务器。此外，我旁边还有一个基于 Node.js (Javascript) 的 pubsub api。授权服务器和资源服务器是使用 DotNetOpenAuth 库构建的。可以通过从授权服务器接收到的令牌来访问资源。

现在，当我还想通过相同的令牌授权 pubsub api 时，首选的工作方式是什么？在 DotNetOpenAuth 库中，我有这个 VerifyAccess 方法可用，它为我做这件事，但我的 Javascript 中没有这个。让一个单独的 Web 服务进行验证，然后我从我的 javascript 调用它是否合适？

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:49:40.157

通过对 .NET 的 Web 请求调用 Node.js 来调用 VerifyAccess 肯定是最简单的。或者，如果 Node.js 能够执行非对称签名验证，以及非对称和对称解密，那么理论上 Node.js 可以直接验证令牌。但这将留给读者作为练习。:)

如果您确实完成了它，请尽管将您的结果发布给其他人。

# python - Python：从 MagStripe 阅读器获取键盘输入

> ID：11473269
> 
> 赞同：0
> 
> 时间：2012-07-13T15:12:14.473
> 
> 标签：python, linux, ssh, keyboard

对于我的 DIY 访问控制系统，我在连接到 MagStripe 读卡器的 Raspberry Pi 上运行 Debian。刷卡时，读卡器会像键盘一样通过 USB 端口从磁条写入数据。例如，将其插入您的计算机，打开文本编辑器，然后刷卡，您会看到打印出来的一串数据，就像您用键盘输入的一样。

简单接线图：

```
Client <--ssh--> Host + card reader 
```

唯一的问题是我在 ssh 上运行我的 Python 脚本，它不能直接听到键盘输入。

如何让 Python 监听来自 MagStripe 阅读器的键盘事件？（我需要使用键盘记录器吗？PyGame 的键盘绑定？）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:36:32.303

在 Linux 上，可以通过 /dev/input 访问 USB 键盘。

请参阅：[/dev/input/event* 的格式？](https://stackoverflow.com/questions/5060710/format-of-dev-input-event) - 该问题的答案包括用于获取事件的两个不同 Python 模块，以及指向更多文档的链接。

要将键码转换为 ASCII，请参阅[如何在 Perl 中将 Linux 键码从 /dev/input/event* 转换为 ASCII？](https://stackoverflow.com/questions/2547616/how-can-i-translate-linux-keycodes-from-dev-input-event-to-ascii-in-perl)

您可能需要成为 root，或者更改 /dev/input 的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:45:52.710

可能值得将程序分成两部分：一个作为服务在启动时在树莓派上启动，默认情况下将从您的键盘设备（阅读器）获取其标准输入，另一个通过 ssh 提供远程访问功能. 这样您就可以避免直接处理 /dev 中的设备。

# java - 我在哪里可以找到有关验证方法的文档？

> ID：11473270
> 
> 赞同：0
> 
> 时间：2012-07-13T15:12:14.983
> 
> 标签：java, selenium, verification

我使用 Assert 类来检查页面上是否有一些文本，如果文本不存在，此命令将停止执行测试。我想使用验证。有人能告诉我在哪里可以找到有关此类方法的文档吗？

我的意思是 WebDriver，junit。例如这样的代码

```
String text=("Terms");
 List<WebElement> list = driver.findElements(By.xpath("//*[contains(text(),'" + text + "')]"));
 Assert.assertEquals("Text not found!", "Terms", list); 
```

如果页面上没有文本“Term”，junit 测试将中断测试，但我只需要获取错误消息并继续测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:17:30.317

听起来您只需要捕获和处理 Assert 的各种方法抛出的 AssertionError [（在此处记录）](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)。像这样的东西：

```
try {
  Assert.assertEquals("Text not found!", "Terms", list);
} catch (AssertionError e) {
  System.err.println("Assertion failed: " + e.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:19:18.963

如果您想继续执行测试用例，即使您期望的某些结果失败并在完整执行结束时查看结果。

你可以做这样的事情 -

声明一个变量来存储所有在执行过程中失败的测试用例结果，然后在 tearDown 方法中你可以调用 Assert.fail(String message)

```
 StringBuffer errors = new StringBuffer();

 @Test
 public void testSomething(){
    if(!"data".equals(text)){
      addErrors(text +"not equal to data");
    }

    // add any number of if statements to check anything else 
 }

 @After()
 public void tearDown(){
   if(errors.length()!=0){         
     Assert.fail(errors.toString());
   } 
 }

 public String addErrors(String message){
   errors = errors.append(message+"\n");
 } 
```

现在在 testSomething() 方法中，您可以检查或测试网页上的任意数量的 WebElement，您所要做的就是使用一个简单的 if 语句来检查某些事情是否正确，如果不正确，则调用 addErrors() 方法。希望这对您有所帮助。

# html - 移动 Safari 以不同的方式呈现 CSS - 有什么解决办法吗？

> ID：11473271
> 
> 赞同：0
> 
> 时间：2012-07-13T15:12:22.463
> 
> 标签：html, css, mobile, safari

我有一个两列布局（左侧的数据和右侧的导航）。在 Safari 桌面上正确呈现，但 Safari for iPhone 右栏呈现在数据下方的页面底部。基本代码模板是：

```
<body>
  <div class="colmask rightmenu">
    <div class="colleft">
      <div class="col1">
        <!-- Column 1 start -->
        <div class="ui-body ui-body-e">
          <div data-role="collapsible" data-collapsed="true" data-theme="e" data-content-theme="b">
            some data here
          </div>
        </div>
        <!-- Column 1 end -->
      </div>
      <div class="col2">
        <!-- Column 2 start -->
          <div class="ui-body ui-body-b">
            nav stuff here
          </div>
        <!-- Column 2 end -->
      </div>
    </div>
  </div>
</body> 
```

无论视口宽度设置在什么位置（当前为 100&%），问题都是一样的

这是CSS：

```
body {
    margin:0;
    padding:0;
    border:0;
    width:100%;
    background:#fff;
    font-size:90%;
}

a {
  color:#369;
}

a:hover {
  color:#fff;
  background:#369;
  text-decoration:none;
}

h1, h2, h3 {
  margin:.8em 0 .2em 0;
  padding:0;
}

p {
  margin:.4em 0 .8em 0;
  padding:0;
}

img {
  margin:10px 0 5px;
}

#ads img {
    display:block;
    padding-top:10px;
}

/* Header styles */
#header {
  clear:both;
  float:left;
  width:100%;
}

#header {
  border-bottom:1px solid #000;
}

#header p,
#header h1,
#header h2 {
  padding:.4em 15px 0 15px;
  margin:0;
}

#header ul {
  clear:left;
  float:left;
  width:100%;
  list-style:none;
  margin:10px 0 0 0;
  padding:0;
}

#header ul li {
  display:inline;
  list-style:none;
  margin:0;
  padding:0;
}

#header ul li a {
  display:block;
  float:left;
  margin:0 0 0 1px;
  padding:3px 10px;
  text-align:center;
  background:#eee;
  color:#000;
  text-decoration:none;
  position:relative;
  left:15px;
  line-height:1.3em;
}

#header ul li a:hover {
  background:#369;
  color:#fff;
}

#header ul li a.active,
#header ul li a.active:hover {
  color:#fff;
  background:#000;
  font-weight:bold;
}

#header ul li a span {
  display:block;
}

/* 'widths' sub menu */
#layoutdims {
  clear:both;
  background:#eee;
  border-top:4px solid #000;
  margin:0;
  padding:6px 15px !important;
  text-align:right;
}

/* column container */
.colmask {
  position:relative;    /* This fixes the IE7 overflow hidden bug */
  clear:both;
  float:left;
  width:100%;           /* width of whole page */
  overflow:hidden;      /* This chops off any overhanging divs */
}

/* common column settings */
.colright,
.colmid,
.colleft {
  float:left;
  width:100%;
  position:relative;
}

.col1,
.col2,
.col3 {
  float:left;
  position:relative;
  padding:0 0 1em 0;
  overflow:hidden;
}

/* 2 Column (right menu) settings */
.rightmenu {
  background:#eee;      /* right column background colour */
}

.rightmenu .colleft {
  right:25%;            /* right column width */
  background:#fff;      /* left column background colour */
}

.rightmenu .col1 {
  width:71%;            
  left:27%;         /* (right column width) plus (left column left padding) */
}

.rightmenu .col2 {
  width:21%;            
  left:31%;         
}

/* Footer styles */
#footer {
  clear:both;
  float:left;
  width:100%;
  border-top:1px solid #000;
}

#footer p {
  padding:10px;
  margin:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:12:40.820

您可能遇到此问题的原因是，与计算机相比，iPhone 和 iTouch 的分辨率设置与普通计算机不同。

[http://en.wikipedia.org/wiki/IPod_Touch](http://en.wikipedia.org/wiki/IPod_Touch)

[http://en.wikipedia.org/wiki/IPhone](http://en.wikipedia.org/wiki/IPhone)

如果您没有设置模板来识别移动计算机或显示器分辨率等细节，那么您的 CSS 将永远无法正确呈现您当时正在查看的屏幕。

即使您将其设置为 100%，您的 CSS 中也有 iPhone 或 iTouch 可能无法识别的不同设置，因此您可能需要调查一下。

我一直致力于创建对计算机和 iPhone/iTouch 都友好的东西，但这并不容易。您将花费 10 分钟编写脚本，30 分钟到两天来完善它。

您可能想调查一下：

[纯粹通过 css 检测 iPhone/iPad](https://stackoverflow.com/questions/3839809/detect-iphone-ipad-purely-by-css)

# c# - Windows 身份验证不会自动获取用户凭据

> ID：11473276
> 
> 赞同：1
> 
> 时间：2012-07-13T15:12:43.780
> 
> 标签：c#, asp.net, authentication, active-directory, single-sign-on

我有一个我正在为我们公司的 Intranet 开发的 aspx 网站。我最近添加了一些安全页面，这些页面要求用户成为 Active Directory 中特定组的成员才能查看。我们正在为站点使用 Windows 身份验证（我在 .config 中有 Windows 身份验证）。在 IIS 中启用了 Windows 身份验证，并且禁用了匿名身份验证。我还在项目属性中启用了 NTLM 身份验证。

据我所知，安全工作按预期工作。只有具有正确凭据的用户才能访问安全页面（我通过控制器操作上的 [Authenticate Roles = "bla"] 检查来保护它们）。

我遇到的问题并不是真正的问题，而是更多的烦恼。每当用户登录到站点时，系统都会提示他们登录对话框。我不想要这个。我希望该站点从 Windows 登录中获取他们的凭据，并使用它来确定他们的访问权限。我的印象是 Windows 身份验证自己处理了这个问题，但似乎我错了。

基本上，我怎样才能摆脱登录提示并让 Windows 身份验证自动处理所有相同的功能？

是否有一些我可能需要更改的服务器设置？它可能是我的代码中的东西吗？

如果可能的话，我希望它至少可以与 IE、Firefox 和 Chrome 一起使用。

***2012 年 7 月 23 日更新

感谢大家的建议，不幸的是我还没有让它正常工作。我注意到的一些事情可能有助于提供更多细节

*   我相当肯定 Intranet 站点在我们的“受信任”站点列表中（我们的网络管理员说它是）。

*   我只使用 NTLM 身份验证和 NTLM 身份验证。如果我删除 NTLM 身份验证并启用 Negotiate: Kerberos 身份验证，我只会收到 401 - Unauthorized 错误。我可以通过禁用内核模式身份验证来解决这个问题，但是我仍然会收到凭据提示（我不想要）。

*   如果我在 IE > Internet 选项 > 高级 > 安全中选中“启用集成 Windows 身份验证*”，它会提示我输入凭据，但输入我的凭据不再有效。它会问我三遍，然后将我带到 401 错误页面。

*   IE9 只询问我的密码并提取我的用户名（好）。Chrome 和 Firefox 提示我输入用户名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:24:12.703

查看 Internet Explorer / 工具 / 选项 / 高级。

“安全”下有一个“启用集成 Windows 身份验证”复选框。

这是检查吗？

默认情况下已选中，管理员可以使用 GPO 进行设置：

[http://www.windowsecurity.com/articles/configuring-advanced-ie-settings-using-group-policy.html](http://www.windowsecurity.com/articles/configuring-advanced-ie-settings-using-group-policy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:24:30.880

IE 中有一个设置允许这种自动传递发生。您的系统管理员可以创建组策略并将其推送给所有用户。

我也成功地将 Firefox 配置为在同一问题上运行，但这将涉及修改单个用户的 FF 配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:08:36.530

这一行应该在你的 web.config`<system.web>`元素内。

`<authentication mode="Windows" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:09:23.723

只是想我会提供有关实际解决问题的更新。

我尝试了你们为 Internet Explorer 设置提供的所有很棒的建议，但最终，它变成了服务器设置。

将站点的提供者顺序翻转为 NTLM，按该顺序协商解决了问题。

# symfony - 基于 Symfony2 中登录用户的 Doctrine2 动态表前缀

> ID：11473278
> 
> 赞同：3
> 
> 时间：2012-07-13T15:12:45.483
> 
> 标签：symfony, doctrine-orm

我正在尝试获得一个多租户系统设置，其中每个用户都有自己的前缀表。

所以我的数据库可能看起来像

```
users
acme_posts
my_posts
their_posts
our_posts 
```

像[这样](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/cookbook/sql-table-prefixes.html)的解决方案是一个好的开始，但它不允许动态创建前缀。

是否可以修改上面的学说解决方案以根据登录用户设置数据库前缀？

另一种方法可能是拥有一个主用户数据库，然后为用户特定的表设置单独的数据库，但我不确定 Doctrine 是否可以处理多个数据库之间的关系。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:48:40.403

你可以很容易地访问 Doctrine EventListener 中的服务容器，只需将 EventListener 定义为服务（位于[此处](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)的说明）。但是，这种方法对您的情况没有帮助，因为所有类元数据将只加载一次并缓存，因此它无法了解不同的用户。

显然，我不知道您的用例，但是有什么理由不能简单地将字段添加到您的 *_posts 表中，这样您就有一个带有“user_namespace”或类似键的帖子表?

如果您的反对只是将控制器逻辑与有关用户登录的信息混淆，您可以通过使用 prePersist Doctrine EventListener 在新实体上设置适当的 user_namespace 和[过滤器](http://docs.doctrine-project.org/en/latest/reference/filters.html)（对于 Doctrine >=2.2）或自[定义 DQL walker](http://docs.doctrine-project.org/en/latest/cookbook/dql-custom-walkers.html)（用于其他所有内容），以限制所有查询仅从适当的 user_namespace 检索实体。

# java - 按字节消耗 JAVA 的全局 vs 局部（变量和列表）

> ID：11473281
> 
> 赞同：2
> 
> 时间：2012-07-13T15:13:15.383
> 
> 标签：java

我试图创建一个网站，有时我得到了 PermGen 异常。
所以我开始寻找减少创建对象数量并减少内存消耗的方法。

我读了一些文章。但我不确定有些事情。
例如，是在方法之外（全局）声明列表，还是在方法内创建列表更好？在这种情况下，内存消耗有什么区别？如果我将它们声明为本地，这意味着在使用它们之后，垃圾收集器将收集它们，从而释放堆上的空间？

任何人都可以提出减少更多内存消耗和减少创建对象数量的方法（@Autowired 是在对象上声明的更好方法）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:36:43.287

如果您收到有关 PermGen 的内存不足异常，那么减少对象的数量和大小很可能无济于事（因为它们将占用堆中的空间，而不是您的 PermGen）

这个答案[PermGen Out of Memory 原因](https://stackoverflow.com/questions/5635255/permgen-out-of-memory-reasons)应该有助于解决 PermGen 问题的原因

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T15:32:19.177

全局变量和局部变量都占用相同数量的内存，不同之处在于它们超出范围并因此有资格进行 gargabe 收集。全局变量不会超出范围，而本地变量会在“块”（例如方法或循环）完成后立即超出范围。如果现在没有对该变量的引用，它将被垃圾收集器删除。

根据经验，总是尝试将变量放在尽可能低的范围内，这将在变量不再使用时释放它们。如果可以的话，你也应该尝试重用变量。

这是一篇关于[范围](http://www.java-made-easy.com/variable-scope.html)的小文章，一篇关于 java 垃圾收集器的[工作原理和另一篇关于](http://javarevisited.blogspot.de/2011/04/garbage-collection-in-java.html)[使用](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)哪种收集器的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:27:19.187

静态数据和非静态数据在使用方面没有区别。他们在堆上使用相同的数量。

如果你的 PermGen 用完了，你要么需要

1.  加载更少的类
2.  增加最大 PermGen 大小，例如`-XX:MaxPermSize=256m`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:32:43.087

一旦声明块完成，所有局部变量都可以从垃圾收集器中收集。所以这是更好的内存回收方式。

# android - 如何在“停止”状态下安装预加载的 .apk 并且 *not* 在 BOOT_COMPLETED 上启动

> ID：11473285
> 
> 赞同：1
> 
> 时间：2012-07-13T15:13:23.667
> 
> 标签：android

我们有一个应用程序正在评估某些设备上的预加载。只要应用程序不处于“停止”状态，我们的应用程序就会在 BOOT_COMPLETED 上自动运行服务。当应用程序安装在设备上时，应用程序处于“停止”状态，并且在用户启动之前不会自动运行。那时它不再处于“停止”状态，将在 BOOT_COMPLETED 上自动运行。如果用户强制停止应用程序，它将回到“停止”状态。这都是好的和预期的行为。

现在，当我们的应用程序在设备上预加载时，它并不处于“停止”状态，因此当设备第一次启动时它无需任何用户交互即可运行。我们不希望这种情况发生，我们希望应用程序在“停止”状态下预加载。

所以，我的两个问题是：

1) 可以在“停止”状态下预加载应用程序，如果可以，如何？或者至少我可以告诉预加载团队做什么，因为他们告诉我他们做不到。

2）如果应用程序无法在“停止”状态下预加载，当我得到 BOOT_COMPLETED 来判断用户是否启动了应用程序时，我可以做些什么。这样，我可以跟踪用户至少启动了一次应用程序，如果没有在 BOOT_COMPLETED 上运行该应用程序，则终止该应用程序。这是我想避免的黑客攻击，因此也将不胜感激任何其他选择。

谢谢！

# ios - 如何为 OEM 构建同一个 iOS 应用程序的多个版本

> ID：11473289
> 
> 赞同：21
> 
> 时间：2012-07-13T15:13:34.893
> 
> 标签：ios, xcode

我有一个现有的 iOS 应用程序，我需要能够为不同的客户端构建和发布多个版本。

此应用程序与少数不同公司提供的硬件接口，硬件相同，但每家公司以不同的名称销售硬件

这是一个免费的应用程序，目标不是向应用商店发送同一个应用程序的多个版本的垃圾邮件，目标是允许销售更名硬件的公司拥有使用他们用于硬件的品牌名称的移动应用程序。

我需要能够做什么：

*   构建可以提交到 Appstore 的同一应用程序的多个版本，每个版本将在不同公司的苹果帐户下提交。我认为这意味着多个项目，以便每个项目都可以使用公司特定的配置文件
*   每个版本都有一些不同的图像（图标、启动图像，可能还有其他一些）
*   每个版本都有一些不同的字符串（公司名称、产品名称，可能还有其他一些）

使用 Android，我只需要创建一个库项目，我就可以轻松地覆盖字符串和图像。

对于 iOS，我还没有找到明显的答案。

我考虑在现有项目中添加一个新目标，但我认为这不会奏效： - 我不知道如何替换图标和起始屏幕之外的图像 - 我不知道如何替换字符串 -我能否为使用同一项目编译的不同应用程序使用不同的配置文件？我知道目标设置允许不同的配置文件，但是项目设置没有自己的一组配置文件吗？

我可以将当​​前应用程序打包到其他项目可以使用和替换图像/字符串的库中吗？所以每个版本都有自己的 xCode 项目，但使用相同的代码。

也许我需要更多地处理多个目标的想法......

我正在使用 xCode 4.2，但如有必要，我准备迁移到更新版本

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T15:23:12.997

创建使用不同 Info.plist 文件的多个目标。最大的区别将是不同的包标识符。您还可以定义不同的预处理器宏来控制各种代码块的条件编译。

或者/另外，您可以将构建配置设置（包括 Info.plist 文件的更改位置）放入 *.xcconfig 文件中，并在您的项目、信息、配置区域中引用这些设置。然后，您只需更改方案即可构建不同版本的应用程序。将构建配置设置放入文件中也是配置控制的巨大胜利。

这是设置 *.xcconfig 文件的链接：http: [//itcoding.blogspot.com/2011/03/using-xcconfig-abandoning-build-panel.html](http://itcoding.blogspot.com/2011/03/using-xcconfig-abandoning-build-panel.html)。我也看过其他类似的文章——但这篇文章会让你开始。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T12:59:41.483

我在上一家公司做了不同的事情，我们从一个主要源存储库生成了大约 8 个应用程序。

我们创建了一个需要一个外部类的项目，称之为 Config。该课程提供了使每个应用程序独一无二的独特信息。

然后旋转一个应用程序，您创建您的应用程序项目，包括公共“库”，提供 Config.m 文件（Config.h 是常见的），添加唯一图像等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-05T06:33:49.020

这对我很有帮助。它本质上是多目标方法，但您为公司定制它并上传到他们的帐户。

[https://developer.apple.com/videos/play/wwdc2019/304/](https://developer.apple.com/videos/play/wwdc2019/304/)从 17 分钟开始看。

总而言之，您与您正在为其开发的公司合作，通过他们的 Apple Connect 帐户，他们将您分配为您为他们开发的特定应用程序的开发人员和营销角色。您将构建上传到他们的帐户。他们最终决定何时发布它以及谁将使用 TestFlight 对其进行测试。

# jquery - Jquery，一个以恒定速度自动滚动到底部的功能

> ID：11473290
> 
> 赞同：1
> 
> 时间：2012-07-13T15:13:40.093
> 
> 标签：jquery, scroll

我正在尝试开发一个自动滚动到底部的功能，它以恒定的速度和平滑的方式独立于文档的高度，并且允许加载 ajax 内容。

这是我的尝试

```
$bottom = 100;
function scroll() {
        $('html, body').animate({scrollTop:$bottom}, 2000, 'linear');
        $bottom = $bottom + 100;
        scroll();
}

scroll(); 
```

有什么建议可以改进一下吗？我对平滑度不满意。

谢谢

# ssl - 如何为 HTTPS 配置/启用 SSL 以及创建 Windows 服务的步骤？

> ID：11473294
> 
> 赞同：3
> 
> 时间：2012-07-13T15:13:58.303
> 
> 标签：ssl, windows-services, jetty, maven-plugin

我目前在我的 Jetty 8.x webapps 容器中部署了一个战争文件。我可以启动 Jetty 服务器并使用 HTTP 连接到我的服务器。我希望能够使用 HTTPS 进行连接。在 Jetty 8.x 上启用 HTTPS 的最简单方法是什么？如有必要，我愿意使用自签名证书。

我需要以下内容：

*   生成证书并将其导入 Jetty 的步骤（最好使用自签名证书）
*   Jetty 中需要配置以支持 HTTPS / SSL
*   在启用 SSL 的情况下启动 Jetty 的命令行参数

其次，是否有人知道如何将 Jetty 8.x 转为可以作为 Windows 服务运行？

有关更多详细信息，我在 Jetty 上启用 SSL 时遇到问题。我正在尝试为此目的使用自签名证书。我正在使用 keytool 创建一个密钥对和自签名证书，如下所示：

```
keytool -genkey -alias domain -keyalg RSA -keysize 2048 -validity 365 -keystore keystore 
```

然后我将密钥库复制到我的 c:\jetty\etc 目录。我编辑文件“jetty-ssl.xml”以确保 HTTPS 端口设置为 8443。当我重新启动 Jetty 服务器时，它似乎正在侦听端口 8443，并且启动序列没有返回任何错误。但是，当我尝试使用 HTTPS 连接时，出现错误。是否有规定的方法来生成自签名证书并在 Jetty 的 SSL 配置中使用此证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:46:58.730

1) [http://wiki.eclipse.org/Jetty/Howto/Configure_SSL](http://wiki.eclipse.org/Jetty/Howto/Configure_SSL)

2) [http://git.codehaus.org/gitweb.cgi?p=jetty-project.git;a=tree;f=jetty-win32;h=e296255dc355f3abf37bf3f4faddfe383505416c;hb=HEAD](http://git.codehaus.org/gitweb.cgi?p=jetty-project.git;a=tree;f=jetty-win32;h=e296255dc355f3abf37bf3f4faddfe383505416c;hb=HEAD)

您需要针对您的特定用途进行调整，我们在很久以前就停止构建它，因为它的许可证发生了变化，而且我们使用的版本变得很糟糕。或者看看 tanuki 东西的更新版本，如果你能处理许可证，请使用它。

# r - 将因子映射到数据框

> ID：11473308
> 
> 赞同：9
> 
> 时间：2012-07-13T15:14:57.447
> 
> 标签：r

我的采样数据分布在两个数据集上。`loc`描述地理位置，`spe`包含发现的物种。不幸的是，采样站由两个因素（`cruise`和`station`）描述，所以我需要为两个数据集构建唯一标识符

```
>loc
  cruise station     lon    lat
1    TY1      A1 53.8073 6.7836
2    TY1       3 53.7757 6.7009
3    AZ7      A1 53.7764 6.6758 
```

和

```
>spe
  cruise station     species abundance
1    TY1      A1 Ensis ensis       100
2    TY1      A1    Magelona         5
3    TY1      A1    Nemertea        17
4    TY1       3    Magelona         8
5    TY1       3     Ophelia      1200
6    AZ7      A1     Ophelia       950
7    AZ7      A1 Ensis ensis        89
8    AZ7      A1        Spio         1 
```

我需要的是添加一个唯一`ID`标识符

```
 cruise station     species abundance     ID
1    TY1      A1 Ensis ensis       100 STA0001
2    TY1      A1    Magelona         5 STA0001
3    TY1      A1    Nemertea        17 STA0001
4    TY1       3    Magelona         8 STA0002
5    TY1       3     Ophelia      1200 STA0002
6    AZ7      A1     Ophelia       950 STA0003
7    AZ7      A1 Ensis ensis        89 STA0003
8    AZ7      A1        Spio         1 STA0003 
```

这是数据

```
loc<-data.frame(cruise=c("TY1","TY1","AZ7"),station=c("A1",3,"A1"),lon=c(53.8073, 53.7757, 53.7764),lat=c(6.7836, 6.7009, 6.6758))

spe<-data.frame(cruise=c(rep("TY1",5),rep("AZ7",3)),station=c(rep("A1",3),rep(3,2),rep("A1",3)),species=c("Ensis ensis", "Magelona", "Nemertea", "Magelona", "Ophelia", "Ophelia","Ensis ensis", "Spio"),abundance=c(100,5,17,8,1200,950,89,1)) 
```

然后，我构造了`ID`for`loc`

```
 loc$ID<-paste("STA",formatC(1:nrow(loc),width=4,format="d",flag="0"),sep="") 
```

但我如何映射`ID`到`spe`？

我发现涉及两个嵌套循环的方式对于像我这样的程序程序员来说非常漂亮（如果嵌套循环可以被称为漂亮的话）。我很确定 R 中的两行代码会更高效、更快，但我想不通。我真的希望我的代码有更多的美感，这太不合时宜了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:23:05.583

实际上，我认为这是`merge`在基本 R 中起作用的情况：

```
merge(spe, loc, all.x=TRUE)

  cruise station     species abundance     lon    lat
1    AZ7      A1     Ophelia       950 53.7764 6.6758
2    AZ7      A1 Ensis ensis        89 53.7764 6.6758
3    AZ7      A1        Spio         1 53.7764 6.6758
4    TY1       3    Magelona         8 53.7757 6.7009
5    TY1       3     Ophelia      1200 53.7757 6.7009
6    TY1      A1 Ensis ensis       100 53.8073 6.7836
7    TY1      A1    Magelona         5 53.8073 6.7836
8    TY1      A1    Nemertea        17 53.8073 6.7836 
```

* * *

要查找唯一标识符，请使用`unique()`：

```
unique(paste(loc$cruise, loc$station, sep="-"))
[1] "TY1-A1" "TY1-3"  "AZ7-A1" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T15:27:38.067

您可以将因子与 结合起来`interaction`。

如果您不关心 ID 列的标签，那么解决方案非常简单。

```
loc <- within(loc, id <- interaction(cruise, station))
spe <- within(spe, id <- interaction(cruise, station)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:27:10.950

只是为了说明这会导致（可能感兴趣）：

`ID`如前所述，添加唯一标识符`loc`。

```
loc$ID<-paste("STA", formatC(1:nrow(loc), width=4, format="d", flag="0"), sep="") 
```

正如 Andrie 所提议的 `merge(spe, loc, all.x=TRUE)`那样，根据需要组合 data.frames，消除`loc`其中可能没有对应项的所有元素`spe`（如果应该保留这些元素，请`merge(spe, loc, all.x=TRUE, all.y=TRUE)`改为使用。

我想要一个每个站所有物种丰度的表，它是通过以下方式实现并转换为数据框的

```
as.data.frame.matrix(xtabs(abundance ~ ID + species, merge(spe, loc, all.x=T)))
        Ensis ensis Magelona Nemertea Ophelia Spio
STA0001         100        5       17       0    0
STA0002           0        8        0    1200    0
STA0003          89        0        0     950    1 
```

感谢安德烈和棉花先生

# java - 如何让我的 Java 代码在连接后显示结果？

> ID：11473315
> 
> 赞同：3
> 
> 时间：2012-07-13T15:15:13.070
> 
> 标签：java, php, html

我有 java 代码，它连接到我编写的 PHP 脚本并发布到它。PHP 联系 API 进行评估并以 html 格式返回结果。

Java 似乎可以工作，但在 Eclipse 中，结果是原始 html，而不是呈现形式。

我想让我的结果在浏览器中启动。我尝试将它放在我的 xampp 文件夹中，但什么也没做，它只是在单击文件时下载了 Java 脚本。

关于我如何做到这一点的任何想法？我愿意以某种方式更改 PHP 代码，让它只返回变量并让 Java 创建一些表单供用户查看。我只是现在不太擅长 Java。想法和例子都很棒！

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;

public class Connect {

    public void POSTDATA() {
    }
    public static void main(String[] args) {
        try {
        // Construct data
        String data = URLEncoder.encode("ipaddress", "UTF-8") + "=" + URLEncoder.encode("98.36.2.53", "UTF-8");

        // Send data
        URL url = new URL("http://localhost/myfiles/WorkingVersion.php");
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);
        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(data);
        wr.flush();

        // Get the response
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line;
        while ((line = rd.readLine()) != null) {
            System.out.println(line);
     }
        wr.close();
        rd.close();
    } catch (Exception e) {
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:25:55.030

您的 Java 应用程序只需连接到服务器并使用 ipaddress=98.36.2.53 执行 POST。如果您想在浏览器中显示结果，为什么还要使用 Java？

几个简单的解决方案是：

*   重写您的 PHP 脚本以通过 GET 接受参数并通过 Web 浏览器中的 URL 访问它`http://localhost/myfiles/WorkingVersion.php?ipaddress=98.36.2.53`

*   编写一个 HTML 页面，该页面使用一个表单来 POST 数据——例如，通过一个`<input type="hidden" name="ipaddress" value="98.36.2.53">`. 您将需要用户交互来发布来自，但这可能就足够了

*   使用 JavaScript 访问服务器，发出 POST 请求并读取数据。由于 JavaScript 在浏览器中运行，因此很容易将其显示在网页上（例如，通过使用 jQuery 的[.html( htmlString )](http://api.jquery.com/html/)方法）。

# ruby-on-rails - 需要帮助 Rails 3.2.3 - 将用户数据预填充到 simple_form 中，以便将书籍资源传递到 gmaps4rails 以将标记呈现到地图中。

> ID：11473317
> 
> 赞同：1
> 
> 时间：2012-07-13T15:15:14.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, simple-form, gmaps4rails

感谢阅读，我需要帮助；

场景：用户在网站上注册，输入他们的“地址”例如。San Francisco, CA -gmaps4rails 然后它很神奇，它显示在用户个人资料显示视图 -user location -San Francisco 中。{此处不显示地图}

在书展上显示地图。用户可以上传一本书 - 我正在使用 Simple_form {我是否在此处使用 @user.address 添加隐藏字段？- 很抱歉，这样做了，但没用。}

因此，如果我将显示视图 Location <%= @book.user.address %> 放入 - 它显示旧金山。

但是，在下面的地图上 - 什么都没有显示。

如何让 2 相互链接？这样人们就不必花时间填写他们的位置，如果它已经与他们的帐户相关联？我是否必须为 simple_form 呈现用户地址和书本地址的关联，但是我如何使其在 gmaps4rails 中正常工作。

另外，正在看人们使用 JS 来渲染标记，你会推荐吗？不过，我想使用纯粹的服务器端——因为我想使用 Ajax 提交书籍表单并显示在索引中，也许将鼠标悬停在显示地图上。

期待您的回复，因为我一直坚持下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:38:43.897

您可以`@book`在控制器中设置地址，也可以在视图中设置默认值。例如：

```
@book.address ||= @book.user.address 
```

# java - JQUERY - getJSON - 返回数据项的问题

> ID：11473318
> 
> 赞同：0
> 
> 时间：2012-07-13T15:15:14.727
> 
> 标签：java, jquery, ajax, httpserver

我有以下 getJSON 请求：

```
$.getJSON(url + "&callback=?", {
    postData: myText
}, function(data) {
    alert('data : ' + data);
}); 
```

对于我的测试，我有一个在“localhost:8080”上运行的应用程序，我正在 JSP 中从这里执行这个 getJSON，并且在“localhost:8090”上运行一个 HTTP 服务器。

我在上面的 getJSON 中使用的 URL 是这个 HTTP 服务器的 URL，即“http://localhost:8090/json”。这是可用的。在这个 URL 上，我正在输出一个基于 JSON 的字符串。

所以.. 在我的 getJSON 中，我想从 HTTP 服务器页面上显示的内容中获取这些数据。

但它不起作用。

这是我的 HTTP 服务器代码：

```
public void RunHttpServerStart() {
    HttpServer server = null;

    try
    {

       HttpJsonHandler handler = new HttpJsonHandler();
       server = HttpServer.create(new InetSocketAddress(8090), 10);
       server.createContext("/json", handler); // The handler holds my JSON string being output
       server.setExecutor(null); // creates a default executor
       server.start();

       System.out.println("Server is started");

       while(handler.shutdown == false) { Thread.sleep(1000); }

       System.out.println("Stopping server");

    }
    catch(Exception ex) { System.out.println(ex.getMessage());}
    finally { 
        if(server != null)
            server.stop(0);
    }
} 
```

我已经使用来自闪烁的图像实现了 JQUERY 网站上的 getJSON 示例，但是如何在 getJSON 调用中取回这个字符串数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:23:28.317

`$.get`尝试使用带有数据类型的常规`jsonp`。

```
$.get(url, {
    postData: myText
}, function(data) {
    alert('data : ' + data);
}, 'jsonp'); 
```

# asp.net - ASPX 视图引擎

> ID：11473320
> 
> 赞同：4
> 
> 时间：2012-07-13T15:15:21.540
> 
> 标签：asp.net, razor, openxml, spark-view-engine, nhaml

所以[Razor 视图引擎](http://razorengine.codeplex.com/)是开源的，可以在 MVC 特定的实现之外使用。但是，对于我的特定项目（我想在[WordprocessingML](http://openxmldeveloper.org/) Razor 中启用此功能的地方将不起作用，因为它试图变得聪明并弄清楚什么是标记和什么是 Razor 代码。

让我澄清一下，Razor 可以在 WordprocessingML 中工作，只要您想放弃在 MS Word（或其他兼容 openXML 的编辑器）中打开和编辑文档的想法。

出于这个原因，我在想如果你可以将每一行代码封装在某种 XML 标记中，你就可以克服这个问题，但这实际上只是 ASPX 视图引擎。

如果需要，我认为这对于我想做的事情来说是完美的，同时支持 C# 的全部功能。问题是我不认为 ASPX 视图引擎可用于直接实现。

在[ASP.Net 站点上](http://www.asp.net/mvc/mvc3)，Microsoft 列出了其他一些视图引擎，例如[Spark](http://sparkviewengine.com/)、[NHaml](http://code.google.com/p/nhaml/)或[NDjango](http://ndjango.org/)。

你以前用过这些吗？你会推荐哪个？你会避免哪个？任何其他想法将不胜感激。

提前致谢

# php - 将自定义类附加到 wordpress 进展主题

> ID：11473325
> 
> 赞同：-1
> 
> 时间：2012-07-13T15:15:41.253
> 
> 标签：php, wordpress, function

我想通过向页面添加一个选项来为该特定页面附加自定义“类”来破解进展主题。它类似于您可以选择页面模板的常规页面。但不是选择页面模板，用户只需选择他/她想要在页面上附加的类。该类将有一个 CSS 覆盖。

例子：

**HTML**

```
<body class=" red ...other headway css classes..." "> 
```

**CSS**

```
body.red #container { background: red }
body.green #container { background: green } 
```

1.  我想添加一个自定义下拉列表，列出一些供主题选择的类选项。下拉列表中的示例项目。“红色主题”，“蓝色主题”。这也可以使用自定义字段来完成，但更喜欢使用下拉菜单，这样用户就不会弄错了。

2.  将在页面上选择的类附加到该页面的标记中。我尝试在我的functions.php上使用“body_class”，但它完全删除了所有导致我的页面中断的类。我想要做的只是附加自定义类，而不是擦除身体的整个类。

请指教。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:58:04.917

Headway 已经为页面上的自定义类提供了一个自定义元框，所以也许你可以：

1.  破解它以显示下拉菜单
2.  创建某种元框，将下拉列表中的选择保存到 Headway 写入的同一字段（如果可能的话），然后从管理员中删除/隐藏 Headway 元框
3.  在页面屏幕上添加一个显示可用课程的信息框，并只使用 Headway 元框（升级安全，保持事物清洁的最佳方法）

# java - 将 InputStreamReader 转换为 (char)

> ID：11473327
> 
> 赞同：0
> 
> 时间：2012-07-13T15:15:43.310
> 
> 标签：java

我目前正在研究*Java：* Herbert Schildt 的完整参考第 8 版。我是最近的 compsci 毕业生和新手程序员。

在 I/O 章节中，本书提供了一小段示例代码（我已将其包含在下面）。该代码创建了一个 BufferedReader，它与 InputStreamReader(System.in) 作为参数一起提供（第 6 行）。我检查了[InputStreamReader 的 Java SE7 文档，](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)它说它“[...]读取字节并将它们解码为字符 [...]”。我的问题是，为什么在示例代码的第 9 行将 br.read() 分配给 'c' 时有必要（或者甚至有必要）将其转换为 char？

非常感谢您提供的任何帮助。

杰米

```
1\.  import java.io.*
2\.  
3\.  class BRRead {
4\.       public static void main(String args[]) throws IOException {
5\.            char c;
6\.            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
7\.            System.out.println("Enter characters, 'q' to quit.");
8\.            do {
9\.                 c = (char) br.read();
10\.                System.out.println(c);
11\.           } while(c != 'q');
12\.      }
13\. } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:19:25.750

`read()`方法返回类型的值`int`。因此，需要铸造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:24:13.563

您的`.read()`方法是从`BufferedReader`类中调用的，根据文档，您`br.read()`将返回 int。因此，为了将该 int 转换为 char，您需要对其进行转换。

[http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)

```
public int read()
         throws IOException
Reads a single character.
Overrides:
read in class Reader
Returns:
The character read, as an integer in the range 0 to 65535 (0x00-0xffff), or -1 if the end of the stream has been reached
Throws:
IOException - If an I/O error occurs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:00:36.873

代码不正确。'c' 应声明为 'int'，以便将其与 -1 进行比较是有意义的。如果为-1，则循环应退出，否则在用作char 时必须将其强制转换为char。

# android - 安卓相机 API

> ID：11473339
> 
> 赞同：0
> 
> 时间：2012-07-13T15:16:07.403
> 
> 标签：android

我为 android 创建了一个相机 API。这很好用。现在，如果加速度计读数 > 2.0（Gforce > 2.0），我正在尝试自动打开它，我也编写了一个活动来测量力。但是那部分不起作用。（当我单独检查加速度计部分时它工作正常。但是当我将它添加到相机项目时它不起作用）我该如何纠正这个问题。我已经参考下面的链接来制作相机。 [http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

下面是我的加速度计代码

```
package com.example;

import java.text.DecimalFormat;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;

public class Measure extends Activity{

    SensorManager sensorManager;
    TextView current;

    private double currentAccel= 0.0f;
    private static DecimalFormat REAL_FORMATTER = new DecimalFormat("0.####");

    private final SensorEventListener sensorEvent = new SensorEventListener(){
        double calibration = SensorManager.STANDARD_GRAVITY;

        @Override
        public void onAccuracyChanged(Sensor sensor, int accuracy) {

        }
        @Override
        public void onSensorChanged(SensorEvent event) {
                double x = event.values[0];
                double y = event.values[1];
                double z = event.values[2];

                double a = Math.round(Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(z, 2)));
                currentAccel = ((float)(a-calibration));

        }
};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        current = (TextView)findViewById(R.id.current);
        current.setTextSize(1, 30);

        sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
        Sensor accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        sensorManager.registerListener(sensorEvent, accelerometer, SensorManager.SENSOR_DELAY_FASTEST);

        Timer updateTimer = new Timer("gForceUpdate");
        updateTimer.scheduleAtFixedRate(new TimerTask(){
                public void run() {
                        updateGUI();
                }
        }, 0, 50);

    }

    private void updateGUI(){
        runOnUiThread(new Runnable(){
                @Override
                public void run() {

                       double currentG = currentAccel / SensorManager.STANDARD_GRAVITY ;

                       current.setText(REAL_FORMATTER.format(currentG));

                      /* if(currentG>2.3){
                           CameraDemo obj = new CameraDemo();

                        String acl=Double.toString((Double)currentG);
                        String result=obj.sendAccelerationData(acl);

                        }
                        */
                }
        });
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:40:14.117

我认为您不应该在主线程上创建 CameraDemo。在 updateTimer 中，调用另一个方法，该方法将使用 Handler 或 AsyncTask，与主线程外的相机进行交互，并将更改回传到 gui。

这是我用来理解这一点的教程。 [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# javascript - 如何使用推文按钮弹出新窗口

> ID：11473345
> 
> 赞同：8
> 
> 时间：2012-07-13T15:16:20.610
> 
> 标签：javascript, jquery, popup, twitter, tweets

我的页面上有许多自定义推文按钮，这些按钮是使用循环执行的这行 PHP 动态生成的：

```
echo "<li><a href=\"https://twitter.com/share?text=Check%20out%20{$items[$i]['name']}%20at%20completeset.us/item/{$items[$i]['item_id']}&url=&via=cmpltst\"  class=\"twitter\">T</a></li>"; 
```

这工作得非常好，但是，这在同一个选项卡中执行并将我导航离开它被调用的页面。我想在新窗口中打开共享对话框，但我的 Javascript 背景仅限于表单验证和一些 Jquery Ajax 调用，所以我不知道如何去做。如何在新窗口中弹出对话框？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-07-23T05:47:52.460

这对我很好

```
<a target=_blank href=\"https://twitter.com/share?text=Check%20out%20{$items[$i]['name']}%20at%20completeset.us/item/{$items[$i]['item_id']}&url=&via=cmpltst\"  class=\"twitter\  onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" >T</a> 
```

将 onclick 添加为

```
 onclick="javascript:window.open(this.href, '', 'menubar=no,
             toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:19:12.200

您只需将“target=_blank”添加到您的 a href 中：

```
echo "<li><a target=_blank href=\"https://twitter.com/share?text=Check%20out%20{$items[$i]['name']}%20at%20completeset.us/item/{$items[$i]['item_id']}&url=&via=cmpltst\"  class=\"twitter\">T</a></li>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:12:59.563

只需为您的锚标记添加一个点击 Javascript 函数，然后在该函数中使用 window.open() 通过传递您的 URL 以在新窗口中打开它。希望这可行

# mod-rewrite - 解释这个重写规则

> ID：11473347
> 
> 赞同：1
> 
> 时间：2012-07-13T15:16:29.173
> 
> 标签：mod-rewrite, redirect, url-rewriting

有人可以用英语解释这些重写规则，以便我可以更好地理解语法 - 我的初步理解如下：

如果 URL 以斜杠开头或结尾，则显示[http://www.example.com/](http://www.example.com/)：

```
RewriteRule ^/$                 http://www.example.com/ [P,L,QSA,NC] 
```

如果 URL 以斜杠开头，后跟一个不包含斜杠的字符串，然后是一个点并且不包含另一个带斜杠的字符串，则将其重定向到[http://www.example.com/](http://www.example.com/) $1

```
RewriteRule ^/([^/]+\.[^/]+)$   http://www.example.com/$1 [P,L,QSA,NC] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:18:55.490

第一个正则表达式说：它必须以斜线开头和结尾。所以这里只有纯“/”匹配。如果匹配，重定向的 url 将通过内置代理模块传递，而不是重定向浏览器。再次附加所有查询参数，并且在该请求中不再进行重写。还提到的 NC（不区分大小写）在这里没有意义。

您对第二个表达式的描述是正确的。防止匹配斜线用于防止子目录的意外匹配。所以只有对顶级目录中对象的请求才匹配。与第一个表达式相同的附加规则适用，并且不区分大小写也是没有意义的。

# android - Android中LocationManager的高效使用

> ID：11473348
> 
> 赞同：1
> 
> 时间：2012-07-13T15:16:29.303
> 
> 标签：android, gps, broadcastreceiver, locationmanager

我正在尝试优化必须实现以下目标的 Android 应用程序：

*   每小时检索一次 GPS 位置和 doSomeWork()

*   在任何其他时间，如果设备移动超过@MINIMUM_DISTANCE，将更新频率增加到大约 5 分钟以记录移动，当移动结束时，我们可以返回每小时更新。

现在，AlarmManager 每小时触发一次可以满足第一个要求。这是完成这项任务的一种很好的电池效率方法。但是我不确定如何最好地完成第二个要求。

我是不是该：

*   注册一个每隔 5 分钟触发一次的 AlarmManager 与每小时计时器？每次注册LocationManager并尝试拉出一个位置，与之前的位置比较以确定是否发生移动。

*   在我每小时醒来后注册一个 LocationManager，最小距离参数等于我所需的最小移动。

*   还有什么？

我可以看到每种方法的优缺点。

在我看来，使用 LocationManager 最小距离参数是更简洁的解决方案，但我担心电池消耗，无论我的应用程序是否正在接收更新，这是否会使 GPS 一直处于高温状态？我也不确定注册接收器的最佳位置在哪里，我知道保持服务 100% 的时间运行是一种糟糕的做法（更不用说几乎不可能了）。

是的，我是 Android 新手！即将去测试LocationManager的行为。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:54:48.220

我的解决方案运行良好，是保持 NETWORK_PROVIDER（如果我可以免费获得一些更新的机会是被动的）注册并在 GPS_PROVIDER 不存在的任何时候收听。如果在先前检索到的位置之外看到运动，我可以切换到全 GPS 来监控运动。

准确性很差，但至少足够好。电池消耗非常低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:55:17.590

如果用户上车开车会发生什么？如果您`LocationManager`设置了最小距离，您会相对较快地收到回调（好吧，我不知道您的最小距离是多少，但是......）。在另一种情况下，您可能需要等待整整 5 分钟，直到您发现用户已移动。

但是，如果您真的只需要每 5 分钟更新一次，那么我肯定会使用该`AlarmManager`方法，因为这将保证您不会在 5 分钟时段之间使用 GPS 进行任何操作。

但请注意，如果用户移动且 GPS 未打开，则 GPS 可能需要一些时间才能得到修复。所以不要指望你能在启动 GPS 时立即得到准确的定位。

# android - Android build.xml 已损坏

> ID：11473353
> 
> 赞同：0
> 
> 时间：2012-07-13T15:16:38.817
> 
> 标签：android, eclipse

我在 Eclipse 上的一个 Android 项目上工作了一段时间。今天突然打开Eclipse，在项目名附近看到一个感叹号，尝试构建时，build.xml文件报错：

```
 <import file="${sdk.dir}/tools/ant/build.xml" />

<!-- These targets only exist so they will be visible in IntelliJ. -->
<target name="ij-debug" depends="clean,debug"/> 
<target name="ij-release" depends="clean,release"/>
<target name="ij-install" depends="clean">
  <exec command="ant debug install"/>
</target>
<target name="ij-uninstall" depends="uninstall"/> 
```

错误是：

```
 Cannot find ${sdk.dir}/tools/ant/build.xml imported from           
   C:\Users\myuser\Desktop\projectname\android\build.xml 
```

和

```
 Target clean does not exist in this project
  Target uninstall does not exist in this project 
```

我曾尝试检查“忽略所有构建文件问题”，但随后出现新错误：

```
Source resource does not exist:C:\Users\myuser\Desktop\projectname\android\local.properties 
```

有谁知道如何解决这个问题？

谢谢你。

**编辑**

这是项目的文件夹：

![项目文件夹](../Images/6142f37980377d550758a661013a558e.png)

# javascript - 在 IE6 中禁用 JavaScript 仍然无法看到脚本代码？

> ID：11473357
> 
> 赞同：2
> 
> 时间：2012-07-13T15:16:45.320
> 
> 标签：javascript, asp.net

我是初学者。这与我试图学习的不同选项更相关。

我只是举个例子

```
 <!--
    document.write("<h1>Hello World</h1>");
    //--> 
```

据说如果禁用了javascript，我们应该使用这个标签来避免脚本在浏览器中显示。所以禁用了Javascript通过以下步骤

单击工具菜单 从菜单中选择 Internet 选项... 单击 Internet 选项弹出窗口中的安全选项卡 单击自定义级别... 按钮以访问您的安全设置 几乎一直向下滚动到脚本部分 选择启用Active scripting 按钮 单击 OK 以完成该过程 在要求确认时单击 Yes

```
 document.write("<h1>Hello World</h1>"); 
```

然后我删除了标签，现在我期待我能够看到脚本错误

```
 "document.write("<h1>Hello World</h1>");" 
```

按原样显示，因为 Javascript 被禁用并且标签被删除。但我看到的是没有任何显示的空白页面。some1 可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:20:12.403

我想你可能会感到困惑。脚本应包含在`<script> script here </script>`标签中。如果您需要向未启用 javascript 的人显示内容，您可以使用`<noscript> //stuff to be displayed when javascript disabled </noscript>`标签来实现。

你的例子如下

```
<script type="text/javascript" >
    document.write("<h1>hello world</h1>");
</script>
<noscript>
    <h1>Sorry but your browser does not have javascript enabled</h1>
</noscript> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:08:01.587

脚本标签内的注释

```
<script>
    <!--

    //-->
</script> 
```

适用于不了解`<script>`标签是什么的浏览器。您在谈论 Netscape 1，任何教您这些东西并使用 document.write 的书都已过时。

# java - jOOQ 可以为 Oracle 同义词生成代码吗？

> ID：11473358
> 
> 赞同：2
> 
> 时间：2012-07-13T15:16:46.117
> 
> 标签：java, code-generation, jooq, synonym

我的团队一直在试验[jOOQ](http://www.jooq.org)，它看起来很有效。但是，我们必须使用一些 Oracle 同义词，这些同义词是指一些 Oracle 视图。我们能够使用视图，但我们需要通过同义词使用它。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:48:15.333

对于当前版本的 jOOQ (jOOQ 3.8.1)，这是不可能的。但是，它在路线图上：

[https://github.com/jOOQ/jOOQ/issues/1563](https://github.com/jOOQ/jOOQ/issues/1563)

# macos - 是否可以在使用 AVFoundation 录制的同时进行视频文件“分块”/分段？

> ID：11473360
> 
> 赞同：6
> 
> 时间：2012-07-13T15:16:53.187
> 
> 标签：macos, video, avfoundation

我正在尝试使用 AVFoundation 在 OS X 上录制视频，但它会等到录制结束才能保存文件。我希望能够让它保存每 5/10/X 秒捕获的任何内容。

我需要这样做，以便在保存视频文件时，我可以在视频仍在录制时将这些片段流式传输到服务器，这样我就可以从服务器上提供“几乎实时”的视频。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:04:24.993

您可以要求 AVFoundation 在录制时向您出售帧，然后只需将一组帧传递给服务器。但是您要问的问题是非常复杂的，因为带宽或临时网络故障会导致延迟/跳过等。

我们在这里讨论了通过使用 AVCaptureSession 和 AVCaptureVideoDataOutput 来出售 MPEG 帧： [从 iPhone 上传近乎实时的视频](https://stackoverflow.com/questions/7100380/near-real-time-video-upload-from-iphone/8684264#8684264)

如果您希望各个块可播放，则必须将它们包装在 MOV 或 MPEG 容器中，但在您的场景中听起来并不需要它。

# ruby - 如何从自动编码参数中停止 Net::HTTP.post_form

> ID：11473368
> 
> 赞同：1
> 
> 时间：2012-07-13T15:17:21.547
> 
> 标签：ruby, net-http

我正在尝试使用带有 minitest 和 Net:HTTP 的 ruby​​ 测试 Web 服务的功能。

这段代码

```
class TestOne <  MiniTest::Unit::TestCase

load 'test/test_helper.rb'

    def test_one

        xml_to_transmit = "
<?xml version='1.0' encoding='UTF-8' ?>
<MyRequest version='1.0'>
    <Id>1</Id>
</MyRequest>"

        url = URI('http://example.com/api')
        resp, data = Net::HTTP.post_form(url,nil => xml_to_transmit)
    end
end 
```

将转义我试图作为参数发送到服务器的 xml。有没有办法不转义地发送它？（我无法更改服务器端代码。）

这是服务器接收到的参数

```
=%0A%3C%3Fxml+version%3D%271.0%27+encoding%3D%27UTF-8%27+%3F%3E%0A%3CMyRequest+version%3D%271.0%27%3E%0A%09%3CId%3E1%3C%2FId%3E%0A%3C%2FMyRequest%3E 
```

我的 test_helper.rb 非常基础

```
require 'minitest/unit'
require 'minitest/autorun' 
require 'net/http' 
```

有没有人对为什么会发生这种情况以及我能做些什么有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:35:58.610

这应该有效：

```
req = Net::HTTP::Post.new(url.path)
req.body = xml_to_transmit
req.content_type = "text/xml"

res = Net::HTTP.start(url.host, url.port) { |http|
  http.request(req)
} 
```

# c - 如何在 C 程序中分隔这个数字 -51.235

> ID：11473369
> 
> 赞同：0
> 
> 时间：2012-07-13T15:17:22.513
> 
> 标签：c, printf

我需要将`-51.235`文件中的哪个分开并将其作为 - ， 51 ， .235 我的问题是，当我尝试从文件中读取它并在代码块中打印它时，我可以将它作为一个 int 并同时浮动时间所以我可以减去int（51）和float（51.235），我怎样才能分开我把它作为一个字符的符号？这是我到目前为止所拥有的

```
if (comand == 'S')
{
  fscanf(entrada, "%d %f",&y, &a);
  printf("\n\nthe separate number is: %d , %f",y,a); 
} 
```

它给了我：单独的数字是：`-51`，`0.235000`（我怎样才能消除最后的 3 个零？）

在记事本中显示：

```
S -51.235 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:41:40.153

你可以这样做：

```
#include<stdio.h>
#include<math.h>

int main(void)
{
  float num = -51.235;
  char sign;
  int intpart;
  float floatpart;

  sign=(num>=0.00f)?'+':'-';
  intpart=floor(fabs(num));
  floatpart=fabs(num)-intpart;
  printf("%c,%d,%g",sign,intpart,floatpart);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:47:05.630

只有几步：

1.  检查是否是**肯定**的，如果是的话：把你的`-`
2.  您的号码 = 您的号码的**绝对值**（如果为正则删除`-`，如果不是则删除）。
3.  转换为**int**以获取**不带小数的数字**
4.  得到小数：只需用**Int值减去****原始浮点数**，结果 = 0.XXX

 **所有这些都集中在一行中：

```
float num = -51.235555;
printf("%c %d %.3f", ((num > 0.0 ) ? ' ' : '-'), (int)num, (num - (float)((int)num))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:23:28.937

问题：它给了我：单独的数字是：-51，0.235000（我怎样才能消除最后的 3 个零？）

答案是**消除最后的 3 个零？**

```
printf("\n\nthe separate number is: %d , %.3f",y,a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:08:15.783

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

char getChar(char **p){
    return *(*p)++;
}

void skipSpace(char **p){
    while(isspace(getChar(p)));//skip space char
    --(*p);//unget
}

char getSign(char **p){
    if(**p=='+' || **p=='-') return *(*p)++;
    return ' ';
}

void getNatural(char **p, char *buff){
    while(isdigit(**p))
        *buff++=*(*p)++;
    *buff='\0';
}

void getFloatPart(char **p, char *buff){
    char point;
    point = getChar(p);
    if(point != '.'){
        *buff = '\0';
    } else {
        *buff++ = point;
        getNatural(p, buff);
    }
}

void separate_float(char **p, char *sign, char *int_part, char *float_part){
    skipSpace(p);
    *sign = getSign(p);
    getNatural(p, int_part);
    getFloatPart(p, float_part);
}

int main(){
    char line[128]="S -51.235";
    char *p = line;
    char command;
    char sign, int_part[32], float_part[32];

    command = getChar(&p);
    if(command == 'S'){
        separate_float(&p, &sign, int_part, float_part);
        printf("%c,%s,%s\n", sign, int_part, float_part);//-,51,.235
        printf("%d %g\n", atoi(int_part), atof(float_part));//51 0.235
    }
    return 0;
} 
```**

# ios - Segue 不会使用 performSegueWithIdentifier 加载

> ID：11473371
> 
> 赞同：0
> 
> 时间：2012-07-13T15:17:35.663
> 
> 标签：ios, xcode, segue

我给了我的 segue 身份 modaltomenu

![模态菜单](../Images/97b0fb3baa565720f18b83b13a81a7eb.png)

在我的代码中，我使用以下内容调用 segue：

```
if([login_status isEqualToString:@"success"]){
            //start the menuviewcontroller
            [self performSegueWithIdentifier:@"modaltomenu" sender:self];

            NSLog(@"segue %@", @"performed");
        } 
```

if 语句始终为真。

然而，第二个视图永远不会加载。此代码在第一个视图加载时运行。

为什么我的 segue 没有加载？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:30:18.330

你说代码是在第一个视图加载时运行的，所以我在 viewDidLoad 方法中假设它是正确的吗？如果是这样，请尝试将该 if 语句移至视图控制器生命周期中的 viewDidAppear 方法。ViewDidLoad 通常只发生一次，而每次视图出现在屏幕上时都会调用 viewDidAppear。所以它看起来像......

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:YES];
    if([login_status isEqualToString:@"success"]){
        //start the menuviewcontroller
        [self performSegueWithIdentifier:@"modaltomenu" sender:self];

        NSLog(@"segue %@", @"performed");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:42:17.777

要进一步排除故障，请将其放入该 VC：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"segue identififer = %@",segue.identifier);
} 
```

并确保您的代码`viewDidLoad`按预期执行。如果没有，您可能需要重新考虑调用该`performSegue`方法的位置。

# mysql - MySQL Bug LIMIT in JOIN-Query change values in records

> ID：11473372
> 
> 赞同：2
> 
> 时间：2012-07-13T15:17:35.877
> 
> 标签：mysql, join, limit

in the following scenario:

```
CREATE TABLE `table1` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `text1` varchar(29) NOT NULL,
  `flag` bit(1) DEFAULT NULL,
  `reference` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE ,
  UNIQUE KEY `idx_text` (`text1`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `table1` (id, text1, flag, reference) VALUES
(31486, 'YWXH-D6N4-XXH6', 0, NULL), 
(31487, 'CBH0-UJBC-MFTO', 0, NULL), 
(31488, 'FRQM-E6MW-6VFE', 1, 1657), 
(31489, 'LZOS-EYDT-1BBF', 0, NULL), 
(31490, 'D1XQ-YKAX-XQRC', 0, NULL);

CREATE TABLE `table2` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `value1` int(11) NOT NULL,
  `value2` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `value1` (`value1`),
  KEY `value2` (`value2`)
) ENGINE=MyISAM AUTO_INCREMENT=20068 DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;

INSERT INTO table2 (id, value1, value2) VALUES
(1657, 1891, 1748);

-- the tables are shortened from "real" tables, i used SHOW CREATE <table> to create this script. 
```

are the results of the following queries different. here mysql returns for the record with id 31488 and 31490 the wrong value for the bit-field:

Query 1:

```
SELECT m.id, m.text1, m.flag, m.reference 
FROM table1 AS m LEFT JOIN table2 AS v ON v.id = m.reference 
GROUP BY m.text1 ORDER BY m.text1 DESC LIMIT 0, 5; 
```

returns the correct result:

```
id    | text1          | flag | reference
31487 | CBH0-UJBC-MFTO | 0    | NULL
31490 | D1XQ-YKAX-XQRC | 0    | NULL
31488 | FRQM-E6MW-6VFE | 1    | 1657
31489 | LZOS-EYDT-1BBF | 0    | NULL
31486 | YWXH-D6N4-XXH6 | 0    | NULL 
```

while Query 2

```
SELECT m.id, m.text1, m.flag, m.reference 
FROM table1 AS m LEFT JOIN table2 AS v ON v.id = m.reference 
GROUP BY m.text1 ORDER BY m.text1 DESC LIMIT 0, 4; 
```

returns this:

```
id    | text1          | flag | reference
31487 | CBH0-UJBC-MFTO | 0    | NULL
31490 | D1XQ-YKAX-XQRC | 1    | NULL
31488 | FRQM-E6MW-6VFE | 0    | 1657
31489 | LZOS-EYDT-1BBF | 0    | NULL 
```

so here is my question:

Im using Joomla CMS, and in the code of the component i can change the whole query except the LIMIT-part. Joomla add the limit part to the query because of the pagination.

Is there a way to change the query that it works with the LIMIT-command?

oh, my MySQL-Version on Server is 5.1.61 (but this bug still exists on my client v5.5.16)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:27:42.267

Your a) not inserting the data correctly - [see the BIT data type docs](http://dev.mysql.com/doc/refman/5.5/en/bit-type.html) and b) not selecting the data correctly - [see the docs on the Bit-Field Literals](http://dev.mysql.com/doc/refman/5.5/en/bit-field-literals.html)

You need to insert using the following syntax

```
INSERT INTO `table1` (id, text1, flag, reference) VALUES
(31486, 'YWXH-D6N4-XXH6', b'0', NULL), 
(31487, 'CBH0-UJBC-MFTO', b'0', NULL), 
(31488, 'FRQM-E6MW-6VFE', b'1', 1657), 
(31489, 'LZOS-EYDT-1BBF', b'0', NULL), 
(31490, 'D1XQ-YKAX-XQRC', b'0', NULL); 
```

Then select like this :

```
SELECT m.id, m.text1, bin(m.flag), m.reference 
FROM table1 AS m LEFT JOIN table2 AS v ON v.id = m.reference 
GROUP BY m.text1 ORDER BY m.text1 DESC LIMIT 0, 4; 
```

[Then it all works as expected](http://sqlfiddle.com/#!2/958e6/1)

# sql - 比较两个数据集 SQL SSRS 2005

> ID：11473374
> 
> 赞同：1
> 
> 时间：2012-07-13T15:17:41.617
> 
> 标签：sql, reporting-services, reportingservices-2005

我在两个单独的服务器上有两个数据集。他们都提取一列信息。

我想构建一个报告，显示仅出现在其中一个数据集中的行的值。

从我读过的内容来看，我似乎想在 SQL 端这样做，而不是在报告端；我不知道该怎么做。

如果有人能阐明这是如何可能的，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:21:48.523

您可以使用该`NOT EXISTS`子句来获取两个表之间的差异。

```
SELECT
    Column
FROM
    DatabaseName.SchemaName.Table1
WHERE
    NOT EXISTS
    (
        SELECT
            Column
        FROM
            LinkedServerName.DatabaseName.SchemaName.Table2
        WHERE
            Table1.Column = Table2.Column --looks at equalities, and doesn't
                                          --include them because of the
                                          --NOT EXISTS clause
    ) 
```

这将显示 中`Table1`未出现的行`Table2`。您可以反转表名以查找`Table2`未出现在 中的行`Table1`。

**编辑**：进行了编辑以显示链接服务器的情况。此外，如果您想同时查看两个表中未共享的所有行，您可以尝试如下所示。

```
SELECT
    Column, 'Table1' TableName
FROM
    DatabaseName.SchemaName.Table1
WHERE
    NOT EXISTS
    (
        SELECT
            Column
        FROM
            LinkedServerName.DatabaseName.SchemaName.Table2
        WHERE
            Table1.Column = Table2.Column --looks at equalities, and doesn't
                                          --include them because of the
                                          --NOT EXISTS clause
    )

UNION

SELECT
    Column, 'Table2' TableName
FROM
    LinkedServerName.DatabaseName.SchemaName.Table2
WHERE
    NOT EXISTS
    (
        SELECT
            Column
        FROM
            DatabaseName.SchemaName.Table1
        WHERE
            Table1.Column = Table2.Column
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:38:18.917

您还可以使用左连接：

```
select a.* from tableA a
    left join tableB b
    on a.PrimaryKey = b.ForeignKey
where b.ForeignKey is null 
```

此查询将返回 tableA 中在 tableB 中没有相应记录的所有记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:00:42.383

如果您希望行恰好出现在一个数据集中，并且每个表上都有一个匹配的键，那么您可以使用完全外连接：

```
select *
from table1 t1 full outer join
     table2 t2
     on t1.key = t2.key
where t1.key is null and t2.key is not null or
      t1.key is not null and t2.key is null 
```

where 条件选择恰好匹配的行。

但是，此查询的问题是您会得到很多带有空值的列。解决此问题的一种方法是在 SELECT 子句中逐列遍历。

```
select coalesce(t1.key, t2.key) as key, . . . 
```

解决这个问题的另一种方法是使用带有窗口函数的联合。此版本汇集了所有行并计算该键出现的次数：

```
select t.*
from (select t.*, count(*) over (partition by key) as keycnt
      from ((select 'Table1' as which, t.*
             from table1 t
            ) union all
            (select 'Table2' as which, t.*
             from table2 t
            )
           ) t
     ) t
where keycnt = 1 
```

这具有指定值来自哪个表的附加列。它还有一个额外的列 keycnt，值为 1。如果您有一个复合键，您只需替换为指定两个表之间匹配的列列表。

# actionscript-3 - 避免 mxml 类中的标签以提高性能？

> ID：11473377
> 
> 赞同：0
> 
> 时间：2012-07-13T15:17:58.480
> 
> 标签：actionscript-3, apache-flex, air, flex4.5, mxml

根据“The bAS3 Class”，`<fx:Declarations>`标签内的 mxml 类中的所有声明实际上都是可绑定的。[[来源]](http://www.brandondement.com/blog/category/actionscript/)。

所以现在我想知道这对应用程序的性能有什么影响。为了提高我的代码的可维护性，我做了很多这样的声明，但是由于我正在开发一个移动应用程序，所以我追求的是我可以获得的最大性能。

是否建议`<fx:Declarations>`完全放弃这些东西以支持性能？我知道 flex 中的绑定非常繁重，这就是为什么我尽可能避免使用它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:35:35.910

我非常怀疑声明是否会严重影响性能，除非声明是用于创建数百个组件的工厂对象。但是，如果绑定属性发生很大变化，那么繁重的数据绑定可能会影响性能，这是正确的，因此这将是首先要改进的事情。补救措施包括使用 [Bindable("eventName")] 而不仅仅是 [Bindable]，或者放弃数据绑定，并使用直接事件。

# iphone - 尝试从 AWS/FMS 直播到 iphone（使用 HLS）

> ID：11473381
> 
> 赞同：1
> 
> 时间：2012-07-13T15:18:21.820
> 
> 标签：iphone, amazon-web-services, http-live-streaming, flash-media-server

我在 Amazon AWS 上设置了一个运行 Flash Media Server (FMS) 的实例，该实例按照[这些](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/FMS4.5EmbeddingLiveStream.html)说明广播 Live HTTP Streaming (HLS)，所以我知道我正在使用适用于 iPhone 的正确流格式进行流式传输。

此外，使用相同的说明，我已经确认服务器已启动并正在运行，并且我已成功设置闪存客户端以读取其 HDS 流（用于闪存设备的 HTTP 动态流）。

我写了这个 iphone 客户端代码来播放流（从一个[教程](http://mobile.tutsplus.com/tag/mpmovieplayercontroller/)中偷来的，它可以与本地视频文件一起工作。这对我也有用）：

```
@implementation BigBuckBunnyViewController

-(IBAction)playMovie:(id)sender
{
    NSURL *streamURL = [NSURL URLWithString:@"http://dstvrton8xbej.cloudfront.net/hls-live/livepkgr/_definst_/liveevent/livestream.m3u8"];
    MPMoviePlayerController *moviePlayerContoller = [[MPMoviePlayerController alloc] initWithContentURL:streamURL];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackComplete) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayerContoller];

    [self.view addSubview:moviePlayerContoller.view];
    moviePlayerContoller.fullscreen = YES;
    [moviePlayerContoller play];

}

- (void)moviePlaybackComplete: (NSNotification *)notification
{
    MPMoviePlayerController *moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:moviePlayerController];

    [moviePlayerController.view removeFromSuperview];
    [moviePlayerController release];

} 
```

但是当我将代码编译到我的 ipad 上时，我收到了这个错误消息：

```
2012-07-13 17:45:20.513 BigBuckBunny[3714:607] -[BigBuckBunnyViewController moviePlaybackComplete]: unrecognized selector sent to instance 0x21050080
2012-07-13 17:45:20.524 BigBuckBunny[3714:607] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[BigBuckBunnyViewController moviePlaybackComplete]: unrecognized selector sent to instance 0x21050080' 
```

来自 Mac[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSInvalidArgumentException) *NSInvalidArgumentException*当您将无效参数传递给方法时发生，例如需要非 nil 对象的 nil 指针。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:13:20.207

解决方案很简单..基本上是语法错误（哈哈）..在moviePlaybackComplete之后添加'：'

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlaybackComplete:) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification   
                                           object:moviePlayerContoller]; 
```

# git - git 分支显示差异，但合并什么也不做

> ID：11473382
> 
> 赞同：0
> 
> 时间：2012-07-13T15:18:25.460
> 
> 标签：git, merge, branch, git-svn

我有两个分支，“svnbranch”，通过“git svn rebase”和“master”更新，其他 git 用户使用推送他们的更改。

现在，当我执行“git diff master”时，我看到 master 中的一些更改要合并到 svnbranch 中，以便我可以“dcommit”它们。但是，当我执行“git merge master”时，什么也没有发生：

git checkout svnbranch

git 差异大师

...显示了一些变化

git 合并大师

已经是最新的了

为什么不合并更改？

[注意：我真正想做的是生成一个 git 存储库，它是我们 SVN 存储库的镜像，并以两种方式手动合并更改。我尝试将其自动化，但无法使其顺利运行，因此我每隔几天手动合并]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:38:19.667

然后看看[SubGit](http://subgit.com)项目作为 SVN<->Git 镜像（Git 和 SVN 都是可写的，并且始终保持同步）。安装可以在一个命令中完成：

```
$ subgit install path/to/svn/repo 
```

或分 2-3 步更精确地控制翻译选项

```
$ subgit configure path/to/svn/repo
$ #edit path/to/svn/repo/conf/subgit.conf and path/to/svn/repo/conf/authors.txt
$ subgit install path/to/svn/repo 
```

而且您永远不需要手动合并 SVN 和 Git。

# c - 为每个平台维护一个单独的分支

> ID：11473383
> 
> 赞同：2
> 
> 时间：2012-07-13T15:18:26.443
> 
> 标签：c, git, cross-platform, branching-and-merging

我正在尝试将我的项目移植到另一个平台，我发现这个新平台与我开始使用的平台之间存在一些差异。我已经看到了 autotools 包和配置脚本，它们应该可以帮助解决这个问题，但我想知道为每个新平台设置一个单独的分支是多么可行。

我看到的唯一问题是如何在目标平台上进行开发，然后将更改合并到其他分支而不获得与平台相关的更改。如果有办法做到这一点，在我看来它会更干净。

有没有人这样做可以推荐/不鼓励这种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:43:04.893

我肯定会反对这种方法。

如果您将相同的代码保留在无法合并的分支中，您只是在自找麻烦。如果您忘记将更改应用于您的平台分支之一，那么跟踪哪些更改已应用于哪些分支将会非常令人困惑。

您没有提到该语言，而是使用该语言中可用的功能来区分平台之间的代码差异，但使用一个分支。例如，在 C++ 中，您应该首先使用基于文件的分隔。例如，如果您有 Mac、Linux 和 Windows 平台的声音代码，请创建一个 sound_mac.cpp、sound_windows.cpp 和 sound_linux.cpp 文件，每个文件都包含相同的类和方法，但包含非常不同的特定于平台的实现。显然，您只需将适当的文件添加到特定平台上的 IDE。因此，您的 Xcode 项目获取 sound_mac.cpp 文件，而您的 Visual Studio 项目使用 sound_windows.cpp 文件。引用这些类和方法的文件将使用#ifdef 来确定要包含哪些标头。

您将对安装程序脚本等内容使用类似的方法。Mac 上的安装程序可能与 Windows 上的安装程序不同，但两者的文件都将位于分支中。您在 Mac 上的构建脚本将简单地利用 Mac 特定的安装程序文件并忽略 Windows 特定的文件。

将内容放在一个分支中并忽略不适用于当前平台的内容，可以让您在主题分支和主分支之间来回合并，让您的生活更加理智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:11:14.243

分支以解决目标平台的兼容性是可行的。只要确保将与目标平台无关的更改分离到另一个分支中即可。

# ios - 如何模拟背景附件 iPad

> ID：11473385
> 
> 赞同：0
> 
> 时间：2012-07-13T15:18:28.127
> 
> 标签：ios, mobile-safari, background-image, attachment, fixed

我正在使用 jQuery Mobile 开发一个 Asp.Net MVC 站点。我有这个 CSS 部分来设置背景图像在滚动时固定在网站的中心：

```
background: white url(Image/A-HD.jpg);
background-repeat: no-repeat;
background-position: 50% 50%; /*or center center */
background-attachment: fixed;
background-size: 50%; 
```

它适用于任何地方，除了 iPad 2（我测试过的唯一一个）。看起来像**背景附件：固定；**不能正常工作：背景图像实际上停留在中心，但不跟随我的滚动。

那么，有没有办法模拟*背景附件：固定；*iPad2（和类似的，我想）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:08:44.547

您可以使用单独的元素来解决这个问题，`position: fixed`并且确实有效！

HTML：

```
<div id="Background"></div>

<div id="Content"></div> 
```

CSS：

```
#Background {
    background: white url(Image/A-HD.jpg) no-repeat 50% 50%;
    background-size: 50%;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
} 
```

# javascript - 我可以在目标面部相对坐标中获得光线碰撞位置（X，Y）吗？

> ID：11473386
> 
> 赞同：2
> 
> 时间：2012-07-13T15:18:30.327
> 
> 标签：javascript, three.js

我试图找到相对于目标面部的射线碰撞坐标......

代码：

```
var fMouseX = (iX / oCanvas.width) * 2 - 1;
var fMouseY = -(iY / oCanvas.height) * 2 + 1;

//I Use OrthographicCamera
var vecOrigin = new THREE.Vector3( fMouseX, fMouseY, - 1 );
var vecTarget = new THREE.Vector3( fMouseX, fMouseY, 1 );
oProjector.unprojectVector( vecOrigin, this.__oCamera );
oProjector.unprojectVector( vecTarget, this.__oCamera );
vecTarget.subSelf( vecOrigin ).normalize();
var oRay = new THREE.Ray(vecOrigin, vecTarget);

intersects = oRay.intersectObjects([ oCylinderMesh ]); 
```

使用 intersects[0].point，我可以将鼠标位置置于“屏幕坐标”中，但如何将其置于 Cylinder 坐标中？PS：网格不旋转，但相机可以改变位置......

非常好的框架；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:23:51.493

这是我的解决方案，只需获取 Cylinder 绝对坐标（相对于屏幕的位置），然后 itersects[0].point sub Cylinder 绝对坐标。以下代码可能会有所帮助：

```
var relativeTo = function(element, ancestor) {
    var offset = element.position.clone();

    if (element.parent == ancestor) {
        return offset;
    }

    return offset.addSelf(relativeTo(element.parent, ancestor));
} 
```

# java - 如何让JFrame在没有父级的情况下独立存在？

> ID：11473391
> 
> 赞同：2
> 
> 时间：2012-07-13T15:18:44.463
> 
> 标签：java, swing, jframe

我正在做一个小应用程序。从一个 JFrame，我正在调用另一个 JFrame。现在，即使我关闭了父 JFrame，我也希望这个子 JFrame 独立存在。有什么办法可以做到这一点吗？或者这是不可能的？请帮我。如果您需要我发布代码，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:23:58.083

在每个 JFrame 上，使用[#setDefaultCloseOperation](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)将默认关闭操作设置为以下内容：

*   DISPOSE_ON_CLOSE

当你按下框架的关闭按钮时，它只会关闭它，另一个会继续它的生命，直到它被关闭。

注意：我建议避免使用多个框架，而是尝试使用选项卡，它可以提供更好的用户体验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T15:20:30.623

是的，这绝对是可能的，只需确保原始框架未设置为关闭时退出应用程序。

第二个框架独立于第一个框架存在，如果您不想链接两者，则不一定要链接。

# java - Eclipse 自动填充类正在移动代码

> ID：11473394
> 
> 赞同：0
> 
> 时间：2012-07-13T15:18:55.477
> 
> 标签：java, eclipse

有时，当我让 eclipse 为我自动生成继承的构造函数时，它会移动我的一些代码，如下所示：

```
public class Music extends Sound{

} 
```

变成：

```
public class Music
    public Music() {
        super();
        // TODO Auto-generated constructor stub
    } extends Sound{
} 
```

它发生在 Windows 7 和 ubuntu 上的 ecipse indigo 上，现在它发生在带有 juno 的 osx lion 上。

有谁知道如何修理它？

# java - 雄猫和防洪

> ID：11473396
> 
> 赞同：6
> 
> 时间：2012-07-13T15:19:01.663
> 
> 标签：java, web-services, tomcat, web-applications, servlets

我们将 Tomcat 7 用于我们的 Web 应用程序。我们提供基于 XML 的 API，以便我们的客户能够以机器对机器的方式与我们的服务器进行通信（无需 Web 浏览器）。请求由 servlet 处理。

我们需要防止用户连续发送过多的请求。我们提供的一些服务涉及轮询结果，用户可能会在没有任何暂停的情况下循环发出请求，每秒发出几十个请求。

我们如何保护自己不被无用的请求淹没？当来自同一 IP 的请求过多时，是否有一种简单的方法可以在 servlet 入口级别阻止请求？有没有内置的Tomcat来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:50:29.977

假设您在 tomcat 前使用 apache 反向代理（如果不是，则应该使用），请在 apache 层上使用[mod_cband 。](http://sourceforge.net/projects/cband/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:53:23.490

你可以自己编码。

查看这个的起点是 Servlet API，特别是 Filter 接口和 SerlvetRequest 接口的 getRemoteHost() 方法。

应该很容易编写一个过滤器实现，它存储来自每个主机的请求计数，并在超出限制时采取行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:58:10.367

`mod_security`如果你想要一个纯 Java 的解决方案，Spring Security 有很多 Apache httpd 的特性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:40:28.473

Apache 的[mod_evasive](http://www.topwebhosts.org/articles/mod_evasive.php) 或[mod_security](http://www.topwebhosts.org/articles/mod_security.php) 可以满足您的需求。对于需要硬件保护的更复杂的严重攻击，您可以考虑使用 Cloudflare。

# node.js - 在授权路由中使用 express.static 中间件

> ID：11473399
> 
> 赞同：13
> 
> 时间：2012-07-13T15:19:07.787
> 
> 标签：node.js, express, connect

我正在使用带有 express 和 passportjs 的节点来限制对位于私有文件夹中的文件的访问。我已将我的代码减少到以下内容。公共静态文件夹中的所有内容都运行良好，但通过使用 staticMiddleware 定位私有文件夹的路由返回 404 错误。

```
var express = require('express')
,   util = require('util');

var app = express.createServer();
var staticMiddleware = express.static(__dirname + '/private');

app.configure(function() {
  app.use(app.router);
  app.use(express.logger('dev')); 
  app.use('/public',express.static(__dirname + '/public'));
});

app.get('/private/:file', function(req, res, next){
    console.log('about to send restricted file '+ req.params.file);
    staticMiddleware(req, res, next);
});
app.listen(16000); 
```

我正在使用以下似乎对其他人有用的参考资料，所以我一定遗漏了一些东西。它不适用于我只显示位于私人区域的内容的 404 响应。

[Node.js 模块特定的静态资源](https://stackoverflow.com/questions/7746180/node-js-module-specific-static-resources)

[NodeJS 不会提供静态文件，即使使用 express.static](https://stackoverflow.com/questions/9646406/nodejs-wont-serve-static-files-even-when-using-express-static)

[重定向到 express.js 中的静态文件](https://stackoverflow.com/questions/9457511/redirecting-to-a-static-file-in-express-js)

我可以发誓我以前有这个工作，也许它在某个新版本中被破坏了。

*   节点 v0.8.1
*   npm 1.1.12
*   快递@2.5.11
*   连接@1.9.2

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T15:28:46.253

哎呀一直盯着我看

```
app.get('/private/:file', function(req, res, next){
    console.log('about to send restricted file '+ req.params.file);
    req.url = req.url.replace(/^\/private/, '')
    staticMiddleware(req, res, next);
}); 
```

编辑 2014 年 11 月 29 日

因此，在有人发布了这个问题后，我回到了这个答案，发现即使我提到了 passportjs，我也从未展示过我最终是如何使用这个功能的。

```
var staticMiddlewarePrivate = express['static'](__dirname + '/private');

app.get('/private/*/:file', auth.ensureAuthenticated, function(req, res, next){
    console.log('**** Private ****');
    req.url = req.url.replace(/^\/private/, '');
    staticMiddlewarePrivate(req, res, next);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T19:47:34.213

您还可以添加`express.static(__dirname + '/private');`到您的 app.config。

```
app.configure(function() {
  app.use(app.router);
  app.use(express.logger('dev')); 
  app.use('/public',express.static(__dirname + '/public'));
  app.use('/private',express.static(__dirname + '/private'));
}); 
```

`private`只要路径以`private`.

# xcode - 归档 Mac App Store 时出现“Codesign 操作失败”

> ID：11473400
> 
> 赞同：0
> 
> 时间：2012-07-13T15:19:09.383
> 
> 标签：xcode, xcode4.3, mac-app-store

在我存档我的应​​用程序并选择“提交到 Mac App Store”并选择我的应用程序和代码签名身份后，我收到“代码设计操作失败”错误。我将目标/项目代码签名身份设置为“3rd Party Mac Developer Application: Joe Hopkins”，这是我的生产应用程序标识符的正确证书，根据我的钥匙串，我的证书是有效的，所以我不知道是什么问题将是。

我意识到有一个类似的问题，即问题是同名的嵌套文件夹，但这似乎是一个不同的问题。

有人对如何进行故障排除有任何想法吗？

谢谢。

![在此处输入图像描述](../Images/2bb7a22fae62664f1301d423aed13b37.png) ![在此处输入图像描述](../Images/879a5826fda4c09fb2b90b08d92ce4ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:03:39.110

我能够解决这个问题......

它与证书或配置无关。我通过重新创建我的项目并重新链接我的资源来修复它。我不确定是什么具体问题造成了问题，但我最初有一个“资源”文件夹，删除它可能是解决问题的原因。

# c# - 水晶报表，为什么我提供了详细信息后仍然要求登录数据库？

> ID：11473407
> 
> 赞同：4
> 
> 时间：2012-07-13T15:19:42.000
> 
> 标签：c#, winforms, ms-access, crystal-reports

我正在生成一份报告，但问题是即使我提供了凭据，当包含 CrystalReport 的表单打开时，它仍然要求我提供它们，最糟糕的是，我没有在其中输入任何内容，只需单击完成，它就会加载报告。那么，如果不需要凭据（或其他），为什么要问我？

这是代码

```
 private void MainReport_Load(object sender, EventArgs e)
    {
        var constr = string.Empty;
        constr = Application.StartupPath;
        if (Generate.bForProjects)
            constr = Path.Combine(constr, @"Reports\Projects.rpt");
        else
            constr = Path.Combine(constr, @"Reports\Other.rpt");

        var myConInfo = new CrystalDecisions.Shared.TableLogOnInfo();
        reportDocument1.Load(constr);
        myConInfo.ConnectionInfo.DatabaseName = "ProjectData.mdb";
        myConInfo.ConnectionInfo.ServerName = Application.StartupPath + @"\Data\ProjectData.mdb";
        myConInfo.ConnectionInfo.Password = "";
        myConInfo.ConnectionInfo.UserID = "";
        reportDocument1.Database.Tables[0].ApplyLogOnInfo(myConInfo);

        reportDocument1.Refresh();

        crystalReportViewer1.ReportSource = reportDocument1;
        crystalReportViewer1.Width = this.Width - 50;
        crystalReportViewer1.Height = this.Height - 100;
    } 
```

表单加载时，会弹出此屏幕

![在此处输入图像描述](../Images/ff5ee4ea1dacdd0d2988be566b97863e.png)

**而且，当出现这种情况时，我什么都不输入！这是正确的！我只需单击完成，它就会完美地加载报告！所以，如果它不需要任何东西，为什么 hel* 要求我登录？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-31T11:40:14.307

它仅在您的 DataSet 或 DataTable 为空时出现。所以确保它有数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:40:16.623

当我们将水晶报表连接到与其设计/创建的数据库不同的数据库时，我们遇到了很多问题。我们最终创建了以下函数来正确设置它。它递归地设置所有报告表和子报告的连接。

此外，我似乎还记得，如果报告是使用集成 Windows 身份验证设计的，并且使用简单的用户名和密码运行，我们就会遇到问题。因此，我们始终确保使用简单的用户名和密码连接到数据库来设计报告。

```
private static void SetConnection(ReportDocument report, string databaseName, string serverName, string userName, string password)
{
    foreach (Table table in report.Database.Tables)
    {
        if (table.Name != "Command")
        {
            SetTableConnectionInfo(table, databaseName, serverName, userName, password);
        }
    }

    foreach (ReportObject obj in report.ReportDefinition.ReportObjects)
    {
        if (obj.Kind != ReportObjectKind.SubreportObject)
        {
            return;
        }

        var subReport = (SubreportObject)obj;
        var subReportDocument = report.OpenSubreport(subReport.SubreportName);
        SetConnection(subReportDocument, databaseName, serverName, userName,  password);
    }
}

private static void SetTableConnectionInfo(Table table, string databaseName, string serverName, string userName, string password)
{
    // Get the ConnectionInfo Object.
    var logOnInfo = table.LogOnInfo;
    var connectionInfo = logOnInfo.ConnectionInfo;

    // Set the Connection parameters.
    connectionInfo.DatabaseName = databaseName;
    connectionInfo.ServerName = serverName;
    connectionInfo.Password = password;
    connectionInfo.UserID = userName;
    table.ApplyLogOnInfo(logOnInfo);

    if (!table.TestConnectivity())
    {
        throw new ApplicationException(Resource.UnableToConnectCrystalReportToDatabase);
    }

    table.Location = Database + "." + "dbo" + "." + table.Location;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T08:30:02.907

只需创建报告对象并在下面添加链接 rptobj 是 Crystalreport 对象，setdatabaselogin 是使用用户 ID 和密码作为参数的方法。

`rptobj.setdatabaselogon(userid,password)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-13T20:06:32.027

请参阅我的回答[，](https://stackoverflow.com/questions/1132314/database-login-prompt-with-crystal-reports/60676636#60676636)了解与报告文件一起保存的旧版本 SQL Native Client 并禁用不安全的加密协议（如 TLS 1.0），这会导致*登录*失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-13T21:20:03.673

包括 --> SetDatabaseLogon

效果很好 - 添加了 1 行 [ SetDatabaseLogon ]，现在一切正常！

注意：连接到 MariaDB 10.3

```
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

cryRpt = new ReportDocument();
        string the_report = comboBox1.Text.ToString();
        //cryRpt.Load("D:\\CrystalReports\\feedback.rpt");
        cryRpt.Load(the_report);

        cryRpt.SetDatabaseLogon("xyz", "123");

        crystalReportViewer1.ReportSource = cryRpt;
        // set up crystal parameters
        //crystalReportViewer1.DisplayToolbar = false; //removes the toolbar
        crystalReportViewer1.ToolPanelView = 0;  //removes the Group Tree on the Left
        crystalReportViewer1.ShowLogo = false;
        // end set up crystal parameters
        //crystalReportViewer.Zoom(50); crystalReportViewer.RefreshReport()
        crystalReportViewer1.Zoom(1);   
        crystalReportViewer1.Refresh();

        //generate the filename
        string dt_stamp = DateTime.Now.ToString("yyyy-dd-M--HH-mm-ss");
        //parse the report filename from combobox drop down
        string lastFragment = comboBox1.Text.Split('\\').Last();

        string create_file = "E:\\CrystalReportsSent\\"+ lastFragment.Replace(".rpt","") +"--" + dt_stamp.ToString() + ".pdf";
        //MessageBox.Show(create_file.ToString());
        pdfFile = create_file; 
```

# java - 用Java解析html页面后获取节点的样式信息（css）

> ID：11473410
> 
> 赞同：1
> 
> 时间：2012-07-13T15:19:54.713
> 
> 标签：java, css, parsing, dom, css-parsing

我正在开发一个分析网页的项目。我使用 Java 库进行 HTML 解析，它返回一个`org.w3c.dom`文档。

给定我文档中的标签节点`dom`，我想知道连接到该节点的所有 CSS 信息（包括覆盖/继承）。

我怎么能做到这一点？在谷歌上搜索，我发现了一些生成`org.w3c.dom`文档的 CSS 解析器，但是我应该如何混合它们呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:51:18.593

[jStyleParser](http://cssbox.sourceforge.net/jstyleparser/)正好提供了这个功能。它解析所有引用的样式表并将它们映射到 DOM 树节点。[此处为类似问题](https://stackoverflow.com/questions/1513587/looking-for-a-css-parser-in-java)提供了更多选项。

# email - 如何知道 SPF 配置是否正常工作 (Amazon SES/Route53)？

> ID：11473411
> 
> 赞同：7
> 
> 时间：2012-07-13T15:19:56.513
> 
> 标签：email, amazon-web-services, amazon-ses, spf, amazon-route53

我正在使用 Amazon SES 和 Route53，并且对如何指定 TXT 值以包含正确的 SPF 配置感到困惑。亚马逊给了我一个 SES TXT 名称/值对，看起来像这样：

```
Name: "_amazonses.xxx.com"
Value: "bInxJfnRbxxxxx9uFXgmxxxxxQHd08UxxxxxxsG+k=" 
```

我将它插入到我的 Route53 记录集中（与 Godaddy 上的“区域文件”相同）。在将我的 SMTP 凭证添加到我的应用程序并让亚马逊验证我的帐户（“授予生产访问权限”）之后，果然可以正常工作，我可以从我的站点向各种帐户（Gmail、Yahoo、Hotmail、我的 .edu 大学）发送电子邮件帐户）。

我对 SPF 一无所知，但听说它很好地包含在一个人的电子邮件服务器配置中。通过谷歌搜索 Amazon SES，我不断看到包含流动的片段：

```
"v=spf1 include:amazonses.com ~all"
"spf2.0/pra include:amazonses.com ~all" 
```

目前，这两个片段包含在与上面那个又大又丑的值（“bInxJfnRb ...”）相同的TXT值字段中，我的电子邮件仍然可以正常发送。

两个相关问题：

1.  将所有 3 个片段放在一个 TXT 值字段中是否适合这些片段？
2.  “v=spf1 include:amazonses.com ~all”和“spf2...”在什么情况下起作用？基本上，我怎么知道他们是否在做任何事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T23:05:51.150

蒂姆，

我一直使用 TXT 记录来保存 SPF 和 SenderID 信息，如下所示（下面的行是 a 的结果`dig`）：

> mydomain.com。86400 IN TXT“v=spf1 包括：amazonses.com ?all”
> mydomain.com。86400 IN TXT“spf2.0/pra 包括：amazonses.com ?all”

这也是亚马逊建议您这样做的方式。

SPF 和 SenderID 都是 ISP 用来验证发送电子邮件的服务器是否来自您的域的机制是否真正得到您的域的*授权*。每当 ISP 将要转发您的电子邮件时，他们都会执行此类检查以确保它不是垃圾邮件。[Amazon SES 页面](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SPFSenderIDDKIM.html)上的解释是我能找到的最简洁的解释之一：

> 在 Internet 上转发电子邮件流量的 ISP 非常了解垃圾邮件发送者及其活动。大多数 ISP 已采取措施评估电子邮件是否合法。ISP 考虑的一项此类操作是电子邮件身份验证，其中发件人提供证据证明他们是他们发送邮件的帐户的所有者。在某些情况下，ISP 会拒绝转发未经身份验证的电子邮件。

如果 Gmail、Yahoo! 等提供商将您的电子邮件发送到其最终目的地，则您的 DNS 条目可能已经正确。如果您尝试删除它们并等待一段时间让 DNS 设置传播，您的电子邮件很可能会开始被归类为垃圾邮件。有一些网络工具，比如[这个](http://www.kitterman.com/spf/validate.html)，可以帮助您验证您的 SPF 记录。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-09T09:50:55.937

# SPF 和亚马逊 SES

> 如果您使用 Amazon SES 从您的域发送，您需要知道当前的 SES 实施涉及从 SES 拥有的 MAIL-FROM 域发送电子邮件。这意味着您无需对 DNS 记录进行任何更改即可让您的电子邮件通过 SPF 身份验证。

来源：[SPF 和 Amazon SES](http://sesblog.amazon.com/post/Tx3IREZBQXXL8O8/SPF-and-Amazon-SES)

更多信息：

*   [在 Amazon SES 中使用 SPF 对电子邮件进行身份验证](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/spf.html)
*   [在 Amazon SES 中使用 DKIM 对电子邮件进行身份验证](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/dkim.html)

# html - SVG剪裁椭圆两侧BUG

> ID：11473416
> 
> 赞同：1
> 
> 时间：2012-07-13T15:20:13.917
> 
> 标签：html, svg

我使用代码在其中创建了一个 svg 和一个椭圆

```
<svg xmlns="http://www.w3.org/2000/svg" 
     version="1.1" 
     type="svgObj" 
     style="display: inline; position: relative; left: 0px; top: 0px;" 
     id="svg_5" 
     preserveAspectRatio="none">
  <ellipse type="svgShpObj" id="shape_2" cx="59px" cy="33px" rx="57px" ry="31px"
           fill="#A5A85A" stroke-width="10" stroke="#F5821F"
           stroke-opacity="1" fill-opacity="0.39215686274509803"/>
</svg> 
```

将其粘贴到[http://www.w3schools.com/svg/tryit.asp?filename=trysvg_myfirst](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_myfirst)并检查它剪辑椭圆的左侧和顶部的问题。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:26:01.483

SVG 的“剪辑”部分只是在视口之外。

有几种方法可以“解决”这个问题。

您可以通过将相应的坐标更改为来重新定位椭圆（[此处](https://developer.mozilla.org/en/SVG/Attribute/cy)和[此处](https://developer.mozilla.org/en/SVG/Attribute/cx)的MDN 文档）

```
 cx="70px" cy="40px" 
```

或者，您可以通过添加显式设置一个包含整个椭圆的视图框（[MDN 文档](https://developer.mozilla.org/en/SVG/Attribute/viewBox)），例如，

```
 viewBox="-10 -10 300 300" 
```

到`<svg>`元素本身。

# mysql - 即使没有找到数据，也可以修改查询以制作带时间戳的条目

> ID：11473417
> 
> 赞同：0
> 
> 时间：2012-07-13T15:20:17.177
> 
> 标签：mysql, date, insert

有没有办法让这个插入语句插入一个带时间戳的空白行，或者当根据查询找不到记录时，行将全为 0？我正在使用它在图表上显示趋势数据，并且即使没有返回数据以使该图表保持最新，也需要时间戳记录。

询问：

```
 SELECT DISTINCT "SEM_AGENT"."DELETED"
  ,"PATTERN"."VERSION" 
  ,"PATTERN"."PATTERNDATE"
  ,"SEM_AGENT"."AGENT_VERSION"
  ,"SEM_CLIENT"."COMPUTER_NAME" "Computer Name"
  , "SEM_COMPUTER"."OPERATION_SYSTEM" "Operation System"
  ,dateadd(s,convert(bigint,"SEM_AGENT"."CREATION_TIME")/1000,'01-01-1970 00:00:00')     CREATION_DTTM
  , dateadd(s,convert(bigint,"SEM_AGENT"."LAST_UPDATE_TIME")/1000,'01-01-1970 00:00:00') Lastupdatetime
  , DATEADD(s, convert(bigint,LAST_SCAN_TIME)/1000, '01-01-1970 00:00:00')"Last Scan Time"
  , "PATTERN"."PATTERNDATE" "Pattern Date"
  , "SEM_CLIENT"."USER_NAME" "User Name"
  , "V_SEM_COMPUTER"."IP_ADDR1_TEXT" "IP Address"
  , "IDENTITY_MAP"."NAME" "Group Name"
FROM (((("SEM_AGENT" "SEM_AGENT" INNER JOIN "SEM_CLIENT" "SEM_CLIENT" 
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_CLIENT"."COMPUTER_ID") 
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_CLIENT"."DOMAIN_ID")) 
  AND ("SEM_AGENT"."GROUP_ID"="SEM_CLIENT"."GROUP_ID")) INNER JOIN "SEM_COMPUTER"   "SEM_COMPUTER" 
  ON (("SEM_AGENT"."COMPUTER_ID"="SEM_COMPUTER"."COMPUTER_ID") 
  AND ("SEM_AGENT"."DOMAIN_ID"="SEM_COMPUTER"."DOMAIN_ID")) 
  AND ("SEM_AGENT"."DELETED"="SEM_COMPUTER"."DELETED")) INNER JOIN "PATTERN" "PATTERN" 
  ON "SEM_AGENT"."PATTERN_IDX"="PATTERN"."PATTERN_IDX") INNER JOIN "IDENTITY_MAP"   "IDENTITY_MAP" 
  ON "SEM_CLIENT"."GROUP_ID"="IDENTITY_MAP"."ID") INNER JOIN "V_SEM_COMPUTER"   "V_SEM_COMPUTER" 
  ON "SEM_COMPUTER"."COMPUTER_ID"="V_SEM_COMPUTER"."COMPUTER_ID" 
  AND "SEM_AGENT"."DELETED"=0
WHERE Pattern.Patterndate < (select max(Patterndate) -2 from Pattern)
AND SEM_COMPUTER.OPERATION_SYSTEM NOT LIKE '%2000%'
ORDER BY "Computer Name" 
```

插入：

```
INSERT INTO av_internal (device_type, ip_address, user_tag, VERSION,     Computer_Name, Operation_System, Pattern_Date)

VALUES ("@Data.device_type~", "@Data.ip_address~", "@Data.user_tag~",    "@Data.VERSION~", "@Data.Computer_x0020_Name~", "@Data.Operation_x0020_System~", "@Data.PATTERNDATE~") 
```

这是创建表语句：

```
'av_Internal', 'CREATE TABLE `av_internal` (
  `device_type` char(255) DEFAULT NULL,
  `ip_address` char(255) DEFAULT NULL,
  `user_tag` char(255) DEFAULT NULL,
  `VERSION` char(255) DEFAULT NULL,
  `Computer_Name` char(255) DEFAULT NULL,
  `Operation_System` char(255) DEFAULT NULL,
  `Pattern_Date` char(255) DEFAULT NULL,
  `LAST_UPDATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=latin1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:31:53.640

在要插入的表中添加一个名为 created_date 的时间戳列，并将其设置为默认值 CURRENT_TIMESTAMP

然后，每条记录的创建日期都会自动添加到记录中。

# jquery - 每个孩子单独上课

> ID：11473419
> 
> 赞同：1
> 
> 时间：2012-07-13T15:20:30.327
> 
> 标签：jquery, class, selection

我被困在一些事情上，希望你能帮助我。我在 WordPress 上使用一个滑块插件，需要控制每个缩略图。我想为 div 中的每个子元素添加一个唯一 ID，以便我可以使用 CSS 对其进行样式设置。

代码如下所示：

```
<div class="royalControlNavCenterer">
  <a class="current" href="#">1</a>
  <a href="#">2</a>
  <a href="#">3</a>
  <a href="#">4</a>
  <a href="#">5</a>
</div> 
```

如您所见，插件已经添加了当前类。我正在寻找的是类似地，为每个元素动态添加一个类，使其如下所示：

```
<div class="royalControlNavCenterer">
  <a id="1" class="current" href="#">1</a>
  <a id="2" href="#">2</a>
  <a id="3" href="#">3</a>
  <a id="4" href="#">4</a>
  <a id="5" href="#">5</a>
</div> 
```

通过这种方式，我可以分别设置我的设计所需的每个缩略图的样式。我认为 jQuery 将是最好的选择，但我愿意接受任何建议。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:22:52.377

```
$(".royalControlNavCenterer > a").prop( "id", function( i ) {
    return i + 1;
}); 
```

* * *

如果基于 0 的索引没问题，IE：

```
<div class="royalControlNavCenterer">
  <a class="current" href="#" id="0">1</a>
  <a href="#" id="1">2</a>
  <a href="#" id="2">3</a>
  <a href="#" id="3">4</a>
  <a href="#" id="4">5</a>
</div> 
```

你可以逃脱

```
$(".royalControlNavCenterer > a").prop("id",​ Number);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:22:49.533

这应该可以工作......它将针对直接`a`子级`royalControlNavCenterer`并给他们一个`id`从 1 开始并从那里上升的属性。

```
$(".royalControlNavCenterer > a").each(function(i) {
   $(this).attr("id", i+1);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:22:58.127

你*可以*通过在你的末尾添加这个来做到这一点`body`：

```
<script type="text/javascript">
$(window).load(function(){
    var globalCount = 0;   
    $('.royalControlNavCenterer a').each(function(){
       this.id='id_'+(globalCount++);
    });
});
</script> 
```

但我不确定我是否看到了提供动态 ID 的意义。您不必这样做来提供单独的样式。

演示： http: [//jsfiddle.net/dystroy/LrBxc/](http://jsfiddle.net/dystroy/LrBxc/)（输入 F12 显示控制台）

似乎我是唯一一个对提议的 id 不遵循[HTML 4 标准](http://www.w3.org/TR/html4/types.html#type-id)这一事实感到困扰的人：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

# java - 如何处理 TreeMap？我可以只使用一个 TreeMap 来存储多个项目的值吗？

> ID：11473421
> 
> 赞同：0
> 
> 时间：2012-07-13T15:20:30.997
> 
> 标签：java

我正在尝试模拟生产系统。为了简要解释我打算做什么，我将创建一个面板，其中我将有一些表格来保存值（用于几个工作站的属性和工作类型（见下图））。当我运行它时，应该存储这些值以供进一步处理。

在上一个问题上，我被推荐使用 TreeMaps 来存储这些值，所以我创建了类似的东西：

```
Station[num][type][avg_time][posx][posy][state]
Part[num][type][state] 
```

到目前为止，这是我的代码：

爪哇

```
import java.awt.*;
import javax.swing.*;

public class L extends JFrame {

     public static final int ww = 1000;
     public static final int wh = 600;
     public static final int bgw = (ww - 30);
     public static final int bgh = (wh - 80);
     public static final String wt = "Teste";
    Color new_piece = new Color(255,0,0);
    Color progress_piece = new Color(255,215,0);
    Color ready_piece = new Color(173,255,47);
    Container pane = getContentPane();
    Dimension appletSize = pane.getSize();
    int wHeight = appletSize.height;
    int wWidth = appletSize.width; 
    DrawRectangle rectangle = new DrawRectangle();
    public TMap t;

    public L() {
        setSize(ww,wh);
        this.setTitle(wt);
//        Sim(int nparts);
        JButton startButton = new JButton("Start");        
        JButton stopButton  = new JButton("Stop");

        //... Add Listeners
       // startButton.addActionListener(new StartAction());
        //stopButton.addActionListener(new StopAction());

        //... Layout inner panel with two buttons horizontally
        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout(FlowLayout.RIGHT,10,10));
        buttonPanel.add(startButton);
        buttonPanel.add(stopButton);
        this.setLayout(new BoxLayout(pane,BoxLayout.Y_AXIS));
        this.add(rectangle);
        this.add(buttonPanel);

        //Sim();
        t = new TMap();
        test();
        //pane.add(rectangle);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public void addRectangle(int px, int py, int pw, int ph, Color pc, String state) {
        this.rectangle.addRectangle( px, py, pw, ph, pc, state);
    }

    public void Sim() {
        addRectangle(20,20,10,10,Color.green,"new");
        /*for (int i=0;i<=nparts;i++) {
            addRectangle(200,200,50,Color.green);
        }*/
    }

    public void test() {
        // First Station Proprieties
        t.put("num",1);
        t.put("type",1);
        t.put("avg_time",5);
        t.put("posx",100);
        t.put("posy",20);
        t.put("state",0);
        // Second Station Proprieties
        t.put("num",2);
        t.put("type",2);
        t.put("avg_time",7);
        t.put("posx",200);
        t.put("posy",20);
        t.put("state",0);
        /*System.out.println("Now the tree map Keys: " + t.St.keySet());
        System.out.println("Now the tree map contain: " + t.St.values());*/
    }

    public static void main(String[] args) {

        try {
                UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InstantiationException ex) {
            ex.printStackTrace();
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                L l = new L();
                //System.out.println("Entryset: " + t.keySet());
                //System.out.println("Entryset: " + t.Station() + "\n");
            }
        });

    }

} 
```

绘制矩形.java

```
 import java.awt.*;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import java.awt.geom.*;
 import java.util.ArrayList;
 import java.util.concurrent.TimeUnit;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 import javax.swing.*;

 public class DrawRectangle extends JPanel implements ActionListener {

private java.util.List<Rectangle2D> squares;
private java.util.List<Color> colors;
private long seconds = 1;
private int anim_interval = (int) TimeUnit.SECONDS.toMillis(seconds);
private Timer sim_timer;
private Timer idle_timer;
int px = 10, velx = 2;
String state;
Color pc;

public DrawRectangle(){
    //this.setBounds(10, 10, 10, 10);
    this.setMinimumSize(new Dimension(100,100));
    this.setPreferredSize(new Dimension(100,L.bgh));
    this.setMinimumSize(new Dimension(500,L.bgh));
    setBackground(Color.gray);
    setDoubleBuffered(true);
    setBorder(BorderFactory.createLineBorder(Color.black, 1));
    squares = new ArrayList<Rectangle2D>();
    colors = new ArrayList<Color>();
    sim_timer = new Timer(anim_interval,this);        
    sim_timer.start();
}

public void addRectangle(int px, int py, int pw, int ph, Color pc, String state)  { // square
    squares.add( new Rectangle2D.Double(px, py, pw, ph) ) ;
    pc = pc;
    //System.out.println(state);
    //this.a = a;
    //this.startX = startX;
    //this.startY = startY;
}

public void actionPerformed(ActionEvent e) {
    /*if (px < 0 || px > 990) {
        velx = -velx;
    }*/
    //System.out.println(px);
    if (px == 20) { 
        sim_timer.stop();
        state = "idle";
        try {
            Thread.sleep(5000);
        } catch (InterruptedException ex) {
            Logger.getLogger(DrawRectangle.class.getName()).log(Level.SEVERE, null, ex);
        }
        sim_timer.start();
        state = "going";
    } 
    else if (px == 50) {
        sim_timer.stop();
        state = "done";
        seconds = 2;
    }
    //if (state != "idle") {
        px = px + velx;
        repaint();
    //}
}

private void idlestate() throws InterruptedException {
    Thread.sleep(5000);
    state = "idle";
}
private void goingstate() {
    state = "going";
}
private void donestate() {
    state = "done";
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g1 = (Graphics2D) g.create();
    Graphics2D g2 = (Graphics2D) g.create();
    //System.out.println("D1");
    /*for( Rectangle2D rect : squares ) {
        System.out.println(colors);
        //g1.setPaint(colors);
        g1.fill(rect);
    }*/
    //for(int i=0;i<squares.size();i++) {
        //System.out.println("D2");
        //g1.setColor(colors.get(i));
        if (state == "going") { g1.setColor(Color.orange); }
        else if (state == "idle") { g1.setColor(Color.yellow); }
        else if (state == "done") { g1.setColor(Color.green); }
        else { g1.setColor(Color.red); }
        //g1.fill(squares.get(i));
        g1.fillRect(px, 10, 10, 10);
        g2.setColor(Color.blue);
        g2.fillRect(px,40,10,10);
        //g1.dispose();
    //}
}
 public void setColor(Color newColor) {
  pc = newColor;
      }

 } 
```

TMap.java

```
import java.util.*;

public class TMap {
public TreeMap <String, Integer> St;
public int num_atrib = 6;

public TMap () {
    St = new TreeMap <>();
}
public Set<String> getKeySet() {
    return St.keySet();
}

public Integer get(String s) {
    return St.get(s);
}

public void put (String s, int i) {
    St.put(s,i);
    System.out.println("Now the tree map Keys: " + St.keySet());
    System.out.println("Now the tree map contain: " + St.values());
}

public TreeMap<String, Integer> Station(String s,int i) {
 }
 } 
```

DrawRectangle.java 代码仅适用于那些可能想要编译代码但到目前为止与实际问题无关的人。TMap.java 是我创建地图的地方，并且有处理数据的方法。一切正常，我的问题如下：

最有可能的是，在模拟时，我将拥有多个站点，因此我需要在这种情况下存储信息：

```
 Station[num][type][avg_time][posx][posy][state]
 Station[1][1][5][100][20][0]
 Station[2][2][7][200][20][0]
 Station[3][3][4][300][20][0] 
```

问题是，当我将新数据放入树形图中时，它将覆盖以前存储的数据，因此如果我添加两次信息，输出将如下所示：

```
 Now the tree map Keys: [avg_time, num, posx, posy, type]
 Now the tree map contain: [5, 1, 100, 20, 1]
 Now the tree map Keys: [avg_time, num, posx, posy, state, type]
 Now the tree map contain: [7, 2, 200, 20, 0, 2] 
```

模拟将限制在 6 个工作站，所以我的问题是，处理这个问题的最佳实践是什么？我唯一能想到的就是创建 6 个 TreeMap，并且只使用那些需要的，但我很确定必须有一种更简单、更有效的方式来存储数据。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:30:06.520

我不确定我是否理解您想要实现的目标，但这是地图的工作方式。它存储键/值对，确保键是唯一的。

所以当你写：

```
map.put("abc",100);
map.put("abc",200); 
```

地图在第二行之后只有一个条目，即 key = "abc" 和 value = 200。

您可能希望将您的站点存储在一个列表中，其中每个站点都是包含相关信息的键/值对的映射：

```
List<TMap> stations = new ArrayList<TMap> ();

TMap station1 = new TMap();
station1.put("num",1);
station1.put("type",1);
...
stations.add(station1);

TMap station2 = new TMap();
station2.put("num",2);
station2.put("type",2);
...
stations.add(station2); 
```

ps：我不确定我是否理解拥有`TMap`真正是 TreeMap 的类的意义。因此，您还可以使用地图列表：

```
List<Map<String, Integer>> stations = new ArrayList<Map<String, Integer>> ();
Map<String, Integer> station1 = new TreeMap<String, Integer> (); 
```

# mysql - 无法让 Hibernate JUnit 测试生成约束异常

> ID：11473427
> 
> 赞同：0
> 
> 时间：2012-07-13T15:21:02.190
> 
> 标签：mysql, hibernate, junit

我将 Hibernate 4.0.1.Final 与 MySQL 5.5 数据库一起使用。我正在编写一个 Java 控制台应用程序。在 JUnit 测试中，我无法让测试失败。这是我正在测试的模型……</p>

```
@Entity
@Table(name = "ic_domain")
public class Domain {

    @Id
    @Column(name = "DOMAIN_ID")
    private String domainId;

    @OneToOne(fetch = FetchType.EAGER, targetEntity = Organization.class)
    @JoinColumn(name = "ORGANIZATION_ID")
    private Organization org; 
```

和

```
@Entity
@Table(name = "ic_organization")
public class Organization {

    @Id
    @Column(name = "ORGANIZATION_ID")
    private String organizationId; 
```

我的问题是，在我的 JUnit 测试中，我试图创建一个不存在的外键，期望在保存时会失败，但他们从来没有这样做。这是 JUnit 测试

```
@Test
public void testSaveDomainWithUnmathcedOrg() { 
    final Organization org = createDummyOrg();
    // Create an org id that doesn't exist.
    org.setOrganizationId("ZZZZ");
    final Domain domain = new Domain();
    final String id = UUID.randomUUID().toString().replace("-", "");
    domain.setDomainId(id);
    domain.setName(org.getName());
    domain.setOrg(org);
    m_domainDao.saveOrUpdate(domain);   
}   // testSaveDomainWithUnmatchedOrg 
```

DAO 的代码是

```
public void saveOrUpdate(final Domain domain) {
    final Session session = sessionFactory.getCurrentSession();
    session.saveOrUpdate(obj);
}   // saveOrUpdate 
```

“session.saveOrUpdate”不应该失败吗？我该怎么做？我不想在 JUnit 测试中提交我的数据，因为我不想用虚拟数据污染底层数据库，但如果这是唯一的方法，那就这样吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:27:43.933

您不必提交，但需要刷新会话以触发 SQL 语句的执行：

```
m_domainDao.saveOrUpdate(domain);    
sessionFactory.getCurrentSession().flush(); 
```

然后如果不想污染数据库，可以回滚事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:34:00.940

为什么你期望事情会失败？

您创建一个新域并保存它。应该按预期工作。

域具有到组织的映射。您没有声明任何 @Cascade 选项，所以我猜想没有对 Organization 表进行插入。在一对一上添加保存更新级联选项，我希望域和组织都按预期保存，没有问题。

我能看到的唯一问题是，如果您尝试将组织保存为数据库中不存在父域。但是，无论如何您都不想这样做。

我建议维护一个单独的数据库进行测试，并使用 DBUnit 之类的东西为每次测试运行设置数据。

[http://www.dbunit.org/](http://www.dbunit.org/)

我通常将它与 Spring 的事务测试支持和 Hibernate 的 DDL 值一起使用来“创建”，因此测试数据库会随着每次模式更改而自动更新。

# java - 二维数组

> ID：11473428
> 
> 赞同：-4
> 
> 时间：2012-07-13T15:21:02.607
> 
> 标签：java, arrays, multidimensional-array

我们得到一个关于 2-D 数组的赋值，其中指出：

给定一个矩形 2-d `char grid [row] [col]` 和 `char` 要查找的 a，找到包含该字符的所有出现的最小矩形并返回其面积。如果char只出现一次，那么包围它的矩形是1x1，面积是1。如果字符没有出现，则返回面积0。
这里是问题的链接和一个例子：[http ://www.stanford.edu/class/cs108/handouts081/03HW1CodeCamp.pdf](http://www.stanford.edu/class/cs108/handouts081/03HW1CodeCamp.pdf)（第2页）但我们必须使用 `int charArea (char[][] grid, char ch)` 而不是 `int charArea (char ch)`

请帮我想出一个算法。我是 Java 新手，我很难想到伪代码/代码。我只知道

```
import java.util.*;

public class Area {

    public static int charArea (char[][] grid, char ch) {
        for (int i=0; i<3; i++) { //row
            for (int j=0; j<4; j++) { //column
            // What now, please?                        
            }
        }
        return answer;
    }

    public static void main(String[] args) {
        char[][] grid = {
                {'a', 'b', 'c', 'd'},
                {'a', ' ', 'c', 'd'},
                {'x', 'b', 'c', 'a'}
        };
        Scanner input = new Scanner (System.in);
        System.out.print("Enter a character to look for: ");
        String temp = input.nextLine();
        char ch = temp.charAt(0);
        System.out.print(charArea(grid, ch));
    }

} 
```

请帮我设计一个算法/伪代码（或代码，如果你不介意哈哈）。太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:29:44.257

您需要找到一个边界框。

想象它是这样的：

您有 2 个垂直标尺和 2 个水平标尺，矩阵的每一侧（上、下、左和右）各一个。

拿起左边的垂直标尺并向右移动，直到你找到你要找的字母。
拿起右边的垂直标尺，向左移动，直到你找到你要找的字母。
拿起上面的水平尺并将其向下移动，直到找到您要查找的字母。
拿起较低的水平尺并将其向上移动，直到您找到要查找的字母。

完成后，4 个标尺将形成一个最小边界框。
剩下的就是数组中没有这样的字符的情况（提示：“右”标尺将离开“左”标尺）。

这是最基本的方法，可能不是最优的，但相当容易理解。:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:26:37.880

由于这是一项作业，我将向您提供您可能提出的基本想法`your own solution`：可以根据其四个角定义一个矩形。你可以找到这样的角落。请注意，最右边的出现`ch`，最左边的出现，顶部的和底部的会有所帮助，但它们不一定是角落！例如，左上角是`(x,y)`，其中`x`是最左边出现的行`ch`，并且`y`是最上面的列。

使用四个角的坐标，您可以定义包含`ch`矩阵中所有出现的最小矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:31:44.840

问题是：如何使用代码中的数组。好吧，你应该从寻找变量定义开始，特别是类中的变量。您可以开始阅读[http://docs.oracle.com/javase/tutorial/java/javaOO/classes.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classes.html)。它称为字段，这就是您用于网格声明的内容...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:26:01.637

这里有几种方法来思考这个问题。

1.  你会如何用铅笔和纸解决这个问题？分析您在手工解决问题时所经历的步骤，并思考如何将其转化为合乎逻辑的步骤，例如向孩子解释如何找到矩形。
2.  本质上，如果您检查您是如何“绑定”某些内容的，您将需要在矩形的最远端（即角）处寻找字符。找到最左边、最上面、最右边和最下面的位置，您已经定义了一个矩形。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T15:31:27.407

划分你的问题。你需要做什么？

1.) 你需要检测左上角 2.) 你需要检测右下角 3.) 中间的一切都是你的矩形

现在，嵌套的 for 循环`charArea`已经从左上角到右下角遍历数组。您必须检测该特定字符的 2-4 次出现。根据具体情况，您需要 2 个字符来完全定义矩形的一个角，或者只需要一个。

所以当你有矩形的左上角和右下角时，计算它有多大应该不是问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T15:50:54.237

我要做的是从参数中获取字符并找到它的第一次出现，并将其存储在一个二维整数数组中以保存一组坐标。然后可能向后工作并从二维数组的末尾开始并找到最后一次出现，因为那时您知道它们可以在的范围内。

* * *

```
public static int charArea (char[][] grid, char ch) {
    int[] first = new int[2];
    int[] last = new int[2];
    for (int i=0; i<3; i++) { //row
        for (int j=0; j<4; j++) { //column
               //checks to see if it is the char we need
               if(grid[i][j].equals(ch) && (first[0] != null && first[1] != null)){
                  first[0] = i;
                  first[1] = j;
               }
        }
    }

    for (int i=3; i>0; i--) { //row
        for (int j=4; j>4; j--) { //column
           //checks to see if it is the char we need
               if(grid[i][j].equals(ch) && (first[0] != null && first[1] != null)){
                  last[0] = i;
                  last[1] = j;
               }                    
        }
    }

    answer = ((Math.max(first[0],last[0]) - Math.min(first[0],last[0])) *(Math.max(first[1],last[1]) - Math.min(fist[1],last[1]));

    return answer;
} 
```

# django - 带有表单集的 Django 1.4 表单向导

> ID：11473432
> 
> 赞同：1
> 
> 时间：2012-07-13T15:21:15.817
> 
> 标签：django, django-formwizard

我想在表单向导中使用表单集。

```
class Model1(models.Model):
    customerid = models.CharField(max_length=20)
    Name = models.CharField(max_length=40)

class Model1Form(ModelForm):
    class Meta:
            model = Model1

class Model2(models.Model):
    product = models.CharField(max_length=100)
    price = models.DecimalField(max_digits=5, decimal_places=2)

class Model2Form(forms.Form):
    product = forms.ModelChoiceField(queryset=Model2.objects.all())
    amount = forms.IntegerField(required=False)

Model2Formset = formsets.formset_factory(Model2Form) 
```

在我的 urls.py 中：

```
 (r'^testwizard/$', TestWizard.as_view([Model1Form, Model2Formset])), 
```

我使用基本视图来查看发布表单的结果：

```
class TestWizard(SessionWizardView):
def done(self, form_list, **kwargs):
    return render_to_response('template', {
        'form_data': [form.cleaned_data for form in form_list],
    }) 
```

当表单集有多个条目时，我只能看到一个条目：

```
 {'customerid': u'7676', 'Name': u'7', 'klantnummer': u'7'} [{'product': <Model2: Bike>, 'amount': 7}] 
```

我期望：

```
{'customerid': u'7676', 'Name': u'7', 'klantnummer': u'7'} [{'product': <Model2: Bike>, 'amount': 7},{'product': <Model2: Plane>, 'amount': 5}] 
```

在文档中找到了这个：

> WizardView 支持 ModelForms 和 ModelFormSets。除了 initial_dict 之外，>as_view() 方法采用 instance_dict 参数，该参数应包含 >ModelForm 和 ModelFormSet 的实例。与 initial_dict 类似，这些字典键值应该 > 等于表单列表中的步数。

不幸的是，我不确定这里是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:34:47.860

这没有用，因为我需要在这里记录的内联表单集： [https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-an-inline-formset-in-a-view](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-an-inline-formset-in-a-view)

# matlab - matlab蛮力索引

> ID：11473441
> 
> 赞同：0
> 
> 时间：2012-07-13T15:22:05.087
> 
> 标签：matlab, for-loop, brute-force

嗨，我正在使用蛮力方法来检查“面板”和“涡轮机”的可能组合

我的代码是

```
 for number_panels = 0:5

for number_turbines = 0:10

    for n = 1:24 % number of hours per day

deficit(n) = Demand(n) - (PV_supply(n)*number_panels) -...
 (WT_supply(n)*number_turbines);% hourly power deficit

        if deficit(n)<0

            deficit(n) = 0;

        end 
```

我上面的问题是我还没有弄清楚这段代码的正确索引。

我想做的是找到“number_panels”、“number_turbines”和“n”的“赤字”。就目前而言，我只能找到最后一个 for 循环的“赤字”。我如何编码以便可以选择访问第 n 行（或“n”组，即 1-24）以及“number_panels”“number_turbines”选项？

* * *

谢谢 - 为了找到每个赤字（n）值的总和，从而获得 24 小时内各自的总赤字，我做了以下事情，在我看来，这似乎能够做我所要求的，但我越来越不正确答案：

```
 daily_deficit(number_panels + 1, number_turbines + 1) =...
 sum(deficit(number_panels + 1, number_turbines + 1,n)) – 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:57:08.483

您的问题是您`deficit`仅将结果存储为 value 的函数`n`，即每天的小时数。在您的内部循环`n`中，您每次都通过外部循环不断替换值，因此在运行结束时，您只有`n = 1:24`at `number_panels`= 5 和`number_turbines`= 10 的值。

试试这个：

```
deficit(number_panels+1, number_turbines+1, n) = ... 
```

最后，您可以检查给定三个索引的任何组合。我在 number_panels 和 number_turbines 中添加了 1 的值，因为 MATLAB 使用基于 1 的索引。要获得特定数量的面板或涡轮机的结果，请确保在检查时加 1。

具体来说，对于一天中 5 小时的 3 个面板和 4 个涡轮机：

`disp(deficit(3+1, 4+1, 5))`

**编辑**：将 1 添加到 和 的值`number_panels`以`number_turbines`避免 0 索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:07:44.443

函数 calcDeficit.m：

```
File Edit Options Buffers Tools ObjC Help                                                                              
function deficit = calcDeficit (Demand, PV_supply, WT_supply)

  % initialize the size (good practice)
  deficit = zeros(6,11,24);

  for number_panels = 0:5

    for number_turbines = 0:10

      for n = 1:24 % number of hours per day
        deficit(number_panels+1,number_turbines+1,:) = Demand(n) - (PV_supply(n)*number_panels) -...
          (WT_supply(n)*number_turbines);% hourly power deficit

        if deficit(n)<0 
          deficit(n) = 0;
        end
      end
    end
  end
return 
```

示例调用：

```
Demand=randn(24,1); PV_supply=randn(24,1); WT_supply=randn(24,1); test(Demand,PV_supply,WT_supply) 
```

您通过以下方式访问需求

```
Demand(panels+1,number_turbines+1,hour) 
```

# java - Magento Java Soap Gzip 压缩

> ID：11473442
> 
> 赞同：0
> 
> 时间：2012-07-13T15:22:05.103
> 
> 标签：java, magento, soap

我试图压缩soap客户端和magento之间的通信通道：

公共静态 MageApiModelServerWsiHandlerPortType getInstance() {

```
 Client client = null;

    if (instance == null) {
        try {
            logger = Logger.getLogger(SoapClient.class);
            Properties properties = Property.getInstance(PropertyType.Application);
            String url = properties.getProperty("magUrl");

            if (url != null) {
                //logger.info("Creating service...");
                MagentoService service = new MagentoService(new URL(url));
                //logger.info("Calling port...");
                instance = service.getMageApiModelServerWsiHandlerPort();

                client = ClientProxy.getClient(instance);

                HTTPConduit http = (HTTPConduit) client.getConduit();
                HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
                httpClientPolicy.setAllowChunking(false);
                httpClientPolicy.setConnectionTimeout(36000);

                http.setClient(httpClientPolicy);

                client.getInInterceptors().add(new GZIPInInterceptor());
                client.getOutInterceptors().add(new GZIPOutInterceptor());
        ... 
```

它适用于调用各种类型的数据。但是在创建产品时，发件人（magento）返回以下错误：

```
javax.xml.ws.soap.SOAPFaultException: Invalid XML
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156)
    at $Proxy33.catalogProductCreate(Unknown Source)
    at at.magento.service.SoapService.createProductOnly(SoapService.java:280)
    at at.magento.ready.SoapProductTest.testCreateProduct(SoapProductTest.java:95)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.apache.cxf.binding.soap.SoapFault: Invalid XML
    at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.unmarshalFault(Soap11FaultInInterceptor.java:75)
    at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:46)
    at org.apache.cxf.binding.soap.interceptor.Soap11FaultInInterceptor.handleMessage(Soap11FaultInInterceptor.java:35)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:113)
    at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:69)
    at org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor.handleMessage(CheckFaultInterceptor.java:34)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:798)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1667)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1520)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1428)
    at java.util.zip.DeflaterOutputStream.close(DeflaterOutputStream.java:143)
    at org.apache.cxf.io.AbstractWrappedOutputStream.close(AbstractWrappedOutputStream.java:72)
    at org.apache.cxf.io.AbstractThresholdOutputStream.close(AbstractThresholdOutputStream.java:102)
    at org.apache.cxf.io.CacheAndWriteOutputStream.postClose(CacheAndWriteOutputStream.java:47)
    at org.apache.cxf.io.CachedOutputStream.close(CachedOutputStream.java:195)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:658)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:532)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)
    ... 30 more 
```

# objective-c - 如何知道任意数量的异步操作结束

> ID：11473445
> 
> 赞同：0
> 
> 时间：2012-07-13T15:22:13.793
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

我需要执行一些网络调用。我正在使用 NSURLConnection 但我已将其封装到一个使用块的新类中：

```
 [MAURLConnection asyncConnectionWithURLString:str 
                                  completionBlock:^(NSData *data, NSURLResponse *response) {
                                      //completed, do something with data returned

                                  } 
                                       errorBlock:^(NSError *error) {
                                           //error
                                       }];
} 
```

但是，现在我需要一次调用其中的几个，但我需要知道它们什么时候完成。最好的方法是什么？我不一定需要进度，只要他们都完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:34:37.397

Almo 评论的另一个变体是将它们推入类似队列的结构中，完成后队列的长度将为零。要完成非阻塞检查以查看队列是否为空，请使用运行循环。

```
- (void)waitUntilDone {       
    while (![_queue count] > 0) {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    }
} 
```

根据您的需要，您可以使用它来阻止并给您回电，将其放在线程中并继续执行操作并给您回电。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:58:00.317

我能想到的最简单的想法是计数器。当每个连接完成时，只需增加一个计数器。一旦计数器达到您的号码，您就完成了。您还可以通过某些功能增加计数器并在计数器编号被击中时运行通知。这可能是数组的变化，您还可以在其中存储一些有关已完成连接的附加信息。

# bash - Bash 执行命令的结果

> ID：11473449
> 
> 赞同：1
> 
> 时间：2012-07-13T15:22:23.703
> 
> 标签：bash

我有一个返回字符串/路径的小脚本。这个路径是一个可执行文件，我该如何运行这个可执行文件？谢谢你。

示例：my_command commands `other commands`... 返回 /home/mydesktop/myexecutable 我需要执行 /home/mydesktop/myexecutable

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:24:43.167

你可以试试这个：

```
`your_command args etc` 
```

反引号被命令的输出替换，然后被评估。由于它位于输入行的开头，因此`bash`尝试执行它。

这是一个方便的技巧，因为您可以使用它来获得各种乐趣：

```
cp your_file .backup/`date "+%Y-%m-%d"`_your_file 
```

会将当前日期添加到您的文件副本中，以备不时之需...

**编辑**：在评论中，我们了解到，您实际上应该使用`$()`语法。因此，这相当于：

```
$(your_command args etc) 
```

和

```
cp your_file .backup/$(date "+%Y-%m-%d")_your_file 
```

因为你可以嵌套这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:38:01.653

如果它返回可执行脚本/程序，请使用：

```
chmod +x /home/mydesktop/myexecutable
/home/mydesktop/myexecutable 
```

如果它返回一个可执行的 STRING 使用：

```
eval STRING 
```

# javascript - 获取 HighStock javascript 图表以显示加载时的最新工具提示

> ID：11473450
> 
> 赞同：1
> 
> 时间：2012-07-13T15:22:25.387
> 
> 标签：javascript, charts, highstock

我正在使用来自 highcharts.com 的名为 HighStock 的 javascript 图表作为我的在线解决方案之一，客户问我是否有任何方法可以在加载图表时显示最新数据点的工具提示。

我在谷歌上搜索了高低，在 stackoverflow 上，一周前还在他们的支持论坛上创建了一个关于这个的主题（虽然还没有回复），但我真的找不到任何关于它的信息。当然，我自己也试图找到解决方案，但没有任何运气。

那么，如果有人在那里，那知道如何实现这一目标？如果有可能吗？:-)

提前非常感谢。

现在有了提琴手链接： http: [//jsfiddle.net/L2TFd/](http://jsfiddle.net/L2TFd/)这基本上只是 highsoft 本身的示例之一，因为我无法从其他域访问我的网络服务 :-)

这是图表加载完成后我要显示的最后一点的工具提示：

![在此处输入图像描述](../Images/d2d1f9350984ddb3492eac51bf94f575.png)

# unit-testing - 如何在不需要我们的 postgres 服务器存在的情况下对我的 JPA 代码进行单元测试？

> ID：11473452
> 
> 赞同：0
> 
> 时间：2012-07-13T15:22:32.497
> 
> 标签：unit-testing, postgresql, jpa, continuous-integration

我们的数据库是一个postgresql。我们使用 JPA 来管理我们的持久性任务。目前，我们的测试需要有一个 postgres 服务器才能执行。这使得我们在开发盒上运行我们的测试变得很麻烦，因为开发者必须首先安装一个 postgres 服务器，并且它使得从 CI 到我们的发布构建环境的各种构建服务器环境的可移植性变得困难。

在我看来，我应该能够将重量级的数据库服务器换成轻量级的内存版本。我们不做任何 postgres 特定的事情。我们的代码大部分是纯 JPA，带有一些访问特定休眠功能的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:24:22.073

您可以将数据库[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)到需要进行单元测试的代码中。如果您的代码已经依赖于难以注入的 postgressql，您可以使用[PowerMock](http://code.google.com/p/powermock/)替换您调用的任何静态或构造函数方法，以返回您控制的假货。

您返回的假数据库可以像带有预设值的哈希表一样简单，具体取决于您需要测试的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:50:22.723

你有两种可能。您可以设置单独的 postgres 数据库并让您的 CI 代码连接到它。但是，通常没有必要。如果您的数据库代码不使用非常 postgres 的特定功能，请考虑使用其他内存数据库。例如。h2 或 hsqldb。如果需要，您甚至可以稍微更改代码以使其更具可移植性。第二种选择当然风险更大，因为您的代码总是有可能在内存数据库上运行，但在 postgres 上却不行。然而，第一个选项可能需要更多的管理和维护。

# coldfusion - update() 和 save() 方法导致 railo 中“没有匹配的方法/函数”

> ID：11473454
> 
> 赞同：0
> 
> 时间：2012-07-13T15:22:33.543
> 
> 标签：coldfusion, railo, cfwheels

我正在尝试运行一个非常快速的更新查询来记录用户的电子邮件地址已确认（在我的用户表中将已确认的 [bit] 列设置为 1，然后单击通过电子邮件发送的链接）。这是应该执行的操作：

```
 <cffunction name="confirmEmail">
    <cfscript>
      user = model("user").findOne(where="id=#params.userid# AND uuid='#params.uuid#'", returnAs="query");
      if(user.recordCount) {
        pageTitle = "E-mail Confirmation Success";
        user.update(confirmed=1);
      } else {
        redirectTo(route="authenticationDenied", alert="Something was wrong with your confirmation string. Please contact site administrators.");
      }
    </cfscript>
  </cffunction> 
```

但是当我提交适当的 URL（我已经转储并且可以看到模型调用找到一个有效记录）时，我在 Railo 3.3.x 中收到以下错误：

> 没有找到与命名参数的调用匹配的方法/函数 [更新]

...突出显示**user.update(confirmed=1);** 我的代码中的行。那么我做错了什么？以前我一直使用 save/update(params.user) 或类似的方法来进行这些查询，但这似乎有点过头了；我只想通过 1 位更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:30:57.727

好的，我的 CTO 是 CFML 和 Wheels 的新手，他在 5 秒内就知道了这一点。因此我猜是“C”。

通过将用户模型作为查询而不是对象返回，我无法访问 update/save() 方法。（Duh，MVC n00b。）我将它作为查询返回的原因很简单，我一直在做一些公平的事情，以便轻松操作输出，在这种情况下，我可以测试是否存在以我一直拥有的方式记录（如果 recordCount）。但这有效...

```
 <cffunction name="confirmEmail">
    <cfscript>
      user = model("user").findOne(where="id=#params.userid# AND uuid='#params.uuid#'");
      if(isObject(user)) {
        user.update(confirmed="1");
      } else {
        flashInsert(error="Something was wrong with your confirmation string. Please contact site administrators.");
        redirectTo(route="authenticationDenied");
      }
    </cfscript>
  </cffunction> 
```

# perl - 将数据转换为引用的单词以转义特殊字符

> ID：11473455
> 
> 赞同：-1
> 
> 时间：2012-07-13T15:22:34.303
> 
> 标签：perl

在我的 Perl 程序中，我正在获取一封加密的电子邮件，对其进行解码并进一步处理。我面临一个问题，因为数据包含：`%localappdata%` 我无法直接使用 qw() 函数，因为数据是从邮箱中获取的。有没有办法应用这个功能？如何使用它才能使特殊字符不被识别为特殊字符而是普通字符？或者是否有正则表达式可以这样做？

更新：我正在做的*处理是将数据转换为 HTML 并使用 Curl 将其发送到 REST API。*

更新 2：这是代码：[https](https://gist.github.com/8cd801fedeb90a5ca7fc) `$description` ://gist.github.com/8cd801fedeb90a5ca7fc包含`%localappdata%`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:41:17.770

好的，感谢您显示完整的代码。问题是您将 的内容`$body`作为 URL 参数传递，因此 HTTP 协议需要转义各种字符才能正确传递它们。

您可以使用该模块来实现这一点[`URI::Escape`](https://metacpan.org/module/URI%3a%3aEscape)，并且您将不再需要像在第 125 行和后面的行中那样进行清理`# clean the body`。

该程序使用包含您已识别的所有问题字符的字符串，并使用模块对其进行翻译。如果`uri_escape`在将内容`$body`附加到 Curl 的 URL 之前使用它，那么一切都应该正常工作。

```
use strict;
use warnings;

use URI::Escape 'uri_escape';

my $body = '%localappdata% â & ';

print uri_escape $body; 
```

**输出**

```
%25localappdata%25%20%E2%20%26%20 
```

* * *

**更新**

对于一般的 URL 操作，最好使用该[`URI`模块](https://metacpan.org/module/URI)，该模块将为您在 URL 的路径和查询部分进行所有必要的转义。

下面的程序显示了如何`$curl->setopt`使用此方法生成您需要传递给的 URL

```
use strict;
use warnings;

use URI;

my $url = URI->new('https://this/is/the/url');
my $body = '%localappdata% â & ';

$url->query_form(body => $body);
print $url, "\n"; 
```

**输出**

```
https://this/is/the/url?body=%25localappdata%25+%E2+%26+ 
```

（请注意，此方法使用空格字符`+`而不是`%20`空格字符。在 URL 的查询部分中任何一个都可以接受。）

这个 URL 可以通过写直接设置为 Curl 选项

```
$curl->setopt(CURLOPT_URL, $url); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T15:56:07.950

要转义某些内容，请使用正则表达式来处理您的数据：

```
my $email = "To: foo@example.com\n\nHi Rad,\nI just opened %appdata% and...";
$email =~ s/ % /\\%/xg; # escapes all percent signs 
```

这将替换`%appdata%`为`\%appdata\%`. 我不知道您的 API 如何喜欢它的输入数据，请相应调整。

编辑：您将标量 $description 放入 URL（Git 第 30 和 41 行）！百分号是那里的转义字符！因此，只需`s/%/%%/g`对您放入任何 url 的任何数据进行操作，然后永远快乐 :)

# c# - 使用自定义参数记录 log4net 数据库

> ID：11473460
> 
> 赞同：8
> 
> 时间：2012-07-13T15:22:57.600
> 
> 标签：c#, database, log4net

我使用 AdoNetAppender 进行了数据库日志记录。我想做的是在每个日志语句上记录用户身份。但是，我不想使用标准的 log4net %identity 参数，原因有两个：

1.  log4net 警告说它非常慢，因为它必须查找上下文标识。
2.  在某些服务组件中，标准身份是服务帐户，但我们已经在变量中捕获了用户身份，我想使用它。

我见过一些人使用 log4net.ThreadContext 添加其他属性的代码，但我知道这是由于线程交错而“不安全”的（这也是性能消耗）。

我的方法是扩展 AdoNetAppenderParameter 类：

```
public class UserAdoNetAppenderParameter : AdoNetAppenderParameter
{

    public UserAdoNetAppenderParameter()
    {
        DbType = DbType.String;
        PatternLayout layout = new PatternLayout();
        Layout2RawLayoutAdapter converter = new Layout2RawLayoutAdapter(layout);
        Layout = converter;
        ParameterName = "@username";
        Size = 255;
    }

    public override void Prepare(IDbCommand command)
    {            
        command.Parameters.Add(this);
    }

    public override void FormatValue(IDbCommand command, LoggingEvent loggingEvent)
    {            
        string[] data = loggingEvent.RenderedMessage.Split('~');
        string username = data[0];
        command.Parameters["@username"] = username;
    }

} 
```

然后以编程方式将其添加到当前的附加程序中，如下所示：

```
ILog myLog = LogManager.GetLogger("ConnectionService");
IAppender[] appenders = myLog.Logger.Repository.GetAppenders();
AdoNetAppender appender = (AdoNetAppender)appenders[0];                    

appender.AddParameter(new UserAdoNetAppenderParameter());

myLog.InfoFormat("{0}~{1}~{2}~{3}", userName, "ClassName", "Class Method", "Message"); 
```

这里的目的是使用标准格式的消息并解析字符串的第一部分，该部分应该始终是用户名。然后，自定义 appender 参数的 FormatValue() 方法应仅使用字符串的该部分，以便可以将其写入日志数据库中的单独字段。

我的问题是没有日志语句写入数据库。奇怪的是，调试时，FormatValue() 方法中的断点只有在我停止服务时才会被命中。

我已经浏览了很多与此相关的东西，但还没有找到任何答案。有没有人设法做到这一点，还是我走错了路。PS 我也尝试过扩展 AdoNetAppender，但它不允许您设置参数值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-25T10:25:59.830

我还需要记录结构化数据并且喜欢使用这样的日志接口：

```
log.Debug( new {
    SomeProperty: "some value",
    OtherProperty: 123
}) 
```

所以我还编写了自定义 AdoNetAppenderParameter 类来完成这项工作：

```
public class CustomAdoNetAppenderParameter : AdoNetAppenderParameter
{
    public override void FormatValue(IDbCommand command, LoggingEvent loggingEvent)
    {
        // Try to get property value
        object propertyValue = null;
        var propertyName = ParameterName.Replace("@", "");

        var messageObject = loggingEvent.MessageObject;
        if (messageObject != null)
        {
            var property = messageObject.GetType().GetProperty(propertyName);
            if (property != null)
            {
                propertyValue = property.GetValue(messageObject, null);
            }
        }

        // Insert property value (or db null) into parameter
        var dataParameter = (IDbDataParameter)command.Parameters[ParameterName];
        dataParameter.Value = propertyValue ?? DBNull.Value;
    }
} 
```

现在 log4net 配置可用于记录给定对象的任何属性：

```
<?xml version="1.0" encoding="utf-8"?>
<log4net>
    <appender name="MyAdoNetAppender" type="log4net.Appender.AdoNetAppender">
        <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <connectionString value="... your connection string ..." />
        <commandText value="INSERT INTO mylog ([level],[someProperty]) VALUES (@log_level,@SomeProperty)" />

        <parameter>
            <parameterName value="@log_level" />
            <dbType value="String" />
            <size value="50" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%level" />
            </layout>
        </parameter>

        <parameter type="yourNamespace.CustomAdoNetAppenderParameter, yourAssemblyName">
            <parameterName value="@SomeProperty" />
            <dbType value="String" />
            <size value="255" />
        </parameter>
    </appender>

    <root>
        <level value="DEBUG" />
        <appender-ref ref="MyAdoNetAppender" />
    </root>
</log4net> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T20:09:09.983

经过一些实验，我终于得到了这个工作。确保 log4net 的内部日志记录有助于识别错误并下载 log4net 源代码并查看 AdoNetAppenderParameter 类显示了应该如何使用 FormatValue() 方法。所以，这里是修改后的自定义 appender 参数：

```
public class UserAdoNetAppenderParameter : AdoNetAppenderParameter
{        

    public override void FormatValue(IDbCommand command, LoggingEvent loggingEvent)
    {            
        string[] data = loggingEvent.RenderedMessage.Split('~');
        string username = string.Empty;
        if (data != null && data.Length >= 1)
            username = data[0];

        // Lookup the parameter
        IDbDataParameter param = (IDbDataParameter)command.Parameters[ParameterName];

        // Format the value
        object formattedValue = username;

        // If the value is null then convert to a DBNull
        if (formattedValue == null)
        {
            formattedValue = DBNull.Value;
        }

        param.Value = formattedValue;
    }

} 
```

为了使用它，我将它添加到 log4net 配置文件中，如下所示：

```
<parameter type="MyAssembly.Logging.UserAdoNetAppenderParameter, MyAssembly">
 <parameterName value="@username" />
 <dbType value="String" />
 <size value="255" />
 <layout type="log4net.Layout.PatternLayout" value="%message" />  
</parameter> 
```

按照惯例，我的日志语句将是这样的：

```
if (log.IsDebugEnabled)
    log.DebugFormat("{0}~{1}~{2}", username, someOtherParameter, message); 
```

如果您查看该类，它使用 data[0] 作为用户名，因此它依赖于遵循约定。但是，它确实将用户名放入自己的参数中，并放入日志数据库表中的单独字段中，而无需将其临时填充到不安全的 ThreadContext 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:55:07.967

是的，线程敏捷性意味着您可能无法取回正确的数据。对于 log4net，您需要将其粘贴到[HttpContext 的 Items 集合](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)中。

问题是当需要将这些值写入数据库时​​，您必须做一些工作才能将其恢复，因此我一直使用[Marek 的 Adaptive Property Provider 类](http://www.2geeks1rant.com/2010/11/log4net-contextual-properties-and.html)为我完成繁重的工作。使用它非常简单，因为您只需执行以下操作：

```
log4net.ThreadContext.Properties["UserName"] = AdaptivePropertyProvider.Create("UserName", Thread.CurrentPrincipal.Identity.Name); 
```

当 log4net 请求它时，自适应属性将知道检索值的适当位置。

**替代选项**

如果您不使用 log4net，[NLog](http://nlog-project.org/)使 ASP.NET 网站的日志记录更加简单，因为它们本机支持 ASP.NET 应用程序。用法甚至配置几乎与 log4net 相同！

# ruby-on-rails - 升级到 Rails 2.3.11 时出错（HashWithIndifferentAccess 错误）

> ID：11473465
> 
> 赞同：0
> 
> 时间：2012-07-13T15:23:18.307
> 
> 标签：ruby-on-rails, upgrade, url-validation

每当我尝试创建或更新我们的应用程序使用的环境时，我都会得到以下信息：

```
NoMethodError (undefined method `base_url' for #<HashWithIndifferentAccess:0x107162f08>):
  app/controllers/environments_controller.rb:64:in `check_base_url_for_https'
  app/controllers/environments_controller.rb:56:in `update'
  haml (3.0.22) lib/sass/plugin/rack.rb:41:in `call'
  airbrake (3.0.4) lib/airbrake/rack.rb:27:in `call'
  airbrake (3.0.4) lib/airbrake/user_informer.rb:12:in `call'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start' 
```

正如我在标题中所说，我最近升级到 Rails 2.3.11。这个错误以前从未发生过。这是我的environments_controller.rb中发生错误时正在执行的代码：

```
def check_base_url_for_https
  @environment = params[:environment]
  if /^https:\/\//i =~ @environment.base_url 
    @ajax_flash = "<ul class='notice'><li>The website you are trying to test is a secure site.  If you are using self-signed SSL certificates please see our <a href='http://support.janova.us'>Support Site</a> and search for SSL for important tips on how to access your site.</li></ul>"
  end
end 
```

有谁知道为什么这段代码（特别是该行在`if /^https:\/\//i =~ @environment.base_url`Rails 2.3.11 中不再有效？

我想补充一点，我的 app/models/environment.rb 中的代码似乎也很合理：

```
def base_url 
  self[:base_url].try(:gsub, /\$/, '') 
end 
```

有人看到上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:50:03.713

我想通了：`params[:environment]`被定义为哈希。谢谢你，弗罗斯特，强迫我看到这个。因此，我将线路更改`@environment = params[:environment]`为`@environment = Environment.new(params[:environment])`并且它有效。

# android - GalaxyTab 8.9 Android V3.1上TouchImageView背景未刷新

> ID：11473473
> 
> 赞同：0
> 
> 时间：2012-07-13T15:23:34.120
> 
> 标签：android, galaxy-tab

我正在开发 TouchImageView ( [https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView) ) 的修改版本。

它在所有设备和模拟器上运行良好，但在 GalaxyTab 8.9 上运行不正常。可缩放图像周围的背景不会重绘。

您可以在此视频中看到问题：[http ://www.youtube.com/watch?v=lxa6I3wzYrw](http://www.youtube.com/watch?v=lxa6I3wzYrw)

我试图：

*   在 TouchImageView 的父视图上调用 setBackgroundColor(0xff00ff00)，背景如预期的那样是红色的，但问题仍然存在。
*   在 TouchImageView 的父视图上定期调用 invalidate，没有任何改变。
*   构建一个只有一个活动和 TouchImageView 的示例项目，同样的问题会发生

还有很多事情要尝试，但是尝试所有事情都非常耗时。想听听一些想法来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:38:53.383

看起来像在 Android 平板电脑上看到的错误（在三星 Galaxy 选项卡、Nexus 7 上看到）一种解决方法是使层次结构中的顶视图无效（使 TouchImageView 的父视图无效并不足以修复它）

# iphone - 在 iOS 中显示模态视图控制器不起作用

> ID：11473474
> 
> 赞同：0
> 
> 时间：2012-07-13T15:23:50.333
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, presentmodalviewcontroller

我需要在单击按钮时从 rootviewcontroller 显示另一个视图。我已经编写了以下代码，但它不起作用。任何想法为什么？

在我的应用程序委托方法中，我有以下代码 -

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.viewController = [[[MainMenuViewController alloc] initWithNibName:@"MainMenuViewController" bundle:nil] autorelease];

self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

然后在我的 mainviewcontroller 中，我有一个按钮操作，它应该带我去另一个班级，但它什么也没做。尽管按钮操作正在工作，因为 nslog 语句有效。有任何想法吗？

```
 LoginViewController * loginViewController = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:nil];
   [self.modalViewController presentModalViewController:loginViewController animated:YES];
NSLog(@"HE::P"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:32:41.970

如果你试试 ：

```
[self presentModalViewController:loginViewController animated:YES]; 
```

# django - 创建新数据库时自动包含 LC_CTYPE=en_US.UTF-8

> ID：11473477
> 
> 赞同：0
> 
> 时间：2012-07-13T15:23:53.127
> 
> 标签：django

我必须输入

```
export LC_CTYPE=en_US.UTF-8
export LC_ALL=en_US.UTF-8 
```

每次我为 django 应用程序创建一个新数据库时。有可能避免这种情况吗？我应该怎么做才能避免这种情况？

需要一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:41:56.263

转到主目录中的 bash_profile 文件并在其中添加两个语句...

# javascript - 压缩的 Json Javascript

> ID：11473478
> 
> 赞同：28
> 
> 时间：2012-07-13T15:23:55.113
> 
> 标签：javascript, compression, jackson

目前，我将 JSON 从 Ajax 帖子发送到服务器，然后使用 Jackson Mapper 将其转换为对象。

格式是这样的

```
{"id":"780710","folderID":"42024","displayOrder":2},{"id":"780724","folderID":"42024","displayOrder":3} 
```

压缩此数据的最佳 JavaScript 库是什么，Jackson 映射器是否能够处理新格式？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-13T19:08:09.800

为什么不启用浏览器和 Web 服务器支持的 gzip 压缩？这将非常好地压缩数据大小，只需很少的显式工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-13T15:50:34.753

正如@JamWaffles 所说，这是 JSON 在压缩方面所能做的最好的事情。在您的情况下（您交付的代码行），进一步压缩可能是矫枉过正。

但是，如果您有更大的响应，并且想要保存这些字节，请查看

*   [BSON](http://bsonspec.org/)

或者

*   [消息包](http://msgpack.org/)。

它们**不是**JSON，但它们将数据序列化为更小的格式（在大多数情况下）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-29T21:58:54.960

您可以使用例如[jsonh ，它是 hpack 的继任者，它在](https://github.com/WebReflection/JSONH)[web-resource-optimization](http://web-resource-optimization.blogspot.nl/2011/06/json-compression-algorithms.html)上有基准。它会有所帮助，但同一个站点也会告诉您，单独使用 gzip 可能就足够了。

所以要明确一点，gzip 比 hpack 工作得更好，但是将它们结合起来会增加一点压缩。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T14:48:27.657

根据[modec 的这条推文](https://twitter.com/modec/status/223502055178911744)，压缩 JSON 确实是可能的，并且提供了[比经过测试的替代方案更好的结果](https://twitter.com/modec/status/223128365291421696)。

[用 nodejs 处理 JSON 格式](http://templth.wordpress.com/2011/06/07/manipulating-json-and-xml-with-node-js/)是可能的，最近的一个开源项目刚刚[为 nodejs 实现了一个非常快速的压缩算法](https://github.com/pierrec/node-lz4)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-11T09:56:35.050

[JsonZipper](https://github.com/u12206050/jsonZipper)对于多个相似的重复对象也很棒。它允许您通过仅按索引从数组中提取一个对象来使用处于其*压缩*状态的对象，因此在内存方面它很棒，因为它总是**只提取您想要**的内容。

哦，你实际上可以**在旅途中压缩**，所以基本上当你生成数据对象时，你可以压缩它们，让你总是有一个小的内存占用。

大多数其他压缩算法必须一次压缩和提取所有数据。

但是请注意：如果您的数据是同质集合（完全相同的键，那么 hpack 会更好。）

# java - Workspace 定义了一个不包含有效 jre/lib/rt.jar 的 VM：C:\Program Files\Java\jre7

> ID：11473488
> 
> 赞同：4
> 
> 时间：2012-07-13T15:24:15.403
> 
> 标签：java, eclipse, maven, maven-plugin, maven-3

我是 maven 新手，我一直在使用 hibernate、spring 等使用 maven 创建简单的 Web 应用程序。运行`mvn eclipse:eclipse`命令时出现以下错误。

```
[WARNING] Workspace defines a VM that does not contain a valid jre/lib/rt.jar: C:\Program Files\Java\jre7
[WARNING] could not read workspace project:c:\Users\Acer\workspace\.metadata\.plugins\org.eclipse.core.resources\.projects\myproject
org.codehaus.plexus.util.xml.pull.XmlPullParserException: processing instruction can not have PITarget with reserveld xml name (position: START_D
OCUMENT seen \r\n<?xml ... @2:7)
        at org.codehaus.plexus.util.xml.pull.MXParser.parsePI(MXParser.java:2453)
        at org.codehaus.plexus.util.xml.pull.MXParser.parseProlog(MXParser.java:1447)
        at org.codehaus.plexus.util.xml.pull.MXParser.nextImpl(MXParser.java:1395)
        at org.codehaus.plexus.util.xml.pull.MXParser.next(MXParser.java:1093)
        at org.codehaus.plexus.util.xml.Xpp3DomBuilder.build(Xpp3DomBuilder.java:187)
        at org.codehaus.plexus.util.xml.Xpp3DomBuilder.build(Xpp3DomBuilder.java:83)
        at org.codehaus.plexus.util.xml.Xpp3DomBuilder.build(Xpp3DomBuilder.java:48)
        at org.apache.maven.plugin.eclipse.reader.ReadWorkspaceLocations.readArtefact(ReadWorkspaceLocations.java:341)
        at org.apache.maven.plugin.eclipse.reader.ReadWorkspaceLocations.readWorkspace(ReadWorkspaceLocations.java:536)
        at org.apache.maven.plugin.eclipse.reader.ReadWorkspaceLocations.init(ReadWorkspaceLocations.java:94)
        at org.apache.maven.plugin.eclipse.EclipsePlugin.getWorkspaceConfiguration(EclipsePlugin.java:2063)
        at org.apache.maven.plugin.eclipse.EclipsePlugin.fillDefaultClasspathContainers(EclipsePlugin.java:1580)
        at org.apache.maven.plugin.eclipse.EclipsePlugin.setup(EclipsePlugin.java:978)
        at org.apache.maven.plugin.ide.AbstractIdeSupportMojo.execute(AbstractIdeSupportMojo.java:500)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[INFO] no substring wtp server match. 
```

这是我的[pom.xml](http://pastebin.com/KEiNw2e5)

谁能告诉我我在这里做错了什么。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:32:13.077

我也收到了错误：

> [警告] Workspace 定义了一个不包含有效 jre/lib/rt.jar 的 VM：C:\Program Files\Java\jre6

但我不明白

> [警告] 无法读取工作区项目：c:\Users\Acer\workspace.metadata.plugins\org.eclipse.core.resources.projects\myproject

（也许您没有使用选项 -Declipse.workspace=... 在 mvn 命令行上正确设置工作区路径）

无论如何，第一个警告是由于我在非标准位置（JAVA_HOME=C:\tools\java\jdk1.6.0_31）使用 JDK 并将我的 Eclipse 工作区设置为默认使用而引起的。Maven Eclipse 插件似乎没有正确选择默认的 JDK，直到我从 Eclipse 中已安装的 JDK 列表中删除“C:\Program Files\Java\jre6”中的 JDK 后，“mvn eclipse:eclipse”才会起作用。我现在列表中只有正确的一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:40:38.060

我看起来像一个java问题。检查您的 java_home 目录。它指向 C:\Program Files\Java\jre7 吗？如果是这样，让 maven 还通过将 maven 目录（例如 D:\maven-2.2.1\conf）中的 toolchains.xml 配置为您的 java 版本来指向读取相同的位置

```
<toolchains>
<toolchain>
    <type>jdk</type>
    <provides>
        <version>1.7</version> <!--This should be same as is configured via the toolchains plugin -->
        <vendor>ibm</vendor> <!--This should be same as is configured via the toolchains plugin -->
    </provides>
    <configuration>
        <jdkHome>C:\Program Files\Java\jdk1.7.0</jdkHome>
    </configuration>
</toolchain>
</toolchains> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T10:48:37.413

添加您自己的 JRE，删除安装在 Eclipse 中的默认 JRE。是的，它有效。我在输入命令 mvn eclipse:eclipse 时没有收到任何警告信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T11:24:52.073

尝试将您的 Maven 项目存储在不是您的 Eclipse 工作区的目录中，然后将项目导入 Eclipse（不复制它！）。现在 mvn eclipse:eclipse 应该可以在没有警告的情况下工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T00:46:05.090

在我看来，maven 无法正确解析 Eclipse 的工作区设置。我遇到了警告，然后我删除了所有 JRE（我在 Window-Preferences-Java-Installed JRE 下有两个 JRE 和一个 JDK），只留下了 JDK。从那以后没有任何警告。

# c# - 奇怪的 InvokeRequired 问题

> ID：11473496
> 
> 赞同：5
> 
> 时间：2012-07-13T15:24:50.127
> 
> 标签：c#, winforms, multithreading

我有一个 UserControl，上面有一个名为 mTreeView 的 TreeView 控件。我可以从多个不同的线程获取数据更新，这些会导致 TreeView 被更新。为此，我设计了以下模式：所有数据更新事件处理程序必须获取锁，然后检查 InvokeRequired；如果是这样，请通过调用 Invoke 来完成工作。以下是相关代码：

```
 public partial class TreeViewControl : UserControl
  {  
    object mLock = new object();
    void LockAndInvoke(Control c, Action a)
    {
      lock (mLock)
      {
        if (c.InvokeRequired)
        {
          c.Invoke(a);
        }
        else
        {
          a();
        }
      }
    }

    public void DataChanged(object sender, NewDataEventArgs e)
    {
      LockAndInvoke(mTreeView, () =>
        {
          // get the data
          mTreeView.BeginUpdate();
          // perform update
          mTreeView.EndUpdate();
        });
    }    
  } 
```

我的问题是，有时，在启动时，我会在 mTreeView.BeginUpdate() 上收到 InvalidOperationException，表示 mTreeView 正在从与创建它的线程不同的线程更新。我在调用堆栈中返回到我的 LockAndInvoke，你瞧，c.InvokeRequired 为真，但 else 分支被占用了！就好像在采用 else 分支之后，在不同的线程上将 InvokeRequired 设置为 true。

我的方法有什么问题吗？我能做些什么来防止这种情况发生？

编辑：我的同事告诉我，问题是在创建控件之前 InvokeRequired 为假，所以这就是它在启动时发生的原因。不过，他不确定该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T16:06:16.523

这是一个标准的线程比赛。在创建 TreeView 之前，您过早地启动线程。因此，您的代码将 InvokeRequired 视为 false 并在稍后创建本机控件时失败。通过仅在窗体的 Load 事件触发时才启动线程来解决此问题，这是保证所有控制句柄都有效的第一个事件。

顺便说一句，代码中的一些误解。不需要使用*锁*，InvokeRequired 和 Begin/Invoke 都是线程安全的。InvokeRequired 是一种反模式。您几乎总是*知道*该方法将由工作线程调用。所以使用 InvokeRequired 只在它为 false 时抛出异常。这将允许及早诊断此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:49:16.640

当您编组回 UI 线程时，它是一个线程——它一次只能做一件事。调用 Invoke 时不需要任何锁。

Invoke 的问题在于它阻塞了调用线程。该调用线程通常不关心在 UI 线程上完成了什么。在这种情况下，我建议使用 BeginInvoke 将操作异步编组回 UI 线程。在某些情况下，后台线程可能会在 Invoke 上被阻塞，而 UI 线程可能正在等待后台线程完成某些事情，最终导致死锁：例如：

```
private bool b;
public void EventHandler(object sender, EventArgs e)
{
  while(b) Thread.Sleep(1); // give up time to any other waiting threads
  if(InvokeRequired)
  {
    b = true;
    Invoke((MethodInvoker)(()=>EventHandler(sender, e)), null);
    b = false;
  }
} 
```

...上面将在while循环上死锁，因为在对EventHandler的调用返回之前Invoke不会返回，而EventHandler在b为false之前不会返回......

请注意我使用 bool 来阻止某些代码部分运行。这与锁非常相似。所以，是的，你最终可能会通过使用锁来陷入死锁。

只需这样做：

```
public void DataChanged(object sender, NewDataEventArgs e)
{
      if(InvokeRequired)
      {
          BeginInvoke((MethodInvoker)(()=>DataChanged(sender, e)), null);
          return;
      }
      // get the data
      mTreeView.BeginUpdate();
      // perform update
      mTreeView.EndUpdate();
} 
```

这只是在 UI 线程上异步重新调用 DataChanged 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:46:27.323

您在上面显示的模式对我来说看起来 100% 没问题（尽管有一些额外的不必要的锁定，但是我看不出这将如何导致您描述的问题）。

正如 David W 指出的那样，您所做的与[此扩展方法](https://stackoverflow.com/a/2367763/113141)之间的唯一区别是您直接`mTreeView`在 UI 线程上访问，而不是将其作为参数传递给您的操作，但是只有在`mTreeView`更改，并且在任何情况下，您都必须相当努力才能导致您所描述的问题。

这意味着问题必须是其他问题。

我唯一能想到的是您可能`mTreeView`在 UI 线程以外的线程上创建了 - 如果是这种情况，那么访问树视图将是 100% 安全的，但是如果您尝试将该树视图添加到在不同线程上创建的表单，然后它会出现与您描述的异常相似的异常。

# optimization - 存在性能问题的 Kuwahara 过滤器

> ID：11473503
> 
> 赞同：1
> 
> 时间：2012-07-13T15:25:15.030
> 
> 标签：optimization, image-processing, numpy, filtering

在实现类似于 ImageJ 的[Kuwahara](http://rsbweb.nih.gov/ij/plugins/kuwahara.html "类似桑原的过滤器")过滤器的边缘保留过滤器时，它将每个像素分配给周围偏差最小的区域的平均值，我正在努力解决性能问题。

与直觉相反，与最终编译输出数组相比，计算分离矩阵的均值和偏差要快。不过，上面的 ImageJ 实现似乎预计这一步的总处理时间约为 70%。

给定两个数组均值和标准差，其大小比每个轴上的输出数组“res”大 2 个内核大小 p，我想将一个像素分配给具有最小偏差的区域的平均值：

```
#vector to middle of surrounding area (approx.)
p2 = p/2

# x and y components of vector to each quadrant
index2quadrant = np.array([[1, 1, -1, -1],[1, -1, 1, -1]]) * p2 
```

迭代形状 (asize, asize) 的输出数组的所有像素：

```
for col in np.arange(asize) + p:
    for row in np.arange(asize) + p: 
```

在当前坐标周围的 4 个象限中搜索最小标准差，并使用相应的索引来分配先前计算的平均值：

```
 minidx = np.argmin(stds[index2quadrant[0] + col, index2quadrant[1] + row])

        #assign mean
        res[col - p, row - p] =  means[index2quadrant[:,minidx][0] + col,index2quadrant[:,minidx][1] + row] 
```

[Python 分析器](http://docs.python.org/library/profile.html "Python 探查器")在使用 8x8 像素内核过滤 1024x1024 数组时给出以下结果：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.000    0.000   30.024   30.024 <string>:1(<module>)
1048576    2.459    0.000    4.832    0.000 fromnumeric.py:740(argmin)
    1   23.720   23.720   30.024   30.024 kuwahara.py:4(kuwahara)
    2    0.000    0.000    0.012    0.006 numeric.py:65(zeros_like)
    2    0.000    0.000    0.000    0.000 {math.log}
1048576    2.373    0.000    2.373    0.000 {method 'argmin' of 'numpy.ndarray' objects}
    1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
    2    0.012    0.006    0.012    0.006 {method 'fill' of 'numpy.ndarray' objects}
 8256    0.189    0.000    0.189    0.000 {method 'mean' of 'numpy.ndarray' objects}
16512    0.524    0.000    0.524    0.000 {method 'reshape' of 'numpy.ndarray' objects}
 8256    0.730    0.000    0.730    0.000 {method 'std' of 'numpy.ndarray' objects}
 1042    0.012    0.000    0.012    0.000 {numpy.core.multiarray.arange}
    1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
    2    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
    2    0.003    0.002    0.003    0.002 {numpy.core.multiarray.zeros}
    8    0.002    0.000    0.002    0.000 {zip} 
```

对我来说，没有太多的迹象（-> numpy？），时间丢失了，因为除了 argmin，总时间似乎可以忽略不计。

你有什么建议，如何提高性能？

# php - 第 9 行的 php 语法错误

> ID：11473504
> 
> 赞同：0
> 
> 时间：2012-07-13T15:25:15.527
> 
> 标签：php, syntax

我已经盯着这个看了一个小时了。它说我有一个解析错误：语法错误，第 9 行中出现意外的“{”。

有人可以帮我看看这个。提前致谢。

```
<?php

if(isset($_POST['submit']))
{
 function foo($a, $b)
{
   foreach(array_keys($a) as $i)
   {
      if(array_key_exists($i, $b){
          $result[$i] = $a[$i]*$b[$i];
      }else{
          $result[$i] = 0;
      }
   }
   foreach(array_keys($b) as $i)
   {
      if(not array_key_exists($i, $a){ //exists in b but not i a
          $result[$i] = 0;
      }
   }
   return $result
}
}

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:26:35.150

您没有正确关闭括号：

```
if(array_key_exists($i, $b){ 
```

应该

```
if(array_key_exists($i, $b)){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:30:51.997

您在第一个中缺少括号`if`：

```
if(array_key_exists($i, $b){ 
```

应该

```
if(array_key_exists($i, $b)){ 
```

此外，`not`不是有效的运算符（也缺少括号）。所以

```
if(not array_key_exists($i, $a){ 
```

应该

```
if(! array_key_exists($i, $a)){ 
```

`;`最后，您的退货声明中缺少 a ：

```
return $result; 
```

我建议您使用 PHP IDE，例如 Eclipse，它会指出语法错误。我们都会犯错误，在纯文本编辑器中发现缺少的括号会非常令人沮丧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:26:43.337

您`)`在这一行缺少一个：

```
if(array_key_exists($i, $b){ 
```

应该：

```
if(array_key_exists($i, $b)){ 
```

# php - Symfony2/Doctrine 如何在实体中存储相关对象的数量

> ID：11473505
> 
> 赞同：5
> 
> 时间：2012-07-13T15:25:15.770
> 
> 标签：php, symfony, doctrine-orm

我已经设置了一个包含一个测试对象的包，该测试对象包含许多 testQuestion 对象，每个对象都是一个问题和给定的答案（如果没有答案，则为 0）。从 twig 我希望能够从测试对象中获取信息，以说明有多少问题以及已经回答了多少问题。

我创建了一个查询以将其从数据库中提取出来，并在测试实体中创建了 2 个新属性来存储问题的数量和回答的数量。我创建了一个 TestRepository ，查询所在的位置。Test 对象检查对象是否设置了值，如果没有，则在需要时加载它，因为我并不总是需要这些信息。

但是，我坚持如何将存储库代码链接到测试对象，既要调用 repo 函数，又要让 repo 函数将值保存到相关的 Test 对象。

Acme/Quizbundle/Test/Test.php

```
namespace Acme\QuizBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Acme\QuizBundle\Entity\TestRepository;

/**
 * @ORM\Entity(repositoryClass="Acme\QuizBundle\Entity\TestRepository")
 * @ORM\Table(name="test")
 */
class Test    {
protected $numQuestions = null;
protected $numQuestionsAnswered = null;

public function getNumQuestionsAnswered () {
    if (is_null($this->numQuestionsAnswered)) {
        $repository = $this->getEntityManager()->getRepository('\AcmeQuizBundle\Test');
        $values = $repository->calculateNumQuestions();
    }
    return $this->numQuestionsAnswered;
} 
```

Acme/Quizbundle/Test/TestRepository.php （getNumQuestions() 有匹配方法）

```
namespace Acme\QuizBundle\Entity;

use Doctrine\ORM\EntityRepository;

class TestRepository extends EntityRepository {

private function calculateNumQuestions() {

    $qb = $this->getEntityManager()
                ->createQueryBuilder();

    $query = $this->getEntityManager()->createQueryBuilder()
                        ->select('COUNT(id)')
          ->from('testquestion', 'tq')
          ->where('tq.test_id = :id')
          ->setParameter('id', $this->getId())
          ->getQuery();

    $result = $query->getSingleScalarResult();
    var_dump($result);
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T10:27:23.410

您可以使用许多不同的模式来实现此结果，其中最简单的是简单地使用[聚合字段](http://doctrine-orm.readthedocs.org/en/latest/cookbook/aggregate-fields.html)。这会在修改后存储信息，而不是每次需要时都计算它。

另一种解决方案是在您的 Test 和 TestQuestion 存储库之间创建一对多关联（假设还没有），然后在您的 twig 模板中您可以简单地使用`{{ testEntity.questionsAnswered.count() }}`- 您甚至可以告诉 Doctrine 将其设为[“ extra-lazy”关联](http://doctrine-orm.readthedocs.org/en/latest/tutorials/extra-lazy-associations.html)，以便它使用 COUNT SQL 语句来查找有多少已回答的问题（默认情况下，当您尝试枚举关联时，它实际上会获取问题实体）。

最后，我不强烈推荐这种方法，但根据您的情况可能需要。与您在问题中使用的方法类似，您在存储库中获取问题计数，但为了与 Symfony 的简单模型方法保持一致，您不会从实体内部启动查询（因为实体不应该有关于实体管理器/存储库）。

相反，您可以使用 Doctrine EventListener 在加载您的 Test 实体的实例时被通知（参见[此处](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)，使用 postLoad 事件），然后调用您的存储库方法并从那里将其设置在实体上。

# node.js - express 3.0和护照认证

> ID：11473507
> 
> 赞同：4
> 
> 时间：2012-07-13T15:25:33.447
> 
> 标签：node.js, authentication, express, passport.js

我正在使用 express@3.0.0beta4 和 passport@0.1.12 并使用本地策略进行身份验证。

一切似乎都工作正常，它正确地重定向成功和失败

```
app.post('/login', passport.authenticate('local', { failureRedirect: '/' }),
function(req, res) {
  console.log(req.isAuthenticated()); // true
  res.redirect('/users/' + req.user.id );
}); 
```

但是如果我在配置文件路由上添加 ensureAuthenticated

```
app.get('/users/:id', ensureAuthenticated, routes.user);

function ensureAuthenticated(req, res, next) {
  console.log(req.isAuthenticated()); // false
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/');
} 
```

登录后它会将我重定向回“/”（这是登录页面）而不是“/users/id”（用户配置文件）。问题是 req.isAuthenticated() 总是返回 false 并且调试中没有 req.user 变量。

是快递 3 和护照交互有问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T18:38:00.573

我也有类似的问题，但事实证明这是因为我使用的是快速会话而没有为会话数据指定数据存储。这意味着会话数据存储在 RAM 中，并且由于我使用多个工作人员，因此工作人员之间不共享会话存储。我将我的快速会话重新配置为使用 a `RedisStore`，并`isAuthenticated()`开始按预期返回 true 。

```
app.use express.session
    secret: '...'
    store: new RedisStore
      host: redisUrl.hostname
      port: redisUrl.port
      db: ...
      pass: ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T02:05:55.540

我也为这个问题苦苦挣扎了很久。为我解决的问题是更改`maxAge`会话 cookie 的属性——之前它太低了：

```
app.use(express.cookieParser()); 
app.use(express.session({
  secret: config.session.secret,
  cookie: {
    maxAge: 1800000, //previously set to just 1800 - which was too low
    httpOnly: true
  }
})); 
```

此更改后，`req.isAuthenticated()`返回 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:02:15.567

authenticate() 是中间件。来自文档：

```
app.post('/login', 
  passport.authenticate('local', { failureRedirect: '/login' }),
  function(req, res) {
    res.redirect('/');
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T18:38:13.457

问题是我对其进行了测试`curl -L -d "name=Test&password=1"`并且[`curl -L`](http://www.manpagez.com/man/1/curl/)没有按预期工作。但它适用于网络浏览器。

# tridion - 如何在控制台应用程序中使用引擎对象

> ID：11473513
> 
> 赞同：3
> 
> 时间：2012-07-13T15:25:49.930
> 
> 标签：tridion, tridion-2011

“如何在我的控制台应用程序中使用引擎”

我不应该使用 ITemplate-interface 和 Transform-Method。

我正在使用 Tridion 2011

任何人都可以请建议我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T15:45:54.343

你不能。该类`Engine`是 TOM.NET 的一部分，该 API 明确保留用于：

1.  模板构建块
2.  事件处理程序

对于所有其他情况（例如控制台应用程序），您应该使用核心服务。

已经有很多好问题（以及其他网站上的文章）：

*   [https://stackoverflow.com/search?q=%5Btridion%5D+core+service](https://stackoverflow.com/search?q=%5Btridion%5D+core+service)
*   [http://www.google.com/#q=tridion+core+service](http://www.google.com/#q=tridion+core+service)

如果您在此过程中遇到困难，请向我们展示您拥有的相关代码+配置以及您收到的错误消息（或您在哪一步卡住），我们将尝试从那里提供帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T09:44:57.263

从控制台应用程序中，您应该使用核心服务。我写了一个小例子，使用核心服务在内容管理器中搜索项目。

```
Console.WriteLine("FullTextQuery:");

var fullTextQuery = Console.ReadLine();

if (String.IsNullOrWhiteSpace(fullTextQuery) || fullTextQuery.Equals(":q", StringComparison.OrdinalIgnoreCase))
{
    break;
}

Console.WriteLine("SearchIn IdRef:");

var searchInIdRef = Console.ReadLine();

var queryData = new SearchQueryData
                    {
                        FullTextQuery = fullTextQuery,
                        SearchIn = new LinkToIdentifiableObjectData
                                        {
                                            IdRef = searchInIdRef
                                        }
                    };

var results = coreServiceClient.GetSearchResults(queryData);
results.ToList().ForEach(result => Console.WriteLine("{0} ({1})", result.Title, result.Id)); 
```

将对 Tridion.ContentManager.CoreService.Client 的引用添加到您的 Visual Studio 项目中。

核心服务客户端提供者代码：

```
public interface ICoreServiceProvider
{
    CoreServiceClient GetCoreServiceClient();
}

public class CoreServiceDefaultProvider : ICoreServiceProvider
{
    private CoreServiceClient _client;

    public CoreServiceClient GetCoreServiceClient()
    {
        return _client ?? (_client = new CoreServiceClient());
    }
} 
```

和客户本身：

```
public class CoreServiceClient : IDisposable
{
    public SessionAwareCoreServiceClient ProxyClient;

    private const string DefaultEndpointName = "netTcp_2011";

    public CoreServiceClient(string endPointName)
    {
        if(string.IsNullOrWhiteSpace(endPointName))
        {
            throw new ArgumentNullException("endPointName", "EndPointName is not specified.");
        }

        ProxyClient = new SessionAwareCoreServiceClient(endPointName);
    }

    public CoreServiceClient() : this(DefaultEndpointName) { }

    public string GetApiVersionNumber()
    {
        return ProxyClient.GetApiVersion();
    }

    public IdentifiableObjectData[] GetSearchResults(SearchQueryData filter)
    {
        return ProxyClient.GetSearchResults(filter);
    }

    public IdentifiableObjectData Read(string id)
    {
        return ProxyClient.Read(id, new ReadOptions());
    }

    public ApplicationData ReadApplicationData(string subjectId, string applicationId)
    {
        return ProxyClient.ReadApplicationData(subjectId, applicationId);
    }

    public void Dispose()
    {
        if (ProxyClient.State == CommunicationState.Faulted)
        {
            ProxyClient.Abort();
        }
        else
        {
            ProxyClient.Close();
        } 
    }
} 
```

当您想通过核心服务执行 CRUD 操作时，您可以在客户端中实现以下方法：

```
public IdentifiableObjectData CreateItem(IdentifiableObjectData data)
{
    data = ProxyClient.Create(data, new ReadOptions());
    return data;
}

public IdentifiableObjectData UpdateItem(IdentifiableObjectData data)
{
    data = ProxyClient.Update(data, new ReadOptions());
    return data;
}

public IdentifiableObjectData ReadItem(string id)
{
    return ProxyClient.Read(id, new ReadOptions());
} 
```

要构造例如 Component 的数据对象，您可以实现 Component Builder 类，该类实现为您执行此操作的 create 方法：

```
public ComponentData Create(string folderUri, string title, string content)
{
    var data = new ComponentData()
                    {
                        Id = "tcm:0-0-0",
                        Title = title,
                        Content = content,
                        LocationInfo = new LocationInfo()
                    };

    data.LocationInfo.OrganizationalItem = new LinkToOrganizationalItemData
    {
        IdRef = folderUri
    };

using (CoreServiceClient client = provider.GetCoreServiceClient())
{
    data = (ComponentData)client.CreateItem(data);
}

    return data;
} 
```

希望这能让你开始。

# windows-xp - inno setup.exe 在 Windows XP 上因浮点除以零而失败

> ID：11473521
> 
> 赞同：12
> 
> 时间：2012-07-13T15:26:23.587
> 
> 标签：windows-xp, inno-setup

我已经设置了一个安装我的应用程序的 inno 设置脚本。生成的 setup.exe 将在 windows vista/7 上正确安装，但在 windows xp 上除以零错误而失败。inno 示例脚本在 windows xp 上工作，所以它一定是我正在做的事情。谁能看到我做错了什么？

```
; Script generated by the Inno Setup Script Wizard.
#define app_src_path "..\MyApp"
#define app_exe_path "..\bin"

#define file_ver GetFileVersion(app_exe_path + "\win32\MyApp.exe")
#define app_ver Delete(file_ver, 6, 2)

[Setup]
AppId={{BBB40316-958C-446B-A08D-311273214AA6}
AppName=MyApp
AppVersion={#app_ver}
UninstallDisplayName=MyApp
AppPublisher=My Company US
DefaultDirName={pf}\My Company\MyApp
DisableDirPage=yes
DefaultGroupName=My Company
DisableProgramGroupPage=yes
#emit 'OutputBaseFilename="MyApp-Setup-' + app_ver + '"'
#emit 'SetupIconFile="' + app_src_path + '\rc\MyAppIcon.ico"'
Compression=lzma
SolidCompression=yes
ArchitecturesInstallIn64BitMode=x64
WizardImageFile=ZDS.bmp
WizardSmallImageFile=ZDSsmall.bmp

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked

[InstallDelete]
Type: filesandordirs; Name: "{app}\MyApp";

[Files]
; x64 files
Source: "{#app_exe_path}\x64\MyApp.exe"; DestDir: "{app}"; Flags: ignoreversion; Check: Is64BitInstallMode

; win32 files
Source: "{#app_exe_path}\win32\MyApp.exe"; DestDir: "{app}"; Flags: ignoreversion; Check: not Is64BitInstallMode

; platform independent
Source: "{#app_src_path}\rc\pic1-24.png"; DestDir: "{app}\rc"; Flags: ignoreversion nocompression
Source: "{#app_src_path}\rc\pic2-24.png"; DestDir: "{app}\rc"; Flags: ignoreversion nocompression
Source: "{#app_src_path}\rc\pic3-24.png"; DestDir: "{app}\rc"; Flags: ignoreversion nocompression

[Icons]
Name: "{group}\MyApp"; Filename: "{app}\MyApp.exe"
Name: "{commondesktop}\MyApp"; Filename: "{app}\MyApp.exe"; Tasks: desktopicon
Name: "{group}\{cm:UninstallProgram,MyApp}"; Filename: "{uninstallexe}"

[Run]
Filename: "{app}\MyApp.exe"; Description: "{cm:LaunchProgram,MyApp}"; Flags: nowait postinstall skipifsilent 
```

**编辑：** 这是 /LOG 的输出

```
2012-07-14 10:07:50.855   Log opened. (Time zone: UTC-04:00)
2012-07-14 10:07:50.855   Setup version: Inno Setup version 5.5.1 (u)
2012-07-14 10:07:50.855   Original Setup EXE: E:\MyApp-Setup-0.0.0.exe
2012-07-14 10:07:50.855   Setup command line: /SL5="$801DE,623918,137216,E:\MyApp-Setup-0.0.0.exe" /LOG
2012-07-14 10:07:50.855   Windows version: 5.1.2600 SP3  (NT platform: Yes)
2012-07-14 10:07:50.855   64-bit Windows: No
2012-07-14 10:07:50.870   Processor architecture: x86
2012-07-14 10:07:50.870   User privileges: Administrative
2012-07-14 10:07:50.885   Exception message:
2012-07-14 10:07:50.885   Message box (OK):
                          Floating point division by zero.
2012-07-14 10:07:51.654   User chose OK.
2012-07-14 10:07:51.654   Deinitializing Setup.
2012-07-14 10:07:51.654   Log closed. 
```

我没有 [code] 部分，所以我很困惑 MessageBox (OK) 消息的来源。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-15T16:08:15.077

对丹的回答的补充，不适合评论......

对于向导图像文件，我使用 GIMP 2.8 作为图像编辑器尝试了几乎所有可能的颜色深度和操作系统（Windows 7 和 Windows XP）排列。我想出了以下结果：

~~您使用什么颜色深度并不重要。8 位、16 位、24 位或 32 位。仔细想想，这是有道理的，因为 Windows XP 确实支持桌面上的 32 位图标。~~ **请参阅下面的编辑**

当 Dan 谈到位图中的“损坏”标题时，他把它钉在了头上。事实证明，它没有腐败。默认情况下，GIMP 2.8 将“颜色空间信息”保存在位图文件的标题中。Innosetup 或 Windows XP（我不确定是哪个）不知道如何正确解释此信息。

关键是要确保这个色彩空间信息**没有**保存在位图文件中。从 GIMP 2.8 导出位图时，您可以选择检查“不写入颜色空间信息”选项，如下图所示。

![在此处输入图像描述](../Images/c1b13ef3227b92433c2dc716139f558b.png)

**编辑**2014 年 3 月 20 日

一些更新信息：在 InnoSetup 版本 5.5.4（在 Windows 7 64 位操作系统上运行和安装）中，使用上述方法和 32 位图像`bitmap image is not valid`运行编译的安装文件时会出错。

更改为 24 位图像，仍然没有色彩空间信息，解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T13:53:29.630

原来问题出在 WizardImageFile 和 WizardImageFileSmall 上。最初使用 24 位 bmp 文件。我将位深度减少到 16，现在设置将在 windows xp 下运行。这也使我的安装包更小，所以赢了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-07T03:41:06.000

您可以使用[netpbm 工具](http://netpbm.sourceforge.net/)转换为 bmp。即来自png：

`pngtopnm icon.png | ppmtobmp - > icon.bmp`

上面的答案似乎是正确的，不幸的是我在找到它们之前浪费了很多时间 - 我可以发誓我曾尝试勾选 gimp 的“无色彩空间”框。所以这就是我最终做的事情，可以编写脚本来转换许多图标，也可以帮助面临同样问题的人。

# javascript - jquery - 仅限数字的文本字段

> ID：11473522
> 
> 赞同：5
> 
> 时间：2012-07-13T15:26:30.913
> 
> 标签：javascript, jquery, html

我发现这个非常简短的干净代码只允许在文本字段中使用数字字符。目前它仅涵盖数字 0-9 以及退格和删除。我希望它也包括小数/句点，所以我一直在努力解决这个问题，只包括键码 110 和/或 190。我无法让它工作。谁能看到我做错了什么？

```
$(document).ready(function() {
    $('input.numberinput').bind('keypress', function(e) { 
return ( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57) ) || (e.which!=110) ? false : true ;
  });
  }); 
```

**jsfiddle在这里**：`http://jsfiddle.net/justmelat/EN8pT/`

**html**

```
 <div class="label">Enter a number:</div>
        <input type="text" name="txtNumber1" id="txtNumber1" value=""  class="numberinput" />

         <div class="label">Enter a number:</div>
        <input type="text" name="txtNumber2" id="txtNumber2" value="" class="numberinput" />
    </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:28:04.443

尝试：

```
$(document).ready(function () {
    $('input.numberinput').bind('keypress', function (e) {
        return !(e.which != 8 && e.which != 0 &&
                (e.which < 48 || e.which > 57) && e.which != 46);
    });
});​ 
```

**JsFiddle**：http: [//jsfiddle.net/EN8pT/1/](http://jsfiddle.net/EN8pT/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T05:02:32.587

有了上面的答案，你仍然可以做 0.23.12.33 这不是一个有效的数字。

[http://www.texotela.co.uk/code/jquery/numeric/](http://www.texotela.co.uk/code/jquery/numeric/)是一个很棒的轻量级插件，我用过很多次。它消除了上述痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T14:13:32.660

```
$("#input").keydown(function(event) {
 var theEvent = event || window.event;
 var key = theEvent.keyCode || theEvent.which;
    // Allow: backspace, delete, tab, escape, and enter
    if ( key == 46 || key == 8 || key == 9 || key == 27 || key == 13 ||  key == 110 || key == 190 ||
         // Allow: Ctrl+A
        (key == 65 && theEvent.ctrlKey === true) || 
         // Allow: home, end, left, right
        (key >= 35 && key <= 39)) {
             // let it happen, don't do anything
             return;
    }
    else {
        // Ensure that it is a number and stop the keypress
        if (theEvent.shiftKey || (key < 48 || key > 57) && (key < 96 || key > 105 )) {
            theEvent.preventDefault(); 
        }  

    }
}); 
```

带键码 110 和 190

# c# - 从奇数格式解析日期时间

> ID：11473523
> 
> 赞同：3
> 
> 时间：2012-07-13T15:26:32.467
> 
> 标签：c#

> **可能重复：**
> [将复杂的字符串解析为 DateTime](https://stackoverflow.com/questions/11433480/parsing-a-complicated-string-as-datetime)

我有一个带时间的字符串日期，我想将其解析为 DateTime。由于奇怪的格式，我不太确定如何解决它。帮助表示赞赏。

示例：2008 年 3 月 24 日星期一 13-42-30

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:30:46.457

尝试：

```
var theDate = DateTime.ParseExact(
    "Fri Jul 13 13-42-30 2012", 
    "ddd MMM dd HH-mm-ss yyyy", 
    System.Globalization.CultureInfo.InvariantCulture); 
```

可以在[此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)找到日期字符串格式选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:31:46.897

[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)应该做你想做的事：

```
var dateTime = DateTime.ParseExact(
    "Mon Mar 24 13-42-30 2008",
    "ddd MMM dd HH-mm-ss yyyy",
    CultureInfo.CurrentCulture); 
```

`CultureInfo.CurrentCulture`有人可以告诉我使用and 和`CultureInfo.InvariantCulture`其他答案的区别吗？我假设可能需要用他们的母语解析日期名称和月份名称等内容。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:29:34.540

这种格式似乎并不奇怪，但您可以使用[DateTime.ParseExact()](http://msdn.microsoft.com/en-us/library/w2sa9yss)轻松处理它。当然，它假定格式保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:33:07.127

请尝试这种方式

```
string format ="ddd MMM dd hh-mm-ss yyyy";
DateTime dt = DateTime.ParseExact(format, dateString, CultureInfo.InvariantCulture); 
```

# android - Android标签颜色没有改变

> ID：11473530
> 
> 赞同：0
> 
> 时间：2012-07-13T15:26:52.200
> 
> 标签：android, android-tabhost

嗨，我正在尝试更改标签小部件的颜色，但是当我运行应用程序时它没有改变，有人知道为什么吗？

这是我的代码，我尝试在其中更改未选中和选中的 tabhost 的颜色

```
public static void setTabColor(TabHost tabhost) {
        for(int i=0;i<tabhost.getTabWidget().getChildCount();i++)
        {
            tabhost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#666666")); //unselected
        }
        tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab()).setBackgroundColor(Color.parseColor("#FFFFFF")); // selected
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tablayout);
            checkInternet();
            checkPreferences();

        TabHost tabHost = getTabHost();
//        setTabColor(tabHost);

        // Tab for Photos
        TabSpec resultsspec = tabHost.newTabSpec("Results");
        // setting Title and Icon for the Tab
        resultsspec.setIndicator("Results", getResources().getDrawable(R.drawable.miresults_tab));
        Intent photosIntent = new Intent(this, MIResults.class);
        resultsspec.setContent(photosIntent);
//        setTabColor(tabHost);

        // Tab for Songs
        TabSpec Fixturesspec = tabHost.newTabSpec("Fixtures");
        Fixturesspec.setIndicator("Fixtures", getResources().getDrawable(R.drawable.mifixtures_tab));
        Intent songsIntent = new Intent(this, MIFixtures.class);
        Fixturesspec.setContent(songsIntent);

        TabSpec tablespec = tabHost.newTabSpec("Table");
        tablespec.setIndicator("Table", getResources().getDrawable(R.drawable.mitable_tab));
        Intent videosIntent = new Intent(this, MITable.class);
        tablespec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(resultsspec); 
        tabHost.addTab(Fixturesspec);
        tabHost.addTab(tablespec); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:24:54.920

您需要创建一个可绘制的选择器，类似于：

mytab.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected_v4" />
    <item android:state_focused="false" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/tab_selected_v4" />

    <!-- Focused states -->
    <item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_focus" />
    <item android:state_focused="true" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/tab_focus" />

    <!-- Pressed -->
    <item android:state_pressed="true" android:drawable="@drawable/tab_press" />
</selector> 
```

处理选项卡的每个状态。每个可绘制对象，如 tab_focus，都是一个 9-patch png。

您还需要覆盖选项卡布局以引用您的可绘制资源。我会使用引用android默认值的父样式，然后覆盖背景属性以引用您的“drawable/mytab”。

# extjs - Ext.getCmp 在 extjs 中不起作用

> ID：11473535
> 
> 赞同：3
> 
> 时间：2012-07-13T15:27:01.600
> 
> 标签：extjs, extjs4.1

我正在使用 Ext.getCmp 在选项卡面板中查找一个 extjs 组件。有时它不起作用返回未定义。

```
var currComp = Ext.getCmp('myId'); //Id is generated by me on creation 
```

是否存在其他方法？找到一个组件，如果我知道它的 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:49:49.973

如果您知道父控件，则可以使用 getComponent 方法。

**getComponent** - 检查此容器的 items 属性并获取此容器的直接子组件。

```
 var compont = parentControl.getComponent('yourId'); 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.AbstractContainer-method-getComponent](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.AbstractContainer-method-getComponent)

在创建时也尝试设置**itemId**。

# delphi - Delphi 2007 Build from Project 菜单（shift F9）不会重建所有单元

> ID：11473537
> 
> 赞同：2
> 
> 时间：2012-07-13T15:27:04.387
> 
> 标签：delphi, delphi-2007

从使用 Delphi 2007 的第一天开始，我就遇到了这个问题。

我的项目有 100 多个单元，我知道我有一些代码应该生成编译器警告，比如声明从未使用过的变量等。当我选择“构建”而不是“编译”时，我希望它重新编译项目中的每个单元'。我已尝试删除项目的所有 DCU 文件（它们位于单独的文件夹中），但这无济于事。

*经过一些编辑后，它会*不时显示所有这些编译器警告，它刚刚发生，我修复了大约一半，保存了源代码，然后从项目菜单再次构建，它只显示 2 个提示，没有警告。

我使用 Delphi 5 多年，这从来都不是问题，Build 总是这样做。我已经搜索了项目选项等，看看我是否遗漏了一些东西，但是唉，我没有任何线索。

谁能告诉我我做错了什么？请 ？

谢谢 JT

# vba - 找不到 Excel VBA 公式类型不匹配错误

> ID：11473541
> 
> 赞同：2
> 
> 时间：2012-07-13T15:27:24.367
> 
> 标签：vba, excel, excel-formula

我收到类型不匹配 13 错误，我看不到它在哪里。

这是代码。

```
Set concRange = Range(Cells(11, 48), Cells((10 + noDilutions), 48))
Set deadRange = Range(Cells(11, 49), Cells((10 + noDilutions), 49))
analysisSheet.Cells(f, 14).Value = _
    (WorksheetFunction.Lookup(WorksheetFunction.Index(deadRange, _
    WorksheetFunction.CountIf(deadRange, " >= " & _
    (WorksheetFunction.Max(deadRange) / 2))), deadRange, concRange)) _
    - (((WorksheetFunction.Index(deadRange, WorksheetFunction.CountIf _
    (deadRange, " >= " & (WorksheetFunction.Max(deadRange) / 2)))) _
    - (WorksheetFunction.Max(deadRange) / 2)) * ((WorksheetFunction.Lookup _
    (WorksheetFunction.Index(deadRange, WorksheetFunction.CountIf(deadRange, _
    " >= " & (WorksheetFunction.Max(deadRange) / 2))), deadRange, concRange)) _
    - (WorksheetFunction.Lookup(WorksheetFunction.Index(deadRange, _
    WorksheetFunction.CountIf(deadRange, " <= " & _
    (WorksheetFunction.Max(deadRange) / 2))), deadRange, concRange))) _
    / ((WorksheetFunction.Index(deadRange, WorksheetFunction.CountIf(deadRange, _
    " >= " & (WorksheetFunction.Max(deadRange) / 2)))) _
    - (WorksheetFunction.Index(deadRange, WorksheetFunction.CountIf _
    (deadRange, " <= " & (WorksheetFunction.Max(deadRange) / 2)))))) 
```

我尝试将“WorksheetFunction”更改为“Application”和“Application.WorksheetFunction”。

是的，这是一个非常长的公式：D

谁能帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T07:06:35.830

首先，编写这样的公式是一个非常糟糕的主意，主要有以下三个原因：

*   几乎无法理解
*   几乎不可能调试
*   它重复许多计算=低效

重构，变成

```
With WorksheetFunction
    A = .Max(deadRange)
    B = .CountIf(deadRange, " >= " & (A / 2))
    C = .CountIf(deadRange, " <= " & (A / 2))
    D = .Index(deadRange, B)
    E = .Index(deadRange, C)
    F = .Lookup(D, deadRange, concRange)
    G = .Lookup(E, deadRange, concRange)

    analysisSheet.Cells(ff, 14).Value = _
        F - ((D - (A / 2)) * (F - G) / (D - E))
End With 
```

调试它揭示了问题：`spaces`周围`>=`是`.CountIf(deadRange, " >= " & (A / 2))`错误的原因。

所以，改用

```
 B = .CountIf(deadRange, ">=" & (A / 2))
    C = .CountIf(deadRange, "<=" & (A / 2)) 
```

# jquery - Jquery使用其父级切换锚点以查找子级ul

> ID：11473543
> 
> 赞同：0
> 
> 时间：2012-07-13T15:27:29.120
> 
> 标签：jquery, html

我正在尝试使用 jquery 在我的菜单中切换段。如果我在元素上绑定切换，我可以让它工作，`<li>`但是一旦我点击元素中的任何元素，`<li>`元素就会消失，显然是因为切换。所以我尝试将切换事件添加到锚点但没有成功，请参阅下面的代码。Jquery 位于底部。谢谢

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <header><link href="mobmenu.css" rel="stylesheet" type="text/css"/>
        </header>
        <div id="wrapper">
        <h1>Flyout Menu Demo - (Vertical Menu System) </h1>
            <div id="main_navigation">
                <ul class="menu_level1">
                    <li><a href="#">Home</a></li>
                    <li class="submenu1"><a class = "sb1" href="#">Products</a>
                        <ul class="menu_level2">
                            <li class="submenu2"><a class = "sb2" href="#">Category 1</a>
                                <ul  class="menu_level3">
                                <li class="submenu"><a class = "sb3" href="#">Product 1</a>
                                    <ul  class="menu_level4">
                                    <li><a href="#">Product 1 Sub 1</a></li>
                                    <li><a href="#">Product 1 Sub 2</a></li>
                                    <li><a href="#">Product 1 Sub 3</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Product 2</a></li>
                                <li><a href="#">Product 3</a></li>
                                </ul>
                            </li>
                            <li class="submenu2"><a class = "sb2" href="#">Category 2</a>
                                <ul  class="menu_level3">
                                <li><a href="#">Product 1</a></li>
                                <li><a href="#">Product 2</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="submenu1"><a class= "sb1" href="#">Services</a>
                        <ul  class="menu_level2">
                            <li><a href="#">Services 1</a></li>
                            <li><a href="#">Services 2</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function() {
                $('.sb1').bind('mousedown', openSubMenu1);
                $('.sb2').bind('mousedown', openSubMenu2);

                //$('.submenu2').bind('mousedown', openSubMenu);

                function openSubMenu1() { $(this).parent.find('ul.menu_level2').toggle(); };
                function openSubMenu2() { $(this).parent.find('ul.menu_level3').toggle(); };

            });
        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:56:47.000

如果我理解这一点，问题是当您单击 li 内的元素时，会触发 li 事件？如果是这样，如何将 event.stopPropagation 添加到 li 子元素？

像这样的东西

```
$('ul li').children().on('mousedown', function(event){
    event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:33:06.837

尝试使用[可见选择器](http://api.jquery.com/visible-selector/)。我没有对此进行测试，但如果它不起作用，它应该是朝着正确的方向前进。

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('.sb1').mousedown(function() {
                var tmp = $(this).parent.find('ul.menu_level2');
                if ($(tmp).is(':visible')) {
                    tmp.hide();
                } else {
                    tmp.show();
                }
            });
            $('.sb2').mousedown(function() {
                var tmp = $(this).parent.find('ul.menu_level3');
                if ($(tmp).is(':visible')) {
                    tmp.hide();
                } else {
                    tmp.show();
                }
            });
        });
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:38:15.890

我认为你只会升一级（与**li**一起工作，因为它更高一级，而 'a' 上的事件需要升 2 级），你需要升 2 级才能获得**ul** . 所以再次使用**.parent()**，或者使用**.parents()**，它会上升任意数量的级别。

# php - Eclipse PHP PHPUnit - Eclipse 使用错误的 php.ini 文件

> ID：11473545
> 
> 赞同：2
> 
> 时间：2012-07-13T15:27:37.277
> 
> 标签：php, eclipse, phpunit

我尝试使用 PHPUnit，每次加载测试时，加载的 php.ini 文件都是这个：

> C:\Users\Jerome\AppData\Local\Temp\zend_debug\session6671704870793012233.tmp\php.ini

代替 ：

> C:\Program Files (x86)\EasyPHP-5.3.6.1\apache\php.ini

我不明白，因为在 Run -> Run debug configurations ...

在备用 PHP“PHP X 调试”中选择了正确配置，如屏幕截图所示：

![在此处输入图像描述](../Images/2efccafb5a87481eab65df65073f9b97.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:14:52.063

这是 PDT 的正常行为。带有 Xdebug 的 PDT 在启动脚本时会在您的临时目录中创建指定 PHP ini 文件的两个副本。第一个与指定的PHP ini文件相同。第二个是真正用于发射的东西。

在第二个中，总是删除 include_path 字段。此外，一些字段被添加到文件的底部，如下所示：

```
--- /path/to/specified/php.ini
+++ /path/to/temp/zend_debug/session2594175249121649690.tmp/php.ini
 ;;;;;;;;;;;;;;;;;;;
@@ -785,7 +786,6 @@
 ;;;;;;;;;;;;;;;;;;;;;;;;;

 ; UNIX: "/path1:/path2"
-include_path = "..."
 ;
 ; Windows: "\path1;\path2"
 ;include_path = ".;c:\php\includes"
@@ -1852,3 +1852,6 @@
 ; Local Variables:
 ; tab-width: 4
 ; End:
+
+date.timezone= "Asia/Tokyo"
+memory_limit = "256M" 
```

## 如何解决启动的include_path？

基本上，PHP 包含路径属性用于解决项目的依赖关系。特别是，PHPUnit 由工作区首选项中定义的用户库解决。请参阅以下图片。

![配置 PHP 库](../Images/cd920cc86f18ca83853679eef6db3b82.png)

![在 PHP 包含路径中使用 PHP 库](../Images/e11fb875686254c8f2e77adb0e69c9bb.png)

# javascript - 如何在 IE9 中非黑色的 html5 画布中创建透明像素

> ID：11473552
> 
> 赞同：1
> 
> 时间：2012-07-13T15:27:52.810
> 
> 标签：javascript, html, canvas

我正在尝试在画布中的另一个图像上绘制图像，并且在第一张图像中我试图移除白色像素并使它们透明，但它们正在变黑。

这是我正在使用的代码，但看起来不正确。有没有人看到问题？

```
function draw_graphic(canvas,context,lgo_type,gph_img,rib_type, hl_col,hl_txt,cp_col,cp_txt,in_col,in_txt,img_src,ban_bor) {
    // add the graphic image
    if (gph_img!="") {
        var img3 = new Image();
        img3.src = gph_img;

        img3.onload = function() {

            /*/////////////////////////////////////////*/
            var img6 = new Image();
            img6.src = remove_all_pixels(img3, 255, 255, 255);
            img6.onload = function() {
            /*/////////////////////////////////////////*/
                context.globalCompositeOperation = 'destination-out';
                if (rib_type=="1" || rib_type=="3" || rib_type=="5") {
                    context.drawImage(this,0,0,143,105);
                } else {
                    context.drawImage(this,465,0,143,105);
                }
                context.globalCompositeOperation = 'source-over';

                draw_logo(canvas,context,lgo_type,rib_type, hl_col,hl_txt,cp_col,cp_txt,in_col,in_txt,img_src,ban_bor);
            }
        };
    } else {
        draw_logo(canvas,context,lgo_type,rib_type, hl_col,hl_txt,cp_col,cp_txt,in_col,in_txt,img_src,ban_bor);
    }
}

function remove_all_pixels(image, r_val, g_val, b_val) {
    var canvas2 = document.createElement('canvas');
    var ctx = canvas2.getContext("2d");

    canvas2.width = image.width;
    canvas2.height = image.height;

    ctx.drawImage(image,0,0);

    var imgd = ctx.getImageData(0, 0, canvas2.width, canvas2.height);
    var pix = imgd.data;

    for (var i = 0, n = pix.length; i < n; i += 4) {
        var r = pix[i],
            g = pix[i+1],
            b = pix[i+2];

        if(r == r_val && g == g_val && b == b_val){ 
            pix[i] = 0;
            pix[i+1] = 0;
            pix[i+2] = 0;
            pix[i+2] = 0;
        }
    }

    ctx.putImageData(imgd, 0, 0);
    return canvas2.toDataURL();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:35:09.790

您需要将最后一个值的偏移量从 2 更改为 3。因为`pix[i+3]`控制 Alpha 通道。

```
 if(r == r_val && g == g_val && b == b_val){ 
        pix[i] = 0;
        pix[i+1] = 0;
        pix[i+2] = 0;
        pix[i+3] = 0; // Change i+2, to i+3
    } 
```

抱歉，你上一个问题是我的错。是我在答案中提供的代码中的错字，但是小提琴效果很好。

[http://jsfiddle.net/loktar/BtbSM/](http://jsfiddle.net/loktar/BtbSM/)

# java - JSP/JSTL 如何将我的 login.jsp 重用于登录错误页面

> ID：11473559
> 
> 赞同：0
> 
> 时间：2012-07-13T15:28:22.377
> 
> 标签：java, jsp, login, jstl, login-page

我正在寻找一些方法来使用相同的登录页面作为登录页面和登录错误页面。我找到了一种方法来做到这一点。当用户输入错误的用户名或密码时，它应该使用显示错误警告的同一页面。但是永远不会显示错误警告。任何人都可以检查它有什么问题吗？

在我的 web.xml 中：

```
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/login.jsp?Retry=True</form-error-page>
    </form-login-config>
  </login-config> 
```

在我的 login.jsp 中：

```
<form class="login" METHOD=POST ACTION="j_security_check">
<table>
    <c:if test='${not empty param["Retry"]}'>
        <tr>
        <td colspan="2" class="lploginerrormessage">Incorrect User ID
                or Password. Please try again.</td>
        </tr>>
    </c:if>

    <tr>
        <td>User ID:</td>
        <td><input type="text" name="j_username" size="20"></td>
    </tr>
    <tr>
        <td>Password:</td>
        <td><input type="password" name="j_password" size="20">
        </td>
    </tr>
</table>
</form> 
```

假设“用户 ID 或密码不正确。请重试”。如果用户输入错误，将显示。但无论我输入错误的登录信息多少次，它都不会显示。我没有发现任何不正确的东西。谁能告诉我我的代码有什么问题？也欢迎任何其他关于如何实现相同目标的想法。如果想法好，我会为你点赞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:03:38.863

感谢 thinksteep 的快速响应。我找到了原因。这是因为我包含了错误的来源。我应该使用`<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>`而不是`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>`

# php - 日期未插入 mysql_query 插入

> ID：11473563
> 
> 赞同：1
> 
> 时间：2012-07-13T15:28:33.217
> 
> 标签：php, mysql, date, insert-update

我正在尝试在数据库中插入一行。所有条目都正确插入，但是日期插入为：

```
0000-00-00 
```

我试过手动格式化日期：

```
 $updated = $a["updated"][0];

        $updated = explode(" ", $updated);
        $updated[1] = explode("/", $updated[1]);

        $y = date('Y');
        $m = $updated[1][1];
        $d = $updated[1][0];

        $updated = $y . '-' . $m . '-' . $d;

        $updated = strtotime( $updated );
        echo '<pre>'. $updated .'</pre>';
        $upd = date('Y-m-d', $updated);

        $a["updated"][0] = $updated;            
        echo '<pre>'. $upd .'</pre>'; 
```

这是 var_dump($a) 的输出：

```
1342134000

2012-07-13

array(3) {
  ["metal"]=>
  string(6) "Silver"
  ["am"]=>
  array(3) {
    [0]=>
    string(7) "2748.00"
    [1]=>
    string(8) "1779.220"
    [2]=>
    string(8) "2253.200"
  }
  ["updated"]=>
  array(1) {
    [0]=>
    int(1342134000)
  }
} 
```

我也尝试过使用 mysql_date_format 但该行根本没有插入：

```
$updated = mysql_date_format($updated); 
```

这是我的插入查询

```
mysql_query("INSERT INTO LondonFixes VALUES(null,'" . $a["metal"] . "','AM'," . $a["am"][1] . "," . $a["am"][0] . "," . $a["am"][2] . "," . $a["updated"][0] . ", null)"); 
```

这是我的表结构

```
 CREATE TABLE IF NOT EXISTS `LondonFixes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `Metal` varchar(10) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `AmPm` varchar(2) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `GBP` decimal(10,5) NOT NULL,
  `USD` decimal(10,5) NOT NULL,
  `EUR` decimal(10,5) NOT NULL,
  `Updated` date NOT NULL,
  `TimeStamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `Entry` (`Metal`,`AmPm`,`Updated`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=229 ; 
```

可能有一个非常简单的解决方案，但请放轻松！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:29:52.813

月和日需要前导零。

采用：

```
$upd = date('Y-m-d', $updated); 
```

还要确保您的日期用字符串等引号括起来。

```
,'" . $a["updated"][0] . "' 
```

在您的代码中，您没有日期的引号。

# jquery - IIS 的 MVC3 JSON 调用问题

> ID：11473564
> 
> 赞同：0
> 
> 时间：2012-07-13T15:28:35.420
> 
> 标签：jquery, ajax, json, asp.net-mvc-3, iis

我在 MVC3 UserManagement 和本地（VS2010）上工作似乎一切正常，但在 IIS（7.5）上它不会显示对 JSON 帖子的任何响应。

用户生成器表：

```
this.init = function (tableSelector) {

// get user table
userTable = $(tableSelector);

// fill the user table with all 
$.post('/{controllerName}/GetAllUsers', {}, function (users) {

  // add users to table
  for (var i in users) {
    appendUser(users[i]);
  }

  //initialize table sorter and pager
  userTable.tablesorter({ widthFixed: true, widgets: ['zebra'] }).tablesorterPager({ container: $("#pager"), positionFixed: false, removeRows: false });

  // bind user action link event handlers for all rows
  userTable.on('click', '.delete-user', deleteUser);
  userTable.on("click", ".unlock-user", unlockUser);
  userTable.on("click", ".manage-roles", manageRoles);
}); 
```

}

路由注册方法：

```
public static void RegisterMe()
{

  var routes = RouteTable.Routes;

  using (routes.GetWriteLock())
  {
    routes.MapRoute("SimpleUserManagementRoute",
      "SimpleUserManagement/{action}",
      new { controller = "UserManagement", action = "GetAllUsers" },
      new string[] { "SimpleMvcUserManagement" });
  }

} 
```

控制器部分：

```
public IUserAccountService _accountService { get; set; }

public JsonResult GetAllUsers()
{
  var users = _accountService.GetAllUsers();
  var result = from MembershipUser user in users
               select CreateJsonUserObject(user);

  return Json(result);
} 
```

现在通过查看 StackOverflow，我发现问题在于强编码 URL。参考：[MVC 3 JSON 调用在 IIS 中不起作用](https://stackoverflow.com/questions/5044059/mvc-3-json-call-not-working-in-iis)

我已经尝试用参考中提到的 URL 替换我的 URL，但它当然没有用，因为我不知道`stringify`我的 url 的位置/方式 :( ，也不确定该解决方案是否适用于此。

请帮忙。泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:31:29.077

您的 IIS 是否配置了虚拟目录？如果将 /{controllerName}/GetAllUsers 放入浏览器会发生什么？您收到响应还是 404？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:52:33.173

您传递给的 URL`$.post`是错误的。

应该是，

`$.post("/Register/GetAllUsers", ...)`// 假设控制器是RegisterController

或者

```
$.post('@Url.Action("GetAllUsers", "Register")',.. 
```

# .net - 带参数的 MVC DI 城堡型工厂设施

> ID：11473565
> 
> 赞同：0
> 
> 时间：2012-07-13T15:28:42.743
> 
> 标签：.net, asp.net-mvc, dependency-injection, castle-windsor

我正在玩类型化工厂的实现，并且我一直在阅读关于类型化工厂的城堡页面。我想知道如何将构造参数传递给泛型类型工厂。

```
public interface IFacilityFactory {
  IFacility<T> Create<T>(); // how to pass some parameter(s) to any T constructor?
} 
```

你能给我一些方向吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:33:00.900

这没有多大意义，因为您需要为可用作泛型类型参数“T”的无限可能类型集提供一组通用构造函数参数。

但是，抛开理智，我相信你可以做到。您只需在工厂接口上声明要在 Resolve() 上传递的参数，Windsor 将在您使用工厂时执行。参数名称将成为字典键。您不需要声明将从容器本身解析的构造函数属性。

例如，我们在容器中注册了一个组件 Bar 和依赖类 Foo：

```
public class Foo
{
    // Constructor requires Bar to be resolved from the container
    public Foo(int something, Bar bar, string somethingElse)
    {
       ...
    }
} 
```

我们将声明工厂接口：

```
public interface IGenericFactory
{
    T Create<T>(int something, string somethingElse)
} 
```

当我们使用类型化工厂时，Windsor 会通过这两个参数并从容器中解析出另一个参数（bar）。'something' 和 'somethingElse' 参数简单地被推入字典，Windsor 会判断它是否可以使用它们。当然，如果您调用它们，它将能够使用它们，`Create<Foo>(1, "")`但对于 Foo 以外的任何类型，它们可能是多余的。

# php - 记忆 PHP/MySQL 函数

> ID：11473566
> 
> 赞同：3
> 
> 时间：2012-07-13T15:28:44.087
> 
> 标签：php, mysql, sql

由于 MySQL 查询，我有一个很慢的函数。
只要某些 MySQL 表保持不变，该函数就会返回相同的结果。
在 PHP/MySQL 中“记忆”这样一个函数的最简单方法是什么？

**编辑：**
我想看到的是：

*   类似于来自 MqSQL 的表的表哈希/上次修改日期。
*   PHP 方面的一些东西足够聪明，可以找出函数可以访问哪些表，并在适当的情况下缓存/检索结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:36:19.440

在我这边，我使用我构建的自定义 MVC 框架，每次调用基于 SELECT 的函数时，如果我已经处理了该结果，我将在缓存中查找并简单地返回它：

```
public static function getProductsByCategory(Activis_Catalog_Models_Category $category, array $except = array(), $limitedToActivation = true){

    //If the cache contains the request, return it
    if(isset(self::$__resultCache['getProductsByCategory'][md5(serialize(func_get_args()))])){ return self::$__resultCache['getProductsByCategory'][md5(serialize(func_get_args()))]; }

     ...... PROCESS THE FUNCTION NORMALLY ....

    self::$__resultCache['getProductsByCategory'][md5(serialize(func_get_args()))] = $objects;
    return $objects; 
```

这将是一个简单的缓存机制，允许您缓存数据（在本例中为对象）并在以后再次调用相同的函数时返回它们。

如果您的模型中有 UPDATE/DELETE/INSERT 功能，您应该记住清除“$cache”，否则您将返回已更改的不正确数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:33:04.520

您很可能正在寻找数据的缓存方法。

以下是一些可能感兴趣的方法：

**内存缓存/APC**

如果您可以访问支持此功能的主机，那就去吧。这是当今存储和检索数据的单一、最快的方式。

**参考**：[http ://www.php.net/manual/en/book.memcached.php](http://www.php.net/manual/en/book.memcached.php)

* * *

**文件缓存**

您可以使用 PHP 中的文件库将数据保存到文件并在需要时检索它。这可能对 Javascript 数据有用，并且您可以按需动态加载 .js 文件。

**参考**：[http ://www.php.net/manual/en/ref.filesystem.php](http://www.php.net/manual/en/ref.filesystem.php)

* * *

**SQL 缓存**

您还可以将结果存储在单独的表中（假设您正在使用昂贵的复杂操作并且尚未将其从单个表中拉出）以便于读/写访问。

**参考**：[http ://www.php.net/manual/en/ref.pdo-mysql.php](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

`cronjobs`为了随着时间的推移删除缓存的数据（为了节省空间或更新缓存），您可能会感兴趣。

**参考**：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

享受和好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:33:10.067

首先，您可以在第一次处理结果时简单地将结果存储在 semlf 制作的“缓存”中。然后，当再次触发相同的查询时，您只需从缓存中读取结果。但这只有在您知道表格中没有任何变化的情况下才有效。你 ？

除此之外：mysql RDMBS 非常擅长缓存自身。因此，通常第二次触发相同的查询会更快地得到回复。这还不够吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T15:31:03.233

如果这些特定的表发生变化，为什么不缓存查询结果并清除缓存呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-10T22:12:01.427

看看[卡查洛特](https://github.com/ihor/Cachalot)。代码将如下所示：

```
$cache = new \Cachalot\ApcCache();
$products = $cache->getCached([$productRepository, 'findByCategory'], ['cars']); 
```

支持不同的后端：Apc、Xcache、Memcached、Redis、Couchbase。

# c# - 在 VBA 中使用从 C# 构建的 .xll/.dll

> ID：11473567
> 
> 赞同：2
> 
> 时间：2012-07-13T15:28:44.033
> 
> 标签：c#, vba

我发布此内容是为了详细说明从 VBA 运行某些 C# 函数（已编译）的选项。

到目前为止，我已经尝试过[XLW](http://xlw.sourceforge.net/)和[Excel DNA](http://exceldna.codeplex.com/)。这两者都使您能够构建一个 .xll，您可以从 Excel 会话中引用它来使用（[Excel DNA](http://exceldna.codeplex.com/)更好更容易。它仍然受支持，而 XLW 自 .net 3 以来没有看到任何更新，需要 VS2008 或2005 带有某些要运行的模板）。

据我了解，XLL 存在一个问题，因为它们无法集成到电子表格中，需要单独加载。

1.  无论如何将 C# 编译的代码嵌入到电子表格而不是 Excel 会话中以使 VBA 插件“独立”/“开箱即用”工作？
2.  否则是否可以在运行时从 VBA 加载 XLL？这样做有没有潜在的风险？
3.  关于 C#/VBA 互操作的任何提示值得一提？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:56:16.920

我过去使用的一种解决方案是开发 VSTO 2005 .xls 文档，将其转换为 .xla，并使用[类似于 Paul Stubbs 的这篇博客文章中描述](http://blogs.msdn.com/b/pstubbs/archive/2004/12/31/344964.aspx)的技术来获取对 COMVisible .NET 的引用来自 VBA 的代码。

我首选的解决方案是：

*   在 IDL 中定义要在 .NET 中实现的 COM 接口，并从中构建一个类型库。

*   将此类型库导入 .NET 项目，并创建实现所需接口的具体类。

*   使用链接博客文章中描述的技术将工厂类实例返回到 VBA。一旦 VBA 有了这个工厂类实例，它就可以使用它来获取所有 API。

通过使用 IDL 手动定义 COM 接口，您的 VBA 代码将只需要引用这些，而不是引用从 COM 可见的 .NET 程序集生成的类型库，从而避免了很多版本控制问题。

# jquery - jQuery：取消绑定事件处理程序

> ID：11473568
> 
> 赞同：0
> 
> 时间：2012-07-13T15:28:44.793
> 
> 标签：jquery

我选择将绑定元素绑定到主体，以让它们影响元素，即使它们还不存在。现在，我想在我去的时候解开一些处理程序，这就是我遇到一些困难的地方。

代码：

```
$('body').unbind('click', deleteComment); //unbind
$('body').on('click', '.deleteCommentButton > img', deleteComment); //binding 
```

问题是我应该如何专门为它解除绑定`.deleteComment > img`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:31:47.850

如果你使用 .on 你需要 .off 解除绑定

```
$("body").off('click', '.deleteCommentButton > img', deleteComment); 
```

看这里[http://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:35:46.053

您可以使用以下方法删除它：

```
$("body").off('click', '.deleteCommentButton > img', deleteComment); 
```

这将解除事件处理程序与选定元素的绑定。

[链接到 api](http://api.jquery.com/off/)

# xml - 有没有办法在 Erlang 中执行 XML 转换？

> ID：11473571
> 
> 赞同：3
> 
> 时间：2012-07-13T15:28:51.873
> 
> 标签：xml, erlang, xslt

如何通过 XSL 转换从另一个 XML 生成 XML？我看了看，`xslapply/2`但我想生成 XML 而不是 Erlang 代码。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:20:46.490

好吧，在[xmerl_xs](http://www.erlang.org/doc/man/xmerl_xs.html)模块的文档中说（关于`xslapply/built_in_rules combo)`：

> 这种方法对于 Erlanger 来说可能更容易，但如果您需要使用真正的 XSLT 样式表以“符合标准”，则有一个适配器可用于 Sablotron XSLT 包，它是用 C++ 编写的。

令我惊讶的是，我发现的大多数链接都已损坏，但这是一个[有效](http://forum.trapexit.org/viewtopic.php?p=30202)的链接。但请注意，它只是一个*适配器*，因此需要安装[Sablotron 主包](http://www.gingerall.com/charlie/ga/xml/p_sab.xml)。

# android - 亚马逊 S3 和安卓

> ID：11473574
> 
> 赞同：1
> 
> 时间：2012-07-13T15:29:01.090
> 
> 标签：android, amazon-s3

我正在尝试编写一个从 amazon s3 服务器下载图片并将图片作为幻灯片显示在应用程序上的应用程序。该应用程序将被捆绑到专门用于此目的的平板设备。该设备将使用 wifi 连接来检查 S3 服务器的图片并下载它们以进行幻灯片放映。主要问题是连接到 s3 服务器并下载图片。我不知道从哪里开始，所以我的问题是如何以编程方式连接到 s3 服务器以进行下载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:27:16.847

我建议您下载适用于 Android 的 AWS 开发工具包：http: [//aws.amazon.com/pt/sdkforandroid/](http://aws.amazon.com/pt/sdkforandroid/) 并阅读其文档。使用它的 API 非常简单。

在服务器和代码上配置好所有 SDK 和令牌后，您只需要这样的调用即可从 S3 下载图片：

```
AmazonS3 s3 = new AmazonS3Client(AWSCredentials);
S3Object object = s3.getObject(bucketName, pictureId);
object.getObjectContent(); 
```

但是阅读文档，完整的配置需要相当多的工作。

# plugins - 在 tinyMCE 插件中捕获按下按钮

> ID：11473576
> 
> 赞同：1
> 
> 时间：2012-07-13T15:29:20.473
> 
> 标签：plugins, tinymce

我想捕捉按下某个按钮的事件。在[TinyMCE 捕获单击按钮事件](https://stackoverflow.com/questions/9665396/tinymce-capture-click-button-event)中，建议了如何执行此操作的简单解决方案，但对我来说它不起作用。能否请你帮忙。这是我在 editor_plugin_src.js 和 editor_plugin.js 文件的 tinymce/plugins/test 文件夹中的代码：

```
(function(){
tinymce.create("tinymce.plugins.testPlugin",{
    init:function(ed,url){
        ed.addCommand('my_bold', this.my_bold, this); //calls the function my_bold
        ed.onInit.add(function(editor) {
            if (editor.controlManager.get('bold')){
                editor.controlManager.get('bold').settings.cmd='my_bold_action'; 
            };

        });
    },
    my_bold: function() {           
        // exectution of regular command
        this.editor.execCommand('Bold');

        // now do whatever you like here
        alert('pressed');
    },
    createControl:function(b,a){
        return null
    },
    getInfo:function(){
        return{
            longname:"test plugin",
            author:"test author",
            authorurl:"http://tinymce.moxiecode.com",
            infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example",
            version:"1.0"
        }
    }
});
tinymce.PluginManager.add("test",tinymce.plugins.TestPlugin)     })(); 
```

在这里我激活插件测试：

```
 $(this).tinymce({
        ...
        autoresize_bottom_margin : 15,
        mode : 'exact',
        elements : clickedId,           
        theme : 'advanced',
        plugins : 'autoresize,test',
        force_br_newlines : true, 
```

更新：

```
(function(){
tinymce.PluginManager.requireLangPack("test");
tinymce.create("tinymce.plugins.test",{
    init:function(ed,url){
        ed.addCommand('my_bold', this.my_bold, this);//calls the function my_bold
        ed.onInit.add(function(editor) {
            if (editor.controlManager.get('bold')){
                editor.controlManager.get('bold').settings.cmd='my_bold'; 
            }
        });
    },
    my_bold: function() {           
        // exectution of regular command
        this.editor.execCommand('Bold');

        // now do whatever you like here
        alert('pressed');
    },
    createControl:function(ed,url){
        return null
    },
    getInfo:function(){
        return{
           longname:"test plugin",
           author:"test author",
           authorurl:"http://tinymce.moxiecode.com",
           infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example",
           version:"1.0"
        }
    }
});
tinymce.PluginManager.add("test",tinymce.plugins.test)    })(); 
```

现在我有了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:37:34.923

您是否在按钮配置中添加了粗体按钮？就像是：

```
theme_advanced_buttons1: "bold,italic,underline"; 
```

更新：

```
editor.controlManager.get('bold').settings.cmd='my_bold_action'; 
```

是错误的，你需要：

```
editor.controlManager.get('bold').settings.cmd='my_bold'; 
```

这里。

# android - 如何将屏幕分辨率转换为可用变量？

> ID：11473579
> 
> 赞同：0
> 
> 时间：2012-07-13T15:29:32.923
> 
> 标签：android, size

好的，所以我正在为 Android 制作游戏。对于菜单屏幕，我想让徽标从右到左浮动在背景中，反之亦然。这似乎不是什么大问题，但我希望它处于随机高度，而不是超出屏幕，所以我需要分辨率。[我在这个问题](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)的答案中找到了以下脚本：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int scrHeight = size.y; 
```

不幸的是，我在第 3 行遇到错误：

```
Multiple markers at this line
- Syntax error on token "size", VariableDeclaratorId expected after this token
- Syntax error on token(s), misplaced construct(s) 
```

我不知道出了什么问题（我基本上是 ctrl+c,ctrl+v'd），而且我有点不愿意使用 getHeight() ，因为它已被弃用......

还有一个额外的小问题：getSize 是在 SDK 13 中实现的，对吧？这是否意味着它不适用于 SDK 13 之前发布的手机，或者我可以忽略这一点？

已经谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:37:00.937

如果您的目标设备低于 API 级别 13，那么您将不得不使用`getHeight()`. 在这种情况下使用`getSize()`不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:39:24.453

试试这个 ：

```
Display display = ((WindowManager) mContext.getSystemService(
    Context.WINDOW_SERVICE)).getDefaultDisplay();

int srcWidth = display.getWidth();
int srcHeight = display.getHeight(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:41:10.333

是的，您是对的，此方法不适用于 AP13 之前的版本。你必须使用`display.getWidth()`; 和`display.getHeight()`; API13 之前。

# git - Git更改分支，但不要更改工作区中的文件

> ID：11473582
> 
> 赞同：5
> 
> 时间：2012-07-13T15:29:36.417
> 
> 标签：git, branch, git-branch

这类似于我的另一个问题（[在不更改工作区文件的情况下切换到另一个分支](https://stackoverflow.com/questions/8650310)），但在那里工作的解决方案现在不起作用。

我需要删除一些很久以前推送到远程主机的更改。所以我不想从 master 中删除提交，但我想更改文件，就像这些更改被还原一样。所以我这样做了：

1.  上主的时候，`git branch limits`
2.  `git checkout limits`
3.  `git rebase --interactive <commit before the ones I wanted to remove>`
4.  在交互式控制台中，我删除了带有我想要还原的更改的提交

所以现在`limits`我有了我想要的代码。我怎样才能“移动”它来掌握？使用`limits`我想更改为`master`分支的代码，但不更改工作区中的任何文件，因此我可以将更改作为新更改提交到`master`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:40:12.173

您提出的问题的答案是：

```
$ git checkout master             # switch to master branch

$ git reset --hard limits         # hard-reset it to the limits commit
$ git reset --soft master@{1}     # move the reference back to where it was, but
                                  #  don't modify the working tree or index 
```

这将使您的工作树和索引与您`limits`签出时完全相同，但您将`master`位于其原始位置的分支上。

* * *

但是，执行此类操作的正确方法是针对`git revert`您尝试撤消的每个更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T15:42:45.343

与其使用交互式变基，您可以只还原您不想要的每个提交。当您使用 时`git revert <object-name-of-commit>`，git 将引入一个新的提交，以撤销您命名的那个引入的更改。因此，假设您要删除的提交是`abc123`and `def456`，您可以这样做：

```
git checkout master
git revert abc123
git revert def456 
```

但是，如果找到这些提交需要大量工作，并且您对 的提示感到满意，则可以在其中创建一个包含树状态的`limits`新提交。`master`首先，*确保*它`git status`是干净的，因为您将使用`git reset --hard`，这将清除未提交的更改：

```
git checkout master
git reset --hard limits
git reset --soft HEAD@{1}
git commit -m "Reverting unwanted commits" 
```

该食谱是这个问题的一个变体：

*   [https://stackoverflow.com/a/1895095/223092](https://stackoverflow.com/a/1895095/223092)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:43:11.677

这要求`revert`:-)

我会回到 master 和`git-revert`你想要取消应用的每个提交。这会为每个创建一个“未应用”的提交——所以历史不会改变，但你会得到你想要的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:33:59.840

### 移动分支指针

如果您实际尝试做的是在复杂的变基或合并到单独的分支之后将分支指针移动到 master ，您可以通过多种方式做到这一点。例如，要强制移动某个临时分支以使其成为新的主分支，您可以执行以下操作之一：

```
# Use git porcelain to move the branch over top of one that already
# exists.
git branch -M limits master

# Explicitly move the branch pointer to wherever the head for limits
# is pointing.
git reset --hard refs/heads/limits 
```

您还可以通过多种方式执行各种管道命令，但这并不意味着详尽无遗。这应该足以让你指出正确的方向。

### 恢复提交

正如其他帖子和评论正确指出的那样，如果您只想撤消 master 的目标提交，那么您可以使用 git-revert(1)。请注意，这会在您的历史记录中留下原始提交和还原；这*通常*是你想要的。

另外，请注意 git-revert 可能会导致您必须手动解决的冲突或不良更改，特别是如果您要恢复的提交不是小的原子更改。将 git-revert 视为一个反向补丁（从根本上说，它是在幕后），您可以看到可能出现潜在冲突的地方。

您的里程肯定会有所不同。

# objective-c - iOS indexOfObjectIdenticalTo：不适用于字符串

> ID：11473583
> 
> 赞同：0
> 
> 时间：2012-07-13T15:29:36.697
> 
> 标签：objective-c, ios, nsarray

我已经看到过关于 NSArray`indexOfObjectIdenticalTo:`方法的类似问题，但我希望我的提问能产生简单的答案。搜索以编程方式构建的字符串是否无用？

```
NSArray* theArray = [[NSArray alloc] initWithObjects:@"John", nil];
NSString* searchString1 = @"John";
NSString* stringComponent = @"Jo";
NSString* searchString2 = [stringComponent stringByAppendingFormat:@"hn"];

BOOL testContains1 = [theArray containsObject:searchString1];
int  testIndex1    = [theArray indexOfObjectIdenticalTo:searchString1];
BOOL testContains2 = [theArray containsObject:searchString2];
int  testIndex2    = [theArray indexOfObjectIdenticalTo:searchString2]; 
```

在上面的示例中，`testContains1`两者`testContains2`都返回相同的值，即`true`. 但是`testIndex1`和`testIndex2`不同；`testIndex1`为 0，因为它在索引 0 处发现了与预期相同的对象，但不幸`testIndex2`的是 2147483647 (NSNotFound)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T15:35:42.333

关于的文档`indexOfObjectIdenticalTo:`说：

> 如果对象地址相同，则认为对象相同。

对于具有相同内容但构造不同的对象显然不是这种情况。

您需要`indexOfObject:`在这种情况下使用，它将为您提供`YES`从该`isEqual:`方法返回的对象的最低索引。

# windows-phone-7 - 如何将自签名证书安装到 Windows Phone 7 模拟器

> ID：11473589
> 
> 赞同：1
> 
> 时间：2012-07-13T15:29:55.787
> 
> 标签：windows-phone-7, ssl, https

我阅读了有关此问题的 Stackoverflow 上的许多帖子，但似乎找不到任何解决方案

我有一个在 IIS 7.5 上运行的 Web 服务器并为其使用自签名证书，以便 WP7 可以调用 https 服务。

我有一个客户端（WP7），我想将该证书安装到我的模拟器中进行测试。我尝试将证书导出到 .cer、.p7b，并将该文件包含在 Web 服务器中，以便我的 WP7 模拟器可以访问它。模拟器显示“证书已安装成功”的消息框，我什至尝试更改区域设置以便模拟器可以“重置”，但是 WP7 仍然无法访问 Web 服务器上的 https 服务。

我们可以在 WP7 模拟器上安装自签名证书，还是我们可以在真机上安装？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:04:43.713

[此处](http://msdn.microsoft.com/en-us/library/gg521150%28v=VS.92%29.aspx)概述了可用于 Windows Phone 的 SSL 证书的特定要求。自签名证书无法与安全服务配合使用。

> 证书的根证书颁发机构 (CA) 必须是列出的 CA 之一

（[来源](http://msdn.microsoft.com/en-us/library/ff941099%28v=VS.92%29.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:58:38.727

在 Windows Phone 上安装自签名证书的唯一方法是将浏览器指向远程服务器上的证书文件 URL。所以看起来你做对了。

我为我的生产应用程序这样做，它在模拟器和设备上运行良好。每次关闭模拟器时，您都会丢失证书，并且在再次打开它时必须进行安装。

如果它仍然无法正常工作，那么它一定是罪魁祸首。

# javascript - Javascript中的双变量

> ID：11473591
> 
> 赞同：2
> 
> 时间：2012-07-13T15:30:09.617
> 
> 标签：javascript

> **可能重复：**
> [Javascript 变量变量](https://stackoverflow.com/questions/592862/javascript-variable-variables)

PHP 中有一个非常方便的东西（我确信这是有罪的），但我正在寻找 JavaScript 替代方案。

在 PHP 中，我可以这样做：

```
$bar = 'var';
$$bar= 'test';

echo $var; 
```

我正在寻找与 JavaScript 类似的东西。我想将名称传递给函数并使用该名称初始化一个新变量。所以：

```
function(name) {
    var name = new Function();
} 
```

**更新：** 好的，这就是我想要做的。我知道有一个更简单的方法..

我想使用某些东西的多个实例（我们现在说 plupload）。

```
var uploader = new plupload(); 
```

我正在动态加载这些，并且页面上会有多个。我遇到的问题是它们都必须有一个唯一的名称，因为我必须能够调用 uploader.init()、uploader.refresh() 等，并且每个函数都独立。

正如我所说，我确信有更好的方法......我只是不知道它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T15:32:46.930

这是有罪的。在 PHP 和 JavaScript（以及几乎所有其他语言）中，如果你有一组相关的东西，那么你应该用一个数组（如果它们是有序的而不是稀疏的）或对象/关联数组（如果它们有名称）来表示它们）。

```
var bar = 1;
var foo = "test";
var group = {};
group[bar] = foo;
console.log(group[1]); 
```

变量变量本质上是假数组/对象。改用真实的——它们给你更多的力量，更容易维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:49:33.670

看到您的编辑，我建议您使用对象来存储您的唯一`plupload`实例。

```
var all_uploads = {};
all_uploads["unique_name_1"] = new plupload();
all_uploads["unique_name_2"] = new plupload();
all_uploads["unique_name_3"] = new plupload(); 
```

您可以以任何您想要的方式生成“unique_name”字符串。

另一种选择是使用一个简单的数组和它上面的`push()`每个`plupload`实例。不幸的是，每次要查找特定实例时都必须搜索数组，但如果数组保持较小，则性能折衷非常小。

# python - win32pipe.PeekNamedPipe 的 pyHandle 对象（pyHandle，bufsize）

> ID：11473593
> 
> 赞同：0
> 
> 时间：2012-07-13T15:30:16.537
> 
> 标签：python, winapi, named-pipes, pywin32

win32pipe.PeekNamedPipe 获取参数 pyHandle(read handle) 和 buf size 。pyHandles 由 win32pipe.createPipe() 返回，它为我提供了管道的读写句柄。

现在，假设我已经将此管道的读取句柄的句柄/整数值传递给另一个进程。我想通过传入 pyHandle 使用 peekNamedPipe 方法读取句柄上的数据。

我在其他地方读到，接受 pyHandles 的函数也将接受 int 值，但在这种情况下它不接受，当我尝试传递 int 时，它给我一个错误，说句柄无效。

有没有办法可以用我拥有的整数创建一个 pyHandle 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:06:17.127

我对 Python 或 pyHandles 知之甚少，但根据您的描述，听起来 pyHandle 是 Win32 HANDLE 的薄包装器，在这种情况下是 Pipe 对象的 HANDLE。

Windows 中的 HANDLE 是通过调用各种 Win32 API 函数（包括 CreatePipe）从操作系统获得的。大多数 HANDLE 具有进程关联性，因此只能由获取它们的进程使用。

在 Win32 中，如果您有一个对象的句柄，并且想将该对象的引用传递给另一个进程，则必须显式调用 API [DuplicateHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724251%28v=vs.85%29.aspx)以请求操作系统给您一个句柄，该句柄将在另一个进程中工作.

因此，如果您可以找到一种方法来`DuplicateHandle`使用原始 pyHandle 中的数值进行调用，您应该能够将其转换为可以在其他进程中使用的不同句柄值。

# android - 如何根据数据库填充数据将图像源设置为 listView

> ID：11473603
> 
> 赞同：0
> 
> 时间：2012-07-13T15:30:46.680
> 
> 标签：android, database, android-listview, imageview, android-viewbinder

基本上我要做的是根据我从预先创建的数据库中获得的 id 将图像源动态设置为图像视图。这是我的 ListFragment：

```
public class teamsListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
    String[] teams;
    private SimpleCursorAdapter adapter; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String[] projection = {DBAdapter.KEY_ROWID, DBAdapter.KEY_NAME};
        String[] uiBindFrom = {DBAdapter.KEY_NAME};
        int[] uiBindTo = {R.id.label};

        getLoaderManager().initLoader(0, null, this);
        adapter = new SimpleCursorAdapter(
                getActivity().getApplicationContext(), R.layout.team_row,
                null, uiBindFrom, uiBindTo, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        adapter.setViewBinder(VIEW_BINDER);
        setListAdapter(adapter);
    }
    static final SimpleCursorAdapter.ViewBinder VIEW_BINDER = new SimpleCursorAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            if(view.getId() != R.id.icon) return false;
            ImageView teamIcon = (ImageView) view;
            int idTeam = cursor.getInt(cursor.getColumnIndex(DBAdapter.KEY_ROWID));
            switch(idTeam) {
            case 1:
                teamIcon.setImageResource(R.drawable.team1);
                break;
            case 2:
                teamIcon.setImageResource(R.drawable.team2);
                break;
            }
            return true;
        }
    };
} 
```

这是我的 teamrow.xml

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="30dp"
    android:layout_height="24dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="8dp"
     />

<TextView
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="6dp"
    android:lines="1"
    android:text="@+id/TextView01"
    android:textSize="24dp" /> 
```

问题是它不起作用，没有设置图像源。我认为是视图活页夹，但我是 android 新手，如果能告诉我我的错误或者是否有更好的方法来实现这一点，我真的很感激。提前致谢。

# node.js - node.js, express.js - 提供单个静态文件的最简单方法是什么？

> ID：11473607
> 
> 赞同：69
> 
> 时间：2012-07-13T15:31:01.423
> 
> 标签：node.js, express

我已经看到并使用了：

```
app.use("/css", express.static(__dirname + '/css')); 
```

我不希望提供根目录中的所有文件，只提供一个文件“ipad.htm”。使用 express.js 以最少的代码量做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-13T22:01:25.343

`res.sendFile(path_to_file);`是你所需要的全部; 它将自动设置正确的标题并传输文件（它在内部使用与 相同的代码`express.static`）。

在小于 4 的 express 版本中，使用`sendfile`代替`sendFile`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-07T03:06:25.800

```
app.use("/css/myfile.css", express.static(__dirname + '/css/myfile.css')); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-06T16:31:41.133

如果您只想提供单个静态文件，可以使用以下语法（基于原始问题的示例，根目录下的 ipad.htm）：

```
app.use('/ipad.htm', express.static(__dirname, {index: 'ipad.htm'})); 
```

*express.static( dir* )的默认行为是它会尝试从所需的*dir*发送一个“index.html”文件。*index*选项会覆盖此行为，并允许您选择预期的文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-23T12:16:11.390

我发布了一个用于提供单个静态文件的小型库：[https ://www.npmjs.com/package/connect-static-file](https://www.npmjs.com/package/connect-static-file)

`npm install connect-static-file`

`var staticFile = require('connect-static-file'); app.use('/ipad', staticFile(__dirname + '/ipad.html'));`

与 express.static 的主要区别在于它不关心请求 url，如果路由匹配，它总是提供该文件。如果您将目录命名为“ipad.html”，它不会突然开始为整个目录提供服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T20:18:42.363

基于 JoWie 的回答的快速示例：

npm 安装连接静态文件

npm 安装快递

```
var express = require('express');
var staticFile = require('connect-static-file');

var path = 'pathto/myfile.txt';
var options = {};
var uri = '/';
var app = express();
var port = 3000;

app.use(uri, staticFile(path, options));

app.listen(port, () => console.log(`Serving ${path} on localhost:${port}${uri}`)); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-07-13T16:30:28.503

```
 fs.createReadStream(path).pipe(res); 
```

# android - 如何将此 Actionscript 3.0 代码用于多个帧？

> ID：11473608
> 
> 赞同：0
> 
> 时间：2012-07-13T15:31:02.157
> 
> 标签：android, actionscript-3, ios5, flash-cs5

我对 Actionscript 完全陌生。我到处搜索屏幕方向代码，但找不到合适的。我正在尝试制作一个具有多个页面（框架）的书籍应用程序，该应用程序具有纵向和横向模式。

我找到了 Adam Khoury 编写的代码，但它只适用于一帧。有没有办法将此代码用于具有不同影片剪辑的多个帧（页面）？这是他使用此代码的视频：[goo.gl/T24ku](http://goo.gl/T24ku)。

```
// AS3.0 Android App View Modes Script For App View Orientation
// Written by Adam Khoury
import flash.display.Stage;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.events.Event;
// Create stage instance and manipulate 2 of its properties
var appStage:Stage = myApp.stage;
appStage.scaleMode = StageScaleMode.NO_SCALE;
appStage.align = StageAlign.TOP_LEFT;
// Function that executes each time a phone or device is rotated
function orientateMyApp(event:Event):void {
    var device_width:int = appStage.stageWidth;
    var device_height:int = appStage.stageHeight;
    // Condition that allows toggling between view modes
    if(device_width > device_height){
        myApp.gotoAndStop("wide_view");
    } else {
        myApp.gotoAndStop("tall_view");
    }
}
// Add an event listener for the resize event of the stage instance
appStage.addEventListener(Event.RESIZE, orientateMyApp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:48:26.360

与其在每个布局的时间轴上使用帧，不如将每个布局创建为自己的影片剪辑，然后将它们都放在一个帧上。使用可见属性显示/隐藏它们。在翻页时，同时推进两种布局模式，或存储 currentPage 以设置旋转后的布局。

```
if(device_width > device_height){
    //landscape mode
    landscapeView_mc.visible = true;
    portraitView_mc.visible = false;
} else {
    //portrait mode
    landscapeView_mc.visible = false;
    portraitView_mc.visible = true;
} 
```

# symfony - 干掉一个跨包共享的 Symfony2 实体存储库函数

> ID：11473611
> 
> 赞同：0
> 
> 时间：2012-07-13T15:31:07.487
> 
> 标签：symfony

我有一个在两个不同的实体存储库中使用的函数。这在两个存储库中完全相同，当然不是很干燥。

我真的不知道将这个函数放在哪里合适的地方，以便两个存储库都可以使用它。这两个存储库位于不同的捆绑包中这一事实并没有让我更容易弄清楚。

顺便说一句，它不是模板助手。这是存储库需要使用的功能。

我应该把这个函数放在哪里，所以我只定义一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:56:22.623

我可能会因为这样说而被烧死，但是将 unDRY 代码扔到实用程序类的静态方法中呢？使用它就像`Foo::bar()`从任何 repo 一样简单。

您也可以将其设为常规公共方法，并使用 setter 注入将实用程序对象传递给需要它的每个 repo。这将涉及更多工作，但您的应用程序可能更容易运行单元测试。

顺便说一句，@John Millikin 在[描述“安全”和“不安全”静态方法](https://stackoverflow.com/a/752805/155175)方面做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:50:52.103

我前段时间解决了类似的问题，我不知道是否是更好的解决方案，但它确实有效。

```
class CommonRepository extends EntityRepository
{

     public function common(){
      ...
     }

}

class RepoThatUseCommonRepository extends CommonRepository
{

     ...
} 
```

# jquery - jQuery 和 SPServices 未显示 jQuery 微调器

> ID：11473618
> 
> 赞同：0
> 
> 时间：2012-07-13T15:31:29.840
> 
> 标签：jquery, jquery-plugins, jquery-mobile

我正在使用带有 SPServices 的 jQuery Mobile 将 SharePoint 数据拉入移动页面。所有数据都实际加载，但我没有成功让*微调器*在提取数据时加载。

我已经阅读了几页您必须设置`async: true`才能使其正常工作的页面，但这没有帮助。我还尝试了几种方法来显示和隐藏都不起作用的微调器。

*   jQuery 1.7.2
*   jQuery 移动 1.1.0
*   SPServices 0.7.1a [http://spservices.codeplex.com/](http://spservices.codeplex.com/)

有任何想法吗？

**不工作**

```
$(document).delegate('#top-stories', 'pageshow', function () {
    function getList(){
             // ....
    } // end function
    $.mobile.showPageLoadingMsg();
    getList();
    $.mobile.hidePageLoadingMsg();
}); 
```

**不工作**

```
$(document).delegate('#top-stories', 'pageshow', function () {
    function getList(){
        $.mobile.showPageLoadingMsg();
        $().SPServices({
            // ....
        });
        $.mobile.hidePageLoadingMsg();
    } // end function
    getList();  
}); 
```

**加载项目和工作的代码，只是没有微调器**

```
$(document).delegate('#top-stories', 'pageshow', function () {
    function getList(){
        $().SPServices({
            operation: "GetListItems",
            listName: "Posts",
            webURL: "/SiteDirectory/news_and_updates",
            async: true,
            CAMLRowLimit: 15,
            CAMLQuery: "<Query><OrderBy><FieldRef Name='Created' Ascending='FALSE' /></OrderBy><Where><Eq><FieldRef Name='PostCategory' /><Value Type='Choice'>Announcements</Value></Eq></Where></Query>",
            CAMLViewFields: "<ViewFields><FieldRef Name='Title' /><FieldRef Name='ID' /></ViewFields>",
            completefunc: function (xData, Status) {
              $(xData.responseXML).SPFilterNode("z:row").each(function() {
                var liHtml = "<li data-theme=\"c\"><a href=\"javascript:viewStory(" + $(this).attr("ows_ID") + ")\">" + $(this).attr("ows_Title") + "</a></li>";
                $("#top-stories ul").append(liHtml).listview("refresh");
              });
            }
        });
    } // end function
    getList();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:58:23.193

在调用 $().SPServices 之前，在 getList 方法中调用 showPageLoadingMsg。然后在你的 completeFunc 回调方法中调用 hidePageLoadingMsg，在循环之前或之后通过 xData.responseXML;

# c# - 自定义授权属性捕获请求的角色

> ID：11473619
> 
> 赞同：2
> 
> 时间：2012-07-13T15:31:34.263
> 
> 标签：c#, asp.net-mvc-3, authorization, forms-authentication

在制作自定义`[Authorize]`属性时，有没有办法捕捉正在请求的角色？

那么在这种情况下，`[Auth(Roles = "IgnoreAuth")]`习俗内部是否有办法以某种方式`Auth`捕捉`"IgnoreAuth"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:50:25.313

Roles 在基础 AuthorizeAttribute 类中。因此，您可以像这样简单地从您的自定义 Auth 访问它：

```
public class AuthAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var roles = this.Roles;
    }
} 
```

澄清一下，每当您执行 [Auth(Roles = "IgnoreAuth")] 时，您只是在 AuthorizeAttribute 中设置 Roles 属性。

# node.js - socket.io：从服务器向服务器发出消息（！）

> ID：11473626
> 
> 赞同：4
> 
> 时间：2012-07-13T15:31:56.940
> 
> 标签：node.js, socket.io

我可以愉快地从服务器向客户端发送消息，也可以从客户端向服务器发送消息。但是，我似乎需要**从服务器本身向（服务器）套接字发送（广播）消息**——我不知道该怎么做。

案例是服务器（通过 Redis 订阅）了解到可能非常多的客户端中的一个子集需要发送消息。每个服务器端套接字都可以自行确定是否需要触发。我只是不知道如何让他们知道他们必须进行检查（可能与来自客户端的消息（？）的“通常”方式大致相同）。

FWIW 可以仅使用 handshakeData （和其他非套接字实例特定的服务器端结构）进行检查。如果有办法“从外部”获取 handshakeData，这也是一种可能；但绝不是真的漂亮。

任何想法/指针任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:42:28.380

当我遇到类似的问题时，我发现会有一个标准的 nodeJS-specific 解决方案。我找到了`EventEmitter`：

[http://nodejs.org/api/events.html#events_class_events_eventemitter](http://nodejs.org/api/events.html#events_class_events_eventemitter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:50:07.650

我似乎终于明白了（通过调试 socket.io 代码）。

在消息处理程序中获取有问题的套接字并设置一个带有事件和其他属性的“参数”数组（通常是带有附加信息的“数据”对象）。用这两个电话`socket.$emit.apply(socket, params)`。

在实际代码中：

```
for (var socketId in io.namespaces['/mynamespace'].sockets) {
    var socket = io.namespaces['/mynamespace'].sockets[socketId];
    var params = ['test event', {'foo': 'bar'}];
    socket.$emit.apply(socket, params);
} 
```

# jquery - JqG rid 搜索 colModel 选项不起作用

> ID：11473627
> 
> 赞同：0
> 
> 时间：2012-07-13T15:31:58.517
> 
> 标签：jquery, search, jqgrid

我最近开始了一个新项目，正在试用最新版本的 JqGrid(4.4.0)。我还在使用带有茄子主题的 jquery 1.7.2 和 jquery ui 1.8.21。

无论如何，除了搜索功能之外，我的网格中的所有东西都可以正常工作。在我的另一个项目中，在我的 colModel 选项上设置 search: true 时，它​​会在列名下创建一个文本框，我可以在其中放置搜索输入，但我似乎无法让它适用于这个网格。我的搜索输入框根本没有出现。就好像它认为搜索对于列或其他东西是错误的。

这是我的javascript：

```
$("#mylist").jqGrid({
    url: 'myposturl',
    datatype: 'json',
    mtype: 'POST',
    colNames: ['Id', 'Code'],
    colModel: [
        { name: 'Id', hidden: true },
        { name: 'Code', align: 'center', search: true }
    ],
    pager: '#mylistpager',
    rowNum: 30,
    rowList: [10, 20, 30],
    sortname: 'Code',
    sortorder: 'desc',
    viewrecords: true,
    gridview: true,
    caption: 'List Rows',
    width: 750,
    height: 750,
    jsonReader: {
        total: 'TotalPages',
        page: 'CurrentPage',
        records: 'TotalRecords',
        root: 'Rows',
        repeatitems: false
    }
}); 
```

有任何想法吗？

编辑：我错过了这部分： $("#mylist").filterToolbar({ autoSearch: true });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:45:40.920

哎呀，我完全忘记了这部分。:)

```
$("#mylist").filterToolbar({ autoSearch: true }); 
```

# asp.net - 在 IIS7.5 中不可见的无扩展名图像文件

> ID：11473632
> 
> 赞同：8
> 
> 时间：2012-07-13T15:32:24.180
> 
> 标签：asp.net, iis-7.5

我们有在 iis6 中完美运行的扩展较少的图像。但是，在 IIS7.5 中，即使添加了静态文件处理程序，我也无法让它显示图像。我在 IIS7.5 的属性中勾选了静态内容选项，服务器的操作系统是 Windows Server 2008 R2。带有扩展名的图像文件正确可见。但是，那些没有扩展名的人在提琴手中给了我 404。还为 .* 文件扩展名添加了 mime 类型 application/octet-stream

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T11:00:41.337

自己找到了答案。我们需要在 ExtensionlessUrlHandler 之上有静态文件模块。

![在此处输入图像描述](../Images/efcc3ca38c56775f2660f3af9669e6e8.png)

这很有效，现在我也可以看到我的无扩展图像了。

# wpf - ViewModel的依赖属性有一定值时，如何让TextBlock闪烁？

> ID：11473636
> 
> 赞同：2
> 
> 时间：2012-07-13T15:32:45.737
> 
> 标签：wpf, storyboard

我有一个视图模型对象，它有一个名为的依赖属性`IsSearching`；它是一个`bool`. 我的表单有一个`TextBlock`控件，用于显示匹配的行数。绑定到属性的`TextBlock's` `Text`属性是一个 `int?`类型。在搜索开始时，该属性设置为`null`。绑定中的转换器将其显示为“--”。

我希望“--”字符串在`IsSearching`属性为`true`时闪烁，我不希望它在属性为时闪烁`false`。这是我到目前为止所拥有的：

`StoryBoard`: _

```
<Storyboard x:Key="FlashTextBlockText">
    <ObjectAnimationUsingKeyFrames RepeatBehavior="Forever" Storyboard.TargetProperty="(UIElement.Visibility)">
        <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Hidden}" />
        <DiscreteObjectKeyFrame KeyTime="0:0:1"   Value="{x:Static Visibility.Visible}" />
    </ObjectAnimationUsingKeyFrames>
</Storyboard> 
```

`Style`仅用于命名`TextBlocks`：

```
<Style BasedOn="{StaticResource {x:Type TextBlock}}" x:Key="FlashBlockText" TargetType="TextBlock">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=IsSearching}" Value="True">
            <DataTrigger.EnterActions>
                <BeginStoryboard Storyboard="{StaticResource FlashTextBlockText}" />
            </DataTrigger.EnterActions>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

该`IsSearching`属性最初是`false`. 当用户点击 Search`Button`时，它被设置为 true 并开始闪烁。但它不会停止闪烁。

我如何在设置回`StoryBoard`时停止？`IsSearching``false`

托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:45:48.433

对属性值进行操作的触发器有两个包含操作的集合：

*   EnterActions：当触发器本身被激活时，此集合中的操作被激活（在您的示例中，当 IsSearching 变为真时）

*   ExitActions：当触发器被停用时，此处的操作被激活（IsSearching 变为 false）

所以你应该通过在 ExitActions 集合中添加一个 StopStoryboard 动作来停止故事板。

无需在其中显式检查属性是否变为 false 的地方创建新的 DataTrigger。

```
<DataTrigger Binding="{Binding Path=IsSearching}" Value="True"> 
    <DataTrigger.EnterActions>
        <BeginStoryboard Name="storyboard" Storyboard="{StaticResource FlashTextBlockText}" />
    </DataTrigger.EnterActions>
    <DataTrigger.ExitActions>
        <StopStoryboard BeginStoryboardName="storyboard" />
    </DataTrigger.ExitActions>
</DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:50:58.193

当 IsSearching = False 时，您需要一个 DataTrigger。有了它，你可以做一个 StopStoryboard。

这是一个例子：

```
<DataTrigger Binding="{Binding IsSearching}" Value="false">
     <DataTrigger.EnterActions>
          <StopStoryboard BeginStoryboardName="YourBeginStoryboard" />
     </DataTrigger.EnterActions>
</DataTrigger> 
```

*闪啊啊啊啊！宇宙的救世主！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:55:18.923

您是否尝试过在值为 False 时添加另一个 DataTrigger，然后再创建另一个情节提要，在其中您可以看到可见性？

# java - 在 Java 中，如何将单个字段的多个值解析为字符串数组？

> ID：11473639
> 
> 赞同：1
> 
> 时间：2012-07-13T15:33:00.450
> 
> 标签：java, arrays, string, parsing

我有一行纯文本，其中包含一系列由加号分隔的标签：

`event name @location +tag1 +tag2 +tag3 +tag4`

数据字段总是以相同的顺序出现：名称、位置、标签。名称和位置始终只有一个实例，但可以有一个或多个标签。我希望能够在 Java 中复制[.NET StringSplit](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法（将所有分隔字符串写入数组），但似乎无法解决这个问题。

我对上面示例中的标记字段的期望输出是：

```
tag[0] = tag1
tag[1] = tag2
tag[2] = tag3
tag[3] = tag4 
```

首先，我能找到的最接近的方法是`split`使用正则表达式。但我不确定如何将正则表达式编码为从数组中排除第一个 +**之前的任何字符。**

`+`我想在特定行中获取计数并使用 for 循环来解析和创建 ，但是这会在一行 `tagString[count-of-plusses]`中遍历多个实例吗？`+nnnnn`

关于解决这个问题的好方法有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:35:56.247

如果您专门查看[String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)的 javadoc ：

```
public String[] split(String regex) 
```

这将允许您围绕您喜欢的任何内容拆分一个字符串并返回一个字符串数组。

您也可以将此方法的版本与`limit`参数一起使用。首先使用它可以让您摆脱所有东西，然后再不使用`limit`参数再次执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:37:37.750

您可以拆分字符串并复制没有第一项的返回数组：

```
String s ="event name @location +tag1 +tag2 +tag3 +
String[] items = s.split("\\+");

//remove the `event name  @location` part
String[] tags = new String[items.length - 1];
System.arraycopy(items, 1, tags, 0, items.length - 1); 
```

确保添加相关的完整性检查（例如，项目长度 > 1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:43:29.803

```
input.split(" +")[1]     // you have "tag1 +tag2 +tag3 +tag4" now
     .split("\\s+\\+");  // you have {tag1, tag2, tag3, tag4} now 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:35:37.907

使用字符串方法 indexOf() 和 subString() 来获取字符串的相关部分，即丢弃第一个 + 之前的所有内容。

然后使用带有 + 作为分隔符的 split() 和 trim() 处理此子字符串以丢弃空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T11:39:40.813

尝试这个。

```
String string = "event name @location +tag1 +tag2 +tag3 +tag4";                        
String[] ss = string.split(" ");
String[] tag = new String[ss.length - 3];
for (int i = 3 ; i < ss.length; i++) {
    tag[i-3] = ss[i].replace("+", "");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T15:39:19.833

如果您不想使用正则表达式，请尝试[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T15:40:16.730

要在第一个字符之前摆脱字符，`+`只需忽略数组中的第一项。

```
 String input = "+tag1+tag2+tag3+tag4";
    String[] splitted = input.split("\\+");     
    System.out.println(Arrays.toString(splitted));
    //returns [, tag1, tag2, tag3, tag4]

    input = "xxx+tag1+tag2+tag3+tag4";
    splitted = input.split("\\+");      
    System.out.println(Arrays.toString(splitted));
    //returns [xxx, tag1, tag2, tag3, tag4] 
```

# asp.net - 无法访问 Nancy 模块中的 ASP.NET 会话对象

> ID：11473652
> 
> 赞同：3
> 
> 时间：2012-07-13T15:33:37.680
> 
> 标签：asp.net, asp.net-mvc-3, nancy

我正在尝试将 MVC3 应用程序与一些 Nancy 模块结合起来。在我的应用程序中，我试图在 MVC3 控制器中设置一个会话变量，然后在 Nancy 模块中读取该变量。当我尝试读取 Nancy 控制器中的变量时，Session 对象为空。

这是我的 MVC3 控制器、Nancy 模块和根 web.config 的要点。

[https://gist.github.com/3105219](https://gist.github.com/3105219)

在应用程序的 MVC3 部分中进行比较时，看起来挂在当前 httpcontext 上的所有（大多数）其他对象都不为空，并且看起来“正常”。

编辑：进一步的测试表明我无法在原始 Nancy 应用程序中访问 ASP.NET 会话。我使用本页底部“创建您的第一个 Nancy 应用程序”部分中的步骤创建了该应用程序。

[https://github.com/NancyFx/Nancy/wiki/Introduction](https://github.com/NancyFx/Nancy/wiki/Introduction)

这是简单的 Nancy 应用程序的 web.config。

[https://gist.github.com/3105583](https://gist.github.com/3105583)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-11T23:36:44.927

继承`IRequiresSessionState`以启用`Asp.net`会话。

```
public class NancyAspHttpRequestHandler 
: NancyHttpRequestHandler, IRequiresSessionState
{

} 
```

并`NancyAspHttpRequestHandler`在处理程序注册中使用，这可以通过`Nancy.AspNet`托管来实现。

这将解决问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:35:43.823

您必须在 Nancy 中创建一个`BootStrapper`提供会话服务。会话服务由`ISession`接口提供。Nancy 带有几个默认实现：`NullSessionProvider`和`Session`. 我猜默认的是`NullSessionProvider`. 另一个实现将数据存储在进程中，并且不使用 cookie。要创建基于 cookie 的会话，您必须创建一个引导程序，如下所示。

```
public class Bootstrapper : DefaultNancyBootstrapper
{
    protected override void ApplicationStartup(TinyIoCContainer container, IPipelines  pipelines)
    {
      CookieBasedSessions.Enable(pipelines);
    }
} 
```

参考。[http://blog.csainty.com/](http://blog.csainty.com/)

**编辑：**

据我了解，Nancy 使用它自己的上下文类来提供请求、会话、缓存和其他内容。帮助提供这些服务的是引导程序。我不确定您是否可以在 Nancy 中直接使用 HttpContext、HttpSession 等 ASP.NET 对象作为默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-02T16:20:21.420

我跟进了 prakash 和 AdrieanKhisbe 的回答（它对我有用 - 但我有时间弄清楚如何）。

编写一个新的 .cs 文件，其内容与上一个答案中所述完全相同：

> 公共类 NancyAspHttpRequestHandler : NancyHttpRequestHandler, IRequiresSessionState {
> 
> }

它是一个空类，但它既继承自（Http Session 状态）又继承`NancyHttpRequestHandler`自`IRequiresSessionState`（Http Session 状态）。

然后，在 Web.config 中，用`Nancy.Hosting.Aspnet.NancyHttpRequestHandler`这个新的替换`NancyAspHttpRequestHandler`

```
<system.webServer>
    <handlers>
      <!--add name="Nancy" verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*" /-->
      <add name="Nancy" verb="*" type="your_name_space.NancyAspHttpRequestHandler" path="*" />
    </handlers>
</system.webServer> 
```

现在，`HttpContext.Current.Session`不再为空。

# c# - 字符串列表上 C# 排序的空间复杂度

> ID：11473656
> 
> 赞同：0
> 
> 时间：2012-07-13T15:33:56.023
> 
> 标签：c#, algorithm, memory, space-complexity

我正在实现一个程序来对可能不适合内存的大文件进行排序。所有文件都将按行排序，因此我正在考虑使用 List 来执行此操作。

我已经计算了内存中有多少行可以将文件拆分为较小的文件，但我不知道内存中需要多少空间来对 N 个元素的列表进行排序。

问题是，知道元素的最大数量（已知大小的字符串）和可用内存，List.Sort 方法需要多少内存空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:37:06.827

`List<T>.Sort`使用快速排序算法，即 O(log n) 空间。

[http://en.wikipedia.org/wiki/Quicksort#Space_complexity](http://en.wikipedia.org/wiki/Quicksort#Space_complexity)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:39:39.197

快速排序是`O(logn)`空间复杂性，因为它在每个递归级别存储常量信息（分区的开始和结束），并且在大多数`logn`级别都有。

合并本身是就地的，冒泡排序后备也是如此，因此它们`O(1)`不计在内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:39:57.983

做一些研究：[List.Sort()](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)默认使用[QuickSort](http://en.wikipedia.org/wiki/Quicksort)算法，它具有 O(logn) 空间复杂度。

如果您真的担心空间复杂度并且不介意较慢的算法，您可以使用具有 O(1) 空间复杂度的[冒泡排序。](http://en.wikipedia.org/wiki/Bubble_sort)

# c# - asp.net MVC 编辑视图中的复选框列表不要回发

> ID：11473657
> 
> 赞同：0
> 
> 时间：2012-07-13T15:33:58.600
> 
> 标签：c#, asp.net-mvc

所以使用这个例子来做一个复选框列表

[asp.net MVC 中的复选框列表](https://stackoverflow.com/questions/6217747/checkboxlist-in-asp-net-mvc)

它在我的创建（对于新注册）中工作正常，但在我的编辑中却没有，并且无法弄清楚为什么我的课程：

```
public class cliente
    {
        [Key ,DatabaseGenerated(DatabaseGeneratedOption.None)]
        public int id { get; set; }

        [DisplayName("Nombre")]
        [Required(ErrorMessage = "Descripcion es requerido.")]
        [MaxLength(100, ErrorMessage = "El Nombre no puede contener mas de 100 caracteres")]
        public string descripcion {get; set;}

        [DisplayName("Visita")]
        public string visita { get; set; } 

        public Dias DiasVisita { get; set; }

       //more properties..

        [Flags]//<-- Note the Flags attribute
        public enum Dias
        {
            Lunes = 1,
            Martes = 2,
            Miercoles = 4,
            Jueves = 8,
            Viernes = 16,
            Sabado = 32,
            Domingo = 64,
        } 
```

我的观点。

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Cliente</legend>

        @Html.HiddenFor(model => model.id)
        @Html.HiddenFor(model => model.categoria)
        @Html.HiddenFor(model => model.visita)

        <div class="editor-label">
            @Html.LabelFor(model => model.descripcion)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.descripcion, new { style = "width: 300px;" })
            @Html.ValidationMessageFor(model => model.descripcion)
        </div>

      <div class="editor-label">
       @Html.LabelFor(model => model.visita)
    </div>

    <div class="editor-field">
        @Html.CheckboxListForEnum("dias", Model.DiasVisita)
    </div>

      <div class="editor-label">
       @Html.LabelFor(model => model.orden)
    </div>

        <div class="editor-field">
            @Html.TextBoxFor(model => model.orden)
            @Html.ValidationMessageFor(model => model.orden)
        </div>

        <p>
            <input type="submit" value="Guardar" />
        </p>
    </fieldset>
} 
```

当我按下按钮调试时，控制器动作编辑器没有进入这里

```
 [HttpPost]
        public ActionResult Editar(cliente cliente, string[] dias)
        {
    } 
```

当我按下按钮时，我怎么知道它去了哪里或它在寻找什么？奇怪的是，我的创作与这次编辑相同，但创作工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:41:23.190

当您按下提交按钮时，控制器会自动从提交的表单中获取您指定的字段的发布值。

如果要调试，请在控制器的操作中放置一个断点，并查看模型对象中的所有发布值，因为模型绑定会自动为您完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:59:59.997

**当我按下按钮时，我怎么知道它去了哪里或它在寻找什么？**

1）有很多工具可以监控网络。必须众所周知的是：

1.  [Firebug](http://getfirebug.com/network) - 用于火狐
2.  [提琴手2](http://www.fiddler2.com/fiddler2/)

2）正如 HatSoft 所说，您按下按钮提交表单标签内的所有字段。

3）如果您想更具体地定义发布请求的去向，请使用[FormExtensions.BeginForm](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform.aspx)重载，在您的情况下，您可以使用：

```
Html.BeginForm("YourControllerName", "Editar", new {area="YourAreaName"}) 
```

# ruby-on-rails - 怎么assert_select一个里面有新行的字符串？

> ID：11473660
> 
> 赞同：3
> 
> 时间：2012-07-13T15:34:07.750
> 
> 标签：ruby-on-rails, testunit

我的 html 代码中有这个字符串：

```
1\n          \n            word 
```

我想做一个忽略那些新行和空格的 assert_select ，所以我尝试了这个：

```
assert_select ".myclass", /1.+word/ 
```

但它不起作用：

```
1) Failure: 
test_new_line(NewLineControllerTest) [test/functional/new_line_controller_test.rb:23]:
</1.+word/> expected but was
<"1\n          \n            word">. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:48:43.587

您需要指定多行标志，因为该字符串中有多行。

```
assert_select ".myclass", /1.+word/m 
```

# atk4 - 实现更新网格或列表的搜索表单

> ID：11473669
> 
> 赞同：0
> 
> 时间：2012-07-13T15:34:44.083
> 
> 标签：atk4

我正在尝试实现一个搜索表单，当给定（a）关键字时，它将显示从数据库获得的结果，然后使用搜索结果更新网格或列表。只有我对如何更新网格有点迷茫......

我看过一些类似的问题（即：[如何在 atk4 中从模态表单更新后刷新网格？](https://stackoverflow.com/questions/8977771/how-to-refresh-grid-after-update-from-modal-form-in-atk4)），但在提交表单后我似乎无法更新网格。代码如下，关于我做错了什么的任何提示，或者更好的方法？后来我想从不同的数据库表中搜索和更新几个网格/列表，但如果我能让一个工作，那已经是一个开始...... :)

```
$f=$this->add('Form');
$f->addField('Search','buscar', 'Enter keywords:');
$f->addSubmit('Search');

$g=$this->add('Grid');
$g->js(true)->addClass('myreload');
$g->js('myreload')->reload();
$g->setSource('conflicto');
$g->addColumn('nombre');        
$g->addColumn('idconflicto');

if($f->isSubmitted())  
{
     $keywords=$f->getElement('buscar')->get();
     $g->dq->where("nombre LIKE '".$keywords."'");
     $this->js(null,$this->js()->_selector('.myreload')->trigger('myreload')) ->univ() ->closeDialog() ->successMessage('Actualizado') ->execute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:38:05.940

您是否尝试过使用网格上的内置快速搜索？

您应该能够将快速搜索添加到您的网格中，以便您的页面看起来像这样

```
class page_yourpage extends Page {
    function init(){
       parent::init();
       $p=$this;

       $c=$p->add('Grid');
       $c->setSource('conflicto');

       if($c->grid){
          $c->grid->addPaginator(20);
          $c->grid->addQuickSearch(array('nombre'));
        } // end if
     } // end init
} // end class 
```

注意 setSource 接收表名，而不是模型名。快速搜索的数组参数标识它将搜索哪些字段。

这会导致添加一个带有放大类图标的搜索字段，以便您输入搜索文本，它将搜索指定的字段并使用与该搜索匹配的行更新网格。

如果您想更改搜索（例如不区分大小写，因为它只与提供的完全匹配），您可以在扩展 QuickSearch 和 init 的 yoursite/lib 中创建一个新版本，例如 MySearch.php，然后覆盖 applyDQ () 函数并在输入的搜索字符串上包含一个 strtolower()，在 mysql 表列上包含一个 LOWER(column)。

```
class MySearch extends QuickSearch () {

 function applyDQ($dq){
            if(!($v=$this->get('q')))return;

            $v=strtolower(addslashes($v));  // quote it

            $q=array();
            foreach($this->fields as $field){
                    $q[]="lower($field) like '%".$v."%'";
            }
            if($q){
                    $dq->having(join(' or ',$q));
            } // end if
    } // end function
 } // end class 
```

然后，您需要使用此代码将其添加到页面上的网格中，以便它使用您的 MySearch 实现而不是默认实现。

```
 $c->grid->addQuickSearch(array('nombre'), 'MySearch'); 
```

ATK4 应该根据搜索为您处理网格重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T21:46:49.570

好的，所以你应该做的是：

```
if (isset($_GET["q"])){
    $q = $_GET["q"];
    $g->dq->where("field like '%" . mysql_real_escape_string($q) . "%');
}

if ($f->isSubmitted()){
    $g->js()->reload(null, array("q" => $f->get("q")))->execute();
} 
```

未经测试，但应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:49:23.153

您的问题是使用 Agile Toolkit 4.1 语法。在 4.2 中，您可以使用它：

```
$g=$this->add('Grid');
$q=$this->api->dsql()->table('conflicto');

if (isset($_GET["q"])){
    $q->where('field','like', '%'.$q.'%'); 
                              // 3rd argument is escaped automatically
}

$g->setSource($g); 
```

但是我必须提醒你，最好的当然是使用 $g->setModel($m->addCondition(..))

# dialog - primefaces p:datatable 与 p:dialog 结合的问题

> ID：11473677
> 
> 赞同：2
> 
> 时间：2012-07-13T15:35:14.077
> 
> 标签：dialog, datatable, primefaces

我花了几个小时来解决我的问题，但不幸的是没有成功。

我在 ap:datatable 中显示用户数据工作正常。每行都有一个 p:commandbutton，它应该显示 ap:dialog 以编辑选定的用户。这也很好用。问题是对话框内的字段没有填充用户数据。

奇怪的是，如果我从对话框中删除所有 p:inputtext 字段，剩余的 h:outputtext 字段 id="edit_dlg_bngrp" 和 id="edit_dlg_username" 会显示数据。如果我替换它们，将显示数据。

我的 xhtml 页面

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:sec="http://www.springframework.org/security/facelets/tags">
<h:body>

<ui:composition template="../template/commonTemplate.xhtml">
    <ui:define name="body">

        <h:form id="formTable">
            <div class="largeText alignLeft"
                style="min-width:600px; width: 100%; margin: 0 auto;">

                <p:panel header="Benutzerübersicht" styleClass="largeText" >  

                    <!-- ERROR MESSAGES -->
                    <div class="largeText alignLeft" style="width: 600px;">
                        <p:messages id="messages" />
                    </div>

                    <div style="height: 10px;">
                    </div>

                    <!-- ========================================================================= -->
                    <!-- =======================DATATABLE USER OVERVIEW ========================== -->
                    <!-- ========================================================================= -->

                    <p:dataTable var="user" 
                                 widgetVar="userTable" 
                                 value="#{benutzerBean.userTableData}"
                                 filteredValue="#{benutzerBean.filteredTableData}"
                                 emptyMessage="Keine Daten verfügbar"
                                 paginator="true" rows="25"  
                                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
                                     rowsPerPageTemplate="25,50,100" 

                                     >

                            <f:facet name="header" style="background:white;">  
                                <p:outputPanel style="background:white;" >

                                    <div class="floatRight" >
                                        <h:outputText value="Suche:  " />  
                                        <p:inputText id="globalFilter" onkeyup="userTable.filter()" style="width:150px" />
                                    </div>
                                </p:outputPanel>
                            </f:facet>

                            <p:column id="bngroup_id"  filterStyle="display:none"
                                      sortBy="#{user.benutzergruppe.name}" 
                                      filterBy="#{user.benutzergruppe.name}"   
                                      headerText="Benutzergruppe" 
                                      filterMatchMode="contains">
                                <h:outputLabel value="#{user.benutzergruppe.name}" />
                            </p:column>

                            <p:column id="firstname_id" filterStyle="display:none"
                                      sortBy="#{user.vorname}"
                                      filterBy="#{user.vorname}"   
                                      headerText="Vorname" 
                                      filterMatchMode="contains" >
                                <h:outputLabel value="#{user.vorname}" />
                            </p:column>

                            <p:column id="lastname_id" filterStyle="display:none"
                                      sortBy="#{user.nachname}"
                                      filterBy="#{user.nachname}"   
                                      headerText="Nachname" 
                                      filterMatchMode="contains" >
                                <h:outputLabel value="#{user.nachname}" />
                            </p:column>

                            <p:column id="username_id" filterStyle="display:none"
                                      sortBy="#{user.benutzername}" 
                                      filterBy="#{user.benutzername}" 
                                      headerText="Benutzername"   
                                      filterMatchMode="contains">
                                <h:outputLabel value="#{user.benutzername}" />
                            </p:column>

                            <p:column id="email_id" filterStyle="display:none"
                                      sortBy="#{user.email}"
                                      filterBy="#{user.email}"   
                                      headerText="E-mail" 
                                      filterMatchMode="contains" >  
                                <h:outputLabel value="#{user.email}" />
                            </p:column>

                            <p:column id="aktiv_id" filterStyle="display:none"
                                      sortBy="#{user.aktiv}"
                                      filterBy="#{user.aktiv}"   
                                      headerText="Aktiv" 
                                      filterMatchMode="contains" >
                                <h:outputLabel value="#{user.aktiv}" />
                            </p:column>

                            <p:column id="edit_id"
                                      style="width:80px;"
                                      styleClass="alignCenter" >

                                <p:commandButton value="bearbeiten"  update=":formTable:edit" oncomplete="editDialog.show()" style="font-size:10px;">
                                    <f:setPropertyActionListener target="#{benutzerBean.selectedUser}" value="#{user}" />
                                </p:commandButton>
                            </p:column>

                            <p:column id="delete_id"
                                      style="width:80px;"
                                      styleClass="alignCenter"  >
                                <p:commandButton value="löschen" update=":formTable:deleteUserdialog" oncomplete="deleteUserdialog.show()"  style="font-size:10px;">
                                    <f:setPropertyActionListener target="#{benutzerBean.selectedUser}" value="#{user}" />
                                </p:commandButton>
                            </p:column>
                    </p:dataTable>

                    <!-- ========================================================================= -->
                    <!-- =======================  EDIT USER DIALOG      ========================== -->
                    <!-- ========================================================================= -->

                    <p:dialog id="editUserDialog" header="Benutzer bearbeiten" widgetVar="editDialog" 
                              resizable="false" modal="true" showEffect="clip" hideEffect="clip" >
                        <p:panelGrid id="edit"  columns="2" style="width:400px;">

                                <h:outputText value="Benutzergruppe" />
                                <h:outputText id="edit_dlg_bngrp" value="#{benutzerBean.selectedUser.benutzergruppe.name}" />

                                <h:outputText value="Benutzername:" />
                                <h:outputText id="edit_dlg_username" value="#{benutzerBean.selectedUser.benutzername}" />

                                <h:outputText value="Vorname:" />
                                <p:inputText id="edit_dlg_firstname" styleClass="width_100" value="#{benutzerBean.selectedUser.vorname}" />

                                <h:outputText value="Nachname:" />
                                <p:inputText id="edit_dlg_lastname" styleClass="width_100" value="#{benutzerBean.selectedUser.nachname}"  />

                                <h:outputText value="Email" />
                                <p:inputText id="edit_dlg_email" styleClass="width_100" value="#{benutzerBean.selectedUser.email}" />

                                <p:commandButton id="save" value="Speichern"  process="editUserDialog"  actionListener="#{benutzerBean.submitEditUser}" oncomplete="editDialog.hide()" />
                                <p:commandButton value="Abbrechen" type="reset" onclick="editDialog.hide()" />

                        </p:panelGrid>
                    </p:dialog>

                    <!-- ========================================================================= -->
                    <!-- =======================  DELETE USER DIALOG    ========================== -->
                    <!-- ========================================================================= -->  
                    <p:dialog id="deleteUserdialog" header="Benutzer erstellen" widgetVar="deleteUserdialog" resizable="false" modal="true" >
                                <h:outputText id="delete" value="#{benutzerBean.selectedUser.vorname} löschen" />
                    </p:dialog>
                </p:panel>
            </div>
        </h:form>
    </ui:define>
</ui:composition> 
```

我的托管豆

```
@Controller
@ManagedBean
@Scope(value="view")
public class BenutzerBean {

@Autowired
BenutzerService benutzerService;

private List<Benutzer> userTableData = new ArrayList<Benutzer>();
private List<Benutzer> filteredTableData;
private Benutzer selectedUser;

public BenutzerBean(){
}

@PostConstruct
public void populateTable(){
    userTableData = benutzerService.getAllBenutzer();
}

public void submitEditUser(){
    saveUser(selectedUser);
}

private void saveUser(Benutzer benutzer){
    benutzerService.saveBenutzer(benutzer);
    populateTable();
}

public List<Benutzer> getFilteredTableData() {
    return filteredTableData;
}

public void setFilteredTableData(List<Benutzer> filteredTableData) {
    this.filteredTableData = filteredTableData;
}

public void setUserTableData(List<Benutzer> userTableData) {
    this.userTableData = userTableData;
}

public List<Benutzer> getUserTableData(){
    return userTableData;
}

public Benutzer getSelectedUser() {
    return selectedUser;
}

public void setSelectedUser(Benutzer selectedUser) {
    this.selectedUser = selectedUser;
} 
```

本努策级

```
@Entity(name="BENUTZER")
public class Benutzer implements Serializable {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="ID")
private Long id;

@ManyToOne
@JoinColumn(name = "BENUTZERGRUPPEN_ID")
@NotNull
private Benutzergruppe benutzergruppe;

@Column(name="VORNAME")
@NotNull
@Length(min=3, message="vorn")
private String vorname;

@Column(name="NACHNAME")
@NotNull
@Length(min=3, message="nach")
private String nachname;

@Column(name="BENUTZERNAME")
@NotNull
@Length(min=4, message="benu")
private String benutzername ;

@Column(name="PASSWORT")
private String passwort;

@Column(name="EMAIL")
private String email;

@Column(name="AKTIV")
private boolean aktiv = true;

@Column(name="GELOESCHT")
@Type(type="org.joda.time.contrib.hibernate.PersistentDateTime")
private DateTime deleted;

@ManyToMany ( fetch= FetchType.EAGER)
@JoinTable( name="BENUTZER_ROLLEN", 
            joinColumns={@JoinColumn(name="BENUTZER_ID")} ,
            inverseJoinColumns={@JoinColumn(name="ROLLE_ID")}
          )
public List<Rolle> rollen = new LinkedList<>();

/////////////////////////////
//  GETTER SETTER
///////////////////////////

public Benutzer(){}

public Benutzer(Benutzergruppe benutzergruppe ,String nachname, String vorname, String username,
        String password, String email,  boolean enabled) {
    this();
    this.benutzergruppe = benutzergruppe;
    this.nachname = nachname;
    this.vorname = vorname;
    this.benutzername = username;
    this.passwort = password;
    this.email = email;
    this.aktiv = enabled;
}

//--------- OTHER METHODS ---------------

public void deleteUser(){
    aktiv = false;
    setDeleted(DateTime.now());
}

public boolean isUserDeleted(){
    return deleted != null;
}

public void disableUser(){
    setAktiv(false);
}

public void enableUser(){
    setAktiv(true);
}

public void addRole(Rolle role){

    if(role == null)
        throw new IllegalArgumentException("Add Role: role must not be null");

    if(!rollen.contains(role)){
        rollen.add(role);
        role.addBenutzer(this);
    }
}

public void removeRole( Rolle role){
    if(role == null)
        throw new IllegalArgumentException("Remove Role: role must not be null");

    if(rollen.contains(role)){
        rollen.remove(role);
        role.removeBenutzer(this);
    }

}

//============================================
// GETTER SETTER
//=========================================

public Long getId() {
    return id;
}

public void setId(Long benutzerId) {
    this.id = benutzerId;
}

public Benutzergruppe getBenutzergruppe() {
    return benutzergruppe;
}

public void setBenutzergruppe(Benutzergruppe benutzergruppe) {
    this.benutzergruppe = benutzergruppe;
}

public String getNachname() {
    return nachname;
}

public void setNachname(String nachname) {
    this.nachname = nachname;
}

public String getVorname() {
    return vorname;
}

public void setVorname(String vorname) {
    this.vorname = vorname;
}

public String getBenutzername() {
    return benutzername;
}

public void setBenutzername(String username) {
    this.benutzername = username;
}

public String getPasswort() {
    return passwort;
}

public void setPasswort(String password) {
    this.passwort = password;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public boolean isAktiv() {
    return aktiv;
}

private void setAktiv(boolean enabled) {
    this.aktiv = enabled;
}

public List<Rolle> getRollen() {
    return Collections.unmodifiableList(rollen);
}

public void setRollen(List<Rolle> rollen) {
    this.rollen = rollen;
}

public DateTime getDeleted() {
    return deleted;
}

private void setDeleted(DateTime timestamp) {
    this.deleted = timestamp;
} 
```

有谁知道我该如何解决这个问题？

最好的问候彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T13:07:20.020

你有你的 dataTable**和**你的对话框`<h:form id="formTable">`。当您调用对话框时，您调用：update=":formTable:edit"。

你需要：

1.  将对话框置于当前主窗体之外`<h:form id="formTable">`
2.  `<h:form>`在您的对话框中放置一个新的。例如：`<h:form id="dlgForm">`。对话框中的所有内容都将在新的 h:form 中。
3.  像这样从 dataTable 调用更新：`update=":dlgForm:edit"`。您指的是对话框内的表单和表单内的面板网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:53:25.363

仔细检查您的更新 ID。我认为你的问题在于：

```
<p:commandButton value="bearbeiten"  update=":formTable:edit" oncomplete="editDialog.show()" style="font-size:10px;"> 
```

我认为您的更新应该是 update=":formTable:editUserDialog:edit"。使用 FireBug 或类似工具来确认正确的 id。

# python - 形式化日期字段渲染

> ID：11473678
> 
> 赞同：0
> 
> 时间：2012-07-13T15:35:16.663
> 
> 标签：python, sqlalchemy, formalchemy

在我的模型中给定一个名为“生日”的列，我声明如下：

```
birthday = Column(Date) 
```

我正在尝试在我的表单中将其显示为一行。但是，我必须尊重“年”“日”“月”而不是“月”“日”“年”的法国标准。

到目前为止，我最接近它的是：

```
fs.birthday.set(html=[('lang', 'fr')]) 
```

哪个确实以法语而不是英语显示月份的名称，但是有没有一种方法可以轻松更改元素的显示顺序而无需自定义渲染器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:44:47.037

我为此找到的解决方法是使用 JQuery 重新排序字段：

```
 // Reorder date fields
  function reorder( dateFieldId ) {

    var grp = $('#'+dateFieldId).children();
    var cnt = grp.length;

    var temp = grp[0];
    grp[0] = grp[1];
    grp[1] = temp;

    $(grp).remove();
    $('#'+dateFieldId).append($(grp));
  } 
```

# css - DIV 的内容仅水平？

> ID：11473679
> 
> 赞同：1
> 
> 时间：2012-07-13T15:35:20.407
> 
> 标签：css, html

我有一个 div，里面有一些内容。现在我想水平对齐元素。我使用过`display : inline;`，但现在我遇到了一个问题，即当元素达到 div 的宽度时，会出现内部换行符。所以实际上我正在寻找一个所有元素水平对齐并且在 div 内不会有换行符的 css 命令。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:38:47.027

采用

```
white-space: nowrap; 
```

在封闭`<div>`以防止任何换行符。[在此处](https://developer.mozilla.org/en/CSS/white-space)查看 MDN 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:38:41.450

尝试添加`width:100%`您的 div。

# iphone - xCode 动态添加字段

> ID：11473681
> 
> 赞同：0
> 
> 时间：2012-07-13T15:35:31.027
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我对 iOS 开发非常陌生，我在这里遇到问题，在其他任何地方都找不到解决方案。

我需要在 UIViewController 类型的 profileDetailViewController.m 上动态生成字段，

我想要查看的字段存储在**数组**中，如下所示，

```
Array:(
        {
        fieldName = Full Name;
        value = Neil G.;
    },
        {
        fieldName = Aboutn me;
        value = "a web dev..";
    },
        {
        fieldName = State;
        value = Colorado;
    },
        {
        fieldName = City;
        value = Denver;
    },
        {
        fieldName = Website;
        value = "http://google.com";
    },
        {
        fieldName = College University;
        value = "DSU";
    },
        {
        fieldName = Graduation Year;
        value = 2011;
    }
) 
```

我只是想让它像 iPhone 中的联系人一样，最初将页面加载为带有编辑按钮的显示模式，因此在编辑模式时它应该变成带有可编辑字段的表单。任何好的教程都会很棒。我会感谢你的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:42:07.230

首先获取字段数组的大小：

`int fieldCount = [Array count];`

然后创建一个 wrapperView，我们将在其上放置一个滚动视图，因为据我们所知，您将拥有比屏幕上容纳的更多的字段！

```
UIView *wrapperView = [[UIView alloc] initWithFrame:self.view.frame];
[self.view addSubView:wrapperView];
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:wrapperView.frame];
[wrapperView addSubView:scrollView]; 
```

现在我将在这里添加一些标签，但您可以轻松地将它们制作成按钮或您拥有的东西。我会让它们的高度为 21，中间有 10 像素的空间。

所以现在我们需要设置`contentSize`scrollView的，

```
double heightNeeded = 0;
heightNeeded = fieldCount * 31;
if(heightNeeded < scrollView.frame.size.height){
    heightNeeded = scrollView.frame.size.height;
} 
```

现在我们可以告诉滚动视图它的内容大小需要多大，然后添加所有标签。我将假设您的数组充满了名为 Details 的对象，这些对象具有 fieldName 和 Value，因为您没有真正指定。

```
[scrollView setContentSize:CGSizeMake(scrollView.frame.size.width,heightNeeded)];
int currentY = 0;
for(Details *thisDetail in Array){
   UILabel *thisLabel = [[UILabel alloc]  initWithFrame:CGRectMake(0,currentY,scrollView.frame.size.width,21)];
    [thisLabel setLineBreakMode:UILineBreakModeWordWrap];
    thisLabel.numberOfLines = 0;
    UILabel.text = [NSString stringWithFormat:@"%@: %@",thisDetail.fieldName,thisDetail.Value];
    [thisLabel sizeToFit];
    [scrollView addSubView thisLabel];
    currentY = currentY + thisLabel.frame.origin.y + thisLabel.frame.size.height + 10;
 } 
```

不确定您是否希望它们成为这样的标签，但这很容易改变。可能还有更多的事情，比如实现 UIScrollViewDelegate 然后在`scrollView.delegate = self`某个地方，但我不确定。希望这可以帮助！

# javascript - 客户端 JavaScript Facebook OAuth2 实现？

> ID：11473682
> 
> 赞同：0
> 
> 时间：2012-07-13T15:35:31.093
> 
> 标签：javascript, oauth-2.0, client-side, facebook-login, digest-authentication

**[RFC 2617](https://www.rfc-editor.org/rfc/rfc2617)**指定了*HTTP Basic 和 Digest Auth*标准，其工作原理在[Wikipedia 的“Example with explanation”小节](http://en.wikipedia.org/wiki/Digest_access_authentication#Example_with_explanation)中进行了总结：

> *   客户端请求一个需要身份验证但不提供用户名和密码的页面。通常这是因为用户只需输入地址或点击页面链接。
> *   服务器以 401“客户端错误”响应代码进行响应，提供身份验证领域和一个随机生成的、一次性的值，称为 nonce。
> *   此时，浏览器将向用户显示身份验证领域（通常是对正在访问的计算机或系统的描述）并提示输入用户名和密码。用户此时可以决定取消。
> *   提供用户名和密码后，客户端会重新发送相同的请求，但会添加包含响应代码的身份验证标头。
> *   在此示例中，服务器接受身份验证并返回页面。如果用户名无效和/或密码不正确，服务器可能会返回“401”响应码，客户端会再次提示用户。
> 
> 注意：客户端可能已经拥有所需的用户名和密码，而无需提示用户，例如，如果它们先前已由 Web 浏览器存储。

我正在使用[Facebook](https://developers.facebook.com/docs/authentication/server-side/)实施的[OAuth2 草案标准](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-29)执行登录。

**给定一个具有公开的公共 API（例如：JSONRPC 或 REST）的服务器，如何编写客户端 JavaScript 前端以包含前面提到的 RFC 2617 示例中的那种功能，但对于 Facebook 身份验证？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:52:48.140

我找到了一个官方（但未维护，现已正式放弃）示例客户端 JavaScript 库实现示例的存储库，[单击此处查看最新的 fork](https://github.com/GunioRobot/connect-js)。这是该页面中的 JQuery 示例：

```
<head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>Connect JavaScript - jQuery Login Example</title>
  </head>
  <body>
      <h1>Connect JavaScript - jQuery Login Example</h1>
      <div>
          <button id="login">Login</button>
          <button id="logout">Logout</button>
          <button id="disconnect">Disconnect</button>
      </div>
      <div id="user-info" style="display: none;"></div>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
    </script>
  <div id="fb-root"></div>
  <script src="http://connect.facebook.net/en_US/all.js"></script>
  <script>
      // initialize the library with the API key
      FB.init({
          apiKey: '48f06bc570aaf9ed454699ec4fe416df'
      });

      // fetch the status on load
      FB.getLoginStatus(handleSessionResponse);

      $('#login').bind('click', function () {
          FB.login(handleSessionResponse);
      });

      $('#logout').bind('click', function () {
          FB.logout(handleSessionResponse);
      });

      $('#disconnect').bind('click', function () {
          FB.api({
              method: 'Auth.revokeAuthorization'
          }, function (response) {
              clearDisplay();
          });
      });

      // no user, clear display
      function clearDisplay() {
          $('#user-info').hide('fast');
      }

      // handle a session response from any of the auth related calls
      function handleSessionResponse(response) {
          // if we dont have a session, just hide the user info
          if (!response.session) {
              clearDisplay();
              return;
          }

          // if we have a session, query for the user's profile picture and name
          FB.api({
              method: 'fql.query',
              query: 'SELECT name, pic FROM profile WHERE id=' + FB.getSession().uid
          },

          function (response) {
              var user = response[0];
              $('#user-info').html('<img src="' + user.pic + '">' + user.name).show('fast');
          });
      }
  </script> 
```

随时提出改进建议。理想情况下，我希望看到：

*   原生 JavaScript 实现
*   JSONRPC 调用以方便在个人服务器端登录
*   路由（即：成功登录后重定向到登录用户主页）

# facebook-graph-api - 您如何在用户时间轴上对帖子进行分组？

> ID：11473691
> 
> 赞同：1
> 
> 时间：2012-07-13T15:35:54.537
> 
> 标签：facebook-graph-api, facebook-timeline

我们有一个每隔几天发布一次的应用程序。我可以看到一些应用程序会在时间轴上自动对这些帖子进行分组。使用我们的应用程序，它只会显示为新帖子，不会对它们进行分组。

我们怎样才能让他们分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:54:01.760

您需要为您的应用程序定义一个打开的图形操作。看看这个开始 [https://developers.facebook.com/docs/concepts/opengraph/](https://developers.facebook.com/docs/concepts/opengraph/)

# android - Android 支持所有屏幕尺寸：三星 Galaxy Note 中的 UI 延伸

> ID：11473694
> 
> 赞同：1
> 
> 时间：2012-07-13T15:35:59.423
> 
> 标签：android, android-layout, android-ui

在我的 Android 应用程序中，我在 Manifest 文件中包含以下内容。

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="11"/>

 <supports-screens 
     android:largeScreens="true" 
     android:normalScreens="true" 
     android:smallScreens="true" 
     android:anyDensity="true"/> 
```

同样在 Res 文件夹（UI 设计）下，我为以下屏幕尺寸设计了单独的 UI。

```
layout
layout-large
layout-small 
```

所以它工作得很好，但是在屏幕稍大（5.3 英寸）的**三星 Galaxy Note**中，我的 UI 元素被拉伸，其中一部分超出了屏幕限制，变得无法访问。

根据[ANDROID 的 SUPPORTING MULTIPLE SCREENS POST](http://developer.android.com/guide/practices/screens_support.html#range)，这款手机应该可以使用`layout-large`布局资源和`drawable-xhdpi`图像资源正常工作。

无法弄清楚究竟发生了什么。非常感谢任何指导。提前致谢...！！！！

**编辑**

只是为了测试，我`layout-large-xhdpi`还在 Res 文件夹下的命名文件夹下创建了另一组额外的 UI。所以当我测试它从这个文件夹中获取 UI，但 UI 元素仍然超出屏幕限制。此外，所有宽度量都已分配`dp`单位。

===一些屏幕截图来解释问题情况===

`(layout-large-xhdpi)`以下是设计时在图形布局中的外观截图

![在此处输入图像描述](../Images/599abd2b77ada7e6f25a4bd0d75dd6ea.png)

```
<LinearLayout
    android:id="@+id/Layout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp">

   <Button
        android:id="@+id/button1"
        android:layout_width="240dp"
        android:layout_height="wrap_content"
        android:text="Account" />

    <Button
        android:id="@+id/button2"
        android:layout_width="240dp"
        android:layout_height="wrap_content"
        android:text="Settings" />       

</LinearLayout> 
```

当它运行时它只是伸展（如下截图）

![在此处输入图像描述](../Images/3ab03caef8bba6ce8e80a54ba9332b5a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:45:08.867

尝试使用：

```
<LinearLayout
    android:id="@+id/Layout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp">

   <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Account" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Settings" />       

</LinearLayout> 
```

根据 Google 给出的指南，您应该避免在布局中使用硬编码像素。

有关更多详细信息，请参阅此链接：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# salesforce - 从实时组织中删除 Apex 和 VF 类的最佳策略是什么？

> ID：11473699
> 
> 赞同：0
> 
> 时间：2012-07-13T15:36:14.580
> 
> 标签：salesforce, visualforce

如果我想从 prod 组织中删除一堆类和 visualforce，我该怎么做呢？特别是如果存在像一个类引用另一个类这样的依赖关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:36:15.847

最好的方法是在 Eclipse force.com IDE 中创建一个 Force.com 项目，然后直接从 IDE 中删除类和 Visualforce 页面。

如果您的测试覆盖率低于 75%，它可能不会删除您的课程或页面。

阿努普

# objective-c - 如何让按钮从可点击变为不可点击？

> ID：11473703
> 
> 赞同：0
> 
> 时间：2012-07-13T15:36:28.923
> 
> 标签：objective-c

我正在使用 Objective-C 开发“猜我的号码”游戏，我目前遇到的问题是，一旦玩家猜完，提交按钮仍然可以点击并导致输出标签出现问题。这是提交按钮执行的操作。

```
- (IBAction)userSubmit:(id)sender {

    turns = turns--
    if (textField.text.intValue == num && turns !=0)
        consoleOutput.text = (@"You win!");
    else if (textField.text.intValue > num && turns !=0)
        consoleOutput.text = (@"Too high!");
    else if (textField.text.intValue < num) && turns !=0)
        consoleOutput.text = (@"Too low!");

    if (turns == 0)
        consoleOutput.text = @"You lose!";
    } 
```

是否有任何其他代码可以添加到

```
 if (turns == 0)
 consoleOutput.text = @"You lose!";
 } 
```

导致提交按钮“变灰”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:38:01.190

您只需要禁用该按钮：

```
submitButton.enabled = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:38:13.220

```
yourButton.userInteractionEnabled = NO; 
```

那么如果你想要视觉效果，我会在某个点更改背景颜色。

# javascript - 访问 *.js 文件中的资源属性文件

> ID：11473705
> 
> 赞同：1
> 
> 时间：2012-07-13T15:36:31.957
> 
> 标签：javascript, jquery, validation, struts2, resourcebundle

嗨，我的项目在 struts 2 中。我们已经编写了用于客户端验证的通用 js 文件。现在的问题是，要实现内部化，我们必须根据语言更改警报消息。所以我的问题是有什么方法可以访问 js 文件中的资源属性。或任何人建议一些替代方案或示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-29T18:06:09.090

[您可以使用我创建的messageResource.js](https://github.com/suhaibkhan/messageResource.js)库读取 js 文件中的属性文件。

1) 在您的 html 中包含 messageResource.js。

```
<script src="messageResource.min.js"></script> 
```

2）您可以从js访问属性文件的键值对，如下所示。

```
// initialize messageResource.js with settings
messageResource.init({
  // path to directory containing message resource files(.properties files),
  // give empty string or discard this configuration if files are in the
  // same directory as that of html file.
  filePath : 'path/messageresource/'
});

// will load the file 'path/messageresource/moduleName_en_US.properties'
// and callbackFunction will be executed when loading is complete.
messageResource.load('moduleName', callbackFunction, 'en_US'); 

// use messageResource.get function to get values from loaded file. 
var value = messageResource.get('key', 'moduleName', 'en_US'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:34:02.190

将警报消息存储在 js 文件中，文件名如下

alert_en.js alert_fr.js alert_jp.js

在每个文件中存储这样的警报

```
var ALERT_EMAIL_INCORRECT = "Incorrect email";
var ALERT_USERNAME_INCORRECT = "Incorrect username"; 
```

根据用户语言包含文件。

或者

您可以使用 JSP 文件和页面中的链接从资源包中加载消息，如下所示。

```
<script type="text/javascript" src="YOUR-FILE.JSP"></script> 
```

在这个 JSP 文件中，您从资源包中读取后输出 JavaScript。

也检查[一下](http://tishowicode.wordpress.com/2007/09/04/javascript-alert-messages-from-message-resource/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:00:32.280

您可以编写一个JSON文件，以英语为key，L10N消息为value，并根据用户的浏览器语言配置使用AJAX加载相关的JSON，并通过alert(tanslatedTable[USER_LANG][ENGLISH_STRING])来提醒消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T21:06:27.260

我在jsp页面上的脚本标签中的javascript中执行此操作：

```
<code>
    alert("<s:text name="amountMustBeNumeric"/>");
</code> 
```

对我来说很好。

# javascript - Require.js + R.js 优化器忽略 Shim

> ID：11473709
> 
> 赞同：12
> 
> 时间：2012-07-13T15:36:38.587
> 
> 标签：javascript, node.js, requirejs

R.js 没有加载我的 shim，因此 jQuery 在 tinyMCE 之前加载，并且在加载之前初始化 tiny。我怎样才能让垫片工作？：

构建-js.js：

```
var requirejs = require('requirejs');
var config = {
    mainConfigFile: '../js/main.js',
    include: [],
    name: 'main',
    out: '../js/build/build.js',
};

    requirejs.optimize(config, function (buildResponse) {
    var contents = fs.readFileSync(config.out, 'utf8');
}); 
```

主.js：

```
require.config({
    paths: {
        jQuery: 'common/libs/jquery/jquery-min',
        TinyMCE: 'common/libs/tinyMCE/tiny_mce',
    },
    shim: {
        'jQuery': {
            deps:['TinyMCE'],
            exports: '$',
        },
       'jQueryUi': {
            deps: ['jQuery']
        },
        'jQuerySelectmenu': {
            deps: ['jQuery', 'jQueryUi']
        },
        'jQueryAutosize': {
            depts: ['jQuery']
        },
        'Underscore': {
            exports: '_'
        },
        'Backbone': {
            deps: ['Underscore', 'jQuery'],
            exports: 'Backbone'
        }
    }
});

require(['common/src/app'], function (App) {
    App.initialize();
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-07T02:47:29.583

此问题已在`r.js`2.1.11修复

只是放置

`wrapShim: true`在构建配置中。

[github问题](https://github.com/jrburke/requirejs/issues/623)

[配置示例](https://github.com/jrburke/r.js/blob/b8a6982d2923ae8389355edaa50d2b7f8065a01a/build/example.build.js#L68)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T00:50:05.880

我最近遇到了一些类似的问题，这让我有点难过。我不熟悉 TinyMCE 代码，但我看到你没有填充它。

垫片（通常）不能依赖于 AMD 样式库。不确定 TinyMCE 是否属于 AMD 模块样式类别，但如果是的话……你有麻烦了。如果没有，您也需要对其进行填充。

[https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim)

> “垫片”配置的重要警告：
> 
> 仅使用其他“填充”模块作为填充脚本的依赖项，或没有依赖项的 AMD 库，并在它们也创建全局（如 jQuery 或 lodash）后调用 define()。否则，如果您使用 AMD 模块作为 shim 配置模块的依赖项，则在构建之后，该 AMD 模块可能直到构建中的 shimed 代码执行后才被评估，并且将发生错误。最终的解决方法是升级所有填充代码以具有可选的 AMD define() 调用。

# delphi - 替换当前exe的建议

> ID：11473713
> 
> 赞同：2
> 
> 时间：2012-07-13T15:36:50.593
> 
> 标签：delphi, delphi-xe2, shellexecute

我需要以一种快速而肮脏的方式来升级我的应用程序。

目前我每个版本都有一个 exe。

如果 exe 错误，我会闪现一条消息“在 db 上找到版本 X，您正在使用 exe 版本 Y，请下载正确的版本”。

我有一个固定地址的每个 exe，比如：（ `http://myip.com/exes/N/Project.exe`其中 N 是发布）

所以我的想法是代替上面的消息，我会提示用户“将下载正确的 exe，按确定继续”。

我的想法是确定之后：

1）使用`ShellExecute`另一个负责下载和替换的exe（我们称之为id Update.exe）运行（这个exe可以存储在exe资源中）

2) 关闭应用程序

2) Update.exe 将从 Internet 下载正确的 exe 并将其保存到临时文件夹

4) Update.exe 将删除 Project.exe 并用下载的替换它

5) Update.exe 将运行新的 Project.exe

因此将运行正确的 exe，并且用户将在与旧 exe 相同的位置拥有新的 exe。这将是一个非 hortodox 升级（不使用 Windows 更新，但相信我，我需要这个。我不使用 Windows 更新）。

你能评论一下这种方法吗？或者建议一个类似的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:29:09.533

我会采取稍微不同的方法。我不会使用单独的 exe 进行下载，而是让主 exe 在后台线程中执行，或者使用 Windows BITS 服务（它接受 HTTP url）。这样，应用程序可以在下载过程中保持运行，并且可以在用户空闲时重新启动。每当启动主 exe 时，它​​会检查临时文件夹中是否存在已完成的更新文件，如果找到，则提取加载程序 exe，运行它并退出。然后加载程序等待主 exe 完成退出，移动/重命名更新文件，然后运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T21:28:26.510

我这样做了，它对我很有效：

OK后，在UpdateOKClick中完成：

1.  显示进度条并使用 InternetReadFile 读取新版本的安装可执行文件并将其写入临时文件（使用系统单元中的 GetTempPath）。
2.  显示一个消息框，说明“下载完成。关闭程序以安装新版本。”
3.  调用 ShellExecute 从临时文件位置运行新版本的安装可执行文件。诀窍是我用两个特殊参数调用安装程序（我正在使用[Inno Setup](http://www.jrsoftware.org/isinfo.php)）：/silent 和 /noicons。
4.  运行 Application.Terminate 以关闭程序。

该程序立即终止，并且安装有一点延迟，因此它在程序已经关闭后开始。用户将看到 Inno Setup 显示的安装进度屏幕，但由于有两个参数，它不会询问任何问题。

Inno Setup 安装的最后一步是启动程序。它使用 /webupdate 参数调用它。

当程序启动时，它会检查是否使用了 webupdate 参数。如果是这样，它会为新版本进行任何必要的初始化，然后显示一个消息框，说明“程序现在更新到版本 xxx”。

在此过程中，有很多检查和可能的消息要发出，包括让用户可以随时取消，但基本上就是这样。

...而且我不必删除以前的可执行文件。它只是被覆盖。如果用户打开了该程序的第二个实例，这将失败，但这是另一件需要检查的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:54:44.417

这是我用于本地内部应用程序的方法。它依赖于您可以在应用程序运行时重命名 *.exe 文件这一事实。

更新程序类下载包含更新信息的 XML 文件。它将该信息与当前运行的应用程序进行比较。如果需要更新，它会下载更新的文件（基本上是文件副本，因为它们位于本地服务器上）并添加 .update 扩展名。然后它通过添加 .bak 扩展名重命名当前运行的 exe。然后将下载的文件重命名为原来的exe名称，并重新启动应用程序。

这只是一个快速概述。有用于说明错误或问题的检查，以及对用户的提示。还有清理代码来删除旧备份等，或在必要时回滚到以前的版本。在某些情况下，您可以通过在启动时执行上述操作来强制更新，而无需用户交互。

虽然可能不是最好的方法，但它在我们的本地 LAN 上运行良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T19:30:22.950

还有另一种方法，因为无论如何您都要重写文件结构：让一个小的存根程序进行版本检查，提示（并执行）更新，然后启动实际的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T07:36:02.320

我一直在做的事情，如果更新只涉及 main-exe ：

*   将新的 exe 下载到临时位置
*   使用参数调用 (ShellExecute) 新 exe，例如 main.exe -update -c:\oldlocation\
*   关闭

我的 exe 文件（在这种情况下是新的）将以特殊的“更新”模式启动，它等待它应该替换的 exe 退出，然后复制自身并覆盖它，运行新的 exe 并退出.

为了摆脱下载的更新，可以使用一些参数调用新的 exe，例如 -doneupdating -c:\tempdownloadlocation，然后 exe 可以删除这些参数。

这种方法维护起来非常简单，因为所有内容都包含在主 exe 中，并且可以轻松扩展以处理额外文件

# php - TYPO3 模板覆盖

> ID：11473714
> 
> 赞同：0
> 
> 时间：2012-07-13T15:36:51.790
> 
> 标签：php, html, templates, typo3

全部，

我正在使用 TYPO3 CMS 开发一个简单直接的网站。使用模板，所有页面都在页面顶部显示相同的横幅图像。我想将其中一个页面上的此图像更改为不同的图像。解决此问题的最佳方法是什么？

图像正在从名为“横幅”的模板扩展中加载，如下所示：

```
temp.banner = COBJ_ARRAY
temp.banner {
# Menu 1 cObject
20 = IMAGE
20.file.import = upload/pics
20.file = fileadmin/template/main/template_1_FILES/{$banner_img}
} 
```

然后，我尝试在一个页面上进行模板扩展，如下所示：

```
temp.banner {
20.file = fileadmin/template/main/template_1_FILES/otherimage.jpg
] 
```

但这并没有改变形象。原始图像仍然显示，没有任何错误或迹象表明扩展做了任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:44:06.383

您正在使用一个常量`{$banner_img}`，因此只需在应该更改的页面上的模板中更改该值。

我猜，如果您将 Object 从 重命名为`temp.banner`，`lib.banner`它会像您期望的那样工作。原因是，“temp”这个名字真的是暂时的。它将从缓存的 TypoScript 模板中删除。因此，如果您不真正了解会发生什么，请避免使用该名称。

我的意思是说：

```
temp.test = Hello World
page.10 = TEXT
page.10.value < temp.test 
```

这将像预期的那样输出“Hello World”。但`temp.test`在其他模板中不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T22:12:29.463

问题是您`temp.banner.`在将其复制到另一个地方后进行了更改。扩展模板中的 TS 是在原始模板中的所有 TS 都被解析之后出现的。

您必须通过（请参阅顶部选择）更改常量，或者您必须更改复制到`content editor`的确切位置。`temp.banner.`您可以使用`TS object browser`（再次查看顶部选择）直接查找和更改该位置。

# php - MySQL - 单表中的照片评论、投票、关键字、++？

> ID：11473715
> 
> 赞同：1
> 
> 时间：2012-07-13T15:36:54.207
> 
> 标签：php, mysql, sql, xml

我想将我的照片管理系统从 XML 迁移到 MySQL 并扩展我当前系统的功能。

基本上，我在 MySQL 中的东西很少，在 xml 文件中也很少。现在的情况是这样的：

*   “ **news.xml** ” - 单个文件：
    存储了我网站上的所有新闻（新上传、投票和评论），xml 的结构是：

    ```
    <all_news>
        <photos>
            <image image_name="photo1.jpg" path="my_photos/" date="12.12.12" info="just Uploaded!" />
        </photos>
        <comments>
            <image image_name="photo1.jpg" path="my_photos/" date="12.12.12" info="just Commented!" />
        </comments>
        <votes>
            <image image_name="photo1.jpg" path="my_photos/" date="12.12.12" info="just Voted!" />
        </votes>
    </all_news> 
    ```

*   “ **photo1.xml** ”、“ **photo2.xml** ”、“ **photo3.xml** ” ... - 多个文件：
    如果有人对我的照片发表评论，这些文件是动态创建的。例如，如果有人评论我的照片，php 脚本会自动创建“ **photo_name.xml** ”文件，格式为：

    ```
    <comments>
        <comment sender='John' text='nice photo!' who='user' date='22.12.12'/>
    </comments> 
    ```

*   “**投票**” - MySQL 表：
    存储所有投票，表的结构：

    *   `id: "photo1.jpg"`
    *   `vote: 5`
    *   `uid: "IP voting person"`

现在我想将所有这些东西合并到一个 mySQL 数据库表中，所以每次加载照片时 - 从单个 DB 表中提取这些照片信息（而不是同时加载几个 xml 和 DB）......

所以我的问题是：
在这种情况下，哪种表结构最适合最容易处理（提取数据、移动、删除、编辑、添加、排序......）？**我应该使用唯一 id =“photo.jpg”**和多维数组
将单个文件的所有内容保存在单行中吗？例如：

 **```
uid:            photo_name.jpg
path:           my_photos/
isNewPhoto:     array[true, array[info:"just uploaded!"][date:"12.12.12"]] (multi-dimensional array ??)
isNewComment:   array[true, array[info:"just commented!"][date:"12.12.12"]] (multi-dimensional array ??)
isNewVote:      array[true, array[info:"just Voted!"][date:"12.12.12"]] (multi-dimensional array ??)
votes:          1,5,3,2
votesIP:        123123123,123123123,123123123
comments:       array[array[sender][comment][date][who]]] (multi-dimensional array ??) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:40:19.093

好吧，当您在将数组的内容存储到单个列之前对数组进行序列化时，您实际上可以很容易地做到这一点。这是一个好主意是另一回事。除了性能问题之外，您还放弃了进行更复杂的事情（例如搜索单个属性）的机会。

你为什么坚持单桌？即使使用多个表，您也可以使用单个查询从多个表条目中检索单个条目。这为您进一步扩展和用例提供了更大的灵活性。**

# r - 使用循环和子集创建不同的 data.frames

> ID：11473719
> 
> 赞同：2
> 
> 时间：2012-07-13T15:37:00.927
> 
> 标签：r, loops, dataframe, subset

我在 R 中有一个 data.frame。我想使用**循环**和**子集**函数创建**三个不同的 data.frame。**我有一个很大的data.frame，但我需要的是下面的示例：

 ****```
sex<-c("M","M","M","F","M","F")
age<-c(20,18,17,20,18,17)
name<-c("John", "Joseph", "Bill", "Sarah", "Robert", "Dana")
data<-data.frame(sex, age, name)

>data
        sex  age   name
    1   M    20    John
    2   M    18    Joseph
    3   M    17    Bill
    4   F    20    Sarah
    5   M    18    Robert
    6   F    17    Dana 
```

我想要的是：

```
>age17
      sex   age   name
    1 M     17    Bill
    2 F     17    Dana

>age18
      sex   age   name
    1 M     18    Joseph
    2 M     18    Robert

>age20
      sex   age   name
    1 M     20    John
    2 F     20    Sarah 
```

我可以使用以下命令：

```
>age17<-subset(data, data[,2]==17)
>age18<-subset(data, data[,2]==18)
>age20<-subset(data, data[,2]==20) 
```

**但是可以使用循环来减小命令的大小吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:38:47.237

使用`split`：

```
x <- split(data, data$age)

x
$`17`
  sex age name
3   M  17 Bill
6   F  17 Dana

$`18`
  sex age   name
2   M  18 Joseph
5   M  18 Robert

$`20`
  sex age  name
1   M  20  John
4   F  20 Sarah 
```

* * *

您现在有一个数据框列表，您可以使用任何提取运算符访问列表中的元素，`$`即`[`或`[[`。

例如，第一个元素：

```
x[1]
$`17`
  sex age name
3   M  17 Bill
6   F  17 Dana 
```

或者带有 name 的元素`17`。但请注意，您必须使用反引号来引用这些名称，因为以数字开头的名称不是标准的：

```
x$`17`
  sex age name
3   M  17 Bill
6   F  17 Dana 
```****

# python - pytz的奇怪时区问题

> ID：11473721
> 
> 赞同：51
> 
> 时间：2012-07-13T15:37:07.797
> 
> 标签：python, pytz

```
>>> import pytz
>>> pytz.timezone('Asia/Hong_Kong')
<DstTzInfo 'Asia/Hong_Kong' LMT+7:37:00 STD> 
```

7 小时 37 分钟的偏移量？这有点奇怪，有人遇到同样的问题吗？

实际上，我之间的行为有所不同

```
import pytz
from datetime import datetime
hk = pytz.timezone('Asia/Hong_Kong')

dt1 = datetime(2012,1,1,tzinfo=hk)
dt2 = hk.localize(datetime(2012,1,1))
if dt1 > dt2:
   print "Why?" 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-13T16:15:40.827

时区和偏移量随时间变化。pytz 创建时区对象时提供的默认区域名称和偏移量是该区域最早可用的名称和偏移量，有时它们看起来有点奇怪。当您使用`localize`将区域附加到日期时，将替换正确的区域名称和偏移量。简单地使用`datetime`构造函数将区域附加到日期不允许它正确调整。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-07-16T17:25:20.137

虽然我确信时区的历史变化是一个因素，但将 pytz 时区对象传递给 DateTime 构造函数会导致奇怪的行为，即使对于自成立以来没有经历任何变化的时区也是如此。

```
import datetime
import pytz 

dt = datetime.datetime(2020, 7, 15, 0, 0, tzinfo= pytz.timezone('US/Eastern')) 
```

生产

```
2020-07-15 00:00:00-04:56 
```

创建日期时间对象然后对其进行本地化会产生预期的结果

```
import datetime
import pytz 

dt = datetime.datetime(2020, 7, 15, 0, 0)
dt_local = timezone('US/Eastern').localize(dt) 
```

生产

```
2020-07-15 00:00:00-04:00 
```

# java - 从使用 keytool 创建的文件中加载 osx lion 上的密钥库

> ID：11473724
> 
> 赞同：3
> 
> 时间：2012-07-13T15:37:20.327
> 
> 标签：java, security, osx-lion, keystore, jks

我有一个密钥库，其中包含由以下命令生成的密钥对：

```
keytool -genkeypair -v -alias test-agent -keypass test-agent -storepass 123456.ABC -keystore test-agent.keystore -storetype JKS 
```

我填写了证书的请求信息，并正确生成了带有密钥对的存储。

以下命令：

```
keytool -list -keystore test-agent.keystore -storepass 123456.ABC -storetype JKS 
```

回报：

```
Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

test-agent, Jul 13, 2012, PrivateKeyEntry, 
Certificate fingerprint (MD5): 7B:8F:D7:25:FF:34:D0:EF:44:87:46:E5:BF:18:C6:BF 
```

现在我将密钥库文件添加到我的构建路径并尝试使用在 OSX Lion 上运行的以下 java 代码加载它：

```
public void loadKeyStore() {
  try {
    final Provider p = Security.getProvider("SUN"); 
    final KeyStore keystore = KeyStore.getInstance("JKS",p);

    final InputStream keyStoreInStream = this.getClass().getClassLoader().getResourceAsStream("test-agent.keystore");
    if ( keyStoreInStream == null ) throw new RuntimeException("No keystore found!");

    final char[] password = "123456.ABC".toCharArray();
    try {
      keystore.load(keyStoreInStream, password);
    } catch (Exception e) {
      log.error(String.format("Security library error! [%s]",e.getCause()),e);
    }
  } catch (KeyStoreException e) {
    log.error("Can't initialize security library!",e);
  }
} 
```

抛出以下异常：

```
java.io.IOException: Invalid keystore format
at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:633)
at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:38)
at java.security.KeyStore.load(KeyStore.java:1185) 
```

我已经尝试过使用 PKCS12（为 keytool 和代码设置，在这种情况下，提供者分别应该是 SunJSSE），这会导致另一个异常：

```
java.io.IOException: DerInputStream.getLength(): lengthTag=111, too big.
at sun.security.util.DerInputStream.getLength(DerInputStream.java:544)
at sun.security.util.DerValue.init(DerValue.java:347)
at sun.security.util.DerValue.<init>(DerValue.java:303)
at com.sun.net.ssl.internal.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1200)
at java.security.KeyStore.load(KeyStore.java:1185) 
```

我不知道问题是什么。任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T09:31:35.260

我找到了解决方案。这实际上是我的项目部署的一个问题。我使用 maven，它的资源插件确实使用 UTF8 对资源文件夹中的所有文件进行编码。此编码损坏了密钥库。解决方案是在 pom 文件中添加一个忽略过滤器选项，并告诉 maven 不要对密钥库文件进行编码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-29T02:57:12.167

将以下内容添加到 pom.xml

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-resources-plugin</artifactId>
  <version>2.6</version>
  <configuration>
    <!-- specify UTF-8, ISO-8859-1 or any other file encoding -->
    <encoding>UTF-8</encoding>
    <nonFilteredFileExtensions>
      <nonFilteredFileExtension>p12</nonFilteredFileExtension>
    </nonFilteredFileExtensions>
  </configuration>
</plugin> 
```

# vba - 连续循环 ADO VBA Access 2010

> ID：11473725
> 
> 赞同：2
> 
> 时间：2012-07-13T15:37:22.777
> 
> 标签：vba, ms-access, ms-access-2010, excel-2010, ado

我得到一个连续的循环（我相信）。运行代码时，得到MsgBox提示，点击ok，程序就这样跑来跑去，永不结束？起初我认为这是与文件的连接错误，但如果是这种情况，我应该在 ADO 尝试连接到文件时收到错误，对吗？该文件不是那么大，只有 70 行。我设置 MsgBox 的方式，它应该提示在循环的每次迭代中单击 OK，但我从来没有收到另一个 MsgBox。建议？

```
' The following section reads from the elec_copy field's hyperlink
' It scans the Excel file for items it needs to include into the table
' It enters those cells into the TABLE 'items_needed_table'
'
' Selects row by row, and if the item has been marked TRUE, inserts
' That row into the TABLE 'items_needed_table'

' Open a connection to Excel
On Error Resume Next

Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H0001

Set objConnection = CreateObject("ADODB.Connection")

objConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=" & elec_copy.Value & ";" & _
        "Extended Properties=""Excel 12.0 Macro;HDR=Yes;"";"

' Decalre a RecordSet Object
Set objRecordSet = CreateObject("ADODB.Recordset")

' Grab all Rows in the Plain_VDR Sheet where 'needed' column == TRUE
objRecordset.Open "SELECT line_no,desc,weeks FROM [Plain_VDR$] WHERE needed = TRUE", _
    objConnection, adOpenStatic, adLockOptimistic, adCmdText

' Write the information pulled, into the TABLE 'items_needed_table' in Access Database
Do Until objRecordset.EOF
    MsgBox("" & qd.Parameters("p2"))
    Set qd = data_base.CreateQueryDef("")
    qd.sql = "INSERT INTO items_needed_table(pr_no, line_no, desc, weeks) " & _
        "Values([p1],[p2],[p3],[p4])"
    qd.Parameters("p1").Value = pr_num.Value
    qd.Parameters("p2").Value = objRecorset.Fields.Item("line_no")
    qd.Parameters("p3").Value = objRecordset.Fields.Item("desc")
    qd.Parameters("p4").Value = objRecordset.Fields.Item("weeks")
    qd.Execute
    objRecordset.MoveNext
Loop

' Close Database connection
data_base.Close 
```

提前感谢您的帮助！弥敦道

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:46:36.747

去掉 On Error Resume Next 这一行。它几乎不应该被使用。由于该行，您不知道导致循环的错误发生在哪里。

另一个好主意是始终在每个模块的顶部使用 Option Explicit。这将确保您始终声明您的变量并节省比任何人想象的更多的悲伤。

# jquery - 用 onmouseover 替换所有元素以使用 hoverintent

> ID：11473729
> 
> 赞同：1
> 
> 时间：2012-07-13T15:37:39.463
> 
> 标签：jquery, hoverintent

我在页面中有一堆动态创建的元素，带有不同的“onmouseover”脚本。我想知道是否可以使用 jquery 脚本自动将它们替换`onmouseover`为等效的`hoverintent`.

例子：

```
<div onmouseover='dothis()'>Hello</div>
<div onmouseover='dothat()'>World</div>
<div onmouseover='dosomething()'>Seeya</div> 
```

然后使用 jquery 类似'对于具有绑定'onmouseover'事件的元素，将调用替换为hoverintent等效项。

我什至不确定这是否可能，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:47:44.700

不确定这与 x-browser 的兼容性如何，但适用于 Chrome。

我抓住所有`onmouseover`定义了属性的元素。我循环遍历每个元素，保存`onmouseover`属性值，然后从元素中删除属性。然后，我向每个元素添加一个新的悬停事件，设置悬停时的超时并在悬停时清除它。当超时确实执行时，它会运行保存的`onmouseover`属性值。

默认超时时间为 1 秒（1000 毫秒）。

jQuery：

```
$('[onmouseover]').each(function(){

    var _ = $(this).attr('onmouseover');

    $(this).attr('onmouseover', '').hover(function(){    
        $(this).data('timeout', setTimeout(function(){ eval(_); },1000));         
    },function(){        
        clearTimeout($(this).data('timeout'));        
    });

});​ 
```

小提琴：

[http://jsfiddle.net/iambriansreed/D3dmv/](http://jsfiddle.net/iambriansreed/D3dmv/)

# url - 如何为我的网站 URL 设置自定义域前缀

> ID：11473733
> 
> 赞同：0
> 
> 时间：2012-07-13T15:37:52.523
> 
> 标签：url, web, dns, prefix

我只需要知道邮件的名称是什么：

**邮件。**google.com

将被命名

我认为“自定义域前缀”是有道理的，但似乎并非如此。 **如果可能，请提供文档链接，或仅提供适当的搜索查询。**

另外，使用这些前缀是个好主意吗？基本上我有一个名为smokelessmi.org 的网站，我想为这个城市（密歇根州安娜堡）添加一个前缀a2.smokelessmi.org，因为这是一个本地化网站。

最终我想添加密歇根州的其他城市，但我只是从这个开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:06:16.440

毫不奇怪，有大量 rfc（[rfc1591](https://www.rfc-editor.org/rfc/rfc1591) [rfc2606](https://www.rfc-editor.org/rfc/rfc2606)和[rfc2181](https://www.rfc-editor.org/rfc/rfc2181)仅举几例）讨论域名的结构，而[rfc2181 的这句话](https://www.rfc-editor.org/rfc/rfc2181#section-11)强调了 DNS 的分层性质

> 有时假设域名系统仅用于将 Internet 主机名映射到数据，以及将 Internet 地址映射到主机名。这是不正确的，DNS 是一个通用的（如果有些限制）分层数据库，并且可以存储几乎任何类型的数据，用于几乎任何目的。

因此，在您的顶级域（在您的示例中为 .com）和通常称为[二级域](http://en.wikipedia.org/wiki/Second-level_domain)（也用于上述 rfc2606 和[rfc920](https://www.rfc-editor.org/rfc/rfc920)）或短域的左侧，您仍然可以拥有一个完整的层次结构名字。就我个人而言，我喜欢将最左边的一个视为主机名，因为如果您正在处理一项服务，那么最具体的一个代表一台计算机。“中间的”通常被称为子域。

# python - 在 python 中打开 Access 数据库时出错

> ID：11473737
> 
> 赞同：3
> 
> 时间：2012-07-13T15:38:02.660
> 
> 标签：python, database, windows, ms-access, pyodbc

我是 python 编程的新手，我想编写一个 python 程序来读写数据库中的数据。

连接代码如下：

```
DNS='catalog'
DRV = '{Microsoft Access Driver (*.mdb)}'
conn = pyodbc.connect('DRIVER=%s;DSN=%s;' % (DRV,DNS)) 
```

目录是 DSN 名称。

我收到以下错误：

```
Traceback (most recent call last):
File "C:\Python27\exampes\xxx.py", line 8, in <module>
conn = pyodbc.connect('DRIVER=%s;DSN=%s;' % (DRV,DNS))
Error: ('01000', "[01000] [Microsoft][ODBC Microsoft Access Driver]General Warning  Unable to open registry key 'Temporary (volatile) Jet DSN for process 0x12b4 Thread 0x1544  DBC 0x567ea4 Jet'. (1) (SQLDriverConnect);
[01000] [Microsoft][ODBC Microsoft Access  Driver]General Warning Unable to open registry key 'Temporary (volatile) Jet DSN for process 0x12b4 Thread 0x1544 DBC 0x567ea4 Jet'. (1)" 
```

谁能帮帮我吗..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:45:29.513

您运行的帐户不是管理员。它需要根据消息进行注册表访问（[也在此处描述](http://support.microsoft.com/kb/295297)）

需要注册表访问才能找到 MS Access 的 ODBC 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-30T13:53:02.373

尝试取消选中属性：文件属性中的只读框。

# php - 使用 jQuery 删除行

> ID：11473739
> 
> 赞同：0
> 
> 时间：2012-07-13T15:38:08.003
> 
> 标签：php, javascript, jquery

我想知道是否有人可以帮助我。

下面的代码**摘录**成功地创建了一个显示与当前用户相关的记录的表。

```
/* display row for each location */ 
echo "<tr>\n"; 
$theID = $row['locationid']; 
echo " <td style='text-align: Center'>{$row['locationname']}</td>\n"; 
echo " <td style='text-align: Left'>{$row['returnedaddress']}</td>\n"; 
echo " <td style='text-align: Center'>{$row['totalfinds']}</td>\n"; 
echo " <form name= 'locationsconsole' id= 'locationsconsole' action= locationsaction.php  method= 'post'><input type='hidden' name='lid' value=$theID/>                                                 <td><input type= 'submit' name= 'type' value= 'Details'/></td><td><input type= 'submit' name= 'type' value= 'Images'/></td><td><input type= 'submit' name= 'type' value= 'Add Finds'/></td><td><input type= 'submit' name= 'type' value= 'View Finds'/></td><td><input type= 'submit' name= 'type' value= 'Delete'/></td></form>\n"; 
    </tbody> 
    </table> 
    <div align="center"><p id="deletelocationresponse"></p></div> 
```

在这部分代码的末尾，您会看到有一个`Delete`按钮。单击此按钮后，将从表中删除一条记录，并且删除功能正常工作。

除了删除按钮，您会注意到还有一个名为 的 div `deletelocationresponse`。这会运行一个 jquery 脚本来向用户提供屏幕消息，告诉他们删除是否成功。代码如下。

```
<script type="text/javascript">
$(document).ready(function(){
    $('#locationsconsole').submit(function(){

        //check the form is not currently submitting
        if($(this).data('formstatus') !== 'submitting'){

            //setup variables
            var form = $(this),
                formData = form.serialize(),
                formUrl = form.attr('action'),
                formMethod = form.attr('method'), 
                responseMsg = $('#deletelocationresponse');

            //add status data to form
            form.data('formstatus','submitting');

            //show response message - waiting
            responseMsg.hide()
                       .addClass('response-waiting')
                       .text('Please Wait...')
                       .fadeIn(200);

            //send data to server for validation
            $.ajax({
                url: formUrl,
                type: formMethod,
                data: formData,
                success:function(data){

                    //setup variables
                    var responseData = jQuery.parseJSON(data), 
                        klass = '';

                    //response conditional
                    switch(responseData.status){
                        case 'error':
                            klass = 'response-error';
                        break;
                        case 'success':
                            klass = 'response-success';
                        break;  
                    }

                    //show reponse message
                    responseMsg.fadeOut(200,function(){
                        $(this).removeClass('response-waiting')
                               .addClass(klass)
                               .text(responseData.message)
                               .fadeIn(200,function(){
                                   //set timeout to hide response message
                                   setTimeout(function(){
                                       responseMsg.fadeOut(300,function(){
                                           $(this).removeClass(klass);
                                           form.data('formstatus','idle');
                                       });
                                   },2000)
                                    setTimeout(function() { 
                                    $('body').fadeOut(400, function(){
                                    location.reload();
                                    setTimeout(function(){
                                    $('body').fadeIn(400);
                                     }, 500);
                                     window.scrollTo(x-coord, y-coord);
                                 });
                            }, 2000);                           
                        });
                    });
                }
            });
        }

        //prevent form from submitting
        return false;
    });
});
</script>
<style type="text/css">
#deletelocationresponse {
    display:inline;
    margin-left:4px;
    padding-left:20px;
    font:Calibri;
    font-size:16px;
}

.response-waiting {
    background:url("images/loading.gif") no-repeat;
}

.response-success {
    background:url("images/tick.png") no-repeat;
}

.response-error {
    background:url("images/cross.png") no-repeat;
}
</style> 
```

我遇到的问题是，当`Delete`单击按钮时，屏幕消息卡在`Please wait`消息上。

现在我知道这个脚本有效，因为我在其他页面上使用它，显然相关字段已更改。因此，我将其范围缩小到获取表单名称的问题，即 jQuery 代码中的这一行：`$('#locationsconsole').submit(function(){`.

在我的其他页面上，我的表单是通过 HTML 创建的，而此脚本使用 PHP。

我试过研究这个，但我不是特别精通 JavaScript，所以我不太确定我应该寻找什么。有人可以告诉我，有没有办法以不同的方式调用表格？

任何帮助将不胜感激。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:45:44.233

第一步是进行基本调试。FireBug 或其他客户端调试工具可以为您提供强大的功能。您也可以开始设置警报。例如，您可以`alert('got here!');`在 javascript 中放置类似 inline 的代码，以查看具体是哪一行引发了错误。如果您使用的是 FireBug，则可以将其替换为`console.log('got here');`

如果您发现问题出在您的响应中，console.log 还允许您转储嵌套变量。

其次，将呈现的页面保存为 HTML，然后开始对其进行故障排除。这消除了调试的 PHP 方面，因为您有 HTML 错误或来自 AJAX 请求的 JSON 响应中的错误。

Firebug 等客户端调试工具还可以让您查看 AJAX 请求和原始响应。

# opencv - 将三分之一的视频流转换为灰度并显示

> ID：11473746
> 
> 赞同：1
> 
> 时间：2012-07-13T15:38:28.710
> 
> 标签：opencv, webcam, grayscale

> **可能重复：**
> [用鼠标从视频上的矩形设置 ROI](https://stackoverflow.com/questions/10881397/setting-roi-with-mouse-from-a-rectangle-on-a-video)

我正在opencv中开发一个简单的应用程序，它将三分之一的视频流显示为灰度，三分之一的区域基于用户的嘴巴检测。如果嘴在最右边，则屏幕右侧三分之一将转换为灰度。我无法找到一种基于检测将特定部分转换为灰度的方法。请有人可以确定这样做的正确方法。

我在 ubuntu 中使用 OpenCV 2.3 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:56:55.423

使用 roi 选择要更改的源图像的区域，然后使用 cvtColor 使其变为灰色

# c# - Visual Studio ftp网站文件路径问题

> ID：11473747
> 
> 赞同：0
> 
> 时间：2012-07-13T15:38:29.990
> 
> 标签：c#, asp.net, visual-studio-2010, ftp

我目前正在重新设计一家公司的网站，我正在通过在 Visual Studio 2010 中打开一个网站并使用 FTP 对其进行编辑（我使用的是 Vista，ASP.NET 4.0）。

我遇到的问题是某些 .aspx 页面找不到文件（母版页等），因为 Visual Studio 说文件路径错误。文件路径适用于服务器（Windows 服务器），但不适用于 Visual Studio。一个示例文件路径是：

```
~/design/MasterPageDesign.master 
```

但是，如果我将文件路径更改为

```
MasterPageDesign.master 
```

这是正确的，因为主文件与此 aspx 页面位于同一文件夹中。

然后visual studio自动把filepath改成ftp路径

```
ftp://the.server.address.etc.etc 
```

因此它可以在 Visual Studio 上运行，但不能在服务器上运行。

我已经阅读了有关 IIS 和使用虚拟目录的信息，但我不明白这有什么帮助。有没有办法绕过它或者它是一个死胡同？

提前致谢

# javascript - 如何检测three.js中的碰撞？

> ID：11473755
> 
> 赞同：62
> 
> 时间：2012-07-13T15:38:49.170
> 
> 标签：javascript, three.js, webgl, collision-detection

我正在使用three.js。

我的场景中有两个网格几何体。

如果这些几何图形相交（或者如果翻译*会相交*），我想将其检测为碰撞。

如何使用 three.js 执行碰撞检测？如果three.js 没有碰撞检测工具，我是否可以将其他库与three.js 结合使用？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-07-14T03:13:26.573

在 Three.js 中，实用程序 CollisionUtils.js 和 Collisions.js 似乎不再受支持，并且 mrdoob（three.js 的创建者）本人建议更新到最新版本的 three.js 并为此使用 Ray 类反而。下面是一种解决方法。

这个想法是这样的：假设我们要检查一个给定的网格，称为“播放器”，是否与包含在一个名为“collidableMeshList”的数组中的任何网格相交。我们可以做的是创建一组光线，这些光线从 Player 网格 (Player.position) 的坐标开始，并延伸到 Player 网格几何中的每个顶点。每条光线都有一个名为“intersectObjects”的方法，它返回与光线相交的对象数组，以及到每个对象的距离（从光线的原点测量）。如果到交点的距离小于玩家位置和几何体顶点之间的距离，那么碰撞发生在玩家网格的内部——我们可能会称之为“实际”碰撞。

我在以下位置发布了一个工作示例：

[http://stemkoski.github.io/Three.js/Collision-Detection.html](http://stemkoski.github.io/Three.js/Collision-Detection.html)

您可以使用箭头键移动红色线框立方体并使用 W/A/S/D 旋转它。当它与其中一个蓝色立方体相交时，如上所述，对于每个交叉点，“Hit”一词将出现在屏幕顶部一次。代码的重要部分如下。

```
for (var vertexIndex = 0; vertexIndex < Player.geometry.vertices.length; vertexIndex++)
{       
    var localVertex = Player.geometry.vertices[vertexIndex].clone();
    var globalVertex = Player.matrix.multiplyVector3(localVertex);
    var directionVector = globalVertex.subSelf( Player.position );

    var ray = new THREE.Ray( Player.position, directionVector.clone().normalize() );
    var collisionResults = ray.intersectObjects( collidableMeshList );
    if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) 
    {
        // a collision occurred... do something...
    }
} 
```

这种特殊方法存在两个潜在问题。

(1) 当射线的原点在网格 M 内时，不会返回射线与 M 的碰撞结果。

(2) 小物体（相对于 Player 网格）可能会在各种光线之间“滑动”，因此不会记录碰撞。降低此问题发生几率的两种可能方法是编写代码，以便小对象创建光线并从它们的角度进行碰撞检测，或者在网格上包含更多顶点（例如使用 CubeGeometry(100, 100, 100, 20, 20, 20) 而不是 CubeGeometry(100, 100, 100, 1, 1, 1)。）后一种方法可能会导致性能下降，因此我建议谨慎使用它。

我希望其他人能够通过他们对这个问题的解决方案来为这个问题做出贡献。在开发这里描述的解决方案之前，我自己挣扎了很长时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:54:13.383

这确实是一个太宽泛的主题，无法在 SO 问题中涵盖，但是为了稍微润滑网站的 SEO，这里有几个简单的起点：

如果您想要真正简单的碰撞检测而不是完整的物理引擎，请查看（由于没有更多现有网站，链接已删除）

另一方面，如果您确实想要一些碰撞响应，而不仅仅是“A 和 B 碰撞了吗？”，请查看[Physijs](http://chandlerprall.github.com/Physijs/)，它是一个超级易用的 Ammo.js 包装器，围绕 Three.js 构建

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2022-01-10T11:38:11.470

Lee 答案的更新版本，适用于最新版本的 three.js

```
for (var vertexIndex = 0; vertexIndex < Player.geometry.attributes.position.array.length; vertexIndex++)
{       
    var localVertex = new THREE.Vector3().fromBufferAttribute(Player.geometry.attributes.position, vertexIndex).clone();
    var globalVertex = localVertex.applyMatrix4(Player.matrix);
    var directionVector = globalVertex.sub( Player.position );

    var ray = new THREE.Raycaster( Player.position, directionVector.clone().normalize() );
    var collisionResults = ray.intersectObjects( collidableMeshList );
    if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) 
    {
        // a collision occurred... do something...
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-16T00:36:58.420

**仅适用于 BoxGeometry 和 BoxBufferGeometry**

创建以下函数：

```
function checkTouching(a, d) {
  let b1 = a.position.y - a.geometry.parameters.height / 2;
  let t1 = a.position.y + a.geometry.parameters.height / 2;
  let r1 = a.position.x + a.geometry.parameters.width / 2;
  let l1 = a.position.x - a.geometry.parameters.width / 2;
  let f1 = a.position.z - a.geometry.parameters.depth / 2;
  let B1 = a.position.z + a.geometry.parameters.depth / 2;
  let b2 = d.position.y - d.geometry.parameters.height / 2;
  let t2 = d.position.y + d.geometry.parameters.height / 2;
  let r2 = d.position.x + d.geometry.parameters.width / 2;
  let l2 = d.position.x - d.geometry.parameters.width / 2;
  let f2 = d.position.z - d.geometry.parameters.depth / 2;
  let B2 = d.position.z + d.geometry.parameters.depth / 2;
  if (t1 < b2 || r1 < l2 || b1 > t2 || l1 > r2 || f1 > B2 || B1 < f2) {
    return false;
  }
  return true;
} 
```

在这样的条件语句中使用它：

```
if (checkTouching(cube1,cube2)) {
alert("collision!")
} 
```

[我在https://3d-collion-test.glitch.me/](https://3d-collion-test.glitch.me/)有一个使用这个的例子

**注意**：如果您旋转（或缩放）一个（或两个）立方体/棱镜，它会检测到好像它们没有被旋转（或缩放）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-03T23:29:18.243

看起来这个问题已经解决了，但如果你不习惯使用光线投射和创建自己的物理环境，我有一个更简单的解决方案。

CANNON.js 和 AMMO.js 都是建立在 THREE.js 之上的物理库。它们创建了一个次要物理环境，您将对象位置与该场景联系起来以模拟物理环境。CANNON 的文档很简单，它是我使用的，但自 4 年前发布以来一直没有更新。此后，该回购已被分叉，并且社区将其更新为大炮。我将在这里留下一个代码片段，以便您了解它是如何工作的

```
/**
* Floor
*/
const floorShape = new CANNON.Plane()
const floorBody = new CANNON.Body()
floorBody.mass = 0
floorBody.addShape(floorShape)
floorBody.quaternion.setFromAxisAngle(
    new CANNON.Vec3(-1,0,0),
    Math.PI / 2
)
world.addBody(floorBody)

const floor = new THREE.Mesh(
new THREE.PlaneGeometry(10, 10),
new THREE.MeshStandardMaterial({
    color: '#777777',
    metalness: 0.3,
    roughness: 0.4,
    envMap: environmentMapTexture
})
)
floor.receiveShadow = true
floor.rotation.x = - Math.PI * 0.5
scene.add(floor)

// THREE mesh
const mesh = new THREE.Mesh(
    sphereGeometry,
    sphereMaterial
)
mesh.scale.set(1,1,1)
mesh.castShadow = true
mesh.position.copy({x: 0, y: 3, z: 0})
scene.add(mesh)

// Cannon
const shape = new CANNON.Sphere(1)
const body = new CANNON.Body({
    mass: 1,
    shape,
    material: concretePlasticMaterial
})
body.position.copy({x: 0, y: 3, z: 0})
world.addBody(body) 
```

这会产生一个地板和一个球，但也会在 CANNON.js 环境中创建相同的东西。

```
const tick = () =>
{
    const elapsedTime = clock.getElapsedTime() 
    const deltaTime = elapsedTime - oldElapsedTime
    oldElapsedTime = elapsedTime

    // Update Physics World
    mesh.position.copy(body.position)

    world.step(1/60,deltaTime,3)

    // Render
    renderer.render(scene, camera)

    // Call tick again on the next frame
    window.requestAnimationFrame(tick)
} 
```

在此之后，您只需根据物理场景的位置在动画函数中更新 THREE.js 场景的位置。

请查看文档，因为它可能看起来比实际更复杂。使用物理库将是模拟碰撞的最简单方法。另请查看 Physi.js，我从未使用过它，但它应该是一个更友好的库，不需要您创建辅助环境

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-15T01:53:51.793

因为我的其他答案是有限的，所以我做了其他更准确的东西，只有在发生碰撞时才返回`true`，而在没有碰撞时返回 false（但有时仍然存在），首先制作以下函数：

```
function rt(a,b) {
  let d = [b]; 
  let e = a.position.clone();
  let f = a.geometry.vertices.length;
  let g = a.position;
  let h = a.matrix;
  let i = a.geometry.vertices;
    for (var vertexIndex = f-1; vertexIndex >= 0; vertexIndex--) {      
        let localVertex = i[vertexIndex].clone();
        let globalVertex = localVertex.applyMatrix4(h);
        let directionVector = globalVertex.sub(g);

        let ray = new THREE.Raycaster(e,directionVector.clone().normalize());
        let collisionResults = ray.intersectObjects(d);
        if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) { 
            return true;
    }
    }
 return false;
} 
```

上面的 Function 与 Lee Stemkoski 在这个问题中的答案相同（我通过键入来感谢他），但我进行了更改，因此它运行得更快，并且您不需要创建网格数组。好的第2步：创建这个函数：

```
function ft(a,b) {
  return rt(a,b)||rt(b,a)||(a.position.z==b.position.z&&a.position.x==b.position.x&&a.position.y==b.position.y)
} 
```

如果网格 A 的中心不在网格 B 中并且网格 B 的中心不在 A 中，则返回 true，或者位置相等并且它们实际上是接触的。如果您缩放一个（或两个）网格，这仍然有效。我有一个例子：[https ://3d-collsion-test-r.glitch.me/](https://3d-collsion-test-r.glitch.me/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-26T01:35:01.763

`geometry.attributes.position.array`在我的 threejs 版本中，我只有`geometry.vertices`. 要将其转换为顶点，我使用以下 TS 函数：

```
export const getVerticesForObject = (obj: THREE.Mesh): THREE.Vector3[] => {
  const bufferVertices = obj.geometry.attributes.position.array;
  const vertices: THREE.Vector3[] = [];

  for (let i = 0; i < bufferVertices.length; i += 3) {
    vertices.push(
      new THREE.Vector3(
        bufferVertices[i] + obj.position.x,
        bufferVertices[i + 1] + obj.position.y,
        bufferVertices[i + 2] + obj.position.z
      )
    );
  }
  return vertices;
}; 
```

我为每个维度传递对象的位置，因为默认情况下 bufferVertices 是相对于对象的中心的，出于我的目的，我希望它们是全局的。

我还写了一个小函数来检测基于顶点的碰撞。它可以选择对非常复杂的对象的顶点进行采样，或者检查所有顶点与另一个对象的顶点的接近程度：

```
const COLLISION_DISTANCE = 0.025;
const SAMPLE_SIZE = 50;
export const detectCollision = ({
  collider,
  collidables,
  method,
}: DetectCollisionParams): GameObject | undefined => {
  const { geometry, position } = collider.obj;
  if (!geometry.boundingSphere) return;

  const colliderCenter = new THREE.Vector3(position.x, position.y, position.z);
  const colliderSampleVertices =
    method === "sample"
      ? _.sampleSize(getVerticesForObject(collider.obj), SAMPLE_SIZE)
      : getVerticesForObject(collider.obj);

  for (const collidable of collidables) {
    // First, detect if it's within the bounding box
    const { geometry: colGeometry, position: colPosition } = collidable.obj;
    if (!colGeometry.boundingSphere) continue;
    const colCenter = new THREE.Vector3(
      colPosition.x,
      colPosition.y,
      colPosition.z
    );
    const bothRadiuses =
      geometry.boundingSphere.radius + colGeometry.boundingSphere.radius;
    const distance = colliderCenter.distanceTo(colCenter);
    if (distance > bothRadiuses) continue;

    // Then, detect if there are overlapping vectors
    const colSampleVertices =
      method === "sample"
        ? _.sampleSize(getVerticesForObject(collidable.obj), SAMPLE_SIZE)
        : getVerticesForObject(collidable.obj);
    for (const v1 of colliderSampleVertices) {
      for (const v2 of colSampleVertices) {
        if (v1.distanceTo(v2) < COLLISION_DISTANCE) {
          return collidable;
        }
      }
    }
  }
}; 
```

# f# - 使用 C# 或 F# 开始处理 Wolf、Cabbage、Goat 等基本运输问题

> ID：11473756
> 
> 赞同：-2
> 
> 时间：2012-07-13T15:39:05.017
> 
> 标签：f#, river-crossing-puzzle

好的。这可能是一个非常基本的问题，请不要激怒我，但我一直在谷歌搜索，我想学习如何使用 F# 编写运输问题的解决方案，如狼、卷心菜和山羊或旅行推销员

到目前为止，我的研究已将我带到网络上的这些资源

[http://mat.gsia.cmu.edu/orclass/integer/integer.html](http://mat.gsia.cmu.edu/orclass/integer/integer.html)

[http://www.zib.de/Publications/Reports/SC-95-27.pdf](http://www.zib.de/Publications/Reports/SC-95-27.pdf)

[狐山羊白菜运输](https://stackoverflow.com/questions/8138775/fox-goat-cabbage-transportation)

[http://www.qauprogrammers.com/Article/File-192324030/PROLOG-Programming-with-NET](http://www.qauprogrammers.com/Article/File-192324030/PROLOG-Programming-with-NET)

但是尽管通读了这些，我仍然无法“思考”如何用 F# 类型的语言解决这样的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:16:42.140

我建议阅读优秀的文章[Escape from Zurg: An Exercise in Logic Programming。](http://web.engr.oregonstate.edu/~erwig/papers/Zurg_JFP04.pdf)虽然选择的函数式语言是 Haskell，但它应该给你足够的关于函数式优化搜索问题编程的想法。

此外[，Scala 中的 Escape from Zurg](http://blog.jonhnnyweslley.net/2008/08/escape-from-zurg.html)具有可轻松移植到 F# 的完整源代码。

# java - 在 android 启动器中托管小部件

> ID：11473757
> 
> 赞同：11
> 
> 时间：2012-07-13T15:39:05.847
> 
> 标签：java, android, widget, launcher

我正在为 android 制作一个启动器，但我被困在小部件部分。我在互联网上搜索了大约一个半小时，试图弄清楚如何在我的应用程序中托管小部件，但没有运气。

我已经浏览了一些库存启动器和 ADW 启动器代码，但两者都只有数英里的代码，这是我第一次制作启动器。

有人可以指导我如何将小部件添加到我的启动器中吗？或者至少发布任何链接/教程？请解释一下，因为这是我第一次。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T04:17:54.293

尝试这个：

```
final int APPWIDGET_HOST_ID = 2048;
final int REQUEST_PICK_APPWIDGET = 0;
final int REQUEST_CREATE_APPWIDGET = 5;

AppWidgetManager appWidgetManager;
AppWidgetHost appWidgetHost;

// Let user pick a widget from the list of intalled AppWidgets
public void selectWidget()
{
    int appWidgetId = this.appWidgetHost.allocateAppWidgetId();
    Intent pickIntent = new Intent(AppWidgetManager.ACTION_APPWIDGET_PICK);
    pickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
    addEmptyData(pickIntent);
    startActivityForResult(pickIntent, REQUEST_PICK_APPWIDGET);
}

// For some reason you have to add this empty data, else it won't work
public void addEmptyData(Intent pickIntent)
{
    ArrayList<AppWidgetProviderInfo> customInfo = 
        new ArrayList<AppWidgetProviderInfo>();
    pickIntent.putParcelableArrayListExtra(
        AppWidgetManager.EXTRA_CUSTOM_INFO, customInfo);
    ArrayList<Bundle> customExtras = new ArrayList<Bundle>();
    pickIntent.putParcelableArrayListExtra(
        AppWidgetManager.EXTRA_CUSTOM_EXTRAS, customExtras);
};

@Override
protected void onActivityResult(int requestCode, int resultCode, 
                                Intent data) {
    if (resultCode == RESULT_OK ) {
        if (requestCode == REQUEST_PICK_APPWIDGET) {
            configureWidget(data);
        }
        else if (requestCode == REQUEST_CREATE_APPWIDGET) {
            createWidget(data);
        }
    }
    else if (resultCode == RESULT_CANCELED && data != null) {
        int appWidgetId = 
            data.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
        if (appWidgetId != -1) {
            appWidgetHost.deleteAppWidgetId(appWidgetId);
        }
    }
}

// Show configuration activity of the widget picked by the user
private void configureWidget(Intent data) {
    Bundle extras = data.getExtras();
    int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
    AppWidgetProviderInfo appWidgetInfo = 
            appWidgetManager.getAppWidgetInfo(appWidgetId);
    if (appWidgetInfo.configure != null) {
        Intent intent = 
            new Intent(AppWidgetManager.ACTION_APPWIDGET_CONFIGURE);
        intent.setComponent(appWidgetInfo.configure);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        startActivityForResult(intent, REQUEST_CREATE_APPWIDGET);
    } else {
        createWidget(data);
    }
}

// Get an instance of the selected widget as a AppWidgetHostView
public void createWidget(Intent data) {
    Bundle extras = data.getExtras();
    int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
    AppWidgetProviderInfo appWidgetInfo = appWidgetManager.getAppWidgetInfo(appWidgetId);

    AppWidgetHostView hostView = appWidgetHost.createView(this, appWidgetId, appWidgetInfo);
    hostView.setAppWidget(appWidgetId, appWidgetInfo);
    // Add  it on the layout you want
    myLayout.addView(hostView);
}

// Call this when you want to remove one from your layout
public void removeWidget(AppWidgetHostView hostView) {
    appWidgetHost.deleteAppWidgetId(hostView.getAppWidgetId());

    // Remove from your layout
    myLayout.removeView(hostView);
}

@Override
protected void onStart() {
    super.onStart();
    appWidgetManager = AppWidgetManager.getInstance(this);
    appWidgetHost = new AppWidgetHost(this, APPWIDGET_HOST_ID);

    // Start listening to pending intents from the widgets
    appWidgetHost.startListening();
}

@Override
protected void onStop() {
    super.onStop();
    appWidgetHost.stopListening();
} 
```

您所要做的就是`selectWidget()`在您想要显示设备上安装的 AppWidget 列表以供选择时调用该方法。

这段代码有点像普通 Android 启动器的修改版本。

**编辑**：

要绑定小部件ID，即使小部件更新并响应用户交互，请参考此处的解决方案：[通过代码重新添加时小部件不响应](https://stackoverflow.com/a/44351320/1468093)

# vim - 您可以从 vimrc 中的 vim 中删除默认配色方案吗？

> ID：11473758
> 
> 赞同：3
> 
> 时间：2012-07-13T15:39:06.333
> 
> 标签：vim

我已经将 vim 中自定义配色方案的数量减少到了最低限度的优秀配色方案，但我仍然拥有所有疯狂的默认值，比如`elflord`，我宁愿不必通过标签。我可以在不破解我的 MacVim 安装并且不必在下一次更新中这样做的情况下删除这些吗？

显然这是分裂的头发，但`.vimrc`首先配置 my 是分裂的头发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:47:36.480

tmcw,

我安装的 vim73 的颜色存储在 \path\to\vim\vim73\colors 中。

在那里，我看到了 elflord.vim 和许多其他文件。

大概从这个目录中删除它们应该完全删除它们。

然后，您可以随意浏览任何内容。

编辑：如果你想在更新后进入并从颜色目录中删除文件，也许你可能需要编写一个脚本来管理它——我不太确定。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:48:39.967

你实际使用了多少种配色方案？如果只是几个（并且您确实需要经常更改它们，例如是黑暗还是明亮的日光），我会定义快捷命令，例如：

```
command -bar Col1 colorscheme default
command -bar Col2 colorscheme darkblue 
```

您可以从 中删除颜色方案`$VIMRUNTIME/colors/`，但在每次 Vim 升级后都必须这样做是对的。

一个（复杂的）替代方案是编写一个自定义`:Colorscheme`命令，使用一个自定义完成，使用黑名单之类的东西来抑制某些方案。作为奖励，使用*cmdalias*插件，您甚至可以覆盖原始`:colorscheme`命令，以使其完全透明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:52:48.973

我想你正在通过你的颜色方案来编辑​​不同的文件类型？为什么不使用或通过目录中的单个 vim 文件在`colorscheme`相应的文件类型特定条目中设置您的首选项。确保你有`autocmd FileType``ftplugin``filetype plugin on`

# javascript - .load 完成后调用函数

> ID：11473763
> 
> 赞同：-2
> 
> 时间：2012-07-13T15:39:31.060
> 
> 标签：javascript, jquery, asynchronous

在这个网页上，我有一个使用 flash swf 的复制功能。我在设置副本之前加载要复制的内容。我使用 .load() 执行此操作。但似乎 .load 是异步的。`setup_copy`.load 完成后有没有办法调用？我怎样才能确定这一点？

```
 $('#commentary').load('commspanish.php');
    setup_copy('copy_commentary','commentary'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:41:02.503

使用[加载](http://api.jquery.com/load/) *完成*回调：

```
$('#commentary').load('commspanish.php', function() {
  setup_copy('copy_commentary','commentary');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:41:17.077

`.load`接受回调：

```
$(...).load(str, function() { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:41:06.343

添加加载响应回调函数的第二个参数可以为您做到这一点。给一些函数，加载完成后调用，关于[**加载**](http://api.jquery.com/load/)

```
$('#commentary').load('commspanish.php', function() {
  alert('Load was performed.');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:42:58.120

利用

```
$('#commentary').load('commspanish.php', function(){
setup_copy('copy_commentary','commentary');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T15:41:54.473

```
$("#commentary").load('commspanish.php', function () {
   setup_copy('copy_commentary', 'commentary');
}); 
```

您也可以使其与 同步`.ajaxSetup`，但为什么呢？

[文档](http://api.jquery.com/load/)

# java - BufferedInputStream 说它不可用，但无论如何都可以使用

> ID：11473768
> 
> 赞同：0
> 
> 时间：2012-07-13T15:39:48.243
> 
> 标签：java, sockets, inputstream, blocking, bufferedinputstream

有人可以向我解释为什么在注释掉 in.available()>0 的情况下这很好用，但是当我把它放回去时它会中断？

```
mySocket = new Socket("blahblah", 12345);
BufferedInputStream in = new BufferedInputStream(mySocket.getInputStream());
....
char result[] = new char[length];       
for (int i = 0; i < length && !mySocket.isClosed() /*&& in.available()>0*/; i++){
    result[i] = (char)in.read();
} 
```

更具体地说：我正在制作一个 Android 应用程序，用户可以在其中搜索一个术语，该搜索被发送到空间中的某个东西，我以 xml 形式返回结果，并用它们做一些事情。当我返回的 xml 足够小（参见上面代码中的“长度”）时，代码在 in.available()>0 的情况下工作得很好。但如果长度很大，in.available() 返回 0。但是随着注释掉，一切都会继续顺利进行。

这是为什么？这是我需要担心和解决的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:46:45.450

in.available() 让您知道您是否可以在那一刻读取数据而不会阻塞。由于 Socket 有数据流，它可能不会立即可用，但会在很短的时间内可用。例如，如果您有一个 1 Gbit 连接，完整的数据包将不会接近 15 微秒，这对于计算机来说是很长的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:47:09.977

我认为数据很大时 in.available() == 0 的原因是因为它还没有机会将其写入您的套接字。您不需要使用 in.available()。另外，我不建议一次读取一个字符，因为有大量数据并且在网络上非常健谈，这会非常慢。考虑读取大小为“length”的字节数组。

# symfony - 注册后以编程方式登录 symfony2

> ID：11473769
> 
> 赞同：1
> 
> 时间：2012-07-13T15:39:50.647
> 
> 标签：symfony

我尝试使用此代码注册后手动登录用户：

[http://www.michelsalib.com/2011/04/pragmatically-authenticate-the-user-in-symfony2/](http://www.michelsalib.com/2011/04/pragmatically-authenticate-the-user-in-symfony2/)

它不适用于新创建的用户，但是当我在用户注册后登录其他现有用户时，一切正常。我认为用户对象不完整，但我尝试再次读取 registrerd 用户，但它也不起作用。

有谁知道问题是什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:48:22.067

您必须创建一个新令牌并将其传递给安全上下文。

```
// Create a new token
$token = new UsernamePasswordToken($user, $credentials, $providerKey, $user->getRoles());

// Retrieve the security context and set the token
$context = $this->container->get('security.context');
$context->setToken($token); 
```

# tsql - 如何从存储过程中填充 SSRS 中的数据集

> ID：11473771
> 
> 赞同：0
> 
> 时间：2012-07-13T15:39:59.693
> 
> 标签：tsql, reporting-services, ssrs-2008

我正在从 SQL 中的存储过程创建 SSRS 报告，当我将数据集添加到报告中时，我发现我必须将其添加到我的过程的顶部，以便将字段返回到我的数据集中从存储过程：

```
IF 1=2 SELECT '' as [Date], '' as [Portfolio ID], '' as [Portfolio Base Ccy], 0 as [All in Market Value Base], 0 as [All in Market Value Converted] 
```

为什么我必须这样做，为什么 SSRS 不简单地拿起：

```
SELECT [Date], [Portfolio ID],   [Portfolio Base Ccy], [All in Market Value Base], [All in Market Value Converted]
FROM @Worktable 
```

从我的程序底部或

```
SELECT * FROM @Worktable 
```

?

编辑：好的，我想我已经将我的程序中的问题缩小到面对我的程序中有一个调试参数。因此，如果此参数设置为“Y”，那么我将显示我的程序的每个步骤，这使得调试更容易（如果需要，我可以添加一个示例）。同样在我的程序结束时，我的最终结果集有一个 if 语句，它说：

```
IF @ReportType IN ('SSD', 'TTD', 'STD')
BEGIN
SELECT.........
END

IF @ReportType IN ('SS', 'TT', 'ST')
BEGIN
SELECT.........
END 
```

这也可能是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:10:02.693

我解决了我的问题，在我的整个过程中，我有一个调试正在运行，以解决如下问题：

```
IF @Debug = 'Y'
    BEGIN
        SELECT @Section AS Section
        SELECT * FROM #Worktable ORDER BY [Portfolio ID]
    END 
```

这导致 ssrs 对报告的元数据是什么感到困惑。我现在已经修复了我的程序以防止这种情况发生，现在我不需要“IF 1=2 SELECT........”

# java - 从外部类修改基类中的内容并从派生类访问它

> ID：11473775
> 
> 赞同：1
> 
> 时间：2012-07-13T15:40:07.487
> 
> 标签：java, class, inheritance, null

我有一个基类和一个派生类以及另一个外部类。我尝试从外部类更新基类中的值并从派生类访问它。

我的班级结构如下：

```
class B:{

bool flag;

setFlag(bool value){
flag = value;
}
printFlag(){
print flag;
}

ExternalClass e = new ExternalClass(this);
}

class External {
B b = null;
External( B b){
this.b = b;
}
b.setFlag(true);

}

Class Derived : extends B{

printFlag();
} 
```

在这里，虽然我已将标志设置为 true，但 print 方法打印为 false。我不知道发生了什么。请帮帮我。

![描述 图片](../Images/a60c926cb77f761e27f1662ef0e6c2b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:00:14.827

这是一些可以满足您要求的代码：

```
class Derived extends B{
    public Derived(){
        super(); 
        // this is the important bit, by calling super() you call the parent classes
        // constructor, which in this case changes the attribute "flag"
        // by using the constructor of the external class on the class
    }
}

class B {
    boolean flag;
    ExternalClass e;

    public B(){
        e = new ExternalClass(this);
    }

    public void setFlag(boolean value) {
        flag = value;
    }

    public void printFlag() {
        System.out.println(flag);
    }

}

class ExternalClass {

    B b = null;

    public ExternalClass(B b) {
        this.b = b;
        b.setFlag (true);
    }
} 
```

# multithreading - 操作系统调度程序如何重新获得对 CPU 的控制权？

> ID：11473777
> 
> 赞同：66
> 
> 时间：2012-07-13T15:40:12.790
> 
> 标签：multithreading, operating-system, multiprocessing, scheduling, multitasking

我最近开始学习 CPU 和操作系统的工作原理，对带有提供多任务处理的操作系统的单 CPU 机器的操作感到有些困惑。

假设我的机器只有一个 CPU，这意味着在任何给定时间，只能运行一个进程。

现在，我只能假设操作系统用来控制对宝贵CPU时间的访问的调度器也是一个进程。

因此，在这台机器中，用户进程或调度系统进程在任何给定时间点都在运行，但不能同时运行。

所以这里有一个问题：

一旦调度器将 CPU 的控制权交给另一个进程，它如何重新获得 CPU 时间来再次运行自己来完成它的调度工作？我的意思是，如果当前运行的任何给定进程都没有产生 CPU，调度程序本身如何再次运行并确保正确的多任务处理？

到目前为止，我一直在想，如果用户进程通过系统调用请求 I/O 操作，那么在系统调用中我们可以确保调度程序再次分配一些 CPU 时间。但我什至不确定这是否以这种方式工作。

另一方面，如果有问题的用户进程本质上是受 CPU 限制的，那么从这个角度来看，它可以永远运行，永远不会让其他进程，甚至调度程序再次运行。

假设时间片调度，我不知道调度程序如何在另一个进程甚至没有运行的情况下分割时间来执行另一个进程？

我非常感谢您在这方面提供的任何见解或参考。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-13T15:42:45.593

操作系统设置了一个硬件定时器（[可编程间隔定时器](https://en.wikipedia.org/wiki/Programmable_interval_timer)或 PIT），它每 N 毫秒产生一个中断。该中断被传递到内核并且用户代码被中断。

它像任何其他硬件中断一样工作。例如，您的磁盘将在完成 IO 后强制切换到内核。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-14T09:56:20.917

谷歌“中断”。中断是多线程、抢占式内核（如 Linux/Windows）的核心。没有中断，操作系统永远不会做任何事情。

在调查/学习时，尽量忽略任何在第一段中提到“定时器中断”、“循环”和“时间片”或“量子”的解释——即使不是真的错误，它们也是危险的误导。

就操作系统而言，中断有两种形式：

*   硬件中断——由来自外围设备的实际硬件信号启动的中断。这些可能在（几乎）任何时间发生，并将执行从可能正在运行的任何线程切换到驱动程序中的代码。

*   软件中断——由当前运行线程的操作系统调用启动的中断。

任何一个中断都可以请求调度程序使正在等待/运行的线程准备好/运行，或者导致正在等待/运行的线程被抢占。

**最重要的中断是来自外围驱动程序的那些硬件中断**——那些使线程准备好等待来自磁盘、NIC 卡、鼠标、键盘、USB 等的 IO 的中断。使用抢占式内核的最重要原因，以及所有锁定问题，同步、信令等，是因为此类系统具有**非常好的 IO 性能**，因为硬件外围设备可以快速使等待来自该硬件的数据的线程准备好/运行，而不会因线程不屈服或等待周期性而导致**任何延迟**计时器重新安排。

导致周期性调度运行的硬件定时器中断很重要，因为许多系统调用都有超时，以防万一，例如，来自外围设备的响应花费的时间比应有的时间长。

在多核系统上，操作系统有一个处理器间驱动程序，可以导致其他内核上的硬件中断，从而允许操作系统将线程中断/调度/分派到多个内核上。

在严重过载的机器上，或那些运行 CPU 密集型应用程序（少数）的机器上，操作系统可以使用周期性计时器中断和由此产生的调度，循环通过一组大于可用内核数量的就绪线程，并允许每个人共享可用的 CPU 资源。在大多数系统上，这种情况很少发生，而且并不重要。

每次我看到“量子”、“放弃他们剩余的时间片”、“循环”等类似内容时，我都会畏缩......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T15:47:59.327

为了补充@usr的答案，引用[Understanding the Linux Kernel](http://www2.comp.ufscar.br/~helio/linux_kernel/chapter/ch10.html)：

**schedule() 函数**

> schedule() 实现调度器。它的目标是在运行队列列表中找到一个进程，然后将 CPU 分配给它。它由几个内核例程直接或以惰性方式调用。[...]

**延迟调用**

> 调度程序也可以通过将当前 [process] 的 need_resched 字段设置为 1 以惰性方式调用。因为在恢复执行用户模式进程之前总是检查该字段的值（请参阅“返回”部分从第 4 章中的“中断和异常”开始），schedule() 肯定会在不久的将来被调用。

# protobuf-net - protobuf-net 和子类中的空属性

> ID：11473781
> 
> 赞同：1
> 
> 时间：2012-07-13T15:40:15.863
> 
> 标签：protobuf-net

我试图使用 protobuf-net 并面临以下问题。我有两节课。

```
[ProtoContract]
class parent
{
    [ProtoMember(1)]
    public string name { get; set; }
}

[ProtoContract]
class child : parent
{
    [ProtoMember(2)]
    public int num { get; set; }
} 
```

如果我创建一个子对象而不设置子属性“num”

```
var obj = new child() { name = "tester" }; 
```

并尝试序列化它

```
using (var stream = new MemoryStream())
{
    Serializer.NonGeneric.Serialize(stream, obj);
} 
```

流将是空的。

有没有办法在不使用父类的属性 [ProtoInclude] 的情况下处理这种情况？
我正在使用 protobuf-net v2 r480。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:45:22.790

这里正确的答案*是*使用 ProtoInclude 来告诉它子类型。否则，它只是相对于“child”进行序列化，并且没有任何有趣的数据（默认情况下零不算有趣），长度为零的流是正确的序列化。Protobuf 不排除空流。

如果你不能使用 ProtoInclude 因为类型在编译时未知，那么你可以使用；

```
RuntimeTypeModel.Default[typeof(parent)]
    .AddSubType(number, typeof(child)); 
```

请注意，“数字”**必须**在以后准确地重复，否则将无法正确反序列化。

# django - 如何在 FileField 中获取文件的链接？

> ID：11473785
> 
> 赞同：7
> 
> 时间：2012-07-13T15:40:27.243
> 
> 标签：django, filefield

我怎样才能得到a的链接`FileField`？我尝试了该`url`字段，但它给出了文件路径：

```
In [7]: myobject.myfilefield.path
Out[7]: u'/home/xxxx/media/files/reference/1342188147.zip'

In [8]: myobject.myfilefield.url
Out[8]: u'/home/xxxx/media/files/reference/1342188147.zip' 
```

我期待得到`http://<mydomain>/media/files/reference/1342188147.zip`

我怎么能得到那个？我必须手动构建字符串吗？

编辑

我的 MEDIA_URL 没有设置，但我仍然无法让它工作：

**设置.py**

```
MEDIA_ROOT = '/home/xxx/media/'
MEDIA_URL = 'http://xxx.com/media/' 
```

**模型.py**

```
class Archive(models.Model):

    #...
    file = models.FileField(upload_to="files") 
```

**在壳里**

```
a = Archive()
a.file = "/some/path/to/file.txt"
a.save() 
```

然后我得到`a.path`：

```
"/some/path/to/file.txt" 
```

和`a.url`：

```
"http://xxx.com/media/some/path/to/file.txt" 
```

以编程方式完成后`a.file = "/some/path/to/file.txt"`，文件不会上传到`MEDIA_ROOT`. 如何在我定义的目录中上传文件`upload_to`，即在我的情况下`/home/xxx/media/file.txt`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-13T16:00:03.607

输出基于您的设置文件，请查看此处以了解在开发和/或生产中提供静态文件：

[Django 管理、静态和媒体文件的混淆](https://stackoverflow.com/questions/10460028/confusion-in-django-admin-static-and-media-files/10460116#10460116)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T16:01:00.903

我猜你的字段定义为：

```
picture = models.ImageField(upload_to="/home/xxx/media/files/reference") 
```

换句话说，您是否可以为字段的 upload_path 属性定义绝对路径？

尝试类似的东西

```
from django.conf import settings
picture = models.ImageField(upload_to=settings.MEDIA_ROOT + "files/reference") 
```

# mysql - 类似类对象的推荐 MySQL 数据模型

> ID：11473791
> 
> 赞同：2
> 
> 时间：2012-07-13T15:40:52.043
> 
> 标签：mysql, datamodel

我们将创建一个 MySQL 数据库来反映以下 PHP 类：

*   内容
*   文章扩展内容
*   帖子扩展内容
*   ...

会有与内容相关的模型，如评论、忽略等。

这里的问题是使用哪种数据模型。

1) 每个型号一张桌子

2）一个大的内容表（所有类属性作为列），加上其他模型的单个表。我相信它被称为单表继承。

3) 一个带有公共字段的大型内容表，或者只有我们通常搜索的字段（索引），加上一个大型内容数据表，以及其余的属性。

4）另一种方式？

我们希望能够查询内容，并获取最近的、基于位置的或以某种方式过滤的内容，而不管它是哪种内容类型（子类）。因此解决方案 1 可能是不可能的。

这个系统应该是快速和可扩展的。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:30:56.593

我写了一篇关于这个主题的博客文章，你可能会觉得有帮助：http: [//jasonswett.net/blog/composition-a-better-alternative-to-orm-inheritance/](http://jasonswett.net/blog/composition-a-better-alternative-to-orm-inheritance/)

首先，我想建议你打电话给你的桌子`content_item`或其他东西，而不是`content`. 这样做的原因是我相信表名应该与它所代表的事物的名称相匹配。有关详细信息，请参阅[我的另一篇博客文章](http://jasonswett.net/blog/a-good-name-for-a-database-table-that-stores-news/)。

因此，您可能有一个名为`content_item`的表、一个名为 的表`article`和一个名为 的表`post`。`content_item`会有 , 等列`title`-`slug`每个内容项都会有的所有内容，无论是帖子、文章还是其他内容。然后`article`会有一个`content_item_id`，然后是任何其他特定于文章的内容，但*只有*特定于文章的内容。对于每篇文章，您都会有一条`content_item`记录，然后是一条`article`附加到该记录的`content_item`记录。

这将使您能够查询`content_item`和获取包含所有内容类型的结果。

我过去曾成功实施过这种解决方案。（我也尝试过不同的方法，但不太喜欢它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:48:52.983

如果它们是足够相似的对象，我会使用选项 3... 一个 la drupals 节点概念或当前 wordPress 的“帖子”想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:05:56.087

也许尝试这样的事情。您对文章和文章扩展内容的需求可能不同，但不是从内容 -> 文章（或文章）的 1..many 关系，为什么不增加在任何内容中混合/匹配内容的灵活性。如果您不需要/不希望这样做，则省略 article_content 和 post_content 表，只需将外键 content_id INT NOT NULL 分别添加到每个 post 和 article 表。

* * *

CREATE TABLE IF NOT EXISTS content (id INT NOT NULL AUTO_INCREMENT, title VARCHAR(32) NOT NULL, description VARCHAR(255) NULL, body TEXT, published DATETIME NOT NULL, updated DATETIME NULL, owner_id INT DEFAULT '0', status TINYINT( 1）默认'1'，主键（id），索引idx_content_status（状态））；

CREATE TABLE IF NOT EXISTS article (id INT NOT NULL AUTO_INCREMENT, title VARCHAR(32) NOT NULL, excerpt VARCHAR(255) NULL, url_slug VARCHAR(64) NOT NULL, author_id INT NOT NULL, 发布的 DATETIME NOT NULL, 更新的 DATETIME NULL, status TINYINT(1) DEFAULT '1', sort_order INT DEFAULT '1', PRIMARY KEY (id), UNIQUE INDEX idx_article_slug(url_slug), INDEX idx_article_search(title, published, status, sort_order));

CREATE TABLE IF NOT EXISTS post (id INT NOT NULL AUTO_INCREMENT, title VARCHAR(32) NOT NULL, comment VARCHAR(128) NULL, author_id INT NOT NULL, 发布的 DATETIME NOT NULL, 更新的 DATETIME NULL, 状态 TINYINT(1) DEFAULT '1 '，主键（id））；

如果不存在标签，则创建表（id INT NOT NULL AUTO_INCREMENT，标签 VARCHAR(24) NOT NULL，PRIMARY KEY (id)）；

如果不存在则创建表 article_content (article_id INT NOT NULL, content_id INT NOT NULL, status TINYINT(1) DEFAULT '1', sort_order INT DEFAULT '1', INDEX idx_article_content_search(article_id, content_id, status, sort_order));

如果不存在 post_content (post_id INT NOT NULL, content_id INT NOT NULL, status TINYINT(1) DEFAULT '1', sort_order INT DEFAULT '1', INDEX idx_post_content_search(post_id, content_id, status, sort_order))，则创建表；

如果不存在，则创建表 article_tags (article_id INT NOT NULL, tag_id INT NOT NULL, INDEX idx_article_tag_search(article_id, tag_id));

如果不存在 post_tags (post_id INT NOT NULL, tag_id INT NOT NULL, INDEX idx_post_tag_search(post_id, tag_id))，则创建表；

# jquery - 如果已在会话中查看，对向我的 jquery 添加简单的 cookie 以隐藏闪屏 div 感到困惑

> ID：11473793
> 
> 赞同：0
> 
> 时间：2012-07-13T15:40:56.363
> 
> 标签：jquery, cookies, splash-screen

我是 jquery 的新手，并为启动屏幕编写了这个简单的脚本（只是索引页面上的 div z-index 999）。单击后，我将其设置为淡出 div。我坚持添加脚本以放置 cookie，以便如果访问者导航站点并返回索引页面，则启动 div 将不会在该会话中再次显示。我假设 cookie，如果找到，将触发 div #splash 显示：无。

有人可以帮忙吗？我读过类似的帖子，但它们是更高级的脚本，所以我很困惑。

这是我当前的 jquery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="jquery.cookie.js"></script>
<script>
$(document).ready(function() {
$('#centered a').click(function() {
  $('#splash').fadeOut(800);
    });
      });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:45:27.270

我想我想通了。这个对吗？

```
<script>
$(document).ready(function() {
  if($.cookie("test") == null){
    $.cookie("test", "foo");
     $('#centered a').click(function() {
      $('#splash').fadeOut(800);
       });              
} else {
 $('#splash').hide();
  }
   });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:55:41.333

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="jquery.cookie.js"></script>
<script>
$(document).ready(function() {
if ($.cookie('shown')) {
  $('#splash').hide();
} else {
  $.cookie('shown', 1);
  $('#centered a').click(function() {
    $('#splash').fadeOut(800);
  });
});
</script> 
```

# perl - perl while 读取文件时嵌套

> ID：11473794
> 
> 赞同：0
> 
> 时间：2012-07-13T15:40:58.627
> 
> 标签：perl, loops, while-loop, filehandle

我想比较两个文件，所以我编写了以下代码：

```
while($line1 = <FH1>){
     while($line2 = <FH2>){
         next if $line1 > $line2;
         last if $line1 < $line2;
     }
     next;
} 
```

我的问题是，当外部循环到达 file1 的下一行然后进入内部循环时，内部 while 语句是否会再次从 file2 的第一行读取，或者在外部循环的上一次迭代中继续它离开的地方环形？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T15:55:53.990

您应该*始终* `use strict`并`use warnings`在*所有*程序的开头并在首次使用时声明所有变量。这尤其适用于您寻求代码帮助时。

您文件中的所有数据都是数字吗？如果没有，那么启用警告会告诉您`<`and`>`运算符用于比较数值而不是一般字符串。

一旦一个文件被完全读完——即第二个循环的`while`条件终止——你就不能从文件中读取更多的数据，除非你`open`再次读取它或使用它`seek`倒回到开头。

一般来说，在这些情况下，最好将两个文件中较小的一个读入一个数组并使用那里的数据。如果两个文件都非常大，那么必须做一些特别的事情。

您要进行哪种文件比较？您是否确保这两个文件相同，或者第二个文件中的所有数据都出现在第一个文件中，或者其他什么？请举例说明您的两个数据文件，以便我们更好地帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:57:22.310

当您从句柄读取第一行时，内部`while`循环将消耗文件句柄的所有内容。如果我能直觉你想要完成什么，一种方法是从同一语句中的两个句柄中读取：`FH2``FH1`

```
while ( defined($line1 = <FH1>) && defined($line2 = <FH2>) ) {
    # 'lt' is for string comparison, '<' is for numbers
    if ($line1 lt $line2) {
        # print a warning?
        last;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:55:45.663

内部循环将从它在 FH2 中的最后一个已知位置继续 - 如果您希望它从您需要放置的文件的开头重新启动：

```
seek(FH2, SEEK_SET, 0); 
```

在内部之前

搜索文档[在](http://perldoc.perl.org/functions/seek.html)perldoc 中

# java - 我的第一个 JavaFX 应用程序中的不安全操作

> ID：11473802
> 
> 赞同：0
> 
> 时间：2012-07-13T15:41:34.007
> 
> 标签：java, netbeans, javafx-2

请看一下我的第一个 JavaFX 应用程序代码

```
package helloworld;

import javafx.application.*;
import javafx.stage.*;
import javafx.event.*;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;

public class HelloWorld2 extends Application
{
    @Override
    public void start(Stage stage)
    {
        stage.setTitle("Hello World");

        Button btn = new Button();
        btn.setText("Hello");
        btn.setOnAction(new Action());

        StackPane pane = new StackPane();
        pane.getChildren().add(btn);

        stage.setScene(new Scene(pane, 300,250));
        stage.show();
    }

    private class Action implements EventHandler
    {

        @Override
        public void handle(Event arg0) 
        {
            System.out.println("JavaFX World");
        }

    }

    public static void main(String[]args)
    {
        launch(args);
    }
} 
```

运行此程序时，我收到“不安全操作”警告。应用程序运行没有任何异常。我相信不安全的事情即将到来，因为我必须将关键字放在某个地方，但我不知道在哪里。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:12:11.583

You should to specify the type of Event

```
private class Action implements EventHandler<ActionEvent>
{
    @Override
    public void handle(ActionEvent arg0) 
    {
        System.out.println("JavaFX World");
    }
} 
```

# java - 在 Java 中使用 { } 进行数组初始化

> ID：11473803
> 
> 赞同：15
> 
> 时间：2012-07-13T15:41:40.013
> 
> 标签：java, arrays

我们可以像这样初始化一个数组：

```
int myArray[][] = { {10,20} ,{30,40} , {50} }; 
```

它工作正常。

但是我遇到了一个特殊的情况。

```
int myAnotherArray[][] = { {,} ,{,} , {,} }; 
```

上面这行代码[编译得很好](http://ideone.com/dWcbb)。在我看来这很奇怪。因为当编译器解析这个语句时，它会遇到`{`and `,`and `}`all 。编译器不应该期望介于两者之间的常量或文字吗？如果有人能告诉我上面的语句是如何解析的，以及编译器在遇到这种情况时究竟做了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-13T15:42:54.053

这只是语法允许尾随逗号这一事实的一个怪癖。

例如，允许尾随逗号对生成诸如此类的东西的代码生成器是一种友好，`{ 0, 1, }`并且允许您例如方便地注释掉最后一行

```
int[] myArray = {
    0,
//  1
}; 
```

（您可能已经知道，尾随`,`被忽略，即`{ , }`产生一个空数组。）

**相关问题：**

*   [以逗号结尾的 Java 数组初始化列表](https://stackoverflow.com/questions/3850203/java-array-initialization-list-ending-with-a-comma)
*   [编程语言语法中尾随逗号的历史](https://stackoverflow.com/questions/2311864/history-of-trailing-comma-in-programming-language-grammars)

# jsp - 使用jsp编码创建xml文件并存储在本地磁盘文件夹中

> ID：11473805
> 
> 赞同：0
> 
> 时间：2012-07-13T15:42:04.257
> 
> 标签：jsp

我可以使用 jsp 编码创建一个 xml 文件，并将其存储到我们提供的指定名称的本地磁盘中吗？xml文件结构是这样的

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<questions>
<question category="something"/>
</questions> 
```

如果这可能，请为此编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:04:42.087

```
<%@page import="java.io.*,org.w3c.dom.*,javax.xml.parsers.*,javax.xml.transform.*, javax.xml.transform.dom.*,javax.xml.transform.stream.*"%>  
<%!
public void createXml(String graph) throws Exception{
try{
    String str="dinesh";
    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = builderFactory.newDocumentBuilder();
    Document doc = docBuilder.newDocument();
    // questionset elements
    Element rootElement = doc.createElement("questionset");
    doc.appendChild(rootElement);
    // question elements
    Element question = doc.createElement("question");
    rootElement.appendChild(question);
    // set attribute to question element
    Attr attr = doc.createAttribute("category");
    attr.setValue("graph");
    question.setAttributeNode(attr);
    // write the content into xml file        

    TransformerFactory factory = TransformerFactory.newInstance();
    Transformer transformer = factory.newTransformer();

    transformer.setOutputProperty(OutputKeys.INDENT, "yes");

    StringWriter sw = new StringWriter();
    StreamResult result = new StreamResult(sw);
    DOMSource source = new DOMSource(doc);
    transformer.transform(source, result);
    String xmlString = sw.toString();

    File file=new File("C:xml/"+str+".xml");
    BufferedWriter bw = new BufferedWriter(new FileWriter(file));
    bw.write(xmlString);
    bw.flush();
    bw.close();
}
catch(Exception e)
{
System.out.println(e);
}   
}
%>
<% 
String graph=request.getParameter("graph");
createXml(graph);
%> 
```

将上述编码保存为任何 jsp 页面，例如。新的.jsp

更改文件名 str="want u want" 并更改属性`attr.setValue("want u want");`

U还可以更改要保存文件的本地磁盘文件夹

# c# - 定期从服务器向客户端发送数据

> ID：11473809
> 
> 赞同：2
> 
> 时间：2012-07-13T15:42:08.430
> 
> 标签：c#, asyncsocket

我创建了一个异步服务器，可以从任意数量的客户端读取消息。我的服务器代码与此示例密切相关：http: [//msdn.microsoft.com/en-us/library/fx6588te.aspx](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)

客户端连接后，我想定期向该客户端发送数据，可能每秒 2 或 3 次。我想不出用异步发送（）实现这一目标的好方法。我假设某种计时机制需要添加到我的`AcceptCallback()`方法中，因为这是与客户端的连接发生的地方。

在我的服务器的先前版本中，我使用阻塞套接字，只是`send()`在无限`while()`循环中循环我的方法并调用`sleep()`以降低时间。

这就是我的想法：

```
public void AcceptCallback(IAsyncResult ar)
    {
        allDone.Set(); // Signal the main thread to continue.

        // Get the socket that handles the client request.
        Socket listener = (Socket)ar.AsyncState;
        Socket handler = listener.EndAccept(ar);
        IPEndPoint remotePoint = (IPEndPoint)handler.RemoteEndPoint;
        IPAddress remoteAddress = remotePoint.Address;
        Console.WriteLine("Connected to {0}!", remoteAddress.ToString());

        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = handler;

        //Start periodically sending here??

        handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReadCallback), state);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:54:50.460

我会设置一个 Timer 对象来向客户端发送数据。在您的评论中实例化并在 AcceptCallback 方法中启动计时器。您必须跟踪信息以允许该计时器回调将数据发送到客户端（例如套接字，以及某种允许它停止的测试 - 尽管您可以简单地关闭计时器，但您会在这种情况下必须跟踪计时器）。

顺便说一句，永远不要在这种情况下调用 Sleep，因为这会使您的线程在一段时间内处于闲置状态，并且您不能轻易中止它以恢复线程（退出或用于其他用途）。

# mkmapview - 在 MKMapKit 视图中显示当前位置周围的区域

> ID：11473813
> 
> 赞同：1
> 
> 时间：2012-07-13T15:42:23.097
> 
> 标签：mkmapview

我在 ViewDidLoad 中有这段代码，它应该显示用户当前位置周围的区域，但它现在正在工作

```
- (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view.

        costaCoffeeMapView.delegate = self;

        MKCoordinateRegion region;
        MKCoordinateSpan span;
        span.latitudeDelta=0.2;
    span.longitudeDelta=0.2;

    CLLocationCoordinate2D location = costaCoffeeMapView.userLocation.coordinate;

    region.center=location;
    region.span=span;

    [costaCoffeeMapView setRegion:region animated:YES];
    [costaCoffeeMapView regionThatFits:region];

} 
```

我试图从 MKMapView 对象“costaCoffeeMapView”中获取当前用户位置，就像在属性检查器中一样，检查了 MKMapView 的“显示用户位置”。

而不是显示当前位置的区域，即英国伦敦。它显示了南大西洋某处的一个区域。我认为正好在 (0.2,0.2) 坐标处。

怎么了？请帮忙

# android - decodeFile 为现有文件返回空位图

> ID：11473819
> 
> 赞同：1
> 
> 时间：2012-07-13T15:42:46.297
> 
> 标签：android, bitmapfactory

我已经尝试了所有可以在 stackoverflow 上找到的解决方案来解决这个问题，但都是徒劳的。在运行以下代码时，mAlbumPhotoUri 是 Uri 类型的“/mnt/sdcard/photo/1342147146535.jpg”。file.exists() 表示该文件存在，但执行最后一行代码后，resultBitmap 为空。

我究竟做错了什么？

```
File file = new File(mAlbumPhotoUri.toString());
if(file.exists()){
   Toast.makeText(this, "File exists in /mnt", Toast.LENGTH_LONG);}
else {
Toast.makeText(this, "File NOT exists in /mnt", Toast.LENGTH_LONG);}

BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true; //only get the size of the bitmap                

if (resultPhotoBitmap != null) {
    resultPhotoBitmap.recycle();
    }
String fname=new File(mAlbumPhotoUri.toString()).getAbsolutePath();
resultPhotoBitmap = BitmapFactory.decodeFile(fname, options); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T20:19:42.160

`inJustDecodeBounds`向您添加选项**就是这样**`BitmapFactory`做的；它仅解码 的大小并将该数据加载回选项对象的和。它不会解码实际数据并将其返回给您。**`Bitmap``outHeight``outWidth``Bitmap`**

 **如果您想真正获得它`Bitmap`本身，请删除该选项并`decodeFile()`再次调用。**

# linqpad - 跨数据库查询，循环数据库

> ID：11473829
> 
> 赞同：1
> 
> 时间：2012-07-13T15:43:37.657
> 
> 标签：linqpad

由于我有很多数据库，我想遍历它们，对它们中的每一个执行 linq 查询/更新。

是否可以做类似的事情

```
foreach(var r in master.sysdatabases)
{
from b from r.chicken
select b.age;
} 
```

我有跨数据库支持的高级版。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T00:31:11.500

如果你所有的数据库都有一个相同的“鸡”表，你可以这样做：

```
var builder = new SqlConnectionStringBuilder (Connection.ConnectionString);

foreach (var db in sys.Databases)
{
   builder.InitialCatalog = db.Name;
   var dc = new TypedDataContext (builder.ToString());
   try
   {
      var query =
         from b in dc.Chickens
         select b.Age;

      query.Dump();
   }
   catch { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:20:04.643

I was able to solve it like this, but I honestly don't like using string concatenated queries.

```
var r = (from b in Sysdatabases select b.Name).ToList();
foreach(var i in r)
{
try{
    var o = ExecuteQuery<string>("select urls from "+i+".dbo.website_setting");
    Console.WriteLine(o);
}
catch(Exception){}
} 
```

the try,execute is for if the table does not exist (master database etc...)

# c# - 一个类及其嵌套类的构造函数

> ID：11473830
> 
> 赞同：6
> 
> 时间：2012-07-13T15:43:50.040
> 
> 标签：c#, class, constructor, namespaces, nested

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T15:48:21.253

不要让你的构造函数有这么多参数，为什么不做这样的事情呢？

```
public class Room
{
    public Room(Suspect suspect, Weapon weapon)
    {
        SuspectInRoom = suspect;
        WeaponInRoom = weapon;
    }

    public Suspect SuspectInRoom { get; set; }
    public Weapon WeaponInRoom { get; set; }
}

// Example usage:

Suspect coronelCustard = new Suspect("Coronel Custard");
Weapon musket = new Weapon("Musket");

Room someRoom = new Room(coronelCustard, musket);

// Then your room can be used to access all sorts of data.

Console.WriteLine(someRoom.SuspectInRoom.Nickname); // "The Big Kahuna"
Console.WriteLine(someRoom.WeaponInRoom.AttackDamage); // "20" 
```

* * *

> 将嵌套类引入主类时，是否可以通过与主类共享的构造函数来处理它们的初始化？最终我希望在同一行中初始化所有三个类......

如果您的嵌套类有一个公共构造函数，您可以这样做。

例子：

```
Room someRoom = new Room(new Suspect("Colonel Custard"), new Weapon("Musket")); 
```

但是，以这种方式做事有点代码味道。最好在构造函数调用中使用已经创建和实例化的成员。无论哪种方式，这都是个人选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T15:49:29.303

你甚至不需要构造函数......只需使用初始化器：

```
 var room = new Room { Name = "Library",
                         Width = 7,
                         Height = 3,
                         Suspect = new Suspect { Name = "Professor Plum",
                                                 PlaysCroquet = false },
                         Weapon = new Weapon { Name = "Candlestick",
                                               IsShiny = true }
                        }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:51:01.370

一个简单的方法是给 Suspect 和 Weapon 类提供公共构造函数，这样它们就可以在 Room 类之外被实例化（我认为这是可以接受的，因为这些类被声明为公共的）。

Room 构造函数然后可以引用 Suspect 和 Weapon。这使您可以灵活地在之前的某个时间创建 Suspect 和 Weapon 对象，并在构造时将它们传递给 Room - 它还可以防止 Room 类构造函数必须了解 Suspect 和 Weapon 类的属性（并且在您需要修改时添加到他们）。

为简洁起见，您仍然可以在一行中构造所有对象，如下所示：

```
Room[i] = new Room("Library", 8, 5, new Suspect("Professor Plum", false), new Weapon("Candlestick", true)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T15:52:57.153

类本身不需要初始化，成员是。

对于传递给构造函数的参数以及在构造函数中初始化的类成员没有正式的限制。`int`如果字段或属性的类型恰好是嵌套类 - 它`string`与构造函数的观点没有区别^*。

*：唯一的潜在区别是非公共嵌套类类型的成员必须在一些其他方法或构造函数中初始化，这与公共读/写属性不同，它也可以直接在类的实例上设置。

# ddl - 如何查看 Vertica 数据库中对象的元数据（如 Oracle 的描述）

> ID：11473832
> 
> 赞同：7
> 
> 时间：2012-07-13T15:44:04.090
> 
> 标签：ddl, vertica

我想知道如何在*Vertica*数据库中获取对象的元数据；像表的元数据。是否有任何表存储*Vertica*数据库中对象（函数、视图、表）的元数据。
例如，在*Oracle*中，我可以键入以下内容并获取表的详细描述或查看过程的代码。
`oracle :> desc table_name;`
或者
`oracle :> edit proc_name;`

我知道我可以使用`\dt`命令从我的模式中查看表，但是有什么方法可以查看创建对象的*DDL语句？*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T19:56:47.373

谢谢，但这不是我想要的。我正在寻找的是`export_objects()`功能：

```
select export_objects('','object_name') 
```

这样您将获得对象的创建脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:16:57.367

`\d table-name`应该得到你所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:29:48.207

额外提示：如果您*只*指定模式，您将获得该模式内的所有对象。当然，必须进入一个循环，为每个对象运行 export_objects()。

# mobile - 什么是最跨平台的 C++ 2d 和 3d 游戏库？

> ID：11473840
> 
> 赞同：2
> 
> 时间：2012-07-13T15:44:25.950
> 
> 标签：mobile, operating-system, cross-platform, video-game-consoles

我正在为 C++ 寻找非常跨平台的 2d/3d 视频游戏库。非常跨平台 - 我的意思是在 Windows、Mac、Linux、Android、Blackberry、Windows Phone、iOS、任天堂游戏机、任天堂便携式设备、Playstation 控制台、Playstation 便携式设备、XBox 系统等上运行的东西（无论如何，这是我的目标 - 但是它至少应该在尽可能多的那些上运行）。

我想尽可能多地找到这样的平台 - 然后我将比较这些平台中小型/单人开发者许可证的成本。免费和开源的东西是理想的，但我不太确定我是否能找到它是否会像我想要的那样跨平台

（要明确的是，我只想在我看到它们之后过滤这些库，所以不要担心它们太贵或太便宜，我想看看所有非常非常跨平台的 C++ 2d/3d 游戏库我可以）。

我知道 OpenFrameworks 和 Cinder，但我不确定它们是否真的像我正在寻找的那样跨平台。例如，我认为 OpenFrameworks 涵盖了 Windows、Linux 和一些移动平台，例如 Android，但没有我希望看到它运行的那么多平台。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:53:05.940

我所知道的最跨平台的库是 SDL 加上 OpenGL。它是开源的，可以在任何具有开放开发模型的平台上运行，即 PC（Windows、Linux、Mac）和 Android。我相信iOS也受支持。不幸的是，Xbox 和 PPlaystation 等平台通常都有自己的 SDK，这使得跨平台开发变得困难。

在这种情况下，简单地编写与库无关的代码并为每个目标系统实现一个包装器可能更可行。除某些微软平台 (Xbox) 外，大多数系统都支持某种 OpenGL。

# xml - 错误：在 XML SCHEMA 集合中多次指定元素或属性类型

> ID：11473841
> 
> 赞同：0
> 
> 时间：2012-07-13T15:44:37.027
> 
> 标签：xml, schema, xml-schema-collection

我的 XML SCHEMA Collection 有什么问题：x，它抛出错误。

以下是我为其编写了 XML SCHEMA COLLECTION 的 XML 示例：

```
<ReviewRules xmlns="urn:goldleaf-schema:ReviewRules" version="1.0">
    <Name>Never Apply Review Rule</Name>
    <ReviewBasis>Never</ReviewBasis>
    <DefaultReviewerComment>Review not required as per rule.</DefaultReviewerComment>
    <PayLimit AutoReject="True">20000</PayLimit>
    <UserLimit AutoReject="True">25000</UserLimit>
    <DailyTotalLimit AutoReject="True">50000</DailyTotalLimit>
    <TotalLimit AutoReject="True">75000</TotalLimit>
</ReviewRules> 
```

XML 模式集合：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns ="urn:GAPS-schema:ReviewRules" 
            xmlns:mstns ="urn:GAPS-schema:ReviewRules" 
            targetNamespace="urn:GAPS-schema:ReviewRules" 
            elementFormDefault="qualified">
  <xsd:element name="ReviewRules" type="mstns:ReviewRulesType" />
  <xsd:complexType name="ReviewRulesType">
    <xsd:sequence>
      <xsd:element name="Name" type="xsd:string" minOccurs="1" maxOccurs="1" />
      <xsd:element name="ReviewBasis" type="mstns:ReviewBasisType" minOccurs="1" maxOccurs="1" />
      <xsd:element name="DefaultReviewerComment" type="xsd:string" minOccurs="1" maxOccurs="1" />
      <xsd:element name="PayLimit" type="xsd:decimal" minOccurs="0" maxOccurs="1" >
        <xsd:complexType>
         <xsd:attribute name="AutoReject" type="xsd:boolean" use="required"/>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="UserLimit" type="xsd:decimal" minOccurs="0" maxOccurs="1" >
        <xsd:complexType>
         <xsd:attribute name="AutoReject" type="xsd:boolean" use="required"/>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="DailyTotalLimit" type="xsd:decimal" minOccurs="0" maxOccurs="1" >
        <xsd:complexType>
         <xsd:attribute name="AutoReject" type="xsd:boolean" use="required"/>
        </xsd:complexType>
      </xsd:element>          
      <xsd:element name="TotalLimit" type="xsd:decimal" minOccurs="0" maxOccurs="1" >
        <xsd:complexType>
         <xsd:attribute name="AutoReject" type="xsd:boolean" use="required"/>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="version" type="xsd:string" fixed="1.0" use="required">
      <xsd:annotation>
        <xsd:documentation>Version attribute should be fixed and increase if there is any schema change for review rules.</xsd:documentation>
      </xsd:annotation>
    </xsd:attribute>
  </xsd:complexType>
  <xsd:simpleType name="ReviewBasisType">
    <xsd:restriction base="xsd:token">
      <xsd:enumeration value="Never" />
      <xsd:enumeration value="Always" />
      <xsd:enumeration value="Limits" />
    </xsd:restriction>
  </xsd:simpleType>
</xsd:schema> 
```

此 XSD 无法验证 XML 并给出错误：

**多次指定元素或属性类型。位置：'/ *:schema[1]/* :complexType[1]/ *:sequence[1]/* :element[4]/*:complexType[1]'。消息 6314，第 16 层，状态 1，第 3 行**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:28:03.223

您可能会发现 Saxon 的错误消息更有帮助：

```
Error at xsd:element on line 11 column 84 of test.xsd:
  A <complexType> element must not appear as a child of an <xsd:element> with a @type attribute
Error at xsd:element on line 16 column 85 of test.xsd:
  A <complexType> element must not appear as a child of an <xsd:element> with a @type attribute
Error at xsd:element on line 21 column 91 of test.xsd:
  A <complexType> element must not appear as a child of an <xsd:element> with a @type attribute
Error at xsd:element on line 26 column 86 of test.xsd:
  A <complexType> element must not appear as a child of an <xsd:element> with a @type attribute
Schema processing failed: 4 errors were found while processing the schema 
```

基本上，您可以使用 type 属性或 complexType 子元素来指定元素的类型，但您不能同时拥有这两者——这没有意义。

# arrays - 存储单元格的单元格数组，没有警告

> ID：11473844
> 
> 赞同：0
> 
> 时间：2012-07-13T15:44:49.847
> 
> 标签：arrays, matlab, cell, cell-array

我正在读取一个文件（逐行），并将其作为 <1x175 单元格> 返回。这是一个计算量很大的大文件，所以我把它分成几部分。我知道预分配会加速我的代码，所以我创建了一个数组来存储文件中的数据。

```
warning('off','MATLAB:NonScalarInput');
dataInput = cell(NumOfPartitions,(1:175)); 
```

我过去在没有*警告的情况下完成了这项工作：输入参数必须是标量。*但我忘记了我是如何做到的......这似乎有效，但我觉得它可能不明智。这是它的样子；

```
dataInput <8,1 cell> =
<1x175 cell>   *<1x175 cell>*  ... <1x175 cell> 
```

所以如果我 dataInput(2) 它将返回第二个**<1x175 cell>**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:49:38.107

像这样的东西怎么样：

```
dataInput = cell([NumOfPartitions 175]); 
```

这将形成一个 8x175 的单元格排列。我认为那应该仍然能够包含您的所有数据...不过我有点困惑，因为您在问题中同时引用了 125 和 175 。

您收到警告的原因是您试图将数组 ( `1:125`) 传递给`cell`函数。您实际上是在要求 MATLAB 创建一个大小为 (8, 1, 2, 3, 4, ... 125) 的元胞数组。哪个 MATLAB 猜测不是您想要做的。这是正确的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:48:38.243

要预分配单元格数组，您可以使用以下命令：

你可以这样做：

```
CellArray = cell(Height, Width); 
```

# android - Android 应用程序在被杀死时不会调用“onDestroy()”（ICS）

> ID：11473849
> 
> 赞同：22
> 
> 时间：2012-07-13T15:45:34.843
> 
> 标签：android, android-4.0-ice-cream-sandwich, ondestroy

我正在使用蓝牙通信（使用专有协议）开发一个 android 应用程序，我需要捕捉应用程序被杀死的时刻。

我想使用“onDestroy()”方法，但每次应用程序被杀死时都不会调用它。我注意到当我按下后退按钮时会调用它，并且只有在我从任务管理器中终止应用程序时才会调用它。

问题是：我怎样才能捕捉到应用程序被杀死之前的时刻？

这是我尝试使用的代码：

```
@Override
public void onDestroy() {
    sendMessage(msg);
    Log.d("SampleApp", "destroy");
    super.onDestroy();
}

@Override
public void finish(){

    sendMessage(msg);
    Log.d("SampleApp", "finish");
    super.finish();
} 
```

不幸的是，每次我从任务管理器关闭应用程序时，都不会调用 finish() 并且不会调用 onDestroy。

我该如何处理？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T16:11:35.850

Your application will not receive any additional callbacks if the process it terminated by external means (i.e. killed for memory reasons or the user Force Stops the application). You will have to make do with the callbacks you received when you app went into the background for your application cleanup.

`finish()` is only called by the system when the user presses the BACK button from your Activity, although it is often called directly by applications to leave an Activity and return to the previous one. This is not technically a lifecycle callback.

`onDestroy()` only gets called on an Activity as a result of a call to `finish()`, so mainly only when the user hits the BACK button. When the user hits the HOME button, the foreground Activity only goes through `onPause()` and `onStop()`.

This means that Android doesn't provide much feedback to an Activity to differentiate a user going Home versus moving to another Activity (from your app or any other); the Activity itself simply knows it's no longer in the foreground. An Android application is more a loose collection of Activities than it is a tightly integrated singular concept (like you may be used to on other platforms) so there are no real system callbacks to know when your application **as a whole** has been brought forward or moved backward.

Ultimately, I would urge you to reconsider your application architecture if it relies on the knowledge of whether ANY Activity in your application is in the foreground, but depending on your needs, there may be other ways more friendly to the framework to accomplish this. One option is to implement a bound `Service` inside of your application that every `Activity` binds to while active (i.e. between `onStart()` and `onStop()`). What this provides you is the ability to leverage the fact that a bound `Service` only lives as long as clients are bound to it, so you can monitor the `onCreate()` and `onDestroy()` methods **of the Service** to know when the current foreground task is not part of your application.

You might also find [this article](http://android-developers.blogspot.com/2010/04/multitasking-android-way.html) written by Dianne Hackborn to be interesting covering in more detail the Android architecture and how Google thinks it ought to be used.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-13T15:51:22.703

正如[此处](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)的文档中所述，不能保证永远会调用 onDestroy()。相反，当应用程序进入后台时，使用[onPause()来执行您想要执行的操作，并在 onDestroy() 中只保留您想要在应用程序被终止时运行的代码。](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)

编辑：

从您的评论来看，您似乎希望在您的应用程序进入后台时运行一些代码，但如果它因为您启动了一个意图而进入后台，则不是。AFAIK，默认情况下Android中没有处理这个的方法，但你可以使用这样的东西：

有一个布尔值，如：

```
boolean usedIntent = false; 
```

现在在使用意图之前，将布尔值设置为 true。现在在您的 onPause() 中，将意图案例的代码移动到这样的 if 块中：

```
if(usedIntent)
{
//Your code
} 
```

最后，在您的 onResume() 中，再次将布尔值设置为 false，以便它可以正确地处理您的应用程序被非意图方式移动到后台的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-16T08:39:24.900

我刚刚解决了类似的问题。

如果只是通过从最近的应用程序列表中滑动来终止应用程序时**停止服务**，那么您可以执行以下操作。

在您的清单文件中，将标志保留`stopWithTask`为`true`服务。喜欢：

```
<service
    android:name="com.myapp.MyService"
    android:stopWithTask="true" /> 
```

但是正如您所说，您要注销侦听器并停止通知等，我建议采用这种方法：

1.  在您的清单文件中，将标志保留`stopWithTask`为`false`服务。喜欢：

    ```
    <service
        android:name="com.myapp.MyService"
        android:stopWithTask="false" /> 
    ```

2.  现在在您的`MyService`服务中，覆盖方法`onTaskRemoved`。（仅当`stopWithTask`设置为时才会触发`false`）。

    ```
    public void onTaskRemoved(Intent rootIntent) {

        //unregister listeners
        //do any other cleanup if required

        //stop service
        stopSelf();  
    } 
    ```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/26842675/continue-service-even-if-application-is-cleared-from-recent-app)，其中也包含代码的其他部分。

3.  启动服务如下

> startService(new Intent(this, MyService.class));

希望这可以帮助。

# django - 如何根据 django 中的外键计数显示过滤的管理员列表

> ID：11473851
> 
> 赞同：0
> 
> 时间：2012-07-13T15:45:42.707
> 
> 标签：django, django-models, django-admin, django-queryset

我正在尝试为我的管理视图定义一个代理模型，并让它只显示具有一定数量外键值的对象。

这是我正在尝试的，但我无法过滤 yVotes：

```
class Post(models.Model):
    title = models.CharField(max_length=512)

class PostVote(models.Model):
    post = models.ForeignKey(Post)
    vote = models.CharField(max_length=1)

class VotedPost(models.Post):
    def _yVotes(self):
        return models.PostVote.objects.filter(post=self, vote='Y').count()
    yVotes = property(_yVotes)
    class Meta:
        proxy = True 

class VotedPostAdmin(PostAdmin):
    list_display = ('title', 'yVotes')
    def queryset(self, request):
        return self.model.objects.filter(yVotes__gt=0) 
```

所以我的最终结果是当你浏览到 VotedPost 的 /admin 页面时，它只会显示超过 0 个“Y”票的帖子。注释掉 VotedPostAdmin 中的查询集，yVotes 的正确值将显示在 list_display 中。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:03:22.297

到目前为止，这是我最终得到的解决方案，可以让我得到我需要的结果。如果有人有更优雅的解决方案，我将等待接受：

```
class VotedPostAdmin(PostAdmin):
    list_display = ('title', 'yVotes')
    def queryset(self, request):        
    return VotedPost.objects.all().annotate(count = Count('postvote')).order_by('-count').filter(count__gt=0).filter(postvote__vote='Y') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:56:41.100

为什么不覆盖 get_queryset 或使用管理过滤器来创建这样的显示。你正在尝试做的事情似乎过于复杂 tbh

```
class PostAdmin(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(ThisAdmin, self).queryset(request)
        # do stuff and return whatever 
```

# r - 根据给定类型计算连续值

> ID：11473853
> 
> 赞同：3
> 
> 时间：2012-07-13T15:45:44.500
> 
> 标签：r, dataframe, count, grouping

我正在使用 R 分析数据，我需要计算数据框中有多少连续值属于某个组。该组由“类型”列给出。这是我的数据示例。不会使用日期列，仅对行进行排序很有用。

```
 date type
  2009-11-12 02:01:02    1
  2009-11-12 02:08:27    1
  2009-11-12 02:26:44    1
  2009-11-12 02:27:12    1
  2009-11-12 02:28:14    1
  2009-11-12 02:30:04    1
  2009-11-12 02:35:19    5
  2009-11-12 02:40:11    2
  2009-11-12 11:35:04    6
  2009-11-12 12:32:06    4
  2009-11-12 12:32:24    6
  2009-11-12 14:08:00    5
  2009-11-12 14:16:00    1
  2009-11-12 14:17:33    1 
```

我知道我可以使用 ddply 来汇总数据。但是，我希望通过“类型”列中的更改来分解摘要。应用 ddply 会给我这样的东西：

```
> df <- data.frame(x=c(1,1,1,1,1,1,5,2,6,4,6,5,1,1))
> ddply(df,c("x"),summarize,count=length(x))
  x    count
  ========
  1     8
  2     1
  4     1
  5     2
  6     2 
```

然而，我真正想要实现的是：

```
 x    count
  ========
  1     6
  5     1
  2     1
  6     1
  4     1
  6     1
  5     1
  1     2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:47:26.513

您正在寻找的功能是`rle`：

```
df <- data.frame(x=c(1,1,1,1,1,1,5,2,6,4,6,5,1,1))
> rle(df$x)
Run Length Encoding
  lengths: int [1:8] 6 1 1 1 1 1 1 2
  values : num [1:8] 1 5 2 6 4 6 5 1 
```

# java - “错误：无法找到或加载主类 My.class”

> ID：11473854
> 
> 赞同：6
> 
> 时间：2012-07-13T15:45:44.873
> 
> 标签：java, command-prompt, cmd

我通过 cmd.exe 在 Windows 7 上使用 Java SDK 1.7。直到几个小时前，当我突然无法运行我编译的类文件时，一切都正常工作，一直在标题中显示错误。

我似乎能够编译我的 My.java 文件，但是我无法运行生成的类文件 (My.class)。我经常收到错误“错误：无法找到或加载主类 My.class”。我已经尝试过使用多个其他类文件都导致相同的问题。

如果您想知道，我的“路径”环境变量设置为“C:\Program Files (x86)\Java\jdk1.7.0_05\bin”

我尝试过重新安装、创建和设置类路径变量（不走运），甚至直接使用

`java -cp . My.class`

命令。

我已经尝试了这些帖子都无济于事，因此我发布的原因是：

[错误：无法找到或加载主类](https://stackoverflow.com/questions/7485670/error-could-not-find-or-load-main-class)

[错误：无法找到或加载主类 - 新手](https://stackoverflow.com/questions/8966266/error-could-not-find-or-load-main-class-novice)

[无法找到或加载主类](https://stackoverflow.com/questions/7647448/could-not-find-or-load-main-class)

[Java 1.7.0_03 错误：无法找到或加载主类](https://stackoverflow.com/questions/9343977/java-1-7-0-03-error-could-not-find-or-load-main-class)

如果它有任何区别，我的代码是：

```
import javax.swing.JOptionPane;

class My {
    public static void main(String[] args) {
       final double x = 3.2;
       int i = (int)x;
       double m = 0;
       if (x < 4) {
          String saySomething = JOptionPane.showInputDialog(i);
          System.out.println(saySomething);
        }
       else {
          String saySomething = JOptionPane.showInputDialog(i);
          System.out.println("Hello World");
        }
       while (m < 10) {
            System.out.print(" While Loop ");
            m++;
        };
       for (i=1; i < 10; i++) {
           System.out.println("For Loop");
        };

    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T15:50:59.433

您应该指定类名而不是要加载的类的文件。区别在于删除`.class`扩展名的简单问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:50:26.430

我会使用 IDE，你不应该遇到这些问题。编译和运行只需点击鼠标。

顺便说一句，从命令行运行您的程序

```
java -cp . My 
```

你不加`.class`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:51:10.503

将自己放在项目的目录中（假设您将源代码保存在 src 中，二进制文件保存在 bin 中，您需要在其中有 src 和 bin 目录）

```
java -cp bin My 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T16:06:47.803

我自己也面临同样的问题。发生这种情况是因为我在正确输入班级名称时疏忽了。在我的例子中，我正在输入

> java倍增器

代替

> java倍增器

# objective-c - UITableView 扩展器动画

> ID：11473856
> 
> 赞同：0
> 
> 时间：2012-07-13T15:45:51.910
> 
> 标签：objective-c, ios, xcode

我想创建一种扩展器（如.net）动画。我有一个 UITableView 填充了一个数组。当我触摸一行时，我想显示一个 UIView（或者我猜是一个 SubView），它会在行单元格下展开。

有可能实现这一目标吗？我看过大部分动画 UIView setAnimation Transition 但没有一个适合我的需要。

谢谢你的帮助！

哦，顺便说一句，我在 Mac os x 10.7.4 上运行 Xcode 4.3.3。目前的目标设备是 iPhone 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:25:55.073

我还没有看到 .net 扩展器，但您可以使用 UITableViews 实现此效果。您可以将要扩展的视图放在单独的部分中的单元格中（我们称之为 B 部分）。`numberOfRowsInSection:`然后，您将通过设置为 B 部分返回 0 来隐藏单元格。

当您想显示视图时，您可以设置一个标志或布尔值以使`numberOfRowsInSection:`B 部分返回 1，然后调用`reloadSections:withRowAnimation:`以重新加载 B 部分。请注意，如果您将行动画设置为`UITableViewRowAnimationTop`您将实现扩展器效果。

**编辑：**

要隐藏该部分中的单元格，您可以这样做：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (section == 2) {//assume 2 is section B

        if (showExpandedView)  //ShowExpandedView is a BOOL you would use to 
            return 1;          //to trigger the expanded view.
        else
            return 0;
    }      
    ...
} 
```

希望这可以帮助

# vim - 使用 vim 仅复制文件中的特定行

> ID：11473859
> 
> 赞同：3
> 
> 时间：2012-07-13T15:45:54.750
> 
> 标签：vim

有人可以告诉我如何复制特定行，例如文件中的第 10-20、22、24-30 行，以便我可以将其粘贴到另一个文件中吗？正如有人指出的那样，我看到了[这个](https://stackoverflow.com/questions/253380/how-do-i-insert-text-at-beginning-of-a-multi-line-selection-in-vi-vim/3875539#3875539)stackoverflow帖子，但是，我在哪里问了一个不同的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:03:00.923

这是一个有趣的小想法。将此粘贴到您的 ~/.vimrc 中：

```
command! -nargs=* Y :call YankList(<f-args>)
fun! YankList(...)
   let yanklist = []
   for i in a:000
      if match(i, "-") != -1
         let split = split(i, "-")
         let yanklist = yanklist + range(split[0], split[1])
      else
         let yanklist = yanklist + i
      endif
   endfor
   call setreg('"', "")
   for i in yanklist
      call setreg('"', getline(i), "al")
   endfor
endfun 
```

现在您可以指定要拉到未命名寄存器的行。这样做：

```
:Y 10-20 22 24-30 
```

并用于`p`将它们粘贴到您想要的任何位置。（包括的）

我想编辑这篇文章，即使建议更“vimmy”的方式来做这件事已经很老了。见`:help usr_10 | 131`。

你可以这样做：

```
10GV20G"ay
22G"AY
24GV30G"Ay
G"ap 
```

此外，如果这些行中的每一个都包含一些特定的模式，那么您可以通过所述模式来获取它们。例如说我想拉出所有包含单词“foo”的行，然后我可以这样做

```
:g/foo/y " 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:54:47.093

使用可视模式，或直接：

```
:10,20yank 
```

复制到新文件：

```
:new | put | 0d 
```

通常，您要么有一个标准，例如将所有包含`pattern`的行移到末尾：

```
:g/pattern/m$ 
```

复制（:copy 或 :t）

```
:g/pattern/t$ 
```

拉到一个寄存器：

```
:let @a="" | g/pattern/y A 
```

现在，您可以在任何您喜欢的地方使用它，例如`"``a``P`粘贴它。

如果您没有这样的模式可以使用，只需使用文本动作，例如`}``:``y A`将一行行附加到下一个空行以进行注册`a`等。

* * *

**编辑**PS。我想我会多解释一下***为什么***我提到`m$`移动到最后（我个人最喜欢的）：

如果您选择将行移动/复制到文件末尾 ( `m$`)，您可以立即将它们写入另一个文件。例如

```
 :$mark a
 :g/pattern/t$
 :'a,$w newfile.txt 
```

将匹配的行复制到 file `newfile.txt`。现在从源文件中删除副本：

```
 :'a,$d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-21T12:43:20.887

这是一个使用寄存器的简单解决方案。

使用您提供的场景，需要拉出第 10-20、22、24-30 行

只需用“A”拉出每个组。

> :10,20 年
> 
> :22 年
> 
> :24,30 年

此时，您已将每组行复制到“A”寄存器。现在您可以`p`像往常一样使用粘贴，或者您可以使用`"Ap`（双引号，注册信，然后`p`将您使用的那些粘贴到 A 注册。

[在此处](https://stackoverflow.com/questions/1497958/how-to-use-vim-registers)和[此处](http://usevim.com/2012/04/13/registers/)阅读有关寄存器的更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T15:55:22.083

让这两个文件都打开 - 直接从命令行调用 as`vim fileone filetwo`或打开 vim 然后`:e file`。然后，您可以使用缓冲区命令在它们之间切换，两个文件`:bn`是`:bp`等效的（下一个缓冲区，上一个缓冲区）。然后只需复制行。

这可以很容易地完成：`10G`转到第 10 行，`y10y`复制接下来的 10 行，然后`:bn`将`p`其粘贴到另一个文件中。

# salesforce - 具有用户表查找字段的 Salesforce 自定义对象

> ID：11473867
> 
> 赞同：0
> 
> 时间：2012-07-13T15:46:31.410
> 
> 标签：salesforce

我有一个自定义对象，其中包含用户表的查找字段（外键）。我在我的应用程序中添加了一个“自定义对象”选项卡来列出这些项目。

我想我想要的是“主细节”关系提供的功能。遗憾的是，当从自定义对象引用用户模型时，这不可用。

当给定的登录用户查看此选项卡时，如果他们有权访问此查找字段中引用的用户，我希望他们查看任何项目。我怀疑这个列表视图将显示所有属于登录用户（即创建者）的项目。由于开发版中可用的用户许可证有限，因此很难测试。

对于登录用户，无论是谁创建的，显示正确项目的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:01:06.290

为什么不直接使用记录所有者，而不是为用户对象创建新的查找字段？
记录所有者不必是创建记录的人，然后您可以为“我的对象__c”创建一个仅显示登录用户拥有的项目的视图。

如果这没有帮助，您能否详细说明您的要求？

# wordpress - wordpress wp 查询每页默认帖子

> ID：11473873
> 
> 赞同：3
> 
> 时间：2012-07-13T15:46:45.907
> 
> 标签：wordpress, wordpress-theming

这是代码：

```
<?php if ( have_posts() ) : ?>

                <?php
                    $temp = $wp_query;
                    $wp_query= null;
                    $wp_query = new WP_Query();
                    $wp_query->query('showposts=5'.'&paged='.$paged);
                    while ($wp_query->have_posts()) : $wp_query- >the_post();
                ?>

                    <?php get_template_part( 'content', get_post_format() ); ?>

                <?php endwhile; ?>

                <?php higher_content_nav( 'nav-below' ); ?>

        <?php $wp_query = null; $wp_query = $temp;?>

        <?php endif; ?> 
```

如何每页显示帖子不是 5 个，而是默认显示？我的意思是我们可以在阅读设置的后端设置的帖子，博客页面最多显示 - 帖子数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-26T16:40:55.423

最安全的方法是调用`get_option`，它直接从数据库中获取值：

```
$showposts = get_option('posts_per_page');
$wp_query->query('showposts='.$showposts.'&paged='.$paged); 
```

`$numposts`不保证设置全局变量 like 。

为了将来参考，您通常可以通过在 WP Admin 中`get_option`查找`name`设置的属性来确定要传递的内容。`<input>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:47:03.293

```
<?php query_posts( 'posts_per_page=5' ); ?>

<?php if ( have_posts() ) : ?>
    <?php while ( have_posts() ) : the_post(); ?>
        <?php get_template_part( 'content', get_post_format() ); ?>
    <?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:06:31.990

您正在使用[`WP_Query()`](http://codex.wordpress.org/Class_Reference/WP_Query)，它对于每页的帖子数没有任何默认值。

但是，您应该注意在您的代码`showposts`中已替换为：`posts_per_page`

```
$wp_query->query('showposts=5'.'&paged='.$paged); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T21:00:06.460

这是解决方案：

```
global $numposts;
$wp_query->query( 'showposts='.$numposts.'&paged='.$paged ); 
```

# c# - 如何在我的模型中获取对象类型的值？

> ID：11473876
> 
> 赞同：0
> 
> 时间：2012-07-13T15:47:05.860
> 
> 标签：c#, asp.net-mvc, object, model, casting

我有一个模型，其类型`object`为`myobject`：

```
public class myModel
{
    public long id {get;set;}
    public object myobject {get;set;}
} 
```

在我的视图中，我使用模板`EditorFor`来编辑：`myobject`

```
@model myModel
// form (code omitted)
@Html.EditorFor(model => model.myobject)

<button type="submit">Save</button> 
```

这是模板：

```
@model myObject

@Html.EditorFor(model => model.myname) 
```

如何获取`myModel.myobject`控制器中的值？我尝试投射，但出现此错误：

> 无法将“System.Object”类型的对象转换为“MyProject.Models.myobject”类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:59:26.380

模型中的属性是类型`object`：

```
public object myobject { get; set; } 
```

您的 EditorTemplate 是类型`myObject`- 不是类型`object`：

```
@model myObject <-- This little thing is responsible telling MVC what editor template to use with which type.

@Html.EditorFor(model => model.myname) 
```

这就是为什么你没有得到你正在寻找的实现。

作为替代方案，您可以使用**命名**的EditorTemplate，而不是让 MVC 根据类型推断您想要的模板。

# c - 使用双指针方法在链表中查找中间元素

> ID：11473879
> 
> 赞同：3
> 
> 时间：2012-07-13T15:47:13.277
> 
> 标签：c

我编写了以下函数，它返回链表的中间元素，它使用双指针方法

```
struct node
{
int data;
struct node *next;
}*start;

void middleelement()
{
struct node *x=start,*y=start;
int n=0;

if(start==NULL)
{
    printf("\nThere are no elments in the list");
}

else
{
    while((x->next)!=NULL)
    {
        x=x->next->next;
        y=y->next;
        n++;
    }

    printf("\nMiddle element is %d",y->data);
}
} 
```

但是，每当我运行这些函数时，**Windows 资源管理器就会停止工作** 代码中的缺陷是什么？有没有比这更好的算法来找到中间元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:50:22.463

如果条目的数量是奇数，你`x`最终会是`NULL`，所以当下一个循环迭代引用它时，你的程序将会崩溃。您应该修改您的条件以解决此问题：

```
while(x && x->next) {
    ...
} 
```

比较`NULL`在 C 中是可选的，因此您可以跳过`!= NULL`来缩短条件。

当然，`start`通过全局变量传递参数是非正统的，至少可以这么说。将它作为常规函数参数传递会更好。

# iphone - Xcode：项目文件名（.xcodeproj）的产品名称或代号？

> ID：11473880
> 
> 赞同：-1
> 
> 时间：2012-07-13T15:47:21.957
> 
> 标签：iphone, xcode, macos, project-files

我现在正在更改 Xcode 的项目文件名，因为我的**产品**名称（应用程序名称）已更改。
由于更改项目文件名，我遇到了一些问题。（*这不是这次的问题。我也知道我可以通过`bundle display name`设置更改应用程序名称）

我想我应该使用代号（而不是产品名称）作为项目文件名。
如果我这样做了，我不需要永远更改项目名称。

如果我对 Xcode 项目文件使用代号，我会有什么麻烦吗？
（例如，苹果会拒绝该应用程序吗？）

项目文件、产品名称或代号常用哪个？
你的项目文件呢？

例如，Windows Vista 的代号是`Longhorn`.
我猜 Windows Vista 的项目文件名不是 vista 而是 Longhorn。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:02:55.937

将您的 xcode 项目命名为与应用程序不同的名称没有问题。显示名称对 Apple 和您的用户来说很重要。

问题的第二部分不适合 Stack Overflow 回答，programmers.stackexchange 可能更适合。

# c++ - LoadLibraryEx 函数

> ID：11473890
> 
> 赞同：0
> 
> 时间：2012-07-13T15:48:12.057
> 
> 标签：c++

我正在尝试使用 LoadLibraryEx 函数，但是它每次都会失败，并且不会给我任何适当的错误来知道出了什么问题。这是我的代码：

```
 HMODULE h;
        h = LoadLibraryEx("C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Include\\LMJoin.h", NULL, 0x00000008);
        if(h!=NULL)
        {
            if (::GetModuleHandleExW(0, L"LMJoin.h", &h))
            {
                typedef BOOL (WINAPI *PGET_DOMAIN_INFO)(wchar_t const**, wchar_t**, _NETSETUP_JOIN_STATUS*);
                PGET_DOMAIN_INFO getDomainInfo = (PGET_DOMAIN_INFO)GetProcAddress(h, "NetGetJoinInformation");
                if (NULL != getDomainInfo)
                {
                    nas = (getDomainInfo)(NULL, &lpNameBuffer, &BufferType);
                }
            }
            FreeLibrary(h);
        }
        else
        {
            TRACE_ERR("LMJoin.h Library could not be loaded\n",GetLastError());
        } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T15:50:56.940

`LoadLibraryEx`用于加载 DLL 文件，而不是头文件。[NetGetJoinInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370423%28v=vs.85%29.aspx)在`Netapi32.dll`DLL 中。它在`Lmjoin.h (include Lm.h)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:51:58.013

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include\LMJoin.h 是头文件而不是库。

# android - ViewAnimator 导致 NullPointerException

> ID：11473893
> 
> 赞同：1
> 
> 时间：2012-07-13T15:48:24.390
> 
> 标签：android, nullpointerexception, viewanimator

嘿，我正在尝试使用 ViewAnimator，我可能缺少一些基本的东西。这就是我所拥有的：

```
 va = new ViewAnimator(this);
    va.setInAnimation(inFromLeftAnimation());
    va.setOutAnimation(outToRightAnimation());

    RelativeLayout stage = (RelativeLayout)findViewById(R.layout.american_stage);
    va.addView(stage,0);

    setContentView(va); 
```

inFromLeftAnimation 和 outToRightAnimation 只处理动画并且完美运行。当然，该文件确实存在......我得到这个日志：

```
 07-13 15:45:14.515: E/AndroidRuntime(564): java.lang.RuntimeException: Unable to start activity ComponentInfo{shibby.webhunt/shibby.webhunt.ArcadeModeActivity}: java.lang.NullPointerException
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.os.Looper.loop(Looper.java:123)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-13 15:45:14.515: E/AndroidRuntime(564):  at java.lang.reflect.Method.invokeNative(Native Method)
07-13 15:45:14.515: E/AndroidRuntime(564):  at java.lang.reflect.Method.invoke(Method.java:521)
07-13 15:45:14.515: E/AndroidRuntime(564):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-13 15:45:14.515: E/AndroidRuntime(564):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-13 15:45:14.515: E/AndroidRuntime(564):  at dalvik.system.NativeStart.main(Native Method)
07-13 15:45:14.515: E/AndroidRuntime(564): Caused by: java.lang.NullPointerException
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.view.ViewGroup.addView(ViewGroup.java:1815)
07-13 15:45:14.515: E/AndroidRuntime(564):  at shibby.webhunt.ArcadeModeActivity.onCreate(ArcadeModeActivity.java:25)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我不知道为什么。是否无法将 XML 文件用作视图？我必须自己构建视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:00:53.997

```
07-13 15:45:14.515: E/AndroidRuntime(564): Caused by: java.lang.NullPointerException
07-13 15:45:14.515: E/AndroidRuntime(564):  at android.view.ViewGroup.addView(ViewGroup.java:1815) 
```

看起来您正在尝试添加一个`RelativeLayout stage`为 null 的 View ()，我不相信您可以使用 findViewById() 加载布局：

```
findViewById(R.layout.american_stage); 
```

如果您尝试在 american_stage.xml 中打开不可见的布局，请使用 LayoutInflater：

```
LayoutInflater layoutInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);  
stage = layoutInflater.inflate(R.layout.american_stage, null); 
```

**或者**，如果您尝试加载已经可见的 RelativeLayout：

1）给RelativeLayout id`american_stage`

```
<RelativeLayout 
    android:id="@+id/american_stage"
    ... 
```

2）并使用：

```
findViewById(R.id.american_stage); 
```

# build - 具有多个依赖项的 TFS 2010 解决方案

> ID：11473895
> 
> 赞同：0
> 
> 时间：2012-07-13T15:48:37.853
> 
> 标签：build, tfs, tfsbuild

我是在 TFS 2010 上构建的新手。

我有 4 个 C# 解决方案。其中一个解决方案依赖于其他 3 个“帮助解决方案”中的每一个生成的程序集。

我想创建一个构建定义，它将构建我的 3 个辅助解决方案，然后构建顶级解决方案。

在构建定义对话框中，我尝试将 4 个解决方案文件中的每一个添加到工作区选项卡，构建代理文件夹为 $(SourceDir) - 但我收到错误对话框“TF215040：路径 $(SourceDir) 只能是在给定的工作空间中映射一次”。因此，我将帮助解决方案的映射更改为它们各自的构建定义使用的构建文件夹。

在 Process 选项卡的 Items to Build 属性下，我为 4 个解决方案中的每一个添加了解决方案文件，最后列出了父解决方案。

当我将顶级构建定义排队时，我收到错误消息：“路径 C:\Builds\3\x.Int.Common\x.Int.Common\Sources 已映射到工作区 xBLD01。”

注意：当我运行“tf.exe workspaces /owner:*”时，我注意到我的工作区被多次列出，拥有不同的所有者，但计算机名称也相同。我猜这是因为团队中有 3 个使用相同的 VM 映像——他们没有连接到域。也许这是问题的原因？

有人可以提出解决方案吗？

谢谢

抢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:04:25.210

只需在工作区映射中映射包含其下所有 4 个解决方案的根文件夹即可。例如，如果您的文件夹结构如下所示：

> C:\MyProject\Solution1\1.sln
> 
> C:\MyProject\Solution2\2.sln
> 
> ...

只需映射 C:\MyProject\ -> $(SourceDir)

如果您的构建服务器上的工作区映射搞砸了，您可以下载[TFS SideKicks](http://www.attrice.info/cm/tfs/)工具以删除构建服务器上的所有工作区，并且 TFS 构建将在您下次运行时重新创建正确的工作区。

# backbone.js - 如果您知道模型，请查找 Backbone.js 视图？

> ID：11473898
> 
> 赞同：11
> 
> 时间：2012-07-13T15:48:41.150
> 
> 标签：backbone.js

给定一个使用 Backbone.js 将 Collection 绑定到 View ( `RowsView`, 创建一个`<ul>`) 的页面，该 View ( , 创建一个 ) 为集合中的每个模型创建子视图 ( `RowView`, 创建`<li>`)，我在为这些模型设置内联编辑时遇到问题集合。

我在视图上创建了一个用文本框替换内容的`edit()`方法，如果用户在该文本框中按下，我想触发列表中下一个视图的方法。`RowView``li``tab``edit()`

我可以得到集合中下一个模型的模型：

```
// within a RowView 'keydown' event handler
var myIndex = this.model.collection.indexOf(this.model);
var nextModel = this.model.collection.at(myIndex+1); 
```

但问题是，如何找到附加到该模型的视图。父`RowsView`视图不保留对所有子视图的引用；它的`render()`方法就是：

```
this.$el.html(''); // Clear
this.model.each(function (model) {
    this.$el.append(new RowView({ model:model} ).render().el);
}, this); 
```

我是否需要重写它以保留一个单独的指针数组，指向`RowView`它下面的所有 s？还是有一种聪明的方法可以找到附加了已知模型的视图？

这是整个问题的 jsFiddle：http: [//jsfiddle.net/midnightlightning/G4NeJ/](http://jsfiddle.net/midnightlightning/G4NeJ/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T15:55:58.463

在模型中存储对视图的引用并不优雅，但是您可以将视图与带有事件的模型链接起来，这样做：

```
// within a RowView 'keydown' event handler
var myIndex = this.model.collection.indexOf(this.model);
var nextModel = this.model.collection.at(myIndex+1);
nextModel.trigger('prepareEdit'); 
```

在 RowView 中侦听事件 prepareEdit 并在该侦听器中调用 edit()，如下所示：

```
this.model.on('prepareEdit', this.edit); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:51:52.633

我会说你`RowsView`应该跟踪它的 component `RowView`s。个体`RowView`s 确实是 the 的一部分，`RowsView`并且视图应该跟踪其部分是有道理的。

所以，你`RowsView`会有这样的`render`方法：

```
render: function() {
    this.child_views = this.collection.map(function(m) {
        var v = new RowView({ model: m });
        this.$el.append(v.render().el);
        return v;
    }, this);
    return this;
} 
```

然后，您只需要一种将 a 转换`Tab`为`this.child_views`.

* * *

一种方法是使用事件，Backbone 视图`Backbone.Events`混合在一起，因此视图可以触发自己的事件，而其他事物可以监听这些事件。在你的`RowView`你可以有这个：

```
events: {
    'keydown input': 'tab_next'
},
tab_next: function(e) {
    if(e.keyCode != 9)
        return true;
    this.trigger('tab-next', this);
    return false;
} 
```

你的`RowsView`意愿和你可以有这样的排序：`v.on('tab-next', this.edit_next);``this.collection.map``edit_next`

```
edit_next: function(v) {
    var i = this.collection.indexOf(v.model) + 1;
    if(i >= this.collection.length)
        i = 0;
    this.child_views[i].enter_edit_mode(); // This method enables the <input>
} 
```

演示：http: [//jsfiddle.net/ambiguous/WeCRW/](http://jsfiddle.net/ambiguous/WeCRW/)

对此的一个变体是添加`RowsView`对`RowView`s 的引用，然后`tab_next`可以直接调用`this.parent_view.edit_next()`.

* * *

另一种选择是将`keydown`处理程序放在`RowsView`. 这在 and 之间增加了一些耦合`RowView`，`RowsView`但在这种情况下这可能不是一个大问题，但它比事件解决方案有点难看：

```
var RowsView = Backbone.View.extend({
    //...
    events: {
        'keydown input': 'tab_next'
    },
    render: function() {
        this.child_views = this.collection.map(function(m, i) {
            var v = new RowView({ model: m });
            this.$el.append(v.render().el);
            v.$el.data('model-index', i); // You could look at the siblings instead...
            return v;
        }, this);
        return this;
    },
    tab_next: function(e) {
        if(e.keyCode != 9)
            return true;
        var i = $(e.target).closest('li').data('model-index') + 1;
        if(i >= this.collection.length)
            i = 0;
        this.child_views[i].enter_edit_mode();
        return false;
    }
}); 
```

演示：http: [//jsfiddle.net/ambiguous/ZnxZv/](http://jsfiddle.net/ambiguous/ZnxZv/)

# java - 如何使用来自后台活动的事件通知前台活动？

> ID：11473901
> 
> 赞同：1
> 
> 时间：2012-07-13T15:48:46.037
> 
> 标签：java, android, android-activity

我有正在收听 Gps Location 的后台活动。在它上面我有地图活动。
当活动已经开始后在后台发生事件时，如何通知地图活动？

*   我想这种问题已经得到了回答，但是我尝试用许多关键词进行谷歌搜索，但没有成功，如果重复，请见谅。我也会感谢对其他答案的引用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:16:12.450

您可能不应该使用活动来执行后台任务，它的效率极低。我建议使用[Service](http://developer.android.com/reference/android/app/Service.html)并与[Intents](http://developer.android.com/reference/android/content/Intent.html)和[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)进行通信。服务旨在执行这些类型的操作。

您还可以使用[AsyncTask并使用](http://developer.android.com/reference/android/os/AsyncTask.html)[Handler](http://developer.android.com/reference/android/os/Handler.html)与主线程进行通信。

（所有链接都指向 Android 文档供您参考）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:58:10.193

您可以使用广播在 an `Intent`（这是 Android 平台中组件之间通信的主要单元）中传递您的数据。查看[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)的文档，它在拼写方面做得很好。

另外，值得注意的是，如果您的发送者和活动在同一个进程中，您可以使用[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)来避免 IPC 开销。

# facebook - 喜欢按钮是否适用于测试用户？

> ID：11473906
> 
> 赞同：1
> 
> 时间：2012-07-13T15:49:11.460
> 
> 标签：facebook, testing, facebook-like

（这可能是以前未解决的帖子的简化版本：[如何让我的 OpenGraph 对象被正确“喜欢”？](http://facebook.stackoverflow.com/questions/11438137/how-do-i-get-my-opengraph-objects-to-be-liked-properly)），但是，无论如何：

*   我在我的网站上设置了一个带有 OG 元标记的页面，以将该页面标识为 video.movi​​e 类型。页面 lints 正确。

*   测试用户点击赞按钮。

*   该按钮的行为正常：它变暗，显示带有复选框的“like”，并增加了 like 计数器（在这种情况下从 0 到 1）。

*   用户的 FB 个人资料页面显示“Joe 喜欢此链接”条目。

但：

*   用户的朋友都没有在他们的提要中获得类似的条目。

*   如果我刷新包含点赞按钮的页面，该按钮会恢复到其原始状态：“点赞”带有一个小的 Facebook 徽标，点赞计数为 0。

*   运行[https://graph.facebook.com/fql?q=SELECT](https://graph.facebook.com/fql?q=SELECT) share_count, like_count, comment_count, total_count FROM link_stat WHERE url="http://the-page" 为所有内容返回零。

*   通过 linter 运行页面在 Graph API 表示中没有显示喜欢（在任何这些步骤中）。

所以这绝对不像它应该的那样工作。有什么建议吗？这是因为我对测试用户这样做吗？测试用户的喜好是否有任何理由不应该随着时间的推移而持续存在？或者，当网站与真人一起上线时，这一切会神奇地开始起作用吗？

# sql - 访问 sys.dm_db_index_usage_stats 的权限

> ID：11473907
> 
> 赞同：7
> 
> 时间：2012-07-13T15:49:11.847
> 
> 标签：sql, sql-server-2008

所以我有一个内部使用的网站，它跟踪员工的一堆统计数据。其中之一是他们是否缺少任何报告。由于尚无报告的项目列表仅每两天更新一次，并且这些报告有 3 天的宽限期，因此我将项目记录为缺少报告的日期 (releaseDt) 与上次更新数据库的时间 (@lastupdate)。这样，如果报告数据库尚未更新但报告已完成，则网站不会因为缺少报告而指责某人。

SQL 代码适用于管理员级别的权限，但出于显而易见的原因，我不让 ASP.NET 帐户具有服务器管理员级别。

我已经设置了一个 ASP.NET C# 代码用于登录的 SQL 帐户，其他一切的权限都很好。（仅对其使用的特定数据库的读取访问权限。）我不知道要授予它访问权限的内容，以便有权读取此特定的动态管理视图。

使用 Management Studio 或使用`GRANT`SQL 语句的建议将不胜感激。

这似乎有关于相关视图的相关信息：

[sys.dm_db_index_usage_stats (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188755.aspx)

```
DECLARE @lastupdate datetime
     SELECT @lastupdate = last_user_update from sys.dm_db_index_usage_stats
     WHERE OBJECT_ID = OBJECT_ID('MissingReport')

SELECT 
    COALESCE(Creator, 'Total') AS 'Creator',
    COUNT(*) AS Number, 
    '$' + CONVERT(varchar(32), SUM(Cost), 1) AS 'Cost' 
    FROM MissingReport 
    WHERE NOT( 
        [bunch of conditions that make something exempt from needing a report]
        OR
        (
            DATEDIFF(day,ReleaseDt,@lastupdate) <= 3
        )
    )
    GROUP BY Creator WITH ROLLUP 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T15:58:12.897

您不能授予`SELECT`DMV，因为服务器范围的 DMV 的策略阻止了这一点：

```
GRANT SELECT ON sys.dm_db_index_usage_stats TO peon; 
```

结果是：

> Msg 4629, Level 16, State 10, Line 1
> 只有当当前数据库是主数据库时，才能授予对服务器范围目录视图或系统存储过程或扩展存储过程的权限。

您引用的[BOL 页面](http://msdn.microsoft.com/en-us/library/ms188755.aspx)告诉您需要授予`VIEW SERVER STATE`. 您可以将此应用于 master 的登录：

```
USE master;
GO
GRANT VIEW SERVER STATE TO peon;
-- if it's a Windows login then:
GRANT VIEW SERVER STATE TO [Domain\peon]; 
```

但是没有办法为每个数据库执行此操作。并不是说您应该那么担心，因为即使有人知道如何使用 ASP.NET 帐户凭据侵入您的服务器，他们所能做的就是*查看*服务器状态，他们无法更改任何内容。

# c# - 棋盘表示 - 引擎

> ID：11473909
> 
> 赞同：3
> 
> 时间：2012-07-13T15:49:18.217
> 
> 标签：c#, performance, chess, bitboard

我正在用 C# 开发自己的国际象棋引擎。实际上，我正在搜索我的移动生成器上的错误，但我意识到我的实际国际象棋系统太慢了（perft(6) 甚至 21 分钟）。这是我的[Github 存储库](https://github.com/crybot/Napoleon-old/tree/master/BitBoard%20based%20Chess)。

我使用了一个简单的片段层次结构和一个实现片段列表的板类。由于这个项目的面向对象的性质，我选择不使用多维矩阵来表示棋盘，因为每个棋子在其中都有自己的位置。问题是要从棋盘上得到一个棋子，知道它的位置，它需要 O(n)，其中 n 是棋盘上当前棋子的数量。

在移动生成器中，假设一个空棋盘，我得到所有可能的移动，然后我用一个静态类检查它们（因为一块不应该关心棋盘状态）。我访问了一些网站，包括国际象棋编程 Wiki。我看到有很多类型的板表示，但在我的实际状态中，我不知道哪个是最好的（性能和简单性）。我想这就是全部，我希望你能帮助我:)

我欢迎任何关于我的项目的建议；）谢谢大家。

这是我的董事会课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Chess_Engine___NOGUI
{
    class Board
    {
        public const byte BoardSize = 8;
        private Game game;
        private List<Piece> pieceList = new List<Piece>();
        private List<Piece> whitePieceList = new List<Piece>();
        private List<Piece> blackPieceList = new List<Piece>();

        public Board(Game game)
        {
            this.game = game;
        }

        public void AddPiece(Piece piece)
        {
            pieceList.Add(piece);
            switch (piece.Color)
            {
                case PieceColor.Black:
                    blackPieceList.Add(piece);
                    break;
                case PieceColor.White:
                    whitePieceList.Add(piece);
                    break;
            }
        }
        public void RemovePiece(Piece piece)
        {
            pieceList.Remove(piece);
            switch (piece.Color)
            {
                case PieceColor.Black:
                    blackPieceList.Remove(piece);
                    break;
                case PieceColor.White:
                    whitePieceList.Remove(piece);
                    break;
            }
        }

        public Square GetKingPosition(PieceColor color)
        {
            if (color == PieceColor.White)
                foreach (Piece piece in whitePieceList)
                {
                    if (piece.Type == PieceType.King)
                        return piece.square;
                }
            else
                foreach (Piece piece in blackPieceList)
                {
                    if (piece.Type == PieceType.King)
                        return piece.square;
                }

            throw new Exception("il re deve essere sempre presente");
        }
        public Piece GetPiece(Square square, PieceColor color = PieceColor.None)
        {
            switch (color)
            {
                case PieceColor.White:
                    {
                        foreach (Piece piece in whitePieceList)
                        {
                            if (piece.square == square)
                                return piece;
                        }
                        return new NullPiece(square);
                    }
                case PieceColor.Black:
                    {
                        foreach (Piece piece in blackPieceList)
                        {
                            if (piece.square == square)
                                return piece;
                        }
                        return new NullPiece(square);
                    }
                default:
                    {
                        foreach (Piece piece in pieceList)
                        {
                            if (piece.square == square)
                                return piece;
                        }
                        return new NullPiece(square);
                    }
            }
        }
        public List<Piece> GetPieceList(PieceColor color)
        {
            switch (color)
            {
                case PieceColor.Black:
                    return blackPieceList;
                case PieceColor.White:
                    return whitePieceList;
                default:
                    return pieceList;
            }
        }
        public int GetNumberOfPieces(PieceType type, PieceColor color)
        {
            int num = 0;
            foreach (Piece piece in GetPieceList(color))
            {
                if (piece.Type == type)
                    num++;
            }

            return num;
        }
        public bool IsEmpty(Square square)
        {
            if ((GetPiece(square)) is NullPiece)
            {
                return true;
            }
            return false;
        }
        public void Equip()
        {
            this.Clear();

            PieceFactory pieceFactory = new PieceFactory();
            /*PEDONI*/
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(0, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(1, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(2, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(3, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(4, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(5, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(6, 1)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.White, new Square(7, 1)));
            //
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(0, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(1, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(2, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(3, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(4, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(5, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(6, 6)));
            AddPiece(pieceFactory.Create(PieceType.Pawn, PieceColor.Black, new Square(7, 6)));

            /*TORRI*/
            AddPiece(pieceFactory.Create(PieceType.Rook, PieceColor.White, new Square(0, 0)));
            AddPiece(pieceFactory.Create(PieceType.Rook, PieceColor.White, new Square(7, 0)));
            //
            AddPiece(pieceFactory.Create(PieceType.Rook, PieceColor.Black, new Square(0, 7)));
            AddPiece(pieceFactory.Create(PieceType.Rook, PieceColor.Black, new Square(7, 7)));

            /*CAVALLI*/
            AddPiece(pieceFactory.Create(PieceType.Knight, PieceColor.White, new Square(1, 0)));
            AddPiece(pieceFactory.Create(PieceType.Knight, PieceColor.White, new Square(6, 0)));
            //
            AddPiece(pieceFactory.Create(PieceType.Knight, PieceColor.Black, new Square(1, 7)));
            AddPiece(pieceFactory.Create(PieceType.Knight, PieceColor.Black, new Square(6, 7)));

            /*ALFIERI*/
            AddPiece(pieceFactory.Create(PieceType.Bishop, PieceColor.White, new Square(2, 0)));
            AddPiece(pieceFactory.Create(PieceType.Bishop, PieceColor.White, new Square(5, 0)));
            //
            AddPiece(pieceFactory.Create(PieceType.Bishop, PieceColor.Black, new Square(2, 7)));
            AddPiece(pieceFactory.Create(PieceType.Bishop, PieceColor.Black, new Square(5, 7)));

            /*RE*/
            AddPiece(pieceFactory.Create(PieceType.King, PieceColor.White, new Square(4, 0)));
            //
            AddPiece(pieceFactory.Create(PieceType.King, PieceColor.Black, new Square(4, 7)));

            /*REGINE*/
            AddPiece(pieceFactory.Create(PieceType.Queen, PieceColor.White, new Square(3, 0)));
            //
            AddPiece(pieceFactory.Create(PieceType.Queen, PieceColor.Black, new Square(3, 7)));
        }
        public void Clear()
        {
            pieceList.Clear();
            whitePieceList.Clear();
            blackPieceList.Clear();
        }
        public void LoadGame(FenString fen)
        {
            this.Clear();

            foreach (Piece piece in fen.PiecePlacement)
            {
                AddPiece(piece);
            }
        }
        public void MakeMove(Move move)
        {
            if (move.IsCastling)
            {
                move.RookMoved.Move(move.RookPosition);
                if (move.IsShortCastling)
                    game.GetPlayer(move.SideMove).CanShortCastle = false;
                else
                    game.GetPlayer(move.SideMove).CanLongCastle = false;
            }
            else
            {
                if (move.HasCaptured)
                {
                    RemovePiece(move.PieceCaptured);
                }
                if (move.HasPromoted)
                {
                    RemovePiece(move.PieceMoved);
                    AddPiece(PieceFactory.CreatePiece(move.PiecePromoted, move.SideMove, move.ToSquare));
                }
            }

            // En passant target square updating

            game.EnPassantSquareStack.Push(game.EnPassantSquare); // save the current target square for the unmake-move method

            if (move.IsDoublePawnPush)
            {
                Square targetSquare;
                if (move.SideMove == PieceColor.White)
                    targetSquare = new Square(move.ToSquare.X, 2);
                else
                    targetSquare = new Square(move.ToSquare.X, 5);

                game.EnPassantSquare = targetSquare;
            }

            else if (game.EnPassantSquare != null)
            {
                game.EnPassantSquare = null;
            }

            move.PieceMoved.Move(move.ToSquare); // move piece
        }
        public void CancelMove(Move move)
        {
            if (move.IsCastling)
            {
                move.PieceMoved.Move(move.FromSquare);
                move.RookMoved.Move(move.RookMoved.startingSquare);
                if (move.IsShortCastling)
                    game.GetPlayer(move.SideMove).CanShortCastle = true;
                else
                    game.GetPlayer(move.SideMove).CanLongCastle = true;
            }
            else
            {
                if (move.HasCaptured)
                {
                    AddPiece(move.PieceCaptured);
                }
                if (move.HasPromoted)
                {
                    RemovePiece(GetPiece(move.ToSquare));
                    AddPiece(move.PieceMoved);
                }
            }

            // En passant target square updating

            game.EnPassantSquare = game.EnPassantSquareStack.Pop();

            move.PieceMoved.Move(move.FromSquare);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:57:00.277

基于数组的表示通常有一个包含每个块及其正方形的块列表，因此您不必遍历整个电路板即可找到一块（编辑：查看您的代码，您似乎已经这样做了？）。比董事会代表更重要的是您如何实施董事会运作。例如，测试国王是否在被检查，不需要生成完整的移动列表；你只需要从国王向外扫描敌人的棋子。

在查看了您的代码之后，您似乎使用了合法的移动生成器，并且您制作/取消制作（也许还有其他东西？）来检查合法性。后者不是必需的，具体取决于您是否开始检查以及是否有任何部分被固定。

我想你知道位板是当今的标准，因为它可以按组执行许多分段操作，并在 64 位平台上得到很好的提升。我在自己的引擎中从邮箱数组方法切换到位板，目前 perft(6) 是 3 秒。最初大约是 30 秒。Bitboards 使评估变得更加简单，因此也需要考虑这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T16:00:41.337

首先，感谢您提供代码的链接，因为这使回答更容易。

正如您所提到的，您遇到的问题是您遍历所有片段以找到一个片段，这非常慢。

如果您想让实现与您已有的实现类似并且在面向对象的级别上，我建议您使用`Dictionary`对象来存储这些片段。键可以是棋盘上的位置（即 A4），值是棋子本身。在这种情况下，这`Dictionary`是比 更好的选择，`List`因为您可以进行查找，而不必遍历所有部分。

同样在您的`GetNumberOfPieces`方法中，即使在您当前的实现中，您也应该使用该`List.Count`属性。

但宗立的答案可能更适合专门用于国际象棋引擎。

**编辑**

我又看了你的代码，发现你在传递`Square`对象，所以也许你可以将它实现`Dictionary`为 Square, Piece 的字典，而不是坐标，一块。

# objective-c - 关联 UIButton

> ID：11473910
> 
> 赞同：0
> 
> 时间：2012-07-13T15:49:19.903
> 
> 标签：objective-c, ios, uibutton

我正在构建一种带有许多 uibuttons 的检查表，我正在使用代码（而不是 IB）添加它。I would like to have it that when certain buttons are selected, other buttons cannot be selected. 例如，我有一排按钮，分别是 LOW、MEDIUM、HIGH。我不希望用户可以选择 2 个选项（如果他们想更改他们的选择，那很好，一次只能选择 2 个）。

我知道我的方法的一般结构，这是我到目前为止所拥有的：

`-(void)addButtons`这是我将用按钮填充视图的地方（这里只显示一个按钮，但有很多）：

```
-(void)addButtons{

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self action:@selector(clicked:) forControlEvents:UIControlEventTouchUpInside];
    [button setTitle:@"" forState:UIControlStateNormal];
    button.frame = CGRectMake(209, 54, 127, 18);
    button.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [imageView addSubview:button];

} 
```

* * *

`-(void)clicked:(UIButton *)sender` 这是单击按钮时将调用的方法。我希望它作为参数提交。然后该按钮将更改其外观以表示它已被单击。我让它透明的原因是因为我在图像顶部有按钮，您需要查看它们下面的内容。我也不认为`sender.backgroundColor = [UIColor redColor];`会像我想要的那样工作，但这不是重点。

```
-(void)clicked:(UIButton *)sender{

    sender.alpha = 0.5;
    sender.backgroundColor = [UIColor redColor];

    [self setRelatedButtons:sender];

} 
```

* * *

`-(void)setRelatedButtons'` 这是我将确保每个“集合”只选择一个按钮的方法

```
-(void)setRelatedButtons:(UIButton *)sender{

    //since I know this button is clicked
    //set related buttons to unclicked

} 
```

* * *

**总结一切**，这就是我想知道的：

1）如何设置按钮的外观以保持选中状态？

2）我应该将什么传递给我的`clicked`和`setRelatedButtons`方法来识别当前按钮？现在我有按钮本身，但有更好的东西吗？

3) 关联某些按钮的最佳方式是什么？我可以为每组按钮使用一个数组，但我希望有更好的方法。我可以使用一个`typedef`吗？（以前从未使用过其中之一）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:09:59.870

要将按钮的外观设置为保持选中状态，您可以做很多不同的事情。您可以更改标签、背景颜色、文本颜色等。[这](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)可能对此有所帮助。只是让您知道，如果您想将其提交到应用商店，您不能使用实际选择状态来显示按钮已被选中（所以不要这样做`button.selected = YES`）。苹果明确禁止这样做。

如果您想取消选择所有其他按钮，只需在单击一个按钮时将所有按钮的外观设置为未选中。完成此操作后，将发送消息的按钮设置为选中（使用您从上面决定的任何内容）。将您的按钮放在一个数组中，这样您就可以创建一个 for 循环来访问所有按钮（`NSMutableArray`将有助于`addObject`）。

要回答您的第二个问题，传递`UIButton *`本身很好（您实际上只是传递一个指针）。这样做的好处是能够做一些事情，`[button doSomething]`而不必在数组或其他数据类型中找到它。

我不太确定您的第三个问题在问什么，但是`UIButton`如果您愿意，您可以进行子类化。每组按钮的数组实际上听起来是个好主意。你甚至可以做一个数组数组。或者，您可以创建一个自定义持有者类，其中包含数组，并使用返回所需内容的方法。

如果您使用数组，您可以将一个整数传递给您的`addButton`方法，告诉该方法将按钮放入哪个数组（或复杂数组的一部分）。

另外，尽量让你的问题集中在一件事上；如果人们必须回答多个问题，他们就不太可能回答您的问题。您可以根据需要提出任意数量的问题，只需分别提出即可。

# eclipse - FigureCanvas 的滚动距离

> ID：11473919
> 
> 赞同：0
> 
> 时间：2012-07-13T15:49:54.107
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-gef, draw2d

我正在做一个使用 GEF 绘制图形的 eclipse 插件。我正在使用 FigureCanvas 来显示图表。当我滚动画布时，有什么方法可以获得画布滚动的距离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:00:05.657

您可以将坐标从滚动图形转换为相对坐标系。尝试这个：

```
org.eclipse.draw2d.geometry.Point p = new org.eclipse.draw2d.geometry.Point(e.x,e.y);
root.translateToRelative(p); 
```

然后在引用坐标时使用px和py

# android - 跨活动使用闪屏

> ID：11473921
> 
> 赞同：0
> 
> 时间：2012-07-13T15:50:05.470
> 
> 标签：android, android-asynctask

我有一个登录屏幕作为我的第一个活动。它有一个`AsyncTask`使用 Web 服务进行登录验证的对象。它加载具有选项卡作为活动的主要活动。然后主要活动加载我的第一个选项卡，该选项卡也有一个`AsyncTask`对象来加载一些数据。我想显示从登录验证（`onPreExecute`LoginActivity）开始到 FirstActivity 加载其数据（`onPostExecute`FirstActivity）的初始屏幕。我已经开始实施它，但我被拒绝了预期的结果。`onPostExecute`在LoginActivity之后，初始屏幕消失，登录屏幕重新出现一瞬间。之后，我的 FirstActivity 加载时没有显示初始屏幕。

如何继续在这些活动中显示启动画面？

我知道这听起来很复杂。但是我花了很多时间自己解决这个问题，但我还没有成功。任何形式的帮助表示赞赏。谢谢！

**编辑**

登录活动：

```
 public Dialog mSplashDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

            et1 = (EditText) findViewById(R.id.ev_Login_ID);
    et2 = (EditText) findViewById(R.id.ev_Passward);

    // Activity Specicfic code

    }
protected void showSplashScreen() {
    mSplashDialog = new Dialog(this, R.style.SplashScreen);
    mSplashDialog.setContentView(R.layout.splashscreen);
    mSplashDialog.setCancelable(false);
    mSplashDialog.show();
    }
public class LoginProcess extends AsyncTask<Object, Void, Void> {
    private LoginActivity activity;

    private LoginProcess(LoginActivity activity) {
        this.activity = activity;
    }

    /**
     * Showing the dialog on the UI thread.
     */
    @Override
    protected void onPreExecute() {
        showSplashScreen();
    }

    /**
     * Performing the heavy lifting in the background thread thread.
     */
    @Override
    protected Void doInBackground(Object... params) {
        try {

        // User Validation  

    }

    /**
     * When the task is completed, notifiy the Activity.
     */
    @Override
    protected void onPostExecute(Void unused) {

                    Intent i = new Intent(LoginActivity.this, MainActivity.class);
                    i.putExtra("FromOtherTab", true);
                    startActivity(i);
                    finish();
                }

} 
```

主要活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Bundle extras = getIntent().getExtras();

    // create tabs and set current tab to FirstActivity

    } 
```

第一活动：

```
public Dialog mSplashDialog;
private FetchData mTask;

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.mydashboard);

  }

protected void removeSplashScreen() {
    if (mSplashDialog != null) {
        mSplashDialog.dismiss();
        mSplashDialog = null;
    }

private class FetchData extends AsyncTask<Object, Void, Void> {

private FirstActivity activity;

/**
 * Performing the heavy lifting in the background thread thread.
 */
@Override
protected Void doInBackground(Object... params) {
    // Load data

}

/**
 * When the task is completed, notifiy the Activity.
 */
@Override
protected void onPostExecute(Void unused) {
    // Here I want to call removeSplashScreen();

} 
```

目前，启动屏幕会加载，直到 LoginActivity 线程正在运行。之后，FirstActivity 启动。空白布局出现一秒钟（直到从 FirstActivity 加载数据），然后显示正确的屏幕。我想不断显示启动画面，直到 FirstActivity 的 onPostExecute。如果我在 FirstActivity 中创建一个新的 mSplashDialog，那么我会得到两个单独的启动画面实例。第一个在新的出现之前消失。我不确定如何在 FirstActivity 加载时获得相同的 mSplashDialog 旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:39:16.673

Why don't you load the splashscreen from onPreExecute of your asynctask, then close it onPostExecute (as you are currently doing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:53:18.523

如果我是你，我会做的是创建一个启动画面，没有`AsyncTask`. 从那里，我将创建一个`AsyncTask`将在显示初始屏幕时加载的内容。然后`onPostExecute`，我会从初始屏幕转到您的下一个活动。基本上，如果你把所有的后台活动`AsyncTask`都放在主 UI 线程上并让启动画面运行，你应该没问题。在启动屏幕活动中，您只需启动`AsyncTask`，然后`onPostExecute`会将您从启动活动移动到主要活动。

我希望这是有道理的。这是一个很好的链接，可以帮助`AsyncTask`：

www.peachpit.com/articles/article.aspx?p=1823692&seqNum=3

祝你好运！

# php - 具有人类可读时间的用户状态

> ID：11473924
> 
> 赞同：-2
> 
> 时间：2012-07-13T15:50:12.023
> 
> 标签：php, datetime

我使用 FQL 和 Facebook Graph API 收到状态消息。

我不确定 API 返回的时间格式。

我收到它是这样的：

```
 [time] => 1319588970 
```

我想将其转换为：

```
 27-02-2012 
```

如何将该值转换为人类可读的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:06:16.877

那是在 GMT-0 中设置的 UNIX 时间戳。要转换它，请执行以下操作：

```
$time = YOUR_TIMESTAMP_VAR;
$date = date('d-m-Y', $time); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:07:31.430

如果您使用的是 Graph API，请将 date_format= 作为参数传递。它应该接受任何适用于 PHP strfrtime 的东西。要获得您要求的格式，请使用

```
graph.facebook.com/me/statuses?date_format=d-m-Y 
```

# linker - Levine、链接器和加载器

> ID：11473926
> 
> 赞同：2
> 
> 时间：2012-07-13T15:50:14.490
> 
> 标签：linker, loader

我正在阅读：Levine、Linkers 和 Loaders。在第 95 页，他说：

```
Module-A 0->600H
Module-B 0->400H
Module-C 0->500H 
```

在单段存储分配中，这应该是：

> 0-600 601-A01 A02-F03

? 他说是从0-F00？？？基本上他只是连接所有模块，所以..

我想知道是否有人可以推荐一本合适的书。我正在尝试了解链接器符号表、加载器、链接编辑器、GOT/PLT 以及语言如何适应这一切.. 准确地说.. 如果我有一堆函数和变量/c 文件，它们怎么样存储在 .obj 中，.obj 文件包含什么（部分、段）以及它如何与 ELF 相匹配以及 ELF 如何与分页内存相匹配。我发现 Levine 很难理解并且非常冗长。他在 Pentium/SPARC/IBM/Motorola 处理器上有一些东西，这一切似乎有点过时和古老，令人难以置信的令人沮丧。我尝试查看各种维基百科条目和谷歌搜索，但情况更糟！到目前为止，我发现的唯一一本像样的“书”是英特尔软件开发人员手册第 3 卷，

我使用 Linux、gcc、g++ 所以.. 我只是想清楚地了解当你做 objdump/nm 时所有那些神秘的东西意味着什么现代的莱文，没有错误会很好.. 如果它会很棒还涵盖了 Microsoft PE 格式。

我已经尝试过非常出色的 Intel SysV ABI，但它不适合新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:35:35.210

> 现代的莱文，没有错误会很好

Ian Lance Taylor 最近实现了一个仅限 ELF 的链接器，并在[一系列博客文章](http://www.airs.com/blog/archives/38)中对其进行了描述。他们肯定比莱文更专注，更简洁。

# actionscript-3 - 如何从动作脚本调用 adobe 的 expressInstall

> ID：11473927
> 
> 赞同：0
> 
> 时间：2012-07-13T15:50:21.003
> 
> 标签：actionscript-3, adobe

我有一个现有的 Flash 应用程序。我希望用户与之交互。然后为了获得更好的体验，我想提示用户获取最新版本（如果她没有）。

我查看了 swfobject，我可以对 showExpressInstall() 进行外部接口调用。但是，然后我陷入了一种情况，即弄清楚如何将该对话框覆盖在我的应用程序上。

所以，

1.  有没有办法从 flash 中触发提示？
2.  如果使用 swfobject 完成，如何克服覆盖问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:19:18.627

如果您定义了一些东西，Adobe AIR 可以自行管理应用程序更新。您甚至可以制作自定义更新 UI。试试这些资源：

[链接 1](http://blogs.adobe.com/simplicity/2008/04/custom_update_ui_for_applicati.html)
[链接 2](http://www.adobe.com/devnet/air/articles/updating-air-apps-native-installer.html)

# python - Python客户端不会重新连接到服务器

> ID：11473930
> 
> 赞同：0
> 
> 时间：2012-07-13T15:50:23.240
> 
> 标签：python, sockets, python-2.7, reconnect

对不起我的英语，但我的软件有一些问题，我需要一些帮助。但首先，一些代码！

客户端：

```
if connessione.connect(host, port) == True:
    connect = True
    print 'connection granted'
else:
    connect = False
    print 'connection refused'

while 1:
   do_some_stuff_with_socket

   if connect == False:
       if connessione.connect(host, port) == True:
           connect = True 
```

服务器端：（*网上找的*）

```
import socket
port = 4000
host = '127.0.0.1'
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind((host, port))
server_socket.listen(5)
print "Type 'Q' or 'q' to QUIT"
print "Server Waiting for client on port ", port
while 1:
    client_socket, address = server_socket.accept()
    print "Connection from ", address
    while 1:
        server_data = raw_input("--> server: ")
        if server_data.lower() == 'q':
            client_socket.send(server_data)
            client_socket.close()
            break
        else:
            client_socket.send(server_data)
        client_data = client_socket.recv(1024)
        if client_data.lower() == 'q':
            print "Quit from client"
            client_socket.close()
            break
        else:
            print "<-- client: ", client_data
    break 
```

如果我重新启动/断开服务器，客户端不会重新连接。我使用`.terminate()`and`.close()`方法关闭了套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:46:19.710

我已经通过调用`.__init__()`之前的方法解决了我的问题`.connect(host, port)`

它并不优雅，但它确实有效。

谢谢大家

# console - 从 rxvt 终端复制

> ID：11473936
> 
> 赞同：0
> 
> 时间：2012-07-13T15:50:52.547
> 
> 标签：console, cygwin, rxvt

它确实复制了我想要的东西，但问题是它以某种方式向我的终端发送了一个 ctrl-c，这将导致每次都执行当前的命令行！这真的让我很烦。任何人都可以帮助我吗？谢谢！我正在使用 Windows 7 顺便说一句。

我用来打开 rxvt 终端的命令是`C:\cygwin\bin\rxvt.exe -fn '*-courier-*-r-*-16-*' -sl 9999 -bg Black -fg Green -e /bin/bash -login`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:40:21.837

检查：你正在做的是选择一些文本然后点击`Ctrl`+ `C`？

如果是这种情况，您将看到两种不同的行为：大多数终端仿真器会在您选择文本后立即进行复制。不需要`Ctrl`+ `C`。选择文本后，只需切换到另一个窗口，然后尝试粘贴。

# r - addtable2plot 中的一致阴影行 - plotrix

> ID：11473938
> 
> 赞同：1
> 
> 时间：2012-07-13T15:50:56.040
> 
> 标签：r, plot, plotrix

我经常从模拟数据中生成直方图，并发现为数据附加关联的十分位表非常有帮助。我一直在用 plotrix 的 addtable2plot 函数来做这件事。我还发现突出显示表中包含 50% 值的行很有用 - 这是一个示例：

```
library(plotrix)

# Generate data

mu <- -1.771957
sd <- 0.4716474

foo <- rlnorm(100000, mu, sd)

# Generate decile table
xmax <- .75

max <- format(xmax, digits=2, nsmall=2)

dc <- quantile(foo, probs=seq(0, 1, 0.1))
dps <- c("100%", "90%", "80%", "70%", "60%", "50%", "40%", "30%", "20%", "10%", "0%")
dc <- format(round(dc, digits=2), nsmall=2)

decile <- as.data.frame(dps)
deciles <- as.data.frame(cbind(dps,dc), row.names=FALSE)
colnames(deciles) <- c("Probability", "Rate")
deciles$"Rate" <- as.character(deciles$"Rate")
deciles[1,2] <- "0.00"
deciles[11,2] <- paste(">", max, sep="")

# create a plot
hist(foo, freq=F, xlim=c(0,xmax), breaks=50, col="blue")
top <- max(axis(2))
rect(xleft=(.69*xmax), xright=(1.04*xmax), ybottom=(.615*top), ytop=(.665*top), col="gray91", border=NA)
addtable2plot(x=(1.04*xmax), y=(top), xjust=1, yjust=0, table=deciles, cex=0.82,
          title="Title", hlines=TRUE, vlines=TRUE, bty="o", lwd=1.5, bg="transparent") 
```

如您所见，我只是通过在表格图下方添加一个彩色矩形来进行着色。这需要对每个直方图的 xleft、ybottom 和 ytop 参数进行大量调整。

有没有什么办法可以毫不费力地始终如一地突出显示？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:58:27.860

你的意思是这样的，也许：

```
bg_col <- matrix("white",nrow(deciles),ncol(deciles))
bg_col[11,] <- "grey"

# create a plot
hist(foo, freq=F, xlim=c(0,xmax), breaks=50, col="blue")
top <- max(axis(2))
rect(xleft=(.69*xmax), xright=(1.04*xmax), ybottom=(.615*top), ytop=(.665*top), col="gray91", border=NA)
addtable2plot(x=(1.04*xmax), y=(top), xjust=1, yjust=0, table=deciles, cex=0.82,
          title="Title", hlines=TRUE, vlines=TRUE, bty="o", lwd=1.5, bg= bg_col) 
```

![在此处输入图像描述](../Images/71e2d512fbe078a45d539a28b4795ab0.png)

正如你所看到的，我把你的`rect`电话留在那里，只是为了比较。里面有一个简短的说明`?addtable2plot`：

> 如果 bg 是与 x 尺寸相同的颜色矩阵，则这些颜色将是单元格的背景。默认为无背景颜色。

这就是我想出如何做到这一点的方法。

# html - Paypal discount_rate_cart 和 tax_rate 冲突？

> ID：11473948
> 
> 赞同：0
> 
> 时间：2012-07-13T15:51:10.563
> 
> 标签：html, paypal

这是我的 Paypal 变量代码行。

```
paypal:{'business':'remax@danalcoimpressions.com','discount_rate_cart':'50','tax_rate':'5', 'currency_code':'CAD', 'country':'CA','locale.x':'fr_CA'}, 
```

似乎我不能将`tax_rate`变量与`discount_rate_cart`. 我尝试使用`tax_cart`，它正在工作，但它只是将税收添加到总数中。我需要将其乘以税收价值。

对于 Paypal，只有 discount_rate_cart 有效。税根本没有出现。顺便说一句，一切都运行良好，因此无需查看其余代码。它只是关于添加这些 Paypal 变量。

有可能我不能同时使用两种费率吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:29:29.373

这是正确的。

`discount_rate_cart`并且`tax_rate conflict`相互冲突，您可以考虑为每个项目添加折扣率。

# pyopengl - pyopengl 着色器警告/信息混淆选择替代

> ID：11473957
> 
> 赞同：0
> 
> 时间：2012-07-13T15:51:47.453
> 
> 标签：pyopengl

我有一小段使用着色器的 pyopengl 代码。我收到以下“信息”日志消息，但不知道它们的含义并且文档很差——或者我找不到它。

任何人都可以澄清这些是什么意思？

```
INFO     [   MainThread::OpenGL.extensions]  OpenGL Version: 3.3.0 NVIDIA 295.59
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glCreateShader from glCreateShader, glCreateShaderObjectARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glShaderSource from glShaderSource, glShaderSourceARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glCompileShader from glCompileShader, glCompileShaderARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glGetShaderiv from glGetShaderiv, glGetObjectParameterivARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glCreateProgram from glCreateProgram, glCreateProgramObjectARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glAttachShader from glAttachShader, glAttachObjectARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glLinkProgram from glLinkProgram, glLinkProgramARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glValidateProgram from glValidateProgram, glValidateProgramARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glGetProgramiv from glGetProgramiv, glGetObjectParameterivARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glDeleteShader from glDeleteShader, glDeleteObjectARB
INFO     [   MainThread::OpenGL.extensions]  Chose alternate: glUseProgram from glUseProgram, glUseProgramObjectARB 
```

导入行是：

```
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GLUT import *
from OpenGL.GL.ARB.shader_objects import *
from OpenGL.GL.ARB.fragment_shader import *
from OpenGL.GL.ARB.vertex_shader import * 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:18:09.410

如果两者都可用，PyOpenGL 可以在着色器函数的核心 GLSL 版本和它们的 NVIDIA ARB 等效版本之间进行选择。您的信息日志告诉您，您的程序在选择时选择了核心版本。

# r - strsplit 和 lapply

> ID：11473960
> 
> 赞同：1
> 
> 时间：2012-07-13T15:51:55.720
> 
> 标签：r, strsplit

我在表单的某些文本中有一个字符串`"12,34,77"`，包括引号。

我需要将每个数字的值放入一个列表中。我尝试使用`lapply`和`strsplit`：

```
control2=lapply(strsplit(data$values,","),as.numeric) 
```

但我得到了错误：

> 非字符参数

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T16:47:43.380

**1) 绑带**

**1a) scalar**这是一个使用`strapply`gsubfn 包的单行代码：

```
library(gsubfn)
x <- '"12,34,567"'

strapply(x, "\\d+", as.numeric, simplify = c)
## [1]  12  34 567 
```

**1b）矢量化**矢量化版本更简单——只需删除`simplify=c`以下内容：

```
v <- c('"1,2,3"', '"8,9"') # test data
strapply(v, "\\d+", as.numeric)` 
```

**2) gsub 和扫描**

**2a) 标量**和这里是一个使用`gsub`和的单线性`scan`：

```
scan(text = gsub('"', '', x), what = 0, sep = ",")
## Read 3 items
## [1]  12  34 567 
```

**2b）矢量化**矢量化版本将涉及`lapply`对组件的 -ing：

```
lapply(v, function(x) scan(text = gsub('"', '', x), what = 0, sep = ",")) 
```

**3）strsplit**

**3a）标量**，这是一个`strsplit`解决方案。请注意，我们对`"`和进行了拆分`,`：

```
as.numeric(strsplit(x, '[",]')[[1]][-1])
## [1]  12  34 567 
```

**3b）矢量化**矢量化解决方案将再次涉及`lapply`对组件的处理：

```
lapply(v, function(x) as.numeric(strsplit(x, '[",]')[[1]][-1])) 
```

**3c）矢量化 - 更简单**或更简单：

```
lapply(strsplit(gsub('"', '', v), split = ","), as.numeric) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T15:59:00.353

我认为您的问题可能源于您的源数据。无论如何，如果您想使用数字，您将摆脱引号。我推荐`gsub`。

```
> x <- '"1,3,5"'
> x
[1] "\"1,3,5\""
> x <- gsub("\"", "", x)
> x
[1] "1,3,5"
> as.numeric(unlist(strsplit(x, ",")))
[1] 1 3 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T15:55:42.790

试试这个：

```
x <-  "12,34,77"
sapply(strsplit(x, ",")[[1]], as.numeric, USE.NAMES=FALSE)
[1] 12 34 77 
```

由于 的结果`strsplit()`是列表列表，因此您需要提取第一个元素并将其传递给`lapply()`.

* * *

但是，如果您的字符串确实包含嵌入的引号，则需要先删除嵌入的引号。您可以`gsub()`为此使用：

```
x <-  '"12,34,77"'
sapply(strsplit(gsub('"', '', x), ",")[[1]], as.numeric, USE.NAMES=FALSE)
[1] 12 34 77 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T16:27:30.113

正如已经指出的那样，您需要先正则表达式输出引号。

`destring`库中的函数`taRifx`将执行此操作（删除任何非数字字符），然后强制转换为数字：

```
test <- '"12,34,77"'
library(taRifx)
lapply(strsplit(test,","),destring)
[[1]]
[1] 12 34 77 
```

# android - 首选项保存后刷新网页视图

> ID：11473963
> 
> 赞同：0
> 
> 时间：2012-07-13T15:52:33.253
> 
> 标签：android, webview, refresh, preferences

我为 android 制作了一个**[非常]**简单的应用程序，它连接到保存在首选项中的 URL。我已经能够让应用程序打开一个新的活动/布局以输入 URL 并保存它，然后我使用 finish(); 返回主屏幕 (WebView)。

设置新 URL 后如何让 WebView 刷新？

[编辑]

我认为我的偏好没有被保存：

我的设置.java

```
package com.rarecreativegroup.dcm1config;

import android.app.Activity;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.view.Window;
import android.webkit.WebView;
public class mySettings extends Activity {
    public void onCreate (Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.menu_layout); 

        findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Editor editor = PreferenceManager.getDefaultSharedPreferences(getBaseContext()).edit();
                String string = getString(R.string.ipaddress);
                editor.putString("ipaddress", string);              
                editor.commit();
                WebView webViewer = (WebView)findViewById(R.id.webview);
                //webViewer.loadUrl(string);
                finish();
            }
        });
    }

    } 
```

mainActivity.java

```
package com.rarecreativegroup.dcm1config;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;
import android.webkit.WebView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {
    public static final String PREFS_NAME = "preferences";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        String uri = settings.getString("ipaddress", "");
        WebView webview = new WebView(this);
        webview.loadUrl(uri);
        setContentView(webview);
        //setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()) {
            case R.id.settings:
                startActivity(new Intent(this, mySettings.class));
                return true;
            case R.id.refresh:
                SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
                String uri = settings.getString("ipaddress", "");
                WebView webview = new WebView(this);
                webview.loadUrl(uri);
                setContentView(webview);
            default:
                return super.onOptionsItemSelected(item);
        }

    }

    } 
```

res/xml/preferences.xml

```
 <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory 
        android:title="IP Settings"
        android:key="ip_settings">

        <EditTextPreference
            android:key="ipaddress"
            android:title="DCM1 IP" 
            android:summary="Define the IP address of the DCM1"
            android:dialogTitle="DCM1 IP Address"
            android:dialogMessage="Supply IP Address"    
            android:defaultValue="http://192.168.6.117/" />

    </PreferenceCategory>
    </PreferenceScreen> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:53:16.457

您遇到的问题是您引用了两个不同的 SharedPreferences。您将其存储在设置活动中的默认共享首选项（这很好）中，然后从您自己的自定义活动中检索它。只需调用相同的默认共享首选项两次。这是您需要做的：

改变

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); 
```

在您的 mainActivity 中：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

和改变：

```
Editor editor = PreferenceManager.getDefaultSharedPreferences(getBaseContext()).edit(); 
```

在您的 mySettings 活动中：

```
Editor editor = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).edit(); 
```

一切都应该开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:02:25.020

您只能在 Activity 类中获取 Web 视图的引用，或者引用您的活动，执行以下操作：

```
WebView webView = (WebView)findViewById(R.id.my_web_view); 
```

然后，重新加载您的网络视图：

```
webView.loadUrl("http://www.websitehere.php"); 
```

或更简单地说：

```
webView.reload(); 
```

# api - 如何检测 URL 是否包含成人或非法内容？

> ID：11473967
> 
> 赞同：1
> 
> 时间：2012-07-13T15:52:49.853
> 
> 标签：api

是否有任何 API 可以检查成人或非法内容？

我目前正在使用谷歌的浏览安全 API 来检查恶意软件和网络钓鱼。

但是，我想检查它是否是成人。类似于谷歌的安全搜索。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:21:51.617

有许多公司提供自动 url 分类服务，但几乎所有这些公司都需要花钱。

我与[Zvelo](http://zvelo.com/)进行了一些互动，这似乎相当不错，并且有一个庞大的分类网址数据库。再次。这是一项付费服务​​，所以我不确定这是否符合您的标准。

通过快速的谷歌搜索，我还发现了；

*   [ClearSwift](http://www.clearswift.com/support/url-classifications/) - 付费
*   [Alhem 分布式网址分类工具](http://www.alhem.net/duct/)- 免费
*   [WebSense](http://www.websense.com/content/urlcategories.aspx) - 付费

请记住，没有任何系统是 100% 的，而且您会得到一些误报和误报。

# powershell - 如何根据注册表值执行操作？

> ID：11473968
> 
> 赞同：0
> 
> 时间：2012-07-13T15:52:50.397
> 
> 标签：powershell, registry, powershell-2.0

我有以下注册表项

```
$rKey="hklm:\SOFTWARE\Wow6432Node\Mycompany\MyProj\Core" 
```

该键将具有以下参数

```
 DBServer="Installed"
 AppServer="Installed"
 WebServer="Installed" 
```

我想检查

```
 if DBserver="Installed" Then do some action
 Else Do nothing

 If Appserver="Installe" then do some action
 Else Do nothing

 If Webserver ="Installed" then do some action
 Else Do nothing 
```

如何获取属性值并基于它执行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:26:29.820

```
$p = Get-ItemProperty $key

if($p.DBserver -eq "Installed")
{
   .. do some action ..
}

if($p.Appserver-eq "Installed")
{
   .. do some action ..
}

if($p.Webserver -eq "Installed")
{
   .. do some action ..
} 
```

# c# - 配置文件设置 - 需要输入

> ID：11473971
> 
> 赞同：0
> 
> 时间：2012-07-13T15:53:11.147
> 
> 标签：c#, xml, configuration

我目前正在使用一个临时 xml 文件来保存配置设置并且它正在工作，但它不是它需要的位置。

它是这样的：

```
<XmlDoc>

    <DefaultSettings>
        <ExitProgramMessage>Y</ExitProgramMessage>
    <DefaultSettings>

    <Company>
        <ExitProgramMessage>N</ExitProgramMessage>
    <Company>

    <Workstation>
        <ExitProgramMessage>N</ExitProgramMessage>
    </Workstation>

    <User>
        <ExitProgramMessage>Y</ExitProgramMessage>
    <User>

<XmlDoc> 
```

编写代码的方式是首先读取 DefaultSettings，然后是 Company（覆盖 DefaultSettings），然后是 Workstation 设置（覆盖 DefaultSettings 或 Company Settings），然后是 Workstations，然后是 User... last read wins , 空白除外。他们不清除字段。在上面的示例中，ExitProgramMessage 最终会是 Y。

我遇到了几个问题。

1.  我不能轻易添加更多级别，因为它们是硬编码的
2.  我必须手动读取每个节点，因为它不是标准的 xml 格式，这意味着需要手动编辑文件，这总是会导致问题。

它只是不容易使用，而且绝对不直观。

那么，话虽如此，我应该如何实现这个我可以创建一个屏幕来更新设置？

xml 是正确的方法吗？我应该走一条不同的路线吗？我们还没有数据库选项，只有平面文件。

此外，这些设置驻留在具有网络用户访问的共享驱动器的服务器上。因此，这些不能是保存在注册表中的设置或任何特定于用户的设置。

任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:02:08.283

我对您的方案的建议是查看 Settings.Properties 您可以在其中包含任何类型并在运行时更新它们

使用 Settings.Properties 的一个很好的例子是您可以将应用程序的状态保存在其中

查看链接了解更多信息

[http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/bb397755.aspx](http://msdn.microsoft.com/en-us/library/bb397755.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:07:08.920

轻松处理几个类。一个例子：

要读取一个值：

```
Settings settings = new Settings(file);
var company = settings["Company"].ExitProgramMessage; 
```

要写入一个值：

```
using(Settings settings = new Settings(file))
{
    settings["Workstation"].ExitProgramMessage = "Y";
} 
```

课程如下：

```
public class Settings : IDisposable
{
    XElement self;
    FileInfo file;
    public Settings(FileInfo file)
    {
        if (file.Exists)
            self = XElement.Load(file.FullName);
        else
            self = new XElement("XmlDoc");
        this.file = file;
    }

    public Setting this[string name]
    {
        get
        {
            XElement x = self.Element(name);
            if (null == x)
                self.Add(x = new XElement(name));
            return new Setting(x, name);
        }
    }

    public void Dispose()
    {
        self.Save(file.FullName);
    }
}

public class Setting
{
    XElement self;
    string name;
    public Setting(XElement xsetting, string name)
    {
        self = xsetting;
        this.name = name;
    }

    public string ExitProgramMessage
    {
        get
        {
            XElement x = self.Element("ExitProgramMessage");
            if (null == x)
                return "Unknown"; // default value?
            return (string)x;
        }
        set
        {
            XElement x = self.Element("ExitProgramMessage");
            if (null == x)
                self.Add(new XElement("ExitProgramMessage", value));
            else
                x.Value = value;
        }
    }

    public string Name { get { return name; } }
} 
```

# assembly - 理解 C 程序的汇编语言输出

> ID：11473973
> 
> 赞同：2
> 
> 时间：2012-07-13T15:53:16.313
> 
> 标签：assembly

```
 #include <stdio.h>

 static int i = 100;

 /* Declard as extern since defined in hello.c */
 extern int global;

 int function(char *input)
 {
  printf("%s\n", input);
  return global;
 }; 

    .file   "foo.c"
    .data
    .align 4
    .type   i, @object
    .size   i, 4
i:
    .long   100
    .text
.globl function
    .type   function, @function
function:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $24, %esp
    movl    8(%ebp), %eax
    movl    %eax, (%esp)
    call    puts
    movl    global, %eax
    leave
    ret
    .size   function, .-function
    .ident  "GCC: (Debian 4.4.5-8) 4.4.5"
    .section    .note.GNU-stack,"",@progbits 
```

原因是什么：

> 低于 $24, %esp

为什么他通过将堆栈指针递减 24 个字节来为局部变量在堆栈上腾出空间？函数中没有局部变量。然后他会：

> movl %eax, (%esp)

为什么 - 因为存储在 ebp+8 的值（指针 char *input）被移动到 eax 并且现在应该传递给 puts.. 但是他为什么要执行先前的 subl - 来存储 int 的返回值？但那是 4 个字节。我还读到 C 不支持调用函数，必须在堆栈上为返回值腾出空间（重入问题）。请问这里发生了什么:( ??他可能在字边界上对齐指针参数..但是SysV I386 ABI说使用了尾部填充..

还，

> movl %esp, %ebp

意味着 esp 和 ebp 都将指向新函数堆栈帧的基础。但是，假设有一个“调用函数”；考虑堆栈：您将拥有：

> ```
> pushl ptr //push char *ptr
> call function 
> {
> pushl ebp So stack contains:
> ptr
> ret-value
> ebp
> ->with-esp-pointing-to-after-ebp
> (ESP always points to the top of the stack but after the last pushed   
> element..?) 
> ```

所以他将ebp设置为esp。但是在 pg36，SysV ABI I386 Architecture Processor Supplement 4E 的 ABI 规范中，他说： 0(%ebp) previous %ebp (optional) 我猜是这样写的： %ebp+0 points to previous ebp 但是你可以看到, ebp+0 实际上指向存储的前一个 ebp 之后..???

在另一个节目中，

> ```
> andl $-16, %esp
> subl $32, %esp 
> ```

所以他首先对esp的最后4位进行了核对。嗯，这给了他多少空间？然后是subl..

有人可以为此推荐一个体面的教程或书籍。我不想掌握汇编，只想知道足够多的知识以了解一些 ABI 规范和对齐以及 GOT/PLT/虚拟寻址和编译器/链接器的东西- symbolTable/relocation 等（我正在使用 Levine 的书，但它很大——虽然很有趣，但 COFF 和 IBM/Sparc 的东西 :( 这就是我从 ABI 规范开始的原因。还有 Ian Wienand 的网站：自下而上的计算机科学.)

# java - 是否有用于 BER-TLV 的 Java 解析器？

> ID：11473974
> 
> 赞同：7
> 
> 时间：2012-07-13T15:53:17.747
> 
> 标签：java, parsing, tlv

我是 Java 新手，所以我想将标准解决方案用于标准任务。标签和值的长度是未知的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-07-05T15:05:41.193

您可以使用这个 BER-TLV 解析器：[git 上的源代码](https://github.com/evsinev/ber-tlv)。
示例：

**如何解析**

```
byte[] bytes = HexUtil.parseHex("50045649534157131000023100000033D44122011003400000481F");
BerTlvParser parser = new BerTlvParser(LOG);
BerTlvs tlvs = parser.parse(bytes, 0, bytes.length); 
```

**如何建造**

```
byte[] bytes =  new BerTlvBuilder()
                .addHex(new BerTag(0x50), "56495341")
                .addHex(new BerTag(0x57), "1000023100000033D44122011003400000481F")
                .buildArray(); 
```

**Maven依赖**

```
<dependency>
  <groupId>com.payneteasy</groupId>
  <artifactId>ber-tlv</artifactId>
  <version>1.0-10</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:10:34.993

[此处](http://blog.saush.com/2006/09/08/getting-information-from-an-emv-chip-card/)的教程提供了有关如何解析 BER-TLV 的提示。使用[JACCAL](http://jaccal.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-29T21:49:59.243

[javaemvreader](https://github.com/sasc999/javaemvreader)项目包含[一些解析 BER-TLV 的](https://github.com/sasc999/javaemvreader/blob/f0d5920a94a0dc4be505fbb5dd03a7f1992f82bc/src/main/java/sasc/iso7816/TLVUtil.java)代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T06:39:41.597

我找到了 BER TLV 的[Javacard](http://javacard.kenai.com/javadocs/connected/javacardx/framework/tlv/ConstructedBERTLV.html)类。希望那些帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T20:24:19.310

我根据此处提供的信息制作了一个简单的解析器：http: [//www.codeproject.com/Articles/669147/Simple-TLV-Parser](http://www.codeproject.com/Articles/669147/Simple-TLV-Parser)

我不知道这段代码是否支持所有标准，但它对我有用。

```
public static Map<String, String> parseTLV(String tlv) {
    if (tlv == null || tlv.length()%2!=0) {
        throw new RuntimeException("Invalid tlv, null or odd length");
    }
    HashMap<String, String> hashMap = new HashMap<String, String>();
    for (int i=0; i<tlv.length();) {
        try {
            String key = tlv.substring(i, i=i+2);

            if ((Integer.parseInt(key,16) & 0x1F) == 0x1F) {
                // extra byte for TAG field
                key += tlv.substring(i, i=i+2);
            }
            String len = tlv.substring(i, i=i+2);
            int length = Integer.parseInt(len,16);

            if (length > 127) {
                // more than 1 byte for lenth
                int bytesLength = length-128;
                len = tlv.substring(i, i=i+(bytesLength*2));
                length = Integer.parseInt(len,16);
            }
            length*=2;

            String value = tlv.substring(i, i=i+length);
            //System.out.println(key+" = "+value);
            hashMap.put(key, value);
        } catch (NumberFormatException e) {
            throw new RuntimeException("Error parsing number",e);
        } catch (IndexOutOfBoundsException e) {
            throw new RuntimeException("Error processing field",e);
        }
    }

    return hashMap;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-14T11:41:50.640

可能[这个免费库](https://github.com/VakhoQ/tlv-encoder)对您有用。我用这个来进行简单的 TLV 解析。无论如何，它具有 MIT 许可证，您可以对其进行修改。

```
https://github.com/VakhoQ/tlv-encoder 
```

# java - 排序 h:dataTable

> ID：11473975
> 
> 赞同：0
> 
> 时间：2012-07-13T15:53:18.130
> 
> 标签：java, sorting, jsf

我正在使用 Seam 和 Java 制作一个 h:dataTable，其中包含来自 ArrayList 的信息，其中填充了对象。我的问题是，有没有办法通过单击其中一个标题来对表格进行排序。我现在有一些代码，它所做的只是以与以前相同的方式重新加载表。

这是我的一些代码。如果您需要更多信息，请告诉我： 表：

```
<h:dataTable value="#{deliveryPort.getWholeDeliveryList()}" var="delivery" rules="rows">
                    <h:column>
                        <div class="setWidth">
                            <div class="white">
                            <f:facet name="header">
                                <h:outputLink style="color:#FFFFFF" action="#{deliveryPort.sortByAddress()}">
                                    Address
                                </h:outputLink>
                            </f:facet>
                            </div>
                            <h:outputText value="#{delivery.address}" />
                        </div>
                    </h:column> 
```

种类：

```
 public String sortByAddress(){
    for(int i = 0; i < wholeDeliveryList.size(); i++){
        for(int j= i+1; j<wholeDeliveryList.size(); j++){
            if(wholeDeliveryList.get(i).getAddress().compareTo(wholeDeliveryList.get(j).getAddress())<1){
                FlowerStoreDelivery temp = wholeDeliveryList.get(i);
                wholeDeliveryList.set(i, wholeDeliveryList.get(j));
                wholeDeliveryList.set(j, temp);
            }
        }
    }
    return "deliveryList.seam";
} 
```

getWholeDeliveryList():

```
 public List<FlowerStoreDelivery> getWholeDeliveryList(){
wholeDeliveryList = new ArrayList<FlowerStoreDelivery>();
wholeDeliveryList.addAll(entityManager.createQuery("SELECT e FROM FlowerStoreDelivery e").getResultList());
    return wholeDeliveryList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:35:17.767

您可以在 JSF 专家[BalusC的](https://stackoverflow.com/users/157882/balusc)[博客](http://balusc.blogspot.in/2006/06/using-datatables.html)上获得更多关于 DataTable 的信息，包括排序等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:15:43.570

例如 Richfaces 的 rich:dataTable 支持通过单击列进行排序。

# php - 用 PHP 读取 SQLite 数据库？（使用 sencha touch sqlite 制作）

> ID：11473978
> 
> 赞同：1
> 
> 时间：2012-07-13T15:53:24.493
> 
> 标签：php, javascript, sqlite, sencha-touch

我有一个使用 Sencha Touch 中的 SQLite 端口创建的 SQLite 数据库（[此处](https://github.com/tomalex0/SenchaTouch-v2-SqliteProxy)），数据库名称为“cars”，不带引号，其中的表称为“cars_table”，不带引号。

我能够在javascript中完美地读取/写入/更新SQLite表，当我查看谷歌浏览器上的“Cookies/Local Storage”页面时，我看到我的域下的数据库设置了正确的数据库名称。

然而，我完全无法从 PHP 读取或写入它。我有 PHP 5.3 并且在检查 phpinfo() 时我已经准备好使用 SQLite。

有任何想法吗？

我的基本 PHP 代码只是：

```
$dbhandle = sqlite_open('cars');
$query = sqlite_query($dbhandle, 'SELECT * FROM cars_table');
$rows = sqlite_num_rows($query);
echo $rows; 
```

PHP 中的错误：

```
Warning: sqlite_query(): no such table: cars_table in     /var/www/manage/testall/www/thesqlite.php on line 6 Warning: sqlite_num_rows() expects parameter 1 to be resource, boolean given in /var/www/manage/testall/www/thesqlite.php on line 7 
```

编辑2：

使用 sqlite_master 搜索列出表名时，我看到 0 个表。所以错误可能在数据库名称中（在这种情况下，我错过了 sencha touch 应用程序是如何命名它的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:46:34.480

我将在错误和您提供的代码上走相反的道路：

`Warning: sqlite_query(): no such table: cars_table in /var/www/manage/testall/www/thesqlite.php on line 6 Warning: sqlite_num_rows() expects parameter 1 to be resource, boolean given in /var/www/manage/testall/www/thesqlite.php on line 7`

表示这`$query`是一个布尔值（在这种情况下为 false）而不是资源。

`$query`是假的，因为`sqlite_query($dbhandle, 'SELECT * FROM cars_table')`是一个失败的查询，因为`cars_table`在数据库中不存在。

`cars_table`数据库中不存在，因为数据库刚刚由您的句子创建（是的，**刚刚创建**`sqlite_open('cars')`），因此数据库没有表。*正如您在其中一个评论中提到的*那样，这是默认行为。`cars`是服务器上不存在的文件（php 运行的地方），因为好的`cars`文件/数据库位于客户端（浏览器），javascript 可以访问和操作它。

但是，**小心**，你可以在你的服务器中找到一个`cars`文件/数据库，因为 SQLite 每次找不到它时都会将它创建为空。

如果您需要使用正版`cars`文件/数据库，您需要先上传到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:57:37.287

*编辑*
表看这里 [如何列出使用 ATTACH 打开的 SQLite 数据库文件中的表？](https://stackoverflow.com/questions/82875/how-do-i-list-the-tables-in-a-sqlite-database-file)

如果表不存在，那么您可以对不存在的表执行任何查询，因此您会得到 FALSE。

# jsf - jsf有条件地设置id

> ID：11473983
> 
> 赞同：-1
> 
> 时间：2012-07-13T15:53:43.143
> 
> 标签：jsf, parameters, custom-tag

我有一个自定义标签并希望允许设置内部元素的 id

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">

<f:subview rendered="#{not empty id}">
    <h:message styleClass="message" id="#{id}" errorClass="message error"
        warnClass="message warn" for="#{element}" />
</f:subview>
<f:subview rendered="#{not id}">
    <h:message styleClass="message" errorClass="message error"
        warnClass="message warn" for="#{element}" />
</f:subview>
</html> 
```

但我总是得到

```
Empty id attribute is not allowed 
```

我怎样才能归档当用户设置它使用的 id 时，jsf 应该自己生成它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:38:25.813

用于`<c:if>`有条件地添加`<f:attribute>`带有`id`.

```
<h:message styleClass="message" errorClass="message error" warnClass="message warn" for="#{element}">
    <c:if test="#{not empty id}">
        <f:attribute name="id" value="#{id}" />
    </c:if>
</h:message> 
```

顺便说一句，在自定义标签中使用`<html>`而不是`<ui:composition>`甚至没有它是很奇怪的。你确定你最终得到了语法上有效的 HTML 吗？此外，您的第二个`<f:subview rendered>`表达式不正确，但这与您收到的特定错误消息无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T12:31:15.820

使用[BalusC](https://stackoverflow.com/users/157882/balusc)的答案让我`IllegalArgumentException`在`UIComponent`课堂上专门针对`id`：

```
else if ("id".equals(name) || "parent".equals(name)) {
    throw new IllegalArgumentException();
} 
```

我最终使用了 Omnifaces' `o:tagAttribute`。

# objective-c - 我可以在没有 StoryBoard segue 的情况下转到另一个视图吗？只是从视图中调用？

> ID：11473985
> 
> 赞同：5
> 
> 时间：2012-07-13T15:53:48.947
> 
> 标签：objective-c, xcode, segue

所以我想知道是否有可能从代码中的一个视图调用以转到另一个视图，而不是使用 segue。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T15:59:18.733

是的，如果您使用的是导航控制器，您只需要推送到导航控制器：

```
[self.navigationController pushViewController:otherViewCon animated:YES]; 
```

或者，如果你想要一个模态转换：

```
[self presentModalViewController:otherViewCon animated:YES]; 
```

这一切都假设`self`是一个 UIViewController。

从`otherViewCon`故事板设计的视图控制器中获取：

```
otherViewCon = [self.storyboard instantiateViewControllerWithIdentifier:@"Other View"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:59:40.743

呈现弹出框的示例：

```
 //Declare popover controller
    UIPopoverController *paparazzi;

   //Just some Interface Builder action (could be triggered by a button)
    - (IBAction)sigFocus:(id)sender
    {
        //A view controller being made from a xib file
        SigPopView *temp = [[SigPopView alloc] initWithNibName:@"SigPopView" bundle:nil];

        //Sets the view controller to be displayed
        paparazzi = [[UIPopoverController alloc] initWithContentViewController:temp];

        //Set size
        [paparazzi setPopoverContentSize:CGSizeMake(480,179)];

        //Show controller
        [paparazzi presentPopoverFromRect:theSignature.frame inView:(UIView *)self.delegate permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 
```

# ruby-on-rails - 电子邮件线程的 Rails 参数...苦苦挣扎

> ID：11473988
> 
> 赞同：0
> 
> 时间：2012-07-13T15:54:07.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试构建一个内部应用程序。我有一个带有电子邮件的模型。每封电子邮件都有一个 ID。但是，我有一个视图显示带有此查询的不同电子邮件线程：

```
@subjects = Email.all(:group => "title") 
```

我正在使用以下代码显示结果。

```
<% @subjects.each do |subject| %>
  <tr>
    <td><%= subject.title %></td>
  </tr>
<% end %> 
```

我希望用户能够单击其中一个不同的标题并转到显示所有与该标题匹配的电子邮件的页面。

我研究过传递参数，但我不太确定该怎么做。就目前而言，我正在尝试这样的事情：

```
<%= link_to 'Show thread', :action => :thread, :title => subject.title %> 
```

这会生成一个漂亮、方便的 URL。但这似乎不起作用：

```
@emails = Email.find(params[:title]) 
```

帮助、提示或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:58:34.233

您正在搜索其 id 等于标题值的记录。您应该改为对标题字段进行匹配。

如果要检索单个记录

```
@emails = Email.where(title: params[:title]).first 
```

或者

```
@emails = Email.find_by_title(params[:title]) 
```

如果要检索多条记录

```
@emails = Email.where(title: params[:title]) 
```

# command-line - MSBuild / cmd 任务“此时出乎意料”

> ID：11473989
> 
> 赞同：2
> 
> 时间：2012-07-13T15:54:09.290
> 
> 标签：command-line, msbuild, batch-file

基本上我有一个命令，它将复制源目录（和子目录）的内容，并将结构展平到目标目录中，覆盖任何重复项。

这是从命令行工作的原始命令

```
for /r 5.1.0.60 %f in (*) do @copy "%f" "deployment" /y 
```

在这种情况下

*   “5.1.0.60”是之前 TeamCity / MSBuild 任务的输出目录
*   “deployment”是步骤的展平输出的目标目录

但是，当我从 MSBuild 任务（最终作为 TeamCity 构建的一部分）内部运行此命令时，我收到以下错误

```
f" deployment /y was unexpected at this time 
```

我有以下显示该问题的基本 msbuild 脚本：

```
<Project DefaultTargets="flatten"
        xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
        ToolsVersion="3.5">
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />

  <PropertyGroup>
    <SourceDir>5.1.0.60</SourceDir>
    <TargetDir>deployment</TargetDir>
  </PropertyGroup>

  <Target Name="flatten">
    <!-- create our deployment directory -->
    <MakeDir Directories="$(TargetDir)"/>

    <!-- Copy all files flattenend to the deployment directory-->
    <Message Text="##Command  [for /r $(SourceDir) %f in (*) do @copy &quot;%f&quot; $(TargetDir) /y]"/>
    <Exec Command="for /r $(SourceDir) %f in (*) do @copy &quot;%f&quot; $(TargetDir) /y" />

  </Target>    
</Project> 
```

最终，如果过了线

```
for /r 5.1.0.60 %f in (*) do @copy "%f" "deployment" /y 
```

进入一个批处理文件并自行运行批处理文件（在msbuild之外）我得到了同样的错误，所以大概它是一个严格的cmd问题而不是MSBuild，尽管因为我认为这是MSBuild / TeamCity中的一个常见任务我已经也标记了那些。

任何帮助或指示将不胜感激。（注意 Windows 7 专业版，TeamCity 6.5）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:13:02.513

FOR variables use a single percent (%f) when used on the command line, but two percents (%%f) are required when used in in a batch file.

I'm not sure if TeamCity executes your command in a command line context or from within a temporary batch file.

# c# - FakeItEasy 是否支持 Partial Mocks 的想法？

> ID：11473992
> 
> 赞同：5
> 
> 时间：2012-07-13T15:54:31.613
> 
> 标签：c#, unit-testing, mocking, fakeiteasy

与[关于 NSubstitute 的这个问题](https://stackoverflow.com/questions/4600825/does-nsubstitute-support-the-idea-of-partial-mocks)类似，我想知道是否能够使用[FakeItEasy](https://github.com/FakeItEasy/FakeItEasy/wiki)库实现部分模拟。

FakeItEasy 似乎具有比 moq 更好的整体语法（就像前者处理将参数传递给伪造类的构造函数的强类型方式）。我正在考虑切换到 FakeItEasy，但我确实需要部分模拟支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:30:34.610

[是](http://code.google.com/p/fakeiteasy/issues/detail?id=26)的。语法与普通的 fake 没有什么不同：

```
var fake = A.Fake<Fake>();
A.CallTo(() => fake.SomeMethod()).CallBaseMethod(); 
```

或者，用基本调用覆盖所有调用：

```
var fake = A.Fake<Fake>();
A.CallTo(fake).CallBaseMethod(); 
```

**编辑**只是为了明确：必须在*具体*类上创建假对象。

# java - 如何在 web-inf/class 下的类命名空间中创建/写入文件

> ID：11473996
> 
> 赞同：1
> 
> 时间：2012-07-13T15:54:53.690
> 
> 标签：java, http, file-io, resteasy, thread-local

我编写了以下内容以将对象缓存到类资源位置。

```
static private <T> void toSerializedCache(Class<T> cls, T t, String cachecrlstr) {
  try {
    URL crl = cls.getResource(cachecrlstr);
    File crf = new File(crl.getFile());

    JAXBContext jaxbContext = JAXBContext.newInstance(cls);
    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    jaxbMarshaller.marshal(t, crf);
  }
  catch (Exception e) {
    System.out.printf("Failed to write %s to cache %s", t.getClass(), cachecrlstr);
  }
} 
```

问题是 cachecrlstr 是一个最初不存在的文件。该文件必须最初创建。

由于它最初不存在，因此类加载器会将 url 返回为 null 并且过程失败。

我不能使用绝对路径，因为此例程在 Web 服务上运行，我们需要从类加载器中推断出绝对路径。

为了解决这个问题，我将例程重写为

```
static private <T> void toSerializedCache(Class<T> cls, T t, String cachecrlstr) {
  try {
    File crf = new File(request.getSession().getServletContext().getRealPath("/WEB-INF/class"+cachecrlstr));

    JAXBContext jaxbContext = JAXBContext.newInstance(cls);
    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    jaxbMarshaller.marshal(t, file);
  }
  catch (JAXBException e) {
    System.out.printf("Failed to write %s to cache %s", t.getClass(), cachecrlstr);
  }
} 
```

但我无法获得 httpservletrequest 对象，因为此例程在 jax-rs 服务实现中。而且我不愿意编写一个http监听器（那些在web.xml中注册的）来将请求存储到Threadlocal映射中。（意思是，不想搞砸维护 Threadlocal 对象）。

但是，（虽然不愿意给它写信）我愿意从 Threadlocal 中撤回对象。

有谁知道 RestEasy 是否在 Threadlocal 中存储了我可以撤回以推断会话上下文或请求的任何 http 对象？

更重要的问题是 - 你建议我做什么来将对象写入文件，文件路径相对于`WEB-INF/class`，在我上面提到的约束下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:19:24.580

您可以`HttpServletRequest`从以下位置检索`ResteasyProviderFactory`：

```
HttpServletRequest request = (HttpServletRequest) ResteasyProviderFactory.getContextDataMap().get(HttpServletRequest.class); 
```

或者，如果您在 JAX-RS 服务或拦截器中，RESTEasy 可以`HttpServletRequest`为您注入。

```
@javax.ws.rs.core.Context
HttpServletRequest request; 
```