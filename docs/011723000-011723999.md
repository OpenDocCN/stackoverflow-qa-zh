# StackOverflow 问答 11723000-11723999

# android-layout - 图形布局编辑器可以显示占位符图像和文本吗？

> ID：11723000
> 
> 赞同：5
> 
> 时间：2012-07-30T13:54:21.957
> 
> 标签：android-layout, adt, android-view, placeholder, lorem-ipsum

在向运行时动态填充的布局添加`TextViews`和`ImageViews`时，我经常添加占位符文本和图像，以便预览真实的布局。布局编辑器是否可以在不要求我自动在我的应用程序中明确包含这些字符串和图像的情况下为我执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:03:31.873

看起来这个功能不存在，所以我创建了一个[功能请求](http://code.google.com/p/android/issues/detail?id=35728)。

> 在将 TextViews 和 ImageViews 添加到将在运行时动态填充的布局中时，我经常添加占位符文本和图像，以便预览真实的布局。
> 
> 请启用布局编辑器为我执行此操作，而无需我自动在我的应用程序中明确包含这些字符串和图像。我假设您希望在首选项中有一个默认的图像大小，并允许单个 ImageViews/texts 使用类似工具的东西覆盖默认值：defaultImageWidth=123px、tools:defaultText="Lorem Ipsum" 等。
> 
> tools:numDefaultLoremIpsumTextChars=80 将生成 80 个字符的默认文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-09T09:21:23.903

我跟进了 Jeff 的[功能请求](http://code.google.com/p/android/issues/detail?id=35728)，发现：

> 我认为这张票早于在工具命名空间下完成的工作：
> 
> [http://tools.android.com/tips/layout-designtime-attributes](http://tools.android.com/tips/layout-designtime-attributes)
> 
> 我认为现在可以完成大部分请求。设置占位符文本： tools:text 对于图像，没有占位符图像或默认大小，但我们可以使用 android 的“内部图像”。就像是：
> 
> ```
> <ImageView
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         tools:src="@android:drawable/btn_star_big_on"
>         tools:layout_width="100dp"
>         tools:layout_height="100dp"/> 
> ```

# android - 在 Android 中从 XML Web 服务解析 JSON 数据

> ID：11723001
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:33.460
> 
> 标签：android, json, web-services

我有一个 XML Web 服务。我想解析这个 XML，我想存储在一个单独的文本视图中。下面是一个 XML 内容，我已经在一个`String`变量中完成了它。

```
{
    "30_year_rate": 4.25,
    "30_year_pi": 196.78,
    "30_year_apr": 4.375,
    "20_year_rate": 4.375,
    "20_year_pi": 250.37,
    "20_year_apr": 4.5,
    "15_year_rate": 3.75,
    "15_year_pi": 290.89,
    "15_year_apr": 3.875,
    "10_year_rate": 3.625,
    "10_year_pi": 397.89,
    "10_year_apr": 3.75,
    "5_year_arm": 2.75,
    "5_year_pi": 163.3,
    "5_year_apr": 2.875,
    "7_year_arm": 3,
    "7_year_pi": 168.64,
    "7_year_apr": 3.125,
    "3_year_arm": 4,
    "3_year_pi": 190.97,
    "3_year_apr": 4.125,
    "5_year_io_arm": "N/A",
    "5_year_io_pi": "N/A",
    "5_year_io_apr": "N/A",
    "QuoteID": 1449,
    "Licensed": "N"
} 
```

如何解析这些数据？我想将它转换为 JSON 对象并检索它，或者任何其他合理的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:03:46.280

如果您从 web 服务返回的是上面的字符串，那么您已经有了一个 JSON 字符串。要创建一个可以从中检索信息的对象，请使用类似[`JSONObject`](http://developer.android.com/reference/org/json/JSONObject.html).

```
JSONObject object = new JSONObject(your_string_variable);
double thirtyYearRate = object.getDouble("30_year_rate");
String licensed = object.getString("Licensed"); 
```

等等

您可能（将）遇到一些问题，您尝试`double`从包含字符串的 JSON 字段中提取一个；即上面的“N/A”字段。您可能必须将它们作为字符串拉出，然后尝试从中解析`double`s，如果解析抛出异常，您就会知道它是一个字符串。

或者，您可以查看与 Jackson 之类的 JSON 绑定，它显然[在 Android 上运行](http://supersabrams.com/blog/?p=81)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:08:04.817

要解析 JSON，您可以使用内置的 JSONObject [org.json](http://developer.android.com/reference/org/json/package-summary.html)或[Json-lib](http://json-lib.sourceforge.net/)，如果您使用的是旧版本的 android。

要解析 XML，请使用[XMLPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。可以在此处找到示例：[解析 XML 数据](http://developer.android.com/training/basics/network-ops/xml.html)

# ios - 使用 MKMapview 的快照/屏幕截图

> ID：11723003
> 
> 赞同：1
> 
> 时间：2012-07-30T13:54:36.977
> 
> 标签：ios, mkmapview, screenshot

我正在尝试从具有 MKMapview 的视图中制作快照，以在用户选择注释时提供类似文件夹动画的跳板。

[此处](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)介绍了制作当前窗口快照的官方方法。这很好用（虽然很慢），除非地图视图没有放大太多并且设置了“regionThatFits”。地图和标记向左侧进行了无与伦比的“跳跃”，并且地图视图的网格线可见：

截图前： ![截图前](../Images/00f098359995b3aeb8a943ce824ca84a.png)

截图后： ![截图后](../Images/7b6fa78994cbb0bf2487be093e7bb342.png)

我想这与地图的平铺部分有关，但我不知道如何防止这种行为。

有什么想法吗？

# asp.net - 如何在我的视图页面中使用 html 解码？

> ID：11723006
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:44.387
> 
> 标签：asp.net, html, c#-3.0, html-encode

我的引擎是 Aspx。

我目前在编辑表格中的一列（问题答案）时遇到问题，因为其中包含 html 标记。有没有办法只解码值区域中的特定行/列？

```
<form id="updateFreqQuestionsUser" action="<%=Url.Action("SaveFreqQuestionsUser","Prod")%>" method="post">
<table> 
    <tr>
        <td colspan="3" class="tableHeader">Freq Questions User Details <input type ="hidden" value="<%=freqQuestionsUser.freqQuestionsUserId%>" name="freqQuestionsUserId"/> </td>
    </tr>
     <tr>
        <td colspan="2" class="label">Question Description:</td>
        <td class="content">
            <input type="text" maxlength="2000" name="QuestionDescription" value="<%=freqQuestionsUser.questionDescription%>" />
        </td>
    </tr>
     <tr>
        <td colspan="2" class="label">QuestionAnswer:</td>
        <td class="content">
            <input type="text" maxlength="2000" name="QuestionAnswer" value="<%=freqQuestionsUser.questionAnswer%>" />
        </td>
    </tr>
    <tr>
        <td colspan="3" class="tableFooter">
                <br />
                <a id="freqQuestionsUserUpdateButton" href="#" class="regularButton">Save</a>
                <a href="javascript:history.back()" class="regularButton">Cancel</a>
        </td> 
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:59:44.293

是的，你可以这样做：

```
<input type="text" maxlength="2000" name="QuestionAnswer" 
value="<%=Server.HtmlDecode(freqQuestionsUser.questionAnswer)%>" /> 
```

[参考](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)

# c# - VB6 Winsock 能够发送非常大的有效载荷

> ID：11723007
> 
> 赞同：1
> 
> 时间：2012-07-30T13:54:56.193
> 
> 标签：c#, .net, sockets, vb6, winsock

我正在向基本的.NET 异步套接字服务器添加文件共享功能。我希望客户端发送的有效负载只是我的 headers+commandID+binaryFileData。除了 .NET 客户端之外，该服务器还需要为来自 VB6 客户端的请求提供服务。

负责 VB6 客户端的一方制定了一种复杂的方式来传输我并不特别印象深刻的文件。它涉及发送文件的一小块，最后服务器请求下一个块。该方声称，如果您尝试使用大发送（“大”意味着任何不小的东西——1MB 是“大”），VB6 Winsock 控件将无法正常工作。这对我来说听起来很荒谬。

我希望客户端向套接字写入一个大的有效负载，并在服务器端进行消息重组/散列。VB6 Winsock控件大写真的有问题，还是对方找借口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:01:17.210

不，Winsock 和套接字控件没有文件或大小的概念，只有字节流。我希望他们达到缓冲区大小，在这种情况下，他们只需要分块发送，直到全部发送。服务器无需请求下一个块，这只会减慢速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:02:24.103

VB6 在大（对于大的小值）有效载荷方面存在问题的说法是绝对正确的。更重要的是，由此产生的问题因安装和月相而异。将超过一个 MB 发送到 VB6 winsock 控件是自找麻烦。去过那里，做到了，相信我。

也就是说，我们采用了另一条路线：一个函数将接受任意大小的有效负载，将其分块为兆字节并将其排入队列。winsock 控制事件 ( `SendComplete`IIRC) 将用于出列下一个兆字节。

这对消费应用程序是透明的（一个单独的调用，与有效负载大小无关），在发送端解决了问题 - 这在没有任何复杂协议的情况下可靠地工作，因为问题完全在客户端内部。

# ios - UrbanAirship 在 IOS 上使用 URL 推送

> ID：11723008
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:57.100
> 
> 标签：ios, push, message, urbanairship.com

我正在使用 UrbanAirship 向我的应用程序发送推送消息。我的设置适用于开发和生产。我需要将网页网址作为推送消息发送。当用户打开消息时，我希望它重定向到我添加的 url。我将此代码添加到我的 appdelegate 中。

```
`- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
      NSLog(@"userInfo:%@",[userInfo description]);
      NSLog(@"alert:%@",[[userInfo objectForKey:@"aps"] objectForKey:@"alert"]);
      NSLog(@"alert:%@",[[userInfo objectForKey:@"aps"] objectForKey:@"url"]);
} 
```

并尝试发送推送

```
{
    "aps": 
    {
        "alert": "take a look at this site ",
        "url": "www.mysite.com"
    }
} 
```

我收到了警报消息，但它再次打开了应用程序而不是 url。您能建议我如何使用 url 发送推送消息并打开该 url 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:34:32.257

有两种方法可以做到这一点

使用 safari（未经测试的代码）打开 url：

```
 - (void)application:(UIApplication *)application didReceiveRemoteNotification: (NSDictionary *)userInfo
    { 
     NSLog(@"userInfo:%@",[userInfo description]); 
     NSLog(@"alert:%@",[[userInfo objectForKey:@"aps"] objectForKey:@"alert"]);
     NSLog(@"url:%@",[[userInfo objectForKey:@"aps"] objectForKey:@"url"]); 
     webViewController.url = [NSURL URLWithString:[[userInfo objectForKey:@"aps"] objectForKey:@"url"]];
     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSURL URLWithString:[[userInfo objectForKey:@"aps"] objectForKey:@"url"]];
    } 
```

或者您必须在您的应用程序上处理它：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification: (NSDictionary *)userInfo{ 
     NSLog(@"userInfo:%@",[userInfo description]); 
     NSLog(@"alert:%@",[[userInfo objectForKey:@"aps"] objectForKey:@"alert"]);
     NSLog(@"url:%@",[[userInfo objectForKey:@"aps"] objectForKey:@"url"]); 
     webViewController.url = [NSURL URLWithString:[[userInfo objectForKey:@"aps"] objectForKey:@"url"]]; 
```

}

例如在您的 WebViewController 中需要以下方法

```
 - (void)viewWillAppear:(BOOL)animated { 
    [super viewWillAppear:animated];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
    } 
```

当然，你的 WebViewController.h 上必须是一个

```
 IBOutlet UIWebView *webView; 
```

全屏，或者你想要的......

# ruby-on-rails - Nginx 乘客不可见应用程序问题

> ID：11723010
> 
> 赞同：3
> 
> 时间：2012-07-30T13:55:10.160
> 
> 标签：ruby-on-rails, ubuntu, nginx

我有：Ubuntu 12.04 LTS
ruby​​-1.9.3-p194
Rails 3.2.7

我正在尝试通过 Nginx + Passenger 访问我的 Rails 应用程序。

**/opt/nginx/conf/nginx.conf**文件为：

```
user  test;
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    passenger_root /home/test/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.14;
    passenger_ruby /home/test/.rvm/wrappers/ruby-1.9.3-p194/ruby;

    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  10.11.11.178;

        root /efiling/public;
        passenger_enabled on;

        location / {
            root   html;
            index  index.html index.htm;
        }
.... 
```

当我输入链接**10.11.11.178**时，我会收到**Welcome to nginx！**
但我期待获得 Rails 应用程序默认页面。

怎么了？提前致谢。

* * *

@Jashwant。首先，我删除了@Brandon 提到的行。其次，我从 my_app\public 文件夹中删除了 index.html 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T16:20:06.873

尝试从配置中删除以下内容：

> ```
>  location / {
>         root   html;
>         index  index.html index.htm;
>     } 
> ```

# php - 比较文本文件中的某些行

> ID：11723011
> 
> 赞同：0
> 
> 时间：2012-07-30T13:55:13.777
> 
> 标签：php, count, text-files, nested-loops

我试图比较 $completeGoogle(5000Lines) 的 100 行中的前 10 行，并计算与另一个文件的匹配数。但是我的计数应该在 1-10 之间，我得到的答案是 5010？？？

```
foreach(new SplFileObject($completeGoogle) as $n => $line)
             if($n % 100 < 10)
                {
                    $f_Api = fopen($apiFile,'r');

                for ($i = 0 ;$i < 10; $i++)
                    {
                    $top10 = fgets($f_Api);
                        if ($line === $top10);
                            {
                            $count++;
                            }
                    }

                    fclose($f_Api);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:14:50.047

您将一个文件中的每个 1-9、100-109... 行与另一个文件中的 10 行进行比较，并将所有匹配项汇总到一个变量中`$count`。如果一切都相等，您必须获得 500（来自第一个文件的行）* 10（来自其他文件的行）= 5000 个匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:09:42.710

我失败的原因是因为一个简单的“;” 在 if 语句之后。

```
foreach(new SplFileObject($completeGoogle) as $n => $line)
             if($n % 100 < 10)
                {
                    $f_Api = fopen($apiFile,'r');

                for ($i = 0 ;$i < 10; $i++)
                    {
                    $top10 = fgets($f_Api);
                        if ($line === $top10)
                            {
                            $count++;
                            }
                    }

                    fclose($f_Api);
                } 
```

# ruby-on-rails - Rails 有很多关联

> ID：11723012
> 
> 赞同：4
> 
> 时间：2012-07-30T13:55:15.763
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations

我几乎没有什么问题让我烦恼，需要回答。一切都与下面的教程[两个多对多有关](http://railscasts.com/episodes/47-two-many-to-many?view=comments)

### 问题 1

使用 has_many 的连接表是否需要有 id？还是删除ID的最佳做法？并添加一个索引并使用另外两个主键并将其设置为唯一并在一起？

### 问题2

在建表的迁移中怎么做？

### 问题 3

在完成这些关系模型并更新数据之后。我想在每次更新时创建一组新数据（以保留数据）。控制器在更新、新建、创建模型中的外观如何？

### 问题 4

在中间表中，我想设置属性，例如具有可见的真或假，我怎样才能不仅设置第三个表，还设置第二个表参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:30:58.583

首先...提醒一句：railscast 已经很老了。在那一集中，可能有一些语法上的东西已经被新版本的 rails 过时了。

## 问题 1

如果您使用 has_many through 方法，那么您**必须在连接模型中有一个 id 列**，因为您使用**的是完整的模型**。正如 Ryan 在剧集中提到的，如果您需要跟踪其他信息，您将选择此方法。如果您使用 has_and_belongs_to_many 方法，您的表中将没有 id 列。
如果您想在多对多关联中实现不允许重复的检查（即允许项目 a 与项目 b 配对，并再次允许项目 a 到项目 b 的另一条记录），您可以使用一个简单的使用范围验证行：

```
validates_uniqueness_of :model_a_id, :scope => [:model_b_id] 
```

## 问题2

您可以使用此代码在迁移中添加索引

```
add_index :table_name, [ :join_a_id, :join_b_id ], :unique => true, :name => 'by_a_and_b' 
```

这将被插入到您的 create_table 语句下方的更改块中（但不在该 create_table 块中）。查看此问题以了解更多详细信息：[在连接表中，Rails 缺少复合键的最佳解决方法是什么？](https://stackoverflow.com/questions/880981/in-a-join-table-whats-the-best-workaround-for-rails-absence-of-a-composite-ke)

## 问题 3

我不完全清楚你想要完成什么，但如果你想在每次将新记录插入连接模型时采取一些行动，我会使用 after_create 活动记录挂钩。那看起来像这样。

```
class YourJoinModel < ActiveRecord::Base

  after_create :do_something

  def do_something
    puts "hello world"
  end
end 
```

每次创建新记录时都会调用该函数 do_something。

## 问题 4

使用 has_many through 方法将使您能够访问您在该模型中定义的关系两侧的附加属性。例如，如果您有此设置：

```
class Factory < ActiveRecord::Base
  has_many :widgets, :through => :showcases
end

class Widget < ActiveRecord::Base
  has_many :factories, :through => :showcases
end

class Showcases < ActiveRecord::Base
  belongs_to :factory
  belongs_to :widget

  attr_accessiable :factory_id, :widget_id, :visible
end 
```

你可以说类似

```
widget = Widget.first
shown = widget.showcases
shown.first.visible 
```

或者

```
shown = widget.showcases.where( :visible=> true ) 
```

您还可以联系其他协会：

```
shown.first.factory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:08:37.103

在关联中有一个列的原因`id`是它为您提供了一种删除该特定关联的方法，而无需考虑它所具有的关系。如果没有该标识符，除了指定所有外键之外，很难定义关联。

对于您的密钥只有两个组件的微不足道的情况，这并不是一个很大的差异化因素，但通常您将拥有三个或更多作为您的唯一约束的一部分，并且事情变得棘手。

拥有一个`id`也使这种关系成为一流的模型。当您操作具有关联元数据的元素时，这可能很有用。这也意味着您可以在以后毫不费力地添加元数据。这就是您所说的“问题4”的意思。将这些属性添加到连接模型。

通常，连接模型的创建方式与您创建任何其他模型一样。主键是`id`并且您创建了一系列辅助键：

```
create_table :example_things |t|
  t.integer :example_id
  t.integer :thing_id
end

add_index :example_joins, [ :example_id, :thing_id ], :unique => true
add_index :example_joins, :thing_id 
```

主`unique`索引用于防止重复并允许查找密钥对。次要用作提取所有`example_id`给定的方法`thing_id`。

在连接模型上操作元数据的常用方法是直接获取它们：

```
@example_things = @example.example_things.includes(:thing) 
```

这将加载与示例关联的 ExampleThing 和 Thing 模型。

# python - 将长条件表达式拆分为行

> ID：11723018
> 
> 赞同：21
> 
> 时间：2012-07-30T13:55:38.173
> 
> 标签：python, if-statement, python-2.6

我有一些 if 语句，例如：

```
def is_valid(self):
    if (self.expires is None or datetime.now() < self.expires)
    and (self.remains is None or self.remains > 0):
        return True
    return False 
```

当我输入这个表达式时，我的 Vim 会自动移动`and`到新行，缩进与`if`line 相同。我尝试了更多的缩进组合，但验证总是说那是无效的语法。如何建立long if's？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-30T13:57:28.833

在整个条件周围添加额外级别的括号。这将允许您根据需要插入换行符。

```
if (1+1==2
  and 2 < 5 < 7
  and 2 != 3):
    print 'yay' 
```

关于实际使用的空格数，[Python Style Guide](https://www.python.org/dev/peps/pep-0008/)没有任何规定，但给出了一些想法：

```
# No extra indentation.
if (this_is_one_thing and
    that_is_another_thing):
    do_something()

# Add a comment, which will provide some distinction in editors
# supporting syntax highlighting.
if (this_is_one_thing and
    that_is_another_thing):
    # Since both conditions are true, we can frobnicate.
    do_something()

# Add some extra indentation on the conditional continuation line.
if (this_is_one_thing
        and that_is_another_thing):
    do_something() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:57:58.330

将换行符放在括号内 `if ((....) and (...)):`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T14:04:20.467

您可以*反转*测试并在测试的子集上返回 False：

```
def is_valid(self):
    if self.expires is not None and datetime.now() >= self.expires:
        return False
    if self.remains is not None and self.remains <= 0:
        return False
    return True 
```

通过这种方式，您可以分解一长串测试并使整个测试更具可读性。

是的，您可以在布尔测试周围使用额外的括号来允许测试中的换行符，但是当您必须跨越多行时，可读性会受到很大影响。

# vb.net - 如何将 .docx 和 .pdf 转换为 .txt 文件

> ID：11723020
> 
> 赞同：1
> 
> 时间：2012-07-30T13:55:41.153
> 
> 标签：vb.net, docx

我正在开发一个应用程序，我需要将 .docx 和 .pdf 文件转换为具有基本格式的 .txt 文件。我在互联网上搜索了它，但找不到任何免费的第三方 dll。任何人都可以建议我最好的方法和一些 dll 参考。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:01:25.040

[http://support.microsoft.com/kb/316383](http://support.microsoft.com/kb/316383)很好地描述了您想要对 .docx 文件执行的操作。 [http://visualbasic.about.com/od/quicktips/qt/disppdf.htm](http://visualbasic.about.com/od/quicktips/qt/disppdf.htm)描述相同，但使用 .pdf 文件。

将文件读入代码后，使用 VB.NET 的内置文件写入功能输出到 txt 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T08:21:52.320

下面的代码将为您处理这项工作。这是我为大老板写的哈哈。我希望它有所帮助。该代码将工作表中的第一个单元格读取为存在 docx 文件的文件夹，然后将它们一个一个转换为 txt 文件并保存在同一文件夹中。

```
Const wdFormatText = 2

If Not Len(Cells(1, "A").Value) > 0 Or Dir(Cells(1, "A").Value, vbDirectory) = "" Then
    MsgBox ("Invalid Folder")
    Exit Sub
End If

Dim StrFile As String

    StrFile = Dir(Cells(1, "A").Value & "\*.docx")
    Do While Len(StrFile) > 0
        Set objWord = CreateObject("Word.Application")
        Set objDoc = objWord.Documents.Open(Cells(1, "A").Value & "\" & StrFile, False, True)
        objDoc.SaveAs Cells(1, "A").Value & "\" & StrFile & ".txt", wdFormatText
        objWord.Quit
        StrFile = Dir
    Loop 
```

# linux - 自定义文件类型的 Mime 类型

> ID：11723028
> 
> 赞同：3
> 
> 时间：2012-07-30T13:56:07.417
> 
> 标签：linux, mime-types

我正在尝试在 linux 中将自定义文件类型注册为 mime 类型。我的自定义文件类型，带有自定义扩展名，实际上是一个包含各种 xml 和其他文件的 zip 存档。

我遇到的问题是我的操作系统（kubuntu）不会将该文件识别为我的自定义 mime 类型，但坚持认为它是一个 zip 文件。

我不确定我应该从哪里开始尝试解决我的问题。我使用了以下 mime 信息文件 (tugraz-caleydo.sharedmimeinfo)：

```
<?xml version="1.0" encoding="UTF-8"?>
<mime-info xmlns='http://www.freedesktop.org/standards/shared-mime-info'>
<mime-type type="application/x-cal">  
<comment>Caleydo Project</comment>
<glob pattern="*.cal"/>
</mime-type>
</mime-info> 
```

我的桌面条目（caleydo.desktop，在 /usr/share/applications 中正确注册）：

```
[Desktop Entry]
Version=2.01
Encoding=UTF-8
Name=Caleydo
GenericName=Data Visualization 
Comment=Visualization for Molecular Biology
Exec=/usr/bin/caleydo
Icon=/usr/share/pixmaps/caleydo_256.png
StartupNotify=true
Type=Application
Categories=Science;
MimeType=application/x-cal; 
```

这些是我尝试使用的命令：

```
sudo xdg-mime install --mode system tugraz-caleydo.sharedmimeinfo
sudo xdg-mime default caleydo.desktop application/x-cal
sudo update-mime-database /usr/share/mime 
```

但是，这仍然给了我：

```
$ xdg-mime query filetype export_2012.cal 
application/zip 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:48:09.343

我终于找到了问题：

mime 信息文件必须具有确切的 mime 类型的名称。将其重命名为 x-cal.xml 就可以了。

# java - 休眠抑制信息消息

> ID：11723030
> 
> 赞同：2
> 
> 时间：2012-07-30T13:56:17.067
> 
> 标签：java, hibernate, logging, log4j

所以我在 Java 方面不是很有经验，我正在使用 Hibernate 创建一个简单的测试项目，但是我在控制台上收到了很多我想要抑制的 INFO 消息。我正在 Eclipse 中创建一个 Java SE 程序。

现在我想我明白了，然后我需要在 log4j.properties 文件中控制它，我似乎找到了要使用的适当配置，但问题是它似乎没有任何区别！

我的猜测是我的 log4j.properties 文件不知何故未被读取。但是我发现的所有细节都放在我的 src 目录的根目录中，但似乎没有任何区别。我曾尝试将它放在我的类路径中的其他地方，但都没有运气。

有人可以帮我找出问题并解决吗？

上周我在使用 JMS 时遇到了类似的 jndi.properties 文件问题。我最终解决了这个问题，我猜我通常做错了什么。因此，任何有关放置配置/属性文件的提示都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:19:56.700

log4j 日志记录层次结构顺序

OFF
FATAL
ERROR
WARN
INFO
DEBUG
TRACE
ALL

要抑制信息消息，您需要将 log4j.properties 设置为

```
#rootlogger specs
log4j.rootLogger=ERROR, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

将任何其他记录器设置为关闭

# c# - 如果 XML 元素不存在，则添加它

> ID：11723037
> 
> 赞同：1
> 
> 时间：2012-07-30T13:57:03.010
> 
> 标签：c#, xml

我正在向我的 fogram 添加一个新复选框，并且需要将其值保存到设置文件中。我正在尝试使用以下代码来做到这一点：

```
private void CloseDisconnectedCbx_CheckedChanged(object sender, EventArgs e)
{
    XDocument doc = XDocument.Load(BotsFile);
    var savedBots = doc.Descendants("SavedBots")
        .Where(p => p.Element("BotName").Value.ToLower()
                    == SelectBotBox.SelectedItem.ToString().ToLower())
        .Elements("CloseDisconnected").FirstOrDefault();
    if (savedBots == null)
    {
        try
        {
            doc.Descendants("SavedBots")
               .Where(p => p.Element("BotName").Value.ToLower()
                           == SelectBotBox.SelectedItem.ToString().ToLower())
               .FirstOrDefault()
               .Add(new XElement("CloseDisconnected",
                    Convert.ToInt32(CloseDisconnectedCbx.Checked)));
            doc.Save(BotsFile);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }
} 
```

它确实添加了新元素，但是，它看起来像这样：

```
<CloseDisconnected/> VALUE 
```

它永远不会结束元素的关闭。我的代码错了，还是我忘记了什么？

仅当在 XML 文件中找不到该元素时才应该触发此代码。如果是，则更改将由另一个按钮处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:12:31.513

```
Check parenthesis in your code

XElement xElem = new XElement("root");
xElem.Add( new XElement("CloseDisconnected", "123") ); // generates what you expect
xElem.Add( new XElement("CloseDisconnected"), "123"); // generates what you see 
```

# jquery - jquery追加截断锚

> ID：11723040
> 
> 赞同：0
> 
> 时间：2012-07-30T13:57:12.797
> 
> 标签：jquery, append, anchor

我想用 jquery append 方法附加 html 行

```
jQuery(document).ready(function() {
    $("#favoritos ul").droppable({
        drop: function(event, ui) {
            var drop = '<li><a href="/es/book/marta-5" title="Marta"><img src="/books/5/5_5th.jpg" /></a></li>';
            $(this).append(drop);
        }
    })
}) 
```

但附加这个

```
<li><a href="/es/book/marta-5" title="Marta"></a></li> 
```

没有锚。我试过作为锚文本而不是图像，但它也被截断了。

我究竟做错了什么？

# c# - MVC3将复选框值的布尔数组传递给控制器

> ID：11723049
> 
> 赞同：1
> 
> 时间：2012-07-30T13:57:48.833
> 
> 标签：c#, .net, asp.net-mvc-3

**更新：从代码中可以看出，我跳过了一个复选框 (4)。我这边的愚蠢错误！**

我的视图中有 16 个复选框，我希望它们中的每一个都绑定到模型中布尔数组（或 BitArray）中的一个元素。

如果我尝试这样做，在提交表单后，控制器只会获取数组的前 4 个元素（虽然是正确的值），所以我尝试在模型的构造函数中分配更多空间，但控制器永远不会得到叫。有什么办法可以让它工作，还是每个复选框都需要一个布尔变量？

数组：

```
public bool[] ActiveSettings { get; set; } 
```

看法：

```
<p><b>Active Settings:</b></p>
<div style="float:left">
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[0]) val0<br />
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[1]) val1<br />
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[2]) val2<br />
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[3]) val3<br />
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[5]) val4<br />
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[6]) val5<br />
@*etc..*@
</div> 
```

这是控制器中调试器的屏幕截图（应该是 bool[16]）：
![在此处输入图像描述](../Images/c5e29264e99b2333762e862b57ee4a0e.png)

我使用 Html.EditorFor 用整数数组测试了同样的东西，它工作得很好。
谢谢！

**更新：**
所以我最终做的是像这样设置这些隐藏字段：

```
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[0]) val0<br />
@Html.Hidden("NetworkSettings.ActiveSettings[0]",false)
@Html.CheckBoxFor(model => model.NetworkSettings.ActiveSettings[1]) val1<br />
@Html.Hidden("NetworkSettings.ActiveSettings[1]",false) 
```

等等......
不过，这是一个奇怪的注释：我有 16 个复选框，我所要做的就是为前 5 个设置隐藏字段，然后神奇地所有 16 个都起作用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:05:51.567

渲染的 html 是做什么用的`Checkboxfor`？第 5 个复选框是否未选中？如果值为 true，则仅在表单集合中提交复选框。如果值为 false，则不会发送。MS MVC 需要一个从零开始的数组值的不间断索引。

因此，如果选项 1-4 被选中，则选项 5 未被选中，选项 6-16 被选中，仅将 1-4 水合到视图模型中。5 不是表单集合的一部分，6-16 被忽略。

要解决此问题，还需要提交与复选框同名的隐藏字段。隐藏字段的值为 false。modelbinder 将首先使用复选框值。如果它不存在，则提交的默认值`false`将被使用。标记看起来像这样

```
<input type="checkbox" id="networksettings_activesettings_4" name="networksettings.activesettings[4]" value="true" />
<input type="hidden" id="networksettings_activesettings_4_hidden" name="networksettings.activesettings[4]" value="false" /> 
```

# javascript - javascript 中的 ASP if 语句和 while 循环

> ID：11723050
> 
> 赞同：0
> 
> 时间：2012-07-30T13:57:56.020
> 
> 标签：javascript, html, asp-classic

我注意到您可以使用 ASP 代码设置 javascript 变量。例如：

```
var test = "<%response.write(number)%>" 
```

我想知道其他类型的 ASP 代码是否可以在 javascript 中运行，例如 if 语句或 while 循环。例如：

```
function test1()
{
   count = 0;
   <%if number = 1 then%>
        count = count + 1;
   <%end if%>
}

function test2()
{
   count = 0;
   <%index = 0
   do while index < 10 %>
       count = count +1;
   <%index = index +1
   loop%>
} 
```

我对网络开发和编程比较陌生，所以我不确定这是否可能。如果这不起作用，有什么办法可以解决这个问题或用不同的方式来编码吗？

任何提示或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:08:41.123

正如我在评论中所说，了解客户端和服务器端处理在 ASP、ASP.NET、PHP 等方面的区别非常重要。

如您所知，javascript 在客户端（即浏览器）上运行。服务器端对 ASP、ASP.NET、PHP 等进行处理，然后将信息（HTML、Javascript 等）发送到浏览器。

您确实可以执行您编写的以下代码...

```
function test2()
{
   count = 0;
   <%index = 0
   do while index < 10 %>
       count = count +1;
   <%index = index +1
   loop%>
} 
```

但不是服务器进行10 次*计算*，而是服务器将*创建*该行 10 次并将其发送到浏览器......

```
function test2()
{
   count = 0;
       count = count +1;
       count = count +1;
       ... followed by another 8 lines of the same
} 
```

...意味着客户端运行 javascript 将进行 10 次计算。

取决于您需要代码做什么将取决于代码应该在客户端还是服务器端运行......几乎不可能在不知道您要做什么的情况下告诉您哪个。

希望这可以帮助

# java - java JLayeredPane如何在Window builder生成的另一个面板前面添加JPanel

> ID：11723053
> 
> 赞同：2
> 
> 时间：2012-07-30T13:58:01.200
> 
> 标签：java, swing, jpanel, jlayeredpane

我正在用java编写某种应用程序，我必须在另一个对象前面放置一些东西（按Z顺序）我知道我应该使用JLayeredPane，但实际上我对它不是很熟悉。我的想法是制作两个具有不同 Z 顺序因子的 JPanel，同时将它们插入 JLayeredPane。我粘贴了我的代码[http://www.wklejto.pl/130038](http://www.wklejto.pl/130038) 如果您告诉我出了什么问题，我将不胜感激，因为我做了很长时间没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:41:37.593

我看不出这段代码有什么问题。`JPanel` 也许您正在尝试在底层 base 之上绘制透明（不透明） （例如带有消息） `JPanel`。`setOpaque(false)`在这种情况下，你应该在你的前面调用`JPanel`。

```
 JPanel second = new JPanel();
    second.setOpaque(false);
    second.add(new JLabel("message"));
    jlp.add(second, new Integer(300)); 
```

`JPanel`s 默认情况下是不透明的 - 另一方面`JLabel`s 不是。

并查看[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)。

# java - 如何在 iReport 中为 3D 条形图动态指定系列颜色？

> ID：11723055
> 
> 赞同：1
> 
> 时间：2012-07-30T13:58:06.020
> 
> 标签：java, jasper-reports, ireport

我正在使用 3D 条形图。我想动态指定条形颜色。如果值为 1-3，则显示红色。3-7 显示橙色，7-10 显示绿色。如何在 iReport 中实现这一点？

# c# - 在 C# for WP 中使用 oAuth 和 RestSharp 登录期间出现 404 错误

> ID：11723056
> 
> 赞同：1
> 
> 时间：2012-07-30T13:58:30.793
> 
> 标签：c#, windows-phone-7, oauth-2.0, restsharp

我在 Windows Phone 7.5 应用程序中进行谷歌身份验证期间收到 404- Not Found 错误。

```
 public void login()
    {
        var cli = new RestClient("https://accounts.google.com/o/oauth2/auth");
        cli.Authenticator = new HttpBasicAuthenticator(user, password);

        var request = new RestRequest("token", Method.POST);

        cli.ExecuteAsync(request, response => 
        {
            MessageBox.Show(response.Content);
        });
    } 
```

我提供了有效的登录凭据，但它显示响应为 404-NotFound。请帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:06:59.013

由于某种原因，URI 可能没有正确形成。

如果您查看[文档](https://developers.google.com/accounts/docs/OAuth2Login)，您会注意到一个示例 URI，如果您单击它显然可以工作。这意味着该服务存在并且一切正常。您在使用 RestSharp 时做错了，为此我推荐 CodeProject 上提供的详细教程，称为*[Windows Phone 上的 Google OAuth2](http://www.codeproject.com/Articles/321291/Google-OAuth2-on-Windows-Phone)*

# eclipse - 打开eclipse插件后如何执行操作

> ID：11723066
> 
> 赞同：2
> 
> 时间：2012-07-30T13:59:10.187
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我有一个 eclipse 插件，我想在这个插件中执行某些操作，但是在 eclipse 应用程序打开之后。

我试图通过覆盖来做到这一点

`public void postWindowCreate()`

但似乎在启动应用程序时我无法进入此功能

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:16:49.743

你用e4吗？那么也许以下链接可能会有所帮助： http: [//www.eclipse.org/forums/index.php/m/886197/](http://www.eclipse.org/forums/index.php/m/886197/)

编辑：

好的，您定义自己的应用程序吗？

方法`org.eclipse.ui.application.WorkbenchWindowAdvisor`是你需要的人提供的吗？（例如`preWindowOpen()`, `preWindowShellClose()`, `postWindowRestore()`, `postWindowCreate()`, ...）

我也需要这个功能，所以我是这样做的：

您需要 3 个类，一个实现`org.eclipse.equinox.app.IApplication`例如 MyApp，一个扩展`org.eclipse.ui.application.WorkbenchAdvisor`例如 MyAdvisor，另一个扩展`org.eclipse.ui.application.WorkbenchWindowAdvisor`例如 MyWindowAdvisor。

然后在 MyApp 你可能会调用类似

```
PlatformUI.createAndRunWorkbench(display, new MyAdvisor()); 
```

您实际启动工作台并提供自己的`WorkbenchWindowAdvisor`. 在 MyAdvisor 中，您必须覆盖：

```
@Override    
public WorkbenchWindowAdvisor createWorkbenchWindowAdvisor(IWorkbenchWindowConfigurer configurer) {
    return new MyWindowAdvisor(configurer);
} 
```

您在其中提供您的`WorkbenchWindowAdvisor`. 在课堂`MyWindowAdvisor`上，您最终可以覆盖适当的功能，例如

```
@Override
public void postWindowOpen() {
    //TODO
} 
```

当然，您必须运行适当的应用程序才能使其工作；）好的，现在，要提供任意插件来处理这些事件，您可以定义一个扩展点。

首先，您需要一个定义要收听的“事件”的接口，例如：

```
public interface IWorkbenchWindowAdvisorHook
{
    /**
     * Performs arbitrary actions before the window is opened.
     * <p>
     * This method is called before the window's controls have been created.
     * Clients must not call this method directly (although super calls are okay).
     * The default implementation does nothing. Subclasses may override.
     * Typical clients will use the window configurer to tweak the
     * workbench window in an application-specific way; however, filling the
     * window's menu bar, tool bar, and status line must be done in 
     * {@link ActionBarAdvisor#fillActionBars}, which is called immediately
     * after this method is called.
     * </p>
     */
    void preWindowOpen();

    /**
     * Performs arbitrary actions as the window's shell is being closed
     * directly, and possibly veto the close.
     * <p>
     * This method is called from a ShellListener associated with the window,
     * for example when the user clicks the window's close button. It is not
     * called when the window is being closed for other reasons, such as if the
     * user exits the workbench via the {@link ActionFactory#QUIT} action.
     * Clients must not call this method directly (although super calls are
     * okay). If this method returns <code>false</code>, then the user's
     * request to close the shell is ignored. This gives the workbench advisor
     * an opportunity to query the user and/or veto the closing of a window
     * under some circumstances.
     * </p>
     * 
     * @return <code>true</code> to allow the window to close, and
     *         <code>false</code> to prevent the window from closing
     * @see org.eclipse.ui.IWorkbenchWindow#close
     * @see WorkbenchAdvisor#preShutdown()
     */
    public boolean preWindowShellClose();

    /**
     * Performs arbitrary actions after the window has been restored, 
     * but before it is opened.
     * <p>
     * This method is called after a previously-saved window has been
     * recreated. This method is not called when a new window is created from
     * scratch. This method is never called when a workbench is started for the
     * very first time, or when workbench state is not saved or restored.
     * Clients must not call this method directly (although super calls are okay).
     * The default implementation does nothing. Subclasses may override.
     * It is okay to call <code>IWorkbench.close()</code> from this method.
     * </p>
     * 
     * @exception WorkbenchException thrown if there are any errors to report
     *   from post-restoration of the window
     */
    void postWindowRestore() throws WorkbenchException;

    /**
     * Performs arbitrary actions after the window has been created (possibly 
     * after being restored), but has not yet been opened.
     * <p>
     * This method is called after the window has been created from scratch, 
     * or when it has been restored from a previously-saved window.  In the latter case,
     * this method is called after <code>postWindowRestore</code>.
     * Clients must not call this method directly (although super calls are okay).
     * The default implementation does nothing. Subclasses may override.
     * </p>
     */
    void postWindowCreate();

    /**
     * Performs arbitrary actions after the window has been opened (possibly 
     * after being restored).
     * <p>
     * This method is called after the window has been opened. This method is 
     * called after the window has been created from scratch, or when
     * it has been restored from a previously-saved window.
     * Clients must not call this method directly (although super calls are okay).
     * The default implementation does nothing. Subclasses may override.
     * </p>
     */
    void postWindowOpen();

    /**
     * Performs arbitrary actions after the window is closed.
     * <p>
     * This method is called after the window's controls have been disposed.
     * Clients must not call this method directly (although super calls are
     * okay). The default implementation does nothing. Subclasses may override.
     * </p>
     */
    void postWindowClose();
} 
```

然后是扩展点架构（将所有“ ***YOUR-xxx*** ”替换为您自己的包/插件名称和命名空间）：

```
<?xml version='1.0' encoding='UTF-8'?>
<!-- Schema file written by PDE -->
<schema targetNamespace="***YOUR-NAMESPACE***" xmlns="http://www.w3.org/2001/XMLSchema">
<annotation>
      <appInfo>
         <meta.schema plugin="***YOUR-PLUGIN***" id="workbenchWindowHook" name="***YOUR-PACKAGE***.workbenchWindowHook"/>
      </appInfo>
      <documentation>
         An extension to actively hook into the WorkbenchWindowAdvisor&apos;s pre/post methods from other plug-ins.
This is primarily intended for plug-ins that are optional or restricted to some specific products.
      </documentation>
   </annotation>

   <element name="extension">
      <annotation>
         <appInfo>
            <meta.element />
         </appInfo>
      </annotation>
      <complexType>
         <sequence>
            <element ref="class" minOccurs="1" maxOccurs="unbounded"/>
         </sequence>
         <attribute name="point" type="string" use="required">
            <annotation>
               <documentation>

               </documentation>
            </annotation>
         </attribute>
         <attribute name="id" type="string">
            <annotation>
               <documentation>

               </documentation>
            </annotation>
         </attribute>
         <attribute name="name" type="string">
            <annotation>
               <documentation>

               </documentation>
               <appInfo>
                  <meta.attribute translatable="true"/>
               </appInfo>
            </annotation>
         </attribute>
      </complexType>
   </element>

   <element name="class">
      <annotation>
         <documentation>
            The hook class implementing IWorkbenchWindowAdvisorHook.
         </documentation>
      </annotation>
      <complexType>
         <attribute name="name" type="string" use="required">
            <annotation>
               <documentation>
                  The hook class implementing IWorkbenchWindowAdvisorHook.
               </documentation>
               <appInfo>
                  <meta.attribute kind="java" basedOn=":***YOUR-PACKAGE***.IWorkbenchWindowAdvisorHook"/>
               </appInfo>
            </annotation>
         </attribute>
      </complexType>
   </element>

   <annotation>
      <appInfo>
         <meta.section type="since"/>
      </appInfo>
      <documentation>
      </documentation>
   </annotation>
</schema> 
```

然后，在您的 MyWindowAdvisor 中，您需要保留对扩展的引用

```
// the reference list
private List<IWorkbenchWindowAdvisorHook> hooks = new ArrayList<IWorkbenchWindowAdvisorHook>(); 
```

加载/初始化扩展

```
//code for initializing the extensions, must be called in the constructor
private void initExtensions()
{
    IConfigurationElement[] config = Platform.getExtensionRegistry().getConfigurationElementsFor(
            IWorkbenchWindowAdvisorHook.ID);
    for(IConfigurationElement element : config)
    {
        try
        {
            final Object o = element.createExecutableExtension("name"); //$NON-NLS-1$
            if(o instanceof IWorkbenchWindowAdvisorHook)
            {
                hooks.add((IWorkbenchWindowAdvisorHook)o);
            }
        }
        catch(CoreException e)
        {
            e.printStackTrace();
        }
    }
} 
```

并在每个“事件”函数中调用扩展的方法：

```
// example method preWindowOpen()
public void preWindowOpen()
{
    for(IWorkbenchWindowAdvisorHook hook : hooks)
    {
        try
        {
            hook.preWindowOpen();
        }
        catch(Throwable t)
        {
            CorePlugin.logDefaultError(t);
        }
    }
} 
```

最后一步是在您需要监听这些工作台窗口事件的每个插件中提供扩展和类。

# grails - 无法使用 Groovy 访问参数映射

> ID：11723067
> 
> 赞同：1
> 
> 时间：2012-07-30T13:59:11.767
> 
> 标签：grails, groovy, taglib

我需要一点帮助，我怀疑这是由于我对 Groovy 语法缺乏了解。所以，事情是这样的：

在 GSP 页面上，我想从 params 映射中设置一个字段的值，即

```
 ["id":"107901", "Field_10.value":"2", "Field_10":["value":"2"],"Field_11.value":"", "Field_11":["value":""],action:'abc'] 
```

在 gsp 页面上，我想根据键 Field_{some-id}.value 找到值

所以我称之为标签， `g.testTag(id:field.id)` 其实现为

```
def testTag = { attrs,body->

    println "params are ${params}"
    def result = ""
    def keyRequired = "Field_${attrs.id}.value"
    println "keyRequired >>>>> ${keyRequired.toString()}"
    params.each { key,value->
        println "key is ${key}"
        println "Value is ${value}"
        if (key.equals(keyRequired.toString())) {
            result = params.value
        }
    }
    println "Final result is >>>>>> ${result}"
} 
```

在 id 中传递的值是 10 并且我的参数打印如上，我期望值 2 对应于显示的参数中的键。但显然我认为结果为空..

我究竟做错了什么 ？谁能帮忙请...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:03:48.073

不是`result = params.value`，但是`result = value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:30:43.557

您必须更改行：

```
result = params.value 
```

到：

```
result = value 
```

在每个循环中，您基本上是在说在 params 迭代中，您将每个键命名为“键”，将每个值命名为“值”。因此， params.value 实际上会在您的 params 映射中查找键值，该键值为 null。

有趣的是，您使用关键而不是价值正确地做到了这一点。大概只是分心了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T06:55:22.400

这可能是您想要做的，常规方式（无需遍历地图的键）来访问`"Field_10.value":"2"`

```
result=params["Field_${attrs.id}.value"] 
```

或者，这也有效，因为您`"Field_10":["value":"2"]`的地图中有

```
result=params["Field_${attrs.id}"].value 
```

# iphone - 应用名称已更新，但未在 GameCenter 上

> ID：11723069
> 
> 赞同：12
> 
> 时间：2012-07-30T13:59:16.213
> 
> 标签：iphone, ios, game-center, gamekit

我有一个非常简单的问题，但我没有找到任何解决方案。几周前我在 AppStore 中更新了我的应用程序名称，而就在几天前，我在 GameCenter 中看到它并没有改变。

是我必须更改的内容还是应该与 Apple 支持联系？

看看：

![iTunes Connect 中的名称已正确更改](../Images/be4d107a6c013eb9de7803a39c6f5dc0.png)

![应用程序的旧名称相同](../Images/95fb0a23cf6e44a85e99bbbcabb217e2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:03:25.203

我正在开发的应用程序也遇到了同样的问题。我发现当我第二次更新应用程序时，GameCenter 中的名称发生了变化。

# javascript - 将我创建的假数组转换为 JavaScript 中的真实数组

> ID：11723070
> 
> 赞同：5
> 
> 时间：2012-07-30T13:59:25.833
> 
> 标签：javascript, javascript-objects

我知道在 JavaScript 中有时系统会创建一个假数组，这意味着它实际上是一个对象而不是 Array 的实例，但仍然具有数组的部分功能。例如，您在函数中获得的 arguments 变量是系统创建的假数组。在这种情况下，我知道要将它变成一个真正的数组，你可以这样做：

```
var realArray = Array.prototype.slice.call(fakeArray); 
```

但是如果系统没有创建假数组怎么办，如果 fakeArray 只是：

```
var fakeArray = { "0": "some value", "1": "another value" }; 
```

在这种情况下，我对其进行了测试，使用上面的方法将导致一个空数组。我希望能够将我给出的示例中的假数组（由我而不是由系统创建）变成一个真正的数组。在你告诉我从一开始就简单地将假数组变成真正的数组之前，你应该知道我是从我无法控制的资源中获取假数组的。

那么，如何将不是系统创建的假数组变成真正的数组呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:02:00.423

如果为您的“假数组”提供了`.length`适当设置的属性，您的示例将起作用。

这在某些旧版本的 Internet Explorer 中不起作用。

* * *

> *“将假数组变成真实数组的目的之一是获取它的长度”*

如果您想要对象中的属性数量，请使用`Object.keys`...

```
var len = Object.keys(fakeArray).length; 
```

要`Object.keys`为旧版浏览器填充垫片，您可以执行此操作...

```
if (!Object.keys) {
    Object.keys = function(o) {
        var keys = [];
        for (var k in o)
            if (o.hasOwnProperty(k))
                keys.push(k)
        return keys;
    };
} 
```

* * *

如果假数组是“稀疏的”，您将需要像 @Rocket 节目这样的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:02:14.487

您可以简单地遍历“数组”并将值保存到真实数组中。

```
var fakeArray = { "0": "some value", "1": "another value" };
var realArray = [];

for(var i in fakeArray){
    realArray[i] = fakeArray[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:17:42.787

您可以迭代对象属性，同时将所需的属性推送到新数组：

```
var array = [];

for (var i in fakeArray) if (fakeArray.hasOwnProperty(i)) {
    array.push(fakeArray[i]);
} 
```

# java - Java 双重强制转换 (int[]) (int[])

> ID：11723077
> 
> 赞同：3
> 
> 时间：2012-07-30T13:59:34.103
> 
> 标签：java, casting

做什么`(int[]) (int[])`？

```
private Object[] slots = new Object[8192];

int[] block = (int[]) (int[]) this.slots[0]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T14:03:19.653

在这种情况下，第二个演员什么也不做。和打字一样

```
private Object[] slots = new Object[8192];

int[] block = (int[]) this.slots[0];
block = (int[]) block; 
```

编辑：

澄清一下，我所指的“第二个”演员是左边的演员。

# drupal-7 - 在 drupal 7 中处理图像

> ID：11723078
> 
> 赞同：0
> 
> 时间：2012-07-30T13:59:37.490
> 
> 标签：drupal-7, drupal-modules, drupal-views

如何在块区域的drupal中添加单个图像以及如何在drupal 7中管理幻灯片。我是drupal的新手请给我一步一步的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:11:02.223

您可以通过创建自定义块并使用 PHP 代码在块区域中添加图像 sites/default/files/image-name.jpg">

要在 drupal 7 中创建幻灯片，您可以使用 view slideshow cs 模块。

要在 drupal 中制作幻灯片，您必须执行以下几个步骤：

*   为幻灯片创建内容类型
*   在设置中创建视图并使用幻灯片
*   使用内容类型添加图像
*   欣赏幻灯片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:42:20.633

您可以通过将其包含在代码中`<img src="<url>">`并选择完整的 HTML 过滤器来添加简单的图像

幻灯片放映有很多选项，请参阅此处的列表：http: [//drupal.org/node/418616](http://drupal.org/node/418616)

# asp.net-mvc - asp.net mvc 脚本包添加所有文件

> ID：11723082
> 
> 赞同：2
> 
> 时间：2012-07-30T13:59:49.240
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization

当您添加脚本包并具有以下内容时：

```
bundles.Add(new ScriptBundle("~/bundles/base.scripts").Include(
                            "~/Scripts/jquery-1*")); 
```

它加载原始 Jquery 版本和缩小版本。这些文件都在 Scripts 文件夹中，所以我假设星号完全按照你说的做。

有没有办法在 debug=false 模式下只呈现缩小版本，在 debug=true 下呈现原始版本？

还是归结为实际指定您想要的确切文件而不是使用星号？

问候， 雅克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:32:25.870

这应该通过 BundleCollection 的 FileExtensionReplacementList 自动发生，当 debug=false 时应该选择文件的 .min 版本。创建新项目时的默认模板也应该使用此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T09:58:15.383

虽然这个问题现在已经有一年多了，但如果有人偶然发现它需要关于同一问题的帮助，Bundling 引入了 {version} 通配符，它​​使用正则表达式来查找典型的版本号模式（例如 1.9\. 1) 这样当您手动或通过 NuGet 更新包时，您不必去更改您的 Bundles 配置。

从名为 .min.js 和 .js 的文件中进行选择也足够聪明——在发布配置中使用前者，在调试中使用后者，这正是 OP 所追求的。

> 对于 ASP.NET MVC 4，这意味着使用调试配置，文件 jquery-1.7.1.js 将被添加到包中。在发布配置中，将添加 jquery-1.7.1.min.js。捆绑框架遵循几个常见的约定，例如：
> 
> *   当“FileX.min.js”和“FileX.js”存在时选择“.min”文件发布。
> *   选择非“.min”版本进行调试。
> *   忽略仅由 IntelliSense 使用的“-vsdoc”文件（例如 jquery-1.7.1-vsdoc.js）。

请参阅[MVC4 Bundle 中的](https://stackoverflow.com/questions/12029161/version-wildcard-in-mvc4-bundle)[捆绑和缩小](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)以及{version} 通配符

但是，如果您在目录中同时拥有 jQuery-1.9.1.js 和 jQuery-1.10.2.js （例如），那么请注意警告，那么**两者都**将被匹配并添加到包中——这显然是不可取的。

另请注意，**文件**的缩小版本必须命名为 file.min.js，而不是 file-min.js 或 min.file.js 才能正常工作。例如，当您通过 NuGet 获取 YepNope 库时，它的名称为 yepnope.1.5.4-min.js，这意味着此版本和未缩小版本都已添加到捆绑包中。

# web-services - 像谷歌一样从 london2012 获取信息

> ID：11723089
> 
> 赞同：0
> 
> 时间：2012-07-30T14:00:09.577
> 
> 标签：web-services, api

我正在尝试开发一些与奥运会相关的应用程序。

有人知道如何从 www.london2012.com 页面获取信息，就像谷歌在结果中所做的那样？是否存在 API？我在哪里可以找到 API？我想，也许可以使用如下网址来完成：

> www.london2012.com?country=12

（这不是真的，只是我认为 API 可能看起来的样子）

例如，当我搜索“伦敦奥运会”时，我看到一个显示一些结果的“小工具”，我相信这些来自 www.london2012.com。有谁知道这是不是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:07:04.617

我不确定您使用的是哪种编程语言，因此很难提供适当的答案。我怀疑 www.london2012.com 已经生成了一个仅用于访问的 API，因此您需要进行查询（就像您在帖子中所说的那样）。例如，如果你使用 Python，你可以使用 urllib 模块来编写你的请求。

但是，请注意。我刚刚阅读了 www.london2012.com 服务条款 (http://www.london2012.com/terms-of-use/)，您不得将此信息用于非个人用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:03:17.173

这是可能的，但可能不允许（参见网站的服务条款）。

您需要您的应用程序对页面 URL 进行 HTTP 调用并解析 HTML 响应。显然，这样做的方式在很大程度上取决于您使用的语言/技术，您没有在问题中指出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T23:00:22.713

奥运会使用称为 ODF - Olympic Data Feed 的系统将实时统计数据从比赛分发给授权方，通常采用 XML 格式。这些授权方包括认可的世界新闻机构（所以，是的，谷歌计数），权利持有广播公司（付费获得散布奥运会内容的权利的广播公司 - 美国的 NBC，英国的 BBC 等）和国际体育联合会. 他们在[此处](http://odf.olympictech.org/2016-Rio/rio_2016_OG.htm)列出了字典- 但除非您是上述授权方之一，否则您无法访问它。所以也许去 python 或其他一些网络抓取路线是最好的。

# http - 使用 jetty 和 nginx 处理 HTTP HEAD 请求

> ID：11723091
> 
> 赞同：0
> 
> 时间：2012-07-30T14:00:12.763
> 
> 标签：http, nginx, jetty, servlet-filters

我正在寻找使用码头（java servlet）和 nginx 处理 HEAD 请求的最佳方法。对于我最初的“mvp”解决方案，我打算只编写一个将 HEAD 更改为 GET、记录内容长度并丢弃响应的 servlet 过滤器。我也在寻找一种纯粹在 nginx 中执行此操作的方法，但我无法找到任何关于此的内容。似乎这是一个以前必须解决的问题，但我没有看到任何简单的解决方案记录在互联网上。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:30:55.617

创建您的 servlet，以便它扩展[HttpServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)

然后重写[doHead(HttpServletRequest, HttpServletResponse)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doHead%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)方法来处理 HEAD 请求。

# .net - oracle number 数据类型问题

> ID：11723092
> 
> 赞同：0
> 
> 时间：2012-07-30T14:00:14.347
> 
> 标签：.net, database, oracle

我的表中有一个字段，其数据类型为`NUMBER (16,2)`.

我正在尝试插入

```
99999999999999.99 
```

我正在使用`.NET`调用过程并将值插入表中。

所以我使用十进制（.NET 类型）来获取值并将其作为`NUMBER`（OracleType）发送到 Oracle Proc。但不知何故，我从过程中得到了四舍五入的值，即

```
100000000000000 
```

它发生在有效数字为 14 或更多时。

我尝试了不同的组合，`NUMBER(17,2)`但没有任何效果。

可能是什么问题？

这是我正在使用的

```
Decimal numberField = Convert.ToDecimal(value);
OracleParameter oraPram;
            oraPram = new OracleParameter("paramName", OracleType.Number);
            oraPram.Direction = ParameterDirection.Input;
            oraPram.Value = numberField; 
```

表结构是

```
Id      ----  Number
Quant   ----- Number(16,2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:03:52.047

很难用您提供的详细程度来判断，但我猜您正在使用的 Oracle 存储过程的参数类型是 NUMBER。它应该使用`%TYPE`属性来定义。

# linq-to-sql - 如何在 LINQ 中执行此查询

> ID：11723094
> 
> 赞同：2
> 
> 时间：2012-07-30T14:00:20.930
> 
> 标签：linq-to-sql

下午，

我想知道我将如何在 LINQ 中进行此查询，任何人都可以帮忙。

```
 SELECT   Id, ExportDate,
         (SELECT        TOP (1) Id
          FROM            Orders
          WHERE        (PickupListId = PickingLists.Id)) AS StartOrderId,
         (SELECT        TOP (1) Id
          FROM            Orders AS Orders_1
          WHERE        (PickupListId = PickingLists.Id)
          ORDER BY Id DESC) AS EndOrderId,
         (SELECT        COUNT(Id) AS Expr1
          FROM            Orders AS Orders_2
          WHERE        (PickupListId = PickingLists.Id)) AS NumberOfOrders
 FROM     PickingLists
 ORDER BY ExportDate DESC 
```

**更新** 我已经根据 Andrei 的解决方案更新了我的代码，但是转换 ID 时出现问题，你能看到它可能是什么吗？

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<GetPickingLists> GetPickingLists()
    {
        using (aboDataDataContext dc = new aboDataDataContext())
        {
            var query = from list in dc.pickingLists
                        orderby list.ExportDate descending
                        select new GetPickingLists
                        {
                            plId = list.Id,
                            plDate = list.ExportDate,
                            orderStart = Convert.ToInt32(dc.amzOrders.Where(order => order.pickupListId == list.Id).FirstOrDefault()),
                            orderEnd = Convert.ToInt32(dc.amzOrders.Where(order => order.pickupListId == list.Id).OrderByDescending(order => order.id).FirstOrDefault()),
                            orderCount = dc.amzOrders.Where(order => order.pickupListId == list.Id).Count(),
                        };

            return query.ToList();
        }
    } 
```

我创建了这个来设置响应，不确定是否需要。干杯。

```
 public class GetPickingLists
{
    public int plId { get; set; }
    public int orderStart { get; set; }
    public int orderEnd { get; set; }
    public int orderCount { get; set; }
    public DateTime plDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:07:40.563

试试这样：

```
var query = db.PickingLists
            .OrderByDescending(pl => pl.ExportDate)
            .Select(pl => new GetPickingLists { 
               plId = pl.Id, 
               plDate = pl.ExportDate, 
               orderStart = db.Orders.FirstOrDefault(o => o.PickupListId = pl.Id).Id, 
               orderEnd = db.Orders.LastOrDefault(o => o.PickupListId = pl.Id).Id, 
               orderCount= db.Orders.Count(o => o.PickupListId = pl.Id) 
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:08:30.657

```
var query = from list in dbContext.PickingLists
            orderby list.ExportDate descending
            select new
            {
                list.Id,
                list.ExportDate,
                StartOrderId = dbContext.Orders.Where(order => order.PickupListId == list.Id).FirstOrDefault().Id,
                EndOrderId = dbContext.Orders.Where(order => order.PickupListId == list.Id).OrderByDescending(order => order.Id).FirstOrDefault().Id,
                NumberOfOrders = dbContext.Orders.Where(order => order.PickupListId == list.Id).Count(),
            } 
```

# opengl - OpenGL - 渲染具有固定像素半径的球体

> ID：11723099
> 
> 赞同：0
> 
> 时间：2012-07-30T14:00:33.277
> 
> 标签：opengl, geometry, pixel, transformation

我目前正在使用 glutsolidsphere() 来渲染一个球体。当然，缩放后，球体看起来是一个椭球体。那么有没有办法渲染一个具有固定像素半径的球体？我只想在某个位置（x，y，z）绘制一个具有一定像素半径（例如，r = 10 像素）的球体，并确保其形状不会受到建模转换的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:19:44.173

旋转、平移和缩放等变换不应影响球体的外观。请记住在所有 3 个轴上按相同的值正确缩放。或者您可以将顶点乘以一个常数标量，这样就可以缩放球体而不会使其变形。如果您仍然看到失真，可能是因为您的相机（高 FOV 往往会在边缘附近失真）或错误的纵横比（重新调整 openGL 窗口的大小不会保留纵横比）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:16:09.090

缩放时，您可以缩放 x、y 和 z。如果在每个维度上使用相同的值进行缩放，它将保持为球体。

如果要应用始终提供相同大小的球体的缩放（以像素为单位），则必须根据视口大小定义进行缩放。这些是你给 glViewport() 的参数。

例如，当缩放“x”时，使用因子 k/width（其中宽度取自 glViewport）。根据球体的大小，根据需要选择常量“k”。

可以使用 glGet() 请求通过 glViewport() 发送的数据，但应避免从 OpenGL 读取数据。在最坏的情况下，它将等待管道刷新。一个更好的主意是记住 glViewport() 使用了什么。

您是否意识到 glut 已经过时且不再推荐？那个 glutsolidsphere 基于已弃用的固定功能管道 OpenGL？

# php - 为什么我收到致命错误：调用未定义的函数 prep_connections()？

> ID：11723102
> 
> 赞同：0
> 
> 时间：2012-07-30T14:00:41.967
> 
> 标签：php

如果您查看代码，它的定义明确且公开。

```
<?php
class Config {
  public function prep_connections($collection){

  }

  public function get_connctions(){
    require_once('readfile.php');

    $reader = new Readfile();

    $collections = json_decode($reader->read("../../config/database.cfg"));

    foreach($collections as $collection){
       prep_connections($collection);
    }
  }
}

$config = new Config();
$connections = $config->get_connctions(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:11:33.587

您`prep_connections`在类范围之外调用。

你想打电话`Config->prep_connections();`，但实际上你只是打电话`\prep_connections();`。

你应该改变你的线路：

```
prep_connections($collection); 
```

至：

```
$this->prep_connections($collection); 
```

或者

```
self::prep_connections($collection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:04:24.430

你需要通过调用它`$this`，告诉它在同一个/这个类中

```
$this->prep_connections($collection); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:04:17.933

`prep_connections()`没有定义。您必须`include`或`require`定义您的功能的文件才能使它们工作。

# dynamics-crm-2011 - CRM2011 机会属性 CreatedBy、ModifiedBy 和 New_PrimarySalesContactId

> ID：11723104
> 
> 赞同：0
> 
> 时间：2012-07-30T14:01:03.260
> 
> 标签：dynamics-crm-2011

在 CRM 2011 中，在创建机会时，将值分配给 CreatedBy、ModifiedBy 和 New_PrimarySalesContactId 以获取 Opportunity 的编译时错误表示上述所有属性都是只读的。在 CRM 4.0 中，在创造机会的同时，可以为上述属性分配值。如何在通过代码创造机会的同时为上述属性赋值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:52:30.930

[只有一种方法](http://social.microsoft.com/Forums/en/crm/thread/a92b252f-5164-40c4-94e8-3d78f43f7670)可以设置 CreatedBy：您必须模拟用户。

[http://msdn.microsoft.com/en-us/library/cc150987(v=MSDN.10).aspx](http://msdn.microsoft.com/en-us/library/cc150987(v=MSDN.10).aspx)

# ruby - mongoid3 中这个 mongoid2 查询的等价物是什么？

> ID：11723105
> 
> 赞同：1
> 
> 时间：2012-07-30T14:01:11.607
> 
> 标签：ruby, mongodb, mongoid

我在 Mongoid2 中有这个查询工作正常：

```
GlobalWord.collection.update({"_id" => "foo"}, {"$inc" => {:count => 1}}, :upsert => true) 
```

如果找到`GlobalWord`带有 id 的`foo`，则将其计数更新一，否则它创建一个带有 id`foo`且计数为 1 的文档。我在 mongoid3 中没有找到对应的。

编辑：我需要查询是原子的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:23:05.077

我使用了 GlobalWord.create(:id => word).inc(:count, 1) 这似乎是原子的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:29:06.203

我相信这应该有效：

```
GlobalWord.find("_id": "foo").upsert("$inc": {count: 1}) 
```

不过我没有测试它。我的手机上没有 MongoDB :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T16:27:10.137

来自[文档](http://mongoid.org/en/mongoid/docs/persistence.html#atomic)和[rdoc](http://rdoc.info/github/mongoid/moped/Moped/Query#upsert-instance_method)

`GlobalWord.new(id: word).upsert("$inc" => {count: 1})`

# perl - 一次读取一个 ARGV 文件

> ID：11723108
> 
> 赞同：2
> 
> 时间：2012-07-30T14:01:21.920
> 
> 标签：perl

我希望在其自己的数组中读取使用 ARGV 指定的每个（小）文件。如果我不测试`$ARGV`，`<>`将把所有文件都放在一个表中。有更好/更短/更简单的方法吗？

```
# invocation: ./prog.pl *.txt

@table = ();
$current = "";
while (<>)
{
  if ($ARGV ne $current)
  {
    @ar = ();
    $current = $ARGV;
    if ($current)
    {
      push @table, \@ar;
    }
  }
  push @ar;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:15:36.900

该[`eof`](http://perldoc.perl.org/functions/eof.html)函数可用于检测每个文件的结尾：

```
#!/usr/bin/env perl

use strict;
use warnings;

my @files;
my $file_ctr = 0;
while (<>) {
    chomp;
    push @{ $files[$file_ctr] }, $_;
}
continue { $file_ctr++ if eof } 
```

相关文件：

> **在`while (<>)`循环中，`eof`或`eof(ARGV)`可用于检测每个文件的结尾**，而`eof()`仅检测最后一个文件的结尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:30:58.400

请*始终* `use strict`在您的程序的顶部，并`use warnings`使用`my`.

最简单的方法是在`ARGV`文件句柄上测试文件结束以确定何时打开新文件。

这段代码使用状态变量`$eof`来记录前一个文件是否已被完全读取，以避免在到达列表`@table`末尾时不必要地向数组添加新元素。`@ARGV`

```
use strict;
use warnings;

my @table;
my $eof = 1;

while (<>) {
  chomp;
  push @table, [] if $eof;
  push @{$table[-1]}, $_;
  $eof = eof;
} 
```

* * *

[@Alan Haggai Alavi](https://stackoverflow.com/users/66353/alan-haggai-alavi)在文件末尾增加索引而不是设置标志的想法要好得多，因为它避免了在每个文件开头显式创建空数组的需要。

这是我对他的解决方案的看法，但这完全取决于 Alan 的帖子，他应该为此获得赞誉。

```
use strict;
use warnings;

my @table;
my $index = 0;

while (<>) {
  chomp;
  push @{$table[$index]}, $_;
  $index++ if eof;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T14:08:40.000

文件数组引用的哈希：

```
my %files;
while (<>) {
  push @{$files{$ARGV}}, $_;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T14:16:46.020

您可以利用 File::Slurp 来避免自己打开和关闭文件。

```
use strict;
use warnings;

use File::Slurp;

my @table = ();

foreach my $arg ( @ARGV ) {
   push @table, read_file( $arg, array_ref => 1 );
} 
```

# c# - 绑定resp。数据模板混乱

> ID：11723111
> 
> 赞同：0
> 
> 时间：2012-07-30T14:01:38.380
> 
> 标签：c#, wpf, binding

我还是个新手，正在尝试我的第一个严肃的数据绑定。我已经阅读了很多关于它是如何工作的，我只是在努力解决这个具体的例子。我试图阅读我能找到的所有链接，但大多数来源在关键点上往往有点不精确。所以这里是：

-我的应用程序动态生成一个“List”类型的变量“PlayerList”，其中“Player”是一个复杂对象。

-我想通过绑定在 ListBox 中显示它。显然，由于 Player 是一个复杂的对象，我想为它创建一个 DataTemplate。所以我在'Window1.xaml'中有这样的东西：

```
<ListBox 
    Name="ListBox_Players" 
    ItemsSource="{Binding Source={StaticResource PlayerListResource}}"
    ItemTemplate="{StaticResource PlayerTemplate}">
</ListBox> 
```

和'App.xaml'中的类似内容：

```
<DataTemplate x:Key="PlayerTemplate">  <!-- DataType="{x:Type Player}" --> 
    <StackPanel Orientation="Horizontal">
      <TextBlock Text="{Binding Path=name}"/>
      <TextBlock Text=", "/>
      <TextBlock Text="{Binding Path=nrOfTabls}"/>
    </StackPanel>
</DataTemplate> 
```

当然，这个模板以后会变得更加冗长。所以正如你在上面看到的，我试图为 PlayerList 变量创建一个资源，但还没有管理，即 smthn。像这样

```
<src: XXX x:Key="PlayerListResource"/> 
```

据我了解，对于 XXX，我应该输入 Resource 变量的类。我试过了

```
List<Player>, List<src:Player> 
```

等等，但是obv。XAML 对“<,>”字符有问题。

我还有另一个问题：通过不声明资源而是通过直接绑定（即在 C# 中编写“ListBox_Players.ItemsSource=PlayerList;”）并删除“ItemTemplate”声明并覆盖 Player 类的 ToString() 方法以输出我已经设法看到绑定有效的播放器的名称（即，我在列表框中获得了播放器名称的列表）。但是，如果我再次插入模板，它只显示'，'我的模板不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:22:11.347

你得到的只是逗号而没有其他任何东西的事实向我表明，要么成员的名字与中的`Player`名字不匹配（我曾经遇到过这个问题），要么相关的成员无法访问。`Path=``DataTemplate``Player`

到目前为止，我刚刚测试了您所显示的代码，它似乎工作正常。我所做的唯一更改是更改此行：

```
ItemsSource="{Binding Source={StaticResource PlayerListResource}}" 
```

到这一行：

```
ItemsSource = "{Binding}" 
```

这告诉程序它将在运行时获取 ItemsSource。

我的`Player`课是：

```
class Player {
    public string name { get; set; }
    public int nrOfTabls { get; set; }
} 
```

我的`MainWindow.xaml.cs`是：

```
public partial class MainWindow : Window {
    private ObservableCollection<Player> players_;

    public MainWindow() {
        InitializeComponent();

        players_ =new ObservableCollection<Player> () {
            new Player() {
                name = "Alex",
                nrOfTabls = 1,
            },
            new Player() {
                name = "Brett",
                nrOfTabls = 2,
            },
            new Player() {
                name="Cindy",
                nrOfTabls = 231,
            }
        };

        ListBox_Players.ItemsSource = players_;
    }
} 
```

# ios - iOS 开发和测试是否需要拥有硬件？

> ID：11723113
> 
> 赞同：1
> 
> 时间：2012-07-30T14:01:40.360
> 
> 标签：ios, xcode, testing

我正在学习 iOS 开发，我需要知道我需要什么硬件来测试我的应用程序。

Xcode 中的 iPhone/iPad 模拟器是否足够？还是我需要硬件？我有一台 iPad 2 和一台 iPhone 3G。iPad 2 是一代，而我的 iPhone 3G 是三代。

我的第一个项目是一个基于教程的带有网络的基本纸牌游戏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:07:32.980

意见：考虑到我看到的“这在模拟器上效果很好，但在我的设备上效果不佳”形式的问题数量，我会说有必要使用硬件进行测试。我认为您不需要所有可能的设备，但肯定需要涵盖您的应用程序使用的功能的设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:07:23.217

这取决于您需要的功能。您无法在模拟器中测试的示例：

*   推送通知
*   OpenGL 游戏的性能（通常您需要大量设备来测试 OpenGL）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T14:10:14.887

模拟器可以用于开发，但模拟器与效率无关。也非常推荐在真机上进行测试。部分服务无法在模拟器上开发：

*   推送通知
*   在应用程序内购买
*   iCloud 服务

而且您知道，iPhone 3G 无法更新为最新的 iOS（您的 iPad 可以）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T14:12:15.383

第一个答案是肯定的，您需要硬件，因为模拟器和设备的行为之间存在差异。他们不会总是表现得一样，因为模拟器比设备更宽容一点。

例如，模拟器会找到文件（图像/声音/模型等），即使请求和文件名之间的大小写不同，设备也不会找到它们。还有更多。

另一点是是否购买/拥有设备来保存不同的 iOS 版本。我没有全部，因为这对我来说太贵了，但我可以说这是一个问题。无论您如何尝试考虑设备之间的差异，您总是会错过一些东西，并且您的应用程序可能无法在此设备上运行或崩溃。

您仍然可以通过查看您将要使用的应用程序来考虑这个问题。我想说的是，如果您的应用程序不使用设备硬件（例如相机）并且没有可能在不同设备上导致问题的功能，那么您将能够在没有设备的情况下开始。

底线是，如果您想部署良好的工作应用程序，在大多数情况下，如果您可以在各种设备上测试您的应用程序会更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T14:16:31.400

不需要有设备进行测试，但肯定非常重要。您可以测试您的应用程序的 FPS，即使不包含手工制作的 OpenGL。您在应用程序上使用的所有功能，例如视图效果，都肯定会在设备上进行测试。由于模拟器使用您的 mac 内存，因此您不会看到内存不足的任何副作用。我相信你最好的机会是拥有一部 iPhone 4 和你的 iPad 2。

# objective-c - 调用 [self.tableView reloadData] 时；我陷入了一个循环

> ID：11723114
> 
> 赞同：-2
> 
> 时间：2012-07-30T14:01:39.813
> 
> 标签：objective-c, xcode, class, loops, uitableview

我有一个 UITableViewController 类，当我调用 [self.tableView reloadData]; 它陷入了一个循环？有没有办法打破循环？

UITableViewController 调用另一个类，然后调用 UITableViewController 中的一个方法{

```
-(void)callToConfirm
{
[arrMain removeAllObjects];
[arrMain addObject:[searchText capitalizedString]];
[self.tableView reloadData];
NSLog(@"Symbol Exists!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:54:01.487

发布循环的回溯。没有更多信息，就不可能说，但有两种情况会导致这种情况：

1.  您`reloadData`在填充表格视图时正在调用。如果您有任何类型的延迟加载机制，并且该机制在加载表视图*并*调用时触发`reloadData`，那么......*繁荣*。

2.  您的数据加载告诉表视图它已失效，需要在下一次运行循环期间重新加载。实际上看起来像一个无限循环。

# java - 无法从 OpenDS 活动目录在 java 中创建和获取用户

> ID：11723120
> 
> 赞同：1
> 
> 时间：2012-07-30T14:02:03.760
> 
> 标签：java, ldap

```
 `DirContext ldapContext;

String baseName = "dc=MyCompany,dc=com";

String serverIP = "xx.xxx.xxx.xxx";

public ADConnection() {

```
try {

  Hashtable ldapEnv = new Hashtable(11);

  ldapEnv.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");

  ldapEnv.put(Context.PROVIDER_URL,  "ldap://xx.xx.xx.xx:389");

  ldapEnv.put(Context.SECURITY_AUTHENTICATION, "simple");

  ldapEnv.put(Context.SECURITY_PRINCIPAL, "cn=Directory Manager");

  ldapEnv.put(Context.SECURITY_CREDENTIALS, "xxxx");

  ldapContext = new InitialDirContext(ldapEnv);

  System.out.println(ldapContext);

 }
  catch (Exception e) {

    System.out.println(" bind error: " + e);

    e.printStackTrace();

    System.exit(-1);

 } 
```

}`  ````
 public void createNew(String username, String surname, String givenName) {

    try {

      String distinguishedName = "cn=" + username + baseName;

      Attributes newAttributes = new BasicAttributes(true);

      Attribute oc = new BasicAttribute("objectclass");

      oc.add("top");

      oc.add("person");

      oc.add("organizationalperson");

      oc.add("user");

      newAttributes.put(oc);

      newAttributes.put(new BasicAttribute("sAMAccountName", username));

      newAttributes.put(new BasicAttribute("userPrincipalName", username + "@" + serverIP));

      newAttributes.put(new BasicAttribute("cn", username));

      newAttributes.put(new BasicAttribute("sn", surname));

      newAttributes.put(new BasicAttribute("givenName", givenName));

      newAttributes.put(new BasicAttribute("displayName", givenName + " " + surname));

      System.out.println("Name: " + username + " Attributes: " + newAttributes);

      ldapContext.createSubcontext(distinguishedName, newAttributes);

    }
    catch (Exception e) {

      System.out.println("create error: " + e);

      e.printStackTrace();

      System.exit(-1);

    }

  }

  public Attributes fetch(String username) {

    Attributes attributes = null;

    try {
      System.out.println("fetching: " + username);

      DirContext o = (DirContext)ldapContext.lookup("cn=" + username+ baseName);

      System.out.println("search done\n");

      attributes = o.getAttributes("");

      for (NamingEnumeration ae = attributes.getAll(); ae.hasMoreElements();) {

        Attribute attr = (Attribute)ae.next();

        String attrId = attr.getID();

        for (NamingEnumeration vals = attr.getAll(); vals.hasMore();) {

          String thing = vals.next().toString();

          System.out.println(attrId + ": " + thing);

        }
      }
    }
    catch (Exception e) {

      System.out.println(" fetch error: " + e);

      System.exit(-1);
    }
    return attributes;
  }

    public static void main(String[] args) {

    adc.createNew("user1,", "User", "user1");

    Attributes a = adc.fetch("user1,");
  } 

```

```
在创建用户和获取用户后，我在控制台中遇到错误。

javax.naming.directory.InitialDirContext@18eb9e6

名称：user1，属性：{displayname=displayName: user1 User, givenname=givenName: user1,

objectclass=objectclass: top, person, organizationsperson, user,

samaccountname=sAMAccountName：user1，sn=sn：用户，userprincipalname=userPrincipalName：

user1,@xx.xxx.xxx.xxx,cn=cn:user1,}

创建错误：javax.naming.NameNotFoundException：[LDAP：错误代码 32 - 提供的条目

cn=user1,dc=MyCompany,dc=com 无法添加，因为其后缀未定义为

目录服务器中的后缀]；剩余名称 'cn=user1,dc=MyCompany,dc=com'

javax.naming.NameNotFoundException：[LDAP：错误代码 32 - 提供的条目

cn=user1,dc=MyCompany,dc=com 无法添加，因为其后缀未定义为

目录服务器中的后缀]；剩余名称 'cn=user1,dc=MyCompany,dc=com'

            回答 #1

赞同：0

时间：2012-07-30T16:13:38.380

后端是否`dc=mycompany,dc=com`存在？如果没有，您必须创建它并至少填充基础对象`dc=mycompany,dc=com`。

```` 
```

# ssis - OLE 命令任务与 OLE 目标

> ID：11723123
> 
> 赞同：1
> 
> 时间：2012-07-30T14:02:08.940
> 
> 标签：ssis

我是 SSIS 的新手，想知道在数据工作流中执行插入时哪个会提供更好的性能。

使用其中一个有什么优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:53:53.037

它们的名称相似，但用途却大不相同。目的地就是它听起来的样子——它是数据流的终点。您无法将任何内容连接到 OLE DB 目标的输出（超出错误流）。目的地能够执行基于*集合*的插入（这对于良好的性能非常重要）。它还可以执行单例插入（为流经数据流的**每一**行发出插入语句），这将导致到达目的地的吞吐量降低。

将该行为与 OLE DB 命令进行对比。这是一个转换组件，允许您对流经数据流的每一行执行任何操作。它是瑞士军刀 SQL “实干家”。您*可以*将其用作 INSERT 语句，但最常见的是我将其视为 UPDATE 目标。对于小型数据集，这很好。使用 OLE DB 命令转换的成本是成本。它将为流经数据集的每一行发出单例语句。这在事务日志、事务持有时间、计划缓存和许多其他我想不到的事情上都会付出高昂的代价。没有办法告诉 SQL Server 对这些操作进行批处理，因此您将不得不通过痛苦行 (RBAR) 来发出语句行。

如果您需要在 SSIS 中进行更新，您将通过将更新写入临时表并在数据流完成后执行基于集合的更新来获得更好的性能配置文件。[Andy Leonard 在他的Stairway to Integration Services 系列](http://www.sqlservercentral.com/articles/Stairway+Series/76390/)中有很多讨论这种模式的文章。

参考

*   [OLE DB 目标](http://msdn.microsoft.com/en-us/library/ms141237.aspx)
*   [OLE DB 命令](http://msdn.microsoft.com/en-us/library/ms141138)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:54:12.997

OLE 目标是插入的更好选择，因为它允许将数据批量加载到目标表中。

OLE DB 命令（我假设这就是您所说的 OLE 命令任务的意思）将逐行执行其操作，这要慢得多。但是，OLE DB 命令可以处理 OLE 目标无法处理的更新和删除

# scala - 调用不从 Scala 获取泛型类型的 Java 方法

> ID：11723126
> 
> 赞同：2
> 
> 时间：2012-07-30T14:02:21.247
> 
> 标签：scala, mockito

我有一个非常古老的 Java 方法，需要从 Scala 调用。它采用 java.util.Enumeration 的非泛型版本：

```
public void someMethod(java.util.Enumeration e) {
    ...
} 
```

我尝试了以下代码来调用该方法：

```
target.someMethod(new java.util.Enumeration[String] {
  def hasMoreElements = false
  def nextElement = throw new NoSuchElementException()
}) 
```

但是，这会导致编译器错误：

```
found: java.lang.Object with java.util.Enumeration[String]
required: java.util.Enumeration[?0] where type ?0 
```

我找到了很多例子来处理 Java 方法返回非泛型值并且您需要在 Scala 中使用泛型类型来处理它的情况。我找不到任何涵盖这种相反情况的东西，我们需要传递非泛型类型。这可能吗？

**更多信息** 我在 Java 中创建了一个实现并从 Scala 中调用它，它工作得很好。该问题仅在尝试使用 mockito 模拟 Java 方法时表现出来：

```
 (java.util.Enumeration[?0],<repeated...>[java.util.Enumeration[?0]])org.mockito.stubbing.OngoingStubbing[java.util.Enumeration[?0]] <and>
   (java.util.Enumeration[?0])org.mockito.stubbing.OngoingStubbing[java.util.Enumeration[?0]]
 cannot be applied to (java.lang.Object with java.util.Enumeration[String]{def nextElement(): Nothing}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-29T13:44:18.387

*注意：解决方案是由提问者提出的，但从未作为答案发布。以下是提问者得出的解决方案：*

通过 Odersky 书中的一些提示和对 mockito 内部结构的一些黑客攻击，设法解决了这个问题。解决方案是构建一个捕获 ?0 类型的小函数，并通过强制转换将其应用于模拟代码：

```
def thenReturn[T](target: OngoingStubbing[T], result: Any) = 
  target.thenReturn(result.asInstanceOf[T])

thenReturn(when(myMock.someMethod), myEnumeration) 
```

# voice-recognition - 耳语时的简单语音识别

> ID：11723139
> 
> 赞同：4
> 
> 时间：2012-07-30T14:03:01.013
> 
> 标签：voice-recognition, cmusphinx

我正在尝试使用pocketsphinx（。语法非常简单，例如：

```
public <grammar> = (Matt, Anna, Tom, Christine)+ (One | Two | Three | Four | Five | Six | Seven | Eight | Nine | Zero)+ ; 
```

例如：

```
Tom Anna Three Three 
```

产量

```
Tom Anna 33 
```

我调整了声学模型（考虑到我的外国口音），之后我获得了不错的表现（准确率约为 94%）。我使用了约 3 分钟的训练数据集。现在我正试图做同样的事情，但通过对着麦克风耳语。在没有训练的情况下，准确率显着下降到约 50%。通过口音训练，我得到了约 60%。我尝试了其他想法，包括去噪和提高音量。我阅读了整个文档，但想知道是否有人可以回答一些问题，以便我可以更好地了解我应该在哪个方向上提高性能。

1) 在教程中，您正在调整 hub4wsj_sc_8k 声学模型。我猜“8k”是一个采样参数。使用 sphinx_fe 时，您使用“-samprate 16000”。是否故意使用 16k 采样率的数据来训练 8k 模型？为什么没有使用 8k 采样的数据？对性能有影响吗？

2) 在 sphinx 4.1 中（与 pocketsphinx 相比）有不同的声学模型，例如 WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.jar。这些模型可以与pocketsphinx一起使用吗？具有 16k 采样率的声学模型通常会在具有 16k 采样率的数据中具有更好的性能吗？

3）当使用数据进行训练时，我应该使用普通口语模式（仅适应我的口音）还是低语模式（适应耳语和我的口音）？我想我尝试了这两种情况，并没有注意到任何差异来得出任何结论，但我不知道袖珍狮身人面像的内部结构，所以我可能做错了什么。

4) 我使用下面的脚本来记录适应教程中的训练和测试数据：

```
for i in `seq 1 20`; do 
       fn=`printf arctic_%04d $i`; 
       read sent; echo $sent; 
       rec -r 16000 -e signed-integer -b 16 -c 1 $fn.wav 2>/dev/null; 
done < arctic20.txt 
```

我注意到每次我按下 Control-C 时，这个按键在录制的音频中都是不同的，这会导致错误。有时修剪音频有助于纠正或导致其他错误。有没有要求每个录音在说话前后都有几秒钟的相当？

5）当累积观察计数时，我可以修改任何设置以提高性能吗？

6）半连续和连续模型有什么区别？pocketsphinx 可以使用连续模型吗？

7) 我注意到 sphinx4 中的“mixture_weights”文件与您在 pocketsphinx-extra 中获得的文件相比要小得多。它有什么不同吗？

8）我尝试了不同的去除白噪声的组合（使用'sox'工具包，例如sox noise.wav filtered.wav noisered profile.nfo 0.1）。根据最后一个参数，有时它会有所改善（~3%），有时会变得更糟。消除噪音是好事还是pocketsphinx也这样做？我的环境很安静，只有白噪声，我猜当音频录制耳语时可以有更多的声音。

9）我注意到大多数时候单独提高音量（增益）只会使性能稍微变差，尽管对于人类来说更容易区分单词。我应该避免吗？

10) 总的来说，我尝试了不同的组合，我得到的最好结果是仅去除噪声时约为 65%，因此只有轻微的 (5%) 改进。以下是一些统计数据：

```
//ORIGNAL UNPROCESSED TESTING FILES
TOTAL Words: 111 Correct: 72 Errors: 43
TOTAL Percent correct = 64.86% Error = 38.74% Accuracy = 61.26%
TOTAL Insertions: 4 Deletions: 13 Substitutions: 26

//DENOISED + VOLUME UP
TOTAL Words: 111 Correct: 76 Errors: 42
TOTAL Percent correct = 68.47% Error = 37.84% Accuracy = 62.16%
TOTAL Insertions: 7 Deletions: 4 Substitutions: 31

//VOLUME UP
TOTAL Words: 111 Correct: 69 Errors: 47
TOTAL Percent correct = 62.16% Error = 42.34% Accuracy = 57.66%
TOTAL Insertions: 5 Deletions: 12 Substitutions: 30

//DENOISE, threshold 0.1
TOTAL Words: 111 Correct: 77 Errors: 41
TOTAL Percent correct = 69.37% Error = 36.94% Accuracy = 63.06%
TOTAL Insertions: 7 Deletions: 3 Substitutions: 31

//DENOISE, threshold 0.21
TOTAL Words: 111 Correct: 80 Errors: 38
TOTAL Percent correct = 72.07% Error = 34.23% Accuracy = 65.77%
TOTAL Insertions: 7 Deletions: 3 Substitutions: 28 
```

我所做的那些处理只是为了测试数据。是否应该以相同的方式处理训练数据？我想我试过了，但几乎没有任何区别。

11) 在所有这些测试中，我使用了 ARPA 语言模型。当使用 JGSF 结果通常更糟（我有最新的 pocketsphinx 分支）。这是为什么？

12）因为每个句子的最大数量是'999'并且不超过3个名字，我修改了JSGF并通过手动重复括号中的内容来替换重复符号'+'。这一次的结果更接近 ARPA。语法中有没有办法像正则表达式一样告诉最大重复次数？

13）当使用 ARPA 模型时，我使用所有可能的组合生成它（因为字典是固定的并且非常小：~15 个单词），但随后测试我仍然有时会收到非法结果，例如 Tom Anna（没有任何必需的数字）。有没有办法使用 ARPA 模型来强制执行某些结构？

14) 字典是否应该仅限于大约 15 个单词，或者只是完整的字典只会影响速度而不影响性能？

15) 修改字典（音素）是提高耳语识别率的方法吗？（我不是专家，但当我们耳语时，我猜有些词可能听起来不同？）

16) 任何其他提高准确性的技巧都会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-18T12:33:23.123

关于耳语：当你这样做时，声波没有有意义的非周期性部分（由声带正常共振产生的振动，但在耳语时没有）。您可以尝试将手指放在喉咙上，同时大声说出“aaaaaa”，然后轻声说。

AFAIR 声学建模在很大程度上依赖于获取声音的频谱来检测峰值（共振峰）并将它们与音素（如元音）相关联。

有根据的猜测：当耳语时，频谱主要是白噪声，略微受口腔位置（舌头、嘴巴张开等）的影响，这对人类来说已经足够了，但远远不足以让计算机可以区分偷看。

# c# - 确保数据结构中值唯一性的最佳方法？

> ID：11723140
> 
> 赞同：2
> 
> 时间：2012-07-30T14:03:01.590
> 
> 标签：c#, dictionary

我需要根据数据结构的值键入字典。我想知道创建此密钥的最佳方法是什么？

数据结构有 3 个值：两个字符串和一个日期时间。这三个值组合起来代表我的字典的“唯一”键。

```
public class RouteIdentity
{
     public string RouteId {get;set;}
     public string RegionId {get;set;}
     public DateTime RouteDate {get;set;}
} 
```

想到的一种解决方案是向`RouteIdentity`（`Key`可能称为？）添加一个属性，该属性返回 3 个唯一值的某种表示。的类型`Key`将是字典的键值的类型。`Key`可能是一个简单地连接各种属性的字符串值，但这似乎非常低效。我想是否有办法实现快速散列函数以返回可能也可以工作的不同类型。

另一种可能性是覆盖 Equals 运算符`RouteIdentity`。我认为这可能是一种更好的方法，但我不确定如何`GetHashCode()`为此目的覆盖该功能。

谁能阐明这种情况下的最佳方法是什么？如果您觉得最好使用运算符重载，您能否提供一些有关如何正确实现它的指导？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:12:18.240

实现 Equals() 和 GetHashCode()，..

```
public class RouteIdentity
{
    public string RouteId { get; set; }
    public string RegionId { get; set; }
    public DateTime RouteDate { get; set; }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj))
        {
            return false;
        }
        if (ReferenceEquals(this, obj))
        {
            return true;
        }
        if (obj.GetType() != typeof(RouteIdentity))
        {
            return false;
        }

        RouteIdentity other = (RouteIdentity) obj;

        return Equals(other.RouteId, RouteId) && 
               Equals(other.RegionId, RegionId) && 
               other.RouteDate.Equals(RouteDate);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int result = (RouteId != null ? RouteId.GetHashCode() : 0);
            result = (result * 397) ^ (RegionId != null ? RegionId.GetHashCode() : 0);
            result = (result * 397) ^ RouteDate.GetHashCode();
            return result;
        }
    }
} 
```

...和 ​​use `new Dictionary<RouteIdentity, TValue>()`，它将在内部实例化`EqualityComparer<RouteIdentity>.Default`，它使用这两种方法来比较您的`RouteIdentity`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:12:40.343

实施`IComparable`和`RouteIdentity`使用`HashSet<RouteIdentity>`。

# php - Zend 和资产位置

> ID：11723141
> 
> 赞同：1
> 
> 时间：2012-07-30T14:03:02.887
> 
> 标签：php, apache, .htaccess, zend-framework

这是我的 Zend 项目的结构

```
project
  application
    .....
    modules
      admin
    .....
  models
  views
  public
    assets
      images
        frontend
           layout.css 
```

问题是当我尝试访问[http://cms.com/assets/images/frontend/some_image.gif](http://cms.com/assets/images/frontend/some_image.gif)我得到

```
Invalid controller specified (assets) 
```

我想这个问题可以通过使用 htaccess 来解决，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:10:21.957

您需要添加（例如）：

```
RewriteCond %{REQUEST_FILENAME} !\.(jpg|jpeg|gif|png|css|js)$ 
```

查看您的 htaccess 文件

# visual-studio-2010 - 如何指定保存测试结果的位置？

> ID：11723142
> 
> 赞同：1
> 
> 时间：2012-07-30T14:03:05.570
> 
> 标签：visual-studio-2010, visual-studio, mstest

在自动化测试时，我会使用命令行程序 MSTest.exe。我将传入一个参数，该参数将指定我希望将测试结果文件保存到的位置。

我的问题是我希望能够从 Visual Studio GUI 运行测试，并且仍然能够为测试结果文件指定位置。

我这样做的原因是我正在编写一些代码来读取测试结果文件（因为它是 XML 格式），然后将结果通过电子邮件发送到指定的电子邮件地址。

无论我是通过 MSTest.exe 还是通过 Visual Studio GUI 运行测试，我都希望我的测试能够从同一位置获取测试结果文件。

我知道我可以通过从“测试结果”窗口中选择“导出测​​试运行详细信息”选项在 GUI 中执行此操作。我想知道如何以编程方式执行此操作，以便在测试运行完成后自动执行该操作。

...或者，是否有类可以让我以编程方式访问测试结果信息？例如，我相信有一个 TestResult 类可能对我有所帮助，尽管我不太确定如何使用它。我还注意到 TestContext 类具有诸如“DeploymentDirectory”之类的属性，但它们是只读的。

另外，我在其他地方在线阅读到，使用 VS2008，您可以编辑 .testrunco​​nfig 文件以在 TestRunConfiguration 元素中添加以下行：

> '<'部署 userDeploymentRoot="C:\TestResults" useDefaultDeploymentRoot="false" />

但是我的解决方案中不存在 .testrunco​​nfig 文件，并且我的 .vsmdi 文件中也没有出现 TestRunConfiguration 元素。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:53:34.867

您可以使用*清理脚本*将`Test Results`文件复制到预定义的目录。

使用以下代码创建批处理：

```
::Set the path where the result files will be copied
set TargetDirectory = "C:\..."
::copy the results file
xcopy /s /y "%TestDir%.trx" %TargetDirectory% 
```

请注意，该`%TestDir%`变量由 Visual Studio 自动创建到`qtcleanup.bat`每个测试运行的默认测试结果输出目录中。

您的批处理文件的内容将附加到 ，`qtcleanup.bat`因此您可以使用上述变量。您还可以打开它以查看其余可用变量。

创建批处理文件后，转到 Visual Studio，打开`*.testsettings`，单击`Setup and Cleanup Scripts`并选择您的 .bat 文件。

它将在每次测试运行结束时运行。

# .net - 将大型数据集存储在内存或客户端中

> ID：11723143
> 
> 赞同：0
> 
> 时间：2012-07-30T14:03:15.443
> 
> 标签：.net, sql-server, webforms

我希望为 .net Web 表单中的一系列字段创建智能感知，使用户能够单击其中一个选项，然后依次填写一系列字段（姓名、地址等）。使用 c#.net 和 ajax 实现这一点非常简单。但是，最近我被迫加密一些正在针对数据库搜索的关键字段，因此该功能现在被破坏了。我们目前解密这些可搜索字段的唯一方法是在 C#.net 中。

为了修复该功能，我正在考虑：a）当页面加载时，获取所有记录并存储在内存中的数组中（未加密），并且作为搜索字段中的用户键使用 linq 或 lambda 来获取记录(s) 感兴趣的。b）当页面加载时，将所有记录存储在一个js数组中（未加密）并执行搜索客户端。

对于我的 Web 服务器和客户端的浏览体验而言，哪一条是考虑性能的最佳途径？

我认为这将是 < 100k 记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:58:27.667

哇，这是加密的动态数据。

在每次页面加载时向客户端发送大量记录会很慢。

您可能会使用动态缓存，每隔几秒加载一次数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:09:59.317

为什么不将记录存储在服务器缓存中并发出 ajax 请求。这样做将使记录集可供所有用户使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:27:14.937

每行有多大？大约 100k 行可能是很多数据。

**在客户端**

客户端上的 100k 是很多数据，即使它是几列数据。那只是数据，然后是搜索它的问题。这是桌面浏览器的问题。它将杀死移动浏览器。

**在服务器上**

这个比较靠谱。

需要考虑的事项：

*   将所有结果加载到内存中会消耗多少内存？
*   将所有记录加载到内存中的延迟（网络、数据库）是多少？也许可以异步完成以减少对用户的影响。
*   在 C# 中搜索可能很快，尤其是在使用字典时，它不如数据库快。您是否考虑过只将需要解密的数据存储在内存中，而将其余数据留在数据库中。需要时从数据库中获取其余数据？

Ajax 仍然是可能的（假设数据存储在服务器上）。您必须将搜索请求路由到适当的存储（在内存、数据库或两者的混合中）。

# php - youtube api - 阿拉伯语文本未显示

> ID：11723147
> 
> 赞同：0
> 
> 时间：2012-07-30T14:03:21.167
> 
> 标签：php, youtube-api

问题是当我使用 Youtube API 获取视频（例如视频条目、提要等）时，它显示不正确。例如：

> الوسمي - المكتوب

看起来像这样

> Ø§Ù„ÙˆØ³Ù...ÙŠ - Ø§Ù„Ù...ÙƒØªÙˆØ¨</p>

尽管英文标题和内容正确显示，但这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:08:11.913

尝试在您的页面上使用 UTF-8 字符集：

```
<?php
header("Content-Type: text/html; charset=UTF-8");
echo $video_title; 
```

* * *

使用将您提供的奇怪字符视为 windows cp1252 的字节值：

```
<?php
header("Content-Type: text/html; charset=UTF-8");

$str = "\xd8\xa7\xd9\x84\xd9\x88\xd8\xb3\xd9\x85\xd9\x8a\x20\x2d\x20\xd8\xa7\xd9\x84\xd9\x85\xd9\x83\xd8\xaa\xd9\x88\xd8\xa8";

echo $str; //الوسمي - المكتوب  if the charset=UTF-8 is working 
```

您可以使用上面的代码来始终测试您是否正确执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:13:31.397

您也可以尝试从

在 PHP 中：urlencode()

在 js:encodeUriComponent()

反向是

在 php 中：urldecode()
在 js:decodeUriComponent()

# c# - 使用多个分组方式选择一条记录并计数

> ID：11723150
> 
> 赞同：1
> 
> 时间：2012-07-30T14:03:41.530
> 
> 标签：c#, .net, linq, .net-4.0, lambda

我有一个实体喜欢的实体列表

***提供***

```
Int OfferId
DateTime FromDate
DateTime ToDate
Bool Status 
```

在 中`List<Offer>`，它也有重复`OfferId`，例如。

```
Offer1 { Id=1, From=01/01/2011, To=31/01/2011, Status=true }
Offer2 { Id=1, From=01/02/2011, To=28/02/2011, Status=false}
Offer2 { Id=2, From=01/02/2011, To=28/02/2011, Status=false}
Offer3 { Id=3, From=01/01/2011, To=31/01/2011, Status=true }
Offer4 { Id=4, From=01/01/2011, To=31/01/2011, Status=true }
Offer5 { Id=1, From=01/03/2011, To=31/03/2011, Status=false} 
```

我正在尝试做的是**选择**`offerId`与最旧和最频繁的报价相关的报价列表`startdate`。
在这种情况下，它是一次 with `offerId=1`。因为它的开始日期`01/01/2011`是最古老和最频繁的。
我不确定如何将所有条件放在一个命令中。

我根据 对记录进行了分组`offerId`，但我不确定如何继续

```
var list = OfferList.GroupBy(a => a.offerId).Select(g => g.Select(s => s)); 
```

**更新**

好像有点混乱。我正在尝试选择满足条件的列表或记录。在这种情况下，答案应该是

```
Offer1 { Id=1, From=01/01/2011, To=31/01/2011, Status=true }
Offer2 { Id=1, From=01/02/2011, To=28/02/2011, Status=false}
Offer5 { Id=1, From=01/03/2011, To=31/03/2011, Status=false} 
```

因为，这个为***1***的 offerid 具有最早的起始日期，即***01/01/2011***，它也具有最频繁的起始日期，即***01/01/2011***。（01/01/2011 在主列表中作为起始日期出现 3 次）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:09:27.000

```
var q = from t in offerList
        group t by new { t.Id } into grp
        select new
        {
           grp.Key.Id,
           MinDate = grp.Min(t => t.From)
        };
var re = q.ToList().OrderBy(p=>p.MinDate).FirstOrDefault(); 
```

虽然没有测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:18:56.993

给你，这里是 LinqPad 测试：[https ://gist.github.com/3207484](https://gist.github.com/3207484)

```
var r = (OfferList.GroupBy(offer => offer.id)
             .Select(group =>
                 new { offerid = group.Key,
                       offers = group.OrderBy(o => o.fromDt),
                       count = group.Count() })
             .OrderBy(g => g.offers.First().fromDt) // list with the oldest
             .ThenByDescending(g => g.count)).Dump()  // then by most
        .First().offers.First(); 
```

# java - 我在使用 HashMap 时抛出 java.util.ConcurrentModificationException

> ID：11723159
> 
> 赞同：1
> 
> 时间：2012-07-30T14:04:04.553
> 
> 标签：java, collections, hashmap, hashset

与 HashMap 中的元素相比，如何删除下面代码中的键值对？

```
Map<BigDecimal, TransactionLogDTO> transactionLogMap = new HashMap<BigDecimal, TransactionLogDTO>();
for (BigDecimal regionID : regionIdList) {// Generation new logDTO
                                            // objects for each in scope
                                            // region
    transactionLogMap.put(regionID, new TransactionLogDTO());
}
Set<BigDecimal> inScopeActiveRegionIdSet = new HashSet<BigDecimal>();

for (PersonDTO personDTO4 : activePersons) {

    inScopeActiveRegionIdSet.add(personDTO4.getRegion());

}

for (BigDecimal bigDecimal : transactionLogMap.keySet()) {
    if (!inScopeActiveRegionIdSet.contains(bigDecimal)) {
        transactionLogMap.remove(bigDecimal);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T14:04:58.470

根据 javadoc

> [ConcurrentModificationException](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html)可能会被检测到对象的并发修改的方法抛出，而这种修改是不允许的

```
 transactionLogMap.remove(bigDecimal); 
```

而不是在迭代器上`for loop`使用`Iterator`和调用 remove。

例子：

```
Iterator iter = transactionLogMap.keySet().iterator();
while(iter.hasNext())
{
iter.remove();
} 
```

或者

您可以考虑使用[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)

注意：输入代码，作为参考。可能存在语法错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T14:08:29.010

问题出在这几行

```
for (BigDecimal bigDecimal : transactionLogMap.keySet()) {
    if(!inScopeActiveRegionIdSet.contains(bigDecimal)) {
        transactionLogMap.remove(bigDecimal);
    }
} 
```

当您调用时，您正在迭代while`transactionLogMap`还直接修改底层，这是不允许的，因为增强的 for 循环无法看到这些更改。`Collection``transactionLogMap.remove`

正确的解决方案是使用`Iterator`：

```
Iterator<BigDecimal> it = transactionLogMap.keySet().iterator();//changed for syntax correctness
while (it.hasNext()) {
    BigDecimal bigDecimal = it.next();
    if(!inScopeActiveRegionIdSet.contains(bigDecimal)) {
        it.remove();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T14:09:12.637

迭代集合时，不能从集合中删除项目。这会导致您遇到异常。

你打电话时：

```
for(TypeX x: collectionOfX){ ... } 
```

幕后发生的事情是，您正在为 collectionOfX 创建一个迭代器，并且一直进行迭代，直到您明确地从循环中中断或迭代器的 hasNext() 为假。

如果您需要在迭代期间从集合中删除项目，则需要`foreach`使用对迭代器的显式调用来替换该构造。就像是：

```
Iterator<BigDecimal> iter = transactionLogMap.keySet().iterator();
while(iter.hasNext()) {
   BigDecimal bDecimal = iter.next();
   ...
   iter.remove(); //this will remove the current item from the collection, without raising an exception.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:18:28.287

或者，如果`inScopeActiveRegionIdSet`尺寸更小，则迭代它可能会更短更快：

```
for (BigDecimal bigDecimal : inScopeActiveRegionIdSet) {
    transactionLogMap.remove(bigDecimal);
} 
```

# android - 在未激活发现的情况下使用 Android 蓝牙检测 iPhone

> ID：11723161
> 
> 赞同：0
> 
> 时间：2012-07-30T14:04:12.497
> 
> 标签：android, iphone, bluetooth, detection, proximity

我正在尝试使用蓝牙在我的 Android 1.6 设备上检测我的 iPhone，而无需交互。
当 iPhone 可被发现时我可以这样做，这意味着我必须与 iPhone 交互，通过菜单到蓝牙部分。
对于我到目前为止所搜索的内容，似乎无法检测到 iPhone，即使它之前已经配对（配对只是避免繁重的发现过程的一种捷径）。
有谁知道任何解决方案？

谢谢安托万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:34:20.337

根据我的经验，如果 iPhone 超出范围或以其他方式断开 BT 连接，则不会自动重新连接，您必须进入 iPhone 中的 BT 菜单。我没有在 iPhone 和 android 上做过这方面的工作，但我知道很多汽车音响和 gps 制造商都遇到了 iPhone 无法自动重新连接的问题。目前他们没有解决方案，所以我怀疑有一个。

简短编辑澄清一下：这不是 android 问题，我从事 BT 认证和许可工作，android 可以自动断开连接并重新连接。（在手机支持该BP配置文件的情况下，但他们都支持。）

# function - 在 Vim 中选择整个函数定义

> ID：11723169
> 
> 赞同：59
> 
> 时间：2012-07-30T14:04:30.683
> 
> 标签：function, vim, select, definition

近一个星期以来，我一直在尝试使用 Vim 进行任何文本编辑工作。我想知道选择 C ​​函数定义的最快方法。

例如，如果我有这样的功能：

```
void helloworlds( int num )
{
    int n;
    for ( n = 0; n < num; ++n ) {
        printf( "Hello World!\n" );
    }
} 
```

我怎样才能删除包括函数名在内的整个定义？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-30T14:10:17.763

在 Vim 中很常见，有很多方法！

请注意，前两个解决方案取决于没有空行。

*   如果您的光标在函数名称所在的行上，请尝试`d``}`. 它将删除下一个块的所有内容（即您的函数体）。

*   在函数体内，`d``a``p`将删除“段落”。

*   您可以使用 删除花括号块`d``a``}`。（如果你喜欢这种语法，我推荐 Tim Pope 的出色的[环绕.vim](https://github.com/tpope/vim-surround)，它添加了更多具有类似感觉的功能）。

*   您也可以尝试使用正则表达式删除，直到下一个最左缩进的右花括号：`d``/``^``}``Enter`

*   `]``]`并`[``[`移动到下一个/上一个第一列花括号（相当于使用`/`and`?`与我上面提到的那个正则表达式。结合`d`运动，你会得到相同的效果。在像[Python-mode](https://github.com/klen/python-mode)这样的插件中，这些[运算符被重新定义](https://github.com/klen/python-mode#default-keys)为准确的意思你在找什么：从一个功能转移到另一个功能。

### 如何删除整个块，包括标题

如果您在标题/名称或块之前的行上，`d``a``}`应该可以解决问题。

如果你在一个块之下，你也可以利用 Vim 搜索的方便的“偏移”特性。`d``?``^``{``?``-``1`将向后删除到第一次出现第一列左花括号之前的一行。这个命令输入起来有点棘手。也许你可以用`<leader>`它做一个捷径。

### 插件

我在 Vim 中没有做太多的 C 编程，但肯定有插件可以帮助完成这样的事情。[在 GitHub 上](https://github.com/vim-scripts)尝试[Vim Scripts](http://vim-scripts.org/)或他们的镜像。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-11-26T22:57:28.007

删除整个函数，包括其定义，例如：

```
function tick() {
        // ... 
} 
```

*   移动到函数名称所在的行。
*   将光标移动到左大括号，**`f{`**应该这样做，或者干脆**`$`**.
*   按**`V%d`**（视觉线，移动到匹配对，删除）

如果您的函数如下所示：

```
function tick() 
{
        // ... 
} 
```

*   移动到函数名称所在的行。
*   按**`J`**(*将*当前行与下面的行连接起来。这也会将光标放在结果行的最后一个字符上，`{`, 正是我们下一个命令所需的那个。)
*   按**`V%d`**（视觉线，移动到匹配对，删除。）

或者

*   移动到函数名称所在的行。
*   按**`V[Down]%d`**（视觉线，下移一行，移动到匹配对，删除。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-09T17:36:18.487

如果您愿意安装插件，[vim-textobj-function](https://github.com/kana/vim-textobj-function)将为您`vif`提供 Visual select Inside Function 和`vaf`Visual select A Function。

`daf`将删除函数，包括签名行和函数体 ( `{}`)

这个插件定义的文本对象更具体，它们不依赖于函数体是一个连续的文本块或`{`放置在行的第一个字符处。

缺点是您依赖外部插件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-06T14:36:52.737

您可以使用此快捷方式不仅删除函数，还可以删除大括号之间的行，即 if-else 语句、while、for 循环等之间的代码。

在花括号开始/结束处按**Shitf + v [Will get you in visual Mode]。**

然后按**] + }**即**] + Shitf ]** - 如果您在开始大括号中。

然后按**[ + {**即**[ + Shitf [** - 如果您在大括号中。

然后 DEL 删除选中的行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-17T06:36:36.680

使用这种简单的方法

```
 1.Go to the function definition 
   2.dd  - delete function definition 
   3.d    -start delete operation 
   4.shift+5(%) - delete the lines between { to } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-10-13T20:58:36.560

最简单和最直接的方法如下（在函数内的任何地方工作）：

```
v   enter visual mode
{   move to first brace in function (may have to press more than once)
o   exchange cursor from top to bottom of selection
}   extend selection to bottom of function
d   delete selected text 
```

完整的命令序列将是`v{o}d`. 请注意，除了删除之外，您还可以执行其他操作。例如，要复制函数，请使用`y`(yank) 而不是`d`.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-07T16:06:30.390

如果您的函数由空行分隔，只需键入：

```
dip 
```

这意味着“删除内部段落”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-27T21:00:23.737

另一种方法是转到函数开头的行并点击：（`Vj%`或者`V%%`如果您的样式将左大括号放在同一行）。这会让您进入 Visual-Line 模式，百分比会将您带到匹配的右大括号。在第二种样式中，第一个 % 将您带到您选择的行上的左大括号，第二个将您带到与其匹配的右大括号。

也适用于圆括号、方括号、C 风格的多行注释和预处理器指令。

有关更多信息，请参阅[手册](http://vimdoc.sourceforge.net/htmldoc/motion.html#various-motions)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-06-12T11:42:04.780

前提条件：在函数内部的某个地方。使用

```
[] 
```

然后使用删除到第一行的下一个右大括号

```
d][ 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-06T12:04:02.613

大多数发布的方法都有一两个缺点。通常，在处理某些面向对象语言的类定义时，函数体后面可能没有空行，因为许多代码格式化程序将最后一个方法和类的右大括号放在连续的行上。此外，您可能在函数顶部有注释。更糟糕的是，你的函数体内可能有空行。此外，您更喜欢在函数中的任何位置使用光标的方法，因为必须将其移动到特定的行或更糟的字符，需要宝贵的时间。想象一下

```
public class Test {

    /* ... */

    @Test
    public void testStuff() {
        // given
        doSetup();

        // when
        doSomething();

        // then
        assertSomething();
    }
} 
```

在这种情况下，`vap`对您没有任何好处，因为它停在您函数中的第一个空行处。`v{o}`出于同样的原因。`va{V`更好，但没有抓住方法顶部的注释。所以在最一般的情况下我会做的是`va{o{`. `va{`选择整个函数体（警告：如果您的光标位于嵌套块内，例如内部`if`语句，那么您只会得到该块），`o`将光标放在所选内容的开头并`{`选择整个段落之前您的选择. 这意味着您将获得函数定义、所有注释和文档注释。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-03T16:17:22.730

非视觉方式：

```
d/^}/e 
```

... 通过搜索`}`at 行进行删除，包括删除。

没有`/e`（上面的答案中没有提到），解决方案是不完整的。

with `/e`- 搜索到匹配结束，所以*包括*右括号，并且命令也适合拉：

```
y/^}/e 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-01T05:37:22.303

如果您使用`neovim`版本：> 0.5
，现代方式是使用[treesitter](https://github.com/nvim-treesitter)并构建您的模型，那么您可以是`selected`or `yanked`or `deleted`...

> Tree-sitter 是一个解析器生成工具和增量解析库。它可以为源文件构建具体的语法树，并在编辑源文件时有效地更新语法树

我`video`在 youtube 上建议了这个来学习如何使用`treesitter`来构建你的模型：[让我们使用 Treesitter 和 Lua 创建一个 Neovim 插件](https://www.youtube.com/watch?v=dPQfsASHNkg)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-06T07:44:45.127

我在这里尝试了所有最重要的答案，但除了 Nick 提出的一个建议按下`f{`以到达开头的花括号外，它们都不起作用。然后`V%d`删除整个函数。

请注意，整个函数会被拉出，因此您可以将其粘贴到其他地方。我经常遇到这个用例，尤其是在将`if`块移动到另一个用例时。

# vim - 在每个缓冲区的基础上启用 vim 中的语法突出显示

> ID：11723175
> 
> 赞同：11
> 
> 时间：2012-07-30T14:05:04.120
> 
> 标签：vim, syntax-highlighting

我目前必须编辑一些非常大的 XML 文件，这会减慢语法突出显示的速度，使其完全无法使用 - 例如，在搜索操作后更新屏幕需要几秒钟。

当禁用语法高亮 ( `:syn off`) 时，相同的操作会立即发生。不幸的是，禁用语法突出显示似乎是全局发生的，因此所有其他文件现在也将其禁用。

那么：有没有办法只禁用给定缓冲区的语法突出显示？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T14:11:13.537

您可以在您喜欢的缓冲区中设置`:syntax manual`然后启用它`set syntax=ON`。另请参阅`:help :syn-manual`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T14:08:16.820

回答我自己的问题：一个简单的技巧是将文件的语法强制为 vim 不知道如何突出显示的内容：`:set syntax=unknown`

但是，这似乎有点 hacky - 也许还有另一种解决方案？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T14:14:17.370

对于大文件编辑，我通常使用[Chip 的`LargeFile`插件](http://www.vim.org/scripts/script.php?script_id=1506)。它禁用了语法高亮、撤消数据库和其他给大文件带来麻烦的功能。

# c# - 包含垃圾字符的 SQLite 文件

> ID：11723177
> 
> 赞同：6
> 
> 时间：2012-07-30T14:05:12.620
> 
> 标签：c#, .net, sqlite, xamarin.ios

我目前正在使用 MonoTouch 和 SQLite 来确定使用加密的数据库是否比使用加密的标准 .txt 文件更好。

我正在尝试使用`RijndaelManaged`和其他`System.Security.Cryptography`方法来加密我的 SQLite DB，但 DB 已损坏。

我发现了问题，但不知道为什么会发生或如何解决它。这是一个带有单个表的基本 SQLite 文件：

```
SQLite format 3@  -‚

øø?gtablenewnewCREATE TABLE new (id int(5), name vchar(255)) 
```

在使用[在线示例](http://support.microsoft.com/kb/307010)并加密此数据库后，我得到以下信息：

```
SQLite format 3@  -�

��?gtablenewnewCREATE TABLE new (id int(5), name vchar(255)) 
```

这会使数据库损坏且无法使用。有谁知道为什么会这样？谁能帮我在不使用 SQLCipher 的情况下加密这个数据库？

**编辑：**我尝试将原始数据库读取为字节，并尝试将字节转换为字符串，但无论我使用什么编码，第一行之后我都会得到 \0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:28:35.420

在没有看到您的加密/解密例程的情况下，我只能猜测。由于您使用的是 Rijndael，因此您需要确保在类上设置相同的[Padding](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.padding.aspx)以进行加密和解密。此外，请确保在加密数据时调用[FlushFinalBlock 。](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.flushfinalblock)该调用未在示例中列出（尽管他们正在调用`Close`which should call `FlushFinalBlock`，因此如果您在调用`Close`the ，`CryptoStream`那么您应该可以在那里）。

**编辑**
我在想更多。我认为这可能与填充有关（同样，没有看到你的代码很难说）。根据您选择的填充模式，您需要在解密后从纯文本中剥离填充字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T02:29:29.003

您的问题最可能存在的地方是当您在加密之前读取未加密的数据库，或者打开一个新文件以写出新解密的数据库时。

作为故障排除步骤，您可以考虑以字节形式读取原始数据库文件，然后将其写出，而无需任何干预加密/解密。如果它仍然损坏，我首先要检查的是您打开输出文件时使用的编码。

# c# - RDLC 数学错误处理

> ID：11723178
> 
> 赞同：1
> 
> 时间：2012-07-30T14:05:18.020
> 
> 标签：c#, reporting-services, rdlc

如果 txtTotalFixedAsset3 为 0，则下面的表达式无法给出 #error 结果

```
=IIf(ReportItems!txtTotalFixedAsset3.Value<> 0 ,(ReportItems!txtTotalFixedAsset.Value  /ReportItems!txtTotalFixedAsset3.Value)*100 , 0) 
```

我怎么了？

```
=IIf(ReportItems!txtTotalFixedAsset3.Value<> cDec(0) ,(ReportItems!txtTotalFixedAsset.Value  /ReportItems!txtTotalFixedAsset3.Value)*100 ,cDec(0)) 
```

我也试过这个。但没有成功。txtTotalFixedAsset3 值是十进制类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:17:35.270

`Iif`无论条件是否为真，它都可能试图评估参数。尝试：

```
=ReportItems!txtTotalFixedAsset.Value /
     IIf(ReportItems!txtTotalFixedAsset3.Value = 0
        , 1
        , ReportItems!txtTotalFixedAsset3.Value)
     *100 
```

当然，这假设如果`txtTotalFixedAsset3`为 0，则`txtTotalFixedAsset`也为 0。如果不是，那么它确实是除以 0 错误。

# php - 如何将变量从一个php页面传递到下一个页面

> ID：11723179
> 
> 赞同：1
> 
> 时间：2012-07-30T14:05:17.993
> 
> 标签：php, google-maps

我正在尝试做的事情似乎很简单，但我无法弄清楚，因为我看到的每个示例都只与登录或注册页面有关。我正在使用 Google Maps API v3，有一些名为`event.latLng.lat`和的变量`event.latLng.lat`。我想要一个链接，将您发送到下一页并简单地显示 lat 和 lng。第二页称为 second.php。

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:06:34.897

你可以使用这样的东西：

```
nextpage.php?lat=12&lng=34 
```

这可以在下一页上用`$_GET['lat]`和检索`$_GET['lng]`。

您会看到通过超全局传递给页面的所有变量`GET`，`$_GET`例如

```
var_dump($_GET); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:15:15.420

您可以通过许多不同的方式将变量传递到第二页：

**1\. 使用 POST 或 GET 传递变量**

```
<a href='second.php?lat=12&lng=34'>Second Page</a> 
```

在第二页上，您可以使用

```
$_GET['lat'];
$_GET['lng']; 
```

**2\. 饼干。**

```
setcookie("lat", 12);    
setcookie("lng", 34); 
```

在第二页上，您可以使用检索值

```
$_COOKIE['lat']
$_COOKIE['lng'] 
```

**3\. 会议**

或者您可以存储会话变量：

```
 $_SESSION['lat']=12;
   $_SESSION['lng']=34; 
```

只需在第二页上检索：

```
 $lat = $_SESSION['lat'];
   $lng = $_SESSION['lng']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:07:23.130

看起来那些是 JavaScript 变量，而不是 PHP。使用 GET 传递 PHP 变量相对简单：

```
<a href = "page.php?lat=<?php echo(urlencode($lattitude)); ?>&long=<?php echo(urlencode($longitude)); ?>">
    Click Here!
</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T14:09:24.247

就像 fdomig 所说的，

```
<a href="nextpage.php?late=12&lng=34">Go to next page</a> 
```

并在下一页中检索变量

```
<?php

$lat = $_GET['lat'];
$lng = $_GET['lng'];

?> 
```

# c# - 如何在 ASP.NET Web 应用程序中连接到 MySql 数据库？

> ID：11723183
> 
> 赞同：1
> 
> 时间：2012-07-30T14:05:52.563
> 
> 标签：c#, asp.net, mysql

假设我的 Web.config 中已经有一个名为“ **myConn ”的正确格式的连接字符串。**该数据库位于不同的服务器上，并且是 MySQL。如何在我的 ASP.NET Web 应用程序中连接到此数据库？

**我尝试了什么：**
我尝试安装“**支持 WCF 的 ADO.NET C# DbContext 生成器**”，但这在我的脸上出现了错误消息*“无法将程序集引用“System.Data.Entity”添加到项目中。此向导将继续运行，但生成的项目可能无法正确构建。*'

**笔记：**

*   使用 Visual Studio 2010（版本 10.0.40219.1 SP1Rel）
*   使用 .NET 框架 2.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:15:44.317

假设 ODBC（不是唯一的选择），它应该只是一个问题：

```
OdbcConnection conn = new OdbcConnection(connectionString);
conn.Open(); 
```

编辑：哦，如果它是从您想知道的 web.config 中获取的（可能不是，但谁知道），那部分将是：

```
string connectionString = System.Configuration.ConfigurationManager.AppSettings["myConn"].ToString(); //ToString here is optional unless you're doing some weirdness in the web.config 
```

根据您的要求，以下是 obdc 数据操作背后的基础知识：

以下是查询类型的语句：

```
string command = "SELECT Something FROM SomeTable WHERE SomethingElse = '%" + "@Parameter1" + "%' AND SomethingElseStill LIKE '%" + @Parameter2 + "%' ";
using (OdbcConnection connection = new OdbcConnection(connectionString))
{
    OdbcCommand command = new OdbcCommand(command, conn);
    command.Parameters.Add("@Parameter1", OdbcType.VarChar, 255);
    command.Parameters["@Parameter1"].Value = "SomeString"
    command.Parameters.Add("@Parameter2", OdbcType.Int);
    int SomeInteger = 1;
    command.Parameters["@Parameter2"].Value = SomeInteger;
    OdbcDataAdapter adapter = new OdbcDataAdapter(command,con);
    DataSet Data = new DataSet();
    adapter.Fill(Data);
} 
```

这将使用 OdbcDataAdapter 对象从您的数据库中获取数据并将其推送到 DataTable 对象中。这不是唯一的方法，但它肯定是最基本的。查看[这个很棒的答案](https://stackoverflow.com/questions/4192968/linq-to-map-a-datatable-into-a-listmyobject)，了解一种使用一点反射将结果转换为您想要的任何对象列表的方法。您还可以使用 LINQ 之类的东西将数据映射到自定义类，但我将把这一点留给您。

无论如何，这里是一样的，但是没有查询：

```
string command = "INSERT INTO SomeTable (column1, column2, column3) VALUES '%" + "@Parameter1" + "%', '%" + "@Parameter2" + "%', '%" + "@Parameter3" + "%' ";
using (OdbcConnection connection = new OdbcConnection(connectionString))
{
    OdbcCommand command = new OdbcCommand(command, conn);
    command.Parameters.Add("@Parameter1", OdbcType.VarChar, 255);
    command.Parameters["@Parameter1"].Value = "SomeString"
    command.Parameters.Add("@Parameter2", OdbcType.Int);
    int SomeInteger = 1;
    command.Parameters["@Parameter2"].Value = SomeInteger;
    command.Parameters.Add("@Parameter3", OdbcType.VarChar, 255);
    command.Parameters["@Parameter3"].Value = "SomeOtherStringOrSomething";
    command.ExecuteNonQuery();
} 
```

确保仔细检查我的引号和内容，因为我是在 StackOverflow 编辑器中编写的，而不是任何类型的 IDE，所以不幸的是我没有得到语法高亮显示：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:08:23.240

如果它是不同的服务器，但它是相同的数据库，具有相同的凭据，您需要做的就是将连接字符串指向新服务器的 IP 地址，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:27:24.353

检查参考：System.Data.DataSetExtensions

## 代码

```
 using System.Data.Odbc;

 private const string ConnStr = "Driver={MySQL ODBC 3.51    Driver};
 Server=localhost;Database=test;uid=root;pwd=;option=3"; 
```

甚至您可以将连接字符串放在 web.config 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:23:52.887

由于您使用的是 .NET 2.0，因此不能使用实体框架或`System.Data.Entity`.

# android - 检查字符串是android上的网址还是ip

> ID：11723184
> 
> 赞同：3
> 
> 时间：2012-07-30T14:05:54.883
> 
> 标签：android, validation, ip, ip-address

我需要验证在 TextEdit 中输入的字符串是否是网址，例如。“www.stackoverflow.com”或 IP 地址，例如。“64.34.119.12”。我试过这两种方法都没有成功。我有名为 ip 的私有类变量。

方法一：

```
public boolean isAdress(){

        boolean isaddr = true;
        try
        {
            ip = new NetTask().execute(""+textEdit1.getText()).get();
        }
        catch (Exception ex)
        {
            isaddr = false;
        }
        return isaddr;
    } 
```

方法 2 是我在将字符串发送到 NetTask 之前检查字符串的方法。

```
public boolean isAdress(){
        String adress = textEdit1.getText().toString();
        boolean isaddr = true;
        if (adress.length() > 0) {
            String[] nums = adress.split(".");
            if (nums.length == 4) {
                for (String str : nums) {
                    int i = Integer.parseInt(str);
                    if ((i < 0) || (i > 255)) {
                        isaddr = false;
                    }
                }
            } 
        }
        return isaddr;
    } 
```

这第二种方法也不起作用，但即使这样做，它也无法验证网址。

那么有什么方法可以验证这两种情况的字符串吗？

编辑：阅读有关正则表达式后，我也尝试了这种方法：

```
private String regex = "\\b(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]";

public boolean isAdress(){
        String adress = textEdit1.getText().toString();
        try {
            Pattern patt = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);
            Matcher matcher = patt.matcher(adress);
            return matcher.matches();
        } catch (RuntimeException e) {
        return false;
    }           
    } 
```

但它似乎一直返回假。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:08:49.000

简短回答：尝试使用正则表达式！

编辑：

```
if(textEdit1.getText().matches(REGEX_URL)) {
    //DO URL THINGS
}

if(textEdit1.getText().matches(REGEX_IPADDRES)) {
    //DO IP THINGS
} 
```

如果你用谷歌搜索，你可以找到 IP 地址和 URL 的正确正则表达式字符串......

注意：网址的正则表达式可以根据您的需要而有所不同，您只需要 http:// https:// 还是所有有效的网址（如市场：//）...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-17T13:01:38.213

Patterns.IP_ADDRESS.matcher(url).matches();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T10:33:56.420

在 Kotlin 中验证 IP 地址，返回 true 或 false

```
fun isValidIPAddress(ip:String):Boolean {
   val reg0To255 = ("(\\d{1,2}|(0|1)\\" + "d{2}|2[0-4]\\d|25[0-5])").toRegex()
   return reg0To255.matches(ip)
}

val inputIP = "127.1.1.775"
println("Input: " + inputIP)
println("Output: " + isValidIPAddress(inputIP)) 
```

输入：127.1.1.775 输出：假

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-30T16:57:47.360

更简单的方法怎么样？检测它是否是IP地址，例如

```
public static boolean isIP(String input) {

        if (input.contains(".") && input.length()>1) {
            return TextUtils.isDigitsOnly( input.replace(".", "").trim() );
        }
        else {
            return false;
        }
    } 
```

# tsql - 这个使用左连接的 t-sql 查询有什么问题？

> ID：11723185
> 
> 赞同：0
> 
> 时间：2012-07-30T14:06:07.183
> 
> 标签：tsql, sql-server-2005

我有两个 sqlserver 2005 表：任务表和旅行表。

我正在尝试编写一个查询，从 Task 表中选择特定 Empid 的所有记录，如果 Task 是旅行，还从另一个表中获取里程值。

我希望只选择一行，但返回 Task 表中的所有行。

我正在使用的查询是

```
Select Tasklog.TaskLogPkey, Tasklog.Empid , Tasklog.Task, TravelLog.Mileage from 
Tasklog
left join TravelLog
on   
   TaskLog.EmpId = 12 and TaskLog.Task ='Travel'   and 
   TaskLog.TaskLogPkey = TravelLog.TaskLogPkey 
```

但如果我不包括在内，这没有什么区别

```
 -- TaskLog.EmpId = 12 and TaskLog.Task ='Travel'   and 
```

我究竟做错了什么？

显然以下方法不起作用：

```
Select Tasklog.TaskLogPkey, Tasklog.Empid , Tasklog.Task, TravelLog.Mileage from 
Tasklog where   TaskLog.EmpId = 12 and TaskLog.Task ='Travel' 
left join TravelLog
on   
   TaskLog.TaskLogPkey = TravelLog.TaskLogPkey 
```

这些是我正在使用的表：

```
Create table TaskLog(
TaskLogPkey int not null,
Empid  int,
Task varchar(30)
)

Insert Tasklog values(1,12,'Sales')
Insert Tasklog values(2,4,'Travel')
Insert Tasklog values(3,63,'Meeting')
Insert Tasklog values(4,12,'Travel')
Insert Tasklog values(5,12,'Email')
Insert Tasklog values(6,4,'Travel')
Insert Tasklog values(7,63,'Meeting')
Insert Tasklog values(8,12,'PhoneCall')

Create table TravelLog(
TaskLogPkey int not null,
Mileage  int
)

Insert TravelLog values(2,45)
Insert TravelLog values(4,25)
Insert TravelLog values(6,18) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:08:50.790

当您执行外连接（左连接是左*外*连接）时，您将获得该连接内侧的所有记录，--- 无论您在连接的另一*外侧*指定什么谓词（过滤器）条件。
要过滤另一端，您需要添加 Where 子句。

```
Select t.TaskLogPkey, t.Empid , t.Task, v.Mileage 
From Tasklog t 
    Left Join TravelLog v 
         On t.TaskLogPkey = v.TaskLogPkey 
Where t.Task ='Travel' 
    And t.EmpId = 12 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:09:45.927

TaskLog.EmpId = 12 和 TaskLog.Task ='Travel' 是选择标准的一部分，而不是加入标准。

而“Charles Bretana”则以不到 1 分钟的优势击败了我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T14:11:19.520

您应该尝试放置一个`WHERE`带有附加条件的子句：

```
Select Tasklog.TaskLogPkey, Tasklog.Empid , Tasklog.Task, TravelLog.Mileage 
from Tasklog
left join TravelLog
    on  TaskLog.TaskLogPkey = TravelLog.TaskLogPkey
where TaskLog.EmpId = 12 
    and TaskLog.Task ='Travel' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/931a3/1)

# mysql - Mysqldump 使用 ftp 命令备份远程服务器

> ID：11723194
> 
> 赞同：0
> 
> 时间：2012-07-30T14:06:38.700
> 
> 标签：mysql, linux, ftp, centos

如何在单个命令行中使用 ftp 协议和 ftp 命令将备份传输到远程服务器？

我的 mysql 转储命令

```
mysqldump -u _admin -p'pass&word' _maindb --add-drop-table --ignore-table=_maindb.emailstatstics > backup$(date '+%d_%m_%y_%H_%M').sql 
```

和 ftp 一样：

```
ftp 64.xx.xx.xx 
myUserName
myPassword
put myMysqlBackup.sql 
```

我需要在 directadmin 的 cronjobs 中执行此命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:09:54.907

这将上传文件。您可以将这两行放入 shell 脚本并使其可执行，从 crontab 中使用它应该没有问题。只需确保使用输出文件的绝对路径即可。

```
ftp -u ftp://myUserName:myPassword@64.xx.xx.xx myMysqlBackup.sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:09:59.690

想必：

```
FILENAME=backup$(date '+%d%m_%y_%H_%M').sql ; mysqldump -u _admin -p'pass&word' _maindb --add-drop-table --ignore-table=maindb.emailstatstics > $FILENAME ; scp $FILENAME USERNAME:PASSWORD@64.xx.xx.xx/. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T01:18:11.723

尝试这个：

```
#/bin/bash
archive=$(date +%Y-%m-%d-%H-%M).gz
mysqldump --all-databases | gzip -9 >  $archive
HOST=backupserver
USER=user
PASS=password
ftp -inv $HOST << EOF
user $USER $PASS
put $archive
bye
EOF
rm -f archive 
```

# concurrency - LLVM：在分布式/并发系统中移动生成的代码

> ID：11723195
> 
> 赞同：4
> 
> 时间：2012-07-30T14:06:48.473
> 
> 标签：concurrency, code-generation, llvm, move

我主要将 LLVM C++ API 用作脚本语言的代码生成器，该脚本语言在运行时被解析和评估（生成代码、编译和执行它）。目前，我正在研究分布式/并发系统上下文中的未来用例，并想知道是否以及如何实现这些用例。也许你可以分享你的想法：

1.  有没有办法在分布式系统的一个节点上生成 LLVM 代码，将其序列化为某种有线格式，将其发送到另一个节点，在那里编译或重新编译，然后执行它？我已经坚持寻找序列化模块/函数的方法。
2.  有没有办法在同一个 LLVMContext 中启用多线程代码生成/编译，即线程池共享一个 LLVMContext 并同时在此上下文中生成/执行代码。到目前为止，我发现在这种情况下，每个线程都应该有一个 LLVMContext。但是，我可以在不同的上下文之间共享一个模块并与 1) 相关，我如何将生成的代码从一个模块移动到另一个模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:14:02.583

您绝对可以使用 LLVM 位码格式将代码从一个节点转发到另一个节点。有关更多信息，请参阅 include/llvm/Bitcode/ReaderWriter.h 等。您还可以查看 LLVM 工具的来源，以了解位码是如何序列化和反序列化的。您可能会发现[http://llvm.org/docs/BitCodeFormat.html](http://llvm.org/docs/BitCodeFormat.html)很有用。

# .net - httpwebrequest 安全异常

> ID：11723196
> 
> 赞同：2
> 
> 时间：2012-07-30T14:06:58.143
> 
> 标签：.net, silverlight, httpwebrequest

我正在尝试将带有 GET 请求的 JSON 列表加载到我的 localhost（WAMP）上的 PHP 文件到我的 Silverlight+Webproj 解决方案中：

```
HttpWebRequest request = WebRequest.Create(uri) as HttpWebRequest;
request.BeginGetRequestStream(GetRequestStreamCallback, request);

    private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        Stream postStream = request.EndGetRequestStream(asynchronousResult);

        byte[] byteArray = Encoding.UTF8.GetBytes(postInformation);
        postStream.Write(byteArray, 0, postInformation.Length);
        postStream.Close();
        request.BeginGetResponse(DownloadCompleted, request);
    }

    private void DownloadCompleted(IAsyncResult asynchronousResult)
    {
        ... load the data from the response , etc
} 
```

这对另一个网站以完全相同的方式工作得非常好。但现在我得到了这个安全异常：

```
{System.Security.SecurityException ---> System.Security.SecurityException: Security error.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult     asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.    <EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
   --- End of inner exception stack trace ---
    at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at KunstWebsite.Model.Factory`1.DownloadCompleted(IAsyncResult asynchronousResult)} 
```

我尝试了我发现的解决方案，例如添加 clientaccesspolicy.xml、crossdomain.xml、将 localhost 作为受信任站点、将 trust level="Full" 添加到我的 web.config。似乎都没有工作...

有人知道我可能忽略了什么吗？

# android - 由于特殊字符导致的 XML 解析错误

> ID：11723200
> 
> 赞同：0
> 
> 时间：2012-07-30T14:07:09.620
> 
> 标签：android

我正在解析一个带有链接标签的链接的 XML。但它给了我一个错误，因为我认为链接有特殊字符（我也在使用字符串替换函数来表示“&”）。

示例链接：[http ://tizentr.net/ara/linkler_tPEE9ZwTmy0.xml](http://tizentr.net/ara/linkler_tPEE9ZwTmy0.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:14:17.720

您必须将特殊字符替换为其实体等价物。例如：

```
> becomes &gt;
< becomes &lt;
& becomes &amp; 
```

# iphone - 如何从 .clp(CLIPS) 文件中获取响应？

> ID：11723202
> 
> 赞同：3
> 
> 时间：2012-07-30T14:07:14.447
> 
> 标签：iphone, objective-c, artificial-intelligence, rule-engine, clips

我正在尝试在我的 iPhone 应用程序中加载 .clp 文件。为此，我使用下面的代码

```
 NSString *filePath = [[NSBundle mainBundle]
                          pathForResource:@"autodemo" ofType:@"clp"];

    environment = CreateEnvironment();
    char *clipsFileChar = (char *)[filePath cStringUsingEncoding:NSASCIIStringEncoding];
    Load(clipsFileChar);
    Reset();
    Run(-1);

    NSString *evalS = [NSString stringWithFormat:@"(find-all-facts ((?f state-list)) TRUE)"];
    char * evalStr = (char *)evalS;

    DATA_OBJECT obj;// = {0,-1};
//    obj.type = STRING;
//    obj.value = evalStr;

    int i = Eval(evalStr, &obj);
    NSLog(@"%d",i); 
```

现在当我运行这段代码时，每次都会`Eval(evalStr, &obj)`给我。 我正在使用[此链接](http://www.csie.ntu.edu.tw/~sylee/courses/clips/clipsjni/examples/AutoDemo/autodemo.clp)中的 autodemo.clp 文件。 那么，如何使命令工作以及如何获得 clp 文件返回的响应？`0`

`Eval()`

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:33:22.073

下面的代码解决了我的问题，希望对其他人有所帮助.. :)

* * *

```
InitializeEnvironment();
Clear();

NSString *filePath = [[NSBundle mainBundle]
                      pathForResource:@"autodemo" ofType:@"clp"];
char *clipsFileChar = (char *)[filePath cStringUsingEncoding:NSASCIIStringEncoding];

IncrementGCLocks();
Load(clipsFileChar);
Reset();
Run(-1);
DecrementGCLocks();

[self nextUIState]; 
```

* * *

```
- (void)nextUIState
{
    DATA_OBJECT theDO;
    NSString * evalS = @"(find-all-facts ((?f state-list)) TRUE)";
    char *evalStr = (char *)[evalS cStringUsingEncoding:NSASCIIStringEncoding];

    int j = EnvEval(GetCurrentEnvironment(), evalStr, &theDO);
    NSLog(@"j = %d",j);

    if(factDict)
    {
        [factDict release];
        factDict = nil;

        factDict = [[NSMutableDictionary alloc] init];
    }

    id value = [self objectForDataObject:&theDO];

    NSLog(@"%@",[value description]);    
} 
```

* * *

```
-(id) objectForDataObject: (DATA_OBJECT*) arg
{
    switch(arg->type)
    {
        case FACT_ADDRESS:
        {

            DATA_OBJECT data = { 0 };
            struct fact* aFact = (struct fact*) arg->value;

            if(EnvGetFactSlot(GetCurrentEnvironment(),aFact,(char*)[@"current" UTF8String],&data))
            {
                [factDict setObject:[self objectForDataObject: &data] forKey:@"current"];
                [factDict retain];
            }
            return factDict;
        }
        case SYMBOL:
        {
            NSString *str = [NSString stringWithUTF8String: ValueToString(arg->value)];
            if ([str isEqual: @"nil"]) return nil;
            if ([str hasPrefix: @"<<<"] && [str hasSuffix: @">>>"])
            {
                return [self dataFromSymbolString: str];
            }
            return str;
        }
        case STRING:
        {
            return [NSString stringWithUTF8String: ValueToString(arg->value)]; 
        }
        case INTEGER:
        {
            return [NSNumber numberWithInt: ValueToInteger(arg->value)];
        }
        case FLOAT:
        {
            return [NSNumber numberWithDouble: ValueToDouble(arg->value)];
        }
        case EXTERNAL_ADDRESS:
        {
            return (id) arg->value;
        }
        case MULTIFIELD:
        {
            int i, count = GetpDOLength(arg);
            NSMutableArray *args = [NSMutableArray arrayWithCapacity: count];
            FIELD_PTR fptr = (FIELD_PTR) GetMFPtr(GetpValue(arg),GetpDOBegin(arg));
            for(i = 0; i < count; ++i, ++fptr)
            {
                DATA_OBJECT dobj;
                dobj.type = fptr->type;
                dobj.value = fptr->value;
                [args addObject: [self objectForDataObject: &dobj]];
            }
            return args;
        }
        default:
            return nil;
    }
} 
```

* * *

如果您发现任何其他更好的方法（当然有），请告诉我。:)

# sql - 以及像 IN 子句这样的多个值

> ID：11723204
> 
> 赞同：1
> 
> 时间：2012-07-30T14:07:18.643
> 
> 标签：sql, in-clause

如何获得下表中同时具有 Feature1 和 Feature2 的汽车和功能（宝马和丰田）？

```
Select Car,Feature 
    from Table 
    where Feature in ('Feature1','Feature2') 
```

提供所有 3 辆车，包括只有 Feature1 的本田。这只是实际查询的一个简化示例，在 IN 子句中可以有数百个值。

```
Car    Feature
-----  --------
BMW    Feature1
BMW    Feature2
BMW    Feature3
Toyota Feature1
Toyota Feature2
Honda  Feature1 
```

谢谢，基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:11:46.757

```
select Car
from your_table
where feature in ('f1', 'f2')
group by car
having count(distinct feature) >= 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:12:16.767

使用 GROUP/HAVING 构造，其中 HAVING 测试 IN 子句中的元素数量。这样您就可以保证这两个功能都存在。

```
SELECT cf.Car
    FROM CarFeature cf
    WHERE cf.Feature IN ('Feature1', 'Feature2')
    GROUP BY cf.Car
    HAVING COUNT(DISTINCT cf.Feature) = 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:10:10.870

该`IN`子句实际上是一个嵌套的`OR`. 以下将为您提供具有这两种功能的所有汽车。

```
SELECT U.Car FROM
  (
   Select Car from Table where Feature ='Feature1'
   UNION ALL
   Select Car from Table where Feature ='Feature2'
  ) AS U
WHERE COUNT(U.Car) > 1 
```

# eclipselink - Eclipselink 和 Spring 数据

> ID：11723208
> 
> 赞同：9
> 
> 时间：2012-07-30T14:07:27.287
> 
> 标签：eclipselink, spring-data-jpa

我正在尝试使用 eclipselink (2.4.0) 和 spring-data-jpa (1.1.0.RELEASE) 的组合来实现解决方案。但是，每次部署解决方案（Tomcat 7）时，都会出现以下异常：

```
Caused by: java.lang.IllegalArgumentException: No [ManagedType] was found for 
the key class [com.acme.domain.entities.User] in the Metamodel - please 
verify that the [Managed] class was referenced in persistence.xml using a 
specific <class>com.acme.domain.entities.User</class> property or a global 
<exclude-unlisted-classes>false</exclude-unlisted-classes> element. 
```

它似乎发生在存储库自动装配发生时（下面的代码示例）：

服务等级

```
@Component
public class UserDataService {

    @Autowired
    private UserRepository userRepository;

    ...
} 
```

实体类

```
package com.acme.domain.entities;

...

@Entity
@Table(name = "users")
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "user_id")
    private Integer id;

    ...

} 
```

持久性.xml

```
<persistence-unit name="default" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>    
    <class>com.acme.domain.entities.User</class>

    ...
</persistence-unit> 
```

这可能是由于spring和eclipselink之间的一些冲突吗？

**更新：**

堆栈跟踪...

```
[#|2012-07-31 16:25:02,317|ERROR|pool-2-thread-40|org.springframework.web.context.ContextLoader|Context initialization failed|#]
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDataService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.acme.data.repositories.UserRepository com.acme.data.services.UserDataService.userRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: No [ManagedType] was found for the key class [com.acme.domain.entities.User] in the Metamodel - please verify that the [Managed] class was referenced in persistence.xml using a specific <class>com.acme.domain.entities.User</class> property or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element.
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:897)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:873)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.acme.data.repositories.UserRepository com.acme.data.services.UserDataService.userRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: No [ManagedType] was found for the key class [com.acme.domain.entities.User] in the Metamodel - please verify that the [Managed] class was referenced in persistence.xml using a specific <class>com.acme.domain.entities.User</class> property or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element.
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:512)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 27 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: No [ManagedType] was found for the key class [com.acme.domain.entities.User] in the Metamodel - please verify that the [Managed] class was referenced in persistence.xml using a specific <class>com.acme.domain.entities.User</class> property or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element.
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:305)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:484)
    ... 29 more
Caused by: java.lang.IllegalArgumentException: No [ManagedType] was found for the key class [com.acme.domain.entities.User] in the Metamodel - please verify that the [Managed] class was referenced in persistence.xml using a specific <class>com.acme.domain.entities.User</class> property or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element.
    at org.eclipse.persistence.internal.jpa.metamodel.MetamodelImpl.entityEmbeddableManagedTypeNotFound(MetamodelImpl.java:174)
    at org.eclipse.persistence.internal.jpa.metamodel.MetamodelImpl.managedType(MetamodelImpl.java:489)
    at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:58)
    at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getMetadata(JpaEntityInformationSupport.java:65)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:149)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:87)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:70)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:137)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:125)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:41)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T13:03:01.030

我能够解决我的问题，但它是上述设置的另一种设置，我只是添加了一些我偶然发现的东西，直到我能够在我的 SE 环境中解决它：

*   错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=338837](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338837)影响 EclipseLink 版本 2.2.0 及以下版本。主要发生在本地环境（RESOURCE_LOCAL）中。EclipseLink 版本升级或以下解决方法可能会有所帮助：

```
<exclude-unlisted-classes>false</exclude-unlisted-classes> 
```

*   在类路径中有多个persistence.xml 文件（尤其是在第3 方JAR 中），它们都定义了相同的持久性单元名称（高于“默认”可能很常见）。在这种情况下，尝试重命名您的持久性单元名称作为第一步

*   如果重命名持久性单元名称有效，但将其更改回旧值会重现问题，则上述第 3 方 JAR 或您自己项目的旧 JAR 已包含在您的构建中（例如，在项目级别重构/重命名或类似的东西改变了结构，例如一个 Maven 构建仍然可以从存储库中获取旧的构建工件）

最后，当涉及到我的设置（Spring-Standalone Application，没有persistence.xml，但是因为使用了自定义公司框架而有大量的Spring配置）时，它表明我只是忘记添加自定义框架核心的实体包当我想在我的本地项目中运行他们的服务实现之一（Spring-Bean 实现）而不是让他们的服务实现来自 JAR 依赖项时。因此，请确保为 EntityManagerFactory 列出了所有必需的实体包：

```
 <bean id="customEntityManagerFactory" parent="abstractEntityManagerFactory">
        <property name="dataSource" ref="dataSource"/>

        <!-- Packages of EntityClasses -->
        <property name="packagesToScan">
            <list merge="true">
                <value>ch.company.div1.foo.bar.model</value>
                <value>ch.company.div1.foo.barnicle.model</value>
                <value>ch.company.div2.we.help.model</value>
            </list>
        </property>

        <property name="jpaProperties">
            <props merge="true">
                <prop key="eclipselink.target-database">org.eclipse.persistence.platform.database.SQLServerPlatform
                </prop>
                <prop key="javax.persistence.transactionType">RESOURCE_LOCAL</prop>
            </props>
        </property>
     </bean> 
```

在我的情况下，我忘记将模型包与我们公司的另一个部门（编写自定义框架核心）的使用过的实体一起添加。

祝你好运，那个错误是野兽：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T13:58:08.517

不确定您是否遇到与我相同的问题：尝试创建 2 个不同的实体工厂...例外是相同的，所以也许这会有所帮助。本质上，当它在错误的 EntityManagerFactory 上实例化实体时，就会发生此异常。

我的项目在单个数据库连接上运行良好，但是当我添加第二个时，EclipseLink 对在哪里实例化我的实体感到困惑。经过几次调试后，我的结论是从我的 root-context.xml 中删除属性“packagesToScan”并将其替换为“persistenceXmlLocation”。在那个 XML 中，我列出了我需要扫描的每个类，并使用“<exclude-unlisted-classes>”排除了其他所有内容

这是我当前正在运行的完整 XML 配置：

根上下文.xml

```
<bean id="dataSource1" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="org.postgresql.Driver" />
    <property name="url" value="jdbc:postgresql://server1.example.com:5432/db1" />
    <property name="username" value="username" />
    <property name="password" value="password" />
    <property name="defaultAutoCommit" value="false" />
    <property name="initialSize" value="5" />
    <property name="maxIdle" value="5" />
    <property name="validationQuery" value="SELECT 1" />
    <property name="timeBetweenEvictionRunsMillis" value="600000" />
    <property name="poolPreparedStatements" value="true" />
    <property name="maxOpenPreparedStatements" value="10" />
</bean>

<bean id="dataSource2" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="org.postgresql.Driver" />
    <property name="url" value="jdbc:postgresql://server2.example.com:5432/db2" />
    <property name="username" value="user" />
    <property name="password" value="password" />
    <property name="defaultAutoCommit" value="false" />
    <property name="initialSize" value="5" />
    <property name="maxIdle" value="5" />
    <property name="validationQuery" value="SELECT 1" />
    <property name="timeBetweenEvictionRunsMillis" value="600000" />
    <property name="poolPreparedStatements" value="true" />
    <property name="maxOpenPreparedStatements" value="10" />
</bean>

<bean id="emf1" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource1" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence1.xml" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="false" />
        </bean>
    </property>
    <property name="jpaPropertyMap">
        <map>
            <entry key="eclipselink.weaving" value="false" />
            <entry key="eclipselink.logging.level" value="WARNING" />
            <entry key="eclipselink.logging.timestamp" value="false" />
            <entry key="eclipselink.logging.session" value="false" />
            <entry key="eclipselink.logging.thread" value="false" />
        </map>
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
</bean>

<bean id="emf2" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource2" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence2.xml" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="false" />
        </bean>
    </property>
    <property name="jpaPropertyMap">
        <map>
            <entry key="eclipselink.weaving" value="false" />
            <entry key="eclipselink.logging.level" value="WARNING" />
            <entry key="eclipselink.logging.timestamp" value="false" />
            <entry key="eclipselink.logging.session" value="false" />
            <entry key="eclipselink.logging.thread" value="false" />
        </map>
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
</bean>

<bean name="transaction1" class="org.springframework.orm.jpa.JpaTransactionManager" p:entity-manager-factory-ref="emf1" />
<bean name="transaction2" class="org.springframework.orm.jpa.JpaTransactionManager" p:entity-manager-factory-ref="emf2" />

<jpa:repositories base-package="org.myproject.repository1" transaction-manager-ref="transaction1" entity-manager-factory-ref="emf1" />
<jpa:repositories base-package="org.myproject.repository2" transaction-manager-ref="transaction2" entity-manager-factory-ref="emf2" />

<tx:annotation-driven /> 
```

持久性1.xml

```
<persistence-unit name="persistence1" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>org.myproject.repository1.Repo1</class>
    <class>org.myproject.repository1.Repo2</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
</persistence-unit> 
```

持久性2.xml

```
<persistence-unit name="persistence2" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>org.myproject.repository2.Repo1</class>
    <class>org.myproject.repository2.Repo2</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
</persistence-unit> 
```

所以，这对我有用......

显然，指定每个“persistence.xml”位置可以防止在第一个“emf”上实例化另一个 EntityManagerFactory 的类。事实上，这看起来像一个错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=338837](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338837)。我可以从调试中得出的结论是，如果没有“persistenceXmlLocation”，使用“packageScan”找到的所有类都在第一个创建的“emf”上实例化，第二个“emf”被完全忽略。

希望这可以帮助。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T20:34:13.740

设置`PersistenceUnitName`, 而不是`persistenceXmlLocation`

不需要`persistence.xml`。

```
factory.setPersistenceUnitName("dummy1");
factory.setPersistenceUnitName("dummy2"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T09:28:43.193

`com.acme.domain.entities`将带有实体的包 () 添加到`packagesToScan`.

# java - Eclipse 上带有 Android 的本机 C++ - 在 stdlib 上给出错误但可以工作

> ID：11723210
> 
> 赞同：2
> 
> 时间：2012-07-30T14:07:29.107
> 
> 标签：java, android, c++, eclipse, debugging

我一直在 android eclipse 环境中构建我的 android 应用程序。构建我的 c++ 代码并使用 ndk-build 独立编译它。这很好用。

我需要调试 logcat 突然抛出的 sigsegv 错误。

所以我将eclipse中的项目切换为“在android中添加本机代码”。现在它调试我的 c++ 代码，但每次我使用任何 std 组件（例如向量）时都会给我一个错误，因此我无法运行代码，因为它包含错误。

该项目在以前的配置上运行良好。我相信我为 std 支持添加了一个库。

关于如何正确调试本机代码的任何想法？

感谢您的帮助

更新我完全重新安装了我的sdk、eclipse（这次是juno）和所有插件。不用找了。错误检查不识别 java 和 std 相关的东西：

```
#include <jni.h>
using namespace std; 
```

红色下划线。

c++ 的其余部分被正确识别。

更新2

当我将 ${NDKROOT}/sources/cxx-stl/gnu-libstdc++/include 添加到路径和包含时，java 语句已经包含在内。净矢量尚未，我也尝试添加 ${NDKROOT}/sources/cxx-stl/stlport/stlport 但它还没有解决矢量问题。如果禁用错误检查，则项目编译，如果我犯了语法错误，编译器会警告我。这对我来说没问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:23:28.713

您可能首先可以禁用错误，`Project Properties|C/C++ General|Code Analysis`以便您的项目编译。

然后，您可以检查其中的包含路径`Project Properties|C/C++ General|Paths and Symbols`是否正确。

我还听说更新 ADT 插件可能会有所帮助。

# java - Scala，无法实现通用的java方法

> ID：11723211
> 
> 赞同：7
> 
> 时间：2012-07-30T14:07:31.853
> 
> 标签：java, scala, generics, methods, implements

我想实现一个在scala（2.9.2）中使用泛型的java方法。但是我失败了...

Java接口方法：

```
public <T extends Number> void setAttribute(Key<T> key, Number value); 
```

想要实现该方法的 Scala 代码：

```
def setAttribute[T <: Number](key: Key[T], value: Number) = {
  setAttributeLocal(key, value)  }

private def setAttributeLocal[T](key: Key[T], value: T) = {
  val stringValue = ConvertUtils.convert(value, classOf[String]).asInstanceOf[String]
  session = session + (key.getValue() -> stringValue)
} 
```

键看起来像：

```
public class Key<T> 
```

但这不会编译。

```
[error]  found   : mypackage.Key[T]
[error]  required: mypackage.Key[java.lang.Number]
[error] Note: T <: java.lang.Number, but Java-defined class Key is invariant in type T.
[error] You may wish to investigate a wildcard type such as `_ <: java.lang.Number`. (SLS 3.2.10)
[error]     setAttributeLocal(key, value) 
```

我不知道有什么问题。有什么建议/想法吗？

格力加菲猫克隆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:29:33.807

编译器似乎对您对`setAttributeLocal`. `setAttributeLocal`需要 a `Key[Number]`，但您提供的是`Key[_ <: T]`. 在 Java-Land 中，这意味着您试图将 a 传递`Key<? extends Number>`为`Key<Number>`.

建议是`setAttributeLocal`接受`Key<? extends Number>`或`Key[_ <: Number]`，这取决于它是 Java 还是 Scala 定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:55:14.347

这里看起来有点不对劲。

你有没有尝试过：

```
def setAttribute[T <: Number](key: Key[T], value: T) =
  setAttributeLocal(key, value) 
```

为键保留类型 T 似乎很奇怪/不好，但不在值上使用它。我的猜测是你会得到一个不变的错误。您正在尝试将 type 的值分配给 type`Number`的键，`T`编译器不确定它是否不能通过`Number`for `T`（虽然它知道它可以通过`T`for `Number`）。

我们可以看到更多代码吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:30:04.193

正如@jsuereth 已经指出的那样， and 的签名之间存在差异`setAttribute`，`setAttributeLocal`即前者接受 a`Key[T <: Number]`但将与 key 匹配的值固定为 a `Number`，而后者更灵活，允许 key 和 value是`T <: Number`。这看起来很奇怪，您可能需要重新考虑该决定。这也导致了@Ben Schulz 解释的问题。

无论如何，编译器 (2.9.1) 对以下设置感到满意：

**`MyI.java`：**

```
public interface MyI {
  public <T extends Number> void setAttribute(Key<T> key, Number value);
} 
```

**`Key.java`：**

```
public interface Key<T> {
} 
```

**`Test.scala`：**

```
object Test extends App {
  def setAttribute[T <: Number](key: Key[T], value: Number) = {
    setAttributeLocal(key, value)  }

  private def setAttributeLocal[T](key: Key[T], value: Number) = {
    /* Notice that value is now also of type Number. */
  }
} 
```

# python - Python lambda 不记得 for 循环中的参数

> ID：11723217
> 
> 赞同：10
> 
> 时间：2012-07-30T14:07:49.090
> 
> 标签：python, for-loop, lambda

> **可能重复：**
> [在 lambda 表达式中使用变量的值](https://stackoverflow.com/questions/760688/use-value-of-variable-in-lambda-expression)

我正在使用 python 并试图找出我在使用 lambda 函数时遇到的问题。

从下面的代码中，我期望创建两个 lambda 函数，每个函数都有一个不同的 x，输出应该是
1 2

但输出是 2 2

为什么？我怎样才能制作两个不同的功能？使用定义？

```
def main():
    d = {}
    for x in [1,2]:
        d[x] = lambda : print(x)

    d[1]()
    d[2]()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-30T14:14:31.467

代码中的主体`lambda`引用了名称`x`。与该名称关联的值在循环的下一次迭代中更改，因此当调用 lambda 并解析名称时，它会获得新值。

为了达到你期望的结果，将`x`循环中的值绑定到一个参数，`lambda`然后引用该参数，如下所示：

```
def main():
    d = {}
    for x in [1,2]:
        d[x] = lambda x=x: print(x)

    d[1]()
    d[2]()

if __name__ == '__main__':
    main()

>>> 
1
2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T14:23:35.200

看起来像为[`partial`](http://docs.python.org/library/functools.html#functools.partial).

```
from functools import partial 
def main():
    d = {}
    for x in [1,2]:
        d[x] = partial(lambda x: print(x), x=x)

    d[1]()
    d[2]()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T14:13:50.097

这将解决它。这是因为 x 直接绑定到 lambda。

```
def create_lambda(x):
    return lambda : print(x)

def main():
    d = {}
    for x in [1,2]:
        d[x] = create_lambda(x)

    d[1]()
    d[2]()

if __name__ == '__main__':
    main() 
```

# sql-server - 实现悲观锁定

> ID：11723218
> 
> 赞同：2
> 
> 时间：2012-07-30T14:07:51.560
> 
> 标签：sql-server, oracle, sap-ase

我对如何以非常具体的行为实现悲观锁定感兴趣。（我用 Sybase+Oracle+MSSQL 标记问题的原因是因为我对解决方案感到满意，或者“这是不可能的！”对于其中任何一个）

我想要的是： 1 - 能够锁定一行（以便该进程稍后可以进行更新，但没有其他进程可以锁定该行） 2 - 当另一个进程尝试锁定同一行时，它应该收到记录被锁定的通知- 我不希望这个进程挂起（我相信这里可以使用简单的超时） 3 - 当另一个进程尝试读取记录时，它应该能够以当前在数据库中的方式读取它（但我不想使用脏读）。

上述 3 个要求目前通过使用共享内存的应用程序解决 - 并在数据库外部执行记录锁定。我想将锁定移动到数据库中。

到目前为止，我在#1 和#3 之间存在冲突——如果我通过将字段更新为相同值来执行“更新...”来锁定记录，那么来自另一个进程的“选择”就会挂起。

编辑：我现在对 MSSQL 上的快照隔离级别有一些运气。我可以在不使用脏读的情况下进行锁定和读取。

我不想使用脏读的原因是，如果报表正在运行，它可能会读取多个表并发出多个查询。快照为我提供了数据库的一致快照。如果是脏读，我会有不匹配的数据 - 如果中间有任何更新。

我认为 Oracle 也有快照，所以现在我对 Sybase 最感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:28:37.070

在 Oracle 中，您可以使用 select for update nowait 来锁定记录。

```
select * from tab where id=1234 for update nowait; 
```

如果另一个进程尝试执行相同的语句，则会出现异常：

```
ORA-00054: resource busy and acquire with NOWAIT specified 
```

直到第一个进程（会话）执行提交或回滚。

通常，oracle 不允许脏读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:13:03.563

您所描述的＃1 和＃3 之间的冲突是合乎逻辑的：您可以让数据库进行脏读或阻止读取。如果您可以读取锁定的行，则根据定义，它是脏读。这与您使用的特定数据库系统无关！

因此，如果您希望这样：是的，对于所有 3 个系统，您想要的都是不可能的，因为它损害了“脏读”的定义。

# oracle - 默认情况下的 oracle 订单类型 desc 或 asc 11g 与 10g

> ID：11723219
> 
> 赞同：0
> 
> 时间：2012-07-30T14:07:53.777
> 
> 标签：oracle, plsql, oracle10g, oracle11g, sql-order-by

`ORDER BY`oracle中子句的默认排序类型有什么不同吗？

我知道`ASC`如果我`DESC`在订购后不立即放入 10 克。

11g也一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:14:58.203

检查文档。

它说：

**升学 | DESC 指定排序顺序（升序或降序）。ASC 是默认值。**

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions001.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions001.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T09:33:15.240

是的，11g 也一样。

当您未指定任何排序子句时，默认值为 ASC 。如果您想覆盖此默认行为，请明确提及 desc 。

# iphone - 为什么我不能用这个代码读取设备与磁北的偏差？

> ID：11723235
> 
> 赞同：0
> 
> 时间：2012-07-30T14:08:49.447
> 
> 标签：iphone, objective-c, ios, magnetometer

好的，代码现在可以工作了，但它仍然需要工作。我得到的值是“粘性的”，它们不稳定（每次我尝试返回时，磁北似乎都会移动一点），我需要稍微摇晃设备以刷新/唤醒价值观..

游戏.h

```
#import <Foundation/Foundation.h>

#import "CoreLocation.h"

@interface Game : NSObject

<CLLocationManagerDelegate>

@property BOOL stopButtonPressed;

-(void) play;

@end 
```

游戏.m

```
@implementation Game

- (id) init 
{
    self = [super init];

    self.stopButtonPressed = NO;

    CLLocationManager *locationManager;

    locationManager = [[CLLocationManager alloc] init];

    locationManager.delegate = self;

    return self;
}

-(void) play 
{

    [locationManager startUpdatingHeading]; 

    while(!self.stopButtonPressed)
    {
         double degrees = locationManager.heading.magneticHeading;

         int degreesRounded = (int)degrees;

         NSLog(@"Degrees : %i", degreesRounded);
    }
}

@end 
```

我的视图控制器.m

```
@interface MyViewController()
{
    Game *game;
}
@end

@implementation MyViewController

-(void) viewDidLoad
{
    game = [[Game alloc] init];
}

- (IBAction)playPressed:(UIButton *)sender 
{
    [game performSelectorInBackground:@selector(play) withObject:nil];
}

- (IBAction)stopPressed:(UIButton *)sender 
{
    game.stopButtonPressed = YES;
}

@end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:14:07.507

此代码将阻塞线程，如果它发生在主线程中，您将永远无法按下按钮。

**CLLocationManager 是一种异步机制**。要正确使用它，您必须提供一个委托，它将在位置更新可用时通知它（这`self`在大多数情况下可能是（在哪里`self`是 viewController 或类似的）。请参阅[CLLocationManagerDelegate 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intf/CLLocationManagerDelegate)

```
...
    CLLocationManager *locationManager;
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    [locationManager startUpdatingHeading];
}

- (void)locationManager:manager didUpdateHeading:newHeading {
    double degrees = newHeading.magneticHeading;
     NSLog(@"Degrees : %F", degrees);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:13:07.040

您应该捕获`CLLocationManager`委托方法，而不是直接调用属性：[https ://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intf/ CLLocationManagerDelegate](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intf/CLLocationManagerDelegate)

# c# - 矢量/角度数学

> ID：11723241
> 
> 赞同：2
> 
> 时间：2012-07-30T14:09:16.150
> 
> 标签：c#, math, vector, unity3d, angle

我在游戏中有两个对象，为此可以将其视为 2d 平面上的点，但我使用 Vector3s，因为游戏本身是 3d。

我有一个游戏摄像机，我想垂直（也在平面上）对齐两个对象，以便它们都在摄像机的视野中。由于游戏的性质，对象可以处于任何可以想象的位置配置，因此它们之间的方向向量可以具有任何方向。

Part1：如何从两个位置向量中得到垂直角？

我有：

```
Vector3 object1Position; // x and z are relevant
Vector3 object2Position; 
```

我需要：

```
float cameraEulerAngleY; 
```

第 2 部分：现在，由于游戏资产的建模方式，我只想让摄像机在 180 度“锥体”内查看。因此，如果相机通过某个点，它应该使用与上述数学可能产生的完全相反的位置。

附上我需要的图像，圆圈是物体，盒子是相机。

![示例案例](../Images/032649bef519445741fb385ea821e21d.png)

我希望这篇文章很清楚，你们不会因为在矢量数学上完全是垃圾而活活烧死我：P

问候，德拉克尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:09:14.420

您需要`distance`从对象线指定 a 和`up`矢量：

```
Vector3 center = 0.5 * (object2position + object2position)
Vector3 vec12 = object2position - object1position

Vector3 normal = Cross(vec12, up)
normal.Normalize()
Vector3 offset = distance * normal

Vector3 cameraA = center + offset
Vector3 cameraB = center - offset
< choose which camera position you want > 
```

除了使用欧拉角，您应该使用类似的东西`LookAt()`来定位您的相机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:26:59.580

假设 Y 始终为 0（您提到“X 和 Z”是您的相关组件），那么您可以为此使用一些二维数学：

1.找到任何垂直向量（有两个）。您可以通过计算两个向量之间的差异、交换分量并取反其中一个来得到它。

```
Vector3 difference = (object1Position - object2Position);
Vector3 perpendicular = new Vector3(difference.z, 0, -difference.x); 
```

2.使用分离平面的法线，如果新矢量指向与预期相反的方向，则翻转它的方向。

```
Vector3 separatingPlaneNormal = ...; // down?
if(Vector3.Dot(separatingPlaneNormal, perpendicular ) < 0)
{
    perpendicular = -perpendicular ;
}

// done. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:40:34.397

好吧，首先，如果你有点 (x1, y1) 和 (x2, y2) 来描述你的对象的位置，只需用三角形来考虑它。您正在寻找的角度应该被描述为

```
arctan((y2-y1)/(x2-x1))+90 
```

不过，我不完全理解你想对第二部分做什么。

# android - INSTALL_FAILED_INSUFFICIENT_STORAGE 错误，原因不明

> ID：11723244
> 
> 赞同：1
> 
> 时间：2012-07-30T14:09:34.380
> 
> 标签：android

我正在开发我的 Android 应用程序，我想使用我自己的数据库文件。我的数据库大约为 115 MB，因此我必须将其拆分为 1 MB 的部分，以便在安装过程中将其从资产转移到手机中。正如您所理解的，我的应用程序将非常庞大，因此我决定对其进行压缩，将其传输到手机中，然后将其解压缩到 SD 卡中并使用它。当我压缩数据库时，大小从 115 MB 减少到 41 MB，并且由于资产最大大小，我也将其拆分为 1 MB 部分。

当我尝试在我的测试设备（不是虚拟机）中安装我的应用程序时，我面临以下荒谬的情况：当我将资产文件放入 android 项目中时，所有未压缩的数据库部分（115 个部分/ 115 MB 大小）我正在使用`Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE`这个是正常的。之后，我从资产中删除所有这些文件，只复制我未压缩数据库的 50 个部分，大小为 50 MB，应用程序运行良好！之后，我再次从资产中删除所有这些文件并复制压缩的数据库部分（41 个部分/ 41 MB 大小），我也遇到了同样的错误`Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE`。这怎么可能？有什么理由吗，因为压缩文件有什么解释吗？我想提一下，当我尝试它时，当应用程序启动时我没有做任何任务。我只将文件放在资产文件夹中并启动应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:13:38.660

一个应用程序只能占用 50 mb，如果您想使用更多空间，则需要使用[扩展文件](http://developer.android.com/guide/google/play/expansion-files.html)。

# excel - 使用空记录集循环遍历 VBA 中的 ADO 字段集合

> ID：11723249
> 
> 赞同：2
> 
> 时间：2012-07-30T14:09:53.223
> 
> 标签：excel, vba, ado, recordset

我有一个 ADO 记录集，它不返回任何行（这是预期的），但我的手表面板显示了一个有效的字段集合，其中包含我想要存储/捕获的列名。

但是，使用类似的代码

```
x = rs.Fields(idx) 
```

返回错误“3021”：BOF 或 EOF 为 True。请求的操作需要当前记录。

我的问题是是否可以阅读 Fields 集合（注意我可以在手表面板中看到的内容看起来是正确的以及我希望能够抓取的内容），如果不是，那么解释原因的“陷阱”是什么?

非常感谢迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:11:06.273

您需要姓名：

```
x = rs.Fields(idx).Name 
```

`Field(idx)`是不存在的值。

# visual-studio-2010 - TFS 签出设置

> ID：11723257
> 
> 赞同：2
> 
> 时间：2012-07-30T14:10:13.030
> 
> 标签：visual-studio-2010, version-control, tfs

我工作的公司最近开始使用 TFS 2010 进行版本控制，我们就建立签出策略进行了一些积极的讨论。目前，我们启用了多次签出。启用此策略是因为，作为一个小型开发团队，我们总是可以在签入时聚在一起讨论合并冲突。我们没有达成共识的一件事是获得最新的退房信息。我们是否还应该强制执行“允许在退房时获取最新信息”政策？它是否有助于确保我们不会编辑过时的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:56:07.483

最好**将其禁用**，因为每个用户都可以通过修改他们在 Visual Studio 中的设置（工具菜单 -> 选项 -> 源代码管理 -> Visual Studio Team Foundation Server）根据他们首选的工作方式在 Visual Studio 中本地启用此选项.

启用此选项的大多数团队都来自已经以这种方式运行的系统（主要是 Visual Source Safe），因为他们已经习惯了以这种方式工作。

我发现大多数人都希望明确控制他们的文件何时更新，这样其他人的更改就不会意外地打乱他们的流程，因为他们可能还没有为团队成员提前签入的最新更改做好准备。

但是，每个在活动项目中使用共享签出的团队都应该接受培训，并意识到*定期获取最新更改是一种很好的做法*，因为当他们最终想要签入他们的工作时，这将减少冲突和混乱的数量。

考虑获取最新版本的代码：

*   当你开始一天的工作时。
*   如果这是一个非常繁忙的项目，则全天
*   最重要的是，*在您签入更改之前，*您应该获得最新的更改，然后测试您的构建。

# mysql - SQL 查询 - 仅当值在“最后 n 条记录”范围内时才获取行（特定于记录）

> ID：11723262
> 
> 赞同：3
> 
> 时间：2012-07-30T14:10:44.347
> 
> 标签：mysql, sql

我有两个表，一个国家表和一个天气表。我想检索过去 15 天内未下雨的所有国家/地区的名称。

天气表有一个名为“DayNum”的列，它从 1 -> 无穷大开始，并且每天增加 1，它是唯一的。该表还有一个名为“Rain”的列，它只是一个 0 或 1 的布尔值。

此外，并非所有国家/地区都是在同一天添加的，因此每个国家/地区的最大 DayNum 会有所不同。

下面的表格示例（为了便于阅读，数据被截断）：

国家：

```
 ID     Name
     1      USA
     2      Cananda
     3      Brazil 
```

天气

```
 ID    Country_id    DayNum    Rain
     1        1           1         0
     2        1           2         0
     3        1           3         1 
```

这是我目前对查询的尝试（已经为此工作了好几天）：

```
 SELECT countries.name, weather.daynum
    FROM countries INNER JOIN weather ON countries.id = weather.country_id
    GROUP BY countries.name
    HAVING weather.daynum > (MAX(weather.day_num) - 15) AND SUM(weather.rain) = 0; 
```

我*认为*这应该可行，但我遇到了严重的性能问题。我需要编写的实际查询处理不同的数据（完全相同的概念）和数百万行。此查询似乎以指数速度变慢。

任何人都可以提供任何建议吗？

我的另一个想法是以某种方式将 JOIN 限制为仅获取前 15 条记录（同时按 weather.day_num 排序），但我还没有找到在 JOIN 中执行此操作的方法（如果可能的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:20:33.873

你对雨量不感兴趣，只关心它是否存在，所以...

```
select * from countries
left join
(
        select weather.country_id 
        from weather 
            inner join 
            (select country_id, MAX(daynum) as maxdaynum from weather group by country_id) maxday
                on weather.country_id = maxday.country_id
                and weather.daynum>maxday.maxdaynum-3
                where rain=1
        ) rainy
on countries.id = rainy.country_id
where country_id is null 
```

我想你已经适当地索引了你的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:21:37.947

您没有在表格中包含有关索引的任何信息，但我打赌您遇到的性能问题与国家名称字段中的 group by 有关。如果该列未编入索引，它肯定会解释您的性能问题。

话虽如此，这种情况可能需要子查询而不是内部联接。我很想以这种方式编写查询：

```
SELECT countries.id, countries.name 
FROM countries 
INNER JOIN 
(
    SELECT country_id 
    FROM weather 
    GROUP BY country_id 
    HAVING weather.daynum > (MAX(weather.day_num) - 15) AND SUM(weather.rain) = 0 
) AS weather
ON weather.country_id = countries.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:04:45.873

也许您可以使用一个简单的变量来存储所需的最小天数？我不是 mySQL 开发人员，但我认为类似的东西可以解决问题：

```
SELECT @minDaynum := (MAX(daynum)-15) FROM weather;

SELECT DISTINCT countries.name
FROM weather
INNER JOIN countries ON weather.country_id = countries.id
WHERE
    weather.daynum >= @minDaynum AND
    weather.rain = 1; 
```

编辑 >> 如果只有一个变量不适用于您的情况，也许可以尝试使用临时表来加快速度（虽然不确定 mysql 中临时表的性能是否真的很好......）：

```
CREATE TEMPORARY TABLE min_daynums (country_id int, country_name, min_daynum int);
INSERT INTO min_daynum 
    SELECT countries.id, countries.name, MAX(weather.daynum)-15 
    FROM weather 
    INNER JOIN countries ON countries.id = weather.country_id
    GROUP BY countries.id, countries.name

SELECT min_daynums.country_name
FROM min_daynums
WHERE
    EXISTS(
        SELECT 1
        FROM weather
        WHERE
            weather.country_id = min_daynums.country_id
            and weather.daynum >= min_daynums.min_daynum
            and weather.rain = 1
    ) 
```

在这里，我只是将每个国家/地区的 min daynum 存储在临时表中。希望能帮助到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:35:26.710

> 我有两个表，一个国家表和一个天气表。我想检索过去 15 天内未下雨的所有国家/地区的名称。

干得好：

```
SELECT * FROM Country
WHERE
    NOT EXISTS (
        SELECT * FROM Weather
        WHERE
            Rain = 1
            AND DayNum >= 2
            AND Country_id = Country.ID
    ); 
```

在计划英语中：对于每个国家，检查是否有比给定天数新的下雨天。如果有，则从结果中消除该国家/地区。

替换`2`为 15 天前的日期。指数`{Country_id, DayNum, Rain}`表现不错。不幸的是，MySQL 不太可能以最佳方式执行此查询，但只有这么多国家/地区，因此嵌套循环应该不会太糟糕，因为 DBMS 应该能够将内部查询作为单个索引搜索执行。

或者，考虑将其重写为 JOIN，例如：

```
SELECT Country.*
FROM Country LEFT JOIN Weather
    ON Country_id = Country.ID
    AND Rain = 1
    AND DayNum >= 2
GROUP BY Country.ID, Country.Name
HAVING MAX(Rain) IS NULL OR MAX(Rain) = 0; 
```

一个有效的 SQL Fiddle 示例在[这里](http://sqlfiddle.com/#!2/a1783/12)。

# c# - 第一次使用 FileSystemWatcher 监视文件夹失败

> ID：11723265
> 
> 赞同：0
> 
> 时间：2012-07-30T14:10:58.467
> 
> 标签：c#, file-io, windows-services, filesystemwatcher

每天我都会多次收到来自不同用户的 xml 文件。这些通过 FTP 传送到我驱动器上的文件夹，例如 D:\batch。今天我使用计划任务检查这些文件，该任务启动 ASP.NET 页面并处理找到的文件并回答上传者并结束。此任务每 15 分钟运行一次，但上传者希望更快地得到答案，所以我正在尝试完成此任务。我创建了一个监视文件夹的 Windows 服务，当创建一个文件时，它会处理它。

我遵循了几个不同的指南，但尤其是这个[http://www.codeproject.com/Articles/32591/Creating-a-Windows-Service-for-Watching-System-Dir](http://www.codeproject.com/Articles/32591/Creating-a-Windows-Service-for-Watching-System-Dir)

使用第一个文件它可以工作，但每次添加第二个文件时，它都会崩溃：

```
Exception Info: System.IO.IOException
Stack:
   at System.IO.__Error.WinIOError(Int32, System.String)
   at System.IO.File.InternalCopy(System.String, System.String, Boolean, Boolean)
   at System.IO.File.Copy(System.String, System.String)
   at FileMonitor.FilKigger.Watcher_Created(System.Object, System.IO.FileSystemEventArgs)
   at System.IO.FileSystemWatcher.OnCreated(System.IO.FileSystemEventArgs)
   at System.IO.FileSystemWatcher.NotifyFileSystemEventArgs(Int32, System.String)
   at System.IO.FileSystemWatcher.CompletionStatusChanged(UInt32, UInt32,     System.Threading.NativeOverlapped*)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*) 
```

这是怎么回事？

一些代码：

```
protected override void OnStart(string[] args)
    {
        FileSystemWatcher Watcher = new FileSystemWatcher();
        Watcher.Path = "D:\\FTP\\Batch\\";
        Watcher.IncludeSubdirectories = true;
        Watcher.Created += new FileSystemEventHandler(Watcher_Created);
        Watcher.Deleted += new FileSystemEventHandler(Watcher_Deleted);
        Watcher.EnableRaisingEvents = true;
    } 
```

这里只是将文件复制到新文件夹的代码。

```
void Watcher_Created(object sender, FileSystemEventArgs e)
    {
        File.Copy(e.FullPath, "D:\\newFolder\\" + e.Name);
        Lg.WriteEntry("File moved", EventLogEntryType.Information);
    } 
```

捕获异常只会留下文件，但当然会保持服务运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:38:01.383

将观察者更改为查找“_finish.txt”文件，用户在上传真实文件后发送该文件

```
Watcher = new FileSystemWatcher(ftpFolder, "*_finish.txt"); 
```

然后用“”替换_finish，我得到了保证上传完成的真实文件......

# rdp - 在 Windows 上运行没有 RDP 会话的非控制台图形会话

> ID：11723266
> 
> 赞同：1
> 
> 时间：2012-07-30T14:11:04.113
> 
> 标签：rdp

如何在 Windows 上运行没有[RDP会话的非控制台图形会话？](http://en.wikipedia.org/wiki/Remote_Desktop_Protocol)例如，如果我想使用其他协议创建自己的[远程桌面服务器？](https://en.wikipedia.org/wiki/Remote_Desktop_Services#Remote_Desktop_Connection)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:22:07.540

是的，您正在寻找的术语是[Remote Desktop Protocol Provider Interfaces](http://msdn.microsoft.com/en-us/library/windows/desktop/dd919947%28v=vs.85%29.aspx)。该 MSDN 链接将引导您完成编写自己的提供程序的过程。

这将是很多工作，但是如果您想创建自己的提供程序，则可以完成。如果您详细解释***为什么***要这样做，我们可能会提供更好的解决方案。

# iphone - Flash Builder 中的 iPhone 应用程序

> ID：11723272
> 
> 赞同：0
> 
> 时间：2012-07-30T14:11:12.077
> 
> 标签：iphone, webview, flash-builder

我创建了一个 Android 应用程序，它通过 Eclipse 使用 WebView 来显示网站并在其中导航。但是，现在我被分配为 iPhone/iPad 创建相同的应用程序。

有什么方法可以在通过 Flash Builder 编程的同时实现像 iPhone 的 WebView 这样简单的东西？（第一次为苹果产品开发...）

任何帮助都感激不尽！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:37:19.890

使用[Adob​​e Air 3](http://www.adobe.com/products/air.html)，您可以发布适用于 iOS 的应用程序。在objective `UIWebView`-c（cocoa）中创建一个然后加载外部flash应用程序（或站点）将不起作用，因为iOS设备不允许flash嵌入对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T08:40:56.427

使用基于 Adob​​e Air 技术的 NewDigitalTimes [Free Apps Creator创建应用程序。](http://newdigitaltimes.com)这立即提供了推送通知、分析和广告的所有功能。否则您可以在应用程序中使用动画。通过指定链接在本机 iOS 应用程序中自定义显示网站。

# c# - 传递变量以在 C# 中设置

> ID：11723278
> 
> 赞同：1
> 
> 时间：2012-07-30T14:11:22.993
> 
> 标签：c#

我想将几个变量传递给一个函数并将它们设置为其他东西，而不是从它们中读取。我计划在可以创建对象并将其添加到执行队列的场景中使用它。指针适合这个吗？

我知道我的问题的解释很糟糕，但我不知道更好的方法来解释它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:13:31.947

听起来您可能需要一个[`ref`](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)or[`out`](http://msdn.microsoft.com/en-us/library/ee332485.aspx)参数。例如：

```
public static void SetVariables(out int x, ref int y)
{
    // Can't *read* from x at all before it's set
    x = 10;
    // Can read and write y
    y++;
}

public static void Foo()
{
    int setOnly;
    int increment = 5;
    SetVariables(out setOnly, ref increment);
    Console.WriteLine("{0} {1}", setOnly, increment); // 10 6
} 
```

有关详细信息，请参阅我的[参数传递文章](http://pobox.com/~skeet/csharp/parameters.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:14:19.677

这些变量是引用类型还是值类型？如果它们是引用类型，那么您可以照常将它们传递给您的函数，然后从那里改变它的属性。如果它们是值类型，那么您必须使用`ref`键盘。

# java - 在文件被更改/覆盖时从 ftp 服务器下载文件

> ID：11723282
> 
> 赞同：1
> 
> 时间：2012-07-30T14:11:38.717
> 
> 标签：java, ftp, stream

我们正在从 FTP 服务器下载文件。文件内容有时会发生变化。文件名始终相同。

这种情况可能吗？

1.  文件内容为“aaaaaaaaaaaaa”
2.  我们开始下载
3.  文件被覆盖，看起来像“bbbbbbbbbbbbb”
4.  我们得到的文件内容是“aaaaabbbbbb”

用于下载的库是 apache commons-net。

使用的代码是：

```
FTPClient ftpClient = new FTPClient();
//client connecting code...
//...
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
ftpClient.retrieveFile(path, outputStream);
outputStream.writeTo(new FileOutputStream(new File("myFile.txt"))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:47:11.383

这实际上可能发生。因此，我建议您在下载之前获取文件的校验和。（使用 FTP 站点命令在服务器上执行脚本给您校验和）然后在下载后与下载文件的校验和进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:47:56.597

是的，这种情况是可能的，具体取决于 FTP 服务器的实现方式，以及文件如何写入它所服务的区域。

您无法在 FTP 客户端/协议级别处理此问题。

但是您可以通过让服务器端应用程序生成并写入更新文件的校验和或散列并将其写入 FTP 区域来在应用程序级别解决它。然后客户端可以读取数据文件和校验和文件，并检查数据文件的校验和是否正确。如果它们不匹配，补救措施是再次获取这两个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:08:27.003

如果您使用的是 unix 服务器，则文件不应在下载过程中更改。连接中断后，您无能为力。但要不更改正在下载的文件，您应该更改上传或创建文件到 FTP 服务器的过程。首先上传文件成临时文件名。我在bash中使用$RANDOM，没关系，.tmp后缀就足够了，只要在同一个目录中不存在samename.tmp作为合法文件。然后做 mv tempname.tmp 同名。Move 是在 unix 服务器上的原子操作。这意味着开始的用户将继续下载原始文件。移动后将打开文件的用户将开始下载新文件。当 FTP 服务器打开的所有句柄都关闭时，内核将删除旧文件。

# c#-4.0 - 如何在单个条件下为实体上的今天日期和两个日期属性编写“之间”查询表达式？

> ID：11723283
> 
> 赞同：4
> 
> 时间：2012-07-30T14:11:40.517
> 
> 标签：c#-4.0, dynamics-crm-2011

我有一个带有“new_StartDate”和“new_EndDate”属性的“new_Term”实体。我实际上想在单个查询表达式中编写此语句：

```
new_StartDate <= DateTime.UtcNow <= new_EndDate 
```

我的第一个想法是使用 Between ConditionOperator，但 between 运算符仅适用于单个属性，即：

```
// Not valid because the first parameter expects a string attribute name, not a value
new ConditionExpression(DateTime.UtcNow.Date, ConditionOperator.Between, "new_startdate", "new_enddate") 
```

除了明显的两个条件表达式之外，有没有办法在一个条件表达式中做到这一点？

```
new ConditionExpression("new_startdate", ConditionOperator.LessEqual, DateTime.UtcNow);
new ConditionExpression("new_enddate", ConditionOperator.GreaterEqual, DateTime.UtcNow); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T17:38:43.220

我相信您在问题的底部拥有所有可能的最佳答案：

```
new ConditionExpression("new_startdate", ConditionOperator.LessEqual, DateTime.UtcNow);
new ConditionExpression("new_enddate", ConditionOperator.GreaterEqual, DateTime.UtcNow); 
```

ConditionOperator 枚举是限制因素——无论您是编写 fetchXml 还是使用 queryexpression，您都被[此枚举中可用的条件运算符](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.query.conditionoperator.aspx)所困扰。正如您正确指出的那样， between 不采用您需要的参数。

进一步减少该语句的唯一其他受支持（仅限本地）选项是使用 SQL 访问过滤器视图，但这肯定是矫枉过正:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:41:42.150

您在 FetchXML 中尝试过吗？您也许可以这样做，然后使用**FetchXmlToQueryExpressionRequest**运行查询。我写[了一篇博客文章，其中有一个例子](http://edgewaters.blogspot.com/2010/12/two-ways-to-build-crm-queryexpression.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:00:05.733

```
QE.Criteria.AddCondition("modifiedon",  ConditionOperator.Between, new Object[] {
                first,
                last}); 
```

这对我有用。变量 first 和 last 是 DateTime 类型。

# java - Drools Planner 在运行时设置 minimumAcceptedSelection

> ID：11723285
> 
> 赞同：1
> 
> 时间：2012-07-30T14:11:58.020
> 
> 标签：java, drools, drools-planner, optaplanner

我可以设置 minimumAcceptedSelection 编辑 SampleDroolsConfig.xml

```
 ...
        <acceptor>
            <solutionTabuSize>1000</solutionTabuSize>
            <planningEntityTabuSize>7</planningEntityTabuSize>
        </acceptor>
        <forager>
            <minimalAcceptedSelection>200</minimalAcceptedSelection>
        </forager>
    </localSearch>   
</solver> 
```

是否可以在运行时设置此参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:05:37.010

是的：

```
XmlSolverFactory solverFactory = new XmlSolverFactory(SOLVER_CONFIG);
LocalSearchSolverPhaseConfig localSearchSolverPhaseConfig = (LocalSearchSolverPhaseConfig) solverFactory.getSolverConfig().getSolverPhaseConfigList().get(1);
localSearchSolverPhaseConfig.getForagerConfig().setMinimalAcceptedSelection(200); 
```

请参阅 Drools Planner 手册中有关通过 Java（而不是 XML）进行配置的部分。

# mysql - 计算 MySQL 中一个月的表大小（以 MB 为单位）

> ID：11723286
> 
> 赞同：1
> 
> 时间：2012-07-30T14:12:00.927
> 
> 标签：mysql, sql

考虑到 MySQL 中的下表列，我想计算每个月表大小的增长：

```
id (BIGINT) - Primary Key
Date (DateTime)
PageViews (INT)
ProductId (INT) 
```

我的商店有 2000 种产品。在最坏的情况下，每个产品每天至少会被查看一次。每行代表特定产品每天的总 PageViews。

例如：

```
id = 6
DateTime = 02/12/2012
PageViews = 0
ProductId = 159 
```

我想计算表的总大小，或者更好地说，以 KB 或 MB 为单位的每个月的增长。

我知道有很多事情我应该考虑并附加到计算中，但我不知道它们并且不知道如何计算它们。

我打算将我的 MySQL 数据库存储在 Xeround.com 上，限制为 50GB，所以我需要确保在使用此架构时我可以放心，在接下来的 10 年里，我不会有任何问题 :)

每年（大约）将增加 100 种产品。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-19T20:51:50.490

刚刚看到这篇文章，对不起，但评论不是很有用，所以决定给出一个答案，分享我在我的一个 mySQL 服务器上的内容。

不是每个人都跟踪它自己的数据库增长，但实施起来并不难。这个想法是每周或根据您的需要从 INFORMATION_SCHEMA.TABLES 中简单地捕获表统计信息。

首先，您在单独的架构或您喜欢的任何架构下创建一个表。

```
#
# Use stats_db for the default schema for this tool
#

USE stats_db;

#
# CREATE TABLE table_growth_history
#

DROP TABLE IF EXISTS `table_growth_history` ;

CREATE TABLE `table_growth_history`
(
            `DATE` date not null
,
            `TABLE_SCHEMA` varchar(64) NOT NULL DEFAULT ''
,
            `TABLE_NAME` varchar(64) NOT NULL DEFAULT ''
,
            `ENGINE` varchar(64) DEFAULT NULL
,
            `TABLE_ROWS` bigint(21) unsigned DEFAULT NULL
,
            `DATA_LENGTH` bigint(21) unsigned DEFAULT NULL
,
            `INDEX_LENGTH` bigint(21) unsigned DEFAULT NULL
,
            `DATA_FREE` bigint(21) unsigned DEFAULT NULL
,
            `AUTO_INCREMENT` bigint(21) unsigned DEFAULT NULL
,
            PRIMARY KEY(DATE,TABLE_SCHEMA,TABLE_NAME)
,
            KEY(TABLE_SCHEMA,TABLE_NAME)
)
            ENGINE=INNODB DEFAULT CHARSET=utf8; 
```

然后添加插入脚本。您也可以使用 cronjob，但我更愿意使用 MySQL EVENT 调度程序：

```
#
# MySQL EVENT to add table stats for our new history table
#

DELIMITER ;;

CREATE
            EVENT IF NOT EXISTS `get_table_growth_history`
            ON SCHEDULE EVERY 1 WEEK
    STARTS CURRENT_DATE + INTERVAL 7 - WEEKDAY(CURRENT_DATE) DAY
    ON COMPLETION PRESERVE ENABLE
            DO BEGIN

INSERT INTO
                                            stats_db.table_growth_history
SELECT
       DATE(NOW())
            ,
       TABLE_SCHEMA
            ,
       TABLE_NAME
            ,
       ENGINE
            ,
       TABLE_ROWS
            ,
       DATA_LENGTH
            ,
       INDEX_LENGTH
            ,
       DATA_FREE
            ,
       AUTO_INCREMENT
FROM  
                            INFORMATION_SCHEMA.TABLES;

    END ;;
    DELIMITER ; 
```

这将为下周一创建一个事件，然后每个周一将在表中插入数据。根据您的需要更改日期

现在您想要的是表数据增长的月度报告，您可以使用此查询来获取，一旦完成 1 个月的数据捕获，您就可以运行它：

```
-- get dates

select distinct `date` from stats_db.table_growth_history order by `date` desc limit 1 INTO @this_week ;

set @last_month := @this_week - interval 4 week ;

-- pivot table
SET @report_monthly = NULL;
SET @report_monthly
  = CONCAT('select table_schema,table_name,
       max(case when date = @last_month then round(((data_length + index_length) / 1024 / 1024), 2) end) as `last_month__',@last_month,'`,
       max(case when date = @this_week then round(((data_length + index_length) / 1024 / 1024), 2) end) as `current_week__',@this_week,'`,
       (max(case when date = @this_week then round(((data_length + index_length) / 1024 / 1024), 2) end) -
        max(case when date = @last_month then round(((data_length + index_length) / 1024 / 1024), 2) end)
       ) as data_grow
from stats_db.table_growth_history t
where date in (@last_month , @this_week)
group by table_name');

PREPARE stmt FROM @report_monthly;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

您也可以根据需要更改时间范围。

您将拥有服务器中所有数据库的规格和大小。

# ios - 标识符无效的 InAppPurchase 问题

> ID：11723287
> 
> 赞同：0
> 
> 时间：2012-07-30T14:12:08.733
> 
> 标签：ios, in-app-purchase

我在 App Purchase 中进行测试并遵循了很多教程，按照教程中的说明做了同样的事情，我为一个应用程序设置了产品标识符的数量，只是没有上传它的二进制文件，但它仍然说 Invalid Product Identifiers ，我在几个之后检查小时，仍然得到同样的错误。我的产品在 iTunes Connect 中的状态是“准备提交”。

可能是什么问题 ？我应该将二进制文件上传到苹果然后拒绝它吗？

请帮忙！谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:45:20.470

[在这里，您](http://troybrant.net/blog/2010/01/invalid-product-ids/)列出了可能导致此错误的事项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:34:40.223

上述问题已解决。问题是因为越狱设备。我在越狱设备上进行了测试。这是越狱设备的解决方案..转到 Cydia Cydia -> All Packages -> AppSync -> Uninstall AppSync

然后测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:17:04.857

您的合同、税务和银行信息是否完整？

我遇到了同样的问题，在我按照此[技术说明](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)进行操作后，它将得到解决。

# python - Python：从特定的 href 打印数据（带有 ID 标签）

> ID：11723288
> 
> 赞同：0
> 
> 时间：2012-07-30T14:12:08.703
> 
> 标签：python, beautifulsoup, mechanize

我是 Python 新手，正在尝试构建我的第一个网络爬虫。我想去一个页面，打开一堆子页面，在页面上找到一个特定的链接（带有ID），然后我想打印链接数据。现在我得到错误：'列表索引必须是整数，而不是 str'，这意味着我在（至少）最后一行代码中做错了。

我真正不确定的是，我需要做什么才能从特定链接中获取和解析 href 数据——因为我认为，其余的都在工作（加载子页面）。刮板是（假设）抓取丹麦公社的所有网址并打印出来，所以打印的第一行应该是：

[http://www.albertslund.dk](http://www.albertslund.dk)（关注 97 更多）

无论如何，这是代码 - 希望任何人都可以告诉我，我做错了什么。提前感谢一堆。

```
from BeautifulSoup import BeautifulSoup
from mechanize import Browser

f = open("kommuneadresser.txt", "w")
br = Browser()
url = "https://bdkv2.borger.dk/foa/Sider/default.aspx?fk=22&foaid=11541520"
page = br.open(url)
html = page.read()
soup = BeautifulSoup(html)
link = soup.findAll('a')
kommunelink = link[21:116]

#we create a loop - for every single kommunelink in the list, 
#'something' will happen
for kommune in kommunelink:
    #the link-part is saved as a string
    kommuneurl = kommune['href']
    #we construct a new url from two strings
    fuldurl = "https://bdkv2.borger.dk/" + kommuneurl
    #we open the page and save it in a variable
    kommuneside = br.open(fuldurl)
    #we read the page
    html2 = kommuneside.read()
    #we handle the page in beautifulsoup
    soup2 = BeautifulSoup(html2)
    #we find a specific link on the page
    hjemmesidelink = soup2.findAll('a', attras={'ID':"uscAncHomesite"})
    print hjemmesidelink['href'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:22:51.470

你试过这个吗？

```
for link in soup.find_all('a'):
    print(link.get('href')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:19:59.850

首先，BeautifulSoup。[findAll](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#The%20basic%20find%20method%3a%20findAll%28name,%20attrs,%20recursive,%20text,%20limit,%20%2a%2akwargs%29) () 返回一个[List](http://docs.python.org/tutorial/datastructures.html#more-on-lists)。

此外，您可能希望在soup2 中执行最后一个findAll。我不确定您需要 hjemmesidelink 中的哪个项目，因此请在最后 5 行代码中尝试此操作：

```
#we handle the page in beautifulsoup
soup2 = BeautifulSoup(html2)
#we find a specific link on the page
hjemmesidelink = soup2.findAll('a', attras={'ID':"uscAncHomesite"})
print hjemmesidelink 
```

你会以这种方式打印第一个项目

```
print hjemmesidelink[0] 
```

# jquery - 使用 jQuery 获取多个复选框的值并以逗号分隔的字符串形式输出。

> ID：11723297
> 
> 赞同：28
> 
> 时间：2012-07-30T14:12:39.680
> 
> 标签：jquery, checkbox

我有很多复选框如下，

```
<li><input type="checkbox" name="areaofinterest" value="home_coo" id="home_coo" class="Checkbox" > Cooking</li>
    <li><input type="checkbox" name="areaofinterest" value="home_cra" id="home_cra" class="Checkbox"> Crafts</li>
    <li><input type="checkbox" name="areaofinterest" value="home_dec" id="home_dec" class="Checkbox"> Decorating</li>
    <li><input type="checkbox" name="areaofinterest" value="home_ent" id="home_ent" class="Checkbox"> Entertaining</li>
    <li><input type="checkbox" name="areaofinterest" value="home_gar" id="home_gar" class="Checkbox"> Gardening</li>
    <li><input type="checkbox" name="areaofinterest" value="home_hom" id="home_hom" class="Checkbox"> Home Improvement</li>
    <li><input type="checkbox" name="areaofinterest" value="home_mar" id="home_mar" class="Checkbox"> Marriage</li>
    <li><input type="checkbox" name="areaofinterest" value="home_par" id="home_par" class="Checkbox"> Parenting</li>
    <li><input type="checkbox" name="areaofinterest" value="home_pet" id="home_pet" class="Checkbox" > Pets</li>
    <li><input type="checkbox" name="areaofinterest" value="home_ret" id="home_ret" class="Checkbox"> Retirement</li> 
```

如何使用 jQuery 获取检查值并输出为 areaofinterest="home_coo,home_mar,home_pet" ？

非常感谢。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-30T14:21:38.990

使用[`.map()`](http://api.jquery.com/map/)功能：

```
$('.Checkbox:checked').map(function() {return this.value;}).get().join(',') 
```

打破它：

`$('.Checkbox:checked')`选中选中的复选框。

`.map(function() {return this.value;})`创建一个 jQuery 对象，该对象包含一个包含选中复选框值的数组。

`.get()`返回实际数组。

`.join(',');`将数组的所有元素连接成一个字符串，用逗号分隔。

[**工作演示**](http://jsfiddle.net/Nr2zU/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T14:16:19.683

```
var areaofinterest = '';

$('[name="areaofinterest"]')​.each(function(i,e) {
    var comma = areaofinterest.length===0?'':',';
    areaofinterest += (comma+e.value);
})​; 
```

仅获取复选框值：

```
var areaofinterest = '';

$('[name="areaofinterest"]')​.each(function(i,e) {
    if ($(e).is(':checked')) {
        var comma = areaofinterest.length===0?'':',';
        areaofinterest += (comma+e.value);
    }
})​; 
```

[小提琴](http://jsfiddle.net/97vrS/1/)

你也可以这样做：

```
var areaofinterest = [];
$('[name="areaofinterest"]:checked').each(function(i,e) {
    areaofinterest.push(e.value);
});

areaofinterest = areaofinterest.join(','); 
```

可能还有很多其他方法可以做到这一点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:16:17.820

```
var values = "";
$("checkbox[name=areaofinterest]").each(function() { 
    values += $(this).val() + ",";
});

values = values.substring(0, values.length - 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:17:24.193

尝试这样的事情：

```
var areaofinterest= "";

$("input[type=\"checkbox\"]").each(function() {
    if ($(this).attr("checked")) {
        if (areaofinterest !== "") areaofinterest += ",";

        areaofinterest += $(this).value();
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T10:38:39.557

或者你可以使用如下所示的数组

```
 var checkBoxArray = new Array();
 var areaofinterest = '';

 $(':checkbox:checked').each(function(i){
        checkBoxArray .push($(this).attr("value"));

});

  if (checkBoxArray .length == 0) {
     } else {
     while (checkBoxArray .length != 0) {
            if (checkBoxArray .length == 1) {
                areaofinterest += checkBoxArray .pop();
            } else {
                areaofinterest += (checkBoxArray .pop() + ",");
                 }
            }
}
console.log(areaofinterest); 
```

虽然你会以相反的顺序得到字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-20T09:45:53.167

使用 jQuery 获取多个复选框的值并以逗号分隔的字符串形式输出。

```
var programming = $("input[name='programming']:checked").map(function() {
    return this.value;
}).get().join(', ');

alert("My favourite programming languages are: " + programming);

    OR

var favProgramming = [];
$.each($("input[name='programming']:checked"), function(){            
    favProgramming .push($(this).val());
});

alert("My favourite programming languages are: " + favProgramming); 
```

[在这里演示](https://www.tutsmake.com/jquery-multiple-checkbox-values-to-comma-separated-string/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T10:43:32.917

```
 var mode = [];
            jQuery("input[name='mode[]']:checked").each(function(i) {
                mode.push($(this).val());
            }); 
```

# ember.js - 可以在路由动态段中使用计算属性吗？

> ID：11723298
> 
> 赞同：0
> 
> 时间：2012-07-30T14:12:48.530
> 
> 标签：ember.js, ember-data, ember-old-router

我需要在我的应用程序的 url 中使用两个计算属性，但是在进行转换时，他们说未定义。

这是我的代码：

```
App.PostController = Ember.ObjectController.extend({
    updated_at: null,
    year: function() {            
        var updated_at = this.get('updated_at');
        return moment(updated_at).format('YYYY');
    }.property().cacheable(),
    month: function() {
        var updated_at = this.get('updated_at');
        return moment(updated_at).format('MM');
    }.property().cacheable()
});

App.Router = Ember.Router.extend({
    location: 'history',
    //enableLogging: true,
    root: Ember.Route.extend({
        showPosts: Ember.State.transitionTo('posts'),
        posts: Ember.Route.extend({
            route: '/',
            posts: Ember.Route.extend({
                route: '/',
                showPost: Ember.State.transitionTo('post'),
                connectOutlets: function(router) {
                    router.get('applicationController').connectOutlet('posts');
                }
            }),
            post: Ember.Route.extend({
                route: '/:year/:month/:slug',
                connectOutlets: function(router, post) {
                    router.get('applicationController').connectOutlet('post', post);
                }
            })
        })
    })
}); 
```

当点击帖子时，网址如下所示：`/undefined/undefined/this-is-a-slug`

这可以做到吗？，如果没有，你可以实现其他吗？。

谢谢。

# php - 确定数据库是否已更改的最佳方法？

> ID：11723299
> 
> 赞同：1
> 
> 时间：2012-07-30T14:12:53.683
> 
> 标签：php, ios, sqlite

我正在为画廊应用程序构建一个 sqlite 数据库。我想知道使用时间戳来检查数据库是否已更新是一种好习惯，或者是否有更好的方法来做到这一点。

这是我所拥有的......三张桌子：

```
buildings
  buliding_id PK
  code
  name
  description
  timestamp

building_album
 album_id PK
 building_id FK (reference to buildings->building_id)
 album_url
 timestamp

building_images
 image_id PK
 album_id FK (reference to building_album->album_id)
 image
 timestamp 
```

截至目前，我将让应用程序检查服务器的数据库，以查看是否有任何时间戳已更改，以及它们是否更改了这些字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:48:44.300

我将从这里开始就该主题进行更广泛的讨论：[如何将 iPhone Core Data 与 Web 服务器同步，然后推送到其他设备？](https://stackoverflow.com/questions/5035132/how-to-sync-iphone-core-data-with-web-server-and-then-push-to-other-devices).

但是，如果您想做一些简单的单向信息从服务器同步到移动设备，一种“简单”的方法是：

1.  修改该服务器数据库以引入跨所有表使用的某些唯一标识符（无论是事务 ID 还是版本 ID）的概念；

2.  确保修改服务器以使用自动递增/更新的标识符记录对“主”表的任何创建、更新和删除；此事务/版本标识符可以在表本身中或使用某些共享事务日志；

3.  在服务器上编写一个例程，以便客户端可以检索当前标识符；

4.  让应用程序跟踪它成功接收并完成同步/复制的最后一个标识符；

5.  编写一些服务器例程，客户端可以使用其“最后一次成功”标识符调用该例程，服务器将返回自该标识符以来已更改的所有记录；和

6.  编写一些移动设备代码以获取上一步的响应并相应地更新其内部数据库。

如果您还想在移动设备上同步更改并将它们发送回服务器，或者如果您对可以在服务器数据库中进行的更改有限制，那么这一切都会变得更加复杂。

# java - 在评论中添加 java 调试 ant vs eclipse vs java

> ID：11723301
> 
> 赞同：0
> 
> 时间：2012-07-30T14:13:04.223
> 
> 标签：java, eclipse, ant, manifest

我有这个定义：

```
private static final String REVISION = "$Revision: 496 $" 
```

对于部署来说效果很好，但是当我调试时，我会这样做：

```
private static final String REVISION = "$Revision: 496 $" + "v1"; 
```

因为在使用 SVN 签入之前，rev 不会改变。

我包括在内的原因`v1`是我想确保我的 jar 已更新并且一切都已完成。

任何更自动化的说法，包括**构建日期/时间**？

看着阅读清单，似乎参与其中。

Ant 的替换方法似乎是最好的：

```
private static final String REVISION = "$Revision: 496 $" + "@datetime@"; 
```

然后`@datetime@`在 Ant 中定义。

我应该使用 Eclipse 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:31:41.053

> Looked at reading manifest, seemed involved.

I don't know if this is "more automated" or "less involved", but my preference for handling runtime accessible version numbers is to put them into a property file that can be read via the classpath. This has the advantage that the Java source code that you compile is identical to the source code in your sandbox ...

I don't think Eclipse is relevant to the problem. Eclipse is an IDE not a build tool. Besides, you can easily configure it to do builds using Ant and your Ant build files.

# java - 应用程序配置管理工具

> ID：11723303
> 
> 赞同：1
> 
> 时间：2012-07-30T14:13:11.967
> 
> 标签：java, configuration, osgi, puppet

我正在寻找一种用于管理应用程序配置的工具。我发现`OSGi`实现提供了一个`Config Admin service`可以与`Apache Karaf`+一起使用的`Apache Cellar`。因此，有一个主节点和一些从主节点检索配置的客户端节点。我还查看了`Puppet`哪些提供了更多功能。

但是，我不知道它是否适合基于 OSGi 的应用程序，如果可以，它是否提供与 Config Admin 服务相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T09:18:29.377

Config Admin 是一个（小型）API，用于（动态）管理OSGi 框架*内的配置。*它与 OSGi 生命周期、服务和捆绑模型紧密集成。它也是声明式服务 (DS) 的一个主要方面，它可以详细控制 DS 组件的绑定和生命周期。

Puppet 是管理操作系统实例的通用（和巨大）模型。

因此，总的来说，它们没有可比性。如果您希望控制远程操作系统、配置守护进程、进程、/等，那么 Puppet 可能是您的解决方案。但是，如果您有一个需要远程管理的 Java 应用程序，那么 OSGi 配置管理 + 一个框架可能是要走的路。这不必仅限于 Java 进程。[bndtools.rt 打包器](https://github.com/bndtools/bndtools-rt/tree/master/org.bndtools.rt.packager)展示了如何将本地进程打包到一个包中，然后使用 OSGi 远程管理来控制它们的生命周期和配置。

所以这一切都取决于你想要什么......

# asp.net - 热点顶部的图像

> ID：11723307
> 
> 赞同：0
> 
> 时间：2012-07-30T14:13:31.480
> 
> 标签：asp.net, html, imagemap

我正在开发一个 asp.net Web 应用程序。其中我有一个图像和该图像中的两个热点。我需要在热点位置添加另一个图像。我知道 asp.net imagemap 不支持这个。但是，我需要这样做。任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:43:01.297

经过大量互联网冲浪后，我找到了自己问题的答案....为此，将图像映射的位置设置为相对...。将另一个图像（较小）放在热点上并将位置设置为绝对....就这么简单....这很好用....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:54:36.483

我不确定你在问什么，我对 ASP 也不太熟悉，但我不相信它是服务器端的（我认为它只涉及 HTML 客户端）。我是否相信您要问的是您是否可以将图像的某个部分变成不同的图像并使其[可点击](http://www.w3schools.com/tags/tag_map.asp)？您可以做的是将图像与图像的这些部分复制并粘贴到可点击区域，除非它需要是动态的，您可以在其中使用[画布](http://w3schools.com/html5/html5_canvas.asp)或[SVG](http://w3schools.com/html5/html5_svg.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:31:25.897

标准 HTML 图像映射可以处理尽可能多的“热点”。我不确定它的整个 ASP 方面，因为我并没有真正进入 ASP，但是这是一个客户端问题而不是服务器端问题，除非您使用 ASP 动态生成热点。

看看[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)它对我试图谈论的内容给出了一个非常简单的想法。如果您手边有 Dreamweaver 之类的东西，您可以轻松地组合一个图像映射。如果没有，有很多工具可以帮助您做到这一点，因为***中唯一的痛苦是用于定义您所说的点的坐标。大多数工具将让您选择图像，让您在其上绘制代表斑点的框、圆或多边形，然后吐出它的 HTML 供您复制/粘贴到位。

# c# - 适用于 Android 的 Mono - SensorType.RotationVector 缺失

> ID：11723308
> 
> 赞同：0
> 
> 时间：2012-07-30T14:13:37.790
> 
> 标签：c#, mono, xamarin.android, android-sensors

根据[文档](http://docs.mono-android.net/?link=T%3aAndroid.Hardware.SensorType)， SensorType 枚举包含一个 RotationVector 值。看起来它会做我想做的事。但是，当我尝试在我的代码中使用它时，它告诉我**“Android.Hardware.SensorType”不包含“RotationVector”的定义**

关于它在哪里以及如何启用它的任何建议？我正在使用 Mono for Android v4.2.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:28:33.797

直到 API 级别 9 (Android v2.3) 才添加[RotationVector 。](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ROTATION_VECTOR)

如果您将应用程序更新为目标 v2.3，您将可以访问枚举中的该值。

# c# - 搜索 - IQueryable Linq

> ID：11723313
> 
> 赞同：1
> 
> 时间：2012-07-30T14:13:49.047
> 
> 标签：c#, linq, search

我正在制作一个搜索成员的函数，我想在我的 searchResults 变量中添加一个 Where。但是，在我这样做之前，它可能需要是一个 IQueryable。

这就是我想要完成的：

```
var searchResults = listMembers.DataSource = members.getAllMembers().OrderByDescending(x => x.createdDate).Select(x => new
    {
        x.ID,
        x.memberNumber,
        x.name,
        x.email,
        x.birthDate,
        hasPayed = Helper.renderBoolImage(x.hasPayed, true),
        isConfirmed = Helper.renderBoolImage(x.isConfirmed, true),
        isExportedToExcel = Helper.renderBoolImage(x.isExportedToExcel, true)
    });

    if (!String.IsNullOrEmpty(search.name))
    {
        searchResults = searchResults.Where(x => x.name.ToLower().Equals(enc(search.name.ToLower())));
    } 
```

此行无法编译，因为它无法解析 Where：

```
searchResults = searchResults.Where(x => x.name.ToLower().Equals(enc(search.name.ToLower()))); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:19:39.327

这就是问题：

```
var searchResults = listMembers.DataSource = members.getAllMembers()... 
```

你应该使用：

```
var searchResults = members.getAllMembers()...;

if (!String.IsNullOrEmpty(search.name))
{
    searchResults = searchResults.Where(...);
}

listMembers.DataSource = searchResults; 
```

当前的类型与`searchResults`的类型相同`listMembers.DataSource`，*而不是*的类型`members.getAllMembers...`

一般来说，我建议不要像您的原始代码 ( `x = y = z`) 那样进行多次分配 - 它会使代码更加混乱，正如您所发现的......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T14:15:02.183

你`using System.Linq;`的文件顶部有吗？您是否至少使用 .NET 3.5？

# php - php 在 php 5.4+ 中发现未定义的错误

> ID：11723316
> 
> 赞同：-4
> 
> 时间：2012-07-30T14:13:51.727
> 
> 标签：php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

我在 localhost 中升级/安装`PHP 5.4.4`（xampp 1.8.0）。现在我`notice error`在我的页面上看到了很多。什么问题？如何解决这个问题？

错误部分：

```
Notice: Undefined index: language in C:\xampp\htdocs\tube\include\config.php on line 93

Notice: Undefined variable: max_avatar_width in C:\xampp\htdocs\tube\include\lang\english.php on line 495

Notice: Undefined variable: max_avatar_height in C:\xampp\htdocs\tube\include\lang\english.php on line 496

Notice: Undefined index: USERID in C:\xampp\htdocs\tube\index.php on line 26 
```

配置 PHP 页面：

```
if ($_REQUEST['language'] != '') // <---- Line 93 
{
    if ($_REQUEST['language'] == 'english')
    {

        $_SESSION['language'] = 'english';
    }
    elseif ($_REQUEST['language'] == 'spanish')
    {

        $_SESSION['language'] = 'spanish';
    }
}

if ($_SESSION['language'] == "")
{

    $_SESSION['language'] = "english";
}

if ($_SESSION['language'] == "english")
{
include("lang/english.php");
}
elseif ($_SESSION['language'] == "spanish")
{
include("lang/spanish.php");
}
else
{
include("lang/english.php");
} 
```

英语朗页（第 495 和 496 行）：

```
$lang['491'] =  "The image width is too big. Max width is $max_avatar_width pixels."; 
$lang['492'] =  "The image height is too big. Max height is $max_avatar_height pixels."; 
```

索引 PHP 页面：

```
if($_SESSION['USERID'] == "") // <-- Line 26
{
    $showfamfilter = "AND mature='0'";
}
elseif($_SESSION['FAMILYFILTER'] == "0")
{
    $showfamfilter = "";
}
else
{
    $showfamfilter = "AND mature='0'";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:16:55.583

您可以将`error_reporting`php.ini 中的设置更改为不包含`E_NOTICE`. php.ini 文件中应该有一些示例。

然而，这是不明智的。你*应该*做的是修复你的代码。例如，而不是：

```
if ($_REQUEST['language'] != '') 
```

你应该写：

```
if (isset($_REQUEST['language'])) 
```

修复所有 E_NOTICE 错误将使您的代码更加健壮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:19:13.380

归根结底，问题在于您的代码。您试图在未先初始化的情况下引用数组项和索引。

您现在看到它的原因是旧服务器已`E_NOTICE`禁用 error_reporting。我敢打赌 PHP.ini 从未被指定，因为默认是不显示错误但记录所有非通知和非弃用事件。

```
; Common Values:
;   E_ALL & ~E_NOTICE  (Show all errors, except for notices and coding standards warnings.)
;   E_ALL & ~E_NOTICE | E_STRICT  (Show all errors, except for notices)
;   E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR  (Show only errors)
;   E_ALL | E_STRICT  (Show all errors, warnings and notices including coding standards.)
; Default Value: E_ALL & ~E_NOTICE
; Development Value: E_ALL | E_STRICT
; Production Value: E_ALL & ~E_DEPRECATED
; http://php.net/error-reporting
error_reporting = E_ALL & ~E_NOTICE | ~E_DEPRECATED

; This directive controls whether or not and where PHP will output errors,
; notices and warnings too. Error output is very useful during development, but
; it could be very dangerous in production environments. Depending on the code
; which is triggering the error, sensitive information could potentially leak
; out of your application such as database usernames and passwords or worse.
; It's recommended that errors be logged on production servers rather than
; having the errors sent to STDOUT.
; Possible Values:
;   Off = Do not display any errors
;   stderr = Display errors to STDERR (affects only CGI/CLI binaries!)
;   On or stdout = Display errors to STDOUT
; Default Value: On
; Development Value: On
; Production Value: Off
; http://php.net/display-errors
display_errors = Off 
```

这是一个创可贴，现在可以应用：

```
error_reporting( E_ALL ^ ~E_NOTICE ); 
```

如果要在访问之前检查数组键是否存在，请使用：

```
if(array_key_exists( 'key you are looking for', $array ) ){
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:21:44.687

在表达式中使用未定义变量或数组中的未定义索引将引发“未定义变量”或“未定义索引”**通知**。

您可以通过在使用值之前始终检查值是否已定义/为空来避免这种情况。这样您就可以了解应用程序中的事物状态。

另一方面，可以针对异常（不一定是不正确）行为发出**通知**和**警告。**这意味着如果您愿意，可以通过设置正确的 error_reporting 级别来忽略它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:16:28.420

您应该在尝试访问它之前检查数组索引是否存在，并确保在使用它们之前声明了任何变量。

# css - 内部有两个浮动 div 的 HTML 列表无法正确显示

> ID：11723318
> 
> 赞同：0
> 
> 时间：2012-07-30T14:14:06.923
> 
> 标签：css

这是我的代码

```
<ul style="list-style-type: circle; margin-left:70px;">
<li >
    <a style="">
        <div style="border:1px solid green;float:left">asdsd</div>
        <div style="border:1px solid blue;float:left">.............</div>
    </a>
</li>
</ul> 
```

出于某种原因，列表圆圈出现在文本上方而不是左侧。

我怀疑罪魁祸首是两个浮动的 div。我已经尝试了我通常的解决方案，使用另一个带有 style="clear:both" 的 div，但这也不起作用。

这真让我抓狂...

编辑：我在列表中有 div 的原因是我需要将此代码用于我的 jquery UI 自动完成，我需要将其分成列（我的代码中的 div）这是我能做到这一点的唯一方法。没有圆圈，一切都很好。但随着圈...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:24:33.403

首先，我建议将 CSS 拆分到另一个文件中。将 div 显示为 inline-block 而不是浮动它们将提供类似的外观。这是一个带有代码的 JS Fiddle：http: [//jsfiddle.net/mMQBy/](http://jsfiddle.net/mMQBy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:33:20.970

You can't put block element in inline element (`<div>` in `<a>`).
You will have to repeat your `<a>` inside of each `<div>`
Than use `display:inline-block` instead of `float:left;` on your `<div>`.

**Example**

[http://jsfiddle.net/hJfUF/](http://jsfiddle.net/hJfUF/)

# sphinx - 选择自定义字段时狮身人面像搜索不显示结果

> ID：11723319
> 
> 赞同：0
> 
> 时间：2012-07-30T14:14:07.237
> 
> 标签：sphinx

我使用 sphinx 搜索数据库，但是当我在查询中选择自定义字段时遇到问题。有谁能够帮我？

例如。当我用这个查询测试它时：

`SELECT FROM events JOIN events_gategory ON events.category_id = events_gategory.id`

它工作正常

但是当我使用这个查询时：

`SELECT events.name FROM events JOIN events_gategory ON events.category_id = events_gategory.id`

狮身人面像没有显示任何结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:13:23.323

此查询在您的“源”中的“sql_query”中在哪里？

如果是这样，它将需要一个唯一的 id 作为列列表中的第一列。

# css - 标签在 IE8 CSS 中被忽略

> ID：11723330
> 
> 赞同：0
> 
> 时间：2012-07-30T14:14:37.257
> 
> 标签：css, html, internet-explorer-8

我在 ASP XHTML 页面中有以下内容：

```
<body>
<form runat="server">
<div class="page">
    <div class="searchBlock">
        Last Name:&nbsp;<asp:TextBox ID="txt_SearchLastName" runat="server">p:TextBox>&nbsp;
        First Name:&nbsp;<asp:TextBox ID="txt_SearchFirstName" runat="server </asp:TextBox>&nbsp;
        <asp:Button ID="btn_Load" runat="server" Text="Load" />
        <br />
    </div>
    <div class="dataBlock">
        Name:&nbsp;
        <asp:TextBox ID="txt_FistName" runat="server"></asp:TextBox>&nbsp;
        <asp:TextBox ID="txt_MiddleName" runat="server"></asp:TextBox>&nbsp;
        <asp:TextBox ID="txt_LastName" runat="server"></asp:TextBox>&nbsp;
        <asp:TextBox ID="txt_Suffix" Width="30px" runat="server"></asp:TextBox>&nbsp;
        <br />
        <asp:Button ID="btn_Save" runat="server" Text="Save" />
    </div>
</div>
</form>
</body> 
```

以及匹配的 CSS 表中的相应代码：

```
.page
{
    width: 960px;
    background-color: #fff;
    margin: 20px auto 0px auto;
    border: 1px solid #496077;
}

div.searchBlock
{
    padding: 8px;
    background-color: #ffc000;
}

div.dataBlock
{
    padding: 8px;
    background-color: #80ffff;
} 
```

在 Firefox (14) 和 IE8 以及 Visual Studio 2010 中的设计窗口中，表单都按预期显示；顶部（“搜索”块）背景是金色，底部（“数据块”块）是蓝色阴影。但是，在 IE8 中，顶部是金色，底部是白色，并且也没有填充。

在任何人说“嵌套 Div 标签”之前，请注意如果页面和搜索 div 块被删除，同样的事情会发生 - dataBlock 块在 Firefox 和 VS 中具有浅青色背景和填充，但在 IE8 中是白色且没有填充。

在 Firefox 14 和 Visual Studio 2010 的设计窗口中，它可以工作（DataBlock 背景为蓝色阴影，元素周围有填充），但在 IE8 中，它不起作用（DataBlock 背景为白色，没有填充）。

即使我删除了所有表单元素，并将 div 的名称从 dataBlock 更改为 somethingElseBlock，它在 IE8 中仍然无法正常工作。

# c# - C# 处理用户设置

> ID：11723331
> 
> 赞同：0
> 
> 时间：2012-07-30T14:14:37.937
> 
> 标签：c#, storage, configuration-files

首先，我不是在寻找一些代码（这会有所帮助，但我想学习）。

我正在尝试制作一个电子邮件程序。不用于分发，仅用于学习。我已经准备好加密了。我现在想要做的是添加用户并将他们的设置存储在某处。这将包括用户名、电子邮件和密码（以及其他一些小东西，但这是主要的东西）。

你们认为存储这些设置以便我可以在程序中调用它们的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:34:41.733

在查看给出的评论后，这些链接帮助了我：

[http://msdn.microsoft.com/en-us/library/0zszyc6e](http://msdn.microsoft.com/en-us/library/0zszyc6e)

[http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:51:04.080

我最近做了自己的，我使用了序列化。定义一个用户女巫具有人名、信息和设置。使用序列化将所有用户对象保存在 xml 文件中。它非常简单，只需将其读入并将它们添加到数组中即可拥有所有用户。可能需要一个单独的 xml 文件用于用户名和密码字典。

如果您需要，这是一个很好的序列化链接：http: [//msdn.microsoft.com/en-us/library/ms233843.aspx](http://msdn.microsoft.com/en-us/library/ms233843.aspx)

# c# - 3dtv应用构建.net

> ID：11723345
> 
> 赞同：0
> 
> 时间：2012-07-30T14:15:54.750
> 
> 标签：c#, animation, 3d, data-visualization

我正在寻找有关如何构建 3dTV 就绪应用程序的 SDK / 教程。目标是评估用于数据可视化和公司品牌广告的 3DTV 功能。虽然我见过并使用过许多 3D 动画 SDK，但我还没有看到一个适合通过 3DTV 进行广播/投影的 SDK。我更喜欢.net SDK，但愿意使用任何可用的开发平台来评估这个概念。

任何建议表示赞赏.. Rob

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:29:41.483

DirectX 11.1 内置了立体 3D 支持，但如果您等待 Windows 8，您可以获得完整的立体 3D api：

[http://code.msdn.microsoft.com/windowsapps/Direct3D-111-Simple-Stereo-9b2b61aa](http://code.msdn.microsoft.com/windowsapps/Direct3D-111-Simple-Stereo-9b2b61aa)

和

[http://msdn.microsoft.com/en-us/library/windows/apps/hh780567.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780567.aspx)

# workflow - 通过外部工具安排工作流程

> ID：11723350
> 
> 赞同：0
> 
> 时间：2012-07-30T14:16:21.463
> 
> 标签：workflow, dynamics-crm-2011

我一直在对安排工作流程在特定时间/日期运行进行一些研究，但我还没有真正找到任何我需要的东西。我在某处读到，工作流可以在 CRM 中创建，然后通过控制台工具或 Windows 计划服务运行。根据我的阅读，这听起来像是我需要的，但我找不到任何地方告诉我如何创建其中一个或设置它，所以我想知道是否有人可以帮助我.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:35:54.057

我想到了几个选项：

1.  [Scribe Insight 可以触发工作流程](http://nicolagrillo.blogspot.com/2012/04/scribe-scribe-insight-to-trigger-crm.html)
2.  在您的实体上创建一个触发您的工作流的属性。通过 SSIS、Scribe 或计划的命令行应用程序更新字段

# android - setAlpha 出错

> ID：11723351
> 
> 赞同：0
> 
> 时间：2012-07-30T14:16:22.687
> 
> 标签：android, android-layout, android-widget

大家好，由于这个错误，我需要你的帮助：

这是日志猫：

```
07-30 16:12:33.823: E/AndroidRuntime(21283): java.lang.NoSuchMethodError: android.widget.LinearLayout.setAlpha
07-30 16:12:33.823: E/AndroidRuntime(21283):    at it.bisemanuDEV.piano.livello1$1.onClick(livello1.java:393)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at android.view.View.performClick(View.java:2408)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at android.view.View$PerformClick.run(View.java:8819)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at android.os.Handler.handleCallback(Handler.java:603)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at android.os.Looper.loop(Looper.java:123)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at java.lang.reflect.Method.invokeNative(Native Method)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at java.lang.reflect.Method.invoke(Method.java:521)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-30 16:12:33.823: E/AndroidRuntime(21283):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:24:18.557

`setAlpha()`在 API11 中引入。您可能会收到此错误，因为您为此方法支持的 API 太低。由于它在 API < 11 中不存在，因此编译器将抛出`NoSuchMethodError`异常。您也可能不通过浮点数而意外重载该方法。如果 API 级别是问题，您可能想尝试 sataniccrow 提供的链接：[设置 Alpha/Opacity of Layout](https://stackoverflow.com/questions/4813995/set-alpha-opacity-of-layout)

# linux - linux shell进程文本

> ID：11723357
> 
> 赞同：1
> 
> 时间：2012-07-30T14:16:35.353
> 
> 标签：linux, shell, awk

我下面有一个字符串

> 属性 | 账户属性 | 动作属性 | 周年物业 | 应用属性 | AssistantName 属性 | AssistantDNA 财产 | 实验室DNA……

并且从 linux shell 想找到一个命令来将其处理为以下格式。我只想显示其中包含 DNA 的单词。对我来说，这里的重点是从提示中了解如何做到这一点。

```
AssistantDNA
LabDNA 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:17:59.870

`awk`选择：

```
awk -v RS='|' '/DNA/' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:41:08.563

```
echo "Properties | Account Property | Actions Property | Anniversary Property | Application Property | AssistantName Property | AssistantDNA Property | LabDNA" | tr '|' '\n' | grep DNA 
```

印刷

```
AssistantDNA Property 
LabDNA 
```

首先用`|`新行替换，然后使用普通的 grep。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T14:20:36.807

也许是这样的：

```
egrep -oi '[^ ]*dna[^ ]*' file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T14:27:27.933

### 使用扩展正则表达式

假设您的数据位于名为*/tmp/foo*的文件中，您可以使用*egrep*或`grep -E`（取决于您的系统）使用扩展正则表达式匹配您想要的单词：

```
egrep --only-matching --ignore-case '\b[[:alnum:]]+dna\b' /tmp/foo | sort 
```

最后的*排序*管道将为您按字母顺序对结果进行排序。根据您提出的要求，这当然不是必需的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-30T14:41:35.067

```
grep -Po "\S*DNA\S*" yourFile 
```

测试：

```
kent$  echo "Properties | Account Property | Actions Property | Anniversary Property | Application Property | AssistantName Property | AssistantDNA Property | LabDNA...."|grep -Po "\S*DNA\S*"
AssistantDNA
LabDNA.... 
```

# c++ - std::vector::resize 应该默认构造多少次新元素？

> ID：11723359
> 
> 赞同：5
> 
> 时间：2012-07-30T14:16:44.813
> 
> 标签：c++, stl, stdvector

我们的团队刚刚遇到了此处描述的相同问题[http://forums.codeguru.com/archive/index.php/t-514404.html](http://forums.codeguru.com/archive/index.php/t-514404.html)，即调用`some_vec.resize(new_size)`，其中`N = new_size - some_vec.size()`N >= 2 和 VC10 默认构造的所有 N 新元素，而 GCC 默认构造了一个元素，作为*原型*元素，为新元素复制构造它 N 次。

由于这是一个 uuid 向量，默认构造函数随机初始化每个新实例，因此我们最终得到 N 倍于 GCC 的相同 uuid 和 N 倍于 VC 的不同 uuid。这足以在一个平台上对我们的测试套件造成严重破坏，但在另一个平台上却没有，而且很难找到。

我的问题是：谁是对的？风投还是海合会？或者这是未指定的 C++ 中那些心爱的角落之一？TIA，--DD

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:20:42.053

我敢打赌，如果您使用 编译 GCC `-std=c++0x`，您将获得与使用 MSVC 相同的结果，即 N 个默认构造。这在 C++11 中发生了变化，请参见[此处](http://en.cppreference.com/w/cpp/container/vector/resize)。现在有两个重载，一个只有默认构造新元素的新大小，另一个使用“原型”参数来复制构造每个新元素。

现在，无论您在何种模式下编译，要获得一致的结果，只需使用

```
v.resize(new_size, T()); 
```

背景信息：更改是必要的，因为现在有可以移动但不可复制的类型（如`std::unique_ptr`）。旧签名要求可复制性。现在，如果您使用需要复制的操作，标准容器类型的第一个模板参数只需要是可复制的。

# jquery - IE Java 脚本错误无法获取属性“0”的值：

> ID：11723363
> 
> 赞同：6
> 
> 时间：2012-07-30T14:17:00.067
> 
> 标签：jquery, internet-explorer, file-upload

我有一个：

```
<img id="uploadedimage" alt="uploaded image" src="" width="250px" height="250px"/> 
```

一旦用户使用此 JQuery 代码选择了他们的图像，并且有一个 div 来显示图像：

```
$('#BusinessImage').change(function (ev) {

            var f = ev.target.files[0];
            var fr = new FileReader();
            var IsImage = false;

            // check the file is an image
            if (f.type.match('image.*')) {
                IsImage = true;
            }

            fr.onload = function (ev2) {
                if (IsImage) {
                    $('#uploadedimage').attr('src', ev2.target.result);  
                }
            };

            if (IsImage) {
                fr.readAsDataURL(f);
                ValidFileUpload();
            }
            else {
                InvalidFileUpload();
            }
        }); 
```

当然，这段代码在除撒旦浏览器 Internet Explorer 之外的所有其他浏览器中都运行良好。我收到此错误：

```
Line: 108
Character: 13
Code: 0
Error Message: Unable to get value of the property '0': object is null or undefined 
```

有谁知道是什么原因造成的，因为它在 FFX 和 Chrome 中运行良好。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T14:25:24.137

“.files”仅适用于支持 HTML5 的浏览器。

IE10 支持文件，但对于 IE9 和早期版本，您必须使用其他方式获取路径。：

检查是否支持文件：

```
if( ev.target.files ){
  //supported
  console.log( ev.target.files[0] );
}else{
  //.files not supported
  console.log( ev.target.value );
} 
```

# salesforce - Salesforce.com：让 SOQL 语句返回要在电子邮件模板中使用的字符串？

> ID：11723365
> 
> 赞同：1
> 
> 时间：2012-07-30T14:17:05.497
> 
> 标签：salesforce, apex-code, soql

我为生日制作了 Apex Scheduler 课程。距离生日还有 2 天，班级工作并成功地向我们的主管发送了一封电子邮件。

但是，距离生日还有两天时发送的电子邮件模板需要包含联系人的名字、姓氏和出生日期。（电子邮件模板如下所示：这是调度程序生成的电子邮件，用于通知您 First Name: `{!Contact.FirstName}`, Last Name:的生日`{!Contact.LastName}`在`{!Contact.Next_Birthday__c}`.

在我的调度程序中，我使用 SOQl 语句在数据库中查询联系人的 ID 和名字。

调用查询后，如何将刚刚查询的信息转换为要在电子邮件模板中使用的字符串/方法？

我的猜测是将查询结果作为字符串返回？任何建议表示赞赏！

这是我的代码：

```
global class BirthdayName implements Schedulable
{
    global void execute (SchedulableContext ctx) 
    { 
        sendBirthdayEmail(); 
    }

    public void sendBirthdayEmail()
    {
        for(Contact con : [SELECT Contact.name, Id FROM Contact WHERE Next_Birthday__c = : system.Today().addDays(2)])
        {
            Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage(); 
            mail.setTemplateId('00XJ0000000M31w'); 
            mail.setTargetObjectId('005J0000000JWYx'); 
            mail.setSaveAsActivity(false);
            Messaging.sendEmail(new Messaging.SingleEmailMessage[] {mail}); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T00:58:58.743

## 快速回答

邮件对象有两个您可以设置的 ID，第一个是您所做的目标对象，第二个是“什么”对象，即电子邮件所指的对象。

因此，您需要的只是下面的行，您应该进行设置。

```
mail.setWhatId(con.Id); 
```

## 更多注意事项

像您在此处所做的那样使用硬编码 ID 被认为是不好的做法，主要是因为生产组织中的 ID 与沙盒或其他组织中的 ID 不太可能相同。您应该通过其 API/开发人员名称获取电子邮件模板本身：

```
EmailTemplate template = [Select id, Body from EmailTemplate
                          where DeveloperName = 'BirthdayReminder']; 
```

还可以通过姓名或电子邮件地址获取导演的 ID：

```
User theDirector = [select Id from User where Email = 'md@somecompany.com']; 
```

然后像以前一样使用 ID：

```
mail.setTemplateId(template.Id); 
mail.setTargetObjectId(theDirector.Id); 
```

显然我不是在这里检查错误，这是您可能想要添加的内容，并且您应该对电子邮件发送限制保持警惕，但鉴于这种情况，除非您正在处理，否则它们不是您可能会遇到的问题与一家非常大的公司合作！

# java - 用于从输入字符串生成正则表达式的 Java 库

> ID：11723368
> 
> 赞同：1
> 
> 时间：2012-07-30T14:17:13.443
> 
> 标签：java, regex

有许多网站将字符串作为用户输入，并允许您从字符串片段创建正则表达式 (regex)。

但是我找不到任何相同的java库。是否有任何可用的 Java 库可以生成与字符串完全匹配的正则表达式？

```
String inputString = "ABC345";
String regularExpression = Something.generateRegEx(inputString); 
```

或类似的东西。

**注意：**我有一个条件，我想从用户那里获取一些字符串，生成正则表达式，然后在一些数据集上匹配该模式以提取相似的模式。我创建了一个小实用程序，但它还不是那么可靠。此外，我正在寻找一些经过良好测试的库。

**编辑 ：**

请访问[txt2re.com](https://txt2re.com)。我想要一个执行相同功能的 java 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:24:12.087

[`Pattern.quote(String)`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)返回与指定字符串完全匹配的（字符串）正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:06:21.613

我认为，txt2re.com 有一个来自已知正则表达式的数据库，因为该工具使用日期和电子邮件格式的“日期”或“电子邮件”等语义扩展了它的答案。否则，它会给出一个表达式，它只验证一个字符串而不是“常规语言”。正则语言用正则表达式表示，可以用有限状态机计算，但它们是有限词的集合（所有有限语言都是正则的）。例如一个简单的语言，如：

```
L = { (a^n)(b^n) | n >= 0 } is not regular. (proof with pumping lemma)

L = {ab, aabb, aaabbb,...} (not- regular) 
```

如果您考虑输入是一组无限的单词（包括自然语言），但是，正则表达式不能描述所有这些单词。为了生成一种语言的正则表达式，您必须首先使用 (TYPE-3) 语法对其进行描述。

如果你的语言只有这样一个词：

```
L = { your.name@example.com } 
```

然后你可以编写一个基本的编译器迭代字符，同时检查它们的类型，伪：

```
s = size(input) 
result = ""
for (i = 0; i < s; i++) {
   if input[i] is numeric
      result += "d"
   else if input[i] is word
      result += "w" 
   ...
}
return result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-10T03:14:25.283

基于遗传算法的 java 库，如 regex++ url：[https](https://github.com/MaLeLabTs/RegexGenerator) ://github.com/MaLeLabTs/RegexGenerator可用于相同目的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T14:20:44.447

如果您想要找到与给定字符串匹配的正则表达式，那么这是没有意义的，因为它的数量是无限的。

相反，如果您想从用户输入的正则表达式构建 Pattern 对象，请以`java.util.regex.*`这种方式使用标准 java API ()：

```
Pattern p = Pattern.compile(inputString); 
```

# c# - 格式化电子邮件数据集输出

> ID：11723372
> 
> 赞同：0
> 
> 时间：2012-07-30T14:17:21.987
> 
> 标签：c#, sql, formatting, dataset

我有一个由 Windows 调度程序运行的程序......每次运行时，它都会在我们的数据库上运行一个查询，获取信息，然后通过电子邮件发送它。这一切都像宣传的那样工作，但是我似乎无法找到如何格式化日期和美元金额。我的 C# 代码是：

```
Imports System.Net.Mail
Imports System.Linq

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Try
            Dim SmtpServer As New SmtpClient()
            Dim mail As New MailMessage()
            Me.Paid_Out_TbTableAdapter.Fill(Me.DataSet.Paid_Out_Tb)
            Dim payouts = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Date</th><th>Amount</th><th>User</th><th>Comment</th></tr>
                        <%= From paidOut In Me.DataSet.Paid_Out_Tb.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td>
                                       <td><%= paidOut.Paid_Out_Datetime %></td>
                                       <td><%= paidOut.Paid_Out_Amount %></td>
                                       <td><%= paidOut.Update_UserName %></td>
                                       <td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>
                </body>

            </html>

            SmtpServer.Credentials = New  _
            Net.NetworkCredential("****", "****")
            SmtpServer.Port = 25
            SmtpServer.Host = "10.0.*.*"
            mail = New MailMessage()
            mail.From = New MailAddress("***@***.com")
            mail.To.Add("***@***.com")
            'mail.CC.Add("***@**.com")
            mail.Subject = "Paid Out Report for 1929"
            mail.IsBodyHtml = True
            mail.Body = payouts.ToString()
            SmtpServer.Send(mail)
            'MsgBox("mail send")
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try

        Me.Close()

    End Sub 
```

我的查询是：

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Amount > 20) OR
                         (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') 
```

最后的输出是：

```
Store # Date    Amount  User    Comment
1929    2012-07-22T12:18:23.33  29.0000 KAG PIZZA AND TIP FOR STORE 
```

正如您所看到的，日期很长。我想要 7/22/12 以及我想要 29.00 美元的金额……如何正确格式化输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:31:55.267

您应该能够使用`.ToString()`，传入正确的格式字符串，以获得您想要的格式。您可能需要事先进行一些转换，具体取决于为您的 DataSet 指定的类型（如果有）：

```
<td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %></td>
<td><%= Convert.ToDecimal(paidOut.Paid_Out_Amount).ToString("0.00") %></td> 
```

# shell - 查找根路径，shell脚本

> ID：11723376
> 
> 赞同：1
> 
> 时间：2012-07-30T14:17:26.377
> 
> 标签：shell

```
ROOT=`pwd | sed 's%\(.*/myABC\)/.*%\1%'` 
```

这是一个shell命令，我相信目的是找到这个项目的根路径。我不太确定这是如何工作的。谁能帮我解释一下？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:27:52.847

你在目录路径中

/home/youruser/myABC/some/other/deeper/dir 并且您使用这些命令路径将被截断为仅 /home/youruser/myABC/。

sed - 是一个字符串编辑工具

s% - 替换 pwd 字符串并使用 '%' 作为分隔符

\(.*/myABC\)/.* - 捕获包含 myABC 的字符串并将其保存在第一个参数中

\1 - 打印第一个参数

最好的问候肯尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:26:45.207

如果你想要当前目录的父目录，你不能这样做：

```
ROOT=`dirname $PWD` 
```

# c# - 暂停主程序以等待 dll 响应

> ID：11723379
> 
> 赞同：0
> 
> 时间：2012-07-30T14:17:38.133
> 
> 标签：c#, visual-studio-2008, dll

我的应用程序（winform）必须访问串行端口上的设备。所有通信内容都放在一个 dll 中，该 dll 处理所有串行端口通信，并且必须将串行设备的响应返回给主应用程序。如何使主应用程序等待 dll 的响应以继续接收数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:22:50.193

它取决于该 dll 公开的 API。如果他们提供同步 API，那么您根本不需要任何暂停。您的线程将输入 dll 代码，当它返回到您的代码时，结果将在那里。

但是，如果 API 是异步的，则应该有轮询方法或回调。

无论如何，如果您提供 API 代码，我将能够给出更相关的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:36:20.000

如果 API 是同步的，则在另一个线程中调用 API。当您启动该线程时，禁用 UI 中的所有相关控件（或禁用整个表单；但这通常不是良好的用户体验）并提供某种通知（例如状态栏上的文本）。当 API 返回通知 UI 线程已完成并重新启用控件并向用户提供一些通知。

如果 API 是异步的，请禁用控件、提供状态并调用 API。当 API 通知您它已完成（或失败）时，重新启用控件并提供状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:26:16.447

如果有问题的 dll 代码是异步的，线程连接可能会起到作用。无论如何，您是否可以访问用于读取串行端口的底层线程？

# xml - SQL 将 XML 中的 & 符号替换为“and”

> ID：11723380
> 
> 赞同：0
> 
> 时间：2012-07-30T14:17:38.303
> 
> 标签：xml, replace, xquery

我想替换 & 符号，显示为`&amp;`存储在 SQL 数据库中的 XML。

XML的结构是...

```
<xs:simpleType name="ImportedData_Space_TypeType">
<xs:restriction base="xs:string">
  <xs:enumeration value="SupportSpace" />
  <xs:enumeration value="Teach&amp;ResSpace" />
  <xs:enumeration value="Teach&amp;ResSpecialistSpace" />
 </xs:restriction> 
```

我正在尝试返回视图并需要返回`&amp;`as`and`

我看了一下 xquery 但不确定这是否是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:01:19.453

只需使用替换功能，例如

```
declare variable $test := <ImportedData_Space_TypeType>Teach&amp;ResSpace</ImportedData_Space_TypeType>;
<ImportedData_Space_TypeType>{replace($test, "&amp;", "and")}</ImportedData_Space_TypeType> 
```

使用 XQuery Update，您还可以对其进行转换，例如：

```
copy $c := $test
modify replace value of node $c with replace($c, "&amp;", "and")
return $c 
```

# c# - 一次使用 MvcMailer 发送多封电子邮件

> ID：11723382
> 
> 赞同：1
> 
> 时间：2012-07-30T14:17:39.090
> 
> 标签：c#, asp.net-mvc-3, iis, mvcmailer

我有一个 MVC3 Web 应用程序，我正在使用 MvcMailer 发送电子邮件（一次可能有数千个）。如果我只是将每个收件人密件抄送到同一封电子邮件中，这很好用，但是如果我尝试循环通过他们向他们发送单独的电子邮件，它会非常慢，我猜这是因为它每次都再次连接到 smtp 服务器？

我们有自己的 smtp 服务器，它正在连接，我目前正在尝试发送这样的电子邮件：

```
foreach(Person x in names)
{
    var mail = Mailer.Example_Mail()
    mail.To.Add(x.Email_Address);
    mail.Send();
} 
```

我从[教程](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)中知道，您可以将电子邮件保存到文件中，而不是连接到 smtp 服务器并立即发送它们，而且我还从这篇[文章](https://stackoverflow.com/questions/5881747/sending-multiple-emails-with-mvcmailer)中接受的答案中知道，您可以让 IIS 接收它们并发送它们，但是不幸的是，我不知道怎么做。

如果有人可以让我知道这样做的最佳方法是什么，那就太棒了！谢谢大家！

**更新**

我已经尝试使用`SendAsync()`@Mike 建议的方法，这确实大大加快了速度，但它现在丢失了约 40% 的电子邮件。在没有抛出任何错误的情况下，每 100 封电子邮件中只有大约 65 封可以通过。我尝试按照“处理异步电子邮件的事件”部分中的建议捕获任何错误[，](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)但似乎根本没有抛出任何错误。下面的代码：

```
List<object> errors = new List<object>();
var mail = Mailer.Example_Mail();
mail.To.Add("some@address.com");
for (int i = 0; i < 100; i++)
{
    var client = new SmtpClientWrapper();
    client.SendCompleted += (sender, e) =>
    {
        if (e.Error != null || e.Cancelled)
        {
            errors.Add(e);
        }
    };
    mail.SendAsync("user state object", client);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:33:11.637

如果您没有修改数据并且在您的机器上有相当数量的处理能力（例如，多个核心），您可以尝试使用并行 foreach 循环。

[http://msdn.microsoft.com/en-us/library/dd460720.aspx](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

这实质上会为迭代中的每个项目生成多个线程。但是，请谨慎使用该方法：http: [//msdn.microsoft.com/en-us/library/dd997392.aspx](http://msdn.microsoft.com/en-us/library/dd997392.aspx)。

基本上，做一些测试 - > 这可能对你有用并加快进程，或者它可能不会，真的取决于你的设置和代码配置。

# google-maps - 谷歌地图自定义标记

> ID：11723384
> 
> 赞同：1
> 
> 时间：2012-07-30T14:17:43.937
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我在谷歌地图中插入了一个自定义标记，但它没有准确地指向地图。我认为这主要是因为标记的指向边缘的设计。

有没有关于如何制作自定义标记的指南？

我正在使用以下库：[http ://hpneo.github.com/gmaps/](http://hpneo.github.com/gmaps/)

![在此处输入图像描述](../Images/2d729ac9efd5e9378aa8e80e95ba23f6.png)

```
// JavaScript Document
$(document).ready(function () {
    var map = new GMaps({
        div: '#map',
        lat: 13.00487,
        lng: 77.576729,
        zoom: 13,
    });

    map.addControl({
        position: 'top_right',
        text: 'Geolocate',
        style: {
            margin: '5px',
            padding: '1px 6px',
            border: 'solid 1px #717B87',
            background: '#fff'
        },
        events: {
            click: function () {
                GMaps.geolocate({
                    success: function (position) {
                        map.setCenter(position.coords.latitude, position.coords.longitude);
                    },
                    error: function (error) {
                        alert('Geolocation failed: ' + error.message);
                    },
                    not_supported: function () {
                        alert("Your browser does not support geolocation");
                    }
                });
            }
        }
    });

    map.addMarker({
        lat: 13.00487,
        lng: 77.576729,
        title: 'Lima',
        icon: "http://i.imgur.com/3YJ8z.png",
        infoWindow: {
            content: '<p>HTML Content</p>'
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T14:26:25.670

你可能想要的是这样的：

```
var image = new google.maps.MarkerImage(
    'http://i.imgur.com/3YJ8z.png',
    new google.maps.Size(19,25),    // size of the image
    new google.maps.Point(0,0), // origin, in this case top-left corner
    new google.maps.Point(9, 25)    // anchor, i.e. the point half-way along the bottom of the image
);

map.addMarker({
    lat: 13.00487,
    lng: 77.576729,
    title: 'Lima',
    icon: image,
    infoWindow: {
        content: '<p>HTML Content</p>'
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:18:28.467

据我所知，有两种基本方法可以为 Google Maps (API V3) 创建自定义标记。第一个是使用“自定义叠加”，第二个是使用“复杂图标”。两者都在[Google Maps API 官方文档](https://developers.google.com/maps/documentation/javascript/tutorial)中进行了解释。你可以..

1.)如果要显示 HTML，请使用[“自定义叠加层”](http://code.google.com/apis/maps/documentation/javascript/overlays.html?hl=en#CustomOverlays)

Google Map 文档示例“ [Custom Overlays](http://gmaps-samples-v3.googlecode.com/svn/trunk/overlayview/custommarker.html) ”展示了如何基于 Google Maps OverlayView 类创建自己的 CustomMarker 类

```
CustomMarker.prototype = new google.maps.OverlayView();
CustomMarker.prototype.draw = function() {
  ..
}
overlay = new CustomMarker(..)
overlay.setMap(map); 
```

2.）如果要显示图像，请使用[“复杂图标”](https://developers.google.com/maps/documentation/javascript/overlays?hl=en#ComplexIcons)

Google Map 文档示例“ [Complex Icons](https://developers.google.com/maps/documentation/javascript/examples/icon-complex) ”展示了如何使用复杂图标创建 Google Marker，即图标、阴影图像和形状（形状定义图标的可点击区域）

```
 var image = new google.maps.MarkerImage('images/flag.png', ..
 var shadow = new google.maps.MarkerImage('images/shadow.png', ..
 var marker = new google.maps.Marker({
    position: .., map: .., shadow: .., icon: image, shape: ..
   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:25:59.370

[https://developers.google.com/maps/documentation/javascript/overlays#Icons](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)有一个示例，语法在[https://developers.google.com/maps/documentation/javascript/reference#MarkerImage进行了解释](https://developers.google.com/maps/documentation/javascript/overlays#Icons)

特别是，如果自定义标记与普通 Google 标记的形状不同，则`anchor`需要正确设置参数。

### 编辑后，

看来您确实使用的是小图像，但所有内容都被视为正常大小的 Google 标记。您需要制作一个自定义标记（见上文）。

# android - 无法将应用程序移动到 SD 卡

> ID：11723387
> 
> 赞同：6
> 
> 时间：2012-07-30T14:18:01.863
> 
> 标签：android, permissions, sd-card

我无法将自己的应用程序移至 SD 卡。

我相应的清单部分如下（我还粘贴了它需要的权限）。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<application
    android:installLocation="preferExternal"
    android:label="@string/app_name" >

<uses-sdk
    android:minSdkVersion="6"
    android:targetSdkVersion="9" /> 
```

我相信我遵循了此处描述的指南：http: [//developer.android.com/guide/topics/data/install-location.html](http://developer.android.com/guide/topics/data/install-location.html)（兼容性和权限）。但是，在安装过程中（从 SDK 也从 Android Market）应用程序登陆内部存储，我无法使用“管理应用程序”移动它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:26:13.203

尝试这个...

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:installLocation="preferExternal"
    package="your.package.name"
    android:versionCode="1"
    android:versionName="1.0" >
...
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:25:07.090

您需要包含`android:installLocation="auto"`在您的`<manifest>`标签中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:25:51.517

根据 App Install Location 文档的向后兼容性部分，

> 在 API 级别 8 之前构建的现有应用程序将始终安装在内部存储上，并且不能移动到外部存储上（即使在 API 级别 8 的设备上）。

但是，您仍然可以通过将构建目标设置为 API 级别 8（或更高级别）来利用安装位置功能。

为此，请右键单击您的项目，然后转到“属性”>“Android”。从列表中选择 API 级别 8 (Android 2.2) 或更高版本。

# sql-server - 将数据从 AS/400 DB2 导入 SQL Server 数据库

> ID：11723390
> 
> 赞同：0
> 
> 时间：2012-07-30T14:18:17.810
> 
> 标签：sql-server, db2, ibm-midrange, database-migration

我有一个旧的 AS/400 系统在星期三离线，我一直在尝试将所有数据导入 SQL Server 数据库以进行备份大约一周，但我在这样做时遇到了麻烦。

SQL Server 安装了 IBM System i Access for Windows，以及 DB2OLEDB（Microsoft OLE DB Provider for DB2）。我已尝试将这两个提供程序与 SQL Server 导入和导出向导一起使用，虽然我已成功创建连接并找到我正在寻找的数据，但似乎这两个提供程序都无法处理数据转换。DB2OLEDB 将自动定位任何基于 DECIMAL 的字段，仅此而已。它不能自动查找和转换 CHARACTER NOT NULL 字段，这是大多数字段。这是我尝试导入时遇到的错误：

> 无法检索源数据和目标数据的列信息，或者源列的数据类型未正确映射到目标提供程序上可用的数据类型。

最常见的列错误：

> *   列“[column]”：在数据类型映射文件中找不到源数据类型“CHARACTER”。

AS/400 中有数千个表，因此手动编写脚本绝对不是一种选择。

有没有更简单的方法？有没有我想念的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:33:55.650

阅读您的问题，我不明白问题是否在于创建表格。如果这是您的情况，我的意思是，如果您的问题是用 T-SQL 语言生成 DDL 以准备好数据库表，那么解决方案可能是使用[SAP Sybase Power Designer](http://www.sybase.com/products/modelingdevelopment/powerdesigner)之类的工具进行逆向工程。您有 Sybase 的试用版来测试它是否符合您的需要。

使用 Sybase PowerDeigner 创建从 AS/400 到 SQL Server 的 DDL 的步骤如下：

*   准备从 sybase 到 AS/400 的连接。
*   从 AS/400 数据库装入新的 PDM。
*   从 PDM 生成 CDM。
*   从 CDM 为 SQL Server 生成 PDM。
*   从 PDM 生成数据库 t-sql 脚本。
*   在 sql server 中执行 t-sql 脚本。

在我看来，PowerDesigner 的学习曲线并不难，但你的问题涵盖了所有的工程逻辑。

这时您可以尝试将数据从一个数据库复制到另一个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:26:11.133

尝试在系统 DSN 的“转换”高级选项卡中为 ODBC 中的 as/400 设置“允许不支持的字符”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:50:30.033

经过大量研究，我无法按照我需要的方式工作。我最终使用 iAccess 工具将其全部备份到 Excel 文件中。花了很长时间，但它完成了。

谢谢您的帮助。

# java - 使用 java applet 打印呈现的网页

> ID：11723391
> 
> 赞同：1
> 
> 时间：2012-07-30T14:18:26.190
> 
> 标签：java, printing, dialog, applet

**我需要使用 Java 小程序（带 AND 不带打印对话框**）打印呈现网页的内容。我正在考虑使用 Cobra 库（[http://lobobrowser.org/cobra/getting-started.jsp](http://lobobrowser.org/cobra/getting-started.jsp)）。下面给出的代码是一个最低限度的渲染器，我相信它会满足我的要求。如何将 RENDERED 内容打印到打印机？

```
 import javax.swing.*;
    import org.lobobrowser.html.gui.*;
    import org.lobobrowser.html.test.*;

    public class BareMinimumTest {
      public static void main(String[] args) throws Exception {
        JFrame window = new JFrame();
        HtmlPanel panel = new HtmlPanel();
        window.getContentPane().add(panel);
        window.setSize(600, 400);
        window.setVisible(true);
        new SimpleHtmlRendererContext(panel, new SimpleUserAgentContext())
.navigate("http://lobobrowser.org/browser/home.jsp");
      }
    } 
```

# c - 在 C 中使用具有相同标志的 fopen 打开文件

> ID：11723397
> 
> 赞同：3
> 
> 时间：2012-07-30T14:18:51.680
> 
> 标签：c, fopen, fwrite

我无法理解这段代码的输出？

```
int main()
{
    FILE* f, *f1;
    f = fopen("mytext", "w");
    if ((f1 = fopen("mytext", "w")) == 0)
       printf("unable\n");
    fprintf(f, "hello\n");
    fprintf(f1, "hi\n");
    return 0;
} 
```

输出是mytext 文件中的**hello**。为什么不写？“无法”不会打印到[stdout](https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T14:24:54.373

您有 2 个 FILE* 打开同一个文件，指向文件的开头，因此其中一个写入会覆盖另一个。

另请注意，FILE* 通常是缓冲的，因此当您对 FILE* 执行 fclose() 或 fflush() 时，这些小字符串实际上会写入文件。由于您两者都不做，系统将在应用程序退出时执行它，因此覆盖哪个写入取决于系统首先关闭哪个文件。

如果您以附加模式打开 2 个文件`fopen("mytext","a");`，您会看到不同的结果，但是当您想确保对另一个 FILE* 进行操作不会导致交错输出时，您需要 fflush() FILE*。从不同的进程/线程写入同一个文件会更加小心，例如某种形式的文件锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:46:08.617

您有 2 个文件指针试图同时以写入模式打开文件。*f 成功打开文件并获得对文件的锁定。在代码中，文件未关闭，另一个指针试图以写入模式打开同一个文件，但由于未获取锁而失败。**fopen() 失败时不一定返回 0。当 fopen() 失败时，它返回 0 或负值**. 在这种情况下，您只检查 f1 == 0 ，即使 fopen 指针 f1 失败并且因此无法打印到控制台，这也可能不是真的。继续， f 有一个有效的打开文件是写入模式，因此“hello”被写入文件。但是当您尝试将“hi”写入同一个文件但使用未初始化的不同指针时，fprintf 失败。因此，只有“hello”被写入文件，“hi”失败。

正确的用法是打开文件写“hello”关闭文件，然后以写模式再次打开它并写“hi”。在这种情况下，您只会看到“hi”，因为它会覆盖“hello”。

# java - 在 Java 中使用 HarLib 获取响应数据

> ID：11723400
> 
> 赞同：0
> 
> 时间：2012-07-30T14:18:57.980
> 
> 标签：java, json, getresponse, har

有人熟悉在 Java 中使用[HarLib吗？](http://www.frogthinker.org/projects/harlib)我正在尝试从 .HAR 文件中获取“响应”数据并将其输出到屏幕。

类中有一个`getResponse()`方法`HarEntry`，但是我不确定如何根据主页上的示例来实现它：

来自网站的样本：

```
import edu.umass.cs.benchlab.har.*;

File f = new File(fileName);
HarFileReader r = new HarFileReader();
HarFileWriter w = new HarFileWriter();
try
{
  System.out.println("Reading " + fileName);
  HarLog log = r.readHarFile(f);

  // Access all elements as objects
  HarBrowser browser = log.getBrowser();
  HarEntries entries = log.getEntries();
  List<HarPage> pages = log.getPages().getPages();
  for (HarPage page : pages)
  {
    System.out.println("page start time: "
        + ISO8601DateFormatter.format(page.getStartedDateTime()));
    System.out.println("page id: " + page.getId());
    System.out.println("page title: "+page.getTitle());
  }

           // Once you are done manipulating the objects, write back to a file
  System.out.println("Writing " + fileName + ".test");
  File f2 = new File(fileName + ".test");
  w.writeHarFile(log, f2);
}
catch (JsonParseException e)
{
  e.printStackTrace();
  fail("Parsing error during test");
}
catch (IOException e)
{
  e.printStackTrace();
  fail("IO exception during test");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:32:02.243

我想我想通了，虽然我不知道这段代码有多“干净”。我修改了示例代码并注释掉了写入文件部分：

```
import java.io.File;
import java.io.IOException;
import java.util.List;

import org.codehaus.jackson.JsonParseException;

import edu.umass.cs.benchlab.har.*;
import edu.umass.cs.benchlab.har.tools.*;

public class readinghars {

public static void main(String[] args) {
    String filename = new String("filename.har");
    File f = new File(filename);
    HarFileReader r = new HarFileReader();
    HarFileWriter w = new HarFileWriter();

    try
    {
      System.out.println("Reading " + filename);
      HarLog log = r.readHarFile(f);

      // Access all elements as objects
      HarBrowser browser = log.getBrowser();
      HarEntries entries = log.getEntries();

   // Used for loops
      List<HarPage> pages = log.getPages().getPages();
      List<HarEntry> hentry = entries.getEntries(); 

      for (HarPage page : pages)
      {
        System.out.println("page start time: "
            + ISO8601DateFormatter.format(page.getStartedDateTime()));
        System.out.println("page id: " + page.getId());
        System.out.println("page title: " + page.getTitle());
        }

      //Output "response" code of entries.
      for (HarEntry entry : hentry)
      {
          System.out.println("request code: " + entry.getRequest().getMethod()); //Output request type
          System.out.println("    response code: " + entry.getRequest().getUrl()); //Output url of request
          System.out.println("    response code: " + entry.getResponse().getStatus()); // Output the 
      }

      /*
      // Once you are done manipulating the objects, write back to a file
      System.out.println("Writing " + "fileName" + ".test");
      File f2 = new File("fileName" + ".test");
      w.writeHarFile(log, f2);
      */
    }
    catch (JsonParseException e)
    {
      e.printStackTrace();
      //fail("Parsing error during test");
    }
    catch (IOException e)
    {
      e.printStackTrace();
      //fail("IO exception during test");
    }

} 
```

}

# c# - 如何将购物车物品发送到贝宝

> ID：11723401
> 
> 赞同：1
> 
> 时间：2012-07-30T14:19:00.647
> 
> 标签：c#, asp.net-mvc, paypal

我正在使用 mvc，我正在尝试将我的整个购物车发送到贝宝。我可以让它添加单个项目，但不能添加整个购物车。

这是我的控制器：

```
public ActionResult PostToPayPal(Cart cart, ShippingDetails shippingInfo)
{
    PayPal paypal = new PayPal();
    paypal.cmd = "_xclick";
    paypal.business = ConfigurationManager.AppSettings["BusinessAccountKey"];

    bool useSandbox = Convert.ToBoolean(ConfigurationManager.AppSettings["UseSandBox"]);
    if (useSandbox)
        ViewBag.actionURL = "https://www.sandbox.paypal.com/cgi-bin/webscr";
    else
    {
        ViewBag.actionURL = "https://www.paypal.com/cgi-bin/webscr";
    }

    paypal.cancel_return = System.Configuration.ConfigurationManager.AppSettings["CancelURL"];
    paypal.@return = ConfigurationManager.AppSettings["ReturnURL"];
    paypal.notify_url = ConfigurationManager.AppSettings["NotifyURL"];

    paypal.currency_code = ConfigurationManager.AppSettings["CurrencyCode"];

    foreach (var lines in cart.Lines )
    {
        paypal.item_name = lines.Product.Name;
        paypal.amount = lines.Product.Price.ToString("c");
    }
    //paypal.item_name = item;
    //paypal.amount = amount;
    return View(paypal);

} 
```

这是我的看法：

```
@model SportsStore.Domain.Entities.PayPal

@{
    ViewBag.Title = "PostToPayPal";
}

<h2>PostToPayPal</h2>

        <form id="frm" action="@ViewBag.actionURL">

                @Html.HiddenFor(model => model.cmd)
                @Html.HiddenFor(model => model.business)
                @Html.HiddenFor(model => model.no_shipping)
                @Html.HiddenFor(model => model.@return)
                @Html.HiddenFor(model => model.cancel_return)
                @Html.HiddenFor(model => model.notify_url)
                @Html.HiddenFor(model => model.currency_code)
                @Html.HiddenFor(model => model.item_name)
                @Html.HiddenFor(model => model.amount)

            <p>
                <h4>redirecting to paypal...</h4>
            </p>

        </form>

<script type="text/javascript" language="javascript">
    $(this.document).ready(function () {
        var frm = $("form");
        frm.submit();
    })
</script> 
```

这是我的购物车：

@model SportsStore.WebUI.Models.CartIndexViewModel

@{ ViewBag.Title = "小弓窥视：你的购物车"; }

## 您的购物车

```
<table width="90%" align="center">

    <thead>
        <tr>
            <th align="center">Quantity</th>
            <th align="left">Item</th>
            <th align="right">Price</th>
            <th align="right">Subtotal</th>
        </tr>
    </thead>

    <tbody>
        @foreach(var line in Model.Cart.Lines)
        {
            <tr>
                <td align="center">@line.Quantity</td>
                <td align="left">@line.Product.Name</td>
                <td align="right">@line.Product.Price.ToString("c")</td>
                <td align="right">@((line.Quantity * line.Product.Price).ToString("c"))</td>
                <td>
                    @using(Html.BeginForm("RemoveFromCart", "Cart"))
                    {
                        @Html.Hidden("ProductId", line.Product.ProductID)
                        @Html.HiddenFor(x => x.ReturnUrl)
                        <input class="actionButtons" type="submit" value="Remove"/>
                    }
                </td>
            </tr>
        }
    </tbody>

    <tfoot>
        <tr>
            <td colspan="3" align="right">Total:</td>
            <td align="right">
                @Model.Cart.ComputeTotalValue().ToString("c")
            </td>
        </tr>
    </tfoot>

</table>

<p align="center" class="actionButtons">
    <a href="@Model.ReturnUrl">Continue Shopping</a>
    @Html.ActionLink("Checkout now", "Checkout")
</p> 
```

购物车实体的代码：

```
private readonly List<CartLine> lineCollection = new List<CartLine>();

public IEnumerable<CartLine> Lines
{
    get { return lineCollection; }
}

public void AddItem(Product product, int quantity)
{
    CartLine line = lineCollection
        .Where(p => p.Product.ProductID == product.ProductID)
        .FirstOrDefault();

    if (line == null)
    {
        lineCollection.Add(new CartLine {Product = product, Quantity = quantity});
    }
    else
    {
        line.Quantity += quantity;
    }
}

public void RemoveLine(Product product)
{
    lineCollection.RemoveAll(l => l.Product.ProductID == product.ProductID);
}

public decimal ComputeTotalValue()
{
    return lineCollection.Sum(e => e.Product.Price*e.Quantity);
}

public void Clear()
{
    lineCollection.Clear();
} 
```

}

公共类 CartLine { 公共产品产品 { 获取；放; } 公共 int 数量 { 获取；放; } }

有什么帮助吗？？？

谢谢...

# c# - 随时随地测试您的方法

> ID：11723407
> 
> 赞同：0
> 
> 时间：2012-07-30T14:19:27.587
> 
> 标签：c#, asp.net-mvc, visual-studio

我希望能够右键单击一个方法，输入一些参数值，然后测试它（或类似的东西）。

我已经看过 Visual-Studio 中的内置 MVC 单元测试，但放弃了学习它.. 只是为了测试一个简单的小方法似乎很麻烦。我确信在创建严肃的项目时使用它是有充分理由的。

但是有没有一个快速而肮脏的选择？

* * *

一个很酷的解决方案是，在visual-studio中的一个窗口，您（使用智能感知！）可以编写如下内容：

```
HelloWorld obj = new HelloWorld();
obj.Print(); 
```

单击运行，然后立即向您显示结果。就像即时窗口一样，但这仅在调试时有效:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:22:00.550

您可以尝试[TestDriven.NET](http://testdriven.net/)或[CodeRush](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)。两者都允许您通过简单的右键单击和测试（甚至调试）来测试方法。

我更喜欢前者（TestDriven.NET），因为它允许您通过测试运行器执行任意方法（不仅仅是测试）。

两者都与 NUnit 兼容，并且可能与其他几个框架（如 MbUnit）兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:36:35.790

ReSharper 的单元测试窗口比 Visual Studio 中的“正常”单元测试支持要好得多。看看： http: [//www.jetbrains.com/resharper/features/unit_testing.html](http://www.jetbrains.com/resharper/features/unit_testing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:22:15.753

SnippetCompiler 或 LinqPad 是我所知道的最佳选择。[这篇 Stack Overflow 帖子](https://stackoverflow.com/questions/2775055/looking-for-replacement-for-snippet-compiler)讨论了它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T19:34:37.163

Okay, so i tried out unit testing and gave it a good shot, and i hated it...

I needed to use the HttpContext and it was a pain in the ass to make that work when unit testing. So i wrote my own testing environment in MVC, it's quite simple:

Your put on a attribute on the method you want testet, you build you project, and you refresh a page h**p://localhost/test to see the output of that method.

```
[QTest]
public string test()
{
    return HttpContext.Current.Server.MapPath(@"~\");
} 
```

* * *

If anyone should be interested, here is the howto:

1.  Create a custom attribute.

2.  Create a test page, and find all methods in your assembly with an attribute QTest.

3.  Print them out.

My code:

CustomAttribute.cs

```
public class QTestAttribute : Attribute
{
    public QTestAttribute()
    {
        //Will do so you can define the method paremeter values later on. But for now a emty attribute is fine.
    }
} 
```

Your TestController.cs:

```
static IEnumerable<Type> GetTypesWithAttribute(Assembly assembly)
{
    foreach (Type type in assembly.GetTypes())
    {
        yield return type;
    }
}
static IEnumerable<MethodInfo> GetMethodsWithAttribute(Type theClass)
{
    foreach (MethodInfo method in theClass.GetMethods())
    {
        if (method.GetCustomAttributes(typeof(QTestAttribute), true).Length > 0)
        {
            yield return method;
        }
    }
}
public ActionResult Index()
{
    IEnumerable<Type> classes = GetTypesWithAttribute(Assembly.LoadFrom(HttpContext.Request.MapPath(@"~\bin\YourProjectName.dll")));
    List<String> tests = new List<string>();
    foreach (var singleClass in classes)
    {
        try
        {
            var a = System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(singleClass.FullName);
            foreach (MethodInfo method in GetMethodsWithAttribute(singleClass))
            {
                tests.Add(method.Invoke(a, null).ToString());
            }
        }
        catch (Exception ex)
        {
            try
            {
                tests.Add(ex.InnerException.Message);
            }
            catch (Exception)
            {

            }
        }
    }
    return Content(string.Join("<br>", tests));
} 
```

It's pretty easy to customize, and make it work how you want to, and it's without limitations compared to nunit.

# c# - 如何在 C# 中从子构造函数调用父构造函数

> ID：11723411
> 
> 赞同：2
> 
> 时间：2012-07-30T14:19:35.543
> 
> 标签：c#, class, inheritance, parent

我正在尝试从我的 Resident 类中调用我的 Person 类构造函数

人：

```
public class Person
{
    private String name;
    private String surname;
    private String address1;
    private String address2;
    private String telephone;
    private String faxNumber;

    Person(String aName, String aSurname, String aAddress1, String aAddress2, String aTelephone, String aFaxNumber)
    {
        name = aName;
        surname = aSurname;
        address1 = aAddress1;
        address2 = aAddress2;
        telephone = aTelephone;
        faxNumber = aFaxNumber;
    } 
```

居民：

```
public class Resident : Person
{
    private String IDNumberPrim;
    private String IDNumberSec1;
    private String IDNumberSec2;
    private String IDNumberSec3;
    private String IDNumberSec4;
    private String tempID;
    private String passportNumber;

    Resident(String aIDNumberPrim, String aIDNumberSec1, String aIDNumberSec2, String aIDNumberSec3, String aIDNumberSec4, String aTempId, String aPassportNumber) 
```

我已经尝试过基本命令，但它从来没有用过。

请帮忙！！！

- - - - - - 更新 - - - - - - - -

问题解决了。

感谢所有的帮助和建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:22:24.110

目前，您的构造函数都默认为，`private`因为您没有包含[访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.100%29.aspx)。如果`Person`构造函数是私有的并且`Resident`类是独立的（即，没有`Person`像 Jon Skeet 解释的那样嵌套），即使它是从它继承的，它也不具有构造函数的可见性。

只需为它们添加一个修饰符，例如`public`,`protected`或`internal`:

```
protected Person( 
```

然后你可以`base`正常调用：

```
public Resident() 
    : base() 
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:22:11.087

> 我已经尝试过基本命令，但它从来没有用过。

这不是一个真正的“命令”，但它确实有效：

```
Resident(String aIDNumberPrim, String aIDNumberSec1,String aIDNumberSec2,
         String aIDNumberSec3, String aIDNumberSec4, String aTempId,
         String aPassportNumber)
    : base(...)
{
} 
```

诚然，目前尚不清楚您将在此处传递什么，因为您的参数似乎都没有指示名称或地址等……也许您需要添加更多参数？

编辑：也正如 Adam 所指出的，您需要增加`Person`构造函数的可见性，除非`Resident`在`Person`. `Resident`如果您只需要在 的程序文本中调用构造函数，保持私有状态是可以的，`Resident`但您更有可能也希望增加它的可见性。

（作为旁注，这些参数名称很糟糕 - 为什么要在所有内容前面加上`a`？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:23:09.400

`public`如果您希望它的访问权限是公开的，您应该为构造函数添加关键字：

```
public Person(String aName, String aSurname, String aAddress1,
              String aAddress2, String aTelephone, String aFaxNumber)
{
    ...
} 
```

`internal`如果它们在同一个项目上，您也可以使用，或者`protected`，因为一个是另一个的基础，等等，但这完全取决于您真正想要访问 ctor 的修饰符。

默认访问修饰符是`private`，它不允许该类外部的任何东西访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:26:17.027

在我看来，这应该有效：

```
public class Person
{
    private String name;
    private String surname;
    private String address1;
    private String address2;
    private String telephone;
    private String faxNumber;

    public Person(String aName, String aSurname, String aAddress1, String aAddress2, String aTelephone, String aFaxNumber)
    {
        name = aName;
        surname = aSurname;
        address1 = aAddress1;
        address2 = aAddress2;
        telephone = aTelephone;
        faxNumber = aFaxNumber;
    }

public class Resident : Person
{
    private String IDNumberPrim;
    private String IDNumberSec1;
    private String IDNumberSec2;
    private String IDNumberSec3;
    private String IDNumberSec4;
    private String tempID;
    private String passportNumber;

    Resident(String aIDNumberPrim, String aIDNumberSec1, String aIDNumberSec2, String aIDNumberSec3, String aIDNumberSec4, String aTempId, String aPassportNumber) : base(...) 
```

亲切的问候，亲

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T14:30:37.027

在 Resident 的构造函数参数列表中的右括号之后，尝试在大括号前说 ': Person(...)'，在 '...' 中提供适当的参数：

```
Resident(String aName, String aSurname, String aAddress1, String aAddress2, String aTelephone, String aFaxNumber,
    String aIDNumberPrim, String aIDNumberSec1, String aIDNumberSec2, String aIDNumberSec3, String aIDNumberSec4, String aTempId, String aPassportNumber) 
: Person (aName, aSurname, aAddress1, aAddress2, aTelephone, aFaxNumber)
{

} 
```

# html - 将元素从容器中分离出来

> ID：11723417
> 
> 赞同：29
> 
> 时间：2012-07-30T14:19:56.260
> 
> 标签：html, css, position

我将所有内容都包裹在一个固定宽度的容器元素中。

但是我有一个`<div>`我想“突破”该容器以跨越页面的整个宽度。

[http://dabblet.com/gist/3207168](http://dabblet.com/gist/3207168)

![在此处输入图像描述](../Images/9ee96e6e51e77bb6762b62dd59ad09a5.png)

正如您在该示例中所看到的，我有`<div>`突破，但由于它是绝对定位的，它不会影响页面的流动......这就是我希望它做的事情。

我希望它表现得像在页面流中一样，但会扩大窗口的整个宽度。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-06-22T09:42:37.540

另一个想法，在现代浏览器中确实将其`.breakout`仅拉伸到浏览器窗口的宽度：

```
body, html {
  overflow-x: hidden;
  margin: 0;
  padding: 0;
}

div {
  padding:0.5em;
}

.container {
  width:300px;
  background-color:rgba(255,255,0,0.5);
  margin:auto;
}

.breakout {
  margin:1em -100%; /* old browsers fallback */
  margin:1em calc(50% - 50vw);
  background-color:rgba(255,0,255,0.5)
}
```

```
<div class="container">
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.

  <div class="breakout">
    Break out of container
  </div>

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
</div>
```

**编辑：**唯一的 Chris Coyier 解释[了 Limited Width Parents 中的 Full Width Containers](https://css-tricks.com/full-width-containers-limited-width-parents/)，这有点相似。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-30T14:28:11.333

也许[http://jsfiddle.net/sYv9g/1/](http://jsfiddle.net/sYv9g/1/)？

```
.wrapper {
    width:300px;
    margin:0 auto;
    background:yellow;
}
.break {
    text-align:center;
    font-weight:bold;
    background:rgba(255,0,0, 0.5);
    margin-left:-100%;
    margin-right:-100%;
}
```

```
<div class="wrapper">
    <h1>Ipsum Dapibus Pellentesque Pharetra</h1>
    <p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Etiam porta sem malesuada magna mollis euismod. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Sed posuere consectetur est at lobortis.</p>
    <div class="break">This should be full width</div>
    <p>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Maecenas sed diam eget risus varius blandit sit amet non magna. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>
    <div class="break">This should be full width</div>
    <p>Nullam id dolor id nibh ultricies vehicula ut id elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Donec ullamcorper nulla non metus auctor fringilla.</p>
    <p>Vestibulum id ligula porta felis euismod semper. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur blandit tempus porttitor.</p>
</div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T14:26:20.783

您实际上无法使其脱离包装 div，但您可以通过将包装 div 设置为页面的全宽并包装该页面上不应该包含的其他元素来模拟相同的效果您在具有黄色背景和 300 像素宽度的 div 中的“突破” div。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-26T18:29:57.140

我喜欢这种简单的技术（多亏[了用一行 CSS 将 Bust 元素从它们的容器中取出](https://codepen.io/tigt/post/bust-elements-out-of-containers-with-one-line-of-css)）：

```
margin: 0 calc(50% - 50vw) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T14:29:03.813

您可以使用负边距来实现这一点。

```
.wrapper {
    width:300px;
    margin:0 auto;
}
.break {
    width: 600px;
    margin-left:-150px;
} 
```

唯一的问题是您需要指定两个元素的宽度。

编辑：voodoo417 的解决方案会更好......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-03T22:37:25.920

在 voodoo417 的解决方案之上构建，只需添加第二个包装器并进行一些细微的修改，这可以正确完成：

```
 .outer-wrapper {
        overflow:hidden;
        min-width:300px;
    }
    .wrapper {
        width:300px;
        margin:0 auto;
        background:yellow;
    }
    .break {
        text-align:center;
        font-weight:bold;
        background:rgba(255,0,0, 0.5);
        margin-left:-9999px;
        margin-right:-9999px;
    }
```

```
 <div class="outer-wrapper">
    <div class="wrapper">
        <h1>Ipsum Dapibus Pellentesque Pharetra</h1>
        <div class="break">This should be full width</div>
    </div>
    </div>
```

这是改编的jsfiddle：

[http://jsfiddle.net/v53vv78d/2/](http://jsfiddle.net/v53vv78d/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-06T00:27:37.820

考虑到容器宽度的更好版本。

```
.wrapper {
    width:300px;
    margin:0 auto;
    background:yellow;
}
.break {
    text-align:center;
    font-weight:bold;
    background:rgba(255,0,0, 0.5);
    margin-left: calc((-100vw + 300px)*.5);
    margin-right: calc((-100vw + 300px)*.5);
} 
```

[https://jsfiddle.net/Lxnmr01h/](https://jsfiddle.net/Lxnmr01h/)

# mysql - MySQL Cluster 与 MySQL 的性能对比

> ID：11723419
> 
> 赞同：2
> 
> 时间：2012-07-30T14:20:00.743
> 
> 标签：mysql, database-cluster

我正在研究一个数据库是主要瓶颈的项目。由于种种原因，我们希望尽可能避免在编程级别上进一步优化。我们希望有一种解决方案可以潜在地提高我们网站的速度。我们目前正在使用 MySQL，并且我读过 MySQL Cluster 将整个数据库存储在内存中。

现在，我们有一台数据库服务器。我正在考虑使用 MySQL 集群运行两台同样强大的服务器，这些服务器具有足够的总内存来将整个数据库存储在内存中。话虽如此，你们是否注意到从 MySQL 到 MySQL 集群的速度有相当大的提升？更具体地说，数据库的内存存储是否真的大大加快了数据库的速度？另外，如果表已经存储在内存中，索引的作用是什么？我们的查询涉及很多子查询和连接，如果这有影响的话。我知道运行基准测试是真正了解的唯一方法，但我想在深入研究这个项目之前获得一些背景信息。

# javascript - chrome setSelectionRange() 在 oninput 处理程序中不起作用

> ID：11723420
> 
> 赞同：10
> 
> 时间：2012-07-30T14:20:01.150
> 
> 标签：javascript, google-chrome, cross-browser

我正在使用一些自动完成代码。`setSelectionRange()`用于选择`oninput`事件处理程序中已完成的文本。它至少在 Firefox 14 中有效，但在 Chrome(6, 17) 中无效。

演示问题的简化代码片段如下所示：

```
<input type='text' oninput='select()' /> 
```

```
function select(e){
    var s = this.value;
    if (s.length)
        this.setSelectionRange(s.length-1, s.length);
} 
```

我在chrome中调试了代码，结果发现在执行后首先选择了文本`setSelectionRange()`，但后来选择消失了。

如果我将处理程序绑定到`onclick`而不是`oninput`，像这样：

```
<input type='text' onclick='select()' /> 
```

然后两个浏览器都可以正常工作。

谁能给我一些线索以在 Chrome 中进行选择？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T15:04:45.837

您的代码存在一些问题，即传递给`select()`函数的参数是错误的：`this`将是`window`并且`e`将是未定义的。此外，`select()`在属性中用作函数名称`oninput`会导致问题，因为 select 将解析为`select()`输入本身的方法。更好的方法通常是在脚本中设置事件处理程序，而不是通过事件处理程序属性。

但是，即使在纠正了这些问题之后，问题仍然存在。`input`该事件可能在浏览器在 Chrome 中移动插入符号之前触发。一个简单的解决方法是使用计时器，尽管这是次优的，因为用户有可能在计时器触发之前输入另一个字符。

演示：http: [//jsfiddle.net/XXx5r/2/](http://jsfiddle.net/XXx5r/2/)

代码：

```
<input type="text" oninput="selectText(this)">

<script type="text/javascript">
function selectText(input) {
    var s = input.value;
    if (s.length) {
        window.setTimeout(function() {
            input.setSelectionRange(s.length-1, s.length);
        }, 0);
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-17T09:41:58.213

```
 var $input = document.getElementById('my_id');

    $input.onfocus = function () {
       $input.setSelectionRange(0, 7);
    }
    $input.focus(); 
```

```
<input type='text' id='my_id' value="My text for example." />
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-10T12:11:54.157

例如，在 Angular 上，您可以这样做：

```
@ViewChild('input', { static: false }) inputElement: ElementRef;

focus(){    
    setTimeout(() => {
        this.inputElement.nativeElement.focus();
        this.inputElement.nativeElement.setSelectionRange(this.valueInput.length, this.valueInput.length);
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-23T11:29:07.197

我认为`setTimeout`不是最好的解决方案。您只需要在使用前调用事件处理程序`setSelectionRange`。我用这个：

```
e.currentTarget.value = previousValue;
onChange(e);
e.currentTarget.setSelectionRange(startPosition, endPosition); 
```

# android - 如何在靠近 NFC（智能卡）时停止我的 Android NFC 应用程序循环

> ID：11723421
> 
> 赞同：1
> 
> 时间：2012-07-30T14:20:03.000
> 
> 标签：android, nfc

我的 Android NFC 应用程序在完成读取智能卡后，会再次显示相同的 NFC 标签信息，并由操作系统再次启动。事实上，如果你不移动手机，它就会进入一个永久循环。正在读取的数据量确实需要一两秒钟，所以最后它会重新开始。（这在我的 Galaxy S2 Gingerbread 和我的 ICS 上的 S3 上相当常见）

**当 NFC 源（智能卡）没有改变并且没有从手机上移开时，如何阻止它重复？**

我的活动有一个意图过滤器：

```
 <intent-filter >
                <action android:name="android.nfc.action.TECH_DISCOVERED" />
                <category android:name="android.intent.category.DEFAULT" />
                <action android:name="android.nfc.action.TAG_DISCOVERED" />
            </intent-filter>
            <meta-data
                android:name="android.nfc.action.TECH_DISCOVERED"
                android:resource="@xml/filter_nfc" /> 
```

有一份技术清单

```
 <tech-list>
     <tech>android.nfc.tech.IsoDep</tech>
 </tech-list> 
```

源代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    resolveIntent(getIntent());
}

@Override
public void onNewIntent(Intent intent) {
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent);
}

private void resolveIntent(Intent intent) {
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    final String action = intent.getAction();
    if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(action)
                 || NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)) {
        ....work
        handled = true;
    }
    if (!handled) {
        Log.e(tag, "Unknown intent " + intent);
        finish();
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:03:12.813

The only way I could solve it was to place a time check - inside the onCreate (setContentView line and resolveIntent line) and also inside the onNewIntent function.

This did not stop Android from trying to call the app again to process the NFC but my app did not do anything if it was called within 2 seconds from the last successful NFC read.

Maybe not the cleanest way but it is effective against the looping problem and passes all the tests on different devices.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:20:00.700

这是不正常的，但我也看到过类似的行为。我尝试的是启用 NFC 前台调度。这使您的应用可以完全控制传入的 NFC 意图。然后根据标签的 ID（或者可能是自上次 NFC 事件以来经过的时间），您可以决定忽略标签。

```
@Override
protected void onResume() {
  ...
  ForegroundDispatch.setupForegroundDispatch(this);
}

@Override
protected void onPause() {
  ...
  ForegroundDispatch.stopForegroundDispatch(this);
};

@Override
public void onNewIntent(Intent intent) {
  ... // check for the tag's ID or elapsed time to determine how to react
} 
```

# selenium - Selenium webdriver：如何根据自定义属性在 DOM 中查找元素

> ID：11723422
> 
> 赞同：23
> 
> 时间：2012-07-30T14:20:16.010
> 
> 标签：selenium

如何根据自定义属性在 DOM 中找到元素？

例如：

HTML 视图中不存在 DOM 属性。使用 DOM 检查器，我可以确定 Custom 属性是唯一的。

```
driver.findElement(By.id("SimpleSearch:dIndicesGrid:1:Value")).getAttribute("_celltype"); 
```

这`_celltype`是自定义属性。此属性在 HTML 视图中不可见。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T17:14:20.710

您必须通过 xpath 定位元素。

以下将查找具有值为“celltype”的 _celltype 属性的任何元素：

```
driver.findElement(By.xpath("//*[@_celltype='celltype']")) 
```

如果你知道它是什么类型的元素，你可以让它更具体。例如，如果您知道它们是 div 标签，请执行以下操作：

```
driver.findElement(By.xpath("//div[@_celltype='celltype']")) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-16T13:08:43.793

XPath 是邪恶的，你可以改用它

```
By.CssSelector("[_celltype='celltype']"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-31T11:23:52.103

通过 xPath 查找元素：

```
WebElement element = driver.findElement(By.xpath("xpath_link"));

xpath_link = //*[@_celltype='celltype']; // This is sample xpath;

System.out.println(element.getText()); 
```

这将获得“celltype”字段的文本并显示它的值。

# java - 一个接一个地播放音乐

> ID：11723423
> 
> 赞同：1
> 
> 时间：2012-07-30T14:20:20.957
> 
> 标签：java, android

我正在开发一款 Android 游戏，我想添加一种音乐播放列表。我有大约 10 个音乐文件，我希望在第一个完成后能够播放第二个，依此类推。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:25:42.203

使用[Android Mediaplayer](http://developer.android.com/reference/android/media/MediaPlayer.html) 并使用 OnCompletionListener 在其中向处理程序发送消息，然后将下一个音频文件传递给媒体播放器。

**编辑 ：**

您实际上并不需要使用处理程序。这是一个如何实现它的示例。
将您的标题和计数器保存为成员变量：

```
String[] titles = new String[] { "title1.mp3", "title2.mp3", "title3.mp3",
        "title4.mp3" };
int count = 0; 
```

这就是你的 onCompletion 监听器的样子：

```
 void onCompletion(MediaPlayer mp){
           mp.stop();
           if (count == titles.length -1) {
               count = 0;
           }
           mp.setDataSource(titles[count]);
           count++;
           mp.prepare(); 
           mp.start();
        } 
```

# php - 替换电子邮件中的回车符

> ID：11723424
> 
> 赞同：1
> 
> 时间：2012-07-30T14:20:23.507
> 
> 标签：php, html, xhtml

我试图用 PHP 中的换行符替换回车，这样我的网站版主就不必在
每次输入来自我网站的电子邮件时都输入新行。我尝试了几种不同的方法来替换换行符，但都没有奏效。我尝试过的方法是：

```
preg_replace('/\r\n?/', "<br />", $str);
eregi_replace(char(13), "<br />", $str);
str_replace("\r\n", "<br />", $str);
str_replace("\n", "<br />", $str); 
```

和 nl2br 函数。

我在谷歌上找了大约半个小时的答案，没有找到任何东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:35:37.467

来自 php.net[文档的很好的例子](http://php.net/manual/en/function.str-replace.php)

```
// Order of replacement
$str     = "Line 1\nLine 2\rLine 3\r\nLine 4\n";
$order   = array("\r\n", "\n", "\r");
$replace = '<br />';

// Processes \r\n's first so they aren't converted twice.
$newstr = str_replace($order, $replace, $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:26:42.347

你是这样测试的吗？

```
$str = str_replace( "\r\n", "<br />", $str );
$str = str_replace( "\r", "<br />", $str );
$str = str_replace( "\n", "<br />", $str ); 
```

这应该几乎总是有效。并记住始终使用`"\r"`而不是`'\r'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:28:54.800

您的正则表达式正在转义您的`r`and `n`。

代替

```
preg_replace('/\r\n?/', "<br />", $str); 
```

尝试这个：

```
preg_replace('/\\r\\n/', "<br />", $str); 
```

# c# - 读取和保存到数据库的提示

> ID：11723425
> 
> 赞同：1
> 
> 时间：2012-07-30T14:20:24.470
> 
> 标签：c#, database, sql-server-2008, data-binding

今年夏天我正在学习 C# 课程，在当前任务中我将使用数据库。非常有趣，我很想开始工作，但我现在完全迷失了（也许我的血糖很低）！根据任务的需要，我必须使用断开连接的方法，使用 DataSets 或 dataTables、DataAdapters 和 CommandBuilders 将数据库的副本加载到内存中以使用它（打开、读取和关闭），然后当我想更新数据库，做相反的事情（打开，保存和关闭）

我创建了一个 SQL Server 2008 数据库，还创建了一个表。嗯，现在怎么办！？我想我必须开始连接到数据库并选择表。从这里开始，我会欣赏一些提示。期待入手！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:35:50.890

它取决于两个参数

```
1\. your amount of data has to update

2\. the update frequency 
```

如果你觉得这两个参数很重要并且会拖慢你的应用程序，那么使用离线模式。

数据量可以减轻带宽

下面是一个例子

```
 var adapter = new SqlDataAdapter();
    var dataSet = new DataSet();

    using(var connection = new SqlConnection(connetionString))
    {
        connection.Open();
        adapter.SelectCommand = new SqlCommand("Your query", connection);
        adapter.Fill(dataSet);
        connection.Close();

        //Print results  
        for (i = 0; i <= dataSet.Tables[0].Rows.Count - 1; i++)
        {
            MessageBox.Show(dataSet.Tables[0].Rows[1].ItemArray[1].ToString());
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:36:50.607

您可以使用[`SqlConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)对象进行连接。它位于[`System.Data.SqlClient`](http://msdn.microsoft.com/en-us/library/8t72t3k4)命名空间中。当您在断开或连接的情况下工作时，您将希望熟悉这些对象。我提供的链接中有一些示例代码。

您需要一个连接字符串来传递给构造函数。如果您的数据库在本地运行，它*可能*看起来像这样。

```
string connectionString = "Data Source=localhost;Initial Catalog=TheNameOfYourDatabase;Integrated Security=SSPI";

using (SqlConnection connection = new SqlConnection(connectionString))
{
   connection.Open();
} 
```

就这么简单。由于对象 implements `IDisposable`，您可以使用该`using`语句以便对象适当地处理清理（在这种情况下，默认情况下，连接将返回到连接池）。

之后，您可以查看一下，`SqlCommand`以便开始对您的数据库发出命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:45:44.037

实际上，您有几种方法可用。从 DataReader 和 DBCommand 开始，一直到 ORMs 实体框架和 POCO。随着您提高抽象级别，它们为您做的事情越来越多，但除非您了解基础知识，否则您可以做自己想做的事情的空间越来越小。

如果我是你，我会从梯子底部开始

那就是 SqlConnection、SqlCommand、SqlParameter 和 SqlDataReader

不要走 Wally the Wizard，单击一个按钮，Visual Studio 会为您完成所有路由。它们适用于两种类型的人，一种是知道自己在做什么，一种是不想知道...

大量的教程，但如果我是你。我会得到一本像样的 C# 编程书，翻到关于数据库的章节并阅读并做，再读一遍再做。发现这些东西真的很难的人，是那些不费心去做的人。

当你这样做了，你就会知道足够多，如果你需要的话，你会回来问一些体面的问题。

# mobile - Appcelerator - 钛 | 可打开文件列表

> ID：11723430
> 
> 赞同：0
> 
> 时间：2012-07-30T14:20:36.730
> 
> 标签：mobile, titanium, appcelerator, titanium-mobile

我目前正在开发一个应用程序，其中一个可用功能是将文件下载到设备上然后打开，只有当它们是可以打开它的应用程序时。

我一直在浏览 API / Q&A / Google 并找不到任何有用的东西。

任何人有一个建议如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:21:07.177

您可以在打开文件时使用属性在列表中添加该名称并将其设置为数组，同时关闭该窗口从列表中删除并将您的数组设置为属性。

```
var objFileArray = Ti.App.Properties.getList('fileArray',[]);
objFileArray.push('File1');
Ti.App.Properties.setList('fileArray', objFileArray); 
```

# javascript - CSS 和 Javascript 可在内部服务器上工作，但不能在外部服务器上工作

> ID：11723437
> 
> 赞同：0
> 
> 时间：2012-07-30T14:20:49.527
> 
> 标签：javascript, jquery, css, internet-explorer

我正在为一个朋友做一个网站。他想要一个没有任何 Flash 的 Flash 动画风格的网站，这样它就可以在 IOS 上运行，并且他可以自己更改。我正在使用 JQuery 以及我自己的 javascript 和几个 css 文件。现在的问题是该网站在所有浏览器上的我的内部开发服务器上都能完美运行。当我将它上传到我的子域以向他展示进度时，它不再适用于 IE。所有其他浏览器都可以完美运行，但不是 IE，只有当它在互联网上时。我已经通过了 w3 验证，没有任何错误。所有java和一切都在IE上启用，我很难过。这会发生在其他人的 IE 上还是仅在我的计算机上？

[不完整的演示](http://s421215073.onlinehome.us/13thlegion/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:27:49.630

看起来您遇到了 JavaScript 错误。

```
 $('div#top').animate ({bottom: '250px', }, timeDuration); 
```

那个杂散的逗号让 IE 不开心~~（甚至是 IE9）~~。

当然，如果您也从本地服务器提供页面，那会导致 IE 出现问题。

（哦，等等；我的 IE 卡在兼容模式下……无论如何，那些杂散的逗号肯定会吓坏某些版本的 IE。）

# .net - 如何在 .NET MVC 应用程序中包含社交媒体共享？

> ID：11723439
> 
> 赞同：7
> 
> 时间：2012-07-30T14:20:57.497
> 
> 标签：.net, asp.net-mvc-3, twitter

我有一个允许用户添加日记条目的应用程序。在日记条目托盘下，我想要 Twitter、Facebook 和 Google+ 图标，它们将在每个相应的服务上共享条目。

我可以使用什么库来处理这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T14:25:18.717

不需要图书馆。每项服务都提供易于使用的代码片段，以包括其服务的共享按钮。将每个代码片段放在您想要的视图中。

*   [Facebook 喜欢按钮](https://developers.facebook.com/docs/reference/plugins/like/)
*   [推特推文按钮](https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/overview.html)
*   [Google+ 按钮](https://developers.google.com/+/plugins/+1button/) *（Google+ 将于 2019 年 3 月 7 日停用，因此很快就会失效）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-29T00:24:54.570

如果您不想使用不同的 JavaScript 文件来共享您的内容，那么您可以简单地使用此代码，它很快，因为无需等待从不同站点加载 JavaScript 文件，您需要下载不同的图像很容易在网上买到

```
//facebook share
<a href="https://www.facebook.com/sharer/sharer.php?    
     u=@Url.Encode(Request.Url.ToString())&t=@Url.Encode(Title)" 
     target="_blank">
     <img src="/images/social-buttons/Facebook.png">
</a>

// twitter
<a href="https://twitter.com/intent/tweet?
   url=@Url.Encode(Request.Url.ToString())&text=@Url.Encode(Title)" 
   target="_blank" title="Tweet">
   <img src="/images/social-buttons/Twitter.png">
</a>

// google
<a href="https://plus.google.com/share?
   url=@Url.Encode(Request.Url.ToString())" 
   target="_blank" title="Share on Google+">
   <img src="/images/social-buttons/GooglePlus.png">
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T17:21:26.773

是的，每个服务提供商都在他们的开发者区提供代码，但是你需要一个一个地单独研究和分析，这里是一个链接。

**领英分享：**

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-onsuccess="lnksuccess" data-onerror="error" data-url="<%=strShareUrl %>"></script>

**CallBack Function :**
 <script>
  function lnksuccess(url) {
    alert("url = " + url + "  shared successfully");
  }
  function lnkerror(url){
    alert("something goes wrong in url sharing");
  }
</script> 
```

查看更多信息（参考）。

[用于 facebook、twitter、asp.net 中的 linkdin 的社交分享按钮](http://www.dotnetbull.com/2012/06/social-share-buttons-in-aspnet.html)

# eclipse - 你能在 SWT 中创建一个可调整大小的控件吗？

> ID：11723440
> 
> 赞同：0
> 
> 时间：2012-07-30T14:21:11.600
> 
> 标签：eclipse, swt

我目前正在使用 Eclipse 中的 SWT 包。是否可以在复合控件中创建可调整大小的控件。

例如，如果我有一个想要展开的树控件，但为了查看子树项目，我想“单击并拖动”树的边框来调整它的大小，就像在[Eclipse 帮助网站](http://help.eclipse.org)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:31:16.310

我认为 SWT [Sash](http://www.eclipse.org/swt/snippets/#sash)是您正在寻找的。

[这](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratesaSash.htm)是一个关于如何使用它的好例子。

**编辑**：

刚刚发现[SashForm](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/SashForm.html)更容易使用。请参阅[LINK](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SashFormExample.htm)以获得一个很好的示例。

# windows - 你如何在 windows git bash 中设置 java 版本？

> ID：11723442
> 
> 赞同：19
> 
> 时间：2012-07-30T14:21:17.867
> 
> 标签：windows, git-bash

如何设置 Java 版本以在 Windows git bash 中使用？它是否通过环境变量工作？Java -version 在 dos 命令提示符中提供了另一个版本，而不是在 git bash 中...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2018-07-20T02:22:30.837

假设您想尝试其他 Java 版本，但不想更改 Windows 环境变量。

脚步：

*   转到您的主文件夹。即 C:\Users\MyAccountName
*   编辑 .bashrc 文件并在下面添加以下代码。

    ```
    #For example:
    export JAVA_HOME='/c/Program Files (x86)/Java/jdk1.8.0_45'
    export PATH=$JAVA_HOME/bin:$PATH 
    ```

*   .bashrc 和 .bash_profile 是在 git-bash 安装期间创建的文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-30T14:40:48.213

你没有设置java版本。您正在寻找`$PATH`(bash) 和`%PATH%`(Windows/DOS/cmd.exe) 环境变量。当您运行 command`java -version`时，shell 会搜索 上的目录`$PATH`以定位`java`程序并使用给定的参数运行它。如果您在不同的 shell 中得到不同的结果，那么这意味着您有不同的 PATH，因此会找到不同的 Java 安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-29T17:10:38.010

1.  转到系统属性 -> 高级 -> 环境变量
2.  新系统变量
3.  “变量名”：路径
4.  '变量值'： C\Program Files\Java\jdk-9\bin （或任何你的路径）
5.  重启 Git Bash

（视窗 10）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-09T11:19:23.380

是的，环境变量会影响 Git Bash 中使用的 java。但是如果设置 $JAVA_HOME 和 $PATH 变量*似乎*不起作用，试试这个：

1.  转到安装 Git Bash 的文件夹（通常是 C:\Program Files\Git）
2.  转到 usr/bin 文件夹，即 C:\Program Files\Git\usr\bin
3.  那里应该有一个名为“java”的文件。将其重命名为“notjava”。
4.  现在按照其他答案中的描述设置 PATH 变量。IE

    导出 JAVA_HOME='{yourjavahome}'

5.  重新启动 Git Bash。

这对我有用。我正在使用适用于 Windows v2.17.0 的 Git。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T05:29:21.933

转到您要临时设置java路径的位置。运行以下命令。导出 PATH="/c/Program Files/Java/jdk-11.0.1/bin:$PATH"

使用您想要的 jdk 版本代替 jdk-11.0.1

# mysql - MySQL查询以匹配两个表之间的日期和空值

> ID：11723443
> 
> 赞同：1
> 
> 时间：2012-07-30T14:21:19.793
> 
> 标签：mysql, date, join

我有两个`MySQL`这样的表：

```
desc students;
+---------------------------+---------------+------+-----+---------+
| Field                     | Type          | Null | Key | Default |
+---------------------------+---------------+------+-----+---------+
| student_id                | int(11)       | NO   | PRI | NULL    |
| student_firstname         | varchar(255)  | NO   |     | NULL    |
| student_lasttname         | varchar(255)  | NO   |     | NULL    |
+---------------------------+---------------+------+-----+---------+

desc studentabsence;
+---------------------------+-------------+------+-----+---------+
| Field                     | Type        | Null | Key | Default |
+---------------------------+-------------+------+-----+---------+
| student_absence_id        | int(11)     | NO   | PRI | NULL    |
| student_id                | int(11)     | YES  |     | NULL    |
| student_absence_startdate | date        | YES  |     | NULL    |
| student_absence_enddate   | date        | YES  |     | NULL    |
| student_absence_type      | varchar(45) | YES  |     | NULL    |
+---------------------------+-------------+------+-----+---------+ 
```

然后我有这个`MySQL`- 查询列出学生。

询问：

```
SELECT s.student_id, s.student_firstname, s.student_lastname,
 a.student_absence_startdate, a.student_absence_enddate, a.student_absence_type
FROM students s LEFT JOIN studentabsence a ON a.student_id = s.student_id 
```

每当学生有缺勤信息时，都会显示在列中

`a.student_absence_startdate`
`a.student_absence_enddate`
`a.student_absence_type`

有时一个学生在表格中有两行或更多行，`studentabsence`然后他被列出两次。

**我的问题**是是否有任何方法可以在查询中更具体。我想列出所有学生`db.students` **，**如果有`db.studentabsence`一个**日期**介于 startdate 和 enddate 之间的行（例如 2012-07-30），请使用此缺勤信息列出学生一次。仅当日期匹配时。

所以像...

```
... WHERE (a.student_absence_startdate OR a.student_absence_enddate) IS NULL OR
   '2012-07-30' BETWEEN a.student_absence_startdate AND
    a.student_absence_enddate ... 
```

这有点难以解释，所以如果您需要更多信息，请告诉我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:44:07.467

我认为您可以在子选择/子视图上使用 JOIN 来安排它：

```
SELECT s.student_id, s.student_firstname, s.student_lastname,
a.student_absence_startdate, a.student_absence_enddate, a.student_absence_type
FROM students s 
LEFT JOIN 
(SELECT * FROM studentabsence a1 WHERE ('2012-07-30' BETWEEN a1.student_absence_startdate AND a1.student_absence_enddate) ) a 
ON a.student_id = s.student_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:49:17.870

我会使用具有默认值的参数（01/01/1900 00:00:00），如下所示：

```
AND  ( a.student_absence_startdate >= @P_startdate  OR  @P_startdate = '01/01/1900 00:00:00' )  
AND  ( a.student_absence_enddate <= @P_enddate  OR  @P_enddate = '01/01/1900 00:00:00' ) 
```

# sql - 查找重复的名称sql

> ID：11723449
> 
> 赞同：2
> 
> 时间：2012-07-30T14:21:44.033
> 
> 标签：sql, duplicates

```
SELECT COUNT(organization.ID) 
FROM organization 
WHERE name in ( SELECT name FROM organization GROUP BY name HAVING count( name ) >1 )
AND organization.APPROVED=0 
AND organization.CREATED_AT>'2010-07-30 10:30:21' 
```

我正在尝试查找重复项，但此查询需要很长时间，大约 5-6 秒。有没有另一种方法可以在不使用我的方法的情况下找到重复项？谢谢。

**子查询：0.28 秒。一切都是 5.98 秒。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:24:17.260

```
SELECT organization.name, COUNT(organization.ID)
  FROM organization
 WHERE organization.APPROVED=0
   AND organization.CREATED_AT>'2010-07-30 10:30:21'
 GROUP BY name
HAVING count(organization.id) > 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:25:33.547

无需在`WHERE`子句中使用查询。您可以使用 a `GROUP BY`and a`HAVING`子句来完成此操作：

```
SELECT COUNT(o.ID) 
FROM organization o
WHERE o.APPROVED=0 
   AND o.CREATED_AT>'2010-07-30 10:30:21'
GROUP BY o.Name
HAVING COUNT(o.name) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:25:37.527

为什么不这样做：

```
SELECT COUNT(organization.ID)
FROM organization 
WHERE organization.APPROVED=0 
AND organization.CREATED_AT>'2010-07-30 10:30:21'
GROUP BY organization.name
HAVING count(organization.name) > 1; 
```

# internet-explorer-8 - knockout.js：在 a 上使用无容器 foreach在 Internet Explorer 8 中失败 在 RP Niemeyer 的文章 Knockout.js Performance Gotcha #3 - All Bindings Fire Together 中，提供了一种构建下拉列表的方法： <select data-bind="value: selectedOption">ID：11723451 赞同：8 时间：2012-07-30T14:21:54.497 标签：internet-explorer-8, knockout.js 回答 #1 赞同：8 时间：2012-07-30T14:40:48.560 是的，这绝对是一个问题。我将不得不更新帖子。IE 将从选择中删除评论。 这是我们在 github 上看到的一个类似的问题：https ://github.com/SteveSanderson/knockout/issues/578 一种解决方案是使用 Michael Best 的repeat绑定：https ://github.com/mbest/knockout-repeat 。 它允许您做的一件事是在不同的上下文中多次重复单个元素。因此，在这种情况下，它的行为类似于无容器语法，只是没有注释。 重复示例：http: //jsfiddle.net/rniemeyer/QjVNX/ 您还可以选择使用文章 ( isolatedOptions) 中的其他技术，除非您需要对选项元素进行更多控制。 回答 #2 赞同：3 时间：2013-05-03T14:49:23.043 虽然这是一个问题，但这里确实没有必要使用“foreach”。Knockout 包括一个选择的“选项”绑定，它在 IE8 中非常好用。 请在此处查看文档：http: //knockoutjs.com/documentation/options-binding.html <select data-bind="value: selectedOption"> <!-- ko foreach: options --> <option data-bind="attr: { value: id }, text: name"></option> <!-- /ko --> </select> 可以改为： <select data-bind="value: selectedOption, options: options, optionsText: function(item) {return item.name}, optionsValue: function(item) {return item.id}></select> 希望这可以帮助。</select>

# reporting-services - 在 SSRS 2008 R2 中重新创建行组

> ID：11723459
> 
> 赞同：1
> 
> 时间：2012-07-30T14:22:20.653
> 
> 标签：reporting-services, ssrs-2008, ssrs-2008-r2

有没有办法删除然后重新创建行组？我们有一份被认为是“腐败”的报告（因为我们已从 SSRS 2008 升级到 R2）。根据我们的研究，重新创建行组可能会为我们解决这个问题。

我找到了这些链接：

[http://msdn.microsoft.com/en-us/library/ms170712.aspx](http://msdn.microsoft.com/en-us/library/ms170712.aspx)

[http://technet.microsoft.com/en-us/library/dd255263.aspx](http://technet.microsoft.com/en-us/library/dd255263.aspx)

但我似乎无法在没有创建报告不需要的额外行/列的情况下创建组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:40:08.473

经过几个星期试图解决 .rdl 文件中的问题后，我们向 Microsoft 开了一张票。

为此向我们提供了解决方法；我们可以通过右键单击该行 > 插入行 > 外部组 - 上方来从多个组中删除一行。

这有效地在其中一个组之外创建了重复行。然后我们在新创建的行上执行上述步骤。反过来，我们创建了 4 个重复的行（每行比前一行少一个组），并保留最后创建的不属于任何组的行！

# ruby-on-rails - 链接到表并返回值

> ID：11723462
> 
> 赞同：0
> 
> 时间：2012-07-30T14:22:40.280
> 
> 标签：ruby-on-rails, activerecord, belongs-to, has-one

我正在尝试查询表并在满足条件时返回一个值。

进度模型

```
class Schedule < ActiveRecord::Base
  belongs_to :result
  attr_accessible :result_id
end 
```

结果模型

```
class Result < ActiveRecord::Base
  has_one :schedule
  attr_accessible :against, :for, :schedule_id
end 
```

时间表.haml

```
- if schedule.result
  Result
- else
  No Result 
```

我得到的只是**没有结果**，即使我知道为调度 id 加载了结果

任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:58:28.677

看看这个网站：

[http://rubyquicktips.com/post/3096503536/how-to-check-if-objects-or-relations-exist](http://rubyquicktips.com/post/3096503536/how-to-check-if-objects-or-relations-exist)

您可能想尝试类似的东西

```
schedule.result.any? 
```

另外，尝试：

```
raise schedule.result.to_yaml 
```

查看此语句返回的确切内容

# image - 无损 JPEG - 找不到任何示例图像、DICOM 文件

> ID：11723466
> 
> 赞同：6
> 
> 时间：2012-07-30T14:22:49.947
> 
> 标签：image, jpeg, dicom, lossless

我目前正在处理无损 JPEG 文件（不是 JPEG-LS）。很难找到任何文件来测试我的应用程序。

特别是我需要包含重置间隔标记、多个 DC 霍夫曼表、多个场景或注释标记的文件。

你知道我在哪里可以找到任何无损 JPEG 文件吗？你自己有什么可以分享的吗？

在此先感谢 Witek。

编辑：我也可以使用使用此压缩标准的 DICOM 文件（标签 (0002,0010) 传输语法 UID = 1.2.840.10008.1.2.4.70）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:39:19.527

在以下[站点上](http://barre.nom.fr/medical/samples/)，您可以找到一些 DICOM 无损 JPEG 文件，尤其是传输语法为 1.2.840.10008.1.2.4.57 和 .70 的文件。请参阅*传输语法*部分，以便轻松识别哪些数据集提供了请求的传输语法。

[NEMA DICOM](ftp://medical.nema.org/medical/dicom/DataSets/WG04/) FTP 站点上还有许多不同风格的无损 JPEG 图像。有关各种数据集的更多详细信息，请参阅[自述文件](ftp://medical.nema.org/medical/dicom/DataSets/WG04/compsamples_README.txt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T12:24:35.350

这是[大量](http://www.creatis.insa-lyon.fr/~jpr/PUBLIC/gdcm/gdcmSampleData/)dicom 示例图像：其中有一些 JPEG 无损图像。一些子文件夹的图像不是有效的 DICOM，但通常会记录在案。由同一维护者也有这个[链接列表](http://gdcm.sourceforge.net/wiki/index.php/Sample_DataSet)。

无损 JPEG 最广泛用于 XA (cathlab) 电影图像。这些总是灰度的，并且以 8 位或 10 位图像的形式存在。

您还可以设置免费的 PACS，例如 DCM4CHEE 或 conquest，将未压缩的图像发送给它，然后让它们转发 jpeg-lossless 压缩的图像。这样做的好处是您可以创建不同颜色空间、位深度、平面/逐像素等的图像。色彩空间很有趣：人们有时会错误地转换色彩空间，比如 Jpeg 有损，这是你不应该做的。

这些图像很可能都不需要像重启标记这样的高级东西。如果您想检查这是否有效，请使用 IJG 实现创建比特流并将它们打包在 DICOM 中。

编辑：请注意那里有[错误的图像](https://groups.google.com/forum/#!topic/comp.protocols.dicom/QUcNzkRJmxA)。我正在使用基于 IJG 代码的实现。

# css - 为 CSS sprite 中包含的小图像制作动画是否与仅为该图像制作动画一样有效？

> ID：11723468
> 
> 赞同：0
> 
> 时间：2012-07-30T14:23:04.983
> 
> 标签：css, performance, image, load, sprite

我即将检查我的 CSS 并将图像编译成精灵，我想知道什么是最有效的方法。目前，我有一堆微小的、~10x10 像素的图像需要进行动画处理。我想知道是否将这些图像添加到尺寸更大（~1000x1000px）的精灵中，然后对它们进行动画处理会导致 CPU 负载/性能的任何差异。这是动画小 div 或动画只有一小部分（指定的背景位置）可见的巨型 div 之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:29:36.240

最好为精灵设置动画。

对所有图像的 1 个服务器请求，一旦缓存它就没有问题。

我要注意的是您打算放入的动画效果的数量，因为做太多可能会导致运行缓慢（特别是 css3 3d 变换）。

你有没有想过使用`canvas`动画而不是容器 div？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:31:23.707

即使您只是交换类名，动画 GIF 的处理级别也比 JavaScript 低。动画 GIF 不会受到垃圾收集延迟的影响，并且开销更少。

在精灵上使用动画 GIF。无论如何，文件大小不会有太大差异。

# excel - 从数据库返回的 Excel SUM 动态范围

> ID：11723470
> 
> 赞同：1
> 
> 时间：2012-07-30T14:23:08.897
> 
> 标签：excel, sum, formula

我是 excel 新手，我正在尝试编写一个 excel 公式，在其中对单列中的所有值求和。数据是从 .net 应用程序返回的，因此我使用模板文件和每列作为后缀，例如**%%=sso.qty**。因此，只有在通过应用程序运行报表时，每列中才有实际数据。

我想要一个公式，该公式将动态添加列中的所有值，而不管单元格范围如何。因此，如果我的后缀在单元格 K10 中，公式如何知道根据有多少行数据来调整范围？

有谁知道这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:27:39.113

假设公式将放置在不同的列中，您可以`SUM`通过指定没有行引用的列来指定整列，如下所示：

```
=SUM(K:K) 
```

# javascript - 使用 jQuery 在具有多个类的 div 的内容中搜索嵌套在元素中的字符串

> ID：11723472
> 
> 赞同：0
> 
> 时间：2012-07-30T14:23:14.840
> 
> 标签：javascript, jquery, html, css, markup

我希望能够在`span`具有 and 类的 div 中查看第一个，`t_links`并`buy`检测字符串是否`Account`出现。如果是这样，那么我想在 jQuery/JavaScript 中设置一些跟踪代码。

`span`这个 div 中总会有一个。如何在内容中搜索`Account`使用 jQuery 的实例？

```
<div class="t_links buy">
  <span><a class="" href="https://www.ayrshireminis.com/account/login/">Account</a></span>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:27:01.363

:contains 是您要查找的内容：

```
$(".t_links.buy span:first:contains('Account')") 
```

[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

编辑：首先添加@adeneo 指出。这将确保它是您正在查看的第一个跨度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:26:53.567

尝试（见[演示](http://jsfiddle.net/T5Pr4/)）

```
​$(document).ready(function () {
    if($('.t_links.buy span').text().indexOf('Account')) {
        // code
    }
});​ 
```

或者

```
​$(document).ready(function () {
    if($(".t_links.buy span:contains('Account')").length) {
        // code
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:30:15.317

跨度完全匹配：

```
if ($("span:first", ".t_links.buy")​.filter(function() {
    return $(this).text() === 'Account';
})​.length) {
    //set tracking code
} 
```

跨度包含：

```
if ($("span:first", ".t_links.buy")​.filter(function() {
    return $(this).text().toLowerCase().indexOf('account') != -1;
})​.length) {
    //set tracking code
} 
```

如果只有一个`span`，你可以放下`:first`。

# php - 如何以人类格式（时间前......等）但以多语言风格获得时差

> ID：11723474
> 
> 赞同：0
> 
> 时间：2012-07-30T14:23:29.207
> 
> 标签：php, zend-framework

Zend 中是否有任何视图助手或库，例如，我可以通过它获得两个时间戳之间的差异，但会自动将“y li a”放在时间前面。例如，这是法国前一段时间的标准......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:33:37.867

答案是否定的，但也许这会有所帮助：

```
<?php

/**
 * Return a human readable diff between two times (e.g. 3 years 4 months 8 days 3 hours)
 * This is locale aware and supports automatic translation
 *
 * @category   View Helpers
 * @author     Drew Phillips <drew [at] drew [.] co.il>
 * @copyright  None
 * @license    BSD License http://opensource.org/licenses/bsd-3-clause
 * @version    1.0
 * @link       http://drew.co.il
 */
class My_View_Helper_TimeDiff extends Zend_View_Helper_Abstract
{
    protected static $_locale       = null;
    protected static $_translations = null;

    /**
     * Return the diff between two times in human readable format
     * @param int    $timestamp    The timestamp of the time to diff
     * @param string $format       The format string used to control which date units are output (TODO: improve by incrementing lower values (i.e. add 12 to months if there is 1 year but years are not displayed))
     * @param int    $now          The timestamp used as the current time, if null, the current time is used
     * @return string              The human readable date diff in the language of the locale
     */
    public function timeDiff($timestamp, $format = null, $now = null)
    {
        if (null === $format) $format = '%y %m %d %h %i';
        if (null === $now)    $now    = time();

        if (!$this->isValidTimestamp($timestamp)) {
            throw new InvalidArgumentException('$timestamp parameter to timeDiff is not a valid timestamp');
        } else if (!$this->isValidTimestamp($now)) {
            throw new InvalidArgumentException('$now parameter to timeDiff is not a valid timestamp');
        } else if ($timestamp > $now) {
            throw new InvalidArgumentException('The value given for $timestamp cannot be greater than $now');
        }

        if (self::$_locale == null) {
            $locale = null;
            $list   = array();

            try {
                $locale = Zend_Registry::get('Zend_Locale');
            } catch (Zend_Exception $ex) {
                $default = Zend_Locale::getDefault(); // en if nothing set

                try {
                    $locale = new Zend_Locale();
                } catch (Zend_Locale_Exception $ex) {
                    $locale = new Zend_Locale($default);
                }
            }

            self::$_locale = $locale;
            self::$_translations = Zend_Locale::getTranslationList('unit', $locale);
        }

        $table    = self::$_translations;
        $past     = new DateTime(date('Y-m-d H:i:s', $timestamp));
        $current  = new DateTime(date('Y-m-d H:i:s', $now));
        $interval = $current->diff($past);

        $parts = $interval->format('%y %m %d %h %i %s %a');

        $weeks = 0;
        list($years, $months, $days, $hours, $minutes, $seconds, $total_days) = explode(' ', $parts);

        /* uncomment to handle weeks
        if ($days >= 7) {
            $weeks = (int)($days / 7);
            $days  %= 7;
        }
        */

        $diff = array();

        if (strpos($format, '%y') !== false && $years > 0) {
            $diff[] = str_replace('{0}', $years, $table['year'][($years != 1 || !isset($table['year']['one']) ? 'other' : 'one')]);
        }

        if (strpos($format, '%m') !== false && $months > 0) {
            $diff[] = str_replace('{0}', $months, $table['month'][($months != 1 || !isset($table['month']['one']) ? 'other' : 'one')]);
        }

        if (strpos($format, '%d') !== false && $days > 0) {
            $diff[] = str_replace('{0}', $days, $table['day'][($days != 1 || !isset($table['day']['one']) ? 'other' : 'one')]);
        }

        if (strpos($format, '%h') !== false && $hours > 0) {
            $diff[] = str_replace('{0}', $hours, $table['hour'][($hours != 1 || !isset($table['hour']['one']) ? 'other' : 'one')]);
        }

        if (strpos($format, '%i') !== false && $minutes > 0) {
            $diff[] = str_replace('{0}', $minutes, $table['minute'][($minutes != 1 || !isset($table['minute']['one']) ? 'other' : 'one')]);
        }

        return implode(' ', $diff);
    }

    protected function isValidTimestamp($timestamp)
    {
        $ts = (int)$timestamp;
        $d  = date('Y-m-d H:i:s', $ts);

        return strtotime($d) === $ts;
    }
} 
```

注册后，在您的视图中这样调用它：

```
<?php echo $this->timeDiff($object->pastTimestamp) ?> $this->_xlate('ago'); 
```

示例输出：

```
1 année 5 mois 15 jours 21 heures 56 minutes il ya
1 год 5 месяца 15 дня 22 часа 1 минута назад 
```

请注意，助手不处理在某些语言（法语）中位于差异前面的“之前”部分，而在其他语言（英语）中则位于末尾。您还需要在自己的翻译文件中定义此翻译字符串，ZF 没有针对它的翻译。理想情况下，该逻辑将内置到助手中，但我没有这样做。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:27:12.417

时间戳是一个数字，您可以简单地从结束时间减去开始时间来获得差异。你可以这样做：

```
public function timeDiff($timestampFrom, $timestampTo) {

$timeDiff = new Zend_Date($timestampTo - $timestampFrom, Zend_Date::TIMESTAMP);

$output = "il y a ";

//Check the number of days:
if($timeDiff->getTimestamp > 60*60*24) $output .= $timeDiff->get(Zend_Date::DAY).' jours, ';
//Check the hours
if($timeDiff->getTimestamp > 60*60) $output .= $timeDiff->get(Zend_Date::HOUR).' heures, ';
//Check the minutes
if($timeDiff->getTimestamp > 60) $output .= $timeDiff->get(Zend_Date::MINUTE).' minutes et ';
//Check the seconds
$output .= $timeDiff->get(Zend_Date::SECOND)." secondes";

return $output;
} 
```

Matthieu 在他的评论中是对的，法语中没有“y li a”这样的词。您可能的意思是“il y a”。;)

# macos - 将 Lion 应用程序部署到 10.6 异常

> ID：11723476
> 
> 赞同：2
> 
> 时间：2012-07-30T14:23:31.643
> 
> 标签：macos, cocoa, exception, osx-lion, osx-snow-leopard

我有一个基于 Lion 的 OS X 应用程序（使用最新的 sdk），但部署设置为 10.6（能够在 Snow Leo 上运行）。启用 ARC。

我想在 Show Leopard 上运行应用程序。应用程序在 Lion 上运行良好。

但是当我在 10.6 中启动应用程序时，我在控制台中得到了这个异常：

```
NSRLEArray objectAtIndex:effectiveRange: Out of bounds 
```

仅此而已。没有堆栈或其他任何东西。就这一行。

我可以做些什么来澄清情况？问题似乎更奇怪，因为在 Lion 中一切正常。

# mysql - MYSQL 库存槽（将项目添加到下一个槽）

> ID：11723479
> 
> 赞同：2
> 
> 时间：2012-07-30T14:23:43.310
> 
> 标签：mysql

```
 $slt = mysql_query("select Slot, ItemId, UserId, max(Slot) Slot
  from useritems
  group by UserId");    

  while ($sloot = mysql_fetch_assoc($slt))
{
 Echo "<br>Items with biggest slots are: " . $sloot['ItemId'] . " from user " . $sloot['UserId']. "- in slot-". $sloot['Slot'];
} 
```

这是桌子

```
Idi Quantity    ItemId  UserId  Slot    ExpirationDate 
```

输出最小的插槽...为什么？

1.我想向我展示每个用户最大的库存槽，所以当我向他的库存添加新物品时，我可以在下一个槽中添加..从示例用户 Paul 有 5 件物品占用槽 1、2、3、4 ,5 并且下一个项目将在插槽 6 上。

2.当用户将他的物品移动到插槽 1,2,4,5,6 时，下一个添加的物品将在插槽 3 上

我做了很多搜索，但我找不到自己:) PS：这个游戏`m making it`只是为了好玩..但也许有一天会是一个很棒的游戏:)（梦想，梦想:)））

编辑：

SQLFIDDLE 非常好，谢谢:) 这正是我需要学习一些 SQL
表用户项

[useritems 表 IMAGE](http://img822.imageshack.us/img822/4097/useritems.png)
[项目表](http://img821.imageshack.us/img821/9796/itemstable.png)

我的 Echo 向我展示了：

```
Id = 1 and it should be 3; user=4(good); slot=4(good)
Id = 1 and it should be 2; user=5(good); slot=2(good) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:36:42.603

也许是这样的：

```
select userid, itemid, max(slot) from useritems where itemid is not null and quantity>0
group by userid, itemid 
```

如果您将表格脚本与一些数据共享，那么帮助您会更容易。

您可以使用：[http ://sqlfiddle.com/](http://sqlfiddle.com/)

编辑：

那这个呢？itemid=0 表示插槽空闲？所以 min(slot) 将是用户的第一个空闲槽。

```
select userid, min(slot) from useritems where itemid=0 group by userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:33:30.273

我找到了！:) 我只是忘记选择 UserId=my_id 的数据，但只有当相应用户拥有超过 3 个项目时，它才会向我显示正确的输出......

```
$slt = mysql_query("SELECT * FROM useritems WHERE Slot=(select max(Slot) from useritems) and UserId='$id'"); 
```

和`$id = $_SESSION['id'];`

```
$slt = mysql_query("
    SELECT * FROM `useritems` 
    WHERE UserId='$id' AND Slot=(select max(Slot) 
    from useritems where UserId='$id')
");` 
```

EDIT2：我找到了所有搜索的最佳方法，但我不知道如何使用 WHERE 子句 userId='$id'

```
$slt2 = mysql_query("select l.Slot + 1 as start
    from useritems as l
    left outer join useritems as r on l.Slot + 1 = r.Slot
    where r.Slot is null and l.UserId=4;
") or die(mysql_error());   ` 
```

使用此查询，项目应放置在 Slot 2（缺少），但它的不正确 Slot 6（对于 UserId=4 的用户来说是最高的）

最后这是最后一次编辑

```
$slt2 = mysql_query("SELECT  Slot + 1 as start
   FROM    useritems mo
   WHERE   NOT EXISTS
   (
       SELECT  NULL
       FROM    useritems mi 
       WHERE   mi.Slot = mo.Slot + 1 AND mi.UserId = '$id'  
   )ORDER BY Slot LIMIT 1
") or die(mysql_error());   ` 
```

这就是我正在搜索的内容。：X

# android - 虚拟键盘可见时无法查看第一个 Edittext

> ID：11723483
> 
> 赞同：3
> 
> 时间：2012-07-30T14:24:04.200
> 
> 标签：android

在线性布局中，我有四个 Edittext 字段。打开虚拟键盘时，我无法查看第一个 edittext 字段。我可以从第二个视图滚动，第一个视图部分可见。如何解决这个问题。在此先感谢。

```
<ScrollView android:layout_height="fill_parent"
    android:layout_width="fill_parent" android:id="@+id/scrlLogin"
    android:layout_below="@+id/Title" android:background="@drawable/screenbackground"
    android:scrollbars="none">
    <LinearLayout android:id="@+id/linearLayout1"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="vertical" android:layout_gravity="center">

             ..............
</LinearLayout >
</ScrollView > 
```

我的屏幕链接在这里

[普通画面](http://i45.tinypic.com/1zl8ync.png)

[带虚拟键盘](http://i45.tinypic.com/10qdnon.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:10:47.903

不要浪费你的时间只要放

```
android:windowSoftInputMode="adjustPan" 
```

在主要活动的 AndroidManifest.xml 中。

# visual-studio - 在哪里可以找到 VS 2012 RC 的商业智能项目模板？

> ID：11723488
> 
> 赞同：2
> 
> 时间：2012-07-30T14:24:18.540
> 
> 标签：visual-studio, sql-server-2008-r2, business-intelligence

安装 VS 2012 RC 终极版时，不包含任何商业智能项目模板。在哪里下载 VS 2012 RC 的这些模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:00:50.047

您无法在 VS 2012 本身中打开 SSRS/SSIS/SSAS 解决方案，您必须使用 SSDT (Sql Server Data Tools) 一个 VS 2012 shell，它附带 Sql Server 2012 的安装。

# joomla1.5 - joomla！1.5 会话过期时自动重定向到主页而不是登录页面

> ID：11723490
> 
> 赞同：1
> 
> 时间：2012-07-30T14:24:24.483
> 
> 标签：joomla1.5, session-timeout

在 Joomla！1.5，当用户的会话过期时，应用程序应该重定向到主页。目前，它被重定向到登录页面。这个怎么做？我必须修改哪个文件？谢谢！

# powershell - 如何使用管理单元从 Windows 资源管理器启动 PowerShell

> ID：11723495
> 
> 赞同：1
> 
> 时间：2012-07-30T14:24:45.790
> 
> 标签：powershell, registry, windows-explorer, tfs-power-tools

[这个问题](https://stackoverflow.com/questions/183901/how-to-start-powershell-from-windows-explorer)回答了如何从 Windows 资源管理器启动 PowerShell。

我想从 Windows 资源管理器启动 PowerShell，并预先加载了我的 TFS Shell 管理单元。

我用这个命令**创建了一个批处理文件（*RunPowerShell.bat*）并将它放在*System32*目录中：

```
C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -PSConsoleFile "C:\Program Files (x86)\Microsoft Team Foundation Server 2010 Power Tools\tfshell.psc1" -noexit -command ". 'C:\Program Files (x86)\Microsoft Team Foundation Server 2010 Power Tools\TFSS 
```

这可行，但我想在 Windows 资源管理器地址栏中键入“PowerShell”。

是否可以通过键入“PowerShell”从 Windows 资源管理器加载此管理单元？

**上面显示的命令来自菜单选项中我的 PowerShell 控制台链接的“目标”框：

![在此处输入图像描述](../Images/2968cf04f82b0fc20a787bca98e8a13c.png)

* * *

# 更新

Chris N 让我朝着正确的方向前进。

我必须做一些事情才能让它工作，所以我把它们放在这里：

[创建并注册以下注册表文件](http://social.msdn.microsoft.com/Forums/en-US/tfspowertools/thread/a116799a-0476-4c42-aa3e-45d8ba23739e/)(*.reg)，以便 PowerShell 了解 TFS PowerShell DLL 文件：

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell\1\PowerShellSnapIns\Microsoft.TeamFoundation.PowerShell]
"PowerShellVersion"="2.0"
"Vendor"="Microsoft Corporation"
"Description"="This is a PowerShell snap-in that includes the Team Foundation Server cmdlets."
"VendorIndirect"="Microsoft.TeamFoundation.PowerShell,Microsoft"
"DescriptionIndirect"="Microsoft.TeamFoundation.PowerShell,This is a PowerShell snap-in that includes the Team Foundation Server cmdlets."
"Version"="10.0.0.0"
"ApplicationBase"="C:\\Program Files (x86)\\Microsoft Team Foundation Server 2010 Power Tools"
"AssemblyName"="Microsoft.TeamFoundation.PowerTools.PowerShell, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
"ModuleName"="C:\\Program Files (x86)\\Microsoft Team Foundation Server 2010 Power Tools\\Microsoft.TeamFoundation.PowerTools.PowerShell.dll"
"CustomPSSnapInType"="Microsoft.TeamFoundation.PowerTools.PowerShell.TFPSSnapIn" 
```

在记事本中，使用以下命令创建一个新文件：

```
if ( (Get-PSSnapin -Name Microsoft.TeamFoundation.PowerShell -ErrorAction SilentlyContinue) -eq $null )
{
    Add-PsSnapin Microsoft.TeamFoundation.PowerShell
} 
```

如果我从 Windows 菜单中的链接加载，IF[语句可防止错误。](https://stackoverflow.com/questions/1477994/how-to-check-if-powershell-snap-in-is-already-loaded-before-calling-add-pssnapin)

然后，将该文件保存为：

```
%windir%\system32\WindowsPowerShell\v1.0\profile.ps1 
```

这将使命令对 Windows 上的所有 shell 和所有配置文件运行；如果您需要更小的范围，请阅读 Chris 的答案中的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:32:52.687

阅读关于 PowerShell 配置文件的精彩文章*[Windows PowerShell 配置](http://msdn.microsoft.com/en-us/library/windows/desktop/bb613488(v=vs.85).aspx)*文件。根据您设置的配置文件，您可以影响在该机器上启动的任何 PowerShell 实例。

它应该可以从以下脚本加载管理单元（以影响所有用户和所有 shell）：

```
%windir%\system32\WindowsPowerShell\v1.0\profile.ps1 
```

# java - 获得经度的公式

> ID：11723503
> 
> 赞同：1
> 
> 时间：2012-07-30T14:25:12.110
> 
> 标签：java, latitude-longitude

我正在使用 GIS（WGS84）在 Java 中实现模拟。我想把我的代理人转移到对方身上。纬度很容易**1 m 是`1/111000`度**。但是我想在经度侧移动一个代理，我必须考虑地球曲率（我猜！）。

我在 Wiki 上找到了这个公式：`a= (2*pi*r*cos(phi))/360`

```
r  : radius
phi: latitude
a  : should be the distance 
```

我现在尝试将距离乘以`1/a`，但位置不合逻辑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:20:19.327

如果您向东移动 1 公里，然后向北移动 1 公里，您将到达与向北移动 1 公里然后向东移动 1 公里不同的位置。

在极端情况下（北极附近的特定纬度），向东移动 1 公里将使您回到原来的位置。

您将纬度和纵向“偏移”分开的概念是错误的，因为它不适合球体/椭球体表面的位置。

无论如何，如果您正在寻找给定纬度的地球周长，并且球面模型对于您的需求来说足够准确，请看[这里](http://mathforum.org/library/drmath/view/54158.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:44:24.207

计算两点之间的距离是您的目标吗？

我会使用：

```
d(P1, P2) = ((r · pi)/180)) · cos−1 (cos(a1) · cos(a2) · cos(b1 − b2) + sin(a1) · sin(a2)) 
```

其中 d 是距离，r 是地球半径，cos-1 是反余弦值，a1,a2,b1,b2 是您的 2 个代理的角度

如果您知道垂直和水平距离（l 和 h），您可以简单地计算`b1 = a1 - l/(2*pi*r*cos(angleFromEquator)*360)`，`a2 = h/(2*pi*r*360) + b2`如果您使用的是球坐标。

如果您在赤道（纬度 = 0）并且向东移动 1.000 公里，您最终会到达（1.000 公里/40.000 公里）* 360° = 9° 再向东。

在 45° 的纬度上，这将是 (1.000 km / 28.000 km) * 360° = 12.8°

# android - 在按钮中居中文本

> ID：11723509
> 
> 赞同：0
> 
> 时间：2012-07-30T14:25:32.560
> 
> 标签：android, text, center

我的按钮文本有问题。当应用程序在大屏幕的移动设备上运行时，一切都很好。为了在小屏幕上也能看到所有组件，我在按钮和其他组件上设置了权重。按钮压缩后，文本不在中心，而是在按钮上（我猜压缩从底部切割垂直尺寸。）

xml文件：

```
 <LinearLayout
            android:id="@+id/layout_image"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="@drawable/word_milk"
            android:gravity="center"
            android:orientation="vertical"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/iv_cross"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/cross_small"
                android:visibility="invisible" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_buttons"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:focusable="true"
            android:gravity="center_vertical"
            android:orientation="vertical"
            android:visibility="visible" >

            <Button
                android:id="@+id/b1"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="11dp"
                android:layout_weight="1"
                android:background="@drawable/shape_swarthy_green"
                android:gravity="center"
                android:maxHeight="45dp"
                android:onClick="B1Click"
                android:textColor="@color/Color_White"
                android:textSize="@dimen/TextSize_word" />

            <Button
                android:id="@+id/b2"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_gravity="center"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="11dp"
                android:layout_weight="1"
                android:background="@drawable/shape_swarthy_green"
                android:gravity="center"
                android:maxHeight="45dp"
                android:onClick="B2Click"
                android:textColor="@color/Color_White"
                android:textSize="@dimen/TextSize_word" />

            <Button
                android:id="@+id/b3"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_gravity="center"
                android:layout_marginBottom="11dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="11dp"
                android:layout_weight="1"
                android:background="@drawable/shape_swarthy_green"
                android:gravity="center"
                android:maxHeight="45dp"
                android:onClick="B3Click"
                android:textColor="@color/Color_White"
                android:textSize="@dimen/TextSize_word" />
        </LinearLayout>
    </LinearLayout> 
```

屏幕截图：我在第一个按钮上设置了文本大小 24sp，在第二个按钮上设置了 26sp，在第三个按钮上设置了 28sp，并带有文本“llllll”，以便更好地说明行为。

![在此处输入图像描述](../Images/17a1dc8a6ed50429fab5a4add916039e.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:56:14.853

设置按钮属性 android:gravity="center" 设置属性到 java 文件也 btn.setGravity(Gravity.CENTER);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:52:43.513

尝试填充希望它对你有用......

```
<Button
            android:id="@+id/b2"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_gravity="center"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="11dp"
            android:layout_weight="1"
            android:background="@drawable/shape_swarthy_green"
            android:gravity="center"
            android:maxHeight="45dp"
            android:onClick="B2Click"
            android:textColor="@color/Color_White"
            android:textSize="@dimen/TextSize_word"

            // add padding here

            android:paddingTop="10dip"
            android:paddingBottom="10dip"                 

/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:03:03.723

我的猜测是您没有更改文本大小，因此在其他设备上，文本尝试适合按钮，但由于按钮太小而不能。如果是这种情况，请根据屏幕为文本大小设置不同的尺寸。

但是，由于这里没有代码或屏幕截图，我无法确定是否是这种情况。

# php - json curl GET请求Drupal 7

> ID：11723513
> 
> 赞同：1
> 
> 时间：2012-07-30T14:25:37.990
> 
> 标签：php, json, curl, drupal-7

我正在尝试使用 drupal 7 中的 curl 方法从外部 url 检索 json 数据。所以我有检索数据的函数：

```
////jSON URL which should be requested
$gry_str = "?timezone=".urlencode(date_default_timezone_get())
            ."&dateFrom=".date('Y-m-d')."&dateTill=".date('Y-m-d');

$json_url = 'http://www.example.com/json/financial-calendar.json'.$gry_str;
// Initializing curl
$ch = curl_init(); 

//Configuring curl options 
$options=array(CURLOPT_RETURNTRANSFER => true, 
                CURLOPT_HTTPHEADER => array('Content-type: application/json'),
                CURLOPT_URL => $json_url);

//Setting curl options
curl_setopt_array($ch, $options);

//Getting resutls
$results = curl_exec($ch); //Getting json result string
curl_close($ch); 
```

当我尝试加载或刷新页面时，萤火虫会显示标题和参数，但不显示响应和 html。它还显示状态 200 Ok。

当我尝试回显 url 并在 Web 浏览器上对其进行测试时，它会正确显示数据数组。我试图将检索到的数据显示到 html 表中，但没有成功。

我不知道错误在哪里，或者即使我在drupal中以正确的方式这样做。请帮助..我迷路了。

# php - 什么是 $this->$object =& new $class in php

> ID：11723522
> 
> 赞同：1
> 
> 时间：2012-07-30T14:26:01.363
> 
> 标签：php, oop

> **可能重复：**
> [php =& 中的引用赋值运算符](https://stackoverflow.com/questions/1768343/reference-assignment-operator-in-php)

我想创建一个博客，这是控制器文件，但我不明白这一行

`$this->$model =& new $model;` 这行做什么？

```
 protected $_model;
    protected $_controller;
    protected $_action;
    protected $_template;

     function __construct($model, $controller, $action) {

        $this->_controller = $controller;
    $this->_action = $action;
    $this->_model = $model;

    $this->$model =& new $model;
    $this->_template =& new Template($controller,$action);

}

function set($name,$value) {
    $this->_template->set($name,$value);
}

function __destruct() {
        $this->_template->render();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:28:13.637

`$model`变量被插值。说“欢迎”。这被内插为

```
$this->Welcome = & new Welcome; 
```

在`&`PHP 5 中没有任何作用，应该被删除。在 PHP 4 中，成员必须维护对对象实例的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:48:41.837

这一行意味着它的开发人员不知道 PHP5 中的内存（__destruct 仅在 PHP5 中）是如何工作的。

# c# - 如何通过自定义属性选择类的某些属性

> ID：11723526
> 
> 赞同：1
> 
> 时间：2012-07-30T14:26:06.173
> 
> 标签：c#, reflection, attributes, custom-attributes

我有一个 3 属性的类。

```
class Issuance
{
    [MyAttr]
    virtual public long Code1 { get; set; }

    [MyAttr]
    virtual public long Code2 { get; set; }

    virtual public long Code3 { get; set; }
} 
```

我需要通过我的自定义属性（`[MyAttr]`）选择这个类中的一些属性。

我使用了`GetProperties()`但这会返回所有属性。

```
var myList = new Issuance().GetType().GetProperties();
//Count of result is 3 (Code1,Code2,Code3) But count of expected is 2(Code1,Code2) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T14:27:50.493

只需使用 LINQ 和一个`Where`子句[`MemberInfo.IsDefined`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.isdefined.aspx)：

```
var myList = typeof(Issuance).GetProperties()
                             .Where(p => p.IsDefined(typeof(MyAttr), false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:30:53.293

[http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getcustomattributes.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getcustomattributes.aspx)

试试这个 - 基本上对属性做一个 foreach ，看看你是否得到每个属性的属性类型。如果这样做，该属性具有以下属性：

例如

```
foreach(var propInfo in new Issuance().GetType().GetProperties()) 
{
    var attrs = propInfo.GetCustomAttributes(typeof(MyAttr), true/false); // Check docs for last param

    if(attrs.Count > 0)
      // this is one, do something
} 
```

# android - 在非 Activity 类中声明本机函数

> ID：11723527
> 
> 赞同：0
> 
> 时间：2012-07-30T14:26:10.410
> 
> 标签：android, android-ndk

我想知道是否可以加载库并在 Activity 以外的类中声明/调用本机函数。我问的原因是因为我的应用程序的结构方式，我有一个单独的静态类，它包含我所有不同活动的所有信息。类似于使用 Singleton 方法。

现在，我的初始活动始终保持打开状态，其他活动从第一个活动调用本机方法。我是否可以将所有本机方法添加到静态类中，以便在离开时关闭初始 Activity？

```
public class StaticClass {
    static {
        System.loadLibrary( "NativeLibrary" );
    }

    // I also am not sure if the static modifier goes before or after native.
    public native static void nativeVoidMethod();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:40:18.783

考虑使用[服务](http://developer.android.com/reference/android/app/Service.html)。我想它可以帮助你。SDK 文件夹中有示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:32:51.233

是的，这是完全可能的。

# jquery - 带复选框的手风琴活动栏

> ID：11723537
> 
> 赞同：0
> 
> 时间：2012-07-30T14:26:39.713
> 
> 标签：jquery

我在 jquery 中创建了以下手风琴：

但是我需要在手风琴按钮中添加一个复选框，但是当我单击该复选框时，我不希望隐藏的面板向下滑动。

这是示例：

[http://jsfiddle.net/zidski/NU7Gp/4/](http://jsfiddle.net/zidski/NU7Gp/4/)

如何停止单击复选框以触发该功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:29:36.340

您可以使用事件[stopPropagation()](http://api.jquery.com/event.stopPropagation/)来防止事件冒泡

```
$('input:checkbox').click(function(e){
    e.stopPropagation();  
}); 
```

[http://jsfiddle.net/NU7Gp/5/](http://jsfiddle.net/NU7Gp/5/)

# windows - 仅在批处理文件的日志文件中输出某些结果

> ID：11723541
> 
> 赞同：1
> 
> 时间：2012-07-30T14:26:46.857
> 
> 标签：windows, logging, batch-file

批处理文件相对较新，所以请帮帮我；）。我想要做的是创建一个自定义的日志文件。简单的例子：

```
ipconfig >> ip.log 
```

这将显示所有 TCP/IP 相关信息。

假设我只需要用户查看 IP 和默认网关，因此输出 ip.log 中的结果应如下所示：

```
IPv4 Address: xxx.xxx.xxx.xxx
Default Gateway: xxx.xxx.xxx.xxx 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:13:27.200

通常，您会为此目的使用[过滤器](http://en.wikipedia.org/wiki/Filter_%28software%29)。您想过滤某些字符串，因此`findstr`命令是自然选择：

```
ipconfig | findstr /c:"IPv4 Address" /c:"Default Gateway" >>ip.log 
```

# java - 通过用户输入在数组中添加和排序元素

> ID：11723543
> 
> 赞同：0
> 
> 时间：2012-07-30T14:26:48.170
> 
> 标签：java

我的程序在第一个元素进入数组后停止。你可以帮帮我吗？这是代码：抱歉，我现在已经做了一些更改

```
 import java.io.*;
             import java.util.Scanner;
           public class QueueTest
          { private static  Scanner scan =new Scanner(System.in);
               public static void main(String[] args)
                   {
              ArrayQueue queue = new ArrayQueue();
              System.out.println("insert :" +
            " P: to print the array "+
            "S: to sort "+
            "E: to empty"); 
            do
             {
        if (userInput.startsWith("Y")) {
            System.out.println("insert the value of element");
            int vl = scan.nextInt();
            System.out.println("insert the description");
            String p = scan.next();
            System.out.println("insert true or false");
            boolean vlf = scan.nextBoolean();
            queue.shtoElement(new QueueElement(vl, p, vlf));
        } else if (userInput.startsWith("P")) {
            queue.shfaqArray();//display the array
        } else if (userInput.startsWith("S")) {
            queue.rendit();//sort the array
        } else if (userInput.startsWith("E")) {
            queue.Empty();//empty array
        } 
        System.out.println("Insert:" + " P: to display the array "
                + " S: to sort array "
                + " E: to empty");
        userInput = scan.next();
        } while (!userInput.equalsIgnoreCase("exit"));
              }
                 } 
```

这是类 ArrayQueue

```
 public class ArrayQueue implements Queue

                             {
                //build the queue
          QueueElement[] tabela= new QueueElement[MADHESIA];
            QueueElement element= new QueueElement();
          //test if queue is empty
             public boolean isEmpty()
                {

               boolean empty = true;
                 for(int k =0;k<tabela.length;k++)
                      {
                            if(tabela[k] !=null)
                        empty =false;
                   break;
                                }
                            return empty;
                                          }

            public boolean isFull()
                {
                    boolean full=false;
                    for(int k=0;k<tabela.length;k++)
            {
        if(tabela[k]!=null)
            full=true;
        break;
            }
    return full;
        }

    //sort the array
        public void rendit()
           { 
    QueueElement temp=tabela[0];
    for(int i=0;i<tabela.length;i++)
    {
        for(int j=i+1;j<tabela.length;j++)
            if(tabela[j]!=null)
            {
            if(tabela[j].compareTo(tabela[i])==1)
            {
                tabela[j]=temp;
                tabela[i]=tabela[j];
                temp=tabela[i];
            }
            else 
                {
                nrElementeve++;
                }
            }
        if(tabela[i].getVlefshmeria()==false)
        {
            hiqElement(i,temp);
             }
            }
               }
    // add element into the array

           public void shtoElement(QueueElement el)
                  {     
                if(isEmpty())
        {
        tabela[0]=el;
        }
    else
         {
            for(int i=0;i<tabela.length;i++) 
               {    
                   if(tabela[i]!= null && (el.compareTo(tabela[i])==0))
                       {
    System.out.println("element can't be added into array cause it exists !");
                        }              
                   {
                       if(isFull())
                       {                        
                            int index=tabela.length;
                            tabela=rritMadhesine(tabela);
                            tabela[index]=el;
                     }  
                 else
                 {
            for(int j=0;j<tabela.length;j++)
        {
        if(tabela[j]==null)
                  tabela[j]=el;
        break;
        }
                        }
               }
         }
               }

             } 
       //find max of array

         public QueueElement gjejMax()
            {
          QueueElement max = tabela[0];
           for (QueueElement element :tabela)
              {
    if(element.getValue() > max.getValue())
        {
        max =element;
        }
    return max;
           }
          return max;
                } 
            //find min of array
            public QueueElement gjejMin()
                  {
                    QueueElement min= tabela[0];
                     for(QueueElement element : tabela)
                  {
                  if(element.getValue()< min.getValue())
               {
                    min=element;
                           }
                        return min;
                              }
                              return min;
                                }

             //remove element from array

             public void hiqElement(int indeksi, QueueElement temp) 
                   {
                      if(tabela.length > 0)
                      {
                  if(gjejMax().compareTo(temp)==0 || gjejMin().compareTo(temp)==0)
               {
                   System.out.println("element can't be removed!");
                   }
                     else
            {
                  for(int i=indeksi;i<tabela.length;i++)
                        {
                      tabela[i]=tabela[i+1];
                               }
                    }
                          nrElementeve--;
                                 }
                          }

        //empty array

           public void Empty()
                {
            tabela= new QueueElement[MADHESIA];
                           }

                       //display the array

                  public  void shfaqArray()
                     {
              for(int i=0;i< tabela.length;i++)
               {
              if(tabela[i]!=null)
             {
                System.out.println(tabela[i]);
            }
                else
      break;
                  }
                }

         //increase the length of array

         public static QueueElement [] rritMadhesine(QueueElement[] array){  
            QueueElement[] tab=new QueueElement[array.length+2];  
              return tab; 
                    }
                     private int nrElementeve;
                 private static final int MADHESIA = 10;
                      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:35:16.703

不知道是什么`ArrayQueue`，`QueueElement`但是...

似乎您正在阅读用户输入，然后通过决策树来根据该输入决定要做什么。但在每一点，您都在重新阅读用户输入：

```
 if(scan.next().startsWith("Y"))
     {
        System.out.println("Jepni vleren e elem");
        vl=scan.nextInt();
        System.out.println("Jepni pershkrimin  e elem");
        p=scan.next();
        System.out.println("Jepni vlefshmerine e elem");
        vlf=scan.nextBoolean();
        queue.shtoElement(new QueueElement(vl,p,vlf));
     }
     else
     {
        if(scan.next().startsWith("P"))
           queue.shfaqArray();
     }
     if(scan.next().startsWith("E"))
        queue.Empty();
     if(scan.next().startsWith("S"))
        queue.rendit();
     else
     {
        break;
     } 
```

我认为您想要更多类似的东西：

```
 String userInput = scan.next();
     if(userInput.startsWith("Y"))
     {
        System.out.println("Jepni vleren e elem");
        vl=scan.nextInt();
        System.out.println("Jepni pershkrimin  e elem");
        p=scan.next();
        System.out.println("Jepni vlefshmerine e elem");
        vlf=scan.nextBoolean();
        queue.shtoElement(new QueueElement(vl,p,vlf));
     }
     else if(userInput.startsWith("P"))
        queue.shfaqArray();
     else if(userInput.startsWith("E"))
        queue.Empty();
     else if(userInput.startsWith("S"))
        queue.rendit();
     else
     {
        break;
     } 
```

您在哪里读取用户输入一次 ( `String userInput = scan.next();`)，然后根据`userInput`变量决定要做什么，而不是每次都重新扫描。此外，看起来您可能`else`在中间的某个地方遗漏了几个语句。

# objective-c - 不鼓励使用 beginAnimations

> ID：11723545
> 
> 赞同：13
> 
> 时间：2012-07-30T14:26:54.613
> 
> 标签：objective-c, ios

meronix 最近通知我，`beginAnimations`不鼓励使用 of。通读`UIView`类参考，我发现这确实是真的 - 根据 Apple 类参考：

> 在 iOS 4.0 及更高版本中不鼓励使用此方法。您应该使用基于块的动画方法来指定您的动画。

我看到大量其他方法（我经常使用）也“不鼓励”，这意味着它们将在 iOS 6 中出现（希望如此），但最终可能会被弃用/删除。

**为什么不鼓励使用这些方法？**

作为旁注，现在我`beginAnimations`在各种应用程序中使用，最常见的是在显示键盘时向上移动视图。

```
//Pushes the view up if one of the table forms is selected for editing
- (void) keyboardDidShow:(NSNotification *)aNotification
{
    if ([isRaised boolValue] == NO)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.25];
        self.view.center = CGPointMake(self.view.center.x, self.view.center.y-moveAmount);
        [UIView commitAnimations];
        isRaised = [NSNumber numberWithBool:YES];
    }
} 
```

不确定如何使用基于块的方法复制此功能；一个教程链接会很好。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T14:33:31.007

他们感到气馁，因为有更好、更清洁的选择

在这种情况下，所有块动画都会自动将您的动画更改（`setCenter:`例如）包装在开始和提交调用中，这样您就不会忘记。它还提供了一个完成块，这意味着您不必处理委托方法。

Apple 在这方面的文档非常好，但作为一个例子，要以块的形式制作相同的动画，它会是

```
[UIView animateWithDuration:0.25 animations:^{
    self.view.center = CGPointMake(self.view.center.x, self.view.center.y-moveAmount);
} completion:^(BOOL finished){
}]; 
```

ray wenderlich 也有一篇关于块动画的好帖子：[链接](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)

另一种方法是考虑块动画的可能实现

```
+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations
{
    [UIView beginAnimations];
    [UIView setAnimationDuration:duration];
    animations();
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:36:41.693

在 UIView 上查看[这个方法](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111)，它非常简单。现在最棘手的部分是不允许一个块有一个指向自身的强指针：

```
//Pushes the view up if one of the table forms is selected for editing
- (void) keyboardDidShow:(NSNotification *)aNotification
{
  if ([isRaised boolValue] == NO)
  {
    __block UIView *myView = self.view;
    [UIView animateWithDuration:0.25 animations:^(){
      myView.center = CGPointMake(self.view.center.x, self.view.center.y-moveAmount);
     }];
    isRaised = [NSNumber numberWithBool:YES];
  }
} 
```

# azure - 90 天测试 Iaas Azure 优惠：如何计算 VM 停止时的成本

> ID：11723547
> 
> 赞同：0
> 
> 时间：2012-07-30T14:27:00.693
> 
> 标签：azure, virtual-machine, iaas

我一直在做一些测试，并意识到当我停止 VM 时，我会收到一个红色警告，说它仍然会产生费用。但在什么基础上？

此外，在我创建的一些 VM 上，系统无缘无故地开始欺骗并在几个小时内达到 98% 的 CPU，无法停止它或连接 RDP。虚拟机完全死机了，直到几个小时后，控制面板的停止命令才成功。希望我不会为此被指控？谁能够决定我的虚拟机是否正常或像疯马一样愚弄？

此外，是否有任何软件允许将我的虚拟机从 Azure 转移到我的本地系统，并在 Azure 上删除它们以停止收费？进行简单的备份，以后可以恢复/重新启动它们？或者在我自己的 hyper-V 中运行它们？

此致

CS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:37:49.963

即使您的虚拟机已停止，您仍然有为您的虚拟机保留的资源（想想存储空间、内存、CPU 等），并且这些资源不能“出售”给其他任何人。删除 VM 将释放这些资源，您将不再需要付费。

请记住，虚拟机仍处于预览阶段，这意味着有时情况可能会变糟。是的，您将为此付费，但在预览期间您可以获得 33% 的折扣（更多信息请点击此处：[https](https://www.windowsazure.com/en-us/pricing/details/) ://www.windowsazure.com/en-us/pricing/details/ ）。

VM 的永久性磁盘作为页 blob 存储在存储帐户中。使用 Azure Storage Explorer、CloudXplorer、CloudBerry 等工具，您可以下载这些 VHD 文件并将它们简单地安装在 Hyper-V 中（您需要记住，如果您想在-前提）。

请注意，如果您只是删除 VM，则不会删除磁盘（它们将保留在您的存储帐户中）。在这种情况下，您只需支付存储费用（非常便宜）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T12:54:25.970

VM 的价格取决于它们的大小和性质（prenium 与否）。此外，您必须为存储付费，但 120GB 磁盘并未全额计费，仅有效使用空间计费。

您可以使用[IaaS Managament Studio](http://iaas.ao-is.com/)轻松计算您的 Blob 磁盘成本，并查看指向 azure 定价页面的链接。

# ajax - 如果方法只需要 ajax 调用，会返回什么错误？

> ID：11723548
> 
> 赞同：3
> 
> 时间：2012-07-30T14:27:09.310
> 
> 标签：ajax, http, http-status-codes

如果动作只希望通过 AJAX 使用，但在没有适当的 ajax 标头的情况下调用，它应该返回什么 HTTP 状态？我觉得我应该指出一些错误，但我真的找不到合适的错误。

我猜最好是 405 Method not allowed，但是如果例如 ajax GET 请求返回内容，而普通 GET 会返回 405，那就很奇怪了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:36:45.207

您**可以满足**请求，但您拒绝这样做，因为它不在 AJAX 中，所以我认为适当的错误是 403 - 禁止。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4)

无论如何，我认为任何错误代码如果附有清晰的解释，都不会奇怪。

# iphone - 比较图像 URL

> ID：11723550
> 
> 赞同：0
> 
> 时间：2012-07-30T14:27:15.340
> 
> 标签：iphone, ios, cocoa-touch

嗨，我在这里有一组代码，用于比较图像的 URL。这是从图书馆来的。一个多图像选择器，我知道在这些代码中，otherUrls 是选择的图像，而 selfUrls 是照片库/相机胶卷包含的图像。

有人可以帮助我，使其成为快捷方式，不与每个 URL 进行比较，直接跳到它，或快速比较。希望有人可以帮助我。导致当它与所有 selfUrls 进行比较时，它会崩溃。由于图片太多。

```
- (BOOL)isEqual:(id)other
{
  if (other == self)
  return YES;
  if (!other || ![other isKindOfClass:[self class]])
  return NO;

  ALAsset *otherAsset = (ALAsset *)other;
  NSDictionary *selfUrls = [self valueForProperty:ALAssetPropertyURLs];
  NSDictionary *otherUrls = [otherAsset valueForProperty:ALAssetPropertyURLs];
  return [selfUrls isEqualToDictionary:otherUrls];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:42:57.387

根据我对您的问题的理解，这相当简单。我不会为您编写确切的代码，但会给您一些指示。

首先，我们需要找到相机胶卷 URL 的格式（这样我们就知道要跳过哪些格式）。

因此，为此创建一个简单的调用来启动相机胶卷。它将有一个`didFinishPickingMediaWithInfo`我们将使用的委托方法。它返回与您选择的图像相关的信息。我们可以轻松拉取图片的 URL。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
     [self dismissModalViewControllerAnimated:YES];

     //Get the image url
     NSURL *assetURL = [info objectForKey:UIImagePickerControllerReferenceURL];

     //Convert url to string
     NSString *urlString = [url absoluteString];

    //Print it out
    NSLog(@"Our string format = %@", urlString);
} 
```

现在我们知道了相机胶卷 URL 的格式。你可以做的就是看着并说，“好的，从相机胶卷中提取的每个 URL 的前 10 个字符都是相同的”。当您循环检查您的 URL 时，请检查前 10 个字符。如果它们与相机胶卷格式不同，那么您就知道它*不是*来自相机胶卷（满嘴）。

希望这可以帮助。

# r - 在 R 的 for 循环中使用 paste() 的输出作为对象

> ID：11723551
> 
> 赞同：1
> 
> 时间：2012-07-30T14:27:17.873
> 
> 标签：r, for-loop, model, build-automation, paste

我想为 48 个 GLM（包括模型系数、R2 等）构建一个结果矩阵。我虽然通过使用循环调用模型对象，该循环使用和函数`for`迭代地调用它们，这会创建一个与模型对象同名的变量。想象一下这些是模型对象：`paste()``mget()`

```
var1_ds1_1<-glm(var1~var_ds1)
var1_ds2_1<-glm(var1~var_ds2)
var1_ds3_1<-glm(var1~var_ds3) 
```

当我创建一个名称来调用对象`paste()`并`mget()`自动创建一个与模型对象名称相同的对象名称时，我的问题出现了（在这个简单的例子`mget(paste ("var1",table.row))`中应该导致`var1_ds1_1`，但我无法提取模型系数或任何其他参数。

```
for (tab.row in 1:48) {
     result.matrix[tab.row,]<-mget(paste ("var1_ds",table.row,"_1"))$coef[1] # An example to extract the linear coefficient
} 
```

我的问题是：如何自动生成模型对象的名称以将其参数存储到新的结果矩阵中？

新矩阵应该是：

```
Row Variable Dataset Slope P-Value R2
 1  Var 1    1       1.3   0.001   50%
 2  Var 1    2       0.8   0.004   32%   
 .    .      .        .      .      .
48  Var n    n        .      .      . 
```

提前致谢。

# android - 在 Scene2d 中，当一个动作完成时，它会从 Actor 中移除，但不会放回池中

> ID：11723565
> 
> 赞同：2
> 
> 时间：2012-07-30T14:27:56.637
> 
> 标签：android, libgdx, scene2d

在 Scene2d 中，当一个动作完成时，它会从 Actor 中移除，但不会放回池中。

**动作类**

```
/** Sets the actor this action will be used for. This is called automatically when an action is added to an actor. This is also
     * called with null when an action is removed from an actor. When set to null, {@link #reset()} is called.
     * <p>
     * This method is not typically a good place for a subclass to query the actor's state because the action may not be executed
     * for some time, eg it may be {@link DelayAction delayed}. The actor's state is best queried in the first call to
     * {@link #act(float)}. For a TimedAction, use TimedAction#initialize(). */
    public void setActor (Actor actor) {
        this.actor = actor;

    }

    /** Resets the optional state of this action to as if it were newly created, allowing the action to be pooled and reused. State
     * required to be set for every usage of this action or computed during the action does not need to be reset.
     * <p>
     * The default implementation calls {@link #restart()}. Also, if the action has a {@link #setPool(Pool) pool} then the action is
     * {@link Pool#free(Object) returned} to the pool.
     * <p>
     * If a subclass has optional state, it must override this method, call super, and reset the optional state. */
    public void reset () {
        restart();
        if (pool != null) {
            pool.free(this);
            pool = null;
        }
    } 
```

似乎 Action reset() 方法（这是发送到池的唯一位置）（1）当 Actor 的操作数组被清除时，它永远不会被调用，并且随后不会发生对池的备份。 ..

(1) - 在以前的版本中，我们可以覆盖 finish() 方法并将 Action 发送到池中，但该方法不再可用...

当我尝试将 Action 类扩展到这个时，我遇到了这个问题：

**TimelineAction.class**

```
/**
 * Timeline action runs a Timeline (separate from the TweenManager to avoid a second manager/loop cycle)
 * with Scene2d
 */
public class TimelineAction extends Action {

    private static final Pool<TimelineAction> pool = new Pool<TimelineAction>() {

        @Override
        protected TimelineAction newObject() {

            Gdx.app.log("LOG", "TimelineAction action = new TimelineAction();");        
            TimelineAction action = new TimelineAction(); 

            return action;
        }

    };  

    private Timeline timeline;
    private boolean done;

    /**
     * Get instance from pool.
     * 
     * @param timeline
     *            The associated tween.
     * 
     * @return Pooled instance.
     */
    public static TimelineAction createTimelineAction(Timeline _timeline)   {

        TimelineAction action = pool.obtain();

        action.setPool(pool);

        action.setTimeline(_timeline);      

        return action;
    }

    @Override
    public boolean act(float delta) {

        done = timeline.isFinished(); 
        if (!done) {
            timeline.update(delta);
        } else {
            Gdx.app.log("LOG", "timeline.finished()");          
            timeline.free();
            timeline = null;                            
        }
        return done;
    }

    private void setTimeline(Timeline timeline) {

        this.timeline = timeline;
    }

} 
```

最初的想法来自[`netthreads`](http://www.netthreads.co.uk/2012/02/05/libgdx-scene2d-demo-with-java-universal-tween-engine/)

我注意到每次添加一个动作时，它都会创建一个新对象（`TimelineAction action = new TimelineAction()`）而不是返回一个池化对象。然后我试图通过覆盖他的`reset()`方法来追踪 Action 的结尾，以找出它是否被调用过……但事实并非如此。

```
@Override
public void reset () {

    Gdx.app.log("LOG", "reset()");
    super.reset();
} 
```

顺便说一句，在 TimelineAction 完成 (2) 后，Timeline 及其 Tweens 对象已成功发送到各自的池：

(2) - Timeline.getPoolSize() 返回 1，Tween.getPoolSize() 返回 2

```
actor1.addAction(TimelineAction.createTimelineAction(
            Timeline.createSequence()
                    .push( Tween.to(logo_MUTANT, Element2DAccessor.POS_XY, 3f)
                            .waypoint(400, 800)
                            .waypoint(200, 400)
                            .waypoint(100, 200)
                            .target(0,0)
                         )
                    .ease(Quad.INOUT).path(TweenPaths.catmullRom)).push(Tween.call(callback).setCallbackTriggers(TweenCallback.BACK_COMPLETE)).repeatYoyo(1, 0.5f).start())); 
```

所以，我需要一些帮助在这里，拜托！:S

提前谢谢，请原谅我糟糕的英语。;)

Libgdx 版本 0.9.6 (24-07-2012)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:36:22.520

你还有问题吗。我是 TimelineAction 的 netthreads 版本的作者，只要您使用此版本，我认为您不会遇到问题：

```
 public class TimelineAction extends Action
    {
        private static final ActionResetingPool<TimelineAction> pool = new ActionResetingPool<TimelineAction>(10, 100)
        {
            @Override
            protected TimelineAction newObject()
            {
                TimelineAction action = new TimelineAction();

                return action;
            }
        };

        private Timeline timeline;
        private Actor target;
        protected boolean done;

        /**
         * Get instance from pool.
         * 
         * @param timeline
         *            The action time-line to execute.
         * 
         * @return Pooled instance.
         */
        public static TimelineAction $(Timeline timeline)
        {
            TimelineAction action = pool.obtain();

            action.setTimeline(timeline);

            return action;
        }

        @Override
        public void act(float delta)
        {
            if (!isDone())
            {
                timeline.update((int) (delta * 1000));
            }
            else
            {
                Gdx.app.log("TimelineAction", "!!!Executing finished timeline, " + timeline.getClass().hashCode());
            }

        }

        @Override
        public boolean isDone()
        {
            return timeline.isFinished();
        }

        @Override
        public Action copy()
        {
            return this;
        }

        @Override
        public void setTarget(Actor actor)
        {
            this.target = actor;
        }

        @Override
        public Actor getTarget()
        {
            return target;
        }

        @Override
        public void finish()
        {
            super.finish();

            pool.free(this);

            timeline.free();
        }

        private void setTimeline(Timeline timeline)
        {
            this.timeline = timeline;
        }

        /**
         * Fetch TimeLine reference.
         * 
         * @return The TimeLine reference.
         */
        public Timeline getTimeline()
        {
            return timeline;
        }

        /**
         * Set done status.
         * 
         * @param done
         */
        public void setDone(boolean done)
        {
            this.done = done;
        }

} 
```

LibGDX 的 0.9.6 版本已被更改，以确保对已标记为删除的 Actor 的所有关联操作调用“完成”方法。如果一个动作在演员被标记为移除之前终止，它的'done'标志将被设置，并且演员的'act'方法将调用'finish'，即

```
public void act (float delta) {
        actions.iter();
        Action action;

        while ((action = actions.next()) != null) {
            action.act(delta);
            if (action.isDone()) {
                action.finish();
                actions.remove();
            }
        }
    } 
```

我正在将所有演示更新到 0.9.6。

# replication - 使用 MS SQL Express 2012 的 LocalDB 功能进行复制

> ID：11723570
> 
> 赞同：1
> 
> 时间：2012-07-30T14:28:20.877
> 
> 标签：replication, localdb

是否可以使用 2012 Express LocalDB 进行任何复制（通过 RMO）？

我读到合并复制是不可能的（失望！）但是其他复制活动是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:59:47.393

您可以使用 Sync Framework，它通常适用于任何数据库

# php - 在PHP中删除带有非英文字符的目录

> ID：11723572
> 
> 赞同：2
> 
> 时间：2012-07-30T14:28:24.887
> 
> 标签：php, wordpress, encode, dir, non-english

我有一个功能是扫描服务器上的目录，读取文件，用它做一些事情，然后删除目录（嵌套）

功能比较长，所以贴出相关部分。

```
//many other things ...

    $dir_to_delete[] = $filename['dirname']; // the array to hold all the dirs.

        } // end for each

                $dir_to_delete_clean = array_unique($dir_to_delete); //clean array - we might have duplicated dir names 

                 foreach ($dir_to_delete_clean as $delete) {
                 o99_deleteDirectory($delete) ;
                 }
                // rmdir( $filename['dirname'] );

    return $attc_id;
    } 
```

这是非空目录的删除功能：

```
function o99_deleteDirectory($dir) {
    if (!file_exists($dir)) return true;
    if (!is_dir($dir)) return unlink($dir);
    foreach (scandir($dir) as $item) {
        if ($item == '.' || $item == '..') continue;
        if (!o99_deleteDirectory($dir.DIRECTORY_SEPARATOR.$item)) return false;
    }
    return rmdir($dir);
} 
```

它工作得很好。

问题是 - 当我检查非英文字符（德语、中文、希伯来语、阿拉伯文、西里尔文 - 或任何其他字符）时 - 脚本失败并停止......

然后我尝试了 rename() ， rmdir() 等 - 他们都失败了。这是一个 PHP 错误吗？我该如何解决这个问题？我什至不能将它们重命名为以后删除 8，因为 rename() 也失败了......

有任何想法吗 ？？

**编辑我**

我忘了提到它是用于 wordpress 插件的 - 但我认为它没有区别......

**编辑二**

如果有人想尝试但没有正确的键盘/语言设置，我会在这里发布一些语言。我不确定剪切和粘贴是否会给出正确的编码，但总是可以尝试......

*   עברית（希伯来语）
*   中国的（繁体中文）
*   عربي (阿拉伯语)
*   кириллица（西里尔文）
*   ελληνικά（希腊语）
*   öäüìíáàóò´Ä´`（德语-意大利语-西班牙语和其他欧洲语言）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:04:16.310

您是否尝试在扫描或删除目录之前设置区域设置。 [http://www.php.net/manual/en/function.setlocale.php](http://www.php.net/manual/en/function.setlocale.php)

我没有尝试过，但你可以试一试。它可能会有所帮助。

# xcode - 来自 SVN 的代码问题

> ID：11723576
> 
> 赞同：1
> 
> 时间：2012-07-30T14:28:51.807
> 
> 标签：xcode, svn, linker-errors

从 SVN 中提取 iOS 代码时，我遇到了问题。我的代码在我的 MAC 上运行良好，但是在我将其上传到 SVN 并尝试构建我的项目后，它一遍又一遍地显示相同的错误。

> Apple Mach-O 链接器 (id) 错误
> 
> ld：找不到 -lzbar 命令的库 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang 失败，退出代码为 1

这个问题很烦人，使我的代码工作变得非常困难。这是完整的错误：

> ld /Users/administrator/Library/Developer/Xcode/DerivedData/SmartDealer-hezswmtfdvujkibrhkmqudlypdqk/Build/Products/Debug-iphonesimulator/SmartDealer.app/SmartDealer normal i386 cd "/Users/administrator/Desktop/test/Trade-In 4S" setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin: /usr/X11/bin:/opt/local/bin:/usr/local/git/bin" /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator .platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/administrator/Library/Developer/Xcode/DerivedData/SmartDealer-hezswmtfdvujkibrhkmqudlypdqk/Build/Products/Debug-iphonesimulator"-L/Users/administrator/Desktop/test/Trade-In 4S" "-L/Users/administrator/Desktop/test/Trade-In 4S/Classes/ZBarSDK" "-L/Users/administrator/Desktop/test/Trade -在 4S/ZBarSDK" -F/Users/administrator/Library/Developer/Xcode/DerivedData/SmartDealer-hezswmtfdvujkibrhkmqudlypdqk/Build/Products/Debug-iphonesimulator -filelist /Users/administrator/Library/Developer/Xcode/DerivedData/SmartDealer-hezswmtfdvujkibrhkmqudlypdqk /Build/Intermediates/SmartDealer.build/Debug-iphonesimulator/SmartDealer.build/Objects-normal/i386/SmartDealer.LinkFileList -mmacosx-version-min=10。6 -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40000 -framework Foundation -framework UIKit -framework CoreGraphics -framework CoreData -lsqlite3 -framework QuartzCore -weak_framework CoreMedia -weak_framework CoreVideo -liconv -lzbar -weak_framework AVFoundation -oUser /administrator/Library/Developer/Xcode/DerivedData/SmartDealer-hezswmtfdvujkibrhkmqudlypdqk/Build/Products/Debug-iphonesimulator/SmartDealer.app/SmartDealer
> 
> ld：找不到 -lzbar 命令的库 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang 失败，退出代码为 1

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:35:37.140

您确定“ZBarSDK”文件夹已成功包含在 SVN 中吗？您似乎正在尝试链接到该文件夹​​中的框架，因此您应该找到框架的标准化位置并将其安装在所有开发机器上，或者不理会您的项目，但确保 ZBarSDK 文件夹已成功添加到您的 SVN 存储库以及您的其他来源。

您可以从命令行执行此操作 - 只需`cd`进入您的项目文件夹和`svn add ZBarSDK`.

# android - 哪些操作系统确实支持查看 PDF

> ID：11723582
> 
> 赞同：-1
> 
> 时间：2012-07-30T14:29:12.263
> 
> 标签：android, windows, linux

MacOS X 具有 PDFKit，而后者又具有 PDFView。还有哪些其他操作系统支持原生查看 PDF 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:46:23.163

Android 没有内置的 PDF 演示器。但是，我找到了一种解决方法。看看[这个](https://stackoverflow.com/questions/11575099/open-pdf-file-on-any-android-device)线程。我扩展了`PdfViewerActivity`以呈现 PDF 文件。它工作得很好。

片段：

```
Intent intent = new Intent(CurrentActivity.this, ExtendedPdfViewerActivity.class);
intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, pathToPdfDocument);
startActivity(intent); 
```

# jsf-2 - JSF 2.0 ViewHandler.restoreView()、ViewHandler.createView()：客户端或/和服务器视图状态？

> ID：11723585
> 
> 赞同：0
> 
> 时间：2012-07-30T14:29:23.553
> 
> 标签：jsf-2

在恢复/创建视图阶段（“2.2 标准请求处理生命周期阶段”部分）的 JSF 2.0 规范中，它说：

> 如果请求是回发，则在当前 FacesContext 上调用 setProcessingEvents(false)。然后调用 ViewHandler.restoreView()，传递当前请求的 FacesContext 实例和视图标识符，并为恢复的视图返回一个 UIViewRoot。如果 ViewHandler.restoreView() 的返回为 null，则抛出带有相应错误消息的 ViewExpiredException。...

当谈到 ViewHandler.restoreView() 时，这里指的是哪个状态？这里是服务器组件状态还是客户端组件状态？

更一般地说，如何区分客户端和服务器状态？如果有任何类型的交互，JSF 2.0 如何设法使两者保持同步？

维基百科[承认几种类型的状态保存](http://en.wikipedia.org/wiki/JavaServer_Faces#How_it_Works)，包括客户端和服务器状态保存和恢复，它没有详细说明它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:37:06.690

> *当谈到 ViewHandler.restoreView() 时，这里指的是哪个状态？这里是服务器组件状态还是客户端组件状态？*

它是 JSF 组件树，所以我认为无论您在脑海中定义的“服务器组件状态”术语在这里最适用，因为您的“客户端组件状态”术语很可能是指 HTML DOM 树（由 JSF在渲染响应阶段生成并从服务器发送到客户端）。

* * *

> *更一般地说，如何区分客户端和服务器状态？如果有任何类型的交互，JSF 2.0 如何设法使两者保持同步？*

是的，HTTP 请求（基本上没有其他方法可以让 HTTP 客户端与 HTTP 服务器交互......）。特别注意`javax.faces.ViewState`请求参数。

# java - 通过蓝牙连接

> ID：11723586
> 
> 赞同：0
> 
> 时间：2012-07-30T14:29:26.653
> 
> 标签：java, android

我一直在为 android 开发一个蓝牙应用程序。我可以从 vaible-device-list 中选择一个 Bt 设备。如何连接所选设备？请你帮助我好吗？非常感谢

这是我的代码：

```
public class ScanActivity extends ListActivity {

    private static final int REQUEST_BT_ENABLE = 0x1;
            public static String EXTRA_DEVICE_ADDRESS = "device_address";
            ListView listGeraete;

            BluetoothAdapter bluetoothAdapter;
            ArrayAdapter<String> arrayAdapter;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.list);
// adapter
            bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
            // list of devices
            ListView listGeraete = getListView();
            arrayAdapter = new ArrayAdapter<String>(ScanActivity.this,android.R.layout.simple_list_item_1);
            listGeraete.setAdapter(arrayAdapter);

    // if bt disable, enabling
            if (!bluetoothAdapter.isEnabled()) {
                Intent enableBt = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBt, REQUEST_BT_ENABLE);

            }

    // start discovery

            bluetoothAdapter.startDiscovery();

            registerReceiver( ScanReceiver , new IntentFilter(
                    BluetoothDevice.ACTION_FOUND)); 

        }

    private final BroadcastReceiver ScanReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {

                String action = intent.getAction();

    // find bt devices
                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    BluetoothDevice device = intent
                            .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    arrayAdapter.add(device.getName() + "\n" + device.getAddress());
                    arrayAdapter.notifyDataSetChanged();
                }
            }
        };

        // select a device

        public void onListItemClick(ListView l, View view, int position, long id) {

            bluetoothAdapter.cancelDiscovery();
            String devicesinfo = ((TextView) view).getText().toString();
            String address = devicesinfo.substring(devicesinfo.length());

            Intent intent = new Intent();
            intent.putExtra(EXTRA_DEVICE_ADDRESS, address);

            setResult(Activity.RESULT_OK, intent);
            Toast.makeText(getApplicationContext(),"Connecting to " + devicesinfo + 
                    address,
            Toast.LENGTH_SHORT).show();

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:39:49.463

您可以使用以下代码进行连接（假设您使用RFComm进行连接，否则相应更改）

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
if (!mBluetoothAdapter.isEnabled()) {
    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    startActivityForResult(enableBtIntent, 1);
}
BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
BluetoothSocket socket = (BluetoothSocket) m.invoke(device, 1);
socket.connect(); 
```

# ios - iOS scrollView setContentOffset 同步问题

> ID：11723594
> 
> 赞同：1
> 
> 时间：2012-07-30T14:29:50.743
> 
> 标签：ios, uiscrollview

我用子视图初始化 UIScrollView。按钮操作后，我想：

*   添加一个新的子视图
*   滚动到带有动画的新子视图
*   动画完成后删除旧的子视图。

为此，我执行以下操作：

```
[mCubeView setContentOffset:tOffset animated:YES];    
[tActualSide removeFromSuperview]; 
```

问题是，在动画开始后，“tActualSide”会立即被删除，它也会从动画中删除。

我想同步它， tActualSide 只会在动画结束时被删除。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:51:40.353

监听委托回调：

```
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView 
```

当您收到该消息时

```
[tActualSide removeFromSuperview]; 
```

引用 Apple 文档（注意“setContentOffset:animated:”参考）：

```
scrollViewDidEndScrollingAnimation:
Tells the delegate when a scrolling animation in the scroll view concludes.

- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView
Parameters
scrollView
The scroll-view object that is performing the scrolling animation.
Discussion
The scroll view calls this method at the end of its implementations of the UIScrollView and setContentOffset:animated: and scrollRectToVisible:animated: methods, but only if animations are requested.

Availability
Available in iOS 2.0 and later.
Declared In
UIScrollView.h 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:47:36.263

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:0.5];
[UIView setAnimationCurve: UIViewAnimationCurveLinear];
[mCubeView setContentOffset:tOffset];
[UIView commitAnimations];
[self performSelector:@selector(remove) withObject:nil afterDelay:0.5f];

- (void)remove
{
    [tActualSide removeFromSuperview];
} 
```

# google-maps - 谷歌地图融合表 - 选择国家多边形的简单查询不起作用

> ID：11723596
> 
> 赞同：0
> 
> 时间：2012-07-30T14:29:53.440
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

我创建了一个新的融合表。我想触发查询以检索具有特定颜色的特定国家多边形。但它不起作用。我确定我在 where 子句中做错了什么。下面是我的代码：

```
<html>
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="UTF-8">

<title>Fusion Tables Layer Example: Basic Fusion Tables Layer</title>
<link href="http://code.google.com/apis/fusiontables/docs/samples/style/default.css"   rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">       </script>

<script type="text/javascript">
function initialize() {
var map = new google.maps.Map(document.getElementById('map-canvas'), {
center: new google.maps.LatLng(37.4, -122.1),
zoom: 2,
mapTypeId: google.maps.MapTypeId.ROADMAP
});

var layer = new google.maps.FusionTablesLayer({
query: {
select: 'geometry',
from: '1hFPiPmQilakQ4zESVCJqq9ENmeo5e_EJXy_Usy8',
where : countryName = 'India'
},
map: map
});
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:20:45.770

您需要引用 where 子句。此外，这些列区分大小写（您的表没有“countryName”列，它是“CountryName”

因此，只需在这一行中切换：

```
 where : "CountryName = 'India'" 
```

# objective-c - 对 NSURLConnection 委托进行单元测试：伪造连接

> ID：11723602
> 
> 赞同：0
> 
> 时间：2012-07-30T14:30:08.180
> 
> 标签：objective-c, xcode, unit-testing, ocmock, nsurlconnectiondelegate

我正在编写一个天气应用程序，我创建了一种天气模型，它可以执行所有计算、获取数据等。在创建 ViewControllers 之前，我想为我的模型编写一些单元测试以确保一切正常正常工作（正在以预期的格式获取天气，天气正在正确刷新等）。

现在我很想*充满信心*地进行单元测试并测试平等，例如：

```
STAssertEquals([[testableModel weatherDictionary]objectForKey:@"current_conditions"], @"Sunny", @"The weather should be sunny."); 
```

...但是，唉，大自然的变化如此之快。另外，（并纠正我的问题），我认为我在进行单元测试时无法连接到 Internet（...？）（无论如何，这并不重要。）

所以，我在我最喜欢的网站上搜索，发现了这个问题：[如何对 NSURLConnection 委托进行单元测试？](https://stackoverflow.com/questions/9908547/how-to-unit-test-a-nsurlconnection-delegate)

它提供了很多信息，但现在我有一个问题。当我调用一个调用 NSURLConnection 委托方法的方法时，例如：

```
[myBeautifulWeatherModel getTheWeather]; 
```

...我如何提供模型（即实现 NSURLConnection 委托方法的 myBeautifulWeatherModel）数据？当模型在这个委托方法中接收到它的数据时，它会做一些 JSON 解析：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

我的第一个想法是获取 Wunderground 发回的 JSON 数据，然后更改一些键，使它们与预期数据匹配并输入。但问题是我将如何输入该响应？

我知道 NSURLConnection 将调用 3 个必需的委托方法。我觉得我需要“伪造”以下内容：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data; 
```

但同样，我对如何输入它并让这个模型*认为*它连接到互联网有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:03:38.970

我认为您正在尝试进行过于广泛的测试。你想在这里测试两件事：1）当`NSURLConnectionDelegate`回调被调用时，它们会正确地将数据写入有用的地方，2）当连接完成时给定一些存储的数据，它会适当地存储在你的模型中。所以是这样的：

```
-(void)testShouldAppendData {
    expect([connectionDelegate data]).to.beNil();

    NSString *response = @"1";
    NSData *responseData = [input dataUsingEncoding:NSUTF8StringEncoding];
    [connectionDelegate connection:connection didReceiveData:responseData];

    NSString *stringFromResponseData = [[[NSString alloc] initWithData:[connectionDelegate data] encoding:NSUTF8StringEncoding] autorelease];
    expect(stringFromResponseData).to.equal(@"1");

    [connectionDelegate connection:connection didReceiveData:responseData];
    stringFromResponseData = [[[NSString alloc] initWithData:[connectionDelegate data] encoding:NSUTF8StringEncoding] autorelease];
    expect(stringFromResponseData).to.equal(@"11");
} 
```

对于数据格式：

```
-(void)testShouldUpdateWeatherModel {
    NSString *response = @"{\"current_conditions\":\"sunny\"}}";
    NSMutableData *responseBytes = [NSMutableData dataWithData:[response dataUsingEncoding:NSUTF8StringEncoding]];
    [connectionDelegate setData:responseBytes];

    [connectionDelegate connectionDidFinishLoading:nil];

    expect([[connectionDelegate weatherDictionary] objectForKey:@"current_conditions"]).to.equal(@"sunny");
} 
```

# jquery - 在原型中提交表单

> ID：11723603
> 
> 赞同：0
> 
> 时间：2012-07-30T14:30:10.860
> 
> 标签：jquery, prototypejs, dom-events

我需要在原型中编写这个 jQuery 函数。我怎样才能转换它？

```
submitHandler: function(form) {                                             
    $.post("post.php?"+$("#form1").serialize(), {       
        }, function(response){                                                          

             if(response==0)
                 {                                                      
                  alert("security code is wrong!");
                  return false;
                 }                                                  
           }
    ); 
```

},

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:37:12.137

尝试：

```
new Ajax.Request('post.php?' + $('form1').serialize(), {
  onSuccess: function (transport) {
    var response = transport.responseText;

    if (response == 0) {                                                      
      alert("security code is wrong!");
      return false;
    } 
  }
}); 
```

# gerrit - Gerrit 配置

> ID：11723605
> 
> 赞同：5
> 
> 时间：2012-07-30T14:30:23.540
> 
> 标签：gerrit

我们想使用 gerrit 进行代码审查，但我们在 webview 中缺少一些设置。

*   是否可以禁止提交者审查/验证他们自己的提交？
*   是否有可能两个审稿人给 +1 一个累积到一个 +2 以便它可以提交？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T19:42:58.550

您可以禁止自我审查并添加 +1 + +1 = +2 规则，但没有很好的文档记录。较新版本的 Gerrit 使用 prolog 引擎来计算提交规则。目前实际上正在改进此功能的文档：[https ://gerrit-review.googlesource.com/#/c/37102/](https://gerrit-review.googlesource.com/#/c/37102/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T17:30:25.883

> *   是否可以禁止提交者审查/验证他们自己的提交？

是的，设置自动构建以验证所有提交。您可以使用Jenkins的[Gerrit Trigger或 Bamboo 的](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)[gReview](https://marketplace.atlassian.com/plugins/com.houghtonassociates.bamboo.plugins.gReview/server/installation)进行设置。这样，没有人必须验证提交。此外，您可以设置超级用户，以便只有选定的组才能真正合并最终审核的更改。

> 是否有可能两个审稿人给 +1 一个累积到一个 +2 以便它可以提交？

不，两个 +1 并不会使 +2 成为提交所必需的。这是[文档](https://gerrit-review.googlesource.com/Documentation/intro-quick.html)所说的：

> 审阅者选择的标签决定了接下来会发生什么。+1 和 -1 级别只是一种意见，因为 +2 和 -2 级别允许或阻止更改。为了使更改被接受，它必须至少有一个 +2 并且没有 -2 票。尽管这些是数值，但它们绝不会累积；两个+1 不等于+2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:08:10.807

Brad 在他的回答中提到的文档现在已合并到 Gerrit 的主分支中，并在最新版本中可用（截至目前为 2.5.1）：

[仅当非作者提供 Code-Review+2 时才可提交更改](https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html#NonAuthorCodeReview)

[使两个 +1 票等于 +2](https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html#_example_13_1_1_2_code_review)

# javascript - hightcharts - 如何删除底部的框

> ID：11723608
> 
> 赞同：0
> 
> 时间：2012-07-30T14:30:40.203
> 
> 标签：javascript, highcharts

我附上了hightchart的图像。请让我知道如何删除底部中间的文本框：'Engaged'、'Unengaged' 以及如何删除 1k 行中的 yAxis 文本。 ![在此处输入图像描述](../Images/1e7d62c903c4182c1970112a9f059a6e.png) 谢谢

另外，我如何使它看起来像下一张图表：

![在此处输入图像描述](../Images/ecfa21f721fcdea47504259628a3cf8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:41:17.233

您正在寻找的两个项目是：

*   legend.enabled ( [http://www.highcharts.com/ref/#legend--enabled](http://www.highcharts.com/ref/#legend--enabled) )
*   yAxis.labels.style ( [http://www.highcharts.com/ref/#yAxis-labels--style](http://www.highcharts.com/ref/#yAxis-labels--style) )

这是这些选项集的小提琴：

[http://jsfiddle.net/YG88K/](http://jsfiddle.net/YG88K/)

编辑：

`chart.type='spline'`回答你的新问题：如果你的意思是由（[http://www.highcharts.com/ref/#chart--type](http://www.highcharts.com/ref/#chart--type)）处理的曲线，不确定你的意思是“让它看起来像这样”

用曲线更新小提琴：

[http://jsfiddle.net/YG88K/1/](http://jsfiddle.net/YG88K/1/)

他们的文档非常好，我强烈建议您查看他们的示例和 API 参考。

# java - jQuery/JSON 调用的 REST WS 没有响应

> ID：11723618
> 
> 赞同：2
> 
> 时间：2012-07-30T14:31:17.287
> 
> 标签：java, jquery, json, web-services, rest

我知道有很多这样的帖子，但由于我对 REST 和 JQuery 都是新手，所以我无法真正让它发挥作用：

我正在使用带有 Java 5 的 REST-WS，我可以调用它并使用“Poster”（用于测试它的 firefox 插件）返回结果。当我调用下面的 URL 时，我应该通过调用下面显示的资源类中的方法“getCustomer”来让员工在地图中按“0”的顺序排列。

虽然我无法获得结果并在使用 jQuery 并返回 JSON 时收到错误“未知”，但当我从正文如下的 html 页面调用 REST 时：

```
<body>
        jQuery to REST <br><br>

       <a href="http://jquery.com/">jQuery</a>
       <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
       <script>
         $(document).ready(function(){

            $("button").click(function (){
                $.ajax({
                    type: "GET",
                    url: "http://localhost:8081/RestDemo/services/customers/0",
                    dataType: "json",
                    success: function (data) {
                        alert(data.name);
                    },
                    error: function(e){  
                        alert("Error: " + e);  
                    } 
                });
             });

         });
       </script>
       <br>
       <br>
       <button>Return Customer</button>

      </body> 
```

这是我的资源类：

```
package com.myeclipseide.ws;

import java.util.ArrayList;
import java.util.List;
import java.util.TreeMap;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

import com.sun.jersey.spi.resource.Singleton;

@Produces("application/xml")
@Path("customers")
@Singleton
@XmlRootElement(name = "customers")
public class CustomerResource {

    private TreeMap<Integer, Customer> customerMap = new TreeMap<Integer, Customer>();

    public  CustomerResource() {
        // hardcode a single customer into the database for demonstration
        // purposes
        Customer customer = new Customer();
        customer.setName("Harold Abernathy");
        customer.setAddress("Sheffield, UK");
        addCustomer(customer);
    }

    @GET
    @XmlElement(name = "customer")
    public List<Customer> getCustomers() {
        List<Customer> customers = new ArrayList<Customer>();
        customers.addAll(customerMap.values());
        return customers;
    }

    @GET
    @Path("/{id}")
    @Produces("application/json")
    public String getCustomer(@PathParam("id") int cId) {
        return  "{\"name\": \"unknown\", \"address\": -1}"; //customerMap.get(cId); 

    }

    @POST
    @Path("add")
    @Produces("text/html")
    @Consumes("application/xml")
    public String addCustomer(Customer customer) {
         int id = customerMap.size();
         customer.setId(id);
         customerMap.put(id, customer);
         return "Customer " + customer.getName() + " added with Id " + id;
    }

} 
```

我感谢任何人的帮助，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:11:59.883

我得到了它！

返回`{"name": "unknown", "address": -1}`是正确的，因为这正是我的方法返回中硬编码的内容，

所以我`return "{\"name\": \"unknown\", \"address\": -1}";` 简单地用正确的形式代替

```
return  "{\"name\": \" " + customer.getName() + " \", \"address\": \"" + customer.getAddress() + "\"}"; 
```

显然它有效！

谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:40:19.870

> 我感谢任何人的帮助，

如果您感到困惑，请查看网络计数器的日志文件中的内容。如有必要，请打开调试日志记录。

接下来是使用您的网络浏览器内置的“网络开发人员”支持来查看实际发送的请求。

# java - html hidden params I have a java applet on a page in this format: In order for the application to work, these two parameters must be passed to it or else it won't allow the user to connect. Ob 问问题 问问题 2012-07-30T14:31:25.740 296 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a java applet on a page in this format: In order for the application to work, these two parameters must be passed to it or else it won't allow the user to connect. Obviously, these parameters can be crawled/scraped which is something I want to stop. I know that if you don't want people to get something, don't put it on the internet; there has to be a way to do what I'm trying to accomplish. I have tried using ioncube loader, html "obfuscators", and all of them are able to be decoded easily. The main goal is for this .jar to be able to get these parameters and allow access to my service via a web browser, but not have them visible to the public. Any idea on how I can do this? When is Rails Eager loading by default for all association a good idea? At which point is good to make all queries on a large project to eager load all of the objects associations? Let me explain the background of this question. Currently i am working on a project that has become quite complex in terms of models and associations. I started to check the server logs and saw that some views were taking some time to load because of the nested objects contained in the queries. So i begin to refactor some of these queries to something like this: @process = current_account.processes.query(params) To this: @process = current_account.processes.includes(:messages, :parts, :people).query(params) The result was pretty good. In some views i was able to reduce the view render time and activerecord query time by 70%. Man i was happy, so i decided to make more. But after this decision, i started to notice that not all places i refactored the code, the changes were good. In fact, there were queries that became slower. To explain a little more about the problem i have a model like this: class Process has_many :anotations has_many :publications has_many :movimentations has_many :reunions has_many :profiles ... And each one of these nested models inside process belongs_to :user that created it like this: class Anotation belongs_to :user class Reunion belongs_to :user class Profile belongs_to :user And it go on. In my show view of process, there is several tabs that display all of these nested objects and the name of the user that has added it to the current process. With a query like this: @process = current_account.processes.query(params) It was performing kinda slow. So i tried something like this: @process = current_account.process.includes(:anotations, :publications, :movimentations, :reunions, :profiles, :messages).query(params) This has made me gain speed on the view rendering, but in activerecord, the the time to retrieve these objects have increased significantly. And it raised to the skies when i eager loaded the user object inside of all nested models of process like this: @process = current_account.process.includes({:anotations => [:user]}, {:publications => [:user], etc...).query(params) Well, refactoring the design of the app to behave differently with these associations is not going to happen, so i ask the question again. At which point is good to make all queries on a large project to eager load all of the objects associations? Any tips/best practices/experience on the subject would be gladly appreciated. javahtmlapplet 4 2 回答 2 This answer is useful -1 在双方（在 Java Script 和 applet 中）实现一些类似 SHA 加密的东西。 Java Script side : http://www.movable-type.co.uk/scripts/sha256.html Java Side (applet) : http://www.mkyong.com/java/java-sha-hashing-example/ 于 2012-07-30T14:41:23.213 回答 This answer is useful -1 不要让它们成为启动参数。 相反，让您的小程序加载，它做的第一件事就是联系另一个 Web 服务来获取值。这样，您就可以使用多种方法来实现加密，而不必将其放入 HTML 中。 如果/当您决定将应用程序移植到移动设备时，这也会对您有所帮助。 于 2012-07-30T14:44:21.163 回答 Related 4 c - 使用 atoi 填充整数数组 1 objective-c - Objective C错误线程停止运行 1 python - 在 python/django 中具有列表字典的类别标题 2 css - nivo 滑块和下拉菜单的 Z-index 问题 2 prolog - 将递归转换为尾递归？ 2 python - 如何分发我的 Python/shell 脚本？ 2 ruby - 未初始化的常量 Model1::Model2::Model3 2 java - 以随机顺序显示 CardLayout 的卡片？ 2 javascript - ScriptManager 不加载 Mono 下的 javascript 方法 1 python - 如何使用 TDD 创建现有对象的数据库表示？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11723623
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, html, applet

I have a java applet on a page in this format:

In order for the application to work, these two parameters must be passed to it or else it won't allow the user to connect. Obviously, these parameters can be crawled/scraped which is something I want to stop. I know that if you don't want people to get something, don't put it on the internet; there has to be a way to do what I'm trying to accomplish.

I have tried using ioncube loader, html "obfuscators", and all of them are able to be decoded easily. The main goal is for this .jar to be able to get these parameters and allow access to my service via a web browser, but not have them visible to the public. Any idea on how I can do this?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-30T14:41:23.213

在双方（在 Java Script 和 applet 中）实现一些类似 SHA 加密的东西。

```
Java Script side : http://www.movable-type.co.uk/scripts/sha256.html
Java Side (applet) : http://www.mkyong.com/java/java-sha-hashing-example/ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T14:44:21.163

不要让它们成为启动参数。

相反，让您的小程序加载，它做的第一件事就是联系另一个 Web 服务来获取值。这样，您就可以使用多种方法来实现加密，而不必将其放入 HTML 中。

如果/当您决定将应用程序移植到移动设备时，这也会对您有所帮助。

# ruby-on-rails - 什么时候默认为所有关联加载 Rails Eager 是个好主意？

> ID：11723626
> 
> 赞同：2
> 
> 时间：2012-07-30T14:31:37.893
> 
> 标签：ruby-on-rails, eager-loading

在什么时候对大型项目进行所有查询以预先加载所有对象关联比较好？
让我解释一下这个问题的背景。
目前我正在研究一个在模型和关联方面变得相当复杂的项目。我开始检查服务器日志，发现由于查询中包含嵌套对象，一些视图需要一些时间才能加载。
所以我开始将其中一些查询重构为如下所示：

```
@process = current_account.processes.query(params) 
```

对此：

```
@process = current_account.processes.includes(:messages, :parts, :people).query(params) 
```

结果还不错。在某些视图中，我能够将视图渲染时间和 activerecord 查询时间减少 70%。
伙计，我很高兴，所以我决定做更多。但是在做出这个决定之后，我开始注意到并非所有我都重构了代码的地方，变化都很好。事实上，有些查询变得更慢了。
为了更多地解释这个问题，我有一个这样的模型：

```
class Process
  has_many :anotations
  has_many :publications
  has_many :movimentations
  has_many :reunions
  has_many :profiles
  ... 
```

里面的每一个嵌套模型`process` `belongs_to :user`都是这样创建的：

```
class Anotation
  belongs_to :user

class Reunion
  belongs_to :user

class Profile
  belongs_to :user 
```

它继续。
在 my `show view`of 中`process`，有几个选项卡显示**所有**这些嵌套对象以及将其添加到当前进程的用户的名称。
使用这样的查询：

```
@process = current_account.processes.query(params) 
```

它的表现有点慢。所以我尝试了这样的事情：

```
@process = current_account.process.includes(:anotations, :publications, :movimentations, 
  :reunions, :profiles, :messages).query(params) 
```

这使我加快了视图渲染的速度，但在 activerecord 中，检索这些对象的时间显着增加。`user`当我急切地将对象加载到所有嵌套模型中时，它升到了天空`process`：

```
@process = current_account.process.includes({:anotations => [:user]}, 
  {:publications => [:user], etc...).query(params) 
```

好吧，重构应用程序的设计以使这些关联表现出不同的行为是不会发生的，所以我再次问这个问题。
在什么时候对大型项目进行所有查询以预先加载所有对象关联比较好？
任何有关该主题的提示/最佳实践/经验将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:49:18.970

“对大型项目的所有查询都渴望加载所有对象关联” - 几乎从不。至少在应用程序内部并非没有帮助。

如果我站在你的立场上，我会开始研究缓存（你没有提到，所以我不知道你是否在做任何事情）。尤其是片段缓存，因为它似乎很适合您的选项卡结构。

在一个应用程序中，我使用上下文相关的侧边栏显示项目组列表，每个组包含指向相关项目的链接（18 个组中的任何一个项目），每个项目以链接形式显示相关项目的名称（和其他几个小数据项）。

侧边栏中的每个组都被缓存，并且其组中每个相关项目的条目也被缓存。控制器重构以将相关项累积为@relateds，并且该代码使用缓存来确定是否需要获取（在缓存未命中时）。在智能缓存过期方面做了一些工作，性能非常好。

假设项目 X 在 12 个类别中的每个类别中有 10 个相关项目（120 个相关项目）。在 Project X 的第一场演出中，你付出了代价。更改类别中 1 个相关项目的名称将使该项目的缓存、该项目的组和整个侧边栏无效。在 Project X 的下一个节目中，侧边栏的重建涉及 1 个项目的 1 个缓存未命中（通过一两个连接读取该项目的记录），因此项目缓存得到重建，一个类别缓存从 10 个项目缓存重建（1新的 + 9 个现有的），其他 11 个类别的缓存命中（不读取这 110 个相关项目），并在最后产生了一个重建的侧边栏缓存。

感觉您可以为您的选项卡采用类似的策略，甚至可能更细粒度，但这取决于您的实施。

# iphone - bug with instruments

> ID：11723629
> 
> 赞同：0
> 
> 时间：2012-07-30T14:31:45.357
> 
> 标签：iphone, objective-c, xcode, ipad, instruments

So I was profiling my app using Leaks and Allocation tool in Instruments. I started off by switching to the call tree for allocations and then the option choosen was for created and still living. I have a UIScrollView that loads a bunch of images. So I went ahead and tried scrolling down to the UIScrollView. All my code is using lazy loading and only load images that are on the screen, didn't load all at once and it tries to reuse as much as possible.

When I do this, it seems like the amount of memory used I a particular method, in this example imageForText is always going up. from the start of recording to time X it goes from 0 MB to 5 MB. So I then switch the toggle to create and destroyed and then back to create and still living and I can see there the memory is just 2-3 MB now. If I don't do this switching it seems that it will only just go up linearly.

Am I just mis-reading or not understanding this? Is this a bug on Instrument in such that the created& still living is not reflected properly, such that you have to toggle back and forth to get the most recently accurate data?

Here's my graph:

![enter image description here](../Images/baa47d65b1f5e87cb66763ab3f762a5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:17:54.517

Allocation Lifespan 单选按钮：All Objects Created、Created and Still Living 和 Created and Destroyed，影响调用树和对象列表的统计信息，您可以从跳转栏访问。单选按钮不影响图表的当前字节和分配工具显示的默认统计信息。

如果您只想专注于活动分配，请单击分配工具旁边的信息按钮。选中仅跟踪活动分配复选框。

# java - 在 Java 1.7.0_04-b20 中从 Applet 重定向期间更改了 window.opener 引用，但在 1.7.0_03-b05 中未更改

> ID：11723635
> 
> 赞同：0
> 
> 时间：2012-07-30T14:32:17.547
> 
> 标签：java, javascript, firefox, applet, popup

我遇到了 javascript 属性`window.opener`（它保留对打开弹出窗口的窗口的引用）以及来自小程序内的重定向的问题。每当从小程序内发生重定向时，都会`window.opener`更改为当前弹出窗口。更奇怪的是，最近的 Java 更新引入了这种变化：这并没有发生`java 1.7.0_03-b05`在`java 1.7.0_04-b20`. 现在这可能是一些异国情调的用例，但我仍然想知道这种变化是否是故意的。

为了深入了解这一点，我编写了一个小测试来演示有问题的行为。可以在[此处](http://files.newsnetz.ch/applet_test)找到 HTML 站点。它只在 Firefox 中有效（这对我的用例来说没问题）

1.  该`index.html`页面包含以下 javascript：

    ```
    window.name = "index.html";

    function open_new_window() {
        window.open('applet.html', 'applet.html', 'width=1050,height=680,scrollbars=yes,status=yes').focus();
        return false;
    } 
    ```

    我将窗口名称设置为“index.html”（出于识别目的），并提供了一个在弹出窗口中打开 applet.html 的函数。它还包含一个调用此函数的链接：

    ```
    <a href="#" onclick="open_new_window(); return false;">open applet.html in new                
    window</a> 
    ```

2.  单击链接后，`applet.html`将在弹出窗口中打开。这包含以下 javascript：

    ```
    window.name = "HelloWorldApplet.html";

    alert("opener is now: "+window.opener.name);

    function on_load() {
        alert("changing bgcolor of opener to red");
        window.opener.document.body.style.background='red';
    } 
    ```

    我将此弹出窗口的 window.name 设置为“applet.html”（用于识别目的）并提醒当前的`window.opener.name`. 当主体触发 onload 事件时，我将开瓶器的背景颜色更改为红色。

    此外，此页面包含一个小程序，其中有一个按钮可以触发重定向到`redirect.html`

    ```
    import java.applet.Applet;
    import java.awt.Button;
    import java.awt.FlowLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.util.logging.Level;
    import java.util.logging.Logger;

    public class HelloWorldApplet extends Applet implements ActionListener {

        Button redirectButton;

        @Override
        public void init() {
            super.init();

            setLayout(new FlowLayout());
            redirectButton = new Button("Redirect now!");
            add(redirectButton);

            redirectButton.addActionListener(this);
        }

        @Override
        public void actionPerformed(ActionEvent ae) {
            try {
                this.getAppletContext().showDocument(new URL(this.getDocumentBase(), "redirect.html"), "_self");
            } catch (MalformedURLException ex) {
                Logger.getLogger(HelloWorldApplet.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    } 
    ```

3.  单击小程序中的按钮后，将`redirect.html`在同一弹出窗口中打开。此页面包含以下 javascript：

    ```
    window.name = "redirect.html";

    alert("opener is now: "+window.opener.name);
    function on_load() {
        alert("changing bgcolor of opener to green");
        window.opener.document.body.style.background='green';
    } 
    ```

    我将此弹出窗口的 window.name 设置为“redirect.html”（用于识别目的）并提醒当前的`window.opener.name`. 当主体触发 onload 事件时，我将开瓶器的背景颜色更改为绿色。

发生`java 1.7.0_03-b5`以下情况：

1.  单击 中的链接后`index.html`，`applet.html`将在弹出窗口中打开。警报显示`index.html`为开瓶器名称。然后开瓶器的背景颜色变为红色
2.  单击小程序中的按钮后，将`redirect.html`在同一窗口中打开。警报显示`index.html`为开瓶器名称。然后开瓶器的背景颜色变为绿色

到目前为止一切顺利......但`java 1.7.0_04-b20`发生了以下情况：

1.  单击 中的链接后`index.html`，`applet.html`将在弹出窗口中打开。警报显示`index.html`为开瓶器名称。然后开瓶器的背景颜色变为红色
2.  单击小程序中的按钮后，将`redirect.html`在同一窗口中打开。警报将“redirect.html”显示为 openersname。然后开瓶器的背景色（现在是弹出窗口！）变为绿色。

因此，Applet 发出的重定向似乎是通过`this.getAppletContext().showDocument(new URL(this.getDocumentBase(), "redirect.html"), "_self");`将 window.opener 属性更改为它更改 URL 的窗口...

如果您能想出解决此问题的方法，我将不胜感激。

非常感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:54:51.100

你的帖子让我明白我不是唯一一个在这里发疯的人。我相信这是新 java 版本中的一个错误。

我只是在弹出页面中添加了以下 javascript：

var parentWin = window.opener;

然后，当我需要调用父级时，我使用 parentWin。这解决了我的问题。

# c# - 更新 asp.net nopcommerce 后欧元符号更改

> ID：11723638
> 
> 赞同：2
> 
> 时间：2012-07-30T14:32:28.440
> 
> 标签：c#, asp.net, html, localization, nopcommerce

我对 nopcommerce 项目的代码进行了一些修改，在我发布更改后，欧元符号更改为我们无法理解的其他符号。由于网站的那部分没有发生任何变化，这可能是什么原因。

请查看此页面以供参考：

示例图片：[http ://gyazo.com/9b57d307ba597b9ed689889f5ee4bc85.png?1343658375](http://gyazo.com/9b57d307ba597b9ed689889f5ee4bc85.png?1343658375)

所以应该有 '€' 而不是 'Ђ' 字符

谢谢，天使

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:35:01.477

尝试使用 html 实体，而不是使用符号。在这种情况下`&euro;`，这是 € 符号。有关更多实体，请参阅[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)和[http://www.w3schools.com/html/html_entities.asp](http://www.w3schools.com/html/html_entities.asp)

# php - How to Decode the & from a URL so that header() works (urldecode not working)

> ID：11723641
> 
> 赞同：14
> 
> 时间：2012-07-30T14:32:40.343
> 
> 标签：php, header, decoding, urldecode

I have the following URL: `$url = 'http://mysite.com/?p=welcome&amp;x=1&amp;y=2';`

I need to decode it so that `header("Location: $url");` actually works.

However, using `urldecode($url)` is not working because it's **not** decoding the `&amp;` -> `&` and so the browser is getting redirected to `http://mysite.com/?p=welcome&amp;x=1&amp;y=2` which fails.

I need it to decode so that it looks like: `http://mysite.com/?p=welcome&x=1&y=2`

How do I do that?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-30T14:34:48.970

尝试[`htmlspecialchars_decode`](http://php.net/manual/en/function.htmlspecialchars-decode.php)

```
echo htmlspecialchars_decode('http://mysite.com/?p=welcome&amp;x=1&amp;y=2');
//"http://mysite.com/?p=welcome&x=1&y=2" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T14:34:57.483

`&amp;`不是 URL 编码（又名[percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)），而是一个 HTML 实体。URL 编码的它看起来像`%26`.

使用[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T14:35:06.407

`&amp;`不是 url 编码的。您需要使用`htmlspecialchars_decode()` [http://php.net/manual/en/function.htmlspecialchars-decode.php](http://php.net/manual/en/function.htmlspecialchars-decode.php)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T14:35:40.360

我会试试这个：

```
$url = html_entity_decode($url);
header("Location: $url"); 
```

取自[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

我会这样做，因为您`$url`的不是 url 编码而是 html 编码，用相应的 html 实体替换了 html 特殊字符。

# android - What kind of applications can be created using jquery mobile

> ID：11723643
> 
> 赞同：0
> 
> 时间：2012-07-30T14:32:46.263
> 
> 标签：android, ios, design-patterns, mobile, jquery-mobile

i'm experienced with iOS application development and a little of Android development. But since most of my apps are asked to be platform independent(run on any mobile opertating system) i'm trying to find an alternate way to shorten development prosses. So, i decided to develope my app using JQueryMobile but i have some questions about it, for instance:

1.  Can we create a kind of barcode reader on jquery mobile?
2.  Are JQueryMobile apps just for web side or can be installed on device too?
3.  Is it possible to use streams(socket-port programming) with JQueryMobile?
4.  Will UI be auto completed related to the device if i use JQueryMobile..

I can ask a few questions too but i think these are enough to explain what i'm trying to ask. Please share your opinions, thanks in advance.. Note: As this question will expect for design patterns during application development for mobile and cross-platform applications, i will tag it with the tag **design-patterns** too

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:13:48.163

使用 PhoneGap 之类的框架创建混合应用程序似乎比纯 Web 应用程序更好。纯网络应用程序方法的局限性在于您对设备功能（例如相机）的访问权限有限，而且您无法安装它，但必须从网页加载。Phonegap 将您的 web 应用程序打包成可安装的格式，并允许您从 JavaScript 访问本机 API，例如相机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:17:58.353

要创建独立于平台的应用程序，您可以使用**PhoneGap**。

使用 PhoneGap 进行开发让您可以使用您熟悉和喜爱的 Web 代码：HTML、CSS 和 Javascript，自由地为**iOS**、**Android**、**Blackberry**、**Windows Phone**、**Palm WebOS**、**Bada**和**Symbian创建移动应用程序。**

[在此处](http://phonegap.com)查看详细信息

您还可以使用它创建**条形码**阅读器或其他一些与传感器相关的东西，也可以使用带电话间隙的加速度计/地图/相机等。查看详情

[地图/相机](http://maniacdev.com/2012/02/beginner-phonegap-tutorials-downloading-deployment-using-the-accelerometermapscamera-and-more/)

[加速度计](http://docs.phonegap.com/en/1.0.0/phonegap_accelerometer_accelerometer.md.html)

[磁力计](http://wiki.phonegap.com/w/page/16494794/iPhone%3a%20Magnetometer%20use)

[画布-加速度计-on-android](http://phonegap.com/2010/04/27/canvas-accelerometer-on-android/)

[在此处](https://www.youtube.com/watch?v=14MhSnFJ3dc&feature=related)查看更多视频

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:18:13.317

**您可以使用 phone gap 女巫可以轻松地为许多平台创建手机应用程序，而且它非常简单并且有很多插件，正如您所指出的，条形码阅读器也是其中之一，而且好处是您可以开发一个应用程序将其发送到那里的云构建，它将被部署到 6 个平台。因此它将是跨平台的，需要为每个操作系统重新编码。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T15:06:56.167

我的意思不是很明显，但是 JQueryMobile 是一个 javascript 框架，用于预设信息，安排 html 元素以适应一些（我会说很多）使用 html5 的智能手机浏览器。我不认为您可以完全构建一个只需要使用 jquerymobile 来控制条形码阅读器的应用程序。

供参考：

[jquerymobile 论坛关于访问相机的问题](http://forum.jquery.com/topic/mobile-phone-s-camera-access-with-jquery-mobile)

[阿帕奇科尔多瓦](http://docs.phonegap.com/en/1.0.0/index.html)

# jsf-2 - RichFaces dataTable 行删除

> ID：11723645
> 
> 赞同：1
> 
> 时间：2012-07-30T14:32:56.787
> 
> 标签：jsf-2, richfaces

我在 a 中有一个列`<rich:dataTable>`，其中包含`<a4j:commandButton>`用于删除行。

`#{bean.deleteCar(record.carId)}`当通过commandButton 的`action`属性调用bean 的删除函数（例如）时，删除行可以正常工作。不幸的是，当使用`<a4j:jsFunction>`'s`action`属性`record.carId`时，最后一行的属性被传递给 bean，而不是选定的行。

一些代码用于澄清。以下删除点击行的汽车：

```
<a4j:commandButton value="Delete"
                   action="#{bean.deleteCar(record.carId)}"/> 
```

以下删除最后一行的汽车：

```
<a4j:commandButton value="Delete" 
                   onclick="#{rich:component('confirmDeletePane')}.show()">
    <a4j:jsFunction name="deleteCar" 
                    action="#{bean.deleteCar(record.carId)}"
                    oncomplete="#{rich:component('confirmDeletePane')}.hide();"
                    render="carsTable"/>
</a4j:commandButton>

<rich:popupPanel id="confirmDeletePane" header="Delete" modal="true" autosized="true" onmaskclick="#{rich:component('confirmDeletePane')}.hide();">
        <h:outputText value="Delete?"/>
        <h:panelGroup>
                <a4j:commandButton value="Cancel" onclick="#{rich:component('confirmDeletePane')}.hide(); return false;" />
                <a4j:commandButton value="OK" onclick="deleteCar(); return false;"/>
        </h:panelGroup>
    </rich:popupPanel> 
```

如您所见，我正在尝试在删除之前确认用户的选择。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:57:28.690

正如[展示](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataTable&sample=dataTableEdit&skin=blueSky)所暗示的那样，我得出结论，一个改进的解决方案是使用索引进行行选择。我在这里复制以供将来参考。

commandLink（调用confirmPane）：

```
<a4j:commandLink execute="@this"
                 render="@none"
                 oncomplete="#{rich:component('confirmPane')}.show()">
       <h:graphicImage value="/images/icons/delete.gif" alt="delete" />
       <a4j:param value="#{it.index}" assignTo="#{carsBean.currentCarIndex}" />
</a4j:commandLink> 
```

ConfirmPane（调用 JS 函数）：

```
<rich:popupPanel id="confirmPane" autosized="true">
        Delete?
        <a4j:commandButton value="Cancel" onclick="#{rich:component('confirmPane')}.hide(); return false;" />
        <a4j:commandButton value="Delete" onclick="remove(); return false;" />
</rich:popupPanel> 
```

jsFunction（调用Bean的函数）：

```
<a4j:jsFunction name="remove" action="#{carsBean.remove}" render="table" execute="@this"
        oncomplete="#{rich:component('confirmPane')}.hide();" /> 
```

在支持 bean 中：

```
private int currentCarIndex; // with the getter/setter

public void remove() {
    // do your List removal (or DB transaction)
    // with the currentCarIndex
} 
```

# templates - ColdFusion - missing class file = JRun error

> ID：11723649
> 
> 赞同：3
> 
> 时间：2012-07-30T14:33:07.720
> 
> 标签：templates, coldfusion, coldfusion-9

My team runs ColdFusion (v9) on five separate servers. Three of them are on a load balanced router, and the other two are development and test machines.

Several months ago, we began to have issues where certain page/template requests would fail. When I say fail, I mean that the server would return a 500 error. The error, however, did **not** trigger our ColdFusion exception handling via cftry/cfcatch and cferror.

After examining the HTTP headers, it looked like some sort of jrun error, so I went into the exception log. Here is an example of an error (this one happened this morning):

```
"Error","jrpp-1","07/30/12","06:30:02",,"(class: cfezReporting2ecfc400556386, method: runPage signature: ()Ljava/lang/Object;) Incompatible object argument for function call The specific sequence of files included or processed is: X:\docs\ezBuilder\index.cfm'' "
java.lang.VerifyError: (class: cfezReporting2ecfc400556386, method: runPage signature: ()Ljava/lang/Object;) Incompatible object argument for function call
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at coldfusion.runtime.TemplateClassLoader.newInstance(TemplateClassLoader.java:552)
    at coldfusion.runtime.TemplateClassLoader.newInstance(TemplateClassLoader.java:523)
    at coldfusion.runtime.TemplateProxyFactory.getCFCInstance(TemplateProxyFactory.java:270)
    at coldfusion.runtime.TemplateProxyFactory.resolveName(TemplateProxyFactory.java:173)
    at coldfusion.runtime.TemplateProxyFactory.resolveName(TemplateProxyFactory.java:158)
    at coldfusion.runtime.TemplateProxyFactory.resolveName(TemplateProxyFactory.java:148)
    at coldfusion.cfc.ComponentProxyFactory.getProxy(ComponentProxyFactory.java:62)
    at coldfusion.tagext.lang.InvokeTag.doEndTag(InvokeTag.java:373)
    at cfezBuilder2ecfc293785079$funcCREATE_UVN._factor7(X:\docs\ezBuilder\components\ezBuilder.cfc:376)
    at cfezBuilder2ecfc293785079$funcCREATE_UVN.runFunction(X:\docs\ezBuilder\components\ezBuilder.cfc:327)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:472)
    at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:405)
    at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:368)
    at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:55)
    at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:321)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:517)
    at coldfusion.runtime.CfJspPage._invokeUDF(CfJspPage.java:2547)
    at coldfusion.tagext.lang.InvokeTag.doEndTag(InvokeTag.java:460) 
```

Once this error occurred on a template, it would continue to occur, i.e. it was not sporadic and didn't 'fix itself'.

Another interesting tidbit is that this error seemed to occur on all the servers simultaneously on the same file. By simultaneously, I mean by the time we received notice that one is erroring, we test the other servers and find they are also erroring.

Not being able to find help on this particular error detail anywhere, I made a guess that somehow ColdFusion was unable to find a template or class file. I checked each server and the .cfc file was there (plus, the 'template not found' exception has always been different).

So instead, I made a change to the file (ezReporting.cfc in the above example) and copied it to all the servers, and lo and behold, it worked. The change was simply adding and then removing a space - basically forcing the template to recompile, I guess. I did this each time over the next few weeks each time the error occurred. It was always on that .cfc file.

The next time the error happened, about a week later, it was on the exact same file. This time, I cleared the template cache on the server rather than physically change the template. It worked again.

Since then, this same error occurred on several different files - both CFCs and CFM files. I did not notice a pattern in (a) the "age"/last updated date of the files - everything from a day old to over a year, (b) the content of the files - everything from simple blocks to SQL queries to some basic set/looping, or (c) the names of the files.

This morning, it occurred on yet another file, one that I knew worked two days prior on all servers. The CFC file contents had not been touched on any servers since last year. And, when I went to all five servers, the exact same file failed on all of them. When I cleared the template cache, every server started working again.

I'm giving all these boring details because I'm reaching for anything that can help. Perhaps there is some sort of expiration occurring on the file itself, and that would explain why the file expired on all servers right around the same time -- we change it on the development server and then move it out to the test and production servers with a simple copy/paste. But, there doesn't seem to be any rhyme or reason for expiration, because the file in question is of varying ages as noted above.

I tried the Adobe forums to get help on this particular exception/dump, but have not found anyone who has run into the same thing.

Does anyone else have any ideas? This error troubles me because it doesn't trigger our normal exception handling, so we can't do much about it without human intervention. Thanks for any specific guidance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:16:29.977

正如 Barney 所说，您可能会遇到损坏的模板缓存。清除 /cfclasses 文件夹中的文件可能是一个很好的起点 - 然后检查文件系统的运行状况（碎片整理等）。您可能在加载类时遇到文件 I/O 问题。Web 服务器真正“运行”的是这些类，而*不是*.cfm 文件。

唯一让我感到困惑的是错误“同时发生”。您是否正在进行某种预编译过程？所有站点是否在 NAS 上共享相同的物理代码库？这就是我觉得奇怪的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:06:38.370

我遇到了同样的问题，不幸的是永远无法解决它。一个空格技巧与每次重新编译的微小修改完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:51:37.963

对于任何有同样问题的人，我想添加一个我最近研究的伪“解决方案”。我说伪是因为它没有解决我仍然不知道的根本问题。但它确实允许应用程序从错误中恢复。

简而言之，即使使用 type="any"，ColdFusion <cfcatch> 也不会捕获从 JRE 抛出的错误。但是，可以使用 <cfcatch type="java.lang.VerifyError"> 捕获此特定错误。

在该 cfcatch 中，我使用我的管理员功能通过 clearComponentCache() 和 clearTrustedCache() 方法清除模板缓存。然后，我没有复制刚刚失败的代码，而是执行 <cflocation> 让用户返回相同的 URL 以重试。

在此特定应用程序中转发用户工作时，对于 ajax 调用等情况可能会出现问题；但是，在这种情况下，我认为可以简单地重新包含 cfms 或重新调用第一次出错的 CFC。

让我知道这是否适合您，或者其他人是否找到了更好的解决方案。

# algorithm - 如何自动调整颜色和对比度

> ID：11723650
> 
> 赞同：9
> 
> 时间：2012-07-30T14:33:10.967
> 
> 标签：algorithm, image-processing, opencv, computer-vision

在我的项目中，我想实现一个自动添加或删除给定图片对比度的模块。我的问题是，找出我可以添加或删除多少对比度。我知道 Photoshop 的自动对比度/自动颜色功能。有人可以解释一下它是如何工作的或理论/论文/想法如何实现吗？

我知道，有一个直方图均衡功能。但这不是我想要的功能。

例如，我想选择与图像匹配的这三个渐变曲线之一。

[![图片由 ImageShack.us 托管](../Images/3af847fd414ced016a6ce0ff8fafea6d.png)](https://i.stack.imgur.com/rqLXR.jpg) [![图片由 ImageShack.us 托管](../Images/cb6b770c59856aa32bf2c4e1c136ebda.png)](https://i.stack.imgur.com/CTuW5.jpg) [![图片由 ImageShack.us 托管](../Images/b8c9e6697eef97972ac19b26a58ce2e4.png)](https://i.stack.imgur.com/YR2iY.jpg)

问候

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T18:36:16.887

执行“自动对比度”的一种简单线性方式是线性拉伸和偏移图像强度。这个想法是找到拉伸（对比度）和偏移（强度）校正参数，以便在校正后的图像中，第 5 个百分位将映射到 0，而第 95 个百分位将映射到 255。

在此处查看[我的答案](https://stackoverflow.com/questions/9744255/instagram-lux-effect/9761841#9761841)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-12T12:20:53.787

作为 Adi Shavit 答案的替代方案，还有一种用于图像对比度增强的非线性算法，该算法在论文[http://www.asp.eurasipjournals.com/content/pdf/1687-6180-2014-70.pdf](http://www.asp.eurasipjournals.com/content/pdf/1687-6180-2014-70.pdf)中描述。可能有人对此感兴趣。

# vim - 映射 Alt + left|right 移动标签

> ID：11723651
> 
> 赞同：8
> 
> 时间：2012-07-30T14:33:13.030
> 
> 标签：vim

理想情况下，我想`<A-left>`执行`:tabmove -1`和`<A-right>`执行`:tabmove +1`. 然而，当我把

```
nnoremap <A-left> :tabmove -1<cr>
nnoremap <A-right> :tabmove +1<cr> 
```

在我的 .vimrc 和 try or 中，vim 会发出哔哔声并将光标移到我按下的方向上一个字符。但是，`:tabmove -1<cr>`直接输入命令模式会产生所需的效果。我怎样才能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-06-04T20:59:50.267

首先查看终端发送给 vim 的关键代码：

```
$ sed -n l
^[[1;9D 
```

在上面的例子中，我运行了 sed 命令并按下了`Alt + Left`.

这`^[[1;9D`是发送到 vim 的转义序列，因此我们可以将其用于我们的映射。

将此添加到您的 .vimrc

```
map <Esc>[1;9D :tabn<CR> 
```

现在我们可以循环使用 vim 选项卡`Alt + Left`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T15:16:42.190

由于键盘输入在内部处理的方式，不幸的是，今天在大多数终端中这是不可能的，但应该在 GVIM 中工作。某些组合键，如`Ctrl`+ 非字母无法映射，`Ctrl`+ 字母与`Ctrl`+ `Shift`+ 字母无法区分。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

作为一种解决方法，请使用不同的键，例如`<Leader><Left>`/ `<Leader><Right>`。

# c++ - 模板元编程：（特征？）将指定的模板分解为类型 T

> ID：11723652
> 
> 赞同：3
> 
> 时间：2012-07-30T14:33:18.650
> 
> 标签：c++, templates, c++11, metaprogramming

我试图`T`从 type 推断出基础模板类型`E = T<T2,T3>`。例如，这可以使模板函数 pair_maker(const E & a) 可以与几种类似类型的容器之一一起使用。粗略的元代码：

```
template <typename T>
auto pairmaker(const E & a) -> PairContents<E,std::string>::type {
    ContainerPairMaker<E,std::string>::type output;
    ... some code ...
    return output;
} 
```

`PairContents<E,std::string>`

会将类型`vector<int>`转换为`vector<pair(int,std::string)>`或。`whatever<T1>``whatever<pair(T1,std::string)>`

类型剖析的另一个类似示例是 std::array （或类似容器），我想找出*容器*类型以创建一个新的类似数组。例如对于这些类型的功能（这是现在实际的工作代码）

```
template <typename T > 
auto make_some3(const T & a) 
           -> std::array<typename T::value_type,10*std::tuple_size<T>::value>{   
   return std::array<typename T::value_type,10*std::tuple_size<T>::value>{} ;
} 
```

这很好用，但我想要的是自动显式使用“std::array”。

对于 std::array 有 tuple_size 特性会有所帮助，并且可以使用类似的东西来查找`type`任何第二个参数，但我还是想不出任何东西来查找容器类型。

总结一下：什么样的机器（如果有的话）可以用于这样的情况。在何种程度上可以处理模板参数、模板-模板参数、任意数量的参数和未知类型的非模板参数的混合。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T14:45:55.517

这是一个想法：

```
 template <typename T, typename ...>
 struct tmpl_rebind
 {
     typedef T type;
 };

 template <template <typename ...> class Tmpl, typename ...T, typename ...Args>
 struct tmpl_rebind<Tmpl<T...>, Args...>
 {
     typedef Tmpl<Args...> type;
 }; 
```

用法：

```
typedef std::vector<int> IV;
typedef typename tmpl_rebind<IV, std::pair<double, std::string>>::type PV; 
```

现在`PV = std::vector<std::pair<double, std::string>>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T21:52:42.823

**这是我想出的一个自我答案，作为 Kerrek SB 答案的变体**

可以制作一个从特征中提取`std::vector`并`std::vector<int>`暴露它的特征，就像`::type`通过特征一样。是的，这个解决方案与 Kerrek 的解决方案几乎相同，但对我来说，使用语法更美观，将模板参数放在`::type`.

```
template <typename T, typename ...>
struct retemplate
{
    typedef T type;
};

template <template <typename ...> class Tmpl, typename ...T>
struct retemplate<Tmpl<T...>>
{
   template <typename ...AR>
   using type=Tmpl<AR...> ;
}; 
```

有了这个，你实际上就`retemplate<T<A,B,C>>::type`等于模板`T`

示例使用：

```
typedef std::vector<int> intvec; 
typedef retemplate<intvec>::type<double> doublevec; 
```

或公开容器类型

```
typedef std::vector<int> intv;
template <typename ...T>
using vector_T= retemplate<intv>::type<T...> ; 
```

请注意，在模板上下文中使用 this 时，在`template`之后需要一个额外的内容`::`，如下所示：（详细说明 Xeo 的评论）

```
template <typename T>
typename retemplate<T>::template type<double> containedDouble(T& a) {
   decltype(containedDouble(a)) out;
   for (auto &i : a)
      out.push_back(i);
   return out;
} 
```

这样做是获取一个类型的对象`T1<T2>`并将其内容复制到`T1<double>`. 例如`T1==std::vector`和`T2==int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T15:44:32.027

我建议看一看**A. Alexandrescu**的书**Modern C++ Design**。

如果我没记错的话，他解释了如何使用**类型列表**以类似列表的方式存储和访问任意类型。这些列表可用于在多种不同情况下提供类型信息。[**查看Loki**](http://loki-lib.sourceforge.net/)的实现，了解如何使用类型列表。

我不确定这是否有帮助，但也许您可以从 Loki 中使用的想法中学到一些东西，以便解决或至少更好地了解您手头的具体问题。

# facebook-javascript-sdk - OpenGraph values

> ID：11723656
> 
> 赞同：0
> 
> 时间：2012-07-30T14:33:29.110
> 
> 标签：facebook-javascript-sdk

I'm sorry, I have searched for a day and a half but I can't find the specific answer I'm looking for.

My Facebook Like button doesn't appear on IE, Chrome or Firefox. I am using Javascript.

1.  I have the required HTML addition.
2.  I need to put in the Meta Tag meta property="og:tag name" content="tag value"

    COULD I GET AN EXAMPLE FOR THE "TAG NAME" AND "TAG VALUE"?
    I don't know what to fill in!

3.  I am supposed to have the Javascript SDK right after the body; however, I don't know what to put for an APP_ID as in:

    ```
     <script>
     window.fbAsyncInit = function() {
     FB.init({
     appId      : 'YOUR_APP_ID', // App ID
      //CAN I GET AN EXAMPLE OF YOUR_APP_ID, please?
     channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      //is channel.html the page it's on?
     status     : true, // check login status
     cookie     : true, // enable cookies to allow the server to access the session
     xfbml      : true  // parse XFBML
     });
    // Additional initialization code here
     };
    // Load the SDK Asynchronously
    (function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
    }(document));
    </script> 
    ```

I am getting so frustrated! Please help me!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:39:20.060

这`YOUR_APP_ID`是您的 Facebook 应用程序的 ID。如果您还没有创建应用程序，您可以在[此处](https://developers.facebook.com/apps)创建。

但是，您无需使用应用程序即可使用 Like Button 插件。您应该能够通过从开发人员网站复制并粘贴插件代码来使用该插件。如果这不起作用，请使用[调试工具](https://developers.facebook.com/tools/debug)查看问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:12:31.383

好吧，我建议您更仔细地阅读 Facebook 的 JS SDK 的文档，以及“入门”和“核心概念”。在那里你会发现很多非常有用的信息。

我将尝试解释 App_id 是什么。当你想做一些更实用的应用程序，与来自 facebook 的用户信息交互时，你需要创建一个 Facebook 的应用程序。为此，请登录您的帐户并访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)。在那里你需要告诉你的应用程序的名称、URL 和其他一些东西。当您保存时，您会看到一个 app_id，这是一个在 Facebook 上标识您的应用的唯一编号。这个数字是你必须放在你的脚本中的吗（用引号括起来，不要忘记）。

频道文件是一个单行 html 文件，您必须将其放入服务器中，位于应用程序的同一域中。这个文件的内容是：

```
 <script src="//connect.facebook.net/en_US/all.js"></script> 
```

用您的应用程序语言环境替换“en_US”。

您对 OpenGraph 的元标记提出了质疑。好吧，当您单击 URL 的“喜欢”时，Facebook 机器人会导航到您的页面并读取元信息。当它找到 OpenGraph 元标签时，发布在用户墙上的信息更加个性化。一旦每个站点都有不同的信息要共享，您将不得不花一点时间来更多地了解您需要什么样的 OpenGraph 元标记。

# android - Android：无法获取KML文件解析然后在地图上绘制路线

> ID：11723660
> 
> 赞同：2
> 
> 时间：2012-07-30T14:33:44.163
> 
> 标签：android, maps, kml, draw, routes

我编写了一个应用程序来帮助人们找到合适的位置并显示目标的方向。以前，此功能运行良好，但现在绘制路线功能不起作用。我得到的例外是应用程序无法下载然后解析与路由对应的kml（**代码：xmlreader.parse(is);**），尽管生成的获取KML的URL是正确的（我在浏览器中测试它） - 对于示例：[https ://maps.google.com/maps?f=d&hl=en&saddr=21.04664,105.852203&daddr=21.040527,105.849783&ie=UTF8&om=0&output=kml](https://maps.google.com/maps?f=d&hl=en&saddr=21.04664,105.852203&daddr=21.040527,105.849783&ie=UTF8&om=0&output=kml)

我问自己 Google 的 MapView 方向 API 是否无法正常工作，或者我错过了一些东西。

这是我获取路线然后生成 URL 的代码 - 获取 KML 然后绘制路线。

```
public void drawPath(GeoPoint from,GeoPoint to, int color, MapView mMapView01) {

        NavigationDataSet navSet= new NavigationDataSet();
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");//from
        urlString.append( Double.toString((double)from.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)from.getLongitudeE6()/1.0E6 ));
        urlString.append("&daddr=");//to
        urlString.append( Double.toString((double)to.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)to.getLongitudeE6()/1.0E6 ));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
       Log.v("TEST", urlString.toString());
        try{
            // setup the url
            URL url = new URL(urlString.toString());
            // get our data via the url class
            InputSource is = new InputSource(url.openConnection().getInputStream());
//          DocumentBuilderFactory dbfAdd = DocumentBuilderFactory.newInstance();
//          DocumentBuilder dbAdd = dbfAdd.newDocumentBuilder();
//            dbAdd.parse(url.toString()); 
            // create the factory
            SAXParserFactory factory = SAXParserFactory.newInstance();
            // create a parser
            SAXParser parser = factory.newSAXParser();
            // create the reader (scanner)
            XMLReader xmlreader = parser.getXMLReader();
            // instantiate our handler
            NavigationSaxHandler navSaxHandler = new NavigationSaxHandler();
            // assign our handler
            xmlreader.setContentHandler(navSaxHandler);
            // perform the synchronous parse           
            xmlreader.parse(is);
            // get the results - should be a fully populated RSSFeed instance, or null on error
            navSet= navSaxHandler.getParsedData();
            Log.v("MAP", "input source: " + (is == null));
            } catch(Exception e) {
//              Log.d("DirectionMap","Exception parsing kml.");
                Log.v("DRAW", "Die here");
                e.printStackTrace();
            }
        try {
            String distance = navSet.getRoutePlacemark().getDistance();
            placeLabelTextView.setText(placeLabel + distance);
        } catch (Exception e) {
            // TODO: handle exception

        }
        //hien thi duong di

        Log.v("MAP",(navSet.getCurrentPlacemark() != null) + "-des: ");
        String path = navSet.getRoutePlacemark().getCoordinates();
        String[] pairs = path.trim().split(" ");
        String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude lngLat[2]=height
        try {
            GeoPoint startGP = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6), (int) (Double.parseDouble(lngLat[0]) * 1E6));
            mMapView01.getOverlays().add(new MyOverLay(startGP, startGP, 1));
            GeoPoint gp1;
            GeoPoint gp2 = startGP;
            int w = (int) (5 * ShowPlaceOnMapsActivity.this.getResources().getDisplayMetrics().density);
            for (int i = 1; i < pairs.length; i++) // the last one would be crash
                {
                lngLat = pairs[i].split(",");
                gp1 = gp2;
                gp2 = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6), (int) (Double.parseDouble(lngLat[0]) * 1E6));
                mMapView01.getOverlays().add(new MyOverLay(gp1, gp2, 2, color,w));
                }
            mMapView01.getOverlays().add(new MyOverLay(gp2, gp2, 3));

            //hien thi cac chi dan
            List<Overlay> mapOverlays;
            mapOverlays=mMapView01.getOverlays();
            String s=new String();
            String description=new String();
            String name=new String();
            Placemark p=new Placemark();
            Drawable drawable1=mMapView01.getResources().getDrawable(R.drawable.way_turn_mark);     
            MyItemizedOverlay itemizedOverlay1 = new MyItemizedOverlay(drawable1, mMapView01);

            for (Iterator<Placemark> iter=navSet.getPlacemarks().iterator();iter.hasNext();) {
                p = (Placemark)iter.next();
                if(!p.getTitle().equals("Route")){
                    s=p.getCoordinates();
                    description=p.getDescription();
//                  Log.v("TEST", "URL: " + p.getAddress());
                    name=p.getTitle();
                    lngLat =s.split(",");
                    gp2= new GeoPoint((int) (Double.parseDouble(lngLat[1])* 1E6), (int) (Double.parseDouble(lngLat[0]) * 1E6));
                    if(description != null)
                        itemizedOverlay1.addOverlay(new OverlayItem(gp2,name+"\n"+description,""));
                    else 
                        itemizedOverlay1.addOverlay(new OverlayItem(gp2, name, ""));
                    }
                }
            mapOverlays.add(itemizedOverlay1);

            mapController.animateTo(new GeoPoint( (startGP.getLatitudeE6() + gp2.getLatitudeE6())/2, (startGP.getLongitudeE6() + gp2.getLongitudeE6())/2 ));
            } catch (NumberFormatException e) {
            }

     } 
```

我得到的代码例外是：

**xmlreader.parse(is);**

```
org.apache.harmony.xml.ExpatParser$ParseException:....... not well-formed 
```

你遇到过这个问题吗？非常感谢任何帮助和评论。

**这是异常堆栈跟踪**

```
07-30 22:06:03.510: VERBOSE/TEST(234): http://maps.google.com/maps?f=d&hl=en&saddr=21.059457,105.843963&daddr=21.052597,105.840636&ie=UTF8&0&om=0&output=kml
07-30 22:06:04.190: VERBOSE/DRAW(234): Die here
07-30 22:06:04.190: WARN/System.err(234): org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 805: not well-formed (invalid token)
07-30 22:06:04.210: WARN/System.err(234):     at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:508)
07-30 22:06:04.210: WARN/System.err(234):     at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:467)
07-30 22:06:04.210: WARN/System.err(234):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:329)
07-30 22:06:04.210: WARN/System.err(234):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:302)
07-30 22:06:04.210: WARN/System.err(234):     at hust.se.vtio.icompanion.ShowPlaceOnMapsActivity.drawPath(ShowPlaceOnMapsActivity.java:301)
07-30 22:06:04.210: WARN/System.err(234):     at hust.se.vtio.icompanion.ShowPlaceOnMapsActivity.onOptionsItemSelected(ShowPlaceOnMapsActivity.java:245)
07-30 22:06:04.210: WARN/System.err(234):     at android.app.Activity.onMenuItemSelected(Activity.java:2170)
07-30 22:06:04.210: WARN/System.err(234):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
07-30 22:06:04.210: WARN/System.err(234):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:139)
07-30 22:06:04.210: WARN/System.err(234):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
07-30 22:06:04.210: WARN/System.err(234):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:525)
07-30 22:06:04.220: WARN/System.err(234):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
07-30 22:06:04.220: WARN/System.err(234):     at android.view.View.onTouchEvent(View.java:4179)
07-30 22:06:04.220: WARN/System.err(234):     at android.widget.TextView.onTouchEvent(TextView.java:6540)
07-30 22:06:04.220: WARN/System.err(234):     at android.view.View.dispatchTouchEvent(View.java:3709)
07-30 22:06:04.220: WARN/System.err(234):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-30 22:06:04.220: WARN/System.err(234):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-30 22:06:04.220: WARN/System.err(234):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
07-30 22:06:04.220: WARN/System.err(234):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
07-30 22:06:04.220: WARN/System.err(234):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 22:06:04.220: WARN/System.err(234):     at android.os.Looper.loop(Looper.java:123)
07-30 22:06:04.220: WARN/System.err(234):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-30 22:06:04.220: WARN/System.err(234):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 22:06:04.220: WARN/System.err(234):     at java.lang.reflect.Method.invoke(Method.java:521)
07-30 22:06:04.220: WARN/System.err(234):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-30 22:06:04.220: WARN/System.err(234):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-30 22:06:04.220: WARN/System.err(234):     at dalvik.system.NativeStart.main(Native Method) 
```

**这是我在浏览器中打开 URL 时得到的 KML 内容**

这是我从浏览器获得的 KML 文件的内容：

```
<kml xmlns="http://earth.google.com/kml/2.2">
<Document>
  <name>Driving directions to 21.052597,105.840636</name>
  <description><![CDATA[]]></description>
  <Style id="style3">
    <IconStyle>
      <Icon>
        <href></href>
      </Icon>
    </IconStyle>
  </Style>
  <Style id="style2">
    <LineStyle>
      <color>73FF0000</color>
      <width>5</width>
    </LineStyle>
  </Style>
  <Style id="style1">
    <IconStyle>
      <Icon>
        <href></href>
      </Icon>
    </IconStyle>
  </Style>
  <Placemark>
    <name>From: 21.059457,105.843963</name>
    <styleUrl>#style3</styleUrl>
    <Point>
      <coordinates>105.842567,21.058840,0.000000</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>Driving directions to 21.052597,105.840636</name>
    <styleUrl>#style2</styleUrl>
    <ExtendedData>
      <Data name="_SnapToRoads">
        <value>true</value>
      </Data>
    </ExtendedData>
    <LineString>
      <tessellate>1</tessellate>
      <coordinates>
        105.842567,21.058840,0.000000
        105.842346,21.059200,0.000000
        105.841080,21.060551,0.000000
        105.840530,21.061300,0.000000
        105.840393,21.061399,0.000000
        105.839653,21.061701,0.000000
        105.839653,21.061701,0.000000
        105.838860,21.061159,0.000000
        105.838860,21.061159,0.000000
        105.838852,21.061050,0.000000
        105.838409,21.060699,0.000000
        105.838409,21.060699,0.000000
        105.838692,21.059879,0.000000
        105.840950,21.055691,0.000000
        105.840950,21.055691,0.000000
        105.840477,21.055571,0.000000
        105.839493,21.054930,0.000000
        105.839493,21.054930,0.000000
        105.839981,21.054060,0.000000
        105.840553,21.052561,0.000000
      </coordinates>
    </LineString>
  </Placemark>
  <Placemark>
    <name>To: 21.052597,105.840636</name>
    <styleUrl>#style1</styleUrl>
    <Point>
      <coordinates>105.840546,21.052563,0.000000</coordinates>
    </Point>
  </Placemark>
</Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:20:41.287

这种通过解析 KML 文件从 Google 中提取 Google 路线的方式自 2012 年 7 月 27 日起不再可用（因为 Google 改变了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 来获取），是时候将您的代码迁移到 JSON 而不是 KML。

[在我自己的问题中查看](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)答案。

# android - 我的代码行没有延迟执行 - android

> ID：11723663
> 
> 赞同：0
> 
> 时间：2012-07-30T14:33:49.937
> 
> 标签：android, multithreading, imagebutton, android-image

最奇怪的事情正在发生。在我的 onClick(View ...) 中，我有代码块，主要是“if/else”块。序列是（在伪代码中，为您节省冗长的代码）：

1.  我有一个需要使用 imageButton.setImageResource(randomImage); 设置的图像 然后
2.  我有一个与需要播放的图像相关联的 MediaPlayer，然后
3.  我在这里放置一个 sleep(1800) 否则 MediaPlayer 会运行到下一个 MediaPlayer （这工作正常）
4.  此图像与另一个图像进行比较。如果不一样，则播放另一个名为“boo”的 MediaPlayer，并且应该在上面的代码 1 中显示的图像被“标志”图像替换。else //如果它是正确的图像然后
5.  切换到“另一个”图像，播放它对应的 MeidaPlayer，播放“干杯”MediaPlayer 并将图像更改为“tick”图像，然后执行一些其他逻辑操作。

但是正在发生的是代码 2\. 正在播放，代码 3\. 正在发生。代码 4\. 只有“嘘”媒体播放器正在发生，我注意到图像按钮在闪烁。应该在代码 1 中设置的图像被延迟，并且仅在“嘘”媒体播放器之后发生。替换代码 1\. 中的第一个图像设置的“标志”图像正在发生，但由于代码 1\. 延迟，正在发生的是图像没有改变（虽然它是，它只是延迟然后它闪烁所以很快，它似乎没有改变）。所以代码 1\. 延迟了。此外，如果它进入 else 并单击右侧图像，则代码 5 中的图像。确实切换到“另一个”，但相应的 MeidaPlayer 不播放，“干杯”MediaPlayer 不播放，“打勾'图像没有' t 显示，其他逻辑不发生。好像它忽略了代码。这里发生了什么事？这是多线程的情况吗？将代码的不同部分分组到各自的线程中并立即启动它们只会引发异常。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:27:30.237

只是为了解释亚当的想法。

把它放在你的 Activity 类中：

```
final Handler handler = new Handler(); 
Runnable _rnbl = new Runnable() { 
    public void run() {
        // Your code
    }   
}; 
```

像这样称呼它

```
handler.postDelayed(_rnbl , 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:55:32.333

如果您想延迟您的代码，请使用`Handler.postDelayed(Runnable, long)`. 这不会阻塞 UI 线程，并且会在您想要的时候执行。

Whitout 你的代码，真的不清楚你想要实现什么，以及你是如何实现它的。

# python - Python Xpath 查找包含 @domain 的 text()

> ID：11723669
> 
> 赞同：0
> 
> 时间：2012-07-30T14:34:26.923
> 
> 标签：python, xpath

我正在寻找正确的 xpath 表达式来搜索包含字符串的 html 页面中的所有 text()：@domain

在匹配提取直到左边的第一个空格和右边的第一个空格 -

只是为了获取电子邮件地址。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:41:39.180

此 Xpath 查询将获取包含“@domain”的所有节点的文本

```
//*[contains(text(), '@domain')]/text() 
```

然后，您可以使用 Python 解析文本以提取电子邮件

```
>>> import re
>>> re.findall(r'[\w\.]+@domain\.[\w\.]+', 'this is our info: info@domain.co.uk')
['info@domain.co.uk'] 
```

更新：

看起来scrapy中的XPath选择器[有`re`方法](http://doc.scrapy.org/en/latest/topics/selectors.html#using-selectors-with-regular-expressions)，我不知道：

```
>>> hxs.select('//a[contains(@href, "image")]/text()').re(r'Name:\s*(.*)')
[u'My image 1',
 u'My image 2',
 u'My image 3',
 u'My image 4',
 u'My image 5'] 
```

# visual-c++ - .inl 文件的问题 c++

> ID：11723670
> 
> 赞同：0
> 
> 时间：2012-07-30T14:34:31.760
> 
> 标签：visual-c++

我在 .inl 文件中的函数模板实现有问题（visual c++）

我在头文件中有这个。

数学.h->>

```
#ifndef _MATH_H
#define _MATH_H
#include <math.h>

template<class REAL=float>
struct Math
{
     // inside this structure , there are a lot of functions , for example this..
     static REAL  sin ( REAL __x );
     static REAL  abs ( REAL __x );
};

#include "implementation.inl"     // include inl file
#endif 
```

这是 .inl 文件。

实施.inl -->>

```
template<class REAL>
REAL Math<REAL>::sin (REAL __x)
{
    return (REAL) sin ( (double) __x );
}

template<class REAL>
REAL Math<REAL>::abs(REAL __x)
{
    if( __x < (REAL) 0 )
        return - __x;
    return __x;
} 
```

当我调用它时，正弦函数会在运行时给我一个错误。但是，abs 函数可以正常工作。

我认为问题在于调用 .inl 文件中的头文件 math.h 的函数之一

为什么我不能在 .inl 文件中使用 math.h 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:43:51.667

该问题与文件无关`.inl`- 您只是`Math<REAL>::sin()`递归调用直到堆栈溢出。在 MSVC 10 中，我什至收到了一个很好的警告，指出了这一点：

```
warning C4717: 'Math<double>::sin' : recursive on all control paths, function will cause runtime stack overflow 
```

尝试：

```
 return (REAL) ::sin ( (double) __x ); // note the `::` operator 
```

另外，作为旁注：宏名称`_MATH_H`保留供编译器实现使用。在许多使用实现保留标识符的情况下，实际遇到冲突会有些不幸（尽管您仍应避免使用此类名称）。但是，在这种情况下，该名称`math.h`很有可能与实际用于防止其被多次包含的名称发生冲突。

您绝对应该选择一个不太可能发生冲突的不同名称。请参阅[在 C++ 标识符中使用下划线的规则是什么？](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)为规则。

# php - ZF2：如何在自定义路由器中获取 Zend\Db\Adapter？

> ID：11723676
> 
> 赞同：1
> 
> 时间：2012-07-30T14:34:39.050
> 
> 标签：php, zend-framework, zend-framework2

如标题所示，我正在努力访问路由器内的 DBAdapter。实现 ServiceLocatorAwareInterface 并没有多大帮助（ZF2 不注入任何东西）。将其声明为具有自定义工厂的模块中的服务也不是一种选择，因为它扩展了 Http/Parts 路由器并需要根据路由传递的配置参数（我不想对它们进行硬编码）

我已经尝试过的：

模块.config.php：

```
(...)
'router' => array(
    'routes' => array(
        'adm' => array(
            'type'    => 'Custom\Mvc\Router\Http\Segment',
            'options' => array(
                'route'    => '/admin[/:language[/:controller[/:action[/:params]]]]',
                'constraints' => array(
                    'language'  => '(pl|en)',
                    'controller' => "[a-zA-Z0-9_\-]*",
                    'action'     => "[a-zA-Z0-9_\-]*",
                    'params'        => "(.*)",
                ),
                'defaults' => array( ... ),
            ),
            'may_terminate' => true,
        ),
    ),
),
'service_manager' => array(
     (...)
    'invokables' => array(
        'Custom\Mvc\Router\Http\Segment' => 'Custom\Mvc\Router\Http\Segment',
    ),
),
(...) 
```

到目前为止，Custom\Mvc\Router\Http\Segment 只是 Zend\Mvc\Router\Http\Segment 的一个副本，并以类似的方式添加了接口 ServiceLocatorAwareInterface、AdapterAwareInterface 和相应的方法：

```
public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
{
    var_dump($serviceLocator);
    exit();
} 
```

它从不进入 setServiceLocator 方法，只有 RouteInterface::factory()，然后调用构造函数。

再次设置工厂也没有帮助 - 代码没有执行。将“invocables”或工厂移动到应用程序配置后，行为相同。

目前使用 Zend Framework 2 RC1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:00:16.970

如果你能给我们一些代码会更容易.. :)

我的建议是使用工厂来实例化您的自定义路由器或将其设置为可调用类（要求您实现 ServiceLocatorAwareInterface 以便您可以在路由器中进行设置）

# c++ - 在 C++ 中就地实现接口

> ID：11723678
> 
> 赞同：2
> 
> 时间：2012-07-30T14:34:43.697
> 
> 标签：c++, virtual, declaration

我想使用 c++ 实现这样的结果：

爪哇：

```
public interface ITemp {
    void onCall(double value);
} 
```

主要：

```
double d=2;
ITemp mVariable = new ITemp() {
@Override
    public void onCall(double value) {
    ... what to do... you can use 'd' variable...
    }
}; 
```

在 C++ 中：

```
class ITemp {
public:
    virtual void onCall(double something) =0;
    virtual ~ITemp();
}; 
```

主要：

```
double d=2;
ITemp mVariable = .... // I cannot instantiate class containing pure virtual method
// But I want to use variable d to create a method 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:49:17.977

你不能完全做到这一点，因为你不能在 C++ 中创建匿名类，但你可以做类似的事情：

```
int main()
{
    double d = 2;
    class T : public ITemp
    {
        double& m_v;
    public:
        T(double& v) : m_v(v) {}
        void onCall(double value)
        {
            // Do something with m_v;
            m_v *= value;
        }
    } t(d);
    t.onCall(4);
    std::cout << "d: " << d << std::endl;  // d is 8.
} 
```

引用 ('&')`m_v` *生成与 相同的变量*，`d`但名称不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:48:12.560

在构造函数中用 d 构造类怎么样？

```
 class ITemp {
      double m_d;
    public:
      ITemp(double d) : m_d(d) {}
      virtual void onCall(double something) = 0; // inside, you can use m_d variable         along with something for whatever you want.
      virtual ~ITemp();
    }; 
```

我想我不明白 onCall 方法做了什么以及你想如何使用它。如果要使用 d，请将其传递给构造函数或将其作为另一个参数传递给 onCall。

当然，如果这不是您想要做的，模板会帮助您。但是，它们通常用于每次将不同的类型发送到课堂上。看来你不需要那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:14:25.980

您可以将接口实现为未命名的类，但不能访问局部变量并创建闭包。

```
int main(int argc, char* argv[])
{
    class : public ITemp
    {
    public:
        virtual void onCall(double something)
        {
            std::cout << something;
        }
    } temp;

    ITemp& itemp = temp;

    itemp.onCall(100.3145);

    return 0;
} 
```

# html - 为什么文字褪色但图像不褪色？

> ID：11723681
> 
> 赞同：0
> 
> 时间：2012-07-30T14:34:52.027
> 
> 标签：html, css

继承人视觉：[http ://cl.ly/image/2L3g1d0W1r1Y](http://cl.ly/image/2L3g1d0W1r1Y)

文字褪色很好，但左侧的图像是即时的，不会与文字同时褪色。如何让它们在所有浏览器中同时淡入？它似乎在 chrome 中运行良好，但在 Firefox 或 Safari 中却不行。

我对发生的事情有点困惑，但这是我的 html：

```
<ul class="action">
    <li><a class="visit-site" href="http://google.com">Visit Site</a></li>
    <li><a class="back-to-top" href="#portfolio">Back to top</a></li>
</ul> 
```

这是CSS：

```
ul.action a.visit-site {
background: transparent url('../images/arrow-small-right-rest.png') no-repeat 0 2px;
padding-left: 18px;
color: #57585a;
-webkit-transition: 0.5s all ease;
-moz-transition: 0.5s all ease;
transition: 0.5s all ease;
-o-transition-duration: 0.5s all ease;
}

ul.action a.visit-site:hover { 
background: transparent url('../images/arrow-small-right-over.png') no-repeat 0 2px;
color: #3ee1df; 
} 
```

使用雪碧：

```
 ul.action a.back-to-top{
background: transparent url('../images/sprite.png') no-repeat 0 2px;
padding-left: 18px;
width: 13px;
height: 13px;
color: #57585a;
-moz-transition: all 0.5s ease;
-o-transition: all 0.5s ease;
-webkit-transition: all 0.5s ease;
-ms-transition: all 0.5s ease;
transition: all 0.5s ease;
}

ul.action a.back-to-top:hover{ 
background-position: 0 -63px;
color: #3ee1df; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:26:28.930

如果您在整体设计和开发中使用 jQuery 之类的东西，您可以“动画化”您拥有的整个 UL 元素的“不透明度”，这应该会创建您想要的过渡。

但并非所有浏览器都更支持不透明度，因此较旧的浏览器更是如此。有跨浏览器的解决方案，但总之你想调整不透明度来创建透明效果

# sql-server-2005 - SQL - 压缩重复的布尔“WHEN”语句

> ID：11723692
> 
> 赞同：1
> 
> 时间：2012-07-30T14:35:45.477
> 
> 标签：sql-server-2005

请任何人都可以提出一种压缩此代码的方法，以减少其重复性。非常感谢

```
 select case
    when c=1 and cs=1 and f=0 and fs=0 then 'FPL02'
    when c=0 and cs=0 and f=1 and fs=1 then 'FPL03'
    when c=1 and cs=0 and f=0 and fs=0 then 'FPL04'
    when c=0 and cs=0 and f=1 and fs=0 then 'FPL05'
    when c=1 and cs=1 and f=1 and fs=1 then 'FPL06'
    when c=1 and cs=1 and f=1 and fs=0 then 'FPL07'
    when c=1 and cs=0 and f=1 and fs=1 then 'FPL08'
    when c=1 and cs=0 and f=1 and fs=0 then 'FPL09'
    when Ab=1 then 'FPL10'
    when cpc=1 and plo=0 then 'FPC01'
    when cpc=0 and plo=1 then 'FPC02'
    when cpc=1 and plo=1 then 'FPC03'
    else 'FPL01' end

    from (select ptmatter, BillLHAbsolute as Ab, BillLHChildren as C, BillLHChildrenSettle as CS, BillLHFinances as F, BillLHFinancesSettle as FS, BillLHCPC as CPC, BillLHPLO as PLO from MatterDataDef) as mmd
    where ptmatter=$matter$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:30:56.750

在不同的列上有这么多不同的条件语句，我真诚地怀疑您是否可以压缩该代码，同时让其他人仍然可以维护它。

例如，你需要这个：

```
select case
    when c IN (0, 1) AND cs IN (0, 1) AND f IN (0, 1) AND fs IN (0, 1) then
        case     
            when c=1 and cs=1 and f=1 and fs=0 then 'FPL07'     
            when c=1 and cs=0 and f=1 and fs=0 then 'FPL09'     
            else 'FPL0' + cast(c * 5 + f * 6 - cs * 2 - fs * 2 - 1 as char(1))
        end
    when Ab = 1 then 
        'FPL10'
    when cpc IN (0, 1) AND plo IN (0, 1) then
        'FPC0' + cast(cpc * 1 + plo * 2 as char(1))
    else 
        'FPL01' 
    end 
```

它是浓缩的（有点），但是你用更少的行来换取更少的可读性。

总而言之，真的没有那么多`WHEN`说法。

# php - 如何从表中选择所有数据但通过php一次只显示一行

> ID：11723694
> 
> 赞同：-2
> 
> 时间：2012-07-30T14:35:46.907
> 
> 标签：php, sql

所以我在sql中有一个表。基本上是检查报告。我已经创建了效果很好的表单。提交。现在我想创建一种方法来调用表格中的单个报告，并将其显示在 php 的表格中。下面的代码非常适合显示我的信息（有很多超过 3 列，仅以 3 为例）。问题是我想基本上一次只显示一份检查报告，甚至可能根据提交的日期创建搜索。下面的代码是我知道如何选择所有表的唯一方法。

```
<?php 

$result = mysql_query("SELECT * FROM inspection ORDER BY name");

echo "<table border='1'>
<tr>
<th>ID #</th>
<th>Name</th>
<th>inspection #</th>
</tr>";

while($row = mysql_fetch_array($result))
{
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td>" . $row['Name'] . "</td>";
  echo "<td>" . $row['Inspection #'] . "</td>";
  echo "</tr>";
}
echo "</table>";

?> 
```

这很好用，只需要知道如何更好地将它用于我的搜索。请记住，我正在通过 php 为最终用户执行此操作，以便他可能只看到一个页面，该页面为他提供了所有检查日期，然后单击该页面，它会提取所有数据并显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:41:36.017

SELECT * FROM 检查 WHERE`<column>` `<operator>` `<value>`

可以来自`<value>`多个地方：下拉列表，最终用户从选项中选择一个值，或者最终用户输入他们想要的内容的输入字段。同样，您可以通过向 where 语句添加更多子句来过滤许多其他选项。

作为给定示例的补充，如果您只想选择名称为 Bob 的检查，您可以执行以下操作：

SELECT * FROM 检查 WHERE Name = 'Bob'

如果您希望名称是由最终用户定义的“通用”，请给他们一个输入字段。

**搜索.php**

```
<form action="result.php" method="post">
     <input type="text" name="Name" />
</form> 
```

**结果.php**

```
SELECT * FROM inspections WHERE Name = $_GET['Name'] 
```

以上是一个**非常**粗略的想法，但它应该是一个很好的起点。就像@Matt 添加的那样，您可以在服务器端或客户端进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:41:08.903

有两种方法可以做到这一点：使用服务器端处理页面进行分页，或 javascript (jquery) 分页。

我过去都做过，发现 jQuery 数据表是一个很好的工具——你将所有记录打印到页面上，然后 jQuery 接管并以分页格式显示它们。[http://datatables.net/](http://datatables.net/)

要使用服务器端分页执行此操作，您需要跟踪记录数和您所在的当前记录。然后您必须将您的 SQL 语句修改为如下内容：

```
SELECT * FROM inspection ORDER BY name LIMIT $page, 1 
```

并在每次您在表格中向前/向后导航时传递 $page。这是相当密集的代码，但如果你正在寻找一个很好的练习。

最后，如果您想在某个日期范围内进行搜索，您可以进一步修改您的查询：

```
SELECT * FROM inspection 
WHERE date BETWEEN [some start date] AND [some end date] 
ORDER BY name LIMIT $page, 1 
```

# xcode - 在 Xcode 中为两个相同的选择器组件指定数组

> ID：11723696
> 
> 赞同：0
> 
> 时间：2012-07-30T14:35:50.103
> 
> 标签：xcode, picker

对于具有两个相同组件的选择器中的数组，这是合适的代码吗？或者两个组件可以以某种方式使用相同的数组？

```
 - (void)viewDidLoad
{
    self.fromArray = [[NSArray alloc] initWithObjects:
                      @"Annual", @"Monthly", @"48/Year", @"SemiMonthly", @"BiWeekly", @"Weekly", @"Hourly", nil];

    self.fromValues = [[NSArray alloc] initWithObjects: 
                       [NSNumber numberWithFloat:1.0],
                       [NSNumber numberWithFloat:12.0], 
                       [NSNumber numberWithFloat:48.0],
                       [NSNumber numberWithFloat:24.0], 
                       [NSNumber numberWithFloat:26.0],
                       [NSNumber numberWithFloat:52.0], 
                       [NSNumber numberWithFloat:2080.0], nil];

    self.toArray = [[NSArray alloc] initWithObjects:
                      @"Annual", @"Monthly", @"48/Year", @"SemiMonthly", @"BiWeekly", @"Weekly", @"Hourly", nil];

    self.toValues = [[NSArray alloc] initWithObjects: 
                     [NSNumber numberWithFloat:1.0],
                     [NSNumber numberWithFloat:12.0], 
                     [NSNumber numberWithFloat:48.0],
                     [NSNumber numberWithFloat:24.0], 
                     [NSNumber numberWithFloat:26.0],
                     [NSNumber numberWithFloat:52.0], 
                     [NSNumber numberWithFloat:2080.0], nil]; 
```

另外，如何使用来自组件和文本字段的值正确格式化计算？这只是行不通。

我试过这个，但使用“行”时出现未声明的标识符错误。

```
- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    if (component == 0) {
        return [fromArray objectAtIndex:row];
    }
    return [toArray objectAtIndex:row];
} 
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component {
}

- (IBAction)Convert:(id)sender {
    float valuein = [[fromValues objectAtIndex:row] floatValue];
    float valueout = [[toValues objectAtIndex:row] floatValue];
    float input = [inputText.text floatValue];
    float result = input * valuein / valueout;
    NSString *resultString = [[NSString alloc] initWithFormat: @"$ %@", [toArray objectAtIndex:row]];
    resultText.text = [NSString stringWithFormat:@"$%6.2f",result];
} 
```

编辑：这是完整 .m 文件代码的当前版本，如下所示。我怀疑有一些不必要的代码。唯一的警告是未使用的变量“resultString”。

```
#import "PayFrequencyViewController.h"

@interface PayFrequencyViewController ()

@end

@implementation PayFrequencyViewController
@synthesize payPicker;
@synthesize toArray;
@synthesize fromArray;
@synthesize toValues;
@synthesize fromValues;
@synthesize resultText;
@synthesize inputText;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    self.fromArray = [[NSArray alloc] initWithObjects:
                      @"Annual", @"Monthly", @"48/Year", @"SemiMonthly", @"BiWeekly", @"Weekly", @"Hourly", nil];

    self.fromValues = [[NSArray alloc] initWithObjects: 
                       [NSNumber numberWithFloat:1.0],
                       [NSNumber numberWithFloat:12.0], 
                       [NSNumber numberWithFloat:48.0],
                       [NSNumber numberWithFloat:24.0], 
                       [NSNumber numberWithFloat:26.0],
                       [NSNumber numberWithFloat:52.0], 
                       [NSNumber numberWithFloat:2080.0], nil];

    self.toArray = self.fromArray;
    self.toValues =  self.fromValues;

    [super viewDidLoad];
    inputText.keyboardType = UIKeyboardTypeDecimalPad;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.toArray = nil;
    self.fromArray = nil;
    self.resultText = nil;
    self.inputText = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {

    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

    if (component == 0) {
        return [fromArray count];
    }
    return [toArray count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    if (component == 0) {
        return [fromArray objectAtIndex:row];
    }
    return [toArray objectAtIndex:row];
} 

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component {
    _row = row;
}

- (IBAction)Convert:(id)sender {
//    float valuein = [[fromValues text] floatValue];
//    float valueout = [[toValues text] floatValue];
//    [resultText setText:[NSString stringWithFormat:@"%6.2f", result]];
//    [inputText resignFirstResponder]; 
    float valuein = [[fromValues objectAtIndex:_row] floatValue];
    float valueout = [[toValues objectAtIndex:_row] floatValue];
    float input = [inputText.text floatValue];
    float result = input * valuein / valueout;
    NSString *resultString = [[NSString alloc] initWithFormat: @"$ %@", [toArray objectAtIndex:_row]];
    resultText.text = [NSString stringWithFormat:@"$%6.2f",result];
}

- (IBAction)Clear:(id)sender {
    inputText.text = @"";
    resultText.text = @"";
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [inputText resignFirstResponder];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:02:56.773

好的，有几件事：

首先，您的数组正在泄漏内存，因为您`alloc`没有`init`释放它们（除非您使用 ARC，在这种情况下这很好）。

其次，如果你想让他们共享同一个数组，你为什么不做类似的事情

```
 self.toArray = self.fromArray;
 self.toValues =  self.fromValues; 
```

?

> 如何使用来自组件和文本字段的值正确格式化计算？

你需要在这里更清楚，我不明白你在做什么。

但是，在您的第一段代码中：在您尝试使用`row`它时没有定义。您可能需要了解[变量和范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。

为什么不在你`_row`的类中创建一个实例变量`@interface`

```
NSInteger _row; 
```

并将该变量设置为

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component {
      _row = row;
 } 
```

ant 那么，`_row`在需要的时候再使用？

至于最后一段代码，你想用什么来实现`[fromValues text]`？

# c# - 使用来自另一个构造函数的参数调用构造函数

> ID：11723698
> 
> 赞同：0
> 
> 时间：2012-07-30T14:35:51.370
> 
> 标签：c#, constructor, arguments

我试图通过传递一些参数（args1，args2）从类 A 调用类 B 的构造函数。我正在使用这样的东西：

```
public class A
{
       private readonly B _b;
       public A()
       {
         _b=new B(TypeA args1,TypeB args2);
       }

...
}

public class B
{

   public B(TypeA  new_args1,TypeB new_args2)
   {
     ...
   }

...
} 
```

但是从我在调试中看到的 args1 和 args2 具有我想要发送的正确值，new_args1 和 new_args2 不会改变。有没有我必须使用的特定语法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:39:30.637

我不确定你为什么将 args 称为 B“new”的构造函数。它们是实例化该特定对象实例*的参数。*

除了您在参数声明中缺少类型之外，您的代码看起来是正确的。究竟是*什么*问题。

```
public B(new_args1,new_args2) 
```

缺少类型，例如

```
public B(int new_args1, int new_args2) 
```

鉴于上述类型假设

```
_b=new B(42, 24); 
```

将导致 B 被初始化为

```
public B(int new_args1, int new_args2)
{
    // new_args1 has the value 42
    // new_args2 has the value 24
} 
```

假设您在 B 中的某处分配这些值，例如

```
public class B 
{
    public int A1 { get; private set; }
    public int A2 { get; private set; }
    public B(int new_args1, int new_args2)
    {
        // new_args1 has the value 42
        A1 = new_args1;
        // new_args2 has the value 24
        A2 = new_args2;
    }
} 
```

然后

```
_b.A1 
```

将具有值 42，并且

```
_b.A2 
```

将具有值 24

初始化_b之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:52:47.100

首先让我们修复语法：

```
public class A
{
    private readonly B _b;
    public A(TypeA args1, TypeB args2)
    {
        _b = new B(args1, args2);
    }

}

public class B
{
    public B(TypeA new_args1, TypeB new_args2)
    {

    }

} 
```

请注意，参数类型必须完全匹配，否则可能会调用具有匹配签名的另一个构造函数。假设`B`在这种情况下您有两个构造函数，第一个被调用，第二个没有：

```
public class B
{
    public B(TypeA new_args1, TypeB new_args2)
    {

    }

    public B(TypeA new_args1, TypeC new_args2)
    {

    }

} 
```

* * *

还有一点：在这种情况下，我会使用 DI（**依赖注入）。**在构造函数中进行构造是一个缺陷，除非构造的对象是诸如 等的原子数据`List`结构`Dictionary`。

```
public class M
{
    public void Main(TypeA new_args1, TypeB new_args2)
    {
        var b = new B(new_args1, new_args2);
        var a = new A(b);
    }
}

public class A
{
    private readonly B _b;
    public A(B b)
    {
        _b = _b;
    }

}

public class B
{
    public B(TypeA new_args1, TypeB new_args2)
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:45:33.910

那么我在你的代码中看到的错误是你应该用括号声明你的 A 构造函数，即 A() 并检查它是否有效。除此之外，您的代码看起来绝对正确。

# jquery - 我在学习时遇到的jQuery问题（初学者）

> ID：11723704
> 
> 赞同：0
> 
> 时间：2012-07-30T14:36:19.763
> 
> 标签：jquery

1.  本例中的 domEle 是什么？我可以在 jQuery.com 中看到解释 - jQuery.each(collection, callback(indexInArray, valueOfElement))，但对我来说仍然很难理解什么是“valueOfElement”？任何人都可以为我澄清一下吗？

    ```
    $("button").click(function () {
      $("div").each(function (index, domEle) {
        $(domEle).css("backgroundColor", "yellow"); 
        if ($(this).is("#stop")) {
          $("span").text("Stopped at div index #" + index);
          return false;
        }
      });
    }); 
    ```

2.  如果我会这样写：`$("input[name='newsletter']").next().text(" is newsletter");` jquery 只会找到完全匹配，如果我这样写：`$("input[name$='newsletter']").next().text(" is newsletter");`jquery 会找到完全匹配并且也可以说“时事通讯”的值？

3.  作者使用此代码：

    ```
    $(document).mouseup(function(e) {
                if($(e.target).parent("a.signin").length==0) {
                    $(".signin").removeClass("menu-open");
                    $("fieldset#signin_menu").hide();
                }
            }); 
    ```

    每当用户按下文档上的其他任何位置时隐藏下拉菜单。任何人都可以评论这条线 `if($(e.target).parent("a.signin").length==0) {`，因为我不完全理解我们在这里做什么。原文在这里：[http ://aext.net/2009/08/perfect-sign-in-dropdown-box-likes-twitter-with-jquery/](http://aext.net/2009/08/perfect-sign-in-dropdown-box-likes-twitter-with-jquery/)

4.  我应该注意的默认方法调用？

在其中一个教程中，我发现了这样的评论：

“最后，如果我们在 CSS 中不包含边距，则 CSS 方法调用的结果是 auto，无法正确解析，因此我们需要将文本“auto”替换为数字 0”

```
var top = $('#comment').offset().top - parseFloat($('#comment').css('marginTop').replace(/auto/,0)); 
```

任何人都可以对此发表评论，因为我不完全理解他在这里做什么。

原文在这里：http: [//jqueryfordesigners.com/fixed-floating-elements/](http://jqueryfordesigners.com/fixed-floating-elements/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:44:01.133

1）它是迭代元素 - 当前正在处理的元素`each`。它会自动转发给回调。（我不喜欢这个模型；我个人更喜欢使用`$(this)`内部`each`回调）。

2) 第一个找到`name`属性正好是的元素`newsletter`，而后者找到一个`name`属性*以 结尾* `newsletter`的元素。的使用`$`是从正则表达式语法中借用的。（正则表达式是一个完全独立的主题）。

3) 这是一个事件委托的例子（虽然不是一个很好的例子——jQuery 可以比这个例子更有效地处理这个）。事件委托绝对值得研究。

您提到的行询问事件的触发元素 - 触发事件的元素 - 并根据条件检查其父级。

4）我什至不会在这一点上花费任何精力 - 它非常不标准并且针对特定用例进行了本地化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:48:32.617

1.) $("div") 将选择页面上的每个 div。每个都将遍历所有这些 div。对于每次迭代，domEle 将是循环当前正在迭代的 div 的引用。

2.) ^= 是您要查找的内容， ^= 搜索以给定字符串开头的所有内容。$= 搜索所有以给定字符串结尾的字符串： http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

3.) e.target 是用户点击的地方。.parent("a.signin").length==0 如果父级是 .signin 类的锚，则选择父级。检查长度为零等于询问是否选择了任何内容。所以基本上，如果用户没有在类登录的锚点内点击，那么就做点什么。

4.) $('#comment').offset().top 从#comment 元素的顶部获取偏移量。parseFloat($('#comment').css('marginTop').replace(/auto/,0)) 从元素顶部获取边距。如果边距设置为“自动”，则认为边距为 0。 Parsefloat 确保将其作为数字处理，然后从顶部偏移量中减去。这是自定义代码，不是您经常使用/需要的东西。

# sql - 如何在没有安装 SQL 本机客户端 2008 的情况下部署 dbExpress 数据库应用程序？

> ID：11723706
> 
> 赞同：1
> 
> 时间：2012-07-30T14:36:32.023
> 
> 标签：sql, delphi, delphi-xe2, dbexpress

我在没有安装 SQL Native 客户端的机器上部署 dbExpress 数据库应用程序。我已经复制`DBXMSS.dll`了，但我收到了一个错误，比如

> DBX 错误：驱动程序无法正确初始化。客户端库可能丢失、未正确安装或版本错误

是否可以在不安装 SQL Native 客户端 2008 的情况下运行此应用程序？如果是，请指教。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:20:11.103

不，这是不可能的。您必须安装本机客户端。DBX 要求存在驱动程序。

# python - NSTask, NSPipe - 无法连接返回的字符串

> ID：11723707
> 
> 赞同：0
> 
> 时间：2012-07-30T14:36:34.473
> 
> 标签：python, objective-c, macos, cocoa, nstask

在我的 Mac OS 应用程序中，我有 NSTask 调用 Python 脚本，然后通过 NSPipe返回*“已连接” 。*然后我读取我的 Obj-C 类中的数据，并将其放入一个字符串中：

```
NSMutableData *data = [[NSMutableData alloc] init];
NSData *readData;

while ((readData = [readHandle availableData])
       && [readData length]) {
    [data appendData: readData];
}

NSString *aString;
aString = [[NSString alloc]
                  initWithData: data
                  encoding: NSASCIIStringEncoding];

NSLog(@"append%@me",aString); 
```

后来当我尝试将输出与另一个字符串连接时，我不能 - 它打印在另一行：

```
appendconnected
me 
```

而且，我不能用以下方法测试字符串：

```
if ([string isEqualToString:@"connected"]) {
    NSLog(@"yes");
} else {
    NSLog(@"no");
} 
```

它表明它们并不相等，尽管它们是！

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:41:54.617

流中有换行符。

你如何在 python 端打印数据？

如果您使用`print "connected"`，它也会输出一个换行符。

请注意，*不*输出换行符可能会导致在管道关闭（或写入更多数据）之前无法读取数据，因为系统可能会缓冲一些内容。

# c# - 以线程安全的方式创建新窗口

> ID：11723708
> 
> 赞同：1
> 
> 时间：2012-07-30T14:36:35.070
> 
> 标签：c#, wpf, signalr

我正在使用 signalR 将消息向上推送到服务器并向下推送到特定客户端。

当我发送消息时，接收客户端会从我的 signalR 服务器发送一个 ReceiveMessage 函数调用，该函数调用映射到我的应用程序中的静态类函数。然后静态类尝试做`new Chat()`（我的消息窗口类）在接收端打开一个消息窗口。

这抛出`calling thread must be STA, because many UI components require this.`

我之前曾与代表一起处理简单的表单元素（例如更改文本框），但我不明白如何在这种情况下应用它。当我阅读 about`Invoke`时，它在某种形式的对象上被调用，这在我的情况下不存在？

TLDR；如何从静态类函数调用创建和显示表单的新实例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:44:39.947

使用当前 GUI 的线程调度程序。然后调用invoke。标准杆示例：

```
Application.Current.Dispatcher.Invoke(() => { 
      var win = new Window();
      win.show(); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:41:43.193

最简单：利用[`App.MainWindow.Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.dispatcher.aspx)在 GUI 线程上执行创建：

```
App.MainWindow.Dispatcher.BeginInvoke((Action)(() => { new Chat(); })); 
```

更难：创建一个新的 STA 线程，并在其上创建新的 Window。

后一种选择更难，因为您将拥有多个 GUI 线程，并且需要确保跟踪操作，以便在每种情况下都使用正确的线程。除非您有特定的理由让多个 GUI 线程坚持使用简单选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:49:03.517

您必须在 UI 线程中调用您的代码。为此，您需要参考同步上下文。假设您从 UI 线程调用了以下代码：

```
SynchronizationContext syncContext = SynchronizationContext.Current; 
```

因此，您得到了对上下文的参考。

然后在回调方法中（在后台线程（不是UI）中接收到消息后）你可以执行以下操作：

```
syncContext.Post((state) =>
                {
                    Window w = new Window(); 

                }, ...); 
```

lambda 表达式中的代码代表 UI 线程执行。据我所知，这就是“Control.Invoke”和“Dispatcher.Invoked”方法在幕后实际发生的情况。

# ruby-on-rails - 带导轨的 pjax

> ID：11723714
> 
> 赞同：1
> 
> 时间：2012-07-30T14:36:49.980
> 
> 标签：ruby-on-rails, layout, pjax

我正在使用 rack-pjax gem，如使用 pjax 的 railscasts 中 [所述](http://railscasts.com/episodes/294-playing-with-pjax?view=comments)

但是我的布局遇到的问题是，我在应用程序布局中的主要“yield”调用之上有一些动态生成的链接和页面标题。这些链接将根据主要收益动态生成。尽管我将动态加载的部分放入 data-pjax-container 中，但该部分仍然没有出现（不可见）。我猜这是因为 pjax 的工作方式，当 pjax 请求到达服务器时，它会携带一个“X-PJAX”标头，如果服务器在标题。

```
%div{:id = "content", :data => {"pjax-container" => true}}

  #context_menu
    = THE DYNAMICALLY GENERATED CONTENT GOES HERE
    .clear

  #pageHeading
    #breadcrumbs
      = THE DYNAMICALLY GENERATED CONTENT GOES HERE
      .clear

    .bodytext
      = yield   / THIS IS THE MAIN YIELD
    .clear 
```

请有任何解决此问题的建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:11:10.503

您可以通过明确告诉 rails 哪些链接应该在您的视图中进行 pjax 调用而不是使用隐式 pjax header 来解决它，例如：

```
<%= link_to 'user', user_path, :'data-pjax' => '#id_of_target_pjax_container' %> 
```

# html - 如何强制 iframe 在标准父框架下运行怪癖

> ID：11723724
> 
> 赞同：14
> 
> 时间：2012-07-30T14:37:39.470
> 
> 标签：html, iframe

我们有一个父页面，它必须在 IE9 标准模式下运行，执行 HTML5 命令。下面我们有一个必须在兼容模式（IE7/8）下运行的 iframe。

据我了解，在 IE9 中，iframe 从父级继承其文档类型。那是对的吗？这个问题有什么解决办法吗？可以以某种方式在标准模式 doctype 父框架下使用 quirks doctype 执行 iframe 吗？谢谢，塔尔

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-22T05:39:31.903

不可能在 IE9 中的子 iframe 中触发不同的渲染模式，如此处正式记录：http: [//msdn.microsoft.com/en-us/library/gg558056](http://msdn.microsoft.com/en-us/library/gg558056(v=vs.85).aspx) (v=vs.85).aspx （强调添加):

> 尽管仅当 Windows Internet Explorer 检测到 HTML 页面已请求对标准的最高级别支持时才使用较新的呈现引擎，但对于可能在 frame 和 iframe 元素中加载的子页面并不总是如此。***由于一次只能激活一个渲染引擎***，IE9 模式还包括对 Quirks 模式的仿真。

但是，正如它所说，您**可以**触发**“quirks mode emulation”**，这会使 IE9 渲染引擎处于活动状态，但会以多种方式改变其行为以匹配旧的 quirks 模式。

JSBin 演示：http: [//jsbin.com/ozejuk/1/](http://jsbin.com/ozejuk/1/)

此示例有一个样式为 ... 在怪癖模式下的 div，不接受`background: #ff0000; background: 00ff00; border-radius: 30px`十六进制颜色。`#`在 IE9 模式下它们不是。在 IE9 中加载演示会在父页面中显示一个红色 div，在 iframe 中显示一个绿色 div（但仍带有圆角）。

如何在 iframe 中触发 quirks 模式仿真：http: [//msdn.microsoft.com/en-us/library/gg558096 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/gg558096(v=vs.85).aspx)

短版：省略 DOCTYPE，添加：`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />`

效果怪癖模式仿真对渲染的完整列表：http: [//msdn.microsoft.com/en-us/library/gg558047 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/gg558047(v=vs.85).aspx)

# c - Telnet 客户端及其对 EOL 的处理

> ID：11723732
> 
> 赞同：1
> 
> 时间：2012-07-30T14:38:19.237
> 
> 标签：c, sockets, networking, blackberry, telnet

这是一个相当复杂的问题，对此我深表歉意。我编写了一个 Linux C 套接字应用程序，这是一个用于简单聊天服务器的基本框架。服务器正在我的笔记本电脑上运行。客户端目前是 Telnet，直到我编写指定的客户端应用程序（希望这会更安全）。我知道，有更好的应用程序可以从客户端发送通用网络数据，但我对*为什么*某件事发生在一个 Telnet 客户端而不是另一个客户端感兴趣。

第一个 Telnet 客户端测试是在另一台 Linux 笔记本电脑上进行的。它按预期工作。然而，下一个是一个名为 BBSSH 的黑莓应用程序，它允许 Telnet 和 SSH 连接。我通过了 Telnet 选项，它也可以工作。除了，它不完全是。

服务器代码执行通常的`read`调用来检索数据块，该数据块被视为字符串，即消息。前一个客户端读取直到我按回车键，然后它发送一串字符。但是，BB 应用程序会发送每个字符，就好像我在每个字符之后都按了 Enter 键一样，而我没有。显然，这与缓冲有关，某些客户端从用户输入中将其归类为 EOL 等。我只是无法确定它。

为了说明，这里是服务器输出它从客户端接收到的消息。

首先，来自 Linux 客户端的消息：

```
client name: this is a test 
```

现在，对于 BBSSH：

```
client name: t
client name: h
client name: i
client name: s
client name:
client name: i
client name: s
client name:
client name: a
client name:
client name: t
client name: e
client name: s
client name: t 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:57:12.683

Telnet 客户端可以在线路模式或字符模式下运行。出于某种原因，BBSSH 客户端似乎在字符模式下运行。

在 telnet 连接开始时发生的协商期间，您的服务器可能会通过向客户端发送相关指令来强制客户端进入线路模式。

您的服务器需要发送给客户端的字节序列是 0x255 0x253 0x34，翻译为“解释为命令、执行、行模式”。如果客户端愿意/能够在线路模式下操作，它应该回复 0x255 0x251 0x34（“解释为命令，意志，线路模式”）。

如果这对您来说是全新的（即您的 telnet 服务器目前根本不进行任何协商），请在谷歌上搜索“telnet 协商”之类的术语或查看一些相关的 RFCS（RFC 854 是 Telnet 本身，RFC 1184涵盖 Linemode 选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:42:20.370

TCP 是面向流的，因此不存在“消息”之类的东西。您可能会一起接收所有数据，或者一次只接收其中的一部分。

在您的情况下，您可能希望缓冲收到的任何内容，直到您遇到 EOL 标记。

# c - 扫描字符串以查找 c 中出现的字符

> ID：11723734
> 
> 赞同：1
> 
> 时间：2012-07-30T14:38:38.000
> 
> 标签：c, string

我在 C++ 或 C# 中找到了几个答案，但没有找到 C 的答案。

我需要知道如何计算字符串中的字符数。目标是确定字符串中是否存在封闭块（以大括号`'{'`,为界`'}'`）。现在我有以下内容：

```
int closedBlock(char* value) {
    int open = 0;

    int i;
    for (i = 0; i < strlen(value); i++) {
        if (!strcmp("{", value[i])) {
            open++;
        } else if (!strcmp("}", value[i])) {
            open--;
        }
    }

    return !open;
} 
```

但它在第一次`if`检查后崩溃。我不太清楚为什么这不起作用。我想这与错误的指针有关（这似乎总是 C 中的问题），但我无法弄清楚。除了工作代码之外，解释为什么我的代码不好也会很有帮助。

谢谢。

**笔记**

我知道这只是检查数量`'{'`是否等于数量`'}'`，而不是真正检查是否存在正确关闭的块。解决这个问题后，我会解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:41:41.353

[`strcmp`](http://en.cppreference.com/w/c/string/byte/strcmp)将比较两个以 null 结尾的字符串。让我感到困惑的是，您的编译器实际上并没有抱怨第二个参数是 a `char`。如果要比较单个字符，只需使用等号运算符`==`：

```
int closedBlock(char* value) {
    int open = 0;
    int length = strlen(value);
    int i;
    for (i = 0; i < length; i++) {
        if (value[i] == '{') {
            open++;
        } else if (value[i] == '}') {
            open--;
        }
    }

    return !open;
} 
```

提示：如果你使用`gcc`add`-Wall -Wextra`到你的编译器调用，它通常会导致有用的警告。

> 我知道这只是检查'{'的数量是否等于'}'的数量，而不是真的有一个正确关闭的块。解决这个问题后，我会解决这个问题。

这里的另一个提示：什么时候可以有一个无效的块？当且仅当 end-token`}`出现时没有前面的 start-token `{`。你已经拥有了所有的工具，你只是缺少另一个`if`-语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:43:21.883

这是因为您正在尝试将字符串：`"{"`与单个字符：进行比较`value[i]`。

`value`（大概）指向一个字符数组，同时`value[i]`指定一个字符。所以你想像这样比较字符到字符：

```
for (i = 0; i < strlen(value); i++) {
    if (value[i] == '{') {
        open++;
    } else if (value[i] == '}') {
        open--;
    }
} 
```

请注意在and周围使用**单**引号。这告诉编译器它是单个字符而不是 C 字符串。`{``}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:56:40.797

`strcmp()`如果只比较一个字符，为什么要使用？

您可以简单地使用`==`运算符查看我的示例：

[http://ideone.com/dNCH2](http://ideone.com/dNCH2)

最好的问候肯尼

# jenkins - “Jenkins URL”配置存储在哪里？

> ID：11723735
> 
> 赞同：27
> 
> 时间：2012-07-30T14:38:39.980
> 
> 标签：jenkins, puppet

我正在尝试设置一个非默认 URL 作为安装 Jenkins 的 puppet 脚本的一部分。我知道如何通过 Web UI 编辑该值，但我似乎无法找到该值的实际存储位置。我查看了 jenkins_home 文件夹和 apache 并没有找到它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-31T16:08:03.473

它将它存储在一个不太可能的地方：`hudson.tasks.Mailer.xml`在 Jenkins 主文件夹中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-07-07T00:33:13.713

我在 Jenkins 2.68 上，它存储在`jenkins.model.JenkinsLocationConfiguration.xml`Jenkins 主文件夹下。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-16T09:06:40.180

如果 grep Jenkins home 时没有找到 URL，那是因为你没有保存配置。如果未设置，Jenkins 将回退到请求 URL，而不将其保存在磁盘上。

```
root@jenkins-dev:/var/lib/jenkins# grep jenkinsUrl *.xml
jenkins.model.JenkinsLocationConfiguration.xml:  <jenkinsUrl>http://jenkins-dev.lxc/</jenkinsUrl>
root@jenkins-dev:/var/lib/jenkins# 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-13T19:27:14.460

该 url 可以在 UI/web 应用程序中的 configuration > Jenkins Location 下找到；或者，登录到您的服务器并在此位置查找内容：var/lib/jenkins/jenkins.model.JenkinsLocationConfiguration.xml

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-30T21:35:06.390

Jenkins 主文件夹中的文件 config.xml。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-30T22:31:21.177

我在我的 Jenkins 根目录中为“http”做了一个 grep 引导我到了 hudson.model.UpdateCenter.xml

我正在使用 Jenkins 版本 1.462

# asp.net-mvc-2 - 如何在 ASP.NET MVC 2 中测试隐式 HTTP 状态代码 (200)？

> ID：11723737
> 
> 赞同：1
> 
> 时间：2012-07-30T14:38:51.607
> 
> 标签：asp.net-mvc-2, httpresponse, http-status-codes

我正在对 ASP.NET MVC2 控制器中的一些缓存代码进行单元测试。如果缓存标头正常，我的代码会显式设置一个`304 Not Modified`- 这很好，因为我可以在控制器上下文中模拟 HttpResponse 并验证 StatusCode 是否已相应设置。

如果我**没有**明确设置响应代码，控制器会返回一个`200 OK`（我可以在 Chrome 的 HTTP 响应标头中看到），但我看不到在单元测试中验证这一点的任何方法 - 对设置的任何期望响应状态或状态码只是不满意。它似乎是由 ASP.NET MVC 控制器管道创建的某种默认行为——即使在调用之后，`result.ExecuteResult(controller.ControllerContext)`我也看不到响应代码在任何地方设置为 200。有人为这种情况写过测试吗？

# php - 在 Apache 中扩展使用重写模块？

> ID：11723739
> 
> 赞同：1
> 
> 时间：2012-07-30T14:39:15.320
> 
> 标签：php, apache

我有一个使用一种语言的网站，现在我必须将它翻译成另一种语言，并且根据我必须遵循的一些实践，我应该创建子目录，其名称应该是该 conecpt 到新语言的翻译。我想重用我使用一些 PHP 变量从一种语言切换到另一种语言的相同代码，但为此我想保留子目录名称，并可能使用 Rewrite 来创建子目录名称的“假”翻译？

换句话说，如果我有[http://www.mysite.com/information/index.php](http://www.mysite.com/information/index.php)，对于新语言我应该有例如[http://www.mysite.com/LANGUAGE/INFORMATION](http://www.mysite.com/LANGUAGE/INFORMATION)翻译成另一种语言/索引.php

我希望我说清楚了。

在此先感谢，亚历杭德罗

# iis - 如何更改发布点存档存储路径

> ID：11723742
> 
> 赞同：0
> 
> 时间：2012-07-30T14:39:30.903
> 
> 标签：iis, smooth-streaming

如何更改发布点（IIS 媒体服务）的存档存储路径？

默认情况下，视频存储在 inetpub >> 媒体 >> 档案 >> ........

我想将其更改为网络上不在同一台计算机内的其他位置。

谢谢

开发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:07:49.660

有两种方法可以更改存档路径。
第一种方法对所有发布点都是全局的：

*   运行 IIS 管理器；
*   选择左侧面板上的第一个节点；
*   在功能视图中选择 Live Smooth Streaming；
*   更改存档路径设置。

第二种方法是针对一个特定的发布点：

*   使用您喜欢的文本编辑器打开要更改存档路径的发布点文件 (.isml)；
*   在 head 属性之间添加这一行：
    <meta name="archivePath" content="\\path\to\archive" />

当您从脚本而不是 IIS 媒体服务创建发布点时，第二种方法很有用。默认情况下，文件中包含的存档路径属性会覆盖 IIS 媒体服务存档路径配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T12:17:54.023

vincex86 没有一分是对的。更改 archivePath 后出现问题。不要忘记在指定文件夹上授予 IIS_IUSRS 用户“写入”权限

# php - Skydrive：在 PHP 中列出根文件和文件夹

> ID：11723745
> 
> 赞同：1
> 
> 时间：2012-07-30T14:39:44.367
> 
> 标签：php, curl, onedrive

我们想将 Skydrive 集成到我们的网站中，就像我们目前正在使用 Google Drive 一样，但我不知道如何检索根文件夹和文件。

我已经阅读了这些帖子和文档：

*   [使用 PHP 和 OAuth 访问 SkyDrive](https://stackoverflow.com/questions/11004750/access-skydrive-using-php-and-oauth)
*   [转换为 PHP REST CURL POST](https://stackoverflow.com/questions/10534009/convert-to-php-rest-curl-post)
*   Skydrive API 在这里：http: [//msdn.microsoft.com/en-us/library/live/](http://msdn.microsoft.com/en-us/library/live/)
*   [http://php.net](http://php.net)上的 Curl 文档- 即使我仍然对此感到困惑

然而，我似乎无法得到我想要的东西。

我已经分配了 access_token 并且分配正确，范围也正确（我使用的是 wl.contacts_skydrive），所以，**我在这里放了我到目前为止的部分代码，这样你就可以告诉我我是什么了我错过了，我应该添加什么，或者如果我走错了路。**

```
//$token is correctly assigned
$url = 'GET https://apis.live.net/v5.0/me/skydrive/files?access_token='.$token;
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
$result = curl_exec($ch);
curl_close($ch);
print_r($result); 
```

感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:27:11.813

您需要使用`CURLOPT_RETURNTRANSFER`以字符串形式返回传输。否则你会得到真或假。假设你从`curl_exec`

尝试添加

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

# php - json输出中的问题

> ID：11723748
> 
> 赞同：1
> 
> 时间：2012-07-30T14:39:54.270
> 
> 标签：php, json

我创建了一个 json 输出，但得到了这些错误，有什么想法吗？！

代码 1：

```
public function getChatRoomData($uid, $name, $mess, $_roomID)
{
    mysql_query("INSERT INTO _roomData(uid, userName, messageText, roomID, postedAt) VALUES('$uid', '$name', '$mess', '$_roomID', NOW())");
    return mysql_query("SELECT * FROM _roomData WHERE roomID = '$_roomID';"); 

} 
```

代码 2：

```
if ($tag == 'roomEnter') {
            $userID = $_POST['_uniqeID'];
            $userName = $_POST['_name'];
            $userMessage = $_POST['_message'];
            $roomID = $_POST['_roomID'];
            $queryFunctions = $db->getChatRoomData($userID , $userName, $userMessage, $roomID);
            $rows = array();
                        while($result = mysql_fetch_assoc($queryFunctions)) 
                        {
                                $rows["uid"] = $result["uid"];
                                $rows["name"] = $result["userName"];
                                $rows["roomDetails"]["message"] = $result["messageText"];

                        }
                         echo json_encode($rows);
            } 
```

日志错误：

```
07-30 18:59:46.843: E/JSON(26633): <br />
07-30 18:59:46.843: E/JSON(26633): <b>Parse error</b>:  syntax error, unexpected '}' in <b>/home/merlinga/public_html/_mess/index.php</b> on line <b>106</b><br />
07-30 18:59:46.944: E/JSON Parser(26633): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
07-30 19:02:30.293: E/JSON(26633): <br />
07-30 19:02:30.293: E/JSON(26633): <b>Parse error</b>:  syntax error, unexpected '}' in <b>/home/merlinga/public_html/_mess/index.php</b> on line <b>106</b><br />
07-30 19:02:30.293: E/JSON Parser(26633): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:51:40.433

这里还有一个错误。您`$rows['..'] = $results['xxx']`在循环的每次迭代中分配。您应该使用 $rows[] = xxx 并为每次迭代添加一个新数组或对象到 rows 数组。

修复您收到的第一个语法错误，然后对另一个错误使用类似的内容：

```
 $rows = array();
        while($result = mysql_fetch_assoc($queryFunctions)) 
        {
             $row = array();
             $row['uid'] = $result['uid'];
             $row['name'] = $result['userName'];
             // or just $rows[] = $result; 
             // see below.

             $row["roomDetails"] = array();
             $row["roomDetails"]["message"] = $result["messageText"];
             $rows[] = $row;
         }
        echo json_encode($rows); 
```

使用和反对使用`$rows[] = $results`而不是将结果映射到新数组或对象的原因：

优点：

1.  添加新属性/列时不必更新此层

缺点

1.  和上面一样。您不想公开的新属性/列可能会泄漏并导致更大的 HTTP 响应，甚至更糟：安全风险。

2.  您可能希望使用此层将表列映射到具有不同命名和聚合属性的视图模型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:42:55.863

您的 PHP 代码中有语法错误，这会导致错误消息显然不是 JSON 输出，当您尝试将其视为 JSON 时会导致更多错误。

检查您的 PHP 代码，特别是在第 106 行附近，看看是什么导致了问题。

# mongodb - 如何在 Map( /Reduce ) 函数中继续循环？

> ID：11723749
> 
> 赞同：0
> 
> 时间：2012-07-30T14:39:55.483
> 
> 标签：mongodb, mapreduce

我在 MongoDB 中有一个 Map 函数，稍后我将使用 Reduce。我使用的集合中有很多用户，并且用户拥有一些频道。但是，有些用户没有任何通道，并且 Map/Reduce 函数在我的脚本中引发错误。

```
 map = Code("function () {"
                "  if(!this.channels) continue;"
                "  this.channels.forEach(function(z) {"
                "       emit(z, 1);"
                "   });"
                "}") 
```

当我使用 return 而不是 continue 退出该函数时，它可以完美地工作，只是我不想结束循环。有什么聪明的方法可以解决这个问题吗？

感谢您的建议和更好的智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:47:25.123

如果您`return`来自，则仅针对此文档`map`返回 from 。`map`不管怎样，其他文档的映射将被执行。

我建议你重写`map`这个表格

```
function () {
  if(this.channels) {
    this.channels.forEach(function(z) {
       emit(z, 1);
    });
  }
} 
```

我想，这个表格更清楚。它会为有频道的用户发出一些东西，并跳过那些没有频道的用户。

# c# - 原始深度数据到文本 kinect v1.0 C#

> ID：11723751
> 
> 赞同：0
> 
> 时间：2012-07-30T14:40:02.497
> 
> 标签：c#, text, kinect, depth

我一直在搜索互联网，但我没有任何运气。我正在使用带有 Kinect SDK v1.0 的 Xbox Kinect。我想获取原始深度数据并将其转换为文本文档，以便我可以使用深度数据。我在这个网站上找到了一些东西，但它是针对 Beta2 的，我需要使用 v1.0。感谢您提供任何帮助，但我是编码新手，因此最好使用示例代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;
using System.Diagnostics;
using System.IO;

namespace DepthTextStream
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    const float MaxDepthDistance = 4095; // max value returned
    const float MinDepthDistance = 850; // min value returned
    const float MaxDepthDistanceOffset = MaxDepthDistance - MinDepthDistance;

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        kinectSensorChooser1.KinectSensorChanged += new DependencyPropertyChangedEventHandler(kinectSensorChooser1_KinectSensorChanged);

    }

    void kinectSensorChooser1_KinectSensorChanged(object sender, DependencyPropertyChangedEventArgs e)
    {

        var oldSensor = (KinectSensor)e.OldValue;

        //stop the old sensor
        if (oldSensor != null)
        {
            oldSensor.Stop();
            oldSensor.AudioSource.Stop();
        }

        //get the new sensor
        var newSensor = (KinectSensor)e.NewValue;
        if (newSensor == null)
        {
            return;
        }

        //turn on features that you need
        newSensor.DepthStream.Enable(DepthImageFormat.Resolution320x240Fps30);
        newSensor.SkeletonStream.Enable(); 

        //sign up for events if you want to get at API directly
        newSensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(newSensor_AllFramesReady);

        try
        {
            newSensor.Start();
        }
        catch (System.IO.IOException)
        {
            //this happens if another app is using the Kinect
            kinectSensorChooser1.AppConflictOccurred();
        }
    }

    void newSensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
        short[] depthData;

        using (DepthImageFrame depthFrame = e.OpenDepthImageFrame()) //create a new frame every time one is ready
    {
    //assign a value to depthData
    depthData = new short[depthFrame.PixelDataLength];
    } 

    }

    private void SaveDepthData(short[] depthData)
    {
        //initialize a StreamWriter
        StreamWriter sw = new StreamWriter(@"C:/Example.txt");

        //search the depth data and add it to the file
        for (int i = 0; i < depthData.Length; i++)
        {
            sw.WriteLine(depthData[i] + "\n"); //\n for a new line
        }

        //dispose of sw
        sw.Close();
        SaveDepthData(depthData);
    }      

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        StopKinect(kinectSensorChooser1.Kinect); 
    }

    private void StopKinect(KinectSensor sensor)
    {
        if (sensor != null)
        {
            if (sensor.IsRunning)
            {
                //stop sensor 
                sensor.Stop();

                //stop audio if not null
                if (sensor.AudioSource != null)
                {
                    sensor.AudioSource.Stop();
                }
            }
        }
    } 
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T02:22:43.323

使用 1.5.0.1 版本非常简单，它与 1.0 版本**几乎**相同，并且可以使用。您只需要 A)a`short[]`保存深度数据 B)a`DepthImageFrame`将数据移动到数组中，C)A`StreamWriter`保存数据。

添加 a`short[]`来存储您的深度数据，并在您的`DepthFrameReadyEventArgs`（或`AllFramesReadyEventArgs`）内部通过执行以下操作“使用” a `DepthImageFrame`：

```
 short[] depthData;

 ...

 using (DepthImageFrame depthFrame = e.OpenDepthImageFrame(()) //create a new frame every time one is ready
 {
       //assign a value to depthData
       depthData = new short[depthFrame.PixelDataLength];
 } 
```

然后您可以将每帧的深度添加到`depthData`使用`DepthImageFrame.CopyPixelDataTo`

```
 using (DepthImageFrame depthFrame = e.OpenDepthImageFrame(()) //create a new frame every time one is ready
 {
       //assign a value to depthData
       depthData = new short[depthFrame.PixelDataLength];

       //add raw depth data to depthData
       depthFrame.CopyPixelDataTo(depthData);
 } 
```

然后我们可以编写一个方法来使用`StreamWriter`.

```
 private void SaveDepthData(short[] depthData)
 {
       //initialize a StreamWriter
       StreamWriter sw = new StreamWriter(@"C:/Example.txt");

       //search the depth data and add it to the file
       for (int i = 0; i < depthData.Length; i++)
       {
            sw.WriteLine(depthData[i] + "\n"); //\n for a new line
       }

       //dispose of sw
       sw.Close();
 }      

 ...

 SaveDepthData(depthData); 
```

希望这可以帮助！

# objective-c - 为什么表格视图单元格标识符的变量名大写？

> ID：11723753
> 
> 赞同：4
> 
> 时间：2012-07-30T14:40:07.143
> 
> 标签：objective-c, uitableview, naming-conventions

真的很好奇。在提供的 Apple`UITableViewDataSource`方法中，用于单元标识符`tableView:cellForRowAtIndexPath:`的静态变量的名称始终大写，如下所示：`NSString`

```
- (UITableViewCell *)tableView: (UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TableViewCell";  // CAPITALISED VARIABLE NAME
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];

    // Configure cell

    return cell;
} 
```

虽然我意识到在程序运行时它对程序没有任何影响，但 Objective-C 命名约定规定变量的首字母应该小写，类的首字母应该大写。为什么这里不是这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:56:20.647

第一个字母大写用于表示 CellIdentifier 是一个常数。

现在，您可能想知道，为什么您不能这样做...

```
static const NSString *cellIdentifier = @"TableViewCell"; 
```

答案是因为 const 不像程序员所期望的那样与 NSString 一起工作。NSString 的字符串值即使被标记为 const 仍然可以改变，所以下面的一系列表达式...

```
static const NSString *cellIdentifier = @"TableViewCell";
cellIdentifier = @"Changed!"
NSLog(@"%@", cellIdentifier); 
```

将记录“已更改！” 到控制台，而不是“TableViewCell”。正因为如此，一个大写字母被用来暗示 CellIdentifier 是一个常数，虽然它在技术上仍然可以被改变，它只是“不应该”被改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:51:52.090

此处的单元格标识符实际上是一个常量，按照惯例大写

# ios - 如何为 iPad 应用程序添加连续移动

> ID：11723754
> 
> 赞同：0
> 
> 时间：2012-07-30T14:40:07.753
> 
> 标签：ios, xcode, ipad

我正在编写一个 3d 汽车设计师 ipad 应用程序，我想给它添加一点“生命”。我希望它类似于“3D Car Builder”iPad 应用程序所做的事情，因为从应用程序启动的那一刻起，场景中只有最轻微的“运动”。即使 iPad 放在桌子上，也会有动作。

我正在第一代 iPad 上进行测试，所以无论他们实施了什么，都可以在我的设备上运行。我有（安装了 iOS 5）。我查了几件事，认为这是用加速度计开发的，或者可能是磁力计，某种核心运动……我不知道从哪里开始。它可能就像在 x 方向移动 3D 场景少量，然后是 y 方向，负 x，然后负 y 一样简单。我不知道，这很简单。

任何人都知道我/他们可能如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:11:15.830

好吧，没关系......我想出了这个。使用 CCActionInterval 效果很好

# xcode - 如何使用带有核心数据的搜索栏？

> ID：11723756
> 
> 赞同：0
> 
> 时间：2012-07-30T14:40:12.320
> 
> 标签：xcode, search, core-data, uisearchbar

您如何将搜索栏与核心数据一起使用？我的搜索栏出现在 tableview 上方，但目前它不起作用我需要能够搜索膳食列表我对 xcode 很陌生，所以如果你能给出详细的答案，例如放置代码的方法等将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:45:31.447

按照本教程 [核心数据搜索教程](http://timroadley.com/2012/03/05/core-data-basics-part-7-search-bars/)

你也可以查看我的 git 项目，我刚刚使用了带有核心数据的搜索栏： [https ://github.com/dennis87/bookList](https://github.com/dennis87/bookList)

如果您对项目有任何疑问，可以问我，我会尽力回答您（我也是新手）。

# c++ - 简单的进程加载器内存映射

> ID：11723758
> 
> 赞同：3
> 
> 时间：2012-07-30T14:40:18.703
> 
> 标签：c++, linux, process, virtual-memory, memory-mapping

我正在为 Linux 编写一个非常简单的进程加载器。我正在加载的可执行文件已经编译，并且我知道每个可执行文件在内存中的位置。我尝试的第一种方法是`mmap()`手动将每个代码或数据部分放在正确的位置，例如

```
mmap(addr, size, PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_PRIVATE | MAP_FIXED, -1, 0) 
```

除非我删除 MAP_FIXED 标志，否则会出现段错误，因为似乎一个块的地址与内存中已经存在的东西冲突，甚至可能与加载程序本身冲突；该地址`0x401000`似乎是有问题的地址。

我什至不确定从哪里开始。有朋友建议虚拟化内存访问操作；我不确定我会为此采取什么样的性能打击，我也不知道它是如何完成的，但它可能是一种选择。我真正想做的是创建一个“空”进程，就它而言，它会完全运行内存，因此在我想要它之前不会将任何内容加载到用户空间中。“空”过程的整个概念可能毫无意义，但它是描述我想要什么的最佳方式。我非常渴望一些可能对我有帮助的参考资料或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:08:06.900

随着您的进程运行（可能在“sleep(1000);”中打盹），查看它的 /proc/pid/maps。这将告诉您 0x401000 的用途。

```
~$ sleep 1h &
[3] 2033
~$ cat /proc/2033/maps
00110000-002af000 r-xp 00000000 08:01 1313056    /lib/i386-linux-gnu/libc-2.15.so
... 
```

在我的盒子上，/bin/sleep 不使用那个块，我的小单行程序也没有。

您可能正在链接某个想要登陆的图书馆？

因此，一种方法是尽早分配您需要的块（早在 main() 运行之前——在别处寻找该信息）。

另一种方法是将您的代码链接到您“知道”未使用的某个地址（大概是您自己生成 x86 操作码，或者以其他方式“链接”，所以这不应该是一个延伸）。

另一个更好的选择是使您的代码可重定位。您不想替换整个进程的地址空间（正是 exec 所做的）这一事实或多或少地表明您的代码应该就是这样。

所以找到一个可用的地址，在那里加载这些位，并根据需要执行重定位（所以你的磁盘文件格式，如果它不是 ELF，将需要包含 reloc 信息）。这就是大路，也是您接下来要从装载机那里得到的显而易见的东西。

当然，这几乎意味着自己重新实现 dlopen()。我假设您只是想了解它是如何工作的——如果没有，请 man dlopen。Stephane 的零规则：它已经存在 ;-)

不要忘记支持从您的代码链接其他库（不重复）、dlclose()、初始化程序、各种 RTLD_* 模式、尊重 MYCUSTOMLD_LIBRARY_PATH、GCC 的 __thread 说明符等；-)

# java - Launching jar via sh script works normally but via crontab gives ClassFormatError

> ID：11723764
> 
> 赞同：0
> 
> 时间：2012-07-30T14:40:44.037
> 
> 标签：java, linux, shell, crontab, shellexecute

Launching the jar via a java -cp command in an shell scrip eg: RunFileConverter.sh file on linux works *without a problem*. But, when I try to execute the script via 'crontab -e' it gives me a ClassFormatError.

The jar was compiled on Win7 with the Java 6 jdk (latest) and the java version on the (redhat) linux server is also JRE 6 (1.6.0_29).

owner of the files is pipe, and the crontab is launched via same user.

Contents of the RunFileConverter.sh:

```
java -cp /home/pipe/Custom/cbs/:/home/pipe/Custom/cbs/FileConverter.jar fileconverter.Launcher 
```

Filestructure (/home/pipe/Custom/cbs/): lib/somelib.jar FileConverter.jar FileConverter.properties RunFileConverter.sh fileconverter.log

Stripped down Launching class file:

```
package fileconverter;

import java.io.*;
import java.util.Locale;
import java.util.ResourceBundle;
import java.util.logging.FileHandler;
import java.util.logging.Handler;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Launcher {

    // logger
    public final static Logger LOGGER = Logger.getLogger(FileConverter.LOGFILE);

    /**
     * Main class
     * @param args
     * @throws FileNotFoundException 
     */
    public static void main(String[] args) throws FileNotFoundException {

        // logger handlers, properties etc ...
        Handler fileHandler;
        // ...

        // create converters
        FileConverter requestConverter = new RequestFileConverter();
        FileConverter exportConverter = new ExportFileConverter();

        // start ya conversions, aarrr mate
        requestConverter.run();
        exportConverter.run();

    }
} 
```

crontab-e

```
*/5 * * * * /home/pipe/Custom/cbs/RunFileConverter.sh 
```

I have no idea what the error might be

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:51:33.260

Most likely cron does have different (older) version of `java` in path.

What does it say if you execute `java -version` via cron?

# c# - Protobuf：连接 C# 和 java 端的问题

> ID：11723767
> 
> 赞同：0
> 
> 时间：2012-07-30T14:40:54.923
> 
> 标签：c#, java, protocol-buffers

我正在编写 C# protobuf 客户端，该客户端预计将连接到 Java 编写的服务器端，但我遇到了一些问题。我正在使用 protobuf-csharp-port。我必须像这样初始化一个`IRpcDispatch`实例：

```
var rpcClient = RpcClient.ConnectRpc(Iid, Protocol, Server, Endpoint); 
```

所以我必须指定4个参数。但在 java 方面，一切都更加简单：

```
ServerRpcConnectionFactory rpcConnectionFactory = SocketRpcConnectionFactories
.createServerRpcConnectionFactory(host, port); 
```

所以这里我们只有主机和端口。

我的问题是 - 我必须在 C# 端指定的 IID、协议和端点是什么？我应该提供哪些值？编写服务器时，我不必在 java 上指定它们...

任何形式的帮助将不胜感激。

# java - 构造函数 Console() 不可见

> ID：11723768
> 
> 赞同：2
> 
> 时间：2012-07-30T14:41:00.790
> 
> 标签：java, console

我觉得一旦有人回答了这个问题，我会觉得有点愚蠢。

无论如何，我刚刚下载了 Java 7.5，我立即遇到了下载之前不存在的问题。

我正要编写一个快速程序来做某事。做一次绝对无关紧要的事情。我开始通过启动控制台来启动它。

从字面上看，我写的是：

```
public static void main(String[] args)
{
    Console console = new Console();
} 
```

我遇到了这个错误

> 构造函数 Console() 不可见

在我更新 Java 之前，由于我自己的错误，我只是遇到了这个问题。

`Console`构造函数的修饰符在本次更新中是否发生了变化？我假设不是。

如果`Console`类已更改，那么现在正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:43:56.377

阅读[javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)以获取此类信息。它会告诉你实际上没有可见的构造函数，并且一个实例“可以通过调用`System.console()`方法获得”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:44:31.080

您需要调用[System.console()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)来检索对象：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:46:59.493

您应该使用：[Console con = System.console();](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#console%28%29)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T14:48:38.310

公共最终类控制台扩展对象实现可冲洗

[http://docs.oracle.com/javase/7/docs/api/index.html?java/io/Console.html](http://docs.oracle.com/javase/7/docs/api/index.html?java/io/Console.html)

# c# - 设置用户登录尝试时出现逻辑错误

> ID：11723770
> 
> 赞同：2
> 
> 时间：2012-07-30T14:41:02.130
> 
> 标签：c#, asp.net, login, passwords

我的 asp.net 应用程序为用户登录功能使用自定义逻辑。其中一项要求是用户（一旦被锁定）在 15 分钟后才能获得访问权限。

我目前的逻辑是：

```
// check if account is locked & LastLoginAttempt is NOT over 15 minutes;
if ((iLoginAttempts > 4) && ( dtCurrentTimePlus15 < dtLastLoginAttempt))
{
    oCust.CustLoginStatus = "Your account is currently locked.";
    return false;
} 
```

但是，当 iLoginAttempts = 5 并且 dtLastLoginAttempt 是 2 分钟前......为什么上面的逻辑会跳过 if 子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:43:05.813

您应该使用逻辑`or`，而不是 AND。如果某人同时满足这两个条件，您只会将其锁定：超过 4 次尝试并且少于超时期限。

使用`or`，您将锁定满足这两个条件之一或两者的任何人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:43:52.697

这是因为

```
 dtCurrentTimePlus15 = 15 
```

和

```
dtLastLoginAttempt = 2 
```

将语句反转为：

```
if ((iLoginAttempts > 4) && (dtLastLoginAttempt < dtCurrentTimePlus15))
{
    oCust.CustLoginStatus = "Your account is currently locked.";
    return false;
} 
```

# timezone - PHP - 将 12 小时格式时间转换为新时区时出现异常错误

> ID：11723772
> 
> 赞同：1
> 
> 时间：2012-07-30T14:41:05.890
> 
> 标签：timezone, php

我使用以下代码将 12 小时 UTC 转换为新时区
***MySourceCodes：（***我的 udp 套接字服务器代码的一部分）

```
// $gps_time = "9:43:52"; 
$gps_time      = $time_hour.":".$time_min.":".$time_sec;
// $time_received = "01:45:04 2012-07-28"; 
$time_received = date('H:i:s Y-m-d');

$utc = new DateTimeZone("UTC"); 
$moscow = new DateTimeZone("Europe/Moscow"); 

//Instantiate both AM and PM versions of your time 
$gps_time_am = new DateTime("$gps_time AM", $utc); 
$gps_time_pm = new DateTime("$gps_time PM", $utc); 

//Received time 
$time_received = new DateTime($time_received, $moscow); 

//Change timezone to Moscow 
$gps_time_am->setTimezone($moscow); /* ### ### Line 105 Error ### ### */
$gps_time_pm->setTimezone($moscow); 

//Check the difference in hours. If it's less than 1 hour difference, it's the correct one. 
if ($time_received->diff($gps_time_pm)->h < 1) { 

$correct_time = $gps_time_pm->format("H:i:s Y-m-d");
} 
else { 

$correct_time = $gps_time_am->format("H:i:s Y-m-d");
}

echo $correct_time; 
```

***PHP错误：***

```
Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct(): Failed to parse time string (0:11:38 AM) at position 8 (A): The timezone could not be found in the database' in C:\xampp\php\udp.php:105
Stack trace:
#0 C:\xampp\php\udp.php(105): DateTime->__construct('0:11:38 AM', Object(DateTimeZone))
#1 {main}  thrown in C:\xampp\php\udp.php on line 105 
```

输入时间时出错`0:11:38 AM`
***问题：***
我该如何解决这个问题？

***编辑：*** *我的输入时间来源来自 GPS 追踪器（将秒数更改为 12 小时格式时间）*

```
$time_hour      = floor($get_time / 3600);
$time_min       = floor(($get_time - ($time_hour*3600)) / 60);
$time_sec       = dotwodigits(($get_time - (($time_hour*3600) + ($time_min * 60))));
GPS Time        = $time_hour.":".$time_min.":".$time_sec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:57:10.767

正如我在评论中指出的那样，12 小时的时间没有`0:xx:yy`时间。那么，您可以做的是`$time_hour`事先检查以下值：

```
//assigning values to $time_hour, $time_min, and $time_sec
if ($time_hour == 0) $time_hour = 12;
//rest of code 
```

这将防止将无效时间传递给`DateTime`构造函数。

编辑：实际上可以在分配期间执行此检查`$time_hour`：

```
$time_hour = floor($get_time / 3600) ?: 12; 
```

# python - 用于多项式展开的 2d numpy.power

> ID：11723779
> 
> 赞同：5
> 
> 时间：2012-07-30T14:41:34.693
> 
> 标签：python, numpy

我正在尝试编写一个将 2d-ndarray 映射到 2d-ndarray 的函数。输入数组的行可以独立处理，输入的行和输出的行之间应该是一一对应的。对于输入的每一行，应计算该行的给定顺序的多项式展开（参见文档字符串的示例）。当前的实施有效；但是，它需要对“powerMatrix”中的行和行的重复进行显式循环）。一次调用 numpy.power 是否可以获得相同的结果？顺便说一句：结果行中条目的顺序对我来说并不重要。

```
import numpy
def polynomialFeatures(x, order):
    """ Generate polynomial features of given order for data x.

    For each row of ndarray x, the polynomial expansions are computed, i.e
    for row [x1, x2] and order 2, the following row of the result matrix is
    computed: [1, x1, x1**2, x2, x1*x2, x1**2*x2, x2**2, x1*x2**2, x1**2*x2**2]

    Parameters
    ----------
    x : array-like
        2-D array; for each of its rows, the polynomial features are created

    order : int
        The order of the polynomial features

    Returns
    -------
    out : ndarray
        2-D array of shape (x.shape[0], (order+1)**x.shape[1]) containing the 
        polynomial features computed for the rows of the array x

    Examples
    --------
    >>> polynomialFeatures([[1, 2, 3], [-1, -2, -3]], 2)
    array([[  1   3   9   2   6  18   4  12  36   1   3   9   2   6  18   4  12  
             36   1   3   9   2   6  18   4  12  36]
           [  1  -3   9  -2   6 -18   4 -12  36  -1   3  -9   2  -6  18  -4  12 
            -36   1  -3   9  -2   6 -18   4 -12  36]])
    """
    x = numpy.asarray(x)
    # TODO: Avoid duplication of rows
    powerMatrix = numpy.array([range(order+1)] * x.shape[1]).T
    # TODO: Avoid explicit loop, and use numpy's broadcasting
    F = []
    for i in range(x.shape[0]):
        X = numpy.power(x[i], powerMatrix).T
        F.append(numpy.multiply.reduce(cartesian(X), axis=1))

    return numpy.array(F)

print numpy.all(polynomialFeatures([[1, 2, 3], [-1, -2, -3]], 2) ==
                numpy.array([[1,   3,   9,   2,   6,  18,   4,  12,  36,   1,
                              3,   9,   2,   6,  18,   4,  12,  36,   1,   3, 
                              9,   2,   6,  18,   4,  12,  36],
                             [1,  -3,   9,  -2,   6, -18,   4, -12,  36,  -1,
                              3,  -9,   2,  -6,  18,  -4,  12, -36,   1,  -3,
                              9,  -2,   6, -18,   4, -12,  36]])) 
```

谢谢，扬

编辑：这里定义了缺少的函数笛卡尔：[Using numpy to build an array of all combination of two arrays](https://stackoverflow.com/questions/1208118/using-numpy-to-build-an-array-of-all-combinations-of-two-arrays)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:45:56.737

基本思想是将与计算“不碍事”无关的维度（在您的情况下为维度 0，行数）移动到更高的维度，然后自动在其上广播。

我不确定您的`cartesian`方法在做什么，但这是一个用于在矩阵`np.indices`上生成索引元组的解决方案：`X`

```
import numpy as np
def polynomial_features(x, order):
    x = np.asarray(x).T[np.newaxis]
    n = x.shape[1]
    power_matrix = np.tile(np.arange(order + 1), (n, 1)).T[..., np.newaxis]
    X = np.power(x, power_matrix)
    I = np.indices((order + 1, ) * n).reshape((n, (order + 1) ** n)).T
    F = np.product(np.diagonal(X[I], 0, 1, 2), axis=2)
    return F.T 
```

# php - 使用 preg_match_all 查找模式，不要在匹配中包含模式分隔符

> ID：11723791
> 
> 赞同：1
> 
> 时间：2012-07-30T14:41:56.047
> 
> 标签：php, regex, preg-match-all

我正在将模式与 reg_ex 匹配，如

```
$Structure = 'C:N:X:A:V:T:J:N:G:T:N:N:C:J:N:C:A:J:N:.:';
preg_match_all('/(T:|G:|L:|D:).*?(G:|i:|X:|\.:)/', $Structure, $arr, PREG_SET_ORDER); 
```

我得到的结果是

```
T:J:N:G: , T:N:N:C:J:N:C:A:J:N:.: 
```

如何修改查询，以便匹配的分隔符 (G:|i:|X:|.:) 不包含在查找中，但将在下一次搜索中使用。换句话说，使结果如下所示：

```
T:J:N: , G:T:N:N:C:J:N:C:A:J:N: 
```

反而？

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:46:32.913

是的，与其让您的第二个捕获组使用输入，不如将其转换为积极的前瞻：

```
/(T:|G:|L:|D:).*?(?=(?:G:|i:|X:|\.:))/ 
```

现在，不是匹配（和消耗）分隔符，而是：

```
(?=(?:G:|i:|X:|\.:)) 
```

声明正则表达式必须断言从当前点向前存在分隔符，即积极的前瞻。

这[导致](http://viper-7.com/lTxB6M)：

```
"T:J:N:, G:T:N:N:C:J:N:C:A:J:N:" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:47:09.493

可以通过[lookaheads](http://www.regular-expressions.info/lookaround.html)使用以下语法：

```
(?=G:|i:|X:|\.:) 
```

这不会消耗与正则表达式匹配的部分。

附带说明一下，定界符表示您包含正则表达式的斜杠，而不是您拥有的捕获组。

# android - 在 Android 中，解析 Google 将 URL 放入 ListView？

> ID：11723797
> 
> 赞同：0
> 
> 时间：2012-07-30T14:42:29.730
> 
> 标签：android, json, listview

在我的 Android 应用程序中，我试图将来自 Google Places URL 的 JSON 数据解析为 ListView。我正在尝试列出附近餐馆的名称。解析似乎有效，但我不知道如何从 JSON 数据中获取“名称”变量。返回的列表中包含如下项目：

```
 {"id":
"6217c344be105e............"
{"id":
"2c66bf813799zr2844......" 
```

对我来说，它看起来像是在解析 Google Place URL 的“results”数组中的“id”变量。我希望它在“结果”数组中获取“名称”变量。有人可以告诉我正确的代码吗？这是我正在使用的 JSON 解析方法：

```
 public void parseJSON() throws ClientProtocolException, IOException, JSONException
{
    String bcURL="https://maps.googleapis.com/maps/api/place/search/json?"
        + "location=" + latString + "," + longiString
        + "&radius=15000&"
        + "types=restaurant&sensor=false&key="
        + myPlaceKey;

    //--- Get Places URL ----
    client = new DefaultHttpClient();
    HttpResponse response = client.execute(new HttpGet(bcURL));
    int statusLine = response.getStatusLine().getStatusCode();
    if(statusLine == 200){
        HttpEntity e = response.getEntity();
        String data = EntityUtils.toString(e);
        JSONObject urlData = new JSONObject(data);
        JSONArray resultsArr = urlData.getJSONArray("results");
        int length = resultsArr.length();
        List<String> listContents = new ArrayList<String>(length);
        for (int i = 0; i < length; i++)
        {
            listContents.add(resultsArr.getString(i));
        }

        ListView restListView = (ListView) findViewById(R.id.jsonList);
        restListView.setAdapter(new ArrayAdapter<String>(this,                      android.R.layout.simple_list_item_1, listContents));

    }
    //--- END Get Places URL ---- 
```

和代码的列表视图部分：

```
 JSONArray resultsArr = urlData.getJSONArray("results");
        int length = resultsArr.length();
        List<String> listContents = new ArrayList<String>(length);
        for (int i = 0; i < length; i++)
        {
            listContents.add(resultsArr.getString(i));
        }

        ListView restListView = (ListView) findViewById(R.id.jsonList);
        restListView.setAdapter(new ArrayAdapter<String>(this,                      android.R.layout.simple_list_item_1, listContents));

    }
    //--- END Get Places URL ---- 
```

“获取名称变量”的代码在哪里，该代码会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:44:09.123

看看[这里](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)，它应该描述你需要的一切。

长话短说：您需要从 jsonObject 检索您需要使用的值`JSONObject.getString("attributeName")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:05:24.683

如果要获取 JSON 文件的第一个对象，则需要执行以下操作：

```
 JSONArray samplearr = null;
        samplearr = new JSONArray(String);
       for(int index=0;index<samplearr.length();index++)
      {
        try
        {   
          JSONObject obj = samplearr.getJSONObject(index);

          JSONObject userobj = samplearr.getJSONObject(index).getJSONObject("user");

          Log.d("object","sample array created");
           userobj.getString("screen_name"),
          obj.get("text").toString(),
          userobj.getString("profile_image_url")

      }catch(Exception er)
      {
          Log.d("exceptiom","exception found at : "+er.getMessage());
      }

      } 
```

基本上，如果你想在一个对象中抓取一个对象，那么你就这样做。根据您的问题，您想要的字段似乎在“id”字段内，因此您必须通过它解析两次

# c# - 游戏可以在Win7上运行，但不能在Vista上运行？

> ID：11723798
> 
> 赞同：0
> 
> 时间：2012-07-30T14:42:30.697
> 
> 标签：c#, windows-7, xna, windows-vista, inno-setup

我一直在开发一款游戏，每次更新后我都会给我的朋友发送一个 setup.exe 来使用我用 Inno Setup 制作的。到目前为止，它一直运行良好。他能够安装游戏，但是当他运行 .exe 时，他得到“游戏已停止工作”。虽然安装后对我来说效果很好。我唯一能想到的可能是我使用存储容器添加了保存和加载。我选择保存位置：

```
 asyncResult = StorageDevice.BeginShowSelector(playerIndex, null, null);

 storageDevice = StorageDevice.EndShowSelector(asyncResult);

 asyncResult = storageDevice.BeginOpenContainer("Game1StorageContainer", null, null); 
```

这会将文件放置在：Desktop\Libraries\Documents\SavedGames\Game\Game1StorageContainer\Player1\

这是一个模糊的问题，但也许有人有想法？

：： 更新 ：：

好的，我让我的朋友重新安装了 XNA Runtime，同样的问题。

即使显示了隐藏文件夹，他的 minidump 文件夹中也没有文件。

但是我在这里有一个 Windows 错误日志：

```
 Application: My Game.exe
 Framework Version: v4.0.30319
 Description: The process was terminated due to an unhandled exception.
 Exception Info:Microsoft.Xna.Framework.GamerServices.GamerServicesNotAvailableException
 Stack:
    at Microsoft.Xna.Framework.GamerServices.KernelMethods+ProxyProcess..ctor(Microsoft.Xna.Framework.GamerServices.UserPacketBuffer)
    at Microsoft.Xna.Framework.GamerServices.KernelMethods.Initialize(Microsoft.Xna.Framework.GamerServices.UserPacketBuffer)
    at Microsoft.Xna.Framework.GamerServices.GamerServicesDispatcher.Initialize(System.IServiceProvider)
    at Microsoft.Xna.Framework.GamerServices.GamerServicesComponent.Initialize()
    at Microsoft.Xna.Framework.Game.Initialize()
    at My_Game.Game1.Initialize()
    at Microsoft.Xna.Framework.Game.RunGame(Boolean)
    at Microsoft.Xna.Framework.Game.Run()
    at My_Game.Program.Main(System.String[]) 
```

因此，它在 Game1.Initialize(); 处崩溃，其中包含：

```
 protected override void Initialize()
    {
        this.graphics.PreferredBackBufferWidth = 800;
        this.graphics.PreferredBackBufferHeight = 600;
        this.graphics.IsFullScreen = false;
        this.graphics.ApplyChanges();

        base.Initialize();
    } 
```

所以肯定是 base.Initialize();，我猜这是因为我从框架中包含了一些新的库。所以我不知道该怎么做，我以前的游戏版本对他来说很好。

有人知道我能做什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:03:19.050

1.  他是否安装了[XNA Runtime](http://www.microsoft.com/en-us/download/details.aspx?id=20914)？
2.  检查 Windows 事件日志，它应该有崩溃的详细条目
3.  当应用程序崩溃时，会创建一个[小型转储](http://support.microsoft.com/kb/315263)。您应该能够将其加载到 Visual Studio 中并查看它崩溃的位置。

# javascript - Jquery Autocomplete 和 Spring2.5.6 的问题

> ID：11723802
> 
> 赞同：0
> 
> 时间：2012-07-30T14:42:46.920
> 
> 标签：javascript, jquery, json, spring-mvc

我正在尝试使用 JQuery 和 Spring 2.5.6 显示自动完成列表，但我正在将 json 发送到前端，但我无法显示它。

```
 $(function() {
    $("#globalSearch").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "${pageContext.request.contextPath}/autoSearch.htm",
                data: {
                    term : request.term
                },
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    // this is the alert output its displaying:{"list":["ernst","ernst&nbsp"]} 
                    alert(JSON.stringify(data, null, 4));
                    response($.map(data, function(item) {
                        //its not alerting anything here
                        alert(JSON.stringify(item, null, 4));
                        return{
                            value: item.list
                        };
                    }));
                }
            });
        }
    });
}); 
```

这是我的弹簧控制器代码：

```
@RequestMapping(method = RequestMethod.GET, value = "/autoSearch.htm")
public ModelAndView autoSearch(
        @RequestParam(value = "term", required = false) String term
       ) throws ParseException, IOException {

    if (logger.isDebugEnabled()) {
        logger.debug("inventoryHandler called");
    }

    Map<String, Object> model = new HashMap<String, Object>();
    int i = 0;
    model.put("list", getBaseModel().getSearchServiceBean().autoCompleter(term));
    return new ModelAndView("jsonView", model);
} 
```

谁能告诉我如何显示自动完成列表。

提前致谢，

最好的问候，拉贾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:26:27.740

在 spring 3.x 之后，您将使用 @ResponseBody 注释，例如：

```
public @ResponseBody List<String> autocomplete(@RequestParam(value = "term", required = false) String term) {
    //Go get your results for the autocomplete term
    List<String> termResults = ...;

    return termResults;
} 
```

在我看来，您的响应以错误的内容类型发送回客户端，并被解释为 text/html 而不是 JSON。您可以设置响应内容类型并从控制器中写入 JSON 字符串吗？

```
String json = "{\"list\":[\"ernst\",\"ernst&nbsp\"]}";
response.setContentType("application/json");
PrintWriter writer = response.getWriter();
response.setContentLength(json.length());
writer.write(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:35:23.383

最后我找到了下面显示的解决方案。

```
 $(document).ready(function() {
    $("#globalSearch").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "${pageContext.request.contextPath}/autoSearch.htm",
                data: {
                    globalSearch : request.term
                },
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    response($.map(data.list, function(value) {
                        return{
                            label: value,
                            value: value
                        };
                    }));
                }
            });
        }
    });
}); 
```

在输入字段中，名称和 ID 必须相同

```
 <input type="text" name="globalSearch" id="globalSearch"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:26:32.527

@RequestMapping(method = RequestMethod.GET, value = "/autoSearch.htm") public ModelAndView autoSearch(@RequestParam(value = "term", required = false) String term) 抛出 ParseException, IOException {

```
 if (logger.isDebugEnabled()) {
        logger.debug("inventoryHandler called");
    }

    Map<String, Object> model = new HashMap<String, Object>();
    model.put("list", getBaseModel().getSearchServiceBean().searchAutoComplete(term));
    return new ModelAndView("jsonView", model);
} 
```

并且在 views.properties 文件中的视图应该设置为

jsonView.(class)=org.springframework.web.servlet.view.json.JsonView

并且在 javascript 中，自动完成将通过使用以下代码来工作：

```
 $("#searchEmail").autocomplete({
            source: function(request, response) {
                ajaxCall(request, response);
            },
            select: function(event, ui) {
                $("#searchEmail").val(ui.item.value);
                $("#emailSearch-form").submit();
            }
        });

        function ajaxCall(request, response) {
            $.ajax({
                url: "${pageContext.request.contextPath}/autoSearch.htm",
                data: {
                    term : request.term
                },
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    response($.map(data.list, function(item) {
                        return{
                            label: item,
                            value: item
                        };
                    }));
                }
            });
        } 
```

# jquery - jQuery offset() 错误

> ID：11723805
> 
> 赞同：0
> 
> 时间：2012-07-30T14:43:03.693
> 
> 标签：jquery, offset

我在网站上有一个问题，我认为是 CSS 问题，但真的无法弄清楚。

我正在使用 jQuery 来获取 div 图像容器的位置。当鼠标悬停在它上面时，应该会出现一个隐藏的表单，相对于 div 图像容器。隐藏的表单正确弹出，但位置错误，例如 offset() 的值错误。

这是 JS jQuery 代码（id 是我的 js 函数的参数）

```
var currentTarget = jQuery(id);
var pos = currentTarget.offset();

container.css('top', parseInt(pos.top) + 'px');
container.css('left', parseInt(pos.left) + 'px'); 
```

这是网站[http://www.disegnosis.com.ar/rentalstation/](http://www.disegnosis.com.ar/rentalstation/)

非常感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:22:03.807

您无法读取隐藏元素的偏移坐标。

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

常见的解决方法是暂时使元素可见，获取偏移坐标，然后再次隐藏它。

# encoding - Buckminster 无头构建 utf-8 编码

> ID：11723806
> 
> 赞同：1
> 
> 时间：2012-07-30T14:43:04.100
> 
> 标签：encoding, jenkins, eclipse-rcp, headless, buckminster

我们有一个 Jenkins CI，它创建了我们的 Eclipse RCP 应用程序。它是通过本教程设置的：[http](http://www.ralfebert.de/blog/eclipsercp/rcp_builds/) ://www.ralfebert.de/blog/eclipsercp/rcp_builds/ 。到目前为止一切顺利，直到我们决定为我们的项目使用 utf-8 编码而不是默认的 cp1252 编码之前，我们没有遇到任何问题。所以问题是如果我们启动创建的应用程序，编码被损坏。我尝试了一切，特别是使用 jvm -dfile.encoding="utf-8" 参数。我在 rcp.target、jenkins arguments 和 build.xml 构建属性中尝试了这个。

有人知道如何解决我的问题吗？

感谢您的每一个回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:03:51.797

我们也有同样的问题，不幸的是到目前为止还没有解决。我认为字符集必须在编译时设置。所以这可能是一个 jvm 参数而不是程序参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:24:56.807

确保您已将编码信息保存在项目中。如果没有此类信息，则将使用 eclipse 实例默认编码，这又默认为平台的默认编码。

Buckminster 构建使用尊重资源元数据的 eclipse 构建。

一种反模式是在 Eclipse 中更改默认值，而不是将其保存在项目中。下一个使用不同默认值的用户可能会造成一团糟，特别是如果他们也更改默认值并保存。

# c# - 应该使用什么方法来创建要在 WCF 应用程序中使用的数据模型

> ID：11723811
> 
> 赞同：-1
> 
> 时间：2012-07-30T14:43:17.017
> 
> 标签：c#, asp.net, wcf, dataset, webforms

我需要创建一个 WCF 服务应用程序，它将使用我的类库中的对象。这些对象需要从我的 WCF 应用程序中提供，并从 ASP.NET 中构建的 Web 应用程序中使用。

我必须使用数据集，但不确定我应该如何构建这个应用程序以及我应该以什么顺序构建所需的不同类。我应该先创建数据库模型然后构建数据集对象，还是应该先构建我的对象然后从我创建的对象集中创建我的数据模型。我还必须在这个应用程序中使用存储过程，所以我必须能够在我将使用的任何设计方法中支持它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:15:41.663

首先，我认为您需要准确定义要使用的技术。您一直说 DataSet，我假设您被迫使用经典的 ADO.NET 数据库编程。如果是这种情况，那么构建对象的顺序并不重要。

您的应用程序将利用您将从 ADO.NET 数据集中水合的对象，或者您可以使用 的新功能`Load<Type>()`来返回水合对象。您将首先构建您想要返回的对象，这些对象应该独立于数据库考虑因素。（何时何地构建数据库模型并不重要，您可以现在或稍后进行......持久性问题不应干扰对象建模和业务逻辑）

例子：

```
public class Book
{
     public string Title {get;set;}
     public DateTime PublicationDate {get;set;}
     public decimal Cost {get;set;}
     public virtual Author {get;set;}
}

public class Author
{
     public string Name {get;set;}
     public DateTime DateOfBirth {get;set;}
} 
```

接下来，您将构建您的存储库以返回对象并定义您的查询。而不是再次输入这个，我会给你几个链接来阅读。

[存储库和数据映射器模式](https://stackoverflow.com/questions/8844105/repository-and-data-mapper-pattern)

然后，您可以使用 DataSet 对对象进行水合，无论是来自 SQL 查询还是来自存储过程，都没有区别。

**然而**

我建议您对 Entity Framework 5RC 或 Entity Framework 4.1+ Code First 进行一些研究来执行此操作。ADO.NET 不是这样做的最佳方式。堆栈上有大量关于如何在 Code First 中工作的数据，但如果可以的话，我会给你一两个链接，让你开始走这条路。

[如何从 EntityFramework 查询复杂的结果集并在 MVC 中显示结果集。](https://stackoverflow.com/questions/11653687/how-to-query-a-complex-result-set-from-entityframework-and-display-the-result-se/11654115#11654115)

**我忘了提到** 你不能也不应该从 WCF 返回实时数据集。有一些技巧可以让你这样做，但我强烈建议你不要这样做，原因有很多。WCF 应该返回一个完全独立于持久性问题并包含没有逻辑的纯数据的 DTO（数据传输对象）。然后，这可以序列化和反序列化，而不用担心有人拥有对象 DTO 并被迫在 .NET 环境下操作。WCF 服务应该能够被任何支持 SOAP 的语言使用并反序列化为该语言中的对象。

来自 WCF 的响应本质上只是 XML 序列化对象，您应该始终考虑我在 DTO 中注入的额外关注点，这些关注点在任何 WCF 对您的服务使用者的响应中都不存在。

# android - MediaPlayer，只有视频 m3u8 HTML 流工作

> ID：11723812
> 
> 赞同：3
> 
> 时间：2012-07-30T14:43:20.443
> 
> 标签：android, stream, streaming, http-live-streaming

我正在使用带有 m3u8 音频流的 MediaPlayer。这会导致日志错误消息：`Error(1, -1010)`

当我查看错误代码时，第一个参数似乎没问题：[https ://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)

只是`-1010`，很奇怪。

当我使用苹果视频`m3u8`网址时，效果很好！这是网址： [http ://devimages.apple.com/iphone/samples/bibpop/gear1/prog_index.m3u8](http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8)

我使用的代码很简单：

```
MediaPlayer mediaPlayer = new MediaPlayer();
try {
    mediaPlayer.setDataSource("http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8");
    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mediaPlayer.prepare();
    mediaPlayer.setOnPreparedListener(this);
    mediaPlayer.setOnErrorListener(this);
    mediaPlayer.setOnCompletionListener(this);
    mediaPlayer.start();
} catch (IllegalArgumentException e1) {
    e1.printStackTrace();
} catch (IllegalStateException e1) {
    e1.printStackTrace();
} catch (IOException e1) { 
    e1.printStackTrace();
} 
```

有谁知道仅音频流是否有限制？我使用了多种格式和不同的扩展名。

其他问题：有人有 m3u8 音频流的 URL，所以我可以测试其他流吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:49:56.730

我目前正在参与一个解决这个主题的项目。现在我知道这并不能真正回答您的问题，而只是为了深入了解，即使在 Android 4.0+ M3U8 上，对 M3U8 的支持充其量也是参差不齐，最坏的情况是糟糕透顶。

例如：

*   Nexus 7 在 Akmai 上失败，在 UStream 上运行
*   Droid RAZR 适用于 Akmai 和 UStream。

现在没有通过类扩展来修补库（并且对于每个其他 android 次要版本都有 .so），我们发现没有仅 SDK/NDK 的解决方案；在我们的项目经过一个月的反复试验后，我们放弃了（成本太高）。

我们实施的解决方案是：尝试 SDK MediaPlayer。如果失败，请使用基于 FFMPEG 的播放器（内部开发，使用 dranger、ffplay、android-fplayer 和 dolphin-player 作为灵感）。

# android - XAPK 文件验证显示在正确的数据信息中

> ID：11723814
> 
> 赞同：8
> 
> 时间：2012-07-30T14:43:27.500
> 
> 标签：android, zip, crc, crc32

在运行 APK 扩展文件示例时，我只是跳过了检查 CRC32 以避免 crc 错误算法并且它工作得很好！！但是，虽然 XAPK 文件验证显示正确下载的数据信息 99% !!，如何避免这种情况并通过硬编码查看完整的 100%？

![在此处输入图像描述](../Images/273f9f1a7ea4ec962999d623a234d4ab.png)

![在此处输入图像描述](../Images/2ce05ea2475a5c541136d6368bb837f5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:09:44.403

这不是最好的解决方案，但我通过硬编码 `ProgressBar mPB; TextView mProgressPercent; TextView mProgressFraction;`在 DownloaderActivity onPostExecute 方法的validationAsynctask 中得到了解决方案

```
 mPB.setMax(10);
    mPB.setProgress(100);
    mProgressPercent.setText(100 + "%");
    mProgressFraction.setText("Download Completed Successfully"); 
```

# javascript - 如何在加载时重置窗口宽度和窗口比例？

> ID：11723817
> 
> 赞同：0
> 
> 时间：2012-07-30T14:43:48.077
> 
> 标签：javascript, jquery, zooming, scale

我使用 jquery 和 javascript 创建缩放效果（在 net.magazine 中发布的代码）但在我的下一步中，尝试将此网络调整为不同的设备（使用媒体查询等）我遇到了一个我试图检测的问题窗口大小（我的笔记本电脑屏幕大小为. 1024 x 768），我得到窗口和文档宽度/高度相同的结果 = 737x402 ！？为什么？是不是因为规模加载不是全屏的？

* * *

```
<div id=wrap>

<div id=container> 

<div id=content>

<div class=section id=first ></div>

<div class=section id=second ></div>

</div>
</div>
</div>

<div id=scroller ></div> 
```

的CSS

```
body{
margin: 0;
padding: 0; 

}
#wrap {
position: fixed;
width: 100%;
}
#scroller {
height: 1500px;
}
#container {
 position: relative;
 top:-57px;
 margin:0 auto;
width: 1070px;
height: 665px;
}
#content {
height: 665px;
position: absolute;
width: 100%;
}
#front-first {
  -webkit-transform: scale(1);
 -moz-transform: scale(1);
 -o-transform: scale(1);
 transform: scale(1);
background: url(images/pic1.jpg) no-repeat;
      background-size:70%;
position: absolute;
 z-index:20;
display: block;
width: 1070px;
height: 665px;
margin: 0 auto;
 }

 #front-second {
-webkit-transform: scale(0.3333);
 -moz-transform: scale(0.3333);
 -o-transform: scale(0.3333);
  transform: scale(0.3333);
    background: url(images/pic2.jpg) no-repeat;
      background-size:70%;
   position: absolute;
   z-index:20;
   display: block;
   width: 1070px;
   height: 665px;
  margin: 0 auto;
   }

   <script>

$(document).ready(function(){    
browserWindowheight = $(window).height();
alert(browserWindowheight);
browserWindowwidth = $(window).width();
alert(browserWindowwidth);

        function Zoomer(content) {
            this.content = content;
            this.scrolled = 0;
            this.levels = 4;
            this.docHeight = document.documentElement.offsetHeight;
            // bind Zoomer to scroll event
            window.addEventListener('scroll', this, false);
        }

        Zoomer.prototype.handleEvent = function(event) {
            if(this[event.type]) {
                this[event.type](event);
            }
        };
        Zoomer.prototype.scroll = function(event) {
            this.scrolled = window.scrollY / (this.docHeight - window.innerHeight );
        };
        Zoomer.prototype.scroll = function(event) {
            this.scrolled = window.scrollY / (this.docHeight - window.innerHeight );
            var scale = Math.pow(3, this.scrolled * this.levels), transformValue = 'scale(' + scale + ')';
            this.content.style.WebkitTransform = transformValue;
            this.content.style.MozTransform = transformValue;
            this.content.style.OTransform = transformValue;
            this.content.style.transform = transformValue;
        };
        function init() {
            var content = document.getElementById('content'),
            // init Zoomer constructor
            ZUI = new Zoomer(content);
        }

        window.addEventListener('DOMContentLoaded', init, false);
                 }); 
             <script>
             </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:04:08.850

使用 JS：

```
screen.width;
screen.height; 
```

这将检测*屏幕尺寸而不是浏览器尺寸

```
var winWidth = screen.width;
var winWidth = screen.height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:00:31.410

我不知道如何回答你的问题，但我谷歌它，我发现了这个：[http ://www.javascripter.net/faq/browserw.htm](http://www.javascripter.net/faq/browserw.htm)

希望能帮助到你！=)

# eclipse - Eclipse Juno，Maven项目无法在服务器上运行

> ID：11723818
> 
> 赞同：4
> 
> 时间：2012-07-30T14:43:51.053
> 
> 标签：eclipse, maven

我升级到**Eclipse Juno**（适用于 Java EE 开发人员）。我通过市场安装**了 Eclipse 的 Maven 集成。**

*只是为了测试，我使用maven-archetype-webapp*创建了一个 Web 应用程序。我无法在服务器上运行（没有菜单*Run On Server*）。另一个使用**Eclipse Indigo**运行良好的 maven 项目也是如此。尝试删除*.settings*、*.classpath*、*.project*然后重新导入项目但没有。我对**朱诺寄予厚望**！

有谁知道这个问题的真正解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T11:33:52.757

可能是未选择 Project Facet 中的动态 Web 模块

转到：-**项目>属性>项目方面>检查动态Web模块**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T17:25:20.173

安装[m2e-wtp](http://www.eclipse.org/m2e-wtp/)插件并尝试如何？您需要确认 maven 项目也是`war`打包的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:48:57.717

在服务器上运行不是 Maven 功能，它是“经典 Eclipse”功能。

为了在服务器上运行 maven 项目，您必须采用插件（例如，您的 webapp 的 Jetty 插件）并运行正确的 maven 目标（例如 jetty-run）。

`(right-click) > Run as > Run on server`也就是说，如果您配置了正确的运行时环境，您可以在服务器上运行 Web 项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T14:12:08.243

*在 Maven 项目中，在Project Facets*中启用“**动态 Web 模块**”可能无济于事。

 *因为 maven 项目的结构（*target/sampleApp-1.0-SNAPSHOT.war*）与普通的**动态 Web 项目**（*WebContent/*）不同。

因此，如果您手动使用**动态 Web 模块**，那么 eclipse 将尝试使用“ *WebContent* ”目录结构作为应用程序服务器的部署目录，而在 maven 项目中不会出现这种情况。

解决方案是使用**m2e-wtp**插件进行*部署*。

如果您安装了**m2e-wtp**插件，它会*自动*检测您的 maven 项目类型，并在“*项目”的“**运行方式*”菜单中显示“**作为服务器运行**”选项。*

# android - 使用 SimpleCursorAdapter 自定义 ListView

> ID：11723823
> 
> 赞同：-1
> 
> 时间：2012-07-30T14:43:58.060
> 
> 标签：android, android-listview, android-custom-view, android-sqlite

我正在尝试获取一些存储在 SQLite 数据库中的数据并将其显示在自定义列表视图中。

文件`Settle.java`：

```
public class Settle extends ListActivity {
    SQLiteDatabase DB;
    Cursor cur;
    SimpleCursorAdapter mAdapter;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settle);

        DB = openOrCreateDatabase("MoneyManager.db",MODE_PRIVATE,null);

        cur = DB.rawQuery("SELECT * FROM Money",null);

        String[] columns = new String[] {cur.getString(cur.getColumnIndex("name")),Double.toString(cur.getDouble(cur.getColumnIndex("amount")))};           
        int[] to = new int[] { R.id.settle_name,R.id.settle_amount};

        SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.settle_entry, cur, columns, to);

        this.setListAdapter(mAdapter);
    }

    protected void onDestroy() {
        super.onDestroy();
        DB.close();
    }
} 
```

文件`Settle_entry.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/settle_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="28dip" />

    <TextView
        android:id="@+id/settle_amount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="28dip" />

</LinearLayout> 
```

我的[数据库架构](http://en.wikipedia.org/wiki/Database_schema)是

*   名称 - VARCHAR
*   金额 - 真实
*   原因 - VARCHAR

如何从 SQLite 数据库中获取数据并将其显示在 Custom 中`ListView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:17:55.523

假设您的数据库已经创建并填充，您的代码应该可以通过更改列数组来工作：

```
String[] columns = new String[] {"name","amount"}; 
```

无论如何，我建议您实现一些机制（即 AsyncTask）来在后台加载光标。

# css - Flash 横幅与其他代码重叠

> ID：11723827
> 
> 赞同：0
> 
> 时间：2012-07-30T14:44:09.850
> 
> 标签：css, flash, html

当显示来自第三方的 Flash 横幅时，它们与我的代码重叠：

![在此处输入图像描述](../Images/c7beacda60466da48f18b1cb90d9a0d4.png)

测试网址为：[http](http://test.otwierac.pl/) ://test.otwierac.pl/ （多次刷新页面即可看到）

代码是：

```
<div style="width:100%">
<div id="banner">

<script>
<!--
var d = new Date();
r = escape(d.getTime()*Math.random());
document.writeln('<script src="http://tracking.novem.pl/rotator/CD31115/59&js=1&r='+r+'&keyword="><\/script>');
//-->
</script><div id='beacon_1' style='position: absolute; left: 0px; top: 0px; visibility: hidden;'><img src='http://test.otwierac.pl/reklamy/www/delivery/lg.php?bannerid=1&amp;campaignid=1&amp;zoneid=0&amp;loc=http%3A%2F%2Fwww.test.otwierac.pl%2F&amp;referer=http%3A%2F%2Ftest.otwierac.pl%2F&amp;cb=6d0002d6e4' width='0' height='0' alt='' style='width: 0px; height: 0px;' /></div>
</div>
</div> 
```

CSS 代码：

```
#banner
{
    margin-top:10px;
    width:950px;
    margin:0 auto;
    text-align:center;
} 
```

如何解决这个问题？横幅应居中且不与我的文字重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:53:26.720

有一个flash参数wmode: opaque

应该做的伎俩

**编辑**

来自[adobe 网站](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Optional_attributes)： **不透明**- SWF 内容与页面上的其他 HTML 元素分层。SWF 文件是不透明的，并隐藏了页面上位于其后面的所有内容。与 wmode=window 或 wmode=direct 相比，此选项会降低播放性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:04:39.673

编辑：

尝试：

```
#banner {
    height: 315px;
    margin-top: 10px;
    text-align: center;
    width: 950px;
} 
```

# jquery - 如何用 CSS 覆盖输入字段

> ID：11723830
> 
> 赞同：0
> 
> 时间：2012-07-30T14:44:23.207
> 
> 标签：jquery, css, jsf

我有一个 JQuery css 文件覆盖的 JSF 输入字段。我想使用 Primefaces[日历](http://www.primefaces.org/showcase-labs/ui/calendarTime.jsf)。

```
<p:calendar style="" 
            styleClass=""
            id="datetochangepasswd"
            value="#{AddAccountController.formMap['DATETOCHANGEPASSWD']}"
            pattern="MM/dd/yyyy HH:mm:ss" /> 
```

你能帮忙覆盖输入字段吗？我想再次使用默认浏览器样式。

PS 这是我在 Firebug 中看到的 css 样式。

```
<input id="form:datetochangepasswd_input" class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker" type="text" name="form:datetochangepasswd_input" role="textbox" aria-disabled="false" aria-readonly="false" aria-multiline="false"> 
```

我怎样才能覆盖它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:12:34.480

正如有人在您原始帖子的评论中指出的那样，CSS 不会改变该字段中显示/生成的内容。如果您的字段具有您不希望拥有的值，那么这要么是硬编码到 JSP 中的某处，要么是在 HTML 本身中。

但是，如果您的表单只是在外观上与您想要的不同，正如其他人指出的那样，您可以使用 jQuery 即时删除 class 属性，但这将是页面加载后的片刻，并且还取决于布局了 jQuery 样式和 JS，很可能 jQuery UI 是在 jQuery 本身之后调用的，因此它将覆盖您希望执行的大部分操作。当然，这就是准备好的文件。

此外，您始终可以在 jQuery UI css 文件之后包含一个 CSS 文件，并将其包含在您希望将表单恢复为默认设置的页面上，然后重新创建您在上面示例中看到的类名以以不同方式显示. 总而言之，有十几种方法可以立即改变我脑海中浮现的样式。

总的来说，它更多的是关于你如何将所有东西作为一个整体进行布局，以及你最终真正想要做什么。不幸的是，您的初始描述并没有给出太多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:53:26.633

看来您正在使用 jQuery 的日期选择器。删除 jQuery datepicker 实例化，它应该会自行修复。

# bash - Bash 脚本帮助/评估

> ID：11723834
> 
> 赞同：0
> 
> 时间：2012-07-30T14:44:47.357
> 
> 标签：bash

我正在尝试学习一些脚本，但是我找不到一个功能的解决方案。

基本上我想要求评估我的脚本，因为它可能会降低复杂性和行数。

此脚本的目的是从 Amazon S3 下载随机、加密的 MySQL 备份、恢复转储并运行一些随机 MySQL 查询。

我不确定如何通过电子邮件发送 printf 语句的输出 - 一个用于标题，第二个用于实际数据。我尝试格式化输出，使其如下所示，但我不得不从循环中排除标题：

```
Database:   Table:          Entries:                      

database1   random_table        0                             
database2   random_table        0                             
database3   random_table        0
database4   random_table        0 
```

我想将此输出包含在电子邮件中，并根据脚本的成功/失败更改电子邮件主题。

如果循环和 MySQL 查询可能很复杂，我可能会使用很多。

脚本：

```
#!/usr/bin/env bash

# DB Details:
db_user="user"
db_pass="password"
db_host="localhost"

# Date
date_stamp=$(date +%d%m%Y)

# Initial Setup
data_dir="/tmp/backup"

# Checks
if [ ! -e /usr/bin/s3cmd ]; then
    echo "Required package (http://s3tools.org/s3cmd)"
    exit 2
fi
if [ -e /usr/bin/gpg ]; then

    gpg_key=$(gpg -K | tr -d "{<,>}" | awk '/an@example.com/ { print $4 }')

    if [ "$gpg_key" != "an@example.com" ]; then
        echo "No GPG key"
        exit 2
    fi

else
    echo "No GPG package"
    exit 2
fi

if [ -d $data_dir ]; then
    rm -rf $data_dir/* && chmod 700 $data_dir
else
    mkdir $data_dir && chmod 700 $data_dir
fi

# S3 buckets
bucket_1=s3://test/

# Download backup

for backup in $(s3cmd ls s3://test/ | awk '{ print $2 }')
do
    latest=$(s3cmd ls $backup | awk '{ print $2 }'  | sed -n '$p')
    random=$(s3cmd ls $latest | shuf | awk '{ print $4 }' | sed -n '1p')
    s3cmd get $random $data_dir >/dev/null 2>&1
done

# Decrypting Files
for file in $(ls -A $data_dir)
do
    filename=$(echo $file | sed 's/\.e//')
    gpg --out $data_dir/$filename --decrypt $data_dir/$file >/dev/null 2>&1 && rm -f $data_dir/$file
    if [ $? -eq 0 ]; then

        # Decompressing Files
        bzip2 -d $data_dir/$filename
        if [ $? -ne 0 ]; then
            echo "Decompression Failed!"
        fi
    else
        echo "Decryption Failed!"
        exit 2
    fi
done

# MySQL Restore

printf "%-40s%-30s%-30s\n\n" Database: Table: Entries:

for dump in $(ls -A $data_dir)
do
    mysql -h $db_host -u $db_user -p$db_pass < $data_dir/$dump
    if [ $? -eq 0 ]; then

        # Random DBs query
        db=$(echo $dump | sed 's/\.sql//')
        random_table=$(mysql -h $db_host -u $db_user -p$db_pass $db -e "SHOW TABLES" | grep -v 'Tables' | shuf | sed -n '1p')
        db_entries=$(mysql -h $db_host -u $db_user -p$db_pass $db -e "SELECT * FROM $random_table" | grep -v 'id' | wc -l)

        printf "%-40s%-30s%-30s\n" $db $random_table $db_entries

        mysql -h $db_host -u $db_user -p$db_pass -e "DROP DATABASE $db"     
    else
        echo "The system was unable to restore backups!"
        rm -rf $data_dir
        exit 2
    fi
done

#Remove backups
rm -rf $data_dir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:32:25.367

移出循环：

```
random_tables=$(mysql -h $db_host -u $db_user -p$db_pass $db -e "SHOW TABLES" | grep -v 'Tables')
table_nb=$(wc -l <<<"$random_tables") 
```

并在循环中

```
random_table=$(sed -n $((RANDOM%table_nb+1))p <<<"$random_tables") 
```

备注 $? 是最新执行的命令的状态，所以之后`&& rm`不会是解密的状态

# php - PHP 标记删除文档中的最后一个换行符

> ID：11723835
> 
> 赞同：4
> 
> 时间：2012-07-30T14:44:49.687
> 
> 标签：php, html, formatting, newline

这个问题纯粹是为了获得整洁的 HTML 代码输出。

在一个简单的 PHP 文件中，您可以使用标签选择何时将 PHP 嵌入到文档中。然而，当这个标签直接用在常规 HTML 元素之上时，分隔两者的换行符显然被删除或忽略了。

在 PHP 中观察以下代码

```
<div>
<?php echo "This is some extra text." ?>
</div> 
```

输出如下

```
<div>
This is some extra text.</div> 
```

但是，如果我直接在标签之后添加一些东西，

```
<div>
<?php echo "This is some extra text." ?> Now the newline is honored.
</div> 
```

看来换行符很荣幸：

```
<div>
This is some extra text. Now the newline is honored.
</div> 
```

同样，这纯粹是一个外观问题，与错误地呈现页面无关。我希望源代码美观且易读，并且可以肯定我可以在第一个 echo 末尾添加“\n”字符，但这并不令人满意，而且会相当烦人。有什么办法可以解决这个问题，还是我只是做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:19:53.890

这是 PHP 长期存在的问题。基本上，如果你的关闭标签后面有一个换行符，PHP 会吃掉它。但是，如果在结束标记之后有其他字符（甚至是空格），那么它之后的任何换行符都会受到尊重。

例如

```
<?php echo "Hello"; ?>\nWorld 
```

产生：

```
HelloWorld 
```

和

```
<?php echo "Hello"; ?>\n\nWorld 
```

产生：

```
Hello⏎
World 
```

然而，

```
<?php echo "Hello"; ?> \nWorld 
```

生产

```
Hello ⏎
World 
```

所以解决方法是记住在每个块的输出末尾添加一个换行符，或者在结束标记和它之后的换行符之间插入一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:47:30.573

尝试让它强制换行：

```
<div>
<?php echo "This is some extra text." ?>

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:49:25.607

该`\n`字符对您来说是不可见的，但是当您在之后添加额外的文本时，您正在点击返回/输入。

如果您希望添加的文本具有换行符，只需执行以下操作：

```
<?php echo "This is some extra text.\n" ?> 
```

# c - 指令指针和函数指针常量

> ID：11723836
> 
> 赞同：2
> 
> 时间：2012-07-30T14:44:50.493
> 
> 标签：c, function-pointers

我有以下一段 C 代码，它打印**rip**寄存器和函数 foo 的地址。多次运行可执行文件会导致打印相同的**rip**和 &foo 值。

```
#include <stdio.h>
#include <inttypes.h>

void foo(int x) {
    printf("foo sees %d\n", x);
}

int main(int argc, char *argv[]) {
    uint64_t ip;
    asm("leaq (%%rip), %0;": "=r"(ip));
    printf("rip is 0x%016" PRIx64 "\n", ip);

    void (*fp)(int) = &foo;
    printf("foo is at offset %p\n", fp);
    (*fp)(10);        

    return 0;
} 
```

Q1：为什么 rip 保持不变？

Q2：如果二进制文件和机器保持不变，&foo 会保持不变吗？

Q3: &foo 什么时候可以改变？

背景：我正在尝试将函数的执行时间存储在历史表中。我正在考虑使用函数地址来索引表并计算与先前执行的偏差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:49:58.383

Q1：

取决于你的平台。某些平台将您的程序加载到虚拟地址空间中，因此完全相同的代码将具有完全相同的*foo*虚拟地址（假设程序和操作系统的加载器在运行之间不会改变，并且加载器不是随机化的根据评论加载地址）。在不将您的可执行文件加载到虚拟地址空间的其他平台上，您可能会或可能不会获得相同的地址，具体取决于其他程序是否已执行和/或在运行之间终止。

Q2：

不要指望它。如果*根本没有任何*变化，您将具有确定性行为（相同地址）。但是有很多很多东西可以改变（同样，取决于平台）。

问题 3：

它们可以在不分配虚拟地址的平台上随时更改（因为其他进程开始/继续工作/终止）。在确实分配虚拟地址的平台上，如果您的程序或相关库发生变化，如果有一个操作系统补丁改变了加载程序行为，或者可能是由于我目前没有想到的其他情况，它们的地址可能会改变.

**底线**

存储地址可能适用于您非常具体的情况，但这是一个脆弱的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:55:17.967

没有什么是保证的。

解决方案是使用函数**名**进行索引，而不是它的地址（C99 标准提供了`__func__`标识符）。这样可以保证您的索引在操作系统、编译器、选项和月相的所有更改中保持不变。直到你重构函数名，当然:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:16:09.480

由于您使用的是 Linux，您可以使用它`dladdr()`来询问内存中位置附近的符号。例如：

```
#define _GNU_SOURCE
#include <dlfcn.h>
#include <stdio.h>

void foo() {
}

int main() {
  Dl_info info;
  void *test = foo; // Note: not standard C
  dladdr(test, &info);
  printf("closest symbol: %s in %s\n", info.dli_sname, info.dli_fname);
  return 0;
} 
```

编译时：

```
gcc -Wall -Wextra test.c -ldl -rdynamic

```

正确识别`void*`as `foo`，无论在哪里`foo`加载都是正确的。

# jquery - 从ajax获取最后一课文本

> ID：11723837
> 
> 赞同：0
> 
> 时间：2012-07-30T14:44:54.393
> 
> 标签：jquery, html, ajax, class, jsp

这是我通过ajax 调用的jsp。

```
<s:iterator var="result" value="all" id="result">
   <div class="Item">
       <span class="item_id" style="display:none"><s:property value="%{#result.id}"/></span>
   </div>
</s:iterator> 
```

这是我使用 jquery 调用它的 javascript。

```
 jQuery.ajax({
            type:"POST",
            url:"test.jsp",
            data:"type="+type+"&start_id="+start_id,
            success:function(data){
                    item_id=$(data).find(".item_id").text();
                    console.log("item_id="+item_id);
                }
            }); 
```

我的问题是我想知道我调用的最后一个 item_id。这样我就可以打电话给下一个了。我该怎么做？我的代码让我得到了该类 item_id 中的所有内容，没有任何分隔符，所以我不知道我的最后一个 id 是什么。

输出示例：

```
7910 ==> i only want 10. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:48:37.963

您可以使用以下

item_id=$(data).find(".item_id:last").text();

而不是 item_id=$(data).find(".item_id").text();

# java - 有没有办法可以在 JSF 的视图范围 bean 中调用每个请求的内容？

> ID：11723842
> 
> 赞同：1
> 
> 时间：2012-07-30T14:45:29.247
> 
> 标签：java, validation, jsf, jsf-2

我有一个基本的 CRUD 视图范围 bean。在 setter 方法中，我正在执行一些特定于数据的验证，如果其中任何一个 setter 发生错误，它会为每个 setter 构建详细的错误消息。

这工作正常，但我想在每个请求上清空这个错误消息，我不知道我会怎么做。 `preRenderView`不会削减它，因为此错误消息也需要呈现。像 a`postRenderView`这样的东西是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:14:27.373

您不应在 setter 方法中执行验证，也不应将验证消息存储在支持 bean 中。您的整个问题只是由糟糕的设计和没有使用 JSF 提供的验证工具引起的。

只需使用 JSF 提供的验证工具，而不是完全围绕它工作，到目前为止所描述的所有问题都会消失。您可以在输入组件上使用多个 JSF 内置验证器，例如`required="true"`、`validator="javax.faces.XxxValidator`、`<f:validateXxx>`标签等。`Validator`您可以通过实现接口并为其提供您在`validator="myValidator"`or中使用的唯一验证器 ID来创建自定义验证器`<f:validator validatorId="myValidator">`。

使用 JSF 标准验证时，任何验证错误都将在请求范围内以`ValidatorException`带有 a的形式抛出，`FacesMessage`该范围将显示在`<h:message>`与组件关联的 a 中。这样，消息将在后续请求中“自动”消失。

这是一个非常基本的启动示例：

```
<h:form>
    <h:inputText id="foo" required="true" requiredMessage="Enter this!" />
    <h:message for="foo" />
    <h:commandButton value="Submit" />
</h:form> 
```

### 也可以看看：

*   [如果选择的日期在特定日期之前，是否有如何验证丰富：日历？](https://stackoverflow.com/questions/6445827/is-there-how-to-validate-into-richcalendar-if-the-date-selected-is-before-a-spe/6450852#6450852)
*   [如何使用 AJAX 数据验证创建 JSF 表单](https://stackoverflow.com/questions/10454692/how-to-create-jsf-form-with-ajax-data-validation/10455319#10455319)
*   [在 EJB 中进行验证时，如何在 jsf 中显示多条错误消息？](https://stackoverflow.com/questions/10855607/how-to-show-multi-error-message-in-jsf-while-validation-is-in-ejb/10855725#10855725)
*   [如何通过ajax验证两个密码字段？](https://stackoverflow.com/questions/7489893/how-validate-two-password-fields-by-ajax/7493527#7493527)
*   ETC...

# jquery - Change background position with click from a button

> ID：11723850
> 
> 赞同：-1
> 
> 时间：2012-07-30T14:46:04.177
> 
> 标签：jquery, css, background, position, sprite

Ok so im making a slot machine look alike - for this i need to make a sprite of 5 picture lets say 500 height then and 100 width (each image is 100x100). I need it so that i have a button on top of the image and one in the button og the image - so i can go to next picture with the buttom button (new position on the sprite) or previous with the top button.

I hope someone can help me since i have been searching for something i can use all day. Im sure its very simple for some of you guys.

thx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:57:33.633

我相信你有所有的部分，你只需要把它们放在一起，所以让我们把它分开。

如果您跟踪当前显示的图像，并且知道每个图像的高度，则很容易计算出正确的背景位置。假设我们称您为 tracking-variable `i`。请注意，它`i`必须从零开始才能正常工作。我们假设每个图像的高度是 100px。我们还乘以`-1`得到您需要的负值。

```
var position = "0 " + (i * 100 * -1) + "px"; // Will be something like "0 -100px" 
```

您可以使用 jQuery 更改背景位置[`.css()`](http://api.jquery.com/css/)，如下所示：

```
$("#your-image-container-id").css("backgroundPosition", position); 
```

您可以使用 jQuery 为您的按钮添加一个单击事件侦听器[`.click()`](http://api.jquery.com/click/)。

```
$("#your-button").click(function () {
    /* 
    Do your rotation magic here
    For the next button increase i by one and apply the new position
    For the prev button you decrease i by one instead...
    */
}); 
```

有了这些，我相信你应该能够组装你需要的代码。如果您卡在某个地方，请随时询问。

**更新：**

我已经为你组装了一些碎片：

```
$(function () {    
    var i = 0,
        numberOfImages = 5;

    // Handle click on next button
    $(".next-btn").click(function () {
        // Increase by one, and restart when we reach the last image
        i = ((i + 1) < numberOfImages) ? i + 1 : 0;
        var position = calculateBackgroundPosition(i);
        $(".image-container").css("backgroundPosition", position);
    });
});

function calculateBackgroundPosition(index)
{
    return "0 " + (index * 100 * -1) + "px";
} 
```

它也可以[在这个 fiddle](http://jsfiddle.net/3BZEH/22/)中找到。剩下要做的是实现上一个按钮，但这将是您的任务。看看 next-button 是如何实现的，然后试试看！

**更新 2：**

在 Firefox 中为背景位置设置动画似乎有点麻烦。我发现这个[SO answer](https://stackoverflow.com/a/6280048/678801)描述了一个扩展，以使其在 Firefox 中正常工作。不幸的是 Firefox 不支持`background-position-y`，并且提到的扩展不支持 jQuery 的`backgroundPosition: "+=50px"`语法。所以我不得不做一个解决方法。

它不是那么顺利，但是如果您包含上述扩展名。您可以使用以下代码使其工作：

```
$(function () {    
    var i = 0,
        numberOfImages = 5;

    $(".op").click(function () {
        // Decrease by one, and restart when we reach the first image
        i = ((i - 1) >= 0) ? i - 1 : numberOfImages - 1;
        animate(this, i);
    });

    $(".ned").click(function () {
        // Increase by one, and restart when we reach the last image
        i = ((i + 1) < numberOfImages) ? i + 1 : 0;
        animate(this, i);
    });
});

function calculateBackgroundPosition(index)
{
    return "0 " + (index * 50 * -1) + "px";
}

function animate (that, i)
{
    var position = calculateBackgroundPosition(i);
    $(that).parent().find(".hjul").animate({"backgroundPosition": position});    
} 
```

这也是一个[工作示例](http://jsfiddle.net/yEhpF/60/)。

当它到达最后一张图像时，它的表现并不完美，应该重新开始，反之亦然，但它是我目前最好的。

**更新 3：**

要使其与多个轮子一起工作，您需要`i`为每个轮子设置一个单独的计数器变量。否则会相互影响。我更新了您的代码，以便 ID`hjulwrapper`现在是一个类`hjulwrapper`。ID 必须对单个元素是唯一的。因此，请确保相应地更新您的 CSS。除此之外，您必须将一些代码更新为：

```
$(function () {

    $(".hjulwrapper").each(function () {

        var i = 0,
            numberOfImages = 5;

        $(".op", this).click(function () {
            // Decrease by one, and restart when we reach the first image
            i = ((i - 1) >= 0) ? i - 1 : numberOfImages - 1;
            animate(this, i);
        });

        $(".ned", this).click(function () {
           // Increase by one, and restart when we reach the last image
            i = ((i + 1) < numberOfImages) ? i + 1 : 0;
           animate(this, i);
        });
    });
}); 
```

请注意，我遍历`hjulwrapper`每个轮子并为每个轮子创建一个单独的微调器。

这是一个工作小提琴：http: [//jsfiddle.net/yEhpF/65/](http://jsfiddle.net/yEhpF/65/)

# asp.net - Asp.Net .包含任何顺序的所有单词

> ID：11723851
> 
> 赞同：0
> 
> 时间：2012-07-30T14:46:04.693
> 
> 标签：asp.net, contains

我有一个搜索框，我需要根据字符串数组检查其中的所有单词

到目前为止，我有以下代码

```
 For i As Integer = 0 To wordList.Length - 1

            If wordList(i).Contains(TextBox1.Text) Then
                Dim item As String() = New String(0) {}
                item(0) = wordList(i)

                items.Add(item)
            End If

        Next 
```

这将检查单词是否按输入顺序包含文本框中的内容，但不包含任何顺序的单个单词。

有什么想法可以按任何顺序检查每个单词并仅显示`wordList`包含所有单词的单词吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:48:44.550

使用 LINQ：

```
Dim words As String() = TextBox1.Text.Split(' 'c);
If words.All(AddressOf someString.Contains) Then 
```

如果您不想匹配中间的文本，则需要使用正则表达式：

```
If words.All(Function(W) Regex.IsMatch(someString, "\b" + Regex.Escape(w) + "\b")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:50:21.033

尝试使用此代码：

```
result = from  item in wordList 
            where item.Contains(TextBox1.Text)
            select item; 
```

# java - 外部库的日志记录策略（slf4j？）

> ID：11723853
> 
> 赞同：1
> 
> 时间：2012-07-30T14:46:08.247
> 
> 标签：java, logging, jar, log4j, slf4j

我想提供一个客户端库，用于将休息请求包装到服务器并记录错误，以便客户端可以在他的应用程序中使用它并查看日志。（还有一个问题是我应该只记录错误还是重新抛出它。当我使用异步调用（多线程）时，这可能会很棘手..）

我读到 slf4j 可能会有所帮助，因为使用该库的客户端可以选择他喜欢的日志记录框架。

有些东西让我对这个 slf4j 的事情感到困惑。如果他得到我的库，而我只是提供，假设是 slf4j-api，则会引发错误，导致 SLF4J 绑定不包括在内。解决方案可能是他必须自己包含绑定，问题是他是否愿意阅读自述文件以获取这些关键信息。

如果我包含一个“标准”-slf4j 绑定（例如简单的绑定），则应用程序不能“覆盖”它，因为类路径上只允许一个绑定。不再灵活

所以我想只使用 log4j 而忘记所有其他日志记录框架。我可能想在这个问题上变得复杂，也许有人可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T20:10:39.467

您必须记住，您的库没有设置包装应用程序的类路径。包装应用程序将设置一个包含您的库、slf4j API 库和实现库的类路径。

包装应用程序将负责使用什么 slf4j 实现并设置所有日志记录参数。您只需要担心使用 slf4j API 记录您的库事件。这是常见的做法，不用担心包装应用程序。

通过在你的库中打包 log4j，你违背了日志外观的目的。这样做将不允许用户选择 slf4j 实现。

# java - android中的活动变化

> ID：11723855
> 
> 赞同：0
> 
> 时间：2012-07-30T14:46:14.003
> 
> 标签：java, android, android-intent, android-activity

我正在为 Android 制作游戏，但我从未真正找到改变活动或内容视图的好方法。我现在有 1 个主菜单活动，其内容视图接收`MotionEvent`s 并将它们发送到我的自定义按钮。另一个`Activity`有一个简单的`contentView`，它只是用一种颜色绘制屏幕。所有`contentView`s 都具有相同的基类，并且活动 2 是从活动 1 派生的。

问题是，如果尝试更改活动，应用程序就会崩溃。大约需要 20 秒，然后出现错误消息，指出应用程序没有响应。在 logcat 中，还有一条消息`keyDispatchingTimedOut sending to activity2` 下面是活动更改的代码：

```
public void changeActivity() {
    Log.d("changing", "activity");
    Intent i=new Intent(this, Activity_Level.class);
    startActivity(i);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:54:50.577

您必须在方法中使用活动的上下文

```
Intent i=new Intent(Youar_Activity_Name.this, Activity_Level.class);
                    ^^^^^^^^^^^^^^^^^^^^^^ 
```

在您的 changeActivity() 方法中使用上述代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:59:37.407

如果应用程序没有响应，那是因为您在 UI 线程上执行了长时间操作。也许在调用这个函数之后你继续做其他事情？

如果，正如人们所说，活动没有打开（你可以通过在 onCreate 方法中写入日志来检查它），检查清单。

无论如何，如果您想更好地控制活动，您可以检查用于意图的可能标志，也可以使用片段（如果可能），就像谷歌推荐的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:48:23.567

没有看到 logcat 消息，我敢打赌你忘了在 AndroidManifest.xml 中添加活动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:53:57.550

我感觉到您没有将所有活动都添加到`manifest.xml`文件中。尝试在那里添加所有活动，然后试一试。

# html - HTML 元刷新 - 删除文件后出错

> ID：11723862
> 
> 赞同：0
> 
> 时间：2012-07-30T14:46:33.580
> 
> 标签：html, .htaccess, redirect, meta-tags

我正在使用`.htaccess`重定向和 HTML`meta`刷新的组合来放入临时启动页面，同时从备份中恢复我的网站。

这是`index.html`：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Site Restore</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="refresh" content="15">
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.5.1/build/cssreset/cssreset-min.css&3.5.1/build/cssfonts/cssfonts-min.css&3.5.1/build/cssbase/cssbase-min.css">
        <style type="text/css">
            html {
                background-color: #ccc;
            }
            div {
                margin: 1em auto;
                border: 1px solid #000;
                border-radius: 0.5em;
                padding: 1em;
                width: 480px;
                background-color: #fff;
            }
        </style>
    </head>
    <body>
        <div>
            <h1>Site Restore</h1>
            <p>This web site is being restored from a back-up, and will be back online shortly.</p>
            <p>If you leave this page open, it will redirect when the site restore is complete.</p>
        </div>
    </body>
</html> 
```

`.htaccess`重定向：

```
RewriteEngine On
RewriteBase /
RewriteRule ^.+$ / [R=302,NC,L] 
```

备份还原完成后，我`RewriteRule ^.+$ / [R=302,NC,L]`从文件中删除该行`.htaccess`并删除该`index.html`文件。即使`index.html`不在 URL 中，我也会从 Web 服务器返回此错误：

> 禁止的
> 
> 您无权访问此服务器上的 /index.html。Apache/2.2 服务器位于 dev.swissmangocms.com 端口 80

如果我手动刷新浏览器窗口，`index.php`则会按预期加载。如何避免错误消息和手动步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:20:35.453

[Jon Lin](https://stackoverflow.com/users/851273/jon-lin)的评论使我转向禁用浏览器缓存的方向。我在 SO 上找到了另一篇文章“[使用标签关闭所有浏览器中的缓存？](https://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers) ”，并将这些行添加到我的`index.html` `<head>`部分：

```
<meta http-equiv="cache-control" content="max-age=0">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
<meta http-equiv="pragma" content="no-cache"> 
```

这修复了错误！

# jquery - 选项卡式内容之间的 jQuery 链接

> ID：11723864
> 
> 赞同：0
> 
> 时间：2012-07-30T14:46:41.927
> 
> 标签：jquery, html, css, url

我有以下代码：[fiddle](http://jsfiddle.net/AJBweb1986/vRqcb/6/)，我该如何设置它以便我可以拥有不同选项卡的 url，我尝试将选项卡 ID 添加到 url 并且不起作用。我也尝试过锚点，但它不起作用，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:56:41.233

您必须通过绑定单击事件手动触发选项卡切换功能。

HTML：

```
<ul id="tabs">

      <li><a href="#tab1">test1</a></li>
      <li><a href="#tab2">test2</a></li>
      <li><a href="#tab3">test3</a></li>
      <li><a href="#tab4">test4</a></li>

</ul>

<span class="tablink" data-href="#tab1">link</span> 
```

JS：

```
$('.tablink').click(function(){
   $('a[href="'+$(this).attr('data-href')+'"]').click();
}); 
```

此链接将如同您单击该选项卡一样工作。

它会找到激活标签的链接，并触发它的点击事件。

**编辑以适合提问者的 HTML**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:06:44.590

你可以很容易地做到这一点。由于您的列表按出现顺序与选项卡本身相对应，因此您不需要 id，您可以这样做：

### HTML

```
<ul id="tabs">
    <li><a href="http://domain.com/#tab1">test1</a></li>
</ul>

<div>
      <div class="container">Some content1</div>
</div> 
```

### JavaScript

```
var tabs = $('#tabs a');
var content = $('.container');
var current = 0;

tabs.click( function(event) {
    // get which element was clicked
    var pos = tabs.index ($(event.target) );
    // remove current active class
    tabs.eq(current).removeClass('active');
    // fade out current element
    content.eq(current).fadeOut( function() {
        //afterwards set current to selected, update class and fade in content
        current = pos;
        tabs.eq(current).addClass('active');
        content.eq( current ).fadeIn();
        // append hash to url
        window.location.hash = tabs.eq(current).attr('href');
    });

    event.preventDefault();
});​ 
```

这是将锚点添加到 URL 的行：

```
window.location.hash = tabs.eq(current).attr('href'); 
```

请注意，这在小提琴中不起作用。或者你可以省略这一行并像我在上面的源代码中那样添加真实的 url。

我还优化了您的代码，以便使用更少的选择器并且它更短一些。它还`active`为当前元素使用单个类（而不是将一个类应用于所有`inactive`元素）。你只需要调整你的风格。

我还添加了一些 CSS，默认显示第一个元素并隐藏所有其他元素 - 不需要 JavaScript：

```
.container {
    display:none;
}

.container:first-child {
    display:block;
} 
```

### 小提琴

[http://jsfiddle.net/insertusernamehere/hCWMj/](http://jsfiddle.net/insertusernamehere/hCWMj/)

# ivy - 如何在没有 IVY 中提供的运行时库的情况下复制运行时库

> ID：11723865
> 
> 赞同：6
> 
> 时间：2012-07-30T14:46:42.670
> 
> 标签：ivy

我以为我不需要问这个，但我没有任何进展。

这个问题的解决方案： [常春藤如何将maven范围映射到常春藤配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy)实际上解决了问题，但在其理论部分。

我有这个配置：

```
<conf name="compile"  description="???" />
<conf name="runtime"  description="???" extends="compile" />
<conf name="test"     description="???" extends="runtime" />
<conf name="provided" description="???" /> 
```

假设我有这个依赖：

```
<dependency org="org.apache.tomcat" name="servlet-api" rev="6.0.16" transitive="false" /> 
```

我想要的是：当我在捆绑之前调用 ivy:retrieve 将库复制到 .war lib 目录时，我只想复制所有运行时（并隐式编译）但不复制 servlet-api。

那么如何使用 ivy:retrieve 呢？

```
<ivy:retrieve conf="WHAT_TO_PUT_HERE" /> 
```

以及如何配置依赖项：

```
<dependency conf="WHAT_IS_THE_CONF_MAPPING" org="org.apache.tomcat" name="servlet-api" rev="6.0.16" transitive="false" /> 
```

我在这里停滞不前，所以请任何帮助将不胜感激。

知道 servlet-api 的 ivy.xml 定义了工件

```
conf="master" 
```

所以我认为问题是如何“真正”将提供的maven范围映射到提供的IVY配置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T22:53:25.290

这是您将依赖项映射到本地“提供”配置的方式：

```
<dependency org="org.apache.tomcat" name="servlet-api" rev="6.0.16" conf="provided->master"/> 
```

配置映射的工作方式如下：

```
provided->master
   ^        ^
   |        |
 Local    Remote
 config   config 
```

正如答案中所解释的，特殊的“主”配置仅包含此模块本身发布的工件，没有传递依赖项：

*   [Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy)

这意味着不需要“transitive=false”属性。

# 更新

如何使用配置取决于您。第一个选项更简单，但我更喜欢第二种方法，因为我的配置报告与我的类路径内容匹配

## 选项1

您可以按如下方式创建单个类路径：

```
<ivy:cachepath pathid="compile.path" conf="compile,provided"/> 
```

然后可以在 javac 任务中使用它，如下所示：

```
<javac ... classpathref="compile.path">
.. 
```

## 选项 2

或者我更喜欢在配置和类路径之间进行一对二的映射：

```
<ivy:cachepath pathid="compile.path" conf="compile"/>
<ivy:cachepath pathid="provide.path" conf="provided"/> 
```

后一种方法的问题是 javac 任务需要明确说明类路径用法，如下所示：

```
<javac ...
   <classpath>
      <path refid="compile.path"/>
      <path refid="provided.path"/>
   </classpath> 
```

我认为这明确解释了您如何使用这个特殊提供的范围，但这完全取决于您。

# javascript - 打印插件phonegap

> ID：11723866
> 
> 赞同：1
> 
> 时间：2012-07-30T14:46:46.687
> 
> 标签：javascript, cordova, phonegap-plugins

嗨，我对 Print Plugin 或 Phonegap 插件的某些部分感到很困惑。看到我能够实现代码，甚至创建了我自己的插件，但我没有从 Objective-c (xcode) 返回值到 javascript，所以可以肯定地说它很容易理解。

在此代码上：

```
https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/PrintPlugin/PrintPlugin.js 
```

在这个代码块上：

```
PrintPlugin.prototype.callbackMap = {};
PrintPlugin.prototype.callbackIdx = 0;

PrintPlugin.prototype.print = function(printHTML, success, fail, options) {
if (typeof printHTML != 'string'){
    console.log("Print function requires an HTML string. Not an object");
    return;
}

//var printHTML = "";

var dialogLeftPos = 0;
var dialogTopPos = 0;

if (options){
    if (options.dialogOffset){
        if (options.dialogOffset.left){
            dialogLeftPos = options.dialogOffset.left;
            if (isNaN(dialogLeftPos)){
                dialogLeftPos = 0;
            }
        }
        if (options.dialogOffset.top){
            dialogTopPos = options.dialogOffset.top;
            if (isNaN(dialogTopPos)){
                dialogTopPos = 0;
            }
        }
    }
}

var key = 'print' + this.callbackIdx++;
window.plugins.printPlugin.callbackMap[key] = {
    success: function(result) {
        delete window.plugins.printPlugin.callbackMap[key];
        success(result);
    },
    fail: function(result) {
        delete window.plugins.printPlugin.callbackMap[key];
        fail(result);
    },
};

var callbackPrefix = 'window.plugins.printPlugin.callbackMap.' + key;
return PhoneGap.exec("PrintPlugin.print", printHTML, callbackPrefix + '.success',    callbackPrefix + '.fail', dialogLeftPos, dialogTopPos);
}; 
```

特别是这行代码：

```
PrintPlugin.prototype.callbackMap = {};
PrintPlugin.prototype.callbackIdx = 0; 
```

我对这两行代码的作用感到困惑，为什么当你想将值从 xcode 返回到 javascript 时合并或遵循为什么很重要（**注意：**我说*为什么在你想要的时候合并或遵循很重要将值从 xcode 返回到 javascript*我是根据我目前所了解的内容说的）

有人可以解释这两行代码是如何工作的以及它们的目的是什么吗？谢谢你。

# php - 我应该走多远才能最大限度地减少数据库查询？

> ID：11723868
> 
> 赞同：5
> 
> 时间：2012-07-30T14:46:59.463
> 
> 标签：php, mysql

这是我将从 MySQL 数据库中为当前项目的产品页面提取的数据的描述。

产品数据来自`product`表格，变量名称（颜色、尺寸等）来自名为 的表格`product_option_group`，这些变量（红色、绿色、蓝色或小、中、大等）的实际值在`product_option`表格中，与该产品相关的产品照片位于`product_photo`.

我可能可以使用`JOIN`-s 创建一个查询，在一个查询中返回所有这些（产品、变量、值、照片），然后我需要`foreach`竭尽全力才能发挥作用。我的问题是这是否有意义。我应该在多大程度上减少查询？

对于产品列表，我使用单个查询来获取少量产品数据和第一张产品照片的 URL。但是在显示单个产品的页面上，我有点不确定最佳方法。似乎我正在编写一个疯狂的长 MySQL 查询然后进行大量 PHP 解析的一种方式。另一种方式是我进行大量的数据库调用。

哪个最好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:52:16.297

我一直被教导（并与之合作）一个假设，即您应该只在需要时进行优化，而不是尝试优化不会导致问题的事物。

所以，在你的情况下，把你所拥有的东西放在磨坊里——给它加个负载，看看它是如何处理它的。如果速度很慢，请考虑是否要尝试合并到一个查询中，或者添加一个或两个索引，或者您可能会采取哪些措施来加快速度。问问自己是否是数据库返回缓慢，或者两者之间的来回流量是否是问题，或者 PHP 处理它的速度是否对您来说不够快。

把时间花在需要的地方，记住要保持简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:50:14.377

最好的做法是尽量减少每次页面加载的查询数。

但是，数据库服务器擅长处理许多小查询。许多 CMS*每页加载有**数百个*查询。

 *因此，请始终尝试优化，但不要为此而疯狂。*

# mysql - 带有 LEFT JOIN 和 IF 语句的有限 GROUP_CONCAT

> ID：11723871
> 
> 赞同：0
> 
> 时间：2012-07-30T14:47:13.173
> 
> 标签：mysql, left-join, substring, group-concat, csv

我在 MySQL 中有 3 个表

`fruit`

```
id| fruit
--+-------
1 | apple
2 | banana
3 | mango
4 | plum
5 | pear
6 | cherry 
```

`list`

```
id| name
--+------------
1 | first list
2 | second list 
```

`list_content`

```
id| list_id | fruit_id | active
--+---------+----------+-------
1 |1        |1         |1
2 |1        |2         |1
3 |1        |3         |1
4 |2        |1         |0
5 |2        |6         |1
6 |2        |5         |1
7 |2        |4         |1
8 |2        |3         |1 
```

因此，我需要一个按`id`降序排列的列表，其中最多 3 个逗号分隔的活动元素（如果`active`= 1）按`fruit.name`升序排列。像这样

```
lists  | fruits
-------+------------------
list 2 | cherry, mango, pear
list 1 | apple, banana, mango 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:11:43.950

您可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)仅获取前 3 个水果。

```
SUBSTRING_INDEX(GROUP_CONCAT(IF(active = 1, fruit.name, null) ORDER BY fruit.name ASC),',',3) 
```

# https - 使用 HTTPS 的 Restlet（缺少 JAR）

> ID：11723876
> 
> 赞同：1
> 
> 时间：2012-07-30T14:47:39.883
> 
> 标签：https, jetty, restlet, simplehttpserver

我目前正在尝试通过 HTTPS 协议运行我的服务器，但我无法确定缺少哪个 .JAR 文件（包含的 .JAR 如下所列）：

包restlethttps；

```
 import org.restlet.Component;
   import org.restlet.Server;
   import org.restlet.data.Parameter;
   import org.restlet.data.Protocol;
   import org.restlet.util.Series;

   public class RestletHTTPS { 
    public static void main(String[] args) throws Exception {
        // Create a new Component.
        Component component = new Component();

        // Add a new HTTPS server listening on port 8183       
        Server server = component.getServers().add(Protocol.HTTPS, 8082);
        Series<Parameter> parameters = server.getContext().getParameters();

        //parameters.add("sslContextFactory", "org.rest.ext.ssl.PkixSslContextFactory");
        parameters.add("keystorePath", "path...\\serverX.jks");
        parameters.add("keystorePassword", <password>);
        parameters.add("keyPassword", <password>);
        //parameters.add("keystoreType", "JKS");

        // Attach the sample application.
        component.getDefaultHost().attach("/get", new RestletHTTPSApplication());

        // Start the component.
        component.start();
    }
} 
```

-JAR 包括：

*   org.restlet.jar
*   org.restlet.ext.ssl.jar
*   com.noelios.restlet.ext.simple_3.1.jar
*   com.noelios.restlet.ext.ssl.jar
*   org.restlet-2.0.0.jar
*   org.simpleframework-3.1.3.jar
*   org.simpleframework.jar
*   jsslutils-0.5.jar
*   org.restlet.ext.jetty.jar

# javascript - 如何将数组列表转换为json对象列表

> ID：11723877
> 
> 赞同：2
> 
> 时间：2012-07-30T14:47:41.007
> 
> 标签：javascript, json

我喜欢像这样将数组转换为 json 对象

```
var obj = [{item:'name1',start:new date()}, {item:'name2',start:new date()},{item:'name3',start:new date()}] 
```

我正在使用一维数组意味着工作正常。检查此链接[http://jsfiddle.net/H4ezf/1/](http://jsfiddle.net/H4ezf/1/)

```
 var objectArray= {};    
 objectArray['title']='All Day Event';
 objectArray['start']=new Date(y, m, 1);
 console.log(JSON.stringify(objectArray)); 
```

输出为：`{"title":"All Day Event","start":"2012-06-30T18:30:00.000Z"}`

但我尝试使用 json stringify 像这样将数组列表转换为列表 json 对象

```
var objectArray= {};    
objectArray[0]['title']='name1';
objectArray[0]['start']=new Date();
objectArray[1]['title']='name2';
objectArray[1]['start']=new Date();
console.log(JSON.stringify(objectArray)); 
```

它不工作。我在这里错了。请任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:51:10.743

你不可以做这个：

```
var objectArray= {};    
objectArray[0]['title']='name1'; 
```

因为`objectArray[0]`还不存在。该索引处没有数组，因此您不能在索引处添加字符串。你必须先声明数组。您的其余代码工作得很好。

[JSFIDDLE](http://jsfiddle.net/HpLZp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:52:58.943

```
var objectArray= [];
objectArray[0] = {}
objectArray[0]['title']='name1';
objectArray[0]['start']=new Date();
objectArray[1] = {}
objectArray[1]['title']='name2';
objectArray[1]['start']=new Date();
console.log(JSON.stringify(objectArray));​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:52:13.913

试试这样：

```
var objectArray = [];
objectArray[0] = {};
objectArray[0]['title'] = 'name1';
objectArray[0]['start'] = new Date(); 
```

# iis - 在 IIS7.5 中如何查看用户模式缓存中的文件？

> ID：11723878
> 
> 赞同：5
> 
> 时间：2012-07-30T14:47:47.157
> 
> 标签：iis, caching, isapi, http.sys

内核模式静态内容缓存是 HTTP.SYS 的一部分，配置起来相当简单。调试时，您始终可以使用以下命令检查内核模式缓存的内容：

```
netsh http show cachestate 
```

但是 IIS 中的用户模式缓存更难调试。似乎根本没有检查的可能。有没有一种简单的方法可以查看 Web 应用程序工作进程内的用户模式缓存中有哪些文件？

在我们的项目中，我们有一个 ISAPI 模块，它在将请求的文件返回给浏览器之前对其进行自省。因此，我们不能在 IIS 中使用标准的静态内容缓存。我们遇到了缓存问题，即 IIS 在短暂的预热期后停止将新项目添加到缓存中。项目被刷新，但似乎没有新文件被缓存。根据 perfmon，缓存中的项目数下降到少数。能够在任何给定时间准确查看缓存中的文件对我们来说非常有价值。

# c# - 在列表或字典之间进行选择

> ID：11723879
> 
> 赞同：6
> 
> 时间：2012-07-30T14:47:48.123
> 
> 标签：c#, collections

我的 .NET 应用程序适用于用户集合。用户对象包含用户名、全名、域......

我想知道我应该更喜欢哪种类型的集合来存储用户，介于 1) 列表或 2) 字典之间，其中字典键是用户名。

我知道字典选项在必须从用户名中检索用户时最快，但由于用户名被引用两次，可能会出现一致性错误。（作为字典键和用户属性）？您能否从设计的角度解释一下有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:53:26.057

如果您通常通过 UserName 寻找用户，那么一定要使用 Dictionary。使用列表，您必须“寻找”正确的方式！至于一致性，我将实现一个 Manager 类，它是唯一允许操作字典的类，从而强制一致性。在许多会员引擎中，用户名无法更改。这对您的解决方案有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:54:40.067

从设计的角度来看，最好的方法是创建一个自定义类 UserCollection 并隐藏实际的存储细节。这使您能够从 List 更改为 Dictionary 而不会影响其他代码。假设它是一个额外的抽象层。

List 和 Dictionary 之间的区别是概念性的。简单规则 - 如果项目是唯一的并且您需要 O(c) 搜索复杂度，则使用字典，否则使用列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:57:11.140

这取决于要求，我认为对于较小的列表，性能差异可以忽略不计，考虑到一致性，使用 List 应该是首选方法，您可以进行类似的查询。

```
var user = Users.SingleOrDefault(user => user.username == 'username') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:11:51.400

我更喜欢对象列表，尤其是当数据存储在数据库中时。能够查询数据源并返回列表非常有帮助。当数据被顺序访问时，例如使用数据网格，它也是优选的。

我希望这有帮助。

# android - Android：以编程方式设置视图样式

> ID：11723881
> 
> 赞同：265
> 
> 时间：2012-07-30T14:47:50.637
> 
> 标签：android, android-layout

这是 XML：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/LightStyle"
    android:layout_width="fill_parent"
    android:layout_height="55dip"
    android:clickable="true"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" />

</RelativeLayout> 
```

如何以`style`编程方式设置属性？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2014-01-10T11:38:10.523

从技术上讲，您可以通过自定义视图以编程方式应用样式：

```
private MyRelativeLayout extends RelativeLayout {
  public MyRelativeLayout(Context context) {
     super(context, null, R.style.LightStyle);
  }
} 
```

单参数构造函数是在以编程方式实例化视图时使用的构造函数。

因此，将此构造函数链接到采用样式参数的 super。

```
RelativeLayout someLayout = new MyRelativeLayout(new ContextThemeWrapper(this,R.style.RadioButton)); 
```

* * *

或者正如@Dori 简单指出的那样：

```
RelativeLayout someLayout = new RelativeLayout(new ContextThemeWrapper(activity,R.style.LightStyle)); 
```

* * *

现在在 Kotlin 中：

```
class MyRelativeLayout @JvmOverloads constructor(
    context: Context, 
    attributeSet: AttributeSet? = null, 
    defStyleAttr: Int = R.style.LightStyle,
) : RelativeLayout(context, attributeSet, defStyleAttr) 
```

或者

```
 val rl = RelativeLayout(ContextThemeWrapper(activity, R.style.LightStyle)) 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2015-02-19T17:35:08.303

什么对我有用：

```
Button b = new Button(new ContextThemeWrapper(this, R.style.ButtonText), null, 0); 
```

*   使用 ContextThemeWrapper

和

*   使用 3-arguments 构造函数（没有这个将无法工作）

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2012-07-30T14:54:31.710

**更新**：在回答这个问题时（2012 年年中，API 级别 14-15），以编程方式设置视图不是一种选择（即使有一些重要的解决方法），而在更新的 API 之后，这已经成为可能发布。有关详细信息，请参阅@Blundell 的答案。

**老答案：**

您**还不能**以编程方式设置视图的样式，但您可能会发现[此线程](https://stackoverflow.com/questions/3142067/android-set-style-in-code)很有用。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-06-10T16:10:59.577

对于新的 Button/TextView：

```
Button mMyButton = new Button(new ContextThemeWrapper(this, R.style.button_disabled), null, 0); 
```

对于现有实例：

```
mMyButton.setTextAppearance(this, R.style.button_enabled); 
```

对于图像或布局：

```
Image mMyImage = new ImageView(new ContextThemeWrapper(context, R.style.article_image), null, 0); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-11-28T15:18:18.973

这是一个很老的问题，但现在对我有用的解决方案是使用构造函数的第 4 个参数`defStyleRes`- 如果可用.. 在视图中......设置样式

以下适用于我的目的（kotlin）：

```
val textView = TextView(context, null, 0, R.style.Headline1) 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-04-16T03:59:08.097

如果您想继续使用 XML（接受的答案不允许您这样做）并在创建视图后设置样式，您可以使用支持所有可用属性子集的 Paris 库。

由于您要从 XML 扩展视图，因此您需要在布局中指定一个 id：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_styleable_relative_layout"
    style="@style/LightStyle"
    ... 
```

然后，当您需要以编程方式更改样式时，在布局膨胀后：

```
// Any way to get the view instance will do
RelativeLayout myView = findViewById(R.id.my_styleable_relative_layout);

// This will apply all the supported attribute values of the style
Paris.style(myView).apply(R.style.LightStyle); 
```

更多信息：[支持的视图类型和属性列表](https://github.com/airbnb/paris/wiki/Supported-View-Types-and-Attributes)（包括背景、填充、边距等，并且可以轻松扩展）以及[带有附加文档的安装说明](https://github.com/airbnb/paris/blob/master/README.md#installation)。

免责声明：我是该库的原作者。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-10-28T10:00:23.737

您可以通过执行以下操作将样式应用于您的活动：

```
super.setTheme( R.style.MyAppTheme ); 
```

或安卓默认：

```
super.setTheme( android.R.style.Theme ); 
```

在您的活动中，之前`setContentView()`。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-12-22T10:49:15.073

提供的答案都不正确。

您可以以编程方式设置样式。

简短的回答是看看[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/content/Context.java#435](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/content/Context.java#435)

长答案。这是我以编程方式为您的视图设置自定义样式的代码段：

1) 在您的 styles.xml 文件中创建一个样式

```
 <style name="MyStyle">
    <item name="customTextColor">#39445B</item>
    <item name="customDividerColor">#8D5AA8</item>
</style> 
```

不要忘记在 attrs.xml 文件中定义您的自定义属性

我的 attrsl.xml 文件：

```
<declare-styleable name="CustomWidget">
    <attr name="customTextColor" format="color" />
    <attr name="customDividerColor" format="color" />
</declare-styleable> 
```

请注意，您可以为您的样式使用任何名称（我的 CustomWidget）

现在让我们以编程方式将样式设置为小部件这是我的简单小部件：

```
public class StyleableWidget extends LinearLayout {

private final StyleLoader styleLoader = new StyleLoader();

private TextView textView;
private View divider;

public StyleableWidget(Context context) {
    super(context);
    init();
}

private void init() {
    inflate(getContext(), R.layout.widget_styleable, this);
    textView = (TextView) findViewById(R.id.text_view);
    divider = findViewById(R.id.divider);
    setOrientation(VERTICAL);
}

protected void apply(StyleLoader.StyleAttrs styleAttrs) {
    textView.setTextColor(styleAttrs.textColor);
    divider.setBackgroundColor(styleAttrs.dividerColor);
}

public void setStyle(@StyleRes int style) {
    apply(styleLoader.load(getContext(), style));
}
} 
```

布局：

```
<TextView
    android:id="@+id/text_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="22sp"
    android:layout_gravity="center"
    android:text="@string/styleble_title" />

<View
    android:id="@+id/divider"
    android:layout_width="match_parent"
    android:layout_height="1dp"/>

</merge> 
```

最后是 StyleLoader 类的实现

```
public class StyleLoader {

public StyleLoader() {

}

public static class StyleAttrs {
    public int textColor;
    public int dividerColor;
}

public StyleAttrs load(Context context, @StyleRes int styleResId) {
    final TypedArray styledAttributes = context.obtainStyledAttributes(styleResId, R.styleable.CustomWidget);
    return load(styledAttributes);
}

@NonNull
private StyleAttrs load(TypedArray styledAttributes) {
    StyleAttrs styleAttrs = new StyleAttrs();
    try {
        styleAttrs.textColor = styledAttributes.getColor(R.styleable.CustomWidget_customTextColor, 0);
        styleAttrs.dividerColor = styledAttributes.getColor(R.styleable.CustomWidget_customDividerColor, 0);
    } finally {
        styledAttributes.recycle();
    }
    return styleAttrs;
}
} 
```

[您可以在https://github.com/Defuera/SetStylableProgramatically](https://github.com/Defuera/SetStylableProgramatically)找到完整的工作示例

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-06-05T01:31:18.523

这是我的简单例子，关键是`ContextThemeWrapper`包装器，没有它，我的样式不起作用，并且使用View的三参数构造函数。

```
ContextThemeWrapper themeContext = new ContextThemeWrapper(this, R.style.DefaultLabelStyle);
TextView tv = new TextView(themeContext, null, 0);
tv.setText("blah blah ...");
layout.addView(tv); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-01-08T06:16:14.237

简单的方法是通过构造函数

```
RadioButton radioButton = new RadioButton(this,null,R.style.radiobutton_material_quiz); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-11-13T18:47:11.717

我不建议使用 ContextThemeWrapper 这样做：

> 指定的主题将应用在基本上下文的主题之上。

什么会在您的应用程序中产生不需要的结果。相反，我向 Airbnb 的工程师提出了新的图书馆“巴黎”：

[https://github.com/airbnb/paris](https://github.com/airbnb/paris)

> 以编程方式定义和应用样式到 Android 视图。

但是在使用了一段时间后，我发现它实际上非常有限，我停止使用它，因为它不支持很多我需要开箱即用的属性，所以必须像往常一样检查并决定。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-10T14:53:25.793

我发现使用带有自定义布局的 alertDialog 的最佳简单解决方案是：

```
val mView = LayoutInflater.from(context).inflate(layoutResId, null)

val dialog = AlertDialog.Builder(context, R.style.CustomAlertDialog)
    .setView(mView)
    .setCancelable(false)
    .create() 
```

风格在哪里

```
<style name="CustomAlertDialog" parent="Theme.AppCompat.Light.Dialog.Alert">
    <item name="android:background">@drawable/bg_dialog_white_rounded</item>
</style> 
```

和 bg_dialog_white_rounded.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <corners android:radius="16dp" />

    <solid android:color="@Color/white" />
</shape> 
```

layoutResId 是必须将主题设置为“@style/CustomAlertDialog”的任何布局的资源 ID，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginStart="@dimen/wdd_margin_medium"
    android:theme="@style/CustomAlertDialog"
    android:layout_marginEnd="@dimen/wdd_margin_medium">

..... etc...
</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-16T14:50:50.950

```
int buttonStyle = R.style.your_button_style;
Button button = new Button(new ContextThemeWrapper(context, buttonStyle), null, buttonStyle); 
```

只有这个答案对我有用。见[https://stackoverflow.com/a/24438579/5093308](https://stackoverflow.com/a/24438579/5093308)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-09-08T11:27:58.023

我在复合 ViewGroup 中使用 XML 中定义的视图，将它们膨胀添加到 Viewgroup。这样我就不能动态更改样式，但可以进行一些样式自定义。我的复合：

```
public class CalendarView extends LinearLayout {

private GridView mCalendarGrid;
private LinearLayout mActiveCalendars;

private CalendarAdapter calendarAdapter;

public CalendarView(Context context) {
    super(context);

}

public CalendarView(Context context, AttributeSet attrs) {
    super(context, attrs);

}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    init();
}

private void init() {
    mCalendarGrid = (GridView) findViewById(R.id.calendarContents);
    mCalendarGrid.setNumColumns(CalendarAdapter.NUM_COLS);

    calendarAdapter = new CalendarAdapter(getContext());
    mCalendarGrid.setAdapter(calendarAdapter);
    mActiveCalendars = (LinearLayout) findViewById(R.id.calendarFooter);
} 
```

}

和我在xml中的视图，我可以在其中分配样式：

```
<com.mfitbs.android.calendar.CalendarView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/calendar"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:orientation="vertical"
>

<GridView
    android:id="@+id/calendarContents"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:id="@+id/calendarFooter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    /> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-12-14T18:08:14.717

如果在自己的自定义视图中： val editText = TextInputEditText(context, attrs, defStyleAttr)

* * *

## 回答 #16

> 赞同：-6
> 
> 时间：2012-07-30T14:58:55.680

您可以创建包含所需样式的布局的 xml，然后更改视图的背景资源，如下[所示](http://mitzen.blogspot.pt/2011/10/android-programmatically-apply-style-to.html)。

# google-app-engine - 形成类 jinja2

> ID：11723883
> 
> 赞同：0
> 
> 时间：2012-07-30T14:47:56.157
> 
> 标签：google-app-engine, wtforms

我将 WTForm 与 Google App Engine 一起使用。我想以班级的形式访问我的表格。

这适用于 djangoforms...

```
class PostForm(djangoforms.ModelForm):
  class Meta:
    model = BlogPost
    exclude = [ 'path', 'published', 'updated' ] 
```

如何使用 WTforms 进行等效操作。

```
class PostForm(model_form):
  class Meta:
    model = BlogPost
    exclude = [ 'path', 'published', 'updated' ] 
```

我通过回溯得到这个错误......

```
 Traceback (most recent call last):
  File "C:\Users\John\webdev\gae\google\appengine\runtime\wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Users\John\webdev\gae\google\appengine\runtime\wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "C:\Users\John\webdev\gae\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Users\John\webdev\gae\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Users\John\webdev\gae\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Users\John\webdev\gae\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Users\John\webdev\gae\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Users\John\webdev\gae\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\John\webdev\gae-projects\cmwo-blog\admin.py", line 69, in <module>
    class PostForm(model_form):
TypeError: Error when calling the metaclass bases
    function() argument 1 must be code, not str
INFO     2012-07-30 14:40:31,700 dev_appserver.py:2952] "GET /admin/newpost HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:05:14.467

WTForms 的 model_form 不处理任何 Meta 内部类。也许您可以覆盖`'__init__'`PostForm 类的方法。

# javascript - 在 2 个 div 之间同步滚动

> ID：11723886
> 
> 赞同：2
> 
> 时间：2012-07-30T14:48:10.490
> 
> 标签：javascript, jquery

我看到这篇文章并试图复制它，但它不起作用 - [同步滚动](https://stackoverflow.com/questions/9236314/how-do-i-synchronize-the-scroll-position-of-two-divs)

我有一个带有 2 个选项卡的 TabContainer，这些选项卡具有 div、bmrDetailDataDiv 和 residentDetailDataDiv。

这是我的 javscript 代码 -

```
window.onload = function () {
  var bmrDetailDiv = $("div[id$='_bmrDetailDataDiv']")[0];
  var residentDetailDiv = $("div[id$='_residentDetailDataDiv']")[0];

  if ((bmrDetailDiv) && (residentDetailDiv)) {
      bmrDetailDiv.on('scroll', function () {
          residentDetailDiv.scrollTop(bmrDetailDiv.scrollTop());
      });

      residentDetailDiv.on('scroll', function () {
          bmrDetailDiv.scrollTop(residentDetailDiv.scrollTop());
      });
} 
```

我错过了什么吗？

编辑 -

试过这个并得到一个错误 -

```
$(document).ready(function () {
   var bmrDetailDiv = $("div[id$='_bmrDetailDataDiv']");
  var residentDetailDiv = $("div[id$='_residentDetailDataDiv']");
  if (bmrDetailDiv.length && residentDetailDiv.length) {
      bmrDetailDiv.on('scroll', function () {
          residentDetailDiv.scrollTop($(this).scrollTop()); 
      });
      residentDetailDiv.on('scroll', function () {
          bmrDetailDiv.scrollTop($(this).scrollTop());
      });
  } 
}); 
```

编辑＃2 -

试过这个，仍然得到 JScript 错误。这一切都在我的 .js 文件中，该文件包含在页面顶部。-

```
jQuery.fn.exists = function () { return this.length > 0; }

$(function () {
    var combined = $("div[id$='_bmrDetailDataDiv']").add($("div[id$='_residentDetailDataDiv']"));

    if (combined.exists()) {
        //Getting error on below line
        combined.on("scroll", function () {
          combined.scrollTop($(this).scrollTop());
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:51:45.387

始终检查控制台 - 这将导致错误，因为您试图在本机元素上使用 jQuery 方法（因为您通过 检索它们`[0]`）。如果您只是为了`if`条件而这样做，则无需 - 检查选择器找到的元素，您只需查询`length`属性即可。

```
$(function() {
    var bmrDetailDiv = $("div[id$='_bmrDetailDataDiv']");
    var residentDetailDiv = $("div[id$='_residentDetailDataDiv']");

    if (bmrDetailDiv.length && residentDetailDiv.length) {

        bmrDetailDiv.on('scroll', function () {
            residentDetailDiv.scrollTop($(this).scrollTop());
        });
        residentDetailDiv.on('scroll', function () {
            bmrDetailDiv.scrollTop($(this).scrollTop());
        });

    }
}); 
```

其他变化：

1）文档就绪处理程序而不是`window.onload`

2) 使用`$(this)`内部事件回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:03:58.583

做你需要的一个简短的方法：

**现场演示：http:** [//jsfiddle.net/oscarj24/gqHyW/1/](http://jsfiddle.net/oscarj24/gqHyW/1/)

```
jQuery.fn.exists = function(){return this.length>0;}

$(function() {
    var combined = $("div[id$='_bmrDetailDataDiv']").add($("div[id$='_residentDetailDataDiv']"));

    if (combined.exists()) {
        combined.on("scroll", function () {
            combined.scrollTop($(this).scrollTop());
        });
    }
});​ 
```

* * *

## **完整代码**

将其保存为**index.htm** :-)

```
<html>
<head>
<title>Synchronizing scrolling between 2 divs</title>
</head>
<style>
  div {
    position : absolute;
    top      : 0;
    width    : 50%;
    height   : 300px;
  }
  .top {
    overflow : hidden;
    left     : 0;
  }
  .bottom {
    left     : 50%;
    overflow : scroll;
  }​
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script>
jQuery.fn.exists = function(){return this.length>0;}

$(function() {
    var combined = $("div[id$='_bmrDetailDataDiv']").add($("div[id$='_residentDetailDataDiv']"));

    if (combined.exists()) {
        combined.on("scroll", function () {
            combined.scrollTop($(this).scrollTop());
        });
    }
});​
</script>
<body>
  <div id="1_bmrDetailDataDiv" class="top">
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>10th P Tag</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>20th P Tag</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>30th P Tag</p>
  </div>
  <div id="2_residentDetailDataDiv" class="bottom">
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>10th P Tag</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>20th P Tag</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>Content Here</p>
    <p>30th P Tag</p>
  </div>​
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T21:19:59.040

syncscroll库可能会使下一个需要此功能的人的工作更轻松**......**

*   [https://github.com/asvd/syncscroll](https://github.com/asvd/syncscroll)

    $ bower 安装同步滚动

    ```
    <script src="path/to/syncscroll.js"></script>```

    <div class=syncscroll name=myElements>
      First big text goes here...
    </div>

    <div class=syncscroll name=myElements>
      Second big text goes there...
    </div> 
    ```

现在元素将同时滚动。请记住，滚动是按比例同步的，而不是按像素数量同步的。

如果您通过更改类或属性来更新一组同步元素，请调用`syncscroll.reset()`以更新侦听器。

# ruby-on-rails - Apache Proxy 和 Alias 相结合

> ID：11723888
> 
> 赞同：0
> 
> 时间：2012-07-30T14:48:18.503
> 
> 标签：ruby-on-rails, apache, passenger

我设置了一个网络服务器（Debian、Apache、MySQL），我仍然使用安装时的默认配置。我还安装了 phpMyAdmin，它使用别名链接到 example.com/phpmyadmin。现在我的问题是：我想设置一个带有 Phusion Passenger（独立）的 Rails 应用程序，我想在 example.com/railsapp 上访问它。因此，我需要告诉 Apache 将对该地址的所有请求代理到 localhost:3000（Passenger 提供 rails 应用程序的地方）。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:52:43.097

将此添加到您的虚拟主机配置中：

```
ProxyPassMatch /railsapp(.*) http://localhost:3000/$1
ProxyPassReverse /railsapp http://localhost:3000 
```

# path - Lion 升级后，我得到“psql：无法连接到服务器：权限被拒绝。编辑 /etc/paths 是正确的解决方案吗？

> ID：11723897
> 
> 赞同：1
> 
> 时间：2012-07-30T14:48:44.160
> 
> 标签：path, osx-lion

我最近升级到 OSX Lion 并且在使用 PostgreSQL 时遇到了这个烦人的问题（错误？）。

```
psql: could not connect to server: Permission denied
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我通过更改路径文件的顺序`/etc/paths`并编辑它找到了一个简单的解决方案：

```
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin 
```

成为：

```
/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin 
```

有人告诉我，我不应该编辑实际`/etc/paths`文件。为什么会这样？是什么导致了这个错误？绕过它的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:58:24.497

Lion 带有自己的 PostgreSQL`/usr`安装（安装在`/usr/local`.

由于您的`$PATH`设置，当您执行时`psql`会启动 OS X 版本 ( `/usr/bin/psql`)，默认情况下它不会运行。当您想使用自己的版本时，您需要改为执行`/usr/local/bin/psql`。

现在进行更改`/etc/paths`：有更好的选择`psql`开始的方法。要么你自己设置`$PATH`：

```
# add this to $HOME/.bash_profile
export PATH=/usr/local/bin:$PATH 
```

或者您可以创建一个别名，`psql`该别名将指向以下版本`/usr/local`：

```
# add this to $HOME/.bashrc
alias psql=/usr/local/bin/psql 
```

# c# - 在 C# 中将数据访问策略从 SQL Server 替换为访问 MDB 文件

> ID：11723904
> 
> 赞同：0
> 
> 时间：2012-07-30T14:49:18.447
> 
> 标签：c#, sql-server, ms-access

不久前我创建了一个小型会计应用程序。它使用 SQL Server 2008 作为后端数据存储。现在我意识到 SQL Server 对于这样的

小程序加上它不是很便携。我的意思是我想把这个应用程序放在我的 U 盘上，以便在任何地方轻松访问，而 SQL Server 不会

随处可用。所以现在我想将数据存储从 SQL Server 替换为可移植的东西，即 MS Access MDB 文件。

1-这是一个不错的选择还是我应该使用 SQL Server 速成版？2- 我没有使用 SQL Express 版本的经验。如果我使用它，在我打算运行我的应用程序的任何机器上都需要它吗？2- 我应该对代码进行哪些更改以使其与 MDF 文件（或 SQL Express）兼容？

正如我所说，这是一个非常简单的程序，它使用连接模型来获取和插入数据。例如

```
void bindGrid()
        {
            try
            {
                using (SqlConnection con = new SqlConnection(ConnectionString))
                {
                    DataSet set = new DataSet();
                    SqlDataAdapter da = new SqlDataAdapter();
                    SqlCommand selectCommand = new SqlCommand("SELECT * FROM Categories ORDER BY name", con);
                    da.SelectCommand = selectCommand;
                    da.Fill(set);
                    this.grdCategories.DataSource = set.Tables[0];
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:52:32.810

我不会使用 Access，而是使用 LocalDB。如果对连接字符串以外的代码进行任何更改，它应该只需要很少的更改。

[http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)

> LocalDB 是专门为开发人员创建的。它非常易于安装且无需管理，但它提供与常规 SQL Server Express 相同的 T-SQL 语言、编程表面和客户端提供程序。实际上，以 SQL Server 为目标的开发人员不再需要在他们的笔记本电脑和其他开发机器上安装和管理 SQL Server Express 的完整实例。此外，如果 LocalDB 的简单性（和局限性）符合目标应用程序环境的需求，开发人员可以继续在生产中使用它，因为 LocalDB 也是一个非常好的嵌入式数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:55:19.803

我会为小型项目推荐[SQL CE](http://en.wikipedia.org/wiki/SQL_Server_Compact)。

> LocalDB 与 SQL Server Compact
> 
> LocalDB 和 SQL Server Compact 之间存在显着差异：
> 执行模式：SQL Server Compact 是一个进程内 DLL，而 LocalDB 作为一个单独的进程运行。
> 磁盘使用量：所有 SQL Server Compact 二进制文件大约需要 4MB，而 LocalDB 安装需要 140MB。
> 特性：SQL Server Compact 提供查询等核心 RDBMS 功能，而 LocalDB 提供更丰富的特性集，包括存储过程、几何和地理数据类型等。

# bash - 下载并自动安装 tgz 文件

> ID：11723907
> 
> 赞同：3
> 
> 时间：2012-07-30T14:49:25.523
> 
> 标签：bash

```
#!/bin/bash

mkdir /tmp
curl -O http://www.mucommander.com/download/nightly/mucommander-current.app.tar.gz /tmp/mucommander.tgz
tar -xvzf /tmp/mucommander.tgz */mucommander.app/*
cp -r /tmp/mucommander.app /Applications
rm -r /tmp 
```

我正在尝试创建一个 shell 脚本来下载 muCommander 并将其提取到我在 Mac 上的应用程序目录中。

我尝试 cd 进入 tmp 目录，但是当我这样做时脚本停止了。我可以使用 -C 参数提取所有内容，但是当前的 tgz 路径是 muCommander-0_9_0/mucommander.app，它可能会在以后的构建中发生变化，所以我试图保持它的通用性。

谁能给我指点我哪里出错了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:09:44.803

以下将更新您的 muCommander。

```
#for the safety, remove old temporary extraction from the /tmp
rm -rf /tmp/muCommander.app

#kill the running mucommander - you dont want replace the runnung app
ps -ef | grep ' /Applications/muCommander.app/' | grep -v grep | awk '{print $2}' | xargs kill

#download, extract, remove old, move new, open
#each command run only when the previous ended with success
curl http://www.mucommander.com/download/nightly/mucommander-current.app.tar.gz  |\
 tar -xzf - -C /tmp --strip-components=1 '*/muCommander.app' && \
 rm -rf /Applications/muCommander.app && \
 mv /tmp/muCommander.app /Applications && \
 open /Applications/muCommander.app 
```

*请注意，在“\”之后必须跟随新行，而不是任何空格......*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:02:10.423

从 tar(1) 解压缩存档时，剥离第一个路径组件：

```
 --strip-components count
         (x mode only) Remove the specified number of leading path ele-
         ments.  Pathnames with fewer elements will be silently skipped.
         Note that the pathname is edited after checking inclusion/exclu-
         sion patterns but before security checks. 
```

### 更新

这是一个工作`bash`示例，说明如何相当一般地将`tgz`文件的内容复制到`/Applications`.

```
shopt -s nocaseglob

TMPDIR=/tmp
APP=mucommander
TMPAPPDIR=$TMPDIR/$APP

mkdir -p $TMPAPPDIR

curl -o $TMPDIR/$APP.tgz http://www.mucommander.com/download/nightly/mucommander-current.app.tar.gz
tar --strip-components=1 -xvzf $APP.tgz -C $TMPAPPDIR
mv $TMPAPPDIR/${APP}* /Applications
# rm -rf $TMPAPPDIR $TMPDIR/$APP 
```

该`rm`命令暂时被注释掉，在使用之前验证它是否无害。

# java - 在 Eclipse RCP 中的某个角度设置键绑定

> ID：11723913
> 
> 赞同：1
> 
> 时间：2012-07-30T14:50:02.517
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我已经覆盖了 eclipse RCP 的搜索键绑定，现在它适用于所有透视图（我已经创建的透视图、调试等）我希望我的 OWN 搜索仅适用于我的透视图并拥有所有其他视角的 ECLIPSE 默认搜索。任何人都可以帮助我吗？

# php - 如何使用未知的关联名称访问 PHP 关联数组

> ID：11723918
> 
> 赞同：1
> 
> 时间：2012-07-30T14:50:32.230
> 
> 标签：php, arrays, associative

我的 PHP 数组（例如，Print_r 转储）

```
Array
(
    [0] => Array
        (
            [Nick] => Bobby
            [FullName] => Bob Smith
        )

    [1] => Array
        (
            [Nick] => Mikey
            [FullName] => Mike Smithers
        )

) 
```

如果我不知道值“Nick”或“FullName”如何访问它们中的值。

该数组将有两个值，如果我不知道它的名称，我希望了解如何访问它们。

我希望它打印出来（例如）

试图达到的输出示例：“值一是 Bobbie，值二是 Bob Smith”

但我不知道 [Nick] 或 [FullName] 如何访问“Bobbie”或“Bob Smith”（传入数组）

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:51:41.843

```
foreach ($my_arr as $key => $value) {
    list( $value_one, $value_two) = $value;
    echo "Value one is $value_one value two is $value_two\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:53:12.080

如果您只想获取值，可以执行以下操作：

```
$values = array_values($my_arr);

$values[0]; // the first value
$values[1]; // the second value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T14:59:24.500

```
foreach($list as $array) { 
    foreach($array as $key => $value) {
        echo "The value of {$key} is: {$value}";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:05:35.587

这是句柄的两个示例....

```
 <?php 
     $array = array(array("Bobbie"=>"Bobb",
                          "BobS"=>"BobbS"),
                    array("Foo"=>"Bar",
                          "Hello"=>"World")
              );

        // Method No.1
        foreach($array as $arr) {
           foreach($arr as $key=>$val) {
             echo $key."\n";
           }
        }
        // Method No.2
        // you can use the function array_keys() to get the key-names
        foreach($array as $arr) {

        $keys = array_keys($arr);
        echo "<h1>Keys:</h1><pre>".print_r($keys,1)."</pre>";
     }
 ?> 
```

# android - 登录服务器时未登录服务器

> ID：11723919
> 
> 赞同：0
> 
> 时间：2012-07-30T14:50:39.963
> 
> 标签：android, xmpp, ejabberd, asmack

我正在尝试在 asmack 库的帮助下使用 android 中的 BOSH Manager 与 ejabber 连接。

但我收到以下错误。

```
Caused by: java.lang.IllegalStateException: Not logged in to server.
    at org.jivesoftware.smack.Roster.reload(Roster.java:197)
    at org.jivesoftware.smack.BOSHConnection.login(BOSHConnection.java:351)
    at org.jivesoftware.smack.Connection.login(Connection.java:353)
    at com.bcl.BoradCastLocationActivity$StartXMPPConnection.doInBackground(BoradCastLocationActivity.java:75)
    at com.bcl.BoradCastLocationActivity$StartXMPPConnection.doInBackground(BoradCastLocationActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    ... 4 more 
```

这是我的代码

```
SASLAuthentication.registerSASLMechanism("DIGEST-MD5",SASLDigestMD5Mechanism.class);
SASLAuthentication.supportSASLMechanism("DIGEST-MD5", 1);

System.setProperty("smack.debugEnabled", "true");
XMPPConnection.DEBUG_ENABLED = true;
SmackConfiguration.setPacketReplyTimeout(6000);
BOSHConfiguration bconfig = new
         BOSHConfiguration(false, "example.com", 5280, "/xmpp-http-bind/", "example.com");

bconfig.setSASLAuthenticationEnabled(true);
BOSHConnection xmpp = new BOSHConnection(bconfig);

 xmpp.connect();
 xmpp.login("username","password"); // HERE I AM GETTING AN ERROR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:59:02.580

浏览一下 aSmack 的源代码表明这是一个错误。一个快速的解决方法是调用`Configuration.setRosterLoadedAtLogin(false)`，修复将包括从行`BOSHConnection.java:350`后移动 3 行`authenticated = true;`。

我已经在 aSmack 中进行了更改，请运行`build.bash`并使用生成的 .jar。

# git - Git Gui - 如何推动生产？

> ID：11723922
> 
> 赞同：0
> 
> 时间：2012-07-30T14:51:02.323
> 
> 标签：git, git-push, git-gui

我正在使用 Git Gui。

我已将我的更改推送给大师。

但为了让他们活下去，他们必须被推到`master:production`.

单击按钮时，我看不到任何**生产选项。**源分支中唯一出现的是**master**。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:18:17.883

在 Git Gui 中无法选择另一个远程分支进行推送，您必须从命令行执行：

```
git push remote local_branch:remote_branch 
```

所以在你的情况下，这是

```
git push remote master:production 
```

# c# - 多线程中的数学类给出错误

> ID：11723923
> 
> 赞同：2
> 
> 时间：2012-07-30T14:51:02.400
> 
> 标签：c#, .net, multithreading, xamarin.android

我在多线程中使用这样的代码：

老例子：

```
 class All
     {
        object lockAll = new object();
        public All ()
        {
           lock(lockAll)
           {
               double res= Magnitude(1d, 0.1d , 0.2d);
           }
        }
        private double Magnitude(double X, double Y, double Z)
        {
           return Math.Sqrt(X * X + Y * Y + Z * Z);
        }
     } 
```

但我看到有时 res 是 1.3 * 10 ^-314。为什么？？？全部被锁定。：真实代码的一部分：

```
class PointSensors : IDisposable
    {
object lockAcs = new object(); //Can it be non static? I think yes
object lockMag = new object();
// When i got info from sensors. Multitheading method called many times every time in new thread
 public void OnSensorChanged(SensorEvent ev)
        {
            Sensor curS = ev.Sensor;
            long timeStamp = ev.Timestamp;
              // Vector from sensors
             Vector3 vector = new Vector3(ev.Values[0], ev.Values[1], ev.Values[2]);
                if (curS.Type == SensorType.Accelerometer)
                {
                    lock (lockAcs)
                    {
                       double TotalAcseleration = vector.Magnitude - 9.8d;
                       ...
                    }
                }

                if (curS.Type == SensorType.MagneticField))
                {
                    lock (lockMag)
                    {
                       double TotalMagVect = vector.Magnitude ;
                       ...
                    }
                }

        }
} 
```

有时数学函数会给出疯狂的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:54:46.707

您的锁没有意义，因为`res`它不是共享变量。它的作用域只存在于锁中，因此无论如何其他线程都无法访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:55:18.613

因为您锁定不同的实例。使您的锁成为静态的。

```
class All
 {
    private static object lockAll = new object();
    public All ()
    {
       lock(lockAll)
       {
           double res= Magnitude(1d, 0.1d , 0.2d);
       }
    }
    private double Magnitude(double X, double Y, double Z)
    {
       return Math.Sqrt(X * X + Y * Y + Z * Z);
    }
 } 
```

# ipad - iPad 横向自动调整大小

> ID：11723926
> 
> 赞同：1
> 
> 时间：2012-07-30T14:51:08.780
> 
> 标签：ipad

我的应用支持纵向和横向模式。但是一旦我将它从纵向切换到横向，它就不会自动调整大小。该页面仅显示可用总显示框架的一半。有人可以建议我需要输入的代码吗？

# javascript - KnockoutMapping：加载数据后不更新父模型中的 ComputedObservables

> ID：11723937
> 
> 赞同：0
> 
> 时间：2012-07-30T14:51:47.967
> 
> 标签：javascript, json, serialization, knockout.js, knockout-mapping-plugin

我想通过来自服务器的 ajax 调用加载数据，并通过敲除映射插件将其映射到我的敲除数据模型中。数据的加载是有效的，唯一的问题是在父模型中计算的 observables 不再更新。有人可以向我解释我做错了什么吗？谢谢！

创建了一个小提琴来演示我的问题：http: [//jsfiddle.net/N9Pmt/27/](http://jsfiddle.net/N9Pmt/27/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:27:51.867

您的数据包含`sumtest: 0`. `computed`这最终会在映射过程结束时用新的 observable替换现有的。现有的计算仍然会被重新评估，但绑定无法再找到它，因为它已被替换。

`sumtest`一种解决方案是在您的映射选项中忽略，例如：http: [//jsfiddle.net/rniemeyer/N9Pmt/28/](http://jsfiddle.net/rniemeyer/N9Pmt/28/)

# python - Python重命名ftp上传文件删除

> ID：11723949
> 
> 赞同：0
> 
> 时间：2012-07-30T14:52:47.170
> 
> 标签：python, upload, ftp, rename

我有一个脚本可以在将文件上传到 FTP 之前重命名它们。首先，它搜索模式“_768x432_1700_m30_”，如果找到该模式，则该模式将替换为“ *new* ” - 然后它将目录中的所有“.mp4”文件上传到 FTP 服务器。但是由于某种原因，上传文件后我似乎无法删除文件？还有更好的方法来做这个脚本吗？（我对python相当陌生）

```
#!/usr/bin/python

import os
import glob
import fnmatch
import sys
import ftplib
import shutil
import re
from ftplib import FTP

Host='xxxxxx.xxxxx.xxxx.com'
User='xxxxxxx'
Passwd='xxxxxxx'

ftp = ftplib.FTP(Host,User,Passwd) # Connect

dest_dir = '/8619/_!/xxxx/xx/xxxxx/xxxxxx/xxxx/'
Origin_dir = '/8619/_!/xxxx/xx/xxxxx/xxxxxx/xxxx/'
pattern = '*.mp4'
file_list = os.listdir(Origin_dir)

for filename in glob.glob(os.path.join(Origin_dir, "*_768x432_1700_m30_*")):
    os.rename(filename, filename.replace('_768x432_1700_m30_','_new_' ))
    video_list = fnmatch.filter(filename, pattern)

print(video_list)

print "Checking %s for files" % Origin_dir
for files in file_list:
    if fnmatch.fnmatch(files, pattern):
        print(files)
        print "logging into %s FTP" % Host
        ftp = FTP(Host)
        ftp.login(User, Passwd)
        ftp.cwd(dest_dir)
        print "uploading files to %s" % Host
        ftp.storbinary('STOR ' + dest_dir+files, open(Origin_dir+files, "rb"), 1024)
        ftp.close
        print 'FTP connection has been closed' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:04:37.097

在下一行中
`ftp.storbinary('STOR ' + dest_dir+files, open(Origin_dir+files, "rb"), 1024)` ，您打开一个文件，但您不保留对它的引用并关闭它。在 Windows 上（我假设您在 Windows 上运行它），当进程打开文件时，不能删除文件。

请尝试以下操作：

```
print "uploading files to %s" % Host
with open(Origin_dir+files, "rb") as f:
    ftp.storbinary('STOR ' + dest_dir+files, f, 1024)
ftp.close()
print 'FTP connection has been closed' 
```

区别在于：

*   使用 with 语句确保文件无论成功还是引发异常都关闭
*   将`open()`调用结果分配给名称 ( `f`)
*   添加缺少的括号，`ftp.close()`以便调用该函数。

# javascript - json - 根据变量创建 json 对象 id

> ID：11723951
> 
> 赞同：1
> 
> 时间：2012-07-30T14:52:59.940
> 
> 标签：javascript, json

有没有办法使用变量创建 JSON 对象 ID？

```
var json_result = [];
var id = 20;
json_result.push({id: {parentId: parentId, position: position}}); 
```

这会生成一个 json 对象，其值为 'id' 作为 id。我想实现将值“20”作为关键。

编辑：包括解决方案：

```
var json_result = {};
var id = 20;
json_result[id] = {parentId: parentId, position: position}; 
```

现在您可以像这样访问 parentId 和位置：

```
json_result[20].position
json_result[20].parentId 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:55:36.297

您不能编写这样的对象文字（顺便说一下，它不是“JSON 对象”；只是一个普通的 Javascript 对象），但您可以这样做：

```
var o = {};
o[id] = {parentId: parentId, position: position};
json_result.push(o); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:56:46.233

```
var json_result = [];
var id = 20;
var obj = {};
obj[id] = "something";
json_result.push(obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:56:56.030

这是 JSON 规范说键应该是字符串的原因之一。你的 JSON 应该看起来像这样：

```
{
  "20": {
    "parentId": ..., 
    "position": ...}
} 
```

...或类似的。查看[http://json.org/example.html](http://json.org/example.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:57:25.483

是的，你可以这样做：

```
var obj = {};
obj[id] = {parentId: parentId, position: position};
json_result.push(obj); 
```

# cakephp - cakephp中的自定义标签文本

> ID：11723958
> 
> 赞同：0
> 
> 时间：2012-07-30T14:53:27.517
> 
> 标签：cakephp, label

我想从数据库表中获取两个字段值并将它们组合在一起并将其用作标签中的显示文本。另外我想在表中创建另一个字段值作为标签 ID。

AgeCat 表存储不同的年龄类别。表定义为

```
age_cat_id ---> primary key
range_start
range_end 
```

例如：

```
age_cat_id=>1
range_start=>18
range_end=>24 
```

我想要的是将标签文本设置为“range_start”到“range_end”，例如：“18 到 24”

并且标签 id 是 age_cat_id。

将标签文本格式化为如上显示的正确方法是什么？我检索了 AgeCat 表的所有记录，并使用 find(all) 将它们存储在字符串数组 ($agecats) 中。我无法从该数组中检索值，然后根据上述方式对其进行格式化并设置为标签文本。请建议是否有更好的方法来做到这一点。

这样做的目的是按照“range_start 到 range_end”的格式显示 AgeCat 表中的每条记录，但将它们的值设置为相应的 age_cat_id。例如：使用某些表单元素显示 18 到 24，但值应该是 1。这就像有一个带有自定义字符串的下拉列表，但每个都链接到一个唯一值。因此，一旦选择了一个选项，就会传递值，而不是字符串。

如果标签不够好，什么表单元素适合这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:20:50.553

虚拟字段：[cakephp 文档。](http://book.cakephp.org/2.0/en/models/virtual-fields.html#virtual-fields)

```
public $virtualFields = array(
'cat_date' => 'CONCAT(AgeCat.range_start, " to ", AgeCat.range_end)'
); 
```

PS：根据 Cakephp 的约定，主键应该命名为 id。

编辑：看看那里：[表单助手](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3aselect)

```
echo $this->Form->select('id', $cat_date) 
```

在控制器中是这样的：

```
$cat_date=$this->Model->find('list',array('fields'=>array('id','cat_name'))); 
```

$cat_date 是一个包含选择中所需值的数组。

# magento - Magento getProductUrl() 没有返回正确的网址（随机？）

> ID：11723959
> 
> 赞同：12
> 
> 时间：2012-07-30T14:53:29.813
> 
> 标签：magento, magento-1.5

我正在使用 Magento 1.5.0.1，并且产品页面上的交叉销售和追加销售块中使用的 getProductUrl() 函数抛出了不同的 URL 格式。

要么是正确的 URL，例如：/laptop-bag.html，要么是错误的 URL（它工作得很好，但当然不是重写 URL）：/catalog/product/view/id/825/s/laptop-bag/category/ 16/

有时交叉销售和向上销售块都返回正确的 URL，有时都使用较长的版本，在某些情况下，一个使用正确的，另一个使用长的版本？

任何想法为什么会发生这种情况？

我已经运行了一个 magento 数据库修复、重新索引并刷新/刷新了所有缓存。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T21:09:41.527

尝试`$product->getUrlPath()`代替`$product->getProductUrl()`

更新：根据@jordan314 的以下评论，Magento 向 EE 客户推荐：

*url_path 属性从 1.13 开始不再使用，但仍可用于向后兼容，并且 Magento 不会为新产品分配值，因此不建议继续使用它。也许您可以尝试使用 $product->getProductUrl() 代替。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T16:25:53.410

生成不正确的url是因为找不到重写的url。可能是因为store_id不正确造成的。例如：

```
$id = 290;
Mage::app()->setCurrentStore('default');
echo "store_id: ".Mage::app()->getStore()->getId()."<br>";
$url = Mage::helper('catalog/product')->getProductUrl($id);
echo $url."<br>";

//change store id
Mage::app()->setCurrentStore('admin');
echo "store_id: ".Mage::app()->getStore()->getId()."<br>";
$url = Mage::helper('catalog/product')->getProductUrl($id);
echo $url."<br>"; 
```

结果：

```
store_id: 1
http://local.com/surestep-pro-diabetic-test-strips-50-strips-professional-care.html
store_id: 0
https://local.com/index.php/catalog/product/view/id/290/s/surestep-pro-diabetic-test-strips-50-strips-professional-care/ 
```

正确的 url 重写可以在名为 core_url_rewrite 的表中找到（包括有关 store_id 的信息）

如果在 core_url_rewrite 中找到匹配值，它将生成“正确的 url”，否则它将连接 product_id + url key + category_id

```
$routePath = 'catalog/product/view';
$routeParams['id']  = $product->getId();
$routeParams['s']   = $product->getUrlKey();
if ($categoryId) {
    $routeParams['category'] = $categoryId;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-30T06:03:23.690

当你得到你的收藏时尝试添加这个

```
$collection->addUrlRewrite(); 
```

它帮助了我。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-16T11:43:52.657

```
$id = 10;
Mage::app()->setCurrentStore('admin');
$url = Mage::helper('catalog/product')->getProductUrl($id); 
```

# objective-c - 触摸函数的函数调用

> ID：11723963
> 
> 赞同：0
> 
> 时间：2012-07-30T14:53:34.653
> 
> 标签：objective-c, ios, ipad

我目前正在开发一个 iPad 应用程序，并希望对我的视图控制器进行函数调用，以在对象移动到某个位置的事件上切换视图。在“touchesMoved”和“touchesEnded”中，如果对象被拖到某个位置，我尝试在视图控制器中调用一个函数来切换视图，但该函数似乎从未被调用。

例如，“touchesEnded”相当简单，只是调用视图控制器，消息被记录在 touchesEnded 内部，而不是应该被调用的视图控制器函数内部。我尝试在调试器中单步执行该函数，但它似乎只是越过了它。

**从视图***注意 m_pJupiter 是 UIImageView，m_pLevelID 是 NSString，m_pMyVC 是我的自定义视图控制器类的实例。

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (m_pJupiter.center.x >= (m_pDest.center.x - 25)) 
    {
        NSLog(@"Calling beginGameWithLevelID");
        [m_pMyVC startGameWithLevelID: m_pLevelID];
    }
} 
```

**视图控制器的功能**

```
- (void) startGameWithLevelID:(NSString*)pLevelID
{
    NSLog(@"MyViewController - beginGameWithLevelID");
    // The logic for switching views, etc
} 
```

第一条日志消息总是出现，但视图控制器中的消息永远不会出现。我在想更糟糕的情况，我只会使用自定义 UISlider，但这一直让我烦恼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:14:18.670

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (m_pJupiter.center.x >= (m_pDest.center.x - 25)) 
    {
        NSLog(@"111");
        if([m_pMyVC respondsToSelector:@selector(startGameWithLevelID:)])
        {
            NSLog(@"222");
            [m_pMyVC startGameWithLevelID: m_pLevelID];
        }

    }
}

- (void) startGameWithLevelID:(NSString*)pLevelID
{
    NSLog(@"333");
    // The logic for switching views, etc
} 
```

如果输出只有“111”，说明找不到你的“- (void) startGameWithLevelID:(NSString*)pLevelID”方法

如果输出是 "111" "222" ，可能你的 xcode 有问题，重新打开它

# cron - 如何将 cron 表达式添加到 WSO2 ESB 中的消息处理器

> ID：11723964
> 
> 赞同：0
> 
> 时间：2012-07-30T14:53:35.647
> 
> 标签：cron, wso2, wso2esb, cronexpression

我想在 WSO 2（调度消息转发处理器）中创建一个新的消息处理器。这个处理器应该包括我设置为“*0-59 * * * **”（不带引号）的属性“cronExpression”。

保存处理器会导致以下异常：*RPCInOnlyMessageReceiver Error setting cron expression: Unexpected end of expression*。

但是，我很确定表达式没有任何问题。

任何想法为什么会失败？

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:06:41.537

[Quartz OpenSymphony](http://www.opensymphony.com/quartz/wikidocs/Documentation.html)用作 cron 调度程序，您可以从[这里](http://www.quartz-scheduler.org/docs/tutorials/crontrigger.html)找到 Quartz OpenSymphony 的 cron 表达式教程。

谢谢

蒂利尼

# web2py - 什么样的值从 SQLFORM 传递到 web2py 的模板系统？

> ID：11723965
> 
> 赞同：0
> 
> 时间：2012-07-30T14:53:38.497
> 
> 标签：web2py

在[web2py 书中](http://web2py.com/books/default/chapter/29/3#Startup)我们看到了这段代码

```
def first():
    form = SQLFORM.factory(Field('visitor_name', requires=IS_NOT_EMPTY()))
    if form.process().accepted:
        session.visitor_name = form.vars.visitor_name
        redirect(URL('second'))
    return dict(form=form) 
```

在这样的模板中使用：

```
{{extend 'layout.html'}}
What is your name?
{{=form}} 
```

问题就变成了：通常像字符串和数字这样的python值会在字典中传递给模板引擎。但是在这种情况下传递了什么以及允许它“展开”成 HTML 的 web2py 是什么？

我可以构建 DOM 树并传递它们吗？或者这只是一个大的转义字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:17:24.280

在这种情况下，正在传递 FORM 对象（类）。FORM 是一个 gluon.html 对象，DIV、SPAN、P 等也是。它们都有一个名为“.xml”的方法，该方法将类“展开”为适当的 HTML 表示。

在 web2py 中，您可以在控制器末尾的 dict() 中传递任何对象，并在模板中使用它。因为 web2py 在模板中使用纯 python，所以您不必以任何方式确保您的对象是“支持”的，任何对象或原语都可以发送。但是，HTML 对象应该继承自所有 HTML 对象的基类，并且应该有一个代表该对象的 .xml() 方法。

`dom tree`假设您的意思是 HTML 片段（代码中的分层结构），您可以按照您的说法传递 a 。例如：

```
some_text = 'even variables'

x = DIV(
  A(IMG(_src='some-img.png'), _href='http://some.link.com/awdawd'),
  SPAN('Some text for whatever reason', _class='my-class', _some_other_html_attribute='i automatically get made into an attribute in the html, via gluonic magic'),
  DIV('I am text, because I am a div, any number of arguments can be combined', 'and displayed', some_text, **{'_data-special-attr':'even-html5-microdata-is-doable'}),
  UL(LI('lists are cool too'), LI('I guess')),
  TABLE([['some objects', 'are smart'], ['and you can pass them lists of lists'], ['and they know what to do with it']])
)

return dict(content=x) 
```

完全有效并且会正确“展开”[假设我输入正确......]

更多信息，请访问 epydocs：[http ://www.web2py.com/examples/static/epydoc/web2py.gluon.html.XmlComponent-class.html](http://www.web2py.com/examples/static/epydoc/web2py.gluon.html.XmlComponent-class.html)

我提到了“基础 HTML 类”——它实际上称为 XMLComponent。

这是选择类：

[http://www.web2py.com/examples/static/epydoc/web2py.gluon.html.SELECT-class.html](http://www.web2py.com/examples/static/epydoc/web2py.gluon.html.SELECT-class.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:29:04.023

Kasapo 提供了一个很好的解释。请注意，这一切都在在线文档中进行了解释——在[Views](http://web2py.com/books/default/chapter/29/5)章节中，请参阅[HTML Helpers](http://web2py.com/books/default/chapter/29/5#HTML-helpers)和[Server-side DOM](http://web2py.com/books/default/chapter/29/5#Server-side-DOM-and-parsing)部分。`FORM`对象作为助手的讨论出现在[表单章节的开头（](http://web2py.com/books/default/chapter/29/7#Forms-and-validators)[这里](http://web2py.com/books/default/chapter/29/7#Adding-extra-form-elements-to-SQLFORM)有一个表单 DOM 操作的示例）。

# sql - 在执行下面的代码时，在 sql 中出现错误。如何在 plsql 中声明表类型。我是初学者。请建议

> ID：11723966
> 
> 赞同：0
> 
> 时间：2012-07-30T14:53:45.307
> 
> 标签：sql, plsql

```
 create or replace procedure BAS_NUM_UPD  is

 cursor cur is

 select distinct o.oi_b,mpr.pa_ke_i,ltrim(substr(convert_171_to_711(cp.p_t_num),1,7),'0') bs_nbr

    from t_obj o, mat_pa_rel mp, cor_pa cp
    where o.ob_t = 'something'
    and o.oi_b = mp.oi_b
    and mp.pa_ke_i = cp.pa_ke_i;

 l_ba_num_at_i  number(10) := get_attribute_id('Ba  timber');

 flag1 VARCHAR2(10);

 type t1 is table of varchar2(10);
 par_k t1;

 BEGIN
     for x in cur loop
 BEGIN      

   select pa_ke_i into par_k from mat_pa_rel where oi_b=x.oi_b ;

  if par_k.count=null  then  

  insert into cs_val (oi_b, at_i, value, flag, ) values (x.oi_b, l_ba_num_at_i, null, 1);

  end if;

  select flag into flag1 from cs_val where at_i = l_ba_num_at_i  and oi_b = x.oi_b
    and value = x.bs_nbr;

  EXCEPTION 

    when NO_DATA_FOUND THEN

      insert into cs_val (oi_b, at_i, value, flag, )
          values (x.oi_b, l_ba_num_at_i, x.bs_nbr, 1);

    flag1 :='Nothing';

    when OTHERS 
then
       raise_application_error(-20011,'Unknown Exception in PROCEDURE');
END;

end loop;
end BAS_NUM_UPD; 
```

错误：PLS-00642：SQL 语句中不允许本地集合类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:13:29.700

如果您进行批量收集，您应该让它运行

```
select pa_ke_i bulk collect into par_k from mat_pa_rel where oi_b=x.oi_b ; 
```

然后我认为if是不正确的。我认为你需要做

```
if par_k.count = 0 then 
```

但老实说，你可能只是数一数

```
select count(*) into l_cnt from mat_pa_rel where oi_b=x.oi_b;

If l_cnt = 0 then ... 
```

当然 l_cnt 必须被定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:59:55.950

您应该`type t1`在模式中创建而不是在 pl/sql 块中创建。

# asp.net-mvc - 上传文件

> ID：11723967
> 
> 赞同：1
> 
> 时间：2012-07-30T14:53:46.257
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试将文件上传到位置 ~/Files 但是我没有成功。

我使用 MVC 3，我的代码就是这样。

我有一个控制器 GetFileController

我在这个控制器中有一个动作方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:56:20.303

> 我在这个控制器中有一个动作方法

如果这是您的控制器中唯一的操作方法，那么您将收到此错误。添加一个`GET`动作方法：

```
[HttpGet]
public ActionResult GetFiles()
{
    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:13:57.423

使用隐藏输入发布您的 id 字段，如下所示：

```
@using (Html.BeginForm("GetFiles", "GetFile", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input name ="id" type="hidden" value="1"/>
    <label for="file">Upload Image:</label>
    <input type="file" name="file" id="file"/>
    <input type="submit" value="Upload Image" />
}

[HttpPost]
public ActionResult GetFiles(int id, HttpPostedFileBase file)
    {
        // file stream logic
    } 
```

# html - 我可以将 HTML 按钮配置为在单击时始终“将目标另存为”吗？

> ID：11723971
> 
> 赞同：0
> 
> 时间：2012-07-30T14:53:58.310
> 
> 标签：html, button, csv, hyperlink

我正在我正在做的应用程序中生成 CSV 文件。

现在我将完成的文件显示为纯 HTML 链接，但我想让它们成为按钮。

**问题：**
是否可以配置一个按钮以触发“右键单击并将目标另存为”操作，因为单击该按钮将尝试在浏览器中加载 CSV 文件。

如果没有，是否有另一种方法可以防止单击按钮目标并可能显示警报，因此链接没有被跟踪。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:57:35.530

您可以使用 PHP 强制下载

```
<?php
header('Content-type: application/force-download');
$musicfile=$_GET["musicfile"];
if(file_exists($musicfile))
{
header('Content-Disposition: attachment; filename="'.$musicfile.'"');
readfile($musicfile);
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:23:43.743

我不确定在没有服务器帮助的情况下你打算如何做到这一点，但你可以看看这个，看看它是否能帮助你到达某个地方 [http://www.jtricks.com/bits/content_disposition.html](http://www.jtricks.com/bits/content_disposition.html)

# actionscript-3 - AS3 dispatchEvent 父播放头位置

> ID：11723980
> 
> 赞同：0
> 
> 时间：2012-07-30T14:54:45.747
> 
> 标签：actionscript-3, parent-child, dispatchevent

我最近接手了一个项目，该项目将 SWF 加载到子 SWF 中，这不仅很混乱，而且调试起来也很慢且难以理解。

因此，我试图找到正确的程序在父子 SWF（气泡）之间来回调用。我假设这是解决此问题的正确方法：加载/卸载和移动播放头。

我听说 dispatchEvent() 函数是从孩子到父母使用的？但我不确定这是如何解释的。我是否需要在父级中使用 addEventListener() 来监听 dispatchEvent()？

你能告诉我如何告诉父 SWF 将播放头移动到父时间轴上的另一个位置吗？

我会用吗？：

```
child_btn.AddEventListener(MouseEvent.MOUSE_DOWN, movetolabel)

function movetolabel() {
dispatchEvent(parent.gotoAndStop("label"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:15:10.333

在加载的 SWF 的主类内部：

```
// The 3rd parameters enables capture of bubbling events
childBtn.addEventListener(MouseEvent.MOUSE_DOWN, childBtn_mouseDownHandler);

function childBtn_mouseDownHandler(event:MouseEvent) {
    dispatchEvent(new Event("someSignal"));
} 
```

在父 SWF 的主类中：

```
childLoader.content.addEventListener("someSignal", childLoader_someSignalHandler);

function childLoader_someSignalHandler(event:Event):void {
    gotoAndStop("label");
} 
```

# javascript - JQuery 弹出菜单指针

> ID：11723983
> 
> 赞同：0
> 
> 时间：2012-07-30T14:54:53.613
> 
> 标签：javascript, jquery

[这（JSFiddle）](http://jsfiddle.net/6Jhaw/)是我现在拥有的代码。我想为指针设置动画，以便当用户单击列表项时，指针向右/向左滑动并停留在子列表项的中间。我的想法是找到主列表项左侧的像素数量，然后找到 width/2 并添加它们。这听起来对吗？还是我应该做一些不同的事情。谢谢你。

```
 (function(){  

var closetimer = 0;
var menuitem = 0;
var arr_position = 0;

function arrow () {
   var ele = $('.a'); <----// how can I make this a variable
                           // according to which link I select?
   var pos = ele.position(); 
   var width = ele.width()/2;
   var left = pos.left;
}

function flyout_open(event)
{
   flyout_close();
   var submenu = $(this).find('ul');
   var arr = $('.arrow');
    if(submenu){
        menuitem = submenu.fadeIn(200);
        return false;
    }
    return true;
}

function flyout_close()
{  if(menuitem) menuitem.fadeOut(200);}

$(document).ready(function()
{  $('#flyout li').bind('click', flyout_open);
});

document.onclick = flyout_close; 
```

})();

# php - 为什么我的 php 脚本会生成 [filename].php.[#] 文件？

> ID：11723984
> 
> 赞同：2
> 
> 时间：2012-07-30T14:54:55.577
> 
> 标签：php, file-io

我有一个 php 脚本，它异步接受 SOAP 帖子并将重新格式化的信息转发到另一个 web 服务。帖子最初提交到myPhpServer.php，即：

```
include('util.php');
$InvoiceNumber = (string)simplexml_load_string(file_get_contents("php://input"))->Order->InvoiceNumber;
exec("wget -bqo /dev/null --post-data 'InvoiceNumber=$InvoiceNumber' http://mysite.com/auto/myPhp.php"); 
```

这被 myPhp.php 接受，它没有任何文件写入操作，除非在我添加到我的日志文件的最后：

```
file_put_contents
(
    'log.txt', 
    date('Y-M-j H:i:s T')."\t$InvoiceNumber\t".postToWebService($Order)."\n",
    FILE_APPEND
); 
```

此过程在此目录中生成一个名为 myPhp.php.[#] 的新文件，其中 # 从 1 开始，每次使用脚本时递增。所以一段时间后，这会生成一堆不可读的 0kb 文件，如 myPhp.php.1、myPhp.php.2、myPhp.php.3 等。我认为罪魁祸首是上面的东西，因为它的其余部分不会读/写外部数据。至少有什么线索会导致这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:00:15.040

你来做这件事：

```
exec("wget -bqo /dev/null --post-data 'InvoiceNumber=$InvoiceNumber' http://mysite.com/auto/myPhp.php"); 
```

这会执行一个 wget，将 LOG（错误）消息写入 /dev/null，但它会检索名为 myPhp.php 的文件，并为此创建一个文件。

阅读 wget 的手册页，但我认为您可以使用它`-O`来指定输出文档，就像您使用`-o`.

# css - 需要溢出：一侧可见，溢出：底部隐藏

> ID：11723987
> 
> 赞同：0
> 
> 时间：2012-07-30T14:55:10.770
> 
> 标签：css

我希望最终结果看起来像这样： [https ://dl.dropbox.com/u/65978956/Capture.JPG](https://dl.dropbox.com/u/65978956/Capture.JPG)

1.  #logo 图像位于 .page div 内，一些文本溢出 div。
2.  #logo 图像的位置必须相对于 .page div 的位置，以便它始终按照它在图片上的方式定位。

问题是，因为当我将其位置设置为绝对时，我只能让#logo 重叠，所以 .page div 不再自动调整内容的垂直大小。

溢出-x 和溢出-y 值不允许我实现我正在寻找的东西

```
body {
    background-color: beige;
}

.page {
    margin: auto;
    position: relative;
    width: 984px;
    min-height: 800px;
}

#logo {
    background-image: url(../Content/Site_Images/logo.png);
    background-repeat: no-repeat;
    height: 444px;
    left: -98px;
    margin-top: 5px;
    opacity: 0.7;
    position: absolute;
    width: 381px;
    z-index: -1;
} 
```

和我的视图文件：

```
<body>
  <section class="Page">
    <figure id="logo"></figure>

    @*--Other omitted sections--*@
    .....
    .....
  </section>
</body> 
```

我应该怎么做才能达到预期的效果。

感谢您的帮助

编辑。

jsFiddle：http: [//jsfiddle.net/ngsEG/1/](http://jsfiddle.net/ngsEG/1/)

查看内容如何不调整大小以及如何正确显示图像。如果我将 overflow:hidden 添加到 .page 部分，则页面会调整大小，但图像溢出也会被隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:40:58.437

`absolute`好的，通过您发布的小提琴，很明显您的问题与徽标的位置无关。相反，您的`@*--Other omitted sections--*@`和它的 css 是问题所在，即`float`on`#MainContent`没有被`.Page`元素包裹。由于您尝试对徽标执行的操作，我同意，这里的典型修复`overflow: hidden`或`auto`不起作用。但是，旧的[**clearfix**](http://www.positioniseverything.net/easyclearing.html)解决方案应该。所以：

```
.Page:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

[见小提琴。](http://jsfiddle.net/ngsEG/4/)

注意：如果需要 IE7 或更低版本的支持，请参阅上面 clearfix 链接中的附加信息。

# objective-c - Objective-C 消息传递

> ID：11723991
> 
> 赞同：2
> 
> 时间：2012-07-30T14:55:19.383
> 
> 标签：objective-c, messaging

我无法理解 Objective-C 中私有实例变量的概念：

假设我有一堂课：

```
@interface Dog : NSObject 
```

和两个声明的选择器

```
- (void)setSomeString:(NSString *)_someString;
- (NSString *)someString; 
```

在 Dog.m 实现文件中，我声明了一个私有实例变量：

```
@interface Dog()
{
  NSString *someString;
} 
```

在程序的 main 方法中，我创建了一个新的 dog 对象：

```
Dog *myDog = [[Dog alloc] init]; 
```

为什么可以在 main 方法之外做这样的事情？

```
myDog.someString = @"Yoda"; 
```

我希望 someString 变量是私有的，并且只能由其设置器访问

```
[myDog setSomeString:@"Yoda"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:58:27.887

当您使用点语法时，您实际上是在调用方法`setSomeString`，区别只是语法，而不是含义:)

查看有关向对象发送消息的[Apple 文档](https://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:01:08.550

点符号只是一个缩写，

```
self.someVariable = newValue
//is the same as 
[self setSomeVariable:newValue]; 
```

和

```
currentValue = self.someVariable;
//is the same as
currentValue = [self someVariable]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:02:32.223

点语法实际上调用了 setter 方法。要访问 iVar，您可以使用箭头语法`->`

# php - 具有匹配“名称”和“id”的 HTML 表单元素？

> ID：11723992
> 
> 赞同：2
> 
> 时间：2012-07-30T14:55:19.103
> 
> 标签：php, html, forms

我有很长时间的习惯，在编码时，尽可能使用匹配的“name”和“id”属性来命名 HTML 表单中的大多数字段。这使我能够简化动态 HTML 生成，f。前任。在 PHP 中创建一个下拉列表：

```
select("myselect", $values); 
```

代替：

```
select("myselect", "myselectId", $values) 
```

也使我的元素立即可用于 JQuery 中的选择器（用于验证等）。

我知道这个解决方案有一些问题（它不适合单选按钮和复选框数组 - 为此我`$id`在我的 PHP 函数中包含一个参数用于收音机 - 它混合了两个用于不同目的的属性，当超过一个表格在页面上）。

这个坏习惯真的*那么*糟糕吗？我是否忽略了其他一些可能的负面影响？你会代替我做什么？

*   只要它没有引起任何问题，就坚持这一点
*   根本不要使用“ids”并为 JQuery 使用适当的选择器，比如`$(form[name='...'] input[name='...']).somefunction()`
*   在每个元素中编码一个不同的 id？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:56:20.237

提供匹配名称和 ID 的元素不会导致问题，因此您无需担心，这不是坏习惯。

*确实*会导致问题的相关事情：

*   为多个元素提供相同的 id（例如，如果您有一个单选按钮组，其中每个成员必须具有相同的名称）。
*   给一个元素一个名字，给一个不同的元素一个匹配的id

> 根本不要使用“ids”

如果您不给表单控件一个 id，那么您就不能使用`for`属性将其与`<label>`元素相关联。对`for`属性的支持比使表单控件成为标签的后代稍好一些。由于标签对可访问性非常有用（它们增加了点击目标的大小并在控件和输入之间提供了非视觉关联），因此关闭 id 并不是一个好主意。

# c# - mod 运算符行为

> ID：11723996
> 
> 赞同：0
> 
> 时间：2012-07-30T14:55:26.167
> 
> 标签：c#

当我运行此代码时：

```
double d = 0.0;
for (int i = 0; i < 90; i++)
{
    d += .01;
    d %= 1;
    Console.WriteLine(d);
} 
```

我希望输出是

```
0.01
0.02
0.03
...
0.9 
```

它的行为就是这样，直到它达到应该是 0.81。这是我看到的输出：

```
...
0.8
0.810000000000001
0.820000000000001
...
0.900000000000001 
```

那么这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:00:47.150

0.01 是小数：1/100。如果分母是 2 的幂，二进制浮点数只能表示具有有限位数的分数。一百当然不是二的幂。（如果分母的唯一质因数是 2 和 5，那么小数分数可以是有限的，这当然是 10 的质因数。）

因为 0.01 的二进制表示是无限的，所以你的程序重复添加的有限数并不完全等于 0.01；一段时间后，不准确性会累积到您在格式化输出中看到的程度。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Double_precision_floating-point_format](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)。

完成此特定任务的最佳方法是将重复加法更改为整数加法。例如，您可以更改`d += 0.01;`为`d = (double)(i + 1) / 100;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:59:53.747

试试这个

```
double d = 0.0;
for (int i = 0; i < 90; i++)
    {
     d += .01;
     d %= 1;
     Console.WriteLine(Math.Round(d, 2));
    } 
```

我认为由于四舍五入，您没有得到预期的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:03:47.280

使用`decimal`：

```
decimal d = 0.0m;
for (int i = 0; i < 90; i++)
{
    d += .01m;
    d %= 1;
    Console.WriteLine(d);
} 
```

# c# - 为什么文件夹突然无法访问？

> ID：11723998
> 
> 赞同：0
> 
> 时间：2012-07-30T14:55:35.423
> 
> 标签：c#, asp.net, .net, vb.net

我正在开发一个逻辑文件夹层次结构的项目。一个“借方”文件夹、一个“贷方”文件夹和一个“管理员”文件夹。今天早上突然我无法访问管理文件夹中的任何页面。我立即被重定向到 web.config 中定义的登录页面。在 admin 文件夹内的登录页面的 page_load 中设置的断点永远不会被命中。这就像管理文件夹被锁定......我创建了一个“test.aspx”页面并将其复制到每个文件夹中。我可以在除 admin 文件夹之外的任何文件夹中访问（运行）测试页面...

我以前从未遇到过这样的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:04:06.787

检查管理员的文件夹权限，
验证您是否有权读取和写入。
查看文件夹是否共享并查看这些许可