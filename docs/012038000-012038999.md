# StackOverflow 问答 12038000-12038999

# java - 一个数据库，两个 Web 应用程序

> ID：12038000
> 
> 赞同：1
> 
> 时间：2012-08-20T12:50:19.427
> 
> 标签：java, database

2个单独的webapp（java）可以使用相同的db（postgres）吗？

会不会是个问题？有什么建议吗？在查询中使用“锁定”就足够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:34:28.100

使用一个数据库的两个应用程序与一个使用多个连接的应用程序几乎完全相同，因此您可能已经在这样做了。所有可能的问题都完全相同。数据库甚至不知道连接是来自一个应用程序还是另一个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:58:17.927

是的你可以。如果两个应用程序的表名称相同，例如如果两个应用程序都有一个名为“用户”的表，您可能会遇到问题。出于这个确切原因，为表名添加前缀被认为是一种很好的风格，因此应用程序 1 可能有一个名为“app1_user”的表，依此类推。

长回答短：如果表名不重叠，那么就没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:02:45.783

是的，您可以为 2 个 Web 应用程序使用相同的数据库。并发读/写事务可能会出现问题，即使您没有多个 Web 应用程序访问同一个数据库，也会发生这种情况。你可以参考[这个](http://www.postgresql.org/files/developer/concurrency.pdf)文档在 postgres 中避免它。

# extjs4 - 为什么这个监听器没有被触发

> ID：12038002
> 
> 赞同：0
> 
> 时间：2012-08-20T12:50:29.457
> 
> 标签：extjs4

我定义了以下视图：

```
 Ext.define("app.view.stock.SearchValueField", {
        extend: "Ext.form.field.Text",
        alias: "widget.searchvaluefield",
        name: "search_value_field",
        enableKeyEvents: true,
        allowBlank: false,
        listeners: [
            {
                keyup: {
                    fn: function(){console.log('logged');}
                }
            }
        ],
        initComponent: function() {
            this.callParent(arguments);
        }
    }); 
```

但是在 keyup 上，监听器没有被触发。我非常精通 mvc 架构，所以请假设我的应用程序的其他部分是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:15:02.457

您必须为`Object`配置`listeners`参数提供一个，如[Observable 文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-cfg-listeners)中所述。你用了一个`Array`. 它使用以下代码工作：

```
Ext.define("app.view.stock.SearchValueField", {
  extend: "Ext.form.field.Text",
  alias: "widget.searchvaluefield",
  name: "search_value_field",
  enableKeyEvents: true,
  allowBlank: false,
  listeners: {
    keyup: function() { 
      console.log('logged');
    },
  },
  // actually the 'empty' override of initComponent isn't necessary
  initComponent: function() {
    this.callParent(arguments);
  }
}); 
```

# types - Prolog中有哪些数据类型？

> ID：12038009
> 
> 赞同：13
> 
> 时间：2012-08-20T12:50:50.963
> 
> 标签：types, prolog

根据 Wikipedia，Prolog 中的单一数据类型[是 term](http://en.wikipedia.org/wiki/Prolog#Data_types)。[本文](http://users.utcluj.ro/~cameliav/lp/Unification.pdf)还提到“Prolog 的单一数据类型是术语”，但随后继续解释“Prolog 中数据类型的分类”（但我认为只有一种类型......）现在，[这些幻灯片](http://pages.cpsc.ucalgary.ca/~denzinge/courses/449-winter2004/slides/17-TypesControl-handout.pdf)提到了不同的数据类型：“数字、字符和字符串”。

那么，Prolog 中的数据类型究竟是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T18:55:58.517

我会咬：Prolog 有一个单一的数据类型`term`。不是很有用的答案，嗯？

条款细分为

*   **变量。**占位符，不统一到任何特定术语。变量由匹配正则表达式的符号标识`[A-Z_][A-Za-z_0-9]*`。这个变量`_`很特别：它是*匿名变量*。每次出现`_`表示一个**不同的变量**。例如，鉴于事实，

    ```
    foo(1,2,3). 
    ```

    类似的测试`foo(_,_,_).`会成功，而类似的测试`foo(A,A,A).`会失败。

    然而，一旦一个变量与一个值统一（绑定到），它就不再是可变的：除非通过回溯取消它，否则它永远是它所统一的。

*   **数字**是`float`或`integer`。应用通常种类的规则（例如`-321`是整数，`-321.0`或者类似的东西`-3.21e+02`是浮点数。

*   **原子**是*名称*，通常由以小写字母开头的单词（例如`atom`）表示，与正则 rexpression 匹配`[a-z][A-Za-z0-9_]*`。或者，原子可以由撇号（例如，`'atom'`）分隔，这方便地允许使用其他不允许的字符。atom 的语法比这要复杂一些：基本上任何不属于另一个类别的东西都将形成一个 atom（例如，`[]`表示空列表的特殊 atom 和`,`表示连接的逗号 ( ) 都是原子。

*   其他一切本质上都是一个**结构**，即术语的元组，由一个带有*arity*（参数数量）的*函子*（与原子规则匹配的名称）标记。甚至可以将原子视为数量为 0 的结构。

 *在 prolog 的其他“数据类型”之上添加了语法糖：

*   **列表**由结构 表示`./2`，左侧参数是列表的头部，右侧是列表的尾部。由 atom 表示的空列表`[]`。例如，

    *   该列表`[a]`在内部表示为`.(a,[])`,
    *   列表和`[a,b]`_`.(a,.(b,[]))`
    *   列表`[a,b|[c]]`为`.(a,.(b,.(c,[])))`.

    应该注意，可以使用任何一种表示法来编写列表：它们将适当地统一。但是，您可以看到使用方括号列表表示法的吸引力。

*   类似的语法糖应用于**字符串**。字符串可以写成由双引号分隔的文本字符串：`"The cat and the hat"`. 然而，在内部，字符串表示为整数**列表**，表示实现内部编码中每个字符的代码点。例如，字符串`"cat"`在内部（以 ASCII/UTF-8 格式）表示为 list `[99,97,116]`。`"cat"`更容易阅读，是吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-25T16:50:32.500

在我（不是那么谦虚）看来，说“[语言的数据对象称为术语。术语是常量，变量或复合术语](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/ref_002dsyn_002dtrm_002dove.html#ref_002dsyn_002dtrm_002dove)”（并且子句是复合术语）听起来不错，但是[EBNF 语法](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/ref_002dsyn_002dsyn.html#ref_002dsyn_002dsyn)实际上有大约6*个整页*，所以有（很多）隐藏结构没有在该语句中表达。因此，程序文本可以分解为这几个句法类，但人们也对必须以特定方式从这些低级部分组装的列表、字典、字符串等感兴趣。无论如何，下面是一个图形，它特别适用于 SWI-Prolog，但“其他 Prologs”大多相似——除非它们是“真正的其他 Prolog”（例如，答案集编程 Prologs 可能更简单，我真的不

这是一个 SVG 图（[来源在这里](https://github.com/dtonhofer/prolog_notes/tree/master/swipl_notes/about_swipl_data_types/swipl_data_type_tree)）：

[![SWI-Prolog 的类型](../Images/25aedd558fa910f5ac459d58044d18fc.png)](https://raw.githubusercontent.com/dtonhofer/prolog_notes/master/swipl_notes/about_swipl_data_types/swipl_data_type_tree/swipl_data_type_tree.svg)

上面的内容有些特定于 SWI-Prolog，因为：

*   有一个`dict`（关联数组）数据类型。
*   `string`是 SWI Prolog 中的一个单独的数据类型。传统上，“字符串”只是一个“字符列表”。
*   空列表是一个特定的 atom `[]`。传统上，空列表类似于空指针。
*   listbox/consbox 仿函数`[|]`代替了传统的`.`.
*   有 arity 0 的复合项，例如`a()`. 传统上，这些都不存在。
*   有理数`NrD`是存在的。

对于那些喜欢历史的人，这里是第一本 Prolog 手册中的“术语”描述，该手册由 Philippe Roussel 于 1975 年 9 月编写，可在[Prolog Héritage](http://prolog-heritage.org/en/ph12.html)中找到。

![Prolog 术语的第一篇文章](../Images/8b440719cda8c1ff229c07556f854b64.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T12:57:54.293

> Prolog 中的单一数据类型是术语

这种说法既正确又有些无用。据说类型在 Prolog 中的作用不大：一切都是术语，变量是无类型的，它们会根据需要与其他术语统一。

另一方面，数字、原子和复合术语不是数据类型——它们是不同种类的术语，略有不同。复合术语进一步细分为列表、字符串和“其他”类型的仿函子术语。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-30T17:20:52.617

ISO 标准及其勘误表 2 具有几个测试谓词，用于测试 Prolog 中的数据类型。Richard O'Keefe 曾经安排这些测试谓词 [http://www.complang.tuwien.ac.at/ulrich/iso-prolog/okeefe.txt](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/okeefe.txt) 如下：

```
 true
                      |
            +---------+---------+
            |                   |
         nonvar                var
            |
  +---------+--------------------------+
  |                                    |
compound                           atomic=constant
                                       |
            +----------------+---------+---------+
            |                |                   |
          number          string             atom=symbol
            |
    +-------+-------+ 
    |               |
 integer            float 
```

我省略了不属于 ISO Prolog 的理性和复杂，但我保留了字符串，尽管它也不是 ISO Prolog 的一部分，但例如真正的字符串，即不是字符代码列表的双引号简写，而是真正的数据类型, 目前在 SWI-Prolog 版本 7 中找到。通常 ISO Prolog 允许向 Prolog 实现添加新的数据类型。

这棵树有一些不错的属性：

**1) 兄弟姐妹是互斥的：**
如果 s1, .., sn 是兄弟姐妹，那么对于给定参数，最大一个测试谓词 si 将成立。因此，例如，我们知道 float(X) 或 integer(X) 或两者都不成立，但对于特定的 X，并非两者一起成立。

**2) 子项包含在其父项中：**
如果 c 是子项且 p 是父项，则 c 隐含 p。因此，例如，我们知道如果 number(X) 成立，那么 atomic(X) 也适用于特定的 X。

ISO 核心标准中已经定义了更多的数据类型，这些数据类型不能轻易地放入树中。例如，长度为 1 的原子称为字符。0..max_code 之间的整数称为字符代码。0..255 之间的整数称为一个字节。有时是字符代码或字节。字符可能还包括 -1 和。end_of_file。这些数据类型没有自己的测试谓词，测试必须从其他谓词派生。

严格来说，ISO 核心标准还简单地将列表单元定义为带有函子“.”的 arity 2 的化合物，并将空列表定义为原子“[]”。一些 Prolog 系统，例如 SWI-Prolog 版本 7 违反了此规则，并为列表单元使用另一个函子。较新的 ISO 测试谓词 callable/1 连接原子和化合物。

然后是更全面的测试谓词，它们不仅仅查看给定术语的根元素的清单类型。例如谓词 ground/1 必须查看整个术语，测试谓词 acyclic_term/1 也是如此，两者都是 ISO 标准的一部分。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-20T12:56:34.897

见[http://ktiml.mff.cuni.cz/~bartak/prolog/data_struct.html](http://ktiml.mff.cuni.cz/~bartak/prolog/data_struct.html)

术语是一个容器，可以包含几种不同类型的数据（想想面向对象语言中的继承）*

# vb.net - 如何存储和加载用户首选项到文件？VB 2010

> ID：12038013
> 
> 赞同：0
> 
> 时间：2012-08-20T12:51:00.123
> 
> 标签：vb.net, visual-studio-2010, application-settings

我正在编写一个应用程序，允许用户构建一个显示有关数据库的元数据的报告。预计用户通过应用程序界面构建报告，并随时可以将他们的首选项保存到文件以在另一个应用程序中使用，

现在，我四处搜索，看到了有关应用程序设置等的文章，但我的问题（我相信）有些不同：

假设用户选择了他们希望从中构建报告的项目，我如何将这些选择（通过使用单选按钮）保存到设置文件中，以便当程序再次运行时，用户可以打开设置文件并允许将以前的首选项用于另一个报告。我还希望允许用户在运行时配置报表的页面布局，并将其包含在设置文件中以供将来使用。

我希望我的解释是足够的，由于设置它的人的措辞过多，我自己理解任务有点困难，但是我们努力工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:34:06.887

您可以在用户设置中存储任何可序列化的内容。所以只要定义你的用户选择类和你的页面布局类，你就可以让它像任何字符串或整数一样持久化。
（你可以在这里看到：[Custom enum as application setting type in C#?](https://stackoverflow.com/questions/2184209/custom-enum-as-application-setting-type-in-c)）

编辑：在这篇文章中，您可以看到您可以在您的偏好中使用任何对象，包括您在项目中自己定义的对象。为此，您必须提供完整的类名，包括项目的 NameSpace (MyNameSpace.MyPreferenceStorageClass)。

编辑2：所以我将用小例子来描述更多。
1）您必须定义一个将存储您的设置的类。我为我的示例选择任意名称：

```
Public Class UserChoices
    Public Property DisplayInColor As Boolean = False
    Public Property UseKeyboard As Boolean = True
End Class 
```

一定要设置一个默认值。您需要在编写类后成功编译才能使该类位于当前命名空间内。

2）然后进入项目的设置窗口。添加具有所需名称的设置变量。
我称之为 AppUserChoices。然后选择类型，转到“浏览”，然后键入*MyNameSpace* .UserChoices 作为类型。
（显然，用您的命名空间替换 'MyNameSpace' ... ;-) ）

3）你完成了。我编写了一些代码来使用设置（我把它放在我的 Application 的 Startup 事件处理程序中）：

启动它几次。第一次，它应该报告用户选择什么都不是。然后它们就可以了，并且每次颜色设置都会在颜色和黑白之间切换。

```
 Private Sub Application_Startup
                   (ByVal sender As System.Object, ByVal e As System.Windows.StartupEventArgs)
        If My.Settings.AppUserChoices Is Nothing Then
            MessageBox.Show("AppUserChoices is nothing")
            My.Settings.AppUserChoices = New UserChoices
            My.Settings.Save()
        Else
            MessageBox.Show("AppUserChoices is  **not** nothing")
            My.Settings.AppUserChoices.DisplayInColor = Not My.Settings.AppUserChoices.DisplayInColor
            My.Settings.Save()
            If My.Settings.AppUserChoices.DisplayInColor Then _
                      MessageBox.Show("show colors") _
                Else _
                      MessageBox.Show("show in B&W")
        End If
    End Sub 
```

4) 请注意，您可能希望使用 UserChoices 类来实现 INotifyPropertyChange，以防您在代码中修改它们。（示例：如果用户更改了“DisplayInColor”，您可能希望将“PrintInColor”设置为相同的值。）

5) 对于用户对页面布局的偏好，同样创建一个类来存储布局偏好和设置中的新项目。

6）绑定到设置值，好吧，让另一个 StackOverflow 帖子完成这项工作： [绑定到设置中定义的值](https://stackoverflow.com/questions/845030/wpf-bind-to-a-value-defined-in-the-settings)

# iphone - 点击“主页”按钮并连续多次重新打开应用后，启动图像重新出现

> ID：12038014
> 
> 赞同：1
> 
> 时间：2012-08-20T12:51:03.010
> 
> 标签：iphone, ios, background, splash-screen

如果我按下主页按钮然后重新启动应用程序，大约 10 次后，应用程序显示启动屏幕并卡住几秒钟甚至崩溃。有可能发生的原因吗？

（应用程序配置为后台）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:05:58.920

我发现了问题。

我使用 mbprogresshud 的第三方代码。

我发现了一个错误，此代码包括注册，`UIApplicationBecomeActiveNotification` 并且只要收到此通知，此注册就会再次发生。

因此，在应用程序移动到后台并重新打开几次后导致堆栈溢出。

感谢您的回答。

# listview - Windows 8 Metro 风格 ListView 自动滚动

> ID：12038022
> 
> 赞同：2
> 
> 时间：2012-08-20T12:51:22.263
> 
> 标签：listview, windows-8, microsoft-metro

我正在使用`ListView`Windows 8 Metro 风格的应用程序，我想以编程方式使其滚动到视图中特定项目的位置。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:06:03.297

不确定您使用的是 JavaScript 还是 XAML，但在 JavaScript 中，您应该能够只设置`ensureVisible(index)`ListView 的属性。这将确保该项目可见，必要时滚动 ListView：

*   [http://msdn.microsoft.com/en-us/library/windows/apps/br211820.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211820.aspx)

在 XAML 中，`ScrollIntoView(object)`应该是您需要的。（对于 SemanticZoom，请参阅`MakeVisible`。）

*   [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.scrollintoview.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.scrollintoview.aspx)

# yui - 为 td 使用 tabIndex

> ID：12038028
> 
> 赞同：0
> 
> 时间：2012-08-20T12:51:34.970
> 
> 标签：yui, rich-text-editor, html-table, tabindex

`table`使用,`tr`和`td`标签的简单组合执行插入的可编辑表格。

`tab`是否可以通过单击按钮、使用`td` `tabIndex`属性（或其他任何东西）使其单元格可切换？

现在，显然，单击`tab`任何单元格 ( ) 内的按钮会在其中插入 4 个空格。`td`当然，我可能会听`keydown`或`keypress`事件，然后制作类似的东西`preventDefault()`然后玩`$('#nextTdId').focus()`。

这只是没有任何实践的想法。可能有人也有这个问题。

# sql-server - 我可以开发一个 SQL/CLR 函数来接受任何类型的参数，如 MAX() 吗？

> ID：12038033
> 
> 赞同：0
> 
> 时间：2012-08-20T12:51:45.903
> 
> 标签：sql-server, sqlclr

例如，我可以自己使用 C# 开发 MAX() 函数吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:55:34.133

As stated in this post (http://stackoverflow.com/questions/4749071/clr-table-valued-function-with-array-argument?rq=1), table-valued parameters are not supported. SQL/CLR functions take arguments of types in the namespace System.Data.SqlTypes - such as SqlChars, SqlString, SqlInt32, etc. Basically, they are primitive types: no rowsets, no arrays allowed as function parameters (the answer in the previous link proposes work-arounds).

SQL/CLR functions are better suited for things like leveraging the System.Text.RegularExpressions namespace (Regex.Match), or for creating a function that returns a hash of a given value - a password string, perhaps.

Here's an example of SQL functions in a CLR assembly:

```
public static partial class UserDefinedFunctions
{
    public static readonly RegexOptions Options = RegexOptions.IgnorePatternWhitespace | RegexOptions.Singleline;

    [SqlFunction]
    public static SqlBoolean RegexMatch(SqlChars input, SqlString pattern)
    {
        Regex regex = new Regex(pattern.Value, Options);
        return regex.IsMatch(new string(input.Value));
    }

    [SqlFunction]
    public static SqlChars RegexGroup(SqlChars input, SqlString pattern, SqlString name)
    {
        Regex regex = new Regex(pattern.Value, Options);
        Match match = regex.Match(new string(input.Value));
        return match.Success ? new SqlChars(match.Groups[name.Value].Value) : SqlChars.Null;
    }
} 
```

(taken from [http://msdn.microsoft.com/en-us/magazine/cc163473.aspx](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx))

# java - 在 Java 中扩展接口和转换错误

> ID：12038043
> 
> 赞同：0
> 
> 时间：2012-08-20T12:52:39.690
> 
> 标签：java, android

我正在尝试实现“PriorityThreadPoolExecutor”。

所以我声明执行者：

```
static ThreadPoolExecutor threadPool =  
                new ThreadPoolExecutor(2, 100, 100, TimeUnit.SECONDS, queue); 
```

优先级的关键是队列参数。基本上我需要一个 PriorityBlockingQueue 所以我使用构造函数：

```
PriorityBlockingQueue(int initialCapacity, Comparator<? super E> comparator);
queue = new PriorityBlockingQueue<mRunnable>(10,
        new Comparator<mRunnable>() {

            @Override
            public int compare(mRunnable lhs, mRunnable rhs) {
                return rhs.getPriority()-lhs.getPriority();
            }
        }); 
```

mRunnable 在哪里：

```
public interface mRunnable extends Runnable {
    public int getPriority();
} 
```

但是编译器在这里抱怨：

```
Type mismatch: cannot convert from PriorityBlockingQueue<mRunnable> 
       to PriorityBlockingQueue <Runnable> 
```

我不明白为什么当 mRunnable 扩展 Runnable 时会发生此错误。

我可以修补它来改变比较器：

```
new Comparator<Runnable>() {

    @Override
    public int compare(Runnable lhs, Runnable rhs) {
        if (lhs instanceof mRunnable && rhs instanceof mRunnable){
        return ((mRunnable)rhs).getPriority()-((mRunnable)lhs).getPriority();
        }
        return 0;
    }
}); 
```

但这是一个丑陋的解决方案恕我直言。

你能解释一下为什么会发生类型不匹配吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:03:09.430

由于不同的通用类型而发生类型不匹配，您应该将引用类型从 更改`PriorityBlockingQueue<Runnable>`为`PriorityBlockingQueue <mRunnable>`。或者`PriorityBlockingQueue<? extends Runnable>`例如。

# java - Java如何将数组值从一种方法传递给另一种方法

> ID：12038044
> 
> 赞同：2
> 
> 时间：2012-08-20T12:52:40.630
> 
> 标签：java, arrays, methods

正如问题的标题所示，我想知道如何在方法之间共享数组值。我的主要目标是这个。我有一个方法，其中用户输入存储在一个数组中，然后这个方法基本上会检查用户输入值（验证过程）这样说（请忽略语法）

```
public void validation()
{
 String[] accnumbers = new String[20];
  Scanner sc = new Scanner(System.in);

  System.out.print("Enter the account number:");
    accno = sc.nextLine(); 

int j;
      for (j = 0; j < accnumber.length; j++)
      if (accnumber[j] == null) break;
      if (j==accnumber.length)  
      {
            System.out.print("limited.");
      } 
      else
      { 
          accnumber[j]=accno;               
      }

} 
```

//所以这是针对vaidation部分的，你可以看到现在有一​​个accnumbers数组我想在下面的方法中分享它，它基本上搜索一个在字符串中有效的accnumber

```
public void search(String[] acnumbAry,BigDecimal[] acbalanceArray,String accnumbinput)
{
 if(Arrays.asList(acnumbAry).contains(accnumbinput))
       {
           System.out.println("The value is contained");
       }
       else
       {
           System.out.println("The value is not contained");
       }

} 
```

// 但在 Main 方法中，我有一个显示菜单，为用户提供验证或搜索选项，因此当用户选择搜索时，我不确定如何从验证方法获取数组值（如果有） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:59:25.740

我宁愿放在`String[] acnumbAry`类的成员列表中，并使用构造函数对其进行初始化。

在函数调用期间复制数组只会影响性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:59:43.273

您可以在方法中返回数组：

```
public String[] validation()
{
  String[] accnumbers = new String[20];

  // your validation code

  return accnumbers;
} 
```

但是，让我建议您对代码进行一些更改：

*   您可以在验证之前填充数组，然后将其传递给您的`validation`方法。我也建议您将其称为`validate`：`bool validate(String[] values)`. 这对我来说会更直观，因为验证和接收数据通常是两件不同的事情。正如*Anon*所写，您可以将 存储`accnumbers`在实例字段中。
*   当您`contains`在示例中使用时，最好使用 a`Set`而不是数组 or `List`，因为搜索集合通常更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:12:26.843

不要使用数组！！！Java 不是 C！

除非您正在编写一些需要超快的低级代码，否则请使用 Collections API。如果这是家庭作业（我怀疑是）并且您的教授告诉您使用数组，请要求教务长在他造成更多伤害之前立即将他从教学中移除！对于几乎所有情况，数组都是一个糟糕的选择。

在这种情况下，请使用 a `List`，它会自动增大大小。无需检查大小等。然后从您的方法中返回列表。您的代码将缩小为：

```
public List<String> validation() {
    List<String> accnumbers = new ArrayList<String>();
    Scanner sc = new Scanner(System.in);

    System.out.print("Enter account numbers (blank to finish):");
    while (true) {
        String accno = sc.nextLine(); 
        if (accno.equals("")) { // blank ends input
            return accnumbers;
        }
        accnumbers.add(accno); // will take any number of account numbers
    }
} 
```

您甚至不需要您的`search`方法，只需`list.contains()`在线使用即可。

# php - Twig 中的 escape('html') 和 escape('html_attr') 之间的区别

> ID：12038048
> 
> 赞同：10
> 
> 时间：2012-08-20T12:52:54.440
> 
> 标签：php, escaping, twig

从 1.9.0 版开始，[Twig](http://twig.sensiolabs.org/)提供了过滤器的`html_attr`策略`escape`（参见[文档](http://twig.sensiolabs.org/doc/filters/escape.html)）。

该`html`策略使用[htmlspecialchars](http://php.net/htmlspecialchars) PHP 函数（通过快速查看源代码可以确认这一点）。该`html_attr`策略使用一系列自定义替换，最终似乎具有相同的效果。

这两种策略有区别吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T11:31:43.273

[消息来源](https://github.com/twigphp/Twig/blob/v1.9.0/lib/Twig/Extension/Core.php#L959-L964)说：

```
/*
 * While HTML supports far more named entities, the lowest common denominator
 * has become HTML5's XML Serialisation which is restricted to the those named
 * entities that XML supports. Using HTML entities would result in this error:
 *     XML Parsing Error: undefined entity
 */ 
```

在实践中，该`html`策略仅更改 HTML 中具有特殊含义的字符，而该`html_attr`策略几乎替换了所有非字母数字字符，包括空格。请参阅示例：

看到这个**文字**，好吗？

```
raw:       See this <b>text</b>, OK? 
```

```
html:      See this &lt;b&gt;text&lt;/b&gt;, OK?
html_attr: See&#x20;this&#x20;&lt;b&gt;text&lt;&#x2F;b&gt;,&#x20;OK&#x3F; 
```

在我的理解中，对于 HTML，你可以使用`html`策略，对于 XML 文档，你最好使用`html_attr`策略，但是我在实践中没有尝试过。

# mysql - 在 MySQL 中使用 IN ('ABC') 和 = 'ABC' 有性能差异吗？

> ID：12038052
> 
> 赞同：2
> 
> 时间：2012-08-20T12:53:10.443
> 
> 标签：mysql, performance

下面的两个查询之间是否存在性能差异？

```
SELECT * FROM mytable WHERE name IN ('ABC');

SELECT * FROM mytable WHERE name = ('ABC'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:56:46.973

`IN`不，单值和单值没有区别`=` 。[您可以使用EXPLAIN EXTENDED](http://dev.mysql.com/doc/refman/5.0/en/explain-extended.html)检查查询执行计划：

```
EXPLAIN EXTENDED SELECT * FROM mytable WHERE name IN ('ABC');

SHOW WARNINGS; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T12:56:42.107

不，我相信 MySQL`x IN (a, b, c)`会在`x = a OR x = b OR x = c`内部重写，所以它是同一个查询。

# xml - 用于 linux 的 WSDL 编辑器/编译器

> ID：12038055
> 
> 赞同：1
> 
> 时间：2012-08-20T12:53:16.337
> 
> 标签：xml, wsdl, editor

我已经在网上搜索了干净，但找不到解决我的问题的方法：

我正在寻找开源软件/插件来编辑 WSDL（基于 XML）文档（WSDL 编译器/编辑器）。我正在使用 Linux Mint 12。

谁能帮我找到任何wsdl软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:20:08.880

WSDL 是 XML，因此您当然可以使用 XML 编辑器（如[XML Copy Editor](http://xml-copy-editor.sourceforge.net/)）或基于 Eclipse 的工具（如[Rinzo）](http://editorxml.sourceforge.net)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:27:42.543

Eclipse 有一个 wsdl 编辑器

[http://wiki.eclipse.org/index.php/Introduction_to_the_WSDL_Editor](http://wiki.eclipse.org/index.php/Introduction_to_the_WSDL_Editor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T01:13:10.823

Eclipse 支持 XML 编辑和验证，请参阅[XML Validation Tutorial](http://www.eclipse.org/webtools/community/tutorials/XMLValidation/XMLValidationTutorial.html)。无需安装任何额外的插件。

# java - 从表名中获取主键值

> ID：12038056
> 
> 赞同：1
> 
> 时间：2012-08-20T12:53:16.550
> 
> 标签：java, mysql

我有如下表::

```
id  || name     || Desg         || Sal  || deptId
1   ||ajay      ||MD            ||999   ||1
2   ||Kaushal   ||Engg          ||100   ||2
3   ||Vidhi     ||HR            ||5000  ||3
4   ||Sonu      ||SSP           ||200   ||1
5   ||Jay       ||Asst Manager  ||120   ||3
6   ||Uvi       ||Utra          ||450   ||5 
```

id 是主列。这只是一张带有 name 的表`person`。我想获取主键列的值（这里是 id）。我的`java`方法将接收表名和 where 子句，并将返回主列值的 ArrayList。现在的问题是，应该根据表名来决定哪一列是主列。有没有可以给出值的查询::

`<<Part of Query to get values of primary column key>> where sal > 150 & deptId != 1`（该方法将收到的 Where 子句）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:57:14.320

可以从`INFORMATION_SCHEMA`表中提取数据库元数据，如此[处](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)所述。

我认为您要查看的表格是`columns`：

```
SELECT    COLUMN_NAME
FROM      INFORMATION_SCHEMA.COLUMNS
WHERE     TABLE_SCHEMA = '<<your schema name>>'
  AND     TABLE_NAME = '<<your table name>>'
  AND     COLUMN_KEY = 'PRI' 
```

虽然这只是一个简单的案例。

对于正确的索引分析，[`statistics`](http://dev.mysql.com/doc/refman/5.0/en/statistics-table.html)可以查阅该表。从（有些模糊的）内存中，可以使用索引名称或类型来确定索引是否是主键索引。

一旦你*有了*主键列名，你就可以简单地基于它构造另一个查询。

换句话说（未经测试）：

```
String prim_colm = getPrimaryKeyColumn (tableName);
String newQuery = "select " + prim_colm + " from " + tableName"; 
```

然后执行`newQuery`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-20T12:58:20.907

回答你问题的第二部分

```
<<Part of Query to get values of primary column key>> 
```

采用...

```
SELECT <column name> FROM <table name> WHERE.... 
```

<column name>/<table name> 来自您决定解决的地方。查询数据库元数据或仅使用开关。

# jquery - 为什么当我尝试为某个选择查找选定的选项时会出现错误？

> ID：12038057
> 
> 赞同：0
> 
> 时间：2012-08-20T12:53:18.300
> 
> 标签：jquery

我正在使用以下代码：

```
 $('select.update-grid')
            .each(function () {
                var id = this.id.replace('modal', '');
                var sel = this.find("option:selected").text();
                var val = this.val()
                $('#input' + id)
                    .val(val)
                    .attr('title', sel);
            }) 
```

它通过使用更新网格类查找所有选择来工作。当我单步执行此代码时，我在以“var sel”开头的行出现错误。

```
SCRIPT438: Object doesn't support property or method 'find' 
```

有谁知道我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:56:02.933

## 重点：

您拥有的对象`this`是 HTMLElement 对象，而不是 jQuery 对象。

`$(this)`您可以通过使用而不是`this`或更好地通过分配`$(this)`给变量并在任何地方使用该变量来纠正此问题。

## 作为旁注：

通过首先检查它是否是语法来调试错误；然后检查它是否是您不知道的 API“功能”（当前情况）；只有然后检查它是否是一个概念问题（不能以这种方式完成）。

尝试隔离您的问题，将其脱离上下文，直到您拥有可以重现错误的最小代码段。这揭示了错误的一般性质，并允许您更好地理解（相当一般的，有时是神秘的）错误“消息”。

在 Internet 上查找错误消息并找到其他处于类似或不同困境的人，并查看类似的事情如何得到修复，以及不同的事情如何得到修复。之后，您可以提出一个记录在案的问题并理解答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:55:50.500

当您运行 .each() 时，这指的是当前的 select.update-grid DOM 元素，而不是它的 jquery 参考：

```
$('select.update-grid')
    .each(function () {
    var grid = $(this);
        var id = this.id.replace('modal', '');
        var sel = grid.find("option:selected").text();
        var val = this.value;
        $('#input' + id)
            .val(val)
            .attr('title', sel);
    }); 
```

我想这就是你要找的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T12:55:57.363

尝试使用

```
$(this).find(... 
```

在每个方法中，对 DOM 元素的引用不是 jquery 对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T12:55:56.707

就用这个

```
 $("select option:selected"). 
```

或者在你的代码中你只是错过了 $(this) 只是写了这个

```
$(this).find(':selected').text(); 
```

或检查

```
alert($(this).find(":selected").text()); 
```

# umbraco - Umbraco 按用户类型获取用户

> ID：12038059
> 
> 赞同：3
> 
> 时间：2012-08-20T12:53:26.650
> 
> 标签：umbraco

如果我有一个用户类型列表（ID 和名称），我如何获取属于该用户类型的用户（不是成员）？似乎没有任何方法可以`User[] userList = User.Get ByType`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:24:46.050

使用 linq 你应该能够得到你正在寻找的东西。以下是如何仅根据用户类型的别名获取用户的示例：

```
string[] userTypeAliases = new string[] { "writer", "editor" };

var userTypes = umbraco.BusinessLogic.UserType.GetAllUserTypes()
    .Where(ut => userTypeAliases.Contains(ut.Alias));

var users = umbraco.BusinessLogic.User.getAll()
    .Where(u => userTypes.Contains(u.UserType)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:39:43.590

您可以使用如下 ID 来执行此操作：

```
var userType = UserType.GetUserType(1);
var users = User.getAll().Where(u => u.UserType == userType); 
```

# sql-server - 存储过程内连接

> ID：12038064
> 
> 赞同：0
> 
> 时间：2012-08-20T12:53:58.097
> 
> 标签：sql-server, stored-procedures

我的第一个存储过程（在 sql-server 中）。我无法使其工作，它在 a.Id 中引发警告阅读后，并不太了解，我什至不确定是否可以在存储过程中使用此内部联接。

```
select top 1 b.*, a.*
FROM Bids b
INNER JOIN Auctions a 
ON b.Auction_Id = a.Id
(NOLOCK) WHERE ( a.Ends IS NOT NULL AND a.Starts IS NOT NULL AND a.Starts < @Now AND a.Ends > @Now)
ORDER BY b.CreationTime DESC 
```

实际上，我只需要 b.* 但我假设我必须检索所有字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:56:33.940

将锁定提示更改为：

```
INNER JOIN Auctions a WITH(NOLOCK) 
```

完整查询将是：

```
select top 1 b.*, a.*
FROM Bids b
     JOIN Auctions a WITH(NOLOCK) ON b.Auction_Id = a.Id
WHERE ( a.Ends IS NOT NULL
    AND a.Starts IS NOT NULL
    AND a.Starts < @Now
    AND a.Ends > @Now)
ORDER BY b.CreationTime DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:57:26.567

如果需要，取出`(Nolock)`或放在表名之后。

您可以使用`Select`从查询中的任何表中选择所需的任何字段。

# java - 在 Java 中将字符串解析为 int 的快速方法

> ID：12038065
> 
> 赞同：2
> 
> 时间：2012-08-20T12:54:01.063
> 
> 标签：java, android, string, performance

> **可能重复：**
> [从 Java 文件中读取大量数据](https://stackoverflow.com/questions/2693223/read-large-amount-of-data-from-file-in-java)

我有一个像 "2 -56 0 78 0 4568 -89..." 这样的字符串 end 等等。现在我`Scanner.nextInt()`用来解析它，但它似乎很慢。平台为安卓。任何建议如何实施以提高速度？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T12:55:39.703

使用`myString.split(" ")`, 在 上拆分`' '`, 然后`Integer.valuesOf(..)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:58:04.803

拆分空间上的字符串并解析每个条目

```
for (String s: string.split(" ")) {
  int i = Integer.parseInt(s);
  //do something with i
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T12:56:32.557

您可以正常读取输入`String`，然后`Integer.parseInt()`在其上使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T13:00:03.930

您可以使用`String.split("\\s")`然后对每个字符串使用`Integer.valueOf()`解析为整数或`Integer.parseInt()`解析为 int。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T13:06:20.230

```
 you can use Integer.parseInt(Value of String); 
```

# oracle - 如何连接 BLOB 字段（Oracle）？

> ID：12038066
> 
> 赞同：1
> 
> 时间：2012-08-20T12:54:01.133
> 
> 标签：oracle, plsql, blob, concatenation

是否可以从特定表中连接 A1 和 A2（例如）：

```
CREATE TABLE MY_SCHEME.CONC_BLOB
(
  A1       BLOB,
  A1_SORT  NUMBER(20),
  T_TYPE   VARCHAR2(9 BYTE),
  A2       BLOB,
  A2_SORT  NUMBER(20),
  A3       VARCHAR2(32 BYTE),
  A4       BLOB,
  A5       VARCHAR2(8 BYTE)
) 
```

? 如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:01:09.280

BLOB 可以与 DBMS_LOB 包连接，特别是与 APPEND 过程连接。但是您将需要使用一些 PL/SQL 来迭代相关行并调用该过程。

我不太明白你说的*下一张表*是什么意思，所以我不能给你举个例子。

**更新：**

PL/SQL 的相关部分可能如下所示：

```
DECLARE
  a1_lob BLOB;
  a2_lob  BLOB;

BEGIN
  SELECT A1, A2 INTO a1_lob, a2_lob
  FROM CONC_BLOB
  WHERE A1_SORT = 'some value'
  FOR UPDATE;

  dbms_lob.append(a1_lob, a2_lob);
  COMMIT;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:22:40.470

仅供参考：如果您打算使用 blob 来存储大文本（这就是我想您想要连接它们的原因）我建议使用 CLOB。它将允许您使用 || 对于串联的最佳部分。不幸的是，您可能会遇到 || 的问题 当 clob 的长度超过 32767

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-02T22:17:55.017

Here is my solution for joining any number of BLOBs into single BLOB using helper table type and stored function:

```
create or replace type blobs as table of blob;

create or replace function concat_blobs(parts in blobs) return blob
is
    temp blob;
begin
    if parts is null or parts.count = 0 then
       return null;
    end if;
    dbms_lob.createtemporary(temp, false, dbms_lob.CALL);
    for i in parts.first .. parts.last
    loop
        dbms_lob.append(temp, parts(i));
    end loop;
    return temp;
end;

-- usage example:
select concat_blobs(blobs(to_blob(hextoraw('CAFE')), to_blob(hextoraw('BABE')))) from dual;

-- bonus
create or replace type raws as table of raw(2000);

create or replace function raws_to_blobs(arg in raws) return blobs
is
    res blobs;
begin
    select to_blob(column_value) bulk collect into res from table(arg);
    return res;
end;

-- usage example:
select concat_blobs(raws_to_blobs(raws(hextoraw('CAFE'), hextoraw('BABE'))) from dual; 
```

See also multiple RAWs concatenation in [Oracle 10: Using HEXTORAW to fill in blob data](https://stackoverflow.com/questions/18116634/oracle-10-using-hextoraw-to-fill-in-blob-data/62162036#62162036).

# box-api - Box Rest APIv2：移动文件或文件夹

> ID：12038068
> 
> 赞同：4
> 
> 时间：2012-08-20T12:54:04.743
> 
> 标签：box-api

v1 API 中有一个[移动操作](http://developers.box.net/w/page/12923941/ApiFunction_move)。

但是 v2 Rest API 有什么等价物吗？V2中有复制功能，我尝试将其替换为`move`但不爱，操作不允许错误或类似的东西：

```
curl https://api.box.com/2.0/files/FILE_ID/move \
  -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
  -d '{"parent": {"id" : FOLDER_ID}}' \
  -X MOVE 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:08:07.773

您可以通过 PUT 请求更新项目的父项来执行此操作，即

```
curl https://api.box.com/2.0/files/FILE_ID \
    -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
    -d '{"parent": {"id": "THE_NEW_PARENT_ID"}}' \
    -X PUT 
```

# c# - 单元格值更改事件

> ID：12038071
> 
> 赞同：1
> 
> 时间：2012-08-20T12:54:16.523
> 
> 标签：c#, datagridview, cells

当我向我的单元格提交一个值时，这可以正常工作，但是当我向另一个单元格提交另一个值时，它会同时更改这些单元格的值。我不希望它这样做，每个单元格都应该有自己独特的价值，我该怎么做：

```
 private void retrieveData()
    {
        //returns values, creates and populates dgv
        try
        {
            string company, GetPartCodeV, logname, area;
            dgvDetials.DataSource = null; //resets dgv source to nothing so when refreshing no old data is contained
            dgvDetials.ColumnCount = 0; //removes all columns from dgv so none are repeated when refreshed

            logname = dtArea.Rows[cbArea.SelectedIndex]["logname"].ToString();

            dtArea3 = SQLMethods.GetAreaValues(logname);
            company = dtArea3.Rows[0]["company"].ToString();
            GetPartCodeV = dtArea3.Rows[0]["def_part_type"].ToString();

            DataTable dtGetPartDetails = SQLMethods.PartNo(company, GetPartCodeV); //gets production figures based on selected values

              dgvDetials.DataSource = dtGetPartDetails; //sets dgv source
          //  DataGridViewComboBoxColumn machCol = new DataGridViewComboBoxColumn(); //creates new combobox column for machine
          //  machCol.Name = "machine";
          //  machCol.DataSource = new string[] { "", "1", "2", "3", "4" }; //sets source for combobox column
          //  dgvDetials.Columns.Add(machCol); //adds machine column

            DataGridViewColumn qtyInsp = new DataGridViewColumn(); //creates new textbox column for quantity
            DataGridViewCell qtyCell = new DataGridViewTextBoxCell();
            qtyInsp.CellTemplate = qtyCell;
            qtyInsp.Name = "qty_insp";
            dgvDetials.Columns.Add(qtyInsp); //inserts new column into dgv

            DataGridViewColumn colScrapCount = new DataGridViewColumn(); //creates new textbow column for scrap count
            DataGridViewCell cellScrapCount = new DataGridViewTextBoxCell();
            colScrapCount.CellTemplate = cellScrapCount;
            colScrapCount.Name = "scrapCount";
            dgvDetials.Columns.Add(colScrapCount); //inserts new column

            DataGridViewColumn colReworkCount = new DataGridViewColumn(); //creates new textbox column for rework count
            DataGridViewCell cellReworkCount = new DataGridViewTextBoxCell();
            colReworkCount.CellTemplate = cellReworkCount;
            colReworkCount.Name = "reworkCount";
            dgvDetials.Columns.Add(colReworkCount); //inserts new column into dgv
            dtArea2 = SQLMethods.GetAreaCode(username,logname);
            area = dtArea2.Rows[0]["area_code"].ToString();

            DataGridViewColumn qtyrecorded = new DataGridViewColumn(); //creates new textbox column for quantity
            DataGridViewCell qtyRecCell = new DataGridViewTextBoxCell();
            qtyrecorded.CellTemplate = qtyRecCell;
            qtyrecorded.Name = "QtyRecorded";
            dgvDetials.Columns.Add(qtyrecorded); //inserts new column into dgv

            //populate scrap, rework and quantity counts
            foreach (DataGridViewRow row in dgvDetials.Rows) //loop through each of the results
            {
                string scrapDate, scrapShift, PartCode;
                scrapDate = dtpInspectionDate.Value.ToString("MM/dd/yyyy");
                scrapShift = cbShift.Text;

                PartCode = row.Cells[0].Value.ToString();

                //define each of the counts
                int qtyInspCount = SQLMethods.CountQtyInspTotal(scrapDate, scrapShift, area, PartCode);
                int scrapCount = SQLMethods.CountScrapReworkTotal(scrapDate, scrapShift, area, PartCode, "S");
                int reworkCount = SQLMethods.CountScrapReworkTotal(scrapDate, scrapShift, area, PartCode, "R");

                //populate each of the counts cells
                row.Cells[2].Value = 0;
                row.Cells[5].Value = qtyInspCount;
                row.Cells[3].Value = scrapCount;
                row.Cells[4].Value = reworkCount;
            }

            //format dgv
            //dgvDetials.Columns[0].ReadOnly = true; //sets cell to read only so cannot be edited
            //dgvDetials.Columns[0].HeaderText = "Die Number"; //column header
            //dgvDetials.Columns[0].Width = 80; //column width
            dgvDetials.Columns[1].ReadOnly = true;
            dgvDetials.Columns[1].HeaderText = "Die Description";
            dgvDetials.Columns[1].Width = 150;
            dgvDetials.Columns[0].ReadOnly = true;
            dgvDetials.Columns[0].HeaderText = "Part Code";
            dgvDetials.Columns[0].Width = 90;
       //   dgvDetials.Columns[2].HeaderText = "Machine";
       //   dgvDetials.Columns[2].Width = 80;
            dgvDetials.Columns[2].HeaderText = "Quantity Inspected";
            dgvDetials.Columns[2].Width = 90;
            dgvDetials.Columns[3].ReadOnly = true;
            dgvDetials.Columns[3].HeaderText = "Scrap";
            dgvDetials.Columns[3].Width = 80;
            dgvDetials.Columns[4].ReadOnly = true;
            dgvDetials.Columns[4].HeaderText = "Rework";
            dgvDetials.Columns[4].Width = 80;
            dgvDetials.Columns[5].ReadOnly = true;
            dgvDetials.Columns[5].HeaderText = "Quantity Inspected Recorded";
            dgvDetials.Columns[5].Width = 90;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error retirieving data and setting up grid view. Processed with error: " + ex.Message);
        }
    }    //inserts figures into database
string area, inspDate, inspShift, partNo, dieCode, comment, machine;
int qtyInsp;

try
{
  foreach (DataGridViewRow row in dgvDetials.Rows) //loop through each of the rows in the dgv
  {
    int intQtyInsp;
    if (Convert.ToString(row.Cells[3].Value) == "") //if the machine column is empty
    {
      intQtyInsp = 0; //quantity inspected is 0\. Allows for current quantity to be displayed while not reinserting
    }
    else if (row.Cells[4].Value.ToString() == "") //if quantity inspected is empty
    {
      intQtyInsp = 0; //quantity inspected is 0\. Prevents null value errors.
    }
    else
    {
      intQtyInsp = Int32.Parse(row.Cells[4].Value.ToString()); //sets quantity inspected to value entered
    }

    if (intQtyInsp == 0) //if quantity inspected is 0\. Ignore row.
    {
    }
    else //else gather details and insert row as production.
    {
      area = dtArea.Rows[cbArea.SelectedIndex]["area_code"].ToString();
      inspDate = dtpInspectionDate.Value.ToString("MM/dd/yyyy");
      inspShift = cbShift.Text;
      partNo = row.Cells[2].Value.ToString();
      dieCode = row.Cells[0].Value.ToString();
      qtyInsp = intQtyInsp;
      comment = "";
      machine = row.Cells[3].Value.ToString();

      SQLMethods.insertProduction(area, inspDate, inspShift, partNo, dieCode, qtyInsp, comment, machine);
    }
  }

  retrieveData(); //reset values
}
catch (Exception ex)
{
  MessageBox.Show("Error instering production values. Processed with error: " + ex.Message);
} 
```

# sql-server-2008 - powerbuilder datawindow 验证记录

> ID：12038072
> 
> 赞同：1
> 
> 时间：2012-08-20T12:54:18.953
> 
> 标签：sql-server-2008, powerbuilder, datawindow

使用 powerbuilder classic 12.5 和 sql server 2008 将近 3 个月，并且运行良好。
我正在创建一个使用汽车注册号作为主键的汽车租赁系统。

我需要获取汽车的详细信息并确保registration_number 不可用。这里的代码不起作用，但容量的代码可以解决......

1.  代码有什么问题？请提供另一种可行的方法。

2.  如果我不单击“容量”列并单击保存，程序会继续并保存记录，即使它是一个空字段。我如何避免这种情况。

    ```
     String car_registration_number
     car_registration_number = dw_newvehicle.GetItemString( Row, "registration_number" )
     long error_code = 0
     string  column
     column = dwo.name
     choose case column
        case "registration_number"
            if data = car_registration_number THEN
                messagebox("validation error", "You cannot available regno")
                error_code = 1   
            end if
        case "capacity"
            if integer(data) >10 then 
               messagebox("validation error", "a car's capacity cannot be more than 10...")
             error_code = 1  
            end if
     end choose
     return error_code 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:29:18.720

而不是`GetItemString`在顶部，您需要在 DataWindow 中查找数据中的注册号一两次。如果第一个`find`返回 0，你就可以了。如果它返回当前行，您需要从行搜索到最后一行，除非您在最后一行，如果您正在插入，您可能会这样做。但是，我不会那样做，因为它不能在多用户环境中工作。相反，您应该继续插入该行，然后如果您遇到重复键错误，请告诉用户注册号已经在系统中。如果用户要输入大量数据，您可以`SELECT`在用户输入时尝试从数据库中获取注册号，但您仍然必须能够处理重复键错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:27:43.633

1.  我不明白你在这里做什么样的检查`registration_number`：你正在获取 DW 中列的当前值，`car_registration_number`然后你正在与修改的值进行比较（代码来自`itemchanged`事件？）。您是否希望输入一个与当前值不同的值？

    还要注意`GetItemString`如果列的类型不是文本（因为它被称为 ..._number），因为 PB 可能会崩溃，返回一些空值或静默失败（取决于当时的 PB 情绪；）。如果你得到一个空值，你的`if`检查总是会失败。

    如果要获取数值，请`GetItemNumber`改用。

2.  您可以将`capacity`列设置为`not null`在您的数据库中。保存 DW 时，您将收到一条错误消息，提示您未设置一些必需的值。

    一个更好的主意是在`UpdateStart`事件中迭代作为表主键成员的列并检查它们是否已设置。

    要编写一些动态代码，您可以在运行时通过描述`datawindow.column.count`然后检查 pk 成员`#1.key`（将 #1 替换为 #2、#3、...）从 DW 中获取列，如果必须对该列进行检查。

# git - Git：是否可以伪造标签的签名日期？

> ID：12038073
> 
> 赞同：14
> 
> 时间：2012-08-20T12:54:20.723
> 
> 标签：git, security, gnupg

作为一名科学家，我想保留一些我在 Git 存储库中检查某些内容的时间的官方记录。这是为了后来在专利纠纷中支持谁首先发明了什么的主张。

目前我不时向我的存储库添加一个标签，如下所示：

```
git tag -s -m "`date`" 2012-08-20 
```

并将标签推送到中央服务器：

```
git push --tags 
```

拉出一个标签会显示我用我的密钥签署它的日期：

```
git tag -v 2012-08-20
object 2d6f6035270e8e44c035431e99be8da3fccee095
type commit
tag 2012-08-20
tagger My Full Name <name@institution> 1345466433 +0200

Mon Aug 20 14:40:33 CEST 2012
gpg: Signature made Mon Aug 20 14:40:37 2012 CEST using RSA key ID somekey
gpg: Good signature from "My Full Name <name@institution>"
gpg:                 aka "My Full Name <personal-email>" 
```

我的问题是这些日期有多安全？以后有可能篡改它们吗？

编辑：为了进一步澄清，我希望能够证明我以后篡改标签的可能性很小。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T13:54:17.217

Git 保证的是：如果日期（或标签的其余部分，或附加到它的提交等）发生更改，则标签的 SHA1 将更改。

然而，为了使它有用，*您必须以某种方式证明原始 SHA1 标签是什么，并且您在声称的发明日期已经拥有它*。

否则，为了欺骗性地声称您在 1980 年 1 月发明了某些东西，您可以将计算机的日期倒回到 1980 年，并使用必要的提交、标签和所有内容创建存储库 - git 不会知道，因为它只能相信系统时钟告诉的信息它。

因此，如果您想证明您在过去某个日期之前发明/编写了某些东西，git（单独）无法帮助您，任何形式的单独签名也无法帮助您。您需要的是[Trusted timestamping](http://en.wikipedia.org/wiki/Trusted_timestamping)。有各种不同的方案，但都需要一个或多个第三方来保证时间戳的正确性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:17:39.987

您想要的是 Ryan J 在这个最近的线程中描述的经过认证的时间戳[如何使用 RFC3161（可信）时间戳来证明我的 Git 存储库中提交的年龄？](https://stackoverflow.com/q/11913228/717355)

这似乎是一种经过认证的、经过验证的记录相关提示提交的 sha1 的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-26T08:16:37.047

[你可以使用http://www.proofofexistence.com/](http://www.proofofexistence.com/)之类的服务将你的 git commit sha1 嵌入到比特币区块链中。

# visual-c++ - cuda内核以下语法的含义

> ID：12038074
> 
> 赞同：6
> 
> 时间：2012-08-20T12:54:21.637
> 
> 标签：visual-c++, cuda, opencl

以下语法的含义是什么：

```
Kernel_fun<<<256, 128, 2056>>>(arg1, arg2, arg3); 
```

哪个值表示工作组，哪个值表示线程。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T16:59:10.107

来自[CUDA Programming Guide](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#execution-configuration)的附录 B.22（截至 2019 年 5 月）：

> 通过在函数名称和带括号的参数列表之间插入 <<< Dg, Db, Ns, S >>> 形式的表达式来指定执行配置，其中：
> 
> *   Dg 是 dim3 类型（参见第 B.3.2 节）并指定网格的尺寸和大小，使得 Dg.x * Dg.y * Dg.z 等于正在启动的块数；对于计算能力为 1.x 的设备，Dg.z 必须等于 1；
>     
>     
> *   Db 是 dim3 类型（参见第 B.3.2 节），并指定每个块的维度和大小，使得 Db.x * Db.y * Db.z 等于每个块的线程数；
>     
>     
> *   Ns 是 size_t 类型，指定除了静态分配的内存之外，每个块动态分配的共享内存中的字节数；这个动态分配的内存被任何声明为外部数组的变量使用，如第 B.2.3 节所述；Ns 是一个可选参数，默认为 0；
>     
>     
> *   S 是 cudaStream_t 类型并指定关联的流；S 是一个可选参数，默认为 0。

简而言之： `<<< number of blocks, number of threads, dynamic memory per block, associated stream >>>`

# php - 更新属性不起作用

> ID：12038079
> 
> 赞同：0
> 
> 时间：2012-08-20T12:54:32.653
> 
> 标签：php, sphinx

我对 UpdateAttributes 有疑问，它似乎对我不起作用。当我发出：

```
$ret = $sphinx->UpdateAttributes ( "products", array ("status"), array(506607786 => array(10)) ); 
```

它返回 1，但搜索仍将状态作为旧值返回。

当我尝试

```
$ret = $sphinx->UpdateAttributes ( "products", array ("status", "image_id"), array(506607786 => array(10, 6666)) ); 
```

它返回 0（假）

这个功能还能用吗？

好的，我发现（sphinx 文档很难看）当从 PHP 应用程序发出 updateAtrributes() 时，我不会在搜索命令行中看到结果。然而，一个问题仍然存在 - 我无法在一个 updateAtrributes() 中更新 2 个属性 - 单独它们很好 - 任何线索为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:03:02.640

当`UpdateAttributes`返回`0`（不是假的）时，它并不意味着它没有工作，这意味着它没有找到任何要更新的东西，基本上没有提交更新。的返回`-1`实际上意味着此功能不起作用。

确保它`506607786`实际上是`id`您的 Sphinx 索引中的一个，并且那`products`是您的索引的名称。

为了使问题更有帮助，您可以提供表格中的示例行，最好是在此函数中使用的定义为`506607786`. 您还可以提供一整套代码以使其更容易。

附带说明：`UpdateAttributes`不像实时索引。您需要在查询中专门过滤这些属性，以便 sphinx 考虑它们的新值。

# android - 将电话铃声转移到耳机

> ID：12038082
> 
> 赞同：1
> 
> 时间：2012-08-20T12:54:47.303
> 
> 标签：android, phone-call, ringtone, speaker, headphones

当有电话时，如果我使用我的耳机，我希望铃声的声音通过耳机。在此应用程序`setSpeakerphoneon()`中无法正常工作，还有其他想法可以在来电时通过耳机流式传输铃声吗？

PS：我使用sdk 2.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:16:27.227

如果您连接了有线配件，我见过的每一个 Android 实现都会将铃声路由到扬声器 + 有线耳机/耳机。如果您希望仅在有线配件中播放铃声，您应该可以使用[AudioManager.setRingerMode()](http://developer.android.com/reference/android/media/AudioManager.html#setRingerMode%28int%29)（使用`RINGER_MODE_VIBRATE`或`RINGER_MODE_SILENT`）来完成。
不过，这对用户来说可能是不受欢迎的，尤其是在没有连接有线配件或用户的耳朵中没有耳塞的情况下。

# c++ - C++ 最大有效内存地址

> ID：12038084
> 
> 赞同：12
> 
> 时间：2012-08-20T12:54:49.427
> 
> 标签：c++, pointers

我经常看到添加一个值的代码，例如一个指针的长度，然后使用这个值，例如

```
T* end = buffer + bufferLen;//T* + size_t

if (p < end) 
```

但是，缓冲区是否可能已分配到足够接近“buffer + bufferLen”可能溢出的内存末尾（例如 0xFFFFFFF0 + 0x10），即使 p 是有效的元素地址，也会导致“p < end”为假（例如 0xFFFFFFF8）。

如果可能的话，当我看到许多与开始/结束范围一起工作的事情时，如何避免在最后一个元素之后结束下一个元素

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T13:03:16.297

从标准：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 5.9 关系运算符 [expr.rel]
> 
> 如果两个指针指向同一个数组的元素或一个超出数组末尾的元素，则指向具有较高下标的对象的指针比较高。

所以你不必担心；一致的实现将确保过去指针与数组的其余部分正确比较。此外，

> ### 3.7.4.1 分配函数[basic.stc.dynamic.allocation]
> 
> [...] 返回的指针应适当对齐，以便可以将其转换为具有基本对齐要求 (3.11) 的任何完整对象类型的指针，然后用于访问分配的存储中的对象或数组 [.. .]

这意味着返回的指针应该能够被视为指向适当大小数组开头的指针，因此 5.9 继续成立。如果分配函数调用是调用`operator new[]`(5.3.4:5) 的结果，就会出现这种情况。

实际上，如果您在一个平台上，可以想象分配器（不合规地）返回一个以 结尾的内存块`0xFFFFFFFF`，那么在大多数情况下，您可以编写

```
if (p != end) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:57:21.067

连续内存分配的元素不可能有不连续的地址。`end`总是有一个比 值更高的地址`start`。

例如，如果分配恰好在 0xFFFFFFFF 结束，意思`end`是 0x00000000，这将是一个错误，应该修复代码以适应这种情况。

尽管在某些平台上，这种情况在设计上是不可能的，但为了简单起见，它可能是逻辑上的合理妥协。例如，我会毫不犹豫地编写`if(p < end)`Windows 用户模式应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:02:20.637

没错，在许多`[start, end)`配对算法中，端点都*超过*了最后一个有效条目。但是您的实现不应该*取消引用* `end`，实际访问的最后一个条目应该是`end-1`，保证在有效区域中。如果您的算法取消引用`*end`，那么就是一个错误。事实上，有一些测试分配器有意将区域放置在有效页面的最后一个字节上，紧接着是一个未分配的区域。使用这样的分配器，取消引用的算法`*end`将导致保护错误。

> [`FLG_HEAP_PAGE_ALLOCS`](http://technet.microsoft.com/en-us/library/cc779664%28v=ws.10%29)
> 
> 打开页堆调试，它会验证动态堆内存操作，包括分配和释放，并在检测到堆错误时导致调试器中断。
> 
> 此选项在为图像文件设置时启用整页堆调试，在系统注册表或内核模式中设置时启用标准页堆调试。
> 
> *   全页堆调试（用于 /i）在分配结束时放置一个不可访问的页。
>     
>     
> *   标准页堆调试（用于 /r 或 /k）在分配被释放时检查分配。
>     
>     
> 
> 为图像文件设置此标志与在命令行中为图像文件键入 gflags /p enable /full 相同

至于指针溢出的问题：没有操作系统分配包含 VA 地址 0xFFFFFFFF 的页面，同样没有操作系统分配包含 0x00000000 的页面。为了发生这种溢出， 的大小`*start`必须足够大，以便`start+1`在有效范围结束时跳过所有保留的 VA。但在这种情况下，分配给的地址`start`应该至少比最后一个有效的 VA 地址低一个这样的大小*，*这意味着`start+1`将是有效的（`start+N`只要`start`分配为 ，它也总是有效的`sizeof(*start)*N`）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T12:57:07.177

别担心。您的分配器（可能是`new`，但也可能是其他东西）不会给您提供如此接近内存结尾的东西，以至于它环绕。

而是担心边界检查。你永远不会得到一个像这样环绕的分配，所以只要你不溢出数组（无论如何都有未定义的行为），你最终不会环绕。

还需要注意的是，为内核保留了大块的进程地址空间。在大多数操作系统上，这个高阶区域是保留的。

# javascript - 检测未绑定的本机函数，如“Array.push”？

> ID：12038085
> 
> 赞同：0
> 
> 时间：2012-08-20T12:54:52.643
> 
> 标签：javascript

请注意以下事项：

```
function array_map(array, callback) {
    for (var i = 0; i < array.length; i += 1) {
        callback(array[i]);
    }
}
var a = [], b = [];

array_map([1, 2, 3], function (x) { a.push(x); });
// just gives a = [1, 2, 3] as expected

// but why does this not work: ?
array_map([1, 2, 3], b.push);
// Chrome: a = [], Firefox: can't convert undefined to object 
```

我**确实**理解为什么会发生这种情况，即：如果您直接将其传递给，`push`则不再绑定到（而是绑定到全局对象） 。我真的不明白为什么 Chrome 没有给出错误，至少 Firefox 似乎给出了某种错误。`b``array_map`

**如何检测是否传递了这样的函数`array_map`以避免此类*错误*？**

我希望有先进的反射技术可用于追踪函数的起源。例如`b.push.constructor`给`Function`，但这不是我要找的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:57:57.823

~~我不确定你期望那里发生什么。`Array.prototype.map`需要一个函数作为第二个参数，它为每次迭代返回一个**新**值。~~

~~仅传入一个函数引用（您在第二个示例中所做的）并不能告诉该函数它必须做什么。所以你有点期待`.map()`应用一些黑魔法并使用正确的参数调用传入的方法，这显然是做不到的。~~

我完全不明白您编写了自己的映射函数。但是，您的问题是您正在失去该功能的*范围。*`.push()`只有当你在`Array / Object`like上调用它时`xxx.push()`，`this`被调用函数中的 才会正确引用目标对象。一旦您刚刚通过了引用，`this`它将指向*全局*/`window`或`undefined`将不再工作。

所以解决这个问题，你可以这样称呼它

```
array_map([1, 2, 3], b.push.bind(b)); 
```

这也将应用 ES5 功能。您无法在`array_map()`. 函数就是函数，最好的方法是检测传入的方法是否是本机方法，但我不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:09:23.817

问题是，Javascript 没有“方法”之类的东西——一个专门绑定到某个对象的函数。在您的第一个示例中，您传递了一个调用`a.push`. `this`绑定到`a`这里是因为你直接在 a 上调​​用它。

在您的第二个代码中，您只需传递`push`没有上下文的函数`b`-`this`将绑定到执行上下文，即 gloabl 对象。

您需要绑定函数的上下文，如下所示：

```
array_map([1, 2, 3], b.push.bind(b)); 
```

或 jQuery 的`proxy()`. 目前我找不到另一个简单的解决方案，而是直接在第三个参数中交出上下文：`function array_map(array, callback, context)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:17:32.843

通常这些类型的函数将允许您设置回调的上下文。

如果您更改 array_map 函数以接受上下文，那么它将像这样工作。

```
function array_map(array, callback, context) {
    for (var i = 0; i < array.length; i += 1) {
        callback.call(context, array[i]);
    }
}
var b = [];

// now the push method is called from the b context
array_map([1, 2, 3], b.push, b); 
```

# exception-handling - 检索 ajax 调用的异常消息

> ID：12038089
> 
> 赞同：0
> 
> 时间：2012-08-20T12:55:06.893
> 
> 标签：exception-handling, asp.net-ajax

我正在从客户端对页面中的 Web 方法进行不同的 ajax 调用。有些方法在某些情况下会抛出异常。我希望能够向用户显示异常消息。

我发现我可以使用“ `<customerrors mode= Off>`”但也可以使用这种方法[如何将自定义异常消息返回给 Ajax 调用？](https://stackoverflow.com/questions/11128470/how-to-return-custom-exception-message-to-ajax-call)

第二个在 JS 中似乎有很多额外的编码，但我不知道第一个在生产环境中是否可以接受。

你能给我建议吗！谢谢你。

编辑：示例：我正在添加一个新用户，并且我的数据库中的验证表明它已经存在，我希望能够在 div/span/label （在 jquery 对话框中）但在同一页面中显示消息并且没有页面回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:07:34.643

创建一个 Error.aspx 页面并在 global.asax 代码文件中写入以下代码。

```
 void Application_Error(object sender, EventArgs e)
    {
                // Code that runs when an unhandled error occurs

                string ErrorMessage = Server.GetLastError().ToString();
                Session[ErrorMessage] = ErrorMessage;
                Server.ClearError();
                Response.Redirect("~/Error.aspx");   
    } 
```

在您的 Error.aspx 页面上写入 Session[ErrorMessage]。

每当 Web 应用程序中发生异常时，您都会收到异常消息，它会显示在 Error.aspx 页面上。

# c# - 无法获取，从包含在 wpf MVVM 中动态生成的单选按钮的列表框中设置 selectedItem

> ID：12038101
> 
> 赞同：0
> 
> 时间：2012-08-20T12:55:56.387
> 
> 标签：c#, wpf, mvvm

我正在尝试使用自定义为切换按钮的动态单选按钮填充列表框。如上所述，我可以使用单选按钮填充列表框项目。但是，一旦我们选择了任何单选按钮，就无法在调试时从我的视图模型对象的单选按钮列表中设置所选项目。

以下是我的资源目录下的xaml代码

```
 <Style x:Key="ScreensList" TargetType="{x:Type ListBox}">
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="Margin" Value="2, 2, 2, 0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Border Background="Transparent">
                                <RadioButton
                               VerticalAlignment="Center" GroupName="{Binding RelativeSource={RelativeSource TemplatedParent}}" 
                                IsChecked="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent},Mode=TwoWay}">
                                    <RadioButton.Template>
                                        <ControlTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <ToggleButton  IsChecked="{Binding IsChecked, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}">
                                                    <StackPanel Width="80" Height="60" Orientation="Vertical" HorizontalAlignment="Left" Margin="10,10,20,10">
                                                        <Image Source="Default.png" Height="40"></Image>
                                                        <TextBlock Text="{Binding Path=ScreenNumber}" FontSize="11"></TextBlock>
                                                    </StackPanel>
                                                </ToggleButton>
                                            </StackPanel>
                                        </ControlTemplate>
                                    </RadioButton.Template>
                                </RadioButton>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

以下是我在 xaml 页面中的 xaml 代码

```
 <ListBox x:Name="ScreensList" ItemsSource="{Binding ScreenCollection}" 
                SelectedItem="{Binding Path=ScreenManager}" 
                  Style="{StaticResource ScreensList}" Width="365">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel FlowDirection="LeftToRight"  Orientation="Horizontal" >
                    </WrapPanel>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox> 
```

以下是viewmodel.cs

```
 public ObservableCollection<ScreensManager> ScreenCollection { get; set; }

    private ScreensManager _screenManager;

    public ScreensManager ScreenManager
    {
        get { return _screenManager; }
        set
        {
            if (_screenManager != value)
            {
                if (_screenManager != null)
                {
                    _screenManager = value;

                }
            }
        }
    }

 private void AddScreens()
    {
        int screenCount = Screen.AllScreens.Length;

        if (ScreenCollection == null)
            ScreenCollection = new ObservableCollection<ScreensManager>();
        for (int screenCounter = 1; screenCounter <= screenCount; screenCounter++)
        {
           if (screenCounter == 1)
           { 
            _screenManager = new ScreensManager();
            _screenManager.ScreenNumber = screenCounter;
            ScreenCollection.Add(_screenManager);
           }
        }
    } 
```

以下是我的 ScreenManager.cs 模型类文件中的代码

```
 public ScreensManager()
   {

   }

   private int _screenNumber;
   public int ScreenNumber
   {
       get { return _screenNumber; }
       set
       {
           _screenNumber = value;
           OnPropertyChanged("ScreenNumber");
       }
   }

   private bool _selectedScreen;
   public bool SelectedScreen
   {
       get { return _selectedScreen; }
       set
       {
           if (_selectedScreen = value)
           {
               _selectedScreen = value;
               if (_selectedScreen != value)
               {
                   OnPropertyChanged("SelectedScreen");

               }
           }
       }
   }

    private void OnPropertyChanged(string propName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }
    public event PropertyChangedEventHandler PropertyChanged; 
```

我无法找到我真正出错的地方，因为对 mvvm 来说是全新的，请有人帮我解决我的问题..提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:53:05.480

你`SelectedScreen`是类型的`bool`，应该是类型的`ScreensManager`

Your`ListBox.ItemsSource`绑定到`ObservableCollection<ScreensManager>`，这意味着您`ListBox`包含`ScreensManager`对象的集合，但是您`SelectedItem`的类型是`bool`。bool 对象永远不会等于`ScreensManager`对象，因此 WPF 不会选择任何内容，因为`SelectedItem`在`ItemsSource`.

`SelectedScreen`将类型更改为，`ScreensManager`而不是`bool`，并确保它等于 中存在的项目`ScreenCollection`。WPF 通过引用而不是值来比较对象，所以

```
ScreenManager.SelectedScreen = ScreenCollection.FirstOrDefault(); // Works
ScreenManager.SelectedScreen = new ScreensManager() { ... }; // Won't work 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:30:35.497

确保绑定处于双向模式：

```
SelectedItem="{Binding Path=ScreenManager.SelectedScreen, Mode=TwoWay}" 
```

# c++ - 单击上下文菜单项时运行程序

> ID：12038103
> 
> 赞同：0
> 
> 时间：2012-08-20T12:55:58.707
> 
> 标签：c++, windows, windows-7, windows-shell

单击 shell 扩展中的上下文菜单项时，如何运行程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:00:56.537

您可以调用一个 CreateProcess 函数。查看[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)和[示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682512%28v=vs.85%29.aspx)

# iphone - 在 PAN 手势状态结束的触摸次数在 iOS 中未获得

> ID：12038108
> 
> 赞同：0
> 
> 时间：2012-08-20T12:56:18.453
> 
> 标签：iphone, objective-c

我在图像视图中实现了平移手势。我将触摸次数设置为 2。

当用户开始平移时，它将进入 if ([sender state] == UIGestureRecognizerStateBegan ) 以及 if (sender.numberOfTouches == 2) 并且我将触摸次数设为 2。

但是当用户结束它正在进入的平底锅时 ([sender state] ==UIGestureRecognizerStateEnded ) 但没有进入 if (sender.numberOfTouches == 2) 并且 end 中的 no:of Touches 给出为 0;

我一次又一次地测试以确保触摸何时用两根手指结束，但结束的结果为零。

谁能帮我解决这个问题。请指导我哪里出错了。

我完全卡在了这一点上。

```
- (void)panGestureHandler:(UIPanGestureRecognizer *)sender
{

    if ([sender state] == UIGestureRecognizerStateBegan ) {
        gesture_ = [[SSGesture alloc]init];

        if (sender.numberOfTouches == 2) {
            startLocation = [sender locationInView:self.view];

            CGPoint firstPoint = [sender locationOfTouch:0 inView:self.imageView];
            initialPointOne.x = [NSString stringWithFormat:@"%.0f",firstPoint.x];
            initialPointOne.y = [NSString stringWithFormat:@"%.0f",firstPoint.y];
            initialPointOne.index = @"1";

            CGPoint secondPoint = [sender locationOfTouch:0 inView:self.imageView];
            SSCoordinate *initialPointTwo = [[SSCoordinate alloc]init];
            initialPointTwo.x = [NSString stringWithFormat:@"%.0f",secondPoint.x];
            initialPointTwo.y = [NSString stringWithFormat:@"%.0f",secondPoint.y];
            initialPointTwo.index = @"2";

            gesture_.initialSet = [[NSArray alloc]initWithObjects:initialPointOne,initialPointTwo, nil]; 
        }
    } else if ([sender state] ==UIGestureRecognizerStateEnded ) {
        NSLog(@"dsfssdf %d",sender.numberOfTouches);

        if (sender.numberOfTouches == 2){

            SSCoordinate *firstPoint = [gesture_.initialSet objectAtIndex:0];

            CGPoint offset = [sender translationInView:self.imageView];

            // SSCoordinate *finalPoint = [[SSCoordinate alloc]init];
            finalPoint.x = [NSString stringWithFormat:@"%.0f",[firstPoint.x floatValue] + offset.x];
            finalPoint.y = [NSString stringWithFormat:@"%.0f",[firstPoint.y floatValue] + offset.y];

            SSCoordinate *secondPoint = [gesture_.initialSet objectAtIndex:1];

            SSCoordinate *finalPointTwo = [[SSCoordinate alloc]init];
            finalPointTwo.x = [NSString stringWithFormat:@"%.0f",[secondPoint.x floatValue] + offset.x];
            finalPointTwo.y = [NSString stringWithFormat:@"%.0f",[secondPoint.y floatValue] + offset.y];

            gesture_.finalSet = [[NSArray alloc]initWithObjects:finalPoint,finalPointTwo, nil];

            if ([gesture_.initialSet count] && [gesture_.finalSet count]) {
                [self handleGestureEventWebserviceForGesture:@"pan" withGestureObject:gesture_ andframeId:currentFrame_];
            }
        } 
    }                
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:22:52.840

它结束了，我相信这是预期的行为。

触摸结束了，所以没有更多的手指在触摸它，对吧？在我看来，它将永远如此。

如果您希望您的事件仅在用户用两根手指触摸时处理事件，最好的选项是在您的手势处理程序中设置它。

像这样的东西：

```
UIPanGestureRecognizer* p = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureHandler:)];
[p setMaximumNumberOfTouches:2];
[p setMinimumNumberOfTouches:2];
[yourView addGestureRecognizer:p]; 
```

# android - 从-连续-后台线程更新android ui的推荐方法是什么？

> ID：12038111
> 
> 赞同：0
> 
> 时间：2012-08-20T12:56:23.697
> 
> 标签：android, multithreading, user-interface

我在这个主题上读得足够好，以至于完全困惑。我正在做一个锻炼跟踪器应用程序，例如 RunKeeper，它跟踪用户说跑步的时间和距离。我正在编写这个“锻炼”的主界面，它显示了一个类似秒表的布局，其中包括一个显示每秒更新时间的计时器和一个显示他到目前为止跑了多远的计数器。

我的问题是更新界面。我有一个秒表类来跟踪时间，并且我根据 gps 位置计算距离，但是我找不到推荐的方法来在后台运行连续线程，以固定的时间速率更新 ui .

据我所知，我应该要么在活动类中实现 Handler.Callback 接口，要么有一个单独的回调对象和一个线程，但我对如何获取有点不知所措这一切都要一起工作。我都需要更新我从秒表类获得的时间（简单的开始/停止时间计算，与线程无关），以及根据 onLocationChanged() 中收到的位置计算的距离。

这是我的活动代码的精简版本：

```
public class WorkoutActivity extends Activity implements OnClickListener, LocationListener
{
    private LocationManager locManager;
    private boolean workoutStarted = false;

    // The TextViews to update
    private TextView timeLabel;
    private TextView distanceLabel;

    private Stopwatch stopwatch;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        /*
            ... Interface initialisation
        */
        stopwatch = new Stopwatch();
    }

    private void startWorkout() {/* ...*/}
    private void stopWorkout()  {/* ...*/}
    private void pauseWorkout() {/* ...*/}
    private void resumeWorkout(){/* ...*/}
    public void onClick(View v) {/* ...*/}
    public void onLocationChanged(Location location){/* ...*/}
} 
```

根据我在这里读到的大多数答案，我应该使用扩展 handleMessage 方法的 Handler 对象，但是现在（至少根据 Lint 中的警告）你必须使这些对象静态以避免内存泄漏。但是，这使得从 Handler 中直接访问和更改活动类中的其他私有对象有点奇怪。我想你可以通过让你需要的对象影响扩展 Handler 的类中的参数来解决这个问题，但我不知道，这感觉有点像“hack”（WorkoutActivity 中的嵌套类）：

```
static class TimeHandler extends Handler
{
    static final int MSG_START_TIMER = 1;
    static final int MSG_UPDATE_TIMER = 2;
    static final int MSG_STOP_TIMER = 3;

    private static final int REFRESH_RATE = 1000;

    private Stopwatch stopwatch;
    private TextView timeLabel;

    public TimeHandler(Stopwatch stopwatch, TextView label)
    {
        this.stopwatch = stopwatch;
        this.timeLabel = label;
    }

    @Override
    public void handleMessage(Message msg)
    {
        super.handleMessage(msg);

        switch(msg.what)
        {
            case MSG_START_TIMER:
                stopwatch.start();
                this.sendEmptyMessage(MSG_UPDATE_TIMER);
                break;
            case MSG_UPDATE_TIMER:
                timeLabel.setText(stopwatch.getElapsedTimeString());
                this.sendEmptyMessageDelayed(MSG_UPDATE_TIMER, REFRESH_RATE);
                break;
            case MSG_STOP_TIMER:
                this.removeMessages(MSG_UPDATE_TIMER);
                stopwatch.stop();
                timeLabel.setText(stopwatch.getElapsedTimeString());
                break;
        }           
    } 
```

那么，任何人都可以解释从连续后台线程更新 UI 的“标准”方式吗？哦，很抱歉这个长问题，只是想彻底。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:06:23.637

使用[`runOnUiThread()`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29).

定义一个`Runnable`：

```
private Runnable mRunnable = new Runnable() {
    @Override
    public void run() {
        mTextViewOne.setText("10 miles!");
        mTextViewTwo.setText("40 minutes!");
    }
}; 
```

在你的连续线程内：

```
runOnUiThread(mRunnable); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T13:09:04.083

在 AsyncTask 中使用以下线程......我希望这对你有用......

```
 Handler mHandler;
private final Runnable mRunnable = new Runnable() {

        public void run() {
            Call your AsyncTask Class;;;;
            mHandler.postDelayed(mRunnable, 1000);
        }

    }; 
```

# google-places-api - 地方库返回无法验证提供的 URL。请检查您的客户端和签名参数

> ID：12038117
> 
> 赞同：1
> 
> 时间：2012-08-20T12:56:37.880
> 
> 标签：google-places-api

我有一个简单的谷歌地方库实现。

```
var place_service = new google.maps.places.PlacesService(map);
place_service.search(request, place_callback); 
```

如果浏览器 (Chrome) 保持打开数天且未触动，它将停止工作。在尝试下一次搜索时，我从库搜索调用中收到 403 错误。

> 无法验证提供的 URL。请检查您的客户端和签名参数。

这是捕获的请求[URL](https://maps.googleapis.com/maps/api/js/PlaceService.FindPlaces?1m6&1m2&1d39.3949084235794&2d-87.69731253091982&2m2&1d39.4038915764206&2d-87.68568746908022&2sen-US&6sbicycle_store&6sbook_store&6sclothing_store&6sconvenience_store&6sfurniture_store&6shardware_store&6sjewelry_store&6sliquor_store&6spet_store&6sshoe_store&6sshopping_mall&6sstore&6sdepartment_store&6shome_goods_store&6selectronics_store&callback=_xdc_._1ij4pa&token=17871)：

关闭浏览器并重新启动修复程序。

还有一个具有相同实现的移动 HTML 移动应用程序（iOS、Android）。应用程序位置功能也会在几天后停止工作。必须杀死应用程序并重新启动才能修复。

好像有什么要过期了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:16:57.433

这是正常行为，`token`请求中的参数可能会在几个小时后过期。如果页面或应用程序已休眠超过几个小时，我建议在用户返回时发出页面刷新。

# linux - 比较两个目录中的所有文件内容

> ID：12038123
> 
> 赞同：3
> 
> 时间：2012-08-20T12:56:48.580
> 
> 标签：linux, perl, unix

我需要比较两个目录中存在的文件列表。需要检查两个目录内容是否相同数量的文件以及两个目录中所有文件的内容是否相同

假设如果文件位置存在，我可以比较两个文件是否具有相同的内容。

我需要检查两个目录内容是否相同。

> 用例：检查软件的升级，其中一个目录包含新安装软件时生成的所有日志文件，另一个目录包含从较低版本升级软件时生成的所有日志文件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T13:00:45.147

这是我要做的：

```
diff -r --brief dir1 dir2 
```

# node.js - NodeJs - 使用 redis，用 express 连接 redis

> ID：12038128
> 
> 赞同：12
> 
> 时间：2012-08-20T12:57:06.217
> 
> 标签：node.js, express, redis

**注意 对于那些在 Redis 中苦苦挣扎的人，必须启动 Redis 服务器。在 Windows 上，有一个 redis 发行版，请查看以下链接：[https](https://github.com/dmajkic/redis/downloads) ://github.com/dmajkic/redis/downloads然后通过启动“redis-server.exe”启动服务器**

我正在关注关于 node.js 的教程。本教程使用 Express 和 Redis。我安装了 redis 和 connect-redis（它们在 package.json 中被引用）：

```
npm install redis connect-redis --save 
```

在我的 server.js 中（仅有意义的部分）：

```
var express = require('express');
var http = require('http');
var app = module.exports = express();
var RedisStore = require('connect-redis')(express);

var redis = require("redis").createClient();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  console.log('views', __dirname + '/views');
  app.set('view engine', 'jade'); //jade as template engine
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({
      secret: "kqsdjfmlksdhfhzirzeoibrzecrbzuzefcuercazeafxzeokwdfzeijfxcerig",
      store: new RedisStore({ host: 'localhost', port: 3000, client: redis })
  }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

错误信息：

```
Express server listening on port 3000
[ERROR] Error
Error: Redis connection to 127.0.0.1:6379 failed - connect ECONNREFUSED
    at RedisClient.on_error (D:\Programming\Screencasts\peepcode\nodejs\peepcode
-069-full-stack-nodejs-i-mov\code\roland\HotPie\node_modules\redis\index.js:140:
24)
    at Socket.<anonymous> (D:\Programming\Screencasts\peepcode\nodejs\peepcode-0
69-full-stack-nodejs-i-mov\code\roland\HotPie\node_modules\redis\index.js:74:14)

    at Socket.EventEmitter.emit (events.js:88:17)
    at Socket._destroy.self.errorEmitted (net.js:329:14)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)
[ERROR] Error
Error: Redis connection to 127.0.0.1:6379 failed - connect ECONNREFUSED
    at RedisClient.on_error (D:\Programming\Screencasts\peepcode\nodejs\peepcode
-069-full-stack-nodejs-i-mov\code\roland\HotPie\node_modules\redis\index.js:140:
24)
    at Socket.<anonymous> (D:\Programming\Screencasts\peepcode\nodejs\peepcode-0 
```

Express 开始侦听端口 3000，这是我所期望的。redis 错误消息提到端口 6379 上的连接。如果我将 redisClient 传递给 RedisStore，就会发生这种情况，这是我理解的绑定 redis 和 RedisStore 的方法。

我正在 Windows 上开发

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T14:34:08.367

提供的代码很好，只是配置错误。需要更改的只是端口号。

例如，当一个人去建立与一个 Redis 存储的连接时，一个人告诉应用程序 Redis 服务器的位置以及它正在侦听的端口。也可以将 port 指令全部删除，connect-redis 将使用远程 redis 服务器的默认端口。

在这种情况下，我建议尝试以下代码片段：

改变：

```
store: new RedisStore({ ..., port: 3000, ... }) 
```

新的：

```
store: new RedisStore({..., port: 6379, ... }) 
```

更新：

我确实忘记说明命令`netstat`、`ping`和`telnet`可以帮助调试哪些端口在本地打开以及服务返回给应用程序的内容。如果您在 Linux、OSX 或 BSD 等 unix 环境中，这两个命令将在 cmd.exe/powershell 和 bash 下执行。

这方面的一个例子是执行以下操作：

视窗：

```
netstat -np tcp | find "3000"

netstat -np tcp | find "6379" 
```

Linux：

```
netstat -nlt | grep '3000\|6379' 
```

它的作用是报告 localhost:3000 或 localhost:6379 的本地打开端口。如果您使用远程系统，那么您将使用 ping 来查看服务器是否已启动，并使用诸如 nmap 之类的端口扫描器来发现可用的远程端口。

完成所有这些之后，您将使用以下命令启动连接：

```
telnet <host> 3000
telnet <host> 6379 
```

请记住，仅仅因为一个人正在使用一种网络语言进行编程，并不意味着一个人也没有学习网络的技术目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T17:29:25.770

看起来你没有运行 redis 服务器。[你在redis.io/download](http://redis.io/download)上有一个很好的解释，关于如何下载、安装和运行服务器和客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T14:37:32.773

除了提到的内容之外，我想添加 `express.session{..}`以下错误，因为会话现在超出了快速核心。

```
Error('Most middleware (like ' + name + ') is no longer bundled with Express an.... 
```

解决方案：添加

`var session = require('express-session');`

并使用普通`session`的而不是`express.session`

# php - 检索数组中给定子键的所有父键

> ID：12038137
> 
> 赞同：0
> 
> 时间：2012-08-20T12:57:32.417
> 
> 标签：php

我一直在努力解决这个问题，但似乎找不到解决方案。我需要一个函数来检索给定子键的所有父键。例如，如果我有一个这样的数组：

```
array(
    'apples' => array(
        'bananas' => array(
            'strawberries' => array(
                'fruit' => array()
            )
        )
    )
) 
```

我会调用像'key_get_parents（$key，$array）'这样的函数，它会返回一个包含所有父键的数组。在这个例子中，数组（'apples', 'bananas', 'strawberries'）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:25:36.787

```
$array = array(
    'apples' => array(
            'bananas' => array(
                    'strawberries' => array(
                            'fruit' => array()
                    )
            )
    )
 );

function key_get_parents($subject, $array)
{
  foreach ($array as $key => $value)
  {
    if (is_array($value))
    {
      if (in_array($subject, array_keys($value)))
        return array($key);
      else
      {
        $chain = key_get_parents($subject, $value);
        if (!is_null($chain))
          return array_merge(array($key), $chain);
      }
    }
  }

  return null;
}

// Prints "Array ( [0] => apples [1] => bananas )"
print_r(key_get_parents('strawberries', $array)); 
```

# ruby-on-rails-3 - 如何在 ActiveAdmin 中过滤 IS NULL？

> ID：12038138
> 
> 赞同：20
> 
> 时间：2012-08-20T12:57:37.637
> 
> 标签：ruby-on-rails-3, activeadmin, formtastic, meta-search

我有一个名为“map_id”的整数列的表，我想添加一个 activeadmin 过滤器来过滤该列是否为空或不为空。

这怎么可能实现？

我尝试了以下过滤器

```
filter :map_id, :label => 'Assigned', :as => :select, :collection => {:true => nil, :false => ''} 
```

但是，我收到以下错误消息：

未定义的方法 `map_eq' 用于#

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-01-05T11:38:53.370

如果有人迟到了这个线程，现在有一种简单的方法可以在活动管理员中过滤 null 或非 null ：

```
filter :attribute_present, :as => :boolean 
filter :attribute_blank,   :as => :boolean 
```

不再需要向作用域添加自定义方法来完成此操作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-27T06:15:45.303

没有找到一个好的解决方案，但这里有一个方法。Active_admin 的过滤器由 meta_search 完成，您可以在模型中覆盖 meta_search 自动生成的函数以获得您想要的行为，最好的方法是使用范围，因为您需要返回一个关系才能与其他查询链接/scopes，如此[处所述](https://github.com/ernie/meta_search)

在您的模型中：

对于 :as=>:select 过滤器，acitve_admin 使用 _eq wheres，这里是[源代码](https://github.com/gregbell/active_admin/blob/master/lib/active_admin/inputs/filter_select_input.rb)

```
scope :map_eq, 
        lambda{ |id|
        if(id !='none')
            where( :map_id=> id)
        else
            where( :map_id=> nil)
        end
        }

#re-define the search method:
search_method :map_eq, :type => :integer 
```

在您的 ative_admin 注册块中：

```
filter :map_id, :label => 'Assigned', :as => :select, :collection => [['none', 'none'], ['one', 1],['tow', 2]]

# not using :none=>nil because active_admin will igore your nil value so your self-defined scope will never get chained. 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-23T03:50:22.560

似乎 search_method 在最近的 Rails 版本中不起作用，这是另一个解决方案：

为您的模型添加范围：

```
 scope :field_blank, -> { where "field is null" }
  scope :field_not_blank, -> { where "field is not null" } 
```

添加到 /app/admin/[你的模型]

```
 scope :field_blank
   scope :field_not_blank 
```

您将看到这些范围的按钮出现（在顶部，在模型名称下，而不是在过滤器部分）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-10T17:44:24.710

新版 ActiveAdmin 使用 Ransacker。我设法让它以这种方式工作：

### 在管理员

```
filter :non_nil_map_id, :label => 'Assigned', :as => :select, :collection => [['none', 'none'], ['one', 1],['tow', 2]] 
```

为了保持一致性，我从@Gret 答案中获取了相同的代码，只是更改了过滤器名称

### 在你的模型上

```
ransacker :not_nil_map_id, :formatter => proc {|id|  map_id != 'none' ? id : 'none' } do |parent|
    parent.table[:id]
end 
```

如果 id 为“none”，这将触发对*nil的搜索，并且活动记录将返回所有**nil id*条目。

[这个线程](https://github.com/activerecord-hackery/ransack/issues/36)帮助**很大**。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-02T12:45:25.420

使用可洗劫范围：

**在 ActiveAdmin 资源定义上：**

```
filter :map_id, :label => 'Assigned', as: :select, :collection => [['Is Null', 'none'], ['Not null', 'present']] 
```

**在您的模型上：**

```
scope :by_map_id, ->(id) { (id == 'none' ? where(map_id: nil) : where('map_id IS NOT NULL')) }

def self.ransackable_scopes(_auth_object = nil)
  %i[by_map_id]
end 
```

# iphone - 在 iOS 应用程序中从 Facebook 检索用户电子邮件

> ID：12038142
> 
> 赞同：0
> 
> 时间：2012-08-20T12:57:49.673
> 
> 标签：iphone, email, facebook-graph-api, fbconnect

我正在开发一个 iPhone 应用程序，该应用程序需要通过任何一个 FaceBook API（例如 FBConnect 或 FBGraph for iOS）从 FaceBook 检索登录用户的电子邮件 ID。

通过使用 FBConnect 或 FBGraph，我可以检索用户信息，如姓名、ID、性别等，但我无法检索用户电子邮件 ID。

如果我查询电子邮件 ID，它会为电子邮件返回“null”。

请任何人帮助我解决这个问题。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:19:33.550

第一的

```
 [facebook requestWithGraphPath: @"me" andDelegate: self] 
```

使用@"offline access" 和@"email" 会给你一个电子邮件地址。确保您选择的电子邮件在您的 Facebook 中可见

```
if (![objDelegate.facebook isSessionValid])
    {

    //[appDelegate.mFacebookObj authorize:App_ID permissions:[NSArray arrayWithObjects:kFBPermission, nil] delegate:self];
    [objDelegate.facebook authorize:App_ID permissions:[NSArray arrayWithObjects:@"offline_access",@"publish_stream",@"email",@"user_birthday",@"user_events",@"read_stream",@"friends_likes", nil] delegate:self];
} 
```

或者您可以使用该[链接](http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/)

# c# - C#使用未赋值的局部变量——out语句

> ID：12038146
> 
> 赞同：3
> 
> 时间：2012-08-20T12:58:11.467
> 
> 标签：c#, out

我一直在寻找这个问题，但我不知道（也没有找到）如何解决它。这里有谁知道如何解决这个问题？我正在使用 EMGU，但问题在于 c# 编码（我对 C# 相当陌生） - 我认为这与 out 语句有关，因为我没有太多使用它们：

```
Image<Gray, Byte> first_image;

if (start_at_frame_1 == true)
{
    Perform_custom_routine(imput_frame, out first_image);
}
else
{
     Perform_custom_routine(imput_frame, out second_image);
}

Comparison(first_image); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T12:59:13.663

您必须为变量提供默认值：

```
Image<Gray, Byte> first_image = null; 
```

否则，如果您`second_image`作为 out 参数传递，您可能不会分配任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:59:26.007

你有 3 种选择

```
Image<Gray, Byte> first_image = default(Image<Gray, Byte>); 
```

或者

```
Image<Gray, Byte> first_image = null; 
```

或者

```
Image<Gray, Byte> first_image = new Image<Gray, Byte>(); 
```

不要忘记也这样做`second_image`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T13:03:55.670

编译器警告您，您将在调用`Comparison`. 如果`start_at_frame_1`是`false`，您的变量`first_image`将永远不会被设置。

您可以通过`first_image = null`在初始化或 else 块中进行设置来解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:04:27.017

或者您可以将其作为 Perform_custom_routine 的返回参数。

```
Image<Gray, Byte> first_image;  

if (start_at_frame_1 == true)  
{  
    first_image = Perform_custom_routine(imput_frame, out first_image);  
}  
else  
{  
     first_image = Perform_custom_routine(imput_frame, out second_image);  
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-20T13:23:38.397

如果你使用'out'关键字，你必须在传递变量之前给它一个值。

如果您使用“ref”关键字，则必须在返回之前在传递给它的方法中给变量一个值。

# android - 谷歌地图中的倒置高亮区域

> ID：12038148
> 
> 赞同：0
> 
> 时间：2012-08-20T12:58:19.360
> 
> 标签：android, google-maps, geometry, highlighting, area

不太确定如何轻松解释这一点，但这里有。我想在Android中的整个谷歌地图上做一个高亮覆盖，除了一个矩形是默认的。基本上，这是相反的反转版本：

[谷歌地图上的绘图区](https://stackoverflow.com/questions/1879566/drawing-area-at-google-map)

任何想法如何配置它？

提前谢谢你，亚历克斯

PS为了清楚起见，Javascript的示例仅用于图片目的，我需要常规Java :)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:29:54.233

看看这个用于谷歌地图的蒙面多边形库。[https://github.com/vasile/Mask-KML-polygons](https://github.com/vasile/Mask-KML-polygons)

# wordpress - 如何在 wordpress 类别/存档页面中添加规范标签？

> ID：12038151
> 
> 赞同：2
> 
> 时间：2012-08-20T12:58:23.437
> 
> 标签：wordpress, seo, canonical-link

我认为 wordpress 会`canonical`为单个帖子页面自动生成标签（我使用的是 wp 3.3.2 ）。但它不在类别或存档页面中。我应该如何向这些页面添加规范标签？

我尝试了`header.php`文件中的以下代码

```
$path = $_SERVER['REQUEST_URI'];
$uri = "http://www.mydomain.com" . $path;
print('<link rel="canonical" href="' . $uri . '"/>'); 
```

但这只给出请求 URL，而不是页面的主/父 URL。我只想`canonical`从 wordpress 中获取与单个帖子页面相同的标签。不像这种自定义代码。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-01T15:00:10.740

您可以在标题中尝试此操作

```
if(is_category()) {
    $categories = get_the_category();
    $category_id = $categories[0]->term_id;
    echo '<link rel="canonical" href="' .  get_category_link($category_id) . '" />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:15:11.487

您是否尝试过任何 SEO 插件？

[http://yoast.com/wordpress/seo/](http://yoast.com/wordpress/seo/)

# contextmenu - Windows 资源管理器上下文菜单图标上的白色背景

> ID：12038153
> 
> 赞同：7
> 
> 时间：2012-08-20T12:58:26.777
> 
> 标签：contextmenu, explorer, shell-extensions

我有一个 COM shell 扩展，它将一个项目添加到 Windows 资源管理器上下文菜单中，并使用具有透明背景的 BMP 图像作为图标。

要设置我使用的图像，`SetMenuItemBitmaps`如下所示：

```
[DllImport("user32.dll", ExactSpelling = true)]
internal static extern int SetMenuItemBitmaps(IntPtr hMenu,uint uPosition,uint uFlags,IntPtr hBitmapUnchecked,IntPtr hBitmapChecked);

SetMenuItemBitmaps(owner.hMenu,(uint)pos,Win32.MF_BYPOSITION,bitmap.GetHbitmap(),IntPtr.Zero); 
```

我的问题是 - 当图标第一次出现时它看起来不错，但在将鼠标悬停在其上方后，图标的背景变为白色（而不是透明）并保持白色，直到我重新打开菜单。

我已经尝试在参数“hBitmapUnchecked”、“hBitmapChecked”中设置两个非默认值 - 但它似乎没有任何区别。结果保持不变。

这是悬停前的图标图像（放大到 400%）：

![](../Images/b576300090072338e3402f0860e39292.png)

这是悬停后的图标图像：

![](../Images/11d679496cf430c0e21689bb53a45073.png)

注意第二张图片周围的白色背景！

到目前为止，我还没有在谷歌上找到任何相关的东西。是否有其他方法可以设置图标以避免这种烦人的背景？

# php - php数组搜索优化

> ID：12038154
> 
> 赞同：3
> 
> 时间：2012-08-20T12:58:27.007
> 
> 标签：php, arrays, optimization

这是任务。我需要识别一个字符串是否包含某个城镇名称。另一个词 - 从一些文本中识别一个城镇。

作为输入，我有文本要搜索 AND 地理编码。根据从 db 加载的城镇地理编码列表。

现在，当前的实现是遍历这些城镇的列表，并尝试使用短路评估来匹配它。喜欢：

```
if (stripos($text, $currentTown) !== false && 
    preg_match("#\b$currentTown\b#i", $text)) {
    // add town to recognized list
} 
```

问题是我有例如英国的城镇列表（大约 40 000），循环将花费“相当长的时间”。

所以我的问题是如何优化识别时间。也许数组中有一些高级搜索？

欢迎任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:34:26.157

虽然我最好的选择是立即使用[“MySQL 全文搜索”，](http://dev.mysql.com/doc/refman//5.5/en/fulltext-boolean.html)但我会尝试解决您的问题。我将尝试从“最佳结果”开始。

1.  将所有城镇数据保留为小写（或至少在您搜索的位置）并`$text = strtolower($text);`在搜索前使用：这样您就可以使用`strpos`区分大小写的搜索 > 不敏感搜索

2.  为什么要打扰 preg_match(); 就像你用 stripos 做 99% 一样的事情。你可以跳过它。

3.  也许添加像 if strlen($text) < 4 这样的小检查，甚至不要尝试搜索，因为它会给出可怕的结果。

4.  按长度排序您的数据（这是非常昂贵的，所以这样做一次并存储它）并跳过比输入短的 currentTowns。

5.  按字母顺序排列您的数据，并且只通过与第一个字母（或第一个 + 第二个）匹配的部分

6.  可能，缓存结果/搜索。然后你只需要搜索你的缓存，如果它可以找到一些行（但是你的缓存未命中很痛苦）

7.  如果您有大型数据集，也许[PHP Iterator 类](http://php.net/manual/en/class.iterator.php)可以提供帮助。它可以加快检查每条记录的过程。

# php - 无法连接到 MySQL 数据库但能够连接到服务器

> ID：12038155
> 
> 赞同：0
> 
> 时间：2012-08-20T12:58:27.080
> 
> 标签：php, mysql, database, localhost, wamp

我只是使用基本代码连接到我的 Mysql 数据库。我能够连接到我的服务器但不能连接到数据库。使用 sqlyog：

```
<?php
    $username = "root";
    $hostname = "localhost"; 
    $dbhandle = mysql_connect($hostname, $username) or die("Unable to connect to MySQL");
    $selected = mysql_select_db("project",$dbhandle) or die("Could not select project");

    $sql = "SELECT image_small FROM images";
    mysql_query($sql,$selected);

    while($row=extract_row($sql))
    {
        echo $row['image_small'];
    } 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:06:46.463

数据库的密码在哪里？[mysql_connect](http://php.net/manual/fr/function.mysql-connect.php)应该用作：

```
mysql_connect("localhost", "mysql_user", "mysql_password"); 
```

否则将使用默认密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:16:21.173

这里有很多问题。1.您的数据库中root用户的密码为空。2\. 你正在使用 mysql_* ，每个人都知道它会受到很多麻烦。3\. 您正试图从 SQL 查询中“提取”一行。

使用 PDO：

```
$DB = new PDO("mysql:host=localhost;dbname=project","root","root_password");
$sql = "SELECT image_small FROM images";
foreach($DB->query($sql, PDO::FETCH_ASSOC) as $row) {
  echo $row['image_small'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:04:48.280

尝试使用以下语句连接

```
$selected = mysql_select_db("project"); 
```

// 我认为你必须在这里提供密码 mysql_connect($hostname, $username,$password); 因为它是 localhost 并且用户是 root 你可以像这样使用

```
 mysql_connect($hostname, $username,""); 
```

# r - 如何不使用 roxygen2 运行示例？

> ID：12038160
> 
> 赞同：113
> 
> 时间：2012-08-20T12:59:02.457
> 
> 标签：r, roxygen2

我现在正在编写一个依赖于 Bing Maps Key的[地理编码功能。](https://github.com/gsk3/taRifx.geo/blob/master/R/Contributed.R)显然我宁愿不发表我的，这些例子没有一个就失败了。

如何包含一个示例供用户手动运行，但在 期间不执行`R CMD check`？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-08-20T13:03:15.377

采用`\dontrun{}`

```
#'@examples
#'\dontrun{
#'geocode("3817 Spruce St, Philadelphia, PA 19104")
#'geocode("Philadelphia, PA")
#'dat <- data.frame(value=runif(3),address=c("3817 Spruce St, Philadelphia, PA 19104","Philadelphia, PA","Neverneverland"))
#'geocode(dat)
#'} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-07-09T15:01:02.127

您可以使用`\donttest{}`您的示例。该片段将在您的文档中提供，但不会使用 R CMD Check 进行测试。

更多信息 -->`?example`

```
#' @example
\donttest{
    2^2
    } 
```

这个 2^2 不会在你运行时运行`devtools::check()`

* * *

**编辑**

根据最新的发行说明或*R 4.0.0的*[新闻](https://cran.r-project.org/doc/manuals/r-devel/NEWS.html)，现在将默认测试其中的示例。但是，这可以通过将环境变量设置为 来覆盖。*`\donttest{}``_R_CHECK_DONTTEST_EXAMPLES_``FALSE`*

 *> R CMD check --as-cran 现在运行 \donttest 示例（由 example() 运行），而不是指示测试人员这样做。这可以在开发过程中通过将环境变量*R_CHECK_DONTTEST_EXAMPLES*设置为 false 值来临时规避。

根据[这个](https://github.com/r-lib/devtools/issues/2216)GitHub 问题讨论（[在此处](https://stackoverflow.com/questions/63693563/issues-in-r-package-after-cran-asked-to-replace-dontrun-by-donttest)记入），Hadley Wickham 指出

> 一般来说，现在如果你不想在 CRAN 上运行测试 \dontrun{} 更有可能工作，但使用 \dontrun{} 可能会导致初始提交失败。

还有其他方法可以让您继续使用`donttest{}`，请参阅上述讨论以了解解决方法。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-04-28T03:37:50.667

对于那些使用`@example path/to/example.R`而不是`@examples`标签的人，您可以`\dontrun`直接在`example.R`文件中使用环境。例如

```
# example.R
\dontrun{
# this is a long running example
for(i in seq(1, 1e5)) { lm(mpg ~ wt, data = mtcars) }
}

# some other shorter example
2 + 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-25T19:14:21.727

Ari，我也用 roxygen2（4.1.0 版）。以下是我的函数（gctemplate）定义中的 roxygen2 标记的结尾，直到实际部分的开头。

```
#' @examples
#' ## List all G-causalities in a VAR system of 5 variables that will be searched in the pattern of 1 
#' ## causer (like-independent) variable and 2 like-dependents conditional on 5-(1+2)=2 of the remaining 
#' ## variable(s) in the system. Variables are assigned to numbers 1 to nvars. 
#' ## "1 2 5 3 4" in the resulting line of gctemplate is to indicate the 
#' ## (conditonal, partial, etc.) G-causality from variable 1 to variables 2 and 5 
#' ## conditonal on variables 3 and 4.
#' # gctemplate(5,1,2)
#' ## The number of all G-causalities to be searched in the above pattern.
#' #dim(gctemplate(5,1,2))[[1]]
#' @importFrom combinat combn
#' @export
gctemplate <- function(nvars, ncausers, ndependents){
... 
```

我知道 GSee 的 dontrun 方法。
在我的技术中，数值示例和解释数值示例的文本都是注释。我使用缩进来区分这两者；请注意，“#”之后分别有 1 个升号和 2 个升号。我总是在我的包中使用上面的“#' ## / #' #”技术。每当他/她想测试该功能时，用户就可以进行复制粘贴操作。在我看来，这种技术更类似于对软件编码哲学的经典评论轰炸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-16T15:17:16.740

```
\dontrun{} 
```

是正确的功能。看这里：

> 出于说明的目的，包含导致错误的代码通常很有用。\dontrun{} 允许您在未运行的示例中包含代码。（您曾经可以将 \donttest{} 用于类似目的，但不再推荐，因为它实际上已经过测试。）

来源：[https ://r-pkgs.org/man.html?q=donttest#man-functions](https://r-pkgs.org/man.html?q=donttest#man-functions)*

# batch-file - 从文件中打开带有 cmd 参数的进程列表

> ID：12038161
> 
> 赞同：0
> 
> 时间：2012-08-20T12:59:05.930
> 
> 标签：batch-file, cmd

我有一个脚本，它将编写一个进程文件（当前为 C:\test.txt）（它检查预定义列表中的进程）。

然后我运行一些其他代码（在这里完成的工作并不重要，但其中一部分是结束这些进程）。

我的问题是，此时在我的脚本中，我需要能够重新启动已终止的进程，但使用它们之前运行的 cmd 参数加载它们。

test.txt 文件看起来像这样：

```
"C:\folder1\folder2\application1.exe" param1
"C:\folder1\folder2\folder3\application2.exe" param1 param2
"C:\folder4\application3.exe"
"C:\folder1\folder2\folder3\application4.exe" param1 param2 param3 param4
etc.. 
```

我使用 for 循环从文件中获取行并尝试运行它们；

```
for /f "usebackq tokens=1,* delims= " %%C in (C:\test.txt) do (
%%C %%D
) 
```

这很好，除了脚本在加载下一个之前等待第一个进程完成（即再次终止），并且这些进程不会结束！

我试着用

```
start %%C %%D 
```

但我用文件路径加载了一个新的 CMD 窗口，然后尝试运行名称来自 %D 的文件

使用;

```
start %%C %%C %%D 
```

似乎确实有效，但我不知道为什么，而且我确信这不是正确的方法。

谁能解释为什么这行得通，而其他人没有，以及是否有适当的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:11:38.470

引号内启动命令后的第一个参数被视为“窗口标题”。然后是命令和参数。

这就是为什么

```
start %%C %%D 
```

不起作用，因为引号内的 %%C 被视为窗口标题并尝试运行 %%D 命令。

这也应该有效：

```
start "" %%C %%D 
```

看：

```
start /? 
```

[为什么我不能在没有 /d 的命令行中启动程序？（视窗 7x64）](https://stackoverflow.com/questions/12036659/why-cant-i-start-programs-in-the-command-line-without-d-windows-7x64/12036840#comment16068069_12036840)

# nhibernate - Nhibernate 映射生成器在没有 Schema() 的情况下创建映射文件

> ID：12038162
> 
> 赞同：0
> 
> 时间：2012-08-20T12:59:12.853
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我使用这个生成器 - [http://nmg.codeplex.com/](http://nmg.codeplex.com/)。但它会生成没有架构的映射文件。我必须浏览所有映射文件并手动插入`Schema("someschema")`方法。如何使用架构生成实体和映射文件？也许另一个发电机？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:39:19.363

有可以在 NHibernate.Cfg.Configuration 上设置的 NH.Cfg.Environment.DefaultSchema 属性，还有 FNH 的约定来为每个类设置架构，请参阅`IClassConvention`。

# clojure - 学习另一种 lisp 方言是否会使学习 clojure 变得更容易？

> ID：12038171
> 
> 赞同：4
> 
> 时间：2012-08-20T12:59:39.063
> 
> 标签：clojure, lisp

我一直在阅读[计算机程序的结构和解释](https://rads.stackoverflow.com/amzn/click/com/0262011530)。Lisp 正在教我以它的方式思考。作为一个java开发者，我想学习clojure。

我知道 clojure 类似于 lisp。所以我的问题是，学习 Lisp 是否有助于我轻松学习 clojure？两种语言中是否有相似的概念？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:27:51.403

Clojure 与其他 Lisp 有许多相似之处。SICP 是一本很棒的书，虽然它侧重于 Scheme，但它所教的很多内容都与 Clojure 直接相关。

如果你精简了一个 Lisp，那么拿起另一个 Lisp 会容易得多。

然而，关于 Clojure 的一些事情使其“与众不同”值得注意：

*   `[]`它用向量、散列图`{}`和集合`#{}`以及传统的列表扩展了经典的 Lisp 语法`()`。
*   与大多数其他 Lisps 相比，它在风格上更像是一种函数式编程语言——几乎所有东西都是不可变的，序列默认是惰性的等等。在某些方面，Clojure 感觉受到 Haskell 的强烈影响
*   Clojure 在很大程度上拥抱了 Java 平台——它在 JVM 上运行，您可以轻松地直接使用 Java 库。因此，尽管您不必严格了解 Java 才能在 Clojure 中发挥作用，但了解 Java 生态系统和工具会有所帮助。
*   Clojure STM 系统/对并发的支持非常创新和与众不同。值得观看此视频： http: [//www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T13:39:41.447

把这个和一粒盐一起吃；我是一名Common Lisper，有一些Scheme 经验，刚刚开始使用Clojure，所以我还不是专家。你可能想用谷歌搜索别人的经历。

看起来 Clojure 和 CL/Scheme 之间的区别主要在于细节。总体原则或多或少是相同的，假设您已经了解其他 Lisps 之一，学习 Clojure 似乎不会显着改变您对编程的看法。与在 Scheme 中相比，对不变性和函数式编程的重视程度要高得多，并且一些函数的命名方式不同，您需要平衡括号/括号/花括号，而不仅仅是括号，但这几乎是语言级别的。

在学习了 CL/Scheme 之后，到目前为止，我似乎在 Clojure 上的时间比以前要轻松得多。

最后的想法是，即使您打算再也不看 Scheme，学习 SICP 和[随附的讲座也值得您花时间。](http://www.youtube.com/watch?v=2Op3QLzMgSY&feature=list_other&playnext=1&list=SPE18841CABEA24090)它教授了许多普遍有用的 CompSci 原则，以及一种特殊的思维方式，可以帮助您作为开发人员使用您最终使用的任何语言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T13:41:37.950

每种语言都有自己的细微差别。你目前正在学习 Lisp 的一些小怪癖（假设是 Common Lisp/CL），但是学习另一种语言，更不用说第二种 Lisp 方言了，你也会学习这些怪癖/差异/细微差别。

除非你有大量的时间来学习，否则如果你对编程感兴趣，我会学习 Clojure，如果你对编程感兴趣，我会学习 Lisp。

学习 Lisp 并不是一件坏事，因为你会习惯于学习 Lisp 方言与基于 Algol-C 的语言的不同之处。就此而言，可以对学习方案提出相同的论点。

在 Clojure 之前，我使用类似的语言进行编程，但即使是 Bliss-32 和 PL/I 恕我直言，它们也更类似于 C 和 Java，而不是 Lisp 方言。学习 Clojure 对我来说是必需的——而且仍然需要——比从 C 到 C++（在 90 年代）进行更大的心理调整。

我喜欢重新调整，但它是渐进的，有一个学习曲线。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T19:25:27.637

我走了同样的路，因为我的一个朋友是一个老 Lisper，出于兴趣让我学习 Lisp。他在 70 年代初开始黑客攻击，并为一些 Lisp 公司工作。每当我们谈论编程语言时，他都会提到在 Lisp 中发现的概念，我觉得我从来没有完全理解他所说的。

学习 Lisp 对我来说是进入 Clojure 的一个很好的开始，我最终选择了 Clojure，因为我一直在寻找能够在 ARM CPU 上运行的 Lisp。在我看来，Lisp 没有那么复杂，因为它没有与 Java VM 集成，而且如果不熟悉 Java，理解 Clojure 会比理解 Lisp 困难得多。我只能说，对 Lisp 有很好的基本了解肯定对我学习 Clojure 有帮助。

# r - 箱线图上点的位置

> ID：12038172
> 
> 赞同：1
> 
> 时间：2012-08-20T12:59:41.480
> 
> 标签：r, ggplot2

我有以下data.frame。抱歉这么大的数据

```
df <- structure(list(X1 = c("sol_10035", "sol_10040", "sol_10041", 
"sol_10044", "sol_10045", "sol_10047", "sol_10048", "sol_10049", 
"sol_10051", "sol_10175", "sol_10177", "sol_10178", "sol_10182", 
"sol_10183", "sol_10184", "sol_10185", "sol_10187", "sol_10191", 
"sol_10267", "sol_10268", "sol_10268", "sol_10270", "sol_10271", 
"sol_10279", "sol_10282", "sol_10286", "sol_10291", "sol_10299", 
"sol_10312", "sol_10316", "sol_10328", "sol_10331", "sol_10334", 
"sol_10334", "sol_10341", "sol_10344", "sol_10373", "sol_10375", 
"sol_10379", "sol_10393", "sol_10426", "sol_10455", "sol_10456", 
"sol_10457", "sol_10459", "sol_10461", "sol_10493", "sol_10493", 
"sol_10494", "sol_10508", "sol_10529", "sol_10532", "sol_10533", 
"sol_10538", "sol_10554", "sol_10556", "sol_10562", "sol_10563", 
"sol_10566", "sol_10573", "sol_10575", "sol_10575", "sol_10586", 
"sol_10588", "sol_10588", "sol_10596", "sol_10602", "sol_10605", 
"sol_10607", "sol_10608", "sol_10613", "sol_10642", "sol_10655", 
"sol_10692", "sol_10709", "sol_10710", "sol_10711", "sol_10711", 
"sol_10720", "sol_10723", "sol_10035", "sol_10040", "sol_10041", 
"sol_10044", "sol_10045", "sol_10047", "sol_10048", "sol_10049", 
"sol_10051", "sol_10175", "sol_10177", "sol_10178", "sol_10182", 
"sol_10183", "sol_10184", "sol_10185", "sol_10187", "sol_10191", 
"sol_10267", "sol_10268", "sol_10268", "sol_10270", "sol_10271", 
"sol_10279", "sol_10282", "sol_10286", "sol_10291", "sol_10299", 
"sol_10312", "sol_10316", "sol_10328", "sol_10331", "sol_10334", 
"sol_10334", "sol_10341", "sol_10344", "sol_10373", "sol_10375", 
"sol_10379", "sol_10393", "sol_10426", "sol_10455", "sol_10456", 
"sol_10457", "sol_10459", "sol_10461", "sol_10493", "sol_10493", 
"sol_10494", "sol_10508", "sol_10529", "sol_10532", "sol_10533", 
"sol_10538", "sol_10554", "sol_10556", "sol_10562", "sol_10563", 
"sol_10566", "sol_10573", "sol_10575", "sol_10575", "sol_10586", 
"sol_10588", "sol_10588", "sol_10596", "sol_10602", "sol_10605", 
"sol_10607", "sol_10608", "sol_10613", "sol_10642", "sol_10655", 
"sol_10692", "sol_10709", "sol_10710", "sol_10711", "sol_10711", 
"sol_10720", "sol_10723", "sol_10035", "sol_10040", "sol_10041", 
"sol_10044", "sol_10045", "sol_10047", "sol_10048", "sol_10049", 
"sol_10051", "sol_10175", "sol_10177", "sol_10178", "sol_10182", 
"sol_10183", "sol_10184", "sol_10185", "sol_10187", "sol_10191", 
"sol_10267", "sol_10268", "sol_10268", "sol_10270", "sol_10271", 
"sol_10279", "sol_10282", "sol_10286", "sol_10291", "sol_10299", 
"sol_10312", "sol_10316", "sol_10328", "sol_10331", "sol_10334", 
"sol_10334", "sol_10341", "sol_10344", "sol_10373", "sol_10375", 
"sol_10379", "sol_10393", "sol_10426", "sol_10455", "sol_10456", 
"sol_10457", "sol_10459", "sol_10461", "sol_10493", "sol_10493", 
"sol_10494", "sol_10508", "sol_10529", "sol_10532", "sol_10533", 
"sol_10538", "sol_10554", "sol_10556", "sol_10562", "sol_10563", 
"sol_10566", "sol_10573", "sol_10575", "sol_10575", "sol_10586", 
"sol_10588", "sol_10588", "sol_10596", "sol_10602", "sol_10605", 
"sol_10607", "sol_10608", "sol_10613", "sol_10642", "sol_10655", 
"sol_10692", "sol_10709", "sol_10710", "sol_10711", "sol_10711", 
"sol_10720", "sol_10723"), model = c("rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", 
"rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "rf", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", "pls", 
"pls", "pls", "pls", "pls", "pls", "pls", "pls", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", "svm", 
"svm", "svm", "svm", "svm", "svm", "svm"), res = c(-1.4815505185651, 
-1.38155061393253, -1.45695583107802, -1.13051971261767, -1.28695599320266, 
-1.42415370000154, -0.99233908412686, -2.78064082881161, -1.82675122357051, 
-2.36807374057301, -2.3320723441529, -2.67207249674079, -3.31455893287706, 
-2.17263806652157, -2.13263810466854, -2.52554767470598, -2.09962849509049, 
-2.5455476556325, -1.48578696223593, -1.90628487150221, -1.90628487150221, 
-1.83127686589692, -1.40744484767072, -0.91430778181862, -1.66578696938849, 
-3.29973012545368, -2.20973021128436, -1.75570400582873, -2.34472653634494, 
-1.99701600927021, -2.17770528855383, -1.88710810574164, -1.08528036261529, 
-1.08528036261529, -1.8554178798845, -0.989835553152767, -2.56453793602913, 
-2.15996905825455, -2.99320911981941, -3.77973014452716, -1.65290958267842, 
-2.08474045490216, -2.51747024189273, -2.84822377084607, -3.25351251761294, 
-0.379912223052841, -1.30992312476689, -1.31894530473519, -0.519820773061511, 
0.383320568439466, -0.678032397099017, -1.80502645861624, -1.28298059315766, 
-0.686698607372736, -2.53445717290867, -1.81877430887043, -1.42311824357665, 
-3.09851087636666, -0.730614682865185, -1.35208143616296, -4.06605176199527, 
-4.06605176199527, -1.53819901592959, -2.54999963642241, -2.54999963642241, 
-1.11960413826569, -1.6918623298347, -1.6464594507407, -2.51490227966849, 
-2.1858871665161, -2.40837297362259, -1.67419013858732, -2.27738982317886, 
-3.92465032506434, -1.68014547664006, -1.60479028580843, -1.16098422658784, 
-1.16098422658784, -2.2860700469459, -2.60339279078186, -1.60446374173762, 
-1.50446383710505, -1.62990791516413, -1.77577097462087, -1.45990807728876, 
-1.63221493851451, -1.63545023911412, -2.62265076737661, -1.6648058229937, 
-2.40231239648778, -2.26302627866696, -2.60302643125485, -3.48192173062671, 
-2.3352390128172, -2.29523905096417, -2.36199830161037, -2.53905017090851, 
-2.38199828253689, -1.77583826558564, -1.82565434372762, -1.82565434372762, 
-1.65744466890755, -1.93251832799871, -1.74661956546712, -1.9558382727382, 
-2.84900758111655, -1.75900766694724, -2.96909312698811, -2.23284694934467, 
-2.46273221150808, -2.99385247608151, -2.11133100195475, -1.29467770150081, 
-1.29467770150081, -2.61167137193353, -2.24234236453998, -2.4301420554697, 
-2.24703874068304, -2.11098856745551, -3.32900760019004, -2.04174546109205, 
-2.55424635828313, -2.3291688314616, -3.11767207564349, -2.73679776365421, 
-0.679498892706623, -1.34569547401812, -1.54652695175621, -2.28126853296633, 
-0.988321000150492, -0.845828268813766, -1.76782259784989, -1.37918084720446, 
-1.45573186892023, -2.64300591408346, -2.33225200577483, -2.00108102566546, 
-2.70721355577772, -0.871369935818877, -1.36107282725622, -2.90317245640462, 
-2.90317245640462, -2.55035817000526, -2.36382423373917, -2.36382423373917, 
-1.27272272089218, -1.45480361979991, -2.08697980861596, -2.297462776927, 
-1.81711901055862, -3.17543198941651, -1.6468599993301, -1.54404294919475, 
-2.21224776646234, -2.27149198369245, -1.31683176214295, -1.68957940184567, 
-1.68957940184567, -2.52600381307447, -2.46727009516503, -1.23762900746866, 
-1.13762910283609, -1.35660114733054, -1.42351638133134, -1.18660130945517, 
-1.45345732465512, -1.35799257070317, -2.05963401620835, -1.78095813578771, 
-2.00463255794565, -2.34118401549464, -2.68118416808253, -3.45959350138887, 
-2.40278974294777, -2.36278978109474, -2.47953319694026, -2.48045707522502, 
-2.49953317786677, -1.52009096893243, -1.95148276380236, -1.95148276380236, 
-1.67193637764583, -1.86837159213928, -0.980999011583017, -1.70009097608499, 
-3.17227187908491, -2.0822719649156, -2.45108936046996, -2.31859767373448, 
-2.32065887524153, -2.73787934669907, -2.00854859174467, -1.31602876206132, 
-1.31602876206132, -2.45550132402396, -2.15815656904391, -2.43147927679445, 
-2.10527139763203, -2.12614206614536, -3.65227189815839, -1.9167735566624, 
-1.85327916244403, -2.08779642509345, -3.22870502746881, -3.02231583272168, 
0.125904142452702, -1.35141078088838, -1.53382318262665, -1.68754873015187, 
-1.06319415541817, -0.76875543071585, -1.66869224278363, -1.31256363602869, 
-1.47844075679374, -2.44956261495404, -2.00040525386917, -1.926297476183, 
-3.02142554128199, -0.382876185263787, -1.25015240078615, -2.75634025399193, 
-2.75634025399193, -2.05201324833915, -2.46440533860831, -2.46440533860831, 
-1.26659002935118, -1.59338585783013, -1.87609295593782, -2.11973415323673, 
-1.94972130042437, -2.86662498733815, -1.57525770399891, -1.78737449864409, 
-2.15571566033041, -2.12772455431051, -1.50613298243881, -1.70884508099009, 
-1.70884508099009, -2.44962268274181, -2.43040932407241), X2 = c(1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1)), .Names = c("X1", "model", "res", "X2"
), row.names = c(472L, 475L, 476L, 479L, 480L, 481L, 482L, 483L, 
484L, 487L, 488L, 489L, 490L, 491L, 492L, 493L, 495L, 498L, 501L, 
502L, 503L, 504L, 505L, 506L, 507L, 509L, 514L, 515L, 516L, 517L, 
518L, 522L, 525L, 526L, 529L, 530L, 533L, 534L, 535L, 536L, 542L, 
549L, 550L, 551L, 552L, 554L, 556L, 557L, 558L, 567L, 577L, 582L, 
583L, 586L, 597L, 598L, 602L, 603L, 606L, 608L, 609L, 610L, 611L, 
612L, 613L, 617L, 618L, 619L, 620L, 621L, 624L, 645L, 650L, 659L, 
666L, 667L, 668L, 669L, 672L, 673L, 1146L, 1149L, 1150L, 1153L, 
1154L, 1155L, 1156L, 1157L, 1158L, 1161L, 1162L, 1163L, 1164L, 
1165L, 1166L, 1167L, 1169L, 1172L, 1175L, 1176L, 1177L, 1178L, 
1179L, 1180L, 1181L, 1183L, 1188L, 1189L, 1190L, 1191L, 1192L, 
1196L, 1199L, 1200L, 1203L, 1204L, 1207L, 1208L, 1209L, 1210L, 
1216L, 1223L, 1224L, 1225L, 1226L, 1228L, 1230L, 1231L, 1232L, 
1241L, 1251L, 1256L, 1257L, 1260L, 1271L, 1272L, 1276L, 1277L, 
1280L, 1282L, 1283L, 1284L, 1285L, 1286L, 1287L, 1291L, 1292L, 
1293L, 1294L, 1295L, 1298L, 1319L, 1324L, 1333L, 1340L, 1341L, 
1342L, 1343L, 1346L, 1347L, 1820L, 1823L, 1824L, 1827L, 1828L, 
1829L, 1830L, 1831L, 1832L, 1835L, 1836L, 1837L, 1838L, 1839L, 
1840L, 1841L, 1843L, 1846L, 1849L, 1850L, 1851L, 1852L, 1853L, 
1854L, 1855L, 1857L, 1862L, 1863L, 1864L, 1865L, 1866L, 1870L, 
1873L, 1874L, 1877L, 1878L, 1881L, 1882L, 1883L, 1884L, 1890L, 
1897L, 1898L, 1899L, 1900L, 1902L, 1904L, 1905L, 1906L, 1915L, 
1925L, 1930L, 1931L, 1934L, 1945L, 1946L, 1950L, 1951L, 1954L, 
1956L, 1957L, 1958L, 1959L, 1960L, 1961L, 1965L, 1966L, 1967L, 
1968L, 1969L, 1972L, 1993L, 1998L, 2007L, 2014L, 2015L, 2016L, 
2017L, 2020L, 2021L), class = "data.frame") 
```

我使用以下代码绘制它并获得绘图

```
ggplot(ph, aes(x=factor(X2), y=res)) + 
  geom_hline(yintercept = -6:2, color="grey") +
  geom_boxplot(aes(fill=factor(model))) + 
  opts(axis.text.x = theme_text(angle = 45)) +
  geom_point() 
```

![在此处输入图像描述](../Images/a05be7d32e42bcc245fbce3dd22aa736.png)

如果我正确理解所有点应沿绿色条显示。为什么蓝条上方多了一个点？数据有问题？我无法理解。我有很多这样的图，其中一些点位于红色或蓝色条的下方或上方。

我想获得：1）所有点都沿着中央绿色条，或2）点沿着它们对应的条（因此模型1的点沿着模型1条等等）

**更新：**我有一个猜测 - 这可能是一个异常点，它会自动显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:14:12.223

是的，这是一个异常值。我应该早点猜到。

这是一个解决方案。也许它对某人有用。

```
ggplot(ph, aes(x=factor(X2), y=res)) + 
  geom_hline(yintercept = -6:2, color="grey") +
  geom_boxplot(aes(fill=factor(model)), outlier.size=NA) + 
  opts(axis.text.x = theme_text(angle = 45)) +
  geom_point() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:09:54.173

如果你`geom_point()`从你的情节中删除，你会看到，这些确实是异常值（正如你所怀疑的那样），它们被描述为每个点`?geom_boxplot`。

除了箱线图之外，您为什么要描绘所有数据点超出了我的范围。

# javafx - Javafx 2.0：如何使用 CSS 更改单选按钮圆圈的大小？

> ID：12038179
> 
> 赞同：7
> 
> 时间：2012-08-20T13:00:05.833
> 
> 标签：javafx, javafx-2, fxml, scenebuilder

我尝试使用 FXML 和 CSS 更改我的应用程序构建中的单选按钮大小。我使用场景生成器。

谢谢你的帮助 ！

这是我的单选按钮的实际 CSS 代码：

```
.radio-button .radio{
-fx-border-width     : 1px   ;
-fx-border-color     : #000  ;
-fx-background-color : white ;
-fx-background-image : null  ;
-fx-border-radius    : 15px  ;
-fx-height           : 15px  ; /* Not working */
height               : 5px   ; /* Not working */
}
.radio-button .radio:selected{
-fx-background-color : white ;
-fx-background-image : null  ;
}
.radio-button -radio:armed{
-fx-background-color : white ;
-fx-background-image : null  ;
}
.radio-button -radio:determinate{
-fx-background-color : white ;
-fx-background-image : null  ;
}
.radio-button -radio:indeterminate{
-fx-background-color : white ;
-fx-background-image : null  ;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T14:55:18.933

`-fx-padding: 10px;`

单个填充值意味着所有填充都相同，如果指定了一组四个填充值，则它们用于区域的顶部、右侧、底部和左侧边缘。

来自[JavaFX CSS 参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)

例子：

CssTest.java

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.RadioButton;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class CssTest extends Application 
{
    public void start(Stage stage) throws Exception
    {
        BorderPane root = new BorderPane();
        RadioButton radio = new RadioButton("radio-text");
        root.setCenter(radio);
        root.getStylesheets().add(getClass().getResource("/radio.css").toExternalForm());
        stage.setScene(new Scene(root));
        stage.show();
    }

    public static void main(String[] args)
    {
        launch(args);
    }
} 
```

无线电.css

```
.radio-button .radio {
    -fx-border-width: 1px;
    -fx-border-color: #000;
    -fx-background-color: white;
    -fx-background-image: null;
    -fx-border-radius: 15px;
    -fx-padding: 4px;
}
.radio-button .radio:selected {
    -fx-background-color: white;
    -fx-background-image: null;
}
.radio-button -radio:armed {
    -fx-background-color: white;
    -fx-background-image: null;
}
.radio-button -radio:determinate {
    -fx-background-color: white;
    -fx-background-image: null;
}
.radio-button -radio:indeterminate {
    -fx-background-color: white;
    -fx-background-image: null;
}
.radio-button .dot {
    -fx-background-radius: 15px;
    -fx-padding: 8px;
} 
```

结果

![样式化的 JavaFX 单选按钮](../Images/9a83807c54219706adb102fb4189268c.png)

有关更多鼓舞人心的 JavaFX CSS 主题，请查看**GreggSetzer** [/JavaFX-CSS-Themes 的](https://github.com/GreggSetzer/JavaFX-CSS-Themes)win7glass.css

# java - 带有本机代码的多核 Java 程序

> ID：12038180
> 
> 赞同：7
> 
> 时间：2012-08-20T13:00:07.603
> 
> 标签：java, parallel-processing, scalability, multicore, native-code

我在 Java 程序中使用本机 C++ 库。Java 程序是为使用多核系统而编写的，但它无法扩展：最好的速度是使用大约 6 个内核，即添加更多内核会减慢速度。我的测试表明对本机代码的调用本身会导致问题，因此我想确保不同的线程访问本机库的不同实例，从而消除并行任务之间的任何隐藏（内存）依赖关系。换句话说，而不是静态块

```
static {
    System.loadLibrary("theNativeLib");
} 
```

我希望为每个线程动态加载库的多个实例。主要**问题**是这是否可能。然后怎么做！

注意： - 我在 Java 7 fork/join 以及 Scala/akka 中都有实现。因此，感谢每个平台的任何帮助。- 并行任务完全独立。事实上，每个任务可能会创建几个新任务然后终止；不再依赖！

这是 fork/join 风格的测试程序，其中 processNatively 基本上是一堆原生调用：

```
class Repeater extends RecursiveTask<Long> {
    final int n;
    final processor mol;

    public Repeater(final int m, final processor o) {
        n=m;
        mol = o;
    }
    @Override
    protected Long compute() {
        processNatively(mol);
        final List<RecursiveTask<Long>> tasks = new ArrayList<>();
        for (int i=n; i<9; i++) {
            tasks.add(new Repeater(n+1,mol));
        }

        long count = 1;
        for(final RecursiveTask<Long> task : invokeAll(tasks)) { 
            count += task.join(); 
        }
        return count;
    }
}
private final static ForkJoinPool forkJoinPool = new ForkJoinPool();

public void repeat(processor mol)
{
    final long middle = System.currentTimeMillis();     
    final long count = forkJoinPool.invoke(new Repeater(0, mol));
    System.out.println("Count is "+count);
    final long after = System.currentTimeMillis();      
    System.out.println("Time elapsed: "+(after-middle));
} 
```

**换一种说法：** 如果我有 N 个线程使用本机库，如果每个线程都调用 System.loadLibrary("theNativeLib"); 会发生什么？动态地，而不是在静态块中调用它一次？他们会共享图书馆吗？如果是，我怎样才能欺骗 JVM 将其视为独立加载的 N 个不同的库？（N的值是静态未知的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:11:43.570

javadoc for`System.loadLibrary`声明它与调用相同 `Runtime.getRuntime().loadLibrary(name)`。对此的 javadoc `loadLibrary`( [http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#loadLibrary(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#loadLibrary(java.lang.String)) ) 指出“如果调用此方法的次数超过一次使用相同的库名称，第二次和后续调用将被忽略。”，所以看起来你不能多次加载同一个库。在欺骗 JVM 认为有多个实例方面，我无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:36:24.503

您需要确保您没有任何共享资源的瓶颈。例如，假设您有 6 个超线程内核，您可能会发现 12 个线程是最佳的，或者您可能会发现 6 个线程是最佳的（并且每个线程都有一个专用的内核）

如果您有一个繁重的浮点例程，那么超线程可能会更慢而不是更快。

如果您正在使用所有缓存，尝试使用更多缓存可能会降低系统速度。如果您使用 CPU 到主内存带宽的限制，尝试使用更多带宽可能会降低您的机器速度。

> 但是，我怎样才能引用不同的实例呢？我的意思是加载的类将具有相同的名称和包，对吗？如果您加载两个包含具有相同名称和包的类的动态库，通常会发生什么情况？

只有一个实例，您不能多次加载 DLL。如果您想为每个线程构建不同的数据集，您需要在库外部执行此操作并将其传递给库，以便每个线程可以处理不同的数据。

# php - MediaWiki 文本表是如何连接到类别表的？

> ID：12038181
> 
> 赞同：1
> 
> 时间：2012-08-20T13:00:10.107
> 
> 标签：php, mysql, mediawiki

我正在尝试为某个类别查找相应的文本记录。

例如，如果我的“categorylinks”记录的 ID 为 5，我将如何找到属于该类别的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:20:29.400

**编辑：**我仍然不确定您是在要求类别页面的文本还是类别中页面的文本，所以这两者都是：

**类别页面的文本：**

```
select old_text from text, revision, page, categorylinks
where rev_text_id = old_id
    and rev_id = page_latest
    and page_namespace = 14
    and page_title = cl_to
    and cl_from = <cl_from entry in categorylinks table> 
```

**类别中的页面文本：**

```
select old_text from text, revision, page, categorylinks
where rev_text_id = old_id
    and rev_id = page_latest
    and page_id = cl_from
    and cl_to = <cl_to entry in categorylinks table> 
```

**更多解释：**

基本上，在 categorylinks 中，`cl_title`是类别页面的标题。`page_title`因此，您可以使用and `page_namespace`= 14（类别命名空间）在页表中查找它。一旦有了正确的页面，该`page_latest`行的字段就等于`rev_id`修订表中的字段。这为您提供类别页面的最新版本。修订表`rev_text_id`的字段`old_id`与文本表中的字段相同。`old_text`在文本表中是您的文本。

任何时候你想要一个页面的文本，它基本上都是这样工作的。查找页面数据库记录。然后：`page.page_latest = revision.rev_id and revision.rev_text_id = text.old_id`。

另请参阅：[MediaWiki 数据库模式](http://upload.wikimedia.org/wikipedia/commons/thumb/3/33/MediaWiki_database_schema_1-19_%28r102798%29.svg/2193px-MediaWiki_database_schema_1-19_%28r102798%29.svg.png)。

# javascript - 使用js刷新间隔页面

> ID：12038183
> 
> 赞同：24
> 
> 时间：2012-08-20T13:00:28.360
> 
> 标签：javascript, html, refresh

如何使用 javascript 每分钟刷新一次页面。注意：我没有控制/选项来编辑 HTML 正文标记（我们通常调用 onload 函数）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-20T13:03:15.547

只需将此代码插入页面中的任何位置：

```
<script type="text/javascript">
  setTimeout(function(){
    location = ''
  },60000)
</script> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-20T13:03:15.267

```
<script type="text/javascript">
    setTimeout(function () { 
      location.reload();
    }, 60 * 1000);
</script> 
```

[setTimeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)将在指定的毫秒数后[重新加载](http://www.w3schools.com/jsref/met_loc_reload.asp)`60 * 1000 = 1m`页面，因此. 此外，由于页面正在刷新，超时将始终在页面加载时设置。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-20T13:06:39.397

您不需要在 body 标记中包含代码。只需在下面添加此代码段，无论它位于页面的哪个位置，它都应该可以工作。

```
<script type="text/javascript">
    setInterval('window.location.reload()', 60000);
</script> 
```

只要您可以在某些地方访问 HTML 并且您的编辑器不会过滤掉标签，您应该没问题。如果您的编辑器有一个单独的 JavaScript 代码区域，那么只需输入 setInterval 行。:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-18T08:09:24.210

事情是这样的，伙计！ *（第 4 点是针对这个特定问题的）*

1）。如果您想一遍又一遍地重新加载相同的窗口，那么只需执行
`window.location.reload()`

2）。如果您想从服务器硬重新加载然后执行
`window.location.reload(true)`
（基本上，只需`true`作为布尔参数传递给同一行代码）

3）。如果您想在超时的情况下完成与第 1 点和第 2 点相同的工作。即在一段时间后执行重新加载，JUST ONCE，然后执行
`setTimeout("window.location.reload()",10000);`
（这应该在 10 秒后在窗口上执行。JUST ONCE）

4）。如果您想在一定的超时时间内继续重新加载窗口，请执行
`setInterval("window.location.reload()",10000);`

（这应该在 10 秒后在窗口上执行。间隔为 10 秒）

当然，有很多方法可以传递回调..
`setInterval(function(){window.location.reload();},10000);`
或

```
<code>
function call1(){
  location.reload(true);
}
setInterval(call1,10000);
</code> 
```

*注意：*
-查看 [setTimeout][1] 和 [setInterval][2] 函数的 MDN 指南。
- 使用`window`对象是可选的，但很好用。（window 是一个全局对象，并且已经可用于您当前的窗口。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-30T08:45:23.420

如果您不想编辑页面，这就是诀窍。打开控制台并编写下面提到的代码段。

```
INTERVAL = 5    // seconds
STOP_AFTER = 15 // seconds

// Open the same link in the new tab
win1 = window.open(location.href);

// At every 5 seconds, reload the page
timer1 = setInterval(() => {
    win1.location.reload();
    console.log("Refreshed");
},INTERVAL*1000)

// Stop reloading after 15 seconds
setTimeout(() => clearInterval(timer1), STOP_AFTER*1000) 
```

1.  既然你想重新加载它，你不能简单地写 location.reload() 因为控制台将在重新加载后被清除。
2.  因此，它将打开一个具有相同链接的新选项卡。使用第一个选项卡的控制台可以轻松控制第二个选项卡。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-12T15:22:38.767

当您的 URL 有参数时，似乎 using`location = ''`在 IE8 中不起作用。页面在没有任何参数的情况下重新加载。

以下代码适用于我：

```
<script type="text/javascript">
  setTimeout(function(){
      window.location.href = window.location.href;
  },10000)
</script> 
```

# asp.net - 不错的重载结构

> ID：12038184
> 
> 赞同：0
> 
> 时间：2012-08-20T13:00:29.687
> 
> 标签：asp.net

我创建了一个库函数，并希望添加一个重载，它使用附加参数执行非常相似的操作。现有代码如下所示：

```
public class MealsAllocation
{
    public int mealId;
    public List<CrewSummary> crew;

    private MealsAllocation() { }
    public MealsAllocation(int MealId) {
        mealId = MealId;
        string connStr = ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString;
        SqlConnection conn = new SqlConnection(connStr);

        //first fill an ienumerable redemption object for the meal
        List<MealRedemption> mealRedemptions = new List<MealRedemption>();
        SqlCommand cmdRed = new SqlCommand("tegsGetMealsRedemption", conn);
        cmdRed.CommandType = CommandType.StoredProcedure;
        cmdRed.Parameters.Add(new SqlParameter("@mealId", MealId));
        conn.Open();
        SqlDataReader drRed = cmdRed.ExecuteReader();
        while (drRed.Read())
        {
            MealRedemption mr = new MealRedemption(Convert.ToInt32(drRed["crewId"]), Convert.ToDateTime(drRed["creation"]), Convert.ToInt32(drRed["redeemed"]));
            mealRedemptions.Add(mr);
        }
        conn.Close();

        //then fill the crew list
        crew = new List<CrewSummary>();
        SqlCommand cmdCrew = new SqlCommand("tegsGetMealsAllocation", conn);
        cmdCrew.CommandType = CommandType.StoredProcedure;
        cmdCrew.Parameters.Add(new SqlParameter("@mealId", MealId));
        conn.Open();
        SqlDataReader drCrew = cmdCrew.ExecuteReader();
        while (drCrew.Read())
        {
            int drCid = Convert.ToInt32(drCrew["id"]);
            List<MealRedemption> drMr = mealRedemptions.FindAll(red => red.crewId == drCid) ;
            CrewSummary cs = new CrewSummary(drCid, Convert.ToInt32(drCrew["allocation"]), drMr );
            crew.Add(cs);
        }
        conn.Close();

    } 
```

那么现在我想添加一个新的重载，看起来有点像这样：

```
 public MealsAllocation(int MealId, int crewId)
    {
    } 
```

本质上，这将与上述内容大致相同但略有不同。

避免“复制和粘贴继承”的好策略是什么？即重构上述内容的好方法，使其更容易承受重载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:06:47.233

如何将您的逻辑移动到一个`internal`函数中，以便它只能在这个程序集中访问，以及这个类并使用[可选参数](http://weblogs.asp.net/scottgu/archive/2010/04/02/optional-parameters-and-named-arguments-in-c-4-and-a-cool-scenario-w-asp-net-mvc-2.aspx)......像这样：

```
public class MealsAllocation
{
    public int mealId;
    public List<CrewSummary> crew;

    private MealsAllocation() 
    {
    }

    public MealsAllocation(int MealId) 
    {
        DoWork(MealId);
    }

    public MealsAllocation(int MealId, int crewId)
    {
        DoWork(MealId, crewId);
    }

    internal void DoWork(int MealId, int crewId = -1)
    {
        // have your logic here based on your parameter list

        // valid crewId passed, then add new param for DB proc
        if (crewId > -1)
        {
            cmdCrew.Parameters.Add(new SqlParameter("@crewId", crewId));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:06:48.617

您可以使用用户对象初始化程序

```
var mealRedemption = new
{ 
  MealId = yourvlue,
  Crew = crew
}; 
```

链接：http: [//msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:07:20.113

首先想到的是用两种不同的方法分割一大块代码，为每种方法提供一个专门的功能

```
public MealsAllocation(int MealId) 
{
    List<MealRedemption> mealRedemptions = LoadMealRedemptions(MealID);
    LoadCrewSummaryByMeal(mealRedemptions, MealID);
} 
```

而另一个构造函数可能是

```
public MealsAllocation(int MealId, int crewId) 
{ 
    List<MealRedemption> mealRedemptions = LoadMealRedemptions(MealID);
    LoadCrewSummaryByCrew(mealRedemptions, MealID, crewID);
} 
```

在第一个构造函数中，您调用加载 MealRedemptions 列表的私有方法，获取其输出并传递给专门的方法，该方法仅使用 MealID 和从第一个方法获得的列表来加载 CrewSummary 列表。

在第二个构造函数中，您可以使用与第一个构造函数相同的方法，然后使用不同的方法来加载 CrewSummary。您的第二个构造函数的要求不明确，可能会更改第二种方法的设计（我的意思是，您如何使用 crewID 参数更改内部工作以构建 CrewSummary 列表？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T13:14:11.003

既然你想重载你的**构造函数**，你也可以尝试这样的方法：

```
public MealsAllocation(int MealId) : this (MealId, null)
{
}
public MealsAllocation(int MealId, int? crewId) 
{
  // Initialize your instance as needed
  if (crewId.HasValue)
  {
    // Do some more stuff
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T13:14:39.387

尽管我不建议在构造函数中执行所有这些操作，但您可以简单地在末尾添加一个可选参数：

```
public class MealsAllocation  
{  
    public int MealId { get; set; }
    public int CrewId { get; set; }

    public List<CrewSummary> Crew { get; set; };

    public MealsAllocation(int mealId, int crewId = 0)  
    {  
        this.MealId = mealId;
        this.CrewId = crewId;

        if(this.CrewId = 0) // etc...
} 
```

旁注：您需要在,和对象`using`周围添加语句，否则您可能会遇到连接和/或内存泄漏。就个人而言，我会创建一个数据访问层并将所有与数据相关的方法放在那里，以使它们在整个业务层中可重用。`SqlConnection``SqlCommand``SqlDataReader`

另外，我认为这可能是该`Lazy<T>`对象的一个​​很好的候选者：http: [//msdn.microsoft.com/en-us/library/dd642331.aspx](http://msdn.microsoft.com/en-us/library/dd642331.aspx)

# excel - 查找范围内的列号？

> ID：12038186
> 
> 赞同：3
> 
> 时间：2012-08-20T13:00:31.340
> 
> 标签：excel, vba

我正在尝试使用过滤器选项来过滤我的范围。

```
 ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=11, Criteria1:="yes" 
```

基本上，这将过滤列 U 为是。
我拥有的是一个下拉列表，我需要它来查找该条目在该范围内的哪个字段。例如，U 列包含名称“John”

因此，如果我从下拉列表中选择 John，它将需要查看范围，找到 John 列，然后返回它是什么字段（在本例中为 11）

在 T 列中是姓名 Ben。如果我从下拉列表中选择 Ben，那么它将执行相同的过滤器，但该字段将为 10。

无论如何我可以根据从下拉列表中选择的内容来计算字段编号吗？

```
 Sub Report()
    Dim oSht As Worksheet
    Dim lastRow As Long
    Dim LastCol As Long
    Dim nice As Long
    Dim strSearch As String
    Dim aCell As Range
    Set oSht = Sheets("Overview")
    lastRow = oSht.Range("B" & Rows.Count).End(xlUp).Row
With ActiveSheet.Shapes("Dropdown").ControlFormat
    strSearch = .List(.Value)
End With
    MsgBox strSearch
    Set aCell = oSht.Range("K2:Z100").Find(What:=strSearch, LookIn:=xlValues, _
    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)
    If Not aCell Is Nothing Then
         nice = aCell.Column - 10
        ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=nice, Criteria1:="yes"

        End If
End Sub 
```

所以这就是我让它工作的方式。现在我只需要知道如何将下拉列表中的选项存储为变量并设置一个宏来清除过滤器，然后就可以了！PS - 无法让最后一列查找位工作，因为它一直说“需要对象”，所以手动设置它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T13:46:17.210

您可以使用 acell 的当前区域属性来获取区域内的列号，请参见[此处](https://stackoverflow.com/questions/24018809/macro-explanation/24019440#24019440)

```
Sub Report()
    Dim oSht As Worksheet
    Dim lastRow As Long
    Dim LastCol As Long
    Dim nice As Long
    Dim strSearch As String
    Dim aCell As Range
    Set oSht = Sheets("Overview")
    lastRow = oSht.Range("B" & Rows.Count).End(xlUp).Row

    With ActiveSheet.Shapes("Dropdown").ControlFormat
        strSearch = .List(.Value)
    End With

    MsgBox strSearch

    Set aCell = oSht.Range("K2:Z100").Find(What:=strSearch, LookIn:=xlValues, _
    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        'nice = aCell.Column - 10
        'ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=nice, Criteria1:="yes"
        ''''''
         With aCell
           nice = aCell.Column - .CurrentRegion.Cells(1).Column + 1
           ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=nice,Criteria1:="yes" 'Criteria1:=aCell
         End With
    End If
End Sub 
```

然后使用组合

```
Sub ClearCombo()
With Sheets("Sheet1").ComboBox1
    .Clear
End

Sub showAllData()
Worksheets("Sheet1").ShowAllData
End Sub 
```

根据需要清除组合框选择并显示所有数据

# spring - Hibernate 搜索 + DbUnit 索引

> ID：12038189
> 
> 赞同：1
> 
> 时间：2012-08-20T13:00:40.933
> 
> 标签：spring, hibernate, search, hibernate-search

我正在为我的休眠搜索实现编写一些 JUnit。

我在内存数据库中使用 HSSQL。我使用 DBUnit 来填充这个 DB（一个 XML 文件）。它绝对可以像其他非搜索测试使用相同的数据一样工作。搜索代码绝对有效，因为我在网络应用程序中尝试过它并返回正确的记录。

我假设 Hibernate Search 只会索引使用 Hibernate 插入的数据库条目。我尝试使用以下方法手动索引数据库：-

```
fullTextEntityManager.createIndexer().startAndWait(); 
```

我把它放在一个在 Spring 初始化后运行的 bean 中

```
public class SearchIndexer {

  @Autowired
  private EntityManagerFactory entityManagerFactory;

  public SearchIndexer(){
  }

  @PostConstruct
  public void doIndexing(){
    EntityManager em = entityManagerFactory.createEntityManager();
    FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(em);
    try {
      fullTextEntityManager.createIndexer().startAndWait();
    }
    catch (InterruptedException e) {
      e.printStackTrace();
    }
  }
} 
```

我还将它自动连接到我的 JUnit 类中，并手动运行 doIndexing 方法（以确保在加载数据后正确拾取它）。

```
@Before
public void setup() throws Exception{  
  dbUnitAdapter.setup("ClubDaoTest.xml");
  searchIndexer.doIndexing();
  super.before();
} 
```

dbUnitAdapter 只需要一个 XML 文件并使用 DBUnit 将其插入到数据库中。

实体的注释如下： -

```
 @Field
  private String name;

  @NotBlank
  private String type;

  @Field
  private String address1;

  @Field
  private String county;

  @Field
  private String address2;
  @Field
  private String town;
  @Field
  private String country;
  @Field
  private String postcode;
  private String telephone;
  private String mobile;
  private String fax;
  @Field
  private String email;

  @Field
  @NumericField
  private long lft;
  @Field
  @NumericField
  private long rgt; 
```

我也尝试过使用休眠（创建俱乐部实体）插入数据，这也没有令人困惑。我将搜索索引位置从 RAM 更改为文件系统，并使用卢克读取它。我可以看到我尝试使用 hibernate 插入的数据，但看不到其他数据，尽管这是我第一次使用 Luke，所以我可能犯了一个错误。

# backbone.js - 在第一次加载时为模型渲染视图，而不是在每次更改时

> ID：12038192
> 
> 赞同：0
> 
> 时间：2012-08-20T13:00:47.323
> 
> 标签：backbone.js, backbone-events, backbone-views

我想在第一次获取模型时渲染模型的视图，但不是在每次更改时。

我的设置如下：

```
var m = new $.model.Customer({id: customer});
var v = new $.view.GeneralEditView({el: $("#general"), model: m});
m.fetch(); 
```

然后在视图初始化中，我将更改事件绑定到渲染方法以在加载模型时进行渲染：

```
this.model.bind('change', this.render); 
```

问题是视图会在每次更改时呈现。我只想在获取后渲染。不幸的是，除了更改之外，我不知道在获取模型后触发的任何事件。

对于我可以绑定的集合，是否有类似“重置”的东西？

编辑：

也许更简洁地说，对于 Backbone 模型，有没有办法区分模型何时从服务器加载和本地更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:07:22.927

**楷模**

您可以使`change`事件特定于某个键更改，例如 uniqueId（如果有的话）：

```
this.model.bind('change:id', this.render, this); 
```

默认情况下，`fetch`不会直接触发任何事件，而是在`change`使用加载新数据后间接触发事件`set`

如果这不是一个选项，您可以随时在`fetch`函数中触发事件：

```
initialize: function () {
    this.model.bind("fetch", this.update, this);
}

fetch: function () {
    // do stuff
    this.model.trigger("fetch", this);
}

update: function () {
    // your refresh stuff here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:38:55.257

有很多不同的方法可以解决这个问题（这些都假设`var view = this;`在您的视图代码中）：

*   `.fetch()`使用一次性成功回调调用：

    ```
    m.fetch({
        success: function() {
            view.render();
        }
    }); 
    ```

*   在处理程序中绑定`change`但取消绑定：

    ```
    function handle() {
        view.render();
        view.model.off('change', handle);
    }
    this.model.bind('change', handle); 
    ```

*   用于`_.once`限制处理程序调用：

    ```
    this.model.bind('change', _.once(function() {
        view.render();
    })); 
    ```

*   为您的模型使用`.ready()`模式 -[示例在这里](https://github.com/nrabinowitz/gapvis/blob/master/app/models/Model.js#L28)。在多个视图需要知道模型何时加载的情况下，以及当您需要能够编写相同的代码而不用担心您的模型是否已加载的情况下，我喜欢这个选项。这样做的缺点是它需要您添加一个模型方法，例如`.isFullyLoaded()`每次都进行测试；好处是使用测试函数而不是设置标志，允许模型作为集合的一部分批量加载，而无需更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:50:17.293

我可能有一个来自[https://github.com/documentcloud/backbone/pull/1468#issuecomment-6766096](https://github.com/documentcloud/backbone/pull/1468#issuecomment-6766096)的通用解决方案。我重写了 Backbone 上的同步方法，如下所示：

```
Backbone.Model.prototype.sync = function(method, model, options) {

    var succ = options.success;
    var customSuccess = function(resp, status, xhr) {
         //call original
        succ(resp, status, xhr);
        model.trigger('synced', model, options);
    }
    options.success = customSuccess;
    Backbone.sync(method, model, options);
 } 
```

要保存原始的成功方法，因为除非我需要，否则我不想弄乱它，请传递自定义成功方法。当调用自定义成功方法时，将按照@Austin 的建议触发自定义事件，然后调用原始成功方法。

# bash - Unix bash 脚本排序

> ID：12038193
> 
> 赞同：1
> 
> 时间：2012-08-20T13:00:54.417
> 
> 标签：bash, unix

我需要帮助来计算和显示一组输入数字的最大值和平均值。

该程序应接受一组数字，每个数字最多为 3 位。

例如，输入 246、321、16、10、12345、4、274 和 0 应导致 321 为最大值，平均值为 145，并显示错误消息指示 12345 无效。

任何想法如何在 bash 中排序？对不起，我不是这个低级别的开发人员，任何帮助都很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:00:24.980

我看到您要求`Bash`解决方案，但是由于您也对其进行了标记，因此`Unix`我建议使用纯`awk`解决方案（`awk`非常适合此类问题）：

```
awk '
  {
    if(length($1) <= 3 && $1 ~ /^[0-9]+$/) {
      if($1 > MAX) {MAX = $1}
      SUM+=$1
      N++
      print $1, N, SUM
    } else {
      print "Illegal Input " $1
    }
  }
  END {
    print "Average: " SUM / N
    print "Max: " MAX
  }
' < <(echo -e "246\n321\n16\n10\n12345\n4\n274\n0") 
```

印刷

```
246 1 246
321 2 567
16 3 583
10 4 593
Illegal Input 12345
4 5 597
274 6 871
0 7 871
Average: 124.429
Max: 321 
```

但是，我无法理解为什么上述输入平均产生 145？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:38:19.340

```
tmpfile=`mktemp`
while read line ; do
  if [[ $line =~ ^[0-9]{1,3}$ ]] ; then 
    # valid input
    if [ $line == "0" ] ; then
      break
    fi  
    echo $line >> $tmpfile
  else 
    echo "ERROR: invalid input '$line'"
  fi  
done
awk ' { tot += $1; if (max < $1) max = $1; } \
  END { print tot / NR; print max; } ' $tmpfile
rm $tmpfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:40:23.540

一个管道`coreutils`选项`bc`：

```
echo 246 321 16 10 12345 4 274 0           \
| grep -o '\b[0-9]{1,3}\b'                 \
| tee >(sort -n | tail -n1 > /tmp/max)     \
| tr '\n' ' '                              \
| tee >(sed 's/ $//; s/ \+/+/g' > /tmp/add) \
      >(wc -w > /tmp/len) > /dev/null

printf "Max: %d, Min: %.2f\n" \
  $(< /tmp/max)               \
  $((echo -n '('; cat /tmp/add; echo -n ')/'; cat /tmp/len) | bc -l) 
```

输出：

```
Max: 321, Min: 124.43 
```

*   `grep`确保数字格式约束。
*   `sort`*按照chepner*的建议，找到最大值
**   `sed`并`wc`生成和和除数。*

 *请注意，这会生成 3 个临时文件：`/tmp/{max,add,len}`，因此您可能希望使用`mktemp`和/或删除：

```
rm /tmp/{max,add,len} 
```

### 编辑

如果您想了解无效输入，请将其粘贴到管道的前面：

```
tee >(tr ' ' '\n'            \
      | grep -v '\b.{1,3}\b' \
      | sed 's/^/Invalid input: /' > /tmp/err) 
```

并`cat /tmp/err`在`printf`.*

# jqplot - 获取系列标签名称以显示为文本

> ID：12038196
> 
> 赞同：1
> 
> 时间：2012-08-20T13:00:59.170
> 
> 标签：jqplot

我有一个条形图。请找到下面的条形图代码。还可以找到作为给定脚本结果的附加图像。

```
$(document).ready(function(){
    var s1 = [2, 6, 7, 10];
    var s2 = [7, 5, 3, 2];
    var s3 = [14, 9, 3, 8];
    var tickx = ["aaa", "bbb", "ccc"];
    plot3 = $.jqplot('chart3', [s1, s2, s3], {
        stackSeries: true,
        captureRightClick: true,
        seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            rendererOptions: {
                highlightMouseDown: true    
            },
            pointLabels: {show: true}
        },
        legend: {
            show: true,
            location: 'e',
            placement: 'outside'
        },
       axes: { 
           xaxis: {
              renderer: $.jqplot.CategoryAxisRenderer,
              ticks: tickx
          }
       }
    });

    $('#chart3').bind('jqplotDataRightClick', 
        function (ev, seriesIndex, pointIndex, data) {
            $('#info3').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
        }
    ); 
}); 
```

右键单击栏，它将显示右键单击栏的值。

> 您右键单击：系列：2，点：1，数据：2,9。

这里，数据值（data: 2,9）中的值2就是xaxis序列号。而不是系列名称，我想获得图表中使用的刻度。

在上面的脚本中给出的刻度是：`["aaa", "bbb", "ccc"];`

我希望输出显示为

如果用户单击系列 1 轴。结果应该是

> 您右键单击：系列：2，点：1，数据：1,7，系列标签：aaa。

请帮助我实现这一目标。提前致谢。

问候，

安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:38:01.733

阅读我上面的评论。如果您在右键单击 xaxis 类别位置之后，请使用以下命令：

```
$('#chart3').bind('jqplotDataRightClick', 
        function (ev, seriesIndex, pointIndex, data) {
            $('#info3').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data + ' category label: ' + plot3.axes.xaxis.ticks[pointIndex]);
        }
    ); 
```

在您的事件处理程序中。

# sharepoint - 删除列表项时 Sharepoint 对象模型中的奇怪错误

> ID：12038198
> 
> 赞同：0
> 
> 时间：2012-08-20T13:01:08.400
> 
> 标签：sharepoint, sharepoint-2010, shared-libraries

我遇到了非常奇怪的错误，在过去的几个小时里解决了这个问题

“当前不允许对 GET 请求进行更新。要允许对 GET 进行更新，请在 SPWeb 上设置 'AllowUnsafeUpdates' 属性。”

```
 Public Shared Sub DeleteListItem(ByVal listname As SPList, ByVal intItemID As Integer)

        Using MySite As New SPSite(SPContext.GetContext(System.Web.HttpContext.Current).Web.Url)

            Using MyWeb As SPWeb = MySite.OpenWeb()
                MyWeb.AllowUnsafeUpdates = True
                Dim itemColforGivenList As SPListItemCollection
                Dim query As New SPQuery()
             query.Query = "<Where><Eq><FieldRef Name='ID'/><Value Type='Counter'>" &    
                intItemID & "</Value></Eq></Where>"
                MyWeb.AllowUnsafeUpdates = True
                itemColforGivenList = listname.GetItems(query)
                If itemColforGivenList.Count > 0 Then
                    For i As Integer = listname.Items.Count - 1 To 0 Step -1
                        If listname.Items(i).ID = intItemID Then
                            MyWeb.AllowUnsafeUpdates = True
                            listname.Items.Delete(i)
                            listname.Update()
                            MyWeb.AllowUnsafeUpdates = False
                        End If
                    Next

                End If

            End Using
        End Using 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:15:40.380

你试过`MyWeb.Update();`之后直接打电话`MyWeb.AllowUnsafeUpdates = true;`吗？调用可能`listname.Update()`是通过直接从 Web 中提取而不是表示您在当前上下文中拥有的 Web 的对象来检查此属性。这确实会产生一些问题，因为您需要多次调用该网络/列表上的更新以启用和禁用该属性并删除该项目，因此请记住这一点。

# algorithm - 查找一个元素在 n 元素数组中是否出现 n/4 次

> ID：12038204
> 
> 赞同：0
> 
> 时间：2012-08-20T13:01:28.517
> 
> 标签：algorithm

我被问到这个问题。我尝试使用多数元素方法，但它对我不起作用。请提供一些提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:10:37.720

1.  及时找出中位数`O(n)`。
2.  使用 3 路分区基于该中值对数组进行分区。
3.  如果中值本身是必需的元素，则执行
    else
    在两个分区（中值的左侧和右侧）上应用多数元素算法。（在您的情况下，找到在 n/2 的数组中出现超过 n/4 次的元素）。两者都会`O(n)`及时运行。

总时间为`3*O(n)=O(n)`。
希望这可以帮助 ：）

# regex - 仅删除文件的第一个标记

> ID：12038205
> 
> 赞同：1
> 
> 时间：2012-08-20T13:01:36.250
> 
> 标签：regex, bash

我对脚本不太熟悉。这可能是一个非常容易的问题。我想删除每个文件的第一个令牌。

```
 file 1

 1 this is good

  file 2
  2 this is another file. 
```

我想从文件 1 和文件 2 中删除 1 和 2。该怎么做？有任何 bash 命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:31:05.007

或者使用 awk：

```
$ awk '{if (NR==1) {$1="";print $0;} else print $0}' input_file 
```

（这会保留行首的空间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:07:49.270

使用 sed 并假设您不想保留前导空格：

```
sed '1{s/\s*\w*//}' input_file 
```

这将适用于第一行 ( `1{}`) 并使用替换命令 ( `s/pattern/replace/`) 删除第一个空格和后面的单词字符 ( `\s*\w*`)。单词字符是 [a-zA-Z0-9]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:08:59.597

```
$ sed '0,/1/{s/1//}' f1 
  this is good 
```

# unity3d - 铰链制作绳

> ID：12038207
> 
> 赞同：1
> 
> 时间：2012-08-20T13:01:47.000
> 
> 标签：unity3d, physics

几个月前我进入了 unity3d 编程。我已经很容易用unity3d清除了一些项目。在最近我的项目中，我必须制作一条像链子一样的绳子。

我阅读了一些文章并使用铰链接头制作了它。

问题：关节数量较少，效果很好。但如果它超过一百个关节，它就失去了它的安全性。

进展：所以我一直在寻找解决这个问题的方法，但是我找不到它的完美解决方案。

怎么能做到这一点？我怎么解决这个问题。感谢您阅读我的文章。

# c# - 单击 jquery 确认按钮后处理 mvc 操作

> ID：12038208
> 
> 赞同：1
> 
> 时间：2012-08-20T13:01:57.187
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

我正在尝试对我的 mvc3 删除操作实现 jquery onclick 确认对话框。值得一提的是，我很成功。渲染对话框本身，我正在努力的是在单击继续按钮后从 js 处理 /User/Delete 操作的操作。这是代码：

```
onclick-delete.js

$(function () {
    var deleteLinkObj;
    // delete Link
    $('.delete').click(function () {
        deleteLinkObj = $(this);  //for future use
        $('#delete-dialog').dialog('open');
        return false; // prevents the default behaviour
    });

    //definition of the delete dialog.
    $('#delete-dialog').dialog({
        autoOpen: false, width: 400, resizable: false, modal: true, //Dialog options
        buttons: {
            "Continue": function () {
                $.post(deleteLinkObj[0].href, function (data) {  //Post to action
                    // THIS IS WHERE I SHOULD SEND DATA TO MY DELETE ACTION (Users/Delete)
                    else {
                        alert("error");
                    }
                });
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });
}); 
```

所以，我做错了什么。点击错误后抛出，任何想法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T17:25:51.713

如果我错了，请纠正我，但这样不是更简单更有效

```
@Html.ActionLink("Delete", "Delete", 
   new { id = item.Id }, 
   new { onclick = "return confirm('Are you sure you wish to delete this article?');" }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T07:53:23.203

根据 Mark Oreta 的回答中的讨论，这就是我要做的：

如果您像往常一样设置表单，您仍然可以轻松获得用户的确认。采用以下 HTML/JS：

```
<form action="/User/Delete" method="post">

    <!-- some fields here -->

    <input id="btnSubmit" type="submit" value="Delete" />

</form> 
```

这应该正确地将表单提交到后端。有趣的是，如果你点击提交按钮，在 javascript/jQuery 中设置的任何点击事件都会在提交表单之前执行。

所以你可以这样做：

```
$("#btnSubmit").click(function(event) {

    event.preventDefault(); // --> This stops the form submit from happening.

}); 
```

如果您只需要一个用户确认的文本框，则无需使用标准`confirm()`功能以外的任何东西。这会向用户发送消息并要求他同意或取消。该函数根据用户的响应返回真/假。

所以你可以写出最简单的代码：

```
$("#btnSubmit").click(function(event) {

    var confirmationmessage = "Are you sure you want to delete this?";

    if( ! confirm(confirmationmessage) ) {

        // !confirm == the user did not confirm. Therefore stop the form submission.

        event.preventDefault(); // --> This stops the form submit from happening.

    } else {

        // The user agreed. There is no else block needed, then normal form submission may occur.

    }
}); 
```

此代码比您问题中的代码段更简单，更易于阅读。当然，如果您更喜欢使用任何其他方式来要求用户确认，那也可以。只要确保你最终得到一个`if(someboolean) { event.preventDefault(); }`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:23:17.380

我在这里为你创建了一个[JSfiddle](http://jsfiddle.net/xRUqR/3/)

我希望你拿出一些相关的代码，因为你的 post 功能设置不正确。我让它像这样工作：

```
$(function () {
    var deleteLinkObj;
    // delete Link
    $('.delete').click(function () {
        deleteLinkObj = $(this);  //for future use
        $('#delete-dialog').dialog('open');
        return false; // prevents the default behaviour
    });

    //definition of the delete dialog.
    $('#delete-dialog').dialog({
        autoOpen: false, width: 400, resizable: false, modal: true, //Dialog options
        buttons: {
            "Continue": function () {
              $.post(deleteLinkObj[0].href, function (data) { 
                  //do the data parsing here      
                  alert(data);     

                    });
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });
});​ 
```

您在这里看到的数据解析是您需要处理控制器返回的内容的地方。通常，当我做这样的事情时，我从控制器上的删除操作返回的是一个布尔值，所以在上面的 Jquery 中，你可以做类似的事情

```
if (data == true)
alert("success!");
else
alert("error"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T13:15:46.327

试试这个：

```
<script type="text/javascript">

    $(document).ready(function () {
        $('form[action$="/Delete"]').submit(function () {
            return confirm('Are you sure you want to delete ?');
        });
    }); 

</script> 
```

想想这就是全部，使用 jQuery 事件.. [http://api.jquery.com/submit/](http://api.jquery.com/submit/)

# python - httplib 和 HTTPS 代理

> ID：12038213
> 
> 赞同：2
> 
> 时间：2012-08-20T13:02:44.823
> 
> 标签：python, https, proxy, httplib

有没有办法通过 Fiddler 的代理对使用 python 发出的 HTTPs 请求进行隧道传输`httplib`，而不会将 Fiddler 变成反向代理？

我尝试使用这个例子（从[这里](https://gist.github.com/2149495)）：

```
import httplib
c = httplib.HTTPSConnection('localhost',8118)
c.set_tunnel('twitter.com',443)
c.request('GET','/')
r1 = c.getresponse()
print r1.status,r1.reason
data1 = r1.read()
print len(data1) 
```

但它返回：

```
<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>Fiddler Echo Service</TITLE></HEAD><BODY STYLE="font-family: arial,sans-serif;"><H1>Fiddler Echo Service</H1><BR /><PRE>GET / HTTP/1.1
Host: localhost:8080
Accept-Encoding: identity

</PRE><BR><HR><UL><LI>To configure Fiddler as a reverse proxy instead of seeing this page, see <A HREF='http://fiddler2.com/r/?REVERSEPROXY'>Reverse Proxy Setup</A><LI>You can download the <a href="FiddlerRoot.cer">FiddlerRoot certificate</A></UL></BODY></HTML> 
```

编辑：此代码有效。该问题与 Internet Explorer 中的代理设置有关。不要在这些设置中设置代理，否则上面的代码将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:28:18.487

我已经通过 Burp 代理尝试使用 urllib2 （[带有 urllib2的代理）并且它有效：](https://stackoverflow.com/questions/1450132/proxy-with-urllib2)

```
import urllib2
proxy = urllib2.ProxyHandler({'https': '127.0.0.1:8081'})
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)
print urllib2.urlopen('https://www.google.com').read() 
```

您的代码似乎与 Burp Suite 代理一起工作得很好。

# google-app-engine - 在 GAE 中获取图像的 url (Python 2.7)

> ID：12038214
> 
> 赞同：0
> 
> 时间：2012-08-20T13:02:44.433
> 
> 标签：google-app-engine, python-2.7

我正在尝试获取图像的 URL（GAE 的 blob 字段）：

```
class Product(db.Model):
  name = db.StringProperty()
  price = db.FloatProperty()
  added = db.DateTimeProperty(auto_now_add=True)
  image = db.BlobProperty(default=None)

url = images.get_serving_url(movie.image) 
```

服务图像处理程序：

```
def result(request):
  product = Product()
  product.name = "halva"
  url = 'http://echealthinsurance.com/wp-content/uploads/2009/11/minnesota.jpg'
  product.image = db.Blob(urlfetch.Fetch(url).content)
  product.put()

  template = loader.get_template("result.html")
  context = RequestContext(request, 
                         {
        "result" : u"Add"})

  return HttpResponse(template.render(context)) 
```

但我得到除了：

```
UnicodeDecodeError: 
```

当尝试忽略此异常（这是 Python 2.7 中的错误）时，我在其他地方遇到异常。

之后我尝试将图像编码为'latin-1'（'utf-8'不起作用）：

```
 enc_img = movie.image.decode("latin-1")
 url = images.get_serving_url(enc_img) 
```

结果： url 有一个类似于二进制文件的视图：

```
 "ÝêÓ9>èýÑNëCf Äàr0xã³3Ï^µ7±\íQÀ¡>.....ÕÝ£°Ëÿ"I¢¶L`ù¥ºûMþÒ¸ÿ+ÿL¢ï£ÿÙ' alt="" />" 
```

如何获取 url 以在模板中显示动态图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:13:12.563

你在这里混淆了两个不同的东西。

如果您将图像存储在 db.BlobProperty 中（代码未显示您正在执行此操作，但您拥有的 Schema 正在使用 db.BlobProperty），这意味着您的处理程序必须提供图像。

但是，您正在使用 image.get_serving_url，它需要一个 BlobKey 实例，该实例来自将图像存储在 BlobStore [https://developers.google.com/appengine/docs/python/blobstore/blobkeyclass](https://developers.google.com/appengine/docs/python/blobstore/blobkeyclass) 中，这与您完全不同是做。

您需要确定您想要做什么，将图像（最大大小 1MB）存储在 BlobProperty 中并提供可以提供图像的处理程序，或者将其上传到 BlobStore 并从那里提供

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:10:53.417

`images.get_serving_url`需要一个 BlobKey。尝试：

```
enc_img = movie.image
url = images.get_serving_url(enc_img.key()) 
```

# php - 无法使电子邮件脚本正常工作

> ID：12038218
> 
> 赞同：0
> 
> 时间：2012-08-20T13:02:58.417
> 
> 标签：php, email

这是我在contact.php中的代码：

```
<?php
    mail('philovesdogs@gmail.com','sdf','sadfsad');
    echo 'Ok';
?> 
```

我放回声只是为了确保 PHP 在页面上工作。我将页面上传到我的 LAMP 服务器并打开了该页面。我看了还行 但是，我检查了我的电子邮件（以及我的垃圾邮件文件夹），但没有发送任何电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:08:44.340

您需要配置并保持运行 SMTP 服务器。查看类似这样的问题：[配置 LAMP 以发送邮件](https://stackoverflow.com/questions/8722941/configuring-lamp-to-send-mails)

# interface - 当可调用是 Clojure 函数时，从 ScheduledFutureTask 获取 nil 而不是返回值

> ID：12038221
> 
> 赞同：2
> 
> 时间：2012-08-20T13:03:06.810
> 
> 标签：interface, clojure, interop, scheduled-tasks

我正在尝试使用 Executors.newSingleThreadScheduledExecutor() 来安排 Clojure 函数。令人烦恼的是，在生成的 ScheduledFutureTask 上调用 .get() 返回 nil 而不是函数的结果。

我以希基先生对期货的实施为模型。

```
(ns my.ns
    (:import (java.util.concurrent Executors ThreadFactory TimeUnit)))

(def ^:private thread-pool-scheduler (atom nil))

(def ^:private thread-pool-counter (agent 0))

(defn- get-and-increment-thread-id []
   (-> thread-pool-counter (send inc) deref))

(def ^:private thread-factory 
    (reify ThreadFactory 
     (newThread [this f]
        (let [thread (Thread. f)]
          (.setName thread (format "clojure-scheduled-future-thread-pool-%d"
                       (get-and-increment-thread-id)))
          thread))))

(defn scheduled-future-call [^Callable f ^long delay ^TimeUnit unit]
    (.schedule (scheduled-futures-executor) (bound-fn* f) delay unit))

(defn start-scheduled-futures-executor! []
    (reset! thread-pool-scheduler
    (Executors/newSingleThreadScheduledExecutor thread-factory)))

(defn scheduled-futures-executor []
    (or @thread-pool-scheduler
        (start-scheduled-futures-executor!))) 
```

一切正常，并且在适当的时候触发副作用（例如调度#(println "ok")）。但是，调用生成的 ScheduledFutureTask 的 get() 方法总是给我 nil（例如调度 #(+ 5 5)）。

我尝试显式扩展 Callable，尝试省略 bound-fn*，但结果是一样的：

```
(defprotocol ISchedule
    (schedule [this delay time-unit]))

(extend Callable
    ISchedule
    {:schedule (fn [this delay time-unit]
       (.schedule (scheduled-futures-executor) this delay time-unit))}) 
```

我的直觉是 ScheduledExecutorService 选择 schedule(Runnable, long, TimeUnit) 而不是 schedule(Callable, long, TimeUnit)，但不应该输入提示来解决这个问题吗？

非常非常感谢您的帮助或提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:13:05.420

> 我的直觉是 ScheduledExecutorService 选择 schedule(Runnable, long, TimeUnit) 而不是 schedule(Callable, long, TimeUnit),

我认为你是对的，只有我具体化`Callable`并且它工作正常。（我还在`Callable`import 语句中添加了类列表）。

编辑：我还删除了对`bound-fn*`

看看这个：

```
(defn make-callable [f] (reify Callable (call [this] (f))))

(def cat (make-callable (fn [] (println "meeow") "i am a cat")))

(def who-are-you? (scheduled-future-call cat 2 TimeUnit/SECONDS))

(println "Tell me who you are!\n\t" (.get who-are-you?)) 
```

输出：

```
meeow
Tell me who you are!
    i am a cat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:08:39.997

`^Callable`提示对您`f`没有好处，因为无论如何您都只是调用 bound-fn ，其结果不是类型提示的。你需要提示你实际传递给的东西`.schedule`。更重要的是，您需要提示目标对象本身（执行程序），因为如果没有提示目标对象，编译器将（相当合理地）忽略任何参数提示：如果它不知道，它无论如何都必须进行反射目标类型！

^(所以，在 let-binding 1)中提示这两件事，你应该没问题。您可能还需要暗示所有其他论点以消除歧义，但我不这么认为。

¹注意：不要*暗示*生成它们的表达式，例如`^Callable (bound-fn f)`. 在难以解释的情况下，这通常有效，但有时无效。最好避免这种情况。

# asp.net-mvc-3 - 在 mvc3 中进行报告的最佳方式

> ID：12038227
> 
> 赞同：0
> 
> 时间：2012-08-20T13:03:15.160
> 
> 标签：asp.net-mvc-3

我正在研究 MVC3 项目。这次我需要去报告我的项目。我的报告要求类似于**向下钻取**支持、**图表**（饼图、条形图等）。有没有根据我的要求免费提供的更好的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:06:22.303

Crystal Reports [http://en.wikipedia.org/wiki/Crystal_Reports](http://en.wikipedia.org/wiki/Crystal_Reports) 是*冷却*报告和*图表*以及_Drill_Down_ 的更好工具。它有一个免费版本。祝你好运 ！顺便说一句..它很容易建立报告。

看看这个链接[http://crystal.brothersoft.com/crystal-report-c.html](http://crystal.brothersoft.com/crystal-report-c.html)

# java - 无法找到要链接到的源外部参照

> ID：12038238
> 
> 赞同：67
> 
> 时间：2012-08-20T13:03:58.073
> 
> 标签：java, maven, maven-3, pmd

我有一个使用 pmd 插件进行代码质量检查的大型 maven 项目。

自从我开始使用 pmd 插件后，我收到以下警告消息：

```
[WARNING] Unable to locate Source XRef to link to - DISABLED 
```

我google了一下，发现我需要实现jxr插件。

所以我将以下内容添加到主 pom.xml 文件中的构建属性中。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jxr-plugin</artifactId>
    <version>2.3</version>
  </plugin> 
```

welp 它并没有真正改变任何东西。

为了解决此警告消息，我需要实施什么想法？

的输出`mvn -version`

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 10:44:56+0200)
Maven home: /usr/share/maven-bin-3.0
Java version: 1.7.0_05, vendor: Oracle Corporation
Java home: /usr/lib64/icedtea7/jre
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: "linux", version: "3.5.2-gentoo", arch: "amd64", family: "unix" 
```

谢谢！

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-21T07:50:54.453

您应该添加`maven-jxr-plugin`到该**`reportingPlugin`**部分。

```
<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jxr-plugin</artifactId>
            <version>2.3</version>
        </plugin>
    </plugins>
</reporting> 
```

重新运行它并享受。

顺便说一句，也许您需要运行一次`jxr:jxr`目标以首先生成一些将由 pmd 使用的文件。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-08-22T20:43:37.840

请注意，还可以通过添加禁用外部参照功能

```
<configuration>
  <linkXRef>false</linkXRef>
</configuration> 
```

到 maven-pmd-plugin 插件。由于运行了额外的报告插件，这解决了警告，而不会使构建时间更长。例如，如果您在 Jenkins 中运行构建，Jenkins PMD 插件可以负责将 PMD 警告与源代码相关联，无需为此运行另一个 Maven 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-16T01:53:11.507

以这种方式配置它更容易，而不是将其绑定到站点阶段。

然后，就这么简单`mvn test`。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>3.8.1</version>
      <configuration>
        <source>1.8</source>
        <target>1.8</target>
      </configuration>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>${maven-surefire-plugin.version}</version>
      <dependencies>
        <dependency>
          <groupId>org.junit.platform</groupId>
          <artifactId>junit-platform-surefire-provider</artifactId>
          <version>1.2.0</version>
        </dependency>
        <dependency>
          <groupId>org.junit.jupiter</groupId>
          <artifactId>junit-jupiter-engine</artifactId>
          <version>${junit.jupiter.version}</version>
        </dependency>
      </dependencies>
      <configuration>
      <testSourceDirectory>src/test/java</testSourceDirectory>
      <includes>
        <include>com.whatever.suite.*</include>
      </includes>
      <systemPropertyVariables>
        <selenide.remote>${grid.hub}</selenide.remote>
      </systemPropertyVariables>
      <trimStackTrace>false</trimStackTrace>
    </configuration>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-report-plugin</artifactId>
    <version>${maven-surefire-plugin.version}</version>
    <configuration>
      <outputDirectory>target/surefire-reports</outputDirectory>
      <linkXRef>false</linkXRef>
    </configuration>
    <executions>
      <execution>
        <id>during-tests</id>
        <phase>test</phase>
        <goals>
          <goal>report</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T10:07:06.590

您应该添加 maven-jxr-plugin 并`jxr:jxr`在生命周期之前运行目标，`site`如果`maven-jxr-plugin`在您的情况下作为插件添加：
`clean jxr:jxr site`

否则，如果您希望它与`mvn site`. 查看 JXR 使用文档： [JXR 使用](https://maven.apache.org/jxr/maven-jxr-plugin/usage.html)

# javascript - JS下拉菜单不起作用

> ID：12038243
> 
> 赞同：1
> 
> 时间：2012-08-20T13:04:26.280
> 
> 标签：javascript, jquery, html

我有一些 js 代码，必须在悬停时打开我的菜单。但它不会对鼠标悬停/移出做出反应。我错在哪里？

```
jQuery(document).ready(function() {
        jQuery('#user-menu').bind('mouseover', openSubMenu);
        jQuery('#user-menu').bind('mouseout', closeSubMenu);

        function openSubMenu() {
            jQuery(this).find('.dropdown-menu').css('display', 'block');    
        };

        function closeSubMenu() {
            jQuery(this).find('.dropdown-menu').css('display', 'none'); 
        };

    }); 
```

还有一些html代码在这里

```
<div id="user-menu" class="pull-right btn-group"><a class="btn btn-success dropdown-toggle" data-toggle="dropdown" href="#">User menu
  <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" id="user_dropdown_menu"><li class="menu-2 first"><a href="/courses/user">My account</a></li>
<li class="menu-15 last"><a href="/courses/user/logout">Log out</a></li>
</ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:07:57.637

我建议改用jQuery `hover`：

```
$(document).ready(function() {
    $('#user-menu').hover(function () {
        $(this).find('.dropdown-menu').toggle();
    });
}); 
```

笔记：

*   将一个函数传递给[悬停](http://api.jquery.com/hover/)将在 mouseover 和 mouseout 时触发它
*   [切换](http://api.jquery.com/toggle/)将根据元素的当前状态显示或隐藏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:07:00.247

试试这个：

```
jQuery(document).ready(function() {
  function openSubMenu() {
         jQuery(this).find('.dropdown-menu').css('display', 'block');
  };
  function closeSubMenu() {
         jQuery(this).find('.dropdown-menu').css('display', 'none');
  };

  jQuery('#user-menu').bind('mouseover', openSubMenu);
  jQuery('#user-menu').bind('mouseout', closeSubMenu);
}); 
```

# c++ - boost::interprocess::string 缺少一个字符并在销毁时出现段错误

> ID：12038247
> 
> 赞同：0
> 
> 时间：2012-08-20T13:04:33.440
> 
> 标签：c++, boost-interprocess

我目前正在编写一个应用程序，它使用`boost::interprocess`. 但是我有一些问题`boost::interprocess::string`。`string`从 a中创建 a`const char*`就像预期的那样，但是当我尝试创建一个空字符串并稍后用适当的内容填充它时（因为我在创建字符串时不知道它）它以某种方式丢失了第一个字符。以下示例代码说明了这种行为：

```
#include <iostream>
#include <boost/interprocess/allocators/allocator.hpp>
#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/containers/string.hpp>

namespace ip = boost::interprocess;
int main(int ac, char* av[]){
    typedef ip::allocator<char,ip::managed_shared_memory::segment_manager>   IpStringAllocator;
    typedef ip::basic_string<char, std::char_traits<char>,IpStringAllocator> IpString;
    const char* name = "SharedMem";
    ip::shared_memory_object::remove(name);

    ip::managed_shared_memory mem(ip::create_only ,name ,65536);
    auto str  = mem.construct<IpString>("string")(name, mem.get_segment_manager());
    auto str2 = mem.construct<IpString>("string2")("", mem.get_segment_manager());
    *str2     = name;
    std::cout<<*str<<"|"<<*str2<<std::endl;
    //mem.destroy_ptr<IpString>(str);
    //mem.destroy_ptr<IpString>(str2);
    return 0;
} 
```

此应用程序的输出是`SharedMem|haredMem`，所以`str`保持`SharedMem`，正如预期的那样。但是`str2`只包含`haredMem`，缺少字符串的第一个字符。

**那么为什么`str2`缺少一个字符，我该如何避免这种行为呢？**

我遇到的另一个问题是，在编译代码时尝试销毁`strings`using`destroy_ptr`会导致段错误（这就是我在上面的代码中取消注释倒数第二行时发生的情况）`-O3`（但似乎只有这样）。这种行为的原因是什么，我需要做些什么来避免段错误？

我在`-std=c++0x -O3 -g`虚拟机（virtualBox）内的 linux mint 上使用 gcc 4.6.1（编译标志：）和 boost 1.47

**编辑：** 事实证明，在没有优化的情况下编译时分配工作正常，但在使用`-O2`or编译时表现出所描述的行为`-O3`。

此外，即使进行优化，分配也有效（至少在这个人为的示例代码中），如果我做两次，使相关代码看起来像这样：

```
auto str2 = mem.construct<IpString>("string2")("", mem.get_segment_manager());
*str2     = name;
*str2     = name;
std::cout<<*str<<"|"<<*str2<<std::endl; 
```

虽然到目前为止这似乎避免了这个问题，但它几乎不是我想要依赖的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:42:21.290

压缩评论中的信息

*   升级编译器。不确定提升，但我认为，编译器有什么问题。无论如何，当使用 g++ 4.8.0(experimental)/4.7.1 和 boost 1.51.0 时，问题不会发生。如果你不能升级你的编译器，那么
*   设置 -O0、-O1 或 -Os 优化器标志（使用 g++ 4.6.3 和 boost 1.47 进行测试）

另外，我阅读了 g++ man 中关于`Optimizer Options`. 我尝试将 -Os 禁用的选项与 -O2 标志结合起来，但没有成功。IMO g++ 使用未记录的优化器标志。

# python - 如何在 Python 中为 ICMP 消息设置源地址？

> ID：12038249
> 
> 赞同：0
> 
> 时间：2012-08-20T13:04:35.727
> 
> 标签：python, ping, icmp, source-address

我正在尝试更改[ping 的这种实现，](http://www.g-loaded.eu/2009/10/30/python-ping/)以便可以为消息设置不同的源地址。我想做的`-S`与原始 ping 的选项可以做的完全一样：

```
ifconfig em0 10.0.1.1 netmask 255.255.255.0 alias
ifconfig em0 10.0.2.1 netmask 255.255.255.0 alias
ping -c4 -S 10.0.1.1 10.0.2.1 
```

这当然有效，但我想用 Python 做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:44:27.823

您展示的示例代码使用了一个`IPPROTO_ICMP`套接字，它可以使用`bind()`.

因此，就在该`my_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, icmp)`行之后，您可以添加：

```
my_socket.bind((your_source_address, 0)) 
```

元组中的第二个参数是端口号，似乎被忽略了`IPPROTO_ICMP`。

请注意，操作系统可能不允许您将套接字绑定到任意地址，而只能绑定属于您的主机的有效地址，这对于您的用例来说可能已经足够了。如果你想设置一个完全任意的源地址，你可能需要使用一个`IPPROTO_RAW`套接字来代替，然后自己构建整个 IP 包头。请参阅此问题以获取一些提示：[如何在 Python 中使用原始套接字？](https://stackoverflow.com/questions/1117958/how-do-i-use-raw-socket-in-python)

# iphone - 注释 MapKit 自动化

> ID：12038253
> 
> 赞同：0
> 
> 时间：2012-08-20T13:04:48.623
> 
> 标签：iphone, ios, xcode4, mapkit, core-location

我的应用程序现在运行 2 个注释。

它们用纬度和经度硬编码。

我该如何做到这一点，以便让用户添加注释并在他们希望的地方放置一个图钉，并让我的应用程序识别这一点并将其保存在他们放置的位置？请有任何想法或链接。

我相信这是可以通过使用 btn 来实现的，当按下该 btn 时，它会创建一个注释引脚的新实例，其中列出的可拖动属性为

MyPin.draggable = 是；

我的问题是：我如何对类进行编码，以便可以在需要时创建新实例......并且可以根据需要创建尽可能多的实例。（5、8、29 等）

希望这是有道理的，如果没有，那么我基本上希望在 iPhone 上的谷歌地图中创建类似于 drop pin 功能的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:04:08.060

这里有一个示例 [链接](https://freshmob.com.au/mapkit-tap-and-hold-to-drop-a-pin-on-the-map/)

它使用手势识别器。唯一的问题是它不检索地址。

# asp.net - 是否可以使用 ASP.NET 创建 .sqlite 和 .db 文件？

> ID：12038255
> 
> 赞同：3
> 
> 时间：2012-08-20T13:05:08.780
> 
> 标签：asp.net, .net, sqlite

我想知道我们是否可以使用 asp.net 从网络服务器数据库以编程方式创建 .sqlite 和 .db 文件。

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:08:16.837

是的，你绝对可以。只需使用[System.Data.SQLite](http://system.data.sqlite.org)包装器，您就可以根据需要创建它们。

此外，.db 文件可以是任意数量的格式。

# ruby-on-rails - 品牌 ID 为 RoR 的链接到新产品

> ID：12038258
> 
> 赞同：0
> 
> 时间：2012-08-20T13:05:22.720
> 
> 标签：ruby-on-rails

我在Ruby on Rails 工作，我有一个产品和品牌，当我在一个品牌中时，我想创建一个属于该品牌的新产品，然后我想用brand_id 链接到。我怎样才能做到这一点？

```
<%= link_to 'New Product', new_product_path, :class => 'btn btn-primary'%> 
```

品牌型号

```
has_many :products, :dependent => :destroy 
```

产品型号

```
 belongs_to :brand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:10:01.013

路线：

```
resources :brands do
    resources :products
end 
```

链接：

```
link_to "New product", new_brand_product_path(@brand), class: "btn" 
```

如果您可以在品牌之外创建产品，您可能希望在您的路线中使用范围：

```
resources :brands do
    scope module: "brand_scope" do
        resources :products
    end
end 
```

这样，您可以拥有一个单独的控制器来在品牌内创建产品：`app/controllers/brand_scope/products_controller.rb`，但路径 ( `new_brand_product_path(@brand)`) 仍然相同。

* * *

在产品控制器中，`new`操作：

```
@brand = Brand.find(params[:brand_id])
@product = Product.new 
```

在`views/brand_scope/products/_new.html.erb`：

```
form_for [@brand, @product] do |f| 
```

# python - python scipy 使用 fmin_bfgs 进行逻辑回归

> ID：12038259
> 
> 赞同：1
> 
> 时间：2012-08-20T13:05:27.493
> 
> 标签：python, scipy, regression, logistics

我使用下面的公式作为我的假设： ![假设](../Images/b284634525740e87c7ec0aed7c70d6b5.png)

并将下面的公式作为成本函数： ![一个样本的成本函数](../Images/5b9b20b275504efd06496f53669ffde6.png)

所以我试图最小化的对象函数是： ![对象函数](../Images/631ec8282443670abe421f5d6fcd77ce.png)

梯度是： ![坡度](../Images/2e94bd6a5fa81ee74bc6ddd7c8b28d33.png)

csv 文件的格式如下： y0,x1,x2,x3,... y1,x1,x2,x3,... y2,x1,x2,x3,... y 为 1 或 0（用于分类）培训代码如下：

```
import numpy as np
import scipy as sp
from scipy.optimize import fmin_bfgs
import pylab as pl

data = np.genfromtxt('../data/small_train.txt', delimiter=',')
y = data[:,0]
#add 1 as the first column of x, the constant term
x = np.append(np.ones((len(y), 1)), data[:,1:], axis = 1)

#sigmoid hypothesis
def h(theta, x):
    return 1.0/(1+np.exp(-np.dot(theta, x)))

#cost function
def cost(theta, x, y):
    tot = 0
    for i in range(len(y)):
        tot += y[i]*np.log(h(theta, x[i])) + (1-y[i])*(1-np.log(h(theta, x[i])))
    return -tot / len(y)

#gradient

def deviation(theta, x, y):
    def f(theta, x, y, j):
        tot = 0.0
        for i in range(len(y)):
            tot += (h(theta, x[i]) - y[i]) * x[i][j]
        return tot / len(y)
    ret = []
    for j in range(len(x[0])):
        ret.append(f(theta, x, y, j))
    return np.array(ret)

init_theta = np.zeros(len(x[0]))
ret = fmin_bfgs(cost, init_theta, fprime = deviation, args=(x,y))
print ret 
```

我在一个小数据集上运行代码，但似乎我的实现不正确。有人可以帮助我吗？还有一个问题：如您所知，fmin_bfgs 不一定需要 fprime 项，如果我们提供它和不提供它有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T07:40:08.760

我想更正上面代码中的一些内容。

我认为成本函数应该如下（更正以粗体显示）：

```
#cost function
def cost(theta, x, y):
    tot = 0
    for i in range(len(y)):
        tot += y[i]*np.log(h(theta, x[i])) + (1-y[i])*(**np.log(1-h(theta, x[i]**)))
    return -tot / len(y) 
```

请告诉我这样是否更好，非常感谢！

# mysql - mysql转储错误

> ID：12038261
> 
> 赞同：0
> 
> 时间：2012-08-20T13:05:49.527
> 
> 标签：mysql, linux, connection, mysqldump

在备份 mysqldump 时，我使用此命令并在 linux 上收到“太多连接错误”

```
$MYSQL_BINDIR_PATH/mysqldump -u$user -p$password -h $host --flush-logs --delete-master-logs --master-data=2 --add-drop-table --single-transaction --skip-lock-tables --all-databases | gzip > $BACKUP_PATH/$DBFN && successFlag=1 
```

请让我知道解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:12:08.423

首先，检查您的数据库上打开了多少连接，然后检查 mysql 配置文件的限制，即：/etc/mysql/my.cnf

获取当前状态的命令：

```
mysqladmin -u root -p status 
```

# java - Redis 队列 Java 教程

> ID：12038262
> 
> 赞同：0
> 
> 时间：2012-08-20T13:05:50.697
> 
> 标签：java, redis

我是redis的新手。我在网上搜索，我找不到合适的教程。我需要知道它是否可以在**JAVA**中做？我需要在 redis 队列中存储一些数据，并且我需要读取数据以便用户休息调用。可能吗？有这方面的教程吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-24T07:29:10.143

试试[Redisson](https://redisson.org) - 它允许在 Redis 服务器之上创建分布式 Java 对象。队列示例：

```
Redisson redisson = Redisson.create();

RQueue<SomeObject> queue = redisson.getQueue("anyQueue");
queue.add(new SomeObject());
queue.peek();
queue.pool();

...

redisson.shutdown(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T23:15:24.600

是的，您可以将 Redis 与 Java 一起使用。我推荐[Jedis](http://code.google.com/p/jedis/)，它是 Redis 的 Java 库。

您还可以使用 Redis 构建队列或堆栈。见[这里](http://redis.io/commands/rpoplpush)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-17T04:22:19.163

我曾与 jedis 合作过，jedis 是一个用于 redis 的 java 客户端。可以下载**jedis 2.6.2** jar文件，用java编写与redis交互的程序。在jedis中，有redis命令的方法——比如set命令的set()方法，get命令的get()方法等等。

这是我使用 jedis 编写的一个非常简单的代码。它与 redis 服务器建立连接，设置密钥并获得相同的结果：

```
import redis.clients.jedis.Jedis;
public class SetGet {
    public static void main(String[] args) {
        // Connecting to Redis on localhost
        Jedis jedis = new Jedis("localhost");
        // adding a new key
        jedis.set("key", "hello");
        // getting the key value
        System.out.println(jedis.get("key"));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T08:58:12.260

[借助名为Kundera](https://github.com/impetus-opensource/Kundera/ "昆德拉")的简单开源 JPA 兼容 ORM 库，您可以轻松地将 redis 与 java 一起使用。

# iphone - iOS 5 中的 Twitter 使用 ARC 泄漏内存

> ID：12038267
> 
> 赞同：2
> 
> 时间：2012-08-20T13:06:05.600
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

![在此处输入图像描述](../Images/4f330029f908c7e6ef1f6e9a1940d71d.png)

这是我的代码：

```
case kTweetIndex:
{
        TWTweetComposeViewController *tweetSheet =
        [[TWTweetComposeViewController alloc] init];
        [tweetSheet setInitialText:[NSString stringWithFormat:@"%@",self.item.link]];
        [self presentModalViewController:tweetSheet animated:YES];
    if (![TWTweetComposeViewController canSendTweet])
    {
        NSLog(@"Can't Send tweet");
    }
} 
```

这只是推特造成的大量泄漏，我不知道如何处理。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:15:35.503

创建 TWTweetComposeViewController 或 twitter 类的属性，或者您可以在 AppDelegate 类中再分配一件事。它会起作用的。

# c - memmove() 的代码

> ID：12038269
> 
> 赞同：0
> 
> 时间：2012-08-20T13:06:16.493
> 
> 标签：c, memmove

下面的代码片段显示了`memmove()`.

```
void my_memmove(void* dest, const void* src, size_t size)
{
    unsigned int i;

    char* d = (char*)dest;
    char* s = (char*)src;

    if( s > d )
    {
            for( i = 0; s[i] && i < size; ++i )
                    d[i] = s[i];
    }
    else
            for( i = size-1; d[i] && i >= 0; --i )
                    d[i] = s[i];
}

int main()
{
    char my_str[] = "abcdefgh";

    char str[] = "abcdefgh";

    my_memmove(my_str+1, my_str, 4);

    memmove(str+1, str, 4);

    printf("%s %s\n", my_str, str);

    return 0;
} 
```

我得到的[输出](http://ideone.com/5oIQQ)为：

```
 aabcdfgh 
```

为什么 my_memmove() 无法正常工作（它更改了 my_str 使其输出空字符串）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:09:00.510

对于**无符号**整数，条件`i >= 0`始终为真。最好用“-1”反转偏差编写惯用循环：

```
for (i = 0; i != size; ++i)
    d[size - i - 1] = s[size - i - 1]; 
```

此外，附加条件`s[i] &&`看起来完全错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:21:41.630

您假设 src 和 dest 指向同一内存块中的点。

```
...
char* d = (char*)dest;
char* s = (char*)src;

if( s > d )
... 
```

这意味着如果有人使用 src 和 dest 指向内存中的 2 个不同位置调用您的函数，您将获得未定义的行为。

这非常非常糟糕，只需使用内置的 memmove()。

# vb.net - getchanges 一半时间不会返回更改

> ID：12038270
> 
> 赞同：1
> 
> 时间：2012-08-20T13:06:18.380
> 
> 标签：vb.net, datatable, dataset, xceed

我正在使用与`DataSet`/绑定的 Xceed 网格`DataTable`。问题是，我需要知道在网格中加载新数据之前是否进行了更改，因此如果我不保存更改，则会丢失更改。

但是`DataSet`nor`DataTable`的函数都没有`getChanges([DataRowState])` 返回正确的东西：S

我发现有时`dataColumnChangeEvent`会调用，但不是`dataRowChangeEvent`，这些是更改未保存到`getChanges()`函数中的时间。

当我在编辑单元格中单击网格而不是以任何方式选择另一个网格单元格时，就会发生这种情况。

另外，我已经看过了`rowState`，`Unchanged`即使数据发生了变化：S

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:09:04.283

伟大的！我终于找到了解决方案。

即使 dataRowChangeEvent 似乎没有被调用（我会在后面解释）

如果 rowChangeEvent 中的唯一代码是下面的代码，则它可以工作：

```
Private Sub RowChanged(ByVal sender As Object, ByVal e As DataColumnChangeEventArgs)
    If e.Row.RowState = DataRowState.Unchanged Then
        e.Row.AcceptChanges()
        e.Row.SetModified()
    End If
End Sub 
```

我们检查 rowState 是因为我们只能 setModified() 一个未更改状态的行。

我们执行 AcceptChanges() 是因为只执行 setModified() 会删除已编辑单元格上的更改。

我们这样做 SetModified(0 因为如果不是 AcceptChanges() 则将 RowState 保留为 Unchanged，因此它不会进入表的 getChanges。

编辑：这带来了另一个问题，dataAdapter 使用数据行的原始值和当前值进行更新、删除和插入，执行“acceptChanges”将 OriginalValue 设置为当前值，因此删除和更新不再起作用:(

- 更多的 -

当我说它似乎没有进入事件时，这是因为下面的代码：

```
Private Sub RowChanged(ByVal sender As Object, ByVal e As DataColumnChangeEventArgs)
    If e.Row.RowState = DataRowState.Unchanged Then
        e.Row.AcceptChanges()
        e.Row.SetModified()
    End If
    MessageBox.Show("hasError=" & IIf(e.Row.HasErrors, "true ", "false ") & _
                    "; action=" & e.ProposedValue)
End Sub 
```

既不显示消息框也不获取数据表的 getChanges() 中的更改...

此外，只有

```
MessageBox.Show("Changing") 
```

而不是上一个消息框，显示消息框，并正确进行更改，但是它随后会破坏事件，因此它不会在 newProjectSelected => 没有加载新项目，但它只需要一个“重新-点击”。

所以，我已经解释了它的行为方式。

但这太奇怪了，如果有人能解释这种行为，我将不胜感激。

# nosql - 我在 CouchBase Web 控制台中找不到视图编辑器

> ID：12038276
> 
> 赞同：0
> 
> 时间：2012-08-20T13:06:31.623
> 
> 标签：nosql, couchbase

我刚刚安装了 couchbase，但是在 Web 控制台上我找不到这篇文章中提到的视图编辑器（[http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-edito..](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-edito..)）

在上面的链接中，它显示“单击 Web 控制台视图部分中的创建开发视图按钮”，但我的 Web 控制台没有该按钮。我正在使用“版本：1.8.1 社区版（build-937）”，它看起来像这样

![我的 couchbase 网络控制台的屏幕截图](../Images/0ec703a5bdeac5b8b6e42d867bbb92cc.png).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:12:41.017

Couchbase 1.8.x 不包含视图支持。如果您想要此功能，您将需要使用 2.0 版。

# python - CherryPy - 使用直接下载还是我的发行版？

> ID：12038277
> 
> 赞同：0
> 
> 时间：2012-08-20T13:06:32.670
> 
> 标签：python, linux, ubuntu, cherrypy, gentoo

我不确定是使用从官方网站下载的 CherryPy，还是在我的发行版包管理器中找到的版本。

如果我使用官方下载，如果我需要在开发环境和实时环境之间移动，可移植性将不再是问题，并且我保证两个系统上的版本相同。另一方面，如果我让我的发行版的包管理器来处理它，那么我就不必担心保持 CherryPy 的更新，我也不需要将它保存在源代码控制中。允许我的包管理器处理更新的另一个潜在缺点是，在正式软件发布和软件进入存储库之间通常存在相当长的延迟。

什么是公认的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:26:23.950

对于我从事的每个 python 项目，我都会创建一个名为的文件，该文件`setup-env.sh`用于构建本地虚拟环境。这包含在源代码中。例如，在最近的一个项目中：

```
#!/bin/bash

virtualenv --python=python3.2 env
source env/bin/activate
easy_install cherrypy
easy_install pytache
easy_install sql_alchemy
easy_install stagger
easy_install nose
easy_install pystache 
```

这创建了一个项目独有的环境，其中包含最新的稳定版本，并且易于复制。

在进行项目之前，请执行以下操作：

```
source env/bin/activate 
```

修改你的`PATH`和`PYTHONPATH`正确的。

如果你没有`easy_install`可用的，你需要安装 distutils 包或类似的包。

这是最好的解决方案，因为：

*   您可以使用最新的稳定版本，而不是任何发行版打包
*   您使用最小的、记录在案的软件包集（您不会“意外”使用为另一个项目安装的软件包）
*   在另一台机器上重新创建很容易
*   如果您更新发行版，则很容易重新创建
*   很容易扩展以指定特定的版本号 ( `easy_install cherrypy==3.2.0`)
*   指定特定的 python 版本很容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:17:27.593

当您使用 gentoo 时，我会使用在服务器和工作站之间共享的自定义覆盖。（见[http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=3&chap=5](http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=3&chap=5)）

在您的覆盖中，如果您需要更新版本的cherrypy，您可以随时将其插入其中并将其安装在您的工作站上，然后在需要升级时，从您的服务器中取消屏蔽它。

由于它是您的叠加层，因此您无需等待官方包装。要么你自己调整 ebuild（通常 90% 的时间只是重命名它以提升版本），要么你可以从你的主题上更高级的覆盖中复制它，比如 python 覆盖（现在被命名为进度）[http ://code.google.com/p/gentoo-progress/](http://code.google.com/p/gentoo-progress/)为您的示例。

# ruby-on-rails - 将输入分成两部分

> ID：12038286
> 
> 赞同：0
> 
> 时间：2012-08-20T13:07:01.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在一个网站上工作，我想将输入分成两部分（两个下拉列表），然后将它们连接在一起，然后将该值放入我的数据库中。

它是这样的：

我希望用户输入产品年龄，我想给他们一个下拉列表，他们可以在其中选择一个数字和一个下拉列表，他们可以在其中选择是一天、一周还是一个月。因此，他们可以选择“1”+“天”或“4”+“周”之类的内容，并在我的年龄数据库列中有“1 天”或“4 周”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:35:24.287

不是您问题的直接答案，也许是 OT，但我建议您在数据库中使用 Date 列。这将允许您执行比较（如之前/之后），并在 SQL 中排序。

您始终可以使用`distance_of_time_in_words`和`distance_of_time_in_words_to_now`助手（[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)）生成人类可读的时间，例如 4 天前等。

# java - 如何以编程方式将按钮添加到自定义视图？

> ID：12038288
> 
> 赞同：1
> 
> 时间：2012-08-20T13:07:02.130
> 
> 标签：java, android, button, dynamically-generated

我是 Android 编程的初学者，我正在通过修改我在[此处找到的一些类来开发程序。](http://www.anddev.org/a_bouncing_ball_-_basic_graphics_animation_demo-t283.html)到目前为止，我的`DrawView`课程如下：

```
public class DrawView extends View {
   private Ball ball1;

   private Button kapabut;

    public DrawView(Context context) {
        super(context);
        setFocusable(true);

        ball1 = new Ball(context,R.drawable.ortatop);       

       kapabut=new Button(context);  //here, I cannot seem to add a button.
       kapabut.setVisibility(VISIBLE);
       kapabut.setText("xXx");
    }

    @Override protected void onDraw(Canvas canvas) {
        // move the balls at every canvas draw
        ball1.moveBall();

        //draw the balls on the canvas
        canvas.drawBitmap(ball1.getBitmap(), ball1.x, ball1.y, null);
        // refresh the canvas
        invalidate();
    }    
} 
```

球被创建并移动，但我似乎无法在任何地方获得“kapabut”按钮。我怎样才能让这个按钮出现，并添加一个`onClick`方法呢？

任何帮助将不胜感激，谢谢。

PS：我尝试使用 XML 布局添加了一个 Button，但现在我想用这个类来制作它，并`setContentView(new DrawView(this));`在 Main.java 中设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:10:25.670

您不能`View`在 View 的方法中添加其他对象，它们在 View 类`onDraw()`中没有任何方法。`addView()`

为了让它工作，现在扩展你的**DrawView**类，[`ViewGroup`](http://developer.android.com/reference/android/view/ViewGroup.html)你可以在其中添加其他视图。As`addView()`方法属于`ViewGroup`Class。

就像是，

```
public class DrawView extends ViewGroup { 
```

# java - 获取连接用户的系统硬件信息到 PHP 网站？可能吗？

> ID：12038290
> 
> 赞同：0
> 
> 时间：2012-08-20T13:07:10.613
> 
> 标签：java, php

我发布此内容是为了确认 PHP 在连接到网站时是否可以获取用户的机器硬件信息？

就我而言，我正在开发一个需要一个用户 - 一台机器登录的 Intranet。这意味着分配给他/她的机器的用户只能登录，其他人不能从该特定机器登录。在这方面，我的数据库和 PHP 代码已经在没有机器依赖的情况下启动并运行。

我认为这是不可能的，因为 PHP 是一个服务器端代码，它不需要用户的任何系统资源来取得联系。要获取系统的硬件信息 - 必须在用户的机器上安装一些应用程序才能完成它。但这在任何方面都可能吗，例如 PHP 桌面应用程序（尽管尚未开发）或任何 Java 应用程序来检查机器信息并将其附加到普通用户的登录名中。

等待专家解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:11:10.587

这取决于您需要什么信息。HTTP标头包含来源的用户代理（什么浏览器/操作系统）、IP地址和服务器处理请求所需的其他一些东西，但您无法获得例如连接到的键盘品牌那台机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:12:12.260

很简单：不可能！就像`php`将输出`text`到浏览器一样，浏览器可以收集一些数据，但只能收集一点点（如屏幕分辨率、颜色、IP 和不受威胁的东西。）。但是不行，PHP 不能访问硬件信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:14:58.433

只有当您的 DHCP 在每次断开连接时都不更改 IP 时，您才能使用 IP 地址来了解它是哪台机器。您还可以使用 REMOTE_USER_AGENT 超级全局来了解更多信息。除了可以发送您的安全策略允许浏览器获取的数据的 ajax 请求之外，我认为您的问题没有解决方案。

# c# - 数据网格中的按钮可见性

> ID：12038292
> 
> 赞同：0
> 
> 时间：2012-08-20T13:07:16.183
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

我在 WPF 中创建了一个 Datagrid 控件。我怎样才能让我的按钮只对单元格可见

在我选择它的行内。任何人都可以提供帮助。

```
XAML:
<DataGridTemplateColumn x:Name="typ" Header="H." Width="50">
  <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
     <Button Name="btnTabelle" Visibility="Hidden" Height="20" Width="25" 
             Click="Button_Table_Click">

     </Button>
   </DataTemplate>
  </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:16:49.700

您可以根据 if 设置 Visibility `DataGridCell.IsSelected`，尽管您需要[BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)将布尔值转换为`Visibility`一个

这是一个示例，使用`RelativeSource`绑定来查找`DataGridCell`

```
 <Button Visibility="{Binding Path=IsSelected,
             RelativeSource={RelativeSource AncestorType={x:Type DataGridCell}},
             Converter={StaticResource MyBooleanToVisibiltyConverter}" ... /> 
```

# ruby-on-rails - 避免fancybox ajax-loader 动画

> ID：12038295
> 
> 赞同：0
> 
> 时间：2012-08-20T13:07:23.450
> 
> 标签：ruby-on-rails, fancybox, fancybox-2

我使用fancybox所有我想要的只是“避免”fancybox的ajax-loader

原因是我已经为所有 ajax 请求设置了加载，现在每次都是使用 fancybox 发出请求，我看到两个加载器出现了哪种看起来很难看

有没有办法做到这一点

我浏览了api并找到了一个名为的方法

`$.fancybox.hideLoading();`

但这似乎不起作用，因为我看到加载仍然显示

任何的想法

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:19:18.153

您可以覆盖任何 fancyBox 方法，例如 -

```
$.fancybox.showLoading = function () {
    console.info('My loading');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T13:53:07.710

使用 CSS 找到了解决方案

```
<style>
 #fancybox-loading {
  display:none !important;
}
</style> 
```

谁能提出比这更好的建议

等待正确答案

# javascript - 完整日历在多个资源上添加事件

> ID：12038298
> 
> 赞同：0
> 
> 时间：2012-08-20T13:07:50.580
> 
> 标签：javascript, jquery-ui, fullcalendar

如何在 2 个或更多资源上添加事件？根据我在互联网上的发现，我可以在资源上添加事件，在其他资源上添加其他事件（或相同事件）。但是我怎样才能在 2 个资源上扩大同一个事件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:20:41.793

Ike Lin 为多种资源增强了这个完整的日历。但我认为这仅适用于日视图。

[http://www.ikelin.com/jquery-fullcalendar-resource-day-view/]

这是一个更完整的日历，甚至可以查看资源的月视图。

[http://tux.fi/~jarnok/fullcalendar-resourceviews/](http://tux.fi/~jarnok/fullcalendar-resourceviews/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:29:53.060

这是不可能的，正如[事件对象文档](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)中所述，一个事件只能有一个事件源。

您可以做的是，在创建/渲染/更新事件时，使用事件回调函数将特定事件“推送”到另一个后端。

# wcf - 发送列表时出现 SocketException 通过 WCF

> ID：12038300
> 
> 赞同：0
> 
> 时间：2012-08-20T13:07:55.033
> 
> 标签：wcf, windows-phone-7, list, generics

正如问题所述。我无法`List<T>`通过 WCF 发送。我不明白为什么，过去一周我一直在互联网上搜索高低，没有任何具体答案。我不断收到一个 SocketException：一个现有的连接被远程主机强行关闭。但是，如果我调用一个只返回一个字符串的方法，它就可以正常工作。

我在 IIS Express 7.5 上托管我的 WCF。我可以确认我可以通过我的浏览器或本地网络上的其他设备通过我机器的 IP 访问我的服务。

如果有任何帮助，我实际上正在关注本教程： [http ://www.c-sharpcorner.com/uploadfile/urmimalapal/creating-a-windows-phone-7-application-sumption-data-using-a-wcf -服务/](http://www.c-sharpcorner.com/uploadfile/urmimalapal/creating-a-windows-phone-7-application-consuming-data-using-a-wcf-service/)

当我尝试调用 FindEmployee 时，我得到了那个错误。我还创建了另一种方法，它只返回一个字符串并调用它工作正常。没有错误。我已经在我的 WP7 模拟器、WCF 测试客户端和 WCFStorm 上进行了尝试，它们在`List<T>`尝试返回和返回字符串时都表现出相同的问题。当我的 Linq 语句到达断点时，我还确认列表正在正确填充。绝对是 WCF 拒绝发送我的`List<T>`.

编辑：这是我在尝试调用抛出`List<T>`.

> ```
> <FindVendor>
>   <MethodParameters>
>     <SocketException>
>       <ErrorCode>10054</ErrorCode>
>       <Message>An existing connection was forcibly closed by the remote host</Message>
>       <SocketErrorCode>ConnectionReset</SocketErrorCode>
>       <NativeErrorCode>10054</NativeErrorCode>
>       <Data>
>         <KeysAndValues attr0="KeyValuePairArray" isNull="false" />
>       </Data>
>       <InnerException isNull="true" />
>       <TargetSite>Int32 Read(Byte[], Int32, Int32)</TargetSite>
>       <StackTrace>at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)</StackTrace>
>       <HelpLink isNull="true" />
>       <Source>System</Source>
>     </SocketException>
>   </MethodParameters>
> </FindVendor> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:25:24.590

我没有费心去下载与教程相关的任何示例代码，但我注意到教程`MyEmployee`中没有定义实体。您应该确保它标记有如下`[Serializable]`属性：

```
[Serializable]
public class MyEmployee
{
    public int Property1 { get; set; } // etc
} 
```

还有可能你必须向序列化程序声明 KnownTypes，这取决于你在做什么——你应该发布这段代码，并且可能打开[WCF 日志记录](http://msdn.microsoft.com/en-us/library/ms731859.aspx)以获得更好的错误消息。

# riak - 通过 java 客户端的 Riak 搜索查询

> ID：12038307
> 
> 赞同：1
> 
> 时间：2012-08-20T13:08:29.900
> 
> 标签：riak, java-client

我正在尝试使用 OR 运算符执行查询，如下所示：

> ```
>  MapReduceResult result = riakClient.
>             mapReduce("some_bucket", "Name:c1 OR c2").
>             addMapPhase(new NamedJSFunction("Riak.mapValuesJson"), true).
>             execute(); 
> ```

我只得到查询中的第一个对象（其中 name='c1'）。如果我再次更改查询的顺序（即名称：c2 或 c1），我只会得到查询中的第一个对象（其中名称='c2'）。

Java 客户端是否支持 OR 运算符（和其他查询运算符）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:29:28.477

我从 Basho 工程师 Sean C. 那里得到了这个答案：

> 您要么需要对条款进行分组，要么对它们都进行限定。如果没有字段标识符，则搜索查询假定正在搜索默认字段。您可以使用“search-cmd explain”命令来确定如何解释查询。以下是表达查询的两种替代方式：
> 
> **名称：c1 或名称：c2**
> 
> **名称：(c1 OR c2)**

两种选择都对我有用！

# android - android chat ListView getView 奇怪地更新

> ID：12038319
> 
> 赞同：0
> 
> 时间：2012-08-20T13:09:18.060
> 
> 标签：android, listview

我已经建立了一个聊天应用程序。

在我的聊天消息活动中，我有一个显示所有文本消息的 ListView。

在每条短信中，我都有一个 TextView，默认情况下会写入`"Sending..."`，我希望在发送消息后对其进行更新。

在每个 ChatMessage 对象中，我都有一个`sent`and`time`属性。如果发送为真，我将在 TextView 中显示时间，如果为假，我将按`"Sending"`上述方式编写。

当我发送一条新消息时，我正在向 ListView 适配器添加一个新视图，并且由于某种原因它显示该消息已发送，尽管它没有......无法真正理解为什么。

这是我的 ArrayAdapter 的 getView() 和持有者类：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView; 
    ChatMessage chatMessage = chatMessagesArrayList.get(position);
    ChatMessageHolder chatMessageHolder = null;

    if (row == null)
    {
        if (chatMessage.getSenderId() == app.getFacebookCurrentUser().getId())
            row = LayoutInflater.from(context).inflate(layoutResourceId, null);
        else
            row = LayoutInflater.from(context).inflate(R.layout.chat_green, null);

        chatMessageHolder = new ChatMessageHolder();
        chatMessageHolder.message = (TextView) row.findViewById(R.activity_chat.message);
        chatMessageHolder.sentTime = (TextView) row.findViewById(R.activity_chat.sent_time);
        chatMessageHolder.isSent = chatMessage.isSent();            
        row.setTag(chatMessageHolder);
    }
    else
    {
        chatMessageHolder = (ChatMessageHolder) row.getTag();
    }

    chatMessageHolder.message.setText(chatMessage.getMessage());
    if (chatMessageHolder.isSent)
        chatMessageHolder.sentTime.setText(app.getDateTime(chatMessage.getTime()));

    return row;
}

private static class ChatMessageHolder
{
    TextView message, sentTime;
    boolean isSent = false;
} 
```

我真的不明白为什么它不根据 isSent 布尔标志写时间或“正在发送......”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:25:59.960

这是因为 ListView 回收了以前的视图（这就是`convertView`变量）。可能它正在回收另一个已设置为“已发送”的视图，并且您永远不会处理`chatMessagerHolder.isSent`错误的替代情况。`chatMessageHolder.isSent = chatMessage.isSent();`在第一个 if-else 块之后，您应该避免设置。第一个 if-else 应该只是初始化视图或回收对象。此外，当您检查时，您`if(chatMessageHolder.isSent)`还应该处理`TextView`如果那是错误的应该说什么（即在后续的 else 语句中），因为视图被回收了。

# sed - sed - 删除大括号之间的空格

> ID：12038320
> 
> 赞同：2
> 
> 时间：2012-08-20T13:09:20.213
> 
> 标签：sed

我正在编写一个（可怕的）CSS 缩小器，并在删除空格时遇到了一些麻烦。

我通常有以下内容来删除空格，但空格在 CSS 中很重要。因此，为了补偿，我试图仅删除花括号之间的空格。

```
sed -i 's/ //g' screen.css  #all spaces everywhere 
```

试

```
sed -i 's/{ }//g' screen.css  #all spaces between brackets everywhere 
```

不起作用。

有人可以指出我正确的方向。（此命令从文件/bash 脚本运行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:14:21.337

将 sed 与正则表达式范围一起使用：

```
sed -i '/{/,/}/{s/\s*//g}' screen.css 
```

# java - 消化 md5 引发 UTF8 错误 - Java

> ID：12038321
> 
> 赞同：0
> 
> 时间：2012-08-20T13:09:20.477
> 
> 标签：java

我正在消化其他一些 zip 文件的内容以生成 MD5。对文件内容进行摘要并生成 MD5，而不是根据时间戳生成 MD5。所以我会断言两个文件具有相同的内容，即使它们是在不同的时间产生的。因此，我编写了以下`Java`方法：

```
 public String digest( ZipInputStream entry ) throws IOException{

        byte[] digest = null;
        MessageDigest md5 = null;
        String mdEnc = "";
        try {
            md5 = MessageDigest.getInstance( "MD5" );

            ZipEntry current;
            if( entry != null ) {
                while(( current = entry.getNextEntry() ) != null ) {
                    if( current.isDirectory() ) {
                        digest = this.encodeUTF8( current.getName() );
                        md5.update( digest );
                    }
                    else{
                        int size = ( int )current.getSize();
                        if(size > 0){
                            digest = new byte[ size ];
                            entry.read( digest, 0, size );
                            md5.update( digest );
                        }
                    }
                }
                digest = md5.digest();
                mdEnc = new BigInteger( 1, md5.digest() ).toString( 16 );
                entry.close();
            }
        }
        catch ( NoSuchAlgorithmException e ) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return mdEnc;
    }

         public byte[] encodeUTF8( String name ) {
             final Charset UTF8_CHARSET = Charset.forName( "UTF-8" );
                 return name.getBytes( UTF8_CHARSET );
         } 
```

该方法运行良好，直到我推出了具有**Chinese**、**Korean**和**Japanese**编码的 zip 文件（不仅是传统的`UTF-8`）：

```
Processing :mrl_l10n.zip
MD5 A: d41d8cd98f00b204e9800998ecf8427e
MD5 B: d41d8cd98f00b204e9800998ecf8427e
They Match
Processing :fcm.zip
MD5 A: d41d8cd98f00b204e9800998ecf8427e
MD5 B: d41d8cd98f00b204e9800998ecf8427e
They Match
Processing :1_mrm_root.zip
Exception in thread "main" java.lang.IllegalArgumentException
    at java.util.zip.ZipInputStream.getUTF8String(Unknown Source)
    at java.util.zip.ZipInputStream.getFileName(Unknown Source)
    at java.util.zip.ZipInputStream.readLOC(Unknown Source)
    at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)
    at Tczip.digest(Tczip.java:98)
    at Tczip.execute(Tczip.java:33) 
```

有人知道我该如何为此创建解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:25:20.813

使用具有新 API 的 Java 7 -`new ZipInputStream(InputStream, Charset)`允许您为条目名称设置字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:00:44.477

我会尝试使用`DataOutputStream`'s `writeChars(String)`、`writeBytes(String)`和`writeUTF(String)`方法，看看它们对 ZIP 文件中的非 UTF-8 名称有何影响。

# php - 如何在 CouchDB 中显示文档附件中的图像？

> ID：12038323
> 
> 赞同：1
> 
> 时间：2012-08-20T13:09:33.427
> 
> 标签：php, couchdb

我正在使用 CouchDB 存储图像，我想知道如何从该 CouchDD 文档中获取图像以在 HTML 页面中显示它。

像：

```
<img src= "....."> 
```

有没有我可以遵循的代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:09:44.427

如果我说得对，您只想直接从文档的附件对象中显示图像。

只需使用以下 URI 构造：

```
/database/document-id/image-name.type 
```

这是一个活生生的例子。

```
http://localhost:5984/users/sam/avatar.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:55:41.157

您可以将转换后的 png-(jpg/gif) 图像存储在 BLOB 字段中

```
<img src="data:image/png;base64,<?php echo $base64PNGImage ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:52:32.860

如果您将图像存储为附件，并且您想检索某个键的图像（假设某个用户）这样做：

查看数据用户头像：地图：

```
function(doc) {
    if (doc.doc_type === "config" && doc.config_type === "user") {
        emit(doc.username, doc._attachments);
    }
} 
```

列表列表用户头像：

```
function(head, req) {
    start({
        "headers": {
            "Content-Type": "text/html"
        }
    });
    var row;
    while(row = getRow()) {
        for (var attachment_key in row.value) {
            send('<img src="/' + req.query.database + '/' + row.id + '/' + attachment_key + '" style="border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; border-top-left-radius: 5px; border-top-right-radius: 5px;">');
        }
    }
} 
```

javascript中的HTTP调用：

```
'http://localhost:5984/db/_design/db/_list/list-user-avatar/data-user-avatar?key="' + user + '"&database=' + database 
```

# ruby-on-rails-3 - 适用于 Windows 的多线程 Rails 服务器

> ID：12038332
> 
> 赞同：0
> 
> 时间：2012-08-20T13:10:17.013
> 
> 标签：ruby-on-rails-3, windows-7-x64, thin, unicorn

我需要在 Windows 上安装一个多线程（以支持 Facebook Open 图形回调）。是否可以？

我试过了，但它没有安装（事件机器没有编译）。Unicorn 似乎没有 Windows 版本。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:24:54.847

> gem install thin --platform=x86-mingw32

```
 Fetching: rack-1.4.1.gem (100%)
 Fetching: eventmachine-0.12.10.gem (100%)
 Temporarily enhancing PATH to include DevKit...
 Building native extensions.  This could take a while...
 Fetching: daemons-1.1.8.gem (100%)
 Fetching: thin-1.3.1.gem (100%)
 Building native extensions.  This could take a while...
 Successfully installed rack-1.4.1
 Successfully installed eventmachine-0.12.10
 Successfully installed daemons-1.1.8
 Successfully installed thin-1.3.1 
```

这适用于使用[RailsInstaller准备的 Windows-7-x64](http://railsinstaller.org/)

# ruby-on-rails - 从 Ruby 脚本重启 Heroku 延迟的 Job Worker

> ID：12038333
> 
> 赞同：2
> 
> 时间：2012-08-20T13:10:18.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, delayed-job

如果可能的话，从 Rails 应用程序本身重新启动 Heroku (delayed_job) 工作程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:27:39.873

您使用 扩展您的工人`heroku ps:scale worker=x`，对吗？

将其缩小到 0 并再次缩小到原始值将重新启动您的工作人员。

您可以使用 heroku ruby​​ 客户端以编程方式执行此操作，请参阅[示例](http://verboselogging.com/2010/07/30/auto-scale-your-resque-workers-on-heroku)和（相当糟糕的）[文档](http://rubydoc.info/gems/heroku/2.30.3/frames)

这段代码剪断可能会有所帮助：

```
heroku = Heroku::Client.new(ENV['HEROKU_USER'], ENV['HEROKU_PASS'])
heroku.ps_scale(ENV['HEROKU_APP'], :type=>'worker', :qty=>0)
heroku.ps_scale(ENV['HEROKU_APP'], :type=>'worker', :qty=>1) 
```

# .net - 使用 Bloomberg .Net API 的每小时数据

> ID：12038336
> 
> 赞同：4
> 
> 时间：2012-08-20T13:10:28.777
> 
> 标签：.net, api, bloomberg

我正在努力使用 .Net API 3.0 从 Bloomberg 获取每小时 OPEN、HIGH、LOW 和 LAST_PRICE 快照的逻辑。我用谷歌搜索了很多次，但没有运气！对此的任何帮助将不胜感激。

我试图在 Bloomberg .Net API (C#) 中找到等效于以下 VBA BDH 函数的功能。

```
BDH(B5,C6:F6,TODAY()-30,"","BarTp=T","BarSz=120","days=T","Dir=V","Dts=S",,"Quot‌​e=C","UseDPDF=Y","Sort=D",,"cols=5;rows=271") 
```

其中 B5 是安全名称，C6:F6 包含 OPEN、HIGH、LOW 和 LAST_PRICE 字段。我尝试过 Intraday Bar 请求，但它返回的值与此 BDH 函数返回的值不同。此外，历史数据请求没有 HOURLY 间隔选项，它从 DAILY 间隔开始。

以下是我迄今为止尝试过的代码：

```
BBService refDataService = session.GetService("//blp/refdata"); 
BBRequest request = refDataService.CreateRequest("IntradayBarRequest"); 
request.Set("security", "SPX INDEX"); 
request.Set("eventType", "TRADE"); 
request.Set("interval", 120); // bar interval in minutes
request.Set("startDateTime", new BBDateTime(2012, 08, 11, 07, 30, 0, 0)); 
request.Set("endDateTime", new BBDateTime(2012, 08, 20, 18, 30, 0, 0)); 
session.SendRequest(request, null); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T14:28:30.297

在 Bloomberg API 发行版中，查看出色的“示例”文件夹。

下面的示例应用程序实现了您的请求。：

> \blp\API\APIv3\DotnetAPI\v3.2.9.0\examples\WinForm\C#\SimpleIntradayBarExample

基本上“核心”是这样的：

```
 Service refDataService = d_session.GetService("//blp/refdata");
        // create intraday bar request 
        Request request = refDataService.CreateRequest("IntradayBarRequest");
        // set request parameters
        request.Set("eventType", "TRADE");
        request.Set("security", "SPX Index");
        DateTime startDate = dateTimePickerStartDate.Value;
        DateTime endDate = dateTimePickerEndDate.Value;
        request.Set("startDateTime", new BDateTime(startDate.Year, startDate.Month, startDate.Day,
                startDate.Hour, startDate.Minute, startDate.Second, 0));
        request.Set("endDateTime", new BDateTime(endDate.Year, endDate.Month, endDate.Day,
            endDate.Hour, endDate.Minute, endDate.Second, 0));
        request.Set("gapFillInitialBar", True);
        request.Set("interval",60);
        // create correlation id
        CorrelationID cID = new CorrelationID(1);
        d_session.Cancel(cID);
        // send request
        d_session.SendRequest(request, cID);
        toolStripStatusLabel1.Text = "Submitted request. Waiting for response..."; 
```

提交后，您必须接受彭博回复，解析并使用它。

快乐编码。

**编辑：**

请查找示例 C# 代码的结果以及 Bloomberg 提出的等效请求。请记住时区的差异！当您使用 C# 编码时，Bloomberg 库使用 UTC，而使用 Excel 插件时区是您的本地区域。

![在此处输入图像描述](../Images/24bf9190c44de384837fcbf4ed053b62.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:19:45.577

您可能已经解决了这个问题，但您需要注意您所处时代的时区。

彭博盘中时间都在格林威治标准时间 - 我认为它在某处的文档中说明了这一点。这适用于`"IntradayBarRequest"`和`"IntradayTickRequest"`。

注意，这与订阅实时数据（例如使用`Subscription`and `Session`）不同，后者使用您的本地时区（在您的彭博终端中设置）。也就是说，当然，除非您使用 override `"useGMT"`。

# symfony1 - 如何保护文档文件？

> ID：12038338
> 
> 赞同：0
> 
> 时间：2012-08-20T13:10:32.603
> 
> 标签：symfony1, symfony-1.4

我开发网站，用户可以在其中上传 doc、pdf 和文本文件。他们还可以查看文件列表和删除文件。问题是这个文件有个人数据。我可以保护这些文件吗？我希望管理员和版主看到这些文件，但我也希望防止其他人随机下载。我希望我解释清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:01:27.910

将它们放在 webroot 之外的某个位置，只能通过您的系统访问。每当有人尝试访问它时，请检查他的权限，如果他们没问题，则提供该文件。

# c# - WPF中的浮动自定义触摸控件

> ID：12038341
> 
> 赞同：1
> 
> 时间：2012-08-20T13:10:46.280
> 
> 标签：c#, wpf, user-controls, touch

我正在尝试在 WPF 中创建一个可以接收触摸事件的浮动控件。我搜索了很多，发现浮动控件的唯一解决方案是 Popup 控件。问题：Popup 控件无法接收触摸事件。而且由于我`SurfaceListBox`在弹出窗口中使用了一个，我需要触摸事件。我试图通过以下方式使弹出窗口接收触摸事件：

```
TouchExtensions.EnableSurfaceInput((HwndSource)HwndSource.FromVisual(this.selectionListPopup)); 
```

但它没有任何效果。有没有办法让弹出窗口接收触摸？有没有其他可以使用的控件或方式？

我的最终目标是让一个控件浮动在其他控件之上——这意味着它不会被其他控件剪裁或遮挡。

这是我到目前为止使用的 XAML：

```
<Popup Name="selectionListPopup"
        PlacementTarget="{Binding ElementName=selectedItemButton}"
        Placement="Relative"
        VerticalOffset="{Binding ElementName=this, Path=SelectionListTop}"
        HorizontalOffset="{Binding ElementName=this, Path=SelectionListLeft}"
        IsOpen="{Binding ElementName=this, Path=IsSelecting, Mode=TwoWay}"
        StaysOpen="False"
        AllowsTransparency="True" 
        Focusable="False">
        <s:SurfaceListBox Name="selectionList"
                          ItemsSource="{Binding ElementName=this, Path=ItemsSource}"
                          SelectedItem="{Binding ElementName=this, Path=SelectedItem, Mode=TwoWay}"
                          SelectionChanged="OnSelectionListSelectionChanged">
        </s:SurfaceListBox>
</Popup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:05:59.423

它不是 Popup 的 HwndSource，而是 Popup.Child 的可视父级的 HwndSource。听起来很奇怪，我知道。

因此，在弹出窗口的 Opened 事件中，我调用以下代码：

```
var myPopup = sender as Popup;

HwndSource hwndSource = (HwndSource)PresentationSource.FromVisual((Visual)VisualTreeHelper.GetParent(myPopup.Child)); 

hwndSource.EnableSurfaceInput(); 
```

# model - Yii中模型的多个实例的ajax验证

> ID：12038343
> 
> 赞同：0
> 
> 时间：2012-08-20T13:11:04.517
> 
> 标签：model, yii, multiple-instances

我有两个模型，即 acl 和 user。每个都有自己的一组验证规则。但是，我在一个表单中使用所有输入字段。

在 UserController 中，我在 createAction 方法中有两个 ajax 验证方法

这看起来像这样

```
 public function actionCreate()
    {
            $model=new user;
            $acl = new acl;

            // Uncomment the following line if AJAX validation is needed

                    $this->performAjaxValidation1($acl);

                    $this->performAjaxValidation($model);

            //$this->performAjaxValidation1($acl);

            //$valid=$model->validate();
            //$valid=$acl->validate() && $valid;

            if(isset($_POST['user'], $_POST['acl']))
            {
                    $model->attributes=$_POST['user'];
                    $acl->attributes=$_POST['acl'];
                    if($model->save() && $acl->save())
                            $this->redirect(array('view','id'=>$model->id));
            }

            $this->render('create',array(
                    'model'=>$model,
                    'acl'=>$acl
            ));
    } 
```

Ajax验证

```
 protected function performAjaxValidation($model)
    {
            if(isset($_POST['ajax']) && $_POST['ajax']==='user-form')
            {
                    echo CActiveForm::validate($model);
                    Yii::app()->end();
            }
    }

    /**
     * Performs the AJAX validation.
     * @param CModel the model to be validated
     */
    protected function performAjaxValidation1($acl)
    {
            if(isset($_POST['ajax']) && $_POST['ajax']==='user-form')
            {
                    echo CActiveForm::validate($acl);
                    Yii::app()->end();
            }
    } 
```

只有一种形式可以验证任何人都可以建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:40:11.610

从`CActiveForm`的`validate()` [文档](http://www.yiiframework.com/doc/api/1.1/CActiveForm#validate-detail)中，您可以传递模型数组。您只需要声明一个 ajax 验证函数。下面是修改后的代码

控制器动作

```
 public function actionCreate()
    {
            $model=new user;
            $acl = new acl;

            // Uncomment the following line if AJAX validation is needed

             $this->performAjaxValidation(array($acl,$model));//pass the models as array

            if(isset($_POST['user'], $_POST['acl']))
            {
                    $model->attributes=$_POST['user'];
                    $acl->attributes=$_POST['acl'];
                    if($model->save() && $acl->save())
                            $this->redirect(array('view','id'=>$model->id));
            }

            $this->render('create',array(
                    'model'=>$model,
                    'acl'=>$acl
            ));
    } 
```

Ajax 验证功能

```
protected function performAjaxValidation($model)
    {
            if(isset($_POST['ajax']) && $_POST['ajax']==='user-form')
            {
                    echo CActiveForm::validate($model);
                    Yii::app()->end();
            }
    } 
```

# c# - 如何向左/向右滑动用户控件的问题

> ID：12038345
> 
> 赞同：0
> 
> 时间：2012-08-20T13:11:11.543
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

我有一个视图，在视图中，有两个用户控件，每个控件上都有一个按钮。当页面加载时，将加载第一个用户控件。当我单击第一个用户控件中的按钮时，我想向左滑动第一个用户控件，使其不可见并显示第二个用户控件。当我单击第二个用户控件中的按钮时，我想向右滑动第二个用户控件，使其不可见并再次显示第一个用户控件。任何人都可以帮助如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:20:05.980

如果我猜对了，你想要 wpf 中的 Carousel 之类的东西。如果是这样，[这](http://wpfcarousel.codeplex.com/)是链接。它允许您左右滑动多个项目以在它们之间切换。

另一种方法是在 WPF 中使用默认动画，这意味着将 DoubleAnimation 应用于 Margin 属性，将边距从 0 增加到 500（将其移出屏幕）并返回到 0（将其返回）或类似的东西。Head's up for double animation and move controls is [here](http://pradeepmahdevu.blogspot.com/2009/02/flying-grids-using-margin-animation.html)和官方文档[在这里](http://msdn.microsoft.com/en-us/library/ms752312.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:59:38.803

您可以做一些更通用的事情并调整使用像素着色器的[TransitionControl ，而不是硬编码为您的特定场景设计的动画。](http://pwlodek.blogspot.com/2011/11/wpf-transitions-using-pixel-shaders-and.html)设置 content 属性，您可以指定希望将其应用为过渡的着色器效果。

# jquery - 在 jQuery 1.8.0 中使用 CJuiAutoComplete 会在 top=0, left=0 处呈现自动完成列表

> ID：12038347
> 
> 赞同：1
> 
> 时间：2012-08-20T13:11:13.363
> 
> 标签：jquery, jquery-ui, autocomplete, yii

我正在使用 yii 框架并正在测试使用[jQuery UI 的 Autocomplete的](http://jqueryui.com/demos/autocomplete/)[CJuiAutoComplete](http://www.yiiframework.com/doc/api/1.1/CJuiAutoComplete)功能。 如果我使用随我的 yii 版本一起提供的 1.6.1 版本，自动完成字段可以正常工作。但是，如果我切换到 jQuery 1.8.0，包含可供选择的选项的列表的呈现似乎不正确。我观察到在运行 1.6.1 时，列表会在样式参数中设置一个顶部和左侧值。但是，如果运行 1.8.0，这些值为零。有没有其他人经历过这个？解决这个问题的好方法是什么？ 我想我可以手动设置这些值，但更喜欢 jQuery 来处理这个:) 如果您需要查看任何代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:02:21.263

找到它，使用 ui 1.8.2+ 你需要包含以下 UI 文件：

`UI Core`, `UI Widget`, 和 `UI Position`

要将它们包含在 yii 中，只需使用 CClientScript 调用它们：

```
Yii::app()->clientScript->registerScriptFile('//jquery-ui.googlecode.com/svn/tags/1.8.23/ui/jquery.ui.position.js');
Yii::app()->clientScript->registerScriptFile('//jquery-ui.googlecode.com/svn/tags/1.8.23/ui/jquery.ui.core.js');
Yii::app()->clientScript->registerScriptFile('//jquery-ui.googlecode.com/svn/tags/1.8.23/ui/jquery.ui.widget.js'); 
```

不完美，因为我认为 Yii 应该默认包含它们，但它确实有效。

感谢 Chris 在这里的回答：[jquery ui autocomplete position wrong](https://stackoverflow.com/questions/2560205/jquery-ui-autocomplete-positioning-wrong#answer-7379634)

# c - 一个程序改变另一个程序的数据

> ID：12038350
> 
> 赞同：1
> 
> 时间：2012-08-20T13:11:34.067
> 
> 标签：c, windows, ipc

我可以编写并运行一个程序来创建一个整数，比如 a 并且我可以编写另一个程序来修改这个整数，而这两个程序都在运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:13:35.080

是的，但是您将不得不涉及某种[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)。在大多数现代操作系统上，内存是虚拟的，不能直接共享原始指针。

# database - zend 框架使用 to 连续显示图像

> ID：12038352
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:11:35.850
> 
> 标签：database, image, zend-framework, echo

我已经将图像添加到数据库中，使用目录路径作为一行中的一个字段，并将文件扩展名作为一行中的另一个字段。

表代码：

```
CREATE TABLE chinaletting (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    category TEXT NOT NULL,
    title TEXT NOT NULL,
    image BLOB NOT NULL,
    imageext TEXT NOT NULL,
    floorroom TEXT NOT NULL,
    spacesize TEXT NOT NULL,
    available TEXT NOT NULL,
    contactname TEXT NOT NULL,
    contactnumber TEXT NOT NULL,
    email VARCHAR(32) NOT NULL DEFAULT 'noemail@test.com'
);
CREATE INDEX "id" ON "chinaletting" ("id"); 
```

表格显示：

```
<dl>
    <?php foreach ($this->entries as $entry): ?>
    <dt><?php echo $this->escape($entry->category) ?></dt>
    <dd><?php echo $this->escape($entry->title) ?></dd>
    <dd><?php echo $this->escape($entry->image), $this->escape($entry->imageext)  ?></dd>
    <dd><?php echo $this->escape($entry->floorroom) ?></dd>
    <dd><?php echo $this->escape($entry->spacesize) ?></dd>
    <dd><?php echo $this->escape($entry->available) ?></dd>
    <dd><?php echo $this->escape($entry->contactname) ?></dd>
    <dd><?php echo $this->escape($entry->contactnumber) ?></dd>
    <dd><?php echo $this->escape($entry->email) ?></dd>
    <?php endforeach ?>
</dl> 
```

在屏幕上显示：

![在此处输入图像描述](../Images/7ec1ad3564e5fe8d62e53ee27334d785.png)

真正要显示的是图片谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:00:57.497

尝试：

```
<dl>
    <?php foreach ($this->entries as $entry) {
      if($this->escape($entry->category) == 'pacific') { ?>
        <dt><?php echo $this->escape($entry->category) ?></dt>
        <dd><?php echo $this->escape($entry->title) ?></dd>
        <dd><img src="<?php echo $this->escape($entry->image), $this->escape($entry->imageext)  ?>"></dd>
        <dd><?php echo $this->escape($entry->floorroom) ?></dd>
        <dd><?php echo $this->escape($entry->spacesize) ?></dd>
        <dd><?php echo $this->escape($entry->available) ?></dd>
        <dd><?php echo $this->escape($entry->contactname) ?></dd>
        <dd><?php echo $this->escape($entry->contactnumber) ?></dd>
        <dd><?php echo $this->escape($entry->email) ?></dd>
    <?php }} ?>
</dl> 
```

对于 2 个类别：

```
<dl>
    <?php foreach ($this->entries as $entry) {
      if($this->escape($entry->category) == 'shoes' || $this->escape($entry->category) == 'dress') { ?>
        <dt><?php echo $this->escape($entry->category) ?></dt>
        <dd><?php echo $this->escape($entry->title) ?></dd>
        <dd><img src="<?php echo $this->escape($entry->image), $this->escape($entry->imageext)  ?>"></dd>
        <dd><?php echo $this->escape($entry->floorroom) ?></dd>
        <dd><?php echo $this->escape($entry->spacesize) ?></dd>
        <dd><?php echo $this->escape($entry->available) ?></dd>
        <dd><?php echo $this->escape($entry->contactname) ?></dd>
        <dd><?php echo $this->escape($entry->contactnumber) ?></dd>
        <dd><?php echo $this->escape($entry->email) ?></dd>
    <?php }} ?>
</dl> 
```

# vb.net - 如何在网格视图中为网格单元格着色？

> ID：12038354
> 
> 赞同：2
> 
> 时间：2012-08-20T13:11:47.803
> 
> 标签：vb.net, winforms, datagrid, datagridview

下面是我的代码，我一直在尝试为单元格着色，但不确定当我的网格源是数据库时如何使用“样式”属性。我是新手，所以很难开始。

一些网站或指针会有很大帮助。

我希望能够为一些背景单元格着色或为某些行或特定列着色......基本上所有与颜色相关的东西。我怎样才能用我当前的代码片段做到这一点？另外，我可以了解更多信息的链接将不胜感激。

LarsTech 我正在尝试将您添加到聊天中，但我没有足够的代表，因此我想我无法与您联系。

```
Imports System.Data.SqlClient
Imports System.Collections.Generic

Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        Dim connectionString As String = "data source=SQst; database=MVar2; User ID=Wepp; Password=2010Live; Integrated Security=false;"

        Dim sql As String = "SELECT * FROM Prer"

        Dim connection As New SqlConnection(connectionString)

        Dim dataadapter As New SqlDataAdapter(sql, connection)

        Dim ds As New DataSet()

        connection.Open()

        dataadapter.Fill(ds, "Authors_table")

        connection.Close()

        DataGridView1.DataSource = ds

        DataGridView1.DataMember = "Authors_table"
    **DataGridView1.Rows[2].DefaultCellStyle.BackColor = Color.PaleGreen
    DataGridView1.Rows[3].Cells[1].Style.BackColor = Color.Red**    

    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

        Call PrintDGV.Print_DataGridView(DataGridView1)

    End Sub

End Class 
```

**我得到的错误：**

```
Error   1   Property access must assign to the property or use its value.   
Error   2   Identifier expected.    
Error   3   Property access must assign to the property or use its value.   
Error   4   Identifier expected. 
```

我试过：DataGridView1.Rows(0).Cell(0).Style.BackColor = Color.Red

我得到了 1 个错误：

```
Error   1   'Cell' is not a member of 'System.Windows.Forms.DataGridViewRow'. 
```

**编辑**：在网上查看更多内容后，我使用以下代码为选定的单元格着色：

```
DataGridView1.Item(4, 5).Style.BackColor = Color.Red 
```

然而，这不会为行或列着色，所以我仍然希望让这些东西发挥作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:18:21.530

有几种不同的方法可以做到这一点。我相信 currentcell 是指当前活动的单元格，因此在填充网格后基于它着色将不会产生任何结果。

有几种方法可以做到这一点：

```
c#:
For rows/cells:
dataGridView1.Rows[RowNumber].DefaultCellStyle.BackColor = Color.PaleGreen;
dataGridView1.Rows[RowNumber].Cells[1].Style.BackColor = Color.Red;

for columns:
dataGridView1.Columns[ColumnNumber].DefaultCellStyle.BackColor = Color.Black;

VB:
DataGridView1.Rows(0).DefaultCellStyle.BackColor = Color.Green
DataGridView1.Columns(0).DefaultCellStyle.BackColor = Color.Blue 
```

这两个都会将颜色应用于单元格背景。使用一些逻辑来控制如何/哪些单元格/行被着色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:31:37.533

您还可以在 .aspx 文件中以声明方式进行设置。该链接指向代码的 2.0 版本，但这仍然是兼容的。

[MSDN](http://msdn.microsoft.com/en-us/library/aa479342.aspx)

# ios - 在 Interface Builder 中布置表格

> ID：12038359
> 
> 赞同：0
> 
> 时间：2012-08-20T13:12:08.263
> 
> 标签：ios, uitableview

是否可以用一些示例数据填充 InterfaceBuilder 中的 UITableViews？因为我知道我在这个表中有 4 个条目，但是想将它布局到特定的边缘。但是由于我不知道最终表的确切大小（只有在调试时我才能看到数据），所以我无法对它们进行布局。

有没有人可以解决这个问题？

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:34:39.223

听起来像是`UITableView`静态单元格的工作，在 iOS 5 及更高版本中可用，并允许您直接在 IB 中将数据输入 UITableViewCells。看看[Ray Wenderlich 的教程](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)，它涵盖了这个主题（向下滚动到“静态单元”部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:31:48.840

`UITableView`可以从协议中填充数据`UITableViewDataSource`，因此据我所知，您不能从界面构建器中填充数据。

加载数据后，您始终可以使用以下方法对表格进行布局：`tableview.frame = ...`

# c++ - Setting void * pointer equal to an integer

> ID：12038368
> 
> 赞同：0
> 
> 时间：2012-08-20T13:12:29.517
> 
> 标签：c++, pointers

I have a question about the following code:

```
int age = 20;
void * pointer;
pointer = alloc(sizeof(int), 0)

pointer = (void*) age; 
```

How does it work?

What is the value of `pointer`?

What happens with this piece of code in terms of the line :

`pointer = (void*) age;`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T13:16:09.940

This code accomplishes exactly nothing.

First, you allocated a pointer for a size of `int`, using non-standard allocation methods.

Then, you assign that pointer to point to the address 0x14, which probably doesn't contain any valid information, and would give you a SEGFAULT if you attempted to dereference it.

Third, you leak the initial memory you `alloc`'d for pointer, which is never a good thing.

Overall, a VERY bad design pattern.

# java - 带有 websphere 6.1 和 RAD 7 的休眠和 Spring MVC

> ID：12038370
> 
> 赞同：0
> 
> 时间：2012-08-20T13:12:42.503
> 
> 标签：java, spring, hibernate, websphere, ibm-rad

我目前需要知道哪些版本的 spring mvc & hibernate 将与 IBM websphere application server 6.1 [使用 RAD 7 / J2ee 1.4 & java 1.5] 和通过 websphere 连接池的后端 db2 一起使用，任何更有用的示例。我需要创建一个带有配置日期的小应用程序，以便使用 hibernate 通过 websphere 6.1 应用程序服务器连接池从 db2 数据库中选择，并在前端使用 spring mvc 显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:21:05.200

Hibernate 3 工作正常，我在 WAS 6.1 上使用它来访问 DB2 和 Oracle 数据库没有问题。我没有使用 Spring MVC。但是其他 Spring 组件可以顺利工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T23:52:38.337

这篇文章值得您阅读 - [http://www.ibm.com/developerworks/websphere/techjournal/0609_alcott/0609_alcott.html](http://www.ibm.com/developerworks/websphere/techjournal/0609_alcott/0609_alcott.html)

# haskell - 给出漂亮素数的 Haskell 程序

> ID：12038373
> 
> 赞同：0
> 
> 时间：2012-08-20T13:12:54.537
> 
> 标签：haskell

我制作了一个计算漂亮素数的haskell程序。漂亮的素数是非常接近 2 的幂的素数。例如，您给出 2 个数字：10 和 20 然后它返回 17，因为 17 最接近 2 的幂。17 - 16 = 1 所以它是最接近的。

我做了这个：

编辑：我已经重写了这样的primefunction和e verw函数，但仍然得到-1。

```
 -- Geeft priemgetallen terug tussen de 2 grenzen
-- English: Gives primenumbers between 2 numbers
priemgetallen :: Int->[Int]
priemgetallen b = take b (zeef [2..])
    where zeef (p:xs) = p : zeef [x | x<-xs, (mod x p) /= 0]

-- Geeft machten terug tussen de 2 grenzen
-- English: Gives powers of 2 between 2 numbers
machten :: Int->Int->[Int]
machten a b 
        | a <= 2 = 2:[2^x| x<-[2..b], (2^x) `mod` 2 == 0, 2^x < b, 2^x > a]
        | otherwise = [2^x| x<-[2..b], (2^x) `mod` 2 == 0, 2^x < b, 2^x > a]

-- English: the start of the function
prettyprime :: Int->Int->Int
prettyprime a b = vergelijk ( verw a (priemgetallen b)) (machten a b)

-- Filter the list
verw :: Int->[Int]->[Int]
verw _ [] = []
verw k (x:xs)
    | x > k = [x] ++ verw k xs
    | otherwise = verw k xs

-- Vergelijkt alle priemgetallen en geeft welke korste bij het ander ligt
-- English this function must see what primenumber is the closest to a power of 2 but I can't fix it
vergelijk :: [Int]->[Int]->Int
vergelijk [] _ = -1
vergelijk _ [] = -1
vergelijk (x:xs) (y:ys)
            | x - y < vergelijk (x:xs) ys = x
            | x - y > vergelijk (x:xs) ys = vergelijk xs (y:ys)
            | x - y == vergelijk (x:xs) ys = x

main = do
       print $ prettyprime 14 20 
```

有人能帮我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:42:22.007

不完整的模式是因为您省略了 when 的情况`x - y == vergelijk (x:xs) ys`。如果您添加`-fwarn-incomplete-patterns`后卫并将其转换为真实的，编译器能够警告您`case`：

```
vergelijk (x:xs) (y:ys) = case compare (x - y) (vergelijk (x:xs) ys) of
    LT -> x
    -- you will get a warning about having no case for EQ
    GT -> vergelijk xs (y:ys) 
```

作为奖励，这个版本不太可能重新计算递归调用，尤其是在低优化级别上。

# c# - 如何将 ip 地址传递给 webBrowser 控件

> ID：12038376
> 
> 赞同：0
> 
> 时间：2012-08-20T13:13:17.397
> 
> 标签：c#, .net, ip, webbrowser-control, ip-address

如何将 IPAddress 传递给 webBrowser 控件

这是我的代码，但我不知道如何将 ip-address 传递给 webBrowser 控件。

```
IPHostEntry host;
string localIP = "?";
host = Dns.GetHostEntry(Dns.GetHostName());
foreach (string line in File.ReadAllLines("proxy.txt"))
{
    IPAddress ip = IPAddress.Parse(line);
    if (ip.AddressFamily.ToString() == "InterNetwork")
    {
        localIP = ip.ToString();
        textBox1.Text = ip.ToString();

        // This code doesn't work, it's just a hypothetical example:
        webBrowser1.SourceIPAddress=ip; 

        webBrowser1.Navigate(textBox2.Text);
    }
} 
```

这就是我想将 ip 地址传递给 webBrowser 控件的方式

```
//The code doesn't work, it's just a hypothetical example:
webBrowser1.SourceIPAddress = ip; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:23:36.240

只需写在你的文本框中`http://74.125.236.211`

或者

```
textBox2.Text="http://74.125.236.211" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:17:16.910

我不清楚你真正想要做什么，但我会大胆猜测，假设你想`textBox2.Text`使用代理服务器下载 url 并想尝试文件中的代理，`proxy.txt`直到一个成功工作。

```
foreach (var proxy in File.ReadAllLines("proxy.txt"))
{
    try
    {
        using (var wc = new WebClient())
        {
            wc.Proxy = new WebProxy(proxy);
            string page wc.DownloadString(textBox2.Text);
            return page;
        }
    }
    catch { }
} 
```

# java - 如何在 JPA 中定义单向 OneToMany 关系

> ID：12038380
> 
> 赞同：78
> 
> 时间：2012-08-20T13:13:28.867
> 
> 标签：java, jpa, jpa-2.0

JPA 中的实体映射存在以下问题。我有两个实体，第一个是查找，第二个是代表实体翻译的文本。现在我需要将 Lookup 绑定到 Text，但我不希望 Text 引用 Lookup。为了使这更复杂，Text 在此关系中不使用其主键，而是在 `TXTHEAD_CODE`列中定义的元代码。

`Lookup.java`

```
@Entity
@Table(name = "DATREG")
public class Lookup implements PersistableEntity {

    @Id
    @Column(name = "DATREG_META_CODE")
    private String metaCode;

    @OneToMany
    @JoinTable(name="TXT", 
            joinColumns=@JoinColumn(name="DATREG_META_CODE", referencedColumnName="TXTHEAD_CODE"),
            inverseJoinColumns=@JoinColumn(name="DATREG_META_CODE"))
    private List<Text> text; 
```

`Text.java`

```
@Entity
@Table(name = "TXT")
public class Text {

    @Id
    @Column(name = "TXT_ID")
    private Long id;

    @Column(name = "TXTHEAD_CODE")
    private String code; 
```

所以我尝试了这个（以及其他一些变化）但没有结果。我也无法在数据库中创建连接表，我不想将 Lookup 绑定到我的 Text 类。那么有人可以告诉我是否还有其他方法吗？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-08-20T17:00:48.950

我的 JPA 工作圣经是[Java Persistence wikibook](http://en.wikibooks.org/wiki/Java_Persistence)。它有一个[关于单向的部分`OneToMany`](http://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Undirectional_OneToMany.2C_No_Inverse_ManyToOne.2C_No_Join_Table_.28JPA_2.0_ONLY.29)`@JoinColumn`，解释了如何使用注释来做到这一点。在你的情况下，我想你会想要：

```
@OneToMany
@JoinColumn(name="TXTHEAD_CODE")
private Set<Text> text; 
```

我使用的是 a`Set`而不是 a `List`，因为数据本身没有排序。

与 wikibook 中的示例不同，上面使用的`referencedColumnName`是 defaulted 。如果这不起作用，请尝试一个明确的：

```
@OneToMany
@JoinColumn(name="TXTHEAD_CODE", referencedColumnName="DATREG_META_CODE")
private Set<Text> text; 
```

# dynamics-crm - 如何保存记录并立即使用其 GUID

> ID：12038381
> 
> 赞同：2
> 
> 时间：2012-08-20T13:13:32.040
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在从功能区按钮执行一些 javascript，我想要做的是保存我正在创建的记录，然后立即将其 GUID 用于一些代码。每次我尝试它时，GUID 都会返回 null，即使我在保存记录后请求它也是如此。如果我在保存后再次尝试该按钮，那么它可以工作，但不是因为我正在保存它。

有没有办法做到这一点？

```
function RibbonButton_AddProduct()
{
  //Save the Record
  Xrm.Page.data.entity.save();

  LoadProductCreate();
}

function LoadProductCreate()
{
  var serverUrl;
  var errorMessage = "Context to retrieve the Server URL is not available.";
  if (typeof GetGlobalContext != "undefined"){
     serverUrl = GetGlobalContext().getServerUrl();
  } else {
  if (typeof Xrm != "undefined"){
    serverUrl = Xrm.Page.context.getServerUrl();
  } else {
    alert(errorMessage);
    return;
  }
}
if (serverUrl.match(/\/$/)){
   serverUrl = serverUrl.substring(0, serverUrl.length - 1);
}     

var recordId = Xrm.Page.data.entity.getId();

alert(recordId);
var url = serverUrl + "/main.aspx?etc=10030&extraqs=%3f_CreateFromId%3d%"+recordId
  +"%257d%26_CreateFromType%3d10029%26etc%3d10030%26"
  +"pagemode%3diframe%26preloadcache%3d1345465354543&pagetype=entityrecord";
window.open(url);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T17:14:42.967

这是解决此问题的另一种方法。

您正在尝试做的是“针对系统工作”-您实际上是在制作两个保存按钮。在 Crm 的其余部分中，当功能区按钮需要 Id 时，必须首先保存记录。例如，您不能在未保存的记录上使用对话框或工作流按钮，也不能向未保存的记录“添加新的/现有的”。

所以我的解决方案是禁用未保存表单上的按钮，强制用户手动保存记录，然后允许他们使用您的按钮 - 这是 Crm 的使用方式，也是 Crm 其余部分的方式工作。

你不应该对系统工作，你应该使用它，你有一个产品可以定制和扩展——而不是改变。

如果这不符合您的要求，我建议您使用 Greg 的建议 (1) 来设置标志，尽管这听起来有点混乱 - 但这是本质上的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:30:13.750

您可以尝试以下两种方法之一：

1.  在表单中添加一个隐藏的布尔属性（例如“new_launchProductCreate”），在保存之前在代码中设置它，然后在加载时读取它。

    *   `Entity.Attributes`您可以创建一个针对记录的“创建”步骤注册的插件，而不是在创建之前设置值（并因此可能将其提交到数据库），该插件在记录返回给用户时将布尔值注入集合. 这将防止值持久保存到数据库中并在每次加载表单时运行。

    *   您可以改为使用 AJAX 在启动 onLoad 代码时重置该值，这样它就不会在每次表单加载时触发

2.  手动分配记录 guid，使用 AJAX 保存记录，使用新 guid 弹出新窗口，然后重新加载原始表单（以便表单不再处于“未保存”状态）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T17:16:24.583

冒着被证明是错误的风险，因为我无法立即验证这一点……您需要保存然后重新加载页面。

存储的值`Xrm.Page.data.entity.getId()`是在页面加载/初始化时设置的，因此在调用后访问它时不会更新`Save()`。

这也是为什么当您重新加载页面时它会起作用的原因。

也许您可以调用 save 然后重新加载窗口，添加您自己的查询字符串变量，以指示此事件刚刚发生？

例如

```
function DoSomething() {
    //do your stuff 
    Xrm.Page.data.entity.save();

    //something like - sure someone can do better!
    window.location = window.location.href + '&foo=bar';
} 
```

然后注册这样的东西 onFormLoad

```
function OnLoad() {
    var queryStringParms = Xrm.Page.context.getQueryStringParameters();
    //test to see if your query string param exists here
    for (var i in queryStringParams) {
        //if you find query string, do extra processing here
    }
} 
```

# android - 使用“BitmapFactory.decodeResource”加载位图时应用程序崩溃

> ID：12038384
> 
> 赞同：0
> 
> 时间：2012-08-20T13:13:48.013
> 
> 标签：android, bitmap, crash, loading

我正在为小孩子开发一个游戏，其中包含不同的教育练习。在其中一个中，我需要一个图片背景，所以我正在加载它并使用 Matrix 对其进行缩放以填充屏幕。但有时加载图片会导致崩溃。

```
public DrawThread(SurfaceHolder surfaceHolder, Resources resources, float screen_x_max, float screen_y_max){
    this.surfaceHolder = surfaceHolder;
    screenWidth=screen_x_max;
    screenHeight=screen_y_max;
    // picture for bg
    picture = BitmapFactory.decodeResource(resources, R.drawable.background);
    ...
} 
```

在这个线程结束时，我回收它并为空。

```
if (this.picture!=null)
    {
        this.picture.recycle();
        this.picture=null;
    } 
```

但应用程序仍然崩溃。有错误日志：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:494)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:370)
at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:393)
at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:419)
at lexu.me.childstudy_lite.DrawThreadFindAnimals2.<init>(findAnimals2.java:271)
at lexu.me.childstudy_lite.findanimals2_view.surfaceCreated(findAnimals2.java:186)
at android.view.SurfaceView.updateWindow(SurfaceView.java:548)
at android.view.SurfaceView.dispatchDraw(SurfaceView.java:353)
at android.view.ViewGroup.drawChild(ViewGroup.java:1737)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1466)
at android.view.ViewGroup.drawChild(ViewGroup.java:1737) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:25:39.690

这是Android上的经典问题。这应该为您提供大量提示和方法：

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:09:31.290

您遇到内存不足异常。为避免这种情况，请查看此链接： [android 如何处理内存不足异常](https://stackoverflow.com/questions/4544919/android-how-to-handle-out-of-memory-exception)

网络上有大量信息可以帮助您解决这个问题。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:55:42.250

通过下采样位图，可以避免 OME。看看下面的链接。希望能帮助到你。

[Android：问题图像分辨率](https://stackoverflow.com/questions/11949234/androidissue-image-resolution/11949665#11949665)

**编辑：**在该链接中，它从 Asset 文件夹中获取图像。您可以根据需要对其进行修改。

# android - 在列表视图中加载图像后将图像存储到 sd 卡中

> ID：12038385
> 
> 赞同：0
> 
> 时间：2012-08-20T13:13:55.653
> 
> 标签：android, android-listview, android-imageview

我正在将图像从服务器下载到 中`ListView`，现在要执行此任务，我正在使用[ImageDownloader](http://code.google.com/p/android-imagedownloader/source/browse/trunk/src/com/example/android/imagedownloader/ImageDownloader.java)示例代码。到目前为止它工作正常。

但是我想在其中存储`save`图像，但是我很困惑何时存储图像，因为图像正在异步下载，并且由于 ViewHolder 模式对我来说很难判断。`ListView``SD card`

一旦我将它存储在 SD 卡中，下次我只想从内存中读取它。

ImageDownload 将位图存储在缓存中，并在下载后从那里获取它。但问题是它的行为是不可预测的。

有时它从服务器下载，有时从缓存中下载。

所以任何人都可以帮助我找到将图像存储在 SD 卡中的合适位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:21:21.917

修改您的 ImageDownloader 类以像这样保存图像：

*   为下载方法添加一个参数，例如：

> ```
>  download(String url, ImageView imageView, Boolean saveData) 
> ```

*   在你的 ID 类中创建一个全局变量 saveData ：

> 私有布尔保存数据；

并将下载dmethod中作为参数给出的值存储在其中：

> this.saveData = 保存数据；

*   BitmapDownloaderTask 的 onPostExecute 方法应如下所示：

> @Override protected void onPostExecute(Bitmap bitmap) { if (isCancelled()) { bitmap = null; }
> 
> ```
>  addBitmapToCache(url, bitmap);
> 
>         if (saveData == true) {
>             try {
>                 FileOutputStream out = new FileOutputStream(path);
>                 bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);
>             } catch (Exception e) {
>                 e.printStackTrace();
>             }
>         }
> 
>         if (imageViewReference != null) {
>             ImageView imageView = imageViewReference.get();
>             BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);
>             // Change bitmap only if this process is still associated with it
>             if (this == bitmapDownloaderTask) {
>                 imageView.setImageBitmap(bitmap);
>             }
>         }
>     } 
> ```

其中 path 是您要保存图像的路径。

下次要加载图像之前，您必须查看它是否已经下载并从路径加载，否则调用 ImageDownloader。

而已！请享用！

# android - Android：当菜单可见时覆盖 BackButton

> ID：12038391
> 
> 赞同：0
> 
> 时间：2012-08-20T13:14:23.953
> 
> 标签：android, back-button

假设我有一个活动 A 覆盖后退按钮以显示一些对话框，并且该活动有一个菜单。因此，当按下后退按钮时，会显示对话框，但如果用户按下菜单按钮然后按下后退按钮，则不会显示对话框。无论菜单是否可见，如何使后退按钮的行为相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:17:01.567

您需要覆盖 BackButton。

```
onBackPressed()
{

    closeOptionsMenu(); // to close the Options Menu if it is visible

      //your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:24:39.007

```
protected boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

    }
    return true;
} 
```

希望这有帮助

# javascript - Oracle ApEx 复选框以在选中/未选中时操作其他值

> ID：12038392
> 
> 赞同：3
> 
> 时间：2012-08-20T13:14:24.343
> 
> 标签：javascript, sql, checkbox, oracle11g, oracle-apex

首先，我使用的是最新版本的 Oracle ApEx 4.1.1，并有以下标准报告，其中包含一个复选框选择，因此当单击时，我想使用 sysdate 设置另一个字段，包括时间。

未选中时，想将我之前声明中设置的日期以及注释字段重置为 NULL

报告可能如下所示：

```
select id,
       name,
       telephone,
       apex_item.checkbox2(10,id) as "Tick when Contacted",
       apex_item.display_and_save(20,:P2_DATE) as "Date Contacted",
       apex_item.textarea(30,:P2_COMMENT,5,80) as "Comment"
from   my_table 
```

作为上述报告的示例，可能总共有 10 条记录，因此由于用户选中了 10 条记录复选框中的每一个，我想当场将日期字段设置为 sysdate。当复选框未选中时，我也希望反向完成 - 将日期和注释都设置为 NULL。

我应该如何处理这个？以上是否可以通过动态操作或直接通过 JavaScript/按需流程实现？

如果可能的话，肯定会更喜欢动态操作方法，以便学习执行我所需任务的新方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:23:44.267

EMP 表上的示例：

```
select 
apex_item.checkbox2(p_idx => 1, p_value => empno, p_attributes => 'class="check_select"') empselection,
apex_item.text(2, ename) empname,
empno,
ename
from emp 
```

向复选框项目添加一个类。这使得使用 jQuery 定位目标变得容易。

创建一个新的动态动作，例如“复选框单击”。
**事件**：单击
**选择**类型：jQuery 选择器
**jQuery**选择器：（`.check_select`这是我们在 sql 中的复选框中添加的类）
**条件**：JavaScript 表达式
**值**：`$(this.triggeringElement).prop('checked')`

条件是检查复选框元素以查看它是已选中还是未选中。prop() 测试元素的属性，在这种情况下返回 true 或 false。当为真时，将触发一个真动作，否则将触发一个假动作。

**真正的行动：**
**行动**：执行 JavaScript 代码
**代码**：`$(this.triggeringElement).closest("tr").find("td[headers='EMPNAME'] input").val('test');`

**错误操作：**
**操作**：执行 JavaScript 代码
**代码**：`$(this.triggeringElement).closest("tr").find("td[headers='EMPNAME'] input").val('');`

两者都没有选择类型，因为我们需要将项目定位在与单击的复选框相同的行中。没有办法通过顶点选择的可能性来做到这一点。通过标题定位列，并且不要忘记定位 td 内的输入（或：`textarea`！）

创建动态操作后，返回。在**Advanced**下将**Event Scope**更改为`Live`。这是考虑分页所必需的。如果您不更改此设置，则分页后不会将任何操作绑定到元素。

然后编辑真假动作，**取消勾选** `Fire on Page Load`。

现在说明您的日期：
由于您希望 sysdate 作为默认值，我建议在您的页面中添加一个隐藏项，例如 P9_DEF_DATE。作为**源**，使用**PLSQL 表达式**，并使用`SYSDATE`.
然后，您可以将该字段的值用作默认值，例如：

```
$(this.triggeringElement).closest("tr").find("td[headers='EMPNAME'] input").val($v('P9_DEF_DATE')); 
```

最后一点：通过 val 删除一个值：`val('')`与**单**引号一起使用！根据我的经验，不会与 double 一起使用。

**动态操作文档的一些链接：**

*   oracle 的示例（显示如何在动态操作中使用 plsql 块）： [http ://st-curriculum.oracle.com/obe/db/apex/r40/apexdynactions/apexdynactions_ll.htm](http://st-curriculum.oracle.com/obe/db/apex/r40/apexdynactions/apexdynactions_ll.htm)
*   Dimitri Gielis（一些基础知识）： [http ://dgielis.blogspot.be/search/label/Dynamic%20Actions](http://dgielis.blogspot.be/search/label/Dynamic%20Actions)
*   Dan McGhan 的 Youtube 教程： [http ://www.youtube.com/watch?v=9JAKMU8x5nI](http://www.youtube.com/watch?v=9JAKMU8x5nI)
*   当然，在网络上总是有很多东西可以找到，而且不要忘记 OTN 论坛。

**ajax 进程的一个示例：**
假设我想更新我检查的员工的 COMM 列。

在报告页面上创建一个新流程，给它一个足够简单的名称，并且不要在其中添加空格。例如，我正在使用“update_emp”运行。

```
update emp
set comm = apex_application.g_x02
where empno = apex_application.g_x01; 
```

向动态操作添加另一个真实操作，键入“执行 JavaScript 代码”。

```
$.post('wwv_flow.show', 
       {"p_request"      : 'APPLICATION_PROCESS=update_emp',
        "p_flow_id"      : $v('pFlowId'), //app id
        "p_flow_step_id" : $v('pFlowStepId'), //page id
        "p_instance"     : $v('pInstance'), //session id
        "x01"            : $(this.triggeringElement).val(),
        "x02"            : '88', //just a bogus value to demonstrate
        },
        function(data){
           /*normally you'd handle the returned value here
             an example would be a JSON return with which to set item values*/
        }
        ); 
```

此 javascript 将发布到页面，以`update_emp`进程为目标。`x01`并且`x02`是一种“临时”变量。它们存在，因此我们不必一直提交页面项目以将值发布到会话状态。它们是 apex_application 包的一部分。
所以在这里我`x01`用来存储 empno （复选框的值，因此`this.triggeringElement`），并`x02`传递佣金的值。我在这里对其进行了硬编码，但您当然可以获得任何您想要的值。

`$.post`是一个发布到页面的 jQuery 方法。

当您学习动态操作或拖网论坛时，您可能会遇到另一种发布到页面的方法，即`htmldb_Get`，这是内置在 apex javascript 文件中的。**我不使用它是因为它不是真正的 Ajax（异步），而是 Sjax（同步），而且在我看来**不够透明。我相信它的某些`GetAsync`部分，这很好，但你几乎看不到它在任何示例中使用。现在`get.get();`看起来很简单，你可以用 3 行代码而不是我的一段 js 来实现相同的结果，认为实现真正的 ajax 调用是一个好习惯。您有时可能会等待完成一个过程太多，并意识到`htmldb_Get`您的应用程序中的所有这些调用并不像您想象的那么有趣......

此报告设置也使事情变得更加复杂。对于页面项目，您可以采用另一条路线：您可以执行 plsql 代码块，而不是执行 javascript 块。在那里，您可以指定要提交到会话状态的项目（以便它们可以在 plsql 块中使用）和项目的值由该 plsql 块设置。（sql 块在服务器端运行，这意味着引用的项目需要在会话状态下具有它们的值）。我建议也玩一下。
话虽如此，您也可以使用报告操作来执行此操作，但是您需要设置一些虚假项目来临时保存可以提交到会话状态的值。再说一次，我不喜欢那个，所以我没有去（另一个'imo'因此）。

本质上，打开浏览器检查工具，例如 firebug。它允许您检查在页面上进行的 ajax 调用，并提供了一种很好的方法来查看它。

# multithreading - 将数据传递给 tk gui

> ID：12038393
> 
> 赞同：1
> 
> 时间：2012-08-20T13:14:33.720
> 
> 标签：multithreading, perl, user-interface, tk

我想要一个 gui 来显示我的变量的值，所以我可以看到它工作。下面的代码增加了 $counter 但标签不会像“textvaraible”那样更新。问题可能是作用域，线程在变量 $counter 的单独副本上工作，当您结束脚本时，INT_handler 打印 5，显示原始变量未更改。

```
#!/usr/bin/perl
use threads; use threads::shared; use warnings;

my $counter :shared = 5;
$counter_t = threads->create(\&counter); # counting thread
use Tk;
print "gui thread started\n";
my $mw = MainWindow->new;
$mw->geometry("100x100");
$label = $mw->Label(-textvariable => \$counter)->pack(qw/-anchor nw -padx 10/);

$SIG{'INT'} = 'INT_handler';

sub counter{    
    print "counter thread started\n";
    while(1){       
        sleep(1);
        $counter++;
        print $counter . "\n";
    }
}

MainLoop;

sub INT_handler {
    print "\nCounter value is " . $counter . "\n";
    exit(0);
} 
```

那么，解决方案是什么？某种工会？共享变量似乎没有帮助，或者我没有正确使用它。使用“我们的”或“我的”作为计数器并没有什么不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:48:09.897

一种方法是为此使用 Thread::Queue ——所有线程将推送（入队）信息到结果队列，您将在主代码中处理它：

```
sub start {

    my @result;

    $queue= Thread::Queue->new;
    $queue_processed = Thread::Queue->new;

    my @domains = get_domains($domains_filename);

    $queue->enqueue(@domains);

    my @threads= map { threads->create( sub { create_thread($_) } ) } ( 1 .. $CONFIG{NUMBER_OF_THREADS} );

    $_->detach for (@threads);

    my $counter = 0;

    while ( $counter < scalar @domains ) {

    my $result = $queue_processed->dequeue_nb;

    if ($result) {

        if ( $result->{status} ) {

        $txt_processed_domains->configure(-state => "normal");
        $txt_processed_domains->insert_end( $result->{domain} . ".com" . " => " . "Available!" );
        $txt_processed_domains->see("end");
        $txt_processed_domains->configure(-state => "disabled");
        Tkx::update();
        $counter++;

        Win32::Sound::Volume('100%');
        Win32::Sound::Play( $CONFIG{SOUND_FILE} );
        Win32::Sound::Stop();

        my $response = Tkx::tk___messageBox( -type => "yesno", -message => $result->{domain} . ".com" . " is " . "Available! Continue?", -icon => "question", -title => "Domain found" );

        unless ( $response eq 'yes' ) {

            exit;
        }
        }
        else {

        $txt_processed_domains->configure(-state => "normal");
        $txt_processed_domains->insert_end( $result->{domain} . ".com" . " => " . "Already taken!" );
        $txt_processed_domains->itemconfigure( $counter, -background => "#f0f0ff" );
        $txt_processed_domains->see("end");
        $txt_processed_domains->configure(-state => "disabled");
        Tkx::update();
        $counter++;
        }
    }

    }

    Tkx::tk___messageBox( -message => "Completed!" );
}

sub create_thread {

    my $thread_id = shift;

    my ($domain);

    while( $domain = $queue->dequeue_nb ) {

    my $mech = MyMech->new( autocheck => 1 );
    $mech->quiet(0);

    $mech->get( $CONFIG{BASE_URL} . "domains/search.aspx?domainToCheck=$domain&tld=..com" );

    if ( $mech->content() =~ m{is\s+available!}is ) {

        open my $fh, ">>", $result_filename or die "Couldn't create result file! $!";

        #$queue_processed->enqueue( "$domain.com => Available!" );
        $queue_processed->enqueue( { status => 1, domain => $domain, } );

        print $fh "$domain.com\n";
        close $fh;
    }
    else {

        $queue_processed->enqueue( { status => 0, domain => $domain, } );
    }

    #sleep $CONFIG{DELAY_BETWEEN_REQUESTS};
    }

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:00:15.603

[http://www.perlmonks.org/?node_id=585533](http://www.perlmonks.org/?node_id=585533)

回答了我的问题

```
#!/usr/bin/perl
use warnings;
use strict;
use threads;
use threads::shared;

# for shared vars .....
# declare, share then assign value
my $ret;
share $ret;
$ret = 0;
my $val = 0;
#create thread before any tk code is called
my $thr = threads->create( \&worker );

gui();    

# tk code only in main
sub gui {
    use Tk;
    my $mw = MainWindow->new();
    my $label = $mw->Label(
         -textvariable => \$val )->pack();

    $mw->repeat(10,sub{
              $val = $ret;              
             });
    MainLoop;
}

# no Tk code in thread
sub worker {
   for(1..10){
     print "$_\n"; 
     $ret = $_;
     sleep 1; 
    }
   $ret = 'thread done, ready to join';
   print "$ret\n";
} 
```

分配发生在 gui sub 中，以便 -textvariable 正常工作

# asp.net - 使用白色或黑色边框调整图像大小

> ID：12038397
> 
> 赞同：0
> 
> 时间：2012-08-20T13:14:49.290
> 
> 标签：asp.net, image, resize

为了调整我的图片大小，我使用这种方法：

```
private Bitmap ResizeBitmap(Bitmap b, int nWidth, int nHeight)
{
    Bitmap result = new Bitmap(nWidth, nHeight);
    using (Graphics g = Graphics.FromImage((System.Drawing.Image)result))
        g.DrawImage(b, 0, 0, nWidth, nHeight);
    return result;
} 
```

是否有可能在图片的顶部/底部或右侧/左侧创建白色或黑色边框，以便图片居中并且我不必通过 css 来做？

示例：我有一张 200x100 像素的图片，我想让它在我网站上的 100x100 像素图像字段中工作。目前我将 200x100 像素的图片调整为 100x50 像素，以便它在 100x100 像素的框中匹配，并通过 css 将图片居中。

我需要的是在调整图片大小以添加边框后，图片不是 100x50 像素，而是 100x100 像素，带有白色或黑色边框...

任何想法......我可以用普通的.net库来做到这一点吗？感谢所有的建议！

最好的问候，杰西卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:26:02.217

我终于找到了解决我的问题的方法：

```
private Bitmap ResizeBitmapWithPadding(Bitmap b, int nWidth, int nHeight, int originalWidth, int originalHeight)
{
    Bitmap result = new Bitmap(originalWidth, originalHeight);
    using (Graphics g = Graphics.FromImage((System.Drawing.Image)result))
    { 
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
        g.SmoothingMode = SmoothingMode.HighQuality;
        g.PixelOffsetMode = PixelOffsetMode.HighQuality;
        g.CompositingQuality = CompositingQuality.HighQuality;
        g.Clear(GetColor());
        g.DrawImage(b, (originalWidth - nWidth) / 2, (originalHeight - nHeight) / 2, nWidnHeight);
    }
    return result;
} 
```

thanks for your help!

# php - SQL 查询结果不打印第一行项目

> ID：12038399
> 
> 赞同：0
> 
> 时间：2012-08-20T13:14:56.430
> 
> 标签：php, mysql, html-table, row

我想将查询结果打印到表格中。我在查询中设置了一个限制，只能获取 5 行。它确实从我的数据库中获取了 5 行。但是当我将结果打印到 HTML 表中时，结果中的第一行没有打印出来。我找不到我的代码有什么问题。请帮忙！

这是我的做法：

```
<table style="border:none; width:790px;; margin:10px;" cellpadding="0" cellspacing="0">
    <tr>
        <th  class="header">ID</th>
        <th  class="header">Client Name</th>
        <th  class="header">Driver's License</th>
        <th  class="header">Social Security</th>
        <th  class="header">Phone Number</th>
        <th  class="header">Email Address</th>
        <th  class="header">Date Signed Up</th>
    </tr>  
<?php

$i=1;
while($row = mysql_fetch_assoc($result)){
    if ($i & 1) { //odd rows
        echo '<tr>';
        echo '<td class="entry_odd">'.$row['cid'].'</td>';
        echo '<td class="entry_odd">'.$row['fname'].' '.$row['lname'].'</td>';
        echo '<td class="entry_odd">'.$row['license'].'</td>';
        echo '<td class="entry_odd">'.$row['ss1'].' / '.$row['ss2'].' / '.$row['ss3'].'</td>';
        echo '<td class="entry_odd">'.$row['phone1_1'].'-'.$row['phone1_2'].'-'.$row['phone1_3'];
            if ($row['phone1_ext'] != NULL ) {
                echo ' ext. '.$row['phone1_ext'].'</td>';
            } else { 
                echo '</td>';
            }
        echo '<td class="entry_odd">'.$row['email'].'</td>';
        echo '<td class="entry_odd">'.$row['registered'].'</td>';
        echo '</tr>';

    } else { //even rows
        echo '<tr>';
        echo '<td class="entry_even">'.$row['client_id'].'</td>';
        echo '<td class="entry_even">'.$row['fname'].' '.$row['lname'].'</td>';
        echo '<td class="entry_even">'.$row['license'].'</td>';
        echo '<td class="entry_even">'.$row['ss1'].' / '.$row['ss2'].' / '.$row['ss3'].'</td>';
        echo '<td class="entry_even">'.$row['phone1_1'].'-'.$row['phone1_2'].'-'.$row['phone1_3'];
            if ($row['phone1_ext'] != NULL ) {
                echo ' ext. '.$row['phone1_ext'].'</td>';
            } else { 
                echo '</td>';
            }
        echo '<td class="entry_even">'.$row['email'].'</td>';
        echo '<td class="entry_even">'.$row['registered'].'</td>';
        echo '</tr>';
    }

        $i++;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T02:11:42.163

谢谢你们的回答！

但我发现是什么搞砸了。这是我在查询之后和之前放置的一行`$i=1;`。这是那行：

```
$row = mysql_fetch_assoc($result); 
```

这已经从数组中获取了第一行，这就是为什么当我通过循环输入数组时，第一行 $row 已经被删除了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:04:50.623

如果没有任何 SQL，我将进行以下更改：

```
<?php

$i = 0;

while($row = mysql_fetch_assoc($result)){

    $row_class = ($i % 2) ? "entry_even" : "entry_odd";

    echo '<tr>';
    echo '<td class="' . $row_class . '">'.$row['cid']."</td>\n";
    echo '<td class="' . $row_class . '">'.$row['fname'].' '.$row['lname']."</td>\n";
    echo '<td class="' . $row_class . '">'.$row['license']."</td>\n";
    echo '<td class="' . $row_class . '">'.$row['ss1'].' / '.$row['ss2'].' / '.$row['ss3']."</td>\n";
    echo '<td class="' . $row_class . '">'.$row['phone1_1'].'-'.$row['phone1_2'].'-'.$row['phone1_3'];
        if ($row['phone1_ext'] != NULL ) {
        echo ' ext. '.$row['phone1_ext']."</td>\n";
        } else { 
        echo "</td>\n";
        }
    echo '<td class="' . $row_class . '">'.$row['email']."</td>\n";
    echo '<td class="' . $row_class . '">'.$row['registered']."</td>\n";
    echo '</tr>';

    $i++;
}

?> 
```

# assembly - AVR组装纯软件PWM不给恒定频率

> ID：12038402
> 
> 赞同：1
> 
> 时间：2012-08-20T13:15:00.947
> 
> 标签：assembly, frequency, avr, pwm

有人能发现为什么这段代码无法输出恒定脉冲吗？至少我的福禄克不能触发高脉冲，似乎它来来去去有点随机..

这是我的第一个 asm 程序，所以请记住它可能是代码中的幼稚错误

```
;INITIAL
.include "tn10def.inc"      ; Include file for Attiny10
.org $0000
     rjmp RESET             ; ISR reset vector (also start of prog)
.org $0008
     rjmp WDT               ; Watchdog reset vector 

.def t          = r16       ; temp register
.def PWM_c1     = r24       ; PWM counter register 1
.def PWM_c2     = r25       ; PWM counter register 2
.def PWM_c3     = r17       ; PWM counter register 3

RESET:
;INIT_STACK:
    ldi t, low(RAMEND)      ; init high and low bytes for stack pointer
    out spl, t
    ldi t, high(RAMEND)
    out sph, t
;INIT_SLEEP:
    ldi t, (0<<SM2)|(1<<SM1)|(0<<SM0)|(1<<SE)
    out SMCR, t             ; set power down mode at sleep command
;INIT_ISR
    sei                 ; enable global interrupts
;INIT_POWERSAVER
    ldi t, (1<<ADC1D)|(1<<ADC0D)
    out DIDR0, t            
;INIT_CLOCK
    ldi t, 0xD8             ; write signature
    out CCP, t
    ldi t, (1<<CLKPS3)|(0<<CLKPS2)|(0<<CLKPS1)|(0<<CLKPS0) 
    out CLKPSR, t           ; prescale by 256

MAIN_LOOP:
    rcall PWM_INIT
    rcall POWER_DOWN        ; WDT power down    
    rjmp MAIN_LOOP

PWM_INIT:
    ldi PWM_c3, 255         ; total number of pulses
PWM_START:
    sbi PORTB, led          ; set out high
    ldi PWM_c1, 0
    ldi PWM_c2, 0
PWM_LOOP:
    inc PWM_c1
    cpi PWM_c1, 16          ; target count (PWM high)
    breq PWM_OUT_LOW
    cpi PWM_c1, 208
    brne PWM_LOOP           ; first loop counts to 208
    inc PWM_c2
    cpi PWM_c2, 5
    brne PWM_LOOP           ; second loop counts to 5
    dec PWM_c3
    brne PWM_START          ; counts down number of pulses
    ret
PWM_OUT_LOW:
    cbi PORTB, led          
    rjmp PWM_LOOP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T15:56:05.000

好吧，处理器的运行并不是完全恒定的，即使对于像这样的简单代码也是如此。您可能想要的是使用芯片上的定时器，并在溢出中断时更改信号。板载计时器非常一致。

# asp.net - 使用 LINQ 删除和重新创建记录时“无法添加已存在的实体”

> ID：12038403
> 
> 赞同：2
> 
> 时间：2012-08-20T13:15:01.923
> 
> 标签：asp.net, linq, entity

尝试删除数据库中的记录并随后使用 LINQ 重新创建它时，出现错误：**无法添加已存在的实体。** 虽然记录被删除。

*我正在使用从方法SelectOrdersByOrderID(OrderID)*中的 LINQ 查询中获得的数据初始化我的 Sales_header 对象 。

如果 Salesheader 的 OrderID 满足某个条件，我想删除数据库中的记录（Delete(Sales_header SalesHeader)），向对象添加附加值并在数据库中插入新记录（Insert(Sales_header SalesHeader)）。

我不想更新记录，而是删除它并重新创建它。

```
Sales_header SalesHeader = new Sales_header();
SalesHeader = SalesHeaderClass.SelectOrdersByOrderID(OrderID) as Sales_header;

   if (SalesHeader.OrderID == *certain value*)
      {
       SalesHeaderClass.Delete(SalesHeader);
       SalesHeader.Orderdate = DateTime.Today;
       SalesHeader.Ordertime = DateTime.Now;
       SalesHeaderClass.Insert(SalesHeader);
      }
... 
```

SalesHeaderClass 中通过 LINQ 选择 SalesHeader 的方法

```
public static object SelectOrdersByOrderID(int OrderID)
{
    var Query = (from p in dc.Sales_headers
                 where p.OrderID.Equals(OrderID)
                 select p).SingleOrDefault();
    return Query; 
```

SalesHeaderClass 中通过 LINQ 插入 SalesHeader 的方法

```
public static void Insert(Sales_header SalesHeader)
      {
       dc.Sales_headers.InsertOnSubmit(SalesHeader);
       dc.SubmitChanges();
      } 
```

SalesHeaderClass 中的方法通过 LINQ 删除 SalesHeader

```
public static void Delete(Sales_header SalesHeader)
      {
       var DelOrder = (from p in dc.Sales_headers
                       where p.OrderID == SalesHeader.OrderID
                       select p).Single();
       dc.Sales_headers.DeleteOnSubmit(DelOrder);
       dc.SubmitChanges();
      } 
```

我必须做什么才能插入记录？创建具有相同值的新对象无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:29:23.400

除了为什么更新不适合的问题。

您需要两个上下文来首先删除记录，然后插入记录。EF 将所有插入/更新/删除操作保留在内存中，直到您执行 SubmitChanges()，因此您不能拥有两个具有相同 ID 的实体。

但是要将整个事情作为单个事务执行，您将需要一个[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)。

```
using (var scope = new TransactionScope()) {
    using (var salesHeader SalesHeader = new Sales_header()) {
        // Delete record
        ...
        salesHeader.SubmitChanges();
    }
    using (var salesHeader SalesHeader = new Sales_header()) {
        // Insert record
        ...
        salesHeader.SubmitChanges();
    }

    // Mark transaction complete
    scope.Complete();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:35:11.917

要解决此问题，请使用不同的数据上下文进行删除和插入操作。

# python - 带有图标的 wxpython 2.9 上的 AUINoteBook

> ID：12038408
> 
> 赞同：0
> 
> 时间：2012-08-20T13:15:20.947
> 
> 标签：python, wxpython

我试图确保我用 wxpython 编写的程序支持开发版本以及稳定版本，主要是因为许多外观改进没有向后移植到稳定分支。
我的程序中有一个 AUINoteBook 窗口，今天我在选项卡中添加了图标。
但是，当我在 2.9 中尝试此操作时，我收到此错误：

```
Traceback (most recent call last):
  ...
  File "...", line 91, in _NewPage
    self.noteBook.AddPage(Window, Caption, bitmap=bitmap)
  File "/home/roy/wx2.9/wxPython-src-2.9.4.0/wxPython/wx/_core.py", line 13628, in AddPage
    return _core_.BookCtrlBase_AddPage(*args, **kwargs)
TypeError: 'bitmap' is an invalid keyword argument for this function 
```

知道将图标添加到选项卡的新 API 是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:29:20.077

查看代码，它似乎正在代理 wx.Notebook 或 wx.BookCtrl 代码，所以我猜你必须使用 wx.Notebook 使用的相同 API，它使用 wx.ImageList 然后添加使用 myNotebook.SetPageImage(pageNumber, imageNumber) 将其添加到笔记本

wxPython 演示在 wx.Notebook 演示中展示了如何执行此操作。

# char - 找不到“字符”的属性设置器

> ID：12038409
> 
> 赞同：0
> 
> 时间：2012-08-20T13:15:24.343
> 
> 标签：char, delphi-prism, oxygene

我正在尝试执行以下表达式，但我一直遇到这个异常，“找不到'chars'的属性设置器。”

这是表达式：

```
xstr, str : string;
for i := 1 to length(str) do
begin
  if ((i mod 2)<>0) then
  begin
    xstr[i] := char(Ord(str[i]) xor $AA);  <<<<------ Exception Raised
  end
  else
  begin
    xstr[i] := char(Ord(str[i]) xor $55);  <<<<------ Exception Raised
  end;
end; 
```

“str”的值被传递到加密方法中。

这是加密方法的一部分。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:17:42.970

`System.String`是一个不可变的类，这意味着您不能修改它的实例。.NET 需要修改字符串操作来创建字符串的新实例。出于您的目的，创建一个`char`修改后的字符数组然后从中构造一个字符串可能是最简单和最有效的。

通常，[`System.Text.StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)该类提供一个可变字符串实例。

实际上，即使不是因为字符串的不变性，您的代码也会因为您没有*分配*字符串而失败，因此分配给`xstr[i]`会在缓冲区溢出异常中产生。使用数组时需要这样做`char`。

# jquery - jQuery.noConflict() 是否有效？在同一页面上加载多个 jquery 文件

> ID：12038410
> 
> 赞同：0
> 
> 时间：2012-08-20T13:15:31.103
> 
> 标签：jquery, html

尽管即使在 stackoverflow 上也提供了许多解决方案，但它们似乎都不起作用。我发现很多人在网上抱怨这个。如何在同一页面上加载 2 个不同的 jquery 文件？或者一些解决方法。对我来说，它只在页面上最后一次调用的那个起作用。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>
var jq162 = jQuery.noConflict();
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script>
var jq151 = jQuery.noConflict();
</script> 
```

我也试过这个：

```
<script type="text/javascript">

      (function(){

        var myBkl = {
                 jq: null,
                 loadScript: function(src) {
                        if(window.jQuery && window.jQuery.fn.jquery == '1.6.2'){
                                return;
                        }
                        var s = document.createElement('script');
                        s.setAttribute('src', src);
                        s.setAttribute('type', 'text/javascript');
                        document.getElementsByTagName('head')[0].appendChild(s); 
                },
                whenLoaded: function(callback){
                        if (typeof(window.jQuery) !== 'undefined' && window.jQuery.fn.jquery == '1.6.2') { 
                                myBkl.jq = window.jQuery.noConflict(true);
                                callback(myBkl.jq); 
                        } 
                        else {
                                setTimeout((function() {myBkl.whenLoaded(callback); }), 100);
                        } 
                },
                init: function($){
                        console.log($.fn.jquery);
                        console.log(window.jQuery.fn.jquery);
                }
        };
        myBkl.loadScript('http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js');
        myBkl.whenLoaded(myBkl.init);

})();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:21:45.507

为什么首先需要 2 个不同版本的 jQuery？

我很确定您可以使用 1.6.2 使一切工作（考虑到一些非常小的变化，例如 prop()...）

# php - PHP 关闭标题

> ID：12038411
> 
> 赞同：4
> 
> 时间：2012-08-20T13:15:33.113
> 
> 标签：php, http, header, connection, connection-close

我有一个应用程序连接到我的网络服务器并通过 XML 传输数据。我连接的标题是：

```
POST /app/API/Data/Receiver.php HTTP/1.1
User-Agent: Custom User Agent 1.0.0
Accept: text/xml
Content-Type: text/xml
Content-Length: 1580
Host: servername.com 
```

然后应用程序处理数据并返回其自己的 XML 格式回复。我在响应中设置的标题之一是：

```
header("Connection: close"); 
```

当我从我的 PC (C++) 上的一个简单应用程序发送连接并发送我的数据时，它工作正常，我正确获得了关闭标头，并且一旦数据可用，连接就会关闭。当我使用 GSM 调制解调器和嵌入式应用程序发送完全相同的数据时，连接标头返回为：

```
header("Connection: keep-alive"); 
```

GSM 调制解调器也会一直等待，直到连接关闭后再继续，并且通常只是超时。

有没有办法关闭服务器上的连接，以便 GSM 端不会超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:51:47.150

您的 GSM 服务提供商可能会透明地代理连接。尝试在非标准端口（即不是 80、8080、443）上发送数据

设置缓存控制标头私有也可能有效。

```
Cache-Control: PRIVATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:20:04.730

标头只是纯文本，但在 PHP 中发送数据后就无法发送。尝试这个：

```
echo "\r\n\r\nConnection: close";
die(); 
```

并根据您的需要进行调整

# asp.net - 如何防止覆盖 CSS

> ID：12038414
> 
> 赞同：1
> 
> 时间：2012-08-20T13:15:54.717
> 
> 标签：asp.net, webmatrix, webmatrix-2

我想要做的是能够在一个 div 中有两列。所以我可以在任意点插入图片，并将文本整齐地放在长边。

这是我的html：

```
<div id="content">
<div id="gallery">
    <h1>Gallery</h1>
    <div id="container">
        <div id="imageleft">
            <img src="images/pic1.jpg" width="150px" alt="Image" />
        </div>
        <div id="imageright">
            test
        </div>
    </div>
    <img src="images/pic2.jpg" width="150px" alt="Image" />
    <img src="images/pic3.jpg" width="150px" alt="Image" />
    <img src="images/pic4.jpg" width="150px" alt="Image" />
</div>
</div> 
```

这是一个完美的工作JSFiddle

[http://jsfiddle.net/RdyGM/1/](http://jsfiddle.net/RdyGM/1/)

这是我实际看到的图像。紫色位应该是左边的 50%。（文本“测试”放在下面）。

经过检查，您可以看到它正在从其他地方获取其宽度：@

如何只使用我想要的 CSS。

![在此处输入图像描述](../Images/ff417a145ad52d9819cd6b3ad34fea45.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:20:32.260

嗯，你可以做两件事。一般的方法是尝试使您的 CSS 选择器更具体。所以你可以这样做：#gallery #content #imageleft，而*不仅仅是*#imageleft，这应该使你的规则适用。另一种方法是将您的 CSS #imageleft 更改为：

```
#imageleft{
   ....
   width:50% !important;
   ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:21:53.633

您可以使用 !important 告诉浏览器优先考虑哪个 CSS - 它可能有帮助，也可能没有帮助......

```
#imageleft {
    float:left;
    width:50% !important;
    background:#c9c;
}

#imageright {
    float:right;
    width:50%  !important;
    background:#9c9;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:24:25.227

```
domId.Attributes.Add("property of css", "Your css class name"); 
```

# extjs - 使用 Ext JS 按钮显示键盘快捷键

> ID：12038416
> 
> 赞同：0
> 
> 时间：2012-08-20T13:16:12.337
> 
> 标签：extjs, buttongroup, keyboard-shortcuts

我有一个带有几个按钮的按钮组，每个按钮都有一个与之关联的键盘快捷键。

我怎样才能在按钮上同时指示键盘快捷键以及按钮文本？虽然其他选项（如工具提示）可用，但我希望它能够工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:09:59.777

您必须扩展按钮并更改 renderTpl，以便您可以将快捷方式 txt 添加到其中并使其正确浮动。我通过以下方式为 menuItem 完成了此操作：

```
Ext.define('Ext.ux.menu.ShortcutItem', {
    extend: 'Ext.menu.Item',
    alias: 'widget.shortcutitem',
    shortcutText: '', 
    renderTpl: [
        '<tpl if="plain">',
            '{text}',
        '<tpl else>',
            '<a id="{id}-itemEl" class="' + Ext.baseCSSPrefix + 'menu-item-link" href="{href}" <tpl if="hrefTarget">target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on">',
                '<img id="{id}-iconEl" src="{icon}" class="' + Ext.baseCSSPrefix + 'menu-item-icon {iconCls}" />',
                '<span id="{id}-textEl" class="' + Ext.baseCSSPrefix + 'menu-item-text" <tpl if="arrowCls">style="margin-right: 17px;"</tpl> >{text}</span>',
                '<span class="' + Ext.baseCSSPrefix + 'menu-item-text shortcutitem-shrtTxt">{shortcutText}</span>', 
                '<img id="{id}-arrowEl" src="{blank}" class="{arrowCls}" />',
            '</a>',
        '</tpl>'
    ],
    beforeRender: function (ct, pos) {
        var me = this;
        Ext.applyIf(me.renderData, {
            shortcutText: me.shortcutText
        });
        me.callParent(arguments);
    }
}); 
```

和CSS：

```
/* Shortcut menu item */
.shortcutitem-shrtTxt
{
    position: absolute;
    right: 3px;
    top: 7px;
} 
```

# java - JSF 会话范围

> ID：12038417
> 
> 赞同：1
> 
> 时间：2012-08-20T13:16:13.107
> 
> 标签：java, ajax, jsf, richfaces

所以我发现了这个问题，这真的很奇怪..

所以我有这个 xhtml 页面：

```
<h:form>
        <rich:dataTable value="#{carsBean.myList}" var="car">
            <rich:column>
                <f:facet name="header">
                    <h:outputText value="Name" />
                </f:facet>
                <h:inputText value="#{car.name}">
                    <p:ajax event="keyup" listener="#{carsBean.print}" />
                </h:inputText>
            </rich:column>
            <rich:column>
                <f:facet name="header">
                    <h:outputText value="Company" />
                </f:facet>
                <h:inputText value="#{car.company}">
                    <p:ajax event="keyup" listener="#{carsBean.print}" />
                </h:inputText>
            </rich:column>
            <rich:column>
                <f:facet name="header">
                    <h:outputText value="Address" />
                </f:facet>
                <h:inputText value="#{car.address}">
                    <p:ajax event="keyup" listener="#{carsBean.print}" />
                </h:inputText>
            </rich:column>
        </rich:dataTable>
        <h:commandButton value="save-empty">

        </h:commandButton>
    </h:form> 
```

以下是托管bean：

```
@ManagedBean(name="carsBean")
@SessionScoped
public class CarsBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -7818770780064447805L;
    private List<Car> myList;
    private String test;

    public CarsBean(){}

    public void print(){
        System.out.println("I got hit!");
    }

    /**
     * @return the myList
     */
    @PostConstruct
    void initialiseSession() {
        FacesContext fc = FacesContext.getCurrentInstance();
        fc.getExternalContext().getSession(true);
        if(myList==null){
            myList = new ArrayList<Car>();
        };
        if(myList.isEmpty()){
            for(int a=0;a<10;a++){
                myList.add(new Car("test","test","test"));
            }
        }
    }

    public List<Car> getMyList() {
        return myList;
    }

    /**
     * @param myList the myList to set
     */
    public void setMyList(List<Car> myList) {
        this.myList = myList;
    }

    public String getTest() {
        return test;
    }

    public void setTest(String test) {
        this.test = test;
    }

    public static class Car{
        private String name;
        private String company;
        private String address;

        public Car(){}

        public Car(String name, String company, String address) {
            super();
            this.name = name;
            this.company = company;
            this.address = address;
        }

        /**
         * @return the name
         */
        public String getName() {
            return name;
        }
        /**
         * @param name the name to set
         */
        public void setName(String name) {
            this.name = name;
        }
        /**
         * @return the company
         */
        public String getCompany() {
            return company;
        }
        /**
         * @param company the company to set
         */
        public void setCompany(String company) {
            this.company = company;
        }
        /**
         * @return the address
         */
        public String getAddress() {
            return address;
        }
        /**
         * @param address the address to set
         */
        public void setAddress(String address) {
            this.address = address;
        }
    }
} 
```

现在的目标是将用户输入保存在 sessionscope 中，这样即使用户关闭选项卡或发出新请求，数据也会被保留。

上面的代码有效，但我注意到，当我删除输入框上的 ajax 事件时，它就消失了。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:29:04.727

ajax 事件导致您的更改被发送到服务器，并保留在会话中。如果你没有它们，你将需要别的东西来做。Clasically，你会做一个普通的帖子（你表单上的任何提交按钮都可以，真的）。但是您的用户必须单击该按钮才能显式保存他们的更改。

如果您的目标确实是您的用户可以玩，关闭他们的选项卡，当他们回来时一切都和他们离开时一样，那么无论如何您都需要 ajax 事件。

# text-to-speech - 将节日 tts 转换为 flite tts

> ID：12038419
> 
> 赞同：2
> 
> 时间：2012-08-20T13:16:17.200
> 
> 标签：text-to-speech, speech-synthesis, festival, flite

我目前有一个 tts，它是使用festival 和 festvox 构建的。我需要转换这些声音并在 flite 中构建一个 TTS。显然，您可以使用 festvox 进行转换（festvox 和 flite 网站都这么说，但没有正确的操作步骤）。有人可以帮我解决这个问题，因为我是这个地区的新手吗？提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:03:14.457

以防万一其他人也有同样的疑问，我发现[本文档](http://www.speech.cs.cmu.edu/flite/doc/flite_8.html)中提到的步骤很有用，并且还订阅了邮件列表并随时提出问题。

虽然我必须提到我从未使用“flite”实现 TTS。我继续说“espeak”

# asp.net - Asp.net 中的 Jqgrid 不是 MVC

> ID：12038421
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:16:19.700
> 
> 标签：asp.net, sql-server, jqgrid, jqgrid-asp.net

我是 asp.net 中 jqgrid 的新手。我不知道如何将 sqlserver 2005 表与 jqgrid 连接起来。我在 google 中搜索。但我无法获得这样做的材料。有人知道该网站或参考吗？谢谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:54:36.920

您可以在[Demo Page](http://www.trirand.net/demo.aspx)部分下开始使用`Demos for ASP.NET WebForms 3.5+`。

另请参阅[jqGrid for ASP.NET 文档](http://www.trirand.net/documentation/aspnet/index.htm)。

# php - 使用 PDO MYSQL 返回单个值

> ID：12038423
> 
> 赞同：1
> 
> 时间：2012-08-20T13:16:23.750
> 
> 标签：php, mysql, pdo

我正在过渡到 PDO，简单地说，我想从表中返回一个值（而且我觉得没有正确处理它真的很愚蠢）。我没有收到任何错误，但也没有值，应该有:)

```
 try {
        $sql = "SELECT `column_name` FROM `table` ORDER BY `id` DESC LIMIT 1";
        $query = $this->handler->query($sql);
        $result = $query->fetchColumn();
        print_r($result);
    } 
    catch(PDOException $e) {
        return false;
    }
    return true; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:34:04.853

打印错误信息：

```
catch(PDOException $e) {
    print_r($e->getMessage());
    return false;
} 
```

如图所示，如果您已正确连接到数据库，这将起作用。检查您的对象是否成功连接到数据库，并且您的列名和表名是否正确。

我的一个数据库类的片段：

```
/**********************************************************************
*  Try to connect to mySQL database
*/
public function connect($dbuser, $dbpassword, $dbhost ,$dbname)
{
    try {
        $this->dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpassword);
        $this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        return true;
    } catch (PDOException $e) {
        $this->setError($e->getMessage());
    }
} 
```

# ios - [[UIDevice currentDevice] systemName] 的可能值；

> ID：12038425
> 
> 赞同：8
> 
> 时间：2012-08-20T13:16:46.020
> 
> 标签：ios

的可能值是`[[UIDevice currentDevice] systemName];`多少？在 Apple 的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)中，它没有给出任何可能导致结果的示例，但我能从中得到的只是`iPhone OS`，即使在模拟器上也是如此。还有其他可能性吗，如果没有，为什么这个属性甚至存在？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T13:23:15.120

正如文档所说，这是操作系统的名称。`systemName`iOS 最初被称为“iPhone OS”（在 iPad 之前），但我认为出于兼容性原因他们没有改变。

将来，他们可以`[UIDevice systemName]`在 (Mac) OS X 上实现，并且在该平台上它可能会返回`Mac OS X`或`OS X`.

这种方法目前的使用非常有限，但你永远不知道苹果或其他人将来会生产什么（（部分）兼容的）操作系统......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-10T12:43:43.093

对于 iPhone，Apple 返回的 Operating System 的值为“iPhone OS”。在某些版本的 iOS 9 和在 Xcode 8 之后发布的运行 iOS 10 的应用程序中，Apple 已将“iPhone OS”的值替换为“iOS.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-15T11:50:17.957

在 ios 版本 15 更新后 ipad os 已将“iOS”的值替换为“iPadOS”

# c# - 滑块随着滑动手势不断变化

> ID：12038427
> 
> 赞同：0
> 
> 时间：2012-08-20T13:17:04.157
> 
> 标签：c#, silverlight, windows-phone-7, slider

我有一个带有`Minimum=20`和`Maximum=100`、`SmallChange=1`和的滑块控件`LargeChange=10`。当用户滑动滑块时，它会滑动一段距离，然后停止，即它不会用用户的手指连续滑动。我希望它滑动直到用户移开手指。我犯了什么错误？这是我的滑块的 xaml

```
 <Slider x:Name="slider"
            Margin="0,12,-4,94"
            Orientation="Vertical"
            Maximum="100"
            Minimum="20"
            SmallChange="30"
            LargeChange="10"
            Value="26"
            HorizontalAlignment="Right"
            Width="74"
            ValueChanged="Slider_ValueChanged"
            MaxHeight="710" /> 
```

更新：我没有在 Slider_ValueChanged 方法中做任何重要的事情，不管怎样，它就是

```
 try
        {
            if (recentIndex == -1)
                textBox1.FontSize = slider.Value;
            else
            {
                lstTextBox[recentIndex].FontSize = slider.Value;
            }
        }
        catch (Exception ex)
        { } 
```

在这种情况下它并不重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:50:22.693

您是否碰巧使用了手势服务/检测（如下所示）？

```
<Toolkit:GestureService.GestureListener>
    <Toolkit:GestureListener GestureCompleted="GestureListener_Tap"/>
</Toolkit:GestureService.GestureListener> 
```

它们确实以某种方式干扰了滑块的（平滑）滚动功能。如果是这样，您应该尝试通过将手势检测替换为`ManipulationStarted, ManipulationDelta or ManipulationCompleted`事件实例来解决它。

[不会弄乱滑块的手势选项...](http://msdn.microsoft.com/en-us/library/ff967546%28v=VS.92%29.aspx)

# .net - regsvcs.exe 是否有诊断输出？

> ID：12038428
> 
> 赞同：2
> 
> 时间：2012-08-20T13:17:11.907
> 
> 标签：.net, com, com+

regsvcs.exe 能否以某种诊断输出的方式使用？一个电话不起作用，我不明白为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:32:12.423

您应该在事件查看器中看到一些错误日志，但我记得它们也不是很具有描述性。[激活 Fuslog](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.90%29.aspx)可以帮助您跟踪可能的程序集绑定问题。

# asp.net - 当 ASP.NET MVC 3 Accounts Scaffolding 调用 Membership.Createuser 时会发生什么？

> ID：12038435
> 
> 赞同：0
> 
> 时间：2012-08-20T13:18:06.347
> 
> 标签：asp.net, asp.net-mvc-3

我是一个 asp mvc 3 菜鸟，试图修改用户帐户脚手架以保存更多信息。当用户创建帐户时，我想添加其他信息，例如他们的全名和开始日期——而不仅仅是他们的用户名/密码。我将把这些添加的信息存储在数据库的雇员表中。

我在 AccountController 中看到了在用户输入表单后创建帐户的代码行。

```
Membership.CreateUser(model.UserName, model.Password, model.Email, Nothing, Nothing, True, Nothing, createStatus) 
```

这条线似乎调用了 SQL Server 中的存储过程。似乎最有可能的存储过程是 aspnet_Membership_CreateUser。但是这个存储过程有13个参数，上面的代码传递了8个参数。

1.  上面显示的 VB 代码调用了什么存储过程（membership.createuser...）？
2.  为什么 aspnet_Membership_CreateUser 和 Membership.CreateUser 的参数数量不一样？
3.  如何修改创建用户代码/存储过程以根据注册表中的信息将员工信息添加到 EmployeeTable 中，然后在用户帐户和员工记录之间添加链接？一般来说，这个想法是将员工信息作为附加参数添加到存储过程中，然后让存储过程执行插入/添加 id，但我到底在哪里做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:26:05.820

我无法回答您的其他问题，但这是我使用扩展用户注册以包含更多日期的代码（使用配置文件表，而不是配置文件提供者）：

```
'
' POST: /Account/Register

<HttpPost()> _
Public Function Register(ByVal model As RegisterModel) As ActionResult
    If ModelState.IsValid Then
        ' Attempt to register the user
        Dim createStatus As MembershipCreateStatus
        Dim MembershipUser = Membership.CreateUser(model.UserName, model.Password, model.Email, Nothing, Nothing, True, Nothing, createStatus)

        If createStatus = MembershipCreateStatus.Success Then

            Dim providerKeyObject = MembershipUser.ProviderUserKey
            Dim providerKeyGuid = MembershipUser.ProviderUserKey

            ' update profile entity
            Dim db As UserProfileDbContext = New UserProfileDbContext
            Dim profile As New UserProfile
            profile.UserId = providerKeyGuid
            profile.IsCompanyOwner = True
            profile.CompanyId = model.Company
            profile.BlogId = model.Blog
            profile.IsCompanyOwner = model.IsCompanyOwner
            profile.IsBlogOwner = model.IsBlogOwner

            db.UserProfiles.Add(profile)
            db.SaveChanges()

            FormsAuthentication.SetAuthCookie(model.UserName, False)

            ' send email
            ' TODO: fix error on send
            Call New EmailController().VerificationEmail(model).Deliver()

            Return RedirectToAction("Index", "Home")

        Else

            ModelState.AddModelError("", ErrorCodeToString(createStatus))

        End If
    End If

    ' If we got this far, something failed, redisplay form
    Return View(model)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:47:40.523

1.  代码将运行`aspnet_Membership_CreateUser`存储过程

2.  被`Membership.CreateUser`重载，并将为不会提供的参数设置默认值。例如，如果您只使用用户名和密码调用 CreateUser，则所有其他参数都将默认为默认值，例如 IsApproved 将为 true。>>在 CreateUser 中输入时，您应该会看到重载选项。[您可以使用Just Decompile](http://www.telerik.com/justdecompile.aspx)之类的工具查看“C:\Windows\Microsoft.NET\Framework\v4.0.30319\system.web.dll”中的代码

3.  有不同的方式来存储额外的数据。[看看这个](http://www.asp.net/web-forms/tutorials/security/membership/storing-additional-user-information-cs)。我更喜欢通过 UserId/Email 地址链接表，并且在创建用户时，我调用 CreateUser，如果成功，则保存附加数据（这是该教程中描述的方法的轻微变化）。您还可以修改/扩展整个会员提供程序，请参阅[此链接（实施会员提供程序）](http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx)或[此视频教程](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

# ios - Adobe AIR for IOS 中的本机扩展代码是否在单独的 CPU 线程中运行？

> ID：12038436
> 
> 赞同：1
> 
> 时间：2012-08-20T13:18:09.030
> 
> 标签：ios, air, air-native-extension

我正在使用 Flex 4.6 和 AIR 3.3 构建一个 IOS 应用程序。我确实有一些 Objective-C 库，我们将使用它们来处理音频、图像和视频以创建新的“视频”文件。

由于我们正在通过本机扩展在设备上进行所有这些处理，我想知道用户是否会看到应用程序锁定直到处理完成。换句话说，我是否需要向他们显示一个进度条，并且在完成之前不允许他们在应用程序中执行任何其他操作，或者本机扩展代码是否在单独的线程中运行？

第二个问题是......如果 Native Code 不在单独的线程中运行，是否可以使用新的 Actionscript Workers 将处理卸载到单独的线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:53:40.607

您的 ANE 可以调用新线程，因此您的应用程序不应锁定。

这是开发原生扩展的一个很好的参考：http: [//help.adobe.com/en_US/air/extensions/air_extensions.pdf](http://help.adobe.com/en_US/air/extensions/air_extensions.pdf)

引用相关部分：“本机 C 代码可以将异步事件分派回扩展的 ActionScript 端。例如，扩展方法可以启动另一个线程来执行某些任务。当另一个线程中的任务完成时，该线程调用 FREDispatchStatusEventAsync() 来通知扩展的 ActionScript 端。事件的目标是 ActionScript ExtensionContext 实例。

关于工作线程，是的，这正是工作线程的用途，从我从 AS3 实现中读到的内容来看，它会像那样工作。但是，我最好的选择是，对于此类任务，使用 ANE 会比使用 AS3 更快。如果您准备好运行库，我会使用 ANE，并且可能会在发布后尝试工作线程，如果您主要在 AS3 中进行开发，可能会更容易维护。

# azure - 启用 Windows Azure 订阅

> ID：12038437
> 
> 赞同：6
> 
> 时间：2012-08-20T13:18:11.470
> 
> 标签：azure

我的 windows azure 订阅已被取消。我想更新我的信用卡详细信息并启用它。所以请提供步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:23:21.853

一旦您的帐户被取消，恢复它的唯一方法是转到[http://commerce.microsoft.com](http://commerce.microsoft.com)登录，确保从右上角您的姓名附近的下拉列表中选择订阅（检查是否它是正确的，选择订阅并且应该有被取消的订阅）一旦你在正确的订阅下，去支付选项并添加或更改你的信用卡......然后将更新服务并恢复服务......完成此操作并且一切正常后，您可以转到 azure 的帐户门户并从那里管理付款选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T19:16:38.803

请按照以下链接与 Windows Azure Commerce Team 创建一个事件，他们将提供必要的帮助来启用您的订阅并开始工作：

[https://support.microsoft.com/oas/default.aspx?prid=14234&st=1&wfxredirect=1&sd=gn&ln=en-us](https://support.microsoft.com/oas/default.aspx?prid=14234&st=1&wfxredirect=1&sd=gn&ln=en-us)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:25:01.433

转到[Windows Azure 帐户订阅](https://account.windowsazure.com/Subscriptions)页面并更改所选订阅的付款方式。

# android - Android 从键盘读取

> ID：12038440
> 
> 赞同：2
> 
> 时间：2012-08-20T13:18:18.097
> 
> 标签：android, keyboard, listener, rfid

我有这个登录屏幕，根本没有文本字段。当用户使用 rfid 扫描仪扫描他的 id 令牌时，我会得到一个 8 字符长的字符串。它与使用键盘的原理相同（只是更快）。我希望我的登录活动在用户扫描他的令牌时而不是之前采取行动。有没有一种聪明的方法来实现这一点？我没有任何按钮或文本字段，所以我必须在不听 EditText 字段的情况下阅读键盘输入。

因此，一个带有图像（锁）的空屏幕，它监听 rfid 阅读器（或键盘）并在字符数为 8 时采取行动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T09:49:29.413

如果您`onKeyDown()`在您的实现`Activity`并且没有其他处理按键事件的 UI 小部件，您应该从键盘上获取每个按键。下面的示例应该至少适用于 AZ，并且旨在简单地将按键“打印”到`TextView`.

如果这还不够，您可能需要添加更复杂的方法将键码映射到字符。（例如空间不起作用，数字可能两者都没有）

```
public class KeyActivity extends Activity {
    // should work for a-z
    private static final Pattern KEYCODE_PATTERN = Pattern.compile("KEYCODE_(\\w)");

    private TextView mTextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // there is just a TextView, nothing that handle keys
        mTextView = (TextView) findViewById(R.id.textView1);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        String key = KeyEvent.keyCodeToString(keyCode);
        // key will be something like "KEYCODE_A" - extract the "A"

        // use pattern to convert int keycode to some character
        Matcher matcher = KEYCODE_PATTERN.matcher(key);
        if (matcher.matches()) {
            // append character to textview
            mTextView.append(matcher.group(1));
        }
        // let the default implementation handle the event
        return super.onKeyDown(keyCode, event);
    }
} 
```

# java - 在 NetBeans 平台应用程序中将自定义初始屏幕带入自定义关于框

> ID：12038442
> 
> 赞同：0
> 
> 时间：2012-08-20T13:18:20.817
> 
> 标签：java, netbeans-platform

我正在尝试创建一个 NetBeans 平台应用程序。我创建了自己的启动画面。初始屏幕出现在默认的关于框中。

但是当我自定义 about 框时，会出现 NetBeans 的默认启动画面。

这是我的splash img 的位置。 **品牌/核心/core.jar/org/netbeans/core/startup/splash.gif**

这就是我尝试访问它并失败的方式。

```
getClass().getResource("/org/netbeans/core/startup/splash.gif") 
```

有人可以帮我在自定义关于框中获取我的初始图像吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:04:26.910

是的，这很容易。只需右键单击项目 - 应用程序 -> 品牌 -> 启动屏幕 -> 浏览。..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:48:56.307

我很抱歉造成误解。

所以也很容易。

1）你修改应用程序/重要文件/项目属性添加这一行：

#用于运行

`run.args=-J-Dnetbeans.mainclass=splah.CustomStartup --nosplash`

#for 从 IDE 运行

`run.args.extra=-J-Dnetbeans.mainclass=splah.CustomStartup --nosplash`

2）创建项目JavaApplication splah和类CustomStartup，然后构建jar并将其从dist复制到App/

```
package splah;

import java.awt.Dimension;
import java.awt.Toolkit;
import java.lang.reflect.Method;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JWindow;

public class CustomStartup {

private static final String NB_MAIN_CLASS = "org.netbeans.core.startup.Main";
private static final int width = 500, height = 400;

public static void main(String[] args) throws Exception {
    // do whatever you need here (e.g. show a custom login form)
    System.out.println("Hello world! I am a custom startup class");

    JDialog splash = new JDialog();
    splash.setUndecorated(true);
    //
    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
    splash.setBounds(width, height, (screenSize.width-width)/2, (screenSize.height-height)/2);
    splash.setVisible(true);

    // once you're done with that, hand control back to NetBeans
    ClassLoader classloader = Thread.currentThread().getContextClassLoader();
    Class<?> mainClass = Class.forName(NB_MAIN_CLASS, true, classloader);

    Object mainObject = mainClass.newInstance();
    Method mainMethod = mainClass.getDeclaredMethod("main", new Class[]{String[].class});
    mainMethod.invoke(mainObject, (Object) args);

    splash.setVisible(false);
   }
} 
```

这门课不是我想出来的，我在某个地方找到的，但我不记得在哪里。

吉尔卡

# java - 如何拉伸 Spinner 的图像？

> ID：12038445
> 
> 赞同：0
> 
> 时间：2012-08-20T13:18:47.087
> 
> 标签：java, android, spinner

我有一个 Spinner，里面只有图像。
我可以在整个微调器上拉伸图像吗？

![在此处输入图像描述](../Images/90afd46d371c358b8a6595e997334384.png)

行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal">
  <ImageView
    android:id="@+id/country_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/image"/>
</LinearLayout> 
```

自定义适配器

```
public View getCustomView(int position, View convertView,ViewGroup parent) 
{   
    LayoutInflater inflater = (LayoutInflater) m_Contex.getSystemService(Context.LAYOUT_INFLATER_SERVICE);      
    View row = inflater.inflate(R.layout.row, parent, false);
    ImageView icon = (ImageView) row.findViewById(R.id.country_icon);
    icon.setImageResource(m_CountryImages.get(position));
    return row;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:22:43.527

如果你使用

```
android:scaleType="fitXY" 
```

您的图像将延伸到整个显示区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:22:48.397

试试这个：

```
<ImageView
    android:id="@+id/country_icon"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/image"/> 
```

如果它的 API 7 或更低版本使用 fill_parent 而不是 match_parent。还要确保图标在其内部适当拉伸，并且没有不必要的透明背景使图标比您实际需要的大

# python - 如何检查 zip 文件是否使用 python 的标准库 zipfile 加密？

> ID：12038446
> 
> 赞同：11
> 
> 时间：2012-08-20T13:18:47.443
> 
> 标签：python, zip, python-2.7, zipfile, encryption

我正在使用 python 的标准库 zipfile 来测试存档：

```
zf = zipfile.ZipFile(archive_name)
if zf.testzip()==None: checksum_OK=True 
```

我得到了这个运行时异常：

```
File "./packaging.py", line 36, in test_wgt
    if zf.testzip()==None: checksum_OK=True
  File "/usr/lib/python2.7/zipfile.py", line 844, in testzip
    f = self.open(zinfo.filename, "r")
  File "/usr/lib/python2.7/zipfile.py", line 915, in open
    "password required for extraction" % name
RuntimeError: File xxxxx/xxxxxxxx.xxx is encrypted, password required for extraction 
```

在运行 testzip() 之前，如何测试 zip 是否已加密？我没有发现可以让这项工作更简单的异常捕获。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T13:36:18.563

快速浏览一下[zipfile.py 库代码](http://hg.python.org/cpython/file/2.7/Lib/zipfile.py)，您可以检查 ZipInfo 类的 flag_bits 属性来查看文件是否已加密，如下所示：

```
zf = zipfile.ZipFile(archive_name)
for zinfo in zf.infolist():
    is_encrypted = zinfo.flag_bits & 0x1 
    if is_encrypted:
        print '%s is encrypted!' % zinfo.filename 
```

检查是否设置了 0x1 位是 zipfile.py 源如何查看文件是否已加密（可以更好地记录！）您可以做的一件事是从 testzip() 捕获 RuntimeError 然后循环遍历 infolist() 和查看 zip 中是否有加密文件。

你也可以这样做：

```
try:
    zf.testzip()
except RuntimeError as e:
    if 'encrypted' in str(e):
        print 'Golly, this zip has encrypted files! Try again with a password!'
    else:
        # RuntimeError for other reasons.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:29:27.567

如果你想捕获一个异常，你可以这样写：

```
zf = zipfile.ZipFile(archive_name)
try:
    if zf.testzip() == None:
        checksum_OK = True
except RuntimeError:
    pass 
```

# ruby-on-rails-3 - 如何跨 has_many / through 关系调用范围

> ID：12038449
> 
> 赞同：0
> 
> 时间：2012-08-20T13:19:00.597
> 
> 标签：ruby-on-rails-3, activerecord

我有以下（在 RoR 3.1 和 MySQL 5.1 上）：

```
 class Menu < ActiveRecord::Base
    has_many :menu_headers
    has_many :menu_items, :through => :menu_headers
    belongs_to :location      
  end

  class MenuHeader < ActiveRecord::Base
      acts_as_tree :parent_id
      has_many :menu_items
      belongs_to :menu
  end

  class MenuItem < ActiveRecord::Base
    scope :is_enabled, where(:is_enabled => true)
    belongs_to :menu_header
  end 
```

我希望能够调用整个关系的范围；像这样的东西：

```
 # call the scope :is_enabled here
  Menu.find(12).(where menu_items.is_enabled) 
```

但不知道该怎么做。

我想要以下行为：

```
 Menu.find(12) 
```

继续拉菜单项，其中 is_enabled=false

关于如何做到这一点的任何想法？

谢谢

**编辑#1** 添加了 act_as_tree 和 location 关联，因为这些也需要正常工作。

像这样[的 Scope with join on :has_many :through 关联](https://stackoverflow.com/questions/5856838/scope-with-join-on-has-many-through-association)可能会起作用，但看起来有点难看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:36:40.353

这应该可以解决问题：

```
Menu.find(12).menu_items.is_enabled 
```

它将返回与 ID 为 12 的菜单关联的所有启用的菜单项。

# asp.net - 如何使用中继器实现搜索功能？

> ID：12038450
> 
> 赞同：0
> 
> 时间：2012-08-20T13:19:06.527
> 
> 标签：asp.net, webforms

我有一个这样的 aspx 页面：

```
<asp:TextBox ID="SearchInput" AutoPostBack="true" runat="server" />
<asp:Repeater ID="SelectUserListItemRepeater" runat="server">
    <ItemTemplate>
        <div><%# DataBinder.Eval(Container.DataItem, "Title")%></div>
    </ItemTemplate>
</asp:Repeater> 
```

和后面这样的代码。

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Test : UserControl
{
    private IList<TestItem> items;

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        items = new List<TestItem>();
        items.Add(new TestItem { Title="Lars"});
        items.Add(new TestItem { Title = "Johan" });
        items.Add(new TestItem { Title = "Bob" });
        SelectUserListItemRepeater.DataSource = items;
        SelectUserListItemRepeater.DataBind();

        SearchInput.TextChanged += new EventHandler(SearchInput_TextChanged);
    }

    void SearchInput_TextChanged(object sender, EventArgs e)
    {
        var input = sender as TextBox;
        var searchResult = items.Where(i => i.Title.Contains(input.Text));
        /* Here I would like to show this search result in the Repeater, 
         * but what is the best way to do it?
         */ 
    }
}

public class TestItem {
    public string Title { get; set; }
} 
```

在这种情况下实现搜索功能的最佳方法是什么？我有一个搜索文本输入和一个在 DIV 元素中呈现字符串列表的转发器。当用户在输入中写入一些搜索键时，中继器应该只显示那些包含搜索键的字符串？如何隐藏其他不包含搜索键的 RepeaterItems？或者我应该如何删除那些RepeaterItems？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:29:51.820

尝试这个：

```
 void SearchInput_TextChanged(object sender, EventArgs e)
    {
        var input = sender as TextBox;
        var searchResult = items.Where(i => i.Title.Contains(input.Text));
        SelectUserListItemRepeater.DataSource = searchResult;
        SelectUserListItemRepeater.DataBind();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:34:33.277

尝试这个

```
private static List<TestItem> items = new List<TestItem>();

protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    items = new List<TestItem>();
    items.Add(new TestItem { Title="Lars"});
    items.Add(new TestItem { Title = "Johan" });
    items.Add(new TestItem { Title = "Bob" });

    SearchInput.TextChanged += new EventHandler(SearchInput_TextChanged);

    // bind repeater.
    BindRepeater();

}

protected void SearchInput_TextChanged(object sender, EventArgs e)
{
    var input = sender as TextBox;
    items = items.Where(i => i.Title.Contains(input.Text)).ToList();
    BindRepeater();
}

private void BindRepeater()
{
    SelectUserListItemRepeater.DataSource = items;
    SelectUserListItemRepeater.DataBind();
} 
```

# jquery - jQuery .val() 在复杂 id 处返回未定义

> ID：12038452
> 
> 赞同：4
> 
> 时间：2012-08-20T13:19:09.653
> 
> 标签：jquery, undefined

我有两个隐藏的输入字段：

```
<input type="hidden" name="institut" id="institut" value="blablub" />
<input type="hidden" name="institut[0]" id="institut[0]" value="moreblablub" /> 
```

我有这个调试代码：

```
console.log("#institut: " + $("#institut").val());
console.log("#institut[0]: " + $("#institut[0]").val()); 
```

我得到这个控制台输出：

```
#institut: blablub
#institut[0]: undefined 
```

我尝试用反斜杠转义方括号，但这并没有改变任何东西。有没有办法获取复杂的 ID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T13:22:14.637

您**不**应该使用非字母数字字符作为 id。

但如果你这样做，你可以这样做：

```
var element = document.getElementById("institut[0]");
var $element = $(element); 
```

演示：http: [//jsfiddle.net/maniator/sWnJN/](http://jsfiddle.net/maniator/sWnJN/)

或者

```
var $element = $("#institut\\[0\\]"); 
```

演示：http: [//jsfiddle.net/maniator/sWnJN/1/](http://jsfiddle.net/maniator/sWnJN/1/)

甚至：

```
var $element = $("[id='institut[0]']"); 
```

演示：http: [//jsfiddle.net/maniator/sWnJN/2/](http://jsfiddle.net/maniator/sWnJN/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:21:57.457

您必须转义括号：

```
$( '#institut\\[0\\]' ).val() 
```

**现场演示：http:** [//jsfiddle.net/Qsagn/](http://jsfiddle.net/Qsagn/)

括号是 CSS 中的特殊字符——它们定义了属性选择器。您需要对括号进行双重转义。单个转义`\[`是不够的，因为该`\`字符是字符串文字中的特殊字符，因此您需要`\\`对字符进行转义`\`，以便将其解释为文字字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:21:13.917

您可以随时使用`document.getElementsByName("institut[0]")[0].value`.

# google-maps - 当 &language=nl 用于调用 API 时，Google Maps API 地理编码服务不起作用

> ID：12038453
> 
> 赞同：0
> 
> 时间：2012-08-20T13:19:10.253
> 
> 标签：google-maps, autocomplete, geocoding

我正在开发一个项目，其中用户键入一个位置并查询 Google 地图以使用以下方式获取地理编码结果

```
'http://maps.google.com/maps/geo?output=xml&q=' . $address 
```

它是使用处理的

```
$xml = simplexml_load_file($file); 
```

稍后，结果由

```
 if ($xml->Response->Status->code == GOOGLE_GEOCODING_API_XML_SUCCESS_RESPONSE_CODE)
    {
        $coordinates = explode(",", $xml->Response->Placemark->Point->coordinates);

        if ($coordinates)
        {
            return array(
            $coordinates[0],
            $coordinates[1]
            );
        }
    }
    else
    {
        return NULL;
    } 
```

然后，用户从下拉列表中选择一个结果，并自动填写一些字段，如地址、州、邮政编码。

如果没有传递语言参数，则代码可以正常工作。我们的客户希望地图使用特定语言，但设置会导致自动完成功能停止。

我试过了：

1.  将返回结果的语言、国家/地区代码偏差更改为所需的语言和国家/地区
2.  放置`alert()`在 JavaScript 代码的各个步骤表明，使用 &language 参数集，不会从 http 地理编码请求返回任何结果。
3.  对 http 地理编码请求使用 Google Maps API 版本 3。

请指导如何进行并解决此问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:55:41.773

错误的 URL。试试这些：

**JSON**： [http ://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Amsterdam&language=nl](http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Amsterdam&language=nl)

**XML**： [http ://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=Amsterdam&language=nl](http://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=Amsterdam&language=nl)

[**文档在这里**](https://developers.google.com/maps/documentation/geocoding/)

# php - 单击按钮时通过运行 php 脚本刷新表格内容

> ID：12038456
> 
> 赞同：2
> 
> 时间：2012-08-20T13:19:32.853
> 
> 标签：php, soap

我有以下 php 并希望知道如何在单击提交按钮时使用新的输入值重新运行脚本的底部。

我觉得我的脚本只需要最后润色，但是当您认为另一种方法更可取时，请不要不提建议。

我确实知道如何将 javascript 分配给按钮，但在这里我希望只重新运行底部代码（创建soap客户端，调用soap Web服务并将xslt应用于生成的XML）并希望在php中拥有它（主要是因为我不'不知道 ECMA 脚本中的等价物，但也因为脚本负责将结果表放在我希望拥有它的地方）。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title>Get element details</title>
    <style type="text/css">
        @import url("Swift.css");
    </style>
</head>
<body>
    <br/>
<?php # httpCallExample2.php

    echo '<form action="httpCallExample2.php" method="post">
        <fieldset>
            <legend>Get element details</legend>
            <p>
                Element: <input name="element" type="text" size="12" maxlength="12" />&nbsp; &nbsp; <button type="submit" name="submit" value="update">Get details</button>
            </p>
        </fieldset>
    </form>
    ';
    echo '<br/>';

    $soapReq = new SoapClient('http://www.webservicex.net/periodictable.asmx?WSDL');
    $input = array ("ElementName" => $element);

    $result = $soapReq ->
        __soapCall("GetAtomicNumber",
            array(
                'parameters' => $input
            )
        );

    $XML = new DOMDocument();
    $XML -> loadXML ( $result -> GetAtomicNumberResult );

    $xslt = new XSLTProcessor();
    $XSL = new DOMDocument();
    $XSL -> load('showResults.xslt');
    $xslt -> importStylesheet( $XSL );

    echo $xslt -> transformToXML( $XML );

?>
</body>
</html> 
```

不要介意css文件（只包含一些表格布局的东西），但这是我使用的xslt：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <table>
            <thead>
                <tr>
                    <th colspan="2">SOAP results</th>
                </tr>
            </thead>
            <tbody>
                <xsl:for-each select="//NewDataSet/Table/*">
                    <tr>
                        <td><xsl:value-of select="name()"/></td>
                        <td><xsl:value-of select="."/></td>
                    </tr>
                </xsl:for-each>
            </tbody>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

结果页面应该类似于

![结果](../Images/7342a237d5cf0bbf54fca9ff244dbb4e.png)

`Carbon`我希望在输入元素被赋予值并单击提交按钮后填充底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:11:50.320

我曾希望有人能帮助我，但我总是不能不管它，继续尝试寻找解决方案。我做到了：诀窍是重新打​​开 php 文件并将元素值传递给它，可以使用表达式 $_POST['element']（或 $_GET['element']，当使用 get 方法而不是 post 时）访问它.

我达到的最终结果如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title>Get element details</title>
    <style type="text/css">
        @import url("Swift.css");
    </style>
</head>
<body>
    <br/>
<?php
    echo '<form action="httpCallExample2.php" method="post">
        <fieldset>
            <legend>Get element details</legend>
            <p>
                Element: <input name="element" type="text" size="12" maxlength="12" />&nbsp; &nbsp; <input type="submit" value="Get details"/>
            </p>
        </fieldset>
    </form>
    ';
?>
    <br/>

<?php
    if (!empty($_POST['element'])) {
        $soapReq = new SoapClient('http://www.webservicex.net/periodictable.asmx?WSDL');
        $input = array ("ElementName" => $_POST['element'];

        $result = $soapReq ->
            __soapCall("GetAtomicNumber",
                array(
                    'parameters' => $input
                )
            );

        $XML = new DOMDocument();
        $XML -> loadXML ( $result -> GetAtomicNumberResult );

        $xslt = new XSLTProcessor();
        $XSL = new DOMDocument();
        $XSL -> load('showResults.xslt');
        $xslt -> importStylesheet( $XSL );

        echo $xslt -> transformToXML( $XML );
    }
?>
</body>
</html> 
```

首先只产生输入表单，当输入（例如）`potassium`并单击按钮时，这给出

![结果2](../Images/075722250d1eeffda68d7d0711d8855d.png)

当然，可以再次将发布的值输入到输入元素中。

# c# - 使用 If 语句、&& 和 || 过滤搜索条件

> ID：12038460
> 
> 赞同：0
> 
> 时间：2012-08-20T13:19:55.853
> 
> 标签：c#, winforms

我正在尝试使情况像这样：用户可以填写“just txtComStartDate”或“just txtComEndDate”或“txtComStartDate & txtComEndDate”。

如果用户填写`txtComStartDate`为 18/08/12，则仅显示 18/08/12 以后的数据。

如果用户填写`txtComEndDate`为 19/08/12，则仅显示 19/08/12 之前的数据。

如果用户同时限制`txtComStartDate`18/08/12 和`txtComEndDate`19/08/12，则会显示这两个日期之间的数据。

该`if`声明给了我错误并且无法正常工作。我对`&&`and感到困惑`||`。有人可以帮忙吗？您的帮助将不胜感激。谢谢你。

我的代码：

```
private void searchComByDate()
{

    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
        XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

        string docPath = fileName;

        xmlDoc.Load(docPath); //* load the XML document from the specified file.

        XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

        foreach (XmlNode node in nodeList)
        {

            XmlElement itemElement = (XmlElement)node;

            string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
            CultureInfo provider = CultureInfo.InvariantCulture;
            if (txtComStartDate.Text != (String.Empty) && DateTime.Parse(itemDate) >= DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider) 
                || txtComEndDate.Text != (String.Empty) && DateTime.Parse(itemDate) <= DateTime.ParseExact(txtComEndDate.Text, "dd/MM/yy", provider)
                || (txtComStartDate.Text != (String.Empty) && DateTime.Parse(itemDate) >= DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider) && txtComEndDate.Text != (String.Empty) && DateTime.Parse(itemDate) <= DateTime.ParseExact(txtComEndDate.Text, "dd/MM/yy", provider)))
            {
                string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;
                string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;
                string itemXMLFile = Path.GetFileNameWithoutExtension(fileName);

                richComByTemplate.AppendText("SYMBOL: " + itemXMLFile + "\nAUTHOR: " + itemAuthor + "\nDATE: " + itemDate + 
                                            "\nTITLE: " + itemTitle + "\nDESCRIPTION: " + itemDescription + "\n\n--------\n\n");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:26:09.517

可能是这样的。伪*代码*：

```
DateTime startDate = DateTime.MinValue;
DateTime endDate   = DateTime.MaxValue;

if(!string.IsNullOrEmpty(txtComStartDate.Text))
   startDate = DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider);

if(!string.IsNullOrEmpty(txtComEndDate.Text))
   endDate = DateTime.ParseExact(txtComEndDate.Text, "dd/MM/yy", provider);

 DateTime itemDate = DateTime.Parse(itemDate);
 if (itemDate >= startDate || itemDate <= endDate || ...)            
 {
 } 
```

似乎更清楚的是，`if`里面有很多混合选项的巨大声明。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:48:41.987

你的短路失败了，因为它到达`DateTime.Parse(txtComStartDate.Text)`并失败了。当其中任何一个未能忽略结果时，您应该让它短路：

```
DateTime startDate, endDate;
if ((!DateTime.TryParseExact(txtComStartDate.Text, "dd/MM/yy", provider, DateTimeStyles.AssumeLocal, out startDate) 
        || DateTime.Parse(itemDate, provider, DateTimeStyles.AssumeLocal) >= startDate) && 
    (!DateTime.TryParseExact(txtComEndDate.Text, "dd/MM/yy", provider, DateTimeStyles.AssumeLocal, out endDate)
        || DateTime.Parse(itemDate, provider, DateTimeStyles.AssumeLocal) <= endDate))
{
    // Do something here.
} 
```

您将要阅读的方式是“我无法解析开始日期（意味着用户省略了它或它无效）或项目日期大于开始日期；并且结束日期不能被解析（同样，省略或无效）或项目日期小于结束日期。”

利用这里的短路。如果您无法解析开始日期或结束日期，则无需检查该边界的项目日期。但是，由于`&&`，它会检查两者（除非项目日期在指定的开始日期之前，在这种情况下它可以跳过记录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:25:27.083

我可以给你一个关于运营商的简短解释：

```
if (a && b) 
    //if both a and b are true

if (a || b)
    //if either a or be is true

if (a && (b || c))
    // a must to be true, and either b or c must to be true 
```

记住他们很懒，这意味着：

```
if (a || b)
    // if a is true, b isn't evaluated 
```

如果您需要更多示例或帮助，请发表评论:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:29:42.653

根据您的评论，仅填写结束日期会给您带来错误，我建议您可能应该`if`更多地在您的陈述中加上括号以强制操作顺序。

```
if (
(txtComStartDate.Text != (String.Empty) && DateTime.Parse(itemDate) >= DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider))
 ||
(txtComEndDate.Text != (String.Empty) && DateTime.Parse(itemDate) <= DateTime.ParseExact(txtComEndDate.Text, "dd/MM/yy", provider))
 ||
 (DateTime.Parse(itemDate) >= DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider) && DateTime.Parse(itemDate) <= DateTime.ParseExact(txtComEndDate.Text, "dd/MM/yy", provider))
 ) 
```

您可能挂断了`DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider))`可能是空的，因为您只是输入了结束日期。

**编辑：**您的问题是条件短路。如果您同时输入 a`txtComStartDate`和 a `txtComEndDate`，则您的条件将无法满足条件（输入的两个值），因为您使用的是`OR`. 由于同时具有开始和结束将使语句的第一部分为真，它将显示所有超过您的开始日期的节点；不考虑您的结束日期。

您可以在过滤器之前检查这两个值： `if(txtComStartDate.Text != (String.Empty))`,`if(txtComEndDate.Text != (String.Empty))`

并在执行此操作后实施过滤 - 确保您获得用户的明确意图。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-20T13:37:11.137

你的说法太复杂了。尝试提取一些条件来分离属性或方法。

# excel - 将数据从 MS Word 移动到 MS Excel

> ID：12038461
> 
> 赞同：0
> 
> 时间：2012-08-20T13:19:59.060
> 
> 标签：excel, import, ms-word

我有 MS Word 中的数据副本，想读入一个名为 R 的统计程序。问题是这些文档包含特殊字符（不是纯文本）。我处理它们的过程是将它们分到 MS Word/保存为 txt 文档/读入 MS Excel（使用导入向导为人员和对话创建一列）/转换为 .csv/读入 R。这过程有效，但耗时。我发现了如何将带有特殊字符的文本直接读入 R（R 通常需要纯文本），但这需要文档位于 excel 文档中。这是可取的，因为如果我可以将特殊字符读入 R，那么一次删除所有特殊字符是相当简单的。出现问题是因为我无法将 MS Word 文档直接导入 Excel。我必须先将其保存为文本文件（我没有 不介意）然后读进去。这会将特殊字符变成方框和问号。我需要将 MS Word 文档作为具有 2 列（人物、对话）的数据框导入 Excel，而不会破坏特殊字符（“、”、-、“、”、……等）。

我可以通过在 Word 中用替换替换来做到这一点，但如果我能把它放到 Excel 中，在 R 中这样做会容易得多。

这是我的数据的示例 MS Word 文档（制表符分隔的列）

[https://dl.dropbox.com/u/61803503/TEST.doc](https://dl.dropbox.com/u/61803503/TEST.doc)

Win 7 计算机上的 Excel 和 Word 版本 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:38:15.437

一种方法：在 Word 中使用 Edit->Copy，在 Excel 中使用 Edit->Paste。如果这样做，应该保留一个简单的表格结构，并保留 Unicode 字符。不太确定非 Unicode 的东西，比如 Wingdings。也没有尝试过VBA。

# api - 如何正确缓存我的 Symfony2 API？

> ID：12038462
> 
> 赞同：6
> 
> 时间：2012-08-20T13:20:03.130
> 
> 标签：api, rest, caching, symfony

我正在 Symfony2 上制作经典的无状态 RESTfull API：用户/应用程序在身份验证 API 上获取身份验证令牌，并将其提供给所有其他 API 以记录并在其他 API 上发布数据/访问受保护/私人/个人数据。

我现在对这个工作流程和缓存有三个担忧：

*   如何为我的“静态”API 使用 HTTP 缓存（始终提供相同的内容，无论登录的用户及其令牌）假设不同的用户将在 url 中为同一 API 传递不同的令牌，以便 url 将永远不一样？那么如何使用 HTTP 共享缓存呢？

*   关于记录的用户权限（我基本上有 4 个不同的权限级别），我有相同 url 的 API 产生不同的输出。问题是：这是一个好的模式吗？拥有 4 个不同的 url，每个权利一个，我可以缓存不是更好吗？如果没有，如何实现适当的缓存？

*   共享 HTTP 缓存是否适用于 HTTPS？如果没有，我应该实现哪种类型的缓存，以及如何实现？

感谢您的回答和说明。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T04:05:08.213

我遇到了类似的问题（所有 3 个场景），并且成功地使用了 Symfony 内置的反向代理缓存的以下策略：

1.  如果使用 Apache，请更新`.htaccess`以将应用程序的环境变量添加到 http 缓存关闭（注意：环境自动添加`REDIRECT_`到环境变量）：

    ```
    # Add `REDIRECT_CACHE` if API subdomain
    RewriteCond %{HTTP_HOST} ^api\.
    RewriteRule .* - [E=CACHE:1]

    # Add `REDIRECT_CACHE` if API subfolder
    RewriteRule ^api(.*)$ - [E=CACHE:1] 
    ```

2.  `app.php`实例化后添加`AppKernel`：

    ```
    // If environment instructs us to use cache, enable it
    if (getenv('CACHE') || getenv('REDIRECT_CACHE')) {
        require_once __DIR__.'/../app/AppCache.php';

        $kernel = new AppCache($kernel);
    } 
    ```

3.  对于您的“静态”API，您所要做的就是获取您的响应对象并对其进行修改：

    ```
    $response->setPublic();
    $response->setSharedMaxAge(6 * 60 * 60); 
    ```

    因为你有一个会话、用户或安全令牌，Symfony 实际上默认为`$response->setPrivate()`.

关于您的第二点，REST 约定（以及反向代理建议）、GET 和 HEAD 请求并不意味着在请求之间进行更改。因此，如果基于登录用户的内容发生更改，您应该将响应设置为私有并完全阻止反向代理缓存的缓存。

*如果需要缓存以提高速度，则应在内部处理而不是由 reverse-proxy 处理*。

因为我们不想基于每个用户角色引入 URL，所以我们只是在内部（使用 Redis）按角色缓存响应并直接返回它，而不是让缓存（错误）处理它。

至于您的第三点，由于 HTTP 和 HTTPS 流量正在访问相同的缓存，并且响应明确设置了公共/私有和缓存控制设置，因此`AppCache`在安全和不安全流量中提供相同的响应。

我希望这对我有帮助！

# mysql - 相互非相互好友查询mysql

> ID：12038471
> 
> 赞同：0
> 
> 时间：2012-08-20T13:20:32.830
> 
> 标签：mysql

大家好，我已经尝试了很多年了。

我在这里阅读了很多问题，并尝试根据我的需求调整各种解决方案，但没有结果。

历史：

一个事件有很多参与者。参与者都在活动中相遇，并向他们真正喜欢的所有其他参与者发出“赞”。

在活动结束时，管理员为该活动的每个参与者插入所有喜欢，系统将找到相互喜欢（友谊）

问题：在插入喜欢（双关语）系统以检测天气时，已经建立了友谊（也来自其他事件），如果是这样，请避免在设置喜欢时显示该用户名。

这是我正在使用的表（mysql）

## wp_fd_users

编号 | 用户名 | 用户性别 | .. ETC

## wp_fd_matches

编号 | event_id | event_user_id | event_user_match_id | ... ETC

匹配表示例

```
1 | 1 | 1 | 3 | ...
2 | 1 | 1 | 4 | ...
3 | 1 | 2 | 6 | ...
4 | 1 | 3 | 1 | ... 
```

您可以清楚地看到 1 <-> 3 具有相互关系，并且 1 喜欢 4 但不是相互的。我需要一个查询来返回所有结果，避免在一个事件中建立的关系。

像这样的现象：

```
1 | 1 | 1 | 3 | ...
2 | 1 | 1 | 4 | ...
3 | 1 | 2 | 6 | ...
4 | 2 | 3 | 1 | ... 
```

不会触发类似事件，因为它发生在两个单独的事件中

希望清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:46:02.827

你的问题有点不清楚。我将通过：“我需要一个查询来返回所有结果，避免在一个事件中建立的关系。”

以下自联接实现了这一点：

```
select m1.*
from wp_fd_matches m1 left outer join
     wp_fd_matches m2
     on m1.event_id = m2.event_id and
        m1.event_user_id = m2.event_user_match_id
        m1.event_user_match_id = m2.event_user_id
where m2.id is null 
```

它寻找匹配的记录。但是，通过使用左外连接，它会获取所有记录。然后它过滤掉匹配的那些。

# php - 在 PHP 中检测文件是完整的还是部分的

> ID：12038476
> 
> 赞同：12
> 
> 时间：2012-08-20T13:20:53.883
> 
> 标签：php, upload, copy

在本系统中，将使用 SFTP 将大型视频文件上传到服务器上的特定目录。我正在编写一个 PHP 脚本，用于将完全上传的文件复制到另一个目录。

我的问题是，什么是判断文件是否完全上传的好方法？我考虑记下文件大小，让脚本休眠几秒钟，再次读取大小，然后比较两个数字。但这似乎很笨拙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:41:24.393

## 简单的

如果您只想要一种可以处理大多数用例的简单技术 - 编写一个过程来检查上次修改日期或（如问题中所示）文件大小，如果它在设定的时间内没有改变，比如 1 分钟，假设上传完成并处理它。事实上 - 你的问题[几乎是另一个问题的重复](https://stackoverflow.com/questions/5625421/how-to-detect-ftp-file-transfer-completion)，恰好显示了这一点。

## 强大的

轮询文件大小/上次修改时间的替代方法（连接缓慢或间歇性可能导致打开的上传被认为过早完成）是使用[inotify](http://php.net/manual/en/book.inotify.php)监听文件何时完成写入。

[侦听 IN_CLOSE_WRITE](https://stackoverflow.com/questions/3070555/linux-how-to-detect-that-ftp-file-upload-is-finished)可以知道 ftp 上传何时完成更新特定文件。

我从未在 php 中使用过它，但从[spartan 文档](http://www.php.net/manual/en/function.inotify-add-watch.php)看来，它的工作方式与底层 lib 完全相同。

## 让 FTP 客户端为您工作

考虑到一些 ftp 程序是如何工作的，来自[这个评论](https://stackoverflow.com/questions/3070555/linux-how-to-detect-that-ftp-file-upload-is-finished#comment3145691_3070577)：

> 值得一提的是，一些 ftp 服务器会创建一个隐藏的临时文件来接收数据，直到传输完成。即 .foo-ftpupload-2837948723 在与目标文件相同的上传路径

如果适用，从完成的文件名中，您可以判断 ftp 上传是否实际完成或在上传过程中停止/断开连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T13:53:54.823

**理论上，如果您被允许从 PHP 运行系统命令，您可以尝试使用pidof**命令获取 sftp 服务器进程的 pid，然后使用**lsof**输出检查当前检查的上传文件是否存在打开的文件描述符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:37:08.860

在传输过程中，唯一知道文件实际大小的是您的 SFTP 客户端，也可能是 SFTP 服务器（不知道协议细节，因此服务器也可能知道。）除非您可以直接与 SFTP 服务器通信，否则您必须等待文件完成。每隔一段时间检查一下似乎很笨拙，但在这种情况下是相当不错的。这就是我们在我的项目中所做的。

如果您的轮询间隔非常短，则在处理可能会停顿几秒钟的上传时，它的弹性不是很大。所以只需将间隔设置为每分钟一分钟或类似的东西。假设您在基于 *nix 的平台上，您可以设置一个 cron 作业以每分钟运行一次（或任何轮询间隔）来为您运行脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T13:39:09.017

正如@jcolebrand 所说-如果您无法控制上传过程-除了猜测（文件大小/日期）之外，您实际上无能为力。我会寻找一个服务器软件，它允许您在某些服务器操作之前/之后执行挂钩/脚本（这里：文件传输完成）。我不确定是否存在这样的软件。作为最后的手段，您可以通过为自己添加这样的钩子来调整一些开源 SFTP 服务器以满足您的要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T16:36:56.463

在原始问题下的推荐中提到了一个有趣的答案（但由于某些未知原因，该评论被删除）：您可以尝试解析 SFTP 服务器日志以查找完全上传的文件。

# haskell - 使用类型同义词的函数定义是“多态性低于预期”

> ID：12038479
> 
> 赞同：4
> 
> 时间：2012-08-20T13:21:01.243
> 
> 标签：haskell, types, polymorphism, ghci

鉴于这种类型的同义词：

```
type Synonym a b = (a, b) 
```

此代码在 GHCi 中不起作用：

```
ghci> let myFirst (f, s) = f :: Synonym a b -> a

<interactive>:1:21:
    Inferred type is less polymorphic than expected
      Quantified type variable `b' is mentioned in the environment:
        f :: Synonym a b -> a (bound at <interactive>:1:13)
      Quantified type variable `a' is mentioned in the environment:
        f :: Synonym a b -> a (bound at <interactive>:1:13)
    In the expression: f :: Synonym a b -> a
    In the definition of `myFirst':
        myFirst (f, s) = f :: Synonym a b -> a 
```

但这确实：

```
ghci> let myFirst = fst :: Synonym a b -> a
-- no problem -- 
```

这只发生在我直接输入 GHCi 时；当我将它们放入文件和`:load`它们时，这两个定义都有效。

这里有什么问题？我已经多次遇到这个问题，但不明白为什么。

ps 我试过`:set -XNoMonomorphismRestriction`了，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T13:31:02.550

Haskell 正在尝试将类型签名与 匹配`f`，而不是匹配`myFirst`，但它不起作用（但我无法给出更多解释，其他人？）。即 Haskell 将其视为：

```
let myFirst (f,s) = (f :: Synonym a b -> a) 
```

您可以解决此问题，提供单独的签名

```
let myFirst :: Synonym a b -> a; myFirst (f,s) = f 
```

甚至使用 lambda（这本质上等同于`myFirst = fst`定义）

```
let myFirst = (\(f,s) -> f) :: Synonym a b -> a 
```

（请注意，即使没有类型同义词，这也会失败：`let myFirst (f,s) = f :: (a,b) -> a`也不起作用。）

# c++ - 如何删除重复项并仅在列表中保留唯一指针？

> ID：12038482
> 
> 赞同：1
> 
> 时间：2012-08-20T13:21:15.817
> 
> 标签：c++, stl

> **可能重复：**
> [如何使向量的元素独一无二？（删除不相邻的重复项）](https://stackoverflow.com/questions/1453333/how-to-make-elements-of-vector-unique-remove-non-adjacent-duplicates)
> [从列表中删除重复项<int>](https://stackoverflow.com/questions/4885676/remove-duplicates-from-a-listint)

我有类似的指针列表

```
std::list<Person*> persons; 
```

并且在填充过程中此列表中有重复项。如何删除重复项并仅保留列表中的唯一指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T13:29:07.740

如果您可以更改元素的顺序，则首先使用[list::sort对列表进行排序，然后使用](http://en.cppreference.com/w/cpp/container/list/sort)[list::unique](http://en.cppreference.com/w/cpp/container/list/unique)删除重复项。

```
std::less<Person*> cmp;
persons.sort(cmp);
persons.unique(cmp); 
```

另一方面，您可以使用[std::set](http://en.cppreference.com/w/cpp/container/set)。它的元素是唯一的、有序的，如果集合中已经存在一个元素，则[插入方法会失败。](http://en.cppreference.com/w/cpp/container/set/insert)

请记住，插入单个元素的时间复杂度是对数的，而将元素添加到列表的前面或后面是恒定时间。另一方面，`std::list::sort`是`N*log(N)`，并且`std::unique`是线性的。因此，如果您打算频繁执行这些重复删除，则最好`std::set`首先使用 an 。另请注意，在 C++11 中有[std::unordered_set](http://en.cppreference.com/w/cpp/container/unordered_set)，它具有元素唯一性和插入和删除的平均常数复杂度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:29:40.920

如果您不关心插入顺序，请使用 a`set`而不是 a `list`。它只能有独特的元素，它会自动进行其他人推荐的排序。

如果您确实关心插入顺序，请执行以下操作：

```
auto i = std::find(persons.begin(), persons.end(), pPerson);
if(i != persons.end())
    persons.erase(i);

persons.insert(pPerson); 
```

（我没有编译那个）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:25:29.987

根据他们指向的地址对列表进行排序。用一个简单的循环删除重复项。

# ruby-on-rails - 在 Ruby on Rails 中删除用户配置文件时出错

> ID：12038484
> 
> 赞同：0
> 
> 时间：2012-08-20T13:21:22.157
> 
> 标签：ruby-on-rails

**控制器（用户）和操作：-**

```
def destroy

@user=User.find(params[:id]).destroy

flash[:success] = "Your account has been deleted."

redirect_to(root_path)

end 
```

**路线.rb**

```
match '/destroy', to: 'users#destroy'
*#(resources:users)* have already mentioned 
```

意见：

```
<%= link_to 'Delete', @user, confirm: 'Are you sure?', method: :delete %> 
```

现在，一切都很好，直到消息框**“确认：'你确定吗？'”**然后当我点击**“确定”** 给我两个通知时，一个用黄色突出显示**“您无权访问此页面”。**

和其他绿色的**“您必须在继续之前确认您的帐户”**。

请尽可能尽快回复。

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:32:21.487

您的 link_to 不会生成指向您在 routes.rb 中提到的“/destroy”的链接，而是生成指向 /user/1 的链接。但是，当您使用“资源”时，这不应该干扰，其中还定义了删除操作。

第二：检查你的 Ruby/Rails 版本。link_to 已对 v3 进行了一些更改，可能会导致此行为。

检查这些黄色和绿色消息的显示位置。可能是在查看用户而不是删除它。

# clojure - 哪些 IDE、编辑器和工具可用于 ClojureScript 开发？

> ID：12038491
> 
> 赞同：18
> 
> 时间：2012-08-20T13:21:58.143
> 
> 标签：clojure, ide, clojurescript

ClojureScript 的第一次发布已经过去一年了。我没有在生产中使用 ClojureScript，但正在考虑在即将到来的项目中使用该技术。ClojureScript 的 IDE 和工具支持的当前状态是什么。以下是 IDE、编辑器和工具，我知道：

*   [ClojureScript REPL，浏览器连接的 REPL](https://github.com/clojure/clojurescript/wiki/The-REPL-and-Evaluation-Environments)
*   [带有两个 REPL 的 ClojureScript Emacs 设置](https://github.com/brentonashworth/one/wiki/Emacs)
*   [lein-clojurescript](https://github.com/bartonj/lein-clojurescript)用于 ClojuresSript 编译的 Leiningen 插件。
*   [lein-cljsbuild](https://github.com/emezeske/lein-cljsbuild) Leiningen 插件，用于在修改 ClojureScript 文件时自动编译它们。
*   [CLJS 观察者](https://github.com/ibdknox/cljs-watch)
*   [Light Table IDE](http://www.chris-granger.com/2012/08/17/light-table-reaches-010/)有前途和创新的新 Clojure/ClojureScript IDE，刚刚达到 0.1.0。

此列表中可能缺少几个项目或工具。我还没有看到与主要 IDE 之一的任何集成，我可以想象大多数从事 ClojureScript 工作的人都在使用 Emacs。我很喜欢使用 Emacs，但并不是每个开发人员都会喜欢使用 Emacs。此列表中是否缺少任何工具或 IDE 扩展，甚至可能是在大型项目中使用过的工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T15:45:53.327

我将 La Clojure 与 intellij 一起使用。我认为大多数情况下您都是靠自己的，但语法突出显示除外。不过，您也可以尝试 Lighttable，它是一个基于 kickstarter 的 Clojurescript Web IDE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T19:54:16.790

还没有尝试过，但它看起来很有希望：[http](http://www.acooke.org/cute/Clojurescr0.html) ://www.acooke.org/cute/Clojurescr0.html 。[这是在IntelliJ IDEA](http://www.jetbrains.com/idea/)中启用 Clojurescript 编辑的非常简单的方法。鉴于 La Clojure 插件非常好，我猜 IDEA 也会对 Clojurescript 代码友好。

# php - PHP 中的 Curl 请求 - 使用 API

> ID：12038493
> 
> 赞同：0
> 
> 时间：2012-08-20T13:22:00.547
> 
> 标签：php, javascript, api

我试图弄清楚如何在我的 PHP 应用程序中使用 Cheddar API (http://cheddarapp.com/developer)。

Cheddar 的 API 使用 curl 请求——这对我在终端中使用很好，但在我的 index.php 中却不行。

我想创建一个按钮，单击该按钮会在列表调用颜色中创建一个任务。如果列表不存在，它将创建列表。

有没有人使用过 Cheddar 的 API，甚至在 PHP 中包含 curl 请求，甚至是如何将它们包含在 Javascript 中，我猜你会用它来解决这个问题。

**更新**

这是在 Cheddar 中创建任务的 Curl 请求：[https](https://cheddarapp.com/developer/tasks#create) ://cheddarapp.com/developer/tasks#create 。

我想制作一个点击按钮，它将创建一个任务。难道不是像在Javascript中创建一个函数并在锚点上使用onclick那么简单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:37:03.430

我现在正在使用 curl Php

```
$LOCAL_REST_URL = 'whateverurlofyourrestapi'

$json_part = { pass the data for post } 
```

您将以`$buffer`json 格式获得响应 使用响应迭代它

正如你所说的如何发出 curl 请求，我想给你一个简单的 POST 示例

```
 $curl_handle=curl_init();
            curl_setopt($curl_handle,CURLOPT_URL,$LOCAL_REST_URL);
            curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,20);
            curl_setopt($curl_handle, CURLOPT_POSTFIELDS,$json_part);
            curl_setopt($curl_handle, CURLOPT_HTTPHEADER, $headers);
            curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
            $buffer = curl_exec($curl_handle);
            curl_close($curl_handle); 
```

其中 $json_part 是请求正文， $LOCAL_REST_URL 是您的休息网址

我希望这篇文章对你有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T13:31:17.020

您可以使用 php.ini 中的 shell_exec 运行您的终端程序。

或者将 curl 代码转录为 php 中的 curl 请求，[http://se2.php.net/manual/en/ref.curl.php](http://se2.php.net/manual/en/ref.curl.php)

# python - Google App Engine 上的 Django TemplateDoesNotExist

> ID：12038496
> 
> 赞同：1
> 
> 时间：2012-08-20T13:22:13.560
> 
> 标签：python, django, google-app-engine

我不断得到`TemplateDoesNotExist`，我无法弄清楚如何调试它。我已将模板所在的文件夹添加到`TEMPLATE_DIRS`元组中，当我`get_template`从`.py`文件中调用时，模板加载正常，但是当我使用`extends`标签从模板中调用它时，它会引发`TemplateDoesNotExist`.

`static_files`模板文件不在`app.yaml`.

让我感到困惑的是为什么它可以很好地加载`get_template`但不能加载`extend`.

有没有办法可以找出 Django 正在寻找的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:28:32.683

你可以试试：

```
from django.conf import settings
print settings.TEMPLATE_DIRS 
```

查看使用的模板目录路径。

# php - codeigniter 中的所有链接都在维护旧段 - 为什么？

> ID：12038500
> 
> 赞同：0
> 
> 时间：2012-08-20T13:22:37.330
> 
> 标签：php, codeigniter, linker

如果您链接到主页，它可以工作。所以`www.domain.com`去，`www.domain.com/parent1/mypage.php`但是当我链接到下一页时，它会保留第一个段/父级（正确的词？）所以链接变成`www.domain.com/parent1/parent2/anotherpage.php`等等。

单击三下后，我们`www.domain.com/parent1/parent2/parent3/third.php.`知道我在哪里做错了。这也会影响图像，并且所有图像看起来都好像它们在类别中`www.domain.com/parent1/images/image.jpg`- 不确定 parent1 在那里。

我希望这是有道理的。我在这里真的很麻烦。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:00:19.853

您可以像 Robert 所建议的那样使用 base_url，如下所示：

```
<a href="<?php echo base_url();?>blog/post/123">Post 123</a> 
```

或者您可以像这样使用[site_url()](http://codeigniter.com/user_guide/helpers/url_helper.html)：

```
<a href="<?php echo site_url("blog/post/123");?>">Post 123</a> 
```

或者如果您可以像这样使用[anchor()](http://codeigniter.com/user_guide/helpers/url_helper.html)标签：

```
<?php echo anchor("blog/post/123", "Post 123"); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:43:13.147

您（可能）使用相对URI而不是绝对URI，这就是搞砸了。

创建链接时，建议使用[base_url](http://codeigniter.com/user_guide/helpers/url_helper.html)函数，如下所示：

```
echo base_url("blog/post/123"); 
```

如果您在 HTML 模板中使用它，只需添加 PHP 标记：

```
<?php echo base_url("blog/post/123"); ?> 
```

你也可以像这样使用它：

```
<a href="<?php echo base_url();?>blog/post/123">Post 123</a> 
```

# java - Javascript/html - 文件上传

> ID：12038502
> 
> 赞同：1
> 
> 时间：2012-08-20T13:22:41.827
> 
> 标签：java, javascript, html, file-upload

我有一个新闻部分，我可以在其中发布一些新闻。

- >`Thumbnail`和`title``content`

我想要的是：

*   用户应该能够在不离开页面的情况下上传图像文件 -> 进度条

*   将文件作为发布请求发送到我的服务器。

*   然后我可以从 post 请求中获取图像文件，然后我可以调整图像大小/重命名图像并将其上传到 amazon s3。

*   如果我必须使用 javascript 库，我宁愿使用 jquery。

这应该看起来像这样：

![上传示例](../Images/2181784c7a28cad38dcce0af61b9bef2.png)

如果我提交新闻，我想将图像路径保存在我的数据库中。现在我需要一种从我的 post 方法中获取图像名称的方法。

我找到了一些上传解决方案，但我无法理解它们是如何工作的。

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

[http://www.uploadify.com/](http://www.uploadify.com/)

我只知道获取/发布来检索信息，但它们以某种方式集成了表单中的 php 文件。例如：

```
$(function() {
    $('#file_upload').uploadify({
        'swf'      : 'uploadify.swf',
        'uploader' : 'uploadify.php'
        // Put your options here
    });
}); 
```

我缺乏自己做这件事的信息。你会推荐我什么？

Ps：我在 Play2 中使用 Java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:32:19.360

您可以从[文档](http://www.uploadify.com/documentation/uploadify/onselect/)中执行以下操作：

```
$(function() {
    $("#file_upload").uploadify({
        'swf'      : '/uploadify/uploadify.swf',
        'uploader' : '/uploadify/uploadify.php',
        'onSelect' : function(file) {
            alert('The file ' + file.name + ' was added to the queue.');
        }
    });
}); 
```

选择文件名后，您可以在哪里获得文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:33:24.210

你所要求的确实很多。但是为了让你开始，看看这个页面（使用 JQuery）：

[http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

上面的链接是一个不错的上传实用程序，您可以很容易地使用它进行拖放，但也可以通过手动选择文件来使用它。有据可查。

至于调整大小，我已经非常成功地使用了它（PHP）：[simpleImage](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

simpleImage 非常易于使用并插入您的网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:34:13.077

Uploadify绝对是要走的路。所有实施步骤都可以在这里找到：[http ://www.uploadify.com/documentation/uploadify/implementing-uploadify/](http://www.uploadify.com/documentation/uploadify/implementing-uploadify/)

您需要在 uploadify.php 脚本中配置上传文件的路径。

至于亚马逊 S3，这里有一个实现：[http ://code.google.com/p/uploadify-amazon-s3/](http://code.google.com/p/uploadify-amazon-s3/)

我认为 onUploadSuccess 方法比 onSelect 更适合：[http ://www.uploadify.com/documentation/uploadify/onuploadsuccess/](http://www.uploadify.com/documentation/uploadify/onuploadsuccess/)

# javascript - 如何在 asp.net 中的 UserControl PostBack 上执行 JavaScript？

> ID：12038508
> 
> 赞同：1
> 
> 时间：2012-08-20T13:22:55.490
> 
> 标签：javascript, asp.net

我们有一个由多个用户控件组成的 asp.net 页面，其中许多控件的`visible`属性设置为`false`. 通过选择单选按钮，通过在代码隐藏中设置`visible`属性来显示用户控件之一。`true`发生这种情况时，我们希望运行一个 JavaScript 函数。该脚本已使用页面`ScriptManager.RegisterStartUpScript`的`Page_Load`方法注册。

我们怎样才能使这项工作？

我们尝试过的事情：

*   在用户控件中注册脚本（代码隐藏和标记）
*   尝试一些其他可用的方法`ScriptManager`
*   使用 jQuery`$(document).ready()`

但在所有情况下，脚本仅在页面加载/重新加载时执行。唯一可行的方法是在函数内部调用函数，因为在每次 PostBack 之后都会调用该函数*。*`pageLoad()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:43:21.690

您可以尝试服务器端：`ClientScriptManager.RegisterClientScriptBlock()`与客户端：`setTimeout()`

例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page page = (Page)HttpContext.Current.CurrentHandler;
    string script = "<script type=\"text/javascript\">setTimeout(function(){alert("Hello World")},3000);</script>";

    if (page != null && !page.ClientScript.IsClientScriptBlockRegistered("alert"))
    {
            page.ClientScript.RegisterClientScriptBlock(typeof(PageFunctions), "alert", script);
    }
} 
```

这将在 page_load 上注册一个脚本块，并在 3 秒后显示警报查看有关 setTimeout @Window [setTimeout() 方法的更多信息](http://www.w3schools.com/jsref/met_win_settimeout.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:29:38.260

我建议您将用户控件包含在 updatePanel 中，并将您的 ScriptManager.RegisterStartUpScript 添加到 updatePanel 加载事件中：

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1" 
OnLoad="UpdatePanel1_Load"> 
```

C＃

```
protected void UpdatePanel1_Load(object sender, EventArgs e)
{
  //your code to fire the javascript
} 
```

# c++ - C++ 运算符= 返回对 *this 的引用

> ID：12038509
> 
> 赞同：5
> 
> 时间：2012-08-20T13:23:02.090
> 
> 标签：c++, return-type

看下面的代码：

```
#include <iostream>
using namespace std;

class Widet{
public:
    Widet(int val = 0):value(val)
    {

    }

    Widet& operator=(Widet &rhs)
    {
        value = rhs.value;
        return *this;
    }
    int getValue()
    {
        return value;
    }
private:
    int value;
};

int main()
{
    Widet obj1(1);
    Widet obj2(2);
    Widet obj3(0);
    (obj3 = obj2) = obj1;
    cout << "obj3 = " << obj3.getValue() << endl;
} 
```

代码运行成功，输出为（使用VS2008）：

![在此处输入图像描述](../Images/b55e9105d59db0e104572bcbdbffaca4.png)

当我让 operator= 返回一个值而不是引用时：

```
Widet operator=(Widet &rhs)
{
    value = rhs.value;
    return *this;
} 
```

它也成功运行，输出为：

![在此处输入图像描述](../Images/6fa569ffc31fca07011dc11a58aac8ba.png)

我的问题是：为什么第二个代码运行良好？我们不应该得到一个错误吗？

为什么返回对 *this 的引用而不是 *this 是一个好习惯？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T13:32:28.113

> 为什么第二个代码运行良好？我们不应该得到错误吗？

因为它是完全有效的代码。它返回对象的临时副本，并且您可以`operator=()`在临时对象上调用成员函数（包括 ），因此不会出错。

如果对象不可复制，您将收到错误消息。

> 为什么返回对 *this 的引用而不是 *this 是一个好习惯？

因为并非所有对象都是可复制的，而且有些对象的复制成本很高。您可以引用任何对象，并且引用总是很便宜传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T13:24:52.573

通常，您返回一个引用，以便可以将`=`运算符用作左值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T13:31:36.910

当您不返回引用时，`(obj3 = obj2)`提供`obj3`. 副本从中获取值`obj1`并被删除，而`obje3`不会受到第二次赋值的影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T13:31:29.730

> 为什么第二个代码运行良好？我们不应该得到错误吗？

它运行是因为非常量成员函数也可以在（非常量）类右值上调用。第二个版本`operator=`返回一个非常量类右值，因此实际上，您分配给临时值，而将先前的值留在`obj3`变量中。

因此，没有错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T13:29:34.693

在第二个示例中，您创建一个临时的（Obj3 的副本，由 operator= 返回）并将 Obj1 分配给它。然后它立即被破坏。Obj3 仍然是第一次分配的结果 - `Obj3 = Obj2`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T13:30:23.510

从 operator=() 返回引用可以启用如下表达式：

```
a=b=c; 
```

当您不需要它时，返回一个值可能是多余的。它可能会导致额外的复制构造函数/析构函数调用。否则，返回一个值是完全有效的 C++。如果我错了，请纠正我，但我认为在 C++11 中按值返回并不是什么大问题，因为移动语义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-20T13:36:48.750

```
(obj3 = obj2) 
```

可以认为是`obj3operator=(obj2)`//假设。
由于您已将 obj2 作为参数传递，因此您的运算符重载会将 obj2.value 复制到 obj3.value 中。

`(obj3 = obj2) = obj1;`
from 返回后，会返回`operator=`obj3 *(* *this,temporary copy)。
因此，等效代码`obj3=obj1`将再次调用`operator=`of`obj3`并将值重置`obj3.value`为`obj1.value`ie `1`。

# android - Android Opengraph Like 按钮实现

> ID：12038510
> 
> 赞同：3
> 
> 时间：2012-08-20T13:23:06.850
> 
> 标签：android, facebook, facebook-graph-api, android-layout

我必须在我的 android 应用程序中集成类似 facebook 的按钮。我创建了一个 facebook 页面，并且当用户单击“like”按钮时，从 android 应用程序应该喜欢 facebook 页面。我在网络视图中使用了 facebook 社交插件并且工作正常。现在，我喜欢将 facebook 社交插件（如按钮图标/样式）更改为新的自定义按钮。

我认为使用带有社交插件的自定义按钮会导致品牌问题（http://www.facebook.com/brandpermissions/logos.php）。所以我决定使用opengraph api。我是opengraph的新手。

**我想知道如何在 facebook 应用页面中配置 opengraph 设置以进行类似操作？**

**我没有用于嵌入 opengraph 对象的服务器，那么如何从我的 android 应用程序向 facebook 发送类似 opengraph 的请求？**

**要发送到 facebook sdk 的资源包键值是什么？**

提前致谢

@nish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T07:45:46.783

Facebook**最近更新**了它的 SDK，它现在提供了一个**Like 按钮的实现**（[有一个关于它的消息](https://developers.facebook.com/blog/post/2014/10/02/mobilelike/)），看看**[那里](https://developers.facebook.com/docs/android/like-button)**得到一个关于它的教程。

# visual-studio-2010 - 使用 Perforce 源代码控制更改 VS2010 中的绑定根目录

> ID：12038512
> 
> 赞同：3
> 
> 时间：2012-08-20T13:23:13.590
> 
> 标签：visual-studio-2010, version-control, perforce

我已经彻底阅读了这篇文章：[Visual Studio 的源代码控制集成如何与 Perforce 一起工作？](https://stackoverflow.com/questions/261525/how-does-visual-studios-source-control-integration-work-with-perforce?answertab=oldest#tab-top)并发现它非常有用。但是，我有一个特定问题阻止我在 VS 中使用 Perforce。

在大多数情况下，我对插件没有任何抱怨（我仍在使用 P4VSCC 插件，因为新插件需要整个团队进行转换，目前无法进行）。一旦我了解了这些特质，我在使用插件时就遇到了一个问题。

我们的解决方案包含许多内置于单个部署包中的项目。因此，每个程序集的版本都是相同的。为了适应这一点和其他常见方面，我们定义了一个通用的“SharedVersionInfo.cs”文件，其中包含通常在 AssemblyInfo.cs 文件中找到的 AssemblyVersion 和 AssemblyFileVersion 属性。此文件存储在解决方案文件夹下的 Assets 文件夹中，并作为链接文件添加到每个项目的 Properties 文件夹中。从版本管理的角度来看，这非常有效，因为我们只需要在一个地方更改版本并且所有程序集都会更新。但是，当新开发人员首次打开解决方案或添加新项目时，Perforce 会遇到此问题。

当我们添加一个新项目时，这并不是什么大问题，但解决方案包含 80 个项目（并且还在增加），所以这对于新开发人员来说不是一个可行的补救措施！

我的理解是，问题与 VS 认为每个项目的绑定根在哪里有关。经过一番研究，我被引导找到项目的 MSSCCPRJ.SCC 文件在哪里。我发现整个解决方案结构中散布着许多 SCC 文件。所以...

**第一个问题：为什么我的解决方案结构中有多个 MSSCCPRJ.SCC 文件？**

我们还有几个在我们的解决方案中使用的共享/通用项目。这导致以下文件夹结构：

```
/Source
    /CommonTools
        /ProjectA
            ProjectA.csproj
        /ProjectB
            ProjectB.csproj
    /MySolution
        /Assets
            SharedVersionInfo.cs
        /Project1
            Project1.csproj
        /Project2
            Project2.csproj
        :
        /ProjectZ
            ProjectZ.csproj
        MySolution.sln 
```

ProjectA 和 ProjectB 都是 MySolution.sln 的一部分

**第二个问题：如何设置绑定以便将 /Source 文件夹视为根目录？这将确保解决方案中包含的所有项目都在同一个绑定根目录下。Perforce 认为这个文件夹是根目录，我如何让 VS 和插件做同样的事情？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:52:52.027

由于没有其他人提供解决方案，我想我会为遇到该线程的其他人跟进我自己的发现。

首先，我仍然不知道为什么 Visual Studio 会创建多个 MSSCCPRJ.SCC 文件，但这些是为解决方案建立“绑定根”的关键。至关重要的是，此文件存在于必要的最高级别，以便解决方案中的所有项目都位于与此文件位置相关的子文件夹中。在我上面的示例中，MSSCCPRJ.SCC 需要位于 /Source 文件夹中。将 /CommonTools 中的项目添加到解决方案时，将其放在 /MySolution 文件夹中会导致原始问题。

也就是说，解决问题并非易事。我不得不在记事本中手动编辑 .sln 和所有 .csproj 文件。我发现一些 .csproj 文件具有以下标识源代码控制设置的元素：

```
<SccProjectName>SAK</SccProjectName>
<SccLocalPath>SAK</SccLocalPath>
<SccAuxPath>SAK</SccAuxPath>
<SccProvider>SAK</SccProvider> 
```

我不知道 SAK 代表什么，但我的理解是这告诉 Visual Studio 使用 .sln 文件中包含的绑定信息。

我不得不将这些更改为：

```
<SccProjectName>Perforce Project</SccProjectName>
<SccLocalPath>..\..</SccLocalPath>
<SccAuxPath />
<SccProvider>MSSCCI:Perforce SCM</SccProvider> 
```

其中 SccLocalPath 值是从 .csproj 文件到 MSSCCPRJ.SCC 文件的相对路径。

我还必须更改 .sln 文件中每个项目的 SccLocalPathX 和 SccProjectFilePathRelativizedFromConnectionX 语句。SccLocalPathX 值应该是从 .sln 文件到 MSSCCPRJ.SCC 文件的相对路径 - 如果在同一文件夹中，则为点 (.)。SccProjectFilePathRelativizedFromConnectionX 应该是从绑定根到 .csproj 文件的相对路径。

我希望我可以说，有了它，我就不必重复这些步骤了。不幸的是，每次我在解决方案中添加一个新项目时，我仍然需要进行更正。Visual Studio 仍希望将 SAK 用于 .csproj 文件中的元素，有时 .sln 文件中的值并不完全正确。

但是，至少我知道要寻找什么以及需要做什么来实现我的目标。如果其他人有更好的解决方案或配置 VS 和/或 Perforce 的方法，以便预先正确创建这些设置，我很乐意给予信任。

希望有帮助...

# sharepoint - Sharepoint powershell 关联站点模板

> ID：12038516
> 
> 赞同：0
> 
> 时间：2012-08-20T13:23:15.587
> 
> 标签：sharepoint, templates, powershell, migration

在数据库分离和附加过程中，所有站点都迁移到新的 2010 服务器场，但尚未与任何站点模板关联。我希望能够浏览所有尚未关联任何站点模板并且只是坐在内容数据库中的站点，然后能够为它们分配一个站点模板，例如团队站点。

是否可以在 sharepoint 中使用 powershell 来完成此操作？有人请在这里给我他们的见解..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:00:25.150

如果您访问`SPFarm.Local.Services`. 然后，您必须查找 Web 应用程序对象，并且您可以在每个对象中查找站点。

在 c# 代码中，您可以这样做：

```
SPFarm farm = SPFarm.Local;
foreach (SPService objService in farm.Services) {
   if (objService is SPWebService) {
       SPWebService webService = (SPWebService)objService;
       foreach (SPWebApplication webApp in webService.WebApplications) {
          foreach (SPSite site in webApp.Sites) {
             foreach (SPWeb web in site.AllWebs) {
                 if (web.Provisioned == false) {
                   //...whatever
                 }
             }
          }
       }
   }
} 
```

# javascript - 切换按钮的背景颜色

> ID：12038519
> 
> 赞同：2
> 
> 时间：2012-08-20T13:23:34.367
> 
> 标签：javascript, html, input, toggle

我有这部分代码，旨在每次单击时更改输入按钮的颜色。

```
function colorchange(id) 
 {
   if(document.getElementById(id).style.background == '#FFFFFF')
  {
   document.getElementById(id).style.background = '#000000';
  }
 else
  {
   document.getElementById(id).style.background = '#FFFFFF';
  }
 }

<input type="button" id="k777" onclick="colorchange('k777');" style="background:#000000;"/> 
```

但是，这不能正常工作。当我第一次单击它时，它确实将按钮的颜色从#000000 更改为#FFFFFF，但是当我再次单击它时，它不会变回#000000。它仍然是白色的。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:27:03.723

那是因为`element.style.background`返回`rgb`格式的值。更改条件`if`语句以检查适当的`rgb`值，它应该可以正常工作。

使该行如下：

```
if(document.getElementById(id).style.background !== 'rgb(0, 0, 0)') 
```

[演示，您的代码已修复和清理](http://jsfiddle.net/RhpAq/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:42:46.473

尝试通过 css-classes 解决它

这里的HTML：

```
<style type="text/css">
    input.bg_1{
        background-color: #000";
    }
    input.bg_2{
        background-color: #fff;
    }
</style>
<input type="button" id="input_777" onclick="colorchange('input_777');" class="bg_1" value="hello world" /> 
```

JS：

```
function colorchange(id){
    var item = document.getElementById(id);
    if(item.getAttribute('className') == 'bg_1'){
        item.setAttribute('className', 'bg_2');
    } else {
        item.setAttribute('className', 'bg_1');
    }
} 
```

也许属性`class`在某些浏览器中。你将不得不检查这一点。顺便提一句。代码未经测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:29:51.817

```
function colorchange(id) 
 {

     var background = document.getElementById(id).style.background;

     if(background === "rgb(255,255,255)")
     {
     document.getElementById(id).style.background = "rgb(0,0,0)";
     }
     else
     {
        document.getElementById(id).style.background = "rgb(255,255,255)"; 
     }

 } 
```

因为它的 RGB 值，

它在这里工作[http://jsfiddle.net/nE8SW/](http://jsfiddle.net/nE8SW/) ​</p>

# windows-7 - 在 Windows 7 上安装 fring

> ID：12038522
> 
> 赞同：0
> 
> 时间：2012-08-20T13:23:37.333
> 
> 标签：windows-7, desktop

任何人都可以帮助在 Windows 7 上安装 fring 吗？我从以下链接下载了 fring。 [http://fring.en.softonic.com/pocketpc/download](http://fring.en.softonic.com/pocketpc/download) 安装 fring 时出现错误

```
Active sync cannot be found on this computer. Setup cannot continue and now will exit. 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:17:51.680

好吧，您下载的应用程序文件是基于 PC 的手持设备（windows mobile 或袖珍电脑）安装程序 - 它希望使用 active-sync 连接到手持设备并将其安装在那里。

迄今为止，Windows 还没有原生 fring - 周围的人使用 fring for android 在 PC 的 android 模拟器中运行。而且，它有效:-)

# visual-studio-2012 - 如何修复显示反编译值的 Visual Studio 调试器监视窗口

> ID：12038524
> 
> 赞同：2
> 
> 时间：2012-08-20T13:23:39.317
> 
> 标签：visual-studio-2012, visual-studio-debugging

我最近安装了 VS 2012 的 RTM 版本，当我运行调试器时，监视窗口为我提供了本地值的反编译视图。我最初的想法是我不小心点击了“十六进制”显示，但事实并非如此。当我尝试查看给定对象的子属性时，我什么也得不到，如果对象为空，我什至没有表示。

我不知道我可能设置了什么导致了这种情况，但是 VS 2010 没有这样做，而使用 VS2012RTM 的第一天也没有这样做。我有理由确定这是我点击的设置，但对于我的生活，我无法弄清楚它是什么。

这是监视窗口的外观和我的调试设置的几个屏幕截图。顺便说一句，我尝试将我的设置重置为出厂设置，并打开和关闭 IntelliTrace。

![观察窗口](../Images/1f152db76554a222d326b322f732acd9.png)![调试器设置 1](../Images/745cdcf7ce9619fbdb5bff929e82e5cd.png)![调试器设置 2](../Images/1d6ec1a47839b960ce929c643cb0b939.png)

# data-warehouse - 零售网络的事实星座

> ID：12038527
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:23:55.133
> 
> 标签：data-warehouse

我是数据仓库的新手，我需要为零售店网络设计一个事实星座模式。任何机构都可以建议我一个很好的教程吗？我在网上很少看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:45:24.097

[Data Warehouse Toolkit](https://rads.stackoverflow.com/amzn/click/com/0471200247)是数据仓库的必备读物，包括一整章以零售为例。

# html - 在页面加载后创建的元素上使用微数据

> ID：12038530
> 
> 赞同：1
> 
> 时间：2012-08-20T13:24:00.517
> 
> 标签：html, web, seo, microdata, rich-snippets

我需要将微数据片段添加到页面加载期间由脚本填充的列表中。

我的代码是以一种在我的 html 代码中有基本列表元素的方式编写的，并且在填充列表时它会重复（加载页面时会发生一次）。

我尝试将微数据添加到列表中的每个元素，但是当我使用[谷歌的丰富片段工具](http://www.google.com/webmasters/tools/richsnippets)时，它似乎只读取基本的 html 片段，而不是填充后的整个列表。我在不同的页面上做了完全相同的技巧，它似乎工作正常（意味着我得到一个包含插入数据的视频对象列表）[**编辑**：第二个页面是在服务器端创建的，这就是它工作的原因在上面]。

知道如何解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:26:37.210

作为一般规则，搜索引擎不会读取由 JavaScript 动态创建的内容。因此，您的脚本动态创建的任何内容对 Google 都是不可见的。如果您希望他们索引此内容，您需要创建此内容服务器端。

# ruby-on-rails - 如何将 pdf 文档作为 Ruby on Rails Restful Web 服务响应发送

> ID：12038537
> 
> 赞同：0
> 
> 时间：2012-08-20T13:24:24.867
> 
> 标签：ruby-on-rails, ruby, web-services

我们在 Amazon S3 上拥有所有 pdf 文档，我们正在尝试开发或公开来自 Ruby on Rails 应用程序的 RESTful Web 服务，该应用程序以 Json 格式返回响应。

这里我们面临一个问题，如何发送 pdf 文档作为 Web 服务响应。有人可以帮我吗？

谢谢， 切坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:41:29.353

如果通过 JSON 与您的服务客户交谈对架构至关重要，那么 - 我认为最好的解决方案是发送直接链接到文档，否则阅读 PDF，然后将其流式传输到客户端。

# animation - Monotouch：如何使用 NavigationController.PushViewController 更改视图更改的默认动画

> ID：12038543
> 
> 赞同：1
> 
> 时间：2012-08-20T13:24:53.823
> 
> 标签：animation, xamarin.ios, views, pushviewcontroller

我在我的应用程序中使用 NavigationController 进行导航。当 PushViewController 启动时（someUIViewController,true），它会使用默认动画更改视图（子控制器从右向左移动）。我怎样才能改变这个动画？现在我正在使用这个：

```
this.NavigationController.PushViewController(someUIViewController,true);
        UIView.BeginAnimations(null);
        UIView.SetAnimationDuration(0.4);
        UIView.SetAnimationTransition(UIViewAnimationTransition.FlipFromRight, NavigationController.View,true);
        UIView.CommitAnimations(); 
```

但我仅限于四种 UIViewAnimationTransition 类型。我找到了我需要的（从下到上的视图外观）：

```
this.NavigationController.PushViewController(someUIViewController,true);
        var theAnimation = CABasicAnimation.FromKeyPath("transform.translation.y");
        theAnimation.Duration = 0.3f;
        theAnimation.From = NSNumber.FromFloat(this.View.Frame.Height);
        theAnimation.To = NSNumber.FromFloat(0f);
        NavigationController.View.Layer.AddAnimation(theAnimation, "animate");
        NavigationController.View.Layer.AnimationForKey("animate"); 
```

但是当 CABasicAnimation 启动时，默认动画（从左到右移动到父控制器）也会启动。结果是错误的组合。我怎样才能只运行一个（在 y 上平移）或制作自定义动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T08:42:29.793

Was same problem. There is no normal solution for this. PushViewController is limited by the standard animation(type of UIViewAnimationTransition). If you want to change them, try this:

```
NavigationController.PushViewController(screen, false); 
var theAnimation = CABasicAnimation.FromKeyPath("transform.translation.x"); 
theAnimation.Duration = 0.6f; 
theAnimation.From = NSNumber.FromFloat(-NavigationController.View.Frame.Width); 
theAnimation.To = NSNumber.FromFloat(0f); 
NavigationController.View.Layer.AddAnimation(theAnimation, "animate"); 
NavigationController.View.Layer.AnimationForKey("animate"); 
```

But it is not perfect, try and u see why. Also u can use PresentViewController. It have some other standart animations in UIModalTransitionStyle:

```
this.NavigationController.PresentViewController(new UINavigationController(screen){ 
        ModalTransitionStyle= UIModalTransitionStyle.CoverVertical, 
}, true,null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T08:51:54.473

```
//Allows a UINavigationController to push using a custom animation transition
public static void PushControllerWithTransition(this UINavigationController 
  target, UIViewController controllerToPush, 
  UIViewAnimationOptions transition)
{
  UIView.Transition(target.View, 0.75d, transition, delegate() {
    target.PushViewController(controllerToPush, false);
  }, null);
}

//Allows a UINavigationController to pop a using a custom animation 
public static void PopControllerWithTransition(this UINavigationController 
  target, UIViewAnimationOptions transition)
{
  UIView.Transition(target.View, 0.75d, transition, delegate() {
    target.PopViewControllerAnimated(false);
  }, null);         
} 
```

// 有了这些扩展，在具有翻转动画的控制器之间移动现在就像这样微不足道：

```
//Pushing someController to the top of the stack
NavigationController.PushControllerWithTransition(someController, 
  UIViewAnimationOptions.TransitionFlipFromLeft);

//Popping the current controller off the top of the stack
NavigationController.PopControllerWithTransition(
  UIViewAnimationOptions.TransitionFlipFromRight); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:31:01.630

我相信您需要将对 PushViewController 的调用更改为不设置动画以避免默认动画启动。

this.NavigationController.PushViewController(someUIViewController,true);

应该

this.NavigationController.PushViewController(someUIViewController,false);

# asp.net - MVC4 Ajax 表单：如何显示服务器端验证

> ID：12038544
> 
> 赞同：5
> 
> 时间：2012-08-20T13:24:54.510
> 
> 标签：asp.net, asp.net-mvc-4

我正在使用`@Ajax.BeginForm`辅助方法，它通过 Ajax 将表单数据提交到服务器。当数据到达服务器时，会处理一些服务器端验证并将最终结果传递回浏览器。

我的问题是，我希望在不刷新页面的情况下显示错误。基于此，我发现了很多问题，但它们已经过时了。我想知道是否有一些新方法可以实现这一目标。到目前为止，我发现的最好方法是[使用 jQuery 处理结果](http://blog.janjonas.net/2011-08-09/asp_net-mvc_3-json-result-jquery-ajax-form-validation)。但也许在新的 MVC4 中有一些内置功能如何以更好的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:54:38.937

您的视图应类似于以下内容：

```
<div id="update-this">
@using (Ajax.BeginForm("YourAction", new AjaxOptions { UpdateTargetId = 'update-this' }))
{    
}
</div> 
```

还可以`@Html.ValidationMessageFor(model => model.someField)`在您的字段旁边使用以显示错误消息。

如果有任何错误，在服务器端返回部分视图：

```
public ActionResult YourAction(YourModel yourmodel)
{
    if (ModelState.IsValid)
    {
        // Do what is needed if the data is valid and return something
    }
    return PartialView("DisplayPartial", yourmodel);
} 
```

并在您的模型上使用数据注释使其工作。[（这里](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-validation-to-the-model)有教程。）

# erlang - 使用 Yaws 和 websockets 订阅数据

> ID：12038546
> 
> 赞同：2
> 
> 时间：2012-08-20T13:24:59.687
> 
> 标签：erlang, websocket, yaws

我有一个 gen_server 与几个硬件传感器通话。此设置工作正常。现在我想通过数据的实时可视化来扩展这个系统。我想通过 websockets 将这些数据传递给 web 客户端。

由于我可能有几个“听众”，例如几个人在不同的网络浏览器上可视化这些数据，我正在考虑类似于观察者模式的东西。每次 Web 客户端请求订阅传感器时，都应将其添加到该传感器的利益相关者列表中。一旦新的传感器数据到达，就应该立即将其推送给客户端。

我正在使用 yaws 来快速获取 websocket 功能。我的问题与偏航似乎工作的方式有关。在服务器端，我只在连接时通过`A#arg.clisock`值（例如`#Port<0.2825>`）“看到”客户端。在下面的代码中，我注册`ws_server`以在新数据从客户端输入时接收回调。在这一点之后，偏航似乎只允许我响应进入服务器端的消息。

```
out(A) ->
  CallbackMod = ws_server,
  Opts = [{origin, "http://" ++ (A#arg.headers)#headers.host}],

  {websocket, CallbackMod, Opts}. 
```

这是回调模块的样子：

```
% handle_message(Incoming)
% Incoming :: {text,Msg} | {binary,Msg} | {close, Status, Reason}
handle_message({Type,Data}) ->
  gen_server:cast(?SERVER,{websocket,Data}),
  noreply. 
```

似乎，我无法对消息做出反应，`subscribe <sensor>`并且（在连接时间之后）动态地将这个利益相关者添加到观察者列表中。

如何使用 yaws 服务器完成向客户端异步推送数据*以及*在会话期间添加和删除我想收听的传感器。`handle_message/2`基本上最简单的方法是如果 yaws 可以用第一个参数回调`From`。否则我需要添加一个 ref 以在双方都保留一个 ref 并每次将其发送到服务器，看起来我需要保留该信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:54:06.387

当客户端启动 websocket 连接时，Yaws 将启动一个新的 gen_server 进程来处理客户端和服务器之间的所有通信。gen_server 将所有客户端发送的消息分派给您的回调函数`handle_message/1`，因此它不仅仅用于初始连接。

此外，gen_server 进程用于将数据从服务器推送到客户端 - 使用该`yaws_api:websocket_send(Pid, {Type, Data})`功能。`Pid`参数是websocket gen_server 的pid 。您的回调模块可以更改为：

```
handle_message({Type,Data}) ->
      gen_server:cast(?SERVER,{self(), Data}),
      noreply. 
```

这为您的服务器提供了要与`yaws_api:websocket_send/2`. 该`Data`参数包含客户端请求，需要由您的服务器解析以检查传感器订阅请求并将 websocket pid 与适当的传感器相关联。

# c# - 如何让两个应用程序通过 LAN 找到并连接？

> ID：12038554
> 
> 赞同：1
> 
> 时间：2012-08-20T13:25:27.833
> 
> 标签：c#, .net, winapi, sockets, lan

我需要扫描 LAN 以查找正在运行的类似应用程序，然后在它们之间建立连接，以便在它们之间交换一些命令。我用 C# 编写代码。到目前为止，我发现的唯一方法是生成 IP 并 ping 它们……但这需要太多时间。有更快的方法吗？也许它可以通过 WIN_API 完成，然后用 C# [DllImport("..")] 外部方法包装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:32:28.403

您可以使用 UDP 广播您的存在，以便其他应用程序可以听到您的声音并与您建立套接字以进行进一步的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:50:49.667

如果您添加“集合点”或“发现”服务器，这会变得容易得多。它可以非常简单 - 添加/删除“活动客户端”IP 和查询客户端列表是基本功能。如果您有一个中央数据库，客户端可以直接访问您根本不需要任何“服务器”代码 - 只需一个“活动客户端”表。

# php - PHP时间戳到DateTime

> ID：12038558
> 
> 赞同：111
> 
> 时间：2012-08-20T13:25:42.510
> 
> 标签：php, date, datetime, date-format, time-format

您知道如何将其转换为 strtotime 或类似类型的值以传递给**DateTime**对象吗？

我的日期：

```
Mon, 12 Dec 2011 21:17:52 +0000 
```

我试过的：

```
$time = substr($item->pubDate, -14);
$date = substr($item->pubDate, 0, strlen($time));

$dtm = new DateTime(strtotime($time));
$dtm->setTimezone(new DateTimeZone(ADMIN_TIMEZONE));
$date = $dtm->format('D, M dS');
$time = $dtm->format('g:i a'); 
```

以上不正确。如果我遍历很多不同的日期，它都是相同的日期。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-08-20T13:57:11.190

您不需要将字符串转换为时间戳来创建`DateTime`对象（事实上，正如您所知，它的构造函数甚至不允许您这样做）。您可以简单地将日期字符串按`DateTime`原样输入构造函数：

```
// Assuming $item->pubDate is "Mon, 12 Dec 2011 21:17:52 +0000"
$dt = new DateTime($item->pubDate); 
```

话虽如此，如果您确实希望使用时间戳而不是字符串，则可以使用[`DateTime::setTimestamp()`](http://us3.php.net/manual/en/datetime.settimestamp.php)：

```
$timestamp = strtotime('Mon, 12 Dec 2011 21:17:52 +0000');
$dt = new DateTime();
$dt->setTimestamp($timestamp); 
```

**编辑（2014-05-07）：**

我当时实际上并没有意识到这一点，但`DateTime`构造函数*确实*支持直接从时间戳创建实例。根据[此文档](http://www.php.net/manual/en/datetime.formats.compound.php)，您需要做的就是在时间戳前面加上一个`@`字符：

```
$timestamp = strtotime('Mon, 12 Dec 2011 21:17:52 +0000');
$dt = new DateTime('@' . $timestamp); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-02-20T16:28:52.630

虽然[@drrcknlsn](https://stackoverflow.com/users/915064/drrcknlsn)断言有多种方法可以将时间字符串转换为数据时间是正确的，但重要的是要认识到这些不同的方法不会以相同的方式处理时区。

* * *

### 选项1 ：`DateTime('@' . $timestamp)`

考虑以下代码：

```
date_format(date_create('@'. strtotime('Mon, 12 Dec 2011 21:17:52 +0800')), 'c'); 
```

该`strtotime`位消除了时区信息，`date_create`函数假定为 GMT ( `Europe/Brussels`)。

因此，无论我在哪个服务器上运行，输出都将如下：

```
2011-12-12T13:17:52+00:00 
```

* * *

### 选项 2：`date_create()->setTimestamp($timestamp)`

考虑以下代码：

```
date_format(date_create()->setTimestamp(strtotime('Mon, 12 Dec 2011 21:17:52 +0800')), 'c'); 
```

您可能期望这会产生相同的输出。但是，如果我从比利时服务器执行此代码，我会得到以下输出：

```
2011-12-12T14:17:52+01:00 
```

与`date_create`函数不同，该`setTimestamp`方法假定服务器的时区（`'Europe/Brussels'`在我的情况下）而不是 GMT。

* * *

### 明确设置您的时区

如果要确保输出与输入的时区匹配，最好明确设置。

考虑以下代码：

```
date_format(date_create('@'. strtotime('Mon, 12 Dec 2011 21:17:52 +0800'))->setTimezone(new DateTimeZone('Asia/Hong_Kong')), 'c') 
```

现在，还要考虑以下代码：

```
date_format(date_create()->setTimestamp(strtotime('Mon, 12 Dec 2011 21:17:52 +0800'))->setTimezone(new DateTimeZone('Asia/Hong_Kong')), 'c') 
```

因为我们明确设置输出的时区以匹配输入的时区，所以两者都将创建相同（正确）的输出：

```
2011-12-12T21:17:52+08:00 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2017-09-10T07:05:52.570

可能最简单的解决方案就是：

```
DateTime::createFromFormat('U', $timeStamp); 
```

其中“U”表示 Unix 纪元。请参阅文档： http: [//php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-17T13:59:34.333

这是我的解决方案：

```
 function changeDateTimezone($date, $from='UTC', $to='Asia/Tehran', $targetFormat="Y-m-d H:i:s")
    {
        $date = new DateTime($date, new DateTimeZone($from));
        $date->setTimeZone(new DateTimeZone($to));
        return $date->format($targetFormat);
    } 
```

# php - 为什么我的加载滚动不起作用，是ajax调用吗？

> ID：12038560
> 
> 赞同：1
> 
> 时间：2012-08-20T13:25:44.333
> 
> 标签：php, ajax, jquery-ui

计划是在页面内添加一个带有加载滚动条的滚动条。2 个问题：我的加载滚动不起作用 & 我不确定是否应该使用 iframe 来实现加载滚动。主要是因为我的 div 中有一个 jQuery 可排序的、可放置的，并且不确定我是否可以拖到 iframe 之外。任何想法，将不胜感激

```
$(#win).scroll(function(){
//replaced window with #win, which is the id of the div containg database info
    if($(this)[0].scrollTop() == $(this)[0].height()- $(this).height()){

        //everytime we scroll we have this function activated
    //if statement is saying if we're at the bottom of the page
        //$('div#text').hide();
        $('div#loadMoreComments').show();
    //.show is showing the div above which has the loading animation

    $.ajax({
    url: "loadem.php?lastComment="+ $(".postedComment:last").attr("id"),
     //using get variable to say last comment is equal to + posted 
    //comment which is the last comment that's displayed &
    //that last comment has an id 
    success: function(html){
        if (html){
            $("#postedComment").append(html);
            //if we are at the bottom we will add comments to the page
            //and hide the animation
            $('div#loadMoreComments').hide();
            //$('div#text').show();

        }else{
            $('div#loadMoreComments').replaceWith("<div class='box'><center>Finished Loading</center></div>");
        //if theres no more to scroll then the finished loading will show
        }
    }
    });

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:10:12.993

```
if((jQuery(window).scrollTop()) > (jQuery(document).height() - jQuery(window).height()))
{
 ...... YOUR CODE IS HERE.....
} 
```

此代码将用于您页面的连续分页。就我而言，它不会影响可排序、可放置的原因，因为您说分页 div 已经覆盖了所有子元素。

希望这会有所帮助。

# php - 如何将 onclick 事件与 drupal 字段集一起使用？

> ID：12038561
> 
> 赞同：0
> 
> 时间：2012-08-20T13:25:53.793
> 
> 标签：php, drupal, onclick, fieldset

在drupal中，我生成了一个列表，其中每个项目都是一个可折叠的字段集，可以包含额外的信息。

由于列表相当大，我想避免在用户单击字段集之前加载额外信息。

最佳情况：

*   用户单击折叠的字段集。
*   Fieldset 加载额外的信息。
*   字段集展开。

提前谢谢。

编辑：

这是我当前代码的一部分：

```
$form[$service["name"]] = array(
    '#type' => 'fieldset',
    '#title' => t($titleBuilder),
    '#collapsible' => TRUE,
    '#collapsed' => TRUE,
    '#tree' => TRUE,
); 
```

我认为您应该可以添加以下行：

```
 '#onclick' => "testCapa()", 
```

但这不起作用，浏览器会加载一个空白页面。

EDIT2：试过这个：

```
 '#attributes' => array("onclick" => "testCapa()"), 
```

而不是加载一个空白页面，我的块现在加载了。但是当我单击字段集时，不会调用 testCapa()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T09:26:30.897

我正在回复这个，所以我有自己的参考（因为我失去了一些美好的时光）。#attributes 中的单击不起作用，因为 Drupal 的 collapse.js 更改了 DOM，并且用户实际上单击了字段集图例内的 A 标记（而不是字段集本身）。

对于 Drupal 6，我实现它的方式是这样的：

```
Drupal.toggleFieldsetOriginal = Drupal.toggleFieldset
Drupal.toggleFieldset = function(fieldset) {
  $(fieldset).trigger("beforeCollapse")
  Drupal.toggleFieldsetOriginal(fieldset)  
}

$(function() {
  $("fieldset.collapsible").bind("beforeCollapse", function(e) {
    if ($(this).hasClass("collapsed"))
      alert("Fieldset is closed and will be open")
    else 
      alert("Fieldset is open and will be closed")
  })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:13:57.690

试试这个代码：

```
 '#attributes' => array("onclick" => "testCapa()"), 
```

# haskell - 如何使折叠基于类别执行多次折叠

> ID：12038562
> 
> 赞同：4
> 
> 时间：2012-08-20T13:25:53.943
> 
> 标签：haskell, fold

我可以将什么运算符传递给允许我在元组列表中对按元组项 1 分组的元组项 2 进行求和的折叠变体之一？

所以，假设我有清单：

```
[ ('A', 1) , ('A', 3) , ('B', 4 ) , ('C', 10) , ('C', 1) ] 
```

我想制作清单：

```
[ ('A', 4) , ('B', 4) , ('C', 11) ] 
```

你可以看到它是一个 Haskell 化的表，所以这里的表的实际表示并不重要；这是获取输入数据并生成我感兴趣的输出的方法。我是 Haskell 新手，具有 C/C++/C# 的背景。我已经完成了足够多的教程来识别此处折叠的应用，但无法弄清楚似乎需要的子折叠。

编辑：如果这对其他人有帮助，这是我使用 group、foldl1 和 map 的解决方案，灵感来自 ingo 的回复：

```
import qualified Data.List as List

mygroup :: [ (Char,Int) ] -> [ [(Char,Int)] ]
mygroup = List.groupBy (\x y -> fst x == fst y) 

myfold :: [(Char,Int)] -> (Char,Int)
myfold = foldl1 (\x y -> (fst x, snd x + snd y))

mysum :: [(Char,Int)] -> [(Char,Int)]
mysum = map myfold . mygroup 
```

运行时：

```
*ListSum> mysum [ ('A',1) , ('A',2) , ('B',3) , ('C',4) , ('C',5) ]
[('A',3),('B',3),('C',9)] 
```

**mygroup**通过提供等价运算符展示了如何创建组。它表示如果两个成员的第一个元组项相同，则两个成员在同一个组中。

**myfold**展示了如何对两个元组求和。它使用列表中的第一个元组作为折叠的初始状态，并根据每个元组的第二项之和组成一个结果元组。

**mysum**使用 map 组合这两个函数。

我可能会花更多的时间来看看我是否可以打破对数据模式的依赖，目前是**[(Char,Int)]**。我认为这意味着提供 groupBy 运算符和 fold 运算符，并且可能只是组合 groupBy、foldl1 和 map 的练习。我是新来的。

我是否会因无积分而获得任何积分？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:40:49.433

您真正想要的是使用特定标准对项目进行分组，然后将这些组折叠起来。

实现您给出的示例的最简单方法是使用关联映射 from`Data.Map`对项目进行分组。

```
import qualified Data.Map as Map

sumGroups :: [(Char, Int)] -> [(Char, Int)]
sumGroups = Map.assocs . Map.fromListWith (+) 
```

这使用该函数[`fromListWith`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#v%3afromListWith)来组合具有相同键的项目，并将生成的映射转换回带有[`assocs`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#v%3aassocs).

```
*Main> sumGroups [ ('A', 1) , ('A', 3) , ('B', 4 ) , ('C', 10) , ('C', 1) ]
[('A',4),('B',4),('C',11)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:34:58.303

无意义的乐趣：

```
import Data.List
import Data.Function
import Control.Arrow

sumGroups = map (fst . head &&& sum . map snd) . groupBy ((==) `on` fst) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T13:55:05.697

从概念上讲，您需要两个步骤：

```
transform [('A', 1) , ('A', 3) , ('B', 4 ) , ('C', 10) , ('C', 1)]
to [('A', [1,3,4]), ('C', [10, 1])]
and further to [('A', 8), ('C', 11)] 
```

对您有帮助的函数：groupBy、using、fst、map、sum

# android - .xml 文件中的 android 和 android2 字段有什么区别？

> ID：12038563
> 
> 赞同：3
> 
> 时间：2012-08-20T13:25:56.720
> 
> 标签：android, android-xml

我有这个问题，因为 android（看似）在某些情况下任意使用“android2:...”，而在其他情况下使用“android:...”。这两者有什么区别吗？此外，当使用“android2:..”时，eclipse 的自动完成功能不起作用，这可以证明是令人讨厌的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:28:41.227

`android`在这种情况下`xmlns:android="http://schemas.android.com/apk/res/android`只是绑定一个命名空间。您可以命名它`xmlns:iphone="http://schemas.android.com/apk/res/android`，然后像引用它一样引用它`iphone:layout_width`，它仍然可以工作。

你在哪里见过`android2`用过的？我从来没有见过。

# javascript - 客户端点击后找出复选框的值

> ID：12038569
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:26:16.243
> 
> 标签：javascript, jquery

客户端单击后如何获取复选框的值。

有了这个，它总是返回页面上加载的值，但是如果客户端更改它，那么它不会反映更改？谢谢

```
var isChecked = $('#chkSelect').is(':checked'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:30:27.847

你需要监听一个`change`事件：

## *[jsFiddle 演示](http://jsfiddle.net/8ZmY9/1/)*

```
$('#chkSelect').change(function(){
   // use this one if you need the object value
   var isChecked = $('#chkSelect:checked').val();       // returns value: on / undefined
   // or this one if you need a boolean value
   var bool_isChecked = $('#chkSelect').is(':checked'); // returns boolean: true / false

   alert(isChecked +' '+ bool_isChecked);               // test the vars result
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:31:05.767

```
$('#chkSelect').change(function(){
var isChecked = $('#chkSelect').is(':checked');
}
); 
```

更推荐使用复选框的更改处理程序，然后使用`.click()`作为复选框的状态可以更改而无需单击它。上面的脚本将`isChecked`在每次更改时更新变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:31:09.857

那是因为您没有将代码附加到事件中。当用户单击这样的复选框时，您可以添加代码块

```
$('#chkSelect').click(function(){
     var isChecked = $(this).is(':checked');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T13:31:18.503

那里没有点击处理程序。您必须更新 onclick：

```
$(document).ready(function(){
    var $chkSelect = $('#chkSelect'),
        isChecked = $chkSelect.is(':checked');

    $chkSelect.click(function(){
        isChecked = $chkSelect.is(':checked');
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T13:43:05.337

当客户端更改值时，您需要通过事件处理程序 .click() .change() 等来捕获它。

因此，您需要添加一个事件处理程序，该处理程序接受一个函数作为其参数，该函数将在报告事件后负责执行一些操作（在您的情况下更新变量 isChecked）

假设您的复选框 id 是 myChkbx

```
$("#myChkbx").change(function(){
  isChecked = $(this).is(':checked'); // will return true/false depending on the state
}); 
```

此外，如果您通过 input 元素的 value 属性在复选框中存储某些值，则这不会为您提供复选框的“值”，例如`value="some value"` 您需要

```
$("#myChkbx").change(function(){
  isChecked = $(this).val(); // will return the value regardless if checked or not
}); 
```

[你可以在这个小提琴](http://jsfiddle.net/jggVd/)中尝试一下

# php - Wordpress 简码中的和号

> ID：12038570
> 
> 赞同：1
> 
> 时间：2012-08-20T13:26:18.557
> 
> 标签：php, html, wordpress, function, shortcode

我为 wordpress 制作了一个简码，functions.php 中的代码如下所示：

```
return '<div class="video-shortcode"><iframe width="600" height="365" src="/watch.php?file=' . $atts['file'] . '&img=' . $atts['img'] . '" frameborder="0" scrolling="no" allowfullscreen></iframe></div>'; 
```

当我使用它时，帖子中的源代码应如下所示：

```
<iframe width="600" height="365" src="/watch.php?file=myfile.mp4&img=myimg.jpg" frameborder="0" scrolling="no" allowfullscreen></iframe> 
```

但由于某种原因，“img”之前的 & 符号如下所示：

```
&#038; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:24:20.190

对于要解决的类似问题，您可以使用php 的[html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php)函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T07:03:35.023

我遇到了类似的问题。几乎没有什么事情不会破坏基本的 Wordpress 功能。要打破基本的 WP 功能，请参阅[此答案](https://stackoverflow.com/questions/5605122/how-to-forbidden-wordpress-url-exchange-to-038)。对于“正确”的答案，请参阅[此答案](https://stackoverflow.com/questions/9824659/iframe-and-url-with-amp-ampersand)。我成功地使用了后者。

基本上`&amp;`不使用其他 html 实体，因为这被认为是正确的 XML，并由浏览器在 iFrame 标记中解析。

# multithreading - 尝试通过 RMI 通信时卡在 weblogic 中的线程

> ID：12038574
> 
> 赞同：1
> 
> 时间：2012-08-20T13:26:41.430
> 
> 标签：multithreading, weblogic, rmi

我们的应用程序在一个 8 节点 Weblogic 集群中运行，并试图与 RMI 服务器通信。由于 RMI 服务器中的错误，执行此操作的线程会卡住。我们正在尝试解决这个问题，但问题是在那之前，卡住的线程会减慢应用程序的速度，最终导致整个集群瘫痪。

我的问题是“我们如何从客户端确保线程被释放？”

任何帮助是极大的赞赏。

实施细节： - Weblogic 10.0MP2，8 个节点的集群 - Java 1.5

线程转储片段：

```
"[STUCK] ExecuteThread: '15' for queue: 'weblogic.kernel.Default (self-tuning)'" daemon prio=3 tid=0x03808610 nid=0x1c9 runnable [0
x3ed4e000..0x3ed4faf0]
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:235)
        - locked <0xa0a515a0> (a java.io.BufferedInputStream)
        at java.io.DataInputStream.readByte(DataInputStream.java:241)
        at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:189)
        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:126)
        at com.kpno.in.iac.CustomerBridge.CustomerBridge.RemoteDecorator_Stub.sendMessage(Unknown Source)
        at com.kpno.in.iac.CustomerBridge.RMIServer.CustomerBridgeProxy.sendMessage(Unknown Source) 
```

应用程序片段（反编译）：

```
public final class RemoteDecorator_Stub extends RemoteStub
  implements ...
{
  ...

  public Map sendMessage(String paramString1, String paramString2, Map paramMap)
    throws InvalidActionException, ProcessingException, PropagationException, ResponseException, TimeoutException, RemoteException
  {
    try
    {
      Object localObject = this.ref.invoke(this, $method_sendMessage_2, new Object[] { paramString1, paramString2, paramMap }, 6494150482049562645L);
      return (Map)localObject;
    }
    catch ... 
```

更新

我试图让它与 Tolis 提议的 JNDI 查找一起工作，但直到现在我还没有成功。我想知道网址应该是什么。从 RMI 命名中检索如下： java.rmi.Naming.lookup("//host:port/FactoryObject")

如何将其翻译为 JNDI url？我已经尝试使用 t3 作为协议并使用 iiop。没有任何效果。我总是得到一个命名异常。

在 t3 的情况下，我得到这个异常：[Root exception is java.net.ConnectException: t3://host:port: Destination unreachable; 嵌套异常是：java.io.IOException: Empty server reply；目的地没有可用的路由器]

如果是 iiop，我会收到此异常：javax.naming.CommunicationException：无法连接到 ORB [根异常是 org.omg.CORBA.COMM_FAILURE：vmcid：SUN 次要代码：201 已完成：否]

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:19:11.520

您可以使用**weblogic.rmi.clientTimeout**设置以避免目标服务器遇到问题时出现线程卡住的情况。

**编辑：**

当您尝试从套接字读取并且您没有从服务器获得任何响应时，另一个有用的解决方案如下：

RMI 运行时使用 RMISocketFactory 实例来获取 RMI 调用的客户端和服务器套接字。应用程序可以使用 setSocketFactory 方法来请求 RMI 运行时使用其套接字工厂实例而不是默认实现。

实现示例：

```
RMISocketFactory.setSocketFactory(new RMISocketFactory()
{
    public Socket createSocket(String host, int port) throws IOException {
        Socket s = new Socket();
        s.setSoTimeout(timeoutInMilliseconds);
        s.setSoLinger(false, 0);
        s.connect(new InetSocketAddress(host, port), timeoutInMilliseconds);
        return s;
    }

    public ServerSocket createServerSocket(int port) throws IOException {
        return new ServerSocket(port);
    }
}); 
```

setSocketFactory 设置 RMI 从中获取套接字的全局套接字工厂。

# android - 如何根据 Android 版本应用主题

> ID：12038579
> 
> 赞同：3
> 
> 时间：2012-08-20T13:26:59.000
> 
> 标签：android, themes

目前我在`AndroidManifest.xml`文件中指定了一个主题：

```
android:theme="@android:style/Theme.Holo.Light" 
```

现在我正在努力创建向后兼容的应用程序。只要 Gingerbread 没有`Theme.Holo.Light`我就会使用`Theme.Light`但如何根据操作系统版本应用所需的主题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:30:54.287

为您的值文件夹使用资源限定符：

例如`res/values-v11`

`Theme.Light`在标准中有你的风格参考`res/values/styles.xml`，然后`Theme.Holo.Light`在`res/values-v11/styles.xml`. 如果它在 API 11+ 上运行，它将自动选择 Holo；否则，它将回退到 中`Theme.Light`指定的标准`res/values/styles.xml`。

# php - 如何使用 PHP 将 HTML 表单数据传递给 MYSQL 数据库并将数据返回给浏览器

> ID：12038586
> 
> 赞同：1
> 
> 时间：2012-08-20T13:27:28.077
> 
> 标签：php, mysql, html, forms

我正在尝试使用`PHP`将 HTML 表单数据传递给`MYSQL`数据库并将数据返回给浏览器。通过提交检查权限 ( `M1`, `M2`,`MN1` ..），我想显示拥有这些权限的教师的姓名。现在，请告诉我代码有什么问题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head><body>
<form action="akcja.php" method="post">    
<br /><br /><br />
<table>
<tr><th><br/><input type="checkbox" id="check" name="M1" value="M1,">m1</th> 
<th><br/><center><input type="checkbox" id="check" name="M2" value="M2,">m2</center></th> 
<th><br/><center><input type="checkbox" id="check" name="MN1" value="MN1,"> mn1    </center></th> </tr></table>
<input type="submit" name="submit" value="Search Database" />
</form>
</body>
</html>

<?php
$query = mysql_query("SELECT * FROM permissions WHERE m LIKE '".$_POST['M1']."' OR m LIKE '".$_POST['M2']."' OR mn LIKE '".$_POST['MN1']."' ");  
if($query)
    while($permissions = mysql_fetch_assoc($query)){
        $query2 = mysql_query("SELECT name_surname FROM instruktorzy WHERE instruktor_id='".$permissions['instruktor_id']."'");  
        while($Mdwa = mysql_fetch_assoc($query2)){
            echo "<p style=\"font-size: 14px; font-family: Helvetica; background-color: #FFFFFF\"> ".$Mdwa['name_surname']."<br />" ; "</p>" ;
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:05:22.210

这就是我看到的一种更简洁的代码定位方式。我应该注意到，这只是在没有任何工具的情况下快速拍打在一起，所以不要复制和粘贴。

```
$connection = new PDO('mysql:host=localhost;dbname=db', 'awesome_user', 'love123',
array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''));

$query_obj = $connection->prepare("SELECT permissions.*, instruktorzy.name_surname 
    FROM permissions 
    LEFT JOIN instruktorzy ON instruktorzy.instruktor_id = permissions.instruktor_id  
    WHERE permissions.m IN (:m1, :m2) OR permissions.mn LIKE :mn1 LIMIT 100");
$query_obj->setFetchMode(PDO::FETCH_ASSOC);

// You will need something a little more complex here to deal with missing data, 
// I am just putting in what is required to get it working if the 
// entire $_POST is set
$query_obj->bindValue(':m1', isset($_POST['M1']) ? $_POST['M1'] : null);
$query_obj->bindValue(':m2', isset($_POST['M2']) ? $_POST['M2'] : null);
$query_obj->bindValue(':mn1', isset($_POST['MN1']) ? $_POST['MN1'] : null);

$query_obj->execute();

foreach($query_obj as $k => $row){
    echo '<p style="font-size: 14px; font-family: Helvetica; 
        background-color: #FFFFFF"> '.$row['name_surname'].'<br /></p>' ;
} 
```

这应该可以帮助您走上编写更好代码的正确轨道；希望。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T13:48:45.390

下面的代码是一种更干净的做事方式。自从我以这种方式使用它已经很长时间了，但它可能会帮助您解决问题，因为这可能是因为您在查询循环中使用了查询循环。（不确定，但如果你像我一样这样做也不会受到伤害。

```
$permissions = Array();
$query = mysql_query("SELECT * FROM permissions WHERE m LIKE '" . $_POST['M1'] . "' OR m LIKE '" . $_POST['M2'] . "' OR mn LIKE '" . $_POST['MN1'] . "' ");
if ($query) {
  while ($row = mysql_fetch_assoc($query)) {
    array_push($permissions, $row);
  }
}
foreach ($permissions AS $key => $permission) {
  $query = mysql_query("SELECT name_surname FROM instruktorzy WHERE instruktor_id='" . $permission['instruktor_id'] . "'");
  if ($query) {
    while ($row = mysql_fetch_assoc($query2)) {
      echo "<p style=\"font-size: 14px; font-family: Helvetica; background-color: #FFFFFF\"> ".$Mdwa['name_surname']."<br />" ; "</p>" ;
    }
  }
} 
```

# git - 为什么 git 先压缩对象，然后接收它们？我认为它应该是相反的

> ID：12038591
> 
> 赞同：3
> 
> 时间：2012-08-20T13:27:46.240
> 
> 标签：git, version-control

```
remote: Counting objects: 666377, done.
remote: Compressing objects: 100% (150501/150501), done.
Receiving objects: 0% (2171/666377), 756.00 KiB | 119 KiB/s 
```

我的怀疑是如何压缩对象，然后再将它们传输到我的电脑？这太不可思议了，因为我们必须先获取文件，然后再压缩它..

那么这是错误顺序的git输出信息的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:41:45.767

Git 试图减少通过（慢速）网络发送到您的 PC 的数据量，因此它会在发送“[松散对象](https://stackoverflow.com/questions/5709687/what-are-the-loose-objects-that-the-git-gui-refers-to)”*之前对其进行压缩。*

请注意，实际上并没有使用像`gzip`. 相反，它通过查看前 50 个变更集中的文件来创建一组最佳补丁。这些（二进制）补丁是代表系统完整状态（包括所有变更集、差异、提交消息等）的最小字节集。

这一步有点贵（当你有很多松散的对象时你会注意到），所以 git 只在必要时执行这一步。

# java - Java 线程优先级没有影响

> ID：12038592
> 
> 赞同：14
> 
> 时间：2012-08-20T13:27:50.290
> 
> 标签：java, windows, multithreading, java-7

这是一个关于线程优先级的测试。代码来自 Thinking in Java p.809

```
import java.util.concurrent.*;

public class SimplePriorities implements Runnable {
    private int countDown = 5;
    private volatile double d; // No optimization
    private int priority;

    public SimplePriorities(int priority) {
        this.priority = priority;
    }

    public String toString() {
        return Thread.currentThread() + ": " + countDown;
    }

    public void run() {
        Thread.currentThread().setPriority(priority);
        while (true) {
            // An expensive, interruptable operation:
            for (int i = 1; i < 10000000; i++) {
                d += (Math.PI + Math.E) / (double) i;
                if (i % 1000 == 0)
                    Thread.yield();
            }
            System.out.println(this);
            if (--countDown == 0)
                return;
        }
    }

    public static void main(String[] args) {
        ExecutorService exec = Executors.newCachedThreadPool();
        for (int i = 0; i < 5; i++)
            exec.execute(new SimplePriorities(Thread.MIN_PRIORITY));
        exec.execute(new SimplePriorities(Thread.MAX_PRIORITY));
        exec.shutdown();
    }
} 
```

我想知道为什么我不能得到像这样的常规结果：

```
Thread[pool-1-thread-6,10,main]: 5 
Thread[pool-1-thread-6,10,main]: 4 
Thread[pool-1-thread-6,10,main]: 3 
Thread[pool-1-thread-6,10,main]: 2 
Thread[pool-1-thread-6,10,main]: 1 
Thread[pool-1-thread-3,1,main]: 5 
Thread[pool-1-thread-2,1,main]: 5 
Thread[pool-1-thread-1,1,main]: 5 
Thread[pool-1-thread-5,1,main]: 5 
Thread[pool-1-thread-4,1,main]: 5 
... 
```

但随机结果（每次我运行它都会改变）：

```
Thread[pool-1-thread-2,1,main]: 5
Thread[pool-1-thread-3,1,main]: 5
Thread[pool-1-thread-4,1,main]: 5
Thread[pool-1-thread-2,1,main]: 4
Thread[pool-1-thread-3,1,main]: 4
Thread[pool-1-thread-1,1,main]: 5
Thread[pool-1-thread-6,10,main]: 5
Thread[pool-1-thread-5,1,main]: 5
... 
```

我使用 i3-2350M 2C4T CPU 和 Win 7 64 位 JDK 7。这有关系吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T13:34:26.847

> Java 线程优先级没有影响

线程优先级是高度特定于操作系统的，并且在许多操作系统上通常影响很小。优先级仅有助于对运行队列中的线程进行排序，并且不会改变线程以任何主要方式运行的频率，除非您在每个线程中执行大量 CPU。

您的程序看起来使用大量 CPU，但除非您的内核数少于线程数，否则通过设置线程优先级您可能看不到输出顺序的任何变化。如果有空闲 CPU，那么即使是较低优先级的线程也会被调度运行。

此外，线程永远不会饿死。在这种情况下，即使是较低优先级的线程也会有时间经常运行。您应该看到较高优先级的线程被给予时间片以*更频繁*地运行，但这并不意味着较低优先级的线程将等待它们完成后再运行自己。

即使优先级确实有助于为一个线程提供比其他线程更多的 CPU，线程程序也会受到[竞争条件](http://en.wikipedia.org/wiki/Race_condition)的影响，这有助于为其执行注入大量随机性。`0`然而，您应该看到的是，最大优先级线程比其他线程更有可能更频繁地吐出它的消息。如果您将优先级添加到`println()`，这应该在多次运行后变得明显。

同样重要的是要注意编写 IO`System.out.println(...)`的`synchronized`方法，这将极大地影响线程的交互方式以及不同的线程相互阻塞的方式。此外，`Thread.yield();`取决于操作系统如何进行线程调度，它可以是无操作的。

> 但随机结果（每次我运行它都会改变）：

正确的。线程程序的输出很少是“完美的”，因为根据定义，线程是异步运行的。我们希望输出是随机的，因为我们希望线程彼此独立地并行运行。这就是他们的力量。如果您期望一些精确的输出，那么您不应该使用线程。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-20T13:34:50.200

线程优先级取决于实现。特别是在 Windows 中：

> 当所有线程都在竞争 CPU 时，线程优先级不是很有意义。（[来源](http://www.javamex.com/tutorials/threads/priority_what.shtml)）

《Java Concurrency in Practice》一书还说

> 避免使用线程优先级的诱惑，因为它们会增加平台依赖性并可能导致活性问题。大多数并发应用程序可以为所有线程使用默认优先级。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-20T13:38:25.860

Thread priority does not guarantee execution order. It comes into play when resources are limited. If the System is running into constraints due to memory or CPU, then the higher priority threads will run first. Assuming that you have sufficient system resources (which I would assume so for a simple program and the system resources you posted), then you will not have any system constraints. Here is a blog post (not my post) I found that provides more information about it: [Why Thread Priority Rarely Matters](http://vanillajava.blogspot.com/2011/09/why-thread-priority-rarely-matters.html#!/2011/09/why-thread-priority-rarely-matters.html).

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-19T10:42:36.923

让我们保持简单，直接进入源...

> 每个线程都有一个优先级。当存在处理资源竞争时，优先级较高的线程通常优先于优先级较低的线程执行。**然而，这种偏好并不能保证最高优先级的线程将始终运行**，并且线程优先级不能用于可靠地实现互斥。

*   来自*Java 语言规范（第 2 版）第*445 页。

还 ...

> 尽管 Java 中存在线程优先级，并且许多参考文献指出 JVM 将始终选择最高优先级线程之一进行调度 [52, 56, 89]，但目前 Java 语言或虚拟机规范无法保证这一点 [53, 90] . **优先级只是对调度程序的提示**[127，第 227 页]。

*   摘自*测试并发 Java 组件（博士论文，2005 年）* p。62.

*   参考 127，第 227 页（摘自上面的节选）来自*组件软件：超越面向对象的编程（C. Szyperski 着），Addison Wesley，1998。*

简而言之，**不要依赖线程优先级**。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-20T13:34:38.083

线程优先级只是对 OS 任务调度程序的提示。任务调度器只会*尝试*将更多资源分配给具有更高优先级的线程，但是没有明确的保证。

事实上，它不仅与 Java 或 JVM 有关。大多数非实时操作系统仅以暗示方式使用线程优先级（托管或非托管）。

Jeff Atwood 有一篇关于该主题的好帖子：“ [Thread Priorities are Evil](http://www.codinghorror.com/blog/2006/08/thread-priorities-are-evil.html) ”

> 这就是问题所在。如果有人开始在较低优先级线程（生产者）上使“cond”为真的工作，然后程序的时间安排使得发出此旋转的较高优先级线程（消费者）被调度，消费者将完全饿死制片人。这是一场经典的比赛。即使那里有一个明确的睡眠，发出它也不允许生产者被安排，因为它的优先级较低。消费者将永远旋转，除非空闲 CPU 开放，否则生产者将永远不会生产。哎呀！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-19T07:13:34.173

正如其他答案中提到的，线程优先级更像是一个提示，而不是严格规则的定义。

也就是说，即使以严格（更）的方式考虑优先级，您的测试设置也不会导致您描述为“预期”的结果。您首先创建 5 个具有同等低优先级的线程和一个具有高优先级的线程。

*   您使用的 CPU (i3) 有 4 个本机线程。因此，即使高优先级意味着线程不间断地运行（这是不正确的），低优先级线程将获得 3/4 的 CPU 功率（假设没有其他任务正在运行）。此 CPU 功率分配给 5 个线程，因此低优先级线程将以 4 * 3/4 * 1/5 = 高优先级线程速度的 3/5 倍运行。高优先级线程完成后，低优先级线程以高优先级线程的 4/5 速度运行。

*   您在高优先级线程之前启动低优先级线程。因此他们开始得早一点。我希望在大多数系统中，“优先级”不会实现到纳秒级。所以操作系统将允许一个线程运行“稍长一点”，直到它切换到另一个线程（以减少切换成本的影响）。因此，结果很大程度上取决于如何实现切换以及任务有多大。如果任务很小，则可能不会发生切换，并且在您的示例中，所有低优先级线程都首先完成。

*   这些计算假设高优先级和低优先级被解释为极端情况。事实上，优先级更像是“在 m 例中的 n 例中更喜欢这个”，带有变量 n 和 m。

*   您的代码中有一个 Thread.yield ！这会将执行传递给另一个线程。如果你这样做太频繁，它将导致所有线程获得相同的 CPU 能力。

因此，我不希望您在问题中提到的输出，即高优先级线程首先完成，然后低优先级线程完成。

确实：使用 Thread.yield 行，我得到每个线程获得相同 CPU 时间的结果。如果没有 Thread.yield 行并将计算次数增加 10 倍并将低优先级线程的数量增加 10 倍，我得到了预期的结果，即高优先级线程提前完成了一些因素（其中取决于本机 CPU 线程的数量）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-19T07:27:52.810

需要考虑的几件事：

*   线程优先级是邪恶的，在大多数情况下不应使用它们：http: [//www.codinghorror.com/blog/2006/08/thread-priorities-are-evil.htmll](http://www.codinghorror.com/blog/2006/08/thread-priorities-are-evil.htmll)

*   你明确地屈服了，这可能使你的测试无效

*   你检查过生成的字节码吗？您确定您的`volatile`变量的行为符合您的预期吗？[对 volatile 变量可能仍会发生重新排序](http://en.wikipedia.org/wiki/Volatile_variable#In_Java)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-20T19:27:42.953

线程优先级是一个提示（可以忽略），当您拥有 100% 的 CPU 时，操作系统知道您希望优先使用某些线程而不是其他线程。线程优先级必须在线程启动之前设置，否则可以忽略。

在 Windows 上，您必须是管理员才能设置线程优先级。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-20T13:32:25.130

我相信操作系统可以随意忽略 Java 线程优先级。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-28T19:34:02.753

您必须了解不同的操作系统以不同的方式处理线程优先级。例如，Windows 使用基于抢占式时间片的调度程序，它为更高优先级的线程提供更大的时间片，而其他一些操作系统（非常旧的操作系统）使用非抢占式调度程序，其中更高优先级的线程完全在低优先级线程之前执行除非更高优先级的线程进入睡眠状态或执行一些 IO 操作等。

这就是为什么不能保证较高优先级线程完全执行的原因，它实际上比低优先级线程执行的时间更长，这就是为什么您的输出以这种方式排序的原因。

要了解 Windows 如何处理多线程，请参阅以下链接：

[https://docs.microsoft.com/en-us/windows/win32/procthread/multitasking](https://docs.microsoft.com/en-us/windows/win32/procthread/multitasking)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-16T14:55:48.140

高优先级线程在完成之前不会停止低优先级线程。高优先级也不能使某些东西更快，如果确实如此，我们总是将所有东西都设为高优先级。低优先级不会让事情变慢，否则我们永远不会使用它。

据我了解，您误解了系统的其余部分应该空闲，只让最高优先级的线程工作，而系统的其余容量被浪费。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-30T04:08:44.877

某些操作系统没有为线程优先级提供适当的支持。

# c++ - 如何使用样式表设置 QGraphicsScene 的背景画笔

> ID：12038594
> 
> 赞同：0
> 
> 时间：2012-08-20T13:28:05.617
> 
> 标签：c++, qt, stylesheet, qgraphicsscene

是否可以使用 Qt 样式表设置 QGraphicsScene 的背景画笔？我试过了

```
QGraphicsScene {
background-color: #f00;
} 
```

但它不起作用。是否可以在 Qt Graphics View 框架中使用样式表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:05:15.510

相反，您可能正在寻找的是

```
QGraphicsView {
background-color: #f00;
} 
```

# c - 函数已在 C 中定义错误

> ID：12038596
> 
> 赞同：0
> 
> 时间：2012-08-20T13:28:17.037
> 
> 标签：c

我有`helper.h`一个需要包含的头文件`main1.c`，`main2.c`因此我`helper.h`在两个文件中都包含了文件（没有包含我收到错误），但我仍然收到错误，其中的函数`helper.h`已经定义。如何使用#ifndef 消除此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:31:40.797

这表明您已经在标题中*定义*了一个函数，即实现了它。你不能这样做，你应该只有声明，即*原型*。

添加一个`helper.c`实现这些功能的新 C 文件。

然后编译每个 C 文件并将它们链接在一起（`main1.o`+`helper.o`和`main2.o`+ `helper.o`）以形成两个程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:35:48.373

在 helper.h 文件中，在开始时添加以下行

```
#ifndef HELPER_H
#define HELPER_H 
```

我希望这能解决你的问题。

# icons - 下载 Foursquare 场地图标

> ID：12038597
> 
> 赞同：1
> 
> 时间：2012-08-20T13:28:30.203
> 
> 标签：icons, foursquare

我想开发一个带有地图的 iPhone 应用程序，该应用程序用场地图标为四方场地提供鞋子。为了提高性能，我会将场地图标存储在我的应用程序中。我很清楚，这不是最好的方法。但是如果缺少图标，我可以下载它，如果图标设计发生变化，我必须更新应用程序。有没有一个地方可以把所有的场地图标下载到一个 zip 里？最好的问候， 安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:29:35.920

没有图标的 zip 文件，但您可以通过 /venues/categories 端点访问有关类别的信息。有关详细信息，请参阅[https://developer.foursquare.com/docs/venues/categories](https://developer.foursquare.com/docs/venues/categories)

# php - 让 PHP Eclipse 对不同的文件类型运行错误检查

> ID：12038605
> 
> 赞同：4
> 
> 时间：2012-08-20T13:29:00.110
> 
> 标签：php, eclipse, validation, file-type, syntax-checking

在我的项目中，我有一系列`*.tpl`文件，我想将`Eclipse`它们解释为 PHP 代码。通过`*.tpl`在`Preferences -> General -> Editors -> Content Types`. 但是，这似乎也无法启用语法错误检查/验证。

为了清楚起见，我想`Eclipse`在编辑器中显示每行错误，并指出 PHP Explorer 中文件的任何错误/警告 - 对于带有`.tpl`扩展名的文件。目前两者都没有发生。

我也尝试过添加`*.tpl`到`Preferences -> General -> Editors -> File Associations`. 我已经尝试`F5`在各个相关的地方按下，并尝试重新启动`Eclipse`. 包含文件的文件夹`*.tpl`是源文件夹的子目录。此源文件夹的其他子目录工作正常（尽管它们有`.php`文件）。我不知道还能做什么。请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:37:22.883

对于它的价值，我尝试创建一个自定义，并且能够通过添加和来`*.guvava`做到这一点。之后当我打开一个新的 guvava 文件时，我拥有了 java 文件中的所有内容。`*.guvava``Content Types``File Associations`

![在此处输入图像描述](../Images/5576943b8d8e4f53e6dab530c604701e.png)

![在此处输入图像描述](../Images/cdac4f22316bdeb37699b2de49ad3464.png)

![在此处输入图像描述](../Images/d5fffedc86022727dc94cd3f347464a8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:50:32.783

嗯，这很奇怪。我只是尝试测试 Ashutosh 的示例并且它有效。创建新文件 test.tpl 后，项目中的所有其他 .tpl 文件突然开始被正确解析/验证，所有警告/错误图标突然出现。

所以这似乎是这个版本的 Eclipse (http://www.zend.com/en/community/pdt/downloads) 中的一个错误。希望对于遇到此问题的其他人来说，这是一个可重复的解决方法！

非常感谢你们。

# python - Python win32api.mouse_event 类型错误

> ID：12038608
> 
> 赞同：5
> 
> 时间：2012-08-20T13:29:07.457
> 
> 标签：python, winapi, pyhook, pythoncom

```
import sys
import win32api, win32con
import pyHook
import pythoncom

def CursorLeft():
    win32api.mouse_event(win32con.MOUSEEVENTF_MOVE, -1, 0)
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 0, 0)
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP, 0, 0)

def Quit():
    print "Quitting"
    sys.exit()

# create a keyboard hook
def OnKeyboardEvent(event):
    print 'MessageName:', event.MessageName
    print 'Key:', event.Key
    if event.Key in ['Numpad2']:
        CursorLeft()
    elif event.Key in ['End']:
        Quit()
    return True

def OnMouseEvent(event):
    print 'Position:', event.Position
    return True

hm = pyHook.HookManager()
hm.MouseAll = OnMouseEvent
hm.HookMouse()
hm.KeyDown = OnKeyboardEvent
hm.HookKeyboard()
pythoncom.PumpMessages() 
```

函数 CursorLeft 每隔一段时间都能正常工作。它也可以在没有任何负数作为参数的情况下正常工作。我完全不知道为什么会这样！

第一次打电话，很好。

第二次调用，

> TypeError：需要一个整数

第三次通话，很好。

第四次通话，

> TypeError：需要一个整数。

依此类推。

* * *

 ~~## 解决了

```
win32api.mouse_event(win32con.MOUSEEVENTF_MOVE, -1, 0, 0, 0) 
```

~~传递的最后两个参数允许函数正常运行。我仍然不确定为什么并且**仍然想知道**，但至少**它现在正在工作**。~~

## 解决了

```
return True 
```

事件函数返回 true 非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T04:59:00.150

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> `return True`
> 
> 事件函数返回 true 非常重要。

~ 每个[Junkah 的回答](https://stackoverflow.com/users/904693/junkah)~~

# jsf - JSF 中的前缀 URL 映射导致 FileNotFound-Error

> ID：12038610
> 
> 赞同：2
> 
> 时间：2012-08-20T13:29:12.730
> 
> 标签：jsf, web.xml, url-pattern

我是 JSF 初学者并尝试使用 Spring 和 Hibernate 构建一个小型 JSF2 Web 应用程序。我选择的服务器是 JBOSS 7.1 AS。

我在尝试使用前缀 URL 模式映射 servlet 时遇到了一个奇怪的错误。这是 web.xml 中声明 Servlet 的部分：

```
<servlet>
    <servlet-name>FacesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>FacesServlet</servlet-name>
    <url-pattern>/webapplication/*</url-pattern>
</servlet-mapping> 
```

如果我现在将浏览器定向到“localhost:8080/myapp/webapplication/index.xhtml”，我会收到 Mojarra/Facelets 生成的错误：“/index.xhtml Not Found in ExternalContext as a Resource”。如果我改为将 URL 模式配置为“* .xhtml”，一切正常。

我根本不知道为什么前缀模式不起作用：/

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:29:56.737

我找到了解决方案：D！

当使用前缀模式时，我认为我必须将我的 xhtml 文件放在该名称的文件夹中。例如，我使用了模式“/webapplication/*”，所以我创建了一个文件夹“webapplication”并将我的 web 文件放在那里。现在，当我的浏览器指向“{host}/myapp/webapplication/index.xhtml”时，我希望服务器搜索“{root}/webapplication/index.xhtml”中的文件。相反，Servlet 将 URL 解析为“{host}/myapp/index.xhtml”。因为文件没有放在那里，我得到一个 FileNotFound-Error。

我还学会了不要给我的资源文件夹和我的 url-patterns 同名。

# jquery - 访问 div 中的嵌套 iFrame

> ID：12038616
> 
> 赞同：0
> 
> 时间：2012-08-20T13:29:34.853
> 
> 标签：jquery

我正在尝试`iframe`使用`id`jQuery`class`访问`div`.

这是当前源的样子。

```
<div id="cont">
    <iframe src="#" style="border: none; width: 500px; height: 196px; overflow: hidden" 
frameborder="0"></iframe>
</div> 
```

我想改变`width`and`height`并且`iframe`我认为我需要做这样的事情，`setAttribute("height", "2000");`. 我只是不知道如何找到它，`iframe`因为它没有`id`or `class`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:31:10.357

鉴于您知道 iframe 的父 ID，选择以下内容应该很简单：

```
$('#cont > iframe') 
```

然后你可以设置它的高度：

```
$('#cont > iframe').height(2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:31:21.807

```
var $iframe = $("#cont iframe"); 
```

然后用它做任何你想做的事^_^。

* * *

或者你甚至可以这样做：

```
var $iframe = $("iframe", "#cont"); 
```

* * *

总而言之，你可以在最后做到这一点：

```
$iframe.height(2000); 
```

# asp.net-mvc-3 - 将 oData 查询与 MVC 3 操作一起使用

> ID：12038617
> 
> 赞同：2
> 
> 时间：2012-08-20T13:29:37.673
> 
> 标签：asp.net-mvc-3, odata

如果我返回 Queryable，是否可以将 oData 查询与 MVC 3 操作一起使用？像这样：

```
public JsonResult GetComplaints()
{
    var complaints = db.Complaints.AsQueryable();
    return Json(complaints, JsonRequestBehavior.AllowGet);
} 
```

或者

```
public IQueryable<Complaint> GetComplaints()
{
    return db.Complaints.AsQueryable();
} 
```

如果我这样称呼它：

```
$.ajax({
    url: '@Url.Action("GetComplaints")?$filter=startswith(CompanyName, \'123\')',
    type: 'GET',
    success: function (data) {
        console.log(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:30:25.587

您的第二个示例操作`IQueryable<Complaint>`can 用作 OData 端点，但前提是您使用 Web API 并且该方法位于`ApiController`.

常规 MVC 控制器不支持开箱即用的 odata 查询。

[您可以从本文](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)开始了解 Web.API 中的 OData 支持

OData 可以作为[Nuget 包](http://nuget.org/packages/Microsoft.AspNet.WebApi.OData)安装：

```
PM> Install-Package Microsoft.AspNet.WebApi.OData 
```

# git - 带有 Git 的 CloudBees Eclipse 工具包

> ID：12038621
> 
> 赞同：0
> 
> 时间：2012-08-20T13:29:45.930
> 
> 标签：git, eclipse-plugin, cloudbees

我正在尝试设置 CloudBees Eclipse Toolkit 以连接到我的 CloudBees Git 存储库，但它没有在可用存储库列表中列出 Git 存储库。如果我创建一个 CloudBees SVN 存储库，那么它会发现该存储库很好。它还可以找到 Jenkins 构建配置文件。

这是插件的 CloudBees 教程，但它只列出了一个 SVN 连接：[http ://wiki.cloudbees.com/bin/view/Documentation/CloudBeesEclipseToolkit](http://wiki.cloudbees.com/bin/view/Documentation/CloudBeesEclipseToolkit)

我知道我的 Git 存储库已设置，因为我可以使用命令行和 EGit eclipse 插件连接到它。CloudBees 插件根本不认为它是一个选项，尽管它说它支持 CloudBees 帐户上的 Git 存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:54:46.683

CloudBees eclipse 插件尚不支持来自 cloudbees forge 的 Git 存储库。您必须使用存储库 URL 手动配置 EGit。这将包含在未来的版本中，因为 EGit/JGit 中的所需更改可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T16:59:22.863

CloudBees Eclipse Toolkit(v2.0) 现在支持 Git 存储库。如果从以前的版本移动到当前版本 (2.0)，您需要重新安装 EGit (2.2.x+)。

[问题中的旧 wiki 页面已被新版本特定](https://developer.cloudbees.com/bin/view/RUN/EclipseToolkitv2.0 "Eclipse Toolkit v2.0")的页面取代

# sql-server - 实体框架级联删除

> ID：12038623
> 
> 赞同：2
> 
> 时间：2012-08-20T13:29:48.290
> 
> 标签：sql-server, entity-framework

我在 SQL Server 上有表 A 和表 B。

表 B 具有表 A 的外键。

当我删除表 A 项目时，我想级联删除表 B 项。

如何在 SQL Server 和实体数据模型上进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:33:10.670

在 SQL 服务器上，将关系属性的`Delete Rule`in设置为。`INSERT and UPDATE specification``Cascade`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:34:08.640

在实体模型设计器中的关系上设置 CASCADE...

# iphone - 是否有适用于“与朋友”游戏的 iOS API？

> ID：12038627
> 
> 赞同：0
> 
> 时间：2012-08-20T13:29:57.607
> 
> 标签：iphone, ios, gamekit, social

我想构建一个简单的 iOS 游戏，玩家可以和他们的朋友一起玩（类似于 Draw Something）。是否有某种用于匹配的 API？我已经查看了 GameCenter，并且该示例看起来对我没有任何用处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:35:12.250

您的第一个选择是使用 GameCenter 作为匹配机制。您需要做的是创建一个只显示玩家朋友的自定义[GKMatchmakerViewController 。](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmakerViewController_Ref/Reference/Reference.html)请注意，只有玩家的 GameCenter 好友可以玩，所以它并不是真正为大规模构建的（因为它没有连接到 Facebook 或类似的任何东西）。

另一种方法是使用 Nextpeer 的[免费 SDK](http://developers.nextpeer.com)来执行此操作。它们提供了一种在玩家之间创建匹配的简单机制。SDK 本身是满载的，所以你不需要做任何事情，他们负责匹配、推送通知、Facebook 集成等。他们还有一个[简单的截屏视频](https://vimeo.com/44447806)，向你展示如何集成他们的 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:34:43.413

你应该看看 GameKit。这是一个很棒的[教程](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T13:55:55.437

如果您想使用 Facebook 中的朋友，您应该使用 facebook API 来访问该列表（[iPhone 版 Facebook](http://developers.facebook.com/connect_iphone.php)）

其他方式你将不得不重新发明轮子或使用 Gamecenter，但它的人会少很多。

# vim - pdf中的vim可点击网址

> ID：12038629
> 
> 赞同：2
> 
> 时间：2012-08-20T13:30:12.167
> 
> 标签：vim, macvim

我正在使用 macvim 制作一本 ruby​​ 教程书，该书将直接使用 vim 作为 PDF 生成（使用 macvim print/make pdf 功能，但对于从 Vim 生成的任何 PDF 的原理应该相同）。不幸的是，在教程书的文本部分似乎没有简单的方法可以使 pdf 中的 url 可点击。

在从 vim 生成的 .pdf 文件中具有可点击 URL 的最佳解决方案是什么？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:58:26.543

如果你真的在制作一本“书”，我会重新考虑你的方法。毕竟，你无法绕过 Vim 的某些限制，例如单一、固定宽度的字体，以及对分页符、目录等的详细控制将难以实现。

如果您只是喜欢 (Ruby) 代码的语法高亮显示，您可以使用 Vim 的`:TOhtml`命令在 HTML 中获得 Vim 缓冲区的忠实再现，我想它可以包含在您的发布母版中。

要使 PDF 中的链接可点击，您可能必须将二进制格式“反编译”为 PostScript，然后对 URL 进行文本搜索并修改 PostScript 代码以包含链接，然后重新编译为 PDF。我还没有找到执行此操作的（命令行）工具，但我猜一些（GUI，通常很昂贵）PDF 编辑器允许您这样做。

# c# - FTP下载块拷贝

> ID：12038631
> 
> 赞同：1
> 
> 时间：2012-08-20T13:30:20.030
> 
> 标签：c#, .net, ftp, copy

不久前，我问了一个关于如何将文件从一个位置分块复制到另一个位置的问题：[CopyFileEx“参数无效”错误](https://stackoverflow.com/questions/10354610/copyfileex-the-parameter-is-invalid-error)

我收到了以下非常有帮助的代码。

```
 static void chunkCopyFile(string source, string destination, int bytesPerChunk)
    {
        uint bytesRead = 0;

        using (FileStream fs = new FileStream(source, FileMode.Open, FileAccess.Read)) {
            using (BinaryReader br = new BinaryReader(fs)) {
                using (FileStream fsDest = new FileStream(destination, FileMode.Create)) {
                    BinaryWriter bw = new BinaryWriter(fsDest);
                    byte[] buffer;

                    for (int i = 0; i < fs.Length; i += bytesPerChunk) {
                        buffer = br.ReadBytes(bytesPerChunk);
                        bw.Write(buffer);
                        bytesRead += Convert.ToUInt32(bytesPerChunk);
                        updateProgress(bytesRead);
                    }
                }
            }
        }
    } 
```

但是，我现在需要将此代码转换为使用 FTP。我尝试了将FTP路径传递给文件流的明显方法，但它给了我一个错误，说“不支持”。

我已经设法获得文件长度，我只是不确定如何将下载分成块。一如既往地感谢任何帮助！

到目前为止的代码（不多）

```
static void chunkCopyFTPFile(string destination, int bytesPerChunk)
    {
        uint bytesRead = 0;

        fWR = (FtpWebRequest)WebRequest.Create("ftp://" + FTP_SERVER_NAME + "/test.txt");
        fWR.Method = WebRequestMethods.Ftp.DownloadFile;
        fWR.UseBinary = true;

        fWR.Credentials = new NetworkCredential(FTP_SERVER_USERNAME, FTP_SERVER_PASSWORD);

        FtpWebResponse response = (FtpWebResponse)fWR.GetResponse();

        Stream responseStream = response.GetResponseStream();
        StreamReader sR = new StreamReader(responseStream);

        sR.ReadToEnd();

        sR.Close();
        response.Close();
    } 
```

最终代码（工作）：

```
using (Stream responseStream = response.GetResponseStream()) {
            using (BinaryReader bR = new BinaryReader(responseStream)) {
                using (FileStream fsDest = new FileStream(destination, FileMode.Create)) {
                    BinaryWriter bw = new BinaryWriter(fsDest);
                    int readCount;
                    byte[] buffer = new byte[bytesPerChunk];

                    readCount = responseStream.Read(buffer, 0, bytesPerChunk);
                    bytesRead += Convert.ToUInt32(readCount);
                    updateProgress(bytesRead);

                    while (readCount > 0) {
                        bw.Write(buffer, 0, readCount);
                        readCount = responseStream.Read(buffer, 0, bytesPerChunk);
                        bytesRead += Convert.ToUInt32(readCount);
                        updateProgress(bytesRead);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:04:52.727

好的，这是您可以尝试的。此代码未经测试。因此，如果它包含错误并且您可以正常工作，请编辑答案或指出错误。

```
static void chunkCopyFile(string source, string destination, int bytesPerChunk)
{
    uint bytesRead = 0;
    //Instead of this:
    //using (FileStream fs = new FileStream(source, FileMode.Open, FileAccess.Read)) {

    //...some necessary stuff...
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://www.contoso.com/test.htm");
    request.Method = WebRequestMethods.Ftp.DownloadFile;
    request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com");
    FtpWebResponse response = (FtpWebResponse)request.GetResponse();

    //Use this:
    using(Stream fs = response.GetResponseStream()){

        using (BinaryReader br = new BinaryReader(fs)) {
            using (FileStream fsDest = new FileStream(destination, FileMode.Create)) {
                BinaryWriter bw = new BinaryWriter(fsDest);
                long cl = response.ContentLength;
                int bufferSize = 2048;
                int readCount;
                byte[] buffer = new byte[bufferSize];

                readCount = fs.Read(buffer, 0, bufferSize);
                while (readCount > 0)
                {
                   bw.Write(buffer, 0, readCount);
                   readCount = fs.Read(buffer, 0, bufferSize);
                   updateProgress(readCount);
                }
            }
        }
    }
} 
```

参考：

[http://msdn.microsoft.com/en-us/library/ms229711](http://msdn.microsoft.com/en-us/library/ms229711)

[http://www.codeproject.com/Articles/17202/Simple-FTP-demo-application-using-C-Net-2-0](http://www.codeproject.com/Articles/17202/Simple-FTP-demo-application-using-C-Net-2-0)（下载方法代码）

# c# - 如何从 XElement 创建的节点中删除空的 xmlns 属性

> ID：12038636
> 
> 赞同：36
> 
> 时间：2012-08-20T13:30:39.793
> 
> 标签：c#, .net, xml, linq-to-xml

这是我的代码：

```
XElement itemsElement = new XElement("Items", string.Empty);
//some code
parentElement.Add(itemsElement); 
```

之后我得到了这个：

```
<Items xmlns=""></Items> 
```

父元素没有任何命名空间。我该怎么做才能获得`Items`没有空命名空间属性的元素？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-20T14:18:50.627

这完全取决于您如何处理命名空间。下面的代码创建具有不同命名空间的子项：

```
XNamespace defaultNs = "http://www.tempuri.org/default";
XNamespace otherNs = "http://www.tempuri.org/other";

var root = new XElement(defaultNs + "root");
root.Add(new XAttribute(XNamespace.Xmlns + "otherNs", otherNs));

var parent = new XElement(otherNs + "parent");
root.Add(parent);

var child1 = new XElement(otherNs + "child1");
parent.Add(child1);

var child2 = new XElement(defaultNs + "child2");
parent.Add(child2);

var child3 = new XElement("child3");
parent.Add(child3); 
```

它将生成如下所示的 XML：

```
<root xmlns:otherNs="http://www.tempuri.org/other" xmlns="http://www.tempuri.org/default">
    <otherNs:parent>
        <otherNs:child1 />
        <child2 />
        <child3 xmlns="" />
    </otherNs:parent>
</root> 
```

看看`child1`,`child2`和之间的区别`child3`。`child2`是使用默认命名空间创建的，这可能是您想要的，而`child3`这正是您现在所拥有的。

# php - 哪些 PHP 框架可以创建/访问电子邮件帐户？

> ID：12038639
> 
> 赞同：2
> 
> 时间：2012-08-20T13:30:47.400
> 
> 标签：php, email, cpanel

我想动态创建电子邮件帐户 (email@myserver.com) 以及访问电子邮件以检查和发送邮件。我目前使用 Codeigniter 作为我的框架，但我找不到任何工作库来执行此操作。

我在网上查了一下，Zend Framework 似乎可以检查您的电子邮件，但我不知道它是否可以创建电子邮件帐户。从我的研究看来，我只能通过 cpanel 或 plesk api 创建帐户。那么我可以获得任何带有cpanel api库的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:33:28.473

你可以在评论中看到正确的答案。Plesk 提供了一个 XML-API

[Plesk PHP API 如何使用Plesk API](http://www.ehow.com/how_10054410_send-plesk-api-php-command.html)[自动安装 Wordpress 在子域中](https://stackoverflow.com/questions/7688229/autoinstallation-wordpress-by-plesk-api-in-subdomain)
[使用 Plesk API 创建 A-Record](https://stackoverflow.com/questions/11175816/creating-an-a-record-with-plesk-api)

这里有一些网站如何使用它和一些点击。Stackoverflow 上有一些可以帮助您解决问题的帖子。

# .net - 邮件用户组。ASP.NET MVC

> ID：12038645
> 
> 赞同：1
> 
> 时间：2012-08-20T13:31:00.297
> 
> 标签：.net, asp.net-mvc

如何向特定用户组发送邮件（使用`Active Directory`）？

至于现在我已经定义了一个这样的接口：

```
public interface IMailingService {
    void SendMessage(String from, String to, String subject, String body);
} 
```

像这样实现：

```
public class MailingService : IMailingService {
    public void SendMessage(String from, String to, String subject, String body) {
        using(var client = new SmtpClient()) {
            client.SendAsync(
                from: from, 
                recipients: to, 
                subject: subject,
                body: body,
                userToken: "hahaha!"
            );
        }
    }        
} 
```

我将 smtp 客户端与以下配置结合使用。

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="Network" from="user@domain.com">
            <network host="host" port="25" userName="username" password="password" />
        </smtp>
    </mailSettings>
</system.net> 
```

但是我很难理解哪个服务应该呈现行为，处理哪个用户服务`ldap-connections`或单独的服务（遵循`SOC`原则）？

有什么例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:44:48.617

向用户组发送电子邮件应该与向单个用户发送电子邮件的方式相同。

用户组通常有自己的电子邮件地址，然后 Active Directory 将处理其余部分。

除非我在这里误解了你的问题。

# html - 解析错误：语法错误，使用 Rocketeer 的意外 T_FUNCTION

> ID：12038646
> 
> 赞同：-2
> 
> 时间：2012-08-20T13:31:01.373
> 
> 标签：html, string, parsing, function, syntax

```
uksort($actions, function($a, $b){
            if(strlen($a) == strlen($b)) {
            return 0;
        }
        if(strlen($a) > strlen($b)) {
            return -1;
        }
        return 1; 
```

这里有什么问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:34:00.963

您运行的 PHP 版本早于 5.3，其中不存在匿名函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:34:02.977

```
function cmp($a, $b){
    if(strlen($a) == strlen($b)) {
        return 0;
    }
    if(strlen($a) > strlen($b)) {
        return -1;
    }
    return 1;
 }

 uksort( $actions, "cmp" ); 
```

您不能使用闭包，因为您的版本必须更新或相等`5.3`......这就是您必须将函数名称作为字符串传递的原因；）

# facebook - 使用 Graph API 在 Facebook 中使用特定应用程序获取好友列表

> ID：12038657
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:31:20.020
> 
> 标签：facebook, facebook-graph-api

我需要使用 Graph API 找到我的朋友列表，他们正在使用 Facebook 中的 wordpress 等特定应用程序。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:37:43.637

我认为没有办法查看是否有人在使用不同的应用程序。您可以对用户当前正在使用的您的应用程序进行此测试，但就像您看不到“喜欢”特定页面的用户一样（除非您是管理员），您无法确定用户是否是使用任意应用程序。

# java - 列表视图适配器不起作用，未调用 getView。

> ID：12038660
> 
> 赞同：8
> 
> 时间：2012-08-20T13:31:35.660
> 
> 标签：java, android, android-listview, android-arrayadapter

我想我快疯了。将自定义适配器绑定到 Listview 如此简单的事情让我很头疼。

贴出代码然后解释一下：

MainActivity.java

```
package com.example.pruebalist;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    private static String[] data = new String[] {"0","1","2","3"};

    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Log.v("MainActivity","Inside MainActivity");
        setContentView(R.layout.main);
        ListView lstView = (ListView)findViewById(R.id.listNoticias);

        ArrayAdapter<String> adapter = new LstAdapter(this, R.layout.row, data);
        lstView.setAdapter(adapter);
    }

} 
```

LstAdapter.java

```
package com.example.pruebalist;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class LstAdapter extends ArrayAdapter<String>{

    private String[] mData;
    private Context mContext;
    int layoutResourceId;

    public LstAdapter(Context context, int textViewResourceId, String[] values) {
        super(context, textViewResourceId, values);
        mContext = context;
        mData = values;
        layoutResourceId = textViewResourceId;

        Log.v("LstAdapter","Inside LstAdapter");
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v = convertView;
        Log.v("LstAdapter","Inside getView");

        if(v==null){
            LayoutInflater inflater = ((Activity)mContext).getLayoutInflater();
            v = inflater.inflate(layoutResourceId, parent,false);
        }

        String item = mData[position];
        if(item!=null){
            TextView txtItem = (TextView)v.findViewById(R.id.texto);
            if(txtItem!=null){
                txtItem.setText(item);
            }
        }

        return v;
    }

} 
```

ListView 永远不会显示。并且从未使用过 getView，logCat 不显示“在 Getview 内部”。

怎么了？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-20T13:35:01.920

主要问题是

```
@Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    } 
```

将其更改为

```
@Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mData.length;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return mData[arg0];
    } 
```

查看这个[关于列表视图和列表活动的 Vogella 教程](http://www.vogella.com/articles/AndroidListView/article.html)，尝试**`ViewHolder`**在列表适配器中使用它会提高您的视图性能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-20T13:34:57.237

这是因为您保留了返回 0 的方法的默认实现`getCount()`，因此适配器认为没有要显示的元素`ListView`。

它应该返回`mData.length`

```
@Override
public int getCount() {
   return mData.length;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T13:38:31.437

你还没有实现`getCount()`和`getItemId(...)`。

You can just take out those methods and use the defaults if you do not plan on needing custom implementation for them.

Take them out for now and then try.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-13T18:42:29.700

The right way of doing this is to call `super(context, textViewResourceId, values)` - which you are already doing. In that case you can remove the `getCount()` and `getItemId(...)` functions completely. The class which your List is derrived from will automatically return the correct values.

*   Cheers

# python - x, y 方向到度数

> ID：12038674
> 
> 赞同：3
> 
> 时间：2012-08-20T13:32:07.770
> 
> 标签：python, trigonometry

我有一个`(x, y)`带有[-1, 1]`x`的元组。`y`元组代表任何方向的运动。我想将其转换为 360 度角，其中 0 代表北。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T13:38:34.620

根据“北”的含义，即沿哪个轴以及角度应该朝哪个方向，以下代码应该可以解决您的问题：

```
 math.atan2(y,x)/math.pi*180 
```

这为您提供了点（x，y）与原点的角度，逆时针方向与沿 x 轴的“北”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T13:36:20.887

我不会给你一个解决方案，但我会为你指出正确的方向。大多数编程语言都有一个名为 的函数`atan2`，它以 x 和 y 值作为输入，并计算点与正 x 轴之间的弧度角。它会自动处理象限问题。

[http://en.wikipedia.org/wiki/Atan2](http://en.wikipedia.org/wiki/Atan2)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T13:45:04.960

数学如下。

tan = 对面/相邻。（在您的情况下分别为 y 和 x ）。

arctan(r) = 角度，给定对边与相邻的比率 r。

arctan2 与 arctan 类似，但处理象限问题。

我应该补充一点，这都是针对直角三角形的。

*Atan2 的严格定义，取自维基百科*：

![在此处输入图像描述](../Images/04f334b175458591f6b81098f4292e29.png)

您可以在此处找到更多信息： [http ://en.wikipedia.org/wiki/Arctan2](http://en.wikipedia.org/wiki/Arctan2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:36:49.473

这通常也可以对形成段的任何两个点进行：

```
segment = ((x1, y1), (x2, y2))

from math import *

angle = degrees(atan((x2 - x1) / (y2 - y1))) 
```

只记得检查象限问题

# javascript - 当我使用 HttpXmlRequest 时，Context.Request.Files.Count 为零

> ID：12038675
> 
> 赞同：0
> 
> 时间：2012-08-20T13:32:14.620
> 
> 标签：javascript, web-services

我用 HTTPXMLRequest 调用 webservice 方法。但是在 asp.net webservice 中的计数`context.request.files`为零！我该如何解决？

这是我的ajax请求代码：

```
 ....

   var files = event.originalEvent.dataTransfer.files;
   upload(files)
 /* ---------------------------------------------------- */

   function upload(files) {

       for (var i = 0; i < files.length; i++) {

           xhr = new XMLHttpRequest();
           xhr.upload.addEventListener('progress', uploadProgress, false);
           xhr.onreadystatechange = stateChange;
           xhr.open('POST', "WebService.asmx/HelloWorld", true);
           xhr.setRequestHeader('X-FILE-NAME', files[i].name);
           xhr.send(files[i]);

      }
  } 
```

# windows - 多播 windows 2008 r2 多播

> ID：12038676
> 
> 赞同：0
> 
> 时间：2012-08-20T13:32:16.100
> 
> 标签：windows, windows-server-2008-r2, multicast

有人在 Windows server 2008 R2 机器上读取多播似乎有问题吗？我们在戴尔服务器 PER710 上运行它，使用 Xeon CPU 的 x5678 @ 3.60 GHz 和 64 位操作系统。使用wireshark我看到当路由器/交换机每125秒发出一个一般请求时，服务器并不总是重新请求它当前加入的所有组。如果同一局域网上没有其他收件人加入同一组，我认为服务器需要始终重新请求它加入的全套多播组。

这是Windows中的错误吗？是否已修复某些固件升级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:06:46.097

如果同一网络中的另一台主机也是某些相同组的成员，则它可能已经响应，在这种情况下，具有较长计时器的主机会抑制响应。请参阅[RFC 2236](http://www.ietf.org/rfc/rfc2236.txt)。

# windows-phone - MapTileLayer 使用自定义图块大小

> ID：12038685
> 
> 赞同：1
> 
> 时间：2012-08-20T13:32:52.233
> 
> 标签：windows-phone

据我了解，您的叠加图块必须与 Bing 图块的大小相同。如果我要在 Bing 上渲染的图块与 Bing 图块的大小不匹配怎么办？

例如，在缩放级别 1 上，有 4 个 Bing 磁贴，每个磁贴大小为 256x256 像素。所以地图的总大小为 512x512 像素。在这张地图的顶部，我想从另一个地图渲染瓷砖，尺寸为 481x326。另一张地图总共有 9 个图块。

因此，Bing 将触发其图块 (0,0) 的渲染。LocationRectTilesSource 将分析平铺坐标、缩放级别并确定要使用的图像的 Uri。问题在于，对于一​​个 Bing 磁贴，我没有一个叠加磁贴图像，而是有很多（使用上面的示例是 4 个）。

看来我应该准备我的覆盖图块以匹配 Bing 的模式。这样就会有1对1的关系。有没有办法避免这一步并使用我的自定义图块？

谢谢！

# javascript - Google Script var获取未定义的值

> ID：12038687
> 
> 赞同：0
> 
> 时间：2012-08-20T13:32:59.733
> 
> 标签：javascript, google-apps-script

我在下面的 Google 脚本代码中遇到了一些问题：

当我这样做时： var Emails = e.parameter.Email; （功能自动用户）

我无法获取值，它似乎未定义，值没有从一个函数传递到另一个函数。

怎么了？

```
function doGet() {
  var app = UiApp.createApplication();
  var grid = app.createGrid(3, 2);
  grid.setWidget(0, 0, app.createLabel('Informações para Login:'));

  var Contactemail = app.createTextBox();
  Contactemail.setName('Email'); 
  grid.setWidget(1, 0, app.createLabel('Email:'));
  grid.setWidget(1, 1, Contactemail);

  var Contactpassword = app.createPasswordTextBox();
  Contactemail.setName('Password'); 
  grid.setWidget(2, 0, app.createLabel('Senha:'));
  grid.setWidget(2, 1, Contactpassword);

  var panel = app.createVerticalPanel();
  panel.add(grid);

  var button = app.createButton('Logar');
  var handler = app.createServerHandler('Aut_User'); 
  handler.addCallbackElement(grid);
  button.addClickHandler(handler);

  panel.add(button);
  app.add(panel);
  return app;
}

function getColIndexByNamelink(colName, ID) {
  var sheet = SpreadsheetApp.openById(ID).getSheets()[0];
  var numColumns = sheet.getLastColumn();
  var row = sheet.getRange(1, 1, 1, numColumns).getValues();
  for (i in row[0]) {
    var name = row[0][i];
    if (name == colName) {
      return parseInt(i) + 1;
    }
  }
  return -1;
}

function Aut_User(e) {
  var ID = "0AqmZV_vU4x5cdFQyOFo2TlE3dkxFYi1rVUk3OUxzYWc";
  var sheet = SpreadsheetApp.openById(ID).getSheets()[0];
  var lastRow = sheet.getLastRow();
  var Emails = e.parameter.Email;  //PROBLEM HERE
  //parametros da outra funcao
  for (var i = 2; i < (lastRow + 1); i++) {
    sheet.getRange("A4").setValue(Emails);
    //conferir os dados
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:24:40.310

您的代码中有一个错误：

```
var Contactpassword = app.createPasswordTextBox();
Contactemail.setName('Password'); 
```

这里的第二行应该是：

```
Contactpassword.setName('Password'); 
```

我通过在 Aut_User(e) 中使用以下代码发现了这一点：

```
var app = UiApp.getActiveApplication();
var output = '';
for (var i in e.parameter) {
   output += i + ' = ' + e.parameter[i] + '; ';
} 
```

然后将“输出”发送到我可以阅读的地方。我看到“密码”的值是输入的电子邮件地址。

# asp.net - 使用返回多个记录集的 SQL Server 存储过程的结果填充 gridview

> ID：12038689
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:33:16.177
> 
> 标签：asp.net, sql-server, vb.net, tsql, stored-procedures

我有一个返回多个记录集的存储过程。它可以是 1 个记录集、2 个记录集或更多。我不知道有多少RS会回来。

在stackoverflow，我找到了以下示例

```
 Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("myConnection").ConnectionString)
    Dim cmd As New SqlCommand
    Dim Reader As SqlDataReader
    cmd.Connection = conn
    cmd.Parameters.AddWithValue("@ACTNbr", tbACTNbr.Text.ToString.Trim)
    cmd.Parameters.AddWithValue("@WTHNbr", tbWTHNbr.Text.ToString.Trim)
    cmd.CommandText = "sp_search_def"
    cmd.CommandType = CommandType.StoredProcedure
    conn.Open()
    Reader = cmd.ExecuteReader()
'The next part is what I found here at stackoverflow
While Reader.Read() OrElse (Reader.NextResult() And Reader.Read())
  For i As Integer = 0 To Reader.FieldCount - 1
    Response.Write(Reader(i).ToString())
    Response.Write(" ")
  Next
  Response.Write("<br />")
End While 
```

以上`response.write`显示了我完美需要的数据。但我需要将其放入 Gridview 中。即我需要将存储过程的结果（及其所有结果集）放入一个gridview 中。

我的网格视图设置为`AutoGenerateColumns = "true"`.

我试过了：

```
myGridview.DataSource = Reader
myGridview.DataBind() 
```

当然，我只得到其中一个记录集。

存储过程的结果都具有相同的格式 - 相同数量的列、标题等。

有人可以指出我正确的方向吗？我一直在试图解决这个问题，但放弃了，现在我在这里问。

我是新来的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:46:41.560

**使用 DataAdapter 填充 DataSet 而不是 DataReader**，您可以轻松地绑定到您的gridview，如下所示：

```
 Dim DS As DataSet
    Dim MyConnection As SqlConnection
    Dim MyDataAdapter As SqlDataAdapter

    'Create a connection to the SQL Server.
    MyConnection = New SqlConnection("server=(local);database=pubs;Trusted_Connection=yes")

    'Create a DataAdapter, and then provide the name of the stored procedure.
    MyDataAdapter = New SqlDataAdapter("GetAuthorsByLastName", MyConnection)

    'Set the command type as StoredProcedure.
    MyDataAdapter.SelectCommand.CommandType = CommandType.StoredProcedure

    'Create and add a parameter to Parameters collection for the stored procedure.
    MyDataAdapter.SelectCommand.Parameters.Add(New SqlParameter("@au_lname", _
   SqlDbType.VarChar, 40))

    'Assign the search value to the parameter.
    MyDataAdapter.SelectCommand.Parameters("@au_lname").Value = Trim(txtLastName.Text)

    'Create and add an output parameter to Parameters collection. 
    MyDataAdapter.SelectCommand.Parameters.Add(New SqlParameter("@RowCount", _
    SqlDbType.Int, 4))

    'Set the direction for the parameter. This parameter returns the Rows returned.
    MyDataAdapter.SelectCommand.Parameters("@RowCount").Direction = ParameterDirection.Output

    DS = New DataSet() 'Create a new DataSet to hold the records.
    MyDataAdapter.Fill(DS, "AuthorsByLastName") 'Fill the DataSet with the rows returned.

    'Get the number of rows returned, and then assign it to the Label control.
    'lblRowCount.Text = DS.Tables(0).Rows.Count().ToString() & " Rows Found!"
    lblRowCount.Text = MyDataAdapter.SelectCommand.Parameters(1).Value & " Rows Found!"

    'Set the data source for the DataGrid as the DataSet that holds the rows.
    Grdauthors.DataSource = DS.Tables("AuthorsByLastName").DefaultView

    'Bind the DataSet to the DataGrid. 
    'NOTE: If you do not call this method, the DataGrid is not displayed!
    Grdauthors.DataBind()

    MyDataAdapter.Dispose() 'Dispose of the DataAdapter.
    MyConnection.Close() 'Close the connection. 
```

[如何使用 Visual Basic .NET 在 ASP.NET 中调用 SQL Server 存储过程](http://support.microsoft.com/kb/306574)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:37:12.057

您只能将 GridView 绑定到一个结果集。例如，将 绑定`GridView`到`DataSet`包含多个 DataTable 将仅显示第一个中的**数据** `DataTable`。

由于 proc 返回的所有结果集都具有相同的架构，因此您需要将它们合并并将结果集绑定到`GridView`.

例子：

```
//Assumes your proc returns a dataset with more than one datatable
//Notice how all datables are merged into the first one [0]
for (int i = 1; i < ds.Tables.Count; i++)
{
    ds.Tables[0].Merge(ds.Tables[i]);  
}

grid.DataSource = ds;
grid.DataBind(); 
```

或等效地：

```
grid.DataSource = ds.Tables[0];//this DT has everything
grid.DataBind(); 
```

网格将显示所有数据表中的所有行

当 DataTables 具有不同的架构时，合并的 DataTable 将包含来自所有 DataTables 的所有列。

例如，将 a`DataTable`与一个名为的列`Col1`与另一个`DataTable`与一个名为的列合并`Col2`将导致如下所示：

```
 +-----+------+
  |Col1 | Col2 |
  ------+------+
  |val1 |  null|
  +-----+------+
  |null |  val2|
  +-----+------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:15:10.147

您需要绑定到 DataTable。一个 DataSet 可以包含多个表。

[DataSet.Tables 属性](http://msdn.microsoft.com/en-us/library/system.data.dataset.tables.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T14:48:24.220

使用@Kapil 和@Icarus 回复，我能够让它工作。感谢您花时间提供帮助。它为我指明了正确的方向。

这就是我最终的结果：

```
 Protected Sub btnSearch_Click(sender As Object, e As System.EventArgs)
    Dim DS As DataSet
    Dim MyConnection As SqlConnection
    Dim MyDataAdapter As SqlDataAdapter
    Dim msg As String = ""

    'Create a connection to the SQL Server.
    MyConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("msSQLdb").ConnectionString)

    'Create a DataAdapter, and then provide the name of the stored procedure.
    MyDataAdapter = New SqlDataAdapter("sp_search_all_SQLservers", MyConnection)

    'Set the command type as StoredProcedure.
    MyDataAdapter.SelectCommand.CommandType = CommandType.StoredProcedure

    'Create and add a parameter to Parameters collection for the stored procedure.
    MyDataAdapter.SelectCommand.Parameters.Add(New SqlParameter("@ACTNbr", SqlDbType.VarChar, 10))
    MyDataAdapter.SelectCommand.Parameters.Add(New SqlParameter("@WTHNbr", SqlDbType.VarChar, 15))

    'Assign the search value to the parameter.
    MyDataAdapter.SelectCommand.Parameters("@ACTNbr").Value = tbACTNbr.Text.ToString.Trim
    MyDataAdapter.SelectCommand.Parameters("@WTHNbr").Value = tbWTHNbr.Text.ToString.Trim

    'Create a new DataSet to hold the records.
    DS = New DataSet()
    'Fill the DataSet with the rows returned.
    MyDataAdapter.Fill(DS, "proc_results")

    'Set the data source for the gridview as the DataSet that holds the rows.
    gv.DataSource = DS.Tables("proc_results").DefaultView
    For i = 1 To DS.Tables.Count - 1
      DS.Tables(0).Merge(DS.Tables(i))
    Next

    msg = DS.Tables(0).Rows.Count & " rows found"
    gv.Caption = DS.Tables(0).Rows.Count & " rows found"
    gv.DataSource = DS

    'Bind the DataSet to the DataGrid. 
    'NOTE: If you do not call this method, the DataGrid is not displayed!    
    gv.DataBind()
    If gv.Rows.Count <> 0 Then
      gv.Visible = True
    Else
      msg = "No data found"
    End If

    MyDataAdapter.Dispose() 'Dispose of the DataAdapter.
    MyConnection.Close() 'Close the connection.
    DS.Dispose()
    lblMsg.Text = msg
  End Sub 
```

# javascript - 如何使用 CSS 变换为拖动添加动量/惯性？

> ID：12038690
> 
> 赞同：11
> 
> 时间：2012-08-20T13:33:20.730
> 
> 标签：javascript, html, translate, momentum

我正在尝试为缩放的图像拖动添加动量/惯性效果（就像在[这个例子](http://jsfiddle.net/529KH/)中或者就像 iOs 那样），我很难用它。

我已经为此苦苦挣扎了一段时间，并找到了一些有用的资源（例如[这个](https://stackoverflow.com/questions/4443526/jquery-ui-drag-easing-inertia)），但大多数解决方案都涉及 jQuery，我更愿意坚持使用纯 JavaScript，不涉及任何框架。

我正在编写 HTML5 / CSS3 缩放图像代码，具有所有标准功能：双击缩放、捏缩放、拖动、平移等，一切都是使用 CSS3 的转换转换和缩放完成的。前任。

```
transform: translate(100px, 100px);
transition: 100ms; 
```

我查看了其他人是如何做到的，它涉及左/右属性的连续动画，持续时间/距离减少，以创建一种缓入效果。

我尝试使用翻译重新创建它，使用一种递归函数（你可以[在这里](http://jsfiddle.net/LGxBL/3/)看到一个小提琴（适用于 webkit 浏览器），请忽略编码风格，这并不是最佳实践，只是一个演示）。在这种情况下，动画并不流畅，连续的翻译没有连接。

我对该原理有一些基本的了解，并且确实查看了一些在线可用的算法，但我只是不知道如何使用 css 翻译来实现这一点。

拖动的第一部分，在 mousemove/touchmove 上完成，用光标/手指移动图像，但结束后的继续翻译不是......连续的，它就像第一个动画之后的单独动画，不像自然动量/惯性效应。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T13:49:23.667

最后我设法找到了一些有用的东西，它仍在进行中，但结果看起来很有希望。

起点是Aryia Hidayat 的[这篇文章，特别是他的](http://ariya.ofilabs.com/2011/10/flick-list-with-its-momentum-scrolling-and-deceleration.html)[Kinetic](http://ariya.github.com/js/kinetic/) Sc​​roll ，以及[Joe Hewitt 的一篇文章](http://joehewitt.com/2011/10/05/fast-animation-with-ios-webkit)。此外，他的代码的[这个旧版本](http://gitorious.org/ofi-labs/x2/commit/8ccb334f)似乎更容易理解和掌握基本概念，尽管最新版本应该更好。

基本上，这种方法不是用非空持续时间连接各种翻译并同步它们的时间和加速度，而是使用大量的 0 持续时间翻译，经常调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:42:42.193

一种方法是 using `animation-timing-function:`，我认为目前需要供应商前缀。您可以选择使用`ease-in`、`ease-out`、`ease-in-out`或`cubic-bezier`。后者使用二维空间中函数的可视化；使用生成器更容易配置那个。我个人最喜欢的是[Ceaser](http://matthewlein.com/ceaser/)。

# jquery - Json 数据未填充到饼图？

> ID：12038693
> 
> 赞同：0
> 
> 时间：2012-08-20T13:33:31.340
> 
> 标签：jquery, asp.net-mvc-3, highcharts, pie-chart

我正在从我的控制器返回一个 josn 数据并将其绑定到饼图......但最后我在我的页面中没有得到任何东西......谁能告诉我我在哪里做错了......

```
 <script type="text/javascript">

    $(function () {
        var chart;
        alert('1');
        $(document).ready(function () {
        var options = {
        chart: {
           renderTo: 'container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    defaultSeriesType: 'pie'
        },
        title: {
           text:'Resource Reports'
         },
       plotOptions: {
           pie: {
               allowPointSelect: true,
               cursor: 'pointer',
               dataLabels: {
                   enabled: true,
                   color: '#000000',
                   connectorColor: '#000000',
                   formatter: function () {
                       //return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                   }
               }
           }
       },
        series: [{
           type: 'pie',
           name: 'Fruits',
           data:[]
        }]
     };

            $.getJSON('<%= Url.Action("GetData","JqueryCharts") %>', null, function (data) {
                alert('2');                    
                options.series = json;
                chart = new Highcharts.chart(options);                                  

            });

        });
    });

</script> 
```

这是我的控制器

```
 public JsonResult GetData()
    {
        //int Param1;
        //Param1 = 1;
        //DataEntitiesModel data = new DataEntitiesModel();
        //var procedure=db.Database.SqlQuery<DataEntitiesModel>("ResourceReports @EmployeeID",new SqlParameter("@EmployeeID", Param1) );
        //var procedure = db.Database.SqlQuery<DataEntitiesModel>("Select * from EmployeeDetails");
        //var data = db.ProjectReports.ToList().Select( e => new
        //{
        //    Id = e.EmployeeID,
        //    Name = e.EmployeeName
        //});
        var EmployeeDetails = db.EmployeeDetails.ToList<EmployeeDetail>().Select(e => new
        {
            id=e.EmployeId,
            Name = e.EmployeeName
        });
        return Json(EmployeeDetails, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:27:46.930

也许？

```
$.getJSON('<%= Url.Action("GetData","JqueryCharts") %>', null, function (data) { 
            options.series = [{
                type: 'pie',
                name: 'Fruits',
                data:json
            }];
            chart = new Highcharts.chart(options);                                  

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:01:14.993

确保您的 json 输出由数字而不是字符串组成。Db 查询通常返回字符串，在将它们转换为 json 之前，您需要将它们转换为 float/int

# c# - 使用 byte[] 读取大文件会出错

> ID：12038694
> 
> 赞同：2
> 
> 时间：2012-08-20T13:33:31.510
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 C# 中散列 SHA1 大文件（超过 2gb）](https://stackoverflow.com/questions/6094306/hash-sha1-large-files-over-2gb-in-c-sharp)

我有一个大文件，它给了我错误“抛出了'System.OutOfMemoryException'类型的异常。”

任何人都有解决此问题的想法或解决方案。请帮忙。示例代码....

```
 private string GetSha1()
    {
        string filePath = txtFileName.Text;
        byte[] filebytes = System.IO.File.ReadAllBytes(filePath);
        byte[] hashValue;
        SHA1Managed hashString = new SHA1Managed();

        string hex = "";

        hashValue = hashString.ComputeHash(filebytes);
        foreach (byte x in hashValue)
        {
            hex += String.Format("{0:x2}", x);
        }
        return hex;
    } 
```

我在上面代码的下面一行遇到异常......

```
 byte[] filebytes = System.IO.File.ReadAllBytes(filePath); 
```

filePath 的文件大小> 500MB。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T13:36:14.037

无需将整个文件读入内存，只需将流传递给 ComputeHash

```
using(var file = File.Open(path,FileMode.Open))
{
   hashValue = hashString.ComputeHash(file);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:37:54.947

好吧，您已经解释了问题所在。您正在尝试将 500MB 文件直接读取到 a 中`byte[]`，因为您使用的是`ReadAllBytes()`. 除了小文件之外，这并不适合任何东西。

如果您想计算文件的哈希值，只需使用流作为参数：

```
using (filestream f = File.Open(path,FileMode.Open))
{
    hashValue = hashString.ComputeHash(f);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:37:32.370

也许您应该一次使用`System.IO.File.Read`并将文件的一部分读入字节数组，而不是一次读取整个文件。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.io.stream.read%28v=VS.110%29.aspx)上有关使用`Read`.

# xml - 具有固定位数的整数

> ID：12038697
> 
> 赞同：0
> 
> 时间：2012-08-20T13:33:43.740
> 
> 标签：xml, xsd

如果需要，我想获得一个具有固定位数和前导零的 int 类型的“ID”属性。

所以，如果这个数字是，例如，6，我输入 1，我会得到 000001

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:52:50.940

XSD 不提供您在这里似乎想到的那种字符串操作。如果您希望 ID 具有六位十进制数字，您可以将其定义为需要六位十进制数字。或者，如果您希望用户能够将值设为“1”，则可以将 ID 定义为最多六位数字。但一般来说，“用户输入字符串 X 并且系统自动映射到字符串 Y”形式的规则超出了 XSD 的范围。

要弄清楚如何处理这种情况，问问自己（也许向阅读这个问题的人解释）为什么需要这种字符串映射？如果要确保“1”、“01”和“000001”都映射到相同的值，那么将属性声明为整数已经可以做到这一点。如果是其他原因（我在想出替代动机时遇到了麻烦），可能需要一个不同的解决方案。

但现在到了你实际问的问题。

要`xs:integer`在词法表示中定义恰好六位数字的子类型，您可以编写如下内容：

```
<xs:attribute name="ID">
  <xs:simpleType>
    <xs:restriction base="xs:integer">
      <xs:pattern value=".{6}"></xs:pattern>
    </xs:restriction>
  </xs:simpleType>
</xs:attribute> 
```

或者，如果（正如 Sean Kenny 在他的评论中所建议的那样）你真正想要的不是一个整数，而只是一个正好由六个十进制数字组成的字符串：

```
<xs:attribute name="ID">
  <xs:simpleType>
    <xs:restriction base="xs:token">
      <xs:pattern value="\d{6}"></xs:pattern>
    </xs:restriction>
  </xs:simpleType>
</xs:attribute> 
```

要定义最多允许六位数字的整数子类型，您可以在上面的模式中更改`{6}`为`{1,6}`，或使用`maxExclusive`1000000 的 a，或设置`totalDigits`为 6。

所有这些都假设您的问题是定义数据类型，而不是施加唯一性约束。

# c++ - 错误 C2440：“类型转换”：无法从“布尔”转换为“CString”

> ID：12038698
> 
> 赞同：0
> 
> 时间：2012-08-20T13:33:50.760
> 
> 标签：c++, visual-studio, visual-c++, compiler-errors, visual-studio-2005

我收到以下错误：

> C2440：“类型转换”：无法从“布尔”转换为“CString”

对于以下代码：

```
if ((CString)XSave->GetVersionAt(j).HasService_Ref())
    m_pVersion->SetstrServicesRef((CString)XSave->GetVersionAt(j).GetService_Ref()); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:33:16.430

看起来像`HasService_Ref`退货`bool`，但您`CString`偶尔会将其转换为内部`if`状态。取下石膏，它就可以工作了。

# java - s:hidden 没有收回价值

> ID：12038699
> 
> 赞同：0
> 
> 时间：2012-08-20T13:33:58.903
> 
> 标签：java, jsp, struts2, hidden

我正在使用 struts2 标签 s:hidden 将对象列表和对象存储为隐藏字段。
我已经为两者创建了 getter 和 setter，但是当我尝试使用这个 List 或 Object 时，我得到了 null；

```
<s:hidden id="productTypes" name="productTypes" value="%{productTypes}"></s:hidden> 
```

这就是我声明 productTypes 的方式，它是一个隐藏变量列表。

这里是吸气剂和二传手...

```
public List<Map<String, Object>> getProductTypes() {
        return productTypes;
    }

    public void setProductTypes(List<Map<String, Object>> productTypes) {
        this.productTypes = productTypes;
    } 
```

我不知道我在这里缺少什么。

# vb.net - 使用 InStr 查找不是某个字符的第一个出现

> ID：12038700
> 
> 赞同：2
> 
> 时间：2012-08-20T13:33:59.123
> 
> 标签：vb.net, string

我正在尝试使用 InStr 在这样的字符串中查找不是“0”（从左侧开始）的第一个字符：

```
000000000001
000000004092
000000000052
000000001006 
```

这可以用 InStr 完成，还是我应该使用不同的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:38:40.590

If you are looking for an index of an item that is not zero (that may also be a non-digit) use this regular expression: `[^0]`

```
Dim pos as Integer = Regex.Match(str, "[^0]").Index 
```

Keep in mind, Regex functions require the following library call:

```
Imports System.Text.RegularExpressions 
```

This will not work well when the string is composed entirely of zeros, so you may want to modify the expression to allow zero to be the last (or the only) character in the string:

```
`([^0])|(0$)`
          ^--- This meta-character matches an end-of-string marker 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:45:03.120

如果您使用的是 VB。**NET**你应该使用 .NET 方法。

一种方法是使用 `Enumerable.Where`which 是一种`Linq`方法：

```
Dim value = "000000000001"
Dim firstNotZero = From c In value Where c <> "0"c
If firstNotZero.Any Then
    Dim first As Char = firstNotZero.First
End If 
```

**编辑**：如果你不想使用 Linq 或 Regex，你也可以使用一个简单的循环：

```
Dim lines = {"000000000001", "000000004092", "000000000052", "000000001006"}
Dim firstDigits As New List(Of Char)
For Each line In lines
    For Each c In line
        If c <> "0"c Then
            firstDigits.Add(c)
            Exit For
        End If
    Next
Next 
```

这会将所有第一个非 0 字符添加到 a `List(Of Char)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:37:38.567

使用正则表达式：

```
Regex.Match(yourString, "[1-9]") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:37:34.083

没有办法“否定” 的参数`InStr`。

如果您知道输入，您可以简单地搜索不应该出现的内容（可能使用正则表达式）。

如果没有详细信息，很难给你一些不那么笼统的答案，例如 - 输入字符的范围是多少？比赛有哪些规则？这个要怎么用？

# c - 以下代码中的 void * 是做什么的？

> ID：12038707
> 
> 赞同：0
> 
> 时间：2012-08-20T13:34:18.233
> 
> 标签：c, pointers

> **可能重复：**
> [设置 void * 指针等于一个整数](https://stackoverflow.com/questions/12038368/setting-void-pointer-equal-to-an-integer)

我之前的问题已经结束了，可能我没有说清楚，我可以再问一次吗？

我有一个指针：

```
void * p;
p = malloc(sizeof(int)); 
```

然后有一个int：

```
int age = 20;
p = (void*)age; 
```

我的问题是如何`p = (void*)age;`工作？如果 p 是一个指针，那么 (void*) 前面的作用是`age`什么？为什么值为`p`20？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:38:25.850

You are creating an automatic variable called `age` and you are also creating a variable called `p` which is a `void *` pointer. This means it is a pointer to something, but you do not know what. You are then assigning the value of `age` to the pointer `p`. In order to satisfy the type system you have to cast it to `void *` by using the `(void *)` syntax in order to say to the compiler "I know what I am doing.".

As for the reason why you are storing an integer in a `void *` pointer... there is no good reason I can think of. Perhaps you meant `p = &age`, which means `p` points to the variable on the stack.

To answer ratzip's comment:

```
`(void *)age` 
```

Means "a `void *` pointer with the value of `age`".

If I wrote `void *p = malloc(1)` then it would allocate some memory and the numerical value of `p` would be the address in memory, for example `12345`. If I went to that value in memory I would find the memory I allocated. If I write `(void *)age` then I am casting (i.e. taking the value in one type and storing in a different type) and assigning it to `p`. So the value of `p` is 20, `p` points to "memory at address 20". Which is meaningless unless you know that there *is* some memory there that you want to use. I can say with 99.999% certainty that this is not the case. `int` and `pointer` are both numbers, but they are used for very different purposes. One represents a number to the user, one represents a memory address to the computer.

(Of course with virtualised memory the above is not strictly true)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:36:11.453

强制转换使编译器假设您知道自己在做什么，并发出将整数值`age`转换为地址的代码。这通常不是很难，因为无论如何地址只是整数值。

当然，*将*值`20`用作地址是非常不明智的，因此如果指针被取消引用，这段代码可能会导致崩溃。

文本`(void *)`是括在括号中的类型名称，这在 C 中称为“强制转换”，它用于将其后面的表达式的类型转换为命名类型。通常，看到涉及的强制转换`void *`应该作为一个警告信号，因为在正确的代码中很少需要它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:38:34.090

The (void*) is a type cast and is casting the integer value of 20 to a (void*) value of 20.

Basically, you are setting your current (void*) value returned from malloc() to 0x00000014.

If you are trying to set p to the address of the age integer, you need to do this:

```
p = &age; 
```

If you want to fill in the memory pointed to by p (that you allocated with malloc) with a value of 20, then you need to do this:

```
*p = age; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:45:00.583

当您将和整数转换为指针然后将其放入时，`p`您**明确**指定指向的**地址**。`p``20`

通常，您不知道您使用的数据的显式地址，因此使用`&`运算符或一些内存管理工具（如`malloc`.

但是，这种用例在嵌入式系统领域非常普遍。通常，硬件有一组映射到地址空间的寄存器，像下面这样的结构非常常见。所有这些地址都在硬件文档中指定。

```
#define SOME_DEVICE_REG_ADDRESS 0x10050000
...
uint32_t *p = (uint32_t *)SOME_DEVICE_REG_ADDRESS 
```

# actionscript-3 - Flash：如何将 GET 变量的值获取到 flash as3 中？

> ID：12038709
> 
> 赞同：1
> 
> 时间：2012-08-20T13:34:24.727
> 
> 标签：actionscript-3, flash, get, variables

例如，我的页面中有“flash.swf?SomeVariable=123”

如何获得“SomeVariable”GET 变量的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:34:24.727

我想这是

```
this.root.loaderInfo.parameters.SomeVariable;  //should return 123 
```

我对吗？

# java - 使用 maven 编译时如何获取 Eclipse 警告？

> ID：12038718
> 
> 赞同：6
> 
> 时间：2012-08-20T13:34:41.340
> 
> 标签：java, eclipse, maven

我有一个使用 m2eclipse 的 Java 项目。在我的 Eclipse 中，我收到了几个警告。

如何在我的 Maven 编译中显示这些警告？我想在 jenkins 上使用警告插件来跟踪警告的数量。

我发现[这篇](http://frequal.com/java/EnableWarningsInMaven.html)关于如何在 Maven 中启用警告的帖子，但它只给了我一小部分警告。

例如

> “...的值未使用”警告不会出现。

如何获得与 Eclipse 中显示的相同的警告？感谢帮助 ：）

为清楚起见进行编辑：我想显示与 eclipse 中相同的警告，而不是 FindBugs、PMD 或 checkstyle 报告的其他错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:17:04.927

我终于找到了我的问题的解决方案，所以我想分享它:) 我将它添加到我的 pom 文件中，现在警告出现在使用 maven 编译期间，我能够使用警告插件将它们包含到 jenkins 中。我在第一次尝试中错过的重要一点是，插件需要在 pluginManagement 下。

警告由特定编译器生成，以防止错误“没有这样的编译器：eclipse”包含对 plexus-compiler 的依赖。

希望这也适用于其他人:)

```
 <build>
        <pluginManagement>
                <plugins>
                    <plugin>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <configuration>
                            <compilerId>eclipse</compilerId>
                            <source>1.6</source>
                            <target>1.6</target>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>org.codehaus.plexus</groupId>
                                <artifactId>plexus-compiler-eclipse</artifactId>
                                <version>1.8.6</version>
                            </dependency>
                        </dependencies>
                    </plugin>
                </plugins>
         </pluginManagement>
   </build> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:39:23.503

比 Eclipse 警告更好的是，您可以使用**PMD**等静态分析工具和正确的规则。检查[Maven PMD 插件](http://maven.apache.org/plugins/maven-pmd-plugin/)

您可以使用的规则示例：

*   [类型分辨率](http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#Type_Resolution)
*   [空代码](http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#Empty_Code)
*   [JavaBeans](http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#JavaBeans)
*   [未使用的代码](http://pmd.sourceforge.net/pmd-5.0.0/rules/index.html#Unused_Code)

# android - 使用 android 微调器的日期和时间

> ID：12038720
> 
> 赞同：0
> 
> 时间：2012-08-20T13:34:46.363
> 
> 标签：android, xml, user-interface

我正在寻找复制 android 开发者应用教程中显示的功能。

我已经实现了正确的布局，但是任何人都可以帮助我让微调器能够选择日期和时间。除非它是硬编码的，但我假设 android 内置了一些日期/时间设施。

有任何想法吗？ ![在此处输入图像描述](../Images/2a6182de04cbd0c05d448565408a52ca.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:42:04.777

> 谁能帮我让微调器能够选择日期和时间。

使用[`Pickers`](http://developer.android.com/guide/topics/ui/controls/pickers.html)android api 中提供的这些将为您提供帮助用户选择日期和时间所需的小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T07:34:10.183

我用过 Joda 日期时间。另外，我在微调器中创建了自己的项目视图 -`R.layout.spinner_item`

```
public class YourFragment extends Fragment {

    private DateSpinnerAdapter daysAdapt;
    private DateSpinnerAdapter monthsAdapt;
    private DateSpinnerAdapter yearsAdapt;

    private static final int MIN_YEAR = 1935;
    private static final int YEARS_RANGE = 61;

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        initSpinners();
    }

    private void initSpinners() {
        continueButton.setOnClickListener(this);

        monthsAdapt = new DateSpinnerAdapter(getActivity(), R.layout.spinner_item);
        monthsAdapt.setData(getActivity().getResources().getStringArray(R.array.monthsArray));
        monthSpinner.setAdapter(monthsAdapt);
        setMonthsListener();

        yearsAdapt = new DateSpinnerAdapter(getActivity(), R.layout.spinner_item);
        yearsAdapt.setData(getYears());
        yearsSpinner.setAdapter(yearsAdapt);
        setYearsListener();

        daysAdapt = new DateSpinnerAdapter(getActivity(), R.layout.spinner_item);
        setDaysSpinnerValues(monthSpinner.getSelectedItemPosition(), yearsSpinner.getSelectedItemPosition());
        daysSpinner.setAdapter(daysAdapt);
    }

    private void setMonthsListener() {
        monthSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int number, long arg3) {
                setDaysSpinnerValues(number, yearsSpinner.getSelectedItemPosition() + MIN_YEAR);
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
            }
        });
    }

    private  void setYearsListener() {
        yearsSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int number, long arg3) {
                setDaysSpinnerValues(monthSpinner.getSelectedItemPosition(), number + MIN_YEAR);
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
            }
        });
    }

    private int getMonthOfBirth() {
        return monthSpinner.getSelectedItemPosition() + 1;
    }

    private int getYearOfBirth() {
        return yearsSpinner.getSelectedItemPosition() + MIN_YEAR;
    }

    private int getDayOfBirth() {
        return daysSpinner.getSelectedItemPosition() + 1;
    }

    private DateTime getBirthday() {
        return DateTimeFormat.forPattern("yyyy-MM-dd").parseDateTime(getStringDate());
    }

    private String getStringDate() {
        return getYearOfBirth() + "-" + getMonthOfBirth() + "-" + getDayOfBirth();
    }

    private String[] getYears() {
        String[] years = new String[YEARS_RANGE];
        for(int i = 0; i < YEARS_RANGE; i++) {
            years[i] = "" + (i + MIN_YEAR);
        }
        return years;
    }

    private String[] getDays(int month, int year) {
        int maxDays = getDaysInMonth(month, year);
        String[] days = new String[maxDays];
        for(int i = 0; i < maxDays; i++) {
            days[i] = "" + (i + 1);
        }
        return days;
    }

    public int getDaysInMonth(int month, int year) {
        Calendar cal = new GregorianCalendar();
        cal.set(year, month, 1); //note that the month in Calendar goes from 0-11
        return cal.getActualMaximum(Calendar.DAY_OF_MONTH);
    }

    public void setDaysSpinnerValues(int month, int year) {
        daysAdapt.clear();
        daysAdapt.setData(getDays(month, year));
        daysAdapt.notifyDataSetChanged();
    }
} 
```

和适配器：

```
public class DateSpinnerAdapter extends ArrayAdapter<String>{

    protected FragmentActivity context;

    public DateSpinnerAdapter(FragmentActivity context, int resource) {
        super(context, resource);
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View element = super.getView(position, convertView, parent);
        ((TextView) element).setTextColor(context.getResources().getColor(R.color.white));
        LinearLayout.LayoutParams layoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        element.setLayoutParams(layoutParams);
        return element;
    }

    @SuppressLint("ResourceAsColor")
    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        View element =super.getDropDownView(position, convertView, parent);
        element.setPadding(15, 30, 0, 30);
        return element;
    }

    @TargetApi(11)
    public void setData(String[] data) {
        clear();
        if (data != null) {
            //If the platform supports it, use addAll, otherwise add in loop
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                addAll(data);
            }else{
                for(String item: data){
                    add(item);
                }
            }
        }
    }
} 
```

# unicode - 如何用 surrogateescape 解码包装 Python 3 的 io.BytesIO()？

> ID：12038722
> 
> 赞同：3
> 
> 时间：2012-08-20T13:34:50.127
> 
> 标签：unicode, python-3.x

我发现 Python3`open("filename", "r", encoding="ascii", errors="surrogateescape")`很有用。如何包装一个`io.BytesIO()`（或任何非真实文件的字节源）以创建具有相同解码行为的文本模式文件类对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:01:24.543

这就是[TextIOWrapper](http://docs.python.org/dev/library/io.html#io.TextIOWrapper)所做的。

# c++ - 使用 OpenSSL 在 C++ 中解密 PKCS7 文件

> ID：12038725
> 
> 赞同：1
> 
> 时间：2012-08-20T13:35:09.777
> 
> 标签：c++, openssl, pkcs#7

我有一个由 M2Crypto python 库生成的 PKCS7 文件，如下所示：

```
-----BEGIN PKCS7-----
MIIBWAYJKoZIhvcNAQcDo[cut]
-----END PKCS7----- 
```

是由公钥加密的二进制内容。

现在我需要用 C++ 解密它，但它似乎无法识别这种格式。我试过`d2i_PKCS7_bio()`and `SMIME_read_PKCS7()`，但我总是收到如下错误：

```
8957:error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:tasn_dec.c:1316:
8957:error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:tasn_dec.c:380:Type=PKCS7 
```

以及通过命令行尝试的类似错误，如下所示：

```
openssl smime -decrypt -inform DER -binary -inkey privkey.pem 
```

**编辑**
我找到了正确的命令行选项：

```
openssl cms -decrypt -in samplepkcs7.pem  -inkey privkey.pem -inform pem 
```

现在我需要在 C++ 中找到相应的函数。

也许我错了，但是很难找到关于此的文档。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:39:00.120

你拥有的是一个 PEM 格式的对象；DER 格式的对象在文本编辑器中看起来像垃圾（由于是二进制格式）。因此你想要`PEM_read_PKCS7()`.

The OpenSSL documentation is inherently a mess, and it's very difficult to learn your way around without a guide of some sort. I recommend the O'Reilly [Network Security with OpenSSL](http://shop.oreilly.com/product/9780596002701.do) text; while written for OpenSSL 0.9.6/0.9.7, it's still an excellent introduction to the library (the API hasn't changed very much) and will serve as a handy reference.

# ruby - 将类添加到 在 Rails 3.2 中

> ID：12038726
> 
> 赞同：1
> 
> 时间：2012-08-20T13:35:12.650
> 
> 标签：ruby, ruby-on-rails-3

有没有办法使用 Ruby 或可能的 rails 辅助方法将 HTML .class 添加到无序列表项？

基本上我只是在迭代一个 todo 模型

```
<ul>
<% @todos.each do |todo| %>
  <li><%= todo.task %></li>
<% end %>
</ul> 
```

我想将 class="third" 添加到第三个列表项，以便 HTML 输出看起来像

```
<ul>
  <li>Task 1</li>
  <li>Task 2</li>
  <li class="third">Task 3</li>
<ul> 
```

我正在使用 jQuery 添加类，但我想要一种更好的方法来执行此操作，而不是在 javascript 上进行中继。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:40:04.527

使用[each_with_index](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)的一种方法（索引从零开始）：

```
<ul>
<% @todos.each_with_index do |todo,index| %>
  <li<%= ' class="third"' if index == 2 %>><%= todo.task %></li>
<% end %>
</ul> 
```

# java - 在 ORMLite 中为一个类创建多个表

> ID：12038730
> 
> 赞同：8
> 
> 时间：2012-08-20T13:35:23.523
> 
> 标签：java, android, ormlite

我在 Android 上使用 ORMLite 并且有以下问题：是否可以基于单个 Java 类创建多个表？

这些表应该只是它们的名称不同，并且对它们的访问应该是按名称。

例如，如果我有一堂课：

```
public class Order{
    @DatabaseField
    public string Name;

    @DatabaseField
    public string Amount;
} 
```

而且我有动态数量的可以创建订单的模块。我希望每个模块都有自己的表，但所有表都应该有类似的模式。

我知道我可以在 Order 类中添加一个字段来指示源模块名称，并将所有订单放在一个表中，但我想知道是否有办法将表分开（为了更快的查询，更快地删除订单相同的模块等等）

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T13:51:39.520

这里最大的问题是“动态”是什么意思。如果您的意思是您需要动态创建这些模块`Order`并且您事先不知道它们的名称，那么我相信模块名称字段是执行此操作的有效方法。为每种类型的订单创建一个表对我来说似乎是过早的优化——没有充分理由的复杂性。

也就是说，您可以通过[`DatabaseTableConfig`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/DatabaseTableConfig.html)为每个表实例化 a 并[以编程方式定义类](http://ormlite.com/docs/class-config)来完成动态类。

如果您不是真的指动态，那么将每个模块`Order`放在自己的表中的最简单方法是使用子类。

你可以有：

```
@DatabaseTable
public class FooOrder extends Order {
    // fields will be gotten from Order
}

@DatabaseTable
public class BarOrder extends Order {
    // fields will be gotten from Order
} 
```

来自的字段`Order`将位于每个`fooorder`和`barorder`表中。

# javascript - 在中文网络上测试网站

> ID：12038732
> 
> 赞同：5
> 
> 时间：2012-08-20T13:35:23.980
> 
> 标签：javascript, web

我收到一位客户的报告，称我们的网站在中国运行时出现问题。该代码安装在中国的 Apache 服务器上，正在被中国用户查看。我正在运行完全相同的代码并且在这里（在英国）没有遇到问题，并且没有其他客户报告过这个问题（在世界各地）。该错误似乎与Javascript有关。我已获得对中国机器的 RDP 访问权限并且可以看到错误，但由于速度限制和访问问题，我无法安装任何开发人员工具来调试问题。

有没有办法从我的机器欺骗中国 IP 地址访问违规站点？

我想这与中国人为绕过中国的防火墙所做的相反。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:46:25.107

我可以从你说的问题中猜到问题。如果您的 javascript 从 twitter、facebook 网站加载了一些 js 文件，这些网站在中国被阻止并且加载是以同步方式进行的，例如

```
<script type="text/javascript" src="blocked.site/a.js"></script>
<script type="text/javascript" src="userful.js"></script> 
```

您的 userful.js 将不会被加载。

要对此进行调试，只需在 Chrome、IE、Opera 中查看 Web 控制台，无需其他软件。

要解决此问题，请以非阻塞方式修改 js 加载或为中国客户端制作修改版本。

# java - 测试 maven 构建的 java 库是否适用于 GWT

> ID：12038733
> 
> 赞同：0
> 
> 时间：2012-08-20T13:35:28.233
> 
> 标签：java, gwt, testing, maven, gwttestcase

我有一个 java 库。我用 Maven 构建它。我想确保 GWT 用户可以在某处使用它。我在适当的地方添加了@GwtCompatible 和@GwtIncompatible。现在，我想测试这是否会按预期工作。

该库是 Java 中的一个测试框架 (http://github.com/truth0/truth) - 它提供了各种测试命题等。人们将在纯 Java 单元测试中使用它，但他们也将使用它在 GWT 集成测试中（例如扩展 GWTTestCase）。我自己没有这方面的应用程序，但我需要验证它在 GWT 中使用时不会中断。

一个普通的 JUnit 测试会（微不足道地）使用如下代码：

```
import static ...Truth.ASSERT;

ASSERT.that(123456).isGreaterThan(12345); 
```

我已经创建了一个小的 GWTTestCase，我希望在它的基础上充分利用这个库的 GWT 兼容子集。简单的 GWTTestCase 示例如下所示：

```
import static org.truth.Truth.ASSERT
...
public class TruthGwtTest extends GWTTestCase {
  @Override public String getModuleName() {
    // I have a org/truth/TruthTest.gwt.xml file
    return "org.truth.TruthTest";
  }
  public void testFoo() {
    ASSERT.that(457923).is(1); // want this to fail
  }
} 
```

我的 TruthTest.gwt.xml 看起来像这样（我承认我在这里有点“装货”）

```
<module>
  <source path=""/>
  <super-source path="super"/>
  <inherits name="com.google.gwt.junit.JUnit"/>
</module> 
```

当我将 gwt-maven-plugin 与“编译”和“测试”执行绑定时，两个执行都正确绑定并在输出中运行。生成并运行了一个小服务器，但测试超时。当我检查生成的服务器的内容时​​，我看到了很多生成的 javascript，但是我在生成的服务器的任何地方都看不到与我在测试中编写的代码相关的代码。

我选择了值 457923，希望这个幻数在生成的代码中可以被 grep 识别，但我找不到它。我只是不确定，从文档中，我需要做些什么来确保我拥有正确的 GWT 编译的所有代码。我没有看到任何可以与 Truth 框架本身相关联的代码，也没有看到 GWTTestCase 的测试方法。

有 gwt-maven-plugin 的专家吗？注意 - 这不是一个应用程序，它是一个库 - 我只想强制 gwt 编译器和一个 GwtTestCase 强制 GWT 基础架构验证我认为会从中产生的内容。我需要在一个小测试 WAR 插件上运行 maven-failsafe-plugin 吗？嘎嘎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:29:28.353

好的 - 我想通了。问题似乎是我没有为 htmlunit 指定任何浏览器仿真，并且由于没有默认浏览器，我需要明确设置它。否则，它只会启动包含单元测试的服务器，并期望您连接浏览器。

# c++ - 以下方式调用函数有什么区别？

> ID：12038735
> 
> 赞同：17
> 
> 时间：2012-08-20T13:35:40.887
> 
> 标签：c++, c

```
foo();

(*foo)();

(&foo)(); 
```

这些函数调用之间到底有什么区别（假设`foo()`在某处定义）？有没有可能在另一种情况下使用一个？

另外，为什么不`&foo()`工作`*foo()`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T13:38:01.713

实际调用本身没有区别（相反，它们都会根据`foo()`声明的方式做同样的事情）

**C 和 C++ 中的所有**函数调用都是通过出现在函数调用括号之前的函数指针表达式进行的。如有必要，会发生非指针类型的隐式寻址。

[这是一个演示 C++ 行为的 ideone。](http://ideone.com/vefaP)

`&foo()`and`*foo()`不起作用的原因是函数调用运算符`()`优先于`*`and `&`。因此它们可能会起作用，具体取决于您对返回值所做的事情。 `&foo()`将获取返回值的地址，并`*foo()`取消引用它。在某些情况下，这些操作中的任何一个或两者都可能是合法的。考虑一个返回引用指针类型的函数。

此答案的一部分取自 R.. 的评论。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-20T13:49:24.203

你没有确切地说是什么`foo`，但我会假设它是一个函数。

> 这些函数调用之间到底有什么区别？

显然，第一个使用通常的语法调用函数。

第三个获取函数的地址并尝试调用它；该语言允许调用函数指针，就好像它们是它们指向的函数一样，所以这相当于`foo()`.

第二个尝试取消引用该函数。取消引用需要一个指针，并且该语言允许从函数隐式转换为指向该函数的指针，因此 this 等价于`(*(&foo))()`，而后者又等价于`foo()`.

总结一下：这三个都做同样的事情。

> 有没有可能在另一种情况下使用一个？

除非你喜欢用不必要的象形文字来装饰你的代码，否则没有理由对函数或函数指针使用第一种形式以外的任何东西。

> 另外，为什么不`&foo()`工作`*foo()`？

优先规则意味着这些等价于`&(foo())`and `*(foo())`; 即他们调用函数并尝试获取结果的地址并取消引用。如果函数具有返回类型，则第一种形式将“起作用”；如果它返回一个指针或（在 C++ 中）带有重载的 unary 的东西，第二个将“工作” `operator*()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:46:54.993

foo() 调用函数 foo。

```
void foo() {return;}
foo(); 
```

(*foo)() 取消引用名为 foo 的（函数）指针，并用零参数调用它。

```
void bar() {return;}

int main(int argc, char** argv){
    void(*foo)() = &bar;
    (*foo)(); // works
    (*bar)(); // also works
    return 0;
} 
```

(&foo)() 获取对函数 foo 的引用，并使用零参数调用它。

```
void bar() {return;}

int main(int argc, char** argv){
    (&bar)();
    return 0;
} 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:59:26.093

If`foo`是一个函数指示符，这些在 C 中都是等价的：

```
foo();
(foo)();
(*foo)();
(***foo)();
(*&foo)(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:21:25.547

```
foo(); 
```

调用名为 的函数`foo`。

```
(*foo)(); 
```

通过指向名为;*的函数的指针*调用函数 `foo`在调用已作为参数传递给另一个函数（也称为*回调*）的函数时，您通常会看到这一点：

```
/**
 * Execute the function pointed to by "foo" for each element
 * in the array.
 */
void map(int *arr, size_t arrsize, void (*foo)(int))
{
  size_t i;
  for (i = 0; i < arrsize; i++)
    (*foo)(arr[i]); // can also be called as foo(arr[i]);
}

void bar(int i)
{
  printf("i = %d\n", i);
}

int main(void)
{
  int arr[] = {1, 2, 3, 4, 5};
  /**
   * Call the function "bar" for each member
   * of "arr".
   */
  map(arr, sizeof arr / sizeof *arr, bar);
} 
```

这个例子中的映射有点愚蠢，但它说明了这个概念。就像您可以拥有指向不同数据类型的指针一样，您也可以拥有指向不同函数类型的指针。我们不是执行一个名为 的函数，而是`foo`执行一个由 指向的函数`foo`。

请注意，括号很重要：函数调用运算符`()`的优先级高于 unary `*`，因此表达式`*foo()`将被解释为“调用`foo`并取消引用结果”，而`(*foo)()`被解释为“取消引用`foo`并调用结果”。

```
(&foo)(); 
```

与 做同样的事情`(*foo)();`，只是它通过*引用*而不是指针工作（仅限 C++）。同样，括号很重要。`&foo()`被解释为“调用`foo`并获取结果的地址”，这是不合法的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T14:39:53.197

由于这是标记`c++`的，因此函数可以返回该语言的引用，并且可以将这样的函数称为`&foo()`：

```
#include <iostream>

using std::cout;
using std::endl;

int & foo() {
    static int f = 5;
    return f;
}

int main() {
    cout << foo() << endl;
    *(&foo()) = 7;
    cout << foo() << endl;
    return 0;
} 
```

# database - 使用 django 访问数据库的线程安全方法

> ID：12038736
> 
> 赞同：0
> 
> 时间：2012-08-20T13:35:44.853
> 
> 标签：database, django, thread-safety, sharing

据我所知，地狱，经验丰富，不可能`django`为线程共享数据库连接。

我四处搜索并找到了解决此问题的两种方法：

1.  直接使用相关的 DBMS 驱动程序使用直接`SQL`连接。
2.  使用`sqlalchmeny`及其会话轮询的东西。

真的没有别的办法了吗？是不是可以要求`django`为线程创建新连接（听起来对我来说简单而有用！）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:20:58.790

DB的线程安全问题与连接无关；当两个线程尝试同时更改同一条数据时，甚至一个线程尝试写入而另一个线程尝试读取。为了防止这种情况，您只需要在您的一个线程需要对其执行某些操作时锁定该表。使用 Django 1.4+ 的一种快速简便的方法是使用[`select_for_update`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-for-update)，它将锁定表，直到您执行`update`操作。

# android - 1 个应用程序处理所有 NFC 请求，还是很多应用程序？

> ID：12038737
> 
> 赞同：2
> 
> 时间：2012-08-20T13:35:45.570
> 
> 标签：android, android-intent, nfc, android-permissions

我目前正在为使用 NFC 贴纸的 Android 设备开发一些非常基本的应用程序。扫描贴纸，设备执行一个简单的操作。这方面的一个示例可能是呼叫某个号码（保存在 NFC 贴纸的有效负载中）。

我最初的计划是为每个动作制作一个应用程序，因为我的每个客户可能只有一个 NFC 贴纸。因此，如果有人想购买贴纸来拨打 999/911（这是一个虚构的例子），那么他们只需要拨打该号码的应用程序。

但是，我将推动销售其他贴纸，并且当我可以通过一个应用程序轻松控制所有内容时，我不想用小应用程序淹没某人的设备。假设我有 5 个贴纸：切换 wi-fi、切换蓝牙、拨打 999、短信回家、叫出租车。这些都需要以下权限：

*   蓝牙
*   蓝牙管理员
*   无线网络管理员
*   打电话
*   短信

如果我只买了蓝牙贴纸，那么我可能会怀疑应用程序为什么要拨打电话或发送短信。

我的问题是，这里的正确方法是什么？

*   许多应用程序执行简单的任务，并可能用多个贴纸惹恼客户（可能会有很多人拥有多个贴纸）。或者，

*   一个应用程序读取 NFC 贴纸的有效负载并执行相关操作，但请求所有可用 NFC 贴纸所需的权限（可能是个人不需要的权限）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:49:07.070

我认为您最好使用一个可以读取所有标签并采取行动的应用程序。从您那里购买 5 个标签后，很少有人愿意下载 5 个应用程序。

如果您担心权限，请查看[https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher](https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher)及其权限和评级。它做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:13:35.953

“很多应用程序”，很多 nfc 应用程序默认启用？您的客户可能不仅会点击您的标签，还会点击其他内容。哪个应用程序会打开？

使应用程序更安全的建议；做一个额外的步骤来始终要求用户确认。这是关于安全性与便利性的关系。客户将不希望/不需要他们自制标签的额外步骤。Bur 越来越多的智能海报/标签将出现在野外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:52:36.793

我选择一个应用程序，纯粹是为了易于使用。如果应用程序大小成为问题，它将被拆分为多个应用程序。

为了解决权限问题，将有一个写得很好的描述来解释原因。

# php - Google api php 客户端 - Http put 请求

> ID：12038741
> 
> 赞同：0
> 
> 时间：2012-08-20T13:36:12.840
> 
> 标签：php, google-api, google-api-client

我正在尝试使用 google-api-php-client 创建一个 Http put 请求。Oauth 工作正常，我可以收到请求，但我只是不知道如何做一个 put。

```
//While looping over my contacts
$apiClient = new ApiClient();
$apiClient->setAccessToken($this->Auth->user('google_oauth2_token'));

//Getting fresh XML data since I transformed mine into an array
$contactGetRequest = new apiHttpRequest($contact['link'][1]['@href'], 'GET', array('GData-Version' => 3.0));   
$rawContactData = $apiClient->getIo()->authenticatedRequest($contactGetRequest);

$contactXml = Xml::build($rawContactData->getResponseBody());

//Not changing anything, just trying to do a PUT request
$contactPutRequest = new apiHttpRequest($contact['link'][2]['@href'], 'PUT', array('GData-Version' => 3.0), $contactXml->asXML());
$response = $apiClient->getIo()->authenticatedRequest($contactPutRequest); 
```

错误是“Content-Type application/x-www-form-urlencoded 不是有效的输入类型。”。

似乎它正在尝试进行 POST。执行 PUT 请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:03:50.917

我找到了。Content-type 值必须在 headers 参数中设置。我坚持它是自动完成的。

```
$contactPutRequest = new apiHttpRequest($contact['link'][2]['@href'], 'PUT', array('GData-Version' => 3.0, 'Content-type' => 'application/atom+xml; charset=UTF-8; type=entry'), $contactXml->asXML()); 
```

# asp.net-mvc - TDD 工作单元模式 Moq 无法实例化类错误的代理

> ID：12038743
> 
> 赞同：4
> 
> 时间：2012-08-20T13:36:17.717
> 
> 标签：asp.net-mvc, unit-testing, tdd, moq, unit-of-work

我是测试驱动开发的新手，并尝试对 mvc 应用程序进行单元测试。我正在使用 Moq 和 Ninject，并尝试遵循工作单元存储库模式。我的所有测试都收到 System.ArgumentException 错误。这是错误消息和错误堆栈跟踪：

```
Test method LOMSv4.Tests.Controllers.AutobytelControllerTest.Index_Contains_All_Requests threw exception: 
System.ArgumentException: Can not instantiate proxy of class: LOMSv4_DAL.Autobytel.Concrete.RequestRepository.
Could not find a parameterless constructor. 
```

参数名称：constructorArguments

```
Castle.DynamicProxy.ProxyGenerator.CreateClassProxyInstance(Type proxyType, List`1 proxyArguments, Type classToProxy, Object[] constructorArguments)
Castle.DynamicProxy.ProxyGenerator.CreateClassProxy(Type classToProxy, Type[] additionalInterfacesToProxy, ProxyGenerationOptions options, Object[] constructorArguments, IInterceptor[] interceptors)
Moq.Proxy.CastleProxyFactory.CreateProxy[T](ICallInterceptor interceptor, Type[] interfaces, Object[] arguments)
Moq.Mock`1.<InitializeInstance>b__0()
Moq.PexProtector.Invoke(Action action)
Moq.Mock`1.InitializeInstance()
Moq.Mock`1.OnGetObject()
Moq.Mock.GetObject()
Moq.Mock.get_Object()
Moq.MockDefaultValueProvider.ProvideDefault(MethodInfo member)
Moq.QueryableMockExtensions.FluentMock[T,TResult](Mock`1 mock, Expression`1 setup)
lambda_method(Closure )
Moq.Mock.GetInterceptor(Expression fluentExpression, Mock mock)
Moq.Mock.<>c__DisplayClass1c`2.<Setup>b__1b()
Moq.PexProtector.Invoke[T](Func`1 function)
Moq.Mock.Setup[T,TResult](Mock mock, Expression`1 expression, Func`1 condition)
Moq.Mock`1.Setup[TResult](Expression`1 expression) 
```

这是我的测试课：

```
[TestClass]
public class AutobytelControllerTest
{
    Mock<IUnitOfWork> mock = new Mock<IUnitOfWork>();

    [TestMethod]
    public void Index_Contains_All_Requests()
    {
        //Arrange
        AutobytelController controller = new AutobytelController(mock.Object);
        mock.Setup(m => m.RequestRepository.SelectAll()).Returns(new abtRequest[] {
            new abtRequest {RequestID = 1, Title = "Request 1", Description = "Request Description1", UserName = "NewUser", RequestStatus = 0},
            new abtRequest {RequestID = 2, Title = "Request 2", Description = "Request Description2", UserName = "ReturnUser", RequestStatus = 1}
        }.AsQueryable());

        //Act
        abtRequest[] result = ((AutobytelHomeViewModel)controller.Index().Model).Requests.ToArray();
        //Assert
        Assert.AreEqual(result.Length, 2);
        Assert.AreEqual("Request 1", result[0].Title);
        Assert.AreEqual("Request 2", result[1].Title);
    } 
```

我有一个 IUnitofWork 接口和类、通用存储库接口和类以及一个实现通用存储库的请求存储库

```
public interface IUnitOfWork
{
    RequestRepository RequestRepository { get; }
    void Save();
} 
```

* * *

```
public class UnitOfWorkRepository : IUnitOfWork, IDisposable
{
    private AutobytelEntities context = new AutobytelEntities();
    private RequestRepository requestRepository;

    public RequestRepository RequestRepository
    {
        get
        {
            if (this.requestRepository == null)
            {
                //this.requestRepository = new GenericRepository<abtRequest>(context);
                this.requestRepository = new RequestRepository(context);
            }
            return requestRepository;
        }
    }

    public void Save()
    {
        context.SaveChanges();
    }

    private bool disposed = false;

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                context.Dispose();
            }
        }
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

* * *

```
public class GenericRepository<TEntity> : IGenericRepository<TEntity> where TEntity : class
{
    internal AutobytelEntities context;
    internal IObjectSet<TEntity> objectSet;

    public GenericRepository(AutobytelEntities context)
    {
        this.context = context;
        this.objectSet = context.CreateObjectSet<TEntity>();
    }

    public virtual IQueryable<TEntity> SelectAll()
    {
        return objectSet.AsQueryable();
    }

    public virtual TEntity Update(TEntity entity)
    {
        context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);
        return entity;
    }

    public virtual void Delete(TEntity entity)
    {
        objectSet.DeleteObject(entity);
    }
} 
```

* * *

```
 public class RequestRepository : GenericRepository<abtRequest>, IGenericRepository<abtRequest>
{
    public RequestRepository(AutobytelEntities context) : base(context)
    { }

    public virtual abtRequest SelectByUserName(string username)
    {
        return context.abtRequests.FirstOrDefault(i => i.UserName == username && (i.RequestStatus == 0 || i.RequestStatus == 1));
    }

    public virtual abtRequest SelectByRequestID(int requestID)
    {
        return context.abtRequests.FirstOrDefault(i => i.RequestID == requestID);
    } 
```

使用 Ninject 我将 IUnitofwork 绑定到 UnitOfWork 类。

如果我将无参数构造函数添加到我的请求存储库，我的错误将得到解决 - 但因为我不想创建新的对象上下文，我想从工作单元存储库传递我的上下文。

如何解决此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:48:51.380

我通过向我的 RequestRepository 添加一个接口并在我的工作单元中创建该接口的一个实例来解决此错误。我的 IUnit of Work 更改为：

```
public interface IUnitOfWork
{
    IRequestRepository RequestRepository { get; }
    void Save();
} 
```

在我的 UnitOfWork 存储库中更改为：

```
private IRequestRepository requestRepository;

public IRequestRepository RequestRepository
{
    get
    {
        if (this.requestRepository == null)
        {
            this.requestRepository = new RequestRepository(context);
        }
        return requestRepository;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T16:33:38.750

这只是伪代码，但我希望它能让您更接近解决方案。您应该能够按照以下方式设置模拟：

```
//Arrange
var mockRepository = new Mock<RequestRepository>("CONSTRUCTOR ARGUMENT");
mockRepository.Setup(mr => mr.SelectAll()).Returns(new abtRequest[] {
            new abtRequest {RequestID = 1, Title = "Request 1", Description = "Request Description1", UserName = "NewUser", RequestStatus = 0},
            new abtRequest {RequestID = 2, Title = "Request 2", Description = "Request Description2", UserName = "ReturnUser", RequestStatus = 1}
            }.AsQueryable());
mock.SetupGet(uow => uow.RequestRepository).Returns(mockRepository.Object);

AutobytelController controller = new AutobytelController(mock.Object); 
```

上面的代码为您的构造函数参数（“CONSTRUCTOR ARGUMENT”）提供了一个占位符 - 只需在此处提供适用于您的测试场景的最简单的东西。

# php - 当名称是变量时如何调用函数

> ID：12038746
> 
> 赞同：0
> 
> 时间：2012-08-20T13:36:25.633
> 
> 标签：php

> **可能重复：**
> [PHP：函数名称中的变量](https://stackoverflow.com/questions/1777820/php-variable-in-a-function-name)

我有一些函数，我使用变量来知道那里的名字。前任。$func1 = "do_something"; 有什么方法可以调用 do_something() 函数；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:37:59.077

Just call the function like so:

```
$func1(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:38:05.987

You can do this:

```
$func1();//ta da 
```

Or you can do:

```
call_user_func($func1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:38:12.010

```
<?php
function do_something( ) {
    return 'I did something';
}

$function = 'do_something';
echo $function( ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:39:41.263

Just call it `$func1()`.

[read on PHP.net](http://php.net/manual/en/functions.variable-functions.php)

# algorithm - 为什么标准化数字的最高有效位始终为 1？

> ID：12038750
> 
> 赞同：5
> 
> 时间：2012-08-20T13:36:44.023
> 
> 标签：algorithm, floating-point, exponent, mantissa

从[Wikipedia 中的 Significand 条目](http://en.wikipedia.org/wiki/Significand)：

> 当以二进制工作时，有效数字的特征在于其二进制数字（位）的宽度。因为对于标准化数字，最高有效位始终为 1，所以该位通常不存储，称为“隐藏位”。根据上下文，隐藏位可能会或可能不会计入有效数字的宽度。例如，相同的 IEEE 754 双精度格式通常被描述为具有 53 位有效位（包括隐藏位）或 52 位有效位（不包括隐藏位）。隐藏位的概念仅适用于二进制表示。IEEE 754 将精度 p 定义为有效数字中的位数，包括任何隐含的前导位（例如，双精度格式的精度 p 为 53）。

为什么归一化数字的最高有效位始终为 1？有人可以用一个例子来解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T13:49:29.877

二进制中唯一的数字是 0 和 1，前导零不重要（例如 1101 与 00001101 相同，额外的零不添加任何内容）。因此，最高有效数字必须是 1，因为这是唯一的其他可能性。

由于您知道最高有效位必须为 1，因此您可以省略它而不会丢失任何信息。这很有用，因为它可以让您获得额外的精度。

例外是数字 0，但这是通过将偏置指数设置为 0 以浮点数处理的（以及其他特殊情况，如 NaN 和 +/- 无穷大）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T13:51:05.373

这并不完全正确，对于 0、NaN、Infinity 和非正规值等特殊值没有前导 1。

但是，是的，当它是一个“正常”的数字时，你总是可以重写它，使尾数从 1 开始。只需增加指数。等价物也存在于十进制中，如果值不为零，您始终可以编写一个数字，以便它以单个非零数字开头：

```
 0.5 = 5.0 E-01
  0.05 = 5.0 E-02
  50 = 5.0 E+01
  500 = 5.0 E+02
  etcetera. 
```

区别在于这个单个数字在二进制中将是 1。所以它不必存储，可以推断。这会增加一点精度。足以使浮点处理器逻辑复杂化以在计算中恢复该 1 的吸引力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T13:43:00.513

前导零在数字的任何表示中都不携带有用信息，因此不需要存储它们。因此，在二进制表示中，最左边的有效数字将始终是 a`1`并且也不需要存储，可以假定它存在。

# asp.net-mvc-3 - 我如何在 Telerik 网格中过滤？

> ID：12038754
> 
> 赞同：1
> 
> 时间：2012-08-20T13:36:51.137
> 
> 标签：asp.net-mvc-3, razor, telerik

我正在 NopCommerce 的 Telerik 网格上进行一些定制。我想在名为 PercentageCompleted 的一列中实现过滤。现在我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:17:28.373

您可以在 Telerik Demo site for MVC Extension 上查看以下 Grid 示例：

[http://demos.telerik.com/aspnet-mvc/razor/grid](http://demos.telerik.com/aspnet-mvc/razor/grid)

我们将此演示称为 Telerik MVC Extension based Grid 的第一次外观。在此示例中，网格绑定到 Northwind 数据库的订单表。这是剃刀查看代码：

```
@(Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Bound(o => o.OrderID).Width(100);
            columns.Bound(o => o.ContactName).Width(200);
            columns.Bound(o => o.ShipAddress);
            columns.Bound(o => o.OrderDate).Format("{0:MM/dd/yyyy}").Width(120);
        })
        .DataBinding(dataBinding => 
        {
            dataBinding.Server().Select("FirstLook", "Grid", new { ajax = ViewData["ajax"] });
            dataBinding.Ajax().Select("_FirstLook", "Grid").Enabled((bool)ViewData["ajax"]);
        })
        .Scrollable(scrolling => scrolling.Enabled(true))
        .Sortable(sorting => sorting.Enabled(true))
        .Pageable(paging => paging.Enabled(true))
        .Filterable(filtering => filtering.Enabled(true))
        .Groupable(grouping => grouping.Enabled(true))
        .Footer((true)
) 
```

可以看到，我们需要先设置全局开关

```
.Filterable(filtering => filtering.Enabled(true)) 
```

它告诉网格它是否可过滤。一旦我们打开这个开关，列集合中的所有列都会；默认情况下对它们进行过滤。

在您的情况下，您只想启用过滤器一列。为了实现这一点，您需要手动关闭那些不需要的列上的过滤功能。例如，在上面的代码中，我想禁用 OrderID 和 OrderDate 列上的过滤器选项。实现这一点的代码如下：

```
@(Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Bound(o => o.OrderID).Width(100).Filterable(false);
            columns.Bound(o => o.ContactName).Width(200);
            columns.Bound(o => o.ShipAddress);
            columns.Bound(o => o.OrderDate).Format("{0:MM/dd/yyyy}").Width(120).Filterable(false);
        })
        .DataBinding(dataBinding => 
        {
            dataBinding.Server().Select("FirstLook", "Grid", new { ajax = ViewData["ajax"] });
            dataBinding.Ajax().Select("_FirstLook", "Grid").Enabled((bool)ViewData["ajax"]);
        })
        .Scrollable(scrolling => scrolling.Enabled(true))
        .Sortable(sorting => sorting.Enabled(true))
        .Pageable(paging => paging.Enabled(true))
        .Filterable(filtering => filtering.Enabled(true))
        .Groupable(grouping => grouping.Enabled(true))
        .Footer((true)
) 
```

希望这能回答你的问题。

Lohith (Tech Evangelist, Telerik India)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:55:50.940

像这样将 .Filterable 添加到网格定义中

```
@Html.Telerik().Grid(Model)
        .Name("Grid")
        .Filterable() 
```

这使得所有具有简单数据类型的列都可以过滤。要指定列，请添加

```
.Filterable(true) 
```

或者

```
.Filterable(false) 
```

到每个列定义

# extjs - 为什么这些选择器在 this.control() 中对 ExtJS ComboBox 失败？

> ID：12038762
> 
> 赞同：1
> 
> 时间：2012-08-20T13:37:13.523
> 
> 标签：extjs, combobox, css-selectors

我在表单上的视图文件中设置的字段中有以下 2 个组件。

```
Ext.define('App.view.prospects.Filter', {
    alias:                             'widget.prospectsfilter',
    extend:                            'Ext.form.Panel',
    itemId:                            'prospectsfilter', 

...

initComponent:                      function(){

...

this.testButton = Ext.create('Ext.button.Button', {     
        handler:                    function() {this.fireEvent('testEvent')},
        iconCls:                   'icon-apply_16x16',
        itemId:                    'testButton',
        text:                      'Test'
    });

this.campaignsComboBox = Ext.create('Ext.form.field.ComboBox', {
        anchor:                    '100%',
        displayField:              'name',
        fieldLabel:                'Campaign(s)',
        itemId:                    'campaignsComboBox',
        labelWidth:                 90,
        listConfig:                 {
            minWidth:               150  
        },
        listeners:                  {
            select:                 function() {this.fireEvent('testEvent');}
        },
        multiSelect:                false,
        queryMode:                 'local',
        store:                      this.campaignsStore,
        value:                      null,
        valueField:                'id'
    }); 
```

现在，在控制器中，我有：

```
Ext.define('App.controller.ProspectsFilter', {
    extend:                            'Ext.app.Controller',    
    models:                             ['Prospect'],
    stores:                             ['Prospects'],
    views:                              ['prospects.Filter'],

...

    init:                               function() {
        this.control({
           'prospectsfilter #testButton':{
                testEvent:              function(){console.log('Found #testButton!');}
           },

           'prospectsfilter #campaignsComboBox':{
                 testEvent:              function(){console.log('Found #campaignsComboBox!');}
        }
    }
}); 
```

当我单击“testButton”时，我会在控制台中看到找到它的消息。

但是，当我在 中进行选择时`campaignsComboBox`，什么也没有发生。

为什么？

更新：

以下是一个很好的测试，但未能确定根本原因。我添加了其他组件进行测试，文本字段的事件被很好地捕获。其他人失败。为什么？

这是更新的控制器：

```
Ext.define('MyApp.controller.ProspectsFilter', {

extend:                            'Ext.app.Controller',

models:                             ['Prospect'],
stores:                             ['Prospects'],
views:                              ['prospects.Filter'],

init:                               function() {

    this.control({
        'prospectsfilter #campaignsComboBox' : {
            render:                 this.comboRender,
            select:                 this.comboSelect
        },
        'prospectsfilter #campaignsDateField' : {
            render:                 this.dateRender,
            select:                 this.dateSelect
        },
        'prospectsfilter #campaignsTextField' : {
            render:                 this.textRender,
            change:                 this.textChange
        }
    });

},

comboRender: function(combobox)  {console.log('comboRender');}, // Never executes.
comboSelect: function(combobox)  {console.log('comboSelect');}, // Never executes.
dateRender:  function(dateField) {console.log('dateRender'); }, // Never executes.
dateSelect:  function(dateField) {console.log('dateSelect'); }, // Never executes.
textRender:  function(textField) {console.log('textRender'); }, // Executes.
textChange:  function(textField) {console.log('textChange'); }  // Executes.
}); 
```

这是更新的视图：

```
Ext.define('MyApp.view.prospects.Filter', {

alias:                             'widget.prospectsfilter',
extend:                            'Ext.form.Panel',
itemId:                            'prospectsfilter',

....

initComponent:                      function(){

    ....

    this.dateField = Ext.create('Ext.form.field.Date',{
        fieldLabel:                'Date',
        itemId:                    'campaignsDateField'
    });

    this.textField = Ext.create('Ext.form.field.Text',{
        fieldLabel:                'Text',
        itemId:                    'campaignsTextField'
    });

    this.campaignsComboBox = Ext.create('Ext.form.field.ComboBox', {
        anchor:                    '100%',
        displayField:              'name',
        fieldLabel:                'Campaign(s)',
        itemId:                    'campaignsComboBox',
        labelWidth:                 90,
        listConfig:                 {
            minWidth:               150  
        },
        multiSelect:                false,
        queryMode:                 'local',
        store:                      Ext.create('Ext.data.ArrayStore', {
            fields:                 ['name'],
            data:                   [['entry1'], ['entry2'], ['entry3']]
        }),
        tabindex:                   7,
        value:                      null,
        valueField:                'id'
    });

    this.statusToSegmentFieldSet = Ext.create('Ext.form.FieldSet', {
        anchor:                    '100%',
        autoHeight:                 true,
        collapsed:                  true,
        collapsible:                true,
        defaults:                   {
            editable:               false,
            forceSelection:         false
        },
        items:                      [                                   
            this.dateField,
            this.textField,
            this.campaignsComboBox
        ],
        layout:                    'anchor',
        margin:                    '10 10 10 10',
        title:                     'Dispositions, Campaigns, Segments'
    });

    .......

    var config = {        
        autoRender:                 true,
        autoScroll:                 true,
        bodyStyle:                 'background-color: #F1F1F1;',
        border:                     true,
        //buttons:                    [
        //    this.applyButton,
        //    this.clearButton
        //],
        collapsed:                  false,
        collapsible:                true,
        frame:                      true,
        height:                     200,
        items:                      [
            //this.datePicker,
            //this.dateRangeFieldSet,
            //this.prospectDetailsFieldSet,
            this.statusToSegmentFieldSet
            //this.assignedToFieldSet
        ],
        layout:                    'anchor',
        minWidth:                   300,
        region:                    'east',
        split:                      true,
        stateId:                   'prospectsModuleFilter',
        title:                     'Advanced Filters',
        width:                      300            
    };

    Ext.apply(this, Ext.apply(this.initialConfig, config));
    this.callParent(arguments);

}
}); 
```

更新：8月28日：

好的。我进一步缩小了范围，以至于我可以重现我们在 JSFiddle 中遇到的问题。

希望这将使某人很容易帮助我找出问题所在。

请在此处阅读 JSFiddle 的注释：http: [//jsfiddle.net/4JubT/3/](http://jsfiddle.net/4JubT/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:59:49.347

**编辑**：你是正确的 # 也可以归因于 itemId 属性 - 我不知道，所以谢谢！是的，不推荐使用 ID 属性。

因此，我将您的组合框放入我的 jsfiddle 示例中，并使其正常工作。我认为您的代码没有任何问题，也许您使用的是过时的库版本？看一看： http: [//jsfiddle.net/dbrin/etxwP/](http://jsfiddle.net/dbrin/etxwP/) 单击创建按钮以显示表单 - 抱歉旧示例。

**编辑 2： http:** [//jsfiddle.net/dbrin/4JubT/6/](http://jsfiddle.net/dbrin/4JubT/6/)你有一个依赖问题，不能使用所有类的 ext-all。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:24:03.290

问题是您的第二个事件侦听器中的“this”关键字设置不正确。

您的按钮事件侦听器可以正常工作，因为通过使用“处理程序”属性来注册侦听器 ExtJs 将函数自动绑定到当前按钮对象。

这就是文档所说的`Ext.button.Button#scope`：

> scope : Object 执行处理程序和切换处理程序的范围（此引用）。默认为此按钮。

但是，当使用“listener”属性注册监听器时，必须指定“scope”属性，否则“this”引用指向全局窗口对象。

查看[listener 属性的文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-method-addListener)

在您的情况下，最好的方法可能是像这样注册侦听器：

```
this.campaignsComboBox = Ext.create('Ext.form.field.ComboBox', { .. });
this.campaignComboBox.on( 'select', 
                          function() { this.fireEvent('testEvent'); }, 
                          /* 'scope' aka 'this' reference: */ this.campaignsComboBox); 
```

**更新**

这是一个有效的 jsfiddle：http: [//jsfiddle.net/nXSAN/](http://jsfiddle.net/nXSAN/)

在侦听器中获得正确引用的另一种方法是使用第一个函数参数，它实际上是对 ComboBox 对象的引用（在`select`事件的情况下）：

```
 function(cmp) { cmp.fireEvent('testEvent'); } 
```

**UPDATE2** Sencha（或我的提供商）在使用 Sencha 的 CDN 时遇到了问题，所以这里有一个“离线”版本。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Extjs</title>
    <link rel="stylesheet" type="text/css" href="extjs-4.1.1/resources/css/ext-all.css"/>
    <script type="text/javascript" src="extjs-4.1.1/ext-all.js"></script>
    <script type="text/javascript">
        Ext.define('App.view.prospects.Filter', {
            alias: 'widget.prospectsfilter',
            extend: 'Ext.form.Panel',
            itemId: 'prospectsfilter',

            height: 50,
            width: 100,
            layout: 'fit',

            initComponent: function() {

                this.combo = Ext.create('Ext.form.field.ComboBox', {
                    itemId: 'campaignsComboBox',
                    text: 'Test',

                    queryMode: 'local',
                    displayField: 'name',
                    valueField: 'name',

                    store: Ext.create('Ext.data.ArrayStore', {
                        fields: ['name'],
                        data: [ ['entry1'], ['entry2'], ['entry3'] ]
                    }),

                    listeners: {
                        select: function() {
                            this.fireEvent('testEvent')
                        }
                    }
                });

                this.items = [
                    this.combo
                ];

                this.callParent(arguments);
            }
        });

        Ext.define('App.controller.ProspectsFilter', {
            extend: 'Ext.app.Controller',

            init: function() {
                this.control({
                    'prospectsfilter #campaignsComboBox': {
                        'testEvent': function() {
                            console.log('Found #campaignsComboBox!');
                        }
                    }
                });
            }
        });

        Ext.application({
            name: 'App',
            autoCreateViewport: false,
            launch: function() {
                Ext.create('App.view.prospects.Filter', { renderTo: Ext.getBody() });
                var controller = Ext.create('App.controller.ProspectsFilter', { application: this });
                controller.init(this);
            }
        });
    </script>
</head>
<body></body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:42:41.573

您确定“选择”事件会在您的侦听器中触发吗？尝试在那里登录。

除此之外，您为什么要触发自定义事件？您可以直接收听控制器中的选择事件。

**编辑** 我刚刚查看了我的一个项目，我们使用了 select 事件。因此，请尝试登录您触发自定义事件的初始侦听器。

# arrays - 循环中的 Bash 数组变量

> ID：12038764
> 
> 赞同：0
> 
> 时间：2012-08-20T13:37:28.360
> 
> 标签：arrays, bash

我想从循环语句中存储一个变量（**$random**） - 目前只打印循环中的最后一条语句。请注意，我想在循环之外使用这个变量。

```
#!/usr/bin/env bash

for backup in $(s3cmd ls s3://bucket/ | awk '{ print $2 }')
do
latest=$(s3cmd ls $backup | awk '{ print $2 }'  | sed -n '$p')
random=$(s3cmd ls $latest | shuf | awk '{ print $4 }' | sed -n '1p')
        s3cmd get $random $data_dir >/dev/null 2>&1
done

echo "$random 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:50:22.410

您的要求并不完全清楚，但我认为您是在说您想记录`$random`在循环执行期间收到的每个值。

```
declare -a randoms

for backup in $(s3cmd ls s3://bucket/ | awk '{ print $2 }')
do
latest=$(s3cmd ls $backup | awk '{ print $2 }'  | sed -n '$p')
random=$(s3cmd ls $latest | shuf | awk '{ print $4 }' | sed -n '1p')
        s3cmd get $random $data_dir >/dev/null 2>&1
randoms+=( $random )
done

echo ${randoms[@]} 
```

# python - Python urllib在Firefox中的不同结果

> ID：12038771
> 
> 赞同：0
> 
> 时间：2012-08-20T13:37:43.403
> 
> 标签：python, firefox, user-agent, urllib

我正在尝试为名为 derstandard.at 的奥地利报纸的留言板编写一个网络爬虫程序。我对交互感兴趣，想对用户进行网络分析。我能够检索我想要的所有内容，但是在更改留言板页面时它根本不起作用。

使用 Firefox，我可以通过更改 url 中的一个数字来简单地访问我想要的页面，例如第 5 页

[http://derstandard.at/1345164506806/Umfrage-FPOe-auf-tiefstem-Stand-seit-mehr-als-zwei-Jahren?seite=5#forumstart](http://derstandard.at/1345164506806/Umfrage-FPOe-auf-tiefstem-Stand-seit-mehr-als-zwei-Jahren?seite=5#forumstart)

当我尝试从我的 python 脚本中访问它时，我总是得到第 1 页。

首先，我认为这是因为我的用户代理，但我将其更改为我的 firefox 用户代理，仍然总是得到第 1 页。为什么会这样？

这是相关的代码片段：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import urllib
from BeautifulSoup import BeautifulSoup

from urllib import FancyURLopener
class MyOpener(FancyURLopener):
    version = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:14.0) Gecko/20100101 Firefox/14.0.1'

f_open=MyOpener()

page=BeautifulSoup(f_open.open('http://derstandard.at/1345164506806/Umfrage-FPOe-auf-tiefstem-Stand-seit-mehr-als-zwei-Jahren?seite=5#forumstart')) 
```

打印页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:14:31.167

根据OP。我对他的评论解决了这个问题。

我的评论：

> 也许是“#”，我听说它有时会导致错误，请将 ar 放在搜索字符串的开头。像 r'http://derstandard.at/1345164506806/Umfrage-FPOe-auf-tiefstem-Stand-seit-mehr‌​-als-zwei-Jahren?seite=5#forumstart'

所以这似乎是一个简单的错误。

# scala - Scala 简化了嵌套的单子

> ID：12038772
> 
> 赞同：2
> 
> 时间：2012-08-20T13:37:46.407
> 
> 标签：scala, monads, monad-transformers

我有一些用 Lift 编写的代码。基本上它的嵌套框（类似于选项的单子）。如果可能的话，我想把它简化一点。最好添加类型参数，以便在需要时可以轻松地将其更改为字符串或双精度。这是代码

```
tryo(r.param("boolean parameter").map(_.toBoolean)).map(_.openOr(false)).openOr(false) 
```

如果发生异常并且 r 是 Req 对象，“tryo”是用于在 Box 中捕获和包装结果的辅助函数。“param”函数返回 Box[String]（来自请求参数）。我想让它适用于 Int 的 String 等，如果可能的话，摆脱嵌套的 map/openOr （getOrElse 在你认为在 Option 类型中）。

单子变压器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:52:13.797

`flatMap`那个狗屎！

```
r.param("boolean parameter").flatMap(tryo(_.toBoolean)).openOr(false) 
```

或者，使用 for 理解：

```
val result = for {
  param <- r.param("boolean parameter")
  bool <- tryo(param.toBoolean)
} yield bool
result openOr false 
```

但这并不能解决您获得不同类型的能力。为此，我建议如下：

```
def asOrDefault[T](input: Box[Any])(default: => T): T = input.flatMap(tryo(_.asInstanceOf[T])).openOr(default)

asOrDefault(r.param("any param"))(0) 
```

这是未经测试的......另请注意，这`scala.util.control.Exception.allCatch.opt()`将返回a`Option`就像`tryo`返回 a一样`Box`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:09:22.897

如果要抽象类型，则需要同时抽象默认值和字符串的转换：

```
case class Converter[T]( default: T, fromString: String => T ) 
```

然后为您的类型定义隐式实例：

```
implicit val intConverter = Converter[Int]( 0, _.toInt )
implicit val boolConverter = Converter[Boolean]( false, _.toBoolean ) 
```

最后，使用 pr1001 答案，使用隐式提供的转换器值：

```
def asOrDefault[T](input: Box[String])(implicit conv: Converter[T]): T = input.flatMap(
  s => tryo( conv.fromString(s))).openOr(conv.default) 
```

编译器将为您选择适当的转换器实例：

```
asOrDefault[Int]( input.param("some int param") )
asOrDefault[Boolean]( input.param("some boolean param") ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:10:07.263

我在@pr1001 和@paradigmatic 基础上构建的稍微调整的版本。

```
case class Converter[T]( fromString: String => T )

implicit val boolConverter = Converter(_.toBoolean) 

implicit val intConverter = Converter(_.toInt)

def asOrDefault[T](input: Box[String], default: T)(implicit conv: Converter[T]): T =       
  input.flatMap( s => tryo(conv.fromString(s))).openOr(default) 
```

在我的情况下使用：

```
def prettyPrint(implicit r: Req) = asOrDefault(r.param("prettyPrint"), false)

def maxResults(implicit r: Req): Int = asOrDefault(r.param("maxResults"), 20) 
```

# ruby-on-rails - puppet 中是否有 Rails 模块

> ID：12038775
> 
> 赞同：0
> 
> 时间：2012-08-20T13:37:57.087
> 
> 标签：ruby-on-rails, puppet

[http://forge.puppetlabs.com](http://forge.puppetlabs.com) - 是否有用于在 Ubuntu 机器上使用 puppet 部署 Rails 的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:06:55.140

您可以编写一个模块来使用 puppet 部署 Rails，如下所示：/puppet/modules/rails/init.pp

```
class rails {
$package = ["rails"]

package { $package:
       ensure => installed,
}

} 
```

/puppet/manifests/site.pp

```
node * {
      include rails
} 
```

# objective-c - Presenting modal view controller from another presented modal view controller

> ID：12038779
> 
> 赞同：0
> 
> 时间：2012-08-20T13:38:01.510
> 
> 标签：objective-c, ios, xcode, ipad, modalviewcontroller

I have a presented view controller that will then present another view controller. The second view controller does not make views beneath it transparent or disable any below views controls. Has anybody ran into this and how were you able to fix it??

```
//view controller for invalid username/password popup
IncorrectPasswordViewController *viewController = [[IncorrectPasswordViewController alloc] init];
viewController.view.layer.borderColor = [UIColor whiteColor].CGColor;
viewController.view.layer.borderWidth = 3.0f;

//push the modal on the screen
viewController.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentViewController:viewController animated:YES completion: nil];
CGRect r = CGRectMake(self.view.bounds.size.width/2 - 150,
                      self.view.bounds.size.height/2 - 70,
                      300, 140);
r = [self.view convertRect:r toView:viewController.view.superview.superview];
viewController.view.superview.frame = r; 
```

# function - CakePHP custom functions used in controllers and models

> ID：12038780
> 
> 赞同：-1
> 
> 时间：2012-08-20T13:38:02.447
> 
> 标签：function, cakephp, redirect, controller

I'm a function, CakePHP and OOPHP noob so please be patient with me ;)

I have a 301 redirect script I use in the view function of the controllers to compare the slug in the url to the slug in the db and if they don't match 301 redirect to the url with the right slug

I'm trying to turn it into custom functions but I haven't had much success...

This is the code:

```
$pieces = explode('__', $this->params['pass'][0]);

    if (!isset($pieces[2])) {
        if ($pieces[1] != $this->Smartphone->field('slug')) {
            $this->redirect(array('action' => 'view', $this->Smartphone->field('id').'__'.$this->Smartphone->field('slug')));
        }
    } 
```

My guess is a function would look something like:

```
public function 301redirect($model) {
    $pieces = explode('__', $this->params['pass'][0]);

if (!isset($pieces[2])) {
    if ($pieces[1] != $this->Smartphone->field('slug')) {
        $this->redirect(array('action' => 'view', $this->$model->field('id').'__'.$this->$model->field('slug')));
    }
} 
```

}

Can you guys tell me what I should put where to get this function to work?

Thnx!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:50:29.493

这听起来像是自定义组件的工作（[http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component](http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component)）

组件允许您将功能打包在一起并在控制器之间共享它们。

# javascript - 三星智能电视唯一设备标识符

> ID：12038781
> 
> 赞同：5
> 
> 时间：2012-08-20T13:38:04.643
> 
> 标签：javascript, samsung-smart-tv

我正在尝试以编程方式从三星智能电视设备获取某种唯一设备标识符。

我在文档中找到的最接近的东西是对象`GetDUID`上的函数`SAMSUNG-INFOLINK-NNAVI`，但它需要提供 mac 地址，这让我对这个函数的真正用途感到困惑。

我的问题：如何获取例如设备序列号或其他唯一标识它的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T16:42:46.370

因此，对于[SamsungDForum](http://www.samsungdforum.com)，获取[DUID](http://www.samsungdforum.com/Guide/?FolderName=API00001&FileName=NNavi_183.html)（“设备唯一 ID”）的方法是：

在 index.html 中添加：

```
<object id='pluginNetwork' border=0 classid='clsid:SAMSUNG-INFOLINK-NETWORK'></object>
<object id='pluginObjectNNavi' border=0 classid='clsid:SAMSUNG-INFOLINK-NNAVI'></object> 
```

在你的 Javascript 中某处ː

```
var networkPlugin = document.getElementById('pluginNetwork');
var nnaviPlugin = document.getElementById('pluginObjectNNavi');
var deviceId = nnaviPlugin.GetDUID(networkPlugin.GetHWaddr()); 
```

我知道你已经看到了，但老实说，我认为没有其他解决方案。

编辑：如果您正在寻找获取设备 ESN（电子序列号）的方法，请查看[@IvanSontsev 的答案。](https://stackoverflow.com/questions/12038781/samsung-smart-tv-unique-device-identifier/13910224?#13910224)

edit2：更新了 DUID 官方文档链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:53:09.397

您可以使用[GetESN](http://www.samsungdforum.com/Guide/ref00011/deviceapi_externalwidgetinterface_getesn.html)功能

在 html 中：

```
<object id='pluginExternal' border=0 classid='clsid:SAMSUNG-INFOLINK-EXTERNALWIDGETINTERFACE'></object> 
```

在 JavaScript 中：

```
var ExternalWidgetInterface = document.getElementById('pluginExternal');
var sn = ExternalWidgetInterface.GetESN("NFLX"); 
```

# optimization - intersectRaySphere x86 fpu asm 例程 - 如何优化

> ID：12038785
> 
> 赞同：1
> 
> 时间：2012-08-20T13:38:16.097
> 
> 标签：optimization, assembly, x86, fpu

你好，我有一些 c 程序：

```
 inline float intersectRaySphere(float3* rayO, float3* rayV, float3* sO, float sR)
    {
    static float3 Q;

    Q = sub(sO,rayO);

    float cc = dot(&Q,&Q);
    float v = dot(&Q,rayV);
    float d = sR*sR - (cc - v*v);

    // If there was no intersection, return -1
    if (d < 0.0) return (-1.0f);
    // Return the distance to the [first] intersecting point
    return (v - sqrt(d));
    } 
```

我试图用 x86 fpu asm 重写它并创建这样一个

```
 _asm_intersectRaySphere:; Function begin
    push    ebp                                     ; 0000 _ 55
    mov     ebp, esp                                ; 0001 _ 89\. E5
    add     esp, -20                                ; 0003 _ 83\. C4, EC
    mov     eax, dword [ebp+8H]                     ; 0006 _ 8B. 45, 08
    mov     ecx, dword [ebp+0CH]                    ; 0009 _ 8B. 4D, 0C
    mov     edx, dword [ebp+10H]                    ; 000C _ 8B. 55, 10
    fld     dword [edx]                             ; 000F _ D9\. 02
    fsub    dword [eax]                             ; 0011 _ D8\. 20
    fld     dword [edx+4H]                          ; 0013 _ D9\. 42, 04
    fsub    dword [eax+4H]                          ; 0016 _ D8\. 60, 04
    fld     dword [edx+8H]                          ; 0019 _ D9\. 42, 08
    fsub    dword [eax+8H]                          ; 001C _ D8\. 60, 08
    fld     st2                                     ; 001F _ D9\. C2
    fmul    st0, st(0)                              ; 0021 _ DC. C8
    fld     st2                                     ; 0023 _ D9\. C2
    fmul    st0, st(0)                              ; 0025 _ DC. C8
    fld     st2                                     ; 0027 _ D9\. C2
    fmul    st0, st(0)                              ; 0029 _ DC. C8
    faddp   st1, st(0)                              ; 002B _ DE. C1
    faddp   st1, st(0)                              ; 002D _ DE. C1
    fld     dword [ecx]                             ; 002F _ D9\. 01
    fmul    st(0), st4                              ; 0031 _ D8\. CC
    fld     dword [ecx+4H]                          ; 0033 _ D9\. 41, 04
    fmul    st(0), st4                              ; 0036 _ D8\. CC
    fld     dword [ecx+8H]                          ; 0038 _ D9\. 41, 08
    fmul    st(0), st4                              ; 003B _ D8\. CC
    faddp   st1, st(0)                              ; 003D _ DE. C1
    faddp   st1, st(0)                              ; 003F _ DE. C1
    fst     dword [ebp-4H]                          ; 0041 _ D9\. 55, FC
    fmul    st0, st(0)                              ; 0044 _ DC. C8
    fld     dword [ebp+14H]                         ; 0046 _ D9\. 45, 14
    fmul    st0, st(0)                              ; 0049 _ DC. C8
    faddp   st1, st(0)                              ; 004B _ DE. C1
    fsubrp  st1, st(0)                              ; 004D _ DE. E1
    fxch    st3                                     ; 004F _ D9\. CB
    fstp    st0                                     ; 0051 _ DD. D8
    fstp    st0                                     ; 0053 _ DD. D8
    fstp    st0                                     ; 0055 _ DD. D8
    ftst                                            ; 0057 _ D9\. E4
    fwait                                           ; 0059 _ 9B
    fnstsw  ax                                      ; 005A _ DF. E0
    fwait                                           ; 005C _ 9B
    sahf                                            ; 005D _ 9E
    jc      ?_001                                   ; 005E _ 72, 07
    fsqrt                                           ; 0060 _ D9\. FA
    fsubr   dword [ebp-4H]                          ; 0062 _ D8\. 6D, FC
    jmp     ?_002                                   ; 0065 _ EB, 06

     ?_001:  
    fstp    st0                                     ; 0067 _ DD. D8
    fld1                                            ; 0069 _ D9\. E8
    fchs                                            ; 006B _ D9\. E0
     ?_002:  
    mov     esp, ebp                                ; 006D _ 89\. EC
    pop     ebp                                     ; 006F _ 5D
    ret                                             ; 0070 _ C3
    ; _asm_intersectRaySphere End of function 
```

经过测试，它工作正常，c 例程大约需要 150 个周期（在我 6 或 7 岁的奔腾 4 上），我的 asm 例程大约需要 66 个周期（*） - 所以这是一个很好的改进，但也许它也可以还是有所改善？

tnx

（*）我在随机输入数据上测试时不太小心，所以可能是“非交叉”原因 - 不涉及 sqrt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:10:24.287

我会替换这个：

```
fstp st0
fstp st0
fstp st0
ftst
fwait
fnstsw  ax
fwait
sahf
jc ?__001 
```

这样：

```
fcompp
fstp st0
fldz
fcomip st0, st1
ja ?__001 
```

`fnstsw`不是很快，`sahf`也不是很好，尤其是在 P4 上。如果你不能使用`fcomi`（即如果它必须在 P1 或 PMMX 上工作），你仍然可以`sahf`通过直接测试来跳过`ax`。

# asp.net-mvc - 如何在实体框架中对 FK 属性应用投影？

> ID：12038787
> 
> 赞同：1
> 
> 时间：2012-08-20T13:38:20.013
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

使用这个[答案](https://stackoverflow.com/a/11978226/637677 "回答")，我现在可以将我的投影逻辑存储在一个中`Expression`并在另一个投影中使用它。

但是，当我开始在我的解决方案中实现此方法时，我发现我无法使用存储`Expression`在作为单个 FK（不是集合）的 Navigation 属性上的内容。

下面的代码演示了这个问题：

```
namespace Entities
{
    public class BlogPost
    {
        public virtual int BlogPostId { get; set; }
        public virtual string Title { get; set; }

        public virtual string NotUsed { get; set; }

        public virtual User Author { get; set; }
    }

    public class User
    {
        public virtual int UserId { get; set; }
        public virtual string Name { get; set; }
        public virtual string NotUsed { get; set; }

        public virtual ICollection<BlogPost> BlogPosts { get; set; }
    }
}

namespace Models
{
    public class BlogPostModel
    {
        public string Title { get; set; }
        public UserModel Author { get; set; }
    }

    public class UserModel
    {
        public string Name { get; set; }
    }

    public static class BlogPostModelExtensions
    {
        public static readonly Expression<Func<BlogPost, BlogPostModel>> ToModelConverterExpression =
            p =>
            new BlogPostModel
            {
                Title = p.Title,
                Author = null, //Problem!
                // I need to convert User (p.Author) to UserModel using UserModelExtensions.ToModelConverterExpression
            };
    }

    public static class UserModelExtensions
    {
        public static readonly Expression<Func<User, UserModel>> ToModelConverterExpression = 
            u => new UserModel{ Name = u.Name, };
    }
} 
```

是否可以使用将单个 FK 导航属性转换为模型`Expression`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:50:26.120

目前这可能以一种过于复杂的方式实现：

```
p =>
new BlogPostModel
{
    ...,
    Author = new[] { p }.AsQueryable().Select(UserModelExtensions.ToModelConverterExpression).FirstOrDefault()
} 
```

然而，生成的 SQL 虽然是正确的，但却是不必要的复杂和缓慢。据我所知，目前还没有任何方法可以直接获得您想要的东西，但我一直在寻找同样的东西，并且我有一个用于开源的概念验证补丁，用于即将成为 EF-我计划提交以供包含的 6.0，请参阅[讨论线程](https://entityframework.codeplex.com/discussions/394377)和[更改](https://entityframework.codeplex.com/SourceControl/network/forks/hvdijk/entityframework/changeset/eb7219a484c3)。

# javascript - jQuery .click 元素背后的元素堆叠错误？

> ID：12038797
> 
> 赞同：1
> 
> 时间：2012-08-20T13:38:40.650
> 
> 标签：javascript, jquery, html, css

我有一个“灯箱”类似的功能，它只是带来了 2 个像这样的 div：

![http://i.imgur.com/3ZhEz.jpg](../Images/5f5f8e83dd4f8cab801a11433baf764c.png)

绿色（一旦工作就不会着色）是单击以关闭登录框的区域。

jsFiddle 代码：http: [//jsfiddle.net/bhcGv/8/](http://jsfiddle.net/bhcGv/8/)

当您单击登录框时，它会消失，因为它认为它单击了绿色框。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:46:55.467

你需要 .stopPropagation 方法。

这里更新的jsfiddle：http: [//jsfiddle.net/bhcGv/10/](http://jsfiddle.net/bhcGv/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:44:40.477

您可以添加此代码

```
.find('#centeredBox').click(function(e){
        e.preventDefault();
        e.stopPropagation();
return false;
    }); 
```

所以你的 document.ready 函数变成了

```
$(document).ready(function(){
    $("#loginOffBox").click(function(){
        $('#loginOffBox').hide();
          $('#centeredBox').hide();
    }).find('#centeredBox').click(function(e){
        e.preventDefault();
        e.stopPropagation();
return false;
    });
    // other js
}); 
```

当您单击居中的 div 时，这应该会停止运行事件。

您也可以将居中的 div 从有色的 div 中取出。那么你不会有事件气泡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:46:19.660

您想修复两个 div 的 z-index。背景 div 的 z-index 应该比弹出 div 小，并且两者都应该具有相对较高的值。

尝试 loginOffBox 的 z-index 为 1000，centeredBox 的 z-index 为 1100，它应该可以正常工作。

# php - IE9 XMLHTTPRequest 请求正文不完整但 readyState=4 状态码=200

> ID：12038798
> 
> 赞同：5
> 
> 时间：2012-08-20T13:38:42.093
> 
> 标签：php, javascript, json, xmlhttprequest

我在 IE9 中遇到 XMLHTTPRequest 的请求正文*不完整*的问题。

处理 XMLHTTPRequest 的代码等待 readyState=4，然后检查 statuscode=200。然后它将继续，`JSON.parse`但由于请求正文*不完整*而失败。当我检查请求正文时，我可以清楚地看到它在字符串中的某个点被截断，例如在属性的中间。

服务器端几乎没有什么要检查的，这只是一个问题`echo json_encode($reply);`

我知道 AJAX 错误可能来自多种来源，例如：过度渴望的防火墙，但这会伴随着适当的状态，例如 (like `403`)。在这种情况下，XMLHTTPRequest 响应似乎认为一切都很好，所以我不知道如何检测它。我可以检查另一个属性，还是 IE9 可能会切断长响应体？

我将继续对此进行调查，但由于我自己无法复制它，这可能需要几天时间。

**任何人都可以确认这些问题并可能指出我的解决方案吗？**

**注意：**这似乎只发生在 IE9 中，我想这是因为旧版本不使用 XMLHTTPRequest 而是使用 ActiveXObject。至少在 Chrome 或 Firefox 中不会发生这种情况：我还没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:56:49.440

听起来您的 HTTP 响应标头包含一个`Content-Length`标头，该标头声称 JSON 正文比实际短。

检查是否是这种情况，找出添加的位置并更正或删除它。

# database - Save address to database in gps tracking

> ID：12038801
> 
> 赞同：1
> 
> 时间：2012-08-20T13:38:49.200
> 
> 标签：database, google-maps, map, gps, postgresql-9.1

which is suitable approach in gps tracking web application:
1)Save only latitude and longitude in database,And use reverse Geocoding for showing address of point to user in web application.
2)Save latitude and longitude with reverse geocoded address in database when gps device send latitude and longitude to server.
But i have problem for each approach:
for first approach: When i want to show history of fleet locations to user i need to reverse geocoding many point to show addresses of any point to user that it take many time to reverse geocoding with google maps api and other problem is google maps geocoding api has limitation(2500 request per day).
for second approach:If i save address of latitude and longitude in database because every 2 minutes gps device send new point to server and saving these addresses to database can make redundancy at database! or increase database.I use postgresql DBMS and i don't know how many data can i save on the database.
How can i solve this problem?
You can see history of fleet in the following picture with populated with addresses!.But i don't know how they can implemented it!.
![enter image description here](../Images/beedd5765163eaea521a02012a15b2a2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:38:21.457

数据库中的数据量不是问题。

地理编码的最佳做法是在数据输入时进行。这样，您可以在需要时聚合它，并在报告中快速显示它，而无需重复地理编码。您将需要找到可以处理您的流量负载的地理编码提供商。鉴于您的需求，可能值得购买地址数据库并自己进行地理编码。

# django - 为表单django创建选择

> ID：12038802
> 
> 赞同：0
> 
> 时间：2012-08-20T13:38:50.183
> 
> 标签：django, forms, select, widget, init

我正在尝试创建一个表单，您必须在其中选择一年。我很确定这真的很容易，但我不知道为什么会出现一些错误。

主要错误是这样的：

```
'AbiturForm' object has no attribute 'fields' 
```

我的班级形式为：

```
class AbiturForm(forms.Form):
    year=forms.CharField(widget=forms.Select(),required=False)
    abitur=forms.BooleanField(required=False)
    def __init__(self):
        choices=[(x,x) for x in range(1900,2000)]
        self.fields['year'].choices=choices 
```

我的模板：

```
{% extends "home/portal.html" %}

{% block body %}
<div id="content-main">
<div class="module">
<h2>Suche:</h2>
<form action="/suchen/abitur/" method="post">
{% csrf_token %}
<table>
    <tr>
        <td><label><b>Jahr:</b></label></td>
        <td>
            <select style="width:200px" name="year" id="year">
            </select>
        </td>
    </tr>
    <tr>
        <td><label><b>Abitur?:</b></label></td>
        <td>                
            <input type="checkbox" name="abitur" id="abitur" class="texto"  />
        </td>
    </tr>
</table>
<input type="submit" value="Speichern" class="button"/>
</form>
</div>
</div>
{% endblock %} 
```

任何帮助，将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:42:12.270

在您调用 super 之前，不会设置字段。尝试：

```
class AbiturForm(forms.Form):
    year=forms.CharField(widget=forms.Select(),required=False)
    abitur=forms.BooleanField(required=False)
    def __init__(self):
        super(AbiturForm, self).__init__()
        choices=[(x,x) for x in range(1900,2000)]
        self.fields['year'].choices=choices 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:51:14.863

`__init__`zsquare 是正确的，但请注意，除非您想动态构建选择，否则无需覆盖。通常你会在声明中这样做：

```
class AbiturForm(forms.Form):
    year = forms.ChoiceField(choices=[(x, x) for x in range(1900, 2000)], required=False) 
```

需要注意的几点：使用它可能会更好`ChoiceField`（它已经默认为 Select 小部件），并且请注意 PEP8 格式的标点符号周围的空格。

# c# - How can I set Icons with different size via API with c#?

> ID：12038804
> 
> 赞同：2
> 
> 时间：2012-08-20T13:38:58.637
> 
> 标签：c#, winforms, icons

> **Possible Duplicate:**
> [Selecting the size of a System.Drawing.Icon?](https://stackoverflow.com/questions/4025401/selecting-the-size-of-a-system-drawing-icon)

I want set a different Icon for my application System.Drawing.Form depending on its state. There is the property Icon. The problem is that the Icon object has only one image size which is used for different sizes from the system.

Is there a solution with which I can set multiple Icons for a Form via API?

# sudo - Understanding sudo -E

> ID：12038809
> 
> 赞同：3
> 
> 时间：2012-08-20T13:39:13.290
> 
> 标签：sudo

I wish to run TOMCAT with my current user's permissions, not the root's environment variables.

```
vagrant@dev:~/Workspace/eurekastreams$ echo $JAVA_OPTS
-Xmx1024m -XX:MaxPermSize=128m -Dlog.home=/home/vagrant/Workspace/software/ 
```

I tried, `vagrant$>sudo -E /etc/init.d/tomcat7 start`.

However, my software is not logging to the /home/vagrant/Workspace/software directory, which means, I believe, that the JAVA_OPTS environment variable was not set.

Am I understanding sudo -E correctly that it will perform a command with env vars of the current user?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-31T10:36:29.417

来自`man sudo`：

```
-E, --preserve-env
Indicates to the security policy that the user wishes to preserve their existing 
environment variables. The security policy may return an error if the user does 
not have permission to preserve the environment. 
```

因此，是的，`-E`将使用当前环境变量执行命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:44:42.337

除非您在 sudo 中使用 -u 参数，否则它将以 root 身份运行您的命令。这个怎么样：

```
sudo -u yourusername -l /etc/init.d/tomcat7 start 
```

-u 用户名：以指定用户身份运行命令 -l：使其成为登录 shell，读取启动脚本，例如 .bashrc，我认为这是您设置环境变量的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:52:39.443

关于什么：

```
JAVA_OPTS=$JAVA_OPTS sudo -E /etc/init.d/tomcat7 start 
```

证明：

```
~/Desktop> X=foo sudo bash
 # echo $X

 # exit
exit
~/Desktop> X=foo sudo -E bash
 # echo $X
foo
 # exit
exit
~/Desktop> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T16:47:17.330

我认为这`/etc/init.d/tomcat7`只是一个启动脚本，而不是 tomcat 二进制文件本身，所以 sudo 没有任何意义。您应该编辑此脚本，或者例如将它的另一个副本安装到类似的位置`/home/$USER/bin/`并从那里启动它。

# ios - How to play online radio in iOS

> ID：12038812
> 
> 赞同：0
> 
> 时间：2012-08-20T13:39:23.973
> 
> 标签：ios, iphone, ios5, iostream

I need to play online radio in my application. The url is "[http://v5.player.abacast.com/v5.1/player/?uid=6132](http://v5.player.abacast.com/v5.1/player/?uid=6132)".and I am using below code for playing online radio.

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:    [NSURL URLWithString:@"http://v5.player.abacast.com/v5.1/player/?uid=6132"]];
player.movieSourceType = MPMovieSourceTypeStreaming;
player.view.hidden = YES;
[self.view addSubview:player.view];
[player prepareToPlay];
[player play]; 
```

and I also use iphonestreamplayer both are not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:59:17.040

您可以按需发送实时流或视频，并可选择加密

例如，播放列表和媒体片段文件可用于视频点播或流式广播。

对于直播流，Apple 提供了一个免费工具，可以从携带 H.264 视频、AAC 音频或 MP3 音频的直播 MPEG-2 传输流制作媒体片段文件和播放列表。有许多硬件和软件编码器可以实时创建承载 MPEG-4 视频和 AAC 音频的 MPEG-2 传输流。

Radio Streaming 可以通过[HTTP LIVE STREAMING](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)完成 首先您必须从 apple.developers 下载 http 直播工具。在 mediastreamsegmenter 的帮助下，您可以制作 .ts 文件和 .m3u8（索引文件）。在索引文件的帮助下，您可以播放您的直播电台。

# mysql - 将十六进制/二进制数据导入 mysql

> ID：12038814
> 
> 赞同：10
> 
> 时间：2012-08-20T13:39:28.373
> 
> 标签：mysql, import, blob

我需要将一组具有一个字段作为 blob 的大数据导入 mysql 服务器（5.5）。按照 SELECT INTO OUTFILE 和 LOAD DATA INFILE 的示例，它[几乎] 工作正常。但是，我有一个问题：BLOB 文件中生成的数据实际上具有二进制表示。生成的文件如下所示（第 3 列代表 BLOB 文件）：

```
1,1,"4Vÿ"
2,1,"ª»Ì"
3,1,"Ýîÿ"
4,1,"\"3"

```

在这种情况下，使用以下 sql 语句导入可以正常工作：

```
加载数据文件'C：/temp/mysql/mysqldump.1.txt'
进入表`test_table`
  以 ',' 结尾的字段可选地由 '"' 包围
  以“\r\n”结尾的行
;

```

我的问题是文本是这样偶然生成的。如果出现引号、换行符或其他什么，我需要手动进行转义（即用反斜杠字符替换它们），我想跳过这一步。

所以，我的问题是：有什么方法可以导入具有以下格式的文本文件（BLOB 存储为十六进制）：

```
1, 1, 0x123456FF
2, 1, 0xaabbcc
3, 1, 0xddeeff
4, 1, 0x112233

```

用一个单一的mysql语句？

**更新**：忘了提及 - 尝试使用 LOAD DATA INFILE 语句直接导入具有所需格式的文本文件，结果实际上是将文本“0x123456FF”存储在表的 BLOB 文件中。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T12:52:02.713

您可以使用 LOAD DATA INFILE 的 SET 部分，并且不需要 0x 转义内容：

```
1, 1, 123456FF
2, 1, aabbcc
3, 1, ddeeff 
```

然后将该列分配给一个变量，然后将该列设置为该变量的 UNHEXed 版本：

```
LOAD DATA INFILE 'file' INTO TABLE `table` (column1, column2, @var1)
SET column3 = UNHEX(@var1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:41:35.573

找不到任何替代方案。看起来唯一的方法是唯一的方法`binary`（另外，mysql 上已经有一个关于此的错误/功能请求）。

需要考虑两件事：

*   生成输入文件时的文本文件编码；
*   字符转义（NEW-LINE、TAB、QUOTE 等）；

# vba - 插入工作表

> ID：12038820
> 
> 赞同：0
> 
> 时间：2012-08-20T13:39:43.337
> 
> 标签：vba, excel, syntax-error

我有一个字符串 -

```
insert into staging_table values('AC','36569','SL','4950 W NEWPORT','CHICAGO');insert into staging_table values('AC','36569','SL','4950 W NEWPORT','CHICAGO'); 
```

我有一个工作表 TEST ，它有 2 列`SQL,flg`。

这些列下的数据是 `" ",1`

如何编写更新语句以使用上述字符串更新 1列`SQL`的值。`flg`

我面临的问题是字符串中存在单引号，当我执行更新语句时出现语法错误...请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:05:29.413

如果要在 SQL 插入/更新中使用包含单引号的字符串值，则需要通过将它们加倍来转义 '

例如

`...values('AC','36569',...`

应该

`...values(''AC'',''36569'',...`

# php - php 在透明 gif 和 png 上上传黑色 bg

> ID：12038822
> 
> 赞同：1
> 
> 时间：2012-08-20T13:39:51.900
> 
> 标签：php, image, file-upload

我正在使用 jquery / php 插件来上传和裁剪图像。除了透明 gifs/png 上的黑色背景外，一切都很好。我想保持透明度。我已经阅读了其他帖子并意识到这已经出现过，但不完全了解如何将以前的修复应用到我的代码中。

```
 <?php
            ##########################################################################################################
            # IMAGE FUNCTIONS                                                                                        #
            # You do not need to alter these functions                                                               #
            ##########################################################################################################
            function resizeImage($image,$width,$height,$scale) {
                list($imagewidth, $imageheight, $imageType) = getimagesize($image);
                $imageType = image_type_to_mime_type($imageType);
                $newImageWidth = ceil($width * $scale);
                $newImageHeight = ceil($height * $scale);
                $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
                switch($imageType) {
                    case "image/gif":
                        $source=imagecreatefromgif($image); 
                        break;
                    case "image/pjpeg":
                    case "image/jpeg":
                    case "image/jpg":
                        $source=imagecreatefromjpeg($image); 
                        break;
                    case "image/png":
                    case "image/x-png":
                        $source=imagecreatefrompng($image); 
                        break;
                }
                imagecopyresampled($newImage,$source,0,0,0,0,$newImageWidth,$newImageHeight,$width,$height);

                switch($imageType) {
                    case "image/gif":
                        imagegif($newImage,$image); 
                        break;
                    case "image/pjpeg":
                    case "image/jpeg":
                    case "image/jpg":
                        imagejpeg($newImage,$image,90); 
                        break;
                    case "image/png":
                    case "image/x-png":
                        imagepng($newImage,$image);  
                        break;
                }

                chmod($image, 0777);
                return $image;
            }

            ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:28:30.603

我通过添加取得了进展

```
 imagealphablending($newImage, true); 
            // Allocate a transparent color and fill the new image with it. 
            // Without this the image will have a black background instead of being transparent.
            $transparent = imagecolorallocatealpha( $newImage, 0, 0, 0, 127 ); 
            imagefill( $newImage, 0, 0, $transparent ); 
                imagesavealpha($newImage,true); 
```

在 $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight); 行下方

它现在适用于 png，但不适用于 gif？

# php - 使用 javascript 从表单中发布一个值，然后使用 php 发布

> ID：12038823
> 
> 赞同：0
> 
> 时间：2012-08-20T13:39:58.767
> 
> 标签：php, javascript, uploadify

我正在尝试将一些信息插入数据库，我的第一页是这样的：

```
$(document).ready(function() {

    //alert('I am ready to use uploadify!');
    $("#file_upload").uploadify({
        'uploader': 'uploadifyit/uploadify.swf',
        'script': 'uploadifyit/uploadify.php',
        'cancelImg': 'uploadifyit/cancel.png',
        'folder': 'images',
        'auto': false, // use for auto upload
        'multi': true,
        'queueSizeLimit': 4,
        'onQueueFull': function(event, queueSizeLimit) {
            alert("Please don't put anymore files in me! You can upload " + queueSizeLimit + " files at once");
            return false;
        },
        'onComplete': function(event, ID, fileObj, response, data) {
            // you can use here jQuery AJAX method to send info at server-side.
            $.post("insert.php", { name: fileObj.name }, function(info) {
                alert(info); // alert UPLOADED FILE NAME
            });
        }
    });

});

</script>
</head>

<body>
<?php
$img_id=$_REQUEST['img_id'];
?>
<form id="form1" name="form1" action="">
<input type="file" name="file_upload" id="file_upload" /><br />
<input type="hidden" value="<? echo $img_id ;?>" name="image_id"  />

<a href="javascript:$('#file_upload').uploadifyUpload();">Upload File</a>
</form> 
```

而处理形式是：

```
if(isset($_POST)) {

        //echo $_POST['name'];
        $fileName = $_POST['name'];
        $id = $_REQUEST['image_id'];

        mysql_query("INSERT INTO tbl_images(img_file,img_gal_id) VALUES('$fileName','$id')");
        $inserted_id = mysql_insert_id($dbc);

        if($inserted_id > 0) { // if success
            echo "uploaded file: " . $fileName;
        }

    } 
```

我可以发布 $fileName 但不能发布 $id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:10:01.413

在您的处理表单中使用`POST`而不是`REQUEST`，并按照软/MMK 推荐的方式使用 JSON 传递`image_id`值。您可以保存隐藏字段和变量声明并将值注入`$.post`：

```
$.post("insert.php", 
  { 
    name: fileObj.name, 
    // Add the image_id value to post to insert.php
    image_id: <?php echo $_REQUEST['img_id']; ?> 
  ... 
```

然后在处理中：

```
$fileName = $_POST['name'];
// Grab the posted value.
$id = $_POST['image_id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:50:06.370

试试这样

```
'onComplete': function(event, ID, fileObj, response, data) {
        // you can use here jQuery AJAX method to send info at server-side.
        $.post("insert.php", { name: fileObj.name,image_id:ID}, function(info) {
            alert(info); // alert UPLOADED FILE NAME
        });
    } 
```

# jquery - 无法将多个文件附件添加到表单

> ID：12038836
> 
> 赞同：0
> 
> 时间：2012-08-20T13:40:56.500
> 
> 标签：jquery

我一直在研究一个允许使用 jquery 的多个文件附件的联系表单。我的表单目前有一个可以正常工作的单独文件输入，但是我想添加一个链接，该链接将创建一个额外的输入字段。我已经为此工作了几天，并正在寻找符合我标准的可能解决方案。

我遇到的问题是

1）当我点击链接时，我的字段被乘以 2（我理解为什么会发生这种情况）但在尝试不同的解决方案后无法解决它。

2）我的文件字段使用 div 设置样式，并试图弄清楚如何使用“onchange”事件将文件名传递给我的伪文件字段和克隆字段。

我已经整理了一个 jsFiddle，我希望它能更好地描述我的问题，并希望有人可以在这个过程中提出他们的想法。

干杯!

[http://jsfiddle.net/schwiegler/8vaFk/4/](http://jsfiddle.net/schwiegler/8vaFk/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:54:25.433

在我最初的问题中，我可能试图让事情变得有点过于花哨，但我决定简化流程，从我的文件输入中删除样式并处理跨浏览器的默认显示。

我最终使用的代码可以在这个小提琴中找到。

[http://jsfiddle.net/schwiegler/8vaFk/19/](http://jsfiddle.net/schwiegler/8vaFk/19/)

# java - 使用带有 Derby Embedded 的 Java 中的 liquibase 时出现异常

> ID：12038840
> 
> 赞同：0
> 
> 时间：2012-08-20T13:41:11.803
> 
> 标签：java, derby, liquibase

我正在使用 groovy 脚本进行 Liquibase 迁移。

我有一个类似的代码

```
def migrate() {

    def changeLog = "com/cadence/mdv/ngv/db.changelog.xml"
    Sql db = Sql.newInstance(profile.dbUrl, profile.dbUser, profile.dbPassword, profile.dbDriver)

    Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(db.connection))

    def liquibase = new Liquibase(changeLog
            , new ClassLoaderResourceAccessor()
            , database
    )
    liquibase.update(null) 
```

}

但我收到异常，告诉某些表不存在

```
liquibase.exception.MigrationFailedException: Migration failed for change set com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-31::pavelber (generated):
 Reason: liquibase.exception.DatabaseException: Error executing SQL ALTER TABLE APP.ACTION_ATTRIBUTES ADD CONSTRAINT FKD1111B00C05F2ED6 FOREIGN KEY (RUN_ID) REFERENCES APP.RUNS (ID) ON UPDATE NO ACTION ON DELETE NO ACTION: 'ALTER TABLE' cannot be performed on 'APP.ACTION_ATTRIBUTES' because it does not exist.:
      Caused By: Error executing SQL ALTER TABLE APP.ACTION_ATTRIBUTES ADD CONSTRAINT FKD1111B00C05F2ED6 FOREIGN KEY (RUN_ID) REFERENCES APP.RUNS (ID) ON UPDATE NO ACTION ON DELETE NO ACTION: 'ALTER TABLE' cannot be performed on 'APP.ACTION_ATTRIBUTES' because it does not exist.: 
```

我在使用 ALTER TABLE 使第一个变更集失败的变更集列表中看到，看起来所有以前的变更集都不起作用，但我在控制台中看到：

```
INFO 8/20/12 4:08 PM:liquibase: Successfully acquired change log lock
INFO 8/20/12 4:08 PM:liquibase: Creating database history table with name: DATABASECHANGELOG
INFO 8/20/12 4:08 PM:liquibase: Reading from DATABASECHANGELOG
INFO 8/20/12 4:08 PM:liquibase: Reading from DATABASECHANGELOG
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-    changelog.xml::1345376497537-1::pavelber (generated) ran successfully in 56ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-2::pavelber (generated) ran successfully in 29ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-3::pavelber (generated) ran successfully in 42ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-4::pavelber (generated) ran successfully in 29ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-5::pavelber (generated) ran successfully in 190ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-6::pavelber (generated) ran successfully in 32ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-7::pavelber (generated) ran successfully in 26ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-8::pavelber (generated) ran successfully in 23ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-9::pavelber (generated) ran successfully in 15ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-10::pavelber (generated) ran successfully in 31ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-11::pavelber (generated) ran successfully in 26ms
INFO 8/20/12 4:08 PM:liquibase: ChangeSet com/cadence/mdv/ngv/initial-changelog.xml::1345376497537-12::pavelber (generated) ran successfully in 54ms
..... 
```

从命令行运行时，相同的更改日志运行良好，所以我认为问题出在事务定义或类似的东西上。

如何解决这个问题呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:32:58.087

了解 profile.dbUrl 是什么以及可能还有 profile.dbUser 会很有帮助。

Derby 数据库中不存在表的最常见原因是因为 Derby 作为嵌入式数据库引擎，可以在各处拥有多个数据库副本，并且很容易混淆并使用与您想象的不同的数据库是：

1.  您的数据库是通过相对文件路径访问的，并且您的当前目录已更改，导致 Derby 访问不同的数据库
2.  您的数据库是通过其他用户访问的，并且用户名隐式定义了架构，因此找不到表，因为您的用户名已更改。
3.  您的数据库是一个内存数据库，并且这些数据库不会在应用程序的生命周期之外持续存在，因此每次运行它时，您都会从一个没有表的新数据库开始。
4.  您的应用程序在一个巨大的事务中创建所有表并完成所有工作，并且不提交该事务，导致您的所有工作，包括所有表创建，在您的应用程序退出时回滚。

还有其他可能的原因，但这些是一些常见的原因。

# java - 如何在java中动态设置对象？

> ID：12038845
> 
> 赞同：0
> 
> 时间：2012-08-20T13:41:35.873
> 
> 标签：java, object, netbeans, textfield

我在 java 中创建一个 GUI 应用程序，它使用来自用户的输入，并在我的 jFrame 中使用默认名称动态设置文本字段，如 jTextField1、jTextField2 等

我的项目演示如下：-

![在此处输入图像描述](../Images/65870001b309bd8e80e5f43a9abb0234.png)

> 1）它接受组合框中的行数和列数。
> 
> 2）应根据用户的选择设置列数和行数。（即它应该在 JFrame 上动态创建 Jtextfield 对象）

我可以在循环语句中动态设置这些命令并创建我需要的文本字段数量吗：-

```
 private void initComponents() {
    jTextField1 = new javax.swing.JTextField();
            jTextField2 = new javax.swing.JTextField();
}

private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2; 
```

或者有没有其他方法可以做到这一点。

这在任何其他语言（如 javascript 或 html）中是否可行。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:45:10.133

你的方法是对的。您遍历索引并创建新组件（Java GUI 对象）并将它们添加到容器中。

请记住检查现有组件或`remove()/removeAll()`它们。

更新：当您创建一个容器时，您通常会定义一个 LayoutManager（我更熟悉`GridBagLayout`，但`XYLayout`可能对您有用）。将组件添加到容器时，您有一个允许额外对象的方法`constraints`；该对象被传递给 layoutManager 以了解在哪里/如何绘制添加的组件。

当然，每个不同的layoutManager都使用自己不同的约束，所以为`GridBagLayout`我传递一个`GridBagConstraints`对象。在您的示例中，要构建一行，除了这些字段之外的所有字段都将由默认的 GridBagConstraints 添加；最后一行中的 GridBagConstraints 会有

```
 GridBagConstraints.gridwidth = GridBagConstraints.REMAINDER; 
```

通知布局管理器它是行中的最后一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:56:48.460

您应该阅读有关布局管理器的信息。在您的情况下，您应该从使用 GridLayout 开始。读取行数和列数，使用适当的参数创建 GridLayout。然后在 for 循环（或 2 个嵌套的 for 循环）中创建文本字段并将它们添加到面板中。

您将看到文本字段的数量及其位置几乎可以。现在看到问题：文本字段的大小将取决于您的帧大小。要解决此问题，您可以替换您`GridLayout`的 by`BoxLayout`或`GridBagLayout`或使用带有流布局的嵌套面板或使用第三方工具，如`MigLayout`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:13:31.830

首先：您可以在文本字段中使用数组：

```
JTextField[][] matrix1TextFields, matrix2TextFields, matrix3TextFields;
private void refreshMatrixComponents(int r, int c) {
  matrix1TextFields = new JTextField[r][c];
  matrix2TextFields = new JTextField[r][c];
  matrix3TextFields = new JTextField[r][c];
  for (int row = 0; row < r; row++) {
    for (int col = 0; col < c; col++) {
      matrix1TextFields[row][col] = new JTextField();
      matrix2TextFields[row][col] = new JTextField();
      matrix3TextFields[row][col] = new JTextField();
    }
  }
  placeMatrixTextField();  
} 
```

对于布局管理器，有很多选项。我会推荐`GridLayout`（非常易于使用）或`GridBagLayout`（更难使用，但更灵活）或第 3 方之类的东西`MigLayout`（您将不得不深入研究语法，但我认为这完全值得付出努力）。我还建议为每个矩阵创建一个`JPanel`并将所有文本字段放在那里。然后放置这些`JPanels`+其余组件：

```
JPanel matrix1Panel, matrix2Panel, matrix3Panel;
private void placeMatrixTextField() {
  int r = matrix1TextFields.length, c = matrixTextFields[0].length;
  matrix1Panel = new JPanel();
  matrix2Panel = new JPanel();
  matrix3Panel = new JPanel();
  matrix1Panel.setLayout(new GridLayout(r, c));
  matrix2Panel.setLayout(new GridLayout(r, c));
  matrix3Panel.setLayout(new GridLayout(r, c));
  for (int row = 0; row < r; row++) {
    for (int col = 0; col < c; col++) {
      matrix1Panel.add(matrix1TextFields[row][col]);
      matrix2Panel.add(matrix2TextFields[row][col]);
      matrix3Panel.add(matrix3TextFields[row][col]);
    }
  }
  // now place your panels
} 
```

# asp.net - IIS 无法正确替换 VS2012 ASP.NET 网站中的“~”

> ID：12038847
> 
> 赞同：1
> 
> 时间：2012-08-20T13:41:41.423
> 
> 标签：asp.net, iis, relative-path, virtual-path

我从 Visual Studio 2012 中的 Web 窗体模板生成了我的 ASP.NET 站点。我在母版页中有以下代码：

```
<asp:PlaceHolder runat="server">
    <%: Styles.Render("~/Content/themes/base/css", "~/Content/css") %>
    <%: Scripts.Render("~/bundles/modernizr") %>
</asp:PlaceHolder> 
```

当我从 VS 运行我的网站时，一切正常。当我将它部署到服务器时，无法加载 css 文件，因为上面的代码解析为

```
<link href="/Content/themes/base/css?v=UM624qf1uFt8dYtiIV9PCmYhsyeewBIwY4Ob0i8OdW81" rel="stylesheet" type="text/css" />
<link href="/Content/css?v=tMLDfv3u-lElLSOX_gsfU7tfsfKPoY_vJBePC7KLa6U1" rel="stylesheet" type="text/css" />
<script src="/bundles/modernizr?v=EuTZa4MRY0ZqCYpBXj_MhJfFJU2QBDf0xGrV_p1fHME1" type="text/javascript"></script> 
```

所有路径都从域的根目录开始计算，而我的站点部署在子文件夹下，例如`http://MyDomain.com/MySyte/`. 显然，波浪号运算符`~`处理不当。在所有其他地方，例如 hrefs，它已被正确替换，并且导航在已部署的站点中工作正常。

另一个例子。对于来自母版页的此代码

```
<asp:ScriptManager runat="server" AjaxFrameworkMode="Explicit">
    <Scripts>
        <asp:ScriptReference Name="MsAjaxBundle" />
        <asp:ScriptReference Name="jquery" />
        ...
    </Scripts>
</asp:ScriptManager> 
```

我有这个 html 输出

```
<script src="/bundles/MsAjaxJs?v=eYkLZimNY09iWQvWpdPDkxCLGwdMBLWkJ4bU5r3y6GU1" type="text/javascript"></script>
<script src="Scripts/jquery-1.6.2.min.js" type="text/javascript"></script> 
```

所以 jquery 的路径是正确的和相对的，而 MsAjaxBundle 导致了一些绝对路径。

我认为这种行为是一个错误。我该如何解决？

**更新：**

*   视窗 7 x64
*   IIS 7.5
*   ASP.NET 应用程序目标框架 4.5
*   IIS 应用程序池框架 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:47:06.870

波浪号是来自应用程序根的参考点。您的目录很可能`MySyte`只是您网站之外的一个文件夹，而不是配置为应用程序。

您需要将目录配置为 IIS 中的应用程序。对于 IIS 7.x 和 8，您可以右键单击 MySyte 文件夹并选择转换为应用程序并选择适当的 AppPool。

![在此处输入图像描述](../Images/763eac1569f6c0ba6c07966f9ae9b274.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T21:34:20.917

问题是由我们的代理服务器引起的，它实际上是转发`http://MyDomain/MySite/`到`http://InternalDomain:InternalPort/`. 对于该内部域应用程序根目录实际上是一个站点根目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T10:33:05.400

使用答案功能是因为我无法发表评论（没有足够的权限），但要感谢操作员在普通 asp 页面中使用的语法。

```
<asp:PlaceHolder runat="server">
    <%: Styles.Render("~/Content/themes/base/css", "~/Content/css") %>
    <%: Scripts.Render("~/bundles/modernizr") %>
</asp:PlaceHolder> 
```

# datatable - 如何将数字文本文件读入数据表

> ID：12038849
> 
> 赞同：0
> 
> 时间：2012-08-20T13:41:44.550
> 
> 标签：datatable, numeric

我在带有列标题的文本文件中有数字数据。我在这里找到了将字符串数据读入数据表的绝佳解决方案

[将逗号分隔的文本文件读取到 C# DataTable，列被截断为 255 个字符](https://stackoverflow.com/questions/1051271/reading-comma-delimited-text-file-to-c-sharp-datatable-columns-get-truncated-to)

我试图将其调整为数字数据，但没有成功。将字符串数组转换为双精度数组后，我尝试添加这样的行

```
myDatatable.Rows.Add(myDoubleArray) 
```

敌人似乎没有给我任何东西。我滴滴尝试将双精度转换为对象并粘贴数字，如下面的代码所示：

```
var objectNumbers = rowData.Cast<object>().ToList();
data.Rows.Add();
for (var j = 0; j < columns.Length; j++)
{
    data.Rows[data.Rows.Count - 1][j] = objectNumbers[j];
} 
```

然后我最终将数字作为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:32:20.577

不知何故，我的问题搞砸了。可能是由于多任务处理失败。所以这是我的问题的更新。

如果我按如下方式添加列和行，我现在可以让数据表保存双精度：

```
myDataTable.Columns.Add(columnName, typeof(double));
var dataAsStrings = line.Split(charDelimiters, StringSplitOptions.RemoveEmptyEntries);

// convert to doubles
var dataAsDouble = new double[dataAsStrings.Length];
for (var i = 0; i < dataAsStrings.Length; i++)
{
    var isConverted = Double.TryParse(dataAsStrings[i], out dataAsDouble[i]);
    if (!isConverted) rowData[i] = Double.NaN;
}

var objectNumbers = dataAsDouble.Cast<object>().ToList();
myDataTable.Rows.Add();

for (var j = 0; j < columns.Length; j++)
{
    myDataTable.Rows[myDataTable.Rows.Count - 1][j] = objectNumbers[j];
} 
```

对我来说，部分关键是将列添加为 typeof(double)。在我这样做之前，我什么都没有工作。我很幸运在这些论坛上找到了这个建议。如您所见，这段代码相当混乱，但更简单的尝试对我不起作用。有人可以告诉我一个更简单的方法来获得这些结果吗？也许使用 Linq 的东西？

# database - 在 Visio 数据库图中显示主：外键关系

> ID：12038851
> 
> 赞同：3
> 
> 时间：2012-08-20T13:41:53.427
> 
> 标签：database, database-design, uml, visio, erd

我在 Visio 中创建了一个包含表和关系的数据库模型关系图。但是，我找不到任何方法来自动显示图中的主键 :: 外键关系。我能找到的唯一解决方法是在关系顶部插入一个文本框并手动输入（见图）。或者你可以通过命名关系并显示它来做同样的事情。但是，这两种方法都非常手动且耗时。再加上我已经定义了关系，那我为什么还要重新输入呢！？

![在此处输入图像描述](../Images/6a6d6bee6205de12a29798380cf5c010.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T16:17:46.307

我意识到这篇文章很旧，但以防万一你还没有找到答案： http: [//office.microsoft.com/en-us/visio-help/define-a-relationship-in-a-database-model -diagram-HA010115484.aspx#BM4](http://office.microsoft.com/en-us/visio-help/define-a-relationship-in-a-database-model-diagram-HA010115484.aspx#BM4)（在图表中显示关系及其属性部分）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T16:04:17.997

据我所知，ER建模中被称为“角色”的东西不能自动显示在关系线上。但是，如果父字段和子字段在关系定义中正确连接，则应在子表中自动标记外键：

![在此处输入图像描述](../Images/69182562a1e2b54d1520927073afa6f4.png)

# c# - 为第一个目录创建偏移量 = 8 的 Multipage-G4-TIFF

> ID：12038855
> 
> 赞同：1
> 
> 时间：2012-08-20T13:42:17.030
> 
> 标签：c#, tiff, libtiff.net

我需要从一些 b/w 单页 tiff 文件创建 ab/w、g4 压缩的多页 tiff。第一个目录的偏移量需要为 8。

我能够创建多页 tiff，但第一个目录的偏移量总是大于 8。

我有一些示例 tiff 文件，第一个目录的目录偏移量为 8。所以这似乎是可能的，但我不知道如何用 libtiff.net 做到这一点。

我还有一段使用 gdi+ 创建 tiff 的代码，它也有 offset = 8，但是 gdi+ 有一些限制，我不能使用它。

我可以使用 libtiff.net 执行此操作，还是有其他 tiff 库可以执行此操作？

谢谢托拜厄斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:23:53.537

LibTiff.Net 绝对可以。

为了将目录放在栅格数据之前，您应该使用[CheckpointDirectory](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_CheckpointDirectory)方法。

您的代码应如下所示：

```
using (Tiff tif = Tiff.Open("multipage.tif", "w"))
{
   //...
   tif.SetField(..);
   //...
   tif.SetField(..);
   tif.CheckpointDirectory();

   //...
   tif.WriteScanline(..);
   //...
} 
```

当然，您不限于使用`WriteScanline`方法。任何其他写入栅格数据的方法也可以。关键是先调用`CheckpointDirectory`方法。

# android - 如何在接到电话时停止电话响铃，但不能全局静音

> ID：12038856
> 
> 赞同：4
> 
> 时间：2012-08-20T13:42:19.070
> 
> 标签：android

我知道如何在电话响铃时全局静音：

```
AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);                  
audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

但我想在不使其全球静音的情况下将电话铃声静音。就像您单击手机上的声音按钮并且它停止响铃一样。

我将如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T13:50:22.733

您能否在电话处于振铃状态时将振铃流静音，然后在振铃完成后将其重新打开。您可以使用内容观察器来检查手机的当前状态。我认为从 ICS 开始，铃声和通知声音都在同一个流上播放，我想不出另一种方法来做到这一点。这确实意味着在电话响铃时您不会收到通知的声音。

```
audioManager.setStreamMute(AudioManager.STREAM_RING, true); 
```

# java - 在 J2ME 中实现 Floggy 框架

> ID：12038860
> 
> 赞同：7
> 
> 时间：2012-08-20T13:42:40.227
> 
> 标签：java, configuration, java-me, rms

我正在使用 J2ME 创建一个应用程序。用于连接我正在使用的数据库`RecordStore`。这是首先获取所有记录并遍历它以搜索记录。但是我有数千条记录，我只需要一些基于标准的记录 - 有没有办法解决这个问题？我不想遍历数千条记录来获得十条记录。

我在[http://floggy.sourceforge.net/](http://floggy.sourceforge.net/)找到了 Floggy 框架，我认为它会更好，但我无法找到任何适当的参考来配置它。

有谁知道我可以在我的 J2ME 应用程序中配置 Floogy 吗？我只想要一个具有类似标准的 RMS，请参阅我的另一个问题：[数据库查询 j2me 包括标准](https://stackoverflow.com/questions/11931780/database-query-j2me-including-criterias)

错误堆栈跟踪：

```
Created dir: /NetBeansProjects/Login_1/build/preverifysrc
Copying 798 files to /NetBeansProjects/Login_1/build/preverifysrc
Created dir: /NetBeansProjects/Login_1/build/preverified
Preverifying 798 file(s) into /NetBeansProjects/Login_1/build/preverified directory.
Error preverifying class net.sourceforge.floggy.persistence.WeaverTask
    java/lang/NoClassDefFoundError: org/apache/tools/ant/
Task
/NetBeansProjects/Login_1/nbproject/build-impl.xml:431: Preverification failed with error code 1.
BUILD FAILED (total time: 12 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:20:29.043

介绍文章可以在这里找到：http: [//floggy.sourceforge.net/core-package.html](http://floggy.sourceforge.net/core-package.html)
你可以用 Ant 构建你的项目：http: [//floggy.sourceforge.net/configuration/ant.html](http://floggy.sourceforge.net/configuration/ant.html)
但也有一个 Eclipse 插件： http: [//floggy.sourceforge.net/configuration/eclipse.html](http://floggy.sourceforge.net/configuration/eclipse.html)

# .htaccess - 重写简单的url

> ID：12038871
> 
> 赞同：1
> 
> 时间：2012-08-20T13:43:15.827
> 
> 标签：.htaccess, url-rewriting

我会重写一个非常简单的网址

```
http://localhost/?page=me 
```

到

```
http://localhost/me 
```

我在我的 .htaccess 中尝试过这个：

```
RewriteRule ^([^/]*)$ /?page=$1 [L] 
```

但不起作用（错误 500）。

* * *

就像这样，它可以工作：

```
RewriteRule ^([^/]*)/$ /?page=$1 [L] 
```

但链接是`http://localhost/me/`，我想删除最后`/`
一个想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:09:13.087

您需要添加一些条件来防止重写引擎循环。试试这个：

```
RewriteCond %{REQUEST_URI} !^/index\.
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^([^/]*)$ /?page=$1 [L] 
```

与匹配的 URI 始终为非空的第二条规则不同，`/`不会再次匹配并继续循环。

# oracle - 将表索引从唯一修改为非唯一

> ID：12038872
> 
> 赞同：2
> 
> 时间：2012-08-20T13:43:17.667
> 
> 标签：oracle

我希望将表的索引从唯一修改为非唯一。

该表当前不是空的。在进行更新之前是否必须清除所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:58:20.330

不，您不需要清除所有行，您只需要删除索引并在没有唯一修饰符的情况下创建它：

```
create index my_non_unique_ix on my_table( my_col); 
```

# oracle - Oracle中客户端连接的MAC和IP地址

> ID：12038879
> 
> 赞同：0
> 
> 时间：2012-08-20T13:44:26.620
> 
> 标签：oracle, network-protocols

在 MS SQL Server 下，您可以使用**master.sys.sysprocesses**和**master.sys.dm_exec_connections**系统视图来检索给定 TCP/IP 客户端连接的 MAC 地址和 IP 地址。

有没有办法在 Oracle 数据库中做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:05:26.577

您可以尝试从 sys_context 获取 IP：

```
SELECT SYS_CONTEXT('USERENV','IP_ADDRESS') FROM dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:01:58.353

可以通过查询v$session获取客户端的机器名，也可以尝试使用utl_inaddr.get_host_address()获取主机名的IP地址，但是

*   您必须对 v$session 中的机器名进行额外处理，因为它并不总是有效的主机名
*   如果不直接查询操作系统，您将无法获得 MAC 地址

事实上，我很惊讶 SQL 服务器提供了这些信息——我猜它正在后台进行 ARP 查找以获取给定 IP 地址的 MAC 地址。当然，您可以在应用程序代码中模仿这一点。

为什么需要这些信息？

# java - Gwt TextInputCell 不显示更改的值

> ID：12038881
> 
> 赞同：2
> 
> 时间：2012-08-20T13:44:27.287
> 
> 标签：java, gwt

我有一个带有 TextInputCells 列的 CellTable。

当我通过 UI 手动设置值时，bean 被修改。但是，然后，当我将值直接设置到 bean 中时，我无法使表格显示修改。它将始终保留我手动分配的内容。

这是我的专栏：

```
FieldUpdater<MyBean, String> myFu = new FieldUpdater<MyBean, String>() {
  @Override
  public void update(int index, MyBean object, String value) {
    object.setValue(value);
  }
};

Column<MyBean, String> myCol = new Column<MyBean, String>(new TextInputCell()) {
  @Override
  public String getValue(MyBean object) {
    return object.getValue();
  }
}; 
```

这是动作：

```
@UiHandler("myButton")
public void myButton_onClick(ClickEvent event) {
  for (MyBean my : listOfBeans)
    my.setValue("value");
} 
```

在操作之后，我尝试调用`table.redraw()`或清除并重新填充`ListDataProvider`, 但它没有改变任何东西。

我能做些什么 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:25:28.437

好的，我找到了一个（牵强的）方法。这很糟糕，但它有效。

```
int inputTextColumnPos; // position of your column

...

@UiHandler("myButton")
public void myButton_onClick(ClickEvent event) {
  for (MyBean my : listOfBeans) {
    my.setValue("value");

    // get the cell you want to update
    TextInputCell cell = (TextInputCell) table.getColumn(inputTextColumnPos).getCell();
    // re-create the view data for the cell because the current one isn't updated
    TextInputCell.ViewData viewData = new TextInputCell.ViewData("value");
    // CRUSH the other one 
    cell.setViewData(my, viewData);
  }

  // because we're never too sure
  table.redraw();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:31:47.787

即使我有同样的问题（我正在使用`EditTextCell`），但我无法找到解决方案。我几乎尝试了所有的东西。所以我想出了一个替代方案。

我将该列改回`TextCell`并添加`SingleSelectionModel`到`CellTable.setSelectionModel(SingleSelectionModel)`. 我创建了一个`TextBox`并将其放在我的`CellTable`. 我让它像每当用户更改选择时一样工作，`TextBox`将使用该列的值进行更新。我补充说`TextBox.addChangeHandler()`，在这个方法中我更新`Bean`然后刷新`DataProvider`. 这种方法运行良好。希望能帮助到你。谢谢..

# java - 视觉力 Page 和 VF 组件通信

> ID：12038882
> 
> 赞同：1
> 
> 时间：2012-08-20T13:44:39.510
> 
> 标签：java, components, salesforce, apex-code, visualforce

我正在尝试从父视觉力页面的按钮单击中插入组件的表单记录。

我正在使用虚拟类来实现这一点。

请访问以下链接获取控制器组件通信帮助：[http ://wiki.developerforce.com/page/Controller_Component_Communication](http://wiki.developerforce.com/page/Controller_Component_Communication)

在上面的例子中，他正在增加一个已经在组件中的变量的值。

我的要求是我必须从页面获取用户输入。

请看下面的代码，这样你就可以理解这个问题：

谢谢

# c - 将 char 指针返回到不同的文件

> ID：12038884
> 
> 赞同：2
> 
> 时间：2012-08-20T13:44:40.460
> 
> 标签：c

即使调用函数不在同一个文件中，是否也可以返回一个字符指针......如果我调用该函数，例如：

```
 void gotest(sqlite3 *pt,char *nutzers)
{
    char string[1064];
    char *text;
    text = get_data_byName(pt,"whatever",string);   
    printf("test %s \n\n\n same file",text);    
}

 char *get_data_byName(sqlite3 *ptr,char *user,char *resulter)
{
    .......
    resulter = "TestCall";
    return resulter;
} 
```

如果`gotest(sqlite3 *pt,char *nutzers)`和`char *get_data_byName(sqlite3 *ptr,char *user,char *resulter)`位于不同的文件中，则 gcc 给出以下内容

**赋值使指针从整数而不进行强制转换**

如果我在一个文件中同时拥有这两个功能，那么一切正常。

编译如下：

```
gcc -o test test.c time.c database.c libircclient-1.6/src/libircclient.o -lsqlite3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:47:22.550

您收到错误不是因为函数位于不同的文件中：来自不同编译单元的函数相互调用是完全可以的。真正的问题是您试图从另一个文件调用一个函数而不提供*原型*。发生这种情况时，C 假定返回类型为`int`.

使用以下内容制作头文件：

get_data_byName.h

```
char *get_data_byName(sqlite3 *ptr,char *user,char *resulter); 
```

现在在你的两个 C 文件中包含这个头文件：

#include "get_data_byName.h"

编译警告将消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:48:03.747

必须没有对`get_data_byName()`可见的声明`gotest()`，因此编译器生成一个隐式声明并分配一个返回类型`int`，因此是警告。要解决添加的声明`get_data_byName()`，例如在头文件中，并确保它对`gotest()`.

`get_data.h`：

```
#ifndef GET_DATA_HEADER_H_
#define GET_DATA_HEADER_H_

extern char* get_data_byName(sqlite3 *ptr,char *user,char *resulter);

#endif 
```

然后`#include <get_data.h>`在`.c`文件中`gotest()`定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T13:48:13.610

是的，这当然是可能的。在调用它之前，您需要*声明该函数：*

```
char * get_data_byName(sqlite3 *ptr, char *user, char *resulter); 
```

此外，您应该在适用的情况下*真正*使用指针。`const`

请记住，如果您需要返回非文字字符串，则需要考虑内存管理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T13:49:03.783

您需要文件的标题。*如果 GCC在它使用的文件*中没有看到函数原型，则GCC 假定该函数返回一个`int`. 您需要阅读标题。同时，将其放入您使用的文件中`get_data_byName`就足够了：

```
char *get_data_byName(sqlite3 *ptr,char *user,char *resulter); 
```

您必须记住，虽然 GCC 在链接时，它知道您定义了`get_data_byName`，但在编译时，它需要知道它有哪些参数和返回值。这就是标题的目的。标头包含函数原型。函数原型如下所示：

```
char *get_data_byName(sqlite3 *ptr,char *user,char *resulter); 
```

如果您将定义在一个`.c`文件中的所有函数的原型放在一个文件中`.h`，并将它们`#include`的标题放在使用该函数的文件中，您将不会再出现该错误。因此，如果您有一个名为 的文件`get_data_by_name.c`，它将是`get_data_by_name.h`：

```
#ifndef GET_DATA_BY_NAME_H
#define GET_DATA_BY_NAME_H
char *get_data_byName(sqlite3 *ptr,char *user,char *resulter);
#endif 
```

然后就`#include`在使用的文件中`get_data_byName`：

```
#include "get_data_by_name.h" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-20T13:54:45.157

取决于您如何将它们“放在单独的文件中”。K&R 中指定的格式对于您拥有的每个 .c 文件都需要 2 个额外的 .h 文件。.h 文件将声明函数原型。从那里，您可以将 file_2.h 包含到您的 file_1.c 中，并使 get_data_byName 可用于 gotest。希望有帮助。

```
**file_1.c**
include "file_1.h"
include "file_2.h"

void gotest(sqlite3 *pt,char *nutzers)
{
    char string[1064];
    char *text;
    text = get_data_byName(pt,"whatever",string);   
    printf("test %s \n\n\n same file",text);    
}

**file_2.c**
char *get_data_byName(sqlite3 *ptr,char *user,char *resulter)
{
    .......
    resulter = "TestCall";
    return resulter;
} 

**file_1.h**
void gotest(sqlite3 *pt,char *nutzers);

**file_2.h**
char *get_data_byName(sqlite3 *ptr,char *user,char *resulter); 
```

# javascript - 从 jquery 插件调用函数

> ID：12038889
> 
> 赞同：0
> 
> 时间：2012-08-20T13:45:03.753
> 
> 标签：javascript, jquery, pagination

我已经看到了一些与此类似的问题，但无法将我从他们那里学到的东西应用到我的项目中。

我正在使用tablesorter jquery插件，它是分页插件，默认情况下它没有编号的页面链接，所以我试图添加它们，插件代码如下

```
(function($) {
    $.extend({
        tablesorterPager: new function() {

            function updatePageDisplay(c) {
                var s = $(c.cssPageDisplay,c.container).val((c.page+1) + c.seperator + c.totalPages);   
            }

            function setPageSize(table,size) {
                var c = table.config;
                c.size = size;
                c.totalPages = Math.ceil(c.totalRows / c.size);
                c.pagerPositionSet = false;
                moveToPage(table);
                fixPosition(table);
            }

            function fixPosition(table) {
                var c = table.config;
                if(!c.pagerPositionSet && c.positionFixed) {
                    var c = table.config, o = $(table);
                    if(o.offset) {
                        c.container.css({
                            top: o.offset().top + o.height() + 'px',
                            position: 'absolute'
                        });
                    }
                    c.pagerPositionSet = true;
                }
            }

            function moveToFirstPage(table) {
                var c = table.config;
                c.page = 0;
                moveToPage(table);
            }

            function moveToLastPage(table) {
                var c = table.config;
                c.page = (c.totalPages-1);
                moveToPage(table);
            }

            function moveToNextPage(table) {
                var c = table.config;
                c.page++;
                if(c.page >= (c.totalPages-1)) {
                    c.page = (c.totalPages-1);
                }
                moveToPage(table);
                console.log(table);
            }

            function moveToPrevPage(table) {
                var c = table.config;
                c.page--;
                if(c.page <= 0) {
                    c.page = 0;
                }
                moveToPage(table);
            }

            function moveToPage(table) {
                var c = table.config;
                if(c.page < 0 || c.page > (c.totalPages-1)) {
                    c.page = 0;
                }

                renderTable(table,c.rowsCopy);
            }

            function gotoPage(table, newpage) {
                var c = table.config;
                c.page = newpage;

                moveToPage(table);
            }

            function renderTable(table,rows) {

                var c = table.config;
                var l = rows.length;
                var s = (c.page * c.size);
                var e = (s + c.size);
                if(e > rows.length ) {
                    e = rows.length;
                }

                var tableBody = $(table.tBodies[0]);

                // clear the table body

                $.tablesorter.clearTableBody(table);

                for(var i = s; i < e; i++) {

                    //tableBody.append(rows[i]);

                    var o = rows[i];
                    var l = o.length;
                    for(var j=0; j < l; j++) {

                        tableBody[0].appendChild(o[j]);

                    }
                }

                fixPosition(table,tableBody);

                $(table).trigger("applyWidgets");

                if( c.page >= c.totalPages ) {
                    moveToLastPage(table);
                }

                updatePageDisplay(c);
            }

            this.appender = function(table,rows) {

                var c = table.config;

                c.rowsCopy = rows;
                c.totalRows = rows.length;
                c.totalPages = Math.ceil(c.totalRows / c.size);

                renderTable(table,rows);
            };

            this.defaults = {
                size: 10,
                offset: 0,
                page: 0,
                totalRows: 0,
                totalPages: 0,
                container: null,
                cssNext: '.next',
                cssPrev: '.prev',
                cssFirst: '.first',
                cssThree: '.three',
                cssLast: '.last',
                cssPageDisplay: '.pagedisplay',
                cssPageSize: '.pagesize',
                seperator: "/",
                positionFixed: true,
                appender: this.appender
            };

            this.construct = function(settings) {

                return this.each(function() {   

                    config = $.extend(this.config, $.tablesorterPager.defaults, settings);

                    var table = this, pager = config.container;

                    $(this).trigger("appendCache");

                    config.size = parseInt($(".pagesize",pager).val());

                    $(config.cssFirst,pager).click(function() {
                        moveToFirstPage(table);
                        return false;
                    });
                    $(config.cssThree,pager).click(function() {
                        gotoPage(table, 4);
                        return false;
                        console.log('triggered');
                    });
                    $(config.cssFirst,pager).click(function() {
                        moveToFirstPage(table);
                        return false;
                    });
                    $(config.cssNext,pager).click(function() {
                        moveToNextPage(table);
                        return false;
                    });
                    $(config.cssPrev,pager).click(function() {
                        moveToPrevPage(table);
                        return false;
                    });
                    $(config.cssLast,pager).click(function() {
                        moveToLastPage(table);
                        return false;
                    });
                    $(config.cssPageSize,pager).change(function() {
                        setPageSize(table,parseInt($(this).val()));
                        return false;
                    });
                });
            };

        }
    });
    // extend plugin scope
    $.fn.extend({
        tablesorterPager: $.tablesorterPager.construct
    });

})(jQuery); 
```

我添加了以下功能

```
function gotoPage(table, newpage) {
                    var c = table.config;
                    c.page = newpage;

                    moveToPage(table);
                } 
```

并希望通过以下方式调用它

```
onclick="gotoPage(table, '.$counter.'); return false;" 
```

以上是在 php 循环中生成的。

下面的代码是我如何调用函数

```
$("table") 
    .tablesorter({widthFixed: true, widgets: ['zebra']}) 
    .tablesorterPager({container: $("#pager")}); 
    var table = document.getElementById("page"); 
```

如果有人可以协助如何在我的 onclick 中调用 gotoPage 函数，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:15:39.123

我认为您必须从内部进行修改，这会更简单

删除 onclick 然后在插件代码中添加一个处理程序以访问私有函数

```
$('.pagelink').on('click',function(){
 var newpage = $(this).attr('href').replace('#',''); //suppose that href="#'.$counter.'"
 var table = $('#table').get(0);
 gotoPage(table, newpage);
}); 
```

# r - 结合 R Markdown 和动画包

> ID：12038893
> 
> 赞同：7
> 
> 时间：2012-08-20T13:45:17.763
> 
> 标签：r, animation, markdown, knitr

有没有办法结合`animation package`和降价？我想生成我想在从 r markdown 生成的 html 文件中包含和描述的动画。

当然，我可以在已经生成的 r markdown 文件中嵌入代码`saveHTML`或`saveGIF`文件，但我想自动化这个过程。

我正在使用 Windows、R 15.1 和最后一个 RStudio。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T14:46:32.677

这是来自 knitr 图形手册的时钟示例（请参阅对您的问题的评论）在降价中：

```
```{r clock, fig.width=7, fig.height=6, fig.show='animate'}
par(mar = rep(3, 4))
for (i in seq(pi/2, -4/3 * pi, length = 12)) {
    plot(0, 0, pch = 20, ann = FALSE, axes = FALSE)
    arrows(0, 0, cos(i), sin(i))
    axis(1, 0, "VI"); axis(2, 0, "IX")
    axis(3, 0, "XII"); axis(4, 0, "III"); box()
}
``` 
```

您需要在路径中包含[ffmpeg](http://ffmpeg.org/)可执行文件才能使其工作。Knitr 将使用动画包，该包又会调用 ffmpeg 生成嵌入在您的 html 输出中的 mp4 文件。

# bash - 使用 bash 工具处理日志文件

> ID：12038896
> 
> 赞同：1
> 
> 时间：2012-08-20T13:45:26.073
> 
> 标签：bash, shell, sed, awk, grep

我有一个 .csv 文件，其中包含大约 10 列正在记录数据。我想使用这样的东西：

[如何在 bash 脚本中获取文件的第一行？](https://stackoverflow.com/questions/2439579/how-to-get-the-first-line-of-a-file-in-a-bash-script)

它在哪里抓取每个文件的第一行，然后处理日志。但是，一旦处理了该行，我想将其标记为已处理（可以像在末尾添加一个带有 *** 或其他内容的新列一样简单）。所以基本上，我想抓住第一行未处理的，处理它，然后移动到下一个未处理的行，等等。

我需要使用 sed、awk、grep 和/或其他标准来执行此操作。bash 脚本将在无限的 while 循环中在后台运行。本质上，我正在尝试实时读取和处理此日志文件，但需要该日志作为历史记录。

**编辑：** 另外，我需要这个来标记文件中已读取的行。这样，如果服务器停止，我就可以知道在哪里进行处理。所以如果我能想出办法做到这一点，tail 会起作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:59:51.483

您可以这样做，而不是坐在无限循环中：

```
tail -n +1 -f your_log_file | some_processing_pipeline 
```

这将在第 1 行开始读取您的日志文件，然后不断等待新行出现并将它们传递给`some_processing_pipeline`.

# ios - Facebook iOS SDK 中没有 FBRequestConnection

> ID：12038898
> 
> 赞同：0
> 
> 时间：2012-08-20T13:45:35.133
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk, fbconnect

我在适用于 iOS 的 FaceBook SDK（最新版本，无 ARC）中找不到对`FBRequestConnection`( ) 的任何引用。`FBRequestConnection.h`

我错过了什么吗？我需要这个来完成“批量请求”。

更新：仍然没有迹象`FBRequestConnection`。批处理请求虽然并不真正需要它。我能够在没有`FBRequestConnection`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:27:03.977

看到那个[链接](http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/)

可能会有所帮助

这些是 Facebook 中 FBRequestConection 的任务

```
– init
– initWithTimeout:
urlRequest property
urlResponse property
– addRequest:completionHandler:
– addRequest:completionHandler:batchEntryName:
– start
– cancel
+ startForMeWithCompletionHandler:
+ startForMyFriendsWithCompletionHandler:
+ startForUploadPhoto:completionHandler:
+ startForPostStatusUpdate:completionHandler:
+ startForPostStatusUpdate:place:tags:completionHandler:
+ startForPlacesSearchAtCoordinate:radiusInMeters:resultsLimit:searchText:completionHandler:
+ startWithGraphPath:completionHandler:
+ startForPostWithGraphPath:graphObject:completionHandler:
+ startWithGraphPath:parameters:HTTPMethod:completionHandler: 
```

# c# - 如何从 Web 服务返回多个值？

> ID：12038900
> 
> 赞同：14
> 
> 时间：2012-08-20T13:45:53.107
> 
> 标签：c#, visual-studio-2010, web-services, asmx, webmethod

我对网络服务世界很陌生，所以请多多包涵。我正在使用 .asmx 文件在 Visual Studio 2010 中创建一个非常简单的 Web 服务。

这是我正在使用的代码：

```
namespace MyWebService
{
    [WebService(Namespace = "http://www.somedomain.com/webservices")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]

    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public string simpleMethod(String str)
        {
            return "Hello " + str;
        }   
    }
} 
```

当我调用它并为它返回的 str 参数输入一个值“John Smith”时：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.somedomain.com/webservices">Hello John Smith</string> 
```

我的问题是为 Web 服务方法返回超过 1 个值的最佳做法是什么？如果值都是相同的数据类型，我应该使用数组吗？如果这些值包含不同的数据类型，我需要创建一个自定义类吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-20T13:53:46.993

我相信最好的设计是**编写一个类并将其包含在您的 WSDL**中。这将使类签名与您的服务描述一起可用。这意味着客户端，尽管它的语言，将能够使用该类型的对象。

创建此类时，**尽量不要使用 .Net 内置的自定义类型**，如`DataSet`或任何其他。尽可能尝试使用基本类型。这将确保您的对象将很容易被序列化和反序列化，以及由客户开发的框架而不是 .Net 使用。

请检查这个问题：[How to Declare Complex Nested C# Type for Web Service](https://stackoverflow.com/questions/1640553/how-to-declare-complex-nested-c-sharp-type-for-web-service) 它确实显示了一些代码和一个小建议。

如果您需要任何进一步的支持，请告诉我。

* * *

**更新**

假设您要为给定的 webmethod 返回以下数据集：

*   学生的姓名
*   学生的出生日期
*   学生当前分配的课程列表（以他们的名字表示）

看看如何签署服务：

```
public class WebService1 : System.Web.Services.WebService
{
    public class Course
    {
        public string Name { get; set; }
    }

    public class Student
    {
        public string Name { get; set; }
        public DateTime BirthDate { get; set; }
        public List<Course> CurrentCourses { get; set; }
    }

    [WebMethod]
    public Student HelloWorld()
    {
        Student Baxter = new Student();

        Baxter.Name = "Baxter";
        Baxter.BirthDate = new DateTime(1986, 04, 22);
        Baxter.CurrentCourses = new List<Course>();
        Baxter.CurrentCourses.Add(new Course() { Name = "SOAP Webservices 101" });
        Baxter.CurrentCourses.Add(new Course() { Name = "Mastering C#" });
        Baxter.CurrentCourses.Add(new Course() { Name = "Why you (and I) suck at Javascript" });

        return Baxter;
    }
} 
```

调用后，结果如下：

```
<Student xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
    <Name>Baxter</Name>
    <BirthDate>1986-04-22T00:00:00</BirthDate>
    <CurrentCourses>
        <Course>
            <Name>SOAP Webservices 101</Name>
        </Course>
        <Course>
            <Name>Mastering C#</Name>
        </Course>
        <Course>
            <Name>Why you (and I) suck at Javascript</Name>
        </Course>
    </CurrentCourses>
</Student> 
```

最好的是，因为这个类签名是公共的（包含在 WSDL 中），您可以**在不同的项目**中执行以下操作，只需处理 WSDL：

```
 ServiceReference1.WebService1SoapClient SoapClient = new ServiceReference1.WebService1SoapClient();
        ServiceReference1.Student IsThisBaxter = SoapClient.HelloWorld(); 
```

# c# - 使用 DrawUserPrimitive 并使用一些矩阵对其进行转换

> ID：12038905
> 
> 赞同：0
> 
> 时间：2012-08-20T13:46:21.490
> 
> 标签：c#, matrix, xna, primitive

这是我所拥有的：一个 custom `DrawableGameComponent`，包含我称之为 some 的孩子`DrawUserPrimitve`。每个孩子都可以包含孩子等。我在每个组件中存储一个描述其形状的顶点列表，并`Matrix`存储其相对位置（并最终转换）。所以在我“ `DrawUserPrimitive`”之前，我需要“应用”一个矩阵。该矩阵必须是组件转换及其父组件及其父组件等的乘积。

这个系统允许我保持组件的变量独立，如果我理解正确，那就是要走的路。

为此，我`BasicEffect`在 XNA 中看到了对象，我可以使用它应用一些矩阵。所以我试图将`basicEffect.World`与我的`component.Transformation`( `Matrix`)相乘

所以我应该继续询问，但现在它没有给我我正在等待的结果。我想知道我是否选择了这样做的好方法。我看到 2 个系统具有相同的结果：

1.  我现在的情况，有点像固定铅笔但移动你的纸
2.  或者在绘制之前添加一个遍历我所有顶点的循环，以根据预期的转换相应地修改这些顶点。有点像移动铅笔而不是纸。

* * *

为了说明起见，一些代码：

```
public void override Draw(GameTime gameTime){

    Game.basicEffect.World *= Transformation;

    foreach(var child in this.Children){
        child.Draw(gameTime);
    }

    Game.basicEffect.World *= Matrix.Invert(Transformation);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:07:29.267

感谢@nico-schertler 的评论，我能够做到。

拥有一个存储“铅笔”当前状态的矩阵堆栈是解决方案。但是我缺少一些东西：

每次您深入对象层次结构（例如：机器人的手臂）时，您都将新矩阵乘以当前矩阵并将**结果**放入堆栈。因此堆栈总是（在其自身之上）必须用于绘制的矩阵。当你处理完这个对象并返回到它的父对象时，只需弹出一次，你就可以检索到要用于它的 Matrix。（我正在堆叠每个矩阵，然后每次都重新计算要使用的结果矩阵。）

备注：注意乘法的顺序。矩阵的乘法不可交换！始终将您的子矩阵乘以当前矩阵。

```
internal void HandleDraw(GameTime gameTime)
{
    Draw(gameTime);

    if (Children.Count > 0)
    {
        // draw children
        foreach (Control child in Children.Values.OfType<Control>())
        {
            if (child.Visible)
            {
                Engine.CurrentTransformation.Push(Matrix.Multiply(
                    child.Transformation,
                    Engine.CurrentTransformation.Peek()
                ));

                child.HandleDraw(gameTime);

                Engine.CurrentTransformation.Pop();
            }
        }
    }
} 
```

# c# - db2 命令超时

> ID：12038906
> 
> 赞同：1
> 
> 时间：2012-08-20T13:46:22.357
> 
> 标签：c#, .net, ado.net, db2

我正在尝试为 dbcommand 设置超时，并对其进行测试，这就是超时设置为 1 的原因。

这是我正在使用的代码，但超时永远不会触发，我做错了什么吗？

注意：使用 DbConnection 是因为此代码是从通用代码中提取的，不仅用于 db2，因此 db2connection 不是一个选项。

```
String lProviderFactory = "System.Data.OleDb";
String lStrConexion = "Provider=IBMDADB2;Database=PYRAMID;Hostname=192.9.200.13;Protocol=TCPIP; Port=50000;Uid=db2admin;Pwd=xxx;";
String lQuery = "SLOW SELECT";
var lDbFactory = DbProviderFactories.GetFactory(lProviderFactory);
DbConnection mConexion = lDbFactory.CreateConnection();
mConexion.ConnectionString = lStrConexion;

mConexion.Open();

try
{
    DbCommand lComando = mConexion.CreateCommand();
    lComando.CommandText = lQuery;
    lComando.CommandTimeout = 1;

    DbDataAdapter lAdapter = lDbFactory.CreateDataAdapter();
    lAdapter.SelectCommand = lComando;
    DataSet lDs = new DataSet();
    lAdapter.Fill(lDs);

}
catch(Exception ex)
{
    Console.WriteLine("EXCEPCION :" + ex.Message); //Timeout should fall in here
}
finally
{
    mConexion.Close();
} 
```

谢谢！

# python - 具有多条记录的域上的 pywhois

> ID：12038908
> 
> 赞同：1
> 
> 时间：2012-08-20T13:46:28.893
> 
> 标签：python, whois, pywhois

我正在尝试创建一个允许我运行 whois 的简单应用程序，但我遇到了障碍。

```
>>> w = pywhois.whois('google.com')
>>> print w
creation_date: []
domain_name: []
emails: []
... 
```

我大约 99% 确定我没有得到任何结果，因为运行：

```
$ whois google 
```

由于多条记录而失败，但运行“=xxx”将运行一条记录。

我可以使用 python-whois 以这种方式运行搜索：

```
>>> w = whois.query('=google.com') 
```

我的解决方案将坚持使用 python-whois 但 pywhois 返回更多信息。

以前有没有人遇到过这个问题，或者有过在 pywhois 中运行单个记录的解决方法？

# asp.net - T4 标记语法含义？

> ID：12038909
> 
> 赞同：-3
> 
> 时间：2012-08-20T13:46:30.240
> 
> 标签：asp.net, c#-4.0, t4

在 ASP.NET (`*.aspx`和`*.tt`) 中，以下标记的含义是什么：`<#= #>` `<# #>` `<#+ #>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:56:51.940

您在问题中描述的标记与 ASP.NET 无关。它们是 T4 模板标记语法的示例。T4 模板在 Visual Studio 中转换，可用于创建任何类型的文件，[尽管它们最常用于代码生成](http://msdn.microsoft.com/en-us/library/bb126445.aspx)。

`<#= #>`执行标记内的代码并返回文本结果。例子：

```
// in this example, TargetNamespace is set to "MuhNamespace"
namespace <#= this.TargetNamespace #> { // outputs: namespace MuhNamespace 
```

`<# #>`执行其中的代码但返回`void`. 例子：

```
This collection contains the following foos:
<#foreach(var foo in bar){ #>
    <#= foo.Name + Environment.NewLine #>
<# } #> 
```

`<#+ #>`定义可以在模板中调用的可重用方法。例如，

```
This collection contains the following types:
<#foreach(var foo in bar){ #>
    <#= GetType(foo) #>
<# } #>

<#+  public string GetType(foo){ return foo.GetType().FullName; } #> 
```

还有更多这些，[可以在此处找到示例。](http://msdn.microsoft.com/en-us/library/ff697256.aspx)

# iphone - iPhone应用程序在设备上崩溃但在模拟器上没有

> ID：12038912
> 
> 赞同：1
> 
> 时间：2012-08-20T13:46:44.157
> 
> 标签：iphone, ios, xcode

我在申请时遇到问题。它在模拟器中运行，但是当我尝试在设备上运行它时，它崩溃了。在将其提交给 Apple 进行审查之前，我对其进行了测试并且它工作正常，但是现在，当我试图再看一遍它时，它一直在崩溃。此外，它不会在一开始就崩溃，但是当我尝试导航到第二个视图时。如果您能帮我弄清楚，请告诉我。谢谢！

（我已经尝试设置 NSZombieEnable，因为我在不同的帖子中找到了这个建议/答案，但它对我不起作用）

```
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x6f466874
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x335b2f7e objc_msgSend + 22
1   Foundation                      0x34d24d04 _NSDescriptionWithLocaleFunc + 44
2   CoreFoundation                  0x3597496e __CFStringAppendFormatCore + 7998
3   CoreFoundation                  0x358ef1d8 _CFStringCreateWithFormatAndArgumentsAux                 + 68
4   Foundation                      0x34d24c2e +[NSString stringWithFormat:] + 54
5   Sustain                     0x00082148 +[HTMLParser parseDataForRequest:error:]     (HTMLParser.m:169)
6   Sustain                     0x00085a5a -[ProxyRequestResponseHandler     requestFinished:] (ProxyRequestResponseHandler.m:251)
7   CoreFoundation                  0x358f31f4 -[NSObject performSelector:withObject:] +     36
8   Sustain                     0x00054364 -[ASIHTTPRequest reportFinished]     (ASIHTTPRequest.m:2004)
9   CoreFoundation                  0x358f31f4 -[NSObject performSelector:withObject:] + 36
10  Foundation                      0x34dc3740 __NSThreadPerformPerform + 344
11  CoreFoundation                  0x35968acc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
12  CoreFoundation                  0x35968298 __CFRunLoopDoSources0 + 208
13  CoreFoundation                  0x3596703e __CFRunLoopRun + 646
14  CoreFoundation                  0x358ea49e CFRunLoopRunSpecific + 294
15  CoreFoundation                  0x358ea366 CFRunLoopRunInMode + 98
16  GraphicsServices                0x33685432 GSEventRunModal + 130
17  UIKit                           0x330c2cce UIApplicationMain + 1074
18  Sustain                     0x00019c26 main (main.m:16)
19  Sustain                     0x00019bc0 start + 32
Thread 0 crashed with ARM Thread State:
    r0: 0x00128a98    r1: 0x325894f6      r2: 0x359eccd5      r3: 0x6f46687c
    r4: 0x32588417    r5: 0x00000000      r6: 0x3f3078c8      r7: 0x2fe0cb70
    r8: 0x2fe0cc13    r9: 0x0c96253d     r10: 0x359730b6     r11: 0x00000000
    ip: 0x3f2e26f0    sp: 0x2fe0cb5c      lr: 0x34d24d0b      pc: 0x335b2f7e
  cpsr: 0x200f0030 
```

这是您在 HTMLParser 中请求的方法

```
+ (BOOL)parseDataForRequest:(ASIHTTPRequest *)request error:(NSError **)error
{
NSStringEncoding encoding = [request responseEncoding];
NSString *string = [[NSString alloc] initWithContentsOfFile:[request downloadDestinationPath] usedEncoding:&encoding error:NULL];
[string release];
NSURL *baseURL = [request url];

xmlInitParser();
xmlDocPtr doc;
if ([request downloadDestinationPath]) {
    doc = htmlReadFile([[request downloadDestinationPath] cStringUsingEncoding:NSUTF8StringEncoding], [self encodingNameForStringEncoding:encoding], HTML_PARSE_RECOVER | HTML_PARSE_NONET | HTML_PARSE_NOWARNING | HTML_PARSE_NOERROR);
} else {
    NSData *data = [request responseData];
    doc = htmlReadMemory([data bytes], (int)[data length], "", [self encodingNameForStringEncoding:encoding], HTML_PARSE_RECOVER | HTML_PARSE_NONET | HTML_PARSE_NOWARNING | HTML_PARSE_NOERROR);
}
if (doc == NULL) {
    [super parseDataForRequest:request error:error];
    return YES;
}

// Create xpath evaluation context
xmlXPathContextPtr xpathCtx = xmlXPathNewContext(doc);
if(xpathCtx == NULL) {
    if (error) {
        *error = [NSError errorWithDomain:NetworkRequestErrorDomain code:101 userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"Error: unable to create new XPath context",NSLocalizedDescriptionKey,nil]];
    }
    return NO;
}

// Evaluate xpath expression
xmlXPathObjectPtr xpathObj = xmlXPathEvalExpression(xpathExpr, xpathCtx);
if(xpathObj == NULL) {
    xmlXPathFreeContext(xpathCtx); 
    if (error) {
        *error = [NSError errorWithDomain:NetworkRequestErrorDomain code:101 userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"Error: unable to evaluate XPath expression!",NSLocalizedDescriptionKey,nil]];
    }
    return NO;
}

// Now loop through our matches
xmlNodeSetPtr nodes = xpathObj->nodesetval;

int size = (nodes) ? nodes->nodeNr : 0;
int i;
for(i = size - 1; i >= 0; i--) {
    assert(nodes->nodeTab[i]);
    NSString *parentName  = [NSString stringWithCString:(char *)nodes->nodeTab[i]->parent->name encoding:encoding];
    NSString *nodeName = [NSString stringWithCString:(char *)nodes->nodeTab[i]->name encoding:encoding];

    xmlChar *nodeValue = xmlNodeGetContent(nodes->nodeTab[i]);
    NSString *value = [NSString stringWithCString:(char *)nodeValue encoding:encoding];
    xmlFree(nodeValue);

    // Here we add a <base> element to the header to make the end result play better with javascript
    // (UIWebView seemed to ignore the Content-Base http header when I tried)
    if ([[nodeName lowercaseString] isEqualToString:@"head"]) {

        xmlNodePtr node = xmlNewNode(NULL, (xmlChar *)"base");

        xmlNewProp(node, (xmlChar *)"href", (xmlChar *)[[baseURL absoluteString] cStringUsingEncoding:encoding]);

        node = xmlDocCopyNode(node, doc, 1);
        xmlAddChild(nodes->nodeTab[i], node);

    // Our xpath query matched all <link> elements, but we're only interested in stylesheets
    // We do the work here rather than in the xPath query because the query is case-sensitive, and we want to match on 'stylesheet', 'StyleSHEEt' etc
    } else if ([[parentName lowercaseString] isEqualToString:@"link"]) {
        xmlChar *relAttribute = xmlGetNoNsProp(nodes->nodeTab[i]->parent,(xmlChar *)"rel");
        if (relAttribute) {
            NSString *rel = [NSString stringWithCString:(char *)relAttribute encoding:encoding];
            xmlFree(relAttribute);
            if ([[rel lowercaseString] isEqualToString:@"stylesheet"] || [[rel lowercaseString] isEqualToString:@"alternate stylesheet"]) {
                xmlNodeSetContent(nodes->nodeTab[i], (xmlChar *)[[self localURLForURL:value withBaseURL:baseURL] cStringUsingEncoding:encoding]);

            }
        }

    // Parse the content of <style> tags and style attributes to find external image urls or external css files
    } else if ([[nodeName lowercaseString] isEqualToString:@"style"]) {

        xmlNodeSetContent(nodes->nodeTab[i], (xmlChar *)[[CSSParser replaceURLsInCSSString:value withBaseURL:baseURL] cStringUsingEncoding:encoding]);

    // Parse the content of <source src=""> tags (HTML 5 audio + video)
    // We explictly disable the download of files with .webm, .ogv and .ogg extensions, since it's highly likely they won't be useful to us
    } else if ([[parentName lowercaseString] isEqualToString:@"source"] || [[parentName lowercaseString] isEqualToString:@"audio"]) {
        NSString *fileExtension = [[value pathExtension] lowercaseString];
        if (![fileExtension isEqualToString:@"ogg"] && ![fileExtension isEqualToString:@"ogv"] && ![fileExtension isEqualToString:@"webm"]) {
            xmlNodeSetContent(nodes->nodeTab[i], (xmlChar *)[[self localURLForURL:value withBaseURL:baseURL] cStringUsingEncoding:encoding]);

        }

        // For all other elements matched by our xpath query (except hyperlinks), add the content as an external url to fetch
    } else if (![[parentName lowercaseString] isEqualToString:@"a"]) {
        xmlNodeSetContent(nodes->nodeTab[i], (xmlChar *)[[self localURLForURL:value withBaseURL:baseURL] cStringUsingEncoding:encoding]);

    }
    if (nodes->nodeTab[i]->type != XML_NAMESPACE_DECL) {
        nodes->nodeTab[i] = NULL;
    }
}

xmlXPathFreeObject(xpathObj);
xmlXPathFreeContext(xpathCtx); 

// We'll use the xmlsave API so we can strip the xml declaration
xmlSaveCtxtPtr saveContext;

if ([request downloadDestinationPath]) {

    // Truncate the file first
    NSFileManager *fileManager = [[[NSFileManager alloc] init] autorelease];

    [fileManager createFileAtPath:[request downloadDestinationPath] contents:nil attributes:nil];

    saveContext = xmlSaveToFd([[NSFileHandle fileHandleForWritingAtPath:[request downloadDestinationPath]] fileDescriptor],[self encodingNameForStringEncoding:NSUTF8StringEncoding],2|8); // 2 == XML_SAVE_NO_DECL, this isn't declared on Mac OS 10.5
    xmlSaveDoc(saveContext, doc);
    xmlSaveClose(saveContext);

} else {
    #if TARGET_OS_MAC && MAC_OS_X_VERSION_MAX_ALLOWED <= __MAC_10_5
    // xmlSaveToBuffer() is not implemented in the 10.5 version of libxml
    NSString *tempPath = [NSTemporaryDirectory() stringByAppendingPathComponent:[[NSProcessInfo processInfo] globallyUniqueString]];
    [[[[NSFileManager alloc] init] autorelease] createFileAtPath:tempPath contents:nil attributes:nil];
    saveContext = xmlSaveToFd([[NSFileHandle fileHandleForWritingAtPath:tempPath] fileDescriptor],[self encodingNameForStringEncoding:NSUTF8StringEncoding],2|8); // 2 == XML_SAVE_NO_DECL, this isn't declared on Mac OS 10.5
    xmlSaveDoc(saveContext, doc);
    xmlSaveClose(saveContext);
    [request setRawResponseData:[NSMutableData dataWithContentsOfFile:tempPath]];
    #else
    xmlBufferPtr buffer = xmlBufferCreate();
    saveContext = xmlSaveToBuffer(buffer,[self encodingNameForStringEncoding:NSUTF8StringEncoding],2|8); // 2 == XML_SAVE_NO_DECL, this isn't declared on Mac OS 10.5
    xmlSaveDoc(saveContext, doc);
    xmlSaveClose(saveContext);
    [request setRawResponseData:[[[NSMutableData alloc] initWithBytes:buffer->content length:buffer->use] autorelease]];
    xmlBufferFree(buffer);
    #endif

}
NSString *contentType = [[[request responseHeaders] objectForKey:@"Content-Type"] lowercaseString];
contentType = [[contentType componentsSeparatedByString:@";"] objectAtIndex:0];
if (!contentType) {
    contentType = @"text/html";
}

[[request responseHeaders] setValue:[NSString stringWithFormat:@"%@; charset=utf-8"] forKey:@"Content-Type"];
[request setResponseEncoding:NSUTF8StringEncoding];
xmlFreeDoc(doc);
doc = nil;

[super parseDataForRequest:request error:error];
return YES;
} 
```

在第二个视图中，我加载了一个加载后缓存的 webView。我使用这个项目来获得这个： [https](https://github.com/pokeb/ProxyingUIWebView) ://github.com/pokeb/ProxyingUIWebView 奇怪的是它曾经可以工作，但现在它不再工作了。我试图在另一台设备上对其进行测试，但我遇到了同样的崩溃。这就是我在辅助视图控制器中的内容：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSString *urlString = [NSString stringWithFormat:@"%@", request.URL];

NSBundle *mainBundle = [NSBundle mainBundle];
NSString *baseUrl = [mainBundle objectForInfoDictionaryKey:@"testUrl"];

if ([urlString rangeOfString:baseUrl].location != NSNotFound)   //Check if URL is in-app.
{
    NSURLRequest *testRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://127.0.0.1:8080/?url=http.somelink.net"]];

    NSString *requestUrlString = [NSString stringWithFormat:@"%@",request.URL];
    NSString *testUrlString = [NSString stringWithFormat:@"%@",testRequest.URL];

    if ([requestUrlString isEqualToString:testUrlString])   //First view load
    {
        return YES;
    }

    if (navigationType == UIWebViewNavigationTypeLinkClicked ||
        navigationType == UIWebViewNavigationTypeFormSubmitted ||
        navigationType == UIWebViewNavigationTypeFormResubmitted ||
        navigationType == UIWebViewNavigationTypeReload ||
        navigationType == UIWebViewNavigationTypeOther)
    {
        if ([requestUrlString rangeOfString:@"Id="].location != NSNotFound) //Navigate to
        {                                                                   //secondary view.
            SecondaryTopTenSwapsViewController *secondaryController = [[SecondaryTopTenSwapsViewController alloc] init];
            secondaryController.urlRequest = request;
            [self.navigationController pushViewController:secondaryController animated:YES]; 
        }
        return NO;
    }

    return YES;

}
else    //Not in-app URL. Check if user wants to leave application and open Safari.
{
    UIAlertView *leaveApplicationAlert = [[UIAlertView alloc] initWithTitle:@"Open link?" message:@"Are you sure you want to exit the application and open the link in Safari?" delegate:self cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];
    leaveApplicationAlert.tag = 1;
    [leaveApplicationAlert show];
    externalUrl = request.URL;
    return NO;
}
} 
```

另外，我发现在我的辅助视图控制器中它在之后立即崩溃

```
-(void)webViewDidStartLoad:(UIWebView *)webView 
```

此外，这不可能是内存问题，就像我收到内存警告一样，我弹出到根视图控制器并释放所有子视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:58:25.180

您试图通过错误地转换其格式类型来访问对象。

例如，您尝试使用格式类型`%@`而不是`%i`or来访问整数值`%d`。

```
NSInteger someInteger = 255;
NSString *string = [NSString stringWithFormat:@"Hello, my favourite number is %@", someInteger"]; 
```

如果您发布一些代码，我可以概述发生这种情况的位置。

从您的堆栈跟踪来看，出现问题的字符串似乎被传递到`HTMLParser`对象是接收者的方法中。

编辑 - -

另一种可能性是传递给 的参数之一`NSString`已经被释放并且无法访问，因为它已被释放并进一步从内存中删除。

编辑 - -

我相信问题出在这条线上：

```
[[request responseHeaders] setValue:[NSString stringWithFormat:@"%@; charset=utf-8"] forKey:@"Content-Type"]; 
```

您使用格式 string `%@`，但不提供 an`NSString`作为参数。

我相信您的意思是编写以下代码：

```
[[request responseHeaders] setValue:[NSString stringWithFormat:@"%@; charset=utf-8", contentType] forKey:@"Content-Type"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:10:38.610

打开 Zombies 和 Malloc Scribble（方案诊断）并调试您的应用程序（模拟器或设备或两者）。您可能有一个正在使用的已释放对象。当您通过释放的对象或指针读取（或写入）时，随机内存访问可能成功或失败。这是这种不一致行为的最常见原因。

# javascript - jQuery onClick in , 忽略其中的元素

> ID：12038913
> 
> 赞同：2
> 
> 时间：2012-08-20T13:46:44.673
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:52:21.470

根据您的最后一段，我认为您的标题中有一个链接，您希望允许用户单击该链接，而不会`module-header`导致 的单击处理导致`module-body`切换。

为此，您需要在`<a>`单击的点拦截事件，并使用`stopPropagation`：

```
$('body').on("click", '.module-header a', function (event) { 
  event.stopPropagation();
  return true;
}); 
```

这将允许单击您的链接，而不会将事件冒泡到`module-header`的单击处理程序。Quirks Mode 有一篇[有用的文章](http://www.quirksmode.org/js/events_order.html)。

# c# - 在 C# 中设置 WPF 视觉样式

> ID：12038921
> 
> 赞同：0
> 
> 时间：2012-08-20T13:47:39.333
> 
> 标签：c#, wpf, c#-4.0

我正在尝试在 WPF 导航栏上缩进项目。我可以使用资源在 XAML 中执行此操作并将其设置`visualstyle`为适当的样式

```
<dx:DXWindow.Resources>
    <Style x:Key="nestedNavBarItemL1" TargetType="ButtonBase">
        <Setter Property="Margin" Value="20,0,0,0"/>
    </Style>
    <Style x:Key="nestedNavBarItemL2" TargetType="ButtonBase">
        <Setter Property="Margin" Value="40,0,0,0"/>
    </Style>
</dx:DXWindow.Resources>

.
.
<dxnb:NavBarItem Content="Source Group"
       ImageSource="Images/Icons/Group.png" 
       VisualStyle="{StaticResource nestedNavBarItemL1}"/>
.
. 
```

但是，如果控件已经创建，这很好，但我正在使用类似于的代码通过代码构建控件

```
NavBarGroup group1 = new NavBarGroup();
group1.Header = eventItems[i].name;
group1.Tag = eventItems[i].id;

for (int i = 0; i < nodeCount; i++)
{
    NavBarItem item = new NavBarItem();
    item.Content = "Home";
    item.Tag = "Level" + i;
    //item.VisualStyle = ? How do I set VisualStyle="{StaticResource nestedNavBarItemL1}"/>
    group1.Items.Add(item);
}

group1.IsExpanded = false;
navBarControl.Groups.Add(group1); 
```

如何`VisualStyle="{StaticResource nestedNavBarItemL1}"`在代码中设置？

谢谢你哦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:53:24.683

如果您已经在资源中定义了样式，则可以使用`FindResource`方法来获取它，然后像这样分配给相关属性（窗口是资源定义的位置）：

```
Style visualStyle = (Style)window.FindResource("nestedNavBarItemL1");
item.VisualStyle = visualStyle; 
```

如果您不这样做，您可以按照[此](http://www.codeproject.com/Articles/29699/WPF-How-to-create-Styles-in-code-and-magical-Conte)codeproject 文章中所示创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:55:17.367

在 app.xaml 中定义样式，然后您可以`Application.Current.Resources["YourDefinedStyle"] as Style`在应用程序中访问它。

前任：

```
item.VisualStyle = Resources["YourStyle"] as Style 
```

# deployment - 如何将 Orchard CMS Web 项目部署到 Windows Azure 云服务？

> ID：12038925
> 
> 赞同：0
> 
> 时间：2012-08-20T13:47:58.727
> 
> 标签：deployment, azure, cloud, orchardcms, webrole

基本上，我希望能够将 Orchard CMS Web 应用程序部署到 Windows azure 云服务。我尝试按照与通常对任何其他 Web 应用程序相同的步骤进行操作，但它永远不会起作用。

更新我从 orchardproject.net 网站下载了 Orchard.Source.1.5.1。添加了我的自定义模块和主题。将 Web 应用程序发布到本地文件夹。这将产生一个 Orchard Web 应用程序。我打开这个 Web 应用程序，添加 Windows Azure 云服务项目，我的 Web 应用程序就是这个项目中的 Web 角色。我使用我的姓名和密钥将 DataConnectionString 设置到我的天蓝色云存储。发布到 Azure。

部署结束后，当我转到站点 url 查看结果时，我会得到 YSOD，但有以下异常：

* * *

“/”应用程序中的服务器错误。

在类型“Orchard.Environment.DefaultOrchardShell”上找到的任何带有“公共绑定标志”的构造函数都不能用可用的服务和参数调用：无法解析构造函数“Void .ctor”的参数“Orchard.Mvc.Routes.IRoutePublisher routePublisher”（ System.Func `1[Autofac.Features.OwnedInstances.Owned`1[Orchard.Environment.IOrchardShellEvents]]，System.Collections.Generic.IEnumerable `1[Orchard.Mvc.Routes.IRouteProvider], Orchard.Mvc.Routes.IRoutePublisher, System.Collections.Generic.IEnumerable`1[Orchard.Mvc.ModelBinders.IModelBinderProvider]，Orchard.Mvc.ModelBinders.IModelBinderPublisher，Orchard.Tasks.ISweepGenerator)'。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：Autofac.Core.DependencyResolutionException：在类型“Orchard.Environment.DefaultOrchardShell”上找到的具有“公共绑定标志”的构造函数都不能使用可用的服务和参数调用：无法解析参数“Orchard.Mvc.Routes.IRoutePublisher” routePublisher'的构造函数'Void .ctor（System.Func `1[Autofac.Features.OwnedInstances.Owned`1[Orchard.Environment.IOrchardShellEvents]]，System.Collections.Generic.IEnumerable `1[Orchard.Mvc.Routes.IRouteProvider], Orchard.Mvc.Routes.IRoutePublisher, System.Collections.Generic.IEnumerable`1[Orchard.Mvc.ModelBinders.IModelBinderProvider]，Orchard.Mvc.ModelBinders.IModelBinderPublisher，Orchard。任务.ISweepGenerator)'。

* * *

更新：我按照果园项目网站“将果园部署到 Windows Azure”中的指南进行操作，没有触及任何内容，只是从存储库中获取了所有源代码，从 Visual Studio 2010 命令行运行 ClickToBuildAzure，没有得到任何错误消息，在 ServiceConfiguration 文件中设置我的存储并上传我的包和 ServiceConfiguration 文件。部署顺利。我进入 Orchard Get Started 屏幕，但在输入所有信息后，包括我的 SQL Azure DB 的连接字符串（从 Azure 门户获取连接字符串并插入我的密码），我收到以下错误：

安装失败：调用构造函数“Void .ctor(Orchard.Environment.Configuration.ShellSettings, Orchard.Data.ISessionLocator, System.Collections.Generic.IEnumerable`1[Orchard.Data.Migration.Interpreters.ICommandInterpreter] , Orchard.Data.ISessionFactoryHolder, Orchard.Reports.Services.IReportsCoordinator)' 类型为'DefaultDataMigrationInterpreter'。

我什至没有到达AddingaModuletotheDistribution 点。

* * *

[果园团队提供](http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure)的指南对我来说不是理想的解决方案。

我已经开发了自定义模块和主题，并且我在使用 Visual Studio 和 TFS 的开发环境中工作，并且不想将它与 WebMatrix 一起使用并部署到 Azure 网站。

我从 orchard 网站下载了源代码，并添加了一个 azure web 角色项目。

顺便说一句，我已经检查了[这个问题](https://stackoverflow.com/questions/6442141/how-to-deploy-orchard-cms-in-windows-azure)和[这篇博](http://litemedia.info/deploy-orchard-cms-to-azure)文，但仍然无法解决我的问题。

我发现的一切都相当过时了！

我几乎要放弃了。谁能告诉我这是否可能？或者使用 Orchard 的唯一方法是 WebMatrix？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:35:18.413

您需要更仔细地阅读文档，因为此处介绍了添加模块和主题：http: [//docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure#AddingaModuletotheDistribution](http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure#AddingaModuletotheDistribution)

您需要将模块和主题添加到 Azure 解决方案，而不是 src 中的 Orchard 解决方案。完成此操作后，ClickToBuildAzure 脚本将生成一个包，其中包含您的模块和主题，并将很好地部署到 Azure。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T05:24:03.147

您可以尝试[http://docs.orchardproject.net/Documentation/Building-and-deploying-Orchard-from-a-source-code-drop](http://docs.orchardproject.net/Documentation/Building-and-deploying-Orchard-from-a-source-code-drop) 这刚刚为我解决了完全相同的异常，但我构建的目的是在 IIS 而不是 Azure 上运行。

没有调查以弄清楚链接中的步骤做了什么来满足通过执行常规文件系统发布不满足的 IoC 容器。

# netbeans - Netbeans 生成代码设置

> ID：12038930
> 
> 赞同：0
> 
> 时间：2012-08-20T13:48:18.243
> 
> 标签：netbeans, code-formatting, auto-generate

我想知道在哪里可以更改 Netbeans 生成代码的方式。例如，我希望左括号位于新行上。

我一直在寻找 [Tools] -> [Options] 菜单，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:11:16.107

**解决方案 1**应该可以解决您的问题。对于**解决方案 1**无法解决的任何自动生成的代码格式，请使用**解决方案 2**。不过要注意*“代码模板”*选项卡，过去它对我来说相对比较麻烦。

**重要提示：**尝试修改*“代码模板”*以放置大括号将无法正常工作，因为它已被**解决方案 1**中的首选项覆盖。应首先尝试使用**解决方案 1**对所需格式进行任何更改，因为 Netbeans 中的*“格式”*选项卡优先于*“代码模板”*选项卡。

**解决方案1：**

转到`[Tools]`-> `[Options]`-> `[Editor]`-> `[Formatting]`。选择您使用的语言，然后在`Category`下拉框中选择`Braces`。直接在它下面，你会看到`Braces Placement`。您可以修改类声明、方法声明或“其他”的大括号的位置。选项是：

*   同一行 - 将括号与类、方法或“其他”放在同一行。
*   新行 - 将括号放在类、方法或“其他”下的新行上。
*   新行半缩进 - 与添加了半缩进的“新行”相同。
*   新行缩进 - 与添加完整缩进的“新行”相同。

**解决方案2：**

转到`[Tools]`-> `[Options]`-> `[Editor]`-> `[Code Templates]`。选择您使用的语言，然后根据您喜欢的格式修改模板。

例如，如果选择了 Java，我可以滚动到“pm”缩写并查看 Netbeans 如何生成私有方法。这是一个不完整但有用*的缩写词含义*列表，列出了您可能想要更改的一些常见 Java 缩写词。

*   m - 方法
*   p - 私人
*   f - 决赛
*   s - 静态

因此，如果要更改列为“私有”的自动生成方法的格式，可以在“扩展文本”区域更改缩写“pm”的格式，该区域显示自动生成规则/私有方法的格式。

**注意：**这些字母的组合有时可能意味着不同的东西，例如“pr”被扩展为“private”，但“prm”被列为受保护方法，而不是私有方法。

# c#-4.0 - 在 LINQ to SQL 中使用 where 子句查询多个表

> ID：12038939
> 
> 赞同：1
> 
> 时间：2012-08-20T13:49:17.057
> 
> 标签：c#-4.0, linq-to-sql

原谅我对 Linq to SQL 的无知，但是......

如何一举查询多个表？

例子：

我想查询，例如 4 个表，以获取包含以下单词“*企鹅*”的标题。有趣的是，每个表还有一个名为 TITLE 的字段。

表格是这样的：

![在此处输入图像描述](../Images/6c50670f5f71cb6dfb849a4682be29e7.png)

我想在每个表（列：TITLE）中查询“*企鹅*”这个词。**每个表都被引用（通过外键）到一个简单地称为Reference**的父表，并链接到一个名为 REF_ID 的列上。因此，理想情况下，结果应该返回与查询条件匹配的 REF_ID 列表。

如果您能提供帮助，您将获得丰厚的回报...... *（带有绿色勾号；）*

我的代码只适用于一张桌子 - 但不适用于两张：

```
var refs = db.REFERENCEs
.Include(r => r.BOOK).Where(r => r.BOOK.TITLE.Contains(titleString)).Include(r => r.JOURNAL.AUTHORs)
.Include(r => r.JOURNAL).Where(r => r.JOURNAL.TITLE.Contains(titleString)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:11:27.080

不久前我有一个类似的场景，最终创建了一个合并我的表的视图，然后将该视图映射到一个 LINQ-to-SQL 实体。

像这样的东西：

```
create view dbo.References as

  select ref_id, title, 'Book' as source from dbo.Book
  union all
  select ref_id, title, 'Journal' from dbo.Journal
  union all
  select ref_id, title, 'Magazine' from dbo.Magazine
  union all
  select ref_id, title, 'Report' from dbo.Report 
```

映射看起来像这样（使用属性）：

```
[Table(Name="References")]
public class Reference {

  [Column(Name="Ref_Id", IsPrimaryKey=true)]
  public int Id {get;set;}

  [Column]
  public string Title {get;set;}

  [Column]
  public string Source {get;set;}
} 
```

然后查询可能如下所示：

```
var query = db.GetTable<Reference>().Where(r => r.Title.Contains(titleString)); 
```

# vb.net - 尝试使用彩色单元格背景打印 DataGrid 视图

> ID：12038942
> 
> 赞同：0
> 
> 时间：2012-08-20T13:49:27.787
> 
> 标签：vb.net, winforms, datagrid, datagridview

我正在使用免费软件脚本打印 DataGrid 视图，但我面临的问题是，虽然我已经为单元格着色，但当我将 DataGrid 传递给 PrintDGV 免费软件代码时，它不会打印颜色。我不熟悉 VB.NET 或 DataGrids，所以这是我第一次尝试这样做。

**它当前在打印视图中的外观图像：** ![在此处输入图像描述](../Images/0597661a1de56ef7d87ab7774455bbe9.png)

**代码：**

[http://pastebin.com/0yjvmAp7](http://pastebin.com/0yjvmAp7)

最初我以为我可以只为我的 DataGrid 的单元格着色并将其传递给免费软件进行打印，免费软件也会打印背景颜色，但似乎这不是真的..

不知道是不是这样，但你去：

```
Imports System.Collections.Generic

' Print Current Schedule Grid Form
' This form displays a list of the print options.
' When you press "OK", control is returned to the Officer Availability window where the specs are read and the actual printing is done.
' You can choose to limit the number of columns, from the Officer area, that are printed
' You can also choose to limit the # rows that are printed to the range selected in schedule.

Public Class PrintOptions

    ' Form Events

    Public Sub New(ByVal availableFields As List(Of String))

        InitializeComponent()

        ' Add all of the displayed Officer specification columns to the columns available to be printed
        For Each field As String In availableFields
            chklst.Items.Add(field, True)
        Next

    End Sub

    Private Sub PrintOptions_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        ' Set the Print Defaults - Print all rows by default and fit calendar to page width by default

        rdoAllRows.Checked = True
        chkFitToPageWidth.Checked = False
    End Sub

    ' Form Butten Events

    Private Sub btnOK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnOK.Click
        Me.DialogResult = Windows.Forms.DialogResult.OK
        Me.Close()
    End Sub

    Private Sub btnCancel_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCancel.Click
        Me.DialogResult = Windows.Forms.DialogResult.Cancel
        Me.Close()
    End Sub

    ' Read Form Properties

    Public Function GetSelectedColumns() As List(Of String)
        ' Scroll through the list of available columns and return a list of the columns to be printed
        Dim lst As New List(Of String)
        For Each item As Object In chklst.CheckedItems
            lst.Add(item.ToString)
        Next
        Return lst
    End Function

    Public ReadOnly Property PrintTitle() As String
        ' Return the title to be used when printing
        Get
            Return txtTitle.Text
        End Get
    End Property

    Public ReadOnly Property PrintAllRows() As Boolean
        ' Are all rows to be printed or should only the rows selected on the Grid in the Officer Availability window be printed
        Get
            Return rdoAllRows.Checked
        End Get
    End Property

    Public ReadOnly Property FitToPageWidth() As Boolean
        ' Compress grid width to fit on page
        Get
            Return chkFitToPageWidth.Checked
        End Get
    End Property

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:21:38.617

似乎免费软件为您删除了着色（这对于打印视图来说似乎是合法的）。浏览您的代码，我看到调用了 PrintPreviewDialog。看起来这就是魔法发生的地方。您也可以粘贴代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:16:44.523

我通过找出如何更改对我有用的单元格边框颜色解决了这个问题。这是片段：

```
 ' Initialize the random-number generator.
                Randomize()
                ' Generate random value between 1 and 6.
                MyAlpha = CInt(Int((254 * Rnd()) + 0))
                ' Initialize the random-number generator.
                Randomize()
                ' Generate random value between 1 and 6.
                MyRed = CInt(Int((254 * Rnd()) + 0))
                ' Initialize the random-number generator.
                Randomize()
                ' Generate random value between 1 and 6.
                MyGreen = CInt(Int((254 * Rnd()) + 0))
                ' Initialize the random-number generator.
                Randomize()
                ' Generate random value between 1 and 6.
                MyBlue = CInt(Int((254 * Rnd()) + 0))

                Dim penColor As New Pen(Color.FromArgb(MyAlpha, MyRed, MyGreen, MyBlue))
                ' Drawing Cells Borders 
                e.Graphics.DrawRectangle(penColor, New Rectangle(ColumnLeft(ColPage, ColAt), tmpTop, ColumnWidth(ColPage, ColAt), CellHeight)) 
```

# .net - F# 在运行时创建函数

> ID：12038944
> 
> 赞同：1
> 
> 时间：2012-08-20T13:49:32.277
> 
> 标签：.net, function, f#

我知道它与[这个 SO question](https://stackoverflow.com/questions/2608114/f-equivalent-to-eval)和[this one](https://stackoverflow.com/questions/372043/how-can-evaluate-an-expression-stored-as-a-string-in-f)相关，但我想知道，是否（以及如何）可以在运行时创建新的 F# 函数。

我的意思是在不显示的情况下使用 REPL。除了 CodeDOM 和 Reflection 或 Quotations 还有其他选择吗？

如果在 F# 中不可能，那么在任何其他 .Net 语言中是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:17:48.030

当然可以，这就是 DLR（动态语言运行时）的用途。IronPython、IronRuby 和其他与您描述的完全一样的动态语言使用它。DLR 只是一个库，因此您可以根据需要在 F# 中使用它。

另一种选择是使用 F# 的高阶函数来实现类似的功能——这将非常灵活，但最终会稍微慢一些，因为 .NET CLR 无法在优化方式上做太多（如果有的话）。

# android - Android：打开对话框以选择音频

> ID：12038946
> 
> 赞同：4
> 
> 时间：2012-08-20T13:49:40.177
> 
> 标签：android, audio, select, android-intent

我需要允许用户从他的媒体库中选择一些音频文件。

这是我正在尝试做的事情：

```
 Intent tmpIntent = new Intent(
              Intent.ACTION_PICK,
              android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI
              );

        startActivityForResult(tmpIntent, 0); 
```

但我得到错误：

```
08-20 17:44:35.444: E/AndroidRuntime(3773): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.PICK dat=content://media/external/audio/media } 
```

为了安全起见，我也尝试过`INTERNAL_CONTENT_URI`，但结果相似。

我怎样才能做到这一点？

**UPD：**顺便说一句，如果我尝试通过 URI 来获取图像（即`android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI`），那么它可以工作：打开图像打开对话框。

**UPD2：**刚刚在模拟器上尝试过 - 我的代码有效！但在两台设备上却没有（SE Xperia Neo 和一些宏碁）。[但是，如果我尝试这个答案](https://stackoverflow.com/questions/10461065/how-to-pickup-an-audio-files-path-or-uri-from-device-in-android/10461112#10461112)的第二个变体，那么我会得到包含所有现有文件管理器的菜单，以及“音乐选择”！但我需要写意图只是为了打开这个“音乐选择”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T04:28:40.713

好吧，我在 LogCat 中看到了当我打开音乐选择对话框时会发生什么，我得到了我需要的东西。这段代码对我有用：

```
 Intent tmpIntent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
     startActivityForResult(tmpIntent, 0); 
```

如果我只想获得通知声音，那么我需要额外添加，就像这样：

```
 Intent tmpIntent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
     tmpIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_NOTIFICATION);
     startActivityForResult(tmpIntent, 0); 
```

# java - 设置 firefoxWebDriver.get(...) 超时

> ID：12038948
> 
> 赞同：3
> 
> 时间：2012-08-20T13:49:44.110
> 
> 标签：java, selenium, webdriver, selenium-firefoxdriver

我喜欢访问一些不受我控制的页面。可能是该页面执行了一些缓慢的获取请求，但主 html 已完全加载并显示。我尝试了很多选择，但我可以做到。`firefoxWebDriver.get(...)`不会在现实时间内在某些站点上终止。

为了重现问题，我写了这个小单元测试来显示问题：

```
public class Timeout  {

    private FirefoxDriver   driver;

    @Before
    public void setup() {
        final FirefoxProfile profile = new FirefoxProfile();
        profile.setPreference("dom.max_script_run_time", 0);
        profile.setPreference("webdriver.load.strategy", "fast");

        this.driver = new FirefoxDriver(profile);

//      this.driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);
//      this.driver.manage().timeouts().setScriptTimeout(10, TimeUnit.SECONDS);

    }

    @Test(timeout = 15000)
    public void shouldRetriveREDCAFEPageQuiteFast() {
        this.driver.get("http://redcafe.vn/Home/su-kien-binh-luan/kagawa-tu-choi-mac-ao-so-7");
    }

    @Test(timeout = 15000)
    public void shouldRetriveMUFCPageQuiteFast() {
        this.driver.get("http://news.mufc.vn/detail/172-hoan-tat-giay-phep-lao-dong-m-u-chinh-thuc-so-huu-kagawa.html");
    }

    @After
    public void tearDown() {
        this.driver.close();
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:52:15.570

```
<driver>.manage().timeouts().pageLoadTimeout(60, TimeUnit.SECONDS); 
```

将页面加载超时设置为 60 秒，之后它将引发错误。您需要在第一次`get()`通话之前进行设置。

从 Webdriver 版本 2.20.0 开始支持 API。

[请参阅 API 参考以获取新的超时 API](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html)

# video - Captivate：向幻灯片内视频添加播放栏

> ID：12038951
> 
> 赞同：0
> 
> 时间：2012-08-20T13:49:49.663
> 
> 标签：video, adobe-captivate

我的幻灯片中有一个视频，当用户进入幻灯片时播放。我需要知道如何向该视频添加播放栏，以便用户可以在需要时暂停视频。

谢谢

（土坯迷人6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:56:55.517

I don't know if this will work for your issue, but try inserting the video straight to the stage vs pulling it from the library. ![insert video][1] For some reason when you do this you get the playbar at the bottom of the screen. I have noticed that when this is added your image becomes distorted to compensate for adding the bar.

# visual-studio-2012 - vs2012中的SQL CLR项目

> ID：12038952
> 
> 赞同：44
> 
> 时间：2012-08-20T13:50:01.193
> 
> 标签：visual-studio-2012, sqlclr

安装VS2012发行版后，找不到SQL CLR proect模板。我怎样才能开始创建这种类型的项目。

谢谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-20T14:05:51.590

现在，所有各种数据库对象都在 SQL Server 数据库项目中创建。

他们消除了数据库项目（SQL 脚本）和 SQL CLR 项目之间的区别。

所以它只是`File -> New -> Project`, `Installed -> Templates -> SQL Server`, `SQL Server Database Project`.

然后，如果您转到`Add -> New Item`，您会在左侧找到各种类别，包括（令人困惑的）`SQL CLR`和`SQL CLR C#`。第一个用于生成用于添加 CLR 对象的 SQL 脚本，第二个用于创建实际的 CLR 对象本身。

# windows-phone-7 - 在 C# 中设置应用程序栏的颜色

> ID：12038954
> 
> 赞同：2
> 
> 时间：2012-08-20T13:50:06.603
> 
> 标签：windows-phone-7, application-bar

我在这样的代码中定义了我的 ApplicationBar：

```
private void BuildApplicationBar()
        {
            // Set the page's ApplicationBar to a new instance of ApplicationBar.
            ApplicationBar = new ApplicationBar();
            ApplicationBar.Opacity = 0.8;
            ApplicationBar.ForegroundColor = Color.FromArgb(0, 138, 204, 34);

            // Create a new button and set the text value to the localized string from AppResources.
            ApplicationBarIconButton CheckInExitAppBarButton = new ApplicationBarIconButton(new Uri("icons/check_in.png", UriKind.Relative));
            CheckInExitAppBarButton.Text = AppResource.CheckInExit;
            ApplicationBar.Buttons.Add(CheckInExitAppBarButton);
            CheckInExitAppBarButton.Click += new EventHandler(CheckInExitAppBarButton_Click);

        } 
```

假设我可以看到图标的颜色发生了变化，但我看不到它们下面的文字。当我在没有 ApplicationBar.Color 的情况下执行此操作时，我可以同时看到图标 + 文本，但白色是我不感兴趣的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:00:17.013

文本使用前景色的 alpha 值，您将其设置为 0（透明）。将其设置为 255 即可：

```
 private void BuildApplicationBar()
    {
        // Set the page's ApplicationBar to a new instance of ApplicationBar.
        ApplicationBar = new ApplicationBar();
        ApplicationBar.Opacity = 0.8;
        ApplicationBar.ForegroundColor = Color.FromArgb(255, 138, 204, 34);

        // Create a new button and set the text value to the localized string from AppResources.
        ApplicationBarIconButton CheckInExitAppBarButton = new ApplicationBarIconButton(new Uri("icons/check_in.png", UriKind.Relative));
        CheckInExitAppBarButton.Text = AppResource.CheckInExit;
        ApplicationBar.Buttons.Add(CheckInExitAppBarButton);
        CheckInExitAppBarButton.Click += new EventHandler(CheckInExitAppBarButton_Click);

    } 
```

# jquery - jQuery .animate() 更高效

> ID：12038956
> 
> 赞同：0
> 
> 时间：2012-08-20T13:50:17.213
> 
> 标签：jquery, html

我试图让这段代码更高效，所以我不必复制它。我有 3 个带有标记的框：

```
<div class="feature purple">
</div>

<div class="feature red">
</div>

<div class="feature blue">
</div> 
```

我正在为他们的内容制作动画，我已经省略了这些内容以减少垃圾邮件：

```
$(function(){ 
    $('.purple').hover(function() {

        $('.purple .icon').animate(
            { left: 220, opacity: 0.5 }, {
                duration: 'slow',
                easing: 'easeInOutQuart'
        });

        $('.purple .the-title').animate(
            { left: 15 }, {
                duration: 'slow',
                easing: 'easeInOutQuart'
        });

    });   
    $('.purple').mouseleave(function() {

        $('.purple .the-title').animate(
            { left: 75 }, {
            duration: 'slow',
            easing: 'easeInOutQuart'

        });
        $('.purple .icon').animate(
            { left: 5, opacity: 1 }, {
            duration: 'slow',
            easing: 'easeInOutQuart'
        });
    });              
}); 
```

如何在`.feature`没有其他 2 个框的情况下将 jQuery 附加到“”，并减少我必须使用的 jQuery 行数？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:53:18.710

像这样的东西应该可以正常工作。确保在第一个绑定中使用`mouseover`而不是。`hover`

```
$(function(){ 
    $('.feature').mouseover(function() {

        $(this).find('.icon').stop().animate(
            { left: 220, opacity: 0.5 }, {
                duration: 'slow',
                easing: 'easeInOutQuart'
        });

        $(this).find('.the-title').stop().animate(
            { left: 15 }, {
                duration: 'slow',
                easing: 'easeInOutQuart'
        });

    }).mouseleave(function() {

        $(this).find('.the-title').stop().animate(
            { left: 75 }, {
            duration: 'slow',
            easing: 'easeInOutQuart'

        });
        $(this).find('.icon').stop().animate(
            { left: 5, opacity: 1 }, {
            duration: 'slow',
            easing: 'easeInOutQuart'
        });
    });              
}); 
```

# c# - 在 WCF MessageEncoder 中获取 HTTP 标头

> ID：12038961
> 
> 赞同：7
> 
> 时间：2012-08-20T13:50:50.660
> 
> 标签：c#, .net, wcf, http, rest

我目前正在为我的自托管 WCF REST 应用程序编写 GZIP 压缩。我有一个 .NET 'MessageEncoder' 类的自定义实现和一个 'WebContentTypeMapper' 类的自定义实现。

如何在“ReadMessage”函数和“GetMessageFormatForContentType”函数中检索 http 标头？我想在解压缩输入之前检查“Content-Encoding”标头的传入请求。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:04:44.153

这是你可以做的

```
if (WebOperationContext.Current.IncomingRequest.Headers["Content-Encoding"] == WHAT YOU WANT)
{
            // Do what you like to do here
} 
```

希望这可以帮助。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:00:42.540

我不相信您将能够直接从 CustomMessageEncoder 获取标题。您可以做的是利用更新的 .NET 4.5 WCF [BinaryMessageEncoderBindingElement](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binarymessageencodingbindingelement.aspx)。现在，这允许您指定压缩类型（例如 Gzip）并在尝试解压缩之前自动检测消息正文是否已压缩。有关更多详细信息，请参阅[Windows Communication Foundation 4.5 中的新增功能](http://msdn.microsoft.com/en-us/library/dd456789.aspx)。

如果您想访问标题，您可以尝试的一种方法是在[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.afterreceiverequest.aspx)的实现中利用[HttpRequestMessageProperty](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.httprequestmessageproperty.aspx)。

简单的例子：

```
 public class MyDispatchMessageInspector : IDispatchMessageInspector
    {
        public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            object obj;
            if (request.Properties.TryGetValue(HttpRequestMessageProperty.Name, out obj))
            {
                 var httpRequestMessageProperty = obj as HttpRequestMessageProperty;

                 if (httpRequestMessageProperty != null 
                         && !string.IsNullOrEmpty(httpRequestMessageProperty.Headers["content-encoding"]))
                 {
                    ...
                 }
            }
            return null;
     }
     ...
} 
```

另一种选择是`OperationContext`使用以下方法访问：

```
int index = System.ServiceModel.OperationContext.Current.IncomingMessageHeaders.FindHeader("content-encoding", "");
string contentEncodeHeaderValue = System.ServiceModel.OperationContext.Current.IncomingMessageHeaders.GetHeader<string>(index); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:39:18.427

您可以尝试使用 WebOperationContext.Current 或 OperationContext.Current（取决于您的绑定）。但不幸的是，我认为您不能在 MessageEncoder 实现本身中执行此操作，因为在此过程中为时已晚，因为当 MessageEncoder 被要求写入消息内容时，消息帧（在本例中为 HTTP 标头）已经被写入。因此，您还需要以 IOperationBehavior 的形式将其他行为应用于相应地设置标头的操作。在我的一个个人实现中，我通过在 OperationContext 中添加一个带有自定义消息检查器的 GzipExtension 解决了这个问题。正如 Alex 所说，IIS 已经有一个称为动态压缩的功能，可以压缩任何已配置的内容类型。

# javascript - 为什么 XMLHttpRequest 不适用于“www.”？

> ID：12038962
> 
> 赞同：2
> 
> 时间：2012-08-20T13:51:02.190
> 
> 标签：javascript, jquery, ajax, redirect

我有以下代码：

```
var params = {
            cache:false, 
            dataType:"json", 
            type:"GET",
            url: "/order.php",
            error: function(data){
                dump(data);
            },
            success: function (data){
              alert('ok');
            },
            data:{
                js:1
            }
        };

$.ajax(params); 
```

因此，如果我运行 example.com，它会完美运行。但是，如果我运行 www.example.com，我会通过函数 dump() 得到一个错误。谷歌控制台显示错误：

> XMLHttpRequest 无法加载 =1345470451769">http://example.com/order.php?js=1&tariff=247&=1345470451769。Access-Control-Allow-Origin 不允许来源[http://www.example.com](http://www.example.com)

这是什么意思？

所以我不需要从 www.domain.com 到 domain.com 的任何永久重定向。

提前感谢您的帮助。

**更新1：** 我添加了功能：

```
function getBaseUrl()
{
   var baseUrl = '';
   baseUrl += location.protocol + '//';
   baseUrl += location.hostname;

   return baseUrl;
} 
```

并更改 url: "/order.php" on url: getBaseUrl() + "/order.php"

得到同样的错误。我在这里做错了吗？

**更新 2：** 我将此添加到 htaccess 文件中：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin http://sample.com http://www.sample.com
</IfModule> 
```

看来我的主机不支持它，因为我仍然收到 www 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:53:49.743

您遇到的错误意味着您无法`XMLHttpRequest`从一个域到另一个域，除非目标域在其响应标头中指定您可以这样做。这是浏览器强制执行的安全措施。

整个域必须匹配，因此 example.com 无法`XMLHttpRequest`向 www.example.com 发出请求，反之亦然。

您可以只使用一些 javascript 根据当前文档位置获取 URL，或者使用相对路径。

还要确保网络服务器没有进行从一个域到另一个域的静默重定向，因为这也可能导致权限问题。

如果您有权访问网络服务器，另一种选择是将适当的跨域标头添加到响应中 - [http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

例子： `Access-Control-Allow-Origin: http://www.example.com http://example.com`

编辑：上面列表中的域需要用空格分隔，而不是逗号。

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "http://sample.com http://www.sample.com"
</IfModule> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T13:55:33.043

子域被视为具有[相同来源策略](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)的不同域。如果您的站点功能有或没有 www，请使用相对路径。

如果服务器重定向，为什么当前页面不在 www 上？

从 SEO 的角度来看，您可能希望服务器重定向到一个版本的 url 或另一个。

# bash - bash中的简约mysqldump进度条

> ID：12038963
> 
> 赞同：1
> 
> 时间：2012-08-20T13:51:02.393
> 
> 标签：bash, progress-bar, mysqldump

大家好，我正在尝试为普通用户显示一个简单的进度条，以便在我得到这个的那一刻轻松理解：

```
mysqldump --verbose -uusername -ppassword dbname > dbname$(date +.%d.%m.%y).sql 
```

--verbose 给了我很多我理解的信息，但是有没有办法像 wget 一样显示一个更容易阅读的进度条： 0%====>====100% ？或类似于 rsyncs --stats？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:52:25.343

不，因为 mysqldump 不知道它要转储多少数据，因此它不能对已经完成的数据量给出百分比。

您可以编写自己的脚本，使用 mysqldump 并模仿进度条，例如在每个数据库之后更新。

示例外壳脚本：

```
databases=(`echo 'show databases;' | mysql | grep -v ^Database$`)
for i in "${databases[@]}";
do
    /usr/bin/mysqldump --add-drop-database --routines --triggers > ~/${i}.sql
    print ".";
done 
```

# asp.net-mvc - 无法在 .Net MVC 3 上运行 Elmah

> ID：12038966
> 
> 赞同：1
> 
> 时间：2012-08-20T13:51:14.287
> 
> 标签：asp.net-mvc, asp.net-mvc-3, elmah

我将 Elmah [https://github.com/alexanderbeletsky/elmah.mvc](https://github.com/alexanderbeletsky/elmah.mvc)用于 MVC .net 项目。对于登录/输入错误，我使用的是 MS SQL。

安装数据库并通过 NutGet 安装 Elmah 后，我无法可视化数据库中的错误。

在这里我的 Web.Config 你能告诉我我在这里做错了什么吗？谢谢

```
<?xml version="1.0" encoding="utf-8"?>
    <!--
      For more information on how to configure your ASP.NET application, please visit
      http://go.microsoft.com/fwlink/?LinkId=152368
      -->
    <configuration>
      <configSections>
        <sectionGroup name="elmah">
          <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
          <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
          <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
          <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
        </sectionGroup>
      </configSections>
      <connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
        <add name="MyProjectEventsMobileEntities" connectionString="metadata=res://*/Models.EventsCustom.csdl|res://*/Models.EventsCustom.ssdl|res://*/Models.EventsCustom.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;Initial Catalog=MyProjectEventsMobile;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
      </connectionStrings>
      <appSettings>
        <add key="webpages:Version" value="1.0.0.0" />
        <add key="ClientValidationEnabled" value="true" />
        <add key="UnobtrusiveJavaScriptEnabled" value="true" />
        <add key="elmah.mvc.disableHandler" value="false" />
        <add key="elmah.mvc.requiresAuthentication" value="false" />
        <add key="elmah.mvc.allowedRoles" value="*" />
      </appSettings>
      <system.web>
        <compilation debug="true" targetFramework="4.0">
          <assemblies>
            <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
            <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
          </assemblies>
        </compilation>
        <authentication mode="Forms">
          <forms loginUrl="~/Account/LogOn" timeout="2880" />
        </authentication>
        <membership>
          <providers>
            <clear />
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
          </providers>
        </membership>
        <profile>
          <providers>
            <clear />
            <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
          </providers>
        </profile>
        <roleManager enabled="false">
          <providers>
            <clear />
            <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
            <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
          </providers>
        </roleManager>
        <pages>
          <namespaces>
            <add namespace="System.Web.Helpers" />
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
            <add namespace="System.Web.WebPages" />
          </namespaces>
        </pages>
        <httpModules>
          <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
          <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
          <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
        </httpModules>
      </system.web>
      <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true">
          <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
          <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
          <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
        </modules>
      </system.webServer>
      <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
          <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
          </dependentAssembly>
        </assemblyBinding>
      </runtime>
      <elmah></elmah>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:02:10.093

您需要配置 elmah 以使用您的数据库进行日志记录：

在您的配置中扩展`<elmah></elmah>`为：

```
<elmah>                  
    <errorLog type="Elmah.SqlErrorLog, Elmah" 
        connectionStringName="MyProjectEventsMobileEntities" />
</elmah> 
```

您可以在 ELMAH[示例 web.config](http://elmah.googlecode.com/svn/tags/REL-1.2-SP1/samples/web.config)和[ErrorLogImplementations](http://code.google.com/p/elmah/wiki/ErrorLogImplementations) wiki 文章中找到更多选项。

# c++ - 链表节点类中的链接数

> ID：12038972
> 
> 赞同：0
> 
> 时间：2012-08-20T13:51:36.807
> 
> 标签：c++, pointers, linked-list

在为链表创建节点时，它可能看起来像这样：

```
template <class T>
class node {
 T data;
 node* next;
} 
```

对于双向链表，它可能看起来像这样：

```
template <class T>
class node {
 T data;
 node* next;
 node* prev;
} 
```

对于 BST，它可能看起来像这样：

```
template <class T>
class node {
 T data;
 node* left_child;
 node* right_child;
} 
```

这都可以概括为以下格式：

```
template <class T>
class node {
 T data;
 node* links[N]; // N = 1 for linked list, N = 2 for tree or doubly linked list, etc...
} 
```

在不使用 STL 向量的情况下，在类 ctor 中指定 N 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:53:38.357

怎么样

```
template <class T, int N>
class node {
 T data;
 node* links[N];
}; 
```

并将其用作：

```
node<int, 2> doubleLinkedListNode;
node<int, 1> singleLinkedListNode; 
```

但是我认为它太复杂了，应该保持原来的样子。干净多了。

# mysql - mysql查询分组依据

> ID：12038975
> 
> 赞同：0
> 
> 时间：2012-08-20T13:51:42.920
> 
> 标签：mysql

以下查询为每次出现 recipecomments.RecipeID 带来一条记录，我只想为每个 recipeID 带来一条记录，按 recipeid 分组似乎不起作用

```
SELECT recipecomments.RecipeID
      ,recipecomments.CommentID 
      ,recipes.RecipeID
      ,recipes.Name
      ,recipes.CategoryID
      ,recipes.RatingTotal
      ,recipes.ImageMed
FROM recipecomments 
     JOIN recipes ON recipecomments.RecipeID = recipes.RecipeID                 
ORDER BY recipecomments.CommentID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:55:14.653

如果您按recipid 分组，您需要决定要显示哪个CommentID。从你的语法来看，我猜是最高的。

```
 SELECT 
      recipecomments.RecipeID,
      MAX(recipecomments.CommentID),
      recipes.RecipeID,
      recipes.Name, 
      recipes.CategoryID,
      recipes.RatingTotal,
      recipes.ImageMed
 FROM recipecomments   
                JOIN recipes ON recipecomments.RecipeID = recipes.RecipeID 
 group by 
      recipecomments.RecipeID,
      recipes.RecipeID,
      recipes.Name, 
      recipes.CategoryID,
      recipes.RatingTotal,
      recipes.ImageMed 
```

# spring - java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()

> ID：12038980
> 
> 赞同：0
> 
> 时间：2012-08-20T13:51:54.183
> 
> 标签：spring, hibernate, spring-batch, hibernate-4.x

出于某种原因，在将 Spring Batch 与 Hibernate 4 结合使用时出现以下异常。

```
java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/classic/Session;
at org.springframework.batch.item.database.HibernateItemReaderHelper.createQuery(HibernateItemReaderHelper.java:152)
at org.springframework.batch.item.database.HibernateItemReaderHelper.getForwardOnlyCursor(HibernateItemReaderHelper.java:122)
at .... 
```

我升级到最新的 Spring 批处理 2.1.8.RELEASE 和 Spring 3.1.1.RELEASE，它们应该与 Hibernate 4 一起工作。我查看了源代码，似乎助手类正在使用会话工厂的新版本，即在休眠 4 中使用：

```
package org.springframework.batch.item.database;

import java.util.Collection;
import java.util.List;
import java.util.Map;

import org.hibernate.Query;
import org.hibernate.ScrollMode;
import org.hibernate.ScrollableResults;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.StatelessSession;
import org.springframework.batch.item.database.orm.HibernateQueryProvider;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.util.Assert;
import org.springframework.util.StringUtils;

/**
 * Internal shared state helper for hibernate readers managing sessions and
 * queries.
 * 
 * @author Dave Syer
 * 
 */
public class HibernateItemReaderHelper<T> implements InitializingBean {

    private SessionFactory sessionFactory;

    private String queryString = "";

    private String queryName = "";

    private HibernateQueryProvider queryProvider;

    private boolean useStatelessSession = true;

    private StatelessSession statelessSession;

    private Session statefulSession;

    /**
     * @param queryName name of a hibernate named query
     */
    public void setQueryName(String queryName) {
        this.queryName = queryName;
    }

    /**
     * @param queryString HQL query string
     */
    public void setQueryString(String queryString) {
        this.queryString = queryString;
    }

    /**
     * @param queryProvider Hibernate query provider
     */
    public void setQueryProvider(HibernateQueryProvider queryProvider) {
        this.queryProvider = queryProvider;
    }

    /**
     * Can be set only in uninitialized state.
     * 
     * @param useStatelessSession <code>true</code> to use
     * {@link StatelessSession} <code>false</code> to use standard hibernate
     * {@link Session}
     */
    public void setUseStatelessSession(boolean useStatelessSession) {
        Assert.state(statefulSession == null && statelessSession == null,
                "The useStatelessSession flag can only be set before a session is initialized.");
        this.useStatelessSession = useStatelessSession;
    }

    /**
     * @param sessionFactory hibernate session factory
     */
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public void afterPropertiesSet() throws Exception {

        Assert.state(sessionFactory != null, "A SessionFactory must be provided");

        if (queryProvider == null) {
            Assert.notNull(sessionFactory, "session factory must be set");
            Assert.state(StringUtils.hasText(queryString) ^ StringUtils.hasText(queryName),
                    "queryString or queryName must be set");
        }
        // making sure that the appropriate (Hibernate) query provider is set
        else {
            Assert.state(queryProvider != null, "Hibernate query provider must be set");
        }

    }

    /**
     * Get a cursor over all of the results, with the forward-only flag set.
     * 
     * @param fetchSize the fetch size to use retrieving the results
     * @param parameterValues the parameter values to use (or null if none).
     * 
     * @return a forward-only {@link ScrollableResults}
     */
    public ScrollableResults getForwardOnlyCursor(int fetchSize, Map<String, Object> parameterValues) {
        Query query = createQuery();
        if (parameterValues != null) {
            query.setProperties(parameterValues);
        }
        return query.setFetchSize(fetchSize).scroll(ScrollMode.FORWARD_ONLY);
    }

    /**
     * Open appropriate type of hibernate session and create the query.
     */
    public Query createQuery() {

        if (useStatelessSession) {
            if (statelessSession == null) {
                statelessSession = sessionFactory.openStatelessSession();
            }
            if (queryProvider != null) {
                queryProvider.setStatelessSession(statelessSession);
            }
            else {
                if (StringUtils.hasText(queryName)) {
                    return statelessSession.getNamedQuery(queryName);
                }
                else {
                    return statelessSession.createQuery(queryString);
                }
            }
        }
        else {
            if (statefulSession == null) {
                statefulSession = sessionFactory.openSession();
            }
            if (queryProvider != null) {
                queryProvider.setSession(statefulSession);
            }
            else {
                if (StringUtils.hasText(queryName)) {
                    return statefulSession.getNamedQuery(queryName);
                }
                else {
                    return statefulSession.createQuery(queryString);
                }
            }
        }

        // If queryProvider is set use it to create a query
        return queryProvider.createQuery();

    }

    /**
     * Scroll through the results up to the item specified.
     * 
     * @param cursor the results to scroll over
     */
    public void jumpToItem(ScrollableResults cursor, int itemIndex, int flushInterval) {
        for (int i = 0; i < itemIndex; i++) {
            cursor.next();
            if (i % flushInterval == 0 && !useStatelessSession) {
                statefulSession.clear(); // Clears in-memory cache
            }
        }
    }

    /**
     * Close the open session (stateful or otherwise).
     */
    public void close() {
        if (statelessSession != null) {
            statelessSession.close();
            statelessSession = null;
        }
        if (statefulSession != null) {
            statefulSession.close();
            statefulSession = null;
        }
    }

    /**
     * Read a page of data, clearing the existing session (if necessary) first,
     * and creating a new session before executing the query.
     * 
     * @param page the page to read (starting at 0)
     * @param pageSize the size of the page or maximum number of items to read
     * @param fetchSize the fetch size to use
     * @param parameterValues the parameter values to use (if any, otherwise
     * null)
     * @return a collection of items
     */
    public Collection<? extends T> readPage(int page, int pageSize, int fetchSize, Map<String, Object> parameterValues) {

        clear();

        Query query = createQuery();
        if (parameterValues != null) {
            query.setProperties(parameterValues);
        }
        @SuppressWarnings("unchecked")
        List<T> result = query.setFetchSize(fetchSize).setFirstResult(page * pageSize).setMaxResults(pageSize).list();
        return result;

    }

    /**
     * Clear the session if stateful.
     */
    public void clear() {
        if (statefulSession != null) {
            statefulSession.clear();
        }
    }

} 
```

所以问题是为什么即使使用了最新版本，它仍然试图使用旧版本。有谁知道为什么这仍然会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:20:08.497

我们终于通过针对 Hibernate 4 编译 Spring 批处理来使其工作。似乎 Spring 批处理与 Hibernate 4 不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:34:08.397

这是我的 WAR 中的内容：

```
activation-1.1.jar
amqp-client-2.7.1.jar
antlr-2.7.7.jar
aopalliance-1.0.jar
aspectjrt-1.5.0.jar
aspectjweaver-1.5.2.jar
aspectjweaver-1.6.9.jar
avalon-framework-4.1.3.jar
billing-commons-1.9.0-SNAPSHOT.jar
billing-core-1.9.0-SNAPSHOT.jar
cglib-nodep-2.2.2.jar
classpath.txt
commons-batch-2.0.0-SNAPSHOT.jar
commons-beanutils-1.7.0.jar
commons-cli-1.1.jar
commons-codec-1.2.jar
commons-customer-experience-1.3.0.jar
commons-domain-1.0.0.jar
commons-email-1.1.jar
commons-email-1.9.1-SNAPSHOT.jar
commons-hibernate-3.0.0-SNAPSHOT.jar
commons-http-1.2.1.jar
commons-httpclient-3.1.jar
commons-httpclient-contrib-3.1.jar
commons-io-1.3.1.jar
commons-lang-2.1.jar
commons-logging-1.1.jar
commons-logging-1.2.0.jar
commons-monitoring-1.0.0.jar
commons-property-3.3.0.jar
commons-rabbitmq-1.1.1.jar
commons-spring-agent-2.5.0-SNAPSHOT.jar
commons-util-1.6.1.jar
customer-inventory-commons-1.4.0.jar
customer-inventory-core-1.4.0.jar
cxf-api-2.3.2.jar
cxf-common-schemas-2.3.2.jar
cxf-common-utilities-2.3.2.jar
cxf-rt-bindings-xml-2.3.2.jar
cxf-rt-core-2.3.2.jar
cxf-rt-frontend-jaxrs-2.3.2.jar
cxf-rt-transports-common-2.3.2.jar
cxf-rt-transports-http-2.3.2.jar
dom4j-1.6.1.jar
generic-monitoring-console-api-1.1.0.jar
geronimo-javamail_1.4_spec-1.7.1.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.4.Final.jar
hibernate-entitymanager-4.1.4.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
hibernate-validator-4.3.0.Final.jar
javassist-3.15.0-GA.jar
jaxb-impl-2.1.13.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
jettison-1.1.jar
jms-1.1.jar
jsr250-api-1.0.jar
jsr311-api-1.1.1.jar
log4j-1.2.15.jar
logkit-1.0.1.jar
mail-1.4.jar
neethi-2.0.4.jar
orchestration-api-1.7.0-20120820.120350-6.jar
quartz-1.5.2.jar
simplestuff-0.9.jar
singleview-api-commons-1.1.0.jar
singleview-api-core-1.1.0.jar
slf4j-api-1.5.6.jar
slf4j-simple-1.5.6.jar
spring-aop-3.1.1.RELEASE.jar
spring-asm-3.1.1.RELEASE.jar
spring-aspects-3.1.1.RELEASE.jar
spring-batch-core-2.1.8.RELEASE.jar
spring-batch-infrastructure-2.1.8.RELEASE.jar
spring-beans-3.1.1.RELEASE.jar
spring-context-3.1.1.RELEASE.jar
spring-context-support-3.1.1.RELEASE.jar
spring-core-3.1.1.RELEASE.jar
spring-expression-3.1.1.RELEASE.jar
spring-jdbc-3.1.1.RELEASE.jar
spring-orm-3.1.1.RELEASE.jar
spring-tx-3.1.1.RELEASE.jar
spring-web-3.1.1.RELEASE.jar
spring-webmvc-3.1.1.RELEASE.jar
stax2-api-3.0.2.jar
validation-api-1.0.0.GA.jar
woodstox-core-asl-4.0.8.jar
wsdl4j-1.6.2.jar
XmlSchema-1.4.7.jar
xpp3_min-1.1.4c.jar
xstream-1.3.1.jar 
```

# jquery - 使用 HTTP 基本身份验证对服务的跨源请求

> ID：12038982
> 
> 赞同：1
> 
> 时间：2012-08-20T13:52:06.703
> 
> 标签：jquery, authentication, cross-domain

如何向使用 HTTP Basic Auth 的 Web 服务发出跨源请求？

我的客户端是用 jQuery 开发的，并且我的 RESTful/JSON Web 服务已经过修改，因此返回了“跨域”标头。

客户端代码：

```
$.ajax({
    url: "http://localhost:3000/applications", // external service
    async: false,
    beforeSend: function (req) {
        req.setRequestHeader("Authorization", "Basic "+ base64_value)
    },
    success: function (applications) { $.each(applications, function(i, app) {
        list.push(app)
    })}
}) 
```

客户端代码触发 OPTIONS 和 GET 请求（在 Chrome 中）。OPTIONS 请求失败并返回 401。

我应该为 GET 请求使用哪些标头，应该为 OPTIONS 请求使用哪些标头？哪些服务器响应标头应该用于 GET 和 OPTIONS？

我使用 cURL 和完全相同的授权标头向服务发出请求，并且这有效（即与 JavaScript 代码中的用户名/密码相同）。所以我猜这与 headers 和 OPTIONS 方法有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:25:20.343

我不知道这是可能的，但在阅读之后，你实际上可以做到这一点。您的代码错误来自您在 beforeSend() 中定义的 Header 值

标头名称是正确的，但这是您必须如何构造您的值（您将需要像 base64.js 这样的 Base64 编码器）

var base64 = Base64.encode(用户名 + ":" + 密码)

然后你可以使用你编写的 jQuery 块。

# java - 最佳实践：多项目中的版本控制和发布

> ID：12038984
> 
> 赞同：8
> 
> 时间：2012-08-20T13:52:11.050
> 
> 标签：java, maven, dependencies, release, continuum

在以下多项目情况下，版本控制和发布管理的最佳实践是什么？

## 项目结构

*   全球父母
    *   父项目（版本：1.0-SNAPSHOT）
        *   子项目 1（与父项目相同）
        *   子项目 2（与父项目相同）
        *   子项目 3（与父项目相同）
        *   子项目 4（与父项目相同）
        *   …</li>

我只想为父项目和所有子项目设置一次版本，因为项目的每个部分都必须具有相同的版本。

我还想要的是，用 continuum/maven 发布项目。

## 当前的“坏”解决方案：

通常一个简单的方法应该是在父 pom 中设置版本并在每个孩子中说“来自父母的最后一个版本”，但这不适用于 maven <3.1（参见此处）[http://jira.codehaus.org/browse/ MNG-624] 现在我在每个子项目中设置父项目的版本，并且对于每个版本，我必须更改所有子项目和父项目的版本。

例子：

**家长**

```
<groupId>com.test</groupId>
<artifactId>com.test.buildDefinition</artifactId>
<version>1.0-SNAPSHOT</version> 
```

**孩子**

```
<parent>
    <groupId>com.test</groupId>
    <artifactId>com.test.buildDefinition</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<groupId>com.test</groupId>
<artifactId>com.test.project</artifactId>
<version>${parent.version}</version> 
```

如果我现在想使用 Continuum 发布我的项目，我使用以下顺序来发布它：

1.  父项目
2.  儿童项目 1
3.  儿童项目 2
4.  …</li>

但这不起作用，因为在更改父级版本后，子级在父级中不再有 SNAPSHOT 版本，我认为必须有更好的方法来发布具有连续性的多项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:04:06.093

如果您在`<dependencyManagement/>`标签中添加子模块，我很确定您不会遇到这个问题。

**家长**

```
<groupId>com.test</groupId>
<artifactId>com.test.buildDefinition</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>

<modules>
    <module>child1</module>
    <module>child2</module>
</modules>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.test</groupId>
            <artifactId>com.test.child1</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>com.test</groupId>
            <artifactId>com.test.child2</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

**孩子1**

```
<parent>
    <groupId>com.test</groupId>
    <artifactId>com.test.buildDefinition</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<!-- groupId and version can be skipped since it will be inherited from parent -->
<artifactId>com.test.child1</artifactId> 
```

**Child2（取决于 Child1）**

```
<parent>
    <groupId>com.test</groupId>
    <artifactId>com.test.buildDefinition</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<!-- groupId and version can be skipped since it will be inherited from parent -->
<artifactId>com.test.child2</artifactId>

<dependencies>
    <dependency>
        <groupId>com.test</groupId>
        <artifactId>com.test.child1</artifactId>
    </dependency>
</dependencies> 
```

如果您在使用 dependencyManagement 时尝试这样做，则模块之间的依赖项将永远不必定义任何版本，因为它们是在父 pom.xml 中定义的。

通过这种方法发布多模块项目我从来没有遇到过任何问题。

**编辑**

需要明确的是：`dependencyManagement`与父子之间的继承无关。它解决了子模块之间依赖版本的任何问题。它在发布期间有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:43:01.043

您应该在单个版本控制层次结构下为同时具有相同版本的模块创建多模块结构。Continuum 将允许您将它们作为单个作业或每个模块的多个作业添加到组中，并且无论哪种方式，发布机制都会从父级触发并自动为您解析版本。

顺便说一句，您可以删除`<version>${parent.version}</version>`和相同的 groupId，因为它们将从父级继承。

如果全局父级是单独发布的，您应该将其拆分为一个单独的模块，而不是使其成为同一个多模块结构的一部分。您可以在此布局中找到示例项目：[https ://github.com/brettporter/centrepoint](https://github.com/brettporter/centrepoint)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:55:19.353

如果您希望所有版本号保持同步，您可以使用 Maven 发布插件的[autoVersionSubmodules](http://maven.apache.org/plugins/maven-release-plugin/prepare-mojo.html#autoVersionSubmodules)标志。将此值设置为 true 将允许您在顶级项目级别执行发布，并使所有子模块以与父级相同的版本发布。

这可以在运行时在命令行上`mvn -DautoVersionSubmodules release:prepare`或在 POM 文件中指定，如下所示：

```
<plugin>
  <artifactId>maven-release-plugin</artifactId>        
  <version>2.3.2</version>
  <configuration>
    <autoVersionSubmodules>true</autoVersionSubmodules>
  </configuration>
</plugin> 
```

我没有使用过 Continuum，但我相信它在幕后使用了 Maven 发布插件？一些谷歌搜索表明这可能有效（基于一些关于 Continuum 界面如何处理这种情况的“不错的”错误）。

# c# - 在 STORED PROCEDURE 调用之前执行 SET 语句

> ID：12038985
> 
> 赞同：1
> 
> 时间：2012-08-20T13:52:13.173
> 
> 标签：c#, mysql, stored-procedures, percona

我有一个简单的 C# 代码，它创建 MySQL 连接、带参数的存储过程命令并返回 DataReader 对象。由于我们切换到 Percona Cluster，我想执行这个存储过程。带有本地标志（SET wsrep_on = 0;），因此当集群不可用时它将起作用。是否可以运行语句 SET wsrep_on = 0; 直接在执行存储过程之前。？由于它是一个会话变量，它是否适用于连接池等？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:52:59.970

尝试像这样一次性执行您的 SQL。

`"SET wsrep_on = 0; EXEC StoredProc @Param1;"`

当我尝试使用 MSSQL 时它工作正常，但我现在没有方便的 MySQL 在那里测试..

# ruby-on-rails - Watir ：无法将焦点移至控件，因为它不可见、未启用或属于不接受焦点的类型

> ID：12038993
> 
> 赞同：1
> 
> 时间：2012-08-20T13:52:39.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, selenium-webdriver, watir

我是 watir 的新手，目前正在使用它来自动化应用程序，但是当我尝试单击一个按钮时，我遇到了一个错误。

Watir 代码如下所示：

```
$browser.button(:id,"Button_one").click 
```

按钮的 html 如下所示：

```
<input id="Button_one" class="ButtonA ButtonB" type="submit" value="Continue">. 
```

显示的错误是：

```
WIN32OLERuntimeError: (in OLE method `focus': )
    OLE error code:800A083E in htmlfile
      Can't move focus to the control because it is invisible, not enabled, or of a type that does not accept the focus.
    HRESULT error code:0x80020009
      Exception occurred.
    Ruby192/lib/--/input_elements.rb:294:in `method_missing'
    Ruby192/lib/--/watir-classic/input_elements.rb:294:in `set' 
```

按钮似乎不可见，已禁用。此错误的原因可能是什么？请让我知道如何处理这个....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:39:18.250

尝试这个：

```
$browser.button(:id => "Button_one").when_present.click 
```