# StackOverflow 问答 11558000-11558999

# c - C中的短整数，十六进制和二进制基数

> ID：11558001
> 
> 赞同：0
> 
> 时间：2012-07-19T09:39:49.597
> 
> 标签：c, binary, hex

我希望您能帮助分析以下代码的输出：

```
int f(unsigned short x){
    int count;      
    for (count=0; x!=0; x>>=1){
        if (x & 1)
            count++;
    }
    return count;
}

int main(void){
    unsigned short x = 0x00ef;

    while (x){
        printf("%d", f(f(x)));
        x<<=4;
    }

    printf("\n");
    return 0;
} 
```

我将二进制基数`x`视为 239 或**11101111**。

所以 **11101111 != 0**所以我们进入while循环：f(f( **11101111** ))，然后f的计数达到7：**11101111**到**01110111**到**00111011**到**00011101**到**00001110**等等。我们有 7 种情况，其中 (x&1!=0) 然后**00000111**被发送到 f，计数为 3，正在打印 3，原始数字变为**11110000**并发送到 f，然后将 4 发送到 f，但是由于 4 是**00000100** count=1 然后我希望打印 1，但输出是 3331。

有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:44:07.350

您似乎期望原始数字限制为 8 位，这很少是`unsigned short`.

在第一次移位之后，`x`将保持`0x00ef << 4`，即`0x0ef0`仍然具有相同的位数设置。

# android - 在 sqlite Android 中使用单个查询创建（如果表不存在）和插入表

> ID：11558002
> 
> 赞同：1
> 
> 时间：2012-07-19T09:39:53.623
> 
> 标签：android, sqlite

我想使用单个查询插入到表中，如果尚未创建该表，请创建它并执行插入

欢迎任何想法，答案建议或示例**查询**

高级谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:47:04.223

使用`SQLiteDatabase.execSQL()`命令，并执行两个以';'分隔的查询，例如：

```
db.execSQL("create table if not exists('columns and details here');insert into 'whatever you want to insert');" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:44:44.273

首先，您必须检查该表是否已创建，因此请使用此查询

```
CREATE TABLE IF NOT EXISTS "abcxyz" ( ' +
           '"id" INTEGER PRIMARY KEY AUTOINCREMENT,' +
           '"vorname" TEXT,' +
           '"name" TEXT,' +
           '"geburtsdatum" TEXT,' +
           '"suchid" TEXT )' 
```

而不是写你的插入查询。

# php - php sprintf 插入特殊字符

> ID：11558003
> 
> 赞同：1
> 
> 时间：2012-07-19T09:39:54.880
> 
> 标签：php, special-characters, printf

我知道 sprintf 允许格式化字符串。我如何插入特殊字符（在我的情况下是标签）？

该符号 s 之后的 10 个制表符字符（“\t”）。 **像这样：**

```
sprintf("%'\t's","str") = "*morespices*str" 
```

**这项工作:** :

```
sprintf("%'a10s","str") = "aaaaaaastr"
sprintf("%'a10s","str") = "       str" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:44:19.803

这对我来说很好：

```
<?php
  echo sprintf("f%'\t10sf", 'str'); 
```

结果：

```
f                           strf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-05T16:15:31.363

试试这个：

```
<?php
$_10tabs = sprintf("%'\t10s", '');
echo 'str'.$_10tabs.'|'; 
```

结果有 10 个选项卡：

```
str                                     | 
```

在 1 行中：

```
echo sprintf("str%'\t10s|", ''); 
```

使用 n 个标签：

```
$n = 5;
echo sprintf("str%'\t".$n."s|",''); 
```

生成 5 个选项卡：

```
str                 | 
```

# c# - 十进制验证在 FireFox 中不起作用？

> ID：11558004
> 
> 赞同：0
> 
> 时间：2012-07-19T09:40:02.370
> 
> 标签：c#, jquery, internet-explorer, firefox, google-chrome

我使用以下 JQuery 对文本框进行十进制验证。它在 Internet Explorer 和 Chrome 中工作正常。如果我在 FireFox 中使用它，BackSpace 键在 FireFox 中不起作用。如何解决这个问题？

```
 $('.decimalValidate').keypress(function(event) {
                        if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 || event.which > 57)) {
                            event.preventDefault();
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:34:06.343

使用此链接检查退格的关键字。 [http://www.javascripter.net/faq/keycodes.htm](http://www.javascripter.net/faq/keycodes.htm)

希望这能解决您在 mozilla 中的问题。但我不确定它在其他浏览器中如何工作。

```
$('.decimalValidate').keypress(function(event) {
    if (e.which===8)
    { 
        return;                                          
    }
    if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 ||  event.which > 57)) {
                                event.preventDefault();
    }
 }); 
```

# iphone - 在 iPhone 中重复超出屏幕高度的背景图像

> ID：11558008
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:40:13.580
> 
> 标签：iphone, ipad, uiscrollview, uiimage, background-image

我是 iPhone 开发者的新手，

我正在制作 Book Reader 应用程序，其中我有 40 本书，当我将每本书放在我的背景图像中时，我的图像不会滚动，我想在我的 UIImage 中滚动。

我试过这个，但它不会滚动我的图像。

```
self.view.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg.png"]]]; 
```

***简而言之：***我想根据内容增加背景图像的大小。

**查看我的快照：** ![](../Images/56bbcf32f2ab15d857d4e93ad7866e37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:14:13.713

一件事..设置更长的 BG 图像不会使您的控制器尺寸变大...您需要使用 UIScrollView 让您查看剩余的项目，或者您必须设置书籍的大小，以便它们改变它们的大小这样他们就可以根据他们的人数来适应。如果您想在没有 UIScrollView 的情况下拥有它，并且所有书籍都在同一页面上，无论 Book 的总数是多少，那么正如 Павел Оганесян 在他的一条评论中所说

`At first, get it working with static sized view (as for 40 book always, for example). Then improve you solution to any number of books.`

# java - 解密加密消息摘要时出现非法块大小异常

> ID：11558010
> 
> 赞同：1
> 
> 时间：2012-07-19T09:40:15.940
> 
> 标签：java, exception, encryption, rsa, message-digest

我想解密加密的消息摘要。我的java程序中有这段代码：

```
 String bobSignedMsg = SignedMsg;

    //At the receiving end, Bob extracts the msg 
    // length, the msg text, and the digital
    // signature from the signed msg.
    //Get the message length.
    int MsgLen = Integer.parseInt(bobSignedMsg.trim().substring(bobSignedMsg.length()-6));
    System.out.println(
               "\n12\. Bob's calculated msg len: "
                                 + MsgLen);

    //Get the message text.
    String bobMsgText = bobSignedMsg.substring(
                                 0,MsgLen);
    System.out.println(
               "\n13\. Bob's extracted msg text: "
                             + bobMsgText);

    //Bob knows that everything following the msg
    // text except for the four characters at the
    // end that indicate the message length is
    // the encoded and encrypted version of the
    // extended digital signature.  He extracts
    // it.
     String bobExtractedSignature =
          bobSignedMsg.substring(
            MsgLen,bobSignedMsg.length() - 6);
    System.out.println(
        "\n14\. Bob's extracted extended digital "
                    + "signature: " 
                        + bobExtractedSignature);
    byte[] strtodecrypt=bobExtractedSignature.getBytes();

            byte[] decryptedCardNo = obj.rsaDecrypt(strtodecrypt,PbkeyPath);
         String decryptedform = obj.byteArrayToHexStr(decryptedCardNo);
         System.out.println("After Decryption: "+decryptedform); 
```

在上面的代码行中

```
byte[] decryptedCardNo = obj.rsaDecrypt(strtodecrypt,PbkeyPath); 
```

调用函数：

```
public byte[] rsaDecrypt(byte[] sampleText,String pbkeypath) {
    PublicKey pubKey = null;
    try {
        pubKey = readKeyFromFile(pbkeypath);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Cipher cipher = null;
    try {
        cipher = Cipher.getInstance("RSA");
    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        cipher.init(Cipher.DECRYPT_MODE, pubKey);
    } catch (InvalidKeyException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    byte[] cipherData = null;
    try {
        cipherData = cipher.doFinal(sampleText);
        // cipherData = cipher.
    } catch (IllegalBlockSizeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (BadPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return cipherData;
} 
```

但它给出了以下错误：

```
javax.crypto.IllegalBlockSizeException: Data must not be longer than 128 bytes
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..) 
```

我不明白如何解决块大小异常的错误.....请如果有人可以帮助我一些想法，这对我的项目有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:26:08.727

分组密码（例如 RSA）只能加密不超过*blockSize*个字节。如果您想使用相同的密钥加密任意大量数据，您可以将其拆分为*blockSize*的部分并单独加密每个块。这同样适用于解密。

# jquery - Firefox（仅在 windows xp 上）不从 json 获取值

> ID：11558014
> 
> 赞同：0
> 
> 时间：2012-07-19T09:40:22.147
> 
> 标签：jquery, ajax, json, firefox, windows-xp

我使用 jquery .ajax() 发送数据，然后通过 json 获取数据！在所有浏览器上都可以正常工作，除了 "windows xp" Firefox。

.ajax() 发送数据没有错误！而且我什至没有从 json 收到任何错误消息！

我假设错误在 .ajax() 中，因为如果 json 没有错误，则数据发送错误。

```
function feedPage(div_id, feed_id, to, page){
    $.ajax({
        url: iloc,
        type: "POST",
        dataType: 'json',
        data: "a=feed_page&div_id="+div_id+"&feed_id="+feed_id+"&page="+page+"&to="+to,
        dataType: "text",
        success: function(d){
            var obj = eval('('+d+')');
            $("#page_now").html(obj.page);

            if(div_id == 1) {
                div_id = 0;
            }

            hideButton(obj.hide_button, div_id, feed_id, obj.page);
            delete obj["page"];
            delete obj["hide_button"];

            if(obj.rss_title) {
                $("#feed_title").html("<h1>"+obj.rss_title[0]+"</h1>");
                delete obj["rss_title"][0];
                $("#last_page").html(obj.last_page);
            }

            if(obj.all_feeds) {
                $("#jaunumi").append("ir");
                delete obj["all_feeds"];
            }

            $("#feed_id ul").scrollTop(0);
            $("#feed_id").empty();

            for (var i in obj){
                $("#feed_id").append(obj[i].title);
                $("#feed_id").append(obj[i].description);
            }

            if(div_id == 0) {
                var feed_div_offset = $("#feed_id").offset();
                var feed_div_offset_top = feed_div_offset.top - 100;
                $('html, body').animate({ scrollTop: feed_div_offset_top }, 'slow');
            }

            $(".tablo_slash").html("/");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:58:40.003

我解决了这个问题！

我的“iloc”变量被浏览器拒绝，因为它包含“http://www......”所以它认为该文件位于不同的域中，甚至没有尝试寻找它！

# file - 在我的 xcode 项目中检测非公共 API 时 otool -L 的目标文件是什么

> ID：11558016
> 
> 赞同：0
> 
> 时间：2012-07-19T09:40:24.903
> 
> 标签：file, otool

我正在寻找如何使用 otool 在我的 xcode 项目中检测非公共 API。我知道应该在终端中使用 otool 。但是当我使用 otool -L 时，它显示“无法映射文件：appname.app（无效参数）”。

我认为 otool 的目标文件是错误的，对吧？使用 xxx.app 文件。

请帮我。谢谢你的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:01:35.697

otool 用于目标文件 (xxx.0)、库文件 (xxx.a) 等。但不适用于链接的可执行文件。

您可以在**xxx.app**文件上找到利用[AppScanner](https://github.com/ChimpStudios/App-Scanner)的非公共 API

# javascript - 如何最小化/最大化 jQuery 对话框？

> ID：11558018
> 
> 赞同：8
> 
> 时间：2012-07-19T09:40:34.093
> 
> 标签：javascript, jquery, jquery-ui, video-streaming, jquery-dialog

我正在使用[jQuery UI 对话框](http://jqueryui.com/docs/dialog/) 来显示视频。视频工作正常。

我想要做的是最小化对话框元素，就像在操作系统或类似的东西中一样。像 (" - ") 这样的小图标可以最小化我的对话框，当我按下 (*) 时，它会关闭对话框但保持视频在后台运行。

这是我的代码

```
//Watch Video

$(".watchVideo").live('click',function(){
    if($('div.ui-dialog').length){
        $('div.ui-dialog').remove();
    }

    var path  = $(this).attr('rel');
    var title = $(this).attr('title');

    var $dialog = $('<div>', {
        title: translator['Watch Video']
    }).dialog({
        autoOpen: false,
        modal: true,
        width: 600,
        height: 500
    });

    var tab = '<table  style="margin: 10px 10%;"><tr><td><object id="MediaPlayer1" width="500" height="400" classid="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701" standby="Loading Microsoft® Windows® Media Player components..." type="application/x-oleobject" align="middle"><param name="'+title+'" value="'+path+'"> <param name="ShowStatusBar" value="True">  <param name="DefaultFrame" value="mainFrame"> <param name="autostart" value="false">  <embed type="application/x-mplayer2"  pluginspage = "http://www.microsoft.com/Windows/MediaPlayer/"  src="'+path+'"   autostart="false"  align="middle" width="500"    height="300"   defaultframe="rightFrame"  showstatusbar="true"> </embed></object></td></tr></table>';

    $('<div id="updateContent">').html(tab).appendTo($dialog);
    $dialog.dialog('open');
    return false;

}); 
```

其中 var tab 等于

```
<object id="MediaPlayer1" width="500" height="400"
classid="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95"
codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"
standby="Loading Microsoft® Windows® Media Player components..."
type="application/x-oleobject" align="middle">
    <param name="FileName" value="YourFilesName.mpeg">
    <param name="ShowStatusBar" value="True">
    <param name="DefaultFrame" value="mainFrame">
    <param name="autostart" value="false">
    <embed type="application/x-mplayer2"
     pluginspage = "http://www.microsoft.com/Windows/MediaPlayer/"
     src="YourFilesName.mpeg"
     autostart="false"
     align="middle"
     width="500"
    height="300"
    defaultframe="rightFrame"
    showstatusbar="true">
 </embed> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-25T10:50:52.023

jQuery UI 对话框有一个扩展，名为“DialogExtend”，允许您添加最大化、最小化和恢复按钮：

*   代码：[https ://github.com/ROMB/jquery-dialogextend](https://github.com/ROMB/jquery-dialogextend)
*   演示：http: [//jsbin.com/ehagoy/154](http://jsbin.com/ehagoy/154)

完美运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T13:02:39.213

您可以尝试几种方法。

1.  引入一个新的最小化按钮并将其附加到`ui-dialog-titlebar`单击时将对话框更改为 a`position: fixed`并将其定位，以便在屏幕底部仅显示标题栏。

2.  相当相似的方法 - 将原始对话框 div 的高度更改为 0。允许对话框可拖动，以便用户可以移动它。但您可能需要将对话框偏移到视口的底部。这种方法`ui-dialog-titlebar`保持原样 - 您还可以动态更改对话框的宽度，以产生最小化效果。

3.  使用`.animate`或其他过渡（或缓动，例如easeInExpo - [http://ralphwhitbeck.com/demos/jqueryui/effects/easing/](http://ralphwhitbeck.com/demos/jqueryui/effects/easing/)）

但使用上述某些方法的最简单方法是：

您需要更改的效果是：

*   窗口的宽度
*   窗户的高度
*   最高位置
*   左侧位置

像这样：

```
 $('#window').dialog({
    draggable: false,
    height: 200,
    buttons: [
    {
        text: "minimize",
        click: function() {
            $(this).parents('.ui-dialog').animate({
                height: '40px',
                top: $(window).height() - 40
            }, 200);            
        }
    }]

});

$('#open').click(function() {
   $('#window').parents('.ui-dialog').animate({
       //set the positioning to center the dialog - 200 is equal to height of dialog
       top: ($(window).height()-200)/2,
       //set the height again
       height: 200
            }, 200); 
}); 
```

这是做什么的，它将对话框的高度设置为`0`，并将其定位在视口的底部。最大化时，它会重新计算中心位置，给对话框一个高度，并将其动画化回到视图中。

见例子：http: [//jsfiddle.net/jasonday/ZSk6L/](http://jsfiddle.net/jasonday/ZSk6L/)

**更新了最小化/最大化的小提琴。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:22:58.710

您可以使用 jQuery DialogExtend 插件。它提供对话框最大化、最小化和折叠功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-21T18:33:08.363

我使用扩展 jquery ui 对话框的小部件工厂制作了一个小插件。

我使用 jquery 小部件工厂来添加新的功能

```
$.widget('fq-ui.extendeddialog', $.ui.dialog, {
...
})(jQuery); 
```

在 Jquery UI 对话框代码中，有一个 _createTitlebar 方法。我覆盖它并添加一个最大化和最小化按钮

```
_createTitlebar: function () {
    this._super();
    // Add the new buttons
    ...        
    }, 
```

*   [jquery 扩展对话框](https://github.com/CrazyTuna/jquery-extendeddialog)
*   [示例页面](http://crazytuna.github.io/jquery-extendeddialog/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T10:29:20.203

jQuery DialogExtend 插件解决了这个问题，尽管在使用 iframe 时它会不断刷新 iframe 的内容。

# wpf - 数据绑定：不同的触发器用于不同的目的

> ID：11558022
> 
> 赞同：1
> 
> 时间：2012-07-19T09:40:39.973
> 
> 标签：wpf, data-binding, mvvm

我有一个带有数据验证的 WPF MVVM 数据表单窗口。很多控件都是文本框。目前，数据绑定触发器设置为默认值，即失去焦点。这意味着仅在可能完全填写字段时才对其进行验证。所以当删除一个数字并输入另一个数字时，暂时的空值不会显示为输入错误。

但一个缺点是，保存按钮只能在焦点移出文本框时启用。（无论在哪里，都超出了编辑控件。假设还有其他可聚焦的内容。）如果这是唯一的更改，则用户等待“保存”按钮可用，但什么也没有发生。对于保存按钮，我想使用立即绑定触发器。怎么可能呢？

编辑：忘了提及我的保存按钮（使用 ICommand）仅在确定输入已修改且有效时才启用。因此，数据将保持不变，直到数据绑定对其进行更新，并且在焦点移动到另一个控件之前不会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:30:20.497

实际上我不久前有[一个类似的问题](https://stackoverflow.com/q/6711243/302677)，我最终使用的解决方案是一个自定义`DependencyProperty`，它在按下一个键时启动一个计时器，并且只有`PropertyChange`在特定时间过去时才实际处理通知。

这意味着除非用户暂停输入一段时间，否则绑定的属性不会得到更新（和验证）。

代码可以在[这里](https://stackoverflow.com/a/6711992/302677)找到（可能需要一些清理），它的使用方式如下：

```
<TextBox
    local:DelayedUpdateBehavior.TargetProperty="{x:Static TextBox.TextProperty}"
    local:DelayedUpdateBehavior.Milliseconds="1000"
    Text="{Binding MyTextProperty, UpdateSourceTrigger=Explicit}" /> 
```

**编辑：**实际上[这个链接](http://www.paulstovell.com/wpf-delaybinding)可能会更好。它是一个标记扩展，因此您可以直接从绑定中使用它。我不记得我过去使用过这两种方法中的哪一种，但我知道这是其中一种：）

```
<TextBox Text="{local:DelayBinding Path=MyTextProperty, Delay='00:00:01'}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:29:27.670

假设您为按钮单击事件使用 ICommand 类型的接口：

您可以...使用 INotifyPropertyChanged 实现字符串属性并将它们绑定到您的文本框控件。现在在您的 Command canexecute 方法中，您可以检查该属性是否为 !nullorempty。

e/ 语法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T09:48:39.113

将 Binding 的`UpdateSourceTrigger`属性设置为`PropertyChanged`. 文本框的默认值为`LostFocus`.

更新：所以你想让数据绑定在你的 TextBox 上工作并且只允许数字？看看这个问题：[创建只接受数字的 WPF 文本框](https://stackoverflow.com/questions/1226128/create-wpf-textbox-that-accepts-only-numbers)

或者使用转换器并将 Save 按钮的 IsEnabled 属性绑定到您的 TextBox（如果有多个，则可能使用 MultiBinding），并使用转换器确定文本是否为有效数字并返回 true 或 false。

# javascript - 浏览器是否跨标签传播 javascript 变量？

> ID：11558025
> 
> 赞同：1
> 
> 时间：2012-07-19T09:40:51.200
> 
> 标签：javascript, variables, browser, cross-browser

我有一些 JavaScript 会查看是否设置了 var，如果设置了，则如果没有设置，则执行某些操作。

```
if (reset === 'reset') {
    gallery.unformat(container);
} 
```

`reset`仅在页面加载后设置。所以这个脚本只会在用户重新加载页面后执行。

如果我在 Firefox 中打开一个新标签，`reset`则未设置。如果我在 chrome 中打开一个新标签，`reset`则设置。

因此，对于我的情况，chrome 可以正确处理它，并且只有在第一次访问该站点时才会设置此 var，因此一切正常。

我想知道变量是否跨选项卡传播，如果是，哪些浏览器会做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:44:26.417

变量不应***在***新选项卡中持续存在。我无法重现您在 Chrome 中看到的行为。

你应该看看 using [`cookies`](https://developer.mozilla.org/en/DOM/document.cookie)，或者如果你想成为 HTML5，看看[`localStorage`](https://www.google.co.uk/search?hl=en&q=localStorage&meta=&safe=active).

这两者都是特定于域的，而不是每个选项卡。

例如`localStorage`，你可以去；

```
// Check that localStorage is supported in the current browser, and then try
// to retrieve the item.
if ('localStorage' in window && localStorage.getItem('reset') === 'reset') {
    gallery.unformat(container);
} 
```

然后您可以`reset`稍后通过设置；

```
localStorage.setItem('reset', 'reset'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:45:42.560

不，变量值不应该在选项卡之间传播——每个选项卡都应该有自己的全局命名空间，如果一个选项卡可能影响另一个选项卡中的 JavaScript，就会出现各种安全问题。

# wcf - 如何从 .NET 1.1 调用 WCF REST 4.0

> ID：11558029
> 
> 赞同：0
> 
> 时间：2012-07-19T09:41:03.083
> 
> 标签：wcf

如何从 .NET 1.1 调用 WCF REST 4.0。我遇到了麻烦！任何帮助我的人都会感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:50:24.857

它很简单。WCF Restful 服务不需要任何 mex 文件来构建您的代理客户端。调用 RESTful 服务与浏览任何 URL 相同。您可以使用 HTTPWebRequest 类对资源进行 http 请求。

[请参阅MSDN](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse%28v=vs.71%29.aspx)或[此处](http://dotnetfriendly.blogspot.co.uk/2010/09/how-to-consume-net-wcf-rest.html)的此示例

# java - 如何阻止 HTMLWriter 编写错误的 HTML？（使用 HTMLEditorKit）

> ID：11558033
> 
> 赞同：1
> 
> 时间：2012-07-19T09:41:08.013
> 
> 标签：java, htmleditorkit, htmlwriter

这是令人惊讶的行为。我创建了一个 JTextPane ，将其设置为使用 HTMLEditorKit，并用有效的 HTML 填充它。但默认情况下，Java 的 HTMLWriter 会创建***无效***的HTML。大多数项目都正确序列化，但 img 标签丢失了结束斜线，因此：

```
<img src="https://localhost:9443/ccm/service/com.ibm.team.workitem.common.internal.model.IImageContentService/processattachment/_7rfpIMXdEeGLRroh_7O2yQ/workflow/resolve.gif" alt="Resolved" border="0"/> 
```

写成：

```
<img src="https://localhost:9443/ccm/service/com.ibm.team.workitem.common.internal.model.IImageContentService/processattachment/_7rfpIMXdEeGLRroh_7O2yQ/workflow/resolve.gif" alt="Resolved" border="0"> 
```

我对所有东西都使用默认值。为什么它不起作用，有什么简单的解决方法吗？

这是一个代码片段：

```
 JTextPane editor = new JTextPane();
    HTMLEditorKit htmlKit = new HTMLEditorKit();
    editor.setContentType("text/html");
    editor.setEditorKit(htmlKit);   
    editor.setText( '*<ADD SOME VALID HTML FROM A FILE>*'  );       
    HTMLDocument d = (HTMLDocument)editor.getDocument();
    StringWriter fw = new StringWriter();
    HTMLWriter aHTMLWriter = new HTMLWriter(fw,d);
    aHTMLWriter.write();
    String txt = fw.toString();
    //  Now  txt is not valid HTML ... eek! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:50:17.223

遗憾的是 HTMLEditorKit 只支持 HTML 3.2，因此 img 标签不应该被关闭。所以它的行为“正确”。

[1999 年发布了增强请求](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4296022)，因此可能很快就会实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:58:01.613

实际上，它是有效的 HTML，但不是有效的 XHTML。据我所知，不可能让它输出 XHTML。您可以使用正则表达式对输出进行后处理，或者像 Freeplane 在编写[XHTMLWriter](http://freeplane.sourcearchive.com/documentation/1.1.3-1/XHTMLWriter_8java_source.html)时所做的那样扩展 HTMLWriter 。

# c++ - 在 WTL 中灰显向导的关闭按钮

> ID：11558039
> 
> 赞同：0
> 
> 时间：2012-07-19T09:41:28.687
> 
> 标签：c++, wtl

我正在编写一个 WTL Aero 向导，我想将窗口的关闭按钮变灰（它的第一步不需要用户交互并且不能被取消，因此禁用该按钮是非常合适的）。

放置以下代码：

```
CMenuHandle pMenu = GetSystemMenu(FALSE);
pMenu.EnableMenuItem(SC_CLOSE, FALSE); 
```

in`OnInitDialog`不起作用，因为该过程在窗口本身显示在屏幕上之前被调用（`ATLASSERT(::IsMenu(m_hMenu));`断言 in`EnableMenuItem`在运行时被触发）。

有没有一种优雅的方法来禁用关闭按钮？（我是 WTL 初学者，我希望解决方案尽可能干净）。

这是向导页面代码的最小版本：

```
#include "stdafx.h"

class MainPage : public CAeroWizardPageImpl<MainPage> {
public:
    BEGIN_MSG_MAP(MainPage)
        MESSAGE_HANDLER_EX(WM_INITDIALOG, OnInitDialog)
        CHAIN_MSG_MAP(__super)
    END_MSG_MAP()

    enum {
        IDD = IDR_MAINFRAME
    };

    MainPage() : CAeroWizardPageImpl<MainPage>(IDR_MAINFRAME) {
        /* Set the wizard's title */
        m_headerTitle.LoadString(IDS_INSTALLHEADER);
        SetHeaderTitle(m_headerTitle);
    }
private:
    CString m_headerTitle;
    LRESULT OnInitDialog(UINT message, WPARAM wParam, LPARAM lParam) {
        UNREFERENCED_PARAMETER(message);
        UNREFERENCED_PARAMETER(wParam);
        UNREFERENCED_PARAMETER(lParam);

        /* Disable the wizard buttons and center the window */
        ShowWizardButtons(0, 0);
        EnableWizardButtons(PSWIZB_BACK, 0);
        CenterWindow();
        return TRUE;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:27:31.550

关闭 [X] 按钮是[通用控件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775493%28v=vs.85%29.aspx)向导属性表类的一部分。你不应该改变它的表现和行为。您可以做的是处理`PSN_QUERYCANCEL`通知并防止向导关闭。使用 WTL 很容易，但是您需要知道有两个版本的通知处理程序可用。

如果`_WTL_NEW_PAGE_NOTIFY_HANDLERS`定义了，通常在 stdafx.h 中，那么你可以这样做：

```
class MainPage :
    public CAeroWizardPageImpl<MainPage>
{
// ...
    INT OnQueryCancel()
    {
        return 1; // Zero to Allow Wizard Close
    }
}; 
```

否则，使用较旧的语法：

```
class MainPage :
    public CAeroWizardPageImpl<MainPage>
{
// ...
    BOOL OnQueryCancel()
    {
        return FALSE; // Allow Wizard Close?
    }
}; 
```

除了防止取消/关闭之外，您还可以通过显示一个消息框来表明这一点，建议使用等待挂起的操作完成，或者以其他方式显示通知（例如，闪烁静态控件等）

# apache-flex - 如何在flex3中调整viewstack的大小

> ID：11558040
> 
> 赞同：1
> 
> 时间：2012-07-19T09:41:32.350
> 
> 标签：apache-flex, flex3

如何根据flex3中组件的大小扩展viewstack

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:43:31.583

设置`resizeToContentproperty`为**真**

# javascript - 无法删除并显示确认框

> ID：11558044
> 
> 赞同：0
> 
> 时间：2012-07-19T09:41:50.727
> 
> 标签：javascript, ruby-on-rails, ruby, confirm

我无法在 Rails 3.1 中删除或显示确认框。

我的`application.hmtl.erb`布局中有以下几行：

```
<%= stylesheet_link_tag  "application" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %> 
```

我也尝试将“应用程序”更改为`:defaults`“原型”或“jquery”，但它没有改变任何东西。

需要帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:13:51.490

确认框和路由到 REST 操作由不显眼的 javascript 文件完成。你有这个问题，因为你没有包含它。

`application.js`如果您有以下几行（在任何实际的 javascript 代码之前），请检查您的内部：

```
//= require jquery
//= require jquery_ujs 
```

此示例假定`jquery-rails`您的`Gemfile`. 如果你有`prototype-rails`，你应该切换到：

```
//= require prototype
//= require prototype_ujs 
```

# c++ - C++ 中具有不同类的子/父结构

> ID：11558045
> 
> 赞同：0
> 
> 时间：2012-07-19T09:41:51.663
> 
> 标签：c++

我决定使用我自己的简单引擎来制作我的下一个游戏。我已经为对象渲染、物理等编写了一些代码，现在我正在考虑如何轻松地将它们连接在一起。

我想用一个主对象创建层次结构，我们称之为场景，它的父对象为 Sprites 或 InteractiveObjects，每个 Sprite 或 InteractiveObject 都可以有自己的子对象，而子对象也可以有自己的子对象。我想你已经明白了我的意思： )

让我们假设，每个对象类型都将继承自某个基础对象，例如，我们称它为 Node。我还不确定，如果 Node 将是“真实”的对象，它将具有它的大小、位置等，或者只是游戏中每个对象的抽象包装器（实际上我倾向于选择第二个）。

最后。我的目标是，拥有实际场景的对象，调用像 Scene->Move(x,y) 这样的东西，它会移动场景的每个孩子（或 Sprite、InteractiveObject 等）。或 Scene->Render() 它将渲染每个（可渲染的）孩子。如果我创建 Sprite，我想添加像 Sprite->addChild() 这样的子元素，并且子元素可以是另一个 Sprite、InteractiveObject 或只是简单的节点。

现在我的问题。用 C++ 实现它的最佳方法是什么？还是我完全错了，这种结构很愚蠢？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:58:47.927

我应该认为结构是否合理在一定程度上取决于您真正想要实现的目标——系统听起来非常灵活，但通常在灵活性和性能之间进行权衡。根据游戏的类型，性能可能很难达到。

此外，如果所有事物都来自某个 BaseNode，那么它们都需要（尽管可能是空的）各种事物的方法，无论它们是否真的可以被渲染、移动等。或者你最终会得到很多 dynamic_casts，这不是也很好。因此，游戏实体和图形实体之间的灵活性和区分度可能会稍低一些，后者是前者的一部分（您可能希望允许游戏实体由多个图形实体或子实体组成，尽管）。

如果您确实使用当前的架构，我应该认为每个 BaseObject 都有类似向量的东西，当您在主对象上调用 render() 时，它会遍历所有子对象并在它们上调用 render。他们做同样的事情并做任何适合他们的渲染代码。

但是，另一个问题是，一个对象是否可以附加到其他几个对象上（例如，如果渲染和物理之间存在差异）。如果是这样，知道何时删除对象可能会变得很棘手，除非您不使用普通的 BaseObject*，而是使用某种形式的 auto_ptr 或 shared_ptr。

我希望这个答案对您有所帮助，尽管我意识到这不是一个简单的“这就是他们的方式！” 一。

# mysql - MySql Select Case 从表中选择数据

> ID：11558047
> 
> 赞同：-2
> 
> 时间：2012-07-19T09:41:54.927
> 
> 标签：mysql, sql

我想根据参数从数据库中的一张表中选择数据。这就是我所做的。

```
DELIMITER $$

CREATE PROCEDURE `myDB`.`Temp`(
    IN ID INT(11)
)
    BEGIN
        SELECT CASE
            WHEN ID IN(1,2) THEN
                SELECT * FROM table1;
            WHEN ID IN(3,4) THEN
                SELECT * FROM table2;
        END CASE;
    END$$

DELIMITER ; 
```

但。我收到错误：

```
Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax 
to use near 'SELECT * FROM table1;
        WHEN ID IN(3,4) THEN
            SELECT * FROM table2;
    END' at line 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:44:51.023

当您可以使用 if else 子句时，您不能在 case 内使用子查询。

```
IF(ID IN(1,2)) THEN
        SELECT * FROM table1;
ELSEIF(ID IN(3,4)) THEN
        SELECT * FROM table2;
END IF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:47:16.790

```
select * from table1 where id in (1,2)
union all
select * from table2 where id in (3,4) 
```

尽管两个表的列数必须相同才能使其工作（并且在任何情况下，为 SELECT 中的列命名以避免混淆、bahaviour-creep 等都不是坏习惯）。

# php - mysqli->prepare('更新')

> ID：11558052
> 
> 赞同：0
> 
> 时间：2012-07-19T09:42:13.720
> 
> 标签：php

这段代码可以吗？因为我没有更新我的数据库并且我没有收到任何错误。谢谢你。

```
//connect to db

$email = $mysqli->real_escape_string($_POST['email']);
$bo = $mysqli->real_escape_string($_POST['bo']);
$p1 = $mysqli->real_escape_string($_POST['p1']);
$p2 = $mysqli->real_escape_string($_POST['p2']);
$dt = $mysqli->real_escape_string($_POST['dt']);

$dt = new DateTime("2012-07-01 13:13:13", new DateTimeZone('Europe/Paris'));

//more validation code...

$stmt = $mysqli->prepare('UPDATE table SET Password=?, R_P=?, R_T=? WHERE E_mail=?')
$stmt->bind_param("ssss", $p2, $p2, $dt, $email); 
$stmt->execute();
$stmt->close();

$mysqli->close();

//send email 
```

**我没有错误，因为我忘记在我的页面上添加我总是在所有页面上添加的东西：**

```
// check for errors
require_once('check_all_errors.php'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:54:33.227

您对数据进行两次编码，一次是手动的，一次是通过将它们提供给准备好的语句。只需对其进行一次编码，例如：

```
$stmt = $mysqli->prepare('UPDATE table SET Password=?');
$stmt->bind_param('s', $_POST['password']); 
```

顺便说一句，除非您真的想编写特定于 MySQL 的代码，否则没有理由再使用 mysqli。[PDO](http://php.net/manual/en/book.pdo.php)模块支持开箱即用的多个数据库，具有类似的界面。

# java - Android Buttons 添加功能

> ID：11558053
> 
> 赞同：1
> 
> 时间：2012-07-19T09:42:15.153
> 
> 标签：java, android, xml

我在 XML 中创建了一些按钮，并且我有将 onClick 打开 URL 的方法。如何将此方法链接到我的按钮，以便在点击/onClick 时调用该方法。

下面是方法代码：

```
 public void openResource() {
     Uri uri = Uri.parse("http://librarywales.org");
     Intent intent = new Intent(Intent.ACTION_VIEW, uri);
     startActivity(intent);
} 
```

我在 onCreate 方法中创建了我的 XML Button 的一个实例：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button libButton = (Button) findViewById(R.id.button1);
} 
```

如何将该方法添加到 libButton 实例？

我现在已经在 'vins' 的帮助下解决了上述问题，但是当我在 AVD 上运行此应用程序并单击一个按钮时，它会弹出一个 android 消息框。“不幸的是，ApplicationName 已停止工作。”

有谁知道这是为什么？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:43:58.177

在你的按钮声明之后添加这个

```
 libButton.setOnClickListener(new OnClickListener() 
    {           
        @Override
        public void onClick(View v) 
        {
            //open resource method call here...
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:46:58.580

放

```
android:onClick="openResource" 
```

在您的 xml 文件的按钮属性中。

就像是，

```
<Button
      android:id="@+id/button1"
      .
      .
      android:onClick="openResource"
      /> 
```

请注意，此功能仅适用于 Android 2.1（API 级别 7）及更高版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:02:14.890

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

Button libButton = (Button) findViewById(R.id.button1);

libButton.setOnClickListener(new OnClickListener() 
{           
    @Override
    public void onClick(View v) 
    {
        if(v.getId()==R.id.button1){
           Uri uri = Uri.parse("http://librarywales.org");
           Intent intent = new Intent(Intent.ACTION_VIEW, uri);
           startActivity(intent);
        }
    }
}); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:23:41.517

```
public class YourActivity extends Activity  implements OnClickListener {
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   Button libButton =(Button) findViewById(R.id.button1);
    libButton.setOnClickListener(this);

    Button OtherButton =(Button) findViewById(R.id.button2);
    OtherButton.setOnClickListener(this);

   }

 @Override
  public void onClick(View v) {

    switch (v.getId()) {
    case R.id.button1: openResource();
                           break;
    case R.id.button2: //do something for second button...

     default : break;
         } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:01:14.993

如果页面中有很多按钮，可以使用 button.setOnClickListener(this);

并覆盖方法中的 OnClick() 方法使用 Switch 语句来匹配已选择的视图。这是一种优化且高效的方式....

# android - AsyncHttpRequest 的 Android 加载屏幕

> ID：11558055
> 
> 赞同：0
> 
> 时间：2012-07-19T09:42:22.290
> 
> 标签：android, eclipse, loader

我的应用程序中有一个列表，该列表是通过对我们的数据库 API 的 http 请求填充的。然后它解析返回的 JSONArray，并适当地设置列表。顺便说一句，我对 Java 编码和 eclipse 环境还是很陌生。

我已经使用 loopj 开发的自定义库实现了 http 请求（位于[此处](http://loopj.com/android-async-http/)）

但是，当我进入我的应用程序中的列表时，它会冻结一两秒钟（在它收集数据时），然后填充这个列表，一切正常。是否可以使用我正在使用的当前 AsyncHttpClient 实现一个加载器，该加载器将在列表完成加载之前一直显示？还是我需要换一个。由于合同协议，我无法提供任何代码。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:49:03.900

我在我的 Async 类中做这样的事情

```
public class Async extends AsyncTask {
    private ProgressDialog dialog;
    public Context applicationContext;

    @Override
    protected void onPreExecute() {
            //this should appear like a loading bar
        this.dialog = ProgressDialog.show(applicationContext, "Calling",
                "Update List ...", true);
    }

    @Override
    protected Object doInBackground(Object... params) {
            //call your method and threat response
        return SyncActivity.getUpdatedList();

    }

    @Override
    protected void onPostExecute(Object result) {
        this.dialog.cancel();
    }

} 
```

# security - 如何保护非安全域对安全域的 iframe 访问？

> ID：11558056
> 
> 赞同：0
> 
> 时间：2012-07-19T09:42:22.883
> 
> 标签：security, iframe, cross-domain

我有两个域。一个是安全的，另一个不是。目前，当用户提交表单数据时，我将用户重定向到此安全网站以收集更多详细信息。此重定向通过跨域 cookie 确保安全。

现在，我计划在 iframe 中加载安全页面，而不是重定向到安全页面。但我不知道要采取哪些安全措施来保护通过 iframe 进行的通信。如何确保这种通信是安全的？设置跨域cookie会解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:31:26.420

我从非安全站点向安全站点发送了一个像素请求，该站点又丢弃了一个带有其域的 cookie，并将该像素作为成功响应的平均值发回。现在，当真正的请求来自非安全站点时，我检查 cookie 和它的域，从而创建一个安全的环境，并使安全站点中的页面成为一次性访问页面。

# javascript - 输出一次 getJSON 结果，它们每 x 秒更新一次，结果不会一遍又一遍地重复

> ID：11558060
> 
> 赞同：2
> 
> 时间：2012-07-19T09:42:34.613
> 
> 标签：javascript, jquery, ajax, json, getjson

我以前在 stackoverflow 上解决了一个问题，但是我的项目的要求已经改变，所以我需要一个新的解决方案。总结一下，我有一个 getJSON 函数，它每 5 秒执行一次以读取 JSON 文件中的更改。我遇到的问题是正确输出数据。我希望数据输出一次，但每 5 秒更新一次，以防用户对 JSON 文件进行更改

这是我的代码

```
 <script type="text/javascript">
$.ajaxSetup({
    cache: false
});
setInterval(function() {
    $.getJSON('names.json', function(data) {
        for (var i in data) {
            $('#one').append(data[i]);
        }
    });
}, 5000);

</script> 
```

这个 getJSON 函数允许我抓取 JSON 数据并将其附加到 div 的开头。然后我刷新函数，这样如果 JSON 数据发生变化，那么 div 中的数据也会发生变化。问题是数据每 5 秒重复一次。

15 秒后的意外结果

```
453545Beady little eyesLittle birds pitch by my doorstep
453545Beady little eyesLittle birds pitch by my doorstep
453545Beady little eyesLittle birds pitch by my doorstep 
```

15秒后我想要的结果

```
453545Beady little eyesLittle birds pitch by my doorstep 
```

如果我在脚本运行时更改 JSON 11 秒

```
"two": "Eyes" 
```

我想在 15 秒后得到的结果

```
453545 Eyes Little birds pitch by my doorstep 
```

而不是我在 15 秒后得到的实际结果

```
453545Beady little eyesLittle birds pitch by my doorstep
453545Beady little eyesLittle birds pitch by my doorstep
453545 Eyes Little birds pitch by my doorstep 
```

这是我正在使用的 JSON 文件

```
{
  "one": "453545",
  "two": "Beady little eyes",
  "three": "Little birds pitch by my doorstep"
} 
```

希望我已经尽可能清楚地说明了这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:50:10.297

很难解读您的问题，因为可能有两种不同的结果，您实际上正在尝试实现其中之一：

*   仅显示最新的 JSON 结果（无更改历史记录）
*   每次更改仅显示一个 JSON 结果（更改历史记录）

第一个很简单，如下：

## *无历史记录*：在显示结果之前清除结果

在附加新收到的结果之前，您必须清除以前的结果。

```
<script type="text/javascript">

    $.ajaxSetup ({  
        cache: false  
    });  

    setInterval(function(){
        $.getJSON('names.json', function(data) {
            $('#one').empty();
            for(var i in data) {
                $('#one').append(data[i]);
            }
        });
    }, 5000);

</script> 
```

## *更改历史记录*：检测更改

保留变更历史有几种不同的方法：

1.  [rogal111](https://stackoverflow.com/a/11558182/75642)以某种方式总结了第一个。尽管他的解决方案可能不是最好的，尤其是当您生成的 JSON 的格式发生变化时，因为他的代码仅在 JSON 结果至少定义了这 4 个字段时才有效。如果其中任何一个缺少`undefined`将显示，如果添加了任何其他，则将被省略。

2.  [Trinh Hoang Nhu](https://stackoverflow.com/a/11558311/75642)提供了一个更*动态*的解决方案，它适用于任何 JSON 对象的属性。

3.  **第三种可能的解决方案**是通过附加上次更改的时间戳 ( `names.json/timestamp`) 来调用您的 Ajax URL，如果服务器发现 JSON 之后发生了更改，它将发送对象，否则将发送一些默认对象（即`false`或`null`），这将表明没有做出任何改变...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:49:49.597

只需添加到您的 JSON`version`标记并在每次修改 JSON 时增加它：

```
{ 
  "version": 12323
  "one": "453545",
  "two": "Beady little eyes",
  "three": "Little birds pitch by my doorstep"
} 
```

然后在附加之前的javascript检查`version`标记中：

```
<script type="text/javascript">
    var currentVersion=-1;
     $.ajaxSetup ({  

       cache: false  
    });  

   setInterval(function(){ $.getJSON('names.json', function(data) {

    if(data.version>currentVersion)
    {
      currentVersion=data.version;
      $('#one').append(data.one);
      $('#one').append(data.two);
      $('#one').append(data.three);
    }

   });

},5000);

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:57:26.933

添加一个 oldJson 与新的比较。只有当它们不同时，您才会退出。前任

```
var oldJSON = null;

function compareObject(a,b){//Simple comparision
   for (i in a){
       if (!(i in b) || a[i] != b[i]){
          return false;
       }
   }
   return true;
}

setInterval(function() {
    $.getJSON('names.json', function(data) {
        //do the comparision
        if (!compareObject(oldJSON, data)){
            for (var i in data) {
                $('#one').append(data[i]);
            }
        }
        oldJSON = data;; //Important
    });
}, 5000); 
```

# c# - 在抽象方法中使用不符合 cls 的类型

> ID：11558063
> 
> 赞同：1
> 
> 时间：2012-07-19T09:42:59.710
> 
> 标签：c#, code-analysis, abstract, cls-compliant

我有一个我使用的外部程序集，无论出于何种原因，它都没有指定 CLS 合规性。因此，这会导致我的很多代码被标记为不符合 cls。我遇到的问题如下：

```
public abstract class SomeClass
{
    //Compiler Error CS3011
    [CLSCompliant(false)]
    public abstract object SomeMethod(ExternalNonCompliantType arg);
}

public abstract class SomeClass
{
    //Argument type 'External.ExternalNonCompliantType' is not CLS-compliant
    public abstract object SomeMethod(ExternalNonCompliantType arg);
} 
```

* * *

CS3011：

> 类成员不能既抽象又不符合公共语言规范 (CLS)。CLS 规定所有类成员都应实现。

我真的不知道在这里做什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:07:53.860

*   您正在编写的代码的预期用途是什么？
*   你能把你的整个组装成`[CLSComplaint(false)]`?

如果您的程序集也不兼容，那么您应该可以接受这种代码。您也可以尝试将一个类标记为不合规。我一直只是标记整个程序集。

如果这只是您的代码，并且您没有将其作为库分发，那么这应该不是问题，您无需过多担心 CLS 合规性。

一个例外是，如果您在内部编写一些您希望能够在各种其他 CLR 语言（如 F#、vb.net、ironpython、boo、M、scala 等）中重用的东西。情况可能并非如此; 大多数应用程序就是这样 - 应用程序。

# c - 我需要 fscanf 建议

> ID：11558064
> 
> 赞同：2
> 
> 时间：2012-07-19T09:43:17.897
> 
> 标签：c, scanf

我想将`fprintf()`3 个字符串写入一个文件，全部在同一行。

前两个不能包含空格，而第三个可以。IE`word word rest of line`

有人可以告诉我如何将`fscanf()`其转换为 3 个变量吗？

如果它更容易，我不介意放置一些分隔符。例如`[word] [word] [rest of line]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:52:59.160

您也可以在没有分隔符的情况下执行此操作：

```
char s1[32], s2[32], s3[256];

if(sscanf(line, "%31s %31s %255[^\n]", S1, S2, S3) == 3)
 /* ... */ 
```

只要输入`line`确实以换行符结尾，这应该可以工作。

当然，您应该调整字符串大小以适应。你也可以使用预处理器来避免重复大小，但是这样做会使它变得更加复杂，所以我在这个例子中避免了这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:01:37.553

您可以使用`scanf`扫描两个单词，然后使用`fgets`获取该行的其余部分。

```
FILE *f = stdin; // or use fopen to open a saved file

// use buffers large enough for your needs
char word1[20];
char word2[20];
char restOfLine[100];

// make sure fscanf returns 2 (indicating 2 items scanned successfully)
fscanf(f, "%20s %20s", word1, word2); 

// make sure fgets returns &restOfLine[0]
fgets(restOfLine, sizeof restOfLine, f); 
```

请注意，如果`fgets`遇到一个`'\n'`字符，它也会被放入缓冲区，因此如果您不想要它，则必须手动将其剥离。如果返回`fscanf`2 或 return 以外的值，则说明读取您的输入时出现问题。`fgets``NULL`

# vim - Vim：打开一个我不想写入的缓冲区

> ID：11558065
> 
> 赞同：1
> 
> 时间：2012-07-19T09:43:17.887
> 
> 标签：vim, diff

我刚刚在我的 .vimrc 中创建了一个新映射，以便在新窗口中快速打开我正在使用的存储库的差异。

```
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""                                                
" Quickly see diff
" """"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Open /tmp/tmp.diff in a new split
" delete the entire content
" read in the diff
nnoremap <leader>d :vsp /tmp/tmp.diff<CR>ggdG<bar>:r !hg diff<CR>
" Automatically write the diff when exiting the buffer so we're not asked to
" save it
autocmd! BufUnload /tmp/tmp.diff :w<CR> 
```

如您所见，我在退出缓冲区时使用 BufUnload autocmd 保存文件，因为我不想在每次查看差异时手动写入文件。但我宁愿让 Vim 不警告我。

那么有没有办法在 Vim 中打开一个缓冲区，当它有未保存的内容时它是否关闭？如果我不必打开特定文件而不是匿名缓冲区，我也会喜欢它。

我宁愿不使用自动写入。

（我只是 Vim/Vimscript 的初学者，所以如果我应该为此编写一个函数，请告诉我）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:46:42.077

我在这样的缓冲区中有这个：

```
setlocal buftype=nofile noswapfile bufhidden=delete 
```

例如，我`git diff`在当前文件上运行的热键（差异输出保存在这样的缓冲区中）：

```
function Git_diff(fil)
    abo new
    exe '0read ++ff=unix !git diff -- ' . a:fil
    setlocal noma ro ts=8 tw=0 nowrap syn=diff ft=diff
    setlocal buftype=nofile noswapfile bufhidden=delete
    go
endfunction
map <f3> :call Git_diff(expand("%"))<CR>gg 
```

# c# - JQuery DataTables 服务器端分页

> ID：11558066
> 
> 赞同：7
> 
> 时间：2012-07-19T09:43:19.290
> 
> 标签：c#, jquery, asp.net, pagination, jquery-datatables

在我的网络应用程序中，我使用 JQuery [DataTables](http://datatables.net/)插件来显示从数据库检索到的数据。

我目前正在使用客户端分页，但是我的表中的数据增长了很多，并且在 ASP.NET 页面中的加载现在变得有点慢。所以我打算切换到服务器端分页。

我知道 DataTables 插件支持它，但是四处搜索我没有发现不清楚如何实现它。

我的主要疑问是：如果我在服务器端实现分页，我还必须实现排序，或者我可以将它委托给客户端？

你有过这样的经历吗？

**注意**我正在使用 Linq to SQL 连接到我的数据库

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-10T17:08:09.643

现有答案*可能*适用于旧版本的 dataTable，但当前版本（我使用的是 1.10+）传递了开始记录和长度，因此任何建议`pageNo * pageSize`都会给出不正确的结果。

## 第一个简单的“手动”方法

接受的答案对于我想做的事情也很复杂，经过一些调试，我发现页面大小和开始记录只是作为`Request`名为`start`and的 Http 值传递`length`。文本搜索被传递为`search[value]`排序顺序在一个名为的成员中传递，`order[0][column]`排序方向在`order[0][dir]`等中传递。

我用来排序和过滤的基本代码如下所示：

从 HTTP Request 对象中获取分页、排序和过滤值：

```
int startRec = 0;
int.TryParse(Request["start"], out startRec);
int pageSize = 10;
int.TryParse(Request["length"], out pageSize);
var search = Request["search[value]"];
var order = Request["order[0][column]"];
var direction = Request["order[0][dir]"];

var query = this._dataStore.Records.AsQueryable(); 
```

首先应用（不区分大小写）搜索：

```
if (!string.IsNullOrWhiteSpace(search))
{
    query = query.Where(x => x.Label.ToLower().Contains(search.ToLower()));
} 
```

然后应用任何排序：

```
switch (order)
{
    // My id column
    case "0":
        query = (direction == "desc") ? query.OrderByDescending(x => x.Id) : query.OrderBy(x => x.Id);
        break;
    // My label column
    case "1":
        query = (direction == "desc") ? query.OrderByDescending(x => x.Label) : query.OrderBy(x => x.Label);
        break;
} 
```

最后应用分页：

```
query = query.Skip(startRec).Take(pageSize); 
```

正确的记录现在可以返回了。

**更新（使用“Datatables.net for MVC5”）**

一旦我了解了服务器端数据表的基础知识，就该开始寻找现有的插件/实用程序来简化此代码了。到目前为止，我找到的最适合 MVC 5 的是[Datatables.net for MVC5](http://www.nuget.org/packages/datatables.mvc5/) nuget 包。

1.  安装 NuGet 包

2.  更改控制器 Action 以使用 a`DataTablesBinder`提供 IDataTablesRequest 接口

例如

```
 public JsonResult Table([ModelBinder(typeof(DataTablesBinder))] IDataTablesRequest requestmodel) 
```

3.  首先应用任何搜索过滤器：

例如

```
if (!string.IsNullOrEmpty(requestmodel.Search.Value))
{
    query = query.Where(x => x.CompanyTypeName.Contains(requestmodel.Search.Value) || x.CompanyTypeDescription.Contains(requestmodel.Search.Value));
} 
```

4.  应用任何排序：

例如

```
foreach (var sort in requestmodel.Columns.GetSortedColumns())
{
    switch (sort.Name)
    {
        case "CompanyTypeDescription":
            query = sort.SortDirection == Column.OrderDirection.Ascendant ? query.OrderBy(x => x.CompanyTypeDescription) : query.OrderByDescending(x => x.CompanyTypeDescription);
            break;
        case "CompanyTypeName":
        default:
            query = sort.SortDirection == Column.OrderDirection.Ascendant ? query.OrderBy(x => x.CompanyTypeName) : query.OrderByDescending(x => x.CompanyTypeName);
            break;
    }
} 
```

5.  `Skip`然后像以前一样使用and应用分页`Take`：

例如

```
var result = query.Skip(requestmodel.Start).Take(requestmodel.Length).Select(x => new { x.CompanyTypeName, x.CompanyTypeDescription }); 
```

6.  最后使用对象返回 JSON 结果`DataTablesResponse`：

例如

```
return Json(new DataTablesResponse(requestmodel.Draw, result, query.Count(), base.RefSureContext.CompanyType.Count()), JsonRequestBehavior.AllowGet); 
```

这将所有搜索、排序和分页简化为一个易于重复的模式。

插件的[文档在这里](https://github.com/ALMMa/datatables.mvc)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:14:09.217

由于您使用的是 LINQ to SQL，因此分页非常简单：

```
var c = new MyDataContext("your string");

c.Employees.Skip(pageIndex * pageSize).Take(pageSize); 
```

此代码将有效地在服务器上分页

我没有使用*DataTables* jQuery 插件，但我假设你使用 AJAX 来获取数据（因为你没有使用 MVC），所以只需将当前页面索引和每页的行数作为参数发送 - page大小，就是这样

为了满足要求，您还需要在服务器上订购查询，因此您需要将订购条件发送到服务器并应用订单。

要基于 a 在服务器上订购`string`，请检查以下问题：

[IEnumerable<T> 上的动态 LINQ OrderBy](https://stackoverflow.com/q/41244/1268570)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T11:00:32.873

聚会有点晚了，但这值得分享:)

```
Employees
    .OrderBy(sortColumn + " " + sortOrder)
    .Skip(pageNo * pageSize)
    .Take(pageSize)
    .ToList(); 
```

# internet-explorer-9 - IE9中的字体问题

> ID：11558067
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:43:21.203
> 
> 标签：internet-explorer-9, font-face

我正在使用字体“Rockwell Regular”。每个浏览器都显示它很好，但 IE9 没有显示它。我在这里转换了字体[http://www.font2web.com/](http://www.font2web.com/)。

这是演示链接[http://jsfiddle.net/daLQ3/](http://jsfiddle.net/daLQ3/)

请帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T09:58:58.147

我解决了，这里是演示链接[http://jsfiddle.net/daLQ3/1/](http://jsfiddle.net/daLQ3/1/)

# c# - 使用 ASP.NET 通用处理程序获取用户名

> ID：11558072
> 
> 赞同：1
> 
> 时间：2012-07-19T09:43:32.523
> 
> 标签：c#, asp.net, vb.net, generic-handler

我正在尝试通过 ASP.NET 通用处理程序（.ashx）获取当前登录用户的用户名。但是即使用户当前已登录，用户名也始终是空的。

这是我的通用处理程序类：

```
Imports System.Web.SessionState

    Public Class FileUploadHandler
    Implements System.Web.IHttpHandler
    Implements IRequiresSessionState

    Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

        'username is always null, i'm not sure why there's nothing eventhough the user is logged in     
        Dim username = context.Current.User.Identity.Name

        If String.IsNullOrEmpty(username) Then
            context.Response.StatusCode = 0
        Else
            context.Response.StatusCode = 1

        End If

    End Sub

    ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
        Get
            Return False
        End Get
    End Property

End Class 
```

但我可以从这样的任何页面获取登录用户的用户名：

```
Dim username = Context.Current.User.Identity.Name 
```

你觉得这里有什么问题吗？我对 C# 和 VB.NET 都很好。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:19:40.217

如果您正在使用任何客户端组件，例如[Uploadify](http://www.uploadify.com)、[Plupload](http://www.plupload.com)，则可能是该组件未随请求发送身份验证和会话 cookie。这里有一个很好的[解决方法](http://zootfroot.blogspot.com/2010/12/mvc-file-upload-using-uploadify-with.html)的解释。

使用 ASP.NET查看[Uploadify（会话和身份验证）](https://stackoverflow.com/questions/1729179/uploadify-session-and-authentication-with-asp-net-mvc/1729484#1729484)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:54:16.850

构建的默认 ASP.NET 应用程序使用 cookie 通过写入 cookie 本身的 session-id 对用户进行身份验证，而我认为应该是会话对象来处理这个问题。因此，默认创建的 MVC 应用程序并不安全。您最好将源代码更改为使用会话。对于您的问题，从用户类获取用户名可能不是一个好的选择，因为它将返回一个空字符串。如果您使用会话，一旦您使用会话对象中的标识，这个问题就会得到解决。

# android - 如何将 ActivityGroup 转换为 Fragment

> ID：11558074
> 
> 赞同：2
> 
> 时间：2012-07-19T09:43:33.070
> 
> 标签：android, android-fragments

我使用 TabActivity 开发了一个基于选项卡的应用程序，每个选项卡项都有一个活动组，例如：

```
Tab 1-> Acitivty Grouop (inside this: List Activity->Detail ACtivity)
Tab 2-> Acitivty Grouop (inside this: List Activity->List Activity->Detail ACtivity)
Tab 3-> Acitivty Grouop (inside this:List Activity->Detail ACtivity with two tabs)
Tab 4-> Acitivty Grouop (inside this: List Activity->List Activity->Detail ACtivity) 
```

由于 TabActivity 是不推荐使用的类，我需要使用片段来实现相同的目标。

我已经设法通过以下链接使用片段构建选项卡， [http ://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

有人可以帮助我使用片段构建上面的选项卡项吗？

# delphi - 在虚拟方法中检查 Self=nil，带参数

> ID：11558077
> 
> 赞同：1
> 
> 时间：2012-07-19T09:43:51.893
> 
> 标签：delphi, access-violation, null

我有两个类：一个基类和一个派生类基类定义了一个带有参数的虚拟方法：

```
function ToName(MsgIfNil:string=''); virtual; 
```

派生类重新定义方法：

```
function ToName(MsgIfNil:string=''); reintroduce; 
```

两种方法的实现都类似于这段代码：

```
function TBaseClass.ToName(MsgIfNil:string)
begin
  if (Self=nil) then
    Result := MsgIfNil
  else
    Result := Self.SomeProperty;
end; 
```

问题是：

1）如果我不在派生类中重新引入该方法，而是使用常规覆盖关键字，则对该方法的任何调用都会触发访问冲突

2) 当我从一个为 nil 的对象调用该方法，并且该对象的假定类是 TBaseObject 时，它崩溃 (AV) 而不是调用基本虚拟方法

如果方法中没有定义参数，则调用正确的方法，没有任何 AV。即使派生类中的方法被覆盖，它也能正常工作。

请注意，上述解决方案适用于从 TBaseClass 派生的任何类的对象

**如何定义一个可以用 Self=nil 调用的虚拟方法，可以是虚拟的并且可以使用参数？**

我当然必须增强我对内部虚拟方法调用管道的理解......

注意：在我的用例中，调用 nil 对象是合法的。它不用于隐藏异常，而是用于报告非链接对象。示例：myEdit.Text := APerson.Manager.ToName('未定义经理');

感谢您提供有关适当解决方案的任何建议

使用带有 upd5 的 Delphi 2010

* * *

编辑：添加更完整的触发 AV 的代码示例

```
TBaseClass = class(TObject)
private
  FMyName: string;
public
  property MyName: string read FMyName;
  function ToName(MsgIfNil:string=''):string; virtual;
end;

TDerivedClass = class(TBaseClass)
private
  FSpecialName: string;
public
  property SpecialName:string read FSpecialName;
  function ToName(MsgIfNil:string=''):string; reintroduce;
end;

TBaseClass.ToName(MsgIfNil:string):string;
begin
   if (Self=nil) then
     Result := MsgIfNil
   else
     Result := MyName;
end;

TDerivedClass.ToName(MsgIfNil:string):string;
begin
  if (Self=nil) then
    Result := MsgIfNil
  else
    Result := SpecialName;
end;

// Now a sample program

var
  aPerson: TBaseClass;
  aSpecialist: TDerivedClass;

begin

aPerson := TBaseClass.Create;
aPerson.MyName := 'a person';
aSpecialist := TDerivedClass.Create;
aSpecialist.SpecialName := 'a specialist';

aSpecialist := nil; // For example sake, never do this in my use case :)
// This works here,
// but triggers an AV if ToName is marked as override instead of reintroduce
ShowMessage('Name of the specialist: '+aSpecialist.ToName('No specialist!'));

aPerson := nil;
// This triggers an AV, TBaseClass.ToName is never called
ShowMessage('Name of the person: '+aPerson.ToName('No person!'));

end; 
```

上面的代码可能无法编译，这只是一个更完整的例子

**外卖**

我现在明白 VMT 链接到对象引用，并且无论对象类如何，都无法在 nil 对象上调用虚拟方法（该对象甚至不会查看其声明的类型以获取 ToName 方法的匹配地址)

我接受了 hvd 的解决方案，因为它对于必须检查 vs nil 的方法非常有效（只需添加一种基本方法）。

谢谢大家的回答，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:57:17.280

调用虚方法`nil`没有意义：`virtual`意味着“检查类类型以查看要调用的方法”。没有类类型，所以没有方法可以调用。

您可以做的是创建一个调用虚拟方法的非虚拟方法：

```
// TBase
public:
    function ToName(MsgIfNil: string = ''): string;
protected:
    function ToNameImpl: string; virtual;

// TDerived
protected:
    function ToNameImpl: string; override;

function TBase.ToName(MsgIfNil: string): string;
begin
  if (Self=nil) then
    Result := MsgIfNil
  else
    Result := ToNameImpl;
end;

function TBase.ToNameImpl: string;
begin
  Result := MyName;
end;

function TDerived.ToNameImpl: string;
begin
  Result := MyDerivedName;
end; 
```

这确保了虚拟方法仅在is not`ToNameImpl`时才被调用。`Self``nil`

编辑：顺便说一句，这正是 nonvirtual`TObject.Free`所做的调用 virtual `TObject.Destroy`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:52:12.057

> 如何定义一个可以用 Self=nil 调用的虚拟方法，可以是虚拟的并且可以使用参数？

这不能在 delphi 中完成，因为您需要一个 VMT 来进行虚拟方法调用。并且 Nil 对象没有 VMT。

> 在我的用例中，调用 nil 对象是合法的。

你将不得不重新考虑你的逻辑。例如，您可以创建某种“空”对象。在这种情况下，您的 APerson.Manager 将返回这个特殊对象，它是具有特殊行为的 TBaseClass 的祖先。一些示例代码：

```
TManager = class
//...
function GetSalary: integer; virtual;
procedure SetSalary(ASalary: integer) virtual;
end;

TEmptyManager = class(TManager)
//...
function GetSalary: integer; override;
procedure SetSalary(ASalary: integer) override;
end;
//...
function TManager.GetSalary: integer;
begin
//Some calculations here
end;

procedure TManager.SetSalary(ASalary: integer);
begin
//Some work here
end;

function TEmptyManager.GetSalary: integer;
begin
  Result := 0;
end;

procedure TEmptyManager.SetSalary(ASalary: integer) override;
begin 
  //Some sort of safety belt
  raise EException.Create('You can''t work with empty manager');
end;

var
  EManager: TEmptyManager = Nil;
//Since we won't work with empty manager, one instance will be enough
function EmptyManager: TManager;
begin
  if not Assigned(EManager) then
    EManager := TEmptyManager.Create;

  Result := EManager;
end;
//...
function TPerson.GetManager: TManager;
begin
  if SomeCondition then
    Result := FManager
  else
    Result := EmptyManager;
end; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T10:21:09.603

理论上你可以调用一个 nil 对象的方法。但这种做法是非常不受欢迎和危险的。躲开它。重新思考你的逻辑。看看类方法。

它们将更像是具有很多限制的“静态”方法。您不能访问任何引用属性的属性或方法，包括 Self，也不能继承；因为对象根本不存在。

对象必须在任何方法调用、属性访问之前有效。

如果您的函数返回一个可以为 nil 的对象实例，或者在某些情况下您的对象可以为 nil，您需要在任何方法调用或属性访问之前检查它：

```
O := MyFactory.GetObject;
if Assigned(O) then O.MyMethod; 
```

# asp.net-mvc - 将进度信息从 WCF 发送到浏览器的最佳方式是什么？

> ID：11558080
> 
> 赞同：2
> 
> 时间：2012-07-19T09:44:01.410
> 
> 标签：asp.net-mvc, wcf, html

我有一个使用 Razor、html5 和 WCF 服务的 MVC 应用程序。问题是一项 WCF 服务需要很长时间才能运行，这意味着用户不知道该服务在做什么。我想向 HTML5 客户端发送进度信息，并想就最佳方法提出一些建议。我们将不胜感激地收到所有帮助……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:35:52.870

您甚至可以将 SignalR 用于反向 Ajax 目的。如果你想避开这些繁重的框架，并且可能想要使用 setInterval，你可以查看这篇[文章](http://msdn.microsoft.com/en-us/magazine/hh580729.aspx)。这篇文章由 Dino Espito 撰写，其中讨论了如何使用 setInterval 对服务器进行重复调用以获取进度。[Dino Espito 的另一篇](http://msdn.microsoft.com/en-us/magazine/hh852586.aspx)文章，他使用 SignalR 库制作上下文相关的进度条

有关他关于上下文相关进度条的文章的完整集合，[请参见此处](http://msdn.microsoft.com/en-us/magazine/ee532098.aspx?sdmr=DinoEsposito&sdmi=authors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:25:10.003

你必须去[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)实施。在 Comet 或 Reverse Ajax 的情况下，客户端将向服务器发送长时间的 ajax 调用并等待响应。因此，在您的情况下，首先 HTML5 客户端将向服务器发送请求并等待 WCF 服务返回一些信息后的进度信息，客户端必须再次进行长时间的调用，直到该过程完成。

有一些开源软件可以帮助您简化工作，例如[nComet](http://ncomet.codeplex.com/)或[PokeIn](http://pokein.codeplex.com/releases/view/51900)。

[代码项目](http://www.codeproject.com/Articles/186723/Push-Messages-in-RESTful-WCF-Web-Application-with)中还有一篇文章讨论了这种方法。

# magento - Magento：批量 301 从 product.html 重定向到 category/product.html

> ID：11558081
> 
> 赞同：0
> 
> 时间：2012-07-19T09:44:05.093
> 
> 标签：magento, redirect, product

任何人都知道如何将批量 301 重定向从 product.html 到 category/product.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:01:49.587

我想你有设置>目录>搜索引擎优化（这里是德语版，所以我希望翻译几乎是正确的）。> 对 url 使用类别路径？

Magento 并不打算让一种产品只有一个类别，因此产品和类别之间的映射通常不是唯一的。

独立于这种行为，您可以向 magento 添加重写规则：http: [//www.magentocommerce.com/wiki/3_-_store_setup_and_management/seo/how_to_work_with_magento_url_rewrite_rules](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/seo/how_to_work_with_magento_url_rewrite_rules)

目录 > URL 重写管理为您想要的行为添加重写。只需添加一个 301 转发作为选项，一切都很好。

[http://thinktank.101interactive.net/magento-programmatically-add-entries-to-url-rewrite-mgmnt-console/](http://thinktank.101interactive.net/magento-programmatically-add-entries-to-url-rewrite-mgmnt-console/)

# windows - 在 Windows 上运行最新版本的 G-WAN

> ID：11558088
> 
> 赞同：1
> 
> 时间：2012-07-19T09:44:20.380
> 
> 标签：windows, g-wan

我在 G-WAN 网站上看到一些关于自 2009 年 9 月 9 日起停止使用 Windows 版本的评论。

现在，我想在 Windows 中运行最新版本的 G-WAN Web 服务器，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:46:59.180

好吧，你必须说服微软更新他们正在减慢 G-WAN 的问题。

:) 当瓶颈来自操作系统时（据我了解），目前在 Windows 上投入时间并不是很有利可图。

但是，如果你*真的*想在 Windows 中运行最新版本，你可能不得不走虚拟化路线，即便如此，你仍将依赖 Linux 为其提供动力。

# c# - 区分 WCF ServiceLayer 中的本地服务帐户和模拟客户端身份

> ID：11558090
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:44:28.350
> 
> 标签：c#, .net, security, wcf-security

我们有一个用 MVC 编写的 Web 前端，它使用 SSO 和 Windows 身份验证，并且该前端连接到配置为使用特定 AD 服务帐户运行的后端 WCF 服务层。

我们喜欢这种方法，因为与数据库服务器的连接是受信任的，并且我们在 web.config 中没有密码，并且允许 WCF 服务层连接到 SQL Server，因为服务帐户在 DB Server 上具有适当的权限，单终端用户没有't，他们不应该。

我现在正在寻找的是一种使 WCF 服务能够区分哪个用户身份从客户端连接并在应用程序级别验证安全规则（我们使用 Visual Guard 安全框架）的方法，但同时我们仍然有我们使用EF连接SQL时需要使用当前的服务账号。

到目前为止我所做的是以下，

当我在 Web 前端创建 WCF 客户端时：

```
using (((WindowsIdentity)HttpContext.Current.User.Identity).Impersonate())
{
  var client = new RPPServiceInterface().GetRWSService();
  ...
} 
```

从我在`Impersonate`上面介绍这个调用的那一刻起，在下面的代码中，我可以检索客户端用户而不是服务帐户了：

```
[OperationBehavior(Impersonation = ImpersonationOption.Allowed)]
public List<RWSProgram> GetCedentsPrograms(int cedentID, int uwYear)
{
  var currentSec = ServiceSecurityContext.Current;
  ...
} 
```

我想做的是我们双方都使用客户端身份来验证安全性，然后以某种方式释放该身份或有另一种方式来模拟服务层中的服务帐户以打开我的 SQL 连接......任何想法？我做错了什么或误解了整个画面吗？

PS我已经检查过这个但没有帮助.... [WCF服务双重模拟？](https://stackoverflow.com/questions/9810146/wcf-service-dual-impersonation)

谢谢，戴维德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:31:38.553

这是你想要的？：

```
// ...Service operation code impersonating a client here

using (WindowsImpersonationContext processContext = WindowsIdentity.Impersonate(IntPtr.Zero))
{
    // Database access stuff here
    // Within the using block the client is no longer impersonated:
    // context reverts to the identity running the service host process
    // (I'm assuming this is what you call your service account)
}

// Ensuing code impersonates the client as previously... 
```

# objective-c - UIImagePickerController 在 UIModalPresentationFormSheet 上：ipad

> ID：11558093
> 
> 赞同：0
> 
> 时间：2012-07-19T09:44:31.477
> 
> 标签：objective-c, ipad, uimodalpresentationstyle

我正在使用 UIModalPresentationFormSheet 并打开 UIImagePickerController （或任何 UIViewController），但 UIModalPresentationFormSheet 的大小在关闭 UIImagePickerController 或任何其他控制器时会发生变化

```
modalViewController *changeProfilePicture = [[ModalViewController alloc] init];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:modalViewController];
navigationController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
navigationController.modalPresentationStyle = UIModalPresentationFormSheet;
[mainViewController presentModalViewController:navigationController animated:YES];
navigationController.view.superview.frame = CGRectMake((CGRectGetWidth(mainViewController.view.bounds)-300)/2, (CGRectGetHeight(mainViewController.view.bounds)-300)/2, 300, 300); 
```

在 modalViewController 我打开 UIImagePickerController 以在全屏模式下选择图像。然后 modalViewController 的帧大小几乎变成了两倍。

在 popoverview 中打开 UIImagePickerController 就可以了。

但在这里我的要求是我还必须在全屏模式下打开其他一些视图控制器。

任何想法我们如何保持 modalViewController 帧大小不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:49:21.610

我建议使用 self.frame 获取父视图的帧大小并将其传输到您遇到问题的 UIImagePicker。那应该缩小尺寸。

# math - 估计一个集合的平均值。（偏差估计）

> ID：11558097
> 
> 赞同：0
> 
> 时间：2012-07-19T09:44:41.877
> 
> 标签：math, statistics

我知道偏差估计器是实际值和期望值之间的差异。
当该差异等于 0 时，它是无偏的，否则是有偏的。

现在我的问题是，假设我有一组值 (x1,x2,........,xn)，我想估计它的平均值。
我将平均值分配给第一个值 (x1)。

讲师说它是公正的......
我的问题是 - 为什么？

这组值的平均值可能不等于 x1 的值，所以我会说它应该是有偏差的。为什么它是无偏见的？

如果它是无偏见的，（这应该是好的）为什么它是坏的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:04:24.883

> 现在我的问题是，假设我有一组值 (x1,x2,........,xn)，我想估计它的平均值。我将平均值分配给第一个值 (x1)。

样本均值是样本均值 - 您不能将其分配为 x1

您的样本 (x1,...,xn) 是来自某个分布的大小为 n 的样本，该分布具有由某些参数定义的概率密度函数。让我们为简单起见说这是一个具有均值 M 和方差 V 的正态分布。这意味着每个 x_i 的期望值是

```
E(x_i)  = M. for all i since they all are sampled from same population/distribution 
```

样本平均值为 Xbar = (x1 + .. + xn) / n

对此的期望是

```
 E(Xbar) = (E(x1) + ... + E(xn))/n  = nM/n = M 
```

使用简单的期望属性。因此，样本均值的预期值为 M，与总体均值的预期值相同。因此，样本均值是无偏的，因为无偏估计的定义是用作估计量的统计量的期望与其估计的参数相同。如果您无法遵循上述内容，我鼓励您与您的讲师一起学习，或者在 stackexchange 的数学或统计版本上发帖。

# asterisk - 我无法从 Asterisk Manager 界面获取事件

> ID：11558099
> 
> 赞同：1
> 
> 时间：2012-07-19T09:44:48.110
> 
> 标签：asterisk, asteriskami

这是我连接到 Asterisk Manager 界面的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text.RegularExpressions;
using System.Text;
using System.Windows.Forms;
using System.Net.Sockets;
using System.Net;
using System.IO;

namespace WindowsFormsApplication1
{

public partial class Form1 : Form
{

    private Socket clientSocket;
    private byte[] data = new byte[1024];
    private int size = 1024;
    //------------------------------------------------------------------------------------------
    public Form1()
    {
        InitializeComponent();            
    }

    //------------------------------------------------------------------------------------------
    [STAThread]
    private void BtnConnect_Click(object sender, EventArgs e)
    {
        try
        {
            AddItem("Connecting...");
            clientSocket = new Socket(AddressFamily.InterNetwork,
                                  SocketType.Stream, ProtocolType.Tcp);
            IPEndPoint iep = new IPEndPoint(IPAddress.Parse("192.168.1.155"), 5038);
            clientSocket.BeginConnect(iep, new AsyncCallback(Connected), clientSocket);
        }
        catch (Exception exp)
        {

            AddItem(exp.Message);
        }
    }

    //------------------------------------------------------------------------------------------
    private void BtnDisconnect_Click(object sender, EventArgs e)
    {
        clientSocket.Close();
    }

    //------------------------------------------------------------------------------------------
    void Connected(IAsyncResult iar)
    {
        clientSocket = (Socket)iar.AsyncState;
        try
        {
            clientSocket.EndConnect(iar);
            AddItem("Connected to: " + clientSocket.RemoteEndPoint.ToString());                
            clientSocket.BeginReceive(data, 0, size, SocketFlags.None,
                          new AsyncCallback(OnDataReceive), clientSocket);
        }
        catch (Exception exp)
        {
            AddItem("Error connecting: " + exp.Message);
        }
    }
    //------------------------------------------------------------------------------------------

    private void OnDataReceive(IAsyncResult result)
    {
        Socket remote = (Socket)result.AsyncState;
        int recv = remote.EndReceive(result);
        string stringData = Encoding.ASCII.GetString(data, 0, recv);
        AddItem(stringData);
    }

    //------------------------------------------------------------------------------------------
    private delegate void stringDelegate(string s);
    private void AddItem(string s)
    {
        if (ListBoxEvents.InvokeRequired)
        {
            stringDelegate sd = new stringDelegate(AddItem);
            this.Invoke(sd, new object[] { s });
        }
        else
        {
            ListBoxEvents.Items.Add(s);
        }
    }

    //------------------------------------------------------------------------------------------
    private void BtnLogin_Click(object sender, EventArgs e)
    {
        clientSocket.Send(Encoding.ASCII.GetBytes("Action: Login\r\nUsername: admin\r\nSecret: lastsecret\r\nActionID: 1\r\n\r\n"));
    }

    //------------------------------------------------------------------------------------------

}
} 
```

问题是当我连接到服务器时，我收到“Asterisk Call Manager/1.1”消息。连接到服务器后，我登录到服务器，但没有收到任何消息。我想从星号获取事件。使用网络Socket有问题吗？我是否应该使用特殊命令告诉星号我想接收事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:28:12.420

[编辑]

是的。所以这不是 AMI 配置的问题。

当您的连接完成时您启动一个 BeginReceive - 但是一旦您收到一次数据，您就不会启动一个新的 BeginReceive。

您需要在 OnDataReceive 中再次调用 BeginReceive，以便它再次尝试从套接字读取。

```
clientSocket.BeginReceive(data, 0, size, SocketFlags.None,
                          new AsyncCallback(OnDataReceive), clientSocket); 
```

我将原始答案保留在下面，因为您仍然应该检查该信息。我将再次重申我的“仅供参考”——除非你这样做是出于教育目的，否则你应该真正使用现有的 AMI 库——特别是如果你不熟悉 TCP。

[原来的]

您要发送什么用户名和密码？您确定该帐户已正确配置为发送事件吗？

一旦你通过登录验证了你与 Asterisk 的连接，你应该开始自动接收事件。但是请记住，您需要适当的读取授权类权限才能接收某些类型的事件。从示例 manager.conf 中：

```
; Authorization for various classes
;
; Read authorization permits you to receive asynchronous events, in general.
; Write authorization permits you to send commands and get back responses.  The
; following classes exist:
;
; all       - All event classes below (including any we may have missed).
; system    - General information about the system and ability to run system
;             management commands, such as Shutdown, Restart, and Reload.
; call      - Information about channels and ability to set information in a
;             running channel.
; log       - Logging information.  Read-only. (Defined but not yet used.)
; verbose   - Verbose information.  Read-only. (Defined but not yet used.)
; agent     - Information about queues and agents and ability to add queue
;             members to a queue.
; user      - Permission to send and receive UserEvent.
; config    - Ability to read and write configuration files.
; command   - Permission to run CLI commands.  Write-only.
; dtmf      - Receive DTMF events.  Read-only.
; reporting - Ability to get information about the system.
; cdr       - Output of cdr_manager, if loaded.  Read-only.
; dialplan  - Receive NewExten and VarSet events.  Read-only.
; originate - Permission to originate new calls.  Write-only.
; agi       - Output AGI commands executed.  Input AGI command to execute.
; cc        - Call Completion events.  Read-only.
; aoc       - Permission to send Advice Of Charge messages and receive Advice
;           - Of Charge events.
; test      - Ability to read TestEvent notifications sent to the Asterisk Test
;             Suite.  Note that this is only enabled when the TEST_FRAMEWORK
;             compiler flag is defined. 
```

因此，假设我想使用密码“bar”以用户“foo”身份进行身份验证，没有定义 ACL，并且我想接收所有事件。我也只想能够执行“系统”和“调用”类命令。我需要在 manager.conf 中将我的用户设置为：

```
[foo]
secret = bar
read = all
write = system,call 
```

作为一个仅供参考 - 你可能在这里重新发明轮子。除非您将创建自己的 AMI 库作为练习，否则您可能需要考虑使用[Asterisk .NET](http://sourceforge.net/projects/asterisk-dotnet/)。

# selenium-ide - 如何在 Selenium IDE 中自动化 DatePicker？

> ID：11558103
> 
> 赞同：3
> 
> 时间：2012-07-19T09:44:56.240
> 
> 标签：selenium-ide

```
<tr>
    <td>type</td>
    <td>id=release_date</td>
    <td>2012-09-30</td>
</tr> 
```

这可行，但我不想输入日期，而是使用 DatePicker 选择它并尝试自动化它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:49:15.840

这将根据您的日期选择器的编码方式而有很大差异。例如，我正在开发一个使用 Dojo 的 Web 应用程序，并且我正在使用以下代码在日期选择器弹出窗口中选择特定位置而不是特定日期（因为实际日期对我的测试并不重要):

```
<tr>
    <td>waitForElementPresent</td>
    <td>//*[@id=&quot;startDate&quot;]</td>
    <td></td>
</tr>
<tr>
    <td>clickAt</td>
    <td>xpath=(//input[@value='▼ '])[3]</td>
    <td></td>
</tr>
<tr>
    <td>waitForElementPresent</td>
    <td>//table[@id='startDate_popup']/tbody/tr/td[4]/span</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>//table[@id='startDate_popup']/tbody/tr/td[4]/span</td>
    <td></td>
</tr> 
```

我`waitForElementPresent`经常使用以确保 JavaScript 在执行测试的下一步之前有时间完成运行。

我还发现`clickAt`在 Dojo 小部件中单击时这很有用，而且我通常更喜欢将 XPath 用于特定目标。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T06:03:50.150

作为 Selenium IDE 的新手，这些天我做了一些包含日期选择器的测试。

我将粘贴我的 HTML 代码，但如果您有任何问题或任何问题，请随时提出。

```
<!--Set some random generators for Hour From/To-->
<tr>
    <td>storeEval</td>
    <td>[Math.floor((Math.random() * 31) + 1)]</td>
    <td>random</td>
</tr>
<tr>
    <td>click</td>
    <td>//select[@id='valid']/option[3]</td>
    <td></td>
</tr>
<!--Add values to From date and To date-->
<tr>
    <td>click</td>
    <td>id=p_date_from</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>link=${random}</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>//div[@id='valid_period']/p[2]/span/span/abbr</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>[Math.floor((Math.random() * 10) + 1)]</td>
    <td>random</td>
</tr>
<tr>
    <td>click</td>
    <td>link=${random}</td>
    <td></td>
</tr> 
```

# html - HTML/CSS：图片库对齐

> ID：11558104
> 
> 赞同：0
> 
> 时间：2012-07-19T09:44:59.853
> 
> 标签：html, css

我正在尝试制作一个图像列表，如下图（图片库）中的图像，我找到了一个源代码并对其进行了修改，但我不知道如何更改它，因此图像设置在水平线上：以下是代码（已更改）有什么想法吗？

```
<div id="ps_slider" class="ps_slider"><!-- element7-->
        <a class="prev disabled"></a>
        <a class="next disabled"></a>
        <p><h1> Nos references </h1></p>
            <p>Urbanisme</p>
        <div id="ps_albums"><!--element 8-->
            <div class="ps_album" style="opacity:0;"><div id='element8'   ><div class='image'><img src="decoupage/images/fotolia_1583854.jpg" alt="" height='100'     width='130'/></div><div class='text'><p>image number 1</p></div></div></div>  
            <div class="ps_album" style="opacity:0;"><img  src="decoupage/images/fotolia_2859009.jpg" alt="" height='100' width='130'/></div>
            <div class="ps_album" style="opacity:0;"><img  src="decoupage/images/img1.jpg" alt="" height='100' width='130'/></div>
            <div class="ps_album" style="opacity:0;"><img  src="decoupage/images/fotolia_44955.jpg" alt="" height='100' width='130'/></div>
            <div class="ps_album" style="opacity:0;"><img   src="decoupage/images/img4.jpg" alt="" height='100' width='130'/></div>
            <div class="ps_album" style="opacity:0;"><img  src="decoupage/images/img6.jpg" alt="" height='100' width='130'/></div>
            <div class="ps_album" style="opacity:0;"><img  src="decoupage/images/img2.jpg" alt="" height='100' width='130'/></div>

        </div>  
    </div> 
```

CSS代码：

```
body, ul, li, h1, h2, h3{
margin:0;
padding:0;
}

/* Image container style */
 .ps_container{
width:480px;
height:350px;
position:absolute;
top:50%;
margin-top:-175px;
left:50%;
margin-left:-240px;
z-index:100;
}
.ps_container img{
border:1px solid #fff;
position:absolute;
top:50%;
left:50%;
-moz-box-shadow:1px 1px 10px #000;
-webkit-box-shadow:1px 1px 10px #000;
box-shadow:1px 1px 10px #000;
}

a.ps_next_photo:hover,

/* Thumbnail slider style */
.ps_slider{
width:500px;
height:300px;
position:relative;
margin:110px auto 0px auto;
}
.ps_slider a.next,
.ps_slider a.prev{
position:absolute;
background-color:#000;
background-position:center center;
background-repeat:no-repeat;
border:1px solid #232323;
width:20px;
height:20px;
top:20%;
margin-top:-10px;
opacity:0.6;
-moz-border-radius:5px;
-webkit-border-radius:5px;
border-radius:5px;
cursor:pointer;
outline:none;
}
 .ps_slider a.prev:hover,
.ps_slider a.next:hover{
border:1px solid #333;
opacity:0.9;
}
.ps_slider a.disabled,
.ps_slider a.disabled:hover{
opacity:0.4;
border:1px solid #111;
cursor:default;
}
.ps_slider a.prev{
left:-30px;
background-image:url(images/prev.png);
}
.ps_slider a.next{
right:-30px;
background-image:url(images/next.png);

}
.ps_slider .ps_album{
width:140px;
height:100px;
padding:10px;
background-color:#333;
border:1px solid #444;
position:absolute;
top:0px;
text-align:center;
cursor:pointer;
-moz-box-shadow:1px 1px 4px #000;
-webkit-box-shadow:1px 1px 4px #000;
box-shadow:1px 1px 4px #000;
-webkit-box-reflect:
    below 5px 
    -webkit-gradient(
        linear, 
        left top, 
        left bottom, 
        from(transparent), 
        color-stop(0.6, transparent), 
        to(rgb(18, 18, 18))
    );

    }
 .ps_slider .ps_album:hover{
    background-color:#383838;
}
.ps_slider .ps_album img{
height:90px;
border:1px solid #444;
-moz-box-shadow:1px 1px 4px #000;
-webkit-box-shadow:1px 1px 4px #000;
box-shadow:1px 1px 4px #000;
}

.ps_slider .ps_album:hover .ps_desc{
background-image:none;
}
 .ps_slider .ps_album .ps_desc span{
display:block;
margin:0px 10px 10px 10px;
border-top:1px solid #333;
padding-top:5px;
} 
```

![它应该是什么样子。](../Images/ee4f0f16a0ccc46157856fde5183b654.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:56:52.843

移除不透明度并放置 float:left; 它将水平显示。

```
<div id="ps_albums"><!--element 8-->
    <div class="ps_album" style="float:left"><div id='element8'   ><div class='image'><img src="decoupage/images/fotolia_1583854.jpg" alt="" height='100'     width='130'/></div><div class='text'><p>image number 1</p></div></div></div>  
    <div class="ps_album" style="float:left"><img  src="decoupage/images/fotolia_2859009.jpg" alt="" height='100' width='130'/></div>
    <div class="ps_album" style="float:left"><img  src="decoupage/images/img1.jpg" alt="" height='100' width='130'/></div>
    <div class="ps_album" style="float:left"><img  src="decoupage/images/fotolia_44955.jpg" alt="" height='100' width='130'/></div>
    <div class="ps_album" style="float:left"><img   src="decoupage/images/img4.jpg" alt="" height='100' width='130'/></div>
    <div class="ps_album" style="float:left"><img  src="decoupage/images/img6.jpg" alt="" height='100' width='130'/></div>
    <div class="ps_album" style="float:left"><img  src="decoupage/images/img2.jpg" alt="" height='100' width='130'/></div>
</div> 
```

# silverlight - 如何在 Silverlight 中使 ListBox 控件自动平滑滚动

> ID：11558105
> 
> 赞同：0
> 
> 时间：2012-07-19T09:45:02.087
> 
> 标签：silverlight, listbox, autoscroll

有人说我可以使用ScrollIntoView的方法来处理这个问题，但是ScrollIntoView只能在逻辑上滚动ListBox，不能在物理上滚动。有什么办法可以让ListBox自动滚动，好像有人在平滑地拖动它的滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:43:58.913

您可以使用 ScrollViewer 而不是 ListBox。ScrollViewer 具有 ScrollToVerticalOffset(Double offset) 和 ScrollToHorizo​​ntalOffset(Double offset) 方法，您可以使用它们来自动滚动它。

# android - 动作栏android中的微调器

> ID：11558108
> 
> 赞同：1
> 
> 时间：2012-07-19T09:45:17.493
> 
> 标签：android, android-layout

我想将微调器添加到操作栏。我在actionbar item1，item2，spinner中有三个项目。

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
firstView = inflater.inflate(R.layout.main_spinner, null);
msg_spinner_wid = (Spinner) firstView.findViewById(R.id.msg_spinner);

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getApplicationContext(), R.array.msg_spinner_items, android.R.layout.simple_spinner_item);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
msg_spinner_wid.setAdapter(adapter);
msg_spinner_wid.setOnItemSelectedListener(this); 
```

使用上面的代码，我可以在操作栏中看到微调器，但 onItemSelected 没有被调用。我也实现了 AdapterView.OnItemSelectedListener。

如果有任何其他方法可以在操作栏中实现微调器，如果有人知道请回复。

谢谢维斯瓦吉特

# c# - 如何检查它是否在末尾包含分隔符的文本文件？如果有如何删除它？

> ID：11558119
> 
> 赞同：0
> 
> 时间：2012-07-19T09:45:45.497
> 
> 标签：c#, asp.net

实际上我有列和行的文本文件 colsep 是“'”，行 sep 是“/”，我的文本文件是 sfsf'fsfsdf'sdfsdf/dfsdf'sfsf'sfsfs/

如果我的文本文件在文件末尾包含“/”如何检查和删除它，它就在那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:50:58.800

您可以使用[string.TrimEnd()](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)

```
string str = File.ReadAllText(path);
str = str.TrimEnd('/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:27:02.013

您可以使用以下代码：

```
string fileString = = File.ReadAllText(your file path);
if(fileString[fileString.Length-1].Equals('/'))
{
//your code here;
} 
```

或者你可以使用：

```
 if(fileString.EndsWith('/'))
{
//yourcode
} 
```

我们可以使用它们的索引检查字符串中的单个字符，因为我们都知道：

```
 string is the sequence of characters 
```

这将解决您检查文件中最后一个字符的问题。

# android - Android 导出：如何创建 .keystore 文件？

> ID：11558120
> 
> 赞同：4
> 
> 时间：2012-07-19T09:45:49.690
> 
> 标签：android, eclipse, export, keystore

我正在尝试从 Eclipse 导出我的 Android 应用程序，所以我被困在需要创建新密钥库的第二步。我应该在位置字段中输入什么？

感谢您的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T10:01:34.107

> 我被困在需要创建新密钥库的第二步。我应该在位置字段中输入什么？

该位置字段是您要保留新密钥库文件并为密钥库文件命名的位置。

![在此处输入图像描述](../Images/8c1a41dfb612ae8a1d02cb18a71baf4c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:47:54.777

你有这个官方指南来实现这一点，

[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T06:57:19.810

通过在 seach 中键入 cmd 进入终端并运行命令提示符。

在终端写入`cd %JAVA_HOME%\bin`它会带你到 java bin 目录。

在这里粘贴以下行：

```
keytool -genkey -v -keystore e:\store-key.keystore -alias store-key-alias -keyalg RSA -keysize 2048 -validity 10000 
```

它会提示您输入您的姓名和其他内容，只需在询问时将这些内容提供给终端和密码，您的密钥文件将在 E 盘中生成，名称为 **store-key.keystore**

# java - Android中按钮的条件检查

> ID：11558128
> 
> 赞同：0
> 
> 时间：2012-07-19T09:46:32.710
> 
> 标签：java, android

这是一个生成随机字符串的类文件。

```
public class RandomGen {
    static String keys() {
        String str[] = new String[25];
        str[0] = "Press A1";
        str[1] = "Press A2";
        str[2] = "Press A3";
        str[3] = "Press A4";
        str[4] = "Press A5";
        str[5] = "Press B1";
        str[6] = "Press B2";
        str[7] = "Press B3";
        str[8] = "Press B4";
        str[9] = "Press B5";
        str[10] = "Press C1";
        str[11] = "Press C2";
        str[12] = "Press C3";
        str[13] = "Press C4";
        str[14] = "Press C5";
        str[15] = "Press D1";
        str[16] = "Press D2";
        str[17] = "Press D3";
        str[18] = "Press D4";
        str[19] = "Press D5";
        str[20] = "Press E1";
        str[21] = "Press E2";
        str[22] = "Press E3";
        str[23] = "Press E4";
        str[24] = "Press E5";

        Random randomGenerator = new Random();
        int randomInt = randomGenerator.nextInt(25);
        return str[randomInt];
    }
} 
```

这是安卓活动文件。我从一个类中返回一个随机文本并在文本视图中显示。如果返回的字符串是“Press A1”，用户应该只按下 Al 按钮。如果他按下其他按钮，则必须在其他文本视图中显示错误消息。下次如果该文本视图中显示“Press C1”，用户应该只按下 C1 按钮。如果他按下其他按钮，则必须显示“错误按钮”消息。我不知道如何检查条件。请帮我。

```
 RandomGen rg = new RandomGen();
    String s;
    b[0].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            s = rg.keys();
            tv.setText(s);
            tv2.setText("A1 is pressed");
        }
    });
    b[1].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            s = rg.keys();
            tv.setText(s);
            tv2.setText("A2 is pressed");
        }
    });
    b[2].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            s = rg.keys();
            tv.setText(s);
            tv2.setText("A3 is pressed");

        }
    });
    b[3].setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            s = rg.keys();
            tv.setText(s);
            tv2.setText("A4 is pressed");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:03:02.233

If you would want to test this I would propose to create a RandomGenerator interface with two implementations. One implementation which returns a predefined set of results and one which uses a Random to provide the answers.

This way the predefined RandomGenerator can be used during testing and the random RandomGenerator during the running of the application.

The code below demonstrates the setup I illustrated above. Pass a IntegerGenerator in your keys method and use it like this:

```
public static String keys(IntegerGenerator generator) {
    // code to create keys str
    int randomInt = generator.nextInt(str.length);
    return str[randomInt];

}

interface IntegerGenerator {
    public int nextInt(int maximum);
}

class PredefinedIntegerGenerator implements IntegerGenerator {

    private final int[] values;
    private int index;

    public PredefinedIntegerGenerator(int[] values) {
        this.values = values;
        this.index = 0;
    }

    @Override
    public int nextInt(int maximum) {
        if (index >= values.length) {
            index = 0;
        }
        return values[index];

    }
}

class RandomIntegerGenerator implements IntegerGenerator {

    private final Random random;

    public RandomIntegerGenerator(Random random) {
        this.random = random;
    }

    @Override
    public int nextInt(int maximum) {
        return random.nextInt(maximum);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:13:04.093

You have a whole lot of code duplication here. Here's what you should do, IMHO.

Create a static final array of texts, containing the text of all your buttons.

Create a `Map<View, String>` containing the text associated with each button (unless Android allows associateing some text to a button, in which case you don't even need this map).

For each button add the same listener:

```
View.OnCliskListener theListener = new View.OnClickListener() {
    public void onClick(View buttonClicked) {
        String textOfTheButtonClicked = map.get(buttonClicked);
        if (!textOfTheButtonClicked.equals(theTextChosenRandomly)) {
            // do what you want here
        }
    }
}; 
```

# iphone - 为什么以下被认为是内存泄漏？

> ID：11558135
> 
> 赞同：0
> 
> 时间：2012-07-19T09:47:18.757
> 
> 标签：iphone, xcode, memory-leaks, instruments

我只是想知道是否有人可以向我解释为什么以下几行显示为 Instruments 内存泄漏：

```
self.videoEngine = [[VideoEngine alloc] initWithCallbackName:@"IntroFinished"];

self.videoEngine = [[VideoEngine alloc] initWithCallbackName:@"MainMovieFinished"];

self.timerMap = [NSTimer scheduledTimerWithTimeInterval:fps target:self selector:@selector(updateAnimationTimer) userInfo:nil repeats:YES];

NSString *locationName2 = [[NSString alloc] initWithString:[locationName substringFromIndex:test]]; 
```

初始化时不使用预设的 NSString 有问题吗？在 self.videoEngine 和 self.timerMap 的示例中，它们都具有（非原子，保留）属性，并且在使用前被合成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:50:07.197

如果您不使用 Arc（其中提到了保留，我认为您没有使用），那么这将是您的内存泄漏。

当您分配 VideoEngine 属性时，它正在对您的对象执行另一个保留。您需要将 autorelease 添加到 alloc 语句的末尾。

```
self.videoEngine = [[[VideoEngine alloc] initWithCallbackName:@"IntroFinished"] autorelease];

self.videoEngine = [[[VideoEngine alloc] initWithCallbackName:@"MainMovieFinished"] autorelease];

self.timerMap = [NSTimer scheduledTimerWithTimeInterval:fps target:self selector:@selector(updateAnimationTimer) userInfo:nil repeats:YES];

NSString *locationName2 = [[NSString alloc] initWithString:[locationName substringFromIndex:test]]; 
```

# linux - 交叉编译内核模块：如何正确设置配置

> ID：11558136
> 
> 赞同：2
> 
> 时间：2012-07-19T09:47:31.423
> 
> 标签：linux, arm, cross-compiling, kernel-module, beagleboard

我正在尝试为 Beaglebone（Linux、ARM）交叉编译一个外部模块。为了避免内核版本问题，我抓取了一个内核 tarball，并使用主机（x86）上的 CodeSourcery 工具链为 ARM 交叉编译。然后，我使用完全相同的工具链针对完全相同的内核源代码交叉编译了一个外部 hello-world 模块。我使用了这个简单的makefile：

```
obj-m += hello-1.o

all:
   make -C /home/***/****/linux-3.2.0-beaglebone-20120411.00              
M=$(PWD) modules

clean:
    make -C /home/***/****/linux-3.2.0-beaglebone-20120411.00 M=$(PWD) clean 
```

当我将 ko 文件复制到目标并尝试对其进行 insmod 时，我得到：“insmod: error inserting 'hello-1.ko': -1 Invalid module format”（从我在本组和其他地方学到的）通常源于冲突的内核版本，实际上 uname -a on the target 给出了：

> Linux beaglebone 3.2.18 #1 Wed May 30 14:21:54 CEST 2012 armv7l GNU/Linux

而 modinfo hello-1.ko 给出：

> srcversion：140276773A3090F6F33891F 取决于：
> vermagic：3.2.0+ mod_unload modversions ARMv5 p2v8

所以版本 3.2.18 与 3.2.0+（为什么是 +？）和 armv7l 与 ARMv5！

有谁知道为什么我得到不同的版本，尽管我是针对相同的内核源编译的（也许是一些配置）？

任何建议表示赞赏！

最好的，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:00:21.220

答案是，你应该运行你在 beagle board 上编译的内核。

'+' 表示您修改了源代码树。

最后确保您使用正确的 defconfig。'make beagle_defconfig' 应该可以工作。

# javascript - 文件阅读器无法在 chrome 中工作

> ID：11558138
> 
> 赞同：1
> 
> 时间：2012-07-19T09:47:38.023
> 
> 标签：javascript, html, file-upload, filereader

我正在从我的 PC 上传图像文件。然后我使用 filereader 读取文件并预览上传的图像。在Firefox中它工作正常。但是在 chrome 中，除了 reader.readAsDataURL(); 的输出之外，一切正常。镀铬是空的。

这是我的代码，

```
<body>
   <form name="Upload" enctype="multipart/form-data" method="post">
       Filename: <INPUT type="file" id="submit">
       <INPUT type="button" id="send" value="Upload">
   </form>
   <div 
       id="div" 
       align="center" 
       style="height: 200px;width: 500px;border-style: ridge;border-color: red">
   </div>
</body>

<script type="text/javascript">
    document.getElementById('send').onclick=function()
    {
        var imag = document.createElement("img");
        var thumbnail = document.getElementById("div");
        if(document.all) {
        imag.src = document.getElementById('submit').value;
        }
        else {
        function handlefilereader(evt){
        var target = evt.target || evt.srcElement;
        imag.src = evt.target.result; 
        }

        var reader = new FileReader()
        reader.onload = handlefilereader;
        reader.readAsDataURL(document.getElementById('submit').files[0]);   
        }
        thumbnail.appendChild(imag);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:22:47.793

打开带有标志的 chrome

```
--allow-file-access-from-files 
```

否则从本地主机打开页面

# android - file.mkdirs() 不工作

> ID：11558139
> 
> 赞同：1
> 
> 时间：2012-07-19T09:47:40.353
> 
> 标签：android, file, sd-card

我想写入手机 SD 卡中的文件。我使用下面的代码来执行此操作。

```
private  CSVWriter _writer;
private  File _directory;
public  String _fileTestResult;
private  String PATH_FILE_EXPORT = "/applications/foru/unittestframework/";
public ExportData(){
    _writer=null;
    _directory = new File(Environment.getExternalStorageDirectory () +PATH_FILE_EXPORT);
    if(!_directory.exists())    
        _directory.mkdirs();

}

public  void exportResult(String testcaseNum,String testcase,String status){

    try {

        if(_directory.exists()){
           //do something
        } 
```

但是 mkdirs() 不起作用。所以我无法在 if 条件中执行以下代码。请帮助我。

注意：我已在清单文件中授予权限。

**编辑：** 我正在使用此文件写入选项来存储使用机器人的自动化测试的结果。我创建了一个普通项目并尝试在 sdcard 中创建目录。但是当我在此测试项目中使用相同的代码时它不起作用。为什么像那样？不单元测试框架支持这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:08:30.350

您是否在清单中添加了正确的权限？

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

编辑：好的，我刚刚阅读了您的说明以获得许可。

如果对您有帮助，这是我的 sdcard 缓存代码：

```
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)){
        String evtDir = "";
        if(evt > 0){
            evtDir = File.separator + evt;
        }

        cacheDir = new File(
                android.os.Environment.getExternalStorageDirectory()
                        + File.separator 
                        + "Android" 
                        + File.separator 
                        + "data"
                        + File.separator
                        + Application.getApplicationPackageName()
                        + File.separator + "cache"
                        + evtDir);
    }else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:07:38.753

试试下面的代码

```
 try {
                File root = Environment.getExternalStorageDirectory();
                if (root.canWrite()) {
                    imagefolder = new File(root,
                            mycontext.getString(R.string.app_name));
                    imagefolder.mkdirs();
                }
            } catch (Exception e) {
                Log.e("DEBUG", "Could not write file " + e.getMessage());
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:11:58.127

尝试：

```
if(!_directory.exists())    
        _directory.mkdir(); 
```

还要检查这个 -[在 /sdcard 中创建目录失败](https://stackoverflow.com/questions/3853472/creating-a-directory-in-sdcard-fails)

# java - java string.contains 在 switch 语句中

> ID：11558140
> 
> 赞同：20
> 
> 时间：2012-07-19T09:47:41.293
> 
> 标签：java, switch-statement

如何将以下代码转换为 switch 语句？

```
String x = "user input";

if (x.contains("A")) {
    //condition A;
} else if (x.contains("B")) {
    //condition B;
} else if(x.contains("C")) {
    //condition C;
} else {
    //condition D;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T09:53:24.207

有一种方法，但不使用`contains`. 你需要一个正则表达式。

```
final Matcher m = Pattern.compile("[ABCD]").matcher("aoeuaAaoe");
if (m.find())
  switch (m.group().charAt(0)) {
  case 'A': break;
  case 'B': break;
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T09:50:15.500

你不能`switch`在这样的条件下`x.contains()`。Java 7 支持`switch`字符串，但不像你想要的那样。使用`if`等

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-11T07:15:28.003

java中switch语句中不允许条件匹配。

您可以在这里做的是创建一个字符串文字的**枚举，并使用该枚举创建一个****帮助函数**，该函数返回匹配的枚举文字。使用返回的枚举值，您可以轻松应用**switch case**。

例如：

```
public enum Tags{
   A("a"),
   B("b"),
   C("c"),
   D("d");

   private String tag;

   private Tags(String tag)
   {
      this.tag=tag;
   }

   public String getTag(){
      return this.tag;
   }

   public static Tags ifContains(String line){
       for(Tags enumValue:values()){
         if(line.contains(enumValue)){
           return enumValue;
         }
       }
       return null;
   }

} 
```

在您的 java 匹配类中，执行以下操作：

```
Tags matchedValue=Tags.ifContains("A");
if(matchedValue!=null){
    switch(matchedValue){
       case A:
         break;
       etc...
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-27T05:29:01.497

```
@Test
public void test_try() {
    String x = "userInputA"; // -- test for condition A
    String[] keys = {"A", "B", "C", "D"};
    String[] values = {"conditionA", "conditionB", "conditionC", "conditionD"};

    String match = "default";
    for (int i = 0; i < keys.length; i++) {
        if (x.contains(keys[i])) {
            match = values[i];
            break;
        }
    }

    switch (match) {
        case "conditionA":
            System.out.println("some code for A");
            break;
        case "conditionB":
            System.out.println("some code for B");
            break;
        case "conditionC":
            System.out.println("some code for C");
            break;
        case "conditionD":
            System.out.println("some code for D");
            break;
        default:
            System.out.println("some code for default");
    }
} 
```

输出：

```
some code for A 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T09:53:27.120

不，您不能使用`switch`with 条件

JAVA 7 允许`String`与`switch case`

[为什么我不能打开字符串？](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)

**但是条件不能和switch一起使用**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-19T09:53:21.733

你只能比较switch中的整个单词。对于您的场景，最好使用 if

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-23T16:27:29.453

还有HashMap：

```
String SomeString = "gtgtdddgtgtg";

Map<String, Integer> items = new HashMap<>();
items.put("aaa", 0);
items.put("bbb", 1);
items.put("ccc", 2);
items.put("ddd", 2);

for (Map.Entry<String, Integer> item : items.entrySet()) {
    if (SomeString.contains(item.getKey())) {
        switch (item.getValue()) {
            case 0:
                System.out.println("do aaa");
                break;
            case 1:
                System.out.println("do bbb");
                break;
            case 2:
                System.out.println("do ccc&ddd");
                break;
        }
        break;
    }
} 
```

# linkedin - Linkedin Group API 调用获取评论成员的个人资料 URL

> ID：11558141
> 
> 赞同：0
> 
> 时间：2012-07-19T09:47:41.783
> 
> 标签：linkedin

我正在使用带有 PHP 的 Linkedin REST API。

我正在尝试获取特定讨论组的帖子。

API调用是

[http://api.linkedin.com/v1/groups/2417328/posts:(creation-timestamp,summary,title,type,comments,id,creator:(picture-url,last-name,headline,id,first-名称,站点标准配置文件请求))?count=100&start=0&modified-since=1312441200000](http://api.linkedin.com/v1/groups/2417328/posts:(creation-timestamp,summary,title,type,comments,id,creator:(picture-url,last-name,headline,id,first-name,site-standard-profile-request))?count=100&start=0&modified-since=1312441200000)

我还想获取对每个帖子发表评论的成员的个人资料 URL。是否可以通过上述调用来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:28:55.123

是的，这是可能的 - 在 API 调用中，指定您希望从可用[配置文件字段列表中返回的评论创建者字段](https://developer.linkedin.com/documents/profile-fields)。要返回评论创建者的个人资料 URL，请将`comments` [Group Field](https://developer.linkedin.com/documents/groups-fields)替换为`comments:(creator:(site-standard-profile-request))`。您可以根据需要在其中指定其他配置文件字段。

# objective-c - 目标 C：AVFoundation 改变音高是可能的吗？

> ID：11558143
> 
> 赞同：0
> 
> 时间：2012-07-19T09:47:47.263
> 
> 标签：objective-c, ios, avfoundation

AVFoundation Framework 可以改变录制声音的音高吗？如果可能的话，如何改变声音的音高？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:57:40.843

AFAIK AVFoundation 不支持音高转换等 DSP 效果（但有人请证明我错了......）。但是，iOS 支持[OpenAL](https://web.archive.org/web/20140604142344/https://developer.apple.com/library/ios/technotes/tn2199/_index.html)，它为您提供了更多选择。要更改音高，请使用

```
alSourcef(source, AL_PITCH, myPitch) 
```

# oracle - Oracle：带有类的 PLSQL

> ID：11558144
> 
> 赞同：3
> 
> 时间：2012-07-19T09:47:48.170
> 
> 标签：oracle, class

我想使用典型的 java 表示法。我需要一个计时器，但我不想创建一个只有两个变量（开始和结束时间，以及一些方法）的包。

我可以创建一个可以包含函数的内联包、类型或记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:22:23.823

您可以使用对象：

```
CREATE OR REPLACE TYPE timer  AS OBJECT
(
  start_time  DATE
, end_time    DATE 
, CONSTRUCTOR FUNCTION timer
  RETURN SELF AS RESULT
, MEMBER FUNCTION get_duration
  RETURN NUMBER
)
;
/

CREATE OR REPLACE TYPE BODY timer IS

  CONSTRUCTOR FUNCTION timer      
  RETURN SELF AS RESULT
  IS
  BEGIN
    SELF.start_time := SYSDATE;
    RETURN;
  END;

  MEMBER FUNCTION get_duration
  RETURN NUMBER
  IS
  BEGIN
    RETURN  NVL(SELF.end_time, SYSDATE) - SELF.start_time;
  END get_duration;

END;
/ 
```

# android - 从 SQLite 获取信息并在 Listview 中显示

> ID：11558149
> 
> 赞同：0
> 
> 时间：2012-07-19T09:47:57.540
> 
> 标签：android, sqlite

我在显示数据库中的一些信息时遇到问题。我应该从 EditText 字段中读取一些文本并将它们显示在另一个活动中。我有 ID、姓名、电子邮件、电话和地址作为列名。但我在插入行时出错。对不起，这是一个很长的帖子。这是我的代码：

插入和获取所有信息的代码

```
public class InformationDataSource {

// Database fields
private SQLiteDatabase database;
private MySQLiteHelper dbHelper;
private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
        MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_EMAIL, MySQLiteHelper.COLUMN_PHONE, MySQLiteHelper.COLUMN_ADDRESS};

public InformationDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public Info createInfo(String name,String email,String phone,String address) {
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_NAME, name);
    values.put(MySQLiteHelper.COLUMN_EMAIL, email);
    values.put(MySQLiteHelper.COLUMN_PHONE, phone);
    values.put(MySQLiteHelper.COLUMN_ADDRESS, address);
    long insertId = database.insert(MySQLiteHelper.TABLE_NAME, null,
            values);
    Cursor cursor = database.query(MySQLiteHelper.TABLE_NAME,
            allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
            null, null, null);
    cursor.moveToFirst();
    Info newInfo = cursorToInfo(cursor);
    cursor.close();
    return newInfo;
}

public List<Info> getAllInfos() {
    List<Info> Infos = new ArrayList<Info>();

    Cursor cursor = database.query(MySQLiteHelper.TABLE_NAME,
            allColumns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Info Info = cursorToInfo(cursor);
        Infos.add(Info);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return Infos;
}

private Info cursorToInfo(Cursor cursor) {
    Info Info = new Info();
    Info.setId(cursor.getLong(0));
    Info.setName(cursor.getString(1));
    Info.setEmail(cursor.getString(2));
    Info.setPhone(cursor.getString(3));
    Info.setAddress(cursor.getString(4));
    return Info;
}
} 
```

MainActivity 类。我从这里的 EditText 字段中获取字符串。

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

      Button next = (Button) findViewById(R.id.add);
      EditText nametext = (EditText) this.findViewById(R.id.NameText);
      final String nt = nametext.getText().toString();
      EditText emailtext = (EditText) this.findViewById(R.id.MailText);
      final String et = emailtext.getText().toString();
      EditText phonetext = (EditText) this.findViewById(R.id.PhoneText);
      final String pt = phonetext.getText().toString();
      EditText addresstext = (EditText) this.findViewById(R.id.AddressText);
      final String at = addresstext.getText().toString();

        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                Bundle bundle = new Bundle();
                bundle.putString("NT",nt);
                Bundle bundle2 = new Bundle();
                bundle2.putString("MT",et);
                Bundle bundle3 = new Bundle();
                bundle3.putString("PT",pt);
                Bundle bundle4 = new Bundle();
                bundle4.putString("AT",at);
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                myIntent.putExtras(bundle);
                myIntent.putExtras(bundle2);
                myIntent.putExtras(bundle3);
                myIntent.putExtras(bundle4);
                startActivityForResult(myIntent, 0);
            }

        });
}

} 
```

这是我的另一项活动。使用 MainActivity 中的字符串。

```
public class Activity2 extends ListActivity {
private InformationDataSource datasource;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main2);

    Bundle bundle = this.getIntent().getExtras();
    String nt = bundle.getString("NT");
    Bundle bundle2 = this.getIntent().getExtras();
    String et = bundle2.getString("ET");
    Bundle bundle3 = this.getIntent().getExtras();
    String pt = bundle3.getString("PT");
    Bundle bundle4 = this.getIntent().getExtras();
    String at = bundle4.getString("AT");

    datasource = new InformationDataSource(this);
    datasource.open();
    @SuppressWarnings("unchecked")
    ArrayAdapter<Info> adapter2 = (ArrayAdapter<Info>) getListAdapter();
    Info info = null;

    // Save the new info to the database
    info = datasource.createInfo(nt,et,pt,at);
    adapter2.add(info);

    adapter2.notifyDataSetChanged();

    List<Info> values = datasource.getAllInfos();

    // Use the SimpleCursorAdapter to show the
    // elements in a ListView
    ArrayAdapter<Info> adapter = new ArrayAdapter<Info>(this,
            android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
}

} 
```

还有一个名为 Info 的类，我用它来保存其中的信息。我认为我的错误在 Activity2.class 中。我无法在 ListView 中显示 Main Activity 中的字符串。当我运行程序时，MainActivity 可以工作，但是在输入信息并按下“添加”按钮后，我得到了错误。这是第一个错误。

```
07-19 09:44:19.013: W/KeyCharacterMap(545): No keyboard for id 0
07-19 09:44:19.013: W/KeyCharacterMap(545): Using default keymap:
/system/usr/keychars/qwerty.kcm.bin
07-19 09:44:27.974: E/Database(545): Error inserting Name= Phone= Email=null Address= 
```

很抱歉再次发了这么长的帖子，但我对这件事很陌生。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:55:48.623

看起来将数据从 1 Activity 传递到花药似乎是错误的。

这是完美运行的代码。

//发送数据

```
String fName_temp   = yourObject.getFname();
String lName_temp   = yourObject.getLname();
String age_temp     = yourObject.getAge();
String address_temp = yourObject.getAddress();

Intent i = new Intent(this, ToClass.class);
    i.putExtra("fname", fName_temp);
    i.putExtra("lname", lName_temp);
    i.putExtra("age", age_temp);
    i.putExtra("address", address_temp);
startActivity(i); 
```

//接收数据

```
Intent intent = getIntent();
String fname = intent.getExtras().getString("fname");
String lname = intent.getExtras().getString("lname");
String age = intent.getExtras().getString("age");
String address = intent.getExtras().getString("address"); 
```

它肯定会帮助你。

谢谢。

# php - 如何制作管理页面以修改/添加到列表、创建新网页等

> ID：11558150
> 
> 赞同：0
> 
> 时间：2012-07-19T09:47:56.927
> 
> 标签：php, html, oop, dynamic, admin

我想为我正在为客户构建的网站添加功能，使他能够登录到安全页面并添加新的工作列表。他将是唯一一个修改这个的人，所以我不需要担心并发访问或类似的事情。在这一点上，我什至没有为他设置数据库，但我知道可能需要尽快实施，如果不是这个，其他功能。

他对 HTML 没有任何了解，所以我不能只创建一个模板职位发布并让他手动填写信息（尽管这也很不专业，我想。）我打算只做一个简单的 php/html页面，他可以通过提交表格将工作的标题与所有详细信息一起放置。但是，一旦我有了它，我不知道如何处理将该职位添加到当前职位发布列表中，并且还拥有指向包含该职位所有详细信息的新页面的链接。

我对早期本科课程的记忆暗示将工作添加到列表中将是面向对象的。但是，我也可以看到一些东西，我只需将标题添加到一个数组中，然后动态填充列表。

我收到的另一个建议是研究实施 django/python 解决方案。问题是我有大约一周的时间来处理这个问题，而且我没有 python 经验。如果那是可以在那个时候学习和实施的东西，我会去的。我只是不想把时间浪费在需要一两个星期才能学习但仍然没有实施的东西上。

基本上，我会很欣赏正确方向的一点，以及我正在考虑所有可能性的一些保证。如果实现某种简单的 wiki 会更容易，那也是另一种选择。

这些想法中的任何一个听起来都是正确的选择吗？有什么我想念的吗？

如果这是一个微不足道的问题，我深表歉意，但我把自己难住了，希望您能提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:15:02.333

一个可能且简单的解决方案是使用适当的 CMS 模块，例如WordPress 的[Job Manager](https://wordpress.org/extend/plugins/job-manager/)或[Resume Submissions 和 Job Posting](https://wordpress.org/extend/plugins/resume-submissions-job-postings/)。我没有亲自测试过它们，但它们应该通过 Web 界面为您处理所有事情，无需编码（您应该调整 WordPress CSS 以匹配现有客户的网站样式）。

* * *

作为参考，如果不存在这样的 CMS 模块，我会这样做。

1.  创建一个包含所有职位发布的表的数据库。该表应具有以下列：`id`, `title`, `description`, `validityDate`（名称不言自明）。如果合适，添加更多。
2.  编写一个脚本，使用以下查询查询数据库中的所有当前职位发布：`SELECT id, title FROM postings WHERE validityDate >= NOW()`。要管理数据库连接，请使用 PHP PDO 扩展（在[PHP 手册网站上查看其页面以](http://php.net/manual/en/book.pdo.php)获取示例）。这将返回所有当前职位发布的列表。对于每个结果，让脚本输出如下 HTML 代码：、`echo "<a href=\"post.php?id=$id\">$title</a><br />$description";`where和是保存当前记录的 ID、标题和描述的变量。`$id``$title``$description`
3.  编写`post.php`脚本，该脚本将使用 id 参数中指定的 ID 获取职位发布的详细信息。
4.  编写另一个脚本，客户将在其中将新发布的详细信息输入到表单中。提交后，脚本应该只是将数据插入表中。

# excel - 带有if函数的excel vlookup

> ID：11558153
> 
> 赞同：0
> 
> 时间：2012-07-19T09:48:03.830
> 
> 标签：excel

例如：

```
F2 = VLOOKUP($L$2,sheet2!$A$2:$G$169,6,0) 
```

我想添加一个功能，如果在sheet2中找不到$L$2！$A$2:$G$169，则显示“无效”。

我可以知道我应该如何修改为excel中的代码吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:33:13.950

首先通过输入一个您知道不在搜索集中的值来测试如果找不到 $L$2 会返回什么。例如，如果它返回 0 那么：

```
=IF(VLOOKUP($L$2,sheet2!$A$2:$G$169,6,0) = 0, "invalid", VLOOKUP($L$2,sheet2!$A$2:$G$169,6,0)) 
```

如果它返回一个错误，那么尝试一些类似的东西

```
=IF(ISERROR(VLOOKUP($L$2,sheet2!$A$2:$G$169,6,0)), "invalid", VLOOKUP($L$2,sheet2!$A$2:$G$169,6,0)) 
```

要不就

```
=IFERROR(VLOOKUP($L$2,sheet2!$A$2:$G$169,6,0), "invlaid") 
```

# magento - Magento - 如何启用 SMTP 服务器身份验证和安全传输？

> ID：11558156
> 
> 赞同：4
> 
> 时间：2012-07-19T09:48:20.483
> 
> 标签：magento, email, smtp

我想让 SMTP 服务器在 Magento 应用程序（1.7 版）上运行。所以我在文件中添加了以下代码`app/code/core/Mage/Core/Model/Email/Template.php`

```
public function getMail()
    {
        if (is_null($this->_mail)) {

            /*Start of added code to specify config*/
            $my_smtp_host = Mage::getStoreConfig('system/smtp/host');
            $my_smtp_port = Mage::getStoreConfig('system/smtp/port'); 

            $config = array(
                    'ssl' => 'tls',
                    'port' => $my_smtp_port,
                    'auth' => 'login',
                    'username' => 'account@gmail.com',
                    'password' => 'secret'
            );

            $transport = new Zend_Mail_Transport_Smtp($my_smtp_host, $config);

            Zend_Mail::setDefaultTransport($transport);
            /*End of added code to specify config*/

            $this->_mail = new Zend_Mail('utf-8');
        }
        return $this->_mail;
    } 
```

然后在**管理面板->系统->配置->高级->系统->邮件发送设置**

添加了以下设置

*   主机：smtp.gmail.com
*   端口（25）：587

完成这些更改后，我在前端进行了测试（即向朋友发送电子邮件）。显示成功消息，但电子邮件不在邮箱中（甚至不在垃圾邮件中）。

希望任何人都可以帮助我。真的很感谢，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T14:38:42.093

你不应该侵入核心代码，有很多原因，因为这不是一个好主意。一是：您无法升级。

而是使用扩展程序或自己编写：http: [//www.magentocommerce.com/magento-connect/ASchroder/extension/1865/aschroder.com-smtp-pro](http://www.magentocommerce.com/magento-connect/ASchroder/extension/1865/aschroder.com-smtp-pro)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-28T07:34:08.663

我已设法从本地主机发送忘记密码电子邮件。

您唯一需要做的就是按照下面列出的步骤操作并完成。

1.  修改此页面`app/code/core/Mage/Core/Model/Email/Template.php`

注释现有功能并添加以下代码

```
 public function getMail()
    {
     if (is_null($this->_mail)) {
        /* changes begin */
       $my_smtp_host = Mage::getStoreConfig('system/smtp/host');
       $my_smtp_port = Mage::getStoreConfig('system/smtp/port');
       $config = array(
                'port' => $my_smtp_port,
                'auth' => 'login',
                'username' => 'your username',
                'password' => 'your password'
            );
        $transport = new Zend_Mail_Transport_Smtp($my_smtp_host, $config);
        Zend_Mail::setDefaultTransport($transport);
        /* Changes End */
        $this->_mail = new Zend_Mail('utf-8');
    }
    return $this->_mail;
} 
```

2.  登录到管理员`System -> Configuration -> Advanced -> System -> Mail Sending settings`并设置以下内容。

    禁用电子邮件通信 = 否

    主机 = smtp.mandrillapp.com

    端口 (25) = 587

    设置返回路径 = 否

![在此处输入图像描述](../Images/50cb2373ffa42a79f2c93824d5ef9110.png)

3.  `System -> Transactional Emails -> Add New Template`按照以下步骤登录管理员

    *   在加载默认模板 - 选择所需的模板`'Forgot Password'`，然后单击`Load Template`默认模板将填充到模板内容中

    *   在模板信息中 - 提供任何模板名称，如`Forgot Password`并单击保存模板。

4.  登录到管理员`System -> Configuration -> Customers -> Customer Configuration -> Password Options`

    *   从`Forgot Email Template`下拉列表中选择“忘记密码”（在交易电子邮件选项卡中创建）。

    *   选择`Remind Email Template`“忘记密码”

    *   选择`Forgot and Remind Email Sender`前客户支持的任何下拉值。

![在此处输入图像描述](../Images/b54e94b6c68165375aa18b71218d739c.png)

注意 - 确保客户支持设置为某个有效的电子邮件地址。为了修改客户支持电子邮件 - 登录到管理员`System -> Configuration -> General -> Store email Address -> Customer support`添加有效的电子邮件地址。

这就是你所做的一切。请随时发布您的疑问。有关更多信息，请参阅此[http://pravams.com/2011/07/30/magento-send-email-using-smtp/](http://pravams.com/2011/07/30/magento-send-email-using-smtp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-01T21:16:35.963

Magento Mail 传输是从这两个函数中设置和执行的

1.  `Mage_Core_Model_Email_Template -> send()`
2.  `Mage_Newsletter_Model_Template -> send()`

这是我创建的工作模块代码，用于通过我们的电子邮件服务提供商引导**交易电子邮件。**它覆盖`Mage_Core_Model_Email_Template -> send()`

请注意，您需要为您的目的对额外的配置项进行硬编码，因为此代码示例缺少将字段添加到系统配置的设置，但它应该让您了解如何更改 send() 函数使用需要身份验证并可以提供 SSL/TLS 安全传输的 SMTP 服务器。

```
public function send($email, $name = null, array $variables = array())
{
    if (!$this->isValidForSend()) {
        Mage::logException(new Exception('This letter cannot be sent.')); // translation is intentionally omitted
        return false;
    }

    /* Set up mail transport to Email Hosting Provider SMTP Server via SSL/TLS */
    $config = array(
            'ssl'      => Mage::getStoreConfig('system/smtp/ssl'),      // option of none, ssl or tls
            'port'     => Mage::getStoreConfig('system/smtp/port'),     // TLS 587 - SSL 465 - default 25
            'auth'     => Mage::getStoreConfig('system/smtp/auth'),     // Auth type none, login, plain, CRAM-MD5
            'username' => Mage::getStoreConfig('system/smtp/username'),
            'password' => Mage::getStoreConfig('system/smtp/password')
        );

    /* Set up transport package to host */
    $transport = new Zend_Mail_Transport_Smtp(Mage::getStoreConfig('system/smtp/host'), $config);
    /* End transport setup */

    $emails = array_values((array)$email);
    $names = is_array($name) ? $name : (array)$name;
    $names = array_values($names);
    foreach ($emails as $key => $email) {
        if (!isset($names[$key])) {
            $names[$key] = substr($email, 0, strpos($email, '@'));
        }
    }

    $variables['email'] = reset($emails);
    $variables['name'] = reset($names);

    // ini_set('SMTP', Mage::getStoreConfig('system/smtp/host'));
    // ini_set('smtp_port', Mage::getStoreConfig('system/smtp/port'));

    $mail = $this->getMail();

    $setReturnPath = Mage::getStoreConfig(self::XML_PATH_SENDING_SET_RETURN_PATH);
    switch ($setReturnPath) {
        case 1:
            $returnPathEmail = $this->getSenderEmail();
            break;
        case 2:
            $returnPathEmail = Mage::getStoreConfig(self::XML_PATH_SENDING_RETURN_PATH_EMAIL);
            break;
        default:
            $returnPathEmail = null;
            break;
    }

    if ($returnPathEmail !== null) {
        $mailTransport = new Zend_Mail_Transport_Sendmail("-f".$returnPathEmail);
        Zend_Mail::setDefaultTransport($mailTransport);
    }

    foreach ($emails as $key => $email) {
        $mail->addTo($email, '=?utf-8?B?' . base64_encode($names[$key]) . '?=');
    }

    $this->setUseAbsoluteLinks(true);
    $text = $this->getProcessedTemplate($variables, true);

    if($this->isPlain()) {
        $mail->setBodyText($text);
    } else {
        $mail->setBodyHTML($text);
    }

    $mail->setSubject('=?utf-8?B?' . base64_encode($this->getProcessedTemplateSubject($variables)) . '?=');
    $mail->setFrom($this->getSenderEmail(), $this->getSenderName());

    try {
        /* Send Transport, empty and log success */
        $mail->send($transport); //transport object
        $this->_mail = null;
        Mage::log('Mailed to: ' . $this->getSenderEmail() . ' ' . $this->getSenderName() . ' ' .$this->getProcessedTemplateSubject($variables), null, 'email.log');
        /* End */
    }
    catch (Exception $e) {
        /* Or empty and log failure */
        $this->_mail = null;
        Mage::log('Failure: ' . $e, null, 'email.log');
        Mage::logException($e);
        return false;
        /* End */
    }

    return true;
} 
```

# ant - 使用 Gradle 从现有 pom.xml 文件中读取信息？

> ID：11558157
> 
> 赞同：7
> 
> 时间：2012-07-19T09:48:21.247
> 
> 标签：ant, gradle

在 Ant 中，[Maven Ant Tasks](http://maven.apache.org/ant-tasks/examples/pom.html)可用于读取 Maven 属性，如下所示：

```
<artifact:pom id="mypom" file="pom.xml" />
<echo>The version is ${mypom.version}</echo> 
```

Gradle 中是否有“本机”支持来访问现有物理 pom.xml 文件中的 pom 元素，或者我是否需要在我的 .gradle 文件中执行上述 Ant 方法才能使其工作？

这一页：

[http://gradle.org/docs/current/userguide/maven_plugin.html](http://gradle.org/docs/current/userguide/maven_plugin.html)

有关于生成 pom 文件的信息，但这不是我想要的。我试图创建一个相同的 .gradle 文件：

```
 repositories {
      mavenCentral()
    }

    configurations {
        mavenAntTasks
    }

    dependencies {
        mavenAntTasks 'org.apache.maven:maven-ant-tasks:2.1.1'
    }

    task hello << {
      ant.taskdef(resource: 'org/apache/maven/artifact/ant/antlib.xml',
                  uri: 'antlib:org.apache.maven.artifact.ant',
                  classpath: configurations.mavenAntTasks.asPath)

     // what is the gradle syntax for this:
     // <artifact:pom id="mypom" file="maven-project/pom.xml" />
     // its not a property or a task...
     def artifact = groovy.xml.NamespaceBuilder.newInstance(ant,'antlib:org.apache.maven.artifact.ant')
     artifact.pom(id:'mypom', file: 'pom.xml')
     def text = properties['mypom.version']
     println "From pom file: " + text 

    } 
```

我在 build.gradle 文件旁边有一个简单的 pom.xml 文件。但是我在 gradle docs 中找不到关于此任务的相应 ant 调用的任何信息。我看过：

[http://www.gradle.org/docs/current/userguide/ant.html](http://www.gradle.org/docs/current/userguide/ant.html)

有关如何阅读 ant 属性和引用的信息，但是：

```
<artifact:pom id="mypom" file="maven-project/pom.xml" /> 
```

似乎既不是属性也不是参考。我偶然发现了这个页面：

[http://snipplr.com/view/4082/](http://snipplr.com/view/4082/)

使用**NamespaceBuilder**的地方：

```
 def mvn = groovy.xml.NamespaceBuilder.newInstance(ant, 'antlib:org.apache.maven.artifact.ant') 
```

但是当使用这种方法时，我得到：

```
The AbstractTask.getDynamicObjectHelper() method has been deprecated and will be removed in the next version of Gradle. Please use the getAsDynamicObject() method instead.
From pom file: null 
```

经过一番谷歌搜索后，我发现：

[http://issues.gradle.org/browse/GRADLE-2385](http://issues.gradle.org/browse/GRADLE-2385)

这似乎相关，但该属性的值仍然为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:57:20.637

以下代码片段应该可以解决。

```
defaultTasks 'hello'

repositories {
  mavenCentral()
}
configurations {
  mavenAntTasks
}
dependencies {
  mavenAntTasks 'org.apache.maven:maven-ant-tasks:2.1.3'
}

task hello << {
  ant.taskdef(
    resource: 'org/apache/maven/artifact/ant/antlib.xml',
    uri: 'antlib:org.apache.maven.artifact.ant',
    classpath: configurations.mavenAntTasks.asPath)

  ant.'antlib:org.apache.maven.artifact.ant:pom'(id:'mypom', file:'pom.xml')
  println ant.references['mypom'].version
} 
```

我认为通过 groovy xmlslurper 读取 pom 文件更为直接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:01:27.527

Gradle 不提供解析 POM 文件的原生支持，但 Groovy 的[XmlSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)使 XML 解析变得简单方便。我可能更喜欢 Ant 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T08:23:38.240

你有没有尝试过

[http://www.gradle.org/docs/1.6/userguide/build_setup_plugin.html](http://www.gradle.org/docs/1.6/userguide/build_setup_plugin.html)

这基本上将您的 Maven 项目转换为 gradle。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-13T10:30:34.613

请让我知道以下 pom.xml 内容的 build.gradle 文件的条目：

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.19.1</version>
                <configuration>
                    <additionalClasspathElements>
                        <additionalClasspathElement>resources</additionalClasspathElement>
                    </additionalClasspathElements>
                    <forkCount>5</forkCount>
                    <reuseForks>true</reuseForks>
                    <includes>
                        <include>**/*IT.java</include>
                    </includes>
                    <runOrder>alphabetical</runOrder>
                    <argLine>-Duser.language=en</argLine>
                    <argLine>-Xmx512m</argLine>
                    <argLine>-XX:MaxPermSize=256m</argLine>
                    <argLine>-Dfile.encoding=UTF-8</argLine>
                    <systemPropertyVariables>
                        <!--<cucumber.options>&#45;&#45;tags @example</cucumber.options>-->
                    </systemPropertyVariables>
                </configuration>
                <executions>
                    <execution>
                        <id>failsafe-integration-test</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>integration-test</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>com.github.temyers</groupId>
                <artifactId>cucumber-jvm-parallel-plugin</artifactId>
                <version>4.2.0</version>
                <executions>
                    <execution>
                        <id>generateRunners</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>generateRunners</goal>
                        </goals>
                        <configuration>
                            <!-- Mandatory -->
                            <glue>com.cucumber.stepdefinitions</glue>
                            <strict>true</strict>
                            <monochrome>true</monochrome>
                             <!-- These are the default values -->
                            <outputDirectory>${project.build.directory}/generated-test-sources/cucumber</outputDirectory>
                            <featuresDirectory>src/test/resources/features/</featuresDirectory>
                            <cucumberOutputDir>target/cucumber-reports</cucumberOutputDir>
                            <format>json</format>
                             <tags>${TestType}</tags>
                            <tags>~@ignore</tags>
                            <customVmTemplate>
                                src/main/resources/cucumber-custom-runner.vm
                            </customVmTemplate>
                          <!--  <filterFeaturesByTags>true</filterFeaturesByTags>-->
                            <namingScheme>pattern</namingScheme>
                            <namingPattern>{f}_{c}IT</namingPattern>
                            <plugins>
                                <plugin>
                                    <name>com.cucumber.listener.ExtentCucumberFormatter</name>
                                    <extension>html</extension>
                                    <outputDirectory>output/</outputDirectory>

                                </plugin>
                            </plugins>
                            <parallelScheme>SCENARIO</parallelScheme>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

# jquery - iOS中网页全屏的启动元素

> ID：11558158
> 
> 赞同：0
> 
> 时间：2012-07-19T09:48:24.090
> 
> 标签：jquery, ios, html, mobile, safari

我希望能够在 iOS 上的 Safari 中启动 div 全屏。我正在使用 jquery 插件 Screenfull 在桌面上实现这一点，它工作正常 - 但在 iOS 上它没有效果。据我所知，webkit 显示全屏属性仅在 HTMLVideoElement DOM 对象上可用。有人有什么想法吗？

# .net - 如何使用 vCloud SDK 获取 VM 的“全名”？

> ID：11558163
> 
> 赞同：1
> 
> 时间：2012-07-19T09:48:41.287
> 
> 标签：.net, vcloud-director-rest-api

我正在使用来自 VMWare 的 vCloud SDK 的 .NET 版本。在我的应用程序中，我想显示当前正在运行的虚拟机列表。为此，我跳过了几个环节来获取 Vapp 对象，然后枚举其子 VM。

然而遗憾的是，除了通过 IP 地址之外，似乎没有其他方法可以识别每个 VM。

有没有办法提取“全名”和描述？

```
vCloudClient cli = new vCloudClient(url, com.vmware.vcloud.sdk.constants.Version.V1_5);
cli.Login(userName,pass);
Organization organisation = Organization.GetOrganizationByReference(cli, cli.GetOrgRefsByName()[orgName]);
Vdc vdc = Vdc.GetVdcByReference(cli,organisation.GetVdcRefByName(vdcName));
ReferenceType vappref = vdc.GetVappRefByName("myVappName");
Vapp vapp = Vapp.GetVappByReference(cli,vappref);
List<VM> vms = vapp.GetChildrenVms();
foreach(VM vm in vms)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:35:27.093

在 SDK 的术语中，every`VM`也是 a `VcloudEntity<>`，它具有`Reference`type 的属性`ReferenceType`。

因此，要获取`VM`的名称（或任何 vCD 对象的名称），您可以使用`vm.Reference.name`.

我想它没有想象的那么直观……当时我花了很长时间才找到它。

# android - 如何使html5与android一起工作

> ID：11558166
> 
> 赞同：2
> 
> 时间：2012-07-19T09:48:54.267
> 
> 标签：android, html

html5 是否适用于 android 2.2 及更高版本？我尝试了一个[youtube 链接](http://www.youtube.com/watch?v=uVqp1zcMfbE)，但它正在使用 js。他们只是添加`<!DOCTYPE html>`了所有然后说是支持html5？我尝试将其他html5编码如下

```
<form action="/newaccount" method=post
  oninput="up2.setCustomValidity(up2.value != up.value ? 'Passwords do not match.' : '')">
<p>
<label for="username">E-mail address:</label>
<input id="username" type=email required name=un>
</p>
<label for="password1">Password:</label>
<input id="password1" type=password required name=up>
<p>
<label for="password2">Confirm password:</label>
<input id="password2" type=password name=up2>
</p>
<input type=submit value="Create account" />
</form> 
```

html5 必须使用 jquery 还是 javascript 然后才能在我的 android 设备 2.3.6 上工作？现在是 html5 完全支持 android 4.0 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:52:09.277

您想探索电话差距。它是一个独立于平台的开发环境，可将使用 HTML5、CSS 和 JS 编写的应用程序转换为可发布的 Android、iPhone、Windows 等应用程序。

[http://phonegap.com/](http://phonegap.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:16:51.210

是的 html5 正在运行 android 2.2 及更高版本。
[android浏览器支持html5](http://mobilehtml5.org/)

您的模拟器可能不支持某些功能。
尝试在设备中运行您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:54:32.857

目前没有浏览器完全支持 HTML5，但有些支持大部分规范。Android 2.2 的内置浏览器确实支持 type=email 规范。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:14:32.103

`<!DOCTYPE html>`仅在制作网页时适用。它将基本的 html 转换为 html5。

Android 2.2 上的 Html5 仅支持：

1.  <!DOCTYPE html>
2.  2D 上下文
3.  文本
4.  元素的选择 - 嵌入自定义不可见数据
5.  动态标记插入
6.  Base64编码和解码
7.  跨文档消息传递
8.  一种字段类型-输入类型=文本

但是，它不支持：

`html5 tokenizer, html tree building, svg in text/html, mathML in text/html,video element, subtitle support, poster image support, MPEG-4, Audio, MP3`

几乎所有字段类型：

```
input type=search
input type=tel
input type=url
input type=email
input type=datetime
input type=date
input type=month
input type=week
input type=time
input type=datetime-local
input type=range
input type=color
input type=checkbox
input type=image
textarea
select
datalist
keygen
output
progress
field validation
form validation
APIs
Spellcheck attribute
Session history
Geolocation
Device Orientation
FileReader API
Local Storage
Access the camera
Full Screen 
```

但谷歌表示它在三明治冰淇淋中表现不错

# javascript - 在 phonegap 中检查文件的目录

> ID：11558167
> 
> 赞同：0
> 
> 时间：2012-07-19T09:48:55.060
> 
> 标签：javascript, cordova

嘿，这篇文章中有 2 个问题，对于有经验的 js 人来说，它们可能很简单 :-)

第一的; `readEntries`当我传递它时，为什么“文件名”在内部未定义？

第二; 为什么目录为空时总是正确的？

这是我的代码：我正在`getPicturepath`使用“women.png”之类的字符串进行调用。

```
function getPicturePath(filename){
    alert(filename); //is correct
    var reader = DATADIR.createReader();
    reader.readEntries(function(entries, filename){
    alert(filename);//is undefined ???
        var doWeHaveIt = function(entries,filename){
            checkForFile(entries,filename)
            };
        if(doWeHaveIt){
            alert('allready have: '+DATADIR.fullPath+filename);

        } else {
            alert('need to download file: '+filename);
        }
    },onError);
}

function checkForFile(entries,filename){
    console.log("The dir has "+entries.length+" entries.");
    if(entries.indexOf(filename)!=-1){
        alert(filename+' allready exists');
        return true;
    } else {
        alert(filename+" doesn't exists");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:45:34.103

```
reader.readEntries(function(entries, filename){ 
```

这是定义*参数* `entries`和的函数`filename`。

例如，此函数可能会执行以下操作：

```
readEntries: function( callback ) {
    // do something, then
    callback( some, datas );
} 
```

如果你只是想`filename`在这个函数中使用，就使用它。像这样：

```
function getPicturePath(filename){
    alert(filename); //is correct
    var reader = DATADIR.createReader();
    reader.readEntries(function(entries){
        alert(filename);// is still correct 
```

第二部分（总是正确的）是因为这个：

```
function hi() {}

if ( hi ) {
    // You're always getting there.
} 
```

我写的*正是*你所做的。我让你猜猜如何纠正:-)

# jquery - 手风琴样式表编辑

> ID：11558169
> 
> 赞同：0
> 
> 时间：2012-07-19T09:48:58.740
> 
> 标签：jquery, css, accordion

我正在为我的网站使用手风琴。给定的手风琴看起来像：

![在此处输入图像描述](../Images/e3448da365e7e66969d001cc995b9824.png)

我想编辑手风琴样式表。我已经激活了许多手风琴插件..现在我没有得到要编辑的样式表..

我希望标题部分大一点..然后标题的字体..

谁能告诉我要编辑哪个文件以反映网站上的更改？或者是否有任何属性/类..可以在样式表中进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:52:02.243

由于您没有提及您正在使用哪个手风琴插件，因此唯一能找出应用了哪些样式表规则的人就是您。

最简单的方法是使用浏览器中的开发人员工具。在 Chrome 中，您可以查看当前应用于元素的样式以及它们源自哪个文件。

右键单击手风琴标题并从菜单中选择元素检查器 - 不确定菜单项在英语中的名称，但它将类似于 Inspect element、Inspect component 或类似的内容。

我敢打赌你也可以在其他浏览器中做同样的事情。

**它在 Chrome 中的样子：**

![它在 Chrome 中的样子](../Images/1af9ef7cf194c742d15209562e2b28f0.png)

例如，您看到`.post-text p`选择器被应用，并且它源自文件`all.css`

**在 Firefox 中：**

![它在 Firefox 中的外观](../Images/7a361661792c132a0abfd67a07569b83.png)

# javascript - 如何为 Class 实现 setOptions 方法？错误：TypeError：this.setOptions 不是函数

> ID：11558172
> 
> 赞同：0
> 
> 时间：2012-07-19T09:49:07.977
> 
> 标签：javascript

我收到错误 js 错误 Error: TypeError: this.setOptions is not a function, 我已经设置了 Implements: [Options],

```
var SessionKeeperWarning = new Class({
    Implements: [Options],
    options:{
        messagetype:'js',
        timeout:0,
        warning:0,
        strings:{},
        dimension:{'x':400,'y':300},
        keepalivelight:false,
        path:''
    },
    timer:false,
    expired:false,
    initialize: function(options) { 
        alert("Here");
        this.setOptions(options);
        this.setTimer();
    }, 
```

# qt - 如何制作一个 Qt 对话框来处理关键事件而不是其所有子小部件？

> ID：11558173
> 
> 赞同：1
> 
> 时间：2012-07-19T09:49:08.993
> 
> 标签：qt, keypress, qt4.7, qkeyevent

我有一个对话框继承QDialog。该对话框有许多小部件，包括Qbuttons、QLabel、QGraphicsView等。许多小部件如按钮可以在获得焦点时处理SPACE按键事件。现在我不希望任何子小部件处理它，而是让主对话框来处理。由于主对话框中有很多小部件，所以我没有为它们安装事件过滤器，而是为 qApp 安装。

代码如下：

```
QApplication app(argc, 0);
MyDialog *pDlg = new MyDialog(...);
qApp->installEventFilter(pDlg);
app.exec(); 
```

和主对话框的事件过滤器：

```
bool MyDialog::eventFilter(QObject *obj, QEvent *e)
{
    if(e->type() == QEvent::KeyPress)
    {
        QKeyEvent *ke = static_cast<QKeyEvent*>(e);
        if (ke->key == Qt::Key_Space && !ke->isAutoRepeat())
        {
            // do my things in the main dialog
            return true;
        }
    }
    return qApp->eventFilter(watched, event);
} 
```

不幸的是，使用这段代码后，主对话框的布局很奇怪，似乎有些小部件不记得他们的大小政策。也许一些 Qt 调整大小或重绘事件未处理？谁能告诉我如何在主对话框中捕捉关键事件，但不影响其他功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:01:24.230

基本上，如果您在 Qt 中开发基于对话框的 App，则默认情况下，按键事件由主对话框类捕获，前提是您在主类中定义了 keypressevent。

编辑`postevent()`用于此目的

在您的孩子小部件按键事件中

```
void childwdgt::keyPressEvent(QKeyEvent *e)
{
if (e->type() == QEvent::KeyPress)
{
    {
        QKeyEvent* newEvent = new QKeyEvent(QEvent::KeyPress,e->key(), e->modifiers ());
        qApp->postEvent (yourParentWdgt, newEvent, 0);
    }
} 
```

同样，您也可以处理其他类型的键事件。

# ios - 验证返回码：20（无法获取本地颁发者证书）

> ID：11558177
> 
> 赞同：7
> 
> 时间：2012-07-19T09:49:28.350
> 
> 标签：ios, ssl, certificate

我有一个类似的问题：[生产环境中的 Apple 推送通知：无法获取本地颁发者证书](https://stackoverflow.com/questions/11500684/apple-push-notification-in-production-environment-unable-to-get-local-issuer-c) ，但在我的本地计算机中。我遵循了本教程：[http](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12) ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12但在这一步

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert PushChatCert.pem -key PushChatKey.pem 
```

它说：

> （很多数字和字母）验证返回码：20（无法获得本地颁发者证书）

问题是什么？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T18:52:25.350

问题是您使用的是用于开发的“沙盒”APNS 服务器。

为了测试生产证书，您必须连接到生产 APNS 服务器。您可以使用以下地址：

`gateway.push.apple.com:2195`代替`gateway.sandbox.push.apple.com:2195`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-13T01:12:40.633

这*不是*问题。实际上，这是确认您的证书有效。如果它不起作用，你会得到这样的东西：

```
unable to load client certificate private key file
<XXXXX>:error:<XXXX>:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:evp_enc.c:539:
<XXXXX>:error:<XXXX>:PKCS12 routines:PKCS12_pbe_crypt:pkcs12 cipherfinal error:p12_decr.c:104:
<XXXXX>:error:<XXXX>:PKCS12 routines:PKCS12_item_decrypt_d2i:pkcs12 pbe crypt error:p12_decr.c:130:
<XXXXX>:error:<XXXX>:PEM routines:PEM_READ_BIO_PRIVATEKEY:ASN1 lib:pem_pkey.c:132: 
```

有关示例，请参阅本教程 [http://lessons.runrev.com/s/lessons/m/4069/l/53405-how-do-i-use-push-notifications-with-ios](http://lessons.runrev.com/s/lessons/m/4069/l/53405-how-do-i-use-push-notifications-with-ios)

或者，如果您想从 ray [http://www.raywenderlich.com/forums/viewtopic.php?t=380&p=7734听到它](http://www.raywenderlich.com/forums/viewtopic.php?t=380&p=7734)

这里有一个解释：[OpenSSL：无法验证 Experian URL 的第一个证书](https://stackoverflow.com/questions/7587851/openssl-unable-to-verify-the-first-certificate-for-experian-url)

但本质上，如果您使用支持证书发现的客户端，证书将起作用，并且您不需要 openssl 来工作，只是为了确认您的证书正确，并且您已经做到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T12:29:47.080

也许您正在使用开发证书，您需要使用苹果开发 IOS 推送服务证书，并且您需要从该证书创建 .p12，而不是从开发证书。

# blackberry - 换行自定义列表字段的文本

> ID：11558179
> 
> 赞同：0
> 
> 时间：2012-07-19T09:49:30.753
> 
> 标签：blackberry

我需要制作新闻列表，所以我用一个拇指和两个文本实现了自定义列表字段，它用对象绘制。一切都很好，给了我预期的结果，但是**文本换行**`graphics`有一些问题我基本上是 android 开发人员在那里是文件允许自动设置文本文件，但在这种情况下，第二个文本绑定一个文本。我[从这里推荐了客户列表字段](http://mobibug.blogspot.in/2011/08/custom-listfield-in-blackberry.html)**`wrap content`**

 **这是屏幕::

![在此处输入图像描述](../Images/c2d8cff4c88e278bf10a735a1a818384.png)

**代码：：**

```
public class CustomListField extends ListField implements ListFieldCallback {

    private Vector _listData;

    private int _MAX_ROW_HEIGHT = 80;

    public CustomListField(Vector data) {

        _listData = data;

        setSize(_listData.size());

        setSearchable(true);

        setCallback(this);

        setRowHeight(_MAX_ROW_HEIGHT);

    }

    protected void drawFocus(Graphics graphics, boolean on) {

        XYRect rect = new XYRect();

        graphics.setGlobalAlpha(150);

        graphics.setColor(Color.BLUE);

        getFocusRect(rect);

        drawHighlightRegion(graphics, HIGHLIGHT_FOCUS, true, rect.x, rect.y,
                rect.width, rect.height);

    }

    public int moveFocus(int amount, int status, int time) {

        this.invalidate(this.getSelectedIndex());

        return super.moveFocus(amount, status, time);

    }

    public void onFocus(int direction) {

        super.onFocus(direction);

    }

    protected void onUnFocus() {

        this.invalidate(this.getSelectedIndex());

    }

    public void refresh() {

        this.getManager().invalidate();

    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int w) {

        ListRander listRander = (ListRander) _listData.elementAt(index);

        graphics.setGlobalAlpha(255);

        graphics.setFont(Font.getDefault().getFontFamily().getFont(Font.PLAIN,
                24));

        final int margin = 5;

        final Bitmap thumb = listRander.getListThumb();

        final String listHeading = listRander.getListTitle();

        final String listDesc = listRander.getListDesc();

        final String listDesc2 = listRander.getListDesc2();

        final Bitmap nevBar = listRander.getNavBar();

        // list border

        graphics.setColor(Color.GRAY);

        graphics.drawRect(0, y, w, _MAX_ROW_HEIGHT);

        // thumbnail border & thumbnail image

        graphics.setColor(Color.BLACK);

        graphics.drawRoundRect(margin - 2, y + margin - 2,
                thumb.getWidth() + 2, thumb.getHeight() + 2, 5, 5);

        graphics.drawBitmap(margin, y + margin, thumb.getWidth(), thumb
                .getHeight(), thumb, 0, 0);

        // drawing texts

        //graphics.setFont(FontGroup.fontBold);

        graphics.drawText(listHeading, 2 * margin + thumb.getWidth(), y
                + margin);

        graphics.setColor(Color.GRAY);

        //graphics.setFont(FontGroup.smallFont);

        graphics.drawText(listDesc, 2 * margin + thumb.getWidth(), y + margin
                + 20);

        graphics.drawText(listDesc2, 2 * margin + thumb.getWidth(), y + margin
                + 32);

        // draw navigation button

        final int navBarPosY = y
                + (_MAX_ROW_HEIGHT / 2 - nevBar.getHeight() / 2);

        final int navBarPosX = Graphics.getScreenWidth() - nevBar.getWidth()
                + margin;

        graphics.drawBitmap(navBarPosX, navBarPosY, nevBar.getWidth(), nevBar
                .getHeight(), nevBar, 0, 0);

    }

    public Object get(ListField listField, int index) {

        String rowString = (String) _listData.elementAt(index);

        return rowString;

    }

    public int indexOfList(ListField listField, String prefix, int start) {

        for (Enumeration e = _listData.elements(); e.hasMoreElements();) {

            String rowString = (String) e.nextElement();

            if (rowString.startsWith(prefix)) {

                return _listData.indexOf(rowString);

            }

        }

        return 0;

    }

    public int getPreferredWidth(ListField listField) {

        return 3 * listField.getRowHeight();
    }
}

/*
 * protected boolean trackwheelClick (int status, int time) {
 * 
 * invalidate(getSelectedIndex());
 * 
 * Dialog.alert(" U have selected :" + getSelectedIndex());
 * 
 * return super.trackwheelClick(status, time);
 * 
 * } 
```

**更新：**

新画面 ::![在此处输入图像描述](../Images/d6867f0f6f9d0b4a16a2ac5383576762.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:52:14.193

您需要以编程方式进行，我们在列表中没有标签字段，因为我们使用图形渲染它。所以我曾经做过一个解决方法，我计算我的自定义文本字体的可用像素数，然后我会用三个句点符号给出多少空间。您可以使用此代码 if ，它可以帮助您，在 drawListRow 方法下使用它

```
String name =(String)ht.get("title");
xTotal= f2.getAdvance(name);
xAvail= Display.getWidth() - <bitmap>.getWidth() - 30;
if(xTotal > xAvail)
{
forLabel= name.length() * xAvail / xTotal ;
    name = name.substring(0, forLabel - 3) + "...";

} 
```

使用名称字符串变量代替 graphics.drawText。**

# python - 如何提高mongo的写入速度？

> ID：11558181
> 
> 赞同：0
> 
> 时间：2012-07-19T09:49:44.837
> 
> 标签：python, mongodb, pymongo, database, nosql

我使用 mongo 和 sys-ng 来保存我的日志

日志大约是 20000 行前秒

我用 mongos 运行 mongo whit 2`shard`和 3`host`

我写了一个python脚本`ipython`

```
In [48]: %time dddd=[qlogdb.insert({'tet':1313232,'test':1232423,'asdasds':'sdadsds'})  for i in range(100000)]
CPU times: user 7.24 s, sys: 2.51 s, total: 9.75 s
Wall time: 10.77 s 
```

我认为它可以从输出日志中写入 10000 行前秒

插入数据时需要提高写入速度`mongo`

我想在插入数据时尝试使用多个进程`mongo`

但我不确定它是否可以提高写入速度；</p>

反正 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:07:08.950

您需要 100,000 次写入/秒，并且您对读取数据没有任何要求，即

*   您不需要数据在某个时间阈值内保持一致。
*   您没有任何可靠性要求，即您不在乎是否会因为 N 个服务器崩溃而丢失数据，并且您不需要编写器知道写入是否成功。

话虽如此，我有两条建议：

1.  [通过使用RAID](http://en.wikipedia.org/wiki/RAID)缓解 I/O 瓶颈，例如 RAID 0。这假设您的负载受 I/O 限制；但是，由于创建所有字典所需的工作，您的基准测试也稍微占用 CPU 资源。

2.  使用批量插入：

    ```
    In [1]: %time return_value = [collection.insert({'tet':1313232,'test':1232423,'asdasds':'sdadsds'})  for i in xrange(100000)]
    CPU times: user 7.00 s, sys: 0.85 s, total: 7.85 s
    Wall time: 7.86 s

    In [2]: %time return_value = [collection.insert({'tet':1313232,'test':1232423,'asdasds':'sdadsds'})  for i in xrange(100000)]
    CPU times: user 6.79 s, sys: 0.84 s, total: 7.63 s
    Wall time: 7.64 s

    In [3]: documents = [{'tet':1313232,'test':1232423,'asdasds':'sdadsds'} for i in xrange(100000)]
    In [10]: %time return_value = collection.insert(documents)
    CPU times: user 0.97 s, sys: 0.03 s, total: 0.99 s
    Wall time: 1.00 s

    In [4]: documents = [{'tet':1313232,'test':1232423,'asdasds':'sdadsds'} for i in xrange(100000)]
    In [10]: %time return_value = collection.insert(documents)
    CPU times: user 0.92 s, sys: 0.04 s, total: 0.96 s
    Wall time: 0.98 s 
    ```

请注意，我将您的`range`电话替换为`xrange`。

当然，如果您也阅读过要求，那么您需要参考[pymongo collection.insert](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.insert)文档中的`safe`和`w`参数。没有免费的午餐之类的东西。

希望这可以帮助！

# php - 在所有模板中注入全局变量

> ID：11558183
> 
> 赞同：1
> 
> 时间：2012-07-19T09:49:50.283
> 
> 标签：php, symfony1, symfony-1.4

我想问一下，是否有可能添加一个全局变量，例如or ，`sf_params`或者`sf_data`是否有可能扩展其中一个？`sf_user``sf_context`

我想在运行时更改一些应用程序参数（在部分、模板和操作中）。现在 sf docs 建议使用类似的东西`app.yml`，但我的问题是，我需要在设置这个参数之前执行一些代码。所以它们需要非常动态地设置，而`app.yml`.

你们中的任何人都对如何将一个新的全局变量或全局对象实现到 symfony 中得到了一些建议，它可以从项目中的几乎任何地方访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:34:52.523

存储配置数据的最佳位置是在`sfConfig`项目的任何部分都可用的对象中。因此，您必须在数据库中查询配置数据并通过`sfConfig::set('variableName', $value)`. 所以：

1.  创建一个静态类，它将查询数据库并填充`sfConfig`对象，
2.  添加一个过滤器，它将调用此类以在任何请求时执行其作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:54:06.127

我同意@olivierw 的解决方案。

对于个人项目，我有一个名为的表`Config`，我使用过滤器加载内容，因此我可以访问项目中的任何位置。

过滤器`lib/filter/configFilter.php`：

```
<?php

class configFilter extends sfFilter
{
  public function execute ($filterChain)
  {
    // get the config
    $configs = Doctrine_Core::getTable('Config')>findAll();

    foreach($configs as $config)
    {
      sfConfig::set('my_config_'.$config->getName(), $config->getContent());
    }

    // execute next filter
    $filterChain->execute();
  }
} 
```

在`apps/frontend/config/filters.yml`：

```
rendering: ~

configFilter:
  class: configFilter

security:  ~ 
```

现在您可以使用以下方式访问任何信息：

```
sfConfig::get('my_config_key'); 
```

`schema.yml`我的桌子`Config`：

```
Config:
  columns:
    name:     { type: string(255) }
    content:  { type: string(1000) } 
```

# javascript - 用于识别特定列的控件的 Javascript

> ID：11558186
> 
> 赞同：0
> 
> 时间：2012-07-19T09:49:56.550
> 
> 标签：javascript

我正在使用以下代码来获取 Grid 的所有控件。

```
var inputs = document.getElementById("ctl00_ContentPlaceHolder1_RadGridLevel4_GridData").getElementsByTagName("input"); 
```

我是否可以单独控制特定列？

# java - java.lang.NullPointerException at getapplicationContext() 启动适配器时

> ID：11558188
> 
> 赞同：6
> 
> 时间：2012-07-19T09:50:02.550
> 
> 标签：java, android, nullpointerexception

在 Android 模拟器上运行项目时，我在 getApplicationContext 遇到 java.lang.NullPointerException 异常。请帮我解决这个问题。

**错误**

```
07-19 15:08:07.811: D/AndroidRuntime(366): Shutting down VM
07-19 15:08:07.811: W/dalvikvm(366): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-19 15:08:07.841: E/AndroidRuntime(366): FATAL EXCEPTION: main
07-19 15:08:07.841: E/AndroidRuntime(366): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.TfsMutualFund/org.TfsMutualFund.loading}: java.lang.NullPointerException
07-19 15:08:07.841: E/AndroidRuntime(366):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
07-19 15:08:07.841: E/AndroidRuntime(366):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

07-19 15:08:07.841: E/AndroidRuntime(366): Caused by: java.lang.NullPointerException
07-19 15:08:07.841: E/AndroidRuntime(366):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
07-19 15:08:07.841: E/AndroidRuntime(366):  at org.TfsMutualFund.loading.<init>(loading.java:23) 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
 package="org.TfsMutualFund">   
<uses-sdk android:targetSdkVersion="8" />

<application android:name=".globalAdapter" android:icon="@drawable/icon" android:label="@string/app_name">

    <activity android:name=".loading"
              android:label="@string/app_name"
              android:theme="@android:style/Theme.NoTitleBar"
              android:configChanges="orientation|keyboard|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".TFSManinActivity"
    android:configChanges="orientation|keyboard|keyboardHidden"/>
</application> 
```

**加载.java**

```
package org.TfsMutualFund;

public class loading extends Activity{
private static ArrayAdapter<String> adapter;
private globalAdapter adpt = ((globalAdapter)getApplicationContext());
private String ServicePath = adpt.getServicePath();
private String ServiceName = adpt.getServiceName();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loading);
 if(isOnline())
    new AsyncLoad().execute();
 else 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T09:53:53.303

之前不要初始化它`OnCreate()`，你不能在那里获得 Context，在`onCreate()`.

```
private globalAdapter adpt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loading);
    adpt  = ((globalAdapter)getApplicationContext());
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:04:24.960

**1.**在onCreate之前不要初始化下面的，让views先得到他们的id

```
private globalAdapter adpt = ((globalAdapter)getApplicationContext());
private String ServicePath = adpt.getServicePath();
private String ServiceName = adpt.getServiceName(); 
```

**2.**声明它们....

```
private globalAdapter adpt;
private String ServicePath;  
private String ServiceName; 
```

**3.**因为当Activity没有形成的时候，你怎么能得到那个Activity的Context，导致你使用的`getApplicationContext()`是获取当前Activity的上下文。

# php - 在字符串中发送 php 标签

> ID：11558195
> 
> 赞同：0
> 
> 时间：2012-07-19T09:50:18.970
> 
> 标签：php, string, file-io

我创建了一个脚本，它从我的数据库中获取名称，并为每个名称创建一个 .php 文件。但是，我想已经用（php）标题填充此文件，因为没有它，诸如 ë é 和 ú 之类的字母将无法正确显示。

到目前为止，我有这个：

```
<?php
// ... 
while($row = mysql_fetch_array($res)){
$file = "Map/" . $row['name'] . ".php";
$fh = fopen("$file", "w+");
if($fh==false){
die("unable to create file");
}
echo "$file created <br/>";
$stringData = "<center><h1>". $row['name'] . "</h1></center>\n
No text available just yet.";
fwrite($fh, $stringData);
}
fclose($fh);
?> 
```

我现在想做的是将以下代码行放在中心标签之前：

```
<?php header('Content-Type: text/html; charset=ISO-8859-15'); ?> 
```

当我使用 ajax 请求（使用 JQuery）从 .php 文件中检索存储的文本时，标题必须在文件中才能显示这些特殊字母。因此我的问题是：我怎样才能将这行代码放在每个文件中，而不是 php 只是执行它？（或者如果这可以更容易地完成，那怎么做？）

### 评论后编辑：

脚本运行后，我想要一个如下所示的文件：

```
<?php header('Content-Type: text/html; charset=ISO-8859-15'); ?>
<center><h1>Chocolate</h1></center>
No text available yet. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:53:29.223

您必须`meta`在 HTML 部分使用标签`head`，它告诉浏览器使用哪种字符编码：

`<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15"/>`

顺便说一句，如果您正在开始一个新项目，请考虑使用 UTF-8 编码。它通常是比 ISO-* 更好的选择，因为它允许使用一种编码的所有 Unicode 字符（全世界的所有字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:56:56.433

在打开文件后立即尝试添加：

```
fwrite($fh, "<?php header('Content-Type: text/html; charset=ISO-8859-15'); ?>\n"); 
```

PHP 足够聪明，`?>`当它出现在字符串文字中时，它知道它不是 PHP 结束标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:59:20.503

请询问您的真实问题；不是关于你认为可能是解决方案的问题。据我了解，这个问题应该读到一些东西：“如何通过 PHP 设置特定的文件编码？”

如果您的输出是 HTML 文件，请按照 Glibnes 的建议使用 META 标记。

如果写入的文件是纯文本，则应将文本转换为 UTF-8 并将`fwrite()`其转换为文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:03:17.597

使用下面的 stringData 而不是上面的

```
$stringData = '<?php header(\'Content-Type: text/html; charset=ISO-8859-15\'); ?><center><h1>'. $row['name'] . "</h1></center>\n
No text available just yet."; 
```

当您在 .php 文件中编写它时。它应该执行头函数。

# clojure - 这个偏函数是闭包吗？

> ID：11558197
> 
> 赞同：6
> 
> 时间：2012-07-19T09:50:35.213
> 
> 标签：clojure, closures

我正在和一个朋友讨论关闭，他认为`(partial + 5)`是关闭。但我认为闭包是一个关闭自由变量的函数，例如

```
(let [a 10]
  (defn func1 [x] (+ x a))
) 
```

然后`func1`是一个闭包。但在这种情况下`5`不是自由变量。那么哪个是正确的答案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T10:11:06.940

`partial`使用闭包来实现偏函数。查看`partial`by using `(source partial)`in repl 的代码，你会发现它使用了闭包。

```
(defn partial
  "Takes a function f and fewer than the normal arguments to f, and
  returns a fn that takes a variable number of additional args. When
  called, the returned function calls f with args + additional args."
  {:added "1.0"}
  ([f arg1]
   (fn [& args] (apply f arg1 args)))
  ([f arg1 arg2]
   (fn [& args] (apply f arg1 arg2 args)))
  ([f arg1 arg2 arg3]
   (fn [& args] (apply f arg1 arg2 arg3 args)))
  ([f arg1 arg2 arg3 & more]
   (fn [& args] (apply f arg1 arg2 arg3 (concat more args))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T20:23:19.123

`(partial + 5)`是一个匿名函数或“lambda”。

匿名函数通常被称为“闭包”，但它是对术语的滥用；请参阅[“'closure' 和 'lambda' 之间的区别是什么？”中的讨论。](https://stackoverflow.com/q/220658/2608009 "“闭包”和“lambda”有什么区别？")

* * *

[¹] 也许是因为在大多数支持它们的流行语言中，闭包和匿名函数是使用相同的语言特性创建的——这使得它们乍一看无法区分。

# java - 将 long[] 转换为 Long[] 的最有效方法

> ID：11558198
> 
> 赞同：2
> 
> 时间：2012-07-19T09:50:40.397
> 
> 标签：java, casting

`long`将类型值数组转换`long[]`为`Long`对象数组的最有效方法是什么`Long[]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:52:52.087

笨办法。

```
Long[] result = new Long[array.length];
for (int i = 0; i < array.length; i++) {
  result[i] = array[i];
} 
```

没有其他更好的方法了。对不起。

（我可以问一下，您为什么需要这样做？如果我们知道您为什么需要这些盒装产品，可能会有更好的选择。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:54:31.710

您应该尝试 Apache commons - [ArrayUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html)。

```
static java.lang.Long[] toObject(long[] array) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:55:19.923

没有`iteration`这个是不可能的。您将明确地将它们包装在`Long`使用中`autoboxing`

# java - 未捕获的语法错误

> ID：11558203
> 
> 赞同：0
> 
> 时间：2012-07-19T09:51:10.657
> 
> 标签：java

我正在使用以下代码进行本地存储。

```
 for(int i=0; i< files.length; i++)
        {
            System.out.println("base = " + files[i].getName() + "\n i=" +i + "\n");

            AudioFile f = AudioFileIO.read(files[i]);
            Tag tag = f.getTag();
            //AudioHeader h = f.getAudioHeader();
            int l = f.getAudioHeader().getTrackLength();
            String s1 = tag.getFirst(FieldKey.ALBUM);
            out.print("writeToStorage("+s1+","+s1+");");

        } 
```

获取未捕获的语法错误：意外的标识符作为错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:53:01.827

我猜你的意思是java而不是javascript？

您意外的标识符在这里是`out.println`您需要`System.`的。

原因是您的代码中没有定义*out 。*您需要使用*System*类中的静态变量来访问它。因此，您为什么使用`System.out`.

Alternatley 您可以将变量 out 设置为等于 System.out 的速记，尽管我不倾向于这样做。但这可以让您切换到不同类型的输出流，而无需大量重构代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:55:32.403

您添加了以下内容吗？

```
import static java.lang.System.out; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:55:37.147

可能您需要在最后一行输出 "s 来包围 s1 值。

"writeToStorage("+s1+","+s1+");"

->

"writeToStorage('"+s1+"','"+s1+"');"

顺便说一句，出于同样的原因，您也必须修复另一行：

"base = " + files[i].getName() + "...

->

"base = '" + 文件[i].getName() + "'...

# c# - 在 OpenFile 对话框中搜索 C#

> ID：11558206
> 
> 赞同：0
> 
> 时间：2012-07-19T09:51:54.883
> 
> 标签：c#, openfiledialog

我在 C# 中使用 OpenFileDialog 打开文件，我想做的是做一些限制。我已经设置了文本文件/.txt 过滤器。

1- 在文件名文本框中，当我按“a”时，它会显示一个包含所有文件（alph.dll、alchol.txt、alman.doc 等）的下拉列表，无论它们具有什么扩展名，都以“a”开头。我只想在下列表中显示 .txt 文件（仅限 alchol.txt）.. 有可能吗？我怎样才能做到这一点 ？？

非常感谢您在这方面的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:57:08.783

您需要做的就是设置`DefaultExt property and Filter property`FileDailog

像这样

```
fileDialog1.DefaultExt = "*.txt"; 
```

和

```
fileDialog1.Filter = "txt files (*.txt)|*.txt" ; 
```

# asp.net - ASP.Net - 将 SQL 查询结果导出到 Excel

> ID：11558209
> 
> 赞同：0
> 
> 时间：2012-07-19T09:52:05.417
> 
> 标签：asp.net, sql, vb.net, excel

我希望将 SQL 查询的结果导出到 Excel，并格式化为模板。

基本上，用户单击数据行，查询针对该特定参数执行，并且用户可以选择保存到 Excel 文件。

1.  如何将此数据插入 Excel 模板。
2.  我可以绕过将 Excel 文件保存到某个位置，以便只提示用户，因此如果取消的文件没有保存？

干杯

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:36:44.887

为此，我建议您在 Excel 工作表后面编写一些 VBA 代码（Alt F11 将带您进入编码窗口）

然后编写一些代码来调用存储过程（以下链接中的 VBA 示例）

[http://support.microsoft.com/kb/185125](http://support.microsoft.com/kb/185125)

获得数据后，将其直接存储到文件中而不是用它填充工作表应该不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:34:14.060

我会使用正常的解决方案将数据从 sql server 中取出并放入 excel（作为行和列），但将返回的数据放在与模板不同的工作表中。

[http://blogs.office.com/b/microsoft-excel/archive/2010/06/07/running-a-sql-stored-procedure-from-excel-no-vba.aspx](http://blogs.office.com/b/microsoft-excel/archive/2010/06/07/running-a-sql-stored-procedure-from-excel-no-vba.aspx)
[http://codebyjoshua.blogspot .com.au/2012/01/get-data-from-sql-server-stored.html](http://codebyjoshua.blogspot.com.au/2012/01/get-data-from-sql-server-stored.html)

一旦您的数据在 excel 中，在模板工作表中，只需使用指向每个数据项的数据表的链接 ('=Sheet2!A6')。

hth mcalex

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:41:55.657

我建议您在运行时根据查询返回的结果而不是 .xls 在 C# 中创建 .csv 文件

.csv 文件可以在 Excel 中打开，所以最后你仍然可以使用 excel 作为应用程序

创建csv文件后，您可以像这样在其中打开excel`System.Diagnostics.Process.Start("yourExcelFile.xls");`

另请参阅此链接，因此我不建议您使用 Office 自动化

> 段落摘自[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757) Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET）的 Microsoft Office 应用程序自动化、DCOM 和 NT 服务），因为当 Office 在此环境中运行时，Office 可能会表现出不稳定的行为和/或死锁。

# database - 一对多关系。单“一”不是实体

> ID：11558214
> 
> 赞同：0
> 
> 时间：2012-07-19T09:52:27.693
> 
> 标签：database, oop, database-design, symfony

在我的项目中，我有以下实体：ProjectCategory 和 Banner

横幅通过 category_id 链接到类别。所以一个类别有几个横幅。

问题是，除了类别之外，我还有单个（当前为单个）页面，我还需要在其中插入横幅。

目前我有几个解决方案：

1.  从类别中取消链接横幅，通过代码检查约束，category_id -1 表示此 cms 页面。很好，但没有检查约束。我们需要约束吗？
2.  从类别中取消链接横幅，创建页面表。页面可以作为类别，也可以作为简单页面。附加表，单页可能会保持单页。
3.  向表中添加参数，例如 is_homepage。将横幅附加到随机类别。可能会出现级联问题。

什么是最好的解决方案？

PS我的工具是symfony2.0和学说

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:10:46.520

可能最简单的解决方案是在横幅中同时具有`category_id`（NULL-able ¹ FK to Category）和（NULL-able FK to Page）。`page_id`您可以允许或限制（通过 CHECK）同一横幅同时属于类别和页面的可能性。

要强制每页（最多）单个横幅，请创建`page_id`一个备用键（UNIQUE 约束）。

有了以上所有内容，您的模型将如下所示：

![在此处输入图像描述](../Images/9800554e72c3241acdaba68b9064e520.png)

```
CHECK (
    (CATEGORY_ID IS NOT NULL AND PAGE_ID IS NULL)
    OR (CATEGORY_ID IS NULL AND PAGE_ID IS NOT NULL)
) 
```

* * *

*¹ DBMS 在检查外键违规时跳过 NULL。*

# jquery - 如果手风琴高度低于最大高度，则删除溢出

> ID：11558218
> 
> 赞同：0
> 
> 时间：2012-07-19T09:52:47.130
> 
> 标签：jquery, html

我使用了一个手风琴插件，修改了 CSS 和 jQuery，现在我想达到这个问题标题中描述的结果。基本上，一个简单的问题，如果内容的高度小于最大高度，如何删除滚动选项卡？

```
.info_inside {
    max-height: 100px;
    overflow-y: scroll;
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:54:30.077

`auto`改为使用`scroll`

```
.info_inside {
    max-height: 100px;
    overflow-y: auto;
} 
```

[w3schools: CSS3 溢出-y 属性](http://www.w3schools.com/cssref/css3_pr_overflow-y.asp)

# css - 应用于 HTML 选择多个不是 3D 背景的 css 是什么？

> ID：11558221
> 
> 赞同：1
> 
> 时间：2012-07-19T09:52:55.483
> 
> 标签：css, html

我想要一个多重的选择元素，使其背景具有纯色但不是 3D。那是什么CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:57:00.393

给它边框样式（如果我理解正确的话）：

```
select { border: 1px solid gray; }​ 
```

[http://jsfiddle.net/PeeHaa/y5kG5/](http://jsfiddle.net/PeeHaa/y5kG5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:58:07.170

这是你想要的吗？

```
select{
    border:solid 1px #000;
} 
```

# extjs - isLoaded 用于 ExtJS 数据存储

> ID：11558222
> 
> 赞同：5
> 
> 时间：2012-07-19T09:52:56.560
> 
> 标签：extjs, extjs4

**这不是一个问题，但也许我可以用该代码帮助其他人。**

因为 ExtJS 商店没有类似 isLoaded() 的东西，所以我覆盖了它。但是我需要一些时间来弄清楚并让它发挥作用。这是代码（在咖啡脚本中）。随意使用它。

通过这样做，您可以对任何商店（以及关联）进行操作：

```
store.isLoaded 
```

如果您想在商店上调用方法但需要加载商店，您可以使用

```
store.invokeWhenLoaded(yourFunction) 
```

代码是自我解释的（我认为:-)）

```
###
Because Ext.data.Store is missing something like 'isLoaded'
this adds the possibility to figure it out.
As a bonus ;-) there is a method called invokeWhenLoaded that you can
pass a function to that will be called once the store is loaded.
###
Ext.data.AbstractStore.override(
  constructor:(config) ->
    # Add additional properties to config
    Ext.apply(config, {
      isLoaded: false
      waitlist: []
    })
    # Call overridden constructor and remember return value
    rslt = @callOverridden(arguments)
    # Add onLoad listener
    @on('load', @onLoad)
    rslt

  # Executes each function in the waitlist and finally clears the waitlist
  processWaitlist:()->
    unless @waitlist.isEmpty()
      fn() for fn in @waitlist
      @waitlist = []

  ###
  Executes fn if the store is loaded or adds it to the waitlist if not.
  The fn will be called as soon the store is loaded
  It will try to load the store as well unless param loadLater is true

  Params:
    fn - the function to call once the store is loaded
  ###
  invokeWhenLoaded:(fn)->
    if @isLoaded 
      fn()
    else
      @waitlist.push(fn)

  ###
  @private event onLoad
  "Fires whenever the store [has read] data from a remote data source."
  ###
  onLoad:()->
    unless @isLoaded
      @isLoaded = true
      @processWaitlist()
) 
```

# iphone - 在 iPhone 中创建简单的折线图

> ID：11558224
> 
> 赞同：4
> 
> 时间：2012-07-19T09:52:59.787
> 
> 标签：iphone, ios, cocoa-touch, graph, linegraph

我想创建一个简单的折线图，如下所示，

![在此处输入图像描述](../Images/5b9b5e2b7d6d725dc92df75cabda7ce1.png)

我用谷歌搜索了一些样本，我得到了看起来太重的 CorePlot。任何人都可以建议我如何创建一种像下面这样的折线图或教程也是最受欢迎的。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:10:22.340

好吧，首先，为什么称这个图很简单？您可以通过沿 X 坐标绘制垂直线来实现。您（可能）有一个包含顶点的数组（显示重量进度），因此您在一个循环中从顶点绘制一条线直到基线，该循环将解析您的所有顶点。这是绘制一条线的代码，为每个顶点调用它：

```
-(void)drawLineFromX:(CGPoint)topPoint{
    UIGraphicsBeginImageContext(instanceToYourImageView.image.size);
    [instanceToYourImageView.image drawInRect:CGRectMake(0, 0, instanceToYourImageView.image.size.width, instanceToYourImageView.image.size.height)]; 
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), topPoint.x, topPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), topPoint.x, topPoint.y + a_value_to_reach_the_base_line);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    [instanceToYourImageView setImage:UIGraphicsGetImageFromCurrentImageContext()];
    UIGraphicsEndImageContext();
} 
```

这里`CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);`是黑色的，但您可以轻松地将其更改为所需的。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:12:47.247

或者你可以使用这个[https://github.com/pyanfield/WSChart](https://github.com/pyanfield/WSChart)

# jquery - jQuery Masonry 插件和动态样式表

> ID：11558226
> 
> 赞同：0
> 
> 时间：2012-07-19T09:53:02.623
> 
> 标签：jquery, jquery-plugins, jquery-masonry

我有一个页面布局，需要根据浏览器大小从 3 列布局减少到 2 列布局。我还使用[jQuery masonry 插件](http://masonry.desandro.com/)来保持页面上的容器网格排列得很好。这一切都适用于窗口调整大小。

我遇到的问题是，如果我以小于 1100px 的大小加载页面，它会使用 jQuery 正确调用“col2.css”样式表，但砌体插件认为它仍然是 3 列布局，直到您手动调整浏览器的大小，所以网格仍处于 col3 宽度并超出容器的大小。

我猜想在 jQuery 选择样式表之后我需要以某种方式调用 masonry 函数，但我不知道该怎么做。

我脑子里有这个

```
<link href="<?=base_url()?>inc/css/col3.css" id="size-stylesheet" rel="stylesheet" type="text/css"  /> 
```

和下面的javascript

```
 $(document).ready(function() {

        function adjustStyle(width) {
            width = parseInt(width);
            if (width < 1100) {
                $("#size-stylesheet").attr("href", "inc/css/col2.css");
            } else {
                $("#size-stylesheet").attr("href", "inc/css/col3.css"); 
            }
        }

        $(function() {
            adjustStyle($(this).width());
            $(window).resize(function() {
                adjustStyle($(this).width());
            });
        });

        //masonry       
        $(function(){
          $('#masonry').masonry({
            itemSelector : '.project',
            columnWidth : 365,
            isAnimated: true
          });
        });

    }); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:25:30.100

首先，根据描述。我认为您最好寻求响应式设计方法，这是一篇好文章：[http](http://www.alistapart.com/articles/responsive-web-design/) ://www.alistapart.com/articles/responsive-web-design/ 。这可以解决您的问题，而无需手动切换 Css。

其次，一个可能的问题是，在加载 col3.css 时，在切换到 col2.css 之前应用了砌体。因此，您必须尽早加载 col2.css，这可以通过将相关代码移出`document.ready`功能来完成。

```
function adjustStyle(width) {
        width = parseInt(width);
        if (width < 1100) {
            $("#size-stylesheet").attr("href", "inc/css/col2.css");
        } else {
            $("#size-stylesheet").attr("href", "inc/css/col3.css"); 
        }
    }
//this runs when the page starts
$(function() {
    adjustStyle($(this).width());
    $(window).resize(function() {
        adjustStyle($(this).width());
    });
});
//this runs when DOM is ready
$(document).ready(function() {
    //masonry       
      $('#masonry').masonry({
        itemSelector : '.project',
        columnWidth : 365,
        isAnimated: true
      });
}); 
```

第三，如果这不能解决问题，您可以随时重新加载砌体以重新排列元素：

```
$('#masonry').masonry('reload'); 
```

# javascript - 在 Ruby / Javascript 中解码带引号的可打印字符串

> ID：11558227
> 
> 赞同：1
> 
> 时间：2012-07-19T09:53:07.330
> 
> 标签：javascript, ruby, regex, encoding

我正在使用 Ruby 邮件库[https://github.com/mikel/mail/](https://github.com/mikel/mail/)

我正在寻找一种解决方案来解码带引号的可打印字符串（使用这个库或原生 Ruby 函数）

我的 Ruby 版本是 ruby​​ 1.9.2p294

来自客户端的任何 Javascript 解决方案也很好。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:28:36.500

您将能够通过以下方式对其进行解码`decodeURIComponent(str.replace(/=/g,'%'))`

***Javascript中的测试代码：***

```
var input = 'Hello! in Korean is: =EC=95=88=EB=85=95=ED=95=98=EC=84=B8=EC=9A=94!';
var output = decodeURIComponent(input.replace(/=/g,'%'));

document.writeln(output); 
```

***输出：***

```
Hello! in Korean is: 안녕하세요! 
```

*[在此处](http://jsfiddle.net/DR85X/)在线尝试此代码。*

# c# - XmlReader 跳过一些块

> ID：11558230
> 
> 赞同：0
> 
> 时间：2012-07-19T09:53:23.983
> 
> 标签：c#, .net, xmlreader, code-inspection

我有一个这样的xml结构：

```
Header
  \-Timeseries (1-N)
        \- Period (1-N)
              \- Interval (1-N) 
```

这是一个大概的例子：

```
<Header>
<Element />
    <Timeseries>
       <Element />
       <Period>
           <Element />
           <Interval>
               <Element />
           </Interval>
       </Period>
    </Timeseries>
</Header> 
```

我希望阅读标题元素，直到我点击 Timeseries，然后是 Timeseries 元素，直到我点击 Period，然后是 Period，直到我点击 Interval，和 Interval，直到我到达 Interval 的末尾。当我完成一个句号时，我正在写所有的间隔。

这个特定的文档有 614 个时间序列，每个时间序列有 1 个周期。

我正在解析它：

```
while (!xmlReader.EOF)
{
    if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "Header")
    {
        while (xmlReader.Name != "Timeseries" && xmlReader.Read())
        {
            // read
        }
    }
    else if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "Timeseries")
    {
        while (xmlReader.Name != "Period" && xmlReader.Read())
        {
            // read
        }           
    }
    else if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "Period")
    {
        while (xmlReader.Name != "Interval" && xmlReader.Read())
        {
            // read
        }
    }
    else if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "Interval")
    {
        while (xmlReader.NodeType != XmlNodeType.EndElement && xmlReader.Read())
        {
            // read
        }
    }
    else if (xmlReader.NodeType == XmlNodeType.EndElement && xmlReader.Name == "Period")
    {
        // write intervals
    }
    else
    {
        xmlReader.Read();
    }
} 
```

似乎只读取了 166/614 个句点。因此，我必须吞噬一些 xml，但无法发现错误。

转储读取表明时间序列 1-166 已正确解析，但不知何故解析在那之后停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:40:20.593

不确定它是否有帮助，但如果速度是一个问题，也许这会稍微快一点？

```
while (!xmlReader.EOF)
{
    switch(xmlReader.NodeType)
    {
        case XmlNodeType.Element:
            switch(xmlReader.Name)
            {
                case "Header":
                    while (xmlReader.Name != "Timeseries" && xmlReader.Read()) // advance to next node
                    {
                        // read
                    }
                    break;
                case "Timeseries":
                    while (xmlReader.Name != "Period" && xmlReader.Read()) // advance to next node
                    {
                        // read
                    }  
                    break;
                case "Period":
                    while (xmlReader.Name != "Interval" && xmlReader.Read()) // advance to next node
                    {
                        // read
                    }
                    break;
                case "Interval":
                    while (xmlReader.NodeType != XmlNodeType.EndElement && xmlReader.Read()) // advance to next node
                    {
                        // read
                    }
                    break;
            }
            break;

        case XmlNodeType.EndElement:
            if(xmlReader.Name == "Period")
            {
                // write intervals
            }
            break;

        default:
            xmlReader.Read(); // advance to next node
            break;
    }
} 
```

从理论上讲，这做了一些比较少的比较，但这可能是一个无关紧要的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:00:05.180

那是因为它永远不会到达“else if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "Timeseries")”或第二个“else if (xmlReader.NodeType == XmlNodeType.EndElement && xmlReader.Name == "Period")" 部分代码，因为这些条件被早期的 if 捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:00:50.860

你这里有类型吗？if 语句是“Timeseries”，但 while 语句是“Period”

```
else if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.Name == "Timeseries")
    {
        while (xmlReader.Name != "Period" && xmlReader.Read())
        {
            // read
        }           
    } 
```

你在下面有另一个块做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:27:16.387

显然，我在测试中计算了错误的总时间序列。原始文档也有 166 个时间序列。

# c# - WCF REST 服务 (JSON) 并首先将我的模型数据与实体框架数据库一起使用

> ID：11558234
> 
> 赞同：0
> 
> 时间：2012-07-19T09:53:27.630
> 
> 标签：c#, .net, wcf, entity-framework, rest

另一个相当大的标题..

首先是一些基本信息：使用 .NET 4 / EF 4.x / visual studio 2010 sp1。

我有一个基于 WCF REST 的服务，它使用 JSON 作为数据传输。[我已经使用了来自 Steve Mitchelotti http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and](http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and-no-config.aspx)的示例（当然还有其他人对此进行了描述）[-no-config.aspx](http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and-no-config.aspx)

我有一个非常基本的模型/类如下：

```
public class DiaryEvent
{ 
    public Int64 ID { get; set; }
    public Int64 CalendarResourceID { get; set; }
    public string Subject { get; set; }
    public string Location { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
    public string Description { get; set; }
    public string Colour { get; set; }
    public string AllDay { get; set; }
} 
```

现在，再次以 Steve 的最小 WCF/REST 示例为例，我有一个定义方法/数据服务合同的接口，如下所示：

[ServiceContract] interface IDiaryService { [OperationContract] //List GetEvents(); 字符串 GetEvents();

```
[OperationContract]
DiaryEvent GetEvent(string id);

[OperationContract]
void InsertEvent(DiaryEvent NewDiary);

[OperationContract]
string UpdateEvent(string id, DiaryEvent UpdatedEventData); 
```

}

我想我也可以将其他 WebGet/WebInvoke 装饰内容添加到界面中，但现在看起来就是这样。

然后到实际的服务代码，现在我使用一个基本的 list<> 来管道 getevents 方法上的一些测试数据，如下所示：

```
WebGet(UriTemplate = "GetEvents", ResponseFormat=WebMessageFormat.Json)
public DiaryEvent GetEvents()
{
    List<DiaryEvent> EventList = new List<DiaryEvent>();
    EventList.Add(new DiaryEvent { AllDay = "false", ID = 1, CalendarResourceID = 1, Start = new DateTime(2012, 07, 18, 15, 0, 0), End = new DateTime(2012, 07, 18, 17, 0, 0), Location = "Golf Club 1", Colour = "#FEDEFF", Description = "Event 1 Description", Subject = "Event 1" });
    EventList.Add(new DiaryEvent { AllDay = "false", ID = 2, CalendarResourceID = 2, Start = new DateTime(2012, 07, 19, 15, 0, 0), End = new DateTime(2012, 07, 18, 17, 0, 0), Location = "Golf Club 1", Colour = "#FEDEFF", Description = "Event 2 Description", Subject = "Event 2" });
    EventList.Add(new DiaryEvent { AllDay = "false", ID = 3, CalendarResourceID = 3, Start = new DateTime(2012, 07, 20, 15, 0, 0), End = new DateTime(2012, 07, 18, 17, 0, 0), Location = "Golf Club 1", Colour = "#FEDEFF", Description = "Event 3 Description", Subject = "Event 3" });

    return EventList;
    //return JsonConvert.SerializeObject(EventList);
} 
```

（请注意 stackoverflow 在装饰格式周围的 [ ] 有问题！）

显然，上面是一个非常基本的示例，用于将一些 JSON 数据返回给客户端。

我的意思是我想使用 EF 4.x 来连接我的数据库（表已经创建，所以我首先选择数据库..）。我只需要一些指导，如何最好地编写连接代码来填充我的 DiaryEvents 模型与该 EF 数据之间的关系？

如果有人可以为我指出一些示例/想法的正确方向吗？

非常感激！大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:43:39.813

我认为你应该从这个代码项目示例开始。

[http://www.codeproject.com/Articles/127395/Implementing-a-WCF-Service-with-Entity-Framework](http://www.codeproject.com/Articles/127395/Implementing-a-WCF-Service-with-Entity-Framework)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-05T14:45:59.420

```
ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [System.ServiceModel.Web.WebInvoke(Method = "GET",ResponseFormat=System.ServiceModel.Web.WebMessageFormat.Xml, BodyStyle =System.ServiceModel.Web.WebMessageBodyStyle.Wrapped, UriTemplate = "xml/{id}")]
        string XMLData(string id);
        [OperationContract]
        [System.ServiceModel.Web.WebInvoke(Method = "GET", ResponseFormat = System.ServiceModel.Web.WebMessageFormat.Json, BodyStyle = System.ServiceModel.Web.WebMessageBodyStyle.Wrapped, UriTemplate = "json/{id}")]
        string JSONData(string id);
    }

public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestService Members
        public string XMLData(string id)
        {
            return "You Request Porduct" + ":"+id;

        }
        public string JSONData(string id)
        {
            return "Yor Request Product" +":"+ id;
        }
        #endregion
    } 
```

# c++ - 在提供 JSON 数据的 C++/Qt（充当服务器）中创建简单的 WebService

> ID：11558237
> 
> 赞同：17
> 
> 时间：2012-07-19T09:53:30.673
> 
> 标签：c++, json, web-services, qt

我需要创建一个**简单的 Web 服务**（作为“服务器”）。目标是提供一些我在 Qt / C++ 应用程序中读取的数据作为[JSON](http://en.wikipedia.org/wiki/JSON)数据。基本上，浏览器中的 JavaScript 应用程序应从 Qt 应用程序中读取其数据。它通常是单用户场景，因此用户在她的浏览器中运行 Google Maps 应用程序，而其他数据来自 Qt 应用程序。

到目前为止，我已经找到了这些库：

1.  Qxt：[http](http://libqxt.bitbucket.org/doc/0.6/index.html) ://libqxt.bitbucket.org/doc/0.6/index.html但作为 C++/Qt 的新手，我错过了一些例子。补充：我在[这里找到了一个例子](https://sites.google.com/a/embeddedlab.org/community/technical-articles/qt/qt-posts/howtocreateasimplewebserviceusingqtandlibqxt)
2.  gSoap：[http](http://www.cs.fsu.edu/~engelen/soap.html) ://www.cs.fsu.edu/~engelen/soap.html有更多示例和文档，而且似乎也支持 JSON
3.  KD SOAP：[http](http://www.kdab.com/kdab-products/kd-soap/) : //www.kdab.com/kdab-products/kd-soap/ 据我所知没有示例，文档在[这里](http://docs.kdab.com/kdsoap/1.2.0/index.html)
4.  Qt 本身具有特色，但更多的是充当客户端：http: [//qt-project.org/videos/watch/qt-networking-web-services](http://qt-project.org/videos/watch/qt-networking-web-services)

检查 SO 基本上给了我到上述库的链接

1.  [带有 Qt 的 webservice](https://stackoverflow.com/questions/3315411/webservice-with-qt)示例，我并没有真正得到。
2.  [如何使用 Qt 创建 Web 服务](https://stackoverflow.com/questions/3078486/how-to-create-a-webservice-by-qt?rq=1)

所以基本上我确实有**以下问题**：

1.  你会使用哪个库？我想让它尽可能简单，并且**需要一个例子**。
2.  除了 WebService 之外，还有另一种（简单！）方法可以将 JSON 数据提供给 JavaScript 网页吗？

-- 编辑，备注： ---

需要是应用程序固有的。不能安装 Web 服务器，也不能使用额外的运行时间。用户只需运行应用程序。也许 Qt WebKit 可能是一种方法......

-- 编辑 2 --

目前正在检查 SO“ [Qt HTTP Server？](https://stackoverflow.com/questions/3122508/qt-http-server) ”的微型 Web 服务器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T16:33:53.027

在我的测试中，目前我正在使用 QtWebApp：[http](http://stefanfrings.de/qtwebapp/index-en.html) ://stefanfrings.de/qtwebapp/index-en.html这是编辑 2 的答案之一（[Qt HTTP Server？](https://stackoverflow.com/questions/3122508/qt-http-server)）

Stefan 的小型 WebServer 有一些记录良好的代码，用“Qt C++”编写并且易于使用，特别是如果您已经使用过 servlet。因为它可以很容易地集成到我的 Qt 项目中，所以我最终会使用一个内部 WebServer。

我的 JSON 测试中的一些演示代码，显示生成 JSON 内容基本上是创建一个`QString`.

```
void WebServiceController::service(HttpRequest& request, HttpResponse& response) {
// set some headers
response.setHeader("Content-Type", "application/json; charset=ISO-8859-1");
response.setCookie(HttpCookie("wsTest","CreateDummyPerson",600));

QString dp = WebServiceController::getDummyPerson();
QByteArray ba = dp.toLocal8Bit();
const char *baChar = ba.data();
response.write(ba);
} 
```

如果有人有与其他库共享的简单示例，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-15T17:37:50.543

```
QByteArray ba = dp.toLocal8Bit();
const char *baChar = ba.data(); 
```

您不需要将转换`QByteArray`为 char 数组。`Response.write()`也可以用 a 调用`QByteArray`。

顺便说一句：是从转换为 char 数组`qPrintable(dp)`的快捷方式。`QString`

# java - 并非所有异常都映射到 SimpleMappingExceptionResolver 中的 resolveException

> ID：11558240
> 
> 赞同：4
> 
> 时间：2012-07-19T09:53:37.377
> 
> 标签：java, spring, spring-mvc

我正在重写`resolveException`以`SimpleMappingExceptionResolver`发送带有堆栈跟踪的电子邮件，该堆栈跟踪适用于 500 错误但 400 错误不会到达此方法。（没有要发送的堆栈跟踪，但我仍然想发送一封电子邮件并显示一个不错的错误页面。）

有没有办法做到这一点，或者我应该只配置我的 web.xml 来处理 400（和类似的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:41:09.320

我想你会发现这个答案很有帮助：

[Spring SimpleMappingExceptionResolver 不会进入默认视图](https://stackoverflow.com/questions/2967016/spring-simplemappingexceptionresolver-not-going-to-default-view)

TL;DR Spring ExceptionResolvers 不处理所有异常，只是那些由控制器抛出的异常。当 Spring 无法将您的提交数据转换为映射控制器时，可能会抛出“400 - Bad Request”，并且您的 ExceptionHandler 永远不会看到它抛出的异常。

您的 web.xml 解决方案应该可以正常工作。

# powershell - Powershell 替换从 Select-Object 返回的部分字段

> ID：11558242
> 
> 赞同：1
> 
> 时间：2012-07-19T09:53:51.177
> 
> 标签：powershell

我正在从 Active Directory 中提取字段并将其传送到 .csv 文件中，我的 Select-Object 命令按名称返回字段。我的问题是其中一些字段包含回车和换行信息，我想在将其传递到 .csv*之前将其删除*

例子：

```
Select-Object SamAccountName,displayName,info | ConvertTo-CSV -NoTypeInformation | 
Out-File -Append -FilePath $Filepath -Encoding unicode 
```

如何在将“信息”字段触发到 .csv 之前拦截和修改它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:35:50.440

您可以使用正则表达式删除回车和换行。尝试下一个片段：

```
Select-Object -property SamAccountName, DisplayName, Info |
    % {
        $_.SamAccountName = [regex]::Replace($_.SamAccountName, "(`n|`r)+"," ", "Multiline");
        $_.DisplayName= [regex]::Replace($_.DisplayName, "(`n|`r)+"," ", "Multiline");
        $_.Info = [regex]::Replace($_.Info, "(`n|`r)+"," ", "Multiline");
        return $_;
    } | 
    ConvertTo-CSV -NoTypeInformation | 
    Out-File -Append -FilePath $Filepath -Encoding unicode 
```

# c# - 模拟数据库上下文时如何使用 DefaultIfEmpty？

> ID：11558244
> 
> 赞同：6
> 
> 时间：2012-07-19T09:53:52.890
> 
> 标签：c#, linq, unit-testing, rhino-mocks

如您所见，我编写了以下 linq 查询，它通过将数据连接在一起来创建一个新对象：

```
 var translations = from t in context.Translations
                            join token in context.Tokens on t.Guid equals token.Guid
                            join t2 in context.Translations on new { t.Guid, LanguageCode = "fr" } equals new { t2.Guid, t2.LanguageCode} into j //TODO: fr needs to be replaced by the language of the translators account
                            from j2 in j.DefaultIfEmpty()
                           where t.LanguageCode == String.Empty
                           orderby t.Text
                           select new TranslationView
                                    {
                                        Guid = t.Guid,
                                        LanguageCode = j2.LanguageCode,
                                        SourceText = t.Text,
                                        Translation = j2.Text,
                                        IsNew = j2.Text == null,
                                        Notes = token.Notes,
                                        Required = token.Required,
                                        Type = (Token.TokenType)token.Type, 
                                        Location = (Token.LocationType)token.Location
                                    }; 
```

问题是我现在正在尝试使用 Rhino.Mocks 编写单元测试，它返回错误`Object reference not set to an instance of an object.`

所以我现在的问题是，有没有更好的方法可以编写这个查询？一种在实际情况和单元测试情况下都可以工作的方式？

我尝试在位中传递一个值，`DefaultIfEmpty()`它使它适用于 Mock，但随后主代码失败。

**编辑** 单元测试代码：

```
 [Test]
    public void Build_Translation_List_TwoItems_Context()
    {
        //Arrange: Setup context
        var context = setupContext();

        //Act: Pass the context through
        var result = TranslationHelpers.BuildTranslationList(context, 1);

        //Result
        result.TranslationList.Count.ShouldEqual(2);
        result.PagingInfo.TotalItems.ShouldEqual(2);
    } 
```

设置上下文方法：

```
 public static ITranslationContext setupContext()
    {
        var context = new Mock<ITranslationContext>();
        context.SetupProperty(x => x.Tokens, new UnitTestHelpers.FakeDbSet<Token>
                                                {
                                                    new Token
                                                        {
                                                            DateAdded = DateTime.Now,
                                                            Guid = Guid.Parse("f3099a43-e12d-4ea3-ba06-265fde807f03"),
                                                            LastUpdated = DateTime.Now,
                                                            Location = (short)0,
                                                            Type = (short)0,
                                                            LocationDescription = "Test 1",
                                                            Notes = "Testing 1",
                                                            Required = "Testing"
                                                        },

                                                    new Token
                                                        {
                                                            DateAdded = DateTime.Now,
                                                            Guid = Guid.Parse("7D6937D8-F7E1-4B92-934E-465683874B65"),
                                                            LastUpdated = DateTime.Now,
                                                            Location = (short)0,
                                                            Type = (short)0,
                                                            LocationDescription = "Test 3",
                                                            Notes = "Testing 3",
                                                            Required = "Testing"
                                                        },

                                                });
        context.SetupProperty(x => x.Translations, new UnitTestHelpers.FakeDbSet<Translation>
                                                    {
                                                        new Translation{Guid = Guid.Parse("f3099a43-e12d-4ea3-ba06-265fde807f03"), LanguageCode = String.Empty, Text = "Testing 1"},
                                                        new Translation{Guid = Guid.Parse("f3099a43-e12d-4ea3-ba06-265fde807f03"), LanguageCode = "fr", Text = ""},
                                                        new Translation{Guid = Guid.Parse("7D6937D8-F7E1-4B92-934E-465683874B65"), LanguageCode = String.Empty, Text = "Testing 3"},
                                                        new Translation{Guid = Guid.Parse("7D6937D8-F7E1-4B92-934E-465683874B67"), LanguageCode = "fr", Text = "Testing 4"}

                                                    });
        return context.Object;
    } 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:52:33.050

`DefaultIfEmpty()`不会创建“默认”j2。即使 j2 为空，它也只会获取数据。

它就像一个 SQL`LEFT JOIN`

因此，您必须测试无效性以避免 NRE。

代替

```
LanguageCode = j2.LanguageCode 
```

试着做

```
LanguageCode =j2 != null ? j2.LanguageCode : string.Empty // or null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:37:25.320

将模拟上下文传递给您的方法，LINQ 将完成它的工作。然后验证返回的 TranslationView 对象列表。

以下是您的测试应如下所示：

```
List<Translations> translations = // create translations
List<Tokens> tokens = // create tokens
var context = MockRepository.GenerateStub<IMyContext>();            
context.Stub(c => c.Translations).Return(translations);
context.Stub(c => c.Tokens).Return(tokens);

var foo = new Foo(context);
var views = foo.GetTranslationView();
// verify returned views 
```

# ios - 如何将 IBOutlet 连接到 iOS 中的 textview 控件？

> ID：11558248
> 
> 赞同：1
> 
> 时间：2012-07-19T09:54:08.520
> 
> 标签：ios, uitextview

我真的是 iOS 上的新手，我不知道如何将 UITextView 对象连接到 *.xib 文件上的 textview 控件？有什么方法可以将唯一 ID 设置为 iOS 上的控件？

目前，我已经声明了一个 IBTextView 如下：

HelloViewControler.h 文件：

```
@interface HelloViewController : UIViewController{
   IBOutlet UITextView *txtTextMe;
}
@property (retain,atomic) UITextView *txtTextMe;
- (IBAction)buttonPressed:(id)sender;
@end 
```

HelloViewControler.m：

```
@synthesize txtTextMe;
- (IBAction)buttonPressed:(id)sender{
    txtTextMe.text = @"Button clicked";

} 
```

将字符串更新为 textview 控件的代码：

```
 txtTextMe.text = @"Button clicked"; 
```

没有错误。但是当我运行代码时，字符串“Button Clicked”没有更新到文本视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:18:38.983

按住 CTRL 并单击并从 .xib 中的项目拖动到代码中。这将创建一个 IBOutlet 或 IBAction（您通过弹出窗口选择）并将其链接到 .xib 上的对象。

如果您已经创建了代码，也可以通过左侧检查器完成。

如果您是 iOS 编程和 Xcode 的新手，我强烈建议您查看 Apple 在开发人员门户上的教程。他们有一些优秀的介绍性指南和分步说明。第二个涵盖了故事板的使用，是对故事板、Xcode 和 iOS SDK 的非常好的介绍 - 链接如下。

[你的第二个 iOS 应用：故事板](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:16:21.420

1.  右键单击 NIB 文件中的 textview 控件。应该会出现一个 HUD 样式的菜单。

2.  在“参考插座”下，从“新参考插座”右侧的圆圈拖动到左侧“占位符”部分中的“文件所有者”。当您释放鼠标按钮时，应该会出现另一个弹出菜单。

3.  `txtTextMe`从菜单中挑选。

4.  建造并享受:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:47:53.280

这是我的错。我将 UITextField 拖到 *.xib 文件，但我在代码中声明了 IBTextView。谢谢大家。

# c# - 如何检查我的查询是否在方法 ExecuteNonQuery() 中运行？

> ID：11558255
> 
> 赞同：0
> 
> 时间：2012-07-19T09:54:35.683
> 
> 标签：c#, sql, wcf

我想检查我在方法 ExecuteNonQuery() 中的查询是否正在运行。这是我在 WCF 服务中的代码：

```
 public string Execute(string query){
            string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
            string hasil = "ERROR";
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                conn.Open();
                string cmdStr = String.Format(query);
                SqlCommand command = new SqlCommand(cmdStr, conn);
                command.Connection.Open();
                command.ExecuteNonQuery();

                //I want to check here..
                if (command.ExecuteNonQuery().HasRows) //it doesn't works :(
                {
                    hasil = "SUCCESS \n Row Affected: " + rd.RecordsAffected;

                }
                else
                {
                    hasil = "FAILED \n Row Affected: " + rd.RecordsAffected;
                }
                conn.Close();
            }
            return "Query: "+query+"\n Status: "+hasil;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:03:28.047

`ExecuteNonQuery()`返回一个整数，它将是受您的 sql 语句影响的行的总和。即如果 SSMS 返回：

```
(614 row(s) affected)

(123 row(s) affected) 
```

`ExecuteNonQuery()`将返回 737。

所以你可以使用这样的东西。

```
try
{
    hasil = string.Format("Success \n Rows Affected: {0}", command.ExecuteNonQuery());
}

catch
{
    hasil = "Failed \n Rows Affected: 0";
} 
```

您还应该`using`为 SqlCommand 和 SqlConnection 考虑一个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:23:30.113

您也可以在本地测试 WCF 服务，并且可以确认`ExecuteNonQuery()`正在工作

```
int result = command.ExecuteNonQuery(); 
```

结果将是受 ExecutenonQuery() 影响的行数

# c# - 将字符串值分配给 Enum 类型的属性，该属性具有相应的字符串值作为可枚举的 const C#

> ID：11558256
> 
> 赞同：3
> 
> 时间：2012-07-19T09:54:37.080
> 
> 标签：c#, enums

我有以下枚举：

```
public enum PageIdsOptions
    {
        PageID_News = 1,
        PageID_Signup = 2,
        PageID_AffiliateSignup = 3,
        PageID_Cashier = 4,
        PageID_Promotions = 5
    } 
```

和以下属性：

```
public PageIdsOptions Hint { get; set; } 
```

我收到了一个带有这个值的字符串：

```
string hintValue = "PageID_Signup"; 
```

我想将hintValue的值分配给属性Hint：

```
Hint = hintValue; 
```

这样 Hint 将等于

```
Hint = PageIdsOptions.PageID_Signup; 
```

如何才能做到这一点？任何帮助将不胜感激！谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:57:11.657

使用[Enum.Parse](http://msdn.microsoft.com/en-us/library/essfb559.aspx)方法，*（如果 hintValue 包含任何无效值，这将引发异常）*

```
Hint = (PageIdsOptions) Enum.Parse(typeof(PageIdsOptions), hintValue); 
```

您也可以使用[Enum.TryParse](http://msdn.microsoft.com/en-us/library/dd783499.aspx)，*（如果解析成功与否，这将返回一个布尔值，但不会抛出异常）*

```
PageIdsOptions Hint;

 if (Enum.TryParse(hintValue, out Hint))
    {
         //Parsed successfully
     }
 else
     {
        // Parsing failed
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:59:46.843

```
try
{
    var value = Enum.Parse(typeof(PageIdsOptions), hintValue);
}
catch(ArgumentException e)
{
   //todo
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:04:02.860

怎么样

```
if (!Enum.TryParse(hintValue, out Hint))
{
    // throw an exception because hintValue did not parse.
} 
```

# python - futex_ 状态下的 python subprocess.Popen 块

> ID：11558258
> 
> 赞同：0
> 
> 时间：2012-07-19T09:54:47.783
> 
> 标签：python, multithreading, subprocess

我正在尝试实现一些基本的调度来产生最多 n 个进程。一次打开并等待它们执行。为此，我做了：

```
CHECKING_INTERVAL = 10

class StandAloneClient(object):
    """
    Instead of communicating with a backend cluster, fire locally a new thread.
    """
    max_thread_nr = 4
    thread_pool = []
    pending_operations = Queue.Queue(0)

    class OperationExecutor(threading.Thread):

        def run(self):
            """
            Get the required data from the operation queue and launch the operation.
            """
            while True:
                launch_data = StandAloneClient.pending_operations.get()
                if launch_data != None:
                    operation_id = launch_data[0]
                    user_name_label = launch_data[1]
                    LOGGER.debug("Launching operation " + str(operation_id) + " with name " + str(user_name_label))
                    ## Create a new process for the new launched operation
                    oper = ['python', '-m', 'processRunner', str(operation_id), user_name_label]
                    launched_process = Popen(oper, stdout=PIPE, stdin=PIPE, stderr=PIPE)
#                    launched_process.wait()
#                    while launched_process.poll() is None:
#                        sleep(CHECKING_INTERVAL)
#                        LOGGER.debug("Operation id=%s is still running. Going to sleep for %s seconds."%(operation_id,
#                                                                                                         CHECKING_INTERVAL))
                    LOGGER.debug("===========================================================")
                    LOGGER.debug("Finished operation %s succesfully."%(operation_id,))

    def __init__(self):
        """
        If there are still empty spots create a new executor thread.
        """
        for _ in xrange(self.max_thread_nr - len(self.thread_pool)):
            new_executor = StandAloneClient.OperationExecutor()
            self.thread_pool.append(new_executor)
            new_executor.start()

    @staticmethod
    def execute(operation_id, user_name_label="Unknown"):
        """Start asynchronous operation locally"""
        StandAloneClient.pending_operations.put((operation_id, user_name_label)) 
```

我通过以下方式将操作添加到队列中：

```
StandAloneClient().execute(...) 
```

现在我已经评论了我认为可能由于某种原因阻塞线程的部分。但即便如此，似乎没有一个孩子产生过。执行一直完成到最后，我检查了日志并完成了直到最后`processRunner.py`需要做的所有事情，但是如果我这样做，`ps -el|grep python`我仍然会看到所有进程都产生了：

```
 0 S  1000   755     1  5  80   0 - 548314 poll_s pts/0   00:00:13 python
0 S  1000  1198   755  4  80   0 - 280172 futex_ pts/0   00:00:09 python
0 S  1000  1201   755  4  80   0 - 280176 futex_ pts/0   00:00:09 python
0 S  1000  1206   755  4  80   0 - 280230 futex_ pts/0   00:00:09 python
0 S  1000  1215   755  4  80   0 - 280198 futex_ pts/0   00:00:09 python
0 S  1000  1216   755  4  80   0 - 281669 futex_ pts/0   00:00:09 python
0 S  1000  1221   755  4  80   0 - 280201 futex_ pts/0   00:00:09 python
0 S  1000  1231   755  4  80   0 - 281668 futex_ pts/0   00:00:09 python
0 S  1000  1240   755  4  80   0 - 280229 futex_ pts/0   00:00:09 python
0 S  1000  1257   755  4  80   0 - 280201 futex_ pts/0   00:00:09 python 
```

我正在使用 Python 2.7.2 的 Fedora 16 机器上尝试这个。任何建议>

问候， 博格丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:33:49.873

Your threads are not daemons. They continue to live after the main thread exited. They are blocked at `pending_operations.get()` forever.

# c# - 如何在 C# 中找到中继器的 div 控件？

> ID：11558260
> 
> 赞同：3
> 
> 时间：2012-07-19T09:54:49.113
> 
> 标签：c#, asp.net

我在中继器中使用这个 div。

```
<div class="view" id="View"> 
```

我想在 asp.net c# 代码中使用这个 div 控件。这是我现在的代码：

```
 HtmlGenericControl h3name = null;
 h3name = (HtmlGenericControl)RepeaterView2.Items[count].FindControl("View");
 h3name.Style.Add("width", CHeight.ToString()); 
```

但我没有得到控制。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-21T09:33:19.570

`HtmlGenericControl`为所有不由特定 .NET Framework 类表示的 HTML 服务器控件元素定义方法、属性和事件。因此，如果它是一个服务器控件，您可以简单地使用：

```
HtmlGenericControl sample= e.Item.FindControl("YOURDIVNAME") as HtmlGenericControl; 
```

并添加`runet="server"`到您的`div`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T09:37:13.510

首先在您的 div 中添加一个 runat 服务器

```
<div class="view" id="View" runat="server"> 
```

现在在中继器的项目绑定事件中找到它

```
HtmlGenericControl sample= e.Item.FindControl("View") as HtmlGenericControl 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T07:40:28.000

你`div`必须有`runat = "server"`属性。

# math - MASH-2 哈希函数

> ID：11558262
> 
> 赞同：1
> 
> 时间：2012-07-19T09:54:57.107
> 
> 标签：math, hash-function, number-theory

我们在一门大学课程中学习了 MASH-2 哈希函数，在考试中我们遇到了仅使用科学计算器计算类似 ((62500)^257)) mod (238194151) 的问题。现在我知道一些关于 a^b (mod n) 的理论，但我上面提出的问题甚至很难手动计算。我认为解决这个问题大约需要 15 分钟。我想知道是否有更快的方法来做到这一点。或者即使有某种方法可以以二进制形式进行（将数字转换为二进制，然后进行一些操作）。我需要能够用科学计算器手动完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-31T19:52:23.537

# jquery - 如何将参数传递给 jquery 绑定事件？

> ID：11558263
> 
> 赞同：2
> 
> 时间：2012-07-19T09:54:56.710
> 
> 标签：jquery, arguments, bind

请你能帮助我，我没有找到解决方案。我有一个带参数的函数，并希望将此函数传递给 jquery 绑定事件：

```
function countChars23 (chars) {
    var thi = $(this);
    var len = $(this).val();
    if (len.length >= chars) {
        len = len.substring(0, 22);
        thi.val(len);

    }
} 
```

调用函数不起作用：

```
$('#name').bind('keyup', countChars23(10)); 
```

这也不起作用：

```
$('#name').bind('keyup', function() {
    countChars23(10);
} 
```

这也不起作用：

```
$('#name').keyup(function() {
    countChars23(10);
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T09:56:57.287

您可以使用该`data`参数`.bind`：

```
$('#name').bind('keyup', {chars: 10}, countChars23); 
```

然后在你的函数中替换声明的参数`event`并将其放在第一行：

```
var chars = event.data.chars; 
```

**编辑**您的第二次和第三次尝试（使用额外的函数包装器）不起作用的原因是因为它们没有`this`正确设置。你必须这样称呼它：

```
$('#name').keyup(function() {
    countChars23.call(this, 10);
} 
```

# swing - 动态着色 jTable 行

> ID：11558269
> 
> 赞同：0
> 
> 时间：2012-07-19T09:55:26.113
> 
> 标签：swing, jtable, tablecellrenderer

在我之前的问题[Coloring jTable row](https://stackoverflow.com/questions/11135695/coloring-jtable-row)的答案中，但现在我不确定这里是否有新问题，将颜色设置为行是否有效。但我想从 for 循环中给出它，这意味着我想为第 i 行设置颜色。我给了我用过的，

```
for(int i=0;i<serialNumber;i++){
  if((jTable1.getValueAt(i,1).toString()).equals(BidNumber)){
   Enumeration<TableColumn> en = jTable1.getColumnModel().getColumns();
    while (en.hasMoreElements()) {
        TableColumn tc = en.nextElement();

        tc.setCellRenderer(new MyTableCellRenderer());
    }
} 
```

它将调用方法 cellrenderer，

```
public class MyTableCellRenderer extends DefaultTableCellRenderer implements TableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setBackground(null);
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

              boolean interestingRow = row ==1;

            if (interestingRow) {
                setBackground(Color.YELLOW);
            }

            return this;
        }

    } 
```

在这里，我试图在第一列值等于 BidNumber 时为该行设置颜色，但在 cellrenderer（此处）中，它设置为 row==1，然后每次条件为真时，第一行将被着色..如何为第 i 行设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:15:00.727

更改`boolean interestingRow = row ==1`以满足您的要求，在哪里`row == n`会产生预期的结果。您必须`n`以某种有意义的方式定义

这可能来自表数据模型或通过其他方式提供

# ios - iOS：检测我的 UIView 何时添加到其他视图中

> ID：11558270
> 
> 赞同：35
> 
> 时间：2012-07-19T09:55:27.017
> 
> 标签：ios, uiview, superview

```
CustomView *customView = [...];
[self.view addSubview:customView]; 
```

当我的 CustomView 类被添加到其他视图中或我的超级视图发生变化时，我需要检测它。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-19T10:03:01.043

您可以使用`willMoveToSuperview:`and`didMoveToSuperview`来检测视图何时移动。`layoutSubviews`将在 superview 更改框架时调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-28T11:00:43.477

*   对于 UIView 使用`- (void)didMoveToSuperview`
*   对于 UIViewController 使用`-(void)viewWillAppear:(BOOL)animated`

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-19T09:58:01.673

还要在 addsubview 之前分配 Customview 的 TAG，并通过特定 TAG 进行检测。

# sql-server - 父子关系

> ID：11558277
> 
> 赞同：0
> 
> 时间：2012-07-19T09:55:40.707
> 
> 标签：sql-server

我想设计一个存储家庭成员的数据库，并且可以构造一个查询来查找谁是谁的父亲。总之是父子关系。

这就是我想出的

**家庭**

```
|   id     |      Name    |
---------------------------
|   1      |   Ankit      |
---------------------------
|   2      |   Nishant    |

...... 
```

为了找到儿子和父亲的关系，我创建了另一个表

**父亲**

```
|  father_id    |    Son_id    |
--------------------------------
|   1           |       2      |
-------------------------------
..... 
```

我觉得有人可以指导我以及需要编写什么查询来获得这种关系是不正确的。

提前致谢

编辑

好的，我现在尝试查询，但不知何故我收到错误这就是我正在做的

```
select f.name as father_name, s.name as son_name
from (select family.name from family,father where father.father_id = family.id ) as f Inner Join
(select family.name from family,father where father.son_id = family.id) as s 
on
(family.id = father.father_id and family.id = father.son_id) 
```

错误是

```
Msg 4104, Level 16, State 1, Line 2
The multi-part identifier "family.id" could not be bound.
Msg 4104, Level 16, State 1, Line 2
The multi-part identifier "father.father_id" could not be bound.
Msg 4104, Level 16, State 1, Line 2
The multi-part identifier "family.id" could not be bound.
Msg 4104, Level 16, State 1, Line 2
The multi-part identifier "father.son_id" could not be bound. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:58:43.093

你所拥有的一切都很好，但你可以用一张桌子来做

```
Id   Name      Father
1    Ankit     Null
2    Nishant   1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:58:25.313

你的设计可以工作。它没有任何“错误”。

但还有另一种方式。

您可以在 FAMILY 表中有一个指向父行的 FATHER_ID 列。它是一个引用自身的外键。这样你就不需要单独的表了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:20:05.680

不，没有错。

您可以编写一个连接查询以根据关系表中的 id 连接到自身

```
SELECT dad.name AS fathers_name, son.name AS sons_name
FROM father AS R

INNER JOIN family AS dad ON dad.id = R.father_id
INNER JOIN family AS son ON son.id = R.son_id 
```

编辑：

这是我的 sql server 版本。我有这个工作没有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:13:20.490

您的表格设计是正确的，但是我会重命名表格`Person`并`RelationShip`

```
SELECT
  FamliyFather.name AS FatherName
  , FamliySon.name AS SonName
FROM
  Family AS FamliyFather
  INNER JOIN Father
    ON FamliyFather.id = Father.father_id
  INNER JOIN Family AS FamliySon
    ON Father.son_id = FamliySon.id 
```

如果您需要完整的祖先树，您应该使用 CTE。

# java - Apache Camel JMS 内存泄漏？

> ID：11558283
> 
> 赞同：0
> 
> 时间：2012-07-19T09:56:22.823
> 
> 标签：java, jms, apache-camel

我是使用 Apache camel 的新手，但从我的各种测试中，我意识到使用 JMS 作为队列通道会造成内存泄漏，因为在每条消息消耗后使用的内存并没有减少。

一个简单的例子可以更好地描述它：

```
public static void main(String args[]) throws Exception {
    CamelContext context = new DefaultCamelContext();
    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory("vm://localhost?broker.persistent=false");
    context.addComponent("experimental", JmsComponent.jmsComponentAutoAcknowledge(connectionFactory));
    context.addRoutes(new RouteBuilder() {
        public void configure() {
            from("file://test").to("experimental:queue:test");
        }
    });
    context.addRoutes(new RouteBuilder() {
        public void configure() {
            from("experimental:queue:test").to("stream:out");
        }
    });
    Main main = new Main();
    main.getCamelContexts().add(context);
    main.run();
} 
```

有什么方法可以强制 GC 清理队列或按需刷新其内容？有没有更好的方法来使用骆驼来解决这些问题？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T15:29:48.520

您当前正在使用带有 vm 协议的 activemq，因此它会在您的进程中创建一个代理。您可以尝试使用外部 activemq 代理吗？如果在这种情况下没有内存泄漏，那么问题出在 activemq 中。无论如何，vm协议主要用于测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T18:48:15.097

如果 ActiveMQ 组件有内存泄漏，我会感到惊讶——它会在很久以前就被发现，因为它是一个非常常用的组件。

我会接受 Christian 的建议，实际上使用活动 MQ 而不是 VM，而且，我会将 file://test 端点替换为 direct:test 之类的东西，然后在启动上下文后，创建一个生产者模板并淹没路由带有消息：

```
ProducerTemplate template = context.createProducerTemplate();
long msgNumber = 1;
while (true) {

   template.sendBody("direct:test", "message number " + msgNumber);
   msgNumber++;

} 
```

如果这不会很快崩溃，那么 gc 很可能正在完成它的工作。您可以在探查器中运行它来确定。

# javascript - jQuery-自动完成滚动问题

> ID：11558290
> 
> 赞同：6
> 
> 时间：2012-07-19T09:56:46.200
> 
> 标签：javascript, jquery, ruby-on-rails, autocomplete, jquery-autocomplete

我在我的应用程序中使用[rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)。我遇到了以下问题：如果您在输入字段中输入内容以显示自动完成数据并在此之后滚动页面，则带有自动完成数据的框不会随页面滚动。它保持在相同的位置。

你可以看看我在[这里](http://jsbin.com/otozo4/2)面对的是什么。请注意，此示例不是由我创建的，因此我不确定此处是否使用了相同的 jquery 插件。尽管如此，问题还是差不多的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-03T08:38:28.620

将此添加到CSS

```
 .ui-autocomplete { 
       height: 200px;
       overflow-y: scroll;
       overflow-x: hidden;
     } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T11:15:46.183

可能您缺少自动完成选项中的 appendTo-attribute 。它默认为*body*，但您可能希望将它作为您的容器*div*（如果没有看到您的代码，很难确切地说出来）。

见[文件](http://docs.jquery.com/UI/API/1.8/Autocomplete#options)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-01T08:23:19.697

我知道这很旧，但我只是在我自己的项目中通过在我的项目中将“位置：固定”的 CSS 属性添加到“.ui-autocomplete”来解决这个问题。如果您愿意，请在此处查看：34.212.191.181:3000。

P / s页面是越南语，只需使用导航栏中的搜索框即可：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T10:29:31.397

但是您是否检查过场景，在应用高度和溢出后，结果无法使用键盘向下箭头滚动列表，而键盘向下箭头可以使用鼠标滚动。如果我们使用键盘滚动它，则保持滚动条理想，并使突出显示值遍历整个列表。

# c# - 用户控件中的 ContentPresenter

> ID：11558298
> 
> 赞同：10
> 
> 时间：2012-07-19T09:57:02.660
> 
> 标签：c#, wpf, xaml, contentpresenter

我是 WPF 新手，我正在尝试创建一个包含一些嵌套内容的 UserControl。

```
<my:InformationBox Header="General Information" Width="280">
    <StackPanel>
        <Label>Label1</Label>
        <Label>Label2</Label>
    </StackPanel>
</my:InformationBox> 
```

如您所见，我想将 StackPanel 放入其中。当我阅读一些文章时，我应该将 ContentPresenter 添加到我的 UserControl，所以我这样做了，但我找不到应该绑定到它的 Content 属性的内容。

这是我的用户控件代码

```
<UserControl x:Class="ITMAN.InformationBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="200" d:DesignWidth="280" Name="infoBox" Loaded="infoBox_Loaded">
    <StackPanel Width="{Binding ElementName=infoBox, Path=Width}" HorizontalAlignment="Stretch">
        <Label Content="{Binding ElementName=infoBox, Path=Header}" />
        <Border BorderThickness="0,1,0,0" Padding="10 5" Margin="5 0 5 10" BorderBrush="#B4CEDE">
            <StackPanel>
                <ContentPresenter Content="{Binding Content}" />
                <Label Content="End" />
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl> 
```

我从各种文章中尝试了许多组合，但我找不到任何我想要实现的工作示例。

另一个用户早些时候提出了类似的问题，但给出的答案对我没有帮助：[有没有人有一个带有单个 ContentPresenter 的 UserControl 的简单示例？](https://stackoverflow.com/questions/1586577/does-anyone-have-a-simple-example-of-a-usercontrol-with-a-single-contentpresente)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T10:06:33.777

`ContentPresenter`是一种魔法控制。如果您不向它提供任何东西，它会自动将`Content`,`ContentTemplate`和`ContentTemplateSelector`属性设置`TemplateBinding`为 TemplatedParent。这意味着，您不需要向它提供任何东西，只需

```
<ContentPresenter/> 
```

在您的 UserControl 中，它应该自动使用在您的 UserControl 中找到的相应属性。还要记住，绑定`{Binding Content}`总是引用您的 DataContext，我猜这不是您想要的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-20T08:25:26.130

我通过将自定义样式应用于`GroupBox`. 我在 中创建了 Syle `ResourceDictionary`，如下所示

```
<Style x:Key="InformationBoxStyle" TargetType="GroupBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GroupBox">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Label>
                        <ContentPresenter Margin="4" ContentSource="Header"
                               RecognizesAccessKey="True" />
                    </Label>
                    <Border Grid.Row="1" BorderThickness="0,1,0,0" Padding="10 5"
                               Margin="5 0 5 10" BorderBrush="#B4CEDE">
                        <StackPanel>
                            <ContentPresenter />
                        </StackPanel>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

并将这种风格应用于`GroupBox`

```
<GroupBox Header="General Information" Width="280" Style="{StaticResource InformationBoxStyle}">
    <StackPanel>
        <Label>Label1</Label>
        <Label>Label2</Label>
    </StackPanel>
</GroupBox> 
```

此代码按预期工作

您也可以参考这篇很棒的文章，其中显示了实现它的不同选项：http: [//www.codeproject.com/Articles/82464/How-to-Embed-Arbitrary-Content-in-a-WPF-Control](http://www.codeproject.com/Articles/82464/How-to-Embed-Arbitrary-Content-in-a-WPF-Control) 它也描述了为什么`ContentPresenter`在我的代码中不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-19T18:48:54.053

您需要在您的 UserControl 代码上创建一个依赖属性，例如 InnerContent。

```
 public object InnerContent
    {
        get { return GetValue(InnerContentProperty); }
        set { SetValue(InnerContentProperty, value); }
    }

    public static readonly DependencyProperty InnerContentProperty =
        DependencyProperty.Register("InnerContent", typeof(object), typeof(ConfirmationControl), new PropertyMetadata(null)); 
```

然后，您需要在该 UserControl 的 XAML 端绑定到该 InnerContent。

```
 <ContentControl Content="{Binding InnerContent, ElementName=userControl}" /> 
```

然后，当您使用它而不是直接在 UserControl 中放置内容并覆盖现有内容时，只需将其添加到 InnerContent 部分。

```
 <UserControls:InformationBox>
        <UserControls:InformationBox.InnerContent>
            <TextBlock Text="I'm in the InnerContent" />
        </UserControls:InformationBox.InnerContent>
    </UserControls:InformationBox> 
```

否则，使用模板或样式也一样好，但如果您想打包 UserControl 以供使用而不强迫任何人也引用样式或模板，这可能是您更好的选择之一。

# java - PDF 文本 | ClassCastException - com.lowagie.text.Paragraph 无法转换为 com.lowagie.text.Table

> ID：11558303
> 
> 赞同：0
> 
> 时间：2012-07-19T09:57:13.433
> 
> 标签：java, pdf-generation, itext

我正在使用 com.lowagie.text.xml.SAXiTextHandler 使用 iText（v - 2.1.7）将 XML 转换为 PDF。尽管我可以看到我正确使用了标签，但我收到了以下错误。验证形成的 XML 是有效的，我可以在浏览器中查看它而没有错误。尝试执行 parser.parse(....) 时代码失败。我检查了我编写标签的方式，对我来说看起来不错。我基本上添加了表格标签，其中包含行标签，而行标签又包含单元格标签。单元格标签内部有一个单独的段落标签（或）有时一个段落和一个段落内的块标签。有什么方法可以解决这个问题吗？

*** 从 XML 中删除所有段落标签并重试。它返回相同的错误 - 这是使用的新 XML - [http://pastebin.com/hmyPcGDw](http://pastebin.com/hmyPcGDw) ***

*** 即使是这个简单的 xml 文件现在也会产生相同的异常 - [http://pastebin.com/89U9vybt](http://pastebin.com/89U9vybt) ***

对我来说，这看起来像是 com.lowagie.text.xml.SAXiTextHandler 的问题。有什么帮助吗？

```
java.lang.ClassCastException: com.lowagie.text.Paragraph cannot be cast to com.lowagie.text.Table
        at com.lowagie.text.xml.SAXiTextHandler.handleEndingTags(Unknown Source)
        at com.lowagie.text.xml.SAXiTextHandler.endElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.endNamespaceScope(XMLDTDValidator.java:2054)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleEndElement(XMLDTDValidator.java:2005)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.endElement(XMLDTDValidator.java:879)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:195) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:43:08.980

那是因为您的 xml 标签前后有一些空格（**更准确地说是`<table>`标签**后的空格）。我试过你的例子，我有同样的例外。我将您的 xml 代码复制/粘贴到 eclipse（或 notepad++）中，并对其进行了格式化（删除了所有不需要的空白），然后我再次尝试，问题就解决了！pdf生成良好！

# jakarta-ee - Java EE 服务依赖项

> ID：11558307
> 
> 赞同：0
> 
> 时间：2012-07-19T09:57:18.037
> 
> 标签：jakarta-ee, ejb-3.0

我希望这个问题不要太抽象。这是关于 Java EE 架构或服务设计的。我有两个业务逻辑（为了便于阅读在此进行了简化）：

```
@Stateless
@LocalBean
public class EmailService {

  @EJB
  private SomeBean someBean;
  // ... some other EJBs to acces the DB layer (and using JPA)

  public void sendEmail(String recipient /* some parameters */) {
     // ... some email sending logic here

  }
}

@Stateless
@LocalBean
public class ExecutePaymentService {

  @EJB
  private UserBean userBean;
  // ... some other EJBs to acces the DB layer (and using JPA)

  public void executePayment(int amount, int userId) {
     // ... some payment logic here
     // NEED TO SEND EMAIL HERE
  }
} 
```

我的设计是 JSF 托管 Bean 正在调用上述服务。我的问题是托管 Bean 包含一些逻辑：
- 执行付款
- 如果付款成功发送电子邮件
- 如果不做其他事情

我想在服务 EJB 中有这个逻辑，所以托管 Bean 只收集输入并返回结果。

另一个选项是`ExecutePaymentService`扩展`EmailService`然后调用 sendEmail 的东西。这可能导致一个巨大的继承树能够从任何服务提供任何服务，在长期和大型应用程序中更难维护......由于大多数服务需要注入 EJB 来访问我无法使用的数据库非 EJB 服务....

什么是允许 a 的更好方法`service to call another service`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:18:02.910

您应该问问自己 ExecutePaymentService 是否是电子邮件服务。
也许电子邮件服务只是您需要的功能之一？
为什么不将电子邮件服务注入到 ExecutePaymentService？
我的回答可以应用于其他方式，例如 WebSerivces（可以使用 EJB 实现），
这更像是经典的面向对象设计，而不是真正的 Java 技术设计问题，一旦您了解 ExecutePaymentService 是否在其基础EmailService（我感觉答案是否定的）——
您将了解如何更好地建模 bean。

# c# - Xpath 使用 html 敏捷包返回 null

> ID：11558312
> 
> 赞同：3
> 
> 时间：2012-07-19T09:57:36.367
> 
> 标签：c#, html, parsing, xpath, html-agility-pack

我正在使用 Html Agility Pack 来获取页面上每个产品的信息：

*   [http://www.hobbyking.com/hobbyking/store/_ *57* _191__Planes_ARF_RTF_KIT-All_Models.html](http://www.hobbyking.com/hobbyking/store/__57__191__Planes_ARF_RTF_KIT-All_Models.html)

我的代码是这样，但节点返回 null。我正在使用使用 Google Chrome 找到的 Xpath。

```
private void getDataBtn_Click(object sender, EventArgs e)
    {
        if (URL != null)
        {
            HttpWebRequest request;
            HttpWebResponse response;
            StreamReader sr;

            List<string> Items = new List<string>(50);
            HtmlAgilityPack.HtmlDocument Doc = new HtmlAgilityPack.HtmlDocument();

            request = (HttpWebRequest)WebRequest.Create(URL);
            response = (HttpWebResponse)request.GetResponse();
            sr = new StreamReader(response.GetResponseStream());

            Doc.Load(sr);

            var Name = Doc.DocumentNode.SelectSingleNode("/html/body/table[2]/tbody/tr/td[2]/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]/table/tbody/tr[1]/td[3]/a");
        }
    } 
```

我究竟做错了什么？是否有任何其他工具可以创建与敏捷包兼容的 xpath 表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:49:07.223

因为这个页面没有这个节点。当您通过敏捷包（而不是浏览器）下载它时，页面有以下文本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>HobbyKing Page not found.</title>
</head>

<body>
<img src="http://www.hobbyking.com/hk_logo.gif"><br>
<span style="font-family:Verdana, Arial, Helvetica, sans-serif">
<strong>Page no longer available</strong><br>
It seems you have landed on a page that doesnt exist anymore.<br>
Please update your links to point towards the correct hobbyking.com location;<br>
<a href="http://www.hobbyking.com/hobbyking/store/uh_index.asp">http://www.hobbyking.com/hobbyking/store/uh_index.asp</a><br>
<br>
If you continue to see this message, please email <a href="mailto:support@hobbyking.zendesk.com">support@hobbyking.zendesk.com</a></span>
</body>
</html> 
```

您可以在页面中看到以下句子：
“请更新您的链接以指向正确的 hobbyking.com 位置；
[http://www.hobbyking.com/hobbyking/store/uh_index.asp](http://www.hobbyking.com/hobbyking/store/uh_index.asp) ”

ps你可以在visual-studio的debug中查看。

# vb.net - vb.net中excel的长文件路径

> ID：11558317
> 
> 赞同：0
> 
> 时间：2012-07-19T09:57:45.030
> 
> 标签：vb.net, windows-server-2008, excel-2007

我在 vb.net 中使用 excel 应用程序时遇到问题。

我正在尝试这样的事情： -

```
 Dim lobjExcelApp As New Application

 Dim lstrSourceFilePath As String = "E:\VTL\VTL_Working\Source\Server Module                             Projects\Server Module VTL UnitTesting\TestResults\spfadmin_INSPEXEVTL2K8-1 2012-07-19 14_52_20\Out\..\..\..\..\..\Server Module Projects\Server Module VTL UnitTesting\VTL\Server\Unit Testing\Validation\TestFiles\01 - Tag-Anode Index.xlsx"

 Dim lobjExcelWorkbook As Workbook = lobjExcelApp.Workbooks.Open(lstrSourceFilePath) 
```

文件路径为 248 个字符。

当我打开文件时，Excel 会引发错误。

此问题发生在 Windows Server 2008（64 位）和 Excel 2007（32 位）上

有人可以帮助导致问题的原因吗？

有什么解决方法或解决方案吗？

谢谢

鲁佩什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:03:11.703

你应该避免走*长*路。看看 Jeff Atwood 的博客文章 -[文件系统路径：多长是太长了？](http://www.codinghorror.com/blog/2006/11/filesystem-paths-how-long-is-too-long.html)

# javascript - 表达式 '$.cookie' [undefined] 的结果不是函数

> ID：11558319
> 
> 赞同：1
> 
> 时间：2012-07-19T09:57:53.497
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

大家好，在我的移动应用程序中，在没有 ajax 的情况下在各个页面之间传递变量我正在使用 cookie。我正在设置cookie：

```
 $.cookie("userName", userName, { path: '/' }); 
```

在 js 文件和另一个 html 文件中，我将其访问为：

```
$.cookie('userName'); 
```

但我得到了错误：

```
Result of expression '$.cookie' [undefined] is not a function 
```

我有一个用于 cookie 的 js 文件：`jquery.cookie.js` 它包含以下代码：

```
/*jshint eqnull:true */
/*!
* jQuery Cookie Plugin v1.1
* https://github.com/carhartl/jquery-cookie
*
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function($, document) {

var pluses = /\+/g;
function raw(s) {
    return s;
}
function decoded(s) {
    return decodeURIComponent(s.replace(pluses, ' '));
}

$.cookie = function(key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value == null)) {
        options = $.extend({}, $.cookie.defaults, options);

        if (value == null) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires, t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }

        value = String(value);

        return (document.cookie = [
            encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path    ? '; path=' + options.path : '',
            options.domain  ? '; domain=' + options.domain : '',
            options.secure  ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || $.cookie.defaults || {};
    var decode = options.raw ? raw : decoded;
    var cookies = document.cookie.split('; ');
    for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {
        if (decode(parts.shift()) === key) {
            return decode(parts.join('='));
        }
    }
    return null;
};

  $.cookie.defaults = {};

   })(jQuery, document); 
```

我也在我的html文件中导入了上面的js文件。我也试过`setCookie('userName', 'userName', 1);` 为什么会这样？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:03:29.660

确保您`jquery.cookie.js`的实际包含在内，并且*在*您调用`$.cookie()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:01:51.130

检查你的控制台如果`jquery.cookie.js`加载没有错误。

[您可以在此 Webmasters.SE 问题](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)中找到有关在浏览器中打开控制台的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T10:05:24.650

检查您是否正确导入了 jquery.cookie.js 并在它们准备好时尝试访问 jquery 函数

```
$(function(){

$.cookie('userName');

}) 
```

或者

```
$(document.ready(function(){
$.cookie('userName');

})); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-22T09:09:42.897

我有同样的问题。确保在 jquery.cookie.js*之后***没有再次调用 jquery-1.9.0.min.js lib** 。

 *网页通常有主页面和详细页面。也许您在详细页面中再次参考 Jquery 库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-10T11:26:32.357

```
 if (typeof $.cookie("user-popup") == "undefined") {}
```

你可以用这个来检查 Cookie 值是否可用*

# apple-push-notifications - APNS 响应包返回错误的标识符

> ID：11558320
> 
> 赞同：4
> 
> 时间：2012-07-19T09:57:59.450
> 
> 标签：apple-push-notifications

在生产环境下使用 APNS 时出现奇怪的错误。

每当我发送错误通知（例如设备令牌变为无效）时，返回的响应数据包都是正确的，只是标识符比我发送的标识符小 1。但是，在生产时会返回正确的标识符。

例如：我发送了一个 ID 为 108 的通知。但我收到了一个返回的数据包：

```
8 8 0 0 0 107 
```

*   第一个字节总是 8
*   第二个字节是状态码；在这种情况下，意味着设备令牌无效
*   最后 4 个字节是标识符

为方便起见，这里是 Apples 关于该主题的文档。 [http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW4](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW4)

有没有其他人看到这个问题，或者它可能是我做错了什么。

提前谢谢了。

# java - 自定义 docx 文档中的颜色

> ID：11558325
> 
> 赞同：0
> 
> 时间：2012-07-19T09:58:23.723
> 
> 标签：java, ms-word, struts, openxml, docx

我在应用程序中有一个 docx 文件，当用户在表单中选择颜色（2 种颜色）并单击生成时，我想用用户选择的第一种颜色和另一种颜色的背景更新 docx 中的文本。

这可能吗，如果可以，如何实现。我在struts2中的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:01:08.737

您可以使用[docx4j](http://www.docx4java.org)。下面的链接可能很有用：

[http://www.docx4java.org/forums/docx-java-f6/change-font-and-font-size-t864.html](http://www.docx4java.org/forums/docx-java-f6/change-font-and-font-size-t864.html) http://www.docx4java.org/forums/docx-java-f6/parsing -docx-to-change-style-of-individual-words-t435.html [http://www.docx4java.org/forums/docx-java-f6/how-to-set-text-color-t756.html](http://www.docx4java.org/forums/docx-java-f6/how-to-set-text-color-t756.html)

# sql - 递归 SQL 语句 (PostgreSQL 9.1.4)

> ID：11558328
> 
> 赞同：10
> 
> 时间：2012-07-19T09:58:30.020
> 
> 标签：sql, postgresql, recursive-query

PostgreSQL 9.1

**经营情况**

每个月，都会有一批新的帐户分配给特定的流程。每批可以用月份、账户数和账户总余额来描述。该过程的目标是从客户那里收回部分余额。然后每月单独跟踪每个批次（自批次转移到流程后每月回收的金额）。

**目标**

我的目标是预测将来会收回多少。

**数据定义**

```
create table vintage_data (
    granularity date,       /* Month when account entered process*/
    distance_in_months integer, /* Distance in months from date when accounts entered process*/
    entry_accounts integer,     /* Number of accounts that entered process in a given month*/
    entry_amount numeric,       /* Total amount for account that entered process in a given month*/
    recovery_amount numeric     /* Amount recovered in Nth month on accounts that entered process in a given month */
); 
```

**样本数据**

```
insert into vintage_data values('2012-01-31',1,200,100000,1000);
insert into vintage_data values('2012-01-31',2,200,100000,2000);
insert into vintage_data values('2012-01-31',3,200,100000,3000);
insert into vintage_data values('2012-01-31',4,200,100000,3500);
insert into vintage_data values('2012-01-31',5,200,100000,3400);
insert into vintage_data values('2012-01-31',6,200,100000,3300);
insert into vintage_data values('2012-02-28',1,250,150000,1200);
insert into vintage_data values('2012-02-28',2,250,150000,1600);
insert into vintage_data values('2012-02-28',3,250,150000,1800);
insert into vintage_data values('2012-02-28',4,250,150000,1200);
insert into vintage_data values('2012-02-28',5,250,150000,1600);
insert into vintage_data values('2012-03-31',1,200,90000,1300);
insert into vintage_data values('2012-03-31',2,200,90000,1200);
insert into vintage_data values('2012-03-31',3,200,90000,1400);
insert into vintage_data values('2012-03-31',4,200,90000,1000);
insert into vintage_data values('2012-04-30',1,300,180000,1600);
insert into vintage_data values('2012-04-30',2,300,180000,1500);
insert into vintage_data values('2012-04-30',3,300,180000,4000);
insert into vintage_data values('2012-05-31',1,400,225000,2200);
insert into vintage_data values('2012-05-31',2,400,225000,6000);
insert into vintage_data values('2012-06-30',1,100,60000,1000); 
```

**计算过程**

您可以将数据想象为三角矩阵（要预测 X 值）：

```
distance_in_months                       1      2     3       4      5      6
granularity entry_accounts  entry_amount
2012-01-31  200             100000       1000   2000   3000   3500   3400   3300
2012-02-28  250             150000       1200   1600   1800   1200   1600   (X-1)
2012-03-31  200              90000       1300   1200   1400   1000   (X0)   (X4)
2012-04-30  300             180000       1600   1500   4000   (X1)   (X5)   (X8)
2012-05-31  400             225000       2200   6000   (X2)   (X6)   (X9)   (X11)
2012-06-30  100              60000       1000   (X3)   (X7)   (X10)  (X12   (X13) 
```

**算法**

我的目标是预测所有缺失的点（未来）。为了说明这个过程，这是对点 X1 的计算

1) 使用最多 4 的距离获取前三个月的行总数：

```
2012-01-31  1000+2000+3000+3500=9500 (d4m3)
2012-02-28  1200+1600+1800+1200=5800 (d4m2)
2012-03-31  1300+1200+1400+1000=4900 (d4m1) 
```

2) 使用最多 3 的距离获取前三个月的行总数：

```
2012-01-31  1000+2000+3000=6000 (d3m3)
2012-02-28  1200+1600+1800=4600 (d3m2)
2012-03-31  1300+1200+1400=3800 (d3m1) 
```

3) 计算距离 3 和距离 4 的加权平均跑步率（由 entry_amount 加权）：

```
(d4m3+d4m2+d4m1)/(100000+150000+90000) = (9500+5800+4900)/(100000+150000+90000) = 20200/340000 = 0.0594
(d3m3+d3m2+d3m1)/(100000+150000+90000) = (6000+4600+3800)/(100000+150000+90000) = 14400/340000 = 0.0424 
```

4）计算距离3和距离4之间的变化

```
((d4m3+d4m2+d4m1)/(100000+150000+90000))/((d3m3+d3m2+d3m1)/(100000+150000+90000)) =
= (20200/340000)/(14400/340000) =
= 0.0594/0.0424 = 1.403 (PredictionRateForX1) 
```

5) 使用不超过 3 的距离计算预测月份的行总数：

```
2012-04-30  1600+1500+4000=7100 
```

6) 使用 entry_amount 计算预测月份的费率

```
7100/180000 = 0.0394 
```

7) 计算 X1 的预测速率

```
0.0394 * PredictionRateForX1 = 0.05534 
```

8) 计算 X1 的数量

```
(0.05534-0.0394)*180000 = 2869.2 
```

**问题**

问题是如何使用 SQL 语句计算矩阵的其余部分（从 x-1 到 x13）。很明显，这将需要某种递归算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T16:08:02.017

这是一项艰巨的任务，将其拆分以使其更易于管理。我会把它放在一个 plpgsql 函数中`RETURN TABLE`：

1.  使用交叉表查询为您的“计算过程”矩阵创建一个临时表您需要[`tablefunc`](http://www.postgresql.org/docs/current/interactive/tablefunc.html)为此安装模块。运行（每个数据库一次）：

    ```
    CREATE EXTENSION tablefunc; 
    ```

2.  逐个字段更新临时表。

3.  返回表。

以下演示功能齐全，并使用 PostgreSQL 9.1.4 进行了测试。基于问题中提供的表定义：

```
-- DROP FUNCTION f_forcast();

CREATE OR REPLACE FUNCTION f_forcast()
  RETURNS TABLE (
  granularity date
 ,entry_accounts numeric
 ,entry_amount numeric
 ,d1 numeric
 ,d2 numeric
 ,d3 numeric
 ,d4 numeric
 ,d5 numeric
 ,d6 numeric) AS
$BODY$
BEGIN

--== Create temp table with result of crosstab() ==--

CREATE TEMP TABLE matrix ON COMMIT DROP AS
SELECT *
FROM   crosstab (
        'SELECT granularity, entry_accounts, entry_amount
               ,distance_in_months, recovery_amount
         FROM   vintage_data
         ORDER  BY 1, 2',

        'SELECT DISTINCT distance_in_months
         FROM   vintage_data
         ORDER  BY 1')
AS tbl (
  granularity date
 ,entry_accounts numeric
 ,entry_amount numeric
 ,d1 numeric
 ,d2 numeric
 ,d3 numeric
 ,d4 numeric
 ,d5 numeric
 ,d6 numeric
 );

ANALYZE matrix; -- update statistics to help calculations

--== Calculations ==--

-- I implemented the first calculation for X1 and leave the rest to you.
-- Can probably be generalized in a loop or even a single statement.

UPDATE matrix m
SET    d4 = (
    SELECT (sum(x.d1) + sum(x.d2) + sum(x.d3) + sum(x.d4))
            /(sum(x.d1) + sum(x.d2) + sum(x.d3)) - 1
            -- removed redundant sum(entry_amount) from equation
    FROM  (
        SELECT *
        FROM   matrix a
        WHERE  a.granularity < m.granularity
        ORDER  BY a.granularity DESC
        LIMIT  3
        ) x
    ) * (m.d1 + m.d2 + m.d3)
WHERE m.granularity = '2012-04-30';

--- Next update X2 ..

--== Return results ==--

RETURN QUERY
TABLE  matrix
ORDER  BY 1;

END;
$BODY$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_forcast(); 
```

我已经简化了很多，删除了计算中的一些冗余步骤。
该解决方案采用了多种先进技术。您需要了解如何使用 PostgreSQL 才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:19:58.610

```
 --
        -- rank the dates.
        -- , also fetch the the fields that seem to depend on them.
        -- (this should have been done in the data model)
        --
CREATE VIEW date_rank AS (
        SELECT uniq.granularity,uniq.entry_accounts,uniq.entry_amount
        , row_number() OVER(ORDER BY 0) AS zrank
        FROM ( SELECT DISTINCT granularity, entry_accounts, entry_amount FROM vintage_data)
             AS uniq
        );

-- SELECT * FROM date_rank ORDER BY granularity;
        --
        -- transform to an x*y matrix, avoiding the date key and the slack columns
        --
CREATE VIEW matrix_data AS (
        SELECT vd.distance_in_months AS xxx
        , dr.zrank AS yyy
        , vd.recovery_amount AS val
        FROM vintage_data vd
        JOIN date_rank dr ON dr.granularity = vd.granularity
        );
-- SELECT * FROM matrix_data;

        --
        -- In order to perform the reversed transformation:
        -- make the view insertable.
        -- INSERTS to matrix_data will percolate back into the vintage_data table
        -- (don't try this at home ;-)
        --
CREATE RULE magic_by_the_plasser AS
        ON INSERT TO matrix_data
        DO INSTEAD (
        INSERT INTO vintage_data (granularity,distance_in_months,entry_accounts,entry_amount,recovery_amount)
        SELECT dr.granularity, new.xxx, dr.entry_accounts, dr.entry_amount, new.val
        FROM date_rank dr
        WHERE dr.zrank = new.yyy
                ;
        );

        --
        -- This CTE creates the weights for a Pascal-triangle
        --
-- EXPLAIN -- ANALYZE
WITH RECURSIVE pascal AS (
        WITH empty AS (
                --
                -- "cart" is a cathesian product of X*Y
                -- its function is similar to a "calendar table":
                -- filling in the missing X,Y pairs, making the matrix "square".
                -- (well: rectangular, but in the given case nX==nY)
                --
                WITH cart AS (
                        WITH mmx AS (
                                WITH xx AS ( SELECT MIN(xxx) AS x0 , MAX(xxx) AS x1 FROM matrix_data)
                                SELECT generate_series(xx.x0,xx.x1) AS xxx
                                FROM xx
                                )
                        , mmy AS (
                                WITH yy AS ( SELECT MIN(yyy) AS y0 , MAX(yyy) AS y1 FROM matrix_data)
                                SELECT generate_series(yy.y0,yy.y1) AS yyy
                                FROM yy
                                )
                        SELECT * FROM mmx
                        JOIN mmy ON (1=1) -- Carthesian product here!
                        )
                --
                -- The (x,y) pairs that are not present in the current matrix
                --
                SELECT * FROM cart ca
                WHERE NOT EXISTS (
                        SELECT *
                        FROM matrix_data nx
                        WHERE nx.xxx = ca.xxx
                        AND nx.yyy = ca.yyy
                        )
                )
        SELECT md.yyy AS src_y
                , md.xxx AS src_x
                , md.yyy AS dst_y
                , md.xxx AS dst_x
                -- The filled-in matrix cells have weight 1
                , 1::numeric AS weight
        FROM matrix_data md
        UNION ALL
        SELECT pa.src_y AS src_y
                , pa.src_x AS src_x
                , em.yyy AS dst_y
                , em.xxx AS dst_x
                -- the derived matrix cells inherit weight/2 from both their parents
                , (pa.weight/2) AS weight
        FROM pascal pa
        JOIN empty em
                ON ( em.yyy = pa.dst_y+1 AND em.xxx = pa.dst_x)
                OR ( em.yyy = pa.dst_y AND em.xxx = pa.dst_x+1 )
        )
INSERT INTO matrix_data(yyy,xxx,val)
SELECT pa.dst_y,pa.dst_x
        ,SUM(ma.val*pa.weight)
FROM pascal pa
JOIN matrix_data ma ON pa.src_y = ma.yyy AND pa.src_x = ma.xxx
        -- avoid the filled-in matrix cells (which map to themselves)
WHERE NOT (pa.src_y = pa.dst_y AND pa.src_x = pa.dst_x)
GROUP BY pa.dst_y,pa.dst_x
        ;

        --
        -- This will also get rid of the matrix_data view and the rule.
        --
DROP VIEW date_rank CASCADE;
-- SELECT * FROM matrix_data ;

SELECT * FROM vintage_data ORDER BY granularity, distance_in_months; 
```

结果：

```
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "vintage_data_pkey" for table "vintage_data"
CREATE TABLE
NOTICE:  ALTER TABLE / ADD UNIQUE will create implicit index "mx_xy" for table "vintage_data"
ALTER TABLE
INSERT 0 21
VACUUM
CREATE VIEW
CREATE VIEW
CREATE RULE
INSERT 0 15
NOTICE:  drop cascades to view matrix_data
DROP VIEW
 granularity | distance_in_months | entry_accounts | entry_amount |      recovery_amount      
-------------+--------------------+----------------+--------------+---------------------------
 2012-01-31  |                  1 |            200 |       100000 |                      1000
 2012-01-31  |                  2 |            200 |       100000 |                      2000
 2012-01-31  |                  3 |            200 |       100000 |                      3000
 2012-01-31  |                  4 |            200 |       100000 |                      3500
 2012-01-31  |                  5 |            200 |       100000 |                      3400
 2012-01-31  |                  6 |            200 |       100000 |                      3300
 2012-02-28  |                  1 |            250 |       150000 |                      1200
 2012-02-28  |                  2 |            250 |       150000 |                      1600
 2012-02-28  |                  3 |            250 |       150000 |                      1800
 2012-02-28  |                  4 |            250 |       150000 |                      1200
 2012-02-28  |                  5 |            250 |       150000 |                      1600
 2012-02-28  |                  6 |            250 |       150000 | 2381.25000000000000000000
 2012-03-31  |                  1 |            200 |        90000 |                      1300
 2012-03-31  |                  2 |            200 |        90000 |                      1200
 2012-03-31  |                  3 |            200 |        90000 |                      1400
 2012-03-31  |                  4 |            200 |        90000 |                      1000
 2012-03-31  |                  5 |            200 |        90000 | 2200.00000000000000000000
 2012-03-31  |                  6 |            200 |        90000 | 2750.00000000000000000000
 2012-04-30  |                  1 |            300 |       180000 |                      1600
 2012-04-30  |                  2 |            300 |       180000 |                      1500
 2012-04-30  |                  3 |            300 |       180000 |                      4000
 2012-04-30  |                  4 |            300 |       180000 | 2500.00000000000000000000
 2012-04-30  |                  5 |            300 |       180000 | 2350.00000000000000000000
 2012-04-30  |                  6 |            300 |       180000 | 2550.00000000000000000000
 2012-05-31  |                  1 |            400 |       225000 |                      2200
 2012-05-31  |                  2 |            400 |       225000 |                      6000
 2012-05-31  |                  3 |            400 |       225000 | 5000.00000000000000000000
 2012-05-31  |                  4 |            400 |       225000 | 3750.00000000000000000000
 2012-05-31  |                  5 |            400 |       225000 | 3050.00000000000000000000
 2012-05-31  |                  6 |            400 |       225000 | 2800.00000000000000000000
 2012-06-30  |                  1 |            100 |        60000 |                      1000
 2012-06-30  |                  2 |            100 |        60000 | 3500.00000000000000000000
 2012-06-30  |                  3 |            100 |        60000 | 4250.00000000000000000000
 2012-06-30  |                  4 |            100 |        60000 | 4000.00000000000000000000
 2012-06-30  |                  5 |            100 |        60000 | 3525.00000000000000000000
 2012-06-30  |                  6 |            100 |        60000 | 3162.50000000000000000000
(36 rows) 
```

# javascript - 谷歌地图 api v3 放置标记动画延迟

> ID：11558330
> 
> 赞同：1
> 
> 时间：2012-07-19T09:58:35.190
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我知道这个[Google Maps API v3 从 XML 中删除标记有延迟的问题吗？](https://stackoverflow.com/questions/8576515/google-maps-api-v3-drop-markers-from-xml-with-delay)我跟着它，但我不得不在我的代码中犯了一个错误，这里是：

```
function dropAnim(lat,lng,name) {

    console.log("---- " + lat + " - " + lng);

    var marker = new google.maps.Marker({

        position: new google.maps.LatLng(lat,lng),
        map: map,
        title: name,
        animation: google.maps.Animation.DROP,
        icon: imageCar,

    });

}

var counter = 0;

$.get('http://server.com/methods.php?m=loadPins', function(data) {

dataName = data.name.split(";");
dataLat = data.lat.split(";");
dataLng = data.lng.split(";");

dataLength = dataName.length-1;

for(var i=0;i<dataLength;i++) {

   var lat = dataLat[i];
   var lng = dataLng[i];

   console.log(lat + " - " + lng);

   setTimeout(function() {
      dropAnim(lat,lng,dataName[i]);
   }, counter * 400);

   counter++;
} 

},"json"); 
```

问题是它在完全相同的位置加载了 3 个引脚。dataLat 和 dataLng 加载 3 倍不同，我可以在控制台中看到这一点，但是当我从函数的 insde 中看到控制台中出现的内容时，有 3 个相同的 lat 和 lng（最后一个）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:01:32.037

试试这样：

```
 setTimeout((function(i) {
     return function(){
        dropAnim(dataLat[i],dataLng[i],dataName[i]);
     };
 })(i), counter * 400); 
```

你的问题是，当你的超时回调被调用时，`i`变量已经有了`dataLength`值，因为你的循环已经完成了。

# android - 在 android 应用程序中使用保存在外部存储上的文件

> ID：11558331
> 
> 赞同：2
> 
> 时间：2012-07-19T09:58:37.417
> 
> 标签：android, storage, external, soundpool

在我的 android 应用程序中，用户可以创建 wav 文件。我将它们保存在外部存储的文件夹中。创建后，我想通过 SoundPool 播放它们。但为此，我需要一个 ID，例如 R.raw.sound1 ...

有没有办法在android中做到这一点？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:04:11.017

Android 应用程序的捆绑资源需要 ID。如果你想用 播放外部文件`SoundPool`，你应该使用以下方法之一：

```
public int load (String path, int priority);

public int load (FileDescriptor fd, long offset, long length, int priority); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:05:30.687

您不需要资源 ID。SoundPool 还有另外两种`load()`方法。看到这个：[load(String, int)](http://developer.android.com/reference/android/media/SoundPool.html#load%28java.lang.String,%20int%29)

# android - 摆脱“导出的服务不需要权限”警告

> ID：11558334
> 
> 赞同：40
> 
> 时间：2012-07-19T09:58:55.523
> 
> 标签：android, android-activity, warnings, android-manifest, android-service

我正在寻找摆脱警告的解决方案。我什至不明白它为什么会出现。我查看了一个没有出现警告的 SDK 示例。

首先，这是我的清单，我收到警告*导出服务不需要权限*：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8"
              android:targetSdkVersion="15" />

    <uses-feature android:name="android.hardware.camera"
                  android:required="true" />

    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
    <uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock">
        <service
            android:name=".AuthenticationService"
            android:exported="true">
            <intent-filter>
                <action
                    android:name="android.accounts.AccountAuthenticator" />
            </intent-filter>
            <meta-data
                android:name="android.accounts.AccountAuthenticator"
                android:resource="@xml/authenticator" />
        </service>

        <activity
            android:name=".Test"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
... 
```

虽然 Android SDK 的**SampleSyncAdapter**有这个清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.samplesync"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <!-- ... -->

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/label">
        <!-- The authenticator service -->
        <service
            android:name=".authenticator.AuthenticationService"
            android:exported="true">
            <intent-filter>
                <action
                    android:name="android.accounts.AccountAuthenticator" />
            </intent-filter>
            <meta-data
                android:name="android.accounts.AccountAuthenticator"
                android:resource="@xml/authenticator" />
        </service>
    ... 
```

但是没有警告。为什么我会收到警告？好吧，我使用 Theme.Sherlock 主题来使用*ActionBarSherlock*。但我无法想象这会导致错误。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-19T13:32:33.337

该警告告诉您，您已导出（即：公开提供）一项服务，但未获得许可保护。这使您的服务可以不受限制地用于任何其他应用程序。请参阅[导出的服务不需要许可：这是什么意思？](https://stackoverflow.com/questions/10474134/exported-service-does-not-require-permission-what-does-it-mean)

如果您的服务不需要对其他应用程序可用，则无需将其导出。显式设置`android:exported="false"`将删除警告。

**注意：**如果您提供了 Intent 过滤器，`android:exported`则默认值为。`true`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-24T15:32:54.617

您需要为您的服务添加权限要求。您需要的是[`android.permission.ACCOUNT_MANAGER`](http://developer.android.com/reference/android/Manifest.permission.html#ACCOUNT_MANAGER). 您的身份验证器只能通过管理器访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-01T17:22:18.960

关于这个问题，已经在 Android 项目中创建了一个关于使用“同步适配器”的警告的错误：[https](https://code.google.com/p/android/issues/detail?id=37280) ://code.google.com/p/android/issues/detail?id=37280但它仍然是一个打开的错误。

# selenium - 使用 Selenium IDE 匹配具有随机 id 的元素

> ID：11558336
> 
> 赞同：0
> 
> 时间：2012-07-19T09:58:58.550
> 
> 标签：selenium, selenium-ide

我是 Selenium 的新手。我无法捕捉到 id 值，因为每次刷新都会重新生成该值 `id=ClientAgreements_863f4ace-84fb-4dbb-bb8c-7d7835ceaec9__AgreementType`

```
<td>select</td>
<td>id=ClientAgreements_863f4ace-84fb-4dbb-bb8c-7d7835ceaec9__AgreementType</td>
<td>label=New</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:04:51.090

如果 ClientAgreements OR AgreementType 文本是固定的，那么您可以尝试

```
//div[contains(@id,'ClientAgreements')]
//div[contains(@id,'AgreementType ')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:41:35.333

如果`id`一直在变化，那么通过`id`. 您需要制定一个始终稳定的定位策略。

正如 Rohit Ware 所说，如果`ClientAgreements`和/或`AgreementType`在 id 中就足够了，您可以通过 XPath 找到它：

```
xpath=//*[contains(@id,'ClientAgreements')]
xpath=//*[contains(@id,'AgreementType')]
xpath=//*[contains(@id,'ClientAgreements') and contains(@id,'AgreementType')] 
```

如果没有，请寻找该元素的其他独特品质。是否有一个`name`属性或一个独特的类？它是否总是页面上具有特定属性的第一个（第二个，第三个？）元素？它是否包含任何特定的文本？它是您可以轻松找到的元素的子元素吗？

如果您希望我们为您提供帮助，请向我们展示该元素的 HTML 代码 - 如果您认为相关，您也可以添加一些周围的元素。我们将提出一个解决方案，但您必须以任何一种方式查看 CSS 选择器和/或 XPath，以便您下次能够自己解决它。

如果您想帮助自己，请参阅 Google [CSS 选择器教程](https://www.google.com/search?q=css%20selectors%20tutorial)和[XPath 教程](https://www.google.com/search?q=xpath%20tutorial)并学习。

# c# - 事件处理程序中的属性值不正确

> ID：11558337
> 
> 赞同：2
> 
> 时间：2012-07-19T09:58:58.833
> 
> 标签：c#, asp.net, variables, properties, viewstate

我试图在如下所示的方法中设置一个值，但是当我运行 btnSaveValue 时，没有要检索的值。我什至尝试在默认类中创建一个私有 int val 并将值分配给它，但仍然会出现一个空白值 - 任何人都可以帮助我吗？

谢谢

```
 public partial class _Default : System.Web.UI.Page 
{
    valueAllocation valAlloc = new valueAllocation();

    public void declaringValue()
    {
        valAlloc.setValue(5);
        int testAlloc = valAlloc.getValue();
        lblResult.Text="Value set here is:"+testAlloc;  //THIS WORKS!!!
    }
    protected void btnSaveValue_Click(object sender, ImageClickEventArgs e)
    {
        lblResult.Text = "Value now is:" + valAlloc.getValue();   //DOESNT WORK??????!!!!!
    }
}

public class valueAllocation
{
    private int val;

    public void setValue(int value)
    {
        val = value;
    }
    public string getValue()
    {
        return val;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:05:02.420

这是因为您需要使用例如`ViewState`.

这是与 ASP.Net 页面生命周期相关的一个基本问题。

基本上，每次您请求页面时，**都会在每个帖子上创建一个新的页面实例**，并在响应返回到客户端时销毁

如果要跨回发保持状态，则需要手动将每个值保存在`ViewState`

## 将整个类型存储在 ViewState 中

我认为这是你最好的选择

### 自定义类型

```
[Serializable]
public class valueAllocation
{
    public int MyValue { get; set; }
} 
```

### 背后的代码

```
protected valueAllocation MyObject
{
   get
   {
      if(this.ViewState["c"] != null) 
           return (valueAllocation)this.ViewState["c"];

      return null;
  }
  set
  {
      this.ViewState["c"] = value;
  }

public valueAllocation declaringValue()
{
    if (this.MyObject == null)
        this.MyObject = new valueAllocation { MyValue = 5 };

    lblResult.Text="Value set here is:"+ this.MyObject.MyValue.ToString();
    return this.MyObject;
}

protected void btnSaveValue_Click(object sender, ImageClickEventArgs e)
{
    declaringValue()
    lblResult.Text = "Value now is:" + declaringValue().MyValue.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:05:12.310

问题是你从来没有调用过 decalringValue()，这样做

```
 public valueAllocation declaringValue()
    {
        valAlloc.setValue(5);
        int testAlloc = valAlloc.getValue();
        lblResult.Text="Value set here is:"+testAlloc;  //THIS WORKS!!!
        return valAlloc;
    }

protected void btnSaveValue_Click(object sender, ImageClickEventArgs e)
    {
        declaringValue()
        lblResult.Text = "Value now is:" + declaringValue().getValue();   //DOESNT WORK??????!!!!!
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:05:56.713

这是因为这是 Web 应用程序而不是桌面。您必须管理页面的状态。因为在 Web 上，每个请求对服务器来说都是新的。

对于您的场景，您必须使用“viewstate”技术来维护页面的状态。

或者，如果您希望该值不丢失，则必须将变量设为静态。

谷歌搜索更多细节`"State management in asp.net"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:08:02.320

看起来没有使用 valAlloc.setValue(SomeNumber); 设置值 在调用以下方法之前

或者我会说 valAlloc.val 的默认值为零

```
protected void btnSaveValue_Click(object sender, ImageClickEventArgs e)
    {
        lblResult.Text = "Value now is:" + valAlloc.getValue();   //DOESNT WORK??????!!!!!
    }

so you lblResult.Text is getting a zero from  valAlloc.getValue() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-19T10:05:15.630

看起来您正在寻找定义的静态对象和静态链接。如果在这种情况下全局静态对象对您有用，请投票支持我的回复。

# mysql - 带有 LOAD INFILE 的 MySQL 批量插入 - MyISAM 仅比 MEMORY 引擎慢

> ID：11558343
> 
> 赞同：2
> 
> 时间：2012-07-19T09:59:32.950
> 
> 标签：mysql, memory, bulk, load-data-infile

我们目前正在对 MySQL 进行多项性能测试，以将其与我们正在为数据库原型开发的方法进行比较。简而言之：数据库是空的，给定一个巨大的 csv 文件，尽可能快地将数据加载到内存中。

我们正在一个 12 核 Westmere 服务器上进行测试，该服务器具有 48 GB RAM，因此内存消耗现在不是一个真正的问题。

问题如下。我们选择了 MySQL（广泛传播，开源）进行比较。由于我们的原型是内存数据库，因此我们选择了 MySQL 中的内存引擎。

我们以这种方式插入（文件最大为 26 GB）：

```
drop table if exists a.a;
SET @@max_heap_table_size=40000000000;
create table a.a(col_1 int, col_2 int, col_3 int) ENGINE=MEMORY;
LOAD DATA CONCURRENT INFILE "/tmp/input_files/input.csv" INTO TABLE a.a FIELDS TERMINATED BY ";"; 
```

对 2.6 GB 文件执行此加载大约需要 80 秒，比 ( ) 慢四倍`wc -l`。使用 MyISAM 仅慢 4 秒，即使正在写入磁盘。

我在这里做错了什么？我想使用内存引擎的数据写入必须比使用 MyISAM 快得多。而且我不明白为什么`wc -l`（都是单线程的，但写入内存并没有那么慢）要快得多。

PS：更改 read_buffer_size 或我在谷歌上发现的任何其他变量，并没有带来显着的改进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:13:48.937

尝试设置以下变量

```
max_heap_table_size=40GB;
bulk_insert_buffer_size=32MB
read_buffer_size=1M
read_rnd_buffer_size=1M 
```

它可能会稍微减少查询执行时间。

也`CONCURRENT`仅适用于 MyISAM 表，它会根据手动参考减慢插入速度：[Load Data Infile](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

我认为您无法将作为写入操作的插入速度与作为读取操作的 wc -l 的速度进行比较，因为与读取相比，写入总是较慢。

在 RAM 中加载 2.6GB 数据需要相当长的时间。它主要取决于您的操作系统的 RAM 和 IO 配置的写入速度。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:15:32.310

我认为您没有看到 MEMORY 引擎和 MyISAM 引擎之间存在显着差异的原因是由于磁盘缓存。您有 48GB 的​​ RAM，并且只加载 2.6GB 的数据。

MyISAM 引擎正在写入“文件”，但操作系统正在使用其文件缓存功能使这些文件写入实际发生在 RAM 中。然后它将“懒惰地”对磁盘进行实际写入。既然您提到了“wc”，我假设您使用的是 Linux。阅读dirty_ratio 和dirty_background_ratio 内核设置，作为了解其工作原理的起点。

# symfony - Symfony2 - FOSUserBundle - FindUserBy

> ID：11558344
> 
> 赞同：2
> 
> 时间：2012-07-19T09:59:35.807
> 
> 标签：symfony, doctrine-orm, fosuserbundle, findby

我创建了自己的用户包，扩展了 FOSUserBundle。

在我的 UserBundle 中，我有一个 memberID 字段，其中包含它的 setter 和 getter。

我已经可以使用 EntityManager 通过 memberID 找到用户，然后我可以通过 UserManager 找到用户，匹配通过 EntityManager 查询获得的用户名/电子邮件/...，但是...

有没有办法使用 UserManager 找到UserByMemberID？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:02:28.027

谢谢您的回复。它似乎比所有这些东西都容易。

自己的用户包：

```
 /**
 * @ORM\Column(type="string")
 *
 */
protected $memberID;

public function getMemberID()
{
    return $this->memberID;
}

public function setMemberID($memberID)
{
    $this->memberID = $memberID;
} 
```

您可以查询FOSUserBundle：

```
$userManager = $this->get('fos_user.user_manager');

$user = $userManager->findUserBy(array('memberID' => '123')); 
```

然后，使用方法**findUserBy** (array(*OwnUserBundle_field* => *search_parameter_value*)) 您将获得用户实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:42:37.183

每个“非标准”查询都必须写入*存储库类*
您还必须将该类与代表您的数据模型的类相关联。

假设你的实体被调用`User`，你必须做这样的事情

```
/**
 * VendorName\UserBundle\Entity\User
 *
 * @ORM\Table(name="users")
 * @ORM\Entity(repositoryClass="VendorName\UserBundle\Repository\UserRepository")
 */
class User implements AdvancedUserInterface
{
[...] 
```

这表示该实体的每个“自定义”查询都将适合该存储库类。

现在您必须创建存储库

```
class UserRepository extends EntityRepository implements UserProviderInterface
{
    public function findUserByMemberID($id)
    {
       /* your logic here */
    }
[...] 
```

你可以通过以下方式使用它

```
$userRepo = $this->em->getRepository('VendorUserBundle:User');
$userRepo->findUserByMemberID(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T15:47:33.157

您可以从捆绑包中的 FOSUserBundle 扩展 UserManager 并编写自己的方法。你可以按照这些说明[http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)

# towerjs - 如何将 towerjs 资产上传到 S3？

> ID：11558346
> 
> 赞同：0
> 
> 时间：2012-07-19T09:59:45.837
> 
> 标签：towerjs

在 towerjs 中将生产资产上传到 S3 的正确方法是什么？我在 config/credentials.coffee 中配置了我的 S3 凭据

然后我尝试*蛋糕资产：发布*

并得到

```
 /Users/avaranovich/projects/demos/node/firstApp/Cakefile:15
    client = knox.createClient(Tower.secrets.s3);
                                            ^
TypeError: Cannot read property 's3' of undefined
    at Object._this [as action] (/Users/avaranovich/projects/demos/node/firstApp/Cakefile:15:45)
    at helpers.extend.invoke (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:42:26)
    at Object.action (/Users/avaranovich/projects/demos/node/firstApp/Cakefile:9:12)
    at helpers.extend.invoke (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:42:26)
    at Object.exports.run (/usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:67:21)
    at Object.<anonymous> (/usr/local/lib/node_modules/coffee-script/bin/cake:7:38)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

*更新：我发现任务assets:upload:s3*中的正确行应该看起来 client = knox.createClient Tower.config.credentials.s3

但后来我得到另一个错误

```
/Users/avaranovich/projects/demos/node/firstApp/node_modules/tower/lib/tower/server/application/assets.js:112
    _console.debug("Uploading to " + Tower.secrets.s3.bucket);
                                                  ^
TypeError: Cannot read property 's3' of undefined
    at Object.Tower.Application.Assets.upload (/Users/avaranovich/projects/demos/node/firstApp/node_modules/tower/lib/tower/server/application/assets.js:112:51)
    at Object._this [as action] (/Users/avaranovich/projects/demos/node/firstApp/Cakefile:16:37) 
```

似乎 Tower.secrets.s3.bucket 在其他地方硬编码。

谢谢，安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:16:16.190

我会紧紧抓住，密切关注开发分支，甚至开始为自述文件中概述的要求做出贡献：[https ://github.com/viatropos/tower/tree/development](https://github.com/viatropos/tower/tree/development)

他们终于与开发分支处于“功能完成”阶段，现在正在努力支撑它，以便解决错误并提高性能。

请务必每天观看快速变化的路线图：[https ://github.com/viatropos/tower/blob/master/ROADMAP.md](https://github.com/viatropos/tower/blob/master/ROADMAP.md)

鉴于开发人员数量有限，移动速度相当惊人！我们需要全力支持这个项目。

# knockout.js - 'with' 绑定更新前的动画

> ID：11558349
> 
> 赞同：1
> 
> 时间：2012-07-19T09:59:55.417
> 
> 标签：knockout.js

我正在使用“with”绑定，我想在更改值之前和之后调用一些动画。有没有人知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:54:31.147

你总是可以用你自己的绑定来包装 with 绑定，它使用 jQuery 进行一些动画，如下所示：

```
ko.bindingHandlers['fadingWith'] = {
    init: function(element, valueAccessor, allBindingsAccessor, context) {
        return ko.bindingHandlers['with']['init'](element, valueAccessor, allBindingsAccessor, context);
    },
    update: function(element, valueAccessor, allBindingsAccessor, context) {
        $(element).fadeOut(100, function () {
            ko.bindingHandlers['with']['update'](element, valueAccessor, allBindingsAccessor, context)
        }).fadeIn(100);
    }
};
ko.virtualElements.allowedBindings['fadingWith'] = true; 
```

然后你可以像这样应用它：`<div data-bind="fadingWith: someObservable"><span data-bind="text: $data"></span></div>`

我还没有测试过这个（我稍后会尝试），但我认为这将是前进的方向。

另一种选择（我更确定会起作用）是您创建一个单独的绑定，执行以下操作：

```
ko.bindingHandlers['fadeOn'] = {
    update: function(element) {
        $(element).hide().fadeIn(200);
    }
} 
```

这不会在可观察到的变化之前为您提供动画，但它会在之后为您提供动画。所以你会做`<div data-bind="with: someObservable, fadeOn: someObservable"><span data-bind="text: $data"></span></div>`

编辑：我刚才想出的另一个***可能更简单***`with`的选择是在您正在使用的变量上使用油门扩展：

视图模型：

```
///...your code....
this.observableThatNeedsWith = ko.observable("Hello");
this.delayedObservable = ko.computed(this.observableThatNeedsWith).extend({throttle: 200});
//...continue your code 
```

然后，您有如下绑定：

```
ko.bindingHandlers['fadeInOut'] = {
    update: function(element) {
        $(element).stop(true, true).stop(true, true).fadeOut(200).fadeIn(200);
    }
} 
```

请注意，淡出时间与油门时间相同。

然后你像这样绑定它：`<div data-bind="with: delayedObservable, fadeInOut: observableThatNeedsWith"><span data-bind="text: $data"></span></div>`

将会发生的是，当您更改 observableThatNeedsWith 时，fadeInOut 处理程序将开始转换元素。然后在它完成淡出的那一刻（在这种情况下为 200 毫秒），油门将迎头赶上，并且延迟的Observable 将在 fadeInOut 开始淡入元素时立即更新。它淡出一件事，淡入另一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T17:01:17.493

Los Frijoles 3rd 解决方案将不起作用，因为它会限制“with”绑定以始终在动画之后发生。

由于我们试图为 with 绑定渲染的元素设置动画，当从未渲染状态变为渲染状态时，动画将尝试为不存在的元素设置动画。

Slawomir 的回答是我见过的最好的，但是出于性能原因，在移动设备上制作动画时克隆复杂元素并不是一种选择。为这些绑定正确实现动画需要改进 Knockout 框架。

编辑：我意识到可以通过用等效逻辑的“模板”或“foreach”标签替换“with”或“if”绑定来制作动画。例如，我替换了：

```
<div data-bind="with: selectedTimelapse"> 
```

和：

```
<div data-bind="template: {
    foreach: selectedTimelapse,
    afterAdd: utils.kbAnimFadeIn,
    beforeRemove: utils.kbAnimFadeOut
}"> 
```

我的示例中的“selectedTimelapse”不需要成为列表。使用它，我现在可以在设置 selectedTimelapse 时转换进出我的模态对话框。如果转换也可以破解此技术：

```
<div data-bind="template: {
    foreach: (showTimelapse()) ? selectedTimelapse : undefined,
    afterAdd: utils.kbAnimFadeIn,
    beforeRemove: utils.kbAnimFadeOut
}"> 
```

我的 utils.kbAnimFadeIn/Out 函数等效于此处 Knockout 动画示例页面中演示的函数：http: [//knockoutjs.com/examples/animatedTransitions.html](http://knockoutjs.com/examples/animatedTransitions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T17:22:07.127

我通过创建创建元素副本的绑定解决了问题。克隆此元素后，我对其进行动画处理，然后将其删除并使用新值对原始元素进行动画处理。**在使用**之前设置此绑定很重要

# rest - REST API - PUT 还是 POST？

> ID：11558353
> 
> 赞同：6
> 
> 时间：2012-07-19T10:00:16.867
> 
> 标签：rest

> **可能重复：**
> [REST 中的 PUT 与 POST](https://stackoverflow.com/questions/630453/put-vs-post-in-rest)

我知道这已经讨论了很多，虽然我有点明白，但我并不完全明白。我认为，如果有人可以就以下示例回答这个问题，那将很容易理解。

创建新用户 - 将新用户添加到发送用户名、密码、电子邮件的数据库。放置或发布？

我想也许 PUT 因为我不想有重复的用户，而 PUT 就像删除和替换一样。但是，我有避免用户被添加两次的检查，所以也许我应该使用 POST？

更新用户 - 更改电子邮件或密码。放置或发布？

我可以使用 URI api/update/my_username 然后通过正文发送新电子邮件，所以这应该是 PUT 吗？我也可以在 URI 中发送所有内容，例如 api/update/my_username/email/new_email@email.com

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T10:25:11.240

创建 - 发布，更新 - 放置，删除 - 删除。

为了更好地理解 HTTP 动词的用法，请查看 RFC [https://www.rfc-editor.org/rfc/rfc2616](https://www.rfc-editor.org/rfc/rfc2616)

PUT 请求也可以创建实体，但响应代码应该是 201 创建而不是 200 OK 和 204 No Content。但这取决于您是否允许/实施此类行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:38:37.990

关键指导是操作是否是幂等的，即如果你重复它会发生什么。如果总体上发生相同的事情（忽略日志、上次更改时间和其他琐事），无论您执行一次、两次还是 20 次请求，它都是幂等的，应该是 PUT。如果您这样做的次数很重要，请使用 POST。

创建通常是非幂等的，因为您通常会向用户发出一个 ID，但它不必*像*那样（例如，如果调用者指定了 ID）。更新通常是幂等的，因为将数据字段更改为其当前值在实践中通常是一种有效的无操作。

# php - 当jquery向网页添加宽元素时动态重置iPhone iPad上的视口

> ID：11558358
> 
> 赞同：2
> 
> 时间：2012-07-19T10:00:27.867
> 
> 标签：php, jquery, iphone, css, viewport

*当我从插入必须*比初始视点设置宽的 div 元素的表单返回信息时，我目前正在努力使用 iphone (3/4/4s) 进行视口设置。

我在下面包含了一个非常基本的演示，以简化正在发生的事情，但它仅在使用 iphone 观看时才有意义（在普通计算机浏览器上看起来不错，因为屏幕的额外宽度。

或者简单地说：

1）我的视口设置如下：`<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1">`

当查看网页时，这在 iphone 4s 上提供了 320 像素的初始宽度。

2）当我使用 jquery（ajax 请求）在页面上提交表单时，ajax 请求返回一些 html 代码，其中包含一个*必须*为 500 像素宽的 div。这被插入到当前网页中。

3) 现在视口太小，无法看到这个插入的 div 元素的整个宽度。

4) 我如何动态重置视口或缩小以确保我可以看到这个新的 div 而无需用户手动执行任何操作？

5) （这个 div 被插入页面顶部，将表单留在其下方。是否可以将用户重新定位回页面顶部？我认为 window.scrollTo(0, 0); 有效，但我没有把握。）

这是一个非常简单的演示，但您必须在 iPhone 上查看。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Demo</title>
        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1">
        <style>
            #clickbox { background:yellow; display: block;}
            .box { background: red; width: 500px; height:200px; border: 2px solid; margin: 5px}
        </style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div id="clickbox"><button id="button">Click me!</button></div>
        <script>     
            $("#button").click(function (){
                $("#clickbox").before( "<div class='box'>Oh look at me! I'm too wide, how can I reset the view point to view my complete width!?</div>" );
            });
        </script>
    </body>
</html> 
```

如果您发现它更容易，此代码已[在此处在线](http://www.totaltechworld.com/scripts/demo.php)：

**我试过的：**

1.  元视口标签的多种变体。从字面上看，大约有 20 种不同的初始/最小/最大比例组合。
2.  内容 div 的 jquery minupulation 如下所示： `$('a').bind('click',function(event){ $("#viewport").prop("content","width=550, maximum-scale = 1") });`
3.  其他各种疯狂的想法。没有一个可以正常工作。

非常感谢任何建议或指示。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:34:00.070

我认为你应该尝试使用`.attr`而不是`.prop`

例如，这有效，但您必须使用其他元素的设置：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Demo</title>
        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1">
        <style>
            #clickbox { background:yellow; display: block;}
            .box { background: red; width: 640px; height:200px; border: 2px solid; margin: 5px}
        </style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div id="clickbox"><button id="button">Click me!</button></div>
        <script>     
            $("#button").click(function (){
                $('#viewport').attr('content', 'width=device-width, initial-scale=0.5');
                $("#clickbox").before( "<div class='box'>Oh look at me! I'm too wide, how can I reset the view point to view my complete width!?</div>" );
            });
        </script>
    </body>
</html> 
```

请参阅之前添加的新行`$('#clickbox')...`：

```
$('#viewport').attr('content', 'width=device-width, initial-scale=0.5'); 
```

我希望这可以帮助您走上正确的道路。

# sql - 在一个语句中插入两个表 SQL SERVER 2008

> ID：11558363
> 
> 赞同：0
> 
> 时间：2012-07-19T10:00:47.773
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [SQL Server：是否可以同时插入两个表？](https://stackoverflow.com/questions/175066/sql-server-is-it-possible-to-insert-into-two-tables-at-the-same-time)
> [从一个表中选择并插入另外两个表](https://stackoverflow.com/questions/9939583/select-from-one-table-and-insert-to-another-two-table)

根据 select 语句的结果，我有两个具有一对一关系的表我需要在这些表中插入结果值我真的需要避免游标，你知道我如何用一个 select 语句在两个表中插入，或者您是否知道其他性能更好的解决方案，我正在查询的表预计会变得非常大并且循环通过它会很糟糕

提前致谢

# php - PHP - 链式触发器如何创建/存储？

> ID：11558366
> 
> 赞同：4
> 
> 时间：2012-07-19T10:00:52.000
> 
> 标签：php, mysql, triggers

我一直在与一个小团队合作一个关于虚构世界建设的小项目。我被分配了管理实体（岩石/地点/物品）的触发器/连锁行为的任务，这些实体可以通过多种方式触发，例如向湖中扔一块魔法石，怪物 X 会出现，并继续触发这些东西在链中，直到它到达终点。

我试过这个

```
$Trigger_123 = new stdClass();
$Trigger_123->name = "Name";
$Trigger_123->renderOn = ? // (object_345->throwedInLakeX) ? 
```

如何将其存储在 MySQL 中？我可以检查它是否是链条部件吗？我也尝试了 MySQL 触发器，但我找不到在这些触发器上执行 PHP 的方法。例如，在更新或删除时运行 PHP 代码。

Cron 作业不是一个选项，因为将来会添加很多东西，而且 cron 作业需要很长时间才能完成，我希望找到一个更基于 php 的解决方案。

* * *

**已编辑**（添加一些附加信息）

我试图以多种方式实现这一点。我最终得到了一个非常类似于 debian 软件包的依赖系统，我认为它不适合这个。

**数据库结构**

```
Table "object"
--------------
ID (int)
Name (varchar)

Table "triggers"
----------------
ID (int)
Name (varchar)
Data (blob) // usually, I store php code and use eval to run

Table "attributes"
------------------
ID (int)
attribute (varchar)
value (blob)

Table "object_has_triggers"
---------------------------
ID (int)
ObjectID (int)
TriggerID (int)

Table "object_has_attributes"
-----------------------------
ID (int)
ObjectID (int)
AttributeID (int) 
```

结果我想要的是每次都执行一个PHP代码片段

*   一个数据库事务，在提交之前和之后提交到​​数据库
*   附有 X 触发器的对象，解决它们
*   检查由 X 触发的每个 Trigger 是否满足其所有依赖项

**问题：** 这样的东西甚至可以用 PHP 构建还是我应该尝试其他脚本语言，如 python？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:09:42.547

> 结果我想要的是每次都执行一个PHP代码片段
> 
> *   一个数据库事务，在提交之前和之后提交到​​数据库

您应该在触发器中调用 PHP 函数。在 PHP 中编写所有需要调用的逻辑。

> *   附有 X 触发器的对象，解决它们

附加了 X 触发器的对象，而不是将其转换为 PHP 代码或在 PHP 中解析它。

> *   检查由 X 触发的每个 Trigger 是否满足其所有依赖项

成功完成触发器后，您可以创建一个数据库表来保存响应。最后，您可以检查是否满足所有依赖项。

对于从触发器调用 PHP 函数，不同类型的解决方案请参见以下帖子的不同答案。

[从 MySQL 触发器调用 PHP 脚本](https://stackoverflow.com/questions/1467369/invoking-a-php-script-from-a-mysql-trigger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:17:38.907

> 每次数据库事务，提交之前和提交到数据库之后，都会执行一个 PHP 代码片段

不要重新发明轮子，这有一个令人难以置信的简单解决方案：在数据库调用之上有一个层。

与其直接查询数据库，不如调用一个处理数据库插入触发器的函数（可能在一个对象中）。您可以在此处添加代码，以任何您喜欢的方式对触发器进行预处理和后处理。

```
function processDatabaseInsertion($trigger) {
    //Preceding code goes here

    //Database transaction goes here

    //Post-processing code goes here
}

$Trigger_123 = new stdClass();
$Trigger_123->name = "Name";
$Trigger_123->renderOn = $object_345->throwedInLakeX;

processDatabaseInsertion($Trigger_123); 
```

过度简化，但你明白了。我建议为您的触发器编写一个自定义类，但我以程序风格编写它，因为我不知道您是否熟悉 OOP。

> 每次附加了 X 触发器的对象时执行一个 PHP 代码片段，解析它们

原理和以前一样。如果你使用 PHP >= 5.3，你可以使用闭包来增加它的趣味性：

```
function processDatabaseInsertion($trigger) {
    //Preceding code goes here
    $trigger->renderOn();

    //Database transaction goes here

    //Post-processing code goes here
}

$Trigger_123 = new stdClass();
$Trigger_123->name = "Name";
$Trigger_123->renderOn = function() use ($Trigger_123) { doAwesomeThing($Trigger_123); }

processDatabaseInsertion($Trigger_123); 
```

或者采用更传统的方法：

```
function processDatabaseInsertion($trigger) {
    //Preceding code goes here
    switch($trigger->renderOn) {
        case "awesomeThing":
            doAwesomeThing($trigger);
            break;
        case "anotherThing":
            break;
        default:
            break;
    }

    //Database transaction goes here

    //Post-processing code goes here
}

$Trigger_123 = new stdClass();
$Trigger_123->name = "Name";
$Trigger_123->renderOn = "awesomeThing";

processDatabaseInsertion($Trigger_123); 
```

> 检查由 X 触发的每个 Trigger 是否满足其所有依赖项

如您所知，可以通过上面的方法使用更多的 PHP 逻辑轻松处理。例如，您可能希望在每次需要处理触发器时调用一个通用函数，该函数依次检查依赖关系是否得到满足，如果满足则运行特定触发器。

无论哪种方式，都有比使用 eval 或一些 mysql 触发黑客攻击更好的方法来解决这个问题，如您所见:)

# c# - 尝试通过避免使用 if、else、if else 和 switch 语句来修复数组边界之外的问题，因为我只能使用 if 一次

> ID：11558367
> 
> 赞同：0
> 
> 时间：2012-07-19T10:00:55.993
> 
> 标签：c#

我怎样才能做到这一点，如果 quantityPurchased 大于或等于 200 它不会超出数组的范围，而不使用 if、if else、else 或 switch 语句。

```
static double DeterminePercentage(int quantityPurchased)
{
    double[] quantity = { 1, 11, 50, 100, 200 };
    double[] discount = { 0, 7.5, 15, 17.5, 20 };
    int x = 0;
    for (int i = 0; i < quantity.Length; i++)
    {
        if (quantityPurchased >= quantity[i] && quantityPurchased < quantity[i + 1])
        {
            x = i;
        }
        break;
    }

    return discount[x];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:03:24.157

只需少循环一项：

```
for (int i = 0; i < quantity.Length - 1; i++) { 
```

要使代码适用于 >200 值，您可以添加另一个虚拟项目：

```
double[] quantity = { 1, 11, 50, 100, 200, Int32.MaxValue };
double[] discount = { 0, 7.5, 15, 17.5, 20, 100 }; 
```

这将有 200 和 Int32 之间的数量。MaxValue 有 20% 的折扣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:09:26.157

如果您的“数量”数组增长并且仍在排序，则最佳和通用的答案是使用 BinarySearch 值“数量购买”。它会给你插入点，即。将密钥插入数组的点。使用此索引从折扣数组中返回适当的值。

我不提供代码，因为我不是 C# 用户，但实现应该不会很复杂。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:23:07.537

将 Double.MAX_VALUE 添加到数量数组的末尾：

```
double[] quantity = { 1, 11, 50, 100, 200, Double.MAX_VALUE }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:57:12.827

试试这个 Linq 表达式。

return discount[discount.IndexOf(quantity.Where(x => x > quantityPurchased).DefaultIfEmpty().Max());

# c - 是否可以在单字节对齐结构中对齐特定结构成员？

> ID：11558371
> 
> 赞同：3
> 
> 时间：2012-07-19T10:01:07.477
> 
> 标签：c, linux, alignment, arm, structure

我正在使用 ARM。由于奇数偏移的读/写导致对齐错误（我们知道 ARM 是 4 字节对齐的）。我的程序中定义的所有结构都是单字节对齐的

```
#pragma pack(push, 1)    

typedef struct
{
   char a1;
   int  a2;
   char a3;
}a;

#pragma pack(pop) 
```

我正在尝试做

```
#pragma pack(push, 1)

typedef struct
{
    char a1 __attribute__ ((aligned (4)));
    int  a2;
    char a3;
}a;

#pragma pack(pop) 
```

gcc 属性**_*属性*_ ((aligned (4)))**无效。

```
Note :: The above code is not my actual code. sample scenario. 
```

所以我重新安排了结构成员来解决对齐问题。我想确保重新安排是否是可能的解决方案，或者我们可以让**_*属性*_**在这种情况下工作。欢迎任何其他解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:08:45.210

您可以在 ARM 上的字节对齐结构中安全地读取/写入 char/int，编译器会注意对齐。对齐问题可能会出现单个问题，即转换为 32 位 int，如下所示：

```
char buf[5];
char *p = buf + 1;
*((int *)p) = 1; 
```

注意：如果您出于某些原因，例如对齐某些成员（从结构的开头），您可以使用以下技巧：

```
typedef struct {
    struct {} __attribute__ ((aligned (4)));
    char a1; // offset is 4
    int  a2; // offset is 5
    char a3; // offset is 9
} a; 
```

# ruby-on-rails-3 - 如何从头开始设置控制器/响应对象以运行 render_to_string？

> ID：11558374
> 
> 赞同：0
> 
> 时间：2012-07-19T10:01:15.337
> 
> 标签：ruby-on-rails-3

如何从头开始设置控制器/响应对象以运行 render_to_string？

我开发了一个生成 PDF 文件的应用程序。我使用`erb`基于模板生成`TeX`文件，然后将其处理以转换为 PDF。

它工作正常，但我现在开始认为在后台生成报告会更好。因此，我创建了一个排队系统`delayed_job`，它运行良好。

现在，当结合其中两个时，我意识到渲染器是作为控制器的一部分实现的。

我想要做的是运行 render_to_string 来生成 PDF。看起来我需要从头开始设置控制器和响应对象。

我发现[了一个与此相关的问题（如何从 Rails 的控制台调用控制器/视图方法？）](https://stackoverflow.com/questions/151030/how-do-i-call-controller-view-methods-from-the-console-in-rails/)，但是通过调用设置响应对象`post`似乎很尴尬。

我如何设置控制器和响应对象来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:47:06.507

这是一种方法（通过[wicked_pdf](https://github.com/mileszs/wicked_pdf)生成 PDF ）：

控制器：

```
class FoosController < ApplicationController

  def queue_pdf_generation
    @foo = Foo.find(params[:id])
    Delayed::Job.enqueue GeneratePdfJob.new(@foo.id)
  end

end 
```

延迟工作：

```
class GeneratePdfJob < Struct.new(:foo_id)

  def perform
    # get the Foo object when the job is run
    foo = Foo.find(foo_id)

    # create an instance of ActionView, so we can use render method outside of a controller
    av = ActionView::Base.new()
    av.view_paths = ActionController::Base.view_paths
    pdf_html = av.render :template => "foos/pdf.html.erb", :layout => nil, :locals => {:foo => foo}

    # use wicked_pdf gem to create PDF from the foo HTML
    foo_pdf = WickedPdf.new.pdf_from_string(pdf_html, :page_size => 'Letter')

    # save PDF to disk
    pdf_path = Rails.root.join('tmp', "#{foo.id}.pdf")
    File.open(pdf_path, 'wb') do |file|
      file << foo_pdf
    end

end 
```

几点注意事项：

*   “执行”方法不带参数；从结构继承让我们将参数传递给 GeneratePdfJob 对象，它设置了一个名为“foo_id”的局部变量，我们可以在“perform”方法中使用它。
*   您的视图需要引用局部变量“foo”而不是实例变量“@foo”。

# jsf - JSF 绑定与 setValueExpression 只读？

> ID：11558379
> 
> 赞同：2
> 
> 时间：2012-07-19T10:01:24.450
> 
> 标签：jsf, data-binding, jsf-2

我尝试在支持 bean 中创建一个 InputField 并将其添加到视图中，但数据绑定似乎只是只读的。

我在 Backing-Bean 中创建了一个 UIInput，如下所示：

```
UIComponent textInput = new UIInput();
textInput.setId("operandInputText");
textInput.setValueExpression("value", ef.createValueExpression(elCtx, "#{row.operandValues[0]}", String.class));        
textInput.setValueExpression("rendered", ef.createValueExpression(elCtx, "#{row.inputType == 'text'}", Boolean.class));     
mInputPanelGroup.getChildren().add(textInput); 
```

panelGroup 位于 dataTable 的列内并绑定到 bean：

```
<p:column id="operandColumn">
    <h:panelGroup id="inputPanelGroup" binding="#{locateEmployeeBean.inputPanelGroup}" >
        <h:inputText id="testInput" value="#{row.operandValues[0]}" />
    </h:panelGroup>
</p:column> 
```

PanelGroup内部`<h:inputText/>`仅用于测试，在这里我发现我所做的绑定`setValueExpression(...)`至少是只读的。

在浏览器中，我现在有 2 个输入字段，首先是“testInput”，然后是“operandInputText”。当我在“operandInputText”中输入一个值并提交时，该值不会被保存，但是当我在“testInput”-Field 中输入一个值时，它会被提交，此外该值会显示在两个 inputFields 中。

操作数值是一个简单的对象数组：

```
private Object[] mOperandValues = new Object[2]; 
```

这可能与我传递给的数据类型有关`setValueExpression(...)`吗？我尝试了 Object，但这并没有改变任何东西。

知道为什么会这样吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:27:22.393

我找到了解决我的问题的方法。老实说，这是@BalusC Using Datatables 的一篇文章：Populate datatable 让我走上了正确的道路。

以前我在 PreRenderView-Phase 期间添加了组件，然后我在您的示例中看到您在 getter 中填充了一次绑定组件（这显然在 RestoreView-Phase 期间更早）。这就是我现在所做的并且它完美地工作，输入字段现在可以双向工作（读+写）。

非常感谢您的工作@BalusC！

# c# - 填充字典中的 KeyNotFoundException

> ID：11558380
> 
> 赞同：2
> 
> 时间：2012-07-19T10:01:25.913
> 
> 标签：c#, dictionary, compare, keynotfoundexception

我正在尝试修改字典中的值，但编译器会抛出`KeyNotFoundException`. 我敢肯定，我在字典中声明了该键，因为我正在调用`GenerateEmptyChunks()`方法，该方法用具有位置键的块填充字典，而关卡生成器的值是空的。我检查了调试器和`Chunks`字典对象是否正确填充了键和值。`CompareTo`是我不工作的方法造成的吗？如果是，我如何修改`CompareTo`方法来返回正确的值？

```
public Dictionary<WPoint, WChunk> Chunks = new Dictionary<WPoint, WChunk>(); 
```

*GenerateEmptyChunks()*方法：

```
public void GenerateEmptyChunks(int Xcount, int Ycount)
    {
        for(int x = 0; x <= Xcount; x++)
        {
            for (int y = 0; y <= Ycount; y++)
            {
                this.Chunks.Add(new WPoint(x, y), new WChunk(x, y));
            }
        }
    } 
```

*AddBlock()*方法由每个图块的级别生成器调用：

```
public void AddBlock(WPoint location, int data)
    {
        this.Chunks[location.GetChunk()].AddTile(new WTile(location, data));
    } 
```

*Wchunk*对象：

```
public class WChunk
    {
        public int ChunkX;
        public int ChunkY;
        public SortedDictionary<WPoint, WTile> Tiles = new SortedDictionary<WPoint, WTile>();

        public WChunk(int posX, int posY)
        {
            ChunkX = posX;
            ChunkY = posY;
        }

        public void AddTile(WTile tile)
        {
            Tiles.Add(tile.GetLocation(), tile);
        }
    } 
```

*WPoint*对象：

```
public class WPoint : IComparable
    {
        public float X;
        public float Y;

        public WPoint(float x, float y)
        {
            X = x;
            Y = y;
        }

        public WPoint GetChunk()
        {
            //Oprava pre bloky mensie ako (1,1)
            if (X <= 16 && Y <= 16)
            {
                return new WPoint(0, 0);
            }
            else
            {
                double pX = (double)(X / 16);
                double pY = (double)(Y / 16);
                return new WPoint((int)Math.Floor(pX), (int)Math.Floor(pY));
            }
        }

        public int CompareTo(object obj)
        {
            WPoint point2 = (WPoint)obj;
            if (point2.X == this.X && point2.Y == this.Y)
            {
                return 0;
            }
            else if (point2.X >= this.X && point2.Y >= this.Y)
            {
                return -1;
            }
            else
            {
                return 1;
            }
        }
} 
```

任何想法为什么编译器拒绝键，当它们在字典中时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:08:44.697

是的。您尚未覆盖 GetHashCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:10:18.877

Dictionary 使用 GetHashCode 和 Equals 进行键比较，因此实现 IComparable 接口是不够的。看看这个[答案](https://stackoverflow.com/questions/1407380/when-do-we-do-gethashcode-for-a-dictionary)，这正是你所需要的。

# .htaccess - Codeigniter url 像使用 .htaccess 的子域 url 一样重写

> ID：11558384
> 
> 赞同：0
> 
> 时间：2012-07-19T10:01:32.547
> 
> 标签：.htaccess

目前我的网址是： http: [//www.domain.co.uk/index.php/city/details/city-name](http://www.domain.co.uk/index.php/city/details/city-name)

我想将其更改为：

[http://www.city-name.domain.co.uk/index.php/city/details/city-name](http://www.city-name.domain.co.uk/index.php/city/details/city-name)

或者：

[http://www.city-name.domain.co.uk/city/details/city-name](http://www.city-name.domain.co.uk/city/details/city-name)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:23:58.453

将 .htaccess 文件放入 http://www.domain.co.uk/ 文档根目录

到 http://www.city-name.domain.co.uk/index.php/city/details/city-name

```
RewriteRule ^(.*)/([^/]+)$ http://www.$2.domain.co.uk/$1/$2 [R=301,L] 
```

到 http://www.city-name.domain.co.uk/index.php/city/details/city-name

```
RewriteRule ^index.php/(.*)/([^/]+)$ http://www.$2.domain.co.uk/$1/$2 [R=301,L] 
```

如果服务器相同，在上面设置 RewriteRule 这一行，防止重定向循环

```
RewriteCond %{HTTP_HOST} !^www\.(.*).domain\.co\.uk [NC] 
```

文件内容示例

```
<ifModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond %{HTTP_HOST} !^www\.(.*).domain\.co\.uk [NC]  
   RewriteRule ^index.php/(.*)/([^/]+)$ http://www.$2.domain.co.uk/$1/$2 [R=301,L]  
</IfModule> 
```

排除 domain.co.uk（不包括 www）

```
<ifModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond %{HTTP_HOST} !^www\.(.*).domain\.co\.uk [NC]
   RewriteCond %{HTTP_HOST} !^domain\.co\.uk [NC]  
   RewriteRule ^index.php/(.*)/([^/]+)$ http://www.$2.domain.co.uk/$1/$2 [R=301,L]     
</IfModule> 
```

# c - 在声明时初始化联合数组

> ID：11558390
> 
> 赞同：5
> 
> 时间：2012-07-19T10:01:44.963
> 
> 标签：c, arrays, sse, initializer, unions

我正在尝试在声明时初始化以下联合数组：

```
typedef union { __m128d m;  float f[4]; } mat;
mat m[2] = { {{30467.14153,5910.1427,15846.23837,7271.22705},
{30467.14153,5910.1427,15846.23837,7271.22705}}}; 
```

但我收到以下错误：

```
matrix.c: In function ‘main’:
matrix.c:21: error: incompatible types in initialization
matrix.c:21: warning: excess elements in union initializer
matrix.c:21: warning: (near initialization for ‘m[0]’)
matrix.c:21: warning: excess elements in union initializer
matrix.c:21: warning: (near initialization for ‘m[0]’)
matrix.c:21: warning: excess elements in union initializer
matrix.c:21: warning: (near initialization for ‘m[0]’)
matrix.c:21: error: incompatible types in initialization
matrix.c:21: warning: excess elements in union initializer
matrix.c:21: warning: (near initialization for ‘m[1]’)
matrix.c:21: warning: excess elements in union initializer
matrix.c:21: warning: (near initialization for ‘m[1]’)
matrix.c:21: warning: excess elements in union initializer
matrix.c:21: warning: (near initialization for ‘m[1]’) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T10:06:13.200

引用[此页面](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/strin.htm)：

> 使用 C89 风格的初始化器，必须按照声明的顺序初始化结构成员，并且只能初始化联合的第一个成员。

因此，要么`float`先放置数组，要么尽可能使用 C99 并编写：

```
mat m[2] = { { .f = { /* and so on */ } }, /* ... */ }; 
```

重要的是`.f`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:07:15.740

您需要指出您正在初始化哪个联合字段。尝试使用以下语法：

```
mat m[2] = {
    {.f = {30467.14153,5910.1427,15846.23837,7271.22705}},
    {.f = {30467.14153,5910.1427,15846.23837,7271.22705}}
}; 
```

这为我成功编译，没有任何警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:58:46.070

尝试更改成员：

```
typedef union {
    float f[4];
    __m128d m;
} mat;
mat m[2] = { { {30467.14153,5910.1427,15846.23837,7271.22705},
               {30467.14153,5910.1427,15846.23837,7271.22705} } }; 
```

如果您在没有成员规范的情况下初始化联合，例如 .f = { ... }，则联合的第一个成员被初始化。

# vb6 - 如何更新根/父节点文本

> ID：11558391
> 
> 赞同：0
> 
> 时间：2012-07-19T10:01:47.197
> 
> 标签：vb6, treeview

我是 vb6 的新手，我不知道当变量“childCount”发生变化时如何更新根/父节点？

谢谢

例子 ：

```
Dim nodx As Node
dim childCount as integer

childCount = 0

Set TreeView1.ImageList = ImageList1

'Add root Node
Set nodx = TreeView1.Nodes.Add(, , "Root", "Root Node have " & childCount & " child" ,"Closed")

'Expand root node so we can see what's under it
nodx.ExpandedImage = "Open"
nodx.Expanded = True

'Create a child node under the root node
Set nodx = TreeView1.Nodes.Add("Root", tvwChild, "Child1", "Child node 1", "Closed")

childCount =childCount + 1
'Expand this node so we can see what's under it
nodx.ExpandedImage = "Open"
nodx.Expanded = True

'Create several more children
Set nodx = TreeView1.Nodes.Add("Root", tvwChild, "Child2", "Child node 2", "Leaf")

childCount =childCount + 1

Set nodx = TreeView1.Nodes.Add("Root", tvwChild, "Child3", "Child node 3", "Leaf")

childCount =childCount + 1

Set nodx = TreeView1.Nodes.Add("Root", tvwChild, "Child4", "Child node 4", "Leaf")

childCount =childCount + 1

Set nodx = TreeView1.Nodes.Add("Root", tvwChild, "Child5", "Child node 5", "Leaf")

childCount =childCount + 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:59:40.997

因为你正在更新根节点（第一个节点），你已经知道索引号是 1，所以你的任务特别容易。

```
TreeView1.Nodes.Item(1).Text = "Root Node have " & CStr(childCount) 
```

您还可以更新新节点的根。在您的示例中，它与索引 1 相同。

```
TreeView1.Nodes.Item(TreeView1.Nodes.Count).Root.Text = "Root Node have " & CStr(childCount) 
```

尝试暂停执行并在**即时窗口**中播放控件的不同属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:15:12.830

感谢@Beaner 的想法，我找到了解决方案，我所做的是：

```
Dim nodx As Node
Dim nodChild As Node
dim childCount as integer 

Set nodx = TreeView1.Nodes.Add(, , "Root", "Root Node have " & childCount & " child" ,"Closed")  

'Expand root node so we can see what's under it 
nodx.ExpandedImage = "Open" 
nodx.Expanded = True  

'Create a child node under the root node 
Set nodChild = TreeView1.Nodes.Add("Root", tvwChild, "Child1", "Child node 1", "Closed")  childCount =childCount + 1 

'Expand this node so we can see what's under it nodx.ExpandedImage = "Open" nodx.Expanded = True  
'Create several more children 
Set nodChild = TreeView1.Nodes.Add("Root", tvwChild, "Child2", "Child node 2", "Leaf")  childCount =childCount + 1  

Set nodChild = TreeView1.Nodes.Add("Root", tvwChild, "Child3", "Child node 3", "Leaf")  childCount =childCount + 1  

Set nodChild = TreeView1.Nodes.Add("Root", tvwChild, "Child4", "Child node 4", "Leaf")  childCount =childCount + 1  

Set nodChild = TreeView1.Nodes.Add("Root", tvwChild, "Child5", "Child node 5", "Leaf")  childCount =childCount + 1 

nodx.Text = "Root Node have " & childCount & " child" 
```

# c# - 会话和数据库首选项

> ID：11558394
> 
> 赞同：2
> 
> 时间：2012-07-19T10:01:49.847
> 
> 标签：c#, asp.net, session

嗨，我想在整个会话中为 emp 表中的每条记录保留一些值。哪一种最好保养？

我打算存储在数据库中，以便每条记录都有自己的价值。但它需要为每个保存/检索操作多次调用数据库。

我猜在会话中维护每个记录值也会消耗更多内存。我两难抉择。

各位大神能推荐下最好的保养方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T10:04:48.953

去数据库，摆脱会话。这样，您的应用程序将是无状态的。会话是 Web 应用程序可伸缩性的最大敌人。如果你有一些性能问题，你总是可以使用缓存或在你的 webfarm 中投入一些硬件。

# php - 计算多维数组中的特定值

> ID：11558397
> 
> 赞同：11
> 
> 时间：2012-07-19T10:01:56.383
> 
> 标签：php, multidimensional-array, counting

我正在尝试根据条件计算某个值出现在我的多维数组中的次数。这是一个示例数组；

```
$fruit = array (
                 "oranges" => array(
                                    "name"    => "Orange",
                                    "color"   => "orange",
                                    "taste"   => "sweet",
                                    "healthy" => "yes"
                              ),
                 "apples" => array(
                                    "name"    => "Apple",
                                    "color"   => "green",
                                    "taste"   => "sweet",
                                    "healthy" => "yes"
                              ),
                 "bananas" => array(
                                    "name"    => "Banana",
                                    "color"   => "yellow",
                                    "taste"   => "sweet",
                                    "healthy" => "yes"
                              ),
                 "grapes" => array(
                                    "name"    => "Grape",
                                    "color"   => "green",
                                    "taste"   => "sweet",
                                    "healthy" => "yes"
                              )
            ); 
```

如果我想显示所有绿色水果，我可以执行以下操作（让我知道这是否是最好的方法）；

```
for ($row = 0; $row < 3; $row++) {

    if($fruit[$row]["color"]=="green") {

         echo $fruit[$row]["name"] . '<br />';

    }

} 
```

这将输出；

```
Apple
Grape 
```

太好了，我可以在那里看到它们是 2 个值，但是我如何才能真正让 PHP 计算颜色为绿色的水果的数量并将其放入一个变量中，以便我在脚本中进一步使用来解决问题？例如，我想做类似的事情；

```
if($number_of_green_fruit > 1) { echo "You have more than 1 piece of green fruit"; } 
```

我看过 count(); 但我看不到任何添加“WHERE/条件”子句（a la SQL）的方法。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T10:22:48.137

PHP 不支持`SQL where`某种东西，尤其是不支持数组数组。但是您可以在迭代数据时自己进行计数：

```
$count = array();
foreach($fruit as $one)
{
    @$count[$one['color']]++;
}

printf("You have %d green fruit(s).\n", $count['green']); 
```

另一种方法是给自己写一些小辅助函数：

```
/**
 * array_column
 *
 * @param array $array rows - multidimensional
 * @param int|string $key column
 * @return array;
 */
function array_column($array, $key) {
    $column = array();
    foreach($array as $origKey => $value) {
        if (isset($value[$key])) {
            $column[$origKey] = $value[$key];
        }            
    }
    return $column;
} 
```

然后，您可以获得所有颜色：

```
$colors = array_column($fruit, 'color'); 
```

然后计算值：

```
$count = array_count_values($colors);
printf("You have %d green fruit(s).\n", $count['green']); 
```

这种辅助函数通常对多维数组很有用。它也被[建议作为 PHP 5.5 的新 PHP 函数](https://wiki.php.net/rfc/array_column)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-19T10:04:30.250

```
$number_of_green_fruit = 0;
for ($row = 0; $row < 3; $row++) {
    if($fruit[$row]["color"]=="green") {
         $number_of_green_fruit++;
         echo $fruit[$row]["name"] . '<br />';
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T10:04:31.593

您只需要一个额外的计数器：

```
for ($row = $number_of_green_fruit = 0; $row < 3; $row++) {
    if($fruit[$row]["color"]=="green") {
         echo $fruit[$row]["name"] . '<br />';
         $number_of_green_fruit++;
    }
}

if($number_of_green_fruit > 1) {
    echo "You have more than 1 piece of green fruit";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-22T02:34:39.567

使用 PHP 5.4+，您可以使用这个简短的代码片段来计算特定值（甚至不需要`$count`事先声明变量）

```
array_walk_recursive($fruit, function ($i) use (&$count) {
    $count += (int) ($i === 'green');
});

var_dump($count); // Outputs: int(2) 
```

# objective-c - 标签栏控制器 - 标签栏第一次无法为纵向设置背景图像

> ID：11558398
> 
> 赞同：0
> 
> 时间：2012-07-19T10:01:59.673
> 
> 标签：objective-c, ios, xcode, cocoa-touch

在我的 ipad 应用程序中，

**我正在使用 ios 5.0。**

我已经设置了标签栏的背景图片。

我的应用程序有一个标签栏控制器，menuVC 是视图控制器之一。

我的问题是

**当我以纵向模式启动我的应用程序时，我可以看到横向模式的图像。**

**1\. 在 Appdelegate 中。**

```
if(menuVC.interfaceOrientation==UIInterfaceOrientationPortrait  ||      menuVC.interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown)

{ 

[tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"footerportrait.png"]];

}

else {

[tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"footerlandscape.png"]];

} 
```

**2\. 应自动旋转到界面方向。**

```
if(UIInterfaceOrientationIsPortrait(interfaeorientation))
{

[self.tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"footerportrait.png"]];

}
else 
{

[self.tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"footerlandscape.png"]];

} 
```

**我不知道为什么会这样。**

感谢您的帮助。

我认为问题不在于图像，而是我的导航栏的宽度可能是 1024。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:24:20.680

根据我的经验，UIViewController 的 interfaceOrientation 属性在 AppDelegate 中创建时无效，只有在`-viewDidAppear:animated`调用后才有效。因此，您可以在视图控制器的该方法中设置背景图像。

# boost - 从 Boost MultiIndex 中删除

> ID：11558399
> 
> 赞同：4
> 
> 时间：2012-07-19T10:02:08.073
> 
> 标签：boost, boost-multi-index

我有一个 boost 多索引结构，它将 boost::shared_ptr 保存到类 A 的实例中。当我使用其中一个索引的“查找”函数时，我得到一个迭代器“it”，我可以从中取回实际指针通过`A* a = it->get();`。`a`知道`erase`多索引结构的函数采用迭代器，而不是指针或 boost::shared_ptr，如何从多索引中删除？事情是在我想要擦除对象的程序点上，我不再有我的初始迭代器，只有实际的指针。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T10:57:07.117

没有“`erase`多索引结构的功能”这样的东西。请注意，它`erase`是*index*的成员函数，其签名可能因索引类型而异。

特别是，有序和散列索引具有以下[重载](http://www.boost.org/doc/libs/1_50_0/libs/multi_index/doc/reference/ord_indices.html#modifiers)：`erase`

```
iterator  erase(iterator position);
size_type erase(const key_type& x);
iterator  erase(iterator first,iterator last); 
```

即如果`shared_ptr`是一个键，你绝对可以将它传递给`erase`函数。当然，你可以`find`先调用，获取迭代器，然后传给`erase`.

# ruby-on-rails - Rails 有许多使用关联模型的直通搜索功能

> ID：11558402
> 
> 赞同：0
> 
> 时间：2012-07-19T10:02:22.123
> 
> 标签：ruby-on-rails, activerecord

基本上，在我的应用程序中，一首歌有很多类别，一个类别有很多歌曲，通过一个称为分类的连接模型。

我在歌曲模型中基本上有一个搜索功能，目前看起来像这样：

```
def self.search(search)
    if search
      find(:all, conditions: ['title LIKE ?', "%#{search}%"], order: 'title')
      find(:all, conditions: ['lyrics LIKE ?', "%#{search}%"], order: 'title')
    else
      #if nothing is inputed then just show all songs
      find(:all, order: 'title')
    end
  end 
```

这很好用，因为标题和歌词是歌曲模型的一部分。但是，我不确定如何添加一个函数，以便您可以输入类别描述（类别模型具有的唯一属性）并让它在搜索结果中也返回它，因为它位于单独的模型。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:16:23.800

使用 ActiveRecord[包含](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Eager+loading+of+associations)方法。

```
 class Song < ActiveRecord::Base
   has_many :categorizations
   has_many :categories, :through=>:categorizations

   def self.search(search)
    res=includes(:categories).order('title')
    res=res.where('title LIKE :search OR lyrics LIKE :search',:search=>"%#{search}%") if search
    res
  end

  def self.search_by_category_desc(search)
    res=joins(:categories).order('title')
    res=res.where('categories.description LIKE ?',"%#{search}%") if search
    res
  end

  def self.search_by_title_or_lirics_or_cat_desc(search)
    res=includes(:categories).order('title')
    res=res.where('title LIKE :search OR categories.description LIKE :search OR lyrics LIKE :search',:search=>"%#{search}%") if search
    res
  end
 end 
```

这将预加载搜索歌曲的所有类别。

记住`joins`and之间的区别`includes`：[ActiveRecord 查询中的“includes”和“joins”有什么区别？](https://stackoverflow.com/questions/4861416/whats-the-difference-between-includes-and-joins-in-activerecord-query)

# json - 验证 Json 架构

> ID：11558403
> 
> 赞同：1
> 
> 时间：2012-07-19T10:02:23.573
> 
> 标签：json, validation, jsonschema

使用[json-schema-validator](https://github.com/fge/json-schema-validator) API v4 时出现错误。我试着做：

```
final JsonValidator validator = new JsonValidator(JsonLoader.fromPath("schema.json"));
ValidationReport report = validator.validate(data); 
```

但每次我得到一个错误：# [schema]: unknown keyword contacts

```
schema.json :
{
    "contacts": {
        "description": "The list of contacts",
        "type": "array",
        "optional": true,
        "items": {
            "description": "A contact",
            "type": "object",
            "properties": {
                "givenName": {
                    "description": "Person's first name",
                    "type": "string",
                    "maxLength": 64,
                    "optional": true
                },
                "familyName": {
                    "description": "A person's last name",
                    "type": "string",
                    "maxLength": 64,
                    "optional": true
                }
            }
        }
    }
} 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:24:52.010

据我所知，您的数据看起来像这样-> json_data={"contacts":array}。如果这是真的，基本上你最外面的东西是一个对象（基本上是完整的 json 对象本身），你“可能”需要从你的 json as-> schema.json 的“顶级根”开始定义模式：

```
{
"description": "the outer json",
        "type": "object",
        "properties": {
            "contacts": {
                          "description": "The list of contacts",
                          "type": "array",
                          "optional": true,
                          "items": {
                                     "description": "A contact",
                                     "type": "object",
                                     "properties": {
                                     "givenName": {

etc..... 
```

原谅我粗略的压痕。另外，我还没有测试过，请看看它是否有效，如果没有，我建议您提供您的 json_data （至少是示例）和 API 的示例，以便可以尝试找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-13T21:16:22.040

**使用 AVJ**。无需将数据验证和清理逻辑编写为冗长的代码，您可以使用简洁、易于阅读和跨平台的 JSON Schema 或 JSON 类型定义规范声明对数据的要求，并在数据到达您的应用。

```
// validationSchema.js

import Ajv from "ajv";
import addFormats from "ajv-formats";
import ajvErrors from "ajv-errors";

const schemas = {
  newUser: {
    {
      type: "object",
      properties: {
        lastName: {
          type: "string",
          minLength: 1,
          maxLength: 255
        },
        firstName: {
          type: "string",
          minLength: 1,
          maxLength: 255
        },
        description: {
          type: "string"
        },
        birthday: {
          type: "string",
          format: "date-time"
        },
        status: {
          type: "string",
          enum: ["ACTIVE", "DELETED"]
        },
      },
      required: ["name"]
    }
  }
};

const ajv = new Ajv({ allErrors: true });

addFormats(ajv);
ajvErrors(ajv /*, {singleError: true} */);

const mapErrors = (errorsEntry = []) => {
  const errors = errorsEntry.reduce(
    (
      acc,
      { instancePath = "", message = "", params: { missingProperty = "" } = {} }
    ) => {
      const key = (instancePath || missingProperty).replace("/", "");

      if (!acc[key]) {
        acc[key] = [];
      }

      acc[key].push(`${key} ${message}`);

      return acc;
    },
    []
  );

  return errors;
};

const validate = (schemaName, data) => {
  const v = ajv.compile(schemas[schemaName]);
  let valid = false,
    errors = [];

  valid = v(data);
  if (!valid) {
    errors = mapErrors(v.errors);
  }

  return { valid, errors };
};

export default { validate };
```

您可以像这样验证它：

```
import validationSchema from "your_path/validationSchema.js"

const user = {
  firstName: "",
  lastName: "",
  ....
};

const { valid, errors = [] } = validationSchema.validate("newUser", user);

if(valid){
  console.log("Data is valid!");
} else {
  console.log("Data is not valid!");
  console.log(errors);
}
```

# php - 如果请求不是通过 AJAX 发出的，是否可以返回 AJAX 响应？

> ID：11558404
> 
> 赞同：0
> 
> 时间：2012-07-19T10:02:26.227
> 
> 标签：php, symfony

如果视频资产不存在，我需要以模态方式/作为当前页面上的覆盖显示应用程序错误（实际上是 Symfony2 异常）。是否可以从 PHP 返回异常作为 Ajax 响应，以便我可以将错误注入原始页面而无需重定向/浏览器刷新？

错误消息本身将是区域设置感知的，并且来自服务器上的翻译文件。

该请求来自这样的javascript：

```
 function playVideo(id){
        $(location).attr("href", "{{ app.request.getBaseURL() }}/whatever/player/"+id);
    } 
```

# wpf - Silverlight - 我的数据上下文/绑定路径需要在这里吗？

> ID：11558408
> 
> 赞同：0
> 
> 时间：2012-07-19T10:02:45.780
> 
> 标签：wpf, silverlight, data-binding, datacontext

过去一周左右，我一直在使用 Silverlight 中的图像编辑器。这是我第一次遇到它，我还没有完全理解数据绑定和数据上下文或 mvvm。我有一个旋转方法，我希望能够将 MainPage.xaml 上的文本框中的角度值传递给该方法。我的初始值设置为 90，当我单击它时，我的函数将图像旋转 90 度。文本框在运行时为空，并且显然没有更新我的旋转角度。

主页.xaml

```
<Grid DataContext="{Binding Path=Project}" Height="70" Name="grid1" Width="200">
   <Grid.RowDefinitions>
      <RowDefinition Height="35" />
      <RowDefinition Height="35" />
   </Grid.RowDefinitions>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="84*" />
      <ColumnDefinition Width="57*" />
      <ColumnDefinition Width="59*" /> 
   </Grid.ColumnDefinitions>

<Button Command="{Binding Path=RotateCWElementCommand}"
      Height="30" Name="btnRotCW" Width="30" Grid.Column="2" Margin="15,0,14,5" Grid.Row="1">
<Image Source="../Assets/Images/Icons/object-rotate-right.png" Grid.Column="1"
      Grid.Row="4" Height="20" HorizontalAlignment="Left" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="20" />
</Button>

<TextBlock FontWeight="Bold" HorizontalAlignment="Left" Margin="10,10,0,8" Text="Rotate" VerticalAlignment="Center" />
<TextBlock FontWeight="Bold" HorizontalAlignment="Left" Margin="34,9,0,10" Text="Angle:" VerticalAlignment="Center" Grid.Row="1" />
<TextBox Text="{Binding Path=RotateElement.Angle, Mode=TwoWay}" Height="24" Name="textBox1" Width="52" Grid.Column="1" Margin="0,6,5,5" Grid.Row="1" />
</Grid> 
```

（相关代码来自）Project.cs-

```
namespace ImageEditor.Client.BLL
{
public class Project : INotifyPropertyChanged
{

            #region Properties
            private RotateTransform rotateElement;
      public RotateTransform RotateElement
      {
        get { return rotateElement; }
        set
        {
            rotateElement = value;
            NotifyPropertyChanged("RotateElement");

        }
    }

        #endregion
    #region Methods

    private void RotateCWElement(object param)
    {
        FrameworkElement element = this.SelectedElement;
        RotateTransform RotateElement = new RotateTransform();

        RotateElement.Angle = 90;
        RotateElement.CenterX = element.ActualWidth * 0.5;
        RotateElement.CenterY = element.ActualHeight * 0.5;
        element.RenderTransform = RotateElement;

    } 
```

我在这里做错了什么？问题是我的数据上下文还是我的绑定路径？它们应该是什么？格式化有点不对劲

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:29:16.627

UI 不知道对象中的属性已更改，因为您仅在对象更改时通知，而不是其中的属性：

```
 private void RotateCWElement(object param) 
 { 
        FrameworkElement element = this.SelectedElement; 
        if (this.RotateElement == null) this.RotateElement = new RotateTransform(); 

        RotateElement.Angle = 90; 
        RotateElement.CenterX = element.ActualWidth * 0.5; 
        RotateElement.CenterY = element.ActualHeight * 0.5; 
        element.RenderTransform = RotateElement; 

        //tell the UI that this property has changed
        NotifyPropertyChanged("RotateElement"); 
 } 
```

# javascript - 如何在javascript中获取系统文件分隔符？

> ID：11558409
> 
> 赞同：0
> 
> 时间：2012-07-19T10:02:55.943
> 
> 标签：javascript, file, separator

如何在javascript中获取系统文件分隔符？现在我使用正斜杠。但这会产生问题。

```
var coverletterPath = serverPath.substring(0, serverPathIndex) + "/docs/" + docPath + "/"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-21T03:55:28.947

使用**路径**模块处理 OS 文件系统中的文件。

# jsf - 使用 JSF 拖放 - richfaces4.0

> ID：11558410
> 
> 赞同：1
> 
> 时间：2012-07-19T10:02:57.287
> 
> 标签：jsf, richfaces

我最近开始研究 JSF 并且正在使用richfaces 4.0。我正在寻找一个工作示例来在 Tree 中实现拖放功能。我有树工作，但是我无法弄清楚如何在树上工作。我正在寻找的是

```
Node1
Node2
Node3
Node4 
```

所以我应该能够在“Node3”和“Node4”之间放置“Node1”，并且“Node3”之上的所有其他节点应该向上移动 1 个索引。

将对此有任何帮助:)

谢谢， 库尔普雷特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T06:36:35.647

我能够使它正常工作，但是代码中存在一些小问题，但基本功能可以正常工作。

```
 <rich:dragSource type="#{element.type}" 
                                                     dragValue="#{element}"
                                                     dragIndicator="actInd"
                                                     >

                                    </rich:dragSource>
                                    <rich:dropTarget acceptedTypes="#{element.type}" dropValue="#{element}"
                                                     dropListener="#{modelTree.activityDropListener}"
                                                     render="tabs"
                                                     >

                                    </rich:dropTarget>
                                    <h:outputText value="#{element}"/>   
                                </a4j:outputPanel> 
```

*   activityDropListener 有代码来获取拖动节点的值和放置位置，并更新构成 treeon UI 的 List

谢谢， 库尔普雷特

# javascript - 如何在 html 5 图表中包含每个条的鼠标悬停效果

> ID：11558412
> 
> 赞同：0
> 
> 时间：2012-07-19T10:03:00.857
> 
> 标签：javascript, html, css

我是 html5 的新手。我想通过 css 或 javascript 包含一些鼠标悬停功能，以便当我将鼠标悬停在特定栏上时，它必须显示一些消息。我不想去一些 api。请帮帮我。这是我的代码。

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript">
            window.onload=function(){
                var canvas=document.getElementById('mycanvas');
                var ctx=canvas.getContext('2d');
                var value=[180,140,30,340,50,90];
                var width=50;
                var currx=30;
                ctx.fillStyle="red";
                var i = 0;
                var interval = setInterval(function(){
                    if (i == value.length){
                        clearInterval(interval);
                        return;
                    }
                    var h=value[i];
                    ctx.fillRect(currx,canvas.height-h,width,h);
                    currx+=width+10;
                    i++;
                }, 2000);console.log(interval);
            };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="400" style="border:1px solid #c3c3c3;">
    </body>
</html> 
```

**[jsFiddle 上的演示](http://jsfiddle.net/kyhmx/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:17:25.197

你有两个选择：

1.  使用[KineticJS](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)之类的库，它将可绘制形状抽象为对象，并提供漂亮的方法将它们绑定到鼠标事件。这样做的好处是可以最大限度地减少您身边所需的工作，因此可以让您专注于功能本身，而不是重新发明轮子。

2.  推出你自己的解决方案，就像某人在创建上述库时所做的那样。为包含相关特征（特别是 x、y、w、h）和画布的形状（在本例中为某种 Bar 对象）设计一些抽象`mousemove-event`，蛮力通过所有条形并计算事件是否鼠标位置是否在一个小节内。然后采取相应的行动，例如用新颜色重新绘制条形图。当然，您也必须处理`mouseout`（将其着色等）。

# c# - 如何本地化未在表单元素中使用的字符串

> ID：11558414
> 
> 赞同：0
> 
> 时间：2012-07-19T10:03:08.097
> 
> 标签：c#, resx, multilingual

我的应用程序中有很多表格，它们都需要翻译。使用 resx 文件的解决方案非常简单。但我还需要根据当前操作翻译消息框文本和按钮中显示的文本。我曾尝试在 VS2010 的 *.de.resx 文件中添加字符串，但在切换表单语言后它消失了。然后我找到了将文本存储在隐藏标签中的解决方案，但这看起来很丑陋。有没有办法在没有隐藏标签的情况下向 resx 添加字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:04:05.950

You probably need to just add a standalone resx to your project (Add, New Item, Resources File). A form resx isn't a safe place to store your non-ui data, as it's autogenerated, and, as you've found, it can delete your alterations when it's regenerated.

# mysql - mysql 查询 - 插入数据 unix_timestamp ( now ( ) ) 问题

> ID：11558418
> 
> 赞同：6
> 
> 时间：2012-07-19T10:03:22.047
> 
> 标签：mysql, unix, time, timestamp

我有一个 INT (11) 列，用于以秒为单位存储当前时间戳。查询如下所示：

```
INSERT INTO `abc` (id, timestamp) VALUES ('', UNIX_TIMESTAMP ( NOW () ) ) 
```

我不知道为什么，但日期没有改变。发送查询时无关紧要，列值不会更改。它有 1342692014 的值，但我不知道为什么。

时间戳是否有任何选项或其他功能？我必须以秒为单位存储日期。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T10:06:20.720

您永远不会在查询中引用该`timestamp` **列**。你只有一个**字符串**：

```
INSERT INTO `abc` (id, 'timestamp') VALUES ('', UNIX_TIMESTAMP ( NOW () ) )
                       ^^^^^^^^^^^ 
```

* * *

**编辑：**

我用你更新的代码得到了这个：

> 错误 1630 (42000): FUNCTION test.NOW 不存在。检查参考手册中的“函数名称解析和解析”部分

假设它仍然不是实际代码并且在修复语法错误之后，我无法重现您的结果。我有根据的猜测是这`id`是一个自动递增的整数主键，您当前的 SQL 模式正在让 MySQL`''`作为`NULL`并插入一个新行......但我还没有真正测试过这个假设。

我的工作代码是这样的：

```
CREATE TABLE `abc` (
    `pk` INT(10) NOT NULL AUTO_INCREMENT,
    `id` VARCHAR(10) NULL DEFAULT NULL,
    `timestamp` INT(11) NOT NULL DEFAULT '0',
    PRIMARY KEY (`pk`)
)
ENGINE=InnoDB;

INSERT INTO abc (id, timestamp) VALUES ('', UNIX_TIMESTAMP());
-- Wait a few seconds
INSERT INTO abc (id, timestamp) VALUES ('', UNIX_TIMESTAMP());
-- Wait a few seconds
INSERT INTO abc (id, timestamp) VALUES ('', UNIX_TIMESTAMP());

SELECT timestamp FROM abc WHERE id=''; 
```

...并返回：

```
+------------+
| timestamp  |
+------------+
| 1342694445 |
| 1342694448 |
| 1342694450 |
+------------+
3 rows in set (0.00 sec) 
```

# jquery-plugins - 移动 webapp 中的捏/拉触摸事件

> ID：11558419
> 
> 赞同：1
> 
> 时间：2012-07-19T10:03:23.107
> 
> 标签：jquery-plugins, jquery-mobile, touch-event

如何在移动 web 应用中注册捏合或拉动事件。它是在浏览器中构建的（如果是，我该如何访问它）或者有一个 jQuery-plugn

（使用 HTML5、jQuery 和 jQuery 移动版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:24:51.100

查看[http://jgestures.codeplex.com/](http://jgestures.codeplex.com/)。

（另外，只是谷歌“jquery 手势”）

相关问题：

[在 JavaScript 中捕获浏览器的“缩放”事件](https://stackoverflow.com/questions/995914/catch-browsers-zoom-event-in-javascript)

[用于移动捏合/缩放操作的 javascript 事件](https://stackoverflow.com/questions/8509799/javascript-event-for-a-mobile-pinch-zoom-action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:26:12.970

[Touchy](http://github.com/hotstudio/touchy)是一个 jQuery 插件，支持在所有支持 touchstart、touchmove 和 touchend 事件的浏览器上进行捏合（向内或向外）、滑动、拖动、长按和旋转。

# jsf-2 - 在 JSF 中动态添加新行

> ID：11558422
> 
> 赞同：0
> 
> 时间：2012-07-19T10:03:28.537
> 
> 标签：jsf-2, richfaces

我有以下代码允许用户输入一些数据：

```
<h:panelGrid columns="2" cellspacing="5">
    <h:outputLabel value="#{msg.FrequencyOfSpending}" />

    <h:selectOneMenu id="ruleFrequencyOptions" value="#{Rule.ruleControls.ControlOne.controlParams.Period.valueSelected}" styleClass="commonSelect">
        <f:selectItems value="#{Rule.ruleControls.ControlOne.controlParams.Period.validValues}" itemLabelEscaped="true" />
        <f:ajax event="valueChange" listener="#{Rule.ruleControls.ControlOne.controlParams.Period.valueSelectedChange}" onerror="handleAjaxError" render="rulesGroup" />
    </h:selectOneMenu>
</h:panelGrid>

<h:panelGroup id="rulesGroup">
    <a4j:repeat value="#{Rule.ruleParams.Action.properties}" var="RuleParamProperty" id="budgetRuleIterator">

        <h:panelGrid columns="4" cellspacing="5" columnClasses="ruleParamCheckbox, ruleParamAction, ruleParamActionFrequency, ruleParamActionInput">

        <h:selectBooleanCheckbox value="#{RuleParamProperty.selected}" immediate="true">
            <a4j:ajax event="click" listener="#{RuleParamProperty.selectedChange}"  onerror="handleAjaxError" />
        </h:selectBooleanCheckbox>

        <h:outputText value="#{msg[RuleParamProperty.name]}" />

        <h:panelGrid columns="3">
            <h:outputText value="#{msg.Action_1}" />
            <h:outputText value="#{msg[Rule.ruleControls.ControlOne.controlParams.Period.valueSelected]}" class="italic-text" />   
            <h:outputText value="#{msg.Action_3}" />
        </h:panelGrid>

        <h:inputText value="#{RuleParamProperty.inputValue}" />

        </h:panelGrid>

    </a4j:repeat>
</h:panelGroup>

<!--******* Link here to generate row with exact same format as all code above ***-->
<h:panelGrid columns="2">
    <img id="AddIcon" src="#{facesContext.externalContext.requestContextPath}/images/icons/add.png" alt="#{msg.addControl}" />
    <h:link value="#{msg.addControl}" />
</h:panelGrid> 
```

我需要添加一个链接以允许他们添加此数据的不同变体，即用户单击添加新控制链接并出现一个新行，允许他们输入更多数据（格式完全相同）。他们应该能够添加多行相同的数据。

使用 JSF2 和 Richfaces4 解决此问题的最佳方法是什么？我应该将 panelGroups 放在一个表中吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:11:43.600

我使用了 Luiggi 建议的数据表：

```
<h:dataTable value="#{rule}" var="currentRuleItem">

    <h:column>

        <h:panelGrid columns="2" cellspacing="5">
            <h:outputLabel value="#{msg.FrequencyOfSpending}" />

            <h:selectOneMenu id="ruleFrequencyOptions" value="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelected}" styleClass="commonSelect">
            <f:selectItems value="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.validValues}" itemLabelEscaped="true" />
            <f:ajax event="valueChange" listener="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelectedChange}" onerror="handleAjaxError" render="rulesGroup" />
            </h:selectOneMenu>
        </h:panelGrid>

        <h:panelGroup id="rulesGroup">
            <a4j:repeat value="#{currentRuleItem.ruleParams.Action.properties}" var="RuleParamProperty" id="budgetRuleIterator">

            <h:panelGrid columns="4" cellspacing="5" columnClasses="ruleParamCheckbox, ruleParamAction, ruleParamActionFrequency, ruleParamActionInput">

            <h:selectBooleanCheckbox value="#{RuleParamProperty.selected}" immediate="true">
                <a4j:ajax event="click" listener="#{RuleParamProperty.selectedChange}"  onerror="handleAjaxError" />
            </h:selectBooleanCheckbox>

            <h:outputText value="#{msg[RuleParamProperty.name]}" />

            <h:panelGrid columns="3">
                <h:outputText value="#{msg.Action_1}" />
                <h:outputText value="#{msg[currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelected]}" class="italic-text" />   
                <h:outputText value="#{msg.Action_3}" />
            </h:panelGrid>

            <h:inputText value="#{RuleParamProperty.inputValue}" />

            </h:panelGrid>

            </a4j:repeat>
        </h:panelGroup>

    </h:column>

</h:dataTable>

<!--******* Link here to generate row with exact same format as all code above ***-->
<h:panelGrid columns="2">
    <img id="AddIcon" src="#{facesContext.externalContext.requestContextPath}/images/icons/add.png" alt="#{msg.addControl}" />
    <h:commandLink value="#{msg.addControl}" action="#{myBean.addRule}" />
</h:panelGrid>

// my bean method
public void addRule()
{   
    iRuleSet.get("RuleControl1").add(createRule());     
} 
```

# uml - 用例图——“包含”的使用

> ID：11558425
> 
> 赞同：0
> 
> 时间：2012-07-19T10:03:42.127
> 
> 标签：uml, software-design, use-case

考虑以下用例图
（比如用户登录系统，填写表格并提交给服务器）

```
 (Fill in Form) --<<includes>>---->(Login)
            ^
            \                         ^
          <<includes>>               /
              \                     / 
            (sumbit)------<<includes>>     <------- Is this include necassary ? 
```

`now "Submit" includes "Login"`
`again "Submit" includes "Fill in Form" which includes "Login"`

这两个“包含”似乎是不必要的。
通过包含“填写表格”，它是否自动包含“登录”？什么是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:09:46.723

我不知道您的 UML，但在这种情况下， ***用户第一次使用身份验证登录，例如***

用户----->输入登录详细信息----->按提交按钮----->如果验证----->填写表格---->按提交按钮---->

如果用户未通过身份验证，系统将显示错误消息。

# .net - 使 DAL 可扩展的模式/想法/经验

> ID：11558427
> 
> 赞同：2
> 
> 时间：2012-07-19T10:03:49.257
> 
> 标签：.net, entity-framework, architecture, data-access-layer, asp.net-web-api

我的任务是设计具有多租户 (SaaS) 服务器-客户端架构的应用程序，这是一项相当艰巨的任务。我已经考虑了一段时间服务器的内部架构，这就是我所拥有的：

我想让服务器在 WCF 或 MVC4 中有一个 WebAPI 实现。

服务器将具有基于插件的架构，使用 MEF 作为协调器。由于应用程序需要根据租户要求更改业务逻辑，因此我正在考虑这样做。更具体地说，我将有一个使用 MEF 导出的类/功能，并且在该类中，我将能够为托管它的 WebAPI 路由添加元数据属性。显然，在某些情况下，插件可能需要扩展，甚至可能被其他插件独占使用，在这种情况下，它们将没有路由。

在这一点上，我对服务器的主要问题是，我在某种程度上考虑了插件架构，插件应该能够处理插件需要的所有东西。所以在持久性方面，如果开发了一个新插件，我应该能够在插件中编写一些代码，然后可能由 DAL 执行以提供插件数据的持久性。我不希望插件在任何情况下都通过 DAL 并触摸数据库，因为多租户和访问的约束需要来自某个地方。从本质上讲，如果说 DAL 在 EF 上运行，我将如何选择在我的插件中定义一些持久性的能力。我考虑过将“CreatePersistentStorage(tenant)”之类的东西放入插件的界面中，完全控制插件创建表。我相信 Orchard 会做类似的事情，但会以更强大的方式。

我需要有关如何实现可以在插件内扩展的 DAL 的帮助。DAL 必须控制最终创建，因此插件的数据表是在正确的租户下创建的。

也许EF不是要走的路？对您认为将不胜感激的评论/经验。此时您还会选择 WCF WebAPI 或 ASP.NET WebAPI 吗？

最好的问候，拉里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:46:29.397

好的，这就是我目前所拥有的，它提供多租户，它提供插件 - 清洁度/优雅不是那么多。

```
public class Context : DbContext
{
    private static ConcurrentDictionary<string, DbCompiledModel> modelCache = 
               new ConcurrentDictionary<string, DbCompiledModel>();

    private Context(DbCompiledModel model) : base(model)
    {
    }

    public static Context Create(string tenantSchema)
    {
        var compiledModel = modelCache.GetOrAdd(
            tenantSchema,
            t =>
                {
                    var providerInfo = 
                        new DbProviderInfo("System.Data.SqlClient", "2008");
                    var modelBuilder = new DbModelBuilder();

                    modelBuilder.Conventions.Remove<IncludeMetadataConvention>();

                    foreach (var plugin in ServiceLocator
                        .Current
                        .GetAllInstances<IPlugin>().ToList())
                    {
                        plugin.SetupPersistence(modelBuilder,tenantSchema);
                    }

                    var model = modelBuilder.Build(providerInfo);
                    return model.Compile();
                });

        return new Context(compiledModel);
    }

    /// <summary>
    /// Creates the database and/or tables for a new tenant
    /// </summary>
    public static void ProvisionTenant(string tenantSchema)
    {
        using (var ctx = Create(tenantSchema))
        {
            if (!ctx.Database.Exists())
            {
                ctx.Database.Create();
            }
            else
            {
                try
                {
                    var createScript = ((IObjectContextAdapter)ctx)
                        .ObjectContext
                        .CreateDatabaseScript();
                    ctx.Database.ExecuteSqlCommand(createScript);
                }
                catch (Exception ex)
                {
                    Console.WriteLine("Tenant already exists.");        
                }
            }
        }
    }
} 
```

这是插件的外观：

```
[Export(typeof(IPlugin))]
public class Class2 : IPlugin
{

    public int Id { get; set; }
    public string Name { get; set; }
    public string Lol { get; set; }

    public void SetupPersistence(DbModelBuilder modelBuilder, string tenantSchema)
    {
        modelBuilder.Entity<Class2>().ToTable("Keke", tenantSchema);
        modelBuilder.Entity<Class2>().HasKey(i => i.Id);
    }
} 
```

以下是您可以如何使用这些：

```
 Database.SetInitializer<Context>(null);

    Context.ProvisionTenant("personal");
    Context.ProvisionTenant("work");

    using (var db = Context.Create("personal"))
    {
        db.Set<Class2>().Add(new Class2 { Name = "Keke" });
        db.SaveChanges();
        foreach (var d in db.Set<Class2>())
        {
            Console.WriteLine(d.Name);
        }

        Console.Read();
    } 
```

我正在使用 CommonServiceLocator 来保留我的 MEF 参考。

现在，这有几个问题：

*   插件可以控制表名，并将模式名称设置为表 - 我不知道如何在 API 端控制它。我可以将整个 EF api 包装在另一个类中，但是仅仅让一个函数像我想要的那样工作似乎很麻烦。
*   这样做的重点是要有一个可插件扩展的数据库层，而可扩展性的重点是为将来发生的更改做好准备，目前我的实现在更改部分还不够，因为没有办法处理插件内部的迁移。
*   它是可怕的。

任何关于如何处理迁移或如何从上下文显式定义插件的表名的输入都将受到赞赏。

# c++ - 在 DLL 边界上使用 std::move 是一种好习惯吗？

> ID：11558428
> 
> 赞同：4
> 
> 时间：2012-07-19T10:03:52.280
> 
> 标签：c++, dll, c++11

任何在 Windows 上使用过 DLL 的人都会告诉您，将`new`一个对象放在 DLL 边界的一侧然后放在另一侧是一个坏主意`delete`。通常，使用带有 DLL 的工厂方法来避免这种情况，以便执行新/删除的目标代码出现在同一个目标文件中。

今天，我正在设计一个新接口，我想从`std::move`一个`std::vector<std::wstring>`对象到另一个对象，其中对象是在不同的 DLL 中创建的。当我想到这可能意味着`delete`现在可能出现在与 did 不同的对象代码中时，我已经准备好这样做了`new`，因为不同的对象现在拥有底层指针。

任何人都可以确认是否是这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:13:09.273

通常，应该跨越 DLL 边界的唯一对象是析构函数（和复制构造函数/赋值）不做太多事情的对象。最好只使用 POD 以获得最大的安全性（因此允许两个 DLL 进行接口，即使它们没有使用完全相同的编译器的完全相同版本进行编译）。

至于移动会发生什么，是的，接收 DLL 将释放由提供 DLL 分配的内存。这通常属于“不好”阵营。

如果你想让它安全，你可以使用特殊的分配器从接收 DLL 分配（和解除分配）内存。但这通常很烦人。

# gmail - 使用过滤器作为返回路径

> ID：11558433
> 
> 赞同：7
> 
> 时间：2012-07-19T10:04:15.713
> 
> 标签：gmail

我收到的邮件“发件人”和“回复”不同于“返回路径”、“接收自”，如本例所示。如何为此类邮件设置过滤器？

```
Return-Path: <cybersho@bhasha.interpole.net>
Received: from bhasha.interpole.net (bhasha.interpole.net. 
Received: from cybersho by bhasha.interpole.net with local (Exim 4.77)
    (envelope-from <cybersho@bhasha.interpole.net>)
From: "Gadima.com" <books@gadima.com>
Reply-to: "Gadima.com" <books@gadima.com> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-10T18:06:13.883

不幸的是，这在 Gmail 中似乎是不可能的。

我求助于我的电子邮件客户端 Gnus（因为它具有惊人的灵活性和轻便性）来执行此操作。详细信息在其手册的[“6.3.3 客户端 IMAP 拆分”](https://www.gnu.org/software/emacs/manual/html_node/gnus/Client_002dSide-IMAP-Splitting.html)部分中进行了说明。

这出乎意料地容易。在我的“.gnus.el”文件中，我输入了（我使用的是 Gmail 的 nnimap 后端）这样的内容：

```
(setq nnimap-split-methods
 '(("mail-list-folder" "Return-Path: mail-list-address")
   ("INBOX" "")) 
```

您需要相应地调整“邮件列表文件夹”（标签）和“返回路径：邮件列表地址”部分。包含“Return-Path: ...”的字符串是一个正则表达式，因此您可以使用通配符，例如 .* 甚至组。例如，要过滤我订阅的一些列表，我有：

```
(setq nnimap-split-methods
 '(("list.\\1" "^Return-Path: <\\(.*\\)-bounces.*@gnu.org>")
  ("INBOX" "")) 
```

请注意用于形成我的标签的捕获组 \\(.*\\)，以及与邮件列表程序形成的返回路径匹配所需的调整。

如果您想尝试一下，我可以建议以下 wiki 开始：[https](https://www.emacswiki.org/emacs/GnusGmail) ://www.emacswiki.org/emacs/GnusGmail 。

# php - 如何检查我的服务器上的 query_cache_type 值

> ID：11558438
> 
> 赞同：1
> 
> 时间：2012-07-19T10:04:25.497
> 
> 标签：php, mysql, query-cache

我已经使用这个查询检查了查询缓存的状态`SHOW VARIABLES LIKE ‘%query_cache%’;`。同样，是否有任何查询或命令来检查`query_cache_type`. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T11:06:20.793

尝试以下任何一种：

```
SHOW GLOBAL VARIABLES LIKE 'query_cache_type';
+------------------+-------+
| Variable_name    | Value |
+------------------+-------+
| query_cache_type | ON    |
+------------------+-------+

SELECT * FROM INFORMATION_SCHEMA.GLOBAL_VARIABLES WHERE VARIABLE_NAME='query_cache_type';
+------------------+----------------+
| VARIABLE_NAME    | VARIABLE_VALUE |
+------------------+----------------+
| QUERY_CACHE_TYPE | ON             |
+------------------+----------------+

SELECT @@query_cache_type;
+--------------------+
| @@query_Cache_type |
+--------------------+
| ON                 |
+--------------------+

SELECT @@query_cache_type = 'ON' AS is_it_on;
+----------+
| is_it_on |
+----------+
|        1 |
+----------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:27:37.353

尝试

```
SHOW VARIABLES LIKE 'query_cache_type'; 
```

# database - 批量数据插入 H2 数据库

> ID：11558439
> 
> 赞同：3
> 
> 时间：2012-07-19T10:04:26.897
> 
> 标签：database, schema, h2, bulk

我是 H2 数据库和 java 的新手。我从过去的 1 个月开始研究这些。我需要一些有关 H2 数据库的帮助。

我的工作概述：

我从报告引擎得到查询。查询是拆分的，只有在底层数据库（文件结构）上运行带有 where 的选择。结果需要存储在 H2 数据库中，并且需要运行实际查询（使用 orderby 和 groupby ）。

我的疑惑：

1.  使用哪种类型的连接模式？（在内存中/嵌入）。

2.  Schema 依赖于查询。那么如何动态加载模式和创建表呢？

3.  在 H2 数据库中插入批量数据和获取的最佳方法是什么？

任何帮助深表感谢。

问候，巴拉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:26:34.910

> 使用哪种类型的连接模式？（在内存中/嵌入）。

显然，这取决于你是否有足够的内存，以及是否需要保留数据。

> Schema 依赖于查询。那么如何动态加载模式和创建表呢？

您可以使用`create table ... as select ...`. 该语句针对性能进行了优化，并且比单独的`create`and`insert`语句更快。

> 在 H2 数据库中插入批量数据和获取的最佳方法是什么？

请参阅有关[快速数据库导入](http://h2database.com/html/performance.html#fast_import)的文档。

# c++ - 从 std::fstream 检索文件描述符

> ID：11558447
> 
> 赞同：18
> 
> 时间：2012-07-19T10:04:52.807
> 
> 标签：c++, fstream, file-descriptor

> **可能重复：**
> [从 std::fstream 获取 FILE*](https://stackoverflow.com/questions/109449/getting-a-file-from-a-stdfstream)

我在 Linux 上工作，文件描述符是这个操作系统的主要模型。

我想知道是否有任何库或任何方法可以从 C++ 检索本机 Linux 文件描述符`std::fstream`。

我考虑了一下，`boost::iostream`因为有一个类叫做`file_descriptor`但我明白它的目的与我想要实现的目的不同。

你知道有什么方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T10:19:25.670

您可以采用另一种方式：实现您自己的包含文件描述符的流缓冲区，然后将其`iostream`与`fstream`. 使用[Boost.Iostreams](http://www.boost.org/doc/libs/1_50_0/libs/iostreams/doc/index.html)可以使任务更容易。

非便携式 gcc 解决方案是：

```
#include <ext/stdio_filebuf.h>

{
    int fd = ...;
    __gnu_cxx::stdio_filebuf<char> fd_file_buf{fd, std::ios_base::out | std::ios_base::binary};
    std::ostream fd_stream{&fd_file_buf};
    // Write into fd_stream.
    // ...
    // Flushes the stream and closes fd at scope exit.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T10:09:23.443

没有（标准）方法可以从 std::fstream 中提取文件号，因为标准库没有规定如何实现文件流。

`FILE*`相反，如果您想这样做（使用），则需要使用 C 文件 API 。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T10:16:45.357

没有官方方法可以获取文件流（或实际上是 a [`std::basic_filebuf`](http://en.cppreference.com/w/cpp/io/basic_filebuf)）的私有文件句柄，只是因为它应该是可移植的并且不鼓励使用特定于平台的功能。

但是，您可以进行丑陋的 hack，例如继承`std::basic_filebuf`，然后尝试撬出文件句柄。这不是我推荐的东西，因为它可能会在不同版本的 C++ 库上中断。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T10:08:50.333

标准 C++ 和`libstdc++`.

# list - Groovy 方法来组合列表列表

> ID：11558450
> 
> 赞同：53
> 
> 时间：2012-07-19T10:05:07.740
> 
> 标签：list, groovy

```
Input >> list = [[1,2,3], [6], [3,4,5,6]]

Output >> [1,2,3,3,4,5,6,6] 
```

我想知道是否有比这更直接的东西

```
l = []
list.each{ l = l + it }
println l 
```

像默认的 groovy 闭包或方法？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-19T10:11:47.517

尝试[`flatten`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#flatten%28%29)，即：

```
list.flatten() 
```

或者，要获得您想要的输出：

```
list = [[1,2,3], [6], [3,4,5,6]]

assert list.flatten().sort() == [1,2,3,3,4,5,6,6] 
```

# eclipse - 如何创建远程 glassfish 服务器

> ID：11558451
> 
> 赞同：0
> 
> 时间：2012-07-19T10:05:09.457
> 
> 标签：eclipse, glassfish, glassfish-3, eclipse-indigo, server-administration

大家好，我想创建一个远程 glassfish 服务器。我的意思是说我希望 glassfish 服务器在一台机器上，它的远程客户端连接到它并使用它并从该服务器机器编译/开发他们的代码，因为我不想要在所有机器上安装 glassfish。
我的远程用户将使用 eclipse 进行开发 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:41:40.060

首先，您需要在您使用的机器上安装 glassfish。查看 glassfish v2.1 是如何完成的：http: [//glassfish.java.net/downloads/v2.1.1-final.html](http://glassfish.java.net/downloads/v2.1.1-final.html)

然后您需要将远程 glassfish 附加到您的 IDE。如果您使用 glassfish 进行开发，请不要忘记启用调试并在调试模式下启动 glassfish。

我已经将远程 glassfish 与 IntelliJ 一起使用，它具有完美的集成。我不知道它如何与 Eclipse 一起工作，但这个链接：http: [//java.dzone.com/articles/how-debug-remote-java-applic](http://java.dzone.com/articles/how-debug-remote-java-applicat)可能是你需要的。

# c# - C# Win 表单拼写检查器 .Net 3.5

> ID：11558457
> 
> 赞同：0
> 
> 时间：2012-07-19T10:05:33.413
> 
> 标签：c#, winforms, spell-checking

我希望在我的 win 表单应用程序上实现拼写检查器。该应用程序需要在 .Net 3.5 中构建，我正在努力弄清楚我需要做什么。我浏览了一个导入 Windows Presentation Form 控件的示例，该控件完美地完成了此操作，但该控件仅在 .Net 4 Framework 中可用。

请问有人能指出我正确的方向吗？我只将此控件用于一个richTextBox，所以我不想在我的项目的这一元素上花费太多时间。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:17:37.637

1.  将文本框添加到表单
2.  在 XAML 选项卡中，在 TextBox 标记之间添加以下代码：

    `SpellCheck.IsEnabled = "True"`

您可以在标准 C# 代码窗口中添加相同的代码。只需输入：

```
textBox1.SpellCheck.IsEnabled = true; 
```

3.现在，启动应用程序。

如果您输入了不正确的单词，这些单词会带有红色下划线。如果您右键单击该单词，您会得到一些拼写建议以进行更正。

我希望，这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:26:09.120

希望这些链接可以帮助你

[http://coolthingoftheday.blogspot.com/2010/02/spell-check-enable-your-winform.html](http://coolthingoftheday.blogspot.com/2010/02/spell-check-enable-your-winform.html) http://www.codeproject.com/Articles/5277/NetSpell-Spell-Checker-for-NET

# javascript - 缩放后如何计算画布的新高度宽度？

> ID：11558458
> 
> 赞同：3
> 
> 时间：2012-07-19T10:05:32.967
> 
> 标签：javascript, html

我正在开发 HTML5 项目，但遇到了一些问题。

实际上我有一个画布，我正在使用它在上面绘制图像

```
ctx1.scale(0.5,0.5); // let assume
ctx1.drawImage(Image,0,0,canvas.width,canvas.height); 
```

我想计算缩放后图像的新高度宽度（即比例= 0.5）。这样我就可以改变画布的高度和宽度以适应图像（作为边界）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-28T12:18:58.387

就像将宽度乘以比例一样简单！

虽然不确定语法：

```
canvas.width * scale 
```

# delphi - 如何从 Delphi 控制 Visio？

> ID：11558459
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:05:52.140
> 
> 标签：delphi, delphi-xe2, visio

如何将 Delphi 应用程序与 Visio 2010 绘图链接？例如，我在应用程序上有一个编辑框，在 Visio 绘图上有一条线。如果我在应用程序的编辑框中输入“10”，我希望行长变为 10。（我不是为此寻找代码；这只是我正在寻找的两者之间的通信示例。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:52:33.063

Visio 公开了一个 COM 对象。在 Delphi 中导入类型库，Delphi 将为类型库导出的任何内容生成一个包装单元。使用类型库和[MDSN 引用](http://msdn.microsoft.com/en-us/library/ff769201)来访问 Visio 提供的任何内容。

# android - Eclipse 中缺少文件夹（Android 开发）

> ID：11558461
> 
> 赞同：1
> 
> 时间：2012-07-19T10:05:59.473
> 
> 标签：android, eclipse

我已经重新安装了 android sdk ( `platform 2.3.3`)。现在我的`package explorer`.

例如，有一些名为 的文件夹`drawable-xhdpi`，`Android dependencies`以前没有。`RelativeLayout`此外，默认情况下， main.xml现在正在生成`LinearLayout`。如何避免这种情况？

`Layout-land`文件夹也不见了。

如何获取以前的文件夹集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:14:54.843

我猜你使用的是旧版本的 android SDK。当您重新安装 SDK 时，它已更新。在较新版本的 Android SDK 中，类似文件夹`drawable-xhdpi`会自动添加到包资源管理器中。为避免这种情况，请降低您的 SDK 版本或手动删除不需要的文件夹。您可以从此[链接](http://developer.android.com/sdk/older_releases.html)找到旧版本。

# rubymotion - Rubymotion 包括一个静态库

> ID：11558463
> 
> 赞同：1
> 
> 时间：2012-07-19T10:06:04.967
> 
> 标签：rubymotion

我正在尝试将一个库添加到我的 Rubymotion 项目中，它没有显示任何错误，但我似乎无法访问库中的类，在我的 rakefile 中我有......

```
app.vendor_project('vendor/iSpeechSDK', :static,
    :products => ["libiSpeechSDK.a"],
    :headers_dir => "Headers")

app.frameworks += ['iSpeechSDK'] 
```

Headers目录下的.a文件和.h文件都存在

在我的 app_delegate 我有这个代码......

```
@sdk = iSpeechSDK.sharedSDK 
```

但我得到错误...

模拟 ./build/iPhoneSimulator-5.0-Development/Mirror Mirror.app (main)> 2012-07-19 10:50:05.978 Mirror Mirror[26195:11903] app_delegate.rb:13:in `application:didFinishLaunchingWithOptions:': undefined local variable or method`iSpeechSDK' for # (NameError) 2012-07-19 10:50:05.980 Mirror Mirror[26195:11903] *** 由于未捕获的异常“NameError”而终止应用程序，原因：“app_delegate.rb:13:in `application:didFinishLaunchingWithOptions:': undefined local variable or method`iSpeechSDK”for #(NameError)'***第一次抛出调用堆栈：（0xa88052 0x417d0a 0x207954 0x5c285 0x5bce1）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:55:47.883

[Laurent 在 Google 网上论坛上的](https://groups.google.com/forum/?fromgroups#!topic/rubymotion/UGth3Ck81hw)回答

问题是 iSpeechSDK 类名以小写字母开头，这在 Ruby 中不是有效的常量名。

在下一个版本中，您将能够执行 ISpeechSDK.sharedSDK（就像您已经可以访问同样以小写字母开头的常量或枚举一样），但现在，解决方法可以是：

```
NSClassFromString('iSpeechSDK').sharedSDK 
```

另外，将 .bundle 文件复制到资源文件夹中？构建系统不会自动执行（它只会将应用程序与 .a 库链接）

# xslt - 增量计数器 XSLT 中的标签

> ID：11558465
> 
> 赞同：1
> 
> 时间：2012-07-19T10:06:09.660
> 
> 标签：xslt, umbraco, counter

我正在使用 XSLT 从 Umbraco (4.7) 结构中的子节点中提取一些数据。那部分工作正常，但我需要对每个`<li>`项目进行稍微不同的样式设置，所以每个项目都将是：`<li id=x>`其中`x`是 1 到 15 之间的整数。

我在 XSLT 中找到了几种增加计数器值的方法，但我不知道为什么它不能正常工作。以下是相关来源：

```
<ul>
    <xsl:for-each select="$currentPage/Solutions/SolutionsItem[@isDoc]">
        <xsl:variable name="count">
            <xsl:number/>
        </xsl:variable>
        <li id="$count">
            <a><xsl:value-of select="solutionsItemTitle" /></a>
        </li>
    </xsl:for-each>
</ul> 
```

当我在运行 XSLT 后查看 HTML 的源代码时，它只显示`<li id=$count>`而不是整数。谁能建议从这里去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:20:13.223

您需要一个属性值模板`<li id="{$count}">...</li>`来从 XPath 表达式计算属性值。

# facebook - 无法检查用户是否通过 Activity Feed 插件登录 Facebook

> ID：11558468
> 
> 赞同：1
> 
> 时间：2012-07-19T10:06:15.713
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

我在 JavaScript-SDK 中遇到了 Activity Feed 和事件的问题。当用户登录活动插件时，我想检测到这一点并将他重定向到其他地方。当用户通过 fb:login 按钮登录时，一切正常。

有没有可能的方法来检测这个活动提要框登录的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:51:22.233

Activity Feed 是一个社交插件，意思是：它非常封闭，你只能用它做特定的事情。它不会授权用户使用您的应用程序。这就是为什么有登录按钮的原因，它也是这个特定任务的社交插件。

更多信息：[https ://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/)

# sql - SQL Server 数据库备份文件 (.bak) 文件损坏

> ID：11558471
> 
> 赞同：0
> 
> 时间：2012-07-19T10:06:24.573
> 
> 标签：sql, database, sql-server-2008

很久以来我一直在设计 SQL Server 数据库，我观察到当一个 .bak 文件被邮寄或保存并从 ftp 站点下载时，它会被损坏。

当我尝试恢复时，它给了我 3013 错误代码和消息：

> “备份或恢复操作异常终止。

我也试过`RESTORE VERIFYONLY FROM DISK='C:\abc.bak'`了，但它说

> VERIFY DATABASE 异常终止。

知道为什么会发生这种情况，还有更好的方法将数据库文件从一台服务器移动到另一台服务器（我无权访问源服务器）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:18:30.313

对于 FTP，请确保使用二进制模式。您是否尝试向自己发送纯附件并将结果与​​发送和接收的电子邮件中的文件进行比较？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-09T05:28:10.403

[正如这里](https://stackoverflow.com/a/61336304/2118383)提到的

您可能需要先使用一些工具修复您的 mdf 文件。市场上有很多可用的工具。有一个名为**Restore MS SQL Database**的工具，它对于修复 mdf 文件非常有用。

这个问题可能是由于损坏的事务日志，您可以使用工具[还原 MS SQL 数据库](https://www.stellarinfo.com/sql-database-toolkit.php)来修复损坏的 mdf 文件。

# ruby-on-rails - 在 MongoDB 中使用关系

> ID：11558473
> 
> 赞同：1
> 
> 时间：2012-07-19T10:06:37.147
> 
> 标签：ruby-on-rails, mongodb

我有两个集合，即员工和部门。在那我使用has_many和belongs_to从部门引用了员工集合的department_id字段

```
class Employee
   include Mongoid::Document
   field :name, type: String
   field :age, type: Integer
   field :empid, type: String
   field :manager_id, type: Integer
   field :department_id, type:Integer
   attr_accessible :age, :empid,  :name, :department_id, :manager_id
   validates_presence_of :name
   validates_uniqueness_of :empid
   belongs_to :department
end

class Department
  include Mongoid::Document
    field :name, type: String
    attr_accessible :name
    has_many :employees
end 
```

现在我想使用员工来引用部门集合的_id，帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:22:54.023

从标题本身来看，这个问题本质上是有缺陷的。您可能知道，但 Mongo 不是关系数据库，因此您应该避免将它用于高度相关的数据模型。

Mongo 没有 JOIN 查询的概念，因此查询简单的关系比在 SQL 数据库中查询要昂贵得多。

管理这种关系的传统方式是在关系的一侧保留一个 ID 列表。如果您经常问“哪些员工属于 x 部门？” 然后在每个部门对象上保留一个employee_ids 列表。然后，您可以通过 id 查找。如果您经常问“员工 y 属于哪个部门？”，那么您所要做的就是在每个 Employee 对象上存储一个 department_id，然后查询部门数据库。

如果您永远不必在部门上下文之外使用员工，您可能需要考虑在部门对象中嵌入完整员工文档的列表。

我对 Mongo for Rails 不熟悉，所以不能给你具体的代码示例。

# iphone - 如何以有效的方式为 IOS 应用程序创建 Sqlite 数据库？

> ID：11558475
> 
> 赞同：1
> 
> 时间：2012-07-19T10:06:46.090
> 
> 标签：iphone, objective-c, ios, sqlite

我已经构建了一个 android 应用程序，现在是时候构建一个 IOS 应用程序了。我对 IOS 应用程序开发非常陌生。我设法完成了所有的 UI 设计部分，我正在编写后端部分。在我的应用程序中，我使用的是 Sqlite 数据库，并且每个 View 都有许多 View Controller 与数据库对话。所以我想要一个类（Java）来处理创建、插入、删除等。如果我需要从数据库中获取数据，那么我必须调用该类来访问数据库。有没有办法做到这一点。

或者

我想知道如何以有效的方式创建 sqlite 数据库。因为我的应用完全基于数据库。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T10:28:14.317

创建数据库主要有两种方式：

1.  使用核心数据。在这种情况下，您应该阅读有关 CoreData 的手册，它非常复杂。但是如果你将来打算使用 iCloud，我建议你使用 CoreData。

2.  手动创建数据库而不使用 CoreData。

在第二种情况下，最有效的方法是使用 SQLite 的数据库管理器。例如，[Firefox 的 SQLite 管理器扩展](https://addons.mozilla.org/ru/firefox/addon/sqlite-manager/)。

有更多的程序，但这是免费的，我自己使用。

要使用数据库，请使用[SQLite 上的 FMDB 包装器](https://github.com/ccgus/fmdb)。

[第二种方法的好教程](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)。

# spring - 为什么在 Spring Security 注销后会收到无效会话重定向？

> ID：11558477
> 
> 赞同：0
> 
> 时间：2012-07-19T10:06:49.387
> 
> 标签：spring, spring-security

我有一个使用 Spring Security 的 Spring MVC 项目。我想知道如何`j_spring_security_logout`工作。我在这样的视图中定义了一个注销链接：

```
<a href="<c:url value="/j_spring_security_logout" />">Logout</a> 
```

在我`spring-security.xml`的定义中：

```
<form-login login-page="/login" default-target-url="/wellcome" authentication-failure-url="/loginfailed"  />
<logout logout-success-url="/logout" logout-url="/j_spring_security_logout" />
<session-management invalid-session-url="/invalidsession" /> 
```

我希望单击注销应该将我重定向到`/logout`，但我却被重定向到`invalid-session-url`，即`/invalidsession`。被`logout-success-url`忽略。

但是，当我删除时`session-management`，注销确实会将我重定向到`/logout`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:29:54.337

这在[Spring Security 参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt)中有解释。

除非在您注销时删除会话 cookie，否则您不能真正使用会话到期功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:14:57.330

只使用这个，它应该可以工作（没有`logout-url`）：

```
<logout logout-success-url="/logout" /> 
```

我认为您可能会在同时使用注销和会话管理无效会话 url 时遇到问题，因为一旦您注销，您的会话就不再有效。

**根据您的其他问题进行更新，这个怎么样：**

 ~~```
<security:logout logout-success-url="/logout?displayLogout=1" />
<security:session-management invalid-session-url="/logout?displayLogout=0" /> 
```~~  ~~~~然后在你看来：~~

 ~~```
<c:if test="${param.displayLogout == 0}">
    <h2>Your session has timed out.</h2>
</c:if> 
```~~  ~~**更新＃2，**只是在本地尝试过，当您注销时您的会话无效并且您被重定向到您在配置`invalid-session-url`中指定的位置。`session-management`

现在对解决方案非常感兴趣。~~~~

# javascript - 将 onclick 新窗口转换为 onclick 花式框？

> ID：11558478
> 
> 赞同：0
> 
> 时间：2012-07-19T10:06:59.550
> 
> 标签：javascript, fancybox

将 onclick 新窗口转换为 onclick 花式框？

获得了用于显示 facebook 照片的免费代码，它很棒，但它会打开一个新窗口，但它并不能真正做到公正，希望将其转换为打开一个花式框，而不是任何帮助。“代码如下”

完整网址 = [http://www.footfalldigital.co.uk/fbalbum.html](http://www.footfalldigital.co.uk/fbalbum.html)

提前感谢李“我有一天会给你买一品脱”

```
<script language="javascript" type="text/javascript">
    function popitup(url) {
        newwindow=window.open(url,'name','height=450,width=600,location=1,toolbar=1,status=1,resizable=1')
        if (window.focus) {newwindow.focus()}
        return false;
    }
</script>
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
<script type="text/javascript"> 
    <!-------ENTER YOUR FACEBOOK ALBUM IDS HERE------->
    var id1 = "444691594416";
    var id2 = "";
    var id3 = "";
    var id4 = "";
    var id5 = "";
    <!----------------------------------------------->
    function fbFetch1(){
        var url = "https://graph.facebook.com/" + id1 + "/photos&callback=?&limit=0";
        $.getJSON(url,function(json){
        var html = "";
        $.each(json.data,function(i,fb){
        var name = "";
        if (fb.name !== undefined){
        var name = fb.name;}
        html += "<a onclick=\"return popitup('" + fb.source + "')\"><img style='margin:5px;padding:0px;cursor:pointer;vertical-align:middle;' src=" + fb.picture + " title=\"" + name + "\"></a>"; });
        html += "";
        $('.facebookfeed1').animate({opacity:0}, 500, function(){
            $('.facebookfeed1').html(html);});
            $('.facebookfeed1').animate({opacity:1}, 500);}
        );
    };
    function fbFetch2(){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:09:45.123

如果您已经拥有页面上的所有图像，为什么不查看： http: [//lokeshdhakar.com/projects/lightbox/](http://lokeshdhakar.com/projects/lightbox/) 它会自动查看选择器中的图像并为您添加相册。

**取自他们的网站：**

```
How to Use:

Include lightbox.js in your header.

<script type="text/javascript" src="lightbox.js"></script>

Add rel="lightbox" attribute to any link tag to activate the lightbox. For example:

<a href="images/image-1.jpg" rel="lightbox" title="my caption">image #1</a>

Optional: Use the title attribute if you want to show a caption. 
```

**更新**

```
http://lokeshdhakar.com/projects/lightbox2/ - Updated version

Replace:
$('.facebookfeed5').animate({opacity:0}, 500, function(){
$('.facebookfeed5').html(html);});
$('.facebookfeed5').animate({opacity:1}, 500);});};
With: 
$('.facebookfeed5').animate({opacity:0}, 500, function(){
     $('.facebookfeed5').html(html);});
     $('.facebookfeed5').animate({opacity:1}, 500);})
     $('img').attr('rel','lightbox')
;}; 
```

# project-management - 项目管理和错误跟踪软件

> ID：11558484
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:07:17.057
> 
> 标签：project-management, startup, bug-tracking

> **可能重复：**
> [用于错误和项目的项目管理工具？](https://stackoverflow.com/questions/11366301/project-management-tool-for-bugs-and-projects-together)

我一直在寻找提供错误跟踪 + 项目管理的服务，也许还有一个我们可以写想法的地方（比如想法存储库）。

我们是一家只有 2 人（开发人员）的小型初创公司。我们正在寻找一项免费服务，不管它是在线托管还是我们必须将其托管在我们的服务器上。

顺便说一句，我真的看了很多，我只是找不到适合我们的完美解决方案，所以任何帮助都将不胜感激。

提前谢谢了，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:30:02.547

对于这样一个小团体，我认为您可以花 10 美元购买 atlassian 软件。使用 Jira（问题跟踪）和 Confluence（维基），您将拥有坚实的成长基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:23:11.903

[GitHub](https://github.com/features/projects)是一个很好的检查替代方案。做你要求的一切。开源项目有一个免费选项，您也可以为私有存储库付费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:26:56.953

如果您正在寻找一个想法回购，为什么不使用在线笔记网站/程序？[Evernote](http://www.evernote.com)非常适合这一点，因为它还可以与其他计算机、网络、手机等同步。它整齐地排列/分类它们，让你拍照。

对于一个快速简单的项目管理工具，我使用[Wedoist](https://wedoist.com/)。设置起来非常容易；适合非常小的团队。您可以为错误使用标签/文件夹，并根据需要对其进行优先级排序。几乎没有学习曲线。

# android - 如何使用刚刚从图库中选择或从相机捕获的图像填充网格视图

> ID：11558488
> 
> 赞同：13
> 
> 时间：2012-07-19T10:07:23.110
> 
> 标签：android, gridview, bitmap

我有 Image Gridview，我想将图像**一个一个**地添加到 gridview，从图库中选择或从相机捕获的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T06:57:08.553

在您的情况下，您可以做的是始终将图像分配给网格视图的最后一项。单击最后一个项目，您可以创建一个弹出窗口，要求您将其带到您的画廊或相机。现在，如果用户单击后退按钮或决定取消继续在您的网格视图中显示最后填充的“+”符号图像，否则如果选择了任何其他选项，您可以通过在`onActivityResult().` 结果代码是肯定的情况下导航到所需的操作您可以继续：

```
1) Delete the last item from grid view i.e, the '+' sign image
2) Appending the image either taken from camera or gallery
3) Appending the image having '+' sign itself 
```

并始终为网格视图的最后一项设置条件，以将其指向“导航到画廊”或“从相机单击”对话框。对于其他项目，您可以继续满足您的要求。

让我知道它是否有帮助。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T07:22:09.607

我认为下面的链接将帮助您创建..

*   [带有图像和文本android的gridview](https://stackoverflow.com/questions/11717623/gridview-with-image-and-text-android)
*   [如何在 android 的 Gridview 中实现图片库？](https://stackoverflow.com/questions/6855399/how-to-implement-image-gallery-in-gridview-in-android)
*   [http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T07:31:38.033

将图像放入 SD 卡中的文件夹 [images ]

```
public class ChannelImageAdapter extends BaseAdapter {

int mGalleryItemBackground;
private Context mContext;
File[] images;
File[] files;
public ChannelImageAdapter(Context c, int folderID) {
    mContext = c;

    File dir = new File(Environment.getExternalStorageDirectory() + "/images");
    files = dir.listFiles();
    images = files[folderID].listFiles();

}
public int getCount() {
    return images.length;
}
public Object getItem(int position) {
    return images[position].getAbsolutePath();
}
public long getItemId(int position) {
    return position;
}
public String getAlbumName(int folderID) {
    return files[folderID].getName();
}
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imageView;
    //Bitmap bm = BitmapFactory
    //      .decodeFile(images[position].getAbsolutePath());
    if (convertView == null) {
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setPadding(5, 10, 5, 10);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageBitmap(Bitmap.decode(images[position].getAbsoluteFile()));
    return imageView;

} 
```

}

# svn - 修复标记版本中的错误（颠覆）

> ID：11558489
> 
> 赞同：4
> 
> 时间：2012-07-19T10:07:32.417
> 
> 标签：svn, version-control, merge, tortoisesvn, branching-and-merging

我们使用 SVN 进行版本控制。主要开发在*主干*中完成，并在适用于每个用户的情况下创建分支（当预期的更改很复杂时）。

有时，测试版本会被标记（例如到*/tags/v0.4*）。

但是，有时可能会在*主干*中（在其他开发期间）修复严重错误。

现在我想创建一个标签*/tags/v0.41 ，它与**/tags/v0.4*相同，但仅修复了一个严重的错误（可能有多个严重的错误，但肯定不是所有来自*trunk*）。

**如何继续使用 TortoiseSVN？**

我会建议这样的事情：

1.  创建一个`svn copy`从*/tags/v0.4*到*/tags/v0.41*的分支 ( ) ，
2.  合并从*主干*到*/tags/v0.41*的适用更改并提交。

但这是个好主意吗？

**如何从特定的*主干*修订版（仅此而已）合并到*/tags/v0.41*？**事实上，这将不再是一个标签，而是一个不太好的分支......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:22:27.513

您概述的程序是正确的。

需要创建分支以确保仅将特定错误的修复提交到新的稳定版本（到*trunk*），并且不会从开发版本错误地移植其他（并且可能破坏）功能。

*   *在主干*中搜索专门修复您发现的错误的提交，

*   从中创建一个补丁并将其应用到*/tags/v0.41*工作副本（或仅将所需的*主干*修订合并到*/tags/v0.41* 工作副本）。

注意：如果有多个提交或没有提交只是修复错误而不涉及其他任何内容，您必须手动将相关代码行复制到新的标记版本！

# iphone - 如果我在调用 textFieldShouldReturn 时返回“YES”或“NO”有什么区别

> ID：11558492
> 
> 赞同：34
> 
> 时间：2012-07-19T10:07:36.537
> 
> 标签：iphone, ios, uitextfield

这是文本字段委托方法，但我对返回类型有疑问

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
  [textField resignFirstResponder];

   return NO;
} 
```

这是具有不同返回类型的相同方法

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
 {
   [textField resignFirstResponder];

   return YES;
 } 
```

通过这两个我们可以在我的手机中隐藏键盘。但是返回类型“YES”或“NO”是什么意思。我没有看到任何区别。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-12-06T23:50:21.577

除了这里的其他答案（基本上确认没有重大区别，第一响应者没有通过返回`YES`等自动辞职），我发现了一个**完全依赖于返回值的奇怪事件**，特别是对于`UITextField`带有自动更正的.

## 假设以下场景：

1.  您`UITextField`启用了自动更正功能

2.  您已经实现了类似这样的委托方法（文本字段被辞职）：

    > ```
    > - (BOOL)textFieldShouldReturn:(UITextField *)textField 
    > {
    >     if (textField == self.myAutocorrectingTextField) {
    >         [self.myAutocorrectingTextField resignFirstResponder];
    >     }
    >     return YES; 
    > } 
    > ```

3.  您运行应用程序，在文本字段中键入“ *Cable* ”，然后按回车键，将其作为第一响应者。

## 返回时的结果`YES`：

*   文本字段的文本将从“*电缆*”更改为“*电缆*”！

我测试了一些其他类似的单词：

*   “东西”改为“东西”
*   “十”到“十”
*   而且，有一次“Car”变成了“Carl”，又一次“Car”变成了“Carp”

## 返回时的结果`NO`：

**正常**。文本字段的文本不会被更改。

# 总之...

返回`YES`时，文本字段可能会自动更正已经正确的单词。然而，它并没有呈现那些“自动更正文本气泡”之一，因为这些是合法的词。

返回`NO`时，文本字段不会自动更正已经正确的单词。

**注意：** 在这两种情况下，拼写错误的单词都会得到纠正。例如：

*   如果您要输入“Wev”，则会出现一个“自动更正文本气泡”，其中包含文本“Web”。如果您按下 Return 键，则无论委托的返回值如何，文本都将替换为更正。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-05T04:22:10.870

我根据个人经验看到的一个区别是，如果您返回 YES，则会触发自动更正和自动大写，如果您返回 NO，则不会触发。可能还有其他事情要做，但到目前为止我能注意到的就是这些。

这就是他们所说的“默认行为”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-26T21:12:15.387

我发现的最重要的区别是，如果文本字段发出控制事件`UIControlEventEditingDidEndOnExit`，这将导致文本字段退出第一响应者*，除非* `textFieldShouldReturn`实现返回`NO`。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-07-19T10:21:28.787

textFieldShouldReturn 是您可以处理键盘上的 Return 按钮的地方。

textFieldShouldReturn 询问代理文本字段是否应该处理按下返回按钮。

如果您实现自己的代码来处理返回按钮，您应该返回 NO，或者返回 YES 以便以默认方式处理它。

IOS 文档状态：每当用户点击返回按钮时，文本字段都会调用此方法。您可以使用此方法在点击按钮时实现任何自定义行为。

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

# php - 将动态创建的输入中的值存储到 PHP 变量

> ID：11558496
> 
> 赞同：1
> 
> 时间：2012-07-19T10:07:49.163
> 
> 标签：php, javascript

我有一个页面，允许用户使用 JavaScript 在表单中添加和删除文本字段。

文本字段被命名为`field1`, `field2`,`field3`等，取决于用户添加了多少字段

我正在尝试将文本字段中的所有值存储到一个 Php 变量中；

我知道我需要先将它们存储到一个数组中然后使用`implode()`，但是我如何指定我的 Php 代码中有多少个输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:13:22.397

通常解决这个问题的最佳方法是使用以数组命名的输入，如[PHP 文档中的以下示例](http://php.net/language.variables.external#example-108)所示：

```
<form action="" method="post">
    Nombre:  <input type="text" name="personal[nombre]" /><br />
    Email:   <input type="text" name="personal[email]" /><br />
    Cerveza: <br />
    <select multiple name="cerveza[]">
        <option value="warthog">Warthog</option>
        <option value="guinness">Guinness</option>
        <option value="stuttgarter">Stuttgarter Schwabenbräu</option>
    </select><br />
    <input type="submit" value="submit me!" />
</form> 
```

您可以为每个用户添加的字段使用相同的名称，如下所示：

```
<input type="text" id="field1" name="fields[]" />
<input type="text" id="field2" name="fields[]" /> 
```

然后根据需要使用 implode：

```
$imploded_fields = implode(', ', $_POST['fields']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:15:43.583

有很多选择：

1.  您可以使用 cookie。用来`PHP $_COOKIE`获取。[寻求帮助](http://www.w3schools.com/php/php_cookies.asp)。
2.  您可以使用`html hidden input fields`-`<input type="hidden" value="">`并且可以在其中存储实际数量的字段。

*但是，Diego Agulló 更好*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:15:47.593

如果 on 选项已打开（field1），您可以创建一个隐藏字段并将其初始化为 1。并在增加字段和虎钳的值的同时增加计数器的值。提交时，您会发现添加的总字段。

谢谢

# java - 在创建自定义未检查异常时扩展 Error 或 runtimeException

> ID：11558498
> 
> 赞同：4
> 
> 时间：2012-07-19T10:07:51.217
> 
> 标签：java, exception, exception-handling, error-handling

`Error`两者`RuntimeException`都是未经检查的异常。在创建自定义未经检查的异常时我应该扩展哪一个？虽然两者在逻辑上是不同的，但如果我扩展它们的唯一目的是创建未经检查的异常，那么我扩展哪一个真的很重要吗？我也不确定，但我猜两者的性能应该相同。

`Error`PS我知道和之间的区别`Exception`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T10:10:23.633

扩展`RuntimeException`. `Error`通常仅由 JVM 在内部使用，用于指示您无法从中恢复的情况（例如内存不足）。

有关详细信息，请参阅[Java 语言规范 (11.1)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1)

# lucene.net - 计算 Lucene 索引中包含特定字段的文档总数

> ID：11558499
> 
> 赞同：0
> 
> 时间：2012-07-19T10:07:52.010
> 
> 标签：lucene.net, lucene

我试图在没有任何运气的情况下对 Lucene .NET 2.9.2 索引运行查询：

我的索引包含文档，其中一些包含名为“MyNum”的数字字段，而有些则不是。该字段已编入索引。

我正在尝试计算包含该字段的文档总数，无论字段值如何。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:28:48.563

您可以使用通配符查询来检索具有特定字段的所有文档。只需提供 * 作为值（这只是常规通配符）。这是示例代码：

```
IndexSearcher searcher = new IndexSearcher(reader);
TopDocs docs = searcher.Search(new WildcardQuery(new Term("MyNum", "*")), int.MaxValue);
Console.WriteLine(docs.TotalHits); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:01:03.017

像**fieldX:***这样的查询应该返回包含字段“fieldX”的所有文档。

您可能需要在搜索中允许前缀*****（我目前没有 Lucene 的副本。）

# javascript - webkit 中的新标签页

> ID：11558501
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:07:55.397
> 
> 标签：javascript, html, webkit

如何在浏览器（webkit）中打开新标签。通过 javascript、html 或 api webkit - 没关系。而且那不是一个孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:10:30.583

您不能以编程方式在 webkit 中打开新选项卡。目前您唯一可用的选项是打开一个新窗口。用户必须配置他们特定的基于 webkit 的浏览器的行为，即打开一个新窗口是启动一个新选项卡还是一个完全独立的窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:10:46.713

你不能。浏览器不公开任何类型的页面可访问 API 来控制浏览器选项卡，这是为了确保只有用户可以控制。

请注意，您可以创建新的浏览器窗口，并且浏览器*可能会*在新选项卡中打开这些新窗口（如果用户选择了该选项），但您无法控制它。

它不是 WebKit 属性：WebKit 只关心选项卡*内*发生的事情，而不是选项卡本身（与 Firefox/Gecko 不同，它为 UI 和页面使用相同的渲染引擎）。

# ios - 如何将范围滑块的功能添加到普通滑块中

> ID：11558506
> 
> 赞同：0
> 
> 时间：2012-07-19T10:08:03.593
> 
> 标签：ios, uislider

作为标题，如何实现如下链接的 2 向滑块？修剪视频时，我是否应该在普通滑块上覆盖子视图以模拟 UI？

[http://www.imore.com/record-trim-videos-ipad](http://www.imore.com/record-trim-videos-ipad)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:11:09.770

最后，我用3`UIImageView`代表“拇指”、“边框”、“背景缩略图”来模拟。这 3 个图像作为子视图从上到下添加到我的自定义滑块中。要切换我们是处于播放模式还是修剪视频模式，我们只需要按区域处理触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:33:44.167

搜索“范围滑块 iOS”，那里有一些，但我发现没有一个对我来说足够完整。也许一个会满足您的需求。

这是一个[ios-range-slider](http://buildmobile.com/wicked-ios-range-slider-part-one/)和另一个：[双滑块](http://dev.doukasd.com/2010/08/double-slider/)

# windows - wglSwapIntervalEXT 在哪个库中？

> ID：11558507
> 
> 赞同：1
> 
> 时间：2012-07-19T10:08:07.440
> 
> 标签：windows, opengl

我知道我需要调用 wglGetProcAddress 来获取扩展 wglSwapIntervalEXT 的地址。假设对 wglGetProcAddress 的调用成功，wglSwapIntervalEXT 是否位于 opengl32.lib 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:49:24.933

> wglSwapIntervalEXT 位于 opengl32.lib 中吗？

不。

opengl32.dll 基本上是由 GPU 驱动程序提供的实际 OpenGL 实现的蹦床，即所谓的 ICD（独立客户端驱动程序）。它还包含一个软件光栅化器，但这只是一个后备。

opengl32.lib 只是 DLL 的目录。

# jquery - jquery jshowoff 每个div的时间不同？

> ID：11558511
> 
> 赞同：0
> 
> 时间：2012-07-19T10:08:27.233
> 
> 标签：jquery

我有一个当前有 3 个 div 的页面，我正在使用 jshowoff 以每个 div 30 秒的速度旋转三个 div。我的问题是，有没有办法让一个 div 显示的时间与其他 div 不同？

例如 div 1 - 30 秒，div 2 - 2 分钟，div 3 - 30 秒？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:15:49.573

您可以尝试使用`setTimeout()`. 这是一个 Jsfiddle：

[http://jsfiddle.net/9Um94/2/](http://jsfiddle.net/9Um94/2/)

```
 $('#features').jshowoff({ speed:1500, links: false }); });

   setTimeout(function(){
     $("div.mydiv").fadeOut("slow", function () {
        $("div.mydiv").remove();
     });

   }, 2000); 
```

您可以通过更改`2000`为您的首选值来设置时间，请注意此值以毫秒为单位。所以 2000 = 2 秒。

另外，看看这个可能对您有帮助的类似问题：[Show and hide divs at a specific time interval using jQuery](https://stackoverflow.com/questions/914951/show-and-hide-divs-at-a-specific-time-interval-using-jquery)

# objective-c - Restkit - 子映射不继承其父映射？

> ID：11558512
> 
> 赞同：2
> 
> 时间：2012-07-19T10:08:28.393
> 
> 标签：objective-c, core-data, inheritance, mapping, restkit

我有一个`Parent`继承自的模型`NSManagedObject`和一个`Child`继承自 的模型`Parent`。

这是`Parent`映射：

```
RKManagedObjectStore* store = [RKObjectManager sharedManager].objectStore;
RKManagedObjectMapping* mapping = [RKManagedObjectMapping mappingForEntityWithName:@"Parent" inManagedObjectStore:store];
[mapping mapKeyPath:@"id" toAttribute:@"id"];
[[RKObjectManager sharedManager].mappingProvider addObjectMapping:mapping]; 
```

和`Child`映射：

```
RKManagedObjectStore* store = [RKObjectManager sharedManager].objectStore;
RKManagedObjectMapping* mapping = [RKManagedObjectMapping mappingForEntityWithName:@"Child" inManagedObjectStore:store];
[[RKObjectManager sharedManager].mappingProvider setMapping:mapping forKeyPath:@"child"]; 
```

然后，当我尝试将以下 JSON 对象映射到`Child`实例时：

```
{
  "child": {
    "id": 7
  }
} 
```

在 RestKit 跟踪中，我看到以下映射`Child`：

```
mappings => () 
```

为什么映射不从`Child`映射继承`Parent`？如何使映射继承工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:15:33.780

简而言之，它不起作用，因为 RestKit 不支持它，我认为不应该。

如果您希望子映射具有父映射，您也可以将其添加到子映射中，如果您独立编写它们，这是一行额外的代码，或者如果您使用该`mapKeyPathsToAttributes:`方法，则只需几个额外的字符。

关于您的具体示例，有一点很重要。一个是你不应该使用'id'作为你的属性名称，因为 id 在 ObjC 中是保留的（我不肯定它实际上会导致问题，但至少在代码中看到它会令人困惑）。

因此，RestKit 中有一个标准的约定来映射“id”属性，即将实体的名称添加到属性之前，即`Parent`会有一个`parentID`属性并且`Child`会有一个`childID`属性。仅此一点就说明了为什么在一般情况下继承这些属性（尤其是主键！）不是一个好主意。

此外，RESTful 服务器通常有某种基于 SQL 的后端，它可能支持也可能不支持 Core Data 所具有的实体继承，从而使对象从设备映射到服务器上的数据的方式变得复杂。例如，Rails 可以在一定程度上处理 STI，但任何比这更复杂的东西都需要 gems 或 hacks。

**编辑：（**取自 github 问题）如果有人发现这个正在寻找继承的方法，有一种相对简单的方法可以基于其他映射创建映射：

```
RKManagedObjectMapping* parentMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Child" inManagedObjectStore:store];
parentMapping.primaryKeyAttribute = @"parentID";
[parentMapping mapKeyPathsToAttributes: @"id", @"parentID", @"property_one", @"propertyOne", @"parent_only_property", @"parentOnlyProperty"];
[[RKObjectManager sharedManager].mappingProvider setMapping:mapping forKeyPath:@"parent"];

RKManagedObjectMapping* childMapping = [parentMapping copy];
childMapping.primaryKeyAttribute = @"childID";
[childMapping removeMapping:[childMapping mappingForAttribute:@"parentID"]];
[childMapping removeMapping:[childMapping mappingForAttribute:@"parentOnlyProperty"];
[childMapping mapKeyPathsToAttributes:@"id", @"childID", @"child_only_property", @"childOnlyProperty"];
[[RKObjectManager sharedManager].mappingProvider setMapping:childMapping forKeyPath:@"child"]; 
```

# android - TabActivity 中的 MapView

> ID：11558515
> 
> 赞同：0
> 
> 时间：2012-07-19T10:08:36.777
> 
> 标签：android

在我的应用程序中，我使用带有 5 个选项卡的 tabHost 和 TabWidget..在 Tab1 上，我想显示当前位置的地图..这是我的

```
 currentActivity extends TabActivity 
```

但在 Tab1（daeafult tab1）中，我想显示当前位置的地图......请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:13:34.907

检查下面的例子

[http://vkroz.wordpress.com/2009/07/03/programming-android-%E2%80%93-map-view-within-tab-view/](http://vkroz.wordpress.com/2009/07/03/programming-android-%E2%80%93-map-view-within-tab-view/)

# ruby-on-rails - Ruby on Rails：可排序表列错误

> ID：11558522
> 
> 赞同：1
> 
> 时间：2012-07-19T10:08:47.553
> 
> 标签：ruby-on-rails, ruby, jquery-ui-sortable, railscasts

我正在尝试遵循有关[Sortable Table Columns](http://railscasts.com/episodes/228-sortable-table-columns?view=asciicast)的 railcasts 教程，但出现错误。

SQLite3::SQLException: 没有这样的列: 名称: SELECT "projects".* FROM "projects" ORDER BY name asc

我已经按照教程中的说明进行操作，唯一改变的是表大小、名称和列名。

这是我的搜索视图：

```
<table class = "pretty">
 <tr>
<th><%= sortable "project_name", "Project name" %> </th>
<th><%= sortable "client", "Client" %></th>
<th>Exception pm</th>
<th>Project owner</th>
<th>Tech</th>
<th>Role</th>
<th>Industry</th>
<th>Financials</th>
<th>Business div</th>
<th>Status</th>
<th>Start date</th>
<th>End date</th>
<th>Entry date</th>
<th>Edited date</th>
<th>Summary</th>
<th>Lessons learned</th>
<th>Customer benifits</th>
<th>Keywords</th>
<th></th>
<th></th>
<th></th>
</tr>

<% @projects.each do |t| %>
<tr>
<td><%= t.project_name %></td>
<td><%= t.client %></td>
<td><%= t.exception_pm %></td>
<td><%= t.project_owner %></td>
<td><%= t.tech %></td>
<td><%= t.role %></td>
<td><%= t.industry %></td>
<td><%= t.financials %></td>
<td><%= t.business_div %></td>
<td><%= t.status %></td>
<td><%= t.start_date %></td>
<td><%= t.end_date %></td>
<td><%= t.entry_date %></td>
<td><%= t.edited_date %></td>
<td><%= t.summary %></td>
<td><%= t.lessons_learned %></td>
<td><%= t.customer_benifits %></td>
<td><%= t.keywords %></td>
<td><%= link_to 'Show', project %></td>
<td><%= link_to 'Edit', edit_project_path(project) %></td>
<td><%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
</tr>
<% end %>
</table> 
```

编辑：

这是我的数据库架构

```
ActiveRecord::Schema.define(:version => 20120717141952) do

create_table "projects", :force => true do |t|
t.string   "project_name"
t.string   "client"
t.string   "exception_pm"
t.string   "project_owner"
t.string   "tech"
t.string   "role"
t.string   "industry"
t.string   "financials"
t.string   "business_div"
t.string   "status"
t.date     "start_date"
t.date     "end_date"
t.datetime "entry_date"
t.datetime "edited_date"
t.text     "summary"
t.text     "lessons_learned"
t.text     "customer_benifits"
t.text     "keywords"
t.datetime "created_at",        :null => false
t.datetime "updated_at",        :null => false
end

end 
```

有任何想法吗？任何帮助都将不胜感激。我是 ruby​​ on rails 的新手，所以放轻松:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:53:06.283

抱歉，我不明白在阅读教程时我必须命名默认列。我的默认列是 project_name，而不是 name。

谢谢

# javascript - Javascript在div中查找所选文本的出现位置

> ID：11558527
> 
> 赞同：3
> 
> 时间：2012-07-19T10:09:08.203
> 
> 标签：javascript, indexing

我有一个包含五次单词的字符串。如果我选​​择了 hello 它应该返回 4

```
 <div id="content">hello hai hello hello hello</div> 
```

获取选定的文本脚本

```
<script>
 if(window.getSelection){
   t = window.getSelection();
 }else if(document.getSelection){
   t = document.getSelection();
 }else if(document.selection){
   t =document.selection.createRange().text;
 }
 </script> 
```

如果选择 `hai`它应该返回`1`。

如果选择 `hello hai`它应该返回`1`。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T10:46:59.267

假设保证 的内容`<div>`是单个文本节点，这并不太难。以下不适用于 IE < 9，不支持 Selection 和 Range API。如果您需要对这些浏览器的支持，我可以为这种特殊情况提供代码，或者您可以使用我的[Rangy](http://code.google.com/p/rangy)库。

现场演示：http: [//jsfiddle.net/timdown/VxTfu/](http://jsfiddle.net/timdown/VxTfu/)

代码：

```
if (window.getSelection) {
    var sel = window.getSelection();
    var div = document.getElementById("content");

    if (sel.rangeCount) {
        // Get the selected range
        var range = sel.getRangeAt(0);

        // Check that the selection is wholly contained within the div text
        if (range.commonAncestorContainer == div.firstChild) {
            // Create a range that spans the content from the start of the div
            // to the start of the selection
            var precedingRange = document.createRange();
            precedingRange.setStartBefore(div.firstChild);
            precedingRange.setEnd(range.startContainer, range.startOffset);

            // Get the text preceding the selection and do a crude estimate
            // of the number of words by splitting on white space
            var textPrecedingSelection = precedingRange.toString();
            var wordIndex = textPrecedingSelection.split(/\s+/).length;
            alert("Word index: " + wordIndex);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:23:19.853

您需要使用 DOM 的[Range](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#ranges)功能。以下是如何获取当前选择的范围：

```
var currentRange = window.getSelection().getRangeAt(0); 
```

从那里 currentRage.startOffset 将告诉您选择在文件中的位置。因此，您需要将其与元素的起始范围进行比较：

```
var myContent = document.getElementById('content');
var divRange = document.createRange ();
divRange.selectNodeContents (myContent); 
```

现在您可以将 divRange.startOffset 与您的选择 startOffset 进行比较，并确定您在哪个位置。

# c - 通过多线程处理大文件

> ID：11558528
> 
> 赞同：6
> 
> 时间：2012-07-19T10:09:13.463
> 
> 标签：c, algorithm, large-files

磁盘上有一个相当大的文件（>10G），文件中的每一行由一个行号和一个人的名字组成，如下所示：

```
1 Jane
2 Perk
3 Sime
4 Perk
.. .. 
```

我必须阅读这个大文件，找到每个名字的频率，最后按每个名字的频率降序输出结果，如下所示：

```
Perk 2
Jane 1
Sime 1 
```

按照面试官的要求，上面的工作应该尽可能高效地完成，并且允许多线程。我的解决方案是这样的：

1.  因为文件太大，我把文件分割成几个小文件，每个小文件大约`100M`，通过`lseek`我可以定位每个小文件的开头和结尾`(beg, end)`；

2.  对于这些小文件，有一个以人名作为键的共享哈希映射，以及它显示的次数作为值；

3.  对于每个小文件，都有一个单独的线程经过，每次线程遇到一个人的名字，都会`value`在共享的hash-map中增加对应的值；

4.  当所有线程都完成后，我认为是时候根据`value`字段对哈希图进行排序了。

但是由于该文件中的名称可能太多，因此排序会很慢。我没有想出如何按降序输出名称的好主意。

希望任何人都可以帮助我解决上述问题，给我一个更好的解决方案，告诉我如何通过多线程和排序的东西来完成这项工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T10:18:51.210

使用[map-reduce](http://en.wikipedia.org/wiki/MapReduce)方法可能是解决您的问题的好主意。该方法将包括两个步骤：

1.  **Map**：从文件中读取数据块并创建一个线程来处理该数据
2.  **Reduce**：主线程等待所有其他线程完成，然后结合每个单独线程的结果。

此解决方案的优点是您不需要在线程之间进行锁定，因为它们中的每一个都将对不同的数据块进行操作。正如您所提议的那样，使用共享数据结构也可能是一种解决方案，但是由于争用锁定，您可能会有一些开销。

当所有线程的数据都可用时，您需要在 reduce 步骤中进行排序部分。但是您可能希望在 map 步骤中做一些工作，以便在 reduce 步骤中更容易（更快）完成完整的排序。

如果您希望避免最后的顺序排序，您可以使用一些自定义数据结构。我会使用地图（类似于[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)或[哈希表](http://en.wikipedia.org/wiki/Hash_table)）来快速查找名称。此外，我会使用[堆](http://en.wikipedia.org/wiki/Heap_(data_structure))来保持名称之间的频率顺序。当然，您需要拥有这些数据结构的并行版本。根据并行化的粗糙程度，您可能会遇到锁定争用问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T10:52:46.080

如果我在面试问题中使用“高效”这个词问这个问题，我会期望得到类似“cut -f 2 -d ' ' < file | sort | uniq -c”的答案，因为效率通常是关于不浪费时间解决问题已经解决了问题。实际上，这是个好主意，我会在我们的面试问题中添加类似的内容。

您的瓶颈将是磁盘，因此各种多线程都在过度设计解决方案（这也会影响“效率”）。如果有旋转的磁盘，像这样拆分你的读取会使事情变慢，或者至少会使缓冲区缓存更加混乱，并且不太可能启动落后算法。坏主意，不要这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T10:13:48.613

我不认为多线程是一个好主意。程序的“慢”部分是从磁盘读取，多线程从磁盘读取不会使其更快。它只会使它变得更加复杂（例如，对于每个块，您必须找到第一个“完整”行，并且您必须协调各个线程，并且每次访问时都必须锁定共享哈希映射） . 您可以使用“本地”哈希映射，然后在最后合并它们（当所有线程完成时（在 10gb 的末尾），部分哈希映射被合并）。现在您不需要同步对共享地图的访问。

我认为对生成的哈希映射进行排序将是最简单的部分，如果可以将完整的哈希映射保存在内存中:-) 你只需将它复制到一个`malloc`(ed) 内存块中，`qsort`然后通过它的计数器来复制它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T10:21:11.663

您在解决方案中的 (2) 和 (4) 步骤使其基本上是连续的（第二个引入了锁定以保持哈希映射一致，最后一个是您尝试对所有数据进行排序的地方）。

最后对 hash-map 进行一步排序有点奇怪，你应该使用增量排序技术，如 heapsort（锁定所需的数据结构）或 mergesort（对“直方图”文件的部分进行排序，但避免合并一切“最后都在一个主线程中”-尝试创建排序网络并在排序的每个步骤中混合输出文件的内容）。

多线程读取可能是一个问题，但对于现代 SSD 驱动器和激进的读取缓存，多线程并不是主要的减速因素。这都是关于同步结果排序过程的。

这是合并排序的并行化示例：http: [//dzmitryhuba.blogspot.com/2010/10/parallel-merge-sort.html](http://dzmitryhuba.blogspot.com/2010/10/parallel-merge-sort.html)

再一次，正如我所说，一些排序网络可能有助于实现高效的并行排序，但不是简单的“等待所有子线程和排序结果”。也许，如果你有很多处理器，双音排序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T05:47:30.713

面试官最初的问题*是“......并且允许使用多线程”*。这个问题的措辞可能有点模棱两可，但问题的精神很明显：面试官要求候选人**编写一个程序**来解决问题，并分析/证明在建议的解决方案。这是一个简单的问题，用于测试候选人思考大规模问题并解释他们做出的算法选择的能力，确保候选人没有在不理解的情况下从互联网网站上反刍。

鉴于此，无论是否使用多线程，这个特定的面试问题都可以在 O( *n* log *n )（渐近地说）内有效地解决，并且***多线程还可以用于**以*对数*方式加速实际执行时间。

**解决方案概述**

如果您被顶级公司问到 OP 的问题，以下方法将表明您确实了解问题和所涉及的问题。在这里，我们提出了一个两阶段的方法：

1.  该文件首先被分区并读入内存。

2.  分区上使用了特殊版本的*合并排序*，该分区在对文件进行排序时同时记录每个名称的频率。

例如，让我们考虑一个具有 32 个名称的文件，每个名称长一个字母，并且每个名称的初始频率计数为 1。上述策略可以形象化如下：

```
1\. File:           ARBIKJLOSNUITDBSCPBNJDTLGMGHQMRH                32 Names

2\. A|R|B|I|K|J|L|O|S|N|U|I|T|D|B|S|C|P|B|N|J|D|T|L|G|M|G|H|Q|M|R|H 32 Partitions
   1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1 with counts

3\.  AR  BI  JK  LO  NS  IU  DT  BS CP  BN  DJ  LT  GM  GH  MQ  HR  Merge #1
    11  11  11  11  11  11  11  11 11  11  11  11  11  11  11  11  and tally

4\.   ABRI    JKLO    INSU    BDST   BCNP    DJLT    GHM     HMQR   Merge #2
     1111    1111    1111    1111   1111    1111    211     1111   and tally

5\.     ABIJKLOR         BDINSTU       BCDJLNPT         GHMQR       Merge #3
       11111111         1111211       11111111         22211       and tally

6\.           ABDIJKLNORSTU                  BCDGHJLMNPQRT          Merge #4
             1212111111211                  1112211211111          and tally

7\.                       ABCDGHIJKLMNOPQRSTU                       Merge #5
                         1322111312132113121                       and tally 
```

因此，如果我们从头到尾读取内存中的最终列表，它会产生排序列表：

```
A|B|C|D|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U
-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
1|3|2|2|1|1|1|3|1|2|1|3|2|1|1|3|1|2|1 = 32 Name instances (== original file). 
```

* * *

**为什么解决方案是有效的**

无论是否使用哈希表（如原始海报所建议的那样），以及是否使用多线程，这个问题的任何解决方案都不能比 O( *n* log *n* ) 更有效地解决，因为必须执行排序。鉴于此限制，可以采用两种策略：

1.  从磁盘读取数据，使用哈希表管理名称/频率总计，然后对哈希表内容进行排序（原发帖人建议的方法）

2.  从磁盘读取数据，用文件中的频率总数初始化每个名称，然后合并排序名称，同时对每个名称的所有总数求和（此解决方案）。

方案（1）要求在读入所有数据后对哈希表进行排序。方案（2）在排序时进行频率统计，从而消除了哈希表的开销。完全不考虑多线程，我们已经可以看到，即使对于解决方案 (1) 使用最有效的哈希表实现，解决方案 (2) 已经更有效，因为它根本没有哈希表的开销。

**多线程的约束**

在解决方案 (1) 和解决方案 (2) 中，假设解决方案 (1) 使用了有史以来最有效的哈希表实现，两种算法都在 O( *n* log *n* ) 中渐近执行相同的操作；只是它们的操作顺序略有不同。然而，虽然多线程解决方案 (1) 实际上会减慢其执行速度，但**多线程解决方案 (2) 将在速度上获得显着提高**。这怎么可能？

如果我们使用多线程解决方案 (1)，无论是在从磁盘读取还是在之后的排序中，都会遇到哈希表争用问题，因为所有线程都试图同时访问哈希表。特别是对于写入表，这种争用可能会大大削弱解决方案 (1) 的*执行时间*，以至于在*没有多线程*的情况下运行它实际上会提供更快的执行时间。

为了使多线程能够加快执行时间，有必要确保每个线程执行的每个工作块都*独立*于其他每个线程。这将允许所有线程以最大速度运行而不会争用共享资源并更快地完成工作。解决方案 (2) 正是这样做的，它完全删除了哈希表并使用了*Merge Sort*，这是一种**分而治**之的算法，允许将问题分解为彼此*独立*的子问题。

**多线程和分区以进一步缩短执行时间**

为了多线程合并排序，可以将文件划分为多个分区，并创建一个新线程来合并每个连续的分区对。由于文件中的名称是可变长度的，因此必须从头到尾连续扫描文件才能进行分区；不能对文件进行随机访问。但是，由于任何解决方案都必须至少扫描一次文件内容，因此仅允许对文件进行串行访问仍然会产生*最佳*解决方案。

多线程解决方案 (2) 可以预期什么样的执行时间加速？鉴于其简单性，该算法的分析非常棘手，并且是各种白皮书的主题。但是，将文件分成*n 个*分区将使程序的执行速度 ( *n* / log( *n* )) 比在没有文件分区的单个 CPU 上快几倍。简单来说，如果单个处理器需要 1 小时来处理一个 640GB 的文件，那么将文件分成 64 个 10GB 的块并在具有 32 个 CPU 的机器上执行将使程序在大约 6 分钟内完成，*增加了 10 倍*（忽略磁盘开销）。

# performance - Flex 客户端的性能测试

> ID：11558530
> 
> 赞同：1
> 
> 时间：2012-07-19T10:09:13.750
> 
> 标签：performance, apache-flex, testing, ria

虽然我已经使用性能测试工具很多年了，但它们都在网络级别运行，记录客户端和服务器之间的流量。

大多数时候，经理对最终用户看到的性能感兴趣。

使用诸如 Flex 之类的 RIA 应用程序，用户看到的部分性能由客户端桌面本身的计算等组成。但是大多数工具都不会记录那个时间。

一些 RIA 包括分析器，但分析器仅模拟一个客户端。

有没有人找到一个很好的解决方案？我能想到的最好的想法是在服务器上创建一个网络级工具（例如 Neoload），然后使用分析器或一些 GUI 自动化来记录完整的客户端时间。不过，这似乎有点笨拙。

谢谢，

戈登

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:14:37.590

有大量工具可用于测试 Flex 应用程序的整体性能，并且大多数工具都专注于网络通信性能（主要是针对大型应用程序的 AMF）和后端的负载测试。

以下是一些工具或服务的简短列表：

*   [http://www.spoon.as/ecosystem/testing-load-and-performance/](http://www.spoon.as/ecosystem/testing-load-and-performance/)
*   [http://www.genilogix.com/products-hp-performance.aspx](http://www.genilogix.com/products-hp-performance.aspx) / 文章：[使用 LoadRunner 对 Flex 应用程序进行性能测试](http://softwaretesttips.com/2011/11/21/performance-testing-flex-applications-using-loadrunner/)

当您测试客户端应用程序时，有许多参数需要测试：

*   应用程序加载和初始化时间
*   帧率
*   内存消耗
*   垃圾收集/System.pauseForGCIfCollectionImminent() API 的影响
*   检查应用程序是否正在使用硬件加速 (GPU)（可以显着提高图形性能，但也有一些缺点）

以下是一些应该有用的链接：

*   [Flash Builder Profiler（商业）](http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0169-8000.html)
*   [Adobe TV：测量帧率性能](http://tv.adobe.com/watch/codedependent/measuring-frame-rate-performance/)
*   [Adobe 文章：Flash Player 和 Adob​​e AIR 的垃圾收集内部结构](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/garbage-collection.html)
*   向 AIR 3[中的垃圾收集器提供提示](http://blogs.adobe.com/cantrell/archives/2011/10/providing-hints-to-the-garbage-collector-in-air-3.html)
*   [DemonsterDebugger](http://demonsterdebugger.com/)非常适合调试和 CPU 分析
*   [Miner（以前的 Flash Preload Profiler）](http://jpauclair.net/FlashPreloadProfiler/) / [*The Miner*文档](http://www.sociodox.com/theminer/)
*   [Adobe Max 2011 演示 Monocle 分析器](http://tv.adobe.com/watch/max-2011-sneak-peeks/max-2011-sneak-peek-monocle/)Adob​​e 正在开发 Monocle，这是一个大大改进的分析器，在 Max 2011 上进行了演示。计划于 2012 年底发布（Flash Player “Dolores”）
*   [Adobe TV：Flash 运行时中的并发性](http://tv.adobe.com/watch/max-2011-develop/concurrency-in-flash-runtimes/)（从 Flash Player 11.4 beta 开始）
*   [Adobe TV：性能调整 Flex 移动应用程序](http://tv.adobe.com/watch/max-2011-develop/performancetuning-mobile-flex-applications/)
*   [Stage3D 硬件加速](http://www.adobe.com/devnet/flashplayer/stage3d.html)

很大程度上取决于您所针对的设备类型或您使用的功能，例如

*   移动与桌面部署
*   您是否加载大量数据
*   实时通信要求
*   视觉项目或组件的数量
*   动画数量/动画项目
*   屏幕分辨率（例如为非常高分辨率的智能电视构建应用程序）
*   你用高清视频播放吗
*   视频流 - 您使用的是哪种质量和分辨率

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:12:03.317

Selenium 有一个扩展来测试 Flex UI： [http ://code.google.com/p/flex-ui-selenium/](http://code.google.com/p/flex-ui-selenium/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:37:34.307

尝试使用[单片眼镜](http://tv.adobe.com/watch/max-2011-sneak-peeks/max-2011-sneak-peek-monocle/)....真的很强大

# php - 在 appcelerator 钛合金中使用 Paypal Express Checkout

> ID：11558531
> 
> 赞同：0
> 
> 时间：2012-07-19T10:09:20.560
> 
> 标签：php, paypal, titanium-mobile, paypal-sandbox, express-checkout

我正在 Appcelerator Titanium 中开发一个移动商务应用程序，并使用 Paypal 作为我的支付网关。我正在使用 Paypal 的 Express Checkout 机制，并在 php 脚本中执行所有 Paypal 交互内容，并通过 xhr 对象调用这些脚本。我的 php 脚本在浏览器中运行良好，付款完成，显示感谢消息，但是当我尝试从应用程序调用 php 脚本时，它重定向到显示消息“请登录以使用沙盒功能”的贝宝沙盒页面，但什么也没有else.I 卡在这里，不能做任何进展。需要注意的是，我已经通过我的沙盒帐户登录到沙盒了？我花了很多时间来搜索这个问题，但无法让它工作。请帮助我在这里做错了什么？我真的需要你的帮助。在这方面的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:38:42.010

您是否尝试过在 Appcelerator Marketplace 上使用 PayPal 模块？它更容易集成并且是免费的： [https ://marketplace.appcelerator.com/apps/780?693288467](https://marketplace.appcelerator.com/apps/780?693288467)

# android - NFC 与 ACR 122s 和 Android ICS

> ID：11558533
> 
> 赞同：0
> 
> 时间：2012-07-19T10:09:24.700
> 
> 标签：android, nfc, nfc-p2p

我目前参与了一个需要使用 NFC 进行通信的项目，但我被卡住了。这些设备是 ACR122s 套件和 Galaxy Nexus (ICS 4.0.4.)。经过长时间的搜索，我在 Windows 下选择了 ISMB-SNEP 库 (http://code.google.com/p/ismb-snep-java/)，但我无法获取示例代码来识别 ACR 阅读器/编写器. ACR 产品盒中包含的软件确实可以识别读写器。

有什么方法可以让 ISMB-SNEP 库与 ACR122 一起正常工作？我应该选择另一个（更合适的？）图书馆吗？你会推荐我再买一个 NFC 读写器吗？有没有人让任何读写器在 p2p 模式下成功地与 Android ICS 手机交换信息？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:51:28.997

如果您愿意使用不同的阅读器，例如[idChamp](http://serialio.com/products/RFID/Mobile/idChamp/idChampRS2ProxBT.php)，您可以使用[SerialMagic Gears](http://serialio.com/support/SerialMagic/Android/API_Android.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:21:45.223

实际上它正在读取您的机器，但它会给您一条消息，例如机器无法读取/不支持/ ..等

由于代码中的一个小问题，代码会检查当前是否有卡片正在被扫描。如果不是，它将抛出一个没有意义的异常。

修复抛出异常的位置，它应该可以正常工作。

# javascript - 在Javascript中计算元素高度

> ID：11558538
> 
> 赞同：2
> 
> 时间：2012-07-19T10:09:36.953
> 
> 标签：javascript, jquery, dom

我有这样的Javascript代码：

```
$content.each(function(i) {
    var $el = $(this);
    // save each content's height (where the menu items are)
    // and hide them by setting the height to 0px
    $el.data('height', $el.outerHeight(true)).css('height', '0px').show();
}); 
```

在这种情况下：

```
 <div id="sbi_container" class="sbi_container">
        <div class="sbi_panel" data-bg="images/1.jpg">
            <a href="#" class="sbi_label">About</a>
            <div class="sbi_content">
                <ul>
                    <li><a href="#">Subitem</a></li>
                    <li><a href="#">Subitem</a></li>
                    <li><a href="#">Subitem</a></li>
                </ul>
            </div>
        </div>
        <div class="sbi_panel" data-bg="images/2.jpg">
            ...
        </div> 
```

我不知道为什么，但是当只有一个`<ul>`（我们正在计算的高度）有一个`<li>`包含多个单词的 a 时，它会在下面添加一个单独的空格`<ul>`。当只有一个长字时，一切都好。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:56:40.003

尝试这个

```
.your_ul { font-size: 0; }
.your_ul li { font-size: 1234px } 
```

它可能会起作用。

# c - C: 为什么 fprintf(stdout,....) 这么慢？

> ID：11558540
> 
> 赞同：12
> 
> 时间：2012-07-19T10:09:48.700
> 
> 标签：c

我仍然经常使用控制台输出来了解我的代码中发生了什么。我知道这可能有点过时了，但我也用它来将标准输出“管道”到日志文件等中。

但是，事实证明，控制台的输出由于某种原因变慢了。我想知道是否有人可以解释为什么控制台窗口的 fprintf() 似乎有点阻塞。

到目前为止我所做/诊断的事情：

1.  我测量了一个简单的 `fprintf(stdout,"quick fprintf\n");` 它需要的时间：0.82ms（平均）。这被认为太长了，因为 a`vsprintf_s(...)`在几微秒内将相同的输出写入字符串。因此，必须有一些专门针对控制台的阻塞。

2.  为了摆脱阻塞，我曾经`vsprintf_s(...)`将输出复制到类似 fifo 的数据结构中。数据结构受临界区对象保护。然后，一个单独的线程通过将排队的输出放到控制台来取消数据结构的排队。

3.  通过引入管道服务，我可以获得进一步的改进。我的程序的输出（应该在控制台窗口中结束）按照以下方式进行：

    *   A`vsprintf_s(...)`将输出格式化为简单的字符串。
    *   字符串被排队到类似fifo的数据结构中，例如链表结构。此数据结构受临界区对象的保护。
    *   第二个线程通过将输出字符串发送到命名管道来使数据结构出队。
    *   第二个进程读取命名管道并将字符串再次放入类似 fifo 的数据结构中。这是使读数远离控制台的阻塞输出所必需的。读取过程在读取命名管道时速度很快，并持续监控管​​道缓冲区的填充水平。
    *   第二个进程中的第二个线程最终将数据结构出列`fprintf(stdout,...)`到控制台。

所以我有两个进程，每个进程至少有两个线程，它们之间有一个命名管道，管道两侧都有类似 fifo 的数据结构，以避免在管道缓冲区已满时阻塞。

要确保控制台输出是“非阻塞”的，就需要做很多事情。但结果还不错。我的主程序可以在几微秒内编写复杂的 fprintf(stdout,...)。

也许我应该早点问：有没有其他（更简单！）的方式来获得非阻塞控制台输出？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T10:32:09.607

我认为时间问题与默认情况下控制台是*行缓冲*的事实有关。这意味着每次您向其中写入一个`'\n'`字符时，您的整个输出缓冲区都会被发送到控制台，这是一个相当昂贵的操作。这是您为使该行立即出现在输出中所支付的价格。

*您可以通过将缓冲策略更改为完全缓冲*来更改此默认行为。结果是输出将以与缓冲区大小相等的块发送到控制台，但单个操作将更快地完成。

在您首次写入控制台之前进行此调用：

```
char buf[10000];
setvbuf(stdout, buf, _IOFBF, sizeof(buf)); 
```

个别写入的时间应该会有所改善，但输出不会立即出现在控制台中。这对调试不是很有用，但时序会有所改善。如果您设置一个`fflush(stdout)`定期调用的线程，例如每秒一次，您应该在单个写入的性能和程序写入输出之间的延迟和您可以实际看到它的时间之间取得合理的平衡控制台。

# actionscript-3 - Flex 是否可以访问/播放位于共享文件夹中的视频？

> ID：11558542
> 
> 赞同：1
> 
> 时间：2012-07-19T10:10:07.470
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

如果我要使用放置在共享文件夹（在另一台机器上）中的视频 URL，则无法播放视频

加载（“\192.168.0.10\SampleVideo\15.mp4”）；

但如果我把这个视频放在我的项目资产中，效果很好

加载（“资产/SampleVideo/15.mp4”）；

如何使用 UNC 路径加载/播放视频？

使用图像源时同样的问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:11:28.393

Flex 不支持所有现有协议...

事实上，开箱即用只支持少数几个：HTTP、HTTPS 和本地文件。

这是 URLRequest 的文档和支持的协议列表：

*   [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html)
*   [http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b8f6c0-7ffe.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b8f6c0-7ffe.html)

如果要使用其他协议，则必须使用 3rd 方库（例如 FTP），但是 ASAIK，UNC 没有任何东西。

M。

# spring - JPA EntityManager 返回没有 entityManager.clear 的陈旧值

> ID：11558549
> 
> 赞同：1
> 
> 时间：2012-07-19T10:10:40.287
> 
> 标签：spring, hibernate, jpa

我正在将 JPA EntityManager 与 Spring/Hibernate 一起使用，当我从休眠会话更新实体然后从不同的休眠会话查看它时，entitymanager 似乎表现得很奇怪。

我的应用程序中有以下配置：

1.  EHCache，并**启用二级缓存**
2.  `@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)`在实体上
3.  延长`PersistenceContext`_`em`
4.  `OpenEntityManagerInViewFilter`

调用`em.clear()`解决了这个问题。我尝试禁用二级缓存、查询缓存等，但没有帮助。我希望 entitymanager 会处理这个问题。这是预期的吗？我正在寻找一种更清洁的方法，并取消调用`em.clear()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:36:07.533

这些陈旧的实体由扩展的持久性上下文管理，独立于事务。在 JPA 2.0 规范中，这拼写如下：

> 请注意，当一个新事务开始时，扩展持久性上下文中的托管对象不会从数据库中重新加载。

没有任何内置功能可以自动刷新它们。您可以做的是对单个实体使用 clear 或 EntityManager.refresh，并且可能在映射中使用级联 REFRESH 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:04:59.297

我找到了问题的根本原因。这是因为我的更新和获取是从两个不同的 servlet 上下文中完成的。我现在已将它们置于相同的上下文中，并且效果很好。

# javascript - 如何将用户输入的值写入 html 页面中的 csv 文件或 excel 文件

> ID：11558552
> 
> 赞同：0
> 
> 时间：2012-07-19T10:10:47.810
> 
> 标签：javascript, html

如何将 html 中文本框的值导出到 csv 或 excel 中。我创建了一个 HTML 表单，它将在本地计算机上使用，并希望将表单数据保存在 CSV 文件中。

每次提交表单时，都应在 CSV 文件中添加一行。

这需要在本地运行，因此不能使用 PHP 或 JSP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:21:20.863

您可以通过 java 脚本使用文件处理技术来编写 .csv 文件

```
 var fso = new ActiveXObject("Scripting.FileSystemObject");
 // 2=overwrite, true=create if not exist, 0 = ASCII
 varFileObject = fso.OpenTextFile("C:\\myfile.csv", 2, true,0);
 varFileObject.write("File handling in Javascript");
 varFileObject.close(); 
```

有关如何在 Javascript 中使用文件处理的更多信息，请访问[代码项目站点](http://www.codeproject.com/Articles/18869/File-Handling-at-Client-Side-Using-Javascript)

# php - 根据最近的一个或另一个字段排序

> ID：11558554
> 
> 赞同：2
> 
> 时间：2012-07-19T10:10:51.993
> 
> 标签：php, sql, postgresql

如果我有这样的查询

```
$line_item_status_query = 
"SELECT p.description, 
       p.production_order_id, 
       l.start_user, 
       p.sequence, 
       l.start :: date, 
       l.stop :: date, 
       pr.id, 
       pr.process, 
       pr.process_sequence, 
       pr.caption_in_process, 
       pr.caption_closed, 
       pr.show_to_customer 
FROM   production_order_processes p 
       LEFT JOIN production_order_process_log l 
              ON l.production_order_process_id = p.id 
       LEFT JOIN processes pr 
              ON pr.process_sequence = p.sequence 
WHERE  l.production_order_id = (SELECT id 
                                FROM   production_orders 
                                WHERE 
       sales_order_line_id = '".$sales_order_line_id."') 
ORDER  BY p.sequence"; 
```

和`l.start :: date`/或`l.stop :: date`可能为空或为空，我该怎么做`ORDER BY`才能根据最近的日期将返回的结果按升序（或降序）排列？

我想用一些条件逻辑替换 p.sequence 的顺序，但我已经超出了我的深度。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:14:14.863

带有案例陈述

```
 ORDER BY 
    CASE 
    WHEN l.start>l.stop THEN l.start 
    ELSE COALESCE(l.stop, l.start) 
    END 
```

编辑：这是一个通用的 SQL 解决方案，但如果您的平台支持它，Frank Heikens 的 GREATEST 答案会更简洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:42:54.800

使用[GREATEST()](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-GREATEST-LEAST)：

```
ORDER BY
  GREATEST(l.start, l.stop) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:17:13.160

我不确定我是否*根据最近的日期*理解您的短语。但是，您可以通过`case`以下方式按顺序使用：

```
ORDER BY (case when l.start is null and l.stop is null then null
               when l.start is null then l.stop
               when l.stop is null then l.start
               when l.start > l.stop then l.start
               else l.stop
          end) 
```

这将用于排序：

*   `l.start`如果`l.stop`为空
*   `l.stop`如果`l.start`为空
*   更新的`l.stop`，`l.start`如果两者都不是`null`
*   `null`如果两者都是`null`

# jsf - JSF 下载后删除文件？

> ID：11558559
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:11:10.927
> 
> 标签：jsf, download

我在 jsf 应用程序上，我想：

1.  列出 X 目录（Windows）上的文件一个 JSF 组件。
2.  用户可以下载一个那些文件，并在下载后。
3.  从服务器中删除下载的文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:22:37.837

Primefaces 的示例。

1.  [下载](http://www.primefaces.org/showcase/ui/fileDownload.jsf)
2.  [库斯](http://www.primefaces.org/showcase/ui/fileUploadDnd.jsf)
3.  删除 -> www.exampledepot.com/egs/java.io/deletefile.html

# php - 如何使 Jquery 验证错误消息动态化？

> ID：11558561
> 
> 赞同：1
> 
> 时间：2012-07-19T10:11:25.293
> 
> 标签：php, jquery

> **可能重复：**
> [不同语言的 jQuery 验证](https://stackoverflow.com/questions/5618499/jquery-validation-in-different-languages)

我正在使用 jquery.validate.js。而且我需要用两种语言显示错误消息。我怎样才能做到这一点？如何使错误消息动态化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:52:22.953

我将其用于荷兰网站。只需将其添加到 .js 文件并包含它。

```
jQuery.extend(jQuery.validator.messages, {
    required: "Dit is een verplicht veld.",
    remote: "Controleer dit veld.",
    email: "Vul hier een geldig email adres in.",
    url: "Vul hier een geldige URL in.",
    date: "Vul hier een geldige datum in.",
    dateISO: "Vul hier een geldige datum in (ISO).",
    number: "Vul hier een geldig nummer in.",
    digits: "Vul hier alleen nummers in.",
    creditcard: "Vul hier een geldig credit card nummer in.",
    equalTo: "Vul hier dezelfde waarde in.",
    accept: "Vul hier een waarde in met een geldige extensie.",
    maxlength: jQuery.validator.format("Vul hier maximaal {0} tekens in."),
    minlength: jQuery.validator.format("Vul hier minimaal {0} tekens in."),
    rangelength: jQuery.validator.format("Vul hier een waarde in van minimaal {0} en maximaal {1} tekens."),
    range: jQuery.validator.format("Vul hier een waarde in van minimaal {0} en maximaal {1}."),
    max: jQuery.validator.format("Vul hier een waarde in kleiner dan of gelijk aan {0}."),
    min: jQuery.validator.format("Vul hier een waarde in groter dan of gelijk aan {0}.")
}); 
```

要添加自定义类，请使用：

```
$.validator.addMethod(
    'class', function (value, element), 'message'
); 
```

# php - 不能在 a 中使用 twitter-bootstrap popover我在 <select>html 标记中显示一个列表，并且我想通过弹出框显示有关每个项目的一些详细信息。我加载了所有 js 文件并为每个 <option>进行了初始化，但它不会显示任何信息。</option></select>

> ID：11558562
> 
> 赞同：0
> 
> 时间：2012-07-19T10:11:30.360
> 
> 标签：php, javascript, html, twitter-bootstrap, popover

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:57:29.160

将您的循环更新`foreach`为如下所示。

```
<?php foreach($type_traitement_simple as $tts): ?>
<option value="<?php echo $tts->id_type_traitement_simple; ?>"
    data-content="<?php echo $tts->description; ?>"
    data-title="<?php echo $tts->name; ?>"><?php echo $tts->name; ?></option>
<?php endforeach; ?> 
```

那应该是循环排序的。现在将下面的 JavaScript 放在 jQuery、Bootstrap Tooltip 和 Bootstrap Popover 脚本之后。

```
<script type="text/javascript">
$(function() {
    $('#type_traitement option').popover({
        placement: 'right',
        trigger: 'manual'
    }).hover(function() {
        $(this).popover('toggle');
    });
});
</script> 
```

# linux - 按照符号链接从当前目录运行

> ID：11558565
> 
> 赞同：4
> 
> 时间：2012-07-19T10:11:48.570
> 
> 标签：linux, hyperlink, sh

我有一个`run.sh`位于只读目录某处的脚本`/install/app/release_1.0.0/`和一个指向完全访问目录中该脚本的符号链接`/packages/app/`。该脚本使用相对路径对文件进行操作。当我使用符号链接运行此脚本时，它无法找到文件，因为它正在查找符号链接的当前目录。如何强制它查看链接目标的当前目录？不希望更改脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:14:22.427

不要使用符号链接，而是使用包装器。删除`/packages/app/run.sh`并在该位置创建一个新文件，其中包含以下内容：

```
#!/bin/sh

cd /install/app/release_1.0.0/
./run.sh 
```

将其标记为可执行（`chmod +x run.sh`），应该这样做。

# objective-c - 拖放不带“file://”的 NSURL

> ID：11558569
> 
> 赞同：4
> 
> 时间：2012-07-19T10:12:00.710
> 
> 标签：objective-c, xcode, macos, cocoa, drag-and-drop

我正在实现我的拖放方法。我需要当用户在我的应用程序窗口上拖动某些东西时，我可以获得该文件的 URL。`NSURL`需要转换为`char`. 没关系。但是如何`file://`从网址中删除？我当前的代码：

```
pboard = [sender draggingPasteboard];
NSString *url = [[NSURL URLFromPasteboard:pboard] absoluteString];
input_imageN = strdup([url UTF8String]); 
```

没关系，但它给出了带有`file://`前缀的 url。我尝试使用

```
NSURL *fileUrl = [[NSURL URLFromPasteboard:pboard] isFileURL];
NSString *url = [fileUrl absoluteString];
NSLog(@"url: %@", [NSURL URLFromPasteboard:pboard]);
input_imageN = strdup([url UTF8String]); 
```

但它说

```
Cannot initialize a variable of type 'NSURL *' with an rvalue of type 'BOOL' (aka 'signed char') 
```

在

```
NSURL *fileUrl = [[NSURL URLFromPasteboard:pboard] isFileURL]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T10:44:42.670

要在文件系统的适当表示中以 C 字符串形式从文件 URL 转到路径，您可以：

```
NSURL *fileURL = [NSURL URLFromPasteboard: pboard];
NSString *filePath = [fileURL path];
char *filesystemRepresentation = [filePath filesystemRepresentation]; 
```

这避免了剥离方案只留下路径的假设，或者文件系统肯定很乐意接受 UTF8 编码的路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T10:18:19.783

```
url = [url stringByReplacingOccurencesOfString:@"file://" withString:@""]; 
```

希望这可以帮助。干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-09T05:48:08.457

@user23743 的回答是正确的。由于 iOS 7 虽然`NSURL`有自己的`filestSystemRepresentation`方法。

在斯威夫特：

```
if let fileURL = NSURL(fromPasteboard: pboard) {
    let representation = fileURL.fileSystemRepresentation
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-17T03:06:35.893

```
if let fileURL = NSURL(from: pboard)?.filePathURL {
} 
```

对我来说是最有效的。

# android - 我应该在 drawable-mdpi 文件夹中放入多大尺寸的图像

> ID：11558572
> 
> 赞同：1
> 
> 时间：2012-07-19T10:12:04.783
> 
> 标签：android

我有三个分辨率为 320x480、1024 x 600、1280 x 800 的设备。在这三个设备中，有两个是平板电脑。现在这些设备中的每一个都具有 160dp 的密度，因此，所有这些设备都从 drawable-mdpi 文件夹中获取图像。现在我的问题是我应该将图像的大小放在这个 drawable-mdpi 文件夹中吗？所以它在所有这些设备中看起来都不错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:20:14.143

//对于你需要放入的电话

`drawable-mdpi`

//对于平板电脑，您需要放入

`drawable large-mdpi`

**注意：**这款大型 mdi drawble 足以用于 10 英寸设备，您可以使用少量图像`drawable-xlarge-mdpi`，例如 1280*800 或闪屏的背景。

您可以创建不同的布局来调整视图或将可绘制对象排列为

```
layout-large and layout-xlarge 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:12:56.373

将`320x480`大小图像放在 drawable-mdpi 文件夹中。

*   [看这里](http://developer.android.com/training/basics/supporting-devices/screens.html)

# smalltalk - Smalltalk中的文字字符串是可变的吗？

> ID：11558573
> 
> 赞同：2
> 
> 时间：2012-07-19T10:12:11.410
> 
> 标签：smalltalk, squeak

`string`1）和有什么区别`string literal`

2）一本书说`'zero' at: 1 put: $h`会失败，因为文字是不可变的，但如果我确实`'zero' copy at: 1 put: $h`有效，因为复制文字字符串会产生另一个不是文字的字符串。使困惑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T21:07:37.323

想象一下，您有一个方法来回答文字字符串（字面意思是其内容按字面意思写在源代码中）

```
MyClass>>constantString
    ^'foo' 
```

现在，如果这个文字字符串是可变的，你可以讨厌地执行这个片段

```
MyClass new constantString at: 1 put: $b. 
```

然后 MyClass 的每个实例都会对 #constantString 回答“嘘”。但是，您无法理解为什么，因为源代码仍然指示“foo”。讨厌...

一些 Smalltalk 方言使这些文字字符串不可变，以避免这种意外的坏惊喜。有些没有虚拟机对不变性的支持，并将全部责任交给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:28:47.840

```
| a b |
a := b := 'foo'.
a == b. "=> true, so the identical string"
a at: 1 put: $b.
b "=> 'boo' 
```

所以在 Squeak 中，可能在 Pharo 中，字符串文字不是不可变的。

*其他 Smalltalks 确实支持不可变性，因此这些*Smalltalks 中的字符串文字可能确实是不可变的。

关于复制，也许您正在从其他语言中继承假设。`'foo'`是一个字面量，因为有创建 a 的语法`String`，但实际上，`'foo'`它只是另一个对象。在 Squeak 和 Pharo 中，这些文字只是普通的`String`实例，所以你可以自由地改变它们。

如上面的代码片段所示，这可能会导致意想不到的结果，因为如果您将第一行更改为`a := 'foo'. b := 'foo'.`您仍然会得到相同的结果：Squeak 悄悄地共享该文字，而不是创建具有相同值的新文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T14:43:26.827

书错了。在吱吱声中，字符串不是不可变的。那是哪本书？

`'zero' at: 1 put: $h; yourself.`=> '英雄'

`'zero' copy at: 1 put: $h; yourself`=> '英雄'

但是字符是不可变的。如果他们不是，那会很有趣。

# android - Fragment 内的 QR 扫描仪

> ID：11558574
> 
> 赞同：14
> 
> 时间：2012-07-19T10:12:14.070
> 
> 标签：android, android-fragments, zxing

我正在使用 ViewPager 在我的片段之间滑动。是否可以在片段中集成 QR 扫描仪（zxing 或任何其他），以便我可以从扫描仪视图滑动到另一个片段，反之亦然？

据我所知，大多数 qr 扫描器都要求我使用扩展的 Activity 类并启动它以获得结果，在 onActivityResult 中处理它，这对我来说不是一个选项

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-19T04:58:14.967

[barcodefragmentlib](https://code.google.com/p/barcodefragmentlib/)是您正在寻找的那个。它的[wiki](https://code.google.com/p/barcodefragmentlib/wiki/HowTo)向您展示了如何集成它（尽管在 wiki 出现之前我使用了不同的方式）。

然而，在完全集成它并解决了我们商业应用程序的所有问题后，我觉得将 QR 扫描仪放在片段中并使用 ViewPager 切换不是一个好主意。这个想法和我提到的库的一些已知问题是：

*   经常在二维码片段和其他片段之间切换会让你的应用卡顿，容易崩溃；
*   Fragment替换不像Activity那么容易处理，QR Fragment更糟糕；
*   处理纵向/横向扫描模式默认不可用（与原ZXing lib相关）
*   首次打开二维码片段时，可能会在很短的时间内黑屏
*   扫描仪在 Galaxy S4 或其他具有更高分辨率相机/显示器的新设备上无法正常工作

虽然上面提到的这些问题可以通过一定的努力来解决，但这确实是一种权衡。

# liferay - 通过 liferay.expando 以编程方式向用户添加自定义字段

> ID：11558576
> 
> 赞同：0
> 
> 时间：2012-07-19T10:12:23.593
> 
> 标签：liferay, liferay-6, expando

我正在尝试将字段添加到`com.liferay.portal.model.User`使用`Expando`. 有人可以向我解释这种方法是如何添加字段的，因为文档没有太多描述。

```
private void addUserCustomAttribute(long companyId, ExpandoTable userExpandoTable, String attributeName, int type) throws PortalException, SystemException {

    ExpandoColumnLocalServiceUtil.getColumn(userExpandoTable.getTableId(), attributeName); //should be addColumn(long tableId, String name, int type) ???

} //and where can find type description couse i have very specific type, Map(String,Object) couse in ExpandoColumnConstants didn't see it 
```

我从 Liferay [Expando](http://www.liferay.com/community/wiki/-/wiki/Main/Expando) Wiki 的[添加用户自定义属性](http://www.liferay.com/community/wiki/-/wiki/Main/Adding+User+Custom+Attributes+%28Liferay+v6%29)中获取了这个。

我什么时候应该调用这一切？在我的项目中把它放在哪里？需要进行什么更改或需要更改所有内容才能调用它。

一些好的教程会很好，因为很难找到从 0 到结尾的东西，总是只找到一些没有解释的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:37:56.087

问题不是很清楚。但是，如果您只是想为您添加自定义属性，那么您可以[在此处](https://stackoverflow.com/a/10171218/468763)`User`参考我的答案并复制以供您参考：

可以通过以下方式创建用户实体的自定义字段：
`Control Panel` `->` `Portal` `->` `Custom Fields` `->` `User`。

并且可以通过编程方式创建如下：

```
user.getExpandoBridge().addAttribute("yourCustomFieldKey"); 
```

然后将值设置为：

```
user.getExpandoBridge().setAttribute("yourCustomFieldKey", "valueForCustomField"); 
```

如果您的自定义字段已经存在，您可以像这样检查：

```
if (user.getExpandoBridge().hasAttribute("yourCustomFieldKey")) { ... }; 
```

数据存储在以**“EXPANDO”**为前缀的表中：

*   **EXPANDOCOLUMN：**存储自定义字段键和其他设置（包含 tableId 引用）
*   **EXPANDODATA：**存储key的自定义字段值（包含columnId和tableId引用）
*   **EXPANDOTABLE：**存储您为其添加自定义字段的 liferay 实体（用户）
*   **EXPANDOROW：**存储用户及其值之间的链接信息（包含 tableId 和 userId 引用）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-23T08:55:02.643

如果您的自定义字段是多值的，您可以使用：

```
String customVal = "yourCustomFieldValue";

user.getExpandoBridge().setAttribute("yourCustomFieldKey", new String[] {customVal }, false); 
```

最后一个参数设置为“false”避免了权限检查。

# java - 向操作系统指定按键事件的深度* - Java AWT Robot

> ID：11558577
> 
> 赞同：1
> 
> 时间：2012-07-19T10:12:25.013
> 
> 标签：java, awt, keystroke, awtrobot

我有一个程序，它通过使用 java Robot 类将击键发送到操作系统。
我想知道班级发送笔画的操作系统深度*是多少？

例如，它们是发送到可能的最低级别（硬件），因此计算机认为键是物理按下的，还是发送到可能的最高级别 - 具有键盘焦点的应用程序。
它们不能太低，因为我注意到 Windows 鼠标键没有注册击键 - 它们通过就好像鼠标键没有激活一样。

我找不到任何深度规格；只有“它们被发送到操作系统”

我还想知道是否有可能以某种方式将操作系统中按键的预期深度传递给机器人类？

如果有任何含糊之处，我深表歉意；我对关键事件的实际工作方式知之甚少！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T22:27:54.110

实际上输入被发送到操作系统，操作系统将输入重定向到前台的应用程序。您可以使用 JNA 在窗口之间切换（[java 使用机器人类发送击键](https://stackoverflow.com/questions/17771542/java-sending-keystrokes-using-robot-class)）。希望这可以帮助某人。

# ruby-on-rails - Rails设计保持用户登录

> ID：11558580
> 
> 赞同：0
> 
> 时间：2012-07-19T10:12:35.717
> 
> 标签：ruby-on-rails, ruby, facebook, devise, omniauth

我正在使用 GEM 设备对来自 Facebook oauth 的用户进行身份验证。我使用以下内容创建用户

```
def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
  user = User.where(:provider => auth.provider, :uid => auth.uid).first
  unless user
    user = User.create(name:auth.extra.raw_info.name,
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       password:Devise.friendly_token[0,20]
                       )
  end
  user
 end 
```

然后登录：

```
def facebook

  @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

  def after_sign_in_path_for(resource)
    return '/mypage'
  end

  if @user.persisted?
    flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
    sign_in_and_redirect @user, :event => :authentication
  else
    session["devise.facebook_data"] = request.env["omniauth.auth"]
    redirect_to new_user_registration_url
  end
end 
```

但是，当用户在大约 15 分钟不活动后访问应用程序时，他们将不再登录。如何增加这个时间？我目前似乎一无所获。

如果有人可以提供设置 cookie 或其他内容的详细信息，以便即使在浏览器关闭时这种情况也会持续存在，那就太好了。

编辑

完整用户.rb

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
       :recoverable, :rememberable, :trackable, :validatable,
       :omniauthable
  # Setup accessible (or protected) attributes for your model
  attr_accessible :name,  :provider, :uid, :email, :password, :password_confirmation, :remember_me

  has_many :ratings
  has_many :rated_recipes, :through => :ratings, :source => :recipes

  def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    unless user
      user = User.create(name:auth.extra.raw_info.name,
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       password:Devise.friendly_token[0,20]
                       )
    end
    user
  end
end 
```

编辑：

所以下面的一些建议让我有所收获。当您通过托管的 url 访问 rails 时，一切似乎都正常。但是，一旦您点击 facebook 应用程序页面，用户就不再保留在任何打开的选项卡中。不明白为什么会这样

# regex - 不明白 CIRCUMFLEX 在此 UNIX 命令中的用法 ls -L | grep -v ^zip

> ID：11558582
> 
> 赞同：1
> 
> 时间：2012-07-19T10:12:46.393
> 
> 标签：regex, unix, grep

```
ls -L | grep -v ^zip 
```

我从这个命令中了解到的是，它正在做一个列表并将输出传递给一个 grep 命令，该命令在接收到的输出文件列表上执行 grep 以选择文件名不包含文本“zip”的任何文件以及文件名包含的任何文件文本“压缩”。

如果这是正确的，那么它似乎无用或适得其反。我在某个地方错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:15:10.603

> 选择文件名不包含文本“zip”的任何文件以及文件名包含文本“zip”的任何文件

我不明白你是怎么得出这个结论的。`^zip`匹配以 , 开头的行`zip`并`-v`否定模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:16:01.150

`-v`表示“不匹配”，`^`是一行的开头：

```
$ cat in.txt                
foo
zip
bar
--zip
baz
 zip
qux
$ $ grep -v '^zip' < in.txt   
foo
bar
--zip
baz
 zip
qux 
```

# networking - 如何将 Unix POSIX 文件描述符或标准输入句柄转换为套接字？

> ID：11558584
> 
> 赞同：8
> 
> 时间：2012-07-19T10:12:46.297
> 
> 标签：networking, haskell, posix, inetd, systemd

在*inetd*和*systemd*类型的系统中，系统可以绑定套接字并使用已经存在的套接字启动应用程序，例如提供基于套接字的服务启动。我想在我的一个 Haskell 守护程序中利用此功能。

守护进程当前调用 , ,`socket`来创建一个我以后可以调用的对象。要将其更改为类型系统，我需要将标准输入用作 a ，但到目前为止我能找到的只是, 或- 两者都不是我需要的。`bindSocket``listen``Socket``accept``inetd``Socket``stdin :: Handle``fdToHandle :: CInt -> Handle`

我似乎找不到任何类型的东西`Handle -> Socket`，也找不到任何类似的东西`stdin :: Socket`。我能找到的最接近的`mkSocket`是非常低级的，并且大多数其他语言（即Ruby）都提供了将文件描述符转换为套接字的调用，而无需指定各种其他参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:15:32.210

C 应用程序拥有`sd-daemon.h`自动处理套接字传递的奢侈。在 Haskell 中，这个文件必须手动模拟。

您可以使用[`stdInput`](http://hackage.haskell.org/packages/archive/unix/2.5.1.1/doc/html/System-Posix-IO.html#v%3astdInput)来获取`stdin`文件描述符。[`handleToFd`](http://hackage.haskell.org/packages/archive/unix/2.5.1.1/doc/html/System-Posix-IO.html#v%3ahandleToFd)当然也可以使用该功能。由于您需要特定于 POSIX 的行为，因此您不能指望它在 Windows 上运行。

一旦你有了FD，你别无选择，只能使用该`mkSocket`功能。Haskell 无法猜测你想要什么样的套接字，所以你必须指定它。你很可能想要：

```
mkSocket fd AF_UNIX Stream defaultProtocol Listening 
```

请记住，这不一定是`systemd`将文件描述符传递给您的应用程序的方式。您必须检查`LISTEN_FDS`和`LISTEN_PID`环境变量以查看要使用的文件描述符以及您的工作是否甚至绑定套接字。代表默认套接字的默认文件描述符是 FD 3，而不是您假设的 FD 0。`systemd`如果服务文件需要它，也可能会为您提供多个套接字供您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:54:17.290

MkSocket 的主要技巧是知道你有正确的参数。sd-daemon.h 对此有所帮助。我从sd_is_fifo 上的[systemd 手册页](http://www.freedesktop.org/software/systemd/man/sd_is_fifo.html)看到它使用 fstat 和 getsockname，[sd_is_socket 的代码在 git here](http://cgit.freedesktop.org/systemd/systemd/tree/src/libsystemd-daemon/sd-daemon.c)中。

您可以使用`fstat`包裹在[unix 包](http://hackage.haskell.org/package/unix)中来帮助

```
getFdStatus :: Fd -> IO FileStatus

isSocket :: FileStatus -> Bool 
```

Network 包（部分使用 Network.Socket.Internals）也使用 C`getsockname`函数（帮助`withNewSockAddr`程序为答案分配正确的缓冲区）。这需要猜测“家庭”，或者可能只是为答案分配一个大缓冲区（`sockaddr_storage`来自 RFC 2553）。`Socket`但是 Network 从数据中获取套接字文件描述符。您可以从网络中提取代码并重新实现 sd-daemons.h 所做的检查。

此外，`getsockopt`代码可能已包装在[network-socket-options 包](http://hackage.haskell.org/package/network-socket-options)中。

但似乎没有人按照您需要的方式将其组合在一起。奇怪的。

# joomla - Joomla 1.7 - 登录失败得到 500 错误

> ID：11558586
> 
> 赞同：0
> 
> 时间：2012-07-19T10:12:49.057
> 
> 标签：joomla, joomla1.7

当用户错误地登录到前端时，他们会得到一个 500 错误页面。

在以前的安装中，页面只是刷新。理想情况下，我希望显示一条错误消息，但这也不会发生（即使在以前的安装中）。我认为这是通过以下方式实现的：

```
<jdoc:include type="message" /> 
```

日志/tmp 文件的路径正确。权限似乎还可以。有任何想法吗？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:20:35.680

我认为这与日志目录有关。更改权限，然后重试。更新配置文件

更新 temp 和 log 文件夹的完整 URL

# c# - Active Directory RoleProvider - Principal.IsMemberOf 引发 PrincipalOperationException

> ID：11558587
> 
> 赞同：2
> 
> 时间：2012-07-19T10:12:54.733
> 
> 标签：c#, .net, asp.net-mvc, active-directory, roleprovider

我在自定义 Active Directory RoleProvider 中创建了以下方法：

```
public override string[] GetRolesForUser(string username)
{
    ArrayList results = new ArrayList();
    using (var principalContext = new PrincipalContext(
             ContextType.Domain, null, domainContainer))
    {
        var user = UserPrincipal.FindByIdentity(
             principalContext, IdentityType.SamAccountName, username);
        foreach (string acceptibleGroup in GroupsToInclude)
        {
            GroupPrincipal adGroup = GroupPrincipal.FindByIdentity(
                 principalContext, acceptibleGroup);
            if (user.IsMemberOf(adGroup))
                results.Add(acceptibleGroup);
        }
    }
    return results.ToArray(typeof(string)) as string[];
} 
```

它只检查我的应用程序中使用的角色白名单。问题是，如果用户不是其中一个角色的成员，我会得到`PrincipalOperationException`一个

```
if (user.IsMemberOf(adGroup)) 
```

行被执行。如果用户不在组中，我希望这会简单地返回 `false。这里出了什么问题？

**编辑：**顺便说一句 ，如果我调用`user.GetAuthorizationGroups()`并尝试遍历结果，我会得到一个 COMException - 指定的目录服务属性或值不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:26:58.227

两者`Principal.IsMemberOf()`都`user.GetAuthorizationGroups()`使用`tokenGroups`属性来确定组成员身份。

您需要确保添加了用于运行程序的帐户`Builtin\Windows Authorization Access Group`才能访问`tokenGroups`属性。

有关更多详细信息，请参阅此[MSDN KB](http://support.microsoft.com/kb/331951)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:22:49.827

我设法通过以下方法解决了这个问题：

```
public override string[] GetRolesForUser(string username) 
{ 
    ArrayList results = new ArrayList(); 

    using (PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, null, domainContainer))
        {
            UserPrincipal user = UserPrincipal.FindByIdentity(principalContext, IdentityType.SamAccountName, username);
            foreach (string acceptibleGroup in GroupsToInclude)
            {
                GroupPrincipal p = GroupPrincipal.FindByIdentity(principalContext, IdentityType.SamAccountName, acceptibleGroup);
                if (p.GetMembers().Contains(user))
                    results.Add(acceptibleGroup);
            }
        } 

    return results.ToArray(typeof(string)) as string[]; 
} 
```

然而，它并不完全有效，因为它会将组中的所有成员拉回来。我相信我的问题有更好的解决方案，希望有人会在这里发布！

# codeigniter - 在 mysql 中为会话锁定席位

> ID：11558589
> 
> 赞同：1
> 
> 时间：2012-07-19T10:12:58.137
> 
> 标签：codeigniter

对于一个旅游网站，我有 4 个人可以一次乘坐出租车。当用户选择座位时，应该为他锁定座位，直到他的会话过期。因为我只是为每个用户更新一个字段“可用性”选择那辆出租车，我不能使用与一行一起使用的 LOCK。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:26:11.093

使用表格中的同一行来保持预订的座位数。在更新查询之前获取行上的锁。这样您就可以强制第二个用户等待锁定，直到第一个用户更新座位数。

# php - PHP Mysql While循环用于添加

> ID：11558591
> 
> 赞同：-3
> 
> 时间：2012-07-19T10:13:09.127
> 
> 标签：php, mysql, while-loop, where

我的数据库中有这个字段

`email, addition`所以我想要的是`WHERE email='$email'`它看起来像是数据用户需要添加的。现在对于添加字段，我们有`100,100,1000`

我怎么能用`echo 1200`

我的代码是注意这只是一个示例脚本代码，我无法在此处复制和粘贴我的代码，因为它很长。因此，如果您发现拼写错误，请忽略它。

```
$sql = mysql_query( "SELECT * FROM user WHERE email = '$email' ") or die(mysql_error());
while ( $row = mysql_fetch_array($sql) ){
   echo $row[addition] ++;
} 
```

是的，我知道它的格式不正确。我应该改变什么？我需要使用for还是foreach？为了添加这些计算？

感恩节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:17:26.443

使用正确的（标准化）数据结构，您可以执行以下操作：

```
SELECT SUM(addition) AS total FROM users WHERE email = '$email' 
```

如果您将它作为 csv 存储在 Ignas 在他的评论中所说的列中，您可以修复您的数据库结构或使用 php：

```
$sum = array_sum(explode(',', $row['addition'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:29:53.133

Somthing like?

```
$sql = mysql_query( "SELECT * FROM user WHERE email = '$email' ") or die(mysql_error());

while ( $row = mysql_fetch_array($sql) ) {
  $iAdditionSum = 0;
  $aAddition = explode(',', $row['addition']);

  foreach($aAddition as (int) $iAddition) {
    $iAdditionSum += $iAddition;
  }

  echo $iAdditionSum;
} 
```

# extjs - ExtJS 架构师：将大型应用程序拆分到多个项目中是否明智？

> ID：11558594
> 
> 赞同：4
> 
> 时间：2012-07-19T10:13:12.730
> 
> 标签：extjs, extjs4, extjs4.1

我开始在 ExtJS Architect 中构建一个相当大的应用程序，我想知道是否建议将应用程序拆分为多个项目（准确地说是 Architect 定义项目的项目）？

目前我是唯一一位从事此应用程序的工程师，但是将来可能会分配更多工程师。如果您想将项目拆分成更小的部分或构建一个大项目，需要考虑哪些要点？

另外：据我所知，不可能在 Architect 中与多个开发人员“共享”一个项目。这投票赞成拆分项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:16:38.027

免责声明：我没有使用 Architect 构建项目。我对这个问题的想法是，如果你正在构建一个 MVC 项目并且你希望 Architect 管理你的控制器和视图，那么你应该将它们放在一起。特别是如果您在模块之间进行交叉通信。但是，如果您 100% 确定您的模块是完全独立的 - 这意味着它们彼此没有任何关系，并且可能是单独的应用程序......（也许应该？）......那么您可以单独构建它们并且在你准备好放弃建筑师之后，将它们重新组合在一起。请记住，它是单向街道而不是 IDE。将模块放在一起应该只是意味着 app.js 现在列出了所有模块的所有控制器，而不仅仅是一个模块。

# vb.net - 使用前导空格格式化数值

> ID：11558595
> 
> 赞同：3
> 
> 时间：2012-07-19T10:13:16.670
> 
> 标签：vb.net

我正在尝试使用前导空格格式化数值，以将字符串打包到给定长度，因此：-

```
mystring = mynumber.ToString ("format-string") 
```

但我没有运气找到正确的格式字符串。我在[这里](https://stackoverflow.com/questions/8293392/format-decimal-value-to-string-with-leading-spaces)看到了问题并尝试了建议的答案，但它不起作用。对于 123.4，

```
.ToString ("####.#")        gets "123.4"
.ToString ("6:####.#")      gets "6:123.4"
.ToString ("0,6:####.#")    gets "06:0,123.4"
.ToString ("{####.#}")      gets "{123.4}"
.ToString ("{6:####.#}")    gets "{6:123.4}"
.ToString ("{0,6:####.#}")  gets "{06:0,123.4}" 
```

有什么我可以尝试的`" 123.4"`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T10:18:51.543

您不能使用该`ToString`格式的方法，您需要使用该`String.Format`方法：

```
String.Format("{0,6:####.#}", number) 
```

# cocoa-touch - 如何在 iOS 上格式化和打印浮点数？

> ID：11558597
> 
> 赞同：5
> 
> 时间：2012-07-19T10:13:23.347
> 
> 标签：cocoa-touch, nsnumberformatter

我想在 Cocoa-Touch 上创建具有正确本地化的浮点数的格式化输出。输出应该等价于`printf("%<a>.<b>f", n)`，其中`<a>`是总位数，`<f>`是最大小数位数。

**`NSNumberFormatter`with `<a>=6`and的设置`<f>=2`**：（平台为 iOS 5.1 SDK、Xcode 4.3.3 和 iPhone Simulator 5.1）

```
NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
[nf setNumberStyle:NSNumberFormatterDecimalStyle];
[nf setPaddingCharacter:@" "];
[nf setUsesGroupingSeparator:NO];
[nf setLocale:[NSLocale autoupdatingCurrentLocale]];
[nf setUsesSignificantDigits:YES];
[nf setMaximumSignificantDigits:6];
[nf setMaximumFractionDigits:2];
[nf setRoundingMode:NSNumberFormatterRoundFloor];
NSLog(@"Test: %@", [nf stringFromNumber:[NSNumber numberWithDouble:2.64324897]]); 
```

**预期输出**（使用德语语言环境）：`Test: 2,64`

**观察到的输出**（使用德语语言环境）：`Test: 2,64324`

**其他观察**：我尝试对小数位使用不同的值，例如`[nf setMaximumFractionDigits:4]`或`[nf setMaximumFractionDigits:0]`。结果没有改变，似乎忽略了小数位。将语言环境更改为 US 只会将 更改`,`为 a `.`，而不是小数位数。

**问题**：如何将`printf`-format 字符串正确转换为`NSNumberFormatter`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-13T18:22:53.350

瑞恩并没有完全错。使用`localizedStringWithFormat`方法：

**使用objective-c**

```
NSNumber *yourNumber = [nf numberFromString:yourString];
//to create the formatted NSNumber object

NSString *yourString = [NSString localizedStringWithFormat:@"%.2F", yourNumber];
//to create the localized output 
```

**使用 SWIFT 3**

```
let yourString: String
yourString = String.localizedStringWithFormat("%.2F", yourDoubleNumber) //no need for NSNumber Object 
```

有点晚了，但它仍然可能会有所帮助。祝你好运！

# javascript - 测试来自 Backbone.View 的触发点击，这会打开一个新的 Backbone.View

> ID：11558599
> 
> 赞同：5
> 
> 时间：2012-07-19T10:13:30.887
> 
> 标签：javascript, backbone.js, jasmine, marionette

我有两个主干视图`MainView`和`PopupView`.

MainView 包含一个帮助按钮。当触发帮助按钮处理程序时，它会显示 Backbone.View。

我的问题是我应该如何从`MainView`模块中测试这种行为？

* * *

这是我的代码`MainView`：

```
var MainView = Backbone.View.extend({
    events: {
        'click #help' : 'showPopUp'
    },

    showPopUp: function() {
       var popupView = new PopupView();
       app.vent.trigger('showModal', popupView);
    }    
}); 
```

* * *

这是我关于 mainView.spec 的代码：

```
describe("When help button handler fired", function() {
    beforeEach(function() {
        this.view.render();
        this.view.$el.find('#help').trigger('click');
    });
    it("shows the popup", function() {
        // what should I do?
    });
}); 
```

* * *

这是我关于应用程序的代码：

```
var app = new Marionette.Application();

app.addRegions({
    header: '#header',
    sidebar: '#sidebar',
    main: '#main',
    modal: '#modal'
});

app.vent.on('showModal', function(view) {
    var modal = app.modal;

    modal.show(view);
    modal.$el.modal({
        show: true,
        keyboard: true,
        backdrop: 'static'
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:09:16.527

如果你使用的是 Sinon 和 Chai，你可以试试这个：

```
describe("When help button handler fired", function() {
  beforeEach(function() {
      this.popupSpy = sinon.spy()
      app.vent.on('showModal', this.popupSpy);
      this.view.render();
      this.view.$el.find('#help').trigger('click');
  });
  it("shows the popup", function() {
      this.popupSpy.callCount.should.equal(1);
      this.popupSpy.args[0][0].should.be.an.instanceOf(PopupView);
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T10:40:27.313

所以你的主视图不应该打开弹出窗口，它甚至不应该知道存在这样的东西。它应该通过事件总线通知其他模块应该通过触发事件来打开一个弹出窗口。

当你使用时`app.vent`，我假设你正在使用木偶。在我的项目中，我有一个 Marionette.Region 来处理覆盖视图。这个区域应该打开/关闭视图。

这样做，它更容易测试。在主视图中，您可以监视该`app.vent`函数并测试单击按钮时它将执行该函数。在您所在的地区，您可以触发事件`app.vent`并监视您的`view.render`函数。

在您想要测试的对象中创建新实例，使测试总是变得更难。当然它在 JavaScript 中更容易，例如在 Java 中，因为您可以在 JavaScript 运行时覆盖现有函数，但是使用某种依赖注入方式可以更容易地模拟和监视依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:48:31.397

这个怎么样：

```
describe("When help button handler fired", function() {
    var popupShown;

    beforeEach(function() {
        popupShown = false;

        this.view.render();
        app.vent.on('showModal', function() {
            popupShown = true;      
        });
        this.view.$el.find('#help').trigger('click');
    });
    it("shows the popup", function() {
        expect(popupShown).toBe(true);
    });
}); 
```

也就是说，我会推荐一些东西：

1.  正如在别处提到的，不要在 MainView 中创建模态视图。这将两者结合得太紧了。
2.  在您的测试中，您可能想说类似`it("triggers the help event")`或类似的话。这一点尤其重要，因为您正在单独对该对象进行单元测试。对于集成测试，情况正好相反。
3.  我不确定你在你的`beforeEach`功能中没有做太多。您可能希望至少触发`it`范围内的按钮单击，尽管根据您正在执行的操作`describe`，这可能没问题。

# php - 排序多维数组

> ID：11558600
> 
> 赞同：0
> 
> 时间：2012-07-19T10:13:32.753
> 
> 标签：php, recursion, return

> **可能重复：**
> [如何在 php 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

我有多维数组，例如：

**$mas = array("s",array("c","b","a"),array(3,5,1),"a",array("s",array("z","一种”）））;**

我想对所有数组元素进行排序（升序），我编写了递归函数，但它不起作用，请告诉我，我错了？

```
$mas = array("s",array("c","b","a"),array(3,5,1),"a",array("s",array("z","a")));

function sortsort($m) {
    sort($m);
    foreach ($m as &$v) {
        if (is_array($v)) {
             sortsort($v);
        }
    }
    return $m;
}

  var_dump(sortsort($mas)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:23:54.083

采用

```
function aasort (&$array, $key) {
  $sorter=array();
  $ret=array();
  reset($array);
  foreach ($array as $ii => $va) {
      $sorter[$ii]=$va[$key];
  }
  asort($sorter);
  foreach ($sorter as $ii => $va) {
      $ret[$ii]=$array[$ii];
  }
  $array=$ret;
} 
```

aasort($your_array,"order");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:26:28.210

试试这个

```
$mas = array("s",array("c","b","a"),array(3,5,1),"a",array("s",array("z","a")));
function sortsort(&$m) {
    sort($m);
    foreach ($m as $k=>$v) {
        if (is_array($v)) {
             sortsort($m[$k]);
        }
    }
    return $m;
}

print_r(sortsort($mas)); 
```

# .net - WPF Datagrid：如何避免 IEditableObject 行为？

> ID：11558601
> 
> 赞同：2
> 
> 时间：2012-07-19T10:13:33.627
> 
> 标签：.net, wpf, datagrid, behavior, ieditableobject

我有一个 Wpf Datagrid，其中包含作为 ItemsSource 的实体集合；实体类型实现 IEditableObject 接口（BeginEdit、CancelEdit、EndEdit）。

我想防止数据网格自动调用 IEditableObject 接口的方法，因为我管理当我选择一行网格时显式调用“BeginEdit”并在没有确认就离开该行时调用“CancelEdit”的行为。

相反，每当我选择一个单元格时，数据网格都会自动调用“BeginEdit”，我会避免它。

是否可以禁用此默认行为？

# facebook - 在 WP7 中使用 facebook c# sdk 从 facebook 注销

> ID：11558603
> 
> 赞同：1
> 
> 时间：2012-07-19T10:13:38.250
> 
> 标签：facebook, windows-phone-7, facebook-graph-api, facebook-c#-sdk, windows-phone-7.1

我想在我的 Windows 手机应用程序中使用 facebook C# sdk 从 facebook 实现注销

我的主要问题是我们如何在 WP7 中使用 Facebook C# SDK 注销

我在搜索中找到了这篇文章

[文章链接](http://claudiufarcas.blogspot.in/2011/06/wp7-webbrowser-caching-and-facebook.html)

他正在尝试使用正则表达式查找注销网址，但这在我的应用程序中不起作用

当我尝试浏览器导航事件进入无限循环时

您可以在 windows phone 7 中分享与 facebook 注销相关的任何示例/帖子。

我希望注销应该在没有用户干预的情况下发生，在他点击一个按钮后，他应该从 facebook 退出，并且从下次他应该看到登录页面

我也尝试过关注帖子/博客，但没有用。

[链接 1](https://stackoverflow.com/questions/6240468/logging-out-of-facebook-c-sharp-sdk-on-wp7)

[LINK 2](https://stackoverflow.com/questions/6240468/logging-out-of-facebook-c-sharp-sdk-on-wp7)拆分访问令牌时出现错误

**更新**

**LogOutButtonCode**

```
 FacebookClient _fbClient = new FacebookClient(fbaccess.AccessToken);
        var logoutParams = new Dictionary<string, object>();
        logoutParams.Add("next", "https://www.facebook.com/connect/login_success.html");
        //logoutParams.Add("",)

        var logoutUrl = _fbClient.GetLogoutUrl(logoutParams);
        BrowserControl.Navigated += new EventHandler<System.Windows.Navigation.NavigationEventArgs>(BrowserControl_Navigated);

        BrowserControl.Navigate(new Uri(logoutUrl.AbsoluteUri)); 
```

**导航事件代码**

```
if (e.Uri.AbsoluteUri == "https://www.facebook.com/connect/login_success.html")
        {

            NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        } 
```

e.Uri.AbsoluteUri 返回`https://www.facebook.com/home.php`

我从服务器获取的注销 URL`https://www.facebook.com/logout.php?next=https://www.facebook.com/connect/login_success.html`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:14:06.047

用于`FacebookClient.Logout`生成注销 url。

[这是来自winforms 示例](https://github.com/facebook-csharp-sdk/facebook-winforms-sample)的片段，可在 wp7 中进行一些修改。

```
 private void btnLogout_Click(object sender, EventArgs e)
    {
        var fb = new FacebookClient();

        var logoutUrl = fb.GetLogoutUrl(new
                                            {
                                                next = "https://www.facebook.com/connect/login_success.html",
                                                access_token = _accessToken
                                            });
        var webBrowser = new WebBrowser();
        webBrowser.Navigated += (o, args) =>
                                    {
                                        if (args.Url.AbsoluteUri == "https://www.facebook.com/connect/login_success.html")
                                            Close();
                                    };

        webBrowser.Navigate(logoutUrl.AbsoluteUri);
    } 
```

确保在登录时将访问令牌保留在某处，因为它需要注销。

# apache-flex - Flex mx:TextArea 截断字体

> ID：11558604
> 
> 赞同：2
> 
> 时间：2012-07-19T10:13:39.773
> 
> 标签：apache-flex, fonts, textarea, clip, flex-mx

Flex mx TextArea 在边界附近截断字体字形：

![在此处输入图像描述](../Images/c7db30e95ea698658f770dd7e9e38c75.png)

这在 spark TextArea 中已修复，但我需要在 mx 组件中避免使用此掩码。

有任何想法吗？

# java - 是否也可以在文档中生成带有源代码的 JAVA 文档？

> ID：11558605
> 
> 赞同：1
> 
> 时间：2012-07-19T10:13:42.427
> 
> 标签：java, hyperlink, javadoc, documentation-generation

默认情况下，Javadoc 不会将源代码放入其生成的 html 文件中。

我想知道是否可以将源文件放在里面，或者超链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T10:19:49.243

如果您正在使用该`javadoc`工具，它有一个[-linksource](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javadoc.html#linksource)选项似乎可以满足您的需求。

# android - 解析xml时无法解析String"'s"中的字符

> ID：11558612
> 
> 赞同：0
> 
> 时间：2012-07-19T10:13:55.513
> 
> 标签：android, string, character-encoding

这是我的代码..我替换了类似 title.replace("'s", "is") 的字符串，但这对我不起作用..

```
 NodeList Mymessage = fstElement.getElementsByTagName("title");
                     Element messageelement = (Element)Mymessage.item(0);
                     if(messageelement.hasChildNodes())
                     {
                         String title = ((Node)messageelement).getFirstChild().getNodeValue();
                         String title1=title.replace("’s", "is");
                         bin.setTitle(title1);
                         Log.v("titlr",title1);
                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:54:34.043

不要`getNodeValue()`在子节点上使用，而是`getTextContent()`在父节点上使用：

```
Element messageelement = (Element)Mymessage.item(0);
String title1=messageelement.getTextContent().replace("’s", "is");
if (title1.length() > 0) {
    bin.setTitle(title1);
    Log.v("titlr",title1);
} 
```

# regex - Maven替换插件，正则表达式不起作用

> ID：11558613
> 
> 赞同：2
> 
> 时间：2012-07-19T10:14:05.310
> 
> 标签：regex, maven

我正在使用 Maven 开发一个项目，并使用 maven-replacer-plugin 将我的所有 css/javascript 文件替换为缩小版本。

我想替换这个：

```
<!-- JSMIN js/script.min.js -->
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="js/jquery.placeholder.min.js"></script>
    <script src="js/smoothscroll.js" async=""></script>
    <script src="js/javascript.js"></script>
    <script src="js/swfobject.js"></script>
    <script src="js/player.js"></script>
<!-- END JSMIN --> 
```

有了这个：

```
<script src="js/script.js"></script> 
```

与 css 类似。

该插件说它已将正则表达式应用于我的 4 个 html 文件，这是正确的，但我看不到这些文件的任何更改。

这是插件的配置

```
<plugin>
    <groupId>com.google.code.maven-replacer-plugin</groupId>
    <artifactId>maven-replacer-plugin</artifactId>
    <executions>
        <execution>
            <phase>prepare-package</phase>
            <goals>
                <goal>replace</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <basedir>${project.basedir}/src/main/webapp/</basedir>
        <outputDir>test</outputDir>
        <includes>
            <include>**/*.html</include>
        </includes>
        <regexFlags>
            <regexFlag>CASE_INSENSITIVE</regexFlag>
            <regexFlag>MULTILINE</regexFlag>
            <regexFlag>DOTALL</regexFlag>
        </regexFlags>
        <replacements>
            <replacement>
                <token>&lt;!-- JSMIN (.*) --&gt;(.*?(\r))+.*?&lt;!-- END JSMIN --&gt;</token>
                <value>&lt;script src="$1"&gt;&lt;/script&gt;</value>
            </replacement>
            <replacement>
                <token>&lt;!-- CSSMIN (.*) --&gt;(.*?(\r))+.*?&lt;!-- END CSSMIN --&gt;</token>
                <value>&lt;link href="$1" rel="stylesheet" type="text/css"/&gt;</value>
            </replacement>
        </replacements>
    </configuration>
</plugin> 
```

正则表达式对我和我的同事来说似乎是正确的......有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T10:54:53.020

[http://code.google.com/p/maven-replacer-plugin/wiki/UsageWithOtherPlugins](http://code.google.com/p/maven-replacer-plugin/wiki/UsageWithOtherPlugins)

在将文件打包到战争中之前，需要有一个挂钩点来对文件进行替换。如果它们都在同一阶段（即准备包）执行，请确保在 maven-replacer-plugin 之前添加它。确保您使用 2.0.1 或更低版本的 war 插件，因为常用的 2.1.0+ 会复制资源两次，这会覆盖替换。使用以下 war 插件配置允许在打包之前修改文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:36:23.830

我已将您的代码复制粘贴到一个测试 pom 中，它工作正常。

你确定你检查了正确的文件吗？更新的文件位于 /src/main/webapp/test

M。

# javascript - Rails 锁屏效果 Javascript

> ID：11558620
> 
> 赞同：0
> 
> 时间：2012-07-19T10:14:17.673
> 
> 标签：javascript, ruby-on-rails

最近得到了一份新工作，作为一名 Rails 开发人员，以前从未使用过该语言，这是一个相当大的飞跃。

我正在为网站制作锁定屏幕效果，可以单击链接使网页空白，并要求用户再次输入密码以删除覆盖。叠加层是一个 jQuery 模态，如下所示：

```
$().ready( function() {
    $('.blackoutwindow').jqm({
        modal: true,
        trigger: '.blackout',
        overlay: 100
    });
    if (boset) {
        $('.blackoutwindow').jqmShow();
    }
}); 
```

单击 ID 为“blackout”的链接时，会出现该窗口。在我看来， JS 变量`boset`是从 Rails 会话变量中设置的，它确定用户是否将屏幕空白（以便空白在刷新时持续存在等）`<%= javascript_tag "var boset = #{session[:blanked]} "%>`

模态 div 里面是我的 Rails 密码表单：

```
<%= form_tag passcheck_path, :id => "passcheck", :remote => true do -%>
<%= hidden_field_tag :email, current_user.email %>
<ul>
    <li><%= password_field_tag 'password', nil, { :size => 30, :maxlength => 80, :class => :required } %></li>
    <li><%= submit_tag 'Submit' %></li>
    <li><span class="ajaxmessage">&nbsp;</span></li>
</ul>
<% end -%> 
```

哪个（通过我不太了解的方式）将密码发送到我的 session_controller.rb 中称为 passcheck 的操作，以一种 AJAX 样式验证密码。

现在我已经解释了我目前的位置，如果密码正确，我现在如何关闭 jQuery 模式，如果密码不正确，则更新 span .ajaxmessage，以及当有人最初点击时设置会话变量“空白屏幕”链接？

希望我足够清楚，有任何问题，开火吧..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:15:01.670

得到它的工作，主要是，除了[这个剩余的问题](https://stackoverflow.com/questions/11580866/jquery-function-preventing-rails-remote-call)。

在我的控制器中，我放了：

```
def passcheck  
  if request.get? # This is for when the link is clicked
    session[:blanked] = true 
  else # This is when the password form is submitted
    if user = User.authenticate( params[:email], params[:password] )
      @valid = true
      session[:blanked] = false
    end
  end 
end 
```

然后我创建了一个 passcheck.js.erb，它是我希望在提交表单时执行的 javascript：

```
<% if @valid %>
$('.blackoutwindow').jqmHide();
$('.ajaxmessage').html('&nbsp;');
$("#passcheck input[name=password]").val("");
<% else %> $('.ajaxmessage').html('<p style="color: #000">Incorrect password, please try again.</p>'); 
```

# hadoop - 值未写入 HDFS 文件

> ID：11558623
> 
> 赞同：0
> 
> 时间：2012-07-19T10:14:27.573
> 
> 标签：hadoop, mapreduce, hdfs

我正在尝试将值写入 HDFS 上的文件。这是代码：

```
FileSystem fsys = FileSystem.get(new Configuration());
        String fileName = "/user/root/TestData/Parameter.txt";
        Path path = new Path(fileName);//(pathOfTestFile);    
//fstatus.getPath();
        FSDataOutputStream fos = null;
        try {
            fos = fsys.create(path);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        BufferedWriter writer = new BufferedWriter(new 
OutputStreamWriter(fos));
        writer.write(iterations);
        writer.close();
        fos.close(); 
```

但是，我看到命令 hadoop fs -ls 显示大小为 4 ，但是当我执行 hadoop fs -cat 时，文件不显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:29:55.350

我假设迭代是整数/短/字节。无论哪种方式，这些值的字节表示都是零个或多个 0x00 字节，后跟一个 0x04 字节。0x00 和 0x04 都不是可打印的字符，因此输出中没有`hadoop fs -cat` *显示*任何内容也就不足为奇了。

但是，如果您将输出通过管道传输到 hexdump -C，我想您会看到您的输出：

```
hadoop fs -cat /path/to/file | hexdump -C 
```

**编辑**

您还使用了[BufferedWriter.write(int)](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html#write%28int%29)，它实际上将 int 作为字符写出。您应该使用[FSDataOutputStream.writeInt(iterations)](http://java.sun.com/javase/6/docs/api/java/io/DataOutputStream.html?is-external=true#writeInt%28int%29)（它实际上是 DataOutputStream 的一种方法），然后[使用 FSDataInputStream.readInt()](http://java.sun.com/javase/6/docs/api/java/io/DataInputStream.html?is-external=true#readInt%28%29)再次读取它。

# php - 在小于和大于之间拆分字符串

> ID：11558630
> 
> 赞同：2
> 
> 时间：2012-07-19T10:14:53.330
> 
> 标签：php, regex, pcre

我需要拆分这种字符串来分隔小于和大于**< >**之间的电子邮件。我正在尝试下一个`regex`and `preg_split`，但我不工作。

```
"email1@domain.com" <email1@domain.com>
News <news@e.domain.com>
Some Stuff <email-noreply@somestuff.com> 
```

预期结果将是：

```
Array
(
    [0] => "email1@domain.com"
    [1] => email@email.com
)
Array
(
    [0] => News
    [1] => news@e.domain.com
)
Array
(
    [0] => Some Stuff
    [1] => email-noreply@somestuff.com
) 
```

我现在使用的代码：

```
foreach ($emails as $email)
{
   $pattern = '/<(.*?)>/';
   $result = preg_split($pattern, $email);
   print_r($result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:20:40.770

拆分某些内容会删除分隔符（即正则表达式匹配的所有内容）。你可能想分开

```
\s*<|> 
```

反而。或者您可以使用`preg_match`正则表达式

```
^(.*?)\s*<([^>]+)> 
```

并使用第一和第二捕获组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:26:03.757

您可以使用一些可用于[`preg_split`](http://php.net/preg_split):`PREG_SPLIT_DELIM_CAPTURE` *和* `PREG_SPLIT_NO_EMPTY`.

```
$emails = array('"email1@domain.com" <email1@domain.com>', 'News <news@e.domain.com>', 'Some Stuff <email-noreply@somestuff.com>');

foreach ($emails as $email)
{
    $pattern = '/<(.*?)>/';
    $result = preg_split($pattern, $email, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
    print_r($result);
} 
```

这会输出您所期望的：

```
Array
(
    [0] => "email1@domain.com" 
    [1] => email1@domain.com
)
Array
(
    [0] => News 
    [1] => news@e.domain.com
)
Array
(
    [0] => Some Stuff 
    [1] => email-noreply@somestuff.com
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:41:08.047

这将完成这项工作。[单击此处获取键盘链接](http://codepad.viper-7.com/tGzPhX)

```
$header = '"email1@domain.com" <email1@domain.com>
News <news@e.domain.com>
Some Stuff <email-noreply@somestuff.com>';

$result = array();
preg_match_all('!(.*?)\s+<\s*(.*?)\s*>!', $header, $result);

$formatted = array();
for ($i=0; $i<count($result[0]); $i++) {
  $formatted[] = array(
    'name' => $result[1][$i],
    'email' => $result[2][$i],
  );
}
print_r($formatted); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:25:57.350

```
preg_match_all("/<(.*?)>/", $string, $result_array);
print_r($result_array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:26:26.123

```
$email='"email1@domain.com" <email1@domain.com>
News <news@e.domain.com>
Some Stuff <email-noreply@somestuff.com>';
$pattern = '![^\>\<]+!';
preg_match_all($pattern, $email,$match);
print_r($match); 
```

输出：

```
Array ( [0] => Array ( 
[0] => "email1@domain.com" 
[1] => email1@domain.com 
[2] => News 
[3] => news@e.domain.com 
[4] => Some Stuff 
[5] => email-noreply@somestuff.com ) ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T10:26:55.417

你也可以用 < 分割，并去掉 $result 中的 ">"

```
 $pattern = '/</';
  $result = preg_split($pattern, $email);
  $result = preg_replace("/>/", "", $result); 
```

# html - 如何放置 HTML5 图标“此页面由 HTML5 驱动”

> ID：11558638
> 
> 赞同：0
> 
> 时间：2012-07-19T10:15:07.667
> 
> 标签：html, google-chrome, favicon

所以我想在地址栏的末尾放置 html5 favicon 和文本 onmouseover “此页面由 HTML5 驱动”。我怎么做？我到处搜索...另外，在 Chrome 中，当我使用此代码时

```
<link rel="shortcut icon" type="image/x-icon" href="http://www.fattorefamiglia.com/wp-content/themes/child_care_creative/favicon.ico"> 
```

它仅在选项卡中显示图标，而不是在地址栏中。在Firefox中它可以工作。有谁知道？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:00:19.040

favicon 上没有这样的 javascript 事件。它们由浏览器管理，您无法控制它，因此您无法使用 onmouseover 事件来显示您需要的内容。此外，它在视口之外，因此处理它是浏览器的工作。

在 Chrome 中，地址栏中的网站图标显示已被删除，以防止社交工程。您的网站图标只会显示在选项卡中。

# php - 如何在php中将结果集数组拆分为字符串

> ID：11558641
> 
> 赞同：3
> 
> 时间：2012-07-19T10:15:18.000
> 
> 标签：php, mysql, smarty

我需要帮助。我在 smarty 中开发了一个页面，我从查询中得到了一个结果集，我需要将结果集更改为字符串并存储在文本区域中

我的查询如下

```
select val from test 
```

我的结果集是在控制器的 var_dump 中打印

```
{ [0]=>  array(1) { ["val"]=>  string(1) "c" } [1]=>  array(1) { ["val"]=>  string(3) "c++" } [2]=>  array(1) { ["val"]=>  string(4) "java" } [3]=>  array(1) { ["val"]=>  string(3) "PHP" } } 
```

我需要改变以刺痛喜欢 `c,c++,java,PHP`

更改功能仅执行控制器

请帮助我..和thk adv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:18:12.277

为此使用 foreach。在此处查看更多信息 - [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)。

例子 -

```
$array = Array("333", "222", "111");

foreach($array as $string) {
    echo $string.'<br />';
} 
```

另一种解决方案是使用内爆。

在这里查看更多信息 - [http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)和一个小例子 -

```
 $array = Array("333", "222", "111");

    $strings = implode(",", $array); // comma in first quotes are seperator, you can set it also to " " for a single space.

    echo $strings; // In this case it will output 333,222,111 if you would set it to empty space then it would output 333 222 11 
```

**编辑：**

要写入文件，您必须使用文件函数。

检查此链接 - [http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

例子 -

```
 // your file
    $file = 'sample.txt';
    $array = Array("333", "222", "111");
    // Add all strings to $content.
    foreach($array as $string) {
        $content .= $string.'<br />';
    }
    // write everything in file
    file_put_contents($file, $content); 
```

**建议：**

当您编写 SQL 查询时，我建议您现在已经开始学习正确地编写它们，因此它们更易于阅读。

例如，您的查询 -

```
select val from test 
```

可以改成——

```
SELECT `val` FROM `test` 
```

这更容易阅读和理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:19:20.567

如果您需要使用一些分隔符加入所有数组，请使用 implode。例子：

```
$arr = array("hi", "peter!", "how", "are", "you");
echo implode(" ", $arr) . "?";

//output
// hi peter! how are you? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:22:20.417

如果你想要一个用逗号分隔的字符串，你必须使用 implode 函数

```
string implode ( string $glue , array $pieces ) 
```

> 胶水：默认为空字符串。这不是 implode() 的首选用法，因为胶水将是第二个参数，因此将使用错误的原型。pieces：要内爆的字符串数组。
> 
> 返回一个字符串，其中包含以相同顺序表示的所有数组元素的字符串表示形式，每个元素之间都有粘合字符串。
> 
> [http://www.php.net/manual/en/function.implode.php](http://www.php.net/manual/en/function.implode.php)

例子

```
$array = Array("333", "222", "111");
$string = explode(',', $array); 
```

返回

```
"333,222,111" 
```

如果你想要空格：

```
$string = explode(' ', $array); 
```

返回

```
"333 222 111" 
```

# c# - 获取图像前 10 种颜色

> ID：11558642
> 
> 赞同：1
> 
> 时间：2012-07-19T10:15:20.417
> 
> 标签：c#, octree

我正在通过八叉树量化为图像生成调色板。它为任何图像提供了最多 256 种颜色。现在我只想显示这 256 种颜色中图像的前 10 种颜色（根据图像中颜色的数量）。我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:19:11.300

创建一个直方图，即统计映射到图片中每种颜色的像素数，然后按降序排序，取排序后的数组的前10个元素。

# sql - 如何自动导出 SQL Server 2008 版本的存储过程

> ID：11558643
> 
> 赞同：2
> 
> 时间：2012-07-19T10:15:25.077
> 
> 标签：sql, sql-server-2008, stored-procedures, automation, build-automation

我们的团队昨天发布了我们系统的新版本，我们遇到了存储过程的一些问题。长话短说，我们必须上传旧的存储过程来解决问题。

现在，我的任务是在发布构建之前自动备份数据库的存储过程。我浏览了很多站点，并且查看了生成脚本、制作批处理文件、进行完整备份和调度任务等，但这些解决方案都不会自动备份存储过程。

在这种情况下的任何帮助将不胜感激提前感谢。

最好的问候瑞恩

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T10:34:39.187

在 Management Studio 中，右键单击对象资源管理器窗口中的数据库，转到任务 -> 生成脚本...并按照向导进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:33:27.893

您需要使用 SMO 库来创建脚本并在命令行批处理文件中使用它们。[在http://msdn.microsoft.com/en-us/library/ms162153.aspx](http://msdn.microsoft.com/en-us/library/ms162153.aspx)中阅读更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T10:19:47.657

在运行脚本生成器之前，将选项继续脚本设置为错误，否则将不会生成脚本。如果选择了选项 DROP and Create，则为存储过程设置选项 Script Object-Levels 权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-30T00:22:43.347

您的软件源代码是否已检查到源代码控制中？如果您的数据库也是如此，这可能会有所帮助。这是软件多年来用来管理版本和发布的方法，也是 DB 加入聚会的时候了。

我建议您研究一个数据库项目（在当前 2015 年免费版本的 SQL Server Data Tools 中可用），这是一种检查您的对象进出存储库等的方法。它是管理数据库对象和适合的更完整的方法进入软件生命周期。您可以将您的数据库代码库与您的软件代码库一起发布，并将其全部统一管理。

# php - Google Visualization API 中的逗号分隔数据

> ID：11558645
> 
> 赞同：2
> 
> 时间：2012-07-19T10:15:29.043
> 
> 标签：php, javascript, jquery, json, google-visualization

我正在使用 Google Visualization API 中的 GeoChart 创建包含站点使用信息的动态地图。由于度量值较大（8 位），我需要用逗号分隔这些数字以使地图更具可读性。我编写了一个函数，将逗号添加到这些数字，但这会导致 API 绘制地图时出错。

例如，当用逗号分隔 3 列数据中的 1 列（国家/地区、访问次数、唯一身份访问者）时，该列的标签将在国家/地区工具提示中删除。逗号分隔 2 列然后导致整个地图失败，并出现“预期 2 列”错误。这一定是由于数字字符串中的逗号没有被转义，因此导致 JSON 数组中的错误。我尝试插入`'\,'`而不是常规逗号无济于事。任何解决方法或解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:17:18.127

退后一步，我认为解决问题的更好方法是使用 Google 可视化中名为 google.visualization.NumberFormat 的 NumberFormat 类来格式化原始数据。更多信息：[google.visualization.NumberFormat](https://developers.google.com/chart/interactive/docs/reference#numberformatter)

以下是如何格式化第二列以将逗号作为分组分隔符的示例：

```
function drawVisualization() {
  var data = google.visualization.arrayToDataTable([
    ['Country', 'Popularity'],
    ['Germany', 200],
    ['United States', 300],
    ['Brazil', 400],
    ['Canada', 500],
    ['France', 60000000000000000],
    ['RU', 700]
  ]);

  var formatter = new google.visualization.NumberFormat({pattern:'###,###'} );
  formatter.format(data, 1);

  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));
  geochart.draw(data, {width: 556, height: 347, tooltip: {textStyle: {color: 'blue', fontName: 'Tahoma', fontSize: '15'}}});
} 
```

我使用[谷歌可视化游乐场](https://code.google.com/apis/ajax/playground/?type=visualization#geo_chart)来测试它。

## 更新

修改了 geochart.draw 行以包含工具提示文本样式。它将为工具提示中的所有文本设置样式。反正我还没有看到进行细粒度的定制。这里有更多信息：[Geochart 配置选项](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart#Configuration_Options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:00:48.103

根据 CSV 文件格式的官方规范，可以通过将数据括在双引号中来在数据中包含逗号。

[基本规则和例子](http://en.wikipedia.org/wiki/Comma-separated_values#Basic_rules_and_examples)：

任何字段都可以被引用（即，包含在双引号字符中）。某些字段必须引用，如以下规则中所指定。

```
"1997","Ford","E350" 
```

必须引用嵌入逗号的字段。

```
1997,Ford,E350,"Super, luxurious truck" 
```

# mysql - 如果存在则其他

> ID：11558652
> 
> 赞同：1
> 
> 时间：2012-07-19T10:15:53.970
> 
> 标签：mysql, if-statement, insert, exists

这很简单，但我找不到答案。如果组合确实存在，则更新，否则插入。

```
IF EXISTS(SELECT customer_id FROM payment_conditions WHERE customer_id = 2 AND shipping_company_id = 1) 

THEN
UPDATE payment_conditions SET payment_condition = "pay in full" WHERE customer_id = 2  AND shipping_company_id = 1;

ELSE
INSERT INTO payment_conditions customer_id, shipping_company_id, payment_condition, active VALUES (2,1,"some value",1);

END IF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:21:18.253

如果您在 (shipping_company_id, customer_id) 上有一个唯一键，您可以使用：

```
INSERT INTO payment_conditions 
SET customer_id = 2,
  shipping_company_id = 1,
  payment_condition = 'some value',
  active = 1
ON DUPLICATE KEY UPDATE payment_condition = 'pay in full' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:21:46.843

你应该设置`customer_id`和`shipping_company_id`成为外键，所以你可以使用

```
INSERT INTO payment_conditions
    customer_id, shipping_company_id, payment_condition, active
VALUES (2, 1, "some value", 1)
ON DUPLICATE KEY UPDATE payment_condition = "pay in full" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:21:19.713

```
INSERT INTO payment_conditions (customer_id, shipping_company_id, payment_condition, active) 
VALUES (2,1,"some value",1)
ON DUPLICATE KEY UPDATE payment_condition = "pay in full" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:25:17.957

或者发出两条语句（NB 先更新），并取消条件逻辑。如果该行不存在，则 UPDATE 将无效。如果您的密钥恰好与 customer_id + shipping_company 不同，这应该可以工作。

```
UPDATE payment_conditions SET payment_condition = "pay in full" 
WHERE customer_id = 2  AND shipping_company_id = 1; 
```

然后

```
INSERT INTO payment_conditions 
(customer_id
, shipping_company_id
, payment_condition
, active) 
VALUES (2,1,"some value",1)
where not exists 
(select * FROM payment_conditions 
   WHERE customer_id = 2 AND shipping_company_id = 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:52:37.157

在 SQL Server 中使用合并语句 - 看起来这些答案暗示了 MySQL 语法。您没有说明数据库风格，但 Merge 是在 SQL Server 上执行此操作的推荐方法。

# javascript - 从 p:inputText javascript 获取值文本

> ID：11558654
> 
> 赞同：12
> 
> 时间：2012-07-19T10:15:57.357
> 
> 标签：javascript, jquery, primefaces

我正在尝试一些简单的事情，只是为了在`p:inputText`思想 Javascript 中获取文本值，但我没有得到它。也许这是 Primefaces 的不同程序，因为如果我不使用它，我不会遇到问题。

**我的代码：**

```
<p:inputText value="any text" widgetVar="youtlink" ></p:inputText>
        <p:commandButton value="Search"    onclick="loadPlayer();" icon="ui-icon-search" />  

<script type="text/javascript">
    function loadPlayer() {
        alert(youtlink.text);
    }
</script> 
```

我也尝试过使用 JQuery，但也没有成功。

**渲染视图：**

```
<form id="editlFrm" enctype="application/x-www-form-urlencoded" method="post"
name="editlFrm">
    <input id="editlFrm:j_id_7" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
    type="text" value="assd" name="editlFrm:j_id_7" role="textbox" aria-disabled="false"
    aria-readonly="false" aria-multiline="false">
    <button id="editlFrm:j_id_8" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left"
    type="submit" onclick="loadPlayer();;PrimeFaces.ab({source:'editlFrm:j_id_8'});return false;"
    name="editlFrm:j_id_8" role="button" aria-disabled="false"> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T10:26:32.993

添加`id`到您的`<p:inputText`

像这样

```
<p:inputText id="someID" value="any text" widgetVar="youtlink" ></p:inputText> 
```

确保你的表格得到`prependId="false"`

而不是像这样访问值

```
alert(jQuery('#someID').val()); 
```

如果您不想添加`prependId="false"`到表单中，则必须将 jquery 选择器从更改`jQuery('#someID').val()`为`jQuery("[id$='someID']").val()`

* * *

**编辑**

因为你的表格叫`editlFrm`

试试这个（确保分配*someID* id 给你的`p:inputText`）

```
alert(jQuery('#editlFrm\\:someID').val()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-06T04:59:52.097

我在尝试做类似的事情时遇到了这个问题，并发现 PrimeFaces 通过`jq`属性公开了一个小部件的 JQuery 元素。

因此，在您的示例中，您可以简单地执行以下操作：

```
function loadPlayer() {
    alert(youtlink.jq.val());
} 
```

* * *

在最近的 PrimeFaces 版本中（自 5.0 起），导出的小部件似乎不再污染全局命名空间，但需要使用该`PF()`方法进行访问。然而，仍然可以以相同的方式访问 JQuery 元素。

```
function loadPlayer() {
    alert(PF('youtlink').jq.val());
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-26T10:11:59.067

我认为最简单的方法：

```
PF('youtlink').jq.val(); 
```

您可以像这样设置输入字段的值：

```
PF('youtlink').jq.val('new value'); 
```

另一种方式：

```
PrimeFaces.widgets.youtlink.jq.val() 
```

如果您有身份证，还有另一种方式：

```
$(PrimeFaces.escapeClientId("yourFormID:youtlink")).val() 
```

用 PF 5.3 测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T14:15:36.920

此外，还有一种使用 javascript 的简单方法：

```
<h:form id="yourID" >
    <p:inputText id="anyID" value="any text" widgetVar="youtlink" ></p:inputText>
</h:form>

function loadPlayer() {
    alert(document.getElementById('yourID:anyID').value);
} 
```

# ios - 跟踪 iOS UIWebView 内存消耗

> ID：11558657
> 
> 赞同：0
> 
> 时间：2012-07-19T10:16:16.920
> 
> 标签：ios, memory-leaks, uiwebview

我们正在开发 HTML5 应用程序 - 它由单个 WebView 和一些原生部分组成。但是存在巨大的内存泄漏（内存警告然后崩溃），我们不知道是 WebView 还是原生部分......

那么有什么方法可以跟踪 UIWebView 的内存消耗或跟踪对象分配以找出谁在泄漏 - WebView 或本机部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:18:28.190

使用 Profiler 工具（命令 - I）在 Xcode 中构建您的应用程序。在此，您可以使用许多不同的工具来跟踪内存分配、泄漏、僵尸等。

此外，在分析系统资源利用率时，我建议您在真实设备上进行所有这些测试以确保准确性。

![在此处输入图像描述](../Images/d4e65880d1f849dc875f8f8a02a3b689.png)

# java - 升级到 eclipse juno 默认企业版

> ID：11558658
> 
> 赞同：0
> 
> 时间：2012-07-19T10:16:18.463
> 
> 标签：java, eclipse

更改了右键单击项目/包时可用的快捷方式。

```
Right click > new > [I now get stuff like "static web project", "message driven bean"] 
```

叫我 peculair 但我想启用 java 默认值、类、枚举等。我怎样才能更改可用的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:22:22.130

我猜你的 eclipse 现在是 JavaEE prespetive，将你的 eclipse prespetive 更改为 Java 然后你可以看到类、接口等。

# replication - 使用脚本删除复制

> ID：11558661
> 
> 赞同：0
> 
> 时间：2012-07-19T10:16:25.470
> 
> 标签：replication, sql-server-2012

我在其中使用 sql server 2012 和复制过程。现在复制过程正常工作，但我想删除此复制，我的意思是通过脚本的所有出版物、订阅和文章。我浏览了这个网站[http://support.microsoft.com/kb/324401](http://support.microsoft.com/kb/324401)并尝试了以下脚本

```
:setvar PublisherDatabase "AdventureWorks2012"
:setvar SubscriberServer "HYDHTC0131320D\MSSQLSERVER2"

use [$(PublisherDatabase)]

--Drop all subscriptions
exec sp_dropsubscription  
@publication = N'TestPubs',
@article = N'all',
--@subscriber = [$(SubscriberServer)]
@subscriber = N'all',
@destination_db = N'all'

--Drop publication
if exists (Select 1 From SysPublications where name = N'TestPubs')
EXEC sp_droppublication @publication = N'TestPubs'

EXEC sp_replicationdboption @dbname = [$(PublisherDatabase)], @optname = N'publish', @value = N'false'

--Drop subscriber entry
EXEC sp_dropsubscriber @subscriber = [$(SubscriberServer)]

--Drop distributor
EXEC sp_dropdistributor @no_checks = 1 
```

在我执行上述脚本后，我收到以下错误。

```
Only one Log Reader Agent or log-related procedure (sp_repldone, sp_replcmds, and sp_replshowcmds) can connect to a database at a time. If you executed a log-related procedure, drop the connection over which the procedure was executed or execute sp_replflush over that connection before starting the Log Reader Agent or executing another log-related procedure.

Msg 18752, Level 16, State 1, Procedure sp_replcmds, Line 1

Only one Log Reader Agent or log-related procedure (sp_repldone, sp_replcmds, and sp_replshowcmds) can connect to a database at a time. If you executed a log-related procedure, drop the connection over which the procedure was executed or execute sp_replflush over that connection before starting the Log Reader Agent or executing another log-related procedure.

The Subscriber was dropped.

Msg 20015, Level 16, State 1, Procedure 

sp_MSreplremoveuncdir, Line 83
Could not remove directory 'C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\ReplData\unc\HYDHTC0131320D_ADVENTUREWORKS2012_TESTPUBS\20120719152739\'. Check the security context of xp_cmdshell and close other processes that may be accessing the directory. 
```

查看此屏幕截图以获取更多详细信息

![在此处输入图像描述](../Images/733871e52451f97a86c008ac1185454d.png)

谁能帮我解决这些问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:55:10.313

看起来您在删除复制时遇到了一些错误，并且在订阅者处有一些孤立的订阅元数据。可以使用[sp_removedbreplication](http://msdn.microsoft.com/en-us/library/ms188734.aspx)从订阅数据库中删除孤立的元数据。

为了将来参考，您可以按照以下步骤删除所有订阅、发布并禁用发布和分发：

*   [删除推送订阅](http://msdn.microsoft.com/en-us/library/ms151212.aspx)
*   [如何：删除出版物](http://msdn.microsoft.com/en-us/library/ms147833.aspx)
*   [禁用发布和分发](http://msdn.microsoft.com/en-us/library/ms151181.aspx)

**链接中的相关代码位**

a) 删除**事务**复制的推送订阅

```
-- This batch is executed at the Publisher to remove 
-- a pull or push subscription to a transactional publication.
DECLARE @publication AS sysname;
DECLARE @subscriber AS sysname;
SET @publication = N'AdvWorksProductTran';
SET @subscriber = $(SubServer);

USE [AdventureWorks2012]
EXEC sp_dropsubscription 
  @publication = @publication, 
  @article = N'all',
  @subscriber = @subscriber;
GO 
```

**b) 删除合并**复制的订阅

```
DECLARE @publication AS sysname;
DECLARE @subscriber AS sysname;
DECLARE @subscriptionDB AS sysname;
SET @publication = N'AdvWorksSalesOrdersMerge';
SET @subscriber = $(SubServer);
SET @subscriptionDB = N'AdventureWorks2012Replica';

USE [AdventureWorks2012]
EXEC sp_dropmergesubscription 
  @publication = @publication, 
  @subscriber = @subscriber, 
  @subscriber_db = @subscriptionDB;
GO 
```

**c) 在事务**复制中删除发布并将*源数据库*设置为停止成为发布者。

 **```
DECLARE @publicationDB AS sysname;
DECLARE @publication AS sysname;
SET @publicationDB = N'AdventureWorks2008R2'; 
SET @publication = N'AdvWorksProductTran'; 

-- Remove a transactional publication.
USE [AdventureWorks2008R2]
EXEC sp_droppublication @publication = @publication;

-- Remove replication objects from the database.
USE [master]
EXEC sp_replicationdboption 
  @dbname = @publicationDB, 
  @optname = N'publish', 
  @value = N'false';
GO 
```

**d) 在合并**复制中删除发布并将*源数据库*设置为停止成为发布者。

 **```
DECLARE @publication AS sysname
DECLARE @publicationDB    AS sysname
SET @publication = N'AdvWorksSalesOrdersMerge' 
SET @publicationDB = N'AdventureWorks2008R2'

-- Remove the merge publication.
USE [AdventureWorks2008R2]
EXEC sp_dropmergepublication @publication = @publication;

-- Remove replication objects from the database.
USE master
EXEC sp_replicationdboption 
  @dbname = @publicationDB, 
  @optname = N'merge publish', 
  @value = N'false'
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T10:15:36.233

我的解决方法是`sp_droppublication`在事务中做。

```
-- local variables
declare
 @return_code    int -- return code of sp
,@dependent_publ sysname -- publication dependent on replicated RDZ tables

declare a cursor for
select distinct p.name from syspublications p
 inner join sysarticles s on p.pubid = s.pubid 
 inner join adm_replicated_rdz_tables r on r.table_name = s.name

if exists
 (select * from sys.objects
   where object_id = object_id('[dbo].[sysarticles]') and type in ('U'))
begin
 open a; fetch next from a into @dependent_publ; while @@fetch_status = 0
 begin
  begin transaction
   print @dependent_publ
   execute sp_droppublication @dependent_publ;
  commit
  fetch next from a into @dependent_publ;
 end; close a; deallocate a;
end 
```****

# magento - 如何从我的 magento 模块中调用 getChildHtml

> ID：11558664
> 
> 赞同：5
> 
> 时间：2012-07-19T10:16:30.477
> 
> 标签：magento

我创建了一个模块和块

> `<block type="mymodule/mymodule" name="my_block" template="mymodule/mymodule.phtml"/>.`

在默认主题下的 catalog.xml 中。

我通过默认主题的目录/产品/view.phtml 中的 getChildHtml('my_block') 方法调用此块，它显示 mymodule.phtml 文件中的文本，但我不想从 view.phtml 上方的 view.phtml 调用该块，有没有办法从 mymodule 的任何地方调用上述块来显示来自 mymodule.phtml 的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T21:45:24.623

如果你想在不使用 getChildHtml() 的情况下调用你的块，你需要将你的块放入一个内容块中，如左、右、内容等，它将自动呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-07T09:35:11.393

调用 getChildHtml() 方法会加载带有传递给该方法的名称的子块的 HTML。

将您的块放入布局文件中的参考区域之一，如左、右和内容，并使用指定的名称调用它。

尝试，

```
<?php echo $this->getChildHtml('my_block') ?> 
```

# php - WordPress：找出用户登录了多少次

> ID：11558665
> 
> 赞同：1
> 
> 时间：2012-07-19T10:16:31.647
> 
> 标签：php, wordpress

是否有任何插件可以帮助我了解用户登录了多少次？

这不会是一个非常复杂的代码，但我只是想知道是否已经有一些插件提供了这个功能？

是的，我正在使用 BuddyPress

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:38:52.773

我找到了一个名为“简单登录日志”的插件。它完全符合我的要求

谢谢，

插件：[http ://wordpress.org/extend/plugins/simple-login-log/](http://wordpress.org/extend/plugins/simple-login-log/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:22:43.813

检查[http://wordpress.org/extend/plugins/wassup/](http://wordpress.org/extend/plugins/wassup/)这个..它会帮助你最好的扩展...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:23:08.040

我认为 User-Login-Stat 完全符合您的描述：

[https://github.com/tareq1988/User-Login-Stat](https://github.com/tareq1988/User-Login-Stat)

# magento - 如何在 Magento-GO 的主页滑块上显示特色产品？

> ID：11558666
> 
> 赞同：0
> 
> 时间：2012-07-19T10:16:39.790
> 
> 标签：magento, magento-go

我是 magento-go 的新手

我已经在首页添加了，

```
 {{block type="catalog/product_list" category_id=my_cat_id template="catalog/product/list.phtml"}} 
```

但是我如何更改设计以在特色产品块滑块中设置？

如果有人知道，请帮助我..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:55:21.863

Copy all the codes from "catalog/product/list.phtml" to a new phtml file.

You can then change the layout of that phtml as you wish.

your new block will be something like:

{{block type="catalog/product_list" category_id=my_cat_id template="catalog/product/newPage.phtml"}}

Not sure if this is what you were after?

J

# c - 如何使用内核头文件编译用户空间程序

> ID：11558671
> 
> 赞同：3
> 
> 时间：2012-07-19T10:16:50.537
> 
> 标签：c, linux, linux-kernel, kernel, linux-device-driver

我需要使用`ioctl`. 我需要使用`ioctl(fd, USBDEVFS_REAPURBNDELAY, &receive);`。但是`USBDEVFS_REAPURBNDELAY`在内核头文件中定义，所以我包含一些这样的内核文件：

```
#include <linux/usb.h>
#include <linux/usbdevice_fs.h>
#include <asm/byteorder.h>
#include <linux/usb/ch9.h> 
```

并编译它`gcc -g -I /usr/src/linux-3.4.4-2-pae/include/ -o /home/madper/kernel/usb/select_for_usb /home/madper/kernel/usb/select_for_usb.c`

它说`#warning "Attempt to use kernel headers from user space, see http://kernelnewbies.org/KernelHeaders" [-Wcpp]`

并且伴随着很多错误，那么，使用内核头文件的正确方法是什么？

```
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:21:2: error: unknown type name ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:36:2: error: unknown type name ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:37:33: error: ‘kernel_ulong_t’ undeclared here (not in a function)
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:37:3: error: requested alignment is not an integer constant
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:119:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:141:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:154:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:168:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:179:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:187:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:195:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:200:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:227:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:260:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:314:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:341:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:366:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:413:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:433:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:444:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:479:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:508:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:540:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:551:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:566:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/usr/src/linux-3.4.4-2-pae/include/linux/mod_devicetable.h:582:2: error: expected specifier-qualifier-list before ‘kernel_ulong_t’
/home/madper/kernel/usb/select_for_usb.c: In function ‘main’:
/home/madper/kernel/usb/select_for_usb.c:46:30: error: expected expression before ‘void’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:22:19.943

你真的不应该直接包含内核头文件。在某些情况下，处理它是必要的，并且可能是最好的处理方法是获取内核头文件的副本并仅删除您需要的部分。但在这种情况下，我不确定我是否理解你为什么需要内核头文件。为什么仅仅包含它不起作用`<linux/usbdevice_fs.h>`？

在我查看的所有系统（几个不同的 Ubuntu 系统和一个 RHEL 6 系统）上，该文件可以从用户空间包含并具有`USBDEVFS_REAPURBNDELAY`. 我试过

```
#include <stdio.h>
#include <sys/ioctl.h>
#include <linux/usbdevice_fs.h>

int main()
{
    printf("USBDEVFS_REAPURBNDELAY is %ld\n", USBDEVFS_REAPURBNDELAY);
    return 0;
} 
```

我可以干净地构建它，当我运行它时，我得到

```
USBDEVFS_REAPURBNDELAY is 1074287885 
```

所以至少根据你上面写的内容，你不需要任何内核头文件来定义那个ioctl。我怀疑您认为用户空间 USB 内容所需的其他任何东西都以干净的标头类似地导出到用户空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:41:57.033

您不能将内核头文件用于用户程序。即使您以某种方式这样做，也强烈建议您这样做。检查以下链接以获得更多说明。

[http://lwn.net/Articles/113349/](http://lwn.net/Articles/113349/)

如果您确实想从用户空间控制 USB 设备，请查看 libusb。

# php - 将多维 php 数组转换为 JSON 对象数组

> ID：11558675
> 
> 赞同：0
> 
> 时间：2012-07-19T10:16:55.977
> 
> 标签：php, jquery, arrays, json, multidimensional-array

我需要在 php 中创建一个多维数组，并希望在 jQuery 脚本中将其用作 JSON 对象数组；

jQuery 脚本中所需的输出应如下所示：

```
data = [
        { Month:'April', Comms:1000, Fees:200, Gains: 200},
        { Month:'May',   Comms:1200, Fees:300, Gains: 300}
        ] 
```

目前我的php数组生成如下：

```
 $data1[] = array(
        'Month' => 'April',
        'Comms' => 1000,
        'Fees'  => 200,
        'Gains' => 200      
    );      
    $data2[] = array(
        'Month' => 'May',
        'Comms' => 1200,
        'Fees'  => 300,
        'Gains' => 300      
    );

    echo json_encode($data); 
```

我的问题是如何将 data1 和 data2 组合到 json_encode php 函数中的数据数组中，这将产生所需的 jQuery JSON 对象数组？

我确实有不同数组字段的值，并且可以以不同的方式创建 data1 和 data2，因此数据很灵活，我可以以任何其他方式将它们组合起来，从而生成数据数组，并以所需的 JSON 格式输出它们.

任何帮助将不胜感激，我已经看到有关此主题的问题，但没有一个可以解决我面临的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:21:51.107

简单地：

```
echo json_encode($data1 + $data2); 
```

请注意，您还可以使用`+`来合并数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:21:12.300

尝试 ：

```
echo json_encode(array_merge($data1, $data2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:22:13.780

写：

```
echo json_encode($data1 + $data2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:24:22.687

您需要将两个数组合并到一个新的数组数组中。有关详细信息，请参阅[手册](http://php.net/manual/en/function.array-merge.php)。

```
$data = array_merge($data1, $data2);
echo json_encode($data) 
```

或者，更简单地使用`+`运算符：

```
echo json_encode($data1 + $data2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:27:09.137

只是用户

```
echo json_encode($data1 + $data2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-22T10:00:22.883

您应该通过使用 groupBy 月份从数据库中提取数据来创建另一个数组，并将数据存储在其他数组中。

```
$array = array();  
foreach ($data as $element) {
    $array[$element['month']][] = [ 'comms' => $element['comms'], 'fees' => $element['fees'], 'gains' => $element['gains']
} 
```

# c++ - 订阅windows系统事件本机c++

> ID：11558681
> 
> 赞同：3
> 
> 时间：2012-07-19T10:17:15.750
> 
> 标签：c++, windows, winlogon

我希望我的 c++ 应用程序能够监听 Windows 系统事件，例如登录、注销、锁定...类似于：[http](http://www.dotnetspider.com/resources/30389-To-detect-when-system-gets.aspx) : //www.dotnetspider.com/resources/30389-To-detect-when-system-gets.aspx是用 C# 编写的。
我找到了[http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx#Y0m](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx#Y0m)，但它是一个 CLR 代码。另外，我看到 SubscribeToSystemEvent 函数在可视 C++ 中。

有谁知道在本机 C++ 中使用哪些方法？

请指教，

里龙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:15:33.670

当会话状态改变时，调用[WTSRegisterSessionNotification](http://msdn.microsoft.com/en-us/library/aa383841%28VS.85%29.aspx)接收[WM_WTSSESSION_CHANGE窗口消息。](http://msdn.microsoft.com/en-us/library/aa383828%28v=vs.85%29.aspx)这包括登录、注销、锁定、解锁等。确保在程序退出之前对[WTSUnRegisterSessionNotification](http://msdn.microsoft.com/en-us/library/aa383847%28v=vs.85%29.aspx)进行了相应的调用。

或者，您可以侦听[WM_QUERYENDSESSION](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890%28v=vs.85%29.aspx)或[WM_ENDSESSION](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376889%28v=vs.85%29.aspx)窗口消息。第一个允许您阻止用户注销；第二个告诉你它是否会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-09T14:07:29.693

您可以尝试 krabset [https://github.com/Microsoft/krabsetw](https://github.com/Microsoft/krabsetw)，它是包装器。您还可以查看[https://docs.microsoft.com/en-us/dotnet/api/system.security.accesscontrol?view=netframework-4.7.2](https://docs.microsoft.com/en-us/dotnet/api/system.security.accesscontrol?view=netframework-4.7.2)

还可以通过 PowerShell 查看 New-WinEvent 和 Get-WinEvent

# java - 将未知对象传递给Java中的方法

> ID：11558687
> 
> 赞同：2
> 
> 时间：2012-07-19T10:17:52.457
> 
> 标签：java

我试图将一个类的实例传递给另一个对象，但我无法让它工作。

我目前有这个：

```
class MyClass
{
    public void myFunc()
    {
        OtherClass bla = new OtherClass(this);
    }

    public void callback()
    {
        // code...
    }
}

class OtherClass
{
    public OtherClass(Class<?> obj)
    {
        // do some stuff...

        // Call method from obj
        Method method = obj.getMethod("callback", SomeObject.getClass());
        method.invoke(obj, SomeObject);
    }
} 
```

但现在它给了我以下错误：

> 构造函数 OtherClass(MyClass) 未定义

所以期望我在构造函数中给出类名硬编码。我怎样才能使它成为一个泛型类型，以便它接受所有类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:19:02.770

应该：

```
OtherClass bla = new OtherClass(this.getClass(), this); 
```

和：

```
public OtherClass(Class<?> clazz, Object obj)
{
    // do some stuff...

    // Call method from obj
    Method method = clazz.getMethod("callback", SomeObject.getClass());
    method.invoke(obj, SomeObject);
} 
```

**编辑**

再次阅读我的代码和您的评论，这可以通过仅传递一个参数以更简单的方式完成：

```
OtherClass bla = new OtherClass(this); 
```

和：

```
public OtherClass(Object obj)
{
    Class<?> clazz = obj.getClass();
    // do some stuff...

    // Call method from obj
    Method method = clazz.getMethod("callback", SomeObject.getClass());
    method.invoke(obj, SomeObject);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:22:07.560

`MyClass`当构造函数需要一个对象的实例时，您正在传递一个对象的实例`Class`。你可以试试；

```
OtherClass bla = new OtherClass(this.getClass()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:21:26.187

采用

```
public OtherClass(Class<? extends Object> obj) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:22:35.460

采用

```
public OtherClass(T obj) 
```

反而。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:22:43.063

你的逻辑有严重缺陷。您的构造函数的签名需要一个类，但您正在调用它的方法。表明它应该是一个对象。

我也不明白你为什么要这样做；如果您需要调用回调，只需为其创建一个接口。

```
interface CallbackHaving{
  void callback();
}

class MyClass implements CallbackHaving
{
    public void myFunc()
    {
        OtherClass bla = new OtherClass(this);
    }

    public void callback()
    {
        // code...
    }
}

class OtherClass
{
    public OtherClass(CallbackHaving obj)
    {
        // do some stuff...

        // Call method from obj
        obj.callback();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T10:23:10.703

您的 OtherClass 构造函数采用 Class 类型的对象，但您传递`this`给它的是 MyClass 类型的对象。我认为您的构造函数应该是 OtherClass(Object obj)。

# apache - Apache突然不再发送过期

> ID：11558688
> 
> 赞同：0
> 
> 时间：2012-07-19T10:17:54.843
> 
> 标签：apache, cache-control

我已经开始在我的虚拟主机文件中使用一些标题。奇怪的事情发生了。

我使用了以下配置：

```
<VirtualHost *:80>
        ServerAdmin webmaster@domain.com
        ServerAlias *.domain.com
        ServerName domain.com

        DocumentRoot /var/www/dir/

        ErrorLog logs/dir_error.log
        LogLevel warn

        CustomLog logs/dir_access.log combined
        ServerSignature On
</VirtualHost> 
```

这里真的什么都没有。但是自从我添加了一个“Header set Cache-Control”之后，我突然停止接收 Expires - 所以我删除了这一行，并且因为我删除了它 - 我没有在“curl”命令中收到 Expires 或 Cache-Control （之前发送过）。

现在，其他虚拟主机文件 - 默认情况下发送它（那里也没有特殊的 conf，我没有为标题配置任何内容..）。

我真的不确定这里发生了什么，如何将它带回 Apache 动态发送这些标头的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:36:16.853

解决了 ！

我想问题出在我的脑海里，忘记了我正在通过一个 CDN，它默认生成 Expires 和 Cache-Controls。

这就是为什么它适用于几个网站而其他网站却没有...... :)

# java - 如何从html中删除jsessionid（从jsp转换而来）

> ID：11558689
> 
> 赞同：0
> 
> 时间：2012-07-19T10:17:59.627
> 
> 标签：java, http, jsp, get, apache-httpclient-4.x

我有一个（struts 2）动作，它被称为重定向到一个jsp。我正在尝试使用 HttpClient 将此 jsp 保存为 html。除了一件事之外，这很好用，服务器`jsessionid=RandomText`会在 html 中存在另一个动作的地方追加。

**如何从最终的 html 中删除 jsessionid ？**

来自呈现的 html 的示例：

```
<a href='/wah/destinationSEO.action;jsessionid=123ASDGA123?idDestination=22'> 
```

这就是我将 jsp 保存到 html 的方式：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet getRequest = new HttpGet("http://127.0.0.1:8080/wah/destinationSEO.action?idDestination=8");

HttpResponse response = httpClient.execute(getRequest);

if (response.getStatusLine().getStatusCode() != 200) {
    throw new RuntimeException("Failed : HTTP error code : "
            + response.getStatusLine().getStatusCode());
}
httpClient.getConnectionManager().shutdown();

String content = CharStreams.toString(new InputStreamReader(response.getEntity().getContent()));

String path="D:/wahSVN/trunk/src/main/webapp/seo.html";
File html = new File(path);
html.createNewFile();
Files.append(content, html, Charsets.UTF_8); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:57:51.427

按照 amicngh 的建议，正则表达式成功了！我希望我可以在客户端/请求中指定一些东西，但是好吧。

对于其他任何人，这就是它所做的：

```
 // code as written above
    Pattern pattern = Pattern.compile(";jsessionid(=\\w+)");
    Matcher m = pattern.matcher(content);

    content = m.replaceAll("");

    Files.write(content, html, Charsets.UTF_8); 
```

这两个链接很有帮助：

*   [http://www.zenovations.com/blog/misc/regex.html#](http://www.zenovations.com/blog/misc/regex.html#)
*   [http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:48:51.497

使用 Java[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)`jsessionid=<ID> up to ?`并从内容中替换。

# math - 如何求解线性方程组的异或系统？

> ID：11558694
> 
> 赞同：0
> 
> 时间：2012-07-19T10:18:14.637
> 
> 标签：math, matrix, binary-data

我有这个方程组

a⊕0⊕c⊕0⊕0⊕0=2
0⊕b⊕0⊕d⊕0⊕0=3

a⊕0⊕0⊕0⊕x⊕0=4
0⊕b⊕0⊕0⊕0⊕y=8

0⊕0⊕c⊕0⊕x⊕0=6
0⊕0⊕0⊕d⊕0⊕y=11

当我使用高斯求解这个方程时，⊕ 是 XOR ，按照***Denley Bihari 的***方法[在这里](https://stackoverflow.com/questions/3855479/how-to-find-which-subset-of-bitfields-xor-to-another-bitfield) 它给了我这个：

1 0 1 0 0 0 = 2
0 1 0 1 0 0 = 3
0 0 1 0 1 0 = 6
0 0 0 1 0 1 = 11
0 0 0 0 0 0 = 0
0 0 0 0 0 0 = 0

那是 DNE，虽然答案是
a=5
b=10
c=7
d=9
x=1
y=2
*（我有常数值首先，我当然形成了方程式）*

那么正确的方法是什么？我已经在网上搜索了高低！
非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T16:07:07.707

您的方程是相关的（正如导致所有`0`行的高斯消元所示），因此实际上您的约束比变量少，因此有多个解决方案。

在这种特殊情况下，您有两组方程，一组涉及`a, c, x`，另一组涉及`b, d, y`。去掉`0`s，我们得到

```
a ⊕ c     =  2
a     ⊕ x =  4
    c ⊕ x =  6

b ⊕ d     =  3
b     ⊕ y =  8
    d ⊕ y = 11 
```

显然，这三个中的最后一个是通过对两组中的前两个进行异或得到的（或者，三个中的任何一个都是通过对组中的另外两个进行异或得到的）。

因此，您可以选择`x`和`y`作为参数，为它们分配任意值并找到

```
a =  4 ⊕ x
c =  6 ⊕ x
b =  8 ⊕ y
d = 11 ⊕ y 
```

您可以使用高斯消元法，它要么产生一个简化形式，给出一个唯一的解决方案（如果独立方程的数量等于所涉及的变量的数量），一个具有全 0 行的简化形式，它允许参数化所有解决方案的空间，或者具有（至少）一行所有系数为 0 但右侧非零的简化形式，在这种情况下没有解。

所有其他求解方法都将产生相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:06:41.630

你在解决什么？看起来你有六个常数和六个常数方程。

一般来说，求解仅涉及 xor 的方程非常容易。

# mysql - 如何仅使用联接而不使用子查询来创建此查询？

> ID：11558697
> 
> 赞同：0
> 
> 时间：2012-07-19T10:18:24.220
> 
> 标签：mysql

正如标题所暗示的那样，重写它以仅将排除作为连接的方法是什么？

```
select users.id from users where id not in ("select
pu.owner_id from projects p
inner join
projects_users pu on
pu.owned_project_id = p.id
where p.project_name = 'This is an example of a project'") 
```

我认为这可能有效，但它不会从 project_users 中不存在的用户返回任何内容：

```
select u.id from users u
        left outer join projects_users pu on
        pu.owner_id = u.id
        inner join projects p on
        pu.owned_project_id = p.id          
        where NOT p.project_name = 'This is an example of a project' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:28:47.910

```
SELECT    a.id
FROM      users a
LEFT JOIN project_users b ON a.id = b.owner_id
LEFT JOIN projects c ON b.owned_project_id = c.id AND 
          c.project_name = 'This is an example of a project'
WHERE     c.id IS NULL 
```

# javascript - save() 中的方法调用在表单提交之前显示模板上的返回

> ID：11558700
> 
> 赞同：0
> 
> 时间：2012-07-19T10:18:29.907
> 
> 标签：javascript, django, django-models, django-templates

我的 django 模型包含以下字段：

```
nod_id1 = models.ForeignKey('Eonodes',..)
nod_id2 = models.ForeignKey('Eonodes',..) 
```

按预期呈现为下拉列表。

在我的 models.py 中，我像这样覆盖保存方法：

```
def save(self, *args, **kwargs):
        get_direction_descr(self.nod_id1.id, self.nod_id2.id)
        super(Webrequests, self).save(*args, **kwargs) 
```

在哪里

```
def get_direction_descr(nod_id1, nod_id2):
          cursor = connection.cursor()
          cursor.execute("SELECT GetDirectionDescr("+str(nod_id1)+","+str(nod_id2)+") from sys.dual")
          result = cursor.fetchall()
          return result[0][0] 
```

有没有办法`get_direction_descr()`在用户在提交表单之前从下拉列表中选择 nod_id1 和 nod_id2 之后即时在模板上显示返回的内容？或者我怎么能完成这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:46:31.277

就在这里。您可以将方法 get_direction_descr 移动到模型。更改选择列表（第一个或第二个）并将信息拉到模板时，您应该在更改事件上使用Ajax。

# android - 默认情况下关注gridview项目 - android

> ID：11558701
> 
> 赞同：1
> 
> 时间：2012-07-19T10:18:46.313
> 
> 标签：android, android-layout, android-view, android-gridview

我在我的 gridview 中加载了 6 个图像视图，如下面的代码所示。我有 2 个查询：

(1) 当我启动应用程序时，我需要默认选择第一个图像视图。(2) 我正在设置一个侦听器，它将从 gridview 中的 6 个项目中的每一个启动一些其他活动。当我从第二个活动返回时，我需要将注意力集中在被选中的项目上。

我怎样才能达到这两个要求？

任何帮助深表感谢。

```
// Main activity
GridView gridView = (GridView) findViewById(R.id.grid_view);  
gridView.setAdapter(new ImageAdapter(this));
gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            Log.d(TAG, "setOnItemClickListener() - pos:" + position);
            handleItemClick(position);
        }
    });

//class ImageAdapter extends BaseAdapter

// Keep all Images in array   
public Integer[] mThumbIds = {
        R.drawable.ic_launcher, 
        R.drawable.ic_launcher,
        R.drawable.ic_launcher, 
        R.drawable.ic_launcher,
        R.drawable.ic_launcher, 
        R.drawable.ic_launcher,
};

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(160, 120));
    return imageView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:21:02.670

试试这个代码

```
gridview.setSelection(position); // position = 0 or wherever you wants 
```

希望对你有帮助

# openlayers - 带有 WMS 层视图参数的 GeoWebCache

> ID：11558704
> 
> 赞同：3
> 
> 时间：2012-07-19T10:18:54.533
> 
> 标签：openlayers, geoserver

我是 Geowebcache 的新手。我正在尝试在 GeoServer 2.1.3 中使用内置 Geowebcache 功能。我的要求是使用 Geowebcache 来加快 WMS 请求的过程。

如果我将`http://localhost:8080/geoserver/gwc/service/wms`其用作地理服务器地址，则它仅适用于我的默认参数值（即使设置它或不设置视图参数也没有什么不同）。它不会更改 veiwparams 更改的返回图像。

如果我使用直接集成，它总是由 geoserver 服务。我如何将 geowebcache 与 veiwparams 一起使用。我的样品要求如下

```
http://localhost:8080/geoserver/gwc/service/wms?LAYERS=MeshPlugin:ts_gd_world_mesh&FORMAT=image/png&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&STYLES=&VIEWPARAMS=timestep:1;datasetid:6&SRS=EPSG:4326&BBOX=112.5,22.5,135,45&WIDTH=256&HEIGHT=256 
```

如果我更改时间步长和 datasetid 值，我看不出有什么不同。

怎么能解决这个问题？如果我使用独立的 geowebcache 会正常工作吗？

谢谢并恭祝安康

阿米拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:58:52.267

为此，需要安装独立的 geowebcache 服务器。然后在 geoserver 中禁用 geowebcache。我通过删除 geoserver 中的 gwc dll 来做到这一点。然后在环境中定义 GEOWEBCACHE_CACHE_DIR。当重述 gwc 时，它将在上面定义的缓存目录上创建相关文件和文件夹。然后转到 geowebcache.xml 文件并使用`<wmsLayer>`标签添加所需的 wms 层。在 wms 层标签中，可以定义 viewparams 如下

```
<parameterFilters>  
   <regexParameterFilter>
    <key>VIEWPARAMS</key>
    <defaultValue></defaultValue>
       <regex>regex as required </regex>
  </regexParameterFilter>
</parameterFilters> 
```

问候

阿米拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T01:54:10.553

`<wmsLayer>`在 $GEOSERVER/data_dir/gwc/geowebcache.xml 中添加新的

```
<layers>  
  <wmsLayer>
    <name>ts_gd_world_mesh_viewparams</name>
    <mimeFormats>
      <string>image/png</string>
    </mimeFormats>
    <parameterFilters>
      <regexParameterFilter>
        <key>VIEWPARAMS</key>
        <defaultValue></defaultValue>
        <regex>.*</regex>
      </regexParameterFilter>
    </parameterFilters>
    <wmsUrl>
      <string>http://localhost:8080/geoserver/wms</string>
     </wmsUrl>
    <wmsLayers>MeshPlugin:ts_gd_world_mesh</wmsLayers>
  </wmsLayer>
</layers> 
```

然后单击“重新加载配置”按钮

```
http://localhost:8080/geoserver/gwc/demo 
```

请注意，您的新 WMS 网址将引用`LAYERS=ts_gd_world_mesh_viewparams`，即

```
http://localhost:8080/geoserver/gwc/service/wms?LAYERS=ts_gd_world_mesh_viewparams&FORMAT=image/png&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&STYLES=&VIEWPARAMS=timestep:1;datasetid:6&SRS=EPSG:4326&BBOX=112.5,22.5,135,45&WIDTH=256&HEIGHT=256 
```

请参阅：[如何在 GeoWebCache 中配置 VIEWPARAMS。](https://plus.google.com/100138637777014622717/posts/6svaKJ65Fcc)

# android - 在列表项内垂直居中文本视图

> ID：11558705
> 
> 赞同：2
> 
> 时间：2012-07-19T10:18:57.050
> 
> 标签：android, layout

我正在开发一个具有列表视图的 Android 2.3.3 应用程序。

这是列表 layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gatesLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/btnAddGate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/add_r"
            android:contentDescription="@string/layoutEmpty"
            android:onClick="onAddGateClick" />

        <ImageButton
            android:id="@+id/btnDeleteGate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/delete_n"
            android:contentDescription="@string/layoutEmpty"
            android:onClick="onDeleteGateClick" />

    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_marginTop="40dip"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="5dip"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

这是 list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/gateTypeImage"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_gravity="left|center_horizontal"
        android:layout_weight=".2"
        android:contentDescription="@string/layoutEmpty" />

    <TextView
        android:id="@+id/gateNameText"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_gravity="center_vertical|center"
        android:layout_weight=".7"
        android:textSize="15dp" />

    <CheckBox
        android:id="@+id/gateSelectedCheck"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_gravity="right|center_vertical"
        android:layout_weight=".1" />

</LinearLayout> 
```

我不知道如何使`gateNameText`文本垂直居中。我把它放在左上角的顶部。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:21:01.553

像这样使用`android:gravity`：

```
TextView
        android:id="@+id/gateNameText"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:gravity="center_vertical|center"
        android:layout_weight=".7"
        android:textSize="15dp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:21:31.903

你想使用：

```
android:gravity="center_vertical|center" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:29:02.450

试试这个 list_item.xml::

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="40dp" >

    <ImageView
        android:id="@+id/gateTypeImage"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_weight=".2"
        android:background="@drawable/ic_launcher"
        android:contentDescription="layoutEmpty" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" >

        <TextView
            android:id="@+id/gateNameText"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/gateTypeImage"
            android:layout_weight=".7"
            android:gravity="center_vertical"
            android:text="ABCDEFGH"
            android:textSize="15dp" />
    </RelativeLayout>

    <CheckBox
        android:id="@+id/gateSelectedCheck"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_weight=".1" />

</RelativeLayout> 
```

# php - PHP - 请求错误（无效请求）

> ID：11558708
> 
> 赞同：2
> 
> 时间：2012-07-19T10:19:01.500
> 
> 标签：php, codeigniter, internet-explorer-7

不久前，我使用 CodeIgniter 框架为客户创建了一个相当简单的 CMS。在过去的几个月里，我有三个不同的用户联系我说他们***有时***会在尝试提交数据时遇到错误。我没有收到其他用户的报告。错误是：

> 请求错误（无效请求） 无法处理您的请求。无法处理请求 这可能是由错误配置或格式错误的请求引起的。如需帮助，请联系您的网络支持团队。

我无法在任何网络浏览器中重新创建计算机上的错误。我尝试搜索相同的错误，但没有发现任何有用的东西。我什至不知道这是 PHP 错误还是浏览器错误（我猜是浏览器）。

客户使用的是 IE7。遇到此问题并已升级到 IE8 的用户现在报告没有问题。

**我想知道是什么导致了这个错误，如果它是我可以修复的，或者它是否绝对是他们的问题。**我已要求遇到此问题的用户尝试使用其他浏览器或尝试在家中重新创建它，但目前还没有人回复我。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:39:36.637

我猜两件事：

1.  使用 method="GET" 发送表单。

2.  他们正在输入无效字符，例如`/@$%`.

让它成为一个 POST，你应该解决这个问题。

# asp.net-mvc-3 - 获取 MVC3 中选中的 Chechkbox 和 Selected DropDown 的值？

> ID：11558710
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:19:09.883
> 
> 标签：asp.net-mvc-3, checkbox, html-select

大家好，我必须从复选框中传递选中的值并从下拉菜单中选择值，

我的观点看起来像这样

```
 Project:DropDown
                   -----------------------------
           EmployeeNames
       --------------------------
      checkbox,AnilKumar
      checkBox,Ghouse

this is my aspx page

       <body>
<% using (Html.BeginForm())
   { %> 
```

<%:Html.ValidationSummary(true)%>

```
<div></div><div style="margin:62px 0 0 207px;"><a style="color:Orange;">Projects : </a><%:Html.DropDownList("Projects")%></div>
<fieldset style="color:Orange;">

    <legend>Employees</legend>
      <% foreach (var item in Model)
         { %>  
              <div>
              <%:Html.CheckBox(item.EmployeeName)%>
              <%:Html.LabelForModel(item.EmployeeName)%>
              </div>
      <%} %>
      <%} %>
</fieldset>
<p>
<input type="button" value="AssignWork" /></p>

   </div>
 </body> 
```

我必须从下拉列表中获取所有选中的带有选定项目 ID 的员工姓名到我的发布方法中。我该怎么做

```
 this is my controller

         [AcceptVerbs(HttpVerbs.Get)]
public ActionResult AssignWork()
{
    ViewBag.Projects = new SelectList(GetProjects(), "ProjectId", "ProjectName");       
    var employee = GetEmployeeList();      
    return View(employee);
}

    public List<ResourceModel> GetEmployeeList()
{
        var EmployeeList = new List<ResourceModel>();
        using (SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True"))
        {
            conn.Open();
            SqlCommand dCmd = new SqlCommand("select EmployeId,EmployeeName from EmployeeDetails", conn);
            SqlDataAdapter da = new SqlDataAdapter(dCmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            conn.Close();
            for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
                var model = new ResourceModel();
                model.EmployeeId = Convert.ToInt16(ds.Tables[0].Rows[i]["EmployeId"]);
                model.EmployeeName = ds.Tables[0].Rows[i]["EmployeeName"].ToString();
                EmployeeList.Add(model);
            }
            return EmployeeList;
        }
}

    public List<ResourceModel> GetProjects()
    {
         var roles = new List<ResourceModel>();
        SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        SqlCommand Cmd = new SqlCommand("Select ProjectId,projectName from  Projects", conn);
        conn.Open();
        SqlDataAdapter da = new SqlDataAdapter(Cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
        {                                
            var model = new ResourceModel();
            model.ProjectId= Convert.ToInt16(ds.Tables[0].Rows[i]["ProjectId"]);
            model.ProjectName = ds.Tables[0].Rows[i]["projectName"].ToString();               
            roles.Add(model);
        }
          conn.Close();
          return roles ;

    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult AssignWork(int projectid,string EmployeeName,FormCollection form,ResourceModel model)
    {

        using (SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True"))
        {
            conn.Open();
            SqlCommand insertcommande = new SqlCommand("AssignWork", conn);
            insertcommande.CommandType = CommandType.StoredProcedure;
            insertcommande.Parameters.Add("@EmployeeName", SqlDbType.VarChar).Value = EmployeeName;
            insertcommande.Parameters.Add("@projectId", SqlDbType.VarChar).Value = projectid;
            //insertcommande.Parameters.Add("@Status", SqlDbType.VarChar).Value = model.status;
            insertcommande.ExecuteNonQuery();
        }
        return View();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:20:37.237

我所做的是创建一个 jQuery 函数，我连接到提交按钮的单击事件，该事件循环通过复选框，获取它们的 id，构建它们的逗号分隔列表，并将其发送到控制器。在控制器中，您可以在逗号上拆分字符串，并处理各个项目。我现在无法访问此代码，但如果您需要，可以稍后发布。

您还可以构建一个 JSON 字符串以发送回控制器并在控制器上处理 JSON 字符串，而不是逗号分隔列表。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:56:42.627

我用这个改变了AssignWork post方法

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult AssignWork(FormCollection collection, string Projects, string EmployeId)
    {
        ViewBag.Projects = new SelectList(GetProjects(), "ProjectId", "ProjectName");
        if (!string.IsNullOrEmpty(collection["EmployeId"]))
        {
            //formCollection["check"] is a string content checked box value with format value1,value2,valu3....
            string[] temp = collection["EmployeId"].Split(',');
            for (int i = 0; i < temp.Length; i++)
            {
                EmployeId = temp[i];
                if (EmployeId != "false")
                {

                    SqlConnection Assignworkconn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
                    {
                        Assignworkconn.Open();
                        SqlCommand insertcommande = new SqlCommand("AssignWork", Assignworkconn);
                        insertcommande.CommandType = CommandType.StoredProcedure;
                        insertcommande.Parameters.Add("@EmployeeName", SqlDbType.VarChar).Value = EmployeId;
                        insertcommande.Parameters.Add("@projectId", SqlDbType.Int).Value = Projects;
                        //put your insert code here with temp[i] is checked box value
                        insertcommande.ExecuteNonQuery();
                    }
                }
            }
        }
        return RedirectToAction("AssignWork");
    } 
```

# android - 定位视图

> ID：11558713
> 
> 赞同：0
> 
> 时间：2012-07-19T10:19:15.483
> 
> 标签：android, listview, position

我有一个问题：我在 AbsoluteLayout 中有一个列表视图和一个自定义视图。当我向上滚动列表时 - onScroll 我将视图向上移动，使其离开屏幕。当我向下滚动时，它再次显示。但是在设备上，即使我在它的开头，我也可以将列表向下移动，然后它会弹回正常位置，并且我无法获得第一个列表元素的上边界和活动窗口的上边界之间的距离。谁能帮我做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:25:52.887

不要使用绝对布局。它已被弃用。尝试使用线性/相对布局，我认为问题将得到解决。

# drupal - 如何将 ubercart 添加到购物车按钮更改为图像 [Drupal 7]？

> ID：11558717
> 
> 赞同：0
> 
> 时间：2012-07-19T10:19:38.950
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming

1.  ubercart 添加到购物车按钮我想将其更改为 [add_to_cart.jpg] 的图像。
2.  如何使用单价等额外列更新购物车页面..
3.  默认情况下，在 ubercart 购物车页面中添加额外的列，这是表格格式。这里有一些字段，例如 [remove ,title,unit,total]。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:03:42.413

我们在 drupal 7 ubercart 3 中使用。这里我们使用此功能更新购物车页面。

这是2个问题的答案。

** hook_form_uc_cart_view_form_alter**。我们找到了解决方案。

```
implementation like.. 
function modulename_form_uc_cart_view_form_alter(&$form, &$form_state) {

  if (count($form['items'])) {
    // Add edit column to tapir table.
    $form['items']['#columns']['unit'] = array(
      'cell'   => t('Unit Price'),
      'weight' => 2,
    );

    // Add edit link to all products.
    foreach (element_children($form['items']) as $key) {

      if (isset($form['items'][$key]['cart_item_id'])) {

         $form['items'][$key]['unit'] = array(
         '#markup' =>t(uc_currency_format(sprintf ("%.2f", $form['items'][$key]['#entity']->sell_price ))),
        );

      }
    }
  }
} 
```

# javascript - 在 JavaScript 中将函数作为参数传递

> ID：11558719
> 
> 赞同：0
> 
> 时间：2012-07-19T10:20:02.003
> 
> 标签：javascript

如何在 JavaScript 中将函数作为参数传递。

在下面的代码中，如果我调用`whatMustHappen (TWO(),ONE())`，我希望它们按照函数的顺序排列`x`。`y``whatMustHappen`

现在它在参数中看到它会触发。

```
var ONE = function() {
    alert("ONE");
}
var TWO = function() {
    alert("TWO");
}
var THREE = function() {
    alert("THREE");
}
var whatMustHappen = function(x, y) {
    y;
    x;
}
whatMustHappen(TWO(), null);
whatMustHappen(TWO(), ONE()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:22:24.467

```
var whatMustHappen = function(x, y) {
        if (y) y();
        if (x) x();
    }
whatMustHappen(TWO, null);
whatMustHappen(TWO, ONE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:22:29.633

`()`调用一个函数并返回其结果。要传递一个函数，您只需像传递任何其他变量一样传递它：

```
whatMustHappen(TWO, ONE); 
```

在`whatMustHappen`函数中，您可以调用它们：

```
var whatMustHappen = function(x, y) {
        if( y ) y();
        if( x ) x();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:22:36.793

如果你想传递一个函数，不要调用它（用`(args)`）。

```
function foo () {
    alert("foo");
}

function bar (arg) {
    alert("Function passed: " + arg);
    arg();
}

bar(foo); 
```

# c# - 调整大小期间 WPF ListBox 中 ListItem 的大小调整问题

> ID：11558720
> 
> 赞同：0
> 
> 时间：2012-07-19T10:20:03.407
> 
> 标签：c#, wpf, xaml

我正在尝试使用 WPF 中的 listBox 呈现一种 UI 的活动提要。listBox 在调整窗口大小时完美呈现并调整自身大小。但是，内部项目并没有按应有的方式包装其内容。因此，我将内部 Grid 的宽度设置为 listBox 的 ActualWidth。这是我的 XAML 和一些屏幕截图来解释我想要实现的目标。

```
<Grid x:Class="MyAddin.WPFControls"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:c="clr-namespace:MyAddin"
         mc:Ignorable="d" Background="Transparent"
         HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ShowGridLines="False" d:DesignHeight="221" d:DesignWidth="275">
<Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
</Grid.RowDefinitions>
<TextBlock HorizontalAlignment="Stretch" 
           IsManipulationEnabled="True" Grid.Row="0" 
           Height="20" Grid.ColumnSpan="5" TextAlignment="Right" Padding="0,0,5,0" Margin="0,5,0,0" FontSize="14" FontStyle="Normal" FontWeight="ExtraLight">Activity Feed</TextBlock>
<ListBox Grid.Row="1" Name="listBox1" IsSynchronizedWithCurrentItem="True" 
         ScrollViewer.HorizontalScrollBarVisibility="Hidden"
         VerticalContentAlignment="Stretch" ItemContainerStyle="{StaticResource ContainerStyle}" 
         AlternationCount="2" HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid MaxWidth="{Binding ElementName=listBox1, Path=ActualWidth}" Height="40">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="34"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                    <Border Grid.Column="0">
                        <Image Source="{Binding Path=AvatarURL}" Stretch="Fill" Width="32" Height="32" />
                    </Border>
                    <StackPanel Grid.Column="1">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Path=FirstName }" TextBlock.FontWeight="Bold" 
                                   HorizontalAlignment="Left" />
                        <TextBlock><Bold> - </Bold></TextBlock>
                            <TextBlock Text="{Binding Path=TS}" TextWrapping="Wrap" 
                                   TextTrimming="WordEllipsis" FontSize="9" Margin="0,2,0,0" FontWeight="ExtraLight" />
                        </StackPanel>
                        <TextBlock Text="{Binding Path=Comment}" TextWrapping="Wrap" 
                               TextTrimming="CharacterEllipsis" HorizontalAlignment="Stretch" 
                               VerticalAlignment="Top" Padding="0,0,5,0"/>
                    </StackPanel>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

它被渲染为图像 1。如果我重新调整窗口大小，列表框内容将按照我的预期进行包装。但是，当我重新调整窗口大小时，布局被破坏，如图 3 所示。我需要帮助解决 2 个问题：

1.  我该如何解决这个调整大小的问题。
2.  即使评论正在被包装和修剪。最后没有显示椭圆。

PS：我的应用是 Outlook 插件。

[图](http://imgur.com/Y6PTA) [1 图 3](http://imgur.com/oX4N1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:19:15.753

listBox 上的属性 ScrollViewer.Horizo​​ntalScrollBarVisibility 应该被禁用而不是隐藏。

# c# - C# Thread.Sleep 导致 firefox“连接被重置”

> ID：11558725
> 
> 赞同：0
> 
> 时间：2012-07-19T10:20:13.883
> 
> 标签：c#, firefox, google-chrome, sleep, tcpclient

我正在编写一个吐出一些 HTML 的服务器，但我遇到了 Chrome 和 Firefox 的问题。这是重要的代码片段

```
...
TcpListener listener = new TcpListener(IPAddress.Any, 12345);

listener.Start();

TcpClient client = listener.AcceptTcpClient();
client.ReceiveTimeout = 1000;
client.SendTimeout = 1000;

NetworkStream stream = client.GetStream();
stream.ReadTimeout = 1000;

...

StreamWriter sw = new StreamWriter(stream);
sw.Write(response);
sw.Flush();

System.Threading.Thread.Sleep(1000);

sw.Close();
stream.Close();
client.Close(); 
```

响应只是纯 HTML .... ，没有任何标题或其他元数据（也许这就是问题？）。现在发生的事情是这样的：

场景 1 - 有一个睡眠（1000）；

Chrome 完美运行，我得到了完整的 HTML 显示并且它运行正常。Firefox 工作，但 1 秒后我得到一个问题加载页面 - 连接被重置

场景 2 - 没有睡眠（1000）；

Firefox 完美运行，我得到了完整的 HTML 显示并且它运行正常。Chrome 不显示数据或数据不完整，页面“冻结”，我无法标记任何内容或单击任何按钮。

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:26:04.090

在您使用网络服务器之前，我建议您阅读这些文章

Web 服务器安全指南 [http://www.cmu.edu/iso/governance/guidelines/web-server.html](http://www.cmu.edu/iso/governance/guidelines/web-server.html)

超文本传输​​协议——HTTP/1.1 [http://www.ietf.org/rfc/rfc2616.txt](http://www.ietf.org/rfc/rfc2616.txt)

# java - Log4j“后备”附加程序

> ID：11558727
> 
> 赞同：0
> 
> 时间：2012-07-19T10:20:18.217
> 
> 标签：java, log4j

我目前正在微调一个相对较大项目的 log4j 配置。目前我还没有为所有可以创建日志条目的位置配置日志级别。

我想让 log4j 有某种后备附加程序来记录所有未配置其他附加程序的消息。因此，例如，如果我有一条日志消息：

登录到：abcd:WARN

并配置一个 appender 以记录具有级别 INFO 的包 abc，然后将输出记录到该 appender。

但是，如果我没有配置附加程序来处理 abcd，那么应该使用回退。

如果我将我的 abc Appender 配置为 FATAL 级别，那么根本不应该记录任何内容，因为我故意配置 log4j 以保留这些消息。

我希望我能够解释我想做什么:-)

有什么建议么？

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:01:52.453

如果您不想在根记录器中获取所有内容，则可以设置

```
additivity = "false" 
```

在其他记录器上。然后日志不会传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:10:31.567

我认为@Keppil 似乎混淆了一些东西。

Additivity 是在 Logger 上设置的，它控制父 loggers（包括 appender）的设置如何传播到 logger。

因此，在 OP 的情况下，您可以执行以下操作：

```
Root Logger -> Appender1
Logger a.b.c -> additivity = false, Appender2 
```

通过这样做，abc（及其所有子节点）会将其日志发送到 Appender2，而所有其他记录器将发送到 Appender1。

# javascript - 单击asp.net中的文本框时如何显示div。使用 jQuery

> ID：11558729
> 
> 赞同：2
> 
> 时间：2012-07-19T10:20:26.903
> 
> 标签：javascript, jquery, asp.net

我试过这样

```
<script type="text/javascript">
$(document).ready(function () {
$('#divID').hide();
 $('#txtInsertComments').Onfocus(function () {
 $('#divID').show();    });
});
</script>

//Asp.net Design
  <asp:TextBox ID="txtInsertComments" runat="server" Text="Demo"></asp:TextBox>
   <div runat="server" id="divID">
This is Div
</div> 
```

但仍然无法正常工作...请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:26:59.583

如果您正在使用它，`Master Page`那么您的 ID`Textbox`将会改变。所以使用它。

```
$('<%txtInsertComments.ClientID%>').focus(function () {
     $('#divID').show();    });
    }); 
```

如果您不使用，`Master Page`那么这应该可以

```
$('#txtInsertComments.ClientID').focus(function () {
         $('#divID').show();    });
        }); 
```

# c# - 在线程内打开窗口

> ID：11558745
> 
> 赞同：0
> 
> 时间：2012-07-19T10:21:21.040
> 
> 标签：c#, wpf, multithreading, threadpool, task-parallel-library

我需要一些帮助如何解决这个问题。

设想：

1.  启动 3 个线程（每个线程具有不同的值）（使用 TPL 或使用 ThreadPool）
2.  每个线程收集一些不同的数据
3.  为每个线程打开一个窗口，其中包含来自线程的特定数据
4.  用户在每个窗口中输入一些值
5.  值被发送回特定线程
6.  一些额外的工作
7.  完成的

现在，问题是，我无法在线程内打开窗口，因为它必须是 GUI 线程（ApartmentState.STA）。

知道如何处理窗口/用户输入的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:35:35.917

[http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)

解释如何为每个窗口设置单独的 UI 线程。

```
private void OnCreateNewWindow( object sender,   RoutedEventArgs e)
{
 Thread thread = new Thread(() =>
{
 Window1 w = new Window1();
 w.Show();

 w.Closed += (sender2, e2) =>
  w.Dispatcher.InvokeShutdown();

 System.Windows.Threading.Dispatcher.Run();
});

 thread.SetApartmentState(ApartmentState.STA);
 thread.Start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:13:39.613

我通常做的是让每个线程收集它的数据，BeginInvoke 自身到 GUI 线程，然后等待 AutoResetEvent/Semaphore。GUI线程获取消息并显示表单/来自线程实例的数据。通常的组件回调（在 GUI 线程上下文中）使用来自用户/其他的附加数据加载线程成员，然后可能当关闭用户输入表单或单击 OK 按钮时，发出事件/sema 信号。然后，工作线程继续运行，并加载了附加的用户数据。

您不必 BeginInvoke 线程对象 - 如果需要，您可以发布其他一些“ThreadComms”对象，它仅包含成员数据和要发出信号的事件。

这基本上是一种可行的解决方案，毫无疑问还有其他解决方案。如果您有三个线程，有时可能会有点混乱，因为可能随时弹出三个用户输入表单，（令人讨厌的是，当用户填写一半时，会弹出来自 thread/s 2/3 的新表单来自线程 1) 的表单。

你可以只调用 Invoke()，但如果可以的话，我会尽量避免直接、同步的线程间通信。Invoke() 和模态表单可以解决用户忙于填写时弹出新表单的问题。也许您可以尝试一下？

# javascript - 在清除浏览数据之前调用 javascript 函数

> ID：11558746
> 
> 赞同：0
> 
> 时间：2012-07-19T10:21:23.037
> 
> 标签：javascript

嗨，是否可以在清除浏览数据之前调用 javascript 函数。实际上我们有 window.unload 在浏览器关闭之前调用。我想在我们清除浏览数据之前调用 javascript-function。可以吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:43:10.967

我能想到的只有一种方法可以让您“通知”这种注销方式：您需要从客户端到服务器的定期 ping，当 ping 停止发生时服务器会注意到。当然，当浏览器关闭或崩溃时会发生这种情况，但我认为您无法获得 100% 正确的结果。您可以通过一些额外的逻辑来完善这一点，例如在 ping 停止时注册一个“可能注销”事件，如果下次您发现相同的用户登录（当他们再次导航到您的站点时）然后删除“可能注销” " 事件，如果下次用户必须再次登录，则将其转换为“真正的注销”事件。

对此进行更多思考：我不知道您为什么要注册所有类型的注销，但即使您可以按照您的要求进行操作，如果用户从不同的浏览器/客户端登录并从其中一个注销呢？这不会清除他们在其他客户端上的 cookie，因此他们还没有完全注销。根据您为什么需要注册他们的登录时间，这可能会给您带来问题。

# unix - 从文件头匹配的空格分隔文件中删除列

> ID：11558748
> 
> 赞同：1
> 
> 时间：2012-07-19T10:21:25.810
> 
> 标签：unix, sed, awk

我有一个空格分隔的输入文本文件。我想使用 sed 或 awk 删除列标题为大小的列。

输入文件：

```
id quantity colour shape size colour shape size colour shape size
1 10 blue square 10 red triangle 8 pink circle 3
2 12 yellow pentagon 3 orange rectangle 9 purple oval 6 
```

期望的输出：

```
id quantity colour shape colour shape colour shape
1 10 blue square red triangle pink circle
2 12 yellow pentagon orange rectangle purple oval 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:29:49.937

### `awk`命令

```
awk '
NR==1{
    for(i=1;i<=NF;i++)
        if($i!="size")
            cols[i]
}
{
    for(i=1;i<=NF;i++)
        if(i in cols)
            printf "%s ",$i
    printf "\n"
}' input > output 
```

* * *

### 漂亮的印刷

```
column -t -s ' ' output 
```

* * *

### 结果

```
id  quantity  colour  shape     colour  shape      colour  shape
1   10        blue    square    red     triangle   pink    circle
2   12        yellow  pentagon  orange  rectangle  purple  oval 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:00:36.000

使用`awk`. 块中有一个硬编码变量 ( `columns_to_delete`)`BEGIN`来指示要删除的字段的位置。然后脚本将计算每个字段的宽度，并删除与变量位置匹配的字段。

假设`infile`有问题的内容和以下内容`script.awk`：

```
BEGIN {
    ## Hard-coded positions of fields to delete. Separate them with spaces.
    columns_to_delete = "5 8 11"

    ## Save positions in an array to handle it better.
    split( columns_to_delete, arr_columns )
}

## Process header.
FNR == 1 { 

    ## Split header with a space followed by any non-space character.
    split( $0, h, /([[:space:]])([^[:space:]])/, seps )

    ## Use FIELDWIDTHS to handle fixed format of data. Set that variable with
    ## length of each field, taking into account spaces.
    for ( i = 1; i <= length( h ); i++ ) { 
        len = length( h[i] seps[i] )
        FIELDWIDTHS = FIELDWIDTHS " " (i == 1 ? --len : i == length( h ) ? ++len : len)
    }   

    ## Re-calculate fields with new FIELDWIDTHS variable.
    $0 = $0
}

## Process header too, and every line with data.
{
    ## Flag to know if 'p'rint to output a field.
    p = 1 

    ## Go throught all fields, if found in the array of columns to delete, reset
    ## the 'print' flag.
    for ( i = 1; i <= NF; i++ ) { 
        for ( j = 1; j <= length( arr_columns ); j++ ) { 
            if ( i == arr_columns[j] ) { 
                p = 0 
                break
            }   
        }   

        ## Check 'print' flag and print if set.
        if ( p ) { 
            printf "%s", $i
        }
        else {
            printf " " 
        }
        p = 1 
    }   
    printf "\n"
} 
```

像这样运行它：

```
awk -f script.awk infile 
```

具有以下输出：

```
id  quantity colour shape    colour shape      colour  shape    
1   10       blue   square   red    triangle   pink    circle   
2   12       yellow pentagon orange rectangle  purple   oval 
```

* * *

**编辑**：~~哦哦，刚刚意识到输出不正确，因为两个字段之间存在连接。修复这将是太多的工作，因为在开始处理任何内容之前将检查每一行的最大列大小。但是有了这个脚本，我希望你能明白。现在不是时候，也许我可以稍后尝试修复它，但不确定。~~

**编辑 2**：固定为删除的每个字段添加额外的空间。这比预期的要容易:-)

* * *

**编辑3**：见评论。

我已经修改了该`BEGIN`块以检查是否提供了一个额外的变量作为参数。

```
BEGIN {
    ## Check if a variable 'delete_col' has been provided as argument.
    if ( ! delete_col ) { 
        printf "%s\n", "Usage: awk -v delete_col=\"column_name\" -f script.awk " ARGV[1]
        exit 0
    }   

} 
```

并添加到`FNR == 1`模式计算要删除的列数的过程：

```
## Process header.
FNR == 1 { 

    ## Find column position to delete given the name provided as argument.
    for ( i = 1; i <= NF; i++ ) { 
        if ( $i == delete_col ) { 
            columns_to_delete = columns_to_delete " " i
        }   
    }   

    ## Save positions in an array to handle it better.
    split( columns_to_delete, arr_columns )

    ## ...
    ## No modifications from here until the end. Same code as in the original script.
    ## ...
} 
```

现在像这样运行它：

```
awk -v delete_col="size" -f script.awk infile 
```

结果将是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:25:15.780

使用[`cut`](http://www.manpagez.com/man/1/cut/)：

```
$ cut -d' ' -f1-4,6,7,9,10 < in.txt   
id quantity colour shape colour shape colour shape
1 10 blue square red triangle pink circle
2 12 yellow pentagon orange rectangle purple oval 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:16:17.347

给定一个固定的文件格式：

```
cut -f 1-4,6-7,9-10 infile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:03:45.493

如果你有 GNU cut 可用，可以这样做：

```
columns=$(head -n1 INPUT_FILE \
          | tr ' ' '\n'       \
          | cat -n            \
          | grep size         \
          | tr -s ' '         \
          | cut -f1           \
          | tr -d ' '         \
          | paste -sd ",")

cut --complement -d' ' -f$columns INPUT_FILE 
```

它根据标题生成一个逗号分隔的列表，然后从 INPUT_FILE 中删除该列表的补码。

# iphone - 回收父 ViewController 的 UIImage

> ID：11558752
> 
> 赞同：0
> 
> 时间：2012-07-19T10:21:38.553
> 
> 标签：iphone, ios, xcode, ios5

我的 ViewController 创建了 60 个小 UIView。每个都需要相同 jpg 的 UIImage（在 UIImageView 中使用）。

我的理论是，与其每个 UIView 创建自己的 UIImage，不如重用一个在 ViewController 中定义的 UIImage。

视图控制器代码：

```
UIImage *reuseableUIImage = [UIImage imageNamed:@"LittlePicture.jpg"];

for (i=0; i<60; i++){
    [arrayOfUIViews addObject:[[myUIViewMaker alloc] init...]];
} 
```

我的理论错了吗？我应该继续在每个 UIView 中创建 UIImage 吗？

如果我的理论很好，**我的 UIViews 如何定位父 ViewController 的 UIImage？** 我不知道语法。为了说明（很糟糕），UIView 中的代码将是*这样*的：

```
finalUIImageView = [[UIImageView alloc] initWithImage:self.parentViewController.reuseableUIImage]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:24:58.367

您的代码看起来不错，应该可以正常工作。您需要在 viewController 上定义一个属性来保存 UIImage。

您将从中获得的主要好处是加载图像的时间只会发生一次。如果您为每个视图分配并初始化图像，则每次都必须加载图像。

编辑：

再想一想，最好的方法是在初始化时将图像传递到您的子视图中。

```
UIImage *reuseableUIImage = [UIImage imageNamed:@"LittlePicture.jpg"];

for (i=0; i<60; i++){
    [arrayOfUIViews addObject:[[myUIViewMaker alloc] initWithImage:reusableUIImage]];
} 
```

您的 myUIViewMaker 类中的 init 方法将实现为：

```
-(id)initWithImage:(UIImage *)image
{
    self = [super init];
    if (self) {
        finalUIImageView = [[UIImageView alloc] initWithImage:image];  
    }
    return self;
} 
```

# gtkmm - 在另一个应用程序中嵌入 gimp

> ID：11558756
> 
> 赞同：2
> 
> 时间：2012-07-19T10:21:53.937
> 
> 标签：gtkmm

只是想知道是否可以将 GIMP 嵌入到另一个应用程序中。

我正在构建一个需要在该应用程序中进行一些图像编辑的应用程序；如何将 GIMP 用作嵌入式编辑器？

该应用程序使用 gtkmm。

# php - 使用 Eclipse PDT 将 PHP 应用程序部署到 webroot？

> ID：11558758
> 
> 赞同：0
> 
> 时间：2012-07-19T10:21:59.533
> 
> 标签：php, eclipse-pdt

是否可以将 PHP 项目放在一个目录中，例如 - mydir/development/php/myproject

然后当您在 Eclipse 中单击运行/调试时，它会自动部署到 apache /www webroot 目录吗？

# iphone - 持久性数据应该存储在 iOS 中的什么位置？

> ID：11558760
> 
> 赞同：2
> 
> 时间：2012-07-19T10:22:05.960
> 
> 标签：iphone, ios, ipad, persistence

**问题：**
iOS 设备上的什么地方可以存储少量信息（只有几个字节，在我的情况下只有 1 位），以便在应用程序从手机中删除并稍后再次重新安装后它们仍然可用？

**背景：**
我正在开发一个可以免费进入应用商店的应用。与应用程序一起提供了一个免费的测试包。这个测试包允许在有限的时间内访问我服务器上有限数量的项目。如果用户愿意，他/她可以购买更多物品和更长持续时间的附加包。

要使用此软件包，每个用户都必须在我的服务器上创建一个帐户。很容易确保每个帐户只能使用一个免费包。但是我看不到阻止用户创建数百个额外帐户的方法。所以我想要更多：

我希望每个用户（每个活着的人）只能使用一个免费包，与他/她将创建的帐户数量无关。

我知道，在用户（活人）级别上限制这一点是不可能的。但是在手机上限制它是可以接受的，因为我相信，没有多少人同时使用超过 2 或 3 部 iPhone。如果一个人在 3 部不同的 iPhone 上使用我的应用程序只是为了能够使用 3 个具有 3 个不同帐户的免费包，那么这对我来说是可以接受的。

但要做到这一点，我需要将信息存储在手机的某个位置，即与应用程序一起提供的免费包已经在使用中。但是当用户卸载应用程序并稍后重新安装时，该信息必须仍然可供应用程序使用。而且我不知道在从手机中删除应用程序后，将这个微小的 1 位信息存储在哪里。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:31:52.247

解决此问题的最简单方法是将 iPhone UniqueDeviceId 存储在您的服务器上。然后下次有人尝试从设备注册帐户时，您可以检查设备是否已经创建了帐户。

Apple 从 SDK 中删除（折旧）了 UDID，因此另一种方法是使用 GitHub 上提供的 OpenUDID。这将为您提供一个唯一的 ID 来识别设备：

[OpenUDID - GitHub](https://github.com/ylechelle/OpenUDID/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:26:47.210

iOS中没有这样的地方。如果应用程序被删除，您可以使用 KeyChain 存储一些数据以保留。但是，如果用户清除设备，这些设置将会生效。

只是不确定如何做到这一点，制作一个免费增值应用程序不应该限制使用时间，而是更多的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T15:00:43.000

这就是我所做的 Hubert Schölnast：

1.  我的应用程序需要登录，因此每个人都必须拥有有效的登录用户名和密码。

2.  该应用程序使用 UUID 而不是 UDID 或任何替代方案，并且每次当应用程序与服务器通信时，它都会将 UUID 和用户身份发送到服务器。

3.  在服务器端，我有数据库表存储用户的身份和他们的 UUID。

4.  在服务器端，在代码中，我强制执行逻辑来检查每个 Web 服务调用的用户及其 UUID。如果他们违反了规则，我会根据规则在用户表或设备表中标记它们。

还有一个问题，如果他们一直卸载应用程序重新安装，每次都用另一个用户名注册，那么很难识别。但是，这取决于他们真正想付出多少努力来滥用您的系统。

在我的应用程序中，这不是问题，因为作为用户的注册不对公众开放。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T17:30:22.633

我自己找到了答案：即使删除了应用程序，**钥匙串**中存储的数据也会保留在那里，并且可以在重新安装后从同一个应用程序中访问。这正是我所需要的。
只有完全重新安装固件才能删除条目，但这也会删除所有其他应用程序的所有其他条目。人们不会经常这样做，而且我认为仅仅为我的应用程序获得额外的免费包确实是一种矫枉过正的做法。这对我来说是可以接受的。

Apple 提供了一个用于钥匙串访问的示例应用程序。我没有详细阅读这个示例应用程序，但我很想它包含我需要的一切：http: [//developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)

* * *

**编辑：**

将信息存储为通用密码是解决我的问题的最佳方法，但 Apple 的示例应用程序有一个错误。在这个错误中，错误的属性被用作“唯一键”来存储通用密码。有关更多详细信息以及如何使钥匙串项目真正独一无二，请查看以下问题：[是什么让钥匙串项目独一无二（在 iOS 中）？](https://stackoverflow.com/questions/11614047/what-makes-a-keychain-item-unique-in-ios)

# asp.net - asp.net 视图中的 MVC 未出现

> ID：11558765
> 
> 赞同：0
> 
> 时间：2012-07-19T10:22:21.513
> 
> 标签：asp.net, asp.net-mvc

我的模型是这样的

```
namespace CustomerBook.Models
{
    public class CustomerModels
    {
        public string fname { set; get; }
        public string lname { set; get; }
        public string city { set; get; }
        public List<CustomerModels> lst;

    public List<CustomerModels> getData()
    {
        string path = @"somepath\MvcApplication13\\Book1.xlsx";
        string excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;";
        OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);
        OleDbCommand ocmd = new OleDbCommand("select * from [Sheet1$]", excelConnection);
        excelConnection.Open();
        OleDbDataReader odr = ocmd.ExecuteReader();

        lst = new List<CustomerModels>();
        CustomerModels modl;
        while (odr.Read())
        {
            modl = new CustomerModels();
            modl.fname =valid(odr, 0);
            modl.lname = valid(odr, 1);
            modl.city = valid(odr, 2);
            lst.Add(modl);
        }
        excelConnection.Close();
        return lst;
    }
    protected string valid(OleDbDataReader myreader, int stval)
    {
        //if any columns are found null then they are replaced by zero
        object val = myreader[stval];
        if (object.ReferenceEquals(val, DBNull.Value))
        {
            return Convert.ToString(0);
        }
        else
        {
            return val.ToString();
        }
    }
} 
```

}

我的控制器是

```
using System.Linq;
using System.Web;
using System.Web.Mvc;
using CustomerBook.Models;
namespace CustomerBook.Controllers
{
    public class LoadCustomerAndDisplayController : Controller
    {
        //
        // GET: /LoadCustomerAndDisplay/
        public ActionResult Index()
        {
            CustomerModels objCustomer = new CustomerModels();
            var dataval = objCustomer.getData();
            return View(dataval);
        }
    }
} 
```

生成的视图是

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<CustomerBook.Models.CustomerModels>" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Index</title>
</head>
<body>
    <div>
        hhiiiiiiiiiiiiii<br />
        <%=Model.fname %>
        <%=Model.lname %>
        <%=Model.city %>
    </div>
</body>
</html> 
```

问题是

```
<%=Model.fname %>
            <%=Model.lname %>
            <%=Model.city %> 
```

没有给我任何输出...我通过调试检查 dataval 值...它持有该值.........错误是

**传入字典的模型项的类型为“System.Collections.Generic.List`1[CustomerBook.Models.CustomerModels]”，但此字典需要“CustomerBook.Models.CustomerModels”类型的模型项。**

请告诉我哪里错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:27:05.277

错误信息非常明显。您正在将 a`List<CustomerModels>`从控制器操作传递给视图，并且您的视图仅被强类型化为单个`CustomerModels`.

因此，您可以更改视图的模型类型：

```
<%@ Page 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewPage<List<CustomerBook.Models.CustomerModels>>" 
%> 
```

然后能够遍历模型并显示结果：

```
<table>
    <thead>
        <tr>
            <th>First name</th>
            <th>Last name</th>
            <th>City</th>
        </tr>
    </thead>
    <tbody>
        <% foreach (var item in Model) { %>
            <tr>
                <td><%: item.fname %></td>
                <td><%: item.lname %></td>
                <td><%: item.city %></td>
            </tr>
        <% } %>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:28:07.850

方法在视图期望时`getData()`返回`List<CustomerModels>``CustomerBook.Models.CustomerModels`

要么将视图更改为

```
System.Web.Mvc.ViewPage<System.Collections.Generic.List<CustomerBook.Models.CustomerModels>> 
```

或有`getData()`回报`CustomerModels`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:29:55.540

投入`IEnumerable`_

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<CustomerBook.Models.CustomerModels>" %> 
```

像这样：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<CustomerBook.Models.CustomerModels>>" %> 
```

解决了问题..!!

# iphone - 如何从 iPhone 中的 sqlite 数据库中获取 NSInteger 值

> ID：11558769
> 
> 赞同：2
> 
> 时间：2012-07-19T10:22:24.150
> 
> 标签：iphone, xcode, sqlite

如何从 iPhone SQLite 数据库中获取整数值通常我们使用以下是 varchar 或 string 但我们如何获取 NSInteger 值？

```
 const char *sql = "select * from questions";
    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
            DataController *coffeeObj = [[DataController alloc] initWithPrimaryKey:primaryKey];

            coffeeObj.restaurantLocation = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];

            coffeeObj.foodQualityRating = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)]; 
```

restaurantlocation 和 foodquality rating 或 NSString 我在 Integer 中有调查 id，我们如何从表中获取它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T10:27:12.793

如果surveyId 字段是表中食品质量之后的下一列，您将使用以下代码：

```
coffeeObj.surveyId = sqlite3_column_int(selectstmt, 3); 
```

语句末尾的 3 是列索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:26:33.640

我使用下面的代码从 SQlite 数据库中获取整数值

```
NSInteger i=sqlite3_column_int(statement, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T16:32:21.683

使用这个 NSInteger i=sqlite3_column_int(statement, 0);

# php - 自 7 月 15 日以来未调用沙盒 paypal ipn

> ID：11558774
> 
> 赞同：0
> 
> 时间：2012-07-19T10:22:36.793
> 
> 标签：php, paypal, sandbox, paypal-ipn

我的沙箱 ipn 从 7 月 15 日起没有被调用，因为在那之前它工作正常。它与 ipn 模拟器一起工作正常。

我不知道出了什么问题，因为我没有对我的 ipn 和 paypal 表单文件进行任何更改。

这是我的贝宝表格

```
<form name="frmSample" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_cart">
    <input type="hidden" name="upload" value="1">
    <input type="hidden" name="rm" value="2">
    <input type="hidden" name="business" value="sreeni_1342691311_biz@gmail.com">
    <input type="hidden" name="item_name_1" value="Memorex">
    <input type="hidden" name="item_number_1" value="25">
    <input type="hidden" name="amount_1" value="30">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="notify_url" value="http://example.com/notify.php">
    <input type="hidden" name="return" value="http://example.com">
    <input type="hidden" name="cancel_return" value="http://example.com">
    <input type="submit" value="submit" >
</form> 
```

这只是我在 ipn 监听器中写的

```
<?php
mail("sreeni@gmail.com","My Subject","My biz Message");
?> 
```

通过 ipn 模拟器发送邮件。我尝试过更改我的企业帐户并打开 ipn 但没有任何效果

有人可以帮助我吗？任何人都可以检查沙箱 ipn 是否为您工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:14:27.830

面临同样的问题.. 但是您可以注意到它与 cmd=_xclick 的“立即购买”按钮一起使用

这只是 cmd=_cart 的问题

这可能只是沙盒的问题。如果您上线，它可能会开始正常工作。

# javascript - 包括带有 phonegap 的模板文件

> ID：11558784
> 
> 赞同：1
> 
> 时间：2012-07-19T10:22:56.140
> 
> 标签：javascript, jquery, html, mobile, cordova

我正在尝试在使用 ajax 和 jquery 的 phonegap 应用程序中包含一个模板文件，使用以下代码：

```
$.get('templates/' + tpl_file, function (template) {
    // Do stuff
}); 
```

它在普通浏览器中工作正常，但在模拟器中似乎不起作用。我错过了什么？（有没有更好的方法包括？）

# android - Android - 按钮不使用 dispatchTouchEvent 响应 Horizo ntalScrollView 中的 onClick

> ID：11558794
> 
> 赞同：0
> 
> 时间：2012-07-19T10:23:19.517
> 
> 标签：android, button, scrollview

你能帮助我吗？当我按下按钮时，它保持按下状态，但什么也不做。

对不起，我的英语不好！:)

谢谢！

fasmenupincipal.xml 文件：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

我想从膨胀布局开始一个新的活动。我制作了一个滚动视图，然后将视图添加到滚动视图中，从而使布局膨胀。这是de java代码：

```
public class ProvaPedidoScroll extends Activity {

    Context mContext;
    HorizontalScrollView mScrollView;
    LinearLayout mLinearLayout;
    LinearLayout.LayoutParams mLinearLayoutParams;
    Display mDisplay;
    // scroll behaviour
    private int mScrollStartPosition;
    private static final float SCROLL_MARGIN = 0.2f;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mContext = this;
        // load layout from xml and get references to sub-views
        setContentView(R.layout.scrollview);
        mScrollView = (HorizontalScrollView) findViewById(R.id.scrollview);
        mLinearLayout = (LinearLayout) findViewById(R.id.scrollviewlinearlayout);
        // get a display reference (used to find screen size)
        mDisplay = ((WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        // get the layout parameters to apply to the sub-views
        mLinearLayoutParams = new LayoutParams(mDisplay.getWidth(), mDisplay.getHeight());
        // add some views to the ScrollView
        addViewsToScrollView();
    }

    /**
     * Inflates and adds some views to the ScrollView
     */
    private void addViewsToScrollView() {
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        View menuprincipal = inflater.inflate(R.layout.fasmenuprincipal, null);
        menuprincipal.setLayoutParams(mLinearLayoutParams);
        mLinearLayout.addView(menuprincipal);

        Button ClientesMenu = (Button) menuprincipal.findViewById(R.id.button1);

        ClientesMenu.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                int iOpcio = 1;
                Intent VeureClients = new Intent(ProvaPedidoScroll.this, buscar_client.class);
                VeureClients.putExtra("Opcio", iOpcio);
                startActivity(VeureClients);

            }
        });

        View view2 = inflater.inflate(R.layout.fasmenugestion, null);
        view2.setLayoutParams(mLinearLayoutParams);
        mLinearLayout.addView(view2);

    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        int viewWidth = mDisplay.getWidth(); // width of each view
        int triggerWidth = (int) (SCROLL_MARGIN * viewWidth); // amount user has to scroll to move to next view
        int pos = mScrollView.getScrollX();
        int diff = pos % viewWidth; // offset of current scroll from leftmost view's snap position
        int posLeftView = pos - diff; // absolute snap position of the leftmost view on screen
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // Record the starting scroll position. This is used to decide the scroll direction.
                mScrollStartPosition = pos;
                break;
            case MotionEvent.ACTION_UP:
                if (pos > mScrollStartPosition) {
                    // Scrolling right
                    if (diff > triggerWidth) mScrollView.smoothScrollTo(posLeftView + viewWidth, 0);
                    else mScrollView.smoothScrollTo(posLeftView, 0);
                } else {
                    // Scrolling left
                    if (diff > (viewWidth - triggerWidth)) mScrollView.smoothScrollTo(posLeftView + viewWidth, 0);
                    else mScrollView.smoothScrollTo(posLeftView, 0);
                }
                // replacing our scrollTo command with it's own
                return true;
        }
        return super.dispatchTouchEvent(ev);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:07:32.133

试试这个代码

可能会发现错误

```
HorizontalScrollView scrollView = (HorizontalScrollView) findViewById(R.id.scrollView1);

        LinearLayout topLinearLayout = new LinearLayout(this);
       // topLinearLayout.setLayoutParams(android.widget.LinearLayout.LayoutParams.FILL_PARENT,android.widget.LinearLayout.LayoutParams.FILL_PARENT);
        topLinearLayout.setOrientation(LinearLayout.HORIZONTAL); 

        for (int i = 0; i < 15; i++){

            final ImageView imageView = new ImageView (this);

            imageView.setTag(i);

            imageView.setImageResource(R.drawable.ic_launcher);

            topLinearLayout.addView(imageView);

            imageView.setOnClickListener(new OnClickListener()
            {

                @Override
                public void onClick(View v)
                {
                    // TODO Auto-generated method stub
                    Log.e("Tag",""+imageView.getTag());
                }
            });

        }

        scrollView.addView(topLinearLayout); 
```

# php - Magento 显示相关产品图片

> ID：11558796
> 
> 赞同：0
> 
> 时间：2012-07-19T10:23:28.387
> 
> 标签：php, magento

我正在尝试改变 Magento 处理产品图像的方式。目前在可配置产品上，它显示您已上传到可配置产品的图像。

我想要它，这样如果产品是可配置的，那么它只会显示相关产品的图像，而不是上传到配置产品的图像。

在我的媒体文件中，我有

```
<?php foreach ($this->getGalleryImages() as $_image): ?>

    <li><a href="<?php echo $this->htmlEscape($_image->getLabel()) ?>"><img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(70, 70); ?>" width="70"/></a></li>

<?php endforeach; ?> 
```

我可以看到是从可配置产品的图库中提取图像，因此需要以某种方式更改它以检查它是否是可配置产品，然后是否仅从相关产品中提取图像。

我想检查它是否是可配置的，它会是这样的吗？

```
<?php if ($_product->isSaleable() && (!$_product->isConfigurable() ?> 
```

然后是拉取相关产品图像的新代码，我需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:30:10.480

您可以通过调用可配置产品从可配置产品中获取一系列使用过`getAllowProducts()`的产品。

```
foreach ($_product->getAllowProducts() as $_associatedProduct) {
    echo $this->helper('catalog/image')->init($_associatedProduct, 'image')
        ->resize(340,260);
} 
```

# objective-c - 从数组加载节标题

> ID：11558800
> 
> 赞同：1
> 
> 时间：2012-07-19T10:23:50.943
> 
> 标签：objective-c, ios

我是这里的新手。我有一个 UITableView 动态加载数据。我知道如何将值从数组传递到单元格。但是，我想在我的表中有多个部分，并希望为我拥有的部分传递不同的部分标题。无论如何我可以将字符串值从数组传递给“titleForHeaderInSection”方法吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:31:22.250

这个之前的SO问题/答案应该给你你想要的？

[iPhone：从数组中设置章节标题](https://stackoverflow.com/questions/8270500/iphone-setting-section-titles-from-an-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:35:48.457

在您的 TableViewDelegateProtocol 处理程序中实现

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

创建一个带有 UILabel 子视图的 UIView，其中包含您要显示的文本并返回它。创建 HeaderView 的最简单方法是通过 xib 文件。

# r - 填充列值？

> ID：11558802
> 
> 赞同：1
> 
> 时间：2012-07-19T10:24:01.783
> 
> 标签：r, assign, indices, pad

在 R 2.14.2 我有一个矩阵：

```
mat1=matrix(c('A','','','B')) 
```

我想填写空值，所以它变成这样：

```
mat2=matrix(c('A','','','B','A','A','A','B'),2,4,byrow=T) 
```

换句话说，我如何填充空值？

[在 Excel 中，我将在 B 列中使用此公式：B2=if(isblank(A2),B1,A2)，然后将其复制下来]。

我怎样才能在 R 中做到这一点？

亨克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:40:38.237

`na.locf`在包装中使用`zoo`。`locf`手段，这`last observation carried forward`正是你正在做的：

```
library(zoo)

x <- c('A',NA,NA,'B')
na.locf(x)

[1] "A" "A" "A" "B" 
```

* * *

但请确保您了解`NA`和`""`（空字符串）之间的区别。在 Excel 中，使用空字符串来防止显示公式可能很有用，但在 R 中，最好用于`NA`指示缺失值。

# c++ - 创建用户定义的转换

> ID：11558807
> 
> 赞同：6
> 
> 时间：2012-07-19T10:24:23.817
> 
> 标签：c++, boost, boost-units

我正在尝试为米和公里创建单位。然后我想总结并相应地转换它们。我知道 boost::units 库已经有 SI 系统，但我想从头开始创建所有内容，因为我需要为我的项目创建自己的系统（所以我这样做是为了学习）。我的目的是声明一个可以使用单位修改的“长度”变量：例如我想写

```
Length xLength1 = 5350 * Meters + 2 Kilometers; 
```

为此，我创建了**length.h**文件，其中包含米和公里的定义，最后我声明了这两个单位之间的转换：

```
#ifndef LENGTH_H_
#define LENGTH_H_

#include <boost/units/base_dimension.hpp>
#include <boost/units/base_unit.hpp>
#include <boost/units/scaled_base_unit.hpp>
#include <boost/units/quantity.hpp>
#include <boost/units/conversion.hpp>

struct LengthBaseDimension : boost::units::base_dimension<LengthBaseDimension,1>{};

typedef LengthBaseDimension::dimension_type LengthDimension;

struct MeterBaseUnit : boost::units::base_unit<MeterBaseUnit, LengthDimension, 1>{};
template <> struct boost::units::base_unit_info<MeterBaseUnit>
{
  static std::string name()   { return "meter"; }
  static std::string symbol() { return "m";     }
};

struct KilometerBaseUnit : boost::units::base_unit<KilometerBaseUnit, LengthDimension, 2>{};
template <> struct boost::units::base_unit_info<KilometerBaseUnit>
{
  static std::string name()   { return "kilometer"; }
  static std::string symbol() { return "km";        }
};

// I don't want to use scaled_unit because I need this for my real purpose
BOOST_UNITS_DEFINE_CONVERSION_FACTOR(KilometerBaseUnit, MeterBaseUnit, double, 1000.0);

#endif 
```

然后我创建文件**units.h**，在其中定义我自己的单位系统

```
#ifndef LIB_UNITS_H_
#define LIB_UNITS_H_

#include "length.h"
#include <boost/units/unit.hpp>
#include <boost/units/static_constant.hpp>
#include <boost/units/make_system.hpp>
#include <boost/units/io.hpp>

typedef boost::units::make_system<MeterBaseUnit>::type UnitsSystem;

typedef boost::units::unit<boost::units::dimensionless_type, UnitsSystem> Dimensionless;
typedef boost::units::unit<LengthDimension                 , UnitsSystem> SystemLength;

BOOST_UNITS_STATIC_CONSTANT(Kilometer  , SystemLength);
BOOST_UNITS_STATIC_CONSTANT(Kilometers , SystemLength);
BOOST_UNITS_STATIC_CONSTANT(Meter      , SystemLength);
BOOST_UNITS_STATIC_CONSTANT(Meters     , SystemLength);

// Typedefs of dimensions
typedef boost::units::quantity<SystemLength> Length;

#endif 
```

至少，我在我的主要功能中使用了这个标题

```
#include "units.h"
#include <iostream>

int main(void)
{
  Length xLength1 ( 300.0 * Meters);
  Length xLength2 (1500.0 * Kilometer );
  Length xLength3;
  std::cout << xLength2 << std::endl;
  xLength3 = xLength1 + xLength2;

  return 0;
} 
```

这个项目编译，但它没有做我想要的。当我打印变量 xLength2 时，我得到**1500 m**而不是**1500 km**或**1500000 m**。总和也是错误的，因为我知道 1800 m。就像我将公里视为米并且转换不起作用。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:42:23.870

除非您的项目是复制 Boost 库，否则这似乎是一种编写单位系统的疯狂方式。模板黑客很少是最好的选择。

相反，使用一个类！下面不是真正的代码：

```
class temperature{
   double temp; //always in kelvin
   temperature(double temperature, char unit){
       if(unit=='k')
                temp=temperature
       if(unit=='c')
                temp=temperature+273
    }
 }; 
```

依此类推以实现转换回您想要的任何单位。基本上，您选择一个存储所有内容的基本单元，然后转换为该基本单元。如果你在做 SI，可能是克、米、秒、开尔文等。

# asp.net-mvc-3 - 如何在 MVC3 中插入 数据库控制器时获取 CheckBox 选定值？

> ID：11558808
> 
> 赞同：1
> 
> 时间：2012-07-19T10:24:27.373
> 
> 标签：asp.net-mvc-3, c#-4.0

大家好，我必须将复选框中的选定值放入我的 post 方法中，然后插入到数据库控制器中。我怎样才能做到这一点？

```
My Model Code
-----------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;
using System.Data.Entity;
using System.Collections;

namespace Gridview_BugTracker.Models
{
    public class BugTracker_DataHelper
    {

        public static List<BugTracker_DataHelper> GetList{get;set;}

           public int ProjectId { get; set; }
           public string projectName { get; set; }           
           public string Description { get; set; }
           public  string status { get; set; }
           public int EmployeId { get; set; }
           public string EmployeName { get; set; }
           public bool selectChkbox { get; set; }         
      }      

   }

    My Control code
    ------------------------------

     using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using System.Data;
    using Gridview_BugTracker.Models;
    using System.Data.SqlClient;
    using System.Data.Entity;

    namespace Gridview_BugTracker.Controllers
    {
        public class ProjectsController : Controller
        {
            //
            // GET: /Projects/
            /// <summary>
            ///
            /// </summary>
            /// <returns></returns>
            public ActionResult Index()
            {
                var bugedlist = GetList();
                return View(bugedlist);
            }

            /// <summary>
            /// The Bind data in Gridview
            /// </summary>
            /// <returns></returns>
            public List<BugTracker_DataHelper> GetList()
            {
                var modelList = new List<BugTracker_DataHelper>();
                using (SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
                {
                    conn.Open();
                    SqlCommand dCmd = new SqlCommand("Select * from Projects", conn);
                    SqlDataAdapter da = new SqlDataAdapter(dCmd);
                    DataSet ds = new DataSet();
                    da.Fill(ds);
                    conn.Close();
                    for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                    {
                        var model = new BugTracker_DataHelper();
                        model.ProjectId = Convert.ToInt16(ds.Tables[0].Rows[i]["ProjectId"]);
                        model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
                        model.Description = ds.Tables[0].Rows[i]["Description"].ToString();
                        model.status = ds.Tables[0].Rows[i]["Status"].ToString();
                        modelList.Add(model);
                    }
                }
                return modelList;
            }

            /// <summary>
            /// Assign The Project Display
            /// </summary>
            /// <returns></returns>
            [AcceptVerbs(HttpVerbs.Get)]
            public ViewResult AssignProject()
            {

                ViewBag.ProjectId = new SelectList(Assinedwork(), "ProjectId", "projectName");           
                var employees = CheckBoxBindEmpName();
                return View(employees);
            }

            /// <summary>
            /// Assignwork
            /// </summary>
            /// <returns></returns>        
            public List<BugTracker_DataHelper> Assinedwork()
            {
                var modelList = new List<BugTracker_DataHelper>();

                using (SqlConnection assignedconn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
                {
                    {
                        assignedconn.Open();
                        SqlCommand Passnedcmd = new SqlCommand("select ProjectId,projectName from Projects", assignedconn);
                        SqlDataAdapter da = new SqlDataAdapter(Passnedcmd);
                        DataSet ds = new DataSet();
                        da.Fill(ds);

                        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                        {
                            var model = new BugTracker_DataHelper();
                            model.ProjectId = Convert.ToInt16(ds.Tables[0].Rows[i]["ProjectId"]);
                            model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
                            modelList.Add(model);
                        }
                    }
                    return modelList;
                }
            }

            public List<BugTracker_DataHelper> CheckBoxBindEmpName()
            {
                var modecheckbox = new List<BugTracker_DataHelper>();

                using (SqlConnection assignedconn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
                {
                    {
                        assignedconn.Open();
                        SqlCommand Chkcmd = new SqlCommand("select EmployeId,EmployeeName from EmployeeDetails", assignedconn);
                        SqlDataAdapter Chkda = new SqlDataAdapter(Chkcmd);
                        DataSet chkds = new DataSet();
                        Chkda.Fill(chkds);

                        for (int i = 0; i <= chkds.Tables[0].Rows.Count - 1; i++)
                        {
                            var modelchk = new BugTracker_DataHelper();
                            modelchk.EmployeId = Convert.ToInt16(chkds.Tables[0].Rows[i]["EmployeId"]);
                            modelchk.EmployeName = chkds.Tables[0].Rows[i]["EmployeeName"].ToString();
                            modecheckbox.Add(modelchk);
                        }

                    }
                }
                return modecheckbox;
         }
        }

    }
    My Assinedcode View code
    ------------------------

     <%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>>" %>

    <!DOCTYPE html>

    <html>
    <head runat="server">
        <title>AssignProject</title>
    </head>
    <body>
        <div>
         <% using (Html.BeginForm()) 
         { %>      
        <%:Html.ValidationSummary(true)%>
         <fieldset>
            <legend>Projects</legend>
                        <%: Html.DropDownList("ProjectId")%>
                        <%: Html.ValidationMessage("ProjectId")%>                   
                        <fieldset style="color:Blue;">                 

                        <% foreach (var item in Model) { %>  
                      <div>
                      <%:Html.CheckBox(item.EmployeName) %>
                      <%:Html.LabelForModel(item.EmployeName) %>
                      </div>                 
                    <%} %>
                          <p>
                          <input type="submit" value="Assign" />
                         </p>      

            </fieldset>
        <%} %>

        </div>
    </body>
    </html> 
```

现在我想在插入数据库的 postmedthod 中获取选定的值 EmployeeName 参数。谁能帮我解决这个问题？

# php - 如何使用php同时将表单值发送到外部url和电子邮件id

> ID：11558812
> 
> 赞同：0
> 
> 时间：2012-07-19T10:24:57.533
> 
> 标签：php

我想知道如何将表单详细信息发送到外部 url 以及电子邮件 ID。我有将表单详细信息编程到电子邮件 ID 的经验，但是我的一个客户要求将表单详细信息的副本重定向到 url，如下所示`http://someipaddress/XDKRT/SalLeadEntWeb.ASP`，我的网站是由 wordpress 开发的，谁能指导我如何实现这一点?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:32:16.103

in script which send email you can create request with [curl](http://php.net/manual/en/book.curl.php) to this url with specific parameters from form

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:39:31.407

cURL 绝对是最好的方法。除了您的邮件功能，在您的 PHP 中，添加以下内容

```
 define('POSTURL','http://someipaddress/XDKRT/SalLeadEntWeb.ASP'); 

 $ch = curl_init(POSTURL);
 curl_setopt($ch, CURLOPT_POST,1);
 curl_setopt($ch, CURLOPT_POSTFIELDS,$_POST);
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
 curl_setopt($ch, CURLOPT_HEADER,0);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);  //return only data
 $recvd= curl_exec($ch); //$recvd now contains the returned htmldata from that page. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:33:05.263

**将详细信息发送到电子邮件**。
单击按钮后，您可以调用一个 ajax 函数将详细信息发送到电子邮件 ID。并通过 javascript 使用 form.submit() 提交表单

**发送到外部 URL**。
只需将表单的操作设置为外部 URL

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:33:31.980

在 wordpress 中在核心中创建一个表单并设置此 url 的操作并将方法作为 get 或 post（如果数据是安全的）但首先确保操作 url 获取与使用特定获取的操作 url 接收变量相同的变量名称形式技术

# javascript - Google-Drive：如何在查询参数中设置子字段的条件？

> ID：11558815
> 
> 赞同：2
> 
> 时间：2012-07-19T10:25:08.500
> 
> 标签：javascript, google-drive-api

我的应用程序基于具有已知根文件夹（例如“theFolder”）的树结构。
我能够检索名称为 <theFolder> 的**所有文件夹：**

```
gapi.client.request(
    {
    'path': '/drive/v2/files',
    'method': 'GET',
    'params': {
        q : "title='"+theFolder+"' and mimeType='application/vnd.google-apps.folder'",
        fields: "items(description,id,modifiedDate,parents/id,title)"
        },
    callback: theCallback
    }); 
```

但是，由于我只想要根文件夹（如果有的话），我徒劳地尝试添加一些标准：

*   `and parents.isRoot`
*   `and parents.isRoot=true`
*   `and parents/isRoot=true`
*   `and (isRoot in parents)`

我知道这与[在 Drive SDK 上按文件夹获取文件列表有关](https://stackoverflow.com/q/11400669/1530236)，更普遍的是：“如何在子字段上设置标准？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:40:57.287

您应该能够检查根文件夹是否在您要查找的文件夹的父文件夹中。为此，您可以使用该文件夹的“根”别名。

在您的搜索查询中试试这个：

```
'root' in parents 
```

# asp.net - ajax 组合框将我写入其中的任何值附加到其下拉列表中

> ID：11558818
> 
> 赞同：0
> 
> 时间：2012-07-19T10:25:11.903
> 
> 标签：asp.net, ajax, combobox, ajaxcontroltoolkit

M 在我的 asp.net 页面中使用 ajax 组合框，m 将其与数据库中的数据集绑定，但我在其中搜索该值也得到绑定的内容，我想禁止它

```
 <asp:ComboBox ID="ddlpro" runat="server" CssClass="simpletxt" DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend"  AutoPostBack="true" AppendDataBoundItems="false" 
                                                           onselectedindexchanged="ddlpro_SelectedIndexChanged" >
   </asp:ComboBox> 
```

如果我改变这行得通

```
AppendDataBoundItems="false" to AppendDataBoundItems="true" 
```

但是我在gridview中的组合框给出了上述问题，否则在gridview之外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:33:09.873

搜索值永远不会绑定到组合框，您可以通过刷新页面来检查它。

AutoCompleteMode - 确定 ComboBox 如何自动完成输入到其中的文本。当指定“Suggest”时，ComboBox 将显示列表，突出显示第一个匹配的项目，如有必要，滚动列表以显示突出显示的项目。如果指定了“附加”，ComboBox 会将第一个匹配项的剩余部分附加到用户键入的文本并突出显示附加的文本。当指定“SuggestAppend”时，以上两种行为都会被应用。如果指定“None”（默认值），则禁用 ComboBox 的自动完成行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:38:27.653

```
<asp:ComboBox ID="ddlsup" runat="server" DropDownStyle="DropDownList"           AutoCompleteMode="SuggestAppend"
AutoPostBack="true" AppendDataBoundItems="false" > 
```

# javascript - 如何使终端可滚动？

> ID：11558822
> 
> 赞同：1
> 
> 时间：2012-07-19T10:25:21.023
> 
> 标签：javascript, html, scroll, jscrollpane

我在我的 Web UI 中实现了这些库 [1]。问题是提供的文本首先被渲染到缓冲区，然后只有可见部分被传输到终端显示缓冲区。所以我想让终端可以滚动。

我应该如何进行？

[1] - [http://www.masswerk.at/termlib/](http://www.masswerk.at/termlib/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:34:48.433

相当模糊的问题描述，但我认为这个 CSS 会有所帮助。

```
\* {
    overflow: scroll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T23:54:58.730

我意识到这个答案是在问题发生几年后，但是可以在创建对象后通过 javascript 简单地应用溢出`term`：

```
document.getElementById("termDiv").style.overflow = "scroll"; 
```

# gradle - gradle tar 任务未执行

> ID：11558824
> 
> 赞同：8
> 
> 时间：2012-07-19T10:25:40.003
> 
> 标签：gradle, tar

我正在为一个非 java 项目编写一个 Gradle 构建，用于将现有目录和 tar 档案组装成 .tar.gz 如果我使用如下定义，则 tar 任务会跳过：

```
task archive(dependsOn: 'initArchive',type: Tar) << {
    baseName = project.Name
    destinationDir = new File(project.buildDir.path+'/installer')
    compression = Compression.GZIP
    from (archiveDir)
    doLast{
        checksum(archivePath)
    }
} 
```

这是控制台输出

```
:jenkins-maven-sonar:archive
Skipping task ':jenkins-maven-sonar:archive' as it has no source files.
:jenkins-maven-sonar:archive UP-TO-DATE

BUILD SUCCESSFUL

Total time: 9.056 secs 
```

当我尝试使用 tar 任务作为一种方法时，它失败并抱怨找不到方法

```
task archive(dependsOn: 'initArchive') << {
    tar{
    baseName = project.Name
    destinationDir = new File(project.buildDir.path+'/installer')
    compression = Compression.GZIP
    from (archiveDir)
    doLast{
        checksum(archivePath)
    }
    }
}

FAILURE: Build failed with an exception.

* Where:
Build file '/home/anadi/Code/da-ci-installers/build.gradle' line: 29

* What went wrong:
Execution failed for task ':jenkins-maven-sonar:archive'.
> Could not find method tar() for arguments [build_6a2bckppv2tk8qodr6lkg5tqft$_run_closure3_closure5_closure7@4a5f634c] on task ':jenkins-maven-sonar:archive'.

* Try:
Run with --stacktrace option to get the stack trace. Run with --debug option to get more log output.

BUILD FAILED

Total time: 8.749 secs 
```

我们可以像 Gradle 允许运行副本一样运行 tar 任务吗？在同一个版本中，我有一个如下所示的块，我想知道 tar 是否可以以相同的方式使用

```
 copy {
                project.logger.info("Copying bundle :: "+bundle[x])
                from(rootProject.projectDir.path+"/3rd-party-tools/"+bundle[x]) {
                    include '**/*.*'
                }
                into(archiveDir)
           } 
```

如果不是，如果使用上述第一种形式，如何确保我的构建不会“跳过 tar”任务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T10:44:37.257

*您犯了在执行阶段*而不是*配置阶段*配置任务的经典错误。解决方案是删除`<<`第一个代码片段中的 。

如果您发现`<<`（以及它造成的差异）令人困惑，一个好的解决方案是永远不要使用`<<`但总是更明确的`doLast {}`.

没有`tar`方法，但通常最好将这些事情作为单独的任务。（`copy`如果有充分的理由，类似的方法应该优先于相应的任务。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T02:35:05.423

我遇到了一个有趣的情况，在 tar 任务上使用 doLast{} 时被此击中。

这是因为多项目构建：

```
build.gradle
--> sub-project
    --> build.gradle 
```

在这种情况下，如果您尝试在主构建文件中包含一个`tar`或一个`copy`任务，该任务引用了`project(":sub-project")`使用它的某些内容，它将诱使开发人员将其包装在 doLast 中。

例如，主 build.gradle 文件有：

```
 task distTar(type: Tar, dependsOn: "buildDist") {
    description "Package ProjName into a Tar file"
    group "Build"
    baseName = 'outbasename'
    archiveName = baseName + '.tar.gz'
    compression = Compression.GZIP
    destinationDir = file(project(":packaging").buildDir.path)
    extension = 'tar.gz'
    into('outdir') {
      from project(":sub-project").war
    }
  } 
```

所以他们得到了一个`project(":sub-project").war`不存在的错误。所以为了解决这个问题，有人把`doLast {}`任务和错误消失了。坏的！！

```
 task distTar(type: Tar, dependsOn: "buildDist") {
    doLast { // <-- BAD!!
      description "Package ProjName into a Tar file"
      group "Build"
      baseName = 'outbasename'
      archiveName = baseName + '.tar.gz'
      compression = Compression.GZIP
      destinationDir = file(project(":packaging").buildDir.path)
      extension = 'tar.gz'
      into('outdir') {
        from project(":sub-project").war
      }
    }
  } 
```

然后我被留下来修复它。所以正确的做法是添加

`evaluationDependsOn ":sub-project"`

在主 build.gradle 文件中。现在它知道评估它了。我删除了不正确的`doLast{}`块，现在该任务不再被忽略。

# android - 未显示第二个 android 模拟器实例

> ID：11558837
> 
> 赞同：0
> 
> 时间：2012-07-19T10:26:31.683
> 
> 标签：android, android-emulator

我正在尝试分别使用 avd 的 phone1 和 phone2 启动 2 个 android 模拟器实例，因为我可以分别启动它们，但不能同时启动它们。

第一个正确启动，但是当我启动第二个时：avd 管理器 gui 像往常一样显示启动进度条，没有返回错误，但不会显示第二个模拟器实例。
根据任务管理器的说法，确实有第二个进程（但第一个进程需要例如 400 mb ram，第二个进程只有 15 ）

到目前为止我已经尝试过：
*以不同的顺序启动它们（所以首先是phone2然后是phone1）
*从命令行使用`emulator -avd phone1`和`emulator -avd phone2` *尝试让一个模拟器运行一个intel-x86系统映像（另一个android os版本） ) 并让另一个运行 arm 系统映像
*在 Android 开发网站上搜索 (即[http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html) ) *在 google 和本网站上搜索

有用的信息：
*我有最新的（在撰写本文时）android ask tools(20) 和 android sdk platform tools(12)
* 我正在尝试运行 android 4.1
两个 avd 的设置相同（但我'也尝试过不同的）*我有足够的内存用于两个虚拟机

任何帮助将不胜感激 ！

tnx 提前！

编辑答案在这里：[更新后不能同时运行多个 android 模拟器](https://stackoverflow.com/questions/11313980/cant-run-multiple-android-emulator-concurrently-after-update/11314092#11314092) （我用关键字二而不是多个搜索这个网站，所以我没有看到这个问题）
使用`emulator-arm -avd phone2`而不是`emulator -avd phone2`第二个，它会工作

# jquery - 删除单击的克隆 div

> ID：11558839
> 
> 赞同：1
> 
> 时间：2012-07-19T10:26:33.250
> 
> 标签：jquery

我已经克隆了一个 div，在这个 div 中，我在主题中有几个按钮，一个删除按钮。一旦我单击删除按钮，一个未单击的 div 将被删除，而不是被单击的。我有这个小提琴[http:// jsfiddle.net/thiswolf/qBYzf/](http://jsfiddle.net/thiswolf/qBYzf/)

这是功能

```
$(document).ready(function() {
    $("#button").click(function() {
        $("<div class='newclone' id='xxx'><article><label>Firstname</label><input type='text'><label>Secondname</label><input type='text'><label>City</label><input type='text'><input type='hidden' value='4'></article><button class='one'>Save</button><button class='two'>Delete</button><button class='three'>Cancel</button></div>").appendTo('.clone-container');
    });
    $('.two').live("click", function() {
        $('#xxx').fadeOut("slow", function() {
            $(this).remove();
        });
    });
}); 
```

如何删除单击的 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:29:52.200

您可以使用`closest()`，在此处查看**更新**的小提琴：

[http://jsfiddle.net/qBYzf/1/](http://jsfiddle.net/qBYzf/1/)

所以你需要改变：

```
$('#xxx') 
```

到：

```
$(this).closest('#xxx') 
```

* * *

`id=xxx`您还为每个克隆的 div分配相同的值。**每个`id`元素应该是唯一**的，根据 W3C 规则/标准使用`class`替代或不同`id`的值使其有效。

**文档：**

*   [http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:30:27.657

试试这样：

```
$(this).closest('#xxx').fadeOut(.... 
```

代替：

```
$('#xxx').fadeOut(... 
```

[现场演示](http://jsfiddle.net/YazH2/)

Though that will work, but in no case you should have two ids having same value in the same page , this does not comply with W3C standards.

# .net - ASP.Net 使用 AJAX 功能 Jquery 还是 AJAX Toolkit？

> ID：11558847
> 
> 赞同：0
> 
> 时间：2012-07-19T10:27:04.850
> 
> 标签：.net, ajax, jquery

我想知道在 .net 环境中实现 AJAX 请求的应用程序需求的最佳方法是什么

我知道我可以使用

```
AJAX toolkit 

or 

Jquery 
```

直接操作和发送/接收来自服务器的请求。

我的问题是哪种方式更可靠和最灵活的方式来实现这个 ajax 功能？我不想同时使用这两个，它会弄得一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:35:53.727

在我看来，你最好走 jQuery 路线。

在我看来，Microsoft AJAX 工具包是另一种不必要的抽象，它将您与该技术的专有版本联系在一起。当您不走寻常路时效果很好，但是当您遇到问题时可能会引起巨大的头痛（您不仅仅是在解决 AJAX 问题，而是在解决 MS 提供的 AJAX 解决方案）。

jQuery 路线将更难开始，但您最终会更好地了解幕后发生的事情，并且您可以将这些前端技能与不同的后端技术结合起来，这与AJAX 工具包，它几乎将您与 .NET 联系在一起。

# plot - 如何确定 FFT 结果索引 Freq 并绘制幅度/频率图

> ID：11558853
> 
> 赞同：2
> 
> 时间：2012-07-19T10:27:26.707
> 
> 标签：plot, fft, frequency, amplitude

我有一个假设的问题来理解这个概念..

假设我捕获了一个采样率为 8000hz 的单声道语音片段，即 4096 字节的数据。通过大小为 256 的 FFT 馈送前 512 字节（16 位编码），将返回 128 个值，我将其转换为幅度。所以我这个输出的频率是

```
FFT BIN #1
0: 0*8000/256
1: 1*8000/256
.
.
127: 127*8000/256 
```

到目前为止这么好？所以现在我还剩下 3584 字节的未处理数据。所以我对 512 字节的数据执行另一个 256 大小的 fft。并获得相同数量的结果.. 所以为此我再次有以下频率：

```
FFT BIN #2:
Example1:
0: 0*8000/256
1: 1*8000/256
.
.
127: 127*8000/256 
```

或者

```
FFT BIN #2
Example2:
128: 129*8000/256
139: 130*8000/256
.
.
255: 255*8000/256 
```

因为我想绘制这个幅度/频率图。但我不明白所有这些 fft 箱是否应该像示例 1 一样在相同的频率上重叠，或者像第二个示例那样分散。

还是我正在尝试做一些完全多余的事情？因为我想要完成的是找到每 30-50ms 时间帧的峰值放大器值，用于比较其他声音文件..

如果有人能帮我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:56:59.833

您的 FFT 结果箱表示每个 FFT 中的同一组频率，如示例 #1 中所示，但时间片不同。

每个 FFT 将允许您在大约 12 毫秒的时间窗口内绘制幅度与频率的关系图。

您还可以对 FFT 幅度进行矢量求和，以获得更长时间范围内的 Welch 方法 PSD（功率谱密度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:01:18.003

如果您想找到每 30-50 毫秒时间帧的峰值安培值，您只需绘制每个时间帧中信号的安培频谱。

此外，如果您对每帧进行 256 个样本的 FFT，那么您应该得到 129 个，而不是 128 个频率分量。第一个是直流分量，最后一个是奈奎斯特频率分量。

# svn - TortoiseSVN 不在文件上显示上下文菜单

> ID：11558854
> 
> 赞同：9
> 
> 时间：2012-07-19T10:27:31.390
> 
> 标签：svn, tortoisesvn, windows-7-x64

不久前，我在 Windows 7 64 位上将 TortoiseSVN 更新为 1.7.7（64 位）。从那时起，我就没有文件上的 SVN 上下文菜单。当我右键单击文件夹时，我确实有上下文菜单，但有时我想对文件进行*差异*或*更改*，这不再可能。

我尝试重新安装和修复，但没有成功。我应该尝试什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T09:32:46.473

我收到了来自 TortoiseSVN 邮件列表的答复。文件上没有上下文菜单的原因是注册表权限问题。[TortoiseSVN 常见问题解答](http://tortoisesvn.net/faq.html#nofilemenus)中解释了该修复程序，但我完全忽略了它。

解决方案是：

1.  使用 regedit 转到注册表编辑器。
2.  点击 HKEY_CLASSES_ROOT/*/​shellex/ContextMenuHandlers/TortoiseSVN
3.  观察错误消息框，提示访问被拒绝。
4.  右键单击上面提到的键，转到“权限”...
5.  在权限对话框中，单击“高级”
6.  单击“所有者”选项卡，单击您的帐户，然后单击“应用”
7.  确定对话框，单击“添加...”
8.  在文本区域中输入您的帐户名称，然后单击“确定”
9.  确定权限对话框。
10.  点击 HKEY_CLASSES_ROOT/*/​shellex/ContextMenuH​andlers/TortoiseSVN
11.  检查没有错误消息框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:14:47.310

我在这里有2条线索：

*   仔细检查您是否安装了**64 位**版本的 TortiseSVN，
*   尝试重新启动您的机器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-07T04:43:16.943

更简单的方法...

最初的步骤与 Jao 和其他人建议的一样......

1.  使用 regedit 转到注册表编辑器。
2.  点击 HKEY_CLASSES_ROOT/*/​shellex/ContextMenuHandlers/TortoiseSVN
3.  出现错误后，右键单击 TortoiseSVN（不是 KEY），然后单击“权限”
4.  在出现的对话框中单击“确定”
5.  单击“高级”-> 所有者。选择您的帐户。
6.  单击“应用”，然后单击“确定”。
7.  单击“添加”，输入您的帐户名称，单击“确定”。
8.  选择您的帐户，然后在下方选择“完全控制”
9.  单击“应用”和“确定”，您就可以开始了...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T15:35:04.990

从较新版本的 TortoiseSVN 降级到较旧版本后，我遇到了同样的问题。就我而言，它与注册表权限无关。

为了修复它，我打开了 HKEY_CLASSES_ROOT/*/​shellex/ContextMenuHandlers/TortoiseSVN 并删除了“默认”注册表项。接下来，我打开了用于安装 TortoiseSVN 的相同安装程序。它检测到我已经安装了它，并给了我修复或卸载的选项。我点击了修复，它替换了“默认”注册表项。

更新注册表值后，上下文菜单按预期工作。

# android - 带有 AsyncTask 的 Setonitemclicklistener 给出 NullPointerException

> ID：11558860
> 
> 赞同：0
> 
> 时间：2012-07-19T10:27:51.513
> 
> 标签：android, multithreading, android-asynctask

需要你的帮助！！！我有活动，我在其中获取一些 JSON 格式的数据并将其放入 ListView。一切正常。但我想用 Setonitemclicklistener 定义在列表中单击了哪些项目。我试图在我的内部 Connection 类的 onPostExecuted() 方法中使用它，它扩展了 AsyncTask，但我有 NullPoinerException

```
public class ConnectionActivity extends ListActivity{
JsonParser jsonParser =  new JsonParser(); 
private ListView listView;
JSONArray inbox = null;
  private ProgressDialog pDialog;
private static final String TAG_ID = "ID";
private static final String TAG_NAME = "Date";
private static final String TAG_DATE = "Name";
private static final String TAG_PRICE = "Price";
ArrayList<HashMap<String,String>> resultList;

public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

 resultList = new ArrayList<HashMap<String,String>> ();
 new Connection().execute();
 new ListHandler().execute();

}
class Connection extends AsyncTask<String,String,String>
{

    @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ConnectionActivity.this);
            pDialog.setMessage("Не базарь и жди пока загрузиться!!!!");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

    @Override
    protected String doInBackground(String... args) {
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        // getting JSON string from URL
        String json = jsonParser.makeHttpRequest();
        Log.d("Outbox JSON",json.toString());

        try{

            JSONArray jArray = new JSONArray(json);
            for (int i=0;i<jArray.length();i++) {
                    JSONObject c = jArray.getJSONObject(i);

                 // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name= c.getString(TAG_NAME);
                    String date = c.getString(TAG_DATE);
                    String price = c.getString(TAG_PRICE);

                    // creating new HashMap
                    HashMap<String, String> hashmap = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    hashmap.put(TAG_ID, id);
                    hashmap.put(TAG_NAME, name);
                    hashmap.put(TAG_DATE, date);
                    hashmap.put(TAG_PRICE, price);

                    // adding HashList to ArrayList
                    resultList.add(hashmap);

            }

        }
        catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return null;
    }
     protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            ConnectionActivity.this, resultList,
                            R.layout.connect_item, new String[] { TAG_ID, TAG_NAME, TAG_DATE, TAG_PRICE },
                            new int[] { R.id.order_id, R.id.order_date, R.id.order_name, R.id.order_price });
                    // updating listview
                    setListAdapter(adapter);
                    listView =  (ListView) findViewById(R.id.list);
                    listView.setOnItemClickListener(new ListClickListener());
                }
            });

        }
} 
```

我认为问题在于使用一个线程，所以我在我的 ConnectionActivity 中创建了一个内部类，如下所示^

```
 class ListHandler extends AsyncTask<Void,Void,Void>
     {
        protected void onPreExecute ()
         {

         }
        @Override
        protected Void  doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        protected void onPostExecute()
        {
            listView =  (ListView) findViewById(R.id.list);

            listView.setOnItemClickListener(new OnItemClickListener() {

           public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) {
               Log.d("Click on the item","!!!!!!!!!!!!!!!!!!!!!");
               Toast toast = Toast.makeText(getApplicationContext(), 
                       "Пора покормить кота!", Toast.LENGTH_SHORT); 
                    toast.show(); 
           } 
        });

        }

     } 
```

但它不起作用。我的意思是当我点击 item 时我无法得到 Toast，但也不例外。我试图在 Activity 的 void onResume() 方法中处理 setonitemclicklistener，但我得到了 NullPointerException。我也在 ListHandler 类的 OnPreExecute() 方法中处理了这个 - 结果相同......请帮忙......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:31:44.907

在哪里`setContentView(R.layout.yourxml)`？我认为您在 oncreate 方法中忘记了它。

所以你的`listView is null and gives NPE.`

**和**

`onPostExecute method have runonUiThread,Remove it no need it.`它已经在 UI 线程中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:07:10.693

通过从 Activity 扩展而不是 ListActivity 并使用 setContentView() 解决了问题。

# wcf - 不允许使用 WCF 方法

> ID：11558862
> 
> 赞同：0
> 
> 时间：2012-07-19T10:28:07.203
> 
> 标签：wcf, asp.net-4.0

我对 WCF 完全陌生，我已经创建了这些函数。在我的本地主机上完美运行，但是在将它放在 IIS 上之后，当我尝试使用它时，我收到错误消息 405“方法不允许”。

```
[ServiceContract]
    public interface IService1
    {
        [WebInvoke(Method = "GET")]
        [OperationContract]
        string EncryptZonderPaswoord(string tekst);

        [WebInvoke(Method = "GET")]
        [OperationContract]
        string EncryptMetPaswoord(string tekst, string paswoord);

        [WebInvoke(Method = "GET")]
        [OperationContract]
        string DecryptZonderPaswoord(string tekst);

        [WebInvoke(Method = "GET")]
        [OperationContract]
        string DecryptMetPaswoord(string tekst, string paswoord);
    } 
```

...

任何人的想法？我需要在 IIS 上设置额外的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:23:42.240

我已经解决了我的问题。这是我必须做的：

*   在 .net 框架服务器端安装 WCF
*   注册framework 4.0服务器端
*   在 IIS 中：将我的应用程序添加到 .NET 4 池而不是默认池。

# java - 未按预期调用 JDialog 鼠标侦听器

> ID：11558865
> 
> 赞同：1
> 
> 时间：2012-07-19T10:28:08.597
> 
> 标签：java, swing, desktop-application

在我的 Swing 应用程序中，我使用了 JDialog 并将 JPanel 添加到 JDialog。我希望在鼠标退出 JDialog 时调用 JDialog 的鼠标侦听器。这是我的做法。

```
myJDialog.addMouseListener(new java.awt.event.MouseAdapter() {  
    public void mouseExited(java.awt.event.MouseEvent evt) {  
        System.out.println("Mouse has exited the Dialog");  
    }  
}); 
```

实际上它是在鼠标退出时调用的，但是当鼠标进入添加到 JDialog 的 Jpanel 中的 JTextField 时，即使鼠标仍在 JDialog 中，也会在鼠标退出时调用此侦听器。我想在鼠标完全退出时调用侦听器，而不是在鼠标转到其本身的子组件时调用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:50:48.907

这不是一个容易回答的问题。

让我们从 mouseListener 开始。尝试将您的容器（在本例中为对话框）视为 3D 计划，在该计划之上，我们添加组件。每个组件都存在于容器上方的一层或多层上（投射出漂亮的阴影）。

现在，将鼠标视为指向该计划顶部的激光。只要激光可以到达您的容器，您就会收到有关鼠标事件的通知。但是，如果移动鼠标以致另一个组件阻止它（激光无法再到达您的组件），您将停止接收通知，因为事件被阻止。

现在，通知系统可以让您知道鼠标何时进入并存在您的影响域。

这就是系统的工作方式。除了使用全局事件处理程序（它至少会让您知道鼠标上下文移动到哪里）之外，我能想到的唯一“其他”解决方案是检查鼠标退出事件的坐标并根据您的内容检查它们窗格的边界。

```
public void mouseExit(MouseEvent evt) {
    Point p = evt.getPoint();
    Rectangle bounds = getBounds();

    bounds.x += 4;
    bounds.y += 4;
    bounds.width -= 4;
    bounds.height -= 4;

   if ((p.x < bounds.x || p.x > bounds.x + bounds.width) && (p.y < bounds.y || p.y > bounds.y + bounds.height) {

       System.out.println("Elvis has left the building");

   }

} 
```

当然，这可能需要一些调整才能做到恰到好处。

# android - 获取要在 MMS 中发送的可绘制图像的 URI

> ID：11558873
> 
> 赞同：2
> 
> 时间：2012-07-19T10:28:51.133
> 
> 标签：android, mms, android-image

这是我在这里的第一篇文章，所以如果我违反了一些规则，我真的很抱歉。请纠正我哪里出错了。

现在这个问题，我在stackoverflow和其他网站/互联网上来回搜索，但我似乎找不到正确的答案。

我正在尝试将可绘制文件夹的 jpg 附加到我的 MMS。我正在使用此代码发送彩信。

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("image/jpg");
intent.putExtra(Intent.EXTRA_STREAM,path);
startActivity(intent); 
```

如果我不向其添加 URI 路径，该意图对我来说很好，并且 mms 应用程序会加载。但是，当我添加路径时，应用程序崩溃。我已经尝试了多种方法来添加我在 stackoverflow 或其他网站上找到的可绘制对象中的图像。

我在这里写了一些，它们都不适合我。

```
Uri path = Uri.parse("android.resource://com.android.MYAPP/drawable/imagename"); 
```

和

```
String uri = "drawable/icon";
int imageResource = getResources().getIdentifier(uri, null, getPackageName());
Uri path = Uri.parse("android.resource://com.android.MMSAPP/drawable/" + imageResource); 
```

和

```
Uri path = Uri.parse("android.resource://com.android.MMSAPP/" + R.drawable.imageName); 
```

过去几天我一直在解决这个问题，如果我能找到正确的答案，我将非常感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:50:04.667

我仍然不确定为什么我在其他人都可以正常工作的代码中出现错误，但是，我使用了资产管理器并且事情对我有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T10:31:29.873

做这个。

```
Uri path = Uri.parse("android.resource://your.package.name/" + R.drawable.sample_1); 
```

将 URI 转换为字符串，您将能够通过 MMS 发送它

# git - 如何将我的 git svn 配置推送到另一个存储库？

> ID：11558874
> 
> 赞同：1
> 
> 时间：2012-07-19T10:28:51.807
> 
> 标签：git, svn, push, config

我已经建立了一个基于 svn 项目的 git 项目，一切正常。

现在我希望我的 Jenkins 在每次主分支更改时自动执行“git svn dcommit”。

但是 svn 配置存储在 .git/config 中，一些 refs 存储在 .git/svn/refs 中，如果推送我的更改，jenkins 存储库不知道 svn 配置和 refs。

我如何部署这个配置？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:25:44.877

如果您的 Subversion 和 Git 存储库位于同一台机器上，那么您可以使用[SubGit](http://subgit.com/)加入它们。然后当你推送到 Git 存储库时，Subversion 存储库会自动选择你的提交。

# facebook-graph-api - 在会话控制中通过身份验证后恢复用户的 Facebook 信息

> ID：11558875
> 
> 赞同：0
> 
> 时间：2012-07-19T10:29:01.923
> 
> 标签：facebook-graph-api, omniauth, parse-platform

我正在与omniauth 合作，通过facebook（facebook 登录）登录用户。这发生在会话控制器中。我的后端数据库由 parse.com 处理，基本上它提供了一个 authdata 字段，它只存储

```
"id": "user's Facebook id number as a string",
    "access_token": "an authorized Facebook access token for the user",
    "expiration_date": "token expiration date of the format: yyyy-MM-dd'T'HH:mm:ss.SSS'Z'" 
```

一旦存储了所有这些信息，用户就会被定向到他的个人资料，我想显示用户的 facebook 显示图片，我不太确定该怎么做。我的 session_controller 看起来像这样

```
def createfb

    auth = request.env["omniauth.auth"]
    user = User.authenticate_with_facebook(auth.uid, auth.credentials.token, Time.at(auth.credentials.expires_at))

    #check if username and name is nil
   if user
      session[:user_id] = user.id
      if (session[:return_to] && user.name == nil)  
        redirect_to "/users/#{current_user.id}/edit"
      elsif (user.name == nil)
         redirect_to "/users/#{current_user.id}/edit"
      else
        redirect_to games_url, :notice =>  "Logged in"
      end
  end
end 
```

如果有人可以在这里帮助我，我将不胜感激。谢谢你

PS：我一个月前才开始使用 ruby​​ on rails，所以我还是个新手 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:35:09.257

您可以通过嵌入一个 IMG 元素并将其 src 设置为

```
http(s)://graph.facebook.com/userid/picture 
```

For more info on additional options see docs, section “Connections” -> picture. [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

# ruby-on-rails - SCSS 编译错误

> ID：11558879
> 
> 赞同：0
> 
> 时间：2012-07-19T10:29:08.303
> 
> 标签：ruby-on-rails, compiler-errors, sass

我最近开始看到这个错误，由于我最近没有更改 css 文件，所以我无法弄清楚是什么原因造成的![在此处输入图像描述](../Images/39c2e124a1210b7f1e15c0d92566b54e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:41:35.180

您需要将 SCSS 文件转换为 UTF-8；如果它包含 \x00-\x80 范围之外的任何字符（在本例中为â），则它不能从 ASCII 隐式转换。

任何体面的编辑器都应该能够将其转换为 UTF-8，否则无法使用`iconv`.

当然，您也可以删除冒犯性的角色，但我认为它的存在是有充分理由的。

# html - 有没有办法在不使用浮点数的情况下创建可选的换行符？

> ID：11558884
> 
> 赞同：0
> 
> 时间：2012-07-19T10:29:18.543
> 
> 标签：html, css

我有一个包含多个输入的 Web 表单，其中一些位于另一个旁边，而另一些则位于新行上。示例如下：

```
<h3>Max and Min Value</h3>
Max: <input name=max_value type=number>* Min: <input name=min_value type=number>

<h3>Overall Value</h3>
Overall: <input name=overall type=number> 
```

如果浏览器窗口足够宽，我想定位`max_value`并且`min_value`它们在同一行，否则在`*`位置处换行。我知道我可以通过将它们包含在包装元素中并使用它们`float:left`来设置样式来完成工作。但这会影响整个文档的流程，除非我引入额外的间隔元素。

是否有另一种方法可以在不影响文档流的情况下创建可选换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:36:29.313

将您的输入包装`Min`在 div 中并指定`display: inline-block`应该可以解决问题：

```
<h3>Max and Min Value</h3> 
Max: <input name=max_value type=number>* <div style="display: inline-block">Min: <input name=min_value type=number></div>

<h3>Overall Value</h3> 
Overall: <input name=overall type=number> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:41:15.817

您可以使用`white-space: nowrap`将输入和标签保持在一起：

```
<html>
<head>
  <style type="text/css">
    label { white-space: nowrap; }
  </style>
</head>
<body>
  <h3>Max and Min Value</h3>
  <label>Max: <input name=max_value type=number>*</label> <label>Min: <input name=min_value type=number></label>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:42:22.340

您可以使用 css 禁止换行：

```
.nobr  { white-space:nowrap; } 
```

所以你得到的代码看起来像：

```
<h3>Max and Min Value</h3>
<span class="nobr">Max: <input name=max_value type=number></span> <span class="nobr">Min: <input name=min_value type=number></span>

<h3>Overall Value</h3>
Overall: <input name=overall type=number> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:43:28.580

我认为您唯一需要做的就是在将新的包装器元素浮动到左侧之后`clear: left`（或`both`）`<h3>`标记。这应该够了吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:44:40.883

```
<style type='text/css'>
.block
{
display:inline-block;
padding-left:5px;
margin:5px 0px;
}
</style>

<h3>Max and Min Value</h3>
<div class='block'>Max: <input name=max_value type=number></div><div class='block'> Min: <input name=min_value type=number></div>

<h3>Overall Value</h3>
Overall: <input name=overall type=number> 
```

希望这对你有用。

# android - 是否可以在 Android 中将图像设置为屏幕保护程序？

> ID：11558886
> 
> 赞同：0
> 
> 时间：2012-07-19T10:29:20.137
> 
> 标签：android, android-layout

我想知道在Android中是否可以将图像设置为屏幕保护程序..我不确定屏幕保护程序的可行性......那是当手机空闲时，我的应用程序不会显示黑色的空白屏幕检查空闲时间使用`OnUserInteraction()`方法并将图像设置为屏幕保护程序...？？请让我知道如果有人知道这件事..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:33:32.680

onUserInteraction() 一开始就被弃用了，它只监听你 Activity 上的事件。

其次，拥有这样的屏幕保护程序需要您使用[WakeLocks](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)，这会消耗额外的电池。而对于屏保类型的应用程序，电池使用量会非常高。

您现在可能想研究 Daydreams，假设您只对 Android 4.2 及更高版本没问题。

# jquery - jQuerytools 覆盖多个触发器到一个覆盖元素

> ID：11558888
> 
> 赞同：1
> 
> 时间：2012-07-19T10:29:20.513
> 
> 标签：jquery, jquery-tools

大家..我已经四处寻找，但还没有找到答案。也许你可以在这里帮助我...

我有两个（HTML）列表，我们称之为“动物”和“水果”。每个列表都有一些子元素，当我单击子元素时，它将显示带有单击子元素名称的覆盖元素。到目前为止，我能够覆盖“动物”列表，但对于“水果”列表，什么都没有发生。

这是使其更易于理解的代码..

**HTML**

```
<ul id="animalList">
    <li id="1" rel="#aniover">tiger</li>
    <li id="2" rel="#aniover">shark</li>
    <li id="3" rel="#aniover">eagle</li>
</ul>
<ul id="fruitList">
    <li id="1" rel="#fruover">mango</li>
    <li id="2" rel="#fruover">orange</li>
    <li id="3" rel="#fruover">banana</li>
</ul>

<div class="modal" id="aniover">
    <h3>Animal Selected!</h3>
    <span id="anisel"></span>
</div>
<div class="modal" id="fruover">
    <h3>Fruit Selected!</h3>
    <span id="frusel"></span>
</div> 
```

**Javascript** [我正在使用 jQuerytools 1.2.7]

```
jQuery('ul#animalList > li').click(function(){
    anname = jQuery(this).html();
    anid = jQuery(this).attr('id');
    antext = '['+anid+'] '+anname;
    jQuery('ul#animalList > li[rel]').overlay({
        mask:{color:'#666666',loadSpeed:100,opacity:0.8},
        onBeforeLoad:function(){jQuery('#anisel').html(antext);},
        oneInstance:false
    });
});
jQuery('ul#fruitList > li').click(function(){
    funame = jQuery(this).html();
    fuid = jQuery(this).attr('id');
    futext = '['+fuid+'] '+funame;
    jQuery('ul#fruitList > li[rel]').overlay({
        mask:{color:'#666666',loadSpeed:100,opacity:0.8},
        onBeforeLoad:function(){jQuery('#frusel').html(futext);},
        oneInstance:false
    });
}); 
```

如果我从动物列表中单击“鲨鱼”，则叠加层会起作用。但是当我点击“橙色”时，什么也没发生。有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:02:58.130

一个潜在的错误来源是您多次为 li 元素使用相同的 id。您可以使用另一个属性来存储元素的 id。

```
<ul id="animalList">
    <li data-id="1" rel="#aniover">tiger</li>
    <li data-id="2" rel="#aniover">shark</li>
    <li data-id="3" rel="#aniover">eagle</li>
</ul>
<ul id="fruitList">
    <li data-id="1" rel="#fruover">mango</li>
    <li data-id="2" rel="#fruover">orange</li>
    <li data-id="3" rel="#fruover">banana</li>
</ul> 
```

-

```
jQuery('#animalList li').click(function(){
    anname = jQuery(this).html();
    anid = jQuery(this).attr('data-id');
    antext = '['+anid+'] '+anname;
    jQuery('#animalList li[rel]').overlay({
        mask:{color:'#666666',loadSpeed:100,opacity:0.8},
        onBeforeLoad:function(){jQuery('#anisel').html(antext);},
        oneInstance:false
    });
});
jQuery('#fruitList li').click(function(){
    funame = jQuery(this).html();
    fuid = jQuery(this).attr('data-id');
    futext = '['+fuid+'] '+funame;
    jQuery('#fruitList li[rel]').overlay({
        mask:{color:'#666666',loadSpeed:100,opacity:0.8},
        onBeforeLoad:function(){jQuery('#frusel').html(futext);},
        oneInstance:false
    });
}); 
```

我还建议为您的 li 使用更有效的选择器：*#fruitList li*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T05:02:58.107

终于找到了！*叹*

首先，很抱歉我之前没有提到第二个列表（“#fruitList”）是由 jQuery 脚本生成的。

解决方案是我应该将覆盖属性包含在列表生成函数中，而不是像我上面写的那样在外面。这是整个脚本的插图...

**我以前的脚本：**

```
jQuery(document).ready(function(){
    createList(function(){ ... }); //list generation function for the fruit list
    jQuery('#animalList li').click(function(){ ... }); //overlay for animal list
    jQuery('#fruitList li').click(function(){ ... }); //overlay for fruit list
}); 
```

**我的工作脚本：**

```
jQuery(document).ready(function(){
    createFruitList(function(){
        ... //generate the fruit list
        jQuery('#fruitList li').click(function(){ ... }); //overlay for fruit list
    });
    jQuery('#animalList li').click(function(){ ... }); //overlay for animal list
}); 
```

好的，这就是全部.. 结案！

# php - 如何将 WHERE 用于自定义字段（别名）？

> ID：11558889
> 
> 赞同：4
> 
> 时间：2012-07-19T10:29:29.207
> 
> 标签：php, mysql, alias, where-clause

我如何完成这样的查询：

```
SELECT type, COUNT(name) as cnt FROM products WHERE cnt > 1 GROUP BY type 
```

该查询产生错误`#1054 - Unknown column 'cnt' in 'where clause'`

这是因为`WHERE`在分组之前应用。
我该如何解决这个问题？

表结构：

```
id      name                type        price
123451  Park's Great Hits   Music       19.99
123452  Silly Puddy         Toy         3.99
123453  Playstation         Toy         89.95
123454  Men's T-Shirt       Clothing    32.50
123455  Blouse              Clothing    34.97
123456  Electronica 2002    Music       3.99
123457  Country Tunes       Music       21.55
123458  Watermelon          Food        8.73 
```

[为简单起见，表结构从http://www.tizag.com/mysqlTutorial/mysqlcount.php](http://www.tizag.com/mysqlTutorial/mysqlcount.php)借来。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T10:31:24.717

您需要使用`HAVING`子句过滤聚合查询产生的记录：

```
SELECT type, COUNT(name) as cnt FROM products GROUP BY type HAVING cnt > 0; 
```

# android - 重新创建 CheckedTextView 的功能

> ID：11558891
> 
> 赞同：0
> 
> 时间：2012-07-19T10:29:37.487
> 
> 标签：android, android-layout

我想使用我自己的自定义视图重新创建 CheckedTextView 的功能，这样我就可以在左侧有两个 TextView，在右侧有一个 CheckBox，在两个 TextView 之间垂直居中。我有为它工作的布局，我将在下面包括。我也有它，这样当您单击外部 LinearLayout (LinearLayout1) 时，它会将单击传递给复选框。我唯一想不通的是，当您按下复选框时，它会在将其标记为选中之前短暂突出显示该复选框（在我的设备上为黄色）。如果您触摸外部 LinearLayout 上的任何位置，我希望它做同样的事情，但我不知道我需要在哪里挂钩才能实现这一点。

这是我的 layout.xml

```
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/LinearLayout1">
    <LinearLayout
        android:orientation="vertical"
        android:layout_height="wrap_content"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:id="@+id/LinearLayout2">
        <TextView
            android:id="@+id/FieldValueTextView"
            android:text="Value"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium" />
        <TextView
            android:id="@+id/FieldLabelTextView"
            android:text="Label"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>
    <CheckBox
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_toRightOf="@id/LinearLayout2"
        android:id="@+id/CheckBox"
        android:gravity="center_vertical" />
</LinearLayout> 
```

谢谢，
丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:38:25.027

The problem I was experiencing was solved by putting the following android:focusable="false" on the CheckBox and the two TextViews so that when the ListView is clicked, it gets the focus, not the inner views.

Hope that helps someone else.

# android - 在 Android NDK 中将字符串传递给 C 代码

> ID：11558899
> 
> 赞同：10
> 
> 时间：2012-07-19T10:29:59.750
> 
> 标签：android, c, string, java-native-interface, android-ndk

该程序应从 SD 卡中获取图像并调整其亮度。并且图像是通过 NDK C 代码从 SD 卡中获取的。需要注意的是，描述图像路径的字符串通过 JNI 传递给 NDK。

Java代码：

```
private void adjustBrightness() {
   imagePath     = (Environment.getExternalStorageDirectory().getPath()+"earthglobe.jpeg").toCharArray();
   brightness(imagePath, brightness);
}

public native void brightness(char[] imagePath, float brightness); 
```

NDK 代码：

```
JNIEXPORT void JNICALL Java_com_example_ImageActivity_brightness(JNIEnv * env,char[] bitmappath, jfloat brightnessValue)
{
   string bmpath    =   bitmappath+'\0';
   jobject  obj = fopen( bitmappath , "rb" );
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-19T10:49:38.763

您不能以这种方式传递 char[] 。

在 Java 中使用：

```
public static native void brightness(String imagePath, float brightness); 
```

在本地使用：

```
std::string ConvertJString(JNIEnv* env, jstring str)
{
   if ( !str ) std::string();

   const jsize len = env->GetStringUTFLength(str);
   const char* strChars = env->GetStringUTFChars(str, (jboolean *)0);

   std::string Result(strChars, len);

   env->ReleaseStringUTFChars(str, strChars);

   return Result;
}

JNIEXPORT void JNICALL Java_com_example_ImageActivity_brightness(JNIEnv * env, jobject obj, jstring bitmappath, jfloat brightnessValue)
{
   std::string bmpath = ConvertJString( env, bitmappath );
   FILE* f = fopen( bmpath.c_str(), "rb" );

   // do something useful here

   fclose( f );
} 
```

# c - 为什么在 C 中以这种方式初始化会给出多个定义错误？

> ID：11558902
> 
> 赞同：1
> 
> 时间：2012-07-19T10:30:07.537
> 
> 标签：c

以下是我将用作示例的两个文件。如果我在 file1.h 中定义一个结构数组并让 file2.c 包含 file1.h，我会得到一个多重定义错误。这是为什么？如果我只有 struct thread tasks[32]，我不会收到此错误。

文件1.h

```
...
...
struct thread tasks[32] = {0}; // thread is structure defined above
...
... 
```

文件2.c

```
#include file1.h 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:34:39.053

您很可能将头文件包含在多个源文件中。该`#include`指令从字面上将头文件的内容包含到源文件中，这意味着头文件中的所有代码也将在源文件中。这意味着如果两个或多个源文件包含相同的头文件，则头文件中的代码将被复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:38:36.193

将`= {0}`行从*声明*变为*定义*。您可以拥有任意多个（兼容的）文件范围变量声明，但最多定义一个；通过在多个源文件中包含标头，您将生成多个定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:43:33.323

您可以通过像这样将头文件的内容包装在#ifndef 中来防止来自多个包含的问题

```
/* file1.h */
#ifndef INCLUDE_FILE1
#define INCLUDE_FILE1

/* contents here */

#endif 
```

# java - 智能卡和 p12 文件创建

> ID：11558904
> 
> 赞同：1
> 
> 时间：2012-07-19T10:30:17.643
> 
> 标签：java, cryptography, smartcard

我正在尝试创建一个 p12 文件（pkcs12）。我知道我需要一个证书和一个私钥来创建它。我从智能卡读取证书，但我的私钥有问题。我知道智能卡中有一个私钥，但我无法提取它……是真的吗？还有另一种方法可以使用存储在智能卡中的私钥并使用它来创建 p12 文件吗？

我想使用这段代码：

```
 KeyStore store = KeyStore.getInstance("PKCS12");  
 store.load(null, null);

 store.setKeyEntry("Eric's Key", privKey, null, certificate);

 FileOutputStream fOut = new FileOutputStream("id.p12");

 store.store(fOut, passwd); 
```

请问有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:49:23.300

不，您通常无法从智能卡中提取私钥。有时有可用的备份或密钥包装功能，但您需要特殊的访问权限。PKCS#12 是一种用于存储密钥和证书的二进制格式，因此您确实需要访问私钥才能创建一个。

# linux - 有没有更好的方法在 tmux 中显示 cpu 使用情况？

> ID：11558907
> 
> 赞同：7
> 
> 时间：2012-07-19T10:30:42.527
> 
> 标签：linux, shell, tmux

这是一个可能会消耗大量 cpu 使用率的解决方案（从[本文中](http://makerwannabe.blogspot.co.nz/2011/04/showing-cpumemory-usage-on-tmux-status.html)窃取）：

我的 Ubuntu 12 ec2 服务器有所不同，我必须`top -bn1`使用`top -ln`.

这是我的相关`.tmux.conf`文件：

`set -g status-right '#[fg=yellow]#[(getCpuUsage.sh)]'`

它实际上`top`每 2 秒调用一次并输出大量信息。我认为应该有一种方法可以减少 cpu 消耗或使用一些标志来将输出限制`top`为仅 cpu 使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T10:41:02.930

我使用小型[tmux-mem-cpu-load](https://github.com/thewtex/tmux-mem-cpu-load) C++ 程序。无论哪种方式，每次更新至少有一个 fork/exec，但可能比调用 shell 更好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T22:45:53.983

如果我知道 tmux-mem-cpu-load，我会懒得写自己的[rainbarf](https://github.com/creaktive/rainbarf)：

![雨棚](../Images/90f521951cb0907d6deeda435be60a4b.png)

它看起来更漂亮，但它是一个 Perl 脚本，因此每 2 秒运行一次它不是一个好主意（根据我的经验，15 秒就足够了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:39:32.060

你可以试试`vmstat(1)`。它显示所有 CPU 的平均 CPU 负载：最后四个字段中的用户、系统、空闲和 IO 等待：

```
vmstat|while read s;do [[ "$s" =~ ([[:space:]]+[0-9]+){4}$ ]]&&echo $BASH_REMATCH; done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-25T09:09:01.147

1.  stat top 命令。
2.  按 1。
3.  然后按 0
4.  按“t”两次。

它将显示 CPU 使用率的条形图。您可以通过 +z 更改颜色。然后在列表中的颜色编号。

# android - How to Keep XMPP connection alive throughout application?

> ID：11558908
> 
> 赞同：1
> 
> 时间：2012-07-19T10:30:47.407
> 
> 标签：android, object

> **Possible Duplicate:**
> [Android: How do i pass an object from one activity to another?](https://stackoverflow.com/questions/2906925/android-how-do-i-pass-an-object-from-one-activity-to-another)

I have one class XmppClient(); instantiating in MainActivity like this

`XmmppClient client = new XmmppClient ();`

and have to use that in another activity how can i keep it alive for my application..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:34:14.663

您可以将自定义对象传递给两个活动之间：

**1.**使用[应用程序](http://developer.android.com/reference/android/app/Application.html)类

**2.**通过在你的类中实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)接口`MyView`

**3.**通过在你的类中实现[Serializable](http://developer.android.com/reference/java/io/Serializable.html)接口`MyView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:32:31.223

是的，只有当您的自定义对象类实现[**`Parcelable`**](http://developer.android.com/reference/android/os/Parcelable.html)接口时才有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:33:26.373

一种选择可能是让您的自定义类实现 Serializable 接口，然后您可以使用 Intent#putExtra() 方法的 putExtra(Serializable..) 变体以额外的意图传递对象实例。

伪代码：

```
//to pass :
   intent.putExtra("MyClass", obj);  

// to retrieve object in second Activity
getIntent().getSerializableExtra("MyClass"); 
```

# jquery - 可点击的表格行期待最后一个 td 并在最后一个 td 展开表格行

> ID：11558910
> 
> 赞同：2
> 
> 时间：2012-07-19T10:30:59.963
> 
> 标签：jquery, html-table, css-selectors

我有一个表格，表格行应该是可点击的“除了”该行中的最后一个 td。因此，当单击它时，它会打开一个指向新 URL 的新窗口。

但是，在同一表格行中，最后一个 td 也需要可单击以展开表格行以获取更多详细信息。目前我有这个工作，但不是让一个 td 可点击整行（我不想要）。

展开表格行的代码是：-

```
$("#report tr:odd").addClass("odd");
        $("#report tr:not(.odd)").hide();
        $("#report tr:first-child").show();

        $("#report tr.odd").click(function(){
            $(this).next("tr").toggle();
            $(this).find(".arrow").toggleClass("up");

        }); 
```

所以总的来说，我需要最后一个 td 的行可点击期望。

最后一个 td 我希望能够通过单击该 td 而不是整行来扩展表格行？

任何帮助都会很棒 - 我知道我需要什么我只是不知道如何写它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:38:39.763

除了将`click`事件应用于整个`tr`，您可以将其应用于相关单元格，而不是像这样：

```
$("#report tr.odd td:not(:last-child)") 
```

这将选择`td`除该行中的最后一个之外的行中的每个。

要访问 next `tr`，您还需要更改该选择器：

```
$(this).parent().next("tr").toggle(); 
```

这将获取`td`您单击的 (a `tr`) 的父级，然后找到下一个。如果`.arrow`该类应用于 tr，则同样需要在那里发生：

```
$(this).parent().find(".arrow").toggleClass("up"); 
```

# .net - inheritance with no additional elments in XSD

> ID：11558911
> 
> 赞同：0
> 
> 时间：2012-07-19T10:31:01.313
> 
> 标签：.net, wcf, web-services, xsd

can someone please tell me whitch of these xsd parts (xsd1 or xsd2) is valid for sample code below:

```
Class definitions:
class A
{
 int prop1;
 int prop2;
}

class B : A {} 
```

So, class A is base class and class B inherit A and have no aditional properties.

xsd1: In this case if I use wsimport to generate code from wsdl file that contains this part of xsd I will get generated code for all elements, A and B. But, if I use svcutil I will get generated only class A.

```
<xs:element name="B" nillable="true" type="tns:A" />
<xs:complexType name="A">
    <xs:sequence>
        <xs:element name="prop1" type="xs:string"/>
        <xs:element name="prop2" type="xs:string"/>
    </xs:sequence>
</xs:complexType>
<xs:element name="A" nillable="true" type="tns:A" /> 
```

xsd1: In this case both wsimport and svcutil will generate all elements, A and B.

```
<xs:complexType name="B">
    <xs:complexContent mixed="false">
        <xs:extension base="tns:A">
            <xs:sequence />
        </xs:extension>
    </xs:complexContent>
</xs:complexType>
<xs:element name="B" nillable="true" type="tns:A" />
<xs:complexType name="A">
    <xs:sequence>
        <xs:element name="prop1" type="xs:string"/>
        <xs:element name="prop2" type="xs:string"/>
    </xs:sequence>
</xs:complexType>
<xs:element name="A" nillable="true" type="tns:A" /> 
```

So, my question is ... is this first definition valid?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:35:43.287

我想正确的解决方案是第二种。解释为什么如果您将 complexTypes 视为类而将元素视为实例可能会更好。

在您的第一个 xsd 中，您实际上是在声明 A 类的两个实例（A 和 B）。在第二个中，您仍然声明同一类的两个实例，但您还包括 B 类的定义。

事实上，我想它会更正确

```
<xs:element name="B" nillable="true" type="tns:B" /> 
```

比

```
<xs:element name="B" nillable="true" type="tns:A" /> 
```

# asp.net-mvc - Google Linecharts json data source?

> ID：11558919
> 
> 赞同：0
> 
> 时间：2012-07-19T10:31:26.520
> 
> 标签：asp.net-mvc, json, charts, google-visualization

I use google line chart but I cant success to assing source to chart.

script

```
<script type="text/javascript">

// Load the Visualization API and the piechart package.
google.load('visualization', '1', { 'packages': ['corechart'] });

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

function drawChart() {
    var jsonData = $.ajax({
        url: '@Url.Action("AylikOkumalar", "Enerji")',
        dataType: "json",
        async: false
    }).responseText;

    var rows = new google.visualization.DataTable(jsonData);

    var data = new google.visualization.DataTable();
    data.addColumn('date', 'Date');
    data.addColumn('number', 'T1');
    data.addColumn('number', 'T2');
    data.addColumn('number', 'T3');

    data.addRows(rows);

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.LineChart(document.getElementById('chart_div')).draw(data, { curveType: "function",
        width: 700, height: 400,
        vAxis: { maxValue: 10 }
    }
    );
}
</script> 
```

action

```
public ActionResult AylikOkumalar()
{
   IEnumerable<TblSayacOkumalari> sayac_okumalari = entity.TblSayacOkumalari;

   var sonuc = sayac_okumalari.Select(x => new
   {
       okuma_tarihi = ((DateTime)x.okuma_tarihi).ToShortDateString(),
       T1 = (int)x.toplam_kullanim_T1,
       T2 = (int)x.toplam_kullanim_T2,
       T3 = (int)x.toplam_kullanim_T3
   });

   return Json(sonuc, JsonRequestBehavior.AllowGet);
} 
```

json output

![enter image description here](../Images/b70a792c275dd948f5f2d85620866075.png)

and script error:

```
Argument given to addRows must be either a number or an array. 
```

I use it first time. So I dont know what should I do. How can use charts with mvc 3\. there is no example enough.

Thanks.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T23:05:45.003

```
data.addRows(rows); 
```

'rows' 应该是一个数组 - 类似于：

```
data.addRows([
  [new Date(1977,2,28)], 1, 2, 3],
  [new Date(1977,2,28)], 1, 2, 3]
]); 
```

或者您的 jsonData 可能是整个结构：

```
{
    "cols": [
        {"id": "", "label": "Date", "type": "date"},
        {"id": "", "label": "T1",   "type": "number"}
    ],
    "rows": [
        {"c":[{"v": "Apr 24th"}, {"v": 56000} ]},
        {"c":[{"v": "May 3rd" }, {"v": 68000} ]}
    ]
} 
```

# c++ - vc++ 应用程序按序号调用 vc++ dll

> ID：11558923
> 
> 赞同：0
> 
> 时间：2012-07-19T10:31:42.127
> 
> 标签：c++, visual-c++, dll, loadlibrary

如何在vc++中调用vc++ dll。

在 .h 文件中

```
typedef int (*LPVAR)(char * ptr_f, char *CC);
HINSTANCE hDLL; 
```

在 .cpp 文件中

```
hDLL = NULL;
LPVAR var;
hDLL = LoadLibrary("Pro.dll");

if( hDLL == NULL )
    AfxMessageBox("Could not load the DLL");
else
{
    var = (LPVAR)GetProcAddress(hDLL, "#2"); //2 is ordinal no
    char *ch,*a;
    ch = (char*)malloc(100*sizeof(char));
    a = (char*)malloc(10*sizeof(char));
    int c = var(ch,a);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:00:31.730

检查那`var`不是`NULL`在调用之后`GetProcAddress`。

[使用MAKEINTRESOURCE](https://stackoverflow.com/a/3598125/32746)可能会取得更大的成功，如下所示：

```
var = (LPVAR)GetProcAddress(hDLL, MAKEINTRESOURCE(2)); 
```

请记住调用`free`返回的指针，并在完成后`malloc`调用[FreeLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683152(v=vs.85).aspx)`hDLL`。

# powershell - After deploying the script in target environment ,how to ensure that it is not modified?

> ID：11558925
> 
> 赞同：3
> 
> 时间：2012-07-19T10:31:47.303
> 
> 标签：powershell, powershell-2.0

We are providing powershell script to end users to do some activity.

If they change the script by themselves then it may not work as intended.

Is there any way to lock the scripts so that once we shipped that end user can't rewrite any thing in it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:35:57.113

两种选择：

*   签字。
*   将 ACL 放在阻止最终用户修改的脚本上。

# silverlight - How do I add a Domain Services class to a Silverlight app or RIA Services library?

> ID：11558926
> 
> 赞同：0
> 
> 时间：2012-07-19T10:31:47.687
> 
> 标签：silverlight, silverlight-4.0, wcf-ria-services, domainservices

I have tried several guides I find online, and nothing seems to work. I am trying to follow this guide, Setting up a new Silverlight 4 Project with WCF RIA Services, but when I try and add a Domain Services class to the RIA x.Web project, I get an error about an index dialoguie out of range etc. Google reveals this is maybe because VS can't find a connection string, although I have added one in App.config.

Then, if I try and add the DS class directly into my Silverlight host, bypassing teh RIA project, I get the same error, until I add an App.Config. After that, I can proceed an iota further, and I get to choose my DbContext and select a few entity classes to include in the DS class. But then I get an unspecified error.

Maybe something code-first specific? I find a NuGet package for CodeFirst EF and RIA, RIAServices.EntityFramework, but it doesn't support EF 4.3\. I am going to try and duplicate my model in a dirty old edmx model and see.

Has anyone had any success doing any of this in VS 2012?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:00:10.653

您应该将连接字符串添加到 Web.Config 而不是 App.config

# ruby-on-rails - Installing Ruby on Rails on Mac OS X 10.7.4

> ID：11558928
> 
> 赞同：0
> 
> 时间：2012-07-19T10:31:52.433
> 
> 标签：ruby-on-rails, ruby

I'm trying to install Ruby on Rails on my Mac Machine. I have Xcode installed as well as the terminal command tools.

This is the output after running **$ bundle install** I'm also tried sudo **$ sudo bundle install** and have gotten the same results.

```
Fetching gem metadata from http://rubygems.org/......
Fetching gem metadata from http://rubygems.org/..
Using rake (0.9.2.2) 
Using Ascii85 (1.0.1) 
Using i18n (0.6.0) 
Using multi_json (1.3.6) 
Using activesupport (3.2.6) 
Using builder (3.0.0) 
Using activemodel (3.2.6) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.6) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.6) 
Using active_reload (0.6.1) 
Using active_utils (1.0.3) 
Using json (1.7.3) 
Using money (3.7.1) 
Using activemerchant (1.21.0) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.6) 
Using activeresource (3.2.6) 
Using acts_as_list-rails3 (0.0.4) 
Using addressable (2.2.8) 
Using celerity (0.9.2) 
Using culerity (0.2.15) 
Using nokogiri (1.5.2) 
Using ffi (1.0.11) 
Using childprocess (0.3.1) 
Using libwebsocket (0.1.3) 
Using rubyzip (0.9.7) 
Using selenium-webdriver (2.21.0) 
Using xpath (0.1.4) 
Using capybara (0.4.1.2) 
Using jruby-jars (1.6.7) 
Using akephalos (0.2.5) 
Using ancestry (1.2.5) 
Using awesome_print (1.0.2) 
Using multi_xml (0.4.2) 
Using httparty (0.8.2) 
Using uuidtools (2.1.2) 
Using aws-sdk (1.4.0) 
Using breadcrumbs_on_rails (2.2.0) 
Using bundler (1.1.5) 
Using rack-ssl (1.3.2) 
Using rdoc (3.12) 
Using thor (0.15.4) 
Using railties (3.2.6) 
Using rails (3.2.6) 
Using cache-machine (0.2.1) 
Using redis (2.2.2) 
Using cache-machine-redis (0.0.1) 
Using highline (1.6.13) 
Using net-ssh (2.5.2) 
Using net-scp (1.0.4) 
Using net-sftp (2.0.5) 
Using net-ssh-gateway (1.1.0) 
Using capistrano (2.12.0) 
Using capistrano-ext (1.2.1) 
Using carrierwave (0.6.2) 
Using chronic (0.6.7) 
Using closure-compiler (1.1.6) 
Using cloudfiles (1.5.0.1) 
Using cocaine (0.2.1) 
Using coffee-script-source (1.3.3) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using coffee-rails (3.2.2) 
Using columnize (0.3.6) 
Using configuration (1.3.1) 
Using diff-lcs (1.1.3) 
Using gherkin (2.9.3) 
Using term-ansicolor (1.0.7) 
Using cucumber (1.1.9) 
Using daemons (1.1.8) 
Using dalli (2.0.3) 
Using database_cleaner (0.7.2) 
Using debugger-ruby_core_source (1.1.3) 
Installing debugger-linecache (1.1.2) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
extconf.rb:2:in `require': no such file to load -- debugger/ruby_core_source (LoadError)
    from extconf.rb:2

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/debugger-linecache-1.1.2 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/debugger-linecache-1.1.2/ext/trace_nums/gem_make.out
An error occured while installing debugger-linecache (1.1.2), and Bundler cannot continue.
Make sure that `gem install debugger-linecache -v '1.1.2'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:19:38.187

访问这个帖子：

[https://stackoverflow.com/a/9400424/1171049](https://stackoverflow.com/a/9400424/1171049)

我写了一个通过自制软件安装 RubyOnRails 的指南。是安装RubyonRails的好方法

我希望本指南对您有用

> 2-安装最新版本的 Xcode（通过 App Store）
> 
> 3-安装自制软件（[https://github.com/mxcl/homebrew/wiki/installation](https://github.com/mxcl/homebrew/wiki/installation)）
> 
> 4-安装 rvm 和 ruby​​ 1.9.3。按照快速入门指南的步骤 ( [http://beginrescueend.com/](http://beginrescueend.com/) )
> 
> 5-打开终端并通过自制软件安装mysql

```
 brew install mysql 
```

> 阅读 mysql 安装说明（在终端上）并按照步骤操作。（创建别名、密码、启动和初始化数据库等）
> 
> 6- 在使用 ruby​​ 版本 1.9.3 的 rvm 上说

```
 rvm use 1.9.3 
```

> 7-如果你愿意，你可以创建一个 gemsets（在 rvm 网页上解释）并使用它

```
 rvm gemset create "gemset_name"

    use 1.9.3@gemset_name 
```

> 8-安装导轨

```
 gem install rails 
```

> 9 - 使用 mysql gems 创建一个应用程序

```
 rails new name_app -d mysql 
```

它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:45:34.843

[您也可以尝试在http://railsinstaller.org/](http://railsinstaller.org/)上使用适用于 mac 的 Railsinstaller 版本

# ios - 在 iOS 中的 App 购买突然停止工作（错误代码 = 5002 发生）

> ID：11558929
> 
> 赞同：28
> 
> 时间：2012-07-19T10:31:54.057
> 
> 标签：ios, in-app-purchase

我已成功将应用内购买集成到我的应用程序中。我通过在 iTunes 中创建测试用户帐户对其进行了正确测试。我的应用内购买运行良好。但突然我的 IAP 停止工作。

应用程序可以加载所有产品，但在输入我的帐户凭据后，横断队列会进入状态`SKPaymentTransactionStateFailed`并给出错误

> 错误域 = SSServerErrorDomain 代码 = 5002 “发生未知错误”

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-23T13:46:53.363

storekit 似乎不再在模拟器中工作。我从 storekit 文档中引用：

> 注意：Store Kit 不能在 iOS 模拟器中运行。在 iOS 模拟器中运行您的应用程序时，如果您的应用程序尝试检索支付队列，Store Kit 会记录一个警告。必须在实际设备上测试商店。

[商店套件文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T18:36:44.280

如果您在真实设备上进行测试，请确保它不是 JB。如果您在模拟器上测试，请确保您运行的是 iOS 6.0 或更高版本，较低版本的模拟器不起作用，我浪费了一整天的时间来解决这个问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-11T15:25:50.370

它已停止在模拟器上工作。尝试在真实设备上使用它。它会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T14:54:16.747

我在 iOS 模拟器上遇到了同样的错误，但它适用于我的设备（iPhone 3G）。

错误是从 Apple 的服务器返回的，不是我们控制的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:45:49.913

在 ios 5.1 中面临同样的问题，商店套件不再在模拟器上工作，您需要在设备中检查它。

即使在连接到设备后说您收到错误代码“无法连接到 iTunes Store”

那么这意味着您的设备无法联系苹果商店，这不是您的错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T20:45:20.010

要解决此问题，请在设备上的“设置”应用中退出任何现有帐户。

# jquery - How to interrupt jQuery animate?

> ID：11558930
> 
> 赞同：1
> 
> 时间：2012-07-19T10:31:56.893
> 
> 标签：jquery, html, css

I am trying to animate a div when clicking on the document using jQuery by increasing the x-position of that div.

I don't want the div to go out of my sight while it is animating; if the div went out of my screen I want to bring it back.

This is [my code](http://jsfiddle.net/YV747/):

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body{
    overflow: hidden;
}
div {
    position: absolute;
    left:10px;
    top:10px;
    width:20px;
    height:20px;
    background-color:green;
}
</style>
<script type="text/javascript">
$(function(){
    $(document).click(function(){
        if($("div").offset().left > (parseInt($(window).width()))){
            $("div").animate({"top":'+=20'},1000);
            $("div").animate({"left": '8' },1000);
        }else{
            $("div").animate({"left":'+=400'},1000);
        }
    });
});
</script>
</head>
<body>
<div></div>
</body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:48:22.897

参考 [http://jsfiddle.net/YV747/3/](http://jsfiddle.net/YV747/3/)

```
$(function(){
    $(document).click(function(){
        $("#pointer").stop(0,0);

        if(($("#pointer").offset().left+100) > $(window).width()){
            $("#pointer").animate({"top":'+=20',"left":8},1000);
            //$("#pointer").animate({"left": '8' },1000);
        }else{
            $("#pointer").animate({"left":'+=400'},1000);
        }
    });
}); 
```

看线`if(($("#pointer").offset().left+100) > $(window).width()){`

我给了 100，你可以给 400 或任何适合你的值。

> 注意：不要在简单的`div`始终使用上使用代码，`id`否则它将作用于文档中的所有 div。

# sql - can count(*) return a different result from just count

> ID：11558931
> 
> 赞同：1
> 
> 时间：2012-07-19T10:31:57.767
> 
> 标签：sql, count

for example can this query

```
select count(*) from table 
```

return something different than this query:

```
select count(column) from table 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T10:34:38.080

*   `COUNT(*)`计算所有行
*   `COUNT(column)`仅计算非 NULL

# search - Powershell: Searching Content of files and write results to text file

> ID：11558933
> 
> 赞同：1
> 
> 时间：2012-07-19T10:32:04.473
> 
> 标签：search, powershell

I'm new to powershell so I don't know where to start. I want a script that searches in all (pdf, word, excell, powerpoint, ...) file content for a specific string combination.

I tried this script but it doesn't work:

```
function WordSearch ($sample, $staining, $sampleID, $patientID, $folder)
{
$objConnection = New-Object -com ADODB.Connection
$objRecordSet = New-Object -com ADODB.Recordset
$objConnection.Open(“Provider=Search.CollatorDSO;Extended Properties=’Application=Windows’;”)
$objRecordSet.Open(“SELECT System.ItemPathDisplay FROM SYSTEMINDEX WHERE ((Contains(Contents,’$sample’)) or (Contains(Contents,’$sampleID’) and Contains(Contents,’$staining’)) or (Contains(Contents,’$staining’) and Contains(Contents,’$patientID’))) AND System.ItemPathDisplay LIKE ‘$folder\%’”, $objConnection)
if ($objRecordSet.EOF -eq $false) {$objRecordSet.MoveFirst() }

while ($objRecordset.EOF -ne $true) {
$objRecordset.Fields.Item(“System.ItemPathDisplay”).Value
$objRecordset.MoveNext()
}
} 
```

Can someone help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:33:03.217

你应该试试这个，但首先确保你在你想要开始搜索的文件夹中：（如果你试图搜索你的整个计算机，从 C:\ 开始，但我想脚本将需要相当长的时间来运行.

```
$Paths = @()    
$Paths = gci . *.* -rec | where { ! $_.PSIsContainer } |? {($_.Extension -eq ".doc") -or ($_.Extension -eq ".ppt") -or ($_.Extension -eq ".pdf") -or ($_.Extension -eq ".xls")} | resolve-path 
```

这将检索这些文件类型的所有文件路径。如果您有 Microsoft Office 2007 或更高版本，您可能需要添加搜索“.xlsx”或“.docx”或“.pptx”

然后您可以开始查看这些文件中的“特定字符串组合

```
array = @()
foreach($path in $Paths)
{$array += Select-String -Path $Path -Pattern "Search String"} 
```

这将为您提供该字符串在这些文件中存在的所有行和路径。由于微软加密了他们的文件，你得到的实际行输出可能有点失真。用于 `$array | get-member -MemberType Property`查找可以索引到的项目以及`Select-object`将这些项目拉出的命令行开关。

# yii - Poll extension gves error while inserting in yii

> ID：11558935
> 
> 赞同：0
> 
> 时间：2012-07-19T10:32:13.330
> 
> 标签：yii, yii-extensions

I am using yii poll extension. I copied the sql file into my db. It works fine untill i vote. But when i click on vote it shows command error. ie:- CDbCommand failed to execute the SQL statement: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`database`.`poll_vote`, CONSTRAINT `vote_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE). The SQL statement executed was: INSERT INTO `poll_vote` (`user_id`, `ip_address`, `timestamp`, `choice_id`, `poll_id`) VALUES (:yp0, :yp1, :yp2, :yp3, :yp4);

I havent implemented this part of document. 1\. Setup a User active record with an integer ID returned by Yii::app()->user->id.*

Can anyone help wt does that mean.

I do have users table with uid column in same database. some how im not able to get the point. And how can i avoid the constraint failure. Im sorry im new to yii.. Any help will be appreciated. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:14:38.807

它失败了，因为正如您所说，您跳过了“使用 Yii::app()->user->id.* 返回的整数 ID 设置用户活动记录”

“完整性约束违规”是说外键约束失败，并继续说外键是你说你从未创建过的 user_id。

看起来扩展程序正在跟踪谁使用 user_id 进行了投票，并且由于您尚未创建 ID，因此您会收到错误消息。

有关如何修改 Y ii:app()->user 的信息，请参阅[此页面](http://www.yiiframework.com/wiki/6/how-to-add-more-information-to-yii-app-user/)

# css - Weird positioning in IE8 when hovering

> ID：11558938
> 
> 赞同：0
> 
> 时间：2012-07-19T10:32:28.097
> 
> 标签：css, internet-explorer-8, css-float, positioning

I have a collection of divs in the layout shown in the image. All four divs (A, B, C, D) are floated left and each have a link elements inside of them wrapping other content elements (mostly divs and images but some text as well)

![enter image description here](../Images/810c6d130227296116d6a2ef0d68bb66.png)

The problem is that in IE8, when you hover over items B, C or D, the item you hover over drops down 100px or so. If you hover on B it pushes C and D down. If you hover on D, just D drops down.

It is only a problem in actual IE8, not IE9 in IE8 mode.

Has anyone come across this behaviour befor with links inside floated elements?

There is a ton of CSS, but I am using a standard clearfix on the content inside the floated containers. The widths and heights of the containers are % based, some of the elements inside have fixed px widths

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:36:49.100

很难说出根本问题。您可以做的一件事是在悬停时向您的 div 添加其他样式，这将阻止它们扩展。

```
#B:hover{height:200px;}
#C:hover{height:200px;}
#D:hover{height:200px;} 
```

# java - 变压器类设计

> ID：11558941
> 
> 赞同：5
> 
> 时间：2012-07-19T10:32:51.247
> 
> 标签：java, oop, inheritance, interface

相信，每个人都会知道变形金刚（擎天柱，威震天等）。

我试图以类和接口的形式来表示它。目前，我不考虑属性。我只是在使用一些功能。

我的设计是

```
interface Car{
 public void run();
 public void stop();
}

interface Robot{
 public void walk();
 public void fight();
}

class Transformer implements Car, Robot {
 // implementing all the methods
} 
```

所以类`Transformer`说，它可以执行汽车和机器人操作

在实例化期间

```
Robot R = new Transformer(); // Now the transformer is in Robot format
Car C = new Transformer();  // Now the transformer is in Car format 
```

我的问题是，这里有两个正在创建的对象`Robot R`和`Car C`. 因此，这传达了 Robot is **getting created**和 Car is **getting created**。但我想要的是`The Car is Getting Transformed to A Robot and Vice Versa`

如何在设计中实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:51:23.943

据我了解，您希望 Transformer 类具有机器人功能或汽车功能，但不能同时具有两者。

为了建模，我更喜欢[Composition 而不是 Inheritance](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

例如：

```
class Transformer {

private Car car;
private Robot robot;
private Class currentState = Car.class;

 public void fight() {
   if (currentState.equals(Robot.class)
      robot.fight();
   }

 public void drive() {
  if (currentState.equals(Car.class)
      car.drive();
  }

 public void transform() {
  if (currentState.equals(Car.class) 
      currentState = Robot.class;
  else
      currentState = Car.class;
} 
```

要实例化一个新的 Transformer，您需要定义它的 Car-Form 和 Robot-Form，例如：

```
new Transformer(new OptimusPrimeRobot(), new GiantTruck()); 
```

与构造函数：

```
Transformer(Robot r, Car c) {
   this.robot = r;
   this.car = c;
} 
```

OptimusPrimeRobot 实现 Robot 和 GiantTruck 实现 Car。

如果你愿意，你甚至可以懒惰地初始化你包含的类。定义字段：

```
Class carClass;
Class robotClass; 
```

和一个构造函数：

```
Transformer(Class robotC, Class carC) {
   this.robotClass = robotC;
   this.carClass = carC;
} 
```

然后为机器人和汽车制作吸气剂方法：

```
private Robot getRobot() {
  if(robot == null) {
     robot = robotClass.newInstance();
  }
  return robot;
} 
```

并调整您的代码，因此它使用 Getters 而不是字段：

```
 getRobot().fight(); 
```

现在您只需指定 Transformer 包含哪些类，并且它们的对象仅在需要时才被实例化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:49:42.927

你不应该让汽车变成机器人。汽车只不过是汽车，不应该了解机器人。但是您可以将 Transformer 转换为 Car 或 Robot。我不明白你为什么需要它，但你可以做这样的事情：

```
class Transformer implements Car, Robot {

  public Car transformToCar() {
     return (Car)this;
  }

  public Robot transformToRobot() {
    return (Robot) this;
  }
} 
```

那么你可以这样做：

```
Transformer optimus = new Transformer();
Car optimusCar = optimus.transformToCar();
//but this is the same as writing:
Car optimusCar = (Car) optimus; 
```

如您所见，transformToXXX() 方法确实没有意义，因为 Transformer 始终既是 Car 又是 Robot。

编辑：您当然可以将 transformToCar() 定义移动到 Robot 并将 transformToRobot() 定义移动到 Car。然后，Transformer 类必须实现这些方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:51:19.523

使用转换方法扩展 Car 接口：

```
interface TransformableCar extends Car {

    TransformableRobot asRobot();
} 
```

用变换方法扩展 Robot 接口：

```
interface TransformableRobot extends Robot {

    TransformableCar asCar();
} 
```

创建一个具有两个内部类的类，代表两种状态：

```
public class Megatron {

    private MegatronCar car = new MegatronCar();
    private MegatronRobot robot = new MegatronRobot();

    public TransformableCar asCar() {
        return car;
    }

    public TransformableRobot asRobot() {
        return robot;
    }

    class MegatronCar implements TransformableCar {

        @Override
        public TransformableRobot asRobot() {
            return Megatron.this.asRobot();
        }

        // TODO: Implement Car methods
    }

    class MegatronRobot implements TransformableRobot {

        @Override
        public TransformableCar asCar() {
            return Megatron.this.asCar();
        }

        // TODO: Implement Robot methods
    }
} 
```

像这样使用它：

```
Megatron megatron = new Megatron();
TransformableCar car = megatron.asCar();
TransformableRobot robot = car.asRobot(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:52:12.723

我将使用[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式 `Transformer`是一个具体的类，它将功能委托给 a `RobotStrategy`or `CarStrategy`。这两个都将实现`TransformerStrategy`

```
public interface TransformerStrategy{
    public void move();//implemented by both
    public void stop();//implemented by both
    public void fight();//implemented by only Robot, NO-OP for car
    //etc
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T10:53:34.667

**装饰图案。**就像在 Collections 类中一样。使用静态方法。

```
public static Robot transformCar(Car car){
        return (Robot)car;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T10:51:31.597

我认为您需要更多地描述您的用例。

对我来说，汽车和机器人之间几乎没有共同之处。如果它当前是汽车，我希望它调用运行和停止，如果它是机器人调用步行和战斗。我不想要一个允许我在错误状态下调用错误方法的设计，而且我无法想象我想在这两种状态下调用的行为。这几乎听起来像是一个由 Car 和 Robot 对象组成的 Transformer 对象，并带有一个返回当前状态的 getter。但也许如果你描述更多的用例，不同的东西会更合适。有趣的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-21T08:29:54.327

刚刚这里有点形状...

但这里的问题是，transformer 显式行走，而 CAR 显式运行。也就是说，它们是两个不同的对象。我想要他们，就是这样！

```
public class TransformersClass{

    public TransformersClass() {

        Car transformer = new Transformer(); // Initially they are Cars
        Robot robot = (Robot) transformer; // Now transformed to Robot. No new objects are created

    }

}

class Transformer implements Robot, Car {

    @Override
    public void run() {
        // TODO Auto-generated method stub

    }

    @Override
    public void walk() {
        // TODO Auto-generated method stub

    }

    @Override
    public void attack() {
        // TODO Auto-generated method stub

    }

    @Override
    public void fire() {
        // TODO Auto-generated method stub

    }

}

interface Robot {
    public void walk();
    public void attack();
    public void fire();

}

interface Car {
    public void run();
} 
```

# excel - 根据另一个单元格范围计算唯一数量的元素

> ID：11558942
> 
> 赞同：1
> 
> 时间：2012-07-19T10:33:02.547
> 
> 标签：excel, excel-2007, worksheet-function, countif, array-formulas

我的 Excel 工作表中有两列。A列包含`Wk No`，B列 `Dates`：

```
周。没有日期  
1228 年 7 月 9 日  
1228 7 月 10 日  
1228 7 月 11 日  
1228 7 月 11 日  
1228 7 月 12 日  
1228 7 月 13 日  
1229 7 月 16 日  
1229 7 月 16 日  
1229 7 月 17 日
```

我想要以下结果：

```
周。无非工作日  
1228 5  
1229 2
```

如何在Excel中得到这个？我可以获得唯一天数，但无法控制公式以根据周数计算唯一天数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T23:02:00.513

如果分别`Wk. No`在 A1 和`1228`C2`1229`和 C3 中，则：

```
=SUM(IF(A2:A10=C2,1/(COUNTIFS(A2:A10,C2,B2:B10,B2:B10)),0)) 
```

用`Ctrl`++`Shift`输入`Enter`并向下复制一行应该适合。由提供完整解释的[Get Digital Help](http://www.get-digital-help.com/2011/07/12/count-unique-distinct-values-that-meet-multiple-criteria-in-excel/)提供。

当然，使用 Excel 2013 会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:43:24.820

您可以使用

```
COUNTIF(RANGE,CRITERIA) 
```

喜欢

```
Wk.No          No-of-days
1228           =COUNTIF(RANGE,<Cell Reference of 1228>)
1229           =COUNTIF(RANGE,<Cell Reference of 1229>) 
```

# javascript - 是否可以从另一个事件中取消 Java 脚本事件？

> ID：11558949
> 
> 赞同：2
> 
> 时间：2012-07-19T10:33:24.443
> 
> 标签：javascript, javascript-events

我想知道，是否可以从另一个事件中取消队列中的下一个 java 脚本事件？

问题：

我有两个 ASP.Net 控件，Age - TextBox Save - Button

有两个 java 脚本验证函数，ValidateAge() - 检查有效年龄 (0 >= Age <= 140)，如果无效则提供警报 ValidatePage() - 检查页面中的所有必填字段，如果所有必填项则保存字段已填写

```
<asp:TextBox ID="txtAge" TabIndex="1" DataType = "String" runat="server" MaxLength="50" CssClass="textBox" Style="width: 150px" CausesValidation="true" onblur="return ValidateAge();"></asp:TextBox> 
```

并且为按钮定义了一个访问键，

```
<asp:Button ID="btnSave"  AccessKey="S" AssociatedControlID="btnSave" TabIndex="1" runat="server" CssClass="ButtonSaveNew" onclick="return ValidatePage();"></asp:Button> 
```

现在，如果我在 Age 字段中按“Alt+S”且年龄无效，则首先调用 Age 的 onblur（因为我设置了 AssociatedControlID），然后调用保存按钮的 onclick。

现在发生的情况是，无论年龄是有效还是无效，都会执行保存。

如果年龄无效，我需要从文本框的“onblur”事件中取消按钮的“onclick”事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:46:19.530

可能发生的情况是您的*表单*正在提交，因此按钮实际上并未触发`onclick`事件（因为它没有被点击！）。如果您在其中一个表单字段（即使是该字段！）中按 Enter 键，您可能会注意到相同的行为`txtAge`，因为这也会导致表单提交。

在这种情况下，最简单的做法是将`ValidatePage`函数注册为表单上提交事件的处理程序：

```
<form onsubmit="ValidatePage()"> 
```

虽然我很欣赏您正在使用 WebForms，因此这可能会很困难。每当我在 WebForms 中完成客户端验证时，我总是依赖 jQuery.validation 插件。如果您已经依赖 jQuery，这提供了一个非常简洁的模型来进行验证。它不能很好地与开箱即用的 WebForms 配合使用，您需要进行一些尝试才能使其正常工作。Dave Ward 在这里的帖子可能会有所帮助：[http ://encosia.com/using-jquery-validation-with-asp-net-webforms/](http://encosia.com/using-jquery-validation-with-asp-net-webforms/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:09:01.280

> 是否可以从另一个事件中取消 Java 脚本事件？

不，通常不是。另外，该[`blur`事件](http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#event-type-blur)无法取消，并且根据[如何防止在单击jQuery中的链接时运行blur（）？](https://stackoverflow.com/questions/7621711/how-to-prevent-blur-running-when-clicking-a-link-in-jquery)保持焦点很复杂。

然而，我不认为当用户试图离开一个元素（并聚焦下一个输入）时保持焦点是非常用户友好的 - 只显示离开输入的验证失败。您真正应该防止的唯一事件是`submit`，当验证失败时，您可以关注第一个无效字段。

```
var ageValid;
$("#txtAge").change(function validateAge(e) {
    if(!isNaN(this.value) && this.value >= 0) {
        ageValid = true;
    } else {
        $(this).addClass("invalid");
        ageValid = false;
    }
}).change();
$("#formid").submit(function validatePage(e) {
    // maybe calls to the single validation functions?
    if (! ageValid) {
        e.preventDefault();
        $("#txtAge").focus();
        return false;
    }
}); 
```

# cakephp-1.3 - 如何使用 getLastInsertId 在 cakephp 中保存多个表

> ID：11558951
> 
> 赞同：1
> 
> 时间：2012-07-19T10:33:25.100
> 
> 标签：cakephp-1.3

有两个表 Contents 和 contentpreviews。我想从一个动作中添加两个表中的数据。更多内容表的 last_insert_id 将保存到 contentpreviews 表中。怎么可能处理？

> ```
> $this->data['Content']['user_id']     = $uid;
> $this->data['Content']['content_category_id'] = $catname;
> $this->data['Content']['title']         = $contname;
> $this->data['Content']['description']           = $contdesc;
> $this->Content->create();                             
> $this->Content->save($this->data['Content']);
> /*****************CONTENT SAVE END*****************/
> 
> if(!empty($arxml[$arrFirstNode]['Webpreview'])){
> $webPreViewItem = count(array_values($arxml[$arrFirstNode ['Webpreview']));                       
> $webPrevfileName  = array_values($arxml[$arrFirstNode]['Webpreview']);
> 
> for($wpi=0; $wpi<$webPreViewItem; $wpi++){
>    $this->data['contentpreviews']['content_id']   = $this->Content->getLastInsertId();
>    $this->data['contentpreviews']['name']     = $webPrevfileName[$wpi];
>    $this->data['contentpreviews']['is_wap']      = 1;
> //$this->Contentpreview->create(); 
> ```
> 
> //$this->Contentpreview->saveAll($this->data['Contentpreview']); 现在如何将数据保存到内容和 contentpreviews 表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:10:58.683

CakePHP 允许您一次保存多个模型关联。[此链接](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)将为您提供帮助。

首先，您必须创建一个关联的数组，如参考链接中给出的那样。然后您应该必须使用以下代码将数据保存到 contents 和 contentprviews 表中。

```
$this->Content->saveAssociated($this->requst->$data, array('deep' => true)); 
```

您还可以使用 saveAll() 方法在单次查询中将数据保存到多个相关表中。

# android - 多个视图正在影响，ListView android

> ID：11558953
> 
> 赞同：1
> 
> 时间：2012-07-19T10:33:27.847
> 
> 标签：android, android-listview

我有 ListView，上面有 8 个（4 个可见的）列表项。每个视图包含一个 TextView 和一个 ImageView（最初设置为透明）。现在正在尝试从 onItemClick 方法将 img 设置为 imageView。它对我来说工作正常，但是当我向下滚动其他一些视图时也会产生影响。例如，如果我选择第 0 个位置项目，则第 0 个和第 4 个位置视图都设置为相同的 img。我该如何解决这个问题。

爪哇代码：

```
list.setAdapter(new SimpleAdapter(this,
            application.distanceList, R.layout.drop_down_view, from, to));
list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View v, int arg2,
                long arg3) {
            try {
                ((ImageView) temp.findViewById(R.id.ddviv))
                        .setImageResource(android.R.color.transparent);
            } catch (NullPointerException e) {

            }
            ((ImageView) v.findViewById(R.id.ddviv))
                    .setImageResource(R.drawable.drop_sel);
            temp = v;}
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:44:14.603

您必须在方法中使用带有s的自定义适配器（扩展`BaseAdapter`是一个不错的选择）。单击时，您会更改一些属性并调用.`ViewHolder``getView()``notifyDataSetChanged()`

如果你不知道如何实现自定义适配器，[谷歌](http://goo.gl/dXhNS)有很多 tuts =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:26:32.330

从 的行中设置这些图像的另一个选项`ListView`是进行一些数据调整并使用`SimpleAdapter.ViewBinder`. 我不知道你是如何为行视图设置数据的（我看不到你在`from`and`to`数组中有什么）或者你在里面有什么`application.distanceList`所以这里是一个小例子。首先，在每个`Map`（`application.distanceList`对应于`ListView`一行）中，您必须添加如下条目：

```
map.put("position", "x"); // where x is the list row number(for the first Map in application.distanceList x will be 0, for the second Map in application.distanceList x will be 1 etc) 
```

您将`"position"`在`from`数组中包含 ，并且与此相对应，`"position"`您将来`ImageView`自行布局的 id 放入`to`数组中。

接下来，您必须添加一个`SimpleAdapter.ViewBinder`来绑定`ListView`行中的图像（这将处理`ListView`的回收机制）：

```
mAdapter.setViewBinder(new SimpleAdapter.ViewBinder() {

            @Override
            public boolean setViewValue(View view, Object data,
                    String textRepresentation) {
                            // view is the ImageView from the row layout
                            // data is the x from the position column
                if (view.getId() == R.id.imageView1) {
                    Integer rowNumber = Integer.parseInt((String) data);
                                    // below is the explanation for mImageIds
                    ((ImageView) view).setImageResource(mImageIds[rowNumber]);
                    return true;
                }
                return false;
            }
        }); 
```

`mImageIds`是一个数组`ints`，它将保存 的行的可绘制对象的id `ListView`：

```
// a field in your class
private int[] mImageIds = new int[8]; // you said you had 8 rows

//.. in the onCreate method initialize the mImageIds array

    for (int j = 0; j < 8; j++) {
        mImageIds[j] = R.drawable.ic_launcher;// a default image(you could use android.R.color.transparent for empty)
    } 
```

最后在`onItemClick`回调中：

```
public void onItemClick(AdapterView<?> arg0, View v, int arg2,
                long arg3) {
       mImageIds[position] = android.R.drawable.btn_minus; // the desired image
       mAdapter.notifyDataSetChanged();
} 
```

这听起来更复杂，希望您了解原理，另一种解决方案是像其他用户已经说过的那样构建一个自定义适配器。

# ios - 动态 UILabel 截断文本

> ID：11558956
> 
> 赞同：4
> 
> 时间：2012-07-19T10:33:35.830
> 
> 标签：ios, label, uilabel

我正在使用[此答案](https://stackoverflow.com/questions/9181368/ios-dynamic-sizing-labels)中提供的代码来创建动态标签，它在大多数情况下都有效。但是，只要标签文本的长度超过 94 个字符，它就会被截断并添加省略号。

还有一件更奇怪的事情是，如果我在字符串中添加更多字符，它们就会显示出来，但最后两行仍然被截断。

例如。

字符串：

```
this is a very very long string 
with lots of words to test the 
dynamic bubble sizing one two three. 
```

显示如下：

```
this is a very very long string 
with lots of words to test the 
dynamic bubble sizing one tw... 
```

但是当我通过在标签中再次使用相同的句子来加倍字符串时，它会显示更多的文本，但仍然会截断它。

例如。

字符串：

```
this is a very very long string 
with lots of words to test the 
dynamic bubble sizing one two 
three. this is a very very long 
string with lots of words to test 
the dynamic bubble sizing one 
two three. 
```

显示如下：

```
this is a very very long string 
with lots of words to test the 
dynamic bubble sizing one two 
three. this is a very very long 
string with lots of words to tes... 
```

这是我正在使用的代码。

```
NSString *temp = [NSString stringWithFormat:@"this is a very very long string with lots of words to test the dynamic bubble sizing one two three"];

captionLabel.text = temp;
//Calculate the expected size based on the font and linebreak mode of your label
CGSize maximumLabelSize = CGSizeMake(296,9999);

CGSize expectedLabelSize = [temp sizeWithFont:captionLabel.font 
                                  constrainedToSize:maximumLabelSize 
                                      lineBreakMode:captionLabel.lineBreakMode]; 

//adjust the label the the new height.
CGRect newFrame = captionLabel.frame;
newFrame.size.height = expectedLabelSize.height;
captionLabel.frame = newFrame; 
```

希望有人有一个想法，因为这让我摸不着头脑。

**编辑**

感谢@troolee，使用 captionLabel.frame.size.width 而不是硬编码的 296 修复了它，如果他/她选择创建答案，我会将其标记为正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:49:01.453

而不是`captionLabel.lineBreakMode`，只是写`UILineBreakModeWordWrap`。它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:26:00.970

我希望@troolee 现在已经将他的评论作为答案，但既然他没有，我将发布答案并将其标记为正确，以便我可以关闭这个问题。

使用 captionLabel.frame.size.width 而不是硬编码的 296 修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:38:27.220

```
 NSString * test=@"this is test this is test inthis is test ininthis is test inthis is test inthis is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel ...this is test in uilabel END";

        testLabel.text = test;
        testLabel.numberOfLines = 0; //will wrap text in new line
        [testLabel sizeToFit];

        [self.view addSubview:testLabel]; 
```

这肯定会帮助你。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:46:03.803

尝试以下`UILabel`类别。感谢创作者。

**UILabel+VAlign.h**

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

@interface UILabel (VAlign)
- (void) setVerticalAlignmentTopConstrainedToSize:(CGSize)size;
@end 
```

**UILabel+VAlign.h**

```
#import "UILabel+VAlign.h"

@implementation UILabel (VAlign)

- (void) setVerticalAlignmentTopConstrainedToSize:(CGSize)size
{
    CGSize textSize = [self.text sizeWithFont:self.font
                            constrainedToSize:size
                                lineBreakMode:self.lineBreakMode];

    CGRect textRect = CGRectMake(self.frame.origin.x,
                                 self.frame.origin.y,
                                 self.frame.size.width,
                                 textSize.height);
    [self setFrame:textRect];
    [self setNeedsDisplay];
}

@end 
```

# javascript - Jquery DIV 中的每个输入（有一个表）

> ID：11558957
> 
> 赞同：4
> 
> 时间：2012-07-19T10:33:48.993
> 
> 标签：javascript, jquery, html, input, foreach

我目前正在尝试从 DIV 获取所有输入元素。

```
$("[required]").each(function() {

}); 
```

我有这段代码，它返回具有`required`属性的每个元素。

我知道在函数中`each()`我可以使用每个项目，例如：

```
$(this) 
```

所以我得到了如下所示的 div ID，并尝试通过以下方式从中获取所有输入：

```
var id = $(this).attr('id');
console.log("### " + id);
console.log($("#" + id + " > :input").length); 
```

当我在该 DIV 中有 4 个放入元素时返回 0（在 div 中也有一个表）。

我最理想的做法是为 div 中的每个输入元素打印其 ID。

更新

```
<div id="contactAddress" required="true">

 <td>Addres line 1:</td>
 <td colspan="2">
 <input type="text"/>
 </td>
 <td>Addres line 2:</td>
 <td colspan="2">
 <input type="text" />
 </td>
 </tr>
</div>

console.log($(this).html()); 
```

不显示任何内容，但如果我在下面添加任何内容或类似内容...

```
 <div id="contactAddress" required="true">
 <input type="text" /> 
```

并运行 `console.log($(this).html());`它显示它放的不是表？

我使用 Jquery Mobile 的任何想法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T10:35:39.110

下面将找到 div 元素内的所有输入。然后它将留下该元素的 id 的日志。

```
$("div > input").each(function() {
  console.log( $(this).attr("id") );
}); 
```

如果您需要包含您可以使用的输入的 div id`.parent()`

```
$("input").each(function() {
  console.log( $(this).parent().attr("id") );
}); 
```

# jquery - 在 .load 之后应用所见即所得的编辑器

> ID：11558964
> 
> 赞同：0
> 
> 时间：2012-07-19T10:34:17.813
> 
> 标签：jquery, wysiwyg

我正在通过 jquery AJAX 加载表单，并且正在尝试将所见即所得编辑器实现到 textarea。

加载页面时 textarea 本身很好，但是当重新加载 div #customerForm（它包含 textarea）时，如下所示：

```
$("#customerForm").html(loading).load(filename);
$('#noteArea').wysiwyg(); 
```

我无法加载它。上面的代码在主页中加载的单独 .JS 文件中，所以我想知道它是否在动态引用该函数时遇到了问题。编辑取自：

[https://github.com/akzhan/jwysiwyg](https://github.com/akzhan/jwysiwyg)

如果有人有更好的 jquery 编辑器建议我向他们开放，但是这个是小而好的，也是我想要的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:36:42.260

该[`.load()`](http://jqapi.com/#p=load)函数异步工作（请参阅[函数的源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.load)，它在`.ajax()`内部使用，`async`属性[默认为`true`](http://jqapi.com/#p=jQuery.ajax)）。这意味着在加载内容之前执行以下行。尝试在回调中初始化编辑器：

```
$('#customerForm').load(filename, function() {
  $('#noteArea').wysiwyg();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:36:51.460

使用[加载函数的完整回调](http://api.jquery.com/load/)：

```
$("#customerForm").html(loading).load(filename, function(){
$('#noteArea').wysiwyg();
}); 
```

# c++ - 使用 Windows API 写入 txt 文件

> ID：11558966
> 
> 赞同：0
> 
> 时间：2012-07-19T10:34:24.130
> 
> 标签：c++, winapi, writefile

我正在尝试通过 ATL 应用程序将一些行写入 txt 文件。下面是我使用的代码片段：

```
HANDLE hFile = CreateFile(ofn.lpstrFile, 
            GENERIC_READ | GENERIC_WRITE,
            0,
            NULL, 
            CREATE_ALWAYS,
            FILE_ATTRIBUTE_NORMAL,
            NULL);

        DWORD dwBytesWritten = 0;

        std::list<CString> helpList;
        std::list<CString>::iterator it;
        helpList.push_back(L"First Line\r\n");
        helpList.push_back(L"Second Line");

        for(it=helpList.begin(); it!=helpList.end(); ++it)
            WriteFile( hFile, (*it).GetString(), (*it).GetLength(), &dwBytesWritten, NULL );

        CloseHandle(hFile); 
```

尽管一切正常，但最终没有将任何内容写入文件。我应该在代码中更改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:42:42.493

几个问题：

1.  使用关闭文件句柄`CloseHandle()`
2.  的长度参数以`WriteFile()`字节为单位，但您正在指定字符。由于您使用的是宽字符，因此您需要将长度值乘以字符的大小。

# regex - 如何为此场景编写正则表达式模式

> ID：11558969
> 
> 赞同：1
> 
> 时间：2012-07-19T10:34:34.380
> 
> 标签：regex

我试图在下面的示例 xml 中找到特殊字符的外观。

```
<?xml version="1.0"?>
<PayLoad>
<requestRows>****</requestRows>
<requestRowLength>1272</requestRowLength>
<exceptionTimestamp>2012070202281068-0700</exceptionTimestamp>
<exceptionTimestamp>201$2070202281068-0700</exceptionTimestamp>
<exceptionTimestamp>20120(702022810680700</exceptionTimestamp>
<exceptionDetail>NO DATA AVAILABLE FOR TIME PERIOD SPECIFIED   =</exceptionDetail>
</PayLoad> 
```

我必须找到包含 $,(,=,- 字符的整个标签。为此，我在正则表达式模式下编写 `(<[\w\d]*>\w*(?<value>[^\w]+)\w*\d*</[\w\d]*>)` 了它，它返回以下输出（在 Expresso 工具中运行）

```
<requestRows>****</requestRows>
<exceptionTimestamp>2012070202281068-0700</exceptionTimestamp>
<exceptionTimestamp>20120(702022810680700</exceptionTimestamp> 
```

但它也应该返回低于两个 enrty。

```
<exceptionTimestamp>201$2070202281068-0700</exceptionTimestamp>
<exceptionDetail>NO DATA AVAILABLE FOR TIME PERIOD SPECIFIED   =</exceptionDetail> 
```

这些条目被省略，因为它包含多个特殊字符（包括空格）。谁能给我一个正确的正则表达式来解决上述情况。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:41:27.770

我会在中间部分使用环视，所以而不是

```
(<[\w\d]*>\w*(?<value>[^\w]+)\w*\d*</[\w\d]*>) 
```

我会用

```
(<[\w\d]*>(?=[^<]*[^<\w])(?<value>.*)</[\w\d]*>) 
```

没有`?<value>`我不真正认识语法的部分，这变成了

```
(<[\w\d]*>(?=[^<]*[^<\w]).*</[\w\d]*>) 
```

如果您想特别保存任何内容，只需在您喜欢的位置添加捕获组。

# cakephp - 验证数组中的数据

> ID：11558971
> 
> 赞同：0
> 
> 时间：2012-07-19T10:34:37.667
> 
> 标签：cakephp, validation

该`validates`方法可以验证用户定义的数组吗？例如：

*模型：*

```
App::uses('AppModel', 'Model');
class Recipe extends AppModel {
    public $validate = array(
        'price' => 'numeric'
    );
} 
```

*在控制器中：*

```
App::uses('AppController', 'Controller');
class RecipesController extends AppController {
    public function add() {
        if($this->request->is('post') && $this->request->data){
            $data = array('price' => $this->request->data['myprice']);
            $this->Reservation->validates($data); //validate the $data array
        }
        else{
            throw new NotFoundException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:48:21.663

对于手动验证，你应该试试这个：

```
$this->Reservation->set( $data);
if($this->Reservation->validates(){
 //your code
}else{ 
    $this->validateErrors($this->Reservation);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:41:39.653

在您的控制器中，您可以使用这样的字段列表：

```
 if ($this->Model->validates(array(
                    'fieldList' => array(
                        'reason',
                        'name',
                        'message',
                    )
                ))) {

                } 
```

希望这就是你要找的。

# c# - 将 J2C(Jpeg 2000) 图像转换为 JPEG

> ID：11558977
> 
> 赞同：0
> 
> 时间：2012-07-19T10:34:48.973
> 
> 标签：c#, asp.net, image-conversion

我有一堆 Jpeg 2000 格式（J2C）的图像。我需要在浏览器中显示这些图像，因此我必须将这些图像转换为简单的 JPEG 格式。我想知道 C# 是否有一些内置机制来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:58:35.997

看看[FreeImage](http://freeimage.sourceforge.net/)。不要以为 c# 内置了对 JP2 的支持

# google-chrome-extension - 如何使用安装项目安装 Safari 扩展程序？

> ID：11558978
> 
> 赞同：1
> 
> 时间：2012-07-19T10:35:01.557
> 
> 标签：google-chrome-extension, firefox-addon, setup-project, safari-extension

我有一个可用的 safari 扩展程序，我可以通过在 safari 网络浏览器上拖动它来手动安装它。我想知道如何以编程方式安装它。我已经为 firefox、chrome 和 IE 做了这个。在 Firefox 中，只需将您的 .xpi 文件复制到 Windows 7 中的此文件夹（“C:\Users\admin\AppData\Roaming\Mozilla\Firefox\Profiles\xxx.default\extensions”），您的扩展程序就会被安装。

在 chrome 中你必须编写这些注册表项

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Google\Chrome\Extensions\dlilbimladfdhkfbbcbjjnbleakbogef]
"version"="3.6"
"path"="C:\\extension.crx" 
```

但是在 safari 中，当我将 .safariextz 文件复制到此文件夹“C:\Users\admin\AppData\Local\Apple Computer\Safari\Extensions”时，未安装扩展名。任何人都可以指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:04:25.090

在文件夹中：

> ~\Users\\AppData\Local\Apple Computer\Safari\Extensions

有一个名为**Extensions.plist**的文件，您还需要在此文件中为您的扩展添加一个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:58:10.473

“~\Users\AppData\Local\Apple Computer\Safari\Extensions”文件夹中的 Extension.plist 是一个二进制文件。为了阅读和添加一个条目，我们可以使用这个类。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;
using System.Text;

namespace PlistCS
{
public static class Plist
{
    private static List<int> offsetTable = new List<int>();
    private static List<byte> objectTable = new List<byte>();
    private static int refCount;
    private static int objRefSize;
    private static int offsetByteSize;
    private static long offsetTableOffset;

    #region Public Functions

    public static object readPlist(string path)
    {
        using (FileStream f = new FileStream(path, FileMode.Open, FileAccess.Read))
        {
            return readPlist(f);
        }
    }

    public static object readPlistSource(string source)
    {
        return readPlist(System.Text.Encoding.UTF8.GetBytes(source));
    }

    public static object readPlist(byte[] data)
    {
        return readPlist(new MemoryStream(data));
    }

    public static plistType getPlistType(Stream stream)
    {
        byte[] magicHeader = new byte[8];
        stream.Read(magicHeader, 0, 8);

        if (BitConverter.ToInt64(magicHeader, 0) == 3472403351741427810)
        {
            return plistType.Binary;
        }
        else
        {
            return plistType.Xml;
        }
    }

    public static object readPlist(Stream stream, plistType type = plistType.Auto)
    {
        if (type == plistType.Auto)
        {
            type = getPlistType(stream);
            stream.Seek(0, SeekOrigin.Begin);
        }

        if (type == plistType.Binary)
        {
            using (BinaryReader reader = new BinaryReader(stream))
            {
                byte[] data = reader.ReadBytes((int)reader.BaseStream.Length);
                return readBinary(data);
            }
        }
        else
        {
            using (BinaryReader reader = new BinaryReader(stream))
            {
                byte[] data = reader.ReadBytes((int)reader.BaseStream.Length);
                return readBinary(data);
            }
        }
    }

    public static void writeBinary(object value, string path)
    {
        using (BinaryWriter writer = new BinaryWriter(new FileStream(path, FileMode.Create)))
        {
            writer.Write(writeBinary(value));
        }
    }

    public static void writeBinary(object value, Stream stream)
    {
        using (BinaryWriter writer = new BinaryWriter(stream))
        {
            writer.Write(writeBinary(value));
        }
    }

    public static byte[] writeBinary(object value)
    {
        offsetTable.Clear();
        objectTable.Clear();
        refCount = 0;
        objRefSize = 0;
        offsetByteSize = 0;
        offsetTableOffset = 0;

        //Do not count the root node, subtract by 1
        int totalRefs = countObject(value) - 1;

        refCount = totalRefs;

        objRefSize = RegulateNullBytes(BitConverter.GetBytes(refCount)).Length;

        composeBinary(value);

        writeBinaryString("bplist00", false);

        offsetTableOffset = (long)objectTable.Count;

        offsetTable.Add(objectTable.Count - 8);

        offsetByteSize = RegulateNullBytes(BitConverter.GetBytes(offsetTable[offsetTable.Count - 1])).Length;

        List<byte> offsetBytes = new List<byte>();

        offsetTable.Reverse();

        for (int i = 0; i < offsetTable.Count; i++)
        {
            offsetTable[i] = objectTable.Count - offsetTable[i];
            byte[] buffer = RegulateNullBytes(BitConverter.GetBytes(offsetTable[i]), offsetByteSize);
            Array.Reverse(buffer);
            offsetBytes.AddRange(buffer);
        }

        objectTable.AddRange(offsetBytes);

        objectTable.AddRange(new byte[6]);
        objectTable.Add(Convert.ToByte(offsetByteSize));
        objectTable.Add(Convert.ToByte(objRefSize));

        var a = BitConverter.GetBytes((long)totalRefs + 1);
        Array.Reverse(a);
        objectTable.AddRange(a);

        objectTable.AddRange(BitConverter.GetBytes((long)0));
        a = BitConverter.GetBytes(offsetTableOffset);
        Array.Reverse(a);
        objectTable.AddRange(a);

        return objectTable.ToArray();
    }

    #endregion

    #region Private Functions

    private static object readBinary(byte[] data)
    {
        offsetTable.Clear();
        List<byte> offsetTableBytes = new List<byte>();
        objectTable.Clear();
        refCount = 0;
        objRefSize = 0;
        offsetByteSize = 0;
        offsetTableOffset = 0;

        List<byte> bList = new List<byte>(data);

        List<byte> trailer = bList.GetRange(bList.Count - 32, 32);

        parseTrailer(trailer);

        objectTable = bList.GetRange(0, (int)offsetTableOffset);

        offsetTableBytes = bList.GetRange((int)offsetTableOffset, bList.Count - (int)offsetTableOffset - 32);

        parseOffsetTable(offsetTableBytes);

        return parseBinary(0);
    }

    private static int countObject(object value)
    {
        int count = 0;
        switch (value.GetType().ToString())
        {
            case "System.Collections.Generic.Dictionary`2[System.String,System.Object]":
                Dictionary<string, object> dict = (Dictionary<string, object>)value;
                foreach (string key in dict.Keys)
                {
                    count += countObject(dict[key]);
                }
                count += dict.Keys.Count;
                count++;
                break;
            case "System.Collections.Generic.List`1[System.Object]":
                List<object> list = (List<object>)value;
                foreach (object obj in list)
                {
                    count += countObject(obj);
                }
                count++;
                break;
            default:
                count++;
                break;
        }
        return count;
    }

    private static byte[] writeBinaryDictionary(Dictionary<string, object> dictionary)
    {
        List<byte> buffer = new List<byte>();
        List<byte> header = new List<byte>();
        List<int> refs = new List<int>();
        for (int i = dictionary.Count - 1; i >= 0; i--)
        {
            var o = new object[dictionary.Count];
            dictionary.Values.CopyTo(o, 0);
            composeBinary(o[i]);
            offsetTable.Add(objectTable.Count);
            refs.Add(refCount);
            refCount--;
        }
        for (int i = dictionary.Count - 1; i >= 0; i--)
        {
            var o = new string[dictionary.Count];
            dictionary.Keys.CopyTo(o, 0);
            composeBinary(o[i]);//);
            offsetTable.Add(objectTable.Count);
            refs.Add(refCount);
            refCount--;
        }

        if (dictionary.Count < 15)
        {
            header.Add(Convert.ToByte(0xD0 | Convert.ToByte(dictionary.Count)));
        }
        else
        {
            header.Add(0xD0 | 0xf);
            header.AddRange(writeBinaryInteger(dictionary.Count, false));
        }

        foreach (int val in refs)
        {
            byte[] refBuffer = RegulateNullBytes(BitConverter.GetBytes(val), objRefSize);
            Array.Reverse(refBuffer);
            buffer.InsertRange(0, refBuffer);
        }

        buffer.InsertRange(0, header);

        objectTable.InsertRange(0, buffer);

        return buffer.ToArray();
    }

    private static byte[] composeBinaryArray(List<object> objects)
    {
        List<byte> buffer = new List<byte>();
        List<byte> header = new List<byte>();
        List<int> refs = new List<int>();

        for (int i = objects.Count - 1; i >= 0; i--)
        {
            composeBinary(objects[i]);
            offsetTable.Add(objectTable.Count);
            refs.Add(refCount);
            refCount--;
        }

        if (objects.Count < 15)
        {
            header.Add(Convert.ToByte(0xA0 | Convert.ToByte(objects.Count)));
        }
        else
        {
            header.Add(0xA0 | 0xf);
            header.AddRange(writeBinaryInteger(objects.Count, false));
        }

        foreach (int val in refs)
        {
            byte[] refBuffer = RegulateNullBytes(BitConverter.GetBytes(val), objRefSize);
            Array.Reverse(refBuffer);
            buffer.InsertRange(0, refBuffer);
        }

        buffer.InsertRange(0, header);

        objectTable.InsertRange(0, buffer);

        return buffer.ToArray();
    }

    private static byte[] composeBinary(object obj)
    {
        byte[] value;
        switch (obj.GetType().ToString())
        {
            case "System.Collections.Generic.Dictionary`2[System.String,System.Object]":
                value = writeBinaryDictionary((Dictionary<string, object>)obj);
                return value;

            case "System.Collections.Generic.List`1[System.Object]":
                value = composeBinaryArray((List<object>)obj);
                return value;

            case "System.Byte[]":
                value = writeBinaryByteArray((byte[])obj);
                return value;

            case "System.Double":
                value = writeBinaryDouble((double)obj);
                return value;

            case "System.Int32":
                value = writeBinaryInteger((int)obj, true);
                return value;

            case "System.String":
                value = writeBinaryString((string)obj, true);
                return value;

            case "System.DateTime":
                value = writeBinaryDate((DateTime)obj);
                return value;

            case "System.Boolean":
                value = writeBinaryBool((bool)obj);
                return value;

            default:
                return new byte[0];
        }
    }

    public static byte[] writeBinaryDate(DateTime obj)
    {
        List<byte> buffer = new List<byte>(RegulateNullBytes(BitConverter.GetBytes(PlistDateConverter.ConvertToAppleTimeStamp(obj)), 8));
        buffer.Reverse();
        buffer.Insert(0, 0x33);
        objectTable.InsertRange(0, buffer);
        return buffer.ToArray();
    }

    public static byte[] writeBinaryBool(bool obj)
    {
        List<byte> buffer = new List<byte>(new byte[1] { (bool)obj ? (byte)9 : (byte)8 });
        objectTable.InsertRange(0, buffer);
        return buffer.ToArray();
    }

    private static byte[] writeBinaryInteger(int value, bool write)
    {
        List<byte> buffer = new List<byte>(BitConverter.GetBytes((long)value));
        buffer = new List<byte>(RegulateNullBytes(buffer.ToArray()));
        while (buffer.Count != Math.Pow(2, Math.Log(buffer.Count) / Math.Log(2)))
            buffer.Add(0);
        int header = 0x10 | (int)(Math.Log(buffer.Count) / Math.Log(2));

        buffer.Reverse();

        buffer.Insert(0, Convert.ToByte(header));

        if (write)
            objectTable.InsertRange(0, buffer);

        return buffer.ToArray();
    }

    private static byte[] writeBinaryDouble(double value)
    {
        List<byte> buffer = new List<byte>(RegulateNullBytes(BitConverter.GetBytes(value), 4));
        while (buffer.Count != Math.Pow(2, Math.Log(buffer.Count) / Math.Log(2)))
            buffer.Add(0);
        int header = 0x20 | (int)(Math.Log(buffer.Count) / Math.Log(2));

        buffer.Reverse();

        buffer.Insert(0, Convert.ToByte(header));

        objectTable.InsertRange(0, buffer);

        return buffer.ToArray();
    }

    private static byte[] writeBinaryByteArray(byte[] value)
    {
        List<byte> buffer = new List<byte>(value);
        List<byte> header = new List<byte>();
        if (value.Length < 15)
        {
            header.Add(Convert.ToByte(0x40 | Convert.ToByte(value.Length)));
        }
        else
        {
            header.Add(0x40 | 0xf);
            header.AddRange(writeBinaryInteger(buffer.Count, false));
        }

        buffer.InsertRange(0, header);

        objectTable.InsertRange(0, buffer);

        return buffer.ToArray();
    }

    private static byte[] writeBinaryString(string value, bool head)
    {
        List<byte> buffer = new List<byte>();
        List<byte> header = new List<byte>();
        foreach (char chr in value.ToCharArray())
            buffer.Add(Convert.ToByte(chr));

        if (head)
        {
            if (value.Length < 15)
            {
                header.Add(Convert.ToByte(0x50 | Convert.ToByte(value.Length)));
            }
            else
            {
                header.Add(0x50 | 0xf);
                header.AddRange(writeBinaryInteger(buffer.Count, false));
            }
        }

        buffer.InsertRange(0, header);

        objectTable.InsertRange(0, buffer);

        return buffer.ToArray();
    }

    private static byte[] RegulateNullBytes(byte[] value)
    {
        return RegulateNullBytes(value, 1);
    }

    private static byte[] RegulateNullBytes(byte[] value, int minBytes)
    {
        Array.Reverse(value);
        List<byte> bytes = new List<byte>(value);
        for (int i = 0; i < bytes.Count; i++)
        {
            if (bytes[i] == 0 && bytes.Count > minBytes)
            {
                bytes.Remove(bytes[i]);
                i--;
            }
            else
                break;
        }

        if (bytes.Count < minBytes)
        {
            int dist = minBytes - bytes.Count;
            for (int i = 0; i < dist; i++)
                bytes.Insert(0, 0);
        }

        value = bytes.ToArray();
        Array.Reverse(value);
        return value;
    }

    private static void parseTrailer(List<byte> trailer)
    {
        offsetByteSize = BitConverter.ToInt32(RegulateNullBytes(trailer.GetRange(6, 1).ToArray(), 4), 0);
        objRefSize = BitConverter.ToInt32(RegulateNullBytes(trailer.GetRange(7, 1).ToArray(), 4), 0);
        byte[] refCountBytes = trailer.GetRange(12, 4).ToArray();
        Array.Reverse(refCountBytes);
        refCount = BitConverter.ToInt32(refCountBytes, 0);
        byte[] offsetTableOffsetBytes = trailer.GetRange(24, 8).ToArray();
        Array.Reverse(offsetTableOffsetBytes);
        offsetTableOffset = BitConverter.ToInt64(offsetTableOffsetBytes, 0);
    }

    private static void parseOffsetTable(List<byte> offsetTableBytes)
    {
        for (int i = 0; i < offsetTableBytes.Count; i += offsetByteSize)
        {
            byte[] buffer = offsetTableBytes.GetRange(i, offsetByteSize).ToArray();
            Array.Reverse(buffer);
            offsetTable.Add(BitConverter.ToInt32(RegulateNullBytes(buffer, 4), 0));
        }
    }

    private static object parseBinaryDictionary(int objRef)
    {
        Dictionary<string, object> buffer = new Dictionary<string, object>();
        List<int> refs = new List<int>();
        int refCount = 0;

        byte dictByte = objectTable[offsetTable[objRef]];

        int refStartPosition;
        refCount = getCount(offsetTable[objRef], out refStartPosition);

        if (refCount < 15)
            refStartPosition = offsetTable[objRef] + 1;
        else
            refStartPosition = offsetTable[objRef] + 2 + RegulateNullBytes(BitConverter.GetBytes(refCount), 1).Length;

        for (int i = refStartPosition; i < refStartPosition + refCount * 2 * objRefSize; i += objRefSize)
        {
            byte[] refBuffer = objectTable.GetRange(i, objRefSize).ToArray();
            Array.Reverse(refBuffer);
            refs.Add(BitConverter.ToInt32(RegulateNullBytes(refBuffer, 4), 0));
        }

        for (int i = 0; i < refCount; i++)
        {
            buffer.Add((string)parseBinary(refs[i]), parseBinary(refs[i + refCount]));
        }

        return buffer;
    }

    private static object parseBinaryArray(int objRef)
    {
        List<object> buffer = new List<object>();
        List<int> refs = new List<int>();
        int refCount = 0;

        byte arrayByte = objectTable[offsetTable[objRef]];

        int refStartPosition;
        refCount = getCount(offsetTable[objRef], out refStartPosition);

        if (refCount < 15)
            refStartPosition = offsetTable[objRef] + 1;
        else
            //The following integer has a header aswell so we increase the refStartPosition by two to account for that.
            refStartPosition = offsetTable[objRef] + 2 + RegulateNullBytes(BitConverter.GetBytes(refCount), 1).Length;

        for (int i = refStartPosition; i < refStartPosition + refCount * objRefSize; i += objRefSize)
        {
            byte[] refBuffer = objectTable.GetRange(i, objRefSize).ToArray();
            Array.Reverse(refBuffer);
            refs.Add(BitConverter.ToInt32(RegulateNullBytes(refBuffer, 4), 0));
        }

        for (int i = 0; i < refCount; i++)
        {
            buffer.Add(parseBinary(refs[i]));
        }

        return buffer;
    }

    private static int getCount(int bytePosition, out int newBytePosition)
    {
        byte headerByte = objectTable[bytePosition];
        byte headerByteTrail = Convert.ToByte(headerByte & 0xf);
        int count;
        if (headerByteTrail < 15)
        {
            count = headerByteTrail;
            newBytePosition = bytePosition + 1;
        }
        else
            count = (int)parseBinaryInt(bytePosition + 1, out newBytePosition);
        return count;
    }

    private static object parseBinary(int objRef)
    {
        byte header = objectTable[offsetTable[objRef]];
        switch (header & 0xF0)
        {
            case 0:
                {
                    //If the byte is
                    //0 return null
                    //9 return true
                    //8 return false
                    return (objectTable[offsetTable[objRef]] == 0) ? (object)null : ((objectTable[offsetTable[objRef]] == 9) ? true : false);
                }
            case 0x10:
                {
                    return parseBinaryInt(offsetTable[objRef]);
                }
            case 0x20:
                {
                    return parseBinaryReal(offsetTable[objRef]);
                }
            case 0x30:
                {
                    return parseBinaryDate(offsetTable[objRef]);
                }
            case 0x40:
                {
                    return parseBinaryByteArray(offsetTable[objRef]);
                }
            case 0x50://String ASCII
                {
                    return parseBinaryAsciiString(offsetTable[objRef]);
                }
            case 0x60://String Unicode
                {
                    return parseBinaryUnicodeString(offsetTable[objRef]);
                }
            case 0xD0:
                {
                    return parseBinaryDictionary(objRef);
                }
            case 0xA0:
                {
                    return parseBinaryArray(objRef);
                }
        }
        throw new Exception("This type is not supported");
    }

    public static object parseBinaryDate(int headerPosition)
    {
        byte[] buffer = objectTable.GetRange(headerPosition + 1, 8).ToArray();
        Array.Reverse(buffer);
        double appleTime = BitConverter.ToDouble(buffer, 0);
        DateTime result = PlistDateConverter.ConvertFromAppleTimeStamp(appleTime);
        return result;
    }

    private static object parseBinaryInt(int headerPosition)
    {
        int output;
        return parseBinaryInt(headerPosition, out output);
    }

    private static object parseBinaryInt(int headerPosition, out int newHeaderPosition)
    {
        byte header = objectTable[headerPosition];
        int byteCount = (int)Math.Pow(2, header & 0xf);
        byte[] buffer = objectTable.GetRange(headerPosition + 1, byteCount).ToArray();
        Array.Reverse(buffer);
        //Add one to account for the header byte
        newHeaderPosition = headerPosition + byteCount + 1;
        return BitConverter.ToInt32(RegulateNullBytes(buffer, 4), 0);
    }

    private static object parseBinaryReal(int headerPosition)
    {
        byte header = objectTable[headerPosition];
        int byteCount = (int)Math.Pow(2, header & 0xf);
        byte[] buffer = objectTable.GetRange(headerPosition + 1, byteCount).ToArray();
        Array.Reverse(buffer);

        return BitConverter.ToDouble(RegulateNullBytes(buffer, 8), 0);
    }

    private static object parseBinaryAsciiString(int headerPosition)
    {
        int charStartPosition;
        int charCount = getCount(headerPosition, out charStartPosition);

        var buffer = objectTable.GetRange(charStartPosition, charCount);
        return buffer.Count > 0 ? Encoding.ASCII.GetString(buffer.ToArray()) : string.Empty;
    }

    private static object parseBinaryUnicodeString(int headerPosition)
    {
        int charStartPosition;
        int charCount = getCount(headerPosition, out charStartPosition);
        charCount = charCount * 2;

        byte[] buffer = new byte[charCount];
        byte one, two;

        for (int i = 0; i < charCount; i += 2)
        {
            one = objectTable.GetRange(charStartPosition + i, 1)[0];
            two = objectTable.GetRange(charStartPosition + i + 1, 1)[0];

            if (BitConverter.IsLittleEndian)
            {
                buffer[i] = two;
                buffer[i + 1] = one;
            }
            else
            {
                buffer[i] = one;
                buffer[i + 1] = two;
            }
        }

        return Encoding.Unicode.GetString(buffer);
    }

    private static object parseBinaryByteArray(int headerPosition)
    {
        int byteStartPosition;
        int byteCount = getCount(headerPosition, out byteStartPosition);
        return objectTable.GetRange(byteStartPosition, byteCount).ToArray();
    }

    #endregion
}

public enum plistType
{
    Auto, Binary, Xml
}

public static class PlistDateConverter
{
    public static long timeDifference = 978307200;

    public static long GetAppleTime(long unixTime)
    {
        return unixTime - timeDifference;
    }

    public static long GetUnixTime(long appleTime)
    {
        return appleTime + timeDifference;
    }

    public static DateTime ConvertFromAppleTimeStamp(double timestamp)
    {
        DateTime origin = new DateTime(2001, 1, 1, 0, 0, 0, 0);
        return origin.AddSeconds(timestamp);
    }

    public static double ConvertToAppleTimeStamp(DateTime date)
    {
        DateTime begin = new DateTime(2001, 1, 1, 0, 0, 0, 0);
        TimeSpan diff = date - begin;
        return Math.Floor(diff.TotalSeconds);
    }
} 
```

}

并在 Installer.cs 类的提交操作中使用此方法添加扩展 Extension.plist 的条目

```
public void InstallSafariExt()
    {
        string safariExtPlist = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Apple Computer\\Safari\\Extensions\\Extensions.plist";
        string safariSetupPlist = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) + "\YourComp\\YourSoft\\Extensions.plist";

        string ExtDir = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Apple Computer\\Safari\\Extensions";
        if (!Directory.Exists(ExtDir))
        {
            Directory.CreateDirectory(ExtDir);
            if (!File.Exists(safariExtPlist))
            {
                File.Copy(safariSetupPlist, safariExtPlist);
            }
        }
        else
        {
            if (!File.Exists(safariExtPlist))
            {
                File.Copy(safariSetupPlist, safariExtPlist);
            }
        }

        object obj = Plist.readPlist(safariExtPlist);
        Dictionary<string, object> dict = (Dictionary<string, object>)obj;
        Dictionary<string, object> NewExt = new Dictionary<string, object>();
        NewExt.Add("Hidden Bars", new List<object>());
        NewExt.Add("Added Non-Default Toolbar Items", new List<object>());
        NewExt.Add("Enabled", true);
        NewExt.Add("Archive File Name", "YourExtName.safariextz");
        NewExt.Add("Removed Default Toolbar Items", new List<object>());
        NewExt.Add("Bundle Directory Name", "YourExtName.safariextension");
        List<object> listExt = (List<object>)dict["Installed Extensions"];
        listExt.Add(NewExt);
        Plist.writeBinary(obj, safariExtPlist);

        string safariExtFile = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) + "\YourComp\\YourSoft\\YourExtName.safariextz";
        string safariInstallfolder = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Apple Computer\\Safari\\Extensions\\YourExtName.safariextz";

        string[] safExtFiles = Directory.GetFiles(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Apple Computer\\Safari\\Extensions\\", "YourExtName*.safariextz");
        for (int i = 0; i < safExtFiles.Length; i++)
        {
            if (File.Exists(safExtFiles[i]))
                File.Delete(safExtFiles[i]);
        }

        File.Copy(safariExtFile, safariInstallfolder);
    } 
```

# router - 是否可以用任何调制解调器路由器替换 AliceBox DSL

> ID：11558979
> 
> 赞同：-2
> 
> 时间：2012-07-19T10:35:15.630
> 
> 标签：router, dsl, modem

此爱丽丝盒 (O2) 仅在德国使用，因此它可能具有依赖于国家/地区的规范。

对于家庭使用，我想用 linksys WRT54GL 替换标准的 Alice DSL 盒子，这是一个非常可配置的路由器，以使用服务质量 (QoS) 功能（我认为操作系统会是番茄）。

需要此 QoS，因为过多的视频流使我无法以合理的 ping (>250ms) 玩任何在线游戏。

我注意到“Alice IAD Freischalten”有一些奇怪的 PIN。我知道连接必须“解锁”，所以我不知道你是否可以因为这个限制更换设备。

我的子问题是：1-是否可以用linksys 1.1直接替换此路由器-如果是：我可以将电话连接到它吗？1.2 如果没有，QoS 是否适用于这种结构：ISP > aliceDSLBox(192.168.1.x) > WRT54GL(192.168.0.x) > 计算机 LAN 和 WLAN

非常感谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:08:43.227

最后，我分离了两个网络：AliceBox(192.168.0.x)，它连接到互联网，只传输到 WRT(192.168.1.x)。路由器将互联网连接转发到所有计算机。

我通过在 WRT 上安装 TomatoUSB 固件来激活 QoS。阅读指南和调整参数需要很长时间才能正确使用。

最后，我解决了我的 ping 问题，除了大量 VOIP 和 skype（“like”）消息传递的情况，这种情况并不经常发生。我可以玩游戏，和室友打电话给家人，流媒体和无休止地看 youtube:)

# java - 连接到 REST API

> ID：11558980
> 
> 赞同：1
> 
> 时间：2012-07-19T10:35:16.123
> 
> 标签：java, rest

我在通过他们的 REST API 与 Tradeshift（一家丹麦公司）连接时遇到问题。我有连接所需的信息（令牌、令牌秘密和获取 ID）

这是一个 HTTP 服务，我发送了 HTTP 请求（post、get 和 put），但我没有得到第一个响应（200 OK）说我已连接。

当我使用一个干净的可执行文件获得登录所需信息的公司时，我发送了一个请求，它显示一个错误：无效的令牌（这是公司提供的信息）。

我还尝试使用自己编写的 java 程序进行连接。我用记事本++写的。当我编译并在命令行中运行程序时，我得到了错误。进口是自动进行的还是我必须做其他事情？

我的程序如下：

```
package com.tradeshift.api.client;
import com.sun.jersey.api.client.*;
import com.sun.jersey.oauth.client.OAuthClientFilter;
import com.sun.jersey.oauth.signature.OAuthParameters;
import com.sun.jersey.oauth.signature.OAuthSecrets;

public class Sample {

    public static final String HOSTNAME = "https://api-sandbox.tradeshift.com";
    public static final String CONSUMER_KEY = "OwnAccount"; 
    public static final String CONSUMER_SECRET = "OwnAccount";
    public static final String TOKEN = "8Hx7xGR4kmH7Tj2K-Q+39Mrsm6DQ-s";
    public static final String TOKEN_SECRET = "4tUzAVSrBrPXD+a94vEtDW7NcH7XWQXYY7fgcXb@";
    public static final String TENANT_ID = "b59a01fa-8dd7-4d8a-b175-4c72b4a6c891";

    public static void main(String[] args) {

        Client client = Client.create();

        OAuthParameters params = new OAuthParameters().signatureMethod("HMACSHA1").consumerKey(CONSUMER_KEY).token(TOKEN).version();
        OAuthSecrets secrets = new     OAuthSecrets().consumerSecret(CONSUMER_SECRET).tokenSecret(TOKEN_SECRET);
        OAuthClientFilter filter = new OAuthClientFilter(client.getProviders(),    params, secrets);

        WebResource res = client.resource(HOSTNAME + "/tradeshift/rest/external/network/connections");
        res.addFilter(filter);

        String networkResult = res.header("X-Tradeshift-TenantId", TENANT_ID).header("User    Agent", "TradeshiftJerseyTest/0.1").get(String.class);
        System.out.println(networkResult);
    }
} 
```

# excel - 删除excel中的特定列

> ID：11558983
> 
> 赞同：0
> 
> 时间：2012-07-19T10:35:27.967
> 
> 标签：excel

我有一个以下格式的excel表：

![excel文件](../Images/c46786e4e021027ec8889131658faebf.png)

我只想删除那些在第一行（“A”）中没有值 1 的列。我知道要删除一列，我可以使用以下内容：

```
Columns("E:E").Select
Selection.Delete Shift:=xlToLeft 
```

任何帮助都会很棒。

一些给我错误的解决方案是：

```
Sub Delete_Column_Excel_VBA()
    Dim Firstcolumn, fcol As Long
    Dim Lastcolumn As Long

    With ActiveSheet
        .Select
        Firstcolumn = .UsedRange.Cells(1).Column
        Lastcolumn = .UsedRange.Columns(.UsedRange.Columns.Count).Column
        For fcol = Firstcolumn To Lastcolumn
            With .Cells(fcol, "1")
                If .value <> 1 Then .EntireColumn.Delete
            End With
        Next fcol
    End With 
```

如果我删除第一行中值不为 1 的那些列，我的表应该看起来像这样：

![excel表2](../Images/12f718372e9e731d0a76d41522ba29dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:20:09.650

尝试这个

```
Sub Delete_Column_Excel_VBA()
    Dim cl As Range, rng As Range

    For Each cl In ActiveSheet.UsedRange.Rows(1).Cells
        If cl <> 1 Then
            If rng Is Nothing Then
                Set rng = cl
            Else
                Set rng = Union(rng, cl)
            End If
        End If
    Next
    rng.EntireColumn.Delete
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:05:21.777

这修复了您的错误，但我认为在那之后仍然存在逻辑错误：

```
With .Cells(fcol, 1) 
```

Excel 期望引用以数字表示，而不是像您所做的那样以字符串形式表示。然后在你的`if`我认为它应该是相反的。您可能应该与“1”进行比较，否则它只会删除所有内容（在我的计算机上尝试过）。

# ruby - 特定的正则表达式没有正确替换反斜杠

> ID：11558994
> 
> 赞同：1
> 
> 时间：2012-07-19T10:36:13.347
> 
> 标签：ruby, regex

我正在尝试这样做

```
"love{ }&\abbc+".gsub(/([-\|!\(\)\{\}\[\]\^"~\*\?:\\&\+])/, '\\\1') 
```

得到这个输出

```
"love\{ \}&\\abbc\+" 
```

但我得到

```
"love\\1 \\1\\1\abbc\\1" 
```

在 irb. 我做错了什么（红宝石1.8.7）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:54:46.733

```
"love{ }&\abbc+".gsub(/([-\|!\(\)\{\}\[\]\^"~\*\?:\\&\+])/, "\\\\\\1") 
```

请参阅[http://www.ruby-forum.com/topic/143645](http://www.ruby-forum.com/topic/143645)了解为什么所有额外的转义是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:57:13.093

试试块形式吧？

```
"love{ }&\abbc+".gsub(/([-\|!\(\)\{\}\[\]\^"~\*\?:\\&\+])/) { |m| "\\#{m}" } 
```

# image - 带有 action=# 的表单的图像提交按钮

> ID：11558995
> 
> 赞同：0
> 
> 时间：2012-07-19T10:36:16.493
> 
> 标签：image, forms, button

我有一个运行良好的表单，我想更改提交按钮的外观，我尝试使用此代码将按钮更改为图像

```
 <input src="image.png" name="doRegister" type="image" value="Register"> 
```

但我遇到了一个错误，提交按钮没有做它应该做的事情，就像它忽略了一切

这是单击按钮时的代码

```
 if($_POST['doRegister'] == 'Register') 
           { 
          some manipulation
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:43:18.683

看看这里： [输入图像标签 - webdesign.about.com](http://webdesign.about.com/od/htmltags/p/input-image-tag.htm)

> 输入图像特别说明：
> 
> 当您使用 input type="image" 标签时，您是在告诉浏览器提交单击图像的 x 和 y 坐标。这允许您向表单添加图像映射类型功能。