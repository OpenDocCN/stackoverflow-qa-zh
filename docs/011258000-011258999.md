# StackOverflow 问答 11258000-11258999

# php - 使用 cakephp 在查找查询中区分大小写搜索

> ID：11258012
> 
> 赞同：2
> 
> 时间：2012-06-29T07:48:41.727
> 
> 标签：php, mysql, cakephp

我的查询是

```
$this->find('first', array('fields' => array('Staticpage.title', 'Staticpage.description'),'conditions' => array('Staticpage.url' => 'AUSTRALIA'))); 
```

它在日志中的显示

```
SELECT `Staticpage`.`title`, `Staticpage`.`description` FROM `staticpages` AS `Staticpage` WHERE `Staticpage`.`url` = 'AUSTRALIA' LIMIT 1 
```

但我需要搜索区分大小写，我的静态网址是“澳大利亚”，但我在任何情况下都输入了“澳大利亚”、“澳大利亚”，上面的查询给了我结果。

所以，我只是使用**BINARY 之**类的

```
$this->find('first', array('fields' => array('Staticpage.title', 'Staticpage.description'),'conditions' => array('BINARY Staticpage.url' => 'AUSTRALIA'))); 
```

它在日志中的显示

```
SELECT `Staticpage`.`title`, `Staticpage`.`description` FROM `staticpages` AS `Staticpage`   WHERE `BINARY` Staticpage.url = 'AUSTRALIA'    LIMIT 1 
```

所以，它不起作用。

如何在查找查询中使用 BINARY 编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-30T08:26:09.660

```
array("BINARY(Staticpage.url) LIKE" => "AUSTRALIA") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:17:07.713

你可以试试：

```
array("BINARY Staticpage.url = 'AUSTRALIA'") 
```

# .htaccess - .htaccess 身份验证如何通过 LDAP 与我的网站一起使用。cookie 和会话是如何设置的？

> ID：11258015
> 
> 赞同：1
> 
> 时间：2012-06-29T07:48:54.613
> 
> 标签：.htaccess, authentication, active-directory, ldap, http-authentication

我正在为我的网站使用 .htaccess 身份验证。使用 AD vi LDAP 进行身份验证后，如何在浏览器中创建经过身份验证的用户的会话和 cookie，以及重定向实际发生在我的网站的位置。请为此提供帮助或分享任何解释此过程的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:48:22.840

查看[BASIC 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)和[DIGEST 身份验证](http://en.wikipedia.org/wiki/Digest_access_authentication)的 wiki 页面，它们都是协议 (HTTP) 上的身份验证机制。基本上，这就是浏览器所看到的（此处重述）：

1.  尝试请求 URI，网络服务器回复 401 响应和`WWW-Authenticate`标头
2.  此标头包含一个 REALM，有点像一组都属于同一个身份验证领域的页面
3.  浏览器会弹出一个模式对话框，询问用户名和密码。
4.  根据 BASIC 或 DIGEST，该密码将与导致 401 的原始请求一起发送回网络服务器。
5.  如果凭据不正确，则会返回 403，并且浏览器会显示相应的错误消息。否则，网络服务器返回请求的页面。
6.  浏览器知道此 URL 属于 REALM，因此*每次*请求此 URL 时，都会自动随请求一起发送授权。
7.  如果浏览器请求其他也需要身份验证的东西，并且它属于同一个 REALM，则当 Web 服务器返回 401 和 REALM 时，浏览器将自动发送授权。

使用 REALM 信息和凭据列表配置 Web 服务器的方式各不相同。它可以连接到 LDAP 数据库、活动目录、带有散列密码的平面文件等。

这与 cookie 或其他 webapp 级别的身份验证不同，因为它不使用 HTTP 协议进行身份验证。webapp 有一个包含用户名和密码表单的页面，这些表单通过 POST/GET 请求作为参数发送，由 webapp 确定这些凭据是否有效。如果它们是有效的，webapp 可以选择将会话 ID 存储为 cookie，以便浏览器可以继续浏览 webapp 提供的页面。

此身份验证与 HTTP 身份验证之间的最终用户区别之一是 webapp 可以删除 cookie，或使该会话无效，实质上是将用户从 webapp 中注销。这在 HTTP 身份验证中实际上是不可能的，因为浏览器在请求同一 REALM 下的页面时会盲目地提交授权标头。解决此问题的一种方法是在请求受保护的页面时使网络服务器强制返回 403。

另一个区别是，使用 HTTP 身份验证时，您可以在 URL 中包含用户名/密码。[http://user:pass@host.com 身份验证如何工作？](https://stackoverflow.com/questions/7835992/how-does-http-userpasshost-com-authentication-work)

另请参阅：[http](http://blog.distributedmatter.net/post/2008/06/09/HTTP-authentication-mechanisms-and-how-they-could-work-in-Restlet) ://blog.distributedmatter.net/post/2008/06/09/HTTP-authentication-mechanisms-and-how-they-could-work-in-Restlet ，以获得对一般身份验证的更完整描述。

# wcf - 如何在 azure 平台和/或模拟器中更改机器配置中的超时？

> ID：11258016
> 
> 赞同：1
> 
> 时间：2012-06-29T07:48:55.250
> 
> 标签：wcf, azure, config

我们在 azure webrole 中托管 WCF 服务。如果我们想发送大文件，我们会得到一个 timeoutException。我们在客户端和服务器端的配置文件中调整了发送和接收超时。

即使在这些调整之后，这个异常仍然在 +- 10 分钟后发生。

我们认为我们必须在 azure 中调整机器配置，但我们不知道该怎么做。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:03:14.213

您可能正在使用 blob。

使用 blob，您可以指定一个 BlobRequestOptions，其中包含一个超时值。

尝试像这样更改它：

```
BlobRequestOptions largeBlobDownloadOptions = new BlobRequestOptions()
{
  Timeout = TimeSpan.FromMinutes(60) // Larger timeout for larger file
};

blob.DownloadToFile(largeBlobDownloadOptions); 
```

# c - 从 iso-8859-15 (Latin9) 到 UTF-8 的转换？

> ID：11258019
> 
> 赞同：2
> 
> 时间：2012-06-29T07:49:07.800
> 
> 标签：c, linux, utf-8, transcoding, latin9

我需要将一些用 Latin9 字符集格式化的字符串转换为 UTF-8。我不能使用 iconv，因为它不包含在我的嵌入式系统中。你知道是否有一些可用的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:07:34.757

`1`Latin-9 (ISO-8859-15) 和 UTF-8中的代码点`127`相同。

Latin-9 中的代码点`164`是 U+20AC，\xe2\x82\xac =`226 130 172`在 UTF-8 中。
Latin-9 中的代码点`166`是 U+0160，\xc5\xa0 =`197 160`在 UTF-8 中。
Latin-9 中的代码点`168`是 U+0161，\xc5\xa1 =`197 161`在 UTF-8 中。
Latin-9 中的代码点`180`是 U+017D，\xc5\xbd =`197 189`在 UTF-8 中。
Latin-9 中的代码点`184`是 U+017E，\xc5\xbe =`197 190`在 UTF-8 中。
Latin-9 中的代码点`188`是 U+0152，\xc5\x92 =`197 146`在 UTF-8 中。
Latin-9 中的代码点`189`是 U+0153，\xc5\x93 =`197 147`在 UTF-8 中。
Latin-9 中的代码点`190`是 U+0178，\xc5\xb8 =`197 184`在 UTF-8 中。

Latin-9 中的代码点`128 .. 191`（除了上面列出的那些）都映射到`194 128 .. 194 191`UTF-8 中的 \xc2\x80 .. \xc2\xbf =。

Latin-9 中的代码点`192 .. 255`都映射到`195 128 .. 195 191`UTF-8 中的 \xc3\x80 .. \xc3\xbf =。

这意味着 Latin-9 代码点 1..127 在 UTF-8 中是一个字节长，代码点 164 是三个字节长，其余（128..163 和 165..255）是两个字节长。

如果您首先扫描 Latin-9 输入字符串，您可以确定生成的 UTF-8 字符串的长度。如果您想要或需要 - 毕竟您正在使用嵌入式系统 - 您可以就地进行转换，从头到尾向后工作。

编辑：

这里有两个函数可以用于转换。这些会返回您`free()`在使用后需要的动态分配的副本。它们仅`NULL`在发生错误时返回（内存不足，`errno == ENOMEM`）。如果给定`NULL`要转换的字符串或空字符串，则函数返回一个空的动态分配的字符串。

换句话说，`free()`当你完成它们时，你应该总是调用这些函数返回的指针。（`free(NULL)`被允许并且什么都不做。）

已验证生成与输入不包含零字节`latin9_to_utf8()`完全相同的输出。`iconv`该函数使用标准C 字符串，即零字节表示字符串结束。

已验证生成与输入仅包含 ISO-8859-15 中的 Unicode 代码点且不包含零字节的输出`utf8_to_latin9()`完全相同的输出。`iconv`当给定随机 UTF-8 字符串时，该函数将 Latin-1 中的八个代码点映射到 Latin-9 等价物，即货币符号到欧元；iconv 要么忽略它们，要么考虑这些错误。

该`utf8_to_latin9()`行为意味着这些函数适用于*-* `Latin 1` > `UTF-8`->`Latin 1` *和* `Latin 9`-> `UTF-8`->`Latin9`往返。

```
#include <stdlib.h>     /* for realloc() and free() */
#include <string.h>     /* for memset() */
#include <errno.h>      /* for errno */

/* Create a dynamically allocated copy of string,
 * changing the encoding from ISO-8859-15 to UTF-8.
*/
char *latin9_to_utf8(const char *const string)
{
    char   *result;
    size_t  n = 0;

    if (string) {
        const unsigned char  *s = (const unsigned char *)string;

        while (*s)
            if (*s < 128) {
                s++;
                n += 1;
            } else
            if (*s == 164) {
                s++;
                n += 3;
            } else {
                s++;
                n += 2;
            }
    }

    /* Allocate n+1 (to n+7) bytes for the converted string. */
    result = malloc((n | 7) + 1);
    if (!result) {
        errno = ENOMEM;
        return NULL;
    }

    /* Clear the tail of the string, setting the trailing NUL. */
    memset(result + (n | 7) - 7, 0, 8);

    if (n) {
        const unsigned char  *s = (const unsigned char *)string;
        unsigned char        *d = (unsigned char *)result;

        while (*s)
            if (*s < 128) {
                *(d++) = *(s++);
            } else
            if (*s < 192) switch (*s) {
                case 164: *(d++) = 226; *(d++) = 130; *(d++) = 172; s++; break;
                case 166: *(d++) = 197; *(d++) = 160; s++; break;
                case 168: *(d++) = 197; *(d++) = 161; s++; break;
                case 180: *(d++) = 197; *(d++) = 189; s++; break;
                case 184: *(d++) = 197; *(d++) = 190; s++; break;
                case 188: *(d++) = 197; *(d++) = 146; s++; break;
                case 189: *(d++) = 197; *(d++) = 147; s++; break;
                case 190: *(d++) = 197; *(d++) = 184; s++; break;
                default:  *(d++) = 194; *(d++) = *(s++); break;
            } else {
                *(d++) = 195;
                *(d++) = *(s++) - 64;
            }
    }

    /* Done. Remember to free() the resulting string when no longer needed. */
    return result;
}

/* Create a dynamically allocated copy of string,
 * changing the encoding from UTF-8 to ISO-8859-15.
 * Unsupported code points are ignored.
*/
char *utf8_to_latin9(const char *const string)
{
    size_t         size = 0;
    size_t         used = 0;
    unsigned char *result = NULL;

    if (string) {
        const unsigned char  *s = (const unsigned char *)string;

        while (*s) {

            if (used >= size) {
                void *const old = result;

                size = (used | 255) + 257;
                result = realloc(result, size);
                if (!result) {
                    if (old)
                        free(old);
                    errno = ENOMEM;
                    return NULL;
                }
            }

            if (*s < 128) {
                result[used++] = *(s++);
                continue;

            } else
            if (s[0] == 226 && s[1] == 130 && s[2] == 172) {
                result[used++] = 164;
                s += 3;
                continue;

            } else
            if (s[0] == 194 && s[1] >= 128 && s[1] <= 191) {
                result[used++] = s[1];
                s += 2;
                continue;

            } else
            if (s[0] == 195 && s[1] >= 128 && s[1] <= 191) {
                result[used++] = s[1] + 64;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 160) {
                result[used++] = 166;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 161) {
                result[used++] = 168;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 189) {
                result[used++] = 180;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 190) {
                result[used++] = 184;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 146) {
                result[used++] = 188;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 147) {
                result[used++] = 189;
                s += 2;
                continue;

            } else
            if (s[0] == 197 && s[1] == 184) {
                result[used++] = 190;
                s += 2;
                continue;

            }

            if (s[0] >= 192 && s[0] < 224 &&
                s[1] >= 128 && s[1] < 192) {
                s += 2;
                continue;
            } else
            if (s[0] >= 224 && s[0] < 240 &&
                s[1] >= 128 && s[1] < 192 &&
                s[2] >= 128 && s[2] < 192) {
                s += 3;
                continue;
            } else
            if (s[0] >= 240 && s[0] < 248 &&
                s[1] >= 128 && s[1] < 192 &&
                s[2] >= 128 && s[2] < 192 &&
                s[3] >= 128 && s[3] < 192) {
                s += 4;
                continue;
            } else
            if (s[0] >= 248 && s[0] < 252 &&
                s[1] >= 128 && s[1] < 192 &&
                s[2] >= 128 && s[2] < 192 &&
                s[3] >= 128 && s[3] < 192 &&
                s[4] >= 128 && s[4] < 192) {
                s += 5;
                continue;
            } else
            if (s[0] >= 252 && s[0] < 254 &&
                s[1] >= 128 && s[1] < 192 &&
                s[2] >= 128 && s[2] < 192 &&
                s[3] >= 128 && s[3] < 192 &&
                s[4] >= 128 && s[4] < 192 &&
                s[5] >= 128 && s[5] < 192) {
                s += 6;
                continue;
            }

            s++;
        }
    }

    {
        void *const old = result;

        size = (used | 7) + 1;

        result = realloc(result, size);
        if (!result) {
            if (old)
                free(old);
            errno = ENOMEM;
            return NULL;
        }

        memset(result + used, 0, size - used);
    }

    return (char *)result;
} 
```

虽然`iconv()`通常是字符集转换的正确解决方案，但上述两个函数在嵌入式或其他受限环境中肯定很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:18:26.000

创建从 128-255 latin9 代码到 UTF-8 字节序列的转换表应该相对容易。你甚至可以使用 iconv 来做到这一点。或者，您可以使用 128-255 latin9 代码创建一个文件，并使用适当的文本编辑器将其转换为 UTF-8。然后您可以使用这些数据来构建转换表。

# ios - iOS 解码变音符号 &$

> ID：11258021
> 
> 赞同：1
> 
> 时间：2012-06-29T07:49:16.767
> 
> 标签：ios, nsstring, decode, diacritics

我有一个我需要解码的例子：

> @"für"

我怎样才能把它解码成一个 NSString 所以它看起来像

> 毛皮

我尝试了很多东西，包括

```
[@"f&#252r" stringByDecodingHTMLEntities] > f&#252r  
[@"f&#252r" gtm_stringByUnescapingFromHTML] > f&#252r 
```

但没有运气。

谢谢！

更新基于 vikingosegundo 的解决方案

```
 NSLog(@"möchte decoded to :     > %@", [@"möchte" stringByEncodingHTMLEntities] );
    NSLog(@"m&ouml;chte decoded to: > %@", [@"m&ouml;chte" stringByDecodingHTMLEntities] );

    NSLog(@"für decoded to :     > %@", [@"für" stringByEncodingHTMLEntities] );
    NSLog(@"f&uuml;r decoded to: > %@", [@"f&uuml;r" stringByDecodingHTMLEntities] );

    NSLog(@"m&#246chte decoded:%@", [@"m&#246chte" stringByDecodingHTMLEntitiesComma] );
    NSLog(@"f&#252r decoded:%@", [@"f&#252r" stringByDecodingHTMLEntitiesComma] );

möchte decoded to :     > m&ouml;chte
m&ouml;chte decoded to: > möchte
für decoded to :     > f&uuml;r
f&uuml;r decoded to: > für
m&#246chte decoded:möchte
f&#252r decoded:für 
```

注意：stringByEncodingHTMLEntities 来自[https://github.com/mwaterfall/MWFeedParser/tree/master/Classes](https://github.com/mwaterfall/MWFeedParser/tree/master/Classes) stringByDecodingHTMLEntitiesComma 来自 vikingosegundo 的类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:51:06.843

尝试

```
[@"f&#252;r" stringByDecodingHTMLEntities]; 
```

或者

```
[@"f&#252;r" gtm_stringByUnescapingFromHTML]; 
```

（注意`;`）

[此类别](http://pastebin.com/uVb3SKHK)也适用于缺少的`;`.

# visual-studio-2010 - 禁用拖放或询问文件/文件夹的任何拖放操作VS2010

> ID：11258024
> 
> 赞同：2
> 
> 时间：2012-06-29T07:49:23.677
> 
> 标签：visual-studio-2010, visual-studio

有时您会不小心将某些文件从某个地方移动到任何地方？在解决方案资源管理器上。

有什么方法可以询问拖放操作吗？

或者完全禁用拖放。

* * *

如果您使用 tfs，它可能会导致其他烦人的问题。

一个很难实现但我成功的场景！）

假设您不知道这些移动的文件。

在编译时，您会删除这些文件（主要是它们会导致错误），如果您签入然后在删除后，告别您的文件消失，并且在 tfs 上您无法添加以前使用的名称的新文件。

你需要得到一个以前的版本等等......

![在此处输入图像描述](../Images/e8bd9c8ffc5183ec23799e28f4552461.png)

# c# - 工厂模式，需要知道实际的实现类型吗？

> ID：11258026
> 
> 赞同：0
> 
> 时间：2012-06-29T07:49:32.527
> 
> 标签：c#, design-patterns, c#-4.0, factory-pattern

我试图将结果从 SProc 写入文本文件。我有3个场景：

1.  SProc 没有参数。

2.  SProc 接受参数。

3.  SProc 接受参数，并且有一个循环增加参数。

场景 1 和 2 的数据将存储在一个列表中，因为它们很可能只是单行结果。

场景 3 的数据将存储在数据表中。

我正在考虑为此使用工厂模式，3 个不同的类，每个类实现一个特定的接口，以及一个工厂来确定需要 3 个中的哪一个。

问题是一旦方法完成并且完成事件已经上升，我需要知道实现了什么场景（数据表与列表）这是一个问题吗？如果是这样，有人可以解释为什么+可能的解决方案吗？

注意：只是为了澄清，这不是请求，请编写我的程序。

非常感谢您的时间，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:08:07.430

每当您需要知道接口背后的实际类型时，您可能选择了错误的点来介绍接口。这就是这里的样子。

在我看来，您想将执行逻辑（产生一些数据）的关注与记录结果的逻辑（在本例中为文本文件，但可能还有其他目标，对吗？）分开。为什么不为 ResultLogging 引入一个接口呢？

```
interface IResultLogger
{
   void LogList(List<Something> data);
   void LogDataTable(DataTable data);
} 
```

并将此接口的实例传递给执行逻辑的所有方法？

如果您不想在这些方法中包含“日志记录”（调用 IResultLogger 接口），您可以添加另一个抽象：“ResultData”的概念。

```
abstract class ResultData
{
   abstract public void LogToResultLogger();
   //add methods to access the data in a way you might need for other things in your program
} 
```

并派生一个“ListResultData”和“DataTableResultData”。

我在这里看不到工厂模式的价值。

另一种方法是拥有一个

```
class ListLogger
{
   public void LogList(List<Something> data) {}
} 
```

和

```
class DataTableLogger
{
   public void LogDataTable(DataTable data) {}
} 
```

做

```
void method1() and method2()
{
  //do logic
  new ListLogger().LogList(data);
}

void method3()
{
  //do logic
  new DataTableLogger().LogDataTable(data);
} 
```

# ios - 配置配置文件

> ID：11258032
> 
> 赞同：11
> 
> 时间：2012-06-29T07:50:09.340
> 
> 标签：ios, provisioning-profile

我目前正在配置一个新的 Apple 配置文件，我注意到有两个配置选项没有记录在任何地方（或隐藏在文档的深处）。

```
启用通行证
```

```
启用数据保护
```

我知道“数据保护”在 iOS 上的含义，但我找不到任何提及此配置文件选项的文档。

你能帮我理解这些选项的含义吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T08:09:51.163

数据保护是 iOS 5.0 的一项功能。如果您在配置级别使用它（这是一项权利），当您的应用程序未在前台运行时，您的整个应用程序将读取锁定其数据（或者如果您选择，仅当您在的背景）。您可以在 WWDC 2011 视频 Session 208 中看到更多信息（大约 38 分钟）。

但是，正如保罗的回答中提到的，存折是 iOS 6.0 的一项功能，因此不能比他链接到的公共页面上提到的更详细地讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:54:58.030

我想这些都与 iOS 6 和随之而来的新 API 有关，如果是这种情况（我敢打赌），你将无法在这样的网站上获得太多（如果有的话）信息，直到它正式发布。我会尝试在 Apple 的 iOS 开发者网站上搜索开发者论坛：

[https://devforums.apple.com/index.jspa](https://devforums.apple.com/index.jspa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:03:02.247

我假设通行证与新的存折功能有关，您可以使用它来创建票务应用程序，例如查看[此处](http://www.apple.com/ios/ios6/#passbook)了解详细信息

# linux - 连接 USB 驱动器后，使用 udev 在控制台上显示消息

> ID：11258036
> 
> 赞同：0
> 
> 时间：2012-06-29T07:50:24.287
> 
> 标签：linux, usb, udev

是否可以使用 udev 规则向我的目标上的控制台发送一些消息，如添加或删除设备等？

# java - 尝试将 Guava FluentIterable 与 GWT 一起使用时出错

> ID：11258039
> 
> 赞同：2
> 
> 时间：2012-06-29T07:50:42.340
> 
> 标签：java, gwt, guava

我正在尝试将 Guava 12.0 的 FluentIterable 与 GWT 2.0.3 一起使用，如下所示：

```
import com.google.common.collect.FluentIterable;

class FooPresenter {
   // snip

   private List<NullSafeCheckBox> asCheckboxes() {
      return FluentIterable.from(getDisplay().getMetricInputs())
         .transform(new Function<HasValueChangeHandlers<Boolean>, NullSafeCheckBox>() {
            @Override
            public NullSafeCheckBox apply(@Nullable HasValueChangeHandlers<Boolean> checkbox) {
               return (NullSafeCheckBox) checkbox;
            }
         })
         .toImmutableList();
   }
} 
```

但是，当我在开发模式下运行 GWT 时，尝试加载第一个模块时出现以下错误：

```
DEBUG: Validating newly compiled units
  ERROR: Errors in 'jar:file:/home/josh/.m2/repository/com/google/guava/guava-gwt/12.0/guava-gwt-12.0.jar!/com/google/common/math/super/com/google/common/math/LongMath.java'
    ERROR: Line 23: The import java.math cannot be resolved 
```

我的 pom.xml 看起来像这样：

```
 <dependency>
      <groupId>com.google.guava</groupId>
      <artifactId>guava</artifactId>
      <version>12.0</version>
  </dependency>
  <dependency>
      <groupId>com.google.guava</groupId>
      <artifactId>guava-gwt</artifactId>
      <version>12.0</version>
  </dependency> 
```

我的 Application.gwt.xml 像这样在 Guava 中糟透了：

```
<!-- Guava -->
<inherits name="com.google.common.collect.Collect"/> 
```

**更新**

按照[Arcadian 的回答](https://stackoverflow.com/a/11258543/58994)中的建议，我将 gwt-math 添加到我的 pom.xml 和 Application.gwt.xml 中：

```
 <!-- Guava -->
  <inherits name="com.google.common.collect.Collect"/>
  <inherits name="com.googlecode.gwt.math.Math" /> 
```

现在运行托管模式时出现此错误：

```
DEBUG: Validating newly compiled units
  WARN: Warnings in 'jar:file:/home/josh/.m2/repository/videoplaza-third-party/gwt-incubator/20100204-r1747/gwt-incubator-20100204-r1747.jar!/com/google/gwt/widgetideas/client/impl/GlassPanelImpl.java'
    WARN: Line 30: Referencing deprecated class 'com.google.gwt.user.client.impl.DocumentRootImpl'
    WARN: Line 38: Referencing deprecated class 'com.google.gwt.user.client.impl.DocumentRootImpl'
  ERROR: Errors in 'jar:file:/home/josh/.m2/repository/com/google/guava/guava-gwt/12.0/guava-gwt-12.0.jar!/com/google/common/primitives/UnsignedLong.java'
    ERROR: Line 77: The method bitLength() is undefined for the type BigInteger
    ERROR: Line 79: The method longValue() is undefined for the type BigInteger
    ERROR: Line 200: The method valueOf(long) is undefined for the type BigInteger
    ERROR: Line 202: The method setBit(int) is undefined for the type BigInteger 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:36:22.283

您可以尝试将[gwt-java-math](http://code.google.com/p/gwt-java-math/)项目添加为依赖项。正如他们的维基上所说，

> 该库正在合并到 GWT 中！目前它在 GWT 主干上。

它可能在即将发布的 v2.5 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:48:54.397

仅供参考，在我看来 java.math 应该在当前版本的 GWT 中可用，尽管可能不在 2.0.3 中。例如，请参阅[GWT 2.2 的 JRE 仿真参考](https://developers.google.com/web-toolkit/doc/2.2/RefJreEmulation#Package_java_math)，这可能是它可用的第一个版本。

我不知道与 gwt-java-math 结合会发生什么；可能番石榴本身需要声明对其模块的依赖才能使其工作？

我们确实需要更好地确定和宣传 Guava 需要哪个版本的 GWT，包括针对 Guava（而不仅仅是我们的内部版本）运行我们的 GWT 测试来验证这一点。

# regex - Nagiosgraph rrd 文件未创建（可能是因为地图文件）

> ID：11258049
> 
> 赞同：1
> 
> 时间：2012-06-29T07:51:12.273
> 
> 标签：regex, perl, nagios, rrdtool, cacti

我在使用 Nagiosgraph 时遇到问题。我创建了一个 nagios 检查，它通过 SNMP 监视服务器/工作站上的流量，检查的输出是一个长字符串，如下所示：

```
 OK - traffmon eth0:incoming:170KB:outgoing:1606KB eth1:incoming:1576KB:outgoing:170KB eth2:incoming:156:outgoing:0|lo;incoming;25;outgoing;25 tunl0;incoming;0;outgoing;0 gre0;incoming;0;outgoing;0 sit0;incoming;0;outgoing;0 eth0;incoming;170KB;outgoing;1606KB eth1;incoming;1576KB;outgoing;170KB eth2;incoming;156;outgoing;0 
```

我对前三个接口感兴趣，这就是为什么我用接口（我认为是性能数据）将 eth0、eth1、eth2 从整个字符串中分离出来，并且我按照[http://www.novell.com/上的说明进行操作coolsolutions/feature/19843.html](http://www.novell.com/coolsolutions/feature/19843.html)我的 service.cfg 中有

```
 define serviceextinfo{
    host_name                workstation
    service_description      Throughput Monitor
    action_url               /nagiosgraph/cgi-bin/show.cgi?host=$HOSTNAME$&service=$SERVICEDESC$&db=eth0,incoming,outgoing,&geom=500x100&rrdopts%3D-l%200%20-u%2010000%20-t%20Traffic
  } 
```

在我的地图文件中，我写了这个来匹配我感兴趣的东西：

```
 /output:.*traffmon ([0-9]+), ([0-9]+), ([0-9]+), ([0-9]+), ([0-9]+), ([0-9]+),   ([0-9]+), ([0-9]+), ([0-9]+)/
  and push @s, [ 'eth0',
            ['incoming', 'GAUGE', $2],
            ['outgoing', 'GAUGE', $3] ],
         [ 'eth1',
            ['incoming', 'GAUGE', $5],
            ['outgoing', 'GAUGE', $6] ],
         [ 'eth2',
            ['incoming', 'GAUGE', $8],
            ['outgoing', 'GAUGE', $9] ]; 
```

我想创建三个表（eth0、eth1、eth2），其中包含两列（传入、传出），然后尝试很好地表示它们。问题是通常我的 rrd 文件是自动创建的，但是为此检查 rrd 文件夹中带有工作站名称的文件夹没有创建，.rrd 文件也没有创建，我觉得它有事情要做使用地图文件，可能匹配不起作用或什么（我这么说是因为我现在不使用 perl）。任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:15:06.513

你可以试试这个正则表达式：

```
/traffmon eth0:incoming:(\d+)(?:KB):outgoing:(\d+)(?:KB) eth1:incoming:(\d+)(?:KB):outgoing:(\d+)(?:KB) eth2:incoming:(\d+):outgoing:(\d+)/ 
```

您可以在 rubular 上对其进行测试：[http: //rubular.com/r/vj7VXwDPPU](http://rubular.com/r/vj7VXwDPPU)

* * *

我不熟悉您的 nagios 系统是如何工作的，但如果有更多 perl 代码的空间，您还可以执行以下操作：

```
my $res = 'OK - traffmon eth0:incoming:170KB:outgoing:1606KB eth1:incoming:1576KB:outgoing:170KB eth2:incoming:156:outgoing:0|lo;incoming;25;outgoing;25 tunl0;incoming;0;outgoing;0 gre0;incoming;0;outgoing;0 sit0;incoming;0;outgoing;0 eth0;incoming;170KB;outgoing;1606KB eth1;incoming;1576KB;outgoing;170KB eth2;incoming;156;outgoing;0';
my @s;
push @s, map { 
    my @f = split /:/;
    [ $f[0], [$f[1], 'GAUGE', $f[2] ], [$f[3], 'GAUGE', $f[4]] ]
  } (split(/ |\|/, $res))[3..5];
print Dumper @s; 
```

这会将字符串拆分为空格`或管道`|`，获取第 3 到第 5 个元素（即前三个接口），然后对它们进行循环。它在冒号上拆分`:`，构建您的数据结构并为每个接口返回它。返回的数据结构被推入`@s`.`

 `输出：

```
$VAR1 = [
          'eth0',
          [
            'incoming',
            'GAUGE',
            '170KB'
          ],
          [
            'outgoing',
            'GAUGE',
            '1606KB'
          ]
        ];
$VAR2 = [
          'eth1',
          [
            'incoming',
            'GAUGE',
            '1576KB'
          ],
          [
            'outgoing',
            'GAUGE',
            '170KB'
          ]
        ];
$VAR3 = [
          'eth2',
          [
            'incoming',
            'GAUGE',
            '156'
          ],
          [
            'outgoing',
            'GAUGE',
            '0'
          ]
        ]; 
````

# python - 获取 Tkinter 的行数

> ID：11258057
> 
> 赞同：0
> 
> 时间：2012-06-29T07:52:09.750
> 
> 标签：python, class, tkinter

只是一个快速的问题..

在单独的定义中打开一个文本文件（不使用类）后，我有一个“表”（即一个框架），它有 n 行（取决于文本文件中的内容）。

由于这个数字可以是任何数字，因此是否可以在之后检索行数，因为我已经获得了不使用类但无法访问开放定义中的变量等的任务。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:48:29.840

我想到了。

我使用了 frame_table.grid_size() 并拥有列和行（7、3）。

抱歉这个无聊的问题！

# jquery - 在 JSON ajax 响应中返回多组数据

> ID：11258059
> 
> 赞同：0
> 
> 时间：2012-06-29T07:52:21.293
> 
> 标签：jquery, ajax, json

如果我想发出一个请求，但返回多组响应，我将如何将它们分开以便能够在 jQuery 中解析它们并获得`.length`每一组的响应？

第一组（A）

```
[
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
] 
```

第二组（B）

```
[
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
] 
```

总响应（单个请求）：

```
[
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
]
,[
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
   ,{"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
] 
```

还是我会以另一种方式将其退回以正确执行此操作？还是我必须分开做，我更愿意将其保留在一个响应中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:00:01.053

你可以把它们做成一个数组，或者一个对象，每个组作为数组或对象中的一个元素

目的

```
{
  "groupa":[
   {"name":"Tu\u011Frul","surname":"Topuz SR","message":"Hello World"},
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
    ],
  "groupb":[
    {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"},
    {"name":"Tu\u011Frul","surname":"Topuz JR","message":"Hello World"}
]}

success(data){
    data["groupa"].length//number of items in group a
    data["groupa"][0]["surname"] == "Topuz SR"//true;
    data["groupb"][1]["surname"] == "Topuz JR"//true;
} 
```

大批

```
[[
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"},
   {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
    ],
  [
    {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"},
    {"name":"Tu\u011Frul","surname":"Topuz","message":"Hello World"}
]]

success(data){
    data[0].length//number of items in first group
} 
```

# cocos2d-android - 将参数传递给回调函数COCOS2D Android

> ID：11258061
> 
> 赞同：0
> 
> 时间：2012-06-29T07:52:23.900
> 
> 标签：cocos2d-android, nosuchmethod

几天前我开始使用 cocos2d ......我正在开发小型 2d 游戏。我想出了如何为精灵设置动画。现在，当精灵完成动画时，我希望将其从屏幕上清除。

如何将参数传递给回调函数？

```
target.runAction(CCSequence.actions(repeatAnimation,
                        CCCallFuncND.action(this, "deleteTarget",target))); 
```

函数定义为：

```
public void deleteTarget(Object target) 
```

它总是给我“NoSuchMethodException”......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:58:56.630

像这样做

```
CCCallFuncN ccfun = CCCallFuncN.action(this, "test");

public void test(Object sender) {
    Do whatever you require
} 
```

# android - 在Android中从相机调整图像大小

> ID：11258064
> 
> 赞同：0
> 
> 时间：2012-06-29T07:52:38.357
> 
> 标签：android, image-resizing, parcelable

我想调整 sd 卡上的图像大小并将其发送到 Web 服务，调用是异步的，`ParcelFileDescriptor`用于`CountingInputStreamEntity`显示进度条。我应该怎么做才能调整大小并以相同的方式发送！这是我当前的代码：

```
ParcelFileDescriptor fileDescriptor = context.getContentResolver().openFileDescriptor(uri, "r");
InputStream in = context.getContentResolver().openInputStream(uri);
CountingInputStreamEntity entity = new CountingInputStreamEntity(in, fileDescriptor.getStatSize());
entity.setUploadListener(this);
entity.setContentType("application/octet-stream");
put.setEntity(entity); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:31:25.177

[可以使用BitmapFactory.Options](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)重新调整图像大小

您需要创建一个新的小宽度和高度的图像，如下所示：

```
private Bitmap decodeFile(File f){
    Bitmap b = null;
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        FileInputStream fis = new FileInputStream(f);
        BitmapFactory.decodeStream(fis, null, o);
        fis.close();

        int scale = 1;
        if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
            scale = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = new FileInputStream(f);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {
    }
    return b;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:29:35.513

要调整相机图像的大小，您可以在`onActivitResult()`.

```
 BitmapFactory.Options options = new BitmapFactory.Options();
                 options.inSampleSize = 8;

                 Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options); 
```

您可以在其中调整图像大小`options.inSampleSize`，然后按照您的样式将该图像传递给 Web 服务。

我希望它有帮助..

# javascript - 是否可以等到所有 javascript 文件都加载完毕后再执行 javascript 代码？

> ID：11258068
> 
> 赞同：70
> 
> 时间：2012-06-29T07:53:18.527
> 
> 标签：javascript, jquery

我们在母版页底部加载了几个 JavaScript 文件。但是，我有需要在加载其他脚本之前执行一些 JavaScript 的情况。是否可以等到所有 JavaScript 文件都加载完毕，然后执行一些 JavaScript 代码？

我以为`$(document).ready()`这样做了，但事实证明，事实并非如此。当然我们可以将脚本文件从底部移动到顶部，但我想知道这是否可能是我想要的。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-29T07:59:04.157

您可以使用

```
$(window).on('load', function() {
    // your code here
}); 
```

它将等到页面加载完毕。`$(document).ready()`等到 DOM 加载完毕。

在普通的 JS 中：

```
window.addEventListener('load', function() {
    // your code here
}) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-29T08:04:43.690

您可以[`.getScript()`](http://api.jquery.com/jQuery.getScript/)在加载后使用和运行您的代码：

```
 $.getScript("my_lovely_script.js", function(){

    alert("Script loaded and executed.");
    // here you can use anything you defined in the loaded script

 }); 
```

您可以在这里看到更好的解释：[如何在另一个 JavaScript 文件中包含一个 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-06-29T07:58:01.660

您可以使用`<script>`'`defer`属性。它指定脚本将在页面完成解析后执行。

```
<script defer src="path/to/yourscript.js"> 
```

关于此的一篇不错的文章：http: [//davidwalsh.name/script-defer](http://davidwalsh.name/script-defer)

浏览器支持似乎相当不错：[http ://caniuse.com/#search=defer](http://caniuse.com/#search=defer)

关于使用延迟和异步加载 JS 的另一篇精彩文章：[https ://flaviocopes.com/javascript-async-defer/](https://flaviocopes.com/javascript-async-defer/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-25T21:27:49.283

扩展@Eruant的答案，

```
$(window).on('load', function() {
    // your code here
}); 
```

在加载脚本时`async`和两者都很好地工作。`defer`

因此，您可以像这样导入所有脚本：

```
<script src="/js/script1.js" async defer></script>
<script src="/js/script2.js" async defer></script>
<script src="/js/script3.js" async defer></script> 
```

只要确保`script1`不调用`script3`之前的函数`$(window).on('load' ...`，确保在`window load`事件中调用它们。

更多关于异步/延迟[在这里](https://bitsofco.de/async-vs-defer/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-10T14:02:31.623

那对我有用：

```
var jsScripts = [];

jsScripts.push("/js/script1.js" );
jsScripts.push("/js/script2.js" );
jsScripts.push("/js/script3.js" );

$(jsScripts).each(function( index, value ) {
    $.holdReady( true );
    $.getScript( value ).done(function(script, status) {
        console.log('Loaded ' + index + ' : ' + value + ' (' + status + ')');                
        $.holdReady( false );
    });
}); 
```

# php - 将经典（电子邮件/密码）登录与 facebook 登录合并

> ID：11258069
> 
> 赞同：1
> 
> 时间：2012-06-29T07:53:19.167
> 
> 标签：php, mysql, database, facebook-graph-api, facebook-javascript-sdk

我有一个具有经典电子邮件/密码登录和 facebook 登录的网站。如果用户无论如何安装了应用程序以使用 facebook 登录，我会在数据库中保留一个字段（即`fb_connect(TINY_INT(1))`），该`fb_connect`字段将为 1。

我在 github 示例中同时使用 facebook javascript SDK 和 facebook PHP SDK。

因此，当用户使用经典的电子邮件/密码登录时，系统会检查是否`fb_connect`设置为 1。我想使用 PHP SDK，它会自动转到`$login_url`facebook 并重定向回系统。

但是，我有不同种类的`redirect_uri`s。我需要能够在不同的页面中进行重定向。

有人想出解决该问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:26:48.277

最好将页面地址存储在 php 会话中，以便在成功登录 facebook 后重定向到该会话中。

```
if(isset($_REQUEST['state']))
          {
               $redirect_to = $_SESSION['redirect_url'] ? $_SESSION['redirect_url'] : 'index.php';
               header ("Location: $redirect_to");
          } 
```

希望这会对您有所帮助。

# java - Tomcat 集群 6 和 ContextListener

> ID：11258072
> 
> 赞同：0
> 
> 时间：2012-06-29T07:53:42.620
> 
> 标签：java, tomcat, replication, cluster-computing

在 Tomcat 的单个实例上，我有一个在初始化上下文时启动的线程。像这样的东西：

```
public class MyContextListener implements ServletContextListener {
private MyThread thread = null;

@Override
public void contextInitialized(ServletContextEvent sce) {
    //Start thread...
}

@Override
public void contextDestroyed(ServletContextEvent sce) {
    //Stop thread...
}
} 
```

该线程每 10 分钟在系统中执行一些重要的工作，并且工作正常。

现在我已经切换到 tomcat 实例的集群，并且该线程在两个实例上运行。我正在尝试实现不同的行为。

我想要达到的目标：

*   该线程当时应该只在一个实例上运行。
*   如果第一个实例失败（在哪个线程上运行），则应在第二个实例上启动线程。

我会很感激任何提示。

我的应用程序逻辑是什么？
线程执行的应用程序逻辑如下：

1.  从数据库中读取某事。
2.  分析数据库信息。
3.  如果需要，向外部系统发出 HTTP 请求。
4.  再睡眠线程 10 分钟。

关键是：如果我有 2 个 tomcat 实例，只有一个应该执行这个逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:50:11.080

如果我理解正确，则在使用 web-application-server 时，您实际上是不允许在应用程序中启动新线程的。所有线程都必须由应用服务器管理。

# javascript - 如何通过javascript数组中的键和值查找对象的索引

> ID：11258077
> 
> 赞同：94
> 
> 时间：2012-06-29T07:53:52.480
> 
> 标签：javascript, jquery

**鉴于：**

```
var peoples = [
  { "attr1": "bob", "attr2": "pizza" },
  { "attr1": "john", "attr2": "sushi" },
  { "attr1": "larry", "attr2": "hummus" }
]; 
```

**通缉：**

对象的索引，`attr === value`例如`attr1 === "john"`或`attr2 === "hummus"`

**更新：** 请仔细阅读我的问题，我不想通过 $.inArray 找到对象，也不想获取特定对象属性的值。请考虑这一点作为您的答案。谢谢！

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2016-10-01T18:45:26.917

# 函数式方法

这些天所有很酷的孩子都在做函数式编程（*你好 React 用户*），所以我想我会给出函数式解决方案。在我看来，它实际上比迄今为止提出的命令式`for`和循环要好得多，并且使用 ES6 语法它非常优雅。`each`

## 更新

现在有一种很好的方法来调用[`findIndex`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)它，它接受一个函数，该函数根据数组元素是否匹配返回`true`/ `false`（一如既往，检查浏览器兼容性）。

```
var index = peoples.findIndex(function(person) {
  return person.attr1 == "john"
}); 
```

使用 ES6 语法，你可以这样写：

```
var index = peoples.findIndex(p => p.attr1 == "john"); 
```

* * *

## （旧）函数式方法

### TL;博士

如果您正在寻找使用`index`地点`peoples[index].attr1 == "john"`：

```
var index = peoples.map(function(o) { return o.attr1; }).indexOf("john"); 
```

## 解释

**第1步**

用于[`.map()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)获取给定特定键的值数组：

```
var values = object_array.map(function(o) { return o.your_key; }); 
```

上面的行带您从这里开始：

```
var peoples = [
  { "attr1": "bob", "attr2": "pizza" },
  { "attr1": "john", "attr2": "sushi" },
  { "attr1": "larry", "attr2": "hummus" }
]; 
```

到这里：

```
var values = [ "bob", "john", "larry" ]; 
```

**第2步**

现在我们只是[`.indexOf()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexof)用来查找我们想要的键的索引（当然，这也是我们正在寻找的对象的索引）：

```
var index = values.indexOf(your_value); 
```

**解决方案**

我们结合以上所有内容：

```
var index = peoples.map(function(o) { return o.attr1; }).indexOf("john"); 
```

或者，如果您更喜欢 ES6 语法：

```
var index = peoples.map((o) => o.attr1).indexOf("john"); 
```

* * *

### 演示：

```
var peoples = [
  { "attr1": "bob", "attr2": "pizza" },
  { "attr1": "john", "attr2": "sushi" },
  { "attr1": "larry", "attr2": "hummus" }
];

var index = peoples.map(function(o) { return o.attr1; }).indexOf("john");
console.log("index of 'john': " + index);

var index = peoples.map((o) => o.attr1).indexOf("larry");
console.log("index of 'larry': " + index);

var index = peoples.map(function(o) { return o.attr1; }).indexOf("fred");
console.log("index of 'fred': " + index);

var index = peoples.map((o) => o.attr2).indexOf("pizza");
console.log("index of 'pizza' in 'attr2': " + index);
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-29T07:53:53.150

如果您想在不干扰原型的情况下检查对象本身，请使用[`hasOwnProperty()`](https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-an-attribute-in-javascript%20%22hasOwnProperty)：

```
var getIndexIfObjWithOwnAttr = function(array, attr, value) {
    for(var i = 0; i < array.length; i++) {
        if(array[i].hasOwnProperty(attr) && array[i][attr] === value) {
            return i;
        }
    }
    return -1;
} 
```

还包括原型属性，使用：

```
var getIndexIfObjWithAttr = function(array, attr, value) {
    for(var i = 0; i < array.length; i++) {
        if(array[i][attr] === value) {
            return i;
        }
    }
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-29T07:59:30.257

使用 jQuery **[.each()](https://api.jquery.com/each/)**

```
var peoples = [
  { "attr1": "bob", "attr2": "pizza" },
  { "attr1": "john", "attr2": "sushi" },
  { "attr1": "larry", "attr2": "hummus" }
];

$.each(peoples, function(index, obj) {
   $.each(obj, function(attr, value) {
      console.log( attr + ' == ' + value );
   });
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

使用**[for 循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)**：

```
var peoples = [
  { "attr1": "bob", "attr2": "pizza" },
  { "attr1": "john", "attr2": "sushi" },
  { "attr1": "larry", "attr2": "hummus" }
];

for (var i = 0; i < peoples.length; i++) {
  for (var key in peoples[i]) {
    console.log(key + ' == ' + peoples[i][key]);
  }
}
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-29T08:07:21.283

不是对您的问题的直接回答，尽管我认为值得一提，因为您的问题似乎适合“在键值存储中按名称获取事物”的一般情况。

如果您对“peoples”的实现方式并不严格，那么找到合适人选的更类似于 JavaScript 的方式可能是：

```
var peoples = {
  "bob":  { "dinner": "pizza" },
  "john": { "dinner": "sushi" },
  "larry" { "dinner": "hummus" }
};

// If people is implemented this way, then
// you can get values from their name, like :
var theGuy = peoples["john"];

// You can event get directly to the values
var thatGuysPrefferedDinner = peoples["john"].dinner; 
```

希望如果这不是您想要的答案，它可能会帮助对“键/值”问题感兴趣的人。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-29T07:58:12.663

```
function getIndexByAttribute(list, attr, val){
    var result = null;
    $.each(list, function(index, item){
        if(item[attr].toString() == val.toString()){
           result = index;
           return false;     // breaks the $.each() loop
        }
    });
    return result;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-18T08:46:16.740

您还可以通过扩展 JavaScript 使其成为可重用的方法：

```
Array.prototype.findIndexBy = function(key, value) {
    return this.findIndex(item => item[key] === value)
}

const peoples = [{name: 'john'}]
const cats = [{id: 1, name: 'kitty'}]

peoples.findIndexBy('name', 'john')
cats.findIndexBy('id', 1) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-29T08:04:30.990

这样做： -

```
var peoples = [
  { "name": "bob", "dinner": "pizza" },
  { "name": "john", "dinner": "sushi" },
  { "name": "larry", "dinner": "hummus" }
];

$.each(peoples, function(i, val) {
    $.each(val, function(key, name) {
        if (name === "john")
            alert(key + " : " + name);
    });
}); 
```

## 输出：

```
name : john 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/CYkNh/)**

```
​ 
```

# mysql - 基于 Struts Hibernate Mysql Tomcat 的应用程序挂起

> ID：11258080
> 
> 赞同：0
> 
> 时间：2012-06-29T07:53:55.003
> 
> 标签：mysql, hibernate, struts, tomcat6, apache2.2

我有一个在 Apache 2.2、tomcat 6 上运行的应用程序，它使用 struts 框架、hibernate 框架。我们在后端使用 Mysql。我们还与第三方服务器交互以发出用户请求的一些请求。由于保密限制，我不能确切地告诉你我们做了什么，但我可以向你保证，我们没有定制任何东西，我们使用 Apache、tomcat 等可用的最通用的构建。我们使用 Linux 平台。许多访问者访问我们的网站，他们首先使用支付网关付款，然后购买产品。要购买产品，我们必须再次访问第三方网站。它是一种简单的电子商务设置。问题是有时服务器会挂起。因为它没有响应，并且当我们单击（我知道）由 tomcat 容器提供的链接时，它不会被加载。这是我需要帮助的：

1.  由于我的主机是在一个无头 linux 平台上，请给我推荐一个好的调试工具。
2.  我们已经登录并打印几乎所有异常的堆栈跟踪（如果它们发生），我们总是监视 catalina.out，但是当服务器挂起时，我们看不到 catalina.out 上的任何活动。也许这可以给一些人一个线索。
3.  我们为休眠禁用了 show_sql，我们尝试启用它，但仍然不足以确定应用程序是否卡在查询上。我们还启用了 slow_sql 日志，但没有显示任何重要的查询。我们如何检查我的应用程序是否卡在查询上？
4.  如果我的应用程序没有卡在查询上，我怎么知道它卡在哪里？
5.  我怎样才能得到java堆栈转储？
6.  有什么可能的方法来解决这样的问题。

欢迎提出任何建议。我提前感谢大家阅读我的问题，并感谢你们花时间写答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:13:04.857

面对您的情况，我会在 servlet 容器“挂起”时进行线程转储。线程转储为您提供给定 JVM 中所有 Java 线程的堆栈跟踪列表。

进行线程转储非常简单：

1.  查找 Tomcat 的进程 ID，例如`ps -ef | grep java`
2.  向进程发送 SIGQUIT，例如`kill -3 tomcatProcessId`

您将在 中找到线程转储的内容`TOMCAT_HOME/logs/catalina.out`。

# wordpress - 如何在 wordpress 插件中创建 URL？

> ID：11258081
> 
> 赞同：0
> 
> 时间：2012-06-29T07:54:04.087
> 
> 标签：wordpress, plugins, methods, get

我是 wordpress 插件的新手，我已经开始了几行代码。我现在想知道的是如何创建一个使用 GET 方法侦听传入数据的 URL。

我想要一个像这样的网址：

[http://www.mydomain.com/process.php](http://www.mydomain.com/process.php)

这个 process.php 文件包含一个保存参数值的 php 代码。

示例我在同一个网站上有一个调用此 URL 的 javascript，例如：

[http://www.mydomain.com/process.php?value=1&country=US](http://www.mydomain.com/process.php?value=1&country=US)

内部 process.php 是一个简单的脚本，它将值保存到表中，例如：

```
<?php
$value = $_GET["value"];
$country = $_GET["country"];

$wpdb->insert( 'wp_mytable', array( 'value' => $value, 'country' => $country ), array( '%s', '%s' ) );
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:06:29.730

首先在您的 process.php 中包含 wordpress wp-load.php。并定义全局变量$wpdb；通过包含 wp-load.php 文件并定义全局变量 $wpdb。现在您可以调用 ajax 文件中的所有 wordpress 函数了。

# android - 如何通过 Activity 的取消按钮强制 IntentService 立即停止？

> ID：11258083
> 
> 赞同：49
> 
> 时间：2012-06-29T07:54:15.723
> 
> 标签：android, intentservice

我有一个从 Activity 启动的 IntentService，我希望能够使用 Activity 中的“取消”按钮立即从该 Activity 停止该服务。一旦按下“取消”按钮，我希望服务停止执行代码行。

我发现了许多与此类似的问题（即[此处](https://stackoverflow.com/questions/5503244/how-to-stop-an-intentservice)、[此处](https://stackoverflow.com/questions/7173306/manually-ending-the-intentservice-worker-thread)、[此处](https://stackoverflow.com/questions/8709989/how-to-stop-intentservice-in-android)、[此处](https://stackoverflow.com/questions/7146624/stopping-an-intentservice)），但没有好的答案。 `Activity.stopService()`并立即`Service.stopSelf()`执行该`Service.onDestroy()`方法，然后在销毁服务之前让代码`onHandleIntent()`一直完成。

由于显然没有保证立即终止服务线程的方法，我能找到的唯一推荐的解决方案（[在这里](http://www.techrepublic.com/article/interrupting-java-threads/5144546)）是在服务中有一个可以在`onDestroy()`方法中切换的布尔成员变量，然后几乎每一行代码`onHandleIntent()`包含在自己的“if”子句中，查看该变量。这是一种糟糕的代码编写方式。

有人知道在 IntentService 中执行此操作的更好方法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-04-09T15:34:43.710

这是诀窍，使用 volatile 静态变量并检查服务中应检查服务继续的某些行中的继续条件：

```
class MyService extends IntentService {
    public static volatile boolean shouldContinue = true;
    public MyService() {
        super("My Service");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        doStuff();
    }

    private void doStuff() {
        // do something 

        // check the condition
        if (shouldContinue == false) {
            stopSelf();
            return;
        }

       // continue doing something

       // check the condition
       if (shouldContinue == false) {
           stopSelf();
           return;
       }

       // put those checks wherever you need
   }
} 
```

并在您的活动中这样做以停止您的服务，

```
 MyService.shouldContinue = false; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-03T12:00:10.020

立即停止线程或进程通常是一件肮脏的事情。但是，如果您的服务是无状态的，那应该没问题。

在清单中将服务声明为单独的进程：

```
<service
     android:process=":service"
     ... 
```

当你想停止它的执行时，只需终止该进程：

```
ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
List<RunningAppProcessInfo> runningAppProcesses = am.getRunningAppProcesses();

Iterator<RunningAppProcessInfo> iter = runningAppProcesses.iterator();

while(iter.hasNext()){
    RunningAppProcessInfo next = iter.next();

    String pricessName = getPackageName() + ":service";

    if(next.processName.equals(pricessName)){
        Process.killProcess(next.pid);
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-20T10:14:31.950

我在服务中使用了一个广播接收器，它只是将停止布尔值设置为真。例子：

```
private boolean stop=false;

public class StopReceiver extends BroadcastReceiver {

   public static final String ACTION_STOP = "stop";

   @Override
   public void onReceive(Context context, Intent intent) {
       stop = true;
   }
}

@Override
protected void onHandleIntent(Intent intent) {
    IntentFilter filter = new IntentFilter(StopReceiver.ACTION_STOP);
    filter.addCategory(Intent.CATEGORY_DEFAULT);
    StopReceiver receiver = new StopReceiver();
    registerReceiver(receiver, filter);

    // Do stuff ....

    //In the work you are doing
    if(stop==true){
        unregisterReceiver(receiver);
        stopSelf();
    }
} 
```

然后，从活动调用中：

```
//STOP SERVICE
Intent sIntent = new Intent();
sIntent.setAction(StopReceiver.ACTION_STOP);
sendBroadcast(sIntent); 
```

停止服务。

PD：我使用布尔值，因为在我的情况下，我在循环中停止服务，但您可能可以在 onReceive 中调用 unregisterReceiver 和 stopSelf。

PD2：如果服务正常工作，不要忘记调用 unregisterReceiver，否则你会得到一个泄露的 IntentReceiver 错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T08:37:10.280

```
@Override
protected void onHandleIntent(Intent intent) {
    String action = intent.getAction();
    if (action.equals(Action_CANCEL)) {
        stopSelf();
    } else if (action.equals(Action_START)) {
        //handle
    }
} 
```

希望它有效。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-11T10:21:52.817

在**IntentService**的情况下，它不会停止或通过某些意图操作接受任何其他请求，直到其`onHandleIntent`方法完成前一个请求。

如果我们尝试通过其他操作再次启动**IntentService**`onHandleIntent` ，则只会在之前的意图/任务完成时调用。

在方法完成其任务之前，也`stopService(intent);`或`stopSelf();`不工作。`onHandleIntent()`

所以我认为这里更好的解决方案是在这里使用 normal `Service`。

我希望它会有所帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-02T21:54:51.487

如果使用`IntentService`，那么我认为你被困在做你描述的事情，`onHandleIntent()`代码必须轮询它的“停止”信号。

如果您的后台任务可能会长时间运行，并且您需要能够停止它，我认为您最好使用普通的`Service`。概括地说，将您的服务写入：

*   公开一个“开始”意图来​​启动一个 AsyncTask 来执行你的后台工作，保存对新创建的 AsyncTask 的引用。
*   公开一个“取消” Intent 来调用`AsyncTask.cancel(true)`，或者让 onDestroy() 调用`AsyncTask.cancel(true)`。
*   然后 Activity 可以发送“取消”Intent 或调用 stopService()。

为了换取取消后台工作的能力，服务承担以下责任：

*   AsyncTask`doInBackground()`必须优雅地处理 InterruptedException 和/或定期检查 Thread.interrupted()，并“提前”返回。
*   服务必须确保`stopSelf()`被调用（可能在 AsyncTask onPostExecute/onCancelled 中）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-02T22:30:18.723

正如@budius 在他的评论中已经提到的那样，您应该在`Service`单击该按钮时设置一个布尔值：

```
// your Activity.java
public boolean onClick() {
   //...
   mService.performTasks = false;
   mService.stopSelf();
} 
```

在您的`Intent`处理中，在您执行提交/发送意图信息的重要任务之前，只需使用该布尔值：

```
// your Service.java
public boolean performTasks = true;

protected void onHandleIntent(Intent intent) {
   Bundle intentInfo = intent.getBundle();
   if (this.performTasks) {
      // Then handle the intent...
   }
} 
```

否则，服务**将**完成它的处理任务`Intent`。这就是它的用途， 因为如果您查看核心代码，[我不太明白您如何解决它。](https://github.com/android/platform_frameworks_base/blob/dbc51de44fe4f9a7f81528204250de32ec405d39/core/java/android/app/Service.java)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-29T07:59:51.323

这是一些启动/停止服务的示例代码

开始，

```
Intent GPSService = new Intent(context, TrackGPS.class);
context.startService(GPSService); 
```

停止，

**`context.stopService(GPSService);`**

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-03-13T10:14:20.760

```
context.stopService(GPSService); 
```

# silverlight-4.0 - 如何更新 Silverlight 中的服务？

> ID：11258088
> 
> 赞同：0
> 
> 时间：2012-06-29T07:55:27.830
> 
> 标签：silverlight-4.0

问题既简单又复杂。我在 silverlight 及其服务中创建了一个数据模型。现在我已经更改了数据库。在其中一个表中添加了一个字段，并更新了数据模型。现在我必须更新我之前创建的服务。我不想删除以前的服务。有什么方法可以更新服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:06:25.057

如果您的意思是 WCF RIA 服务域上下文，那么最好的选择是将您的修改保存在单独的部分类文件中。

这样，当您进行数据更改（例如添加新字段）时，您可以重新创建域上下文，而不必做太多的修改来适应它。

# css-position - 如何构建像facebook聊天栏这样在导航到任何页面时不会重新加载的持久元素？

> ID：11258090
> 
> 赞同：-2
> 
> 时间：2012-06-29T07:55:31.477
> 
> 标签：css-position, persistent, facebook-chat

我开发了一个广播电台小部件（在我的网站上查看）。问题是，我不知道如何让它像[http://josephbeeson.com/gwapdemo/gwap.html](http://josephbeeson.com/gwapdemo/gwap.html)一样持久。就像导航到任何页面时不会重新加载的 facebook 聊天栏。我已经尝试寻找演示代码，但仍然不明白。请提供一步一步的教程。我想在我的社交网站[http://www.heypy.com](http://www.heypy.com)上实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:37:47.350

整个页面不会**重新**加载，新内容只是通过 AJAX 加载并显示在当前文档中。

为了让用户*看起来*像是导航到其他 URL，地址栏内容使用 HTML5 History API 进行更新。

> 请提供一步一步的教程。

很高兴为您提供相关的关键字，因此您可以自己进行研究。但不会在这里提供私人教程，这不是本站的目的。感谢您的理解。

# layout - 1.7 版的道场布局教程不适用于 1.7.2

> ID：11258093
> 
> 赞同：0
> 
> 时间：2012-06-29T07:55:41.403
> 
> 标签：layout, dojo

这是 dojo1.7[布局](https://stackoverflow.com/questions/11248427/dojo1-7-layout-acting-screwy)的延续。

所以我制作了一些工作小部件并对其进行了测试，然后我尝试使用[http://dojotoolkit.org/documentation/tutorials/1.7/dijit_layout/](http://dojotoolkit.org/documentation/tutorials/1.7/dijit_layout/)上的教程更改我的工作，以使布局更好。在以许多有趣的方式失败之后（这是我的最后一个问题），我开始了一条新的道路。我现在的计划是实现布局教程示例，然后插入我的小部件。出于某种原因，即使遵循本教程也行不通……一切加载然后消失，我只剩下一个空白的浏览器窗口。

有任何想法吗？

让我感到震惊的是，这可能是浏览器兼容性问题，我正在使用 Firefox 13.0.1。据我所知，Dojo 应该与此兼容...

无论如何，有一些代码：

HTML：

```
<body class="claro">
<div
        id="appLayout" class="demoLayout"
        data-dojo-type="dijit.layout.BorderContainer"
        data-dojo-props="design: 'headline'">
    <div
            class="centerPanel"
            data-dojo-type="dijit.layout.ContentPane"
            data-dojo-props="region: 'center'">
        <div>
            <h4>Group 1 Content</h4>
            <p>stuff</p>
        </div>
        <div>
            <h4>Group 2 Content</h4>
        </div>
        <div>
            <h4>Group 3 Content</h4>
        </div>
    </div>
    <div
            class="edgePanel"
            data-dojo-type="dijit.layout.ContentPane"
            data-dojo-props="region: 'top'">
                Header content (top)
    </div>
    <div
        id="leftCol" class="edgePanel"
        data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'left', splitter: true">
            Sidebar content (left)
    </div>
</div>
</body> 
```

道场配置：

```
var dojoConfig = {
        baseUrl: "${request.static_url('mega:static/js')}", //this is in a mako template
        tlmSiblingOfDojo: false,
        packages: [
            { name: "dojo", location: "libs/dojo" },
            { name: "dijit", location: "libs/dijit" },
            { name: "dojox", location: "libs/dojox" },
        ],
        parseOnLoad: true,
        has: {
                "dojo-firebug": true,
                "dojo-debug-messages": true
            },   
       async: true 
    }; 
```

其他 js 东西：

```
require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer",
    "dijit/layout/ContentPane", "dojo/parser"]); 
```

CSS：

```
html, body {
height: 100%;
margin: 0;
overflow: hidden;
padding: 0;
}

#appLayout {
height: 100%;
}
#leftCol {
width: 14em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:16:01.863

我建议查看教程页面上的“完整演示”，然后使用 firebug 将您的代码与示例进行比较。通常他们会遗漏一个额外的“demo.css”文件或其他你真正需要将所有东西拼接在一起的东西。

# linux - virtual centOS 6.2 - How to share /var/www using Samba

> ID：11258096
> 
> 赞同：2
> 
> 时间：2012-06-29T07:55:50.777
> 
> 标签：linux, apache, centos, samba

I have Windows XP, installed VirtualBox, and have now a centOS virtual machine. I am sharing folders between the two machines using Samba.

I have successfully accessed shared folders in the Home directory. My problem now is how do I access /var/www? (I have exactly the same setting with home directories in smb.conf except path).

Thanks in advance.

![enter image description here](../Images/8a5b5667cae197be7f12853cf3bdf2d7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:12:19.610

You must add such section to the smb.conf:

```
[www]
   comment = Web Root Dir
   path = /var/www
   valid users = user
   public = no
   writable = yes
   printable = no 
```

User `user` must exist in the system and in Samba (added by `smbpasswd -a user`). Of course you can use other username.

Check if your user `user` can access this filesystem in Linux (without samba). If it can't you must give him access rights in Linux.

# iphone - iOS从委托访问视图数据而不分配新视图

> ID：11258104
> 
> 赞同：1
> 
> 时间：2012-06-29T07:56:20.867
> 
> 标签：iphone, ios, xcode, delegates, uilocalnotification

我需要从应用程序的委托方法更改数据（标签）`ApplicationDidEnterForeground`而不分配新视图。该视图称为“提醒”，因此我将其导入到委托中，并且只有在分配它时才能访问其数据（提醒 *anything = [提醒分配...等），但因为我想更改当前加载的视图我需要直接访问已经加载的视图。

一旦我的应用程序进入前台，我将如何从委托更改主视图的标签？

obs：我知道我可以这样做，`-(void)ViewDidLoad`但`-(void)ViewWillAppear`它不会解决我的问题，因为它不会更改标签，例如，如果用户通过通知框打开应用程序（手机锁定时滑动图标）。在这种情况下，如果应用程序在后台打开，则不会调用上述方法。

我不知道我是否清楚，希望我是。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:07:19.613

只需从您的 ApplicationDidEnterForeground: 方法发送通知并在要更新标签的那个类上接收它......就像这样..

```
//Your ApplicationDidEnterForeground:
[[NSNotificationCenter defaultCenter] postNotificationWithName:@"UpdateLabel" withObject:nill]; 
```

并在其中添加观察者 viewDidLoad: 您要更新标签的控制器

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                  selector:@selector(updateLabel:)
                                  name:@"UpdateLabel"
                                  object:nil]; 
```

在同一个班级中制作了您的方法...

```
- (void)updateLabel:(NSNotification *)notification{
    update label
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:27:27.623

如果您正在使用情节提要，您可以这样做以访问正在查看的当前视图

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{ 
UINavigationController *a=_window.rootViewController;
Reminder *rem = a.topViewController;
rem.label.text=@"test";
} 
```

如果不使用故事板

当我创建以后需要访问的视图时，我将它们定义为一个属性，就像这样

在 AppDelegate.h

```
//@interface SIMCAppDelegate : UIResponder <..........>
//{
//Some variables here
//}

//Properties here
@property (strong, nonatomic) Reminder *reminder;

//Some method declaration here
//eg: -(void) showSomething; 
```

在 AppDelegate.m 上

```
//@implementation AppDelegate

@synthesize reminder; 
```

所以当我分配/初始化这样的视图时

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//codes before here

self.reminder = [[Reminder alloc] init];
self.reminder.label.text = @"OLD LABEL";
//codes after here
} 
```

分配其他方法后，我将能够再次访问它，像这样

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{

self.reminder.label.text = @"NEW LABEL";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:04:12.567

可能您可以尝试以下代码 -

```
NSMutableArray *activeControllerArray =  [self.navigationController.viewControllers mutableCopy];
for (int i = 0; i< [activeControllerArray count]; i++) {
    if ([[activeControllerArray objectAtIndex:i] isKindOfClass:[Reminder Class]) {
        Reminder *object = [activeControllerArray objectAtIndex:i];

        //Perform all the task here which you want.

        break; //Once found break the loop to do further processing.
    }
} 
```

# mediaelement.js - mediaelement.js 从 php 加载视频

> ID：11258107
> 
> 赞同：0
> 
> 时间：2012-06-29T07:56:34.253
> 
> 标签：mediaelement.js

我正在尝试使用 mediaelement.js 从 php 加载视频，但它不起作用..它显示“下载文件”

```
<video src="http://localhost/readmp4.php?id=111" width="640" height="360" id="player2" controls="controls">
<source type="video/mp4" src="http://localhost/readmp4.php?id=111" />
</video>
<script>
$('video').mediaelementplayer({});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T07:21:15.070

我花了 1.5 小时来解决为什么 mediaelement 没有播放从 php 返回的音频文件。darleys 的建议有效，但添加 type="audio/mpeg" 也使其有效。

`<audio src="stream.php?file=<?php echo urlencode($abs_file);?>" type="audio/mpeg" />`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-02T07:26:05.243

1.  例如，确保将 mp4 伪装成路径而不是 php 请求 url`<video src=/junk/junk.mp4> instead of <video src=video.php?name=junk>`

2.  当用户请求一个路径路由到一个 php 文件，该文件将读取在某个位置保护的视频文件时，执行一个到 php 文件的 htaccess 路由。例如 ...

> RewriteRule ^junk/(.*) /preview.php?media=$1 [QSA,L]

1.  现在在 php 中，请确保也满足 safari (ipad/iphone) 请求...

    ```
    <?php
    class VideoGroup1 {
       public function preview() { 
           $id = substr($_REQUEST['media'],0,strrpos($_REQUEST['media'],"."));
           $thisMedia = Pillar_Manage_Media::fetchMedia($id);
           //echo Foundry_Useful::unsealit($thisMedia['path']).$thisMedia['mediaid'];
           $file = Foundry_Useful::unsealit($thisMedia['path']).$thisMedia['mediaid'].".mp4";
           $filesize = filesize($file);

           $offset = 0;
           $length = $filesize;

           if ( isset($_SERVER['HTTP_RANGE']) ) {

               $partialContent = true;

               preg_match('/bytes=(\d+)-(\d+)?/', $_SERVER['HTTP_RANGE'], $matches);

               $offset = intval($matches[1]);
               $length = intval($matches[2]) - $offset;
           } else {
               $partialContent = false;
           }

           $file = fopen($file, 'r');

           fseek($file, $offset);

           $data = fread($file, $length);

           fclose($file);

           if ( $partialContent ) {

               header('HTTP/1.1 206 Partial Content');

               header('Content-Range: bytes ' . $offset . '-' . ($offset + $length) . '/' . $filesize);
           }

           header('Content-Type: video/mp4');
           header('Content-Length: ' . $filesize);
           header('Content-Disposition: attachment; filename="' . $file . '"');
           header('Accept-Ranges: bytes');

           print($data);

       }//End Function preview

    }//END Class VideoGroup1 
    ```

# php - 使用 twitter API 向关注者发送批量直接消息

> ID：11258108
> 
> 赞同：2
> 
> 时间：2012-06-29T07:56:37.050
> 
> 标签：php, twitter

推特 API 的新手。

要求：

需要向登录用户的 Twitter 关注者发送直接消息（在 twitter 中）。也就是说，一旦用户从我的网站登录到 Twitter 并发送消息，他应该能够选择他的关注者。

可以批量发送DM吗？或者有什么限制？我应该为此需要一个应用程序吗？任何可用的示例 php 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:33:36.527

我想你没有想过用[谷歌搜索你的问题](https://www.google.com/search?q=Send+bulk+direct+messages+to+followers+using+twitter+API)吗？[任何 Twitter 帐户每天](https://support.twitter.com/articles/15364-about-twitter-limits-update-api-dm-and-following)都有250 个 DM 的限制，这适用于 API 和手动 DM。我想即使您找到某种方法来规避此限制，您的方法也会受到反对，并且您的帐户可能会被阻止。

# javascript - 悬停div jquery

> ID：11258117
> 
> 赞同：2
> 
> 时间：2012-06-29T07:57:27.310
> 
> 标签：javascript, jquery, show-hide

这是我的脚本：

```
 <body>
    <div id ="mainCategory" class='fade'>
        Category</div>
    <div id="divSubCategory">
        Category1
        <br />
        Category2
    </div>
    <script type="text/javascript">
        $("div").hover(
            function () {
                $(this).append($("#divSubCategory").html());
            },
            function () {
                $("#divSubCategory").remove();
            }
         );
        $("#divSubCategory.fade").hover(function () { $(this).fadeOut(100); $(this).fadeIn(500); });

    </script>
</body> 
```

我想在 mainCategory 悬停时显示和隐藏 divSubCategory。但它不起作用。我应该添加什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T08:02:59.677

```
$(document).ready(function(){
    $('#mainCategory').bind('mouseenter', function() {
        $('#divSubCategory').fadeIn();
    });
    $('#mainCategory').bind('mouseleave', function() {
        $('#divSubCategory').fadeOut();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:08:10.503

好的，伙计，问题是您正在使用`.html()`. 这会复制内部 html（也不是外`<div id="divSubCategory"></div>`部位......只是中间的位。

因此，当您`$('#divSubCategory').remove()`删除 HTML 中的实际 div 时，而不是您移动到上面 div 中的 HTML。

假设你有`display: none`你`#divSubCategory`会看到来自该 div 的文本被附加到第一个 div，然后当你鼠标移出时它不会消失（尽管第二个（隐藏的）div 将被删除）。

无论如何，解决方法是使用`clone()`. 我会为你做一个小提琴：

[http://jsfiddle.net/fZZu5/1/](http://jsfiddle.net/fZZu5/1/)

我还为你修复了你的渐变。

编辑：这会在显示之前将其`div#divSubCategory`移入`div#mainCategory`，然后在鼠标移出时将其从那里完全删除-这是我假设您想从代码中执行的操作。尼克斯只是将它显示并隐藏在它所在的位置。根据您的需要，这两个答案都是正确的。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:19:43.663

这是 100% 满足您的要求：

检查这个：http: [//jsfiddle.net/ZWqnk/8/](http://jsfiddle.net/ZWqnk/8/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-29T07:59:17.467

将代码包装在 document.ready() 函数中

```
$(document).ready(function(){
   // Your code here
 }); 
```

# chef-infra - 厨师 http_request 错误

> ID：11258123
> 
> 赞同：5
> 
> 时间：2012-06-29T07:57:53.987
> 
> 标签：chef-infra

我正在使用 Chef Solo 在 EC2 实例上创建 Jenkins CI 服务器。我与 Chef 和 Vagrant 执行了类似的过程，没有任何问题，但是当我尝试在 EC2 上运行食谱时，我遇到了以下问题：

```
FATAL: Zlib::BufError: http_request[HEAD http://updates.jenkins-ci.org/latest/git.hpi] (chef-jenkins::default line 70) had an error: Zlib::BufError: buffer error 
```

本质上 Jenkins 安装正常，但是当它尝试获取以下插件时：

```
jenkins[:server][:plugins] 
```

对于每个插件，它都会失败并显示上述消息。

我正在使用：[https](https://github.com/fnichol/chef-jenkins) ://github.com/fnichol/chef-jenkins 。

我在同一个插件 url 上的 EC2 实例上尝试了一个简单的 wget，但确实收到以下错误：

```
Connecting to updates.jenkins-ci.org|63.246.20.93|:443... connected.
ERROR: certificate common name `jenkins-ci.org' doesn't match requested host name `updates.jenkins-ci.org'.
To connect to updates.jenkins-ci.org insecurely, use `--no-check-certificate'. 
```

我不知道这是否是 Jenkins 的临时问题（由于 Jenkins 端的问题，我在使用 Chef 安装 Jenkins 之前遇到了一些问题），或者 EC2 设置是否有问题。

与以往一样，我们将不胜感激任何帮助。

...顺便说一下，Stackoverflow 的“devops”标签在哪里？我是否在错误的 Exchange 上发帖...是开发人员问题还是操作问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:59:34.467

这张[Chef Ticket](http://tickets.opscode.com/browse/CHEF-3218)可能是相关的。如果您比较[chef-jenkins 食谱的第 70 行，](https://github.com/fnichol/chef-jenkins/blob/master/recipes/default.rb#L70)您会看到 http_request 被调用，您可能需要修补`:disable_gzip`票证中提到的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:40:26.083

比较 Ruby 等的版本。检查主要和次要版本是否相似。

```
gem update --system 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:30:42.277

尝试`update-ca-certificates`在该系统上运行。从自定义 AMI 创建机器时，我遇到了类似的问题

# php - 一次选择多个关系ID（MYSQL）

> ID：11258125
> 
> 赞同：0
> 
> 时间：2012-06-29T07:58:06.717
> 
> 标签：php, mysql, codeigniter

所以我们有：

```
table users

id name password parent_id 
```

第一个用户的 id 为 1，其他用户的 parent_id 为 1，所以我选择所有具有 parent_id == 1 的用户 - 他们是 1 的用户的孩子，没关系，但现在我需要选择具有所选用户之前的 parent_id 的用户，如果他们存在，当然

```
 user with id 1
   /      |     \
  /       |      \
 /        |       \
users with parent_id 1

user id 2    user id 3 id  user 4
|          |        |
|          |        |
|          |        | 
```

和这里是一样的，我需要为每个用户选择所有具有 parent_id 2、3、4 的用户，它从上到下就像一个金字塔（三角形）

所以问题是我怎样才能做出一个查询来一次性选择它，而不是通过提取id然后进行其他查询来进行许多查询 - 我认为这不好

你有想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:07:16.510

这是一个涵盖您的问题的问题：
[是否可以在单个查询中查询 MySQL 中的树结构表到任何深度？](https://stackoverflow.com/questions/169817/is-it-possible-to-query-a-tree-structure-table-in-mysql-in-a-single-query-to-an)

**以下查询仅适用于查找单个用户的子孙，是误解问题的产物！**

您可以尝试将`user`表本身加入两次。

```
SELECT * FROM users as up 
JOIN users as u on up.id=u.parent_id 
JOIN users as uc on u.id=uc.parent_id 
WHERE up.id={$grandParentUserId} 
```

别名：up = 用户的父母，u = 用户，us = 用户的孩子。
绝对不是一个漂亮的解决方案，但它是一个单一的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:38:58.263

我看到你正在使用 CI。你可以看看这个答案。和你的问题有点相关。您可以`NULL`先选择具有父 ID 的用户，然后填充他们的孩子

[https://stackoverflow.com/a/9937130/876117](https://stackoverflow.com/a/9937130/876117)

# android - 无java代码的SQLite函数时差解决方案

> ID：11258126
> 
> 赞同：1
> 
> 时间：2012-06-29T07:58:10.553
> 
> 标签：android, function, sqlite

嘿，请注意解决这个问题我知道这可能是可能的，但我不明白..我在android中使用sqlite来存储和操作字段，如下图所示

[图 http://s16.postimage.org/idc13pxdh/image.png](http://s16.postimage.org/idc13pxdh/image.png)

first_start_time,last_start_time,last_end_time 是 SQLite 数据库中的日期时间字段

我需要将 last_start_time 和 last_end_time 的差异作为函数的平均值，这样我就不需要以编程方式进行

```
last_end_time = strftime('%Y-%m-%d %H:%M:%S','now','localtime') 
last_start_time= strftime('%Y-%m-%d %H:%M:%S','2012-01-27 02:34:56') 
```

,i,e 如果我的第一次是 =2012-06-15 14:54:33

和结束时间是 =2012-06-15 14:54:40

那么时间差异将是这样的 =00:00:14;

我想要像 last_end_time -last_start_time 这样的不同时间

我也想使用触发器在 android 的 sqlite 数据库中使用

最后，我需要将我所有的 total_expended_time 总结为...

```
select sum(total_expended_time) from study_result 
```

..记住一件事，结果应该是日期时间戳，这样我就可以将它反映到我的用户界面中

任何建议将不胜感激

# search - SQL Server 在 nvarchar 和 ntext 中搜索

> ID：11258129
> 
> 赞同：7
> 
> 时间：2012-06-29T07:58:22.800
> 
> 标签：search, unicode, sql-server-2008-r2

我在 VS2010、C# ASP.NET Web 应用程序中使用 SQL Server 2008 作为我的数据库引擎。我的项目是波斯语（波斯语），所以我使用`nvarchar`和`ntext`作为我的数据类型。

我使用以下查询从我的数据库中查找行，但没有返回任何内容，而我有一行包含指定的关键字。当然，我的关键字是波斯语（unicode）。

这里出了什么问题？是因为使用波斯语吗？如何在包含 Unicode 字符的列中`nvarchar`进行搜索？`ntext`

```
myCommand = new SqlCommand("select * from tblArticle where name LIKE '%" + txtSearch.Text + "%'", SQLConnection); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T09:54:33.667

您应该使用`N'`前缀来指示您正在搜索 Unicode 字符串：

```
SELECT * FROM dbo.tblArticle WHERE name LIKE N'%......%' 
```

否则，您将搜索字符串转换回非 Unicode，然后搜索....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-22T06:10:01.627

您必须使用`COLLATE Latin1_General_BIN2`才能获得结果。为埃塞俄比亚人的阿姆哈拉语工作。

```
Select * From YourTableName where ColNameYouSearch LIKE N'%YourSerchCriteria%' COLLATE Latin1_General_BIN2" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:36:01.587

我不熟悉`C#` `ASP.NET`，但使用`nvarchar`or`ntext`不应该对查询类型产生任何影响。我在徘徊你只是将你的查询命令分配给一个变量而不是执行它..你应该做类似的事情`myCommand.execute()`吗？

# c# - IsHandledCreated 设置为 false 但在运行时设置为 true？

> ID：11258134
> 
> 赞同：1
> 
> 时间：2012-06-29T07:58:53.377
> 
> 标签：c#, winforms, multithreading

**你好，**

我有以下在 Application.Exit 期间运行的代码：

```
 if (InvokeRequired && this.IsHandleCreated)
            {
                this.Invoke(new Action(() => EndUpdate(Caller)));
                return;
            } 
```

这会引发异常：**在创建窗口句柄之前，不能在控件上调用 Invoke 或 BeginInvoke，**但只能在应用程序正在运行时调用。

奇怪的是，当调试器因错误而中断时，我可以看到 InvokeRequired 和 IsHandledCreated 都设置为 false，所以我不确定它是如何访问内部代码（this.Invoke）的？

在这种情况下，我只想关闭应用程序，没有任何异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:47:58.750

以这种方式检查条件不是线程安全的。*首先，当线程在if*运算符和调用**Invoke**之间切换时，您可以达到竞争条件。在其他情况下，我建议您在此处放置一些同步，但不可能进入框架代码。

此外，**Invoke**将查询放入 UI 消息队列，然后 UI 线程将其从队列中提取并执行。**同时，Invoke 使用Form.Handle**等待 UI 线程完成执行此查询。因此，请确保您没有在**EndUpdate方法中调用****Form.Close** () ，这可能会导致等待时出现异常。

 **我只是建议您将**EndUpdate** () 调用放在**Form.OnClosing** () 覆盖中。那将是线程安全的，并且**Handle**保证存在。**

# ruby-on-rails - ruby on rails 如何从视图中访问左连接变量

> ID：11258136
> 
> 赞同：0
> 
> 时间：2012-06-29T07:58:58.307
> 
> 标签：ruby-on-rails, sql-server, join

我的索引控制器：

```
class IndexController < ApplicationController
    def index
        @posts = Post.find(:all, :limit => 10,
                            :joins => "LEFT JOIN `users` ON users.user_id = posts.user_id",
                            :select => "posts.*, users.username",
                            :order => "posts.created_at DESC")
    end
end 
```

如何从视图中访问 users.username？

我试过

```
<% @posts.each do |post| %>
    <%= post.username %>
<% end %> 
```

但它似乎不起作用，因为我收到一条空白消息......

**编辑：**

我不得不在 LEFT JOIN 中使用以下代码：

```
:joins => "LEFT JOIN `users` ON posts.user_id = users.id", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:38:51.127

试试这个 ..

```
@posts = Post.find(:all, :limit => 10,
                            :joins => "LEFT JOIN `users` ON users.user_id = posts.user_id",
                            :select => "posts.*, users.username as user_name",
                            :order => "posts.created_at DESC")

<% @posts.each do |post| %>
    <%= post.user_name %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:43:17.430

我不得不在 LEFT JOIN 中使用以下代码：

```
:joins => "LEFT JOIN `users` ON posts.user_id = users.id", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:12:33.423

您的代码对 MVC 不友好。这就是它在 Rails 中做得更好的方式。

**1\. 您的模型应该执行以下查询：**

```
class User < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :user
  scope :last_10, order("created_at desc").limit(10) #or "id desc" which is quicker
end 
```

**2.在控制器中调用查询**

```
class IndexController < ApplicationController
  def index
    @posts = User.find_by_username(the_username).posts.last_10
  end
end 
```

**3\. 那你可以做，在你看来**

```
<% @posts.each do |p| %>
  <%= post.user.username %>
<% end %> 
```

# java - 扩展 Webdriver 或 Selenium2 的 click() 方法来计算网页响应

> ID：11258138
> 
> 赞同：1
> 
> 时间：2012-06-29T07:59:03.970
> 
> 标签：java, webdriver, selenium-webdriver

我计划使用以下代码计算页面响应时间，但这会导致冗余。

```
 long start;
  start = System.currentTimeMillis();  
  driver.get(url); or click();
  System.out.println (driver.getTitle() + " - " + (System.currentTimeMillis() - start) + " MilliSec"); 
```

我知道使用 Page 对象实现上述代码，在使用 Webdriver 接口扩展 click() 时需要帮助，以便在我调用 click() 时自动执行上面的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:27:06.710

正如我确实阅读了您的评论，还有另一种可能性。构建您自己的类，该类将实现 WebElement 接口。在这种情况下，您将不得不实现WebElement 的**所有**方法，这可能不值得。但是，如果您想采用这种方法，我建议您这样做：

```
public class MyWebElement implements WebElement{
  private WebElement element

  //... all the WebElement methods must be implemented
  //but I will show only the click:

  @Override
     public void click(){
     long start;
     start = System.currentTimeMillis();  
     element.click();
     System.out.println (driver.getTitle() + " - " + (System.currentTimeMillis() - start) + " MilliSec");

  }
} 
```

稍后在代码中：

```
@Test
public void testSomething(){
  driver.get("http://foo.bar");
  MyWebElement elem = driver.find(By.id("baz"));
  elem.click();
} 
```

再说一遍：通过使用这种方法，您**必须**实现*所有*WebElement 方法——即使是那些您永远不会在测试中使用的方法。处于您的位置，我将使用我在 mz 先前答案中暗示的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:12:54.943

我实现它的方式是我编写自己的 Java 类来代表页面。所以如果我想测试谷歌，我有一些看起来像这样的类：

```
public class GoogleUI{
   private WebElement searchButton;
   private WebDriver driver;

   public GoogleUI(){
     driver = new FirefoxDriver();
   }

  public void clickSearch(){
   long start;
   searchButton = driver.findElement(By.name("btnG"));
   start = System.currentTimeMillis();  
   searchButton.click();
   System.out.println (driver.getTitle() + " - " + (System.currentTimeMillis() - start) + " MilliSec"); 

  }
} 
```

后来在测试中：

```
@Test
public void testGoogleSearchButton(){
   GoogleUI google = new GoogleUI();
   google.clickSearch();
} 
```

方法`clickSearch`本身包装点击并打印时间。

这显然被精简到绝对最低限度，但我希望你能在你的测试中调整它

# backbone.js - Requirejs2：如何处理自己的文件？

> ID：11258148
> 
> 赞同：0
> 
> 时间：2012-06-29T07:59:36.410
> 
> 标签：backbone.js, requirejs

我已经配置 requirejs 来加载核心库（jquery、下划线、主干）。现在我想添加我的主干模型、控制器、视图等以异步加载

我发现了很多关于这个主题的教程和很多“现成的”样板，不幸的是我提到大多数方法已被弃用或相当复杂（即使有更好的方法）。

一个例子是我如何为主要库配置 requirejs： [https ://stackoverflow.com/a/10914666/1309847](https://stackoverflow.com/a/10914666/1309847)

那么如何使用简单有效的 Requirejs 配置加载主干视图、模型、集合、路由器、控制器和模板？

**我听从了你的建议，但遇到了一些奇怪的错误**

main.js

```
require.config({
    paths: {
        jquery: 'vendors/jquery/jquery',
        underscore: 'vendors/underscore/underscore',
        backbone: 'vendors/backbone/backbone'
    },
    shim: {
        underscore: {
            exports: '_'
        },
        backbone: {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        }
    }
});

require(['app'], function(app){

}); 
```

应用程序.js

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone){
    var Message = new Backbone.Model.extend({
        //idAttribute: '_id',
        //defaults: { body: '' }
        //url: function(){ return this.id ? '/messages/' + this.id : '/messages'; }
    });

    var newMessage = new Message({ body: 'hi' });
    newMessage.save();
}); 
```

app.js 中出现错误：

```
Uncaught TypeError: Object [object Object] has no method 'apply' 
```

当我评论新的 Backbone.Model.extend 部分时，我不再收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:08:57.420

根据我的经验，引导应用程序的最佳方式是创建 Backbone.Router。因此，您可以将 url 与您的应用程序功能相关联。如果您使用的是 RequireJS+Backbone，您可能有一个 main.js，其中配置了 RequireJS（路径、垫片等）。第一次调用“require”用于加载初始脚本以引导整个应用程序。例如：

```
/**
* main.js - RequireJS bootstrap
*/
require.config({
  paths: {
    //your paths
  },
  shim: {
    //your shims
  }
});

require(
  [
    'app' //app.js is at the same directory as main.js 
  ],
  function(app) {
    app.init();
  }
); 
```

然后在 app.js 中你可以创建一个新的路由器实例，或者你可以开始创建视图和模型。

如需进一步参考：[http ://addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:31:33.623

所以我现在已经正确理解了：你必须在你自己的自定义 js 文件周围包装一个 requirejs 函数。

该函数称为定义。第一个参数是您在 main.js 文件中定义的依赖项数组，或者是您的另一个自定义 js 的相对路径。第二个参数是保存原始文件的回调。重要的是您返回要共享的对象、函数、数组或变量。

整个事情看起来像这样：

```
define(
    ['underscore', 'backbone'], // the dependencies (either relative paths or shortcuts defined in main.js
    function(_, Backbone){ // the return statement of the deps mapped to a var
        var MessageModel = Backbone.Model.extend({ // the original code, file
            defaults: { body: '' },

            initialize: function(){}
        });

        return MessageModel; // the return statement, sharing the "final result", sometimes you return the initialize parameter
    }); 
```

包装模型的集合也是如此：

```
define(
    ['jquery', 'underscore', 'backbone', 'models/message_model'], // deps and the last one is the relative path
     function($, _, Backbone,MessageModel){ // same as above explained
var MessageCollection = Backbone.Collection.extend({
    model: MessageModel,

    initialize: function(){}
});

return MessageCollection; 
```

});

我现在只需要弄清楚如何引导到整个应用程序。但我认为我需要更多的骨干知识才能做到这一点:)

# c - 使用套接字 C 编译函数警告

> ID：11258151
> 
> 赞同：0
> 
> 时间：2012-06-29T07:59:41.100
> 
> 标签：c, sockets, function

这是我的程序：

```
 int main(int argc, char *argv[]){
    if(argc != 2){
        printf("Uso: ./server <numero porta>\n");
        exit(1);
    }
    int sockd, newsockd, LunghezzaClient;
    int NumPorta = atoi(argv[1]);
    struct sockaddr_in serv_addr, cli_addr; /* indirizzo del server e del client */
    int rc, fd;
    off_t offset = 0;
    struct stat stat_buf;
    char filename[1024] = {};
    size_t fsize;

    if((sockd = socket(AF_INET, SOCK_STREAM, 0)) < 0){
        perror("Errore creazione socket\n");
        exit(EXIT_FAILURE);
    }
    bzero((char *) &serv_addr, sizeof(serv_addr)); /* bzero scrive dei null bytes dove specificato per la lunghezza specificata */
    serv_addr.sin_family = AF_INET; /* la famiglia dei protocolli */
    serv_addr.sin_port = htons(NumPorta); /* porta htons converte nell'ordine dei byte di rete */
    serv_addr.sin_addr.s_addr = INADDR_ANY; /* dato che è un server bisogna associargli l'indirizzo della macchina su cui sta girando */

    if(bind(sockd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0){
        perror("Errore di bind\n");
        onexit(NULL, sockd, NULL, 1);
    }

    if(listen(sockd, 5) < 0){
            perror("Errore nella funzione listen");
            onexit(NULL, sockd, NULL, 1);
    }
    LunghezzaClient = sizeof(cli_addr);
    signal (SIGINT, ( void *)sig_handler); 
    while(1){
        if((newsockd = accept(sockd, (struct sockaddr *) &cli_addr, (socklen_t *) &LunghezzaClient)) < 0){
            perror("Errore nella connessione\n");
            onexit(newsockd, sockd, NULL, 2);
        }

        /* get the file name from the client */
        if((rc = recv(newsockd, filename, sizeof(filename), 0)) < 0){
            perror("Errore nella ricezione del nome del file");
            onexit(newsockd, sockd, NULL, 2);
        }

        /* Terminiamo il nome del file con NULL e se ultimo carattere è \n o \r lo cambiamo con \0*/
        filename[rc] = '\0';
        if (filename[strlen(filename)-1] == '\n')
            filename[strlen(filename)-1] = '\0';
        if (filename[strlen(filename)-1] == '\r')
            filename[strlen(filename)-1] = '\0';

        /* inet_ntoa converte un hostname in un ip decimale puntato */
        fprintf(stderr, "Ricevuta richiesta di inviare il file '%s' dall' indirizzo %s\n", filename, inet_ntoa(cli_addr.sin_addr));

        /* open the file to be sent */
        fd = open(filename, O_RDONLY);
        if (fd < 0) {
            fprintf(stderr, "Impossibile aprire '%s': %s\n", filename, strerror(errno));
            onexit(newsockd, sockd, NULL, 2);
        }

        /* get the size of the file to be sent */
        if(fstat(fd, &stat_buf) < 0){
            perror("Errore fstat");
            onexit(newsockd, sockd, fd, 3);
        }
        fsize = stat_buf.st_size;
        if(send(newsockd, &fsize, sizeof(fsize), 0) < 0){
            perror("Errore durante l'invio della grandezza del file\n");
            onexit(newsockd, sockd, fd, 3);
        }
        /* copy file using sendfile */
        offset = 0;
        rc = sendfile(newsockd, fd, &offset, stat_buf.st_size);
        if (rc == -1) {
            fprintf(stderr, "Errore durante l'invio di: '%s'\n", strerror(errno));
            onexit(newsockd, sockd, fd, 3);
        }
        if (rc != fsize) {
            fprintf(stderr, "Trasferimento incompleto: %d di %d bytes\n", rc, (int)stat_buf.st_size);
            onexit(newsockd, sockd, fd, 3);
        }

        onexit(newsockd, NULL, fd, 4);
    }
    close(sockd);
    exit(EXIT_SUCCESS);
} 
```

但是当我尝试编译它时，由于函数中的一些错误，`gcc -Wall -O3 -o program myprogram.c`我收到**了很多**警告`onexit`。这是我收到的警告：

```
server-iterativo.c: In function ‘main’:
server-iterativo.c:51:3: warning: passing argument 1 of ‘onexit’ makes integer from pointer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘int’ but argument is of type ‘void *’
server-iterativo.c:56:7: warning: passing argument 1 of ‘onexit’ makes integer from pointer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘int’ but argument is of type ‘void *’
server-iterativo.c:92:7: warning: passing argument 3 of ‘onexit’ makes pointer from integer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘struct FILE *’ but argument is of type ‘int’
server-iterativo.c:97:7: warning: passing argument 3 of ‘onexit’ makes pointer from integer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘struct FILE *’ but argument is of type ‘int’
server-iterativo.c:104:9: warning: passing argument 3 of ‘onexit’ makes pointer from integer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘struct FILE *’ but argument is of type ‘int’
server-iterativo.c:108:9: warning: passing argument 3 of ‘onexit’ makes pointer from integer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘struct FILE *’ but argument is of type ‘int’
server-iterativo.c:111:3: warning: passing argument 2 of ‘onexit’ makes integer from pointer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘int’ but argument is of type ‘void *’
server-iterativo.c:111:3: warning: passing argument 3 of ‘onexit’ makes pointer from integer without a cast [enabled by default]
server-iterativo.c:23:6: note: expected ‘struct FILE *’ but argument is of type ‘int’
server-iterativo.c: In function ‘onexit’:
server-iterativo.c:131:3: warning: passing argument 1 of ‘close’ makes integer from pointer without a cast [enabled by default]
/usr/include/unistd.h:354:12: note: expected ‘int’ but argument is of type ‘struct FILE *’
server-iterativo.c:136:3: warning: passing argument 1 of ‘close’ makes integer from pointer without a cast [enabled by default]
/usr/include/unistd.h:354:12: note: expected ‘int’ but argument is of type ‘struct FILE *’ 
```

我不明白为什么我得到这个错误:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:05:07.367

警告信息看起来很清楚：

在您删除的代码中`main`，您调用您的函数，该函数`onexit`期望其参数 1 为`int`带有指针的 an。你应该喂一个`int`！

* * *

再来一次。*您*定义了自己的函数`onexit`，如下所示：

```
void onexit(int c, int s, FILE *fp, int flag); 
```

*您*选择它想要作为参数 1 an `int`。然后，当您按如下方式调用它时：

```
onexit(NULL, sockd, NULL, 1); 
```

*你*把它`NULL`作为参数 1，它是一个指针，而不是一个`int`.

因此，编译器警告*您*它必须*从指针生成整数*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:13:59.953

顺便说一句，如果 rc 恰好为零，下面的代码片段会做一些讨厌的事情：

```
filename[rc] = '\0';
if (filename[strlen(filename)-1] == '\n')
    filename[strlen(filename)-1] = '\0';
if (filename[strlen(filename)-1] == '\r')
    filename[strlen(filename)-1] = '\0'; 
```

最好先检查 rc：

```
if (rc > 0 && filename[rc-1] == '\n') filename[--rc] = 0;
if (rc > 0 && filename[rc-1] == '\r') filename[--rc] = 0; 
```

避免 2-4 次调用 strlen() 也会为您节省一些周期。

为了避免缓冲区溢出（rc 可能等于 sizeof 文件名），您可以使用

```
if((rc = recv(newsockd, filename, sizeof filename -1, 0)) < 0){...} 
```

# asp.net - 当用户单击按钮时，将数据从 silverlight 发送到 asp.net（或 php？）

> ID：11258155
> 
> 赞同：0
> 
> 时间：2012-06-29T07:59:54.937
> 
> 标签：asp.net, .net, silverlight, events, event-handling

如果我单击 Silverlight 应用程序的按钮，另一个第三方 Web 应用程序必须获取一些数据。

到目前为止，我的经验是创建可以在需要时调用的 Web 服务功能，但在这种情况下，我必须让客户有可能“处理按钮上的点击事件”。在实际情况下，第三方应用程序是 ASP.Net，但是，如果可能的话，我想做一些可移植的事情。

在开始我想到一些疯狂的想法之前，我会问：你会怎么做？

皮莱吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:14:31.693

我使用这个类来动态创建和发布表单

```
public class PassData
  {
    public static PassData Default = new PassData();

      public void Send(string strUrl, Dictionary<string, object> Parameters, string ContainerClientID = "divContainer")
      {
        var obj = HtmlPage.Document.GetElementById(ContainerClientID);
        if (obj != null)
        {
          HtmlElement divContainer = obj as HtmlElement;
          ClearContent((HtmlElement)divContainer);

          HtmlElement form = HtmlPage.Document.CreateElement("form");
          form.SetAttribute("id", "frmPostData");
          form.SetAttribute("name", "frmPostData");
          form.SetAttribute("target", "_blank");
          form.SetAttribute("method", "POST");
          form.SetAttribute("action", strUrl);

          if (Parameters != null)
            foreach (KeyValuePair<string, object> item in Parameters)
              {
                HtmlElement hidElement = HtmlPage.Document.CreateElement("input");
                hidElement.SetAttribute("name", item.Key);
                hidElement.SetAttribute("value", item.Value.ToString());
                form.AppendChild(hidElement);
              }

          divContainer.AppendChild(form);
          form.Invoke("submit");

          ClearContent((HtmlElement)divContainer);
        }
      }

      private void ClearContent(System.Windows.Browser.HtmlElement obj)
      {
        foreach (HtmlElement item in obj.Children)
        {
          obj.RemoveChild(item);
        }
      }

  } 
```

divContainer 是 html 中 div 的 id

# analytics - 应用分析

> ID：11258156
> 
> 赞同：0
> 
> 时间：2012-06-29T07:59:58.683
> 
> 标签：analytics

我的应用程序中有 mtiks 移动分析软件，我想知道我是否必须通知用户我使用它还是可以忽略它？我会遇到法律问题还是我的申请不被接受？

感谢新人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:06:53.787

无需在应用程序本身中显示免责声明，您可以将其包含在您的应用程序 EULA 中。Google Analytics 示例的更多详细信息：[http ://www.quora.com/Whats-the-best-way-to-inform-our-iPhone-App-users-that-we-use-Google-Analytics-to -跟踪他们的使用情况](http://www.quora.com/Whats-the-best-way-to-inform-our-iPhone-App-users-that-we-use-Google-Analytics-to-track-their-usage)

# php - 去掉所有空格

> ID：11258157
> 
> 赞同：0
> 
> 时间：2012-06-29T07:59:58.823
> 
> 标签：php, curl, preg-replace, whitespace, strip

我使用 curl 将网站的内容转换为字符串。之后我想删除所有的空白。为此，我使用`$content = preg_replace('/\s+/', '', $content);`. 但它不能正常工作。我究竟做错了什么？

我使用此代码来获取内容：

```
$curl_handle = curl_init();
curl_setopt($curl_handle, CURLOPT_URL, 'http://www.italiakalmar.se/ui/Article/show.aspx?id=185&m=165');
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true);
$content = curl_exec($curl_handle);
curl_close($curl_handle);

$pos = stripos($content, "<body");
$content = substr($content, $pos);

$content = strip_tags($content);

$content = html_entity_decode($content, ENT_COMPAT, 'UTF-8');

$content = preg_replace('/\s+/', '', $content);

$content = mb_strtolower($content, 'utf-8');

echo $content = str_replace("–", "-", $content); 
```

I then get this string: //fabrikenrestaurangenpizzerianintromenykvalitetallergihittatillosspizzeriaitaliapizzeriaitaliaÃ¶ppnadedÃ¶rrarnafÃ¶rstagÃ¥ngenredan1977,ochdrivssedandessisammamiljÃ¶ochsammakaraktÃ¤ristiskastil.viharalltidutsÃ¶ktapizzoraverkÃ¤ntgodsmakochkvalitet.komintillpizzeriaitaliaochlÃ¥tossserveradigenutsÃ¶ktpizza.elleromdetpassarbÃ¤ttre-lÃ¥tosslevereradenhemtilldig!nukanmanÃ¤venbetalamedkortvidutkÃ¶rning! Ã¶ppettider:mÃ¥n-torskl:15-21fredag​​Â Â kl:15-22lÃ¶rdagÂ Â kl:12-22sÃ¶ndagÂ kl:12-21ingÃ¥rikalmarkrogar.se

如您所见，空白仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:08:32.223

```
$content = str_replace(' ', '', $content); 
```

没有正则表达式方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:25:40.930

```
$content = preg_replace('/\s+/', '', $content); 
```

只搜索一个或第一个匹配

您可以使用此匹配给定字符串 $content 中的所有空格

```
$content = preg_replace('/\s+/g', '', $content); 
```

您需要将“g”用于正则表达式中的全局搜索

您可以使用这个免费的在线工具测试甚至创建正则表达式

[http://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)

# jquery - 这种 jQuery 插件模式添加公共方法的缺点

> ID：11258159
> 
> 赞同：3
> 
> 时间：2012-06-29T08:00:03.037
> 
> 标签：jquery, jquery-plugins, design-patterns

我目前正在开发一个非常大的插件我想知道这种添加公共方法的模式是否有任何缺点，如果有，那是什么？

**编辑：**澄清一下，使用这种方法，我可以看到的优点是您可以使用插件范围内可用的任何私有变量，并且可以轻松地链接方法。我看不到的缺点是什么？它一直运行良好，但我不确定在可扩展性方面是否推荐用于大型插件。

这是简化的代码：

```
;(function($){

  $.fn.myplugin = function () {

    var self = this

    var publicMethods = {      
      one: function () {
        ...
        return self
      },
      two: function () {
        ...
        return self
      },
      three: function () {
        ...
        return self
      }
    }

    for (var m in publicMethods)
      self[m] = publicMethods[m]

    return self

  }

}(jQuery))

// Usage
var $myplugin = $('#foo').myplugin()
$myplugin.one().two().three() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:47:38.487

是的，它有缺点。

1.  您正在使用*所有*`publicMethods`. 这意味着`one()`, `two()`and`three()`也可以在其他 jQuery 对象上调用——在你调用之后`.myplugin()`——这可能会导致意想不到的结果？

2.  以这种奇怪的方式保持代码结构是高度不可维护的 - 函数内部的对象。为什么不将您的添加`publicMethods`到`$.fn`，因为这基本上是您想要实现的目标？

我建议只在范围内制作和访问`one()`，这样你就可以做类似但不做的事情。`two()``three()``myplugin()``$('#foo').myplugin().one()``$('#foo').one()`

# actionscript-3 - 错误 #2044：未处理的 ioError:。文本=错误 #2032：流错误。仅在 IE8 及更低版本中

> ID：11258163
> 
> 赞同：0
> 
> 时间：2012-06-29T08:00:58.890
> 
> 标签：actionscript-3, flash, internet-explorer, crossdomain.xml

我在 HTTP 中加载的 Flash 应用程序存在问题，然后通过 HTTPS 从不同域获取数据。每个站点上的 crossdomain.xml 都配置为支持此功能，并且可以在 Chrome、Firefox 和 IE9 中运行。但是在 IE8 及更低版本中，我收到“错误 #2044：未处理的 ioError:.text=Error #2032：流错误”错误。当使用 Charles 调试它时，我可以看到请求已发出并且它由服务器提供服务，这意味着当它尝试读取它返回的数据时必须引起错误。我在 flash/as3 编程方面的经验几乎为零，并且一直在这个网站上查看大量类似的问题，但没有找到解决方案。似乎这通常与跨域或不正确的 url 有关，但由于它在其他浏览器中工作并且所有都根据 charles 提供服务，因此这不是由它引起的。

提前致谢。

# c# - 等效于 Dispatcher.Invoke 或 Dispatcher.RunAsync 的可移植类库

> ID：11258164
> 
> 赞同：10
> 
> 时间：2012-06-29T08:00:59.263
> 
> 标签：c#, .net, task-parallel-library, dispatcher, portable-class-library

在 .NET、Windows 8 和 Windows Phone 7 中，我的代码类似于：

```
public static void InvokeIfRequired(this Dispatcher dispatcher, Action action)
{
    if (dispatcher.CheckAccess())
    {
        action();
    }
    else
    {
        dispatcher.Invoke(action);
    }
} 
```

我将如何在可移植类库中做某事？最好有一个平台无关的实现。我的想法是使用 WP7 中没有的 TPL，但肯定很快就会出现。

```
// PortableDispatcher must be created on the UI thread and then made accessible 
// maybe as a property in my ViewModel base class.
public class PortableDispatcher
{
    private TaskScheduler taskScheduler = TaskScheduler.FromCurrentSynchronizationContext();

    public void Invoke(Action action)
    {
        if (Alread on UI thread. How would I do this.)
        {
            action();
        }

        Task.Factory.StartNew(
            action, 
            CancellationToken.None,
            TaskCreationOptions.None,
            taskScheduler);
    }
} 
```

我唯一不确定的是这会对性能产生什么影响。也许我会做一些测试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T08:20:08.133

您可以使用[SynchronizationContext.Post](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)或 Send 方法。它是可移植的，当您使用带有调度程序的 UI 框架时，当前同步上下文会将工作委托给调度程序。

具体来说，您可以使用以下代码：

```
void InvokeIfRequired(this SynchroniationContext context, Action action)
{
    if (SynchroniationContext.Current == context)
    {
        action();
    }
    else
    {
        context.Send(action) // send = synchronously
        // context.Post(action)  - post is asynchronous.
    }  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T13:39:43.173

随着 TPL 的出现。我想出了一个稍微改进的接受答案的版本，它返回一个任务，可以使用新的 async 和 await 关键字等待。

```
public Task RunAsync(Action action)
{
    TaskCompletionSource<object> taskCompletionSource = new TaskCompletionSource<object>();

    if (this.synchronizationContext == SynchronizationContext.Current)
    {
        try
        {
            action();
            taskCompletionSource.SetResult(null);
        }
        catch (Exception exception)
        {
            taskCompletionSource.SetException(exception);
        }
    }
    else
    {
        // Run the action asyncronously. The Send method can be used to run syncronously.
        this.synchronizationContext.Post(
            (obj) => 
            {
                try
                {
                    action();
                    taskCompletionSource.SetResult(null);
                }
                catch (Exception exception)
                {
                    taskCompletionSource.SetException(exception);
                }
            }, 
            null);
    }

    return taskCompletionSource.Task;
} 
```

# asp.net-mvc-3 - 在 asp .net mvc 中更新关系数据库

> ID：11258165
> 
> 赞同：1
> 
> 时间：2012-06-29T08:00:59.453
> 
> 标签：asp.net-mvc-3, relational-database

我正在开发一个简单的博客应用程序来自学 C# 和 asp .net mvc3。我陷入了需要更新帖子评论的阶段。

我的代码中的注释类如下：

```
 public class Comment
    {
        public int CommentID { get; set; }
        public string Name { get; set; }

        [DataType(DataType.EmailAddress)]
        public string Email { get; set; }

        [DataType(DataType.MultilineText)]
        public string CommentBody { get; set; }

        public int BlogID { get; set; } 
        public virtual Blog Blog { get; set; }
    } 
```

我在博客详细信息页面上有一个评论表单，其中包含姓名、电子邮件和评论。代码如下：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Comment.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Comment.Name)
        @Html.ValidationMessageFor(model => model.Comment.Name)
    </div>  
    <div class="editor-label">
        @Html.LabelFor(model => model.Comment.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Comment.Email)
        @Html.ValidationMessageFor(model => model.Comment.Email)
    </div>            

    <div class="editor-label">
        @Html.LabelFor(model => model.Comment.CommentBody)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Comment.CommentBody)
        @Html.ValidationMessageFor(model => model.Comment.CommentBody)
    </div>
    <p>
        <input type="submit" value="Add Comment" />
    </p> 
```

我不知道如何通过这个来传递 blogid，以便使用正确的 blogid 更新评论。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:07:35.240

您可以在表单中使用隐藏字段：

```
@Html.HiddenFor(x => x.Comment.BlogID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:07:01.517

```
@Html.HiddenFor(model => model.Comment.BlogID) 
```

# iphone - 标签未显示在 tableView 单元格上

> ID：11258166
> 
> 赞同：4
> 
> 时间：2012-06-29T08:01:11.710
> 
> 标签：iphone, objective-c, uitableview, ios5

我正在创建一个`TableView`包含 20 行的内容。我必须向偶数单元格添加单个标签，并且必须在奇数单元格中添加两个标签。当我添加所需的标签并滚动我的表格时，标签会随着我的下降而消失帮助我.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // UITableView *cell=[tableView ]
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    if(indexPath.row%2==0)
    {
        UILabel *cellLabel=[[UILabel alloc]initWithFrame:CGRectMake(100, 40, 40, 40)]; 
        cellLabel.text=@"o1";
        [cell addSubview:cellLabel];
        [cellLabel release];
    }
    else
    {
        UILabel *cellLabel1=[[UILabel alloc]initWithFrame:CGRectMake(100, 40, 40, 40)]; 
        cellLabel1.text=@"e1";
        [cell addSubview:cellLabel1]; 
        [cellLabel1 release];
        UILabel *cellLabel2=[[UILabel alloc]initWithFrame:CGRectMake(150, 40, 40, 40)]; 
        cellLabel2.text=@"e2";
        [cell addSubview:cellLabel2]; 
        [cellLabel2 release];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:39:25.363

检查这个。这与您的代码相同，我刚刚更改了每个标签的 Y 位置，并且滚动也可以正常工作。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ 静态 NSString *CellIdentifier = @"Cell";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
// UITableView *cell=[tableView ]
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    if(indexPath.row%2==0)
    {
        UILabel *cellLabel=[[UILabel alloc]initWithFrame:CGRectMake(100, 10, 40, 40)]; 
        cellLabel.text=@"o1";
        [cell addSubview:cellLabel];

    }
    else
    {
        UILabel *cellLabel1=[[UILabel alloc]initWithFrame:CGRectMake(100, 10, 40, 40)]; 
        cellLabel1.text=@"e1";
        [cell addSubview:cellLabel1]; 

        UILabel *cellLabel2=[[UILabel alloc]initWithFrame:CGRectMake(150, 10, 40, 40)]; 
        cellLabel2.text=@"e2";
        [cell addSubview:cellLabel2]; 

    }

}
return cell; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:30:23.423

这两种细胞是不同的，所以我会为每种细胞制作不同的细胞标识符。就像是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *EvenCellIdentifier = @"EvenCell";
    static NSString *OddCellIdentifier = @"OddCell";
    NSString* cellIdentifier = (indexPath.row % 2) == 0 ? EvenCellIdentifier : OddCellIdentifier;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        if(indexPath.row%2==0) 
        {
            UILabel *cellLabel=[[UILabel alloc]initWithFrame:CGRectMake(100, 40, 40, 40)]; 
            cellLabel.text=@"o1";
            [cell addSubview:cellLabel];
            [cellLabel release];
        }
        else
        {
            UILabel *cellLabel1=[[UILabel alloc]initWithFrame:CGRectMake(100, 40, 40, 40)]; 
            cellLabel1.text=@"e1";
            [cell addSubview:cellLabel1]; 
            [cellLabel1 release];
            UILabel *cellLabel2=[[UILabel alloc]initWithFrame:CGRectMake(150, 40, 40, 40)]; 
            cellLabel2.text=@"e2";
            [cell addSubview:cellLabel2]; 
            [cellLabel2 release];
        }
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:08:16.600

像这样做 ：

```
 (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // UITableView *cell=[tableView ]
    if (cell == nil)
    {
       cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    UILabel *cellLabel=[[UILabel alloc]initWithFrame:CGRectMake(100, 40, 40, 40)]; 
        cellLabel.text=@"o1";
cellLabel.tag = 2;
        [cell addSubview:cellLabel];
        [cellLabel release];

        UILabel *cellLabel1=[[UILabel alloc]initWithFrame:CGRectMake(100, 40, 40, 40)]; 
        cellLabel1.text=@"e1";
cellLable1.tag = 3;
        [cell addSubview:cellLabel1]; 
        [cellLabel1 release];
        UILabel *cellLabel2=[[UILabel alloc]initWithFrame:CGRectMake(150, 40, 40, 40)]; 
        cellLabel2.text=@"e2";
cellLabel2.tag = 4;
        [cell addSubview:cellLabel2]; 
        [cellLabel2 release];
    }

UILabel *label1 = (UILabel *) [cell viewWithTag:2];
UILabel *label2 = (UILabel *) [cell viewWithTag:3];
UILabel *label3 = (UILabel *) [cell viewWithTag:4];

if (indexPath.row%2==0)
{
label1.hidden = FALSE;
label2.hidden = TRUE;
label3.hidden = TRUE:
}
else 
{
label1.hidden = TRUE;
label2.hidden = FALSE;
label3.hidden = FALSE;
}

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:29:22.147

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    静态 NSString *MyIdentifier = @"MyIdentifier";
    静态 NSString *MyIdentifier1 = @"MyIdentifier1";
    UITableViewCell *cell;
    if(indexPath.row % 2 != 0)
    {
        单元格 = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    }
    别的
    {
        单元格 = [tableView dequeueReusableCellWithIdentifier:MyIdentifier1];
    }
    如果（细胞 == 零）
    {
        if(indexPath.row % 2 != 0)
        {
            单元格=[自我重用TableViewCellWithIdentifier:MyIdentifier withIndexPath:indexPath];
        }
        别的
        {
            单元格=[自我重用TableViewCellWithIdentifier:MyIdentifier1 withIndexPath:indexPath];
        }
    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    返回单元格；
}
-(UITableViewCell *)reuseTableViewCellWithIdentifier:(NSString *)identifier withIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier]autorelease];
    if([标识符 isEqualToString:@"MyIdentifier"])
    {

        UILabel *l1=[[[UILabel alloc]initWithFrame:CGRectMake(5, 5, 30, 20)]autorelease];
        l1.backgroundColor=[UIColor redColor];
        [cell.contentView addSubview:l1];
        UILabel *l2=[[[UILabel alloc]initWithFrame:CGRectMake(65, 5, 30, 20)]autorelease];
        l2.backgroundColor=[UIColor grayColor];
        [cell.contentView addSubview:l2];       
    }
    别的
    {
        UILabel *l1=[[[UILabel alloc]initWithFrame:CGRectMake(5, 5, 30, 20)]autorelease];
        l1.backgroundColor=[UIColor blueColor];
        [cell.contentView addSubview:l1];
    }
    返回单元格；
}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:31:20.270

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   if(indexPath.row%2==0)
   {
    静态 NSString *CellIdentifier = @"CustomCell";

    CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    如果（单元格 == 零）
    {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        for (id currentObject in topLevelObjects)
        {
            if ([currentObject isKindOfClass:[UITableViewCell 类]])
            {
                cell = (CustomCell *) currentObject;
                休息;
            }
        }
    }
    cell.capitalLabel.text =[大写对象AtIndex:indexPath.row]；
    cell.stateLabel.text = [状态 objectAtIndex:indexPath.row];
    cell.t1.delegate=self;
    cell.t1.tag=indexPath.row;
    cell.t1.text=[arrTemp objectAtIndex:indexPath.row];
    cell.s1.backgroundColor=[UIColor grayColor];
    cell.s1.contentSize=CGSizeMake(1000, 40);
    返回单元格；
   }
    别的
    {
        静态 NSString *CellIdentifier1 = @"CustomCell1";

        CustomCell1 *cell1 = (CustomCell1 *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
        如果 (cell1 == nil)
        {
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell1" owner:self options:nil];
            for (id currentObject in topLevelObjects)
            {
                if ([currentObject isKindOfClass:[UITableViewCell 类]])
                {
                    cell1 = (CustomCell1 *) currentObject;
                    休息;
                }
            }
        }
        cell1.l1.text=@"alok";
        返回单元格1；

    }

}

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T04:14:18.977

```
 static NSString *CellIdentifier = @"Cell";
  static NSString *CellIdentifierButton = @"CellButton";
   UITableViewCell *cell = nil;

      if (indexPath.section <=2) 
      {
        if(indexPath.section==2&&indexPath.row==4)
        {
            cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifierButton]; 

        }
        else
        {
            cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        }
     }   
    if (cell == nil)
    {   
        if (indexPath.section <=2)
        {
            if(indexPath.section==2&&indexPath.row==4)
            {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifierButton];
                UIButton *b1 = [[UIButton alloc]initWithFrame:CGRectMake(200, 10, 300, 80)];
                [b1 setBackgroundColor:[UIColor redColor]];
                [b1 setTag:501];           
                [cell.contentView b1];

                UIButton * b2 = [[UIButton alloc]initWithFrame:CGRectMake(200, 120, 300, 80)];
                [b2 setBackgroundColor:[UIColor redColor]];
                [b2 setTag:502];           
                [cell.contentView b2];

            }
            else
            {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
                UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(10, 0, 250, 44)];
                [label setBackgroundColor:[UIColor clearColor]];
                [label setTag:500];           
                [cell.contentView addSubview:label];

                //end for section 1

                //for section2

                }
                //end for section 2

            }

        }
    }

    //====setting the values===//
    if (indexPath.section ==0) 
    {
        UILabel *label = (UILabel *)[cell.contentView viewWithTag:500];
        if (label) {
            [label setText:[arr1 objectAtIndex:indexPath.row]];
        }
    }
    if (indexPath.section ==1) 
    {
        UILabel *label = (UILabel *)[cell.contentView viewWithTag:500];
        if (label) {
            [label setText:[arr2 objectAtIndex:indexPath.row]];
        }
    } 
```

# android - ACR122u NFC读卡器与安卓手机在P2P模式下的通讯问题？

> ID：11258169
> 
> 赞同：1
> 
> 时间：2012-06-29T08:01:49.230
> 
> 标签：android

我正在发送以下 TgInitAsTarget 命令：FF0000002DD48C0100000000004001FE0FBBBAA6C9890000000000000000FFFF01FE0FBBBAA6C98900000646666D01011000

到 ACR122u 将其配置为目标模式，以便与 android 手机进行 P2P 通信。

如果 Nexus S 命令成功运行。但如果返回三星 Galaxy SII 错误代码 (6300)。这意味着“操作失败”。我无法找到返回的原因。请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:26:44.260

同样的问题在这里，ACR122 没有与 SGII Android_2.3.4 通信。我猜这个设备上没有实现 NFC-P2P 模式。您的 SGII 的操作系统版本是什么，您是否有任何其他数据得到响应？

# c++ - 在 C++ 代码中使用 dll

> ID：11258170
> 
> 赞同：1
> 
> 时间：2012-06-29T08:02:05.880
> 
> 标签：c++, dll

我想在 c++ 代码中使用 pjsipDll.dll。我从其中一个站点获得了这个 dll，我只知道如何构建代码来获取 dll 文件。所以我这样做了，现在我有了 pjsipDll.dll 文件。我想在我的代码中使用 DLL 中的某些函数（C++）

我尝试了以下代码。<<我没有在项目中制作/添加任何dll或.h文件，只有以下CPP文件>>

```
#include <iostream>

using namespace std;

int CallMyDLL(void)
{
    /* get handle to dll */
   HINSTANCE hGetProcIDDLL = LoadLibrary("G:\\July\\9.0\\pjsipdll\\Lib\\pjsipDll.dll");

   /* get pointer to the function in the dll*/
   FARPROC lpfnGetProcessID = GetProcAddress(HMODULE (hGetProcIDDLL),"dll_makeCall");

   /*
      Define the Function in the DLL for reuse. This is just prototyping the dll's function.
      A mock of it. Use "stdcall" for maximum compatibility.
   */
   typedef int (__stdcall * pICFUNC)(int, char *);

   pICFUNC MyFunction;
   MyFunction = pICFUNC(lpfnGetProcessID);

   /* The actual call to the function contained in the dll */
   int intMyReturnVal = MyFunction(5,"hello");

   /* Release the Dll */
   FreeLibrary(hGetProcIDDLL);

   /* The return val from the dll */
returnintMyReturnVal;
} 
void main()
{
    cout<<"Hello World";

    CallMyDLL();
    getchar();
} 
```

我从某个站点学到了这种方法，以使用 DLL 中的函数。

问题是，我得到一个错误：

> 错误 C2065：“HINSTANCE”：未声明的标识符 g:\july\9.0\pjproject-0.9.0\myproject\importerprojet\importerprojet\mycpp.cpp 9 importerProjet

谁能帮我解决这个问题。或者如果这个问题已经得到解决，至少给我指点帖子。

谢谢你的帮助，维努。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T08:06:27.773

你需要`#include <windows.h>`

# php - 如何使用不使用 IP 地址的日期进行拆分

> ID：11258176
> 
> 赞同：1
> 
> 时间：2012-06-29T08:02:51.337
> 
> 标签：php

我有一个包含日期、IP 地址等的大字符串。我需要用日期拆分内容并使用

```
[0-9]+[/.-])([0-9]+[/.-][0-9]+ 
```

但它也使用 IP 地址进行拆分。日期和 IP 地址之间的唯一区别是日期有 3 个数字，而 Ip 有 4 个数字，例如 28.06.2012 和 178.15.16.314。如何在拆分内容时省略 IP 地址？

对不起。还有一件事我忘了补充。也就是说，日期格式还有其他可能性，例如 25-06-12、2012-06-25、12-06-25。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:06:44.033

> 日期和 IP 地址之间的唯一区别是日期有 3 个数字，而 Ip 有 4 个数字，例如 28.06.2012 和 178.15.16.314。如何在拆分内容时省略 IP 地址？

首先，日期有*四个*数字代表年份。其次，IP 地址有四个八位字节。所以下面应该做的伎俩（未经测试）：

```
'~(\d{1,2}[.-]\d{1,2}[.-]\d{4})~' 
```

测试：

```
<?php
$date = '28.12.2012';
$ip = '192.168.0.1';

$regex = '~(\d{1,2}[.-]\d{1,2}[.-]\d{4})~';

var_dump( preg_match( $regex, $date ) ); // int(1)
var_dump( preg_match( $regex, $ip ) ); // int(0) 
```

# java - 如何在另一个线程中绘制 Canvas？

> ID：11258177
> 
> 赞同：3
> 
> 时间：2012-06-29T08:02:56.463
> 
> 标签：java, android

我一直在开发应用程序，我需要在另一个线程中执行绘图。现在我的代码是：

```
public class PainterView extends View implements DrawingListener {

    //private GestureDetector detector;
    private Context context;
    private Painter painter;
    private Bitmap background;
    private Bitmap bitmap;
    private Paint bitmapPaint;
    private Path path;
    private Paint paint;

    private float x;
    private float y;

    private boolean isErasing=false;
    private boolean isTextDrawing=false;

    private ExecutorService pool;

    public PainterView(Context context, Painter painter) {

        super(context);
        this.context = context;
        this.painter = painter;
        pool=Executors.newFixedThreadPool(3);
        //detector = new GestureDetector(context, new GestureListener());
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(final Canvas canvas) {
        if (bitmap != null) {
            pool.submit(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    synchronized (PainterView.this) {
                        canvas.drawBitmap(background, 0, 0, bitmapPaint);
                        canvas.drawBitmap(bitmap, 0, 0, bitmapPaint);
                        canvas.drawPath(path, paint);
                    }
                }

            });

        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        //detector.onTouchEvent(event);
        x = event.getX();
        y = event.getY();
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                painter.touchStart(x, y);
                break;
            case MotionEvent.ACTION_MOVE:
                painter.touchMove(x, y);
                break;
            case MotionEvent.ACTION_UP:
                painter.touchUp();
                break;
        }
        return true;
    }

    @Override
    public void onPictureUpdate(Bitmap background, Bitmap bitmap, Paint bitmapPaint, Path path, Paint paint) {
        this.background=background;
        this.bitmap = bitmap;
        this.bitmapPaint = bitmapPaint;
        this.path = path;
        this.paint = paint;
        invalidate();
    }

    public void setPainter(Painter painter) {
        this.painter = painter;
    }
} 
```

我认为如果我使用 ExecutorService 那么应用程序可以在另一个线程中绘制，但它不起作用 - 当我绘制设备的屏幕时会闪烁。那么，请告诉我，如何使用多线程使用 SurfaceHolder 和其他元素进行绘图？我需要对我的代码进行尽可能少的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:36:35.157

您只能在主 UI 线程中绘制。您应该使用 SurfaceView，因为它是专门为支持从辅助线程绘制的。

> 此类的目的之一是提供一个表面，辅助线程可以在其中渲染到屏幕中。如果要以这种方式使用它，则需要了解一些线程语义。

[资源](http://developer.android.com/reference/android/view/SurfaceView.html)

另请参阅此视频：[Learn Android 教程 1.28- SurfaceView 简介](http://www.youtube.com/watch?v=Z2YogvILjvo)

# python - python处理HTML下拉菜单提交

> ID：11258180
> 
> 赞同：0
> 
> 时间：2012-06-29T08:03:05.700
> 
> 标签：python, html, google-app-engine, jinja2

我有一个文本提交框，一个“类别”下拉列表，然后是三个“运动”下拉列表（每个运动下拉列表都包含一个分类运动列表。我想用一个输入按钮提交所有三种表单（只提交一项运动下拉已被选中）。使用此代码，文本和内容表单可以像类别一样提交，但运动选择器不起作用，它始终具有“sea”的后元素，这是第一组。我的 if elif 语句有什么问题??

```
<form method="post">
        <div class="row">
        <div class="span6"> 
            <h4>post something!</h4>
              <label>
                <input type="text" placeholder="Subject" name="subject" value="{{subject}}">
              </label>

              <label>
                <textarea style="height: 100px; width: 540px;" name="content">{{content}}</textarea>
              </label>
            {% if error %}
              <div class="alert alert-error">Error: {{error}}</div>
            {% endif %}

           </div>

        <div class="span2"> 
                <h4>categories</h4>
                <select name="postcategory">
                    <option>choose a category</option>
                    <option>general</option>
                    <option>discussion</option>
                    <option>adventures</option>
                    <option>review</option>
                    <option>badge applications</option>
                </select>
        </div>

        <div class="span2 offset1">
                <h4>choose element and/or sport</h4>
                <select name="postsport">
                    <option value="general sea">--general sea--</option>
                    <option value="sailing">sailing</option>
                    <option value="diving">diving</option>
                    <option value="sailing">surfing</option>
                    <option value="kite boarding">kite boarding</option>
                    <option value="kayaking">kayaking</option>
                    <option value="general air">--general air--</option>
                    <option value="skydiving">skydiving</option>
                    <option value="paragliding">paragliding</option>
                    <option value="hang gliding">hang gliding</option>
                    <option value="base jumping">base jumping</option>
                    <option value="balloons">balloons</option>
                    <option value="general land">--general land--</option>
                    <option value="rock climbing">rock climbing</option>
                    <option value="hiking">hiking</option>
                    <option value="biking">biking</option>
                    <option value="skiing">skiing</option>
                    <option value="snowboarding">snowboarding</option>
                </select>
            </div>

           </div>
           <input class="btn" type="submit">
            </form> 
```

这是我处理这些信息的python postcategory = self.request.get('postcategory') postsport = self.request.get('postsport') postelement = "general"

```
 if postcategory == "choose a category":
            postcategory = "general"

        if postsport == "sailing" or "diving" or "surfing" or "kite boarding" or "kayaking" or "general sea":
            postelement ="sea"

        elif postsport == "skydiving" or "paragliding" or "hang gliding" or "base jumping" or "balloons" or "general air":
            postelement ="air"

        elif postsport == "rock climbing" or "hiking" or "biking" or "skiing" or "snowboarding" or "general land":
            postelement ="land"

        else:
            postelement="general"
            postsport = "general" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:37:49.533

这个 ：

```
if postsport == "sailing" or "diving" or "surfing" or "kite boarding" or "kayaking" or "general sea":
        postelement ="sea" 
```

读作：

```
test = ("sailing" or "diving" or "surfing" or "kite boarding" or "kayaking" or "general sea")
if postport == test:
    postelement ="sea" 
```

在这种情况下，由于非空字符串在布尔上下文中具有真值，并且由于“或”运算符返回具有真值的第一个操作数，因此 test 将绑定到“sailing”。参见以下交互式会话以获取说明：

```
Python 2.6.6 (r266:84292, Sep 15 2010, 15:52:39) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> "a" or "b" or "c"
'a'
>>> "" or "b" or ""
'b'
>>> 
```

你想要的测试是：

```
if postsport in ("sailing", "diving", "surfing", "kite boarding", "kayaking", "general sea"):
    postelement ="sea" 
```

更好的解决方案是使用字典：

```
sportelements = {
    "sailing" : "sea",
    "diving" : "sea",
    # etc
    }
postelement = sportelements.get(postport, "general") 
```

# c# - dbf 插入日期时间查询

> ID：11258187
> 
> 赞同：1
> 
> 时间：2012-06-29T08:03:36.220
> 
> 标签：c#, datetime, ado.net, insert, dbf

我有一个简短的问题。如何插入包含日期时间类型的值？我试过这个：

```
>update D:\\transmisja\\skawina4\\W\\wkono.dbf set kod_kontr = '21-0003',

Nzwakontr1 = 'Kmiecik Wieslaw', Nzwakontr2 = '' , Adrknth_m ='RADZISZÓW',

Adrknth_u = 'JANA PAWLA II 1', NrDomu='', Nrlok='', Adrknth_k='32-052',

Nr_vat ='   -', Telkontr ='-  -', Nrkonkontr='200 21 0003', Bank ='',

NrKonta = '', Osw = '', Sz = '', Region = '', Upust = 0.0, TerminP = 0, 

Poziomcen =0, PlatnikVAT =.f., Warunki1 ='175/A/00', Warunki2 ='2000.12.30', 

Obwod = '21', Grupa = 'P1', Us_p ='--', Zus_p = .t., Us_r ='IO', Zus_r = .t., 

Rdziel = '--', Rulica ='JANA PAWLA II 1', Dus_p = CTOT('1993-03-12 00:00:00'), 

Dus_r = CTOT('2009-07-15 00:00:00') where kod_kontr='21-0003' 
```

但是这个将空白值放入表中：

> Dus_r = CTOT('2009-07-15 00:00:00')

我的简短问题：**我做错了什么？**

这是我的连接字符串：

> 提供者=vfpoledb.1；数据源=D:\transmisja\skawina4\W\wkono.dbf；整理顺序=机器

它是 ado.net 连接，使用 .net 4.0 windows forms c# application

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:19:13.767

查看[文档](http://msdn.microsoft.com/en-us/library/486b53be.aspx)，日期时间似乎是 TZ 格式，所以我认为通过更改为以下内容可能会开始工作：

```
Dus_r = CTOT('2009-07-15T00:00:00') 
```

*注意 在日期和时间之间添加 T*

也许

```
Dus_r = CTOT('2009-07-15T00:00:00Z') 
```

*注意 在日期和时间之间添加 T，在时间之后添加 Z*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:33:48.107

就像安装人员说的那样，我需要更正我的查询：

更新 D:\transmisja\skawina4\W\wkono.dbf 设置 kod_kontr = '21-0005', Nzwakontr1 = 'Klimek Wacław', Nzwakontr2 = '' , Adrknth_m ='RADZISZÓW', Adrknth_u = 'SKAWIŃSKA 44gg', NrDomu=' ', Nrlok='', Adrknth_k='32-052', Nr_vat ='-', Telkontr ='', Nrkonkontr='200 21 000522', Bank ='', NrKonta = '', Osw = '', Sz = ''，区域 = ''，Upust = 0.0，TerminP = 0，Poziomcen =0，PlatnikVAT =.f.，Warunki1 ='238/S/2005'，Warunki2 ='4,11,2005'，Obwod = ' 21'，Grupa = 'P1'，Us_p ='--'，Zus_p = .t.，Us_r ='IO'，Zus_r = .t.，Rdziel = ''，Rulica ='SKAWIŃSKA 44'，Dus_p = CTOT( '2009-05-01T'), Dus_r = CTOT('2109-06-20T') 其中 kod_kontr='21-0005'

当我建立这个查询时，我需要的是： Dus_p = CTOT('" + Dus_p.ToString("d") + "T'), Dus_r = CTOT('" + Dus_r.ToString("d") + “T')

现在一切正常。感谢安装人员的帮助！

# javascript - 这在 javascript 中是什么意思： var obj = (function(){ .... })()

> ID：11258201
> 
> 赞同：-1
> 
> 时间：2012-06-29T08:05:00.497
> 
> 标签：javascript

> **可能重复：**
> [javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

拜托，有人可以向我解释一下这在 JS 中是什么意思：

```
var obj = (function(){ 
   // code
})() 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T08:07:09.843

它被称为立即实例化的函数。它运行该函数，并将返回的值分配给`obj`. 您可以使用它创建一个范围或类，您可以在其中使用闭包将某些变量保留在该范围内。请参阅有关该主题的 John Resigs[页面](http://ejohn.org/blog/simple-class-instantiation/)。

因此，如果函数如下所示：

```
var obj = (function(n){
  return 2+n;
})(3); 
```

的值为`obj`5。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T08:07:22.340

它是一个立即执行的匿名函数。它的返回值被赋值给`obj`. 例如：

```
var obj = (function () {
    return 10;
}()); //Notice that calling parentheses can go inside or outside the others

console.log(obj); //10 
```

它们通常用于引入新的范围，因此您不会弄乱代码正在执行的范围：

```
var obj = (function () {
    var something = 10; //Not available outside this anonymous function
    return something;
}());

console.log(obj); //10 
```

请注意，由于这是一个函数*表达式*，而不是函数*声明*，所以它应该在右花括号后有一个分号。

# ios - 如何让 iOS 客户端同步类似 craigslist 的数据

> ID：11258204
> 
> 赞同：1
> 
> 时间：2012-06-29T08:05:12.530
> 
> 标签：ios, synchronization

我很好奇在 craigslist 等网站上找到的数据同步的最佳方法是什么，但 API 不可用。

假设您已经下载了一组帖子。当您想更新帖子时，最好的方法是比较您已有的内容和现有的内容，然后确定哪些是新的要下载，哪些应该删除，因为它们不再存在于服务器上？

请注意，我的问题并非特定于 craigslist，因为这只是一个示例。我对特定于 iOS 的一般原则/技术感兴趣。

# ajax - 无法使用 selenium webdriver 的 gettext() 从文本框中读取文本？

> ID：11258207
> 
> 赞同：13
> 
> 时间：2012-06-29T08:05:22.983
> 
> 标签：ajax, selenium, webdriver

选择日期后，我无法从 ajax 日历控件中读取日期

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

我没有收到任何错误，但我无法从文本框中获取任何值。

```
public static void main(String[] args) throws InterruptedException {

        WebDriver driver = new FirefoxDriver();
        driver.get("http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx");
        driver.manage().window().maximize();

        //Default calendar: 
        driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_Date1']")).click();

        for(int i=0;i<=5;i++){

            for(int j = 0;j<=6;j++){

                System.out.print(driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_defaultCalendarExtender_day_"+i+"_"+j+"']")).getText()+"-");

            }
            System.out.println();
        }

        driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_defaultCalendarExtender_day_3_4']")).click();

        System.out.println(driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_Date1']")).getText());

        //Calendar with an associated button:

        System.out.println("Calendar with an associated button:------------------------------------------------------");

        driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_Image1']")).click();

        for(int i=0;i<=5;i++){

            for(int j = 0;j<=6;j++){

                System.out.print(driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_calendarButtonExtender_day_"+i+"_"+j+"']")).getText()+"-");

            }
            System.out.println();
        }

        Thread.sleep(5000L);
        driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_Image1']")).click();
        driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_calendarButtonExtender_day_3_3']")).click();

        System.out.println(driver.findElement(By.xpath("//*[@id='ctl00_SampleContent_Date5']")).getText());

    } 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-29T08:46:19.053

获取`input`文本的调用应该是：

```
driver.findElement(By.id("ctl00_SampleContent_Date5")).getAttribute("value"); 
```

不要问我为什么，这就是它[一直以来](http://www.w3.org/TR/html401/interact/forms.html#text-input)的方式。通过键入`input`元素，您正在更改其`value`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:21:10.443

我认为 Selenium 与 DOM 的工作方式保持一致，但我认为任何用户都不会期望 getText 不会返回屏幕中可见的内容。innerHTML 和 innerText 都返回空字符串，以便解释为什么 getText 不返回任何内容。

我认为 Selenium 应该简化 DOM 的古怪之处。换句话说，getText() 应该返回用户在屏幕上看到的内容，然后如果用例想要真正的 innerText，他们可以调用其他 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-14T17:41:56.550

在这种情况下，您应该调用`getAttribute("value")`.

我相信`getText()`只返回元素的内部文本，而不是输入的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-14T06:08:33.373

driver.findElement(By.id("ctl00_SampleContent_Date5")).getAttribute("value");

它总是返回已写入文本框中的值

# android - 使用新别名复制私钥

> ID：11258210
> 
> 赞同：1
> 
> 时间：2012-06-29T08:06:03.373
> 
> 标签：android, keytool, google-play, jarsigner

[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

我有一个已经有别名和密码的密钥库。

我已经使用这个密钥库发布了应用程序。

我现在已将其中一个应用程序的所有权授予其他人，因此要更新该应用程序，他们需要使用我的密钥库。但是我不希望他们使用我的别名或密码。

**是否可以为同一个密钥库创建新的别名和密码**

同样重要的是

**Google Play 是否允许将使用新别名签名的 APK 用作**已发布应用的更新？

如果是这样，命令是什么，或者一个好的帮助链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:25:40.877

您的密钥库包含您的密钥。只需将您的密钥放入新的密钥库即可。并给他们那个。或者..我想只是给他们钥匙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:21:19.687

好的，我明白了，感谢@Rossco 最初的提升。

首先，我将我的密钥库复制到一个新文件中

```
ctrl+c ctrl+v 
```

然后我更改了密钥库上的密码：

```
keytool -storepasswd -keystore my.keystore 
```

然后我在密钥库中更改了别名的名称

```
keytool -changealias -keystore my.keystore -alias "old_alias" -destalias "new_alias" 
```

然后我更改了新别名的密码：

```
keytool -keypasswd -keystore my.keystore -alias new_alias -keypass oldAliasPassword -new newAliasPassword 
```

是的，我刚刚对其进行了测试，并使用新的密钥库别名上传了新版本的应用程序

谢谢！

参考：

*   [密钥库更改密码](https://stackoverflow.com/questions/2889238/keystore-change-passwords)
*   [我可以更改密钥的别名吗？](https://stackoverflow.com/questions/3483121/can-i-change-the-alias-of-my-key)
*   [http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html)

# python - Python matplotlib 限制为整数刻度位置

> ID：11258212
> 
> 赞同：30
> 
> 时间：2012-06-29T08:06:09.337
> 
> 标签：python, matplotlib

我经常想做一个计数条形图。如果计数很低，我经常会得到不是整数的主要和/或次要刻度位置。我怎样才能防止这种情况？当数据计数时，在 1.5 处打勾是没有意义的。

这是我的第一次尝试：

```
import pylab
pylab.figure()
ax = pylab.subplot(2, 2, 1)
pylab.bar(range(1,4), range(1,4), align='center')
major_tick_locs = ax.yaxis.get_majorticklocs()
if len(major_tick_locs) < 2 or major_tick_locs[1] - major_tick_locs[0] < 1:
    ax.yaxis.set_major_locator(pylab.MultipleLocator(1))
minor_tick_locs = ax.yaxis.get_minorticklocs()
if len(minor_tick_locs) < 2 or minor_tick_locs[1] - minor_tick_locs[0] < 1:
    ax.yaxis.set_minor_locator(pylab.MultipleLocator(1)) 
```

当计数很小但当它们很大时，它可以正常工作，我会得到很多小滴答声：

```
import pylab
ax = pylab.subplot(2, 2, 2)
pylab.bar(range(1,4), range(100,400,100), align='center')
major_tick_locs = ax.yaxis.get_majorticklocs()
if len(major_tick_locs) < 2 or major_tick_locs[1] - major_tick_locs[0] < 1:
    ax.yaxis.set_major_locator(pylab.MultipleLocator(1))
minor_tick_locs = ax.yaxis.get_minorticklocs()
if len(minor_tick_locs) < 2 or minor_tick_locs[1] - minor_tick_locs[0] < 1:
    ax.yaxis.set_minor_locator(pylab.MultipleLocator(1)) 
```

如何从第一个示例中获得所需的行为，同时避免第二个示例中发生的情况？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-10T16:18:29.983

您可以使用该`MaxNLocator`方法，如下所示：

```
 from pylab import MaxNLocator

    ya = axes.get_yaxis()
    ya.set_major_locator(MaxNLocator(integer=True)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T08:16:54.423

我想事实证明我可以忽略小蜱。我将试一试，看看它是否适用于所有用例：

```
def ticks_restrict_to_integer(axis):
    """Restrict the ticks on the given axis to be at least integer,
    that is no half ticks at 1.5 for example.
    """
    from matplotlib.ticker import MultipleLocator
    major_tick_locs = axis.get_majorticklocs()
    if len(major_tick_locs) < 2 or major_tick_locs[1] - major_tick_locs[0] < 1:
        axis.set_major_locator(MultipleLocator(1))

def _test_restrict_to_integer():
    pylab.figure()
    ax = pylab.subplot(1, 2, 1)
    pylab.bar(range(1,4), range(1,4), align='center')
    ticks_restrict_to_integer(ax.xaxis)
    ticks_restrict_to_integer(ax.yaxis)

    ax = pylab.subplot(1, 2, 2)
    pylab.bar(range(1,4), range(100,400,100), align='center')
    ticks_restrict_to_integer(ax.xaxis)
    ticks_restrict_to_integer(ax.yaxis)

_test_restrict_to_integer()
pylab.show() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-08T23:19:30.543

I had a similar issue with a histogram I was plotting showing fractional count. Here's how I was able to resolve it:

```
plt.hist(x=[Dataset being counted])

# Get your current y-ticks (loc is an array of your current y-tick elements)
loc, labels = plt.yticks()

# This sets your y-ticks to the specified range at whole number intervals
plt.yticks(np.arange(0, max(loc), step=1)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T12:17:47.663

```
 pylab.bar(range(1,4), range(1,4), align='center') 
```

和

```
 xticks(range(1,40),range(1,40)) 
```

在我的代码中工作过。只需使用`align`可选参数并发挥`xticks`作用。

# opencv - opencv kmeans聚类错误输出

> ID：11258220
> 
> 赞同：2
> 
> 时间：2012-06-29T08:06:51.673
> 
> 标签：opencv, k-means

我正在尝试在openCV中的图像上实现kmeans聚类（使用C）。与导致一些颜色层的聚集图像不同，输出非常奇怪。我也尝试调试代码，但无法理解它可能出错的地方。

这是输入和输出图像。

![在此处输入图像描述](../Images/c61abecae37c1df3bce866e4c1b976c0.png)

右边是输出，左边是输入图像。

这是代码：

```
image = cvLoadImage( "pic65.png", CV_LOAD_IMAGE_UNCHANGED);
sample = cvCreateMat( image->height*image->width, 5, CV_32FC1 );
clusters = cvCreateMat( image->height*image->width, 1, CV_32SC1 );

data = (uchar *)image->imageData;
for(i=0;i<image->height;i++)
{
                            for(j=0;j<image->width;j++)
                            {
                            cvSetReal2D( sample, k, 0, i);
                            cvSetReal2D( sample, k, 1, j);
                            b = data[i*image->widthStep + j*image->nChannels +0];
                            g = data[i*image->widthStep + j*image->nChannels +1];
                            r = data[i*image->widthStep + j*image->nChannels +2];
                            cvSetReal2D( sample, k, 2, b);
                            cvSetReal2D( sample, k, 3, g);
                            cvSetReal2D( sample, k, 4, r);
                            k++;
                            }
}
count = get_clusters();

cvKMeans2(sample,count,clusters,cvTermCriteria(CV_TERMCRIT_EPS+CV_TERMCRIT_ITER,100,0 ));

for (x = 0; x < image->height; x++)
{
for (y = 0; y < image->width; y++)
{
    index = x * image->width + y;
    cluster_index = cvGetReal2D(clusters,index,0);
    data[x*image->widthStep + y*image->nChannels +0] = cl[cluster_index][0];
    data[x*image->widthStep + y*image->nChannels +1] = cl[cluster_index][2];
    data[x*image->widthStep + y*image->nChannels +2] = cl[cluster_index][2];
}
} 
```

get_clusters 方法根据阈值（在本例中为 30）返回输入图像中颜色簇的数量。如果需要，我也可以为您提供 get_clusters 的代码，但我认为它是正确的。

有人可以指出哪里出错了。任何形式的帮助表示赞赏。提前致谢。

编辑：我想要的输出如下：

![在此处输入图像描述](../Images/584452d5ce538aae271d807f2900e8bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:44:40.317

根据您的“期望输出”图像判断，您对 kmeans 的使用是错误的。像素坐标不应在聚类中发挥作用。您应该只将颜色三元组交给 kmeans。

```
sample = cvCreateMat( image->height*image->width, 3, CV_32FC1 ); 
```

…</p>

```
 for(j=0;j<image->width;j++)
                      {
                        b = data[i*image->widthStep + j*image->nChannels +0];
                        g = data[i*image->widthStep + j*image->nChannels +1];
                        r = data[i*image->widthStep + j*image->nChannels +2];
                        cvSetReal2D( sample, k, 0, b);
                        cvSetReal2D( sample, k, 1, g);
                        cvSetReal2D( sample, k, 2, r);
                        k++;
                      } 
```

然后，在设置数据时，您还会遇到一个索引错误。

# android - 如何截屏/拍摄 Android 屏幕？

> ID：11258225
> 
> 赞同：2
> 
> 时间：2012-06-29T08:07:10.247
> 
> 标签：android

从 ICS 开始，从 Android 中截取屏幕截图变得非常容易。在演示文稿中，谷歌通过流式传输/保存屏幕上显示的整个内容（包括直接来自设备的声音）走得更远。如何做到这一点？我是否需要一些额外的 HDMI 认证屏幕抓取卡控制台需要？

# jquery - 带 div 的 kwicks

> ID：11258234
> 
> 赞同：0
> 
> 时间：2012-06-29T08:07:53.013
> 
> 标签：jquery, html, kwicks

此脚本的 html 由列表项 [http://www.jeremymartin.name/projects.php?project=kwicks](http://www.jeremymartin.name/projects.php?project=kwicks)

我在哪里可以找到这样一个适用于 div 的脚本，这样我就可以使非活动图像更暗，而活动图像正常，就像你在这里看到的：
[https ://www.bnpparibasfortis.be/portal/start.asp](https://www.bnpparibasfortis.be/portal/start.asp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:22:39.607

css opacity 使它变亮，而不是变暗，但我得到了解决方案，我在 kwicks 脚本中更改了规则 28

```
var kwicks = container.children('li'); 
```

到

```
var kwicks = container.children('div'); 
```

这是html：

```
<div style="background: url(thumb-58-madagascar.jpg) no-repeat scroll center top;">
    <div class="inactive"></div>
</div> 
```

CSS：

```
div#accordion-slider{
    margin: 0;
    padding: 0;
    list-style: none;
    position: relative;
}
div#accordion-slider div{
    display: block;
    overflow: hidden;
    padding: 0;
    margin:0;
    float: left;
    width: 165px;
    background:none repeat scroll 0 0 rgba(0, 0, 0, 0.5);
    height: 230px;
}
div#accordion-slider div.inactive {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.5);
    height: 100%;
    position: absolute;
    width: 100%;
}
div#accordion-slider div.active div.inactive {
    background: none;
} 
```

# java - 访问默认的 jFrame netbeans

> ID：11258236
> 
> 赞同：-1
> 
> 时间：2012-06-29T08:07:54.093
> 
> 标签：java, swing, jframe

我正在尝试在 jlabel 中显示图像，该图像位于 Netbeans 创建的默认 jFrame 中。我知道如何在新的 Jframe 中显示图像，但我不知道如何访问默认的 Jframe，因为我无法自定义代码并为其创建变量名。有什么解决办法吗？

该应用程序应该显示目录中的图片，因此当您按下一个时，下一个图像，如果您按上一个，则会显示上一个图像。什么是有效执行此操作的最佳数据结构，以便我也可以跟踪索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:38:33.317

与其让 GUI 设计者管理您的*框架*，不如让其管理*内容，如本*[例](https://stackoverflow.com/a/2561540/230513)中所建议的那样。

[附录：这里](https://sites.google.com/site/drjohnbmatthews/googleolympiad)有一个翻阅图像的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:17:02.980

关于显示图像，您可以将目录中的图像编号为1,2,3...等等。如果这样做，您可以使用一个简单的计数器变量（使用下一个按钮递增，使用上一个按钮递减）来扫描图像。您可以将此计数器变量用于具有格式的图像名称。

# android - Repo Init Fatal：错误未知的 url 类型

> ID：11258238
> 
> 赞同：3
> 
> 时间：2012-06-29T08:08:05.157
> 
> 标签：android, repository

我正在使用 repo 来同步我的本地 android 源代码。我已按照 android 源网站上的说明进行操作：http: [//source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

当我尝试做 repo init 时：

```
repo init -u http://android.googlesource.com/platform/manifest 
```

我收到以下错误：

```
fatal: Cannot get http://gerrit.googlesource.com/git-repo/clone.bundle
fatal: error unknown url type: https 
```

我在 google 上关注了多个线程，并修改了我的 repo 脚本并将 REPO_URL 中的 https 更改为 http，但我仍然遇到同样的错误。

我还需要做什么？

请帮忙。

马库斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:01:45.983

我已经回答了我自己的问题。

自从我上次进行回购同步以来，我已经清除了我的 HTTP_PROXY 和 HTTPS_PROXY 变​​量。

```
export HTTP_PROXY=http://<proxy_user_id>:<proxy_password>@<proxy_server>:<proxy_port>
export HTTPS_PROXY=http://<proxy_user_id>:<proxy_password>@<proxy_server>:<proxy_port> 
```

为我的公司设置运行这个解决了这个问题。

马库斯

# xslt - 使用 xsl:number incide if

> ID：11258245
> 
> 赞同：1
> 
> 时间：2012-06-29T08:08:33.627
> 
> 标签：xslt, if-statement, numbers, xslt-1.0

有清单

```
<nodes>
<node attr='1'/>
<node attr='0'/>
<node attr='1'/>
<node attr='1'/>
</nodes> 
```

我需要应用模板所有节点并计算它：

```
<xsl:apply-templates select='nodes/node'>
<xsl:if test='@attr=1'>
<xsl:number/>
</xsl:if>
</xsl:apply-templates> 
```

但结果不是 123，结果是 134。如何在 xslt-1.0 中修复它？还有另一种设置数字的方法吗？position() 没有帮助，并且

```
<xsl:apply-templates select='nodes/node[@attr=1]'>
<xsl:if test='@attr=1'>
<xsl:number/>
</xsl:if>
</xsl:apply-templates> 
```

没办法=(((

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:34:31.057

首先，您的 XSLT 中有错误

```
<xsl:apply-templates select='nodes/node'> 
   <xsl:if test='@attr=1'> <xsl:number/>     
   </xsl:if>
</xsl:apply-templates> 
```

您不能在**xsl:apply-templates中有****xsl:if**。您需要一个匹配的**xsl:template**并将代码放在那里...

 ****```
<xsl:apply-templates select="nodes/node" />

<xsl:template match="node">
   <xsl:if test='@attr=1'>
      <xsl:number/>     
   </xsl:if>
<xsl:template> 
```

实际上，您可以在此处取消**xsl:if**，只需让模板中的测试匹配

```
<xsl:template match="node[@attr=1]">
    <xsl:number/>     
<xsl:template> 
```

但是要回答您的问题，您可能需要使用**xsl:number**元素上的**count**属性来仅计算您想要的元素

 **```
<xsl:number count="node[@attr=1]"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <xsl:apply-templates select="nodes/node"/>
   </xsl:template>

   <xsl:template match="node[@attr=1]">
      <xsl:number count="node[@attr=1]"/>
   </xsl:template>

   <xsl:template match="node"/>
</xsl:stylesheet> 
```

应用于您的 XML 时，结果为 123

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:14:40.693

上面写着 123 - 这就是你想要的吗？

```
<xsl:for-each select="nodes/node[@attr='1']">
  <xsl:value-of select="position()"/>
</xsl:for-each> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:14:56.287

目前尚不清楚您要达到什么目的。我认为您需要计算属性设置为 1 的节点数。在这种情况下，请使用[count](http://zvon.org/xxl/XSLTreference/Output/function_count.html)函数：

```
<xsl:value-of select="count(nodes/node[@attr='1'])" /> 
```

如果您需要在*匹配条件的子集中*输出所需节点的位置，那么`for-each`可能是要走的路：

```
<xsl:for-each select="nodes/node[@attr='1']">
    <xsl:value-of select="position()" />
</xsl:for-each> 
```******

# c - 在每个函数的开头应用断点

> ID：11258246
> 
> 赞同：1
> 
> 时间：2012-06-29T08:08:40.583
> 
> 标签：c, debugging, gdb

是否有任何命令可以在文件`gdb`中每个函数的开头应用断点。`.C`

我需要这个，因为我有一个非常大的`C`文件需要调试，它包含 100 多个函数，我需要找到在运行时调用的所有函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:45:37.477

我不确定以这种方式使用调试器来解决您的搜索是否是个好主意。

我会在每个函数的开头添加一个单独的赋值和一个在文件开头的结构。

```
struct {
   int foo;
   int bar;
   ...
   int lastFunctionName;
} sFunc;

void foo()
{
  sFunc.foo=1;
  ...
}

void bar()
{
  sFunc.bar=1;
  ...
} 
```

然后你可以运行你的程序，它会为你收集信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:12:32.743

```
rbreak file:regex 
```

如果您查看此页面：http: [//sourceware.org/gdb/download/onlinedocs/gdb/Set-Breaks.html#Set-Breaks](http://sourceware.org/gdb/download/onlinedocs/gdb/Set-Breaks.html#Set-Breaks)

也看看过去的线程：[gdb, set breakpoint on all functions in a file](https://stackoverflow.com/questions/1476002/gdb-set-breakpoint-on-all-functions-in-a-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:16:13.580

该[手册](http://www.delorie.com/gnu/docs/gdb/gdb_29.html)指出，有一个选项`rbreak regexp`可让您设置正则表达式以中断与该正则表达式匹配的所有函数。假设您在一个文件（一个模块？）中，可能所有函数的前缀都相同？

# .net - 在 SQLExceptions 中过滤超时

> ID：11258255
> 
> 赞同：0
> 
> 时间：2012-06-29T08:09:38.993
> 
> 标签：.net, sql, database, user-interface, sqlexception

我有一个可以访问各种 Oracle 和 SQL Server 数据库的应用程序。如果由于超时而出现异常，我希望用户获取自定义消息。

就像是

> 访问数据库超时，请在另一个测试台上运行搜索，以确保当前测试台以正常速度运行。

那么我该如何过滤掉这些`SqlException`由运行缓慢的数据库服务器引起的？

# node.js - 模板中的jade（用于nodejs）子字符串

> ID：11258258
> 
> 赞同：0
> 
> 时间：2012-06-29T08:10:06.863
> 
> 标签：node.js, pug

有人可以告诉我如何在 nodejs 中将字符串截断为多个字符/单词，理想情况下注意字符串中的 HTML 标记吗？

这应该类似于 Django 的 truncatechars/truncatewords 和 truncatechars_html/truncatewords_html 过滤器。

如果玉中不存在这种情况，那该走哪条路才是对的呢？我正在启动我的第一个 nodejs+express+CouchDB 应用程序，并且可以在 nodejs 代码中执行此操作，但似乎过滤器更合适。如果我知道如何编写这样的过滤器（和其他过滤器），我也会考虑：））

只是一个简单的例子：

```
// in nodejs:
// body variable comes from CouchDB
res.render('home.jade', { title : "test", featuredNews : eval(body)});

// in home.jade template:
    ul.thumbnails
    each article in featuredNews.rows
        a(href="#"+article.slug)
            li.span4
                div.value.thumbnail
                    img(align='left',src='http://example.com/image.png')
                    p!= article.value.description:truncatewords_html(30) 
```

所以我编造了 truncatewords_html(30) 的东西来说明我认为它应该类似于什么。

将不胜感激任何想法！

谢谢，伊戈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:15:20.950

这是一个小“truncate_words”函数：

```
function truncate( value, arg ) {
    var value_arr = value.split( ' ' );
    if( arg < value_arr.length ) {
        value = value_arr.slice( 0, arg ).join( ' ' );
    }
    return value;
} 
```

您可以在将字符串发送到模板之前使用它，或者在模板中使用辅助方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:01:42.103

cheerio is a nice little library that does a subset of jquery and jsdom. Then it's easy:

```
app.helpers({
    truncateWords_html : function(html, words){
       return cheerio(html).text().split(/\s/).slice(0, words).join(" ")
    }
}) 
```

Then, in a jade template use:

```
#{truncateWords_html(article.value.description, 30)} 
```

This looks like a generic way to add any filters, hurray! :))

# c# - C# 到 DataGridView 的字典列表

> ID：11258259
> 
> 赞同：1
> 
> 时间：2012-06-29T08:10:12.560
> 
> 标签：c#, .net, binding, datagridview

我想显示来自 List 的 datagridview 数据，但显示来自字典（或列表）的所有数据。我有两个像下面这样的课程。现在我想在 DataGridView 中列出字典中的所有 MeasureSteps，一对一，以及 Board 类的乘法信息。

什么控制帮助我？或者，如果我可以用 datagridview 做到这一点，那该怎么做？

```
class Board
{
    public string Station { get; set; }
    public DateTime TestDate { get; set; }
    public string TestProgram { get; set; }
    public string TestRevision { get; set; }
    public string ArticleNumber { get; set; }
    public bool Result { get; set; }
    public string SerialNumber { get; set; }
    public string Operator { get; set; }
    public string BatchNumber { get; set; }
    public string TestTime { get; set; }
    public string TestObjectRevision { get; set; }
    public string TestObjectDescription { get; set; }
    public string TestObjectName { get; set; }
    public string InstrumentInventoryNumber { get; set; }
    public string InstrumentArticleNumber { get; set; }
    public string InstrumentName { get; set; }
    public Dictionary<string,MeasureStep> Measurements { get; set; }
}
class MeasureStep
{
    public string TestFunction { get; set; }
    public string Descripton { get; set; }
    public double LowerLimit { get; set; }
    public double UpperLimit { get; set; }
    public double MeasuredValue { get; set; }
    public string Unit { get; set; }

    public bool Result { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:14:28.940

您可以使用[主从表单](http://msdn.microsoft.com/en-us/library/aa984462%28v=vs.71%29.aspx)。或者，您可以创建一个网格，其中 (of `Board`) 的行可以展开以显示其子 (of `MeasureStep`s)，但这会更复杂。

# java - JNI 依赖于平台？

> ID：11258262
> 
> 赞同：0
> 
> 时间：2012-06-29T08:10:41.687
> 
> 标签：java, c, java-native-interface

我用 Java 和 JNI 为 Linux 编写了简单的“Hello World”程序，如果我适合使用 JNI，你必须为每个平台编译共享库（例如，Linux 的 *.so，Windows 的 *.dll 等等）把它放在某个地方在您的 *.jar 文件附近并编写一个脚本以正确执行它（例如 java -jar -Djava.library.path=.your_app.jar）。这让我有点难过，因为我选择 Java 是因为平台相互依赖。当然，用 Windows 和 Mac 构建一个完全相同的库并不是什么大不了的事，但第一次我想到了一个像银弹一样的 JNI，它将 Java 的平台独立性和 C 的速度结合在一个 .jar 文件中。

也许我认为有问题并且有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:17:17.813

Java*主要是*独立于平台的，JNI是一个**大**例外......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:58:31.447

JNI = Java**原生**接口。本机 = 平台相关。JNI 是 Java 的可选且*非常专业*的部分，您不必将它用于任何 Java 编码。JNI 旨在用于在 JVM 中绝对无法完成的孤立任务。不是出于速度原因，而是为了访问本机（操作系统级别）资源/接口，或第 3 方本机（非 JVM）单体库。使用 JNI 以获得“更好的速度”并且实际上期望差异很大，这表明您可能应该完全使用不同的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:18:11.183

您确实必须为您所针对的每个平台提供不同版本的本机库。所以，是的，在某种程度上，您在使用 JNI 时会失去平台可移植性。

虽然我不知道您的确切问题，但出于性能原因，我会评估本机代码是否真的很重要。在我看来，Java 并不像有时讨论的那么慢。

# iphone - 我的 iPhone 上的测试应用程序已经有苹果帐户

> ID：11258267
> 
> 赞同：-4
> 
> 时间：2012-06-29T08:11:16.363
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [在 iphone 应用程序中创建配置文件](https://stackoverflow.com/questions/368062/create-provisioning-profile-in-iphone-application)

我开发了我的 iphone 应用程序，我想在我的 iPhone 上测试它。我有 dev.apple 的帐户，所以无需注册。我只想用我的帐户登录。我将为获取执行什么过程`liencense`？我很困惑我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:33:37.230

如果您想在真正的 iPhone 设备上测试您的应用程序，那么您应该查看以下教程

[**将 iPhone 应用程序部署到真实设备**](http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices)

**Wei-Meng Lee**以简单的方式逐步描述了完整的程序。

如果你在我做的这件事上遇到任何麻烦，请告诉我！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T08:17:12.947

您可以轻松搜索。没有什么可以混淆的。通过此链接注册您的付费开发者帐户并获得许可证和证书

# coldfusion - Docusign 和 ColdFusion 集成

> ID：11258268
> 
> 赞同：1
> 
> 时间：2012-06-29T08:11:18.853
> 
> 标签：coldfusion, docusignapi

我正在使用以下代码来调用docusign api。我从[这个链接](http://community.docusign.com/t5/DocuSign-API-Integration-Ruby-Salesforce-and-Other/Creating-an-Envelope-with-ColdFusion/m-p/3453)得到了信息。

```
<soap:Body>
    <ns:CreateEnvelopeFromTemplates>
      <ns:TemplateReferences>
        <ns:TemplateReference>
          <ns:TemplateLocation>Server</ns:TemplateLocation>
          <ns:Template>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</ns:Template>
          <ns:RoleAssignments>
            <ns:RoleAssignment>
              <ns:RoleName>Company</ns:RoleName>
              <ns:RecipientID>1</ns:RecipientID>
            </ns:RoleAssignment>
          </ns:RoleAssignments>
        </ns:TemplateReference>
      </ns:TemplateReferences>
      <ns:Recipients>
        <ns:Recipient>
          <ns:ID>1</ns:ID>
          <ns:UserName>Fred Flintstone</ns:UserName>
          <ns:Email>fred.flintstone@...</ns:Email>
          <ns:Type>Signer</ns:Type>
          <ns:RoleName>Caveman</ns:RoleName>
          <ns:RoutingOrder>1</ns:RoutingOrder>
        </ns:Recipient>
      </ns:Recipients>
      <ns:EnvelopeInformation>
        <ns:AccountId>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</ns:AccountId>
        <ns:EmailBlurb>This Envelope was sent through the DocuSign API using ColdFusion</ns:EmailBlurb>
        <ns:Subject>DocuSign it! using ColdFusion</ns:Subject>
      </ns:EnvelopeInformation>
      <ns:ActivateEnvelope>true</ns:ActivateEnvelope>
    </ns:CreateEnvelopeFromTemplates>
  </soap:Body> 
```

**我无法理解 Template 下的 RoleAssignment 标签的用途。**我已经浏览了[这里的文档，](http://www.docusign.com/p/APIGuide/Content/Sending%20Group/TemplateReference.htm)但不明白。

我认为这是我没有得到回应的唯一原因。我在我的代码中评论了这部分，但在更改所有凭据后我得到了以下输出。

```
An error occurred!
struct
Charset  [empty string]
ErrorDetail  Unknown host: demo.docusign.net
Filecontent  Connection Failure
Header   [empty string]
Mimetype     Unable to determine MIME type of file.
Responseheader  
struct [empty]
Statuscode   Connection Failure. Status code unavailable.
Text     YES 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T18:22:25.773

我认为这`RoleAssignment`与该特定错误无关。您需要结合他们示例中的 SOAP Header 和 SOAP Body。SOAP Body 应该包含在 SOAP Header 块中。

请注意，他们的 SOAP Header 示例包含该`<soap:Body>`块。`<soap:Body>`然后他们的 SOAP Body 示例也被块包围了。它们应该像这样组合以供您`<cfhttp>`调用：

```
<cfset UserName = "[XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXX]XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXX" />
<cfset Password = "SuperSecret" />

<cfscript>
  strNonce = ToBase64(createUUID());
</cfscript>

<!--- create the request body XML block --->
<cfsavecontent variable="request_xml">
<cfoutput>
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://www.docusign.net/API/3.0">
  <soap:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <wsse:UsernameToken wsu:Id="UsernameToken-1" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>#UserName#</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0##PasswordText">#Password#</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0##Base64Binary">#strNonce#</wsse:Nonce>
        </wsse:UsernameToken>
    </wsse:Security>
  </soap:Header>  
  <soap:Body>
    <ns:CreateEnvelopeFromTemplates>
      <ns:TemplateReferences>
    <ns:TemplateReference>
      <ns:TemplateLocation>Server</ns:TemplateLocation>
      <ns:Template>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</ns:Template>
      <ns:RoleAssignments>
        <ns:RoleAssignment>
          <ns:RoleName>Company</ns:RoleName>
          <ns:RecipientID>1</ns:RecipientID>
        </ns:RoleAssignment>
      </ns:RoleAssignments>
    </ns:TemplateReference>
      </ns:TemplateReferences>
      <ns:Recipients>
    <ns:Recipient>
      <ns:ID>1</ns:ID>
      <ns:UserName>Fred Flintstone</ns:UserName>
      <ns:Email>fred.flintstone@...</ns:Email>
      <ns:Type>Signer</ns:Type>
      <ns:RoleName>Caveman</ns:RoleName>
      <ns:RoutingOrder>1</ns:RoutingOrder>
    </ns:Recipient>
      </ns:Recipients>
      <ns:EnvelopeInformation>
    <ns:AccountId>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</ns:AccountId>
    <ns:EmailBlurb>This Envelope was sent through the DocuSign API using ColdFusion</ns:EmailBlurb>
    <ns:Subject>DocuSign it! using ColdFusion</ns:Subject>
      </ns:EnvelopeInformation>
      <ns:ActivateEnvelope>true</ns:ActivateEnvelope>
    </ns:CreateEnvelopeFromTemplates>
  </soap:Body>
</soap:Envelope>
</cfoutput>
</cfsavecontent> 
```

（这个例子直接取自他们的文档。我只结合了这两个块。）

然后发送该请求（来自他们的示例）：

```
<!--- send the request to the DocuSign service --->
<cfhttp url="https://demo.docusign.net/api/3.0/api.asmx" method="post" result="http_response">

  <!--- make sure you set this correctly for the call you are making --->
  <cfhttpparam type="header" name="SOAPAction" value="http://www.docusign.net/API/3.0/CreateEnvelopeFromTemplates" />
  <cfhttpparam type="header" name="accept-encoding" value="no-compression" />
  <cfhttpparam type="xml" value="#trim(request_xml)#" />
</cfhttp> 
```

最后处理响应（来自他们的示例）：

```
<!--- if we received a successful response --->
<cfif find("200", http_response.statusCode)>
  <cfscript>
    response_xml = xmlParse(http_response.fileContent);

    // use XPath to get the top level element you want from the SOAP response
    result_node = xmlSearch(response_xml, "//*[local-name() = 'CreateEnvelopeFromTemplatesResult']")[1];

    // use dot notation to navigate the XML structure
    envelope_id = result_node.EnvelopeID.xmlText;
  </cfscript>

  <cfoutput>
    EnvelopeID: #envelope_id#
  </cfoutput>
<cfelse>
  <cfoutput>
    An error occurred!
  </cfoutput>
  <cfdump var="#http_response#">
</cfif> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:24:33.250

如果这是一个 POST 请求（提交数据），看起来好像 web 服务没有识别实际 SOAP XML 文件的提交。

您是否将 XML 作为文档中所示的 XML 类型发送？

```
<cfhttpparam type="xml" value="#trim(request_xml)#" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T06:00:28.320

RoleAssignment 标签用于将收件人分配给特定的模板角色。当您发送使用模板的信封时，您将引用通过 DocuSign 控制台 (demo.docusign.net) 创建的模板。创建模板时，您必须为模板指定至少一个模板角色，其中包含角色名称、收件人姓名和收件人电子邮件。您在此处为角色使用的值需要与您在 api 调用中提供的角色名称相匹配。因此，例如，如果您将角色称为“Signer1”，则需要

```
<ns:RoleName>Signer1</ns:RoleName> 
```

如果您将角色命名为“公司”，那么您将拥有它。

# python - 正则表达式替换python中的文本

> ID：11258269
> 
> 赞同：3
> 
> 时间：2012-06-29T08:11:20.433
> 
> 标签：python

我的文字如下：

```
Added "a-foo-b" foo. 
```

目标是使用**正则表达式**将第二个 foo 替换为 bar，并保持两个双引号之间的第一个 foo 不变。所以在上面的文字中，我正在寻找的结果是：

```
Added "a-foo-b" bar. 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:20:19.380

```
import re

pat = re.compile(r'("[^"]+".*)foo')

s = '''Added "a-foo-b" foo.'''

s_new = re.sub(pat, r'\1bar', s)
print(s_new) 
```

既然你说目标是把那个放在双引号里，我就把双引号作为关键。括号形成一个保存匹配字符串的“匹配组”；这个匹配组匹配双引号和其中的内容，然后模式匹配第二个 foo。替换模式将替换我们匹配的所有内容，但这没关系，因为我们使用 a`\1`放回匹配组部分，然后我们必须`bar`替换第二个`foo`。

`foo`如果您知道在要替换的之后不能再有双引号，这可能是一个更好的模式：

```
pat = re.compile(r'(".*".*)foo') 
```

此模式匹配双引号，然后是任何内容，然后是另一个双引号。如果引用的字符串包含转义的双引号，第一个模式将不起作用，但这个模式会起作用。但是如果你在这个字符串上使用这个模式：

```
s = '''Added "a-foo-b" foo.  "Wow, another foo"''' 
```

匹配组将匹配第二个 foo 并匹配第三个 foo，即使它在引号中。这是因为模式匹配是“贪婪的”。

编辑：

问题：是的，如果`s = '''Added "a-foo-b" foo.Deleted "a-foo-b".'''`

答：如果该模式始终成立，您知道双引号内不会有转义的双引号，您可以使用第一个模式。然后，您可以应用多种模式来检测和/或替换您想要的任何内容。 `pat_added`下面解决了我们之前想要解决的问题；它锚定在字符串的`Added`一部分上，因此它不会对`Deleted`字符串的一部分做任何事情。如果您确实想匹配和替换引号内的部分字符串，`pat_deleted`请展示如何做到这一点；它有三个匹配组，并放回第一个和最后一个以让您替换中间的一个。实际上，我们并不需要中间的匹配组；我们可以将要替换的部分留在匹配组之外，就像我们对第一个模式所做的那样。

```
import re
pat_added = re.compile(r'(Added\s+"[^"]+"\s+)\w+')
pat_deleted = re.compile(r'(Deleted\s+"[a-z]-)([^-]+)(-[a-z]"\.)')

s = '''Added "a-foo-b" foo.Deleted "a-foo-b".'''
s = re.sub(pat_added, r'\1bar', s)
s = re.sub(pat_deleted, r'\1bar\3', s)
print(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:16:54.357

如果您的文本总是以点结尾，您可以尝试以下操作：

```
echo 'Added "a-foo-b" foo.'  | sed s/foo\.$/bar/g

Added "a-foo-b" bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:20:41.160

一种使用字符串方法的方法。

```
>>> s='Added "a-foo-b" foo test'
>>> needle='foo'
>>> rind=s.rfind('foo')
>>> if rind!=-1:
...  s=s[:rind] + needle + s[rind+len(needle):] 
```

# linux - wget -O 用于不存在的保存路径？

> ID：11258271
> 
> 赞同：37
> 
> 时间：2012-06-29T08:11:48.753
> 
> 标签：linux, wget

我不能`wget`，虽然已经没有路径可以保存了。我的意思是，`wget`不适用于不存在的保存路径。例如：

```
wget -O /path/to/image/new_image.jpg http://www.example.com/old_image.jpg 
```

如果`/path/to/image/`以前不存在，它总是返回：

```
No such file or directory 
```

我怎样才能让它自动创建路径并保存？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-29T08:19:20.173

尝试`curl`

```
curl http://www.site.org/image.jpg --create-dirs -o /path/to/save/images.jpg 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T08:14:54.827

```
mkdir -p /path/i/want && wget -O /path/i/want/image.jpg http://www.com/image.jpg 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-20T21:10:34.710

要使用 wget 将文件下载到**新目录**`--directory-prefix` **中** ，请使用以下命令`-O`：

```
wget --directory-prefix=/new/directory/ http://www.example.com/old_image.jpg 
```

与,`-O new_file`一起使用不会**创建新的目录**结构，而是将新文件保存在当前目录中。如果您指定，它甚至可能会因“*没有这样的文件或目录*”错误而失败`--directory-prefix`***`-O /new/directory/new_file`***

 **** * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-15T00:52:44.117

如果文件夹不存在，我可以使用以下命令创建文件夹：
`wget -N http://www.example.com/old_image.jpg -P /path/to/image`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T08:29:38.173

wget 只是获取一个文件，而不是为您创建目录结构（mkdir -p /path/to/image/），您必须自己执行此操作：

```
mkdir -p /path/to/image/ && wget -O /path/to/image/new_image.jpg http://www.example.com/old_image.jpg 
```

您可以使用参数告诉 wget 创建目录（因此您不必使用 mkdir）`--force-directories`

总而言之，这将是

```
wget --force-directories -O /path/to/image/new_image.jpg http://www.example.com/old_image.jpg 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-15T00:07:59.703

经过一番搜索，我终于找到**了一种用于`wget`下载不存在路径**的方法。

```
wget -q --show-progress -c -nc -r -nH -i "$1"

=====
Clarification

-q
--quiet --show-progress
  Kill annoying output but keep the progress-bar

-c
--continue
  Resume download if the connection lost

-nc
--no-clobber
  Overwriting file if exists

-r
--recursive
  Download in recursive mode (What topic creator asked for!)

-nH
--no-host-directories
  Tell wget do not use the domain as a directory (for e.g: https://example.com/what/you/need
   - without this option, it will download to "example.com/what/you/need")

-i
--input-file
  File with URLs need to be download (in case you want to download a lot of URLs,
   otherwise just remove this option) 
```

快乐的工作！***

# c# - 列表的 XMLSerialization

> ID：11258272
> 
> 赞同：1
> 
> 时间：2012-06-29T08:11:55.590
> 
> 标签：c#, xml-serialization

我有如下所示的课程。其中包含数字可以从 0 到 n 变化的购物项目。

```
namespace SerializationPOC
{

   public class ShoppingItems
   {
     public string CustomerName { get; set; }
     public string Address { get; set; }
     public List<Item> Items { get; set; }
   }

   public class Item
   {
    public string Name { get; set; }
    public string Price { get; set; }
   }
} 
```

是否可以像下面这样获得 XML Schema 序列化类。

```
<?xml version="1.0" encoding="utf-8" ?>
<ShoppingItems>
<CustomerName>John</CustomerName>
<Address>Walstreet,Newyork</Address>
<Item1>Milk</Item1>
<Price1>1$</Price1>
<Item2>IceCream</Item2>
<Price2>1$</Price2>
<Item3>Bread</Item3>
<Price3>1$</Price3>
<Item4>Egg</Item4>
<Price4>1$</Price4>

<Item..n>Egg</Item..n>
<Price..n>1$</Price..n>
</ShoppingItems> 
```

我想知道这是否可以通过使用序列化来实现，如果不是实现这个模式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:28:13.203

没有支持该布局的标准序列化程序。你必须自己做。就个人而言，我会说“你做错了”；我*强烈*建议（如果可能的话）使用类似的格式

```
<Item name="IceCream" Price="1$"/> 
```

或者

```
<Item><Name>IceCream</Name><Price>1$</Price></Item> 
```

两者都将是微不足道的`XmlSerializer`。

LINQ-to-XML 可能是您最好的选择，例如：

```
var items = new ShoppingItems
{
    Address = "Walstreet,Newyork",
    CustomerName = "John",
    Items = new List<Item>
    {
        new Item { Name = "Milk", Price = "1$"},
        new Item { Name = "IceCream", Price = "1$"},
        new Item { Name = "Bread", Price = "1$"},
        new Item { Name = "Egg", Price = "1$"}
    }
};

var xml = new XElement("ShoppingItems",
    new XElement("CustomerName", items.CustomerName),
    new XElement("Address", items.Address),
    items.Items.Select((item,i)=>
        new[] {
            new XElement("Item" + (i + 1), item.Name),
            new XElement("Price" + (i + 1), item.Price)}))
    .ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:25:46.160

可以看看我的文章吗，[[^]](http://www.codeproject.com/Articles/347758/XML-Serialization-and-Deserialization)

例如，您可以查看以下代码。**序列化**方法在文章中给出。

```
var test = new ShoppingItems()
                           {
                                CustomerName = "test",
                                 Address = "testAddress",
                                  Items = new List<Item>()
                                              {
                                                  new Item(){ Name = "item1", Price = "12"},
                                                  new Item(){Name = "item2",Price = "14"}
                                              },
                           };

            var xmlData = Serialize(test); 
```

它将返回下面给出的字符串，

```
<?xml version="1.0" encoding="utf-16"?>
 <ShoppingItems xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <CustomerName>test</CustomerName>
    <Address>testAddress</Address>
    <Items>
        <Item>
            <Name>item1</Name>
            <Price>12</Price>
       </Item>
       <Item>
           <Name>item2</Name>
           <Price>14</Price>
       </Item>
   </Items>
</ShoppingItems> 
```

# actionscript-3 - 如何在单个条形图上显示标签，使其在柱形图的 flex 中的值？

> ID：11258273
> 
> 赞同：0
> 
> 时间：2012-06-29T08:12:12.393
> 
> 标签：actionscript-3, apache-flex, flex-charts

**请检查此链接** [http://livedocs.adobe.com/flex/3/html/help.html?content=charts_displayingdata_07.html#332805](http://livedocs.adobe.com/flex/3/html/help.html?content=charts_displayingdata_07.html#332805)

这里的问题是它在所有 3 个柱形图（列系列）上显示标签位置（来自链接 .. 1 月：2000，2 月：1000，3 月：1500）

**但不是在所有月份**都显示，我希望该值仅在 3 月显示

 **我该怎么做？需要帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:41:26.487

Create an itemrenderer(Implement IDataRenderer), and in set data method, write the condition for March month.**

# jsf - tr:table 的默认排序？

> ID：11258276
> 
> 赞同：2
> 
> 时间：2012-06-29T08:12:32.120
> 
> 标签：jsf, default, trinidad

有没有办法对 UI 上显示的初始数据进行排序`tr:table`？我知道有一些排序属性可以定义`tr:column`并用于对表中存在的数据进行排序。

但是这里的要求是在打开页面时默认对数据进行排序。除了从后端对表数据进行排序之外，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:27:38.600

默认情况下，您无法对表格进行排序，但您必须以编程方式进行。通过一些工作，您可以编写一个可重用的[`PhaseListener`](http://java.sun.com/javaee/javaserverfaces/1.2/docs/api/javax/faces/event/PhaseListener.html)，您可以从您的 JSF 页面控制它。

确保它只[处理一个阶段](https://stackoverflow.com/questions/2678207/jsf-fview-beforephase-firing-multiple-times-as-i-leave-the-page)（例如`PhaseId.RESTORE_VIEW`）并使用它来设置排序顺序[`setSortCriteria`](http://myfaces.apache.org/trinidad/trinidad-api/apidocs/org/apache/myfaces/trinidad/component/UIXTable.html#setSortCriteria(java.util.List))：

```
List<SortCriterion> sortCriteria = new ArrayList<SortCriterion>(1);
String property = "myProperty";
boolean ascending = true;
sortCriteria.add(new SortCriterion(property, ascending));
myCoreTable.setSortCriteria(sortCriteria); 
```

现在您只需`<f:attribute/>`在表上添加两个 s 即可传递属性名称和升序布尔值，这样您就可以为所有表创建一个可重用的侦听器。

在您的列表中，`<tr:document>`您可以拥有一个`<f:attribute/>`要处理的表 ID 列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:31:42.050

据我所知：没有！

您可以从这里阅读更多信息： [“TRINIDAD-1491”](https://issues.apache.org/jira/browse/TRINIDAD-1491)

# php - 具有匹配列名的 PHP mySQL JOIN

> ID：11258278
> 
> 赞同：2
> 
> 时间：2012-06-29T08:12:33.180
> 
> 标签：php, mysql, duplicates

注意到一个相当大的问题。当我将两个表连接在一起时，两个表中都有一个名为 ID 的列会导致稍后在 PHP 方程式中使用错误的表 ID。

简单的解决方案是更改列名，但除了数据库之外还有其他标准，包括每个表中称为名称的列和许多表中的标题。

有没有办法解决这个问题，或者我应该重命名整个数据库以确保没有重复的列。

参考代码

```
$criteria = "SELECT *
  FROM voting_intention,electors
  WHERE  voting_intention.elector = electors.ID
  AND electors.postal_vote = 1
  AND voting_intention.date = (select MAX(date)
    from voting_intention vote2      
    where voting_intention.elector = vote2.elector)
  AND electors.telephone > 0"

function get_elector_phone($criteria){
    $the_elector = mysql_query("SELECT * $criteria"); while($row = mysql_fetch_array($the_elector)) {
    return $row['ID']; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:19:07.193

我编写了这个函数来帮助执行此操作。基本上，它将表名添加到关联数组的字段名中。

```
while($row = mysql_fetch_array($the_elector))
{
    return $row['ID'];
} 
```

会成为

```
while($row = mysql_fetch_table_assoc($the_elector))
{
    return $row['voting_intention.ID'];
} 
```

功能：

```
function mysql_fetch_table_assoc($resource)
{
    // function to get all data from a query, without over-writing the same field
    // by using the table name and the field name as the index

    // get data first
    $data=mysql_fetch_row($resource);
    if(!$data) return $data; // end of data

    // get field info
    $fields=array();
    $index=0;
    $num_fields=mysql_num_fields($resource);
    while($index<$num_fields)
    {
        $meta=mysql_fetch_field($resource, $index);
        if(!$meta)
        {
            // if no field info then just use index number by default
            $fields[$index]=$index;
        }
        else
        {
            $fields[$index]='';
            // deal with field aliases - ie no table name ( SELECT T_1.a AS temp, 3 AS bob )
            if(!empty($meta->table)) $fields[$index]=$meta->table.'.';
            // deal with raw data - ie no field name ( SELECT 1, MAX(index) )
            if(!empty($meta->name))  $fields[$index].=$meta->name; else $fields[$index].=$index;
        }
        $index++;
    }
    $assoc_data=array_combine($fields, $data);
    return $assoc_data;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:25:03.240

虽然“Gunnx”解决方案是完全可以接受的，但我想提出一个替代方案，因为您似乎只使用了结果的 ID 列。

```
SELECT
    electors.ID
FROM
    voting_intention,electors
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:15:24.840

`mysql_fetch_row`将以数字数组的形式获取数据

# python - 用 Run 运行 Django 找不到 LESS CSS

> ID：11258291
> 
> 赞同：7
> 
> 时间：2012-06-29T08:14:01.940
> 
> 标签：python, django, pycharm

我有一个使用构建的 Django 项目。运行或调试应用程序时，使用我的构建脚本运行良好。我还使用 django-compressor 来压缩和编译我的 LESS 文件。我用 node 安装了 LESS 服务器端，你可以像往常一样从 shell 访问 lessc 二进制文件。django-compressor 运行 Popen 来运行 lessc 命令。当它这样做并抛出异常时：`/bin/sh: lessc: command not found`.

如果我运行 /bin/sh lessc 它会找到它。如果我进入交互式 python 并运行 P`open(['/bin/sh', '-c', 'lessc'])`它会找到它。在 PyCharm 中运行 Django 使用什么 shell 或环境，我如何设置它来读取 /etc/paths 或 $HOME/.bashrc 等。lessc 位于 /etc 中的 /usr/local/bin /路径。

我在 Mac OSX 10.7 上，顺便说一句

感谢您的支持，特拉维斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-19T16:24:30.573

我遇到过同样的问题。为了解决这个问题，我打开了终端并

```
$ which lessc 
```

这给了我 /usr/local/bin/lessc

接下来，在 Pycharm 中，我为我的项目打开了运行/调试配置。

在 Django 服务器下拉列表中，我选择了我的项目。

在右侧的配置视图中，单击“环境变量：”字段后的“...”。

在此环境变量窗口中，我添加了包含以下数据的新行：PATH（名称）/usr/local/bin（值）

确保选中“包括父环境变量”。

单击确定 单击应用/确定

完毕

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T11:31:12.883

正如 Django 压缩器文档中所指出的，您可以使用：

```
COMPRESS_PRECOMPILERS = (
    ('text/less', 'lessc {infile} {outfile}'),
) 
```

但可能由于某种原因，Django 找不到 lessc 二进制文件。因此，只需输入它的全名：

```
COMPRESS_PRECOMPILERS = (
    ('text/less', '/usr/local/bin/lessc {infile} {outfile}'),
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-27T20:06:46.120

你需要`lessc`二进制文件。有几种不同的方法可以得到它。就个人而言，我更喜欢使用非 NodeJS 方法来安装它（在基于 Debian 的发行版上，如 Ubuntu）：

`sudo apt-get install node-less yui-compressor`

它将安装到以下位置之一：

```
/usr/local/bin/lessc
/usr/bin/lessc 
```

其中，应该已经在您的 PATH 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T11:53:46.950

对我来说，通过将其添加到以下内容来解决`settings.py`：

```
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static')
STATICFILES_FINDERS = [
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'static_precompiler.finders.StaticPrecompilerFinder',
] 
```

还要确保`lessc`已安装

```
which lessc 
```

# raphael - 设计动态工作流图哪个更好：Graphiti 还是 Draw2D？

> ID：11258293
> 
> 赞同：0
> 
> 时间：2012-06-29T08:14:06.237
> 
> 标签：raphael

Graphiti 和 Draw2D 哪个更好、更强大、更灵活，因为我需要设计动态工作流程图。所以请告诉我哪个更好？由于我也无法制作钻石形状，所以请告诉我如何使用石墨制作钻石形状？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:04:39.620

如果您需要“钻石”或圆角盒子 - Graphiti 是您的选择。Draw2D 更多的是用 HTML-Dom 元素或完整的表单作为工作流节点来创建工作流图。

如果您无法创建自己的图形，Draw2D 和 graphiti 都不是适合您的工具。两者都是 JS 库而不是完整的应用程序。

问候

# c++ - 通过链接到静态库的动态库加载

> ID：11258298
> 
> 赞同：0
> 
> 时间：2012-06-29T08:14:50.277
> 
> 标签：c++, plugins, linker, shared-libraries, static-libraries

我有一个程序结构

> 静态库（ACE）
> 
> 静态库（common.a）
> 
> 动态库插件1(1.so)
> 
> 插件 2(2.so) 和可执行文件

`plugin1, plugin2 and executable`所有人都使用两者`common.a`并`libACE.a` 按照此处的教程进行操作： http: [//www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)。

我只在编译可执行文件时链接这两个静态库，如下所示：

```
g++  -g -DUNIX -DLINUX   -Wall -D__NUMBER_FIELD_ID__ -I/opt/ACE_wrappers -Ilib/ -I. -I./common -I./common/lib -I../inc -I/opt/pct/pctlib/inc -o acs_d acs_d.o  -L../lib  -Wl,--export-dynamic -rdynamic -Wl,--whole-archive /opt/ACE_wrappers/ace/libACE.a  common/libcommon_d.a -Wl,--no-whole-archive -ldl -lrt -lpthread 
```

关键是，我用dlopen打开这两个插件，一个成功一个失败，成功的一个使用了更多的ACE函数，报错是报undefined symbol如下图：

```
[CModuleMgr] loadCModule(): Errors occurred when opening the module. nCModuleId[1] pLibHandle[(nil)] sCModulePath[/opt/acs/adapter/libadapter_d.so] sError[/opt/acs/adapter/libadapter_d.so: undefined symbol: _ZN17ACE_Event_Handler10set_handleEi] 
```

对于主程序，我尝试使用命令 nm 来查找符号

```
$ nm acs_d | grep _ZN17ACE_Event_Handler10set_handleEi
000000000048f240 t _ZN17ACE_Event_Handler10set_handleEi 
```

它在那里，但插件找不到它！我使用了类似的选项， `-Wl,--export-dynamic -rdynamic -Wl,--whole-archive.`但它仍然找不到这个符号。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:43:04.860

> 它在那里，但插件找不到它！

不，符号*不*存在！

或者更确切地说，该符号具有*内部*链接 ( `t`)，并且在它所链接的 ELF 图像之外不可见或不可用。全局可见符号具有外部 ( `T`) 链接。

`t`符号具有链接的最可能原因是符号`__attribute__((visibility("hidden")))`在源级别具有链接。文档[在这里](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Function-Attributes.html)。

为什么 ACE 开发人员将其标记为这样，我不知道。

# uiimageview - 当设置为蓝色时，UIColor 总是给出白色

> ID：11258303
> 
> 赞同：3
> 
> 时间：2012-06-29T08:15:01.277
> 
> 标签：uiimageview, background-color, uicolor

我正在尝试用这个设置 UIImageView 的背景颜色（它应该返回一些绿色）：

```
 cell.background.backgroundColor = [UIColor colorWithRed:50 green:200 blue:50 alpha:1]; 
```

但由于某种原因，这只是给我一个白色，似乎每当我设置蓝色时它会变回白色，当我这样做时，它会返回我黄色，这是正常的：

```
cell.background.backgroundColor = [UIColor colorWithRed:50 green:200 blue:0 alpha:1]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T08:39:39.667

好的，我没有意识到 UIColor 需要从 0 到 1 的浮点数，而不是从 0 到 255 的浮点数，这有效：

```
cell.background.backgroundColor = [UIColor colorWithRed:240.0f/255.0f green:245.0f/255.0f blue:254.0f/255.0f alpha:1]; 
```

# database - 如何在运行时配置 Django DATABASES 设置？

> ID：11258304
> 
> 赞同：2
> 
> 时间：2012-06-29T08:15:07.180
> 
> 标签：database, django, settings

这些天我正在研究如何在 BAE 上编程。BAE 是一个类似 GAE 的云平台。它支持 python 2.7 和 MySQL。但是有一个问题，BAE`DATABASE`在请求中提供了信息。我可以像这样获得这些设置：

```
port = request.META['HTTP_BAE_ENV_ADDR_SQL_PORT'] 
```

但是如何`DATABASES`在运行时配置设置？

我试图为这个问题编写一个中间件，如下所示：

```
from  django.conf import settings

class bae_database(object):
    def process_request(self, request):
        BAE_DB = {
            'default': {
                'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
                'NAME': 'django',                      # Or path to database file if using sqlite3.
                'USER': 'root',                      # Not used with sqlite3.
                'PASSWORD': '',                  # Not used with sqlite3.
                'HOST': 'localhost',                      # Set to empty string for localhost. Not used with sqlite3.
                'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3.
            },
        } 
        settings.DATABASES = BAE_DB 
```

然后在`settings.py`文件中我将此中间件添加到`MIDDLEWARE_CLASSES`并设置`DATABASES = {}`. 结果，我收到此错误消息：

```
You haven't set the database ENGINE setting yet. 
```

事实上中间件是有效的，因为在 Django 错误页面的设置部分我得到：

```
DATABASES   
{'default': {'ENGINE': 'django.db.backends.mysql', 'HOST': 'localhost', 'NAME': 'django', 'PASSWORD': '********************', 'PORT': '3306', 'USER': 'root'}} 
```

不知道为什么，我改了`DATABASES`属性，但是没用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:30:34.007

`DATABASES == {}`在吗`settings.py`？- 如果是这样，请尝试将其设置`settings.py`为某些内容 - 例如，您当前在中间件中显示的测试值。

# android - TextView 获取椭圆的文本值

> ID：11258305
> 
> 赞同：0
> 
> 时间：2012-06-29T08:15:20.643
> 
> 标签：android, android-widget, textview

如何获得屏幕上显示的椭圆形文本值？例如; 我尝试在 textview 上写“sadasdasdasdadaadasasad”，这个文本对于 textview 来说很长，它显示为“sadasdas ...”我想要的是在代码中获得椭圆形的文本值。我怎么才能得到它？

# linq - 二进制表达式包含方法

> ID：11258307
> 
> 赞同：0
> 
> 时间：2012-06-29T08:15:21.820
> 
> 标签：linq, c#-4.0, expression-trees

我创建了一个帮助类，它能够从字符串参数构建 lambda 表达式，我可以使用它过滤查询结果。

但是我对 LINQ.Expressions.Expression 没有 Contains 方法没有什么问题。

这是我的代码：

```
 string member = d.Member;
        object value = d.Value;

        System.Linq.Expressions.Expression expression = System.Linq.Expressions.Expression.Parameter(typeof(T), "e");

        foreach (var property in member.Split('.'))
        {
            expression = System.Linq.Expressions.Expression.PropertyOrField(expression, property);
        }

        ConstantExpression c = System.Linq.Expressions.Expression.Constant(value, typeof(string));

        BinaryExpression b = null;

        switch (d.Operator)
        {
            case FilterOperator.IsEqualTo:

                b = System.Linq.Expressions.Expression.Equal(expression, c);

                break;

            case FilterOperator.Contains:

                b = GetExpression<T>(expression.ToString(), value.ToString()).Body as BinaryExpression;

                break;

            case FilterOperator.IsGreaterThanOrEqualTo:

                b = System.Linq.Expressions.Expression.GreaterThanOrEqual(expression, c);

                break;

            case FilterOperator.IsLessThanOrEqualTo:

                b = System.Linq.Expressions.Expression.LessThanOrEqual(expression, c);

                break;
        }

        CriteriaCollection.Add(b);

static Expression<Func<T, bool>> GetExpression<T>(string propertyName, string propertyValue)
    {
        var parameterExp = Expression.Parameter(typeof(T), "type");
        var propertyExp = Expression.Property(parameterExp, propertyName);
        MethodInfo method = typeof(string).GetMethod("Contains", new[] { typeof(string) });
        var someValue = Expression.Constant(propertyValue, typeof(string));
        var containsMethodExp = Expression.Call(propertyExp, method, someValue);

        return BinaryExpression.Lambda<Func<T, bool>>(containsMethodExp, parameterExp);
    } 
```

它应该可以工作，但是我如何将 Expression 转换为 BinaryExpression？

有人知道这一点或知道其他有效的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-19T13:05:42.807

我知道这个问题已经很久没有问过了，但是，好吧，我想我已经找到了答案，基本上，答案就在`MakeBinary`.

首先，我必须创建一个类似 Contains 的方法，但不是自引用扩展方法，如下所示：

```
public static bool Containss(string text, string text2)
{
    return text.Contains(text2, StringComparison.OrdinalIgnoreCase);
} 
```

然后你像这样使用它：

```
MethodInfo method = typeof(StackOverflowAnswer).GetMethod("Containss", new[] { typeof(string), typeof(string) });
var constainsExp = Expression.MakeBinary(ExpressionType.Equal, Expression.Constant("FULL TEXT"), Expression.Constant("TEXT"), false, method); 
```

考虑到您的可证明目标，也可能有所帮助的是接收成员、参数和值来组成您的最终表达式。这是一个例子：

```
class StackOverflowAnswer
{
    static void Main()
    {
        ParameterExpression parameter = Expression.Parameter(typeof(Student), typeof(Student).Name);

        var exp1 = GetBinaryExpression(parameter, "Name", "Foo");
        var exp2 = GetBinaryExpression(parameter, "Name", "Bar");
        BinaryExpression[] expressions = new BinaryExpression[] { exp1, exp2 };

        var bin = CombineExpressions(expressions, parameter);
        var func = Expression.Lambda<Func<Student, bool>>(bin, parameter);
        var exp = func.Compile();

        Student student = new Student { Name = "Foo Bar" };

        var x = exp(student);

        Console.WriteLine(x);
    }

    public static BinaryExpression GetBinaryExpression(ParameterExpression parameter, string property, object comparissonValue)
    {
        MemberExpression member = Expression.Property(parameter, property);
        ConstantExpression constant = Expression.Constant(comparissonValue, comparissonValue.GetType());

        MethodInfo method = typeof(StackOverflowAnswer).GetMethod("Containss", new[] { typeof(string), typeof(string) });
        var containsExp = Expression.MakeBinary(ExpressionType.Equal, member, constant, false, method);
        return containsExp ;
    }

    public static BinaryExpression CombineExpressions(BinaryExpression[] expressions, ParameterExpression parameter)
    {
        bool first = true;
        BinaryExpression expFull = expressions[0];
        foreach (BinaryExpression item in expressions)
        {
            if (first)
                first = false;
            else
            {
                expFull = Expression.AndAlso(expFull, item);
            }
        }
        return expFull;
    }

    internal class Student
    {
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-09T12:20:46.623

```
 public class FilterExpressionHelper<T> where T : class
{
    public FilterExpressionHelper()
    {
        CriteriaCollection = new List<BinaryExpression>();
    }

    public List<BinaryExpression> CriteriaCollection { get; set; }

    public Expression<Func<T, bool>> NoFilterExpression { get; set; }

    public void RemoveFilterCriteriaFilterDescriptor(Telerik.Windows.Data.FilterDescriptor d)
    {
        string member = d.Member;
        object value = d.Value;

        System.Linq.Expressions.Expression expression = System.Linq.Expressions.Expression.Parameter(typeof(T), "e");

        foreach (var property in member.Split('.'))
        {
            expression = System.Linq.Expressions.Expression.PropertyOrField(expression, property);
        }

        ConstantExpression c = System.Linq.Expressions.Expression.Constant(value, typeof(string));
        BinaryExpression b = System.Linq.Expressions.Expression.Equal(expression, c);

        BinaryExpression expr = CriteriaCollection.Where(cr => cr.Right.ToString() == b.Right.ToString()).FirstOrDefault();

        CriteriaCollection.Remove(expr);
    }

    public void AddFilterCriteriaFilterDescriptor(Telerik.Windows.Data.FilterDescriptor d)
    {
        string member = d.Member;
        object value = d.Value;

        System.Linq.Expressions.Expression expression = System.Linq.Expressions.Expression.Parameter(typeof(T), "e");

        foreach (var property in member.Split('.'))
        {
            expression = System.Linq.Expressions.Expression.PropertyOrField(expression, property);
        }

        ConstantExpression c = System.Linq.Expressions.Expression.Constant(value, value.GetType());

        BinaryExpression b = null;

        switch (d.Operator)
        {
            case FilterOperator.IsEqualTo:

                b = System.Linq.Expressions.Expression.Equal(expression, c);

                break;

            case FilterOperator.Contains:

                //b = GetExpression<T>(expression.ToString(), value.ToString()).Body as BinaryExpression;

                break;

            case FilterOperator.IsGreaterThanOrEqualTo:

                b = System.Linq.Expressions.Expression.GreaterThanOrEqual(expression, c);

                break;

            case FilterOperator.IsLessThanOrEqualTo:

                    b = System.Linq.Expressions.Expression.LessThanOrEqual(expression, c);

                break;
        }

        CriteriaCollection.Add(b);
    }

    public  Expression<Func<T, bool>> GetLambdaExpression()
    {
        ParameterExpression e = System.Linq.Expressions.Expression.Parameter(typeof(T), "e");

        var orderedList = CriteriaCollection.OrderBy(cr => cr.Left.ToString()).ToList();

        var disctinctValues = CriteriaCollection.Distinct(new BinaryExpressionComparer()).ToList();

        List<BinaryExpression> orElseExpressionList = new List<BinaryExpression>();

        foreach (var value in disctinctValues)
        {
            System.Linq.Expressions.BinaryExpression expression = null;

            foreach (var criteria in orderedList.Where(cr => cr.Left.ToString().Equals(value.Left.ToString())))
            {
                if (expression == null)
                {
                    expression = criteria;
                }
                else
                {
                    if (expression.Left.ToString() == criteria.Left.ToString())
                        expression = System.Linq.Expressions.BinaryExpression.OrElse(expression, criteria);
                    else
                        expression = System.Linq.Expressions.BinaryExpression.AndAlso(expression, criteria);

                }
            }

            orElseExpressionList.Add(expression);
        }

        System.Linq.Expressions.BinaryExpression expressionAnd = null;

        foreach (var ex in orElseExpressionList)
        {
            if (expressionAnd == null)
            {
                expressionAnd = ex;
            }
            else
            {
                expressionAnd = System.Linq.Expressions.BinaryExpression.AndAlso(expressionAnd, ex);
            }
        }

        if (expressionAnd != null)
        {
            return System.Linq.Expressions.Expression.Lambda<Func<T, bool>>(expressionAnd, e);
        }
        else
        {
            return NoFilterExpression;
        }
    }

    static Expression<Func<T, bool>> GetExpression<T>(string propertyName, string propertyValue)
    {
        var parameterExp = Expression.Parameter(typeof(T), "type");
        var propertyExp = Expression.Property(parameterExp, propertyName);
        MethodInfo method = typeof(string).GetMethod("Contains", new[] { typeof(string) });
        var someValue = Expression.Constant(propertyValue, typeof(string));
        var containsMethodExp = Expression.Call(propertyExp, method, someValue);

        return BinaryExpression.Lambda<Func<T, bool>>(containsMethodExp, parameterExp);
    }

    private static System.Linq.Expressions.BinaryExpression Like(Expression lhs, Expression rhs)
    {
        //typeof(string).GetMethod("Contains", new Type[] { typeof(string) }, null);

        Expression expression = Expression.Call(
            typeof(FileInfoHelper).GetMethod("Like",
                BindingFlags.Static | BindingFlags.NonPublic | BindingFlags.Public)
                , lhs, rhs);

        return expression as BinaryExpression;
    }

    class BinaryExpressionComparer : IEqualityComparer<BinaryExpression>
    {
        #region IEqualityComparer<Contact> Members

        public bool Equals(BinaryExpression x, BinaryExpression y)
        {
            return x.Left.ToString().Equals(y.Left.ToString());
        }

        public int GetHashCode(BinaryExpression obj)
        {
            return obj.Left.ToString().GetHashCode();
        }

        #endregion
    }
} 
```

# android - 图库滑动调整

> ID：11258312
> 
> 赞同：0
> 
> 时间：2012-06-29T08:15:40.903
> 
> 标签：android, android-layout

我需要减少滑动的距离，以便将我的画廊的图片更改为下一张。现在这个距离是标准速率，大约是画廊宽度的一半，但我需要它大约是画廊总宽度的 1/3 或 1/4。

谢谢。

UPD：现在我的自定义画廊 onFling 返回 false 以便按页面列出：

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    return false;
} 
```

# android - IDEA - “从外部模型导入”与“从现有源创建”？

> ID：11258321
> 
> 赞同：23
> 
> 时间：2012-06-29T08:16:20.087
> 
> 标签：android, intellij-idea

在 IDEA 11 中，“从外部模型导入项目”和“从现有源创建项目”有什么区别？

![在此处输入图像描述](../Images/a9e6244adc506df043a029fdade27cfa.png)

我已经在现有代码上测试了这两个功能（计算了创建的文件数量和大小增加），似乎这两个功能都做同样的事情。

那么，什么时候使用第一个功能，什么时候使用第二个功能的黄金法则是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-29T08:50:24.177

使用“从外部模型导入项目”选项，您可以导入在不同模型中创建的现有项目。像Eclipse 或Maven 项目等。IntelliJ IDEA 将解释项目文件（即你的eclipse 项目将被迁移到IDEA）。

“从现有源代码创建项目”选项只会在现有源代码上创建 IDEA 项目。

没有黄金法则。这只是您需要的情况。如果你有一个 Eclipse 或 Maven 项目并且你想用 IDEA 加载它，那么使用“从外部模型导入项目”。

否则，如果您只有一堆源代码并且想快速开始，请使用“从现有源创建项目”。

# c# - 如何将 LUT（颜色查找表）应用于 IOS 中的 CGImage 或 UIImage？

> ID：11258323
> 
> 赞同：6
> 
> 时间：2012-06-29T08:16:22.260
> 
> 标签：c#, ios, xamarin.ios

给定 CGImage 或 UIImage，我如何应用自定义颜色查找表（又名 LUT、CLUT、颜色图）？也就是说，给定映射，我如何将图像中的颜色映射到新颜色？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T18:31:58.990

我将描述您可以采取的三种方法。

1.  手动执行
2.  使用[CIFilter](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html)（在 iOS 5 中可用）
3.  使用着色器（GPU 程序）

## 手动方法

首先，从 UIImage 中获取原始图像数据。您可以通过创建一个适当大小（宽度 * 高度 * 分量）的字节数组，然后使用 CGBitmapContext 将其绘制到其中来做到这一点。像这样的东西：

```
 using (var colorSpace = CGColorSpace.CreateDeviceRGB())
    using (var context = new CGBitmapContext(
        bytes, width, height, bitsPerComponent, bytesPerRow, 
        colorSpace, CGBitmapFlags.ByteOrder32Big | CGBitmapFlags.PremultipliedLast))
    {
        var drawRect = new RectangleF(-rectangle.X, -rectangle.Y, image.CGImage.Width, image.CGImage.Height);
        context.ClipToRect(new RectangleF(0, 0, width, height));
        context.DrawImage(drawRect, image.CGImage);
    } 
```

然后为您的输出图像创建一个字节数组（可能大小相同）。遍历输入图像，在查找表中查找颜色值并将它们写入输出图像。

您可以通过`CGDataProvider`从字节构造 a ，然后`CGImage`从中构造 a ，然后`UIImage`从`CGImage`.

## [CIFilter](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html)方法

从 iOS 5 开始，Apple 提供了许多内置的图像操作。通常，这些比手动操作更易于使用且速度更快。但是，根据指定颜色查找表的方式，您可能找不到完美的匹配。

给定一个 CIFilter，您可以设置 inputImage，然后从`OutputImage`属性中检索输出。有关CICategoryColorAdjustment 和 CICategoryColorEffect 类别中的过滤器列表，请参阅[文档。](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)在撰写本文时，我建议查看 CIToneCurve、CIFalseColor、CIColorMap 和 CIColorCube。遗憾的是，在撰写本文时，CIColorMap 在 iOS 上不可用。

如果您正在做科学成像，并且只使用两种颜色之间的线性渐变，我建议您查看**CIFalseColor**。

这是一个使用随机颜色查找函数填充**CIColorCube的示例。**请注意，CIFilter 可以通过名称（非类型安全）或以强类型方式动态创建。如果您知道要在代码时使用什么过滤器，我建议使用强类型过滤器（`CIColorCube`而不是`CIFilter.FromName("CIColorCube")`）。我在以下示例中使用了动态方法，因为它更令人困惑。

```
static void PopulateColorCubeFilter(CIFilter filter)
{
    if (filter.Name != "CIColorCube")
        return;

    int dimension = 64;  // Must be power of 2, max of 128 (max of 64 on ios)
    int cubeDataSize = 4 * dimension * dimension * dimension;
    filter[new NSString("inputCubeDimension")] = new NSNumber(dimension);

    // 2 : 32 /4 = 8 = 2^3
    // 4 : 256 /4 = 64 = 4^3
    // 8 : 2048 /4 = 512 = 8^3

    var cubeData = new byte[cubeDataSize];
    var rnd = new Random();
    rnd.NextBytes(cubeData);
    for (int i = 3; i < cubeDataSize; i += 4)
        cubeData[i] = 255;
    filter[new NSString("inputCubeData")] = NSData.FromArray(cubeData);
} 
```

## GPU 着色器方法

最后，在放大倍率下保持正确的最通用高性能方法是在 GPU 上进行颜色映射。这比前两种方法更费力，因此您需要确定是否值得。

1.  使用输入图像加载一个纹理贴图（又名 Sampler2D）
2.  使用您的颜色贴图加载第二个纹理贴图（实际上它是 1D 纹理，但使用 OpenGL ES 可能需要作为 2D 纹理加载）
3.  将两个纹理贴图和一个着色器应用于四边形
4.  在着色器中使用纹理坐标在第一个纹理中查找颜色，然后使用第一个纹理中的值在第二个纹理中查找。那是你的输出颜色。

# linux - 如何告诉“dpkg”不要下载/安装损坏的源？

> ID：11258324
> 
> 赞同：0
> 
> 时间：2012-06-29T08:16:23.530
> 
> 标签：linux, ubuntu, debian, apt, dpkg

每当我尝试使用 apt-get/dpkg 时，它都会尝试安装损坏的源代码。我怎么能告诉它不要这样做？

这是它的错误：

```
dpkg: error processing oracle-java7-installer (--configure):
 subprocess installed post-installation script returned error exit status 1

E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

**更新 ：**

我在这里找到了完美的解决方案：

[https://askubuntu.com/questions/121226/how-to-completely-remove-a-oracle-jdk-that-didnt-install-properly](https://askubuntu.com/questions/121226/how-to-completely-remove-a-oracle-jdk-that-didnt-install-properly)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:22:48.353

你需要定义这个包是否依赖于某些东西，你是否需要它。如果不只是强制清除它

```
aptitude purge oracle-java7-installer 
```

甚至

```
dpkg --force-all --purge oracle-java7-installer 
```

如果您需要它，请尝试确定它损坏的原因。由于您发布的错误，安装程序中的脚本损坏。所以你需要修复它。最简单的方法是解压缩，修复脚本并重新打包。之后安装应该成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T13:17:15.700

您还需要先安装 aptitude，因为它不再是默认安装的。并使用 sudo 权限。

```
sudo apt-get install aptitude 
```

和

```
sudo aptitude purge oracle-java7-installer 
```

或者

```
sudo dpkg --force-all --purge oracle-java7-installer 
```

# python - python网页mod_wsgi

> ID：11258326
> 
> 赞同：3
> 
> 时间：2012-06-29T08:16:30.737
> 
> 标签：python, mod-wsgi, mod-python

在我将 mod_python 用于 python 网站之前。不幸的是 mod_python 不再是最新的，所以我寻找另一个框架并找到了 mod_wsgi。

在 mod_python 中，可以有索引方法和其他方法。我想要不止一页被调用。像这样的东西：

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output]

def test(environ, start_response):
    status = '200 OK'
    output = 'Hello test!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

mod_wsgi 有可能吗？

**解决方案：Flask 框架可以满足我的需要**

```
#!/usr/bin/python
from flask import Flask
from flask import request
app = Flask(__name__)
app.debug = True
@app.route("/")
def index():
    return "Hello index"

@app.route("/about")#, methods=['POST', 'GET'])
def about():
    content = "Hello about!!"
    return content

if __name__ == "__main__":
    app.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:02:37.053

WSGI 是 webapps 的通用入口点，也就是说，您在搜索 mod_wsgi 时只找到 hello world 的原因是您正在搜索 mod_wsgi 而不是实现标准的框架。

这么看，wsgi 有点像洋葱。网络服务器将请求发送到您的可调用对象。有 2 个参数：`environ`和`start_response`。据我所知，start_response 是发送标题的函数，environ 是存储所有参数的地方。

您可以滚动自己的框架或使用金字塔、烧瓶等。这些框架中的每一个都可以与 wsgi 绑定。

然后创建一个处理请求的 wsgi 中间件。然后，您可以将“PATH_INFO”解析为不同的可调用对象。

```
def my_index(environ):
    response_headers = [('Content-type', 'text/plain')]
    return response_headers, environ['PATH_INFO']

def application(env, st):
    response = None
    data = None
    if environ['PATH_INFO'] == '/index':
        response, data = my_index(environ)

    st('200 ok', response)

    return [data] 
```

这是一个相当简单的例子，但是在环境中你可以做任何你想做的事情。wsgi 本身并没有做任何你可能已经习惯于使用 mod_python 的事情。它实际上只是用于网络服务器的 python 接口。

**编辑**

正如评论中的其他人所说，如果您不知道自己在做什么，请不要尝试自己动手。考虑使用其他框架并首先了解更多信息。

例如，您需要编写正确的方法将函数绑定到 url。正如我在示例中所写的那样非常糟糕，但应该知道它是如何在后台完成的。您可以使用正则表达式处理请求以提取 id 或使用类似于遍历金字塔和 zope 的东西。

如果您真的坚持自己滚动，请查看 webob 教程。

[http://docs.webob.org/en/latest/do-it-yourself.html](http://docs.webob.org/en/latest/do-it-yourself.html)

# javascript - Android 上的 HTML 地理位置不提示

> ID：11258331
> 
> 赞同：0
> 
> 时间：2012-06-29T08:16:55.427
> 
> 标签：javascript, android, asp.net, html, geolocation

我正在对网页中的地理位置进行一些研究。

我已经建立了一个基本（ASP.NET）页面来检索经纬度。这是我在该页面中使用的 javascript 代码片段：

```
function showPosition(position) {
    var latlondata = position.coords.latitude + "," + position.coords.longitude;
    var latlon = "Your Latitude Position is:=" + position.coords.latitude + "," + "Your Longitude Position is:=" + position.coords.longitude;
    x.innerHTML = latlon;

    var img_url = "http://maps.googleapis.com/maps/api/staticmap?center="  + latlondata + "&zoom=14&size=400x300&sensor=false";
    document.getElementById("mapholder").innerHTML = "<img src='" + img_url + "' />";
}

function showError(error) {
    if (error.code == 1) {
        x.innerHTML = "User denied the request for Geolocation."
    }
    else if (err.code == 2) {
        x.innerHTML = "Location information is unavailable."
    }
    else if (err.code == 3) {
        x.innerHTML = "The request to get user location timed out."
    }
    else {
        x.innerHTML = "An unknown error occurred."
    }
} 
```

但是，当我在我的 android 设备（HTC Wildfire）上尝试这个时。它报告“使用拒绝地理定位请求”，但我的手机上没有看到任何提示。

这是我在代码或手机（或两者）中做错了吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:20:46.023

我认为您必须在浏览器中设置设置，对于实施更改请访问[此链接](https://stackoverflow.com/questions/3367994/javascript-geolocation-on-android-doesnt-work)

# windows-phone-7 - WebClient.OpenReadAsync - 如何发布变量而不是使用查询字符串

> ID：11258343
> 
> 赞同：0
> 
> 时间：2012-06-29T08:17:23.283
> 
> 标签：windows-phone-7, post, webclient

我正在使用以下代码从我的网络服务器检索 json 字符串：

```
var webClient = new WebClient();

webClient.OpenReadCompleted += OnOpenReadCompleted;

webClient.OpenReadAsync(new Uri("https://myurl.com/request.cgi?user=" + user + "&pass=" + pass + "&junk=" + DateTime.Now, UriKind.Absolute));

...

private void OnOpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
// response processed here
} 
```

我打算加密使用的变量，但希望能够将变量发布到服务器而不是将它们包含在查询字符串中。我将如何实现这一目标？

谢谢 - 斯图

编辑：已将代码更改为以下内容：

```
var webClient = new WebClient();

                    webClient.UploadStringCompleted += OnOpenReadCompleted;
                    webClient.Headers["Content-Type"] = "application/x-www-form-urlencoded";
                    webClient.Encoding = Encoding.UTF8;

                  webClient.UploadStringAsync(new Uri("https://myurl.com/request.cgi"), "POST", "user=" + user + "&pass=" + pass + "&junk=" + DateTime.Now, UriKind.Absolute); 

...

private void OnOpenReadCompleted(object sender, UploadStringCompletedEventArgs e)
    {
    // response processed here
    } 
```

作为响应处理的一部分，我检查隔离存储以获取已保存的文件，如果存在则将其删除并将新响应保存到文件中。

但是，由于现在更改上面的代码不会让我删除现有文件：

```
private void OnOpenReadCompleted(object sender, UploadStringCompletedEventArgs e)
    {
        StreamReader reader = new StreamReader(e.Result);
        string myresult = reader.ReadToEnd();
        reader.Close();
        reader.Dispose();
        IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();
                if (store.FileExists("json.txt")) 
                    { 
                       store.DeleteFile("json.txt");   // this errors with System.MethodAccessException was unhandled
        //  Message=Attempt to access the method failed: System.IO.StreamReader..ctor(System.String)
                    }
         ...
     } 
```

不明白为什么代码更改会影响这一点？

编辑：

通过更改固定：

```
StreamReader reader = new StreamReader(e.Result);
string myresult = reader.ReadToEnd();
reader.Close();
reader.Dispose(); 
```

到

```
string myresult = (string)e.Result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:54:38.730

使用上传字符串发布数据： webClient.UploadStringAsync(uri, "POST", body); 你只需要配置你的服务器希望看到的“正文”数据。

# jquery - jQuery - 在元素上找到最后一个类

> ID：11258346
> 
> 赞同：23
> 
> 时间：2012-06-29T08:17:34.140
> 
> 标签：jquery, jquery-selectors

如何在不知道确切类数的情况下找到元素上的最后一个类？

我们的元素：

```
 <div class="class-1 class-2 some-other-class"></div> 
```

使用拆分的常规方法在这里不起作用，因为我们不知道类的数量。我们可以检查 的长度`.split(' ')`吗？

```
var i = $('div').prop('class');
var j = i.split(' ')[x]; 
```

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-29T08:23:37.990

最简单的解决方案是使用`pop`，它访问数组中的最后一个元素。

```
var lastClass = $('div').attr('class').split(' ').pop(); 
```

请注意，这`pop`也会从数组中删除元素，但由于您没有对它做任何其他事情，所以这不是问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-29T08:19:52.517

```
var classStr = $('div').attr('class'),
    lastClass = classStr.substr( classStr.lastIndexOf(' ') + 1); 
```

**[演示](http://jsfiddle.net/QStkd/526/)**

由于`classStr`包含由单个 分隔的类名`space`，因此`lastIndexOf(' ')`将找到最后一个`space`并从那里进行分区并为您提供`class`姓氏。

# jquery - jQuery 动画队列没有启动

> ID：11258347
> 
> 赞同：0
> 
> 时间：2012-06-29T08:17:43.617
> 
> 标签：jquery, jquery-animate

为什么以下代码段不起作用？它没有给出任何错误，但它也不起作用。[关于我在这里](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me)
看到的空物体。

```
<script type="text/javascript">

    jQuery(document).ready(function(){
        var o = jQuery({});         
        var block = jQuery('#box');
        jQuery('#start').click(function(){
            o.queue('custom',function(next){
                block.animate({left:"+=500"},1000);
                next();
            });
            o.queue('custom',function(next){
                block.animate({left:"-=500"},1000); 
                next();
            });
            o.queue('custom',function(next){
                block.animate({top:"+=500"},1000);      
                next();
            });
            o.queue('custom',function(next){
                block.animate({top:"-=500"},1000);  
                next();
            });

            o.dequeue('custom'); 
        });
    });

</script> 
```

**更新 1**

如果我在 dequeue 调用之前和之后插入 console.log，如下所示：

```
 console.log(o.queue('custom').length);
            o.dequeue('custom'); 
            console.log(o.queue('custom').length); 
```

然后我在控制台中得到 4 0。这意味着函数被添加到队列中并因此出队。

**更新 2**

如果我在块动画之后立即插入 console.log，例如，像这样：

```
 block.animate({left:"+=500"},1000);
                console.log('1'); 
```

然后我得到 1 2 3 4，这意味着所有 4 个函数都被调用了。

**更新 3**

我的html很简单：

body 标签中有 1 个输入按钮和 1 个 div。div 有以下 CSS：

```
宽度：200 像素；高度：200 像素；显示：块；背景：无 重复滚动 0 0 绿色

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:42:25.947

我让它在[jsbin](http://jsbin.com/icomon)上运行（您可以使用右上角的按钮对其进行编辑）。

您需要`position:relative`在`#block`元素上进行设置。没有它，`div`将不会受到应用的属性更改的影响，因为属性[的初始值为`static`](https://developer.mozilla.org/en/CSS/position))。

从 MDN 文档中，该`static`位置意味着：

> 正常行为。顶部、右侧、底部和左侧属性不适用。

[但是，静态元素的属性当然会更改，如您在此示例](http://jsbin.com/icomon/2)中所见（检查控制台）。但它们没有任何可见的效果。

希望这可以帮助。您可以恢复我对代码所做的所有其他更改，这些更改是在设置位置之前完成的。

# excel - Excel 2012 数据透视表显示的数据

> ID：11258348
> 
> 赞同：0
> 
> 时间：2012-06-29T08:17:44.750
> 
> 标签：excel, pivot

我正在尝试用 Excel 制作一个简单的错误查看器。我想我需要一个数据透视表。

我附上了我到目前为止所获得的屏幕截图。我想要的是要显示的实际数据，而不是 'Count of x' 列。

![Excel 2012 数据透视表错误查看器](../Images/b4affcf5ec3befe634297c62f954fb31.png)

我的数据表格式如下：

![Excel 2012 示例数据](../Images/f123923a1df60254bfe85792e1124d12.png)

非常感谢，

理查德·休斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:32:55.410

您不能在这些列中显示实际文本。列显示聚合数据。你可以有计数和总和、平均值等。

我*认为*您想要的是“经典”数据透视表视图。进入数据透视表选项，显示选项卡并选择“经典数据透视表布局”。

然后将您想要查看的数据添加为“行标签”而不是值。您可能希望将 ID 计数保留为值。那个更好吗？

# in-app-purchase - 谷歌播放 API 返回错误

> ID：11258349
> 
> 赞同：1
> 
> 时间：2012-06-29T08:17:53.440
> 
> 标签：in-app-purchase, google-api, in-app-billing, subscription, google-play

我遇到了与[这篇文章中描述的相同的问题](https://stackoverflow.com/questions/11115381/unable-to-get-the-subscription-information-from-google-play-android-developer-ap)

. 我们使用了几乎完全相同的代码。我已经在下面的 mehotd 中尝试了谷歌服务帐户的客户 ID 和电子邮件地址

```
setServiceAccountId(GOOGLE_SERVICE_CLIENT_EMAIL) OR
setServiceAccountId(GOOGLE_CLIENT_ID) 
```

错误随 a/c id 的变化而变化。如果我使用客户端 ID，错误是

> 400 错误请求 {“错误”：“invalid_grant”}

如果我使用服务电子邮件 ID，则错误是

```
401 Unauthorized {   
"code" : 401,   "errors" : [ {
    "domain" : "androidpublisher",
    "message" : "This developer account does not own the application.",
    "reason" : "developerDoesNotOwnApplication"   } ],   "message" : "This developer account does not own the application." } 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:54:41.550

似乎有一些证据表明 Google Play API 目前无法与服务帐户一起使用（疯狂）。[这里](https://stackoverflow.com/questions/10824426/android-subscription-and-google-api)有关于这个问题的另一个线程。[您可以在此处](http://googledevelopers.blogspot.co.uk/2012/03/service-accounts-have-arrived.html)阅读有关 Google 服务帐户的信息。[您可以在此处](https://developers.google.com/android-publisher/authorization)阅读有关 Android Google Play API 身份验证的信息。

一旦您在 Google API 控制台上完成了获得 refresh_token 的操作，您就可以获得如下所示的访问令牌：

```
private String getAccessToken()
{

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");
    try 
    {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
        nameValuePairs.add(new BasicNameValuePair("grant_type",    "refresh_token"));
        nameValuePairs.add(new BasicNameValuePair("client_id",     "YOUR_CLIENT_ID);
        nameValuePairs.add(new BasicNameValuePair("client_secret", "YOUR_CLIENT_SECRET"));
        nameValuePairs.add(new BasicNameValuePair("refresh_token", "YOUR_REFRESH_TOKEN"));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer buffer = new StringBuffer();
        for (String line = reader.readLine(); line != null; line = reader.readLine())
        {
            buffer.append(line);
        }

        JSONObject json = new JSONObject(buffer.toString());
        return json.getString("access_token");
    }
    catch (IOException e) { e.printStackTrace(); }
    catch (JSONException e) { e.printStackTrace(); }
    return null;
} 
```

# javascript - 如何将 HTML5 页面加载到我的 HTML5 页面中？

> ID：11258352
> 
> 赞同：2
> 
> 时间：2012-06-29T08:18:19.493
> 
> 标签：javascript, ajax, html

我正在用 HTML5 制作一个简单的静态应用程序。

我现在正在做的是我有一个长页面，其中有数千行代码。

我目前这样做是为了转到另一个页面：

```
<div data-role="content">
    <label for="heading">History</label>
    <a href="#module_a" data-role="button" data-icon="arrow-r" data-iconpos="right" data-transition="flip">History</a>
    <a href="module_b" data-role="button" data-icon="arrow-r" data-iconpos="right">Remote Control</a>
</div> 
```

...然后我有 module_a 和 module_b 如下...

```
<div id="module_a" data-role="page">
    //content
</div> 
```

...对于 module_b 也是如此

两个 div 都在同一页面中，所以我的页面看起来很糟糕。

我想要的是我需要相同的功能，但我不希望我的 div 是 module_a 和 module_b 在同一页面中。

我想为此创建不同的页面，然后加载它，以便我的主页看起来清晰。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T08:25:14.283

如果我收集到您正确询问的内容，那么您需要 AJAX。当您单击其中一个链接/按钮时，您需要一个 javascript 代码，该代码将发送请求以获取另一个页面的 HTML 并将其加载到页面上的适当位置。

最好的方法是使用 jQuery。它有一个非常有用的功能`load()`，它可以完全满足您的需求。[http://api.jquery.com/load/](http://api.jquery.com/load/)

它看起来像这样：

```
$('#containerWhereYouWantTheContentToLoad').load('http://url.to/content/you/want/to/load.html'); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:25:18.987

这应该有效：

1.  将每个模块放在它们自己的文件中。
2.  修改模块的链接，使它们链接到模块文件。
3.  `<iframe>`用标签替换原始文件中的模块。
4.  将`onclick`事件处理程序添加到将 的`src`属性设置`<iframe>`为模块文件的 URL 的每个链接（并返回`false`，以便不跟随链接）。

但是，如果您[按照@ThomasClayson 的建议](https://stackoverflow.com/a/11258425/20578)使用 AJAX，那么您就有更多的空间来处理加载的 HTML 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:29:47.983

你试过AJAX吗？

```
 $.ajax({
   url: 'seperate_page.html',
   success: function(data) {
     $('#module_b').html(data);
   }
 }); 
```

根据我对问题的理解，这将解决您的问题..希望对您有所帮助

# gdb - 是否有一个 addr2line 可以分析内存中的代码？

> ID：11258354
> 
> 赞同：2
> 
> 时间：2012-06-29T08:18:23.867
> 
> 标签：gdb, stack-trace, backtrace, addr2line

我`addr2line`用来分析抛出异常后的堆栈跟踪（使用回溯和回溯符号）。目前，从磁盘分析 120Mb 二进制文件（调试版本）大约需要 2 秒。

是否有一个库（LGPL），它通过分析内存中的代码段来完成同样的工作？当然，这限制了我只能分析自己的应用程序——但在我的用例中，这就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:14:28.190

你想要（BSD 许可）[libunwind](http://www.nongnu.org/libunwind/man/libunwind%283%29.html#section_2)：

```
void backtrace(void)
{
    int r;
    unw_cursor_t cursor; unw_context_t uc; 
    unw_word_t ip, sp; 
    char symname[100];

    unw_getcontext(&uc);
    unw_init_local(&cursor, &uc);
    while (unw_step(&cursor) > 0) {
        r = unw_get_reg(&cursor, UNW_REG_IP, &ip);
        assert(r == 0);
        r = unw_get_reg(&cursor, UNW_REG_SP, &sp);
        assert(r == 0);
        r = unw_get_proc_name(&cursor, symname, sizeof(symname), NULL);
        assert(r == 0);
        fprintf(stderr, "%s: ip: %lx, sp: %lx\n", symname, (long) ip, (long) sp);
    }   
} 
```

请注意，`unw_get_proc_name()`如果您从二进制文件中删除符号和字符串表，则会失败（返回非 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:37:04.817

也许您可以使用proc文件系统识别的可执行文件？（或者它实际上是进程内存中的可执行文件？）

```
addr2line -e /proc/32213/exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T10:02:28.523

作为 GCC 发行版的一部分的 Libbacktrace 执行此操作。它处理堆栈展开、ELF 符号和调试符号，即它提供了 libunwind 和 addr2line 的功能。

我在这里放了一个独立的叉子：

[https://github.com/ErwanLegrand/libbacktrace](https://github.com/ErwanLegrand/libbacktrace)

# tridion - 需要有关用于自定义 Tridion Content Delivery 的 API 的详细信息

> ID：11258359
> 
> 赞同：5
> 
> 时间：2012-06-29T08:18:57.647
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我刚到 Tridion 6 个月大。我知道与此工具相关的基本知识。我在某处读到过，我们可以通过使用一些 Java API 对其进行扩展来增强 Content Delivery 的功能。

有人可以指导我从哪里获得这些 Java API。如果您可以为此引用一些示例，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T09:22:12.843

除了官方文档（[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_35CC2F9DCEA34995931E181C165FCC0F](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_35CC2F9DCEA34995931E181C165FCC0F)，需要登录），还有 Mihai Cadaru 关于该主题的一系列优秀文章：[http://www .sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)。

我建议您从那里开始，如果您有更具体的问题，请告诉我们！

# moodle - 如何上传 excel 文件以在 Moodle 中导入“question_bank”？

> ID：11258361
> 
> 赞同：1
> 
> 时间：2012-06-29T08:19:13.063
> 
> 标签：moodle

我将整个问题列表保存在 Microsoft excel 电子表格中。我想将此文件导入 Moodle 中的问题库。

如何上传excel文件导入Moodle中的题库？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:59:34.600

Moodle 不允许 Excel 导入问题，您只能使用以下格式导入问题：

Aiken 格式 Blackboard Blackboard V6+ Embedded answers (Cloze) Examview GIFT 格式 Learnwise 格式 Missing word 格式 Moodle XML 格式 WebCT 格式

使用xml格式导入问题的最佳方法，或者您仍然想使用excel，那么您需要在Moodle中自定义xls格式..

# haskell - Haskell“点黑客”

> ID：11258364
> 
> 赞同：5
> 
> 时间：2012-06-29T08:19:20.403
> 
> 标签：haskell

在[数独解决方案的 Wiki 页面中](http://www.haskell.org/haskellwiki/Sudoku#Chaining_style_Solver)，一种解决方案声称使用“Dot Hack”。链接的 Github 页面不再可用，我在别处找不到任何关于它的信息。

这是关于什么的？它有什么作用？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T08:37:56.417

我猜他指的是以下行：

```
import Prelude hiding ((.)) 
```

这会禁用`(.)`功能组合的正常运算符。相反，使用了另一个具有相同名称的运算符，可能是从实用程序模块导入的`T.T`。此运算符的行为类似于 OOP 语言：

```
pretty_output solution = solution.elems.map(show).in_group_of(9)
    .map(unwords).unlines 
```

（我认为）通常看起来像

```
pretty_output solution = (unlines . map unwords . in_group_of 9 . map show . elems) solution 
```

该运算符的工作方式与[`|>`](http://msdn.microsoft.com/en-us/library/ee340273)F# 中的运算符相同：

```
(|>) :: a -> (a -> b) -> b
x |> f = f x 
```

它用于通过函数*传递*值（并且更具可读性和更好的功能风格，imo）：

```
pretty_output solution = solution |> elems |> map show |> in_group_of 9 |> map unwords |> unlines 
```

`(|>)`也一样`flip ($)`。

编辑：不知何故，这个“被黑”的运算符已经存在于 Haskell 中。从左到右的合成运算符可以实现相同的合成行为[`Control.Category`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Category.html#v%3a-62--62--62-)：

```
g x = x |> (f1 >>> f2 >>> f3) 
```

但是，此管道仅起作用，实际上只是`f >>> g = g . f`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T08:33:36.463

它使用 OOP 风格

```
thing.method 
```

调用函数`thing`而不是通常的函数

```
method thing 
```

参见例如

```
row i = i `div` 9
col i = i `mod` 9
row_list i positions = positions.select(on_i_row) where
  on_i_row pos = pos.row  == i.row
col_list i positions = positions.select(on_i_col) where
  on_i_col pos = pos.col == i.col 
```

在那个节目中。

# mercurial - javaHG 与 hg.exe 未设置为环境变量

> ID：11258365
> 
> 赞同：1
> 
> 时间：2012-06-29T08:19:22.067
> 
> 标签：mercurial, portable-executable, javahg

我在我们公司的网络应用程序上使用 javaHg。

当我在我们的服务器上设置新版本时，我想避免安装 mercurial。我是否需要详细说明为什么管理层不希望在服务器上安装“外部”应用程序？

我在子目录中有一个 windows 便携式 mercurial。是否可以将 javaHg“指向”该 hg.exe，而不是将目录路径设置为环境变量？使用新版本时不得进行任何调整和设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:44:50.603

是的，您不需要为此进行设置`PATH`。您应该使用一个[RepositoryConfiguration](http://javahg.aragost.com/apidocs/com/aragost/javahg/RepositoryConfiguration.html)类，请参阅`setHgBin`方法。您在创建对象时将配置对象传递给`Repository`对象，然后它将使用配置的 Mercurial 二进制文件来启动命令服务器。

# android - 在android中处理JSON

> ID：11258367
> 
> 赞同：0
> 
> 时间：2012-06-29T08:19:47.193
> 
> 标签：android

嗨，我是 JSON 新手，我想检索下面的 json 值

```
{"error":"0","uid":"160","langId":"2","rank":"1"} 
```

我写了一个 JSONParser 类，但主要的活动类让我卡住了。下面是代码

```
private static final String LOGTAG = "MyActivity";
    private static String JSONurl = "http://www.afroklore.org/mobile/boot.php?actn=post_prov&lang=1&uid=2&prov=";
    private static final String ERROR = "error";
    private static final String UID = "uid";
    private static final String LANGID = "langId";
    private static final String RANK = "rank";
    JSONArray output = null;
    String id, error, langId, rank;

if (MenuActivity.status == 2) {
            JSONParser jParser = new JSONParser();
            JSONObject json = jParser.getJSONFromUrl(JSONurl);

            try {
                output = json.getJSONArray(ERROR);

                for (int i = 0; i < output.length(); i++) {
                    JSONObject c = output.getJSONObject(i);

                    // Storing each json item in variable
                    id = c.getString(UID);
                    error = c.getString(ERROR);
                    langId = c.getString(LANGID);
                    rank = c.getString(RANK);
                    // creating new HashMap
                    /*
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(ERROR, error);
                    map.put(UID, id);
                    map.put(LANGID, langId);
                    map.put(RANK, rank);

                    // adding HashList to ArrayList
                    outputField.add(map);*/
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
        return result;

protected void onPostExecute(String r) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            String msg = "Login successful";

            if (MenuActivity.status == 2) {
                Log.d(LOGTAG, result);
                // Log.d(LOGTAG, outputField.get(ERROR));
                Log.d(LOGTAG, error + " " + id + " " + langId + " " + rank); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:30:51.637

[在此处](http://jsonviewer.stack.hu/)检查您的 json webservice respose 。它仅包含一个 json 对象作为您提供的字符串

```
{"error":"0","uid":"160","langId":"2","rank":"1"} 
```

所以将其解析为

```
JSONObject json = jParser.getJSONFromUrl(JSONurl);
     try {
         // Storing each json item in variable
         id = json.getString(UID);
         error = json.getString(ERROR);
         langId = json.getString(LANGID);
         rank = json.getString(RANK);
           //..your code here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:15:39.223

您可以使用[GSON](http://code.google.com/p/google-gson/)解析 JSON 字符串

在您的情况下，创建一个代表 JSON 参数的类，如下所示

```
public class Header {
///{"error":"0","uid":"160","langId":"2","rank":"1"}

    private String error;
    private String uid;
    private String langId;
    private String rank;
    /**
     * Gets the error.
     * 
     * @return <tt> the error.</tt>
     */
    public String getError() {
        return error;
    }
    /**
     * Sets the error.
     *
     * @param error <tt> the error to set.</tt>
     */
    public void setError(String error) {
        this.error = error;
    }
    /**
     * Gets the uid.
     * 
     * @return <tt> the uid.</tt>
     */
    public String getUid() {
        return uid;
    }
    /**
     * Sets the uid.
     *
     * @param uid <tt> the uid to set.</tt>
     */
    public void setUid(String uid) {
        this.uid = uid;
    }
    /**
     * Gets the langId.
     * 
     * @return <tt> the langId.</tt>
     */
    public String getLangId() {
        return langId;
    }
    /**
     * Sets the langId.
     *
     * @param langId <tt> the langId to set.</tt>
     */
    public void setLangId(String langId) {
        this.langId = langId;
    }
    /**
     * Gets the rank.
     * 
     * @return <tt> the rank.</tt>
     */
    public String getRank() {
        return rank;
    }
    /**
     * Sets the rank.
     *
     * @param rank <tt> the rank to set.</tt>
     */
    public void setRank(String rank) {
        this.rank = rank;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Header [error=" + error + ", uid=" + uid + ", langId=" + langId
                + ", rank=" + rank + "]";
    }

} 
```

现在只用两行解析所需的 JSON 字符串

```
String jSonData = "{\"error\":\"0\",\"uid\":\"160\",\"langId\":\"2\",\"rank\":\"1\"}";
Header header = new Gson().fromJson(jSonData, Header.class);
System.out.println("Header : "+header); 
```

您需要 gson jar 二进制文件才能运行此代码。

*   下载[GSON JAR](http://google-gson.googlecode.com/files/google-gson-2.2.1-release.zip)
*   在项目文件夹中创建一个名为“libs”的资源文件夹
*   将 gson jar 复制到此文件夹并添加到构建路径
*   现在你可以走了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:38:45.377

`{ , }`是代表`JSONobject`和`[ ,]`是代表`JSONArray`

```
{"error":"0","uid":"160","langId":"2","rank":"1"} 
```

您不能将 for 循环用于`JSONobject`，它用于`JSONArray`.

你可以检查这个[链接](https://stackoverflow.com/a/10594036/1263679)，

这里的问题是不同的，但在该解决方案中使用 JSON。

如需更多了解，请查看此[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。我希望它对你有帮助。

# android - android会自动更新应用程序的名称和图标吗？

> ID：11258369
> 
> 赞同：0
> 
> 时间：2012-06-29T08:19:53.170
> 
> 标签：android, android-layout

我在 Market Place 有一个 android 应用程序。而且，当我下载它时，它会以名称“XYZ”和 Image1 作为图标显示。

现在，当我更新应用程序并在代码中将新名称和新图像设置为图标时：现在我从市场下载应用程序并安装在旧应用程序所在的同一设备中。

那么它会自动更新现有应用程序的名称和图标吗？如果不是，我们需要采取什么措施来更新已经存在的应用程序的名称和图像并且不重新安装整个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:26:38.243

据我所知，到目前为止，所有更新都会以某种方式“重新安装”该应用程序。因此，您将新的 apk 上传到开发者控制台（版本号增加），市场将为所有用户提供“更新”。

现在，更新只是重新安装您的应用程序，因为 Google 无法判断您的代码的哪一部分已更改...

所以，应用程序的名称和图标会改变，但你的应用程序也将被重新安装（请纠正我，如果我错了......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:26:10.630

当您更新名称和应用程序图标等信息时，您可能需要一天时间才能在 Play 商店中看到任何更新。但是在您的设备上，如果您的主屏幕上有您的应用程序图标，只需将其删除并替换为应用程序列表中的图标即可

# c# - URL 重写无法使用 Global.asax

> ID：11258371
> 
> 赞同：4
> 
> 时间：2012-06-29T08:20:10.973
> 
> 标签：c#, asp.net, url-rewriting, dotnetnuke, global-asax

我正在尝试从 Global.ascx 文件进行 URL 重写，但每次它重定向到 Default.aspx 页面并忽略选项卡 ID，就像我在 DotNetNuke 版本中所做的那样。03 年 1 月 6 日 (108)。这是代码：

```
if (CurrentURL_Path.Contains("scientific-cameras"))
{
    HttpContext.Current.RewritePath("~/Default.aspx?TabId=105");
} 
```

我创建了一个页面 abc.aspx

我希望如果 url 中包含“scientific-cameras”，那么它会重定向到页面（abc.aspx），并且 105 是 abc.aspx 的 TabId。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:55:55.317

在 ASP.NET 4.0 中使用路由表 URL 路由 [http://www.codeproject.com/Articles/77199/URL-Routing-with-ASP-NET-4-0](http://www.codeproject.com/Articles/77199/URL-Routing-with-ASP-NET-4-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:09:53.507

这很可能是与 DNN 的冲突。DNN 中已经有一个友好的 URL 结构。我建议使用这个而不是自己做，因为你不希望厨房里有太多厨师。

您可以在“主机”->“主机设置”->“友好 URL 设置”中指定自定义 URL。

# axapta - 如何在 Axapta 中的两个表单之间传递参数？

> ID：11258375
> 
> 赞同：8
> 
> 时间：2012-06-29T08:20:29.413
> 
> 标签：axapta, dynamics-ax-2009

如何在 axapta 的表单之间传递单个参数？我想从表单 A 中的单击按钮事件运行表单 B 并传递...例如客户 ID？我怎样才能在目标表单中读取它，也许在*init*方法中？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T11:12:32.880

# 1 方法

最简单的方法是通过当前记录。如果 CustTable 位于当前 Form 数据源中，只需将 Example 的按钮控件的 DataSource 值更改为 CustTable。然后在目标形式的 init 方法中：

```
public void init()
{
    CustTable cTable;
    ;
    super();

    // Check for passed arguments
    if( element.args() )
    {
        // get record parameter
        if( element.args().record() && element.args().record().TableId == TableNum( CustTable ) )
        {
            cTable =  element.args().record();            
        }
    }
} 
```

# 2 方法

如果您仍然需要传递一个值 .parm() （或更复杂的对象 .parmObject() ），您可以通过覆盖源表单的按钮控件单击方法来做到这一点：

```
void clicked()
{
    // Args class is usually used in Axapta for passing parameters between forms
    Args            args;
    FormRun         formRun;
    ;

    args = new args();

    // Our values which we want to pass to FormB
    // If we want pass just simple string we can use 'parm' method of 'Args' class
    args.parm( "anyStringValue" );

    // Run FormB
    args.name( formstr( FormB ) );
    formRun = classFactory.formRunClass( Args );
    formRun.init();
    formrun.run();
    formrun.wait();

    super();
} 
```

然后在目标表单init中：

```
public void init()
{
    str             anyStringValueFromCaller;
    ;
    super();

    // Check for passed arguments
    if( element.args() )
    {
        // get string parameter
        anyStringValueFromCaller = element.args().parm();

    }
} 
```

我绝对应该只使用第一种方法，并且只有在特殊情况下才会使用带有覆盖按钮单击方法的#2 方法，因为这是在表单之间传递值的默认模式之一。[AxaptaPedia.com](http://www.axaptapedia.com/Passing_values_between_forms)上提供了更复杂的示例 在表单之间传递值

# jquery - 如何通过 rel 属性打开模态对话框

> ID：11258378
> 
> 赞同：1
> 
> 时间：2012-06-29T08:20:45.710
> 
> 标签：jquery

我是 jscript 和 jquery 的新手。我正在创建一个网站，该网站需要在单击超链接时打开模式对话框。

在示例代码（来自网站）中，我看到它使用的是这样的：

```
<a id="SendToFriend" class="button send" href="#modalTellAFriend" rel="modal" data-closetext="Close">

content=jQuery(div#modalTellAFriend)closetext="Fermer"
<span>Send</span>
</a> 
```

所以，基本上，我可以添加这样的：

```
<div id="first modal">
</div>

<div id="second modal">
</div> 
```

现在，简单的 qn，我如何编写 jQuery 函数来实现这一点？我也想对模态屏幕使用 validate 和 form

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:51:25.257

您可以使用 jQuery UI 库来创建模态对话框[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

可以像这样为不同的 rel 属性打开不同的对话框：

```
$('a[rel="modal_1"]').click(function(){
  $( "#first_modal" ).dialog({
    closeText : 'Fermer',
    modal: true
  });
});

$('a[rel="modal_2"]').click(function(){
  $( "#second_modal" ).dialog({
    closeText : 'Fermer',
    modal: true
  });
}); 
```

# oracle - Oracle / 和 sys 有什么区别？

> ID：11258382
> 
> 赞同：3
> 
> 时间：2012-06-29T08:20:59.377
> 
> 标签：oracle

```
sqlplus / as sysdba
sqlplus sys as sysdba 
```

/和sys之间有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:41:12.300

现在`/ AS SYSDBA`和没有区别`SYS AS SYSDBA`。

[Tom Kyte在](http://asktom.oracle.com)[此线程](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:61866277480450)中具体规定了这一点。

基本上，他解释说 SYSDBA 后缀有效地将您连接到数据库，无论您提供什么凭据，他使用的示例是：

> 将圣诞老人/克劳斯连接为 sysdba
> 
> 如同
> 
> 连接 / 作为 sysdba

将圣诞老人/克劳斯连接为 sysdba

```
sys%ORA10GR2> connect santa/claus as sysdba
Connected.
sys%ORA10GR2> show user
USER is "SYS" 
```

希望能帮助到你...

PS 这在 8i 和更早版本中并非如此，但希望您使用的是本世纪以来的数据库和 SQL*Plus。:-)

# php - 更改 URL 中的语言变量

> ID：11258384
> 
> 赞同：0
> 
> 时间：2012-06-29T08:21:04.017
> 
> 标签：php, url, locale

> **可能重复：**
> [替换 URI 查询字符串中的值](https://stackoverflow.com/questions/3777481/replace-values-in-a-uri-query-string)

我在导航栏中使用语言切换器在 EN 和 DE 之间切换，我的 url 结构是这样的：

```
http://www.mydomain.com/gallery.php?lang=de
http://www.mydomain.com/gallery-item.php?id=100&lang=de 
```

该开关适用于所有没有 id 的 url，但不适用于 id。

```
<?php
$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF'];
<a href='.$url.'?lang=en">
<a href='.$url.'?lang=de">
?> 
```

检查 $lang=xx 或 ?lang=xx 然后分别添加 ?lang=xx 或 $lang=xx 的好解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:26:12.557

```
$params = $_GET;

$params['lang'] = 'en';
printf('<a href="%s?%s">En</a>', $url, http_build_query($params));

$params['lang'] = 'de';
printf('<a href="%s?%s">De</a>', $url, http_build_query($params)); 
```

甚至非常紧凑：

```
printf('<a href="%s?%s">De</a>',
       $url, http_build_query(array('lang' => 'de') + $_GET)); 
```

[http://php.net/http_build_query](http://php.net/http_build_query)

# ruby-on-rails - Rails 创建你自己的密码重置

> ID：11258392
> 
> 赞同：0
> 
> 时间：2012-06-29T08:21:38.937
> 
> 标签：ruby-on-rails

我试图了解为带有用户的 Rails 应用程序创建密码重置功能的机制，并且想知道是否有人可以引导我了解其他一些身份验证系统使用的样板逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:44:26.807

有一个关于此的 Railscast：[记住我并重置密码](http://railscasts.com/episodes/274-remember-me-reset-password)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:51:50.850

我发现的流程效果很好：

用户单击“重置密码”链接，该链接转到 controller_action 'reset' link_to 'reset', reset_path

```
def reset
  @user = ...
  @user.temporary_password = SecureRandom(5)
  @user.password = @user.temporary_password   
  redirect_to ...
end 
```

我通过电子邮件发送@user.temporary_password。在视图逻辑中，通知用户他们需要重置密码，因为 @user.temporary_password 存在。一旦他们更改了密码，我就更改了@user.temporary_password=nil。完毕！

# c++ - 如何以编程方式更改 RDP 登录名/密码？

> ID：11258394
> 
> 赞同：0
> 
> 时间：2012-06-29T08:21:47.433
> 
> 标签：c++, windows, rdp

我正在创建一个允许不同用户通过 RDP 连接到 PC 的 Windows 服务。

我需要知道如何通过某种 WinAPI 或修改 regkeys 或类似方法在 PC 上添加、更改和删除登录凭据（即登录 + 通行证）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:02:02.787

您可以使用创建本地帐户[`NetUserAdd`](http://msdn.microsoft.com/en-us/library/aa370649%28v=vs.85%29)。您可能不应该以这种方式删除帐户，因为这会孤立用户配置文件，但您可以使用[`NetUserGetInfo`](http://msdn.microsoft.com/en-us/library/aa370654%28v=vs.85%29)and [`NetUserSetInfo`](http://msdn.microsoft.com/en-us/library/aa370659%28v=vs.85%29)（选项 1008）在必要时禁用和重新启用。 [`NetUserSetInfo`](http://msdn.microsoft.com/en-us/library/aa370659%28v=vs.85%29)（选项 1003）可用于在必要时重置密码，但请注意，重置密码会导致所有加密文件和设置不可撤销地丢失。如果您知道旧密码，则可以[`NetUserChangePassword`](http://msdn.microsoft.com/en-us/library/aa370650%28v=vs.85%29)改用。

使用[`NetGroupAddUser`](http://msdn.microsoft.com/en-us/library/aa370425%28v=vs.85%29)和[`NetGroupDelUser`](http://msdn.microsoft.com/en-us/library/aa370427%28v=vs.85%29)从远程桌面用户组添加和删除帐户，以控制 RDP 访问。

请记住，您创建的帐户也可用于交互式登录（除非您通过操作用户权限策略明确阻止此操作）并且您（可能）需要注意避免修改现有帐户。

# android - 手指向下时做一些动作

> ID：11258397
> 
> 赞同：1
> 
> 时间：2012-06-29T08:22:15.707
> 
> 标签：android, touch

我已经问过这个问题，但当时我认为 onTouch 事件之间的刷新时间是我的问题[Android onTouch refresh rate](https://stackoverflow.com/questions/10979304/android-ontouch-refresh-rate)。但事实并非如此。所以我的问题又来了：当我的手指触摸显示屏时，我需要一个精灵向左/向右/向上移动。所以我的 onTouchEvent 返回 true。但这只有在我的手指滑动一点或者触摸屏驱动程序太糟糕以至于它会抖动太多被检测为手指运动的情况下才有效。我用 Threads 提出了一个解决方案。所以我启动了一个正在移动播放器的线程，当手指抬起时它被中断。但也许有更好的方法来做到这一点？

```
@Override
public boolean onTouchEvent(MotionEvent me) {
    ...
if (me.getY() < getHeight() / 2) {
    return doAction(0);
} else if (me.getX() >= getWidth() / 2)
    return doAction(2);
else if (me.getX() < getWidth() / 2)
    return doAction(1);
//doAction returns TRUE
... 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:57:09.333

```
 final Button b=(Button)findViewById(R.id.button1);

    b.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
              switch (event.getAction()) {
                case MotionEvent.ACTION_UP:
                    b.setBackgroundResource(R.drawable.ic_launcher);    
                    finish();
                    return true;
                         case MotionEvent.ACTION_DOWN: 
                 //work u want to do etc ..use all the events like this 
}

        b.setBackgroundResource(R.drawable.ic_back);    
        return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:06:00.180

好的，我用线程管理它。这是doAction的一部分。

```
if (event == MotionEvent.ACTION_DOWN) {
            movePlayer = new Thread() {
                public void run() {
                    while (!this.isInterrupted()) {
                        if (main.player.x > 5
                                && now.getLevel()[playerXsc][playerYsc] == Level.FLAG_SKY
                                && now.getLevel()[playerXsc][playerY2sc] == Level.FLAG_SKY) {
                            main.player.x -= 4;
                        } else if (main.player.x <= 5 && now instanceof L9)
                            main.player.x = aspectX * 19;
                        try {
                            Thread.sleep(5);
                        } catch (InterruptedException e) { break; }
                    }
                }
            };
            movePlayer.start();
        } else if (event == MotionEvent.ACTION_UP) {
            Log.e("ui", "mpt interrupt");
            movePlayer.interrupt();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:40:38.957

如果您的 doAction 方法不平凡，那么这将导致延迟，因为未来的触摸事件将“缓冲”等待来自此 onTouchEvent 处理程序的响应。另外，你在使用

```
runOnUiThread(new Runnable() {
    public void run() { 
       // Changes to UI here...
    }
}); 
```

更多信息：[Activity.runOnUIThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:39:56.097

```
WebView1 = (WebView) findViewById(R.id.StudyWebview);   
detector = new GestureDetector(this, this); 
WebView1.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            detector.onTouchEvent(event);
            return true;
        }
    }); 
```

请实现 OnGestureListener 并使用它的回调方法

```
@Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float arg3) {
    float dX = e2.getX() - e1.getX();
    float dY = e1.getY() - e2.getY();
    // check is all completed or return with some condition
    if (Math.abs(dY) < SWIPE_MAX_OFF_PATH && Math.abs(velocityX) >= SWIPE_THRESHOLD_VELOCITY && Math.abs(dX) >= SWIPE_MIN_DISTANCE) {
        // logic for left and right
        if (dX < 0) {

        }

        else if (dX > 0) {

        }
    }

    return true;
}

@Override
public void onLongPress(MotionEvent arg0) {

}

@Override
public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2, float arg3) {

    return false;
}

@Override
public void onShowPress(MotionEvent e) {

}

@Override
public boolean onSingleTapUp(MotionEvent e) {

    return false;
} 
```

# javascript - jQueryMobile 元素的 MVC3 标头 JavaScript 代码错误

> ID：11258400
> 
> 赞同：0
> 
> 时间：2012-06-29T08:22:43.687
> 
> 标签：javascript, asp.net-mvc-3

任何人都可以解决这个问题吗。我从 ids 和百分比的操作中获取两个数组我尝试了所有编码但没有成功但输出不正确

javascript代码

```
 @section javascript{
    <script type="text/javascript"> 
    $(document).ready(function() { 
        var percents = @Html.Raw(Json.Encode(ViewBag.percentage)); 
        var ids = @Html.Raw(Json.Encode(ViewBag.IDs)); 

        var date = new Date(); 
        var day = date.getDay(); 
        var dayper = (day / 30) * 100; 

        $.each(ids, function(index, id) { 
          var percent = parseInt(percents[index], 10); 
          var element = $('#' + id); 
          element.css('width', percent + '%'); 
          var rA = 100 - percent; 
          var color = 'green'; 

          if (rA - dayper > 40) { 
            color = 'red'; 
          } else if (rA - dayper > 20 && rA - dayper < 40) { 
            color = 'yellow'; 
          } 

          element.css('background-color', color); 
        }); 
    }); 
    </script> 

} 
```

和用于实现类 ui-bar div 的 jquerymobile 代码

……………………………………………………………………………………………………………………

```
<div class="ui-bar-e" id="bdgt_@(item.budgetId)" >
 @Model.currency[l]@item.spentAmount/@Model.currency[l]@item.amount 
</div> 
```

………………………………………………………………………………………………………………………………………………………………………………………………………… .....................

这里有什么错误

**从评论编辑**

在行动：

```
string[] IDs = new string[bEList.Count]; 
int i = 0; 
foreach(var item in bEList) { 
   IDs[i] = "bdgt_" + item.budgetId; 
   i++; 
} 
ViewBag.IDs = IDs; 
```

# localization - 网站本地化的最佳实践（业务最优）是什么？

> ID：11258403
> 
> 赞同：0
> 
> 时间：2012-06-29T08:22:53.243
> 
> 标签：localization

对于像市场或类似网站这样的网站，如果大部分内容使用一种语言，但一些用户生成的内容使用其他语言，那么本地化的最佳方法是什么？

有很多方法可以解决这个问题，我对此感到困惑，我对最具成本效益的业务优化方法感兴趣。

一些典型的做法；

*   一种语言的网站，接受多种语言的内容
*   一种语言的网站，只接受一种语言的内容（拒绝其他内容）
*   使用一种语言的网站，如果内容不是主要语言，则通过翻译成主要语言以相同的语言提供内容
*   多语言网站，针对网站的每个本地化版本按原样输出内容，即针对网站的每个语言版本复制内容
*   多语言网站，内容与内容语言属于同一语言版本的网站。也就是说，英文版网站的英文内容，网站德文版的德文内容等等。

*   tld vs 子域 vs 本地化目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:38:55.217

正如其他人所评论的那样，这并不是一个真正的技术问题，因此可能不是最适合这里的。

但是，我要说的是，如果您提供的服务有来自不同国家和不同语言的客户/用户，仅基本礼貌就要求您提供一个可以适应客户语言的网站。

用户以他们自己的语言提供的内容至少应该有一个自动翻译链接（例如谷歌翻译）。

如果你不做这两件事，你就会锁定你可能的观众的一部分。

您还需要考虑立法。如果您在某些国家/地区提供服务，则要求您提供多种基本语言。

# firefox - 在 Firefox 中播放 mp3 文件

> ID：11258406
> 
> 赞同：0
> 
> 时间：2012-06-29T08:22:55.200
> 
> 标签：firefox, mp3, jplayer

谁能推荐我可以在 Firefox 浏览器中播放 MP3 文件的网络播放器？我试过 jPlayer，但它需要 ogg 文件。我尝试使用 FFMPEG 将 MP3 转换为 OGA，但是，即使生成的文件也没有在 JPlayer 中播放。是否有任何替代播放器可以在 Firefox 中播放 MP3 文件。我不想使用 Flash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:26:00.793

> ..替代播放器，可以在 Firefox 中播放 MP3 文件。

结合这3个答案。

*   [Java Sound](https://stackoverflow.com/tags/javasound/info)用于播放音频的能力。
*   JMF的MP3插件SPI，提供对Java Sound默认不支持的MP3的支持。
*   Applet - 将该功能嵌入网页中。

## 笔记

我很确定有一些简单的方法可以在不需要 Java 或需要使用率更高的插件（如 Flash）的网页中嵌入声音。如果您不想做一些定制的事情，我建议您研究替代方案。

# dynamics-crm-4 - Dynamics CRM 4 异步服务作业等待和 HTTP 错误 401.2

> ID：11258412
> 
> 赞同：1
> 
> 时间：2012-06-29T08:23:47.120
> 
> 标签：dynamics-crm-4

我们遇到了 Dynamics CRM 4.0 的问题。

环境：

*   Dynamics CRM Enterprise 4.0 更新汇总 20
*   视窗 2008 R2、SQL 2008 R2
*   不同虚拟机上的平台和数据库服务器
*   本地部署

我们使用的是进口组织，网站、Outlook 连接器和报告都可以正常工作。

我们遇到的问题是所有工作流和系统作业都停留在等待状态。查看组织数据库，我们看到如下消息：

```
Select Message from AsyncOperationBase where AsyncOperationId = 'SOMETHING'; 
```

我们看到一条消息，表明 CrmService 返回了 401 Unauthorized。

使用浏览器，我们可以浏览到：

```
http://crmserver/orgname/mscrmservices/2007/CrmService.asmx 
```

并且服务正确返回，但是，当我们浏览到

```
http://crmserver/mscrmservices/2007/CrmService.asmx 
```

我们收到 401.2 错误。

此外，我们可以通过它们的正常路径（没有组织名称）访问其他服务，例如发现服务。只有 CrmService.asmx 会显示问题。

CrmAsync 和 AppPool 都在 Network Service 下运行，这个问题只影响工作流。

我们已尝试取消发布/重新发布所有工作流程，但无济于事。我们已运行 IFD 工具以确保正确设置服务器名称。我们已卸载/重新安装。

现在我们被困住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:07:06.397

事实证明，该问题与在与 Dynamics CRM 服务相同的 Web 应用程序上托管 WSUS 有关。

通过将 Dynamics CRM 重新安装到其自己的 Web 应用程序来解决此问题。

# java - 将 Android ProgressDialog 与 AsyncTask 和奇怪的 Activity 生命周期一起使用

> ID：11258413
> 
> 赞同：1
> 
> 时间：2012-06-29T08:24:14.913
> 
> 标签：java, android, multithreading, android-asynctask, progressdialog

我想不出一种方法来形成我的标题以使我的问题显而易见，所以这里是：

我第一次进入 AsyncTask 有点过头了。我目前有一个简单地发送推文的应用程序。要做到这一点，它必须踢出一个 WebView 来获得 Twitter 授权，这又回到了 onNewIntent()。

我要做的是在连接到站点/执行 AccessToken 工作时抛出一个简单的 Spinner ProgressDialog，然后在它发送推文时再次抛出。我刚刚发现进度条需要一个新线程。或者更确切地说，我应该在它自己的单独线程中做我的“时间密集型工作”，以使使用 ProgressDialog 可行。我的问题是：当我的授权代码在后台工作时，如何让我的进度微调器在前台，并最终打开 WebView 并返回，并最终在 onResume() 处重新开始一切？

我确定我可能没有以最适当的方式做其他所有事情。我是 Android 新手，但不是 Java 新手。我已经在程序上进行了关于它们应该在哪里的 create- 和 dismissDialog(int) 调用。照原样，一切都按照它应该的方式工作，但显然我的对话框根本无法显示自己。

我在想我应该基本上把我的整个 authorize() 和 tweet() 方法放到他们自己的 AsyncTask 中。我只是不知道该怎么做，特别是因为 authorize()（或更具体地说，loginToTwitter()）需要在返回到 onNewIntent() 后最终将从浏览器获取的数据保存到共享首选项中。

感谢您的任何见解，== 马特

```
public class IntegrateTwitter extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        super.onResume();

        mPrefs = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        mTwitter = new TwitterFactory().getInstance(); 
        mTwitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

        if(authorize()) {
            tweet();
            returnToMM();
        }
    }

    private boolean authorize() {
        Log.i(LOG_TAG, "Authorizing...");   
        showDialog(PD_AUTHORIZING);
        boolean result = false;

        if(responseExistsAndValid()) {
            saveResponseToAccessToken();
        }

        if(isAuthorized()) {
            Log.i(LOG_TAG, "Prefs have AccessToken, grabbing it...");
            if(getAccessTokenFromPrefs()) {
                Toast.makeText(IntegrateTwitter.this, "Authorized.", Toast.LENGTH_SHORT).show();
                result = true;
            }
        }
        else {
            Log.i(LOG_TAG, "Prefs don't have AccessToken.");

            if(!responseStringExists()) {
                Log.i(LOG_TAG, "No response exists either, starting Twitter login process...");
                Toast.makeText(IntegrateTwitter.this, "Authorizing...", Toast.LENGTH_SHORT).show();
                // Here is where it kicks out to the browser for authentication
                loginToTwitter();
            }
            else {
                Toast.makeText(IntegrateTwitter.this, "Authorization failed.", Toast.LENGTH_SHORT).show();
                Log.i(LOG_TAG, "Response exists, so it must have failed once already, skipping Twitter login process.");
                returnToMM();
            }
        }

        deleteResponseFromPrefs();

        dismissDialog(PD_AUTHORIZING);
        return result;
    }

    private void tweet() {
        showDialog(PD_TWEETING);

        try {
            Date testDate = new Date();
            String testDateString  = DateFormat.format("yyyy-MM-dd @ hh:mm:ss", testDate.getTime()).toString();
            mTwitter.updateStatus(testDateString + " Test Tweet");
            Toast.makeText(this, "Tweet successful!", Toast.LENGTH_SHORT).show();
        }
        catch (TwitterException e) {
            Toast.makeText(this, "Tweet error.", Toast.LENGTH_SHORT).show();
            Log.i(LOG_TAG, e.getMessage());
            Log.i(LOG_TAG, Arrays.toString(e.getStackTrace()));
        }

        dismissDialog(PD_TWEETING);
    }

    // A bunch of support methods
    // ...  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:09:25.827

Try this.....

I think you know that if we are **not using AsyncTask**, we can always use **Thread along with Handler, to Post the work done on Non-UI thread to UI thread**.

**AsyncTask** is provided by android to **sync** the UI and Non-UI work seamlessly.

I got this example by searching on Google, **but changed it the way you wanted it to be.**

**Here it will Count till 50... and until it does it will keep displaying the ProgressDialog. Please see the log while the program is executing to see the count increasing till 50.**

```
public class AsyncTaskExampleActivity extends Activity 
{
        protected TextView _percentField;
        protected Button _cancelButton;
        protected InitTask _initTask;
        ProgressDialog pd;

    @Override
    public void onCreate( Bundle savedInstanceState ) 
    {
        super.onCreate(savedInstanceState);

        setContentView( R.layout.main );

        _percentField = ( TextView ) findViewById( R.id.percent_field );
        _cancelButton = ( Button ) findViewById( R.id.cancel_button );
        _cancelButton.setOnClickListener( new CancelButtonListener() );

        _initTask = new InitTask();

         pd = ProgressDialog.show(AsyncTaskExampleActivity.this, "Loading", "Please Wait");

        _initTask.execute( this );
    }

    protected class CancelButtonListener implements View.OnClickListener 
    {
                public void onClick(View v) {
                        _initTask.cancel(true);
                }
    }

    /**
     * sub-class of AsyncTask
     */
    protected class InitTask extends AsyncTask<Context, Integer, String>
    {
        // -- run intensive processes here
        // -- notice that the datatype of the first param in the class definition matches the param passed to this method 
        // -- and that the datatype of the last param in the class definition matches the return type of this method
                @Override
                protected String doInBackground( Context... params ) 
                {
                        //-- on every iteration
                        //-- runs a while loop that causes the thread to sleep for 50 milliseconds 
                        //-- publishes the progress - calls the onProgressUpdate handler defined below
                        //-- and increments the counter variable i by one
                        int i = 0;
                        while( i <= 50 ) 
                        {
                                try{
                                        Thread.sleep( 50 );
                                        publishProgress( i );
                                        i++;
                                } catch( Exception e ){
                                        Log.i("makemachine", e.getMessage() );
                                }
                        }
                        pd.dismiss(); 
                        return "COMPLETE!";
                }

                // -- gets called just before thread begins
                @Override
                protected void onPreExecute() 
                {
                        Log.i( "makemachine", "onPreExecute()" );

                        super.onPreExecute();

                }

                // -- called from the publish progress 
                // -- notice that the datatype of the second param gets passed to this method
                @Override
                protected void onProgressUpdate(Integer... values) 
                {
                        super.onProgressUpdate(values);
                        Log.i( "makemachine", "onProgressUpdate(): " +  String.valueOf( values[0] ) );
                        _percentField.setText( ( values[0] * 2 ) + "%");
                        _percentField.setTextSize( values[0] );
                }

                // -- called if the cancel button is pressed
                @Override
                protected void onCancelled()
                {
                        super.onCancelled();
                        Log.i( "makemachine", "onCancelled()" );
                        _percentField.setText( "Cancelled!" );
                        _percentField.setTextColor( 0xFFFF0000 );
                }

                // -- called as soon as doInBackground method completes
                // -- notice that the third param gets passed to this method
                @Override
                protected void onPostExecute( String result ) 
                {

                        super.onPostExecute(result);
                        Log.i( "makemachine", "onPostExecute(): " + result );
                        _percentField.setText( result );
                        _percentField.setTextColor( 0xFF69adea );
                        _cancelButton.setVisibility( View.INVISIBLE );
                }
    }    
} 
```

# wordpress - 使用元框自定义帖子类型图像上传

> ID：11258414
> 
> 赞同：0
> 
> 时间：2012-06-29T08:24:19.543
> 
> 标签：wordpress, custom-post-type

我在自定义帖子类型中找不到我的附加图片。functions.php 中的代码

```
$prefix = 'custom_';
$custom_meta_fields = array(

    array(
        //'label'   => 'Textarea',
        'desc'  => 'A description for the field.',
        'id'    => $prefix.'textarea',
        'type'  => 'textarea'
    )
);

// Default metabox for custom post types.
function avz_custom_meta_box() {

   // $post_types = get_post_types( array( 'public' => true ) );
   $post_types = get_post_types();
    foreach ( $post_types as $post_type ) {
        if ( $post_type == 'page' || $post_type =='post' )
            continue;
        add_meta_box(
        $prefix.'image', 
        'Header Image Upload Box', 
        'show_avz_custom_meta_box', 
        $post_type, 
        'normal', 
        'high' );
    }

}
add_action('add_meta_boxes', 'avz_custom_meta_box');

function show_avz_custom_meta_box() {
    global $avz_custom_meta_box_fields, $post;
    // Use nonce for verification
    echo '<input type="hidden" name="avz_custom_meta_box_fields_nonce" value="'.wp_create_nonce(basename(__FILE__)).'" />';

    // Begin the field table and loop
    echo '<table class="form-table">';
    foreach ($avz_custom_meta_box_fields as $field) {
        // get value of this field if it exists for this post
        $meta = get_post_meta($post->ID, $field['id'], true);
        // begin a table row with
        echo '<tr>
                <td>';
                switch($field['type']) {
                    case 'image':
                        $image = get_template_directory_uri().'/images/image.png';  
                        echo '<span class="custom_default_image" style="display:none">'.$image.'</span>';
                        if ($meta) { $image = wp_get_attachment_image_src($meta, 'medium'); $image = $image[0]; }               
                        echo    '<input name="'.$field['id'].'" type="hidden" class="custom_upload_image" value="'.$meta.'" />
                                    <img src="'.$image.'" class="custom_preview_image" alt="" /><br />
                                        <input class="custom_upload_image_button button" type="button" value="Choose Image" />
                                        <small>&nbsp;<a href="#" class="custom_clear_image_button">Remove Image</a></small>
                                        <br clear="all" /><span class="description">'.$field['desc'].'</span>';
                    break;

                } //end switch
        echo '</td></tr>';
    } // end foreach
    echo '</table>'; // end table
}

// Save the Data
function save_multiBox_custom_meta($post_id) {
    global $avz_custom_meta_box_fields;

    // verify nonce
    if (!wp_verify_nonce($_POST['avz_custom_meta_box_fields_nonce'], basename(__FILE__))) 
        return $post_id;
    // check autosave
    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)
        return $post_id;
    // check permissions
    if ('page' == $_POST['post_type']) {
        if (!current_user_can('edit_page', $post_id))
            return $post_id;
        } elseif (!current_user_can('edit_post', $post_id)) {
            return $post_id;
    }

    // loop through fields and save the data
    foreach ($avz_custom_meta_box_fields as $field) {
        if($field['type'] == 'tax_select') continue;
        $old = get_post_meta($post_id, $field['id'], true);
        $new = $_POST[$field['id']];
        if ($new && $new != $old) {
            update_post_meta($post_id, $field['id'], $new);
        } elseif ('' == $new && $old) {
            delete_post_meta($post_id, $field['id'], $old);
        }
    } // enf foreach

    // save taxonomies
    $post = get_post($post_id);
    $category = $_POST['category'];
    wp_set_object_terms( $post_id, $category, 'category' );
}
add_action('save_post', 'save_multiBox_custom_meta'); 
```

在 single.php 中

```
if( $image_upload_id = get_post_meta($post->ID, $field['custom_image'], true)){
    $img = $image_upload_id ['custom_image'][0];
    echo wp_get_attachment_image($img, 'full'); 
} 
```

但是找不到附加的图像。在管理员上传的图像中显示，但在帖子页面中未显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:17:02.493

您是否尝试过访问帖子附件？只是看看它是否在那里？

```
<?php 
$args = array(
'post_type' => 'attachment',
'numberposts' => null,
'post_status' => null,
'post_parent' => $post->ID
);

$attachments = get_posts($args);
if ($attachments) {
    echo "<pre>";
    print_r($attachments);
    echo "</pre>";
    $attachment = $attachments[0];
    // print full link to attachment
    the_attachment_link($attachment->ID, false);
}else{
    echo "No Attachments for this post!";
}
?> 
```

# javascript - 如何使用 JQuery 修改 XML

> ID：11258415
> 
> 赞同：5
> 
> 时间：2012-06-29T08:24:22.867
> 
> 标签：javascript, jquery

我正在尝试使用 Javascript 修改 XML 结构中的状态标志。使用在互联网上找到的示例，我相信这应该有效：

```
test = "<?xml version='1.0' encoding='utf-8' standalone='no' ?>" + 
    "<resultaat>" +
        "<type>6</type>" +
        "<status>I</status>" +
        "<start_datum>2012-06-16 00:00:00</start_datum>" +
        "<eind_datum></eind_datum>" +
    "</resultaat>" 
```

要更改状态字段的内容：

```
$(test).find("status").text("D") 
```

然而，结果是 test 没有被修改并且仍然包含旧状态`I`

**感谢您的回答**

正确的见解是您需要先转换为 XMLObject 并对其进行修改。

以下是我最终如何做到的：

```
/* Convert Text to XML Object */
doc = $.parseXML(test)

/* Change the fields required */
$(doc).find('status').text('D')

/* Back to Text */
str = (new XMLSerializer()).serializeToString(doc); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T08:36:22.983

[使用 jQuery.parseXML()](http://api.jquery.com/jQuery.parseXML/)

```
<p id="someElement"></p>
<p id="anotherElement"></p>

var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find( "title" );

/* append "RSS Title" to #someElement */
$( "#someElement" ).append( $title.text() );

/* change the title to "XML Title" */
$title.text( "XML Title" );

/* append "XML Title" to #anotherElement */
$( "#anotherElement" ).append( $title.text() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:31:39.917

你需要写这样的代码......

```
test = "<?xml version='1.0' encoding='utf-8' standalone='no' ?>" + 
    "<resultaat>" +
        "<type>6</type>" +
        "<status>I</status>" +
        "<start_datum>2012-06-16 00:00:00</start_datum>" +
        "<eind_datum></eind_datum>" +
    "</resultaat>";

def = $(test).find("status").text("D");

console.log(def); 
```

为了让它工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:37:25.063

嗯，这个答案有效......但并非总是如此。我正在使用捆绑在 Tidesdk 中的旧 webkit 版本，我遇到了一些奇怪的问题：

```
$(xml).find("whatever").append("<however></however>");
// doesn't modify xml

$("<however></however>").appendTo($(xml).find("whatever"));
// does modify xml 
```

？？？:_)

# apache - apache403 禁止你没有访问权限

> ID：11258417
> 
> 赞同：0
> 
> 时间：2012-06-29T08:24:27.957
> 
> 标签：apache, web-development-server

```
<VirtualHost *:80>
    ServerAdmin python@v.python.centos
    DocumentRoot "/var/www/vhost1/documents"
    ServerName v.python.centos
    ServerAlias www.v.python.centos.com

    ErrorLog "logs/v.python.centos-error_log"
    CustomLog "logs/v.python.centos-access_log" common

    <Directory /var/www/vhost1/documents>
        Order allow,deny
        Allow from all
    </Directory>

    WSGIDaemonProcess v.python.centos processes=1 threads=2 display-name=%{GROUP}
    WSGIProcessGroup v.python.centos

    WSGIScriptAlias /app /var/www/vhost1/wsgi-scripts/myapp.wsgi
    <Directory /var/www/vhost1/wsgi-scripts>
        Order allow,deny
        Allow from all
    </Directory>

    Alias /django-tjob /var/www/vhost1/djproject
    <Directory /var/www/vhost1/djproject>
        Order allow,deny
        Allow from all
    </Directory>

    Alias /django-jobs /home/python/djproject
    <Directory /home/python/djproject>
       Order allow,deny
       Allow from all
    </Directory>

</VirtualHost> 
```

用户：python 权限：/home/python/djproject

```
drwxrwxr-x.  6 python python    4096 Jun 29 14:35 djproject 
```

/var/www/vhost1/djproject

```
drwxr-xr-x. 6 root root 4096 Jun 29 14:31 djproject 
```

“/var/www/vhost1/documents”和“/var/www/vhost1/wsgi-scripts”中的文件可以访问成功，但是“/home/python/djproject”和新文件夹“/var/www/vhost1/djproject” " 有 403 禁止。为什么？如何成功创建虚拟目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:34:30.753

可能是因为[父文件夹的权限应该是固定](http://blog.yourlabs.org/post/19240900759/survive-linux-nix-permissions)的。

IE。无法遍历 /home 或 /home/python。

# asp.net - 带数据表的表格工具

> ID：11258426
> 
> 赞同：0
> 
> 时间：2012-06-29T08:25:18.717
> 
> 标签：asp.net

我使用下面的代码在数据表中添加导出功能。我看不到导出按钮，我正在使用母版页。谁能给点宝贵意见

```
 $(document).ready(function () {
        $('#tblOscarNominees').dataTable({
             "bJQueryUI": true,
               "sPaginationType": "full_numbers",
                "aaSorting": [[4, "desc"]],
                                    "sDom": '<"H"Tfr>t<"F"ip>',
                "oTableTools": {
                    "aButtons": [
            "copy", "csv", "xls", "pdf",
            {
                "sExtends": "collection",
                "sButtonText": "Save",
                "aButtons": ["csv", "xls", "pdf"]
            }
        ] 
```

}

以下是我在母版页中设置的参考

```
 <link href="DataTables/media/css/TableTools_JUI.css" rel="stylesheet" type="text/css" />  
<link href="DataTables/media/css/TableTools.css" rel="stylesheet" type="text/css" />

<link href="DataTables/css/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />

<script src="../DataTables/js/jquery.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery.dataTables.editable.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery.jeditable.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery-ui.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery.dataTables.min.js" type="text/javascript"></script>

<script src="../DataTables/js/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script src="../DataTables/js/jquery.dataTables.columnFilter.js" type="text/javascript"></script>

   <script src="DataTables/media/js/TableTools.js" type="text/javascript"></script>
    <script src="DataTables/media/js/ZeroClipboard.js" type="text/javascript"></script> 
```

# scala - 如何让测试在 Scalatest 中始终以相同的顺序运行？

> ID：11258428
> 
> 赞同：16
> 
> 时间：2012-06-29T08:25:19.210
> 
> 标签：scala, scalatest

我们在 ScalaTest 中使用 Spec trait 进行测试。当我们运行整个套件时，它并不总是以相同的顺序运行。谷歌中的大多数答案都建议定义一个套件并指定所有测试名称。但这需要我们在每次添加新测试时添加测试名称。

是否可以使用 DiscoverySuite 本身并定义测试执行顺序？就像按字母顺序运行测试一样。我查看了扩展 DiscoverySuite，但 DiscoverySuite 似乎是私有的 scalatest。

**- -更多信息 - -**

通过订购我的意思是，如果有测试 A、B、C。

```
A 类扩展规范 {..}
B 类扩展规范 {..}
C 类扩展规范 {..}

```

然后我希望测试按顺序运行（A、B、C）。但现在发生的是，它每次都以不同的顺序运行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T12:44:24.227

DiscoverySuite 是 ScalaTest 私有的，是的。Spec（顺便说一下，现在称为 FunSpec）中测试的执行顺序被定义为源文件中出现的顺序。要定义测试类本身的顺序，您需要定义一个nestedSuites 方法并运行该包装器套件而不是使用发现。一旦不再需要订单，您就可以重新使用发现功能。我将着眼于在下一个 ScalaTest 版本中向 DiscoverySuite 添加定义的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-07T13:16:32.383

请参阅[http://doc.scalatest.org/1.0/org/scalatest/SequentialNestedSuiteExecution.html](http://doc.scalatest.org/1.0/org/scalatest/SequentialNestedSuiteExecution.html)

这似乎提供了您正在寻找的特定行为。

# c++ - Scite：“Go”未运行已编译和构建的代码，给出“未识别”错误

> ID：11258429
> 
> 赞同：0
> 
> 时间：2012-06-29T08:25:25.743
> 
> 标签：c++, scite

“Go”功能是 Scite 给我以下错误

“'。' 未被识别为内部或外部命令、可运行程序或批处理文件。”

是个 '。' 试图与路径相关？

我编译和构建没有问题。构建的exe文件也可以。我只是使用了一个简单的 hello world 代码：

```
int main()
{

   cout << "Hello "  ;
   return 0;    
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T07:04:05.420

这是因为 scite 在生成的输出文件之前使用 './' 来执行程序，这是我们通常在 'terminal' (linux) 中执行程序的方式。但是，这在 Windows 中不是必需的，我们只需指定输出名称并按 Enter 即可执行“.exe”文件。

您需要在选项菜单中打开 cpp.properties 并查找以下内容：

```
# C++ styles 
```

在评论下

```
# Braces are only matched in operator style 
```

编辑该行

```
command.go.*.c=./$(FileName) 
```

去除 '。/'。做了

```
command.go.*.c=$(FileName) 
```

再次在以下评论下方重复相同的内容：

```
# To make the Go command both compile (if needed) and execute, use this setting:  
#command.go.needs.*.c=gcc $(ccopts) -std=c99 $(FileNameExt) -o $(FileName) 
```

改变

```
command.go.*.c=./$(FileName) 
```

至

```
command.go.*.c=$(FileName) 
```

**“制作”设置**

如果您使用的是 mingW-gcc，则在 mingW-gcc 安装文件夹中查找“make”程序。那应该是'mingw32-make'。在评论下方：

```
# Braces are only matched in operator style 
```

改变

```
make.command=make 
```

至

```
make.command=mingw32-make 
```

# c# - 'Emgu.CV.CvInvoke' 的类型初始化程序引发异常

> ID：11258435
> 
> 赞同：0
> 
> 时间：2012-06-29T08:25:56.033
> 
> 标签：c#, emgucv

我在我的项目中使用此代码。 `haar = new HaarCascade("face_detect.xml");` 当程序运行时，它会给出一个异常，如“'Emgu.CV.CvInvoke' throw an exception”。任何人都可以给我任何建议，为什么会这样？

编辑：我搜索这个。它说将一些dll复制到emgucv。我不知道从哪里到哪里需要复制这些 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-26T18:01:29.197

将 EMGU.cv 、 EMGU.GPU 、 EMGU.ML 、 EMGU.CV.UI 、 EMGU.CV 添加到“解决方案资源管理器窗口”中的“参考”中，
然后将 opencv_core290.dll 、 opencv_gpuimgproc290.dll 添加到“解决方案资源管理器窗口”中的项目中”。
右键单击 Project / Add / Add existing item / Goto your Emgucv folder / Goto Bin / *86 / for opencv_core290.dll （如果您正在运行 Emgu Cv 的 2.9 版本）
然后检查。
您也可以查看此 Youtube 链接[https://www.youtube.com/watch?v=gaAfi1KjaGM](https://www.youtube.com/watch?v=gaAfi1KjaGM)

# emacs - 如何从 shell 缓冲区切换到另一个

> ID：11258437
> 
> 赞同：3
> 
> 时间：2012-06-29T08:26:05.837
> 
> 标签：emacs

我学习使用emacs。当我进入 Mx shell 时，我进入了 shell 模式，但我不知道如何退出 shell 模式。我想回到基本模式继续我的编辑工作。我搜索了这个问题[Emacs switch out of terminal](https://stackoverflow.com/questions/7451955/emacs-switching-out-of-terminal)，但是当我按 Cc o 时，输入将被视为命令，那么如何退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:38:13.263

shell 将在缓冲区中运行。您可以使用`C-x b`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:32:51.740

您可以尝试 shell-toggle.el 在当前缓冲区和 shell 缓冲区之间来回快速跳转。

你也可以试试我破解的 shell-toggle 版本，它可以让你在当前缓冲区（文件）的路径中打开一个 shell。请参阅以下链接：

[http://zhangda.wordpress.com/2009/04/08/my-hack-on-shell-toggle/](http://zhangda.wordpress.com/2009/04/08/my-hack-on-shell-toggle/)

# node.js - 快递路线参数条件

> ID：11258442
> 
> 赞同：71
> 
> 时间：2012-06-29T08:26:21.590
> 
> 标签：node.js, express, routing, url-routing

我的 Express 应用程序上有一条如下所示的路线：

```
app.get('/:id', function (request, response) {
  …
}); 
```

ID 始终是一个数字。但是，目前这条路线正在匹配其他东西，例如`/login`.

我想我想要两件事：

1.  仅当 ID 是数字时才使用此路由，并且
2.  仅当没有已定义该特定参数的路线时（例如与 冲突`/login`）。

这可以做到吗？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-06-29T10:45:36.983

扩展 Marius 的答案，您可以提供正则表达式和参数名称：

```
app.get('/:id(\\d+)/', function (req, res){
  // req.params.id is now defined here for you
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-29T08:34:49.027

是的，请查看[http://expressjs.com/guide/routing.html](http://expressjs.com/guide/routing.html)和[https://www.npmjs.com/package/path-to-regexp](https://www.npmjs.com/package/path-to-regexp)（快递使用）。可能工作的未经测试的版本是：

```
app.get(/^(\d+)$/, function (request, response) {
  var id = request.params[0];
  ...
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T07:23:26.130

您可以使用：

```
// /12345
app.get(/\/([^\/]+)\/?/, function(req, res){
  var id = req.params[0];
  // do something
}); 
```

或这个：

```
// /post/12345
app.get(/\/post\/([^\/]+)\/?/, function(req, res){
  var id = req.params[0];
  // do something
}); 
```

# c# - c#excel 2007自动化-循环时如何不遵循两点规则？

> ID：11258454
> 
> 赞同：1
> 
> 时间：2012-06-29T08:27:22.027
> 
> 标签：c#, excel, excel-2007

我在整个循环中多次使用类似于下面的代码行。除了不遵循“没有两点规则”之外，它一切正常，对吧？

```
wksheet.Cells(cell.Row, "J").Value 
```

我可以将 cell.Row 存储为 int，但是从那里去哪里呢？是否有一个函数可以让我传递行号和列字母并在仍然遵循规则的同时获取该特定单元格的值？

每次我想在循环中获取特定单元格的值时，声明然后设置范围变量会很痛苦。

[如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects-in-c-sharp)

^此链接没有解释两点规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:39:21.673

我想你可以把它分解

```
var row = cell.Row;
var cell = wksheet.Cells(row, "J");
var value = cell.Value; 
```

# php - wordpress 前端帖子自动发布在用户的 Facebook 时间线上

> ID：11258457
> 
> 赞同：1
> 
> 时间：2012-06-29T08:27:34.990
> 
> 标签：php, javascript, wordpress, facebook-graph-api

有人可以帮我看看我应该如何在我的网站上设置这个流程：

1.  用户已通过 facebook 连接到该站点，并具有以下权限：email、read_friendlists、publish_stream、publish_actions。这一切都很好。

2.  用户在 wordpress 中从前端成功提交了一篇文章。

我想要做的是当`add_post()`动作被触发（使用自定义主题）并在 wp 中成功提交文章时，我还想将同一篇文章发布到用户的 fb 时间轴。

相信我，我已经阅读了 FB dev 中的所有该死的文档，但没有关于如何做到这一点的简单示例。

他们提到使用 curl 来绘制 api ，但是如何使用它呢？用php还是javascript？也许你会有任何工作示例鳕鱼，所以我可以看看？

# java - Log4j + Amqp 日志示例代码失败

> ID：11258460
> 
> 赞同：1
> 
> 时间：2012-06-29T08:27:54.210
> 
> 标签：java, spring, rabbitmq, amqp

我正在尝试创建一个分布式日志记录系统，我的每个 tomcat 实例都会将日志放入交换/队列中，并将其累积并存储在一个 plcae 中。我正在阅读有关使用 rabbitmq 的 Log4j + Amqp 的信息。

我也下载了以下示例代码。 [https://nodeload.github.com/SpringSource/spring-amqp-samples/zipball/master](https://nodeload.github.com/SpringSource/spring-amqp-samples/zipball/master)

**从包中导入项目 log4j。**

当我运行 IntegrationTest.java (Junit)。我失败了。以下是踪迹。

```
java.lang.AssertionError: Time out waiting for message
    at org.junit.Assert.fail(Assert.java:91)
    at org.junit.Assert.assertTrue(Assert.java:43)
    at org.springframework.amqp.rabbit.log4j.web.controller.IntegrationTest.logInfo(IntegrationTest.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

发生这种情况是因为在观察时间内没有日志到达监听器 AmqpLogMessageListener。

我对代码有一些疑问：

1.  如何注册监听器 AmqpLogMessageListener.java 以监听配置的交换。
2.  为什么测试失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:06:46.787

可以肯定的是，根据源[https://github.com/SpringSource/spring-amqp-samples/blob/master/log4j/src/main/resources/log4j.properties](https://github.com/SpringSource/spring-amqp-samples/blob/master/log4j/src/main/resources/log4j.properties)检查您的 log4j 属性文件。

然后，可能是您在 RabbitMQ 上的连接可能需要很长时间才能获取，因此请更改： new CountDownLatch(1);

这样：

新的倒计时锁（5）；

# xml - 我可以创建一个 xml 来指定来自 2 个嵌套 xsd 的元素而不使用前缀吗？

> ID：11258462
> 
> 赞同：1
> 
> 时间：2012-06-29T08:28:02.427
> 
> 标签：xml, visual-studio, xslt, xml-validation

我有 2 个嵌套的 xsd：

**DefaultSchema.xsd：**

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="DefaultSchema"
    targetNamespace="http://myNamespace.com/DefaultSchema.xsd"
    elementFormDefault="qualified"
    xmlns="http://myNamespace.com/DefaultSchema.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
  <xs:complexType name="ZForm">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
      <xs:element name="Part" minOccurs="0" maxOccurs="unbounded" type="Part"/>
    </xs:sequence>
    <xs:attribute name="Title" use="required" type="xs:string"/>
    <xs:attribute name="Version" type="xs:int"/>
  </xs:complexType>

  <xs:complexType name="Part">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
      <xs:element name="Label" type="Label" minOccurs="0"></xs:element>
    </xs:sequence>
    <xs:attribute name="Title" use="required" type="xs:string"/>
  </xs:complexType>
  <xs:complexType name="Label">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="Title" type="xs:string"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

**ExportSchema.xsd：（**这有点在 DefaultSchema 的主要元素（ZForm）周围再包裹了 1 个元素（ZForms））

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="ExportSchema"
    targetNamespace="http://myNamespace.com/ExportSchema.xsd"
    elementFormDefault="qualified"
    xmlns="http://myNamespace.com/DefaultSchema.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:es="http://myNamespace.com/ExportSchema.xsd"
>
  <xs:import namespace="http://myNamespace.com/DefaultSchema.xsd" schemaLocation="DefaultSchema.xsd"/>

  <xs:element name="ZForms" type="es:ZFormType"></xs:element>

  <xs:complexType name="ZFormType">
    <xs:sequence>
      <xs:element name="ZForm" type="ZForm" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

最后我有一个**生成的 xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<ZForms xmlns="http://myNamespace.com/ExportSchema.xsd">
  <ZForm Version="1" Title="FormTitle">
    <Part Title="PartTitle" >
      <Label Title="LabelTitle" />
    </Part>
  </ZForm>
</ZForms> 
```

Visual Studio 抱怨它不知道“部分”是什么。
我希望我不需要使用 xml 命名空间前缀 (..) 来验证这个 xml，因为 ExportSchema.xsd 引用了 DefaultSCHema.xsd。

有没有办法在不明确指定 DefaultSchema.xsd 的情况下使该 xml 结构有效？或者这是不行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:11:31.803

如果您更改`import`为`include`基本架构，则可以使其正常工作（没有命名空间前缀）：

**导出架构.xsd**

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="ExportSchema"
    targetNamespace="http://myNamespace.com/DefaultSchema.xsd"
    elementFormDefault="qualified"
    xmlns="http://myNamespace.com/DefaultSchema.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
    <xs:include schemaLocation="DefaultSchema.xsd" />

    <xs:element name="ZForms" type="ZFormType"></xs:element>

    <xs:complexType name="ZFormType">
        <xs:sequence>
            <xs:element name="ZForm" type="ZForm" maxOccurs="unbounded" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

注意：这还需要将目标命名空间更改为 DefaultSchema.xsd。

[来自 xsd:import 上的 MSDN](http://msdn.microsoft.com/en-us/library/ms256480)：

> **include**元素和**import**元素 的区别在于import 元素允许从具有不同目标命名空间的模式文档中引用模式组件，而 include 元素从具有相同目标命名空间（或没有指定目标命名空间）的其他模式文档中添加模式组件) 到包含架构。简而言之，import 元素允许您使用来自任何模式的模式组件；include 元素允许您将包含模式的所有组件添加到包含模式。

**DefaultSchema.xsd**（您的版本没有变化）

**测试.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ZForms 
    xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
    xs:schemaLocation="http://myNamespace.com/DefaultSchema.xsd ExportSchema.xsd" 
    xmlns="http://myNamespace.com/DefaultSchema.xsd">
  <ZForm Version="1" Title="FormTitle">    
    <Part Title="PartTitle" >      
      <Label Title="LabelTitle" />      
    </Part>
  </ZForm>
</ZForms> 
```

这种组合似乎有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:37:09.230

您的架构文档 DefaultSchema 具有 targetNamespace="http://myNamespace.com/DefaultSchema.xsd" 因此它表示 ZForm、Part 和 Label 元素必须在此命名空间中。但在您的实例中，这些元素不在此命名空间中。因此，您的实例对此模式无效。

# gwt - RequestFactoryEditorDriver#getPaths() 用法？

> ID：11258465
> 
> 赞同：0
> 
> 时间：2012-06-29T08:28:13.697
> 
> 标签：gwt, requestfactory, gwt-editors

HI：以下代码来自 RequestFactoryEditorDriver：

```
 /**
   * Returns a new array containing the request paths.
   * 
   * @return an array of Strings
   */
  String[] getPaths(); 
```

我的问题是，

1.  什么时候在什么地方使用这个方法，没有地方设置RequestFactoryEditorDriver的路径，是创建驱动时生成的路径吗？如果是这样，“生成路径”的规则是什么？
2.  我认为客户应该自己提供路径，例如：

    factory.find(proxyId).with(myPaths).fire(...)

不是从 RequestFactoryEditorDriver#getPaths()，如果没有指定从 1 获取的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:35:23.707

路径是从编辑器层次结构中计算出来的。该列表基本上包括所有正在编辑的不是简单值的属性（原语、字符串、日期等）

如果您有以下情况：

```
TextBox name;
DateBox dateOfBirth;

@Path("manager.name")
Label managerName;

AddressEditor address; 
```

`getPaths`会回来`"manager", "address"`的。

这个想法是您可以将值直接传递给`with()`并且您将检索编辑器所需的所有对象。如果您在层次结构中添加或删除子编辑器，则无需更改请求代码，该`getPaths`值将不同并包含编辑器所需的内容。

# rspec - Rspec 错误未定义方法“has_key？” 对于零：NilClass

> ID：11258467
> 
> 赞同：0
> 
> 时间：2012-06-29T08:28:24.310
> 
> 标签：rspec, ruby-on-rails-3.2

我正在尝试为仓库应用程序编写一个测试用例。下面是代码

模型：

```
class Product < ActiveRecord::Base
 attr_accessible :description, :image_url, :price, :title

 validates :title, :description, :image_url, :presence => true
 validates :price, :numericality => {:greater_than_or_equal_to => 0.01}

end 
```

测试用例：

```
require 'spec_helper'

describe Product do
before :each do
    @product = Product.new "Title", "Description", "Image Url", "Price"
end

describe "#new" do
    it "takes four parameters and returns a product" do
        @product.should be_an_instance_of Product
    end
end

describe "#title" do
    it "returns the correct title" do
        @product.title.should eql "Title"
    end
end

describe "#description" do
    it "returns the correct description" do
        @product.description.should eql "Description"
    end
end

describe "#image_url" do
    it "returns the correct image_url" do
        @product.image_url.should eql "Image Url"
    end
end

describe "#price" do
    it "returns the correct price" do
        @product.price.should eql "Price"
    end
end

end 
```

我收到错误

```
undefined method `has_key?' for nil:NilClass 
```

和

```
ArgumentError:←[0m
1mwrong number of arguments (4 for 2)←[0m
 ./spec/product_spec.rb:5:in `new'←[0m
 ./spec/product_spec.rb:5:in `block (2 levels) \
 in <top (required)>'" for all examples. 
```

请指导我如何纠正它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:53:02.333

尝试这样的事情：

```
before :each do
   @product = Product.new(title: "Title", description: "Description", image_url: "Image Url", price: "Price")
end 
```

试试[Michael Hartl 的](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)精彩教程

# html - 在浏览器中打开语言环境文件

> ID：11258470
> 
> 赞同：1
> 
> 时间：2012-06-29T08:28:47.547
> 
> 标签：html, client-side, local-files

我想创建一个 html 页面来打开驻留在本地 PC 上的不同文件类型（avi、xls、ppt、ods、pdf 等）。我找到了几篇关于它的帖子并使用 and 进行了一些`<object>`测试`<embed>`。但是，我不知道在不使用外部程序的情况下强制浏览器在 html 页面中打开文件的最佳方法（如果可能的话）是什么。在这一点上，我想知道是否有必要实现小程序、应用程序、silverlight 或 flex air 甚至桌面应用程序（但我肯定会避免它）。我认为可能使用 iframe 或一些 javascript 框架......有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:32:57.103

您无法指定用户系统如何打开文件，这取决于查看该页面的系统的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:35:22.893

如果你想使用 Java 和 JSP，你可以这样做：

```
resp.setContentType("application/pdf");
resp.setHeader("Content-Disposition", "inline; filename=\"myPDF.pdf\""); 
```

# android - achartengine - 倾斜的标签位置

> ID：11258476
> 
> 赞同：2
> 
> 时间：2012-06-29T08:29:39.507
> 
> 标签：android, achartengine

我正在使用**achartengine**来显示温度图。在 X 轴上我放置日期，为了适应它们我调用 setXLabelsAngle(45); 这是结果：

![在此处输入图像描述](../Images/1b22d54bbfa5c587ed694dd2f89d0613.png)

如您所见，标签**放置得太高**，超出了 x 轴。我该如何解决这个问题？我已经在使用 setMargins()，但标签不会移动，只有图例会移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:00:25.400

这将有助于：

```
renderer.setXLabelsAlign(Align.LEFT); 
```

# c# - 如何从 DataGridView 中删除行？

> ID：11258478
> 
> 赞同：12
> 
> 时间：2012-06-29T08:29:49.493
> 
> 标签：c#, .net, winforms, datagridview, buttonclick

我有一个带有预加载 DataGridView 的 winform...我想在选择或突出显示行并单击按钮时从 datagridview 中删除行...

还想清除所有列....

目前我用

```
foreach (DataGridViewRow dgvr in dataGridView2.Rows)
{
    if (dgvr.Selected == true)
    {
        dataGridView2.Rows.Remove(dgvr);
    }
} 
```

但它抛出了“行或未提交”之类的异常……如果有人有更好的建议，那将是不言而喻的……

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-01T11:21:00.480

如果您已`AllowUserToAddRows`在 DataGridView 上启用，那么您可能会意外删除 DataView 底部的空行，该行是下一个用户创建的行的占位符。如果不需要，请尝试禁用此选项，否则请尝试使用如下代码：

```
foreach (DataGridViewRow row in dataGridView1.SelectedRows)
{
    if(!row.IsNewRow)
       dataGridView1.Rows.Remove(row);
} 
```

# windows-phone-7 - 如何在 Windows Phone 中 ping 通？

> ID：11258483
> 
> 赞同：2
> 
> 时间：2012-06-29T08:30:47.563
> 
> 标签：windows-phone-7, network-programming, network-protocols, ping, windows-phone-7.1.1

我有一个基于 windows Phone 7.5 的项目，其中包含一个用于 ping 远程设备（在同一子网或互联网中）的模块。我尝试在端口 7 上执行回显请求和回复。但回复没有回来，而是在我尝试访问时发生 NullReferenceException `SocketAsyncEventArgs.Buffer`。我也尝试在应用程序中创建 ICMP 类型的数据包，但没有运气。

据我了解，不允许 icmp 数据包执行 ping。但是，如果知道电话的 IP 地址，则可以从桌面上 ping 电话。

我检查了市场上的许多应用程序（如 Console WP7 Lite、TestMyNet），它们可以通过发送 icmp 数据包执行 ping，也可以访问 ping 操作的往返时间。

我想知道当 Windows Phone 套接字不允许 icmp 数据包时，这些应用程序如何 ping 到远程（可访问）设备。

谁能帮我。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:29:28.577

您确定这些应用程序可以 ping 本地网络吗？例如，他们可以 ping WP Wifi 接口的网关还是 WP Wifi 接口本身？还是只能ping Internet 上的主机？我尝试了您提到的两个应用程序，甚至更多，他们ping除了本地网络之外的所有内容。这就是为什么我确信他们使用外部服务器来执行 ping 和往返行程只是以某种方式计算或估计。

彼得·沃伊托维奇

# java - 以编程方式创建 JSF HtmlOutputLink

> ID：11258488
> 
> 赞同：2
> 
> 时间：2012-06-29T08:31:26.313
> 
> 标签：java, jsf-2

使用 JSF java 类，是否可以以编程方式创建将参数传递给另一个页面的链接。

```
<h:link value="Edit" outcome="edit" >
    <f:param name="id" value="500" />
</h:link> 
```

换句话说，上面的 JSF 标记的程序等价物是什么？

```
HtmlOutputLink link = new HtmlOutputLink(); // link.? = "Edit"?
// link.? = "edit"?
// link.? = 500? 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T11:49:59.980

您的代码示例令人困惑。[`<h:outputLink>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputLink.html)根本没有`outcome`属性，而是它的属性`value`表示 URL。也许您打算使用[`<h:link>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)?

无论如何，您可以`<f:param>`通过创建一个实例[`UIParameter`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIParameter.html)并将其添加为链接组件的子组件来以编程方式创建。这是一个启动示例，假设您真的想使用`<h:link>`.

```
HtmlOutcomeTargetLink link = new HtmlOutcomeTargetLink();
link.setValue("Edit");
link.setOutcome("edit");
UIParameter param = new UIParameter();
param.setName("id");
param.setValue("500");
link.getChildren().add(param); 
```

# ruby-on-rails - 使用 mongoid gem 时延迟加载 has_and_belongs_to_many 字段

> ID：11258489
> 
> 赞同：2
> 
> 时间：2012-06-29T08:31:29.840
> 
> 标签：ruby-on-rails, mongoid

我有以下型号：

```
class Foo
 has_and_belongs_to_many :bars
end

class Bar
 has_and_belongs_to_many :foos
end 
```

每个代表`Foo`实例的文档都有一个名为 的数组字段`bar_ids`。每当从数据库中检索到 Foo 对象时，Mongoid 也会检索该对象的内容`bar_ids`。当文档有 1000 个 id 时，这可能会导致性能问题，即

```
> Foo.first
#<Foo _id: 4fed60aa2bdf061c2c000001, bar_ids: [1, 2, 3.... 5000]> 
```

在大多数情况下，我不需要加载`bar_ids`. 有没有办法可以指示模型延迟加载`bar_ids`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:23:48.200

我在群里问了同样的问题，`mongoid`得到了[答案](https://groups.google.com/forum/#!topic/mongoid/J4pZcbofq9Y)。本质上，需要阅读三个 gem 的文档才能理解`mongoid 3`（mongoid、moped 和 origin）。

这是gem的相关文档[部分。](http://mongoid.org/en/origin/docs/options.html)or子句可用于过滤生成的文档结构`origin`。`without``only`

选择性加载：

```
Foo.without(:bar_ids).first 
```

有选择地重新加载：

```
def reload_fields(*fields)
  return self if fields.empty? or new_record?
  # unscope and prevent loading from indentity map
  fresh = Mongoid.unit_of_work(disable: :current) do
    self.class.unscoped.only(*fields).find(id)
  end
  fields.each do |attr| 
    write_attribute(attr, fresh.read_attribute(attr))
    remove_change(attr) # unset the dirty flag for the reloaded field
  end
  self
end 
```

# android - 更新安卓用户界面

> ID：11258490
> 
> 赞同：0
> 
> 时间：2012-06-29T08:31:35.020
> 
> 标签：android, android-activity, handler, ui-thread

此函数驻留在服务中，当被活动调用时，它应该生成一个随机数并将其添加到 ArrayList。每次添加新项目时，它都会尝试通过 update 更新 UI，该更新调用 runOnUiThread 以使用这些数字绘制折线图，​​然后等待 1 秒。我希望每秒更新一次。有没有办法强制活动清除执行其消息队列？截至目前，它会等到该线程完成执行后再更新。我应该在 AsyncTask 中实现它吗？

```
public void pollDP(int numPt){
    final Random gen = new Random();
    final int numPtF = numPt;
    serverLoadList = new ArrayList<Integer>();

        new Thread(new Runnable(){
            @Override
            public void run(){
                for(int i = 0; i < numPtF; i++){
                    serverLoadList.add(gen.nextInt());
                    update();
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
            }

        }).run();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:17:37.403

解决方案在 Martze 对我的问题的评论中。我正在将此作为我的问题的解决方案。

> 尝试使用 Thread.start() 而不是 Thread.run()。如果使用 run()，则 Runnable 不会在新线程中启动。如果这没有帮助，请发布一些 update() 方法的代码。我猜你是从 UI-Thread 调用 pollDP 是对的吗？– 马尔策

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:36:29.667

尝试使用 MessageHandler 来满足您的要求，请访问[此链接](http://idlesun.wordpress.com/2010/12/12/android-handler-and-message-tutorial/)以获取更多详细信息，根据您的需要进行必要的更改:)

# opengl - 使用 OpenGL 和 DirectX 进行 SDL 窗口管理

> ID：11258494
> 
> 赞同：1
> 
> 时间：2012-06-29T08:32:03.193
> 
> 标签：opengl, directx, sdl, sdl-2

我正在将一个小型图形引擎从 DirectX 9 移植到 OpenGL。该引擎使用 SDL（现在移植到 2.0）来管理输入和窗口创建。

我想知道如何正确处理 OpenGL 和 DirectX 的窗口事件。我对这些桌面平台（linux、OSX 和 windows）感兴趣

*   窗口分辨率更改
*   全屏到窗口/窗口到全屏处理
*   Alt+tab 处理 -

我试图通过网络搜索，但信息并没有集中在一个地方。我想许多其他人以前也面临过同样的问题。

是否有任何资源可以阅读有关我的引擎的这种处理指南？是否可以在不丢失传输到 OpenGL 和 DirectX 中的渲染器系统的资源的情况下处理分辨率变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:13:11.940

> *   窗口分辨率更改

OpenGL 本身不需要对此进行特殊处理。不幸的是，SDL 经历了完整的窗口重新初始化，包括窗口大小更改时的 OpenGL 上下文，这意味着所有 OpenGL 状态对象（即纹理、顶点缓冲区、着色器等）都将丢失。

然而，这是 SDL 的限制。

因此，我个人更喜欢 GLFW 来创建 OpenGL 窗口和上下文。不过，您仍然可以将 SDL 用于其他事情（如音频、网络、图像加载等）。

> *   全屏到窗口/窗口到全屏处理

这实际上也是一个窗口大小的变化。往上看。

> *   Alt+tab 处理 -

OpenGL 不需要为此付出任何特别的努力。只需在 Alt+Tab 退出时最小化窗口并停止游戏循环。当窗口恢复时，继续游戏循环。

# java - 如何检查Java中的ZIP文件是否为空？

> ID：11258498
> 
> 赞同：1
> 
> 时间：2012-06-29T08:32:32.133
> 
> 标签：java, zipoutputstream

我有以下代码 -

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
ZipOutputStream zos = new ZipOutputStream(outputStream);

for (int i = 0; i < params.getGrades().size(); i++) {
generateReport(param1, param2, zos);
}

zos.flush();
zos.close(); 
```

在 generateReport 方法中，我有代码将我的报告生成为 xls 文件并将它们添加到 ZIP。

有什么方法可以检查 ZIP 文件中是否写入了任何文件，或者 ZIP 文件是否为空？有什么我可以使用的财产吗？

谢谢，拉兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:40:05.103

您可以使用 java.util.zip 包中的[ZipFile](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipFile.html)。

您可以调用

```
size() 
```

方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:56:23.493

关闭后`zos,` `outputStream.size()`会给你写入的字节数。您必须允许空 ZIP 文件的 ZIP 标头大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:38:39.980

请参阅： [http ://www.java-examples.com/get-number-entries-zip-file-example](http://www.java-examples.com/get-number-entries-zip-file-example)

和：

[统计 ZIP 目录中的文件 - JAVA, Android](https://stackoverflow.com/questions/4519487/count-files-in-zips-directory-java-android)

和：

[Android：获取 Zip 中的文件数量？](https://stackoverflow.com/questions/6795389/android-get-number-of-files-within-zip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T04:00:39.223

@Didier - 我决定接受你关于返回值的建议，但最终这样做了 -

我没有检查文件是否已添加到 ZIP，而是检查了我试图写入 xls 文件（该文件又被添加到 ZIP 的文件）中的列表数据是否为空。如果它为空，那么我将错误值设置为“未生成文件”。如果列表不为空，我将一个空值分配给字符串并将其返回给调用函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T08:52:41.743

@Raaz，请通过此[链接](https://stackoverflow.com/questions/8756202/java-zip-file-copy-and-paste-from-one-zip-to-another)。

在那里你可以看到一个名为“ZipEntry”的类。它表示 zip 文件夹中包含的文件。它提供了一些有用的方法，例如：

```
zipEntry.getName(); // name of the file contained by zip.
zipEntry.getSize(); // size of the file contained by zip. 
```

# c++ - 相互包含的派生和专用模板类

> ID：11258501
> 
> 赞同：1
> 
> 时间：2012-06-29T08:33:09.513
> 
> 标签：c++, templates

我在标题中有这段代码（已编辑）：

```
template <int i> class A {};
template <> class A <1> { B<1> _b; };

template <int i> class B : public A <i> {};
template <> class B <1> : public A <1> {}; 
```

并以某种方式像这样使用它：

```
#include "template_A_B.h"
int main ()
{
   A<1> a;
   B<1> b;
   return 0;
} 
```

显然我得到了编译错误：

```
error: ‘B’ does not name a type 
```

如果我添加 B 的前向声明

```
template <int i> class B; 
```

我明白了

```
error: field ‘_b’ has incomplete type 
```

编译时。

我还尝试向前声明 A 并切换类定义的顺序并得到：

```
error: declaration of ‘struct A<1>’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:41:00.363

在您最初的问题表述中，您只需将您的专业放在您的前向声明之后。然后一切都会正确解决。

```
template <int i> class A;
template <int i> class B;

template <> class A <1> {};
template <> class B <1> : public A <1> {};

template <int i> class A { B<1> _b; };
template <int i> class B : public A <i> {}; 
```

在您修改后的问题中，您创建了一个试图包含自身的结构，即使使用非模板类型也是不允许的。例如，您不能定义：

```
struct A { B b; };
struct B : public A {}; 
```

但是，如果您更改`A`为使用对`B`.

```
struct B;

struct A { B *b; };
struct B : public A {}; 
```

# asp.net - 使用 web.config 的重定向规则

> ID：11258503
> 
> 赞同：1
> 
> 时间：2012-06-29T08:33:16.050
> 
> 标签：asp.net, redirect, web-config

我想重定向

[http://www.mydomain.com/rakhi-blog/index.php/2012/06/20/my-article/](http://www.mydomain.com/rakhi-blog/index.php/2012/06/20/my-article/)到 [http://www.mydomain.com/rakhi-blog/2012/06/20/my -文章/](http://www.mydomain.com/rakhi-blog/2012/06/20/my-article/)

为此，我使用以下代码：

```
 <configuration>
      <system.webServer>
        <defaultDocument>
          <files>
            <remove value="index.php" />
            <add value="index.php" />
          </files>
        </defaultDocument>
        <rewrite>
          <rules>
            <rule name="Main Rule" stopProcessing="true">
              <match url="(.*)" ignoreCase="true" />
              <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
              </conditions>
              <action type="Rewrite" url="index.php/{R:0}" />
            </rule>
            <rule name="Rewrite Index">
              <match url="^index.php/*" />
              <action type="Redirect" url="/rakhi-blog/{R:1}" />
            </rule>       
          </rules>
        </rewrite>
      </system.webServer>
    </configuration> 
```

但是此代码不起作用。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-18T08:11:06.257

尝试：

```
 <rewrite>
      <rules>
        <rule name="Rewrite Index">
          <match url="^rakhi-blog/index.php/(.+)$" />
          <action type="Redirect" url="/rakhi-blog/{R:1}" />
        </rule>       
      </rules>
    </rewrite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:43:42.470

过去，我使用文章“[使用失败的请求跟踪来跟踪重写规则](http://learn.iis.net/page.aspx/467/using-failed-request-tracing-to-trace-rewrite-rules/)”中的说明来查找和解决此类问题。

基本上，您打开跟踪并查看 IIS 实际重定向（或不重定向）的内容和原因。然后，您可以查看您的期望是否与实际结果相符。

# python - Python：为什么正则表达式比 replace() 方法慢？

> ID：11258511
> 
> 赞同：2
> 
> 时间：2012-06-29T08:33:56.970
> 
> 标签：python, regex

我有接下来的 2 块代码：

```
def replace_re(text):
    start = time.time()
    new_text = re.compile(r'(\n|\s{4})').sub('', text)
    finish = time.time()
    return finish - start

def replace_builtin(text):
    start = time.time()
    new_text = text.replace('\n', '').replace('    ', '')
    finish = time.time()
    return finish - start 
```

比我用文本参数调用这两个函数（一个网页的大约 500kb 源代码）。我认为`replace_re()`会快得多，但结果是下一个：

1.  `replace_builtin()`~ 0.008 秒
2.  `replace_re()`~ 0.035 秒（**慢了近 4.5 倍**！！！）

这是为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T08:35:35.857

因为正则表达式*比*固定字符串替换复杂 4.5 倍以上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T08:39:32.953

因为`re`必须生成一个 FSM。然后用它来处理字符串。而替换可以使用更接近 lib/OS 级别的底层字符串处理函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T08:43:16.087

考虑每个空格字符在源字符串中发生的情况——正则表达式引擎必须探索接下来的三个字符以查看它们是否*也是*空格。*因此，每个空格本质上还*涉及查看下一个字符。大多数 RE 引擎写得并不那么……直截了当地说……但它本质上意味着引擎必须返回到启动状态，并可能丢弃它在之前构建的匹配状态上建立的数据。

然而，在字符串中搜索固定模式（四个空格）实际上可以在[亚线性时间内](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)完成。我不知道 Python`replace()`是否以这种方式实现，但希望他们能够很好地使用这些工具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T08:47:03.217

### 经验法则

固定字符串匹配应该总是比正则表达式匹配更快。你可以用谷歌搜索各种基准，或者做你所做的并执行你自己的，但通常你可以假设这将是正确的，除非（可能）在一些不寻常的边缘情况下。

### 为什么正则表达式更慢

*为什么*这是真的与固定字符串匹配没有回溯、编译步骤、范围、字符类或许多其他减慢正则表达式引擎速度的特性有关。当然有优化正则表达式匹配的方法，但我认为在常见情况下它不太可能击败对字符串的索引。

### 使用源

如果您想要更好的解释，您可以随时查看相关模块的源代码，了解它们是如何工作的。这肯定会为您提供更多信息，说明为什么任何特定实现会如此执行。

# windows-runtime - 是否有适用于 WinRT 的 Autofac 版本

> ID：11258517
> 
> 赞同：2
> 
> 时间：2012-06-29T08:34:19.227
> 
> 标签：windows-runtime, autofac

我有一个想移植到 WinRT 的 windows phone 7 应用程序。我的应用程序目前使用 Autofac，我想知道是否有 WinRT 版本。我一直无法找到有关此的任何信息。

干杯，

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:22:30.350

我不知道什么时候会成为 WinRT 的 Autofac 专用版本，但来自[Autofac 2.6.1 发行说明](http://nblumhardt.com/2012/03/autofac-update-2-6-1-published/)：

```
Autofac can now be used with .NET Portable Class Libraries. 
```

并且可以从 WinRT 使用[.Net Portable 类库。](http://msdn.microsoft.com/en-us/library/windows/apps/gg597391%28v=vs.110%29.aspx)

目前没有 nuget 包，但可以[直接](http://code.google.com/p/autofac/downloads/detail?name=Autofac-2.6.1.841-Portable.zip)从 Autofac 网站下载。

请注意，此版本并非最终版本，只是“预览版”，您可以在 google 群组中找到更多信息：[支持 Windows 运行时](https://groups.google.com/forum/?fromgroups#!topic/autofac/yokgnLr_tho)。

# asp.net - AJAX 的 Highcharts 系列

> ID：11258529
> 
> 赞同：0
> 
> 时间：2012-06-29T08:35:17.997
> 
> 标签：asp.net, asmx, highcharts, webmethod

我从 .ASMX 返回的 Json 格式有问题

我需要返回这样的东西

```
[{ name : "TEST1", data : [100]},
{ name : "TEST2", data : [200]}] 
```

所以这是我的样本

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
    public List<jsonGraphSeries> Graph(string ID)
    {
       List<GenList>objGenList = new List<GenList>();
       GenList objlist;

       objlist = new GenList();
       objList.name = "TEST";
       objList.data[0] = 100;
       objGenList.add(objList);
     }

public class GenList
{
 public string name;
 public double[] data;
} 
```

什么都没有发生...有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:12:03.127

你的方法没有返回任何东西，添加这个有用吗？

`return objGenList;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:56:12.983

愚蠢的我......为了让json将它识别为一个数组字段......

而不是这样做......

```
objList.data[0] = 100; 
```

我应该这样做...

```
 objlist = new GenList();
 objList.name = "TEST";
 objList.data = new [] {100};
 objGenList.add(objList); 
```

输出将是

```
{ name : "TEST1", data : [100]} 
```

# html - 图像 Alt 和标题不显示，因为 Z-index

> ID：11258531
> 
> 赞同：1
> 
> 时间：2012-06-29T08:35:22.600
> 
> 标签：html, css, firefox, title, alt

这是我的问题，我的 HTML 中有几张使用 z-index 排序的图像。但是底部图像的属性 Alt 和 Title 不会在 Firefox 和 Chrome 中显示（IE 工作...）。有办法吗？谢谢！

```
<img src="images/one.png" style="position:absolute;z-index:0;" alt="This one" title="This one"/> 
<img src="images/two.png" style="position:absolute;z-index:1;" alt="" title=""/> 
<img src="images/three.png" style="position:absolute;z-index:2;" alt="" title=""/> 
```

第三个图像 ( `three.png`) 是覆盖其他两个图像的透明层。我希望 alt 是第一个 ( `one.png`) 显示的标题。很抱歉解释的laq，简单的问题似乎最难解释:)

**更新**

好的，这是 a 制作的脚本：

```
`$('.animated').each(function(index) {

    var attr = $(this).attr('title');
    if (!attr) {
} else{
        var newId = 'wrapper_' + index;
        $(this).wrap('<div id="' + newId + '"></div>');
        var tit = $(this).attr('title');
        var pst = $(this).css('margin-top');
        var stp = $(this).css('margin-left');
        $('#' + newId).prepend('<div style="position:absolute;z-index:1000;width:' + $(this).width() + 'px;left:50%;top:50%;height:' + $(this).height() + 'px;margin-left:' + stp + ';margin-top:' + pst + ';" title="' + tit + '"></div>');
    }
});` 
```

因此，这意味着当图像具有标题时，会在其上创建一个带有巨大 zindex 的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:08:46.727

由于某种原因，我的帖子被删除了，请参见下文：

如果您有一个覆盖其他两个的透明图像，则 alt 和 title 标签将从其他两个顶部的透明层中拉出，因为它无法识别下面的其他两个。

如果您只想显示第一张图像的标题和替代文本，则将这些值分配给透明层。

IE 可能正在呈现图像的 alt 文本，而其他浏览器在图像存在时不会呈现这些文本。

# haskell - 如何对关联数据进行约束？

> ID：11258536
> 
> 赞同：14
> 
> 时间：2012-06-29T08:35:42.583
> 
> 标签：haskell, type-constraints, type-families

我想说的是，关联的数据始终是某个类的实例。

```
class (Context (Associated a b)) => Class a where
  data Associated a :: * -> *

instance Context (Associated a b) where
  func1 = error "func1" 
```

`b`但是，不在范围内的自由变量阻止了我这样做。一种解决方案是从 复制类函数`Context`，但它看起来很难看。

```
class Class a where
  data Associated a :: * -> *
  -- duplicate all functions from class Context
  contextFunc1 :: Associated a b -> String

instance Class a => Context (Associated a b) where
  func1 = contextFunc1 
```

是否有一种惯用的方法来对具有头中未提及的变量的关联数据类型施加约束？

编辑：我想保持与 GHC 7.0.3 的兼容性

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T09:56:42.387

*正如[@SjoerdVisscher 所指出的](https://stackoverflow.com/questions/11258536/how-to-put-constraints-on-the-associated-data/11259706#comment14823576_11259706)，在 a`forall`的左侧使用or[实际上](http://hackage.haskell.org/trac/ghc/ticket/7019#comment:3)[**不是**](http://hackage.haskell.org/trac/ghc/ticket/7019#comment:3)[ok](http://hackage.haskell.org/trac/ghc/ticket/7019#comment:3)，至少现在还没有，尽管我的具体示例在 ghc-7.4 中确实有效。`=>``class``instance`[](http://hackage.haskell.org/trac/ghc/ticket/7019#comment:3)*

 *** * *

这样它似乎工作：

```
{-# LANGUAGE FlexibleInstances    #-}
{-# LANGUAGE TypeFamilies         #-}
{-# LANGUAGE Rank2Types           #-}
{-# LANGUAGE ConstraintKinds      #-}
{-# LANGUAGE UndecidableInstances #-}

class Context c where
  func1 :: c -> String

class (forall b. Context (Associated a b)) => Class a where
  data Associated a :: * -> *

newtype ClassTest = ClassTest { runClassTest :: String }

instance (forall b. Context (Associated ClassTest b)) => Class ClassTest where
  data Associated ClassTest b = ClassTestAssoc b (b -> ClassTest)

instance Context (Associated ClassTest b) where
  func1 (ClassTestAssoc b strFunc) = runClassTest $ strFunc b

main = putStr . func1 $ ClassTestAssoc 37 (ClassTest . show) 
```

实例中的额外`forall b`约束似乎有点丑陋和多余，但显然这是必要的。

> $ runghc-7.4.1 tFamConstraint0.hs
> 37

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T11:49:37.987

我没有可用的 GHC 7.0.3，但我认为这应该可以使用。

您可以像这样手动传递字典（以`Context`=`Show`为例）：

```
{-# LANGUAGE ScopedTypeVariables, TypeFamilies, ExistentialQuantification #-}

data ShowDict a = Show a => ShowDict

class Class a where
  data Associated a :: * -> *

  getShow :: ShowDict (Associated a b)

-- Convenience function
getShowFor :: Class a => Associated a b -> ShowDict (Associated a b)
getShowFor _ = getShow

showAssociated :: Class a => Associated a b -> String
showAssociated a = 
  case getShowFor a of
    ShowDict -> -- Show (Associated a b) is made available by this pattern match 
      show a

instance Class Int where
  data Associated Int b = Foo deriving Show

  getShow = ShowDict

main = print $ showAssociated Foo 
```

这有点类似于您提出的功能复制，但优点是：

*   避免重复（`Context`的方法签名）
*   在上下文中使用 `Show Baz` 比仅具有显示 `Baz` 的函数更强大，因为它允许您调用需要 `Show Baz` 的（库）函数，或使用隐含的实例，如 `Show [Baz] `:

```
showAssociateds :: forall a b. Class a => [Associated a b] -> String
showAssociateds as = 
  case getShow :: ShowDict (Associated a b) of
    ShowDict ->
      show as 
```

主要缺点是使用`getShow`总是需要明确的类型签名（类似的函数`getShowFor`可以缓解这种情况）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T18:54:56.597

一种惯用的方法是创建一个`Context1`类。假设我们有

```
class Context a where
    func :: a -> String 
```

我们可以概括为：

```
class Context1 f where
    func1 :: Context a => f a -> String 
```

`Associated`然后为所有s提供一个实例：

```
instance (Context1 (Associated a), Context b) => Context (Associated a b) where
    func = func1 
```

现在很容易编写你想要的类

```
instance Context1 (Associated a) => Class a where
    data Associated a :: * -> * 
```

并且您可以确定给定的`Context1 (Associated a)`上下文确保了所需的`forall b. Context b => Context (Associated a b)`上下文。

在 Hackage 上有很多这种模式的例子，比如[Show1](https://hackage.haskell.org/package/transformers-0.4.3.0/docs/Data-Functor-Classes.html#t:Show1)、[Foldable1](https://hackage.haskell.org/package/semigroupoids-5.0.0.3/docs/Data-Semigroup-Foldable.html#t:Foldable1)和[Traversable1](https://hackage.haskell.org/package/lens-4.13/docs/Control-Lens-Traversal.html#t:Traversable1)。**

# android - BroadcastReceiver ClassNotFound 异常

> ID：11258537
> 
> 赞同：3
> 
> 时间：2012-06-29T08:35:44.970
> 
> 标签：android, serialization, android-intent, broadcastreceiver, alarmmanager

我有一个应用程序，它使用 AlarmManager 为用户通知安排警报。我将 Alarm 对象的一个​​实例传递给 AlarmManager 使用的 PendingIntent：

```
public void scheduleAlarms(List<Alarm> alarms)
{
    for (Alarm alarm : alarms)
    {           
        Log.d(Constants.EVERY_OTHER_ALARM_APP_LOG_TAG, 
                "Setting alarm for: " + new Date(alarm.getTime()).toString() + 
                " with an interval of " + 
                IntervalEnumStringProvider.getIntervalStringInGivenFormat(
                        alarm.getInterval(), 
                        true));
        PendingIntent alarmScheduledPending = createPendingIntent(alarm);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, 
                alarm.getTime(), 
                (alarm.getInterval() * Constants.ONE_SECOND_IN_MILLIS), 
                alarmScheduledPending);
    }
}

private PendingIntent createPendingIntent(Alarm alarm)
{
    alarmBroadcastReceiverIntent = new Intent(context, AlarmBroadcastReceiver.class);
    alarmBroadcastReceiverIntent.putExtra(Constants.SCHEDULED_ALARM_TAG, alarm);
    return PendingIntent.getBroadcast(context, 
                alarm.getIdForPendingIntent(), 
                alarmBroadcastReceiverIntent, 
                PendingIntent.FLAG_UPDATE_CURRENT);
} 
```

当闹钟时间发生时，我的`AlarmBroadcastReceiver`班级正确接收到广播，但 LogCat 警告说没有找到闹钟班级：

```
06-29 08:30:00.084: W/Intent(66): Failure filling in extras
06-29 08:30:00.084: W/Intent(66): java.lang.RuntimeException: Parcelable encounteredClassNotFoundException reading a Serializable object (name = com.fastplanet.everyotheralarmapp.alarm.Alarm)
06-29 08:30:00.084: W/Intent(66):   at android.os.Parcel.readSerializable(Parcel.java:1890)
06-29 08:30:00.084: W/Intent(66):   at android.os.Parcel.readValue(Parcel.java:1761)
06-29 08:30:00.084: W/Intent(66):   at android.os.Parcel.readMapInternal(Parcel.java:1947)
06-29 08:30:00.084: W/Intent(66):   at android.os.Bundle.unparcel(Bundle.java:169)
06-29 08:30:00.084: W/Intent(66):   at android.os.Bundle.putAll(Bundle.java:242)
06-29 08:30:00.084: W/Intent(66):   at android.content.Intent.fillIn(Intent.java:4530)
06-29 08:30:00.084: W/Intent(66):   at com.android.server.am.PendingIntentRecord.send(PendingIntentRecord.java:185)
06-29 08:30:00.084: W/Intent(66):   at android.app.PendingIntent.send(PendingIntent.java:400)
06-29 08:30:00.084: W/Intent(66):   at com.android.server.AlarmManagerService$AlarmThread.run(AlarmManagerService.java:636)
06-29 08:30:00.084: W/Intent(66): Caused by: java.lang.ClassNotFoundException: com.fastplanet.everyotheralarmapp.alarm.Alarm
06-29 08:30:00.084: W/Intent(66):   at java.lang.Class.classForName(Native Method)
06-29 08:30:00.084: W/Intent(66):   at java.lang.Class.forName(Class.java:237)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:2595)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1848)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:852)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2006)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:956)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2289)
06-29 08:30:00.084: W/Intent(66):   at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2243)
06-29 08:30:00.084: W/Intent(66):   at android.os.Parcel.readSerializable(Parcel.java:1884)
06-29 08:30:00.084: W/Intent(66):   ... 8 more
06-29 08:30:00.084: W/Intent(66): Caused by: java.lang.NoClassDefFoundError: com.fastplanet.everyotheralarmapp.alarm.Alarm
06-29 08:30:00.084: W/Intent(66):   ... 18 more
06-29 08:30:00.084: W/Intent(66): Caused by: java.lang.ClassNotFoundException: com.fastplanet.everyotheralarmapp.alarm.Alarm in loader dalvik.system.PathClassLoader@4001ad90
06-29 08:30:00.084: W/Intent(66):   at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
06-29 08:30:00.084: W/Intent(66):   at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
06-29 08:30:00.084: W/Intent(66):   at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
06-29 08:30:00.084: W/Intent(66):   ... 18 more 
```

但是，BroadcastReceiver 成功地从接收到的意图中解包警报对象，并且应用程序按预期工作。

这是怎么回事？

更新 - 添加清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.fastplanet.everyotheralarmapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="4" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

    <application
        android:name=".data.TheEveryOtherAlarmAppApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver android:name="com.fastplanet.everyotheralarmapp.alarm.AlarmBroadcastReceiver" >
        </receiver>
        <receiver android:name=".alarm.BootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.QUICKBOOT_POWERON" />
            </intent-filter>
        </receiver>

        <activity android:name=".TheEveryOtherAlarmAppActivity" 
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".NewAlarmActivity"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Dialog" >
        </activity>
        <activity
            android:name=".About"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Dialog" >
        </activity>
        <activity
            android:name=".AlarmAlertDialogActivity"
            android:excludeFromRecents="true"
            android:noHistory="true"
            android:taskAffinity=""
            android:theme="@android:style/Theme.NoDisplay" >
        </activity>
        <activity
            android:name=".AlarmDetailsActivity" 
            android:screenOrientation="portrait" >
        </activity>
    </application>
</manifest> 
```

更新 2 - 添加警报类

```
public class Alarm implements Serializable
{

    private static final long serialVersionUID = -5410846652701834321L;
    private int id = 0;
    private String name = "";
    private long interval = 0;
    private long time;
    private String description;

    public Alarm(String name, long time, long interval, String description, int id)
    {
        this.name = name;
        this.time = time;
        this.interval = interval;
        this.description = description;
        this.id = id;
    }

    public void setInterval(long newAlarmInterval)
    {
        this.interval = newAlarmInterval;
    }

    public long getInterval()
    {
        return interval;
    }

    public void setTime(long time)
    {
        this.time = time;
    }

    public long getTime()
    {
        return time;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    public String getName()
    {
        return name;
    }

    public void setDescription(String newAlarmDescription)
    {
        this.description = newAlarmDescription;
    }

    public String getDescription()
    {
        return description;
    }

    public int getIdForPendingIntent()
    {
        return id;
    }

    @Override
    public String toString()
    {
        return "name: " + name + ", time: " 
            + new Date(time).toLocaleString()
            + ", interval: "
            + IntervalEnumStringProvider.getIntervalStringInGivenFormat(interval, true)
            + ", description: " + description
            + ", id: " + id;
    }

    @Override
    public Alarm clone() throws CloneNotSupportedException
    {
        return new Alarm(new String(name), time, interval, new String(description), id);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-12T02:15:15.970

我在这个问题上苦苦挣扎。解决方案是（感谢mazur [here](https://code.google.com/p/android/issues/detail?id=6822#c5)）：

这是安卓的缺陷。我的目标 API 是 19，最小 API 是 11。缺陷在这里输入：“ClassNotFoundException when using custom Parcelable” [https://code.google.com/p/android/issues/detail?id=6822](https://code.google.com/p/android/issues/detail?id=6822)

注册警报时：

```
Bundle bundle = new Bundle();
bundle.putParcelable("com.foo.alarm", alert);
mNotificationReceiverIntent.putExtra("com.foo.alarm",bundle);
mNotificationReceiverPendingIntent = PendingIntent.getBroadcast(this,
        0, mNotificationReceiverIntent, 0); 
```

接到报警时，

```
 Bundle oldBundle = intent.getBundleExtra("com.foo.alarm");      
    Alert alert = oldBundle.getParcelable("com.foo.alarm"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:41:09.083

作为

```
ClassNotFoundException: com.fastplanet.everyotheralarmapp.alarm.Alarm in loader

<receiver android:name=".alarm.BootReceiver" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T23:14:10.107

我有同样的问题，Android 2.3。

在我进行以下更改后，现在将可序列化的额外内容传递给 BroadcastReceiver 对我有用：

*   为 PendingIntent 创建一个带有 Action 字符串的 Intent。
*   在 AndroidManifest 中静态注册我的 BroadcastReceiver。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:43:32.610

使用 ADT17，我遇到了同样的问题，但 BroadcastReceiver 无法启动。我尝试了关于 SO 讨论的内容：尝试更改 Proguard 配置，但结果证明[Proguard 在默认情况下处于禁用状态](http://tools.android.com/recent/proguardimprovements)。试图实施`Parcelable`，但问题仍然存在。**唯一可行的方法是将 BroadCastReceiver 放入待接收对象的类所在的同一包中。**请注意，正如 OP 所描述的那样，异常仍然作为警告抛出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T08:55:43.843

如果您想在 Intent 中将警报对象作为 EXTRA 传递，那么您的警报类需要实现 Parcelable，而不是 Serializable。

**编辑：**

似乎这不是真的。看起来您可以使用可序列化。但是，OP 无法使其正常工作，并且在 SE 上还有其他帖子，人们在使其正常工作时遇到了问题。

# php - hmvc 代码点火器

> ID：11258539
> 
> 赞同：3
> 
> 时间：2012-06-29T08:35:54.997
> 
> 标签：php, model-view-controller, codeigniter, module, hmvc

我已经学习了 codeigniter 的基础知识，现在正在学习模块。

**我的问题：** 我在 modules 文件夹中创建了两个文件夹，`first_module`并且`second_module`.

在`first_module`控制器内部我的代码：

```
<?php
    class First_module extends MX_Controller {
    public function index()
    {
        $this->load->view('first_module_view');            
    }
}
?> 
```

`first_module_view`页面代码：

```
<html>
<body>
    <h1> hey this is first module </h1>
    <?php 
        echo Modules::run('second_module/second_module');
    ?>
</body>
</html> 
```

`second_module`控制器页面：

```
<?php
class Second_module extends MX_Controller {
    public function index()
    {
        $this->load->view('second_module_view');
    }
}
?> 
```

`second_module_view`页：

```
<html>
<body>
    <h1> hey this is second module </h1>
</body>
</html> 
```

我正在尝试`first_module`使用 second_module 的控制器在视图中部分查看第二个模块视图，但这不起作用。
单独两个代码都可以正常工作，但`Modules::run()`似乎不起作用。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:11:29.240

我知道您已经找到了解决方案，但这并不能回答您提出的确切问题，但是，我通常会这样做：

```
 <?php
            class First_module extends MX_Controller {
            public function index()
            {
                 $content = array();

                //send content array to 2nd view and return everything as a string to be added as content to the first view

               $content["second_view"] = $this->load->view('second_module_view',$content,true);

               $this->load->view('first_module_view',$content);            
            }
        }
        ?> 
```

然后第一个模块视图变为：

```
<html>
<body>
    <h1> hey this is first module </h1>
    <?php 
        echo $second_view;
    ?>
</body> 
```

我没有专门使用模块，但是这就是我使用控制器和视图的方式。我会尽我所能限制视图内对模型和模块的调用。只需传入模型中控制器中生成的变量即可。

# java - 我正在我的所有会话类上实现 Serializable，因此我可以使用负载均衡器进行一些农场集群。 我已经控制了集群并且它工作正常。但是，我遇到了一个似乎我无法解决的错误。 每当我在 index.jsp 上输入时，都会收到此错误： Mensaje: javax.servlet. 问问题 问问题 2012-06-29T08:36:06.683 664 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在我的所有会话类上实现 Serializable，因此我可以使用负载均衡器进行一些农场集群。 我已经控制了集群并且它工作正常。但是，我遇到了一个似乎我无法解决的错误。 每当我在 index.jsp 上输入时，都会收到此错误： Mensaje: javax.servlet.ServletException: java.lang.Exception: javax.faces.FacesException: Problem in renderResponse: /WEB-INF/inc-content/content.jspx @5,73 <f:loadbundle basename="#{idioma.messageBundleSinProp}">/WEB-INF/inc-content/content.jspx @5,73 basename="#{idioma.messageBundleSinProp}" setAttribute: Atributo no serializable Tipo Error: class javax.servlet.ServletException Excepcion: javax.servlet.ServletException: java.lang.Exception: javax.faces.FacesException: Problem in renderResponse: /WEB-INF/inc-content/content.jspx @5,73 <f:loadbundle basename="#{idioma.messageBundleSinProp}">/WEB-INF/inc-content/content.jspx @5,73 basename="#{idioma.messageBundleSinProp}" setAttribute: Atributo no serializable Codigo de Estado: 500 Nombre Servlet: jsp 尽管是西班牙语，但它基本上说该属性不可序列化。似乎我错过了一些东西，因为它idioma.messageBundleSinProp是一个吸气剂，而不是一个二传手： public String getMessageBundle() { if(idiomaSeleccionado!=null) return(webUtil.getPropertiesValue(idiomaSeleccionado, "LanguageChances.properties")); else return(webUtil.getPropertiesValue(idiomaSeleccionadoDefecto, "LanguageChances.properties")); } public String getMessageBundleSinProp() { //String propertieSeleccionado=getMessageBundle(); return(getMessageBundle().substring(0,getMessageBundle().indexOf("."))); } 有什么问题？ 您可以尝试将gwt-java-math项目添加为依赖项。正如他们的维基上所说， 该库正在合并到 GWT 中！目前它在 GWT 主干上。 它可能在即将发布的 v2.5 中可用。 javajspjsfjakarta-eeicefaces-1.8 4 1 回答 1 This answer is useful 4 实际上 loadBundle 组件是从 JSF 2.0 开始的。 源代码 JSF 1.2 源代码 JSF 2.0 由于您也没有使用 Icefaces 2.0。你也不能利用这个。 冰面JIRA 所以我能想到的唯一方法是创建自己的 messageBean 并检索消息。 你可以这样做： public class MessageBean implements Serializable { transient private static ResourceBundle bundle; transient private static Map map; protected static ClassLoader getCurrentClassLoader(Object defaultObject) { ClassLoader loader = Thread.currentThread().getContextClassLoader(); if (loader == null) { loader = defaultObject.getClass().getClassLoader(); } return loader; } MessageBean() { bundle = ResourceBundle.getBundle("LanguageChances", java.util.Locale.getDefault(), getCurrentClassLoader(null)); map = new HashMap<string, object="">(); Enumeration <string>keys = bundle.getKeys(); while (keys.hasMoreElements()) { String key = keys.nextElement(); Object value = bundle.getObject(key); map.put(key, value); } } public Map getMap(){ return map; } } 并在您的页面上使用类似的内容来检索消息： <c:foreach items="#{messageBean.map}" var="entry"></c:foreach>于 2012-07-02T17:23:55.047 回答 Related 1 hbase - OpenTSDB/HBase fails while uploading large amounts of data 0 android - 如何从本地主机显示pdf 1 c# - C# 背后的 iframe 样式代码 0 winapi - 单选按钮和复选框重绘 1 java - 具有相同操作名称和输入类型的 WSDL 会产生不正确的客户端存根？ 2 ruby-on-rails - Spring will not start 1 c# - 如何在 asp.net 图像控件上绘制几何形状以创建图像映射？ 1 android - android action bar sherlock 在拆分视图中显示操作文本和图标 1 apache - htaccess redirect /?area=0 to / 2 javascript - Toggle image display using JavaScript Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string></string,></f:loadbundle></f:loadbundle>

> ID：11258541
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, jsp, jsf, jakarta-ee, icefaces-1.8

我正在我的所有会话类上实现 Serializable，因此我可以使用负载均衡器进行一些农场集群。

我已经控制了集群并且它工作正常。但是，我遇到了一个似乎我无法解决的错误。

每当我在 index.jsp 上输入时，都会收到此错误：

```
Mensaje: javax.servlet.ServletException: java.lang.Exception: javax.faces.FacesException: Problem in renderResponse: /WEB-INF/inc-content/content.jspx @5,73 <f:loadBundle basename="#{idioma.messageBundleSinProp}"> /WEB-INF/inc-content/content.jspx @5,73 basename="#{idioma.messageBundleSinProp}" setAttribute: Atributo no serializable 
Tipo Error: class javax.servlet.ServletException 
Excepcion: javax.servlet.ServletException: java.lang.Exception: javax.faces.FacesException: Problem in renderResponse: /WEB-INF/inc-content/content.jspx @5,73 <f:loadBundle basename="#{idioma.messageBundleSinProp}"> /WEB-INF/inc-content/content.jspx @5,73 basename="#{idioma.messageBundleSinProp}" setAttribute: Atributo no serializable 
Codigo de Estado: 500 
Nombre Servlet: jsp 
```

尽管是西班牙语，但它基本上说该属性不可序列化。似乎我错过了一些东西，因为它`idioma.messageBundleSinProp`是一个吸气剂，而不是一个二传手：

```
public String getMessageBundle()
{
    if(idiomaSeleccionado!=null)
        return(webUtil.getPropertiesValue(idiomaSeleccionado, "LanguageChances.properties"));
    else
        return(webUtil.getPropertiesValue(idiomaSeleccionadoDefecto, "LanguageChances.properties"));
}

public String getMessageBundleSinProp()
{
    //String propertieSeleccionado=getMessageBundle();
    return(getMessageBundle().substring(0,getMessageBundle().indexOf(".")));
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:23:55.047

实际上 loadBundle 组件是从 JSF 2.0 开始的。

[源代码 JSF 1.2](http://grepcode.com/file/repository.jboss.org/maven2/javax.faces/jsf-impl/1.2_04-p02/com/sun/faces/taglib/jsf_core/LoadBundleTag.java)

[源代码 JSF 2.0](http://www.docjar.com/html/api/com/sun/faces/taglib/jsf_core/LoadBundleTag.java.html)

由于您也没有使用 Icefaces 2.0。你也不能利用这个。 [冰面JIRA](http://jira.icesoft.org/browse/ICE-5268)

所以我能想到的唯一方法是创建自己的 messageBean 并检索消息。

你可以这样做：

```
public class MessageBean implements Serializable
{

   transient private static ResourceBundle bundle;
   transient private static Map map;

protected static ClassLoader getCurrentClassLoader(Object defaultObject)
{
  ClassLoader loader = Thread.currentThread().getContextClassLoader();
  if (loader == null)
  {
     loader = defaultObject.getClass().getClassLoader();
  }
  return loader;
}

MessageBean()
{
  bundle = ResourceBundle.getBundle("LanguageChances", java.util.Locale.getDefault(), getCurrentClassLoader(null));
  map = new HashMap<String, Object>();
  Enumeration<String> keys = bundle.getKeys();
  while (keys.hasMoreElements()) {
      String key = keys.nextElement();
      Object value = bundle.getObject(key);
     map.put(key, value);
  }
}

public Map getMap(){
  return map;
}
} 
```

并在您的页面上使用类似的内容来检索消息：

```
<c:forEach items="#{messageBean.map}" var="entry">
  <h:outputText value="#{entry.key}"/>
</c:forEach> 
```

# r - 使用 if 语句引用不在工作区中的变量

> ID：11258547
> 
> 赞同：0
> 
> 时间：2012-06-29T08:36:37.250
> 
> 标签：r

我想创建一个可以处理可能尚未创建或尚未创建的对象的函数。

在这个函数的开头，我想要一个快速的“if”语句来声明某个变量是否已经创建。在这种情况下，时间戳。

```
TS<-date()

fun<-function(){
if(TS=="")
{print("No Time Stamp Info")}
else
{print("Time Stamp created at"); TS}
} 
```

或者

```
TS<-date()

fun<-function(){
if(is.character(TS))
{print("Time Stamp created at"); TS}
else
{print("No Time Stamp Info")}
} 
```

但是当然，如​​果我们删除时间戳并只拥有以下内容而不首先为 TS 分配任何值：

```
#TS<-date()

fun<-function(){
if(TS=="")
{print("No Time Stamp Info")}
else
{print("Time Stamp created at"); TS}
} 
```

比我抛出一个错误，因为 TS 不存在。我想找到一种方法，如果 R 工作区中没有变量“TS”，我会得到“No Time Stamp Info”，而不是错误

反正有没有正确设置一个可以做到这一点的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:43:36.000

关于什么：

```
if (exists("TS")) ... 
```

`TRUE`如果`TS`存在，这将返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:42:15.323

也许包括

```
if("TS" %in% ls()) 
```

看是否`TS`先定义。

如果`TS`只在 中定义`.GlobalEnv`，那么您需要包括

```
if("TS" %in% ls(envir = .GlobalEnv)) 
```

相反，可能会`envir`根据可能创建“TS”的环境更改参数。

# ios - 了解 PDF 运算符 - 适用于 iOS 应用

> ID：11258551
> 
> 赞同：2
> 
> 时间：2012-06-29T08:36:53.797
> 
> 标签：ios, pdf

我的任务是为我们公司创建一个 pdf 阅读器应用程序。经过一些研究，我对 PDF 中的不同运算符感到困惑。以下是我想澄清的几件事：

*   运算符用作每条线的`Tm`起点。（我的理解正确吗？）
*   如果`Tm`运算符是每一行的起点，我如何解析*仅*在指定范围内显示的文本`Tm`？例如：

    ```
     BT
        0 0 1 rg
        /Ti 12 Tf
        1 0 0 1 100 100 Tm
        0 0 Td
        (The quick brown fox ) Tj 0 −13 Td
        (ate the lazy mouse.) Tj
     ET
     //I only want to get the Tj and TJ string being positioned by the Tm 
    ```

*   我知道每 1000 个单位的字形高度和宽度相当于 1 个单位的文本空间。因此，如果字形宽度为 2000，高度为 1060，这是否意味着它的“真实”宽度和高度分别为 2 和 1.06？

现在我知道其中一些问题听起来非常愚蠢，但我真的没有太多时间研究。因此，如果有人可以帮助我理解这一点，那将不胜感激。

**注意**：pdf 阅读器应用程序必须包含搜索和突出显示功能、文本选择、注释、书签等。几乎可以在当今几乎所有可用的阅读器中找到所有基本内容。我可能会为此使用第三方库来让我的生活更轻松，但我最大的问题是文本选择功能。所以我真的需要明白这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T09:28:28.870

您需要熟悉[PDF 规范](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，附件 A 包含所有运算符的摘要，以及指向有关参数的更详细文档的链接，因此这可能是一个很好的起点。

`Tm`算子不一定要设置每一行的起点，一般是设置文本矩阵，就Quartz2D而言基本相当于a `CGAffineTransform`。要移动到下一行，文档还可以使用、`Td`或运算符。PDF 文档不一定按照屏幕上显示的顺序绘制文本，它们可以在页面上自由移动，并以它们认为合适的任何顺序放置字形。PDF 并没有真正的“线”概念，您必须自己从字形的位置推断出那些（这对于下标/上标之类的东西可能很棘手）。`TD``"``T*`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T15:56:10.143

嗯……那么，你的任务是一项非常重要的工作。你应该告诉你的他们 PDF-1.7 规范是一个大约 800 页的密集文档......

是的，为此使用第三方库是一个非常好的主意。一个人不可能实现一个符合标准的 PDF 阅读器，它可以真实地显示所有可能嵌入在 PDF-1.7（ISO 规范）文件中的图形对象、字体、颜色、透明度、矢量图形、图像......。

您需要注意的前几件事：

*   PDF 建立在与 PostScript 相同的图形模型上。（但 PostScript 是一种图灵完备的编程语言，而 PDF 已经——故意！——剥夺了所有编程语言的能力。）
*   与 PostScript 一样，PDF 图形描述“语言”使用*堆栈*，并且它使用倒置的“波兰符号”来表示表达式：运算符在最后，运算符的参数在前。要表达*“1 + 2”*，您可以在 PostScript 中写成*“1 2 add” 。*
*   PDF 几乎不是“基于行的”。因此，关于您的问题`Tm`：它不是新行的起点，而是表达式的结尾`1 0 0 1 100 100`：*“前 6 个数字表示文本行矩阵的设置，现在设置为命名值”*。`Tm`宁愿成为一行的***结尾***，也不愿成为一行的开始！

# python - 使用 json 的 python 程序运行不正常

> ID：11258552
> 
> 赞同：2
> 
> 时间：2012-06-29T08:37:04.940
> 
> 标签：python, json

我正在尝试在 python 上运行这个简单的程序：

```
import json
json.loads('["foo", {"bar":["baz", null, 1.0, 2]}]') 
```

但它给出了这样的错误：

```
Traceback (most recent call last):
  File "jsonURL.py", line 2, in <module>
    json.loads('["foo", {"bar":["baz", null, 1.0, 2]}]')
AttributeError: 'module' object has no attribute 'loads' 
```

我知道程序是正确的我在这里缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:43:07.383

你的路径中有另一个名为 json.py 的 python 文件吗？还要看看你的 json 模块方法`dir(json)`。

# sql - 使用可能的多个映射连接两个表的查询

> ID：11258553
> 
> 赞同：0
> 
> 时间：2012-06-29T08:37:26.027
> 
> 标签：sql

第一表

```
srno  wono   Actual_Start_Date  Actual_End_Date
1      31     2012-06-02         2012-06-05
2      32     2012-06-05         2012-06-22
3      33     2012-06-11         2012-06-23
4      34     2012-06-23         2012-06-30
5      A-2    2012-06-24         2012-06-25
6      BU     2012-06-24         2012-06-26
7      40     2012-06-25         2012-06-27 
```

second_table

```
srno  wono    Base_start_date     Base_end_date    uploadhistoryid
1     31       2012-06-05            2012-06-05           1
2     32       2012-06-11            2012-06-12           2
3     32       2012-06-15            2012-06-17           3
4     32       2012-06-18            2012-06-20           4
5     33       2012-06-22            2012-06-25           5
5     33       2012-06-23            2012-06-25           5 
```

结果必填

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[Reports_Subanalysis]
(
@WONo VARCHAR(20)
)
AS
BEGIN

SELECT   
          'SAT' AS stage,
                   s.Base_start_date   AS start_date,
                   s.Base_end_date   AS  end_date,
                   f.Actual_Start_Date   AS Actual_Start_Date,
                   f.Actual_end_Date   AS Actual_End_Date
                   FROM First_table f,
                   second_table B
                   WHERE A.wOno=B.nOno
                   AND f.uploadhistoryid in (SELECT min(uploadhistoryid) FROM second_table C WHERE f.wono = C.wono)
                   AND b.wono=@WONo

END 
```

当我通过'32'

结果

```
stage    start_date     end_date      Actual_Start_Date   Actual_End_Date

SAT      2012-06-11     2012-06-12      2012-06-05          2012-06-05 
```

当我传递像'BU'这样的非匹配值时，我怎样才能得到这样的结果

```
stage    start_date     end_date      Actual_Start_Date   Actual_End_Date
SAT       NULL           NULL         2012-06-24           2012-06-26 
```

我需要在我的日常生活中进行哪些修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:45:26.227

您将需要使用左连接加入第二个表。也使用 **-f** .wono=@WONo

```
SELECT TOP 1             
 'SAT' AS stage,                    
  s.Base_start_date   AS start_date,                    
  s.Base_end_date   AS  end_date,                    
  f.Actual_Start_Date   AS Actual_Start_Date,                    
  f.Actual_end_Date   AS Actual_End_Date                    
FROM First_table f                    
LEFT JOIN second_table s ON f.wOno=s.nOno
WHERE
f.wono=@WONo 
ORDER BY s.uploadhistoryid ASC 
```

# java - JAXBvalidation 错误：带有抽象 complexType 的“无效索引 -1”

> ID：11258554
> 
> 赞同：0
> 
> 时间：2012-06-29T08:37:31.977
> 
> 标签：java, validation, wsdl, jaxb

在 JAXB Web 服务上启用传入 XML 验证后，当我发送请求时收到错误消息`Invalid index -1`。

我已经检查过何时发生此错误。我正在发送对象，其中一个字段为抽象类型。当此字段为空时，验证通过。发送此对象时，无论设置什么字段，都会发生错误...

抽象类型的定义：

```
<xs:complexType abstract="true" name="Customer">
<xs:sequence>
<xs:element minOccurs="0" name="id" type="xs:long"/>
<xs:element minOccurs="0" name="address" type="tns:Address"/>
<xs:element minOccurs="0" name="nip" type="xs:string"/>
<xs:element minOccurs="0" name="type" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

具体类型的定义：

```
<xs:complexType name="PersonalCustomer">
<xs:complexContent>
<xs:extension base="tns:Customer">
<xs:sequence>
<xs:element minOccurs="0" name="PESEL" type="xs:string"/>
<xs:element minOccurs="0" name="firstName" type="xs:string"/>
<xs:element minOccurs="0" name="surname" type="xs:string"/>
</xs:sequence>
</xs:extension>
</xs:complexContent>
</xs:complexType> 
```

在 CXF 启动时生成 WSDL 的类定义（提取）：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Customer", namespace = "http://dto.sample.pl/")
@XmlSeeAlso({ PersonalCustomer.class,
        CompanyCustomer.class })
public abstract class Customer implements Serializable {

    /** The Constant serialVersionUID. */
    private static final long serialVersionUID = 1L;

    private Long id;

    private Address address = new Address();

    private String nip;

    private String type;
}   

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "PersonalCustomer", namespace = "http://dto.sample.pl/")
public class PersonalCustomer extends Customer {

    /** The Constant serialVersionUID. */
    private static final long serialVersionUID = 1L;

    /** The PESEL. */
    private String PESEL;

    /** The first name. */
    private String firstName;

    /** The surname. */
    private String surname;
} 
```

该错误来自解析 XML 中的 URI 时引发的异常：

```
Caused by: java.lang.IllegalArgumentException: Invalid index -1; current element has only 1 attributes
 at com.ctc.wstx.sr.AttributeCollector.throwIndex(AttributeCollector.java:457)[88:woodstox-core-asl:4.0.8]
 at com.ctc.wstx.sr.NsAttributeCollector.getURI(NsAttributeCollector.java:305)[88:woodstox-core-asl:4.0.8]
 at com.ctc.wstx.sr.BasicStreamReader.getAttributeNamespace(BasicStreamReader.java:585)[88:woodstox-core-asl:4.0.8]
 at org.apache.cxf.staxutils.DepthXMLStreamReader.getAttributeNamespace(DepthXMLStreamReader.java:63)[138:org.apache.cxf.bundle:2.3.3.fuse-01-09]
 at javax.xml.stream.util.StreamReaderDelegate.getAttributeNamespace(StreamReaderDelegate.java:112)[67:org.apache.servicemix.specs.stax-api-1.0:1.7.0]
 at org.apache.cxf.jaxb.JAXBEncoderDecoder$AddXSITypeStreamReader.getAttributeNamespace(JAXBEncoderDecoder.java:123)[138:org.apache.cxf.bundle:2.3.3.fuse-01-09]
 at org.apache.cxf.staxutils.DepthXMLStreamReader.getAttributeNamespace(DepthXMLStreamReader.java:63)[138:org.apache.cxf.bundle:2.3.3.fuse-01-09]
 at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector$1.getURI(StAXStreamConnector.java:254)[68:org.apache.servicemix.bundles.jaxb-impl:2.2.1.1_1]
 at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.fillXMLAttribute(ValidatorHandlerImpl.java:784)[:1.6.0_29]
 at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.fillXMLAttributes(ValidatorHandlerImpl.java:764)[:1.6.0_29]
 at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.startElement(ValidatorHandlerImpl.java:546)[:1.6.0_29]
 at com.sun.xml.bind.v2.runtime.unmarshaller.ValidatingUnmarshaller.startElement(ValidatingUnmarshaller.java:96)[68:org.apache.servicemix.bundles.jaxb-impl:2.2.1.1_1]
 at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleStartElement(StAXStreamConnector.java:242)[68:org.apache.servicemix.bundles.jaxb-impl:2.2.1.1_1] 
```

这个定义有问题吗？究竟是什么导致了这种神秘消息的验证错误？

# mysql - 如何修复`information_schema`.`TABLES`？

> ID：11258561
> 
> 赞同：1
> 
> 时间：2012-06-29T08:38:28.560
> 
> 标签：mysql, information-schema, repair

我正在尝试列出`information_schema`. `TABLES`像这样：

```
SELECT * FROM information_schema.`TABLES` LIMIT 10 
```

但它给了我一个错误：

```
ERROR 2013 (HY000): Lost connection to MySQL server during query 
```

然后我认为`REPAIR TABLE TABLES`应该解决它，但它给了我：

```
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    396
Current database: information_schema

ERROR 1044 (42000): Access denied for user 'root'@'localhost' to database 'information_schema' 
```

之前有人遇到过这个问题，或者知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:59:41.077

查看您的 my.conf 文件，看看提高以下值是否可以为您解决此问题。

```
interactive_timeout
wait_timeout 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:59:57.273

我建议您尝试使用 Grant 在 MySQL 上修复您的用户表。通常当我遇到权限访问问题时，我就是这样解决它们的。另外，请查看以下[错误](http://bugs.mysql.com/bug.php?id=45959)-

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T10:05:06.097

像这样有两个条目（重新启动服务器后）`error.log`：

```
InnoDB: Unable to find the AUTOINC column role_id in the InnoDB table database/table. 
```

放下两张桌子后，一切正常。

# c# - 如何将公司名称放入命名空间？

> ID：11258563
> 
> 赞同：0
> 
> 时间：2012-06-29T08:38:37.120
> 
> 标签：c#, .net, visual-studio-2010, namespaces

我的环境：

*   微软 Visual Studio 2010 C#

我已经阅读了很多关于如何组织命名空间的文章和评论。

[http://msdn.microsoft.com/en-us/library/ms229026](http://msdn.microsoft.com/en-us/library/ms229026)

所以我的问题很简单。如何在我的命名空间中自动获取公司和项目名称？

如果我在我的项目中创建子文件夹，那么我会得到以下模式：

```
<Project>.<Folder>.<Subfolder>.<..> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:50:39.160

*   **解决方案1：**

    如果您转到您的`Properties`窗口`Project`，您可以设置`Default namespace`（包括公司名称）以及选项卡`Assembly name`中的`Application`。下面是这个截图：

![在此处输入图像描述](../Images/a568c013180e29bee190b38ad23716a8.png)

现在，在设置了默认命名空间之后，每次你在这个项目中添加一个新的类，它都会默认获取上面设置的命名空间。

*   **解决方案2：**

另一种解决方案是，每次向 VS 解决方案添加新项目时，在**`Add New Project`**模板对话框中，将新项目**`Name`**设为**`CompanyName.ProjectName`**. 这样，您的新项目`Default namespace`将`Company Name`始终包含 (CompanyName.ProjectName)，如下面的“添加新项目”对话框屏幕截图所示： ![在此处输入图像描述](../Images/a9f220193c0a5c4cc5383a37780942ca.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:42:01.503

*默认情况下，* VS 将使用您的文件夹结构作为命名空间。
但是你总是可以简单地编辑代码来改变你的命名空间。

在**项目属性的应用程序**下，您将找到**默认命名空间**的设置，该设置用作所有其他（基于文件夹的）命名空间的根。这是您通常输入公司名称的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:45:04.123

您可以使用 Pravian 的方式获得新的解决方案。但是对于现有项目，您应该转到`Application`选项卡中的项目属性进行更改`Default namespace:`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T08:44:38.650

您不需要像@Pravin Pawar 所说的那样添加 CompanyName 作为项目的名称。如果你问我，我不会那样添加。

**项目属性**下有一个名为**DefaultNamespace**（应用程序选项卡）的选项，您可以在其中使用公司名称扩展命名空间。

我对大多数项目的偏好是使用*CompanyName.Project*作为默认命名空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T08:40:44.470

当您创建一个新项目时，您指定项目的名称，如`CompanyName.ProjectName`& 然后当您将新项目添加到相同的解决方案时，它们遵循 CompanyName.ProjectName 命名空间，如

```
CompanyName.ProjectName.BAL
CompanyName.ProjectName.DAL
CompanyName.ProjectName.Client 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T08:44:48.470

您可以在项目的属性中指定默认的根命名空间 - 在 Visual Studio 中右键单击项目文件，单击属性，然后在“应用程序”选项卡中，您可以设置默认命名空间以包含您的公司名称。

# c# - 将数据从母版页的标签传递到普通网页？

> ID：11258571
> 
> 赞同：0
> 
> 时间：2012-06-29T08:39:16.493
> 
> 标签：c#, asp.net, html

我如何将任何数据或多个值从 html 任何母版页的标记传递到 asp.net 中的任何 Web 表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:53:51.170

有两种方法可以做到这一点。

客户端：

在母版页中放置一个隐藏字段，设置要保存在其中的任何值并使用隐藏字段 id，只要引用了母版页，您就可以在任何页面中获得所需的值。

服务器端：

将值放在任何服务器控件中，（文本框、标签、隐藏）将样式表设置为 display:none（以便控件在表单中不可见），然后使用 C# 的 FindControl 方法可以访问该值。

如果以上答案对您有帮助，请投票给我。

# jquery - jquery函数是如何调用的？

> ID：11258572
> 
> 赞同：0
> 
> 时间：2012-06-29T08:39:20.970
> 
> 标签：jquery, html, css

我是 jquery 的新手，但遇到了一些问题。请任何人都可以告诉我，这是下面代码中的代码块，它正在调用“hideAllMessages”函数。点击（'信息'，'错误'，'警告'，'成功'）

，它正在调用`hideAllMessages`函数，但无法理解哪个是代码块，谁在执行此任务。

**[`FIDDLE`](http://jsfiddle.net/eGeB7/1/)**

由于下一行中没有 javascript 'onclick' 函数。

```
<li><a href="#" class="trigger info-trigger">Info</a></li> 
```

实际上我想在点击（'Info'，'Error'，'Warning'，'Success'）后询问代码流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:45:41.653

首先`hideAllMessages();`，当文档从 jquery 准备好时调用。

然后`showMessage(myMessages[i]);`调用 your 并`hideAllMessages();`再次使用它，因为它在你的`showMessage()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:45:54.310

尝试`Ctrl+F`:-)您似乎忽略了代码的以下部分：

```
$(document).ready(function(){
    alert("ready function called");
    // Initially, hide them all
    hideAllMessages();
    ... 
```

此外，它是从`showMessage`-function 安装的 click-handler 调用的：

```
$('.'+ type +'-trigger').click(function(){
    hideAllMessages();                  
    $('.'+type).animate({top:"0"}, 500);
}); 
```

HTML中不需要有`onclick`属性，通常[安装事件监听](https://developer.mozilla.org/en/DOM/element.addEventListener)器的方式是纯粹的 DOM 任务（[jQuery 方法](http://api.jquery.com/on/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:50:34.247

首先，

jQuery 的工作方式与 javascript 类似。

除非被调用，否则函数不会被“激活”。

查看您的代码，您会发现有一个

```
$(document).ready(function{
    //insert code here
}); 
```

上面的代码将在您的页面加载时从上到下运行。

这段代码运行完毕后，你的 jQuery 将停止运行。

但是你也会意识到你的每个“li”都有一个“触发”功能，它会激活 show-message 功能，显示其各自的消息。

这就是您的代码的工作方式

编辑：

```
$(document).ready(function(){
alert("ready function called");

     // Initially, hide them all
     hideAllMessages();

     // Show message
     for(var i=0;i<myMessages.length;i++)
     {
        showMessage(myMessages[i]);
     } 
```

页面加载时，“showMessage”函数被调用4次。（可以看到，页面加载时有4条弹出消息。）

每次调用 showMessage 函数时，都会发送一个特定的“类型”。其中包括信息、错误等。

```
function showMessage(type)
{
alert("showMessage function called");
$('.'+ type +'-trigger').click(function(){
      hideAllMessages();                  
      $('.'+type).animate({top:"0"}, 500);
});
} 
```

但是，在这些 showMessage 函数中的每一个中，实际上都没有运行，该函数仅在单击“按钮”时运行。

```
$('.info-trigger'.click(function(){ 
```

在上面的示例中，“info”类型被传递到 showMessage 函数中，它将替换“type”，从而生成信息触发器。

单击 info 按钮时，该函数将首先运行 hideMessage 函数，然后运行 ​​animate 函数。

希望这能解释。

# jquery - 查找父表的第一个兄弟 - jquery

> ID：11258577
> 
> 赞同：0
> 
> 时间：2012-06-29T08:39:45.237
> 
> 标签：jquery, jquery-selectors

我有 2 个表，其中有一些带有一些图像按钮的行。我想要做的是，当我单击图像按钮时，显示位于包含单击图像按钮的表格正下方的 div。

```
<table id="Table1">
  <tr>
     <td><input type="image" src="Images/info.jpg" class="infoButton" /></td>
  </tr>
</table>
<div class="info">            
</div>

<table id="Table2">
  <tr>
     <td><input type="image" src="Images/info.jpg" class="infoButton" /></td>
  </tr>
</table>
<div class="info">            
</div> 
```

到目前为止我所做的是：

```
$('.infoButton').click(function () {                          
    $(this).closest('table').siblings().filter(":first").show();
}); 
```

当我单击第一个表内的按钮时，此方法有效。然后它显示正确的 div（表 1 下的那个）。当我单击表 2 中的按钮时，它再次显示相同的 div。我希望它显示表 2 下的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:41:06.540

```
$('.infoButton').click(function () {                          
    $(this).closest('table').next('div').show();
}); 
```

**[演示](http://jsfiddle.net/4XhSA/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T05:50:22.013

推荐使用 jQuery`parents`函数，它增加了可读性并为此目的而构建。

`$('.infoButton').click(function () {
$(this).parents('table').next('div').show(); });`

# javascript - Javascript 使用“新”

> ID：11258583
> 
> 赞同：0
> 
> 时间：2012-06-29T08:40:11.017
> 
> 标签：javascript

> **可能重复：**
> [new MyObject(); 与新的 MyObject；](https://stackoverflow.com/questions/3034941/new-myobject-vs-new-myobject)
> [JavaScript 中的 new Object 和 new Object() 有什么区别](https://stackoverflow.com/questions/9360243/what-is-the-difference-between-new-object-and-new-object-in-javascript)

有什么区别，

```
new ClassName; 
```

和

```
new ClassName(); 
```

?

他们有相同的结果吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T08:41:17.663

没有区别。如果要传递参数，请使用后者。

链接中也需要括号：

```
new ClassName().method(); 
```

创建`new ClassName`对象并调用`method`它。

```
new ClassName.method(); 
```

尝试构造`ClassName.method`对象

请参阅[规范中的相关部分](http://bclary.com/2004/11/07/#a-11.2.2)

# xml - 使用 xmlst 创建 xml 容器

> ID：11258585
> 
> 赞同：0
> 
> 时间：2012-06-29T08:40:15.573
> 
> 标签：xml, ssis, xls, xlsx, xlsm

我正在尝试规范化一段 xml。我在与`ProductID`. 我正在尝试为它创建一个容器，但`<products><productid>xyz</productid></products>`我`<xsl:for-each select="ProductID">` 似乎不起作用。谁能指出我正确的方向？

```
<Batch>
  <Promotion>
    <PromotionID>000873</PromotionID>
    <Description country="GB" language="en" variant="">*P* Free Clotted Cream      Scone</Description>
    <MultibuyGroup>
        <RewardType>1</RewardType>
        <RewardValue>0.0</RewardValue>
        <RewardValue currency="GBP">1.0</RewardValue>
        <ProductID>1300003536</ProductID>
        <ProductID>1300000746</ProductID>
        <ProductID>1300002393</ProductID>
        <ProductID>1300002648</ProductID>
        <ProductID>1300002899</ProductID>
        <ProductID>1300003535</ProductID>
        <ProductID>1300003222</ProductID>
    </MultibuyGroup>
    <MultibuyGroup>
        <RewardType>0</RewardType><RewardValue>0.0</RewardValue>
        <RewardValue currency="GBP">0.0</RewardValue>
        <ProductID>1570000102</ProductID>
    </MultibuyGroup>
    <Timetable>
      <SartDate>2008-02-02T00:00:00+00:00</StartDate>
      <FinishDate>2008-02-03T23:59:59+00:00</FinishDate>
    </Timetable>
 </Promotion>
</Batch> 
```

我试图让它看起来像。

```
<Batch>
  <Promotion>
    <PromotionID>000873</PromotionID>
    <badge_id>tbc</badge_id>
    <loyaltyaccountholdersonly>TBC</loyaltyaccountholdersonly>
    <locations>TBC</locations>
    <Description country="GB" language="en" variant="">*P* Free Clotted Cream      Scone</Description>
    <MultibuyGroup>
        <RewardType>1</RewardType>
        <RewardValue>0.0</RewardValue>
        <RewardValue currency="GBP">1.0</RewardValue>
        <products>
          <ProductID>1300003536</ProductID>
          <ProductID>1300000746</ProductID>
          <ProductID>1300002393</ProductID>
          <ProductID>1300002648</ProductID>
          <ProductID>1300002899</ProductID>
          <ProductID>1300003535</ProductID>
          <ProductID>1300003222</ProductID>
        </products>
    </MultibuyGroup>
    <MultibuyGroup>
        <RewardType>0</RewardType><RewardValue>0.0</RewardValue>
        <RewardValue currency="GBP">0.0</RewardValue>
        <ProductID>1570000102</ProductID>
    </MultibuyGroup>
    <Timetable>
      <SartDate>2008-02-02T00:00:00+00:00</StartDate>
      <FinishDate>2008-02-03T23:59:59+00:00</FinishDate>
    </Timetable>
 </Promotion>
</Batch> 
```

使用以下 XSL

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">  
<promotions> 
<xsl:for-each select="Batch/Promotion">  
  <promotion>
    <promotion_id><xsl:value-of select="PromotionID"/></promotion_id>    
    <badge_id>TBC</badge_id>
    <loyaltyaccountholdersonly>TBC</loyaltyaccountholdersonly>
    <description><xsl:value-of select="Description[@country = 'GB']"/></description>
    <locations>TBC</locations>
    <xsl:for-each select="MultibuyGroup">
      <multibuygroup>
        <products>
        <xsl:for-each select="ProductID">
          <product_id><xsl:value-of select="ProductID"/></product_id>
        </xsl:for-each>
        </products>
        <rewardtype><xsl:value-of select="RewardType"/></rewardtype> 
        <rewardvalue><xsl:value-of select="RewardValue"/></rewardvalue>
        <rewardthreshold>TBC</rewardthreshold>
        <groupdescription><xsl:value-of select="GroupDescription"/></groupdescription>
      </multibuygroup>
    </xsl:for-each>
    <timetable> 
      <startdate><xsl:value-of select="Timetable/StartDate"/></startdate>
      <expirydate><xsl:value-of select="Timetable/FinishDate"/></expirydate>
    </timetable>
  </promotion>
</xsl:for-each>   
</promotions>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:26:22.823

您的 XML 不正确（元素打开 SarDate 而不是 StartDate）。在您的尝试中，在我看来您忘记了 XML 区分大小写。如果您想在您的输出中有一个 PromotionID，那么如果您将promotion_id 作为XSLT 中的元素名称，它就不会发生。

反正。

这是一个 XSLT，它可以满足我的要求：

1.  它首先要求复制所有元素，包括属性。
2.  然后它要求向每个 Promotion 元素添加一些元素。
3.  然后对于 Multibuy 的东西，它要求复制产品列表。
4.  最后，它要求不要（再次）将 ProductID 元素复制到其原始位置。

伊夫

```
<?xml-stylesheet type="text/xsl"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="*">  
    <xsl:copy>
        <xsl:copy-of select="@*" />
        <xsl:apply-templates />
    </xsl:copy>
</xsl:template>
<xsl:template match="Promotion">  
    <xsl:copy>
        <badge_id>tbc</badge_id>
        <loyaltyaccountholdersonly>TBC</loyaltyaccountholdersonly>
        <locations>TBC</locations>
        <xsl:copy-of select="@*" />
        <xsl:apply-templates />
    </xsl:copy>
</xsl:template>
<xsl:template match="MultibuyGroup">  
    <xsl:copy>
        <xsl:copy-of select="@*" />

        <xsl:apply-templates />
        <Products>
            <xsl:for-each select="ProductID">
                <xsl:copy>
                    <xsl:copy-of select="@*" />
                    <xsl:apply-templates />
                </xsl:copy>
            </xsl:for-each>
        </Products>
    </xsl:copy>
</xsl:template>   
<xsl:template match="ProductID"></xsl:template>
</xsl:stylesheet> 
```

# jquery - jQuery文本输入忽略鼠标，下拉菜单无法正常工作

> ID：11258586
> 
> 赞同：1
> 
> 时间：2012-06-29T08:40:19.787
> 
> 标签：jquery

我正在一个网站上单击 td 单元格创建一个文本输入（或选择/选项下拉菜单），该输入设置为 td 的当前值，并且文本输入被赋予焦点。

此版本允许人们单击 td 将内容放入文本输入中，可能对其进行编辑，然后按 enter 或单击其他位置或更改窗口以使其模糊并将其保存到 td：

[http://jsbin.com/emuneq/7/edit#source](http://jsbin.com/emuneq/7/edit#source)

问题是在 mouseup 上发生了点击，而在 mousedown 上发生了模糊，因此自动调整大小的表格在 mousedown 和 mouse up 之间发生变化。

这可以通过单击第一个黄色单元格（释放鼠标时创建一个文本字段），然后在单元格 2 上缓慢单击并释放鼠标来看到。当您按下鼠标时，前一个文本字段会变得模糊，这调整表格单元格的大小，当您释放时，您现在位于单元格 3 中。为了单击工作，mousedown 和 mouseup 的对象必须相同，但鼠标按下是在单元格 2 中进行的，而鼠标向上是在单元格 3 中，所以未检测到点击。

此版本使用 mouseup 事件：

[http://jsbin.com/emuneq/8/edit#source](http://jsbin.com/emuneq/8/edit#source)

如果单击单元格 1，然后在单元格 2 上单击鼠标（模糊先前的文本字段），然后保持在相同的位置，它将鼠标悬停在单元格 3 上，并且将在单元格 3 中创建一个文本字段。

我想要发生的是在调整表格列大小之前在鼠标按下时创建文本字段。

**此版本使用 mousedown 事件：**

[http://jsbin.com/emuneq/13/edit#source](http://jsbin.com/emuneq/13/edit#source)

我添加了“e.preventDefault();” 到 mousedown 功能 - 如果不存在，则 blur 功能会阻止 mousedown 工作。

“focus()”允许您在文本字段的左侧键入文本或按删除，但它似乎完全忽略了鼠标单击以移动光标或选择文本...尽管您可以使用移动文本光标箭头键。

好吧，在 IE7 和 IE8 中，它会检测到您按下回车键，但您最初无法输入任何内容，直到您使用鼠标为文本输入提供焦点。使用鼠标，您还可以突出显示文本或移动文本光标。

但在 IE9 和 Firefox 11 中，文本输入会忽略鼠标。在 Chrome 19 中，focus() 突出显示文本，但它也完全忽略了鼠标。

**无论如何，前面的链接几乎是完美的，只是它忽略了文本字段中的鼠标（IE7和IE8除外）。**

这是一个使用选择/选项下拉列表而不是文本字段的版本：

[http://jsbin.com/emuneq/15/edit#source](http://jsbin.com/emuneq/15/edit#source)

这像以前一样使用 mousedown - 但下拉菜单在 IE9、Firefox 和 Chrome 中根本不会打开。它们在 IE7 和 IE8 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:22:50.553

这有效：http: [//jsbin.com/uruhiz/2/edit](http://jsbin.com/uruhiz/2/edit)

解决方案是在 mousedown 上检查单元格是否更改，并且在第二种情况下不阻止默认值。

**更新：**

带输入的版本：http: [//jsbin.com/uruhiz/4/edit](http://jsbin.com/uruhiz/4/edit)

带有下拉菜单的版本：http: [//jsbin.com/eriyuw/2/edit](http://jsbin.com/eriyuw/2/edit)

# javascript - 为什么 Facebook JavaScript SDK 会请求所有这些文件？

> ID：11258590
> 
> 赞同：3
> 
> 时间：2012-06-29T08:40:57.570
> 
> 标签：javascript, facebook-javascript-sdk

我正在尝试优化 Facebook SDK 的使用。查看 Chrome 的网络选项卡告诉我，当 SDK 加载时，它会拉入许多其他文件：

![在此处输入图像描述](../Images/97196d53052f9c1a5530745f17134de1.png)

第一个是*all.js*，其中包含 Facebook API。屏幕截图中的其余资源在调用`FB.init`.

对*about:blank*有 3 次调用，对*xd_arbiter.php*有 3 次调用。有 2 次调用*oauth*。我无法弄清楚为什么前两个有 3 个电话。

似乎*all.js*创建了 2 个`iframe`元素（如果加载 SDK 的页面通过 HTTPS 提供，则只创建一个 - 那个`fb_xdm_frame_https`。在这种情况下，似乎发出了 2 个请求而不是 3 个）：

```
<div id="fb-root" class=" fb_reset">
    <div style="position: absolute; top: -10000px; height: 0px; width: 0px; ">
        <div></div>
        <div>
            <iframe id="fb_xdm_frame_http" name="fb_xdm_frame_http"></iframe>
            <iframe id="fb_xdm_frame_https" name="fb_xdm_frame_https"></iframe>
        </div>
    </div>
</div> 
```

请求空白页是因为`iframe`创建的元素没有`src`属性（稍后通过 JavaScript 添加）。当它被设置时，它被设置为*xd_arbiter.php*。

所以这解释了 3 个中的 2 个。但是其他对*about:blank*和*xd_arbiter.php*的调用来自哪里？通过[JSBeautifier](http://jsbeautifier.org/)运行*all.js*并遵循代码，我已经做到了这一点，但我看不出第三次请求这些文件的原因或方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T01:39:09.077

`xd_arbiter.php`是基础架构的一部分，用于促进您的页面与所有后续显示的小部件或对话框之间的跨域消息传递，或者如果用作 Canvas 页面，则为 Facebook 主站点。

您看到两个对 /dialog/oauth 的请求似乎是您的实现问题，`FB.getLoginstatus(.., true)`除了设置之外，您是否手动调用`status: true`？

无论如何，第三个请求`xd_arbiter.php`只是对通过跨域通道返回的 /dialog/oauth 请求的响应，并且由于`xd_arbiter.php`资源被缓存（您似乎禁用了缓存，如 xd_arbiter 的最后一个请求所示）没有真正的成本是真的发生了。

# php - “创建数据库”错误

> ID：11258597
> 
> 赞同：-2
> 
> 时间：2012-06-29T08:41:14.807
> 
> 标签：php, mysql, sql

我正在尝试创建一个数据库。但是我在做的时候出错了。

**这是代码：**

```
<?php
$link = mysql_connect("localhost","xxx","xxx")
$db_selected = mysql_select_db("alpMuhendislik",$link);
if (!$db_selected) {
    $sql = 'CREATE DATABASE alpMuhendislik';
    if (mysql_query($sql, $link)) {
        echo "Database alpMuhendislik created successfully\n";
    }
    else {
        echo 'Error creating database: ' . mysql_error() . "\n";
    }
}
?> 
```

**这是错误：**

> 解析错误：语法错误，第 3 行 ..../load_data.php 中的意外 T_VARIABLE

我只是看不出语法有任何问题。我检查了标记和分号。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:43:26.170

缺少`;`：

```
$link = mysql_connect("localhost","xxx","xxx")
                                             ^^^ 
```

“第 x 行出现意外*情况*”通常意味着第 x-1 行出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:45:55.323

```
$link = mysql_connect("localhost","xxx","xxx"); 
```

# git - git存档致命：协议不支持的操作

> ID：11258599
> 
> 赞同：35
> 
> 时间：2012-06-29T08:41:32.757
> 
> 标签：git, git-checkout, git-archive

我正在尝试检查远程 git 存储库的一部分。按照[这里](https://stackoverflow.com/questions/160608/how-to-do-a-git-export-like-svn-export)的建议，在命令的帮助下

```
git archive --format=zip --remote=http://path_to_repository 
```

但我收到错误消息：

```
fatal: Operation not supported by protocol.
Unexpected end of command stream 
```

Git 不支持使用 http 协议的这种操作？那是托管环境还是git本身的问题？任何方向都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T08:47:39.520

`git archive`可以与支持 git 协议的服务器一起工作（即 git 服务器、[smart-http](https://git-scm.com/book/en/v2/Git-on-the-Server-Smart-HTTP)和 ssh 服务器）。

在您的情况下，您的 git 太旧，或者服务器是哑 http 服务器（普通 http 服务器，没有“[智能](https://git-scm.com/book/en/v2/Git-on-the-Server-Smart-HTTP)”git 支持）。您需要从那里克隆存储库和存档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-23T04:14:56.263

你不能用 git 来实现 http ！只有 git 协议。IE

```
git archive --format=zip --remote=git://path_to_repository 
```

# ios - requestFinished 方法中的 ASIFormDataRequest

> ID：11258601
> 
> 赞同：0
> 
> 时间：2012-06-29T08:41:38.847
> 
> 标签：ios, asihttprequest

我使用 ASIFormDataRequest 登录服务器，在 requestFinished 方法中管理响应。如果响应正常，我需要向服务器发起另一个请求以下载 JSON。我应该在哪里管理响应（因为我从 requestFinished 方法启动第二个请求......）？应该使第二个请求同步吗？（如果我是对的，那将在没有 requestFinished 方法的情况下从服务器获得响应）

有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:47:13.977

你可以这样做：

```
 ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setDelegate:self];
   [request setDidFinishSelector:@selector(requestDone:)];
   [request setDidFailSelector:@selector(requestWentWrong:)]; 
```

您基本上定义了成功/失败选择器。“`ASIHTTPRequest` [如何使用”部分](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。

* * *

**更新 1.0**

```
- (void)requestFinished:(ASIHTTPRequest *)request 
```

这是请求完成的默认处理程序。我认为您也会收到“自定义”选择器。

# android - onCancelled() 被调用，但 isCancelled() 从未被调用

> ID：11258604
> 
> 赞同：-2
> 
> 时间：2012-06-29T08:42:04.387
> 
> 标签：android, android-asynctask

我正在`http request`使用`AsyncTask`，我想要的是当我注销时，`AsyncTask`应该停止。所以我打电话`cancel(true)`来`onStop()`。当我调用`cancel(true)`时，尚未开始的请求被取消，但问题是`isCancelled()`从未调用它检查正在执行的任务是否被取消。我正在检查`isCancelled()`Is `doInBackgroud()`there `AsyncTask`a way to stop the execution AsyncTask. 以下是场景。

```
class AsyncClass extends AsyncTask<>{

    @Override
     protected String doInBackground(Void... params)
      {
             if(isCancelled())
               {
                Log.d("isCancelled", iscancelled());
               }
          //call the webservice

      }
    } 
```

现在我要打电话的还有其他课程

```
if(asyncTaskObject!=null){
    asyncTaskObject.cancel(true);
        asyncTaskObject=null;
} 
```

但是 iscancelled() 中的 Log 语句永远不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:03:34.110

你为什么期望它`isCancelled()`应该由Android本身执行。这是一个 getter 方法，允许您的代码查询任务的状态。

# php - jquery 包含：文本

> ID：11258609
> 
> 赞同：0
> 
> 时间：2012-06-29T08:42:36.740
> 
> 标签：php, jquery, html

如下面的代码所示：这是在由

```
<input type="text" size="30" onkeyup="filter(this.value)" /> 
```

--

```
function filter(a){

               if (a.length > 0)
                    {$("tr").hide();
                    $("tr:contains('"+a+"')").show();}
               else
                    {$("tr").show();     }
} 
```

我有表格格式的项目列表，其中有 3 个 TD、项目代码、项目描述、项目类型

我有一个输入框，我想通过匹配文本框中输入的文本来过滤表格，以便仅在项目代码中匹配它，而不是在整个 TR 中。

如果与搜索不匹配，我如何仅搜索但隐藏整个？这是为了将我的表格过滤到正在输入的表格。

从我的 SQL Select 生成的 HTML TABLE

[http://jsfiddle.net/zs4Tz/](http://jsfiddle.net/zs4Tz/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:45:26.287

尝试以下操作：

```
$("td:contains("+ a +")").parent('tr').show(); 
```

或者

```
$('td').filter(function() {
  return $.trim( $(this).text() ) == a;
}).parent('tr').show(); 
```

# zend-framework - 了解 application.ini 和引导程序

> ID：11258611
> 
> 赞同：0
> 
> 时间：2012-06-29T08:42:41.630
> 
> 标签：zend-framework, bootstrapping, zend-application

我一直在尝试解决这个问题，但是 Zend 项目中的 application.ini 和 bootstrap 文件之间的确切区别是什么？

两者似乎都用于添加资源、帮助程序等。但我不太明白在引导程序中添加内容或通过 application.ini 添加内容之间有什么区别。两种方法对另一种方法有什么好处？

有谁能给我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:46:45.333

中列出的配置`application.ini`驱动内置（以及任何第 3 方或自定义构建的）[应用程序资源插件](http://framework.zend.com/manual/en/zend.application.available-resources.html)。您受限于资源插件可以对您的配置设置执行的操作。

Bootstrap 类中的任何代码都旨在提供更细粒度的定制。在这里，您可以做任何可以放入 PHP 代码的事情。

# import - 如果我在加载库时出现“不知道如何加载 'dart:html'”怎么办？

> ID：11258616
> 
> 赞同：3
> 
> 时间：2012-06-29T08:43:03.013
> 
> 标签：import, libraries, dart

我的 dart 库中的前两行是：

```
#library('LibraryName');
#import('dart:html'); 
```

当我尝试从另一个 .dart 文件加载库时

```
#import('../path/to/LibraryName.dart'); 
```

我收到以下错误：

```
Do not know how to load 'dart:html''file:///the/path/to/LibraryName.dart': Error: line 2 pos 1: library handler failed
#import('dart:html');
^ 
```

当`#import('dart:html')`我将库用作独立应用程序时工作正常，但我希望能够从另一个 dart 应用程序作为库访问它。

我如何使用图书馆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:41:41.143

dart:html 仅在浏览器端可用。这看起来像您正在尝试在服务器端使用 dart.exe 运行客户端脚本。

dart:html 在浏览器上可用（并与 DOM 交互） dart:io 在服务器上可用（并与操作系统交互）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:17:54.480

你所要做的

```
#import("../path/to/fileContaingLibrary.dart"); 
```

再加上图书馆系统很快就会发生变化。

> 注意：Dart 中的库系统会发生变化。本节介绍它当前的工作方式。[关联](http://www.dartlang.org/docs/language-tour/#libraries-library)

# c++ - C++ 运算符重载和多态性

> ID：11258617
> 
> 赞同：4
> 
> 时间：2012-06-29T08:43:04.940
> 
> 标签：c++, polymorphism, operator-overloading

多态性和运算符重载是否混合在一起？没有指针就不能做多态性，正如[这个答案](https://stackoverflow.com/questions/7223613/c-polymorphism-without-pointers)中所解释的那样，你也不能像[这里](https://stackoverflow.com/questions/6171630/why-isnt-operator-overloading-for-pointers-allowed-to-work)所解释的那样用指针进行运算符重载。
所以真的没有办法做到这一点，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T08:50:17.647

就在这里。您没有正确阅读答案。

这是一个简短的演示：

```
#include <iostream>
using namespace std;

struct X
{
    int value;
    virtual void operator += (int x)
    {
        value += x;
    }
};

struct Y : X
{
    virtual void operator += (int x)
    {
        value *= x;
    }
};

void do_stuff(X& x)
{
    x += 10;
    cout << "Final value " << x.value << endl;
}

int main()
{
    X x;
    x.value = 10;
    Y y;
    y.value = 10;
    do_stuff(x);
    do_stuff(y);

    return 0;
} 
```

我并不是在暗示这是一个好主意，或者它是实用的。这只是可能的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T08:47:44.150

简单来说：

> 运算符重载是一种**静态**多态性。

静态多态可以使用函数重载、运算符重载和`template`s 来实现。

我认为您只考虑动态多态性（`virtual`东西）。
另一方面，通常我们看不到`virtual`重载运算符的函数，但理论上它仍然是可能的。

更正：运行时（动态）多态性可以使用指针*和引用*来完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T10:11:19.257

首先，多态性适用于引用和指针。运算符重载适用于引用。所以在那个层面上没有问题。

二元运算符存在潜在问题。对运算符多态性的直接语言支持仅适用于左侧操作数。至于诸如 binary 之类的东西`+`，从逻辑上讲，人们会期望双重分派。虽然这可以实现，但它有点复杂，特别是如果层次结构是开放的。

对于像 binary`+`这样通常返回一个新对象的运算符，还有返回类型的问题。通常，这*不能*是引用，因为没有合适类型的对象可以引用。已经开发了诸如字母信封习语之类的模式来处理这个问题，但它们不一定简单，而且它们通常具有非常显着的运行时开销。 *或者*重载的运算符返回一个特殊的类型，它只保存它的参数，并且知道如何在请求时以正确的类型计算值。

# c++ - 在 OnLButtonUp 中滚动和更新视图

> ID：11258619
> 
> 赞同：0
> 
> 时间：2012-06-29T08:43:07.873
> 
> 标签：c++, visual-c++, mfc, scroll

我有一种情况，当我选择一个工具栏项目并在提供自动滚动的视图上选择区域时。然后我在与所选区域相同的位置创建一个与所选区域相同大小的对话框。

但是，当所选区域大于工作区/屏幕的区域或左上角在屏幕上不可见时，情况会变得更糟。然后在这种情况下，对话框的左上角不在屏幕上。

我在`OnLButtonUp()`事件处理程序中做所有这些。

**问题：**

是否可以滚动视图以使左上角可见。然后将对话框绘制为新的滚动可见视图。

任何建议/建议都会对我很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:38:42.197

了解设备点和逻辑点将解决您的问题。您应该使用 DptoLp 和 LptoDP 等转换

# php - jQuery & Ajax 组合框 - 不同的选择标签名称

> ID：11258624
> 
> 赞同：1
> 
> 时间：2012-06-29T08:43:24.060
> 
> 标签：php, jquery, ajax, drop-down-menu, combobox

我正在练习[这个](http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/)

[这](http://demos.99points.info/ajax_dropdown/)是一个工作演示

在这里我可以重复代码：

## jQuery代码：

```
 $(document).ready(function() {
        //$('#loader').hide();
        $('.parent').livequery('change', function() {
            $(this).nextAll('.parent').remove();
            $(this).nextAll('label').remove();
            $('#show_sub_categories').append('<img src="loader.gif" style="float:left; margin-top:7px;" id="loader" alt="" />');
            $.post("get_chid_categories.php", {
                parent_id: $(this).val(),
            }, function(response){
                setTimeout("finishAjax('show_sub_categories', '"+escape(response)+"')", 400);
            });
            return false;
        });
    });

    function finishAjax(id, response){
      $('#loader').remove();

      $('#'+id).append(unescape(response));
    } 
```

## HTML：

```
<div id="show_sub_categories">
    <select name="search_category" class="parent">
    <option value="" selected="selected">-- Categories --</option>
    <?php
    $query = "select * from ajax_categories where pid = 0";
    $results = mysql_query($query);

    while ($rows = mysql_fetch_assoc(@$results))
    {?>
        <option value="<?php echo $rows['id'];?>"><?php echo $rows['category'];?></option>
    <?php
    }?>
    </select>   

</div> 
```

## get_child_categories.php

```
<?php

include('dbcon.php');

if($_REQUEST){
$id = $_REQUEST['parent_id'];

$query = "select * from ajax_categories where pid = ".$id;
$results = @mysql_query( $query);
$num_rows = @mysql_num_rows($results);
if($num_rows > 0)
{?>
    <select name="sub_category" class="parent">
    <option value="" selected="selected">-- Sub Category --</option>
    <?php
    while ($rows = mysql_fetch_assoc(@$results))
    {?>
        <option value="<?php echo $rows['id'];?>"><?php echo $rows['category'];?></option>
    <?php
    }?>
    </select>   
<?php   
}
else{echo '<label style="padding:7px;float:left; font-size:12px;">No Record Found !</label>';}
}
?> 
```

它是使用 jQuery、ajax 和 php 从 mySql 数据库获取项目的下拉菜单（组合框）的 N 级动态加载。一切都很好，但我的 HTML 中有这个：

```
<select name="search_category" class="parent">...</select>  
<select name="sub_category" class="parent">...</select>  
<select name="sub_category" class="parent">...</select>  
<select name="sub_category" class="parent">...</select> 
```

我想为每个选择标签选择选定的项目，但由于它们具有相同的名称属性值，我想我做不到。请告诉我一些将名称更改为 sub_category1、sub_category2、... 或其他一些工作方式的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:10:33.643

这是我找到的解决方案：

我在显示其内容的最后一个组合之后添加了此脚本：

```
$("#show_sub_categories select").attr("id", function(i) {
    return "combo_" + i;
}); 
```

把它放在 get_child_categories.php 中的最后一个 else
干杯！

# c# - 如何折叠 If、Else、For、Foreach 等子句？

> ID：11258628
> 
> 赞同：68
> 
> 时间：2012-06-29T08:43:36.930
> 
> 标签：c#, visual-studio, visual-studio-extensions, clause

我有时会被很长的子句卡住，我正在寻找一种可以折叠它们的方法，就像我可以默认折叠类、方法和命名空间一样。

是否有一个 Visual Studio 扩展可以做到这一点？ReSharper 和 JustCode 都不允许这样做。

谢谢！

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-02T20:49:03.600

试试这个插件（C#大纲扩展）：

*   [VS2010](http://visualstudiogallery.msdn.microsoft.com/4d7e74d7-3d71-4ee5-9ac8-04b76e411ea8)
*   [VS2012](http://visualstudiogallery.msdn.microsoft.com/bc07ec7e-abfa-425f-bb65-2411a260b926)
*   [VS2013](https://visualstudiogallery.msdn.microsoft.com/6c3c5dec-1534-4c42-81b1-cfd4615fd0e9)
*   [VS2015](https://visualstudiogallery.msdn.microsoft.com/9390e08c-d0aa-42f1-b3d2-5134aabf3b9a)
*   [VS2017](https://marketplace.visualstudio.com/items?itemName=xyz0835.CSharpOutline2017)
*   [VS2019](https://marketplace.visualstudio.com/items?itemName=Coutline2019.xyz0835-coutline2019)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-02-13T05:18:09.760

Visual Studio IDE 提供了一个选项来概述 if、for、foreach、while、switch case 等。

只需转到`Visual Studio -> Tools -> Options -> Text Editor -> C\C++- > View`并设置`Outline Statement Blocks`为true。

在 Visual Studio 2012+ 中，路径是`Visual Studio -> Tools -> Options -> Text Editor -> C\C++- > Formatting`.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-12-06T13:48:15.563

我使用 2 个扩展：

[C# 大纲 2013](http://visualstudiogallery.msdn.microsoft.com/6c3c5dec-1534-4c42-81b1-cfd4615fd0e9)

和

[缩进指南](http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-06-29T09:02:20.870

选择要折叠的代码，然后按 ctrl+M,ctrl+H。要禁用它，请按 ctrl+M,ctrl+U，您也可以右键单击选择，然后出现“计划模式”（我不确定我的 VS 是法语）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T08:52:06.947

您可以使用`#region`for 折叠 if、else、for 和其他类似的子句。
**例子：**

```
#region foreach
foreach(/*conditions*/) 
{
    statement 1;
    statement 2;
    ..
    statement n;
}
#endregion 
```

现在折叠所有使用快捷键`ctrl`+ `M`，`ctrl`+ `O`。

# javascript - 如何在嵌入式 JavaScript 中使用未转义字符

> ID：11258631
> 
> 赞同：1
> 
> 时间：2012-06-29T08:43:44.560
> 
> 标签：javascript, node.js, ejs

我在这里关注文档

[https://github.com/visionmedia/ejs](https://github.com/visionmedia/ejs)

假设我有

```
var text = "Birds & Bees";

<%= text %> 
```

打印按照文档转义的字符串。我努力了

```
<%- text %> 
```

它还将字符串打印为转义。还有什么我可以尝试让它工作的吗？

# javascript - 正则表达式中的括号单位返回额外的匹配项

> ID：11258632
> 
> 赞同：2
> 
> 时间：2012-06-29T08:43:45.857
> 
> 标签：javascript, regex, parentheses

我是正则表达式的新手，一直在努力解决这个问题，并将我的问题抽象为以下问题：

```
var foo = "abc";
var array1 = match(/abc/);
var array2 = match(/a(b)c/); 
```

array1 当然只包含“abc”，但array2 将包含“abc”和“b”。
为什么 array2 也会选择“b”？这对我来说是个问题，因为我在大括号内匹配一些东西，如“{1 2a 3}”，正则表达式如`/\{(\d(|a|b)\s?)+\}/`，结果数组返回空字符串和“3”以及所需的“{1 2a 3 }”。

谢谢！
艾萨克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:46:25.617

使用`(?:)`而不是`()`.

```
/{(?:\d(|a|b)\s?)+}/ 
```

当您使用 时`()`，`match`还返回匹配的组。组是字符串中与正则表达式部分相对应的部分，这些部分位于`()`.

# magento - Magento 在错误的文件夹中寻找模板

> ID：11258636
> 
> 赞同：0
> 
> 时间：2012-06-29T08:44:01.627
> 
> 标签：magento

嗨，我遇到了 Magento 的问题：它找不到我在主页上借助这一行请求的模板文件：`{{block type="profile/profile" name="profile" template="profile/news-front.phtml"}}`但是 magento 给了我错误：`Not valid template file:frontend/base/default/template/profile/news-front.phtml`.

我有我的`news-front.phtml`文件，`frontend/default/default/template/profile/news-front.phtml`为什么 magento 看不到该文件以及如何在首页上显示我的新闻块？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T09:01:00.477

我建议你看看[这个链接](http://www.magentocommerce.com/knowledge-base/entry/magentos-theme-hierarchy/)。

如果它不能回答您的问题，那么如您所见，Magento 会尝试在基本包中搜索您的模板。这意味着您默认没有以下文件或您的主题

```
系统->配置->设计
```

不是“默认”。

# php - PHP mySQL JOIN 确定不相等的记录

> ID：11258638
> 
> 赞同：1
> 
> 时间：2012-06-29T08:44:04.870
> 
> 标签：php, mysql

以下查询旨在查找不等于另一个表中对应选举人 ID 的记录。

```
SELECT *
  FROM electors,voting_intention
  WHERE  electors.ID != voting_intention.elector 
```

这应该在此 FIDDLE [http://sqlfiddle.com/#!3/0a4b1/10](http://sqlfiddle.com/#!3/0a4b1/10)中返回 1 条记录，但返回许多且有重复。显然我错过了一些东西。什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:05:36.467

如果您希望获得所有没有任何相应“投票意向”记录的选民，请尝试以下操作。我假设您想要该选民的所有字段。如果没有，您需要选择感兴趣的列。

```
select * from 
electors where id not in 
(select elector from voting_intention) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:07:07.203

```
SELECT *
  FROM voting_intention
  RIGHT JOIN electors ON electors.ID = voting_intention.elector
  WHERE  voting_intention.elector IS null 
```

# c# - 看不出这个简单的 SQL 查询是如何“畸形”的！

> ID：11258647
> 
> 赞同：3
> 
> 时间：2012-06-29T08:44:48.747
> 
> 标签：c#, sql, datetime

```
 QueryText = string.Format("SELECT {0}, {1} Path FROM Scope() "
                                + "WHERE {0} = 'test' AND {1} BETWEEN '"
                                + minimumDate.ToString("yyyy-MM-dd HH:mm:ss") + "' AND '" + maximumDate.ToString("yyyy-MM-dd HH:mm:ss")
                                + "' ORDER BY {1} Desc", "TestField", "DateField"); 
```

minimumDate 和 maximumDate 的类型为 DateTime (.net DateTime)。这是一个全文 SQL 查询。

注意：在添加子句之间的日期之前 - 此查询很好，因此字段肯定存在等。

编辑：实际查询字符串：

```
"SELECT TestField, DateField FROM Scope() WHERE TestField = 'test' AND DateField BETWEEN '2011-06-30 09:41:23' AND '2012-06-29 09:41:23' ORDER BY DateField  Desc" 
```

编辑：我犯了一个错误，说它在 between 子句之前就起作用了——我一定是篡改了 select，因为我省略了一个重要的逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:49:51.803

您在 Path 之前缺少逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:51:11.070

将 CONVERT() 与日期一起使用：

```
BETWEEN CONVERT(datetime, 'here put date', 120)  AND CONVERT(datetime, 'here put date', 120) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:57:59.457

您不应该在 .net 中编写这样的查询。您应该使用 db 参数：

```
string commandText = string.Format("SELECT {0}, {1} FROM Scope() "
                            + "WHERE {0} = 'test' AND {1} BETWEEN '@minDate' "
                            + "AND '@maxDate'"
                            + " ORDER BY {1} Desc", "TestField", "DateField");

SqlCommand command = new SqlCommand(commandText, connection);
command.Parameters.Add("@minDate", SqlDbType.SqlDateTime);
command.Parameters["@minDate"].Value = minimumDate;
command.Parameters.Add("@maxDate", SqlDbType.SqlDateTime);
command.Parameters["@maxDate"].Value = maximumDate; 
```

# django - Django中的建模（外键）

> ID：11258649
> 
> 赞同：1
> 
> 时间：2012-06-29T08:44:52.087
> 
> 标签：django

**用例：**

*   注册后，用户必须选择他的公司（不理想但可以）
*   公司存储在他的 UserProfile 中
*   车型和车型有一个对外的公司Key
*   展示时，仅向用户展示用户公司创建的汽车和车型。

**造型：**

```
class Company(models.Model):
    company_name        = models.CharField(max_length=50)

class UserProfile(models.Model):
    user                = models.OneToOneField(User)
    company             = models.ForeignKey(Company)

class Car(models.Model):
    model_name          = models.CharField(_(u"Model Name"))
    car_type            = models.CharField(_(u"Car Type"))
    company             = models.ForeignKey(Company)

class CarType(models.Model):
    car_type = models.CharField(_(u"Car Type"))
    company      = models.ForeignKey(Company) 
```

**看法：**

```
def main_page_view(request):
    profile = request.user.get_profile()
    AllCarsCreatedByTheCompany = profile.company.car_set.all() 
```

这已经很完美了，但问题是 CarType。

**问题：**

-每家公司生产不同的车型。并且感谢公司外键，它已经与另一家公司分开了。

*   添加新车后，用户应从下拉列表中仅选择其公司明确创建的汽车类型，但是在这种情况下，用户会看到所有的 car_types，甚至是不是由他的公司创建的汽车类型。

**我做了什么：**

```
def new_car_view(request):
    profile = request.user.get_profile()
    if request.method == 'POST':
        form = CarForm(request.POST)
        if form.is_valid():
            car = Car.objects.create(
                model_name=form.cleaned_data['model_name'],
                company=profile.company
            )
            car.save()
            return HttpResponseRedirect('/')
    else:
        form = CarForm()
    variables = RequestContext(request, {'form':form})
    return render_to_response('car_add.html', variables) 
```

**形式：**

```
class CarForm(ModelForm):
    class Meta:
        model = Car
        exclude = ('company') 
```

但是，表单在下拉列表中显示所有汽车类型，而不是由公司外键过滤的汽车类型。请问我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:22:22.547

您也许可以在 init.xml 中修改选择。这是一个例子：

```
class CarForm(forms.ModelForm):

  def __init__(self, *args, **kwargs):

    super(CarForm, self).__init__(*args, **kwargs)

    # limit selection list to just items for this account
    self.fields['cartypes'].queryset = CarType(company=company) 
```

此外，将公司包含为隐藏字段，以便您可以引用它而不是排除它。

# cytoscape-web - cytoscape.js 中的组

> ID：11258655
> 
> 赞同：0
> 
> 时间：2012-06-29T08:45:13.147
> 
> 标签：cytoscape-web

我有一个图表，其中包含由内部节点组成的节点（组），并且在重新绘制图表时，这些组显示在它们包含的节点的顶部（我使用的是 a `presset layout`）。为了避免这种情况，我尝试为组设置 z-index（因此只有组的边框可见），如下所示，但没有运气。

```
style:{
    selectors:{
        '.group':{
            fillColor: '#000000',
            borderColor: '#000000',
            borderWidth: 1,
            shape:'roundrectangle',
            'z-index':-5
            //visibility:'hidden'
        }

    }
} 
```

我也尝试过设置`visibility:'hidden'`，但这也隐藏了连接组的边缘。对团体有任何支持吗？或者可能是一种将组设置`fillColor`为透明的方式，这样它就不会隐藏其内部节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:17:00.507

`transparent`据我所知，SVG 渲染器应该接受为有效颜色。您真正在寻找的东西听起来像是复合节点支持，我们将在新的画布渲染器完成时拥有它 - 到夏天结束。

# database - 存储人员信息的位置 LDAP 或数据库

> ID：11258660
> 
> 赞同：1
> 
> 时间：2012-06-29T08:45:28.537
> 
> 标签：database, authentication, active-directory, ldap, sap

在我们的应用程序中，我们正在评估在哪里存储所有人员信息（姓名、电子邮件、电话、部门、出生日期、雇用日期、许可证/证书、角色等）。我们将使用 LDAP/Active Directory 进行用户身份验证/授权，因此至少其中一些数据将进入 LDAP 服务器。我们的 HR 模块和其他应用程序也需要其中一些信息，并且它们之间存在重叠。我们正在考虑将所有信息存储在 LDAP 中，并在我们的 RDMS 中使用用户 ID 作为 LDAP 用户的参考，并在登录过程中填充用户的其他详细信息。除了我们的应用程序之外，还有其他应用程序也将使用相同的用户信息。如果我们不在 ldap 中存储人员详细信息，我们将需要在每个系统中复制和同步用户信息。无论如何，登录信息都需要 LDAP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:32:03.307

一般来说，Active Directory 不是放置您列出的敏感 PII 的好地方。绝对没有技术原因不能存储这些数据，但是保护它更加困难。这当然不是不可克服的，但是，我明确建议将 HR 数据与 HR 一起保存，并同步 AD 所需的任何人口统计信息。

使用 HR 系统中的 Employee ID 值来维护与 AD 的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:14:18.367

在我们公司，我们构建了一个中间件和一个每天更新 3 次的中间数据库。中间件是一个 ABAP 远程函数，它从 SAP 生成数据，这是一个 C# 程序，它使用 SAP .NET 连接器调用远程函数并检索该数据并将其保存在 Oracle 数据库中。

此数据库用于与 Active Directory 交换信息。然后 Exchange、Messenger、SharePoint 等系统获取此 Active Directory 的信息。其他内部系统也可以访问 Oracle 数据库。我们体验到的优势是我们避免了每次访问 SAP 和 Active Directory 的开销。我们每天只访问它们 3 次，但用户每秒都访问 Oracle 数据库。

希望能帮助到你。

# android - 将 J2ME URLCaller 类转换为 Android 等效项

> ID：11258663
> 
> 赞同：-1
> 
> 时间：2012-06-29T08:45:41.037
> 
> 标签：android, java-me

我从朋友那里得到了一个`URlCaller`关于连接网络服务的课程。我的假设是一切都会很好，但它包含以下错误是 J2ME 实现

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package main;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

public class URLCaller extends Thread{
    private String url ;
    private String action;
    private URLEncoder urle;
    private String res;

    public URLCaller() {
    }

    public URLCaller(String action,String url) {
        urle = new URLEncoder();
        this.url = url;
        this.action = action;
        start();
    }

    //replace

 void authenticate(String action,String url) {
 HttpConnection connection = null;
 InputStream is = null;
 OutputStream os = null;
 StringBuffer stringBuffer = new StringBuffer();

 try {
 connection = (HttpConnection)Connector.open(url);
 connection.setRequestMethod(HttpConnection.GET);
 connection.setRequestProperty("IF-Modified-Since","20 Jan 2001 16:19:14 GMT");
 connection.setRequestProperty("User-Agent","Profile/MIDP-2.0 Confirguration/CLDC-1.0");
 connection.setRequestProperty("Content-Language", "en-CA");
 connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
 os = connection.openOutputStream();
 is = connection.openDataInputStream();
 int ch;
 while ((ch = is.read()) != -1) {
 stringBuffer.append((char) ch);
 }
 res = stringBuffer.toString() ;
 System.out.println(res);
 //textBox = new TextBox("Simple GET Test", stringBuffer.toString(), 1024, 0);

 } 
 catch(Exception e ){

 }

 finally {
     try{
           if(is!= null) {
    is.close();
 }
 if(os != null) {
    os.close();
 }
 if(connection != null) {
    connection.close();

 }
 //display.setCurrent(textBox);
     }
     catch(Exception e ){

     }

 }
}
 void sendSMS(String action,String url) {
 HttpConnection connection = null;
 InputStream is = null;
 OutputStream os = null;
 StringBuffer stringBuffer = new StringBuffer();
 //TextBox textBox = null;

 try {
 connection = (HttpConnection)Connector.open(url);
 connection.setRequestMethod(HttpConnection.GET);
 connection.setRequestProperty("IF-Modified-Since","20 Jan 2001 16:19:14 GMT");
 connection.setRequestProperty("User-Agent","Profile/MIDP-2.0 Confirguration/CLDC-1.0");
 connection.setRequestProperty("Content-Language", "en-CA");
 connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
 os = connection.openOutputStream();
 is = connection.openDataInputStream();
 int ch;
 while ((ch = is.read()) != -1) {
 stringBuffer.append((char) ch);
 }
 res = stringBuffer.toString() ;
 System.out.println(res);
 //textBox = new TextBox("Simple GET Test", stringBuffer.toString(), 1024, 0);

 } 
 catch(Exception e ){

 }

 finally {
     try{
           if(is!= null) {
    is.close();
 }
 if(os != null) {
    os.close();
 }
 if(connection != null) {
    connection.close();

 }
 //display.setCurrent(textBox);
     }
     catch(Exception e ){

     }

 }
} 

    public void run(){
        //http://message url?user=mu&password=my&from=Muyiwa&to=23475061254040&message=i+love+this.
       System.out.println(Thread.currentThread().toString() + " is running...") ;
       if (action.equals("login")){
          System.out.println(action);

           authenticate(action,url);
       }
       else if(action.equals("sendsms")) {
    System.out.println(action);

           sendSMS(action,url);
       }
    }

    public void callURL(){

        HttpConnection c = null;
        InputStream is = null;
        StringBuffer sb = new StringBuffer();
        try{
 System.out.println(url);
//url = (urle.encode(url,"UTF-8"));
//System.out.println(url);
c = (HttpConnection)Connector.open(url, Connector.READ_WRITE, true);
  c.setRequestMethod(HttpConnection.POST); //default
  is = c.openInputStream(); // transition to connected!
  int ch = 0;
  for(int ccnt=0; ccnt < 150; ccnt++) { // get the title.
    ch = is.read();
    if (ch == -1){
      break;
    }
    sb.append((char)ch);

  }
  res = sb.toString();
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    public String getRes() {
        return res;
    }

    public void setRes(String res) {
        this.res = res;
    }

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public URLEncoder getUrle() {
        return urle;
    }

    public void setUrle(URLEncoder urle) {
        this.urle = urle;
    }

} 
```

Ps 有人可以将其转换为 android 实现。目前面临最后期限

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:03:11.453

在 android 中有类，`HttpClient`并且`DefaultHttpClient`. 因此，您使用这些发出 Web 请求。

与您的代码发出`HttpGet`请求相同，并且与您的 J2ME 代码一样，您可以使用 Thread 类而不是 Thread 类`AsyncTask`（您也可以使用 Thread、Handler 但最好使用 Asynctask）在非 UI 线程中执行 Web 请求。

**例子：**

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = "";
            for (String url : urls) {
                DefaultHttpClient client = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);
                try {
                    HttpResponse execute = client.execute(httpGet);
                    InputStream content = execute.getEntity().getContent();

                    BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                    String s = "";
                    while ((s = buffer.readLine()) != null) {
                        response += s;
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return response;
        }

        @Override
        protected void onPostExecute(String result) {
            textView.setText(result);
        }
    } 
```

现在，从您的 Android 活动代码中，您只需要`execute()`这个 **DownloadWebPageTask**即可。

像，

```
DownloadWebPageTask task = new DownloadWebPageTask();
task.execute(new String[] { url }); 
```

有关更多信息，请查看本[教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

# php - 将字符串拆分为变量 PHP

> ID：11258665
> 
> 赞同：1
> 
> 时间：2012-06-29T08:45:51.317
> 
> 标签：php, arrays

我正在尝试找出泄漏以下 url 字符串的最佳方法：

> area-FFFFFF_miles-100_profession-web+developer

基本上分为以下几种：

```
$area = "FFFFFF";
$miles = 100;
$profession = "web developer"; 
```

但是我脑子有问题，无法真正找出最有效的方法。有什么建议么？

谢谢。

-编辑-我可以考虑任何缺失值，例如：

> area-FFFFFF_miles-_profession-web+developer

错过里程等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:50:15.010

```
$params = explode('_', $input);
foreach($params as $param) {
    $kv = explode('-', $param);
    ${$kv[0]} = str_replace('+', ' ', $kv[1]);
} 
```

这也解释了缺失值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:48:15.387

您可以使用 preg_split：

```
preg_split("/[_-]/",...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:53:28.170

像这样的东西：

```
$paramsStr = 'area-FFFFFF_miles-100_profession-web+developer';

$parts = explode('_', $paramsStr);
foreach($parts as $part) {
    $pair = explode('-', $part);
    ${$pair[0]} = $pair[1];
} 
```

# javascript - 在 Ext.Panel 中的项目之间添加边距

> ID：11258669
> 
> 赞同：0
> 
> 时间：2012-06-29T08:46:02.357
> 
> 标签：javascript, css, layout, extjs, extjs4

我有一个带有两个按钮的面板，用于另一个面板。现在它可以正确呈现按钮，但我想在它们之间添加一个边距。如何正确配置布局以获得这个？

![在此处输入图像描述](../Images/cfe35182ff55029e6ec3163b99a583e8.png)

```
 return Ext.create('Ext.panel.Panel', {
        width: 220,
        height: 35,
        border: false,
        collapsible: false,
        renderTo: renderTo,

        items : [    
            {
                xtype: 'button',
                scale: 'medium',
                text: this.exportButtonText,
                handler: function() {
                    var form = this.form.getForm();

                    if (form.isValid()) {
                        var values = form.getValues();
                        form.reset();

                        this.plugin.printSettings = values;

                        this.progressBar.show();
                        this.plugin.doPrint();
                    }
                },
                scope: this
            },
            {
                xtype: 'button',
                scale: 'medium',
                text: this.cancelButtonText,
                handler: function() {
                    me.close();
                },
                scope: this 
            }                
        ]
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:27:26.573

或将此添加到左按钮定义：

```
{
   margin: '0 5px 0 0'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:55:45.327

在它们之间添加：

```
{
 xtype: 'tbspacer',
 flex: 1
} 
```

# iphone - 使文本输入在文本字段中的一些空间后开始

> ID：11258674
> 
> 赞同：0
> 
> 时间：2012-06-29T08:46:32.727
> 
> 标签：iphone, objective-c, ios

如何使文本输入在 iPhone 的文本字段中的一些空格后开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T08:47:52.113

尝试这个

```
- (void) textFieldDidBeginEditing:(UITextField *)textField {
UIView *paddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 20)];
textField.leftView = paddingView;
textField.leftViewMode = UITextFieldViewModeAlways;
} 
```

希望这对你有帮助..

# android - android-query，为 listView 下载图片

> ID：11258675
> 
> 赞同：1
> 
> 时间：2012-06-29T08:46:37.370
> 
> 标签：android

我正在使用 android 查询来下载列表视图的每个元素中的图像，并且下载这些图像非常、非常、非常慢（图像远非沉重）。我喜欢每 5 分钟左右出现一个图像。首先我很惊讶我们必须为每个 convertView 实例化一个对象 AQuery，我想 lib 不会以这种方式排队线程。如果有人知道更好的库，我也可以感兴趣

我不知道我做错了什么，我希望有人能帮忙！

这是我的适配器的代码：

```
private class MainPagerListViewAdapter extends BaseAdapter {

    private ArrayList<Event> dataList;
    private LayoutInflater inflater;
    private Context context;

    public MainPagerListViewAdapter(Context context,
            ArrayList<Event> dataList) {

        this.inflater = LayoutInflater.from(context);
        this.dataList = dataList;
        Collections.sort(dataList, new ALaUneSort());
        this.context = context;
    }

    @Override
    public int getCount() {
        return dataList.size() + 1;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position,  View convertView, ViewGroup parent) {

        convertView = inflater.inflate(R.layout.main_pager_basic_fragment_item_layout, null);
        AQUtility.setDebug(true);
        AQuery aq = new AQuery(convertView);
        String thumbnail = dataList.get(position-1).file;
        aq.id(R.id.imageView).progress(R.id.progress).image(thumbnail, true, true, 0, 0, null, AQuery.FADE_IN);

        return convertView;
    } 
```

谢谢 ！

雷诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:05:11.340

请参阅下面的延迟加载列表视图的源链接，它可能会对您有所帮助。

[延迟加载列表视图](https://github.com/thest1/LazyList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:20:07.457

[我想你可以从这里](http://code.google.com/p/android-imagedownloader/)使用 ImageDownloader

多线程场景解释[here](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

# javascript - 如何使用javascript onclick创建表单元素输入框，标签

> ID：11258676
> 
> 赞同：1
> 
> 时间：2012-06-29T08:46:39.660
> 
> 标签：javascript, jquery

我想知道如何通过 onclick 函数使用 javascript 创建隐藏类型输入框和标签。

```
$().ready(function() {  
    $("#product").autocomplete("get_completeproducts", {            
        width: 406,
        matchContains: true,
        selectFirst: false
    });
});

<input type="text" value="" name="product" id="product" size="50">
<input type="button" value="Add to List" onclick="addprotolist()" name="select_pro"> 
```

我通过ajax自动完成获得上述输入框的值，用户将点击选择框，然后我要做的是，我必须在输入框下方添加列表选择的手机数量，如

```
<label>Samsung Galaxy Y<label><input type="hidden" value="778" name="pro_id[]">
<label>Samsung Galaxy Y Duos<label><input type="hidden" value="788" name="pro_id[]">
<label>Samsung Galaxy Y Plus<label><input type="hidden" value="728" name="pro_id[]">
.
.
.
<input type="submit" name="save" value="Save your list"> 
```

任何人都可以向我提供如何使用 javascript 或 jquery 编写代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:49:02.913

```
function addprotolist() {
  var str = '<label>'+ var_for_text +'</label><input type="hidden" value="'+ var_for_value +'" name="pro_id[]">';
  $('#yourform').append( str );
} 
```

### 笔记

如果你想使用循环追加多个`input`等`label`，不要在循环内调用 append，它会降低性能。像上面一样制作一个字符串`.append()`，最后调用循环。

**例如**

```
var str = '';
function addprotolist(inputObj) {

  // a typical example of inputObj may be
  // inputObj = [ {labelText: 'some 1', value: 'val1' }, {labelText: 'some 2', value: 'val2'} ]

  // loop
  for(var i = 0; i < inputObj.length; i++ ) {
    str += '<label>'+ inputObj[i].labelText +'</label><input type="hidden" value="'+ inputObj[i].value +'" name="pro_id[]">';
  }

  // call append outside of loop
  $('#yourform').append( str );
} 
```

* * *

但是这种方式使用`label`. `input`您必须通过包装它或通过指定`for`指向输入的属性将其连接到您的`id`：

```
<!-- Simple label example with for attribute -->  
<input type="radio" name="clickmebutton" id="clickmebutton">
<label for="clickmebutton">Click me</label>  

<!-- or more simply -->  
<label><input type="radio" name="clickmebutton"> Click me</label> 
```

来自[`label`MDN](https://developer.mozilla.org/en/HTML/Element/label)

# less - 使用 LESS 变量作为属性而不是值

> ID：11258677
> 
> 赞同：3
> 
> 时间：2012-06-29T08:46:41.687
> 
> 标签：less, mixins

我制作了以下两个 Mixin：

```
.responsive_color(@color, @response_color, @speed: 0.1s){
     color:                  @color;
    .transition(color, @speed);

    &:hover, &:active, &:focus{
        color:                  @response_color;
    }
}

.responsive_background(@color, @response_color, @speed: 0.1s){
    background-color:       @color;
    .transition(background-color, @speed);

    &:hover, &:active, &:focus{
        background-color:       @response_color;
    }
} 
```

由于这两个几乎相同，我想将它们组合成这样的东西：

```
.responsive(@property, @color, @response_color, @speed: 0.1s){
    @property:              @color;
    .transition(@property, @speed);

    &:hover, &:active, &:focus{
        @property:                  @response_color;
    }
} 
```

虽然这不会在 LESS 解析器（PHP 类）中导致错误，但它只是被忽略了。我也试过 @{property} 和 '@{property}' 但这两个都会导致错误。

有谁知道我如何输出@property 以进行正确解析？还是我试图做一些不可能的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-07T11:20:17.850

只是快速更新。现在功能在那里：

> 可以对属性进行插值，例如 @{prefix}-property: value;
> — [Less.js 1.6.0 更新日志](https://github.com/less/less.js/blob/master/CHANGELOG.md#160)

因此，如果您使用的是 Less 1.6 或更高版本，现在您实际上可以这样做：

```
@{property}: @response_color; 
```

[这个很棒的 SO 答案](https://stackoverflow.com/a/15443008/2816199)中的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T09:02:15.743

此处已回答了一个类似的问题，可能会对您有所帮助。LESS.js 框架中还没有该特定功能，但您可以通过一些小技巧绕过它，如下所述：

[如何在less中将属性名称作为参数传递给mixin](https://stackoverflow.com/questions/10689152/how-to-pass-a-property-name-as-an-argument-to-a-mixin-in-less)

# java - 为 Java 程序创建日志文件

> ID：11258688
> 
> 赞同：0
> 
> 时间：2012-06-29T08:47:10.780
> 
> 标签：java, logging, log4j

我有一个 java 程序，我为它创建了批处理文件来安排它在一段时间后运行。我想在加载该程序时为其生成日志文件，该日志文件必须包含日期时间和错误（如果有的话）。

如何为 Java 程序创建日志文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:52:39.837

如果您的需求如此简单，您很可能可以在批处理文件本身中进行日志记录。

执行以下操作

```
date /t >> log_file_path
time /t >> log_file_path
echo Starting execution >> log_file_path
java -jar your_java_app 2>> log_file_path
echo Finished execution >> log_file_path 
```

这`2>> log_file_path`意味着将标准错误流附加到您的日志文件中，其中将包括任何未捕获的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:52:56.430

研究[log4j](http://logging.apache.org/log4j/1.2/manual.html)记录器，实现它的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:39:44.603

您有多种选择：

*   使用命令行重定向运算符。
*   使用 I/O 系统并手动写入文件。
*   使用 log4j
*   使用 java.util.logging

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T06:32:11.167

我玩过与 Marc 基本相同的想法。只是一些简单的东西，你可以从中寻找灵感。

[这里](http://computersciencecs.blogspot.dk/2012/12/java-simple-log-files.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T08:53:55.283

使用 FileWriter 类在文件系统上创建一个新文件，然后使用 BufferedWriter 启动 I/O 流以写入该文件：

```
// create a new file with specified file name
FileWriter fw = new FileWriter("myFile.log");

// create the IO strem on that file
BufferedWriter bw = new BufferedWriter(fw);

// write a string into the IO stream
bw.out("my log entry");

// don't forget to close the stream!
bw.close(); 
```

为了捕捉 IO 异常，整个事情必须用 try/catch 包围。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T08:53:07.943

如果您需要更复杂的内容，请参阅[Logging 的 Java 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/logging/overview.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-06T10:29:31.973

创建日志并将其写入文件的简单表单：

```
Logger logger = Logger.getLogger(MyClass.class.getName());
FileHandler fileLog = new FileHandler("mylog.log");
logger.addHandler(fileLog); 
```

然后你可以作为一个普通的 Logger 使用：

```
logger.log(Level.INFO, "my log line");
logger.log(Level.WARNING, "ATTENTION warning line"); 
```

您可以访问此链接了解更多信息：[http ://www.vogella.com/tutorials/Logging/article.html](http://www.vogella.com/tutorials/Logging/article.html)

# c# - 访问字典内对象的属性

> ID：11258691
> 
> 赞同：1
> 
> 时间：2012-06-29T08:47:22.920
> 
> 标签：c#, collections, dictionary

我正在使用 C# 开发一个 winforms 应用程序。我有一个包含特定对象的字典，该对象具有属性 Id 和 DocType。如何访问 foreach 语句中每个对象的属性。我正在尝试使用以下代码，但无法正常工作。有什么帮助吗？

```
foreach (var doc in crs.DocDictionary)
            {
                Console.WriteLine( doc.Id);
                 Console.WriteLine(doc.docType);

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:49:19.940

如果你`foreach`在字典上，你会得到一个序列`KeyValuePair<TKey,TValue>`；尝试：

```
foreach (var doc in crs.DocDictionary.Values)
{
    Console.WriteLine(doc.Id);
    Console.WriteLine(doc.docType);
} 
```

或者：

```
foreach (var pair in crs.DocDictionary)
{
    Console.WriteLine(pair.Key);
    Console.WriteLine(pair.Value.Id);
    Console.WriteLine(pair.Value.docType);
} 
```

# javascript - 正则表达式替换未终止的括号

> ID：11258692
> 
> 赞同：3
> 
> 时间：2012-06-29T08:47:30.327
> 
> 标签：javascript, regex

我想替换字符串中所有不必要的中断。我写了一个正则表达式替换，但它抛出一个错误： SyntaxError: unterminated parenthetical

```
var str = "<H1>sdflk</H1><BR><BR><BR><BR><P>test</P><BR><BR><BR><BR>";
str.replace(/((</[a-zA-Z0-9]+>)(<BR>)+)/,"\$2"); 
```

但我没有看到缺少的括号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:49:20.187

您必须在重新添加`\`之前：`/`

```
/((<\/[a-zA-Z0-9]+>)(<BR>)+)/ 
```

另一种选择是使用`RegExp`：

```
re = new RegExp("((</[a-zA-Z0-9]+>)(<BR>)+)");
"<H1>sdflk</H1><BR><BR><BR><BR><P>test</P><BR><BR><BR><BR>".replace(re,"\$1"); 
```

# javascript - MVC FileUpload 文件大小客户端验证

> ID：11258695
> 
> 赞同：1
> 
> 时间：2012-06-29T08:47:39.207
> 
> 标签：javascript, asp.net-mvc, file-upload, validation

如何从客户端验证文件大小。它可以通过控制器控制，例如，

`if (file.ContentLength > 1048600) { }` 同样在客户端，我可以控制文件的名称和扩展名。但是如何控制大小？

`<input type="file" name="file" id="file" />`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:58:35.117

我认为目前没有跨浏览器的方式来做你想做的事，检查这个[问题](https://stackoverflow.com/questions/2934788/detecting-file-upload-size-on-the-client-side)

例如，这只能在基于 webkit 的浏览器中工作

```
var size = document.getElementById('file').files[0].size; 
```

# objective-c - 对复杂的 NSarray 进行排序

> ID：11258697
> 
> 赞同：0
> 
> 时间：2012-06-29T08:47:47.450
> 
> 标签：objective-c, ios

我有一个`NSArray *userInputs`，这个数组包含自定义对象`"UserInput"`。

```
@interface UserInput :NSObject {

NSString *page_id;

@end 
```

每个用户输入（`instance` of `UserInput`) 都属于`BookPage`.

```
@interface BookPage: NSobject {

NSString *pagePrefix;   ( exemple : pagePrefix = @"K1")
@end 
```

从每个`userInput`我认识`BookPage`的每个女巫来看，它都是这样的：

```
BookPage *bookPage = [self.book pageWithID:userInput.page_id]; 
```

我如何使用Key`array`对`userInputs`( `instances`of `UserInputs`) 进行排序。`pagePrefix`谢谢你的回答？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:06:26.620

您可以像这样对自定义对象的数组进行排序：

```
NSSortDescriptor *aSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"pagePrefix" ascending:YES]; 
[userInputs sortUsingDescriptors:[NSArray arrayWithObject:aSortDescriptor]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:25:11.557

我认为中间有一个 book 属性？

```
NSSortDescriptor *aSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"book.pagePrefix" ascending:YES]; 
[userInputs sortUsingDescriptors:[NSArray arrayWithObject:aSortDescriptor]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:56:33.700

您可以对数组进行排序（考虑到您的数组包含字符串） -

```
sortedArray = [userInput sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

# web-applications - 运行外部应用程序 Web 浏览器

> ID：11258699
> 
> 赞同：1
> 
> 时间：2012-06-29T08:47:52.280
> 
> 标签：web-applications, browser

请有人建议我如何从客户端的网络浏览器运行外部应用程序

像这样：

```
http://ucp-anticheat.org/monitor.html 
```

如果您单击该链接上的一行，浏览器会询问权限。

该网页通过在 Windows 上安装的服务来实现这一点。

我不知道如何谷歌它请给我一些建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T08:58:08.903

您需要创建客户端必须安装的客户端应用程序，并且基于协议，您可以基于该链接执行您的应用程序。

就像 utorrent 打开磁铁和种子文件一样

看看这里 [http://msdn.microsoft.com/en-us/library/aa767914.aspx](http://msdn.microsoft.com/en-us/library/aa767914.aspx)

# php - 对象之间的PHP MySQL连接共享

> ID：11258705
> 
> 赞同：2
> 
> 时间：2012-06-29T08:48:27.647
> 
> 标签：php, mysql, static, database-connection

我试图找出最好的办法是让程序中的多个对象连接到数据库。

我创建了一个带有静态连接变量的类。这似乎意味着只打开一个连接并且所有对象共享它。

```
class Database {
    public static $mysql;
    function __construct() {
        if (!isset(self::$mysql)) {
            echo "Make static connection\n";
            self::$mysql = new mysqli("localhost", "gamalert", "c45ualty", "events");
            if (self::$mysql->connect_errno) {
                echo "Failed to connect to MySQL: (" . $this->mysql->connect_errno . ") " . self::$mysql->connect_error;
            }
            echo self::$mysql->host_info . "\n";
        }
    }
} 
```

一个普通的对象版本。这将为每个使用它的对象创建一个新连接。

```
class Database {
    public $mysql;
    function __construct() {
        if (!isset($this->mysql)) {
            echo "Make connection\n";
            $this->mysql = new mysqli("localhost", "gamalert", "c45ualty", "events");
            if ($this->mysql->connect_errno) {
                echo "Failed to connect to MySQL: (" . $this->mysql->connect_errno . ") " . $this->mysql->connect_error;
            }
            echo $this->mysql->host_info . "\n";
        }
    } 
```

我想知道首选的选项是什么？我计划稍后测试性能差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:01:37.833

连接数据库是非常昂贵的操作，您应该避免创建多个连接。所以你应该放弃你的正常对象版本。

带有静态变量的选项更好，但并不理想。您需要记住在每个类中复制此构造函数。如果你想在这方面改变什么？然后，您需要打开所有课程并在任何地方进行更改。

我认为，你应该创建抽象对象`Database`并用你的类扩展它。

```
abstract class Database {
    protected static $mysql;
    function __construct() {
        if (!isset(self::$mysql)) {
            echo "Make static connection\n";
            self::$mysql = new mysqli("localhost", "gamalert", "c45ualty", "events");
            if (self::$mysql->connect_errno) {
                echo "Failed to connect to MySQL: (" . $this->mysql->connect_errno . ") " . self::$mysql->connect_error;
            }
            echo self::$mysql->host_info . "\n";
        }
    }
} 
```

然后创建将使用此连接的新对象很简单：

```
class ExtDatabase extends Database {
    public function __construct() {
        echo "Executing parent...";
        parent::__construct();
    }

    public function hostInfo() {
        //no problem with using connection there
        echo self::$mysql->host_info . "\n";
    }
} 
```

但是......它也不是很好的选择。最好将 Singleton 与连接和抽象数据库类一起使用。

# html - Chrome 为什么要包装这张桌子？

> ID：11258707
> 
> 赞同：3
> 
> 时间：2012-06-29T08:48:32.383
> 
> 标签：html, css, google-chrome, html-table

我可能遗漏了显而易见的内容，但是关于 Chrome 为何要包装此表中的最后一列的任何提示？它不应该计算列宽以使内容适合吗？（假设表格实际上并没有填满页面）。IE 和 Firefox 似乎都可以很好地渲染它（或者至少是我期望的渲染方式）。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<style>
.imgLink {
    margin: 0 8px;
}
</style>
</head>

<body>
    <table border="1">
        <tr>
        <td>Some text</td>
        <td>Some more text</td>
        <td><span class="imgLink"><a href=""><img src="iconEdit.gif">Edit</a></span>
            <span class="imgLink"><a href=""><img src="iconDelete.gif">Delete</a></span></td>
        </tr>
    </table>
</body>
</html> 
```

**编辑：**

该表未填充可用的页面宽度。

这是显示 Chrome 包装的屏幕截图：

![铬屏幕截图](../Images/09427f7be685ae6075696ed24d380bc1.png)

我实际上找到了一个解决方法——只需添加`white-space: nowrap;`到表格的最后一列。不过，我相信 Chrome 没有正确计算宽度，或者我可能遗漏了一些东西。我想知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:50:31.250

将 display:inline-block 添加到 imgLink 类：http: [//jsfiddle.net/surendraVsingh/MFZX2/4/](http://jsfiddle.net/surendraVsingh/MFZX2/4/)

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<style>
.imgLink {
    margin: 0 8px;
    display:inline-block;
}
</style>
</head>
<body>
    <table border="1">
        <tr>
        <td>Some text</td>
        <td>Some more text</td>
        <td><span class="imgLink"><a href=""><img src="https://dl.dropbox.com/u/19982181/a.png">Edit</a></span>
            <span class="imgLink"><a href=""><img src="https://dl.dropbox.com/u/19982181/a.png">Delete</a></span></td>
        </tr>
    </table>
</body>
</html> 
```

**Grodriguez 提出的另一个答案是将 white-space: nowrap 应用于最后一列。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:13:39.913

只是在这里猜测，但我相信 Chrome 在计算表格单元格的宽度时确实会出错。由于内联元素不应该有边距，它计算 td 的宽度而不考虑边距。但是无论如何它都会绘制带有边距的跨度，因此跨度要宽以适合 td 的计算宽度，从而使它们环绕。

所以可能的解决方案是：

*   制作跨度`inline-block`，因为内联块通常可以有边距，然后计算就可以了
*   计算最终的总宽度并给 td 该宽度
*   从跨度中删除边距并将其提供给 imgs
*   根本不使用边距，但给 td 一些填充

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:20:54.647

为了增加 SVS 的答案，我怀疑这`span`是一个内联元素，因此不允许有边距。我可以想象 chrome 是在说“好吧，如果你想要一个边距，你必须让它成为一个块元素”，从而使它成为一个块元素。现在作为一个块元素，它不会`span`并排放置两个s，换行也是如此。

`display`将 设置为与从样式`inline-block`中删除属性一样有效，这一事实几乎证实了这一点。`margin`

# c++ - C++ 我是否需要在任何地方为函数编写 throw 子句？

> ID：11258709
> 
> 赞同：4
> 
> 时间：2012-06-29T08:48:41.043
> 
> 标签：c++, exception, exception-handling, declaration

## 前

考虑有一个类和一个全局函数：

例如，这是`usefulfuncts.hpp`

```
void dosome(int a, int b) throw (std::exception); 
```

这是`usefulfuncts.cpp`

```
void dosome(int a, int b) throw (std::exception) {
   //...
} 
```

这是aclass.hpp

```
class aclass {
   // Members...
   friend void dosome(int a, int b) throw (std::exception);
   // Members...
}; 
```

## 之后（我希望是什么）

行！我想了解是否有必要每次都写该`throw`子句。例如，我可以这样做吗？

这是`usefulfuncts.hpp`

```
void dosome(int a, int b) throw (std::exception); 
```

这是`usefulfuncts.cpp`

```
void dosome(int a, int b) { /* OMITTING IT! */
   //...
} 
```

这是aclass.hpp

```
class aclass {
   // Members...
   friend void dosome(int a, int b); /* OMITTING IT */
   // Members...
}; 
```

这是正确的吗？仅将其放在主要声明中？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T08:50:06.830

省略异常规范意味着您的函数可以抛出***任何***异常。

异常规范不好。几乎没有任何编译器可以正确实现该功能。自 C++11 标准以来，它们已被弃用。事实上，异常规范被认为是一个失败的实验，即使它们是 C++03 标准的一部分。

**好读物：**
[对异常规范的务实看法](http://www.gotw.ca/publications/mill22.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T08:53:42.990

声明异常是一个坏主意。来自[http://www.gotw.ca/publications/mill22.htm](http://www.gotw.ca/publications/mill22.htm)：

> 道德#1：永远不要编写异常规范。
> 道德＃2：除了可能是一个空的，但如果我是你，我什至会避免。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:53:57.530

[异常规范在 C++11 中已弃用](http://en.wikipedia.org/wiki/C++11#Features_removed_or_deprecated)- 不要编写异常规范，除非要指定您的函数保证*不会*引发异常。

请注意，实际上提供这种保证比看起来更难——Herb Sutter 写[了很多关于异常和异常安全主题的文章](http://gotw.ca/gotw/020.htm)和[一本书](http://gotw.ca/publications/xc++.htm)。

# python - 如何检查 Google App Engine python27 是否运行线程安全模式？

> ID：11258710
> 
> 赞同：0
> 
> 时间：2012-06-29T08:48:45.240
> 
> 标签：python, multithreading, google-app-engine, python-2.7

请帮助如何检测 python27 运行时是否以线程安全模式运行或不是代码？

例如通知模块不兼容或在需要时应用线程代码。

我想将一些代码移植到 python27 作为线程安全和一些不是线程安全的，但不了解它在 Google App Engine 中是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:33:16.883

你不能有“一些线程安全，一些不是线程安全的”。这不可能。如果*某些*代码不是线程安全的，那么*没有*一个代码是线程安全的。这就是线程安全的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:14:53.393

您所要做的就是更改您的 app.yaml 并且您的应用程序将在线程中运行

```
threadsafe: true 
```

如果您的代码不是线程安全的，您将不会收到通知，这是您必须自己解决的问题。例如，如果您有一个要在请求中进行更改的全局变量，那么您可能会遇到问题。但总的来说，它不会抛出错误或任何东西，它只是不一致，如果你不了解这个概念，你以后可能会遇到麻烦。

# xcode - 如何更改titleLabel字体颜色，Xcode

> ID：11258713
> 
> 赞同：3
> 
> 时间：2012-06-29T08:49:03.570
> 
> 标签：xcode, uibutton, label, uicolor

这段代码似乎运行良好，修改了我的按钮的属性，除了 titleLabel 字体颜色没有改变。我可以更改字体、字体大小、阴影但不能更改颜色。尽管我正在尝试将其设置为黑色，但它当前显示为白色。我试过 button1.titleLabel.textColor = [UIColor blackColor]; 和 [button1.titleLabel setTextColor:[UIColor blackColor]]; 似乎认出了这个属性，但仍然是白色的。

```
[button1.titleLabel setTextColor:[UIColor blackColor]];        
[button1.titleLabel setFont:[UIFont boldSystemFontOfSize:20]];
[button1.titleLabel setShadowColor:[UIColor blackColor]];
[button1.titleLabel setShadowOffset:CGSizeMake(-1, 1)];
[button1 setTitle:@"Do it" forState:UIControlStateNormal];
button1.frame = CGRectMake(0, 0, 250, 40.0);
[myView addSubview:button1]; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-29T08:55:49.183

这行得通。

```
[button1 setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 
```

# windows-phone-7 - 如何发送原始数据包

> ID：11258718
> 
> 赞同：1
> 
> 时间：2012-06-29T08:49:16.113
> 
> 标签：windows-phone-7, visual-c++, c#-4.0, network-programming, windows-phone-7.1.1

我无法将原始数据包从 Windows Phone 发送到远程客户端。

`SocketType`在枚举原始数据包时也没有枚举值。

但是我仍然可以在 windows phone 市场上看到许多可以发送和接收原始数据包的应用程序。例如。ICMP 数据包

有人可以告诉我如何在 C# 中执行此操作，或者我是否需要编写一个 c++ dll 然后执行 P/Invoke？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:19:51.467

Windows phone 基于 Windows Embedded compact，以前称为 Windows CE。

当我使用 Windows CE 时，它不支持原始套接字。要发送原始数据包，您需要一个协议驱动程序。如果您不愿意编写自己的协议驱动程序，可以尝试[NDISUIO](http://msdn.microsoft.com/en-us/library/ms892535.aspx)。它是一个带有附加流驱动接口的协议驱动。当某些 ioctl 调用时，您可以指示它发送（和接收）原始数据包。

Windows phone 7 基于 Windows CE 6.0，但我认为 NDISUIO 也可以在这里获得。

# session - 在有界/无界到 HTTP 会话时获取通知

> ID：11258724
> 
> 赞同：6
> 
> 时间：2012-06-29T08:49:22.860
> 
> 标签：session, servlets, notifications

当我的对象有界/无界到 HTTP 的会话对象时，我如何得到通知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T13:12:38.100

让对象的类实现[`HttpSessionBindingListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionBindingListener.html)。

```
public class YourObject implements HttpSessionBindingListener {

    @Override
    public void valueBound(HttpSessionBindingEvent event) {
        // The current instance has been bound to the HttpSession.
    }

    @Override
    public void valueUnbound(HttpSessionBindingEvent event) {
        // The current instance has been unbound from the HttpSession.
    }

} 
```

如果您无法控制对象的类代码，因此您无法更改其代码，那么另一种方法是实现[`HttpSessionAttributeListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionAttributeListener.html).

```
@WebListener
public class YourObjectSessionAttributeListener implements HttpSessionAttributeListener {

    @Override
    public void attributeAdded(HttpSessionBindingEvent event) {
        if (event.getValue() instanceof YourObject) {
            // An instance of YourObject has been bound to the session.
        }
    }

    @Override
    public void attributeRemoved(HttpSessionBindingEvent event) {
        if (event.getValue() instanceof YourObject) {
            // An instance of YourObject has been unbound from the session.
        }
    }

    @Override
    public void attributeReplaced(HttpSessionBindingEvent event) {
        if (event.getValue() instanceof YourObject) {
            // An instance of YourObject has been replaced in the session.
        }
    }

} 
```

注意：当您仍在使用 Servlet 2.5 或更早版本时，请替换`@WebListener`为.`<listener>``web.xml`

# c++ - 可以在构造函数中创建 Pthreads 吗？

> ID：11258725
> 
> 赞同：2
> 
> 时间：2012-06-29T08:49:35.397
> 
> 标签：c++, multithreading, constructor, pthreads, threadpool

我想创建一个线程池。我有一个名为 ServerThread.cpp 的类，其构造函数应该执行以下操作：

```
ServerThread::ServerThread()
   {
         for( int i=0 ; i<init_thr_num ; i++ )
         {
              //create a pool of threads
              //suspend them, they will wake up when requests arrive for them to process
         }
   } 
```

我想知道在构造函数中创建 pthread 是否会导致任何应该避免遇到的未定义行为。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T08:54:02.450

您当然可以在构造函数中执行此操作，但应该注意 Scott Meyers 在其 Effective/More Effective C++ 书籍中明确解释的问题。

简而言之，他的观点是，如果在构造函数中引发任何类型的异常，那么您的半支持对象将不会被破坏。这会导致内存泄漏。因此，迈耶斯的建议是使用“轻量级”构造函数，然后`init`在对象完全创建后调用的方法中完成“繁重”工作。

此参数与在构造函数中创建 pthread 池并不严格相关（因此，您可能会争辩说，如果您只是创建它们然后立即挂起它们，则不会引发异常），而是关于在构造函数中做什么的一般考虑（阅读：良好做法）。

另一个需要考虑的是构造函数没有返回值。虽然确实（如果没有抛出异常）即使线程创建失败，您也可以使对象保持一致状态，但管理一种`init`或`start`方法的返回值可能会更好。

您还可以阅读有关该主题[的 SO 上的这个线程](https://stackoverflow.com/questions/2399619/should-a-c-constructor-do-real-work)，以及[这个](https://stackoverflow.com/questions/293967/how-much-work-should-be-done-in-a-constructor).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:29:32.877

从严格形式的角度来看，构造函数实际上只是一个与其他函数一样的函数，应该没有任何问题。实际上，可能存在一个问题：线程实际上可能在构造函数完成之前开始运行。如果线程需要完全构造`ServerThread`来操作，那么你就有麻烦了——这通常`ServerThread`是基类的情况，而线程需要与派生类交互。（这是一个很难发现的问题，因为使用最常用的线程调度算法，新线程*通常*不会立即开始执行。）

# liferay - 如何为自定义角色用户提供添加到页面的功能

> ID：11258730
> 
> 赞同：1
> 
> 时间：2012-06-29T08:49:52.807
> 
> 标签：liferay

我的要求是我有一个学生用户和学生角色。我已将此用户映射到学生角色。管理员将为学生角色提供一些 portlet。因此，当他登录门户时，他可以添加/装饰他可以访问的任何 portlet。我想提供访问受限的添加到页面功能。我希望现在很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:32:23.893

我建议您从阅读 Liferay 用户指南开始，尤其是可以在此处找到的部分：

[http://www.liferay.com/es/documentation/liferay-portal/6.1/user-guide/-/ai/managing-users-user-groups-organizations-sites-teams-and-roles](http://www.liferay.com/es/documentation/liferay-portal/6.1/user-guide/-/ai/managing-users-user-groups-organizations-sites-teams-and-roles)

这不是一个真正的编程问题，可能更适合在[ServerFault.com](https://serverfault.com/search?q=Liferay)上询问，除非您尝试在代码中执行此操作。

# git - 从 .gitmodules 恢复 git 子模块

> ID：11258737
> 
> 赞同：87
> 
> 时间：2012-06-29T08:50:21.033
> 
> 标签：git, git-submodules

我有一个文件夹，它是一个 git repo。它包含一些文件和 .gitmodules 文件。现在，当我执行`git init`then`git submodule init`时，后一个命令输出什么都不是。如何帮助 git 查看在 .gitmodules 文件中定义的子模块，而无需`git submodule add`再次手动运行？

更新：这是我的 .gitmodules 文件：

```
[submodule "vim-pathogen"]
    path = vim-pathogen
    url = git://github.com/tpope/vim-pathogen.git
[submodule "bundle/python-mode"]
    path = bundle/python-mode
    url = git://github.com/klen/python-mode.git
[submodule "bundle/vim-fugitive"]
    path = bundle/vim-fugitive
    url = git://github.com/tpope/vim-fugitive.git
[submodule "bundle/ctrlp.vim"]
    path = bundle/ctrlp.vim
    url = git://github.com/kien/ctrlp.vim.git
[submodule "bundle/vim-tomorrow-theme"]
    path = bundle/vim-tomorrow-theme
    url = git://github.com/chriskempson/vim-tomorrow-theme.git 
```

这是此目录的列表：

```
drwxr-xr-x  4 evgeniuz 100 4096 июня  29 12:06 .
drwx------ 60 evgeniuz 100 4096 июня  29 11:43 ..
drwxr-xr-x  2 evgeniuz 100 4096 июня  29 10:03 autoload
drwxr-xr-x  7 evgeniuz 100 4096 июня  29 12:13 .git
-rw-r--r--  1 evgeniuz 100  542 июня  29 11:45 .gitmodules
-rw-r--r--  1 evgeniuz 100  243 июня  29 11:18 .vimrc 
```

所以，毫无疑问，它是顶级的。git目录没有改变，只是`git init`完成了

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-29T08:54:32.943

`git submodule init`仅考虑已在索引中（即“暂存”）的子模块进行初始化。我会编写一个简短的脚本来解析`.gitmodules`，并为每个`url`和`path`对运行：

```
git submodule add <url> <path> 
```

例如，您可以使用以下脚本：

```
#!/bin/sh

set -e

git config -f .gitmodules --get-regexp '^submodule\..*\.path$' |
    while read path_key path
    do
        url_key=$(echo $path_key | sed 's/\.path/.url/')
        url=$(git config -f .gitmodules --get "$url_key")
        git submodule add $url $path
    done 
```

这取决于[`git-submodule.sh`脚本](https://github.com/git/git/blob/a3fbb2350dcd2d843d1d90b663521222aceb25fe/git-submodule.sh#L132)本身如何解析`.gitmodules`文件。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-08T20:06:49.727

扩展@Mark Longair 的答案，我编写了一个 bash 脚本来自动执行以下过程的第 2 步和第 3 步：

1.  克隆一个“样板”存储库以开始一个新项目
2.  删除 .git 文件夹并重新初始化为新的 repo
3.  重新初始化子模块，在删除文件夹之前提示输入

* * *

```
#!/bin/bash

set -e
rm -rf .git
git init

git config -f .gitmodules --get-regexp '^submodule\..*\.path$' > tempfile

while read -u 3 path_key path
do
    url_key=$(echo $path_key | sed 's/\.path/.url/')
    url=$(git config -f .gitmodules --get "$url_key")

    read -p "Are you sure you want to delete $path and re-initialize as a new submodule? " yn
    case $yn in
        [Yy]* ) rm -rf $path; git submodule add $url $path; echo "$path has been initialized";;
        [Nn]* ) exit;;
        * ) echo "Please answer yes or no.";;
    esac

done 3<tempfile

rm tempfile 
```

*注意：子模块将在其主分支的尖端签出，而不是与样板仓库相同的提交，因此您需要手动执行此操作。*

将 git config 的输出通过管道传输到读取循环会导致输入提示出现问题，因此它将其输出到临时文件。非常欢迎对我的第一个 bash 脚本进行任何改进 :)

* * *

非常感谢 Mark，[https](https://stackoverflow.com/a/226724/193494) : //stackoverflow.com/a/226724/193494，bash [：嵌套交互式读取也在使用 read 的循环中](https://stackoverflow.com/q/11704353/193494)，以及 tnettenba @ chat.freenode.net 帮助我找到了这个解决方案！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-11-12T20:30:14.630

扩展优秀的@Mark Longair 的答案以添加关于分支和回购名称的子模块。

```
#!/bin/sh

set -e

git config -f .gitmodules --get-regexp '^submodule\..*\.path$' |
    while read path_key path
    do
        name=$(echo $path_key | sed 's/\submodule\.\(.*\)\.path/\1/')
        url_key=$(echo $path_key | sed 's/\.path/.url/')
        branch_key=$(echo $path_key | sed 's/\.path/.branch/')
        url=$(git config -f .gitmodules --get "$url_key")
        branch=$(git config -f .gitmodules --get "$branch_key" || echo "master")
        git submodule add -b $branch --name $name $url $path || continue
    done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-27T00:20:32.040

我有一个类似的问题。`git submodule init`默默地失败了。

当我这样做时：

`git submodule add <url> <path>`

我有：

`The following path is ignored by one of your .gitignore files: ...`

我认为 .gitignore(d) 路径可能是原因。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-01-07T19:34:05.360

@mark-longair 的脚本更新版本。这个还支持分支，处理一些子模块已经存在的情况`.git/config`，并在必要时备份与子模块路径同名的现有目录。

```
git config -f .gitmodules --get-regexp '^submodule\..*\.path$' |
    while read path_key path
    do
        url_key=$(echo $path_key | sed 's/\.path/.url/');
        branch_key=$(echo $path_key | sed 's/\.path/.branch/');
        # If the url_key doesn't yet exist then backup up the existing
        # directory if necessary and add the submodule
        if [ ! $(git config --get "$url_key") ]; then
            if [ -d "$path" ] && [ ! $(git config --get "$url_key") ]; then
                mv "$path" "$path""_backup_""$(date +'%Y%m%d%H%M%S')";
            fi;
            url=$(git config -f .gitmodules --get "$url_key");
            # If a branch is specified then use that one, otherwise
            # default to master
            branch=$(git config -f .gitmodules --get "$branch_key");
            if [ ! "$branch" ]; then branch="master"; fi;
            git submodule add -f -b "$branch" "$url" "$path";
        fi;
    done;

# In case the submodule exists in .git/config but the url is out of date

git submodule sync;

# Now actually pull all the modules. I used to use this...
#
# git submodule update --init --remote --force --recursive
# ...but the submodules would check out in detached HEAD state and I 
# didn't like that, so now I do this...

git submodule foreach --recursive 'git checkout $(git config -f $toplevel/.gitmodules submodule.$name.branch || echo master)'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-13T02:02:42.947

我知道已经有一段时间了，但我想分享这个版本，`git config`它只调用一次，不需要脚本，也可以处理分支：

```
git config -f .gitmodules --get-regexp '^submodule\.' | perl -lane'
$conf{$F[0]} = $F[1]}{
@mods = map {s,\.path$,,; $_} grep {/\.path$/} keys(%conf);
sub expand{$i = shift; map {$conf{$i . $_}} qw(.path .url .branch)}
for $i (@mods){
    ($path, $url, $branch) = expand($i);
    print(qq{rm -rf $path});
    print(qq{git submodule add -b $branch $url $path});
}
' 
```

唯一的副作用是命令的输出，没有执行任何操作，因此您可以在提交之前进行审核。

这适用于控制台上的简单复制和粘贴，但放入 shell 脚本应该很简单。

示例输出：

```
rm -rf third-party/dht
git submodule add -b post-0.25-transmission https://github.com/transmission/dht third-party/dht
rm -rf third-party/libutp
git submodule add -b post-3.3-transmission https://github.com/transmission/libutp third-party/libutp
rm -rf third-party/libb64
git submodule add -b post-1.2.1-transmission https://github.com/transmission/libb64 third-party/libb64
rm -rf third-party/libnatpmp
git submodule add -b post-20151025-transmission https://github.com/transmission/libnatpmp third-party/libnatpmp
rm -rf third-party/miniupnpc
git submodule add -b post-2.0.20170509-transmission https://github.com/transmission/miniupnpc third-party/miniupnpc
rm -rf third-party/libevent
git submodule add -b post-2.0.22-transmission https://github.com/transmission/libevent third-party/libevent 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-14T09:57:37.097

对于 zsh 用户，请尝试我的函数，该函数`DRY_RUN=1`支持查看将运行哪些命令并且仅用于`git`解析文件而不是`sed`.

```
gsub_file() {(
  set -eu

  cd "$(git rev-parse --show-toplevel)"

  submodule_paths=(
    "${(@f)$(git config --file ./.gitmodules --get-regexp "path" | awk '{ print $2 }')}"
  )
  submodule_urls=(
    "${(@f)$(git config --file ./.gitmodules --get-regexp "url" | awk '{ print $2 }')}"
  )
  submodule_branches=(
    "${(@f)$(git config --file ./.gitmodules --get-regexp "branch" | awk '{ print $2 }')}"
  )

  sh_c() {
    echo + "$*"
    if [ "${DRY_RUN-}" ]; then
      return
    fi
    eval "$@"
  }

  for (( i=1; i <= ${#submodule_paths[@]}; i++ )) do
    p="${submodule_paths[$i]}"
    if [ -d "$p" ]; then
      continue
    fi

    url="${submodule_urls[$i]}"
    unset b
    if [ "${submodule_branches[$i]-}" ]; then
      b="-b ${submodule_branches[$i]}" 
    fi
    sh_c git submodule add "${b-}" "$url" "$p"
  done
)} 
```

# jquery - 如何创建类似于 chrome 书签栏的自定义下拉菜单？

> ID：11258744
> 
> 赞同：1
> 
> 时间：2012-06-29T08:50:40.143
> 
> 标签：jquery, html, css

我想创建一个下拉菜单，它可以在主 div 中包含一些书签。如果用户添加了更多书签并且书签不能包含在主 div 中，它们将隐藏在下拉菜单中。然后，用户可以将鼠标悬停在箭头上，隐藏的菜单会显示其余的书签。

![在此处输入图像描述](../Images/5920167145515bacb98ee335a57eb56d.png)

我需要检查下一个书签是否可以添加到主 div 并基于此（如果主 div 空间不足）将下一个书签附加到下拉菜单。

如果网上有类似的教程，请告诉我，不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:18:15.640

将其创建为单个无序列表。

要检查有多少 li 适合：

```
noOfLi = width of ul / width of li

$(ul.normal).width() to get width of ul and same function for li 
```

检查是否

```
noOfLi > $('ul.normal li').length //if not no problem yyay 
```

把所有的 li 都复印一份来处理。

```
var lis = $('ul.normal li').clone(); //now you have an array of li nodes 
```

将其拆分为两部分，一部分用于常规 ul，一部分用于下拉。

```
normalLis = lis.slice( 0, noOfLi - 1 );
dropdownLi = lis.slice( noOfLi, lis.length ); 
```

现在把 normalLis 放到 normal ul 中，下拉 lis 到 dropdown ul

```
$('ul.normal').html(normalLis)
$('ul.dropdown').html(dropdownLis) 
```

如果 lis 溢出，您还可以激活更多链接，并在其上添加悬停事件以在悬停时显示下拉菜单。

以上代码仅供参考，请勿复制粘贴。

# java - 将数据库记录存储到列表中

> ID：11258745
> 
> 赞同：2
> 
> 时间：2012-06-29T08:50:45.107
> 
> 标签：java, database, jsp, resultset

如何将数据库记录放入 ArrayList？我想在 jsp 文件中查看它。但是，ArrayList 中所有对象的值与我选择的数据库中的最后一条记录相同。

我的项目中有这些代码：

**IPBean.java**

```
public class IPBean {
    private String ip;
    private String userName;
    private String password;
    private int maxRetry;    

    public String getIp() {
        return ip;
    }    
    protected void setIp(String ip) {
        this.ip = ip;
    }    
    public String getUserName() {
        return userName;
    }    
    protected void setUserName(String userName) {
        this.userName = userName;
    }    
    public String getPassword() {
        return password;
    }    
    protected void setPassword(String password) {
        this.password = password;
    }    
    public int getMaxRetry() {
        return maxRetry;
    }    
    protected void setMaxRetry(int maxRetry) {
        this.maxRetry = maxRetry;
    }    
} 
```

**IPBeanMapper.java**

```
import java.sql.*;
import java.util.ArrayList;

public class IPBeanMapper {
    public ArrayList<IPBean> getIPList() throws SQLException, ClassNotFoundException {
        ArrayList<IPBean> ipList = new ArrayList<IPBean>();
        Connection conn = null;
        conn = ConnectionTools.getConnection();
        String SQL = "SELECT * FROM LIST_IPM";
        Statement statement = conn.createStatement();
        ResultSet rs = statement.executeQuery(SQL);
        IPBean ipBean = new IPBean();

        while (rs.next()){

            ipBean.setIp(rs.getString("IP"));
            ipBean.setMaxRetry(rs.getInt("NUM_OF_RETRY"));
            ipBean.setPassword(rs.getString("PASSWORD"));
            ipBean.setUserName(rs.getString("USERNAME"));

            ipList.add(ipBean);

        }
        ConnectionTools.attemptClose(rs);
        ConnectionTools.attemptClose(statement);
        ConnectionTools.attemptClose(conn);
        System.out.print(ipList.size());
        return ipList;
    }
} 
```

**查看.jsp**

```
<%@ page contentType="text/html;charset=UTF-8" language="java" import="DSIP.*" import="java.util.ArrayList" %>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>DSIP.Insert</title>
</head>

<body>
<jsp:useBean id="ipList" scope="application" class="IPBeanMapper"/>
<jsp:useBean id="bean" scope="application" class="IPBean"/>
<form name="form1" method="post" action="viewServlet">
    <table width="" border="">
        <tr bgcolor="#0099FF">
            <td width="90"><div align="center">ip</div></td>
            <td width="90"><div align="center">username</div></td>
            <td width="90"><div align="center">password</div></td>
            <td width="90"><div align="center">maxRetry</div></td>
        </tr>
        <%
            ArrayList<IPBean> list;
            list = ipList.getIPList();
            for (int i = 0; i < list.size(); i++){
                bean = list.get(i);
        %>
        <tr>
            <td><input name="ip"        type="text" size="15" value="<%=list.getIp()%>"></td>
            <td><input name="userName"  type="text" size="15" value="<%=bean.getUserName()%>"></td>
            <td><input name="password"  type="text" size="15" value="<%=bean.getPassword()%>"></td>
            <td><input name="maxRetry"  type="text" size="15" value="<%=bean.getMaxRetry()%>"></td>
        </tr>
        <%
            }
        %>
    </table>
</form>
</body>
</html> 
```

我的浏览器中的结果显示第一条和第二条记录是一致的，但实际上并不相同。所以，请有人帮我显示数据库中的真实记录。

查看我的结果：http: [//i.stack.imgur.com/2lIM9.png](http://i.stack.imgur.com/2lIM9.png)

非常感谢你帮助我。

此致，

法扎尔·里兹基

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:52:53.533

改变

```
 IPBean ipBean = new IPBean(); 

    while (rs.next()){ 
```

至

```
 while (rs.next()){

 IPBean ipBean = new IPBean(); 
```

这将为每行创建新实例，这是必需的，否则它将在单个实例中保持覆盖数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T08:52:39.390

你需要把它`IPBean ipBean = new IPBean();`放在while循环中

所以你的代码将变成 -

**IPBeanMapper.java**

```
while (rs.next()){ 
IPBean ipBean = new IPBean();   
.
. 
```

相同对象引用被添加到列表中的问题。因此，所有初始条目都与您的最后一条记录相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:01:50.767

我认为你不必把整个

```
ipBean bean = new IPBean(); 
```

进入循环。那将是一个不好的做法。只需声明

ipBean ipBean；

```
while(rs.next()){
      bean = new ipBean();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T08:53:16.487

```
 IPBean ipBean = new IPBean();

    while (rs.next()){

        ipBean.setIp(rs.getString("IP")); 
```

您需要为每一行创建一个新实例。移动`new IPBean`循环的内部。否则，您最终会在列表中多次使用相同的实例，并使用您在上次迭代中设置的值。

# algorithm - 比较评分算法

> ID：11258747
> 
> 赞同：0
> 
> 时间：2012-06-29T08:51:05.887
> 
> 标签：algorithm, rating

用例：假设对象的评级为 1 到 5 星。它已经是 50 票，平均评分 4.1。当用户进行投票（1-5星）时，需要重新计算评分。

如何实现这个逻辑？问题是我们不知道每张选票的价值，只知道当前评分和总票数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T08:55:06.653

`newRating = (oldRating * oldCount + currentVote) / (oldCount + 1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:54:39.830

好吧，基本算术告诉我们 (50 * 4.1 + newvote) / 51 与所有选票的平均值相同。如果您反复执行此操作，最终会出现舍入错误，并且经过一定数量的投票后，甚至不值得为单次投票平均而烦恼，但基本公式是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:00:34.647

假设：

```
f = (1+2+3)/3 = 6/3 = 2
  = (2+2+2)/3 = 6/3 = 2 
```

我们知道 f=g。如果我们知道当前评分为 2，总票数为 3，则 2*3=6 作为所有票数的总和。让我们将 4 添加到我们的平均值中，如下所示：

```
f = 6/3
f' = (6+4)/4 = 2.5 
```

# java - java：停止单例线程

> ID：11258752
> 
> 赞同：0
> 
> 时间：2012-06-29T08:51:28.730
> 
> 标签：java, multithreading

我有一个扩展 Thread 的类 XYZ，它也是一个单例（是的。我的应用程序需要它）。

在 run 方法中，我有这样的东西：

```
public void run() {
    service.start();
} 
```

**service.start()**花费的时间是巨大的。此外，我的应用程序并不总是需要运行线程，但无法提前决定，所以在启动应用程序时我正在启动这个线程。

现在，当应用程序不需要线程时，它会很快完成，我需要做的就是等待线程死亡。

我尝试使用 stop() 方法，但后来知道它已被弃用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:55:46.547

有关调用的替代方法，请参阅本文`stop()`

[http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:58:00.540

`stop`很久以前就被弃用了，不应该使用。线程终止是 Java 中的一个协作过程（即被中断的代码必须在被要求停止时执行某些操作，而不是中断代码）——一种方法是调用`thread.interrupt()`您需要中断的线程。

You then need to catch the generated interrupted exception in the running thread or check the interrupted status regularly. Once the running thread detects that is should stop what it's doing, you can then run any cleanup tasks as required and exit whatever you were doing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:54:08.450

发信号通知你的线程去做它的清理工作，你说这很快，然后就做一个 Thread.join。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T08:56:59.553

您的问题在很大程度上取决于`service.start()`. 如果它正在打开外部资源，那么您自然不能在没有适当清理的情况下闯入并杀死线程。该`start`过程需要明确编码，以便通过适当的清理实现可中断性。

# iphone - 在同一应用 iPhone 中的设备之间共享数据

> ID：11258753
> 
> 赞同：0
> 
> 时间：2012-06-29T08:51:31.143
> 
> 标签：iphone, xcode, ios5, core-data, icloud

我打算在 iPhone 上制作一个应用程序。用户可以在App中拍照或从他们的照片库（照片流）上传照片。完成此操作后，使用该应用程序的其他任何人都应该能够在应用程序中看到这些照片。解决这个问题的最佳方法是什么？我需要服务器还是有其他方法可以保存照片。我必须为此使用 iCloud 吗？我的印象是 iCloud 是为单个用户服务的，而不是作为服务器共享信息的。我应该改变我的这种印象吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:18:39.847

您需要将照片保存到某处的服务器。每当应用程序在给定设备上运行时，它都需要检查服务器以查看是否有新照片要显示。

您对 iCloud 的印象是正确的——它是用于在单个用户的设备之间同步数据，而不是用于在多个用户之间共享数据。

# android - 如何在android中的两个按钮之间画一条线？

> ID：11258756
> 
> 赞同：2
> 
> 时间：2012-06-29T08:51:37.087
> 
> 标签：android, android-layout, android-widget

我的 xml 布局中有两个按钮，如下所示。

![在此处输入图像描述](../Images/29ccffbf23c6d7f020fc4c6c1cf1fe9f.png)

我为此按钮单击使用了一个活动。我想在这些按钮之间画一条线，如图所示。有人可以帮助我通过使用代码或 XML 在这之间划清界限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:09:25.207

您可以使用自定义视图来绘制线条，例如 LineView 并覆盖`onDraw`.

```
@Override
protected void onDraw(Canvas canvas)
{
    canvas.drawLine(0, 0, getWidth(), getHeight(), m_paint);
} 
```

然后使用 XML 来实现你想要的布局。

```
<com.android.drawable.LineView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/leftButton"
    android:layout_toLeftOf="@id/rightButton"
    android:layout_below="@id/leftButton"
    android:layout_above="@id/rightButton"
    /> 
```

# php - PHP处理制表符分隔的txt逐行进度/状态栏

> ID：11258760
> 
> 赞同：1
> 
> 时间：2012-06-29T08:51:51.220
> 
> 标签：php, file, progress-bar, file-read

我有一个导入模块，我必须逐行处理一个制表符分隔的 txt 文件。问题是该文件可能有超过 250K 行。我必须在 MySQL 数据库中进行 SELECT 和 UPDATE 或 INSERT 操作。这可能会为服务器带来长达 3-4 小时的工作。我想放置一个状态栏，显示我们在处理中的位置。我曾尝试在处理文件的行时仅更新输入，但浏览器无法真正输出它，它只是冻结了。我怎样才能输出处理的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:59:22.613

您必须异步执行此操作，否则从浏览器到服务器的连接将超时。

您可以在数据库中创建另一个表来保存文件处理的进度 - 您可以每处理 100 或 1000 行更新该表中的记录。

在客户端，您可以通过询问后端并从该进度表中获取值来更新 javascript 中的进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:03:16.600

Maype 一个简单的 flush() 将完成这项工作：

```
// ...

$done++
if ( ($done % 1000) == 0 ) {
    print "$done of $total lines processed<br />";
    flush();
}

// ... 
```

如果您使用 Windows-Server，您可能会查看文档页面的评论，似乎有一些怪癖： http: [//php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)

# iphone - MPMoviePlayerController 截屏但只显示黑屏

> ID：11258765
> 
> 赞同：3
> 
> 时间：2012-06-29T08:52:10.893
> 
> 标签：iphone

我在播放 MPMoviePlayerController 时截取屏幕截图。完美保存屏幕截图，但图像只有黑色。我使用下面的代码。

```
UIGraphicsBeginImageContext(self.moviePlayerController.view.frame.size);
[self.moviePlayerController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:13:37.810

最后我解决了这个问题......我正在使用这个代码......完美工作......谢谢大家......

```
- (void)captureScreenShot
{
    CGImageRef originalImage = UIGetScreenImage();
    CGImageRef videoImage = CGImageCreateWithImageInRect(originalImage, CGRectMake(0, 66, 320, 230));            
    UIImage *snapShotImage = [UIImage imageWithCGImage:videoImage];
    UIImageWriteToSavedPhotosAlbum(snapShotImage, nil, nil, nil);
    CGImageRelease(originalImage);                
    CGImageRelease(videoImage);  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:04:42.893

您可以尝试`thumbnailImageAtTime`使用`MPMoviePlayerController`.

```
UIImage *aThumbnail = [player thumbnailImageAtTime:timeCode timeOption:MPMovieTimeOptionExact];
//timeCode is a time within the video length, for example: 5 seconds. 
```

# android - 开发漫画书

> ID：11258767
> 
> 赞同：-2
> 
> 时间：2012-06-29T08:52:12.230
> 
> 标签：android, effects

我希望开发一个包含漫画书供查看的android应用程序。Google Play 有一个我想效仿的 Marvel Comics 应用程序，因为我喜欢我的应用程序中的那种类型效果。但是，我无法启动

效果是当用户双击漫画部分时，只有图像的那部分会缩放以适应屏幕。使用滑动效果可以看到图像上的其他区域，但它仍然处于放大状态。一旦用户完成查看放大的图像，再次双击将使用户返回原始屏幕。

有什么好的链接让我看看吗？这个功能叫什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:22:48.653

最后我使用 HTML5 来制作这种类型的动画。并且它在所有设备中都能完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:01:23.727

我会看看这个 -[是否有一个内置的 API 用于处理 Android 中的捏缩放功能](https://stackoverflow.com/questions/2645648/is-there-a-built-in-api-for-handling-pinch-zoom-functionality-in-android)- 它涵盖了缩放 API，还有这个 -[如何检测视图上的双击？](https://stackoverflow.com/questions/2640119/how-to-detect-doubletap-on-a-view)- 包括双击视图

# android - 销毁一个安卓服务

> ID：11258769
> 
> 赞同：4
> 
> 时间：2012-06-29T08:52:20.487
> 
> 标签：android, service, destroy

我在我的 android 应用程序中使用了一项服务，当日历被日历激活时会调用该服务。当服务被激活时，我希望它在`OnStart()`完成其代码后被该方法销毁。

```
My OnStart() method:

@Override
public void onStart(Intent intent, int startId) {
super.onStart(intent, startId);

Vibrator vi = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

vi.vibrate(5000);

Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();

    //CODE HERE TO DESTROY SERVICE??

} 
```

这基本上意味着当服务被调用时，它运行`OnStart()`方法中的代码，我希望它自行销毁。任何想法，可以做到这一点的方法？

谢谢，杰克。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T09:11:25.690

你可以调用**`stopSelf()`**onCreate 来停止服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T06:40:59.583

有两种方法可以杀死服务 stopService() 和 stopSelf 您可以在 onCreate 方法中调用 stopSelf() 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T09:10:00.977

你可以调用 onStop() 或 mService.unbind();

# python - 使用 ORM 的情况（SQLalchemy）

> ID：11258770
> 
> 赞同：46
> 
> 时间：2012-06-29T08:52:21.487
> 
> 标签：python, orm, sqlalchemy

我将 SQLAlchemy 与 ORM paragdim 一起使用。我无法找到一种方法来执行 CASE WHEN 指令。我在网上找不到有关此的信息。

可能吗 ？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-29T09:08:56.327

请参阅文档页面上的[sqlalchemy.sql.expression.case](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html?highlight=case#sqlalchemy.sql.expression.case)函数和更多示例。但它看起来像这样（逐字从链接到的文档中）：

```
case([(orderline.c.qty > 100, item.c.specialprice),
      (orderline.c.qty > 10, item.c.bulkprice)
    ], else_=item.c.regularprice)
case(value=emp.c.type, whens={
        'engineer': emp.c.salary * 1.1,
        'manager':  emp.c.salary * 3,
    }) 
```

**edit-1**：（*回答评论）*当然可以，请参见下面的示例：

```
class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True, autoincrement=True)
    first_name = Column(String)
    last_name = Column(String)

xpr = case([(User.first_name != None, User.first_name + " " + User.last_name),],
        else_ = User.last_name).label("full_name")

qry = session.query(User.id, xpr)
for _usr in qry:
    print _usr.fullname 
```

有关在混合属性中使用的示例，另请参阅[使用混合。](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#using-a-hybrid)`case`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-12-23T22:27:18.680

在这种情况下，我让它与聚合函数一起使用`func.sum`

### 我的示例代码

```
from sqlalchemy import func, case

my_case_stmt = case(
    [
        (MyTable.hit_type.in_(['easy', 'medium']), 1),
        (MyTable.hit_type == 'hard', 3)
    ]
)

score = db.session.query(
    func.sum(my_case_stmt)
).filter(
    MyTable.success == 1
)

return score.scalar() 
```

### 我的用例

MyTable 看起来像这样：

```
|   hit_type     |  success |  
-----------------------------  
|   easy         |   1      |  
|   medium       |   1      |  
|   easy         |   0      |  
|   hard         |   1      |  
|   easy         |   0      |
|   easy         |   1      |  
|   medium       |   1      |  
|   hard         |   1      | 
```

`score`计算如下： `score = num_easy_hits + num_medium_hits + (3 * num_hard_hits)`

4 次成功的简单/中等打击和 2 次成功的重击为您提供`(4 + (2*3)) = 10`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T07:44:53.763

这是文档中的链接： [http ://docs.sqlalchemy.org/en/latest/core/sqlelement.html?highlight=case#sqlalchemy.sql.expression.Case](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html?highlight=case#sqlalchemy.sql.expression.Case)

但是看到这些例子让我很困惑，而且没有可运行的代码。我尝试了很多次，遇到了很多问题。

最后，我找到了两种在 sqlalchemy 中实现“Case when”的方法。

第一种方式：

顺便说一句，我的场合是我需要根据用户是否登录来屏蔽电话字段。

```
 @staticmethod
    def requirement_list_common_query(user=None):
      `enter code here`  phone_mask = case(
            [
                (db.true() if user else db.false(), Requirement.temp_phone),
            ],
            else_=func.concat(func.left(Requirement.temp_phone, 3), '****', func.right(Requirement.temp_phone, 4))
        ).label('temp_phone')
        query = db.session.query(Requirement.company_id,
                                 Company.uuid.label('company_uuid'),
                                 Company.name.label('company_name'),
                                 Requirement.uuid,
                                 Requirement.title,
                                 Requirement.content,
                                 Requirement.level,
                                 Requirement.created_at,
                                 Requirement.published_at,
                                 Requirement.end_at,
                                 Requirement.status,
                                 # Requirement.temp_phone,
                                 phone_mask,
                                 User.name.label('user_name'),
                                 User.uuid.label('user_uuid')
                                 )
        query = query.join(Company, Company.id == Requirement.company_id) \
            .join(User, User.id == Requirement.user_id)
        return query 
```

需求是我的模型之一。如果用户已登录，则方法“requirement_list_common_query”中的用户参数是登录用户。

第二种方式：这里的场合是我想根据他们的收入对员工进行分类。

模型是：

```
class Dept(Base):
    __tablename__ = 'dept'
    deptno = Column(Integer, primary_key=True)
    dname = Column(String(14))
    loc = Column(String(13))

    def __repr__(self):
        return str({
            'deptno': self.deptno,
            'dname': self.dname,
            'loc': self.loc
        })

class Emp(Base):
    __tablename__ = 'emp'
    empno = Column(Integer, primary_key=True)
    ename = Column(String(10))
    job = Column(String(9))
    mgr = Column(Integer)
    hiredate = Column(Date)
    sal = Column(DECIMAL(7, 2))
    comm = Column(DECIMAL(7, 2))
    deptno = Column(Integer, ForeignKey('dept.deptno'))

    def __repr__(self):
        return str({
            'empno': self.empno,
            'ename': self.ename,
            'job': self.job,
            'deptno': self.deptno,
            'comm': self.comm
        }) 
```

这是代码：

```
from sqlalchemy import text
income_level = case(
    [
        (text('(emp.sal + ifnull(emp.comm,0))<1500'), 'LOW_INCOME'),
        (text('1500<=(emp.sal + ifnull(emp.comm,0))<3500'), 'MIDDLE_INCOME'),
        (text('(emp.sal + ifnull(emp.comm,0))>=3500'), 'HIGH_INCOME'),
    ], else_='UNKNOWN'
).label('income_level')
emps = sess.query(Emp.ename, label('income', Emp.sal + func.ifnull(Emp.comm, 0)),
                  income_level).all()
for item in emps:
    print(item.ename, item.income, item.income_level) 
```

为什么我使用“文本”？因为 SQLAlchemy 1.2.8 中这样的代码无法实现。正如@van 所说，我已经尝试了很长时间，但我找不到这样的方法：

```
case([(orderline.c.qty > 100, item.c.specialprice),
      (orderline.c.qty > 10, item.c.bulkprice)
    ], else_=item.c.regularprice)
case(value=emp.c.type, whens={
        'engineer': emp.c.salary * 1.1,
        'manager':  emp.c.salary * 3,
    }) 
```

希望它会有所帮助！

# php - if($variable!='') 澄清

> ID：11258774
> 
> 赞同：1
> 
> 时间：2012-06-29T08:52:38.770
> 
> 标签：php

```
if($hOne!='') {
   echo 'yes';
 } else {
   echo 'no';
} 
```

所以有一段时间我一直在使用上面的代码来确定 id X 变量已设置，现在这工作正常，直到在 wordpress 网站上工作（我不会进入太多细节）但基本上最初从未接触过变量和按预期工作，如果您输入一个值然后删除该值，它似乎认为它已被设置。

我解决这个问题的一种方法是使用下面的代码，我的问题是，有没有更好的方法来做到这一点。

干杯

```
if (preg_match('/[A-Za-z]/i', $hone)) {
       echo 'yes';
     } else {
       echo 'no';
    } 
```

* * *

**结果**使用了以下按预期工作的方法，谢谢大家：

```
if(isset($hone) and
       !empty($hone)) {
        echo '1';
    } else {
        echo '2';
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T08:56:27.960

对。我的建议是回去阅读 PHP 文档。至少花一两个星期的时间来了解大多数部分。

你想用isset，还是空的。

```
if (isset($hOne)) { } 
```

将检查变量是否存在，

```
if (empty($hOne)) { } 
```

检查它是否已设置但为空。

为了帮助您学习 PHP，我建议您将其粘贴在应用程序的顶部：

```
$test_server = $_SERVER['SERVER_NAME'] == "127.0.0.1" || $_SERVER['SERVER_NAME'] == "localhost" || substr($_SERVER['SERVER_NAME'],0,3) == "192"; 

ini_set('display_errors',$test_server);
ini_set('display_startup_errors',$test_server);

error_reporting(E_ALL|E_STRICT); 
```

（或者，如果您不在本地工作，只需将 $test_server 设置为 1。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:59:44.907

`isset`和`empty`函数必须用于确定变量是否存在并且是否为非空。

但是这个：

```
if (preg_match('/[A-Za-z]/i', $hone)) {
   echo 'yes';
} else {
   echo 'no';
} 
```

检查变量（字符串）是否包含几乎一个字母（不管大小写）。实际上它也很愚蠢（它使用`/../i`-- 忽略大小写和模式`A-Za-z`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T08:59:56.977

你不应该只`if ($x != '')`用来检查是否设置了变量。例如，我可以这样设置变量`$x = ''`。您应该检查它是否像这样设置：`isset($x)`并检查它是否已设置但为空：`empty($x)`

# azure - 在 Azure VM 上访问 Internet

> ID：11258777
> 
> 赞同：5
> 
> 时间：2012-06-29T08:52:40.457
> 
> 标签：azure, azure-worker-roles

最近，我部署了一个工作角色，它将连接到互联网并尝试访问一些网站（例如：）`http://somewebsite.redmond.corp.microsoft.com/en-us/library/`。

它成功访问了我在模拟器上运行的开发机器上的网站。但是在我将工作角色部署到的 Azure 虚拟机上，它无法访问网站。我尝试在 IE 中打开虚拟机浏览器上的网站，它也无法打开。

你遇到过类似的问题吗？你如何处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:29:58.593

这与访问 Internet 无关。您提供的 URL 不是公开可见的（至少我无法从我的机器上访问它）。这意味着您正在尝试访问防火墙后面的 URL，可能需要 VPN 才能访问。

Windows Azure VM，无论是辅助角色、Web 角色还是虚拟机，都位于公共云中，并且不受任何防火墙的影响。如果您想从 Windows Azure VM 访问它，您需要设置一个虚拟网络，该网络在 2012 年春季更新中引入。更多信息[在这里](http://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:18:38.783

尝试为此使用提升的权限。曾经，我尝试通过角色的 RDP 访问互联网，当时它正在工作，因此您应该可以访问互联网。但是，如果尝试下载 exes 并执行，我认为这是不可能的。请在此处发布结果。

问候，维杰。

# c - 带有 Linux Socket write() 的错误文件描述符 错误文件描述符 C

> ID：11258781
> 
> 赞同：4
> 
> 时间：2012-06-29T08:52:52.530
> 
> 标签：c, linux, sockets, tcp, file-descriptor

我对 write(2) 函数有一个有趣的问题。PrepareResponseForSetCoordinates 函数会导致写入时出现错误的文件描述符错误。

这是错误行： perror("ERROR writing to socket"); 总输出：写入套接字时出错：文件描述符错误

我确信我已经建立了连接，因为 PrepareResponseForConnectionTest 就像一个魅力。

你能知道错误的原因吗？

当我使用 gcc 作为编译器时，没有问题。之后，由于使用了多个新的 cpp 源，我使用 g++ 作为编译器，并且出现此错误。

问候

在我的代码下面：

```
#define MAX_PMS_MESSAGE_LEN (4096)
unsigned char baCommBuffer[MAX_PMS_MESSAGE_LEN];
unsigned char PrepareResponseForSetCoordinates(void)
{
    unsigned char baTempBuff[255]={0};
    unsigned short bCnt=0,i=0,bCsum=0,bCnt2=0;
time_t lEpochTime;
time_t lSessionTime;

memset(baTempBuff,0,sizeof(baTempBuff));
memset(baCommBuffer,0,sizeof(baCommBuffer));
bzero(baCommBuffer,MAX_PMS_MESSAGE_LEN);
bzero(baTempBuff,sizeof(baTempBuff));

lEpochTime = time(NULL);
baCommBuffer[bCnt++]    =   START_CHAR;
baCommBuffer[bCnt++]    =   START_CHAR;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
sprintf((char*)baTempBuff,"%ld",(unsigned long)lEpochTime);
memcpy(baCommBuffer+bCnt,baTempBuff,10);

bzero(baTempBuff,sizeof(baTempBuff));
bCnt+=10;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
//  lSessionTime = time(NULL);
if(SPMSMessage.lSessionID)
lSessionTime = SPMSMessage.lSessionID; 
else
lSessionTime=lEpochTime;
sprintf((char*)baTempBuff,"%ld",(unsigned long)lSessionTime);
memcpy(baCommBuffer+bCnt,baTempBuff,10);
bzero(baTempBuff,sizeof(baTempBuff));
bCnt+=10;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   PMC_ID;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   PMS_ID;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'R';
baCommBuffer[bCnt++]    =   'E';
baCommBuffer[bCnt++]    =   'P';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'C';
baCommBuffer[bCnt++]    =   'O';
baCommBuffer[bCnt++]    =   'O';
baCommBuffer[bCnt++]    =   'S';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
if(SPMSMessage.bParam== SET_COOR_CAM1_PARAM)
{
baCommBuffer[bCnt++]    =   '2';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'O';
baCommBuffer[bCnt++]    =   'N';
baCommBuffer[bCnt++]    =   'E';
baCommBuffer[bCnt++]    =   PARAMETER_SEPERATOR;
baCommBuffer[bCnt++]    =   'A';
baCommBuffer[bCnt++]    =   'C';
baCommBuffer[bCnt++]    =   'K';
}
else if(SPMSMessage.bParam== SET_COOR_CAM2_PARAM)
{
baCommBuffer[bCnt++]    =   '2';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'T';
baCommBuffer[bCnt++]    =   'W';
baCommBuffer[bCnt++]    =   'O';
baCommBuffer[bCnt++]    =   PARAMETER_SEPERATOR;
baCommBuffer[bCnt++]    =   'A';
baCommBuffer[bCnt++]    =   'C';
baCommBuffer[bCnt++]    =   'K';    
}
else
{
baCommBuffer[bCnt++]    =   '1';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'N';
baCommBuffer[bCnt++]    =   'A';
baCommBuffer[bCnt++]    =   'C';
baCommBuffer[bCnt++]    =   'K';        
}
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   '*';
memset(baTempBuff,0,sizeof(baTempBuff));
bCsum = CalculateCheckSum(baCommBuffer);
sprintf((char*)baTempBuff,"%.2X",bCsum);
memcpy(baCommBuffer+bCnt,baTempBuff,2);
bzero(baTempBuff,sizeof(baTempBuff));
bCnt+=2;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   END_CHAR;
baCommBuffer[bCnt++]    =   END_CHAR;

#ifdef _DEBUG_DEEP_DETAILED
            if(EDebugDeepDetail<GetDebugLevelOfPMC())
            {
                    printf("WILL BE sent: %s uzunluk:%d\n", baCommBuffer,bCnt);
                    sprintf(caLogStr,"WILL BE sent: %s uzunluk:%d\n", baCommBuffer,bCnt);
                    PrintToLogFile(caLogStr);
                    memset(caLogStr,0,MAX_LOG_STRLEN);
                }
#endif

        if((ETcpConnectionState== ETcpStateConnected) || (ETcpConnectionState== ETcpStateConnectedAndWaitingToWrite) )
        {

            if (write(sockfd,baCommBuffer,bCnt) < 0)
            {
                #ifdef _DEBUG_DETAILED
                if(EDebugDetail<GetDebugLevelOfPMC())
                {
                     perror("ERROR writing to socket"); 
                     PrintToLogFile("ERROR writing to socket");

                 }
                 #endif
             return 0;
            }
                #ifdef _DEBUG_DEEP_DETAILED
                if(EDebugDeepDetail<GetDebugLevelOfPMC())
                {
                    printf("sent: %s uzunluk:%d\n", baCommBuffer,bCnt);
                    sprintf(caLogStr,"sent: %s uzunluk:%d\n", baCommBuffer,bCnt);
                    PrintToLogFile(caLogStr);
                    memset(caLogStr,0,MAX_LOG_STRLEN);
                }
                #endif
        }
        else
        {
                #ifdef _DEBUG_DETAILED
                    if(EDebugDetail<GetDebugLevelOfPMC())
                    {
                    PrintToLogFile("Henüz Bağlantı Yok\n");
                    }
                #endif
                return 0;
        }

return (bCnt); 
```

}

在下面，您可以看到运行时没有错误的代码：

```
unsigned char PrepareResponseForConnectionTest(void)
{

unsigned char baTempBuff[20]={0};
unsigned char bCnt=0,i=0,bCsum=0;
time_t lEpochTime;
time_t lSessionTime;

memset(baTempBuff,0,sizeof(baTempBuff));
memset(baCommBuffer,0,sizeof(baCommBuffer));
bzero(baCommBuffer,MAX_PMS_MESSAGE_LEN);
bzero(baTempBuff,sizeof(baTempBuff));

lEpochTime = time(NULL);
baCommBuffer[bCnt++]    =   START_CHAR;
baCommBuffer[bCnt++]    =   START_CHAR;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
sprintf((char*)baTempBuff,"%ld",(unsigned long)lEpochTime);
memcpy(baCommBuffer+bCnt,baTempBuff,10);

bzero(baTempBuff,sizeof(baTempBuff));
bCnt+=10;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;

lSessionTime = SPMSMessage.lSessionID; 
sprintf((char*)baTempBuff,"%ld",(unsigned long)lSessionTime);
memcpy(baCommBuffer+bCnt,baTempBuff,10);
bzero(baTempBuff,sizeof(baTempBuff));
bCnt+=10;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   PMC_ID;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   PMS_ID;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'R';
baCommBuffer[bCnt++]    =   'E';
baCommBuffer[bCnt++]    =   'P';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'C';
baCommBuffer[bCnt++]    =   'O';
baCommBuffer[bCnt++]    =   'N';
baCommBuffer[bCnt++]    =   'T';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   '1';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   'A';
baCommBuffer[bCnt++]    =   'C';
baCommBuffer[bCnt++]    =   'K';
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   '*';
memset(baTempBuff,0,sizeof(baTempBuff));
bCsum = CalculateCheckSum(baCommBuffer);
sprintf((char*)baTempBuff,"%.2X",bCsum);
memcpy(baCommBuffer+bCnt,baTempBuff,2);
bzero(baTempBuff,sizeof(baTempBuff));
bCnt+=2;
baCommBuffer[bCnt++]    =   PACKET_SEPERATOR;
baCommBuffer[bCnt++]    =   END_CHAR;
baCommBuffer[bCnt++]    =   END_CHAR;

        if((ETcpConnectionState== ETcpStateConnected) || (ETcpConnectionState== ETcpStateConnectedAndWaitingToWrite) )
        {

            if (write(sockfd,baCommBuffer,bCnt) < 0)
            {
             perror("ERROR writing to socket\n");
             PrintToLogFile("ERROR writing to socket\n");
            }
                #ifdef _DEBUG_DEEP_DETAILED
                if(EDebugDeepDetail<GetDebugLevelOfPMC())
                {
                    printf("sent: %s uzunluk:%d\n", baCommBuffer,bCnt);
                    sprintf(caLogStr,"sent: %s uzunluk:%d\n", baCommBuffer,bCnt);
                    PrintToLogFile(caLogStr);
                    memset(caLogStr,0,MAX_LOG_STRLEN);
                }
                #endif
                return 0;
        }
        else
        {
                #ifdef _DEBUG_DETAILED
                    if(EDebugDetail<GetDebugLevelOfPMC())
                    {
                    PrintToLogFile("There is no connection yet\n");
                    }
                #endif
                //return 0;
        }

        //printf("\n\n");
return (bCnt);
} 
```

这是我的 InitializeConnection 函数和 ConnectToServer 函数：

```
void InitializeTcpConnection(int argc, char *argv[])
{
   int optval;
   socklen_t optlen = sizeof(optval);
ETcpConnectionState = ETcpStateNotConnected;
    if (argc < 3) 
    {
       fprintf(stderr,"usage: %s hostname_or_ip port\n", argv[0]);
       #ifdef _DEBUG_PROCESS
       if(EDebugProcess<GetDebugLevelOfPMC())
       {
        sprintf(caLogStr,"usage: %s hostname_or_ip port\n", argv[0]);
        PrintToLogFile(caLogStr);
        memset(caLogStr,0,MAX_LOG_STRLEN);
        }
       #endif
       exit(0);
    }
    portno = atoi(argv[2]);
    /* int socket(domain,type,protocol)
     * socket creates an endpoint for communication and returns a descriptor
     * AF_INET: ARPA Internet protocols
     * SOCK_STREAM: sequenced, two way connection based byte streams
     * 
     * return: Socket returns a non-negative descriptor on success.
     * On failure it returns -1 and sets errno to indicate the error
     * */
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) {
        #ifdef _DEBUG_PROCESS
        if(EDebugProcess<GetDebugLevelOfPMC())
        {
        perror("ERROR creating socket");
        PrintToLogFile("ERROR creating socket\n");

        }
        #endif
        exit(1);
    }

    /**/

   /* Set the option active */
   optval = 1;
   optlen = sizeof(optval);
   if(setsockopt(sockfd, SOL_SOCKET, SO_KEEPALIVE, &optval, optlen) < 0) 
   {
      #ifdef _DEBUG_PROCESS
      if(EDebugProcess<GetDebugLevelOfPMC())
        {
          perror("setsockopt()");
          PrintToLogFile("ERROR creating socket\n");
        }
      #endif
      close(sockfd);
      exit(EXIT_FAILURE);
   }
   #ifdef _DEBUG_PROCESS
   if(EDebugProcess<GetDebugLevelOfPMC())
   {
    printf("SO_KEEPALIVE set on socket\n");
    PrintToLogFile("SO_KEEPALIVE set on socket\n");
    }
      #endif
   /* Check the status again */
   if(getsockopt(sockfd, SOL_SOCKET, SO_KEEPALIVE, &optval, &optlen) < 0) {
       #ifdef _DEBUG_PROCESS
       if(EDebugProcess<GetDebugLevelOfPMC())
       {
          perror("getsockopt()");
          PrintToLogFile("getsockopt()");
      }
      #endif
      close(sockfd);
      exit(EXIT_FAILURE);
   }
   #ifdef _DEBUG_PROCESS
   if(EDebugProcess<GetDebugLevelOfPMC())
   {
   printf("SO_KEEPALIVE is %s\n", (optval ? "ON" : "OFF"));
   }
   #endif

   #ifdef _DEBUG_PROCESS

    if(EDebugProcess<GetDebugLevelOfPMC())
    {
    PrintToLogFile("Setting socket for reusability\n");
    }
   #endif

   if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &optval, sizeof(int)) == -1) 
   {
       #ifdef _DEBUG_PROCESS
       if(EDebugProcess<GetDebugLevelOfPMC())
       {
                perror("setsockopt");
                PrintToLogFile("Setting socket option error\n");
       }
       #endif
                exit(1);
   }

   /*********/

    //get the address info by either host name or IP address
    SetTcpServerIpAddress(argv[1]);
    server = gethostbyname(argv[1]);
    if (server == NULL) 
    {
        #ifdef _DEBUG_PROCESS
        if(EDebugProcess<GetDebugLevelOfPMC())
        {
        PrintToLogFile("ERROR, no such host\n");
        }
        #endif
        exit(1);
    }

    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr, (char *)&serv_addr.sin_addr.s_addr, server->h_length);
    //serv_addr.sin_port: unsigned short 
    //htons converts the unsigned short hostshort from host byte order to network byte order
    serv_addr.sin_port = htons(portno);

    ETcpConnectionState = ETcpStateWaitingForConnection;

}

int ConnectToServer(void)
{
                    if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0)  
                    {
                        #ifdef _DEBUG_DETAILED
                        if(EDebugDetail<GetDebugLevelOfPMC())
                        {
                        PrintToLogFile("ERROR connecting");
                        }
                        #endif
                        return 1; // connection error
                        //exit(1);
                    }
                    else
                    {
                        #ifdef _DEBUG_DETAILED
                        if(EDebugDetail<GetDebugLevelOfPMC())
                        {
                        PrintToLogFile("connection established\n");
                        }
                        #endif
                    #ifndef PMS_COMM_POLL_MODE
                        #ifdef _DEBUG_DETAILED
                        if(EDebugDetail<GetDebugLevelOfPMC())
                        {
                        PrintToLogFile("State is non poll mode\n");
                        }
                        #endif
                    ETcpConnectionState = ETcpStateConnected;
                    #endif
                    #ifdef PMS_COMM_POLL_MODE
                        #ifdef _DEBUG_DETAILED
                        if(EDebugDetail<GetDebugLevelOfPMC())
                        {
                        PrintToLogFile("State is poll mode\n"); 
                        }
                        #endif
                    ETcpConnectionState = ETcpStateConnectedAndWaitingToRead;
                    #endif

                    SendRequestToGetImageUploadInfo();
                    }
return 0;   
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-01T01:39:10.070

一般来说，当遇到“Bad File Descriptor”时，说明你传入API的socket文件描述符无效，可能有多种原因：

1.  fd 已经在某处关闭。
2.  fd有错误的值，与socket() api获取的值不一致

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-12T18:52:40.447

我也有这个错误，我的问题出在代码的某些部分我没有关闭文件描述符，而在其他部分，我试图打开那个文件！！[`close(fd)`](http://linux.die.net/man/2/close)处理完文件后使用系统调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-01T00:53:30.743

The value you have passed as the file descriptor is not valid. It is either negative or does not represent a currently open file or socket.

So you have either closed the socket before calling `write()` or you have corrupted the value of 'sockfd' somewhere in your code.

It would be useful to trace all calls to `close()`, and the value of 'sockfd' prior to the `write()` calls.

Your technique of only printing error messages in debug mode seems to me complete madness, and in any case calling another function between a system call and `perror()` is invalid, as it may disturb the value of `errno`. Indeed it may have done so in this case, and the real underlying error may be different.

# c# - 如何使用 c# 在 winforms 2.0 中将数据集或数据表转储到 MS Access？

> ID：11258786
> 
> 赞同：0
> 
> 时间：2012-06-29T08:53:02.570
> 
> 标签：c#, winforms, .net-2.0, ms-access-2007

我有 Windows 应用程序，我想将数据集或数据表转储到本地数据库，即 MS Access。

任何人都可以对此提出任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:15:19.880

数据库是否已经创建？如果是这样，只需使用 OleDB DataAdapter。

```
OleDbConnection con = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Pathname");
con.Open();
OleDbDataAdapter da = new DataAdapter(SQL command, conn);
da.Update(dataset);
con.Close(); 
```

# c# - 将数据从控制器绑定到 View -> Control

> ID：11258801
> 
> 赞同：2
> 
> 时间：2012-06-29T08:53:57.540
> 
> 标签：c#, winforms, model-view-controller, data-binding, user-controls

我在 WinForms 应用程序中实现 MVC。在视图中有一个组合框控件。我已经用 getter 和 setter 声明了一个名为 SheetLoader 的属性：

```
public BindingSource SheetLoader
{
    get { return (BindingSource)comboBox_workSheetList.DataSource; }
    set { this.comboBox_workSheetList.DataSource = (BindingSource)value; }
} 
```

在控制器中，我想访问上面的设置器并将其绑定`BindingSource`到组合框。

```
view.SheetLoader = _bindingSource; 
```

但这种方式行不通。组合框不会分配任何项目。我已经调试过了，但是`value`获取数据。

请帮我将数据从控制器绑定到 View -> Control。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:13:37.227

确保设置组合框的 DisplayMember 和 ValueMember。

# php - 从 MYSQL 数据库中获取数据

> ID：11258808
> 
> 赞同：0
> 
> 时间：2012-06-29T08:54:19.357
> 
> 标签：php, android, android-emulator, json

尝试从 Android 应用程序中的 MySQL 数据库获取数据时遇到问题

输出是：

```
06-29 11:40:42.123: E/JSON(1426): {"tag":"getroute","success":1,"error":0,"products":[]} 
```

我认为我面临的问题出在我的 PHP 文件中（这是标签的代码）：

```
if( . . . )
{
    . . .
}
else if ($tag == 'getroute')
{
    $endloc = $_POST['end'];
    $op = $db->getRoutes($endloc);

    if ($op) 
    {
        $response["products"] = array();

        while($data= mysql_fetch_assoc($op))
        {
            $product = array();
            $product ["uname"] = $data["uname"];
            $product ["start"] = $data["start"];
            $product ["end"] = $data["end"];
            $product ["meet1"] = $data["meet1"];
            $product ["meet1time"] = $data["meet1time"];
            $product ["meet2"] = $data["meet2"];
            $product ["meet2time"] = $data["meet2time"];
            $product ["meet3"] = $data["meet3"];
            $product ["meet3time"] = $data["meet3time"];
            $product ["ismoke"] = $data["ismoke"];
            $product ["iwomen"] = $data["iwomen"];
            $product ["ctime"] = $data["ctime"];
            $product ["seats"] = $data["seats"];

            // push single product into final response array
            array_push($response["products"], $product);
        }

        $response["success"] = 1;

        echo json_encode($response);

        // user stored successfully     
    } 
    else 
    {
        // user failed to store

        $response["error"] = 1;
        $response["error_msg"] = "Error occured in Making Route";

        echo json_encode($response);
    }
} 
```

我不知道问题出在哪里。我在互联网上搜索并找到了一些教程，但他们总是给我这个错误。

函数 getroute ：

```
public function getRoutes($endlocation) 
{
   $result = mysql_query("SELECT * FROM routes WHERE end = '$endlocation'");

   return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:47:01.840

在你开始之前尝试使用[mysql_num_rows()检查结果的数量。](http://php.net/manual/en/function.mysql-num-rows.php)

此外，在您使用一段时间后，请立即尝试使用`print_r($data)`来验证您的记录中是否有内容。

在我看来，您只是遇到了数据源问题。

# javascript - 由 jQuery（但不是 YouTube）附加时，Vimeo 崩溃

> ID：11258809
> 
> 赞同：0
> 
> 时间：2012-06-29T08:54:24.067
> 
> 标签：javascript, jquery, html, youtube, vimeo

当我使用以下代码时，Vimeo 视频无法加载，但 YouTube 视频加载正常：

```
var video_embed_code = 'my embed code as iframe goes here';
$('.container').html(video_embed_code); 
```

我在单击时执行此操作，因此文档准备就绪等在这里无关紧要。

这是 Vimeo 结果（Youtube 使用相同的代码可以 100% 正常工作，没有 jquery 的 Vimeo 也可以 100% 正常工作）： ![在此处输入图像描述](../Images/d1d5d80c27a26ec340212165e4ce6e93.png)

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:11:51.220

jQuery 在插入之前会做各种事情来清理你的 HTML，你可以在这里看到：[https ://github.com/jquery/jquery/blob/master/src/manipulation.js#L211](https://github.com/jquery/jquery/blob/master/src/manipulation.js#L211)

如果您知道您的代码已经干净并且可以跨浏览器，那么

```
$('.container')[0].innerHTML= video_embed_code; 
```

会做得很好（也不会减慢速度）。

# mysql - 使用 CMD 在 Mysql 中导入压缩文件

> ID：11258811
> 
> 赞同：3
> 
> 时间：2012-06-29T08:54:37.210
> 
> 标签：mysql, database, unix, cmd, 7zip

我正在尝试使用以下命令使用命令提示符将压缩的数据库文件导入 Mysql

```
7z < backup.sql.7z | mysql -u root test 
```

*root*用户*没有*与之关联的任何密码*。*
***测试****是我的目标空白数据库*。我使用***7zip***进行解压缩。压缩后的数据库即backup.sql.7z 位于D 盘。

但它给出了以下错误 ![在此处输入图像描述](../Images/0111c6f7e3036d3209a92abc11477750.png)

所以，我改为使用以下命令

```
7z < backup.7z | mysql -u root test 
```

**注意**：这次我使用的是***backup.7z***而不是***backup.sql.7z***

但后来我收到以下错误 ![在此处输入图像描述](../Images/ac45b314bbd4b5dc249b7b3f89a7989f.png)

显然我的 SQL 语法有问题。

那么正确的语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T00:06:10.323

我也需要从压缩文件中导入，偶然发现了你的问题。经过一番折腾，我发现这对我有用：

```
7z x -so backup.7z | mysql -u root test 
```

**x**是提取命令
**-so**使 7-zip 写入标准输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:06:18.263

您的语法没有问题，这只是 7zip 的限制。在这种情况下最好使用 xz ，它不会在 stdout 中放入无关的垃圾，或者直接使用您喜欢的编程语言调用 7z.dll 。7z.exe 真的是用于存档管理，而不是 unix 风格的管道，Igor 非常不愿意改变它。

如果你尝试一个简单的`7z < somefile.7z`，你会立即看到你得到的只是一个使用列表。

# matlab - Matlab，如何组合邻接矩阵和两个单元格（一列和一行）？

> ID：11258821
> 
> 赞同：0
> 
> 时间：2012-06-29T08:55:16.330
> 
> 标签：matlab

我有一个矩阵（74x74），一个国家名称单元格（1,74）和另一个国家名称单元格（74,1）。理想情况下，这是用矩阵完成的，但我在单元格和文本方面遇到了麻烦，我尝试了 horzcat 和 vertcat 函数但没有成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:19:33.260

例子：

```
%# matrix with row/column headers
M = rand(5,5);
rowHeader = cellstr(num2str((1:5)','Row%d')); %'
colHeader = cellstr(num2str((1:5)','Col%d')); %'

%# create cell array and fill it
C = cell(size(M)+1);
C(2:end,2:end) = num2cell(M);
C(1,2:end) = colHeader;
C(2:end,1) = rowHeader; 
```

结果：

```
>> C
C = 
        []    'Col1'      'Col2'      'Col3'      'Col4'      'Col5'  
    'Row1'    [0.6207]    [0.8813]    [0.2955]    [0.6532]    [0.9243]
    'Row2'    [0.5997]    [0.0042]    [0.2491]    [0.9010]    [0.3215]
    'Row3'    [0.3355]    [0.8176]    [0.8225]    [0.9796]    [0.0500]
    'Row4'    [0.8156]    [0.3456]    [0.2515]    [0.5402]    [0.2402]
    'Row5'    [0.3910]    [0.3073]    [0.4047]    [0.0406]    [0.0734] 
```

# c# - 如何从路由列表中获取实际 URL？

> ID：11258825
> 
> 赞同：1
> 
> 时间：2012-06-29T08:55:44.357
> 
> 标签：c#, asp.net, .net, asp.net-routing

我在 System.Web.Routing 中定义了一组路由，并且需要获取带有 .aspx 扩展名的实际 url。我已经尝试过这段代码，但我在这里做错了：

```
 var path = RouteTable.Routes.GetVirtualPath(null, item.Link, null);
 var link = path.Route.GetVirtualPath(null, null);
 if (link.VirtualPath.ToLower().Contains("~/displaycmspage.aspx?pagename="))
 {
      //do work on url here
 } 
```

关于我如何做到这一点的任何想法？item.link 是我有路线的自定义对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:37:42.123

好的，所以我找到了答案：

```
 var path = RouteTable.Routes[item.Link];
 Route ruta = path as Route;
 var link = ruta.RouteHandler as PageRouteHandler;
 if (link.VirtualPath.ToString().ToLower().Contains("~/displaycmspage.aspx?pagename="))
 {
      //do work on url here
 } 
```

# java - InitialDirContext.search() 结果错误

> ID：11258833
> 
> 赞同：1
> 
> 时间：2012-06-29T08:56:05.830
> 
> 标签：java, ldap, enumeration

我现在尝试使用两个不同的库来完成这项工作两天，但它只是不想做我想做的事。所以问题来了：

我正在尝试使用 java 加载 ldap 条目，我正在使用“org.ietf.ldap”-Library。没有问题，我可以从 ldap 中获取单个条目，完美运行，但是通过特殊查询，我只能从 ldap 返回一个条目，但应该有 15 个条目。

这是我的代码：

```
 public void getEntries (String searchDN, int scope, InitialDirContext conn, String attributeName, String attributeValue) {
        List ansp = new ArrayList();
        final String QUERY = "cpMemDN=cn=usuid,ou=EMP,ou=COMPANY,o=META";
                    searchDN = "ou=SUPPORT, ou=ROLES, ou=SERVICES, ou=COMPANY, o=META";
        SearchControls ctrl = new SearchControls();
        ctrl.setSearchScope(SearchControls.SUBTREE_SCOPE);
        NamingEnumeration enumeration = null;

```
 try {
        enumeration = context.search(searchDN, QUERY, ctrl);
    } catch (NamingException e) {
        e.printStackTrace();
    }
    Set<String> cns = new HashSet<String>();
    try {
              while (enumeration.hasMore()) {
            SearchResult result = (SearchResult) enumeration.next();

        }
    } catch (NamingException e) {
        e.printStackTrace();
    }

} 
``` 
所以我怎么说，枚举只包含一个条目而不是 15 个条目（使用 LDAPBrowser 检查）。我还尝试使用另一个查询（cn = *）获取多个条目并且它有效，我得到了多个条目但查询不可能是问题，因为它适用于 LDAPBrowser。有任何想法吗？

            回答 #1

赞同：0

时间：2012-07-10T09:06:14.853

好吧，它现在可以使用相同的代码，只是尝试了 50 次哈哈。奇怪的事情，但解决了。

```

# asp.net - IIS7 / Windows Server 2008 中的箭头和按钮消失了

> ID：11258835
> 
> 赞同：0
> 
> 时间：2012-06-29T08:56:11.673
> 
> 标签：asp.net, iis-7

[交叉发布在 http://datatables.net]

嗨，有人可以提供有关此问题的线索吗？

我有一个在 IIS6 和 Windows Server 2003 上运行的网站。它使用一个名为“datatables”（http://datatables.net）的 JQuery UI 插件。在 DataTables 对象中，它在可排序的列标题中显示上下箭头，并在表格的右下角显示“上一个/下一个”按钮。

如果我将整个站点复制到具有 IIS7.0 和 Windows Server 2008 的服务器，箭头和按钮将不再出现。我仍然可以通过单击标题对列进行排序，并通过单击“上一个”和“下一个”来导航到上一页和下一页。但是，图形箭头和按钮不会出现。

我确实找到了这种问题的参考；[http://datatables.net/forums/discussion/6353/arrow-next-to-the-header-of-the-table-is-missing/p1](http://datatables.net/forums/discussion/6353/arrow-next-to-the-header-of-the-table-is-missing/p1) 但是，这表明原因是缺少 .css 文件并且在我的案例，我知道没有遗漏。

我已将 DataTables 从 v1.8 升级到 v1.9.1，并确保 IIS7 中的应用程序池是“经典”的，据说与 IIS6 兼容，但箭头和按钮没有重新出现。

感谢所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:04:02.353

在 IIS7 中，如果我没记错的话，您需要启用静态内容，默认情况下未选中。我记得当我第一次使用 IIS7 时，这是我的主要问题。这里有更多详细信息：[http ://weblogs.asp.net/anasghanem/archive/2008/05/23/don-t-forget-to-check-quot-static-content-service-quot-in- iis7-installation.aspx](http://weblogs.asp.net/anasghanem/archive/2008/05/23/don-t-forget-to-check-quot-static-content-service-quot-in-iis7-installation.aspx)

# css - IE 8 表格填充问题

> ID：11258837
> 
> 赞同：0
> 
> 时间：2012-06-29T08:56:25.830
> 
> 标签：css, internet-explorer, firefox, html-table

我创建了一个包含以下代码的表：

```
<table class="details resultTable">
<thead class="details">
<tr class="details">
<th class="details headerText">Heading 1</th>
<th class="details headerText">Heading 2</th>
</tr>
</thead>
<tbody class="imu-details-view">
<tr class="details">
<td class="details">Text 1</td>
<td class="details">Text 2</td>
</tr>
</tbody>
</table> 
```

这是表格的 CSS

```
resultTable {
    border-collapse: collapse;
    text-align: left;
    width: 100%;
}
resultTable th {
    border-bottom: 2px solid #6678B1;
    padding: 10px 8px;
}
resultTable td {
    border-bottom: 1px solid #CCCCCC;
    padding: 6px 8px;
} 
```

现在我遇到的问题是，在 Firefox 中，表格如下所示：

![在此处输入图像描述](../Images/64c1dde94b4210edca3211134ffeacff.png)

然后在 IE 8/9 中是这样的：

![在此处输入图像描述](../Images/11e8c85c77a5eff7cfd299742e0f334d.png)

有人可以解释一下如何使 IE 表看起来像 Firefox 表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:58:56.437

试试下面的代码。添加 align=left 到标签。

```
 <th align="left" class="details headerText">Heading 1</th>
 <th align="left" class="details headerText">Heading 2</th> 
```

# php - 选择性 MySQL 行？

> ID：11258841
> 
> 赞同：0
> 
> 时间：2012-06-29T08:56:35.080
> 
> 标签：php, mysql

我正在为一个朋友开发一个定制的 CMS 系统，它几乎已经完成了。它尽可能简单，管理面板包含一个侧边栏，其中包含所有可编辑的页面，每个编辑页面都包含一个带有所见即所得编辑器的文本区域。所有页面都具有相同的代码，并且大多数页面都像梦一样工作。

但是，某些页面无法正常工作。当您输入时，它们都会保存简单的文本，并在页面上可见。该网站在我开始在它背后构建这个 CMS 之前就已经存在，所以它有很多包含大量文本的页面，所以我只是从包含标签等的原始代码中复制了所有文本。就像我说的，大部分都像梦一样工作，但有些部分却不是。例如，这个无序列表不适合任何表格行，我不知道为什么：

```
<h1>Kursseja ja opintoja joita olen suorittanut:</h1>
<ul class="lista">

    <li>Koiranomi  koulutus, (ohjaaja / kouluttaja Paula Speer)  8/2008-12/2009</li>
    <li>Luento ’ Koirien käyttäytyminen uusimman tutkimustiedon valossa’ (luennoitsija Tuire Kaimio, järj. Suuret Laumanvartijarodut ry)  2.9.2008</li>
    <li>Gerard O'Shean näyttelyesittämiskurssi  23.-24.9\. 2008</li>
    <li>PDTE yhdistyksen  viikonloppu seminaari 27-28.9.2008</li>
    <li>Koiran luonnonmukainen ruokinta perusluento (luennoitsija Malin Ekblom) 11.11\. 2008
    </li>
    <li>Koiran luonnonmukainen ruokinta syventävä luento (luennoitsija Malin Ekblom)  3.12\. 2008</li>
    <li>HETI:n Jalostuksen ABC -luentopäivä 10.1.2009</li>
    <li>SKL toko koulutusohjaaja kurssi 3/2009 </li>
    <li>Mejä -leiri, järjestäjä Ulla Honkanen  16-17.5.2009</li>
    <li>Esa K Viitala: Etsintäkoiraleiri 6/2009</li>
    <li>Koulutuspäivä "Postiivisen vahvisteen tekniikka sekä siihen liittyvät välineet” (koulutusneuvoja Tommy Wiren) 8/2009</li>
    <li>Trainers Choice koulutustekniikan peruskurssi eli kanakurssi  I   23.25.10.2009</li>
    <li>SKL kasvattajan peruskurssi  14-15.11.2009</li>
    <li>Liikkuminen ja kivun vaikutus koiran käytökseen (luennoitsija Leena Piira) 13.2.2010</li>
    <li>James Serpell seminaari  15.5.2010</li>
    <li>KIVA-teamin rotutuntemusviikonloppu (kouluttaja David Selin) 29.-30.5.2010</li>
    <li>Naksutin koulutus seminaari (kouluttaja Morten Egtvedt) 12.6.2010</li>
    <li>Trainers Choice koiulutustekniikan peruskurssi eli kanakurssi  II   2-4.7.2010</li>
    <li>KIVA TEAM tunne koirasi kurssi 11.-12.9 / 9.-10.10\. / 6.-7.11 2010 </li>
    <li>Trainers Choice koulutustekniikan peruskurssi eli kanakurssi III 25-28.11.2010</li>

</ul> 
```

这是更新数据库的文件：

```
<? $pagename = 'Location:http://edit.xxx.fi/pages/'.$_POST[PageName];?>
<?php 
include 'mysqlconnection.php';
mysql_query("UPDATE Content SET Content='$_POST[edit]' WHERE PageName='$_POST[PageName]'");
mysql_close($con);
?>
<?php 
header($pagename);
?> 
```

这是包含更新内容的文本区域的管理面板部分：

```
<div class="content">
                <?php include 'sidebar.php';
                $pagename = basename($_SERVER['REQUEST_URI']);?>
                    <form action="save.php" method="post" style="margin-left:400px; height:600px; overflow:hidden; width:530px; margin-top:-1px;">
                        <p>Editoi sivun <strong><? echo $pagename; ?></strong> sisältöä<br>
                        <small style="font-size:10px;">Huom: Tällä sivulla oleva koulutuslista estää sivun tallentumisen tietokantaan jostain syystä, eli koulutuslista on tallennettu suoraan Susanna sivun lähdekoodiin. Sinne pitää lisätä tiedot käsin. </small></p>

                        <textarea class="editor"
                        name="edit" style="width:500px; height:300px;"><?php 
        include 'mysqlconnection.php';
        $result = mysql_query("SELECT * FROM Content WHERE PageName='$pagename'"); 
        while($row = mysql_fetch_array($result))
  {

  echo $row['Content'];
  }?></textarea>
                        <input type="hidden" value="<? echo basename($_SERVER['REQUEST_URI'])?>" name="PageName">
                        <input type="submit" value="Tallenna" class="submit">
                    </form>
                    <br>
                    <div style="height:600px; width:500px; border:1px solid black; margin-left:400px; position:absolute; left:300px; top:500px; overflow:auto;">
                    <?php 
        include 'mysqlconnection.php';
        $result = mysql_query("SELECT * FROM Content WHERE PageName='$pagename'"); 
        while($row = mysql_fetch_array($result))
  {

  echo $row['Content'];
  }?>
                    </div> 
```

我正在对页面名称使用 htaccess 重写来删除文件扩展名，所以不要对此产生误解。

我可能在这方面做错了什么？使用 phpmyadmin 时数据更新到数据库，但之后 ä 和 ö 无法正常工作，仅显示以下内容：�。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:04:52.087

尝试

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

和

```
header('content-type: text/html; charset: utf-8'); 
```

并确保您的数据库正在存储这些字符（字段排序规则设置为 utf8_swedish_ci 或类似）。

如果没有那么

设置字符集 utf8

设置名称 utf8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:05:33.737

由于字符集问题，显示了 �。避免它的最佳方法是将所有内容更改为 UTF-8 编码。

就像 DaveRandom 所说，如果部分文本被截断，问题可能出在错误的列类型上。我还建议您在将所有字符插入数据库之前对其进行转义。

# java - 如何将 JPanel 的 JLabel 居中

> ID：11258844
> 
> 赞同：-2
> 
> 时间：2012-06-29T08:57:03.627
> 
> 标签：java, swing, jpanel, jlabel, layout-manager

> **可能重复：**
> [在 JPanel 上居中 JLabel](https://stackoverflow.com/questions/7180198/centering-a-jlabel-on-a-jpanel)

我想把 JLabel 放在 JPanel 的中心。我使用了下面的代码，所以你能告诉我。这段代码有什么问题？代码 ：

```
public class ColoredRect extends JPanel{

      public double x, y, width, height;  
      public JLabel name;

      public ColoredRect(double x,double y,String label)
      {

          this.x = x;
          this.y = y;
          this.width = 100;
          this.height =40;

          setLocation((int)x,(int)y);
          setSize((int)width,(int)height);
          setBackground(Color.red);

          name = new JLabel(label,JLabel.CENTER);
          name.setForeground(Color.BLACK);
          name.setVisible(true);
          name.setSize(20,20);
          name.repaint();
          add(name);
        }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:05:07.273

使用带有 center 属性的 BorderLayout，如果 JLabel 是容器中唯一的组件（即此处的 JPanel），则如果使用 BorderLayout，则默认为中心。**最好使用由 netbeans 团队在 2005 年开发的 GroupLayout。**

例如：

```
class pan extends JPanel{

        JLabel label = new JLabel("Name");

        public void go(){

            this.setLayout(new BorderLayout());
            this.add(label,BorderLayout.CENTER);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:01:29.357

您也可以使用水平对齐方式：

```
name.setHorizontalAlignment(SwingConstants.CENTER); 
```

# python - 如何在 ubuntu 11.10 上安装 py2cairo？

> ID：11258848
> 
> 赞同：0
> 
> 时间：2012-06-29T08:57:16.007
> 
> 标签：python

README 文件说：</p>

```
Dependencies
------------
cairo   >= 1.10.0
Python  >= 2.6 
```

看来我需要先安装 cairo。但是如何安装“cairo”？

谢谢你的帮助。我安装了 libcairo2。但是当我执行命令'sudo python waf configure'时仍然有一些错误：

```
barry@ubuntu:~/graphite/py2cairo$ sudo python waf configure
  ./options()
 Setting top to                           : /home/barry/graphite/py2cairo 
 Setting out to                           : /home/barry/graphite/py2cairo/build_directory 
 ./configure()
 Checking for 'gcc' (c compiler)          : ok 
 Checking for program python              : /usr/bin/python 
 Checking for python version              : (2, 7, 3, 'final', 0) 
 Checking for library python2.7           : not found 
 Checking for library python2.7           : not found 
 Checking for library python2.7           : yes 
 Checking for program python2.7-config    : not found 
 Checking for program python-config-2.7   : not found 
 Checking for header Python.h             : yes 
 Checking for program pkg-config          : /usr/bin/pkg-config 
 Checking for 'cairo' >= 1.10.2           : not found 
 The configuration failed
(complete log in /home/barry/graphite/py2cairo/build_directory/config.log) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:03:15.337

在 Ubuntu 中找到数据包的全名，然后安装它：

```
apt-cache search libcairo2
apt-get install libcairo2 
```

# c# - 如何关闭 Kinect USB 端口的手柄以防止 VisualStudio 崩溃？

> ID：11258849
> 
> 赞同：5
> 
> 时间：2012-06-29T08:57:21.267
> 
> 标签：c#, visual-studio-2010, visual-studio, kinect

我正在研究 Kinect，偶尔 Kinect 会导致 Visual Studio 崩溃。

当我`kinectSensor.Start()`在调试后调用该方法时会发生这种情况，我发现***Kinect 已在另一个进程中使用***。

**但没有其他进程正在使用 Kinect！** 它发生在早上启动我的机器并启动应用程序后的一次。但大多数情况下，当我启动 Kinect 应用程序时（在 VisualStudio 2010 中处于调试模式），我停止了应用程序，经过一些代码修改后，我重新启动了应用程序，那时它不起作用，我有上述异常和 2 秒后 Visual Studio 崩溃。

此外，我检查 Kinect 是否已经在运行，但事实并非如此（在调试期间低于 Kinect 传感器的状态）：

![kinect 传感器状态（调试模式）](../Images/e9ff1b6fc6decdf27234ad7aecd56f70.png)

最奇怪的是，有时它可以在几周内正常工作，然后每启动两/三次应用程序就会使这种情况持续两天。

我在这个问题上找到的唯一解决方案来自一个有非常相似问题的人（互联网上唯一一个？）：[Imad Elayyan](http://imadelayyan.com/?p=8)

当我启动[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)时，我发现了与 USB 端口处理完全相同的问题（如图所示），这是一个在我们关闭应用程序时不会终止的突变进程。

![Kinect的USB手柄的突变过程](../Images/1745ac74ce82773fba6b71644dd1473a.png)

但他的解决方案*并不是真正*的长期解决方案：我必须手动杀死突变体并重新启动 VisualStudio。有时我必须在早上重新启动 VS 20 次......

***有没有办法正确关闭 USB 端口的句柄（在代码中？），这样当我关闭应用程序时，它会终止该句柄并且不再使 VS 崩溃？***

任何帮助将不胜感激，这真的让我很困惑，它让我发疯。

**附加信息**：

我正在使用*SDK1.5 + Kinect for Windows*，但*SDK1.0 + Kinect XBox360也是如此*

我已经尝试使用另一个 VS 实例来调试 VS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:31:04.120

好的，谢谢大家的关心。我想我找到了问题的根源，**但**我仍然缺乏对句柄端口的解释。

***事实：***

1.  我的解决方案中有 3 个项目，两个类库： `Kinect.dll` 创建与设备的连接，处理手势识别部分和光标创建。`KinectControls.dll` 它创建可以与光标交互的控件（按钮、边框、图表 3D...）。和一个测试项目。

2.  Kinect.dll 启动 Kinect 的事件 + 一些自定义事件： `ColorFrameReady`, `DepthFrameReady`, `GestureRecognised`...

3.  大多数事件在程序集中是内部的，但有些事件在外部类中是可见的。

4.  每个注册的事件都是未注册的（或者我认为）。

5.  我为 Kinect 相关的类实现了[外观模式。](http://en.wikipedia.org/wiki/Facade_pattern)KinectFacade 拥有一个`KinectStop`关闭连接和注销事件的方法。

***问题的根源：***

当应用程序关闭时，`Application.Current.Shutdown()`调用 KinectStop 的方法停止了 Kinect 并在程序集中取消注册处理程序。但是在外部程序集中，在 Kinect 关闭后调用了取消注册（即使也调用了取消注册`Application.Current.Shutdown()`），这导致了“基本/通常”错误。所以我删除了注销。

当您不注销 Kinect 事件并且 Kinect 关闭（`KinectSensor.stop()`方法调用）时，**即使应用程序关闭并且任何线程终止，它（****偶尔**）也会保留 USB 句柄！之后：无法重新打开应用程序（崩溃），最后当您尝试关闭 Visual Studio 时它崩溃（如我的问题中所述）。**`Kinect.Start()`**

 *****我找到的解决方案***

何时`KinectStop()`调用我在关闭 Kinect 之前使用计时器，以便外部程序集中的每个类都可以取消注册事件。

此外，从现在开始，外部类不再提供“正常”事件：外观处理这些事件并引发外部世界可用的[FastSmartWeakEvent 。](http://www.codeproject.com/Articles/29922/Weak-Events-in-C)它解决了内存泄漏，也可以在某些情况下解决我的问题。

从那时起，不处理 USB 端口被保留，Visual Studio 不再崩溃。

***概括***

我找到了问题的根源并找到了绕过它的解决方案。我希望这会帮助任何有类似问题的人。

**但是**我仍然不明白为什么关闭应用程序和/或`KinectSensor.Stop()`从 SDK 调用方法不会关闭所有事件处理程序/线程/进程/端口句柄。为什么关闭视觉工作室会使其崩溃，即使之前的一个仍在运行？

如果有人有建议会受到欢迎吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T04:00:49.180

确保 Kinect 插入 USB 2.0 端口而不是 USB 3.0。

Microsoft Kinect 不支持 USB3.0，并且将其与 Kinect 一起使用会导致各种疯狂的行为。

我遇到了许多与您相同的零星问题，当我开始使用我机器上为数不多的 USB2.0 端口之一时，问题得到了解决。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-06T12:28:04.893

试试窗户对撞机。它将轻松解决您的问题。**

# sql - 仅当有多个结果时如何返回行

> ID：11258850
> 
> 赞同：1
> 
> 时间：2012-06-29T08:57:22.123
> 
> 标签：sql, oracle

在 Oracle 10g 数据库中，我想构建一个 SQL 查询，仅当有多个结果行时才返回结果行。

有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T09:05:09.353

您需要计算返回结果的数量，如果您不想分组，可以使用以下方法：

```
SELECT *
  FROM (SELECT col1,
               col2,
               COUNT(*) OVER() cnt
          FROM your_table
         WHERE <conditions> )
 WHERE cnt > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:08:00.577

```
select * from 
  (select column1,column2,column3,
    (select count(*) from table1 where '*XYZ Condition*' ) as rowCount 
  from table1 where '*XYZ Condition*') 
where rowCount > 1; 
```

您只需在查询中的两个位置放置相同的条件，即“ *XYZ 条件*”在两个`where`子句中都相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:24:32.577

你需要像下面这样的结果吗？

```
c1   c2
1    AA
1    BB
2    CC 
```

结果：

```
c1   c2
1    AA,BB
2    CC 
```

以下可以满足您的要求。

```
select c1,ltrim(sys_connect_by_path(c2,','),',') from (
  select c1,c2, row_number() over(partition by c1 order by c2)rn, 
                     count(*) over(partition by id ) cnt from XXX  -- XXX: your table
                 ) a  where level=cnt
              start with rn=1  connect by prior c1=c1 and prior rn=rn-1 
```

# objective-c - 编译器优化导致类属性出现 EXC_BAD_ACCESS

> ID：11258854
> 
> 赞同：0
> 
> 时间：2012-06-29T08:57:45.450
> 
> 标签：objective-c, exc-bad-access, compiler-optimization

这很奇怪。每当我启用 LLVM 编译器优化（-O/-O1 或更高版本）时，当访问我的类上的属性时，我会收到 EXC_BAD_ACCESS 错误。在代码流的早期访问该属性没有问题，但在“某个时候”（我知道，它很模糊）应用程序崩溃了。

我已经查看了其他几个 Stack Overflow 问题：严格别名，但没有看到（或理解）我可能在代码中破坏它的地方。这是违规课程：（在课程结束时显示崩溃）

```
#import "MessageManager.h"
#import "NSURL+Additions.h"
#import "NSString+Guid.h"

static MessageManager *_instance = NULL;

@interface MessageManager ()

@property (nonatomic, strong) NSMutableDictionary *listeners;
@property (nonatomic, strong) NSMutableDictionary *senders;

@end

@implementation MessageManager

@synthesize listeners, senders;

+ (MessageManager *) getInstance
{
    @synchronized(self)
    {
        if (self == [MessageManager class] && _instance == NULL) {
            _instance = [[self alloc] init];
            _instance.listeners = [NSMutableDictionary dictionary];
            _instance.senders = [NSMutableDictionary dictionary];
        }
    }
    return (_instance);
}

#pragma mark
#pragma mark Senders

- (void) addMessage:(Message *)message sender:(void (^) ())sender callback:(void (^) (Message *))callback
{
    [self addMessage:message sender:sender callback:callback sendImmediately:NO];
}

- (void) addMessage:(Message *)message sender:(void (^) ())sender callback:(void (^) (Message *))callback sendImmediately:(BOOL)sendNow
{
    message.id = [NSString stringWithGuid];
    [senders setObject:[NSDictionary dictionaryWithObjectsAndKeys:message, @"message", [sender copy], @"sender", nil] forKey:message.id];

    // note: callbacks use the message id and not the key, so that they remain tied to the message and not other keyed events
    if (callback) [self registerListener:callback forKey:message.id];

    if (sendNow) {
        message.isSent = YES;
        sender();
    }
}

- (void) sendAll
{
    [self sendAllForTags:nil];
}

- (void) sendAllForTags:(NSArray *)tags
{
    typedef void (^SenderBlock) ();
    [senders enumerateKeysAndObjectsUsingBlock:^(NSString *messageId, id wrapper, BOOL *stop) {

        Message *message = (Message *)[(NSDictionary *)wrapper objectForKey:@"message"];
        id sender = [(NSDictionary *)wrapper objectForKey:@"sender"];
        BOOL validTag;
        if (tags && tags.count) {
            if (message.tags.count) {
                validTag = false;
                for (NSString *tag in tags) {
                    if ([message.tags containsObject:tag]) {
                        validTag = true; // found match! ok to send.
                        break;
                    }
                }
            } else validTag = false; // tags specified, but none in message, never send
        } else validTag = true; // no tags specified, always send

        if ((!message.isSent || message.isRepeatable) && validTag) {
            message.isSent = YES;
            ((SenderBlock)sender)(); // send message!
        }
    }];
}

#pragma mark
#pragma mark Listeners

- (void) registerListener:(void (^) (Message *))listener forKey:(NSString *)key
{
    if (![listeners objectForKey:key]) {
        [listeners setObject:[NSMutableArray array] forKey:key];
    }
    [(NSMutableArray *)[listeners objectForKey:key] addObject:listener];
}

- (BOOL) handleOpenURL:(NSURL *)url
{
    Message *message = [[Message alloc] initWithJson:[[url queryParams] objectForKey:@"message"]];
    NSLog(@"%@", listeners); // <<<<----- CRASH HAPPENS HERE (or the first place in this method that "listeners" is referenced)
    NSMutableArray *keyedListeners = (NSMutableArray *)[listeners objectForKey:message.key];
    typedef void (^ListenerBlock)(Message *);
    for (ListenerBlock keyedListener in keyedListeners) {
        keyedListener(message);
    }
    return YES;
}

@end 
```

注意： registerListener:forKey: 在 handleOpenUrl: 被调用之前被调用多次，没有任何错误，即使它引用了“listeners”属性。

对于上下文，这是我创建的允许发送和接收消息和事件的消息传递框架的一部分。

编辑：堆栈跟踪

```
0 MyApp 0x00026206 testflight_backtrace + 158
1 MyApp 0x00026e30 TFSignalHandler + 244
2 libsystem_c.dylib 0x36fc67ec _sigtramp + 48
3 MyApp 0x00024f7c -[MessageManager handleOpenURL:] (MessageManager.m:112)
4 MyApp 0x0001c29a -[WebViewController webView:shouldStartLoadWithRequest:navigationType:] (WebViewController.m:327)
5 UIKit 0x32492482 -[UIWebView webView:decidePolicyForNavigationAction:request:frame:decisionListener:] + 182
6 CoreFoundation 0x352cf7e3 __invoking___ + 67
7 CoreFoundation 0x3522a7b0 -[NSInvocation invoke] + 160
8 CoreFoundation 0x3522a3ce -[NSInvocation invokeWithTarget:] + 50
9 WebKit 0x338b1e0c -[_WebSafeForwarder forwardInvocation:] + 252
10 CoreFoundation 0x352cea82 ___forwarding___ + 666
11 CoreFoundation 0x3522964f _CF_forwarding_prep_0 + 47
12 CoreFoundation 0x352cf7e3 __invoking___ + 67
13 CoreFoundation 0x3522a7b0 -[NSInvocation invoke] + 160
14 WebCore 0x37060648 _ZL11SendMessageP12NSInvocation + 24
15 WebCore 0x37073b44 _ZL20HandleDelegateSourcePv + 80
16 CoreFoundation 0x352a0ad2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
17 CoreFoundation 0x352a029e __CFRunLoopDoSources0 + 214
18 CoreFoundation 0x3529f044 __CFRunLoopRun + 652
19 CoreFoundation 0x352224a4 CFRunLoopRunSpecific + 300
20 CoreFoundation 0x3522236c CFRunLoopRunInMode + 104
21 GraphicsServices 0x3651e438 GSEventRunModal + 136
22 UIKit 0x32318e7c UIApplicationMain + 1080
23 MyApp 0x0001aa32 main (main.m:34)
24 MyApp 0x0001a9e7 start + 39 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:14:44.793

我认为这是您没有正确复制到集合中的块（侦听器）。看这个问题：[Keep blocks inside a dictionary](https://stackoverflow.com/questions/6364648/keep-blocks-inside-a-dictionary)

有[一篇很好的](http://thirdcog.eu/pwcblocks/#objcblocks)文章说明你为什么需要这样做

# php - PHP 奇怪的语法错误第 1 行设置 Mailchimp

> ID：11258855
> 
> 赞同：-2
> 
> 时间：2012-06-29T08:57:59.027
> 
> 标签：php, html, mailchimp

我有 html 发送一个 POST 请求，该请求到达 php 代码以处理请求...我收到一个奇怪的错误，说第 1 行存在语法错误

解析错误：语法错误，第 1 行 /home/content/31/9275231/html/subscribe.php 中的意外 T_FUNCTION

但是我在第 1 行没有看到任何错误。

这是代码（我隐藏了我的 API 密钥信息）

```
<?php
function isValidEmail( $email = null )

{
    return preg_match( "/^
    [\d\w\/+!=#|$?%{^&}*`'~-]
    [\d\w\/\.+!=#|$?%{^&}*`'~-]*@
    [A-Z0-9]
    [A-Z0-9.-]{1,61}
    [A-Z0-9]\.
    [A-Z]{2,6}$/ix", $email );
}

/* Check if email has been posted */
if ( !isset($_POST['email']) ) die();

/* Validate email */
if ( isValidEmail($_POST['email']) ) {

require_once('./MCAPI.class.php');  

// **************************************************************** //

    // Enter your API Key from http://admin.mailchimp.com/account/api/
    $api = new MCAPI('apikey');

    // Enter your list's unique id from http://admin.mailchimp.com/lists/
    // (click the "settings", the unique id is at the bottom of the page) 
    $list_id = 'list_unique_id';

// **************************************************************** //

if($api->listSubscribe($list_id, $_POST['email'], '') === true) {
    echo 'successful';
}else{
    echo 'Error: ' . $api->errorMessage;
    }

} 

else {
    echo 'invalid_email';
} 
```

另一件奇特的事情：我注意到当我在 textmate 中打开这个 php 代码时它看起来很好，但是当我在 vim 中打开它时，所有代码都显示在一行中，其中新行应该是奇怪的 '^M' 字符。 。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:04:21.807

奇怪的 ^M 字符是 Windows/DOS 行尾。使用它来用 Unix 行尾替换它们：

```
:%s/^V^M/\r/g 
```

更多信息在这里： http: [//grx.no/kb/2008/11/17/remove-windows-line-endings-in-vim/](http://grx.no/kb/2008/11/17/remove-windows-line-endings-in-vim/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:15:53.520

检查文本编辑器中的选项，看看是否可以将换行符作为 LF 而不是 CR（或两者都是 CR 后跟 LF）。发生的事情是您的换行符只是 CR，而 PHP 解释器正在寻找换行符的 LF，因此它将您的代码读取为一大行。

# doctrine-orm - Doctrine DBAL：使用 'NOW()' 值更新时间戳字段

> ID：11258858
> 
> 赞同：1
> 
> 时间：2012-06-29T08:58:03.130
> 
> 标签：doctrine-orm, silex, dbal

使用 Doctrine DBAL，我有一些代码可以将新行`main`从绑定为`$telephone_international`和的表单值插入数据库`$surname`。

完成后，它将新记录插入到重复的数据库中。`$app['dbs']['backup']`

如果成功，则先前插入`main`数据库的条目将`copied`更新其值。该`copied`列是时间戳，默认值为 0，但以下代码应将其更改为当前时间。

```
$app['dbs']['main']->update('phonebook', array(
    'mediated'  => 'NOW()'
), array(
    'telephone' => $telephone_international, 
    'surname'   => $surname
)); 
```

但该值仍然是 0000-00-00 00:00:00。我想知道是否`'NOW()'`被视为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:15:52.067

正如我在上面的评论中提出的，这似乎是要走的路，如此处所述：http:
[//doctrine-orm.readthedocs.org/en/2.0.x/cookbook/working-with-datetime.html](http://doctrine-orm.readthedocs.org/en/2.0.x/cookbook/working-with-datetime.html)

所以试试这样：

```
$app['dbs']['main']->update('phonebook', array(
    'mediated'  => new \DateTime("now")
), array(
    'telephone' => $telephone_international, 
    'surname'   => $surname
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T19:53:48.853

我偶然发现了同样的问题。由于 DBAL 本身没有太多也没有好的文档，我将发布我的解决方案。

最后一个参数指定类型（按照数据和标识数组*合并*的顺序；就好像它们在同一个数组中一样）：

```
$app['dbs']['main']->update('phonebook', array(
    'mediated'  => new DateTime()
), array(
    'telephone' => $telephone_international, 
    'surname'   => $surname
), array(
    'datetime',
    PDO::PARAM_STR,
    PDO::PARAM_STR
)); 
```

# jquery - Jquery Colorbox不可覆盖元素

> ID：11258859
> 
> 赞同：0
> 
> 时间：2012-06-29T08:58:08.100
> 
> 标签：jquery, css, colorbox

我正在使用 jQuery colorbox 插件，它也会在我的页面上打开一个 div，并且背景像往常一样是深色的。但是，当用户进行某些操作时，我会在我的页面上显示通知，并且它会在黑色背景下显示。

我应该怎么做（使用 css）我的通知 div 不被颜色框覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:54:57.007

您的通知 div 必须是 body 元素的直接子元素，并且它的 z-index 值需要比一个颜色框使用的更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:26:40.940

我已将其添加到我的 css 中并且它有效：

```
 z-index: 10000; 
```

# html - 换行符在 Chrome 中不起作用

> ID：11258861
> 
> 赞同：1
> 
> 时间：2012-06-29T08:58:14.067
> 
> 标签：html, css, google-chrome, telerik, line-breaks

我有一个使用 Telerik:RadTextBoxes 的联系请求表。

整个表单看起来不错，并且所有内容都在每个浏览器中都应该存在，除了 Chrome，其中一个输入框没有在换行符上出现！

有没有办法我可以为 Chrome 做一个单独的样式表，或者一个技巧让它只在 Chrome 中改变？

如果我取消 -20 边距，它可以在 Chrome 中运行，但所有其他浏览器都搞砸了！

```
</asp:RegularExpressionValidator>
        <br />
        <br />
        <telerik:RadTextBox runat="server" ID="txtContactNo" Style="margin: -20px 0 0 0">
        </telerik:RadTextBox>
        <br />
        <br /> 
```

我现在已经设法通过将代码更改为此在每个浏览器中使我的空间相同...... `</asp:RegularExpressionValidator> <telerik:RadTextBox runat="server" ID="txtContactNo" Style="margin:20px 0 0 -10px"> </telerik:RadTextBox>`

...但是现在输入名称和输入框之间的空格仅在 chrome 中有所不同，它与输入名称太接近了 10px，这是因为`Style="margin:20px 0 0 -10px"`但我无法摆脱它，因为它太远了在其他所有浏览器中，我已经尝试过使用边距和宽度，但似乎在所有浏览器中都没有任何效果！

如果有人能想到我能做的任何事情来解决这个问题，我们将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:30:13.647

怎么样`display:block;`？也许屏幕截图会有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:53:20.710

您似乎在`telerik:RadTextBox`元素上设置了 -20px 的上边距，这似乎抵消了`<br />`标签的效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:01:23.140

我今天早上一直在研究它，有人提到将其全部更改为使用表格而不是 div... 我这样做并清除了所有代码，现在它可以工作了！

我不确定为什么我这样做的方式在 Chrome 中不起作用，但可能是只有部分代码干扰了它，但表似乎已经做到了！

我还发现可能发生这种情况的原因之一是必需字段验证器和正则表达式验证器，它们似乎将 div 向下推得比需要的更远，导致整个页面崩溃！

所以我确保每张桌子的宽度和高度都足够大以适合所有东西。

感谢您的所有建议！:)

# javascript - 在单页中打印多个位置的经纬度

> ID：11258862
> 
> 赞同：1
> 
> 时间：2012-06-29T08:58:30.800
> 
> 标签：javascript, latitude-longitude

我有一个javascript。在其中我有一个代码，它显示浦那多个位置的纬度和经度。纬度和经度显示在警报框中。

当我在 document.write() 方法中编写它时，它会给出错误。之后我使用

```
"document.body.appendChild( document.createTextNode( latitude ) );
document.body.textContent = latitude;" 
```

但它显示一个值。我希望所有的纬度和经度都应该显示在一个页面中。请指导我。

我的代码在这里：

```
function myfun()
{
  document.getElementById("demo").innerHTML="My Javascript";

  var geocoder=new google.maps.Geocoder();
  var i=0; 
  var address=new Array();
  address[0]="kothrud pune";
  address[1]="bharti vidyapeeth";

  for(i=0;i<address.length;i++)
  {
    geocoder.geocode( { 'address': address[i]}, function(results, status) 
      {
        if (status == google.maps.GeocoderStatus.OK)
        {
          var latitude = results[0].geometry.location.lat();
          var longitude = results[0].geometry.location.lng();
          //alert(latitude);
          //alert(longitude);
          //document.write(latitude);
          document.body.appendChild( document.createTextNode( latitude ) );
          document.body.textContent = latitude;
          //document.body.appendChild( document.createTextNode( longitude ) );
          //document.body.textContent = longitude;

        } 
      }); 
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:03:37.663

包括 jquery，它更容易用于操作 DOM。获取要添加值的 div 或其他元素，并使用 jQuerys html 方法将纬度和经度值设置为元素的文本。

```
$('#YourElementIdHere').html(latitude + ', ' + longitude); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:04:01.180

你想把经度和纬度写到屏幕上吗？我会使用 jquery 并创建一个 div。

```
 <script>
  ....
  $("#Longlat").html(YourlongandLat);
  </script>
  ....
  <div id ="LongLat"></div> 
```

# asp.net-mvc-3 - MVC3 ViewBag 概念

> ID：11258866
> 
> 赞同：0
> 
> 时间：2012-06-29T08:58:47.680
> 
> 标签：asp.net-mvc-3

这是查看 ViewPage.cshtml

```
 @using (Html.BeginForm("Display", "Home", FormMethod.Post))
{
<div>Name:<a>@ViewBag.st</a><br /></div>
        <input type="submit" value="Submit" /> 
<br />
} 
```

我用于编辑@ViewBag.st 的 jquery

```
 <script type="text/javascript">
  $(document).ready(function () {
    $('a').click(function () {
        var textbox = $('<input id="Text1" type="text" size="100"  />')
        var oldText = $(this).text();
        $(this).replaceWith(textbox);
        textbox.blur(function () {
            var newValue = $(this).val();
            $(this).replaceWith($('<a>' + newValue + '</a>'));
        });
        textbox.val(oldText);
    });

});

</script> 
```

我的控制器方法是

```
public ActionResult Viewdetails()
    {
        User ur = new User();
        ur.Name = "Danny";

        ViewBag.st = ur.Name;
        return View();

    } 
```

我的模型类是 User.cs

```
 public class User
{

    //public string name { get; set; }
private string m_name = string.Empty;

public string Name
{
    get
    {
        return m_name;
    }
    set
    {
        m_name = value;
    }
}
} 
```

编辑 @ViewBag.title 后，我想存储该值并传递给下一个 View 任何人都可以提出一些想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:02:07.450

我建议你根本不要使用`ViewBag`。

因此，在您的 javascript 中，您可以为您的文本框提供与`User`模型属性 ( `Name`) 相同的名称：

```
var textbox = $('<input type="text" size="100" name="Name" />'); 
```

然后进行 2 个控制器操作（GET 和 POST）：

```
public ActionResult Viewdetails()
{
    User ur = new User();
    ur.Name = "Danny";
    return View(ur);
}

[HttpPost]
public ActionResult Display(User model)
{
    return View(model);
} 
```

在里面`Viewdetails.cshtml`：

```
@model User
@using (Html.BeginForm("Display", "Home", FormMethod.Post))
{
    <div>Name: <a>@Model.Name</a><br /></div>
    <input type="submit" value="Submit" /> 
    <br />
} 
```

在里面`Display.cshtml`：

```
@model User
<div>You have selected: @Model.Name</div> 
```

# html - CSS 在法语和英语导航中的显示不同

> ID：11258867
> 
> 赞同：-2
> 
> 时间：2012-06-29T08:58:53.177
> 
> 标签：html, css

我有一个法语网站，可以检测导航语言以显示法语或英语。

在我的 html 中，我在 div 中有一个输入和一个按钮。我很惊讶地看到输入和按钮在法语中水平对齐，但英语版本并非如此，尽管 html 和 css 是相同的！奇怪的是，在法语中，左浮动输入的输入 css 适当性是红色的，但在英语中却不是这样。有人可以解释一下吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:58:47.700

如果没有示例代码，很难判断布局问题是什么。听起来，由于两种不同的语言（英语和法语）在您的网站上占用了不同数量的空间，因此它们正在挤占其他元素。例如，如果法语句子比英语长，那么它可能会占用更多的站点宽度，从而将其他元素推到错误的位置。如果这是问题所在，您可以通过使用固定宽度`<div>`标签等来修复它。

布局问题的另一个可能原因是使用的字母不是您页面设置的字符编码的一部分。

# php - htmlentities 或 htmlspecialchars 或 stripslashes？使用哪一个？

> ID：11258870
> 
> 赞同：0
> 
> 时间：2012-06-29T08:59:02.890
> 
> 标签：php

当我将用户输入数据插入我使用的 mysql 数据库时，`mysql_real_escape_string`. 输入数据包含 bbcode 例如`[img][/img]`。

下面是输出 html 时的一行。

```
 $information = $this->bbcode(stripslashes($this->swearfilter($row['information'])),1);
   echo $information; 
```

关于这个例子，这是防止 XSS 攻击的正确方法还是我使用`htmlspecialchars($var,ENT_QUOTES)`or `htmlentities`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:02:13.457

用于`htmlspecialchars()`防止 XSS 攻击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:05:13.370

```
$message = preg_replace('#\[img\](.*?)\[/img\]#', '<img src="$1" />', $message); 
```

[防止 XSS 攻击](http://tycoontalk.freelancer.com/php-forum/47587-tip-prevent-xss-attacks.html)

# iphone - IOS Webview 在 iPad 1 和 iPhone 3gs 上运行缓慢

> ID：11258872
> 
> 赞同：0
> 
> 时间：2012-06-29T08:59:15.657
> 
> 标签：iphone, ios, ipad, uiwebview

我目前正在开发一个带有 webview 的 iPhone 应用程序。该应用程序适用于所有高于 iPad 1 或 iPhone 3gs 的设备，但在这两个设备上运行大约 5 分钟后运行缓慢。

它只是一个带有 webview 的简单应用程序，当我在 iPad 2 上尝试时运行流畅。我正在加载的网站有一些 javascript，但它适用于 iPad 1 和 iPhone 3gs 的 safari 浏览器。

有人知道出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:32:12.777

我不使用ARC，但发现了问题。

在应用程序中，我使用苹果的可达性类来检查设备是否有互联网连接。我的加载功能正在循环，应用程序不断测试连接。

在我更改加载功能以仅在问题消失后检查连接后！

# regex - 反转线对的线序

> ID：11258874
> 
> 赞同：1
> 
> 时间：2012-06-29T08:59:23.000
> 
> 标签：regex, sorting, text, awk, grep

我需要颠倒文本行对的顺序，例如：

*   第一线1
*   二线1
*   第一线2
*   二线2
*   第一线3
*   二线3

到

*   二线1
*   第一线1
*   二线2
*   第一线2
*   二线3
*   第一线3

我正在寻找一种自动化的方法（我有 650 行要排序），有什么神奇的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:58:25.523

### 假设

以下两种解决方案都要求线实际上是成对的。否则，最后一行将不会被打印。

### SED 解决方案

```
sed -n 'h; s/.*//; n; G; p' /tmp/foo 
```

1.  禁用自动打印。
2.  复制行以保留空间。
3.  删除模式空间。
4.  将下一行读入模式空间。
5.  追加保持空间。
6.  打印图案空间。

### AWK 解决方案

```
awk -F'\n' 'NR%2==1 {line=$0}; NR%2==0 {print $1 "\n" line}' /tmp/foo 
```

1.  不要将行拆分为空格上的字段。
2.  如果行是奇数，则存储该行。
3.  如果行是偶数，则打印当前行加上存储的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:22:18.480

更明显的shell版本：

```
while read -r firstline ; read -r secondline
do
    printf '%s\n%s\n' "$secondline" "$firstline"
done 
```

# twitter-bootstrap - Twitter Bootstrap 中的跨度

> ID：11258875
> 
> 赞同：0
> 
> 时间：2012-06-29T08:59:28.993
> 
> 标签：twitter-bootstrap

我正在使用以下代码片段将 flex-slider 放置在页面的中心，但是在桌面上查看时它似乎偏离了中心。

```
<div class="row">
 <div class="span8 offset2">
<div class="flexslider">
   <ul class="slides">
    <li><img src="/assets/toystory.jpg" /></li>
    <li><img src="/assets/walle.jpg" /></li>
    <li><img src="/assets/up.jpg" /></li>
    <li><img src="/assets/nemo.jpg" /></li>
    </ul>
</div><!--End of FlexiSlider-->

</div><!--End of span8 offset2-->
</div><!--End of Row--> 
```

如果需要，可以在[http://growth-mist-5023.herokuapp.com/查看该站点。](http://growing-mist-5023.herokuapp.com/)有没有理由为什么它不会位于页面的中心，我是否遗漏了一些明显的东西？我的 CSS 是否引起了问题？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:09:28.010

只需将您的代码添加到`<div class="container"/>`

```
<div class="container">    
  <div class="row">
    <div class="span8 offset2">
      <div class="flexslider">
        <ul class="slides">
          <li><img src="/assets/toystory.jpg" /></li>
          <li><img src="/assets/walle.jpg" /></li>
          <li><img src="/assets/up.jpg" /></li>
          <li><img src="/assets/nemo.jpg" /></li>
        </ul>
      </div><!--End of FlexiSlider-->
    </div><!--End of span8 offset2-->
  </div><!--End of Row-->
</div><!--End of Container--> 
```

# css - 固定元素在 Chrome 中消失

> ID：11258877
> 
> 赞同：77
> 
> 时间：2012-06-29T08:59:35.483
> 
> 标签：css, webkit, position

在我建立的网站上滚动时，使用 CSS 属性`position: fixed`可以按预期将导航栏保持在页面的最顶部。

但是，在 Chrome 中，如果您使用导航栏中的链接，它*有时会*消失。通常，您单击的项目仍然可见，但并非总是如此。有时整个事情都会消失。四处移动鼠标会返回元素的一部分，使用滚轮或箭头键滚动只需单击一次即可返回元素。[您可以在https://nikeplusphp.charanj.it](https://nikeplusphp.charanj.it)上看到它（间歇性地）发生- 您可能需要多次单击一些导航链接才能看到它发生。

我也尝试过使用 z-index 和可见性/显示类型，但没有运气。

我遇到了[这个问题](https://stackoverflow.com/questions/4980502/weird-webkit-issue-with-position-fixed)，但修复对我根本不起作用。似乎是一个 webkit 问题，因为 IE 和 Firefox 工作得很好。

这是一个已知问题，还是有修复程序来保持固定元素可见？

**更新：**

只有效果元素具有`top: 0;`，我尝试过`bottom: 0;`并且按预期工作。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-09-12T12:18:50.357

添加`-webkit-transform: translateZ(0)`到`position: fixed`元素。这迫使 Chrome 使用硬件加速来持续绘制固定元素并避免这种奇怪的行为。

我为此[https://bugs.chromium.org/p/chromium/issues/detail?id=288747](https://bugs.chromium.org/p/chromium/issues/detail?id=288747)创建了一个 Chrome 错误。请给它加星标，这样可以引起一些注意。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-28T19:34:52.883

这为我解决了这个问题：

```
html, body {height:100%;overflow:auto} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-09-18T20:45:54.960

我在 Chrome 上遇到了同样的问题，这似乎是当页面内部发生太多事情时发生的错误，我能够通过将以下转换代码添加到固定位置元素来修复它，（`transform: translateZ(0);-webkit-transform: translateZ(0);`）强制浏览器使用硬件加速来访问设备的图形处理单元 (GPU) 以使像素飞起来。另一方面，Web 应用程序在浏览器的上下文中运行，这使软件可以完成大部分（如果不是全部）渲染，从而减少了转换的动力。但是 Web 一直在迎头赶上，现在大多数浏览器供应商都通过特定的 CSS 规则提供图形硬件加速。

使用-webkit-transform: translate3d(0,0,0); 将为 CSS 过渡启动 GPU，使它们更平滑（更高的 FPS）。

**注意：** translate3d(0,0,0) 对您看到的内容没有任何作用。它在 x、y 和 z 轴上将对象移动 0px。这只是一种强制硬件加速的技术。

```
#element {
    position: fixed;
    background: white;
    border-bottom: 2px solid #eaeaea;
    width: 100%;
    left: 0;
    top: 0;
    z-index: 9994;
    height: 80px;
    /* MAGIC HAPPENS HERE */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-17T00:20:18.060

在我混合提供的两种解决方案之前，上述选项对我不起作用。

通过将以下内容添加到固定元素，它起作用了。基本上我也需要z-index：

```
-webkit-transform: translateZ(0);
z-index: 1000; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T15:44:04.247

这是一个尚未解决的 webkit 问题，奇怪的是使用 JavaScript 进行跳转，而不是使用`#`url 值，不会导致问题。为了解决这个问题，我提供了一个 JavaScript 版本，它采用锚值并找到具有该 ID 的元素的绝对位置并跳转到该位置：

```
var elements = document.getElementsByTagName('a');
for(var i = 1; i < elements.length; i++) {
    elements[i].onclick = function() {
        var hash = this.hash.substr(1),
            elementTop = document.getElementById(hash).offsetTop;
        window.scrollTo(0, elementTop + 125);
        window.location.hash = '';
        return false;
    }
} 
```

我可以进一步完善它，使其仅查找以 a 开头的链接`#`，而不是`a`它找到的任何标记。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-04T22:55:00.293

如果添加后不起作用

> -webkit-transform: translateZ(0)

比还添加

> 用户可扩展=否

在视口元

来源[这里](https://stackoverflow.com/a/44680066/3061931)

它对我有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-06T17:15:33.800

我在不同的情况下遇到了同样的问题。这是因为在多个地方使用了相同的 id。例如我使用#full 2 div。

似乎 mozilla 和 IE 支持在多种情况下使用相同的 id。但铬没有。在我的情况下，它对固定元素的消失做出了反应。

只需删除 id 即可解决问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-19T21:03:40.903

除了通过javascript调用模态外，它们都不适合我

```
<a href="#\" onclick="show_modal();">Click me to open MyModal</a>
<script>
function show_modal()
{
  MyModal.style.display = 'block';
}
</script> 
```

除此之外，上述解决方案都没有解决我的问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-02T15:25:23.263

这对我有用。将 `Overflow`属性添加到最顶层的容器中，可以是 Div 或 Form 等。

```
div, form
{
  overflow:visible;    
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-14T08:58:02.640

同样的问题也发生在我身上。对于网站的主页。我做了一个固定的标题，并为前面的海报使用了一张图片。一切正常。但是当我改变海报图像的不透明度时，我的标题位置为：固定；消失了。它存在于 chrome 开发人员工具中。但在网站上完全透明。

我尝试了 StackOverflow、W3shools、Geeke4geeks 的所有解决方案。但是，如果一件事得到解决，另一件事就搞砸了。

所以我只是打开了Photoshop并手动编辑了图像。然后把它贴在我的网站上。有效。但是，它对于固定元素下的 div 仍然无效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-18T09:44:39.620

如果以上答案都不适合您，请确保您不是像我这样的傻瓜并且**溢出：隐藏；**在固定元素上设置:(

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-29T16:46:55.857

如果以上都不起作用怎么办？粘性标题+移动侧菜单推送内容的简单案例。

我试图找到一种方法来避免固定元素（粘性标题）被翻译，但在这种情况下，没有什么是好的选择。

因此，到目前为止，范围还没有解决方法，因此我选择了一个 JS 替代方案来重新计算固定元素的绝对位置。见这里：[https ://stackoverflow.com/a/21487975/2012407](https://stackoverflow.com/a/21487975/2012407)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-18T11:17:20.540

就我而言，我只是添加了`min-height: 100vh`；`fixed`元素，可能对某人有用

# linux - 如果遇到内存泄漏，是否会在 Linux 上将内存使用量计算到进程中？

> ID：11258878
> 
> 赞同：0
> 
> 时间：2012-06-29T08:59:37.977
> 
> 标签：linux, memory, memory-leaks

根据“top”命令的结果，内存使用量增加了很多。但是，根据每个进程的内存使用情况，使用的内存并没有那么多。

```
top - 19:57:01 up 1 day, 19:24,  6 users,  load average: 0.17, 0.22, 0.57
Tasks: 500 total,   1 running, 499 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.1%us,  0.1%sy,  0.0%ni, 99.8%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  98858004k total, 90524192k used,  8333812k free,  1039700k buffers
Swap: 16777208k total,        0k used, 16777208k free, 72896460k cached 
```

似乎 Linux 会将缓冲区/缓存内存使用情况标记为已使用，但应用程序不会使用它们。在这种情况下，我仍然有可用的日志内存。

但是，内存和交换空间随后被耗尽，这导致服务器出现故障。这可能是某些应用程序的内存泄漏吗？

如果遇到内存泄漏，内存使用量是否会计算到进程中？

```
free -m
             total       used       free     shared    buffers     cached
Mem:         96541      88445       8095          0       1016      71223
-/+ buffers/cache:      16205      80335
Swap:        16383          0      16383 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:04:08.267

如果遇到内存泄漏，内存使用量是否会计算到进程中？

**是**的，内存泄漏只是不再需要但还没有被释放的数据。`free(trash);`

但是，内存和交换空间随后被耗尽，这导致服务器出现故障。这可能是某些应用程序的内存泄漏吗？

**是**的，monitor wich 程序使用如此多的 RAM 并使用[http://valgrind.org/对其进行调试](http://valgrind.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:08:51.177

确保`/proc/sys/vm/overcommit_memory`为 0。如果不是，则很难发现失控的内存消耗进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:10:21.467

### TL;博士

只要泄漏不在内核中，任何泄漏的内存都应计入应用程序的进程。

### Linux 和可用内存

Linux 在缓存方面非常激进，并且倾向于分配大量可用内存来缓存文件系统块和存储缓冲区。它是非常动态的，所以如果应用程序需要，这个空间仍然可供应用程序使用，但与此同时 Linux 会尝试使用它。

换句话说，不要假设使用的内存百分比很高是内存泄漏的症状。对于内核来说，一切照旧。

### 也可以看看

[http://linux.about.com/od/lsa_guide/a/gdelsa44.htm](http://linux.about.com/od/lsa_guide/a/gdelsa44.htm)

# azure - 如何在 Azure 中设置默认远程桌面 (RDP) 密码？

> ID：11258881
> 
> 赞同：1
> 
> 时间：2012-06-29T08:59:48.097
> 
> 标签：azure

如何在 Azure Web 应用程序中设置远程桌面的默认密码？

部署后它被设置为我没有的密码，它不是我的帐户密码或管理员密码。

如果我在部署后为角色配置新密码，我可以登录，但在 5-10 次部署后有点烦人。

（默认证书是“CN=Windows Azure 工具”）

更新：我通过 TFS 发布（预览版）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:01:07.360

合并上述评论中制定的解决方案....

按照以下**步骤 1**：[https](https://www.windowsazure.com/en-us/develop/net/common-tasks/remote-desktop/) ://www.windowsazure.com/en-us/develop/net/common-tasks/remote-desktop/ 。这允许您指定用于远程桌面的帐户凭据，并将它们存储在配置定义文件中。

之后，进入 TFS 并让奇迹发生:)

# mediaelement.js - 如何成功销毁 MediaElementPlayer 并创建一个新的

> ID：11258883
> 
> 赞同：5
> 
> 时间：2012-06-29T09:00:03.287
> 
> 标签：mediaelement.js

这是场景：

我有一个页面，其中包含一个`video`设置有视频的元素。此视频的来源可能是具有多个来源（和 Flash 后备）的 HTML5 视频或 YouTube 视频。下面是许多用作视频缩略图的图像，单击一个应该加载适当的视频，方法是破坏现有的 MediaElementPlayer 并在同一`video`元素上创建一个新的。

这会在页面加载时创建初始播放器：

```
$('video').mediaelementplayer({ alwaysShowControls: true }); 
```

这是为了在单击其中一个图像时更改播放器：

```
$('video').mediaelementplayer({
   alwaysShowControls: true,
   success: function(media, dom, player) {
      console.log('success!');
   },
   error: function() {
      console.log('error!');
   }
}); 
```

但它不起作用。该`success`函数从未被输入（也不是`error`）并且似乎没有发生任何事情。

我猜图书馆仍然认为原始播放器存在或其他东西，并且尝试了很多事情来尝试告诉它情况并非如此，例如：

```
mejs.meIndex = 0
mejs.players = [] 
```

无效，并设置：

```
window.mejs = null;
window.MediaElementPlayer = null;
window.MediaElement = null; 
```

只是打破东西:)

有人可以帮忙吗？我确定我在这里遗漏了一些简单的东西，所以如果有人能指出什么，我将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T20:47:45.340

您可以使用`remove()`mediaelementjs 的方法，设置`video`元素的类型和 src 属性，然后如果视频类型发生更改，则重新初始化 mediaelementjs。

可能看起来像这样：

```
function setSource(url, type) {
    var vid = $('#video').first();
    if (vid.attr('type') != type) {
        vid.get(0).player.remove();
        vid.attr('type', type).attr('src', url);
        vid.mediaelementplayer({
            success: function(media, dom, player) {
                player.play();
            }
        })

    }
} 
```

如果您不仅有 mp4 和 youtube，则可以添加其他逻辑以仅在需要时重新初始化。非常适合我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T02:12:08.867

我遇到了同样的问题，最终在使用 mediaelementplayer() 初始化视频之前存储了原始视频标签 html。当我想切换视频时，我 jQuery("parent").empty() 视频的父元素破坏了 mediaelementjs 创建的元素，然后恢复原始视频 html 并使用以下方法重新初始化：

```
$("#video").mediaelementplayer({
    pauseOtherPlayers: false
}); 
```

我有点老套，但做的工作。我很想知道您是否找到了更好的方法来做到这一点？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T05:05:28.023

如果需要切换不同类型的视频src，需要销毁播放器，新建一个。

摧毁玩家：

```
try(){
    player.pause();
    player.remove(ture);
} catch(err) {
    console.log(err);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:02:13.860

我将在这里为可能遇到相同问题并偶然发现此条目的任何其他人回答我自己的问题。

事实证明，在撰写本文时，我的 MediaElementJS 不支持我想要做的事情。

我的解决方案是创建两个播放器，一个用于 HTML5/Flash 视频，另一个用于 YouTube 视频，根据需要显示和隐藏适当的一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T08:53:22.320

我认为更改当前播放的视频是 MediaElementJS 的最佳方法不是销毁它并重新创建它，而是使用内置的视频“src”属性来更改源。

使用 MediaElementJS API 访问此“src”属性是管理跨浏览器跨源问题（例如 YouTube 视频或 Flash 后备）的更好方法。这是我的做法：

```
player.pause();
player.setSrc(myNewSourceURL);
player.load(); 
```

我还把这段代码变成了一个 MediaElementJS 插件，将有很多不错的东西，比如播放列表管理、下一个和上一个按钮，以及一个播放列表面板。你可以[在 github 上找到 pullRequest](https://github.com/johndyer/mediaelement/pull/632)。

这是构建播放列表的代码示例：

```
new MediaElementPlayer('#myvideo', {
    features : ['prev','playpause','next', 'progress'],
    success : function(mediaElement, domObject){
        domObject.player.loadPlaylist([
            {src: "http://domain.com/video/video1.mp4"},
            {src: "http://domain.com/video/video2.mp4"},
            {src: "http://domain.com/video/video3.mp4"},
        ]);
    }
}); 
```

然后，当单击缩略图时：

```
var index = 2; // calculate the item index in the playlist
player.setItem(index); 
```

# xcode - 更改 plist 的顺序

> ID：11258886
> 
> 赞同：0
> 
> 时间：2012-06-29T09:00:15.983
> 
> 标签：xcode, plist

我用一堆字符串做了一个plist。现在事实证明我以错误的方式编写了字符串。我希望右边的所有字符串都放在左边，左边的所有字符串都放在右边。可能吗？

![这是一个例子](../Images/76f0e268d772489acd5daf06ee4d58db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:03:53.840

有两种方法可以做到这一点 -

1.  您需要手动完成所有工作。

2.  你可以有一个脚本来为你完成这个任务。对于类似的示例脚本，您可以参考 - [http://macscripter.net/viewtopic.php?id=20152](http://macscripter.net/viewtopic.php?id=20152)

Xcode 中没有任何东西可以为您执行此操作。

# java - ReferenceError：未定义“警报”

> ID：11258888
> 
> 赞同：19
> 
> 时间：2012-06-29T09:00:24.580
> 
> 标签：java, javascript, rhino

我正在尝试从 java 代码调用 java 脚本函数。

这是我的Java代码

```
 public static void main(String[] args) throws FileNotFoundException {
    try {
        /**
         * To call a anonymous function from java script file
         */
        ScriptEngine engine = new ScriptEngineManager()
                .getEngineByName("javascript");
        FileReader fr = new FileReader("src/js/MySpec.js");
        engine.eval(fr);

    } catch (ScriptException scrEx) {
        scrEx.printStackTrace();
    }
} 
```

这是我的java脚本文件：

```
(function() {
  alert("Hello World !!!");
})(); 
```

但是当我运行驱动程序类的主要方法时，它给了我如下错误：

```
Exception in thread "main" javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: ReferenceError: "alert" is not defined. (<Unknown source>#2) in <Unknown source> at line number 2
at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:110)
at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:232)
at Java6RhinoRunner.load(Java6RhinoRunner.java:42)
at Java6RhinoRunner.main(Java6RhinoRunner.java:12) 
```

我所知道的是它需要一些脚本引擎来执行它。

为此，我将 rhino.jar 文件添加到我的类路径中。但这不起作用。

我没有得到如何解决这个错误。请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-29T09:02:32.863

`alert`不是 JavaScript 的一部分，它是`window`Web 浏览器提供的对象的一部分。因此，它在您尝试使用它的上下文中不存在。（对于, 和其他与计时器相关的东西也是如此，仅供参考。`setInterval`）`setTimeout`

如果你只是想做简单的控制台输出，Rhino 为`print`你的脚本提供了一个函数，所以你可以`alert`用`print`. 您的脚本还可以访问所有 J​​ava 类等，因此例如可以从您的 JavaScript 脚本中运行（尽管它与提供的函数`java.lang.System.out.println('Hello');`有点多余）。`print`您还可以通过 轻松使 Java 变量可用于您的脚本`ScriptEngine.put`，例如：

```
engine.put("out", System.out); 
```

...然后在您的脚本中：

```
out.println('Hello from JavaScript'); 
```

...所以这是从脚本输出的第三种方法。:-)

[请参阅包文档中](http://docs.oracle.com/javase/7/docs/api/javax/script/package-summary.html)[的`javax.script`](http://docs.oracle.com/javase/7/docs/api/javax/script/package-summary.html)讨论，特别是[`ScriptEngine#put`](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html#put%28java.lang.String,%20java.lang.Object%29)，或者对于更复杂的情况，[`Bindings`](http://docs.oracle.com/javase/7/docs/api/javax/script/Bindings.html)（和[`SimpleBindings`](http://docs.oracle.com/javase/7/docs/api/javax/script/SimpleBindings.html)）和[`ScriptContext`](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptContext.html)。

# magento - Magento：在结帐/购物车中添加自定义模块块

> ID：11258896
> 
> 赞同：1
> 
> 时间：2012-06-29T09:00:58.973
> 
> 标签：magento

我创建了一个自定义模块，在“/checkout/cart/”中显示一个块。

我在默认布局“checkout.xml”文件中使用此代码：

```
<block type="checkout/cart_coupon" name="checkout.cart.coupon" as="coupon" template="mymodule/myblock.phtml"/> 
```

如何编辑我的模块配置文件以在“/checkout/cart/”中加载 phtml 块而不编辑默认布局文件。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:54:05.587

在您的自定义主题文件夹中创建一个 local.xml 文件。

在 local.xml 文件中引用封装块并将您的块添加为新节点。

例子：

```
<?xml version="1.0" encoding="UTF-8"?>

<layout>
    <default>
        <reference 
    name="checkout.cart">
            <block type="checkout/cart_coupon" name="checkout.cart.coupon" as="coupon" template="mymodule/myblock.phtml"/>
        </reference>
    </default>
</layout> 
```

# c++ - 为什么 Python 的 I/O 比 C++ 慢得多？

> ID：11258901
> 
> 赞同：0
> 
> 时间：2012-06-29T09:01:28.573
> 
> 标签：c++, python, io

我创建了一些用于在 Python 和 C++ 中进行测试的代码，其中我从一个文件中读取两个矩阵并打印一些东西。似乎 Python 需要大约两倍的 I/O 时间：

```
$ ./test.sh -i Testing/2000.in -p "C++/read-write-only.out" -n 2
Executing: C++/read-write-only.out -i Testing/2000.in > TMPcurrentFileResult.out
It took 8 seconds for 2 executions
MIN: 4 seconds
MAX: 4 seconds

$ ./test.sh -i Testing/2000.in -p "python Python/read-write-only.py" -n 2
Executing: python Python/read-write-only.py -i Testing/2000.in > TMP..Results.out
It took 16 seconds for 2 executions
MIN: 8 seconds
MAX: 8 seconds 
```

这是我用于 Python 的代码：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from optparse import OptionParser
parser = OptionParser()
parser.add_option("-i", dest="filename", default="bigMatrix.in",
     help="input file with two matrices", metavar="FILE")
(options, args) = parser.parse_args()

def read(filename):
    lines = open(filename, 'r').read().splitlines()
    A = []
    B = []
    matrix = A
    for line in lines:
        if line != "":
            matrix.append(map(int, line.split("\t")))
        else:
            matrix = B
    return A, B

def printMatrix(matrix):
    for line in matrix:
        print "\t".join(map(str,line))

A, B = read(options.filename)
# Do something
printMatrix(B) 
```

这是 C++ 代码

```
#include <sstream>
#include <string>
#include <fstream>
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int getMatrixSize(string filename) {
    string line;
    ifstream infile;
    infile.open (filename.c_str());
    getline(infile, line);
    return count(line.begin(), line.end(), '\t') + 1;
}

void read(string filename, vector< vector<int> > &A, vector< vector<int> > &B){
    string line;
    FILE* matrixfile = freopen(filename.c_str(), "r", stdin);

    int i = 0, j, a;
    while (getline(cin, line) && !line.empty()) {
        istringstream iss(line);
        j = 0;
        while (iss >> a) {
            A[i][j] = a;
            j++;
        }
        i++;
    }

    i = 0;
    while (getline(cin, line)) {
        istringstream iss(line);
        j = 0;
        while (iss >> a) {
            B[i][j] = a;
            j++;
        }
        i++;
    }

    fclose (matrixfile);
}

void printMatrix(vector< vector<int> > matrix, int n) {
    for (int i=0; i < n; i++) {
        for (int j=0; j < n; j++) {
            if (j != 0) {
                cout << "\t";
            }
            cout << matrix[i][j];
        }
        cout << endl;
    }
}

int main (int argc, char* argv[]) {
    string filename;
    if (argc < 3) {
        filename = "bigMatrix.in";
    } else {
        filename = argv[2];
    }

    int n = getMatrixSize(filename);
    vector<int> inner (n);
    vector< vector<int> > A(n, inner), B(n, inner), C(n, inner);
    read (filename, A, B);
    // do something with the matrices
    printMatrix(C, n);
    return 0;
} 
```

**是否有可能让 Python 在 I/O 方面与 C++ 一样快？如何改进 Python / C++ 的 I/O？**

（我听说 scanf 应该比 cin 快。为什么它应该更快？）

这是包含所有代码的[GIT 存储库。](https://github.com/MartinThoma/matrix-multiplication)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:05:58.630

启动 python 解释器需要一段时间。在运行测试时要考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:15:43.197

当您不混合使用 C 和 C++ 文件操作例程时，您应该关闭与 stdio 的同步。

[http://www.cplusplus.com/reference/iostream/ios_base/sync_with_stdio/](http://www.cplusplus.com/reference/iostream/ios_base/sync_with_stdio/)

`cin`并且`cout`通常应该比它们的 C 对应物更快（同步关闭）。

就 Python 的速度而言，你为什么不检查 I/O 函数的实现呢？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T09:08:54.050

您必须缓冲任何语言的 I/O。

你为什么要比较 Python 和 C++？

Python 是一种解释型语言，而 C++ 是一种编译型语言。

# asp.net-mvc - 如何建模多对多关系？

> ID：11258907
> 
> 赞同：1
> 
> 时间：2012-06-29T09:02:03.473
> 
> 标签：asp.net-mvc, asp.net-mvc-3, domain-model

我对 asp.net mvc3 应用程序中的模型有疑问。首先，我有一个包含项目的表，每个项目都有例如：id、name 和 description 其中我还有一个用户：id、name

它看起来有点像：

```
class item {int id, string name, string description}
class user {int id, string name} 
```

现在我还有一个表，它用外键将这两个东西相互映射。所以每个用户可以有 * 个项目，每个项目也可以有 * 个用户。

现在我需要为该项目创建控制器和视图。这很好用，问题是，我只是创建一个项目，但我想一步创建一个项目并映射到用户。

如何在mvc中解决这个问题？（例如，我只能在视图中添加一个模型，这是创建过程中的项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:22:10.823

简短回答：您需要在创建项目时添加用户下拉列表。这将有助于将每个项目链接到用户。

但是，您的具体问题似乎在于在**模型中建立多对多关系**。这该怎么做？好吧，这里已经很好地解释了 - [ASP.NET MVC、实体框架、一对多和多对多插入](http://www.mikesdotnetting.com/Article/109/ASP.NET-MVC-Entity-Framework-One-to-Many-and-Many-to-Many-INSERTS)

此外，我强烈**建议**您阅读 - [NerdDinner 教程](http://weblogs.asp.net/scottgu/archive/2009/04/28/free-asp-net-mvc-nerddinner-tutorial-now-in-html.aspx)。它将为您在 asp.net mvc 框架中的开发提供良好的启动和坚实的背景。也可以参考官网的[Tutorial samples](http://www.asp.net/mvc/samples)来学习和实践mvc开发。

这是教程完整代码的链接[-NerdDinner 2.0 Complete ASP.NET MVC Sample App](http://nerddinner.codeplex.com/releases/view/45647)

# javascript - 使用 Javascript 将对象（元素）上移一步

> ID：11258908
> 
> 赞同：3
> 
> 时间：2012-06-29T09:02:06.337
> 
> 标签：javascript, object, filter, javascript-objects, extjs4.1

我有几个这样的对象：

![在此处输入图像描述](../Images/f9efd2bacdadb67589fde35a0d92449c.png)

我想移动一步，让他们在旁边`type`，然后删除。转换为 JSON 时是这样的：`value``field``data`
`departments`

```
[
    {"field"    : "DEPARTMAN_NO",
     "data"     : { "type":"numeric" , "comparison":"eq" , "value":11 }
    },
    {"field"    : "DEPARTMAN_ADI",
     "data"     : { "type":"string" , "value":"bir" }
    }
] 
```

我试过了：

```
departments = grid.filters.getFilterData();
i = {};
for(var i in department) {
department = i.data;
delete.department.data;
}; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:32:28.797

1）首先，循环`departments`，我们称它为每一项`department`；
2）你想将`department.data`的属性移动到`department`，从另一个角度，你可以将`department`的属性移动到`department.data`并返回`department.data`，代码如下：

```
var departments = [{
        "field": "DEPARTMAN_NO",
        "data": {
            "type": "numeric",
            "comparison": "eq",
            "value": 11
        }
    }, {
        "field": "DEPARTMAN_ADI",
        "data": {
            "type": "string",
            "value": "bir"
        }
    }],
    department;

for (var i = 0, len = departments.length; i < len; i++) {
    department = departments[i]; // department
    for (var key in department) {
        if (key !== 'data' && department.data) {
            department.data[key] = department[key];
        }
    }
    departments[i] = department.data || department; // if no department.data, no change
}

console.log(departments); 
```

结果：

![在此处输入图像描述](../Images/80cc1d71649e10ad017353a82f600e31.png)

查看完整的演示[http://jsfiddle.net/KVYE5/](http://jsfiddle.net/KVYE5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T23:51:53.020

我写了一个小 npm 包，它可以满足您的要求：将对象中的属性上移一层。

你可以在这里得到它：[https ://www.npmjs.com/package/move-property-up-a-level](https://www.npmjs.com/package/move-property-up-a-level)

# 用法

```
var movePropertyUpALevel = require('movePropertyUpALevel');

var fakeObj = {
    poodle: {
        first: {
            hey: 'you'
        },
        second: 'meAgain'
    }
};

movePropertyUpALevel(fakeObj, 'poodle');

console.log(fakeObj.first.hey);
//'you'
console.log(fakeObj.poodle);
//undefined 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:50:23.500

```
obj =
[
    {"field"    : "DEPARTMAN_NO",
     "data"     : { "type":"numeric" , "comparison":"eq" , "value":11 }
    },
    {"field"    : "DEPARTMAN_ADI",
     "data"     : { "type":"string" , "value":"bir" }
    }
];

for ( var item in obj ) {
    if ( obj[item].field && obj[item].data ) { //check the 'field' and 'data' exist
        obj[item].field = {
            dept : obj[item].field ,         //department name is put into a property
            type : obj[item].data.type,      //so is data.type and data.value..
            value: obj[item].data.value      //..all are now contained in 'field'
        };
        delete obj[item].data;               //remove the 'data' object
    }
}

console.log(obj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:05:41.260

```
department.type = department.data.type;
department.value = department.data.value;
delete department['data']; 
```

# iphone - 如何使 iPhoneHTTPServer 成为安全服务器

> ID：11258911
> 
> 赞同：2
> 
> 时间：2012-06-29T09:02:14.310
> 
> 标签：iphone, security, http, https

我对 iPhone 开发非常陌生。

我从下面的链接下载了 iPhoneHTTPServer 应用程序。 [https://github.com/robbiehanson/CocoaHTTPServer/tree/master/Samples/iPhoneHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer/tree/master/Samples/iPhoneHTTPServer)

它适用于 HTTP 请求。

现在我想把它变成一个安全的服务器。（使用 HTTPS）为此我在 MyHTTPConnection.m 中覆盖了以下两种方法

我确信这种方法的变化：

```
 /**
 * Overrides HTTPConnection's method
 **/
 - (BOOL)isSecureServer
 {
    // Create an HTTPS server (all connections will be secured via SSL/TLS)
    return YES; 
 } 
```

我需要应用以下方法的更改：（请在此处指导我。）问题：DDKeychain 和 Cocoa.h 不适用于 iOS。

```
 /**
  * Overrides HTTPConnection's method
  * 
  * This method is expected to returns an array appropriate for use in  
  * kCFStreamSSLCertificates SSL Settings.
  * It should be an array of SecCertificateRefs except for the first element in
  * the array, which is a SecIdentityRef.
  **/
  - (NSArray *)sslIdentityAndCertificates
  {
      NSArray *result = [DDKeychain SSLIdentityAndCertificates];
      if([result count] == 0)
      {
        [DDKeychain createNewIdentity];
        return [DDKeychain SSLIdentityAndCertificates];
      }
      return result;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:53:50.077

我已经通过以下步骤解决了问题：

1.  从您的钥匙串访问中导出证书**（Mac OS X）**
    *   打开钥匙串访问
    *   选择证书，右键单击并选择导出...
    *   导出文件格式的证书：个人信息交换 (.p12)

    *   提供名称和密码以导出文件。
        文件名：**TestCertificate.p12**
        密码：**test123** （* 如果无效，请尝试您的管理员登录密码）

2.  在您的 XCode 项目中导入**TestCertificate.p12 。**

3.  在您的项目中添加**Security.framework 。**

4.  在您的代码中导入**Security.h**文件。

    `#import <Security/Security.h>`

5.  如下所示覆盖并更改**sslIdentityAndCertificates**方法。

```
 /**
     * Overrides HTTPConnection's method
     * 
     * This method is expected to returns an array appropriate for use in kCFStreamSSLCertificates SSL Settings.
     * It should be an array of SecCertificateRefs except for the first element in the array, which is a SecIdentityRef.
     **/
    - (NSArray *)sslIdentityAndCertificates
    {    
        SecIdentityRef identityRef = NULL;
        SecCertificateRef certificateRef = NULL;
        SecTrustRef trustRef = NULL;

        NSString *thePath = [[NSBundle mainBundle] pathForResource:@"TestCertificate" ofType:@"p12"];
        NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:thePath]; 
        CFDataRef inPKCS12Data = (CFDataRef)PKCS12Data; 
        CFStringRef password = CFSTR("test123"); 
        const void *keys[] = { kSecImportExportPassphrase }; 
        const void *values[] = { password }; 
        CFDictionaryRef optionsDictionary = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL); 
        CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL); 

        OSStatus securityError = errSecSuccess;   
        securityError =  SecPKCS12Import(inPKCS12Data, optionsDictionary, &items); 
        if (securityError == 0) { 
            CFDictionaryRef myIdentityAndTrust = CFArrayGetValueAtIndex (items, 0);
            const void *tempIdentity = NULL;
            tempIdentity = CFDictionaryGetValue (myIdentityAndTrust, kSecImportItemIdentity);
            identityRef = (SecIdentityRef)tempIdentity;
            const void *tempTrust = NULL;
            tempTrust = CFDictionaryGetValue (myIdentityAndTrust, kSecImportItemTrust);
            trustRef = (SecTrustRef)tempTrust;
        } else {
            NSLog(@"Failed with error code %d",(int)securityError);
            return nil;
        }

        SecIdentityCopyCertificate(identityRef, &certificateRef);
        NSArray *result = [[NSArray alloc] initWithObjects:(id)identityRef, (id)certificateRef, nil];

        return result;    
    } 
```

# iphone - Core Plot 1.0 中的方法替换？

> ID：11258921
> 
> 赞同：1
> 
> 时间：2012-06-29T09:02:53.823
> 
> 标签：iphone, objective-c, ios, graph, core-plot

我想在 core plot 1.0 中使用这种方法，但该方法现在适用于 core plot 1.0 那么有什么替代方法呢？

```
CPTXYAxis *y = axisSet.yAxis;
**//this all method are not work**
y.majorGridLineStyle = majorGridLineStyle;
y.minorGridLineStyle = minorGridLineStyle;
y.visibleRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(100.0f)];
CPTConstraints yConstraints = {CPTConstraintFixed, CPTConstraintFixed};
y.isFloatingAxis=YES;
y.constraints=yConstraints; 
```

我想试试这个例子，但是这给了我错误[例子链接](https://stackoverflow.com/questions/5729366/moving-date-on-x-axis)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:39:57.240

处理约束的方式发生了变化。[请参阅Core Plot 讨论板上](https://groups.google.com/d/topic/coreplot-discuss/71NaK4N0rTE/discussion)的公告。

以下是更改的摘要：

`CPTConstraints`允许两种基本类型的约束。请注意，当用于浮动轴定位时，轴不会将约束位置剪辑到可见区域，因此可以使用将浮动轴推到可见区域之外的偏移量。

1.  固定从范围的下限或上限的偏移量。请注意，对于轴，此范围位于视图坐标中，因此水平轴的下限位于左侧，垂直轴的下限位于底部。偏移量朝向范围的中间，因此从下限的正偏移量在正方向，但从上限的正偏移量在负方向。

2.  相对偏移。这用于保持某个范围内某个部分的位置——0.0 是下限，1.0 是上限，0.5 是中间。它不限于这些值；`CGFloat`可以使用任何值。

`CPTConstraints`是不可变的，因此无论何时要更改约束，都必须创建一个新对象。

# asp.net - Asp.Net Repeater 在回发时丢失数据

> ID：11258930
> 
> 赞同：0
> 
> 时间：2012-06-29T09:03:23.243
> 
> 标签：asp.net, postback, repeater

我的问题比标题说的要复杂一些：

我制作了一个用户控件（我称之为编辑器），用于将数据库数据编辑到我也制作的另一个用户控件中（我称之为 GridView）。

编辑器用于我的gridview中的每一行（一行也是一个用户控件，编辑器仅在行内甚至用于插入）并且可以完美地工作，但当我尝试使用它插入时却无法正常工作。

插入和编辑之间的唯一区别是这个字段：

```
 #region Field
    /// <summary>
    /// 
    /// </summary>
    //public Field Field { get { return DataItem as Field; } }
    private Field _field;
    [Bindable(true)]
    public Field Field
    {
        get
        {
            if (IsInsert && _field == null)
            {
                _field = SubscriptionController.CreateField();
            }
            return _field;
        }
        set { _field = value; }
    }
    #endregion 
```

在这个 Field 里面，我有我绑定到中继器的集合，该`SubscriptionController.CreateField();`方法只是创建 Field 类的一个实例，里面的所有集合都是代码：

```
 public Field CreateField()
    {
        Field field = new Field();
        field.Type = GetFieldTypes().First();
        field.Label = new LocalizedStringCollection();
        field.Values = new FieldValueCollection();
        field.Selections = new FieldSelectionCollection();
        foreach (Models.TrainingGroup trainingGroup in GetTrainingGroup())
        {
            foreach (Models.Division division in GetDivisions())
            {
                foreach (Models.ProfilStatusGroup profilStatusGroup in GetProfilStatusGroup())
                {
                    field.Selections.Add(new Models.FieldSelection() { Selected = false, DivisionId = division.Id, ProfilStatusGroupId = profilStatusGroup.Id, TrainingGroupId = trainingGroup.Id });
                }
            }
        }
    } 
```

我绑定的集合存储在 viewstate 中：

```
 #region FieldValues
    /// <summary>
    /// Get/Set FieldValues from Viewstate
    /// </summary>
    public FieldValueCollection FieldValues
    {
        get
        {
            if (ViewState["FieldValues"] == null)
            {
                if (Field != null && Field.Values != null)
                    ViewState.Add("FieldValues", Field.Values);
                else
                    ViewState.Add("FieldValues", new FieldValueCollection());
            }
            if (ViewState["FieldValues"] != null)
            {
                return (FieldValueCollection)ViewState["FieldValues"];
            }
            return null;
        }
        set
        {
            if (ViewState["FieldValues"] == null)
            {
                ViewState.Add("FieldValues", value);
            }
            else
            {
                ViewState["FieldValues"] = value;
            }

        }
    }
    #endregion 
```

但是当我进行回发时，转发器中的所有文本框都是空的。

# php - codeigniter 通过从另一个控制器调用它来加载视图中的视图

> ID：11258933
> 
> 赞同：0
> 
> 时间：2012-06-29T09:03:36.780
> 
> 标签：php, codeigniter

这个问题在其他人看来是一样的，但实际上是不同的。

情况是这样的：我有 2 个控制器，即 controller_1 和 controller_2。我有几个视图，但出于这种情况的目的，我将给出 view_1 和 view_2。

在调用controller_2 的索引时，它将在view_2 中呈现一个菜单。在这个菜单中，一个特定的链接应该在 view_2 中加载`div`view_1。

问题是，我已经在 controller_1 中创建了一个函数，它将使用模型所需的所有数据加载 view_1。当然，我可以在 controller_2 中再次加载模型，但问题是，我将重复在 controller_1 的一个函数中找到的代码。顺便说一句，controller_1 的行为就像一个 crud，而 controller_2 就像一个模块的控制器，它涉及几个 crud 的菜单。

那么我该怎么做呢？如何通过调用 controller_1 在 vi​​ew_2 中调用 view_1 以加载 view_1 并使用 controller_2 将其插入到 view_2 中？

编辑：如果您熟悉 Tiles of struts（旧版本），这就是我在这里尝试完成的类似事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:56:35.057

在 Code Igniter 中，当你需要在多个地方使用相同的逻辑时，通常你会创建一个[helper](http://codeigniter.com/user_guide/general/helpers.html)或一个[library](http://codeigniter.com/user_guide/general/creating_libraries.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:16:37.090

我想如果你只是从Controller_2的方法中使用重定向：

```
 Controller_2{
     function_to_call_a_method_from_controller_1{

        // You have to call the method of Controller 1
        return redirect('controller_1/function_of_controller_1_to_load_view');
     }

  } 
```

# gnuplot - 高级 gnuplot 终端和软件

> ID：11258938
> 
> 赞同：1
> 
> 时间：2012-06-29T09:04:05.120
> 
> 标签：gnuplot, data-visualization

我对 gnuplot 的现有终端（wxt，...）的功能感到非常困惑。在界面上快速编辑图表是完全不可能的（改变一条曲线的颜色，隐藏一条曲线，使用当前渲染导出为 eps（不切换终端）等......）。“windows”一词有一些不错的功能（线型编辑等），但我仍在等待更“完整”的东西。

像“隐藏一行”这样的操作对于 gnuplot 命令语言来说是不直观的（实际上我知道的唯一解决方案是重写 plot 命令），这就是为什么我正在寻找一个终端来利用一些特定的中间表示绘制对象以允许用户快速更改设计。

你有关于这种工具的任何信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:15:03.427

注意：我不能发布两个以上的链接，因为我是这里的新用户......

快速搜索会发现几个（可能被放弃的）项目与您所要求的相似：

*   [UniGNUPlot -Graphic GNUPlot 前端](http://sourceforge.net/projects/unicalculus)，最后更新于 2009-07-17
*   [JAVA gnuplot GUI](http://sourceforge.net/projects/jgp/)，最后更新于 2010-04-19
*   XGFE，最后一次已知**更新是在 1999-01-01**并且可能最好避免由于它的年龄...

老实说，我会推荐像 QtiPlot 之类的东西（它也具有跨平台的优势），它是您典型的“数据分析和科学可视化解决方案”。我知道它与 gnuplot 的范例不同，但它很容易使用。

如果您坚持使用 gnuplot 作为后端，那么存在一个有趣的 perl 包装器，称为 gplot (search sourceforge)，您可以从命令行调用它。从网站上看，语法似乎很简单

```
# plot 3 sets of data, specify colors and points
gplot.pl -color green -point uptriangle   1a.data \
    -color blue  -point box          2a.data \
    -color green -point circle       3a.data 
```

但同样，这已经过时了（最后更新 2009-07-17）。

这些较旧的 gnuplot 前端的主要问题是 gnuplot 在几年前更改了一些功能（例如线条颜色和样式）的语法。我目前似乎无法找到它改变的确切版本，但改变确实发生了。根据您更改这些包装器源代码的意愿，我认为不需要太多调整。

# xml - T-Sql 返回 XML 列数据作为 FOR XML 查询中的节点

> ID：11258941
> 
> 赞同：3
> 
> 时间：2012-06-29T09:04:18.770
> 
> 标签：xml, tsql, for-xml-path

我在 SQL Server 2005 中有一个视图，其中包含一列 xml 数据。该列来自`for xml path()`查询，即

```
SELECT     e.id, eventTypeCode, e.startDate, e.endDate,
(select v.name 
 from venue v inner 
 join eventVenue ev on ev.venueCode=v.code 
 where ev.eventId=e.id for xml path('venue')) as venues    
FROM dbo.event e 
inner join eventType t on e.eventTypeCode=t.code 
```

我现在想在以 xml 形式返回数据的存储过程中引用此视图，即

```
create procedure getWebsiteMainCalendarEvents
@startDate datetime,
@endDate datetime
as
select * from vwWebsiteMainCalendar 
 where startDate between @startDate and @endDate 
order by startDate for xml path() element 
```

当我运行该过程时，我希望视图中的场所显示为子节点，但`<`被`>`编码为 html 实体。有没有办法让程序将 xml 数据视为输出中的 xml 节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:39:23.427

我已经整理好了。视图应该已将“类型”附加到 for xml path()，即

```
-- VENUES
(select v.name from venue v inner join eventVenue ev on ev.venueCode=v.code where ev.eventId=e.id for xml path('venue')) 
```

应该

```
-- VENUES 
```

（从场地 v 内部选择 v.name 加入 eventVenue ev on ev.venueCode=v.code where ev.eventId=e.id for xml path('venue'), **type**）

# timer - 定时器条件被传递两次，使用 cocos2d 调度器

> ID：11258942
> 
> 赞同：0
> 
> 时间：2012-06-29T09:04:20.077
> 
> 标签：timer, cocos2d-iphone, conditional-statements, schedule, cclayer

我一生都无法弄清楚为什么会发生这种情况。我有一个从 CCLayer 派生的类。我在初始化类时像这样安排方法调用

```
//create an update method for keeping track of how long its been since an animation has played
    [self schedule:@selector(playIdleAnimation:)]; 
```

方法是

```
//an update method that will play an idle animation after a random period of idleness
-(void) playIdleAnimation:(ccTime) dt {

//if the user isn't playing an animation, increment the time since last animation variable
if ([bodySprite numberOfRunningActions] == 0) {

    timeSinceLastAnimation += (float)dt;

    //now check to see if we have surpassed the time set to cause an idle animation
    if (timeSinceLastAnimation > (arc4random() %14) + 8) {

        //reset the cooldown timer
        timeSinceLastAnimation = 0;

        [bodySprite stopAllActions];

        //play the idle animation
        //[bodySprite runAction:[CCAnimate actionWithAnimation:waitAnimation restoreOriginalFrame:NO]]; 

        NSLog(@"PLAYING IDLE ANIMATION");
                }
}
//player is currently playing animation so reset the time since last animation
else
    timeSinceLastAnimation = 0;

} 
```

但是，当我运行程序时，控制台语句显示每个冷却时间都通过了两次条件

012-06-29 09:52:57.667 测试游戏[5193:707] 播放空闲动画

2012-06-29 09:52:57.701 测试游戏[5193:707] 播放空闲动画

2012-06-29 09:53:05.750 测试游戏[5193:707] 播放空闲动画

2012-06-29 09:53:05.851 测试游戏[5193:707] 播放空闲动画

我正在尝试修复当我播放完空闲动画时游戏崩溃的错误，我确信这与它有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:18:22.273

我看不到您在哪里取消计划选择器。我敢打赌，在帧启动时被调用是正常行为，您会看到它被触发两次，因为释放层需要一个帧。

如果您想要一次性方法调用，请执行以下操作：

```
-(void) playIdleAnimation:(ccTime) dt {
    [self unschedule:_cmd];

    // rest of the code here
} 
```

Cocos2d 2.0 有一个 scheduleOnce 方法，您可以使用它。

# sql-server-2008 - 确定数据库类型

> ID：11258944
> 
> 赞同：2
> 
> 时间：2012-06-29T09:04:31.067
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一台同时具有**Sql server2008 和 sql server2008 R2**的新 PC ，我无法识别哪个实例名称属于 Sql server2008 以及哪个实例名称属于 Sql server2008R2。我怎么会知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:09:50.710

尝试这个。它会为你工作。

```
Select  @@VERSION as [Server Version],@@ServerName [Instance Name] 
```

# c# - BackgroundWorker.ReportProgress() 不更新属性并锁定 UI

> ID：11258949
> 
> 赞同：0
> 
> 时间：2012-06-29T09:04:51.153
> 
> 标签：c#, .net, wpf, multithreading, backgroundworker

我正在使用 a`backgroundWorker`进行长时间运行的操作：

```
BackgroundWorker backgroundWorker = new BackgroundWorker() { WorkerSupportsCancellation = true, WorkerReportsProgress = true };

backgroundWorker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
{

};

backgroundWorker.ProgressChanged += delegate(object s, ProgressChangedEventArgs args)
{
    someViewModel.SomeProperty.Add((SomeObject)args.UserState);
};

backgroundWorker.DoWork += delegate(object s, DoWorkEventArgs args)
{
    someViewModel.SomeList.ForEach(x =>
    {
        someViewModel.SomeInterface.SomeMethod(backgroundWorker, someViewModel, someViewModel.SomeList, x);
    });
};

backgroundWorker.RunWorkerAsync(); 
```

然后在`SomeInterface.SomeMethod`：

```
public void SomeMethod(BackgroundWorker backgroundWorker, SomeViewModel someViewModel//....)
{
    //Filtering happens

    backgroundWorker.ReportProgress(0, someObjectFoundWhileFiltering);
} 
```

因此，当涉及到：

```
backgroundWorker.ProgressChanged += delegate(object s, ProgressChangedEventArgs args)
{
    someViewModel.SomeProperty.Add((SomeObject)args.UserState);//Adding the found object to the Property in the VM
}; 
```

在线上`someViewModel.SomeProperty.Add((SomeObject)args.UserState);`，设置`SomeProperty`不开火，`UI`只是锁定。

**我究竟做错了什么？这是更新的正确方法`UI thread`吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:12:04.840

我希望您正在开发一个 Windows 窗体应用程序，然后如果您要更新或向表单组件发送一些值，您需要使用委托执行此操作，以将您的请求放在主线程 Q 中，请以这种方式尝试也许你会找到解决办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:16:31.057

对 winforms 控件的跨线程调用是危险的。它们可能导致不可预测的结果。有时您会遇到特殊异常。有时 UI 只是没有重绘......在你的情况下，你正在挂起。

[为了避免这种情况，请像此处http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)中所述那样调用 UI 。像这样：

```
private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.textBox1.InvokeRequired)
        {   
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.textBox1.Text = text;
        }
    } 
```

请注意，此方法必须放入 UI 上下文中，因此*它*指的是**From**或**Control**。Invoke 将请求放入 UI 消息队列，然后由 UI 线程中运行的 UI 消息循环提取和处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:44:47.887

现在找到了解决方法：

深度克隆`object`.

```
backgroundWorker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
{
    ViewModel.SomeList = DeepClone<List<SomeObject>>(ViewModel.TempList);
};

backgroundWorker.ProgressChanged += delegate(object s, ProgressChangedEventArgs args)
{
    var item = DeepClone<SomeObject>((SomeObject)args.UserState);

    ViewModel.TempList.Add(item);
};

public static T DeepClone<T>(T obj)
{
    using (var ms = new MemoryStream())
    {
        var formatter = new BinaryFormatter();
        formatter.Serialize(ms, obj);
        ms.Position = 0;

        return (T)formatter.Deserialize(ms);
    }
} 
```

# android - Phonegap HTML5 / Android App - Iframe 高度问题

> ID：11258951
> 
> 赞同：3
> 
> 时间：2012-06-29T09:04:54.837
> 
> 标签：android, html, iframe, jquery-mobile, cordova

我们构建了一个 HTML5 应用程序，它可以动态加载 iFrame 以显示外部内容。在 android 4.0 发布之前，该解决方案运行良好——这似乎改变了 iframe 渲染的工作方式？

它似乎无法再检测高度，它显示了一个小的可滚动框，其中包含大约 50 像素高度的 900 像素高页面。我尝试将高度设置为 100% - 这在视觉上有效 - 但该应用程序在页面折叠下方的任何内容上都会获得奇怪的点击结果！

如果我为每个框架手动设置高度，它工作正常 - 但由于动态内容，这是非常不切实际的。此外，由于应用程序在 iframe 中有一定程度的内部导航 - 子页面可以是原始页面的单独高度iframe 高度 - 这在以前的 Android 版本中也可以正常工作。

有人有任何建议/解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T18:39:28.040

以防万一你仍然被卡住，我刚刚找到了这个解决方法......

```
<iframe src='externalcontent.htm' width='100%' scrolling='no' frameBorder='0' id='theiFrame' onLoad='fixiFrame();'></iframe>

function fixiFrame () {
   if ((android) && (androidVersion > 3)) {
      iFrameContentHeight = document.getElementById('theiFrame').contentDocument.body.offsetHeight;
      document.getElementById('theiFrame').style.height = iFrameContentHeight + 'px';
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T10:35:05.603

这适用于 Android 4 和 5：

```
document.getElementById('theIframe').style.height = document.getElementById('theParent').offsetHeight + 'px'; 
```

不要忘记'+px'

# jquery - jqgrid 中的“未定义”消息，“b.jgrid.formatter 未定义”

> ID：11258957
> 
> 赞同：15
> 
> 时间：2012-06-29T09:05:11.610
> 
> 标签：jquery, jqgrid, undefined

当我向 jqgrid 发送 JSON 响应时，我收到“未定义”消息，Firebug 告诉我：

```
b.jgrid.formatter is undefined

[Break On This Error]   

...input===true){b(".ui-pg-input",l).val(a.p.page);h=a.p.toppager?"#sp_1"+m+",#sp_1... 
```

这基本上并没有告诉我太多。

当我发送空响应时会发生这种情况：

```
{"total":0,"page":1,"records":0,"rows":[]} 
```

或用记录回复。然后记录在网格中可见。显示此“未定义”消息后，我无法浏览页面，因为当然出现了代码中的错误。

正如@Oleg 建议的那样，我在这里提供了其他信息：

1.  这些是我正在使用的javascript：

    ```
    jquery.validate.min.js
    jquery.validate.unobtrusive.min.js
    jquery-1.5.1.min.js
    jquery-ui-1.8.11.min.js
    jquery.jqGrid.min.js
    ui/jquery.ui.core.js
    ui/jquery.ui.widget.js
    ui/jquery.ui.datepicker.js
    ```

2.  我的 javascript 源代码：

    ```
    var grid = jQuery("#list").jqGrid({
                数据类型：'json'，

                标题：“交易记录”，
                隐藏网格：'真'，
                发布数据： {
                    companyId: function () { return $("#SelectedCompany").val(); },
                    userId: function () { return $("#SelectedUser").val(); },
                    dateFromString: function () { return $("#DateFrom").val(); },
                    dateToString: function () { return $("#DateTo").val(); }
                },
                url: '@Url.Action("GetTransactionLogData")',
                mtype: 'GET',
                colNames: ['Ref.', 'TradeDate', 'Status', 'LegalEntity', ...],
                col型号：[
                    {名称：'参考'，索引：'参考'，宽度：'60'}，
                    {名称：'TradeDate'，索引：'TradeDate'，宽度：'70'}，
                    {名称：'状态'，索引：'状态'，宽度：'50'}，
                    {名称：'LegalEntity'，索引：'LegalEntity'，宽度：'80'}，
                    ...
                ],
                寻呼机：$（'#pager'），
                行数：10，
                高度：'100%'

            });

    ```

3.  我已经从 [this link][1] 下载了最新版本的 jqGrid，它说它是 **4.4.0** 版本。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-29T09:59:17.803

重要的是在使 jqGrid 工作`grid.locale-en.js` *之前包含。* `jquery.jqGrid.min.js`

此外，我建议您向`gridview: true`jqGrid 添加选项并替换`pager: $('#pager')`为，`pager: '#pager'`因为 jqGrid 只需要寻呼机的 id 选择器。如果您使用`pager: $('#pager')`，那么 jqGrid 会将参数替换为`pager: '#pager'`. 所以表单`pager: $('#pager')`作为 jqGrid 参数真的没有意义。

# sql - 如何以 SQL 格式转储我想要的一些 SQLite3 表的数据？

> ID：11258958
> 
> 赞同：0
> 
> 时间：2012-06-29T09:05:11.967
> 
> 标签：sql, sqlite, dump

我知道如何使用 shell 命令选择要以 SQL 格式转储的表： $ ./sqlite3 test.db '.dump mytable' > test.sql 但是此命令选择“mytable”的所有数据

我可以在转储之前选择我想要的表中的数据吗？如何选择？换句话说，我寻求一个类似的命令： $ ./sqlite3 test.db '.dump select name from mytable' > test.sql 显然这个命令不起作用:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:24:41.187

在 sqlite 控制台中执行此操作的唯一方法是创建一个临时表：

```
CREATE TABLE tmp AS SELECT (field1, field2 ... ) FROM yourTable WHERE ... ;
.dump tmp
DROP TABLE tmp 
```

# multithreading - 我在哪里可以找到很好的解释 Google App Engine python27 线程如何工作以及有什么限制？

> ID：11258960
> 
> 赞同：0
> 
> 时间：2012-06-29T09:05:13.963
> 
> 标签：multithreading, google-app-engine, python-2.7

**哪里有关于 Google App Engine 上 python27 中线程实现的**好信息，尤其是但不仅限于：

1.  什么是线程限制（可以产生多少线程，产生的线程数是多少）。
2.  处理程序是如何在线程中产生的（处理程序的初始化看起来如何）。
3.  如何在 Google App Engine 上实现线程安全（GAE 中还有哪些额外假设）。
4.  SDK中如何模拟线程？
5.  在这三点中，所有其他重要的事情都需要知道，但不要问/错过。

请帮助提供一些信息或链接。我知道线程，但不了解 Google App Engine 中的实现，想学习它并与您分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:57:58.687

查看 #io12 #cloudplatform 上的“在 App Engine 上充分利用 Python 2.7”

[https://developers.google.com/events/io/sessions/gooio2012/300/](https://developers.google.com/events/io/sessions/gooio2012/300/)

# ruby-on-rails - 使用 yml 作为数据引用。馊主意？

> ID：11258961
> 
> 赞同：0
> 
> 时间：2012-06-29T09:05:17.233
> 
> 标签：ruby-on-rails, database, yaml

我需要大约 1,000 个单词才能通过我的应用程序不断访问。我希望它分离的原因是这样下去，我可以动态地改变这 1000 个单词的内容。

但我不一定觉得这需要数据库注入。我觉得一个简单的 .yml 文件可以工作。

这是一个好习惯吗？如果是，那么最好的方法是什么？

`before_filter`在通话中加载 1,000 个单词可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:09:57.290

不要认为在架构上这是正确的选择。

如果这些很少更改，那么您可以将它们放在常量类中。如果您打算经常更改它们，您将做的是**写入文件系统并从中读取，**这正是每个数据库所做的，但是以更快和最佳的方式，然后您可能会写入。

我的两分钱。让我们知道结果如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:09:57.840

除非确实需要，否则不要使用关系数据库。如果您的“单词”是相对不可变的，可以同时访问而无需多线程问题，您不需要查询等 - 它们最好在启动时为整个应用程序加载的一些散列中为每个 reuest 加载它们不是一个好主意。（此建议与 ROR 无关）

# .net - IEqualityComparer 有容忍度；如何实现GetHashCode？

> ID：11258962
> 
> 赞同：11
> 
> 时间：2012-06-29T09:05:20.620
> 
> 标签：.net, double, hashcode, iequalitycomparer, epsilon

我正在实现一个可重用的 DoubleEqualityComparer（具有自定义容差：“epsilon”构造函数参数），以简化 LINQ 与双序列的使用。例如：

```
bool myDoubleFound = doubles.Contains(myDouble, new DoubleEqualityComparer(epsilon: 0.01)); 
```

实现 GetHashCode 的正确方法是什么？这是代码：

```
 public class DoubleEqualityComparer : IEqualityComparer<double>, IEqualityComparer<double?>
    {
        private readonly double epsilon;

        public DoubleEqualityComparer(double epsilon)
        {
            if (epsilon < 0)
            {
                throw new ArgumentException("epsilon can't be negative", "epsilon");
            }

            this.epsilon = epsilon;
        }

        public bool Equals(double x, double y)
        {
            return System.Math.Abs(x - y) < this.epsilon;
        }

        public int GetHashCode(double obj)
        {
            // ?
        }
   } 
```

PS：我总是可以返回相同的值（例如：GetHashCode(double obj){ return 0; }) 总是强制调用 Equals(double, double) 方法（我知道不是很高效），但我记得这个当比较器与字典一起使用时，解决方案会导致问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T09:26:02.493

我不确定使用`IEqualityComparer<T>`是要走的路。因为比较的对象不相等。

也许你应该考虑使用一个简单的`Any`子句+一个实用方法：

```
private static bool DoublesAreNearlyEquals(double d1, double d2, double epsilon = 0.01D)
{
    return System.Math.Abs(d1 - d2) < this.epsilon;
}

private void foo()
{
    var myDoubles = Getdoubles();
    var doubleToSearch = 42D;
    var result = myDoubles.Any(d=>DoublesAreNearlyEquals(d, doubleToSearch));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-03T15:49:20.970

我会投`NotSupportedException`进去，`GetHashCode`这样你就可以吃蛋糕了。这为您提供了使用`IEqualityComparer`in LINQ 和其他方法的便利，但保证了任何使用都会`GetHashCode`崩溃。在实践中，您可能会发现使用相等比较器的方式实际上不需要`GetHashCode`调用。你甚至可以调用这个类`NotHashableDoubleEqualityComparer`来非常清楚对调用者的限制。

# java - 如何获取存储在 ArrayList 中的值 >?

> ID：11258969
> 
> 赞同：7
> 
> 时间：2012-06-29T09:05:43.247
> 
> 标签：java, android, arraylist, hashmap

我有 ArrayList>。在另一个活动中，我想访问存储在 ArrayList> 中的所有值。

我试过以下代码：

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

for(Hashmap<String, String> map: mylist) {
    for(Entry<String, String> mapEntry: map) {
        String key = mapEntry.getKey();
        String value = mapEntry.getValue();
    }
} 
```

但它显示一个错误`for(Entry<String, String> mapEntry: map)`，它只在数组上进行交互。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T09:10:08.700

您的代码对于这一行有点不同，

```
for(Entry<String, String> mapEntry: map.entrySet()) 
```

试试这个，让我知道会发生什么，

```
for (HashMap<String, String> map : mylist)
     for (Entry<String, String> mapEntry : map.entrySet())
        {
        String key = mapEntry.getKey();
        String value = mapEntry.getValue();
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-18T07:25:30.347

# 简单的方法

试试这个，我希望它也适用于你......

```
ArrayList<HashMap<String,String>> arraylist;
for (int i=0;i<arraylist.size();i++)
    {
        HashMap<String, String> hashmap= arraylist.get(i);
        String string= hashmap.get("Your_Key_Name");
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T09:18:27.863

尝试这个

```
 for(HashMap<String,String> map:myList){
           for(String str:map.keySet()){
              String key=str;
              String value=map.get(str);
           }
       } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T09:10:02.787

试试这个：

```
 ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    for(HashMap<String, String> map: mylist) {
        for(Entry<String, String> mapEntry: map.entrySet()) {
            String key = mapEntry.getKey();
            String value = mapEntry.getValue();
        }
    } 
```

注意上面写着的那一行`for(Entry<String, String> mapEntry: map.entrySet())`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T09:10:07.320

根据这个线程：[遍历 HashMap](https://stackoverflow.com/questions/1066589/java-iterate-through-hashmap)你必须使用`HashMap.entrySet()`方法。

你也可以看看这里：http: [//developer.android.com/reference/java/util/HashMap.html](http://developer.android.com/reference/java/util/HashMap.html)

# android - 使用 jQueryMobile 在 Android 浏览器应用程序上将软键盘默认设置为数字

> ID：11258974
> 
> 赞同：3
> 
> 时间：2012-06-29T09:06:04.490
> 
> 标签：android, android-webview, android-softkeyboard, numeric

我希望能够在数字模式下使用 Javascript 打开 Android 软键盘。

有很多关于如何打开软键盘以及如何将其数据类型设置为数字的帖子，但在我的情况下，有一些情况阻止我组合这些解决方案。

目前，如果用户手动点击输入字段，数字软键盘会正确显示。我还想出了如何使用 java 方法 .addJavascriptInterface() 创建一个打开和关闭键盘的 Javascript 函数。这主要在这段代码中：

```
public class KeyBoard {
        private WebView mAppView;
        private DroidGap mGap;

        public KeyBoard(DroidGap gap, WebView view)
        {
            mAppView = view;
            mGap = gap;
        }

        public void showKeyBoard() {
            InputMethodManager mgr = (InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE);
            // only will trigger it if no physical keyboard is open
            mgr.showSoftInput(mAppView, InputMethodManager.SHOW_IMPLICIT);

            ((InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(mAppView, 0); 
        }

        public void hideKeyBoard() {
            InputMethodManager mgr = (InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE);
            mgr.hideSoftInputFromWindow(mAppView.getWindowToken(), 0);
        }
} 
```

问题是当我使用这个自定义的 Javascript-to-Java 命令时，键盘总是显示为 Qwerty，即使该字段的当前值已经是数字并且它具有 type=number 标记。

我试过这些： - 在输入元素上设置 type=number 属性。- 始终准备好数值（在调用软键盘之前将值设置为零） - 在调用软键盘之前将焦点设置在输入上（并选择其值） - 我已阅读有关设置 TextView/EditText 属性的解决方案，但由于我的应用程序是浏览器应用程序，我可以操作的唯一 Android 对象是 WebView。- 目前无法在 Android 上设置 Java WebView 的默认输入法。

使用 Javascript-to-Java 打开软键盘的问题在于它是一个“通用”命令，即它与输入无关。因此，软键盘以其默认模式打开，而不考虑将发送其击键的元素。

# java - 如何使用Java在MySQL的同一个表中插入来自不同类的值

> ID：11258975
> 
> 赞同：0
> 
> 时间：2012-06-29T09:06:08.047
> 
> 标签：java, mysql

我在不同的班级有不同的价值观。我需要将它们插入同一张表中。例如，通过在此处尝试本教程中的示例：[http ://www.vogella.com/articles/MySQLJava/article.html](http://www.vogella.com/articles/MySQLJava/article.html)

如果我有这样的代码（假设数据库连接在另一个类中成功完成）：

```
// PreparedStatements can use variables and are more efficient
    preparedStatement = connect.prepareStatement("insert into  FEEDBACK.COMMENTS
                         values (default, ?, ?, ?, ? , ?, ?)");
            // "myuser, webpage, datum, summery, COMMENTS from FEEDBACK.COMMENTS");
            // Parameters start with 1
            preparedStatement.setString(1, "Test");
            preparedStatement.setString(2, "TestEmail");
            preparedStatement.setString(3, "TestWebpage");
            preparedStatement.setDate(4, new java.sql.Date(2009, 12, 11));
            preparedStatement.setString(5, "TestSummary");
            preparedStatement.setString(6, "TestComment");
            preparedStatement.executeUpdate(); 
```

假设在一个类中我想插入值 1，在第二个类中我想插入值 2，等等。在我的程序结束时，在 main 函数中，我想执行更新。请注意，我写了：

```
preparedStatement = connect.prepareStatement("insert into  FEEDBACK.COMMENTS 
                    values (default, ?, ?, ?, ? , ?, ?)"); 
```

在主函数中。我试图在包含主函数的类中将preparedStatement定义为公共变量，例如，如果我需要在另一个类中插入值2，我输入：

```
preparedStatement.setString(2, "TestEmail"); 
```

但这会导致主函数出错：没有为参数 2 指定值。那么，**如何在一个表中插入来自不同类的值？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:33:52.387

由于您在 main 中使用“preparedStatement”变量，我假设它必须是一个公共静态变量。而且由于您希望其他类对此变量执行方法，因此我假设您是在这些类的静态初始化程序或静态构造函数中执行此操作。问题是这些类没有加载（因此它们的静态初始化程序没有运行），除非您从 main 引用这些类（在类上调用静态方法或创建新实例）。我认为你没有这样做。这就是为什么这些类的静态初始化程序都没有运行并且您没有准备好执行的preparedStatement 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:16:15.997

尝试这个

主班

```
 public Class Main{
    public static void main(String args[]){
         Class1 youClassOne = new Class1();
         Class2 youClasstwo = new Class2();
         Connection conn = getConection();//implement this method.
         PreparedStatement preparedStatement = conn.prepareStatement("insert into  FEEDBACK.COMMENTS values (default, ?, ?, ?, ? , ?, ?)");
         youClassOne.addValues(preparedStatement);
         youClasstwo.addValues(preparedStatement);
         preparedStatement.executeUpdate();
    }

    } 
```

在 Class1

```
public class Class1{

   public void  addValues(PreparedStatement preparedStatement){
            preparedStatement.setString(1, "Test");
            preparedStatement.setString(2, "TestEmail");
            preparedStatement.setString(3, "TestWebpage");
            preparedStatement.setDate(4, new java.sql.Date(2009, 12, 11));
            preparedStatement.setString(5, "TestSummary");
            preparedStatement.setString(6, "TestComment");
        }
} 
```

我还没有测试过。希望它有效。如果您遇到任何问题，请告诉我

# mysql - CakePHP 通过两个关联显示字段名称

> ID：11258977
> 
> 赞同：2
> 
> 时间：2012-06-29T09:06:24.507
> 
> 标签：mysql, cakephp

我为这个令人困惑的标题道歉，我对如何表达我的问题感到有些困惑。

我是 CakePHP 的新手，但是我很好地遵循了食谱/教程，但是我遇到了一些我找不到答案的东西。

我的结构如下：

```
'Invoices' hasMany 'InvoiceHistory'
'InvoiceHistory' belongsTo 'InvoiceHistoryDeliveryStatus' 
```

因此，一张发票可以有多个发票历史，每个历史都包含一个交货状态id，它链接到一个名称。

在发票视图 (index.ctp) 上，我正在显示所有发票的列表，但希望显示最近的交付状态名称（InvoiceHistory 包含一个日期字段，因此可以对其进行排序） - 从而显示“当前交付状态”。当我做：

```
$this->set('invoices', $this->Invoice->find('all')); 
```

它返回的内容不够深入，无法为我提供交付状态名称，我也没有推断出一种仅在结果中返回最新发票历史记录的方法。我知道如何使用 MYSQL 查询手动执行此操作，但我认为这可能是完全错误的。

遵循 CakePHP 约定的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:03:29.473

据我所知，我认为您应该检查[Containable 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containable)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T11:09:13.070

使用[可容纳](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

```
$this->Invoice->Behaviors->attach('Containable');

$this->set('invoices', $this->Invoice->find('all', array(
    'contain' => array(
        'InvoiceHistory' => array(
            'InvoiceHistoryDeliveryStatus'
        )
    )
)); 
```

# javascript - 在javascript中替换URL中的两个元素

> ID：11258981
> 
> 赞同：0
> 
> 时间：2012-06-29T09:06:40.563
> 
> 标签：javascript, if-statement, greasemonkey

有点 javascript 新手所以不确定这个问题是简单还是不可能。

我正在一个具有不同测试环境的站点上工作，并制作了一个greasemonkey脚本来制作一组按钮以从一个切换到另一个：

```
if (/^(.*?)\www.mysite.com(.*)$/.test(document.location.href)) {
document.location.href = RegExp.$1+"iww1.mysite.com"+RegExp.$2
} 
```

这一直有效，除了一些 URL 有一个搜索字符串 ID，也需要更改为不同的数字。

```
&storeId=15162 
```

我觉得我已经用尽了我有限的知识，通过在 {} 中添加另一个 if 函数来添加各种替换函数，都无济于事。

如果这是有道理的并且任何人都可以提供帮助，我们将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:51:25.793

您的第一个问题是该[`location`对象](https://developer.mozilla.org/en/DOM/window.location)是神奇的：分配给它或它的任何属性会导致浏览器导航到分配的 URL。由于这通常会停止您的脚本，因此您将无法执行两次。相反，您应该将中间 URL 存储在其他变量中，并且只有在`location.href`您准备好移动到新页面时才将其分配回。

此外，您没有指定如何计算新的“搜索字符串 ID”，所以我只是假设您有一些名为 eg 的函数，`getNewStoreID()`当您给它旧 ID 时，它将返回新 ID。给定这样一个函数，这段代码应该这样做：

```
var siteRegExp = /www\.mysite\.com/;
var paramRegExp = /([?&]storeId)=(\d+)/;

if ( siteRegExp.test( location.href ) ) {
    var href = location.href.replace( siteRegExp, "iww1.mysite.com" );
    var match = paramRegExp.exec( href );
    if ( match ) {
        href = href.replace( paramRegExp, "$1=" + getNewStoreID( match[2] ) );
    }
    location.href = href;  // navigate to the new URL!
} 
```

# entity-framework - Ef 4.x dbcontext 生成器在执行时失败

> ID：11258982
> 
> 赞同：2
> 
> 时间：2012-06-29T09:06:43.583
> 
> 标签：entity-framework, t4

我有 vs2010，从 nuget 安装了 Entity framework 4.3.1，从 microsoft 安装了 EF 4.x DbContext Generator。我创建了一个项目，然后尝试添加一个新的 EF 4.x DbContext Generator 项目，但出现以下错误。有谁知道如何解决这个问题？

> 错误 1 ​​运行转换：System.Reflection.TargetInvocationException：调用目标已引发异常。---> System.IO.FileNotFoundException: Unable to locate file at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolvePath(String path) at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolvePath(String path) --- End内部异常堆栈跟踪 --- 在 System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo 方法，对象目标，Object[] 参数，SignatureStruct& sig，MethodAttributes methodAttributes，RuntimeType typeOwner) 在 System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo 方法，对象目标，对象 [ ] 参数，签名 sig，MethodAttributes methodAttributes，
> at Microsoft.VisualStudio.TextTemplatingE78BCB29E8D7A2F9432A449161229C3F.GeneratedTextTransformation.DynamicHost.ResolvePath(String path) at Microsoft.VisualStudio.TextTemplatingE78BCB29E8D7A2F9432A449161229C3F.GeneratedTextTransformation.MetadataLoader.TryCreateEdmItemCollection(String sourcePath, String[] referenceSchemas, EdmItemCollection& edmItemCollection) at Microsoft.VisualStudio.TextTemplatingE78BCB29E8D7A2F9432A449161229C3F.GeneratedTextTransformation.MetadataLoader .CreateEdmItemCollection(String sourcePath, String[] referenceSchemas) 在 Microsoft.VisualStudio.TextTemplatingE78BCB29E8D7A2F9432A449161229C3F.GeneratedTextTransformation.MetadataLoader.TryLoadAllMetadata(String inputFile, MetadataWorkspace& metadataWorkspace) 在 Microsoft.VisualStudio.TextTemplatingE78BCB29E8D7A16229C32A449133GeneratedTextTransformation.TransformText() at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String& result) 1 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T10:39:12.633

显然它是PEBKAC的一个案例。我还没有创建我的 edmx 文件。完成此操作后，我需要做的就是右键单击模型。选择“添加代码生成项”。

# ios - 如何将 MainView-iPad.xib 重新连接到 viewController？

> ID：11258983
> 
> 赞同：0
> 
> 时间：2012-06-29T09:06:49.097
> 
> 标签：ios, xcode

我正在将我的电话应用程序移植到 iPad。
我将目标的“设备”更改为`Universal`“摘要”下。我设置了条件`(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)`来确定应用程序是否在 iPad 上运行。
我`XIB`为 iPad 创建了一个新的专用视图，并在其中放置了一个视图。

如何将 IBOutlets 重新连接回 XIB 的 iPad 版本？

谢谢
![在此处输入图像描述](../Images/24bf54be28456f153e1c88598c8c129c.png)

![在此处输入图像描述](../Images/1460ec6f80de007673c875124e6d1f1c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:12:26.713

您可能需要定义**File's Owner**的类：

![在此处输入图像描述](../Images/072a2f3987af4bf47b8b91635e7993b7.png)

由于您创建了一个新的 XIB，它应该设置为`UIViewController`，只需从列表中选择您的`UIViewController's`子类。

新形象：

![在此处输入图像描述](../Images/84ddaccf997adb1a139825ee4eaa197e.png)

* * *

只是一个小细节：

避免使用这种东西：`(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)`. 在为 iPad 和 iPhone 创建相同应用程序的版本时，它完全破坏了您的应用程序架构，它们共享相同的代码。只需对您想要的类进行子类化。保留父类的通用代码和每个子类的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:12:12.967

在新的 Xib 上选择“身份检查器”窗口。将类名更改为您的 viewController 然后选择文件所有者，您的插座会自动显示

两个 Xib 的 Controller 类是相同的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:18:28.947

你不需要重写任何`IBOutlets`. 但是只需将适当的类分配给 xib 的文件所有者，`IBOutlets`您就可以使用该类的所有内容，并且您已经在 iPhone xib 中使用它们，将它们用于 iPad 的 xib。

快乐编码:)

# java - 面板未在 JFrame 中显示

> ID：11258986
> 
> 赞同：1
> 
> 时间：2012-06-29T09:07:06.163
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我创建了一个聊天面板并添加到 Jframe，但该面板未显示。但是我在聊天面板中的 sop 显示在控制台中。任何人请让我知道可能是什么问题

我的框架

```
public class MyFrame extends JFrame {

MyPanel chatClient;
  String input;

public MyFrame() {

    input = (String)JOptionPane.showInputDialog(null, "Name:", "Connect to chat                  
server", JOptionPane.QUESTION_MESSAGE, null,null, "Test");
input=input.trim();
chatClient = new MyPanel("localhost",input);
setVisible(true);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
add(chatClient);

 }
  public static void main(String...args){
    new MyFrame();
  }
} 
```

我的面板：

```
public class MyPanel extends JPanel{
  ChatClient chatClient;

  public MyPanel(String host, String uid) {
    chatClient= new ChatClient(host,uid);
    add(chatClient.getChatPanel());
    this.setVisible(true);
  }
} 
```

聊天面板：

```
public class ChatClient  {

  Client client;
  String name;
  ChatPanel chatPanel;
  String hostid;

  public ChatClient(String host,String uid){
    client = new Client();
    client.start();
    System.out.println("in constructor");
    Network.register(client);

    client.addListener(new Listener(){

      public void connected(Connection connection){
        System.out.println("in client connected method");
        Network.RegisterName registerName = new Network.RegisterName();
        registerName.name=name;
        client.sendTCP(registerName);
      }

      public void received(Connection connection,Object object){
        System.out.println("in client received method");

          if (object instanceof Network.UpdateNames) {
                  Network.UpdateNames updateNames = (Network.UpdateNames)object;
                  //chatFrame.setNames(updateNames.names);

                  System.out.println("got it message");
                  return;
          }

          if (object instanceof Network.ChatMessage) {
                  Network.ChatMessage chatMessage = (Network.ChatMessage)object;
                  //chatFrame.addMessage(chatMessage.text);
                    System.out.println("send it message");
                  return;
          }

      }

    }); // end of listner

    name=uid.trim();
    hostid=host.trim();
    chatPanel = new ChatPanel(hostid,name);

    chatPanel.setSendListener(new Runnable(){

      public void run(){
        Network.ChatMessage chatMessage = new Network.ChatMessage();
        chatMessage.chatMessage=chatPanel.getSendText();
        client.sendTCP(chatMessage);
      }
    });

    new Thread("connect"){
      public void run(){
        try{
          client.connect(5000, hostid,Network.port);
        }catch(IOException e){
          e.printStackTrace();
        }
      }
    }.start();

  }//end of constructor

  static public class ChatPanel extends JPanel{

    CardLayout cardLayout;
    JList messageList,nameList;
    JTextField sendText;
    JButton sendButton;
    JPanel topPanel,bottomPanel,panel;

    public ChatPanel(String host,String user){
      setSize(600, 200);
      this.setVisible(true);
      System.out.println("Chat panel "+host+"user: "+user);
      {
        panel = new JPanel(new BorderLayout());
        {
          topPanel = new JPanel(new GridLayout(1,2));
          panel.add(topPanel); 
          {
            topPanel.add(new JScrollPane(messageList=new JList()));
            messageList.setModel(new DefaultListModel());
          } 
          {
            topPanel.add(new JScrollPane(nameList=new JList()));
            nameList.setModel(new DefaultListModel());
          }
          DefaultListSelectionModel disableSelections = new DefaultListSelectionModel() {
                                                          public void setSelectionInterval (int index0, int index1) {
                                                          }
                                                  };

          messageList.setSelectionModel(disableSelections);
          nameList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        } 
        {
          bottomPanel = new JPanel(new GridBagLayout());
          panel.add(bottomPanel,BorderLayout.SOUTH);

          bottomPanel.add(sendText=new JTextField(),new GridBagConstraints(0,0,1,1,1,0,GridBagConstraints.CENTER,GridBagConstraints.BOTH,new Insets(0,0,0,0),0,0));
          bottomPanel.add(sendButton=new JButton(),new GridBagConstraints(1,0,1,1,0,0,GridBagConstraints.CENTER,0,new Insets(0,0,0,0),0,0));
        }

      }

      sendText.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
          sendButton.doClick();
        }
      });

    }

    public void setSendListener (final Runnable listener) {
            sendButton.addActionListener(new ActionListener() {
                    public void actionPerformed (ActionEvent evt) {
                            if (getSendText().length() == 0) return;
                            listener.run();
                            sendText.setText("");
                            sendText.requestFocus();
                    }
            });
    }

    public String getSendText () {
            return sendText.getText().trim();
    }

    public void setNames (final String[] names) {
      EventQueue.invokeLater(new Runnable(){
        public void run(){
          DefaultListModel model = (DefaultListModel)nameList.getModel();
          model.removeAllElements();
          for(String name:names)
            model.addElement(name);
        }
      });

    }

    public void addMessage (final String message) {
            EventQueue.invokeLater(new Runnable() {
                    public void run () {
                            DefaultListModel model = (DefaultListModel)messageList.getModel();
                            model.addElement(message);
                            messageList.ensureIndexIsVisible(model.size() - 1);
                    }
            });
    }

  }

  public JPanel getChatPanel(){
    return chatPanel;
  }

} 
```

# 编辑 1

```
public class ChatPanel {
  ChatP caht;
  public ChatPanel1() {
    caht=new ChatP();
  }
  static class ChatP extends JPanel{
    JPanel panel;
    public ChatP(){
      panel = new JPanel();
      panel.add(new JLabel("hi from chat panel"));
    }
  }

  public JPanel getChatPanel(){
    return caht;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:12:12.957

打电话`pack()`。拼凑在一起的代码仍然有很多问题和奇怪的方面，但显示..

![在此处输入图像描述](../Images/4902c4c3404bb92a9fc5f4a69f527464.png)

```
import java.awt.*;
import javax.swing.*;

public class MyFrame extends JFrame {

    MyPanel chatClient;
    String input;

    public MyFrame() {
        chatClient = new MyPanel("localhost","input");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        add(chatClient);

        pack();
        // Do last!
        setVisible(true);
    }
    public static void main(String...args){
        new MyFrame();
    }
}

class MyPanel extends JPanel{

    public MyPanel(String host, String uid) {
        ChatPanel chatPanel = new ChatPanel();
        add(chatPanel.getChatPanel());
    }
}

class ChatPanel {
    ChatP caht;

    public ChatPanel() {
        caht=new ChatP();
    }

    static class ChatP extends JPanel{
        public ChatP(){
            add(new JLabel("hi from chat panel"));
        }
    }

    public JPanel getChatPanel(){
        return caht;
    }
} 
```

## 笔记

不包括电池。该来源是诊断问题并提出解决方案所需的极简代码。为了尽快获得更好的帮助，请发布[SSCCE](http://sscce.org/)。

*   不要扩展框架或面板，只需保留对每个的引用。
*   在 EDT 上启动和更新 GUI。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:12:40.563

`setVisible(true)`（在您的框架上）应该是您的最后一行，或者您必须`revalidate()`在将组件添加到框架后调用框架内容窗格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T09:19:00.420

差不多好了。你反过来得到了这段代码。

```
setVisible(true);
add(chatClient); 
```

它应该是：

```
add(chatClient);
pack();
setVisible(true); 
```

另外，请注意`pack()`确保您的框架已准备好可见的调用。

# php - 如何正确管理 PHP4 中触发的错误

> ID：11258989
> 
> 赞同：2
> 
> 时间：2012-06-29T09:07:08.487
> 
> 标签：php, mysql, error-handling, php4

m 维护一个项目，该项目必须通过 PHP 4.X 兼容到 5.2。该项目有几个错误并没有得到很好的处理。

我想要做的是将用户重定向到一个“不错的”错误页面，并将错误记录在数据库中。为了跟踪用户、文件和错误消息。这是我迄今为止尝试过的：

```
set_error_handler("myErrorHandler");
/**
 *My function to handle errors
 */
function myErrorHandler( $errno , $errstr ,  $errfile="nofile" , $errline=0 , $errcontextArray=NULL ){
    session_start();
    if (!isset($errno)|!isset($errstr)) {
        exit(0);
    }
    if (!mysql_ping()) {
        require '../Connection/databaseinfo.php';
    }
    $id_user = $_SESSION['ident'];
    $errstr = GetSQLValueString($errstr, "text");
    $errfile = GetSQLValueString($errfile, "text");
    $errline = GetSQLValueString($errline, "int");
    $sql = "insert into error_history 
        (id_user, message, file, line)
        values ($id_user, $errstr, $errfile, $errline)";
    mysql_query($sql) or die (mysql_error());

//    header("location:error.php"); ---> I can't (see comment below)
    echo "<script type='text/javascript'> window.location.href='error.php';</script>";//Redirection dégueulasse //TODO: trouver mieux
    return true;
} 
```

为什么不`header()`呢？因为错误可以在页面的任何地方触发，因此已经发送了标题。

为什么不`header()`一起`obstart(), ob_flush()`呢？因为已经有很多页面在生产中，我不能全部修改它们。

我的问题是：

1.  我做错了吗？
2.  有没有更好的方法来处理重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:18:22.707

这是在 php 5.2 中处理致命错误的方法：

```
<?php
register_shutdown_function('shutdownFunction');
function shutDownFunction() {
    $error = error_get_last();
    if($error['type'] >= 1){
        mail('cc@cc.de', 'Error: XY',"Error msg:"."Server Error:".implode("\n", $error));
    }
}
?> 
```

# drupal-6 - 由于某种原因 $node ->field_name 无法访问 node + Drupal 6 中的自定义 CCK 字段

> ID：11258992
> 
> 赞同：0
> 
> 时间：2012-06-29T09:07:14.740
> 
> 标签：drupal-6, cck

我创建了一个自定义 CCK 字段并为用户提供了适当的权限，但
由于某种原因，我无法使用 $node->field_name 访问该字段，有人对此有想法吗？

提前致谢-S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:42:24.783

`print_r($node->field_machine_readable_name)`看看它打印了什么。您可以使用[开发](http://drupal.org/project/devel)模块来查看有关各个领域和功能的深入信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:03:35.137

我发现由于某种原因，在 drupal 6 中，如果我们对不同的内容类型使用相同的 CCK 字段，已经创建的节点可能没有新创建的字段。当您编辑并保存节点时。您将获得新字段的值。

# java - JSP 和 Servlet 中的表单验证

> ID：11258995
> 
> 赞同：0
> 
> 时间：2012-06-29T09:07:25.363
> 
> 标签：java, jsp, servlets

我是 JSP 和 servlet 的新手，你能帮助我进行表单验证，比如检查天气文本字段是否为空，以一种简单的方式。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:14:37.663

您可以在客户端和服务器端进行验证。您可以使用 JavaScript 或 JQuery 在客户端进行验证。

以下是它们的参考资料：

*   [使用 jQuery](http://www.roseindia.net/tutorial/jquery/formValidation.html)
*   [使用 JavaScript](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)

这是解释如何使用 Servlet 在服务器端处理表单发布数据的示例：

```
<form action="formpost" method="post">
<input type="text" name="name" />
<input type="text" name="age" />
<input type="submit" />
</form> 
```

编写 servlet 读取 post 参数并验证它们：

```
public class FormPost extends HttpServlet
{
 protected void service(HttpServletRequest request, 
   HttpServletResponse responst) throws ServletException, IOException
 {

   if(request.getParameter("name") != null){
      String nameParameter = request.getParameter("name");
   } else {
       //write you validation code here
   }

   int ageParameter = Integer.parseInt(request.getParameter("age"));

 }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:09:48.230

如果纯粹使用 JSP 和 Servlet，我建议从 JavaScript 抽象库中跳出来，就像`JQuery`这个任务一样。

这就是 bassistance 插件 [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:14:01.897

您可以进行客户端输入验证。我建议使用[JQUery 插件进行验证](http://docs.jquery.com/Plugins/Validation)。

# delphi - Delphi XE - [DCC 错误]：E2004 标识符重新声明：“系统”

> ID：11258996
> 
> 赞同：5
> 
> 时间：2012-06-29T09:07:34.220
> 
> 标签：delphi, delphi-xe

我不明白为什么会出现此错误...这是 XE 中的错误，还是 IDE 设置中的错误？

![在此处输入图像描述](../Images/4e45d85386ad50b89d2f551b94519ef3.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T09:09:28.240

`System`Delphi 程序中的所有其他单元自动使用该单元。所以你不能再次使用它。只需`System`从您的`uses`条款中删除。

该[文档](http://docwiki.embarcadero.com/RADStudio/en/Programs_and_Units#Unit_References_and_the_Uses_Clause)指出：

> `System`单位和单位被每个应用程序自动使用，`SysInit`不能在`uses`子句中明确列出。

# sql - 如何在不区分大小写的 Oracle DB 中返回不同的记录？

> ID：11258999
> 
> 赞同：4
> 
> 时间：2012-06-29T09:08:05.313
> 
> 标签：sql, oracle, oracle10g, oracle11g, rdbms

如果我有 2 条信息相同但大写和小写名称不同的记录，我想显示不同的记录，我该怎么做？我尝试在下面的查询中使用 distinct ，但它显示了两条记录 :( 抱歉，我是 SQL 编码中的绿角 :(

```
SELECT distinct
R.NAME,
R.EXPIRY_DATE,
R.CATEGORY
FROM REALTIME_EXEMPT R
WHERE
R.SUBMITTED_BY='ADMIN' 
```

提前致谢，

雷亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T09:12:08.223

```
SELECT distinct(upper(R.NAME)),
R.EXPIRY_DATE,
R.CATEGORY
FROM REALTIME_EXEMPT R
WHERE
R.SUBMITTED_BY='ADMIN' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T09:11:25.370

你可以使用`UPPER`or`LOWER`关键字

```
SELECT distinct
UPPER(R.NAME),
R.EXPIRY_DATE,
R.CATEGORY
FROM REALTIME_EXEMPT R
WHERE
R.SUBMITTED_BY='ADMIN' 
```