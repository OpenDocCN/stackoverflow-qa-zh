# StackOverflow 问答 11447000-11447999

# javascript - 为什么我的 requestAnimFrame 仍然很慢？

> ID：11447004
> 
> 赞同：3
> 
> 时间：2012-07-12T07:32:18.090
> 
> 标签：javascript, jquery, html, canvas, webkit

我遵循了使用 requestAnimFrame 绘制简单动画的最佳实践：http: [//jsfiddle.net/paul/XQpzU/2/light/](http://jsfiddle.net/paul/XQpzU/2/light/)
不幸的是，即使在这个例子中（在 Chrome、Firefox 和 IE 上），动画也有滞后。
源代码的解释在那里： http: [//paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

什么是在 html5 中显示简单动画而没有任何减速的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:56:20.550

对复杂的动画使用双缓冲技术，以避免保存、恢复等缓慢的功能。好文章 [http://www.felinesoft.com/blog/index.php/2010/09/accelerated-game-programming-with-html5-and-canvas/](http://www.felinesoft.com/blog/index.php/2010/09/accelerated-game-programming-with-html5-and-canvas/)

“requestAnimFrame”不会给你带来性能提升，因为在这种情况下，浏览器决定是否在特定时间渲染你的代码，而不是你。我的经验表明，最好为所需的 FPS 设置计时器。在使用 Android 版 PhoneGap 编写游戏时，我的体验很糟糕。我尝试了各种技术，最好的方法是使用两个画布，以重用路径并避免缓慢的转换功能。

# exception - 未定义的 ARM 异常的原因是什么？

> ID：11447005
> 
> 赞同：2
> 
> 时间：2012-07-12T07:32:29.307
> 
> 标签：exception, arm, undefined

一个问题是未定义指令何时发生......我们需要从 R14_SVC 或 R14_UNDEF 获取当前正在执行的指令吗？. 目前我正在解决一个发生未定义指令的问题。在检查 R14_SVC 时，我发现指令如下：

```
0x46BFD73C cmp r0, #0x0
0x46BFD740 beq 0x46BFD75C
0x46BFD744 ldr r0,0x46BFE358 
```

所以在我的假设中，未定义的指令会在执行指令时发生`beq 0x46BFD75C`

让我感到困惑的一件事是我检查了它`r14_undef`并且指令是不同的。

```
0x46bfd4b8  bx r14
0x46bfd4bC  mov r0, 0x01
0x46bfd4c0  bx r14 
```

哪一个导致了未定义的指令异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:58:22.147

All of your answers are in the ARM ARM, ARM Architectural Reference Manual. go to infocenter.arm.com under reference manuals find the architecture family you are interested in. The non-cortex-m series all handle these exceptions the same way

```
When an Undefined Instruction exception occurs, the following actions are performed:
R14_und = address of next instruction after the Undefined instruction
SPSR_und = CPSR
CPSR[4:0] = 0b11011 /* Enter Undefined Instruction mode */
CPSR[5] = 0 /* Execute in ARM state */
            /* CPSR[6] is unchanged */
CPSR[7] = 1 /* Disable normal interrupts */
            /* CPSR[8] is unchanged */
CPSR[9] = CP15_reg1_EEbit
/* Endianness on exception entry */
if high vectors configured then
    PC = 0xFFFF0004
else
    PC = 0x00000004 
```

R14_und points at the next instruction AFTER the undefined instruction. you have to examine SPSR_und to determine what mode the processor was in (arm or thumb) to know if you need to subtract 2 or 4 from R14_und and if you need to fetch 2 or 4 bytes. Unfortunately if on a newer architecture that supports thumb2 you may have to fetch 4 bytes even in thumb mode and try to figure out what happened. being variable word length it is very possible to be in a situation where it is impossible to determine what happened. If you are not using thumb2 instructions then it is deterministic.

# vb.net - 从 vb.net 中的数据库中删除后，在运行时从组合框中删除 id

> ID：11447008
> 
> 赞同：0
> 
> 时间：2012-07-12T07:32:35.187
> 
> 标签：vb.net, mysql

```
Private Sub btn_remove_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_remove.Click
    Dim Query As String
    mysqlconn.Open()
    Query = "delete from table where screen_id='" & cmb_id.Text & "' "
    Dim cmd As MySqlCommand = New MySqlCommand(Query, mysqlconn)
    Dim i As Integer = cmd.ExecuteNonQuery()
    If (i > 0) Then
        MsgBox("Record is Successfully deleted")

    Else
        MsgBox("Record is not deleted")
    End If
    mysqlconn.Close()
End Sub 
```

我从组合框中选择 id。取决于我从数据库中删除的所选 id。上面的代码解释相同，但我想在运行时从组合框中删除已删除的 id（从数据库中删除后）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:37:24.110

解决方法很简单。删除 id 后，再次加载组合框中的数据..

```
Private Sub btn_remove_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_remove.Click
    Dim Query As String
    mysqlconn.Open()
    Query = "delete from table where screen_id='" & cmb_id.Text & "' "
    Dim cmd As MySqlCommand = New MySqlCommand(Query, mysqlconn)
    Dim i As Integer = cmd.ExecuteNonQuery()
    If (i > 0) Then
        MsgBox("Record is Successfully deleted")
**===> load the data here or call the function that load the data in the combo box**
    Else
        MsgBox("Record is not deleted")
    End If
    mysqlconn.Close()
End Sub 
```

# iphone - 资源路径不工作Xcode

> ID：11447010
> 
> 赞同：0
> 
> 时间：2012-07-12T07:32:37.213
> 
> 标签：iphone, ios, xcode, ios5

我已经为我的应用程序创建了一个包含数据的 sqlite 数据库，并将其拖到 Xcode 中的支持文件组中。

当我尝试使用以下方式访问它时：

`NSString *bundlePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"database.db"];`

它不读取文件。但是，如果我输入完整的文件路径：

`NSString *bundlePath = @"Users/xxxx/Apps/App/database.db";`

该应用程序运行良好。

* * *

我从以下位置打印出文件路径：

`NSString *bundlePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"database.db"];`

它是：

`/Users/xxx/Library/Application Support/iPhone Simulator/5.1/Applications/EE614EFA-BAF9-478E-xxxx-xxxx/App.app/database.db`

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:40:32.917

处理路径的最佳方法是让 API 处理有关将内容“附加”到路径字符串的细节。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"database" 
                                                 ofType:@"db"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:50:09.690

NSString *path = [[NSBundle mainBundle] pathForResource:@"database" ofType:@".SQLite"];

# javascript - EXTJS：隐藏元素在设置可见后不显示

> ID：11447014
> 
> 赞同：1
> 
> 时间：2012-07-12T07:32:57.743
> 
> 标签：javascript, events, extjs, extjs4

您好，我想在更改完成时显示类似于警告标志的图像，然后我有一个像这样的页脚面板，带有标志：

```
Ext.define('footerPanel', {
    extend: 'Ext.panel.Panel',
    cls: 'fastec_background',
    height: 24,
    autoScroll: false,
    border: false,
    layout: {
        type: 'border'
    },
    id: 'panel_footerFastec',

    initComponent: function () {
        var me = this;

        Ext.applyIf(me, {
            items: [{
                margin: '5 5 0 20',
                xtype: 'label',
                region: 'center',
                html: '<a>© 2012 FASTEC GmbH, Paderborn, Germany - </a><a target="_blank" href="http://www.easyoee.de">www.easyOEE.de</a> <a target="_blank" href="http://www.fastec.de">www.fastec.de</a>'
            }, {
                xtype: 'container',
                region: 'east',
                layout: 'table',
                id: 'cont_footer_icons',
                items: [{
                    xtype: 'image',
                    id: 'configchangedIcon',
                    height: 16,
                    margin: '5 0 5 0',
                    width: 16,
                    maxHeight: 20,
                    dock: 'right',
                    maxWidth: 20,
                    scale: 'large',
                    src: 'files/images/disk_blue.png',
                    hidden: true
                }, {
                    xtype: 'image',
                    height: 16,
                    id: 'errorIcon',
                    margin: '5 0 5 0',
                    width: 16,
                    dock: 'right',
                    maxHeight: 20,
                    maxWidth: 20,
                    scale: 'large',
                    src: 'files/images/error16.gif',
                    hidden: true
                }]
            }]
        });

        me.callParent(arguments);
    }
}); 
```

这个想法是我有一个通用函数，我可以在任何地方调用它并显示或隐藏图标，但不幸的是我调用了这个函数并且没有任何反应：

```
changeIconVisibility = function(str, value) {
    try {
        switch(str){
            case 'configchangedIcon':
                var img = Ext.getCmp('configchangedIcon');
                if(value){
                    img.setVisible(true);
                }else{
                    img.setVisible(false);
                }
            break;
        }
    } catch (e) {
        Ext.msg.alert(e);
    }
} 
```

我也尝试直接调用组件和 setVisible(true) 并且没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:52:49.463

获取 footerPanel 组件并使用 hide/show 方法。

喜欢

```
var myPanel = Ext.getCmp('your_panel');
myPanel.items.items[1].hide() //second  item 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-hide](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-hide)

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-show](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-show)

# android - 如果我不关闭 Android 中的数据库会怎样？

> ID：11447017
> 
> 赞同：9
> 
> 时间：2012-07-12T07:33:04.777
> 
> 标签：android, database, android-sqlite

这个标题可能听起来有点疯狂，但这就是让我感到困惑的地方。我的应用大量使用本地数据库操作。正如 Android 文档和一些博客中所建议的那样，我扩展了`SQLiteOpenHelper`该类并在那里定义了我的所有数据库操作。由于我的一些数据库操作在线程中执行，数据库的打开和关闭会导致一些`IllegalStateExceptions`. 所以，我做了我的数据库助手`Singleton`，它解决了这些问题，也摆脱了每个数据库操作的`open`and`close`操作。现在，即使我从未关闭数据库，一切似乎都运行良好。

*   我的困惑是有必要关闭数据库吗？
*   如果是这样，那么在什么地方这样做是正确的，是在`onDestroy`主要活动中还是在其他地方？
*   如果我不关闭数据库，会有什么副作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:40:56.817

`IllegalStateException`如果您尝试再次打开同一个数据库，您可以捕捉到。

如果您创建主要活动的`DBHelper`in`onCreate`方法的实例 - 将写入关闭 db in `onDestroy`。因此，您可以确定，下次在`onCreate`您的数据库中尚未打开。

如果你有`DBHelper`在服务中的参考，那么它应该在服务中打开和关闭，而不是在活动中。

您也可以使用`Application`类打开数据库，但每次应用启动时都会打开（例如，当您收到时`BroadcastReceiver`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:47:33.797

你得到异常的原因是*你试图通过不同的线程从同一个数据库中写入/读取*。

我相信关闭数据库的最佳位置是在`onDestroy()`mainActivity**内部**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:02:01.213

我遇到了同样的问题。我打开了数据库，执行了一些操作，但我忘记了关闭。实际上我看到了一些异常，我 logcat 是“发现泄漏”的数据库被打开并且从未关闭。

# c# - 给定大小、样式等，有没有办法在固定宽度字体中找到字符的宽度？

> ID：11447019
> 
> 赞同：2
> 
> 时间：2012-07-12T07:33:06.907
> 
> 标签：c#, wpf, fonts, textbox

有没有办法在给定的大小、样式等（例如 Courier New、Bold、尺寸 16)?

基本上我需要确定每行*n 个*字符的 TextBox 的宽度（字体仅在运行时知道，所以我不能简单地对数字进行硬编码）。

找到字符宽度的最佳方法是什么？或者有没有更好的方法来确定文本框的宽度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T07:41:07.743

我曾经为字符串编写了一个扩展方法，以根据字体系列、大小等获取其屏幕大小。

```
public static Size GetScreenSize(this string text, FontFamily fontFamily, double fontSize, FontStyle fontStyle, FontWeight fontWeight, FontStretch fontStretch)
{
    fontFamily = fontFamily ?? new TextBlock().FontFamily;
    fontSize = fontSize > 0 ? fontSize : new TextBlock().FontSize;
    var typeface = new Typeface(fontFamily, fontStyle, fontWeight, fontStretch);
    var ft = new FormattedText(text ?? string.Empty, CultureInfo.CurrentCulture, FlowDirection.LeftToRight, typeface, fontSize, Brushes.Black);
    return new Size(ft.Width, ft.Height);
} 
```

你可以这样使用它：

```
"Hello World".GetScreenSize(fontFamily, 12, FontStyles.Normal, FontWeights.Normal, FontStretches.Normal); 
```

您还可以使用默认样式`TextBlock`：

```
"Hello World".GetScreenSize(null, 0, FontStyles.Normal, FontWeights.Normal, FontStretches.Normal); 
```

您还可以查看[extensionmethod.net](http://www.extensionmethod.net/Details.aspx?ID=484)以获取相同的信息。

**编辑：**

如果你有一个固定宽度的字体，你可以使用这样的任意字符来计算宽度：

```
double width = "X".GetScreenSize(fontFamily, 12, FontStyles.Normal, FontWeights.Normal, FontStretches.Normal) * numbersOfCharacters; 
```

# ios - 如何永久设置通知？

> ID：11447024
> 
> 赞同：0
> 
> 时间：2012-07-12T07:33:31.663
> 
> 标签：ios, notifications

我的应用程序是一个药物提醒，许多客户要求我实现每天安排药物的可能性，永远。

我知道一个App可以设置的本地通知的数量是有限的，那么设置这种提醒的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:59:39.800

通知后`UILocalNotification *notification = [[UILocalNotification alloc]init];`，您需要设置`repeatInterval`通知的属性。

所以：

`UILocalNotification *notification = [[UILocalNotification alloc]init];`

...

`notification.repeatInterval = NSDayCalendarUnit;`

...

```
[[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
```

**注意：**随着`NSDayCalendarUnit`通知将每天重复。如果你愿意，你可以使用其他常量让它每周重复一次或其他什么。此常量定义在：

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendarUnit](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendarUnit)

因此，如果您需要其他重复间隔，您可能想看看。

# jquery - JQuery 粘性内容不更新

> ID：11447025
> 
> 赞同：1
> 
> 时间：2012-07-12T07:33:36.250
> 
> 标签：jquery, sticky

我将这个脚本用于一些粘性内容：

[http://www.dynamicdrive.com/dynamicindex11/stickycontent.htm](http://www.dynamicdrive.com/dynamicindex11/stickycontent.htm)

但是，当我将 Ajax 值传递给它时（它包含计算器的结果），一旦它变得“粘性”并且页面滚动，它就不会显示传递的值。但是，一旦我滚动回原始位置并且它不再“粘”，这些值就会重新出现。

任何人都可以帮忙吗？

谢谢！

# sqlite - 我们如何将 html 页面存储到存储卡/手机内存中的黑莓中的 sqlite 中？

> ID：11447028
> 
> 赞同：0
> 
> 时间：2012-07-12T07:33:39.557
> 
> 标签：sqlite, blackberry, java-me

下面的代码指定我们可以在黑莓中建立http连接以及如何将html页面存储为字符串？

我正在这样做，但我能够得到那个 http 请求，但是当我得到响应时，即 http_ok​​ 它是不正确的，因此我可以将文本 oh html 保存为字符串，我可以进一步将其存储到 sqlite 中。

```
LabelField title = new LabelField("SQLite Create Database Sample",
              LabelField.ELLIPSIS |
              LabelField.USE_ALL_WIDTH);
              setTitle(title);
              add(new RichTextField("Creating a database."));
              argURL="https://www.google.com:80";
            try {
                connDesc = connFact.getConnection(argURL);
                if (connDesc != null) {

                    httpConn = (HttpConnection) connDesc.getConnection();
                    // //Send Data on this connection
                    // httpConn.setRequestMethod(HttpConnection.GET);
                    // //Server Response
                    StringBuffer strBuffer = new StringBuffer();
                    inStream = httpConn.openInputStream();
                    int chr;
                    int retResponseCode = httpConn.getResponseCode();
                    if (retResponseCode == HttpConnection.HTTP_OK) {
                        if (inStream != null) {
                            while ((chr = inStream.read()) != -1) {
                                strBuffer.append((char) chr);
                            }
                            serverResponceStr = strBuffer.toString();
                            // appLe.alertForms.get_userWaitAlertForm().append("\n"+serverResponceStr);

                            //returnCode = gprsConstants.retCodeSuccess;
                        }
                    } else {
                        //returnCode = gprsConstants.retCodeNOK;
                    }
                }
            } catch (Exception excp) {
                //returnCode = gprsConstants.retCodeDisconn;
                excp.printStackTrace();
            } `enter code here` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:18:52.713

该代码不执行任何数据库功能，但是我进行了测试，它确实成功地执行了对外部 URL 的 HttpRequest。返回的数据基于您向其发出请求的服务器的响应。

我使用的代码可以在这里找到： [http ://snipt.org/vrl7](http://snipt.org/vrl7)

唯一的修改是保留各种事件的运行摘要，并将响应显示在 RichTextField 中。基本上，这看起来像预期的那样工作，并且生成的 String 应该能够以您认为合适的方式保存；尽管在保存到数据库时可能需要谨慎编码，以免特殊字符丢失或被误解。

# c# - 从xml文件反序列化xml

> ID：11447030
> 
> 赞同：-3
> 
> 时间：2012-07-12T07:33:50.913
> 
> 标签：c#, xml, deserialization, xml-deserialization

> **可能重复：**
> [如何反序列化 XML 文档](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)

我有一个 xml 文件，我想从 xml 文件中制作一个或多个类。我该如何制作？示例 XML 文件

```
<transfer>
<sourceGLN>8680001080359</sourceGLN>
<destinationGLN>8680001404780</destinationGLN>
<actionType>S</actionType>
<shipTo></shipTo>
<documentNumber>265561</documentNumber>
<documentDate>2012-06-07</documentDate>
<note></note>
<version>1.4</version>
<carrier carrierLabel="1">
<productList GTIN="08699516355616" lotNumber="CH4257" expirationDate="2015-03-31">
<serialNumber>00000011214455</serialNumber>
<serialNumber>00000011214456</serialNumber>
<serialNumber>00000011214457</serialNumber>
<serialNumber>00000011214458</serialNumber>
<serialNumber>00000011214459</serialNumber>
<serialNumber>00000011214460</serialNumber>
</productList>
</transfer> 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:41:53.630

有几种方法可以做到这一点，并且根据您想要的确切方式，您可以采用不同的方式。

最简单的可能是使用对象`LINQ to XML`读取文件`XmlDocument`

另请查看： [如何解析 XML 文件？](https://stackoverflow.com/questions/55828/best-practices-to-parse-xml-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:43:30.213

[看这里](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)和[这里](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)，或者干脆用谷歌搜索...

# java - Java 使用来自 URL 的 BufferedImage 获取图像扩展名/类型

> ID：11447035
> 
> 赞同：31
> 
> 时间：2012-07-12T07:34:01.850
> 
> 标签：java, image

我熟悉[使用图像](http://docs.oracle.com/javase/tutorial/2d/images/)。我[从 URL 检索/读取图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)，其中 URL 没有文件扩展名。然后我希望[将图像写入/保存](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)到本地存储，但我必须指定图像文件扩展名（即 JPG、PNG 等），我无法通过 BufferedImage 检索其扩展名。

有人可以指出它是如何完成的吗？任何其他方法都可以。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-12T07:38:55.900

使用[ImageReader.getFormatName()](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageReader.html#getFormatName())

[您可以使用ImageIO.getImageReaders(Object input)](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#getImageReaders(java.lang.Object))获取文件的图像阅读器。

我自己没有测试过，但你可以试试这个：

```
ImageInputStream iis = ImageIO.createImageInputStream(file);

Iterator<ImageReader> imageReaders = ImageIO.getImageReaders(iis);

while (imageReaders.hasNext()) {
    ImageReader reader = (ImageReader) imageReaders.next();
    System.out.printf("formatName: %s%n", reader.getFormatName());
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-03T23:03:21.657

如果对象是 URL，则使用 ImageIO.createImageInputStream(obj) 的建议将不起作用。

一种替代方法是使用 URLConnection.guessContentTypeFromStream(InputStream stream) 方法。此方法通过检查流的前 12 个字节来猜测内容类型。

使用此方法的一个复杂之处在于，它需要将给定的流参数标记为支持，并且 java url.openStream() 返回的流不标记为支持。

此外，如果您想确定内容类型并将图像下载到 BufferedImage，那么最好解决方案只下载一次内容（而不是进行两次通过，一次确定内容类型，第二次下载图像）。

一种解决方案是使用 PushbackInputStream。PushbackInputStream 可用于下载第一个初始字节以确定内容类型。然后可以将字节推回流上，以便 ImageIO.read(stream) 可以完整地读取流。

可能的解决方案：

```
// URLConnection.guessContentTypeFromStream only needs the first 12 bytes, but
// just to be safe from future java api enhancements, we'll use a larger number
int pushbackLimit = 100;
InputStream urlStream = url.openStream();
PushbackInputStream pushUrlStream = new PushbackInputStream(urlStream, pushbackLimit);
byte [] firstBytes = new byte[pushbackLimit];
// download the first initial bytes into a byte array, which we will later pass to 
// URLConnection.guessContentTypeFromStream  
pushUrlStream.read(firstBytes);
// push the bytes back onto the PushbackInputStream so that the stream can be read 
// by ImageIO reader in its entirety
pushUrlStream.unread(firstBytes);

String imageType = null;
// Pass the initial bytes to URLConnection.guessContentTypeFromStream in the form of a
// ByteArrayInputStream, which is mark supported.
ByteArrayInputStream bais = new ByteArrayInputStream(firstBytes);
String mimeType = URLConnection.guessContentTypeFromStream(bais);
if (mimeType.startsWith("image/"))
    imageType = mimeType.substring("image/".length());
// else handle failure here

// read in image
BufferedImage inputImage = ImageIO.read(pushUrlStream); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-21T13:23:18.180

如果您从 URL 获取图像，则意味着您可以通过`InputStream`. 从中您可以使用`ImageIO`获取图像类型（格式）并使用以下代码同时创建一个 BufferedImage。

```
public static BufferedImageWrapper getImageAndTypeFromInputStream(InputStream is) {

    String format = null;
    BufferedImage bufferedimage = null;
    try (ImageInputStream iis = ImageIO.createImageInputStream(is);) {

      Iterator<ImageReader> readers = ImageIO.getImageReaders(iis);

      if (readers.hasNext()) {

        ImageReader reader = readers.next();
        format = reader.getFormatName();
        reader.setInput(iis);
        bufferedimage = reader.read(0);
      }
    } catch (IOException e) {
      logger.error("ERROR DETERMINING IMAGE TYPE!!!", e);
    }

    return new BufferedImageWrapper(format, bufferedimage);
  }

  public static class BufferedImageWrapper {

    private final String imageType;
    private final BufferedImage bufferedimage;

    /**
     * Constructor
     *
     * @param imageType
     * @param bufferedimage
     */
    public BufferedImageWrapper(String imageType, BufferedImage bufferedimage) {
      this.imageType = imageType;
      this.bufferedimage = bufferedimage;
    }

    public String getImageType() {

      return imageType;
    }

    public BufferedImage getBufferedimage() {

      return bufferedimage;
    }

  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-22T16:43:09.023

### 这通过输入 URL 对象（即图像）并返回文件扩展名来工作

但它需要初始下载到 java tmp 目录，然后在 ImageReader 尝试获取收集图像类型后将其删除

```
public String getImageFileExtFromUrl(URL urlObject) throws URISyntaxException, IOException{
    System.out.println("IN DOWNLOAD FILE FROM URL METHOD");
    String tmpFolder = System.getProperty("java.io.tmpdir");
    String tmpFileStr = tmpFolder + "/" + new Date().getTime();
    Files.copy(urlObject.openStream(), Paths.get(tmpFileStr), StandardCopyOption.REPLACE_EXISTING);
    File download = new File(tmpFileStr);
    System.out.println("FILE DOWNLOAD EXISTS: " + download.exists() );
    try{
        ImageInputStream iis = ImageIO.createImageInputStream(download);
        Iterator<ImageReader> iter = ImageIO.getImageReaders(iis);

        ImageReader reader = iter.next();
        String formatName = reader.getFormatName();
        System.out.println("FOUND IMAGE FORMAT :" + formatName);
        iis.close();
        return formatName;
    }catch(Exception e){
        e.printStackTrace();
    }finally{
        Files.delete(Paths.get(tmpFileStr));
    }
    return null;

} 
```

# ruby - PostgreSQL 查询正在吞噬虚拟机

> ID：11447042
> 
> 赞同：2
> 
> 时间：2012-07-12T07:34:37.290
> 
> 标签：ruby, ruby-on-rails-3, memory-leaks, delayed-job, rails-postgresql

[规定：我知道这里没有什么是特定于 Delayed::Job 的。但它有助于建立上下文。]

### 更新

我相信 SQL 查询没有被垃圾收集。我的应用程序生成许多大型 SQL 插入/更新操作（每个 160K 字节，大约每秒 1 个）并通过以下方式将它们发送到 PostgreSQL：

```
ActiveRecord::Base.connection.execute(my_large_query) 
```

当我执行这些数据库操作时，我的应用程序会无限制地缓慢增长。当我存根数据库操作（但在我的应用程序中执行所有其他功能）时，膨胀停止。

所以：关于为什么会发生这种情况，我如何查明它，或者我如何让它停止的任何想法？

### 原始问题

我已经延迟了从网络中获取数据并在 PostgreSQL 数据库中创建记录的任务。它们似乎工作正常，但它们从 vmemsize=100M 开始，在十分钟内增加到 vmemsize=500M，并且还在不断增长。当虚拟机用完时，我的 8G RAM MacBook Pro 开始抖动。

我怎样才能找到内存的去向？

在您向我推荐有关该主题的其他 SO 帖子之前：

我在#after(job) 方法中添加了以下内容：

```
def after(job)
  clss = [Object, String, Array, Hash, ActiveRecord::Base, ActiveRecord::Relation]
  clss.each {|cls| object_report(cls, " pre-gc")}
  ObjectSpace.each_object(ActiveRecord::Relation).each(&:reset)
  GC.start
  clss.each {|cls| object_report(cls, "post-gc")}
end

def object_report(cls, msg)
  log(sprintf("%s: %9d %s", msg, ObjectSpace.each_object(cls).count, cls))
end 
```

它报告基本类的使用情况，显式重置 ActiveRecord::Relation 对象（由[this SO post](https://stackoverflow.com/questions/11149837)建议），显式执行GC（如[this SO post](https://stackoverflow.com/questions/7278454)建议），并报告有多少对象/字符串/数组/哈希等有（如[this SO post](https://stackoverflow.com/questions/3839262/)所建议的）。就其价值而言，这些课程都没有显着增长。（我应该看其他类吗？但这不会反映在对象的数量上吗？）

我不能使用[memprof](https://github.com/ice799/memprof)，因为我运行的是 Ruby 1.9。

如果我在 Linux 上运行，我会考虑其他工具，但我在 OS X 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:26:06.873

## 更新

~~恐怕这都是一条红鲱鱼：运行足够长的时间，每个 ruby​​ 作业都会增长到大约 1.2GB 的 vmsize（是的，那么大，但按照今天的标准来说并不大），然后缩小到 850MB，并在此后这两个值没有继续变大。~~

~~我真正的问题是，我试图在具有 8GB RAM 的机器上运行四个以上这样的进程，这会填满所有可用的 RAM，然后进入交换缺氧状态。只运行四个进程*几乎*会填满可用内存，因此系统不会开始交换。~~

## 更新 2

不，仍然是一个问题——我没有让工作运行足够长的时间：工作不断增长（尽管速度很慢）。即使只运行两个外部作业最终也会消耗所有 VM，并且我的机器开始抖动。

我尝试运行生产模式（认为开发模式可能会缓存没有被释放的东西），但它没有产生任何明显的差异。

# php - php包含条件

> ID：11447045
> 
> 赞同：1
> 
> 时间：2012-07-12T07:34:44.307
> 
> 标签：php, if-statement, include

奇怪的问题：

在以下代码中，两者都包含（显示了两个文件），但只有一个回显：

```
if (!$noParents){ 
    echo "You are parented!";
    include 'views/parentsarea.html.php'; 
} else { 
    echo "You are not parented!";
    include 'views/parentsarearegister.html.php';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:37:41.680

也许您已经在代码的其他位置完成了其他包含，或者刷新了您的 PHP 服务器和 Web 浏览器。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-12T07:38:00.130

解析脚本时添加包含。

# android - 如何停止 android 表中的方向更改？

> ID：11447046
> 
> 赞同：0
> 
> 时间：2012-07-12T07:35:00.663
> 
> 标签：android, android-layout, android-orientation

嗨，我正在开发平板电脑版本的 android 应用程序。在这里我面临方向问题，所以我只想让我的应用程序处于纵向模式。为此，我为我的应用程序中的每个活动使用了如下代码片段的属性。

```
android:configChanges="keyboard|orientation|keyboardHidden"
            android:screenOrientation="portrait" 
```

在纵向模式下测试时，应用程序运行良好。但是在使用平板电脑物理位置和横向测试应用程序时并不好。它首先是横向，然后是纵向。

我以编程方式使用纵向制作活动，但没有效果。请给我任何帮助。这是我的程序化方向修复

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

我在 Motorolo 设备上测试过

请建议我避免我的应用程序进入横向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:38:07.177

试试这个...

```
<activity
            android:label="@string/app_name"
            android:name="abc.xyz.dd.MainScreen" 
            android:screenOrientation="portrait"
            android:configChanges="keyboardHidden|orientation"> 
```

通过在清单文件中添加它，它将防止更改为横向模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:15:11.763

最后，我找到了 android 平板电脑中发生方向变化的原因。在 ICS（4.0+ 版）中，平板电脑在设置>>开发人员工具>>中具有“不保留活动”之类的选项

如果用户选中该选项，则暂停的活动将在再次调用时终止并创建。我的意思是活动不会进入 onPause() 状态，它将进入 onDestroy() 并且当按下返回键时它会再次创建。所以定向行为是不同的。我不知道如何从我们的 android 代码中处理它

# memory - 从网站加载图像时如何减少内存？

> ID：11447049
> 
> 赞同：0
> 
> 时间：2012-07-12T07:35:04.263
> 
> 标签：memory, blackberry

我正在使用这个实用程序

```
public class Util_ImageLoader {
public static Bitmap _bmap;

Util_ImageLoader(String url) {
    HttpConnection connection = null;
    InputStream inputStream = null;
    EncodedImage bitmap;
    byte[] dataArray = null;

    try {
        connection = (HttpConnection) Connector.open(url + Util_GetInternet.getConnParam(), Connector.READ,
                true);
        inputStream = connection.openInputStream();
        byte[] responseData = new byte[10000];
        int length = 0;
        StringBuffer rawResponse = new StringBuffer();
        while (-1 != (length = inputStream.read(responseData))) {
            rawResponse.append(new String(responseData, 0, length));
        }
        int responseCode = connection.getResponseCode();
        if (responseCode != HttpConnection.HTTP_OK) {
            throw new IOException("HTTP response code: " + responseCode);
        }

        final String result = rawResponse.toString();
        dataArray = result.getBytes();
    } catch (final Exception ex) {
    }

    finally {
        try {
            inputStream.close();
            inputStream = null;
            connection.close();
            connection = null;
        } catch (Exception e) {
        }
    }

    bitmap = EncodedImage
            .createEncodedImage(dataArray, 0, dataArray.length);
    int multH;
    int multW;
    int currHeight = bitmap.getHeight();
    int currWidth = bitmap.getWidth();
    multH = Fixed32.div(Fixed32.toFP(currHeight), Fixed32.toFP(currHeight));// height
    multW = Fixed32.div(Fixed32.toFP(currWidth), Fixed32.toFP(currWidth));// width
    bitmap = bitmap.scaleImage32(multW, multH);

    _bmap = bitmap.getBitmap();
}

public Bitmap getbitmap() {
    return _bmap;
}
} 
```

`listfield`当我在包含 10 个孩子的情况下调用它时，日志一直显示`failed to allocate timer 0: no slots left`.

这意味着内存正在被用完，没有更多的内存可以再次分配，因此我的主屏幕无法启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:25:11.960

同时你在内存中有以下对象：

```
 // A buffer of about 10KB
    byte[] responseData = new byte[10000];

    // A string buffer which will grow up to the total response size
    rawResponse.append(new String(responseData, 0, length));

    // Another string the same length that string buffer
    final String result = rawResponse.toString();

    // Now another buffer the same size of the response.        
    dataArray = result.getBytes(); 
```

总共，如果你下载了 n 个 ascii 字符，你同时有 10KB，加上第一个 unicode 字符串缓冲区中的 2*n 个字节，`result`加上字符串中的 2*n 个字节，加上`dataArray`. 如果我没记错的话，总计为 5n + 10k。有优化的空间。

一些改进将是：

*   先检查响应码，如果响应码是 HTTP 200 则读取流。如果服务器返回错误则无需读取。
*   摆脱字符串。如果之后您再次转换为字节，则无需转换为字符串。
*   如果图像很大，下载时不要将它们存储在 RAM 中。相反，当您从输入流中读取时，打开`FileOutputStream`并写入临时文件。然后，如果临时图像仍然大到可以显示，则缩小它们。

# android - 我的应用消耗高 CPU

> ID：11447057
> 
> 赞同：1
> 
> 时间：2012-07-12T07:35:26.050
> 
> 标签：android, cpu-usage

我的应用程序由四个选项卡组成：一个 web 视图和三个带有一些文本/编辑文本的视图，......问题是我的应用程序消耗了大量 CPU，我不明白为什么，主要问题之一是当应用程序处于暂停状态（用户使用主页按钮），我的应用程序仍在使用 CPU（大约 20%，甚至更多！）并且非常消耗电池。

我不明白为什么要使用这么多 CPU，所以我有两个问题：

1.  我如何才能准确（使用 Eclipse）知道使用过多 CPU 的进程（方法、活动...）？
2.  当用户按下主页按钮时，我如何以 0 CPU 消耗“冻结”我的应用程序（我想是在 onPause 方法中，我尝试使用完成（），它的工作但当用户返回我的应用程序时，他得到一个FC）。

非常感谢 ！

编辑 ：

似乎我的 webview 消耗 CPU。如何在 onPause 期间停止此 webview 而不会破坏 webview 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:01:06.007

我找到了解决方案：

webview 中的 javascript 内容是问题所在。要解决这个问题：

```
@Override
public void onPause() {
    super.onPause();
    /* pause timer of the webview, if not, high CPU during on pause */
    page.pauseTimers();
} 
```

在简历上，

```
public void onResume() {  
    /* reactive timer */
    super.onResume();
    page.resumeTimers();
} 
```

# ruby-on-rails-3.2 - acl9 不填充 created_at

> ID：11447058
> 
> 赞同：2
> 
> 时间：2012-07-12T07:35:26.367
> 
> 标签：ruby-on-rails-3.2, acl9

我完全遵循了 acl9 自述文件，仔细检查了所有内容，但在尝试使用`has_role!(:admin)`.

```
ActiveRecord::StatementInvalid: SQLite3::ConstraintException: roles_users.created_at may not be NULL: INSERT INTO "roles_users" ("user_id", "role_id") VALUES (1, 1) 
```

唯一的问题是我使用的是 Rails 3.2 并使用了以下修复错误：[Rails 3.2 undefined method `key?' 对于零：NilClass](https://stackoverflow.com/questions/9440325/rails-3-2-undefined-method-key-for-nilnilclass)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:50:22.537

这是 Rails 中的一个已知问题。希望它会在[这里](https://github.com/thuss/standalone-migrations/issues/47)得到解决和报告。

我通过消除`has_and_belongs_to_many`相应模型类中的线条来修复它，并且由于某种原因使它消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T21:13:55.230

这也是由 acl9 文档中的错误引起的（因为 habtm 连接表不应该有时间戳）。我也修复[了文档](https://github.com/be9/acl9/wiki/Role-Subsystem#subject-model)，acl9 1.2 现在也有一个用于该迁移的生成器:)

# ios - 如何在 IOS 中使用 9-patch 镜像？

> ID：11447066
> 
> 赞同：30
> 
> 时间：2012-07-12T07:36:01.607
> 
> 标签：ios, nine-patch

我想在我的 IOS 应用程序中使用 9-patch 图像。可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T08:21:47.937

查看 UIImage 的方法[`resizableImageWithCapInsets:(UIEdgeInsets)capInsets`](https://developer.apple.com/reference/uikit/uiimage/1624102-resizableimagewithcapinsets?language=objc)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-10T15:59:39.600

你可以试试这个简单的实现： [https ://github.com/shiami/SWNinePatchImageFactory](https://github.com/shiami/SWNinePatchImageFactory)

这个概念很简单，描述如下：

该技术只是将 9-patch PNG 图像转换为 iOS 兼容、可调整大小的 UIImage 对象。有关更多信息，请参阅 UIImage 的方法 resizableImageWithCapInsets:(UIEdgeInsets)insets。所以它只支持在水平和垂直两侧拉伸一段补丁标记。

```
+ (UIImage*)createResizableImageFromNinePatchImage:(UIImage*)ninePatchImage
{
    NSArray* rgbaImage = [self getRGBAsFromImage:ninePatchImage atX:0 andY:0 count:ninePatchImage.size.width * ninePatchImage.size.height];
    NSArray* topBarRgba = [rgbaImage subarrayWithRange:NSMakeRange(1, ninePatchImage.size.width - 2)];
    NSMutableArray* leftBarRgba = [NSMutableArray arrayWithCapacity:0];
    int count = [rgbaImage count];
    for (int i = 0; i < count; i += ninePatchImage.size.width) {
        [leftBarRgba addObject:rgbaImage[i]];
    }

    int top = -1, left = -1, bottom = -1, right = -1;
    count = [topBarRgba count];
    for (int i = 0; i <= count - 1; i++) {
        NSArray* aColor = topBarRgba[i];
        if ([aColor[3] floatValue] == 1) {
            left = i;
            break;
        }
    }
    NSAssert(left != -1, @"The 9-patch PNG format is not correct.");
    for (int i = count - 1; i >= 0; i--) {
        NSArray* aColor = topBarRgba[i];
        if ([aColor[3] floatValue] == 1) {
            right = i;
            break;
        }
    }
    NSAssert(right != -1, @"The 9-patch PNG format is not correct.");
    for (int i = left + 1; i <= right - 1; i++) {
        NSArray* aColor = topBarRgba[i];
        if ([aColor[3] floatValue] < 1) {
            NSAssert(NO, @"The 9-patch PNG format is not support.");
        }
    }
    count = [leftBarRgba count];
    for (int i = 0; i <= count - 1; i++) {
        NSArray* aColor = leftBarRgba[i];
        if ([aColor[3] floatValue] == 1) {
            top = i;
            break;
        }
    }
    NSAssert(top != -1, @"The 9-patch PNG format is not correct.");
    for (int i = count - 1; i >= 0; i--) {
        NSArray* aColor = leftBarRgba[i];
        if ([aColor[3] floatValue] == 1) {
            bottom = i;
            break;
        }
    }
    NSAssert(bottom != -1, @"The 9-patch PNG format is not correct.");
    for (int i = top + 1; i <= bottom - 1; i++) {
        NSArray* aColor = leftBarRgba[i];
        if ([aColor[3] floatValue] == 0) {
            NSAssert(NO, @"The 9-patch PNG format is not support.");
        }
    }

    UIImage* cropImage = [ninePatchImage crop:CGRectMake(1, 1, ninePatchImage.size.width - 2, ninePatchImage.size.height - 2)];

    return [cropImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)];
} 
```

SWNinePatchImageView 还提供了 Nib 或 Storyboard 用法。您可以在 repo 中查看示例项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T02:18:39.030

最可能的结果是 [https://github.com/andylanddev/Tortuga22-NinePatch](https://github.com/andylanddev/Tortuga22-NinePatch) 9-patch 库已经使用了波纹管方法 resizableImageWithCapInsets:(UIEdgeInsets)insets

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-18T19:26:22.593

您可以使用图像裁剪和图像拉伸。

**图像裁剪**

```
 func crop(img: UIImage, with rect: CGRect) -> UIImage? {
            guard let cgImg = img.cgImage else { return nil }
            // Create bitmap image from context using the rect
            if let imageRef: CGImage = cgImg.cropping(to: rect){
                // Create a new image based on the imageRef and rotate back to the original orientation
                let image: UIImage = UIImage(cgImage: imageRef, scale: img.scale, orientation: img.imageOrientation)
                return image
            }
            else{
                return nil
            }
        } 
```

**图像拉伸**

```
func stretch(image: UIImage, newWidth: CGFloat) -> UIImage? {
        guard image.size.width < newWidth else {
            return image
        }

        let originalWidth = image.size.width
        let offset: CGFloat = 1
        // crop left first
        let left = crop(img: image, with: CGRect(x: 0, y: 0, width: originalWidth/2, height: image.size.height))
        // crop right first
        let right = crop(img: image, with: CGRect(x: originalWidth/2, y: 0, width: originalWidth/2, height: image.size.height))

        UIGraphicsBeginImageContextWithOptions(CGSize(width: newWidth, height: image.size.height),
                                               false, image.scale)

        let lhsResizable = left?.resizableImage(withCapInsets: UIEdgeInsets(top: 0,
                                                                                  left: originalWidth/2 - offset,
                                                                                  bottom: 0,
                                                                                  right: 0),
                                                  resizingMode: .stretch)
        // draw left stretched first
        lhsResizable?.draw(in: CGRect(x: 0, y: 0, width: newWidth/2, height: image.size.height))

        let rhsResizable = right?.resizableImage(withCapInsets: UIEdgeInsets(top: 0,
                                                                                  left: 0,
                                                                                  bottom: 0,
                                                                                  right: originalWidth/2 - offset),
                                                  resizingMode: .stretch)
        // then , draw right stretched
        rhsResizable?.draw(in: CGRect(x: newWidth/2, y: 0, width: newWidth/2, height: image.size.height))

        let fullImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()

        return fullImage
    } 
```

**这是一个例子：**

*   原始图像：

> 礼物.9

[![0000](../Images/7711c4fc46eda3cbc9dcd1fd266684df.png)](https://i.stack.imgur.com/SprR1.png)

*   处理后的图像

[![22233](../Images/b3ca02e5ca9619354649ff09a13922c4.png)](https://i.stack.imgur.com/dt0Ds.png)

*   示例代码：

    ```
     view.backgroundColor = UIColor.white
          let imgViewWidth: CGFloat = 300
          let imgView = UIImageView(frame: CGRect(origin: CGPoint(x: 50, y: 250), size: CGSize(width: imgViewWidth, height: 100)))
          view.addSubview(imgView)
          if let image = UIImage(named: "gift.9"), let img = stretch(image: image, newWidth: imgViewWidth){
              imgView.image = img
          } 
    ```

# javascript - 在 JavaScript 中如何获取当前日期的第二个？

> ID：11447067
> 
> 赞同：13
> 
> 时间：2012-07-12T07:36:02.067
> 
> 标签：javascript, time, seconds

所以这个问题在标题中描述。我需要使用 JavaScript 获取当天的当前秒数。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T07:36:59.897

你把这些位加起来：

```
var dt = new Date();
var secs = dt.getSeconds() + (60 * dt.getMinutes()) + (60 * 60 * dt.getHours()); 
```

或者如果你喜欢

```
var dt = new Date();
var secs = dt.getSeconds() + (60 * (dt.getMinutes() + (60 * dt.getHours()))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T07:40:18.293

例如（[在行动中](http://jsfiddle.net/fedosov/zsmBc/)）：

```
​var today = new Date(), today_abs = new Date(), today_secs = 0;
today_abs.setHours(0);
today_abs.setMinutes(0);
today_abs.setSeconds(0);
today_secs = (today.getTime() - today_abs.getTime()) / 1000;​ 
```

# c# - 如何取消这个 Queued BackGroundworker

> ID：11447070
> 
> 赞同：0
> 
> 时间：2012-07-12T07:36:09.947
> 
> 标签：c#, queue, backgroundworker, legacy-code

我有一些遗留代码在代码库中并被使用了几年，最近我们发现它的方法**StopImmediately()**根本没有阻止它。由于我对线程或后台工作人员所做的工作很少，因此我无法弄清楚它是如何工作的。

我想知道是否有经验丰富的线程专家可以告诉我如何阻止这个令人困惑的小野兽完成它的任务。下面是完整的类（对不起代码量）

我不知道如何取消它..提前感谢您的帮助..

```
using System;
using System.Collections.Generic;

using System.ComponentModel;
using System.Threading;
namespace GPS2.BackgroundWorkerEx
{
public class QedBackgroundWorker
{
    public QedBackgroundWorker() {}

    Queue<object> Queue = new Queue<object>();          
    object lockingObject1 = new object();
    private Thread currentThread;
    public delegate void WorkerCompletedDelegate<K>(K result, Exception error);
    public object Arguments { get; set; }

    /// <summary>    
    /// doWork is a method with one argument    
    /// </summary>    
    /// <typeparam name="T">is the type of the input parameter</typeparam>    
    /// <typeparam name="K">is the type of the output result</typeparam>    
    /// <param name="inputArgument"></param>    
    /// <param name="doWork"></param>    
    /// <param name="workerCompleted"></param>    
     public void RunAsync<T,K>(Func<T, K> doWork, T inputArgument, WorkerCompletedDelegate<K> workerCompleted)    
     {        
         BackgroundWorker bw = GetBackgroundWorker<T,K>(doWork, workerCompleted);

         Queue.Enqueue(new QueueItem(bw, inputArgument));        
         lock (lockingObject1)        
         {            
             if (Queue.Count == 1)            
             {                
                 ((QueueItem)this.Queue.Peek()).RunWorkerAsync();
                 //currentThread = System.Threading.Thread.CurrentThread; 
             }        
         }    
     }    
    /// <summary>    
    /// Use this method if you don't need to handle when the worker is completed    
    /// </summary>    
    /// <param name="doWork"></param>    
    /// <param name="inputArgument"></param>    
     public void RunAsync<T,K>(Func<T, K> doWork, T inputArgument)    
     {        
         RunAsync(doWork, inputArgument, null);    
     }

    private BackgroundWorker GetBackgroundWorker<T, K>(Func<T, K> doWork, WorkerCompletedDelegate<K> workerCompleted)    
    {
        BackgroundWorker bw = new BackgroundWorker();

        bw.WorkerReportsProgress = false;        
        bw.WorkerSupportsCancellation = true;        
        bw.DoWork += (sender, args) =>{            
            if (doWork != null)  
            {
                args.Result = (K)doWork((T)args.Argument);
                currentThread = System.Threading.Thread.CurrentThread; 
            }        
        };        

        bw.RunWorkerCompleted += (sender, args) =>{            
            if (workerCompleted != null)            
            {                
                workerCompleted((K)args.Result, args.Error);            
            }            

            Queue.Dequeue();            

            lock (lockingObject1)            
            {                
                if (Queue.Count > 0)                
                {                    
                    ((QueueItem)this.Queue.Peek()).RunWorkerAsync();                                  
                }            
            }        
        };        
        return bw;    
    }
    public void StopImmediately()
    {
        if (currentThread != null)
            currentThread.Abort();
    }

    public bool IsBusy()
    {
        ThreadState state = currentThread.ThreadState;
        bool res = true;
        switch (state)
        {
            case ThreadState.Running:
                res =  true;
                break;
            default:
                res =  false;
                break;
        }
        return res;
    }

}
public class QueueItem{    

    public QueueItem(BackgroundWorker backgroundWorker, object argument)    
    {        

        this.BackgroundWorker = backgroundWorker;        
        this.Argument = argument;    
    }    

    public object Argument { get; private set; }    
    public BackgroundWorker BackgroundWorker { get; private set; }    

    public void RunWorkerAsync()    
    {        
        this.BackgroundWorker.RunWorkerAsync(this.Argument);    
    }    

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:24:10.360

`BackgroundWorker`a支持取消的典型方法是让`DoWork`事件处理程序定期检查`BackgroundWorker`' 的`CancellationPending`属性：

```
var worker = new BackgroundWorker();
worker.WorkerSupportsCancellation = true;  
worker.DoWork += (sender, args) =>
{            
    foreach (var thing in listOfThingsToDo)
    {
       if (worker.CancellationPending)
       {
            // Someone has asked us to stop doing our thing
            break;
       }
       else
       {
            DoTheThing(thing);
       }
    }
}; 
```

`BackgroundWorker`如果它正在运行，想要取消它的人会打电话给

```
worker.CancelAsync(); 
```

这将导致它将其`CancellationPending`属性设置为`true`并导致`DoWork`当前正在运行的事件处理程序*在完成处理当前`thing`*. 它不会立即终止；做这项工作的人必须定期问“我现在应该退出还是继续？” 无论哪种方式，工作线程都会优雅地终止。

上面写的代码试图通过中止线程来立即终止后台工作者。[这通常不是您想要的方式。](http://www.interact-sw.co.uk/iangblog/2004/11/12/cancellation)理想情况下，应该更改此代码，以便作为`doWork`参数传入的函数定期检查取消请求。

但它不能按书面方式工作的主要原因是，`currentThread`直到调用函数*之后*才设置成员：`doWork`

```
bw.DoWork += (sender, args) =>
{
    if (doWork != null)
    {
        args.Result = (K)doWork((T)args.Argument);
        currentThread = System.Threading.Thread.CurrentThread;
    }
}; 
```

调用`StopImmediately()`将看到一个空线程，因为回调在分配成员之前`DoWork`正在等待传入的函数完成。`doWork``currentThread`

它们应该如下翻转

```
bw.DoWork += (sender, args) =>
{
    if (doWork != null)
    {
        currentThread = System.Threading.Thread.CurrentThread;
        args.Result = (K)doWork((T)args.Argument);
    }
}; 
```

然后它确实会立即（或多或少）不干净地终止。我建议阅读[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)，了解如何更好地支持取消`BackgroundWorker`.

希望这可以帮助！

# .net - 在 where 子句中聚合的 linq 查询

> ID：11447071
> 
> 赞同：0
> 
> 时间：2012-07-12T07:36:29.360
> 
> 标签：.net, linq, aggregate

我有一个包含开始/结束日期的对象列表。如果当前记录存在，我试图找到当前记录，或者找不到最近过期的记录。

*   当前定义为过去的非空开始日期和空结束日期（开放式结束）或未来的结束日期。
*   最近过期的可以定义为当前时间段没有最大结束日期。理论上，每个对象表示的时间跨度不应重叠，因此我希望最大结束日期足以满足最近过期的时间。

我试图按照[这个回答](https://stackoverflow.com/a/10776799/685760)来回答一个类似的问题，但是当列表中还有其他条目是未来的日期时，我似乎找不到正确的条目（即有一个开始/结束日期，两者都在未来） ）。

我的尝试如下，其中 a 是开始日期，b 是结束日期，c 是我在调试时使用的指示器，d 用于定义列表条目类型。我只对类型 2 感兴趣。

```
 [TestMethod]
    public void TestRetrievalOfListElements()
    {

        var baseDate = DateTime.Now;

        var list = new[]
        {
             new { a = new DateTime?(baseDate.AddDays(-90)), 
                   b = new DateTime?(baseDate.AddDays(-60)), c = "LongExpired", d=1 },
             new { a = new DateTime?(baseDate.AddDays(-190)), 
                   b = new DateTime?(baseDate.AddDays(-160)), c = "LongestExpired", d=1 },
             new { a = new DateTime?(baseDate.AddDays(-59)), 
                   b = new DateTime?(baseDate.AddDays(+20)), c = "Current", d=1 },
             new { a = new DateTime?(baseDate.AddDays(-159)), 
                   b = new DateTime?(baseDate.AddDays(-91)), c = "LongerExpired", d=1 },
             new { a = new DateTime?(baseDate.AddDays(-90)), 
                   b = new DateTime?(baseDate.AddDays(-60)), c = "LongExpired", d=2 },
             new { a = new DateTime?(baseDate.AddDays(-190)), 
                   b = new DateTime?(baseDate.AddDays(-160)), c = "LongestExpired", d=2 },
             new { a = new DateTime?(baseDate.AddDays(-59)), 
                   b = new DateTime?(baseDate.AddDays(+20)), c = "Current", d=2 },
             new { a = new DateTime?(baseDate.AddDays(-159)), 
                   b = new DateTime?(baseDate.AddDays(-91)), c = "LongerExpired", d=2 },
             new { a = new DateTime?(baseDate.AddDays(+21)), 
                   b = new DateTime?(baseDate.AddDays(+60)), c = "Future", d=2 },

        }.ToList();

        // The following isn't really right either as it doesn't take into account
        // whether d is of type 1 or 2 either. Not sure how to combine aggregates and
        // other conditions ie MIN and of type 2

        var oldestEntry = (from x in list
                          where x.a == list.Min(d => d.a) &&
                          x.d == 2
                          select x).FirstOrDefault();

        Assert.IsTrue(oldestEntry.a == baseDate.AddDays(-190), "Expected oldest date to be 190 days earlier than today");

        var latestEntryThatIsntInTheFuture = 
                          (from x in list
                          from y in list.Where(z => z.d == 2 && z.a <= baseDate)
                          where x.a == list.Max(d => d.a) &&
                          x.d == 2
                          select x).FirstOrDefault();

        Assert.IsTrue(latestEntryThatIsntInTheFuture.a == baseDate.AddDays(-59), "Expected latest date that isn't in the future to be 59 days earlier than today");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:53:03.853

这可能是您正在寻找的：

```
// Find the current which is defined as a non null start date that is in the past 
// and either a null end date (open ended) or and end date in the future. 
var now = DateTime.Now;
var current = list
    .Where(x => x.a.HasValue && x.a.Value < now && (!x.b.HasValue || x.b.Value > now))
    .FirstOrDefault();
if (current == null)
{ 
    //Then find most recently expired 
    current = list.Where(x => x.b.HasValue)
                  .OrderByDescending(x => x.b)
                  .FirstOrDefault();
} 
```

因此，在我看来，您不需要在查询中进行聚合。

# c++ - Boost ASIO - 如何编写控制台服务器 2

> ID：11447074
> 
> 赞同：2
> 
> 时间：2012-07-12T07:36:35.233
> 
> 标签：c++, console-application, boost-asio, nonblocking

我正在尝试编写一个在 Ubuntu Server（无 GUI）上运行的游戏服务器，但我在第 1 步遇到了问题。我是 C++ 新手，所以请多多包涵。

我需要能够在服务器继续运行时在任何给定点向服务器键入命令。由于 cin 是一个阻塞输入，所以它不会飞。我已经挖掘了，似乎要走的路是使用 Boost 的 ASIO 库。

[这个答案](https://stackoverflow.com/a/5211349/1519716)非常接近满足我的需求，但我仍然需要知道另外两件事：

1：从输入传递的“命令”似乎一次限制为 1 个字符。我需要的不仅仅是单键输入，例如“shutdown”、“say 'Hello World!'”、“listPlayers -online”等。我尝试修改代码以使用字符串，而不是 char：

```
#include <boost/asio.hpp>

#include <boost/bind.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/shared_ptr.hpp>

#include <iostream>
#include <string>

using namespace boost::asio;

class Input : public boost::enable_shared_from_this<Input>
{
public:
    typedef boost::shared_ptr<Input> Ptr;

public:
    static void create(
            io_service& io_service
            )
    {
        Ptr input(
                new Input( io_service )
                );
        input->read();
    }

private:
    explicit Input(
            io_service& io_service
         ) :
        _input( io_service )
    {
        _input.assign( STDIN_FILENO );
    }

    void read()
    {
        async_read(
                _input,
                boost::asio::buffer( &_command, sizeof(_command) ),
                boost::bind(
                    &Input::read_handler,
                    shared_from_this(),
                    placeholders::error,
                    placeholders::bytes_transferred
                    ));
    }

    void read_handler(
            const boost::system::error_code& error,
            size_t bytes_transferred
            )
    {
        if ( error ) {
            std::cerr << "read error: " << boost::system::system_error(error).what() << std::endl;
            return;
        }

        if ( _command.compare( "\n" ) != 0 ) {
            std::cout << "command: " << _command << std::endl;
        }

        this->read();
    }

private:
    posix::stream_descriptor _input;
    std::string _command;
};

int main()
{
    io_service io_service;
    Input::create( io_service );
    io_service.run();
} 
```

但是，这会在输入几个字符后导致分段错误，并且在输入任何输入后按回车不再导致“命令：”出现。有没有办法让这个设置使用字符串？我确信一次将它们附加到一个单独的字符串中会起作用，但我想认为这种设置可以在本机上与整个字符串一起使用。

2：（为澄清而编辑）我需要这个非阻塞输入与我的服务器代码的其余部分协同工作。问题是：该代码去哪里了？我提醒您注意上面的 main() 函数，修改为使用 while 循环，并调用 mainLoop 函数：

```
bool loopControl = true;

int main()
{
    io_service io_service;
    Input::create( io_service );

    // This loops continually until the server is commanded to shut down
    while( loopControl )
    {
        io_service.run();      // Handles async input 
        mainLoop();            // Where my actual program resides
    }
} 
```

即使其他一切正常，在正常情况下控制仍然不会到达 mainLoop() 。换句话说，`io_service.run()`仍然是阻塞，打败了整个目的。这显然不是实现 io_service 和/或 mainLoop(); 的正确方法；那是什么？

如果这已经完成了数千次，我深表歉意，但显然我没有在谷歌上搜索正确的短语来显示我正在寻找的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:38:56.127

`boost::asio::buffer`不直接支持从 中创建可变缓冲区`std::string`，主要是因为不能保证它们在 C++11 之前的内存中是连续的。

你称之为（`(void*, size_t)`重载）的方式，你会让读取覆盖std::string的内部，这会导致你的段错误。您可能应该使用此列表中的其他重载之一：http: [//www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/buffer.html](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/buffer.html) - 很可能是一个 for `std::vector<char>`，因为您可以轻松当您的读取返回时，将其复制到一个字符串中。

现在的问题是您需要事先知道要读取多少个字符，因为您的字符串是可变长度的。为此，您需要`async_read`在阅读实际内容之前单独计算长度。然后你调整缓冲区的大小（正如我所说，最有可能`std::vector<char>`）并安排读取该长度。请注意，发件人可以同时发送两者，这只是从流中读取复杂......总结：

1.  async_read 你的字符串长度成固定长度的整数
2.  适当调整读取内容的缓冲区大小
3.  async_read 你的内容

至于你的第二个问题，目前还不清楚你想要什么，但你可能想看看`io_service::poll()`你是否想在 asio 运行时做自己的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:57:09.140

1.  `boost::asio::buffer( &_command, sizeof(_command) )`意味着您要覆盖对象的 4 个前字节（或其他字节`sizeof(string)`）`_command`，但这显然不是您想要的。如果您需要自动调整大小的输入缓冲区，请`asio::streambuf`改用。

2.  `io_service::run` *阻塞*调用线程，所以你`mainLoop`不会运行。您可以`io_service::run`在单独的线程中执行，也可以手动轮询，将对/的`io_serivce`调用（参见参考资料）与您自己的应用程序循环的迭代交错。`run_one``poll_one`

# static-typing - 静态类型和动态类型的定义

> ID：11447080
> 
> 赞同：2
> 
> 时间：2012-07-12T07:36:46.793
> 
> 标签：static-typing, dynamic-typing

这两个定义哪一个是正确的？

*   **静态类型**- 在编译时检查类型匹配（因此只能应用于编译语言）
*   **动态类型**- 在运行时检查类型匹配，或者根本不检查。（这个术语可以应用于编译或解释语言）

* * *

*   **静态类型**- 类型被分配给变量，所以我会说*'x is of type int'*。
*   **动态类型**- 类型被分配给值（如果有的话），所以我会说*'x 持有一个 int'*

根据这个定义，静态或动态类型不依赖于编译或解释语言。

哪个是正确的，或者两者都不完全正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:01:06.533

> 哪个是正确的，或者两者都不完全正确？

第一对定义更接近但并不完全正确。

> **静态类型**- 在编译时检查类型匹配（因此只能应用于编译语言）

这很棘手。我认为如果一种语言被解释但在执行开始之前进行了类型检查，那么它仍然是静态类型的。OCaml REPL 几乎就是一个例子，除了它在技术上将源代码编译（和类型检查）成自己的字节码，然后解释字节码。

> **动态类型**- 在运行时检查类型匹配，或者根本不检查。

相当：

**动态类型**- 类型检查在运行时完成。

**Untyped** - 未进行类型检查。

> **静态类型**- 类型被分配给变量，所以我会说“x 是 int 类型”。
> 
> **动态类型**- 类型被分配给值（如果有的话），所以我会说'x 持有一个 int'

变量无关紧要。尽管您只能在许多静态类型语言的源代码中的变量和函数定义中显式地看到类型，但所有子表达式也具有静态类型。例如，`"foo" + 3`通常是静态类型错误，因为您不能将字符串添加到 int 但不涉及变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T01:27:44.450

查看*静态*一词的一种有用方法是：静态属性是在所有可能的输入上为程序的所有可能执行所保留的属性。然后，您可以查看任何给定的语言或类型系统，并考虑它可以验证哪些静态属性，例如：

*   JavaScript：没有段错误/内存错误

*   Java/C#/F#：如果编译的程序和变量的类型为 T，则该变量仅保存此类型的值 - 在所有执行中。但是，可悲的是，引用类型也承认`null`了一个价值——[十亿美元的错误](http://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare)。

*   ML没有`null`，使上述保证更强

*   Haskell 可以验证有关副作用的语句，例如“此程序不会在标准输出上打印任何内容”之类的属性

*   Coq 还验证终止 - “这个程序在所有输入上终止”

你想验证多少，这取决于口味和手头的问题。所有的魔法（验证）都是有代价的。

如果您以前从未见过 ML，请尝试一下。至少花 5 分钟关注 Yaron Minsky 的[演讲](http://queue.acm.org/detail.cfm?id=2038036)。它可以改变你作为程序员的生活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T07:47:42.680

第二个在我看来是一个更好的定义，假设您不是在寻找关于事情为什么或如何运作的解释。

更好的做法是这样说

*   静态类型给变量一个不能改变的显式类型
*   动态类型为变量提供可以更改的隐式类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T07:53:27.213

我喜欢后一个定义。考虑在 Java 或 C++ 等面向对象语言中从基类转换为派生类时的类型检查，这符合第二个定义而不是第一个定义。它是一种带有（可选）动态类型检查的编译语言。

# java - 使用标准java从HTML段中提取文本

> ID：11447082
> 
> 赞同：0
> 
> 时间：2012-07-12T07:36:52.903
> 
> 标签：java

我收到一段 HTML 文档作为 Java 字符串，我想提取它的内部文本。例如：**你好*世界*** ---->你好世界

有没有办法使用java标准库提取文本？可能比带有空字符串的打开/关闭标签正则表达式更有效？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:40:28.073

我还要说 - 不要在 HTML 中使用正则表达式。;-)

你可以[试一试 JTidy](http://jtidy.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T07:38:51.647

不要使用正则表达式来解析 HTML，而是使用像[HtmlCleaner](http://htmlcleaner.sourceforge.net/)这样的专用解析器。

使用正则表达式通常会在第一次测试时起作用，然后开始变得越来越复杂，直到最终无法适应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T07:39:41.733

[不要使用正则表达式来解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，例如使用[jsoup: Java HTML Parser](http://jsoup.org/)。它有一种从 DOM 中选择元素的便捷方式。

> **示例** 获取 Wikipedia 主页，将其解析为 DOM，然后从新闻部分中选择标题到元素列表中：
> 
> ```
> Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
> Elements newsHeadlines = doc.select("#mp-itn b a"); 
> ```

JDK 中还有一个 HTML 解析器：[javax.swing.text.html.parser.Parser](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/parser/Parser.html)，可以这样应用：

```
Reader in = new InputStreamReader(new URL(webpageURL).openConnection().getInputStream());
ParserDelegator parserDelegator = new ParserDelegator();
parserDelegator.parse(in, harvester, true); 
```

然后，根据您要查找的类型：开始标签、结束标签、属性等，您定义适当的回调函数：

```
@Override
public void handleStartTag(HTML.Tag tag,
        MutableAttributeSet mutableAttributeSet, int pos) {

    // parses the HTML document until a <a> or <area> tag is found
    if (tag == HTML.Tag.A || tag == HTML.Tag.AREA) {

        // reading the href attribute of the tag
        String address = (String) mutableAttributeSet
                .getAttribute(Attribute.HREF);

    /* ... */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T07:48:41.440

您可以使用[HTMLParser](http://htmlparser.sourceforge.net/)，这是一个开源的。

# php - 如何在 Php Extension 中构建 C++ 类？

> ID：11447083
> 
> 赞同：-1
> 
> 时间：2012-07-12T07:36:58.060
> 
> 标签：php, c++

我正在尝试将 c++ 类包装在 php 扩展中。使用这个[http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/](http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/)链接，我还创建了一个模块php 扩展。之后我必须在 php 扩展中编译一个 C++ 类。我该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:15:14.690

我建议您阅读[您链接的 Zend DevZone 文章](http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/)中也引用[了 Sara Goleman 的系列](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)文章。在那里，您会找到所需的一切，包括在编写自己的扩展程序之前可以遵循的示例。

此外，PHP 文档有一[章关于编写扩展](http://www.php.net/manual/en/internals2.php)。

# performance - 如何基于 PostgreSQL 表组织工作池？

> ID：11447086
> 
> 赞同：2
> 
> 时间：2012-07-12T07:37:12.037
> 
> 标签：performance, postgresql, parallel-processing, race-condition

假设我在 PostgreSQL 中有一张大表（超过 500Gb）——工作池。我也有许多工作进程，从工作池中获取工作。释放管理器的最有效方法是什么，它将从“工作池”表中返回下一个字符串作为对工作人员请求的响应。可能是某种游标、迭代器或其他什么？

*UPD*我忘记了一件关键的事情——表格是不变的。不允许任何 INSERT 或 UPDATE 操作。我们只是从中阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:41:31.357

[PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)可能适合也可能不适合该问题。它涵盖了类似的问题领域，所以看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:17:20.987

我想被重定向到[this](http://www.postgresql.org/docs/9.1/static/sql-declare.html)和[this](http://www.postgresql.org/docs/9.1/static/sql-fetch.html)。感谢[http://habrahabr.ru/qa/22030/](http://habrahabr.ru/qa/22030/)用户 ToSHiC 和 strib。

# php - 从 ob_get_clean() 输出中删除换行符

> ID：11447103
> 
> 赞同：1
> 
> 时间：2012-07-12T07:38:14.207
> 
> 标签：php, output-buffering

好的，我确实有以下代码

```
<?php
ob_start();
?>
codepad is an 
online compiler/interpreter, 
and a simple collaboration tool.
Paste 

your code below, 
and codepad wi
ll run 
it and give you a short 
URL you can use to share
 it in chat or email
<?php
$str = str_replace('\r\n','',trim(ob_get_clean()));
echo $str;
?> 
```

你可以在这里看到它是如何工作的 [http://codepad.org/DrOmyoY9](http://codepad.org/DrOmyoY9)

现在我想要**的是从存储的输出**中删除换行符`ob_get_clean()`。

我几乎在互联网上查看了如何删除字符串中的换行符，这是除了使用 slow 之外删除换行符的常见且最快的方法`preg_replace()`。

为什么会发生这种情况？这已经是一个错误了吗？或者我只是错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:15:20.660

\r\n 是 windows 风格，但是如果用户使用的是 linux 或 mac，那就不同了。所以最好的解决方案是：

```
$str = str_replace(array("\r","\n"),'',trim(ob_get_clean())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T07:44:05.583

我想你错过了一件事，它应该是：

```
$str = str_replace("\r\n",'',trim(ob_get_clean())); 
```

使用双引号而不是单引号

# java - 嵌入式 Jetty 8.x / Spring MVC / WebApplicationInitializer

> ID：11447104
> 
> 赞同：3
> 
> 时间：2012-07-12T07:38:24.957
> 
> 标签：java, spring-mvc, jetty

有没有人有以下工作样本：

*   嵌入式 Jetty 8.x 应用程序
*   使用 Spring MVC
*   零 XML 配置（即在 Servlet 端使用 Spring WebApplicationInitializer，在 Spring 端使用 annotations/java 配置）

我已经尝试了所有可能的组合，但我无法让它发挥作用。我发现的大多数嵌入式码头示例都是基于 7.x 或仍然使用 XML 配置文件。我现在得到的最佳设置是创建一个 WebAppContext 并将配置设置为 AnnotationConfiguration。这在控制台上显示实际上正在发生某些事情，但它找不到我的 WebApplicationInitializer 类，而它肯定在类路径上。这是基于 Jetty 8.1.4 和 Spring 3.1.2。

出于测试目的，WebApplicationInitializer 类并没有做太多的事情，它只在 onStartup 方法中打印一些内容以检查是否正在加载。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:25:31.947

你看到这个问题了吗：[Spring 3.1 WebApplicationInitializer & Embedded Jetty 8 AnnotationConfiguration](https://stackoverflow.com/questions/13222071/spring-3-1-webapplicationinitializer-embedded-jetty-8-annotationconfiguration)？

我不能分享我的代码，但这里有一些代码可以帮助你：

Web.xml

```
<!-- Java-based Spring container definition -->
<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>

<!-- Location of Java @Configuration classes that configure the components that makeup this application -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>com.workable.config</param-value>
</context-param> 
```

空 application-config.xml ：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">
</beans> 
```

春天的 WebMVC 配置：

```
/**
 * Spring MVC Configuration.
 *
 */
@Configuration
@EnableWebMvc
@EnableAsync
@EnableScheduling
public class WebMvcConfig extends WebMvcConfigurerAdapter {
}

/**
 * Main configuration class for the application.
 * Turns on @Component scanning, loads externalized application.properties.
 */
@Configuration
@ComponentScan(basePackages = {
    "com.workable"
}, excludeFilters = {@Filter(Configuration.class)})
public class MainConfig {
    ...
} 
```

库版本：

```
<spring.version>3.1.2.RELEASE</spring.version>
<jetty.version>8.1.5.v20120716</jetty.version> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T19:50:25.790

这是在码头 9 上对我有用的东西。

```
 Server server = new Server(8080);

    WebAppContext webAppContext = new WebAppContext();
    webAppContext.setResourceBase("src/main/webapp");
    webAppContext.setContextPath("/");
    webAppContext.setConfigurations(new Configuration[] {
            new WebXmlConfiguration(),
            new AnnotationConfiguration() {
                @Override
                public void preConfigure(WebAppContext context) {
                    ClassInheritanceMap map = new ClassInheritanceMap();
                    map.put(WebApplicationInitializer.class.getName(), 
                            new ConcurrentHashSet<String>() {{add(WebApplication.class.getName());}});
                    context.setAttribute(CLASS_INHERITANCE_MAP, map);
                    _classInheritanceHandler = new ClassInheritanceHandler(map);
                }
            }
        });
    server.setHandler(webAppContext);
    server.start(); 
```

对于 8 号码头，这可能有效：

```
webAppContext.setConfigurations(new Configuration[] {
    new WebXmlConfiguration(),
    new AnnotationConfiguration() {
        @Override
        public void preConfigure(WebAppContext context) throws Exception {
            MultiMap<String> map = new MultiMap<String>();
            map.add(WebApplicationInitializer.class.getName(), MyWebApplicationInitializerImpl.class.getName());
            context.setAttribute(CLASS_INHERITANCE_MAP, map);
            _classInheritanceHandler = new ClassInheritanceHandler(map);
        }
    }
}); 
```

MultiMap 是 org.eclipse.jetty.util 包的一种形式

# android - 我如何使用带有 ListView 的复选框并在 android 的 Sqlite 数据库中插入值

> ID：11447106
> 
> 赞同：0
> 
> 时间：2012-07-12T07:38:31.347
> 
> 标签：android, sqlite, checkbox, android-assets

我创建了一个包含三个表的数据库，并将该数据库放入资产文件夹中。现在我想在带有复选框的列表视图中显示一列的值，然后在用户选择时将它们插入另一个表。那么我该怎么做。

到目前为止，我所做的是获取数据并显示在列表中。但是我怎样才能放置复选框，然后获取我不知道的值。我使用的代码如下

1.主要活动

```
package com.example;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.SimpleCursorAdapter;

public class MainActivity extends ListActivity {

    private Cursor employees;
    private MyDatabase db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        db = new MyDatabase(this);
        employees = db.getEmployees(); // you would not typically call this on the main thread

        ListAdapter adapter = new SimpleCursorAdapter(this, 
                android.R.layout.simple_list_item_1, 
                employees, 
                new String[] {"FullName"}, 
                new int[] {android.R.id.text1});

        getListView().setAdapter(adapter);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        employees.close();
        db.close();
    }

} 
```

2.Mydatabase.java

```
package com.example;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;

import com.readystatesoftware.sqliteasset.SQLiteAssetHelper;

public class MyDatabase extends SQLiteAssetHelper {

    private static final String DATABASE_NAME = "northwind";
    private static final int DATABASE_VERSION = 2;

    public MyDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);  
        //setForcedUpgradeVersion(2);
    }

    public Cursor getEmployees() {

        SQLiteDatabase db = getReadableDatabase();
        SQLiteQueryBuilder qb = new SQLiteQueryBuilder();

        String [] sqlSelect = {"0 _id", "FullName"}; 
        String sqlTables = "Employees";

        qb.setTables(sqlTables);
        Cursor c = qb.query(db, sqlSelect, null, null,
                null, null, null);

        c.moveToFirst();
        return c;

    }

} 
```

请建议我如何做到这一点..任何帮助都必须感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:33:29.870

`ListView`在我看来，您应该为和手动迭代结果数据集创建一个自定义适配器，更新一个`ArrayList<MyObject>`（您也应该创建）。

然后在您的自定义适配器中创建一些函数以获得“选定”项目，或者创建一些类似的函数`public void setSelected(int position)`来相应地更改复选框并`private boolean isSelected(int position)`返回复选框是否被选中。

首先，我们需要对象类来保存数据集：

```
 class MyObject {
      //properties with setters and getters
      boolean selected;
  } 
```

在活动中：

```
private MyActivity extends Activity {
  ...
  ArrayList<MyObject> data = new ArrayList<MyObject>();
  ...
  //get dataset
  for(int i=0; i<cursor.getCount(); i++) {
     //create and set MyObject
     data.add(MyObject); 
  }     
  ...
  CustomAdapter myAdapter = new CustomAdapter(..., data);
  listView.setAdapter(myAdapter);
  ...
} 
```

在 CustomAdapter 类中：

```
class CustomAdapter extends BaseAdapter {
   ArrayList<MyObject> data;
   //constructor, properties, getters, setters
   //implement methods

   public void setSelected(int position) {
      data.get(position).setSelected(true); //boolean selected property defines whether the checkbox is selected or not
      notifyDatasetChanged(); //update the UI
   }

   @Override
   getView() {
      CheckBox checkBox; //the check box of the list row
      ...
      if(data.get(position).isSelected()) {
         checkBox.setSelected(true);
      } else {
         checkBox.setSelected(false);
      } //update the checkbox accordingly
   }
} 
```

我非常简要地写下来给你一个概述。有很多代码要写，但我给你的是“热门文章”。

# php - MySQL比较日期和时差

> ID：11447114
> 
> 赞同：0
> 
> 时间：2012-07-12T07:38:58.227
> 
> 标签：php, mysql, datetime

有没有办法将 mySQL 中的 datetime 字段与当前日期进行比较并返回时差？我真的不知道从哪里开始，所以如果有人有想法，请指出正确的方向。

这是我已经尝试过的。

```
SELECT *
FROM  `order` 
WHERE  `dateTimeAdded` - NOW( ) <1; 
```

基本上我想要实现的是获取在数据库中保存超过 8 小时的订单。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T07:46:06.440

如果您希望查询有机会在 datetime 列上使用索引，则不应在列上进行操作（函数），而只能在另一侧进行操作：

```
SELECT *
FROM  `order` 
WHERE  dateTimeAdded < NOW( ) - INTERVAL 8 HOUR ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:46:31.823

如果您只需要日期的差异，请使用 DATEDIFF(now(), column)

如果您需要时差，请使用 TIMEDIFF(now(),column)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T07:54:26.100

```
DATEDIFF(date1,date2); 
```

取自[_](http://www.w3schools.com/sql/func_datediff_mysql.asp)

# java - 如何在draw2d中设置连接线的线宽和颜色？

> ID：11447120
> 
> 赞同：1
> 
> 时间：2012-07-12T07:39:15.907
> 
> 标签：java, draw2d

我正在尝试在 draw2d 中设置连接线的宽度和颜色。我找到了“setLineWidth()”方法，但是我需要调用这个方法。我在输入端口对象上调用此方法但没有工作。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:07:53.897

你能发布一些你的代码吗？这对我有用：

```
 PolylineConnection connection = new PolylineConnection();
    connection.setLineWidth(2);
    connection.setSourceAnchor(new ChannelStartAnchor(this));
    connection.setTargetAnchor(new ChannelEndAnchor(figure));

    Display display = Display.getCurrent();
    final Color connectionColorHoover = display.getSystemColor(SWT.COLOR_RED);
    final Color connectionColor = new Color(display,54,82,111);
    connection.setBackgroundColor(connectionColor);
    connection.setForegroundColor(connectionColor); 
```

# java - Spring MVC：标签形式：未解释

> ID：11447121
> 
> 赞同：0
> 
> 时间：2012-07-12T07:39:16.280
> 
> 标签：java, jsp, spring-mvc

我正面临一个非常令人不安的问题。

我有一个jsp，它显示这样的表单，并且工作得很好。

```
<form:form action="${Form}" class="form-options" commandName="Form">

<div id="clonable" class="clonable">

                    <fieldset id="monfield">
                        <p>
                            Lien source :
                            <form:input id="urlSource_0" path="mesFormulaires[0].urlSource"
                                type="text" name="urlSource_0" />

                            <br />
                        </p>

                <p>
                    <input class="input" type="submit" value="Save" /> <br />
                </p>

            </form:form> 
```

而且，我有一个按钮，它使用 javascript 添加另一个类似的表单

```
<script>

    var formCount = 0;
        $(function() {

            $('.add').click(function() {
                formCount++;
                var template = "<fieldset id='field'>"
                + "<p>Lien source : "
                + "&lt;input id='urlSource_"+formCount+"' path='mesFormulaires["+formCount+"].urlSource' type='text' name='urlSource_"+formCount+"' /&gt;"
                + "<br /></p>"
                + "</fieldset>";
                template=template.replace(/&lt;/g,"<");
                template=template.replace(/&gt;/g,">");
                $(template).appendTo('#clonable');              
            });
        });
    </script> 
```

但是，当我在我的页面中添加一个新表单时，我只有文本，并且我的“表单：”没有被解释，所以我生成的表单不起作用。我需要这个来让我的表单工作。

是的，我有这个（其他类似帖子中的常规问题）

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%> 
```

它只是 form: 不起作用，因为如果我删除它，表单会显示得很好。

问候。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:12:15.817

您在 JavaScript 中输出的标记包括来自 Spring Form JSP 标记 ( `path`) 的属性。

JavaScript在页面呈现并发送到客户端*后*执行，因此无法执行 Spring Form JSP 标记以输出正确绑定的值。JSP 标记仅*在*页面被发送到客户端之前工作，而它仍在服务器上呈现。

# android - 缩放动画后的视图，尚未调整到新位置

> ID：11447123
> 
> 赞同：5
> 
> 时间：2012-07-12T07:39:21.950
> 
> 标签：android, animation

缩放动画后的视图，尚未调整到新位置。

我使用 android 动画 (ScaleAnimation) 将布局（启动时的屏幕尺寸）缩放到自身大小的 0.95 倍，并且比例参考屏幕中心点。

 **```
final AnimationListener al2 = new AnimationListener() {

    @Override
    public void onAnimationStart(Animation arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationRepeat(Animation arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationEnd(Animation arg0) {

    }
};
public void animScale(){
    ScaleAnimation sa = new ScaleAnimation(1,0.95f,1,0.95f, topLayout.getMeasuredWidth()/2, topLayout.getMeasuredHeight()/2);
    sa.setDuration(500);
    sa.setFillEnabled(true);
    sa.setFillAfter(true);
    sa.setAnimationListener(al2);
    topLayout.startAnimation(sa);

}

public void onCreate(Bundle savedInstanceState) {   

    scaleButton = (Button) findViewById(R.id.scaleButton);
    scaleButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            animScale();
        }
    });
} 
```*  *在此动画之后，我的布局已更改为新位置，但是当我再次单击按钮时

布局总是从屏幕尺寸缩放到 0.95 倍。

这向我展示了布局永远不会通过动画改变实际大小。

我需要在动画监听器动画结束时添加什么代码？

我希望当我点击按钮时它会做到这一点，屏幕尺寸 -> 屏幕尺寸 *0.95 -> 屏幕尺寸 *0.95^2 ->.......

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-24T09:30:42.537

出现问题是因为您使用的是`Animation`类。使用动画，您只能更改可见外观。在您的情况下，您需要使用`Animator`which 也会更新位置和尺寸。

[这个问题](https://stackoverflow.com/q/28220613/4560619)解释了 Animation 和 Animator 之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-24T09:19:33.430

ScaleAnimation 不会更改布局的参数。它在不更改参数的情况下进行动画处理，以获得更流畅的动画效果。

您可以创建一个布尔实例变量

```
Boolean animationDone = false; 
```

并将其设置为 true`onAnimationEnd`以指示动画是否完成

```
public void onAnimationEnd(Animation arg0) {
   animationDone=true;
} 
```

并在动画之前在 animScale 中检查它以防止多个动画......

```
public void animScale(){
 if ( animationDone ) return;
  //..... animation code here...
 } 
```**

# ruby - Ruby正则表达式与原子表达式匹配，不起作用

> ID：11447129
> 
> 赞同：0
> 
> 时间：2012-07-12T07:40:10.097
> 
> 标签：ruby, regex

我正在做这种匹配：

```
"125co.txt".match /^(?>\d{1,11})(?!af|a|f)((?:(?:c?o|co?).*)?.*)$/i 
```

MatchData 对象是：

```
#<MatchData "125co.txt" 1:"co.txt"> 
```

作为该对象的第一项，我希望有匹配的数字（“125”）来执行某些任务。

它应该是：

```
#<MatchData "125co.txt" 1:"125" 2:"co.txt"> 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:42:25.610

尝试使用额外的括号`(?>\d{1,11})`：

```
/^((?>\d{1,11}))(?!af|a|f)((?:(?:c?o|co?).*)?.*)$/i 
```

# openerp - 将销售订单数据库中的数据保存到新数据库

> ID：11447132
> 
> 赞同：-2
> 
> 时间：2012-07-12T07:40:18.687
> 
> 标签：openerp

> **可能重复：**
> [如何使用 OpenERP 将一份数据保存在两个数据库中？](https://stackoverflow.com/questions/11424880/how-do-i-save-one-piece-of-data-in-two-databases-using-openerp)

对不起我的最后一个问题

我想做这样的。如果我单击按钮保存，SO 数据库中的销售订单 SO001 将存储到新的数据库中。有我的剧本

```
def _product_search (self, cr, uid, ids, name, arg):

    cr.execute = ('SELECT sale_order.name FROM sale_order WHERE name = \'SO001\'')
    res = cr.fetchall() 
```

但是上面的脚本，没有任何反应，我真的需要你的帮助，拜托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:21:41.453

如果您只想同步草稿状态下的销售订单，请使用 base_synchro 模块

# javascript - 没有显示任何问题但不起作用 - dwr

> ID：11447133
> 
> 赞同：1
> 
> 时间：2012-07-12T07:40:19.900
> 
> 标签：javascript, jsp, dwr

大家好，我正在使用 dwr 处理 java-servlet 中的 ajax 调用，

这就是我的 dwr.xml，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dwr PUBLIC
"-//GetAhead Limited//DTD Direct Web Remoting 2.0//EN"
"http://getahead.org/dwr/dwr20.dtd">
<dwr>
    <allow>
        <create creator="new" javascript="TempCardServlet">
            <param name="class" value="com.slingmeadia.notifier.servlet.TempCardServlet"/>
        </create>
    </allow>
</dwr> 
```

这就是我的servlet文件，我称之为

```
package com.slingmeadia.notifier.servlet;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.LinkedHashMap;
import java.util.Map;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class TempCardServlet extends HttpServlet {
 @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String funtionType="";
        if(request.getParameter("functiontype")!=null){
            funtionType = (String)request.getParameter("functiontype");
        }
        if(funtionType.equals("logout")){
            processLogout(request, response);
        }else{

        }

    }
@Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processLogout(request, response);
    }
    public Map sampleFill(int empid,String functiontype){
      System.out.println("functiontype : "+functiontype);
        Map employeeData = new LinkedHashMap();
        if(functiontype.equals("add")){
            employeeData.put("name", "Antony");
        }else{
            employeeData.put("name", "Antony");
            employeeData.put("cardnumber", "87896857852");
            employeeData.put("issuedate", "17/01/2012");
        }
        return employeeData;
    }

} 
```

这就是我从 jsp 文件中调用方法的方式：

```
<script src='dwr/engine.js'></script>
        <script src='dwr/util.js'></script>
        <script src='dwr/interface/TempCardServlet.js'></script>

        <script>
            function getValues(id) {
                var empid = id.value;
                var optionValue = document.getElementById("selectedOption").value;
                TempCardServlet.sampleFill(empid,optionValue,{callback:setValues,async:false});
            }
            function setValues(tempcardMap) {
                if(tempcardMap !=null){
                    document.getElementById("empname").value=tempcardMap.name;
                    document.getElementById("tempcardnumber").value=tempcardMap.cardnumber;
                    document.getElementById("dateofissue").value=tempcardMap.issuedate;
                }
            }
</script> 
```

这就是我调用 javascript 方法的方式：

```
<td width="55%"><input class="inputBoxes" type="text" name="empid" id="empid" onblur="getValues(this)" /></td> 
```

似乎一切都安排得很好，没有问题，但它不起作用，也没有给出任何异常。

我也试着喜欢这个

在我输入的网址中`http://localhost:8080/acct/dwr/index.html`

它给了我 DWR 已知的类列表：当我尝试从浏览器打开类文件并提供一些示例输入时，我的类文件也在那里，但它没有给出任何错误，也没有输出。

请帮我解决这个问题。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:58:58.067

1.检查dwr路径

如果您要在 WEB-INF 中拥有视图文件，则

```
<script src='dwr/engine.js'></script>         
<script src='dwr/util.js'></script>         
<script src='dwr/interface/TempCardServlet.js'></script> 
```

引用这种方式将起作用。如果不是，您必须提供正确的路径，如下所示

```
<script src='../dwr/engine.js'></script> 
<script src='../dwr/util.js'></script> 
<script src='../dwr/interface/TempCardServlet.js'></script> 
```

# ruby-on-rails - 使用Passenger 升级到Rails 3 后，相对根导致不同的OpenID 用户令牌

> ID：11447142
> 
> 赞同：2
> 
> 时间：2012-07-12T07:40:53.817
> 
> 标签：ruby-on-rails, ruby, openid, redmine, ruby-openid

我们让 gmail openid 使用 Redmine 1.3.1 (Rails 2 Mongrel) 工作了一年多。我已经将一个单独的盒子升级到 Redmine 2.0.3（Rails 3 Passenger），但是当我从旧实例切换到升级后的实例时，所有用户都会收到 Google 授权应用程序屏幕的提示，如果他们单击是，则会提示他们Redmine注册屏幕。

我已将 rails 会话 secret_token 与整个数据库一起转移到升级后的实例。过去从 Redmine 1.2 升级到 1.3.1 时，我完全遵循了这个程序，它运行良好。如果我在我们新升级的 Redmine 实例上注册一个新帐户并转到我在 gmail 中的用户帐户设置，我会看到同一 URL 有两个 Redmine 授权应用程序。

看起来问题的根源在于身份验证时传递给 OpenID 提供程序的 openid.realm。当用户被发送到 Google 时，url 参数已更改为：

`openid.realm=http://our.domain.com/redmine/` `openid.return_to=http://our.domain.com/redmine/login?_method%3Dpost%26open_id_complete%3D1`

至：

`openid.realm=http://our.domain.com` `openid.return_to=http://our.domain.com/redmine/login?_method%3Dpost`

该领域不包含升级实例中的 /redmine，在手动编辑浏览器 URL 后，**我确定添加此部分将解决问题**。我能做些什么来让它生成正确的 openid.realm 但仍然在Passenger中工作。是否在 Apache 级别而不是在Passenger 中的rails 级别处理相对根URL？

使用的宝石：open_id_authentication、ruby-openid、rack-openid。

问候，皮埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:10:12.513

似乎没有一个优雅的解决方案。我对 rack_openid gem 进行了猴子修补以强制使用 ream_url。将其放在某个初始化程序中：

```
class Rack::OpenID
  alias :super_realm_url :realm_url

  def realm_url(req)
    super_realm_url(req) + "/redmine/"
  end
end 
```

# hadoop - 如何在行动示例 ReutersToSparseVectors 中运行 mahout？

> ID：11447145
> 
> 赞同：0
> 
> 时间：2012-07-12T07:41:01.847
> 
> 标签：hadoop, mahout

我想运行“ReutersToSparseVectors.java”。我可以毫无问题地编译和创建 JAR 文件。

我通过以下命令编译了这个文件：

`javac -classpath hadoop-core-0.20.205.0.jar:lucene-core-3.6.0.jar:mahout-core-0.7.jar:mahout-math-0.7.jar ReutersToSparseVectors.java`

 ``created JAR file with below command:

`jar cvf ReutersToSparseVectors.jar ReutersToSparseVectors.class`` 

`When I write java -jar ReutersToSparseVectors.jar`运行，给我以下错误：

无法从 ReutersToSparseVectors.jar 加载主类清单属性

你能帮我解决这个问题吗？

如果此示例可以使用 hadoop 运行，请告诉我如何使用 hadoop 运行此示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:08:37.697

而不是使用`-jar`选项，那么最好运行：

```
 java -cp mahout-core.jar:... mia.clustering.ch09.ReutersToSparseVectors 
```

或者您可以使用`mvn exec:java`命令，如[自述文件](https://github.com/tdunning/MiA)中所述的示例...

```
 mvn exec:java -Dexec.mainClass="mia.clustering.ch09.ReutersToSparseVectors" 
```

或者，您可以直接从 IDE 运行此文件（假设您正确导入了 Maven 项目）。

PS您的命令不起作用，因为要使用`-jar`开关运行，该`.jar`文件应该在清单中具有特殊条目，该条目描述了默认情况下应该启动该类...

PPS 最好将书中的示例与 Mahout 0.7 一起使用，因为它们已经过测试。如果需要，您可以将它与 0.7 版一起使用，届时您需要从`mahout-0.7`存储库分支中获取源代码和示例（链接在上面）`

# android - 在从 url 获得的资源可绘制对象中显示标记

> ID：11447146
> 
> 赞同：7
> 
> 时间：2012-07-12T07:41:03.927
> 
> 标签：android, google-maps, android-canvas

![显示用户的地图](../Images/041dff710f0ddd6a1b544b6423c77b0e.png)

这是我的地图页面，它显示了我的应用程序的所有用户。图像（标记）也是从我的服务器提供的 URL 中获取的。这些标记必须放在 Drawable 内（如图所示的圆形图像）。我使用 Canvas 从 url 创建了一个类似于 Bitmap 的圆圈。

```
 public Drawable showMe(String url)
    {
        Bitmap bitmap=null;
         try {
                URL newurl = new URL(url);
                bitmap = BitmapFactory.decodeStream(newurl.openConnection().getInputStream());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
        bitmap=getBitmap(url);
        Paint paint = new Paint();
           paint.setFilterBitmap(true);
           int targetWidth  = 30;
           int targetHeight = 30;
           Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight,Bitmap.Config.ARGB_8888);
           RectF rectf = new RectF(0, 0, 30, 30);
           Canvas canvas = new Canvas(targetBitmap);
           Path path = new Path();
          path.addRoundRect(rectf, targetWidth, targetHeight, Path.Direction.CW);
        canvas.clipPath(path);
          canvas.drawBitmap( bitmap, new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight()),
                           new Rect(0, 0, targetWidth, targetHeight), paint);

           Matrix matrix = new Matrix();
           matrix.postScale(1f, 1f);
           Bitmap resizedBitmap = Bitmap.createBitmap(targetBitmap, 0, 0, 30, 30, matrix, true);
           Bitmap bitmap_circle=mergeBitmaps(resizedBitmap);
           BitmapDrawable bd = new BitmapDrawable(bitmap_circle);

          return bd;
    } 
```

上述函数将为标记创建最终的可绘制对象。mergeBitmaps() 函数还将资源可绘制对象和位图合并在一起。

```
public Bitmap mergeBitmaps(Bitmap manBitmap){

            try{

                Bitmap markerBitmap = BitmapFactory.decodeResource( this.getResources(), R.drawable.circle_bg);
                Bitmap bmOverlay = Bitmap.createBitmap(markerBitmap.getWidth(), markerBitmap.getHeight(), markerBitmap.getConfig());
                Canvas canvas = new Canvas(bmOverlay);
                Matrix matrix = new Matrix();
                matrix.postScale(1f, 1f);
                canvas.drawBitmap(markerBitmap, matrix, null);
                canvas.drawBitmap(manBitmap, 5, 5, null);
                return bmOverlay;

            }
            catch(Exception ex){
                ex.printStackTrace();
                return null;
            }

        } 
```

但问题是，这个位图并不是最适合背景 Drawable 的，以便让人感觉两者合在一起会产生一个单一的图像。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:42:57.667

改变

```
canvas.drawBitmap(manBitmap, 5, 5, null); 
```

smtg 喜欢

```
canvas.drawBitmap(manBitmap, (markerBitmap.getWidth()-manbitmap.getWidth())/2, 
    (markerBitmap.getHeight()-manbitmap.getHeight())/2, null); 
```

# javascript - jQuery keydown 事件：值延迟

> ID：11447152
> 
> 赞同：0
> 
> 时间：2012-07-12T07:41:17.460
> 
> 标签：javascript, jquery

我有以下问题：

我在输入字段上有一个事件监听器。在每个 keydown 事件中，输入字段的值都应该得到验证。问题是分配给事件目标的值被延迟了：

1.  您有一个空输入字段并输入一个字母：

    ```
    $('form.registration').keydown(function(e) {
    var $el = $(e.target);
    if ($el.val() == "") {
        $el.closest("div.control-group").addClass("error");
    }
    console.log($el.val()); // this logs ""
    }); 
    ```

2.  你输入第二个字母

    ```
    $('form.registration').keydown(function(e) {
    var $el = $(e.target);
    if ($el.val() == "") {
        $el.closest("div.control-group").addClass("error");
    }
    console.log($el.val()); // this logs the first letter (for example: "a")
    }); 
    ```

如您所见，该值总是延迟一个字母。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:44:16.730

我会建议你`keyup`改用。这将防止您的程序在用户按住键时密集运行，只有在用户释放键后才会处理内容。这种方法在很多情况下都非常方便。

# mongodb - mongo 集合中的数据碎片

> ID：11447154
> 
> 赞同：3
> 
> 时间：2012-07-12T07:41:22.713
> 
> 标签：mongodb

我在一个 mongo 集合中有很多更新，并且在那之后假设文件系统上有大量碎片。我主要担心收集将在文件系统上不断增长，而收集中的数据却没有有价值的增长。

你能否证实或反驳我的担忧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T07:44:00.227

这取决于您正在进行什么样的更新。如果这些更新增加了你的文档（数组推送或类似的），那么是的，你会有一些碎片。就地更新 ($inc) 不会导致文档移动（无碎片）。

顺便说一句，这不是碎片本身，而是一些浪费的空间。也就是说，如果将文档移动到新位置，则不会重用其旧位置。

# c# - XML 数据文件无法打开和正常工作

> ID：11447156
> 
> 赞同：0
> 
> 时间：2012-07-12T07:41:24.093
> 
> 标签：c#, wpf, xml

我使用 XML 作为数据库文件开发了一个 WPF 应用程序。昨天，该程序停止工作。经过一番检查，我发现**Transaction.xml**文件有问题。我尝试在 IE 中打开相同的内容，但出现此错误

> XML 页面无法显示
> 
> 无法使用样式表查看 XML 输入。请更正错误，然后单击“刷新”按钮，或稍后重试。
> 
> * * *
> 
> 在文本内容中发现无效字符。错误处理资源'file:///C:/RegisterMaintenance/Transaction.xml

然后，我尝试在记事本中打开文件，它显示了奇怪的字符（下面的屏幕截图）。

![在此处输入图像描述](../Images/b72709e1e988217e2b9b6a815dab1ed4.png)

最后，它显示了正确的xml结构。请告诉我出了什么问题以及为什么 xml 没有正确显示。怎样才能恢复到正常状态。我真的很担心，因为这是我唯一的数据文件。任何帮助或建议都会很棒。

编辑此文件的代码之一，还有其他类似类型的代码文件使用**Transaction.xml**

```
public string Add()
    {
        XDocument doc1 = XDocument.Load(@"Ledgers.xml");
        XElement elem = (from r in doc1.Descendants("Ledger")
                where r.Element("Name").Value == this.Buyer
                select r).First();
        this.TinNo = (string)elem.Element("TinNo");
        this.PhoneNo = (string)elem.Element("PhoneNo");
        this.CommissionAmount = (this.CommissionRate * this.Amount) / 100;
        this.CommissionAmount = Math.Round((decimal)this.CommissionAmount);
        this.VatAmount = (this.CommissionAmount + this.Amount) * this.VatRate / 100;
        this.VatAmount = Math.Round((decimal)this.VatAmount);
        this.InvoiceAmount = this.Amount + this.CommissionAmount + this.VatAmount;
        XDocument doc2 = XDocument.Load(@"Transactions.xml");
        var record = from r in doc2.Descendants("Transaction")
                     where (int)r.Element("Serial") == Serial
                     select r;
        foreach (XElement r in record)
        {
            r.Element("Invoice").Add(new XElement("InvoiceNo", this.InvoiceNo), new XElement("InvoiceDate", this.InvoiceDate),
                new XElement("TinNo", this.TinNo), new XElement("PhoneNo", this.PhoneNo), new XElement("TruckNo", this.TruckNo), new XElement("Source", this.Source),
                new XElement("Destination", this.Destination), new XElement("InvoiceAmount", this.InvoiceAmount),
                new XElement("CommissionRate", this.CommissionRate), new XElement("CommissionAmount", this.CommissionAmount),
                new XElement("VatRate", this.VatRate), new XElement("VatAmount", this.VatAmount));
        }
        doc2.Save(@"Transactions.xml");
        return "Invoice Created Successfully";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:49:01.337

.xml 显然格式不正确。没有浏览器或其他读取 xml 文件的程序可以用它做任何事情。在几行之后xml开始正确并不重要。

所以错误肯定是它创建和/或编辑你的xml文件。你应该看看那里。也许编码是错误的。最常用的编码是 UTF-8。

另外，作为旁注，XML 并不是大型数据库的最佳格式（开销太大），因此最好切换到二进制格式。即使切换到 JSON 也会带来好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:22:24.917

**C#**是一种**面向对象编程**(OOP) 语言，也许您应该使用一些对象！你怎么可能测试你的代码的准确性？

您应该分离出职责，例如：

```
public class Vat
{
    XElement self;
    public Vat(XElement parent)
    {
        self = parent.Element("Vat");
        if (null == self)
        {
            parent.Add(self = new XElement("Vat"));
            // Initialize values
            Amount = 0; 
            Rate = 0;
        }
    }

    public XElement Element { get { return self; } }

    public decimal Amount
    {
        get { return (decimal)self.Attribute("Amount"); }
        set
        {
            XAttribute a = self.Attribute("Amount");
            if (null == a)
                self.Add(new XAttribute("Amount", value));
            else
                a.Value = value.ToString();
        }
    }

    public decimal Rate
    {
        get { return (decimal)self.Attribute("Rate"); }
        set
        {
            XAttribute a = self.Attribute("Rate");
            if (null == a)
                self.Add(new XAttribute("Rate", value));
            else
                a.Value = value.ToString();
        }
    }
} 
```

所有增值税数据将在一个节点中，所有对它的访问都将在一个可测试的类中。

你上面的 foreach 看起来更像：

```
foreach(XElement r in record)
{
    XElement invoice = r.Add("Invoice");
    ...
    Vat vat = new Vat(invoice);
    vat.Amount = this.VatAmount;
    vat.Rate = this.VatRate;
} 
```

那是可读的！乍一看，从您的代码中，我什至无法判断 invoice 是否是增值税的父级，但我现在可以！

**注意：**这并不是说您的代码有问题，它可能是硬盘驱动器错误，因为在我看来就是这样。但是，如果您希望人们仔细阅读您的代码，请使其具有可读性和可测试性！多年后，如果您或其他人必须更改您的代码，如果它不可读，那将毫无用处。

也许从这件事中你学到了两件事

1.  阅读能力和测试能力。
2.  备份！（我所有有价值的 Xml 文件都在 SVN (TortoiseSVN) 中，因此我可以比较更改的内容，并保持良好的备份。SVN 已备份到在线存储。）

理想的下一步是获取属性设置器中的代码并将其重构为可测试和可重现的静态函数扩展：

```
public static class XAttributeExtensions
{
    public static XAttribute SetAttribute(this XElement self, string name, object value)
    {
        // test for correct arguments
        if (null == self)
            throw new ArgumentNullException("XElement to SetAttribute method cannot be null!");
        if (string.IsNullOrEmpty(name))
            throw new ArgumentNullException("Attribute name cannot be null or empty to SetAttribute method!");
        if (null == value) // how to handle?
            value = ""; // or can throw an exception like one of the above.

        // Now to the good stuff
        XAttribute a = self.Attribute(name);
        if (null == a)
            self.Add(a = new XAttribute(name, value));
        else
            a.Value = value.ToString();
        return a;
    }
} 
```

这很容易测试，非常易读，最好的是它可以一遍又一遍地使用，得到相同的结果！

例如，可以通过以下方式大大简化 Amount 属性：

```
public decimal Amount
{
    get { return (decimal)self.Attribute("Amount"); }
    set { self.SetAttribute("Amount", value); }
} 
```

我知道这是很多样板代码，但我发现它具有可读性、可扩展性和最好的可测试性。如果我想为增值税添加另一个值，我可以只修改类，而不必担心我是否在正确的位置添加了它。如果增值税有孩子，我会开设另一个增值税有财产的班级。

# c# - 适用于 VS2010 等 mac 的 css 生成器

> ID：11447157
> 
> 赞同：0
> 
> 时间：2012-07-12T07:41:26.357
> 
> 标签：c#, css, lambda, telerik, builder

我不敢相信我找不到这个。在工作中我使用 VS2010 的 CSS Builder 工具。它不是所见即所得，实际上它所做的只是帮助人们记住可用的 CSS 命令及其可能的值，并将其填充到选择器中。

我似乎找不到可以将其作为独立产品执行此操作的工具。我相信 CSS Edit 做到了这一点，但它现在是 80 美元 Espresso 的一部分。

我尝试了 CSS3 Toolkit，它实际上只不过是一个按钮生成器，浪费了我的 2.99 美元。

Coda 也这样做，但我不觉得这是一个 80 美元的工具。

简单的 CSS 几乎完全符合我的需要，并且是免费的，但是使用恕我直言非常笨拙。您必须每次都导出文件才能在浏览器中查看更改，没有保存按钮。实时预览不是必需的，但让我感到困扰的是 Simple CSS 中的那个坏了……它没有级联。

任何人都知道一个好的简单的Mac CSS 工具吗？我很想只编码一个。只需获取所有可用字段和 W3 中的所有选项，输入一个表格，然后输出一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:50:38.287

您可以选择 Eclipse 和 Netbeans，您可能会争辩说这两个更适合使用 Java 等语言进行编程，它们也可以用于 HTML/CSS/javascript。

打赌您可以尝试使用 Eclipse 引擎专门为 Web 开发人员构建的 Aptana。它不仅免费，而且非常健壮，并且支持 Eclipse 插件。

一篇比较 CSS 编辑器的好文章（并非所有免费的快速指南）：[http ://css-tricks.com/reviews-of-mac-css-editors/](http://css-tricks.com/reviews-of-mac-css-editors/)

不要错过这里有一些免费的 CSS 编辑器：[http ://speckyboy.com/2008/09/15/7-free-css-editors-which-is-the-best-you-choose/](http://speckyboy.com/2008/09/15/7-free-css-editors-which-is-the-best-you-choose/)

# sencha-touch - 在 Sencha Touch 中更改按钮单击的视图

> ID：11447159
> 
> 赞同：2
> 
> 时间：2012-07-12T07:41:27.877
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我在 sencha touch 中遇到了一种情况，我需要通过单击按钮将视图从一个视图更改为另一个视图。

我的视图 1 是一个仪表板，它显示大约 8 个图标，单击每个图标会显示不同的视图。所以，我在这 8 个不同视图的标题中放置了一个主页按钮，我试图返回没有发生的仪表板。相反，它显示一个空白屏幕，并且控制台中没有显示错误供我检查.

我更改按钮单击视图的代码是：

```
 {
                        xtype:'button',
                        cls:'clsHome',
                        text:'Home',
                        style: 'background:#4A4245;color:white;',
                        handler: function() {
                            console.log("Home Clicked");                                                
                            var dashboardPanel = Ext.create('AppSupport.view.DashBoard');
                            Ext.Viewport.add(dashboardPanel);
                            //Ext.Viewport.setActiveItem(dashboardPanel,{type: 'slide', direction: 'left'});                              
                        }
                    } 
```

帮帮我，伙计们......在此先感谢......！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:11:32.170

您应该尝试 sencha 架构师文档中的使用导航视图教程...它为应用程序的视图导航提供了一个简单的分步指南。导航视图还提供了从 sencha touch 2 开始的内置历史支持，这也使返回变得简单易行

[http://docs.sencha.com/architect/2/#!/guide/navigationview](http://docs.sencha.com/architect/2/#!/guide/navigationview)

# php - 多维 PHP 数组的基本排序

> ID：11447165
> 
> 赞同：1
> 
> 时间：2012-07-12T07:41:51.323
> 
> 标签：php, arrays, sorting

尝试按名称对数组进行排序，以便显示按字母顺序排列的列表。

这是一段代码：

```
sort($stores);

for($i=0; $i<count($stores); $i++) {
    echo $stores[$i]['name'];
} 
```

我对需要做什么有一个基本的了解，我只是不确定如何将数组的“名称”部分传递给 sort() 函数。也许我需要使用不同的功能？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:44:41.993

使用[自定义排序功能](http://php.net/usort)：

```
usort($stores, function ($a, $b) {
    return strcmp($a['name'], $b['name']);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T07:44:53.477

您可以使用自定义比较函数使用[usort](http://php.net/manual/en/function.usort.php)按值对数组进行排序。

这里的自定义是指自定义对象类型的数组。

```
function compare($a, $b)
{
    return strcmp($a['name'], $b['name']);
}

usort($stores, "compare"); 
```

# ruby-on-rails-3 - 通过 net/https 与 ebay api 的错误连接

> ID：11447171
> 
> 赞同：1
> 
> 时间：2012-07-12T07:42:08.747
> 
> 标签：ruby-on-rails-3, https, xmlhttprequest, openssl, ebay-api

我正在尝试使用 eabayapi ruby​​ gems 连接到 Ebay api。我在下面出错：

NoMethodError：未定义的方法“use_ssl”用于#

我的代码：

```
require 'net/http'
require 'net/https'
require 'date'
require 'time'
require 'uri'

@site = URI.parse("https://api.ebay.com")
http             = Net::HTTP.new(@site.host, @site.port)
http.use_ssl     = @site.is_a?(URI::HTTPS)
http.verify_mode = OpenSSL::SSL::VERIFY_NONE 
```

我认为 ruby​​ 1.9.3 的 net/https 可能有问题

我坚持这个问题。如果有人知道一个好的 ebay api ruby​​gems prleas 指南。

# c# - 用于标签的失去焦点事件的Javascript

> ID：11447173
> 
> 赞同：2
> 
> 时间：2012-07-12T07:42:23.120
> 
> 标签：c#, javascript, asp.net

我有一个这样的javascript函数：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "watermark", "function WaterMark(txtWaterMark, event, text) {if(event.type == 'keyup') {var charCode; if (event.charCode) { charCode = event.charCode;} else { charCode = event.keyCode; } if(charCode == 9 && txtWaterMark.value.length == 0) txtWaterMark.value = 'Pakistan';}  if (txtWaterMark.value.length > 0 && event.type == 'mouseover') { txtWaterMark.style.color = '#c6c1c1'; } if (txtWaterMark.value.length > 0 && event.type == 'mouseout') { txtWaterMark.style.color = 'gray';} if (txtWaterMark.value.length == 0 && event.type == 'mouseout') {txtWaterMark.value = text; }  if (event.type == 'focus') {txtWaterMark.style.color = 'gray'; if (txtWaterMark.value == text) { txtWaterMark.value = ''; } }}", true); 
```

我这样称呼它：

```
 <asp:TextBox ID="txtFirstName" runat="server" Width="110px" Text="First Name."
                ForeColor="Gray" onmouseover="WaterMark(this, event,'First Name.');" onmouseout="WaterMark(this, event,'First Name.');"
                onfocus="WaterMark(this, event,'First Name.');" onkeyup="WaterMark(this, event,'First Name.');" ToolTip="First Name."
                ValidationGroup="CheckoutConfirm"></asp:TextBox> 
```

我正在使用 on keyup 事件，因此如果用户按下 tab 键在文本框之间移动，则会将文本添加到文本框中，但是当我在按下 tab 后焦点位于文本框内时会触发 on keyup。我想要一些像“失去焦点”这样的事件，我尝试过模糊但没有任何好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:44:41.207

当用户离开输入字段时，java 脚本会触发模糊事件。

[http://www.w3schools.com/jsref/event_onblur.asp](http://www.w3schools.com/jsref/event_onblur.asp)

# java - 如何优化 JPA 查询

> ID：11447180
> 
> 赞同：5
> 
> 时间：2012-07-12T07:42:47.423
> 
> 标签：java, jpa, persistence, jpa-2.0

我有以下三个实体：

```
public class EntityA
{
    private Long id;
    //Getters and setters
}

public class EntityB
{
    private Long id;
    private EntityA entitya;
    //Getters and setters
}

public class EntityC
{
    private Long id;
    private BigDecimal amount;
    private EntityB entityb;
    //Getters and setters
} 
```

现在，给定一个EntityA的实例，我想得到一个EntityC的列表。我目前有两种选择。不知道哪个更优化。选项包括：

```
1.
select c from EntityC c where c.entityb in (select b from EntityB b where b.entitya = :entitya) 
```

2\. 给EntityB添加一个新属性

```
private Set<EntityC> entityCCol;

@OneToMany(mappedBy="entityb")
public Set<EntityC> getEntityCCol()
{
   return entityCCol;
}

select b from EntityB a join fetch a.entityCCol b 
```

这两个查询中哪一个更容易和优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:43:34.427

这取决于集合的大小。对于小型集合，我会使用对象模型中的关系。从设计/可用性的角度而不是性能的角度来看，它更面向对象。我不会加入获取它，只是正常访问模型。您可能还应该建立从 A 到 B 的关系，以使您的模型更有用。

对于＃1中的查询，您的查询使用子选择不是很有效，只需使用连接，

从 EntityC c 中选择 c 其中 c.entityb.entitya = :entitya

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:37:21.313

我认为所有解释为 SQL 查询的查询，这些只是不同的样式，你不必考虑它。所有查询都将解释为 theta 样式。我不认为，有性能差异，这只是个人选择。这是一篇关于 SQL 查询样式[MySQL 连接的非常新鲜的文章：ON vs. USING vs. Theta-style](http://code.openark.org/blog/mysql/mysql-joins-on-vs-using-vs-theta-style)，我希望这个链接对您有所帮助。

# web-services - Java EE 应用服务器中的 JAX-WS 客户端池

> ID：11447187
> 
> 赞同：3
> 
> 时间：2012-07-12T07:43:20.183
> 
> 标签：web-services, jakarta-ee, jax-ws, actor

我有一个在 Java EE App Server 中运行的应用程序，它需要调用合作伙伴公司的 Web 服务。

使用我的 JDK (1.6) 中的 wsimport.exe，我生成了客户端类。我实例化服务并获取端口以调用 Web 服务。

我注意到对 Web 服务的第一次调用很慢，我相信这是因为它正在验证 WSDL。后续调用很快。

我可以将 WSDL 保存在本地，显然这会加快第一次调用的速度。

为了优化我的应用程序，我想我可以创建一个客户端池。这还有一个额外的优势，即我在应用程序中有一些限制 - 假设我有一个包含 5 个客户端的池，那么我最多将为 5 个客户端使用内存。如果我的服务器上的负载突然增加，我不必担心无限数量的客户端会导致内存不足错误。根据过去的经验，我假设 Web 服务客户端使用大量内存......

*   你会为游泳池烦恼吗？
*   您将如何克服对 Web 服务的第一次调用缓慢的问题？
*   创建该池的最佳方法是什么，这样我就必须做最少的编程（即我想使用库/API /什么，这样我就不必重新发明轮子并编写一些代码毛茸茸的虫子）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:22:00.920

[Apache Commons Pool](http://commons.apache.org/pool/)可能正是我所追求的。

它是可配置的，似乎已经考虑了一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:50:36.640

我的一位同事建议您可以`@WebServiceRef`在 EJB 中的字段上使用注释。这个想法是服务器将注入一个对客户端的引用，从中可以为每个调用 EJB 的线程创建一个端口。

我假设注入的引用来自一个池，尽管规范似乎没有谈到这一点。注释的 Javadoc 明确提到：

> “注入的引用不是线程安全的”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:25:33.460

[具有链接中所示的主/从设置的AKKA](http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-java.html)可以很好地工作，尽管它比另一个答案中列出的 Apache Commons Pool 复杂一些。AKKA 还使用了一个执行池，它有自己的线程，这在 Java EE 世界中是不允许的，尽管我认为因为一个经过良好测试的框架负责线程，所以没有危险，它应该无论如何，不​​要干扰应用程序服务器对线程的控制，因为 AKKA 处理的线程数量很少。

# c# - 复制标签页的内容c#

> ID：11447188
> 
> 赞同：0
> 
> 时间：2012-07-12T07:43:20.277
> 
> 标签：c#, tabs

我有一个选项卡控件，其中一个选项卡页是静态的，而其他选项卡页是通过循环动态创建的。我想复制所有数据形式的静态标签页。静态选项卡包含一个网格视图。我想将该网格视图复制到所有动态创建的网格视图中，但问题是最后一个包含网格视图，而其他的为空白。任何帮助

```
 for (int i = 1; i <xnl.Count ; i++)
                 {
                     TabPage tb = new TabPage();

                    tb.Controls.Add(datagrid);
                   tabControl1.Controls.Add(tb);
                 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:50:07.150

我认为你应该克隆你的网格，然后添加克隆的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:51:21.547

一个控件只能有 1 个父控件，每次将其添加到新的 ControlCollection 时都会更改。你必须复制你的gridview（包括它的所有属性、事件和数据）。也许实现您想要的更简单的方法是处理`Selected`tabControl 的事件以在当前活动的选项卡上显示网格。

**例子：**

```
tabPage.Selected += (a, b) =>
                {
                    tabControl1.SelectedTab.Controls.Add(grid);
                }; 
```

# batch-file - 如何在批处理文件中从文件名中删除前 3 个字符

> ID：11447189
> 
> 赞同：1
> 
> 时间：2012-07-12T07:43:25.597
> 
> 标签：batch-file

我有一些文件，我想从文件名中删除前 3 个字符，我认为这会起作用，但它只是输出：

```
MISEQPRF.txt
ECHO is off.
ECHO is off. 
```

* * *

```
@echo off
for %%a in (%MIS*.TXT) do (
  SET oldName = %%a
  SET newName = %oldName:~3%
  echo %%a
  echo %oldName%
  echo %newName%
)
pause 
```

注意：然后我会修改，`REN %aa %newName`但首先要确保名称正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:55:56.467

您需要使用延迟扩展来使用您在 for 循环中设置的变量。

试试这个稍微修改过的版本

```
@echo off
setlocal enabledelayedexpansion
for %%a in (MIS*.TXT) do (
set oldName=%%a
set newName=!oldName:~3!
echo !newName!
)
pause 
```

`set`此外， and之间不能有空格`=`，它们必须连接起来。

# matplotlib - 如何根据测量数据拟合我的图？

> ID：11447192
> 
> 赞同：2
> 
> 时间：2012-07-12T07:43:41.677
> 
> 标签：matplotlib, curve-fitting

**我怎样才能适应我的情节？**

到目前为止，我有以下代码，它从一个数组（来自实验的数据）中绘制各种图表，因为它被放置在一个循环中：

```
import matplotlib as plt
plt.figure(6)
plt.semilogx(Tau_Array, Correlation_Array, '+-')
plt.ylabel('Correlation')
plt.xlabel('Tau')
plt.title("APD" + str(detector) + "_Correlations_log_graph")
plt.savefig(DataFolder + "/APD" + str(detector) + "_Correlations_log_graph.png") 
```

到目前为止，这适用于对数图，但我想知道拟合过程如何在这里工作。最后，我想要某种公式或/和图表来最好地描述我测量的数据。

如果有人可以帮助我，我会很高兴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:43:24.383

你可以使用`curve_fit`from`scipy.optimize`这个。这是一个例子

```
# -*- coding: utf-8 -*-
import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit

def func(x,a):
   return np.exp(a*x)

x,y,z = np.loadtxt("fit3.dat",unpack=True)

popt,pcov = curve_fit(func,x,y)
y_fit = np.exp(popt[0]*x)

plt.plot(x,y,'o')
plt.errorbar(x,y,yerr=z)
plt.plot(x,y_fit)
plt.savefig("fit3_plot.png")
plt.show() 
```

在您的情况下，您可以`func`相应地定义。`popt`是一个包含拟合参数值的数组。

# javascript - 代码完成无法识别 OpenLayers js 文件中的成员

> ID：11447195
> 
> 赞同：1
> 
> 时间：2012-07-12T07:43:48.250
> 
> 标签：javascript, asp.net-mvc, visual-studio-2010, resharper, intellisense

我有一个 Visual Studio 2010 ASP.NET MVC 4 项目。在一个视图中，我正在导入[OpenLayers.js](http://openlayers.org/)文件：

```
<script type="text/javascript" src="path/to/OpenLayers.js"></script> 
```

下面，我有一个内联脚本：

```
<script type="text/javascript">
    function init()
    {
        var map = new OpenLayers.Map("basicMap");
        var osmLayer = new OpenLayers.Layer.OSM(/* constructor params */);
    }
</script> 
```

如何让 Visual Studio / ReSharper IntelliSense 建议属性和方法名称，如下所示：

```
osmLayer.w   // should suggest osmLayer.wrapDataLine
osmLayer.att // should suggest osmLayer.attribution 
```

奇怪的是，它建议由 JQuery: 定义的成员`constructor`，`prototype`并且`length`都出现在完成下拉列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:34:30.437

不幸的是，ReSharper 的 javascript intellisense 并不完美，目前不支持非标准的 JS 类框架，例如 OpenLayers 使用的框架。我们计划在未来的版本中解决这个问题。同时，如果您必须使用此类库，您可以通过按 Ctrl-Space 使用非智能智能感知或尝试使用 Visual Studio 内置智能感知（转到 ReSharper | 选项 -> 环境 | 智能感知 | 常规，选择“Limited ReSharper Intellisense”并关闭 JavaScript）。

# c# - 如何访问 .ashx 文件中的 Session？

> ID：11447196
> 
> 赞同：43
> 
> 时间：2012-07-12T07:43:54.880
> 
> 标签：c#

我想访问 .ashx 文件中的一些值（已在 .aspx 文件中设置）。我尝试使用查询字符串、会话等获取该值，但每次都失败。谁能建议我如何访问 .ashx 文件中的会话值？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-12T09:40:57.673

在 ashx.cs 文件中，还“实现”接口[`System.Web.SessionState.IReadOnlySessionState`](https://docs.microsoft.com/en-us/dotnet/api/system.web.sessionstate.ireadonlysessionstate)或[`System.Web.SessionState.IRequiresSessionState`](https://docs.microsoft.com/en-us/dotnet/api/system.web.sessionstate.irequiressessionstate).

您不必实现任何方法，只需通过`context.Session`.

标题看起来像：

```
public class MyHandler: IHttpHandler, System.Web.SessionState.IReadOnlySessionState 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-07-12T09:37:41.293

**在 aspx 文件中：**

```
Session.Add("filename", "Test.txt"); 
```

在 aspx 文件中设置会话值之后。使用以下方法获取 ashx 文件中的值。

**在 ashx 文件中：**

```
public class ImageHandler : IHttpHandler, System.Web.SessionState.IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
      string Name = "";
      if (context.Session["filename"] != null)
         Name = context.Session["filename"].ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T07:45:51.073

试试这个，

```
HttpContext.Current.Session 
```

# android - 如何在 Android 中使用意图显示 ProgressDialog？

> ID：11447200
> 
> 赞同：2
> 
> 时间：2012-07-12T07:44:06.050
> 
> 标签：android, android-intent, progressdialog

我有一个从数据库下载数据的活动。当 Activity 进行这项工作时，我想用**ProgressDialog**显示进度。我使用它`ProgressDialog.STYLE_HORIZONTAL`是因为我想显示实际值。我使用 a`Handler`启动显示**ProgressDialog**的活动：

```
Intent intent = new Intent(this, ProgressDialogActivity.class);

private Handler handler = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            if(msg.what == SET_PROGRESS){

                intent.putExtra("action", "show");
                intent.putExtra("progress", msg.arg1);
                intent.putExtra("max", msg.arg2);
                intent.putExtra("message", syncMessage);
                intent.putExtra("title", R.string.please_wait);

                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                startActivity(intent);
            }
            else if(msg.what == SHOW_PROGRESS){             

                intent.putExtra("action", "show");
                intent.putExtra("title", syncMessage);

                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                startActivity(intent);              
            }
            else if(msg.what == HIDE_PROGRESS){

                intent.putExtra("action", "hide");
                intent.putExtra("message", "");
                intent.putExtra("title", "");

                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                startActivity(intent);

            }
        }
    }; 
```

这是**ProgressDialogActivity**：

```
 public class ScreenProgressDialog extends Activity {

    ProgressDialog pd;
    Bundle extras;
    String action;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        extras = getIntent().getExtras();
        pd = new ProgressDialog(this);

        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setCancelable(false);

        pd.setProgress(extras.getInt("progress"));  
        pd.setMax(extras.getInt("max"));
        pd.setMessage(extras.getCharSequence("message"));
        pd.setTitle(extras.getString("title"));

        action = extras.getString("action");

        if (action.equals("show")){
            pd.show();                  
        }
        else{
            pd.dismiss();
        }

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

} 
```

当 Main Activity 从数据库下载一个新表时，会`Handler`启动一个新的**ProgressDialogActivity**并出现一个新的 Activity。我想避免这种情况。我的目标是只显示一个显示具有正确值的**ProgressDialog的活动。**（我无法在主活动中创建**ProgressDialog**，我必须找到另一种方法。这是某种家庭作业，但我需要一些帮助）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:47:36.437

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)怎么样：[如何添加 ProgressDialog](https://stackoverflow.com/questions/11339847/how-to-add-progressdialog/11339895#11339895)
您可以在哪里执行方法中的下载部分并使用..`doInBackground`相应地更新进度条`onProgressUpdate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:25:39.113

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台获取数据并显示**ProgressDialog** 这是代码：

```
// Get feed!
new ProgressTask().execute();

private class ProgressTask extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {

            /**
             * Fetch the RSS Feeds from URL
             */
            Utilities.arrayRSS = objRSSFeed
                    .FetchRSSFeeds(Constants.Feed_URL);
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            // display UI
            UpdateDisplay();
        }
    }
} 
```

# iphone - 使用objective c保存用户名和密码

> ID：11447201
> 
> 赞同：0
> 
> 时间：2012-07-12T07:44:14.617
> 
> 标签：iphone, objective-c, ios

我有登录视图，登录后会显示一些列表...所以我想保存用户名和密码，这样如果使用正确的 ID、密码直接登录，登录视图就不会出现一次，它将显示列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T07:54:24.117

正如其他人建议的那样，您可以使用`NSUserDefaults`.

如果您要存储密码，那么我建议您也为此添加一个安全级别。您可以使用 Secure NSUserDefaults（我个人没有使用过，但看到一些人报告它很有用）。你可以在[这里找到](https://github.com/matthiasplappert/Secure-NSUserDefaults)

或者您可以使用[KeyChain API](https://developer.apple.com/library/ios/#documentation/security/conceptual/keychainServConcepts/02concepts/concepts.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T07:50:01.523

如果你不关心加密，你可以很简单地保存这些

```
[[NSUserDefaults standardUserDefaults] setValue:@"username" forKey:@"username"]; 
[[NSUserDefaults standardUserDefaults] setValue:@"secret" forKey:@"password"]; 
```

并在程序启动期间检查那些

```
if (![[NSUserDefaults standardUserDefaults] valueForKey:@"username"]) {
   // show the login screen
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T07:47:46.043

你可以使用 [关于 NSUserDefaults 的 NSUserDefaults Apple 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T17:27:11.453

`NSUserDefaults`只是为自定义应用程序的偏好而设计的一种方便的方式。在正常情况下，一个应用程序将留在它自己的沙箱中，因此其他应用程序将无法访问它。

然而，这样做并不是最好的选择。这不是一个好习惯。您真正需要的是钥匙串，并[在此处](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)查看苹果的示例代码，它在安全性方面要安全得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T07:51:05.947

您可以像这样将其保存在 NSUserDefaults 中：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardDefaults];
[userDefaults setBool@"YES" forlkey@"userDidLogin"]; 
```

你这样测试：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardDefaults];

if([userDefaults boolForKey:@"userDidLogin"])
{
.... // Go to the list View
} 
```

这只是一个指示，如果你想让它工作，你应该展示你的代码如何实现登录接口的实现

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T08:48:08.767

有多种方法可以保存用户名和密码。您可以按上述答案保存在 UserDefalt 中。您也可以保存在 plist 中。

# php - PHP - 根据缺少的键拆分数组

> ID：11447202
> 
> 赞同：-5
> 
> 时间：2012-07-12T07:44:16.143
> 
> 标签：php, arrays, split

所以这是我的代码：

```
Array ( [0] => 0 [1] => 1 [2] => 2 [3] => 3 [4] => 4 [5] => 5 [6] => 6 [7] => 7 [8] => 8 [23] => 23 [24] => 24 ) 
```

它缺少一些键，我想根据那些缺少的键将这个数组分成两部分，然后显示这两个数组中的最高和最低键......

例如：0-8 和 23-24

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:28:15.623

此代码可能会解决您的问题：

```
$arr = array("1" => "1", "2" => "2", "4" => "4", "5" => "5", "8" => "8", "9" => "9", "10" => "10", "11" => "11", "12" => "12", "16" => "16");
$arr_result = array();

$arr_keys = array_keys($arr);

$start = intval($arr_keys[0]);
$end = intval($arr_keys[count($arr_keys)-1]);

$group_idx = 0;

$idx = $start;
foreach($arr_keys as $x => $key) {
    if (intval($key) == intval($idx)) {
        $arr_result[$group_idx][$key] = $arr[$key];
        $idx++;
    } else {
        $group_idx++;
        $arr_result[$group_idx][$key] = $arr[$key];
        $idx = intval($key) + 1;
    }

}

print_r($arr_result); 
```

我对其进行了测试，并且完全按照您的要求运行:)。结果是：

```
Array
(
    [0] => Array
        (
            [1] => 1
            [2] => 2
        )

    [1] => Array
        (
            [4] => 4
            [5] => 5
        )

    [2] => Array
        (
            [8] => 8
            [9] => 9
            [10] => 10
            [11] => 11
            [12] => 12
        )

    [3] => Array
        (
            [16] => 16
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:33:05.840

```
$hours = range(0,24);
for($i = 5; $i <= 16; ++$i)
    unset ($hours[$i]);

foreach($hours as $key => $hour) {
    $hours[$key] = array($hour);
    if (isset($hours[$key-1])) {
        $hours[$key] = $hours[$key-1];
        $hours[$key][1] = $hour;
        unset($hours[$key-1]);
    }

}
$hours = array_values($hours);

var_dump($hours); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:30:31.123

```
$test = array ("0" => 0, "1" => 1, "2" => 2, "3" => 3, "4" => 4, "5" => 5, "6" => 6, "7" => 7, "8" => 8, "23" => 23, "24" => 24, "25" => 25, "27" => 27, "28" => 28);

$full = range(reset($test),end($test));
$diff = (array_diff($full,$test));
$found = FALSE;
$start = reset($test);

for ($i = 0; $i < count($full); $i++)
    {
    if (array_key_exists($i, $diff))
        {
        if (!$found)
            {
            $str[] = $start."-".($i-1);
            $start = NULL;
            }

        $found = TRUE;
        }
    else
        {
        if (is_null($start))
            $start = $i;
        $found = FALSE;
        }
    }

$str[] = $start."-".($i-1);

print_r($str); 
```

结果：

```
Array
(
    [0] => 0-8
    [1] => 23-25
    [2] => 27-28
) 
```

# jquery - jquery 活动函数

> ID：11447204
> 
> 赞同：2
> 
> 时间：2012-07-12T07:44:26.423
> 
> 标签：jquery, function

如何在 jquery 中获取活动函数列表（或任何关于活动函数的内容）。我想写这样的代码：

```
 if(anyfunction == false) { start another function} 
```

如果另一个功能停止，我想要启动功能，或者如果另一个功能启动，我想要停止这个功能。但我不知道如何使用 jquery 来做到这一点。我的真实代码是：

```
function slide(){
$("#slide1").addClass('inslide').fadeIn(ftime,function(){$("#slide1").delay(stime).fadeOut(ftime,function(){$("#slide1").removeClass("inslide"); $("#slide2").addClass('inslide').fadeIn(ftime,function(){$("#slide2").delay(stime).fadeOut(ftime,function(){$("#slide2").removeClass("inslide"); 
$("#slide3").addClass('inslide').fadeIn(ftime,function(){$("#slide3").delay(stime).fadeOut(ftime,function(){$("#slide3").removeClass("inslide"); $("#slide4").addClass('inslide').fadeIn(ftime,function(){$("#slide4").delay(stime).fadeOut(ftime,function(){$("#slide4").removeClass("inslide");
$("#slide5").addClass('inslide').fadeIn(ftime,function(){$("#slide5").delay(stime).fadeOut(ftime,function(){$("#slide5").removeClass("inslide"); slide()}) })  })  })  })  })  })  })  })  });
}
slide();

$("#back").click(function(){
var test = $(".inslide").attr("id");
var sub = test.substring(5);
sub = parseInt(sub);
var subin = sub - 1;
if(sub != 1) {
$("#slide"+sub).removeClass("inslide").fadeOut(ftime,function(){$("#slide"+subin+"").addClass('inslide').fadeIn(ftime)});
}
}); 
```

我希望该`slide()`功能在用户单击返回时停止。

# javascript - 显示加载器 gif 的 jquery 图像库

> ID：11447205
> 
> 赞同：0
> 
> 时间：2012-07-12T07:44:27.453
> 
> 标签：javascript, jquery

我正在开发 jquery 图片库插件。我检查了图像的加载，如下所示：

```
$("#loading").show();
        $('.preview').load(function () {
            $("#loading").hide();
        }); 
```

但我没有成功。我想在加载图像时显示加载 gif。我该怎么做？例如： [http ://blueimp.github.com/Bootstrap-Image-Gallery/](http://blueimp.github.com/Bootstrap-Image-Gallery/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:48:51.680

你可以通过css简单地给出它。尝试将加载图像作为父 div 的背景

# java - Spring XML 中的常用值配置

> ID：11447206
> 
> 赞同：2
> 
> 时间：2012-07-12T07:44:29.013
> 
> 标签：java, spring, configuration

我有几个 Spring bean，其中所有它们的属性值之一都是相同的`String`值。有没有一种方法可以让我`String`在一个地方在 XML 中定义它并在属性值设置的所有 bean 中引用它？

```
<bean id="somebean" class="test.SomeBean">
   <property name="property1" ref="someValue"></property>
   <property name="commonProperty" value="commonValue"></property> 
```

```
<bean id="nextBean" class="test.NextBean">
   <property name="property2" ref="someValue"></property>
   <property name="commonProperty" value="commonValue"></property> 
```

如何`commonValue`在单独的地方设置并在两个地方引用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:16:34.453

像这样试试。

```
<bean id="commonConfig" abstract="true">
    <property name="commonField" value="CommonValue"></property>
</bean>

<bean id="class1" class="com.dataclass.Class1" parent="commonConfig">
    <property name="field1" value="value1"></property>
</bean>
<bean id="class2" class="com.dataclass.Class2" parent="commonConfig">
    <property name="field2" value="value2"></property>
</bean> 
```

Class1 和 Class2 有一个共同的字段名称“commonField”，父属性仅用于此共同目的。

在 Spring 中，这称为 bean 定义继承（这不是 java 类继承，上面的示例 Class1 和 n 类没有在它们各自的 java 文件中继承。）

有关更多详细信息，请查看 Spring 文档的[链接](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch03s07.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T07:49:06.433

我以前从未尝试过，但这应该可以

```
<bean id="commonProp" class="java.lang.String">
    <constructor-arg name="original" value="yourString"></constructor-arg>
</bean> 
```

然后，在每个 bean 中你需要引用它：

```
<bean id="somebean" class="test.SomeBean">
   <property name="property1" ref="someValue"></property>
   <property name="commonProperty" ref="commonProp"></property>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:07:39.200

您可以在一些“init_constants.properties”文件中定义您的字符串属性。然后你应该在 spring xml 中加载属性文件：

```
<bean id="properties"
        class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:db.properties</value>
                <value>classpath:mail.properties</value>
                <value>classpath:init_constants.properties</value>
            </list>
        </property>
    </bean> 
```

之后，您可以使用 xml 注入此属性：

```
<bean id="somebean" class="test.SomeBean">
   <property name="property1" ref="{$prop1}"></property>
   <property name="commonProperty" value="commonValue"></property>
</bean> 
```

或在使用 @Value 注释的代码中：

```
@Value(value="${prop1}")
private String property1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T07:48:03.460

好吧，如果 commonValue 是字符串，那么您可以将其放入属性文件并使用`@Value annotation`.

# php - 是否有一个简单的脚本可以向美国/加拿大访问者显示脚本 1，向其他人显示脚本 2

> ID：11447209
> 
> 赞同：0
> 
> 时间：2012-07-12T07:44:38.937
> 
> 标签：php, javascript, geolocation, location, geo

我想知道是否有一个简单的脚本可以向美国/加拿大访问者显示脚本 1，向其他人显示脚本 2。

不需要那么准确，但使用像[http://freegeoip.net/json/18.8.8.82](http://freegeoip.net/json/18.8.8.82)这样的服务对我来说太复杂了

有没有简单的方法

一个脚本示例将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:47:37.313

你可以试试：[GEO 插件](http://www.geoplugin.com/)

PHP Web 服务允许您直接对后端 PHP 脚本进行编程，以使用 geoPlugin 提供的 PHP 数组提供动态地理本地化页面。

[GEO 插件 PHP Web 服务](http://www.geoplugin.com/webservices/php)

它很容易使用。

**见演示**：http: [//jsfiddle.net/akhurshid/WktTV/](http://jsfiddle.net/akhurshid/WktTV/)

# asp.net - 关闭弹出窗口后如何打开弹出窗口并在父窗口中进行完整回发？

> ID：11447220
> 
> 赞同：2
> 
> 时间：2012-07-12T07:45:00.120
> 
> 标签：asp.net

在 asp.net 中，我想单击一个按钮来打开一个弹出窗口。在弹出窗口之后，我想对父窗口进行完整的回发。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:33:53.073

在您的弹出窗口中编写以下脚本：

```
window.opener.PostBack(); 
// Where PostBack is the custom method of opener/parent window. 
```

您可以在`OnUnload()`弹出窗口的情况下执行此操作，也可以通过任何其他方法执行此操作`window.close();`。

您可以`PostBack()`在 opener 中实现这样的方法：

```
 function PostBack() {
            var btn = document.getElementById('<%=SomeButton.ClientID %>');
            if (btn) btn.click();
            // or
            // __doPostBack('SomeButtonId','Arguments');
        } 
```

# objective-c - 从 ios 的接入点获取 ssid

> ID：11447225
> 
> 赞同：0
> 
> 时间：2012-07-12T07:45:07.953
> 
> 标签：objective-c, ios, xcode, access-point, bssid

我想从诸如mac地址（bssid）之类的接入点获取一些独特的信息。我尝试了这段代码，但它只在我连接网络时才有效..

```
- (id)fetchSSIDInfo
{
NSArray *ifs = (id)CNCopySupportedInterfaces();
NSLog(@"%s: Supported interfaces: %@", __func__, ifs);
id info = nil;
for (NSString *ifnam in ifs) {
    info = (id)CNCopyCurrentNetworkInfo((CFStringRef)ifnam);
    NSLog(@"%s: %@ => %@", __func__, ifnam, info);
    if (info && [info count]) {
        break;
    }
    [info release];
}
[ifs release];
return [info autorelease];
} 
```

即使我没有连接，我如何从我周围的接入点获取 bssid，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:27:27.670

我有同样的问题。答案是否定的。

您只能获取您拥有的连接的数据。你可以使用一些私人图书馆，但它不会得到苹果的批准。

# asp.net-mvc - ASP.NET MVC 计算周

> ID：11447226
> 
> 赞同：0
> 
> 时间：2012-07-12T07:45:16.453
> 
> 标签：asp.net-mvc, entity-framework, week-number

我有一个带有 EF 的 ASP.NET MVC 4 项目。在我的（创建）视图中，我想在 EditorFor 旁边显示一个日期，即当年的周数。

我有一个帮手：

```
@model Helios.Models.tablename
@helper Week(DateTime dt)
{    
   CultureInfo ciCurr = CultureInfo.CurrentCulture;
   int weekNum = ciCurr.Calendar.GetWeekOfYear(dt, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
   @weekNum
}
...
<div class="editor-field">
   @Html.TextBoxFor(model => model.date_birth, new {onchange="?"}) @Week(date_birth?)
</div> 
```

我不确定这是否可以在 Razor 中完成，但如果我更改日期，我需要更新周数

![在此处输入图像描述](../Images/a37b6d72ff5cb54800202fd8c32a22c6.png)

**问**：如何显示周数。在日期选择器旁边并在日期更改时更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:57:54.493

这是一篇关于计算周数的帖子。

[如何计算/查找给定日期的周数？](https://stackoverflow.com/questions/1497586/how-can-i-calculate-find-the-week-number-of-a-given-date)

但这一切都取决于您是否计划在服务器上设置它，或者客户端是否能够更改日期。如果客户可以更改日期，那么您将需要 javascript。

```
function(d) {

 var day = d.getDay();
 if(day == 0) day = 7;
 d.setDate(d.getDate() + (4 - day));
 var year = d.getFullYear();
 var ZBDoCY = Math.floor((d.getTime() - new Date(year, 0, 1, -6)) / 86400000);
 return 1 + Math.floor(ZBDoCY / 7);
} 
```

来自：http: [//jquery142.blogspot.se/2010/04/how-to-get-week-number-for-date-in.html](http://jquery142.blogspot.se/2010/04/how-to-get-week-number-for-date-in.html)

# c# - 如何以编程方式将word文档转换为pdf

> ID：11447229
> 
> 赞同：0
> 
> 时间：2012-07-12T07:45:38.257
> 
> 标签：c#, asp.net, pdf, ms-word

我尝试使用以下代码生成 word 文档：

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.Charset = "";

HttpContext.Current.Response.ContentType = "application/doc";
HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; 
filename=" + DateTime.Now + ".doc");

var strHTMLContent = new StringBuilder();

strHTMLContent.Append(
    "<h1 title='Heading' align='Center'style='font-family: verdana; font 
-size: 80 % ;color: black'><u>Document Heading</u> </h1> ");

strHTMLContent.Append("<br>");
strHTMLContent.Append("<table align='Center'>");

// Row with Column headers
strHTMLContent.Append("<tr>");
strHTMLContent.Append("<td style='width:100px; background:# 99CC00'>
<b>Column1 </b>  </td>");

strHTMLContent.Append("<td style='width:100px;background:# 99CC00'>
<b>Column2 </b>  </td>");

strHTMLContent.Append("<td style='width:100px; background:# 99CC00'>
<b>Column 3</b></td>");
strHTMLContent.Append(" </tr> ");

// First Row Data
strHTMLContent.Append("<tr>");
strHTMLContent.Append(
    "<td style='width:100px'></td>");
strHTMLContent.Append(
    "<td style='width:100px'>b</td>");
strHTMLContent.Append(
    "<td style='width:100px'>c</td>");
strHTMLContent.Append("</tr>");

// Second Row Data
strHTMLContent.Append("<tr>");
strHTMLContent.Append(
    "<td style='width:100px'>d</td>");
strHTMLContent.Append(
    "<td style='width:100px'>e</td>");
strHTMLContent.Append(
    "<td style='width:100px'>f</td>");
strHTMLContent.Append("</tr>");

strHTMLContent.Append("</table>");

strHTMLContent.Append("<br><br>");
strHTMLContent.Append(
    "<p align='Center'> Note : This is a dynamically 
            generated word document  </p> ");
HttpContext.Current.Response.Write(strHTMLContent);
//  HttpContext.Current.Response.BinaryWrite(strHTMLContent);
HttpContext.Current.Response.End();
HttpContext.Current.Response.Flush(); 
```

有谁知道如何以编程方式将此word文档转换为PDF文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:30:22.177

由于您正在构建要转换的 HTML，您可以使用[iTextSharp](http://nuget.org/packages/iTextSharp) API 从 HTML 转换为 PDF：[ITextSharp HTML to PDF?](https://stackoverflow.com/questions/2822843/itextsharp-html-to-pdf) . iTextSharp 是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:38:43.277

在使用了许多不同的选项之后，这是迄今为止我们发现的最好的一个。昂贵，但惊人的速度和多功能性，以及体面（虽然不是很好）的支持文档。 [http://www.html-to-pdf.net/Support.aspx#csharp](http://www.html-to-pdf.net/Support.aspx#csharp) - 如果是用于可以转嫁成本的商业项目，那么值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:51:22.600

默认情况下，MS .Net Framework 不提供任何内容，您必须为其使用第三方 API

例如，请参阅 API easyPDF 使用 C# [http://www.pdfonline.com/easypdf/sdk/programming-pdf/csharp/index.htm?_kk=%2Bpdf%20%2Bc%23&_kt=0e3c1bed-3404进行转换的链接-4289-8143-77333a737850&gclid=CPT--pXTk7ECFa4mtAodKn5ylw](http://www.pdfonline.com/easypdf/sdk/programming-pdf/csharp/index.htm?_kk=%2Bpdf%20%2Bc%23&_kt=0e3c1bed-3404-4289-8143-77333a737850&gclid=CPT--pXTk7ECFa4mtAodKn5ylw)

# java - Andengine 在某些手机上的低 FPS

> ID：11447232
> 
> 赞同：11
> 
> 时间：2012-07-12T07:46:00.793
> 
> 标签：java, android, andengine, frame-rate

我的游戏在大多数手机上运行良好（56 FPS），但其他手机的游戏运行速度约为 25 FPS。在我的游戏中，我有 3 个粒子系统，据我所知，问题来自这里。我的问题：如果我检测到 FPS 低于（比如说 30），停止生成粒子是不是个好主意？如果 FPS 较高，则正常运行。我不确定这是否会导致任何问题。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:43:47.447

我可以想到几件你可以做的事情来帮助缓解这个问题。

您可以使用您的方法检测 fps，然后在必要时删除粒子系统。但是，您不必每秒钟都轮询一次——您可以每十秒钟左右轮询一次。如果你确实有一个低帧率，那么你知道手机会时不时地受到影响，所以你不需要再轮询 - 你可以降低粒子并停止轮询。

或者，您可以使用具有多个“级别”粒子效果的轮询方法，因此如果它无法处理顶级，则放弃下一个级别的复杂性，依此类推。

此外，您甚至可以允许用户手动调整粒子效果，即在选项菜单中允许他们将它们切换到低设置或其他东西。

也许您还可以在运行时分析设备，即有多少内核、图形芯片等并进行相应调整。

确保你的粒子经过优化等，所以当它们可能更小等时你没有不必要的纹理大小，但我相信你可能已经这样做了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:25:39.123

我建议您运行游戏的所有图形功能，当它可以以每秒 30+ 帧的速度渲染时。如果您看到帧速率低于 30，则应关闭非重要图形，例如。粒子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T04:18:01.290

如果帧率变低，请尝试跳帧，但不要跳过太多帧，否则会导致用户体验不佳。下面是确定线程是否按时执行的代码，如果不是，它将跳过帧（不超过 5 个）：

```
// desired fps
private final static int    MAX_FPS = 50;
// maximum number of frames to be skipped
private final static int    MAX_FRAME_SKIPS = 5;
// the frame period
private final static int    FRAME_PERIOD = 1000 / MAX_FPS;
// number of frames skipped since the game started
private long totalFramesSkipped         = 0l;
// number of frames skipped in a store cycle (1 sec)
private long framesSkippedPerStatCycle  = 0l;

// number of rendered frames in an interval
private int frameCountPerStatCycle = 0;
private long totalFrameCount = 0l;
// the last FPS values
private double  fpsStore[];
// the number of times the stat has been read
private long    statsCount = 0;
// the average FPS since the game started
private double  averageFps = 0.0;

    long beginTime;     // the time when the cycle begun
    long timeDiff;      // the time it took for the cycle to execute
    int sleepTime;      // ms to sleep (<0 if we're behind)
    int framesSkipped;  // number of frames being skipped 

    sleepTime = 0;
                beginTime = System.currentTimeMillis();
                framesSkipped = 0;  // resetting the frames skipped
                // calculate how long did the cycle take
                timeDiff = System.currentTimeMillis() - beginTime;
                // calculate sleep time
                sleepTime = (int)(FRAME_PERIOD - timeDiff);

                if (sleepTime > 0) {
                    // if sleepTime > 0 we're OK
                    try {
                        // send the thread to sleep for a short period
                        // very useful for battery saving
                        Thread.sleep(sleepTime);
                    } catch (InterruptedException e) {}
                }

                while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                    // we need to catch up
                    this.gamePanel.update(); // update without rendering
                    sleepTime += FRAME_PERIOD;  // add frame period to check if in next frame
                    framesSkipped++;
                } 
```

让我知道这个是否奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T13:17:04.027

try to set "android:theme="@style/Theme.NoBackground" for your activity in manifest. it's switch off system background redering.

don't forger to create theme.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <style name="Theme.NoBackground" parent="android:Theme">
        <item name="android:windowBackground">@null</item>
</style>
</resources> 
```

# file - WIX 在安装期间将数据附加到文件

> ID：11447237
> 
> 赞同：0
> 
> 时间：2012-07-12T07:46:13.017
> 
> 标签：file, wix, append

我只是想知道让 WIX 将一些行附加到其他应用程序的配置文件（它是一个 matlab 文件）的最简单方法是什么，基本上我需要的是：

*   查找第三方应用程序的安装位置（我可以处理）
*   将一些行附加到此第三方应用程序的配置文件中

我想我需要使用自定义操作吗？但最简单的方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:03:20.967

这取决于配置文件的格式，但一般来说，如果可能的话，完全避免自定义操作是最简单的。

对于 INI 文件，您可以使用[IniFile 元素](http://wix.sourceforge.net/manual-wix3/wix_xsd_inifile.htm)

对于 XML 文件，您可以使用位于 WiX Util 扩展中的[XmlConfig 元素](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlconfig.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:36:38.013

我最终使用了自定义操作。

# .net - 来自服务器的 .Net 控制屏幕

> ID：11447238
> 
> 赞同：3
> 
> 时间：2012-07-12T07:46:13.563
> 
> 标签：.net, c#-4.0

我知道这是一个典型的要求，但仍然是项目的要求。基本上我们希望在服务器上保留屏幕的逻辑和设计。当客户端登录系统时，屏幕会被下载并在客户端机器上运行。最好的例子是 SAP，一切都在中央位置进行控制，用户能够创建和自定义屏幕。我知道像 MVC 或 Click 一旦在 Windows 中部署的 Web 应用程序可以是解决方案之一，但我们可以有任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:21:04.563

基本上你描述了一个网络浏览器。

SAP 确实使用了某种花哨的 ui 设计，但这不是出于选择，而是出于历史原因。SAP 已经有了自己的新的（和花哨的）网络版本的视图和应用程序。

今天，这类问题是使用 HTML5/javascript 解决的。你几乎可以做任何你曾经在桌面上做过的事情（从 UI 角度来看）。

您可以创建自己的精美（和高级）视图定义（xml、json、数据库表，选择一个），根据需要存储该定义（数据库、文件等），然后为浏览器生成 HTML/javascript/css做为用户显示内容的工作。浏览器将为您完成繁重的工作：下载文件、解析、编译和运行客户端脚本语言、缓存资源、安全、打印、播放声音和视频......

浏览器是您的瘦客户端，它应用了大量的知识和努力，是近 20 年研究的结果。这是一个经过验证的应用程序，每天由全球成千上万的人进行测试。您的应用程序将在这个世界上支持开放 Web 技术的每一台机器上运行。您已经免费为您开发了客户端。为什么要重新发明轮子？

即使您创建自己的特定方式从服务器运行富 Web 应用程序（您的视图定义、您的 js 生成器...），您也不会重新发明轮子。假设一年后出现了一个惊人的新功能，并且浏览器供应商实现了它。您的应用程序可以从该技术中受益，只需对 HTML/js/css 生成器进行小的（可能是大的）更改。

我看不出为什么要创建一个全新的瘦客户端并抛弃所有开放式 Web 技术的单一原因，尤其是现在所有供应商都遵循标准（IE10 很好）并且（希望）很快我们将不再每个供应商都需要 hack。

最后，如果您不想使用浏览器，您仍然可以使用开放的 Web 技术。awesomium 项目是 webkit 引擎的包装器，您可以在 winforms/wpf 应用程序中使用它，但不受一般浏览器的限制。 [http://awesomium.com/](http://awesomium.com/)

# linker - Lua编译链接错误

> ID：11447239
> 
> 赞同：1
> 
> 时间：2012-07-12T07:46:17.970
> 
> 标签：linker, compiler-errors, lua

当我尝试编译一个小 lua 程序时，我得到了这些错误：

```
/usr/lib//liblua52.so: undefined reference to `dlsym'
/usr/lib//liblua52.so: undefined reference to `dlerror'
/usr/lib//liblua52.so: undefined reference to `dlopen'
/usr/lib//liblua52.so: undefined reference to `dlclose' 
```

当然，我用 -ldl 链接。我的 ubuntu 上安装了 lua5.2-dev。如果您需要更多信息，请询问我。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T06:37:33.710

> 当我尝试编译一个小 lua 程序时，我得到了这些错误

*不会。链接*程序时会出现这些错误。

解决方法是`-ldl`在链接行的末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:52:43.220

获得此错误的简单方法是在 Makefile 中设置错误的 PLAT 变量。您需要在顶层 Makefile 和 src/Makefile 中设置它。

合法值显示在定义之后大约 10 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-08T22:55:34.937

确保 -ldl 正好在您的链接行的末尾，正如 Employed Russian 所提到的

# java - 强制删除文件夹中的所有文件

> ID：11447241
> 
> 赞同：14
> 
> 时间：2012-07-12T07:46:19.193
> 
> 标签：java, file-io, delete-file, fileinputstream

我一直在使用一段特定的代码从文件夹中删除文件，但事实证明这是非常有问题的，因为我可能忘记关闭一两个 InputStream。我拥有的代码太大了，以至于我无法看到我没有关闭的所有输入流。无论是否有打开的 InputStream，有没有办法删除文件？

这是我一直在使用的一段代码；

```
File fin = new File("C:/ABC Statements final/");
    File[] finlist = fin.listFiles();       
    for (int n = 0; n < finlist.length; n++) {
        if (finlist[n].isFile()) {
        System.gc();
        Thread.sleep(2000);
            finlist[n].delete();
        }
    } 
```

我已经编辑了代码。这个版本有效。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-12T08:00:51.433

提供的代码块中没有 InputStream 实例。

为了避免编写大量未经测试的 IO 代码，请查看[apache.commons.io](http://commons.apache.org/io/)项目。特别是在[FileDeleteStrategy](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileDeleteStrategy.html)类中，用于文件删除操作。

您的代码可能如下所示：

```
File fin = new File("C:/ABC Statements final/");

for (File file : fin.listFiles()) {
    FileDeleteStrategy.FORCE.delete(file);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T09:14:33.837

您可以使用：

```
FileUtils.deleteDirectory(File directory) 
```

来自[Apache Commons](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-07T14:08:09.463

使用 Apache Commons IO：

```
File dir = ...
FileUtils.deleteQuietly(dir);
dir.mkdirs(); 
```

无需以这种方式检查异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-25T15:10:58.157

利用：

```
 import org.apache.commons.io.FileUtils;
   FileUtils.cleanDirectory(fin); 
```

文件：

```
 /**
     * Clean a directory without deleting it.
     *
     * @param directory directory to clean
     * @throws IOException in case cleaning is unsuccessful
     */ 
```

为了使用它，您需要一个依赖项：

**马文：**

```
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.6</version>
</dependency> 
```

**摇篮：**

```
compile 'commons-io:commons-io:2.6' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-21T11:29:24.530

```
public void removeDir()
{
try
{
    File dir = new File((System.getProperty("user.dir")+"/ReportFolderToMail"+timeStamp));
    if (dir.isDirectory())
    {
        File[] files = dir.listFiles();
        if (files != null && files.length > 0)
        {
            for (File aFile : files) 
            {
                System.gc();
                Thread.sleep(2000);
                 FileDeleteStrategy.FORCE.delete(aFile);
                System.out.println("delet file" +aFile);
            }
        }
        dir.delete();
        System.out.println("delet" +dir);
    } 
    else 
    {
        dir.delete();
    }
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-22T11:25:47.423

```
public boolean removeDir()
{
try
{
   //destFile = new File((System.getProperty("user.dir")+"/FileName"))
   // checks if the directory has any file
    File dir = destFile; 
    if (dir.isDirectory())
    {
        File[] files = dir.listFiles();
        if (files != null && files.length > 0)
        {
            for (File aFile : files) 
            {
                System.gc();
                Thread.sleep(2000);
                FileDeleteStrategy.FORCE.delete(aFile);
                System.out.println("delet file" +aFile);
            }
        }
        dir.delete();
        System.out.println("delet" +dir);
    } 
    else 
    {
        dir.delete();
    }
}
catch(Exception e)
{
    logger.log(LogStatus.FATAL, "Exception Occured While Deleting Folder : " +e);
}
return true;
} 
```

# javascript - 动态网页的快捷方式

> ID：11447242
> 
> 赞同：1
> 
> 时间：2012-07-12T07:46:23.413
> 
> 标签：javascript, html, asp-classic

“是否可以生成页面的快捷方式，例如：网页上的动态内容包含 15 个文档，我想单击其中一个在我的桌面上创建一个快捷方式”</p>

非常简短的问题我知道非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:52:37.747

它不是。

1.  桌面是特定于平台的东西，Web API 往往是跨平台的。
2.  如果有这样的 API（甚至是带有确认对话框的 API），您会在每个广告页面上看到它。

# jakarta-ee - 当 ejb 注入实现在同一耳朵的战争中定义时，CDI 不起作用

> ID：11447244
> 
> 赞同：2
> 
> 时间：2012-07-12T07:46:26.703
> 
> 标签：jakarta-ee, cdi, ear

我有一个包含多个 ejb-jar 和 war 的 EAR 文件。在一个 ejb-jar 中，我注入了这样一个接口的多个实现：

```
@Inject
@Any
private Instance<ConfigurationProviderLocal> providerEjb; 
```

这个接口的一个实现是在一个战争中定义的。此实现部署良好。

在 glassfish v3.1 日志中，我看到：

> 信息：EJB FormConfigurationProviderBean 的可移植 JNDI 名称：[java:global/com.dialog.edialog_eservices_ear_1.0.1-SNAPSHOT/checkout-form-1.0-SNAPSHOT /FormConfigurationProviderBean, java:global/com.dialog.edialog_eservices_ear_1.0.1-SNAPSHOT/checkout- form-1.0-SNAPSHOT /FormConfigurationProviderBean!com.dialog.sbsm.talisker.core.config.api.ConfigurationProviderLocal]

但是在我的实现的迭代中：

```
for (ConfigurationProviderLocal provider : providerEjb) {
            [...]
        } 
```

实现`FormConfigurationProviderBean`从不迭代。我在日志中没有可以解释这一点的消息。

此外，当我单独部署战争时（不是内耳，其中嵌入了依赖项），注入工作正常。

在战争中定义实施时是否支持 CDI？有类加载器问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:14:59.617

如果设置正确（可能是这种情况），这*应该可以工作。*

我在 JBoss World（在 AS 6 上）中遇到了类似的问题，其中 EAR 中的不同工件无法相互看到。我通过重新配置 JBoss 类加载机制来解决它，但这是普通的（和专有的）JBoss 东西。

作为调试的第一步，我会做什么：向[BeanManager](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e4939)查询真正存在的 bean。这可能会给你一个提示。转储初始 bean 处理的小型[CDI 扩展也可能会有所帮助。](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html)

如果它仍然看起来像一个 CL 问题，您可能会在 Glassfish 文档中找到它的配置选项。如果这是一个已知问题/问题，可能值得与 GlassFish 开发人员核实......

# asp.net - asp.net中的多行文本框

> ID：11447252
> 
> 赞同：0
> 
> 时间：2012-07-12T07:47:17.837
> 
> 标签：asp.net, vb.net, textbox, multiline

我有一个多行文本框，例如：

```
<asp:TextBox CssClass="txtform" ID="txtWhom" runat="server" Height="78px" 
     Rows="10" TextMode="MultiLine"></asp:TextBox> 
```

假设我在该文本框中写下以下文本：

> 尊敬的先生， 汇丰银行
> 总经理。

当我将该文本放入 vb.net 代码后面的变量中时...并将其发送到水晶报告以显示...仅...显示第一行...在这种情况下仅显示“亲爱的先生， " 显示... 但我想要所有的文字... 我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:54:54.813

我想知道您输入的字符串是否包含 Crystal 无法正确处理的回车和换行字符。您可能需要删除它们或用 Crystal 期望的正确字符替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:27:23.003

```
Use "Can Grow" option for that text object in Crystal report. 
```

`=>Right Click -> Text Object
=>Select Format Object =>Use Can grow option in the dialog box.`

它使可变长度字段在报告中垂直增长并自动换行。可以使用此选项设置最大行数，以控制流氓或大型数据元素。

# events - 创建 Win32_LocalTime _instancemodificationevent 非重复事件

> ID：11447253
> 
> 赞同：0
> 
> 时间：2012-07-12T07:47:22.913
> 
> 标签：events, wmi, wmi-query, timed

我有一个问题，我似乎无法找到答案。我正在使用 WMI 创建一些定时事件，到目前为止它们运行良好。事件按预期在预定周期重复。我现在正在寻找一种方法来创建一个“一次性”事件，该事件不会重复并且似乎无法弄清楚或在任何地方找到答案。

以下是 MSDN 网站上创建重复事件的示例：

 `````
// Win32_LocalTime and Win32_UTCTime reside in root\cimv2 namespace. 
// Defining the EventNamespace allows the filter
// to be compiled in any namespace.
instance of __EventFilter as $FILT1
{
    Name  = "wake-up call";
    Query = "SELECT * FROM __InstanceModificationEvent WHERE "    
    "TargetInstance ISA \"Win32_LocalTime\" AND "
    "TargetInstance.Hour = 0 AND TargetInstance.Minute = 0 AND "
 "TargetInstance.Second = 0";
    QueryLanguage = "WQL";
    EventNamespace = "root\\cimv2";
}; 
````  `我想要的是让它不重复。有任何想法吗？

干杯

青蛙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:28:30.617

[__InstanceModificationEvent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394651%28v=vs.85%29.aspx)类是一个内在事件，它报告何时对 WMI 类的实例进行了更改，在这种情况下正在侦听[`Win32_LocalTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394171%28v=vs.85%29.aspx)返回当前时间的 WMI 类。现在，如果您想创建一个非重复事件，您可以将年、月和日属性添加到 WQL 语句中。

```
instance of __EventFilter as $FILT1
{
    Name  = "wake-up call";
    Query = "SELECT * FROM __InstanceModificationEvent WHERE "    
    "TargetInstance ISA \"Win32_LocalTime\" AND "
    "TargetInstance.Hour = 0 AND TargetInstance.Minute = 0 AND TargetInstance.Second = 0 AND "
    "TargetInstance.Year=2012 AND TargetInstance.Month=7 AND TargetInstance.Day=12";
    QueryLanguage = "WQL";
    EventNamespace = "root\\cimv2";
}; 
`````

# google-app-engine - 谷歌应用引擎（Python）“没有名为 webob 的模块”

> ID：11447263
> 
> 赞同：4
> 
> 时间：2012-07-12T07:48:00.323
> 
> 标签：google-app-engine, sdk, google-app-engine-patch

最近我刚刚将我的 GAE SDK 版本更新为**1.6.4**，同时我试图启动我的服务器，它抛出**“没有名为 webob 的模块”**并退出。注意：我正在使用**python2.5** 这里是否需要任何外部补丁或东西来解决这个问题？

如果有人遇到此问题并解决了它，请指导我，您是如何解决的..

最好的祝福。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T07:33:26.607

安装 webob 为我解决了这个问题：

```
pip install webob==1.1.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:19:49.303

您可能需要在 app.yaml 中指定它

请参阅此处的文档 [https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:12:13.027

以下是为我解决它的确切命令：

```
sudo pip install webob==1.1.1 
```

# android - 无法从蓝牙套接字读取输入

> ID：11447269
> 
> 赞同：2
> 
> 时间：2012-07-12T07:48:12.650
> 
> 标签：android

我终于设法从我的安卓手机连接到我的设备，当我尝试从我的蓝牙插座读取数据时遇到了问题。

所以这是我建立连接到我的设备的代码，它是一个扩展的类`AsyncTask`

```
import java.io.IOException;
import java.io.InputStream;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import android.app.ProgressDialog;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.Button;
import android.widget.Toast;

public class Connect extends AsyncTask<String, Void, String> {

private final static String TAG = "+++CONNECT THREAD+++";

ProgressDialog progressDialog; 

Context context;

BluetoothSocket tmp; 
BluetoothDevice device; 
BluetoothAdapter ba; 
Button connect;
int bt_port_to_connect; 

ReadInput ri; 

InputStream is; 
byte[] test; 

public Connect(Context context, BluetoothDevice device, BluetoothAdapter ba, Button connect) {

    this.ba = ba; 
    this.context = context; 
    this.device = device; 
    this.connect = connect; 
    bt_port_to_connect = 9; 
}

 protected void onPreExecute() {

     progressDialog=ProgressDialog.show(context,"Please Wait..","Connecting to device",false);
  }

@Override
protected String doInBackground(String... arg0) {

        Method m = null;

        try {
            m = device.getClass().getMethod("createInsecureRfcommSocket", new Class[] {int.class});
        } catch (NoSuchMethodException e1) {

            e1.printStackTrace();
    }

    try {
        tmp = (BluetoothSocket) m.invoke(device, bt_port_to_connect);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

try {
    ba.cancelDiscovery(); 
    tmp.connect();

    ri = new ReadInput(tmp); 
    ri.start(); 

} catch (IOException e) {
    Log.e("+++CONNECT1+++","EXCEPTION:  " + e.getMessage());

    try {
        tmp.close();
    } catch (IOException e2) {
        Log.e(TAG, "unable to close() " + " insecure socket type" +
                " socket during connection failure", e2);
    }

    Log.e("+++CONNECT2+++", e.getLocalizedMessage());

}

boolean isConnected = tmp.isConnected();

if(isConnected) {

    return "connected";
}

else {
    return "notConnected";
}
}

protected void onPostExecute(String result) {
    progressDialog.dismiss(); 

    if(result.equals("connected")) { 
        connect.setEnabled(false); 
        Toast.makeText(context, "Connected to device: "+device.getName().toString(), Toast.LENGTH_LONG).show(); 

        //new ReadIn(context, tmp).execute(""); 

    }
    else if(result.equals("notConnected")) {
        Toast.makeText(context, "Can`t reach host", Toast.LENGTH_LONG).show(); 
    }

}
} 
```

如您所见，下面的行`tmp.connect();`我创建了一个新类的新对象，这是我要处理读取的类`inputStream`所以这里是该类的代码：

```
import java.io.IOException;
import java.io.InputStream;

import android.bluetooth.BluetoothSocket;
import android.util.Log;

public class ReadInput extends Thread {

BluetoothSocket socket; 
private InputStream is; 

public ReadInput(BluetoothSocket socket) {

    Log.i("READINPUT", "INSIDE READ INPUT THREAD CONSTRUCTOR!!!");
    InputStream tmpIn = null;
    this.socket = socket; 
    is = null; 

    try {
        tmpIn = socket.getInputStream();
    } catch (IOException e) {
        Log.e("READINPUT", "Temp socket in created: " + e.getMessage()); 
    }

    is = tmpIn; 
}

public void run() {
    Log.i("READINPUT", "INSIDE READ INPUT THREAD RUN METHOD!!!");

    byte[] buffer = new byte[1024]; 
    int bytes = 0; 

    while(true) {

        try {
            bytes = is.read(buffer);
        } catch (IOException e) {
            Log.e("FROM RUN METHOD: ", e.getMessage()); 
        }

        Log.i("INPUTSTREAM GOT:  ", Integer.toString(bytes)); 

    }
}

} 
```

我的上一个代码中有两种`Log.i`方法，这会向 LogCat 输出正确的信息，说明我在代码中的位置。但它不会将流的内容输出到 LogCat。我在这里做错了什么？是的，我已经查看了 BluetoothChat 示例。

提前致谢！

**编辑 1**

我对`ReadInput`类的构造函数做了一些研究。

```
is = tmpIn; 
    try {
        Log.i("InputStream: ", Integer.toString(is.available()));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

此代码段只会输出到返回的 logcat，`0`这意味着 InputStream 不可用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:41:04.823

我发现使用缓冲阅读器可以很好地与蓝牙设备配合使用。然后我只是在一个真正的监听器中使用了一个带有 br.isReady 的 while.loop。基本上做一个“听众”

# xslt - 如何将屏幕截图图像链接到 JUNIT 报告中的测试用例结果？

> ID：11447273
> 
> 赞同：1
> 
> 时间：2012-07-12T07:48:28.460
> 
> 标签：xslt, ant, selenium, junit, junit4

> **可能重复：**
> [自定义 JUnit 报告？](https://stackoverflow.com/questions/1727616/custom-junit-report)

我遇到了相当困难的情况，我正在使用 selenium webdriver 开发自动化框架。我使用 JUNIT 4.0 和 ANT 1.8 进行报告和执行。

我已经使用参数化运行器来运行具有不同数据集的测试用例，并且还实现了屏幕捕获功能以防出现故障。所以在生成 JUNIT 报告时，我无法将快照与测试用例链接起来。（我已经更新了 junit-frames.xsl）

我在想有什么方法可以在 Test-Result.xml 文件中添加其他信息？

```
 <testcase classname="com.example.tests.NormanPrepaidBaseTest" name="testNormanPrepaidBase[0]" time="52.157" />
  <testcase classname="com.example.tests.NormanPrepaidBaseTest" name="testNormanPrepaidBase[1]" time="45.735" />
  <testcase classname="com.example.tests.NormanPrepaidBaseTest" name="testNormanPrepaidBase[2]" time="26.157">
  <failure message="Invalid personal Details" type="junit.framework.AssertionFailedError">junit.framework.AssertionFailedError: Invalid personal Details
    at normancommon.NormanCommon.fillPersonalDetails(Unknown Source)
    at com.example.tests.NormanPrepaidBaseTest.testNormanPrepaidBase(Unknown Source)
    at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:423)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:137)
</failure>
<Screenshot>screenshot location</Screenshot> // i want to add something like that in Test-Result.xml
  </testcase> 
```

这样我就可以使用 XSL 文件读取值，

伙计们，请帮助我如何做到这一点，以及请提出最好的方法来实现这一点？

# php - 找不到 imageMagick mogrify 模块

> ID：11447274
> 
> 赞同：1
> 
> 时间：2012-07-12T07:48:33.140
> 
> 标签：php, imagemagick, mogrify

我在使用 mogrify 时遇到问题。当我从命令行运行它时，当我从 php 运行它时，我得到了这个错误。

```
"mogrify: unable to open module file `/usr/lib64/ImageMagick-6.2.8/modules-Q16/coders/orig.la': No such file or directory." 
```

奇怪的是，在其他盒子上该文件也丢失了，但我的脚本有效。我正在做简单的事情，注入我用 convert 提取的修改后的 iptc。任何线索如何让它工作？安装附加包？

有问题的机器配置：

```
Version: ImageMagick 6.2.8 04/17/08 Q16 file:/usr/share/ImageMagick-6.2.8/doc/index.html
Copyright: Copyright (C) 1999-2006 ImageMagick Studio LLC 
```

工作的

```
Version: ImageMagick 6.5.9-0 2010-02-12 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2010 ImageMagick Studio LLC
Features: OpenMP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:03:13.460

您在有问题的机器上安装的 ImageMagick 6.2.8 版本可能不包含 mogrify 库，或者未正确安装。尝试重新安装 imagick 并使库版本与您在工作版本上安装的库版本匹配。

# comments - TextMate：注释行快捷方式不再起作用（我的瑞士布局上的 Cmd-/ 或 Cmd-Shift-7）

> ID：11447283
> 
> 赞同：1
> 
> 时间：2012-07-12T07:49:42.710
> 
> 标签：comments, keyboard-shortcuts, textmate

一段时间以来，我在 TextMate 中遇到了一种非常奇怪的行为。

自从我 2 个月前切换到 Lion 以来（在我从未遇到任何问题之前），我已经多次使用键盘快捷键来评论一行（这是`Cmd-/`或在我的瑞士布局中是`CMD`+ `SHIFT`+ `7`where `SHIFT`+`7`结果为 a ）。 `/`. 然后我用来重新启动 TextMate 并且它再次工作。

但是现在，重启并不能解决问题。所以我进入捆绑编辑器并尝试重置快捷方式，在那里我可以将其设置为我喜欢的任何内容，但不能`Cmd-/`！当我想记录快捷方式并按`CMD`+ `SHIFT`+ `7`` 时没有任何反应，输入字段保持空白！

自从我切换到 Lion 后，我安装了一些包（Cucumber、RSpec、RubyAMP、Ruby Debug、Shouda），所以其中一个可能会造成麻烦？或者，我什至似乎无法在捆绑编辑器中发送`CMD`++的`SHIFT`事实是否`7`意味着快捷方式被 TextMate 的其他“外部”阻止？

我应该如何调试这个？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:30:46.260

原来是[Skitch](http://skitch.com/)在奔跑和占领`Cmd-Shift-7`。

# titanium-mobile - 如何通过编程在钛中裁剪图像？

> ID：11447288
> 
> 赞同：0
> 
> 时间：2012-07-12T07:50:07.080
> 
> 标签：titanium-mobile

我正在使用 Titanium 实现一个 iphone/Android 应用程序，我想在其中裁剪图像。请检查以下我已实现的流程。1）打开相机 2）拍照 3）在应用程序中显示照片 4）裁剪照片与某些区域

我已经实现了以上 3 个步骤，但是对于裁剪我遇到了问题。我尝试了下面的代码进行裁剪。

var file = Titanium.Filesystem.getFile(header1).toBlob(); var cropped = file.imageAsCropped(10, 10, 290, 232);

var croImg = Ti.UI.createImageView({ image: file, top:0, left: 0, width:290, height:232 });

win1.add(croImg);

但我无法成功。如果你给我建议，那将是 appriciate。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:55:15.297

还有另一种方法可以使用比原始图像小的单独的 imageView 并设置要显示的部分。查看这个链接，它给出了一个很好的例子：

[http://developer.appcelerator.com/question/72431/crop-imageview](http://developer.appcelerator.com/question/72431/crop-imageview)

# repository - 在存储库模式的上下文中聚合根

> ID：11447292
> 
> 赞同：5
> 
> 时间：2012-07-12T07:50:19.803
> 
> 标签：repository, repository-pattern, aggregateroot

我知道聚合根是客户端加载的唯一对象，聚合根中对象的所有操作都由聚合根完成。按照相同的约定，应该为聚合根定义一个存储库接口，并且对聚合根内的任何对象的任何持久性操作都应该由对应于聚合根的这个“聚合根存储库”完成。这是否意味着只应将聚合根对象传递给“聚合根存储库”以进行与聚合根的子对象相关的操作？

让我举个例子吧。

假设您有一个 School 对象和 Student 对象。由于学生没有学校就不能存在，（你可能会说一个学生可能已经离开学校，在这种情况下他/她不再是学生），所以我们有

```
class School
{
    string SchoolName;
    IList<Student> students;
}

class Student
{
    string StudentName;
    string Grade;
    School mySchool;
} 
```

学校是这里的总根。现在假设我们要为持久性操作定义一个存储库。

下面哪个是正确的？

1)

```
interface ISchoolRepository
{
    void AddSchool(School entity);
    void AddStudent(School entity); //Create a School entity with only the student(s) to be added to the School as the "students" attribute
} 
```

2)

```
interface ISchoolRepository

{
    void AddSchool(School entity);
    void AddStudent(Student entity); //Create a Student entity. The Student entity contains reference of School entity in the "mySchool" attribute.
} 
```

在 1) 中，我们只在界面中公开聚合。因此，任何实现 ISchoolRepository 的 DAL 都必须从 School 对象中获取 Student 对象才能添加学生。2) 看起来更明显，建议 1) 我可能看起来很愚蠢，但纯理论中聚合根的概念会建议 1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:42:59.310

我在这里发现了一个类似的问题，[我应该如何将对象添加到由聚合根维护的集合中](https://stackoverflow.com/questions/566854/how-should-i-add-an-object-into-a-collection-maintained-by-aggregate-root)

合并来自上述链接的两个答案，正确的方法是

```
interface ISchoolRepository  
{     
 void AddSchool(School entity);    
 void AddStudent(Student entity); //Create a Student entity. The Student entity    contains reference of School entity in the "mySchool" attribute. 
} 
```

或更严格地说

```
interface ISchoolRepository  
{     
 void AddSchool(School entity);    
 void AddStudent(string StudentName, string Grade); //without exposing Student type
} 
```

# asp.net - API 错误代码：191，facebook 错误

> ID：11447294
> 
> 赞同：0
> 
> 时间：2012-07-12T07:50:36.977
> 
> 标签：asp.net, facebook

我在网上找到了这个有用的代码，但是当我运行代码并单击“已发布的墙帖”时，我收到了这个错误。

```
API Error Code: 191  API Error Description: The specified URL is not
owned by the application  Error Message: redirect_uri is not owned by
the application. 
```

如何修复此代码？

谢谢

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">    
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>        
    <title>New Graph api & Javascript Base FBConnect Tutorial | Thinkdiff.net</title>    
</head>
<body>        
    <div id="fb-root"></div>        
    <script type="text/javascript">
        window.fbAsyncInit = function() {                
            FB.init({appId: '420291518023354', status: true, cookie: true, xfbml: true}); 

            /* All the events registered */                
            FB.Event.subscribe('auth.login', function(response) {                   
                // do something with response                    
                login();                
            });
            FB.Event.subscribe('auth.logout', function(response) {                    
                // do something with response                    
                logout();                
            });
            FB.getLoginStatus(function(response) {                    
                if (response.session) {                        
                // logged in and connected user, someone you know                        
                login();                    
                }                
            });            
        };

        (function() {                
            var e = document.createElement('script');                
            e.type = 'text/javascript';                
            e.src = document.location.protocol +                    
                '//connect.facebook.net/en_US/all.js';                
            e.async = true;                
            document.getElementById('fb-root').appendChild(e);            
        }());

        function login(){                
            FB.api('/me', function(response) {                    
                document.getElementById('login').style.display = "block";                    
                document.getElementById('login').innerHTML = response.name + " succsessfully logged in!";                
            });            
        }

        function logout(){                
            document.getElementById('login').style.display = "none";            
        }

        //stream publish method            
        function streamPublish(name, description, hrefTitle, hrefLink, userPrompt){                
            FB.ui(                
            {
            method: 'stream.publish',                    
            message: '',                    
            attachment: {                        
                name: name,                        
                caption: '',                        
                description: (description),                        
                href: hrefLink                    
            },
            action_links: [                        
                { text: hrefTitle, href: hrefLink }                    
            ],
            user_prompt_message: userPrompt
            },
            function(response) {

            });
        }
        function showStream(){
            FB.api('/me', function(response) {
                //console.log(response.id);
                streamPublish(response.name, 'Thinkdiff.net contains geeky stuff', 'hrefTitle', 'http://localhost:3000/', "Share thinkdiff.net");
            });
        }

        function share(){
            var share = {
                method: 'stream.share',
                u: 'http://thinkdiff.net/'
            };

            FB.ui(share, function(response) { console.log(response); });
        }

        function graphStreamPublish(){
            var body = 'Reading New Graph api & Javascript Base FBConnect Tutorial';
            FB.api('/me/feed', 'post', { message: body }, function(response) {
                if (!response || response.error) {
                    alert('Error occured');
                } else {
                    alert('Post ID: ' + response.id);
                }
            });
        }

        function fqlQuery(){
            FB.api('/me', function(response) {
                 var query = FB.Data.query('select name, hometown_location, sex, pic_square from user where uid={0}', response.id);
                 query.wait(function(rows) {

                   document.getElementById('name').innerHTML =
                     'Your name: ' + rows[0].name + "<br />" +
                     '<img src="' + rows[0].pic_square + '" alt="" />' + "<br />";
                 });
            });
        }

        function setStatus(){
            status1 = document.getElementById('status').value;
            FB.api(
              {
                method: 'status.set',
                status: status1
              },
              function(response) {
                if (response == 0){
                    alert('Your facebook status not updated. Give Status Update Permission.');
                }
                else{
                    alert('Your facebook status updated');
                }
              }
            );
        }
    </script>

    <h3>New Graph api & Javascript Base FBConnect Tutorial | Thinkdiff.net</h3>
    <p><fb:login-button autologoutlink="true" perms="email,user_birthday,status_update,publish_stream"></fb:login-button></p>

    <p>
        <a href="#" onclick="showStream(); return false;">Publish Wall Post</a> |
        <a href="#" onclick="share(); return false;">Share With Your Friends</a> |
        <a href="#" onclick="graphStreamPublish(); return false;">Publish Stream Using Graph API</a> |
        <a href="#" onclick="fqlQuery(); return false;">FQL Query Example</a>
    </p>

    <textarea id="status" cols="50" rows="5">Write your status here and click 'Status Set Using Legacy Api Call'</textarea>
    <br />
    <a href="#" onclick="setStatus(); return false;">Status Set Using Legacy Api Call</a>

    <br /><br /><br />
    <div id="login" style ="display:none"></div>
    <div id="name"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:15:13.493

这是因为 facebook 权限。当您创建一个新的 FB 应用程序时，有一个名为“App Domains”的字段，您只需要从该地址调用 FB 应用程序，否则它将不起作用。

例如，如果您有 App Domain [http://www.mysite.com](http://www.mysite.com)并且您尝试从[http://mysite.com](http://mysite.com)（没有 www）访问，则会出现该错误。

我建议您在“应用程序域”中存储您的域名的所有可能组合，包括别名和子域

希望这对你有帮助

# c# - 你怎么会发现一个日期比另一个日期多或少百分之多少？

> ID：11447304
> 
> 赞同：0
> 
> 时间：2012-07-12T07:51:19.973
> 
> 标签：c#, .net, datetime, timespan

假设您有 2 个日期：

```
 var left = new DateTime(2012,10,05,13,30,00);
        var right = new DateTime(2012,10,05,13,31,30); 
```

事实是：右边比左边多 1.5 分钟。如果我们用 MINUTES 来讨论，在我看来，右边的 DateTime 比左边的 DateTime 多 5% 左右。（因为年、月、日、小时之间是相等的。但也可以不同。）

我如何计算右边是比左边日期多或少多少百分比，以分钟为单位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:59:42.470

您可以像这样在几分钟内获得差异：

```
double difference = TimeSpan.FromTicks(right.Ticks).TotalMinutes - 
                             TimeSpan.FromTicks(left.Ticks).TotalMinutes; 
```

您可以执行以下操作，但我认为结果在显示两个日期之间的差异时不会非常有用：

```
double percent = TimeSpan.FromTicks(right.Ticks).TotalMinutes / 
                          TimeSpan.FromTicks(left.Ticks).TotalMinutes * 
                          100 - 100; 
```

# objective-c - Objective C- CGDataProviderCopyData 的内存泄漏

> ID：11447307
> 
> 赞同：1
> 
> 时间：2012-07-12T07:51:25.513
> 
> 标签：objective-c, nsimage, cgimage, cgimageref

我是 ObjC 的新开发人员，正在尝试制作填充颜色应用程序。当我触摸图像时，颜色会改变，但我得到了这个功能的 merory 泄漏需要你的帮助：

```
-(void) updateImageWithColorSelected:(int) pos{
   CGImageRef imageRef = self.basicImage.CGImage;
   NSData *data = CGDataProviderCopyData(CGImagerGetDataProvider(imageRef));//leak here
   Byte *pixels = (Byte *)[data bytes];
   //change color...
   for(int i = 0; i< IMG_SIZE; i++){
     pixels[j] = 255;
   }
   CGDataProvider provider = CGDataProviderCreateWithData( NULL, pixels, [data length], NULL];
   CGImageRef newImageRef = CGImageCreate(w,h....);
   self.basicImage = [UIImage imageWithCGImage:newImageRef];
   //release newImageRef
   CGImagerRelease(newImageRef);

   // set basic image to img
   [self.img setImage:self.basicImage];

   data = nil;
   [data release];
} 
```

我尝试删除除 NSData *data = CGDataProviderCopyData 之外的所有代码，并且应用程序仍然泄漏。你们知道如何发布“数据”吗？

先感谢您，

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:04:49.753

```
 // set basic image to img
   [self.img setImage:self.basicImage];

   data = nil;
   [data release];
} 
```

您正在向 nil 指针发送释放。

```
 [data release];
   data = nil;
} 
```

这会做得更好。

**编辑：**问题`CGDataProviderCreateWithData`

当数据被释放时，你传递给的数据指针`CGDataProviderCreateWithData`就失效了。这是意料之中的。正确使用此函数需要您为数据分配一个缓冲区，并在提供程序释放时提供回调以释放数据。

对您来说最好的解决方案是使用`CGDataProviderCreateWithCFData`Foundation 和 CoreFoundation 对象之间的免费桥接。

利用：

```
CGDataProvider provider = CGDataProviderCreateWithCFData( (CFDataRef) data ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:28:38.977

请注意，目前调用`CGDataProviderCreateWithData()`or创建的数据提供者`CGDataProviderCreateWithCFData()`也正在泄露，应该调用`CGDataProviderRelease()`. （与原始泄露的数据相比，这次泄露无疑是次要的。）

# plugins - Fedora.x86_64 - D 语言 - Eclipse DDT - 添加用户库

> ID：11447310
> 
> 赞同：0
> 
> 时间：2012-07-12T07:51:41.840
> 
> 标签：plugins, dependency-injection, d, fedora

好吧，所以我一直在思考如何在 eclipse 插件、DDT 或 Descent 中包含一个库 Derelict(2)，但我终生无法得到它。我错过了一些大的东西。

我已确保以正确的方式放置和解压缩所有内容： - 安装 DMD 编译器 - 安装并配置 DDT 为其默认值（druntime/import 和 phobos） - YUM 安装 derelict2，导致 .di 文件在 dmd 文件夹中可用

我已经尝试了所有方法，从手动下载和使用 lib 编译指示到更改构建路径以包含废弃的 .di 文件。都失败了。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:41:52.990

您可能忘记指定库搜索路径。因此，假设您要使用的库位于 中`/home/duser/lib`，那么您的 DMD 命令行应该包含`-L-L/home/duser/lib`指示 DMD 编译器在哪里查找这些库。我不知道您在 DDT 中的哪个位置指定库搜索路径... 第三方 D 源或 D 接口文件也是如此 - 您还需要指定包含搜索路径（类似于 C/C++ 标头文件）与 -I 标志...

# jsp - 刷新jsp页面后重复执行

> ID：11447312
> 
> 赞同：1
> 
> 时间：2012-07-12T07:51:44.190
> 
> 标签：jsp, scriptlet

我正在编写一个包含按钮的 jsp 页面，并将代码放入 scriptlet

运行后一切都很好，但是当我刷新页面时，代码会再次执行而无需单击按钮。所以我想摆脱这个。

这是我的jsp代码：

```
<%
 if (request.getParameter("btnSubmit") != null) //btnSubmit is the name of your       

     button,not id of that button.
   {

String className = request.getParameter("testclass");
System.out.println(className);
String[] command = {"CMD", "/C", "mvn -Dtest=" + className + " test"};
ProcessBuilder probuilder = new ProcessBuilder(command);

//You can set up your work directory
probuilder.directory(new File("C:\\Users\\Amira\\junoWorkspace\\TestProjectUI"));

Process process = probuilder.start();

//Read out dir output
java.io.InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;
System.out.printf("Output of running %s is:\n", Arrays.toString(command));
while ((line = br.readLine()) != null) {
    System.out.println(line);
}

//Wait to get exit value
try {
    int exitValue = process.waitFor();
    System.out.println("\n\nExit Value is " + exitValue);
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}
%>

    <html:file properties="tonFichier" name="tonForm"/>

    <p>   Please specify a Test :<br>
        <input type="file" name="testclass" size="40" >
    </p>
    <div>
        <input type="submit" id="btnSubmit" name="btnSubmit" value="Execute Test"/>

    </div>
  </form>
 </body> 
```

任何想法将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:56:14.197

我认为`FORM`方法是`GET`。您应该将`Form`方法设为`POST`.

```
<FORM action="....." method="post"> 
```

**GET 是幂等**请求，它允许浏览器在刷新时自动发出请求。然而，

**POST 是非幂等**的，它让浏览器显示一个弹出窗口，询问类似`Do you want to submit the request again.`

# java - Java 键顺序键组合

> ID：11447313
> 
> 赞同：1
> 
> 时间：2012-07-12T07:51:47.117
> 
> 标签：java, sequence, combinations, keystroke

在 Java 中，我可以轻松地处理组合键，方法是使用标志来跟踪哪个键被按下，哪个键没有被按下，并查看是否所有标志都设置为执行组合键的操作。我不能做的是处理顺序键组合，即在每个键之间的一小段时间内（500ms 或 1000ms）按下一个键并释放它，然后按下另一个键并释放等等。它与格斗游戏中使用的类似，但是，这是用于桌面应用程序的目的。当时间超过期限时，如何管理定时事件以清除标志。

# asp.net-mvc - 多租户应用程序将在稍后阶段部署在 azure 上

> ID：11447316
> 
> 赞同：0
> 
> 时间：2012-07-12T07:51:59.880
> 
> 标签：asp.net-mvc, azure

我目前正在使用 asp.net 开发一个 MVC 应用程序。我的最终目标是在 Azure 上部署 SaaS。

但是在以后的阶段是否可行，或者我应该将它纳入我的开发中？

当涉及到使用 Azure 身份验证等时，由于应用程序是多租户的，我会要求这样做。

只是想知道人们对此的看法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:09:59.680

如果您能提供更多信息就更好了。您是否想知道您目前是否忽略了 Azure，如果您决定将应用程序部署到 Azure，您需要付出多少努力？一般来说，它不会花费太多精力，除非您想使用 Azure 服务，例如存储、ACS 等。将 ASP.NET 应用程序部署到 Azure 网站就像部署到远程 IIS。部署到 Web 角色需要您创建一个额外的云服务项目。部署到虚拟机通常不需要对项目进行任何修改，但需要您设置所有环境。

此外，请注意 Azure 和本地环境之间仍然存在一些差异。例如，我们通常使用 Azure SQL 服务，而不是连接到本地 SQL 服务器。

此致，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:21:36.373

我正在做类似的事情，但现在没有在 Azure 上进行开发。不过，我已经为此做好了准备，确保我尽可能多地使用接口。例如，我不使用 File 和 Directory 写入文件系统，而是写入 IFile 和 IDirectory 接口。

如果您可以避免基于当前本地化的 Windows Server 环境假设任何内容，那么您至少可以编写实现来满足在 Azure 中工作的要求。我打算部署到 Azure 和本地 Web 服务器，并使用依赖注入来满足接口的具体实现。我可以轻松地完全使用相同的代码库，并让它在注入实现之前检测环境。

# android - 安卓本地化工具

> ID：11447317
> 
> 赞同：10
> 
> 时间：2012-07-12T07:52:00.717
> 
> 标签：android, localization

我在 android 中有文本资源，一些已经翻译，而另一些则丢失了。

除了意大利语的 values xml 文件之外，是否有一个工具可以导入例如 values xml 文件并检查缺少的内容并帮助插入缺少的翻译？

我试过OmegaT。该程序导入 android 资源并写入其中。但是，它没有显示已经翻译的内容。Virtaal Translator 不支持将 xml 文件作为输入。

我想在 Eclipse 之外有一个简单的工具，这样我就可以将这个工具提供给其他人帮助翻译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T09:38:20.620

我发现[POEditor.com](http://POEditor.com)是最好和最容易使用的 Android 字符串翻译。它支持 Android XML 字符串导入，我相信您可以将不同的文件导入到同一个翻译中，这将填补您缺失的定义。导出将为您提供一个包含所有定义的 XML。哦，它还有自动翻译功能，或者您可以邀请翻译/朋友与您合作，只需在翻译中插入他们的电子邮件即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T08:00:38.223

[http://www.qweas.com/downloads/development/components-libraries/overview-android-localizer-ailocalizer.html](http://www.qweas.com/downloads/development/components-libraries/overview-android-localizer-ailocalizer.html)

安卓本地化器。到目前为止最好的。接受 strings.xml 和 manifest。它用谷歌翻译，然后你可以自己修复它。并在更改字符串资源或添加新资源时提供帮助工具。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-01T10:10:23.573

[Weblate](http://weblate.org/en/)是 Michal Čihař 开发的一个基于 Web 的开源工具，它还支持 Android 并具有非常紧密的 Git 集成。

我一直在用这个工具翻译几个项目，我也用它来翻译 Weblate 本身，我在翻译友好性方面看到了更好的结果，但整体体验非常好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T08:02:21.840

有一个项目叫 Sequoyah。这是 Eclipse 的一个特殊插件。它不允许您自动翻译，但您可以轻松查看遗漏的位置和翻译值。我在[这里](https://stackoverflow.com/questions/9113707/how-do-you-manage-translations-for-your-android-app/9113883#9113883)描述过。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-03T23:23:59.683

我刚开始写这个工具：[https ://github.com/BenoitDuffez/OAT/wiki/Gallery](https://github.com/BenoitDuffez/OAT/wiki/Gallery)

它旨在自托管、免费；它支持 CDATA、、`formatted="false"`多个 xml 文件等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-03T11:08:34.643

你应该试试[Lokalise](http://lokalise.co)。有一个免费计划，您可以从不同平台上传几乎任何格式。

我自己一直在使用它，几乎没有其他工具可以更好地管理翻译。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-11T09:12:50.647

试试[Agama 应用翻译工具](http://www.agamasoftware.com/agama_app_translator.php)。这是一款完整的安卓本地化工具，内置谷歌翻译器。它支持 XML 字符串以及菜单 XML 文件。您可以轻松添加新语言并让未翻译的项目填充默认（原始）文本或根据需要翻译项目。

# javascript - 我的第一个 Titanium 移动项目中的错误

> ID：11447318
> 
> 赞同：2
> 
> 时间：2012-07-12T07:52:02.307
> 
> 标签：javascript, android, titanium, titanium-mobile, titanium-modules

我是 Titanium Studio 的新手（我在 WindowsXP 上使用 Titanium Studio-2.1.0GA）。我将 Android SDK 添加到 Titanium，但我也可以打开模拟器。但是当我运行我的第一个移动项目时，控制台中显示以下错误。

谁能帮我吗？

提前致谢。

```
[ERROR] Application Installer abnormal process termination. Process exit value was 1  
[ERROR] Invalid number of parameters  
[ERROR] Exception occured while building Android project:  
[ERROR] The filename, directory name, or volume label syntax is incorrect.  
[ERROR] Traceback (most recent call last):  
[ERROR]   File "C:\Documents and Settings\shyam.sundar\Application Data\Titanium\mobilesdk\win32\2.1.0.GA\android\builder.py", line 2206, in <module> 
[ERROR]     s.build_and_run(False, avd_id, debugger_host=debugger_host)  
[ERROR]   File "C:\Documents and Settings\shyam.sundar\Application Data\Titanium\mobilesdk\win32\2.1.0.GA\android\builder.py", line 1976, in build_and_run  
[ERROR]     for avd_props in avd.get_avds(self.sdk):
[ERROR]   File "C:\Documents and Settings\shyam.sundar\Application Data\Titanium\mobilesdk\win32\2.1.0.GA\android\avd.py", line 23, in get_avds  
[ERROR]     for line in run.run([sdk.get_android(),'list','target'],debug=False).split("\n"):  
[ERROR] AttributeError: 'NoneType' object has no attribute 'split' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:46:21.547

你有什么版本的 Java SDK？我安装了 1.7，这个问题就消失了。

# asp.net - 母版页中的错误

> ID：11447319
> 
> 赞同：-1
> 
> 时间：2012-07-12T07:52:04.907
> 
> 标签：asp.net, sql, master-pages

当我在我的母版页中使用此代码时，无法对其进行调试。但在此之前，我没有使用母版页，它完美地工作。我的代码有问题吗？我把我的代码放在这里供你参考。非常欣赏。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="User.aspx.cs" Inherits="Admin_User" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder4" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder5" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" 
  AutoEventWireup="true" CodeFile="User.aspx.cs" Inherits="Admin_User" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder4" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder5" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<p>
This is a list of user in a database.</p>
<p><html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Edit,update and delete User accounts in asp.net membership</title>
<style type="text/css">
.GridviewDiv {font-size: 100%; font-family: 'Lucida Grande', 'Lucida Sans Unicode', 
Verdana, Arial, Helevetica, sans-serif; color: #303933;}
Table.Gridview{border:solid 1px #df5015;}
.Gridview th{color:#FFFFFF;border-right-color:#abb079;border-bottom-
 color:#abb079;padding:0.5em 0.5em 0.5em 0.5em;text-align:center}
.Gridview td{border-bottom-color:#f0f2da;border-right-color:#f0f2da;padding:0.5em 0.5em 
0.5em 0.5em;}
.Gridview tr{color: Black; background-color: White; text-align:left}
:link,:visited { color: #DF4F13; text-decoration:none }
</style>
</head>
<body>
<form id="form1" runat="server">
<div class="GridviewDiv">
<asp:GridView ID="gvDetails" runat="server" CssClass="Gridview"
AutoGenerateColumns="false" 
AutoGenerateDeleteButton="true" AutoGenerateEditButton="true"
onrowcancelingedit="gvDetails_RowCancelingEdit"
onrowdeleting="gvDetails_RowDeleting" onrowediting="gvDetails_RowEditing"
onrowupdating="gvDetails_RowUpdating">
<HeaderStyle BackColor="#df5015" />
<Columns>
<asp:BoundField DataField="UserName" HeaderText="UserName" ReadOnly="true"/>
<asp:BoundField DataField="Email" HeaderText="Email" />
</Columns>
</asp:GridView>
<asp:Label ID="lblResult" runat="server" Font-Bold="true"/>
</div>
</form>
</body>
</html></p>
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="ContentPlaceHolder3" Runat="Server">
</asp:Content> 
```

为什么它给我错误？我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:18:45.070

我看到你有地方

`<form id="form1" runat="server">`

在占位符内，连同整页其他标签，如`head`

我认为这是你的错误，错误使用占位符。可能您`form`在母版页上还有一个是破坏另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:32:20.567

你的代码是错误的。ap 标签内不能有占位符、表单和 html 标签。

# java - 使用正则表达式替换子字符串

> ID：11447323
> 
> 赞同：1
> 
> 时间：2012-07-12T07:52:34.263
> 
> 标签：java, regex, substring

我有一个包含许多`<xxx>`值的字符串。

我想检索里面的值`<>`，做一些操作并将新值重新插入到字符串中。

我所做的是

```
input = This is <abc_d> a sample <ea1_j> input <lmk_02> string
while(input.matches(".*<.+[\S][^<]>.*"))
{
   value = input.substring(input.indexOf("<") + 1, input.indexOf(">"));
   //calculate manipulatedValue from value
   input = input.replaceFirst("<.+>", manipulatedValue);
} 
```

但在第一次迭代后，值包含`abc_d> a sample <ea1_j> input <lmk_02`. 我相信 indexOf(">") 会给出">"的第一个索引。我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:04:22.607

这是完成您正在尝试做的事情的一种稍微简单的方法：

```
String input = "This is <abc_d> a sample <ea1_j> input <lmk_02> string";
Matcher matcher = Pattern.compile("<([^>]*)>").matcher(input);
StringBuffer sb = new StringBuffer();
while(matcher.find()) {
    matcher.appendReplacement(sb, manipulateValue(matcher.group(1)));
}
matcher.appendTail(sb);
System.out.println(sb.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:09:20.737

这是`appendReplacement`and `appendTail`idiom 的一个很好的用例：

```
Pattern p = Pattern.compile("<([^>]+)>");
Matcher m = p.matcher(input);
StringBuffer out = new StringBuffer():
while(m.find()) {
  String value = m.group(1);
  // calculate manipulatedValue
  m.appendReplacement(out, Matcher.quoteReplacement(manipulatedValue));
}
m.appendTail(out); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T07:54:10.580

尝试对正则表达式使用转义字符`\\`。

# c - 链接器如何计算 .bss 部分的大小？

> ID：11447324
> 
> 赞同：1
> 
> 时间：2012-07-12T07:52:34.433
> 
> 标签：c, gcc, ld, gnu-assembler

我想知道链接器如何计算`.bss`节的大小？

我有一个带有两个变量的测试程序，一个初始化为零，另一个初始化为非零。我希望 .bss 的大小是 4 并且确实如此。

```
# cat test.c && gcc -o test.o -c test.c && ld -o test test.o && readelf -Ss test
int _start=0;
int a = 2;
......
Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 1] .data             PROGBITS         00000000006000b0  000000b0
       0000000000000004  0000000000000000  WA       0     0     4
  [ 2] .bss              NOBITS           00000000006000b4  000000b4
       0000000000000004  0000000000000000  WA       0     0     4
.....
Symbol table '.symtab' contains 11 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     6: 00000000006000b4     4 OBJECT  GLOBAL DEFAULT    2 _start
    10: 00000000006000b0     4 OBJECT  GLOBAL DEFAULT    1 a 
```

然后我添加第二个零初始化变量。这次我希望.bss的大小是8，但它是12（0xc）。

```
# cat test.c && gcc -o test.o -c test.c && ld -o test test.o && readelf -Ss test
int _start=0;
int a = 2;
int b = 0;
......
Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 1] .data             PROGBITS         00000000006000b0  000000b0
       0000000000000004  0000000000000000  WA       0     0     4
  [ 2] .bss              NOBITS           00000000006000b4  000000b4
       000000000000000c  0000000000000000  WA       0     0     4
......
Symbol table '.symtab' contains 12 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     6: 00000000006000b8     4 OBJECT  GLOBAL DEFAULT    2 b
     7: 00000000006000b4     4 OBJECT  GLOBAL DEFAULT    2 _start
    11: 00000000006000b0     4 OBJECT  GLOBAL DEFAULT    1 a 
```

我继续添加第三个零初始化变量。这次我希望 .bss 的大小是 12 并且确实如此。

```
# cat test.c && gcc -o test.o -c test.c && ld -o test test.o && readelf -Ss test
int _start=0;
int a = 2;
int b = 0;
int c = 0;
......
Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .data             PROGBITS         00000000006000b0  000000b0
       0000000000000004  0000000000000000  WA       0     0     4
  [ 2] .bss              NOBITS           00000000006000b4  000000b4
       000000000000000c  0000000000000000  WA       0     0     4
......
Symbol table '.symtab' contains 13 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     6: 00000000006000b8     4 OBJECT  GLOBAL DEFAULT    2 b
     7: 00000000006000b4     4 OBJECT  GLOBAL DEFAULT    2 _start
     8: 00000000006000bc     4 OBJECT  GLOBAL DEFAULT    2 c
    12: 00000000006000b0     4 OBJECT  GLOBAL DEFAULT    1 a 
```

我继续添加第四个零初始化变量。这次我希望.bss 的大小是16，但它是20（0x14）。

```
# cat test.c && gcc -o test.o -c test.c && ld -o test test.o && readelf -Ss test
int _start=0;
int a = 2;
int b = 0;
int c = 0;
int d = 0;
......
Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 1] .data             PROGBITS         00000000006000b0  000000b0
       0000000000000004  0000000000000000  WA       0     0     4
  [ 2] .bss              NOBITS           00000000006000b4  000000b4
       0000000000000014  0000000000000000  WA       0     0     4
......
Symbol table '.symtab' contains 14 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     6: 00000000006000b8     4 OBJECT  GLOBAL DEFAULT    2 b
     7: 00000000006000b4     4 OBJECT  GLOBAL DEFAULT    2 _start
     8: 00000000006000bc     4 OBJECT  GLOBAL DEFAULT    2 c
    10: 00000000006000c0     4 OBJECT  GLOBAL DEFAULT    2 d
    13: 00000000006000b0     4 OBJECT  GLOBAL DEFAULT    1 a 
```

有时结果符合我的预期，有时则不然。还有其他因素会影响链接器的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:57:02.543

实际上是对齐。您的示例中的大小`bss`不是您期望的 8 字节对齐，但那是因为您有 4 个字节的`data`. 如果添加另一个初始化变量，您将看到`bss`段的大小为 8 字节对齐。

# javascript - 使用 JS 进行 HTML 表单验证

> ID：11447326
> 
> 赞同：0
> 
> 时间：2012-07-12T07:52:41.067
> 
> 标签：javascript, html, arrays

我正在创建表单验证，但无法弄清楚如何使用从变量中检查 preg_match。仅检查空字段是否正常工作，但这还不够。有什么建议吗？

```
var tekst = /([a-zA-Z0-9]|[a-zA-Z0-9])/;    
var myForm = document.forms.formaa;
var prek = myForm.elements['preke'];
var kaina = myForm.elements['kaina'];
var k = myForm.elements['kiekis'];
var uzsak = myForm.elements['uzsakymas'];
if (uzsak.value == ''){
    alert("neuzpildyta");
    return false;
}
for (var i = 0; i < prek.length; i++) {
    var preke = prek[i];
    var kai = kaina[i];
    var kie = k[i];
    if (preke.value == '' || (preke.value).test(tekst) == false){
        alert("neuzpildyta");
        return false;
    }
    if (kai.value == ''){
        alert("neuzpildyta");
        return false;
    }
    if (kie.value == ''){
        alert("neuzpildyta");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:55:00.897

[您是否考虑过使用jQuery 验证之](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)类的东西，而不是滚动您自己的验证？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:01:53.667

你也可以这样使用，

> if (x==null || x=="") {
> document.getElementById('name').innerHTML="名称必须填写";
> 返回假；}

更多这一项可以帮助您进行[JavaScript 验证。](http://goo.gl/yLG8p)

# ajax - phplist api - 通过 ajax 订阅/编辑/删除用户

> ID：11447328
> 
> 赞同：3
> 
> 时间：2012-07-12T07:52:49.077
> 
> 标签：ajax, mailing-list, phplist

我有一个非常简单的基于 php 的网站。
我想添加“订阅信息”框并将其发送到一些列表管理工具。我发现[phplist](http://www.phplist.com/)是一个相当不错的。但是，我没有找到任何允许我使用 ajax 订阅用户的 api。
（我想避免phplist的页面，以避免由于不同的设计而造成的混乱，并且我希望界面是多语言的）。

当然我可以触摸代码，但我怀疑它错过了这个功能，所以我假设我只是错过了它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:21:51.767

希望您已经设法实现这一目标。我有一个不需要 AJAX 的不同用例。

无论如何，我找到了一个脚本，它试图简化将订阅者添加到您的列表中的过程。也许您可以使用它作为后端来支持您的 AJAX 请求。

这是共享脚本的线程，因为其他人发现它很有用，也适用于退订用户，甚至处理大量订阅/退订：

[http://forums.phplist.com/viewtopic.php?t=5009](http://forums.phplist.com/viewtopic.php?t=5009)

最后，请注意这段代码使用了 PEAR DB 抽象层，我可能会使用它但没有 PEAR 包。

我期待您可以通过 AJAX 和此功能做些什么。

# ruby-on-rails - 使用 ActionMailer 在选定的时间发送邮件？

> ID：11447329
> 
> 赞同：3
> 
> 时间：2012-07-12T07:52:55.567
> 
> 标签：ruby-on-rails, ruby, email, delayed-job

所以我试图让我的 rails 应用程序在用户选择的特定时间发送特定的电子邮件。基本上，用户在表单中输入电子邮件的主题和正文，并选择一个日期时间来指定他希望何时发送该电子邮件。所有这些信息都将存储在模型中。

如何让 rails 在指定的日期和时间发送电子邮件？我试过使用[delayed_job](https://github.com/collectiveidea/delayed_job) gem，但没有太大的成功。

我应该使用 Cron 作业吗？或者那里有专门适合这项任务的宝石？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:00:29.023

看看[发条宝石](https://github.com/adamwiggins/clockwork)或[每当宝石](https://github.com/javan/whenever)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:43:38.973

[Resque](https://github.com/defunkt/resque/)是个不错的选择。[这](http://railscasts.com/episodes/271-resque)是相同的railscasts。

# ajax - 将列表框选项值传输到服务器

> ID：11447336
> 
> 赞同：0
> 
> 时间：2012-07-12T07:53:28.897
> 
> 标签：ajax, asp.net-mvc-3, listbox

我有一个表单，其中包含 2 个列表框以及其他输入字段。通过单击按钮，我将内容（列表框中的选项）从一个列表框移动到另一个列表框（左右或反之亦然）。像[这个例子](http://viralpatel.net/blogs/listbox-select-all-move-left-right-up-down-javascript/)。现在我需要服务器上两个列表框的内容。在表单提交时，我只能将列表框中的选定值传输到服务器，而不是所有选项。所以我有两个选择：

1.  在从左到右传输内容的按钮的单击事件中，我进行了 Ajax 调用，将内容发送到服务器。

2.  在提交表单之前，我将列表框的所有值放在一个隐藏字段中，以便表单提交，我可以在服务器上访问它

这些哪个更适合我的情况？编辑：实现第一种方法的缺点是每次用户将内容从列表框 A 传输到 B 时，都会通过 Ajax 访问服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:07:14.287

我会在第一个页面加载时发送列表框的所有内容（如果对您可行），并使用 jquery 在列表之间移动项目（因此不再需要 ajax 调用）

并将项目发送回服务器，如下例所示：

```
@using (Html.BeginForm()) {
@Html.TextBox("movies")
@Html.TextBox("movies")
@Html.TextBox("movies")
<input type=submit />
} 
```

我们使用 Html.TextBox 帮助器创建了三个输入元素；这些都将使用名称属性的电影值创建，如下所示：

```
<input id="movies" name="movies" type="text" value="" />
<input id="movies" name="movies" type="text" value="" />
<input id="movies" name="movies" type="text" value="" /> 
```

我们可以使用示例 17-11 中所示的操作方法接收用户输入的值。清单 17-11。在一个动作方法中接收多个数据项

```
[HttpPost]
public ViewResult Movies(List<string> movies) {
... 
```

模型绑定器将找到用户提供的所有值并将它们传递给 List 中的 Movies 操作方法。binder 足够智能，可以支持不同的参数类型；我们可以选择以 string[] 甚至 IList 的形式接收数据。

来自 Apress Pro ASP.NET MVC 3 书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:01:15.730

您也可以`listbox`再次查询源以获取未在 post 方法中选择的其他值

# javascript - document.form.submit() 如何在后面的代码中收到？

> ID：11447338
> 
> 赞同：1
> 
> 时间：2012-07-12T07:53:40.553
> 
> 标签：javascript, asp.net, vb.net, submit, session-state

我有`document.form1.submit()`javascript。我想知道它是如何在后面的代码中收到的。在哪个类中，在哪个方法中？类似的东西。因为我想获取文本框中的值以将其存储在会话中。我需要一个实际的“提交”按钮才能工作吗？这真的让我很困惑。

如果我这样说：

```
function CallSubmit() {
                var thetext = document.getElementById('textbox1').value;
                document.form1.submit(thetext);
            } 
```

如果它有一个接收变量，我能否将 textbox1 的值传递给代码中的特定方法？我的意思是，我如何获得 textbox1 的值？

顺便说一句，我正在尝试在页面卸载之前执行此操作。因为我需要存储 textbox1 中的文本，以便在页面刷新后重新分配该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:09:01.273

您可以使用“表单”作为后面的代码获取回发值

```
Request.Form["textbox1"] 
```

如果您阅读此`Request.Form`内容，您将从帖子中获取所有数据

**评论**。
在 asp.net 中，我们通常避免使用直接的`Request.Form`，我们使用 asp.net 控件，所有这些控件都准备好处理 post 值。

例如，如果您使用`asp:TextBox`with`ID=textBox1`那么您阅读帖子 `textBox1.Text`
，如果您喜欢使用 the 阅读它，`Request.Form`您需要调用`Request.Form[textBox1.UniqueID]`

这`textBox1.UniqueID`是`name`html 控件上的值，以及用于回发的名称。

# java - 如何使用 icefaces 数据导出器更改 csv 中的分隔符

> ID：11447340
> 
> 赞同：1
> 
> 时间：2012-07-12T07:53:44.533
> 
> 标签：java, icefaces, icefaces-1.8, icefaces-2

我想知道如何替换由 icefaces 的数据导出器生成的 csv 文件中的分隔符。

我正在使用 icefaces 2.0-Beta1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-28T10:19:09.100

我想有点晚了，但您可以使用自定义导出器：

[http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=dataExporterCustom](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=dataExporterCustom)

有了这个，您可以根据需要自定义输出格式。

# wpf - 命令和命令参数的不同数据上下文

> ID：11447343
> 
> 赞同：2
> 
> 时间：2012-07-12T07:53:56.757
> 
> 标签：wpf, binding, command, contentcontrol, commandparameter

`Datacontext`WPF`Command`和是否可以有不同的`CommandParameter`？

```
<UserControl>
<UserControl.Resources>
    <viewmodels:ListViewGridBaseViewModel x:Key="vm" />
</UserControl.Resources>
<Grid>
    <ContentControl x:Name="currentContent" 
                    Content="{Binding Path=ListGrid}" >
        <ContentControl.ContextMenu>
            <ContextMenu >
                <MenuItem Command="{Binding Path=Save}" 
                          CommandParameter="{Binding ElementName=currentContent}"
                          DataContext="{StaticResource ResourceKey=vm}"
                          Header="Save">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource ResourceKey=Save}"
                               Height="16"
                               Width="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="{Binding Path=Revert}" 
                          DataContext="{StaticResource ResourceKey=vm}"
                          Header="Revert">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource ResourceKey=Revert}"
                               Height="16"
                               Width="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </ContextMenu>
        </ContentControl.ContextMenu>
    </ContentControl>
</Grid>
</UserControl> 
```

我希望`Binding`ListGrid 冒泡到另一个 Viewmodel 和`Command`本地 ViewModel。但`CommandParameter`应该是`ContentControl`。日志说：

```
System.Windows.Data Error: 4 : Cannot find source for binding with 
reference 'ElementName=currentContent'. BindingExpression:(no path); 
DataItem=null; target element is 'MenuItem' (Name=''); 
target property is 'CommandParameter' (type 'Object') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:03:39.660

`ContextMenu`打破了`DataContext`继承链，这就是为什么`ElementName=currentContent`找不到。

在此处查找[人工继承上下文](http://www.codeproject.com/KB/WPF/ArtificialInheritanceCxt.aspx)并使用该类`DataContextSpy`

然后执行以下操作：

```
<UserControl>
<UserControl.Resources>
    <viewmodels:ListViewGridBaseViewModel x:Key="vm" />
    <local:DataContextSpy DataContext="{Binding ElementName=currentContent}" x:Key="Spy">
</UserControl.Resources>
<Grid>
    <ContentControl x:Name="currentContent" 
                    Content="{Binding Path=ListGrid}" >
        <ContentControl.ContextMenu>
            <ContextMenu >
                <MenuItem Command="{Binding Path=Save}" 
                          CommandParameter="{Binding DataContext,Source={StaticResource Spy}}"
                          DataContext="{StaticResource ResourceKey=vm}"
                          Header="Save">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource ResourceKey=Save}"
                               Height="16"
                               Width="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="{Binding Path=Revert}" 
                          DataContext="{StaticResource ResourceKey=vm}"
                          Header="Revert">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource ResourceKey=Revert}"
                               Height="16"
                               Width="16"/>
                    </MenuItem.Icon>
                </MenuItem>
            </ContextMenu>
        </ContentControl.ContextMenu>
    </ContentControl>
</Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:17:52.700

`ContextMenu`有一个单独的`VisualTree`并且不是 UserControl 的一部分，`VisualTree`这就是`Elementname`绑定不起作用的原因。使用绑定的一个简单解决方法`ElementName`是将其添加到 UserControl 的代码隐藏中

```
NameScope.SetNameScope(currentContent, NameScope.GetNameScope(this)); 
```

或者您可以将[Enable ElementName Bindings 与 ElementSpy 一起使用](http://joshsmithonwpf.wordpress.com/2008/07/22/enable-elementname-bindings-with-elementspy/)

# php - 如何默认显示按“日期”排序的zend框架数据网格数据？

> ID：11447348
> 
> 赞同：0
> 
> 时间：2012-07-12T07:54:10.040
> 
> 标签：php, zend-framework, zfdatagrid

如何默认显示按“日期”排序的zend框架数据网格数据？当我进入页面时，我希望看到默认按时间排序的数据网格，而不是像 .../order/created_DESC/ 这样的 URL 中的参数

```
$testimonials = new Application_Model_DbTable_Testimonials();
        $source = new Bvb_Grid_Source_Zend_Table($testimonials); 
```

谢谢。

我通过传递给 datagrid $select 而不是 $object 解决了这个问题

```
$testimonials = new Application_Model_DbTable_Testimonials();
        $source = new Bvb_Grid_Source_Zend_Table($testimonials); 
```

就是现在

```
$testimonials = new Application_Model_DbTable_Testimonials();
        $testimonials->setSortOrder('created');
        $source = new Bvb_Grid_Source_Zend_Select($testimonials->getTestimonials()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:37:31.153

很难看到你的班级在做什么，因为你没有发布那个。

但是当它使用`fetchAll`() 函数时，你可以做两件事：

**选项1**

当 Grid 类中有一个 fetchAll() 调用时，您可以进行此调用：

```
$testimonialsTable->fetchAll(null, 'date')); 
```

**选项 2**

你可以在课堂上重写`fetchAll`-Method `Application_Model_DbTable_Testimonials`，当你做

```
public function fetchRow($where = null, $order = null, $offset = null)
{
    if ($order===null) : $order='date'; endif;

    return parent::fetchAll(where, $order, $offset)
} 
```

请注意，在最后一个示例中，fetchess 始终默认按日期字段排序。

# sql-server - 避免产生重复的随机数

> ID：11447350
> 
> 赞同：0
> 
> 时间：2012-07-12T07:54:12.500
> 
> 标签：sql-server, sql-server-2008

根据模块要求文件名长度为 8 个字符，为了实现前 4 个字符`DDMM`和剩余的 4 个字符，试图通过使用函数和视图从数据库中获取随机数，这与我在数据库中使用的相同我有粘贴在下面：

功能：

```
CREATE FUNCTION [dbo].[GenerateRandomNumbersLetters]
(
    @NumberOfCharacters TINYINT
)
RETURNS VARCHAR(32)
AS
BEGIN
    RETURN 
    (
        SELECT LEFT(REPLACE([NewID], '-', ''), @NumberOfCharacters)
        FROM dbo.RetrieveNewID
    );
END 
```

看法：

```
CREATE VIEW [dbo].[RetrieveNewID]
AS
    SELECT [NewID] = NEWID(); 
```

我的查询：

```
select  
   SUBSTRING(replace(convert(varchar(10), getdate(), 3), '/', ''), 1, 4) +  
   dbo.GenerateRandomNumbersLetters(4) as FileNamerandomNUM 
```

前任：`0907CCE7`

对于每一行，它将提供一个随机数，但在最近的一种情况下随机生成重复，我怎样才能避免这种情况呢，请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:43:46.963

随机数存在“值重复”的风险，特别是如果您只取随机数的前四位数字。

取而代之的是，生成序列号。要实现这一点，您可以创建一个具有结构的表

```
file_date | seq_no

Ex: 0907 | 1000
    0907 | 1001 
```

然后每次你想得到一个文件名时，针对这个表查询下一个序列号

```
select max(seq_no)+1 from <table> 
```

# android - Maven 构建 Android 应用程序 - BuildConfig

> ID：11447351
> 
> 赞同：10
> 
> 时间：2012-07-12T07:54:16.483
> 
> 标签：android, maven, maven-3, android-maven-plugin

在尝试使用 Maven 构建 Android 项目时，我认识到 maven-android-plugin 在构建时不会自动生成 BuildConfig 类。我找到了一张关于该问题的票和一个 Google Groups 线程。

问题：[http ://code.google.com/p/maven-android-plugin/issues/detail?id=275](http://code.google.com/p/maven-android-plugin/issues/detail?id=275)

谷歌组：[http ://groups.google.com/group/maven-android-developers/browse_thread/thread/cc74267bbb7baebb/4e63b710513bb535?lnk=gst&q=BuildConfig#4e63b710513bb535](http://groups.google.com/group/maven-android-developers/browse_thread/thread/cc74267bbb7baebb/4e63b710513bb535?lnk=gst&q=BuildConfig#4e63b710513bb535)

问题线程中的快速破解建议创建另一个微型 maven 项目以在构建期间使用配置文件开关设置 BuildConfig.DEBUG 变量。这将迫使我为每个小应用程序构建一个多模块项目。

Google Groups 线程中的建议对我来说听起来不错（从 SDK 执行 Ant 任务以生成 BuildConfig 类），但在深入研究 build.xml 并尝试完成这项工作后，我放弃了。

有人为 maven+android 的 BuildConfig 问题找到了实用的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T01:34:44.700

感谢 Jake Wharton 和 Manfred Moser，从 Android Maven 插件 3.3.2 开始就支持 BuildConfig 生成。

[在此处](http://code.google.com/p/maven-android-plugin/wiki/Changelog)查看 3.3.2 版本的变更日志。

# playframework - SecureSocial on Play 1.2.x 落后于 Apache

> ID：11447363
> 
> 赞同：0
> 
> 时间：2012-07-12T07:55:15.390
> 
> 标签：playframework, playframework-1.x, securesocial

我在 Play 1.2.x 安装（端口：9000）上运行 SecureSocial。通过在端口 :80 上运行的 Apache httpd 访问应用程序，然后它将转发请求。

至于 SecureSocial，请求中的 URL 现在是 localhost:9000（请参阅 参考资料`securesocial.provider.OAuth2Provider.doAuth(Map<String, Object>):111`），身份验证调用将失败。

我寻找一个聪明的解决这个问题的方法，它不涉及

*   运行 Play 不在 httpd 前面
*   黑客 SecureSocial

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T22:16:42.333

根据使用 Play Bugtracker 中提供的解决方案对[Play](https://groups.google.com/forum/?fromgroups#!topic/play-framework/pyRGcEypuYg "玩谷歌群组") [Mailinglist](https://play.lighthouseapp.com/projects/57987/tickets/1406-play-123-124-playmvcrouter-does-not-fully-support-proxied-ssl)的讨论：

将`application.conf`参数设置`XForwardedSupport`为`all`或允许的代理列表。

# mysql - MySql 选择时间戳作为日期时间

> ID：11447365
> 
> 赞同：-1
> 
> 时间：2012-07-12T07:55:22.347
> 
> 标签：mysql

如何选择时间戳作为日期格式的值（仅具有年、月和日值）？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:59:36.463

利用

```
SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(),'%Y %D %M'); 
```

为此，它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:01:25.680

试试这个：从 myTABLE 中选择 DATE(column)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:02:21.950

我认为这就是你要找的：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

```
SELECT FROM_UNIXTIME(<your timestamp>,'%Y %D %M') AS MYDATE, column1, column2 FROM table; 
```

# java - 从文件下载中写出百分比？

> ID：11447366
> 
> 赞同：0
> 
> 时间：2012-07-12T07:55:35.840
> 
> 标签：java, android, android-file

我得到了我的文件下载方法，我是从教程中做到的：

```
InputStream input;
try
{
    URL url = new URL(strURL);
    input = url.openStream();
    byte[] buffer = new byte[1500];

    File OpenGuideFolder = new File("/sdcard/MyFiles/");
    OpenGuideFolder.mkdirs();

    OutputStream output = new FileOutputStream(OpenGuideFolder.toString() + "/" + id + "_" + pos + "_normal.png");
    try
    {
        int bytesRead = 0;
        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0)
        {
            output.write(buffer, 0, bytesRead);

            for(int i =0;i<buffer.length;i++)
            {
                Log.i("buffer.length", Integer.toString(buffer.length));
            }
        }
    }
    finally
    {
        output.close();
        buffer = null;
    }
}
catch (Exception e)
{
    Log.i("Download Pictures Exception",e.toString());
} 
```

你能建议我一种获取下载文件当前百分比的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:08:44.950

您可以使用 AsyncTask 在打开连接后使用以下命令获取文件长度：

```
URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength(); 
```

并使用以下方式发布您的进度：`publishProgress(""+(int)((total*100)/lenghtOfFile));`

[您可以在此链接](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)上找到完整的教程

```
 /**
     * Background Async Task to download file
     * */
    class DownloadFileFromURL extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread
         * Show Progress Bar Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(progress_bar_type);
        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected String doInBackground(String... f_url) {
            int count;
            try {
                URL url = new URL(f_url[0]);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(), 8192);

                // Output stream to write file
                OutputStream output = new FileOutputStream("/sdcard/downloadedfile.jpg");

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress(""+(int)((total*100)/lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... progress) {
            // setting progress percentage
            pDialog.setProgress(Integer.parseInt(progress[0]));
       }

        /**
         * After completing background task
         * Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after the file was downloaded
            dismissDialog(progress_bar_type);

            // Displaying downloaded image into image view
            // Reading image path from sdcard
            String imagePath = Environment.getExternalStorageDirectory().toString() + "/downloadedfile.jpg";
            // setting downloaded into image view
            my_image.setImageDrawable(Drawable.createFromPath(imagePath));
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:03:19.300

```
URLConnection connection = url.openConnection();
connection.connect();

int length = connection.getContentLength(); 
```

将为您提供要下载的文件的大小。然后你只需要更新你下载的当前大小。

您将[在此处](https://stackoverflow.com/questions/9043683/how-to-show-progress-bar-status-by-percentage)找到更多代码。

# java - 在drools 5.4中将drl文件转换为brl

> ID：11447367
> 
> 赞同：3
> 
> 时间：2012-07-12T07:55:42.950
> 
> 标签：java, drools

嗨，我有一个`.drl`文件，我想将其转换为 .brl 并将其发送给 guvnor。我使用以下函数，但`.xml`创建的文件不正确。

```
public static String viceVersa() {

    String pathDrl ="resources" + "\\" + "rules" + "\\" + "testRule.drl";
    try {
        PackageDescr pkg = new DrlParser().parse(true, FileUtils.readFile(pathDrl));
        byte[] content = FileUtils.stringToByte(new XmlDumper().dump(pkg));
        System.out.println(new String(content));
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

这创建了 xml 文件：

```
<rule name="Active Basij">
**<rule-attribute name="dialect" value="java"/>**
<lhs>
    <pattern>
        <identifier>
            r
        </identifier>
        <fact>
            RuleFact
        </fact>
        <field-constraint>
            <field-name>honestly</field-name>
            <literal-restriction evaluator="==" value="100"/>
        </field-constraint>
        <field-constraint>
            <field-name>isWear</field-name>
            <literal-restriction evaluator="==" value="80"/>
        </field-constraint>
    </pattern>
</lhs>
***<rhs>
    r.setAnswer("This Person Is Active Basij");
    update( r );
</rhs>*** 
```

guvnor 不接受这种格式。请帮我

# jquery - 如何在 jquery mobile 中使用 window.location()？

> ID：11447368
> 
> 赞同：2
> 
> 时间：2012-07-12T07:55:43.360
> 
> 标签：jquery, jquery-mobile, window.location

如何在 jquery mobile 中使用 window.location 方法。当我使用 jquery mobile 开发应用程序时，我需要从一个 html 页面更改为需要使用 window.location() 的其他 html 页面。我知道要使用

```
 $.mobile.changePage( "page", { transition: "slide"} ); 
```

但是在这里，当使用 changePage() 方法时，某些 js 文件会出现问题。所以，我想到了 window.location() 方法。

正如我使用的代码是......

索引.html

```
<section id="previewPage" data-role="page">
  <div data-role="content" id="previewId" class="previewScreen">
    <select name="select-choice-0" id="select-choice-1" data-native-menu="false">
        <option value="email">Share via Email</option>
        <option value="bbm" data-location='bbmIntegration.html'>Share via BBM</option>
        <option value="sms">Share via SMS</option>
        <option value="facebook">Share via Facebook</option>
        <option value="twitter">Share via Twitter</option>
        <option value="google">Share via Google</option>
    </select>                       
  </div>
</section> 
```

共享屏幕.js

```
$('#select-choice-1').change(function() {
     window.location = $(this).data('location');
    //window.location = $('#select-choice-1').data('location')  
  }); 
```

当我**单击通过 BBM 共享时**，我的 html 页面需要导航到**bbmIntegration.html**页面。但是当我**在 chrome 浏览器中运行它时，当我单击通过 BBM 共享时，它显示为“找不到文件/BBM/sample/www/undefined”。**谁能帮我解决我做错的地方...

提前致谢.........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:18:33.017

```
Try this:

  $('#select-choice-1').change(function() {
    window.location = $(this).find("option:selected").data('location');

  });​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:19:15.957

目前，您的 js 正在`select`标签上寻找数据属性 - 它需要查看所选`option`标签：

```
$('#select-choice-1').change(function() {
    window.location = $(this).find('option:selected').data('location');
} 
```

# wcf - WCF 数据服务返回复杂类型

> ID：11447369
> 
> 赞同：0
> 
> 时间：2012-07-12T07:55:49.570
> 
> 标签：wcf, wcf-data-services, odata

我创建了一个 ComplexType 并在服务操作中返回它，如下所示：

```
 [WebGet]
   public IQueryable<ComplexAddressType> GetCityByZip(string zip) 
   {
      List<AddressType> normalizeAddress = NormalizeAddressProcess(new AddressType
                                                                             {
                                                                                 ZIP = zip,
                                                                             }).AddressList;
      return normalizeAddress.Select(x =>new ComplexAddressType
                        {
                            ZIP = x.zip,
                            City = x.City,
                            State = x.State
                        }).AsQueryable();
        } 
```

当我尝试通过调用来调用服务操作时`http://localhost/MyService.svc/GetCityByZip?zip='20000'`，服务操作调用起作用并且浏览器显示城市列表。

当我尝试通过调用来调用服务操作时`http://localhost/MyService.svc/GetCityByZip?zip='20000'&$top=1`，浏览器会显示一个错误页面。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:04:10.473

假设`ComplexAddressType`实际上是一个复杂类型，您不能将`$top`系统查询选项与该服务操作一起使用。如果您根据上面的评论启用详细错误，您可能会收到此错误：

```
Query options $orderby, $inlinecount, $skip and $top cannot be applied to the requested resource. 
```

为了能够`$top`与服务操作一起使用，您需要返回实体类型的集合而不是复杂类型。

你也可以在你的函数调用中引入另一个参数，这样你就可以使用如下 URL：

```
http://localhost:59803/ScratchService.svc/GetProfiles?startsWith='ABC'&top=2 
```

示例代码：

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Services;
using System.Data.Services.Common;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Web;

namespace Scratch.Web
{
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    public class ScratchService : DataService<ScratchContext>
    {
        static ScratchService()
        {
            Database.SetInitializer(new ScratchContextInitializer());
        }

        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
            config.UseVerboseErrors = true;
        }

        [WebGet]
        public IQueryable<User> GetUsers(int numUsers)
        {
            var users = new List<User>();

            for (int i = 0; i < numUsers; i++)
            {
                users.Add(new User
                              {
                                  Id = i,
                                  Password = i.ToString(),
                                  Username = i.ToString()
                              });
            }
            return users.AsQueryable();
        }

        [WebGet]
        public IQueryable<Profile> GetProfiles(string startsWith, int top)
        {
            var profiles = new List<Profile>
                            {
                                new Profile{ DisplayName = "A", Preferences = "1" },
                                new Profile{ DisplayName = "AB", Preferences = "2" },
                                new Profile{ DisplayName = "ABC", Preferences = "3" },
                                new Profile{ DisplayName = "ABCD", Preferences = "4" },
                                new Profile{ DisplayName = "ABCDE", Preferences = "5" },
                                new Profile{ DisplayName = "ABCDEF", Preferences = "6" },
                                new Profile{ DisplayName = "ABCDEFG", Preferences = "7" }
                            };

            return profiles.Where(p => p.DisplayName.StartsWith(startsWith)).Take(top).AsQueryable();
        }
    }

    public class ScratchContextInitializer : DropCreateDatabaseAlways<ScratchContext>
    {
    }

    public class ScratchContext : DbContext
    {
        public DbSet<User> Users { get; set; }
    }

    public class Profile
    {
        public string DisplayName { get; set; }
        public string Preferences { get; set; }
    }

    public class User
    {
        public int Id { get; set; }
        public string Username { get; set; }
        public string Password { get; set; }
        public Profile Profile { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:02:06.710

`GetCityByZip`当方法有 2 个参数时，最后一个代码将起作用。第一个为`zip`，第二个为`top`。在您的情况下，您的参数不一致并且 wcf 找不到方法。

# windows - 在 linux VirtualBox 和 Windows 7 之间建立网络

> ID：11447374
> 
> 赞同：4
> 
> 时间：2012-07-12T07:56:14.777
> 
> 标签：windows, linux, networking, virtualbox

我有一台 Windows 7 机器，在 VirtualBox 中安装了 Linux。我需要在两者之间建立网络连接。

是否有一些关于如何实现这一目标的教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:04:24.647

试试这个手册： [https ://www.virtualbox.org/manual/ch06.html](https://www.virtualbox.org/manual/ch06.html)

它是由 VirtualBox 编写的专用手册，应该清楚地向您解释虚拟网络功能。

# javascript - Window.print() 不采用当前 url

> ID：11447382
> 
> 赞同：0
> 
> 时间：2012-07-12T07:56:43.983
> 
> 标签：javascript, printing, window

我正在使用以下代码。根据此代码，将打开新窗口，并给出 url 的来源。但是在打印时，它显示 about:blank 正在打印。页面加载正确。在加载之前，页面url也是about:blank。但它很快就会更改为给定的网址。

```
var url="http://localhost:8080/hiring/docs/Keneth%20_1340800082258/Keneth%20_resume_1340800082258.pdf";
var printwindow = window.open(url, '_blank', 'fullScreen=yes');
//setTimeout('2000');
printwindow.focus();
printwindow.print(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:16:35.107

你有没有尝试过：

```
printwindow.onload = function() {
  printwindow.focus();
  printwindow.print();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:10:07.663

我想`window.print()`在页面实际加载之前运行，因为执行代码的下一个命令需要微秒，但页面不会在微秒内加载，这就是它打印空白页的原因，尝试在文档加载事件后打印它。

**使固定**

我注意到您刚才尝试打印 PDF，我不认为仅仅因为您可以在浏览器中看到它就可以打印 PDF 文件。它只是一个 Adob​​e Reader 插件，出于同样的原因，您无法在页面上打印 Flash 电影

# matlab - 如何从 nx3 矩阵 (n>m) 中删除 mx3 矩阵的行？

> ID：11447383
> 
> 赞同：2
> 
> 时间：2012-07-12T07:56:50.203
> 
> 标签：matlab, matrix

在 matlab 中，如果一个 m × 3 矩阵的行都存在于一个更大的 n × 3 矩阵中，我如何创建一个 (nm) × 3 矩阵，它不包含第一个 (m × 3) 矩阵的行？

例如，如果第一个矩阵是 [1 4 6] 而第二个矩阵是 [1 2 3; 1 4 6; 8 7 4]，我怎样才能得出矩阵：[1 2 3;8 7 4]？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:08:47.770

这是[ismember](http://www.mathworks.nl/help/techdoc/ref/ismember.html)的工作，有以下`'rows'`选项：

```
a = [1 4 6];
b = [1 2 3; 1 4 6; 8 7 4];

eq_rows = ismember(b,a,'rows');
result = b(~eq_rows,:) 
```

# android - 使用 JSON 对象填充 JSON 数组

> ID：11447387
> 
> 赞同：-1
> 
> 时间：2012-07-12T07:57:05.950
> 
> 标签：android, json

在下面的代码中，我试图用 JSON 对象（书和相机）填充 JSON 数组。

```
 [  {
  "camera":{
     "picture":"http:\/\/img7.flixcart.com\/image\-imacyb5emj5yztet.jpeg",
     "model":"Lumix DMC-FP3 Point & Shoot",
     "make":"Panasonic",
     "price":5830
  }
 },
{
  "camera":{
     "picture":"http:\/\/sp.sony-europe.com\/da.jpeg",
     "model":"Digital Still Camera - H Series - DSC-HX200V",
     "make":"Sony",
     "price":510
  }
 },
 {
  "book":{
     "description":"What is self, and how can a",
     "authors":"Douglas R Hofstadter",
     "price":650,
     "id":40724766,
     "title":"G\u00f6del, Escher, Bach: an Eternal Golden Braid"
  }
  },
 {
  "camera":{
     "picture":"http:\/\/www.usa.canon.com\/60d_586x186.gif",
     "model":"Digital SLR Camera EOS 60D",
     "make":"Canon",
     "price":999
  }
  },
   {
  "book":{
     "description":"Tgdfgf fgfg ",
     "authors":"Harold Abelson and Gerald Jay Sussman with Julie Sussman",
     "price":469,
     "id":51087,
     "title":"Structure and Interpretation of Computer Programs"
  }
},

]

public void getDetalFromServer() {
        // TODO Auto-generated method stub

        String  URL="xyz.php";
        HttpClient client= new DefaultHttpClient();
        HttpPost post=new HttpPost(URL);

        try {

            HttpResponse response =client.execute(post);
            HttpEntity getResEntity=response.getEntity();
            String result="";
            if(getResEntity!=null){
                result=EntityUtils.toString(getResEntity);
                System.out.println("result from server: "+result);

                bookDescription=new ArrayList<String>();
                bookAuthors=new ArrayList<String>();
                bookPrice=new ArrayList<String>();
                bookID=new ArrayList<String>();
                bookTitle=new ArrayList<String>();

                responseArray=new JSONArray(result);

                for(int i=0;i<responseArray.length();i++){

                    JSONObject bookObject=(JSONObject) responseArray.getJSONObject(i);
                                            bookDescription.add(bookObject.get("description").toString());
                                            bookAuthors.add(bookObject.get("authors").toString());                                              bookPrice.add(bookObject.get("price").toString()); 
```

bookID.add(bookObject.get("id").toString()); bookTitle.add(bookObject.get("title").toString());

```
 }                                       
            }

        } catch (Exception e) {
            // TODO: handle exception
        }
    } 
```

使用这段代码，我可以得到响应的第一个对象。现在我只是想从响应中解析 Music 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:49:43.707

```
 responseArray=new JSONArray(result);
              JSONObject bookObject=null;
               JSONObject json_user1=null;
               JSONObject json_user2=null;
            for(int i=0;i<responseArray.length();i++){

                bookObject= responseArray.getJSONObject(i);
                 if (bookObject.has("book")){
                json_user1 = bookObject.getJSONObject("book");   
                 bookDescription.add(json_user1.getString("description").toString());  
                  bookAuthors.add(json_user1.getString("authors").toString()); 
             }
                else if(bookObject.has("camera")){
                     json_user2 = bookObject.getJSONObject("camera"); 
                     /** Add Camera data in the lists here same as done for book */
               }
          } 
```

试试这个......在你的 json 数组中，你已经放置了 json 对象。因此，您需要先从数组中检索 json 对象，例如 book 和 camera，然后从 book 对象中获取描述和所有... :)

# android - 如何为 ExpandableListView 的子项赋值

> ID：11447388
> 
> 赞同：1
> 
> 时间：2012-07-12T07:57:22.113
> 
> 标签：android, expandablelistview, arrays

很多小时以来，我都在尝试将值分配给 Expandablelistview 的子项，但结果不理想。

我正在从 SQLite 数据库中获取值。然后我将它们转换为数组字符串。

然后我将这些值放入可扩展列表视图的子项中。这样：

```
respuestas = new String[charSequenceItems.length][1];
    for (int i = 0; i < charSequenceItems.length; i++) {
                    //The group is 0 and childs are many as charSequenceItems length
        respuestas[0][i] = charSequenceItems[i];
    } 
```

我得到这个错误：

```
java.lang.ArrayIndexOutOfBoundsException 
```

但是当我以这种方式这样做时（我将 charSequenceItems 的值放入可扩展列表组而不是孩子）：

```
respuestas = new String[charSequenceItems.length][1];
    for (int i = 0; i < charSequenceItems.length; i++) {
                    //The values of charSequenceItems are assigned to groups and not childs.
        respuestas[i][0] = charSequenceItems[i];
    } 
```

它可以正常工作。

我已经尝试了很多将价值观赋予孩子的组合，但没有一个奏效。

我究竟做错了什么？

提前致谢。

这是我的全部代码：

```
public class Resumen extends ExpandableListActivity {
String[] charSequenceItems;
private MyExpandableListAdapter mAdapter;
private String[] preguntas = { "Preguntas contrato", "Especies detectadas",
        "Medidas estructurales", "Medidas higiénico sanitarias",
        "Medidas sobre hábitos", "Medidas de control directo", "Productos" };
private String productos[];
private String[][] respuestas;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.resumenlista);

    List<String> uGraduateNamesList = new ArrayList<String>();
    AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query("ProductosTemporal", null, null,
            null, null, null, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {

        String descripcionproducto = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.descripcionproducto));

        uGraduateNamesList.add(descripcionproducto);

        charSequenceItems = uGraduateNamesList
                .toArray(new String[uGraduateNamesList.size()]);

    }

    cursor.close();
    sqliteDatabase.close();

    respuestas = new String[charSequenceItems.length][1];
    for (int i = 0; i < charSequenceItems.length; i++) {
        respuestas[3][0] = charSequenceItems[1];
    }

    // Set up our adapter
    mAdapter = new MyExpandableListAdapter();
    setListAdapter(mAdapter);
}

public class MyExpandableListAdapter extends BaseExpandableListAdapter {

    public Object getChild(int groupPosition, int childPosition) {
        return respuestas[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        return respuestas[groupPosition].length;
    }

    public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.WRAP_CONTENT);

        TextView textView = new TextView(Resumen.this);

        textView.setLayoutParams(lp);

        textView.setPadding(60, 5, 0, 5);
        textView.setTextAppearance(getBaseContext(), R.style.TitleText);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        // Including a custom view for the child image and text
        View inflatedView = View.inflate(getApplicationContext(),
                R.layout.nombrefilaresumen, null);
        inflatedView.setPadding(50, 0, 0, 0);
        TextView textView = (TextView) inflatedView
                .findViewById(R.id.textView1);

        // lets set up a custom font

        textView.setTextSize(17);
        textView.setText(getChild(groupPosition, childPosition).toString());
        return inflatedView;
    }

    public Object getGroup(int groupPosition) {
        return preguntas[groupPosition];
    }

    public int getGroupCount() {
        return preguntas.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

}
} 
```

# java - ajax - 为什么 jquery 用空格（“”）替换“+”？

> ID：11447391
> 
> 赞同：6
> 
> 时间：2012-07-12T07:57:32.543
> 
> 标签：java, jquery, ajax

我这里有问题。当我使用 ajax 将包含“+”的参数传递给我的控制器时，它被一个空格替换。

`Tom+Jerry+Garfield`例如，我将使用 ajax传递 value = 。当我在控制器中使用 System.out.println() 时，它会显示`Tom Jerry Garfield`. 我尝试使用其他特殊字符我似乎没有问题。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T08:01:26.113

在某些`GET`和`POST`请求中（很可能在 URL 中，或通过表单），空格在传递到服务器之前被编码为“+”（加号）符号。如果您执行正常`GET`请求，您会看到此行为 - 您会看到类似`google.com?q=test+example`如果您想通过 ajax GET/POST 请求传递一个加号，您需要对其进行“urlencode”。`+`的 URL编码值为`%2B`。

另请注意：

可以使用 javascript encodeURIComponent() 函数，如回答：

[AJAX POST 和加号 (+) -- 如何编码？](https://stackoverflow.com/questions/1373414/ajax-post-and-plus-sign-how-to-encode)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T08:02:37.127

`+`在 url 解码后被解码为空格。如果要通过`+`，则需要对其进行编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T08:03:35.587

当我们将值传递给控制器​​时，有一个模型绑定器位于请求之间。当进行 ajax 调用时，url 和请求被编码。url 解码形式的“”（空格）字符编码为“+”。
另一方面，模型绑定器解码请求并提取参数并将其提供给控制器，因此 "+" 被转换为 " " 。但这里的问题是为什么要传递“+”作为分隔符？

# c++ - C ++如何在不复制的情况下将元素存储在双端队列中

> ID：11447395
> 
> 赞同：0
> 
> 时间：2012-07-12T07:57:40.927
> 
> 标签：c++, pointers, deque

我想将指针存储在如下所示的双端队列中：

`deque<ofImage *> pointerDeque;`

```
void testApp::iTakeAPointer(ofImage * &pointer) {
     cout << "iTakeAPointer  " << &pointer << endl;
     pointerDeque.push_back(pointer);
     cout << "pointerDeque.back() " << pointerDeque.back() << endl;
} 
```

当我运行它时，我得到（在按键上调用函数）：

```
keyPressed 0xbffff240
iTakeAPointer  0xbffff240
pointerDeque.back() 0x9f2e08 
```

因为 deque.push_back() 创建了一个副本。我的问题是：如何在双端队列中获取参考，在本例中为 0xbffff240？

编辑：

谢谢。有时你只见树木不见森林。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:00:16.893

您的诊断不正确。这是打印指针的地址，而不是指针持有的地址（这是你想要的）：

```
cout << "iTakeAPointer  " << &pointer << endl; 
```

`&pointer`是类型`ofImage**`。只需使用`pointer`：

```
cout << "iTakeAPointer  " << pointer << endl; 
```

* * *

`ofImage`请注意，其中包含的实例必须在`pointerDeque`其生命周期内都存在。如果`pointerDeque`现在拥有这些`ofImage`实例，则考虑使用`std::unique_ptr`. 如果它不拥有它，请考虑使用`std::shared_ptr`（或`boost::shared_ptr`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:59:21.590

```
cout << "iTakeAPointer" << 指针 << endl;

```

打印指针本身，而不是它的地址！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:00:06.363

```
void testApp::iTakeAPointer(ofImage * &pointer) { 
```

改成

```
void testApp::iTakeAPointer(ofImage * pointer) { // remove ref 
```

# ios - 为什么我不能为我的 iOS 应用申请促销代码？

> ID：11447400
> 
> 赞同：2
> 
> 时间：2012-07-12T07:58:06.490
> 
> 标签：ios, app-store-connect, promotion-code

Apple 的常见问题解答指出：

> **为什么我看不到我的应用程序的促销代码按钮？**
> 只有具有法律角色的 iTunes Connect 用户才能访问促销代码按钮并请求促销代码。
> 
> 如果您以法律角色登录 iTunes 连接帐户，并且您的应用程序的促销代码按钮仍未出现，则该应用程序可能未获批准。促销代码按钮只会显示在已批准且状态为可供销售的应用程序中。

问题是所有这些标准都得到满足，但我没有看到促销代码按钮：

*   我正在使用具有*Legal*角色的 iTunes Connect 用户帐户。
*   该应用程序已获得批准。它在全球[的 App Store 中](http://itunes.apple.com/app/audiopad/id534105189?mt=8)提供。

**如何获得此促销代码按钮？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:37:29.633

我以为按钮会在其中（标记为红色），但我在版本详细信息中找到了它（绿色箭头）：

![在此处输入图像描述](../Images/2ee43bb98a006b99dd4c0a904eaac859.png)

......就是这样：
![在此处输入图像描述](../Images/72b6d4d661356ff12116f251cf5ed5a1.png)

现在我觉得自己很傻，但更聪明！

# php - 单页结帐始终使用自定义步骤重定向到购物车

> ID：11447401
> 
> 赞同：1
> 
> 时间：2012-07-12T07:58:08.803
> 
> 标签：php, javascript, magento

我在为 magento onepage checkout 创建自定义步骤时遇到问题。教程链接：[http](http://www.excellencemagentoblog.com/magento-onestep-checkout-add-step) ://www.excellencemagentoblog.com/magento-onestep-checkout-add-step 。问题是，当我单击自定义步骤上的“继续”按钮时，它总是重定向回购物车页面。寻求帮助。任何建议如何调试重定向？或如何查看问题出在哪里。我检查了日志文件，里面没有说什么。从哪里开始寻找问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:04:22.583

要检查 firebug 中的 ajax 调用，请单击“Net”选项卡。你的新步骤出了点问题，这就是它失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:45:47.170

尝试调试单击“继续”时进行的 ajax 调用的输出。您可能会遇到一些异常指示您的代码被 OPC 缓存。如果是这种情况，您应该会看到一个指示重定向作为 ajax 响应的 Json。

# jsp - 如何在 Web 项目中布局 CSS Web 目录

> ID：11447403
> 
> 赞同：1
> 
> 时间：2012-07-12T07:58:19.127
> 
> 标签：jsp, css, web

眼下，我想做一个网页界面，可以从一些其他的网站例如 translate.google.com 或 bbc.com 获得。我使用firebug获取页面中元素的css分布（css类，div）（如按钮，div，文本框...）

但是，目前我只将页面的 css 保存到一个名为 index.css 的文件中。当 css 类的数量很大并且它们来自多个页面时，特别是当我想在特定页面中找到 css 时（例如，当我想为按钮找到 css 时，这种存储方式给我带来了很多困难来自谷歌）。当为其他 web 项目设计时，我不能在这里重用 css。

我期待看到一些布局css目录的方法，有经验的聪明人找到一种方法，允许在另一个web项目中重用css。

我正在使用 JSP 开发 Web，使用 JSF 2.0 框架和 NetBeans 7.1.2 编辑器。

感谢您查看我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:04:53.590

我通常将我的 Web 应用程序分成几个文件，例如 navbar.jsp、header.jsp、footer.jsp，每个文件都链接到其特定的 css 文件：navbar.css、header.css 和 footer.css。然后在每个页面中包含这些 jsp 文件。

我不确定这是否是标准方式，但我认为它适用于我的应用程序。希望能帮助到你。

# java - 如何处理大于 Float.MAX_VALUE 的值的浮点值输入

> ID：11447404
> 
> 赞同：0
> 
> 时间：2012-07-12T07:58:19.927
> 
> 标签：java, java-6

我有一个将数字作为字符串输入的 api，我需要获取数字的浮点值。我目前使用 Float.ParseFloat 方法来获取我的字符串数字的浮点值。

根据[Float.ParseFloat 的 java 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)，它没有提到输入大于 Float.MAX_VALUE 的任何内容。

我正在考虑这样做的一种方法是检查输入字符串的长度是否大于 Float.MAX_VALUE 的长度。

请建议我如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:12:35.163

尽管 javadoc 没有说清楚，但当我测试它时，一个太大的字符串的 parseFloat 只会产生一个“无穷大”的浮点数。您可以在创建后使用 isInfinite() 方法来检查值。

在这里使用 BigDecimal 之类的东西可能是一个更安全的选择，特别是如果您将对您的值执行任何算术运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:08:57.747

*   您可以使用更高的精度。尝试双精度或 BigDecimal。还有一些开放的任意精度库。
    *   在这里您可以找到每种 IEEE 754 格式可以容纳多少：[http](http://en.wikipedia.org/wiki/IEEE_754-2008) ://en.wikipedia.org/wiki/IEEE_754-2008 。浮动将接近 1.234567*10^38
*   如果您无法正确解析它（例如，如果有效数字太多或指数太大：1.23456789012345e5000），您将无法将其保存在单精度浮点数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:12:01.037

指数剪辑到最大指数值。请参阅[来源](http://www.docjar.com/html/api/sun/misc/FloatingDecimal.java.html)，第 1197 行。

也许检查您的应用程序的一些最大有用价值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:13:17.490

如果数字太大，则结果将设置为 Float.POSITIVE_INFINITY，这是 IEEE FP 算术规则所要求的，并且如 10 秒测试所示。

# jquery-mobile - 寻找兼容 PhoneGap 的 jQuery 移动图像幻灯片

> ID：11447407
> 
> 赞同：8
> 
> 时间：2012-07-12T07:58:51.233
> 
> 标签：jquery-mobile, cordova, slideshow

我正在寻找与PhoneGap 兼容的jQuery Mobile 图像幻灯片。

我查看了这个：[http](http://www.photoswipe.com) ://www.photoswipe.com ，但似乎没有一个活跃的社区围绕它，例如我注册的问题从未得到回答。
我也看过这个：[http](http://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/) ://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/ 但它使用了外部 XML 文件，我不这样做'不想为我要显示的每个幻灯片编写一个 XML 文件。

现在，是否有经过验证的与 PhoneGap 兼容的 jQuery Mobile 图像幻灯片？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-12T08:06:50.603

你可以去[http://www.photoswipe.com/](http://www.photoswipe.com/)这是最好的。人们已经成功地将它与 jQuery Mobile 一起使用。

你也可以试试[http://swipejs.com/](http://swipejs.com/)

# android - 我的 android 应用程序中的 java.lang.OutOfMemoryError

> ID：11447409
> 
> 赞同：0
> 
> 时间：2012-07-12T07:58:57.550
> 
> 标签：android, android-widget, out-of-memory

我有 18 张图像在我和应用程序中作为堆栈相互重叠时会创建一朵花。所有图像都添加到 XML 文件中的活动中`android:src:'@drawable/blabla..'`......但是当我运行我的应用程序时，它返回一个错误`java.lang.OutOfMemoryError`。请帮助我......我不知道如何解决这个问题。谢谢......

```
public class PapatyaFaliActivity extends Activity {
     private int[] startLeafID={R.id.imag,R.id.birstart,R.id.ikistart,R.id.ucstart,R.id.dortstart,R.id.besstart,R.id.altistart,R.id.yedistart,
        R.id.sekizstart,R.id.dokuzstart,R.id.onstart,R.id.onbirstart,R.id.onikistart,R.id.onucstart,R.id.ondortstart,R.id.onbesstart,R.id.onaltistart};
    private ImageView[] leafstart=new ImageView[17];
    private int[] leafResouseID={R.drawable.papatya_orta,R.drawable.leaf_1,R.drawable.leaf_2,R.drawable.leaf_3,R.drawable.leaf_4,R.drawable.leaf_5,R.drawable.leaf_6,
        R.drawable.leaf_7,R.drawable.leaf_8,R.drawable.leaf_9,R.drawable.leaf_10,R.drawable.leaf_11,R.drawable.leaf_12,R.drawable.leaf_13,
        R.drawable.leaf_14,R.drawable.leaf_15,R.drawable.leaf_16};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        for(int i=0;i<17;i++){
            leafstart[i]=(ImageView) findViewById(startLeafID[i]);
        }
        for(int i=0;i<17;i++){
            leafstart[i].setImageResource(leafResouseID[i]);
        }

        Thread timerThread=new Thread(){
            @Override
            public void run() {
                try {
                    sleep(2000);

                } catch (Exception e) {
                    e.printStackTrace();
                }finally{
                    Intent menuIntent=new Intent(getBaseContext(),MenuFrame.class);
                    startActivity(menuIntent);
                }
            }

        };
        timerThread.start();
    }
    @Override
    protected void onPause() {
        super.onPause();
        for(int i=0;i<17;i++){
            leafstart[i].setImageResource((Integer) null);
        }
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:27:39.300

尝试从代码中读取 18 位图。将位图放在 res/drawable-hdpi 文件夹中。（不同的图像质量有不同的文件夹）。在代码中设置位图字段：

```
Bitmap alpha;
Bitmap foo; 
```

现在在 onResume() 中初始化位图：

```
Options options = new Options();
alpha = BitmapFactory.decodeResource(game.getResources(), R.drawable.youBitmapName, options);
foo = BitmapFactory.decodeResource(game.getResources(), R.drawable.youBitmapName2, options); 
```

> 选项将使您能够下采样。（我不确定您的图像有多大，但您可能还想使用缩放方法）。

在 onPause 中，通过调用清理资源：

```
alpha.recycle();
alpha = null;
foo.recycle();
foo = null; 
```

一旦调用 onResume() 方法，位图就会重新初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:23:23.130

18 张图片这不是一个大数字。如果你有 OutOfMemoryError 这意味着你的图像太大了。最简单和最好的方法是将这些图像的分辨率调整（降低）到您真正需要的大小。

如果出于某种奇怪的原因您需要高分辨率的图像，那么您应该使用微缩模型以防它们以小比例显示，因此一次只能以全分辨率显示一两个图像。要根据详细信息级别更改可绘制项目，请使用[ImageView.setImageLevel](http://developer.android.com/reference/android/widget/ImageView.html#setImageLevel%28int%29)（更改详细信息级别）并将资源定义为[LevelListDrawable](http://developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html)。

在*onPause*内调用*完成*是非常糟糕的主意！

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:10:49.800

在创建模拟器时，增加硬件设置下的“VM 应用程序堆大小”和“内存”。这有望解决您的问题。*

# php - 我所有 HTML 文件中的一个脚本，该脚本动态转到同一文件夹中的下一个/上一个 HTML 页面

> ID：11447410
> 
> 赞同：1
> 
> 时间：2012-07-12T07:59:00.903
> 
> 标签：php, javascript, jquery, perl, jquery-ui

嗨，我在一个文件夹中有 2000 个 html 文件，它们的名称如下所示：

01_001.html
01_002.html
01_003.html
01_004.html
02_001.html
02_002.html
02_003.html
........
33_001.html
33_002.html
33_003.html
...... ........
33_123.html

我想为所有 2000 个 HTML 文件添加一个链接/脚本，这些文件将动态转到同一文件夹中的下一个/上一个 HTML 页面

我知道如何在 PERL 中添加它，但是这种链接/脚本在 JavaScript/jQuery 中应该是什么样的

我试过这个脚本：

```
<a href="#" onClick="movePrv();">Previous</a> end <a href="#" onClick="moveNext();">Next</a> 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:58:12.313

PHP 中的解决方案可能如下所示：

```
<?php
$file = basename(__FILE__);
$chap = substr($file, 0, 2);
$cat = substr($file, 3, 3);
$prevFile = sprintf("%1$02d_%2$03d.php", $chap, ($cat-1));
$nextFile = sprintf("%1$02d_%2$03d.php", $chap, ($cat+1));
echo($prevFile);
echo($nextFile);

$isFirst = ($cat == "000");
$isLast = !file_exists($nextFile);
?> 
```

使用变量`$nextFile`和`$prevFile`创建链接。您可能还想检查当前文件是一章中的第一个还是最后一个，然后不显示上一个或下一个链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:56:30.927

我假设使用默认的 Perl 排序会使文件名按正确的顺序排列，这对于提供的示例数据肯定足够了。如果没有，请查看[Sort::Naturally](http://p3rl.org/Sort%3a%3aNaturally)。

我假设每个文件都包含字符序列`</head`，表示 HTML 标头的结尾。我之前插入了[链接关系](http://www.w3.org/TR/html4/struct/links.html#h-12.1.2)。对于高度不规则的标记，需要一个 HTML 解析器，例如[Web::Query](http://p3rl.org/Web%3a%3aQuery)。

该代码将以环/Ouroboros 方式链接所有文件。数组索引`-1` [DTRT](http://catb.org/jargon/html/D/DWIM.html)和指向最后一个数组元素。

未经测试的代码：

```
use 5.012;  # for "each @array"
use File::Slurp qw(read_file write_file);

my @order = sort qw(
    01_001.html
    01_002.html
    01_003.html
    01_004.html
    02_001.html
    02_002.html
    02_003.html
    33_001.html
    33_002.html
    33_003.html
    33_123.html
);
while (my ($i, $curr_file) = each @order) {
    my $next_file = $order[$i + 1];
    my $prev_file = $order[$i - 1];
    my $content = read_file $curr_file, { binmode => ':raw' };
    $content =~ s
        {</head}
        {
            <link rel="next" href="$next_file">
            <link rel="prev" href="$prev_file">
            </head
        };
    write_file $curr_file, {binmode => ':raw'}, $content;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T08:10:31.140

创建一些服务器端 PERL 脚本以返回下一个/上一个文件名。在 Javascript 中，您可以使用 AJAX 方法获取文件的下一个或上一个文件名，然后重定向。我认为这是您拥有的可行且最简单的选择。

# session - JAX-RS/Restfull - API 和会话管理

> ID：11447421
> 
> 赞同：1
> 
> 时间：2012-07-12T08:00:06.867
> 
> 标签：session, rest, jax-rs, session-cookies, restful-architecture

尽管 jax rs 休息服务强制每个请求创建一个新的资源实例，但在有限的时间内为我的休息 Web 服务保留会话信息是一个坏主意/坏习惯吗？

# c++ - 声明时的默认值

> ID：11447431
> 
> 赞同：0
> 
> 时间：2012-07-12T08:00:43.183
> 
> 标签：c++, templates

有没有办法在声明时在类声明中声明对象的值（我对`int`/感兴趣）？`double`像这样的东西：

```
class MyClass
{
   MyInt<1> my_int;
}; 
```

有没有实现这个的图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:03:36.827

在 C++11 中，您可以在类定义中提供默认初始值设定项：

```
struct Foo
{
    int a = 11;

    Foo() = default;   // still a trivial class :-)
}; 
```

在以前，您必须使用构造函数初始化程序：

```
struct Bar
{
    int b;
    Bar() : b(11) { }  // non-trivial constructor :-(
}; 
```

用法：

```
Foo x;
Bar y;
assert(x.a == 11 && y.b == 11); 
```

* * *

也许您会发现@Msalters 的解决方案很有用：

```
template <typename T, T InitVal>
struct InitializedType
{
    typedef T type;
    static type const initial_value = InitVal;  // with restrictions

    type &       operator()       { return x; }
    type const & operator() const { return x; }

    InitializedType() : x(Initval) { }

private:
    type x;
}; 
```

现在您可以添加`InitializedType<int, 11> n;`以获取看起来像 an`int`但以 value 开头的东西`11`。

# event-handling - dojox gfx：形状超出其他形状的事件处理程序

> ID：11447432
> 
> 赞同：0
> 
> 时间：2012-07-12T08:00:49.223
> 
> 标签：event-handling, dojo, dojox.gfx

我在 dojox gfx 中的事件处理有问题。

考虑以下代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Example</title>
    <!-- load Dojo -->
    <script>
        dojoConfig = {
        async: true,
        gfxRenderer: "svg,silverlight,vml" // svg gets priority
    };
    </script>
    <script src="dojo/dojo.js"></script>
</head>
<body>
<script>
require(["dojox/gfx","dojox/gfx/Moveable","dojo/domReady!","dojox/gfx/fx"],function(gfx,Moveable,dom,gfxFx) {
    var surface = gfx.createSurface("surfaceElement", 400, 400);
    var rect = surface.createRect({ x: 30, y: 30, width: 100, height: 100 }).setFill('blue');
    rect.connect('onclick',function(e) {
        alert('first')
    });
    var otherRect = surface.createRect({ x: 30, y: 30, width: 100, height: 50 }).setFill('red');
}); 
</script>
<!-- DOM element which will become the surface -->
<div id="surfaceElement"></div>
</body>
</html> 
```

当我点击红色矩形时，有没有办法处理蓝色矩形的事件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:28:14.677

只需将第二个矩形创建移动到事件侦听器前面，然后通过变量引用它：

```
require(["dojox/gfx","dojox/gfx/Moveable","dojo/domReady!","dojox/gfx/fx"],function(gfx,Moveable,dom,gfxFx) {
    var surface = gfx.createSurface("surfaceElement", 400, 400);
    var rect = surface.createRect({ x: 30, y: 30, width: 100, height: 100 }).setFill('blue');
    var otherRect = surface.createRect({ x: 30, y: 30, width: 100, height: 50 }).setFill('red');
    rect.connect('onclick',function(e) {
        // otherRect is available here
        console.log(otherRect);
    });
}); 
```

# vb.net - 如何在运行时从 mysqldatabase 获取第二行？

> ID：11447434
> 
> 赞同：0
> 
> 时间：2012-07-12T08:00:52.310
> 
> 标签：vb.net

```
Private Sub btn_ok_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_ok.Click
    mysqlconn.Open()
    cmd.CommandText = "select *  from login "
    cmd.Connection = mysqlconn
    dr = cmd.ExecuteReader
    dr.Read()

    If txtuser.Text = "" And txt_password.Text = "" Then
        MsgBox("Please enter user name and password", MsgBoxStyle.Information, "Login form")
    Else
        If txtuser.Text = "" Then
            MsgBox("Please select user name", MsgBoxStyle.Information, "Login form")
        Else
            If txt_password.Text = "" Then
                MsgBox("Please enter password", MsgBoxStyle.Information, "Login form")
                'If (dr.FieldCount > 0) Then

                'Dim i As Integer = dr(1)
                ' For i = 1 To dr.FieldCount

                'user = dr("user").ToString
                ' password = dr("password").ToString
            ElseIf ((txtuser.Text = '" & txt_username.text & "') And (txt_password.Text = '" & txt_password.text & "')) Then
          form2.Show()

            Else : MsgBox("Password missmatch.", vbCritical, "Invalid password")
            End If
        End If
        End If
    dr.Close()

    cmd.Dispose()

    mysqlconn.Close()
    mysqlconn.Dispose()

End Sub 
```

我有一个表登录。用户名和密码是两列。我试图从上面代码中的登录表中获取应用程序中的用户名和密码，但我无法从登录表中获取第二行条目，因为我有两个 rowrs(1) 用户名=abc,passowrd=abc 2) 用户名​​=xyz,密码=xyz) 我如何在运行时获得第二个登录条目？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:20:09.873

If your aim is to check the couple (username, password), well, search the couple in the table and not in the DataReader. The only assumption here is that the couple (username, password) is unique in the login table.

In this case, use two parameters in the query:

```
cmd.CommandText = "SELECT * FROM login WHERE user = @username AND password = @password"
cmd.Parameters.Add(new SqlParameter("username", username))
cmd.Parameters.Add(new SqlParameter("password", password))

'then execute and check the results:
dr = cmd.ExecuteReader()
if dr.Read() then
  'login successful
else
  'login failed
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:15:54.110

您可以使用 a`DataTable`来保存所有行，也可以使用[`DataReader.Read`](http://msdn.microsoft.com/de-de/library/microsoft.visualstudio.data.datareader.read.aspx)将阅读器推进到下一条记录。

1.  `DataTable`

    ```
    Dim tblUsers = New DataTable
    Using con = New MySql.Data.MySqlClient.MySqlConnection(conString)
        Using da = New MySql.Data.MySqlClient.MySqlDataAdapter("select *  from login", con)
            da.Fill(tblUsers)
        End Using
    End Using

    If tblUsers.Rows.Count > 1 Then
        Dim user = tblUsers.Rows(1).Field(Of String)("User")
        Dim password = tblUsers.Rows(1).Field(Of String)("Password")
    End If 
    ```

2.  数据读取器：

    ```
    Using con = New MySql.Data.MySqlClient.MySqlConnection(conString)
        Using cmd = New MySql.Data.MySqlClient.MySqlCommand("select *  from login", con)
            Using reader = cmd.ExecuteReader()
                If reader.Read Then
                    ' first user '
                    If reader.Read Then
                        ' second user '
                        Dim user = reader.GetString("User")
                        Dim password = reader.GetString("Password")
                    End If
                End If
            End Using
        End Using
    End Using 
    ```

# android - Android，如何发送 HTML 电子邮件并强制 Android 通过 G-Mail 而不是其他应用程序发送它？

> ID：11447445
> 
> 赞同：17
> 
> 时间：2012-07-12T08:01:36.227
> 
> 标签：android, email, android-intent, send

我想通过我的应用程序发送电子邮件。我需要通过 G-Mail 发送基于 HTML 的电子邮件。我发现以下解决方案各有利弊。

1）使用意图（Intent.ACTION_SEND）。这是一种非常简单的方法，我可以看到我的 HTML 格式的正文，但问题是当我点击“发送电子邮件”按钮时，会弹出很多应用程序，如 Facebook 和 Google+，这些都是无用的，我不应该在该列表中显示它. 这是它的代码：

```
String html = "<!DOCTYPE html><html><body><a href=\"http://www.w3schools.com\" target=\"_blank\">Visit W3Schools.com!</a>" + "<p>If you set the target attribute to \"_blank\", the link will open in a new browser window/tab.</p></body></html>";

Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_EMAIL, new String[] {"MY EMAIL ADDRESS"});
intent.putExtra(Intent.EXTRA_SUBJECT, "subject here");
intent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(html));
startActivity(Intent.createChooser(intent, "Send email...")); 
```

![在此处输入图像描述](../Images/52dae58e666c95879257549387f1d96b.png) ![在此处输入图像描述](../Images/9ce17b77be59c8ccee2c70e276b1ff11.png)

2）使用意图（Intent.ACTION_SENDTO）。这种方式过滤无用的应用程序并只显示邮件客户端。但它不会在 gmail 客户端中以 HTML 格式显示我的电子邮件。当我发送电子邮件时，一些客户端以 HTML 格式显示正文，而其他客户端不识别 HTML，并且我的链接表现得像纯文本。这段代码就像：

```
String html = "<!DOCTYPE html><html><body><a href=\"http://www.w3schools.com\" target=\"_blank\">Visit W3Schools.com!</a>" + "<p>If you set the target attribute to \"_blank\", the link will open in a new browser window/tab.</p></body></html>";
Intent send = new Intent(Intent.ACTION_SENDTO);
String uriText = "mailto:MY EMAIL ADDRESS" + "?subject=subject here" + "&body=" + html;
uriText = uriText.replace(" ", "%20");
Uri uri = Uri.parse(uriText);
send.setData(uri);
startActivity(Intent.createChooser(send, "Send mail...")); 
```

![在此处输入图像描述](../Images/052c14a9f14a855f2bafcd71ff67b869.png) ![在此处输入图像描述](../Images/8152bc33aeb2064c64378657db008e5f.png)

[3) 使用JavaMail API](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)发送邮件，这增加了应用程序的复杂性，到目前为止我还没有对其进行测试。

你的建议是什么？我需要一种方法来获得第一种和第二种方法的优势。当用户单击按钮时，我需要它显示 Gmail 客户端，我可以在客户端的正文部分显示他/她的 html 内容。

任何建议将不胜感激。谢谢

=======================

# **更新**

关于代码 2 的某些内容是错误的。代码是这样的：

```
String html = "<!DOCTYPE html><html><body><a href=\"http://www.w3schools.com\" target=\"_blank\">Visit W3Schools.com!</a>" + "<p>If you set the target attribute to \"_blank\", the link will open in a new browser window/tab.</p></body></html>";
Intent send = new Intent(Intent.ACTION_SENDTO);
String uriText = "mailto:MY EMAIL ADDRESS" + "?subject=subject here" + "&body=" + Html.fromHtml(html);
uriText = uriText.replace(" ", "%20");
Uri uri = Uri.parse(uriText);
send.setData(uri);
startActivity(Intent.createChooser(send, "Send mail...")); 
```

![在此处输入图像描述](../Images/5da64dc35fcd4642157e54942dd11797.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:30:48.760

尝试以下 -

```
Intent shareIntent = new Intent(Intent.ACTION_SENDTO,Uri.parse("mailto:"));
shareIntent.putExtra(Intent.EXTRA_TEXT,Html.fromHtml(body));
shareIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
startActivity(shareIntent); 
```

这只会显示电子邮件应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:52:47.397

如果您只希望一个应用程序来处理您的意图，那么您需要删除 Intent.createChooser()，而不是使用 startActivity()---> 它使用默认电子邮件客户端发送邮件，如果未设置则将要求这样做。 .. 可以随时更改

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-09T09:47:48.847

要仅获取电子邮件应用程序，请使用 Intent.setType("message/rfc822")

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T09:23:09.240

试试这个代码：它将只选择电子邮件提供商，而不是 Facebook 等。

```
 String body="<!DOCTYPE html><html><body><a href=\"http://www.w3schools.com\" target=\"_blank\">Visit W3Schools.com!</a>" +
                      "<p>If you set the target attribute to \"_blank\", the link will open in a new browser window/tab.</p></body></html>";
            final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
            emailIntent.setType("text/html");           
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);    
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body));
            startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

# objective-c - ios CLLocationManager 不会第二次获取位置

> ID：11447446
> 
> 赞同：1
> 
> 时间：2012-07-12T08:01:36.787
> 
> 标签：objective-c, ios, core-location

我有一个`getLocation`方法可以初始化 my`CLLocationManager`并调用`startUpdatingLocation`. 在我得到用户的位置后，我打电话给`stopUpdatingLocation`.

稍后，当用户按下刷新时，我会调用一个调用方法`reloadData`，`getLocation`以便获取用户的最新位置。但是，这永远不会调用该`locationManager:didUpdateToLocation:fromLocation` 方法..所以我永远不会得到用户的最新位置。可能是什么问题？

```
-(void) getLocation {
self.locationManager = [[CLLocationManager alloc] init];
self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
self.locationManager.delegate = self;
[self.locationManager startUpdatingLocation];
}

- (void) locationManager: (CLLocationManager *)manager 
 didUpdateToLocation: (CLLocation *)newLocation
        fromLocation:(CLLocation *)oldLocation
{
    if (oldLocation!= nil) { // make sure to wait until second latlong value
        [self setLatitude:newLocation.coordinate.latitude];
        [self setLongitude: newLocation.coordinate.longitude];
        [self.locationManager stopUpdatingLocation];
        self.locationManager.delegate = nil;
        self.locationManager = nil;
        [self makeUseOfLocationWithLat:[self getLatitude] andLon:[self getLongitude]];
    }
}

-(void) reloadData {
    [self getLocation];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:13:12.250

真的有必要分配一个新的CLLocationManager吗？尝试只分配一次（例如在您的 init 中），然后按需调用 startUpdatingLocation 和 stopUpdatingLocation。对我来说，这个解决方案效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:50:28.597

你在测试期间移动吗？因为我认为回调只会被触发，当：

*   你打电话`startUpdatingLocation`
*   您的位置发生变化
*   位置管理器获得更好的结果（更详细）

因此，我认为对于您的用例：由于您不移动，因此`locationManager:didUpdateToLocation:fromLocation:`只会在您点击刷新后调用一次回调，并且由于没有旧位置，您将不会进入该`if`案例。

另一件事：您的班级中绝对应该只有一个 CLLocationManager。我每个项目/应用程序只使用一个（包装在一个单例中）。这是首选的方法！另外我认为这将保留 oldLocation 值，以便您的问题可以通过更改来解决。

最好的，克里斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:03:07.920

你可以试试这个，这将帮助你每次打开页面时更新。因为如果你把 startUpdatingLocation 放在 viewdidload 中，它只会第一次加载

```
-(void)viewWillAppear:(BOOL)animated
{
    [locationManager startUpdatingLocation];
} 
```

# java - 在 HMVC 中如何将模型更改事件发送到多个视图？

> ID：11447449
> 
> 赞同：0
> 
> 时间：2012-07-12T08:01:52.950
> 
> 标签：java, swing, model-view-controller, hmvc

我可以看到几种方法。

*   引用模型中的单个控制器。模型向这个控制器发送事件，其他控制器通过层次结构了解它并传递给视图

*   让所有感兴趣的控制器成为模型上的监听器（模型有一个监听器列表）。视图通过控制器了解变化

*   让所有感兴趣的视图成为模型的听众。（视图直接知道变化）

    哪个是合适的，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:20:20.860

*   你的第三个选择是老派。视图由模型通知，视图决定如何处理。没关系，但其他选择更好。

*   你的第二个选择听起来不错。视图由控制器通知（确保您有不同的控制器来更新视图和更新模型）。因此控制器可以在将事件传递给视图之前对其进行修改。控制器可以为视图分层定制数据。视图不应该这样做，工作只是显示一些东西（在选项三中，视图必须这样做）。

*   您的第一个选择是对具有层次结构的选项二的小改进。在复杂的场景中，过滤事件传递可能会更好。但通常这会增加开销。所以更难阅读。

我会选择选项二。这是简单代码的最佳交易和复杂操作的选项。

# php - Joomla if else for menu by ID 或 url

> ID：11447451
> 
> 赞同：0
> 
> 时间：2012-07-12T08:01:56.083
> 
> 标签：php, url, joomla, if-statement

我有一种情况，我希望我的两个页面看起来与其他页面不同，但它们不是首页。如果是这样，那将很容易，因为下面的代码可以解决问题。

```
$menu = & JSite::getMenu();
if ($menu->getActive() == $menu->getDefault()) {
echo 'This is the front page';

esle(do something else)
 }
?> 
```

简而言之，我想要一种类似的方法，但这次是通过 ID/URL 获取菜单。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T07:38:40.237

我得到了答案……您需要检查的是菜单 ID，然后将代码放在下面。

```
<?php
  //This is the code for the page with menu ID 6
  $menuID = JSite::getMenu()->getActive()->id ;
  if ($menuID == '6')
  {
    echo '';
  }
  elseif ($menuID == '2') //This is the HTML for page with menu ID 2
  {
    echo '';
  }
  elseif ($menuID  == '4') //THis is the html for page with menu id 4
  {
    echo '';
  }
  else  //This is the HTML code for the rest of the pages
  {
    echo '';
  }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:26:40.633

Page ItemId 可以使用`$itemid = JRequest::getInt( 'Itemid' );`

# c++ - 在 parallel_for 循环中使用 COM 对象，

> ID：11447461
> 
> 赞同：2
> 
> 时间：2012-07-12T08:02:29.750
> 
> 标签：c++, com, parallel-for

在我的代码中我使用了一个parallel_for循环，在这个循环中我从COM对象进行调用，但是当它运行时它没有正确执行，它说不能在另一个线程中执行COM，

我需要做什么，我需要使 COM 多头还是什么，

这是我的代码

```
COMObject myCom;
parallel_for(long(1), count, [&](long i)
{
    myCom->SomeCall(i);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:06:10.900

我认为您需要设置 MTAThreadAttribute **[MTAThread]**。欲了解更多信息，请查看：

[http://msdn.microsoft.com/en-us/library/system.mtathreadattribute.aspx](http://msdn.microsoft.com/en-us/library/system.mtathreadattribute.aspx)

# web - 接受信用卡付款

> ID：11447462
> 
> 赞同：0
> 
> 时间：2012-07-12T08:02:36.427
> 
> 标签：web, credit-card, onlinebanking, merchant-account

我有一个关于接受信用卡付款的一般性问题。

这是我的情况：

我有一个网站，可以让我们的客户在上面发布一些添加内容。添加首先由添加编辑器在内部接收和检查。然后，我们要求客户付款，当收到付款时，添加被发布。

我的目标是让我们的客户可以用他们的信用卡付款。例如，通过电子邮件向他们发送带有链接（或按钮）的发票到一个网页，他们可以在其中介绍他们的 CC 号码和所有需要的信息。这个页面可以在我们的网站上创建。

我已经阅读了一些关于在线支付的文章，并发现有两种主要可能性：

```
Use a third party merchant
Use my own merchant account 
```

您认为这两种解决方案中的哪一种更好，它们的优缺点是什么？

除了这两个之外，还有其他解决方案吗？

使用我自己的商家帐户的解决方案如何？实施复杂？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:14:25.517

除非您有大量资源可用于遵守`PCI DSS`标准 ( [https://www.pcisecuritystandards.org/](https://www.pcisecuritystandards.org/) )，否则请使用第三方。少了很多麻烦。

# ruby-on-rails - 如何在我的视图中使用 paypal-report gem？

> ID：11447463
> 
> 赞同：3
> 
> 时间：2012-07-12T08:02:36.617
> 
> 标签：ruby-on-rails, view, paypal, report

我想让 PayPal 报告正常工作。

用户在注册时输入他的 PayPal 电子邮件和密码。所以我需要存储它，以便以后使用，是吗？

我找到了这个宝石 - > [https://github.com/rngtng/paypal-report](https://github.com/rngtng/paypal-report)。我不知道如何使用它。

我添加了行

```
require 'paypal/report' 
```

在我的商人控制器中。

并在文档中说：

```
 require 'paypal/report'
  api = Paypal::Report.new(user, password, vendor, partner)
  puts api.daily.inspect 
```

我想在我的 Mercers.show.erb 中添加类似的内容：

```
 <%= api(@user.paypal_email, @user.paypal_password).daily.inspect %> 
```

所以我不能从视图中调用？如果用户验证帐户（此 gem 使用[https://github.com/moshbit/paypal_permissions](https://github.com/moshbit/paypal_permissions)）更容易还是我应该只存储 PayPal 登录数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:29:58.087

嘿，我想最好的解决方案是在控制器中执行所有操作并将结果分配给您可以在视图中使用的实例变量。这种方式缓存和测试会容易得多。例子：

```
require 'paypal/report'

class MerchantsController
  def show
    api = Paypal::Report.new(user, password, vendor, partner)   
    @daily_stats = api.daily
  end
end 
```

和视图（非常粗略的想法，请适应正确的数据结构）：

```
 <ul>
  <% @daily_stats.each do |stats| %>
   <li><%= stats %></li>
  <% end %>
 </ul> 
```

我希望这有帮助..

顺便说一句：与此同时，我们正在从 SFTP 服务器获取我们的贝宝报告，这可能是完整的、更快且更容易处理的方式..

# coffeescript - 如何在不生成js文件的情况下构建咖啡脚本文件？

> ID：11447473
> 
> 赞同：3
> 
> 时间：2012-07-12T08:03:10.487
> 
> 标签：coffeescript, textmate, sublimetext2

在 textmate 中，我可以构建咖啡脚本文件（command + B），它将在飞行中生成 JS 文件，而无需在同一目录中创建新文件。当我尝试在 sublime text 2 中构建 (command + B) 时，它以某种方式在同一目录中生成 JS 文件。如何避免这种情况，使其行为方式与 textmate 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:14:58.773

Sublime text 2 也允许你这样做。转到包管理器并下载 CoffeeCompile [https://github.com/surjikal/sublime-coffee-compile](https://github.com/surjikal/sublime-coffee-compile)。

安装此软件包后，您通常会右键单击打开的 .coffee 文件并选择“Coffee Compile”。但是 Mac OSX Mountain Lion 似乎在使用您的路径变量来查找咖啡命令时遇到问题，并且可能会抛出如下错误：[Errno 2] No such file or directory。

如果遇到此问题，请执行以下操作： 1\. 转到 ~/Library/Application Support/Sublime Text 2/Packages/CoffeeCompile/coffee_compile.py 2\. 转到 'quiet' 下的第 34 行：True，3\. 添加以下行：'路径'：'/usr/local/bin'

重新启动 Sublime Text 2 并再次尝试 Coffee Compile，它应该可以工作。

# database - 休眠，高并发问题

> ID：11447483
> 
> 赞同：1
> 
> 时间：2012-07-12T08:03:50.017
> 
> 标签：database, multithreading, hibernate, concurrency, transactions

我有以下问题。有一个交易，下面做。

交易：

1.  在数据库中查找是否有可用参数的对象。
2.  如果不是，则创建此对象，否则，更改对象并进行更新。

假设我们有两个并行执行的事务（T1 和 T2）。

T1查看数据库，没有对象。一毫秒后，T2查看数据库，也没有对象。

T1 将对象保存到数据库中，它也生成了 T2。

我们在数据库中有两个对象而不是一个。

我们可以解决这个问题吗？

我正在使用：Hibernate + Spring + Tomcat

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:06:17.577

对于部署在一台服务器上的应用程序，解决方案非常简单。给函数“同步”属性。这样你就可以确定这个问题不会发生。

如果您在多台服务器上运行此应用程序，则可能会出现此问题。在这种情况下，您应该考虑一种集中式数据库访问机制。

这也可以使用 sql server 的功能来完成。在数据库服务器上创建一个存储过程并给它一个适当的隔离级别。你可以在这里阅读：[为 postgresql 存储过程设置隔离级别](https://stackoverflow.com/questions/6274457/set-isolation-level-for-postgresql-stored-procedures)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:07:20.277

如果将两个相同的对象插入到数据库中，则会发生主键冲突，因此您的一个事务将无法写入并回滚。只需通过对其属性施加相关约束来确保对象必须是唯一的。

# hadoop - Nutch 爬行给出深度='N' 和在循环中爬行 N 次深度 ='1' 之间的区别

> ID：11447485
> 
> 赞同：0
> 
> 时间：2012-07-12T08:03:57.693
> 
> 标签：hadoop, nutch

我的问题背景：我在 Hadoop0.20.203 上运行 Nutch1.4。我在 Nutch 段上执行了一系列 MapReduce 作业以获得最终输出。但是在运行 mapreduce 之前等待整个爬网会导致解决方案运行更长时间。我现在在转储段后立即触发段上的 MapReduce 作业。我通过给出深度 = 1 在循环中运行爬行（'N = 深度'次）。当我在循环中以深度 1 爬行 N 次与爬行给出深度 N 时，我得到一些 URL 丢失。

请在下面找到伪代码：

**案例 1**：在 Hadoop 上进行 Nutch 爬行，深度 = 3。

// 创建列表对象来存储我们要传递给 NUTCH 的参数

列表 nutchArgsList = new ArrayList();

nutchArgsList.add("-depth");

nutchArgsList.add(Integer.toString(3));

<...其他 nutch args...>

ToolRunner.run(nutchConf, new Crawl(), nutchArgsList.toArray(new String[nutchArgsList.size()]));

**案例2**：在深度='1'的情况下在循环中爬行3次

for(int depthRun=0;depthRun< 3;depthRun++) {

// 创建列表对象来存储我们要传递给 NUTCH 的参数

列表 nutchArgsList = new ArrayList();

nutchArgsList.add("-depth");

nutchArgsList.add(Integer.toString(1)); //**注意**我在这里给深度为1

<...其他 nutch args...>

ToolRunner.run(nutchConf, new Crawl(), nutchArgsList.toArray(new String[nutchArgsList.size()]));

}

当我在循环中爬行的次数与深度一样多时，我的一些 url 丢失了（db unfetched）。

我已经在独立的 Nutch 上尝试过这个，我在深度 3 上运行 3 次，在深度 1 的相同 url 上运行 3 次。我比较了 crawldb 和 urls 差异只有 12。但是当我使用 toolrunner 在 Hadoop 上做同样的事情时，我得到 1000网址为 db_unfetched。

据我所知，到目前为止，Nutch 触发循环爬行的次数与深度值一样多。请建议。

另外请让我知道为什么当我在 Hadoop 上使用 toolrunner 执行此操作时与在独立 Nutch 上执行相同操作时差异很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:38:51.620

我发现 Nutch 获取的行为在独立运行（直接到硬盘）并与 Hadoop 集群集成时会发生变化。Hadoop 集群的生成器分数过滤似乎要高得多，因此“-topN”设置需要足够高。

我建议使用高（至少 1000）“-topN”而不是[默认值 5](http://wiki.apache.org/nutch/nutch-0.8-dev/bin/nutch_crawl)运行您的爬网。

这与我[在这里](https://stackoverflow.com/questions/4479846/empty-nutch-crawl-list/11660294#11660294)的回复类似。

这样做之后，我发现我的 Nutch 在单机上爬网和 HDFS 开始更好地排队。

# yii - Yii CActiveForm - 请等待消息

> ID：11447486
> 
> 赞同：1
> 
> 时间：2012-07-12T08:04:04.067
> 
> 标签：yii

我们希望抛出一个模式弹出窗口，告诉用户“请等待”，直到表单完成提交。

这是我的**_form.php**的一部分（只是为了便于阅读而截取的建议）：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'event-form',
        'enableClientValidation' => true,
        'clientOptions'=> 
              array('validateOnSubmit'=>true, 
                'afterValidate'=>'js:function() {     
                         $("#publishErrors").empty();
                         $("#event-form_es_").empty();
                         i = true;
                         if($("#EntityEvent_active").is(":checked"))
                         {
                          $("#publishErrors").show().append("<p>Please check:</p>")
                          if($("#Event_name").val()=="")
                          {
                            $("#Event_name").addClass("error"); 
                            ...
                            ... 
```

我承认我对这个过程有点迷茫，我不确定这是否会奏效，仍然：

我正在考虑放置这个：

```
$this->beginWidget('zii.widgets.jui.CJuiDialog'
        , array('options'=>array(
            'title'=>'My Title'
            , 'modal'=>true
            ))
);

echo 'Please Wait While Your Form is Being Submitted';

$this->endWidget('zii.widgets.jui.CJuiDialog'); 
```

在“afterValidate”的最后 -

有更好的方法吗？

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:13:47.897

已经有一个 jquery 插件：[jQuery BlockUI plugin](http://malsup.com/jquery/block/#page "http://malsup.com/jquery/block/#page")。

但是如果你想使用 CJuiDialog，只要确保`closeOnEscape`is `false`，并且`modal`is `true`，也`autoOpen`应该是`false`。

如果您愿意，您还可以在[CJuiDialog 中使用 jQueryUI Progressbar](http://jqueryui.com/demos/progressbar/ "http://jqueryui.com/demos/progressbar/")来显示进度。

编辑：

隐藏对话框的 x 按钮的示例代码：

```
$this->beginWidget('zii.widgets.jui.CJuiDialog',
    array(
        'id'=>'mywaitdialog',
        'options'=>array(
            'title'=>'My Title',
            'modal'=>true,
            'autoOpen'=>false,// default is true
            'closeOnEscape'=>false,
            'open'=>// supply a callback function to handle the open event
                    'js:function(){ // in this function hide the close button
                         $(".class-of-closebutton").hide();
                    }'
         ))
); 
```

要打开对话框：`$("#mywaitdialog").dialog("open");`。

如您所料，您可以在 afterValidate 中打开对话框。当表单数据传递到服务器时，对话框将显示，完成后将出现 url 导航（将加载新页面）。

# image - 如何将 ID2D1Bitmap 保存为 PNG 文件

> ID：11447489
> 
> 赞同：4
> 
> 时间：2012-07-12T08:04:18.220
> 
> 标签：image, file, save, direct2d, wic

尝试将 ID2D1Bitmap（从 ID2D1HwndRenderTarget 创建的）保存到 PNG 文件时遇到问题。输出图像只是空白的白色。从函数调用 EndDraw() 返回的 HRESULT 为 -2003238894。

谢谢你的帮助。

这是我的代码：

```
HRESULT CImageUtil::SaveBitmapToFile(PCWSTR uri,ID2D1Bitmap* pBitmap,ID2D1RenderTarget* pRenderTarget)
{

HRESULT hr = S_OK;

ID2D1Factory *pD2DFactory = NULL;
IWICBitmap *pWICBitmap = NULL;
ID2D1RenderTarget *pRT = NULL;
IWICBitmapEncoder *pEncoder = NULL;
IWICBitmapFrameEncode *pFrameEncode = NULL;
IWICStream *pStream = NULL;

if (SUCCEEDED(hr))
{
    hr = D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &pD2DFactory);
}

//
// Create IWICBitmap and RT
//

UINT sc_bitmapWidth = pBitmap->GetSize().width;
UINT sc_bitmapHeight = pBitmap->GetSize().height;

if (SUCCEEDED(hr))
{
    hr = m_pWICFactory->CreateBitmap(
        sc_bitmapWidth,
        sc_bitmapHeight,
    GUID_WICPixelFormat32bppPBGRA,
        WICBitmapCacheOnLoad,
        &pWICBitmap
        );
}

if (SUCCEEDED(hr))
{
    D2D1_RENDER_TARGET_PROPERTIES rtProps = D2D1::RenderTargetProperties();
    rtProps.pixelFormat = D2D1::PixelFormat(DXGI_FORMAT_B8G8R8A8_UNORM, D2D1_ALPHA_MODE_PREMULTIPLIED);
    rtProps.type = D2D1_RENDER_TARGET_TYPE_DEFAULT;
    rtProps.usage = D2D1_RENDER_TARGET_USAGE_NONE;

    hr = pD2DFactory->CreateWicBitmapRenderTarget(
        pWICBitmap,
    rtProps,
        &pRT
        );
}

if (SUCCEEDED(hr))
{
    //
    // Render into the bitmap
    //
    pRT->BeginDraw();

pRT->Clear(D2D1::ColorF(D2D1::ColorF::White));

pRT->DrawBitmap(pBitmap);

    pRT->EndDraw();
}
if (SUCCEEDED(hr))
{

    //
    // Save image to file
    //
    hr = m_pWICFactory->CreateStream(&pStream);
}

WICPixelFormatGUID format = GUID_WICPixelFormat32bppPBGRA;
if (SUCCEEDED(hr))
{

    hr = pStream->InitializeFromFilename(uri, GENERIC_WRITE);
}
if (SUCCEEDED(hr))
{
    hr = m_pWICFactory->CreateEncoder(GUID_ContainerFormatPng, NULL, &pEncoder);
}
if (SUCCEEDED(hr))
{
    hr = pEncoder->Initialize(pStream, WICBitmapEncoderNoCache);
}
if (SUCCEEDED(hr))
{
    hr = pEncoder->CreateNewFrame(&pFrameEncode, NULL);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->Initialize(NULL);
}

if (SUCCEEDED(hr))
{
    hr = pFrameEncode->SetSize(sc_bitmapWidth, sc_bitmapHeight);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->SetPixelFormat(&format);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->WriteSource(pWICBitmap, NULL);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->Commit();
}
if (SUCCEEDED(hr))
{
    hr = pEncoder->Commit();
}

SafeRelease(&pD2DFactory);
SafeRelease(&pWICBitmap);
SafeRelease(&pRT);
SafeRelease(&pEncoder);
SafeRelease(&pFrameEncode);
SafeRelease(&pStream);

return hr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:13:56.737

你怎么知道你是否有错误，因为你只是吞下错误并继续而不是记录它们的来源？你得到一个非零的 hresult，所以首先通过在每个函数调用之后添加 printf 或 fprintf 来确定它来自哪个函数。你在这个街区有一个明显的遗漏：

```
if (SUCCEEDED(hr))
{
    //
    // Render into the bitmap
    //
    pRT->BeginDraw();

pRT->Clear(D2D1::ColorF(D2D1::ColorF::White));

pRT->DrawBitmap(pBitmap);

    pRT->EndDraw();
}
if (SUCCEEDED(hr)) 
```

您不必费心将 hr 分配到那里的任何地方，因此您甚至都不知道其中是否有任何错误。显然，Clear() 和最终的 png 写入工作正常，因为你得到了一个好的文件，所以它是 DrawBitmap 或失败的位图创建调用之一。

# java - 在 android sqlite 中收到的数据库异常上从未显式调用 close()

> ID：11447492
> 
> 赞同：0
> 
> 时间：2012-07-12T08:04:22.447
> 
> 标签：java, android, sqlite, android-sqlite

**“InitDatabase()”**被称为**“inserRecord()”**，但它每次都显示异常，并且在**insertRecord()**中我还调用**了 closeDatabase()**，其中我有关闭 DB（数据库）的代码。

### 1.插入数据运行时出错：

在程序开始时，我使用**insertRecord()**输入记录，它工作正常，但是在运行时，当我用来插入记录时，它返回新的行 ID，但是当我`select * from table`然后它不会显示最后插入的记录

### 2、在HashMap中存储Cursor：

如果在该应用程序中需要，是否可以将光标进一步存储在哈希图中。

```
public SQLiteDatabase initDatabase(){
    Log.v("XIG","creating or opening database.");
    db_helper= new DatabaseHelper(context,dbname,1);
    DB = context.openOrCreateDatabase(dbname,SQLiteDatabase.CREATE_IF_NECESSARY, null);
    DB.setVersion(1);
    DB.setLocale(Locale.getDefault());
    DB.setLockingEnabled(true);
    DB = db_helper.getWritableDatabase();
    return DB;
}

public void insertRecord(String Table,String columnId[],String value[],String typeOfValue[]){
    initDatabase();
    Log.v("XIG","creating new record.");
    ContentValues new_record = new ContentValues();
    for(int i=0; i<columnId.length; i++){
        if(typeOfValue[i].equals("INT")){
            new_record.put(columnId[i],Integer.parseInt(value[i]));
        }
        else{
            new_record.put(columnId[i],value[i]);
        }
    }
    long rowid;
    try{
        DB.beginTransaction();
        rowid = DB.insert(Table,null,new_record);
        DB.setTransactionSuccessful();
    }
    finally{
        DB.endTransaction();
    }
    Log.v("XIG","inserted rowid in "+Table+": "+rowid);
    closeDatabase();
} 
```

### 例外：

```
initDatabase() method shows exception :
07-12 13:15:32.415: E/SQLiteDatabase(13643): close() was never explicitly called on database '/data/data/com.app/databases/mydb3' 
07-12 13:15:32.415: E/SQLiteDatabase(13643): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:17:06.457

**DB.setTransactionSuccessful()**之后 ；

 **你必须使用 **DB.commit();来提交它。**那么它肯定会起作用。

您可以使用以下代码将光标数据存储到 MashMap 列表中

```
 public ArrayList<HashMap<String, String>> select(
        String tableName, String[] fields, 
        String[] selectionArgs) {

    Cursor cursor =      // get data by firing query
    cursor.moveToFirst();

  ArrayList<HashMap<String, String>> mapList = new ArrayList<HashMap<String,String>>();

    for (int i = 0; i < cursor.getCount(); i++) {

        cursor.moveToPosition(i);

        HashMap<String, String> map = new HashMap<String, String>();
        for (int j = 0; j < fields.length; j++) {
            map.put(fields[j], cursor.getString(j));
        }
        mapList.add(map);
    }

    return mapList;
} 
```

如果可行，请接受此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:29:30.283

关闭应该在 finally 块内。如果有异常就不会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:21:28.927

问题可能不在此函数中。您的程序在某处打开数据库并且在调用此函数之前不关闭它，该函数试图“打开”已经打开的数据库..

正如你的错误日志所说

`Application did not close the cursor or database object that was opened here`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:58:05.733

不要尝试在每次更新时打开和关闭数据库。

当你的应用程序启动时打开数据库**一次**，不要费心去关闭它。在整个过程中重用单个数据库连接；通过这种方式，您的代码要简单得多，而且您不会丢失任何东西。**

# salesforce - Force.com 标注：有没有办法从目标服务器获取完整响应

> ID：11447494
> 
> 赞同：2
> 
> 时间：2012-07-12T08:04:24.603
> 
> 标签：salesforce, force.com

从 Force.com 调用 Web 服务时，我得到：

> System.CalloutException：Web 服务标注失败：意外元素。解析器期待元素 'http://schemas.xmlsoap.org/soap/envelope/:Envelope' 但发现 ':HTML'

另一端的网络人员要求查看 Salesforce 从他们的服务器获得的完整响应。

有没有办法做到这一点？我尝试使用匿名执行的调试级别“最佳”运行，但这会产生相同的小消息，没有进一步的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:05:50.677

不要忘记 Apex 包含一个 HttpRequest 类，它作为比 SOAP API 更低的层工作。您应该能够编写一个测试方法，将硬编码的 XML 请求发送到服务器并转储 HttpResponse 以便您可以看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:31:54.393

您收到的消息是因为在 Saleforce 尝试解析响应时生成了一个错误，并且不幸的是它没有被记录。

解析错误正在发生，因为您得到的不是 SOAP 消息响应，而是 HTML 页面。这通常发生在您访问受防火墙保护的服务时。这意味着您在计算机上浏览时可能能够看到该服务，但请记住 Salesforce 在您的防火墙之外，因此 Salesforce 与您的服务的任何通信都将被阻止。

有几种方法可以解决这个问题，但 Salesforce 的这个 wiki 主题最好地涵盖了这些选项： http: [//www.salesforce.com/us/developer/docs/api/Content/sforce_api_om_outboundmessaging_security.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_om_outboundmessaging_security.htm)

以上内容特定于出站消息，但本质上技术问题是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T13:22:24.610

根据一些互联网研究添加我自己的最佳答案：

您可以使用像 Runscope 这样的外部工具作为 Web 服务代理来自动转发请求并传递响应并查看 XML SOAP 消息。这不是 SFDC 上的原生解决方案，但它确实可以完成这项工作。

[https://www.runscope.com/](https://www.runscope.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T16:33:00.510

问题是 Force.com 试图解析实际上只是 HTML 的 SOAP 响应。这有时会发生在服务器端发生错误并且响应旨在让浏览器显示，而不是通过格式正确的 SOAP 响应发回异常报告时。

如果他们无法弄清楚为什么他们没有发回可消费的 SOAP 响应，那么您可以尝试使用[其他工具](https://developers.google.com/apps-script/articles/soap_geoip_example)（Force.com 之外）从您的浏览器进行相同的 Web 服务调用，然后查看 HTML 实际显示的内容返回。

# c# - 在类析构函数中创建新任务会正常运行吗？C＃

> ID：11447495
> 
> 赞同：1
> 
> 时间：2012-07-12T08:04:27.587
> 
> 标签：c#, parallel-processing

所以我有一堂课是这样安排的：

```
public class NetworkServer
{
    private BlockingCollection<byte[]> receivingQueue;

    public NetworkServer(IPEndPoint endpoint, int packetsize)
    {
        receivingQueue = new BlockingCollection<byte[]>(new ConcurrentQueue<byte[]>());
        // Do some other stuff here
    }

    public ~NetworkServer()
    {
        // Do some stuff here
        Task.Factory.StartNew(() => Parallel.ForEach<byte[]>(receivingQueue, item => SomeOtherClass.ParseItem(item)));
    }
} 
```

在`Task.Factory.StartNew`析构函数中，我想知道这是否会创建一个新线程，即使实例`NetworkServer`可能被垃圾收集，也会继续运行。如果这不起作用，那么在新线程上解析每个项目/在 GC 实例之后解析项目的最佳方法`NetworkServer`是什么。此外，`ParseItem`如果不清楚，将在不同的班级。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:09:11.483

从技术上讲，它会的。

但是，这不是析构函数。那是终结者。

如果您有一台具有 16GB RAM 的机器，则第一个终结器可能会在启动数小时后运行。这绝对是一个糟糕的设计。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T08:07:58.390

这真是太可怕了！不要这样做！您对终结器将运行的上下文一无所知。如果您认为需要做这种事情，请考虑修复您的设计 - 它有代码恶臭。

# git - 如何获取包含特定文件的 git 标签列表？

> ID：11447497
> 
> 赞同：2
> 
> 时间：2012-07-12T08:04:37.783
> 
> 标签：git

有没有办法获取包含特定文件的 git 标签列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:42:42.760

这就是我为获取包含特定文件的标签列表所做的操作：

1) 获取介绍文件的第一个提交 ID。您可以使用 git log 命令。

```
git log -- <path/to/filename> 
```

2）列出包含提交ID的标签。

```
git tag --contains <CommitId> 
```

这可能是错误的。所以，我会等待其他人的答案。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:36:13.160

只需管道到 xargs 并检查每个标签：

```
git tag | xargs -i{} bash -c 'git ls-tree -r {} | grep yourfile >/dev/null && echo {}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:46:14.317

```
git for-each-ref 'refs/tags/*' | while read rev type name
do
  [ -n "$(git ls-tree $rev -- "$filename")" ] && echo $name
done | sed -e 's/^refs\/tags\///' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:15:40.680

不知道如何只用 git 来做，但这是我与 bash 斗争的结果：

```
for tag in `git tag -l`; do [ -n "`git ls-tree $tag path/to/file`" ] && echo $tag; done 
```

# linux-kernel - 在 Little kernel bootloader 中的 malloc 之后检查 null 吗？

> ID：11447499
> 
> 赞同：0
> 
> 时间：2012-07-12T08:04:43.667
> 
> 标签：linux-kernel, malloc, bootloader

在许多地方的 Little Kernel 引导加载程序中，在 malloc 或 memalign 之后没有检查 null。

例如：在

```
void flash_init(void) at flash_cmdlist = memalign(32, 1024);

char *target_cmdline(char *org_cmdline)
{
    cmdline = (char *)malloc(MAX_CMDLINE_LEN);
    memset(cmdline, 0, MAX_CMDLINE_LEN);
} 
```

是否假定 malloc 在启动时不会返回 null ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:30:12.497

shunty，你可能应该做一些代码背景研究:)

您所指的代码实际上并非由 LK 的作者提供，而是来自 Google/Qcom，并且该部分（aboot）是使用遗留 android 引导加载程序的一些转储创建的，我仍然有看起来太相似的文件但是不能将它们发布到公共领域。

他们不检查 null 的原因是因为在传统的引导加载程序中，堆被实现为非常基本的，没有空闲，没有块，只是分配，增加地址并忘记它，因为堆不会被使用很长时间所以这不是问题，但在 LK 中，它本身非常有能力执行类似操作系统的任务，这是完全错误的，因为堆支持免费和其他标准堆功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:33:17.983

您应该始终检查 null，但是如果引导加载程序不能 malloc，它如何恢复？无处可恢复...它可以重新启动，但这可能导致不停地重新启动。也许这就是他们不检查空值的原因。

# jruby - 让 gnuplot 在 JRuby 中工作 - “RuntimeError：在路径上找不到 gnuplot 可执行文件”

> ID：11447500
> 
> 赞同：0
> 
> 时间：2012-07-12T08:04:49.420
> 
> 标签：jruby, gnuplot, runtime-error

我已经使用...安装了gnuplot

```
jruby -S gem install gnuplot 
```

但是当我尝试使用...运行它时，我得到“RuntimeError：在路径上找不到 gnuplot 可执行文件”

```
require 'gnuplot' 
```

如果我改变它，所以我说......

```
require 'C:\jruby-1.7.0.preview1\lib\ruby\gems\shared\gems\gnuplot-2.5.0\lib\gnuplot' 
```

我仍然得到同样的错误。有什么建议吗？当我更改 require 命令以引用 exe 时，它​​会给出 LoadError。所以我假设我应该以其他方式设置 exe 的路径。我已经单独安装了 gnuplot。

我在哪里/如何正确设置路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:09:57.077

查阅安装日志或使用“查找”来找出它的安装位置。

# c++ - 用于动态集群中的分布式计算的 C/C++ 框架

> ID：11447503
> 
> 赞同：8
> 
> 时间：2012-07-12T08:04:56.087
> 
> 标签：c++, c, scheduled-tasks, distributed-computing, hpc

我正在寻找一个用于 C++ 分布式数字运算应用程序的框架。

设置如下所示：

有一个主节点将问题域划分为小的独立任务。任务被分配给不同能力的工作节点（例如 CPU 类型/启用 GPU）。当工作节点可用时，它们会动态添加到计算网格中。也可能发生工作节点死亡而没有说再见的情况。

我正在寻找一个快速的 C/C++ 框架来完成这个设置。

总而言之，我的主要要求是：

*   工人/任务调度范式
*   动态添加/删除节点
*   目标网络：1G - 10G 以太网（企业网络，不需要通过 Internet 的良好性能）
*   可选：加密和经过身份验证的通信

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:09:33.873

[你当然可以用MPI](https://computing.llnl.gov/tutorials/mpi/)做你想做的事。MPI-2 添加了动态进程管理功能，我认为目前广泛使用的大多数实现都提供了这些功能。

使用 C++ + MPI 的优点之一是这种组合在科学和技术计算中的应用相当广泛，尽管我的印象是，在这个细分市场中，动态进程管理的使用并不多。由于 MPI 用于解决计算科学前沿问题的最大型超级计算机，人们可能会猜测它的速度足以满足您的目的。

使用 C++ + MPI 的缺点之一是 MPI 并非旨在容忍执行期间进程的失败。关于动态流程管理功能是否允许您对自己的容错进行编程存在争议。但没有争论说这可能很困难。

您将获得“开箱即用”的前 3 个要求。至于加密和经过身份验证的通信，您必须自己完成大部分工作，MPI 只是传递消息。我猜对于大多数 MPI 用户来说，在集群或具有私有互连的超级计算机上运行并行应用程序（通常它们本身与公司或企业网络隔离），加密和身份验证是无关紧要的问题。

# seo - 多语言网站的 SEO，元标记

> ID：11447505
> 
> 赞同：0
> 
> 时间：2012-07-12T08:05:01.493
> 
> 标签：seo

如何实现 html 文档元标记，以便以最佳方式索引多语言网站？

例如，我有以下英文关键字，但我希望我的网站也能以法语和俄语编入索引？

```
 <meta name="keywords" content="furniture, interior design, interiors" />
 <meta name="description" content="furniture, interior design, interiors" /> 
```

我想在元标记中添加以法语和俄语翻译的相同关键字。例如：

```
 <meta name="keywords" content="furniture, interior design, interiors, meubles, décoration intérieure, intérieurs" />
 <meta name="description" content="furniture, interior design, interiors, meubles, décoration intérieure, intérieurs" /> 
```

这是正确的解决方案吗？实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:23:46.403

你以错误的方式思考这个问题。如今，元描述标签对 SEO 来说并不是非常重要。元描述标签对 SERP 展示位置几乎没有影响。它们可用于在 SERP 中描述您的网站，但您最好使用整体内容策略。

确保您网站上的实际文本被正确翻译成法语或俄语，具体取决于用户所在的位置。找到您想要访问您的网站的用户经常光顾的相关网站并建立链接。

# c# - Windows 8 应用程序中的项目页面导航错误

> ID：11447509
> 
> 赞同：0
> 
> 时间：2012-07-12T08:05:25.130
> 
> 标签：c#, windows, microsoft-metro

我在我的 win8 应用程序项目中添加了一个新的“项目页面”来显示带有描述的图像。在设计视图中，我可以看到所有带有图像的项目，但是当我调试并导航到页面时，页面会中断。有人可以告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:58:41.770

我遇到了同样的问题（任何尝试使用 frame.navigation 都会导致崩溃）。创建具有相同内容（！）的新项目有助于...

# entity-framework - 如何为 Windows Phone 7 SQL Server CE 生成 DbContext.onmodelcreating 方法？

> ID：11447510
> 
> 赞同：2
> 
> 时间：2012-07-12T08:05:35.667
> 
> 标签：entity-framework, windows-phone-7, sql-server-ce

我试图想出一种方法，在 Windows Phone 7.x 应用程序中实现代码优先，例如与包含实体的可移植类库相结合。

在那方面，与其让我的 FooClass 用 [Table].[Column] 属性装饰，我更愿意从不同的角度来解决这个问题。我渴望有一种方法或拦截/覆盖，允许我在创建之前定义我的 SQL Server CE 表的定义，并将它们适当地映射回实体类。

在通过 .NET 4.5 的实体框架中，您可以通过该`DbContext.OnModelCreating()`方法执行此操作，但我在 Windows Phone 7 上看不到类似的内容？

我发现的最接近的事情是`CreateDatabaseSchemaUpdater()`，但这似乎是一种在数据库初始创建后的方法，如果你`Table<MyEntity>`在你的`DataContext`班级中有这种方法（以后在你的代码库中的其他地方使用强类型），它将不起作用。

想法，建议，演示代码？

# mongodb - MongoDB服务起飞

> ID：11447519
> 
> 赞同：1
> 
> 时间：2012-07-12T08:06:32.670
> 
> 标签：mongodb, windows-services, windows-server-2008, cpu-usage

我担心我的服务器机器性能。该应用程序处理来自 RETS 服务器源的海量数据。每当服务器启动 mongod 服务时，尽管它具有良好的配置（Server2008，4GB RAM）并使用 mongodb 64 位最新版本（2.0.6），但它的性能和 PF 使用率会飙升至 ~3.59GB。请在这方面赐教.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:08:29.583

我不确定您对 MongoDB 了解多少，但 Mongo 使用内存映射文件来访问数据，这会导致 mongod 进程显示大量数据。这在使用内存映射文件时很正常。映射数据文件的数量显示在虚拟大小参数中，驻留字节显示在 RAM 中缓存的数据量。你的数据文件越大，mongod 进程的 vmsize 就越高。

如果其他进程需要更多 ram，操作系统的虚拟内存管理器将从缓存中释放一些内存，并且 mongod 进程上的常驻字节将下降。

建议使用固定的页面文件大小。如果您使用动态页面文件，操作系统不会以足够快的速度增加它以跟上（私有）映射内存调用。如果页面文件是动态的或（最小）设置太小，实际上有一个打开的[票可以添加特殊警告。](https://jira.mongodb.org/browse/SERVER-4050)

本[文档](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)解释了内存使用在 MongoDB 上的工作原理。

以下是一些工具，展示了如何使用 MongoDB 诊断系统问题 -

*   [mongostat](http://www.mongodb.org/display/DOCS/mongostat)
*   [监控和诊断](http://www.mongodb.org/display/DOCS/Monitoring+and+Diagnostics)

老实说，我建议将此问题移至[MongoDB User Google Group](https://groups.google.com/forum/?fromgroups#!forum/mongodb-user)并将您的问题与问题期间的 mongostat 输出以及来自[perfmon](http://perfmon.sourceforge.net/)的信息一起发布在那里，因为这可能是一个更长的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:36:33.947

另一个需要考虑的事情是在你的 Mongod 实例上设置 MMS。

[https://mms.10gen.com](https://mms.10gen.com)

# domain-driven-design - 持久引用聚合之外的非根实体

> ID：11447520
> 
> 赞同：3
> 
> 时间：2012-07-12T08:06:36.510
> 
> 标签：domain-driven-design

DDD 上的所有材料都将其指定为严格的不，但我最近遇到了一个场景，它为以其他方式思考提供了令人信服的理由。想象一下 2 个聚合根模板和文档，`Template --> (1:n) TemplateParam, Document --> (1:n) ParamValue`最后 2 个根有一个引用`Document --> (n:1) Template`。
给定聚合根约束`ParamValue`不应该保留对 的引用`TemplateParam`，只有它可以通过`Template`聚合根获得的瞬态引用来引用它。现在，如果我想强制执行一个规则，例如“文档的每个 ParamValue 应该引用一个有效的 TemplateParam，该 TemplateParam 属于其拥有的文档所引用的模板”。理想情况下，在数据库级别，我会让 ParamValue 对 TemplateValue 进行 FK，如何在 DDD 范例中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:58:49.123

聚合根的存在是有原因的。它们充当一组相关实体的单个入口点，以强制执行它们的不变量。他们确保没有外部对象可以与这些实体混淆并可能违反它们的不变量。

但是，在您的特定场景中，即使 ParamValue 直接引用 TemplateParam，TemplateParam 也不存在被 Document 聚合中的实体修改的风险。与给定文档的参数关联的*值*将被修改，但不是每个参数。

为了确保是这种情况，您可以使 TemplateParam 成为不可变的值对象：

（在 C# 中）

```
public class TemplateParam
{
    private readonly string name;

    public TemplateParam(string name)
    {
        this.name = name;
    }

    public string Name
    {
        get { return name; }
    }
} 
```

因此，您可以将 TemplateParam 封装在 ParamValue 中，而不会因为 TemplateParam 的“外部化”而破坏模板聚合的不变量之一。

从技术上讲，这可能违反了 DDD 的聚合根约束，但我不认为它在精神上是一个，只要您保持“外部化”实体不可变并且不修改它最初所属的对象图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:13:12.520

您可以解决此问题的一种方法是让`Template`实体具有用于创建`Document`实例的工厂方法，该方法可以强制执行所有`ParamValue`实例都与适当的关联的约束`TemplateParam`。如果文档是不可变的，那么你就完成了。否则，您可以通过其关联模板将更新应用到文档。此模板可以直接从文档中引用，也可以使用 ID 引用，在这种情况下，封装应用程序服务将在操作需要时检索它。AR 之间的直接引用并不严格违反 DDD，事实上蓝皮书规定这是唯一可以被外部 AR 引用的东西。由于一致性、性能、ORM 映射等其他考虑因素，它最近已成为一个约束。看看[本系列文章](http://dddcommunity.org/library/vernon_2011)对有效的聚合设计有所启发。

# vtk - 如何从VTK点中提取点坐标

> ID：11447524
> 
> 赞同：2
> 
> 时间：2012-07-12T08:06:56.737
> 
> 标签：vtk

我使用了一个库，最后给了我 vtkpoints。现在我想从中提取点。但是 VTKPoints 提供的所有方法都需要点 id，我不知道。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:35:12.453

我无法提供明确的答案，因为[VTKPoints 文档](http://www.vtk.org/doc/nightly/html/classvtkPoints.html)没有讨论点 ID 的值，而且我对此没有任何经验。但是，我看到的所有[示例](http://www.vtk.org/doc/nightly/html/c2_vtk_e_5.html#c2_vtk_e_vtkPoints)`[0..NumberOfPoints-1]`都只使用范围内的整数作为点 id，因此您所做的似乎是完全合理的（但是请注意，您的评论`I am using the indexes: 0..NumberOfPoints`应该是`0..NumberOfPoints-1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:35:51.240

这些点肯定只是存储在一个类似矢量的容器中，顺序索引从 0 到 GetNumberOfPoints()-1。

# c# - 将 ASCII 字符替换为等效字符

> ID：11447525
> 
> 赞同：2
> 
> 时间：2012-07-12T08:06:59.377
> 
> 标签：c#, javascript, cookies

我正在使用 JavaScript 在 cookie 中设置一个值，并在后面的代码中获取 cookie 的内容。

但问题是，如果我用一些特殊字符或空白字符存储字符串，当我检索 cookie 的内容时，特殊符号将被转换为 ASCII 等价物。

例如，如果我想存储`Adam - (SET)`在 cookie 中，它会被转换为`Adam%20-%20%28SET%29`并被存储，当我检索它时，我会得到相同的 cookie `Adam%20-%20%28SET%29`。但我想在后面的代码中得到这个`Adam - (SET)`。

我怎么得到这个。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:09:56.850

# 在`C#`

采用：

```
String decoded = HttpUtility.UrlDecode(EncodedString); 
```

*[HttpUtility.UrlDecode()](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)是您可以在 .NET Framwework 中使用的大多数其他替代方案所使用的基础函数（见下文）。*

*如有必要，您可能需要指定编码。*

或者：

```
String decoded = Uri.UnescapeDataString(s); 
```

*有关一些警告，请参阅[Uri.UnescapeDataString()](http://msdn.microsoft.com/en-us/library/system.uri.unescapedatastring.aspx)的文档。*

# 在`JavaScript`

```
var decoded = decodeURIComponent(s); 
```

*`unescape`在按照其他问题的建议开始使用之前，请阅读[decodeURIComponent vs unescape，unescape 有什么问题？](https://stackoverflow.com/questions/619323/decodeuricomponent-vs-unescape-what-is-wrong-with-unescape). 您可能还想阅读[decodeURIComponent 和 decodeURI 有什么区别？](https://stackoverflow.com/questions/747641/what-is-the-difference-between-decodeuricomponent-and-decodeuri).*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:09:25.673

您可以使用`unescape`JS 中的函数来执行此操作。

```
var str = unescape('Adam%20-%20%28SET%29'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:11:41.017

您正在寻找`HttpUtility.UrlDecode()`（我认为在 System.Web 命名空间中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:30:00.350

在 javasrcipt 中，您可以使用内置的[decodeURIComponent](http://es5.github.com/#x15.1.3.2)，但我怀疑在将值发送到服务器时会发生字符串编码，因此 C# 答案就是您想要的。

# silverlight - 如何使用标题和内容上的依赖属性修复此简单样式用户控件？

> ID：11447527
> 
> 赞同：0
> 
> 时间：2012-07-12T08:07:12.643
> 
> 标签：silverlight, xaml, user-controls, dependency-properties

我有一个 Silverlight XAML 用户控件，我想用它来显示元素在布局中组合在一起。xml是：

```
<UserControl x:Class="StylingLibrary.FieldSet"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:System="clr-namespace:System;assembly=mscorlib"
mc:Ignorable="d"
d:DesignWidth="200" d:DesignHeight="200">

<Grid x:Name="FieldsetLayoutRoot" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Border HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Style="{StaticResource FieldsetBorder}">
        <ContentPresenter x:Name="TheFieldsetContentPresenter" Content="{Binding Content}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0"/>
    </Border>
    <Border HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource FieldsetTitleBackground}">
        <TextBlock x:Name="FieldsetTitleTextBlock" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Title}" Style="{StaticResource FieldsetTitle}"/>
    </Border>

</Grid>
</UserControl> 
```

它的支持代码主要包含依赖属性：

```
public partial class FieldSet : UserControl
{
    public FieldSet()
    {
        TheFieldsetContentPresenter.DataContext = this;
        FieldsetTitleTextBlock.DataContext = this;
        // Required to initialize variables
        InitializeComponent();
    }

    public String Title
    {
        get { return (String)GetValue(TitleProperty); }
        set { SetValue(TitleProperty, value); }
    }
    public static readonly DependencyProperty TitleProperty =
        DependencyProperty.Register("TitleProperty", typeof(String), typeof(FieldSet), null);

    public new FrameworkElement Content
    {
        get { return (FrameworkElement)GetValue(MyContentProperty); }
        set { SetValue(MyContentProperty, value); }
    }

    public static readonly DependencyProperty MyContentProperty =
        DependencyProperty.Register("ContentProperty", typeof(FrameworkElement), typeof(FieldSet), null);
} 
```

现在每当我尝试像这样使用它时：

```
<Styling:FieldSet Title="Projects">
       <TextBlock Text="test" />
</Styling:FieldSet> 
```

Visual Studio (2010) 告诉我抛出了 NullReferenceException，它无法创建 FieldSet 的实例。尝试构建和运行项目时，出现以下错误：

```
{System.Windows.Markup.XamlParseException: The invocation of the constructor on type 'StylingLibrary.FieldSet' that matches the specified binding constraints threw an exception. [Line: 81 Position: 44] ---> System.NullReferenceException: Object reference not set to an instance of an object.
 at StylingLibrary.FieldSet..ctor()
 --- End of inner exception stack trace ---
 at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
 at ProjectsOverview.Views.ProjectsList.InitializeComponent()
 at ProjectsOverview.Views.ProjectsList..ctor(ProjectsListViewModel m)} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:08:43.153

将构造函数更改为

```
public FieldSet()
{
    InitializeComponent();
    TheFieldsetContentPresenter.DataContext = this;
    FieldsetTitleTextBlock.DataContext = this;
} 
```

首先你需要初始化组件，然后你可以设置`DataContext`它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:42:50.657

您需要创建 CustomControl 并使用 TemplateBinding 而不是使用 Binding。然后您将能够从其他地方使用此控件，我将解决您的问题。

[Silverlight 中的模板绑定和自定义控件](http://www.exploresilverlight.com/2012/07/use-of-templatebinding-and-custom.html)

干杯! 维诺德

# c# - 将对象转换为 XML 字符串

> ID：11447529
> 
> 赞同：104
> 
> 时间：2012-07-12T08:07:14.390
> 
> 标签：c#, xml, serialization

我有一个名为`WebserviceType`我从 XSD 文件中的工具 xsd.exe 获得的类。

现在我想将一个`WebServiceType`对象的实例反序列化为一个字符串。我怎样才能做到这一点？

该`MethodCheckType`对象有一个`WebServiceType`数组作为参数。

我的第一次尝试就像我序列化它：使用 a`XmlSerializer`和 a `StringWriter`（序列化时我使用了 a `StringReader`）。

这是我序列化`WebServiceType`对象的方法：

```
XmlSerializer serializer = new XmlSerializer(typeof(MethodCheckType));
        MethodCheckType output = null;
        StringReader reader = null;

        // catch global exception, logg it and throw it
        try
        {
            reader = new StringReader(path);
            output = (MethodCheckType)serializer.Deserialize(reader);
        }
        catch (Exception)
        {
            throw;
        }
        finally
        {
            reader.Dispose();
        }

        return output.WebService; 
```

* * *

编辑：

也许我可以换一种说法：我得到了这个`MethodCheckType`对象的一个​​实例，另一方面，我得到了序列化这个对象的 XML 文档。现在我想将此实例转换为字符串形式的 XML 文档。在此之后，我必须证明两个字符串（XML 文档）是否相同。这是我必须做的，因为我对第一种方法进行了单元测试，在该方法中，我将 XML 文档读入 a`StringReader`并将其序列化为`MethodCheckType`对象。

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-07-12T08:56:36.740

这是两种方式的转换方法。this = 你的类的实例

```
public string ToXML()
    {
        using(var stringwriter = new System.IO.StringWriter())
        { 
            var serializer = new XmlSerializer(this.GetType());
            serializer.Serialize(stringwriter, this);
            return stringwriter.ToString();
        }
    }

 public static YourClass LoadFromXMLString(string xmlText)
    {
        using(var stringReader = new System.IO.StringReader(xmlText))
        {
            var serializer = new XmlSerializer(typeof(YourClass ));
            return serializer.Deserialize(stringReader) as YourClass ;
        }
    } 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-02-10T18:31:15.030

我意识到这是一篇非常古老的帖子，但在查看了 LB 的回复后，我想到了如何改进已接受的答案并使其适用于我自己的应用程序。这是我想出的：

```
public static string Serialize<T>(T dataToSerialize)
{
    try
    {
        var stringwriter = new System.IO.StringWriter();
        var serializer = new XmlSerializer(typeof(T));
        serializer.Serialize(stringwriter, dataToSerialize);
        return stringwriter.ToString();
    }
    catch
    {
        throw;
    }
}

public static T Deserialize<T>(string xmlText)
{
    try
    {
        var stringReader = new System.IO.StringReader(xmlText);
        var serializer = new XmlSerializer(typeof(T));
        return (T)serializer.Deserialize(stringReader);
    }
    catch
    {
        throw;
    }
} 
```

这些方法现在可以放置在静态帮助程序类中，这意味着无需对需要序列化的每个类重复代码。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-04-14T11:49:34.527

```
 public static string Serialize(object dataToSerialize)
    {
        if(dataToSerialize==null) return null;

        using (StringWriter stringwriter = new System.IO.StringWriter())
        {
            var serializer = new XmlSerializer(dataToSerialize.GetType());
            serializer.Serialize(stringwriter, dataToSerialize);
            return stringwriter.ToString();
        }
    }

    public static T Deserialize<T>(string xmlText)
    {
        if(String.IsNullOrWhiteSpace(xmlText)) return default(T);

        using (StringReader stringReader = new System.IO.StringReader(xmlText))
        {
            var serializer = new XmlSerializer(typeof(T));
            return (T)serializer.Deserialize(stringReader);
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-29T02:46:45.283

```
 public static class XMLHelper
    {
        /// <summary>
        /// Usage: var xmlString = XMLHelper.Serialize<MyObject>(value);
        /// </summary>
        /// <typeparam name="T">Kiểu dữ liệu</typeparam>
        /// <param name="value">giá trị&lt;/param>
        /// <param name="omitXmlDeclaration">bỏ qua declare</param>
        /// <param name="removeEncodingDeclaration">xóa encode declare</param>
        /// <returns>xml string</returns>
        public static string Serialize<T>(T value, bool omitXmlDeclaration = false, bool omitEncodingDeclaration = true)
        {
            if (value == null)
            {
                return string.Empty;
            }
            try
            {
                var xmlWriterSettings = new XmlWriterSettings
                {
                    Indent = true,
                    OmitXmlDeclaration = omitXmlDeclaration, //true: remove <?xml version="1.0" encoding="utf-8"?>
                    Encoding = Encoding.UTF8,
                    NewLineChars = "", // remove \r\n
                };

                var xmlserializer = new XmlSerializer(typeof(T));

                using (var memoryStream = new MemoryStream())
                {
                    using (var xmlWriter = XmlWriter.Create(memoryStream, xmlWriterSettings))
                    {
                        xmlserializer.Serialize(xmlWriter, value);
                        //return stringWriter.ToString();
                    }

                    memoryStream.Position = 0;
                    using (var sr = new StreamReader(memoryStream))
                    {
                        var pureResult = sr.ReadToEnd();
                        var resultAfterOmitEncoding = ReplaceFirst(pureResult, " encoding=\"utf-8\"", "");
                        if (omitEncodingDeclaration)
                            return resultAfterOmitEncoding;
                        return pureResult;
                    }
                }
            }
            catch (Exception ex)
            {
                throw new Exception("XMLSerialize error: ", ex);
            }
        }

        private static string ReplaceFirst(string text, string search, string replace)
        {
            int pos = text.IndexOf(search);

            if (pos < 0)
            {
                return text;
            }

            return text.Substring(0, pos) + replace + text.Substring(pos + search.Length);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-01T13:41:56.533

这是我的解决方案，对于任何列表对象，您都可以使用此代码转换为 xml 布局。KeyFather 是您的主要标签，而 KeySon 是您的 Forech 的起点。

```
public string BuildXml<T>(ICollection<T> anyObject, string keyFather, string keySon)
    {
        var settings = new XmlWriterSettings
        {
            Indent = true
        };
        PropertyDescriptorCollection props = TypeDescriptor.GetProperties(typeof(T));
        StringBuilder builder = new StringBuilder();
        using (XmlWriter writer = XmlWriter.Create(builder, settings))
        {
            writer.WriteStartDocument();
            writer.WriteStartElement(keyFather);
            foreach (var objeto in anyObject)
            {
                writer.WriteStartElement(keySon);
                foreach (PropertyDescriptor item in props)
                {
                    writer.WriteStartElement(item.DisplayName);
                    writer.WriteString(props[item.DisplayName].GetValue(objeto).ToString());
                    writer.WriteEndElement();
                }
                writer.WriteEndElement();
            }
            writer.WriteFullEndElement();
            writer.WriteEndDocument();
            writer.Flush();
            return builder.ToString();
        }
    } 
```

# spring - org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.filterChains”的bean时出错

> ID：11447534
> 
> 赞同：2
> 
> 时间：2012-07-12T08:07:32.053
> 
> 标签：spring, spring-security

我用 STS、Roo 和 GWT 创建了一个新项目，并尝试包含 Spring Security。从那时起，我收到以下错误。有没有人知道出了什么问题？！

org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.filterChains”的bean时出错：bean初始化失败；嵌套异常是 java.lang.NoSuchFieldError: NULL

堆栈跟踪：

```
 [INFO] org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
[INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
[INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
[INFO]  at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
[INFO]  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
[INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
[INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
[INFO]  at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.jetty.Server.doStart(Server.java:222)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
[INFO]  at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
[INFO]  at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
[INFO]  at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
[INFO]  at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
[INFO]  at com.google.gwt.dev.DevMode.main(DevMode.java:311)
[INFO] Caused by: java.lang.NoSuchFieldError: NULL
[INFO]  at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
[INFO]  at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:88)
[INFO]  at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
[INFO]  at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)
[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:311)
[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
[INFO]  at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
[INFO]  ... 29 more 
```

我的 web.xml

```
 <!-- Enable escaping of form submission contents -->
    <context-param>
        <param-name>defaultHtmlEscape</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
    </context-param>

        <filter>
            <filter-name>springSecurityFilterChain</filter-name>
            <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
          <filter-name>springSecurityFilterChain</filter-name>
          <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
        <filter-name>HttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter>
        <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
        <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>HttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Handles Spring requests -->
    <servlet>
        <servlet-name>Weltenbrand</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/spring/webmvc-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>requestFactory</servlet-name>
        <servlet-class>de.roio.weltenbrand.server.CustomRequestFactoryServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Weltenbrand</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>requestFactory</servlet-name>
        <url-pattern>/gwtRequest</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>10</session-timeout>
    </session-config>

    <servlet>
     <servlet-name>authServlet</servlet-name>
     <servlet-class>de.roio.weltenbrand.server.authentication.AuthServiceImpl</servlet-class>
    </servlet>

    <servlet-mapping>
     <servlet-name>authServlet</servlet-name>
     <url-pattern>/Weltenbrand/auth</url-pattern>
    </servlet-mapping>

</web-app> 
```

这里是applicationContext.xml：

```
<bean id="customAuthListener" class="de.roio.weltenbrand.server.authentication.CustomAuthListener"/>

<security:http auto-config="true">
    <security:intercept-url pattern="/gwtspringsecurityproject/**" access="ROLE_USER"/>
    <security:intercept-url pattern="/gwt/**" access="ROLE_USER"/>
    <security:intercept-url pattern="/**/*.html" access="ROLE_USER"/>
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
</security:http>

<bean id="customAuthenticationProvider"
       class="de.roio.weltenbrand.server.authentication.CustomAuthenticationProvider" />   

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="customAuthenticationProvider"/>
</security:authentication-manager>

<context:property-placeholder location="classpath*:META-INF/spring/*.properties"/>

<context:spring-configured/>

<context:component-scan base-package="de.roio.weltenbrand">
    <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan>
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}"/>
    <property name="url" value="${database.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
    <property name="numTestsPerEvictionRun" value="3"/>
    <property name="minEvictableIdleTimeMillis" value="1800000"/>
    <property name="validationQuery" value="SELECT 1"/>
</bean>
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:45:50.550

问题的实际原因似乎是 spring-security 3.1.X 引入了旧版本的 spring，从而产生了无声的冲突。在我的例子中，spring-security-3.1.3.RELEASE 引入了 spring-expressions 3.0.7.RELEASE。明确添加此依赖项后，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T12:45:44.857

有类似的问题，但通过更改弹簧版本解决了。我更改了所有弹簧依赖项`

```
<org.springframework.version>3.2.5.RELEASE</org.springframework.version>
<spring-security.version>3.2.5.RELEASE</spring-security.version>
<spring-aop.version>3.2.5.RELEASE</spring-aop.version>
<org.testng.version>6.8.7</org.testng.version>
<spring-test.version>3.2.5.RELEASE</spring-test.version>` 
```

而且它有效...

# asp.net-mvc-3 - 在其他 dll 中使用 Container/DependencyResolver

> ID：11447536
> 
> 赞同：1
> 
> 时间：2012-07-12T08:07:52.537
> 
> 标签：asp.net-mvc-3, autofac

我试图让自己熟悉，`MVC3`但`autofac`我遇到了我无法解决的小问题。

我正在使用`autofac`集成`MVC3`并且一切正常，页面加载正确，依赖项被注入，这很酷。困扰我的是如何在类库项目中使用`autofac`'s`Container`或`MVC`'s 。 我正在尝试创建静态类来帮助我处理域事件。我只是希望能够使用事件参数调用该方法，并且一切都应该由此类处理。这是代码：`DependencyResover`

```
public static IContainer Container { get; set; }
public static void Raise<T>(T e) where T : IDomainEvent
{
    foreach (var eventHandler in DomainEventManager.Container.Resolve<IEnumerable<EventHandlers.Handles<T>>>())
    {
        eventHandler.Handle(e);
    }
} 
```

如您所见，它非常简单，如果不`MVC`接近，一切都会很好。我的一些依赖项注册为`InstancePerHttpRequest`( `NHibernate`' session)，而其他依赖项注册为`InstancePerDependency`or `SingleInstance`。因此，当我尝试`container`在我的 UI 项目中使用 created 时，我得到了没有`httpRequest`可用标签的异常。

我如何重用`Container`在 web 项目中创建的来访问它的所有功能，包括`InstancePerHttpRequest`和`httpRequest`标签？

或者也许我的问题还有其他解决方案？我正在考虑使用委托函数来获取事件处理程序，但我不能（可以吗？）创建我不需要在分配时使用具体类型初始化的通用委托。

为什么我想使用静态类来做到这一点基本上是每个`entity`和`aggregate`或`service`需要能够引发域事件。注入`EventManager`其中的每一个都会很麻烦，而静态类正是解决我所有问题的方法。

如果有人能帮助我解决这个问题，我将不胜感激。
干杯，帕科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:54:23.500

您不应该直接从您的应用程序代码中引用您的容器。这看起来像服务定位器反模式。正确的做法是向您的对象传递他们完成工作所需的服务，通常通过构造函数参数完成。但是...如果您要坚持依赖全局静态，那么至少将模型建模`EventManager`为单例，这样用法如下所示：

```
EventManager.Current.Raise<SomeEvent>(someObject); 
```

然后您可以`EventManager.Current`在初始化应用程序时设置为正确构造的实例。

# ruby - 使用 Ruby 符号

> ID：11447537
> 
> 赞同：15
> 
> 时间：2012-07-12T08:07:54.147
> 
> 标签：ruby, symbols

我第一次尝试学习 Ruby 是在 2 年前，现在我又开始了。我停止的原因是因为我无法理解 Symbol 类。现在我又在同一点上，完全迷失在何时以及为什么使用符号。我已经阅读了 Stackoverflow 上的其他帖子，并在 Google 上搜索了一些解释。但我还不明白。

首先，我认为符号只是一种创建某种“命名常量”的方法，而不必经历与 Java 相同的过程。

```
:all 
```

而不是制作具有任意值的常量`public static final String ALL = 8;`

`attr_accessor :first_name etc.` 但是，当您在例如Are Symbols 只是一个轻量级的String 类中使用它时，它没有多大意义？我在理解我应该如何解释、何时以及如何在我自己的类和框架中使用符号时遇到问题。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T08:09:53.257

简而言之，符号*是*轻量级字符串，但它们也是不可变且不可垃圾回收的。

您不应该**在**数据处理任务中将它们用作不可变字符串（请记住，一旦创建符号，它就不能被销毁）。您通常使用符号来命名事物。

```
# typical use cases

# access hash value
user = User.find(params[:id])

# name something
attr_accessor :first_name

# set hash value in opts parameter
db.collection.update(query, update, multi: true, upsert: true) 
```

我们先举个例子，`params[:id]`。在一个中等大小的 Rails 应用程序中，可能有成百上千的那些分散在代码库中。如果我们使用字符串访问该值`params["id"]`，则意味着每次都分配新的字符串（并且之后需要收集该字符串）。如果是符号，实际上到处都是**相同的符号。**减少内存分配器、垃圾收集器甚至你的工作（`:`比打字更快`""`）

如果你有一个简单的单字字符串，它经常出现在你的代码中，并且你没有对它做一些时髦的事情（插值、gsub、大写等），那么它很可能是一个很好的候选者。

> 但是，这是否仅适用于用作实际程序逻辑的一部分的文本（例如命名），而不适用于您在实际运行程序时获得的文本……例如来自用户/网络的文本等？

我想不出一个我想将数据从用户/网络转换为符号的情况（也许除了解析命令行选项）。主要是因为后果（一旦创建的符号永远存在）。

此外，许多编辑器为符号提供不同的颜色，以在代码中突出显示它们。看看这个例子

![符号与字符串](../Images/a342f30f7d6b35639b6a2e28826720d9.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-14T23:57:27.773

O'Reilly *Ruby Cookbook* (p. 15) 引用 Jim Weirich 的话说：

*   如果对象的内容（字符序列）很重要，请使用字符串。
*   如果对象的身份很重要，请使用符号。

符号通常用作散列键，因为键的*身份*很重要。**使用某些方法（如Object#send** ）传递消息时也需要符号。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-12T13:54:00.093

Ruby 实现通常有一个表，其中存储所有类、方法和变量的名称。它指的是通过表中的位置说一个方法名称，避免昂贵的字符串比较。但是您也可以使用此表并为其添加值：`symbols`.

如果您编写的代码使用字符串作为标识符而不是其文本内容，请考虑符号。如果您编写的方法期望参数是“男性”或“女性”，请考虑使用`:male`and `:female`。比较两个符号是否相等比字符串快（这就是符号成为良好哈希键的原因）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-17T10:38:28.340

符号用于命名语言中的事物：类的名称、方法的名称等。这些非常类似于字符串，只是它们永远不会被垃圾收集，并且对相等性的测试进行了优化，使其非常快速。

Java 实现有一个非常相似的东西，除了它不能用于运行时使用。我的意思是，当您编写 java 代码时`obj.someMethod(4)`，编译器会将字符串“someMethod”转换为嵌入到 .class 文件的查找表中的符号。这些符号就像不是垃圾收集的“特殊”字符串，并且可以非常快速地比较是否相等。这几乎与 Ruby 相同，只是 Ruby 允许您在运行时创建新符号，而 Java 只允许在编译时创建。

这就像创建新方法一样——Java 在编译时允许这样做；Ruby 在运行时允许它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-02T17:53:50.763

在 ruby​​ 版本 2.2 符号 GC 被删除后，所以现在凡人符号，即当我们将字符串转换为符号时 ("mortal".to_sym) 会从内存中清除。

看一下这个：

```
require 'objspace'
ObjectSpace.count_symbols
{
  :mortal_dynamic_symbol=>3,
  :immortal_dynamic_symbol=>5,
  :immortal_static_symbol=>3663,
  :immortal_symbol=>3668
} 
```

来源：[https ://www.rubyguides.com/2018/02/ruby-symbols/](https://www.rubyguides.com/2018/02/ruby-symbols/)

# c# - 如何从 web 服务返回 JSON

> ID：11447538
> 
> 赞同：11
> 
> 时间：2012-07-12T08:07:55.903
> 
> 标签：c#, asp.net, json, web-services

早晨，

我需要从我的网络服务返回一条消息。下面是我的代码示例，我正在返回一个字符串。

```
[web method]
public string CheckFeedSubmission()
    {
        string responseText = "";
        try
        {
            //Stuff goes here
            responseText = "It Worked!"
        }
        catch (Exception ex) { responseText = "Opps wehave an error! Exception message:" + ex.Message; }
        return responseText ;
    } 
```

我目前收到以下回复...

```
<string xmlns="http://tempuri.org/"/> 
```

理想情况下，我想返回类似的东西

```
 {"success" : true, "message" : "***Message Here***"} 
```

我相信一旦我明白了，如果需要，我将能够退回其他物品。它只是我需要解决的这个基础。

非常感谢所有帮助，在此先感谢:)

更新：刚刚发现这个...

```
 return "{Message:'hello world'}" 
```

我需要类似的东西吗

```
 responseText = "{"success" : true, "message" : \"There has been an error. Message: " + ex.Message + "\"}" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T08:10:39.413

**采用：**

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]//Specify return format.
public string CheckFeedSubmission()
    {
        string responseText = "";
        try
        {
            //Stuff goes here
            responseText = "It Worked!"
        }
        catch (Exception ex) { responseText = "Opps wehave an error! Exception message:" + ex.Message; }
        return responseText ;
    } 
```

**返回的结果将如下所示：**

```
<string xmlns="http://tempuri.org/"/>
 {"success" : true, "message" : "***Message Here***"}
</string> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:11:17.597

请使用您的网络方法的属性

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

调用者将他的内容类型设置为 application/json 以使用 web 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T09:35:04.440

试试这个：

```
[WebMethod] 
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]//Specify return format. 
public bool addUser(UserModel um)
    {
        bool result = false;
        result = Conversion.intToBool(SplashAwardsDB.executeNonQuery(
            "INSERT INTO dbo.User ("
            + "userName, password, firstName, lastName, address, contactNo, birthDate, familyID, familyRole, x, y ) "
            + " VALUES ("
            + "'" + um.userName + "', "
            + "'" + um.password + "', "
            + "'" + um.firstName + "', "
            + "'" + um.lastName + "', "
            + "'" + um.address + "', "
            + "'" + um.contactNo + "', "
            + "'" + um.birthDate + "', "
            + "'" + um.familyID + "', "
            + "'" + um.familyRole + "', "
            + "'" + um.x + "', "
            + "'" + um.y + "')"
            ));
        return result;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T13:50:12.910

要删除服务响应中的 XML 标记，请参阅 StackOverflow 上的此答案：

[ASP.NET WebService 正在用 XML 标记包装我的 JSON 响应](https://stackoverflow.com/questions/2058454/asp-net-webservice-is-wrapping-my-json-response-with-xml-tags)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-22T21:13:13.583

这是我对framewok 4.5.2 的解决方案，在FilterConfig 类中添加以下代码，注意：您将需要lib Newtonsoft。

```
 public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Serialize;
        GlobalConfiguration.Configuration.Formatters.Remove(GlobalConfiguration.Configuration.Formatters.XmlFormatter);
        GlobalConfiguration.Configuration.EnableCors();
        filters.Add(new HandleErrorAttribute());
    }
} 
```

# database - 无法在 Redgate 中提交数据库更改。吉特

> ID：11447541
> 
> 赞同：0
> 
> 时间：2012-07-12T08:08:02.820
> 
> 标签：database, git, redgate

我遇到了一个非常奇怪的 redgate 行为，它阻止我提交对数据库所做的更改（我正在使用 git）。我可以单击“获取最新”并且没有错误，一切正常，但是当我尝试提交时，我得到一个没有任何描述的错误（请参阅屏幕截图）。

我正在寻求帮助，因为我不知道可能出了什么问题。提前致谢！

![s1](../Images/2f13114179103aad39ab382a2dee02b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:38:44.563

另一个建议是创建 GIT 配置文件的副本（称为 GIT2.xml）并添加 -verbose 开关以查看它是否会创建一些有用的输出。您需要取消链接并重新链接到新的配置文件才能获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:59:03.843

请确保您系统的 PATH 指向正​​确的 Git.exe。您可能需要检查 C:\Program Files (x86)\Git\cmd 的路径并将其更改为 C:\Program Files (x86)\Git\bin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:07:57.993

我仍然不知道是什么导致了问题。我最终使用 Tortoise GIT 提交了更改。无论如何，没有人发现 Redgate 正在执行 git checkout 尝试将分支切换到文件？！并用`-q`. 这看起来像 redgate 中的一个错误。

可能开发者误解了git的checkout，把它当成subversion的checkout，但是这个命令完全不一样，他们应该知道的。

感谢所有的答案。这是对我的问题有所了解的帖子： [http ://www.red-gate.com/messageboard/viewtopic.php?t=15157](http://www.red-gate.com/messageboard/viewtopic.php?t=15157)

# c# - 使用 user32.dll 发送单击，消息出现在 spy++ 中，但未单击按钮

> ID：11447543
> 
> 赞同：1
> 
> 时间：2012-07-12T08:08:11.713
> 
> 标签：c#, dllimport, user32, spy++

我在使用 user32.dll 向应用程序发送 Click 时遇到问题。该按钮没有被点击，但在 spy++ 中确实出现了该消息。我用的是win7 x64

代码是用c#编写的：

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern IntPtr FindWindow(string strClassName, string strWindowName);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern IntPtr FindWindowEx(IntPtr parentHandle, IntPtr childAfter, string lpClassName, string lpWindowTitle);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr SendMessage(IntPtr hwnd, uint Msg, IntPtr wParam, IntPtr lParam);

    [DllImport("user32.dll")]
    static extern IntPtr GetWindow(IntPtr hWnd, uint wCmd);

    //
    // Finds a window in the whole tree of childs for a parent window.
    //
    static IntPtr FindWindowRecursive(IntPtr hParent, string szClass, string szCaption)
    {
        IntPtr hResult = FindWindowEx(hParent, IntPtr.Zero, szClass, szCaption);
        if (hResult != IntPtr.Zero)
            return hResult; // found it

        // enumerate all childs and if found one that has childs go in
        IntPtr hChild = FindWindowEx(hParent, IntPtr.Zero, null, null); // first child
        if (hChild != IntPtr.Zero)
        {
            // let's enumerate
            do
            {
                hResult = FindWindowRecursive(hChild, szClass, szCaption);
                if (hResult != IntPtr.Zero)
                    return hResult;  // found it
            } while ((hChild = GetWindow(hChild, GW_HWNDNEXT)) != IntPtr.Zero);
        }

        return IntPtr.Zero; // no childs, so no window was found
    }

    static void Main(string[] args)
    {
        IntPtr win = FindWindow("Omnipage17_MainWnd_Class", "Unbenanntes OmniPage-Dokument 1 - OmniPage");
                SetForegroundWindow(win);
        ShowWindowAsync(win, SW_RESTORE);
        IntPtr ButtonHandle = FindWindowRecursive(win, "BarButton", "c");
        SetActiveWindow(win);
        //sEND Lbuttondown
        IntPtr ptr = SendMessage(ButtonHandle, 0x0201, new IntPtr(0x0001), MakeLParam(81,28));
        //Thread.Sleep(10);
        //Mousemove
        ptr = SendMessage(ButtonHandle, 0x0200, new IntPtr(0x0001), MakeLParam(86,24));
        //lbuttonup
        ptr = SendMessage(ButtonHandle, 0x0202, new IntPtr(0x0001), MakeLParam(81, 28));

        //SendMessage(ButtonHandle, BM_CLICK, IntPtr.Zero, IntPtr.Zero);
    } 
```

以下是该按钮的 spy++ 消息： ![在此处输入图像描述](../Images/506fd2e5472cb0d04ba57f8e2be4a144.png)

如果我发送以下消息，我会收到以下消息：如果那是问题，我不知道，但 lbuttondown，buttoup 出现 2 次（S + R），如果我手动单击它，它会收到 1 条消息（P）也试图用 WM_CLICK 做，但我有同样的问题

*编辑：现在使用 PostMessage 所以 spy++ 显示与我手动单击它相同的消息，但似乎仍然没有单击该按钮*

![在此处输入图像描述](../Images/6888a573a2b969e4f50850b790f158f8.png)

* * *

使用这个库我有同样的问题。

代码：

```
SetForegroundWindow(win);
Rectangle re;
GetWindowRect(ButtonHandle, out re);

Cursor.Position = new Point((re.X + re.Width)/2, (re.Y + re.Height)/2);
WindowsInput.InputSimulator.SimulateKeyDown(WindowsInput.VirtualKeyCode.LBUTTON);
WindowsInput.InputSimulator.SimulateKeyUp(WindowsInput.VirtualKeyCode.LBUTTON); 
```

消息已发送，但未单击按钮 ![在此处输入图像描述](../Images/e516e9852add3e0d4e8d4374db2eadf5.png)

**编辑：**

感谢该链接（[http://www.hanselman.com/blog/IntroducingLync2010SuperSimpleAutoAnswerVideoKioskWithFullScreen.aspx](http://www.hanselman.com/blog/IntroducingLync2010SuperSimpleAutoAnswerVideoKioskWithFullScreen.aspx)），但对于这个库我也有同样的问题：/

代码：

```
SetForegroundWindow(win);
Rectangle re;
GetWindowRect(ButtonHandle, out re);

Cursor.Position = new Point((re.X + re.Width)/2, (re.Y + re.Height)/2);
WindowsInput.InputSimulator.SimulateKeyDown(WindowsInput.VirtualKeyCode.LBUTTON);
WindowsInput.InputSimulator.SimulateKeyUp(WindowsInput.VirtualKeyCode.LBUTTON); 
```

消息已发送，但未单击按钮 ![在此处输入图像描述](../Images/e516e9852add3e0d4e8d4374db2eadf5.png)

**编辑2：**

用户的回答已被删除，因为我发布了我的评论作为答案：

> 这不是答案，这属于你的问题。它与您的代码不匹配，显然您仍在发布 BM_CLICK。这是错误的，应该发送它，您应该发送 BM_CLICK 或发布鼠标消息。而且您正在查看错误的窗口，它是按钮的父级获取 BN_CLICK 通知并对其进行操作。进程的键盘状态错误将是一种典型的故障模式。– 汉斯·帕桑特 18 小时前

关于那个，为什么应该是父母的窗户？spy++ 中的 bcs（我为该按钮（类：BarButton）搜索了下面的屏幕截图，并且我从 user32.dll 获得的句柄也与 spy++ 中的相同 ![在此处输入图像描述](../Images/96f0c4286dcad676609f87b1fdd847f9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:27:48.110

Scott Hanselman 最近发表了与此类似的博客[http://www.hanselman.com/blog/IntroducingLync2010SuperSimpleAutoAnswerVideoKioskWithFullScreen.aspx](http://www.hanselman.com/blog/IntroducingLync2010SuperSimpleAutoAnswerVideoKioskWithFullScreen.aspx)

# c# - System.IO.File.Move 不支持先前定义的字符串吗？

> ID：11447544
> 
> 赞同：0
> 
> 时间：2012-07-12T08:08:12.740
> 
> 标签：c#, c#-3.0, .net, file-manipulation

例如，这样的事情失败了：

```
string oldfile = (@"C:\oldfile.txt");
string newfile = (@"C:\newfolder\newfile.txt");
System.IO.File.Move(oldfile, newfile); 
```

程序崩溃并显示**“不支持给定路径的格式”。**

编辑：我在 Windows 窗体项目与控制台项目中这样做，这有什么不同吗？直觉上我不认为它应该，但你永远不知道......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:16:50.220

问题是逐字字符串格式（@"..."）和转义斜杠（"\"）的混合

第二段代码

```
string oldFile = @"C:\\oldfile.txt" 
```

创建一个不被识别为有效路径的“C:\\oldfile.txt”路径。

使用您提供的第一个版本

```
string oldFile = @"C:\oldfile.txt" 
```

或者

```
string oldFile = "C:\\oldfile.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:13:23.707

```
string oldfile = (@"C:\oldfile.txt");
string newfile = (@"C:\newfolder\newfile.txt");
System.IO.File.Move(oldfile , newfile ); 
```

或字符串 oldfile = ("C:\oldfile.txt"); 字符串 newfile = (@"C:\newfolder\newfile.txt"); System.IO.File.Move（旧文件，新文件）；

如果目录不存在，则使用 Directory.CreateDirectory 创建它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:16:56.257

在以 @ 为前缀的字符串文字中，以 \ 开头的转义序列被禁用。这对于文件路径很方便，因为 \ 是路径分隔符，您不希望它启动转义序列。

您只需使用以下一个：

```
string oldfile = ("C:\\oldfile.txt");
string newfile = ("C:\\newfolder\\newfile.txt");
System.IO.File.Move(oldfile, newfile); 
```

**或者**

```
string oldfile = (@"C:\oldfile.txt");
string newfile = (@"C:\newfolder\newfile.txt");
System.IO.File.Move(oldfile, newfile); 
```

它可以正常工作而不会崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:20:48.523

参考这篇 MSDN 文章
[MSDN 说要这样使用](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)

```
 string path = @"C:\oldfile.txt";
 string path2 = @"C:\newfolder\newfile.txt";

if (!File.Exists(path)) 
            {
                // This statement ensures that the file is created,
                // but the handle is not kept.
                using (FileStream fs = File.Create(path)) {}
            } 
```

# jasper-reports - 修复正在打印的页面中相对于顶部的详细信息带

> ID：11447547
> 
> 赞同：1
> 
> 时间：2012-07-12T08:08:27.100
> 
> 标签：jasper-reports, ireport

我正在使用*iReport* 4.0.1 版。我面临一个问题，我想显示一些必须仅出现在第二页的信息。因此，它既不是 FOOTER 也不是 LAST-PAGE-FOOTER。我正在使用*iReport*生成 jrxml 文件，设计如下所示。

{HEADER}
{DETAIL-BAND-1} 备注：至此我的第一页完成
{DETAIL-BAND-2} 备注：这是来自子报告
{DETAIL-BAND-3} 备注：这是来自sub-report
Some Random Empty Is Left
{DETAIL-BAND-4} 备注：这是我的第二页页脚需要出现的地方。

.
.
.
.

{很多乐队}
。
.
{主要报告完成}

所以，我希望页脚（实际上它不是页脚，它的一些细节只需要出现在 JR 生成的 pdf 的第二页上）相对于打印它的页面的顶部是固定的。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:31:50.260

尝试使用属性“Print When Expression”，然后您可以使用 iReport 中已经存在的名为 PAGE_COUNT 的变量，并且仅当此表达式为真时才会打印。

# c++ - C++ 中的 RSA PKCS#1 V2.1 实现

> ID：11447548
> 
> 赞同：2
> 
> 时间：2012-07-12T08:08:31.407
> 
> 标签：c++, cryptography, rsa

在哪里可以找到 C++ 中的 RSA PKCS#1 V2.1 实现？
我在[这里](http://code.google.com/p/rsa/)找到了一个实现，但我不确定它是否符合该标准。
任何人还可以解释可能导致行动不一致的 RSA 算法的各种实现之间的主要区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:20:41.400

RSA 算法是一种可用于两个目的的*原语：*

*   机密性（即公钥加密），或
*   来源证明（即与密码散列结合时的数字签名）

PKCS#1 是现在大多数人都提到的基于 RSA 的加密和签名的标准**。**更具体地说，最新版本的 PKCS#1 (2.1) 定义了四种不同的方案：

*   PKCS#1 v1.5 加密（仅用于遗留目的，任何人都不应再使用它）
*   OAEP 加密（对于任何新的实施都是首选）
*   PKCS#1 v1.5 签名
*   PSS 签名

换句话说，当您说“ *RSA PKCS#1 V2.1* ”时，您应该真正参考上述任何方案，因为库可以实现方案的子集。

PKCS#1 标准写得非常好，所以它的所有正确实现在定义上都是相互兼容的。由于除了第一个方案之外的所有方案都依赖于加密哈希，因此您还需要验证所选库是否包含您计划使用的库（例如 SHA-256）。

我强烈建议通过查看测试向量集（有多少以及它们来自哪里）来判断库的质量。

尽管如此，*正确*的实现并不一定是*安全*的。除了缓冲区溢出之类的普通事情之外，还应该验证该库是否考虑了所有针对 RSA 实现的最新攻击（至少包括[对 RSA 的最实际的侧通道攻击](http://en.wikipedia.org/wiki/Side_channel_attack)）。这很难评估，但是 - 对于开源库 - 您可以通过查看社区的规模和活动以及他们是否在发现漏洞后立即[发布漏洞](http://cve.mitre.org/)来感受一下。

[像Botan](http://botan.randombit.net/)或[Crypto++](http://www.cryptopp.com/)这样的开源 C++ 库是一个不错的选择。您可能只想检查它们在目标平台上是否足够快，它们的许可证（分别是 BSD 和公共领域）是否可接受，以及它们是否与您的平台兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:51:52.203

不要将学生软件库用于密码学。它们维护不善，可能会导致错误。[请改用Crypto++](http://www.cryptopp.com/)等众所周知的加密框架。他们应该声称与标准兼容。您可以检查他们是否针对标准的参考测试向量进行测试；通常存在类似的东西。

如果库获得 FIPS 或通用标准批准（例如 OpenSSL 获得 FIPS 批准），则奖励加分。

# forms - 在 Symfony 2 多租户应用程序中测试表单篡改

> ID：11447549
> 
> 赞同：2
> 
> 时间：2012-07-12T08:08:31.783
> 
> 标签：forms, symfony, security, symfony-forms

在我的项目中，`User`可以创建 a`Customer`并将其分配为零或更多`Tag`。这些实体当然有关系`User`。这是由具有[实体类型](http://symfony.com/doc/current/reference/forms/types/entity.html)`tag`字段的表单完成的，由当前登录的用户过滤：

```
$user = $this->securityContext->getToken()->getUser();

$builder
    ->add('tags', 'meta_selector', array(
        'label'         => 'Tag',
        'class'         => 'Acme\HelloBundle\Entity\Tag',
        'property'      => 'select_label',
        'query_builder' => function(EntityRepository $er) use($user) {
            $qb = $er->createQueryBuilder('t');

            return $qb
                ->where($qb->expr()->eq('t.user_id', ':user')
                ->orderBy('t.name')
                ->setParameter('user', $user);
        }
    ))
; 
```

这工作正常。查看生成的 HTML 标签呈现为复选框：

```
<div class="controls">
    <label class="checkbox">
        <input type="checkbox" value="2" name="customer[tags][2]"
            id="customer_tags_2"> A Tag
    </label>
    <label class="checkbox">
        <input type="checkbox" value="3" name="customer[tags][3]" 
            id="customer_tags_3"> Another Tag
    </label>
</div> 
```

我想进一步调查表单篡改。特别是从受信任的用户添加 POST 请求`customer%5Btags%5D%5B1%5D=1`，这是一个`id`等于 1 的标签，它存在但它是由另一个用户创建的。攻击者用户正在使用另一个用户创建的标签创建客户：

```
POST http://localhost/Symfony2/web/app_dev.php/app/customers/new HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: it-it,it;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost/Symfony2/web/app_dev.php/app/customers/new
Cookie: PHPSESSID=3avu1a2a1eufthr5tdftuhrnn7; hl=it
Content-Type: application/x-www-form-urlencoded
Content-Length: 276

customer%5Bfirst%5D=fake&customer%5Blast%5D=fake&customer%5Bgender%5D=m&customer%5Bbirthday%5D=&customer%5Bemail%5D=&customer%5Bmobile%5D=&customer%5Baddress%5D=&customer%5Bcountry%5D=IT&customer%5Btags%5D%5B1%5D=1&customer%5B_token%5D=455783fa2f866677669c9034a90554b9f75d68b4 
```

..并且似乎有某种控制可以防止这种情况发生。结果是`200 OK`（应该是`302`成功的情况下）没有任何错误，并再次呈现表单。当然实体没有持久化。

实际问题是：Symfony 2 如何防止这种形式的“篡改”攻击？一个可能的解释是它检查提交的标签是否存在于表单构建器返回的集合中。但是需要参考...

**编辑**：即使禁用 CSRF 保护，结果也是一样的。顺便说一句，我传递了一个有效的令牌，而 CSRF 旨在防止其他类型的攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:30:08.940

您的问题的答案可以很容易地解释。每个选项字段（实体类型是选项类型的特化）都有一个选项列表。对于每个选择，该领域都知道

*   `Tag`选择（例如实例）的模型表示（“选择” ）
*   选择的视图表示（“值”）（例如 ID）
*   视图中使用的标签（例如 的属性`Tag`）

当您提交表单时，选择字段会在此列表中查找与提交的视图表示匹配的模型表示。如果找不到，则该字段保持未分配状态。

此逻辑的代码可以在类[ChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.php)及其后代中找到，在您的情况下[为 EntityChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Form/ChoiceList/EntityChoiceList.php)。提交后，将执行[getChoicesForValues()](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Form/ChoiceList/EntityChoiceList.php#L194)方法，该方法进行查找并针对速度进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:41:31.927

大胆猜测：CSRF 保护已启用，您不会呈现错误。

# c# - 将 3 行代码从 c# 更改为 php

> ID：11447552
> 
> 赞同：-7
> 
> 时间：2012-07-12T08:08:47.583
> 
> 标签：c#, php

任何人都可以给我一些关于如何用 PHP 编写以下代码的想法，因为下面的代码是用 C# 编写的

```
var response = HttpContext.Current.Response;
response.Clear();
response.AppendCookie(new HttpCookie("fileDownloadToken", downloadTokenValue); 
response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}",
desiredFileName)); 
response.Flush(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:13:45.853

你可以这样实现，

```
<?php

    $downloadTokenValue = 'Youre Value';
    $desiredFileNames = 'Desired File Name Value';

    setcookie("fileDownloadToken", $downloadTokenValue, time()+3600);
    header("content-disposition: attachment;filename=$desiredFileNames"); 
    ?> 
```

如果您想阅读该 Cookie，您可以`echo $_COOKIE["fileDownloadToken"]`；

# php - 无法让 PHP 接受来自漂亮汤 Python 脚本的 POUND 符号

> ID：11447554
> 
> 赞同：1
> 
> 时间：2012-07-12T08:08:48.380
> 
> 标签：php, python, utf-8, beautifulsoup, utf

所以我有一个从活动网页中提取信息的脚本。网址是这样的：[http ://everguide.com.au/melbourne/event/2012-jul-14/colour/](http://everguide.com.au/melbourne/event/2012-jul-14/colour/)

这个 php 脚本正在调用一个 python 脚本（它是 for 循环的一部分）：

```
${"tmp" . $i} = utf8_encode (exec("python myscrape.py ${"eu" . $i}")); 
```

它传递一个 URL。python脚本是这样的：

```
# -*- coding: utf-8 -*-
import sys
URL = sys.argv[1]
#$URL = 'http://everguide.com.au/melbourne/event/2012-jul-14/colour/'

import urllib2
req = urllib2.Request(URL)
response = urllib2.urlopen(req)
html = response.read()

from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup(html.decode('utf-8'))
soup.prettify()

import re

for node in soup.findAll(itemprop="name"):
    n = ''.join(node.findAll(text=True)) 
for node in soup.findAll(itemprop="url"):
    v = ''.join(node.findAll(text=True))

for node in soup.findAll("div", { "class" : "time" }):
    d = ''.join(node.findAll(text=True))

for node in soup.findAll("a", { "id" : "ctl00_holderBody_ctl00_lnkCat" }):
    c = ''.join(node.findAll(text=True)) 

vu = v
vu.encode('utf-8', 'xmlcharrefreplace')
re.escape(vu)

print n,"|", d,"|", vu,"|", c 
```

效果非常好，但只能在 VU 之前返回到 or 管道 - 它不能超过那个！

所有文件、HTML 和 php 都设置了 UTF-8 编码。

当 V 变量中有特殊字符时，它会中断并停止。如果没有特殊字符，它可以完美地工作。

预期输出为：

```
Colour | 14 July @ 7:30PM | 1000 £ Bend | Clubs & Parties 
```

在服务器上运行脚本（使用相同的 python 命令）但通过 PHP 运行脚本时可以看到此输出 - 我无法重新输入 Venue 字符串！

请帮忙

瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:17:49.347

`vu.encode`返回编码字符串......因为你没有分配编码结果，这只是被扔掉了。你有没有尝试过

`vu = vu.encode('utf-8', 'xmlcharrefreplace')`

您还需要跳过转义，因为它会弄乱编码的 unicode。

# c# - 将旧代码从 J# 重构为 C#

> ID：11447555
> 
> 赞同：1
> 
> 时间：2012-07-12T08:08:54.087
> 
> 标签：c#, xml, xmlnodelist

我有一些旧的 J# 代码要迁移到 C#

```
 XmlNodeList itemTransferOutNodes = 
                 strXML.GetElementsByTagName("ItemTransferOut");
  XmlElement itemInfo = 
                 itemTransferOutNodes.Item(itemTrOutNodesCnt)
                                     .ChildNodes.Item(0)
                                     .get_Item("itemInfo"); 
```

我没有在`C#`API 中看到调用的`XmlNodeList` 方法 `get_Item`。我应该改变 什么`get_Item`。`c#`

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:12:30.347

```
XmlElement itemInfo = itemTransferOutNodes.Item(itemTrOutNodesCnt)
                                          .ChildNodes
                                          .Item(0)["itemInfo"]; 
```

[MSDN 上的 XMLNode.Item 文档](http://preview.library.microsoft.com/en-us/library/sss31aas%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:20:01.050

有几种方法，我会推荐[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

如果没有看到你的 XML，我猜它会是这样的：

```
strXml.Root
      .Decendants("ItemTransferOut")
      .First(xele => xele.Name.LocalName == "itemInfo") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:25:44.780

J# 不像 C# 那样支持属性，因此它们是通过使用方法来“伪造”的。[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/aa288736%28v=vs.71%29.aspx)上找到有关该问题的更多信息。如果 C# 对象具有名为 SomeProperty 的属性：

```
 public class Dummy {
      public string SomeProperty { get; set; }
 } 
```

在 J# 中，您必须调用 get_SomeProperty() 和 set_SomeProperty(string value)：

```
 public class Dummy
 {
      private String someProperty;

      /** @property */
      public void set_SomeProperty(String val) { 
          someProperty = val; 
      }

      /** @property */
      public String get_SomeProperty() { 
          return someProperty; 
      }
 } 
```

反之亦然。

如果您在 J# 中找到名为 get_xxx 或 set_xxx 的类方法，则很可能在 C# 中，该对象具有名为 xxx 的属性。

所以基本上，正如其他人提到的那样，您必须在代码中使用 Item 属性：

```
XmlNodeList itemTransferOutNodes = 
                  strXML.GetElementsByTagName("ItemTransferOut");

XmlElement itemInfo = 
                  itemTransferOutNodes.Item(itemTrOutNodesCnt)
                  .ChildNodes.Item(0).Item["itemInfo"]; 
```

希望有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:16:27.817

使用[XmlNode.Item 属性（字符串）](http://msdn.microsoft.com/en-us/library/sss31aas)。来自 msdn：

> 获取具有指定名称的第一个子元素。

# c++ - 操作系统开发。如何开始？

> ID：11447557
> 
> 赞同：0
> 
> 时间：2012-07-12T08:09:00.033
> 
> 标签：c++, c, operating-system, kernel

我是Java开发人员。我一直想编写自己的内核并开发一个小型操作系统，我不知道这个内核或操作系统会是什么样子或它们会做什么，但我有热情开发一些有用的东西来为这个广阔而美丽的开源世界做出贡献. 我想这样做，但我的问题是我不知道如何开始。我在大学时学过 c/c++，现在我不太记得这些编程语言了，但我可以重新开始学习。我知道这段旅程将是艰难而漫长的，但每一次漫长的旅程都是从一步开始的。

为了确保我朝着正确的方向迈出正确的一步，我需要本论坛专家的帮助来指导我正确的方向。我并不期待用勺子喂食，而是希望您对此的想法以及对可以帮助像我这样的新手开始使用此类编程的好书和链接的参考。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:48:42.987

老实说：

> 我不知道这个内核或操作系统会是什么样子，或者它们会做什么，但我热衷于开发一些有用的东西来为这个广阔而美丽的开源世界做出贡献。

如果您的目标是为开源软件池做出贡献，*请不要*尝试编写操作系统，而是选择不同的事情来做。确实有*数百个*OS 项目，其中一些项目已经酝酿了好几年，[OSDev.org](http://www.osdev.org)上的 OS 开发社区的普遍共识是，它很有趣，但不一定富有成效。

如果您坚持，请按照我提供的链接进行操作；您将在那里找到信息和更多链接。

**编辑：**如果您正在寻找一个有趣的项目来学习一门新语言，请选择*您*想要使用的东西。这么多人在早期编写计算器或地址管理程序是有原因的。但说真的，内核空间中的 C++ 与应用程序开发中的 C++ 非常不同，以至于它们也可以是不同的语言。

# dynamic - 在 iText 中动态获取表格高度

> ID：11447563
> 
> 赞同：3
> 
> 时间：2012-07-12T08:09:34.780
> 
> 标签：dynamic, itext

有没有办法在将表格添加到文档之前获取表格的高度？

乍一看，我认为表格中的行数足以计算高度，因为我知道字体大小。但是，有些行违反了该规则。例如，一个单元格可能存储一个包含多行的段落。因此，我需要知道的是每一行的总高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:47:14.847

是的，答案并不复杂。

为了得到一张桌子的高度，必须先设置桌子的宽度。换句话说，

```
table.setTotalWidth((PageSize.A4.getWidth() - document.leftMargin()
- document.rightMargin()) * table.getWidthPercentage() / 100);

System.out.println(table.calculateHeights()); 
```

确实给出了桌子的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-01T05:42:40.023

如果您想动态获取表格的高度，您只能在将所有内容添加到表格后才能执行此操作。为了完成这项工作，您必须首先设置其固定宽度属性和锁定宽度属性。

例如

```
table.setTotalWidth(555f);
table.setLockedWidth(true); 
```

在此之后，您可以使用它的`table.getTotalHeight()`方法获得桌子的高度

# wpf - DataContext 和 DataGridTemplateColumn 的问题

> ID：11447564
> 
> 赞同：2
> 
> 时间：2012-07-12T08:09:37.897
> 
> 标签：wpf, data-binding, datagrid, checkbox

我正在使用 a`DataGridTemplateColumn`在标题中显示一个复选框。Checkbox 用于显示是否所有单元格是`checked`和（取消）选中所有单元格。

XAML：

```
 <DataGridTemplateColumn>
                <DataGridTemplateColumn.Header>
                    <CheckBox IsChecked="{Binding Path=DataContext.AreAllVehiclesChecked, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl, AncestorLevel=1}}" Command="{Binding Path=DataContext.ChangeAllItemsSelectedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl,AncestorLevel=1}}" IsThreeState="False" />   
                    </DataGridTemplateColumn.Header>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}" Command="{Binding Path=DataContext.ChangeItemSelectionCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl,AncestorLevel=1}}" CommandParameter="{Binding }"></CheckBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

错误信息：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“CheckBox”（名称=“”）上找不到“IsSearchSelected”属性。绑定表达式：路径=IsSearchSelected；DataItem='CheckBox' (Name=''); 目标元素是'CheckBox'（名称=''）；目标属性是“IsChecked”（类型“Nullable`1”）
> 
> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“CheckBox”（名称=“”）上找不到“CreateProjectFromSelectedVehiclesDemandedCommand”属性。BindingExpression:Path=CreateProjectFromSelectedVehiclesDemandedCommand；DataItem='CheckBox' (Name=''); 目标元素是'CheckBox'（名称=''）；目标属性是“命令”（类型“ICommand”）

让我大吃一惊的是所有单个单元格的带有 CheckBox 的 DataTemplate 工作得很好。属性和命令已正确绑定。不起作用的是标题中的复选框。我有（完全相同的结构）在另一个项目中正确运行。

任何想法我做错了什么？

**更新：**我今天早上又试了一次（因为使用了 snoop 等），突然 - 没有更改代码 - 它（再次）工作。这里最好的 StackOverflow 实践是什么 -> 删除问题？

再次感谢所有试图帮助我的人！

# unit-testing - Junit：测试选择的测试而不是所有测试

> ID：11447565
> 
> 赞同：2
> 
> 时间：2012-07-12T08:09:40.093
> 
> 标签：unit-testing, netbeans, junit

我在 JUnit 中执行测试时遇到问题。想象一下，您有一个测试用例类，包含 fe 100 个测试，没有测试套件，也没有主程序 - 测试用例类在 com 端口上测试设备。JUnit 项目在 Netbeans 中。我想运行测试 - 但不是同时运行所有测试，我想在实际测试之前选择要运行的测试。

一旦我在 Eclipse 中看到类似的东西 - 但它不是我的项目，我不知道它是如何完成的，以及如何在 netbeans 中做同样的事情。这是一个单独的窗口，在运行测试之前弹出。在这个窗口中，有带有 @Test 注释的方法名称的复选框，您可以选择要运行的测试并单击运行 - 这样您就可以运行您想要的。

有谁知道如何在netbeans中做到这一点？它是任何库或插件吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:21:58.817

您可以查看[Run single test from a JUnit class using command-line](https://stackoverflow.com/questions/9288107/run-single-test-from-a-junit-class-using-command-line)。它确实允许您在给定包含多个测试用例的类的情况下指定要运行的测试。作为命令行，您可以编写自己的测试套件来运行您想要的特定测试套件。

我还注意到您的另一个问题[Junit: changed sequence of test running](https://stackoverflow.com/questions/11448001/junit-changing-sequence-of-test-running)。使用脚本方法，您实际上可以控制测试的顺序。

这种方法虽然没有利用 Eclipse 或 NetBean 的 JUnit 测试运行器，但它是一种非常具体的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T13:03:33.157

Netbeans 现在支持运行单个测试：

[![在此处输入图像描述](../Images/924f987902cc83241d74b8dfaf6c25c1.png)](https://i.stack.imgur.com/qngvM.png)

# javascript - 如何在 HTML5 中为 ipad Web 应用程序创建条形图

> ID：11447566
> 
> 赞同：-2
> 
> 时间：2012-07-12T08:09:46.150
> 
> 标签：javascript, ios, ipad, html

我有适用于 ipad 的 ios 本机应用程序，带有 bar 我希望该应用程序转换为 Web 应用程序，所以我在 HTML5 中制作应用程序，但问题是我如何为 HTML5 应用程序创建条形图。是否有任何文档或内置 api这。

就像 iOS 一样，我们有这样的 EasyGraph

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:14:46.487

你可以看看[http://www.sencha.com/products/touch/charts](http://www.sencha.com/products/touch/charts)

基本上我会使用 DIV 和 css 制作基本的条形图

# linux - 将 .dat 文件转换为 .xls 文件

> ID：11447567
> 
> 赞同：1
> 
> 时间：2012-07-12T08:09:49.470
> 
> 标签：linux, perl

我正在使用自动化下载 .dat 文件并使用 perl 中的 excel 解析器模块对其进行解析。但是每当我尝试访问 .dat 文件时，它都会说不是有效的 excel 文件。（所有这些操作都是在linux中完成的）

作为一种解决方法，我已将 .dat 文件移动到 Windows 机器并使用 excel 文件打开它。然后将 .dat 文件保存为 windows 中的 excel 文件。然后将该文件重新发送到 Linux 机器。现在 perl 脚本可以解析文件了。

我可以将 .dat 文件转换为 linux 本身中的 excel 文件，而不是这条长路径吗？如果是，那怎么办？

我的 .dat 文件中的前几行：

F_NF_CD ART_GRP_NO ART_GRP_DESCR ART_GRP_SUB_NO ART_GRP_SUB_DESCR ART_NO ART_DESC SELL_UNIT PACK_TYPE SELL_PR VAT_PERC MRP_PRICE STOCK ART_STATUS EXTRA_INFO BLOCK_IND

F 191 卫生纸 3 女士卫生 287432 SOFY 侧墙 大 SOFT15P 1 EA 89.8 5 99 47 1 出售

F 191 卫生纸 3 女士卫生 287422 SOFY 侧墙常规 SOFT15P 1 EA 80.73 5 89 0 1 出售

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:26:28.887

实际上，脚本会在解析文件之前尝试读取文件的元数据。如果模块看到元数据不是 excel，它将不会继续进行。因此，将 .dat 文件的元数据更改为 .xls 很重要。如果没有适当的转换工具，我认为这是不可能的。

# php - 解析 rss 提要给出 500 内部服务器错误

> ID：11447578
> 
> 赞同：1
> 
> 时间：2012-07-12T08:10:11.333
> 
> 标签：php, parsing, rss, feed

当我尝试解析 google rss 提要时，我收到 Network error: 500 internal server error in chrome and firefox developer tool。下载 rss 提要（使用 curl）的第一部分工作正常。

我在以下位置找到了这个示例：[http ://www.joevasquez.info/development/parsing-xml-feeds-with-php-rss-and-atom/#more-63](http://www.joevasquez.info/development/parsing-xml-feeds-with-php-rss-and-atom/#more-63)

有人可以指出我做错了什么吗？谢谢你。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<?php
if (function_exists("curl_init")){
    $ch=curl_init();
    //curl_setopt($ch,CURLOPT_URL,'http://www.joevasquez.info/feed/');
    curl_setopt($ch,CURLOPT_URL, 'http://news.google.com/news?hl=en&topic=t&output=rss');
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    //curl_setopt($ch,CURLOPT_HEADER,0);

    $data=curl_exec($ch);

    curl_close($ch);
    //print($data);

    $doc=new SimpleXmlElement($data,LIBXML_NOCDATA);

    if (isset($doc->channel)) parseRSS($doc);

    function parseRSS($xml){
        $cnt=count($xml->channel->item);
        for ($i=0;$i<$cnt;$i++){
            $url=$xml->channel->item[$i]->link;
            $title=$xml->channel->item[$i]->title;
            $desc=$xml->channel->item[$i]->description;

        echo '<a href="'.$url.'">'.$title.'</a>'.$desc.'<br>';
    }
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:58:13.837

您忘记在 for 循环后关闭括号。

```
for ($i=0;$i<$cnt;$i++){
     $url=$xml->channel->item[$i]->link;
     $title=$xml->channel->item[$i]->title;
     $desc=$xml->channel->item[$i]->description;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T05:57:44.500

好的，我让它工作了。日志中的错误：

```
Fatal error:  Call to undefined function  parserss()in /home1/aquinto1/public_html/belibook.com/curl/curl3.php on line 17 
```

我在调用函数 parserRSS 之前剪切并粘贴了它，现在它工作正常。

以下是我的修改：

```
$doc=new SimpleXmlElement($data,LIBXML_NOCDATA);

function parseRSS($xml){
    $cnt=count($xml->channel->item);
    for ($i=0;$i<$cnt;$i++){
        $url=$xml->channel->item[$i]->link;
        $title=$xml->channel->item[$i]->title;
        $desc=$xml->channel->item[$i]->description;
        echo '<a href="'.$url.'">'.$title.'</a>'.$desc.'<br>';
    }
}

if (isset($doc->channel)) parseRSS($doc); 
```

谢谢你们俩！

# php - 获取正确的 JSON 格式

> ID：11447582
> 
> 赞同：3
> 
> 时间：2012-07-12T08:10:18.830
> 
> 标签：php, mysql, json

所以我正在尝试制作一个 JSON 对象，它应该为我保存一些关于一些问题的信息。这是我希望它如何呈现的伪代码：

```
{
 "page" : 1,
 "info" :
          {
           "id" : 1,
           "type" : 3,
           "description": "How to do JSON?",
           "alternatives" : 
                           {
                            "id" : 1,
                            "description" : "Dunno"
                           }
                           {
                            "id" : 2,
                            "description" : "Let me show you"
                           }
                           { 
                            "id" : 3,
                            "description" : "I refuse to show you"
                           }
           }
           "id" : 2,
           "type" : 1,
           "description": "Do you get it?",
           "alternatives" : 
                           {
                            "id" : 1,
                            "description" : "Yes"
                           }
                           {
                            "id" : 2,
                            "description" : "No"
                           }
           }
} 
```

所以下面的代码来自*Nightmare*（答案之一），它完全符合我想要对页面和问题做的事情，但我似乎无法弄清楚如何将每个问题的替代方案联系起来。您可以在底部看到我尝试过的一个片段，但它拼写不正确，我已经为此苦苦挣扎了一段时间。

```
$before_json_encode[$row['page']][] = array(
  'id' => $row['id'],
  'type' => $row['type'],
  'description' => $row['description'],
  'alternatives' => $alternativesarray//im not sure about here,dont know the structure of the alternative array
); 
```

关于我希望 JSON 数据的层次结构如何显示的另一个说明。例如，我需要能够选择：特定页面上所有问题的所有替代方案。因此，如果我想在我的投票中生成第 3 页，我可以首先在第 3 页子数组中找到问题，然后再次从每个问题中访问该问题自己的子数组中所有连接的备选方案。抱歉对我的问题的解释不佳，这有点复杂：/

```
Page
 Question
  Alternative
  Alternative
  Alternative
 Question
  Alternative
  Alternative
  Alternative
 Question
  Alternative
  Alternative
Page
 Question
  Alternative
  Alternative
 Question
  Alternative
  Alternative 
```

**更新：**第三层：

```
$rows_test2[$r['page']]
['id' => $r['id'],
'type' => $r['type'],
'description' => $r['description']]
[] =
        array (
        'altid' => $t['altid'],
        'altdesc' => $t['altdesc']); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:17:33.860

```
$rows[] = array(
    "page" => 1,
    "info" => array(
        "id" => 1,
        "type" => 3,
        "description" => 'desc',
    )
);
echo json_encode($rows); // [{"page":1,"info":{"id":1,"type":3,"description":"desc"}}] 
```

**更新：**

```
$alternativesarray[]=array('id'=>'1', 'description'=>'yes');
$alternativesarray[]=array('id'=>'2', 'description'=>'no');
$rows[] = array(
    "page" => 1,
    "info" => array(
        "id" => 2,
        "type" => 3,
        "description" => 'desc',
        "alternatives" => $alternativesarray
    )
); 
print json_encode($rows); // [{"page":1,"info":{"id":2,"type":3,"description":"desc","alternatives":[{"id":"1","description":"yes"},{"id":"2","description":"no"}]}}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:52:56.743

也许像这样？

```
$before_json_encode[$row['page']][] = array(
      'id' => $row['id'],
      'type' => $row['type'],
      'description' => $row['description'],
      'alternatives' => $alternativesarray//im not sure about here,dont know the structure of the alternative array
); 
```

# java - 如何确定字符串中包含的数据类型？

> ID：11447583
> 
> 赞同：0
> 
> 时间：2012-07-12T08:10:19.100
> 
> 标签：java, variables

我有一个接受 String 参数的方法。

字符串可以包含整数、长整数、双精度、布尔值或只是普通的旧字符和数字。

我需要一种简单的方法来确定字符串的类型。

一种方法可能是拥有一堆 try catch 块并尝试将其解析为每种类型，如果抛出异常，则可能不是该数据类型。这似乎是错误的，因为它是一个启发式程序，而不是一个确定性程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:13:50.193

我认为通常假设您需要知道它是什么——通常这些参数要么是已知的，要么带有一些元数据。您始终可以使用正则表达式来查找诸如数字和句号之类的标记。

有用的模式：

```
Pattern.compile("(?:\\+|\\-)?\\d+\\.\\d+");` // Matches a double.
Pattern.compile("(?:\\+|\\-)?\\d{numberOfDigitsBeforeYouWantToCallItALong,}"); // Matches longs.
Pattern.compile("(?:\\+|\\-)?\\d{,numberOfDigitsBeforeYouWantToCallItALongMinusOne}"); // Matches ints.
Pattern.compile("true|false|t|f|yes|no|y|n"); // Matches booleans. 
```

其他一切都是字符串。

编辑：从您的编辑中，我看到您已经添加了它的使用方式，您可以使用它`"(?:\\+|\\-)?\\d+"`来检测数字，如果您的目标类型是 int 或 long，请接受它并将其解析为目标类型，而不是基于数字位数。或者您可以尝试直接解析为适当的类型并捕获`Exception`，因为无论如何您都知道预期的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:21:56.750

如果您知道参数后应该知道类型*应该*是什么，那么将字符串解析为该类型并捕获异常是可以的 - 这是使用异常来捕获无效数据的适当使用（只要您只尝试一种类型。 ..)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:50:03.417

There are only 3 special cases: true, false, and a number. Just check if the string is "true", then check if it is "false", then use Double.parseDouble() (since a long can fit in a double). If it isn't equal to true or false, and Double.parseDouble throws an exception, then it is just a string

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T08:15:07.010

你可以使用 Scanner 类吗？

```
String input = "1 fish 2 fish red fish blue fish";
Scanner s = new Scanner(input).useDelimiter("\\s*fish\\s*");
System.out.println(s.nextInt());
System.out.println(s.nextInt());
System.out.println(s.next());
System.out.println(s.next());
s.close(); 
```

会输出

```
1
2
Red
Blue 
```

可能很复杂或者你想要什么

# jquery - 如何从选择框中获取名称并获取值？

> ID：11447591
> 
> 赞同：0
> 
> 时间：2012-07-12T08:10:32.173
> 
> 标签：jquery

我有一个示例代码：

```
<select name="code_id" id="code_id">
   <option value="1">Code 1</option>
   <option value="2">Code 2</option>
</select>

<script type="text/javascript">
jQuery(document).ready(function(){
     var code_id = this.code_id.value; // Get value
     var code_name = this...// Get code name
     alert(code_name); 
});
</script> 
```

如何获取代号（代码 1、代码 2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:13:48.880

这将为您提供所有代号：

```
$.each($("#code_id option"), function (i, opt) { console.log($(opt).text())}) 
```

这将为您提供选定的代号

```
$("#code_id").text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:15:30.817

***澄清你的问题***
如果它是你想要的选定选项的文本，那么：

```
 $("#code_id option:selected").text(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:15:32.417

像这样的东西

```
$('#code_id option').each(function() { alert($(this).text()); }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T08:17:04.453

```
$(document).ready(function(){
 $('#code_id').change(function(){
     alert($(this).find('option:selected').text());
 });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T08:13:28.300

您可以使用[`:selected`](http://api.jquery.com/selected-selector/)选择器来选择选定的选项并`text()`获取它的文本。

> 选择所有被选中的元素。

```
$(document).ready(function(){
     var txt = $('#code_id option:selected').text()
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-12T08:14:35.517

你可以这样做：

```
$('#code_id option[value="'+$(this).val()+'"]').html(); 
```

您可能需要进行一些修改以适应您的问题

# android - ListView：限制滚动速度

> ID：11447592
> 
> 赞同：2
> 
> 时间：2012-07-12T08:10:34.913
> 
> 标签：android, android-listview, swipe-gesture

> **可能重复：**
> [Android Listview 减慢滚动速度](https://stackoverflow.com/questions/5590001/android-listview-slow-down-scroll-speed)

当用户在其上滑动时，`ListView`其滚动速度会变得相当高。我想限制速度 - 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:20:53.960

看一下这个 -：

```
private class SpeedMeterOnScrollListener implements OnScrollListener {

        private long timeStamp;
        private int lastFirstVisibleItem;

        public SpeedMeterOnScrollListener() {
            timeStamp = System.currentTimeMillis();
            lastFirstVisibleItem = 0;
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            long lastTime = System.currentTimeMillis();
            //calculate speed by firstVisibleItem, lastFirstVisibleItem, timeStamp and lastTime
            timeStamp = lastTime;
            lastFirstVisibleItem = firstVisibleItem;
        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
        }
    } 
```

# html - 如何根据表格中的 oif col 数量应用不同的样式

> ID：11447594
> 
> 赞同：0
> 
> 时间：2012-07-12T08:10:36.493
> 
> 标签：html, css

我有不同的表，它们相似，但唯一的区别是它们可能有不同的列。我想定义一个样式，如果列数是 2，那么第一个 td 的宽度是 80%，第二个的宽度是 105。如果表格有三列，它们的宽度应该是 45%、45% 和10% 等等。

我怎样才能在 CSS 中做到这一点？如果在 CSS 中无法做到这一点，我该如何在 JQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:21:36.907

据我所知，这仅使用 CSS 是不可行的，因为您需要计算百分比并检测列数。

我用一个 jQuery 示例设置了[一个小提琴](http://jsfiddle.net/scumah/eW87t/2/)，假设每行的列数相同（不使用 colspan）。我是这样做的：

```
var cols       = $('table tr:first td').size(),
    width      = 90 / cols,
    last_width = 10;

$('table td').css('width', width + "%");
$('table tr > td:last-child').css('width', last_width + "%");
​ 
```

使用的变量是列数、最后一列大小和其他列大小（按列数占宽度的 90%）。然后我们将得到的宽度应用于所有单元格，并将最后一列宽度应用于每行的最后一个单元格。

# visual-studio-2010 - 在 VS2010 for Teams 中添加书签/列出 TODO 的最佳方法是什么？

> ID：11447595
> 
> 赞同：0
> 
> 时间：2012-07-12T08:10:36.927
> 
> 标签：visual-studio-2010, bookmarks, todo, tasklist

由于 VS2010 任务列表仅扫描评论标记的活动文件，如果开发人员在不同的驱动器/路径上有项目，则书签可能会造成麻烦，对于不仅仅是两个人在工作的项目，管理打开的 TODO 的最佳方法是什么？

你如何解决这些问题？

我们使用 Bugtracking 工具，但对于开发人员来说，在代码中使用诸如“TODO”之类的标签是很常见的。现在我们使用 PRAGMAS，但我们希望摆脱它们以在我们的夜间测试构建中获得更少的警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:12:40.467

对于正确的“待办事项”管理，我们使用 JIRA，但称其为“待办事项”管理有点害处。当您想要跨团队管理工作链时，您需要开始查看第三方工具。

如果您想要 Visual Studio 集成，那么 Visual Studio Team System 就是为此而设计的，但我没有这方面的经验，因此不会再发表任何评论。

我过去使用过的另一个工具是[Axosoft 的 OnTime](http://www.axosoft.com/) ，但它与我上次使用时相比发生**了很大变化。**也就是说，当我使用它*时*，它是一个非常称职的工具——我只能希望它随着年龄的增长而有所改善。

在家里，我使用[bitbucket](https://bitbucket.org/)中的问题跟踪软件，但这可能也在后台使用 JIRA - 同一家母公司。

* * *

要改进 VS 中的“待办事项”视图，您可以使用 ReSharper。它有一个待办事项列表，可以扫描所有文件并将它们放在树视图中，但它不是免费的。

![ReSharper 待办事项](../Images/4260688f14352dde38c861fa7eab356f.png)

可通过“ReSharper -> Windows -> 待办事项”菜单访问。

待办事项带有大量自定义，因此您可以添加自己的文字并控制它们在代码文件中的显示方式（例如，待办事项是粗体蓝色）。然后，您可以将过滤器应用到待办事项窗口以限制您正在查看的内容。

如果某个开发人员有待办事项，您可以轻松地制作一个“TODO AH”标签（开发人员姓名首字母缩写），然后该开发人员可以过滤他自己的项目。

ReSharper 物有所值，原因可能比我目前有效计算的要多。

# powershell - 在 Windows PowerShell 中重定向标准输入\输出

> ID：11447598
> 
> 赞同：76
> 
> 时间：2012-07-12T08:10:40.533
> 
> 标签：powershell, powershell-2.0, stdin

在 Windows PowerShell 上重定向标准输入/输出所需的语法是什么？

在 Unix 上，我们使用：

```
$./program <input.txt >output.txt 
```

如何在 PowerShell 中执行相同的任务？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-03T02:33:58.190

您不能将文件直接挂接到标准输入，但您仍然可以访问标准输入。

```
Get-Content input.txt | ./program > output.txt 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2019-08-25T22:38:28.343

如果有人在寻找大文件的“获取内容”替代方案（如我），您可以在 PowerShell 中使用 CMD：

```
cmd.exe /c ".\program < .\input.txt" 
```

或者你可以使用这个 PowerShell 命令：

```
Start-Process .\program.exe -RedirectStandardInput .\input.txt -NoNewWindow -Wait 
```

它将在同一窗口中同步运行程序。但是当我在 PowerShell 脚本中运行它时，我无法找到如何将这个命令的结果写入变量，因为它总是将数据写入控制台。

编辑：

要从 Start-Process 获取输出，您可以使用选项

> -重定向标准输出

用于将输出重定向到文件，然后从文件中读取：

```
Start-Process ".\program.exe" -RedirectStandardInput ".\input.txt" -RedirectStandardOutput ".\temp.txt" -NoNewWindow -Wait
$Result = Get-Content ".\temp.txt" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-12T08:30:10.787

对于输出重定向，您可以使用：

```
 command >  filename      Redirect command output to a file (overwrite)

  command >> filename      APPEND into a file

  command 2> filename      Redirect Errors 
```

输入重定向以不同的方式工作。例如看到这个 Cmdlet [http://technet.microsoft.com/en-us/library/ee176843.aspx](http://technet.microsoft.com/en-us/library/ee176843.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-27T18:52:27.180

或者你可以这样做：

就像是：

```
$proc = Start-Process "my.exe" "exe commandline arguments" -PassThru -wait -NoNewWindow -RedirectStandardError "path to error file" -redirectstandardinput "path to a file from where input comes" 
```

如果您想知道进程是否出错，请添加以下代码：

$exitCode = $proc.get_ExitCode()

```
if ($exitCode){
    $errItem = Get-Item "path to error file"
    if ($errItem.length -gt 0){
        $errors = Get-Content "path to error file" | Out-String
    }
} 
```

当您需要处理外部程序/进程时，我发现这样我确实可以更好地处理脚本的执行。否则，我遇到了脚本会因某些外部进程错误而挂起的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-26T03:02:29.940

您也可以这样做以使标准错误和标准输出到同一个地方：

获取子项 foo 2>&1 >log

请注意，“>”与“| out-file”相同，默认编码为 un​​icode 或 utf 16。还要小心“>>”，因为它可以在同一个文本文件中混合 ascii 和 unicode。"| add-content" 可能比 ">>" 效果更好。“| set-content”可能比“>”更可取。

现在有6个流。更多信息： [https ://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_redirection?view=powershell-5.1](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_redirection?view=powershell-5.1)

我认为您所能做的就是保存到文本文件，然后将其读入变量。

# perl - perl中的grep没有数组

> ID：11447608
> 
> 赞同：2
> 
> 时间：2012-07-12T08:11:20.923
> 
> 标签：perl, grep

如果我有一个变量：我将整个文件文本分配给它

```
$var = `cat file_name` 
```

假设在文件中，单词 'mine' 出现在第 17 行（位置不可用，只是举例说明），如果模式 'word ' 是否存在于这些行中。我如何在不使用数组的情况下在正则表达式中做到这一点

例子：

```
$var = "I am good in perl\n but would like to know about the \n grep command in details"; 
```

我想在特定行中搜索特定模式（仅限第 2 到 3 行）。我怎么能不使用数组来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:58:14.860

这里有一个不使用数组的有效案例 - 当文件非常大时。

这是一个非常具体的要求。与其拐弯抹角地找到那个 Perl 习语，我会开一个子例程：

```
 sub n_lines_apart {

    my ( $file, $n, $first_pattern, $second_pattern ) = @_;

    open my $fh, '<', $file or die $!;

    my $lines_apart;

    while (<$fh>) {

        $lines_apart++ if qr/$first_pattern/ .. qr/$second_pattern/;
    }

    return $lines_apart && $lines_apart <= $n+1;
} 
```

**警告**

上面的子代码并非旨在处理单个文件中的多个匹配项。让这成为读者的练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:29:41.953

您可以使用这样的正则表达式匹配来做到这一点：

```
my $var = `cat $filename`;
while ( $var =~ /foo/g ) {
    print $1, "\n";
    print "match occurred at position ", pos($var), " in the string.\n";
} 
```

这将从您的字符串中打印出字符串 'foo' 的所有匹配项，类似于 grep 但不使用数组（或列表）。/$regexp/g 语法使正则表达式从左到右迭代匹配字符串。

我建议阅读[perlrequick](http://perldoc.perl.org/perlrequick.html)以获取有关与正则表达式匹配的教程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T08:28:43.317

尝试这个：

```
perl -ne '$m=$. if !$m && /first-pattern/;
print if $m && ($.-$m >= 2 && $.-$m <= 3) && /second-pattern/' 
```

# java - 从数据库中检索数据..

> ID：11447610
> 
> 赞同：-2
> 
> 时间：2012-07-12T08:11:27.830
> 
> 标签：java, database

我编写此代码是为了将数据存储在数据库中并使用*NetBeans*程序查看结果。但是没有输出，也没有编译错误。我能知道是什么问题吗？有没有缺少的jar文件

```
package database;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.sql.*;

public class Database {

    static Connection conn;

    public Database() {
    }

    public static Connection getConnection() {
        return conn;
    }

    public static void main(String[] args) throws SQLException {

        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
        } catch (ClassNotFoundException e) {
            System.out.println("Could not load the driver");
        }
        String user = "SYSTEM"; //readEntry("Enter userid:  ");
        String pass = "mevooo";//readEntry("Enter password: ");
        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", user, pass);

        String query = "select Ref, Title,Risk_Rating, Root_cause, Impact, Likelihood, Efforts, Finding, Implication, Recommendation from  Lack_Of_Defense ";
        PreparedStatement myStatement = conn.prepareStatement(query);
        myStatement.clearParameters();
        ResultSet myResult = myStatement.executeQuery(query);

        while (myResult.next()) {
            String Ref = myResult.getString(1);
            String Title = myResult.getString(2);
            String Risk_Rating = myResult.getString(3);
            String Root_cause = myResult.getString(4);
            String Impact = myResult.getString(5);
            String Likelihood = myResult.getString(6);
            String Efforts = myResult.getString(7);
            String Finding = myResult.getString(8);
            String Implication = myResult.getString(9);
            String Recommendation = myResult.getString(10);

            System.out.println(" =============================================================");
            System.out.println(" ===================== Lack of defense Table ==================");
            System.out.println(" Ref  : " + Ref);
            System.out.println(" Title " + Title);
            System.out.println(" Risk Rating " + Risk_Rating);
            System.out.println(" Root cause " + Root_cause);
            System.out.println(" Impact " + Impact);
            System.out.println(" Likelihood " + Likelihood);
            System.out.println(" Efforts " + Efforts);
            System.out.println(" Finding " + Finding);
            System.out.println(" Implication " + Implication);
            System.out.println(" Recommendation " + Recommendation);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:26:19.777

您的结果集似乎是空的，您是否尝试过在 sql 客户端应用程序中执行查询？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:34:51.523

问题可能出在以下几行

```
 myStatement.clearParameters();
        ResultSet myResult = myStatement .executeQuery(query); 
```

clearParameters() 真的需要吗？`executeQuery()`此外，从方法中删除查询参数。它不是必需的，因为您已经在`PreparedStatement`.

# jsf - 如何针对同一网页上的每个 Richfaces menuitem 打开一个页面

> ID：11447612
> 
> 赞同：0
> 
> 时间：2012-07-12T08:11:57.803
> 
> 标签：jsf, richfaces

我是 Java 新手，正在寻找以下问题的答案。我正在使用 JSF 构建一个网站，其中我使用的是 Richfaces 菜单栏（panelMenuGroup 和 panelMenuItem）。我想针对菜单的每个项目在菜单栏前面显示一个新页面（即，当我单击菜单项时，我会在菜单栏前面打开一个新页面）。有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:17:31.070

您可以创建一个`h:commandLink`并在操作上调用相应 bean 的方法，该方法返回所需的页面

```
pulic String welcome(){
  ..
  return "\welcome.xhtml";
} 
```

# python - Ruby 解压到 Python

> ID：11447624
> 
> 赞同：2
> 
> 时间：2012-07-12T08:13:09.067
> 
> 标签：python, ruby, struct, unpack

我正在尝试将一些 Ruby 代码转换为 Python。我在这条线上遇到了麻烦：

```
Digest::MD5.digest(message).unpack('L*') 
```

我想我应该使用`struct`模块和那个`hashlib`，但如果我这样做：

```
struct.unpack('L', hashlib.md5(message).digest()) 
```

我收到此错误：

```
struct.error: unpack requires a bytes object of length 4 
```

我该怎么办？谢谢，

魔方

PS 输出应该是 4 x 32 位整数的列表：

```
irb(main):039:0> Digest::MD5.digest('Hash').unpack('L*')
=> [631892218, 1967199614, 3683860954, 4130231798] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:21:25.650

不支持任意长度的解包（`*`运算符）。您必须手动指定中继器。

幸运的是，struct 模块确实允许您指定固定长度，*而*hashlib 模块会告诉您预期的字节数。通过在您指定应用模式的次数*之前*放置一个整数。`L`库中的特定散列`hashlib`具有一个[`.digest_size`属性](http://docs.python.org/library/hashlib.html#hashlib.hash.digest_size)，可以告诉您特定散列的长度是多少字节。

结合这些：

```
structspec = '%iL' % (hashlib.hash('md5').digest_size / 4)
struct.unpack(structspec, hashlib.md5(message).digest()) 
```

如果你甚至不想在`4`那里硬编码，你也可以询问unsigned long`struct.calcsize`的大小：`L`

```
structspec = '%iL' % (hashlib.hash('md5').digest_size / struct.calcsize('L'))
struct.unpack(structspec, hashlib.md5(message).digest()) 
```

In fact, on 64 bit platforms like my Mac, `L` is 8 bytes, so the latter calculation matters enormously if you are deploying across different architectures.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:18:57.017

`struct.unpack('L', ...)`只会从参数中解压缩一个 long。您要做的是全部提取，与 Ruby 不同，Python 的解包函数无法解包任意数量的值，而是必须重复格式说明符。

```
hash = hashlib.md5(message).digest()
struct.unpack('L' * (len(hash) / 4), hash) 
```

这将在字符串允许的范围内重复`'L'`多次并解压缩散列中的所有整数并返回一个包含 len / 4 个项目的元组。如果您希望将结果作为列表，只需将其转换为`list()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:27:05.963

If you're sure you want 4 longs, the format is 'LLLL':

```
struct.unpack('LLLL', hashlib.md5(message).digest()) 
```

# java - 在 PHP 中嵌入 Java

> ID：11447625
> 
> 赞同：1
> 
> 时间：2012-07-12T08:13:09.463
> 
> 标签：java, php, embed

> **可能重复：**
> [从 PHP5 调用 Java 方法](https://stackoverflow.com/questions/4549745/call-java-method-from-php5)

一段时间以来，我一直在搜索如何在 php 中嵌入 java，但发现了一些问题，这些问题提供了可能的解决方案，而其他人则认为这是不可能的。

我碰巧有一些 java 代码在工作，我需要它在 php 应用程序中工作，我尝试用 php 语言（当然，用 php）制作相同的确切代码，但它不起作用，所以，我想知道的是：

如何使用 php 运行我的 java 函数？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:16:49.200

你可以试试[PhpJavaBridge](http://php-java-bridge.sourceforge.net/)我在一个项目上使用它，你可以调用方法例如从 PHP 到 Java。

但我们这样做是因为我们有 2 台不同的服务器，如果您有选择，只需使用一种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:34:46.890

你应该问问自己，对于你的实际问题，什么是正确的技术、架构和编程语言，以及它与你的整体战略，尤其是技能方面的关系。对于给定的问题，您应该使用“正确”的工具，同时尝试将您的技能限制在一组适合解决大量问题的工具上。如果您需要 PHP 来实现某些 Web 功能，您可以调查调用 Java 服务器功能，例如通过 REST 或其他通信技术。

# php - 每个结果的子查询或内部连接与 php 循环或...？

> ID：11447631
> 
> 赞同：0
> 
> 时间：2012-07-12T08:13:19.020
> 
> 标签：php, mysql, subquery, inner-join

我想在用户搜索结果中显示他们的照片。不仅是头像照片，还有3张照片。照片在额外的表 user_photos 中。如果我会为每个用户获得单行，那么答案将很明确 - 内部连接。但我会为每个用户获得多行。

我可以使用的第一种方法是加入：

```
SELECT * FROM users INNER JOIN photos ON photos.user_id=users.user_id 
```

在这种情况下，我需要一些额外的 php 代码来合并具有相同 user_id 的结果。像这样的东西：

```
foreach($results as $result){
  if(isset($user[$result['user_id']]['age'])){
    $user[$result['user_id']]['photos'][] = $result['photo'];
    continue;
  }      
  $user[$result['user_id']]['age'] = $result['age'];
  $user[$result['user_id']]['photos'][] = $result['photo'];
  //...
} 
```

然后在视图中，我需要为用户提供第一级循环，然后为每个用户提供 $user[$result['user_id']]['photos'] 数组的第二级循环。

或者我可以用于每个结果子查询。没有一个选项看起来很优雅，所以我想知道是否还有其他方法。如果没有，可能第一个选择是一种方法，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:40:50.073

对于您的原始问题，第一个选项通常是要走的路，因为它减少了不必要地发送到数据库的查询数量。

但是，我更喜欢 Dows 的答案，我认为这几乎就在那里。我要做的一个更改是使联接成为一个`LEFT JOIN`，以便在查询结果中仍然返回没有照片的用户，因此将他的查询更新为：

```
select u.*, group_concat(photos.name SEPARATOR ' & ') as name
from users u
     join photos on photos.user_id=u.user_id
group by u.user_id; 
```

将按照以下方式返回结果：

```
+-------------------------------------+
|user_id   |photo                     |
+----------+--------------------------+
|1         |photo1 & photo2 & photo7  |
+----------+--------------------------+
|2         |                      NULL|
+----------+--------------------------+
|3         |photo3 & photo5           |
+-------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:31:44.873

你想使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)，所以你会得到这样的东西：

```
select u.*, group_concat(photos.name SEPARATOR ' & ') as photonames
from users u
     join photos on photos.user_id=users.user_id
group by a.user_id; 
```

然后你可以简单地使用`explode()`来解包数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:34:19.517

第一个选项是要走的路，它比第二个选项更有效，尽管您不止一次检索用户数据（它为每个匹配的图像返回）。

第二个选项效率极低，因为它给数据库带来了更多的工作要做，并且大大增加了脚本和数据库之间的流量。

实际上，我之前展示过的第 3 个选项*可以*在这样的情况下实现，即将照片信息转换为表示可以在 PHP 中使用`GROUP BY`和解码的向量的标量值`GROUP_CONCAT()`（我在过去）但我不能说我会推荐它，尽管如果你愿意我会说明它。

# c - c中的goto和自动变量初始化器

> ID：11447634
> 
> 赞同：7
> 
> 时间：2012-07-12T08:13:31.220
> 
> 标签：c

在一个教程中它说

**如果使用 goto 语句跳转到块的中间，则不会初始化该块中的自动变量。**

然后在下面的代码中，如果我可以被访问/声明，那么为什么它没有被初始化？

```
int main()
{
   goto here;
   {
     int i=10;
     here:
      printf("%d\n",i);
   }
   return 0;
} 
```

**ps：输出是一些垃圾值。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T08:18:58.437

There's no logic behind your question "if `i` can be accessed, why...". Being able to "access `i`" isn't an argument for or against anything. It just means that the `printf` statement is in the same scope as `i`. However, since you jumped over the initializer, the variable is uninitialized (just as your tutorial says).

Reading an uninitialized variable is undefined behaviour, so your program is ill-formed.

The memory for the variable `i` has already been set aside at compile time, since the variable is known to exist inside the inner block. The memory doesn't get allocated dynamically, as you may be imagining. It's already there, but it never got set to anything determinate because of the `goto`.

Rule of thumb: Don't jump across initializers.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T08:20:13.023

Variables are visible in the scope in which they are declared (between the `{}` in this case), irrespective of the order of execution of the statements within that scope. The `goto` bypasses the initialization of `i`, meaning it has an undefined value when the `printf()` is invoked.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T08:42:57.343

考虑另一种明显的情况：

```
int main()
{
    int i; //i is declared, but not initialized
    goto here;
    {
       i=10;//i is initialized 
       here: //you've skipped the initialization
       printf("%d\n",i);//and got garbage
    }
return 0;
} 
```

在你的情况下：

```
int main()
{

    goto here;
    {
       //printf("%d\n",i);  // i does not exist here yet
       int i; //from here until the end of the scope variable i exists
       i=10;  // i exists here and smth is written into it
   here:  // i exists here
       printf("%d\n",i); // i exists here and it's value is accessed
    }
return 0;
} 
```

所以，`int i = 5;`这真的是两件事。一个是声明，不能被任何东西跳过，包括`goto`（就像打开一个新的范围也不受影响。你已经跳到了范围的中间，但范围已经在那里了）。其次是操作分配，因为它是正常操作（程序流程）它可以被`goto`或'break'或'continue'或'return'跳过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:20:59.093

The C compiler will parse the source file and it "records" any variable initializations.
When it reaches

```
printf("%d\n", i) 
```

it will know that the variable i already exists and he should be able to use it, since it is in scope.
At execution space is reserved for the i variable on the stack right after the call of the main function, and before any of the code in main() is executed.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T08:43:40.730

因为语言标准是这样说的：

**6.7.8 初始化**

**语义**

如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。

**J.2 未定义的行为**

在以下情况下，行为未定义：

具有自动存储持续时间的对象的值在不确定时使用。

**6.8.4.2 switch 语句**

示例 在仿真程序片段中

```
switch (expr)
{
  int i = 4;
  f(i);
  case 0:
    i = 17;
    /* falls through into default code */
  default:
    printf("%d\n", i);
} 
```

标识符为 i 的对象存在自动存储持续时间（在块内）但从未初始化，因此如果控制表达式具有非零值，则对 printf 函数的调用将访问一个不确定的值。同样，无法调用函数 f。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-12T08:20:21.180

C lets you access anything within your address space, whether it's actually initialized or not. Sometimes working like that crashes or shows garbage, sometimes it happens to print something useful, but it's all undefined behavior. Handy trick, but a great way to break your program, so don't think that just getting a result means your trick works.

# powershell - 使用 UAC 模式 4 以管理员模式 win2008 运行 psexec（可能是 powershell？）

> ID：11447640
> 
> 赞同：0
> 
> 时间：2012-07-12T08:13:54.713
> 
> 标签：powershell, uac, psexec

我正在尝试以管理员模式在 cmd 中运行以下命令：

```
psexec -u mydomain\myuser -p mypass net time /set /domain:%USERDOMAIN% /y 
```

我得到：'net exited with error code 2'

这仅在我将 UAC 级别更改为 3（而不是 4）时才有效

如何解决这个问题？如何同步服务器的时钟？也许有一个powershell替代品？

我需要你的帮助

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:41:18.720

您需要使用您喜欢的任何脚本语言来提升您的帐户。所有进程都在 Win 7/Vista/Win 2008 主机上以用户权限运行，直到您将它们提升为管理员。提升权限需要脚本。

您可以使用以下 WMI 简短示例代码和正确的“impersonationLevel=Impersonate”语法，如果您签署代码（这可能会很痛苦），“Impersonate”将替换为“admin”：

```
' Enumerate cimv2 on remote host strComputer
Set objWMIService = GetObject("winmgmts:" & _
"{impersonationLevel=Impersonate}!//" & strComputer & "\root\cimv2") 
```

# c# - 如何修改 DataGridViewComboBoxColumn 的格式？

> ID：11447641
> 
> 赞同：0
> 
> 时间：2012-07-12T08:13:55.430
> 
> 标签：c#, enums

[我有一个与海报here](https://stackoverflow.com/questions/796607/how-do-i-override-tostring-in-c-sharp-enums)描述的类似的问题，他们想要一个组合框来显示枚举的描述，而不是枚举的ToString。

我真的很喜欢[这个答案](https://stackoverflow.com/a/796655/1055723)，但我注意到`DataGridViewComboBoxColumn`没有 a`Format`或 a`FormattingEnabled`属性。

任何人都可以为我提出解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:20:55.123

当我需要将枚举值列表分配给组合框时，我通常将其分配`List <Tuple<Enum,string>>`为 DataSource，然后将 DisplayMember ValueMember (winforms)、DisplayMemberPath SelectedValuePath (wpf) 设置为 Item2 和 Item1。然后作为值，我使用 SelectedValue 而不是 SelectedItem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:18:13.200

我在这里找到了我的问题的解决方案：[https ://stackoverflow.com/a/796754/1055723](https://stackoverflow.com/a/796754/1055723)

# c# - 如何将委托分配为某些已实现接口的方法

> ID：11447644
> 
> 赞同：2
> 
> 时间：2012-07-12T08:14:07.650
> 
> 标签：c#, .net, interface, delegates

假设我有一个接口，它指定了两个没有参数的 void 方法。如何`System.Action(T)`在某个实现接口的类中“插入”两个方法？在下面的示例中，这将在`void PushFoo(Action bar1, Action bar2)`方法中：

```
public interface IFoo
{
    void Bar1();
    void Bar2();
}

public class Bla
{
    Stack<IFoo> _fooStack = new Stack<IFoo>();

    public void PushFoo(IFoo foo)
    {
        _fooStack.Push(foo);
    }

    public void PushFoo(Action bar1, Action bar2)
    {
        IFoo foo = null;

        // assign bar1 and bar2 to foo
        //foo = ... ;

        _fooStack.Push(foo);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:18:04.657

```
public Class ActionableFoo : IFoo
{
    Action _bar1, _bar2;

    public ActionableFoo(Action b1, Action b2)
    {
        _bar1 = b1;
        _bar2 = b2;
    }

    public void Bar1() { if(_bar1 != null) _bar1(); }
    public void Bar2() { if(_bar2 != null) _bar2(); }
} 
```

Then , in your example:

```
public void PushFoo(Action bar1, Action bar2)
{
    IFoo foo = new ActionableFoo(bar1, bar2);
    _fooStack.Push(foo);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:07:02.467

这激起了我的兴趣，所以这里有一个方法，它使用反射来围绕一组也实现给定接口的委托（或者更确切地说`Func`/ s）构建一个包装器。`Action`

```
Type GenerateInterfaceImplementator<TInterface>()
{
    var interfaceType = typeof(TInterface);
    var funcTypes = interfaceType.GetMethods()
        .Select(GenerateFuncOrAction).ToArray();

    AssemblyName aName =
        new AssemblyName("Dynamic" + interfaceType.Name + "WrapperAssembly");
    var assBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(
            aName,
            AssemblyBuilderAccess.Run);

    var modBuilder = assBuilder.DefineDynamicModule(aName.Name);

    TypeBuilder typeBuilder = modBuilder.DefineType(
        "Dynamic" + interfaceType.Name + "Wrapper",
            TypeAttributes.Public);

    // Define a constructor taking the same parameters as this method.
    var ctrBuilder = typeBuilder.DefineConstructor(
        MethodAttributes.Public | MethodAttributes.HideBySig |
            MethodAttributes.SpecialName | MethodAttributes.RTSpecialName,
        CallingConventions.Standard,
        funcTypes);

    // Start building the constructor.
    var ctrGenerator = ctrBuilder.GetILGenerator();
    ctrGenerator.Emit(OpCodes.Ldarg_0);
    ctrGenerator.Emit(
        OpCodes.Call,
        typeof(object).GetConstructor(Type.EmptyTypes));

    // For each interface method, we add a field to hold the supplied
    // delegate, code to store it in the constructor, and an
    // implementation that calls the delegate.
    byte methodIndex = 0;
    foreach (var interfaceMethod in interfaceType.GetMethods())
    {
        ctrBuilder.DefineParameter(
            methodIndex + 1,
            ParameterAttributes.None,
            "del_" + interfaceMethod.Name);

        var delegateField = typeBuilder.DefineField(
            "del_" + interfaceMethod.Name,
            funcTypes[methodIndex],
            FieldAttributes.Private);

        ctrGenerator.Emit(OpCodes.Ldarg_0);
        ctrGenerator.Emit(OpCodes.Ldarg_S, methodIndex + 1);
        ctrGenerator.Emit(OpCodes.Stfld, delegateField);

        var metBuilder = typeBuilder.DefineMethod(
            interfaceMethod.Name,
            MethodAttributes.Public | MethodAttributes.Virtual |
                MethodAttributes.Final | MethodAttributes.HideBySig |
                MethodAttributes.NewSlot,
            interfaceMethod.ReturnType,
            interfaceMethod.GetParameters()
                .Select(p => p.ParameterType).ToArray());

        var metGenerator = metBuilder.GetILGenerator();
        metGenerator.Emit(OpCodes.Ldarg_0);
        metGenerator.Emit(OpCodes.Ldfld, delegateField);

        // Generate code to load each parameter.
        byte paramIndex = 1;
        foreach (var param in interfaceMethod.GetParameters())
        {
            metGenerator.Emit(OpCodes.Ldarg_S, paramIndex);
            paramIndex++;
        }
        metGenerator.EmitCall(
            OpCodes.Callvirt,
            funcTypes[methodIndex].GetMethod("Invoke"),
            null);

        metGenerator.Emit(OpCodes.Ret);
        methodIndex++;
    }

    ctrGenerator.Emit(OpCodes.Ret);

    // Add interface implementation and finish creating.
    typeBuilder.AddInterfaceImplementation(interfaceType);
    var wrapperType = typeBuilder.CreateType();

    // Return an instance using the constructor we created.
    return wrapperType;
} 
```

此处未显示该函数`Type GenerateFuncOrAction(MethodInfo method)`，因为它太可怕了 - 您必须打开该方法具有的参数数量以及它是否返回 void。

生成器调用如下：

```
public interface ITest
{
    void M1();
    string M2(int m2, string n2);
    string P { get; set; }
}

...

var iType = GenerateInterfaceImplementator<ITest>();
var instance = (ITest)Activator.CreateInstance(iType,
    new Action(() => { Console.WriteLine("M1 called");  return; }),
    new Func<int, string, string>((ij, xjx) => xjx + ij.ToString()),
    new Func<String>(() => "P getter called"),
    new Action<string>(s => { Console.WriteLine(s); }));

instance.M1();
Console.WriteLine(instance.M2(6, "you are number "));
instance.P = "P setter called";
Console.WriteLine(instance.P); 
```

这是我第一次真正使用`Reflection.Emit`，所以欢迎所有评论。

一个问题是您必须知道由`GetMethods`.

# java - JFileChooser 在 OSX 10.7 上不返回完整文件名

> ID：11447656
> 
> 赞同：2
> 
> 时间：2012-07-12T08:14:53.173
> 
> 标签：java, macos, swing, jfilechooser

问题是`File`返回的对象`JFileChooser`文件名不完整。更准确地说，它返回不带文件扩展名部分的文件名。我尝试使用 检索路径`getPath`，`getAbsolutePath`但`getCanonicalPath`它仍然返回没有扩展部分的相同路径。相同的程序和代码在 Windows、Linux 和 OSX 10.6 上运行良好

该问题出现在带有 Java SE 10.6.0_33-b03-424 的 OSX 10.7.4 上。有谁知道解决这个问题的方法，或者至少可以确认这种情况发生了吗？

编辑：

```
JFileChooser myImageChooser = new JFileChooser();
myImageChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
int val = myImageChooser.showDialog(NewJFrame.this, "Select Image");

        JFileChooser myImageChooser = new JFileChooser();
        myImageChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        int val = myImageChooser.showDialog(NewJFrame.this,
                "Select Image");

        if (val == JFileChooser.APPROVE_OPTION) {
            File f = myImageChooser.getSelectedFile();
            System.err.println(myImageChooser.getSelectedFile().getAbsolutePath());
            try {
                System.err.println(myImageChooser.getSelectedFile().getCanonicalPath());
            } catch (IOException ex) {
                Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
            }
            System.err.println(myImageChooser.getSelectedFile().getName());
            System.err.println(myImageChooser.getSelectedFile().getPath());

            //loadImage(f);
            //Util.event("LoadImage", f.getName());
        } 
```

我还注意到一些非常有趣的事情，它适用于某些文件，在 Finder 中具有可见扩展名的相同文件，但对于那些 Finder 不显示扩展名的文件，它会失败。我已经通过`ls`在 bash 终端中检查文件是否确实具有扩展名。

编辑2：

在 Finder 中打开“显示所有文件扩展名”后，JFileChooser 开始返回带扩展名的文件名。这看起来像是 JFileChooser 底层实现中的设计错误。这并不能真正帮助解决问题，因为在我的情况下，这是针对普通用户的消费产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:07:39.060

我更新了您代码中的某些部分，并得到以下输出：

> C:\Users\Arno\Documents\My Games\Skyrim\RendererInfo.txt C:\Users\Arno\Documents\My Games\Skyrim\RendererInfo.txt RendererInfo.txt C:\Users\Arno\Documents\My Games\Skyrim \RendererInfo.txt

这是更新的代码：

```
JFileChooser myImageChooser = new JFileChooser();
    myImageChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
    int val = myImageChooser.showDialog(null, "Select Image");

    if (val == JFileChooser.APPROVE_OPTION) {
        File f = myImageChooser.getSelectedFile();
        System.err.println(myImageChooser.getSelectedFile()
                .getAbsolutePath());
        try {
            System.err.println(myImageChooser.getSelectedFile()
                    .getCanonicalPath());
        } catch (IOException ex) {

        }
        System.err.println(myImageChooser.getSelectedFile().getName());
        System.err.println(myImageChooser.getSelectedFile().getPath());

        // loadImage(f);
        // Util.event("LoadImage", f.getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:03:46.620

这似乎是finder的一个功能。

如果我在 Finder 中关闭扩展隐藏，我会得到扩展，如果我在 Finder 中打开扩展隐藏，我不会

查看[http://www.fileinfo.com/help/mac_show_extensions](http://www.fileinfo.com/help/mac_show_extensions)了解如何在两者之间切换

# c# - 正则表达式解析出设置值旁边的 IP

> ID：11447660
> 
> 赞同：0
> 
> 时间：2012-07-12T08:15:07.600
> 
> 标签：c#, regex

我正在尝试从 html 代码中解析出一个值旁边的 IP 地址。在 html 代码中，它看起来像这样：示例

X_Value_B: 192.12.21.31

所以我希望能够检查 X_Value_B 旁边给出的 Ip：

我将如何解析这个？

这是我到目前为止所拥有的：

```
Match m = Regex.Matche(_respStr1, @"\b(\d{1,3}\.){3}\d{1,3}\b", RegexOptions.IgnoreCase); 
```

但是，这并没有特别抓住 X_Value_B 旁边的 Ip：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:17:26.737

使用lookbehind `(?<=)`fe`(?<=X_Value_B:\s*)(\d{1,3}\.){3}\d{1,3}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:21:34.867

如果我让你正确，你需要的是

```
(?!X_Value_B:\s)\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} 
```

那会提取

```
192.12.21.31 
```

从

```
X_Value_B: 192.12.21.31 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:33:40.593

使用这个：

```
var match = Regex.Match(inputString, 
                    @"X_Value_B:\s*(?<ip>\d+.\d+.\d+.\d+)");

if(match .Success)
    String strIp = match.Groups["ip"].Value; 
```

# php - 带有 Codeigniter 的 Google 文档

> ID：11447663
> 
> 赞同：0
> 
> 时间：2012-07-12T08:15:26.933
> 
> 标签：php, codeigniter, google-docs-api

现在，新手问题在这里。

1 - 我想知道是否有办法使用 php/codeigniter 在浏览器中查看谷歌驱动器（谷歌文档）文档？

2 - 我可以直接从那个视图编辑它吗？

3 - 我发现其他人使用 Zend GData，但它仅限于电子表格吗？

我可以为此使用codeigniter吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:50:23.580

Google 有一个用于文档的[API 。](https://developers.google.com/google-apps/documents-list/)我没用过，但根据它的目录，你可以用它做一堆。就像 Robin 说的，你可以用 PHP 做，也可以用 CI 做。也许你可以更清楚你想要完成什么。现在还不完全清楚。

# regex - 使用正则表达式删除数字之间的特殊字符直到限制

> ID：11447670
> 
> 赞同：0
> 
> 时间：2012-07-12T08:16:16.193
> 
> 标签：regex, special-characters, notepad++

如何使用正则表达式删除下面的特殊字符 [ 和 ]，同时保留句子后面的方括号？

从

```
468620188,[2012-07-07 00:00:00,057],[Thread-20],INFO,BIZ,Handler,getJobs,[Result] Retrieving broadcast [] 
```

到

```
468620188,2012-07-07 00:00:00,057,Thread-20,INFO,BIZ,Handler,getJobs,[Result] Retrieving broadcast [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:24:49.957

这适用于 perl RE，使用[前瞻](http://www.regular-expressions.info/lookaround.html)：

```
s/[\[\]](?=.*,)//g; 
```

它会删除在其后某处具有字符的任何`[`或字符。`]``,`

如果您不使用 perl，这可能不会有用。

* * *

## 编辑：

这可能有效：

1.  搜索`\[([^\n]*,)`，替换为`\1`。点击全部替换
2.  搜索`\]([^\n]*,)`，替换为`\1`。点击全部替换。

请注意，我无权使用 Notepad++ 来测试它；我只是关闭了我在网上找到的搜索框的一些屏幕截图。

# wkhtmltopdf - 修复 wkhtmltopdf 标题剪辑内容？

> ID：11447672
> 
> 赞同：19
> 
> 时间：2012-07-12T08:16:23.710
> 
> 标签：wkhtmltopdf

我的页眉经常剪辑内容，因此它下面的内容不完全可见，看起来好像页面在页眉结束之前在页眉下方继续，因此，并没有显示所有内容。

![演示问题的图像，内容显示在标题下方](../Images/8cf3602fc5440a6194e519630cf5e9b8.png)

有没有我可以使用的 CSS 规则？还是 wkhtmltopdf 的 cmd 参数？还是有什么其他方式？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-17T06:46:25.607

我了解到这实际上是一个已知问题，并且不太可能在一段时间内更改。解决方法是`style="margin:0; padding:0;"`在标题`<body>`元素中使用。另一种解决方法是尝试使用该`--header-spacing n`参数。另一种方法是包装所有首页元素并在那里添加边距，但这是一个非常糟糕的非动态想法。

有关更多信息，请参阅：

[http://code.google.com/p/wkhtmltopdf/issues/detail?id=182](http://code.google.com/p/wkhtmltopdf/issues/detail?id=182)（此问题的重复） [http://code.google.com/p/wkhtmltopdf/issues/detail?id=175](http://code.google.com/p/wkhtmltopdf/issues/detail?id=175)（此问题的根源） [http://code.google.com/p/wkhtmltopdf/issues/detail?id=523](http://code.google.com/p/wkhtmltopdf/issues/detail?id=523)（header-spacing 解决方法）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-15T13:08:49.863

`<body style='height:50px;overflow:hidden;margin:0;padding:0;'>`在页眉和页脚以及`--header-spacing 30 -T 45mm`参数中为我工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-05T11:44:49.397

确保您`<!doctype html>`在页眉/页脚页面的开头有。否则，Webkit 会以 quirksmode 呈现页面。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-09T08:52:31.387

**这对我有用**

```
thead {
    display: table-header-group;
}
tfoot {
    display: table-row-group;
}
tr {
    page-break-inside: avoid;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-14T15:17:49.670

这对我有用

--header-spacing XX -T XXmm

XX 应该是相同的值 eq: --header-spacing 20 -T 20mm

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-20T16:40:40.373

我找到了解决方案：我创建了一个 bash 脚本，它将标头隔离在 HTML 文件中，然后将其注入`--header-html`

编辑：假设您的标头在 thead 标记中

```
filename="x.html"

begin=`awk '/<thead>/{ print NR; exit }' $filename` 
end=`awk '/<\/thead>/{ print NR; exit }' $filename`

echo "<DOCTYPE! html>" > $filename".head.html"
cat $filename | head -$end | tail -n +$begin | sed -e "s/.*<thead>/<thead>/g" | sed -e "s/<\/thead>.*/<\/thead>/g" >> $filename".head.html"

#You can do the same for tfoot

wkhtmltopdf --header-html $filename".head.html" $filename output.pdf 
```

它也适用于 tfoot 或在页眉和页脚位于 header 标签的情况下。您还需要在原始文档中制作一个样式标签来表示 display is none 。（您可以通过脚本添加它）

# django - 在 Django 应用程序中使用 timesince 内置标签

> ID：11447674
> 
> 赞同：1
> 
> 时间：2012-07-12T08:16:31.373
> 
> 标签：django

我喜欢使用 timesince 内置标签来获取事件发生后的天数。标签的文档可在此处找到：[https ://docs.djangoproject.com/en/1.0/ref/模板/内置/#timesince](https://docs.djangoproject.com/en/1.0/ref/templates/builtins/#timesince)

但是当我实现它时，它会在数周内返回数据，有时会在几分钟内返回数据。我只希望该值以天为单位……我不知道如何更改过滤器以获取天数……

需要一些指导...谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:49:01.000

You could write a very simple [template filter](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters):

```
import datetime

@register.filter(name='days_since')
def days_since(value):
    since = 0
    try:
        since = (datetime.datetime.now() - value).days
    except:
        pass
    return since

...

{{ obj.date|days_since }} 
```

# winforms - 将excel文件保存在c#的临时文件夹中

> ID：11447684
> 
> 赞同：0
> 
> 时间：2012-07-12T08:16:55.747
> 
> 标签：winforms, c#-4.0

我已经编写了代码来打开一个excel文件。一旦用户指示要打开哪个文件，我就有兴趣将 excel 文件自动保存在临时文件夹中。这是为了我以后的应用程序可以读取 excel 并对其进行任何操作。下面是我的代码：

```
 private void btnbrowseFile_Click(object sender, EventArgs e)
          {
            openFileDialog1.Title = "Select an Excel file";
            openFileDialog1.InitialDirectory = @"c:\";
            openFileDialog1.Filter = "Excel 97-2007 WorkBook|*.xls|Excel WorkBook|*.xlsx|All Excel Files|*.xls;*.xlsm;*.xlsx";
            openFileDialog1.FilterIndex = 3;
            openFileDialog1.RestoreDirectory = true;

            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                txtFilename.Text = openFileDialog1.FileName;
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:21:11.317

您可以通过以下方式找到用户 Temp 文件夹

```
Path.GetTempPath(); 
```

并将其复制到那里`File.Copy();`

使用该文件，当你的魔法完成后，用它做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:23:58.130

你可以做这样的事情

```
if (openFileDialog1.ShowDialog() == DialogResult.OK) 
{ 
    File.Copy(openFileDialog1.FileName, Path.Combine(Path.GetTempPath(), Path.GetFileName(openFileDialog1.FileName)), true); 
} 
```

# windows - GetKnownFolderPath 返回空字符串

> ID：11447691
> 
> 赞同：1
> 
> 时间：2012-07-12T08:17:34.100
> 
> 标签：windows, delphi, delphi-7, windows-shell

我正在使用此代码（Delphi 7）在win7下检索用户的cookies文件夹。

```
function MyCookieDir : string;
begin
  result := '';

  if Win32MajorVersion >= 6 then
    result := GetKnownFolderPath(FOLDERID_Cookies, 0, 0);

end; 
```

在某些 PC 上，该函数返回一个空字符串。为什么 ？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:01:13.130

通过以下方式解决问题：

*   检查 GetKnownFolderPath 的返回值
*   如果返回 false，则查询 CSIDL

感谢雷米和大卫

# java - Java SPI - ServiceLoader - 将多个 JAR 添加到 APP 类路径

> ID：11447699
> 
> 赞同：2
> 
> 时间：2012-07-12T08:17:59.830
> 
> 标签：java, jar, classpath, serviceloader

我在我的项目中实现此逻辑时遇到问题。我正在使用 ServiceLoader，我不知道它是否可能，但我想将 JAR 动态添加到应用程序的某个已知目录中，以便应用程序在启动时加载它们。我唯一实现的是我知道如何创建可扩展的 ONE JAR（使用 META-INF/服务），因此我可以向这个 JAR 添加越来越多的提供程序和类（实现）。JAR 像普通库一样包含在类路径中，因此应用程序知道它。我想要实现的目标：我不想扩展一个 jar 文件，但我想通过添加更多 jar 来扩展应用程序，例如带有提供程序（服务）的插件，但我不知道如何。

感谢帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:11:22.130

您只需要 (a) 使用这些目录中所有 JAR 文件的 URL 构建的 URLClassLoader，然后 (b) 调用[ServiceLoader.load(Class service, ClassLoader loader)](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html#load%28java.lang.Class,%20java.lang.ClassLoader%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:30:42.667

我想你可以创建一个你的客户 ClassLoader。ClassLoader 将以动态模式从 jar 中加载类。许多框架都有一些非常像你想要的功能。您可以在其中查看一些代码。jetty 中的 WebAppClassLoader 类可能是一个起点！

# xml-parsing - Issue Changing Simple Text on header.tpl using VQMOD in OpenCart

> ID：11447701
> 
> 赞同：1
> 
> 时间：2012-07-12T08:18:03.350
> 
> 标签：xml-parsing, opencart, virtualmode

I am trying to use VQMOD for the first time and when I added the code below to my page nothing changed.

I tried to change the `home` link on top right of home page (open cart) to `my home`, but the text did not change. Unfortunately, there was no error on the VQMOD manager.

My XML code is Below. Do I need to add something to my TPL or make any other changes?

```
<modification>
    <file name="catalog/view/theme/*/template/common/header.tpl">
        <operation>
            <search position="replace"><![CDATA[<?php echo $text_home; ?>]]></search>         
            <add><![CDATA[my home]]></add>   
        </operation>    
    </file>       
</modification> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:57:00.080

您无法像代码中那样替换 header.tpl。VQMOD“只能搜索单行”不是特定变量。

试试这个代码：

```
<file name="catalog/view/theme/*/template/common/header.tpl">
    <operation>
        <search position="replace"><![CDATA[
          <div class="links"><a href="<?php echo $home; ?>"><?php echo $text_home; ?></a><a href="<?php echo $wishlist; ?>" id="wishlist-total"><?php echo $text_wishlist; ?></a><a href="<?php echo $account; ?>"><?php echo $text_account; ?></a><a href="<?php echo $shopping_cart; ?>"><?php echo $text_shopping_cart; ?></a><a href="<?php echo $checkout; ?>"><?php echo $text_checkout; ?></a></div>
        ]]>
        </search>
        <add><![CDATA[
          <div class="links"><a href="<?php echo $home; ?>">your own link</a><a href="<?php echo $home; ?>"><?php echo $text_home; ?></a><a href="<?php echo $wishlist; ?>" id="wishlist-total"><?php echo $text_wishlist; ?></a><a href="<?php echo $account; ?>"><?php echo $text_account; ?></a><a href="<?php echo $shopping_cart; ?>"><?php echo $text_shopping_cart; ?></a><a href="<?php echo $checkout; ?>"><?php echo $text_checkout; ?></a></div>
        ]]>
        </add>
    </operation>
</file> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:25:23.253

我立即发现缺少的一件事是缺少顶部的修改细节

```
<id>Mod Name</id>
<version>1.0.0</version>
<vqmver>2.X</vqmver>
<author>Your name</author> 
```

你真的应该在 xml 文件的顶部也有这段代码

```
<?xml version="1.0" encoding="UTF-8"?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T14:42:44.887

您在 *.tpl 文件中有 include() 或 require() 或 require_once()

```
require ('catalog/view/theme/*/template/product/*.tpl'); 
```

修改为

```
require($vqmod->modCheck('catalog/view/theme/*/template/product/*.tpl')); 
```

或者

```
<?php
global $vqmod;
require($vqmod->modCheck('file/path/here'));
?> 
```

或修改 vqmod_opencart.xml

```
<file name="path/ *.tpl">
        <operation>
            <search position="replace" regex="true"><![CDATA[~require\(([^)]+)~]]></search>
            <add><![CDATA[require($vqmod->modCheck($1)]]></add>
       </operation>
</file> 
```

# css - div容器比里面的图片大

> ID：11447707
> 
> 赞同：19
> 
> 时间：2012-07-12T08:18:46.560
> 
> 标签：css

再次希望你能帮助我。

我是 css 的新手，并试图构建一些简单的东西，但即使是简单的也变得非常困难:(。这个问题已经有一个小时了。

我现在遇到的任何问题是我有一个内部有图像的 div，但是 div 在底部有 5px 的额外空间，我只是不知道如何删除。

基本上这就是我所拥有的

![在此处输入图像描述](../Images/064501e12946ca83a566ad24a466227b.png)

如您所见，图像下方有一点“空白”空间。

这就是我想要的（使用油漆编辑）

![在此处输入图像描述](../Images/a13ccf3504a6cca6a86cd429d6e54110.png)

基本上我的主体是灰色背景，里面有一个宽度为 70% 的包装，

包装器内部有一个菜单（红色的小东西是该菜单的一部分），然后有一个背景为白色的 div（id=container），宽度为 142.8571%，左侧为 15%，以便覆盖整个页。然后在这个 div 里面是图像。

所以基本上有问题的 div 是带有 ID 容器的 div。

这是我相关部分的代码

HTML：

```
<div id="container">

    <img id="banner-img" src="img/banner.jpg">

</div> 
```

CSS：

```
#container{

    background-color: white;

    padding-bottom:0px;
    margin-bottom: 0px;
    border-bottom-width: 0px;

    width: 142.8571%;

    position:  relative;
    left: -21.428571%;

}

#banner-img{
    position: relative;
    margin: 0px auto 0px auto;
    width: 70%;
    left: 15%;
    height: auto;
    padding: 0px;
    border: 0px;
    position: relative;

} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-12T08:20:08.513

现在习惯了

```
img, #banner-img{
vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-12T08:23:04.483

另一种解决方案是将图像设置为`block`：

```
img { display: block; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:28:04.047

底部的空白区域可能是图像标签和结束 div 标签之间的 CR/LF。有些浏览器不喜欢这样。可能有一个 CSS 解决方法，但我倾向于删除 CR/LF 并将其全部放在一行上，如下所示：

```
<div id="container"><img id="banner-img" src="img/banner.jpg"></div> 
```

# c++ - 将真值赋给浮点数

> ID：11447709
> 
> 赞同：2
> 
> 时间：2012-07-12T08:18:50.050
> 
> 标签：c++, floating-point, boolean, implicit-conversion

是否保证

*   将 true 分配给浮点变量会导致 1.0f

*   将 false 分配给浮点变量会导致 0.0f

*   按预期测试上述变量的真值返回（分别为真和假？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:31:21.793

是的。对于前两个，4.9/2（“浮点积分转换”）：

> 如果源类型为 bool，则值 false 转换为零，值 true 转换为一。

对于最后一个，4.12/1（“布尔转换”）：

> 将零值、空指针值或空成员指针值转换为 false；任何其他值都将转换为 true。

另外，我想您需要知道它保证为零，并且 1 可以表示为`float`. 上面暗示了这一点（否则转换无法按描述进行），但我不确定是否以及在何处明确说明了哪些整数值需要在`float`.

引用来自 N3337，它几乎完全是 C++11。此后标签已更改为“C++”而不是“C++11”——C++03 中的规则相同，但措辞和段落编号可能不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T08:46:13.550

引用标准（N3290）第 4.5 节第 6、7 段：

> [...]类型的纯右值`bool`可以转换为类型的纯右值`int`，`false`变为零和`true` 变一。这些转换称为*积分促销*。

第 4.9 节第 2 段：

> 整数类型或无作用域枚举类型的纯右值可以转换为浮点类型的纯右值。如果可能，结果是准确的。如果要转换的值在可以表示的值范围内但不能准确表示，则它是实现定义的下一个较低或较高可表示值的选择。

（如果它们遵循 IEEE 754 标准，则零和一都可以精确地（没有损失）表示为浮点数。）

# c# - 如何在本地在 ASP.NET 中创建 SSRS 报告？

> ID：11447712
> 
> 赞同：0
> 
> 时间：2012-07-12T08:18:56.637
> 
> 标签：c#, asp.net, reporting-services, reporting

我正在使用`ASP.NET/C#`.

我第一次`Reporting`在`ASP.NET`.

我`Report`按照 **[本教程](http://aspnet.4guysfromrolla.com/articles/031605-1.aspx)**创建了一个示例。

据我了解，它需要单独`Report server`创建才能使其工作。我们不想创建单独`Reporting server`的。

谁能指导我如何`SSRS Reports`在不创建单独服务器的情况下在本地创建？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:21:24.410

Visual Studio 2005 报表设计器支持具有 RDLC 扩展的本地执行报表。

这是一个[教程](http://arcanecode.com/2009/02/09/using-a-local-reporting-services-2008-report-with-an-adonet-data-set/)

MSDN：[创建客户端报告定义文件](http://msdn.microsoft.com/en-us/library/ms252067%28v=vs.80%29.aspx)

另请参阅[何时在 RDL 报告上使用 RDLC？](https://stackoverflow.com/questions/1079162/when-to-use-rdlc-over-rdl-reports).

# java - wikipedia parser

> ID：11447715
> 
> 赞同：0
> 
> 时间：2012-07-12T08:19:00.983
> 
> 标签：java, xml-parsing, wikipedia

I want to read wikipedia page through a parser for example JWPL. I am able to do it, but my problem is:

I want to count the chars between the headings and Sections, and the number of links.

Using JWPL, I could get a list of the sections inside each link from the list, but I am not able to count the chars.

Overall, my aim is to read a wikipedia page, convert its data model to my datamodel and give out another file which contains my data model.

My data model is a file which would contain: section names, numbers "the count of chars between the section and the next link or other section.

Thanks for help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:23:36.860

有一个更好的方法是使用维基百科中当前可用的服务。您可以使用一组 GET 请求与之交互阅读维基百科的元数据页面 [http://en.wikipedia.org/wiki/Wikipedia:Metadata](http://en.wikipedia.org/wiki/Wikipedia:Metadata)

mediawiki 还对这种交互进行了一些解释 [http://www.mediawiki.org/wiki/API:Main_page](http://www.mediawiki.org/wiki/API:Main_page)

祝你好运

# javascript - How to move jQuery handler (or how do you call that?) from one object to another?

> ID：11447717
> 
> 赞同：1
> 
> 时间：2012-07-12T08:19:22.670
> 
> 标签：javascript, jquery, jquery-plugins, handler, jquery-events

I made the jsfiddle working example. Have a look at: [http://jsfiddle.net/SsqEv/](http://jsfiddle.net/SsqEv/)

Basically I create a simple html markup:

```
<div id="container">
    <div id="test1">click me</div>
</div> 
```

And the following Javascript code:

```
// attach click event
$('#test1').click(function() {alert('test');});
// create a new strring that will be appended to the container
var data = '<div id="test2">click me 2</div>';
// move click handler from #test1 to #test2
data = $(data).bind("click", {}, $("#test1").data("events").click[0]);
// add element to the DOM
$("#container").append(data);
// remove click from #test1
$('#test1').unbind("click"); 
```

This all works. Now, let's assume I have a custom script with some jQuery contextMenu plugin and I attach the context menu to `ul li` elements:

```
$("ul#vertical-menu li a[data-menuitemid]").contextMenu({
    menu: 'myMenu',
    beforeShow: function(contextMenu, item) {
        if ($(item).parent('li').hasClass('state-ok')) {
            $(contextMenu).children('.ready').hide();
        } else {
            $(contextMenu).children('.noready').hide();
        }
    }
}, function(action, el, pos) {
    changeStatus(model.id, action, $(el).attr('data-menuitemid'), el);
}); 
```

Sometimes I need to remove li and when this is done, I need to attach the contextMenu in the same way. The best option would be to move the contextMenu from the removed `li` to the added one. How can I achieve that?

**EDIT:** I am using this contextMenu: [http://labs.abeautifulsite.net/archived/jquery-contextMenu/demo/](http://labs.abeautifulsite.net/archived/jquery-contextMenu/demo/)

I would like to bind it 'live' to all `ul li` elements, because I have difficulties attaching contextMenu to new dynamically added `li`s. How can I achieve that?

# asp.net - Web API: Authorization and Dependency Injection

> ID：11447719
> 
> 赞同：1
> 
> 时间：2012-07-12T08:19:32.590
> 
> 标签：asp.net, .net, authentication, dependency-injection, asp.net-web-api

Is there a sample solution or example how I do authorization/authentication with DI in the ASP.NET Web API?

# gwt - GWT simplegrid is not displayed without initwidget

> ID：11447721
> 
> 赞同：0
> 
> 时间：2012-07-12T08:19:51.510
> 
> 标签：gwt, datagrid

I have a problem with the simplegrid class: in my project I have a class that extends **Vertical Panel** in which I put a **simplegrid**. The problem is that if I don't call the method **initWidget** I cannot see the **simplegrid** (it loads data, but doesn't display). I know that calling **initWidget** solves the problem because a few days ago my class extended **Composite** instead of **Vertical Panel** and everything worked fine.

Does anyone know why I have to call **initWidget** to make the simple grid to be displayed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:37:02.797

**Composite**只是另一个小部件的包装器。例如，您可以包装一个**VerticalPanel**并向其添加两个**Label**小部件，一个作为标题，另一个在下方显示相关数据。

**Composite**小部件必须知道它应该包装这些其他小部件中的哪一个，并通过方法告诉它`initWidget(Widget widget)`。你必须调用一次，并且只调用一次，否则你会得到一个错误。

# c# - How to add data to registry before installing service using windows installer

> ID：11447722
> 
> 赞同：0
> 
> 时间：2012-07-12T08:19:56.377
> 
> 标签：c#, visual-studio-2010, windows-services, c#-3.0, windows-installer

I written windows service in c# which reads some data from registry.Then I created windows installer using visual Studio 2010 for that service and also adding data to registry required for service. My problem is installer starts installing service before adding data to installer.I wanted to add data to registry before installing service so that it can use that data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:53:21.177

如果您使用诸如 WiX (Windows Installer for XML) 或 Installshield 之类的安装程序，您将能够使用标准 MSI 说明将您的注册表设置作为安装的一部分。

然后，当您的服务启动时，注册表设置将按预期出现。

顺便说一句，使用自安装功能（通过 Installutil）对于调试和开发很方便，但不建议用于生产安装。

就我个人而言，我使用 WiX 来满足我的所有安装需求，因为它既免费又非常灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:23:25.453

您正在寻找的内容与`InstallerClass`

您可以在`InstallerClass`安装之前、期间或之后覆盖许多事件。

查看此链接以开始使用：

[http://devblog.grinn.net/2008/02/windows-services-in-c-part-3-getting.html](http://devblog.grinn.net/2008/02/windows-services-in-c-part-3-getting.html)

# python - 如果任何孩子发生变化，如何从孩子小部件传播变化？

> ID：11447725
> 
> 赞同：1
> 
> 时间：2012-07-12T08:20:02.637
> 
> 标签：python, qt, pyqt4

我有一个`QWidget`. 在 里面`QWidget`，我还有很多其他`QWidget`的，例如：- `QComboBox`, `QLineEdit`, 等等....

现在，我想检测用户是否进行了任何更改（*例如：- 在 中写一些东西`QLineEdit`，或更改 上的值`QComboBox`，等等......*）

有没有简单的方法可以做到这一点？还是我需要像这样捕获每个小部件的信号...

```
QObject.connect(lineedit, SIGNAL("textchanged()"), doSomething)
QObject.connect(combobox, SIGNAL("currentIndexChanged(int)"), doSomething)
... ... ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:18:13.380

是的，您必须手动连接信号。

# html - 表格单元格 div 的子元素的 css 绝对位置

> ID：11447730
> 
> 赞同：0
> 
> 时间：2012-07-12T08:20:19.980
> 
> 标签：html, css, css-tables

> **可能重复：**
> [您可以相对或绝对地将项目定位在 display:table-cell 中吗？](https://stackoverflow.com/questions/11390046/can-you-relativlely-or-absolutely-position-items-in-a-displaytable-cell)

我有`display:table`布局。演示在[这里](http://jsbin.com/avozik/15/edit)。

在第二个面板中有 div`#pos`是`position:absolute`. 类似地，它的父元素即`div#two`是`position:relative`。当我给它时`#pos { width:100% }`，它应该得到`div#two`正确的宽度？但它的宽度`#wrapper`是 的父级`div#two`。

表格单元排列的行为是这样吗？我该怎么做才能`div#pos`拥有其父级的宽度。我不想硬编码`#pos`. 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:43:43.693

您已将 wrapper 设置为 table right 和`#one`as `#two`，`table-cell`因此 #one 和 #two 现在是内联元素，而您的`div #pos which is position:absolute`is 块。所以现在`#wrapper`哪个是层次结构中的第一个块元素是#pos的父元素。做了一个单一的改变。

```
#wrapper > div {
    display: table-row;
} 
```

**[演示](http://jsbin.com/avozik/17/edit#preview)**这是您要找的吗？

# objective-c - 带有 NULL 指针的 CGRectDivide

> ID：11447732
> 
> 赞同：5
> 
> 时间：2012-07-12T08:20:23.643
> 
> 标签：objective-c, pointers, null, core-graphics

在下面的代码中，是否可以摆脱`nothing`变量？

```
CGRect startTableViewFrame;
CGRect nothing;
CGRectDivide(tableViewFrame,
             &nothing,
             &startTableViewFrame,
             searchBarHeight - contentOffset,
             CGRectMinYEdge); 
```

`NULL`似乎不起作用。有小费吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T08:30:54.947

嗯，你可以这样做

```
CGRectDivide(tableViewFrame,
             &(CGRect){},
             &startTableViewFrame,
             searchBarHeight - contentOffset,
             CGRectMinYEdge); 
```

甚至这个：

```
MyCGRectDivide( CGRect r, CGRect * slice, CGRect * remainder, CGFloat d, CGRectEdge edge )
{
    slice = slice ? slice : &(CGRect){} ;
    remainder = remainder ? remainder : &(CGRect){} ;

    CGRectDivide( r, slice, remainder, d, edge ) ;
} 
```

# qt - Finding the child widget in a group box

> ID：11447734
> 
> 赞同：0
> 
> 时间：2012-07-12T08:20:30.897
> 
> 标签：qt

I have QPushButton object and a QLabel object laid out in a QGridLayout layout. This QGridLayout is set to a QGroupBox object. How do I now retrieve the QPushButton that is effectively present in this group box? I have tried the following code but it does not return a valid QPushButton object.

```
 QGroupBox *grpBox = 0;
    grpBox = (QGroupBox *)ui.tableWidget->cellWidget(fromRow, 0);
    QGridLayout * gridLayout = (QGridLayout *)grpBox->layout();
    QPushButton *btn = gridLayout->findChild<QPushButton *>("+"); 
```

Thanks, Rakesh.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:30:40.650

findChild 确实有效。它应该在 QGroupBox 对象上调用。

# jquery - MVC3 getting values from edited rows in datatable

> ID：11447735
> 
> 赞同：2
> 
> 时间：2012-07-12T08:20:45.767
> 
> 标签：jquery, asp.net-mvc-3, datatable

I'm using MVC3 to create a web application. In my web application I have a datatable displaying object values with a checkbox on each row that the user can check/uncheck. What I would like to do is to fix a setup so that the user can check/uncheck as many boxes as he/she wants without anything happening. Then when de user is done he/she presses a "done" button next to the table. Now this is when I want the magic to happen. I would like the view to collect all rows into an array so I can send the whole table to a controller method. I found in the datatables api that i can use the code

```
var table = $.fn.dataTable.fnTables(true);
if (table.length > 0) {
    $(table).dataTable().fnAdjustColumnSizing();
} 
```

in order to save all the datatable data into a variable. Now how do I use this?

In addition to that I want all of this to happen when the user presses my Ajax.ActionLink that is currently today only returning another view. Would it be possible to also have my ActionLink set a variable to the return value of the javascript function that returns the array of the datatable rows?

I will try to display what I'm trying to say if I'm a bit unclear (I'm currently not the best web developer so please be gentle with me :)) Please see comment in code.

```
 @Ajax.ActionLink("Done",
                    "_DoneView",
                    new { value1 = Model.Item1.value1, value2 =
                    Model.Item1.value2, value3 = Model.Item1.value3,

                    //Would it be possible to here say something like
                    DatatableArray = javascriptFunction() //Javascript function
                    //that returns an array containing all rows from the table },

                    new AjaxOptions { HttpMethod = "GET",
                                      UpdateTargetId = "DataTable",
                                      InsertionMode = InsertionMode.Replace},
                    new {
                    @class = "linkButton blue" 
```

Thanks for all the help and don't hesitate to ask for more info if there is something missing/is unlear.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:52:23.587

这将是您的新链接：

```
<div id="divId">create a nice button with the div</div> 
```

制作一个返回 JsonResult 的控制器。像这样的东西：

```
public JsonResult GetAllReservations()
{
    var jsonlist = listOfYourReservations;  
    return Json(jsonlist, JsonRequestBehavior.AllowGet);
} 
```

在此之后，您可以在 jQuery 中执行以下操作：

```
$("#divId").on("click", function(){
    $.post('/ControllerName/GetAllReservations', function (data) {
        $.each(data, function(){

        });
    });
} 
```

# java - Mapreduce 作业运行，出现异常

> ID：11447736
> 
> 赞同：2
> 
> 时间：2012-07-12T08:20:46.783
> 
> 标签：java, hadoop, mapreduce

这是我的代码：

```
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;
import java.util.Iterator;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.DoubleWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.WritableComparable;
import org.apache.hadoop.io.WritableUtils;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

public class SecondarySort extends Configured implements Tool{

public static void main(String[] args) {
    try {
        ToolRunner.run(new Configuration(), new SecondarySort(), args);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

static class KeyPartitioner implements Partitioner<StockKey, DoubleWritable> {

    @Override
    public int getPartition(StockKey arg0, DoubleWritable arg1, int arg2) {

        int partition = arg0.name.hashCode() % arg2;

        return partition;
    }

    @Override
    public void configure(JobConf job) {
    }

}

static class StockKey implements WritableComparable<StockKey> {

    String name;
    Long timestamp;

    public StockKey() {

    }

    StockKey(String name, Long timestamp){
        this.name = name;
        this.timestamp = timestamp;
    }

    @Override
    public void readFields(DataInput arg0) throws IOException {
        name = WritableUtils.readString(arg0);
        timestamp = arg0.readLong();
    }

    @Override
    public void write(DataOutput arg0) throws IOException {
        WritableUtils.writeString(arg0, name);
        arg0.writeLong(timestamp);
    }

    @Override
    public int compareTo(StockKey arg0) {
        int result = 0;

        result = name.compareToIgnoreCase(arg0.name);

        if(result == 0)
            result = timestamp.compareTo(arg0.timestamp);   

        return result;
    }

    public String toString() {
        String outputString = name+","+timestamp;
        return outputString;
    }
}

static class StockReducer implements Reducer<StockKey, DoubleWritable, Text, Text>{

    public void reduce(StockKey key, Iterator<DoubleWritable> value, Outp      
OutputCollector<Text, Text> context, Reporter reporter) 
                throws IOException {

        Text k = new Text(key.toString());

        while(value.hasNext()) {

            Double v = value.next().get();
            Text t = new Text(v.toString());

            context.collect(k, t);          
        }
    }

    @Override
    public void configure(JobConf job) {
        // TODO Auto-generated method stub

    }

    @Override
    public void close() throws IOException {
        // TODO Auto-generated method stub

    }
}

static class StockMapper implements Mapper<LongWritable, Text, StockKey, 
DoubleWritable> {

    public void map(LongWritable offset, Text value, OutputCollector<StockKey, 
DoubleWritable> context, Reporter reporter) 
                throws IOException {

        String[] values = value.toString().split(",");
        StockKey key = new StockKey(values[0].trim(), 
Long.parseLong(values[1].trim()));
        DoubleWritable val = new 
DoubleWritable(Double.parseDouble(values[2].trim()));

            context.collect(key, val);

    }

    @Override
    public void configure(JobConf job) {
        // TODO Auto-generated method stub

    }

    @Override
    public void close() throws IOException {
        // TODO Auto-generated method stub

    }

}

@SuppressWarnings("unchecked")
@Override
public int run(String[] arg) throws Exception {

    JobConf conf = new JobConf(getConf(), SecondarySort.class);
    conf.setJobName(SecondarySort.class.getName());

    conf.setJarByClass(SecondarySort.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    conf.setMapOutputKeyClass(StockKey.class);
    conf.setMapOutputValueClass(Text.class);

    conf.setPartitionerClass((Class<? extends Partitioner<StockKey, 
DoubleWritable>>) KeyPartitioner.class);

    conf.setMapperClass((Class<? extends Mapper<LongWritable, Text, StockKey, 
DoubleWritable>>) StockMapper.class);
    conf.setReducerClass((Class<? extends Reducer<StockKey, DoubleWritable, 
Text, Text>>) StockReducer.class);

    FileInputFormat.addInputPath(conf, new Path(arg[0]));
    FileOutputFormat.setOutputPath(conf, new Path(arg[1]));

    JobClient.runJob(conf);

    return 0;
}

} 
```

这是一个例外：

```
java.io.IOException: Type mismatch in value from map: expected 
org.apache.hadoop.io.Text, recieved org.apache.hadoop.io.DoubleWritable
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:876)
    at org.apache.hadoop.mapred.MapTask$OldOutputCollector.collect(MapTask.java:499)
    at SecondarySort$StockMapper.map(SecondarySort.java:135)
    at SecondarySort$StockMapper.map(SecondarySort.java:1)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at     
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)
    at org.apache.hadoop.mapred.Child.main(Child.java:264)

12/07/13 03:22:32 INFO mapred.JobClient: Task Id :   
attempt_201207130314_0002_m_000001_2, Status : FAILED

java.io.IOException: Type mismatch in value from map: expected 
org.apache.hadoop.io.Text, recieved org.apache.hadoop.io.DoubleWritable
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:876)
    at org.apache.hadoop.mapred.MapTask$OldOutputCollector.collect(MapTask.java:499)
    at SecondarySort$StockMapper.map(SecondarySort.java:135)
    at SecondarySort$StockMapper.map(SecondarySort.java:1)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:391)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)
    at org.apache.hadoop.mapred.Child.main(Child.java:264) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:28:32.117

这段代码有很多潜在的问题可能会导致它：

*   `StockKey`- 你应该覆盖默认`hashCode()`方法 - 目前两个`StockKey`具有相同内容的将具有不同的 hashCode 值（就像你不覆盖 JVM 默认值一样，那么它将返回一个在所有程度上和目的都是两个对象在内存中的地址）。我知道在您的分区器中您只使用该`name`字段（它是一个字符串并且将具有 hashCode() 的有效实现，但这是一个很好的做法，以防您将来使用整个`Stock`对象`hashCode()`并想知道为什么两个相同的 Stock 对象最终会在不同的减速机

*   `KeyPartitioner`- 你需要`Math.abs(..)`的结果`arg0.name.hashCode()`。目前，这个值可能会返回负数，当你对减速器的数量取模时，将返回一个负数。连锁反应是 MR 框架将抛出​​异常，因为它期望一个介于 0（包括）和 reducer 数量（不包括）之间的数字。这可能是你的问题所在，我将在下一点解释

*   `Mapper.map`方法 - 当您调用`context.collect`. 继续我之前关于分区器的观点 - 如果它返回负数，则会引发异常，您需要处理该异常。在某些情况下捕获和吞下异常可能是可以的（例如输入记录的数据验证），但是输出时发生的任何异常都应该被抛出到 MR 框架以标记出现问题并且此映射器的输出是错误的/不完整：

    ```
    try {
        context.collect(key, val);
    } catch (IOException e) {
        e.printStackTrace();
    } 
    ```

*   最后，您需要显式声明您的映射和减少输出类型（这会导致异常，因为您当前将映射值输出类型声明为文本，而实际上映射器正在输出 DoubleWritable）：

> `job.setMapOutputKeyClass(StockKey.class);` `job.setMapOutputValueClass(DoubleWritable.class);`
> 
> `job.setOutputKeyClass(Text.class);` `job.setOutputValueClass(Text.class);`

我建议您删除 context.collect 调用周围的 try/catch 块并重新运行您的工作（或者只检查映射任务的日志，看看是否看到堆栈跟踪）。

# c++ - 在 64 位 Windows 中挂钩 32 位进程

> ID：11447743
> 
> 赞同：1
> 
> 时间：2012-07-12T08:21:18.650
> 
> 标签：c++, windows, winapi, hook

在window7 64bit 上使用键盘挂钩时出现问题。我做这些事情： 1\. 创建一个 32 位 dll 2\. 将其加载到应用程序并 setWindowHookEx

我已经成功连接到 32 位应用程序（Y!M、Skype...），但是当我连接到桌面或任何 64 位应用程序（记事本）时，该应用程序会冻结，直到我停止挂钩应用程序。我创建了 64 位 dll，在上面做同样的事情，并且在 32 位进程中遇到了同样的问题。

所以，我认为问题出在我的 32 位 dll 中，无法注入 64 位进程。但是我不知道当窗口关注它时如何注入 64bit dll 来处理。

我想知道有什么方法可以做到这一点，以及如何做到这一点。或者我可以只挂接32位进程而不挂接64位进程，你能告诉我怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:33:11.280

问题是您不能将 32 位 DLL 加载到 64 位进程中，或者将 64 位 DLL 加载到 32 位进程中。来自[64 位 Windows 编程指南](http://msdn.microsoft.com/en-us/library/aa384249.aspx)：

> ... 32 位进程无法加载 64 位 DLL 以执行，64 位进程无法加载 32 位 DLL 以执行。

您将需要有两个版本的 DLL：32 位和 64 位。但这只是部分解决方案。此外，您需要确定要将 DLL 加载到其中的进程的体系结构。WINAPI 函数[`GetBinaryType()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364819%28v=vs.85%29.aspx)可以确定这一点，但它需要您的代码必须获取的二进制文件的路径。

# win32-process - 两个进程读取/写入同一个文件 - Win32 使用 LockFileEx() 函数

> ID：11447752
> 
> 赞同：2
> 
> 时间：2012-07-12T08:21:40.917
> 
> 标签：win32-process, windows-nt

我正在编写一个服务，它将创建一个文件并在其中写入记录，其他进程（有四个并发进程）将读取一条记录并修改它的一些值。我目前正在使用`LockFileEx()`和`UnLockFileEx()`功能进行排序。

我正在使用 createFile 函数通过我的服务创建文件，如下所示

```
FILEHANDLE = ::CreateFile ( TEXT("C:\\abc.BIN"),
                            GENERIC_READ | GENERIC_WRITE,
                            0,
                            NULL,
                            OPEN_ALWAYS ,
                            FILE_ATTRIBUTE_NORMAL,
                            NULL ); 
```

和其他进程获取文件的句柄，如下所示：

```
FILEHANDLE = ::CreateFile(TEXT("C:\\abc.BIN"),
                          GENERIC_READ |  GENERIC_WRITE,
                          0,
                          NULL,
                          OPEN_EXISTING,
                          FILE_ATTRIBUTE_NORMAL,
                          NULL); 
```

问题是两个或多个进程无法同时获取文件的句柄。当一个进程正在写入文件时，即使我正在使用`LockFileEx()`锁定文件指定区域而不是完整文件的函数，其他进程甚至无法获取文件句柄来读取文件。每次尝试通过设置`FILE_SHARED_READ`标志打开文件或尝试以独占方式打开文件时，我都会收到系统错误代码 32。当我设置`FILE_SHARE_READ | FILE_SHARE_WRITE`时，会发生死锁。

请告诉我任何解决方案，以便我可以通过多个进程打开文件。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:32:46.250

您的所有进程都在请求独占访问，这就是它们无法同时获取文件句柄的原因。您必须同时指定`FILE_SHARE_READ`所有`FILE_SHARE_WRITE`进程，因为它们都在请求对文件的读写访问。这本身不会导致死锁。因此，您一定是在滥用`LockFileEx()`，但您没有显示该代码。

# jquery - 在 Firefox 中使用 jQuery 解析 XML 的问题

> ID：11447754
> 
> 赞同：2
> 
> 时间：2012-07-12T08:21:42.813
> 
> 标签：jquery, xml, firefox

我正在使用 JavaScript/jQuery 尝试解析通过 AJAX Get 请求获取的 XML 文档。我无法发布 XML 文档，但它格式正确，并且存在我正在寻找的标签。AJAX 请求成功并在 Chrome 和 Firefox 中返回了完整的 XML 文档——现在由于某种原因我无法解析它。该代码适用于 Chrome，但不适用于 Firefox 或 IE。我现在对 IE 并不感兴趣，但我不知道为什么它在 Firefox 中不起作用。

JavaScript：

```
window.onload = function getGroupSets() {
$.ajax( {
    type: "GET",
    dataType: "application/xml",
    url: '../api/indicatorGroupSets.xml',
    success: function( xml ) {

        /*Find Indicator Group Set tags in XML file */

        alert($(xml).find('indicatorGroupSet').length);
        //This alert reads '0' in Firefox, '4' in Chrome
        //The following function is not executed in Firefox:

        $( xml ).find( 'indicatorGroupSet' ).each( function( ) {

            /*For each Set, get the name & ID*/

            var groupSet = {
                name: $( this ).attr( 'name' ),
                id: $( this ).attr( 'id' )
            };
            alert(groupSet.name);
            //Nothing displays here
        } );
    },
    error: function( jqXHR, textStatus, errorThrown ) {

        /*If an error occurs, alert the issue and a message to users */

        alert( jqXHR + ':' + textStatus + ':' + errorThrown + '\nThere has been an error, please refresh the page or contact the site administrator if the problem persists.' );
    }
} );
} 
```

我大部分时间都在寻找解决方案，但似乎一切都与解析器在 IE 中无法正常工作有关，在 Firefox 中这个问题并不多。

我很感激任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:07:16.723

尝试告诉 jQuery 你正在加载 HTML。根据我的经验，jQuery 无法在 Firefox 中遍历 XML。某些未知的特定条件可能会触发此行为。

```
$.get("example.xml", function(data) {
    ....
}, "html"); 
```

如果您的文档包含命名空间，则有必要使用 localName 属性遍历文档：

```
if (this.localName === "c:tagname") {
    ....
} 
```

如果文档不包含命名空间，则可以使用普通的 jQuery 功能导航文档：

```
if ($(this).is("tagname")) {
    ....
} 
```

远非漂亮，但可以完成工作。至少在 Firefox 中。:)

# ruby - 如何在 Xcode 中构建项目 Ruby？

> ID：11447760
> 
> 赞同：5
> 
> 时间：2012-07-12T08:21:57.763
> 
> 标签：ruby, xcode, rvm

我对 Mac 上的 Ruby 有疑问。当我构建项目时，出现如下错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- plist (LoadError)

from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from .../app.build/Debug-iphonesimulator/iphone.build/Script-2095E433129114D900424894.sh:3
Command /bin/sh failed with exit code 1 
```

Xcode 4.3.3 安装在我的计算机上，它使用 Mac OS X 10.7.4，我用 rvm 安装了 ruby​​ 1.9.3 并将 ruby​​ 1.9.3 设置为默认值：

```
$ rvm use 1.9.3

Using ../.rvm/gems/ruby-1.9.3-p194

$ ruby -v

ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:06:32.400

您可能需要在 Xcode 中安装命令行工具？我认为您打开 Xcode，转到首选项并在那里的某个地方，您可以安装命令行实用程序。之后您可能需要重新编译您的 rvm ruby​​。

# cocoa - NSSizeFromCGSize 只不过是一个强制转换操作吗？

> ID：11447764
> 
> 赞同：0
> 
> 时间：2012-07-12T08:22:20.210
> 
> 标签：cocoa

来源如下：

```
NS_INLINE NSSize NSSizeFromCGSize(CGSize cgsize) {
    union _ {NSSize ns; CGSize cg;};
    return ((union _ *)&cgsize)->ns;
} 
```

对我来说，这看起来像是一个过于复杂的演员表（以不同于最初预期的方式读取一块内存）。是否有需要这种语法的原因？我只是问，因为我以前从未见过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:05:48.220

是的，这实际上是一个演员表。在 C 中，因此在 Objective-C 中，您不能将一种结构类型转换为另一种结构类型——这通常是一件好事！但是，您可以将指向任何东西的指针转换为指向其他任何东西的指针 - 这通常是危险的......

`&cgsize`因此，当且仅当您确实知道两个结构相同时，您可以通过获取变量的地址 ( ) 将结果指针 ( `(union _ *)`)从一种结构类型的变量转换为另一种结构类型的值，然后取消引用指针 ( `->ns`) 以获取类型转换值。任何体面的编译器都会对此进行优化并直接复制该值。

# c# - LINQ 从列表中的列表中获取唯一项

> ID：11447766
> 
> 赞同：8
> 
> 时间：2012-07-12T08:22:24.720
> 
> 标签：c#, linq, list, ienumerable, distinct

我有一个定义如下`List`的类型：`MyObject`

```
class MyObject {
     public string ListName { get; set; }
     public IEnumerable<OtherObject> ObjectList { get; set;}
} 
```

给定一个`List`类型`MyObject`，使用 LINQ 我应该使用什么表达式来获得所有不同`OtherObject`？

我打算做的是循环每个`MyObject`并`OtherObject`从`ObjectList`属性中获取不同的值，但是我需要在列表中获取不同的值。

请注意 if: `MyObject[0].Objectlist[0] == 'ItemA'`并且`MyObject[1].Objectlist[0] == 'ItemA'`它仍然会返回一个`ItemA`. 这段代码只是一个表示而已。顺便说一句，这不是我访问对象的方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T08:24:08.713

[您可以简单地使用Set](http://en.wikipedia.org/wiki/Set_%28mathematics%29)逻辑来实现这一点。[C# 以HashSet](http://msdn.microsoft.com/en-us/library/bb359438%28v=vs.110%29.aspx)的形式有一个很好的实现：

```
var set = new HashSet<OtherObject>(myObjects.SelectMany(mo => mo.ObjectList)); 
```

或者，如果您更喜欢延迟执行，您可以使用 LINQ [Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct%28v=vs.110%29.aspx)方法：

```
var distinct = myObjects.SelectMany(mo => mo.ObjectList).Distinct(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T08:26:24.697

怎么样：

```
var l = new List<MyObject>(...);
var unique = l.SelectMany(j => j.ObjectList).Distinct(); 
```

您可以将[Distinct() 中的技术与 lambda 一起使用吗？](https://stackoverflow.com/questions/1300088/distinct-with-lambda)改变您决定一个对象是否与另一个对象不同的方式。

# sqlite - SQLite中以下sql的替代品是什么？

> ID：11447768
> 
> 赞同：1
> 
> 时间：2012-07-12T08:23:01.383
> 
> 标签：sqlite, dateadd

表 ' `Curcommtb`' 有列 ' `DModify`' 和 ' `Count`'

SQLite中以下sql的替代品是什么？

' `select dateadd(day,count,DModify) from Curcommtb`'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:18:42.867

[SQLite 日期函数](http://www.sqlite.org/lang_datefunc.html)

下面是您的查询的 SQLite 替代方案。

```
SELECT date(DModify,'+'|| count||' day') FROm Curcommtb 
```

您可以使用日期功能，如：

```
SELECT date('now','+10 day'); 
```

# c# - 将 Outlook.MailItem.body 设置为富文本时的异常

> ID：11447769
> 
> 赞同：5
> 
> 时间：2012-07-12T08:23:03.593
> 
> 标签：c#, email, outlook, devexpress, rtf

我有一个用于消息正文的 RichTextBox，我需要使用富文本正文创建一个新邮件。有我的代码我是如何试图意识到这一点的：

```
MemoryStream ms = new MemoryStream();
MemoEditBody.SaveDocument(ms, DevExpress.XtraRichEdit.DocumentFormat.Rtf);
byte[] RTFBody = ms.ToArray();
email.oMsg.RTFBody = RTFBody; 
```

### 类型：

```
OutlookEMail email;
public MailItem oMsg; 
```

问题：使用 2010 Outlook - 工作正常；使用 2007 Outlook - 此代码引发异常 ( `AccessViolationException: Attempted to read or write protected memory`) 有人可以建议如何使用 2007 Outlook 解决此问题吗？

PS使用：Visual Studio 2010 DevExpress

它在两台计算机上进行了测试，它们几乎相同（*相同的窗口，相同的框架，只有一台有 Outlook 2007 另一个 2010*），所以 80% 的问题出在 Outlook 版本中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T08:04:13.247

我不确定您是否设法解决了您的问题，但我遇到了同样的问题。我正在使用 DevExpress RichEditControl 创建一个邮件合并 RTF 文件，该文件将用作 Outlook MailItem 的 RtfBody。但是，我得到了相同的 AccessViolationException。

我的解决方法不是最优雅的，是使用以下方法将 RTF 转换为 HTML：

[http://www.codeproject.com/Articles/51879/Converting-RTF-to-HTML-in-VB-NET-the-Easy-Way](http://www.codeproject.com/Articles/51879/Converting-RTF-to-HTML-in-VB-NET-the-Easy-Way)

然后只需将消息 .BodyFormat 设置为 olFormatHTML 并将 .HTMLBody 设置为从上述函数返回的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T12:12:09.910

原因是 MailItem.RTFBody 属性仅在 Outlook 2010 中添加，因此您试图调用不存在的东西。

据我所知，有两种潜在的解决方法。

1.  如果 Outlook 使用 Word 作为编辑器，您可以使用以下方法提取邮件正文：

    ```
    Word.Document doc = app.ActiveInspector.WordEditor as Word.Document; 
    ```

    ...然后您可以使用几乎任何 Word 对象模型来编辑/提取文本（例如`doc.SaveAs(...)`保存）。

    请注意，该`WordEditor`属性仅在`IsWordMail`方法返回`true`且该`EditorType`属性有效时才有效`olEditorWord`（请参阅[http://msdn.microsoft.com/en-us/library/office/ff868196.aspx](http://msdn.microsoft.com/en-us/library/office/ff868196.aspx)）。

2.  您可以像上面 Foub 所说的那样首先将正文转换为 HTML，但这可能会丢失格式。

这两种解决方案都不是完美的，但根据我的经验，上述方法的组合大多数时候都有效。

# c# - 转换列表 如果只有一个元素，则为 T 项？

> ID：11447776
> 
> 赞同：4
> 
> 时间：2012-07-12T08:23:31.017
> 
> 标签：c#, lambda

我有一个`List<>`N 项。当且仅当 N = 1 时，我想获得第一个元素。这可以使用`lambda`或其他一些不错的构造来完成吗？

这有效，但看起来很可怕：

```
var blah = new List<Object>() { new Object() };
var item = (blah.Count == 1 ? blah[0] : null); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T08:31:53.427

有几种 LINQ 扩展方法。

1.  [`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault) 如果有一个元素则返回，如果没有`default<T>`则返回，如果有多个则抛出异常
2.  [`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault) 如果有一个元素，则返回，如果没有，则`default<T>`返回
3.  [`ElementAtOrDefault`](http://msdn.microsoft.com/en-us/library/bb494386.aspx) 返回给定位置的元素，或者`default<T>`如果序列没有那么多元素

因此，例如（我更喜欢您的要求）：

```
var item = blah.ElementAtOrDefault(0); 
```

* * *

满足您要求的最佳方法取决于此规则的严格程度：

> 当且仅当 N = 1 时，我想获得第一个元素。

如果序列中有多个元素是**异常**`SingleOrDefault`的，请使用它，如果它失控，您将被告知（错误日志）。

如果获得第**一个元素**很重要，并且您永远不会想要另一个元素，那么使用更好，`FirstOrDefault`因为它有一个有意义的名称。

如果序列中元素的**索引**很重要并且您（当前）需要第一个元素，但将来可能会改变，请使用`ElementAtOrDefault`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T08:31:22.367

您可以为它编写自己的[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)：

```
public static class ListExtensions
{
    public static T SingleOrNothing<T>(this IList<T> list) where T : class
    {
        if (list.Count == 1)
            return list.Single();
        else
            return null;
    }
} 
```

然后你只需在你的代码中调用它：

```
var item = someList.SingleOrNothing(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:27:02.020

我认为 SingleOrDefault 是您正在寻找的：

```
using System.Linq;    
...
var item = blah.SingleOrDefault(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:28:32.047

它看起来并没有好多少，但您可以使用`blah.Single()`代替`blah[0]`：

```
var blah = new List<Object>() { new Object() };
var item = blah.Count == 1 ? blah.Single() : null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T08:30:26.963

如果你有 ：

```
var blah = new List<MyClass>() { new MyClass() }; 
```

你可以这样做 ：

```
var item = (blah.Count == 1 ? blah[0].Single<MyClass>() : null); 
```

# java - Spring AOP，应用受保护/私有建议

> ID：11447777
> 
> 赞同：0
> 
> 时间：2012-07-12T08:23:48.800
> 
> 标签：java, spring-aop

我一直在玩 Spring 的 aop:config XML 配置。当我将建议方法设置为受保护/私有方法时，我期望得到一个运行时异常。但是，建议方法已正确执行。这是否意味着Spring正在修改advice方法访问权限，还是这里发生了其他事情？澄清：

```
public class Foo
{
    public void foo() {} // advised method
}

public class Bar
{
    private void bar() {} // advice method, this e.g. will be applied as before-advice to foo() above
} 
```

Foo 和 Bar 类都在不同的包中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:34:42.110

在处理advice时，Spring通过反射处理每个注解的类，不会直接从外部调用你的类的方法，所以你的advice的可见性权限是不相关的。

不幸的是，没有准确的文档可以解释 Spring 如何如此深入地工作，您将不得不帮助自己挖掘源代码。这是有道理的，因为开源项目文档的目标不是解释内部结构，而是如何使用项目提供的功能。

如果您真的想查看文档，[http:](http://static.springsource.org/spring/docs/3.0.7.RELEASE/spring-framework-reference/html/beans.html#beans-factory-extension) //static.springsource.org/spring/docs/3.0.7.RELEASE/spring-framework-reference/html/beans.html#beans-factory-extension 会向您解释AOP 是通过 BeanFactoryPostProcessors 应用的，然后您可能想查看 javadoc：

[http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/aop/framework/package-tree.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/aop/framework/package-tree.html)

# swingx - 为什么 RolloverRenderer 使用错误的单元格上下文

> ID：11447778
> 
> 赞同：0
> 
> 时间：2012-07-12T08:23:56.733
> 
> 标签：swingx, jxtable

我遇到的问题很难重现，但我希望这里有人可以给我一个关于如何解决这个问题的提示。

我编写了一个`ComponentProvider<JLabel>`接受字符串值的方法，如果字符串包含 URL，则创建一个装饰有图标的可点击单元格。如果在字符串值中未找到 URL，则没有为标签设置图标并且单元格不应是可点击的。

这是代码：

```
public class ExternalLinkProvider extends ComponentProvider<JLabel> implements RolloverRenderer {

    private String url = null;

    @Override
    protected void format(CellContext context) {}

    @Override
    protected void configureState(CellContext context) {
        if (context.getValue() instanceof String) {
            String stringValue = (String) context.getValue();
            WwwLink link = new WwwLink(stringValue);

            // If this contains a valid Url, set a link icon.   
            if (link.isValid()) {
                rendererComponent.setIcon(ExternalLink.WWW_LINK_ICON);
                url = link.getUrl();
            } else {
                rendererComponent.setIcon(null);
                url = null;
            }
            rendererComponent.setText(link.getString());
        }
    }

    @Override
    protected JLabel createRendererComponent() {
        return new JRendererLabel();
    }

    @Override
    public boolean isEnabled() {
        return url != null;
    }

    @Override
    public void doClick() {
        if (url != null) {
              // Follow the url
        }
    }
} 
```

它看起来像这样：

![在此处输入图像描述](../Images/9feb10898f02b5d4d47f6b365fdd1431.png)

第一个单元格应该可以点击以跟随字符串值中的链接并已从显示文本中删除。第二个单元格不包含文本中的链接，因此不应该是可点击的。

但是，在这种情况下，两个单元格都不可点击，如果我存储字符串值并将其从该方法打印到控制台，`isEnabled()`我看到无论我将鼠标悬停在第一个还是第二个单元格上，总是会打印第二个单元格中的文本细胞。

这是我注意到这种行为的唯一情况。我知道每个包含此类型的单元格都会重用一个 Provider 实例，但由于某种原因，RolloverRenderer 在这种情况下似乎没有正确重新配置此 Provider。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:04:55.497

玩了一会儿：你可能在这里遇到了问题——我们所有的例子都是可以点击的。基本上，在提供程序中保持与单元相关的状态是很脆弱的，因为它可能经常被调用并且对于其他单元。

RolloverRenderer 的 api 还不够丰富：该机制依赖于在单击发生之前配置的渲染器（因此“旧”状态仍然存在），对于您的用例来说还不够好 :-) 您可以考虑提交一个swingx 问题跟踪器中的错误报告，所以我们不要忘记查看它。谢谢。

可以使用的片段，基本上演示了在自定义提供程序中覆盖哪些方法（但不能解决手头的问题 - 除了用户不友好的 kludge 始终启用翻转......）：

```
public class ExternalLinkProvider extends LabelProvider implements RolloverRenderer {

    private URL url = null;

    /**
     * Overridden to check for valid URL.
     */
    @Override
    protected void configureContent(CellContext context) {
        url = convertValueToUrl(context.getValue());
        super.configureContent(context);
    }

    private URL convertValueToUrl(Object result) {
        if (!(result instanceof String)) return null;
        URL url = null;

        try {
            url = new URL(result.toString());
        } catch (Exception e) {
            // TODO: handle exception
        }
        return url;

    }

    @Override
    protected Icon getValueAsIcon(CellContext context) {
        return url != null ? XTestUtils.loadDefaultIcon() : null;
    }

    /**
     * conditional enabled isn't reliably supported. Returning true 
     * uncondionally probably isn't option, as the cursor is changed ...
     */
    @Override
    public boolean isEnabled() {
        return true; //url != null;
    }

    @Override
    public void doClick() {
        if (url != null) {
              // Follow the url
            System.out.println("clicking");
        }
    }
} 
```

# java - 在java中将二维数组转换为List？

> ID：11447780
> 
> 赞同：32
> 
> 时间：2012-07-12T08:23:58.870
> 
> 标签：java

我有`m X n`一个 Object say 的二维数组`Foo`。所以我有`Foo[][] foosArray`。将其转换为`List<Foo>`Java 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-12T08:37:18.140

这是对任何二维数组执行此操作的好方法，假设您希望它们按以下顺序排列：

> [[数组[0]-elems]，[数组[1]elems]...]

```
public <T> List<T> twoDArrayToList(T[][] twoDArray) {
    List<T> list = new ArrayList<T>();
    for (T[] array : twoDArray) {
        list.addAll(Arrays.asList(array));
    }
    return list;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-05-28T11:32:46.460

**由于[java-8](/questions/tagged/java-8 "显示标记为“java-8”的问题")**

```
List<Foo> collection = Arrays.stream(array)  //'array' is two-dimensional
    .flatMap(Arrays::stream)
    .collect(Collectors.toList()); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-12T08:27:00.413

```
for(int i=0;i<m;i++)
    for(int j=0;j<n;j++)
        yourList.add(foosArray[i][j]); 
```

我认为其他技巧是不必要的，因为无论如何，他们会使用这个解决方案。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-07-27T06:50:50.860

这可以通过这种方式使用 Java 8 流 API 来完成：

```
String[][] dataSet = new String[][] {{...}, {...}, ...};
List<List<String>> list = Arrays.stream(dataSet)
                               .map(Arrays::asList)
                               .collect(Collectors.toList()); 
```

基本上，你做三件事：

*   将二维数组转换为流
*   使用 Arrays::asList API 将流中的每个元素（应该是一个数组）映射到一个列表中
*   将流减少到一个新的列表中

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-18T21:15:24.940

这是将 int 的二维数组（即原始数据类型）转换为列表的分步解决方案。解释在代码注释中。

```
import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;

public class Temp {
    public static void main(String... args) {
        System.out.println("Demo...");
        int [] [] twoDimArray = new int[][]{
                {1,2}, {3,5}, {8,15}
        };

        List< List<Integer> > nestedLists =
                Arrays.
                //Convert the 2d array into a stream.
                stream(twoDimArray).
                //Map each 1d array (internalArray) in 2d array to a List.
                map(
                        //Stream all the elements of each 1d array and put them into a list of Integer.
                        internalArray -> Arrays.stream(internalArray).boxed().collect(Collectors.toList()
                    )
        //Put all the lists from the previous step into one big list.
        ).collect(Collectors.toList());

        nestedLists.forEach(System.out::println);

    }
} 
```

**输出 ：**

```
Demo...
[1, 2]
[3, 5]
[8, 15] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-12T08:29:20.453

将其转换为列表的唯一方法是遍历数组并随时构建列表，如下所示：

```
ArrayList<Foo[]> list = new ArrayList<Foo[]>(foosArray.length);
for(Foo[] foo: foosArray){
    list.add(foo);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-04-26T17:16:48.077

使用java8“flatMap”来玩。一种方法可能是遵循

```
List<Foo> collection = Arrays.stream(array).flatMap(Arrays::stream).collect(Collectors.toList()); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-21T06:48:39.397

> 请注意：在将数组转换为列表时，原始数组和对象数组之间存在差异。即） int[] 和 Integer[]

例如）

```
int [][] twoDArray = {     
        {1,  2,  3,  4,  40},
        {5,  6,  7,  8,  50},
        {9,  10, 11, 12, 60},
        {13, 14, 15, 16, 70},
        {17, 18, 19, 20, 80},
        {21, 22, 23, 24, 90},
        {25, 26, 27, 28, 100},
        {29, 30, 31, 32, 110},
        {33, 34, 35, 36, 120}};

List list = new ArrayList();
for (int[] array : twoDArray) {
    //This will add int[] object into the list, and not the int values.
    list.add(Arrays.asList(array));
} 
```

和

```
Integer[][] twoDArray = {     
        {1,  2,  3,  4,  40},
        {5,  6,  7,  8,  50},
        {9,  10, 11, 12, 60},
        {13, 14, 15, 16, 70},
        {17, 18, 19, 20, 80},
        {21, 22, 23, 24, 90},
        {25, 26, 27, 28, 100},
        {29, 30, 31, 32, 110},
        {33, 34, 35, 36, 120}};

List list = new ArrayList();
for (Integer[] array : twoDArray) {
    //This will add int values into the new list 
    // and that list will added to the main list
    list.add(Arrays.asList(array));      
} 
```

致力于 Keppil 的回答；您必须使用[如何在 Java 中将 int[] 转换为 Integer[] 将原始数组转换为对象数组？](https://stackoverflow.com/questions/880581/how-to-convert-int-to-integer-in-java)

否则在正常的 for 循环中一一添加 int 值。

```
int iLength = twoDArray.length;
List<List<Integer>> listOfLists = new ArrayList<>(iLength);
for (int i = 0; i < iLength; ++i) {
    int jLength = twoDArray[0].length;
    listOfLists.add(new ArrayList(jLength));
    for (int j = 0; j < jLength; ++j) {
      listOfLists.get(i).add(twoDArray[i][j]);
    }
} 
```

另请注意， Arrays.asList(array) 将给出[固定大小的列表；所以尺寸不能修改](http://www.programcreek.com/2014/05/top-10-mistakes-java-developers-make/)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-29T14:00:24.757

例如

```
Integer[][] a = { { 1, 2, 3 }, { 4, 5, 6 }, { 9, 8, 9 }, };

List<List<Integer>> arr = Arrays.stream(a)
                .map(Arrays::asList)
                .collect(Collectors.toList()); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-31T19:05:58.680

另一种技术。

```
//converting 2D array to string
String temp = Arrays.deepToString(fooArr).replaceAll("\\[", "").replaceAll("\\]", "");
List<String> fooList = new ArrayList<>(Arrays.asList(",")); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-20T10:57:10.623

```
ArrayList<Elelement[]> allElelementList = new ArrayList<>(allElelements.length);
    allElelementList.addAll(Arrays.asList(allElelements)); 
```

allElelements 是二维的

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-07T09:27:48.723

让我们添加一些原始类型数组处理。但是您可以将任何对象传递给参数。方法正确处理为 int[][] as Object[][]：

```
 public <T, E> List<E> twoDArrayToList(T twoDArray) {

   if (twoDArray instanceof int[][])
     return Arrays.stream((int[][])twoDArray)
                  .flatMapToInt(a->Arrays.stream(a))
                  .mapToObj(i->(E)Integer.valueOf(i))
                  .collect(Collectors.toList());

   //… processing arrays of other primitive types 

   if (twoDArray instanceof Object[][])
        return Arrays.stream((E[][])twoDArray)
               .flatMap(Arrays::stream)
               .collect(Collectors.toList());

   return null; // better to throw appropriate exception 
                // if parameter is not two dimensional array
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-29T16:48:43.287

在 Java 8 中，要从`int[][]`to转换`List<Integer>`，您可以使用以下代码：

```
List<Integer> data = Arrays.stream(intervals)
              .flatMapToInt(Arrays::stream)
              .boxed()
              .collect(Collectors.toList()); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-17T14:05:08.547

```
List<Foo> list =  Arrays.stream(fooArray)
      .flatMap(e -> Stream :: of).collect(Collectors.toList()); 
```

# mysql - 按纬度和经度查找位置

> ID：11447788
> 
> 赞同：1
> 
> 时间：2012-07-12T08:24:30.517
> 
> 标签：mysql

我看过很多关于通过地理位置和纬度搜索位置的帖子。

我试图通过 mysql 查询进行搜索。但是没有一个查询给出完美的结果。这是我的查询，它没有返回完美的结果。

```
SELECT *, 
    ( 3959 * 
        acos(
            cos( radians('"+user.getGeoLocationLatitude()+"') ) * 
            cos( radians( geoLocationLatitude ) ) * 
            cos( radians( geoLocationLongitude ) - radians('"+user.getGeoLocationLongitude()+"') ) + 
            sin( radians('"+user.getGeoLocationLatitude()+"') ) * 
            sin( radians( geoLocationLatitude ) ) ) 
        ) AS distance 
        FROM user 
        HAVING distance < '"+user.getDistance()+"' 
        ORDER BY distance 
        LIMIT 0 , 20"
    ); 
```

请任何人给我一些想法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:36:39.240

HTML5 GeoLocation API 可以更好地帮助您。按照这个[链接](http://www.w3schools.com/html5/html5_geolocation.asp)！

# javascript - 如何打开 jQuery 对话框并将其标题自动设置为 HTML 标记中的属性？

> ID：11447790
> 
> 赞同：0
> 
> 时间：2012-07-12T08:24:39.447
> 
> 标签：javascript, jquery, jquery-ui

我有一个要设置`title`属性的 div：

```
<div id="test" title="Test Dialog">Some test</div> 
```

然后我用它打开一个对话框：

```
$('#test').dialog({
    title: $(this).attr('title')
}); 
```

第一次打开此对话框时，标题设置成功。但是，如果我关闭对话框并重新打开它，标题将为空白。这是因为，jQuery 第一次打开对话框时，它会复制元素并删除`title`标签。有没有办法获得我想要的行为，它`title`每次都从属性中读取标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:28:34.157

我会在`open`活动中这样做，如下所示：

```
$("#test").dialog({
   open: function(event, ui) { 
      $(this).dialog( "option", "title", $(this).attr('title') );
   }
}); 
```

# version-control - 如何恢复 hg 回滚？

> ID：11447791
> 
> 赞同：2
> 
> 时间：2012-07-12T08:24:39.680
> 
> 标签：version-control, mercurial

这听起来很傻，但是当我想恢复一个 hg 合并命令时，我发出了“hg rollback”。

后来我意识到我必须使用“hg update -C -r”。清除合并但未提交的更改。

现在我想要我的最后一次提交。这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:45:14.503

也许。的反义词`hg rollback`是`hg commit`。如果您没有使用 // 添加/删除任何文件`hg add`，`remove`则再次`addremove`运行应该会为您提供回滚前的状态。`hg commit`

但是您正在合并中并且`hg commit`不支持`--dryRun`，所以我很警惕在这种情况下会发生什么。你可能会得到一个错误，但我**不确定**

要尝试此操作，只需在其他地方复制工作区（即复制包含该文件夹的父文件`.hg`夹）。这是你的整个项目。您可以尝试修复副本中的混乱。如果出现问题，您可以随时删除副本并尝试其他方法。

或者，您可以使用`hg clone`. 如果项目已经包含混乱的变更集，那么您可以使用`-r`.

# jdk1.6 - 哪个 JDK 编译 commons-dbcp-1.2.2 ？（JDK5/6/7 的问题）

> ID：11447792
> 
> 赞同：0
> 
> 时间：2012-07-12T08:24:44.220
> 
> 标签：jdk1.6, java-7, apache-commons-dbcp, jdk1.5

当我尝试使用 JDK6/7编译[commons-dbcp-1.2.2时，出现此错误：](http://archive.apache.org/dist/commons/dbcp/source/commons-dbcp-1.2.2-src.tar.gz)

> org.apache.commons.dbcp.BasicDataSource 不是抽象的，不会覆盖 java.sql.Wrapper 中的抽象方法 isWrapperFor(java.lang.Class)

这是因为 commons-dbcp-1.2.2 是在 JDK6 之前编写的，`java.sql.Wrapper`当时还没有`isWrapperFor`方法。

所以我安装了 JDK5，但我收到了这样的消息（可能是因为所有 Java7 编译的 JAR）：

> java.lang.UnsupportedClassVersionError：.class 文件中的错误版本号

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:41:37.550

我终于设法编译了 commons-dbcp-1.2.2，这就是我的做法：

1.  下载修订版 558600（因为有人为它编写了正确的补丁。它几乎是 1.2.2，有一些修复）

    ```
    svn checkout -r 558600 http://svn.apache.org/repos/asf/commons/proper/dbcp/trunk commons-dbcp 
    ```

2.  下载[这个补丁](https://issues.apache.org/jira/secure/attachment/12362389/patch.txt)（补丁[说明](https://issues.apache.org/jira/browse/DBCP-191)）和补丁：

    ```
    wget https://issues.apache.org/jira/secure/attachment/12362389/patch.txt
    patch -p0 <patch.txt 
    ```

复制`build.properties.sample`到`build.properties`，下载文件中描述的jar，并更改为适当的路径。

使用 OpenJDK 7 构建。

# jquery - 选择 .not(this) 不起作用

> ID：11447794
> 
> 赞同：0
> 
> 时间：2012-07-12T08:24:50.367
> 
> 标签：jquery, jquery-selectors, this

我有几个选择列表都具有相同的内容。我想要的是当一个选项被选中时，它将在其他选项中被禁用。

```
<div class="social-option">
    <select>
        <option selected="selected" value="facebook">facebook</option>
        <option value="0"></option>
        <option value="twitter">twitter</option><!-- If I select this -->
        <option value="linkedin">linkedin</option>
        <option value="instagram">instagram</option>
        <option value="flickr">flickr</option>
    </select>
</div>
<div class="social-option">
    <select>
        <option selected="selected" value="facebook">facebook</option>
        <option value="0"></option>
        <option value="twitter">twitter</option><!-- then this is disabled -->
        <option value="linkedin">linkedin</option>
        <option value="instagram">instagram</option>
        <option value="flickr">flickr</option>
    </select>
</div>
<div class="social-option">
    <select>
        <option selected="selected" value="facebook">facebook</option>
        <option value="0"></option>
        <option value="twitter">twitter</option><!-- and this also is disabled -->
        <option value="linkedin">linkedin</option>
        <option value="instagram">instagram</option>
        <option value="flickr">flickr</option>
    </select>
</div>​ 
```

使用这个：

```
$('.social-option select').on('change', function () {

    var newSelected = $('option:selected', this).val();
    var newSelectedSiblings = $('.social-option select').find("option[value=" + newSelected + "]");

    newSelectedSiblings.not(this).each(function() { //here is the .not selector that doesn't work
        $(this).attr('disabled', 'disabled');
    });
}); 
```

任何想法为什么？

另外，当我将选择器替换为以下内容时，为什么这条线不起作用`this`：

```
var newSelectedSiblings = $('.social-option select').find("option[value=" + newSelected + "]"); 
```

像这样：

```
var newSelectedSiblings = $(this).find("option[value=" + newSelected + "]"); 
```

因为`change`选择器是相同的：`$('.social-option select').on('change'...`

[http://jsfiddle.net/ilyaD/4BBcZ/5/](http://jsfiddle.net/ilyaD/4BBcZ/5/)

**更新**

我找到了第一个问题的解决方案：

```
newSelectedSiblings.not(this) 
```

我用了：

```
newSelectedSiblings.not('option:selected', this) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:39:11.400

您的错误是混淆了`select`标签和`option`标签。

`newSelectedSiblings`找到一个选项标签，但`this`在回调中是选择标签。

所以`not`什么也不做。

我会尝试修复您的代码，因为它看起来太复杂了，但我无法弄清楚您要做什么。

如果您禁用所有其他选择，除了选定的选择，那么任何人将如何选择它们？

请澄清“所有同级元素，但单击此处的元素”是什么意思-选择标签没有“已单击”属性-那是什么意思？

或者您是否尝试选择除所选标签之外的所有选项标签？做什么的？

```
$('.social-option select').on('change', function () {
  $('.social-option select').not(this).find('option[name="' + $(this).val() + '"]').attr('disabled', 'disabled'); //make sure none of the options have a " in the value
} 
```

注意：如果您更改选择，则没有提及取消禁用选项。这样做可能会很复杂，因为您没有记录它是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:26:31.460

我会使用该`siblings()`功能。它做你认为它做的事情：

```
$(this).siblings().each(function() {
    $(this).attr('disabled', 'disabled');
}); 
```

该`not()`函数不起作用，因为 jQuery 在比较方面很奇怪：

```
$(this) == $(this) // Returns false 
```

# vb.net - 如何在 Windows 窗体中动态调整元素的大小？

> ID：11447795
> 
> 赞同：0
> 
> 时间：2012-07-12T08:24:51.210
> 
> 标签：vb.net, winforms

我有一个用 VB.NET 编写的 Windows 窗体应用程序（我也很乐意接受 C# 中的建议），并且我有两个垂直对齐的 DataGridView，因此一个在另一个之上。我希望能够最大化窗口并让 DataGridViews 随窗口一起扩展，因此它看起来大致相同但更大。

我已经尝试使用停靠和锚定控件，但还没有找到一种方法来做到这一点，而不会重叠或留下应该扩展的巨大空白空间。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:48:19.920

您可以将第一个网格停靠在顶部，将第二个网格停靠在顶部，但是填充停靠必须在顶部停靠之前执行（您可以在文档大纲工具窗口中安排）。此解决方案将使第一个网格始终保持相同的高度。您还可以处理表单调整大小事件并自己计算网格的位置和大小。

# red5 - 在 red5 服务器中流式传输 mp4 文件时没有声音

> ID：11447796
> 
> 赞同：1
> 
> 时间：2012-07-12T08:24:54.017
> 
> 标签：red5, jwplayer

我安装的red5服务器是用来播放视频的。

在 oflademo 页面中，我尝试通过 .mp4 文件播放视频。我将文件 demo.mp4 上传到 /usr/local/red5/webapps/oflaDemo/streams/

在客户端，我使用 JWPlayer 通过 RTMP 播放视频。这是播放视频 demo.mp4 的脚本

```
<script type="text/javascript" src="jwplayer.js"></script>
<script type='text/javascript'>
    jwplayer('mediaplayer').setup({
    'bufferlength': '10',
    'smoothing' : 'false',
    'quality':'best',
    'autostart':'true',
    'icons': 'true',
    'allowscriptaccess': 'always',
    'allownetworking': 'all',
    'flashplayer': 'player.swf',
    'file': 'demo.mp4',
    'streamer':'rtmp://192.168.1.139/oflaDemo/',
    'image':'/jwplayer/logo.png',
    'controlbar': 'bottom',
    'width': '720',
    'height': '306'
    });
</script> 
```

但是，JWPlayer 只能流式传输视频而没有声音。我在 red5 的演示页面中尝试过是 oflademo ，但结果相同。

如何修复 red5 中的流媒体 mp4 以获得声音和视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:29:16.193

mp4文件中的音频必须有red5能识别的音频编解码器；目前仅由 AAC 组成。

# duplicates - 表达式引擎：列出结果的类别，防止类别名称重复

> ID：11447798
> 
> 赞同：0
> 
> 时间：2012-07-12T08:25:08.433
> 
> 标签：duplicates, expressionengine, categories

我正在尝试实现这样的目标

**第一类 | 类别 2 | 第三类| 类别 4 | ~~5 类~~| ~~类别 6~~
产品 1（类别 1）
产品 2（类别 1 和 2）
产品 3（类别 1 和 3
产品 4（类别 4）
产品 5（类别 5）**

基本上，它是一个结果页面，将产品分配到的类别作为菜单。

这就是我通过上述产品数据获得的

**第一类 | 第一类 | 第一类 | 类别 2 | 类别 3 | 类别 4 | 类别 5
产品 1（类别 1）
产品 2（类别 1 和 2）
产品 3（类别 1 和 3
产品 4（类别 4）
产品 5（类别 5）**

我一直在使用这个表达式引擎标签（我使用过 GW 代码类别扩展，但它应该很容易使用标准表达式引擎标签完成）

```
exp:gwcode_categories channel="products" group_id="1" output_depth="2" entry_id="{entry_id}" entry_count="yes"} 
```

如何从类别列表中排除重复条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:21:06.847

除非我误解了您要执行的操作，否则最好的方法是使用一个频道条目标签并传入类别列表。您可以使用动态参数

```
{exp:channel:entries channel="products" dynamic_parameters="category" dynamic="no" } 
```

或者通过嵌入变量（1&3&6 等）将它们传入。

```
{exp:channel:entries channel="products" category="{embed:catid} dynamic="no" } 
```

如果它是一个很长的产品列表并且您需要分页，那么使用像[dynamo](http://devot-ee.com/add-ons/dynamo)这样的东西可能是最容易的。

# c# - Html 帮助器显示没有标签的显示名称属性

> ID：11447801
> 
> 赞同：4
> 
> 时间：2012-07-12T08:25:16.560
> 
> 标签：c#, html, asp.net-mvc, html-helper

我有这个：

```
[Display(Name = "Empresa")]
public string Company{ get; set; } 
```

在我的 aspx 中，我有：

```
<th><%: Html.LabelFor(model => model.Company)%></th> 
```

这会产生：

```
<th><label for="Company">Empresa</label></th> 
```

是否有任何 html 助手扩展只显示没有标签的显示属性，只显示纯文本？我想要的输出是这样的：

```
<th>Empresa</th> 
```

谢谢！

**编辑**

我按照建议尝试了 DisplayFor 或 DisplayTextFor ，但它们无效，因为它们生成：

```
<th>Amazon</th> 
```

他们返回属性的值...我想要 Display 属性中的名称。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T08:29:00.833

**后期编辑**

在 >= MVC4 中，只需使用`@Html.DisplayNameFor`

**在那之前**

使用你自己的 Helper

```
public static MvcHtmlString SimpleLabelFor<TModel, TValue>(
    this HtmlHelper<TModel> html,
    Expression<Func<TModel, TValue>> expression
) {
  var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
  string htmlFieldName = ExpressionHelper.GetExpressionText(expression);
  string resolvedLabelText = metadata.DisplayName ?? metadata.PropertyName ?? htmlFieldName.Split('.').Last();
  if (String.IsNullOrEmpty(resolvedLabelText)) 
            return MvcHtmlString.Empty;

  return MvcHtmlString.Create(resolvedLabelText);

} 
```

# mysql - 从时间值中减去分钟

> ID：11447804
> 
> 赞同：7
> 
> 时间：2012-07-12T08:25:22.880
> 
> 标签：mysql

我的数据库中有一个时间字段，它的值为 22:05

我想减去 5 分钟。当该字段为 datetime 时，我使用 sub_date 并且工作正常，但我无法使用 time 字段获取它，我收到一个我不知道如何处理的警告；

```
mysql>  SELECT scheduleFinalTime FROM clientSchedule WHERE clientScheduleID = 3;
+-------------------+
| scheduleFinalTime |
+-------------------+
| 22:05:00          |
+-------------------+
1 row in set (0.00 sec)

mysql> SELECT date_sub(scheduleFinalTime, INTERVAL 5 MINUTE) FROM clientSchedule WHERE clientScheduleID = 3;
+------------------------------------------------+
| date_sub(scheduleFinalTime, INTERVAL 5 MINUTE) |
+------------------------------------------------+
| NULL                                           |
+------------------------------------------------+
1 row in set, 1 warning (0.00 sec)

mysql> show warnings;
+---------+------+------------------------------------------------------------+
| Level   | Code | Message                                                    |
+---------+------+------------------------------------------------------------+
| Warning | 1264 | Out of range value for column 'scheduleFinalTime' at row 1 |
+---------+------+------------------------------------------------------------+
 1 row in set (0.00 sec) 
```

先感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T08:28:14.540

Mysql 对此有一个[SUBTIME()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_subtime)函数。

```
SUBTIME(expr1,expr2)

SUBTIME() returns expr1 − expr2 expressed as a value in the same format as expr1\. expr1 is a time or datetime expression, and expr2 is a time expression.

mysql> SELECT SUBTIME('2007-12-31 23:59:59.999999','1 1:1:1.000002');
        -> '2007-12-30 22:58:58.999997'
mysql> SELECT SUBTIME('01:00:00.999999', '02:00:00.999998');
        -> '-00:59:59.999999' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-17T18:19:18.630

对于那些使用 mysql 4.x

```
SEC_TO_TIME(TIME_TO_SEC(t2) - TIME_TO_SEC(t1)) 
```

# c++ - 如何在没有源代码的 tcp 服务器应用程序中查找错误

> ID：11447805
> 
> 赞同：0
> 
> 时间：2012-07-12T08:25:23.787
> 
> 标签：c++, c++-cli, integration, tcpclient, solution

我有一个 c++/cli tcp 客户端应用程序以特定格式**`L,20100930033425093,-5.929958,13.164021`** 向端口 9000 上的主应用程序发送数据。主应用程序实际上是由其他供应商完成的，我没有源代码。开发那个的程序员不再与那家公司在一起。

现在，我可以使用 IP 和端口号与所需的应用程序通信。但是应该在主应用程序 GUI 上可见的数据没有显示出来。但是我使用了与主应用程序具有相同 IP 的不同套接字服务器演示应用程序来接收我发送的数据。它工作得很好。现在我不知道错误在哪里以及是否在另一端接收到流。我怎样才能有效地解决这种情况。我在更广泛的情况下要求这个以获得一些想法。

对此有任何建议或讨论会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:40:46.563

您可以使用数据包嗅探器找出正在发送的数据（对于 tcp，我建议 fiddler），如果它错误，那么您可以尝试在某个中间应用程序中对其进行修改，然后该应用程序可以将其发送到您的 gui 应用程序。我假设您没有 GUI 应用程序的源代码。

# android - 应用程序应在后键按下时最小化

> ID：11447806
> 
> 赞同：0
> 
> 时间：2012-07-12T08:25:31.367
> 
> 标签：android

在我的应用程序中，我有一个要求，例如，如果我按下后键应用程序不应该退出（因为我的应用程序中只有一个活动），它应该最小化应用程序，就像它发生在主页键按下一样。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:31:12.137

// 在后按中添加这一行。

```
@Override
public void onBackPressed()
{
   moveTaskToBack(true);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:32:05.357

您可以只保存您需要的任何内容`Activity.onSaveInstanceState()`并恢复保存的信息，`Activity.onRestoreInstanceState`如本示例中[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

# symfony1 - 使用学说左连接在 symfony 中不起作用

> ID：11447807
> 
> 赞同：0
> 
> 时间：2012-07-12T08:25:35.447
> 
> 标签：symfony1, doctrine, symfony-1.4, left-join

我正在使用带有教义的 Symfony 1.4。我想用左连接创建查询：

```
SELECT * FROM table1 LEFT JOIN table2 on table1.id = table2.table1_id ... 
```

我是这样做的：

```
Doctrine_Query::create()
->select('*')
->from('Table1 t')
->leftJoin('Table2 t2')
... 
```

我在 Table1 和 Table2 之间的 schema.yml 关系中

```
 relations:
    Table2:
      class:          Table2
      local:          id
      foreign:        table1_id
      onDelete:       cascade
      type:           one
      foreignType:    one
      foreignAlias:   Table1Table2 
```

最后我得到这样的查询：

```
SELECT * FROM table1, table2 ... 
```

没有 LEFT JOIN 子句。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:34:04.373

关于[`join`语法](http://doctrine.readthedocs.org/en/latest/en/manual/dql-doctrine-query-language.html#join-syntax)，您应该给出连接表的引用（查看`leftJoin`）：

```
$q = Doctrine_Query::create()
        ->select('*')
        ->from('Table1 t')
        ->leftJoin('t.Table2 t2') 
```

# c++ - Winsock 200ms 延迟问题

> ID：11447809
> 
> 赞同：3
> 
> 时间：2012-07-12T08:25:40.447
> 
> 标签：c++, winsock

我发现 WinSock 发送呼叫可能会延迟 200 毫秒

来自 MSDN： http: [//support.microsoft.com/kb/214397/en](http://support.microsoft.com/kb/214397/en)

Nagle 算法： [http](http://en.wikipedia.org/wiki/Nagle) : //en.wikipedia.org/wiki/Nagle's_algorithm

**问题摘要**：

如果重复发送带有 SO_SNDBUF "0" 选项的小 msg(< MTU)，则发送功能块 200ms。

**我的问题**：为什么**先发送消息**延迟200ms？

因为 TCP 在第一次发送调用之前是空闲的，所以我认为必须立即发送第一条消息。

但测试结果并不理想。

第一条消息也延迟了 200 毫秒，为什么？

谢谢你的回答。

**添加一些细节**：

Naggle 算法适用于以下小消息：

```
1\. if wire is idle, send it immediately.
2\. if formal message's ACK is not received, wait until ACK & send
3\. Window's TCP ack delay mechanism send ack after 200ms. 
```

所以，我期望第一条消息立即发送，第二条消息等待第一条消息的确认 200 毫秒，依此类推。

这是错的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:58:50.440

通常 TCP 将数据保存在发送缓冲区中，直到它被对等方确认。在您的情况下，没有发送缓冲区（因为 SO_SNDBUF=0）。因此，TCP 会阻止发送方保留数据以供可能的重传。对端的 TCP 堆栈使用“Delayed ack”例程，并在 200ms 延迟后发送确认（或直到收到 2 个没有确认的数据包）。

因此，发送方将被阻止，直到所有数据都被对等方确认。如果网络的RTT较长，或者出现丢包，可能需要200ms以上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T08:45:48.697

延迟的全部意义在于查看是否有更多数据可以添加到同一条消息中。没有理由为什么第一条消息应该是该规则的例外。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T10:01:20.007

Nagle 算法背后的想法是优化这样的情况：

1.  您在 send() 调用中发送 1 个字节的数据
2.  1 毫秒后，您再次使用 1 字节数据调用 send()
3.  再过 1 毫秒后，您再次调用 send()

如果没有 Nagle 算法，它将导致 3 个单独的数据包，每个数据包都有几个字节的标头和只有 1 个字节的有用负载。那将意味着很多开销。

使用 Nagle 算法，相同的 send() 调用序列将只产生 1 个带有一些标头字节和 3 个字节的有效负载的数据包，从而减少开销大小。但是，数据包将在您第一次通话后 200 毫秒发送。

Nagle 算法的想法是在您发送一小块数据之后等待您可能想要发送更多数据。由于系统不知道您未来发送任何内容的计划，它会等待一段合理的时间（200 毫秒），如果没有发送更多内容，它会发送实际数据包，以免延迟太大。

如果您以小块的形式发送数据而不等待回复（例如逐行发送文本文件），该算法将对您的程序有益。这将大大减少通过网络发送的数据包数量和相关开销。

如果您的程序对响应时间敏感并且不需要此优化，您可以通过使用 TCP_NODELAY 参数调用 setsockopt() 来安全地禁用它，甚至可以考虑使用 UDP 而不是 TCP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:31:52.640

老实说，我不记得第一条消息也被延迟的这种行为。我使用 WinSock 并且数据运行顺利。他们可以这样实现它，因为**这不违反任何标准**。这就是答案。

# linux - 将当前项目添加到 SVN 但忽略某些文件类型

> ID：11447813
> 
> 赞同：0
> 
> 时间：2012-07-12T08:25:59.087
> 
> 标签：linux, svn, ignore

我目前有一个想要添加到 SVN 的项目，但我不想对某些文件类型进行版本控制。（例如 .png）或文件夹（图像）。

我知道有 svn:ignore，但是如果我试图执行忽略操作的目录中没有 .svn 文件，这将不起作用。我收到以下错误：

```
property 'svn:ignore' set on '.'
svn: 'common' is not under version control 
```

我正在寻找有人告诉我如何做到这一点或指导我在正确的地方。

任何时候我尝试这个，就像我必须使用'svn add'将文件/目录添加到svn，然后运行忽略。我有很多目录，我也希望递归地做到这一点。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:12:51.420

在 Subversion 配置文件中设置`global-ignores`（通常在 Linux 上找到`~/.subversion/config`）。有关更多信息，请参阅[手册](http://svnbook.red-bean.com/en/1.1/ch07.html#svn-ch-7-sect-1.3.2)。

# javascript - JSONP 和 DOCTYPE 错误

> ID：11447814
> 
> 赞同：3
> 
> 时间：2012-07-12T08:26:00.657
> 
> 标签：javascript, ajax, jsonp, xml-rpc, doctype

我遇到了一个奇怪的问题。

我正在使用 AJAX 与我的服务器通信。（我正在运行我的网络应用程序`localhost`）。服务器位于，比如说，`http://www.example.com`

为了绕过同源策略，我使用 JSONP。我动态创建一个`<script>`标签并从我的服务器加载数据。

到目前为止，一切都很好。

然后我决定将我的网络应用程序上传到这个子域：`http://m.example.com`

那是我遇到疯狂错误的时候。有时页面加载，有时不加载。当它不加载时，Firebug 会抛出一个`DOCTYPE`错误。

我做了一些研究，发现了这篇 stackoverflow 帖子：[firebug 在 doctype 中返回语法错误？](https://stackoverflow.com/questions/7714896/firebug-returns-syntax-error-in-doctype)

**引用此链接中的答案：**

> 这通常是因为您将 HTML 文档作为脚本加载。这通常是由`<script src=""></script>`（即指向当前、HTML、文档的相对 URI）或指向 404 错误的脚本之一引起的。

很有帮助的东西。基于所有这些，我从以上所有内容中得出结论，每当我的服务器响应缓慢时，`<script>`标签的`src`属性为空。由于这会引发，因此我在 Firebug 中`404 error`遇到错误。`DOCTYPE`每当我的服务器快速响应时，就没有问题并且一切正常。

我该如何解决这个问题？我可以设置手动超时或其他东西，但这并不是万无一失和优雅的解决方案。

有帮助吗？

# 编辑：

**这是一些代码：**

该函数用于`script`动态创建标签：

```
function appendScriptToHead() {
    var element = document.createElement("script");  
    element.src = 'http://www.example.com/?data&callback=callfunction'; 
    document.getElementsByTagName("head")[0].appendChild(element) 
} 
```

当上述包含 JSONP 数据的 url 被加载时调用该回调函数：

```
function callfunction(response) {  
    alert(response);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:47:42.240

我觉得这里有点误会。您的`script`元素将*始终*设置其`src`属性，但其内容取决于您的服务器的响应。我怀疑它会是错误 404（因为它指的是未找到的元素，几乎不重复），但它可以是 500 种口味。

我建议按原样调试您的查询（即，`http://www.example.com/?data&callback=%callfunction%`使用您的浏览器或一些脚本 HTTP UserAgent 打开，如果您觉得很勤奋），看看选择要加载的脚本的逻辑可能有什么问题。

# audio - SoundCloud，通过 api 下载或流式传输文件

> ID：11447819
> 
> 赞同：3
> 
> 时间：2012-07-12T08:26:33.033
> 
> 标签：audio, soundcloud

我尝试使用 download_url 从 soundcloud 获取文件。

我要么被“重定向”或“401 未经授权”，我如何将其下载/流式传输到客户端？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T08:00:33.097

如果您收到 401 响应，那么您应该在请求中包含您`client_id`的响应。也可能是它是私人声音，在这种情况下，您还必须包含 oauth 凭据。

实际的成功响应是重定向，因为流文件可以从不同的服务器访问，但只能使用特殊的限时访问令牌（包含在重定向响应中）。基本上，只需遵循重定向，您就会拥有自己的直播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T05:37:23.790

您使用了错误的 URL 结构......试试这个，它的工作（我测试过）： [http](http://api.soundcloud.com/tracks/773150/download?client_id=) ://api.soundcloud.com/tracks/773150/download?client_id = {Your ID Here}

你应该使用？而不是 & 之前的 client_id

# javascript - 如何将标签添加到 THREE.Mesh？

> ID：11447821
> 
> 赞同：7
> 
> 时间：2012-07-12T08:26:38.430
> 
> 标签：javascript, three.js

目标是在将鼠标悬停在网格上时将 Three.Mesh 名称显示为标签。我们如何在 Three.js 中做到这一点

有人可以提供示例代码吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-15T22:14:36.750

接受挑战！

工作代码示例位于： [http ://stemkoski.github.com/Three.js/Mouse-Tooltip.html](http://stemkoski.github.com/Three.js/Mouse-Tooltip.html)

实现这个目标似乎需要三个主要步骤，每个步骤我都分解成更小的示例程序。

(1) 确定鼠标指向哪个场景元素。见：[http ://stemkoski.github.com/Three.js/Mouse-Over.html](http://stemkoski.github.com/Three.js/Mouse-Over.html)

(2) 将要显示的文本渲染为图像（我为此使用了画布元素）。见：[http ://stemkoski.github.com/Three.js/Texture-From-Canvas.html](http://stemkoski.github.com/Three.js/Texture-From-Canvas.html)

(3) 在鼠标指针的位置绘制一个包含第 (2) 部分中的图像的精灵。见：[http ://stemkoski.github.com/Three.js/Mouse-Sprite.html](http://stemkoski.github.com/Three.js/Mouse-Sprite.html)

所有这些示例（以及更多示例）都是我在[http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)上不断增加的介绍性示例（带有详细评论）集合的一部分，我试图在其中展示 Three.js 的可能性在一系列最小的例子中。

另外，应得的信用：部分（1）和（3）基于MrDoob在他的github页面上的一些示例，特别是交互式多维数据集示例：[http ://mrdoob.github.com/three.js/examples/webgl_interactive_cubes .html](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)

# objective-c - 如何在 OS X 上监视文件更改？

> ID：11447824
> 
> 赞同：5
> 
> 时间：2012-07-12T08:26:47.217
> 
> 标签：objective-c, macos, grand-central-dispatch

我希望收到写入给定文件的通知——无需轮询，无需从文件中读取，也无需监视父目录和查看文件修改时间戳。我怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T08:26:47.887

我找不到一个简单的例子，所以我贡献了我想出的东西以供将来参考：

```
@interface FileWatch ()
@property(assign) dispatch_source_t source;
@end

@implementation FileWatch
@synthesize source;

- (id) initWithPath: (NSString*) path targetQueue: (dispatch_queue_t) queue block: (dispatch_block_t) handler
{
    self = [super init];

    int descriptor = open([path fileSystemRepresentation], O_EVTONLY);
    if (descriptor < 0) {
        return nil;
    }

    [self setSource:dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, descriptor, DISPATCH_VNODE_WRITE, queue)];
    dispatch_source_set_event_handler(source, handler);
    dispatch_source_set_cancel_handler(source, ^{
        close(descriptor);
    });

    dispatch_resume(source);
    return self;
}

- (void) dealloc
{
    if (source) {
        dispatch_source_cancel(source);
        dispatch_release(source);
        source = NULL;
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T16:25:21.137

根据我的经验，在某些情况下，文件不仅被写入，而且被删除然后重写（某些 plist 文件的情况）。然后你必须稍微修改一下代码：当文件被替换时再次调用该方法以保持监控。

```
- (void) myMonitoringMethodWithPath: :(NSString*) path
        __block typeof(self) blockSelf = self;
        __block dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE,fildes,                                                  DISPATCH_VNODE_DELETE | DISPATCH_VNODE_WRITE | DISPATCH_VNODE_EXTEND | DISPATCH_VNODE_ATTRIB | DISPATCH_VNODE_LINK | DISPATCH_VNODE_RENAME | DISPATCH_VNODE_REVOKE,
                                                                  queue);
    dispatch_source_set_event_handler(source, ^
                                      {
                                       unsigned long flags = dispatch_source_get_data(source);
                                          //Do some stuff

                                          if(flags & DISPATCH_VNODE_DELETE)
                                          {
                                              [blockSelf myMonitoringMethodWithPath:path];

                                          }
                                      });
    dispatch_source_set_cancel_handler(source, ^(void) 
                                       {
                                           close(fildes);
                                       });
    dispatch_resume(source);
} 
```

# objective-c - 在ARC下，我的代码变慢了，这正常吗？

> ID：11447825
> 
> 赞同：0
> 
> 时间：2012-07-12T08:26:47.447
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting

在我花了 2 天时间将其更改为与 ARC 一起使用后，我的应用程序运行缓慢。

我是否犯了一些错误以使其变慢？还是ARC有点慢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:36:30.673

在正确转换为 ARC 后几乎不可能感觉到差异。请记住，ARC 不是垃圾收集器，这几乎就像编译器为您将手动内存管理调用放入源代码一样（= 没有额外的运行时开销）。

您确定性能差异吗？你能根据旧的代码修订来衡量它吗？您是否对 Instruments 中的新代码进行了内存泄漏分析？为什么转换代码花了两天时间，自动Xcode转换不适合你吗？为什么？

# css - Openlayers css中的百分比

> ID：11447827
> 
> 赞同：1
> 
> 时间：2012-07-12T08:26:52.823
> 
> 标签：css, openlayers, percentage

我正在尝试调整地图窗口以适应不同的计算机和分辨率，但我遇到了一些问题，我做不到。

我现在在css中有这个：

```
#basicMap { 
      width: 828px; 
      height: 698px; 
      margin: 10px; 
      float: left; 
 } 
 html { 
      font-size: 10px; 
      bottom: 10px; 
      right: 10px; 
 } 
```

在函数 ini() 中：

```
map = new OpenLayers.Map ("basicMap", {
    controls:[.....]}); 
```

在我的 div 中：

```
 <div id="basicMap" ></div> 
```

它工作正常，但是当我尝试将 828px 和 698px 更改为 70% 和 50% 或其他百分比时，地图未显示。

我的网页中有其他 div，但我还没有指定它们的百分比或 px。

我是否需要做其他事情，或导入另一个文件？

# java - 模拟颜色透明度

> ID：11447830
> 
> 赞同：10
> 
> 时间：2012-07-12T08:27:01.910
> 
> 标签：java, colors, rgb, alpha, argb

我有 RGB 颜色值和 alpha 值。假设我有白色背景并应用了 alpha，我如何获得新的 RGB 值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T08:42:21.577

应用于每个颜色通道的公式如下：

```
cr = cf * af + cb * ab * (1 - af) 
```

其中*cr*是像素的结果颜色，*cf*是前景色，*cb*是背景色，*af*是前景alpha，*ab*是背景alpha。

请注意，颜色值通常存储已经预乘以 alpha 在这种情况下，公式简化为

```
cr = cf + cb * (1 - af) 
```

另请参阅[alpha 组合](http://en.wikipedia.org/wiki/Alpha_compositing)。

# java - 以编程方式更改drawable的角半径

> ID：11447835
> 
> 赞同：13
> 
> 时间：2012-07-12T08:27:15.687
> 
> 标签：java, android, xml, drawable, shape

我在 xml 中定义了这个形状：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#FFFF0000"
        android:endColor="#80FF00FF"
        android:angle="45"/>
    <padding android:left="7dp" 
        android:top="7dp"
        android:right="7dp"
        android:bottom="7dp" />
    <corners
        android:bottomLeftRadius="5dp"    ##this need change
        android:bottomRightRadius="5dp"   ##this need change
        android:topLeftRadius="5dp"       ##this need change
        android:topRightRadius="5dp" />   ##this need change
</shape> 
```

我正在创建以下对象：

`Drawable shape = getResource().getDrawable(R.drawable.myshape);`

我需要修改它的半径（或用另一个角半径创建一个）。

如何更改半径？如何以编程方式创建形状？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T06:20:29.290

我解决了我的问题。解决方案在这里：

```
private Drawable getShape(){
    GradientDrawable gradientDrawable = new GradientDrawable(GradientDrawable.Orientation.TL_BR, new int[] { startColor,
            centerColor, endColor});
    gradientDrawable.setGradientType(GradientDrawable.LINEAR_GRADIENT);
    gradientDrawable.setCornerRadii(getRandomFloatArray());
    gradientDrawable.setGradientCenter(0.0f, 0.45f);

    return gradientDrawable;
}

private float [] getRandomFloatArray(){
    Random rnd = new Random();
    float[] floats = new float[8];
    for (int i =0; i < floats.length; i++){
        floats[i] = rnd.nextInt(45);
    }
    return floats;
} 
```

# coldfusion - Fusebox 4 应用程序的 cflock 问题

> ID：11447837
> 
> 赞同：1
> 
> 时间：2012-07-12T08:27:32.893
> 
> 标签：coldfusion, coldfusion-8, fusebox

我继承了当前在 Fusebox 4 上运行的 CF 应用程序。

我注意到 CF 管理员中有相当多的应用程序范围超时，而且我不是 100% 关于锁定以及应该在哪里使用 cflock。

```
<cflock scope="application" type="exclusive" timeout="30">
    <cfinclude template="fusebox4.runtime.cfmx.cfm">
</cflock> 
```

现在我可以在主 fusebox 文件周围看到一个 cflock。我的直觉告诉我，这真的不是一个合理的做法。任何人都可以建议这对于 Fusebox 应用程序是否不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:26:31.447

我不确定 fusebox.runtime.cfmx.cfm 中是否有任何需要完整应用程序锁定的内容。你应该检查一下。当您为每个请求锁定整个“应用程序范围”时，您正在影响该文件的一种单线程。换句话说，2 个请求不能同时运行这个文件。由于它是框架的通用文件，这极大地影响了您的可伸缩性。正如 Germann 建议明智地使用应用程序 - 通常在应用程序的生命周期内使用一次。

同时，有问题的特定文件（fusebox4.runtime.cfmx.cfm）中有很多与应用程序无关的内容。没有它，您将无法运行框架...我将删除此锁定并检查 fusebox4.runtime.cfmx.cfm 以尝试确定为什么有人认为有必要锁定文件开始。

还有一件事。保险丝盒中某处有一个“MODE”设置，可以设置为 DEV 或“PROD”（我的记忆可能有问题）。可能是您设置为 DEV - 在这种情况下，您想要避免的许多事情都发生在幕后 - 主要是每个请求都在与每个请求一起重新组装“已解析”目录中的文件。所以也检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:43:25.180

锁定大/长代码块是一种不好的做法。在这种情况下，它应该只在应用程序启动时调用一次（如果您使用 Application.cfc 将其放入 OnApplicationStart() 方法中，如果您仍在 Application.cfm 上，则将其放入 applicationStart/restart if 块中）。

# c# - 仅当可以正确创建对象时才返回对象

> ID：11447838
> 
> 赞同：1
> 
> 时间：2012-07-12T08:27:35.460
> 
> 标签：c#, .net, object

我对 C# 编程很陌生，我在 OOP 方面有点挣扎。

我创建了一个类，该类具有分析文本文件并根据其内容创建对象的方法。我希望此函数仅在文本文件格式正确时才返回包含文本文件中某些信息的对象。

我调用该函数来分析文本文件，如下所示：

```
 pokerHand newHand;
        newHand = new pokerHand();

        AnalyzePokerHand.importHand("c:\\text.txt");  

        newHand = AnalyzePokerHand.getAnalyzedHand; 
```

如果 text.txt 不是扑克手牌历史文件，或者格式错误等，我不想`newHand`填写关于手牌的垃圾信息。

如果我想传递文本文件的路径并仅在函数成功时返回包含有关手的信息的对象，那么正确的方法是什么？

感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:29:39.757

如果您想指示没有数据可用，则返回 null 是最好的方法。这种方法的另一个优点是，如果您尝试访问成员变量，它将引发空指针异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:34:38.783

你有几个选择：
我假设你有一个`pokerHand Parse(string path)`方法，`path`文本文件的位置在哪里。
您可以返回 null，如下所示：

```
if(!filePresent || incorrectFormat)
     return null; 
```

或者，您可以改用一种`TryParse`方法。将方法的签名更改为：`bool TryParse(string path, pokerHand result)`.
如果文件有效，则设置`result`为输出，并返回 true。如果不是，则返回 false。你这样称呼它：

```
pokerHand p;
if(!TryParse(@"C:\t.txt", p))
    //parse failed
else
    //parse was successful, p is the result 
```

PS - 在 C# 中，我们通常使用`CamelCase`类名 - 所以，按照惯例，你的类实际上应该被称为`PokerHand`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:31:51.273

在这种情况下通常有两种选择：`null`在失败时返回，或者使用`TryParse`带有 out 参数的样式方法（例如查看[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)）：

```
public static bool TryLoad(string filePath, out PokerHand pokerHand)
{
  pokerHand = null;
  ...
  if (fileNotLoadable) return false;
  ...
  pokerHand = loadedPokerHand;
  return true;
} 
```

可以这样使用：

```
PokerHand pokerHand;
if (AnalyzePokerHand.TryLoad("c:\\text.txt", out pokerHand))
{
  // Use pokerHand here;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:31:07.883

这样的逻辑就足够了

```
newHand = AnalyzePokerHand.importHand("c:\\text.txt");
if(newHand == null)
{
     // Message to your user about invalid file....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T08:31:24.993

如果垃圾数据很可能是异常情况，那么您可以[抛出异常](http://msdn.microsoft.com/en-us/library/ms173160%28v=vs.80%29.aspx)来指示错误。这会导致程序跳转到您定义的一些错误处理代码，因此您可以提醒用户或优雅地处理错误。

例如：

```
try {
    newHand = AnalyzePokerHand.importHand("c:\\text.txt");
} catch(HandException he) {
    Console.WriteLine("Invalid hand!");
} 
```

# javascript - 无法使地理定位脚本工作

> ID：11447839
> 
> 赞同：-3
> 
> 时间：2012-07-12T08:27:36.700
> 
> 标签：javascript, geolocation, google-analytics

我编写了以下代码，但由于某种原因它不起作用，请帮助谢谢

```
<script>
    $.getScript('http://www.geoplugin.net/javascript.gp', function() {

    $location =  geoplugin_countryCode();
$location2 = geoplugin_continentCode();        

    if($location == "CA" || $location == "US" || $location2 == "EU" || $location2 == "DE" || $location2 == "FR" || $location2 == "GB") {
    alert($location);
         var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-9240923-27']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

    } else {

         var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-9240923-27']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    } 

});

        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:58:29.297

这还不是一个正确的答案，因为目前还不清楚实际问题是什么，但为了向 OP 解释，我会将此作为答案发布。

```
$.getScript('http://www.geoplugin.net/javascript.gp', function() {

    $location =  geoplugin_countryCode();
    $location2 = geoplugin_continentCode();        

    if($location == "CA" || $location == "US" || $location2 == "EU" || $location2 == "DE" || $location2 == "FR" || $location2 == "GB") {
       alert($location);
    }
});

/* 
 * I'm not sure what you want to accomplish 
 * with loading Google Analytics within the success 
 * callback of getScript, so I moved it out here until that is clarified.
 */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-9240923-27']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

# python - 需要帮助理解这个 Python Viterbi 算法

> ID：11447859
> 
> 赞同：2
> 
> 时间：2012-07-12T08:29:39.667
> 
> 标签：python, viterbi

我正在尝试将在[此 Stack Overflow 答案](https://stackoverflow.com/a/481773/574190)中找到的 Viterbi 算法的 Python 实现转换为 Ruby。完整的脚本可以在这个问题的底部和我的评论中找到。

不幸的是，我对 Python 知之甚少，因此事实证明翻译比我想的要困难得多。尽管如此，我还是取得了一些进展。现在，唯一完全融化我的大脑的一句话是：

```
prob_k, k = max((probs[j] * word_prob(text[j:i]), j) for j in range(max(0, i - max_word_length), i)) 
```

有人可以解释一下它在做什么吗？

这是完整的 Python 脚本：

```
import re
from itertools import groupby

# text will be a compound word such as 'wickedweather'.
def viterbi_segment(text):
  probs, lasts = [1.0], [0]

  # Iterate over the letters in the compound.
  # eg. [w, ickedweather], [wi, ckedweather], and so on.
  for i in range(1, len(text) + 1):
    # I've no idea what this line is doing and I can't figure out how to split it up?
    prob_k, k = max((probs[j] * word_prob(text[j:i]), j) for j in range(max(0, i - max_word_length), i))
    # Append values to arrays.
    probs.append(prob_k)
    lasts.append(k)

  words = []
  i = len(text)
  while 0 < i:
    words.append(text[lasts[i]:i])
    i = lasts[i]
  words.reverse()
  return words, probs[-1]

# Calc the probability of a word based on occurrences in the dictionary.
def word_prob(word):
  # dictionary.get(key) will return the value for the specified key.
  # In this case, thats the number of occurances of thw word in the
  # dictionary. The second argument is a default value to return if
  # the word is not found.
  return dictionary.get(word, 0) / total

# This ensures we ony deal with full words rather than each
# individual letter. Normalize the words basically.
def words(text):
  return re.findall('[a-z]+', text.lower())

# This gets us a hash where the keys are words and the values are the
# number of ocurrances in the dictionary.
dictionary = dict((w, len(list(ws)))
  # /usr/share/dixt/words is a file of newline delimitated words.
  for w, ws in groupby(sorted(words(open('/usr/share/dict/words').read()))))

# Assign the length of the longest word in the dictionary.
max_word_length = max(map(len, dictionary))

# Assign the total number of words in the dictionary. It's a float
# because we're going to divide by it later on.
total = float(sum(dictionary.values()))

# Run the algo over a file of newline delimited compound words.
compounds = words(open('compounds.txt').read())
for comp in compounds:
  print comp, ": ", viterbi_segment(comp) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:37:34.290

您正在查看[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。

扩展版本如下所示：

```
all_probs = []

for j in range(max(0, i - max_word_length), i):
    all_probs.append((probs[j] * word_prob(text[j:i]), j))

prob_k, k = max(all_probs) 
```

我希望这有助于解释它。如果没有，请随时编辑您的问题并指出您不理解的陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T16:10:57.550

这是一个有效的 ruby​​ 实现，以防万一其他人有一些用处。我将上面讨论的列表理解翻译成我认为是惯用不可读的红宝石的适当级别。

```
def viterbi(text)
  probabilities = [1.0]
  lasts = [0]

  # Iterate over the letters in the compound.
  # eg. [h ellodarkness],[he llodarkness],...

  (1..(text.length + 1)).each do |i|
    prob_k, k = ([0, i - maximum_word_length].max...i).map { |j| [probabilities[j] * word_probability(text[j...i]), j] }.map { |s| s }.max_by(&:first)
    probabilities << prob_k
    lasts << k
  end

  words = []
  i = text.length
  while i.positive?
    words << text[lasts[i]...i]
    i = lasts[i]
  end
  words.reverse!
  [words, probabilities.last]
end

def word_probability(word)
  word_counts[word].to_f / word_counts_sum.to_f
end

def word_counts_sum
  @word_counts_sum ||= word_counts.values.sum.to_f
end

def maximum_word_length
  @maximum_word_length ||= word_counts.keys.map(&:length).max
end

def word_counts
  return @word_counts if @word_counts 
  @word_counts = {"hello" => 12, "darkness" => 6, "friend" => 79, "my" => 1, "old" => 5}
  @word_counts.default = 0
  @word_counts
end

puts "Best split is %s with probability %.6f" % viterbi("hellodarknessmyoldfriend")

=> Best split is ["hello", "darkness", "my", "old", "friend"] with probability 0.000002 
```

主要的烦恼是 python 和 ruby​​ 中不同的范围定义（开/闭区间）。该算法非常快。

使用可能性而不是概率可能是有利的，因为重复的乘法可能导致下溢和/或使用较长的单词累积浮点不准确性。

# sql - 通过 SELECT 查询插入太多列

> ID：11447863
> 
> 赞同：1
> 
> 时间：2012-07-12T08:29:45.273
> 
> 标签：sql, database, oracle, select, ora-00918

虽然这按预期工作：

```
SQL> 删除表 TEST1;

桌子掉了。

SQL> 创建表 TEST1（COL1 整数，COL2 整数）；

表已创建。

SQL> 当 1=1 时插入
  2 然后进入测试 1 (COL1, COL2)
  3 从双重中选择 1、0；

创建了 1 行。

SQL>

```

我收到一个奇怪的“ORA-00918：列不明确定义”错误，尝试使用两个以上的列：

```
SQL> 删除表 TEST1;

桌子掉了。

SQL> 创建表 TEST1（COL1 整数，COL2 整数，COL3 整数）；

表已创建。

SQL> 当 1=1 时插入
  2 然后进入测试 1（COL1、COL2、COL3）
  3 从 DUAL 中选择 1、0、0；
然后进入 TEST1（COL1、COL2、COL3）
          *
第 2 行的错误：
ORA-00918: 列定义不明确

SQL>

```

为什么我在这里收到 ORA-00918 错误？我可以在 INSERT WHEN ... THEN INTO ... SELECT 模式中选择多少列有限制吗？

注意：我使用的是 Oracle 11.2.0.1.0，我尝试在生产中执行的实际查询更复杂，并且引用了其他表（并且使用“VALUES”是不够的）。这只是简化的情况...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:38:11.293

我没有甲骨文，但问题似乎是内联查询*（SELECT FROM DUAL）*。我建议为该内联查询中的所有字段设置别名并重试。

```
INSERT WHEN 1=1
THEN INTO TEST1 (COL1, COL2, COL3)
SELECT 1 AS c1, 0 AS c2, 0 AS c3 FROM DUAL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:38:45.957

使用别名：

```
SQL> CREATE TABLE TEST1(COL1 INTEGER, COL2 INTEGER, COL3 INTEGER);

Table created.

SQL> INSERT WHEN 1=1
  2    THEN INTO TEST1 (COL1, COL2, COL3)
  3    SELECT 1 "1", 0 "2", 0 "3" FROM DUAL;

1 row created. 
```

你得到这个不明确的列错误的原因是因为当你不提供别名时，Oracle 将使用一组规则来命名每一列。在这种情况下，第二列和第三列具有相同的名称 ( `"0"`)，因此外部查询无法明确引用：

```
SQL> SELECT 1, 0, 0 FROM DUAL;

         1          0          0
---------- ---------- ----------
         1          0          0 
```

Oracle 在执行语义分析时不查看数据值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:40:39.217

你用这个会发生什么？

```
INSERT WHEN 1=1
THEN INTO TEST1 (COL1, COL2, COL3)
SELECT 1 as col1, 0 as col2, 0 as col3 FROM DUAL; 
```

# facebook - Facebook 分享计数器问题

> ID：11447868
> 
> 赞同：2
> 
> 时间：2012-07-12T08:29:57.760
> 
> 标签：facebook, button, share, social

我的 facebook-share 按钮工作正常，但从前两天开始，所有帖子的计数器都归零。就像现在我最受欢迎的帖子显示了 25 次分享，两天前是 400 次。为什么？

我使用 wp-socialize 插件来显示分享按钮以及点赞、推特等。我在新闻子主题上使用 WordPress - genesis 框架。

我还通过 genesis 简单钩子在标记后添加了 FB-JvascriptSDK 代码，但没有静脉。

我知道 FB 正在贬低使用 fb-share 按钮，但我似乎没有找到替代方法？并且许多流行的网站，如dailymail.co.uk 或huffingtonpost.com 都在使用fb-share，而且一切都很好？

请帮助我解决 fb-share 问题或提出任何替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:33:52.390

共享按钮已被弃用......也许他们现在也关闭了计数器？看到这个问题：[如何将 Facebook 分享框添加到页面？](https://stackoverflow.com/questions/5991156/how-to-add-a-facebook-share-box-to-a-page)

# node.js - 回调处理管道完成

> ID：11447872
> 
> 赞同：208
> 
> 时间：2012-07-12T08:30:03.730
> 
> 标签：node.js

我正在使用以下 node.js 代码从某个 url 下载文档并将其保存在磁盘中。我想知道何时下载文档。我没有看到任何带有管道的回调。或者，是否有任何可以在下载完成时捕获的“结束”事件？

```
request(some_url_doc).pipe(fs.createWriteStream('xyz.doc')); 
```

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2012-07-12T08:59:09.540

流是`EventEmitter`s，因此您可以收听某些事件。正如您所说，有一个`finish`请求事件（以前`end`）。

```
 var stream = request(...).pipe(...);
 stream.on('finish', function () { ... }); 
```

有关哪些事件可用的更多信息，您可以查看[流文档页面](http://nodejs.org/api/stream.html#stream_event_finish)。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-10-13T08:47:01.647

基于 nodejs 文档[http://nodejs.org/api/stream.html#stream_event_finish](http://nodejs.org/api/stream.html#stream_event_finish)，它应该处理 writableStream 的`finish`事件。

```
var writable = getWriteable();
var readable = getReadable();
readable.pipe(writable);
writable.on('finish', function(){ ... }); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-11T15:45:38.557

用于通过 http(s) 将 Web 内容传输到文件系统的代码片段。正如@starbeamrainbowlabs 注意到事件`finish`确实有效

```
var tmpFile = "/tmp/somefilename.doc";

var ws = fs.createWriteStream(tmpFile);
ws.on('finish', function() {
  // pipe done here, do something with file
});

var client = url.slice(0, 5) === 'https' ? https : http;
client.get(url, function(response) {
  return response.pipe(ws);
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-09T08:42:50.000

关于这个上下文，我发现了我的问题的一个有点不同的解决方案。思想值得分享。

大多数示例都是`readStreams`从文件创建的。但在我的情况下`readStream`，必须从`JSON`来自消息池的字符串创建。

```
var jsonStream = through2.obj(function(chunk, encoding, callback) {
                    this.push(JSON.stringify(chunk, null, 4) + '\n');
                    callback();
                });
// message.value --> value/text to write in write.txt 
jsonStream.write(JSON.parse(message.value));
var writeStream = sftp.createWriteStream("/path/to/write/write.txt");

//"close" event didn't work for me!
writeStream.on( 'close', function () {
    console.log( "- done!" );
    sftp.end();
    }
);

//"finish" event didn't work for me either!
writeStream.on( 'close', function () {
    console.log( "- done!"
        sftp.end();
        }
);

// finally this worked for me!
jsonStream.on('data', function(data) {
    var toString = Object.prototype.toString.call(data);
    console.log('type of data:', toString);
    console.log( "- file transferred" );
});

jsonStream.pipe( writeStream ); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-18T21:41:15.393

这是一个处理请求中的错误并在文件写入后调用回调的解决方案：

```
request(opts)
    .on('error', function(err){ return callback(err)})
    .pipe(fs.createWriteStream(filename))
    .on('finish', function (err) {
        return callback(err);
    }); 
```

# unix - 使用 AWK 转置

> ID：11447885
> 
> 赞同：1
> 
> 时间：2012-07-12T08:31:03.673
> 
> 标签：unix, awk

> **可能重复：**
> [使用 AWK 或 Perl 转置](https://stackoverflow.com/questions/11659588/transpose-using-awk-or-perl)

嗨，我想使用 AWK 获取以下格式的输出文件。我的输入文件是一个空格分隔的文本文件。对此的任何帮助将不胜感激。谢谢

输入文件

```
id  quantity colour shape   size colour shape     size  colour  shape   size
1   10       blue   square  10   red    triangle   12   pink    circle  20
2   12       yellow pentagon 3   orange rectangle   4   purple   oval   6 
```

期望的输出

```
id  colour  shape    size
1   blue    square   10
1   red     triangle 12
1   pink    circle   20
2   yellow  pentagon  3
2   orange  rectangle 4
2   purple  oval      6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:13:27.833

这是通用的，因此您可以按名称选择输出列。我已经用输入数据中的其他列对其进行了测试，无论它们的位置如何，它们都不会得到输出。

```
#!/usr/bin/awk -f
BEGIN {
    col_list = "colour shape size"
    # Use a B ("blank") to add spaces in the output before or
    # after a format string (e.g. %6dB), but generally use the numeric argument
    col_fmt = "%-12s %-14s %5d"
    # columns to be repeated on multiple lines may appear anywhere in
    # the input, but they will be output together at the beginning of the line
    repeat_fields["id"]
    # since these are individually set we won't use B
    repeat_fmt["id"] = "%4d "
    # additional fields to repeat on each line
    #repeat_fields["another"]
    #repeat_fmt["another"] = "%8s"
    ncols = split(col_list, cols)
    split(col_fmt, fmts)
    for (i = 1; i <= ncols; i++) {
        col_names[cols[i]]
        forms[cols[i]] = fmts[i]
    }
}

# save the positions of the columns using the header line
FNR == 1 {
    for (i = 1; i <= NF; i++) {
        if ($i in repeat_fields) {
            repeat[++nrepeats] = i
            repeat_look[i] = i
            rformats[i] = repeat_fmt[$i]
        }
        if ($i in col_names) {
            col_nums[++n] = i
            col_look[i] = i
            formats[i] = forms[$i]
        }
    }
    # print the header line
    for (i = 1; i <= nrepeats; i++) {
        f = rformats[repeat[i]]
        sub("d", "s", f)
        gsub("B", " ", f)
        printf f, $repeat[i]
    }
    for (i = 1; i <= ncols; i++) {
        f = formats[col_nums[i]]
        sub("d", "s", f)
        gsub("B", " ", f)
        printf f, $col_nums[i]
    }
    printf "\n"
    next
}

{
    for (i = 1; i <= NF; i++) {
        if (i in repeat_look) {
            f = rformats[i]
            gsub("B", " ", f)
            repeat_out = repeat_out sprintf(f, $i)

        }
        if (i in col_look) {
            f = formats[i]
            gsub("B", " ", f)
            out = out sprintf(f, $i)
            coln++
        }
        if (coln == ncols) {
            print repeat_out out
            out = ""
            coln = 0
        }
    }
    repeat_out = ""
} 
```

使用此修改后的输入数据：

```
no id  colour base   shape    size colour shape     size  colour  shape   size material
14 1   blue   twenty square   10   red    triangle   12   pink    circle  20   wool
23 2   yellow ninety pentagon 3    orange rectangle   4   purple  oval    6    cotton 
```

输出是：

```
 id colour      shape          size
   1 blue        square           10
   1 red         triangle         12
   1 pink        circle           20
   2 yellow      pentagon          3
   2 orange      rectangle         4
   2 purple      oval              6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:05:22.497

见下文：

```
kent$  cat a
id  colour  shape   size colour shape     size  colour  shape   size
1   blue    square  10   red    triangle   12   pink    circle  20
2   yellow  pentagon 3   orange rectangle   4   purple   oval   6

kent$  awk 'NR==1{print "id colour shape size";next;}
{id=$1; printf id;
        for(i=2;i<=NF;i++){
                printf FS$i; if((i-1)%3==0)printf (NF!=i)?"\n"id:"\n"; }}' a         
id colour shape size
1 blue square 10
1 red triangle 12
1 pink circle 20
2 yellow pentagon 3
2 orange rectangle 4
2 purple oval 6 
```

如果您有“列”，则可以将输出通过管道传输到列以使其看起来更好：

```
kent$  awk 'NR==1{print "id colour shape size";next;}
{id=$1; printf id;
        for(i=2;i<=NF;i++){
                printf FS$i; if((i-1)%3==0)printf (NF!=i)?"\n"id:"\n"; }}' a|column -t
id  colour  shape      size
1   blue    square     10
1   red     triangle   12
1   pink    circle     20
2   yellow  pentagon   3
2   orange  rectangle  4
2   purple  oval       6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:12:09.310

单程：

内容`script.awk`：

```
FNR == 1 { 
    for ( i = 1; i <= 4; i++ ) { 
        header = (header ? header "\t" : "") $i
    }   
    printf "%s\n", header
    next
}

FNR > 1 { 
    id = $1
    for ( i = 2; i <= NF; i += 3 ) { 
        j = i + 2 
        for ( ; j >= i; j-- ) { 
            line = $j "\t" line
        }   
        printf "%d\t%s\n", id, line
        line = ""
    }   
} 
```

运行它（感谢*Kent*的`columnt -t`命令）：

```
awk -f script.awk infile | column -t 
```

具有以下输出：

```
id  colour  shape      size
1   blue    square     10
1   red     triangle   12
1   pink    circle     20
2   yellow  pentagon   3
2   orange  rectangle  4
2   purple  oval       6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:23:08.567

```
sed -e '1! {s/\([0-9][0-9]*\)[ \t][ \t]*/\1\n/g;}' test.txt |awk -vOFS="\t" 'NR==1 {print $1,$2,$3,$4} NF==1 {id=$1} NR>1 && NF>1 {print id,$0}' 
```

试图在 sed 中完成这一切，但我对保持缓冲区很满意，什么都没有。无论如何，在每个数字后插入一个换行符：

```
id  colour  shape   size colour shape     size  colour  shape   size
1
blue    square  10
red    triangle   12
pink    circle  20
2
yellow  pentagon 3
orange rectangle   4
purple   oval   6 
```

并使用 awk 将 id 向下移动到以下行：

```
id  colour  shape   size
1   blue    square  10
1   red    triangle   12
1   pink    circle  20
2   yellow  pentagon 3
2   orange rectangle   4
2   purple   oval   6 
```

虽然应该在 sed 中完全可行

# python - Windows + Linux 的退出和关闭文件的方法

> ID：11447886
> 
> 赞同：0
> 
> 时间：2012-07-12T08:31:05.263
> 
> 标签：python, file-io

目前我正在使用此代码

```
if __name__=="__main__":
    try:
        main()
    except KeyboardInterrupt:
        f.close
        print "left!" 
```

这是最好的方法吗？在脚本的早些时候，正在写入一个文件，我想确保在脚本终止时它完全关闭。请问有什么意见吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:32:06.667

请注意：`f.close`实际上并没有关闭文件，您必须调用该函数：`f.close()`

要回答您的问题，最好的方法是使用`with`块。即使引发异常，文件也会自动关闭：

```
with open('test.txt') as f:
    pass
# Automatically closes file on with block exit 
```

# android - onActivityResult 没有被调用

> ID：11447892
> 
> 赞同：0
> 
> 时间：2012-07-12T08:31:25.917
> 
> 标签：android, android-intent, null, bytearray

我需要将一个字节数组从一个活动发送到另一个活动。我有这样的事情： `Activity1`-> `Activity2`->`Activity1`

在 Activity2 中，我制作了一张照片，我想将其发送`byte[] imageData`到 Activity1 以显示它。为此，在 Activity2 我有：

```
Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {
       public void onPictureTaken(byte[] imageData, Camera c) {

           if (imageData != null) {
               takephoto=1;
               prefsEditor.putInt(TAKEPHOTO, takephoto);
               prefsEditor.commit();

               System.out.println("imageData in TakePHoto"+ imageData);
               Intent mIntent = new Intent();

               Bundle b = new Bundle();
               b.putByteArray("imageData", imageData);

               mIntent.putExtras(b);

               setResult(FOTO_MODE, mIntent);
               finish();

           }
           mCamera.startPreview();
           mPreviewRunning=true;
       }
   }; 
```

在`Activity1`，在`OnActivityResult()`我有这个：

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            takephoto = myPrefs.getInt(TAKEPHOTO,0);
            System.out.println("OnActivityResult"+resultCode);  
                if (resultCode == RESULT_OK )

                        if (takephoto == 1){
                Toast.makeText(this, "11",Toast.LENGTH_SHORT).show();

                                 BitmapFactory.Options options = new BitmapFactory.Options();
                                options.inSampleSize = 3;

                                byte[] imageData = data.getByteArrayExtra("imageData");

                                System.out.println("imageData in Photos"+ imageData );

                                Bitmap myImage = BitmapFactory.decodeByteArray(imageData, 0,
                imageData.length, options);

                                Matrix mat = new Matrix();
                                mat.postRotate(90);
                                bitmapResult = Bitmap.createBitmap(myImage, 0, 0, myImage.getWidth(),
                myImage.getHeight(), mat, true);

                                myadapter.notifyDataSetChanged();
                        }
        } 
```

问题是 in`Activity1` `onActivityResult`没有被调用，我看不出我的错误在哪里。我在 Netbeans 工作，我在 Eclipse 中测试了这段代码，它运行良好。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:51:33.913

查看 putExtras 的文档：

> 向意图添加一组扩展数据。键必须包含包前缀，例如应用程序 com.android.contacts 将使用类似“com.android.contacts.ShowAll”的名称。

而不是在意图中放置一个包：

```
Bundle b = new Bundle();
b.putByteArray("imageData", imageData);

mIntent.putExtras(b); 
```

您可以尝试直接使用 bytearray ：

```
mIntent.putExtra("imageData", imageData); 
```

**为什么不调用 onActivityResult ：**

当您设置结果时，您使用代码 FOTO_MODE ：

```
setResult(FOTO_MODE, mIntent); 
```

但是在 onActivityResult 中，您检查代码：

```
resultCode == RESULT_OK 
```

你应该这样做：

```
if (resultCode == FOTO_MODE) {
     // then all your stuff of getting data from the intent.
} 
```

而不是使用 System.out.println("OnActivityResult"+resultCode);
利用 ：

```
 Logd.d("Myclass", "OnActivityResult"+resultCode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:19:55.723

我为我的应用程序找到了一个解决方案（我仍然不明白为什么`onActivityResult()`不打电话）。在`Activity2`我放：

```
String stringData=Base64.encodeToString( imageData, Base64.DEFAULT);
prefsEditor.putString(STRINGDATA, stringData);
prefsEditor.commit(); 
```

在`Activity1`我得到`imageData`这样的`SharedPreferences`：

```
String stringData = myPrefs.getString(STRINGDATA, "stringData");
byte[] imageData = Base64.decode(stringData, Base64.DEFAULT); 
```

像这样我可以收到`byte[]`.

# android - Android：无法将使用 DownloadManager 从服务器下载的数据保存到内部存储器

> ID：11447894
> 
> 赞同：3
> 
> 时间：2012-07-12T08:31:36.087
> 
> 标签：android, memory, android-contentprovider, internal, download-manager

我正在使用 android 中的 DownloadManager 类从服务器下载数据。数据保存到外部存储器。但我想将它们保存到内部存储器中。我做了我的研究，我发现来自这个[链接](https://stackoverflow.com/questions/6494627/download-to-internal-memory-possible)。我尝试了*cyngus*的第二种解决方案：

```
public static final String PROVIDER_NAME = "com.provider.Downloads";
public static final Uri CONTENT_URI = Uri.parse("content://"+ PROVIDER_NAME + "/downloads")

DownloadManager.Request req = new DownloadManager.Request(Uri.parse(LINK));
req.setDestinationUri(CONTENT_URI); 
```

它没有用，它给了我错误： `java.lang.IllegalArgumentException: Not a file URI: content://com.provider.Downloads/downloads`。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:06:08.500

[文档`DownloadManager.Request`](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setDestinationUri%28android.net.Uri%29)明确提到您为任何方法设置的目标必须`setDestination*`在外部存储上，并且您的应用程序必须具有`WRITE_EXTERNAL_STORAGE`权限：

> 设置下载文件的本地目的地。必须是指向外部存储路径的文件 URI，并且调用应用程序必须具有 WRITE_EXTERNAL_STORAGE 权限。

我看不出如何在这里提供内部存储的路径。

# dependency-injection - 通过 Ninject 在 MVC 4 中进行依赖注入有什么要求？

> ID：11447907
> 
> 赞同：2
> 
> 时间：2012-07-12T08:32:07.760
> 
> 标签：dependency-injection, asp.net-mvc-4, ninject.web.mvc

我尝试将依赖项注入到控制器的构造函数中，就像我之前所做的那样。问题是我似乎无法让它工作。使用 MVC 4 进行 DI 时是否有任何新要求，或者我是否缺少一些基本要求？

我正在使用：
**Ninject.MVC3 3.0.0.6**
**System.Web.MVC 4.0.0.0**

以下是与此相关的重要部分：

NinjectWebCommon.cs

```
 public static class NinjectWebCommon{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel){
        kernel.Bind<Handling.EventHandler>().To<EventDtoHandler>();
        kernel.Bind<CommandHandler>().To<CommandDtoHandler>();
        kernel.Bind<Mapper>().To<DtoMapper>().InSingletonScope();
        kernel.Bind<Serializer>().To<DtoSerializer>();
        kernel.Bind<Deserializer>().To<DtoDeserializer>();
        kernel.Bind<CommandQueue>().To<DeviceCommandQueue>();
        kernel.Bind<Dispatcher>().To<EventDispatcher>();
        kernel.Bind<Instantiator>().To<DtoInstantiator>();
        kernel.Bind<Template>().To<NmsTemplate>().InSingletonScope();
    }   
} 
```

全球.asax：

```
 public class Global : HttpApplication {

    protected void Application_Start() {
        AreaRegistration.RegisterAllAreas();

        RegisterRoutes(RouteTable.Routes);
    }

    public static void RegisterRoutes(RouteCollection routes) {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });

        routes.MapRoute(
            "Event", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Event", action = "Event", id = UrlParameter.Optional } // Parameter defaults
        );
    }
} 
```

控制器：

```
public class EventController : Controller{
    private readonly EventHandler eventDtoHandler;

    public EventController(EventHandler eventDtoHandler){
        this.eventDtoHandler = eventDtoHandler;
    }

    ...
    Some Actions
    ...
} 
```

我得到：

[MissingMethodException: 没有为此对象定义无参数构造函数。] System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0 System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98 System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241 System.Activator.CreateInstance(Type type, Boolean nonPublic) +69 System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext，类型控制器类型）+67

[InvalidOperationException：尝试创建类型为“Web.Controllers.EventController”的控制器时发生错误。确保控制器有一个无参数的公共构造函数。] System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182 System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80

在我看来，Ninject 没有得到 ControllerFactory 的责任。

# asp.net-mvc - MVC Html Helper 不在链接中呈现图像

> ID：11447908
> 
> 赞同：2
> 
> 时间：2012-07-12T08:32:12.543
> 
> 标签：asp.net-mvc, html-helper

我正在创建一个自定义助手来创建图像链接，如下所示：

```
 public static MvcHtmlString ImageLink(this HtmlHelper helper, string imageUrl, string imageAlt, string linkUrl, string linkTitle, string linkTarget)
{
    //create the image object
    var img = new TagBuilder("img");

    //add its attributes
    img.MergeAttribute("src", imageUrl);
    img.MergeAttribute("alt", imageAlt);

    //create the link
    var link = new TagBuilder("a");

    //add its attributes
    link.MergeAttribute("href", linkUrl);
    link.MergeAttribute("title", linkTitle);
    link.MergeAttribute("target", linkTarget);

    //set the inner html of the link to that of the img
    link.InnerHtml = img.ToString();

    //finally return the link tag
    return MvcHtmlString.Create(link.ToString(TagRenderMode.EndTag));
} 
```

但是，当我使用它时，它根本不会渲染任何东西。当我将最后一行更改为：

```
return MvcHtmlString.Create(link.ToString(TagRenderMode.SelfClosing)); 
```

它只呈现 a 标签并封装语句之外的文本，例如：

```
Hello @Html.ImageLink("...params") world 
```

这里的结果是“世界”文本被包裹在锚点中，但没有图像。我什至没有意识到它可以做到这一点，因为“世界”这个词不是辅助语句的一部分。

我终于把最后的声明改成了：

```
return MvcHtmlString.Create(link.ToString(TagRenderMode.Normal)); 
```

这行得通，但我的问题是为什么？我认为 EndTag 更有意义，尤其是在查看 Intellisense 对该选项的描述时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T05:02:42.013

您的代码的最后两行应该是：

```
 link.InnerHtml = img.ToString(TagRenderMode.SelfClosing);

        return MvcHtmlString.Create(link.ToString()); 
```

您不需要 TagRenderMode.Normal 因为它是默认模式。要在您的视图中使用它，您可以这样做：

```
@Html.ImageLink("/images/test.jpg", "testalt", "http://testlink", "linktitle", "linktarget") 
```

> 我认为 EndTag 更有意义

您可能会这么认为，但`TagRenderMode.EndTag`只呈现结束标记。`TagRenderMode.Normal`是您所追求的，因为它创建了一个普通的 HTML 标记并允许`InnerHtml`.

# java - Eclipse Juno - 为什么在未使用的带注释的私有字段上没有警告？

> ID：11447910
> 
> 赞同：11
> 
> 时间：2012-07-12T08:32:22.203
> 
> 标签：java, eclipse, eclipse-juno

在以前的 Eclipse 版本中，这可以正常工作。

在错误/警告中，我检查了`"Unused private field" -> Warning`. 但这似乎不起作用。

例如：

```
public class Main {
    @Resource
    private int a; //I see no warning here
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T09:31:00.267

这是有意看到的 - [https://bugs.eclipse.org/bugs/show_bug.cgi?id=365437](https://bugs.eclipse.org/bugs/show_bug.cgi?id=365437)。另请参阅有关此主题的未解决错误 - [https://bugs.eclipse.org/bugs/show_bug.cgi?id=376590](https://bugs.eclipse.org/bugs/show_bug.cgi?id=376590)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-08T08:26:37.160

[应该很快重新打开Eclipse 错误报告 386692](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386692)，同时忽略 Spring 框架中的 @Autowired 注释。

# android - 在 OpenGL 中显示全屏背景

> ID：11447913
> 
> 赞同：2
> 
> 时间：2012-07-12T08:32:34.383
> 
> 标签：android, opengl-es, textures

我的 Android 应用程序需要显示一个全屏位图作为背景，然后使用 OpenGL ES（1.1\. 或 2.0 - 尚未确定）显示一些动态 3D 图形。背景图片是同一应用程序中 WebView 组件的快照，因此它的尺寸已经完全适合屏幕。

我是 OpenGL 新手，但我知道显示位图的常规方法包括将其缩放为 POT 纹理 (glTexImage2D)、配置矩阵、为矩形创建一些顶点并使用 glDrawArrays 显示。当只需要以 1:1 的比例在屏幕上绘制位图时，似乎需要做很多额外的工作（将图像缩小到 POT 大小时会降低质量）。

“桌面” GL 具有 glDrawPixels()，它似乎完全可以满足这种情况的需要，但 GLES 中显然没有。有没有办法将像素复制到 GLES 中的屏幕缓冲区，绕过 3D 管道？或者有什么方法可以在常规 Android 手段绘制的“平面”背景之上绘制 OpenGL 图形？或者制作一个半透明的 GLView（有 RSTextureView 用于基于 Renderscript 的显示，但我找不到 GL 的等价物）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:33:10.903

> 但我知道显示位图的常规方法涉及将其缩放为 POT 纹理（glTexImage2D）

那你的知识就过时了。现代 OpenGL（第 2 版及更高版本）适用于其纹理的任意图像尺寸。

> “桌面” GL 具有 glDrawPixels()，它似乎完全可以满足这种情况的需要，但 GLES 中显然没有。

好吧，现代“桌面”OpenGL，即版本 3 核心和更高版本也没有 glDrawPixels。

不管这个功能是/过去多么吸引人，它只提供了很差的性能并且有很多警告，以至于它很少使用，只要可以避免使用它。

只需将未缩放的图像上传到纹理中，禁用 mipmapping 并将其绘制到全屏四边形上。

# excel - 指定形状宽度会产生错误：指定的维度对当前图表类型无效

> ID：11447914
> 
> 赞同：4
> 
> 时间：2012-07-12T08:32:43.730
> 
> 标签：excel, vba

我正在尝试将 Excel 图表保存为图像。

使用整个代码，我调用了几个工作簿，查找所有工作表并保存所有图表。

以下代码适用于 Excel 2007 和 2010（但由于 + 4 存在可见的水平和垂直线）。如果我将其更改为`Round(shp.Width + 4, 0)`2010`Round(shp.Width, 0)`年（但不是 2007 年）出现以下错误：

> 运行时错误“-2147467259 (80004005)”：
> 指定的维度对当前图表类型无效。

```
Dim shp As Shape
Dim sht As Worksheet

Set sht = Application.ActiveWorkbook.Sheets(shtName)
Set shp = sht.Shapes(chrtName)

shp.CopyPicture xlScreen, xlBitmap

Dim objChart As ChartObject
Set objChart = sht.ChartObjects.Add(200, 200, Round(shp.Width + 4, 0), Round(shp.Height + 4, 0))
objChart.Activate
ActiveChart.Paste
ActiveChart.Export Filename:=fullPath, Filtername:=Right(fullPath, 3)
objChart.Delete 
```

如何避免使用 +4？

我发现了以下内容：

> “只要将默认图表类型设置为您尝试创建的图表类型以外的其他图表类型，就会出现问题。例如，如果您尝试创建折线图并且 Excel 中的默认图表是 OHLC（烛台股票图表），那么Excel 会很快抱怨“指定的维度对当前图表类型无效”。即使您尝试从 VB.NET 创建图表也会发生同样的情况。因此，首先将默认图表类型更改为一些基本图表类型像折线图。问题将得到解决。 [http://www.excelbanter.com/showthread.php?t=204071](http://www.excelbanter.com/showthread.php?t=204071)

我怎样才能用 VBA 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-27T09:06:12.633

我得到了同样的例外。我将问题追溯到保存路径。

如果保存路径错误，或者指定的路径不存在，则会引发此异常。检查以确保路径存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-09T23:17:46.150

很久没有回答。

你需要做两件事。首先，确保没有选择任何数据，否则 Excel 可能会尝试将其放入您正在创建的图表中。

插入此块

```
Dim rngTmp as range
If Typename(Selection) = "Range" then
  Set rngTmp = selection
End If
With ActiveSheet
  .Range("A1").Offset(.Rows.Count - 1).Select
End With 
```

行前

```
Set objChart = sht.ChartObjects.Add(...) 
```

并在上述行之后插入以下内容

```
ObjChart.Chart.ChartType = xlLine ' or another "safe" chart type
If Not rngTmp is Nothing then
  rngTmp.select
End If 
```

严格来说，如果不是在图表中添加数据，则不需要更改图表类型，但为了强迫症，最好是完整的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T16:31:40.217

利用

`Set objChart = Worksheet.Shapes.AddChart2().Chart.Parent`

代替

`Set objChart = Worksheet.ChartObjects.Add()`

前一个函数允许您在第二个参数中指定基本图表类型。

# javascript - 数据从 Javascript 传递到 MVC 控制器

> ID：11447917
> 
> 赞同：0
> 
> 时间：2012-07-12T08:33:00.370
> 
> 标签：javascript

我需要将数据从 javascript 传递到 MVC 应用程序中的控制器。如何做到这一点？我想设置一个 ViewModel 属性，然后在控制器中读取它。我的 JavaScript：

```
function DoInfo@(i.ToString())() {
         $("#SelectedSession").val($("#sessionid@(i.ToString())").val());
         alert($("#sessionid@(i.ToString())").val());
         $("#PageController").val(70);
         $("#formID").submit();
    } 
```

我收到带有正确 sessionid 的警报，但是当我在控制器中将它作为 viewModel.SelectedSession 读取时它为空。但是 PageController 的设置是正确的，所以我认为我可以使用相同的方式来执行 SelectedSession。

```
 if (viewModel.PageController == 70) 
        {
            pass = new PassingData();
            pass.personid = TSSessionService.ReadPersonId(viewModel.SelectedSession);
            TempData["pass"] = pass;

            return RedirectToAction("Index", "Info");
        } 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:47:51.137

将 SelectedSession 作为字段添加到您的视图中（如果您不想将其显示给使用该应用程序的任何人，则可能是隐藏字段）

在您看来，在提交的表单中，添加

```
<%=Html.HiddenFor(Model=>Model.SelectedSession)%> 
```

# php - PHP 将 Excel 导入数据库 (xls & xlsx)

> ID：11447918
> 
> 赞同：25
> 
> 时间：2012-07-12T08:33:08.550
> 
> 标签：php, excel, import

我试图搜索一些插件来将 Excel 文件导入 MySQL 数据库，其中之一是[http://code.google.com/p/php-excel-reader/](http://code.google.com/p/php-excel-reader/)

该工具功能强大，可以将整个 excel 内容显示为 html。

但是，我想我只需要读取Excel文件并提取内容，例如，放入一个数组中，然后编写一个SQL语句进入数据库。

会有好的代码和包吗？谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-12T08:37:17.670

这是具有适当文档和示例的最佳插件

### [https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)

**加分点：你可以在它的**[论坛上](http://phpexcel.codeplex.com/discussions) 寻求帮助，你会在一天之内得到作者本人的回复，真的很令人印象深刻。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-06T12:25:04.703

有时我需要将大型 xlsx 文件导入数据库，所以我使用`spreadsheet-reader`它可以读取每行文件。这是一种非常**节省内存的**导入方式。

```
<?php
    // If you need to parse XLS files, include php-excel-reader
    require('php-excel-reader/excel_reader2.php');

    require('SpreadsheetReader.php');

    $Reader = new SpreadsheetReader('example.xlsx');
    // insert every row just after reading it
    foreach ($Reader as $row)
    {
        $db->insert($row);
    }
?> 
```

[https://github.com/nuovo/spreadsheet-reader](https://github.com/nuovo/spreadsheet-reader)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-12T09:03:12.850

如果您可以在处理之前将 .xls 转换为 .csv，则可以使用以下查询将 csv 导入数据库：

```
load data local infile 'FILE.CSV' into table TABLENAME fields terminated by ',' enclosed by '"' lines terminated by '\n' (FIELD1,FIELD2,FIELD3) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-12T08:36:05.283

如果将 excel 文件保存为 CSV 文件，则可以使用 PHPMyAdmin 等工具将其导入 mysql 数据库

我不确定这是否对您的情况有所帮助，但是手动或以编程方式将 csv 文件解析到数据库中要比我想象的 excel 文件容易得多。

编辑：但是，我建议查看其他答案而不是我的答案，因为@diEcho 答案似乎更合适。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-23T13:42:56.113

我写了一个继承类：

```
<?php
class ExcelReader extends Spreadsheet_Excel_Reader {	

 function GetInArray($sheet=0) {

  $result = array();

   for($row=1; $row<=$this->rowcount($sheet); $row++) {
    for($col=1;$col<=$this->colcount($sheet);$col++) {
     if(!$this->sheets[$sheet]['cellsInfo'][$row][$col]['dontprint']) {
      $val = $this->val($row,$col,$sheet);
      $result[$row][$col] = $val;
     }
    }
   }
  return $result;
 }

}
?>
```

所以我可以这样做：

```
<?php

 $data = new ExcelReader("any_excel_file.xls");
 print_r($data->GetInArray());

?>
```

# wordpress - .htaccess：重写到文件夹，除非 cookie 存在或在绕过 WordPress 重写的日期之前

> ID：11447923
> 
> 赞同：4
> 
> 时间：2012-07-12T08:33:29.300
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting

这些天，我发现自己经常将静态网站迁移到基于 WordPress 的网站。在测试服务器上完成 WordPress 网站的开发后，我想将其安装在当前网站域上，但不影响旧的静态站点 - 直到站点上线。

我的想法是将当前的非 WordPress 网站移动到一个文件夹`/old/`，并将所有请求重写到该文件夹​​（因此出于 SEO 目的，保持所有 url 相同）。

为了让我自己和其他授权人通过我想检查一个 cookie（这将通过一个简单的“登录”php 文件设置，因为我不能依赖静态 IP 地址）或者当前日期和时间是否在直播之后日期然后让 WordPress 重写规则按照他们的方式授予对 WordPress 网站的访问权限。

这也将允许我在当前或旧站点上添加一个简单的倒数计时器，之后新站点将在上线日期自动上线。

我的简单 login.php 脚本是这样的：

```
<?php
setcookie("login", "loggedin", time()+3600,"/");
?>
<h3>Welcome, you are logged in</h3>
<p><a href="/">Click here to visit the home page</a></p> 
```

我认为以下可能是实现这一目标的最佳方法，但它不起作用（我收到内部服务器错误）。第一部分检查登录 cookie 是否存在，如果不存在，并且当前日期和时间在 2012 年 7 月 20 日晚上 8 点之前，它将重写对`/old/`文件夹的所有请求。我已修改 WordPress 重写部分以排除该`/old/`文件夹。

```
RewriteCond %{HTTP_COOKIE} !^.*login.*$ [NC]
RewriteCond %{TIME} < 20120720200000
RewriteCond %{REQUEST_URI} !^/old/
RewriteRule (.*) http://domain.com/old/$1 [L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_URI} !^/(old/.*)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

有人可以帮助我实现我想要实现的目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:18:53.267

该`RewriteCond`指令接受**2 个**参数，但在比较时您给它 3 `%{TIME}`，这会导致 apache 返回 500 服务器错误。如果您查看[RewriteCond 中的字典比较](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)，则比较器后面不能有空格（mod_rewrite 是一种像那样的愚蠢）。所以这条线需要看起来像这样：

```
# no space here -----V
RewriteCond %{TIME} <20120720200000 
```

那应该处理 500 服务器错误。

关于您的规则的另一件事是规则的目标 ,`http://domain.com/old/$1`将导致 apache 进行 302 重定向，因为您将 包含`http://domain.com`在目标中。如果您希望它在内部重写（因此浏览器地址栏中的 URL 不会更改），则需要删除该位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:29:26.953

一种更简单的方法是安装名为[维护模式的插件](http://wordpress.org/extend/plugins/maintenance-mode/)

然后为主题创建一个 503.php。

将此添加到文件的开头：

```
<?php if (!is_user_logged_in())
{
    header("Location: http://example.com/old");
}
else
{
  //WHATEVER YOU LIKE
}?> 
```

这样，登录用户可以浏览 WP 网站，而其他用户将被重定向到 /old 网站。

用户必须事先登录@http: [//example.com/wp-login.php](http://example.com/wp-login.php)

# jquery - fancybox 2.0.6 关闭按钮自定义操作

> ID：11447925
> 
> 赞同：1
> 
> 时间：2012-07-12T08:33:34.060
> 
> 标签：jquery, fancybox-2

我正在尝试将自定义操作插入到花哨的关闭按钮中，但什么也没发生，这是为什么呢？

我的代码

```
$(".fancybox-close").click(function(){
    $("#main-menu-nav a").removeClass("active");
    $("footer").toggleClass("down", 400);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:40:51.547

Fancybox 有一个回调 onClose 你可以在它的参数中定义

请尝试使用：

```
$("#TARGET_ELEMENT").fancybox({
 'OTHER_PARAM':'OTHER_PARAM_VALUE',
 'onClosed': function() {
   alert("FIRED_ON_CLOSE");
  }
 }); 
```

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:41:35.597

`$("footer").toggleClass("down", 400);`是无效的 jQuery 代码，toggleClass 的第二个参数必须是布尔值 h​​ttp [://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:43:22.550

`Fancybox v1`为 API 提供一个`onClosed`在 Fancybox 关闭时调用的方法。
`Fancybox v2`为 API 提供一个`afterClose`在 Fancybox 关闭时调用的方法。

[**提示和技巧**](http://fancybox.net/blog)页面具有使用此公共回调的方法，如下所示：

```
$("#tip5").fancybox({
    'scrolling'     : 'no',
    'titleShow'     : false,
    'afterClose'        : function() {
       $("#main-menu-nav a").removeClass("active");
       $("footer").toggleClass("down", 400);
    }
}); 
```

使用此方法调用您的自定义操作将确保在单击覆盖以关闭 Fancybox 时调用它们，因为未单击按钮本身。

**状态更新：**根据西蒙在此页面上的回答，请注意他的观点，即您可能对`switch parameter`for方法有疑问，因为除非（如评论所述）您使用**jQuery UI**`.toggleClass();` ，否则值`400`可能无法达到您的预期。

# iphone - UINavigationController 中的 UIWebView 不滚动

> ID：11447931
> 
> 赞同：2
> 
> 时间：2012-07-12T08:34:19.063
> 
> 标签：iphone, ios

我有一个应用程序，它基本上是一个 TabBar，其中的选项卡是 UINavigationControllers，它在包含 UIWebViews 的不同 ViewControllers 之间来回移动。我的问题是，虽然我可以单击 UIWebViews 的按钮，但当内容大于屏幕时，我无法滚动内容。

正在创建 TabController

```
tabBarController = [[MainTabBarController alloc] init];
[tabBarController setDelegate:self]; 
```

在选项卡之间切换时，我有以下代码：

```
WebViewController *wvc = [[WebViewController alloc] initWithNibName:@"WebController" bundle:nil];
UIWebView *wv = [[UIWebView alloc] init];

[wv setUserInteractionEnabled:YES];
[wvc setTitle:[nc title]];
[wv setDelegate:self];
[wv loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:requestURL]]];
[wvc setWebpage:wv];
[wvc setView:wv];
[nc pushViewController:wvc animated:NO];
NSLog(@"NC.viewcontroller count: %d", [nc.viewControllers count]);
[nc setLastURL:requestURL];
[wvc startLoaderIndicator];

[wv release];
[wvc release];
requestOk = YES; 
```

当点击其中一个 UIWebViews 中的链接时，我有这个：

```
ItemNavigationController *nc = (ItemNavigationController *)[tabBarController selectedViewController];
WebViewController *wvc = [[WebViewController alloc] initWithNibName:@"WebController" bundle:nil];
UIWebView *wv = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,320,480)];
//wvc.view = wvc.sView;
[wvc setTitle:[nc title]];
[wv setDelegate:self];
[wv loadRequest:request];
[wvc setWebpage:wv];
[wvc setView:wv];
[nc pushViewController:wvc animated:NO];
NSLog(@"NC.viewcontroller count: %d", [nc.viewControllers count]);
[nc setLastURL:request.URL.absoluteString];
[wvc startLoaderIndicator];

[wv release];
[wvc release];
requestOk = YES; 
```

一切正常，除了 WebViews 不滚动。它看起来像这样： ![截屏](../Images/1c650177fdf510f57403986f774cde52.png)

![这些页面不会滚动](../Images/f5ef9c182e48f4ea3ea0ee9d5c903386.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:29:20.837

创建`WebViewController`类并在 .m 中`viewDidLoad`添加：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIWebView *wv = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,320,480)];
    [wv setDelegate:self];
     NSURL*url = [NSURL URLWithString:@"http://www.link.com/twitter_iPhone.php"];
    [wv loadRequest:[NSURLRequest requestWithURL:url]];
    [self.view addSubview:wv];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:58:49.417

我不喜欢这个代码块的第一件事......

```
WebViewController *wvc = [[WebViewController alloc] initWithNibName:@"WebController" bundle:nil];
UIWebView *wv = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,320,480)];
wvc.view = wvc.sView; 
```

而是创建子视图并将其添加到`viewDidLoad`视图控制器块中的视图。此外，利用 IB 并通过 XIB 添加 WebView 并简单地连接 IBOutlet 和委托。

如果您坚持这样做，请不要覆盖视图，

```
[wvc.view addSubview:wv]; 
```

我在一个简单的 WebViewController 中写了这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.autoresizingMask = UIViewAutoresizingFlexibleHeight;

    UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    webView.autoresizingMask = UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:webView];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://news.google.com"]]]; 
} 
```

并像这样从 AppDelegate 调用它：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.window.backgroundColor = [UIColor whiteColor];

    CPWebController *webController = [[CPWebController alloc] init];

    CPNavController *navController = [[CPNavController alloc] initWithRootViewController:webController];
    [self.window addSubview:navController.view];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

它的大小正确，有一个导航栏，并且可以正确滚动。为了代码简洁，请原谅缺少发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:10:18.540

据我所知，您在这里将其设置为固定高度：

```
UIWebView *wv = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,320,**480**)]; 
```

所以内容大小只有 480，所以无处可滚动。尝试类似 (0,0,320, **1000** ); 测试这是否是问题如果是这样，将高度设置为 cotent 大小，以便它是动态的

# javascript - 如何将过滤器应用于特定的数据表

> ID：11447934
> 
> 赞同：20
> 
> 时间：2012-07-12T08:34:35.647
> 
> 标签：javascript, jquery, jquery-plugins, datatables

是否可以将某个过滤器仅应用于一个数据表？我在准备好文档时应用了以下过滤器功能，我不知道这是否是正确的程序，但作为副作用，所有数据表都会受到过滤器的影响。我只想影响 $('#productTable')，但这个选择器似乎没有预期的效果。

```
//Filter Function in Stock 
//$('#productTable').
$.fn.dataTableExt.afnFiltering.push(function(oSettings, aData, iDataIndex) {
    var checked = $('#instock').is(':checked');
    var qntStock = 1; 
    var stockCol = 3; 

    if (!checked) {
        return true;
    }
    if (checked && aData[stockCol] > qntStock) {
        return true;
    }

    return false;
 }); 
```

是否可以仅将过滤器应用于特定表？我该如何做到这一点？

编辑：

数据表初始化：

```
var oTable = $('#productTable').dataTable({
        "aoColumnDefs": [{
            "sClass": "my_class", 
            "aTargets": [4]
            }],
        "bAutoWidth": false,
        "iDisplayLength": 100,
        "fnDrawCallback": function() {
            $("td.my_class").editable(function(value, settings) 
            { 
                return(value);
            }, 
            {
                indicator : 'Save...',
                tooltip   : 'Click to Edit...'
            }
            );
        }
    }); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T15:52:22.443

您可以创建一个表数组来进行过滤 - 然后在您的过滤器中检查当前表是否存在于该数组中......类似于：

```
// setup an array of the ids of tables that should be allowed
var allowFilter = ['productTable'];

$.fn.dataTableExt.afnFiltering.push(function(oSettings, aData, iDataIndex) {

    // check if current table is part of the allow list
    if ( $.inArray( oSettings.nTable.getAttribute('id'), allowFilter ) == -1 )
    {
       // if not table should be ignored
       return true;
    }
    var checked = $('#instock').is(':checked');
    var qntStock = 1; 
    var stockCol = 3; 

    if (!checked) {
        return true;
    }
    if (checked && aData[stockCol] > qntStock) {
        return true;
    }

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T18:23:03.940

你可以这样做：在配置中添加一个参数：

```
var oTable = $('#productTable').dataTable({
        "applyFilter":true,
        "aoColumnDefs": [{
            "sClass": "my_class", 
            "aTargets": [4]
            }],
        "bAutoWidth": false,
        "iDisplayLength": 100,
        "fnDrawCallback": function() {
            $("td.my_class").editable(function(value, settings) 
            { 
                return(value);
            }, 
            {
                indicator : 'Save...',
                tooltip   : 'Click to Edit...'
            }
            );
        }
    }); 
```

然后，验证您的过滤器是否处于活动状态：

```
//Filter Function in Stock 
//$('#productTable').
$.fn.dataTableExt.afnFiltering.push(function(oSettings, aData, iDataIndex) {
    if(oSettings.applyFilter)
    {
        var checked = $('#instock').is(':checked');
        var qntStock = 1; 
        var stockCol = 3; 

        if (!checked) {
            return true;
        }
        if (checked && aData[stockCol] > qntStock) {
            return true;
        }

        return false;
    }
    else
        return true;
 }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T06:30:13.747

没试过，但是这样的东西怎么样？

```
$.fn.dataTableExt.afnFiltering.push(
function( oSettings, aData, iDataIndex ) {
        if ( oSettings.nTable == document.getElementById( 'productTable' )){
            var checked = $('#instock').is(':checked');
            var qntStock = 1; 
            var stockCol = 3; 

            if (!checked) {
                return true;
            }
            if (checked && aData[stockCol] > qntStock) {
                return true;
            }

            return false;
        }
}
); 
```

这个想法来自这个线程：[同一页面上的 2 个数据表和 2 个过滤器](http://www.datatables.net/forums/discussion/5939/2-datatables-2-filters-on-the-same-page/p1)

* * *

你也可以试试**我的** [yadcf 数据表插件](https://github.com/vedmack/yadcf)，这里是它的[展示 URL](http://yadcf-showcase.appspot.com/)，它有 9 种不同类型的过滤器 + 额外的 API 函数，可以帮助你加载预先过滤的表格或添加单个过滤器来过滤多个表格和许多其他很酷的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T09:52:18.830

事实证明过滤是全局的，实际上你必须过滤表格元素......这非常令人失望。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T18:06:13.297

这就是我们所做的：

```
 var temporarilySetFilterFunctions = $.fn.dataTableExt.afnFiltering;
            $.fn.dataTableExt.afnFiltering = [function (settings, data, index) {
                // our filter function
            } ];

            this._table.dataTable().fnDraw(); // filter!

            $.fn.dataTableExt.afnFiltering = temporarilySetFilterFunctions; 
```

基本上将现有过滤器存储在 TEMP 变量中，然后在完成后将其还原。艾伦的奇怪设计决定是这样实现的。丑陋的黑客，但它的工作原理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-09T08:11:09.400

以下链接将有助于将过滤器应用于数据表。 [http://live.datatables.net/oyinin/3/edit#javascript,html](http://live.datatables.net/oyinin/3/edit#javascript,html)

我这样使用它：

```
 drawTable = function (tableId, url,    stateEngineURL) {
        resUrl = url;
        sUrl = stateEngineURL;
        oTable = $('#' + tableId).dataTable({
            "bAutoWidth" : false,
            "bProcessing" : false,
            "bServerSide" : false,
            "sScrollY" : "150px",
            "bPaginate" : true,
            "bDeferRender" : true,
            "bScrollInfinite" : true,
            "bSortCellsTop" : true,
            "sAjaxSource" : url,
            "aoColumns" : [
                {
                    "mDataProp" : "clusterName"
                }, {
                    "mDataProp" : "type"
                }, {
                    "mDataProp" : "actions",
                    "bSortable": false
                }
            ],
            "fnServerData": function (sSource, aoData, fnCallback) {
                aoData.push({"name" : "REQUESTTYPE", "value" : "getCredentialResrcURL" });
                $.getJSON(sSource, aoData, function (json) {
                    fnCallback(json);
                });
            },
            "fnRowCallback" : function (nRow, aData) {
                onRowCallBack(nRow, aData);
            }
        });
        oTable.dataTableExt.afnFiltering.push(
                function( oSettings, aData, iDataIndex ) {
                   if(aData.type=='OSS 5.x'){
                       return false;
                   }
                }
            );
        oTable.fnDraw(); 
```

# linux - Linux 中“mkfs.jffs2”实用程序中的“擦除块”是什么？

> ID：11447940
> 
> 赞同：7
> 
> 时间：2012-07-12T08:34:54.570
> 
> 标签：linux, jffs2

`mkfs.jffs2`实用程序中的“擦除块”是什么？

我通过谷歌搜索找不到任何东西，可能是因为我的搜索能力不足。谁能告诉我它是什么？

任何人都可以描述什么是“擦除块”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T04:46:35.303

JFFS2 在原始闪存上运行，而不是在具有使它们看起来像传统磁盘的固件的 USB 记忆棒之类的设备上运行。原始 NAND 闪存只能擦除（即设置位为 1）非常大的块。“擦除块”是设备可以擦除的块的大小。

查看`/proc/mtd`您的系统认为每个设备的擦除块大小是多少。（您需要一个 MTD（内存技术设备，即原始闪存）设备才能使用 /proc/mtd 并使 JFFS2 有用。）

# cakephp - Cake PHP 父/子/孙菜单

> ID：11447942
> 
> 赞同：0
> 
> 时间：2012-07-12T08:35:04.417
> 
> 标签：cakephp, menu

我想用他们的孩子和孙子显示菜单输出将是这样的

家长

-孩子

-孙子

家长 1

-孩子

这是我在 MenuItemsController 中的功能

```
public function buildTree($arr, $parent_id = 0) {
    $op=array();
    foreach ($arr as $item){
    if ($item['parent_id']== $parent_id){
                       $op[$item['id']]=array('name'=>$item['name'],'parent'=>$item['parent_id']
    );
            $children=buildtree($arr,$item['id']);
            if (children) {
            $op[$item['id']]['parent_id']  =$children;                                                                                                                                                                                                                                               

           }
          }
        }

        return $op;

    } 
```

继承人在我的视图元素 app\view\elements\navigation.ctp

```
<?php
    App::import('Controller', 'MenuItems');
    $menu_items = new MenuItemsController();

?>

<ul id="navigation">
<?php
foreach($mainMenuItems as $item) {
echo "<li>".$item['MenuItem']['name']."</li>";
$child=$menu_items->buildsubmenus($item['MenuItem']['id']);
            pr($child);
}

?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:56:35.813

您的控制器需要生成树并将其传递给视图。如何生成它？这取决于您的应用程序，也许您需要调用数据库，也许它只是一个静态数组等。

您需要为树创建自己的格式，例如：

```
Array
(
    [0] => Array
        (
            [0] => child 11
            [1] => Array
                (
                    [0] => grandchild 121
                    [1] => grandchild 122
                )

        )

    [1] => parent 2
    [2] => Array
        (
            [0] => child 31
        )

) 
```

然后您可以将它传递给视图并循环数组以创建菜单。为此，您可以使用递归函数来显示数组。或者如果您知道不会超过 3 个级别，您可以简单地使用 3 个`for`循环

=)所以这与cakephp无关..但是，如果您的菜单存储在数据库中，也许您可​​以使用[树行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)从数据库中检索菜单，但是您仍然需要将其传递给视图并创建一个函数来显示它

希望这可以帮助

# java - 在 GET Rest 资源中发送 JSON - curl 和代码具有不同的行为

> ID：11447943
> 
> 赞同：1
> 
> 时间：2012-07-12T08:35:06.837
> 
> 标签：java, json, post, get, jersey

我先说：我做错了。这就是我做错了什么。

我创建了一个 REST 资源来搜索某些东西，并且我期望请求参数中有一个 JSON 数据：

```
@GET
@Path("/device")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Response searchContent(String searchJSONString) {
    String message = new SearchServices().search(searchJSONString);

    return getResponse(message); //Checks the message for any error and sends back the response.
}//end of searchContent() 
```

我不应该写：

```
@Consumes 
```

因为它是一个 GET 资源并且它不消耗任何东西。但我的问题是如何为此（GET 资源）在 java 代码中发送 JSON 数据。我尝试了 curl 命令，它能够将 JSON 数据发送到此资源，但无论如何都不能发送 java 代码。

我尝试使用 curl 命令向其发送 JSON 数据：

```
curl -X GET -H "Content-Type: application/json" -d '{"keyword":"hello"}' http://localhost:8080/search-test/rest/search 
```

它工作正常并给我一个正确的 JSON 响应。

但是，如果我使用 curl 命令而不指定任何方法（应该是默认的 http get），我会从 tomcat 收到 405（不允许的方法）响应：

```
curl -d '{"keyword":"hello"}' http://localhost:8080/search-test/rest/search 
```

或通过 Java 代码：

```
HttpURLConnection urlConnection = (HttpURLConnection) new URL(urlString).openConnection();
urlConnection.setRequestProperty("Content-Type", "application/json");
urlConnection.setRequestMethod("GET");  //This is not working. 
```

从 tomcat 获得相同的 405（不允许的方法）响应。

如果我使用 java 代码发送 GET 请求，我无法像在 post 方法中那样发送 JSON 数据，我不得不使用 name=value 的东西，为此我需要更改我的 REST 资源以接受它作为名称/值对。

它的意思是这样的：

```
http://localhost:8080/search-test/rest/search?param={"keyword":"permission"} 
```

如果我在 POST 中做类似的事情：

```
@POST
@Path("/device")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Response searchContent(String searchJSONString) {
    String message = new SearchServices().search(searchJSONString);

    return getResponse(message); //Checks the message for any error and sends back the response.
}//end of searchContent() 
```

我也可以从 Java 代码和 curl 命令发送 JSON 数据：

```
curl -X POST -H "Content-Type: application/json" -d '{"keyword":"hello"}' http://localhost:8080/search-test/rest/search 
```

或通过 Java 代码：

```
HttpURLConnection urlConnection = (HttpURLConnection) new URL(urlString).openConnection();
urlConnection.setRequestMethod("POST");  //Works fine.
urlConnection.setRequestProperty("Content-Type", "application/json");
urlConnection.setDoOutput(true); 
```

哪里有问题？为什么我不能从代码发送它，而是从 curl 发送？除了名称=值对之外，还有其他方法可以将 JSON 数据发送到 GET 资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:39:21.803

HttpURLConnection 不允许带有实体的 GET 请求，并且会在将实体发送到服务器之前将其从请求中剥离。因此，我强烈建议您避免使用它，因为即使您使用允许您这样做的不同 Java HTTP 客户端库，您的用户也可能会遇到类似的问题（加上 Web 缓存和代理可能会增加更多问题）。

# c# - 水晶报告失败

> ID：11447944
> 
> 赞同：0
> 
> 时间：2012-07-12T08:35:10.800
> 
> 标签：c#, crystal-reports, report

我用参数创建了一个水晶报表，但它没有加载值。它只显示标题，我的意思是只显示列名。请检查我的代码并纠正我。我曾尝试将报告加载为 pdf 格式，显示类似“加载报告失败”的错误。请纠正我。

```
protected void Button2_Click(object sender, EventArgs e)
    {
        ReportDocument reportdocument = new ReportDocument();
        reportdocument.Load(Server.MapPath("CrystalReport.rpt"));
        reportdocument.SetDatabaseLogon("", "", "Aravind", "MySampleDB");
        reportdocument.SetParameterValue("MRNO", TextBox1.Text);
        CrystalReportViewer1.ReportSource = reportdocument;
    }
    protected void LinkButton1_Click(object sender, EventArgs e)
    {
        EXPORTREPORT();
    }
    private void EXPORTREPORT()
    {
        MemoryStream oStream;
        Response.Clear();
        Response.Buffer = true;
        ReportDocument reportdocument = new ReportDocument();
        reportdocument.Load(Server.MapPath("CrystalReort.rpt"));
        reportdocument.SetDatabaseLogon("", "", "Aravind", "MySampleDB");
        reportdocument.SetParameterValue("MRNO",TextBox1.Text);
        CrystalReportViewer1.ReportSource = reportdocument;

        oStream = (MemoryStream)reportdocument.ExportToStream(ExportFormatType.PortableDocFormat);
        //oStream = (MemoryStream)crReport.ExportToStream(ExportFormatType.PortableDocFormat);
        Response.ContentType = "application/pdf";
        try
        {

            //write report to the Response stream

            Response.BinaryWrite(oStream.ToArray());

            Response.End();

        }

        catch (Exception ex)
        {
            Label2.Visible = true;
            Label2.Text = "ERROR:" + Server.HtmlEncode(ex.Message.ToString());

        }

        finally
        {

            //clear stream

            oStream.Flush();

            oStream.Close();

            oStream.Dispose();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:43:25.743

什么类型的 MRNO 是？也试试下面的代码，这可能对你有帮助。rptDoc.ExportOptions.ExportDestinationType = ExportDestinationType.NoDestination;

```
 Stream getStreams = rptDoc.ExportToStream(ExportFormatType.PortableDocFormat);
                byte[] getbytes = GetStreamAsByteArray(getStreams);

                Response.Clear();
                Response.ContentType = "application/pdf";
                Response.AddHeader("Content-Length", getbytes.Length.ToString());
                Response.BinaryWrite(getbytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:41:23.473

你确定你的报告的名字是`CrystalReort.rpt`？而不是一个更常见的名字`CrystalReport.rpt`。

它是否也位于您网站的根目录中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:34:58.173

将值转换为所需类型，如果它的数字则 Convert.ToDouble(TextBox1.Text)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T12:21:35.447

在页面的加载事件中编写以下代码。

```
if (crystalReportDoc != null)
        {
            crystalReportDoc.Close();
            crystalReportDoc.Dispose();
            GC.Collect();
        } 
```

# iphone - 面向企业的 iPad 应用分发

> ID：11447948
> 
> 赞同：3
> 
> 时间：2012-07-12T08:35:32.790
> 
> 标签：iphone, ios, ipad, app-store

只是为了给您一点背景知识，我们有一个任何人都可以通过网络访问的软件应用程序。它是银行业和零售业的一个非常具体的应用程序。目前，此应用程序可在网络上以及“Windows 平板电脑亭”上访问，并且我们有基于许可证的定价。Windows 平板电脑通过 Web 服务访问数据。

例如，XYZ 银行可以订购 100 个 Windows 平板电脑许可证，我们可以根据我们对 100 个许可证的定价模型向他们收取应用程序费用。

我们收到很多客户要求在 iPad 上开发相同应用程序的请求，我们目前正在研究相同的部署选项。据我了解，苹果在应用下载方面有非常严格的规定。

在上面的场景中，组织需要我们的许可证来运行应用程序，我们应该采用什么样的部署策略？我可以想到2个选项：

1) 在 iTunes 商店部署应用程序并要求组织从 iTunes 商店下载。他们必须与我们联系以获取许可证才能运行该应用程序。合法吗？由于我们有基于许可证的定价模型，我们将免费保留我们的应用程序，并将向组织收取许可证费用。

2) 我们是否应该为我们的客户/组织获得企业许可，并根据该企业许可在他们的 iPad 上部署系统。

根据我的选择＃1是要走的路。但我只想知道免费分发应用程序而不是收取许可证费用是否可以？无论如何，这更像是一个网络应用程序，而 iPhone 只是一个扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:34:52.130

选项 #1 仅在特殊情况下可行，例如，当您在 App Store/IAP 流程之外为您的服务提供通用订阅模型时，例如 Spotify。App Store 指南中有一个特殊段落，即 11.14。但是，如果您的客户只为使用 iPad 应用程序而支付一次性费用，我认为 Apple 会认为这是规避 App Store 支付模式，并且会因为指南第 11.1 条规则而拒绝您的应用程序。

但是 Apple 刚刚为像您这样的案例建立了一种新的分发模式，即“自定义 B2B 应用程序”。这是一种通过 App Store 为特定客户分发自定义应用程序的方式，无需为每个客户提供企业许可证。请参阅 [http://www.apple.com/business/vpp/](http://www.apple.com/business/vpp/)

只有您之前批准的客户才能在 App Store 中看到他们的定制化 App。付款通过苹果，他们像往常一样保留 30%。该计划现在仅限美国，但很快将推广到澳大利亚、加拿大、法国、德国、意大利、日本、新西兰、西班牙和英国。

如果您不想放弃 30%，那么您唯一的选择确实是 #2，使用您客户的企业许可证构建应用程序。我看到的唯一真正的缺点是您必须让每个客户都注册开发人员计划并每年更新它。如果您有很多客户，这可能会成为一个问题。

但是，一旦他们将您设置为代理或管理员，过程就会很顺利。例如，您可以使用 MDM 服务对客户的设备进行 OTA 更新，他们可以设置内部应用商店，因此他们的用户体验与使用 Apple 应用商店时几乎相同。

我刚刚决定为 3-5 个客户的企业项目选择选项 2。我会说，如果您有超过 10 个客户，那么使用所有不同证书、分发方法等的额外工作将不值得，我宁愿向 Apple 支付 30% 的费用来处理这个问题并使用自定义 B2B程序（如果在您所在的国家/地区可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:34:54.613

选项 1 更可取。

您可以在应用商店获得免费应用。

之后，您可以选择许可。并且通过编码，您可以维护这一点，以便使用他们需要购买许可证的应用程序。

许多应用程序都是这样做的，因为他们根据设备 ID 进行注册。

我曾与一些应用程序合作过，这些应用程序用于提供类似许可的 SIP 呼叫等服务。

所以使用选项 1 你可以实现它。

谢谢

# c++ - 将 Google Protocol Buffers .proto 文件集成到 Visual C++ 2010

> ID：11447950
> 
> 赞同：14
> 
> 时间：2012-07-12T08:35:37.347
> 
> 标签：c++, visual-studio-2010, visual-c++, protocol-buffers

我在我的**Visual Studio**项目文件中添加了一个**自定义构建步骤，它从 .proto 输入文件生成****google protobuf** .h/.cc 文件。但我一直想知道是否只有在 proto 文件的内容发生变化时才可以开始编译？

 ****有没有办法从自定义构建步骤中准确地告诉 VisualStudio？将 proto 文件集成到 Visual Studio 构建解决方案中的最佳方法是什么？

目前，在每次构建时，都会更新 .proto 文件，然后更新输出 .h/.cc 文件的时间戳……然后重新编译依赖于此的所有内容。有没有更好的解决方法，同时仍然直接从视觉工作室构建它们？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T12:50:31.163

按照这些详细说明指定[自定义构建工具](http://msdn.microsoft.com/en-us/library/hefydhhy%28v=vs.100%29.aspx)。

考虑到您的 proto 文件与标准项目配置中的 .h/.cpp 文件一起驻留，以下是要插入到自定义构建工具中的值：

```
Command Line: 
path\to\protoc --proto_path=$(ProjectDir) --cpp_out=$(ProjectDir) %(FullPath)
Outputs: 
$(ProjectDir)%(Filename).pb.h;$(ProjectDir)%(Filename).pb.cc 
```

请注意[项目元数据宏](http://msdn.microsoft.com/en-us/library/ms164284%28v=vs.100%29.aspx)的用法，它替换了一些已弃用的宏（如 $(InputDir) 和 $(InputName)）。

现在，Protocol Buffers 编译器将仅在输入文件（即 %(FullPath)）比“输出”更新时运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:07:19.317

也许[这](http://social.msdn.microsoft.com/Forums/pl-PL/msbuild/thread/f45b245c-45b1-4cbf-ad0c-fc63186ba41c)有帮助。特别看一下 Igor Zavoychinskiy 的帖子：

> 这个讨厌的问题的解决方案实际上很简单：在输出部分中，您应该指定完整路径。这在任何地方都没有明确说明，但没有这个检查器就无法找到文件，因此假设它们不存在。例如对于 protobuffers 编译输出部分将是这样的：
> 
> $(InputDir)\$(InputName).pb.cc;$(InputDir)\$(InputName).pb.h

和（也许？）kmote00：

> ...底线：我只需要确保我的“输出”条目与（用户定义的）“输出文件”属性中的默认值完全匹配。（谢天谢地，这也避免了两次构建的需要，这是我之前忍受的另一个烦恼。）****

# c - C（或 asm）：如何执行存储在内存中的 c 代码（从标签复制）

> ID：11447957
> 
> 赞同：7
> 
> 时间：2012-07-12T08:36:19.427
> 
> 标签：c, memory, assembly

我尝试通过将标签之间的 C 代码中的代码段复制到 malloc 分配的内存来“内联”我的 VM。所以我用开始和结束标签定义了操作，我想将以下代码定义的指令复制到缓冲区然后执行（我不确定这是否可能）

```
OP_PUSH0_START:
    sp += 4; *sp = 0; // I WANT THE INSTRUCTIONS OF THIS LINE COPIED TO THE BUFFER
OP_PUSH0_END: 
```

这样做我认为下面的代码片段会起作用

```
void * ptr0 = &&OP_PUSH0_START;
void * ptr1 = &&OP_PUSH0_END;
while(ptr0 < ptr1)
{
    buf[c++] = *ptr0;
    ptr0++;
}
goto buf; //jump to start of buffer 
```

但我什至不能在没有内存错误的情况下读出来

我会很高兴任何链接或任何建议如何实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:51:13.993

将执行转移到任意位置的唯一合法方法是使用函数指针。`goto`只跳转到标签，而不是数组或其他任何东西。

您也不能获取标签的地址。标签不是对象或函数。

正确地指出，数据区域通常放置在内存中，其内容不能作为 CPU 指令执行。但是，通常有解决方法。Windows 和 Linux 提供了更改内存区域的权限/权利/特权/无论您怎么称呼它的功能。

例如，这是一个在 Windows 上尝试做的事情[的例子。](https://stackoverflow.com/a/7859813/968261)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:43:59.977

只是对 Alexey 的回答的补充，我将链接我自己的创建 jit-executor 的示例。

[如何制作可以运行 x86 十六进制代码的 C 程序](https://stackoverflow.com/questions/11252707/how-to-make-a-c-program-that-can-run-x86-hex-codes/11253633#11253633)

AsmJIT[库](http://code.google.com/p/asmjit/)是一个很好的 x86/x64“单行”汇编器，它实际上创建了一个完整的可执行内存块。

jit 引擎的便携版本是[LuaJIT](http://luajit.org/)。它支持为 ARM/x86/PowerPC/MIPS 架构创建函数蹦床。

关于“指向标签的指针”的事情在 C 中不是标准的，因为在某些硬件架构中数据和代码不共享相同的内存。

# tfs - 在团队基础服务器中存储知识

> ID：11447961
> 
> 赞同：6
> 
> 时间：2012-07-12T08:36:36.423
> 
> 标签：tfs

我们使用 Team Foundation Server。我想知道是否可以在 TFS 中以任何形式存储知识。例如，如果有人解决了一个错误，最好将解决方案记录下来并使其对其他人可用/可搜索（也在其他团队项目中）。该解决方案确实可以适用于其他情况。

我们还使用 Sharepoint，因此可以将这两者结合起来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:03:04.833

对于本地化到工作项的信息（例如，错误的屏幕截图等），将数据直接绑定到工作项是可行的方法。对于生命周期超出工作项（知识库内容、正在进行的文档等）的数据，请考虑 sharepoint。

因此，对于您的示例，如果缺陷解决方案有一些本地化的数据并且没有真正的长期价值，那么出于历史原因，您会将其留在工作项中 - 但如果它具有长期价值，请考虑将其与 Sharepoint（wiki或其他文档），并可选地在错误（或其他工作项）和共享点文章之间添加链接（通过使用超链接的链接类型来执行此操作）。

搜索其中一些工作项特定注释的另一种选择是使用扩展名（即[http://visualstudiogallery.msdn.microsoft.com/3f31bfff-5ecb-4e05-8356-04815851b8e7/](http://visualstudiogallery.msdn.microsoft.com/3f31bfff-5ecb-4e05-8356-04815851b8e7/)），但 IMO 用于长术语价值，Sharepoint 更有意义。

# c - 变量的作用域和生命周期

> ID：11447964
> 
> 赞同：0
> 
> 时间：2012-07-12T08:36:47.520
> 
> 标签：c

> **可能重复：**
> [C 中变量的作用域与生命周期](https://stackoverflow.com/questions/7632120/scope-vs-life-of-variable-in-c)

c中变量的范围和生命周期之间到底有什么区别？在函数内的块中声明的变量的范围和生命周期是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T08:42:58.217

假设我们有两个功能：

```
void foo()
{
    /* Do some stuff */
}

void bar()
{
    int local_bar;

    foo();

    /* Do some more stuff */
} 
```

在函数`bar`中，变量的范围`local_bar`都在函数内部`bar`。当调用`foo`变量*暂时*超出范围时，即不能从`foo`. 但是，变量的生命周期并没有结束，它只会在函数结束时`bar`结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:38:15.663

这取决于。范围代表可以访问变量的代码块，生命周期代表从创建到销毁的时间段。

> 在函数内的块中声明的变量的范围和生命周期是什么？

在这种情况下，它们重合：

```
{
   int x; // begin scope and lifetime
}  // end scope and lifetime 
```

在其他情况下也会出现差异，例如使用全局变量。`extern int x`您在某处声明并定义它。它的生命周期从程序的开始延伸到结束，但它的范围仅在您实际包含声明的文件中。

# javascript - JavaScript/Jquery 动态正则表达式生成

> ID：11447969
> 
> 赞同：0
> 
> 时间：2012-07-12T08:37:08.080
> 
> 标签：javascript, regex, dynamic

我已经在这个地方搜索了很多，并且我坚持我的正则表达式有效，但不是动态的。

**id_name**是动态选取的字符串。然后，正则表达式应该用“vals”中的单个 var 替换匹配项。出于某种原因，当我在没有变量的情况下编写正则表达式时，它会按预期工作。我想我可能在转换为正则表达式对象时做错了。

原始字符串：

```
obj = values.replace(/{name}(.*?){\/name}/, 'igm'); 
```

正则表达式对象：

```
 re = '\/{' + id_name + '}(.*?){\\/' + id_name + '}\/';
        regexp = new RegExp(re, 'igm');
        obj = values.replace(regexp, vals); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:40:43.567

`/`如果您通过构造函数构造正则表达式，则不需要也不需要转义字符：

```
re = '{' + id_name + '}(.*?){/' + id_name + '}'; 
```

# python - 在 TextField 中渲染 django 应用程序

> ID：11447972
> 
> 赞同：2
> 
> 时间：2012-07-12T08:37:21.930
> 
> 标签：python, django

我正在创建一个应用程序来显示文章。在我的模型中，我有一个包含文章内容的 TextField。

现在我希望能够在我的文章中呈现另一个应用程序。假设我有一个投票应用程序，我想在文章中间显示一个投票。我怎样才能做到这一点 ？

我尝试`{% render_poll 42 %}`在帖子中放置一个，但正如预期的那样，它只是在生成的页面中显示。

我应该创建某种标签（比如 let say `[poll=42]`）并在显示呈现的 html 页面之前对其进行解析吗？（我使用[markdown](http://pypi.python.org/pypi/Markdown/2.1.1)库，也许我可以扩展它。）我怎样才能做到这一点以保持良好的“django 友好”方式？我希望在管理面板中，我可以轻松地在文章中插入投票（或其他应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:08:48.533

您可以将 TextField 字符串[编译](https://docs.djangoproject.com/en/dev/ref/templates/api/#using-the-template-system)为模板。IE。：

```
from django.db import models
from django.template import Template, Context

class YourModel(models.Model):
    body = models.TextField()

    def render_body(self, context=None):
        template = Template(self.body)
        context = context or {}
        context['object'] = self
        return template.render(Context(context)) 
```

然后在实际模板中，您可以使用`{{ your_model.render_body }}`而不是`{{ your_model.body }}`.

# php - php 对象，如何访问 simplexmlelement

> ID：11447980
> 
> 赞同：1
> 
> 时间：2012-07-12T08:37:46.470
> 
> 标签：php

我有以下对象：

```
object(SimpleXMLElement)#337 (1) { [0]=> string(4) "1001" } 
```

但我似乎无法使用 [0] 甚至不使用 foreach($value as $obj=>$objvalue) 访问它

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:41:15.783

[SimpleXMLElement](http://php.net/manual/en/class.simplexmlelement.php)实现[Traversable](http://www.php.net/manual/en/class.traversable.php)，这意味着您可以使用`foreach`它来循环它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:41:55.380

尝试使用

```
$objectarray = get_object_vars(object(SimpleXMLElement)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:45:04.810

通过查看 SimpleXMLElement[手册](http://www.php.net/manual/en/simplexml.examples-basic.php)，我找到了这个示例（示例 XML 文件位于链接页面的顶部）：

```
$movies = new SimpleXMLElement($xmlstr);

/* For each <character> node, we echo a separate <name>. */
foreach ($movies->movie->characters->character as $character) {
   echo $character->name, ' played by ', $character->actor, PHP_EOL;
} 
```

我发现这个函数可以将 XML 对象转换为数组，也许这更容易使用？：

```
 function toArray($xml) { //$xml is of type SimpleXMLElement 
        $array = json_decode(json_encode($xml), TRUE);

        foreach ( array_slice($array, 0) as $key => $value ) {
            if ( empty($value) ) $array[$key] = NULL;
            elseif ( is_array($value) ) $array[$key] = toArray($value);
        }

        return $array;
    } 
```

# javascript - Safari ipad 作为 parseFloat 的结果返回 int

> ID：11447981
> 
> 赞同：3
> 
> 时间：2012-07-12T08:37:48.350
> 
> 标签：javascript, jquery, cross-browser

我的值为 9.23，如下所示：

```
alert(parseFloat(data.x)); 
```

数据.x 是 9.23。在 Google Chrome 的警报中，我得到 9.23，而在 ipad Safari 上，我只得到 9。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:09:16.370

从您的评论来看，您正在使用 C# 在服务器端格式化数字。我非常怀疑 Safari 的实现`parseFloat`是否被破坏，并怀疑该数字是`,`作为分隔符以依赖于语言环境的方式格式化的。你可以避免这种使用

```
value.ToString("0.00", CultureInfo.InvariantCulture) 
```

# android - 当网络或服务器不可用时，屏幕上不显示 toast 消息

> ID：11447987
> 
> 赞同：0
> 
> 时间：2012-07-12T08:38:19.933
> 
> 标签：android, android-activity

当我按下登录按钮时服务器没有响应时，我需要显示 toast 消息，一些参数被传递到 AgAppMenu 屏幕，该屏幕使用 url 连接到服务器并在 AgAppHelperMethods 屏幕中获取 xml 响应。问题是当服务器繁忙或网络不可用时，我无法在 catch 块上显示 toast 消息，尽管它显示了日志消息。

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent ;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class LoginScreen extends Activity implements OnClickListener {

EditText mobile;
EditText pin;
Button btnLogin;
Button btnClear;

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.agapplogin);

    TextView lblMobileNo = (TextView) findViewById(R.id.lblMobileNo);
    lblMobileNo.setTextColor(getResources()
            .getColor(R.color.text_color_red));

    mobile = (EditText) findViewById(R.id.txtMobileNo);

    TextView lblPinNo = (TextView) findViewById(R.id.lblPinNo);
    lblPinNo.setTextColor(getResources().getColor(R.color.text_color_red));

    pin = (EditText) findViewById(R.id.txtPinNo);

    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnClear = (Button) findViewById(R.id.btnClear);

    btnLogin.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            postLoginData();

        }
    });

    btnClear.setOnClickListener(new OnClickListener() {
        public void onClick(View v)

        {
            cleartext();
        }

    });

    /*
     * 
     * btnClear.setOnClickListener(new OnClickListener() { public void
     * onClick(View arg0) {
     * 
     * } });
     */

}

public void postLoginData()

{

    if (pin.getTextSize() == 0 || mobile.getTextSize() == 0) {

        AlertDialog.Builder altDialog = new AlertDialog.Builder(this);
        altDialog.setMessage("Please Enter Complete Information!");

    } else {
        Intent i = new Intent(this.getApplicationContext(),  AgAppMenu.class);          
        Bundle bundle = new Bundle();
        bundle.putString("mno", mobile.getText().toString());
        bundle.putString("pinno", pin.getText().toString());
        i.putExtras(bundle);
        startActivity(i);
    }
}

@Override
public void onClick(View v) {

}

public void cleartext() {

    {
        pin.setText("");
        mobile.setText("");
    }

}

}

  import android.app.Activity;
  import android.content.Intent;
  import android.os.Bundle;
  import android.view.View;
  import android.view.View.OnClickListener;
  import android.widget.Button;
  import android.widget.TextView;
  import android.widget.Toast;

 public class AgAppMenu extends Activity {

String mno, pinno;

private String[][] xmlRespone;

Button btnMiniStatement;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.agappmenu);

    mno = getIntent().getExtras().getString("mno");
    pinno = getIntent().getExtras().getString("pinno");

    setTitle("Welcome to the Ag App Menu");

    AgAppHelperMethods agapp =new AgAppHelperMethods();

//  xmlRespone =   AgAppHelperMethods.AgAppXMLParser("AG_IT_App/AgMainServlet?messageType=LOG&pin=" + pinno + "&mobile=" + mno + "&source=" + mno   + "&channel=INTERNET");
    xmlRespone = agapp.AgAppXMLParser("AG_IT_App/AgMainServlet?messageType=LOG&pin="    + pinno + "&mobile=" + mno + "&source=" + mno   + "&channel=INTERNET");

 import java.net.URL;

  import javax.xml.parsers.DocumentBuilder;
  import javax.xml.parsers.DocumentBuilderFactory;

  import org.w3c.dom.Document;
  import org.w3c.dom.Node;
  import org.w3c.dom.NodeList;
  import org.xml.sax.InputSource;

  import android.app.Activity;
  import android.os.Bundle;
  import android.util.Log;
  import android.widget.Toast;
  import android.view.View;
  import android.view.View.OnKeyListener;

  public class AgAppHelperMethods extends Activity {

private static final String LOG_TAG = null;

private static AgAppHelperMethods instance = null;

public static String varMobileNo;
public static String varPinNo;

String[][] xmlRespone = null;

boolean flag = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.agapphelpermethods);

}

protected AgAppHelperMethods() {

}

public static AgAppHelperMethods getInstance() {
    if (instance == null) {
        instance = new AgAppHelperMethods();
    }
    return instance;
}

public static String getUrl() {

    String url = "https://demo.accessgroup.mobi/";

    return url;

}

public String[][] AgAppXMLParser(String parUrl) {

    String _node, _element;
    String[][] xmlRespone = null;
    try {

        String url = AgAppHelperMethods.getUrl() + parUrl;
        URL finalUrl = new URL(url);

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(finalUrl.openStream()));
        doc.getDocumentElement().normalize();

        NodeList list = doc.getElementsByTagName("*");
        _node = new String();
        _element = new String();
        xmlRespone = new String[list.getLength()][2];

        // this "for" loop is used to parse through the
        // XML document and extract all elements and their
        // value, so they can be displayed on the device

        for (int i = 0; i < list.getLength(); i++) {
            Node value = list.item(i).getChildNodes().item(0);
            _node = list.item(i).getNodeName();
            _element = value.getNodeValue();
            xmlRespone[i][0] = _node;
            xmlRespone[i][1] = _element;

        }// end for
        throw new ArrayIndexOutOfBoundsException();
    }// end try
    // will catch any exception thrown by the XML parser

    catch (Exception e) {
        Toast.makeText(AgAppHelperMethods.this,
                "error  server not responding " + e.getMessage(),
                Toast.LENGTH_SHORT).show();
        Log.e(LOG_TAG, "CONNECTION ERROR  FUNDAMO SERVER NOT RESPONDING", e);

    }

    // Log.e(LOG_TAG, "CONNECTION ERROR  FUNDAMO SERVER NOT RESPONDING", e);

    return xmlRespone;

}
    ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:43:07.880

`AgAppHelperMethods`不是真正的`Activity`. 您已经从 派生了这个类`Activity`，但是您已经创建了单例管理方法 ( `getInstance()`) 并且您正在自己实例化它。这是不好的。不要这样做。

通常，Android 控制活动的实例化。您永远不会自己创建一个（使用`new`）。

在我看来，它只`AgAppHelperMethods`需要成为一个普通的 Java 类。它不需要继承任何东西。还删除生命周期方法，例如`onCreate()`.

现在你会遇到吐司的问题，因为你需要一个上下文而`AgAppHelperMethods`不是上下文。要解决这个问题，您可以添加`Context`为参数，`AgAppXMLParser()`如下所示：

```
public String[][] AgAppXMLParser(Context context, String parUrl) {
     ...
     // Now you can use "context" to create your toast.
} 
```

当您调用`AgAppXMLParser()`时，`AgAppMenu`只需将“this”作为上下文参数传递。

# asp.net - 为什么我会从 jsonp 请求中获得 XML 响应？

> ID：11447989
> 
> 赞同：1
> 
> 时间：2012-07-12T08:38:28.860
> 
> 标签：asp.net, ajax, web-services, jquery, jsonp

我使用 jQuery.ajax 函数向以下 asp.net webservice 发出 GET 请求：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public string GetAgentsGroupNameById(int id) 
```

我将 contentType 设置为“application\json”，将 dataType 设置为“jsonp”，但我仍然得到一个 xml 响应：

```
<?xml version="1.0" encoding="utf-8"?> 
<string xmlns="tempuri.org/">Sports</string>; 
```

以下是请求和响应的详细信息，如 chrome 的开发工具中所示： ![在此处输入图像描述](../Images/d39352f004f7734c416269ac4b0be63b.png)

我对请求做错了吗？或者也许是网络服务本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:01:33.303

Webservice 可以返回 JSON 和 XML，你必须像这样在你的 ajax 调用中指定你想要的格式`contentType: 'application/json; charset=utf-8'`。序列化是自动的。不用担心您的代码会正常工作。返回的内容是形式

```
 <?xml version="1.0" encoding="utf-8" ?> 
        <string xmlns="http://formshare.com/">
           [{"VAL1":"SSDSDSD"},{"VAL2":"PDWDWWD"}]//Example JSON
        </string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:53:14.420

似乎我必须添加一个脚本标记来包装响应（在 Web 服务中）。我知道它可以使用 WCF 自动完成，但我不确定 asp.net webservices 是否可以为我完成这项工作，所以我将添加一个 HttpModule 来完成它并让你知道。

# mysql - SOLR 索引和搜索多个数据源

> ID：11447990
> 
> 赞同：0
> 
> 时间：2012-07-12T08:38:29.330
> 
> 标签：mysql, search, solr, indexing, datasource

我在搜索两个数据源时遇到问题。当我 importAll 时，我看到我的所有记录都导入了，但是当我搜索时，我的结果中只有 dataSource 的 2 条记录。

在我的 data-config.xml 中：

```
<document>
   <entity name="one" dataSource="ds-1" query="SELECT * FROM artist">
     <field column="name" name="name" />
   </entity>

   <entity name="two" dataSource="ds-2" query="SELECT * FROM faqdata">
     <field column="thema" name="thema" />
   </entity>
</document> 
```

在我的 schema.xml 中：

```
<fields>
 <field name="id" type="int" indexed="true" stored="true" required="true" />
 <field name="slug" type="string" indexed="false" stored="true"/>
 <field name="name" type="text" indexed="true" stored="true" />
 <field name="alt_name" type="text" indexed="false" stored="true"/>
 <field name="created_at" type="date" indexed="false" stored="true"/>
 <field name="updated_at" type="date" indexed="false" stored="true"/>
 <field name="thema" type="text" indexed="true" stored="true" />

 <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>

 <dynamicField name="*" type="ignored" multiValued="true" />   
</fields>

<uniqueKey>id</uniqueKey>  

<defaultSearchField>text</defaultSearchField>

<solrQueryParser defaultOperator="OR"/>

<copyField source="name" dest="text"/>
<copyField source="thema" dest="text"/> 
```

什么是问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:11:12.287

Solr 中的 ID 必须是唯一的。
如果您插入具有相同 ID 的实体，则先前的记录将被覆盖。
Solr 不更新记录。它删除并重新插入记录。
如果您想要这两条记录，请定义一个唯一的 ID。
例如，在 id 中添加 Artist 和 faqdata，这样艺术家和 faqdata 就不会相互覆盖。

选择 A.*，“艺术家_”|| 艺术家 A 的 ID PRIMARY_ID

选择 A.*, 'FAQDATA_' || 来自 FAQDATA A 的 ID PRIMARY_ID

并使用 PRIMARY_ID 作为主 ID 和唯一字段。

# matlab - 字符串到枚举

> ID：11447991
> 
> 赞同：5
> 
> 时间：2012-07-12T08:38:36.410
> 
> 标签：matlab, enumeration

我有一个枚举器：

```
classdef Commands

    properties
        commandString;
        readonly;
    end
    methods
        function obj = Commands(commandString, readonly)
            obj.commandString = commandString;
            obj.readonly= readonly;
        end
    end
    enumeration
        PositionMode('p', false)
        TravelDistance('s', false)
    end
end 
```

我有一个字符串：

```
currentCommand = 'PositionMode'; 
```

我希望能够返回：

```
Commands.PositionMode 
```

有没有比这更好的解决方案

```
methods(Static)
    function obj = str2Command(string)
        obj = eval(['Commands.' string]);
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:47:44.817

与结构一样，您可以对对象使用[动态字段名称](http://blogs.mathworks.com/loren/2005/12/13/use-dynamic-field-references/)。

和

```
currentCommand = PositionMode 
```

通话

```
Commands.(currentCommand) 
```

评估为

```
Commands.PositionMode 
```

从而以优雅便捷的方式解决您的问题。