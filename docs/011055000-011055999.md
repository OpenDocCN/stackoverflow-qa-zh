# StackOverflow 问答 11055000-11055999

# graphics - 是否有用于测试 2D 图形库速度的既定基准？

> ID：11055006
> 
> 赞同：1
> 
> 时间：2012-06-15T16:49:19.197
> 
> 标签：graphics, benchmarking

我正在寻找在给定时间内执行的一组操作，因此我可以将我的库的性能与其他库的性能进行比较，而无需全部构建它们。

# cakephp - 我应该如何在 Helper 中使用组件？

> ID：11055007
> 
> 赞同：2
> 
> 时间：2012-06-15T16:49:20.840
> 
> 标签：cakephp, cakephp-2.2

我在 AkisHelper 中使用了 AkismetComponent，我的 AkisHelper 代码是：

```
<?php
App::uses('AppHelper', 'View/Helper');

class AkisHelper extends AppHelper {

    public $helpers = array('Html');
    public $components = array('Akismet');

    function isValid() {
        if ($this->Akismet->isKeyValid()) {
            echo 'OK';
        } else {
            echo 'Error';
        }
    }

} 
```

但是出现了这个错误：

```
Error: Call to a member function isKeyValid() on a non-object
File: /var/www/cakeblog/app/View/Helper/AkisHelper.php
Line: 10 
```

请帮我解决我的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:33:56.633

你不应该能够n_n ..它不是MVC，就像试图在视图中调用控制器方法一样。

但是，您始终可以将变量传递给 Akismet 组件中的视图，例如：

```
class AkismetComponent extends Component {

    private $controller;

    public function initialize($controller) {
        $this->controller = $controller;
        //here I pass a variable to the view
        $this->controller->set('isKeyValid',$this->isKeyValid());
    } 
```

并在您看来像任何其他变量一样使用它：

```
if(isset($isKeyValid) && $isKeyValid){
} 
```

无论如何，如果您不想更改组件，您仍然可以从控制器传递变量。

该视图应仅用于显示信息。助手应该只是帮助你的功能，但他们不应该做业务逻辑。

希望这可以帮助

# vb.net - VB.net 中的密码学 - 解密文件大于源文件？

> ID：11055013
> 
> 赞同：5
> 
> 时间：2012-06-15T16:49:55.797
> 
> 标签：vb.net, encryption, cryptography

嗨，我一直在尝试使用 System.Security.Cryptography 来加密和解密文件，但它对我不起作用

这段代码

```
Private Sub EncryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)
    Dim fsInput As New FileStream(sInputFilename, FileMode.Open, FileAccess.Read)
    Dim fsEncrypted As New FileStream(sOutputFilename, FileMode.Create, FileAccess.Write)
    Dim DES As New DESCryptoServiceProvider()
    DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey)
    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)
    Dim desencrypt As ICryptoTransform = DES.CreateEncryptor()
    Dim cryptostream As New CryptoStream(fsEncrypted, desencrypt, CryptoStreamMode.Write)
    Dim bytearrayinput(fsInput.Length - 1) As Byte
    fsInput.Read(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Close()
End Sub 
```

用

```
EncryptFile(OpenFileDialog1.FileName, SaveFileDialog1.FileName, "12345678")[/CODE] 
```

似乎工作正常，我得到一个与源文件大小相同的文件

这是哪里出错了

这段代码

```
Private Sub DecryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)
    Dim DES As New DESCryptoServiceProvider()
    DES.Key() = ASCIIEncoding.ASCII.GetBytes(sKey)
    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)
    Dim fsread As New FileStream(sInputFilename, FileMode.Open, FileAccess.Read)
    Dim desdecrypt As ICryptoTransform = DES.CreateDecryptor()
    Dim cryptostreamDecr As New CryptoStream(fsread, desdecrypt, CryptoStreamMode.Read)
    Dim fsDecrypted As New StreamWriter(sOutputFilename)
    fsDecrypted.Write(New StreamReader(cryptostreamDecr).ReadToEnd)
    fsDecrypted.Flush()
    fsDecrypted.Close()
End Sub 
```

用

```
DecryptFile(OpenFileDialog1.FileName, SaveFileDialog1.FileName, "12345678")[/CODE] 
```

输出的文件几乎是加密的源文件的 2 倍。

发生了什么事我确定几周前这工作正常，我看不出有什么明显的问题。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:28:58.523

主要问题是 EncryptFile 使用字节数组读取数据，而 DecryptFile 使用流读取数据。EncryptFile 和 DecryptFile 方法之间的唯一区别应该是您的`ICryptoTransform`分配。在 1 个过程中使用通用代码会更容易：

```
Private Sub EncryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)
    Crypto(sInputFilename, sOutputFilename, sKey, True)
End Sub

Private Sub DecryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)
    Crypto(sInputFilename, sOutputFilename, sKey, False)
End Sub

Private Sub Crypto(ByVal sInputFileName As String, ByVal sOutputFileName As String, ByVal sKey As String, ByVal bEncrypt As Boolean)
    'Define the service provider
    Dim DES As New DESCryptoServiceProvider()
    DES.Key() = ASCIIEncoding.ASCII.GetBytes(sKey)
    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)

    'Read the input file into array
    Dim fsInput As New FileStream(sInputFileName, FileMode.Open, FileAccess.Read)
    Dim bytearrayinput(fsInput.Length - 1) As Byte
    fsInput.Read(bytearrayinput, 0, bytearrayinput.Length)

    'Define the crypto transformer
    Dim cryptoTransform As ICryptoTransform

    If bEncrypt Then
        cryptoTransform = DES.CreateEncryptor()
    Else
        cryptoTransform = DES.CreateDecryptor
    End If

    'Create the encrypting streams
    Dim fsEncrypted As New FileStream(sOutputFileName, FileMode.Create, FileAccess.Write)
    Dim cryptostream As New CryptoStream(fsEncrypted, cryptoTransform, CryptoStreamMode.Write)

    'Write the output file
    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Close()
End Sub 
```

Crypto 过程与 EncryptFile 过去几乎相同。`ICryptoTransform`不同之处在于我根据您是加密还是解密来更改分配。

# c++ - 将节点插入二叉搜索树

> ID：11055014
> 
> 赞同：0
> 
> 时间：2012-06-15T16:49:56.340
> 
> 标签：c++, visual-c++, c++11

我正在尝试实现一个简单的 C++ 函数，该函数在给定要插入的节点的值和 BST 的根的情况下将节点添加到二叉搜索树。
令人惊讶的是，我无法推动任何元素。虽然我确保我插入节点的语句是由编译器输入的，但树没有我要添加的任何节点。我认为问题可能在于我如何在函数参数中传递节点。任何人都可以帮忙吗？谢谢你。这是我的节点类型和函数的实现。

```
 struct Node{

    int value;
    Node *left;
    Node *right;
    };

    //this method adds a new node with value v to Binary Search Tree
    // node is initially the root of the tree
    void Push_To_BST(Node* node,int v)
    {

    // the right place to add the node
    if(node==NULL)
    {

    node=new Node();
    node->value= v;
    node->left= NULL;
    node->right=NULL;

    }

    //the value to be added is less than or equal the reached node
    else if(v <= node->value)
        {
    //adding the value to the left subtree
    Push_To_BST(node->left,v);
    }

    //the value to be added is greater than the reached node
    else if(v > node->value)
    {
    //adding the value to the right subtree
    Push_To_BST(node->right,v);
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:53:44.530

小心你的引用，那里。

```
void Push_To_BST(Node* node,int v) 
{ 

// the right place to add the node 
if(node==NULL) 
{  
    node=new Node(); 
    // etc 
```

`node`您分配内存是一个局部*变量*。您需要传入 a`Node**`以传递指向新创建节点的指针*。*

例子：

```
void Push_To_BST(Node** pnode,int v) 
{ 
    Node* node = *pnode;

    // the right place to add the node 
    if(node==NULL) 
    {  
        node=new Node(); 
        // etc
    }
    else if(v < node->value)  
    {  
        //adding the value to the left subtree  
        Push_To_BST(&node->left,v);  
    }  
    // etc 
```

并称它为

```
Node* n = new Node;
Push_To_BST(&n, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:55:50.490

您正在分配一个新节点并填充它，但永远不会更改现有节点中的指针以指向新节点。

# java - 为什么 Intellij 在我的一个 Java 类的类图标上显示一个叉 (x)？

> ID：11055016
> 
> 赞同：52
> 
> 时间：2012-06-15T16:50:07.387
> 
> 标签：java, intellij-idea

IntelliJ (v11.1) 通常在 Java 类旁边显示的图标是一个带有 C 的蓝色圆圈。但是对于我的一个类，这个图标在左上角有一个小“x”。这个特定的类与另一个类位于一个包中，该类在蓝色圆圈中只有通常的 C。

以防万一，我使用的是 Mac。

有问题的类是**AlertsHandler**。

![在此处输入图像描述](../Images/88578ec762e2361936d6d1df4a1c7d52.png)

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-15T17:08:58.843

此图标表示**该类已从编译中排除**，可在`Settings`（`Preferences`Mac 上）|中更改 `Compiler`| `Excludes`.

# java - 任何在数组顶部实现队列并自动调整大小的java库？

> ID：11055017
> 
> 赞同：1
> 
> 时间：2012-06-15T16:50:10.007
> 
> 标签：java, arrays, queue

标准 Java 不提供在数组顶部实现[Queue](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)接口的对象，并在添加太多对象时自动调整该底层数组的大小（我不想要链表）。

是否有任何开源库提供此实现，或者我应该自己实现它？

**更新**

Java 6 (ArrayDeque) 中有一个可用的类，出于某种原因，我正在阅读 Java 5 文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:56:15.653

使用[ArrayDeque](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html)。它在调整大小的数组之上实现了队列。

# java - 如何使用 C 读取从 JAXB 生成的 XML

> ID：11055029
> 
> 赞同：0
> 
> 时间：2012-06-15T16:50:59.617
> 
> 标签：java, c, xml, jaxb, libxml2

我创建了 Java 对象并使用 JAXB 将该对象转换为 XML。现在的问题是如何在 C 中读取这个 XML 文件？有什么标准方法或者我必须使用外部库`libxml`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T16:54:19.657

Libxml2 是在 C/C++ 中处理 XML 的“标准”方式（只要有标准）。至少它拥有最多的思想分享和最好的文档和社区支持，AFAICT。

当然，除非您想编写自己的 XML 解析器，否则不推荐 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:57:05.700

您可以使用 Xerces-C API 来读取 XML。Xerces apis 存在于 C/C++ 和 Java 中。参考项目网站[http://xerces.apache.org/](http://xerces.apache.org/)

# perl - Perl 5.6 脚本需要（调用）一个 Perl 5.10 脚本

> ID：11055035
> 
> 赞同：2
> 
> 时间：2012-06-15T16:51:35.303
> 
> 标签：perl, shebang

我有一个脚本 foo.pl，它的 sheebang 行指向 Perl 5.6 二进制文件。foo.pl “需要”另一个脚本 bar.pl，它的 sheebang 行具有 Perl 5.10。

有没有人遇到过这种情况？任何帮助，将不胜感激。

PS 由于项目中的依赖性，无法将使用 5.6 的脚本更改为最新的 Perl 版本。所以，我需要和那里的任何东西一起生活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:57:46.620

当 foo.pl 'require's bar.pl 时，bar.pl shebang 中的前导哈希 (#) 将使该行看起来像注释。

你不应该有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:02:48.180

`require`'d 脚本将需要在当前解释器 - 5.6 中，无论 shebang 说什么。它只对“启动”脚本很重要。如果该脚本使用语法、特性或依赖于在 5.6 以上的 Perl 下运行，那么显然它要么完全失败，要么给出不正确的结果。

# android - 无法在 ContextImpl.openFileOutput 启动由 NullPointerException 引起的活动

> ID：11055037
> 
> 赞同：0
> 
> 时间：2012-06-15T16:51:44.780
> 
> 标签：android, android-fragments, android-mapview, android-maps, android-support-library

我发布了一个应用程序，它使用谷歌地图的 Android 兼容性库 ( [https://github.com/petedoyle/android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps) )，我收到了一些奇怪的“无法启动活动”崩溃报告。

我在下面粘贴了几个示例堆栈跟踪。有其他人使用 Google Maps 的 Android 兼容性库，甚至使用标准的 Android 兼容性库 ( [http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html) ) 体验过吗？任何人都知道我如何能够克服这个错误？

**----- 示例堆栈跟踪 1 -----**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mycompany.myapp/com.mycompany.myapp.activities.GameActivity}: java.lang.NullPointerException
...
caused by java.lang.NullPointerException
 at android.app.ContextImpl.openFileOutput(ContextImpl.java:430)
 at android.content.ContextWrapper.openFileOutput(ContextWrapper.java:158)
 at com.google.common.io.android.AndroidPersistentStore.writeBlockX(Unknown Source)
 at com.google.common.io.android.AndroidPersistentStore.writeBlock(Unknown Source)
 at com.google.common.io.PreferenceStore.ensurePreferencesLoaded(Unknown Source)
 at com.google.common.io.PreferenceStore.readPreference(Unknown Source)
 at com.google.common.io.BasePersistentStore.readPreference(Unknown Source)
 at com.google.common.StaticUtil.readPreferenceAsDataInput(Unknown Source)
 at com.google.googlenav.datarequest.DataRequestDispatcher.loadOrRequestCookie(Unknown Source)
 at com.google.googlenav.datarequest.DataRequestDispatcher.<init>(Unknown Source)
 at com.google.googlenav.datarequest.DataRequestDispatcher.createInstance(Unknown Source)
 at com.google.android.maps.MapActivity.createMap(MapActivity.java:509)
 at com.google.android.maps.MapActivity.onCreate(MapActivity.java:409)
 at android.support.v4.app.FragmentActivity.onCreate(Unknown Source)
 at com.mycompany.myapp.activities.GameActivity.onCreate(Unknown Source)
 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

**----- 示例堆栈跟踪 2 -----**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mycompany.myapp/com.mycompany.myapp.activities.GameActivity}: java.lang.NullPointerException
...
Caused by: java.lang.NullPointerException
 at android.app.ContextImpl.openFileOutput(ContextImpl.java:423)
 at android.content.ContextWrapper.openFileOutput(ContextWrapper.java:158)
 at android_maps_conflict_avoidance.com.google.common.io.android.AndroidPersistentStore.writeBlockX(AndroidPersistentStore.java:140)
 at android_maps_conflict_avoidance.com.google.common.io.android.AndroidPersistentStore.writeBlock(AndroidPersistentStore.java:169)
 at android_maps_conflict_avoidance.com.google.common.io.PreferenceStore.ensurePreferencesLoaded(PreferenceStore.java:178)
 at android_maps_conflict_avoidance.com.google.common.io.PreferenceStore.readPreference(PreferenceStore.java:86)
 at android_maps_conflict_avoidance.com.google.common.io.BasePersistentStore.readPreference(BasePersistentStore.java:41)
 at android_maps_conflict_avoidance.com.google.common.StaticUtil.readPreferenceAsDataInput(StaticUtil.java:271)
 at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.loadOrRequestCookie(DataRequestDispatcher.java:493)
 at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.<init>(DataRequestDispatcher.java:390)
 at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.createInstance(DataRequestDispatcher.java:341)
 at com.google.android.maps.MapActivity.createMap(MapActivity.java:548)
 at com.google.android.maps.MapActivity.onCreate(MapActivity.java:422)
 at android.support.v4.app.FragmentActivity.onCreate(Unknown Source)
 at com.mycompany.myapp.activities.GameActivity.onCreate(Unknown Source)
 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1709) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:20:45.413

我有同样的错误，似乎这个错误与 android-support-v4-googlemaps 的使用没有联系。

看看这个帖子：

[MapView / MapActivity 在某些设备上崩溃](https://stackoverflow.com/questions/10205785/mapview-mapactivity-crash-on-some-devices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:11:29.567

使用兼容性库时出现此错误。我所拥有的是针对 Android API 15 的项目，但我希望最低版本是 Android API 8，所以我需要兼容性库中的一些东西。我附上了图书馆，但忘了从中使用`imports`！项目建成时，一切正常，但是当我在装有 Android 2.3.3 的手机上运行它时，它找不到一些类，因为 Android 2.3.3 没有它们！所以，我建议你删除 all `imports`，按`Ctrl+Shift+O`，每当可以选择使用`normal`Android 内置类或兼容性库中的一个时，请始终选择第二个。告诉我它是否有帮助！

# codeigniter - CI 会话 BLOB 大小

> ID：11055038
> 
> 赞同：0
> 
> 时间：2012-06-15T16:51:54.607
> 
> 标签：codeigniter, session, blob

我计划在 CI 会话中存储很多关于我的用户的数据。正如我们所知，它存储在一个blob中。

我的问题是，在我担心对性能的影响之前，任何人都可以告诉我，BLOB 的大小可以是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:33:00.423

你有 65535 个字符。性能实际上取决于您的服务器、您使用了多少查询等。为什么需要将它存储在会话中？

# css - 如何防止事件通过 IE 中的覆盖元素泄漏？

> ID：11055039
> 
> 赞同：6
> 
> 时间：2012-06-15T16:52:06.630
> 
> 标签：css, internet-explorer, overlay

给定以下 HTML：

```
<div class="with-shield">
    <div class="shield"></div>
    <input type="radio"/>
</div>
​ 
```

...和CSS：

```
.with-shield {
  position: relative;   
}

.shield {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;   
  z-index: 100;
} 
```

（[小提琴](http://jsfiddle.net/AyHzZ/1)）。

FireFox 和 Chrome 不允许您单击单选按钮（因为`.shield`它位于其顶部），但是 IE9（我假设是旧版本）可以（即使开发人员工具显示`.shield`正确到位）。

如何更改 CSS 以`.shield`吸收 IE 中的点击事件（即阻止用户选择收音机）？</p>

当我向员工展示客户调查的结果时，我需要这个，只需重新显示表单视图即可；我想添加一个覆盖来阻止员工意外更改值（我已经禁用`tabIndex`等）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-06T12:44:36.443

甚至后来到聚会上，但这就是我所做的：

只需使用 1x1 像素透明 GIF 的 base64 编码作为背景，这将停止所有点击/点击（也在 IE9 和 IE8 上测试过）。

```
background: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T19:42:36.737

最近刚遇到同样的问题。Muthu Kumaran 很棒，只是它没有考虑 IE < 8。这是你可以做到的：

```
.with-shield {
  position: relative;   
}

.shield {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;   
  z-index: 100;

background-color:#fff;
opacity:0;
filter: alpha(opacity = 001);

} 
```

不幸的是，jsfiddle 和 jsbin 都没有在 IE8 上正常运行，所以我可以向您展示，但是我在本地机器上创建了一个测试页面并进行了测试，它可以按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:34:13.460

有点晚了，但做这样的事情：

```
#BlockAction{bottom: 0; left: 0; position: absolute; top: 0; right:0; z-index: -1;}  
#BlockAction.Blocked{z-index: 1000; cursor:wait;background-color:#fff;opacity:0} 
```

背景颜色和不透明度将迎合 IE9 允许透明背景点击通过。其他浏览器在没有它的情况下捕捉到点击。

# c# - 尽管计算在不同的任务中运行，但主 UI 窗口冻结

> ID：11055042
> 
> 赞同：2
> 
> 时间：2012-06-15T16:52:29.180
> 
> 标签：c#, multithreading, task-parallel-library

我有一个关于解决 UI 冻结的问题。

简介：我目前正在为给定的分析工具编写基于 OPC 的在线警报阅读器。该工具从 Excel 表中接收数据，使用规则库和拓扑模型分析此数据，并使用 TreeViewItems 显示结果。我的任务是用实时警报阅读器替换 excel 表阅读器。完成后，我可以将我的软件连接到服务器并在每次创建新警报时接收数据包。

问题：我将新数据传输到主类并从那里传输到分析器类的解决方案是将数据保存在列表中，将它们添加到 EventArgs 并引发事件。主类中的处理方法接收此数据，为分析器启动一个新任务（Task>）并将其结果返回到主线程。这种构造应该已经将计算过程与 UI 分离。分析过程大约需要 1.3 秒的示例数据。新数据平均每 2 秒到达一次。2秒是同一时间内的最高刷新时间。

附件是处理方法的代码片段

```
 Task<List<Analyser.ALARM_GROUP>> analysertask = Task.Factory.StartNew<List<Analyser.ALARM_GROUP>>(
                    ()=>
                        {
                            /*if the alarmlist is emty, set the new alarms as alarmlist, 
                             * else add the new alarms to the present list*/
                            if (AlarmList1.Count == 0)
                                AlarmList1 = e.CurrentAlarms;

                            else listModifier.mergeList(e.CurrentAlarms, AlarmList1);

                            /*Start the analysis process in a seperate task and return the Alarm_Group-List*/
                            return Analyser1.startAnalysis(PlantModelReader1, AlarmlogReader1, RuleBaseLoader1, AlarmList1); 
                        });

                Cursor = Cursors.Wait;
                List<Analyser.ALARM_GROUP> alarmGroupList = analysertask.Result;

                showAlarmLog(alarmGroupList);

                Cursor = Cursors.Arrow; 
```

不幸的是，当我开始分析进程时，UI 仍然卡住，我什至不知道我每两秒启动一个新线程的概念（新警报的平均出现时间）是否是一个合理的概念。我猜问题出在 showAlarmLog 内部，但代码很多。如果需要，我也会发布此代码。

我会很感激关于这个问题的任何建议，即使是“你的概念是废话，试试这个想法：......”会很高兴知道。

亲切的问候拉里莫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:56:56.730

问题是这个调用：

```
List<Analyser.ALARM_GROUP> alarmGroupList = analysertask.Result; 
```

阻塞 UI 线程，直到后台任务完成。

处理这个问题的方法是[使用*延续任务*](http://reedcopsey.com/2010/04/19/parallelism-in-net-part-17-think-continuations-not-callbacks/)而不是等待结果：

```
Task<List<Analyser.ALARM_GROUP>> analysertask = Task.Factory.StartNew<List<Analyser.ALARM_GROUP>>(
    ()=> {
        // Keep existing code
        return Analyser1.startAnalysis(PlantModelReader1, AlarmlogReader1, RuleBaseLoader1, AlarmList1); 
         });

// Make a continuation here...
analysertask.ContinueWith( t =>
    {
        Cursor = Cursors.Wait;
        List<Analyser.ALARM_GROUP> alarmGroupList = t.Result;
        showAlarmLog(alarmGroupList);
        Cursor = Cursors.Arrow;
    }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

通过将其安排为延续，它将*在第一个任务完成时*运行。通过使用`TaskScheduler.FromCurrentSynchronizationContext`，您可以说在执行时将其编组回 UI 线程。

* * *

请注意，使用 .NET 4.5/C# 5，这变得容易得多。使用 C# 5，您可以这样写：

```
var analysertask = Task.Run(
    ()=> {
        // Keep existing code
        return Analyser1.startAnalysis(PlantModelReader1, AlarmlogReader1, RuleBaseLoader1, AlarmList1); 
         });

Cursor = Cursors.Wait;
List<Analyser.ALARM_GROUP> alarmGroupList = await analysertask;
showAlarmLog(alarmGroupList);
Cursor = Cursors.Arrow; 
```

但是，这要求方法本身使用 new`async`关键字进行标记。

# android - Android 活动简历

> ID：11055044
> 
> 赞同：0
> 
> 时间：2012-06-15T16:52:38.057
> 
> 标签：android, android-activity

我使用下面的代码来启动`activity`：

```
Intent intent = new Intent(XXX.this, YYY.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(data); 
```

不知为何，`onResume()`调用了XXX的方法。并且因为我尝试弹出一个`progressDialog`inside `onResume()`，所以出现以下错误：

```
`android.view.WindowLeaked: Activity XXX has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@406ca468 that was originally added here.` 
```

在调试模式下，我`breakpoint`在 method 的第一行设置了 a `onResume()`，它永远不会停在那里，但我仍然收到上述错误。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:07:59.097

因为 onResume 是 Activity 生命周期的一部分，所以无论是否是第一次创建 Activity 都会调用它。如果您想在用户返回时打开一个对话框，您可能应该将该行为放在 onRestart 中，而不是 onResume 中。

编辑：没有看到您的对话框创建代码，很难说是什么导致了错误。但是，请确保您正在调用 showDialog 并从 onCreateDialog 返回创建的 Dialog，而不仅仅是在 onResume 中创建 Dialog 本身。

# php - 什么是 PHP“资源”类型？

> ID：11055046
> 
> 赞同：6
> 
> 时间：2012-06-15T16:52:52.063
> 
> 标签：php

我只是想加深对资源类型的理解，我不太确定为什么会首先发明它。

根据我的经验，在架构上，您只会在您正在执行的同一操作中将资源作为其他功能的依赖项发送，但您永远不会将该资源发送到程序的单独部分。当然只是一个标准的对象就足够了吗？

我错过了什么吗？什么是资源/应该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:14:05.900

在 PHP 5 之前，对象具有按值语义。即，您像结构一样传递它们，并且复制了它们的数据。这对于数据库或文件句柄之类的东西是行不通的。我猜这就是为什么这些资源是一种独特的类型。

# opengl-es - 使用 OpenGL ES 2.0 进行模板制作

> ID：11055050
> 
> 赞同：5
> 
> 时间：2012-06-15T16:53:24.047
> 
> 标签：opengl-es, opengl-es-2.0, libgdx, framebuffer, stencil-buffer

我正在尝试找出一种方法来切出背景纹理的某个区域，以便某个自定义图案不会在该背景的屏幕上呈现。例如： ![在此处输入图像描述](../Images/c4bc919a7d905af5d3c7c278d329f321.png)

这个正方形可以是任何图案。我正在使用 Frame Buffer Object 和 Stencil Buffer 来实现这种效果。这是代码：

```
fbo.begin();
//Disables ColorMask and DepthMask so that all the rendering is done on the Stencil Buffer
Gdx.gl20.glColorMask(false, false, false, false);
Gdx.gl20.glDepthMask(false);
Gdx.gl20.glEnable(GL20.GL_STENCIL_TEST);
Gdx.gl20.glStencilFunc(GL20.GL_ALWAYS, 1, 0xFFFFFFFF);
Gdx.gl20.glStencilOp(GL20.GL_REPLACE, GL20.GL_REPLACE, GL20.GL_REPLACE);

stage.getSpriteBatch().begin();
rHeart.draw(stage.getSpriteBatch(), 1); //Draws the required pattern on the stencil buffer

//Enables the ColorMask and DepthMask to resume normal rendering
Gdx.gl20.glColorMask(true, true, true, true);
Gdx.gl20.glDepthMask(true);

Gdx.gl20.glStencilFunc(GL20.GL_EQUAL, 1, 0xFFFFFFFF);
Gdx.gl20.glStencilOp(GL20.GL_KEEP, GL20.GL_KEEP, GL20.GL_KEEP);

background.draw(stage.getSpriteBatch(), 1); //Draws the background such that the background is not rendered on the required pattern, leaving that area black.

stage.getSpriteBatch().end();
Gdx.gl20.glDisable(GL20.GL_STENCIL_TEST);
fbo.end(); 
```

然而，这根本不起作用。我应该如何使用 Stencil Buffers 来做到这一点？我在理解 glStencilFunc 和 glStencilOp 时也遇到了一些困难。如果有人能对这两个有所了解，那将非常有帮助。

**更新：**我也尝试过使用 glColorMask 制作类似的东西。这是代码：

```
Gdx.gl20.glClearColor(0, 0, 0, 0);
stage.draw();
FrameBuffer.clearAllFrameBuffers(Gdx.app);
fbo1.begin();
Gdx.gl20.glClearColor(0, 0, 0, 0);
batch.begin();
rubber.draw(batch, 1);
Gdx.gl20.glColorMask(false, false, false, true);
coverHeart.draw(batch, 1);
Gdx.gl20.glColorMask(true, true, true, false);
batch.end();        
fbo1.end();

toDrawHeart = new Image(new TextureRegion(fbo1.getColorBufferTexture()));
batch.begin();
toDrawHeart.draw(batch, 1);
batch.end(); 
```

这段代码产生了这个： ![在此处输入图像描述](../Images/b966727d9cf6cf9ee6c86aef6c3fa172.png) 而不是这样的东西：（忽略窗口大小和色调） ![在此处输入图像描述](../Images/c4bc919a7d905af5d3c7c278d329f321.png)

注意：我使用的是 libgdx 库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T20:16:54.117

绘制到 a`SpriteBatch`时，状态更改将被忽略，直到`end()`被调用。如果你想使用 stenciling `SpriteBatch`，你需要分解批量绘图。有一件事，我忽略了 FBO，但这不应该有所作为。

```
@Override
public void create() {      
    camera = new OrthographicCamera(1, 1);
    batch = new SpriteBatch();

    texture = new Texture(Gdx.files.internal("data/badlogic.jpg"));
    texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    TextureRegion region = new TextureRegion(texture, 0, 0, 256, 256);

    sprite = new Sprite(region);
    sprite.setSize(1f, 1f);
    sprite.setPosition(-0.5f, -0.5f);

    spriteUpsideDown = new Sprite(new TextureRegion(texture, 1f, 1f, 0f, 0f));
    spriteUpsideDown.setSize(1f, 1f);
    spriteUpsideDown.setPosition(-0.5f, -0.5f);

    pattern = new Sprite(region);
    pattern.setSize(0.5f, 0.5f);
    pattern.setPosition(-0.25f, -0.25f);

    << Set Input Processor >>
} 
```

输入处理器允许设置两个布尔标志`breakBatch1`并`breakBatch2`通过键盘（桌面上的 libgdx），用于中断 SpriteBatch 绘图。

```
@Override
public void render() {      
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_STENCIL_BUFFER_BIT);
    batch.setProjectionMatrix(camera.combined);

    // setup drawing to stencil buffer
    Gdx.gl20.glEnable(GL20.GL_STENCIL_TEST);
    Gdx.gl20.glStencilFunc(GL20.GL_ALWAYS, 0x1, 0xffffffff);
    Gdx.gl20.glStencilOp(GL20.GL_REPLACE, GL20.GL_REPLACE, GL20.GL_REPLACE);
    Gdx.gl20.glColorMask(false, false, false, false);

    // draw base pattern
    batch.begin();
    pattern.draw(batch);

    if(breakBatch1) { batch.end(); batch.begin(); }

    // fix stencil buffer, enable color buffer
    Gdx.gl20.glColorMask(true, true, true, true);
    Gdx.gl20.glStencilOp(GL20.GL_KEEP, GL20.GL_KEEP, GL20.GL_KEEP);

    // draw where pattern has NOT been drawn
    Gdx.gl20.glStencilFunc(GL20.GL_NOTEQUAL, 0x1, 0xff);
    sprite.draw(batch);

    if(breakBatch2) { batch.end(); batch.begin(); }

    // draw where pattern HAS been drawn.
    Gdx.gl20.glStencilFunc(GL20.GL_EQUAL, 0x1, 0xff);
    spriteUpsideDown.draw(batch);
    batch.end();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:42:53.343

`Gdx.gl20.glStencilFunc(GL20.GL_REPLACE, GL20.GL_REPLACE, GL20.GL_REPLACE);`

这些不是 glStencilFunc 的正确参数。我想你的意思是 glStencilOp 在这里。

你需要在你的代码中使用 glGetError ，它会提醒你这些类型的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T18:59:41.557

我相信您的问题是，无论在四边形上应用的任何纹理的形状如何，您的初始`GL_REPLACE`模板操作都会被您应用于所有绘制的像素。`rHeart.draw`

因此，模板值应用于四边形的每个像素，这会给您带来问题。

如果应用在您的四边形上的纹理具有 alpha 通道`GL_ALPHA_TEST`（不支持），您可以将着色器设置`discard`为完全透明的像素，防止它们被绘制到模板缓冲区。

# asana - 在 Asana 中没有受让人或项目的我的任务在哪里？

> ID：11055051
> 
> 赞同：5
> 
> 时间：2012-06-15T16:53:31.450
> 
> 标签：asana

它没有项目，我将自己作为受让人删除，现在我在任何地方都找不到它。我只能按项目或受让人排序。有谁知道它藏在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-06T17:04:26.560

我不为 Asana 工作，但我发现您可以通过分配给“Nobody”进行搜索，这有助于我找到丢失的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:07:00.860

（我在 Asana 工作）

当任务没有分配给任何人、不在项目中并且没有标签时，您仍然可以通过在工作区中按名称搜索来找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T14:45:30.277

高级搜索并单击下拉列表底部的“未关联的任务”。

# hadoop - JobTracker 失败

> ID：11055055
> 
> 赞同：1
> 
> 时间：2012-06-15T16:53:49.307
> 
> 标签：hadoop, mapreduce

当我启动 Hadoop 时，除了 JobTracker 之外的所有东西都会启动（tasktracker、namenode、datanode、secondarynamenode）。

在 JobTracker 日志中，它告诉我连接到主机的端口 50030 时出现问题，即使我在 mapred-site.xml 中的端口 54311 定义了 mapred.job.tracker。我在这里误解了什么吗？为什么它一开始就尝试连接到端口 50030？

此外，由于某种原因，它试图绑定到一个地址，该地址是主机名和主机 ip 的串联，后跟端口号 50030。这正常吗？

...老实说，我不是 100% 确定我真的理解日志中的错误消息，所以我就发布它..

```
2012-06-15 11:50:51,538 INFO org.apache.hadoop.mapred.JobTracker: Scheduler configured with (memSizeForMapSlotOnJT, memSizeForReduceSlotOnJT, limitMaxMemForMapTasks, limitMaxMemForReduceTasks) (-1, -1, -1, -1)
2012-06-15 11:50:51,579 INFO org.apache.hadoop.ipc.metrics.RpcMetrics: Initializing RPC Metrics with hostName=JobTracker, port=54311
2012-06-15 11:50:51,644 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
2012-06-15 11:50:51,753 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()[0].getLocalPort() before open() is -1\. Opening the listener on 50030
2012-06-15 11:50:51,755 FATAL org.apache.hadoop.mapred.JobTracker: java.net.BindException: Address already in use
        at sun.nio.ch.Net.bind(Native Method)
        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126)
        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
        at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:216)
        at org.apache.hadoop.http.HttpServer.start(HttpServer.java:425)
        at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:1628)
        at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:183)
        at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:175)
        at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:3702) 
```

提前致谢。

编辑：在与 Chris 讨论之后，我将有根据地猜测我的一位同事可能一直在使用该端口。我不知道，我会在周一看看情况是否会好转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T02:45:41.017

如果 JobTracker 服务没有启动，您需要执行以下操作：

```
$HADOOP_HOME/sbin/mr-jobhistory-daemon.sh start historyserver 
```

如果你还没有这样做。

（在我的情况下，`$HADOOP_HOME`在`/usr/local/hadoop`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T19:12:49.717

您可能`mapred.job.tracker`对`mapred.job.tracker.http.address`.

试试这个实验`mapred-site.xml`

```
<property>
  <name>mapred.job.tracker</name>
  <value>localhost:50031</value>
</property>
<property>
  <name>mapred.job.tracker.http.address</name>
  <value>0.0.0.0:50032</value>
</property> 
```

然后做你的`start-mapred.sh`去`http://X.X.X.X:50032/jobtracker.jsp`

这应该排除被怀疑的特定端口，并说明有两个不同的端口很重要。

您很可能试图将同一台机器上的相同端口用于不同目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T20:56:49.340

这就像一个魅力

```
<property>
  <name>mapred.job.tracker</name>
  <value>localhost:50031</value>
</property>
<property>
  <name>mapred.job.tracker.http.address</name>
  <value>0.0.0.0:50032</value>
</property> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T09:15:22.220

对我来说，重新启动从服务器有帮助。请确保重新启动后网络接口已启动。

# ruby-on-rails - 如何使带有翻译的视图的缓存失效？

> ID：11055056
> 
> 赞同：0
> 
> 时间：2012-06-15T16:53:53.270
> 
> 标签：ruby-on-rails, caching, internationalization

假设您有两个视图，其代码如下：

**controller_a/a.html.erb**

```
 <%= content_tag(:div) do %>
     <%= I18n.t "some.key" %>
  <% end %> 
```

**controller_b/b.html.erb**

```
 <%= content_tag(:div) do %>
     <%= I18n.t "some.key" %>
  <% end %>

  <%= content_tag(:div) do %>
     <%= I18n.t "some.other_key" %>
  <% end %> 
```

所以，`a.html.erb`在 controller_a#a 上，而`b.html.erb`在 controller_b#b 上。这两个动作都由 缓存`caches_action`。如何确保当我更改`some.key`翻译键时，两个视图都无效？我怎样才能建立一个通用机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:46:55.847

说，在您`ApplicationController`创建以下类方法（或在库中并`extend`通过它）：

```
def self.i18n_digest(*scopes)
    Digest::MD5.hexdigest I18n.t(scopes).to_s
end 
```

然后您可以通过这种方式使用`:cache_path`选项`caches_action`：

```
caches_action :some_action, cache_path: { some_key: i18n_digest('some', 'foo') } 
```

只需确保`before_filter`在此语句之前的 a 中设置语言环境即可。

[上的文档`cache_path`](http://api.rubyonrails.org/classes/ActionController/Caching/Actions.html)。

**注意：**我使用翻译 ( `'some'`) 的范围来获取其所有嵌套消息作为哈希。

# c - linux open call返回EINVAL的可能原因

> ID：11055060
> 
> 赞同：4
> 
> 时间：2012-06-15T16:54:12.190
> 
> 标签：c, linux

我正在尝试在我的源代码中进行系统调用，如下所示。

```
int file;
file = open(argv[index], O_RDONLY); 
```

命令行参数是我的文件系统中二进制文件的路径。但是这个电话给我一个`EINVAL`错误。我已经检查了文件的存在以及访问它所需的权限。

关于什么情况下`EINVAL`会抛出错误的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:01:55.727

官方文档表明这是因为您的实现`open()`不支持您尝试打开的文件的同步 IO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:00:44.913

**失败原因：**

有两个进程（进程 1 和进程 2）正在执行，并试图打开这个二进制文件。由于我的系统（嵌入式设备）在此打开调用后会崩溃，因此拆分出来的调试不正确，这让我怀疑 process-1。但真正的罪魁祸首是使用`O_RDWR`标志打开二进制文件的 process-2。但是我的文件系统（网络挂载）被挂载为“**只读文件系统**”。

**需要注意的点：**

**改进 perror**打印它应该是问题的正确原因为“**只读文件系统**”。所以我最初的**错误**描述必须是之前任何错误调用的未清除值。这里的一项学习是谨慎使用**perror**，以避免分析误导性错误消息。

**可能`EINVAL`会抛出错误**的情况：

`EINVAL`如果我们对不应该使用的文件使用 O_SYNC（或）相关标志，则打开调用将显示。我根据 Rafe 之前提到的文档得出结论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:47:19.980

如果您确定它`argv[index]`实际上包含文件名并且`O_RDONLY`没有以某种方式被覆盖（`O_RDONLY`应该等于 0），请通过`dmesg`命令检查您的系统日志并确保内核中没有发生任何奇怪的事情。

# javascript - 如何使用 Google Analytics 确定客户所在的国家/地区？

> ID：11055065
> 
> 赞同：2
> 
> 时间：2012-06-15T16:54:33.343
> 
> 标签：javascript, notifications, google-analytics, google-analytics-api, country

我的页面使用 GA 为自己提供统计数据。稍后我可以看到访问我网站最多的国家/地区。

有什么方法可以在客户端获取客户所在的国家/地区？如果她不是来自我的国家，我想向用户显示通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:11:31.563

You don't have access to that information in the browser using GA.

If you want to access that information in the browser Try geolocation in browsers whom support it.

spec. [http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)

demo: [http://html5demos.com/geo](http://html5demos.com/geo)

sample:

```
if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
        });
    } 
```

And then you can access to the complete address using [google ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding) in **formatted_address** filed

```
 {
  "status": "OK",
  "results": [ {
    "types": street_address,
    "formatted_address": "275-291 Bedford Ave, Brooklyn, NY 11211, USA", 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:02:38.913

您需要使用基于 IP 的地理定位服务 - 一个很好的免费服务是[IPInfoDB](http://ipinfodb.com/) ，我用它来检测访客是否来自我所在的省份，如果是，则弹出一条消息。效果很好。

# perl - Perl 对象层次结构自省

> ID：11055067
> 
> 赞同：1
> 
> 时间：2012-06-15T16:54:44.547
> 
> 标签：perl, oop, package

假设我有以下包层次结构：

```
A--> B --> C --> D 
```

这意味着`A`是基类并`B`从它`C`继承，然后从 B 继承，依此类推。

另外，假设我有以下代码行：

```
my $co = D->new(); 
```

有什么方法可以检查（某种`UNIVERSAL`方法？）对象`co`是否是 的后代`A`？（或者一般来说，测试一个对象`X`是否是 package 的后代`P`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:57:38.350

见[通用](http://p3rl.org/UNIVERSAL)。

```
if ($D->isa('A')) {print "do something fancy"} 
```

或者

```
if ($D->can('method_defined_in_A')) {print "can do that";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:01:59.387

我相信你可以使用

```
$co->isa($package_name); 
```

它是所有 perl 祝福引用都有的通用方法。 [http://perldoc.perl.org/UNIVERSAL.html](http://perldoc.perl.org/UNIVERSAL.html)

# java - 'IllegalStateException：缺少前面方法调用的行为定义'，即使行为已定义

> ID：11055068
> 
> 赞同：3
> 
> 时间：2012-06-15T16:54:48.463
> 
> 标签：java, junit, easymock

我从 easymock 和 JUnit 测试用例中得到了一些莫名其妙的行为。我收到一个`IllegalStateException: missing behavior definition for the preceeding method call: myCollaborator.getCurrentApplyDate() Usage is: expect(a.foo()).andXXX()`. 我正在使用 easymock 3.1`myCollaborator`在一个正在测试的 JUnit 4 测试类中进行模拟`classUnderTest`。

`classUnderTest`需要打两次电话到`myCollaborator`. 只需一个电话，一切正常。我的 JUnit 测试类中的`@Before`setup 方法：

```
@Before
public void setUp() throws Exception {
    mockCollaborator = EasyMock.createMock(MyCollaborator.class);
    classUnderTest = new myObject(mockCollaborator);
    data = new MyDTO();
    // other setup code for data omitted
    EasyMock.expect(mockCollaborator.getCurrentApplyDate()).andReturn(new java.sql.Date(123456789));
    // comment out this expectation for now so it works
    // EasyMock.expect(mockCollaborator.getCurrentBatch()).andReturn("123");
    EasyMock.replay();
} 
```

`classUnderTest.process()`我通过两次调用测试的方法，`myCollaborator`第二个被注释掉以便它可以工作：

```
public MyDTO process(MyDTO data) throws Exception {
    // do some stuff to data
    java.sql.Date myDate = myCollaborator.getCurrentApplyDate();
    // do some stuff with myDate and data
    // comment out this call for now so it works
    // String currentBatch = myCollaborator.getCurrentBatch();
    // do some other stuff with currentBatch and data
    return data;
} 
```

一旦我`myCollaborator.getCurrentBatch()`从方法中取消注释第二次调用（第一次调用）`process()`并取消注释来自 JUnit 的期望，`setUp()`我开始接收上述`IllegalStateException`.

那些没有注释的代码不起作用：

```
@Before
public void setUp() throws Exception {
    mockCollaborator = EasyMock.createMock(MyCollaborator.class);
    classUnderTest = new myObject(mockCollaborator);
    data = new MyDTO();
    // other setup code for data omitted
    EasyMock.expect(mockCollaborator.getCurrentApplyDate()).andReturn(new java.sql.Date(123456789));
    EasyMock.expect(mockCollaborator.getCurrentBatch()).andReturn("123");
    EasyMock.replay();
}

public MyDTO process(MyDTO data) throws Exception {
    // do some stuff to data
    java.sql.Date myDate = myCollaborator.getCurrentApplyDate();
    // do some stuff with myDate and data
    String currentBatch = myCollaborator.getCurrentBatch();
    // do some other stuff with currentBatch and data
    return data;
} 
```

`java.sql.Date`和的返回类型`String`对于这两种方法都是正确的。这些方法听起来就像是吸气剂。他们所做的只是返回实例变量值；在这些 getter 方法中不会发生其他处理或方法调用。

JUnit 测试方法：

```
@Test
public void testSomeFunctionality(){
    // alter data to setup this test case
    try {
        data = classUnderTest.process(data);
    } catch (Exception e) {
        // this is line 531, where the IllegalStateException is being caught
        fail("error msg " + e);
    }
    assertTrue(data.getSomeValue() == expectedValue)
} 
```

完整的堆栈跟踪：

```
java.lang.AssertionError: An unexpected exception has occurred:
java.lang.IllegalStateException: missing behavior definition for the preceding method call:
MyCollaborator.getCurrentApplyDate()
Usage is: expect(a.foo()).andXXX()
at org.junit.Assert.fail(Assert.java:91)
at qualified.package.name.ClassUnderTestTests.testSomeFunctionality(ClassUnderTestTests.java:531)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我过去就以这种方式广泛使用过easymock和JUnit，以前从未遇到过这样的事情。我的同事们也受到了阻碍，所以任何能够了解这里发生的事情的人都可以得到科德猴业的奖励。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T17:15:15.603

在您的 @Before 示例中，您显示：

```
EasyMock.replay(); 
```

这不应该是：

```
EasyMock.replay(mockCollaborator); 
```

# java - 部分匹配不起作用

> ID：11055075
> 
> 赞同：-1
> 
> 时间：2012-06-15T16:55:35.920
> 
> 标签：java

我在下面有三个字符串 a、b、c，我试图让字符串 exp 与字符串 b 部分匹配，但是每次运行代码时都没有匹配。

```
 String a = "ID = '5' && name='abc' || level='5'";
  String b = "ID = '6' && name='def' || level='6' && year='2012'";
  String exp = "ID = '6' && name='def' || level='6'"; 
```

我的代码：

```
 Pattern p = Pattern.compile(b);
  Matcher m = p.matcher(exp);
  if(m.matches()){
        System.out.println("Perfect Match");
  }
  else if(m.hitEnd()){
        System.out.println("Partial Match");
  }
  else{
        System.out.println("No Match");
  } 
```

即使我删除了 && year='2012'，它也没有给我匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:08:24.740

You shouldn't be compiling `b` into a Pattern, you should be compiling `exp`. This will allow you to search through `b` for `exp`.

The way you have it now searches for `b` within `exp`, which will never find a match since `exp` is a subset of `b`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:59:49.053

如果您只想要部分匹配，那么您不需要正则表达式。

用这个：

`if (b.contains(exp))`

要检查两个字符串是否相等，您可以使用：

`if (b.contentEquals(exp))`

# jquery - 如何在文件浏览选择上执行代码？

> ID：11055076
> 
> 赞同：0
> 
> 时间：2012-06-15T16:55:39.927
> 
> 标签：jquery, html, ajax, ruby-on-rails-3

[编辑：下面的答案似乎是正确的，但我怎样才能从那里运行 ruby​​ 代码？]

我正在使用 Rails 3 页面提交简历。我怎样才能做到这一点，以便从浏览...按钮选择简历时，可以执行代码？我一直在研究这个，但没有找到同样的情况。

页面上的字段如下所示：

恢复

[选择文件后在此处显示文件名的文本框] [浏览按钮]

这是当前的代码。提前谢谢！

```
<label>Resume</label>
  <%= f.file_field :resume %>
  <div class="filedrag">
  <input type ="file" id="fileselect" name="fileselect[]" multiple="multiple"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:09:33.243

您可以使用 jquery 来执行此操作。在文件输入上使用更改事件。 **编辑以查看更改**

```
$("#fileselect").change(function() {
  <% @objects.each do |obj| %>
    $("#<%= obj.id %>").attr("style", "<%= obj.style %>");
  <% end %>
}); 
```

# entity-framework - 如何替换实体框架 POCO 对象上的现有集合

> ID：11055077
> 
> 赞同：0
> 
> 时间：2012-06-15T16:55:49.537
> 
> 标签：entity-framework, entity-framework-4

假设我创建了一个新实体并将其保存如下：

```
UserReport report = new UserReport() {//set the props}
manager.SaveUserReport(report)

Public UserReport SaveUserReport(UserReport report)
{
  using(var context = new ReportDatabase())
  {
    context.UserReports.AdObject(report);
    context.SaveChanges();
  }
  return report;
} 
```

到目前为止，一切都很好

然后我读回保存的报告

```
 savedReport = manager.GetUserReports(new int[] {report.Id}).FirstOrDefault();

 Public List<UserReport> GetUserReports(IEnumerable<int> reportIds)
 {
     using (var context = new ReportDatabase())
     {
        var reports = from UserReport in context.UserReports
          where reportIds.Contains(userReport.Id)
          select userReport;
          return visibleReports.ToList();
     }
 } 
```

savedReport 现在是附加的 UserReport

UserReport 对象具有附加到它的列集合。

我想用另一组（数据库中已经存在的）替换附加的一组列。

```
 savedReport.Columns = newColumnCollection 
```

此操作失败，错误“无法设置 UserReport_etc 类型的属性列”，因为集合已设置为 EntityCollection”

我看过这篇[文章](https://stackoverflow.com/questions/5619904/why-am-i-getting-error-the-property-x-on-type-y-cannot-be-set-because-the-colle)：问题是一样的，但我不能使用那个解决方案。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:46:27.127

好的 - 看起来这只是将非导航属性设置为非虚拟的情况。

这是一种非常奇怪的情况，因为被修改的行为是保持为虚拟的属性。

# objective-c - 括号中的 Objective-C @property 关键字是什么，例如 readonly 被称为？

> ID：11055079
> 
> 赞同：2
> 
> 时间：2012-06-15T16:55:53.143
> 
> 标签：objective-c, properties, keyword

```
@property (nonatomic, readonly) BOOL isBlabla; 
```

在谈到属性时，我不确定括号中的关键字的正式名称是什么，例如（非原子，保留）。我将它们称为“属性修饰符”和其他名称，但这可能不是正确的术语。

**我应该如何称呼这组**可以在@property 括号中使用的关键字（nonatomic、atomic、readonly、readwrite、assign、retain、strong 等），**以便每个人都知道我指的是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T17:00:53.623

在目前离我最近的书中，它们被称为“属性属性” [http://www.amazon.com/Programming-Objective-C-2-0-2nd-Edition/dp/0321566157](https://rads.stackoverflow.com/amzn/click/com/0321566157)

快速搜索 Apple 的文档会产生相同的词： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

最后，指向文档特定部分的链接，该部分同时使用“属性”和您自己的“关键字”：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/ Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW2](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:01:58.427

在 iBooks 中参考 Apple 的“Objective-C Programming Language”一书，它们被称为“属性集”。每个单词都称为“属性”。本书中还有一段叫做“Property Declaration Attributes”。

# ssis - ssis中的包配置和保护级别有什么关系

> ID：11055083
> 
> 赞同：0
> 
> 时间：2012-06-15T16:56:05.323
> 
> 标签：ssis

如果我们在 SSIS 中创建包配置，它是否会覆盖我们创建的保护级别？或者，如果我在我的包上创建 XML 配置，哪种保护级别最适合我？是否需要创建配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:42:39.707

阅读[Matthew Roche](http://bi-polar23.blogspot.com/2009/04/ssis-and-package-protectionlevel.html)的博客。它将为您提供对 SSIS 中保护级别的良好指导和理解。

# javascript - jquery - 如何排队一系列css属性更改

> ID：11055088
> 
> 赞同：0
> 
> 时间：2012-06-15T16:56:31.590
> 
> 标签：javascript, jquery, css, delay, jquery-animate

我想设置一系列动画属性 - 当前不可见但将标记为可见的名称列表，一个接一个，彼此之间设置延迟约 100 毫秒。如何使用 jquery 完成此操作？本质上，它会是这样的（伪代码）：

```
for each $(.item) {
$(this).delay(index*100ms).css({'visibility': 'visible'}
} 
```

唯一可能使这种情况复杂化的事情是，虽然大多数元素都具有相同的类，但并非所有元素都如此，因此某种动画队列效果最好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:00:27.197

您可以使用它[`.delay()`](http://api.jquery.com/delay/)来执行此操作。

```
$('#foo').slideUp(300).delay(800).fadeIn(400); 
```

> 执行此语句时，元素向上滑动 300 毫秒，然后暂停 800 毫秒，然后淡入 400 毫秒。

你实际上想对多个项目做一件事，所以我会这样做：

```
$.each($(".a"), function(index, value) {
    $(this).delay(index*400).fadeOut(400);
}); 
```

您的伪代码走在了正确的轨道上，您需要将每个动画偏移`index * someTime`.

事实证明，`.delay()`实际上不起作用，`css()`所以[这里有](https://stackoverflow.com/a/5396158/219118)一个更新的解决方案：

```
$.each($(".a"), function(index, value) {
    $(this).delay(index*400).queue( function(next){ 
        $(this).css('visibility','visible'); 
        next(); 
      });
}); 
```

[演示](http://jsfiddle.net/CLxBf/1)

# c++ - 4 级继承链中的 C++ 虚拟析构函数。

> ID：11055089
> 
> 赞同：3
> 
> 时间：2012-06-15T16:56:33.687
> 
> 标签：c++, virtual-destructor

我正在用虚拟析构函数做一个小实验来回顾 - 想知道是否有人对以下内容有简单的解释（使用 vs 2010）：

I 定义类层次ABCD，D继承C，C继承B，B继承A，A是Base；

进行了 2 个实验：

第一个实验——

A 有一个虚拟的析构函数。

B 有一个非虚拟析构函数

C 有一个虚拟的析构函数

D 有一个非虚拟析构函数

//----------------------------

在 D 类型的堆上分配 4 个对象 - 将 A*、B* 和 C* 的指针指向前 3 个 - 将第 4 个对象保留为 D* 以保证完整性。删除所有 4 个指针。

正如我所料，在所有 4 个实例中，完整的析构函数链以从 D 到 A 的相反顺序执行，释放所有内存。

第二次实验——

A 有一个非虚拟析构函数 ** 将 A 更改为非虚拟

B 有一个非虚拟析构函数

C 有一个虚拟的析构函数

D 有一个非虚拟的析构函数

在 D 类型的堆上分配 4 个对象 - 将 A*、B* 和 C* 的指针指向前 3 个 - 将第 4 个对象保留为 D* 以保证完整性。

删除 C* 和 D* 指针：从 D 到 A 以相反的顺序执行完整的析构函数链，释放所有内存。

删除 B*: B 然后运行 ​​A 析构函数（泄漏）

删除 A*：仅运行一个析构函数（泄漏）

谁能解释这是为什么？

当在实验 2 中分配 D 类型对象时，它的直接基类 (C) 有一个虚拟析构函数——这不是告诉编译器用 Vptr 跟踪它并知道内存类型吗？不管参考？

谢谢迈克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:58:29.617

> 当在实验 2 中分配 D 类型对象时，它的直接基类 (C) 有一个虚拟析构函数——这不是告诉编译器用 Vptr 跟踪它并知道内存类型吗？不管参考？

不。

在您的第二个测试用例中，`A`没有`B`vptrs/vtables。（即使他们这样做了，非虚拟成员函数仍然会被静态解析，而不是动态解析。）

换句话说，基类不会从派生类“继承”信息（例如函数是否为虚函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:01:20.853

当您删除没有虚拟析构函数的 A* 时，编译器在编译时不知道它将在运行时指向具有虚拟析构函数的对象。删除可能是具有虚拟析构函数的对象 - 或没有。不会发生动态绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:00:05.527

您的实际问题是为什么要使用虚拟和非虚拟析构函数？因为有一个带有非虚拟析构函数的基类是不好的。查看[常见问题](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.7)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-23T07:35:36.090

我写了几乎相同的问题，所以我想分享一下。

请注意，我还在不同的 Ctor 中添加了一些虚函数的用法，以说明它是如何工作的（很快，在每个 Ctor 中，V-table 仅更新“up to it”，这意味着虚函数实现将是调用是继承链的“这一点”之前派生最多的）。

我的注释：在运行给定类的示例代码中，我还在堆栈上添加了“派生”对象（B 和 D）的创建 --> 以强调有关“虚拟性”的所有注意事项当我们使用指向类实例的指针（任何类型的指针）时，Dtor 的值是适用的。

```
class A;

void callBack(A const& a);

class A 
{

    public:
    A() { std::cout << "A Ctor " << std::endl; f1(); callBack(*this); /* f3();*/ }
    ~A() { std::cout << "A Dtor " << std::endl; }

    void f1() { std::cout << "A : f1 " << std::endl; }
    virtual void f2() const { std::cout << "A : f2 " << std::endl; }
    virtual void f3() = 0;
};

class B : public A 
{
    public: 
    B() { std::cout << "B Ctor " << std::endl;  f1(); callBack(*this); f3(); }
    ~B() { std::cout << "B Dtor " << std::endl; }
    void f1 () { std::cout << "B : f1 " << std::endl;}
    void f2() const { std::cout << "B : f2 " << std::endl; }
    virtual void f3() { std::cout << "B : f3 " << std::endl; }

};

class C : public A 
{
    public:
    C() { std::cout << "C Ctor " << std::endl; f1(); callBack(*this); f3(); }
    virtual ~C() { std::cout << "C Dtor " << std::endl; }
    void f1() { std::cout << "C : f1" << std::endl;}
    void f2() const { std::cout << "C : f2" << std::endl; }
    virtual void f3() const { std::cout << "C : f3" << std::endl; }

};

class D : public C 
{
    public:
    D() { std::cout << "D Ctor " << std::endl;  f1(); callBack(*this); }
    ~D() { std::cout << "D Dtor " << std::endl; }
    void f1() { std::cout << "D : f1" << std::endl; }
    void f2() const { std::cout << "D : f2 " << std::endl; }
    virtual void f3() { std::cout << "D : f3 " << std::endl; }

};

void callBack(A const& a) { a.f2(); }

// =================================================================================================================================

int main()
{
    std::cout << "Start of main program" << std::endl;

    std::cout << "Creating a D object on the heap" << std::endl;
    D* pd = new D;
    C* pc = new D;
    A* pa = new D;

    if (true)
    {
        std::cout << "Entering Dummy scope # 1 and creating B object on the stack" << std::endl;
        B b;
        std::cout << "Leaving Dummy scope # 1 with B object within it" << std::endl;
    }

    if (true)
    {
        std::cout << "Entering Dummy scope # 2 and creating D object on the stack" << std::endl;
        D d;
        std::cout << "Leaving Dummy scope # 2 with D object within it" << std::endl;
    }

    std::cout << "Calling delete on pd (D*) which points on a D object" << std::endl;
    delete pd;

    std::cout << "Calling delete on pc (C*) which points on a D object" << std::endl;
    delete pc;

    std::cout << "Calling delete on pa (A*) which points on a D object" << std::endl;
    delete pa;

   std::cout << "End of main program" << std::endl;
   return 0;
} 
```

# arrays - Select range based on contents of an array

> ID：11055098
> 
> 赞同：1
> 
> 时间：2012-06-15T16:57:19.413
> 
> 标签：arrays, matlab, matrix

I have two arrays. I'd like to copy ranges of data from one of them, based on a list of array locations stored in the other. For example, if the first array were comprised of 100 rows and 2 columns, I might like to copy rows 10-20, rows 60-70 and rows 75-79\. If that were the case, then the contents of the second array would be as follows:

```
b =

    10    20
    60    70
    75    79 
```

In order to select the appropriate rows of the first array based on the second (let's call it 'a'), I would do the following:

```
b = [a(1,1):a(1,2) a(2,1):a(2,2) a(3,1):a(3,2)] 
```

This works, and returns array 'b' which is basically array 'a' with the correct contents extracted.

The problem is, array 'b' actually contains between 50 and 60 rows (i.e ranges to be included).

How do I make the above code more efficient, such that it works for any number of rows in 'b'?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:08:40.940

Example:

```
a = rand(100,1);
ranges = [
    10    20
    60    70
    75    79
];
idx = arrayfun(@colon, ranges(:,1), ranges(:,2), 'Uniform',false);
idx = [idx{:}];

b = a(idx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:05:43.793

You could use a for, assuming ranges of values to be extracted from a are in b, and should go to c:

```
% input
a = rand(100,2);
b = [10 20; 60 70; 75 79];
% output
c = zeros(1,2);
for i = 1:size(b,1)
    c = vertcat(c a(b(i,1):b(i,2), :));
end        
c = c(2:size(c,1), :); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:39:26.997

A solution using `cellfun` and cell arrays:

% Some example data:

```
a = reshape(1:100, 10, 10);
b = [ 2 3; 5 8; 10 10 ]; 
```

Here's the code:

```
bCell = mat2cell(b, 3, [ 1 1 ]);

aRows = cell2mat(arrayfun(@(x,y) a(x:y, :), bCell{1}, bCell{2}, 'UniformOutput', false)); 
```

# usb - MX51 可以支持 USB 3.0 吗？

> ID：11055099
> 
> 赞同：0
> 
> 时间：2012-06-15T16:57:27.597
> 
> 标签：usb, hardware, cpu, usb-flash-drive

我有一个由 MX51 cpu 运行的设备，我想知道的是：

用 mini usb 3.0 拇指驱动器更换 sd 插槽需要采取哪些步骤？这意味着物理移除硬件并安装一个 USB 3.0 端口来代替 SD 插槽。

我需要在设备的操作系统中安装哪些驱动程序？

我还需要了解哪些硬件人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:31:56.403

查看 框图中的[http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=i.MX515单击 Block pic。](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=i.MX515)可以看到这个只支持USB2.0

# spring - spring mongodb写入关注值

> ID：11055101
> 
> 赞同：5
> 
> 时间：2012-06-15T16:57:30.327
> 
> 标签：spring, mongodb

我在春天有以下核心 mongo 选项配置：

```
<mongo:mongo host="${db.hostname}" >
  <mongo:options
    connections-per-host="40"
    threads-allowed-to-block-for-connection-multiplier="1500"
    connect-timeout="15000"
    auto-connect-retry="true"
    socket-timeout="60000"
    write-number="1"
    write-fsync="false"/>
</mongo:mongo> 
```

我想知道的是不同的写入编号选项，这些选项与写入问题相关，例如无、正常、安全等。

我可以假设 write-number 到 writeconcern 的映射如下？

```
NONE: -1
NORMAL: 0
SAFE: 1 (default)
FSYNC_SAFE: 2
REPLICAS_SAFE: 3
JOURNAL_SAFE: 4
MAJORITY: 5 
```

以下链接为在 spring 中设置 mongo 选项提供了很好的帮助，但对于 write-number 值不够具体： [How to configure MongoDB Java driver MongoOptions for production use？](https://stackoverflow.com/questions/6520439/how-to-configure-mongodb-java-driver-mongooptions-for-production-use)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:32:28.743

写入关注数是“w”的值，它映射到当 w > 1 时写入被认为成功之前必须传播到的副本数。

FSYNC_SAFE 映射到设置 write-fsync（true 或 false），并且由于 JOURNAL_SAFE 也是一个布尔值，我怀疑 Spring 中有类似的布尔设置，但我在他们的任何文档中都找不到它。

如果您已经安装了所有东西来根据经验进行测试，只需尝试几种配置并检查生成的写入关注点的实际设置，例如：

```
 WriteConcern wc = new WriteConcern(); // should get your default write concern
       System.out.println(wc.getJ());
       System.out.println(wc.getFsync());
       System.out.println(wc.getW()); 
```

这应该会显示日志设置、Fsync 设置（均为布尔值）、W（作为 int）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T10:32:59.270

您可以配置 write-concern="ACKNOWLEDGED"。

```
<mongo:mongo id="replicaSetMongo" replica-set="${mongo.replicaSetSevers}" />
    <mongo:db-factory dbname="${mongo.dbname}" mongo-ref="replicaSetMongo" write-concern="ACKNOWLEDGED" />
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
    </bean> 
```

希望这能有所帮助。

# c# - 从 DN 获取用户信息

> ID：11055102
> 
> 赞同：3
> 
> 时间：2012-06-15T16:57:31.843
> 
> 标签：c#, active-directory

下面的代码有两个目标

1) 获取属于特定 AD 组的用户列表
2) 获取属于该组的所有用户的电子邮件/姓氏/名字

如果有更好的方法来完成这两者，请告诉我。

我能够获得完整的 DN，但我不确定如何从完整的 DN 中获取剩余数据，或者如果有更好的方法来提取此信息，请告诉我。以下是我正在使用的代码，但出现错误：

> `The value provided for adsObject does not implement IADs.`

当我尝试使用完整的 DN 执行 DirectorySearcher 时。

```
HashSet<string> User_Collection = new HashSet<string>();

SearchResultCollection sResults = null;
DirectoryEntry dEntryhighlevel = new DirectoryEntry("LDAP://CN=Global_Users,OU=Astrix,OU=Clients,OU=Channel,DC=astro,DC=net");
foreach (object dn in dEntryhighlevel.Properties["member"])
{
    DirectoryEntry dEntry = new DirectoryEntry(dn);
    Console.WriteLine(dn);
    DirectorySearcher dSearcher = new DirectorySearcher(dEntry);
    //filter just user objects
    dSearcher.SearchScope = SearchScope.Base;
    //dSearcher.Filter = "(&(objectClass=user)(dn="+dn+")";
    dSearcher.PageSize = 1000;
    sResults = dSearcher.FindAll();
    foreach (SearchResult sResult in sResults)
    {
        string Last_Name = sResult.Properties["sn"][0].ToString();
        string First_Name = sResult.Properties["givenname"][0].ToString();
        string Email_Address = sResult.Properties["mail"][0].ToString();
        User_Collection.Add(Last_Name + "|" + First_Name + "|" + Email_Address);
    } 
```

速度很重要，是的，我知道我没有按照设计使用 HashSet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:52:30.007

我总是使用[`System.DirectoryServices.AccountManagement`](http://msdn.microsoft.com/en-us/library/bb299745).

您将看到的第一件事是：“在可用时使用快速并发绑定 (FSB) 功能可以提高连接速度。连接缓存会减少使用的端口数量。” 话虽如此，我没有针对速度测试你的代码，你必须自己做，但这是微软的新库。

这是我的代码示例：

```
// Create the context for the principal object. 
PrincipalContext ctx = new PrincipalContext(ContextType.Domain,
                                            "fabrikam",
                                            "DC=fabrikam,DC=com");

// Create an in-memory user object to use as the query example.
GroupPrincipal u = new GroupPrincipal(ctx) {DisplayName = "Your Group Name Here"};

// Set properties on the user principal object.

// Create a PrincipalSearcher object to perform the search.
PrincipalSearcher ps = new PrincipalSearcher {QueryFilter = u};

// Tell the PrincipalSearcher what to search for.

// Run the query. The query locates users 
// that match the supplied user principal object. 
PrincipalSearchResult<Principal> results = ps.FindAll();

foreach (UserPrincipal principal in ((GroupPrincipal)results.FirstOrDefault()).Members)
{
    string email = principal.EmailAddress;
    string name = principal.Name;
    string surname = principal.Surname;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:42:52.297

看起来您正在 AD 中某个组的组成员身份...（从上面的成员参考中猜测）

无论如何，您需要决定要寻找哪种 API。您现在使用的级别较低（尽管您可以根据需要降低 :)）。更高级别是一个选项，因为之前的答案没有解决。

进一步修改代码（并帮助提高性能，正如您提到的那样，它对您很重要）：

*   使用与组成员搜索本身相同的连接（即没有额外的连接/绑定）
*   进行基本搜索，其中基本 DN 是用户 DN，搜索过滤器是 (objectclass=*)，并且属性只是您关心的属性（没有 *）
*   您可以删除页面大小。分页是一种在组（又名页面）中请求许多对象的方法，但基本搜索仅返回 1 个对象，因此它实际上并没有做任何事情。
*   基本搜索结果计数应始终为 1。

还要记住跨域问题。确保您使用 2 域森林测试您的代码，其中 domain1 中的一组类型域 local 在其中包含来自域 2 的成员。这将产生一些额外的工作来获取更多属性，因为您需要连接到另一个中的 DC域（如果您关心的少数属性都在 GC 部分属性集中，则为 GC...）

还要注意安全。如果您对域中的某些用户无权访问这些属性，那么代码会做什么？上面的代码会以令人讨厌的方式失败。:) 你可能想更优雅地处理这个......

希望这可以帮助。〜埃里克

# ms-access - 自动注销 ms 访问

> ID：11055103
> 
> 赞同：1
> 
> 时间：2012-06-15T16:57:34.777
> 
> 标签：ms-access, shutdown

我管理一个在服务器上运行并利用拆分表和前端选项的访问数据库。当我必须进行更新时，我必须让每个人都离开数据库，这通常很困难。总是有一两个人在下班后忘记注销或在请求时不退出。我发现一些第三方访问应用程序说它们可以工作，但我找不到任何访问 2010 的应用程序。我猜在访问 2010 中他们改变了用户权限的工作方式，这弄乱了以前的解决方案。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:14:00.977

我还没有尝试过这种方法，所以我无法验证它是否有效，但是你见过 \ 尝试过这个吗？

[http://www.databasejournal.com/features/msaccess/article.php/3548586/Auto-Logout-Users-for-DB-Maintenance.htm](http://www.databasejournal.com/features/msaccess/article.php/3548586/Auto-Logout-Users-for-DB-Maintenance.htm)

本质上，这个想法是您在启动时打开并隐藏一个表单，该表单会定期查询表以搜索注销标志。

如果未设置标志，则表单将重置其计时器并以某个固定间隔再次查询。

如果设置了标志，则表单会显示一条消息，告诉用户他/她将在 X 分钟内注销。当倒计时达到 0 时，表单将关闭应用程序。

据我所知，这种方法的最大关键是需要在后端数据库中设置标志，以便所有前端客户端看到相同的数据。

# django - 如何在 Django 中构建类似 facebook 的活动流侧边栏？

> ID：11055106
> 
> 赞同：2
> 
> 时间：2012-06-15T16:57:36.910
> 
> 标签：django

我一直在网上寻找这个，我发现了一些有趣的方法，比如**Djando Activity Stream**，但我想基于已经完成的开发自己的应用程序。**我特别想知道如何开发一个类似于 Facebook 的侧边栏**，该侧边栏显示基于演员、动作、对象和时间的活动流。最灵活的数据库模式是什么？如何使用现有的联系人应用程序实现它？如何为每个用户个性化？如何对相关活动进行分组？javascript是处理客户端控制的最佳方式吗？

我目前正在使用 contentTypes 和 GenericRelations 以便能够关联不同的应用程序模型。但我仍然没有走上正轨。关于如何以最简单和更灵活的方式开发它的帮助、提示和评论将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T08:59:34.973

我认为这是使用正确的包：[django-notification](http://django-notification.readthedocs.org/en/latest/)其次，您只需使用普通的旧 jQuery 和 ajax 调用将 request.user 流放在边栏中。您还可以根据演员、对象或其他内容过滤动作流。

# socket.io - socket.io 在 Chrome 中不起作用

> ID：11055110
> 
> 赞同：1
> 
> 时间：2012-06-15T16:57:48.973
> 
> 标签：socket.io

我正在尝试这个简单的 socket.io 示例，它可以在 Safari 中运行（从双方发送/接收）。但是，在 Chrome 中，客户端接收消息，但服务器不会接收客户端发送的消息

索引.html

```
<!doctype html>
<html>
<head>
<title>web sockets</title>
<meta charset="utf-8">
<script src="/socket.io/socket.io.js"></script>
<script>
var socket = io.connect('http://localhost:8888');
socket.on('news', function (data) {
    console.log(data);
    writeMessage(data);
    socket.emit('my other event', { my: 'data' });
});

function writeMessage(msg) {
    var msgArea = document.getElementById("msgArea");
    if (typeof msg == "object") {
        msgArea.innerHTML = msg.hello;
    }
    else {
        msgArea.innerHTML = msg;
    }
}
</script>
</head>
<body>
<div id="msgArea">
</div>
</body>
</html> 
```

服务器.js

```
var app = require('http').createServer(handler)
  , io = require('/usr/local/lib/node_modules/socket.io').listen(app)
  , fs = require('fs')

app.listen(8888);

function handler (req, res) {

  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

我错过了什么吗？Chrome 在 v.19 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T20:48:37.563

您可以使用[http://socket.io-test.com](http://socket.io-test.com)查看问题出在您的浏览器/代理还是您的代码上。

# java - JSch：我做错了什么，使用 JSCH tty 代码执行交互式命令？

> ID：11055115
> 
> 赞同：1
> 
> 时间：2012-06-15T16:58:34.077
> 
> 标签：java, ssh, jsch

我正在尝试将 JSch 连接到服务器，然后执行交互式`su`命令。

你能告诉我我错过了什么吗？这些东西每次都挂起，我看不出这种行为的原因。特别是我在发送密码之前专门等待密码字符串（实际上`assword`没有`:`）。

这就是我正在做的事情：

1.  以 user1/pass1 身份登录
2.  然后执行`su - user2 -c commandline`.
3.  在通道输入流中传递密码。

无论如何，这是主要的执行功能，它需要 user1/pass1、user2/pass2 和 commandLine。

```
public String execute (String host, String nuser, String npass,
                       String puser, String ppass, String commandLine)
    {
      try{
        synchronized(this) 
        {
          session = jsch.getSession(nuser,host,22);
          session.setConfig("StrictHostKeyChecking", "no");
          pstr=npass;
          //session.setPassword(npass);
          String authmethods=  session.getConfig("PreferredAuthentications");
          System.out.println(authmethods);
          UserInfo ui=new SUSessionExecution.UInfo();
          Thread.sleep(150);
          if(authmethods.contains("keyboard-interactive"))
          { System.out.print("keyboard-interactive"); session.setUserInfo(ui); } 
          else if ( authmethods.contains("password") )
          { System.out.print("password"); session.setPassword(pstr);  }

          session.connect();
          channel = session.openChannel("exec");
          nuser=null;
          npass=null;

          ((ChannelExec)channel).setPty(true);
          ((ChannelExec)channel).setPtyType("vt100");
          String command= "su - " + puser + " -c " + commandLine  + "\n";
          //((ChannelExec)channel).setCommand(commandLine);

          byte[] cmdBuffer=command.getBytes();
          ByteArrayInputStream bi = new ByteArrayInputStream(cmdBuffer);
          channel.setInputStream(bi);

          ByteArrayOutputStream bo = new ByteArrayOutputStream();
          ((ChannelExec)channel).setErrStream(bo);

          sessionOutput = channel.getInputStream();
          //sessionError = channel.getExtInputStream();

          channel.connect();

          session_open=true;
          // it is only here our session is fully functional.

          boolean sustatus;//=establishSU(commandIO, channel,puser,ppass);
          // NEEDS REPLACE

          //commandIO.write(command.getBytes());
          //commandIO.flush();

          String standardOutBuffer="";
          String standardErrBuffer="";

          int counter;
          byte[] byteBuffer = new byte[1024];

          while(sessionOutput.available() > 0)
            { counter=0; //byteBuffer=null;
              counter=sessionOutput.read(byteBuffer, 0, byteBuffer.length);
              if(counter < 0) { throw new java.io.IOException(); }
              standardOutBuffer += new String(byteBuffer,0,counter);
              if(standardOutBuffer.contains("assword")){break;}
            }

            /*if(sessionError.available() > 0)
            { counter=0; //byteBuffer=null;
              counter=sessionError.read(byteBuffer, 0, byteBuffer.length);
              if(counter < 0) { throw new java.io.IOException(); }
              standardErrBuffer += new String(byteBuffer,0,counter);
              if(standardErrBuffer.contains("assword")){break;}}*/

        commandIO = new PipedOutputStream();
        sessionInput = new PipedInputStream(commandIO);
        channel.setInputStream(sessionInput);
        commandIO.write(new String(ppass+"\n").getBytes());
        commandIO.flush();

        counter=0; standardOutBuffer="";
        while((counter = sessionOutput.read(byteBuffer,0,byteBuffer.length)) != -1)
        { standardOutBuffer += new String(byteBuffer,0,counter); }

        closeComponents();
        return standardOutBuffer;
        }
      }
      catch(com.jcraft.jsch.JSchException jse) 
      { session_open=false;su_space_open=false;jse.printStackTrace();
        closeComponents(); return null; }
      catch(java.io.IOException ioe)
      { session_open=false;su_space_open=false;ioe.printStackTrace();
        closeComponents(); return null; }
      catch(InterruptedException ie)
      { ie.printStackTrace(); }

        return null;
    } 
```

这是我的错误信息：

```
Exception in thread "main" java.lang.NullPointerException
  at com.jcraft.jsch.Buffer.putString(Buffer.java:59)
  at com.jcraft.jsch.UserAuthKeyboardInteractive.start(UserAuthKeyboardInteractive.ja‌va:183)
  at com.jcraft.jsch.Session.connect(Session.java:442)
  at com.jcraft.jsch.Session.connect(Session.java:162)
  at susessionexecution.SUExecute.execute(SUExecute.java:53)
  at Tester.<init>(Tester.java:12)
  at Tester.main(Tester.java:17) 
```

这是 promptKeyboardInteractive 方法

```
public String[] promptKeyboardInteractive (String destination, String name,
                                           String instruction, String[] prompt,
                                           boolean[] echo)
{
    System.out.println("\n"+prompt.length+"\n\n");
    String[] response=new String[prompt.length];
    response[0] = passwd;
    return response;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:10:34.580

看来你的实施

```
 UIKeyboardInteractive#promptKeyboardInteractive() 
```

返回一个字符串数组，其中包含“null”。

至于sudo，我建议参考 [http://www.jcraft.com/jsch/examples/Sudo.java.html](http://www.jcraft.com/jsch/examples/Sudo.java.html)

# javascript - 使函数在 HTTP 和 HTTPS 中工作

> ID：11055116
> 
> 赞同：2
> 
> 时间：2012-06-15T16:58:37.470
> 
> 标签：javascript, jquery, ajax, http, https

我有这个从另一个开发人员那里继承的 Javascript 代码。我对 Javascript 很陌生。

我遇到的问题是当用户使用 HTTPS 时它不起作用。有解决此问题的方法吗？

```
var tier1CategoryLink = "http://" + window.location.hostname + "/categories/";
    $("#as_Placeholder").load(tier1CategoryLink + " .SubCategoryList > ul", function(){
        $('#tier1').find('option').remove().end().append('<option>Make</option>');
        $("#as_Placeholder ul li").each(function(){
            var thisText = $(this).children("a").text();
            if ((thisText != "All Products") && (thisText != "Best Selllers") && (thisText != "Chromoly Flywheel Combo Sale") && (thisText != "New Arrivals") && (thisText != "On Sale") && (thisText != "Needs Categories")) {
                $("#tier1").append("<option value='" + $(this).children("a").attr("href") + "'>" + thisText + "</option>");
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:06:57.650

使用 window.location 确定用户当前的协议并进行相应调整：

```
var tier1CategoryLink = window.location.protocol + "//" + window.location.hostname + "/categories/"; 
```

或者只使用相对 URL：

```
var tier1CategoryLink = "/categories/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:03:18.580

我猜你想说你在浏览器中遇到了一个 java 脚本错误。这也是意料之中的。当用户在 https 中时，您必须修改 java 脚本以包含 https。例如，您的第一行必须如下所示：

```
var tier1CategoryLink = "https://" + window.location.hostname + "/categories/"; 
```

**编辑：**此外，你可以看看这个来解决你的问题。 [检测 HTTP 或 HTTPS，然后在 JavaScript 中强制使用 HTTPS](https://stackoverflow.com/questions/4723213/detect-http-or-https-then-force-https-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:19:43.627

最简单的解决方案是只使用双斜杠

```
var tier1CategoryLink = "//" + window.location.hostname + "/categories/"; 
```

规范[第 5.2 节中的详细信息](http://www.ietf.org/rfc/rfc3986.txt)

# .net - IEqualityComparer(of object) for Intersect 或 except 不起作用

> ID：11055118
> 
> 赞同：0
> 
> 时间：2012-06-15T16:58:44.590
> 
> 标签：.net, vb.net, generics

`enter code here`想要从主列表中删除项目，但给出错误“无法转换类型的对象`<ExceptIterator>d__99'1[`”

```
 Public Class FieldCollectionItemCompare
    Implements System.Collections.Generic.IEqualityComparer(Of FieldCollectionItem)

    Public Shadows Function Equals(ByVal x As FieldCollectionItem, ByVal y As FieldCollectionItem) As Boolean Implements System.Collections.Generic.IEqualityComparer(Of FieldCollectionItem).Equals

        If x.UniqueID = y.UniqueID Then
            Equals = True
        Else
            Equals = False
        End If
    End Function

    Public Overloads Function GetHashCode(ByVal obj As FieldCollectionItem) As Integer Implements System.Collections.Generic.IEqualityComparer(Of FieldCollectionItem).GetHashCode
        GetHashCode = obj.UniqueID + obj.UniqueID
    End Function

    End Class 
```

...这就是我正在做的事情

```
FieldCollectionToProcessList = FieldCollectionToProcessList.Intersect(FieldCollectionRejected, New FieldCollectionItemCompare)

FieldCollectionToProcessList = FieldCollectionToProcessList.Intersect(FieldCollectionAccepted, New FieldCollectionItemCompare) 
```

...所有列表都是 `As Generic.List(Of FieldCollectionItem)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:00:54.873

您正在尝试将`Intersect`back 的结果分配给`FieldCollectionToProcessList`. 结果不是`List(Of FieldCollectionItem)`- 它是`IEnumerable(Of FieldCollectionItem)`. `ToList`如果您需要将其转回列表，则需要致电。您可以一步完成所有操作：

```
// Variable names changed for sanity
list = list.Intersect(rejected, New FieldCollectionItemCompare).
            Intersect(accepted, New FieldCollectionItemCompare).
            ToList 
```

请注意，如果您启用了 Option Strict，您应该能够在编译时看到错误。

您可能还想考虑创建一个`HashSet(Of FieldCollectionItem)`，然后使用[`IntersectWith`](http://msdn.microsoft.com/en-us/library/bb293080.aspx).

这些都与您的自定义相等比较器无关，尽管我注意到您可以只使用：

```
Return x.UniqueID = y.UniqueID 
```

对于`Equals`, 和

```
Return obj.UniqueID 
```

为`GetHashCode`.

# python - 查找快速匹配电子邮件正则表达式

> ID：11055120
> 
> 赞同：1
> 
> 时间：2012-06-15T16:59:00.907
> 
> 标签：python

```
solution:[a-zA-Z0-9.!#$%&'*+-/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)* is a good choice 
```

我正在使用如下正则表达式来匹配文件中的电子邮件地址：

```
email = re.search('(\w+-*[.|\w]*)*@(\w+[.])*\w+',line) 
```

在像下面这样的文件上使用时，我的正则表达式效果很好：

```
mlk407289715@163.com    huofenggib  wrong in get_gsid
mmmmmmmmmm776@163.com   rouni816161 wrong in get_gsid 
```

但是当我在像下面这样的文件上使用它时，我的正则表达式运行缓慢，令人无法接受：

```
9b871484d3af90c89f375e3f3fb47c41e9ff22  mingyouv9gueishao@163.com
e9b845f2fd3b49d4de775cb87bcf29cc40b72529e   mlb331055662@163.com 
```

当我使用[这个网站](http://www.regular-expressions.info/email.html)的正则表达式时，它仍然运行得很慢。

我需要一个解决方案，并想知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:08:44.340

这是回溯的问题。阅读[本文](http://www.regular-expressions.info/catastrophic.html)了解更多信息。

您可能想要拆分行并使用包含 @ 的部分：

```
pattern = '(\w+-*[.|\w]*)*@(\w+[.])*\w+'
line = '9b871484d3af90c89f375e3f3fb47c41e9ff22  mingyouv9gueishao@163.com'
for element in line.split():
    if '@' in element:
        g = re.match(pattern, element)
        print g.groups() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:09:42.963

通常当正则表达式很慢时，这是由于[catastrophic bactracking 造成的](http://www.regular-expressions.info/catastrophic.html)。由于以下部分中的嵌套重复，这可能发生在您的正则表达式中：

```
(\w+-*[.|\w]*)* 
```

如果您可以处理正则表达式的这一部分以从括号中删除重复，您应该会看到速度显着提高。

但是，您最好只搜索电子邮件正则表达式并查看其他人如何解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:13:13.310

搜索 StackOverflow 以查看您的问题是否已被讨论总是一个好主意。

[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)

从那个讨论来看，这个对我来说看起来不错：

```
[a-zA-Z0-9.!#$%&'*+-/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)* 
```

# php - PHP 包括导致加载时间缓慢的 ajax 内容加载

> ID：11055121
> 
> 赞同：1
> 
> 时间：2012-06-15T16:59:05.760
> 
> 标签：php, jquery, ajax, class, include

我目前正在[这个网站](http://www.philmarsdenphotography.co.uk)上工作，我需要一些关于 php 和 ajax 的帮助。如果这是一个简单的解决方法，我深表歉意，但我已经到处寻找，但找不到解决方案。

无论如何，左侧的链接使用 ajax 加载右侧的内容。那是容易的部分。'gallery' 下的子链接会加载这样的 php 文件：

```
<?php
include "connect_to_mysql.php";
include_once("classes/category.class.php");
include_once("classes/album.class.php");
include_once("classes/images.class.php");
$category = new category();
$categories = $category->loadAbstract();
?>
<div id="image_gallery">
<?php 
foreach ($categories as $category) {
    if ($category->hasAlbums()) {
        foreach ($category->albums as $album) {
            echo '<div class="album_container">';
                echo '<div class="sublinks" onClick="loadAlbum(\''.$album->getId().'\')">
                        <h4>'.$album->getName().'</h4>
                    </div>';
        }
    }
}
?>
</div>
<script>
    function loadAlbum(Id) {
        $.ajax({
            type: 'POST',
            url: 'loadalbum.php',
            data: "selectedAlbum="+Id,
            success: function(result) {
                        $("#"+Id).html(result);
                    }
        });
</script> 
```

显然，这调用了 loadalbum.php，我必须添加相同的包括：

```
<?php 
include "connect_to_mysql.php";
include_once("classes/category.class.php");
include_once("classes/album.class.php");
include_once("classes/images.class.php");
$selectedAlbum=$_POST['selectedAlbum'];
?> 
```

问题是每次我在左侧选择不同的类别时，它都必须调用这些类，然后当从该类别中选择专辑时，再次调用这些类。这大大减慢了加载时间，因为它必须不断从数据库中检索数据。

如果专辑已经加载，我会使用一些 javascript 来阻止它加载专辑，但是一旦在左侧选择了不同的链接，它就会返回到第一个方框。

有没有办法在网页打开时加载我的所有类，然后在我的 php 文件通过 ajax 加载时引用它们？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:10:47.517

我认为你需要重新定义你的实体关系。根据您的代码：类别、专辑和图像都具有同等地位。我不认为这是真的，但这不是我的设计。无论如何，将您的模型包含到您的控制器类中

```
<?php
require_once "classes/album.class.php";
require_once "classes/category.class.php";
require_once "classes/images.class.php";

class Controller
{
  public $album;
  public $image;
  public $category;

  public function __construct()
  {
   $this->album = new Album();
   $this->image = new Image();
   $this->category= new Category();
  }

  public invoke(){
    $categories = $this->category->loadAbstract();
    include "path-to-gallery.php";
  }
} 
```

所以现在在您的控制器中，您可以访问所有模型。将您的数据操作函数放在模型类中并从控制器调用它们。包含的页面将预加载 $categories 数据。然后，您可以在视图中循环浏览它。

两个重要的注意事项： 1) 要求运行时**必须**存在的文件。如果他们不这样做，你会得到一个致命的错误。包含只会给出警告，可能会被抑制，并且 2) 要求和包含是语言结构，而不是方法。括号是不必要的。

我已经为您的控制器类提供了一个基本大纲。我的方式只是其他数百种 MVC 实现中的一种。许多人会争论我所写内容的细节。别担心。试着理解我提供的基础知识。如果有帮助，那就太好了。一定要接受答案。如果不是，则忽略它。

祝你好运。

# c# - 计算特殊 UTF-8 字符

> ID：11055122
> 
> 赞同：7
> 
> 时间：2012-06-15T16:59:20.950
> 
> 标签：c#

我正在寻找一种方法来计算由多个字符组成的特殊字符，但在网上找不到解决方案！

例如，我想计算字符串“வாழைப்பழம”。它实际上由 6 个泰米尔语字符组成，但在这种情况下，当我们使用正常方法来查找长度时，它是 9 个字符。我想知道泰米尔语是唯一会导致此问题的编码，以及是否有解决方案。我目前正在尝试在 C# 中找到解决方案。

提前谢谢你=）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T17:05:03.303

使用[`StringInfo.LengthInTextElements`](http://msdn.microsoft.com/en-us/library/system.globalization.stringinfo.lengthintextelements.aspx)：

```
var text = "வாழைப்பழம";
Console.WriteLine(text.Length);                               // 9
Console.WriteLine(new StringInfo(text).LengthInTextElements); // 6 
```

这种行为的解释可以在[String.Length](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)的文档中找到：

> **Length**属性返回此实例中 Char 对象的数量，而不是 Unicode 字符的数量。原因是一个 Unicode 字符可能由多个 Char 表示。使用`System.Globalization.StringInfo`该类来处理每个 Unicode 字符而不是每个 Char。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T17:08:58.783

一个小问题：`string`.NET 中的 s 使用 UTF-16，而不是 UTF-8

* * *

当您谈论字符串的长度时，您可能意味着以下几种不同的含义：

1.  **以字节为单位的长度。**  这通常是旧的 C 语言看待事物的方式。
2.  **Unicode 代码点的长度。**  这使您更接近现代，并且应该是处理字符串长度的方式，但事实并非如此。
3.  **UTF-8/UTF-16 代码*单元*的长度。**  这是最常见的解释，源自 1。某些字符在那些编码中采用多个代码单元，如果您不期望它会使事情复杂化。
4.  **可见“字符”（字素）的计数。** 这通常是人们说字符或字符串长度时的意思。

* * *

在您的情况下，您的困惑源于 4\. 和 3\. 之间的区别。 3\. 是 C# 使用的，4\. 是您所期望的。泰米尔语等复杂的文字使用连字和变音符号。连字是将两个或多个相邻字符压缩成一个字形 - 在您的情况下，ழை 是 ழ 和 ை 的连字 - 后者会改变前者的外观；வா也是这样的连字。变音符号是字母周围的装饰，例如 à 中的重音或 ப் 上方的点。

我提到的两种情况都产生了一个字素（你认为是一个字符），但它们都需要两个*实际*字符。所以你最终在字符串中多了三个代码点。

需要注意的一件事：对于您的情况，2\. 和 3\. 之间的区别无关紧要，但通常您应该牢记这一点。

# c++ - 将 3d 数组元素从十六进制转换为二进制以用于 bmp

> ID：11055123
> 
> 赞同：1
> 
> 时间：2012-06-15T16:59:24.600
> 
> 标签：c++, image-processing, multidimensional-array

我成功地将 24 位 512x512 .bmp 中的像素值读取到 3-D 数组中。以下是我用于名为 lena512.bmp 的测试图像的代码。

```
...snip ...
FILE *fptr;

int i, j, k;
char *filename = "lena512.bmp";
//char *filename2 = "anotherimage.bmp"; 
//ofstream myfile;
unsigned char databuff[512][512][3];

BmpFileHeader fheader;
BmpInfoHeader iheader;

printf("sizeof: fheader: %d   iheader: %d\n\n", sizeof(fheader),
       sizeof(iheader));
if ((sizeof(fheader) != 14) || (sizeof(iheader) != 40)) {
    printf("Header structs are not properly packed\n");
    return 0;
}

if ((fptr = fopen(filename, "r")) == NULL) {
    printf("Coulsn't open file %s for reading.\n", filename);
    return 1;
};
if (fread(&fheader, sizeof(fheader), 1, fptr) != 1) {
    printf("Couldn't read fheader.\n");
    return 0;
}
if (fread(&iheader, sizeof(iheader), 1, fptr) != 1) {
    printf("Couldn't read iheader.\n");
    return 0;
}
printf("           fheader.type = %04x \n", fheader.type);
printf("           fheader.size = %u   \n", fheader.size);
printf("      fheader.reserved1 = %u   \n", fheader.reserved1);
printf("      fheader.reserved2 = %u   \n", fheader.reserved2);
printf("         fheader.offset = %u   \n", fheader.offset);
printf("           iheader.size = %u   \n", iheader.size);
printf("          iheader.width = %u   \n", iheader.width);
printf("         iheader.height = %u   \n", iheader.height);
printf("         iheader.planes = %u   \n", iheader.planes);
printf("           iheader.bits = %u   \n", iheader.bits);
printf("    iheader.compression = %u   \n", iheader.compression);
printf("      iheader.imagesize = %u   \n", iheader.imagesize);
printf("    iheader.xresolution = %u   \n", iheader.xresolution);
printf("    iheader.yresolution = %u   \n", iheader.yresolution);
printf("        iheader.ncolors = %u   \n", iheader.ncolors);
printf("iheader.importantcolors = %u   \n", iheader.importantcolors);
printf("\n");

if ((iheader.height != 512) || (iheader.width != 512) || (iheader.bits != 24)) {
    printf("This only works for 512x512 24-color bitmaps\n");
    return 0;
}
if (fheader.offset != 54) {
    printf("This only works if the offset is equal to 54\n");
    return 0;
}

for (i = 0; i < iheader.height; i++) {
    for (j = 0; j < iheader.width; j++) {
        if (fread(&databuff[i][j][0], 3, 1, fptr) != 1) {
            printf("Couldn't read colors for element [%d][%d]\n", i, j);
            return 0;
        }
    }
}
//myfile.open("lena512bmp_24bit.txt");
for (i = 0; i < 1; i++) { /* This should only give you the first row */
    printf("Row %2d:\n", i);
    for (j = 0; j < 1; j++) { /* look at the first element on each row */
        printf("  ");
        for (k = 0; k < 3; k++) {
    printf("%02x ", databuff[i][j][k]);
    cout << databuff[i][j][k];

        }
        printf("\n");
    }
    printf("\n\n");
}
//myfile.close();
fclose(fptr);
 return 0; 
```

我还包括一个称为`bmp_headers.h`该文件的标题，它与我要问的问题不太相关。
这里的输出是`37 51 9E`（以十六进制显示），因为我的`for`循环只考虑第一行的前 3 个元素（在图像标题的前 54 个字节之后）。512x512 图像的输出与同一图像的十六进制编辑器中显示的值一致。我希望将此数组中的每个元素转换为一串二进制字符并显示它们。（即`37 51 9E`==> `00110111 01010001 10011110`）。
如果我理解正确，我将不得不将此数组转换为字符串，然后转换为十六进制，然后转换为二进制字符串。有没有更简单的方法来做到这一点？我发现自己现在有点困惑。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:39:29.180

好吧，你的问题被标记为 C++，所以这里是如何在 C++ 中做到这一点：

```
#include <sstream>

template <typename T>
std::string ToBinary(T value)
{
    std::stringstream sstream;
    while (value > 0)
    {
        sstream << static_cast<char>((value % 2) + 48);
        value /= 2;
    }
    std::string result = sstream.str();
    std::reverse(result.begin(), result.end());
    return result;
}

for (i = 0; i < 1; i++) { /* This should only give you the first row */
    std::cout << "Row " << i << std::endl;
    for (j = 0; j < 1; j++) { /* look at the first element on each row */
        std::cout << "  ";
        for (k = 0; k < 3; k++) {
            std::cout << ToBinary(databuff[i][j][k]);
        }
        std::cout << std::endl;
    }
    std::cout << std::endl;
} 
```

# c# - 使用 Intersect 我得到一个 Local 序列不能用于查询运算符的 LINQ to SQL 实现，但 Contains 运算符除外

> ID：11055124
> 
> 赞同：1
> 
> 时间：2012-06-15T16:59:36.557
> 
> 标签：c#, linq-to-sql, sequence, local, intersect

我正在使用 Linq to SQL 查询来提供与数据库字段匹配的搜索词列表。搜索词是内存中的字符串数组。具体来说，我在 Linq 查询中使用“相交”，将搜索词与数据库字段“描述”进行比较。在下面的代码中，描述字段是 iss.description。description 字段在 Linq 查询中被分隔成一个数组，并且 intersect 用于比较搜索词和描述词，以保持 Linq 查询中的所有比较和条件，这样数据库就不会被征税。在我的研究中，试图克服这个问题，我发现不支持使用内存或“本地”序列。在研究过程中，我也尝试了一些建议，例如使用“AsEnumerable”或“

```
searchText = searchText.ToUpper();
var searchTerms = searchText.Split(' ');

var issuesList1 = (
    from iss in DatabaseConnection.CustomerIssues

    let desc = iss.Description.ToUpper().Split(' ')
    let count = desc.Intersect(searchTerms).Count()
    where desc.Intersect(searchTerms).Count() > 0

    join stoi in DatabaseConnection.SolutionToIssues on iss.IssueID equals stoi.IssueID into stoiToiss
    from stTois in stoiToiss.DefaultIfEmpty()
    join solJoin in DatabaseConnection.Solutions on stTois.SolutionID equals solJoin.SolutionID into solutionJoin
    from solution in solutionJoin.DefaultIfEmpty()
    select new IssuesAndSolutions
    {
        IssueID = iss.IssueID,
        IssueDesc = iss.Description,
        SearchHits = count,
        SolutionDesc = (solution.Description == null)? "No Solutions":solution.Description,
        SolutionID = (solution.SolutionID == null) ? 0 : solution.SolutionID,
        SolutionToIssueID = (stTois.SolutionToIssueID == null) ? 0 : stTois.SolutionToIssueID,
        Successful = (stTois.Successful == null)? false : stTois.Successful
    }).ToList();
    ... 
```

我成功的唯一方法是创建两个查询并调用如下所示的方法，但这需要 Linq 查询返回所有匹配结果（描述中搜索词的命中数），包括非匹配的记录并提供内存中的 List<> ，然后使用另一个 Linq 查询过滤掉不匹配的记录。

```
public static int CountHits(string[] searchTerms, string Description)
    {
        int hits = 0;
        foreach (string item in searchTerms)
        {
            if (Description.ToUpper().Contains(item.Trim().ToUpper())) hits++;
        }            
        return hits;
    }
    public static List<IssuesAndSolutions> SearchIssuesAndSolutions(string searchText)
    {
        using (BYCNCDatabaseDataContext DatabaseConnection = new BYCNCDatabaseDataContext())
        {
            searchText = searchText.ToUpper();
            var searchTerms = searchText.Split(' ');

            var issuesList1 = (
                from iss in DatabaseConnection.CustomerIssues
                join stoi in DatabaseConnection.SolutionToIssues on iss.IssueID equals stoi.IssueID into stoiToiss
                from stTois in stoiToiss.DefaultIfEmpty()
                join solJoin in DatabaseConnection.Solutions on stTois.SolutionID equals solJoin.SolutionID into solutionJoin
                from solution in solutionJoin.DefaultIfEmpty()
                select new IssuesAndSolutions
                {
                    IssueID = iss.IssueID,
                    IssueDesc = iss.Description,
                    SearchHits = CountHits(searchTerms, iss.Description),
                    SolutionDesc = (solution.Description == null)? "No Solutions":solution.Description,
                    SolutionID = (solution.SolutionID == null) ? 0 : solution.SolutionID,
                    SolutionToIssueID = (stTois.SolutionToIssueID == null) ? 0 : stTois.SolutionToIssueID,
                    Successful = (stTois.Successful == null)? false : stTois.Successful
                }).ToList();

            var issuesList = (
                from iss in issuesList1
                where iss.SearchHits > 0
                select iss).ToList();
                ... 
```

我会对两个 Linq 查询感到满意，但第一个 Linq 查询只返回匹配的记录，然后可能使用第二个，也许是 lambda 表达式对它们进行排序，但我的试验没有成功。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:13:33.577

好的，所以在搜索更多技术并尝试了 user1010609 的技术之后，我在几乎完全重写后设法让它工作。下面的代码首先提供了一个包含我正在搜索的所有信息的平面记录查询，然后将过滤后的信息与搜索词进行比较形成一个新列表（计算每个搜索词的命中以按相关性排序）。我小心地不返回平面文件的列表，这样在最终的数据库检索中会有一些效率（在过滤的 List<> 的形成过程中）。我很肯定这甚至不是一种有效的方法，但它确实有效。我渴望看到更多独特的技术来解决这类问题。谢谢！

```
searchText = searchText.ToUpper();
List<string> searchTerms = searchText.Split(' ').ToList();

var allIssues =
    from iss in DatabaseConnection.CustomerIssues
    join stoi in DatabaseConnection.SolutionToIssues on iss.IssueID equals stoi.IssueID into stoiToiss
    from stTois in stoiToiss.DefaultIfEmpty()
    join solJoin in DatabaseConnection.Solutions on stTois.SolutionID equals solJoin.SolutionID into solutionJoin
    from solution in solutionJoin.DefaultIfEmpty()
    select new IssuesAndSolutions
    {
        IssueID = iss.IssueID,
        IssueDesc = iss.Description,
        SolutionDesc = (solution.Description == null) ? "No Solutions" : solution.Description,
        SolutionID = (solution.SolutionID == null) ? 0 : solution.SolutionID,
        SolutionToIssueID = (stTois.SolutionToIssueID == null) ? 0 : stTois.SolutionToIssueID,
        Successful = (stTois.Successful == null) ? false : stTois.Successful
    };                

    List<IssuesAndSolutions> filteredIssues = new List<IssuesAndSolutions>();

    foreach (var issue in allIssues)
    {
        int hits = 0;
        foreach (var term in searchTerms)
        {
            if (issue.IssueDesc.ToUpper().Contains(term.Trim())) hits++;                        
        }
        if (hits > 0)
        {
             IssuesAndSolutions matchedIssue = new IssuesAndSolutions();
             matchedIssue.IssueID = issue.IssueID;
             matchedIssue.IssueDesc = issue.IssueDesc;
             matchedIssue.SearchHits = hits;
             matchedIssue.CustomerID = issue.CustomerID;
             matchedIssue.AssemblyID = issue.AssemblyID;
             matchedIssue.DateOfIssue = issue.DateOfIssue;
             matchedIssue.DateOfResolution = issue.DateOfResolution;
             matchedIssue.CostOFIssue = issue.CostOFIssue;
             matchedIssue.ProductID = issue.ProductID;
             filteredIssues.Add(matchedIssue);
         }                    
      } 
```

# foreign-keys - rails3-jquery-自动完成外键

> ID：11055125
> 
> 赞同：1
> 
> 时间：2012-06-15T16:59:37.557
> 
> 标签：foreign-keys, jquery-autocomplete, ruby-on-rails-3.2

嗨，我需要帮助设置 rails3-jquery-autocomplete gem 在我的数据库中手动分配的外键。

这是我的模型的样子

```
 class User < ActiveRecord::Base
   has_many :reservations, :foreign_key => 'reserver_id'
   attr_accessible :login, :first_name, :last_name
 end

class Reservation < ActiveRecord::Base
  belongs_to :reserver, :class_name => 'User'
  attr_accessible :reserver, :reserver_id, :reserver_login
end 
```

我数据库中的用户表包含所有列

预订控制器有

```
autocomplete :users, :login 
```

Routes.rb 有

```
resources :reservations do
  get :autocomplete_users_login, :on => :collection
end 
```

在预订视图中我有这个

```
 <%= f.autocomplete_field :reserver_id, autocomplete_users_login_reservations_path %> 
```

现在，当我尝试对其进行测试时，我看到正在我的 javascript 控制台中进行调用，但我收到错误 500。例如，我尝试搜索位于我的用户数据库的登录列中的 xno。

```
GET http://0.0.0.0:3000/reservations/autocomplete_users_login?term=xno 500 (Internal Server   Error) jquery.js:8241
  jQuery.ajaxTransport.send jquery.js:8241
  jQuery.extend.ajax jquery.js:7720
  jQuery.each.jQuery.(anonymous function) jquery.js:7246
  jQuery.extend.getJSON jquery.js:7263
  a.railsAutocomplete.fn.extend.init.a.autocomplete.source autocomplete-rails.js:17
  $.widget._search jquery-ui.js:6547
  $.widget.search jquery-ui.js:6540
  (anonymous function) jquery-ui.js:6335 
```

这与我在数据库中使用外键这一事实有关吗？如果是，我应该如何构建我的路由。我正在关注 gem 文档并尝试对其进行设置，以便我可以查找 users 表并通过 users 表的 login 列列出人员，但是一旦用户被选中，id 就会返回并存储为 :reserver_id . 以前使用选择字段的代码是

```
 <%= f.select :reserver_id, User.select_options, :prompt => true %> 
```

其中 select_options 方法在各个数组中创建了一个登录字符串数组和 id 对。

我知道解决方案可能真的很简单，谢谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:23:44.797

我的问题很愚蠢，但事实证明这与类别表使用自定义外键这一事实无关。我的第一个问题是使用表名的复数形式而不是单数形式。一旦我将所有对用户的引用更改为用户，我注意到 javascript 控制台没有向我抛出任何异常，所以我认为我已经破坏了所有内容并且没有进行调用，或者它正在通过并且没有呈现适当地。

控制台中正确的 MYSQL 调用证实了我的怀疑。就在那时，我看到列表正在渲染到我的页面右侧，这可能是由于其他地方发生了奇怪的样式。

底线是拥有自定义外键根本不会改变 gem 的使用。应使用原始表名。

# objective-c - Obj-C 子类似乎无法识别继承的选择器

> ID：11055130
> 
> 赞同：3
> 
> 时间：2012-06-15T17:00:06.290
> 
> 标签：objective-c, inheritance, subclass

首先，我的代码：

```
@interface Block : NSObject {
    NSData *data;
    NSInteger slice_count;
}

@property (readonly) NSData *data;

+ (Stopwatch *) runOldTestsUsingConfiguration:(TestConfiguration *)c;

- (Slice *) getSlice:(NSUInteger)idx;

@end

- (Slice *) getSlice:(NSUInteger)idx {
    void *b = (void*)[data bytes] + idx*slice_count;
    int len = [data length] / slice_count;
    Slice *ret = [Slice alloc];
    [ret initWithBytesNoCopy:b length:len freeWhenDone:NO];
    return ret;
    //NSString *temp2 = [data description];
    //NSRange r = NSMakeRange(idx*slice_count, [data length] / slice_count);
    //NSData *d = [data subdataWithRange:r];
    //NSString *temp = [d description];
    //Slice *s = [[Slice alloc] initWithBytesNoCopy:(void *)[d bytes] length:r.length freeWhenDone:NO];
    //return s;
} 
```

其中`Slice`是 的一个简单子类`NSData`。

出于某种原因，我收到了一个运行时错误，这似乎表明我的 Slice 实例要么 a) 实际上不是一个具体实例 (?) 要么 b) 其继承出现问题并且消息本身没有绑定正确切片（几乎可以肯定是由于我还未知的错误）。

我得到的确切错误是：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***
initialization method -initWithBytes:length:copy:freeWhenDone:bytesAreVM:
cannot be sent to an abstract object of class Slice: Create a concrete instance!' 
```

谁能帮我吗？我已经尝试了几乎所有我能想到的（基本例程在消息调用本身中有详细说明），但我仍然干涸。当它说“创建一个具体实例”时是什么意思？这不就是我在做的`alloc`事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:03:50.270

继承 NSData 比你想象的要复杂得多。在大多数情况下，你最好只写一个 NSData 的包装器而不是一个完整的子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:08:46.463

IIRC，init 方法允许重新分配 self，因此应始终与 alloc 在同一行上使用。

```
Slice *ret = [[Slice alloc] initWithBytesNoCopy:b length:len freeWhenDone:NO]; 
```

我不确定这是否是根本原因，但这对我来说是一个危险信号，可能会引导你朝着一个好的方向前进。

编辑：

实际上，我想知道您是否在子类中覆盖了 +alloc 并且没有返回实例......

# android - getDrawingCache 未更新

> ID：11055133
> 
> 赞同：5
> 
> 时间：2012-06-15T17:00:18.407
> 
> 标签：android, android-canvas, android-view

我在 onDraw 函数中调用 getDrawingCache。问题是它仅在第一次包含对画布的更改，之后，它根本不会随着新的更改而更新。这是我的代码：

```
 paintAction.draw(canvas);
        if (paintAction.isPermanentChange())
        {
            Bitmap partialBitmap=getDrawingCache();
            int numColored=0;
            for (int index1=0;index1<partialBitmap.getWidth();index1++)
            {
                for (int index2=0;index2<partialBitmap.getHeight();index2++)
                {
                    if (partialBitmap.getPixel(index1,index2)==0xFF000000) 
                        numColored++;
                }
            }
            Log.i("PaintDroid","Bitmap pixels: " + numColored);
            int areaWidth=partialBitmap.getWidth()-SCROLLBAR_SIZE;
            int areaHeight=partialBitmap.getHeight()-SCROLLBAR_SIZE;
            int[] pixels=new int[areaWidth*areaHeight];
            partialBitmap.getPixels(pixels,0,areaWidth,0,0,areaWidth,
                    areaHeight);    
            numColored=0;
            for (int index=0;index<pixels.length;index++)
                if (pixels[index]==0xFF000000) numColored++;
            Log.i("PaintDroid","Pixels: " + numColored); 
```

（setDrawingCache(true) 在创建视图时调用，因为如果我从 onDraw 调用它，getDrawingCache 将返回 null。）

可以看出，我通过遍历位图和获取数组中的值来计算黑色像素的数量，正如我所说，我第一次得到了我期望的数字，但在那之后，它本来应该增加的，但根本没有改变！

有人知道出了什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:41:55.920

我解决了。问题是我在 onDraw 画布上的最后一次绘制操作之前调用了 setDrawingCacheEnabled(true)。它必须在绘制完成后调用，否则将无法得到正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T08:20:35.747

澄清一下，这里的问题是视图的绘图缓存在您第二次调用`getDrawingCache()`.

为了刷新绘图缓存，它必须失效并且调用方法的顺序应该如下：

```
public Bitmap renderView(View view) {
    view.setDrawingCacheEnabled(true)
    Bitmap bitmap = view.getDrawingCache();
    view.setDrawingCacheEnabled(false)
    return bitmap;
} 
```

# html - 删除 CSS 中第一个孩子的上边框和最后一个孩子的下边框

> ID：11055135
> 
> 赞同：12
> 
> 时间：2012-06-15T17:00:20.893
> 
> 标签：html, css

我有以下 HTML：

```
<ul>
<li>FIRST</li>
<li>SECOND</li>
<li>THIRD</li>
<li>FOURTH</li>
<ul> 
```

以及以下 CSS：

```
li
{
 border-top:1px solid #FFF;
 border-bottom: 1px solid #D0D0D0;       
}​ 
```

如何删除第一个 LI 元素的上边框和最后一个 LI 元素的下边框？​</p>

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-15T17:01:28.210

```
li:first-child {
  border-top: none;
}
li:last-child {
  border-bottom: none;
} 
```

就这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-02T03:48:52.843

使用 CSS`:not`选择器仅在需要时应用样式，而不是添加然后删除它们。

例如，

```
body {
  background: #acc;
}

li:not(:first-child) {
  border-top: 1px solid #fff;
}

li:not(:last-child) {
  border-bottom: 1px solid #000;
}
```

```
<ul>
  <li>First</li>
  <li>Second</li>
  <li>Third</li>
  <li>Fourth</li>
</ul>
```

# mongodb - MongoDB：获取子字段的长度作为查询的一部分

> ID：11055136
> 
> 赞同：0
> 
> 时间：2012-06-15T17:00:21.983
> 
> 标签：mongodb

在 mongodb 中，有没有办法在查询中询问子字段的长度？

假设我有一个 blog_post 集合，每个帖子都有字段标题和内容（都是文本字段），以及一个包含评论列表的评论字段。

我想做这样的事情：

```
db.blog_posts.find(
  {_id:ObjectId("4fd69d962fa6cd0a8e00002d")},
  {"title":1, "content": 1, "comments": $length}
) 
```

然后回来：

```
{
  "_id" : ObjectId("4fd69d962fa6cd0a8e00002d"),
  "title" : "Curae proin eni",
  "content" : "Etiam lacus euismod litora malesuada tempus a adipiscing mus.",
  "comments" : 27
} 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:12:33.493

您不能以这种方式使用查询返回字段的长度，但您可以使用 map reduce 来查找数组的长度： [http ://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

您还可以使用 db.eval() 通过创建一个获取文档的 _id 的函数来返回数组“a”的长度：{_id: 1, a : [1, 2, 3]}

```
t = function (id) {
        return db.eval(function (id) {
           var t = db.test.findOne({_id:id});
           var total = t.a.length;
           return total;
        }, 
        id);
    }

t(1) = 3 
```

[http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Using%7B%7Bdb.eval%28%29%7D%7D](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Using%7B%7Bdb.eval%28%29%7D%7D)

但是，您应该注意 db.eval() 是一个阻塞操作，因此对于长时间运行的作业，您应该使用 map reduce。如果这不是您要找的，请告诉我。

# symfony1 - 使用 sfGuard 插件提取特定记录的多个 Doctrine 查询

> ID：11055139
> 
> 赞同：0
> 
> 时间：2012-06-15T17:00:27.100
> 
> 标签：symfony1, doctrine, symfony-1.4

我试图通过从另一个表中检索特定参数来从名为 Faculty 的表中提取一组特定的记录。我从 sfGuard 用户那里获取 ID，然后从 ID 中检索记录。从那里我想从该表中提取部门名称，并仅显示具有该部门名称的教师记录。

这就是我的actions.class：

```
$userId = $this->getUser()->getGuardUser()->getId();
$userRecord = Doctrine_Query::create()
        ->from ('sfGuardUser s')
        ->where("s.id = '$userId'")
        ->limit('1')
        ->execute();
$userDept = $userRecord['department_title'];        
$this->facultyAdminFind = Doctrine_Query::create()
        ->from ("Faculty a")
        ->where("a.notables LIKE ?", "%$userDept%")
        ->execute(); 
```

在进行了一些故障排除之后，我知道我正在从 sfGuardUser 表中提取正确的 ID 和正确的记录。我似乎无法从 sfGuardUser 记录中提取部门名称。循环什么也没有。

如果我改变 $userDept = $userRecord['department_title']; 到 $userDept = "工程";

**更新以下问题：**

我正在获取用户 ID，然后询问该 ID 的部门标题。我可以使用 getGuardUser() 获取 id，但不能获取 'department_title' 对吗？如果是这样，该语法会是什么样子？

我确信有一个部门名称并且没有拼写错误。我实际上是从这个 backwrds 开始验证所有被拉取的变量

首先我这样做：

```
$this->facultyAdminFind = Doctrine_Query::create()
        ->from ('sfGuardUser s')
        ->where("s.id = '$userId'")
        ->limit('1')
        ->execute(); 
```

它在循环中返回了正确的记录，我能够在模板中使用 $item['department_title"] 来正确调用部门标题。所以我知道我得到了正确的用户 ID 并将正确的记录调用到 $userRecord 中。

此外，在 Faculty::notables 内部有带有 Engineering 的字符串。这就是我这样做的原因：

```
$userDept = "Engineering"; 
```

而且我能够获得工程界所有记录的结果。

**这就是我发现的有效方法：**

根据 ProdigitalSon，我能够查看模型并弄清楚如何从用户表中提取部门标题。这是有效的。

```
$userId = $this->getUser()->getGuardUser()->getDepartmentTitle();
    $this->facultyAdminFind = Doctrine_Query::create()
            ->from ("Faculty a")
            ->where("a.notables LIKE ?", "%$userId%")
            ->execute(); 
```

**更新：**

我了解到您不应该修改 sfGuard 架构，因为如果您更新插件，您将丢失专用架构。我在主模式中添加了一个新类，并在 sf_guard_user 和 department_title 之间建立了工作关联。

问题是我回到了第一方，试图从数组中获取 department_title。这是添加的架构：

```
MyUserProfile:
  columns:
    id: { type: integer, primary: true, autoincrement: true }
    sf_guard_user_id: { type:integer }
    department_title: { type: string(255) }
    # ... other column definitions
  relations:
    User:
     class: sfGuardUser
     foreignType: one
     foreignAlias: Profile
     local: sf_guard_user_id
     onDelete: CASCADE 
```

这是应该工作的查询（在我的脑海中）。

```
//pulls department limited records for faculty admin
    $userId = $this->getUser()->getGuardUser()->getId();
    $usergetDept = Doctrine_Query::create()
            ->from('MyUserProfile d')
            ->where("d.sf_guard_user_id = '$userId'")
            ->execute();

    $userDept = $usergetDept['department_title'];
    $this->facultyAdminFind = Doctrine_Query::create()
            ->from ("Faculty a")
            ->where("a.notables LIKE ?", "%$userDept%")
            ->execute(); 
```

这是在提取每条记录，而不仅仅是具有部门标题的记录。我可以通过多重连接更轻松地做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:10:41.023

突出的第一件事是，当您已经拥有用户时，为什么还要查询用户。您不需要`sfGuardUser`再次查询您已经从呼叫中获得了该记录`myUser::getGuardUser()`。

那么接下来的事情是你确定你正在使用的记录有一个`department_title`属性集吗？您确定您没有在架构或代码段中拼错列名吗？我们确定您正在使用的值`sfGuardUser::department_title`实际上与 中的某些记录匹配`Faculty::notables`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:36:30.180

这就是我解决从 MyUserProfile 类获取部门标题问题的方法

将关系添加到架构后，您可以像这样调用记录：

```
 $getProfile = $this->getUser()->getProfile();

    $userDept = $getProfile['department_title'];
    $this->facultyAdminFind = Doctrine_Query::create()
            ->from ("Faculty a")
            ->where("a.notables LIKE ?", "%$userDept%")
            ->execute(); 
```

# listview - Javafx ListView 刷新

> ID：11055140
> 
> 赞同：3
> 
> 时间：2012-06-15T17:00:33.267
> 
> 标签：listview, javafx-2

有没有办法在 Javafx 2.1 中强制 ListView 刷新而不重新加载列表并更改所选值？

可观察列表由字符串组成，因此更改它们的值是不可行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T17:30:08.990

尝试：

```
...
ObservableList<String> olist = ... 
ListView<String> listv = ...
...
listv.setItems(null); 
listv.setItems(olist); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:52:16.520

用 Property like 包装字符串值`SimpleStringProperty`并更改此属性的值应该是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-02T11:48:22.013

我用：

```
private static final ObservableList<String> lists = FXCollections.observableArrayList();
...

synchronized(lists) {
        List<String> lsts = new ArrayList<>();
        lsts.addAll(lists);
        lists.clear();
        lists.addAll(lsts);            
    } 
```

# objective-c - 如何知道应用程序在哪个 Mac OS 上运行？

> ID：11055146
> 
> 赞同：8
> 
> 时间：2012-06-15T17:01:10.993
> 
> 标签：objective-c, xcode, macos, cocoa, osx-mountain-lion

我在一些项目中看到过：

```
#if .....
    code...
#endif 
```

但我现在找不到它......
例如，如果应用程序在 10.8 上运行，则应用程序执行 1 件事，否则应用程序执行其他操作。用什么代码检查它是否在 10.8 上运行？
谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-15T18:13:14.097

你可能问错了问题。除非在极少数情况下，您不应该关心用户正在运行的系统版本。相反，您应该检查您感兴趣的特定事物是否可用。

例如，如果 Apple 在您想要使用的 Mac OS X 10.9 中引入了一个 MagicHologram 类，您不需要检查用户是否正在运行 Mac OS X 10.9。相反，您检查 MagicHologram 类是否可用。如果是，您可以使用它。如果没有，则不可用。甚至不知道为什么。也许他们正在运行 10.8。但也许是五年后，Apple 决定完全放弃 MagicHologram 课程。

（另外，请记住，您需要弱链接到提供 MagicHologram 类的库 HologramKit。）

同样，如果他们向 NSString 引入新方法，而不是检查操作系统版本，您会检查 NSString 是否知道新方法。

也就是说， NSApplication.h 包含一个名为`NSAppKitVersionNumber`. 您可以将此与常量进行比较，例如`NSAppKitVersionNumber10_7`（应该注意）是 1138 之类的数字，而不是 10.7。只有少数地方是合适的，主要是类是私有的和未记录的，但在记录并成为 SDK 的公共部分的一部分之前进行了重大更改。此外，如果您想避免此后已修复的特定错误，这可能会有所帮助。

回顾一下：

1.  检测单个类和方法，它们应该涵盖 99.44% 的案例。
2.  使用`NSAppKitVersionNumber`and`NSAppKitVersionNumber10_7`来涵盖类或方法检测对您不利的情况。
3.  前两点涵盖了所有*正常*情况。你不应该再往前走了。但是，如果您必须有基于人性化版本的行为，请查看下面的 abarnert 的答案。这是获取它们的最明智的方法。
4.  不要使用`operatingSystemVersionString`，它被明确列为不安全的解析。

参考资料/更多信息：

*   [SDK 兼容性指南](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html)“如果您希望您的应用程序针对特定版本或多个版本的 iOS 或 Mac OS X，请阅读此文档。”
    *   [使用基于 SDK 的开发](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-SW6)描述如何使用弱链接类、方法和函数来支持在多个版本的操作系统上运行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-15T19:21:18.697

一个快速的方法是：

```
if ( NSAppKitVersionNumber >= NSAppKitVersionNumber10_7 ) {

    // Do stuff for Lion or later
} 
```

更多[在这里](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html)。

您可以在 NSApplication.h 中查看所有可用的常量，您可以通过在 Xcode 中使用 Open Quickly... (Cmd-Shift O) 来获得这些常量。

如果您愿意，头文件提供了一些令人惊讶的有趣阅读材料。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T23:31:47.477

正如其他人在上面所说的（我会选择 Steven Fisher 的答案），您通常实际上并不想获得版本号。

而且，如果您只需要与主要的 OS X 版本进行比较，直到您正在使用的当前 SDK 的版本，NSAppKitVersionNumber（如 Monolo 的答案）是正确的方法。

如果您出于某种原因确实需要获取版本号（例如，用于记录有关您的用户的分析，以便您可以决定何时停止支持 10.6.0-10.6.5），请按照以下步骤操作：

```
#import <CoreServices/CoreServices.h>
SInt32 majorVersion, minorVersion, bugFixVersion;
Gestalt(gestaltSystemVersionMajor, &majorVersion);
Gestalt(gestaltSystemVersionMinor, &minorVersion);
Gestalt(gestaltSystemVersionBugFix, &bugFixVersion); 
```

对于 10.7.3，这给出了 majorVersion = 10、minorVersion = 7、bugFixVersion = 3。

10.7 文档删除了直接建议 Gestalt 作为获取 OS 版本的方式的段落，但它仍然没有被弃用或遗留，也没有其他建议。事实上，获取此信息的所有其他方式（解析 -[NSProcessInfo operatingSystemVersionString]、在“kern.osrelease”上调用 sysctlbyname 并将 Darwin 内核版本转换为 OS X 版本等）在某处都明确地被反指示。所以，如果你真的想这样做，这就是这样做的方法。

请记住，正如 1989 年 System 6.0.4 的发行说明所说，这个新 API 可能不是永久性的，可能会在未来版本的操作系统中被删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T18:06:18.237

您可以从`uname -r`命令（实际上是内核版本，尽管它很容易映射到 Mac OS X 版本）、`sw_vers`提供版本名称、版本和构建标识符的命令或`Gestalt()`函数（在当前Mac OS X 的版本，无论如何）。最安全的方法可能`sw_vers`是以易于解析的稳定格式读取其输出。

请注意，您可能不想知道您使用的操作系统版本。您可能想要做的是测试特定功能是否可用。您可以通过弱链接框架、弱类引用或检查类是否响应适合您感兴趣的功能的选择器来做到这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T08:03:00.863

正如 Steven Fisher 所说，您不应该检查系统版本，而是检查要使用的类或方法的可用性。

检查特定类是否可用

```
if ([NSHologram class]) {
   // Create an instance of the class and use it.
} else {
   // The Hologram class is not available.
} 
```

要检查特定方法是否可用，请使用

```
NSString* hologramText = @"Hologram";
if ([hologramText respondsToSelector:@selector(convertHologram)]) {
    [hologramText convertHologram];
} 
```

然而，对于方法检查，该方法必须在您构建应用程序的系统上可用，否则您将收到编译错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T02:13:05.600

这是我如何做的代码。我喜欢这种方式，主要是因为我不必 A) 依赖 NSTask 或 B) 依赖许多进程可以访问的任何文件 I/O。

```
static NSString* const kVarSysInfoVersionFormat  = @"%@.%@.%@ (%@)";
static NSString* const kVarSysInfoKeyOSVersion = @"kern.osrelease";
static NSString* const kVarSysInfoKeyOSBuild   = @"kern.osversion";

- (NSString *) _strControlEntry:(NSString *)ctlKey {

    size_t size = 0;
    if ( sysctlbyname([ctlKey UTF8String], NULL, &size, NULL, 0) == -1 ) return nil;

    char *machine = calloc( 1, size );

    sysctlbyname([ctlKey UTF8String], machine, &size, NULL, 0);
    NSString *ctlValue = [NSString stringWithCString:machine encoding:[NSString defaultCStringEncoding]];

    free(machine); return ctlValue;
}

- (NSString *) getOSVersionInfo {

    NSString *darwinVer = [self _strControlEntry:kVarSysInfoKeyOSVersion];
    NSString *buildNo = [self _strControlEntry:kVarSysInfoKeyOSBuild];
    if ( !darwinVer || !buildNo ) return nil;

    NSString *majorVer = @"10", *minorVer = @"x", *bugFix = @"x";
    NSArray *darwinChunks = [darwinVer componentsSeparatedByCharactersInSet:[NSCharacterSet punctuationCharacterSet]];

    if ( [darwinChunks count] > 0 ) {

        NSInteger firstChunk = [(NSString *)[darwinChunks objectAtIndex:0] integerValue];
        minorVer = [NSString stringWithFormat:@"%ld", (firstChunk - 4)];
        bugFix = [darwinChunks objectAtIndex:1];

    } return [NSString stringWithFormat:kVarSysInfoVersionFormat, majorVer, minorVer, bugFix, buildNo];
} 
```

享受！

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-06-15T17:55:03.650

您可以像这样获得操作系统版本：

```
NSString *version = [[NSProcessInfo processInfo] operatingSystemVersionString];

NSLog(version); 
```

输出：

![截屏](../Images/584d8986cc2bd1d3c386d77dcae7e076.png)

* * *

我看到你想得到一个版本。可以这样做：

```
NSString *version = [[NSProcessInfo processInfo] operatingSystemVersionString];

NSRange range = NSMakeRange(8, 4);
NSString *justVersion = [version substringWithRange: range];

NSLog(@"%@", justVersion); 
```

结果：

![截屏](../Images/62531548d9290918434b5f2c16ba5755.png)

并用于检查：

```
if ([justVersion isEqualToString:@"10.7"]) {
    code...
}
else {
    ...
} 
```

# vb.net - 如何在 VB.NET 中获取正在运行的进程名称列表？

> ID：11055147
> 
> 赞同：9
> 
> 时间：2012-06-15T17:01:15.840
> 
> 标签：vb.net, process

我试图找出应用程序的实例（不是 vb.net）是否已经在运行 - 因为我想启动它，但如果它已经在运行，我不想启动它。我找到了一个检查进程是否正在运行的解决方案：

```
Dim proc As Integer = Process.GetProcessesByName(ProcessName).GetUpperBound(0) + 1 
```

如果 >=1（或只是进程号）则返回 True。

我的问题是，这是一个第三方应用程序，它的进程名称不仅仅是一个名称，它还包含一个版本号（我可能在运行时不知道），而且它似乎还添加了一个 *32（所以可能a *64 如果它安装在 x64 中？）。

我需要按名称获取正在运行的进程列表，并测试“processname”是否是该名称的子字符串。但是我没有成功获得名称列表，只有进程ID。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T17:11:07.377

> 我需要按名称获取正在运行的进程列表，并测试“processname”是否是该名称的子字符串。

你可以使用：

```
Dim procExists as Boolean = Process.GetProcesses().Any(Function(p) p.Name.Contains(processName)) 
```

这将查看所有进程，如果当前正在执行的进程中存在任何*包含*`procExists`的进程，则将值设置为 True 。这应该处理未知版本号的存在以及如果您在 64 位操作系统上运行可能发生的情况（这是 WOW64 标志，表示它是在 64 位操作系统上运行的 32 位进程）。 *`processName``*32`*

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T17:03:14.013

您可以像这样遍历正在运行的进程：

```
For Each p As Process In Process.GetProcesses()
   Debug.WriteLine(p.ProcessName)
Next 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T18:18:39.520

其他方式：

```
 Dim psList() As Process
    Try
        psList = Process.GetProcesses()

        For Each p As Process In psList
            Console.WriteLine(p.Id.ToString() + " " + p.ProcessName)
        Next p

    Catch ex As Exception
        Console.WriteLine(ex.Message)
    End Try
    Console.ReadKey() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-23T06:33:50.937

刚刚尝试了 Reed Copesy 发布的答案，这似乎改变了，对我有用的是：

```
Dim procExists as Boolean = Process.GetProcesses().Any(Function(p) p.ProcessName.Contains(processName)) 
```

也可以按名称检索数组并直接检查是否包含在进程数组中：

```
Process.GetProcessesByName(processName).Length > 0 
```

谢谢！*

# php - PHP在文件中写入制表符？

> ID：11055153
> 
> 赞同：49
> 
> 时间：2012-06-15T17:01:52.297
> 
> 标签：php, string, csv, tsv

我如何简单地写出一个包含真实标签的文件？`tab`表示真实`tab`，**不是空格**。如何写`tab`或者什么是真正的角色`tab`？

例如这里：

```
$chunk = "a,b,c";
file_put_contents("chunk.csv",$chunk); 
```

我应该用什么字符来`tabs`代替`Commas (,)`那里？在输出文件中，分隔的单词之间
应该是真实的。`tabs`

*   真正的选项卡意味着，当我们在文本编辑器中按下**键****时，我们会得到一个真正的宽阔空间。`<tab>`**

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-06-15T17:03:18.973

制表符是`\t`. 注意使用`"`代替`'`。

```
$chunk = "<html>\t<head>\t\t<title>\t</head>"; 
```

[PHP 字符串 - 双引号](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

> 如果字符串用双引号 (") 括起来，PHP 将为特殊字符解释更多转义序列：
> 
> ...
> 
> \t 水平制表符（HT 或 ASCII 中的 0x09 (9)）

* * *

另外，让我推荐用于编写 CSV 文件的[fputcsv()](http://www.php.net/manual/en/function.fputcsv.php)函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-15T17:03:51.720

使用`\t`双引号将字符串括起来：

```
$chunk = "abc\tdef\tghi"; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-15T17:09:23.233

这应该这样做：

```
$chunk = "abc\tdef\tghi"; 
```

[这](http://www.ebrueggeman.com/blog/generating-php-comma-csv-and-tab-delimited-files)是一篇文章的链接，其中包含更广泛的示例。

# ios - UITabBarController -shouldAutorotateToInterfaceOrientation: 警告

> ID：11055155
> 
> 赞同：0
> 
> 时间：2012-06-15T17:01:57.083
> 
> 标签：ios, ios5, uitabbarcontroller, warnings, lldb

我从 lldb 收到以下警告：

> 对于所有界面方向，视图控制器从 -shouldAutorotateToInterfaceOrientation: 返回 NO。它应该支持至少一个方向。

这是一个标准的 UITabBarController，不是子类，也没有类别。为什么我会收到此警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:18:57.627

UITabBarController的默认实现返回*所有*`shouldAutorotateToInterfaceOrientation:`选项卡允许的方向。

 *因此，您要么有一个视图控制器（用于选项卡），它对所有方向都返回 NO，要么您有冲突的方向（一个视图只支持横向，另一个只支持纵向）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:07:36.697

它应该至少支持一个方向，检查方向是否为纵向将返回是。return toInterFaceOrientation == UIInterfaceOrientationPortrait 应该会有很大帮助。*

# php - 运行页面的 PHP URI 结构

> ID：11055160
> 
> 赞同：0
> 
> 时间：2012-06-15T17:02:20.567
> 
> 标签：php, url, include, uri

拥有一个网站的自定义 URI 结构，而不是每个以 .php 结尾的页面。

例如，如果我希望 example.com/balderdash 包含（balderdash.php）这就是如何做到的。

```
if($_SERVER["REQUEST_URI"] == 'balderdash'){ include('balderdash.php') } 
```

在 index.php 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:03:34.290

您需要的是“htaccess url 重写”。

请阅读：[http ://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

# c# - EF Include 总是为第一个导航属性生成 INNER JOIN

> ID：11055162
> 
> 赞同：5
> 
> 时间：2012-06-15T17:02:30.363
> 
> 标签：c#, asp.net, .net, linq, entity-framework

我正在使用 Code First 方法并具有以下模型：

```
public class Person
{
    public int ID {get; set;}
    public string Name {get; set;}

    public int CurrentStationID {get; set;}
    public virtual Station CurrentStation {get; set;}

    public int CurrentTransportationID {get; set;}
    public virtual Transportation CurrentTransporation {get; set;}
} 
```

我的控制器中的以下代码：

```
Models.Person model = myDBContext.Persons
                        .Include("CurrentStation")
                        .Include("CurrentTransportation")
                        .Where(p => p.ID == 1)
                        .FirstOrDefault(); 
```

即使DB 表 "persons" 中存在**(1, "Testname", 0, 0)的行，"model" 也会为 NULL。**

上面生成了一个 SQL 语句`[...] INNER JOIN stations AS [...] LEFT JOIN transportations [...]`。对于我的所有模型，它总是为第一个导航属性执行 INNER JOIN，无论底层表/类型是什么或我指定它们的顺序，它始终是第一个 Include()。

我**不**想要一个 INNER JOIN，而是一个 LEFT JOIN，因为“CurrentStation”不需要在数据库中。

为什么英孚这样做？？？我不明白，但我想了解。我没有在任何属性上指定 [Required] 属性，但它的行为就像我做了一样。

不幸的是，没有 [Optional]-attribute 并且通过 OnModelCreate-override 执行“HasOptional()”对我来说不是一个选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T17:10:28.133

如果我没记错的话，为了允许属性是可选的或在数据库意义上可以为空，您必须使该属性可以为空。因此，对于您的 CurrentStationId 属性，您可以尝试如下声明它：

```
 public int? CurrentStationId {get;set;} 
```

**更新** 这篇[文章](https://stackoverflow.com/questions/4290802/entity-framework-include-with-left-join-is-this-possible)可能对您的情况有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:52:10.590

首先应该让您烦恼的是数据库的设计。如果您可以拥有`CurrentStationId = 0`并且同时没有`Station`，`Id = 0`则意味着您的数据库不使用参照完整性。

参照完整性是使用 EF 的先决条件。如果您想在实体之间建立关系，请确保数据库中存在这种关系并且强制执行引用约束，否则我相信您无论如何都会遇到许多其他意外行为。

如果你可以让 person 没有`Station`唯一正确的方法是让`CurrentStationId`列和属性可以为空。因为 EF 认为约束是在数据库中强制执行的（并且您不能将其关闭），所以它可以使用 INNER JOIN 并且您不能在不使 FK 为空的情况下更改它。如果您无法在数据库中更改它，请不要在 EF 中映射关系 - 或者最好不要使用 EF。

如果您可以控制数据库，而且如果您以这种方式设计它，您应该停止编码并返回白板以考虑设计并改进它以遵循数据库设计最佳实践。它将为您节省很多将来可能遇到的问题。

# python - 将制表符分隔的值写入文件

> ID：11055165
> 
> 赞同：8
> 
> 时间：2012-06-15T17:02:41.970
> 
> 标签：python

从一个文件中，我取了一行，使用`split()`. 但我必须将这些列写为输出文件中的制表符分隔值。

可以说我有`l[1], l[2], l[3], l[4], l[5]`......总共5个条目。我怎样才能使用python实现这一点？而且，我无法将`l[1], l[2], l[3], l[4], l[5]`值写入输出文件。

我尝试了这两个代码，都不起作用（我使用的是 python 2.6）：

代码1：

```
with open('output', 'w'):
   print l[1], l[2], l[3], l[4], l[5] > output 
```

代码2：

```
with open('output', 'w') as outf:
   outf.write(l[1], l[2], l[3], l[4], l[5]) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T17:05:41.680

`with`您可以在表示您正在写入的文件的语句中使用参数。从那里，使用`.write()`. 这假定其中的所有内容`l`都是一个字符串，否则您必须用`str()`.

```
with open('output', 'w') as f:
    f.write(l[1] + "\t" + l[2] + "\t" + l[3] + "\t" + l[4] + "\t" + l[5] + "\n") 
```

或者，更有效地，您可以使用`.join()`：

```
with open('output', 'w') as f:
    f.write('\t'.join(l[1:]) + '\n') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T17:04:30.280

该`write()`方法将字符串作为其第一个参数（不是可变数量的字符串）。尝试这个：

```
outf.write(l[1] + l[2] + l[3] + l[4] + l[5]) 
```

或者更好：

```
outf.write('\t'.join(l) + '\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:04:35.883

```
outf.write('{0[1]}\t{0[2]}\t{0[3]}\t{0[4]}\t{0[4]}\n'.format(l)) 
```

将数据写入分隔的文件选项卡。请注意， write 不会自动附加 a `\n`，因此如果您需要它，您必须自己提供它。

此外，最好使用以下命令打开文件`with`：

```
with open('output', 'w') as outf:
   outf.write('{0[1]}\t{0[2]}\t{0[3]}\t{0[4]}\t{0[4]}\n'.format(l)) 
```

因为这会在您完成或遇到异常时自动为您关闭文件。

# vbscript - 如何使用 vb 脚本获取当前文化？

> ID：11055166
> 
> 赞同：0
> 
> 时间：2012-06-15T17:02:44.690
> 
> 标签：vbscript

我需要使用 vb 脚本获取当前的文化（系统当前选择的语言）。

我们使用控制面板中的“区域和语言”设置来设置操作系统的语言。我需要使用 VB 脚本获取所选语言。

请回复。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:22:52.930

尝试使用[GetLocale](http://msdn.microsoft.com/en-us/library/d457t70w%28v=vs.84%29.aspx) () 函数。它返回[LCID](http://msdn.microsoft.com/en-us/library/ms912047%28WinEmbedded.10%29.aspx)。

# html - HTML5 拖放：如何定位克隆和原始元素？

> ID：11055170
> 
> 赞同：7
> 
> 时间：2012-06-15T17:03:03.693
> 
> 标签：html, css, drag-and-drop

我想将类名应用于被拖动的“幽灵”元素，而不是被克隆的原始元素。这是我为该`dragstart`事件设置的功能：

```
function dragStart(event) {
    event.originalEvent.dataTransfer.effectAllowed = 'move';
    event.originalEvent.dataTransfer.setData("text/plain", event.target.getAttribute('id'));
    console.log(event);
    console.log('Dragging...');
    $(event.currentTarget).addClass('dragging');
    return true;
} 
```

该`$(event.currentTarget).addClass('dragging');`行将`.dragging`类添加到原始元素而不是克隆的拖动元素。

如何正确定位两者？

**编辑**

希望尽可能使用原生 HTML5 来处理这个问题。最好不要使用 jQuery 插件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T04:57:32.173

在原始元素上添加类，然后在拖动开始后将其删除（[演示](http://jsfiddle.net/jefferyto/Ect4B/)）：

```
function dragStart(event) {
    var el = $(this);

    event.originalEvent.dataTransfer.effectAllowed = 'move';
    event.originalEvent.dataTransfer.setData("text/plain", event.target.getAttribute('id'));

    el.addClass('dragging');
    setTimeout(function() { el.removeClass('dragging'); }, 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T22:56:38.917

我不是一个狂热的 JavaScript 脚本编写者，但我在尝试为您找到一些东西时偶然发现了这个页面，它可能是您需要的，特别是代理拖动版本：

[http://threedubmedia.com/demo/drag/](http://threedubmedia.com/demo/drag/)

```
$('#demo6_box')
        .bind('dragstart',function( event ){
                if ( !$(event.target).is('.handle') ) return false;
                return $( this ).css('opacity',.5)
                        .clone().addClass('active')
                        .insertAfter( this );
                })
        .bind('drag',function( event ){
                $( event.dragProxy ).css({
                        top: event.offsetY,
                        left: event.offsetX
                        });
                })
        .bind('dragend',function( event ){
                $( event.dragProxy ).remove();
                $( this ).animate({
                        top: event.offsetY,
                        left: event.offsetX,
                        opacity: 1
                        })
                }); 
```

这都是 jQuery。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-06T20:11:56.463

我知道这个问题很老，但是您需要做的是根据[https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer创建/使用可见元素（或图像/画布等） #setDragImage.28.29](https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer#setDragImage.28.29)

因此，您可以获取当前拖动的元素（`this`通常在事件上下文中），克隆它，将其添加到 dom（确保它是“可见的”，也就是不`display: none`或`visibility:hidden`），然后您可以对其应用一个类，以便您可以定位拖动的项目本身在 css 中。然后，将该元素添加为第一个参数，`e.dataTransfer.setDragImage()`浏览器将使用它。

请记住稍后将其删除 ( `dragend`) 或以某种方式隐藏它。

这是一个可以看到它的小提琴：http: [//jsfiddle.net/6TDvz/](http://jsfiddle.net/6TDvz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T06:38:52.830

从这行代码：

```
event.originalEvent 
```

似乎您正在使用jquery？所以只要考虑 jquery 让事情变得更容易并且是跨浏览器兼容的。

实现拖动的 HTML5 原生和 jquery 方法（仅使用 javascript）几乎相同。HTML5 仅添加了拖动事件，但没有更多的拖放方法：

**没有jQuery：**

```
function dragStart(event) {
    event.originalEvent.dataTransfer.effectAllowed = 'move';
    event.originalEvent.dataTransfer.setData("text/plain", event.target);//JUST ELEMENT references is ok here NO ID
    console.log(event);
    console.log('Dragging...');

    var clone = event.target.cloneNode(true);
    event.target.parentNode.appendChild(clone);
    event.target.ghostDragger = clone;//SET A REFERENCE TO THE HELPER

    $(clone).addClass('dragging');//NOW YOU HAVE A CLONE ELEMENT JUST USE this and remove on drag stop
    return true;
}

function dragging(event){
  var clone = event.target.ghostDragger;
  //here set clone LEFT and TOP from event mouse moves
}
//ON STOP REMOVE HELPER ELEMENT
function stopDrag(event){
  var clone = event.target.ghostDragger;
  clone.parentNode.removeChild(clone);
} 
```

**使用 jquery：**

```
$( "#draggable" ).draggable({ 
 helper: "clone", //EVEN here you can set the helper you want by defining a funcition
 start:function(event, ui){
   ui.helper.addClass('yourclass');
 }
}); 
```

尽管如此，我会建议使用 jquery ui 进行拖动。有了它，您可以根据需要个性化拖动助手。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T05:45:24.610

我可能遗漏了一些东西，但以下内容对我有用，为原始文本和拖动的文本都提供了黄色背景（通过设置类）。也许在您的特定情况下有些东西给了您一个“幽灵”副本。或者它可能与您已经在使用的少量 jQuery 有关。我只能说，在尝试重现您的问题时，我的简单测试用例实际上运行良好。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Drag Test</title>
    <script>
      function startDrag(event) {
        var orig = document.getElementById('original');
        var dt = event.dataTransfer;

        orig.className += 'dragging';

        dt.effectAllowed = 'move';
        dt.setData('text/plain', 'This text may be dragged');
      }
    </script>

    <style>
      .dragging {
        background-color: yellow;
      }
    </style>
  </head>

  <body>
    <div id="original"  draggable="true" ondragstart="startDrag(event);">
      This text may be dragged.
    </div>
  </body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T21:06:44.423

你说：

> 我想将类名应用于被拖动的“幽灵”元素，而不是被克隆的原始元素

好吧，通过正常的拖放，没有原始元素与克隆元素，只有被拖动的元素。没有看到其余的拖放实现，没有办法给你答案。我们不知道正在调用什么“事件”。如果您的`dragStart`活动是，`HTML5 ondragstart event`那么[本文](http://help.dottoro.com/ljpncnwi.php)可能会帮助您。但是，如果它是由 jQuery 或其他框架创建的自定义事件，那么除非您共享其余代码，否则任何人都无法告诉您如何获取原始元素和克隆元素。

如果您不想依赖 jQuery，那么您将不得不从头开始编写整个拖放功能。以下是一些有关如何执行此操作的教程：

[JavaScript 拖放教程](http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx)

[使用 JavaScript 拖放可排序列表](http://tool-man.org/examples/sorting.html)

[HTML5 拖放](http://www.w3schools.com/html5/html5_draganddrop.asp)

如果我可以提出建议，那就是坚持使用 jQuery。从头开始制作一个跨浏览器兼容的拖放系统需要大量时间。如果您共享其余代码，那么我可以尝试为您提供更具体的答案。

# jquery - 添加关闭按钮以切换框js

> ID：11055178
> 
> 赞同：1
> 
> 时间：2012-06-15T17:03:33.420
> 
> 标签：jquery

我想在此切换框的底部添加一个关闭按钮。有人可以帮我写剧本吗？谢谢。

```
 <td>
    <a href="javascript:void(0)" class="heading">Business Management in the Global Economy <small>(2+2 Program)</small></a>
    <div class="info-hidden info" style="height:380px;">
      <p>
        <b>Program Description:</b><br />
        Some Text.......
        <br />
        <a href="/programs/bachelors-in-business-management-in-the-global-economy.php" class="nudge">
          <b>Learn More &#9658;</b>
          <a class="close" href="javascript:void(0)">Close &#9746;</a>
        </a>
      </p>
    </div>
  </td> 
```

脚本看起来像这样 - 非常简单。

```
// slide toggle
  $(".info").hide();
    //toggle the componenet with class msg_body
    $(".heading").click(function()
    {
      $(this).next(".info").slideToggle(300);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:18:30.183

我用这个……

```
// slide toggle
$(".info").hide();
//toggle the componenet with class msg_body
$(".heading").click(function() {
    $(this).next(".info").slideToggle(400);
});
$(".closeToggle").click(function() {
    $(this).parent(".info").slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:06:24.433

```
$('a.close').click(function(e){
    e.preventDefault();
    $(this).parents('div.info-hidden.info').slideToggle();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gzyGq/2/)**。

# regex - 如何告诉 wget 下载文本文件（在这种情况下），其中包含文本文件中间的特定字符串

> ID：11055180
> 
> 赞同：0
> 
> 时间：2012-06-15T17:03:37.040
> 
> 标签：regex, string, search, find, wget

我正在上一门软件开发课程，正在尝试在所有软件开发中练习“DRY”原则，所以为了练习，我想让 wget 下载其中的所有文件（http://fusionplant.com/ archive/textfiles/) 目录，其中包含“冒犯性”一词。

这是其中之一的示例：http: [//fusionplant.com/archive/textfiles/gnu_fortune/gnu_fortune_offensive_astrology](http://fusionplant.com/archive/textfiles/gnu_fortune/gnu_fortune_offensive_astrology)

有什么方法可以做到这一点吗？我想他们会使用正则表达式，但我在网上找不到任何足够可比的例子来完成它。

这是我尝试使用的命令，它是错误的。甚至没有接近，但这里是：

```
 wget -A '*offensive*.txt' http://fusionplant.com/archive/textfiles/gnu_fortune 
```

它没有返回错误信息，只是下载了索引文件

```
wget -A '*offensive*.txt' http://fusionplant.com/archive/textfiles/gnu_fortune
--2012-06-15 11:15:07--  http://fusionplant.com/archive/textfiles/gnu_fortune
Resolving fusionplant.com... 216.254.119.231
Connecting to fusionplant.com|216.254.119.231|:80... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: http://fusionplant.com/archive/textfiles/gnu_fortune/ [following]
--2012-06-15 11:15:07--  http://fusionplant.com/archive/textfiles/gnu_fortune/
Reusing existing connection to fusionplant.com:80.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Saving to: “gnu_fortune”

[  <=>                                  ] 14,576      50.4K/s   in 0.3s    

2012-06-15 11:15:08 (50.4 KB/s) - “gnu_fortune” saved [14576] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:34:44.827

你不能这样做。您必须下载文件，然后检查文件是否包含字符串。您不能向服务器发送请求，让它为您执行此操作。

# actionscript-3 - Spark Skins 中的 ScaleGrid 属性有什么作用？

> ID：11055182
> 
> 赞同：0
> 
> 时间：2012-06-15T17:03:50.240
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5, flex-spark

我一直在寻找像 scaleGridLeft 和 scaleGridRight 这样的属性实际上是什么意思，但在任何地方都找不到连贯的解释。一种描述说，如果你有一张图像，你要做的是在该图像中定义一个不受缩放影响的矩形。下面的代码用于垂直滚动条拇指的自定义皮肤。我已将“右”设置为 -1，因为否则拇指放在轨道上时会在其右侧留下太大的间隙。

如果 scrollThumb.png 是 10x331 并且轨道是 16x521，我如何使拇指正确地位于轨道中心，并根据需要进行缩放？

![滚动拇指](../Images/5232a272dff555fadfe26ac176eef653.png) ![在此处输入图像描述](../Images/ac8f64e48c77ed4abcafd9523b1aea03.png)

```
<?xml version="1.0" encoding="utf-8"?>

<!--- The default skin class for the Spark Button component.

   @see spark.components.Button

  @langversion 3.0
  @playerversion Flash 10
  @playerversion AIR 1.5
  @productversion Flex 4
--> 
```

```
<fx:Metadata>
    <![CDATA[ 
    /** 
     * @copy spark.skins.spark.ApplicationSkin#hostComponent
     */
    [HostComponent("spark.components.Button")]
    ]]>
</fx:Metadata>

<!-- states -->
<s:states>
    <s:State name="up" />
    <s:State name="over" />
    <s:State name="down" />
    <s:State name="disabled" />
</s:states>

<s:BitmapImage source="@Embed('assets/scrollThumb.png', scaleGridLeft='2', scaleGridTop='20', scaleGridRight='11', scaleGridBottom='50')" 
               left="0"  top="0" bottom="0" right="-1" />
</s:SparkButtonSkin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:41:24.747

@wovencharlie 提供的链接很有帮助，但答案不正确。

左侧、右侧、顶部和底部的值都是*相对于您要缩放的任何内容的注册点计算的*。这意味着左上角是（0,0）。您使用这些值定义的是矩形，您不关心它是否缩放。换句话说，**不会**缩放的是那个矩形**之外的东西。**

如果我设置 scaleGridLeft='2' 这意味着从 0 到 2 的所有内容都不会缩放。如果我设置 scaleGridTop='5'，这意味着视觉上高于 y 值 5（相对于初始 0,0 注册点，因此任何 y 值小于 5）的所有内容都不会缩放。如果我设置 scaleGridRight='12'，这并不意味着从右侧开始向内移动的像素数。它设置从初始注册点开始的像素数（12），在其右侧创建假想的垂直线资产不会扩展。由于我的拇指资产只有 10 像素宽，因此 12 不是一个好的值并导致奇怪的结果（它似乎想要重新绘制拇指的垂直镜像，延伸到轨道之外）。9 将是合法值。

这就是为什么如果您输入的 scaleGridLeft 数字大于 scaleGridRight 数字，Flash Builder 会告诉您这些是非法值。它们是不可能的——你不能有一个比右值更大的左值，因为它们都是相对于初始值 (0,0) 计算的。

scaleGridBottom 也是如此。它不是从底部向上计算的；它是从 0,0 开始计算的。同样，您的底值不能小于顶值，因此如果您尝试，Flash Builder 会报错。

如果您将 scaleGridTop 设置为（例如）20 并将 scaleGridBottom 设置为 30，那么您并不是在说“不要缩放前 20 和后 30”。您是在说“不要缩放前 20 名*，也不要缩放低于 30 的所有内容*”——即使您的资产是 200 或 300 像素高。换句话说，您只允许缩放 10 个像素。

我相信您可能会遇到错误，因为这小于组件的允许大小（尽管不确定该部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:36:05.810

这些值指的是 scale9 切片。Left 是从左侧开始的像素数，top 是从顶部开始的像素数，right 是从右侧开始向内移动的像素数，bottom 是从底部向上移动的像素数。

如果您尝试缩放圆角框之类的东西并希望保持圆角半径，则使用此选项。以下是一些详细描述 scale9 的链接：

[http://asgamer.com/2009/using-9-slice-scaling-to-retain-shape-while-resizing](http://asgamer.com/2009/using-9-slice-scaling-to-retain-shape-while-resizing)

对于您的滚动条拇指，您可以查看此站点以获取有关如何使用它的一些想法。

[http://dgrigg.com/blog/2010/07/06/flex-spark-list-with-custom-scroll-bar-and-itemrenderer/](http://dgrigg.com/blog/2010/07/06/flex-spark-list-with-custom-scroll-bar-and-itemrenderer/)

# c# - 颜色编码组合框的样式

> ID：11055187
> 
> 赞同：0
> 
> 时间：2012-06-15T17:04:08.770
> 
> 标签：c#, wpf, xaml, styles, datatrigger

我正在尝试将数据触发器添加到默认组合框样式，因此下拉框中的每个文本项都将被分配不同的颜色，并且所选项目也将是该颜色。通过使用此 xaml 代码，我已经成功地对我的数据网格中的文本列项进行了颜色编码：

```
<DataGrid ...>
    <DataGrid.Columns>
        <DataGridTextColumn ...>
            <DataGridTextColumn.CellSyle>
                <Style TargetType="DataGridCell">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=Status}" Value="Accepted">
                            <Setter Property="Foreground" Value="Green"/>
                        </DataTrigger>
                    <Style.Triggers>
                </Style>
            </DataGridTextColumn.CellStyle>
        </DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

但我无法弄清楚如何为组合框执行此操作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:49:46.427

试试这个：

```
<ComboBox x:Name="cb01">
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding Name}">
        <TextBlock.Style>
          <Style TargetType="TextBlock">
            <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Status}"
                                 Value="Accepted">
                        <Setter Property="Foreground"
                                Value="Green" />
                    </DataTrigger>
            </Style.Triggers>
          </Style>
        </TextBlock.Style>
      </TextBlock>
    </DataTemplate>
  </ComboBox.ItemTemplate>
</ComboBox> 
```

# android - 如何在 Android 中取消 AlarmManager

> ID：11055188
> 
> 赞同：0
> 
> 时间：2012-06-15T17:04:21.563
> 
> 标签：android, alarmmanager, android-pendingintent

我有一个闹钟，直到特定的小时和分钟才会响起。但是，一旦到了那个时间，每次我再次启动应用程序时它都会熄灭。（当应用程序启动时，它会重置并检查新警报）。

例如，它将在上午 9 点 48 分响起。在 9:48 之前，没有任何事情发生。但是在 9:48 之后，它会在每次应用程序启动时一直响起（警报是一个简单的状态栏通知）。

这是代码——我哪里出错了？

// 此处设置警报 - 每次应用启动时都会调用此代码

```
public void setAlarm() {
 for (int i : AlarmDays) {

        Calendar cal = Calendar.getInstance();
        if (cal.get(Calendar.DAY_OF_MONTH) > i)
            cal.add(Calendar.MONTH, 1);
        cal.set(Calendar.DAY_OF_MONTH, i);
        cal.set(Calendar.HOUR, 9);
        cal.set(Calendar.MINUTE, 53);
        cal.set(Calendar.SECOND, 1);

        String Name = AlarmNames.get(count);
        count = 0 + 1;

        Intent intent = new Intent(ManageDebts.this, TimeAlarm.class);
        Bundle b = new Bundle();
        b.putString("keyvalue", Name);
        intent.putExtras(b);

        pendingIntent = PendingIntent.getBroadcast(this, i,
                intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                pendingIntent);

    }
 } 
```

TimeAlarm.class

```
public class TimeAlarm extends BroadcastReceiver {

NotificationManager nm;

@Override
public void onReceive(Context context, Intent intent) {

    String DebtName = intent.getStringExtra("keyvalue");

    nm = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    CharSequence from = "Payment Due: " + DebtName;
    CharSequence message = "Update your Balance Now";
    Intent notificationIntent = new Intent(context, ManageDebts.class);
    notificationIntent.getExtras();
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);
    Notification notif = new Notification(R.drawable.icon, "Pay "
            + DebtName + " today!", System.currentTimeMillis());
    notif.setLatestEventInfo(context, from, message, contentIntent);
    notif.defaults = Notification.DEFAULT_SOUND
            | Notification.DEFAULT_LIGHTS;
    notif.flags = Notification.FLAG_SHOW_LIGHTS;
    notif.ledOnMS = 100;
    notif.ledOffMS = 100;
    notif.flags |= Notification.FLAG_AUTO_CANCEL;
    nm.notify(1, notif);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:38:28.867

> 我在哪里设置它以忽略不在该分钟、小时和秒内的任何警报？之前还是之后？

在你的`setAlarm()`方法中。`AlarmDays`在进入循环之前过滤掉一些东西，或者比较它`cal.getTimeInMillis()`是否`System.currentTimeMillis()`是过去的，或者类似的东西。

# php - 为什么 Glob 在 scandir 时不起作用？

> ID：11055195
> 
> 赞同：1
> 
> 时间：2012-06-15T17:04:43.307
> 
> 标签：php

有人可以解释为什么，在这种情况下，scandir 正在获取我的目录，但是 glob 正在获取......好吧，它似乎正在获取路径：

```
$directory = "../../../XXXXXXXXXXXXXX/media/csv"; 
```

使用扫描目录：

```
$files  = scandir($directory);
print_r($files); 
```

结果：

```
Array ( [0] => . [1] => .. [2] => myCsv.csv [3] => index.html ) 
```

使用 Glob：

```
$files  = glob($directory . "*"); # i wanted to select only CSV, but it returned empty. so i placed a *. 
```

结果：

```
Array ( [0] => ../../../XXXXXXXXXXXXXX/media/csv ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:06:00.723

由于您`$directory`的内容类似于`../XXX/media/csv`，因此您需要附加它`/*.csv`以便它成为`../XXX/media/csv/*.csv`（当前是`../XXX/media/csv*`）。

```
$files = glob($directory . "/*.csv"); 
```

# scala - 在Scala中使用reify（获取AST）表达式的最简单方法是什么？

> ID：11055210
> 
> 赞同：38
> 
> 时间：2012-06-15T17:05:51.913
> 
> 标签：scala, macros, scala-2.10

我正在寻找替代方案`-print`或`javap`作为弄清楚编译器在 Scala 中做什么的一种方式。使用新的反射/宏库，`reify`似乎是一个很好的候选者，如retronym 的macrocosm[所示](https://github.com/retronym/macrocosm)`desugar`。它甚至显示了一个人过去是如何做到这一点的，在 M4 之前。

所以问题是，我可以在 Scala 的 REPL 上键入最短/最简单的东西来获取表达式的 AST，后 Scala 2.10.0-M4？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-15T18:52:17.530

以前在 package 中定义的很多东西`scala.reflect.mirror`都移到了`scala.reflect.runtime.universe`：

```
scala> import scala.reflect.runtime.{universe => u}
import scala.reflect.runtime.{universe=>u}

scala> val expr = u reify { 1 to 3 map (_+1) }
expr: reflect.runtime.universe.Expr[scala.collection.immutable.IndexedSeq[Int]] = Expr[scala.collection.immutable.IndexedSeq[Int]](scala.this.Predef.intWrapper(1).to(3).map(((x$1) => x$1.$plus(1)))(immutable.this.IndexedSeq.canBuildFrom))

scala> u show expr.tree
res57: String = scala.this.Predef.intWrapper(1).to(3).map(((x$1) => x$1.$plus(1)))(immutable.this.IndexedSeq.canBuildFrom)

scala> u showRaw expr.tree
res58: String = Apply(Apply(Select(Apply(Select(Apply(Select(Select(This(newTypeName("scala")), newTermName("Predef")), newTermName("intWrapper")), List(Literal(Constant(1)))), newTermName("to")), List(Literal(Constant(3)))), newTermName("map")), List(Function(List(ValDef(Modifiers(<param> <synthetic>), newTermName("x$1"), TypeTree(), EmptyTree)), Apply(Select(Ident(newTermName("x$1")), newTermName("$plus")), List(Literal(Constant(1))))))), List(Select(Select(This(newTypeName("immutable")), newTermName("IndexedSeq")), newTermName("canBuildFrom")))) 
```

此外，可以检查包含一些 Scala 代码的字符串是否是有效的 Scala 表达式，并且 - 更好的是 - 进行一些评估：

**编辑**. 在 2.10.0-RC1 中，一些方法`ToolBox`已被重命名。`parseExpr`现在只是`parse`，`runExpr`现在叫做`eval`。

```
scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> import scala.reflect.runtime.{currentMirror => m}
import scala.reflect.runtime.{currentMirror=>m}

scala> val tb = m.mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@9293709

scala> val tree = tb.parse("1 to 3 map (_+1)")
tree: tb.u.Tree = 1.to(3).map(((x$1) => x$1.$plus(1)))

scala> val eval = tb.eval(tree)
eval: Any = Vector(2, 3, 4) 
```

这里最复杂的是表达式的原始树表示。当一个人想要使用宏时，必须以与 所示相同的方式定义宏`showRaw`。但是使用一些辅助方法，可以定义一些看起来不那么难看的宏实现：

```
object IntMacro {

  import language.experimental.macros
  import scala.reflect.makro.Context
  import scala.reflect.NameTransformer.encode

  def isEven(i: Int): Boolean = macro isEvenImpl

  def isEvenImpl(c: Context)(i: c.Expr[Int]): c.Expr[Boolean] = {
    import c.universe._
    implicit val cc: c.type = c

    val `x = i%2` = Apply(Select(i.tree, op("%")), const(2))
    val `x == 0` = Apply(Select(`x = i%2`, op("==")), const(0))

    c.Expr(`x == 0`)
  }

  def op(s: String)(implicit c: Context): c.universe.TermName =
    c.universe.newTermName(encode(s))

  def const(a: Any)(implicit c: Context): List[c.universe.Literal] =
    List(c.universe.Literal(c.universe.Constant(a)))
}

scala> import IntMacro._
import IntMacro._

scala> isEven(2)
res60: Boolean = true

scala> isEven(3)
res61: Boolean = false 
```

但是现在我们遇到了路径依赖类型的问题——如果我们不想导入它们，我们必须明确地写出它们的路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-08T03:57:23.840

新的 Scala 版本有改进

```
scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> import scala.reflect.runtime.{currentMirror => m}
import scala.reflect.runtime.{currentMirror=>m}

scala> val tb = m.mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@78dc5f15

scala> val tree = tb.parseExpr("1 to 3 map (_+1)")
<console>:10: error: value parseExpr is not a member of scala.tools.reflect.ToolBox[reflect.runtime.universe.type]
       val tree = tb.parseExpr("1 to 3 map (_+1)")
                     ^

scala> val tree = tb.parse("1 to 3 map (_+1)")
tree: tb.u.Tree = 1.to(3).map(((x$1) => x$1.$plus(1)))

scala> val eval = tb.eval(tree)
eval: Any = Vector(2, 3, 4) 
```

# qt - 如何使 QGraphicsItem 在 QGraphicsScene 中显示背景？

> ID：11055214
> 
> 赞同：7
> 
> 时间：2012-06-15T17:06:02.777
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

在 a`QGraphicsScene`中，我有一个背景设置，`QGraphicsItem`上面有几个 s。这些图形项具有任意形状。我想制作另一个QGraphicsItem，即一个圆圈，当放置在这些项目上时，它将基本上显示这个圆圈内的背景，而不是用颜色填充。

这有点像在 Photoshop 中具有多层背景。然后，使用圆形选框工具删除背景顶部的所有图层以显示圆圈内的背景。

或者，查看它的另一种方式可能是设置不透明度，但此不透明度会影响其正下方的项目（但仅在椭圆内）以显示背景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T20:30:01.500

以下可能有效。它基本上扩展了一个法线`QGraphicsScene`，能够仅将其背景渲染到任何`QPainter`. 然后，您的“剪切”图形项目只是将场景背景呈现在其他项目之上。为此，切出的项目必须具有最高的 Z 值。

![截屏](../Images/2ef527e9602b8abe6294c3066dfcee12.png)

```
#include <QtGui>

class BackgroundDrawingScene : public QGraphicsScene {
public:
  explicit BackgroundDrawingScene() : QGraphicsScene() {}
  void renderBackground(QPainter *painter,
                        const QRectF &source,
                        const QRectF &target) {
    painter->save();
    painter->setWorldTransform(
          QTransform::fromTranslate(target.left() - source.left(),
                                    target.top() - source.top()),
          true);
    QGraphicsScene::drawBackground(painter, source);
    painter->restore();
  }
};

class CutOutGraphicsItem : public QGraphicsEllipseItem {
public:
  explicit CutOutGraphicsItem(const QRectF &rect)
    : QGraphicsEllipseItem(rect) {
    setFlag(QGraphicsItem::ItemIsMovable);
  }
protected:
  void paint(QPainter *painter, const QStyleOptionGraphicsItem *, QWidget *) {
    BackgroundDrawingScene *bgscene =
        dynamic_cast<BackgroundDrawingScene*>(scene());
    if (!bgscene) {
      return;
    }

    painter->setClipPath(shape());
    bgscene->renderBackground(painter,
                              mapToScene(boundingRect()).boundingRect(),
                              boundingRect());
  }
};

int main(int argc, char **argv) {
  QApplication app(argc, argv);

  BackgroundDrawingScene scene;
  QRadialGradient gradient(0, 0, 10);
  gradient.setSpread(QGradient::RepeatSpread);
  scene.setBackgroundBrush(gradient);

  scene.addRect(10., 10., 100., 50., QPen(Qt::SolidLine), QBrush(Qt::red));
  scene.addItem(new CutOutGraphicsItem(QRectF(20., 20., 20., 20.)));

  QGraphicsView view(&scene);
  view.show();

  return app.exec();
} 
```

# objective-c - 更新 plist 字典中的布尔值

> ID：11055216
> 
> 赞同：0
> 
> 时间：2012-06-15T17:06:20.513
> 
> 标签：objective-c, boolean, plist, nsmutabledictionary

我正在尝试更新 iphone 应用程序中 plist 字典中的布尔值。plist 字典包含几个字符串和两个布尔值。以下是我当前的代码。

我首先定义了 plist，然后定义了 NSMutableDictionary。当下面的第三行代码运行时，我得到一个错误。

```
NSString *plistFile = [[NSBundle mainBundle] pathForResource:@"Property List" ofType:@"plist"];
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile:plistFile];

[[dict objectForKey:@"Day 1"] setBool:TRUE forKey:@"Bookmarked"]; 
```

该错误突出显示下面的返回语句，并显示以下错误“线程 1：程序收到信号：“SIGABRT”

```
int main(int argc, char *argv[])
{    @autoreleasepool{   
     return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
     }
} 
```

您可以提供的任何帮助将不胜感激。提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:20:47.570

仅仅因为`dict`是可变的并不意味着它的子字典是可变的。也`NSMutableDictionary`没有`setBool:forKey:`办法。

```
NSMutableDictionary *subDict = [[dict objectForKey:@"Day 1"] mutableCopy];
[subDict setObject:[NSNumber numberWithBool:TRUE] forKey:@"Bookmarked"];
[dict setObject:subDict forKey:@"Day 1"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T01:49:58.807

只要 plist 文件不在包中，您就可以修改它的值。

当您在对象中声明布尔属性时，它需要使用“布尔”而不是“布尔”。当您保存文件并尝试再次读取时，这将导致错误。

# java - 如何从带有特殊字符的 POST 调用参数中检索

> ID：11055220
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:06:36.057
> 
> 标签：java, post

我正在向 URL 发送一个`POST`内容类型为的 URL，`application/x-www-form-urlencoded`在`POST`正文参数中我包含一些特殊字符（如“+”或“/”）。这些字符被替换，而不是发送：

> IQEAAAAAAPAwAACkAAgAFBoRs7uBp + QfWhMlIECvWSkYecAmAAEABAAAAAEABwAIAAABN + zvnLkABwAIAAABN / IV97gAAgAIL5fPC5UyYdQABAAgSlVOUFRTRElPUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAEdXMAAQAEAARhMAAAAAgAGFVQMTA4Mi1CTFVTMzA5NjJfMDAAAAAAAAABAAQgAAIAAAAAAAAAAAAwAgBEAAgABJLoupYACAA4MDYCGQCF4DyVJ + rNZIwlm9UN9PgfPa4atwaQouQCGQCDyM0SOtwsvmmIkBVzFdcDM / Lgzb08WII =

它正在发送这个

> IQEAAAAAAPAwAACkAAgAFBoRs7uBp QfWhMlIECvWSkYecAmAAEABAAAAAEABwAIAAABN zvnLkABwAIAAABN / IV97gAAgAIL5fPC5UyYdQABAAgSlVOUFRTRElPUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAEdXMAAQAEAARhMAAAAAgAGFVQMTA4Mi1CTFVTMzA5NjJfMDAAAAAAAAABAAQgAAIAAAAAAAAAAAAwAgBEAAgABJLoupYACAA4MDYCGQCF4DyVJ rNZIwlm9UN9PgfPa4atwaQouQCGQCDyM0SOtwsvmmIkBVzFdcDM / Lgzb08WII =

我将参数存储在 Java 中的 String 变量中。请注意，`+`替换为裸空间，`/`替换为`\/`. 请帮忙。我是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:15:11.763

您可能想尝试对 . 进行 URL 编码`POST`，但如果没有看到您的代码，则无法判断这是否可行。

# c# - 配置 JSON.NET 以忽略 DataContract/DataMember 属性

> ID：11055225
> 
> 赞同：42
> 
> 时间：2012-06-15T17:07:24.863
> 
> 标签：c#, json, json.net, datacontract, datamember

我们在使用 Microsoft JSON 序列化程序和 JSON.NET 的 MVC3 项目上遇到了情况。

每个人都知道微软的序列化器中的 DateTime 基本上被破坏了，所以我们切换到 JSON.NET 来避免这个问题。这很好用，除了我们尝试序列化的一些类是具有 DataContract/DataMember 属性的 POCO。它们是在一个在多个位置引用的程序集中定义的。此外，它们还有一些其他显示属性未标记为 DataMembers 以提高效率。例如，客户

```
[DataContract]
public class Customer
{
   [DataMember]
   public string FirstName { get; set;}
   [DataMember]
   public string LastName { get; set;}
   public string FullName 
   {
       get
       {  return FirstName + " " + LastName; }
   }

} 
```

当这个客户通过 WCF 传递时，客户端可以引用该程序集并使用 FullName 就好了，但是当使用 JSON.NET 序列化时，它会看到 FullName 不是 a`[DataMember]`并且不会序列化它。是否有一个选项可以传递给 JSON.NET 来告诉它忽略一个类已应用属性的事实`[DataContract]`？

**注意：** 在 .NET 中使用 JavaScriptSerializer 对 FullName 属性效果很好，但 DateTimes 被破坏了。我需要 JSON.NET 来忽略此类具有 DataContract/DataMember 属性的事实，并且只执行标准的公共字段序列化，就像它们不存在时一样。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-05-11T12:29:48.187

只需使用 Json.Net 的 OptOut 属性。它将优先于 DataContract。

```
[DataContract]
[JsonObject(MemberSerialization.OptOut)] 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-17T18:02:10.600

正如 Amry 所说，您可以使用自己的 IContractResolver。

不幸的是，Amry 提供的解决方案对我不起作用，下面是我设法开始工作的解决方案：

```
public class AllPropertiesResolver : DefaultContractResolver
{
    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        JsonProperty property = base.CreateProperty(member, memberSerialization);

        //property.HasMemberAttribute = true;
        property.Ignored = false;

        //property.ShouldSerialize = instance =>
        //{
        //    return true;
        //};

        return property;
    }
} 
```

有几行注释，这些不是使我的解决方案工作所必需的，但你永远不知道！

这与 Amry 的解决方案具有相同的用法：

```
var json = JsonConvert.SerializeObject(result, new JsonSerializerSettings {
    ContractResolver = new AllPropertiesResolver()
}); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-28T03:09:32.480

我遇到了一个几乎与您所遇到的问题相关的问题，并通过查看 Json.NET 的代码设法找到了解决方案。所以它可能不是最好的解决方案，但它对我有用。

为此，您需要实现自己的`IContractResolver`. 包含所有参数并忽略所有属性的过度简化实现（不仅包括`DataContract`其他内置 Json.NET 的规则，因此您设置的最初应该影响成员选择的任何选项现在都被此代码覆盖） ：

```
class AllPropertiesResolver : DefaultContractResolver
{
    protected override List<MemberInfo> GetSerializableMembers(Type objectType)
    {
        return objectType.GetProperties()
            .Where(p => p.GetIndexParameters().Length == 0)
            .Cast<MemberInfo>()
            .ToList();
    }
} 
```

这里是代码使用示例：

```
var json = JsonConvert.SerializeObject(result, new JsonSerializerSettings {
    ContractResolver = new AllPropertiesResolver()
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-08T09:17:45.797

根据 Json.NET 文档`[DataMember]`，如果属性也使用 Json.NET 特定属性（例如`[JsonProperty]`）进行注释，则忽略属性。有关详细信息，请参阅[序列化属性文档](http://james.newtonking.com/json/help/index.html?topic=html/SerializationAttributes.htm)：

> *Json.NET 属性优先于标准 .NET 序列化属性，例如，如果 JsonPropertyAttribute 和 DataMemberAttribute 都存在于属性上并且都自定义名称，则将使用来自 JsonPropertyAttribute 的名称。*

该文档仅涵盖 name 属性，但根据我的经验，该`[JsonProperty]`属性也完全隐藏了该属性所做的设置`[DataMember]`。因此，如果对您的情况可行，还可以将 Json.NET 属性添加到应忽略 [DataMember] 注释的属性中。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-09-02T20:35:43.977

如果您想忽略`DataContractAttribute`所有类型的存在而不必添加其他属性，那么[自定义合同解析器](http://www.newtonsoft.com/json/help/html/contractresolver.htm)是正确的解决方案。但是，从 Json.NET 9.0.1开始， [Amry 的解析器](https://stackoverflow.com/a/11697930/3744182)不再起作用。 [Doolali 的解析器可以工作，但它具有序列化](https://stackoverflow.com/a/21836179/3744182)*所有*公共属性的额外副作用，包括标有[`[JsonIgnore]`](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_JsonIgnoreAttribute.htm). 如果您需要一个*仅*忽略存在`DataContractAttribute`但行为类似于默认合同解析器的合同解析器，则可以使用以下内容：

```
public class IgnoreDataContractContractResolver : DefaultContractResolver
{
    static MemberSerialization RemoveDataContractAttributeMemberSerialization(Type type, MemberSerialization memberSerialization)
    {
        if (memberSerialization == MemberSerialization.OptIn)
        {
            type = Nullable.GetUnderlyingType(type) ?? type;

            // Json.NET interprets DataContractAttribute as inherited despite the fact it is marked with Inherited = false
            // https://json.codeplex.com/discussions/357850
            // https://stackoverflow.com/questions/8555089/datacontract-and-inheritance
            // https://github.com/JamesNK/Newtonsoft.Json/issues/603
            // Thus we need to manually climb the type hierarchy to see if one is present.

            var dataContractAttribute = type.BaseTypesAndSelf().Select(t => t.GetCustomAttribute<DataContractAttribute>()).FirstOrDefault(a => a != null);
            var jsonObjectAttribute = type.GetCustomAttribute<JsonObjectAttribute>();

            if (dataContractAttribute != null && jsonObjectAttribute == null)
                memberSerialization = MemberSerialization.OptOut;
        }
        return memberSerialization;
    }

    protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
    {
        var properties = base.CreateProperties(type, RemoveDataContractAttributeMemberSerialization(type, memberSerialization));
        return properties;
    }

    protected override JsonObjectContract CreateObjectContract(Type objectType)
    {
        var contract = base.CreateObjectContract(objectType);
        contract.MemberSerialization = RemoveDataContractAttributeMemberSerialization(objectType, contract.MemberSerialization);
        return contract;
    }
}

public static class TypeExtensions
{
    public static IEnumerable<Type> BaseTypesAndSelf(this Type type)
    {
        while (type != null)
        {
            yield return type;
            type = type.BaseType;
        }
    }
} 
```

您可能希望[缓存合同解析器以获得最佳性能](https://stackoverflow.com/questions/33557737/does-json-net-cache-types-serialization-information/33558665#33558665)。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-15T17:20:48.440

你试过这个吗？

[忽略数据成员属性](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ignoredatamemberattribute.aspx)

# c - 内存中的结构布局数组

> ID：11055232
> 
> 赞同：1
> 
> 时间：2012-06-15T17:07:52.163
> 
> 标签：c, memory

```
 int a[2]; 
```

这在内存中实际上看起来像：

```
 //Assuming int is 2 bytes 

 add=2000, a[0]=124    

 add=2002, a[1]=534 
```

这实际上在内存中看起来如何

```
 struct l {

 struct l    * n;

 long int pad[7];

 };          

 struct l container; 
```

我无法想象。请帮忙！

顺便说一句，这取自[每个程序员应该了解的关于内存的第 3.3.2 节](http://lwn.net/Articles/252125/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:14:42.780

的布局`struct l`如下。正如书中所说，它将占用 32 个字节。

```
 addr   ref
   -----------------
   2000:  n
   2004:  pad[0]
   2008:  pad[1]
     ...
   2028:  pad[6] 
```

在 32 位系统`struct l*`上，指向结构的指针将占用 4 个字节。类型的变量`long int`将占用相同数量的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:15:47.303

假设架构中的指针是 4 个字节，而架构中的 long int 是 4 个字节：

```
struct l {
   struct l    * n;
   long int pad[7];
};

struct l someName; 
```

布局将如下所示：

```
add=2000, someName.n
add=2004, someName.pad[0]
add=2008, someName.pad[1]
...
add=2028, someName.pad[6] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:15:48.740

这只是意味着每次为 struct l 分配内存时，都需要 4 字节（指针）+ 4 字节（假设 long int 是 4 字节）* 7。

所以使用你的系统，它应该是： add=2000 *n add=2004 pad[0] add=2008 pad[1] ...

# iphone - 通过 UIViewController 以编程方式实现 UIView

> ID：11055233
> 
> 赞同：0
> 
> 时间：2012-06-15T17:07:52.950
> 
> 标签：iphone, ios, uiview, uiviewcontroller

我试图了解我必须重写哪些 UIView 方法才能显示某些内容。

我有一个非常简单的应用程序：

1.  有一个 UIViewController

2.  有一个 UIView

3.  UIView 用 View 的大小创建一个离屏图像，并在 drawRect 中绘制图像

问题：

1.  我应该如何创建视图？调用 initWithRect？还是只是初始化？我想以编程方式进行，没有情节提要或笔尖。

2.  UIViewController 设置视图边界时调用 UIView 的什么方法？以及如何获得这些界限（以便能够创建屏幕外图像）。

3.  有人知道我在哪里可以找到 UIImageView 的来源吗？

注意：我已经尝试了 4 天，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:11:59.100

1.) `initWithFrame:`

1.) By default, there is no method that's automatically called when bounds are set. If you subclass the `UIView` you can override the `setBounds` method if you wish.

2.) Sources for `UIImageView`?..The header class is available in the `CoreFoundation.framework`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T16:03:55.433

您需要`-(void)loadView`在自定义 ViewController 类中覆盖：

```
UIView *baseView = [[UIView alloc] init];
self.view = baseView;
[super loadView]; 
```

从那里您可以创建一个自定义 UIView，添加该 ViewController 的视图属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:39:27.250

这就是我在 UIViewController 中使用 UIView 并在 UIViewController 中添加 UIImageView 和 UITextView 作为 UIView 的子视图的方式没有显示 UITextview 的代码，因为您没有在问题中询问它。

```
- (void)viewDidLoad
{
    UIView *baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    [self.view addSubview:baseView];
    [baseView release];

    // Displays UIImageView
    UIImageView* ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 300, 235)];
    self.view.backgroundColor = [UIColor brownColor];

    // load all the frames of our animation
    ImageView.animationImages = [NSArray arrayWithObjects:    
                                    [UIImage imageNamed:@"1a.png"],
                                    [UIImage imageNamed:@"1b.png"],
                                    nil];

    // all frames will execute in 25 seconds
    ImageView.animationDuration = 25; 

    // start animating
    [ImageView startAnimating];
    ImageView.layer.borderWidth = 2;
    ImageView.layer.borderColor = [[UIColor whiteColor]CGColor];
    [ImageView.layer setMasksToBounds:YES];
    [ImageView.layer setCornerRadius:15.0f];

    [baseView addSubview:ImageView]; 
} 
```

希望它可以帮助你。

# c# - 如何在 Azure 网站中调用 xamlx-workflow？

> ID：11055235
> 
> 赞同：0
> 
> 时间：2012-06-15T17:08:00.850
> 
> 标签：c#, wcf, azure, workflow-foundation-4, azure-web-app-service

我正在尝试使用 SDK 1.7 中的新 Azure 网站预览版，并尝试在我将 ia 文件夹放在根目录的 xamlx 文件中调用 WCF 工作流。

在我的本地主机上的模拟器中一切正常，但在云中，`"The resource cannot be found."`当我尝试浏览它时，我只会收到标准错误消息。

我必须做什么才能调用 xamlx 工作流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:14:34.727

当您使用 XAMLX WorkFlow 活动服务时，您需要添加 WCF 服务以公开为服务，以便客户端可以使用它。

例如，您将 StockPriceService.xamlx 作为您的 WorkFlow 活动，然后只需将 WCF 服务添加到您的应用程序并将 SVC 设置为使用 XAMLX，如下所示：

```
<%@ ServiceHost Language="C#" Debug="true" Service="StockPriceService.xamlx" Factory="System.ServiceModel.Activities.Activation.WorkflowServiceHostFactory,System.ServiceModel.Activation,Version=4.0.0.0,Culture=neutral,PublicKeyToken=31bf3856ad364e35"%> 
```

我在我的最新博客[WorkFlow (XAMLX) Service Activity with WCF Service in Windows Azure Websites](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/21/workflow-xamlx-service-activity-with-wcf-service-in-windows-azure-websites.aspx)中解释了这个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:06:35.970

如果它在模拟器中工作并且在您部署到云时它不起作用，则可能是该文件未包含在包中。

您能否通过远程桌面连接到您的实例并查看**E:\sitesroot\0**文件夹？你能在这里看到**XAMLX**文件吗？

# php - Auto refresh when server-side progress is complete?

> ID：11055236
> 
> 赞同：0
> 
> 时间：2012-06-15T17:08:05.073
> 
> 标签：php, javascript, jquery, ajax

Okay, I'm trying to do this a mission form, once visitor presses begin, it pops up a new tab with a registration form ( not my actual website ) after they register, this second website will send something to let me know this visitor completed his registration,

okay but this is not the thing, i want to receive registration result live from the main webpage which the user started the mission from, how to do this without having to refresh specific page several times to check current status, i want to receive it live once registration is completed from the main page

using jquery, javascript or php or just any possibility to do this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:28:51.120

在第一页，您可以使用 $.ajax (http://api.jquery.com/jQuery.ajax/) 将注册信息发布到数据库，然后在第二页检索它（也使用 $.ajax ）。问题是第二页如何知道用户是否在第一页完成了他们的业务（由“window.opener”方法标识）？为此，您可以每隔一秒执行一次 setTimeout() 以查看注册是否已完成。如果是，则从数据库中检索信息。

虽然使用 $.ajax 可能过于依赖用户的互联网连接，我个人觉得它很慢。一种更快的方法是使用 cookie 来检查用户是否已完成注册。

还有一种相对较新的 HTML5 方法，称为“本地存储”，它充当客户端数据库（与 cookie 不同，它可以支持大量数据，您可以将整个注册表单存储在上面）。它也比轮询关系数据库相对快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:11:05.997

You could do it like this:

1.  Listen for the message from the second website
2.  Make the mission form ask your service (every second or what suits your need) with ajax
3.  When the message has arrived, return "true". If it hasn't return "false"
4.  Perform your actions on the client side when the client recieves a "true".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:11:06.477

You'll still need to poll home to check if work is done, because server can't initiate connection to client. To prevent page refresh, use AJAX for polling.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:39:24.727

使用 jQuery `ajax`将注册数据发送到服务器，并在事务（将用户保存到数据库）完成后返回一些响应。在回调函数中抓取它并做进一步的事情（显示消息/重新加载页面的某些部分等......）

所以像这样将您的注册数据发送到服务器页面

```
$(function(){

   $("form").submit(e){
    e.preventDefault();
       $.post("yourRegistrationProcess.php",$("form").serialize(),function(data){
          //You have the response from server in data variable.
          // Do whatever you want next with that.          
       });
   });

}); 
```

假设您`yourRegistrationProcess.php`在将用户注册数据保存到表后从（回显“已保存”；等等）发回一些响应。

# javascript - Rails 3.2.3 JavaScript 突然停止工作

> ID：11055240
> 
> 赞同：0
> 
> 时间：2012-06-15T17:08:25.557
> 
> 标签：javascript, jquery, ruby-on-rails, asset-pipeline

我不确定这是如何发生或为什么发生的，但如果有人可以提出行动方案，我将不胜感激。有什么我可以在控制台中输入的东西来弄清楚它为什么不起作用吗？我已经尝试了几次“捆绑更新”并重新启动了我的服务器，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:03:33.803

所以，我发现了问题所在：我的一个 XXXXXXX.js.coffee 文件中有一个咖啡脚本错误。通过打开 chrome 的 javascript 控制台重新加载页面，我发现这是问题所在。它记录了一个错误并调用了该文件。我打开文件并修复了错误。

# css - CSS字体覆盖问题/谷歌网络字体问题？

> ID：11055241
> 
> 赞同：0
> 
> 时间：2012-06-15T17:08:28.013
> 
> 标签：css

我的问题很简单，我将 body 样式中的字体设置为 google webfont：

```
body {
  font: normal 100% 'Poiret One', 'Trebuchet MS', sans-serif;
  color: Grey;
  ...
} 
```

然后稍后我想将类中的文本设置为 Trebuchet MS

```
#currentpage_content {
  font: 'Trebuchet Ms', Sans-Serif;
  color: red;
  ...
} 
```

结果，文本上的颜色`#currentpage_content`是正确的（红色），但字体肯定仍然是“Poiret One”。**字体似乎没有从`'Poiret One'`变为`'Trebuchet MS'`。**我还稍微交换了一些东西，使 Trebuchet MS 成为默认设置，但我遇到了同样的问题（即使我将许多类字体设置为 Poiret One，一切都是 Trebuchet MS。）

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:12:45.370

You have to use `font-family` instead of just `font`

```
font-family: 'Trebuchet Ms', Sans-Serif; 
```

or specify all the required parameters for `font`

```
font: normal 100% 'Trebuchet Ms', Sans-Serif; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:23:30.987

尝试使用“font-family”而不是“font”。另外，以防万一，使用双引号而不是单引号。

一些很好的 CSS 调试工具和资源是：

*   firebug，这是一个firefox的插件

*   [http://www.w3schools.com/cssref/](http://www.w3schools.com/cssref/)

*   [http://css-tricks.com/](http://css-tricks.com/)

祝你好运！并继续提问。这是最好的学习方式。

# design-patterns - 避免在转换/翻译期间切换类型的设计模式

> ID：11055243
> 
> 赞同：6
> 
> 时间：2012-06-15T17:08:35.147
> 
> 标签：design-patterns

我正在尝试实现一个首选项系统，程序员可以在其中指定首选项名称、类型（布尔值、整数、字符串等）以及可选的默认值。我一直在思考并且无法想出的是用于存储到磁盘/从磁盘加载的通用解决方案。我希望设计足够通用以处理多种格式（即文本文件、Windows 注册表或 Apple 的属性列表）。简单的解决方案是为每种存储格式制作转换器，并在已经选择存储格式时沿线的某个地方制作转换器，遍历首选项并在其类型上切换大小写。

我被告知在一个类型上做一个 switch-case 不是一个好的解决方案，我理解为什么：如果我添加一个类型，我需要去修改所有这些 switch-case 块。那么我应该怎么做呢？通常的答案是让正在检查其类型的对象实现一个公共接口并知道如何自己执行操作。

但这对我来说似乎很荒谬，让偏好值知道如何将自己存储在文本文件、Windows 注册表和 Apple 属性列表中。这只是解决了问题。如果我添加一个新的变压器，我需要去修改所有类型，而不是添加一个需要我去修改转换器的新类型！

我想这是一个常见的设计问题，但我找不到任何好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:00:19.667

访问者模式的经典使用。尽管您有时会看到更通用的模式表达，但这里有一些通过访问者模式的持久层的伪代码。

注意，首选项不需要知道如何保存自己，只需将自己传递给存储机制即可：

```
abstract BasePreference
{
    abstract Persist(PreferenceStorage ps);
}

NumericPreference : BasePreference
{
   string Name;
   int Value;
   int Default

   Persist(PreferenceStorage ps)
   {
      ps.Save(this);
   }

}

StringPreference : BasePreference
{
   string Name;
   string Value;
   string Default

   Persist(PreferenceStorage ps)
   {
      ps.Save(this);
   }   
}

DateRangePreference : BasePreference
{
   string Name;
   DateTime StartOfRange;
   DateTime EndOfRange;
   DateTime DefaultStartOfRange;
   DateTime DefaultEndOfRange;

   Persist(PreferenceStorage ps)
   {
      ps.Save(this);
   }   
} 
```

接下来，PreferenceStorage 利用方法重载来允许为每个 pref 子类型运行单独的代码。类型上没有开关块：

```
abstract PreferenceStorage 
{
   abstract void Save(NumericPreference pref);
   abstract void Save(StringPreference pref);
   abstract void Save(DateRangePreference pref);   
} 
```

最后，PreferenceStorage 的子类负责处理机制或保存数据：

```
XmlPreferenceStorage : PreferenceStorage
{
   void Save(NumericPreference pref)
   {
      // save number to xml 
   }

   void Save(StringPreference pref)
   {
      // save string to xml 
   }   

   void Save(DateRangePreference pref)
   {
      // save date range to xml 
   }      
}

RegistryPreferenceStorage : PreferenceStorage
{
   void Save(NumericPreference pref)
   {
      // save number to registry 
   }

   void Save(StringPreference pref)
   {
      // save string to registry 
   }   

   void Save(DateRangePreference pref)
   {
      // save date range to registry 
   }      
} 
```

（Uggg，为什么这种格式如此糟糕？抱歉缩进不好，通常在 SO 上很好的代码格式）

# java - 从java执行命令提示符的命令以创建jar文件

> ID：11055245
> 
> 赞同：0
> 
> 时间：2012-06-15T17:08:43.653
> 
> 标签：java, jar, runtime, cmd, exec

我尝试使用插入到 java 代码中的命令行创建 jar 文件，但它不起作用。java代码是这样的：

```
try {
   Runtime a = Runtime.getRuntime();
   a.exec("cmd cd E:/My data/Final Project/Uji Coba bikin Jar & E: & jar cfm D:/EditingDiniApp.jar META-INF/MANIFEST.MF EditingDini META-INF net org");
} catch (IOException ex) {
   Logger.getLogger(JarFactory.class.getName()).log(Level.SEVERE, null, ex);
} 
```

我将命令复制到 cmd.exe 并且它可以工作，但是如果它嵌入到 java 中，它将无法工作。

有什么我想念的吗？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:13:54.740

编写代码以通过java代码在文件中创建一个jar。将其命名为 xxx.bat。线程.sleep(5000);

然后使用exec命令执行bat文件。这对我有用。

**编辑：**

```
String s = "cmd cd E:/My data/Final Project/Uji Coba bikin Jar & E: & jar cfm     
D:/EditingDiniApp.jar META-INF/MANIFEST.MF EditingDini META-INF net org";
FileOutputStream fos = new FileOutputStream("abc.bat");
fos.write(s.getBytes());
fos.close();
Thread.sleep(2000);
Runtime.getRuntime().exec("abc.bat");
Thread.sleep(2000); 
```

顺便说一句，我认为你这样做是为了好玩。但是，如果您是 java 新手，我建议您使用 Ant。[Ant 用于在 java http://ant.apache.org](http://ant.apache.org)中打包应用程序、部署等

# php - 当 $x 和 $y “不相等”时，“$x == $y”在 PHP 中为真？

> ID：11055248
> 
> 赞同：-3
> 
> 时间：2012-06-15T17:08:52.500
> 
> 标签：php, if-statement, equals-operator

几十年来，我一直是一名开发人员——使用多种编程语言。我无法在 PHP 中使用非常简单直接的“if”语句：

```
if($groupminc == $groupmaxc)

    {
     echo "AFTER1:GROUPMIN==>" . $groupminc . "\n";
     echo "AFTER1:GROUPMAX==>" .  $groupmaxc . "\n";
     $groupmsg = $groupminc . " Participant";
    }
  else
   {
     echo "AFTER2:GROUPMIN==>" . $groupminc . "\n";
     echo "AFTER2:GROUPMAX==>" .  $groupmaxc . "\n";
     $groupmsg = $groupminc . " to " . $groupmaxc . " Participants";
   } 
```

即使 $groupminc 和 $groupmaxc 显然**不相等，我也会发生 AFTER1 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:10:58.500

尝试`===`：

```
if($groupminc === $groupmaxc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:17:38.927

向我们展示带有变量初始化的完整代码。

或者只是尝试以下操作：

```
echo ($groupminc !== $groupmaxc ? $groupminc.' to ' : '').$groupmaxc.' Participants'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:18:11.173

你必须更清楚，你在 $groupminc 和 $groupmaxc 中得到什么值。否则可能会出现`==`and`===`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:14:42.890

我认为您在这里发现的问题是 the`==`和`===`运营商之间的区别。[this other stackoverflow question](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)有一个很好的答案

# c++ - 使用 c++ 在 Mac OS X 上编写 GUI 应用程序

> ID：11055249
> 
> 赞同：1
> 
> 时间：2012-06-15T17:08:53.187
> 
> 标签：c++, macos, user-interface

我需要在 Mac OS X 上使用 c++ 向用户显示一些 Gui。我知道使用 Cocoa 我需要使用 Obj-c++，但我想知道是否有一种方法可以仅使用 c++ 向用户显示非常简单的 Gui .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:10:58.430

您可以尝试 Gtk+ 或 Qt 库，我相信这两个库都支持 OS X

以下是它们的链接： Qt：http: [//qt.nokia.com/products/](http://qt.nokia.com/products/) Gtk+：[http ://www.gtk.org/](http://www.gtk.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:56:21.647

如果您不介意您的应用程序仅限于 32 位模式（并且您享受痛苦；^）），您始终可以使用 MacOS/X 的旧[Carbon API](http://en.wikipedia.org/wiki/Carbon_%28API%29)。（它们是 C API，但因此很容易从 C++ 应用程序调用）

# sql - 想要查询以查找数据库中丢失的号码

> ID：11055256
> 
> 赞同：0
> 
> 时间：2012-06-15T17:09:38.657
> 
> 标签：sql, oracle, oracle11g, query-optimization

我`part`在 Oracle DB 中有一个包含一些演示数据的表，如下所示：

```
ID    NUMBER     DESCRIPTION
1     T00001     test
2     T00002     test
3     T00003     test
4     T00004     test
5     T00008     test
6     SG0001     test
7     SG0002     test
8     SG0003     test
9     SG0004     test
10    SG0006     test 
```

该列`NUMBER`定义了具有不同预定义前缀和自动递增数字后缀的不同类别部分。现在在 DB 中丢失了一些数字，因此连续性被打破。我想要一个性能完美的 SQL 查询或 PL-SQL 函数来列出丢失的数字：

eg：对于上述演示数据。应返回以下数据：

```
 Category1 start with T: T00005,T00006,T00007 
 Category1 start with SG: SG0005 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:13:23.707

有很多选择。这被称为“岛屿和差距”问题。尝试查看以下资源（大多数都可以在 Oracle 和 SQL 服务器中使用。有些可能需要调整）：

[http://msdn.microsoft.com/en-us/library/aa175780(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa175780(v=sql.80).aspx)

或者

[http://www.sqlservercentral.com/articles/Advanced+Querying/anefficientsetbasedsolutionforislandsandgaps/1619/](http://www.sqlservercentral.com/articles/Advanced+Querying/anefficientsetbasedsolutionforislandsandgaps/1619/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:43:37.033

新加坡：

```
WITH t AS ( 
    SELECT 
        0 as start_n, 
        p.a as end_n 
    FROM (
        SELECT MAX(TO_NUMBER(SUBSTR("NUMBER", 3))) a FROM Part p2 
        WHERE "NUMBER" LIKE 'SG%') p
)
SELECT 
    'SG' || LPAD(r.cur_num, 4, '0') AS missing_expr
FROM 
    (SELECT t.start_n + level - 1 AS cur_num FROM t CONNECT BY t.start_n + level - 1 <= t.end_n) r
WHERE 
    NOT EXISTS(
        SELECT * FROM part p WHERE p."NUMBER" = 'SG' || LPAD(r.cur_num, 4, '0')
    )
ORDER BY missing_expr ASC; 
```

对于 T：

```
WITH t AS ( 
    SELECT 
        0 as start_n, 
        p.a as end_n 
    FROM (
        SELECT MAX(TO_NUMBER(SUBSTR("NUMBER", 2))) a FROM Part p2 
        WHERE "NUMBER" LIKE 'T%') p
)
SELECT
    'T' || LPAD(r.cur_num, 5, '0') AS missing_expr
FROM 
    (SELECT t.start_n + level - 1 AS cur_num FROM t CONNECT BY t.start_n + level - 1 <= t.end_n) r
WHERE 
    NOT EXISTS(
        SELECT * FROM part p WHERE p.number = 'T' || LPAD(r.cur_num, 5, '0')
    )
ORDER BY missing_expr ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:11:49.217

对于 T 用途：

```
 select 'T' || substr('0000' || to_char(r.rn),length(to_char(r.rn)-1))
    from (select rownum rn from part 
        where rownum <= (select max(to_number(substr(p.number,2))) from part p 
                         where p.number like 'T%'
                        )
       ) r
     where 
      'T' || substr('0000' || to_char(r.rn),length(to_char(r.rn)-1)) 
      not in (select p.number from part p where p.number like 'T%'); 
```

对于 SG 使用：

```
select 'SG' || substr('000' || to_char(r.rn),length(to_char(r.rn)-1))
    from (select rownum rn from part 
      where rownum <= (select max(to_number(substr(p.number,3))) from part p 
                       where p.number like 'SG%'
                      )
     ) r
where 
  'SG' || substr('000' || to_char(r.rn),length(to_char(r.rn)-1)) 
  not in (select p.number from part p where p.number like 'SG%'); 
```

有几点需要注意：

1）我正在使用表 PART 来获取 rownum 值。如果有足够的行，任何表都可以使用。如果您使用这种方法，请确保您使用的表格足够大以提取所需的值范围。USER_OBJECTS 也可以工作。PART 可能没有足够的值来处理。

2) NUMBER 作为列名似乎会给您带来问题。它是 Oracle 中的保留字。在我的测试中，我使用了不同的列名。

# c# - 如何使用 saveFileDialog 在 C# 中保存图像？

> ID：11055258
> 
> 赞同：1
> 
> 时间：2012-06-15T17:09:43.690
> 
> 标签：c#, image, savefiledialog

> **可能重复：**
> [使用 savefiledialog 保存图像时出现问题](https://stackoverflow.com/questions/11053398/issue-while-saving-image-using-savefiledialog)

我在 C# 中使用 Windows 窗体。我应该如何使用 saveFileDialog？我有图片框，图片框上有一张图片，我想保存它。加载的图像是 bmp。我想将其保存为 4 种格式之一：bmp、jpeg、png、tiff。我阅读了一些关于 MDSN 的注释并尝试了它，但我可能做错了什么。所以我最好问问应该怎么写？应该如何编写方法 **private void saveFileDialog1_FileOk(object sender, CancelEventArgs e)**以及应该如何看起来像属性**saveFileDialog.Filter**？谢谢

编辑：
我尝试过的：
[使用 savefiledialog 保存图像时出现问题](https://stackoverflow.com/questions/11053398/issue-while-saving-image-using-savefiledialog)

EDIT2：
我试过这个过滤器

```
Filter = bmp (*.bmp)|*.bmp|jpeg (*.jpeg)|*.jpeg|png (*.png)|*.png|tiff (*.tiff)|*.tiff 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-15T17:22:23.343

您可以像这样使用 SaveFileDialog：

```
SaveFileDialog sfd = new SaveFileDialog();
sfd.Filter = "Images|*.png;*.bmp;*.jpg";
ImageFormat format = ImageFormat.Png;
if (sfd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    string ext = System.IO.Path.GetExtension(sfd.FileName);
    switch (ext)
    {
        case ".jpg":
            format = ImageFormat.Jpeg;
            break;
        case ".bmp":
            format = ImageFormat.Bmp;
            break;
    }
    pictureBox1.Image.Save(sfd.FileName, format);
} 
```

# c# - wp7的通讯录应用

> ID：11055263
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:10:19.477
> 
> 标签：c#, windows-phone-7

我试图为 wp7 创建一个联系人应用程序。在应用程序启动时，我可以获取联系人列表以及联系人号码，但如果我点击联系人号码，我将无法拨打该号码。下面是 xaml 中用于获取联系号码的列表框，我为列表框使用了点击功能-

```
<ListBox ItemsSource="{Binding Path=PhoneNumbers}" FontSize="64" Height="100"  Margin="0,50,0,0" Tap="ListBox_Tap">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                       <TextBlock Grid.Column="2" Text="{Binding Path=PhoneNumber, Mode=OneWay}" />
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

但是在点击事件中-

```
PhoneCallTask PhoneTask = new PhoneCallTask();
PhoneTask.PhoneNumber = **Don't know what to write here!!!**
PhoneTask.Show(); 
```

谁能帮我这个？提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:22:43.367

你让生活变得比实际更艰难。

一些事情：
1\. 我相信 AddressChooser 任务只能让您访问显示名称和所选联系人的地址。你最好使用 Mango 附带的 Contact API。[http://msdn.microsoft.com/en-us/library/hh286416(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh286416(v=vs.92).aspx)
2\. 如果继续使用AddressChooser，请使用事件参数绑定在AddressChooser_Completed 方法中获取的数据。无需重新导航到您的页面并订阅 onNavigated 事件。

看起来您需要图像，因此您确实想使用新的联系人 API。他们为您提供更多信息并汇总来自所有来源（即 Facebook、Google）的联系人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:25:09.273

使用 ListBox 的 SelectedItem 属性，您可以在点击后获取来电者的号码。

# c# - C# - 使用以前在此处发布的代码时出错

> ID：11055266
> 
> 赞同：0
> 
> 时间：2012-06-15T17:10:29.770
> 
> 标签：c#

我正在尝试使用此处答案中的代码：[Directory.Move 不起作用（文件已存在）](https://stackoverflow.com/questions/2553008/directory-move-doesnt-work-file-already-exist)

这正是我需要的方法，但是当我尝试将它添加到我的代码中时，该行

`Directory.CreateDirectory(folders.Target);`

有红色下划线的单词“Target”，错误是“'object'不包含'Target'的定义，并且找不到接受'object'类型的第一个参数的扩展方法'Target'（你错过了吗？ using 指令或程序集引用？）”

谁能帮我摆脱那个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:13:04.200

尝试`Stack`改变`Stack<Folders>`

```
var stack = new StackStack<Folders>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:13:01.300

`Folders.Target`在这个类中定义

```
public class Folders
{
    public string Source { get; private set; }
    public string Target { get; private set; }

    public Folders(string source, string target)
    {
        Source = source;
        Target = target;
    }
} 
```

# javascript - WinJS 处理挂起状态

> ID：11055268
> 
> 赞同：0
> 
> 时间：2012-06-15T17:10:33.587
> 
> 标签：javascript, windows-8, winjs

我这里有个小问题，我需要一些帮助。我正在使用 HTML 和 JavaScript 开发 Windows 8 Metro 应用程序，并且由于我已从 Consumer Preview 迁移到 Release Preview，因此在调试它时似乎无法将应用程序的状态更改为挂起。

问题是当我单击调试栏中的“暂停”按钮时，应用程序状态从“正在运行”变为“未响应”。

因此，我无法找到调试我的解决方案的解决方案，尤其是调试我的应用程序以测试我的`app.oncheckpoint`函数调用的代码是否表现良好。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:35:08.527

我试过了，效果很好。你能提供更多细节吗？你用的是哪个模板？您是否尝试过使用该模板的新项目？

您正在做的事情可能会导致这种情况。

# java - NetBeans 平台：TopComponent - 默认情况下如何浮动？自定义位置打开单独的窗口？

> ID：11055269
> 
> 赞同：0
> 
> 时间：2012-06-15T17:10:38.083
> 
> 标签：java, window, netbeans-platform

我一直在尝试找到一种方法让我的应用程序中的所有 TopComponents 默认浮动。这意味着对于新构建，当应用程序启动时，Screen1TopComponent 被分配到输出位置并且是浮动的。现在，我有两种情况：

Screen1TopComponent 被分配到位置“输出”（预定义的之一），当应用程序启动时，它被停靠。如果我右键单击并选择浮动，窗口会浮动，但如果我单击应用程序的主体，它不会消失。

Screen2TopComponent 分配给位置“smallWindow”，这是我创建的自定义位置，默认情况下是浮动的，但是当我启动应用程序时，我已经停靠 Screen1 和浮动 Screen2，单击 Screen1，将隐藏 Screen2。

截图：http: [//i.imgur.com/zyVYU.png](http://i.imgur.com/zyVYU.png)

我的问题真的是这样的：

*   默认情况下如何使 TopComponent 浮动？如果方法是像我一样为它创建一个自定义位置，那么......
*   有没有办法让它浮动，但仍然是应用程序主框架的一部分，在某种意义上它不显示为 2（如屏幕截图中所示）。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:21:19.790

看来我必须将以下行添加到我的 xml

```
<active-tc id="Screen2TopComponent"/> 
```

# java - RFID、Keyboard Wedge 和 Java

> ID：11055271
> 
> 赞同：0
> 
> 时间：2012-06-15T17:10:45.037
> 
> 标签：java, keyboard, rfid, wedge

com 端口上有大量 RFID 教程，但 USB 上没有。有关于 C# 的描述与键盘楔，但不适用于 java。

我有一个键盘楔，“认为那是 ac# 术语”它基本上将 id 作为击键。我需要验证键盘输入是否来自 rfid 标签。

我从 ebay 得到了阅读器，没有配置工具，也没有 sdk 或 api。但自动工作，就好像它从键盘打字一样。

我在 ac# 答案中找到的一个建议是

*目前，我正在通过附加到 KeyPress 事件并寻找一系列包含刷卡标记字符的非常快速的按键来处理此问题。*

看起来很有希望，但不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:17:12.563

I have done similar work in JavaScript to read magnet card swipes. You will need to measure the time between key press events. If the time is under a THRESHOLD (you might need to determine this experimentally), then its the wedge reader, so append the pressed key to your input string. Otherwise, its a human, so reset the state.

This is a rough example of how you might accomplish this:

```
private String input = "";
private long lastPress = 0;

public void onKeyPress(Event event) {
   if(lastPress - System.currentTimeInMillis() < THRESHOLD) {
     lastPress = System.currentTimeInMillis();
     input += event.getKey();
   } else {
     lastPress = 0;
     input = "";
   }
} 
```

This is just a starting point. Your particular application may require additional conditions like checking for sentinels and what not to help determine if you are in a wedge read or not.

# javascript - How to Split Table nicely in JSP

> ID：11055284
> 
> 赞同：1
> 
> 时间：2012-06-15T17:12:00.317
> 
> 标签：javascript, html, spring, jsp, struts

I have created a table for displaying books be signed out/in of an department. There are sorted on: Name, Date. Every so often (after some check-ins and check outs are made) the books are inventoried to confirm how many are available (and numbers are corrected according).

I currently have a table that displays all of the books sorted by Name, Date. But since there are a lot of rows I was hoping to have collapsible section based on when this type of book was inventoried.

Desired:

```
Name |  Date | Count | Action
-----------------------------
- First Foo Section -
Foo    SomeD     +3    check-in
Foo    SomeD     -1    check-out
Foo    SomeD     5     inventoried
+ Another Foo Section
+ Bar Section 
```

Current Code:

```
<c:forEach var='item' items='${bookLogs}'>
            <tr>
                <td>${f:replaceNewLineWithBR(f:escapeHtml(item.name))}</td>
                <td><c:out value='${item.date.formattedValue}'/></td>
                <td>${f:replaceNewLineWithBR(f:escapeHtml(item.count))}</td>
                <td>${f:replaceNewLineWithBR(f:escapeHtml(item.actionType))}</td>
            </tr>
    </c:forEach> 
```

Should I do a test on item.actionType? Or should I pass bookLogs as a list of lists for the different collapsing sections in the table?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:59:31.860

我上面的评论没有回答你的问题，但这里有一个关于如何做到这一点的教程[http://www.a2ztechguide.com/2011/07/javascript-expand-collapse-table-rows.html](http://www.a2ztechguide.com/2011/07/javascript-expand-collapse-table-rows.html)。

很久以前我用数据库做了这个，现在我们使用 xml 并显示我们需要的内容并不好玩。

上面的链接做得很好，并解释了如何使用 javascript 进行展开和折叠。您上面的代码在正确的轨道上，但还没有完全到位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:43:42.167

我建议您为客户使用广泛可用的基于 JS 的表格/网格解决方案。

[http://www.omnisdata.com/omnigrid/](http://www.omnisdata.com/omnigrid/)

[http://dhtmlx.com/docs/products/dhtmlxGrid/index.shtml](http://dhtmlx.com/docs/products/dhtmlxGrid/index.shtml)

和许多其他人。我个人使用过 Omnigrid，发现它值得投入几个小时来提出这种可以适应未来需求和当前趋势的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:28:42.930

看看 Bootstrap，它有一些非常棒的特性，尤其是表格。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# mysql - MySQL 如何加快这个 SELECT 查询？

> ID：11055287
> 
> 赞同：4
> 
> 时间：2012-06-15T17:12:08.990
> 
> 标签：mysql, optimization, select

我有一个超过 900 万行的非常大的表，在我的软件中，我需要在循环中快速对其进行选择查询。问题是查询需要将近 4 秒才能完成。这是其中一个查询（它们都是相似的，因为它们都有相同的 WHERE 子句，这会减慢它们的速度：

```
SELECT MIN(id)
FROM `04c1Tg0M`
WHERE `tried` = 0; 
```

我将尝试过的列用作布尔值。该值为 1 或 0。这是该查询的 EXPLAIN：

```
--------+--------------------------+
| id | select_type | table    | type  | possible_keys | key  | key_len | ref  | rows    | Extra                    |
+----+-------------+----------+-------+---------------+------+---------+------+---------+--------------------------+
|  1 | SIMPLE      | 04c1Tg0M | index | NULL          | pdex | 158     | NULL | 9275107 | Using where; Using index |
+----+-------------+----------+-------+---------------+------+---------+------+---------+--------------------------+ 
```

这是表结构：

```
CREATE TABLE `04c1Tg0M` (
    `id` int(20) NOT NULL AUTO_INCREMENT,
    `username` varchar(50) NOT NULL,
    `tried` tinyint(1) DEFAULT '0',
    PRIMARY KEY (`id`),
    KEY `pdex` (`username`,`id`,`tried`)
) ENGINE=MyISAM AUTO_INCREMENT=9275108 DEFAULT CHARSET=utf8 
```

这是显示索引的输出：

```
| Table    | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| 04c1Tg0M |          0 | PRIMARY  |            1 | id          | A         |     9275107 |     NULL | NULL   |      | BTREE      |         |
| 04c1Tg0M |          1 | pdex     |            1 | username    | A         |     9275107 |     NULL | NULL   |      | BTREE      |         |
| 04c1Tg0M |          1 | pdex     |            2 | id          | A         |     9275107 |     NULL | NULL   |      | BTREE      |         |
| 04c1Tg0M |          1 | pdex     |            3 | tried       | A         |     9275107 |     NULL | NULL   | YES  | BTREE      |         |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

这是相关查询的输出：

```
+---------+
| MIN(id) |
+---------+
|       1 |
+---------+
1 row in set (3.76 sec) 
```

我需要大幅减少查询时间。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:15:12.730

您应该在`(tried, id)`.

您已经添加了一个索引，`(username,id,tried)`但是该索引不能有效地用于您编写的查询，因为该字段`tried`不是索引中的第一项。

* * *

从手册页[如何 MySQL 使用索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)：

> MySQL 对这些操作使用索引：
> 
> *   查找特定索引列的`MIN()`或值。这由预处理器优化，该预处理器检查您是否正在使用索引中之前出现的所有关键部分。在这种情况下，MySQL 为每个or表达式执行单个键查找并将其替换为常量。如果所有表达式都替换为常量，则查询立即返回。例如：`MAX()``key_col``WHERE key_part_N = constant``key_col``MIN()``MAX()`
>     
>     
>     
>     SELECT MIN(key_part2),MAX(key_part2) FROM tbl_name WHERE key_part1=10;

请特别注意，该`WHERE`子句必须引用出现在您希望计算or的列*之前*的列，这就是您当前索引没有有效使用的原因。`MIN``MAX`

* * *

> 我需要在循环中快速对其进行选择查询

您确定需要循环查询吗？您是否考虑过将循环移入数据库？也许您真正需要的是加入？发送一个获取大量数据的单个查询比发送许多只获取少量数据的小查询要好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:18:39.300

在列上添加索引`tried`应该可以加快查询速度。MySQL 对这些操作使用索引：

查找特定索引列 key_col 的 MIN() 或 MAX() 值。这是由预处理器优化的，该预处理器检查您是否在索引中 key_col 之前出现的所有关键部分上使用 WHERE key_part_N = constant。在这种情况下，MySQL 为每个 MIN() 或 MAX() 表达式执行单个键查找，并将其替换为常量。如果所有表达式都替换为常量，则查询立即返回。例如：

SELECT MIN(key_part2),MAX(key_part2) FROM tbl_name WHERE key_part1=10;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T10:50:38.633

如果您在`tried`列上添加索引，您的查询应该会加快。

您可以使用类似的命令

```
create index tried_ix1 on 04c1Tg0M (tried); 
```

附带说明一下，如果您在 InnoDb 表上应用索引，还请考虑是否应该聚集该索引。例如，如果您要以特定的（可能已排序的）顺序访问大量表记录，可能是一个报告，那么请考虑根据该报告的排序要求创建一个聚集索引。

# macos - Clear growl notifications from the commandline

> ID：11055290
> 
> 赞同：1
> 
> 时间：2012-06-15T17:12:34.990
> 
> 标签：macos, growl

How can I clear growl notifications from the command line?

I have a server running all my unit tests and when an error/failure arrives I get a growl notification with the number of errors (also a little arduino light next to my desk changes color), so when I fix the error I want to automatically clear the growl errors. Is there a way to send growl a message or run something in the command line to clear them?

I could be evil and just kill growl and restart it. I have the latest version bought in the appstore and I am using osx/lion if that helps

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:00:53.717

我相信这不能从 GAB/GNTP 层完成，但绝对可以通过 AppleEvents 完成。

有关 Growl Control Suite 的详细信息，请参阅[http://growl.info/documentation/applescript-support.php#growlcontrol](http://growl.info/documentation/applescript-support.php#growlcontrol)。示例脚本展示了如何执行所有您可以执行的操作，包括关闭所有打开的通知。

如果您不知道如何从命令行运行 AppleScript，请参阅 osascript 命令。

# android - ActionBar - Android 平板电脑 2.3 和 4.0

> ID：11055295
> 
> 赞同：1
> 
> 时间：2012-06-15T17:12:58.230
> 
> 标签：android, android-fragments, compatibility, actionbarsherlock, android-actionbar

我正在开发一个针对同时运行 2.3 和 4.0 的平板电脑的 Android 应用程序，因此我需要同时支持这两个版本。

我找到了支持片段的支持库，但是我如何使用 ActionBar，因为它仅在 Android 3.0+ 中可用，而在 2.3 中不可用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:14:45.183

使用[ActionBarSherlock](http://actionbarsherlock.com/)。它只需要您做很少的工作并且维护得很好。

另请参阅：[早期 sdk 版本中 ActionBar 的等价物是什么？](https://stackoverflow.com/questions/6031774/what-is-the-equivalent-of-actionbar-in-earlier-sdk-versions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T09:55:53.077

现在，您还可以使用 Android 支持包中的 ActionBarCompat 库。它的 v7 版本现在支持[ActionBar](http://developer.android.com/reference/android/support/v7/app/ActionBar.html)。[Android 开发团队发布了一个非常有用的关于使用 ActionBarCompat](http://youtu.be/6TGgYqfJnyc)的介绍视频

# java - JPanel 添加到 JFrame 后不显示

> ID：11055297
> 
> 赞同：1
> 
> 时间：2012-06-15T17:13:02.390
> 
> 标签：java, swing, jframe, jpanel

我必须设置一个基本的 JAVA 应用程序，包括基于 swing 的 GUI。我的想法是创建一个 JFrame 和不同的 JPanel，并根据用户输入来更改显示的 JPanel。运行我的应用程序后，会显示 JFrame，但不会显示 JPanel 的内容。我认为到这里它应该是海峡前进......但似乎不是。希望你能给我一个提示：）

这是我的主要内容：

```
public class Client {
    public static void main(String[] args) {
        MainWindow window = new MainWindow();
        window.setVisible(true);

        LoginView pane = new LoginView();
        window.getContentPane().add(pane);

        window.invalidate();
        window.repaint();
    }
} 
```

我的主窗口：

```
package client;

public class MainWindow extends javax.swing.JFrame {
    public MainWindow() {
        initComponents();
    }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 352, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 250, Short.MAX_VALUE)
        );
        pack();
    }
} 
```

我的登录视图：

```
package client.views;

public class LoginView extends javax.swing.JPanel {
    public LoginView() {
        initComponents();
    }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jLabel1 = new javax.swing.JLabel();
        jLabel1.setText("Login");
        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(jLabel1)
                .addContainerGap(345, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(jLabel1)
                .addContainerGap(264, Short.MAX_VALUE))
        );
    }
    private javax.swing.JLabel jLabel1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:52:35.423

您知道，除了调用`revalidate()`and之外`repaint()`，我会做的另一件事是`add()`设置一个新的，而不是调用当前内容窗格。

**我认为您的问题与将组件添加到当前内容窗格的方式不正确有关。**我认为这里就是这种情况，因此，使用该`setContentPane()`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:04:54.573

作为替代方案，用于`CardLayout`更改面板。

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Client {

    public static void main(String[] args) {
        JFrame window = new JFrame();
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final CardLayout cl = new CardLayout();
        final JPanel cards = new JPanel(cl);
        cards.add(new LoginView(), "Login");
        cards.add(new MainView(), "Main");
        window.add(cards);
        JPanel control = new JPanel();
        control.add(new JButton(new AbstractAction("Login") {

            @Override
            public void actionPerformed(ActionEvent e) {
                cl.show(cards, "Main");
            }
        }));
        window.add(control, BorderLayout.SOUTH);
        window.pack();
        window.setLocationRelativeTo(null);
        window.setVisible(true);
    }
}

class MainView extends javax.swing.JPanel {

    public MainView() {
        initComponents();
    }
    ...
}

class LoginView extends javax.swing.JPanel {

    public LoginView() {
        initComponents();
    }
    ...
} 
```

# python - 多处理全局变量更新未返回给父级

> ID：11055303
> 
> 赞同：44
> 
> 时间：2012-06-15T17:13:18.650
> 
> 标签：python, multiprocessing

我正在尝试从子进程返回值，但不幸的是这些值是不可取的。因此，我在线程模块中成功使用了全局变量，但在使用多处理模块时无法检索子进程中完成的更新。我希望我错过了什么。

最后打印的结果总是与给定 vars`dataDV03`和`dataDV04`. 子进程正在更新这些全局变量，但这些全局变量在父进程中保持不变。

```
import multiprocessing

# NOT ABLE to get python to return values in passed variables.

ants = ['DV03', 'DV04']
dataDV03 = ['', '']
dataDV04 = {'driver': '', 'status': ''}

def getDV03CclDrivers(lib):  # call global variable
    global dataDV03
    dataDV03[1] = 1
    dataDV03[0] = 0

# eval( 'CCL.' + lib + '.' +  lib + '( "DV03" )' ) these are unpicklable instantiations

def getDV04CclDrivers(lib, dataDV04):   # pass global variable
    dataDV04['driver'] = 0  # eval( 'CCL.' + lib + '.' +  lib + '( "DV04" )' )

if __name__ == "__main__":

    jobs = []
    if 'DV03' in ants:
        j = multiprocessing.Process(target=getDV03CclDrivers, args=('LORR',))
        jobs.append(j)

    if 'DV04' in ants:
        j = multiprocessing.Process(target=getDV04CclDrivers, args=('LORR', dataDV04))
        jobs.append(j)

    for j in jobs:
        j.start()

    for j in jobs:
        j.join()

    print 'Results:\n'
    print 'DV03', dataDV03
    print 'DV04', dataDV04 
```

我无法发布我的问题，因此将尝试编辑原件。

这是不可腌制的对象：

```
In [1]: from CCL import LORR
In [2]: lorr=LORR.LORR('DV20', None)
In [3]: lorr
Out[3]: <CCL.LORR.LORR instance at 0x94b188c> 
```

这是我使用 multiprocessing.Pool 将实例返回给父级时返回的错误：

```
Thread getCcl (('DV20', 'LORR'),)
Process PoolWorker-1:
Traceback (most recent call last):
File "/alma/ACS-10.1/casa/lib/python2.6/multiprocessing/process.py", line 232, in _bootstrap
self.run()
File "/alma/ACS-10.1/casa/lib/python2.6/multiprocessing/process.py", line 88, in run
self._target(*self._args, **self._kwargs)
File "/alma/ACS-10.1/casa/lib/python2.6/multiprocessing/pool.py", line 71, in worker
put((job, i, result))
File "/alma/ACS-10.1/casa/lib/python2.6/multiprocessing/queues.py", line 366, in put
return send(obj)
UnpickleableError: Cannot pickle <type 'thread.lock'> objects 
```

```
In [5]: dir(lorr)
Out[5]:
['GET_AMBIENT_TEMPERATURE',
 'GET_CAN_ERROR',
 'GET_CAN_ERROR_COUNT',
 'GET_CHANNEL_NUMBER',
 'GET_COUNT_PER_C_OP',
 'GET_COUNT_REMAINING_OP',
 'GET_DCM_LOCKED',
 'GET_EFC_125_MHZ',
 'GET_EFC_COMB_LINE_PLL',
 'GET_ERROR_CODE_LAST_CAN_ERROR',
 'GET_INTERNAL_SLAVE_ERROR_CODE',
 'GET_MAGNITUDE_CELSIUS_OP',
 'GET_MAJOR_REV_LEVEL',
 'GET_MINOR_REV_LEVEL',
 'GET_MODULE_CODES_CDAY',
 'GET_MODULE_CODES_CMONTH',
 'GET_MODULE_CODES_DIG1',
 'GET_MODULE_CODES_DIG2',
 'GET_MODULE_CODES_DIG4',
 'GET_MODULE_CODES_DIG6',
 'GET_MODULE_CODES_SERIAL',
 'GET_MODULE_CODES_VERSION_MAJOR',
 'GET_MODULE_CODES_VERSION_MINOR',
 'GET_MODULE_CODES_YEAR',
 'GET_NODE_ADDRESS',
 'GET_OPTICAL_POWER_OFF',
 'GET_OUTPUT_125MHZ_LOCKED',
 'GET_OUTPUT_2GHZ_LOCKED',
 'GET_PATCH_LEVEL',
 'GET_POWER_SUPPLY_12V_NOT_OK',
 'GET_POWER_SUPPLY_15V_NOT_OK',
 'GET_PROTOCOL_MAJOR_REV_LEVEL',
 'GET_PROTOCOL_MINOR_REV_LEVEL',
 'GET_PROTOCOL_PATCH_LEVEL',
 'GET_PROTOCOL_REV_LEVEL',
 'GET_PWR_125_MHZ',
 'GET_PWR_25_MHZ',
 'GET_PWR_2_GHZ',
 'GET_READ_MODULE_CODES',
 'GET_RX_OPT_PWR',
 'GET_SERIAL_NUMBER',
 'GET_SIGN_OP',
 'GET_STATUS',
 'GET_SW_REV_LEVEL',
 'GET_TE_LENGTH',
 'GET_TE_LONG_FLAG_SET',
 'GET_TE_OFFSET_COUNTER',
 'GET_TE_SHORT_FLAG_SET',
 'GET_TRANS_NUM',
 'GET_VDC_12',
 'GET_VDC_15',
 'GET_VDC_7',
 'GET_VDC_MINUS_7',
 'SET_CLEAR_FLAGS',
 'SET_FPGA_LOGIC_RESET',
 'SET_RESET_AMBSI',
 'SET_RESET_DEVICE',
 'SET_RESYNC_TE',
 'STATUS',
 '_HardwareDevice__componentName',
 '_HardwareDevice__hw',
 '_HardwareDevice__stickyFlag',
 '_LORRBase__logger',
 '__del__',
 '__doc__',
 '__init__',
 '__module__',
 '_devices',
 'clearDeviceCommunicationErrorAlarm',
 'getControlList',
 'getDeviceCommunicationErrorCounter',
 'getErrorMessage',
 'getHwState',
 'getInternalSlaveCanErrorMsg',
 'getLastCanErrorMsg',
 'getMonitorList',
 'hwConfigure',
 'hwDiagnostic',
 'hwInitialize',
 'hwOperational',
 'hwSimulation',
 'hwStart',
 'hwStop',
 'inErrorState',
 'isMonitoring',
 'isSimulated']

In [6]: 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-15T18:39:33.197

当您使用`multiprocessing`打开第二个进程时，将创建一个具有自己全局状态的*全新 Python 实例。*该全局状态不是共享的，因此子进程对全局变量所做的更改对父进程是不可见的。

此外，大多数`multiprocessing`提供使用 pickle 的抽象来传输数据。使用代理传输的所有数据都[必须是可腌制的](http://docs.python.org/library/multiprocessing.html#all-platforms)；其中包括 a[`Manager`提供](http://docs.python.org/library/multiprocessing.html#multiprocessing-managers)的所有对象。相关引文（我的重点）：

> 确保*代理*方法的参数是可挑选的。

并且（在该`Manager`部分中）：

> 其他进程可以使用*代理*访问共享对象。

`Queue`s 还需要可腌制的数据；文档没有这么说，但快速测试证实了这一点：

```
import multiprocessing
import pickle

class Thing(object):
    def __getstate__(self):
        print 'got pickled'
        return self.__dict__
    def __setstate__(self, state):
        print 'got unpickled'
        self.__dict__.update(state)

q = multiprocessing.Queue()
p = multiprocessing.Process(target=q.put, args=(Thing(),))
p.start()
print q.get()
p.join() 
```

输出：

```
$ python mp.py 
got pickled
got unpickled
<__main__.Thing object at 0x10056b350> 
```

如果您真的无法腌制数据，那么*可能*对您有用的一种方法是找到一种方法将其存储为`ctype`对象；然后可以将对内存的引用[传递给子进程](http://docs.python.org/library/multiprocessing.html#shared-ctypes-objects)。这对我来说似乎很狡猾。我从来没有做过。但这对您来说可能是一个可能的解决方案。

鉴于您的更新，您似乎需要更多地了解`LORR`. 是`LORR`班级吗？你能继承它吗？它是其他东西的子类吗？它的 MRO 是什么？（如果可行，请尝试`LORR.__mro__`发布输出。）如果它是纯 python 对象，则可以对其进行子类化，创建 a`__setstate__`和 a`__getstate__`以启用酸洗。

另一种方法可能是弄清楚如何从`LORR`实例中获取相关数据并通过简单的字符串传递它。既然你说你真的只是想调用对象的方法，那为什么不直接用`Queue`s 来回发送消息呢？换句话说，像这样（示意性地）：

```
Main Process              Child 1                       Child 2
                          LORR 1                        LORR 2 
child1_in_queue     ->    get message 'foo'
                          call 'foo' method
child1_out_queue    <-    return foo data string
child2_in_queue                   ->                    get message 'bar'
                                                        call 'bar' method
child2_out_queue                  <-                    return bar data string 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T18:33:46.380

@DBlas 在答案中为您提供了一个快速 url 和对 Manager 类的引用，但我认为它仍然有点模糊，所以我认为它可能对您有所帮助。

```
import multiprocessing
from multiprocessing import Manager

ants = ['DV03', 'DV04']

def getDV03CclDrivers(lib, data_dict):  
    data_dict[1] = 1
    data_dict[0] = 0

def getDV04CclDrivers(lib, data_list):   
    data_list['driver'] = 0  

if __name__ == "__main__":

    manager = Manager()
    dataDV03 = manager.list(['', ''])
    dataDV04 = manager.dict({'driver': '', 'status': ''})

    jobs = []
    if 'DV03' in ants:
        j = multiprocessing.Process(
                target=getDV03CclDrivers, 
                args=('LORR', dataDV03))
        jobs.append(j)

    if 'DV04' in ants:
        j = multiprocessing.Process(
                target=getDV04CclDrivers, 
                args=('LORR', dataDV04))
        jobs.append(j)

    for j in jobs:
        j.start()

    for j in jobs:
        j.join()

    print 'Results:\n'
    print 'DV03', dataDV03
    print 'DV04', dataDV04 
```

因为多处理实际上使用单独的进程，所以不能简单地共享全局变量，因为它们将位于内存中完全不同的“空间”中。您在一个流程下对全局所做的事情不会反映在另一个流程中。虽然我承认它看起来很混乱，因为你看到它的方式，它都存在于同一段代码中，所以“为什么这些方法不能访问全局”？很难理解它们将在不同进程中运行的想法。

[Manager 类](http://docs.python.org/library/multiprocessing.html#managers)用作数据结构的代理，可以在进程之间为您来回传递信息。您将要做的是从经理创建一个特殊的字典和列表，将它们传递到您的方法中，并在本地对其进行操作。

**不可腌制的数据**

对于您的专业 LORR 对象，您可能需要创建类似代理的东西，它可以表示实例的可选择状态。

不是超级健壮或经过太多测试，但会给你这个想法。

```
class LORRProxy(object):

    def __init__(self, lorrObject=None):
        self.instance = lorrObject

    def __getstate__(self):
        # how to get the state data out of a lorr instance
        inst = self.instance
        state = dict(
            foo = inst.a,
            bar = inst.b,
        )
        return state

    def __setstate__(self, state):
        # rebuilt a lorr instance from state
        lorr = LORR.LORR()
        lorr.a = state['foo']
        lorr.b = state['bar']
        self.instance = lorr 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-15T18:24:15.237

使用时`multiprocess`，进程之间传递对象的唯一方法是使用`Queue`or `Pipe`；全局变量不共享。对象必须是可腌制的，所以`multiprocess`在这里不会帮助你。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-08T07:14:22.843

您还可以使用[多处理 Array](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.Array)。这允许您在进程之间拥有共享状态，并且可能是最接近全局变量的东西。

在 main 的顶部，声明一个数组。第一个参数“i”表示它将是整数。第二个参数给出初始值：

```
shared_dataDV03 = multiprocessing.Array ('i', (0, 0)) #a shared array 
```

然后将此数组作为参数传递给进程：

```
j = multiprocessing.Process(target=getDV03CclDrivers, args=('LORR',shared_dataDV03)) 
```

您必须在被调用的函数中接收数组参数，然后您可以在函数中对其进行修改：

```
def getDV03CclDrivers(lib,arr):  # call global variable
    arr[1]=1
    arr[0]=0 
```

该数组与父级共享，因此您可以在父级中打印出末尾的值：

```
print 'DV03', shared_dataDV03[:] 
```

它将显示更改：

```
DV03 [0, 1] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-14T11:14:23.087

我使用 p.map() 将多个进程分拆到远程服务器，并在它们在不可预测的时间返回时打印结果：

```
Servers=[...]
from multiprocessing import Pool
p=Pool(len(Servers))
p.map(DoIndividualSummary, Servers) 
```

如果`DoIndividualSummary`用于`print`结果，这工作得很好，但整体结果的顺序不可预测，这使得解释变得困难。我尝试了多种使用全局变量的方法，但都遇到了问题。最后，我用 sqlite3 成功了。

之前`p.map()`，打开一个 sqlite 连接并创建一个表：

```
import sqlite3
conn=sqlite3.connect('servers.db') # need conn for commit and close
db=conn.cursor()
try: db.execute('''drop table servers''')
except: pass
db.execute('''CREATE TABLE servers (server text, serverdetail text, readings     text)''')
conn.commit() 
```

然后，当从 中返回时`DoIndividualSummary()`，将结果保存到表中：

```
db.execute('''INSERT INTO servers VALUES (?,?,?)''',         (server,serverdetail,readings))
conn.commit()
return 
```

语句后`map()`，打印结果：

```
db.execute('''select * from servers order by server''')
rows=db.fetchall()
for server,serverdetail,readings in rows: print serverdetail,readings 
```

可能看起来有点矫枉过正，但对我来说它比推荐的解决方案更简单。

# push-notification - Foursquare 推送 API - 请求超时？

> ID：11055304
> 
> 赞同：0
> 
> 时间：2012-06-15T17:13:25.170
> 
> 标签：push-notification, foursquare, request-timed-out

使用[https://foursquare.com/oauth](https://foursquare.com/oauth)我将测试推送消息发送到我服务器上的脚本页面。但是推送消息永远不会通过。我收到一条错误消息“您的服务器返回：502 Bad Gateway。”

我可以打开我通过浏览器向其推送消息的 URL 没问题。网址是正确的。没有错别字。但它使用 HTTPs 和自签名证书，与域名匹配。我浏览了 Foursquare 文档，他们说自签名证书可以使用。所以这应该不是问题。

请告诉我如何解决这个问题？

更多细节：

这是我正在向[https://www.hangmessage.com:8443/CloudMessage/FoursquareUserCheckinListener](https://www.hangmessage.com:8443/CloudMessage/FoursquareUserCheckinListener)发送测试推送的 URL `

Servlet FoursquareUserCheckinListener（部分）：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  response.setContentType("text/html;charset=UTF-8");
  PrintWriter out = response.getWriter(); 

  try { 
    System.out.println("Push arrived!"); 
    out.println(""); 
  } finally {
    out.close();
  }   
} 
```

为什么它会返回“您的服务器返回：502 Bad Gateway”？:(“推送到达”消息永远不会打印出来。除非我在浏览器中打开此 URL。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:07:10.623

您可能会遇到问题，因为您使用的是非标准 SSL 端口。您可以尝试切换到端口 443，如果问题消失了吗？如果是这样，那绝对是我们的一个错误，我们将努力修复它。

# php - 服务器端和客户端 - 我们什么时候可以将 php 放入 javascript 中？

> ID：11055305
> 
> 赞同：0
> 
> 时间：2012-06-15T17:13:28.803
> 
> 标签：php, ajax, client-side, server-side

假设我们在这些行中有一些东西：

```
 $.ajax({
     success: function(html){
     $("#related_events").append(html);
     $("#related_events").fadeOut(150).fadeIn(150); //optional
     type: 'get',
     url: '<?php echo $this->createUrl('related'); ?>', 
```

特别是在这条线上存在一个问题：

```
 url: '<?php echo $this->createUrl('related'); ?>', 
```

考虑到这个 ajax 调用，是否会执行该回显？或者那个回声总是会被执行，因为那个时候服务器端已经被触发了？

如果我在 ajax 调用之前有这个条件怎么办，考虑到 if 会执行那个 echo 吗？

我相信查看浏览器输出是没有用的，因为我们得到了那个回声，但我们不知道我们是否得到那个回声，因为它总是会运行，或者它会有条件地运行。

```
if('<?= $something ?>' == 'create'){
                $("#Event_name").focusout(function(){
                    $.ajax({
                          success: function(html){
                          $("#related_events").append(html);
                          $("#related_events").fadeOut(150).fadeIn(150); //optional
                    }, 
                    type: 'get',
                    url: '<?php echo $this->createUrl('related'); ?>',
                    data:
                    {
                       ind: $('#Event_name').val()
                    },

                    beforeSend: function(){
                                            $("#related_events").empty();
                                        },
                    cache: false,
                    dataType: 'html'
                });
              })
            } 
```

我确定这与我对这里的服务器/客户端进程的错误理解有关。

**更新：**

我知道 php 代码将被执行。我没有得到的是：

**1）**他会知道javascript条件吗？

**2)**如果我们在进行 ajax 调用，它会得到不同的评估吗？

（在这里挣扎……）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:16:07.153

PHP is compiled on the server before it's shown to the client. So that URL will be generated and will be viewable in the source as whatever your createURL function outputs.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:16:33.250

If that tag is inside a PHP file (i.e. a file which will be processed before the response is sent to browser), it will be executed.

If it is in a separate JS file, or inside a HTML File (static files), then it won't be.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:21:00.710

同意@Marcus Recck 上面的回答。PHP 被编译并返回响应，因此上面的 URL 将是可见的。

一个好主意是检查您的浏览器是否有 JavaScript 错误。不同的浏览器有不同的显示方式，但请寻找 javascript 控制台或类似的东西。此外，请检查浏览器查看的页面来源。这是为了确保当您将它们混合在一起时，事情会按照您的预期工作。

```
url: 'createUrl('相关'); ?>',
```

应该

```
url: "createUrl('related'); ?>",
```

我觉得...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:17:10.393

The PHP will render when the page loads, the browser has no idea what PHP code is there, it is delivered as HTML from the server. Then the javascript executes on the client-side. So if you view the page's source you should see the created URL by PHP. In other words, it will work

# c++ - 声明接受模板参数的函数

> ID：11055307
> 
> 赞同：1
> 
> 时间：2012-06-15T17:13:43.530
> 
> 标签：c++, templates

我想定义一个带有模板参数的辅助函数。我已经尝试为此制作一个模板化函数，但它无法编译。知道我做错了什么吗？这是我尝试过的代码。

```
// vectors are great, but lack a find method. Implement one as a helper.
template<class T> bool vec_find(vector<T> &v, T obj)
{
    vector<T>::iterator s;
    for (s = v.begin(); s < v.end(); s++)
    {
        if (*s == obj)
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:41:03.060

大概，您的编译器会告诉您问题所在。我的说道：

```
test.cpp:7:5: error: need ‘typename’ before ‘std::vector<T>::iterator’ because ‘std::vector<T>’ is a dependent scope 
```

所以要修复它，在`typename`之前添加`vector<T>::iterator`：

```
typename vector<T>::iterator s;
^^^^^^^^ 
```

通常，只要类型名称的范围取决于模板参数，您就需要它；在模板被实例化之前，编译器不知道`vector<T>`将如何定义，因此需要告知其内部作用域的名称是指一种类型而不是其他东西。

`vector`但是，没有方法是有充分理由的`find`：C++ 库将容器与作用于它们的算法分开，因此任何算法都可以作用于任何合适的序列。您想为此使用`std::find`：

```
return std::find(v.begin(), v.end(), obj) != v.end(); 
```

# java - 蒸汽冷凝器java错误

> ID：11055313
> 
> 赞同：1
> 
> 时间：2012-06-15T17:14:08.337
> 
> 标签：java, eclipse, api, constructor, steam-condenser

我一直在从事一个涉及 Steam Condenser 的小项目，这是一个用 Java 编写的 Steam API，但我实际上无法用它做任何事情。

我会解释的。这是[wiki](https://github.com/koraktor/steam-condenser/wiki/Usage-Examples-Java)告诉我的：

> SteamId id = new SteamId("demomenz");
> 
> GameStats stats = id.getGameStats("tf2");
> 
> 列出成就 = stats.getAchievements();

问题是，eclipse 显然不喜欢它，因为它会吐出这个错误：

> 构造函数 SteamId(String) 未定义

它让我可以选择将其更改为：

> SteamId id = new SteamId("demomenz", false);

但此时出现了一个不同的错误：

> 构造函数 SteamId(Object, boolean) 不可见

所以，我假设这个函数是 API 内部的，不应该从外部调用。

如果有人对此很熟悉，或者知道我为什么会收到这个错误（我对 Java 开发相当陌生），那么将不胜感激。

更新：

> 构造函数 SteamId(String) 未定义

这是如果我使用 SteamId.create(ConvertedID); （ConvertedID 是一个包含 Steam64 ID 的字符串）。

在这一点上，我相信这个 API 写得不是很好，至少对于 java 来说是这样。还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:19:32.047

看起来构造函数是私有的。改用这个：

```
SteamId id = SteamId.create("demomenz"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:20:14.480

尝试使用他们的静态方法来创建 StreamId：

我在他们的 API 中看到了以下方法

```
/**
 * Creates a new <code>SteamID</code> instance or gets an existing one
 * from the cache for the profile with the given ID
 *
 * @param id The 64bit SteamID of the player
 * @return The <code>SteamId</code> instance of the requested profile
 * @throws SteamCondenserException if the Steam ID data is not available,
 *         e.g. when it is private
 */
public static SteamId create(String id)
        throws SteamCondenserException {
    return SteamId.create((Object) id, true, false);
} 
```

用法是：

```
SteamId streamId = SteamId.create("myId"); 
```

# c# - 如何根据页面使用具有不同数据的会话？

> ID：11055315
> 
> 赞同：0
> 
> 时间：2012-06-15T17:14:18.403
> 
> 标签：c#, asp.net, session, datatable, popup

我有一个将 DataTable 存储到会话中的弹出窗口，以便在弹出窗口完成并退出后，原始页面将使用该会话重新绑定其表。我还有另一个使用相同弹出窗口的页面，因此会话肯定与前一个相同。如果用户打开了两个选项卡，每个选项卡都有一个页面，他们可以使用不同选项卡中的两个弹出窗口，这会导致会话出现问题，因为其中的数据将在两个页面之间翻转。

有没有办法只将会话数据保存在该选项卡/窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:20:11.200

最好避免在会话中存储大量数据。数据库调用可能是另一种选择，但如果您必须为每个选项卡使用会话，请使用这样的唯一名称。您可以通过在打开弹出窗口时传递一些查询字符串来区分服务器端弹出代码中每个链接的数据表。

```
Session["DataTableForTab_1"] 
```

和

```
Session["DataTableForTab_2"] 
```

# serial-port - 将 DataReceived 的可见性合并到窗口窗体

> ID：11055316
> 
> 赞同：0
> 
> 时间：2012-06-15T17:14:21.407
> 
> 标签：serial-port, visibility

我被要求编写一个串行端口库来处理应用程序所需的串行端口功能。从主Windows 窗体调用**库的方法** *openComportToTuneSuite()*并设置串行端口进行通信，包括在 comport.DataReceived 时分配“ *portMessageReceivedFromTuneSuite* *”*方法*引发事件。一切似乎都运行良好；但是我无法解决如何使从 DataReceived 方法（下面代码中的“_response”）返回的数据对主窗口窗体可见。由于调用此方法是在库中设置 EventHandler 而不是从主 Windows 窗体调用特定方法的结果（这将允许返回响应），因此没有机会发回 _response到应用程序。*

 *有人可以指导我如何使从支持库调用的 DataReceived 方法接收到的数据可见到主窗口窗体吗？

**库法**

```
 public string openComportToTuneSuite()
    {    
       _tuneSuiteComport.BaudRate = 19200;
       _tuneSuiteComport.DataBits = 8;
       _tuneSuiteComport.StopBits = StopBits.One;
       _tuneSuiteComport.Parity = Parity.None;
       _tuneSuiteComport.PortName = "COM11";
       _tuneSuiteComport.Handshake = Handshake.None;
       _tuneSuiteComport.RtsEnable = true;
       _tuneSuiteComport.Open();
       _tuneSuiteComport.DataReceived += portMessageReceivedFromTuneSuite;
    }

   private void portMessageReceivedFromTuneSuite(object sender, SerialDataReceivedEventArgs e)
    {
        string _response = "";
        var responseFromChronos = _tuneSuiteComport.ReadExisting();
        var responseArray = responseFromChronos.Split('\r');
        foreach (var response in responseArray)
        {
            _response = _response + response.ToString() + Environment.NewLine;
        }
        //return _response;
        return;
    } 
```*

# android - 将URI设置为数据源时Android不播放歌曲

> ID：11055318
> 
> 赞同：1
> 
> 时间：2012-06-15T17:14:32.880
> 
> 标签：android, media-player

我正在开发一个音乐应用程序，并希望在将 URI 设置为数据源时播放歌曲，但 setDataSource 不接受字符串。我的意思是我们如何为特定 ID 编写 URI。

这是代码：

```
MediaPlayer mp = new MediaPlayer();
mp.reset();
String sel = MediaStore.Audio.Media._ID+"=166";
mp.setDataSource(context,sel);
mp.prepare();
mp.start(); 
```

这里 166 是我手机中特定歌曲的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:28:44.620

尝试正确设置您的 URI

采用

```
Uri fileUri = ContentUris.withAppendedId(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 166);
mp.setDataSource(context, fileUri); 
```

如果`MediaStore.Audio.Media.INTERNAL_CONTENT_URI`您的音频正在存储在设备的内部存储器中，请使用

# c# - 在实体框架中返回具有复杂类型的实体的函数映射存储过程

> ID：11055319
> 
> 赞同：0
> 
> 时间：2012-06-15T17:14:34.543
> 
> 标签：c#, visual-studio-2010, entity-framework, stored-procedures

考虑一个模型优先场景中的实体（EF 4.3，Visual Studio 2010），它包含固有属性和复杂属性的混合。

进一步考虑数据库生成策略是每个类型的表。

如果您编写返回此类实体的存储过程，当您使用模型浏览器映射 SPROC 输出时，您会发现函数导入向导的获取列信息按钮无法推断其他标量列之间的复杂属性。

这只是我吗？

![样本实体](../Images/0d3b4b03e992c61c7c930e50244a452e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:29:11.240

我不得不猜测*复杂属性*是指导航属性。如果是这样，您的问题的核心是在 SQL 中没有办法`join`处理存储过程的结果。这意味着 EF 无法构造查询来完成您希望它执行的操作。

存储过程只返回一个值数组。这些值都不能像使用数据库列那样标记为外键。我认为 EF 按名称约定推断关联太牵强了。

# javascript - Yii：使用 ajax 动态加载新模型

> ID：11055324
> 
> 赞同：2
> 
> 时间：2012-06-15T17:14:48.770
> 
> 标签：javascript, html, ajax, architecture, yii

我想要一个包含两个下拉列表的部分，它们有效地指示要使用哪种模型。我希望它有一个带有 onclick 属性的按钮，该属性基本上清除表单，并根据新模型将其替换为新表单。

有没有办法在 Yii 中做到这一点，或者可能有更好的方法来实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:10:45.527

您可以使用或不使用 ajax 来执行此操作。

使用 AJAX：

1.  使用单个表单模型渲染您的视图，并相应地选择表单的选项。
2.  创建一个新操作，该操作将根据操作接收到的 post 参数以适当形式的 json 字符串编码进行响应。
3.  在提交按钮单击事件处理程序中，将您希望接收的表单发布到您的新操作。
4.  在发布回调中，将表单替换为您刚刚在回复中收到的新表单。

没有 AJAX：

1.  将所有表单模型渲染到视图。
2.  让提交按钮事件处理程序相应地显示和隐藏表单。

# android - 如何在使用 ActionBarSherlock 时设计自定义选项卡

> ID：11055325
> 
> 赞同：0
> 
> 时间：2012-06-15T17:14:52.877
> 
> 标签：android, actionbarsherlock

我一直在尝试设置 ActionBarSherlock 的样式，以便为我的应用程序提供我想要的外观，但是虽然我在大多数方面都取得了成功，但我一直在努力使用 Tabs（可以使用 Fragments 滑动）。到目前为止，我未能为其提供自定义背景和文本颜色，同时还删除了选项卡之间的边框。

我目前拥有的是

![在此处输入图像描述](../Images/048489826198e8316516de50b4d261b6.png)

而我想让它看起来像 ![在此处输入图像描述](../Images/0878e74ea8095e23a08d989468b19594.png)

这是我在活动中使用的代码，其中大部分是我从另一个关于 SO 的问题中借来的（我会在再次找到它时立即链接它）：

```
public class HomeActivity extends SherlockFragmentActivity {
ViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(bar.newTab().setText("Tab 1"),
            MyFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab 2"),
            MyFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab 3"),
            MyFragment.class, null);
}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T05:13:03.383

避免继承 FragmentPagerAdapter 做你想做的事。您应该将 viewPager 与 viewPagerIndicator 库一起使用：[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator) 看看，SJ (Super Jake) 非常易于使用和开发

# java - Java - 模式匹配

> ID：11055328
> 
> 赞同：2
> 
> 时间：2012-06-15T17:14:58.273
> 
> 标签：java, php, regex

我在 php 中有一些代码，我使用 preg_grep 以任何顺序匹配多个单词，这些单词可以存在于任何上下文中。我正在尝试将其转换为 java，但我似乎无法弄清楚。

我用于将关键字转换为正则表达式字符串的 php 代码是：

```
function createRegexSearch($keywords)
{
    $regex = '';
    foreach ($keywords as $key)
        $regex .= '(?=.*' . $key . ')';
    return '/^' . $regex . '/i';
} 
```

它会创建一个类似于： /^(?=.*bot)/i 的正则表达式字符串 - 它应该匹配机器人、机器人、机器人等。相同的正则表达式字符串似乎在 java 中不起作用，这让我感到困惑。目前在java中，我使用包含创建了类似的效果，但更愿意使用正则表达式。

```
for (Map.Entry<String, String> entry : mKeyList.entrySet())
{
    boolean found = true;
    String val = entry.getValue().toLowerCase();
    for (int i = 0; i < keywords.length; i++)
    {
        if (!val.contains(keywords[i].toLowerCase()))
            found = false;
    }

    if (found)
        ret.add(entry.getValue());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:46:09.650

Java 与许多语言不同的一件事是有两种不同的方式来“匹配”正则表达式与目标 - “matches()”与“find()” - 匹配相当于将`^`and`$`放在你的开头和结尾表达式，而 find*找到*第一个匹配项（无论它可能在字符串中的哪个位置） - 例如，虽然您可能能够`find()` `.*bot`在目标字符串`robots`中找到，但说它`matches()`是目标是不正确的......我并不完全确定前瞻可能会如何影响这一点......

如果没有发布 Java 代码（包含问题），很难告诉您哪里可能出错，但我的猜测是它很容易出现在这个区域。

此外，在 Java（和 .Net）中，相当于将`/i`表达式放在表达式的末尾是放在表达式`(?i)`的开头（或您希望区分大小写的任何区域）。因此，`/[a-f0-9]/i`等价于`(?i)[a-f0-9]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:29:20.737

字符串包含区分大小写，因此第一个集合（PHP 代码）将表现得不区分大小写，因为使用了 \i。但是java代码会区分大小写。所以行为上会有差异。

因此，如果这是不同的，您将两者都转换为特定的字符集，在包含检查之前说 toUpperCase() 。

此外，您在 PHP 代码中使用正则表达式，而不是在 Java 中，这背后有什么具体原因吗？

问候 Ajai G

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:08:18.753

您可以使用嵌入式标志扩展 (?i)，因此您应该使用匹配 bot、robot、bots 和 robots 的正则表达式是`(?i)^(.*bots?)$`这应该与 String.matches 或 Pattern/Matcher 一起使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-30T13:48:50.957

[JMPL](https://github.com/klappdev/jpml)是一个简单的 java 库，它可以使用 Java 8 的特性来模拟一些特性模式匹配。

```
 import org.kl.state.Else;
   import static org.kl.pattern.DeconstructPattern.matches;
   import static org.kl.pattern.DeconstructPattern.foreach;
   import static org.kl.pattern.DeconstructPattern.let;

   let(figure, (int w, int h) -> {
      System.out.println("border: " + w + " " + h));
   });

   matches(figure).as(
      Rectangle.class, (int w, int h) -> System.out.println("square: " + (w * h)),
      Circle.class,    (int r)        -> System.out.println("square: " + (2 * Math.PI * r)),
      Else.class,      ()             -> System.out.println("Default square: " + 0)
   );

   foreach(listRectangles, (int w, int h) -> {
      System.out.println("square: " + (w * h));
   }); 
```

# wpf - 在 Windows 8 / WPF / Silverlight 中显示 8x8 网格

> ID：11055329
> 
> 赞同：0
> 
> 时间：2012-06-15T17:15:08.803
> 
> 标签：wpf, silverlight, windows-8, windows-runtime

我想在 Windows 8 Metro 应用程序中显示 8x8 网格。去做这个：

1.  我创建了一个`Grid`，并添加了 8 个行定义和 8 个列定义。
2.  然后我为每个网格单元添加一个`Rectangle`带有黑色边框的。
3.  然后在`MeasureOverride`方法中，我检查了`availableSize`. 由于我的网格需要是正方形的（纵横比 = 1.0），我计算 的最小值`availableSize.Width, availableSize.Height`并返回一个等于 的新大小`(minimum, minimum)`。

但是，这不起作用。结果网格的大小等于`availableSize`，而不是我从`MeasureOverride`方法返回的大小。如果我修改`MeaureOverride`, 以便将s 设置为`Height`，并将s 设置为，那么它可以工作。但我看过一些视频，他们说你不应该明确设置任何东西的属性。`RowDefinition``minimum``Width``ColumnDefinition``minimum``Height``Width`

那么，有没有**更好**的方法来完成我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:57:52.577

一种解决方案是创建一个自定义 Grid 控件来处理宽度、高度

```
 public class SquareGrid : Grid
{
    public SquareGrid()
    {
        this.SizeChanged += OnSizeChanged;
        this.Loaded += OnLoaded;
    }

    private void OnSizeChanged(object sender, SizeChangedEventArgs e)
    {
        var parent = VisualTreeHelper.GetParent(this) as FrameworkElement;
        if (parent == null) return;

        ResizeToSquare(parent);
    }

    private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        var parent = VisualTreeHelper.GetParent(this) as FrameworkElement;
        if (parent == null) return;

        parent.SizeChanged += ParentOnSizeChanged;
    }

    private void ParentOnSizeChanged(object sender, SizeChangedEventArgs sizeChangedEventArgs)
    {
        FrameworkElement parent = sender as FrameworkElement;
        if (parent == null) return;

        ResizeToSquare(parent);
    }

    private void ResizeToSquare(FrameworkElement parent)
    {
        var min = Math.Min(parent.ActualHeight, parent.ActualWidth);

        this.Width = min;
        this.Height = min;
    }
} 
```

你也可以为此建立一个行为来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:53:51.887

我不确定您是否需要以任何方式与这些单元格进行交互，但如果您只想绘制一个网格，这里有一个快速控制。它将填充父控件的空间。

```
public class GridShape : Control
{
    public int Columns
    {
        get { return (int)GetValue(ColumnsProperty); }
        set { SetValue(ColumnsProperty, value); }
    }
    public static readonly DependencyProperty ColumnsProperty = DependencyProperty.Register("Columns", typeof(int), typeof(GridShape), new PropertyMetadata(8));

    public int Rows
    {
        get { return (int)GetValue(RowsProperty); }
        set { SetValue(RowsProperty, value); }
    }
    public static readonly DependencyProperty RowsProperty = DependencyProperty.Register("Rows", typeof(int), typeof(GridShape), new PropertyMetadata(8));

    public Brush Stroke
    {
        get { return (Brush)GetValue(StrokeProperty); }
        set { SetValue(StrokeProperty, value); }
    }
    public static readonly DependencyProperty StrokeProperty = DependencyProperty.Register("Stroke", typeof(Brush), typeof(GridShape), new PropertyMetadata(new SolidColorBrush(Colors.Black)));

    public double StrokeThickness
    {
        get { return (double)GetValue(StrokeThicknessProperty); }
        set { SetValue(StrokeThicknessProperty, value); }
    }
    public static readonly DependencyProperty StrokeThicknessProperty = DependencyProperty.Register("StrokeThickness", typeof(double), typeof(GridShape), new PropertyMetadata(1.0));

    protected override void OnRender(System.Windows.Media.DrawingContext drawingContext)
    {
        Pen pen = new Pen(Stroke, StrokeThickness);

        double heightSpan = ActualHeight / Rows;
        double widthSpan = ActualWidth / Columns;

        for (double y = 0; y <= ActualHeight; y += heightSpan)
            drawingContext.DrawLine(pen, new Point(0, y), new Point(ActualWidth, y));

        for (double x = 0; x <= ActualWidth; x += widthSpan)
            drawingContext.DrawLine(pen, new Point(x, 0), new Point(x, ActualHeight));
    }
} 
```

# asp.net-mvc - 如何将 knockout.js 与 ASP.NET MVC ViewModels 一起使用？

> ID：11055336
> 
> 赞同：129
> 
> 时间：2012-06-15T17:15:40.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3, knockout.js

**赏金**

已经有一段时间了，我还有几个悬而未决的问题。我希望通过增加赏金也许这些问题会得到解答。

1.  你如何使用带有 knockout.js 的 html 助手
2.  为什么需要准备好文档才能使其工作（有关更多信息，请参阅第一次编辑）

3.  如果我在视图模型中使用剔除映射，我该怎么做？由于映射，我没有功能。

    ```
    function AppViewModel() {

        // ... leave firstName, lastName, and fullName unchanged here ...

        this.capitalizeLastName = function() {

        var currentVal = this.lastName();        // Read the current value

        this.lastName(currentVal.toUpperCase()); // Write back a modified value

    }; 
    ```

4.  我想使用插件，例如我希望能够回滚可观察对象，就好像用户取消了我希望能够返回到最后一个值的请求一样。根据我的研究，这似乎是通过制作[可编辑插件等插件来实现的](https://github.com/romanych/ko.editables)

    如果我使用映射，我该如何使用类似的东西？我真的不想使用在我的视图中手动映射的方法，即我将每个 MVC viewMode 字段映射到一个 KO 模型字段，因为我想要尽可能少的内联 javascript，这似乎是工作的两倍，那就是为什么我喜欢那个映射。

5.  我担心为了使这项工作变得容易（通过使用映射）我会失去很多 KO 权力，但另一方面我担心手动映射只会做很多工作并且会使我的视图包含太多信息和将来可能会变得更难维护（例如，如果我在 MVC 模型中删除一个属性，我也必须在 KO 视图模型中移动它）

* * *

**原帖**

我正在使用 asp.net mvc 3，我正在研究淘汰赛，因为它看起来很酷，但我很难弄清楚它如何与 asp.net mvc 一起工作，尤其是视图模型。

对我来说，我现在做这样的事情

```
 public class CourseVM
    {
        public int CourseId { get; set; }
        [Required(ErrorMessage = "Course name is required")]
        [StringLength(40, ErrorMessage = "Course name cannot be this long.")]
        public string CourseName{ get; set; }

        public List<StudentVm> StudentViewModels { get; set; }

} 
```

我将拥有一个具有一些基本属性（如 CourseName）的 Vm，并且在它之上会有一些简单的验证。如果需要，Vm 模型中也可能包含其他视图模型。

然后，如果我会使用 html 助手帮助我将它显示给用户，我会将这个 Vm 传递给视图。

```
@Html.TextBoxFor(x => x.CourseName) 
```

我可能有一些 foreach 循环或其他东西来从学生视图模型的集合中获取数据。

然后，当我提交表单时，我会使用 jquery 并将`serialize array`其发送到控制器操作方法，该方法会将其绑定回视图模型。

使用 knockout.js，一切都不同了，因为您现在获得了它的视图模型，并且从我看到的所有示例中它们不使用 html 帮助器。

你如何将 MVC 的这两个特性与 knockout.js 一起使用？

我找到[了这个视频](http://channel9.msdn.com/posts/ASPNET-MVC-With-Community-Tools-Part-11-KnockoutJS?format=html5)，它简要地（视频的最后几分钟 @ 18:48）通过基本上拥有一个内联脚本来使用视图模型，该脚本具有被分配 ViewModel 中的值的 knockout.js 视图模型。

这是唯一的方法吗？在我的示例中，其中包含一组视图模型怎么样？我是否必须有一个 foreach 循环或其他东西来提取所有值并将其分配给淘汰赛？

至于 html 助手，视频对他们只字未提。

这些是让我感到困惑的两个领域，因为似乎没有多少人谈论它，并且当示例只是一些硬编码的值示例时，它让我对初始值和所有内容如何进入视图感到困惑。

* * *

**编辑**

我正在尝试 Darin Dimitrov 的建议，这似乎可行（尽管我不得不对他的代码进行一些更改）。不知道为什么我必须使用准备好的文档，但不知何故，如果没有它，一切都没有准备好。

```
@model MvcApplication1.Models.Test

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
    <script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
    <script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>
    <script src="../../Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
   <script type="text/javascript">

   $(function()
   {
      var model = @Html.Raw(Json.Encode(Model));

// Activates knockout.js
ko.applyBindings(model);
   });

</script>

</head>
<body>
    <div>
        <p>First name: <strong data-bind="text: FirstName"></strong></p>
        <p>Last name: <strong data-bind="text: LastName"></strong></p>
        @Model.FirstName , @Model.LastName
    </div>
</body>
</html> 
```

我必须将它包装在一个 jquery 文档周围，以使其工作。

我也收到此警告。不知道这到底是怎么回事。

```
Warning 1   Conditional compilation is turned off   -> @Html.Raw 
```

所以我有一个起点，我想至少会在我做更多的游戏以及它是如何工作的时候更新。

我正在尝试阅读交互式教程，但改用 ViewModel。

不知道如何处理这些部分

```
function AppViewModel() {
    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");
} 
```

或者

```
function AppViewModel() {
    // ... leave firstName, lastName, and fullName unchanged here ...

    this.capitalizeLastName = function() {
        var currentVal = this.lastName();        // Read the current value
        this.lastName(currentVal.toUpperCase()); // Write back a modified value
    }; 
```

* * *

**编辑 2**

我能够弄清楚第一个问题。对第二个问题毫无头绪。然而虽然。有人有什么想法吗？

```
 @model MvcApplication1.Models.Test

    @{
        Layout = null;
    }

    <!DOCTYPE html>

    <html>
    <head>
        <title>Index</title>
        <script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
        <script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>
        <script src="../../Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
       <script type="text/javascript">

       $(function()
       {
        var model = @Html.Raw(Json.Encode(Model));
        var viewModel = ko.mapping.fromJS(model);
        ko.applyBindings(viewModel);

       });

    </script>

    </head>
    <body>
        <div>
            @*grab values from the view model directly*@
            <p>First name: <strong data-bind="text: FirstName"></strong></p>
            <p>Last name: <strong data-bind="text: LastName"></strong></p>

            @*grab values from my second view model that I made*@
            <p>SomeOtherValue <strong data-bind="text: Test2.SomeOtherValue"></strong></p>
            <p>Another <strong data-bind="text: Test2.Another"></strong></p>

            @*allow changes to all the values that should be then sync the above values.*@
            <p>First name: <input data-bind="value: FirstName" /></p>
            <p>Last name: <input data-bind="value: LastName" /></p>
            <p>SomeOtherValue <input data-bind="value: Test2.SomeOtherValue" /></p>
            <p>Another <input data-bind="value: Test2.Another" /></p>

           @* seeing if I can do it with p tags and see if they all update.*@
            <p data-bind="foreach: Test3">
                <strong data-bind="text: Test3Value"></strong> 
            </p>

     @*took my 3rd view model that is in a collection and output all values as a textbox*@       
    <table>
        <thead><tr>
            <th>Test3</th>
        </tr></thead>
          <tbody data-bind="foreach: Test3">
            <tr>
                <td>    
                    <strong data-bind="text: Test3Value"></strong> 
<input type="text" data-bind="value: Test3Value"/>
                </td>
            </tr>    
        </tbody>
    </table> 
```

控制器

```
 public ActionResult Index()
    {
              Test2 test2 = new Test2
        {
            Another = "test",
            SomeOtherValue = "test2"
        };

        Test vm = new Test
        {
            FirstName = "Bob",
            LastName = "N/A",
             Test2 = test2,

        };
        for (int i = 0; i < 10; i++)
        {
            Test3 test3 = new Test3
            {
                Test3Value = i.ToString()
            };

             vm.Test3.Add(test3);
        }

        return View(vm);
    } 
```

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-07-07T08:20:19.733

我想我已经总结了你所有的问题，如果我遗漏了什么，请告诉我（*如果你能在一个地方总结你所有的问题会很好*=））

**笔记。`ko.editable`添加了与插件的兼容性**

## [下载](http://sdrv.ms/NebpFQ)完整代码

## 你如何使用带有 knockout.js 的 html 助手

这很简单：

```
@Html.TextBoxFor(model => model.CourseId, new { data_bind = "value: CourseId" }) 
```

在哪里：

*   `value: CourseId`表示您正在`value`将`input`控件的`CourseId`属性与模型和脚本模型中的属性绑定

结果是：

```
<input data-bind="value: CourseId" data-val="true" data-val-number="The field CourseId must be a number." data-val-required="The CourseId field is required." id="CourseId" name="CourseId" type="text" value="12" /> 
```

## 为什么需要准备好文档才能使其工作（有关更多信息，请参阅第一次编辑）

我还不明白为什么你需要使用`ready`事件来序列化模型，但似乎它只是*必需*的（虽然不用担心）

## 如果我在视图模型中使用剔除映射，我该怎么做？由于映射，我没有功能。

如果我理解正确，您需要向 KO 模型附加一个新方法，这很容易合并模型

[有关更多信息，请在 - 来自不同来源的映射部分 -](http://knockoutjs.com/documentation/plugins-mapping.html)

```
function viewModel() {
    this.addStudent = function () {
        alert("de");
    };
};

$(function () {
    var jsonModel = '@Html.Raw(JsonConvert.SerializeObject(this.Model))';
    var mvcModel = ko.mapping.fromJSON(jsonModel);

    var myViewModel = new viewModel();
    var g = ko.mapping.fromJS(myViewModel, mvcModel);

    ko.applyBindings(g);
}); 
```

## 关于您收到的警告

> 警告 1 条件编译已关闭 -> @Html.Raw

您需要使用引号

## 与 ko.editable 插件的兼容性

我认为它会更复杂，但事实证明集成非常简单，为了使您的模型可编辑，只需添加以下行：（请记住，在这种情况下，我使用的是混合模型，来自服务器和在客户端中添加扩展名，并且可编辑的只是工作......这很棒）：

```
 ko.editable(g);
    ko.applyBindings(g); 
```

从这里你只需要使用插件添加的扩展*来玩你的绑定，例如，我有一个按钮来开始像这样编辑我的字段，在这个按钮中我开始编辑过程：*

```
 this.editMode = function () {
        this.isInEditMode(!this.isInEditMode());
        this.beginEdit();
    }; 
```

然后我有提交和取消按钮，代码如下：

```
 this.executeCommit = function () {
        this.commit();
        this.isInEditMode(false);
    };
    this.executeRollback = function () {
        if (this.hasChanges()) {
            if (confirm("Are you sure you want to discard the changes?")) {
                this.rollback();
                this.isInEditMode(false);
            }
        }
        else {
            this.rollback();
            this.isInEditMode(false);
        }
    }; 
```

最后，我有一个字段来指示字段是否处于编辑模式，这只是绑定启用属性。

```
this.isInEditMode = ko.observable(false); 
```

## 关于您的阵列问题

> 我可能有一些 foreach 循环或其他东西来从学生视图模型的集合中获取数据。
> 
> 然后，当我提交表单时，我会使用 jquery 和序列化数组并将其发送到控制器操作方法，该方法会将其绑定回视图模型。

您可以对 KO 执行相同操作，在以下示例中，我将创建以下输出：

![在此处输入图像描述](../Images/9446c7cefc949377abc903471201bfae.png)

基本上在这里，您有两个列表，使用 KO 创建`Helpers`并与 KO 绑定，它们绑定了一个`dblClick`事件，当触发时，从当前列表中删除所选项目并将其添加到另一个列表，当您发布到时`Controller`，每个列表的内容列表作为 JSON 数据发送并重新附加到服务器模型

掘金：

*   [牛顿软件](https://nuget.org/packages/Newtonsoft.Json)
*   [jQuery](https://nuget.org/packages/jQuery)
*   [淘汰赛](https://nuget.org/packages/knockoutjs)
*   [淘汰赛制图](https://nuget.org/packages/Knockout.Mapping)

外部[脚本](http://romanych.github.com/ko.editables/)。

### 控制器代码

```
 [HttpGet]
    public ActionResult Index()
    {
        var m = new CourseVM { CourseId = 12, CourseName = ".Net" };

        m.StudentViewModels.Add(new StudentVm { ID = 545, Name = "Name from server", Lastname = "last name from server" });

        return View(m);
    }

    [HttpPost]
    public ActionResult Index(CourseVM model)
    {
        if (!string.IsNullOrWhiteSpace(model.StudentsSerialized))
        {
            model.StudentViewModels = JsonConvert.DeserializeObject<List<StudentVm>>(model.StudentsSerialized);
            model.StudentsSerialized = string.Empty;
        }

        if (!string.IsNullOrWhiteSpace(model.SelectedStudentsSerialized))
        {
            model.SelectedStudents = JsonConvert.DeserializeObject<List<StudentVm>>(model.SelectedStudentsSerialized);
            model.SelectedStudentsSerialized = string.Empty;
        }

        return View(model);
    } 
```

### 模型

```
public class CourseVM
{
    public CourseVM()
    {
        this.StudentViewModels = new List<StudentVm>();
        this.SelectedStudents = new List<StudentVm>();
    }

    public int CourseId { get; set; }

    [Required(ErrorMessage = "Course name is required")]
    [StringLength(100, ErrorMessage = "Course name cannot be this long.")]
    public string CourseName { get; set; }

    public List<StudentVm> StudentViewModels { get; set; }
    public List<StudentVm> SelectedStudents { get; set; }

    public string StudentsSerialized { get; set; }
    public string SelectedStudentsSerialized { get; set; }
}

public class StudentVm
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Lastname { get; set; }
} 
```

### CSHTML 页面

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>CourseVM</legend>

        <div>
            <div class="editor-label">
                @Html.LabelFor(model => model.CourseId)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.CourseId, new { data_bind = "enable: isInEditMode, value: CourseId" })
                @Html.ValidationMessageFor(model => model.CourseId)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.CourseName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.CourseName, new { data_bind = "enable: isInEditMode, value: CourseName" })
                @Html.ValidationMessageFor(model => model.CourseName)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.StudentViewModels);
            </div>
            <div class="editor-field">

                @Html.ListBoxFor(
                    model => model.StudentViewModels,
                    new SelectList(this.Model.StudentViewModels, "ID", "Name"),
                    new
                    {
                        style = "width: 37%;",
                        data_bind = "enable: isInEditMode, options: StudentViewModels, optionsText: 'Name', value: leftStudentSelected, event: { dblclick: moveFromLeftToRight }"
                    }
                )
                @Html.ListBoxFor(
                    model => model.SelectedStudents,
                    new SelectList(this.Model.SelectedStudents, "ID", "Name"),
                    new
                    {
                        style = "width: 37%;",
                        data_bind = "enable: isInEditMode, options: SelectedStudents, optionsText: 'Name', value: rightStudentSelected, event: { dblclick: moveFromRightToLeft }"
                    }
                )
            </div>

            @Html.HiddenFor(model => model.CourseId, new { data_bind="value: CourseId" })
            @Html.HiddenFor(model => model.CourseName, new { data_bind="value: CourseName" })
            @Html.HiddenFor(model => model.StudentsSerialized, new { data_bind = "value: StudentsSerialized" })
            @Html.HiddenFor(model => model.SelectedStudentsSerialized, new { data_bind = "value: SelectedStudentsSerialized" })
        </div>

        <p>
            <input type="submit" value="Save" data-bind="enable: !isInEditMode()" /> 
            <button data-bind="enable: !isInEditMode(), click: editMode">Edit mode</button><br />
            <div>
                <button data-bind="enable: isInEditMode, click: addStudent">Add Student</button>
                <button data-bind="enable: hasChanges, click: executeCommit">Commit</button>
                <button data-bind="enable: isInEditMode, click: executeRollback">Cancel</button>
            </div>
        </p>
    </fieldset>
} 
```

### 脚本

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/knockout-2.1.0.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/knockout.mapping-latest.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ko.editables.js")" type="text/javascript"></script>

<script type="text/javascript">
    var g = null;
    function ViewModel() {
        this.addStudent = function () {
            this.StudentViewModels.push(new Student(25, "my name" + new Date(), "my last name"));
            this.serializeLists();
        };
        this.serializeLists = function () {
            this.StudentsSerialized(ko.toJSON(this.StudentViewModels));
            this.SelectedStudentsSerialized(ko.toJSON(this.SelectedStudents));
        };
        this.leftStudentSelected = ko.observable();
        this.rightStudentSelected = ko.observable();
        this.moveFromLeftToRight = function () {
            this.SelectedStudents.push(this.leftStudentSelected());
            this.StudentViewModels.remove(this.leftStudentSelected());
            this.serializeLists();
        };
        this.moveFromRightToLeft = function () {
            this.StudentViewModels.push(this.rightStudentSelected());
            this.SelectedStudents.remove(this.rightStudentSelected());
            this.serializeLists();
        };
        this.isInEditMode = ko.observable(false);
        this.executeCommit = function () {
            this.commit();
            this.isInEditMode(false);
        };
        this.executeRollback = function () {
            if (this.hasChanges()) {
                if (confirm("Are you sure you want to discard the changes?")) {
                    this.rollback();
                    this.isInEditMode(false);
                }
            }
            else {
                this.rollback();
                this.isInEditMode(false);
            }
        };
        this.editMode = function () {
            this.isInEditMode(!this.isInEditMode());
            this.beginEdit();
        };
    }

    function Student(id, name, lastName) {
        this.ID = id;
        this.Name = name;
        this.LastName = lastName;
    }

    $(function () {
        var jsonModel = '@Html.Raw(JsonConvert.SerializeObject(this.Model))';
        var mvcModel = ko.mapping.fromJSON(jsonModel);

        var myViewModel = new ViewModel();
        g = ko.mapping.fromJS(myViewModel, mvcModel);

        g.StudentsSerialized(ko.toJSON(g.StudentViewModels));
        g.SelectedStudentsSerialized(ko.toJSON(g.SelectedStudents));

        ko.editable(g);
        ko.applyBindings(g);
    });
</script> 
```

注意：我刚刚添加了这些行：

```
 @Html.HiddenFor(model => model.CourseId, new { data_bind="value: CourseId" })
        @Html.HiddenFor(model => model.CourseName, new { data_bind="value: CourseName" }) 
```

因为当我提交表单时，我的字段被禁用，所以值没有传输到服务器，这就是为什么我添加了几个隐藏字段来解决问题

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-15T17:19:15.653

您可以将 ASP.NET MVC 视图模型序列化为 javascript 变量：

```
@model CourseVM
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
    // go ahead and use the model javascript variable to bind with ko
</script> 
```

[淘汰文档](http://knockoutjs.com/documentation/introduction.html)中有很多示例可供您阅读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T16:15:38.687

要在服务器映射后获得额外的计算属性，您需要进一步增强客户端的视图模型。

例如：

```
var viewModel = ko.mapping.fromJS(model);

viewModel.capitalizedName = ko.computed(function() {...}, viewModel); 
```

因此，每次从原始 JSON 映射时，都需要重新应用计算的属性。

此外，映射插件提供了增量更新视图模型的能力，而不是每次来回重新创建它（在 中使用附加参数`fromJS`）：

```
// Every time data is received from the server:
ko.mapping.fromJS(data, viewModel); 
```

这会在您的模型上执行仅映射属性的增量数据更新。您可以在[映射文档中阅读更多相关信息](http://knockoutjs.com/documentation/plugins-mapping.html)

[您在 Darin 的回答FluentJSON](https://github.com/paultyng/FluentJson.NET)包的评论中提到。我是那本书的作者，但它的用例比 ko.mapping 更具体。如果您的视图模型是一种方式（即服务器->客户端），我通常只会使用它，然后数据以某种不同的格式（或根本不）发回。或者，如果您的 javascript 视图模型需要采用与服务器模型完全不同的格式。

# php - 输入 PHP/mysql 表值需要快速帮助

> ID：11055339
> 
> 赞同：0
> 
> 时间：2012-06-15T17:15:47.727
> 
> 标签：php, mysql

我试图将某些值输入到数据库表中，尽管它正在通过，但并非所有值都被填充。

我要跳过一些部分，因为这并不是说我没有连接等，问题是虽然我**正在**通过数据库并与数据库进行通信，但在信息上传时，只有某些字段被填充。

例如，

我的“用户名/密码”字段在数据库中具有相同的值，所以我不确定为什么一个字段被填充而另一个不是......

但这里有一些代码..有很多所以我要复制/粘贴重要部分

```
the html for example is

<input type="text" name="uname" id="uname" value="Enter Desired Username"/><br/>
<input type="text" name="upass" id="upass" value="Enter Desired Password"/><br/>

etc...you know same old html 
```

连接工作的php等..

变量

```
$c2d = "the db connection here";
$userName = mysql_real_escape_string($_POST['uname']);
$userPass = mysql_real_escape_string($_POST['upass']); 
```

//在这里我设置了我所有的变量，但这是有问题的。

```
$addDetails2DbQueryS = "INSERT INTO accounts (appUname, appUpass)VALUES('$userName','$userPass')";

$addDetails2DbQueryS = "INSERT INTO accounts (appUname, appUpass) VALUES('$userName','$userPass')"; 
```

//在此处执行一些检查，例如正在创建的帐户是否已经存在等。这也可以工作。

然后当一切都好时，将帐户添加到我使用它的数据库中

```
$addDetails2DbQuerySDoIt = mysqli_query($c2d, $addDetails2DbQueryS) or die("error [003] could not add acc to db" . mysqli_error); 
```

发生的事情是，用户名已记录，但密码字段为空

任何想法我做错了什么？在此先感谢和任何帮助我很高兴和谦虚地感谢。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:26:50.017

您使用了错误的转义功能...您正在使用`mysql_real_escape_string`扩展[`ext/mysql`](http://us.php.net/manual/en/book.mysql.php)名，但实际上您正在使用[`MySQLi`](http://us.php.net/manual/en/book.mysqli.php)扩展名进行插入，因此您应该使用其版本的功能`mysqli_real_escape_string`。

使用一个数据库驱动程序或另一个，而不是两者:-)

我实际上希望您获得这两个值，因为如果您没有与调用`false`建立数据库连接，则应该返回 false 并生成警告：`mysql_connect``mysql_real_escape_string`

> MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

如果您已建立`mysql_connect()`连接，那么我预计您`mysqli_query()`会失败，因为您从未与`mysqli_connect()`.

我认为，一旦您选择了 3 个 DB 驱动程序之一并且只使用其中一个的类/功能，您的大多数问题都会消失：

1.  [`PDO`](http://us.php.net/manual/en/book.pdo.php) （我最喜欢的，优雅的，非常易于使用，如果需要，更容易将代码移植到 diff.db）
2.  [`MySQLi`](http://us.php.net/manual/en/book.mysqli.php)（提供最佳范围的 MySQL 特定功能，但使用起来更笨重）
3.  [`ext/mysql`](http://us.php.net/manual/en/book.mysql.php)（尽可能避免像瘟疫一样）

# emacs - emacs24中的词法评估

> ID：11055340
> 
> 赞同：4
> 
> 时间：2012-06-15T17:15:48.223
> 
> 标签：emacs, elisp, emacs24

谁能解释一下`eval`emacs24是如何工作的？从`eval`描述：

```
eval is a built-in function in `C source code'.

(eval FORM &optional LEXICAL)

Evaluate FORM and return its value.
If LEXICAL is t, evaluate using lexical scoping. 
```

这是否意味着，这样的事情应该有效？

```
(setq lexical-binding t)
(let ((myvarr 42)) (eval 'myvarr t)) ; (void-variable myvarr) 
```

更新：

```
(setq lexical-binding nil)
;; => nil
(let ((myvarr 42)) (eval 'myvarr))
;; => 42 (#o52, #x2a, ?*)
(setq lexical-binding t)
;; => t
(let ((myvarr 42)) (eval 'myvarr))
;; Debugger entered--Lisp error: (void-variable myvarr)
;;   eval(myvarr)
;;   (let ((myvarr 42)) (eval (quote myvarr)))
;;   (progn (let ((myvarr 42)) (eval (quote myvarr))))
;;   eval((progn (let ((myvarr 42)) (eval (quote myvarr)))) t)
;;   eval-last-sexp-1((4))
;;   eval-last-sexp((4))
;;   call-interactively(eval-last-sexp nil nil)
;;   call-last-kbd-macro(nil kmacro-loop-setup-function)
;;   kmacro-call-macro(nil nil)
;;   kmacro-end-or-call-macro(nil)
;;   call-interactively(kmacro-end-or-call-macro nil nil)
(ignore-errors (let ((myvarr 42)) (eval 'myvarr)))
;; => nil
(setq lexical-binding nil)
;; => nil
(eval (let ((myvarr 42)) (eval 'myvarr)) t)
;; => 42
(eval '(let ((myvarr 42)) (eval 'myvarr)) t)
;; Debugger entered--Lisp error: (void-variable myvarr)
;;   eval(myvarr)
;;   (let ((myvarr 42)) (eval (quote myvarr)))
;;   eval((let ((myvarr 42)) (eval (quote myvarr))) t)
;;   eval((eval (quote (let ((myvarr 42)) (eval (quote myvarr)))) t) nil)
;;   eval-last-sexp-1((4))
;;   eval-last-sexp((4))
;;   call-interactively(eval-last-sexp nil nil) 
```

Emacs 版本：`GNU Emacs 24.1.1 (i386-mingw-nt6.1.7600) of 2012-06-10 on MARVIN`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:03:56.647

由于词法绑定破坏了许多现有的 elisp 代码，因此它是一个可选功能。

用一个简单的例子可以最好地理解词法作用域：

```
(defun some-func (callback)
 (let ((a 5))
  (funcall callback)))

(let ((a 3))
 (some-func (lambda () a))) 
```

在大多数语言下，这将返回 3，因为从底部表单中似乎看不到`a`in 。`some-func`但是，在 24 之前的 emacs 或没有词法范围的情况下，此程序返回 5。

这导致了许多意想不到的惊喜以及交互功能之间经常隐藏的微妙错误；为了解决这个问题，emacs 24 引入了词法作用域，但如前所述，它是向后兼容的。

选择加入动态范围的机制是文件变量`lexical-binding`（每个源文件都打开它）或作为您看到的选项`eval`

因此，如果我们重写示例以使用`eval`：

```
(eval '(let ((a 3))
        (some-func (lambda () a))) nil) ; => 5

(eval '(let ((a 3))
        (some-func (lambda () a))) t) ; => 3 
```

在您的示例中，不同之处不是内部代码是否`eval`是动态范围的，而是它周围的代码是否是。变量绑定受词法作用域影响，而不是变量查找。我不完全确定`eval`' 在这里的语义，但似乎正在发生的事情（以及最有意义的事情）是`eval`在全新的词汇上下文中评估表达式。所以外部词法范围从 内部隐藏`eval`，但动态范围仍然可见（因此当文件是动态范围时查找成功，但不是其他情况）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T00:15:18.070

我在 Emacs 24 中找不到该`eval`函数的形式语义，但假设它的工作方式与 Common Lisp 中的相同（如 cobbal 所示），您的所有示例都是有意义的。[Common Lisp HyperSpec](http://www.lispworks.com/documentation/HyperSpec/Body/f_eval.htm)说：

> 句法：
> 
> > `eval` *形式*
> 
> 描述：
> 
> > **在当前动态环境和*****空*****词法环境**中评估*形式* 。

 *让我们在记住描述的情况下一个一个地看你的例子。

```
(setq lexical-binding t)
(let ((myvarr 42)) (eval 'myvarr t)) ; Lisp error: (void-variable myvarr) 
```

词法绑定通过设置`t`来启用`lexical-binding`，因此`myvarr`变成了词法绑定变量，`eval`如上所述，该变量在函数内部不可用。`eval`函数的选项 ,在`t`这里无关紧要。

```
(setq lexical-binding nil)
(let ((myvarr 42)) (eval 'myvarr)) ; 42 
```

`nil`设置为禁用词法绑定`lexical-binding`，因此`myvarr`变为动态绑定变量，可在`eval`函数内部使用。函数的`eval`选项 implicilty`nil`在这里无关紧要。

```
(setq lexical-binding t)
(let ((myvarr 42)) (eval 'myvarr)) ; Lisp error: (void-variable myvarr) 
```

词法绑定通过设置`t`来启用`lexical-binding`，所以`myvarr`变成了词法绑定变量，在`eval`函数内部是不可用的。函数的`eval`选项 implicilty`nil`在这里无关紧要。

```
(ignore-errors (let ((myvarr 42)) (eval 'myvarr))) ; nil 
```

同上。

```
(setq lexical-binding nil)
(eval (let ((myvarr 42)) (eval 'myvarr)) t) ; 42 
```

通过设置为 禁用词法绑定`nil`，`lexical-binding`因此`myvar`变为动态绑定变量，可在内部`eval`函数中使用。请注意`let`，包括内部`eval`函数在内的表单在调用外部函数之前被评估为参数准备`eval`。外部函数和内部`eval`函数的选项在这里都不相关。

```
(eval '(let ((myvarr 42)) (eval 'myvarr)) t) ; Lisp error: (void-variable myvarr) 
```

`myvarr`变成了一个词法绑定的变量，它在内部是不可用的`eval`。请注意，由于`'`，表单由启用词法绑定`let`的外部函数评估。`eval`外部`eval`函数的选项在这里是相关的，而内部`eval`函数的不是。

* * *

## 为什么是空词法环境？

也就是说，我认为，因为如果使用当前的词汇环境，这种 alpha 等价性将不再成立。

Alpha-equivalence 是一种正式的方式来表示函数参数的名称并不重要。例如，`(lambda (x) x)`和`(lambda (y) y)`是 alpha 等价的，我们认为它们是相同的。Alpha 等效性允许我们随时更改函数参数的名称。我们认为它是理所当然的，如果它不成立，我们会感到非常惊讶。有关更正式的解释，请参阅[Lambda 演算](http://en.wikipedia.org/wiki/Lambda_calculus)和[Alpha-equivalence](http://twelf.org/wiki/Alpha-equivalence)。

但是当涉及自由变量的代码值（称为开放代码）可以像在 Lisp 中一样被传递时，alpha 等效性就会出现一些问题。让我们看看下面的例子：

```
;;; -*- lexical-binding: t -*-
(lambda (x) (lambda (y) (eval x))) '(1+ y) 
```

如果`eval`在当前的词法环境下求值，形式将等价于`(lambda (y) (1+ y))`. 现在看下面的程序：

```
(lambda (x) (lambda (z) (eval x))) '(1+ y) 
```

这个程序与前一个程序的不同之处仅在于它的参数名称，`z`而不是`y`，因此我们自然希望它们以相同的方式运行。但后一个程序的计算结果为`(lambda (z) (1+ y))`，这与 绝对不同`(lambda (y) (1+ y)`。考虑将结果函数值应用于同一参数时会发生什么。关键是当允许包含自由变量的代码值时，函数参数的名称确实很重要。

在这里，为了保持 alpha 等效性，我们有两个选择：我们不能放弃 alpha 等效性，因为它感觉很自然，而且我们已经非常习惯了。第一个选项是`eval`像（Common）Lisp 那样在空词法环境下进行评估。使用此选项，自由变量`y`in`(1+ y)`不会绑定到 in 的形`y`参`(lambda (y) ...)`。因此，这两个程序的行为一致，并且 alpha 等效性得到了很好的保留。另一种选择是通过从一开始就不允许开放代码值来排除问题。听说是[MetaOCaml选择的方法](http://www.metaocaml.org/)

Someone may ask "if so, why the current dynamic environment?". For dynamically bound (a.k.a. special) variables, we already acknowledge well that their names are so important and that, if you change them carelessly, your program will be broken.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T05:55:16.517

您内部形式的奇怪行为`eval`似乎类似于`symbol-value`或`add-to-list`在词法绑定下。

[emacs 词法作用域和引用变量](https://stackoverflow.com/questions/12019496/emacs-lexical-scoping-and-quoted-variable-name)

*   在词法绑定下，符号的值单元格仅保存全局值（可以不同于变量的词法绑定值）。

*   使用带引号的变量（例如 in `(eval 'var)`、`(eval '(print var))`、`(add-to-list 'var 1)`）只能在符号的值单元格上获取或设置。

避免遇到这种问题的做法是：

*   尽可能尝试定义和使用宏而不是 eval

*   如果您想创建/声明一个全局变量，请避免使用`setq`来创建它，使用`defvar`或`defcustom`将`defconst`其创建为特殊变量。特殊变量始终是动态范围的，即使在词法绑定模式下也是如此。*

# drupal-6 - Drupal 6 View 基本设置变量的可用性

> ID：11055344
> 
> 赞同：1
> 
> 时间：2012-06-15T17:15:57.997
> 
> 标签：drupal-6, views

我一直在用 Drupal 6 做一些基本的视图主题，但我很难弄清楚如何访问某些变量。这是我的设置：

*   我有几个块显示的一个视图。
*   我使用三个模板来覆盖默认值：
    *   views-view-unformatted-my-list-blocks.tpl.php（样式模板）
    *   views-view-my-list-blocks.tpl.php（行模板）
    *   views-view-fields-my-list-blocks-block-1.tpl.php（显示模板示例）

现在，如果我只是将默认代码复制到模板中，一切似乎都按原样显示。但我注意到在我的样式模板中，标题变量在那里，但什么也没有出现。即使我在基本设置中设置了显示标题，也没有任何显示。我还想从基本设置中访问我的 CSS 类变量，但我也不确定要使用什么变量。

任何人都可以阐明这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:59:08.380

这是执行此操作的示例

[http://www.expresstut.com/content/themeing-views-drupal-6](http://www.expresstut.com/content/themeing-views-drupal-6) http://www.expresstut.com/content/themeing-views-drupal-6-part-2

# salesforce - 批处理 Apex 和游标

> ID：11055347
> 
> 赞同：2
> 
> 时间：2012-06-15T17:16:34.313
> 
> 标签：salesforce, apex-code

我对 Apex 批处理文档中的这一段有困难。这是关于我还没有了解的查询游标。有人可以解释一下 QC 和这里发生了什么吗？

用户一次最多可以打开 50 个查询游标。例如，如果打开了 50 个游标，并且客户端应用程序仍然登录，而同一用户尝试打开新游标，则释放 50 个游标中最早的一个。请注意，此限制与批处理 Apexstart 方法不同，每个用户一次最多可以打开五个查询游标。其他批处理 Apex 方法的上限为 50 个游标。

不同 Force.com 功能的光标限制单独跟踪。例如，您可以同时打开 50 个 Apex 查询游标、50 个批处理游标和 50 个 Visualforce 游标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T19:00:26.553

我理解查询游标返回一个批处理和[锁定](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_database_batch.htm#database_querylocator)的记录列表（锁定，在某种意义上，其他更新/编辑，例如批处理 Apex 之外，只要正在使用的记录就被阻止）。通常，查询游标在 Apex 中由[`Database.getQueryLocator`](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_methods_system_database.htm)方法返回。

记录不是一次全部返回，而是分成多批数据。如果有 500 条记录，可能只返回前 200 条（这由[批处理范围/大小](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_database.htm#executeBatch)决定，默认为 200），然后批处理执行代码将再次运行第二个 200 条，最后一次运行100 条记录。相同的概念适用于[Visualforce 分页](http://blog.jeffdouglas.com/2009/07/14/visualforce-page-with-pagination/)[`Database.getQueryLocator`](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_methods_system_database.htm)（请注意示例中标准控制器初始化中使用的调用）。

关于限制，基本上，您只能[`Database.getQueryLocator`](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_methods_system_database.htm)同时打开/运行 50 个调用、50 个批处理 Apex 类和 50 个带有分页（使用示例中描述的方法）的 Visualforce 页面（此限制曾经是 5；50是一个巨大的进步）。

# c++ - 什么更好用于自动返回类型：decltype 或 std::common_type<>::type （如果可能）？

> ID：11055350
> 
> 赞同：2
> 
> 时间：2012-06-15T17:16:38.990
> 
> 标签：c++, c++11, typetraits, decltype

作为对我[最后一个问题](https://stackoverflow.com/questions/11052842/error-with-using-decltype-in-c11-creating-opaque-error-message-in-gcc-4-7-0)的回答，建议尽可能`std::common_type<X,Y>::type`在自动返回类型的声明中使用，而不是我原来的`decltype()`. 但是，这样做我遇到了问题（使用 gcc 4.7.0）。考虑以下简单代码

```
template<typename> class A;
template<typename X> class A {
  X a[3];
  template <typename> friend class A;
public:
  A(X a0, X a1, X a2) { a[0]=a0; a[1]=a1; a[2]=a2; }
  X operator[](int i) const { return a[i]; }
  X operator*(A const&y) const          // multiplication 0: dot product with self
  { return a[0]*y[0] + a[1]*y[1] + a[2]*y[2]; }
  template<typename Y>
  auto operator*(A<Y> const&y) const -> // multiplication 1: dot product with A<Y>
#ifdef USE_DECLTYPE
    decltype((*this)[0]*y[0])
#else
    typename std::common_type<X,Y>::type
#endif
  { return a[0]*y[0] + a[1]*y[1] + a[2]*y[2]; }
  template<typename Y>
  auto operator*(Y s) const ->          // multiplication 2: with scalar
#ifdef USE_DECLTYPE
    A<decltype((*this)[0]*s)>
#else
    A<typename std::common_type<X,Y>::type>
#endif
  { return A<decltype((*this)[0]*s)>(s*a[0],s*a[1],s*a[2]); }
};

int main()
{
  A<double> x(1.2,2.0,-0.4), y(0.2,4.4,5.0);
  A<double> z = x*4;
  auto dot = x*y;           // <-- 
  std::cout<<" x*4="<<z[0]<<' '<<z[1]<<' '<<z[2]<<'\n'
           <<" x*y="<<dot<<'\n';
} 
```

什么时候，代码`USE_DECLTYPE`可以`#defined`在 gcc 4.7.0 下编译并运行良好。但除此之外，中指示的行`main()`调用乘法 2，如果没有错的话，这似乎很奇怪。这可能是使用的后果/副作用`std::common_type`还是 gcc 的错误？

我一直认为返回类型与选择众多拟合模板函数中的哪一个无关......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T18:37:15.783

使用的建议`common_type`是虚假的。

使用`decltype`您在其他问题中遇到的问题只是一个[GCC bug](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52816)。

使用时您在此问题中遇到的问题`common_type`是因为`std::common_type<X, Y>::type`告诉您将从表达式中获得的类型：

```
condition ? std::declval<X>() : std::declval<Y>() 
```

即 an`X`和 a`Y`都可以转换成什么类型​​。

`x * y`一般来说，这与, if的结果完全无关，`X`并且`Y`有一个返回完全不同类型的重载`operator*`。

在您的特定情况下，您有`x*y`两个变量都是 type的表达式`A<double>`。重载解析尝试检查每个重载`operator*`以查看它是否有效。作为重载决议的一部分，它实例化这个成员函数模板：

```
template<typename Y>
    auto operator*(Y s) const ->
    A<typename std::common_type<X,Y>::type>; 
```

用`A<double>`模板参数代替`Y`。试图实例化`common_type<double, A<double>>`无效的，因为表达式

```
condition ? std::declval<double>() : std::declval< A<double> >() 
```

无效，因为您不能转换`A<double>`为`double`或反之亦然，或任何其他常见类型。

错误不会发生，因为*调用*`operator*`了重载，它发生是因为必须实例化模板才能决定应该调用哪个运算符，并且实例化它的行为会导致错误。编译器永远不会决定调用哪个运算符，错误会在它到达之前停止它。

 *所以，正如我所说，使用的建议`common_type`是虚假的，它可以防止 SFINAE 禁用与参数类型不匹配的成员函数模板（正式地说，SFINAE 在这里不起作用，因为替换错误发生在“立即上下文”之外模板的定义，即它发生在`common_type`函数签名中的定义内，SFINAE 适用于此。）

* * *

允许专门`std::common_type`化，因此它知道没有隐式转换的类型，因此您*可以*专门化它，使其`common_type<double, A<double>>::type`有效并生成 type `double`，如下所示：

```
namespace std {
  template<typename T>
    struct common_type<T, A<T>> { typedef T type; };
} 
```

**这样做将是一个非常糟糕的主意！** 应该给出的答案是“这`common_type`两种类型都可以安全地转换成什么类型​​？”。上面的专业化颠覆了它，给出了“将这些类型相乘的结果是什么？”的答案。这是一个完全不同的问题！这将和专业化一样愚蠢`is_integral<std::string>`。

如果您想回答“诸如*expr*之类的一般表达式的类型是什么？” 然后使用`decltype(expr)`，这就是它的用途！*

# css - 绝对定位的 div 没有正确堆叠 IE

> ID：11055352
> 
> 赞同：0
> 
> 时间：2012-06-15T17:16:44.467
> 
> 标签：css, internet-explorer, css-position

我有类似于以下的代码：

```
<div class="container">
   <div class="overlay">
      // hover content
   </div>
   <img/>
</div>

.container{
    position:relative;
}
.overlay{
    display:block;
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
} 
```

基本上，当有人将鼠标悬停在覆盖 div 上时，会显示该 div 的内容。这适用于所有浏览器，除了 IE（当然）

在 IE 中，覆盖 div 位于图像后面，因此悬停不起作用。如果在覆盖 div 上放置背景（颜色或图像），它将定位在图像上并工作，但我想避免使用背景。

我也尝试过使用 z-index，但没有成功。即使使用更高的 z-index，并且在定义的 z-index 堆栈中（对于 IE），它仍然位于图像后面。

这是在所有 IE 版本 6-9 中。

有谁知道这方面的任何解决方法/修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:21:02.210

你可以通过一个技巧来修复它。将覆盖 div 的背景设置为完全透明的图像（png）。

# .net - WPF ListBox with Grouped CollectionViewSource will not de-select first SelectedItem

> ID：11055356
> 
> 赞同：2
> 
> 时间：2012-06-15T17:17:06.867
> 
> 标签：.net, wpf, xaml, itemssource, collectionviewsource

Having an issue with a LisBox with a grouped CollectionViewSource ItemsSource in .NET 4.0\. Pretty sure it's a bug, but can't find a good workaround. This is the entire code to repro the problem.

```
<Window x:Class="LBBug.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:LBBug"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Window.Resources>
    <CollectionViewSource Source="{Binding Data}" x:Key="cvs">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="GroupCol" />
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>
</Window.Resources>
<Grid>
    <ListBox ItemsSource="{Binding Source={StaticResource cvs}}" IsSynchronizedWithCurrentItem="True">
        <ListBox.GroupStyle>
            <GroupStyle>

            </GroupStyle>
        </ListBox.GroupStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=Col1}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>
</Window>

public class Model
{
    public string GroupCol { get; set; }
    public string Col1 { get; set; }
    public string Col2 { get; set; }

}

public class ViewModel
{
    private List<Model> m_Data;
    public List<Model> Data
    {
        get
        {
            if (m_Data == null)
            {
                m_Data = new List<Model>();
                m_Data.Add(new Model { GroupCol = "Group1", Col1 = "Col1-1", Col2 = "Col2-1" });
                m_Data.Add(new Model { GroupCol = "Group1", Col1 = "Col1-1", Col2 = "Col2-1" });
                m_Data.Add(new Model { GroupCol = "Group1", Col1 = "Col1-1", Col2 = "Col2-1" });
                m_Data.Add(new Model { GroupCol = "Group2", Col1 = "Col1-2", Col2 = "Col2-2" });
                m_Data.Add(new Model { GroupCol = "Group2", Col1 = "Col1-2", Col2 = "Col2-2" });
                m_Data.Add(new Model { GroupCol = "Group2", Col1 = "Col1-2", Col2 = "Col2-2" });
            }
            return m_Data;
        }

    }

} 
```

When Window launches, the first item is selected in the CVS and selected in ListBox:

[I can't post images, visualize a simple window with grouped listbox that has first item in the first group selected]

When I click on a new item (position 2 here), the initially selected item does not de-select. The CVS is updated with the newly selected item, but I can't re-select the first item (in position 0) by clicking directly on it once I move off of it.

[now visualize a listbox with first and 3rd items selected; yes, it's in single select mode]

If I hold the mouse down and drag up and down the list over the "stuck" item, it will de-select and start working. Also, if I use the keyboard to cursor back to the stuck item, it will de-select when I move down off of it with the keyboard. The problem is with the initial item selected in the CVS (i.e. not just position 0).

If I change the project to .NET 3.5, it works as expected. I've seen this reported, but thought I saw where it was fixed in 4.0\.

Can you think of ANY reasonable work-around for this? I can sort of get it working by turning of IsSynchronized.. and manually watching changes to the CVS, then using a timer to set the current item on the LB, but that's getting really messy and hard to deal with all of the scenarios. I want to be able to manipulate the underlying data and have the ListBox keep up with what's selected.

Really hoping there's a straightforward way to deal with this. As it is, it appears you can't really do a grouped listbox in .NET 4; seems very odd it's not a more well-known issue.

# authorization - 无需密码即可登录 vbulletin（仅限用户名和哈希）

> ID：11055357
> 
> 赞同：2
> 
> 时间：2012-06-15T17:17:09.193
> 
> 标签：authorization, vbulletin

我整天都在寻找这个问题的答案：如何在不使用密码的情况下登录 vbulletin。

例如，我将请求中的用户名发送到模块并登录用户。

我发现的是：

```
verify_authentication('username', 'pass', '', '', TRUE, TRUE);
process_new_login('', TRUE, ''); 
```

或者

```
verify_authentication('username', '', 'md5(pass)', 'md5(pass)', TRUE, TRUE);
process_new_login('', TRUE, ''); 
```

但是我没有密码，也没有 md5 哈希，我只有`md5(md5(pass+salt))`.

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:20:03.573

找到解决方案。我们需要的只是用户ID。

```
 $vbulletin->userinfo = fetch_userinfo($userid);
    vbsetcookie('userid', $vbulletin->userinfo['userid'], true, true, true);
    vbsetcookie('password', md5($vbulletin->userinfo['password'] . COOKIE_SALT), true, true, true);
    exec_unstrike_user($vbulletin->userinfo['username']);
    $logintype = ($vbulletin->userinfo['usergroupid'] == '6') ? 'cplogin' : '';
    process_new_login($logintype, TRUE, TRUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:25:48.093

我不清楚你想做什么。
最后是一个可能的解决方案，但首先，这是检查密码的方式。

`md5(md5(pass+salt))`是原始文本密码存储在数据库中的方式。

当您通过论坛顶部的登录字段登录时，JavaScript 用于`md5(password)`在用户名和密码发布到服务器之前运行。如果未启用 JavaScript，则会发布纯文本密码。

该`verify_authentication()`函数尝试了三种验证密码的方法：

```
if (
  $vbulletin->userinfo['password'] != iif($password AND !$md5password, md5(md5($password) . $vbulletin->userinfo['salt']), '') AND
  $vbulletin->userinfo['password'] != iif($md5password, md5($md5password . $vbulletin->userinfo['salt']), '') AND
  $vbulletin->userinfo['password'] != iif($md5password_utf, md5($md5password_utf . $vbulletin->userinfo['salt']), '')
) 
```

* * *

如果发送了明文密码 ( `$password`)，它将通过它`md5(md5(pass+salt))`并与数据库中的散列密码进行比较：

```
$vbulletin->userinfo['password'] != iif($password AND !$md5password, md5(md5($password) . $vbulletin->userinfo['salt']), '') 
```

* * *

如果密码由 JavaScript ( `$md5password`) 散列，则将其传递`md5(pass+salt)`并与数据库中的散列密码进行比较：

```
$vbulletin->userinfo['password'] != iif($md5password, md5($md5password . $vbulletin->userinfo['salt']), '') 
```

* * *

如果密码由 JavaScript 散列并且正在使用 UTF ( `$md5password_utf`)，则将其传递`md5(pass+salt)`并与数据库中的散列密码进行比较：

```
$vbulletin->userinfo['password'] != iif($md5password_utf, md5($md5password_utf . $vbulletin->userinfo['salt']), '') 
```

* * *

如果您希望某个用户名无需密码即可登录，您可以尝试使用`login_failure`钩子添加插件。您的 pluin 可以检查用户名，如果它与您正在使用的特定用户名匹配，您可以继续登录过程。该插件将包含：

```
if ($vbulletin->GPC['vb_login_username'] == 'your_username')
{
  exec_unstrike_user($vbulletin->GPC['vb_login_username']);

  process_new_login($vbulletin->GPC['logintype'], $vbulletin->GPC['cookieuser'], $vbulletin->GPC['cssprefs']);

  do_login_redirect(); 
} 
```

# html - 不会提交登录详细信息

> ID：11055360
> 
> 赞同：0
> 
> 时间：2012-06-15T17:17:18.460
> 
> 标签：html, login

我正在尝试让我们的登录门户正常工作，但由于某种原因它不接受登录详细信息。它只是不会提交信息，它只是刷新页面。

关于如何解决这个问题的任何想法都将不胜感激。

非常感谢！

```
 <div id="nav">

        <ul>
                <li id="login">
                        <a id="login-trigger" href="#">
                                Log In <span>▼&lt;/span>
                        </a>
                         <div id="login-content">
                                <form>
                                <form action="https://na6.salesforce.com/secur/login_portal.jsp" method="POST">
    <input type="hidden" value="00D80000000anEa" name="orgId">
    <input type="hidden" value="060800000006ANB" name="portalId">
    <input type="hidden" value="true" name="useSecure">
    <input type="hidden" value="2" name="loginType">
    <input type="hidden" name="action" value="loginAction">
                                <fieldset id="inputs">
            <input id="txtUserIdGutter" class="InputText" type="text" name="Email" placeholder="Your email address" required>

            <input id="txtPasswordGutter" class="InputText" type="password" name="Password" placeholder="Password" required>
                                 </fieldset>
                                 <fieldset id="actions">
                                 <input type="submit" id="submit" value="Log in">
                                                <label><input type="checkbox" checked="checked"> Keep me signed in</label>
                                                <label><a href="https://na6.salesforce.com/secur/forgotpasswordp.jsp?orgId=00D80000000anEa&amp;portalId=060800000006ANB&amp;pLu=http%3A%2F%2Fwww.carrierstore.com%2F">Forgot Password?</a></label>
                                        </fieldset>
                                </form>
                        </div>
                </li>

        </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:19:08.567

拿出你的额外`<form>`标签。

```
 <div id="login-content">
<!-- Remove this line: -->     <form>
                               <form action="https://na6.salesforce.com/secur/login_portal.jsp" method="POST"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:22:28.527

当页面刷新时，它应该击中你的代码。
您是否有希望调用代码的日志行或断点？

此外，您有双重形式的标签：

```
<form><form action="https://na6.salesforce.... 
```

尝试删除第一个。

# asp.net - web.config 中的加密连接字符串

> ID：11055366
> 
> 赞同：2
> 
> 时间：2012-06-15T17:18:25.873
> 
> 标签：asp.net, encryption, web-config, connection-string

当加密的连接字符串保存在外部配置文件中并由 asp.net 应用程序的 web.config 的 connectionStrings 部分中的 configSource 属性指定时，如何在 C# 代码中读取加密的连接字符串？

外部配置文件应该只有 connectionStrings 节点，但是当它被加密时，configDataProvider 节点也应该存在于同一个文件中。因此它不能在 configSource 属性中使用。

我已经加密了连接字符串，并希望将它放在外部配置文件中。如何处理？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:33:56.187

在您的 app.config 中：

```
<configuration>
    <connectionStrings configSource="foo.config" />
    ...
</configuration> 
```

在你的`foo.config`：

```
<connectionStrings configProtectionProvider="DataProtectionConfigurationProvider">
    <EncryptedData>
        <CipherData>
            <CipherValue>
                AQAAANCMnd8BFdE....
            </CipherValue>
        </CipherData>
    </EncryptedData>
</connectionStrings> 
```

并在您的代码中：

```
ConfigurationManager.ConnectionStrings["someKey"] 
```

# php - MySQL PDO Count Rows - 我可以提高效率吗？

> ID：11055369
> 
> 赞同：2
> 
> 时间：2012-06-15T17:18:38.817
> 
> 标签：php, mysql, oop, pdo

所以，我一直在学习 PDO。到目前为止，老实说，由于完成小任务需要大量代码，我一点也不印象深刻。但是，如果我能让我的代码高效且可重用，我还是愿意进行转​​换。

我的问题是：我可以让这段代码更有效率吗？高效，我的意思是 A) 占用更少的线路，B) 运行得更快。我担心我做错了。但是，由于缺少一个`num_rows()`功能，我想不出更好的方法。

```
try
{
    $sth = $dbh->prepare("SELECT * FROM table_name");
    $sth->execute();

    if (count($result = $sth->fetchAll()))
    {
        foreach ($result as $value)
        {
            // Rows returned! Loop through them.
        }
    }
    else
    {
        // No rows returned!
    }
}
catch (PDOException $e)
{
    // Exception!
} 
```

这写得好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:41:33.880

据我的研究表明，没有。没有办法更简洁或更合乎逻辑地重写这段代码——它的方式是完全优化的。:) 它很容易使用，所以这绝对不是一件坏事！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:23:03.690

使用[PDO::query()](http://php.net/manual/en/pdostatement.rowcount.php)发出`SELECT COUNT(*)`与预期 SELECT 语句具有相同谓词的语句

然后，使用[PDOStatement::fetchColumn()](http://php.net/manual/en/pdostatement.rowcount.php)检索将返回的行数

```
$sql = "SELECT COUNT(*) FROM table_name";
if ($res = $conn->query($sql))
{
/* Check the number of rows that match the SELECT statement */
$res->fetchColumn(); //This will give you the number of rows selected//
} 
```

制作一个通用功能，您需要做的就是`select count`根据您的需要发送一个。您可以通过将 $select 划分为更多变量来进行更一般的操作。

```
function countRows($select)
{
    if ($res = $conn->query($select))
    {
    /* Check the number of rows that match the SELECT statement */
    return $res->fetchColumn(); //This will give you the number of rows selected//
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T17:21:48.990

不，您需要使用 PDO 的 rowCount 方法。

```
try
{
    $sth = $dbh->prepare("SELECT * FROM table_name");
    $sth->execute();

    if ($sth->rowCount() > 0)
    {
        while ($result = $sth->fetch())
        {
            // Rows returned! Loop through them.
        }
    }
    else
    {
        // No rows returned!
    }
}
catch (PDOException $e)
{
    // Exception!
} 
```

# javascript - rails precompile 为什么javascript不能在本地工作，但在heroku它可以工作

> ID：11055373
> 
> 赞同：3
> 
> 时间：2012-06-15T17:18:58.757
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, twitter-bootstrap

因此，在我预编译资产之前，该应用程序在本地运行良好。在部署到 heroku 时，我进行了资产预编译，然后进行了部署，它在 heroku 上运行良好，但现在看来 javascript 坏了。

关于如何解决它的任何建议？我应该删除公用文件夹中的文件还是使用一些配置？

提前致谢

更新

我在开发模式下加载的每个资产文件都会得到一个，这正常吗？

```
Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2012-06-15 19:16:48 +0100
Served asset /home.js - 304 Not Modified (0ms) 
```

这很奇怪。我正在使用 twitter 引导程序，现在为了测试 javascript 是否搞砸了，我添加了一个工具提示 html 示例来检查它是否也崩溃并且它确实有效。

但是我在菜单栏的下拉菜单不起作用。这有多奇怪？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:56:28.710

最后我解决了这个问题。

刚换了`config/environments/development.rb`

```
config.assets.debug = true 
```

到

```
config.assets.debug = false 
```

现在javascript按预期工作

## 更新

现在，当我遇到这个问题时，我实际上运行`rake assets:clean`并清理了浏览器缓存。这将使您的应用程序像以前在开发工作中一样工作。

如果你想有一个更好的过程，你可以创建一个新的分支来运行预编译并保持你的主分支干净。

另一种选择是在 heroku 上运行预编译，这样您就不必在本地进行。我还没有尝试过，但是您必须启用一个“测试版”功能，这样它才能在所有应用程序中正常工作。你可以[在这里阅读](https://devcenter.heroku.com/articles/labs-user-env-compile)

# php - 如何在 PHP 中去除特殊的引号字符？

> ID：11055375
> 
> 赞同：4
> 
> 时间：2012-06-15T17:19:08.357
> 
> 标签：php, mysql, quotes

我收到了这个有很多问题的项目。其中之一是最终用户正在上传一个 CSV 文件，该文件直接从 MS Access 导出到其 Web 服务器上的目录中。下一步是截断几个数据库表，然后将 CSV 中的所有记录插入数据库。

但是，MS Access 用于撇号的撇号字符存在问题。它不是单引号 '，也不是双引号 "。它是一个撇号。像这样：

```
"Rock/Classic 80’s-90’s" 
```

现在，我在我的 PHP 中尝试了以下方法来删除它们：

```
$d = str_replace("’", "", $d);
$d = str_replace(array("'", "\'", "\’", "’"), "", $d); 
```

但是，这似乎不起作用。事实上，当基于这些数据运行 SQL 查询时，它似乎总是以某种方式将 ' 转换为 ' 而不将它们剥离，然后导致 SQL 错误，因为它认为字符串已提前终止。

这是我正在使用的代码块之一：

```
$band_insert = "INSERT INTO `schedule` (`Band`, `Date`, `Genre`, `Club`, `Location`, `Venue`, `Time`) VALUES ( '%s', '%s', '%s', '%s', '%s', '%s', '%s' )";
$result = $mysqli->query('TRUNCATE TABLE `schedule`');
if(!$result) die('Truncate error');

if( ($handle=fopen('./export/schedule.csv', 'r')) !== FALSE)
{
    while( ($data=fgetcsv($handle, 1000, ',', '"', '\\')) !== FALSE )
    {
        foreach($data as $d) 
        {
            $d = str_replace("’", "", $d);
            # For debugging purposes only
            echo "<p>$d</p>";
        }
        $sql = sprintf($band_insert, $data[0], $data[1], $data[2], $data[3], $data[4], $data[5], $data[6]);
        #$sql = $mysqli->real_escape_string($sql);
        $result = $mysqli->query($sql);
        if( ! $result ) $log[] = lg("Unable to perform query ($mysqli->errno): $mysqli->error");
    }
    $log[] = lg("Successful upload (".date("Y-m-d").").");

    fclose($handle);
} 
```

问题变成了，为什么这不起作用？当我回显 $d 值时，它会打印一个 ? 在一个广场。即使`header('Content-type: text/html; charset=utf-8');`在文件的顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T17:26:01.967

我在使用 Access 和 Excel 时遇到了一些类似的障碍，并使用我在某个地方捡到的这个来擦洗 MS 字符（所以所有这些都归功于它的原作者）。也许您可以按原样使用它，或者相应地进行调整：

```
// First, replace UTF-8 characters.
$text = str_replace(
array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
array("'", "'", '"', '"', '-', '--', '...'),
$text);

// Next, either REPLACE their Windows-1252 equivalents.
$text = str_replace(
array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
array("'", "'", '"', '"', '-', '--', '...'),
$text);

// OR, STRIP their Windows-1252 equivalents.
$text = str_replace(
array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
array('', '', '', '', '', '', ''),
$text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:23:08.630

我认为你写的有问题`echo "<p>$d</p>";`。我认为这应该是

```
echo "<p>".$d."</p>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:31:07.427

我拿走了你的代码并使用变量让它工作。

```
$string = "Rock/Classic 80’s-90’s";
$replace = "’";
$string = str_replace($replace, "", $string);
echo "<p>$string</p>"; 
```

# iphone - NSKeyedArchiver 和 NSFileManager 问题

> ID：11055382
> 
> 赞同：0
> 
> 时间：2012-06-15T17:19:33.140
> 
> 标签：iphone, objective-c, ios, ipad

尝试将文件保存到磁盘时出现以下错误：

```
ERROR IS Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn’t be completed. (Cocoa error 512.)" UserInfo=0x8d44150 {NSFilePath=/Users/test/Library/Application Support/iPhone Simulator/5.1/Applications/C283C4FF-645A-4C97-BB87-9591ECC57B0D/Library/Caches/newsfeedCache, NSUnderlyingError=0x8d25870 "The operation couldn’t be completed. Is a directory"}

NSMutableData *data = [[NSMutableData alloc] init];
        NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];  

        NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:@"test", @"hula", nil];

        [archiver encodeObject:dict forKey:kDataKey];
        [archiver finishEncoding];

        NSLog(@"CACHE PATH IS %@", self.newsfeedCachePath_);

        NSError *error = nil;
        BOOL success = [data writeToFile:self.newsfeedCachePath_ options:NSDataWritingAtomic error:&error];
        if (success && !error){

        } else {
            FNLog(@"ERROR IS %@", [error description]);
        }

        [archiver release];
        [data release]; 
```

这是我创建路径的方式：

```
- (NSString *)createDataPath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *dataPath = [[paths objectAtIndex:0] stringByAppendingPathComponent:cacheName];

    /* check for existence of cache directory */
    if ([[NSFileManager defaultManager] fileExistsAtPath:dataPath]) {
        return dataPath;
    }

    NSError *error = nil;
    /* create a new cache directory */
    if (![[NSFileManager defaultManager] createDirectoryAtPath:dataPath
                                   withIntermediateDirectories:NO
                                                    attributes:nil
                                                         error:&error]) {
        DLog(@"Unresolved error %@, %@", error, [error userInfo]);
        return nil;
    }    

    NSString *path = [dataPath stringByAppendingPathComponent:cachePath];

    return path;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:32:13.573

使用 Finder，导航到`Home/Library/Application Support/iPhone Simulator/5.1/Applications/C283C4FF-645A-4C97-BB87-9591ECC57B0D/Library/Caches`。真的`newsfeedCache`是目录吗？

编辑： [data writeToFile:] 需要一个文件名，而不是目录名。如果你给它提供一个目录名，那是一个错误。你必须想出某种数据存储方案。在不知道您的申请细节的情况下，我无法为您提供。您将在该缓存下拥有一个文件还是多个文件？以后你打算如何找回它们？等等。这些都是反问。自己回答它们，并根据这些答案，提出一个文件命名方案。

# ruby - 如何从 Ruby 脚本在 Rubymine 控制台中启动 WEBrick 服务器

> ID：11055387
> 
> 赞同：0
> 
> 时间：2012-06-15T17:20:05.213
> 
> 标签：ruby, webrick, rubymine

我有创建代理的 Ruby 脚本，以便我可以使用服务器期望的会话 ID 从命令行向服务器发出 HTTP 请求。

首先，当我从命令行运行脚本时，它运行良好

```
@web_server_thread = Thread.start do
  puts "Starting local proxy on port #{@port}"
  Rack::Handler::WEBrick.run WebServerProxy.new(@port, @host, @secure, @port2,    @default_module_host, @cookie) , :Port => @port
end 
```

退货

```
Starting local proxy on port 9292
[2012-06-15 11:29:03] INFO  WEBrick 1.3.1
[2012-06-15 11:29:03] INFO  ruby 1.9.3 (2012-04-20) [i386-mingw32]
[2012-06-15 11:29:03] INFO  WEBrick::HTTPServer#start: pid=6856 port=9292 
```

我一直在尝试在 RubyMine 中运行它，控制台中的输出总是：

```
Process finished with exit code 0 
```

**问题：**

所以我的问题是我可以做些什么来配置 RubyMine 来运行这个脚本，如果我不能配置它，为什么不呢？

**其他信息：**

*   Windows 7的

*   RubyMine v4.0.4

*   红宝石 v1.9.3

正如我在上面提到的，这是从命令行按预期运行的，所以我只是在寻找解释为什么它在 RubyMine 中不起作用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:09:38.313

我弄清楚我做错了什么，如果我发布了所有 700 行脚本，你将不得不这样做。在创建上面的线程之前，有一个 if 语句检查以确保脚本的名称等于特定的字符串（为什么我不知道，我没有写这个）。使用 RubyMine 时，脚本的名称包含服务器上的完整路径，因此启动服务器的逻辑从未使用 RubyMine 执行，但在我使用命令行时运行良好。

**编辑**

它检查它是否是它本身的原因是为了让其他脚本可以`require`它并重用该类。

# dictionary - erlang dict的时间复杂度

> ID：11055391
> 
> 赞同：12
> 
> 时间：2012-06-15T17:20:21.330
> 
> 标签：dictionary, erlang

我想知道 Erlang OTP`dict`模块是否被实现为哈希表，在这种情况下它是否提供了这样的性能？

平均情况

```
Search: O(1 + n/k)
Insert: O(1)
Delete: O(1 + n/k) 
```

最坏的情况下

```
Search: O(n)
Insert: O(1)
Delete: O(n) 
```

来源：[维基百科哈希表](http://en.wikipedia.org/wiki/Hash_table)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T20:32:10.330

因为 dict 模块是在 Erlang 本身中使用内置数据类型（元组和列表）实现的，并且是非破坏性的，也就是说，每次“更新”实际上都会创建前一个 dict 的稍微重写的新版本，因此时间复杂度永远不会比对数更好（实现必须使用某种树），但细节可能因实现而异。

当条目数量变大时，当前的实现（已经存在多年）实际上并不能很好地扩展。作者（Robert Virding）最近一直在尝试其他树的实现，例如 2-3-trees，未来版本可能会更改 dict 模块的默认实现。见[http://erlang.org/pipermail/erlang-questions/2012-June/067311.html](http://erlang.org/pipermail/erlang-questions/2012-June/067311.html)

如果您对这类事情感兴趣，您可能想阅读更多关于纯函数数据结构的信息。这似乎是一个很好的起点：[http](http://en.wikipedia.org/wiki/Purely_functional) ://en.wikipedia.org/wiki/Purely_functional （特别是冈崎论文的链接）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T17:39:25.180

好吧，这里有点不合我意。首先，它是一个哈希表，但我不确定执行时间。

查看 dict 模块的源代码 (lib/stdlib/src/dict.erl)，显示：

```
%% We use the dynamic hashing techniques by Per-�ke Larsson as
%% described in "The Design and Implementation of Dynamic Hashing for
%% Sets and Tables in Icon" by Griswold and Townsend.  Much of the
%% terminology comes from that paper as well. 
```

谷歌搜索该论文显示了一些与相关 PDF 的链接，您可以参考这些链接以了解实现的技术细节（此外，源代码中有更多可能有用的注释）

希望它对它有所启发！

# iphone - iPhone openssl 未编译

> ID：11055392
> 
> 赞同：1
> 
> 时间：2012-06-15T17:20:23.357
> 
> 标签：iphone, xcode, compiler-errors, openssl, xcode4.3

我正在尝试在此处编译 x2on 创建的示例 iphone openssl： [https ://github.com/x2on/OpenSSL-for-iPhone](https://github.com/x2on/OpenSSL-for-iPhone)

尝试在 Xcode 4.3.3 中编译时出现以下错误：

> 架构 i386 的未定义符号：
> 
> ```
>  "_MD5", referenced from:
> 
>      -[ViewController calculateMD5:] in ViewController.o
> 
>  "_SHA256_Init", referenced from:
> 
>      -[ViewController calculateSHA256:] in ViewController.o
> 
>  "_SHA256_Update", referenced from:
> 
>      -[ViewController calculateSHA256:] in ViewController.o
> 
>  "_SHA256_Final", referenced from:
> 
>      -[ViewController calculateSHA256:] in ViewController.o 
> ```
> 
> ld：未找到体系结构 i386 的符号
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我一直在尝试解决这个问题一天左右，但我不知道该怎么做。

如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:22:00.007

我只是想通为什么它不起作用。我从未将共享库包含在与我的项目相同的文件夹中，也从未链接头搜索路径。在清理我的项目并重建它之后，它识别出 Openssl 库并进行了编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:42:07.043

根据[这个网站](http://lists.fedoraproject.org/pipermail/devel/2010-May/136571.html)，它表明你需要链接`libcrypto`。

# c# - 通过 VS 11 中的服务引用在 c# 中使用 Web 服务

> ID：11055396
> 
> 赞同：2
> 
> 时间：2012-06-15T17:20:57.623
> 
> 标签：c#, web-services, soap

通过 Visual Studio 11 中的“服务参考”，我在 C# 中使用 Web 服务时遇到了一个非常烦人的问题。

我可以拨打电话并从 Web 服务（在另一个域上）获得响应，但在处理响应时出现错误：

> 无法将“System.Xml.XmlNode[]”类型的对象转换为 ComplexType_Client_InformationResponse

这是wsdl：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="https://xxx.fr/client/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns="http://schemas.xmlsoap.org/wsdl/" name="Service_Client" targetNamespace="https://xxx.fr/client/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <xsd:schema targetNamespace="https://xxx.fr/client/">
      <xsd:complexType name="ComplexType_Client_InformationIn">
        <xsd:all>
          <xsd:element name="PARAM1" type="xsd:string" />
          <xsd:element name="PARAM2" type="xsd:string" />
        </xsd:all>
      </xsd:complexType>
      <xsd:complexType name="ComplexType_Client_InformationResponse">
        <xsd:all>
          <xsd:element name="ELEMENT1" type="xsd:int" />
          <xsd:element name="ELEMENT2" nillable="true" type="xsd:string" />
          <xsd:element name="ELEMENT3" nillable="true" type="xsd:string" />
          <xsd:element name="ELEMENT4" nillable="true" type="xsd:string" />
          <xsd:element name="ELEMENT5" nillable="true" type="xsd:string" />
        </xsd:all>
      </xsd:complexType>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="informationXIn">
    <wsdl:part name="informationIn" type="tns:ComplexType_Client_InformationIn" />
  </wsdl:message>
  <wsdl:message name="informationXOut">
    <wsdl:part name="return" type="tns:ComplexType_Client_InformationResponse" />
  </wsdl:message>
  <wsdl:portType name="Service_ClientPort">
    <wsdl:operation name="informationX">
      <documentation>@param ComplexType_Client_InformationIn $informationIn</documentation>
      <wsdl:input message="tns:informationXIn" />
      <wsdl:output message="tns:informationXOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="Service_ClientBinding" type="tns:Service_ClientPort">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="rpc" />
    <wsdl:operation name="informationX">
      <soap:operation soapAction="https://xxx.fr/client/#informationX" />
      <wsdl:input>
        <soap:body use="encoded" namespace="https://xxx.fr/client/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="encoded" namespace="https://xxx.fr/client/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="Service_ClientService">
    <wsdl:port name="Service_ClientPort" binding="tns:Service_ClientBinding">
      <soap:address location="https://xxx.fr/client/" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

...和回应：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope 
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:ns1="https://xxx.fr/client" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" 
    SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
  <SOAP-ENV:Body>
    <ns1:informationXResponse>
      <return xsi:type="SOAP-ENC:Struct">
        <ELEMENT1 xsi:type="xsd:int">697438</ELEMENT1>
        <ELEMENT2 xsi:type="xsd:string">DDDD</ELEMENT2>
        <ELEMENT3 xsi:type="xsd:string">CCCC</ELEMENT3>
        <ELEMENT4 xsi:type="xsd:string">VVVVV</ELEMENT4>
        <ELEMENT5 xsi:nil="true"/>
      </return>
    </ns1:informationXResponse>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

使用Fiddler，我开始修改返回的XML，替换时成功让它工作

```
<return xsi:type="SOAP-ENC:Struct"> 
```

经过

```
<return> 
```

# c++ - 迭代 mySQL 连接器查询结果时 std::string 崩溃

> ID：11055401
> 
> 赞同：3
> 
> 时间：2012-06-15T17:21:11.983
> 
> 标签：c++, mysql, string, crash, std

我正在尝试使用 mysql connexion 从我的数据库中获取 std::string

这是简单的代码：

```
sql::Statement *stmt = con->createStatement();
sql::ResultSet  *res = stmt->executeQuery("SELECT * FROM test.new_table");
while (res->next()) {  
    std::string somestring = res->getString("idnew_table");
} //crashes here

delete res;
delete stmt; 
```

所以，executeQuery 很好，我进入循环，如果我中断，预期的结果在一些字符串中。在 somestring 声明之后，我前进到循环的末尾，它在下一次迭代之前崩溃了！

这是调用堆栈：

```
>   msvcp100d.dll!std::_Lockit::_Lockit(int kind)  Line 64 + 0x14 bytes C++
    msvcp100d.dll!std::_Container_base12::_Orphan_all()  Line 200   C++
    CM.dll!std::_String_val<char,std::allocator<char> >::~_String_val<char,std::allocator<char> >()  Line 478 + 0xb bytes   C++
    CM.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::~basic_string<char,std::char_traits<char>,std::allocator<char> >()  Line 755 + 0xf bytes   C++
    CM.dll!DAL::GetInfo()  Line 45 + 0xc bytes  C++ 
```

输出：

```
First-chance exception at 0x1038ad4a (msvcp100d.dll) in CMLauncher.exe: 0xC0000005: Access violation reading location 0xccccccd0.
Unhandled exception at 0x76f615de in CMLauncher.exe: 0xC0000005: Access violation reading location 0xccccccd0.
First-chance exception at 0x76f5016e in CMLauncher.exe: 0x00000000: The operation completed successfully.
Unhandled exception at 0x76f615de in CMLauncher.exe: 0x00000000: The operation completed successfully. 
```

所以看起来我在 C++ 运行时库的某个地方有一些未初始化的内存......看起来它在 std::string 析构函数中崩溃了，这是有道理的，因为它在字符串的范围完成时崩溃了......

我最好的猜测是 libmysql 使用的是旧版本的 C++ 运行时（比如 msvcp90d.dll）并且它与新版本发生冲突......这是否有意义？

我在windows 7下，使用mySQL Server 5.5，VS2010 Pro。全部为 32 位。谢谢！我很乐意发布任何需要的 mroe 信息。

编辑：在其他人阅读 DumbCoders 评论之前： [MySQL 连接器示例](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html) 文档指定必须删除语句和结果集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T17:40:09.580

这个问题似乎和你[的](https://stackoverflow.com/a/1494479/942596)一样。

# matlab - MATLAB中的隐马尔可夫模型

> ID：11055410
> 
> 赞同：6
> 
> 时间：2012-06-15T17:22:12.717
> 
> 标签：matlab, markov-chains, hidden-markov-models

我有 11 个状态和一个转移概率矩阵，但我没有排放，因为我的模型没有隐藏。它仅包含状态 (1,2,3, ..., 11)
我想根据我的转移概率矩阵生成随机状态，但 HMM 工具箱需要一个发射概率矩阵。我应该怎么办？

```
[seq, states] = hmmgenerate(100, Trans, Emis) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T19:08:43.847

考虑以下：

```
%# number of states
N = 11;

%# some random transition matrix
trans = rand(N,N);
trans = bsxfun(@rdivide, trans, sum(trans,2));

%# fake emission matrix (only one symbol)
emis = ones(N,1);

%# get a sample of length = 10
[~,states] = hmmgenerate(10, trans, emis) 
```

产生的状态序列：

```
>> states
states =
    10     1     3    11     9     4    11     1     4     6 
```

* * *

## 编辑：

事实上，使用马尔可夫链相对容易，我们可以自己做。这是另一个不使用统计工具箱中的 HMM 函数的示例。

```
%# number of states
N = 3;

%# transition matrix
trans = rand(N,N);
trans = bsxfun(@rdivide, trans, sum(trans,2));

%# probability of being in state i at time t=0
prior = rand(1,N);
prior = prior ./ sum(prior);

%# generate a sequence of states
len = 100;          %# length of sequence
states = zeros(1,len);
states(1) = randsample(N, 1, true, prior);
for t=2:len
    states(t) = randsample(N, 1, true, trans(states(t-1),:));
end

%# show sequence
stairs(states, 'LineWidth',2)
set(gca, 'YGrid','on', 'YLim',[0 N+1])
xlabel('time'), ylabel('states')
title('sequence of states') 
```

![状态序列](../Images/fca0f190905c750f9bc2731447788029.png)

我使用 RANDSAMPLE 函数在每次迭代时进行采样。如果您只想使用核心函数（没有工具箱），请参阅[MATLAB 中的加权随机数以](https://stackoverflow.com/q/2977497/97160)获得替代方法。

# css - CSS 挖空一个 div？

> ID：11055411
> 
> 赞同：0
> 
> 时间：2012-06-15T17:22:13.497
> 
> 标签：css, transparency

我有 3 个元素堆叠在一起。顶部元素是覆盖内容。第二个元素是背景边框图像。底部元素是背景。

我想要做的是把中间元素挖空，这样我就可以通过顶部元素看到底部元素，但留下中间元素的边框围绕顶部元素。

[http://jsbin.com/unimux/4/edit](http://jsbin.com/unimux/4/edit)

如您所见，中间元素阻挡了底部元素的视图。

编辑：我确实尝试过使用边框图像，但使用边框半径无法正确渲染。

Edit2：是否可以使用边框图像获得所需的效果？感谢任何可以通过边框图像使它看起来不可怕的人。

Edit3：基于 Zuul 的回答取得了一些进展：http: [//jsbin.com/unimux/15/edit](http://jsbin.com/unimux/15/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:30:19.867

设置一个带有类的新元素，例如，`.apple`并将其放置在所有其他现有元素上，并具有与底部相同的图像：

查看您的[JS Bin 示例](http://jsbin.com/unimux/7/edit)已更改！

```
 div.apple {
    margin: 100px;
    width: 200px;
    height: 200px;
    background: url(http://www.ipadwallpapersonly.com/images/wallpapers/1gk0rv4ng.jpg) center center;
  } 
```

使图像居中并通过提供正确的边距值，它可以模拟`div.middle`.

**查看结果预览：**

![最终结果预览](../Images/fe89c7ed96f0642b3ccd6666c5fd42af.png)

* * *

如果元素尺寸不同，则使用 CSS[位置](http://www.w3.org/wiki/CSS/Properties/position)有助于将所有内容保持在适当的位置：

[这里](http://jsbin.com/unimux/12/edit)有一个例子！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:31:37.600

根据 egasimus，你不能用 CSS 真正做到这一点。

不过尝试这样[的](http://jsfiddle.net/mqzLM/)事情，用四个`div`s 创建“窗口”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:24:24.947

在 CSS 的当前状态下，您无法真正做到这一点。也许只是将底部元素放在中间元素的顶部，然后工作？

# c# - 按钮背景颜色

> ID：11055414
> 
> 赞同：2
> 
> 时间：2012-06-15T17:22:27.073
> 
> 标签：c#, asp.net, visual-studio-2008

我需要`background`使用 C# 代码 (Visual Studio 2008) 更改按钮的颜色。

我看到有些人建议包含一个指令`using System.Windows.Media`：- 我试过了，它触发了这个错误：Windows 不存在于`namespace System`. 我尝试了几种组合，例如：

```
 btn.BackColor = Color.Red;
 btn.Background = Brushes.Green; 
```

两者都不起作用。使用颜色是否需要特殊指令？你建议什么代码。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:26:49.603

这应该将您的按钮背景颜色更改为红色

```
yourButtonName.BackColor = Color.Red; 
```

您需要包含**System.Drawing**命名空间，因为 Color 类属于该命名空间。像这样

```
using System.Drawing; 
```

当然，您需要`System.Drawing`在项目中添加对 DLL 的引用才能使用此命名空间和 Color 类。

![在此处输入图像描述](../Images/dc7ac5ef9bd2358ee1f55b6ea604cbdb.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T17:27:55.370

```
Button1.BackColor = System.Drawing.Color.Red; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:26:33.340

```
using System.Drawing; 
```

允许您使用

```
Color.Red; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:31:31.220

尝试这个

```
button.BackColor = Color.Red 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T17:38:48.987

尽管该属性在技术上对所有 WebControl 都可用，但按钮***可能会***被忽略（我尚未确认）。当然，这是假设您的项目是 ASP.NET。话虽如此，如果它确实适合你，我强烈建议你在其他浏览器中测试它，因为它可能是特定于 MS 的。

来自 MSDN：

> 此属性将只为某些控件呈现。例如，Table、Panel、DataGrid、Calendar 和 ValidationSummary 将呈现此属性。如果 CheckBoxList、RadioButtonList 和 DataList 的 RepeatLayout 属性是 RepeatLayout.Table，而不是 RepeatLayout.Flow，它也适用。

来源：[WebControl.BackColor 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.backcolor)

然而，实现这一点的更灵活和广泛实践的方法是使用 CSS。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-07T07:13:02.810

在 PageLoad 上试试这个，

`Button1.Style.Add("background-color", "green");`

当您想更改按钮的颜色时，请使用方法编写条件。如果条件为真，请使用上面的代码根据您的喜好更改按钮的颜色。

# javascript - Safari 热门网站预览

> ID：11055418
> 
> 赞同：7
> 
> 时间：2012-06-15T17:22:44.240
> 
> 标签：javascript, safari

在 Safari 的 Top Sites 部分，iCloud.com 图片显示的是徽标而不是登录屏幕，如下所示。通常，Top Sites 只显示加载网页的图片（加载的页面看起来不是这样）。你知道他们是如何做到这一点的吗？我在 Apple 的文档中找不到任何内容。谢谢你的帮助。

![在此处输入图像描述](../Images/9980f99302755af3dc4d37927fa395cc.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T02:59:22.507

以下是在 iCloud 上显示热门站点特定预览的方法：（为格式化而编辑）

```
if (window.navigator && window.navigator.loadPurpose === "preview") {
    window.location.href = "http://www.icloud.com/topsites_preview/";
}; 
```

资料来源：[http ://blog.raffael.me/post/18565169038/defining-how-your-website-looks-like-in-safari-topsites](http://blog.raffael.me/post/18565169038/defining-how-your-website-looks-like-in-safari-topsites)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T10:36:21.653

事实上，Safari 并不搜索`<link>`标签或其他任何东西。我们可以使用两种不同的东西：

*   **PHP**中传入请求的 HTTP 标头。

*   **JavaScript**`window`中对象的属性。

 **这两种方法效果很好，你可以使用其中任何一种，如果你想确定的话，甚至可以同时使用它们。

* * *

**PHP**：

如果我们检查 HTTP 标头，我们将看到当发送请求的是*Safari Top Sites Preview*`X_PURPOSE`时，它被设置为`preview`. 然后你必须在正常的网站上写：

```
if($_SERVER["HTTP_X_PURPOSE"]=="preview")
{
    header("Location:thumbnail link");//Redirect to the thumbnail.
}
//Display the normal website. 
```

您可以在有缩略图的页面中添加：

```
if($_SERVER["HTTP_X_PURPOSE"]!="preview")
{
    header("Location:normal link");//Redirect to the normal website.
}
//Display the thumbnail. 
```

*这样除了Safari Top Sites Preview*之外，您无法看到缩略图。

* * *

**JavaScript**：

`window.navigator.loadPurpose``preview`如果它是尝试打开网站的*Safari Top Sites Preview* ，则具有该值。但`window.navigator`如果它在正常视图中，则不存在。因此，当你测试这个值时，你必须测试这个属性的存在以及它的真实性。然后这是普通网站的代码：

```
if(window.navigator&&window.navigator.loadPurpose==="preview")
{
    window.location.href="thumbnail link";//Redirect to the thumbnail
} 
```

对于缩略图页面：

```
if(!window.navigator||window.navigator.loadPurpose!=="preview")
{
    window.location.href="normal link";//Redirect to the normal website
} 
```

* * *

**我的小技巧**：

如果你真的想放一个`<link>`标签，你可以写：

```
<link rel="safari-preview" href="thumbnail link" /> 
```

然后在 head 部分的末尾添加：

```
<script>for(var i=0,link=document.getElementsByTagName("link"),l=link.length;i<l;i++)if(link[i].getAttribute("rel")==="safari-preview"&&window.navigator&&window.navigator.loadPurpose==="preview")window.location.href=link[i].getAttribute("href");</script> 
```

* * *

**资料来源**：

*   [http://sunpig.com/martin/archives/2010/01/08/how-to-detect-a-page-request-from-safari-4s-top-sites-feature.html](http://sunpig.com/martin/archives/2010/01/08/how-to-detect-a-page-request-from-safari-4s-top-sites-feature.html)
*   [http://daneden.me/2011/12/custom-safari-top-sites-thumbnail/](http://daneden.me/2011/12/custom-safari-top-sites-thumbnail/)
*   我自己的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T01:03:58.173

Apple 触控设备可以在您的网络服务器上查找预先合成的图像。我知道它可以查询这些图像：

*   apple-touch-icon-114x114-precomposed.png
*   apple-touch-icon-144x144-precomposed.png
*   苹果触摸图标 57x57-precomposed.png
*   apple-touch-icon-72x72-precomposed.png

如果您查看 iCloud.com 的源代码，您会注意到它也会有`<link />`指向这些资源的元素（因为它们不在根目录中）：

```
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/system/cloudos/en-us/1JPlus21/source/resources/images/apple-touch-icon-114x114.png"> 
```

我只是在这里猜测，但也许 safari 会寻找相同的图像以显示在顶部站点视图中。

可以在此处找到有关这些类型图像的更多信息

[http://theksmith.com/technology/howto-website-icons-browsersdevices-favicon-apple-touch-icon-etc/](http://theksmith.com/technology/howto-website-icons-browsersdevices-favicon-apple-touch-icon-etc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T21:39:11.127

我认为他们是专门为他们的 iCloud 服务制作的，他们只是检查域是否是 icloud 域，如果是，他们会显示此徽标而不是正常的站点预览。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T18:30:01.043

我相信他们会在页面加载完成后以编程方式抓取页面的快照。如果您查看顶部的进度条，当 iCloud 显示（只是 iCloud 徽标）时，它已完成加载并正在做一个小动画。**

# php - 通过 PHP 从 MySQL 长文本到 HTML 的换行符

> ID：11055422
> 
> 赞同：4
> 
> 时间：2012-06-15T17:23:17.007
> 
> 标签：php, mysql, html, line-breaks

我在一个 MySQL 长文本单元格中输入了多行文本，我想以 HTML 格式显示。但是，当字符串以 HTML 显示时，我无法弄清楚如何保留换行符。

例如，假设我在“内容”列中有此文本：

```
+-----------+
|  content  |
+-----------+
| Line 1\.   |
|           |
| Line 2\.   |
+-----------+ 
```

我希望这个显示：

```
Line 1.

Line 2. 
```

但是，我的 PHP 循环得到了这个结果：

```
Line1.Line2. 
```

我使用下面的循环来`echo`处理我数据库中的文本。（我知道我不需要循环，但在实际项目中我显示多行数据）。

```
$query = mysql_query("SELECT * FROM table ORDER BY timestamp DESC");
while($row = mysql_fetch_array($query)) {
    echo $row['title'];
} 
```

总而言之：在 HTML 中显示 MySQL 字符串时如何保持换行符？有没有办法`<br>`在换行符处添加？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T17:24:09.113

尝试使用 php 函数`nl2br`（[文档](http://php.net/manual/en/function.nl2br.php)）

```
$content = "Line 1.\nLine 2.";
echo nl2br($content);
// output Line 1.<br>\nLine 2. 
```

# django - 如何从模板中的json对象获取字段？

> ID：11055424
> 
> 赞同：1
> 
> 时间：2012-06-15T17:23:19.800
> 
> 标签：django, json, simplejson, dajaxice

我将 Dajaxice 库与 django 一起使用。这些是我的 ajax.py 方法：

```
def get_by_date_queryset():
#return model.objects.latest('created_on')
return Article.objects.all().order_by('created_on')

def example1(request):
""" Handling sorting requests """
jsonList = []
queryset = get_by_date_queryset()
json_serializer = serializers.get_serializer("json")()
return json_serializer.serialize(queryset, ensure_ascii=False) 
```

有HTML：

```
<script>
function my_js_callback(data){
    alert(data) //this gives me [object Object],[object Object],[object Object]
    alert(data[0]) //this gives [object Object]
    alert(data[0].title) // fail

}
</script>
<button type="button" onclick="Dajaxice.content.example1(my_js_callback);">Click Me!</button> 
```

而且我无法从对象中获取我的字段...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:50:53.067

这是我的错误。我的 JSON 就像几个级别的字典，我找不到我的字段，因为它在 JSON 对象第一级字典中的字典命名字段中。现在好了：

```
var key="title"
var item=data["fields"]
alert(item[key]) 
```

# php - JSON 的问题

> ID：11055425
> 
> 赞同：0
> 
> 时间：2012-06-15T17:23:30.127
> 
> 标签：php, json

我从我的 JSON 中获取价值，如下所示：

```
$adarray = json_decode($addata);
if($adarray->{'zone'} == 'homepage'){
    $chan = 'homepage';
}else if($adarray->{'subcat'} == 'main'){
    $chan = $adarray->{'cat'};
}else{
    $chan = $adarray->{'subcat'};
}
echo $chan; 
```

它的 else if 和 else 它完美地工作但是，我在第一部分遇到了麻烦：

当这个 JSON 数据被解析到 if 语句中时，它应该返回“主页”，但它只是返回 JSON 数据，为什么？

```
{"zone":"homepage"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:26:55.390

在 php tester 上尝试了相同的代码，并得到了正确的输出。看看你的代码是否正确。

[在http://phptester.net/](http://phptester.net/)上自己尝试一下：

```
<?php
$adarray = json_decode('{"zone":"homepage"}');
if($adarray->{'zone'} == 'homepage'){
    $chan = 'homepage';
}else if($adarray->{'subcat'} == 'main'){
    $chan = $adarray->{'cat'};
}else{
    $chan = $adarray->{'subcat'};
}
echo $chan; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:26:22.420

请以这种方式更改您的代码

```
$adarray = json_decode($addata,true); 
```

所以现在它被转换为数组。您可以轻松管理数组或从数组中获取值或数据

# jquery - 圆形导航旋转

> ID：11055434
> 
> 赞同：0
> 
> 时间：2012-06-15T17:24:12.433
> 
> 标签：jquery, navigation

我正在研究一个圆形导航系统，我在中心有一个微调器，它使用 JqueryRotate 2.2 插件在悬停时旋转，但是我很好奇如何让它更好地响应？将鼠标悬停在 Portfolio 上时它不会移动，因为我希望箭头在加载时保持垂直，但是当您将鼠标悬停在 about > Contact 和 Blog 上时，它看起来有点糟糕，可能是因为我已将其设置为旋转 - 90 度，但有没有办法让微调器以最快的方式到达按钮？所以如果它在接触，那么它会从那里旋转 90 度而不是从投资组合？

它住在`http://www.anthonyeamens.co.uk`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:35:05.533

似乎你可以`.getRotateAngle()`看看它是否应该`-90`或`270`

```
$("#blog").hover(
 function () {
      if($("#spinner").getRotateAngle() < 10)
          $("#spinner").rotate({animateTo:-90})
      else
          $("#spinner").rotate({animateTo:270})
      },
       function () {
          $("#spinner").rotate({animateTo:0});

}); 
```

# android - 安卓应用全屏

> ID：11055435
> 
> 赞同：0
> 
> 时间：2012-06-15T17:24:13.917
> 
> 标签：android, android-layout, fullscreen

![截屏](../Images/d8571cfd5f304d7e92932e21fab0ebf3.png)

让这个应用程序在信息亭模式下运行，并希望全屏运行它。已经摆脱了应用程序的灰色标题栏，但仍然在顶部栏上保留了主页、音量、返回和其他按钮，如图所示。

该设备正在运行 android 2.2 固件。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T17:45:44.820

所以有更多的方法：

首先，您应该在您的`Manifest.xml`

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

或者在您的`onCreate`方法中使用这两种方法：

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

或者

```
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T19:53:49.890

您正在运行的平板电脑运行的是被破解的 Android 版本，该版本不符合兼容性定义文档。因此，您可能无法摆脱该栏，除非您用其他东西替换固件。

对方提供的建议是兼容 Android 设备的正确答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T17:33:43.627

使您的活动在清单中看起来像这样

```
 <activity
            android:name=".HelloActivity"
            android:label="@string/laptop"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T11:36:12.430

在 android manifest 中使用这一行

```
<activity android:name=".yourActivityName"
          android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
```

并在您的班级中在 oncreate 方法中使用此行

```
requestWindowFeature(Window.FEATURE_NO_TITLE);  
```

此代码适用于我测试过的 android 2.2 及其工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-26T05:23:05.583

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity); 
```

# python - Flask-Security 示例不起作用

> ID：11055437
> 
> 赞同：0
> 
> 时间：2012-06-15T17:24:29.737
> 
> 标签：python, mongodb, flask

我将 app.py 文件编辑为仅通过 MongoEngine 使用 MongoDB（您可以选择 MongoDB 或 SQL）。这是我尝试运行我的应用程序时的输出：

```
 Familys-imac:flask-security Paul-Arthur$ python app.py
    Traceback (most recent call last):
      File "app.py", line 17, in <module>
        from flask.ext.security.datastore import MongoEngineUserDatastore
      File "/Library/Python/2.7/site-packages/flask/exthook.py", line 86, in load_module
        raise ImportError('No module named %s' % fullname)
    ImportError: No module named flask.ext.security.datastore.MongoEngineUserDatastore 
```

对我来说，这表明 MongoEngine 存在问题（请注意，这是在 virtualenv 中）。

因此我尝试重新安装软件包，认为这可能是问题，但我也没有运气。输出接缝完全正常，这是怎么回事？

```
 familys-imac:flask-security Paul-Arthur$ pip install MongoEngine
    Requirement already satisfied (use --upgrade to upgrade): MongoEngine in /Library/Python/2.7/site-packages
    Requirement already satisfied (use --upgrade to upgrade): pymongo in /Library/Python/2.7/site-packages (from MongoEngine)
    Cleaning up... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:29:13.313

对于 SQLAlchemy，您可以将其导入为：

> 从 flask.ext.security.datastore.sqlalchemy 导入 SQLAlchemyUserDatastore

我认为Mongo会是：

> 从 flask.ext.security.datastore.mongoengine 导入 MongoEngineUserDatastore

# c - C中的char指针初始化

> ID：11055439
> 
> 赞同：5
> 
> 时间：2012-06-15T17:24:32.157
> 
> 标签：c, string, pointers, char

我对字符指针及其工作方式不太清楚。

该程序可以构建，但是当我运行它时会崩溃。

```
 char *ab = NULL;
 //ab = "abc123"; // works fine
 sprintf(ab, "abc%d", 123); // this line seems to crash the program 
```

当 sprintf 将 (char * str) 作为第一个参数时，我不明白这怎么可能是错误的。

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T17:25:43.090

您没有分配任何内存用于`ab`.

第一个分配有效，因为您正在分配`ab`一个字符串常量：`"abc123"`。常量字符串的内存由编译器代表您提供：您不需要分配此内存。

在你可以使用之前`ab`，`sprintf`你需要使用分配一些内存`malloc`，并将该空间分配给`ab`：

```
ab = malloc(sizeof(char) * (NUM_CHARS + 1)); 
```

然后`sprintf`，只要您使用`malloc`. 注意：`+ 1`用于[空终止符](https://stackoverflow.com/questions/10943033/why-are-strings-in-c-usually-terminated-with-0/10943040#10943040)。

或者，您可以`ab`通过将其声明为数组来获取一些内存：

```
char ab[NUM_CHARS + 1]; 
```

如果不为 分配内存`ab`，`sprintf`调用将尝试写入`NULL`，这是未定义的行为；这是你崩溃的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:27:19.747

您需要为数据分配内存。确实`sprintf`需要`char*`，但它不会为您分配内存。

第一行工作正常，因为编译器会自动为编译时定义的字符常量表分配数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:28:15.843

与 in`Java`或其他高级语言不同，该`C`库的许多字符串函数不简单地设置字符串引用，而是在称为字符数组的预分配内存块上进行操作。

您的第一行是说`ab`指向一个不存在的内存位置。

如果不是你这样做，你会有更多的运气`char *ab = NULL;`：

```
char ab[12]; 
```

或者：

```
char *ab = (char*)malloc(12); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T17:28:26.530

你可以这样做

```
char ab[10];  //allocate memory
sprintf(ab, "abc%d", 123); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T17:28:44.797

"ab" 为空并且 sprintf 正在尝试写入它，您必须先分配它。

```
char ab[20];

sprintf(ab, "abc%d", 123); // 
```

或者

```
char * ab = malloc(20); // new, whatever

sprintf(ab, "abc%d", 123); // 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T21:43:25.530

这里有几件事需要考虑。您的原始示例如下：

```
char *ab = NULL;
 //ab = "abc123"; // works fine
 sprintf(ab, "abc%d", 123); // this line seems to crash the program 
```

`char *ab = NULL;`是指向字符的指针，并初始化为 NULL；

我认为`ab = "abc123";`效果不好，除非它看起来像`char *ab = "abc123";`. 那是因为您初始化`char *ab`为只读字符串。初始化可能发生在编译时。

您的`sprintf(ab, "abc%d", 123);`线路失败，因为您没有`char *ab`提前为指针初始化任何内存。换句话说，您没有执行以下操作：

```
ab = malloc((sizeof(char) * 3) + 1); /* + 1 allows for null string terminator. */ 
```

您可以通过以下两种方式之一来解决您的问题。如上所示分配动态内存，或者您可以使字符串成为固定长度的数组，例如 char `ab[25] = {0};`。通常，我创建一个长度为 1024、256 或某个数字的数组，这些数字通常会涵盖我的大部分字符串长度情况。然后我将 char 指针用于对数组进行操作的函数。

# android - 正确使用 DetachableResultReceiver 的方法

> ID：11055446
> 
> 赞同：3
> 
> 时间：2012-06-15T17:25:25.590
> 
> 标签：android

谷歌在他们的[谷歌 I/O](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/util/DetachableResultReceiver.java "奥赛德")应用程序中使用它，但几乎没有关于如何使用它的文档。正确的方法是什么？

# python - 为什么这个 imaplib 请求不是一直有效？

> ID：11055447
> 
> 赞同：1
> 
> 时间：2012-06-15T17:25:29.940
> 
> 标签：python, gmail, imaplib

我正在使用 imaplib 并尝试解析来自 gmail 帐户的消息。我的代码已经工作了几个月，现在突然就惨败了。我不知道这归因于什么。

以下工作大约有 1/3 的时间。通过“工作”，我的意思是当我收到电子邮件时成功打印除“没有新消息”之外的其他内容。有人对尝试此操作的更强大方法有任何建议吗？或者也许现在建议配置 gmail 帐户以使其更可靠地工作？

如果我编写代码的方式似乎是一种好的做法，我通常也很感兴趣。感谢您的任何帮助...

```
def check_email(interval):
    while True:
        server.select('INBOX')
        status, ids = server.search(None, 'UnSeen')

        if not ids or ids[0] is '': 
            print 'no new messages'
        else:
            print 'found a message; attempting to parse...'
            latest_id = ids[0]
            status, msg_data = server.fetch(latest_id, '(UID BODY[TEXT])')
            raw_data = msg_data[0][1]
            char_array = list(raw_data)
            print 'message result: ', char_array 

        time.sleep(interval) 
```

EDIT1：我现在收到以下错误：

> “imaplib.error：FETCH 命令错误：BAD ['Could not parse command']”

有谁知道我可以将此归因于什么？这显然是该行的结果

```
status, msg_data = server.fetch(latest_id, '(UID BODY[TEXT])') 
```

EDIT2：我发现我可以登录 gmail 帐户，单击“更多”选项卡，然后单击“全部标记为已读”，突然代码按预期工作。有没有办法使用 imaplib 将所有消息标记为远程读取？

# algorithm - 如何将一个单词分成不同的方式，使其成为另外两个单词的连接

> ID：11055449
> 
> 赞同：1
> 
> 时间：2012-06-15T17:25:33.570
> 
> 标签：algorithm

我刚刚在网上遇到了这个有趣的问题，对于如何在它上面取得进展感到很困惑。

```
Write a function that finds all the different ways you can split up a word into a
concatenation of two other words. 
```

这是使用后缀树的东西吗？

我不是在寻找代码，只是在概念上推进这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:27:21.593

一些伪代码：

```
 foreach place you can split the word:
    split the word.
    check if both sides are valid words. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:32:04.060

如果您正在寻找一个好的答案，请告诉我们您对有效词的定义。

假设一个单词是一个在字母表上定义的字符串，并且长度大于零。您可以使用后缀树。

下面是一个简化的算法，只需要 O(n) 时间。

```
Convert the word into a character array.

Traverse through the length of the array and for each i just take two strings (0 to i) and 
(i+1     to    length of the array-1). 
```

请记住涵盖基本条件，例如长度大于零。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-07-12T13:58:59.863

当且仅当此条件成立时，执行此操作的不同方法的总数可以大于一种：

-> 两个单词之一必须是其他单词的倍数。例如：“abcd”和“abcdabcd”。使用这两个词，你可以用许多不同的方式组成字符串“abcdabcdabcdabcd”。

所以首先检查这个条件。

然后检查是否可以以任何方式从这两个单词中写入字符串。那么简单的数学应该会给你答案

# google-maps-api-3 - Google Maps Address Components Geocoding vs Places API - 短名称与长名称

> ID：11055452
> 
> 赞同：3
> 
> 时间：2012-06-15T17:25:48.643
> 
> 标签：google-maps-api-3, google-places-api, google-geocoding-api

嘿，GMaps API 开发人员。首先 - Google Maps/JS API v3 是多么令人难以置信的产品和服务 - 非常感谢！现在，带着那份重要的真诚感激之情……

地址组件的`short_name`vs`long_name`选项是一个不错的功能，但是对于每个服务，这两个属性大多包含相同的值，除了 geocode 具有我`short_name`对两者的期望，而 place 具有我`long_name`对两者的期望！*眼泪*

在 Places 库出现之前，我只是假设 Google 实际上没有街道名称、地区等的短/长版本 - 但现在看来你**确实**在某处有这种格式 - 也许不同的产品团队有不同的数据库？

那么有什么关系呢？

我正在谈论的图像（将嵌入，但这是我的第一个 stackoverflow 问题，所以没有声誉）：http: [//i.imgur.com/XPVj8.png](http://i.imgur.com/XPVj8.png)

**我希望**它如何工作的详细列表：

*   对于路线，地理编码的`short_name`地方'`long_name`
*   地理编码和地点之间的位置/子位置具有相同的“类型”值（两者都可以，只需选择一个）
*   始终为状态（administrative_area_level_1）提供短/长 - 地理编码正确但地方没有
*   国家/地区相同 - 地理编码在哪里获取格式化地址中的“美国”？
*   如果`postal_code` `long_name`有 zip+4 会很整洁，但我想从数据的角度来看这将是一项巨大的努力

非常感谢 - 期待对此行为的任何见解！

图片背后的代码：

```
<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8">
  <title>GMaps API V3 Geocoder vs Places Address Components | Short vs Long Name</title>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=places"></script>
  <style type="text/css">
    #map {height: 100px; width: 600px; border: 1px solid #333; margin-top: 0.6em; }
    table { border-collapse: collapse; border-spacing: 0; }
    table td {border-top: 1px solid #DDD; padding:4px 8px; }
  </style>
  <script type="text/javascript">
    var map, geocoder, places, geocode_components, geocode_formatted, places_components, places_formatted
    function initialize() {
      geocoder = new google.maps.Geocoder();
      geocoder.geocode({'address': '3 South Main Street, York New Salem, PA'},
      function (results, status) {
        geocode_components = results[0].address_components;
        geocode_formatted = results[0].formatted_address;
        map = new google.maps.Map(document.getElementById('map'), {
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: results[0].geometry.location,
          zoom: 10
        });

        places = new google.maps.places.PlacesService(map);
        places.search({location: results[0].geometry.location, radius:100, keyword: "Pizza"},
          function(results, status) {
            //get details - this feels a little extraneous to me, but y'all know best
            places.getDetails({reference: results[0].reference},
            function(result, status) {
              places_components = result.address_components;
              places_formatted = result.formatted_address;
              writeResults();
            });
          });
      });
    }

    function writeResults() {
    tbody = document.getElementById('results');
    formatted = document.getElementById('formatted');
    var rows = "";
    for(var i=0; i<geocode_components.length; i++) {
      var c = geocode_components[i];
      rows = rows + '<tr><td>Geocoding</td><td>' + c.types[0] + '</td><td>' + c.short_name + '</td><td>' + c.long_name + '</td></tr>';
    }

    for(var i=0; i<places_components.length; i++) {
      var c = places_components[i];
      rows = rows + '<tr><td>Places</td><td>' + c.types[0] + '</td><td>' + c.short_name + '</td><td>' + c.long_name + '</td></tr>';
    }
    tbody.innerHTML = rows;
    formatted.innerHTML = '<br />Geocode Formatted: ' + geocode_formatted + '<br />' + 'Places Formatted: ' + places_formatted;
  }
  google.maps.event.addDomListener(window, 'load', initialize);
  </script>
  </head>
  <body>
  <div id="map"></div>
  <table>
    <thead><tr><th>Service</th><th>Type</th><th>Short Name</th><th>Long Name</th></tr></thead>
    <tbody id="results"></tbody>
  </table>
  <div id="formatted"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-10T15:13:13.457

如评论中所述 - 此问题（请求）已于 2013 年 1 月修复/实施，请参阅[https://issuetracker.google.com/issues/35821543](https://issuetracker.google.com/issues/35821543)

# iphone - 多种方法：按钮的目标和选择器不起作用

> ID：11055453
> 
> 赞同：0
> 
> 时间：2012-06-15T17:25:55.767
> 
> 标签：iphone, objective-c

试图解决我的[其他问题](https://stackoverflow.com/questions/11034544/pause-button-when-pressed-again-to-resume-reloading-view-controllers)。这次尝试这种方式向一个按钮添加了多种方法，但是当单击按钮时，看起来这些方法不起作用。

```
//Add Play Button

UIButton *playpauseButton = [UIButton buttonWithType:UIButtonTypeCustom];
[playpauseButton addTarget:self action:@selector(playAction:) forControlEvents:UIControlEventTouchUpInside];
[playpauseButton addTarget:self action:@selector(playpauseAction:) forControlEvents:UIControlEventTouchUpInside];
playpauseButton.frame = CGRectMake(0, 0, 30, 30);
[playpauseButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[playpauseButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:playpauseButton];

- (void)playAction:(id)sender{
[audioPlayer play];
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                              target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                             repeats:NO];
}  

-(void)playpauseAction:(id)sender {
        if ([audioPlayer isPlaying]){
            [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
            [audioPlayer pause];
            [self pauseTimer];
    } else {     
        [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
        [audioPlayer play];
        [self resumeTimer];  
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                        target:self
                                        selector:@selector(displayviewsAction:)
                                        userInfo:nil
                                        repeats:NO];   
        }         
}

 -(void)pauseTimer{
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];
previousFireDate = [[timer fireDate] retain];
[timer setFireDate:[NSDate distantFuture]];
}
-(void)resumeTimer{
float pauseTime = -1*[pauseStart timeIntervalSinceNow];
[timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
[pauseStart release];
[previousFireDate release];
} 
```

单击它时它显示播放按钮没有任何反应。它应该播放音频文件，启动 NSTimer，开始加载视图并在播放和暂停按钮之间切换。知道什么是错的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:37:02.770

当用户点击按钮时，`playAction:`调用`[audioPlayer play]`. 紧接着，`playpauseAction:`评估`[audioPlayer isPlaying]`为`YES`并执行`[audioPlayer pause]`。

# json.net - ASP.NET Web Api RC：将 JSON 反序列化为对象属性

> ID：11055460
> 
> 赞同：2
> 
> 时间：2012-06-15T17:26:42.170
> 
> 标签：json.net, asp.net-web-api

我在将字符串值 JSON 反序列化为对象类型的 C# 属性时遇到问题，它们最终成为字符串数组。

`foo.Bar`Get 和 Post 方法中的值是`string[1]{"test"}`，但我期待的是字符串`"test"`。

我尝试使用`DataContract`/`DataMember`和`JsonObject`/`JsonProperty`属性来归因 Foo 并得到相同的结果。

知道为什么会这样吗？

这是我来自空 Asp.net MVC3 项目的代码。我安装了 Microsoft.AspNet.WebApi RC nuget 包版本 4.0.20505.0 和 jquery v 1.7.2

**更新** *更新的代码以包括 Get action 和 contentType: "application/json"*

**全球.asax**

```
using System;
using System.Collections.Generic;
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "WebApi",
            routeTemplate: "api/{controller}"
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", 
                                       id = UrlParameter.Optional }
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);            
    }
} 
```

**我的测试控制器**

```
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace WebApiRCTest.Controllers
{
    public class TestController : System.Web.Http.ApiController
    {
        public IEnumerable<string> Get([System.Web.Http.FromUri]Foo foo)
        {
            return new List<string>();
        }
        public void Post([System.Web.Http.FromBody]Foo foo)
        {
            object bar = foo.Bar;
        }
    }
    public class Foo
    {
        public object Bar { get; set; }
    }
} 
```

**我的 JavaScript**

```
function post() {
    $.ajax({
        url: "http://localhost:55700/api/ApiTest/",
        type: "GET",
        dataType: "json",
        accept: "application/json",
        contentType: "application/json",
        data: { Bar: "test" }
    })
    $.ajax({
        url: "http://localhost:55700/api/Test/",
        type: "POST",
        dataType: "json",
        accept: "application/json",
        contentType: "application/json",
        data: { Bar: "test" }
    })
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:52:26.537

这实际上是发送“application/x-www-form-urlencoded”，而不是 JSON。尝试：

```
 $.ajax({
    url: "http://localhost:55700/api/Test/",
    type: "POST",
    dataType: 'json',
    contentType: 'application/json',
    accept: "application/json",
    data: JSON.stringify({ Bar: "test" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T14:48:13.893

我也遇到了这个问题——我创建了一个名为 JsonFromUri 的简单属性，它基本上完成了它所说的。您可以从 nuget 获取它或在此处自行查看：

[https://github.com/itsdrewmiller/JsonFromUri](https://github.com/itsdrewmiller/JsonFromUri)

# javascript - JavaScript/Jquery - 隐藏显示的 div，显示另一个，然后重复

> ID：11055466
> 
> 赞同：1
> 
> 时间：2012-06-15T17:27:02.343
> 
> 标签：javascript, jquery, html, hide, show

我想在页面加载时显示一个 id 为“houseImages”的 div，同时隐藏 div“landImages”、“renovationImages”、“UpcomingImages”和“voteForNext”。单击“美化”后，我想显示 div“landImages”并隐藏 div“houseImages”。显然，我希望此功能继续通过列表，当我单击“绘画”时，该 div 会重新出现。我将如何使用 JavaScript 做到这一点？

这是我到目前为止所拥有的：

```
<Div id="mainContent">
            <h2> Our House </h2>
            <div id="columnLeft">
                <ul>
                    <li id="leftColumnPainting">
                        <a href="#houseImages">Painting</a>
                    </li>
                    <li id="leftColumnLandscaping">
                        <a href="landscaping.html">Landscaping</a>
                    </li>
                    <li id="leftColumnRenovations">
                        <a href="renovations.html">Renovations</a>
                    </li>
                    <li id="leftColumnUpcoming">
                        <a href="upcoming.html">Upcoming</a>
                    </li>
                    <li id="leftColumnNext">
                        <a href="whatsnext.html">Vote for <br>Next!</br></a>
                    </li>
                </ul>
            </div>
            <div id="columnRight">
                <div id="title">
                <p> Over the course of a couple years we have done a number of projects around the house. Click on a link to your left to see the improvements! Don't forget to vote for what's next!
                </p>
                </div>
                <div id="houseImages">
                <ul>
                    <li>
                        <a href="Painting.html"><img src="./img/house1.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/house2.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/house3.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/house4.jpg" /></a>
                    </li>

                </ul>
                </div>
                <div id="landImages">
                <ul>
                    <li>
                        <a href="Painting.html"><img src="./img/land1.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/land2.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/land3.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/land4.jpg" /></a>
                    </li>

                </ul>
                </div>
                <div id="renovationImages">
                <ul>
                    <li>
                        <a href="Painting.html"><img src="./img/renovation1.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/renovation2.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/renovation3.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/renovation4.jpg" /></a>
                    </li>

                </ul>
                </div>
                <div id="upcomingImages">
                <ul>
                    <li>
                        <a href="Painting.html"><img src="./img/upcoming1.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/upcoming2.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/upcoming3.jpg" /></a>
                    </li>
                    <li>
                        <a href="Painting.html"><img src="./img/renovation4.jpg" /></a>
                    </li>

                </ul>
                </div>
                <div id="voteForNext">
                    <p> enter in voting form here</p>
                </div>
            </div>
        </Div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:33:36.617

我建议将您更改为您`<a href="">`要显示的 div 的 ID。然后您可以执行以下操作：

```
 $("#columnleft li a").click(function(e) {
   e.preventDefault();
   $("columnright div").hide();
   $("#"+$(this).attr("href")).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:39:20.740

我个人喜欢 Hide -> fadeIn 效果组合。如果您有 2 个按钮和 2 个 div，您可以切换显示哪个按钮，如下所示：

HTML：

```
<div id="a">div 1</div>

<div id="b">div 2</div>
<button id="c">show div 1</button>
<button id="d">show div 2</button>​ 
```

CSS：

```
div{
    width: 200px;
    height: 200px;
    border: solid 1px;
    display: none;
}​ 
```

JS：

```
$('#c').click(function() {
    $('#b').hide();
    $('#a').fadeIn();
});
$('#d').click(function() {
    $('#a').hide();
    $('#b').fadeIn();
});​ 
```

请参阅 JSfiddle：http: [//jsfiddle.net/HSNLN/](http://jsfiddle.net/HSNLN/)

您可以将此方法附加到您可以使用 jQuery 捕获的任何事件，并显示/隐藏和 div。

# objective-c - AFNetworking 异步数据获取

> ID：11055468
> 
> 赞同：0
> 
> 时间：2012-06-15T17:27:05.437
> 
> 标签：objective-c, ios, asynchronous, objective-c-blocks, afnetworking

我正在使用 AFNetworking 库从服务器中提取 JSON 提要来填充 a `UIPickerView`，但是我在理解异步处理方式时遇到了一些麻烦。`@property` `classChoices`是`NSArray`用于填充 的，`UIPickerView`因此网络调用只执行一次。但是，由于在返回实例变量时块还没有完成，getter 返回 nil，它最终导致我的程序稍后崩溃。任何解决此问题的帮助将不胜感激。如果您需要任何其他信息，请告诉我。

**PickerViewController.m classChoices Getter**

```
- (NSArray *)classChoices {
    if (!_classChoices) {
        // self.brain here refers to code for the SignUpPickerBrain below
        [self.brain classChoicesForSignUpWithBlock:^(NSArray *classChoices) {
            _classChoices = classChoices;
        }];
    }
    return _classChoices;
} 
```

**注册PickerBrain.m**

```
- (NSArray *)classChoicesForSignUpWithBlock:(void (^)(NSArray *classChoices))block {
    [[UloopAPIClient sharedClient] getPath:@"mobClass.php" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseJSON) {
        NSLog(responseJSON);
        if (block) {
            block(responseJSON);
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);

        if (block) {
            block(nil);
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:30:17.723

您需要在 PickerViewController 中使用类似以下的方法，该方法在下载后返回数组。返回回调后，您可以继续使用您的代码：

```
- (void)classChoices:(void (^) (NSArray * classChoices)) _callback {
    if (!self.classChoices) {
        // self.brain here refers to code for the SignUpPickerBrain below
        [self.brain classChoicesForSignUpWithBlock:^(NSArray *classChoices) {
            _callback(classChoices);
        }];
    }
}

// call the method

- (void) viewDidLoad {

    [super viewDidLoad];

    [self classChoices:^(NSArray * updatedChoices) {

        self.classChoices = updatedChoices;

        [self.pickerView reloadAllComponents];

    }];

} 
```

# c# - 从 UpdateDataSet 返回好的错误

> ID：11055472
> 
> 赞同：0
> 
> 时间：2012-06-15T17:27:24.740
> 
> 标签：c#, database, dataset, prepared-statement, enterprise-library

**编辑：**解决方案（有点）
所以，我所做的与我最初想做的几乎没有共同之处，但我的应用程序现在运行*得*更快（处理时间超过 15 分钟的数据集现在在 30-40 秒内完成最高额）。这大致是我所做的：
- 阅读电子表格并填充`DataTable`/`DataSet`正常
- [HACK WARNING] 我没有使用 UpdateDataSet，而是生成自己的 SQL 查询，主要是通过为每种类型的更新（例如`String skeleton = "UPDATE ... SET ... WHERE ..."`）生成一个框架字符串。然后我查阅模板数据库并用`...`适当的条目替换占位符。
- [更多黑客警告] 我处理错误的方式是手动检查这些错误是否会发生。因此，如果我知道我将要进行插入，我将在实际插入之前运行一个错误检查命令；错误检查器将做的是构造一个 JOIN 语句，检查用户的 DataSet 中的任何条目是否已经存在于数据库中。只需执行 JOIN 命令，我就会返回一个带有结果的 DataSet，所以我知道如果那里有任何东西，那就是错误。然后我可以继续打印它们。

如果有人需要更多详细信息，我很乐意提供。这是一个相当具体的问题，所以我应该把这个大纲保持在相当高的水平。

**原始问题**
出于我无法控制的（好的）原因，我需要使用`Database.UpdateDataSet()`Microsoft 企业库中的方法。我的项目的工作方式是，我让用户通过将 Excel 电子表格上传到 Web 应用程序来更改数据库（多个数据库、多个模式、多个表，但始终一次只有一个）。电子表格遵循我（通常）指定的设计/模板。我的状态是阅读电子表格，将其转换为 DataTable/DataSet，并使用（动态生成的）准备好的语句对数据库进行适当的更改。这是问题所在：

每个电子表格只允许一种类型的更改（插入/更新/删除）。我想这样做，如果用户上传了一个插入电子表格，但是数据库中已经有几个（比如说 10 个）条目，我不仅返回一个错误，而且告诉他们哪些条目（`DataRow`s）违反了主要关键约束。

想法解决方案是获取一个带有错误列表的 DataSet，但我不知道该怎么做。也许有一种方法可以构造准备好的语句，如果要插入 DataRow（按照上面的示例），它会正常进行；但是，如果它尝试更新或删除，它会跳过它并将其添加到某种错误集合中？

请注意，我试图避免使用存储过程。由于部署后不同模板的数量会增长得非常快，所以我尽量远离手动编写代码，尽可能接近数据库驱动模型，这一点很重要。

# c# - 指定的演员表无效 - 试图转换一个字符

> ID：11055473
> 
> 赞同：-2
> 
> 时间：2012-06-15T17:27:27.333
> 
> 标签：c#, sql

我正在尝试按如下方式转换字符：

```
while (Reader.Read())
{
  VM VMResult = new VM();
  VMResult.status = (char)Reader["status"];
  VMList.Add(VMResult);
} 
```

然后是有趣的部分：`Specified Cast is not Valid.`

VMResult.status 是一个字符

返回的数据是sql中的char(1)

我认为 C# / SQL char 术语必须有所不同。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:53:32.323

> 我认为 C# / SQL char 术语必须有所不同。

这是正确的。sql server中的char是固定长度的字符串。它可以为空。

.net 中的 char 是一种将单个字符表示为 UTF-16 代码单元的结构。它不能为空，因为它是一个结构

.Net 没有固定长度的字符串，除非您将 char 数组或字节数组视为固定长度的字符串。

由于大多数 .net 生态系统对字符串的支持比对字符、字符数组或字节数组的支持更好，因此最好只使用为 char(x) 字段返回的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:31:49.197

`Reader["status"]`如果你知道一个永远是 char的事实（或者你只想要第一个 char），并且当前的类型`Reader["status"]`是 a`string`你总是可以

```
VMResult.status = (!string.IsNullOrEmpty(Reader["status"])) ? 
                      Reader["status"].ToCharArray()[0] : ''; 
```

**编辑：**空检查ftw。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:32:03.590

好的，所以您基本上想将字符串转换为字符，这将假设您的“状态”值是单个字符串：

```
VMResult.status = Reader["status"].ToString()[0]; 
```

这还假设 Reader[] 尚未返回字符串（如果返回则`ToString`不需要）并且该值不为空。

# c# - Visual Studio MSbuild 重命名文件事件

> ID：11055475
> 
> 赞同：0
> 
> 时间：2012-06-15T17:27:51.843
> 
> 标签：c#, visual-studio, msbuild

我正在为visual studio写一个扩展，它会根据ascx代码自动生成一些JS文件。

```
 public class JSCodeGenTask : Task 
```

该任务被注册为构建后任务，这意味着它将在每次构建后执行。该类扩展了 Task，并在 csproj 中注册。

```
 <Target Name="AfterBuild">
      <JSCodeGenTask FileNames="@(something)" outPath="@(somethingelse)" />
   </Target> 
```

问题是，我想跟踪重命名 ascx 文件的程序员，即我想要该 ascx 文件的旧名称。有没有办法访问这些信息？

```
 public event RenamedEventHandler Renamed 
```

我知道可以在这里使用重命名的事件，但我不知道如何将此事件注册到 Visual Studio -- .csproj。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:20:42.543

我想我找到了解决方案

[http://msdn.microsoft.com/en-us/library/bb166508%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb166508%28VS.100%29.aspx)

它应该作为自定义工具而不是 MSbuild 事件来实现。示例可以在

[http://code.msdn.microsoft.com/SingleFileGenerator#BuildAndRun](http://code.msdn.microsoft.com/SingleFileGenerator#BuildAndRun)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:40:45.303

我认为写目标会更容易。`ItemGroup`您只需要使用 *.ascx 文件创建适当的文件。您可以从`Content`

```
<Target Name="AfterBuild" DependsOnTargets="GenerateScripts" />
<Target Name="GenerateScripts">
  <ItemGroup>    
       <AscxFiles Include="@(Content)" Condition="'%(Extension)'=='.ascx'" />
  </ItemGroup>
  <JSCodeGenTask FileNames="@(AscxFiles)" OutPath="$(OutPath)" />
</Target> 
```

# iphone - iOS6 开发者的差异

> ID：11055476
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:27:53.433
> 
> 标签：iphone, ios, gps, location, ios6

对于 iOS6，开发者可以利用哪些新功能？

具体来说，我对用户位置服务感兴趣。

例如，在 iO6 演示中，它说当用户拒绝电话时，他们可以选择在上班时收到通知。

这是否意味着 GPS 服务在 iOS6 中始终处于开启状态？在 iOS5 中，当应用程序（例如高亮显示）请求全时访问位置服务（即使它们退出时），GPS 仍保持打开状态，但会消耗大量电池电量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T17:58:26.873

如果您想亲自查看或在 Apple 讨论板上询问我们，您需要支付 99 美元并成为注册开发者，因为我们不允许在外面和非注册开发者谈论它.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T17:38:06.210

阅读 iOS6 API 差异。这是在**保密协议**`(Non Disclosure Agreement)`下，所以我们无法公开讨论这个问题。

前往`Apple Developer`论坛并在那里发布您的问题。

# email - 使用另一个域的 From 地址发送 SMTP

> ID：11055481
> 
> 赞同：0
> 
> 时间：2012-06-15T17:28:06.167
> 
> 标签：email, proxy, smtp

我的目标是在我的服务器上创建一个罐头电子邮件，然后从客户电子邮件地址发送电子邮件。要做到这一点并且不被标记为垃圾邮件，我知道它必须来自与发件人地址匹配的域。我需要从许多用户电子邮件地址发送电子邮件，它们都具有相同的域。在我的客户的合作下，我是否可以将其设置为使用一个 SMTP 凭据，或者我是否需要为每个单独的用户提供凭据？

澄清一下，如果我从我的客户端获得一个带有 un/pw 的 SMTP 服务器地址，这是否足以发送：

george@example.com martha@example.com ted@example.com

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:49:05.123

这完全取决于您使用的 SMTP 服务器。某些服务器会允许这样做，例如 Google 的 SMTP，但当标头与经过身份验证的帐户不匹配时，它会将`Sender`标头附加到传出邮件。`From`

例子：

1.  您通过以下方式进行身份验证`joe@gmail.com`
2.  你发送出去`From: bill@gmail.com`
3.  邮件将包含`From: bill@gmail.com`，但 Google 会附加
    `Sender: joe@gmail.com`到邮件标头。

因此，它完全取决于 SMTP 服务器[及其策略](http://support.google.com/mail/bin/answer.py?hl=en&answer=22370)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:39:17.067

### 问题

您希望避免在自动消息中出现[joe-jobbing](http://en.wikipedia.org/wiki/Joe_job)。

### 您的选择

这取决于您如何向 MTA 提交作业。

1.  如果您要针对每封邮件向远程 SMTP 服务器进行身份验证，则您需要为每个用户提供凭据。
2.  如果您将消息直接注入到授权为域发送邮件的 MTA（例如使用*sendmail命令）中，那么您只需要特权访问。*

# r - 合并csv文件后维护列结构

> ID：11055483
> 
> 赞同：0
> 
> 时间：2012-06-15T17:28:14.247
> 
> 标签：r, twitter, csv, merge

我正在合并近 3.000 个 csv 文件，删除重复的行，并编写一个新的 csv 数据文件。为此，我使用了以下代码：

```
#Grab our list of filenames
filenames <- list.files(path = ".", pattern='^.*\\.csv$')
#Read.csv function
my.read.csv <- function(fnam) { read.csv(fnam, header=FALSE, skip=1, sep=';', col.names=c('ID','tweet','author','local.time','extra'), colClasses=rep('character', 5))}
#Read all the files into one data.frame
my.df <- do.call("rbind", lapply(filenames, my.read.csv)) length(my.df[,1])
#Remove the duplicate tweets
my.new.df <- my.df[!duplicated(paste(my.df$tweet, my.df$author)),]
length(my.new.df[,1])
#Write new dataframe as a .csv file
write.csv(my.new.df, file =paste("Dataset", ".csv")) 
```

尽管该函数做了它应该做的事情，但输出文件很混乱。原始的 csv 文件都具有以下结构：

```
tweet                                                         author    local.time
2012-06-05 00:01:45 @A (A1):  Cruijff z'n (...)#bureausport.  A (A1)    05-06-12 00:01
2012-06-05 00:01:41 @B (B1):  Welterusten #BureauSport        B (B1)    05-06-12 00:01
2012-06-05 00:01:38 @C (C1):  Echt (...) #bureausport         C (C1)    05-06-12 00:01
2012-06-05 00:01:38 @D (D1):  LOL. #bureausport               D (D1)    05-06-12 00:01 
```

但是输出文件具有以下结构：

```
,"ID","tweet","author","local.time","extra"
1,"2012-06-05 00:01:45 @A (A1):  Cruijff z'n (...)#bureausport.","@A (A1)","05-06-12 00:01"
2,"2012-06-05 00:01:41 @B (B1):  Welterusten #BureauSport","@B (B1)","05-06-12 00:01"
3,"2012-06-05 00:01:38 @C (C1):  Echt (...) #bureausport","Aliceislovely (Alice Luyben)","05-06-12 00:01"
4,"2012-06-05 00:01:38 @D (D1):  LOL. #bureausport","@D (D1)","05-06-12 00:01" 
```

因此，它将数据显示为字符串而不是列。我希望你能帮我调整代码（上图），使输出文件具有与原始（输入）csv 文件相同的列结构。

顺便说一句，以下代码用于创建 csv 文件：

```
library(XML)   # htmlTreeParse

twitter.search <- "Keyword"

QUERY <- URLencode(twitter.search)

# Set time loop (in seconds)
d_time = 300
number_of_times = 3000

for(i in 1:number_of_times){

tweets <- NULL
tweet.count <- 0
page <- 1
read.more <- TRUE

while (read.more)
{
# construct Twitter search URL
URL <- paste('http://search.twitter.com/search.atom?q=',QUERY,'&rpp=100&page=', page, sep='')
# fetch remote URL and parse
XML <- htmlTreeParse(URL, useInternal=TRUE, error = function(...){})

# Extract list of "entry" nodes
entry     <- getNodeSet(XML, "//entry")

read.more <- (length(entry) > 0)
if (read.more)
{
for (i in 1:length(entry))
{
subdoc     <- xmlDoc(entry[[i]])   # put entry in separate object to manipulate

published  <- unlist(xpathApply(subdoc, "//published", xmlValue))

published  <- gsub("Z"," ", gsub("T"," ",published) )

# Convert from GMT to central time
time.gmt   <- as.POSIXct(published,"GMT")
local.time <- format(time.gmt, tz="Europe/Amsterdam")

title  <- unlist(xpathApply(subdoc, "//title", xmlValue))

author <- unlist(xpathApply(subdoc, "//author/name",  xmlValue))

tweet  <-  paste(local.time, " @", author, ":  ", title, sep="")

entry.frame <- data.frame(tweet, author, local.time, stringsAsFactors=FALSE)
tweet.count <- tweet.count + 1
rownames(entry.frame) <- tweet.count
tweets <- rbind(tweets, entry.frame)
}
page <- page + 1
read.more <- (page <= 15)   # Seems to be 15 page limit
}
}

names(tweets)

# top 15 tweeters
#sort(table(tweets$author),decreasing=TRUE)[1:15]

write.table(tweets, file=paste("Twitts - ", format(Sys.time(), "%a %b %d %H_%M_%S %Y"), ".csv"), sep = ";")

Sys.sleep(d_time)

} # end if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:54:49.580

看起来您希望输出具有制表符分隔的字段，并且每列中的值没有引号。您可以这样做：

```
write.table(mtcars, "mtcars.txt", quote=FALSE, sep="\t") 
```

要快速预览和比较对`write.csv()`上述代码的调用的输出，请使用您自己的数据尝试以下操作：

```
write.csv(head(mtcars))
write.table(head(mtcars), quote=FALSE, sep="\t") 
```

* * *

**编辑：**如果（而不是制表符分隔的字段）您需要每列中的数据完全水平对齐，请查看`write.fwf`package `gdata`，[如此处所示](https://stackoverflow.com/questions/7844462/setting-column-width-in-a-data-set)。（“fwf”代表“固定宽度格式”。）

# ruby-on-rails - 为什么当我尝试将对象保存到数据库时 Rails 功能测试失败

> ID：11055486
> 
> 赞同：0
> 
> 时间：2012-06-15T17:28:38.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, functional-testing

我正在尝试测试我的显示操作，但我首先必须将一个对象保存到数据库中才能显示。

```
test "should get show" do
  post :create, question: { question: 'apple'}
  get :show, {'id' => "1"}
  assert_response :success
  assert_not_nil assigns(:question)
end 
```

在另一个测试中，我有这`post :create...`条线并且它可以工作。但是，在这里我不断得到`ActiveRecord::RecordNotFound: Couldn't find Question with id=1`，所以我不确定问题是什么。我该如何解决？大图最好的方法是什么？

***编辑：***

我已将测试更改为如下所示：

```
test "should get show" do
    post :create, question: {set_id: 4}
    pp Question.all
    get :show, {'id' => "1"}
    assert_response :success
    assert_not_nil assigns(:question)
end 
```

这给了我：

```
[#<Question id: 261990764, question: "Who was... updated_at: "2012-06-15 19:34:16">,
 #<Question id: 607888892, question: "Who was... updated_at: "2012-06-15 19:34:16">,
 #<Question id: 607888893, question: nil, ... set_id: 4,...] 
```

这是您所期望的，除了 ID 部分。Rails 是否在测试环境中分配随机 ID？

***这是我通过的测试：***

```
test "should get show" do
  q = Question.new(question: 'q', answer: 'a', set_id: 1)
  q.save
  get :show, {id: q.id}
  assert_response :success
  assert_not_nil assigns(:question)
end 
```

仍然希望有人向我解释为什么 ID 如此之高以及 rails 是如何分配它的。

而且，这是一个利用固定装置的示例：

```
test "should get show2" do
    get :show, {id: questions(:prez_one).id}
    assert_response :success
    assert_not_nil assigns(:question)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:40:20.747

您是否检查过您创建的问题是否有 id = 1？
id 列是否在您的数据库中自动递增？
你在使用 MySQL 数据库吗？

您可能希望在该`post :create`行之后显示所有问题。
然后，选择 Question with apple 得到对应的 id。

希望有帮助。

# assembly - 字母“c”作为变量名

> ID：11055487
> 
> 赞同：2
> 
> 时间：2012-06-15T17:28:41.010
> 
> 标签：assembly, x86

纯粹出于好奇——为什么不能将变量命名为“c”？例如...

```
.386
.model  flat, stdcall
option  casemap:none

include windows.inc
include kernel32.inc
include user32.inc

includelib user32.lib
includelib kernel32.lib

Main        proto

.data

hOutput dd 0
hInput dd 0

bReadWritten dd 0
szText db "Program calculates the roots of the quadratic expression ax^2+bx+c",10,"Enter a",0 

a dd 0
b dd 0 
c dd 0

delta dd 0

szInput db 128 dup(0)

.data?

.code
start:

Invoke Main
Invoke ExitProcess,0

Main proc
    invoke GetStdHandle, STD_OUTPUT_HANDLE
    mov hOutput, eax

    invoke GetStdHandle,STD_INPUT_HANDLE
    mov hInput, eax

    invoke lstrlen, addr szText
    invoke WriteFile, hOutput, addr szText, eax, ADDR bReadWritten, NULL

    invoke ReadFile, hInput, a, eax,addr bReadWritten, NULL 
    invoke ReadFile, hInput, b, eax,addr bReadWritten, NULL 
    invoke ReadFile, hInput, c, eax,addr bReadWritten, NULL 

    invoke Sleep,10000

    ret
Main endp   

end start 
```

...这会导致组装时错误

> C:\3-rd 方程序\winASM\WinAsm\Projects\quadratic equation\EXE.asm(24) : 错误 A2008: 语法错误: c
> C:\3-rd 方程序\winASM\WinAsm\Projects\quadratic equation\ EXE.asm(52)：错误 A2008：语法错误：c

当我重命名它时，一切都组装并运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:47:08.750

尝试将变量命名为`PASCAL`、`FORTRAN`、或。我相信，你会得到同样的错误。如果您碰巧使用以上述语言编写的程序，它们都是指定过程调用约定的关键字。关键字的有效用法如下`BASIC``SYSCALL``STDCALL``C``funcname PROTO C arguments...`

# extjs - ExtJS：如何使窗口足够大以容纳 FormPanel？

> ID：11055496
> 
> 赞同：1
> 
> 时间：2012-06-15T17:29:09.857
> 
> 标签：extjs, extjs3

我正在创建一个 FormPanel，其中包含一些字段和两个按钮，并将其托管在弹出模式窗口中。FormPanel 有一个默认的“form”布局，Window 有一个“fit”。我事先不知道面板的最佳尺寸。我希望能够以编程方式调整包含窗口的大小以完全显示 FormPanel。我想这一切都归结为询问布局管理器的最佳面板尺寸是多少，但我还没有找到任何方法来做到这一点。我正在使用 ExtJS 3.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T10:10:52.530

尝试调整窗口大小以适应表单面板的高度和宽度，例如

```
window.resizeTo(form.getWidth(),form.getHeight()); 
```

# r - R 中超大型数据集处理和机器学习的推荐包

> ID：11055502
> 
> 赞同：41
> 
> 时间：2012-06-15T17:29:29.317
> 
> 标签：r, machine-learning, signal-processing, bigdata

看起来 R 真的是为处理可以完全拉入内存的数据集而设计的。推荐哪些 R 包用于无法拉入内存的超大型数据集的信号处理和机器学习？

如果 R 只是错误的方法，我愿意接受其他强大的免费建议（例如 scipy，如果有一些很好的方法来处理非常大的数据集）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-20T19:59:02.637

查看CRAN 上[高性能计算任务视图](http://cran.r-project.org/web/views/HighPerformanceComputing.html)的“大内存和内存不足数据”小节。[bigmemory](http://cran.r-project.org/web/packages/bigmemory/index.html)和[ff](http://cran.r-project.org/web/packages/ff/index.html)是两个流行的软件包。对于 bigmemory（以及相关的[biganalytics](http://cran.r-project.org/web/packages/biganalytics/index.html)和[bigtabulate](http://cran.r-project.org/web/packages/bigtabulate/index.html)），[bigmemory 网站](http://www.bigmemory.org/)上有一些来自 Jay Emerson 的非常好的演示文稿、小插曲和概述。对于 ff，我推荐阅读 Adler Oehlschlägel 及其同事在[ff 网站](http://ff.r-forge.r-project.org/)上的精彩幻灯片演示。

此外，考虑将数据存储在数据库中并以较小的批次读取数据以进行分析。可能有许多方法需要考虑。首先，请查看[biglm](http://cran.r-project.org/web/packages/biglm/index.html)包中的一些示例，以及Thomas Lumley 的[演示文稿](http://faculty.washington.edu/tlumley/tutorials/user-biglm.pdf)。

并调查高性能计算任务视图中的其他包，并在其他答案中提到。我上面提到的软件包只是我碰巧有更多经验的软件包。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-15T18:08:24.567

我认为您可以处理的数据量更多地受到编程技能的限制。尽管许多标准功能都集中在内存分析中，但将数据分成块已经很有帮助。当然，这比编写标准的 R 代码需要更多的时间来编程，但通常情况下是很有可能的。

例如，可以使用仅支持读取数据子集的 read.table 或 readBin 来完成数据切割。或者，您可以查看提供开箱即用内存外功能的软件包的高性能计算任务视图。您还可以将数据放入数据库中。对于空间栅格数据，优秀的栅格包提供内存不足分析。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-15T18:28:18.360

对于机器学习任务，我可以推荐使用[biglm](http://cran.r-project.org/web/packages/biglm/index.html)包，用于“对太大而无法放入内存的数据进行回归”。要使用 R 处理真正的大数据，可以使用[Hadoop](http://hadoop.apache.org/)作为后端，然后使用包[rmr](https://github.com/RevolutionAnalytics/RHadoop/wiki/rmr)通过 MapReduce 在 Hadoop 集群上执行统计（或其他）分析。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-16T23:01:06.280

这完全取决于您需要的算法。如果它们可以转换为**增量**形式（当在任何给定时刻只需要一小部分数据时，例如对于朴素贝叶斯，您可以只将模型本身和当前正在处理的观察保存在内存中），那么最好的建议是执行机器增量学习，从磁盘读取新批次的数据。

然而，许多算法，尤其是它们的实现确实需要整个数据集。如果数据集的大小适合您的磁盘（和文件系统限制），您可以使用**[mmap](http://cran.r-project.org/web/packages/mmap/mmap.pdf)**包，该包允许将磁盘上的文件映射到内存并在程序中使用它。但是请注意，对磁盘的读写成本很高，而且 R 有时喜欢频繁地来回移动数据。所以要小心。

如果您的数据甚至无法存储在硬盘上，您将需要使用分布式机器学习系统。一个这样的基于 R 的系统是[**Revolution R**](http://www.revolutionanalytics.com/products/revolution-r.php)，它旨在[处理](http://www.revolutionanalytics.com/products/enterprise-big-data.php)非常大的数据集。不幸的是，它不是开源的并且要花很多钱，但是您可以尝试获得[免费的学术许可证](http://www.revolutionanalytics.com/downloads/free-academic.php)。作为替代方案，您可能对基于 Java 的[**Apache Mahout**](http://mahout.apache.org/)感兴趣- 不是那么优雅，但非常有效的解决方案，基于 Hadoop 并包含许多重要算法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-08T09:57:35.510

如果内存不够，一种解决方案是将数据推送到磁盘并使用分布式计算。我认为 RHadoop(R+Hadoop) 可能是处理大量数据集的解决方案之一。

# search - 使用扩展区域在 emacs 中更好地搜索

> ID：11055504
> 
> 赞同：5
> 
> 时间：2012-06-15T17:29:57.943
> 
> 标签：search, emacs, elisp, expand, region

假设我们有以下文本：

```
(print "thIis-is-a-text") 
```

光标位于字符“h”和“i”之间的单词“this”中。

在 emacs 中，如果我输入`C-s C-w`，要搜索的文本是 'is'，

又`C-w`是'是-是'，

又`C-w`是'is-is-a'，

再次`C-w`是'is-is-a-text'，

再次`C-w`是'是文本''......

还有一个 emacs 插件[扩展区域](https://github.com/magnars/expand-region.el)：“扩展区域按语义单位增加所选区域。只需按住键，直到它选择你想要的。”

所以我想`C-s C-w`变得更聪明：与扩大区域相结合。

再次在单词“this”中的字符“h”和“i”之间移动光标，我的目标是：

当我输入时`C-s C-w`，“this”这个词将是要搜索的文本，

再次将是“this-is-a-text”，

再次将是 '"this-is-a-text"'，

再次将是 'print "this-is-a-text"',

再次将是 '(print "this-is-a-text")',

....（表现得像扩大区域，也许这不是一个很好的例子......）

因为我发现有时扩展区域在搜索文本时非常有用，我希望有人可以为我编写一些代码来实现这一点，因为我是 emacs 和 elisp 的新手。谢谢，请原谅我蹩脚的英语！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:11:52.403

有一个非常简单的包叫做[thingopt](https://github.com/m2ym/thingopt-el)，它使用thingatpt 来做一些类似于expand-region 的事情。我已经使用[修改版](https://github.com/jpkotta/thingopt-el)很长一段时间了，它增加了 isearch 支持。这个问题提醒我分叉并提出拉取请求。我的 init.el 中有以下内容：

```
(define-key isearch-mode-map (kbd "C-S-s") 'upward-isearch-thing)
(define-key isearch-mode-map (kbd "M-3") 'upward-isearch-thing)

(global-set-key (kbd "C-S-s") 'upward-mark-thing)
(global-set-key (kbd "M-3") 'upward-mark-thing)

(setq upward-mark-thing-list
      '(email
        url
        word
        symbol
        string
        (up-list . *)
        paragraph
        )) 
```

我尝试过expand-region，我想我会更喜欢它，但它看起来要复杂得多，在我开始使用它之前我必须添加isearch支持。希望有一天我会（或其他人会）解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:52:38.847

```
(defadvice isearch-yank-word-or-char (before move-to-beginning-of-word)
  (unless (eq last-command this-command)
    (goto-char (car (bounds-of-thing-at-point 'word)))))
(ad-activate 'isearch-yank-word-or-char) 
```

# jquery - 如何使用 jVectorMap 从 onRegionClick 回调中的地图数组中获取州名？

> ID：11055511
> 
> 赞同：5
> 
> 时间：2012-06-15T17:30:17.007
> 
> 标签：jquery, arrays, jquery-plugins, callback, jvectormap

我正在使用 jVectorMap 插件，并且试图从如下所示的地图数组中获取名称元素：

```
$.fn.vectorMap('addMap', 'usa_en', {
    "width": 959,
    "height": 593,
    "pathes": {
        "hi": {
            "path": "COORDINATES_GO_HERE",
            "name": "Hawaii"
        },
        "ak": {
            "path": "COORDINATES_GO_HERE",
            "name": "Alaska"
        },
        "fl": {
            "path": "COORDINATES_GO_HERE",
            "name": "Florida"
        },
        ...and so on for the other 47 states
    }
}) 
```

该插件使用以下方式启动，地图数组文件由“地图”设置定义：

```
var myData = {"hi":0,"ak":0,"fl":0, ...and so on}

$('#us-map').vectorMap({
    map: 'usa_en',
    values: myData,
    color: '#ccc',
    onRegionClick: function(event, code){
        $.get('{site_url}embeds/state_view/'+code, function(data) {
            $('#data-replace').fadeOut(200,function(){ $(this).html(data).fadeTo(200,1); });
            $('#data-title').fadeOut(200,function(){ $(this).text(INSERT_CLICKED_STATE_NAME_HERE).fadeTo(200,1); });
        });
    }
}); 
```

关于如何将地图文件数组中的状态名称插入到 onRegionClick 回调中的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T00:59:07.273

您需要获取地图对象的句柄，然后您可以使用该`getRegionName()`方法：

```
onRegionClick: function(event, code){
    //obtain the reference to the map object
    var map = $('#world-map').vectorMap('get', 'mapObject');

    $.get('{site_url}embeds/state_view/'+code, function(data) {
        $('#data-replace').fadeOut(200,function(){ $(this).html(data).fadeTo(200,1); });
        $('#data-title').fadeOut(200, function(){ $(this).text(map.getRegionName(code)).fadeTo(200,1); });
    }); 
```

# objective-c - 两个类之间的 IBOutlets 属性不保留。解除分配？

> ID：11055513
> 
> 赞同：0
> 
> 时间：2012-06-15T17:30:19.097
> 
> 标签：objective-c, cocoa, retain, nstextfield, iboutlet

我试图弄清楚为什么我`NSTextFields`只保留在第一种方法`sendVarsToButton`中而不是`updateTotal`方法中。我需要从第一种方法中设置的 TextField 访问值，但我不能，因为我的 IBOutlets 似乎在`sendVarsToButton`方法之后自行释放。你能帮我吗！？

这是我的.h

```
#import <Cocoa/Cocoa.h>
#import "TransactionViewController.h"
@class TransactionButtonModel;

@interface TransactionButtonController : TransactionViewController

{
NSMutableArray *buttonsArrays;
TransactionViewController *transactionViewController;
TransactionButtonModel *transactionButtonModel;
}
@property(nonatomic,retain) IBOutlet NSTextField *nom;
@property(nonatomic,retain) IBOutlet NSTextField *descriptionText;
@property(nonatomic,retain) IBOutlet NSTextField *prix;
@property(nonatomic,retain) IBOutlet NSTextField *CPUField;
@property(nonatomic,retain) IBOutlet NSTextField *quantite;
@property(nonatomic,retain) IBOutlet NSTextField *total;

-(void)sendVarsToButton:(NSString *)name:(NSString *)description:(double)price:(double)CPU:(long)tag;
-(void)updateTotal:(int)newQuantity;
-(void)addQuantiteToExistingProduct:(long)tag;
-(IBAction)removeProductFromView:(id)sender; 
```

这是我的.m

```
#import "TransactionButtonController.h"
#import "TransactionViewController.h"
#import "TransactionButtonModel.h"

@implementation TransactionButtonController
@synthesize prix;
@synthesize nom;
@synthesize descriptionText;
@synthesize CPUField;
@synthesize total;
@synthesize quantite;

//In this method, everything works fine

-(void)sendVarsToButton:(NSString *)name :(NSString *)description :(double)price :(double)CPU:(long)tag
{
[nom setTag:tag];
[descriptionText setTag:tag];
[prix setTag:tag];
[CPUField setTag:tag];
[quantite setTag:tag];
[total setTag:tag];

nom.stringValue = name;
descriptionText.stringValue = description;
[prix setDoubleValue : price];
CPUField.doubleValue = CPU;

total.doubleValue = [TransactionButtonModel calculateButtonTotal:quantite.intValue :prix.doubleValue];

NSLog(@"retain! :%lu",[[prix viewWithTag:tag] retainCount]); // returns 2

[transactionButtonModel release];

}
-(void)updateTotal:(int)newQuantity
{
NSLog(@"retain! :%lu",[[prix viewWithTag:2] retainCount]); //returns 0
[total setDoubleValue:[TransactionButtonModel calculateButtonTotal:newQuantity :prix.doubleValue]]; // value of prix = 0 and prix = null
NSLog(@"Updated! :%i",newQuantity);
}

-(void)dealloc
{
[nom release];
[quantite release];
[prix release];
[total release];
[descriptionText release];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:51:05.647

听起来您在这里遇到了一些问题。没有特别的顺序：

1.  `transactionButtonModel`即使你没有在那里创建它，你也会发布`sendVarsToButton:::::`它，并且没有特别明显的理由你想要这样做。这似乎可能是一个内存管理错误，但如果没有上下文就很难说。

2.  您正在查看引用计数机制以了解变量为空的原因。过度释放一个对象不会将引用该对象的变量设置为 null ——它只是一个垃圾指针，可能会使你的程序崩溃。变量意外为 null 的最可能原因是 a) 方法运行的顺序与您预期的不同，或者 b) 有两个不同的类实例，您将它们视为同一个实例。在这种情况下，我的钱会花在 B 上。您可能正在创建此类的两个实例，其中一个实际显示视图，另一个实质上是“空白”。尝试登录`self`这两种方法，看看它是否是同一个对象。

3.  在一种方法中，您正在记录`viewWithTag:tag`，而在另一种方法中，您正在记录`viewWithTag:2`——这不一定是一个安全的假设，`tag`即 2。

4.  `prix`是一个 NSTextField - 你为什么要它的子视图？NSTextField 通常不会有任何有用的子视图。这个设计似乎有些奇怪。

5.  您的方法名称与所有这些裸冒号都很疯狂。它很难阅读，并且经常导致错误（因为当你不在“当下”时可能会误读代码，并且它违反了语言的习惯用法）。

6.  您依赖于`retainCount`跟踪内存管理。返回的值`retainCount`充其量是有问题的，而且通常是彻头彻尾的欺骗性，因为事物一直被保留和自动释放，并且`retainCount`不会为您提供足够的信息来解释这一点。如果您有内存管理问题（变量变为 nil 时**似乎不是**这种情况），一个好的方法是使用 Instruments 和调试器来跟踪它，而不是随机`retainCount`记录。

# c# - 基于种子值和输出的重构函数

> ID：11055517
> 
> 赞同：0
> 
> 时间：2012-06-15T17:30:37.397
> 
> 标签：c#, prng

我有一个用 C# 重写的程序。有一个函数我没有我想在重写时重新创建的代码。根据我的调查，我认为它是某种 RNG。

我已经隔离了函数的种子值和输出。它在程序启动时生成一个无符号整数（种子），然后基于该种子生成一个 256 uint 数组。该程序使用数组中的值，一旦程序到达数组的末尾，种子就会增加 1，并且数组的输出会发生变化。

我已经尝试过：我已经使用我能找到的所有流行（？）RNG/PRNG 方法（mersenne twister、xor32 等）的算法设置了测试。我想他们可能在创建函数时使用了其中之一，但未能重现输出。

我的问题是，如果我有输出和种子，有没有办法重现产生这个输出的函数？如果可能的话，我想重新创建它。

# xslt - 如何使用 XSLT 1.0 模板从作者那里获取书籍

> ID：11055518
> 
> 赞同：1
> 
> 时间：2012-06-15T17:30:41.547
> 
> 标签：xslt

我对 XSLT1.0 有疑问。任务是仅使用 XSL 模板以 HTML 格式写出由给定作者编写的所有书籍。

```
<?xml version="1.0" encoding="UTF-8"?>
    <books>
        <book author="herbert">
            <name>Dune</name>
        </book>
        <book author="herbert">
            <name>Chapterhouse: Dune</name>
        </book>
        <book author="pullman">
            <name>Lyras's Oxford</name>
        </book>
        <book author="pratchett">
            <name>I Shall Wear Midnight</name>
        </book>
        <book author="pratchett">
            <name>Going Postal</name>
        </book>
        <author id="pratchett"><name>Terry Pratchett</name></author>
        <author id="herbert"><name>Frank Herbert</name></author>
        <author id="pullman"><name>Philip Pullman</name></author>
    </books> 
```

到目前为止，我有这个解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html"/>
    <xsl:template match="/">
        <html>
            <head/>
            <body>
                <table border="1">
                    <xsl:apply-templates select="//author"/>
                </table>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="author">
        <tr>
            <td>
                <xsl:value-of select="name/text()"/>
            </td>
            <td>
                <xsl:value-of select="@id"/>
            </td>
            <td>
                <xsl:apply-templates select="/books/book[@id=@author]"/>
                --previous XPath does not work properly, it should choose only those books that are written by the given author (that this template matches)
            </td>
        </tr>
    </xsl:template>
    <xsl:template match="book">
        <xsl:value-of select="name/text()"/>
    </xsl:template>
</xsl:stylesheet> 
```

但是有一个问题，在评论中解释了。

* * *

谢谢 Martin 和 Marzipan - 现在可以了。还有一件事。如果我想用逗号分隔每个作者的书名怎么办？我提出了这个解决方案，但是有没有更优雅的方法来实现这个？

...

```
<xsl:apply-templates select="/books/book[current()/@id=@author][not(position()=last())]" mode="notLast"/>
<xsl:apply-templates select="/books/book[current()/@id=@author][last()]"/>
                </td>
            </tr>
        </xsl:template>
        <xsl:template match="book">
            <xsl:value-of select="name/text()"/>
        </xsl:template>

        <xsl:template match="book" mode="notLast">
            <xsl:value-of select="name/text()"/>
            <xsl:text> , </xsl:text>
        </xsl:template>

    </xsl:stylesheet> 
```

我刚刚意识到我的问题已经被 Marzipan 回答了。那么问题就解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:38:53.277

您想要`<xsl:apply-templates select="/books/book[current()/@id=@author]"/>`或更好的是一个键（作为 xsl:stylesheet 元素的子元素）：

```
<xsl:key name="book-by-author" match="books/book" use="@author"/> 
```

然后`<xsl:apply-templates select="key('book-by-author', @id)"/>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:45:24.927

问题是这一行：

```
<xsl:apply-templates select="/books/book[@id=@author]"/> 
```

请理解，当您输入谓词时，上下文将更改为与前面的 XPath 选择器匹配的节点。上下文不再是与其所在的模板匹配的节点。

为了解决这个问题，将作者的 ID 提交给一个变量，然后在你的谓词中使用它。

```
<xsl:variable name='author_id' select='@id' />
...
[@author=$author_id] 
```

[编辑-或者，正如马丁在他的回答中指出的那样，`current()`用来强制上下文]

你可以在这里运行它：

[http://www.xmlplayground.com/10FRcA](http://www.xmlplayground.com/10FRcA)

# math - Haskell 对 Ints 和 Double 执行算术运算

> ID：11055519
> 
> 赞同：0
> 
> 时间：2012-06-15T17:30:46.960
> 
> 标签：math, haskell

我最近一直在为基本的编程语言编写解释器，一切正常。但是，有人可以建议我添加对双打的支持的最佳方法。目前只支持整数，但我也想添加对双精度数的支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:51:25.017

> 输入环境 a = [[Var, a]]

这是一个类型家族。`Env Int`是 int 环境，`Env Double`是 double 环境，依此类推。这不是一个可以同时保存整数和双精度的类型，这可能是您需要的。

可以同时保存整数和双精度的类型可能如下所示：

```
data Val = IntNum Int | DoubleNum Double 
```

然后您可以将环境设置为

```
type Env = [ (Var, Val) ] 
```

（我不知道您为什么在这里使用列表列表）。

您需要为`IntNum`和`DoubleNum`情况分别定义算术运算（如果您的语言支持，也可能为混合操作数定义）。

添加布尔值和列表很简单，只需在`Val`.

您将不得不处理您的语言中出现的类型错误，因为它开始支持多种类型。我不认为这种简单的设计非常适合静态类型安全的语言。如果你想要这样，设计必须进行重大调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:38:43.023

简单的答案是定义一个可以保存 ether`Int`或`Double`s 的变体类型，例如

```
data Value = Int Int
           | Double Double 
```

并相应修改`Env`和其他类型的定义：

```
type Env = [[(Var, Value)]]

data ValExpr = IVar Var
             | IVal Value
             ... 
```

但是如果您打算添加更多类型，我会考虑使用[GADT](http://www.haskell.org/haskellwiki/GADT)。

编辑：错字

# linux - 在 linux 上，如何创建具有 sudo 能力的受限 shell

> ID：11055526
> 
> 赞同：0
> 
> 时间：2012-06-15T17:31:36.413
> 
> 标签：linux, permissions, ssh, embedded-linux

我希望允许与 Linux 建立 SSH 连接，这限制了用户只能看到很少的文件系统并且只运行一小组命令的能力。大多数命令是我编写的一组脚本。

我受到 Checkpoint 和 Cisco 的产品的启发，他们如何授予对设备的有限简单访问权限，但更高级的用户基本上可以 sudo 进入管理 shell。

这通常是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:36:51.463

尝试 chroot 设置用户可以访问的根目录。

[在这里](http://www.debian.org/doc/manuals/securing-debian-howto/ap-chroot-ssh-env.en.html)检查

# javascript - 等到 setInterval() 完成

> ID：11055530
> 
> 赞同：24
> 
> 时间：2012-06-15T17:31:59.300
> 
> 标签：javascript, settimeout, setinterval, wait

我想在我的 Javascript 代码中添加一个小骰子滚动效果。我认为一个好的方法是使用`setInterval()`方法。我的想法是遵循代码（仅用于测试）：

```
function roleDice() {
    var i = Math.floor((Math.random() * 25) + 5);
    var j = i;
    var test = setInterval(function() {
        i--;
        document.getElementById("dice").src = "./images/dice/dice" + Math.floor((Math.random() * 6) + 1) + ".png";
        if (i < 1) {
            clearInterval(test);
        }

    }, 50);
} 
```

现在我想等待 setInterval 直到它完成。所以我添加了一个 setTimeout。

```
setTimeout(function(){alert("test")}, (j + 1) * 50); 
```

这段代码工作得很好。但在我的主代码中，该`roleDice()`函数返回一个值。现在我不知道我该如何处理......我无法从`setTimeout()`. 如果我在函数末尾添加一个返回，返回将提高到快。有谁知道，我该如何解决？

**编辑** 嗯，好吧，我了解回调剂量，我想我知道它是如何工作的，但我仍然有问题。我认为这更像是一个“接口”问题......这是我的代码：

```
function startAnimation(playername, callback) {
    var i = Math.floor((Math.random() * 25) + 5);
    var int = setInterval(function() {
        i--;
        var number = Math.floor((Math.random() * 6) + 1);
        document.getElementById("dice").src = "./images/dice/dice" + number + ".png";
        if(i < 1) {
            clearInterval(int);
            number = Math.floor((Math.random() * 6) + 1);
            addText(playername + " rolled " + number);
            document.getElementById("dice").src = "./images/dice/dice" + number + ".png";
            callback(number);
        }
    }, 50);
}

function rnd(playername) {
    var callback = function(value){
        return value; // I knew thats pointless...
    };
    startAnimation(playername, callback);
} 
```

该函数`rnd()`应该等待并返回值……我有点困惑。目前我不知道该怎么做......代码等待`var callback...`但我如何将它与返回结合起来？我想运行动画并在最后一个数字之后返回`rnd()`另一个函数。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-15T17:38:54.953

您偶然发现了大多数人在接触异步编程时遇到的陷阱。

您不能“等待”超时/间隔完成 - 尝试这样做将不起作用或阻止整个页面/浏览器。`setInterval`延迟后应该运行的任何代码都需要在“完成”时从您传递给的回调中调用。

```
function rollDice(callback) {
    var i = Math.floor((Math.random() * 25) + 5);
    var j = i;
    var test = setInterval(function() {
        i--;
        var value = Math.floor((Math.random() * 6) + 1);
        document.getElementById("dice").src = "./images/dice/dice" + value + ".png";
        if(i < 1) {
            clearInterval(test);
            callback(value);
        }
    }, 50);
} 
```

然后你像这样使用它：

```
rollDice(function(value) {
    // code that should run when the dice has been rolled
}); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-03-06T20:23:53.770

### 你现在可以使用 Promises 和`async/await`

与回调一样，您可以使用 Promises 传递在程序运行完成时调用的函数。如果您使用`reject`，您还可以使用 Promises 处理错误。

```
function rollDice() {
  return new Promise((resolve, reject) => {
    const dice = document.getElementById('dice');
    let numberOfRollsLeft = Math.floor(Math.random() * 25 + 5);

    const intervalId = setInterval(() => {
      const diceValue = Math.floor(Math.random() * 6 + 1);

      // Display the dice's face for the new value
      dice.src = `./images/dice/dice${diceValue}.png`;

      // If we're done, stop rolling and return the dice's value
      if (--numberOfRollsLeft < 1) {
        clearInterval(intervalId);
        resolve(diceValue);
      }
    }, 50);
  });
} 
```

然后，您可以使用该`.then()`方法在 promise 使用您的`diceValue`.

```
rollDice().then((diceValue) => {
  // display the dice's value to the user via the DOM
}) 
```

或者，如果你在一个`async`函数中，你可以使用`await`关键字。

```
async function takeTurn() {
  // ...
  const diceValue = await rollDice()
  // ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:34:00.020

最初你的代码都是顺序的。这是一个基本的骰子游戏，两个玩家掷一个，他们看谁的数字更大。[如果平局，第二人获胜！]

```
function roleDice() {
    return Math.floor(Math.random() * 6) + 1;
}

function game(){    
    var player1 = roleDice(),
        player2 = roleDice(),
        p1Win = player1 > player2;
    alert( "Player " + (p1Win ? "1":"2") + " wins!" );
}

game(); 
```

上面的代码非常简单，因为它只是流动的。当您放入像掷骰子那样的异步方法时，您需要将事物分解成块进行处理。

```
function roleDice(callback) {
    var i = Math.floor((Math.random() * 25) + 5);   
    var j = i;
    var test = setInterval(function(){
        i--;
        var die =  Math.floor((Math.random() * 6) + 1);
        document.getElementById("dice").src = "./images/dice/dice" + die + ".png";
        if(i < 1) {
                clearInterval(test);
                callback(die);  //Return the die value back to a function to process it
            }
        }, 50);
}

function game(){
    var gameInfo = {  //defaults
                       "p1" : null,
                       "p2" : null
                   },
        playerRolls = function (playerNumber) { //Start off the rolling
            var callbackFnc = function(value){ //Create a callback that will 
                playerFinishes(playerNumber, value); 
            };
            roleDice( callbackFnc );
        },
        playerFinishes = function (playerNumber, value) { //called via the callback that role dice fires
            gameInfo["p" + playerNumber] = value;
            if (gameInfo.p1 !== null && gameInfo.p2 !== null ) { //checks to see if both rolls were completed, if so finish game
                giveResult();
            }
        },
        giveResult = function(){ //called when both rolls are done
            var p1Win = gameInfo.p1 > gameInfo.p2;
            alert( "Player " + (p1Win ? "1":"2") + " wins!" );
        };            
    playerRolls("1");  //start player 1
    playerRolls("2");  //start player 2
}

game(); 
```

上面的代码在 OOP 类型方面可能会更好，但它确实有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T00:03:47.690

上述解决方案存在一些问题。运行程序不会（至少在我喜欢的浏览器中不会）显示任何图像，因此必须在运行游戏之前加载这些图像。

此外，根据经验，我发现在预加载 N 个图像或让 N 个玩家掷骰子等情况下启动回调方法的最佳方法是让每个超时函数倒计时到零，然后执行回调。这就像一个魅力，不依赖于需要处理多少项目。

```
<html><head><script>
var game = function(images){
   var nbPlayers = 2, winnerValue = -1, winnerPlayer = -1;
   var rollDice = function(player,callbackFinish){
      var playerDice = document.getElementById("dice"+player);
      var facesToShow = Math.floor((Math.random() * 25) + 5);   
      var intervalID = setInterval(function(){
         var face =  Math.floor(Math.random() * 6);
         playerDice.src = images[face].src;
         if (--facesToShow<=0) {
            clearInterval(intervalID);
            if (face>winnerValue){winnerValue=face;winnerPlayer=player}
            if (--nbPlayers<=0) finish();
         }
      }, 50);
   }
   var finish = function(){
      alert("Player "+winnerPlayer+" wins!");
   }      
   setTimeout(function(){rollDice(0)},10);
   setTimeout(function(){rollDice(1)},10);
}
var preloadImages = function(images,callback){
   var preloads = [], imagesToLoad = images.length;
   for (var i=0;i<images.length;++i){
      var img=new Image();
      preloads.push(img);
      img.onload=function(){if(--imagesToLoad<=0)callback(preloads)}
      img.src = images[i];
   }
}
preloadImages(["dice1.png","dice2.png","dice3.png","dice4.png","dice5.png","dice6.png"],game);
</script></head><body>
<img src="" id="dice0" /><img src="" id="dice1" /></body></html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-06T16:48:47.153

要实现这个目标，使用普通的 setInterval 函数是根本不可能的。但是，还有更好的选择：`setIntervalAsync`.

**setIntervalAsync**提供与 setInterval 相同的功能，但它保证该函数在给定的时间间隔内不会执行超过一次。

```
npm i set-interval-async 
```

例子：

```
setIntervalAsync(
  () => {
      console.log('Hello')
      return doSomeWork().then(
        () => console.log('Bye')
      )
  },
  1000
) 
```

# batch-file - cmd编程批处理文件for循环

> ID：11055534
> 
> 赞同：0
> 
> 时间：2012-06-15T17:32:05.430
> 
> 标签：batch-file

我是新手，但我试图制作一个批处理文件，将可执行文件的名称复制到特定位置，创建一个新文件夹，将其命名为 file ，复制该文件夹中的可执行文件并运行它。

我把这一切都解决了，但我有多个 .exe 文件，我想知道如何为该位置的所有文件执行所有这些迭代

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:34:44.797

您可以使用`for`迭代文件：

```
for %%F in (*.exe) do (
  mkdir "C:\Foo\%%~nF"
  copy "%%F" "C:\Foo\%%~nF"
  "C:\Foo\%%F"
) 
```

# c# - 开发有效的条码系统/代码

> ID：11055536
> 
> 赞同：2
> 
> 时间：2012-06-15T17:32:13.230
> 
> 标签：c#, vb.net, barcode

如果标题具有误导性，我很抱歉，但我必须开发条形码的格式（一维或二维，没关系）。条形码需要包含采购订单编号、提单编号以及采购订单上出现的每件商品的行号、产品编号编号和数量。有人对此有任何想法吗？

到目前为止，这是我想出的：

PurchaseOrder # - 提单# | Product1ID Line# 数量 | Product2ID 行# 数量| 产品3...

这个想法的字符串实际上可能看起来像：

VO12340000-APX132 * 65465 1 12 * 897965 2 5 * 98464 3 88 *

这个想法使用“*”作为中断字符来区分项目之间的差异以及每个特定特征所需的长度。对我来说，似乎必须有更好的方法来实现这一点。这个想法很难让我公司的一个供应商实施，因为它非常复杂和精确。任何有关如何实现此目的的见解或想法将不胜感激。

编辑：虽然我使用的是 VB.NET。这更像是一个一般的编程逻辑问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:58:00.600

我们在这里使用 QR 码。在您的应用程序中，您可以使用纯文本格式，然后使用正则表达式处理它们。此外，它们具有冗余和大量免费/开源软件来支持生成和读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:00:21.683

还有其他复杂的条形码，如 HIBC LIC 和 HIBC PAS，使用 Code39 或 Code128 (http://www.hibcc.org/autoidupn/standards.htm) 实现。

重要的是使用能够生成压缩条形码的符号系统，以便普通条形码扫描仪可以读取。因此，您可以使用 Code39 或 Code128（GS1 系列）并将 * 替换为任何内容（AIs/FUNC）。

如果我是你，我会使用 Code93 Extended 符号系统，保留内容规范。

以下代码来自我过去为几乎所有符号系统制作的库，它将为您提供实现 Code93 Extended 所需的内容。它在 C# 中，但很容易将其转换为 VB.NET。请记住，您必须根据需要对其进行修改，并且它只会生成一系列条形而不绘制它们。

```
 private static int[]
            C93Table = { 131112, 111213, 111312, 111411, 121113, 121212, 121311, 111114, 131211, 141111, 211113, 211212, 211311, 221112, 221211, 231111, 112113, 112212, 112311, 122112, 132111, 111123, 111222, 111321, 121122, 131121, 212112, 212211, 211122, 211221, 221121, 222111, 112122, 112221, 122121, 123111, 121131, 311112, 311211, 321111, 112131, 113121, 211131, 121221, 312111, 311121, 122211 };
        static string[]
            C93TableX = { "bU", "aA", "aB", "aC", "aD", "aE", "aF", "aG", "aH", "aI", "aJ", "aK", "aL", "aM", "aN", "aO", "aP", "aQ", "aR", "aS", "aT", "aU", "aV", "aW", "aX", "aY", "aZ", "bA", "bB", "bC", "bD", "bE", " ", "cA", "cB", "cC", "cD", "cE", "cF", "cG", "cH", "cI", "cJ", "cK", "cL", "cM", "cN", "cO", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "cZ", "bF", "bG", "bH", "bI", "bJ", "bV", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "bK", "bL", "bM", "bN", "bO", "bW", "dA", "dB", "dC", "dD", "dE", "dF", "dG", "dH", "dI", "dJ", "dK", "dL", "dM", "dN", "dO", "dP", "dQ", "dR", "dS", "dT", "dU", "dV", "dW", "dX", "dY", "dZ", "bP", "bQ", "bR", "bS", "bT" };
        static string C93Set = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd";

private void Code93X()
        {
            string source = request.Data;
            Error valid = Validate(source, 197, C93Set);
            if (valid != Error.None)
            {
                encoded = new Encoded() { Error = valid };
                return;
            }
            StringBuilder adapt = new StringBuilder();
            for (int i = 0; i < source.Length; i++)
                adapt.Append(C93TableX[(byte)source[i]]);
            Code93(adapt.ToString());
        }

private void Code93(string source)
        {
            StringBuilder bars = new StringBuilder();
            bars.Append(111141);
            int c = 0, k = 0;
            int[] values = new int[source.Length + 1];
            for (int i = 0; i < source.Length; i++)
            {
                values[i] = C93Set.IndexOf(source[i]);
                bars.Append(C93Table[values[i]]);
            }
            if (request.AddChecksum)
            {
                int weight = 1;
                for (int i = source.Length - 1; i >= 0; i--)
                {
                    c += values[i] * weight;
                    if (++weight == 21)
                        weight = 1;
                }
                c %= 47;
                values[source.Length] = c;
                bars.Append(C93Table[c]);
                source += C93Set[c];
                weight = 1;
                for (int i = source.Length - 1; i >= 0; i--)
                {
                    k += values[i] + weight;
                    if (++weight == 16)
                        weight = 1;
                }
                k %= 47;
                bars.Append(C93Table[k]);
                if (request.DisplayChecksum)
                    source += C93Set[k];
            }
            bars.Append(1111411);
            source = string.Concat("*", source, "*");
            encoded = new Encoded(bars.ToString(), source);
        }

        private Error Validate(string source, int maxLength, string set)
        {
            Error valid = Validate(source, maxLength);
            if (valid == Error.None)
                for (var i = 0; i < source.Length; i++)
                    if (set.IndexOf(source[i]) < 0)
                    {
                        valid = Error.InvalidCharacters;
                        break;
                    }
            return valid;
        } 
```

# php - jQuery $_GET 变量

> ID：11055538
> 
> 赞同：0
> 
> 时间：2012-06-15T17:32:30.563
> 
> 标签：php, jquery

我有一个将文件上传到服务器的模式窗口。效果很好。上传完成后，我正在刷新父页面上的 div。几乎可以工作。为了让它工作，我需要的是能够获取 $_GET['edit']。希望我的代码布局将有助于显示我的问题。

模态窗口：上传完成

```
$('#albumFinished').click(function() {
       $('#sortableImages').load('../includes/sortImages.php');
 }); 
```

排序图像.php

```
$galleryID = $_SESSION['newGalleryId'];
$getGalleryID = $_GET['edit']; 

echo "<ul>";

    while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
       $sortImageName = $row['OrgImageName']; 
       $sortPath = "../data/gallery/" . $getGalleryID . "/images/album/" . $sortImageName;
                    echo "<li class='sortPhotos' id='recordsArray_{$row['id']}' >";
                    echo '<img src="'. $sortPath .'"/>';
                    echo "</li>";
                }

    echo "</ul>"; 
```

一切正常，除了我无法获取 $_GET 变量。我该如何去获取这个变量？另外，如果我的解释不清楚，我会尝试进一步澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:36:47.077

对不起，也许我不理解，但您实际上并没有将任何数据发送到排序 images.php 以使用 $_get 您只需执行加载，这与在浏览器中键入该 url 相同

尝试使用 $.post 或 $.get 或 $.ajax 发送您的获取信息，类似于此

```
$.get("../includes/sortImages.php", { edit: "what your editing"},
   function(data){
     return your data here
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:22:49.073

该`load`函数包括一个名为`data`. 这个参数是你必须用来通过`GET`方法将参数传递给服务器的参数。例如：

```
$('#albumFinished').click(function() {
       $('#sortableImages').load('../includes/sortImages.php',
       {newGalleryId: 'specify_an_id', edit: 'some_value'});
}); 
```

第三行将指定的参数和值传递给服务器。你可以在哪里抓住它们

# android - 如何在自定义主题中引用样式

> ID：11055542
> 
> 赞同：15
> 
> 时间：2012-06-15T17:32:56.870
> 
> 标签：android, themes, android-styles

我有一个登录屏幕，它针对我的应用程序的不同版本进行了不同的标记。我需要此屏幕的布局文件中的背景图像不同，因此我想为顶级容器指向不同的样式。我对如何做到这一点有点不知所措。

我已经声明了一个类似的样式：

```
<resources>

    <declare-styleable name="ThemeBase">
       <attr name="loginPageContainerStyle" format="reference" />
    </declare-styleable>

</resources> 
```

我有几个不同的应用程序主题，例如：

```
<resources>

    <style name="ThemeBase" parent="android:style/Theme.Light" />

    <style name="ThemeOne" parent="ThemeBase">
       <item name="loginPageContainerStyle">@style/loginPageContainerThemeOne</item>
    </style>

    <style name="ThemeTwo" parent="ThemeBase">
       <item name="loginPageContainerStyle">@style/loginPageContainerThemeTwo</item>
    </style>

</resources> 
```

我已经定义了以下样式：

```
<resources>
    <style name="loginPageContainerThemeOne">
        <item name="android:background">@drawable/background_theme_one</item>
    </style>

    <style name="loginPageContainerThemeTwo">
        <item name="android:background">@drawable/background_theme_two</item>
    </style>
</resources> 
```

最后是 login.xml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/loginRoot"
    style= [ ? WHAT GOES HERE ? ]
    android:gravity="center_horizontal"
    android:orientation="horizontal">

    [ LAYOUT STUFF ... ]

</LinearLayout> 
```

我做错什么了吗？可以这样做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T17:48:05.280

好的，我想通了，样式参考应该是：

```
style="?attr/loginPageContainerStyle" 
```

想我会分享。

# c# - 访问 XAML 中的文本框绑定到的相同数据

> ID：11055547
> 
> 赞同：0
> 
> 时间：2012-06-15T17:33:23.450
> 
> 标签：c#, wpf, binding, mvvm

ViewModel 中的 WPF MVVM 我想访问 XAML 中的文本框绑定到的相同数据

MainWindow.xaml 上的 XAML 有一个绑定到 StoredProcs/ProcName 的文本框

```
<TextBox Name="txtProcName" Text="{Binding Path=StoredProcs/ProcName}"></TextBox> 
```

和一个绑定到 StoredProcs 的 Grid 每当网格选择发生变化时，文本框中的绑定文本就会发生变化。

```
<DataGrid AutoGenerateColumns="False" 
    Height="300" Width="290"
    HorizontalAlignment="Center" 
    Name="dataGrid1" 
    VerticalAlignment="Top" 
    ItemsSource="{Binding StoredProcs}" 
    IsSynchronizedWithCurrentItem="True" 
    Margin="-6,0" Grid.RowSpan="2" Grid.Row="0">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Proc Name" Binding="{Binding ProcName}" >
        </DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我有一个按钮，单击时在 MainWindowViewModel 中执行一个过程，该按钮有效

```
<Button Content="Create RDL" Command="{Binding CreateStoredProcedure}" /> 
```

在 CreateStoredProcedure 代码中，我需要访问显示在文本框中的相同数据（不使用后面的代码）。我认为我需要获取 StoredProcs/ProcName 但无法弄清楚如何做到这一点。

我尝试将 CommandParameter 添加到 XAML，但不知道如何在 CreateStoredProcedure 指令中访问它，因为它不允许我添加参数

```
void CreateStoredProcedureExecute()
{
    string procName = "proc";
    //procName = { StoredProcs/ProcName };
    MessageBoxResult result = 
        MessageBox.Show(String.Format("Create Stored Procedure {0}", procName));
}

bool CanCreateStoredProcedure()
{
    return true;
}

public ICommand CreateStoredProcedure 
{ 
    get 
    { 
        return new RelayCommand(CreateStoredProcedureExecute, 
            CanCreateStoredProcedure); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:42:39.973

除非我误解了您的问题，否则您应该能够从 CreateStoredProcedure 中获取 TextBox 绑定到的属性的值。

但有一件事，如果您希望 TextBox 更新属性，请确保将“Mode=TwoWay”添加到您的绑定表达式：

```
<TextBox Name="txtProcName" Text="{Binding Path=StoredProcs/ProcName, Mode=TwoWay}"></TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:06:23.210

我认为 KDiTraglia 有正确的解决方案。我唯一会做的不同是将 绑定`CommandParameter`到模型，而不是 UI 元素。

```
<Button 
     Content="Create RDL"
     Command="{Binding CreateStoredProcedure}" 
     CommandParameter="{Binding Path=StoredProcs/ProcName}" /> 
```

我假设这`StoredProcs/ProcName`是一个真实有效绑定路径的占位符。

在这里获取更多信息：http: [//msdn.microsoft.com/en-us/library/ms752308](http://msdn.microsoft.com/en-us/library/ms752308)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:46:06.943

除非我误解了，否则我认为你想要这样的东西？

```
<Button 
  Content="Create RDL" 
  Command="{Binding CreateStoredProcedure}" 
  CommandParameter="{Binding ElementName=txtProcName, Path=Text}"/> 
```

但是，正如其他答案所述，您应该能够仅访问从命令支持文本框的 ViewModel 中的属性，但是如果由于某种原因您不能，我的代码也应该可以正常工作。

（假设您正在定义[此](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)MSDN 文章定义的 RelayCommand，这应该可以解决您的其他问题）

```
public ICommand CreateStoredProcedure 
{ 
    get 
    { 
        return new RelayCommand<object>(
            (object parameter) => CreateStoredProcedureExecute(parameter), 
            (object parameter) => CanCreateStoredProcedure); 
    } 
}

private void CreateStoredProcedureExecute(object parameter)
{
    string ProcName = parameter as string;
} 
```

我承认我在设置这样的命令方面有点缺乏经验，但我确实在我的代码中找到了一个工作示例，因此希望它有所帮助。

# javascript - jQuery UI在外部调用revert方法

> ID：11055548
> 
> 赞同：0
> 
> 时间：2012-06-15T17:33:30.657
> 
> 标签：javascript, jquery-ui

我有一个像这样设置的可拖动事件：

```
$(ids.label).draggable({
    containment: ids.wrapper,
    revertDuration: 100,
    revert: function(event) {
        $(this).data("draggable").originalPosition = {
            top:  $(this).data('origionalTop'),
            left: $(this).data('origionalLeft'),
        }
        return !event;
    },
    ... 
```

现在，我希望能够在另一个函数中从外部调用还原函数。如何才能做到这一点？这是我正在尝试做的事情（目前不起作用）：

```
$(ids.label).each(function() {
    for(var iter = 0; iter < wrong.length; ++ iter) {
        if($(this).html() == wrong[iter]) {
            // Something along these lines.
            $(this).draggable.revert(); // This is the line in question
        }
    }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:23:43.790

我不完全确定您为什么需要从外部调用它。但这可能会有所帮助：

代替：

```
$(this).draggable.revert(); // This is the line in question 
```

尝试：

```
$(this).draggable('option','revert')(); 
```

# php - Google 地理编码响应问题 - 仅在 PHP 脚本中返回 620 错 误

> ID：11055550
> 
> 赞同：1
> 
> 时间：2012-06-15T17:33:40.817
> 
> 标签：php, xml

我正在尝试设置一个使用 Google 地理编码服务的脚本。但是，我在发出请求时遇到了一个奇怪的问题。这是我的简化请求：

```
<?php
$xml = simplexml_load_file("http://maps.google.com/maps/geo?output=xml&key=MY_API_KEY&q=1600+Pennsylvania+Avenue+Northwest+Washington+DC+20500");
print_r($xml);
?> 
```

这是该代码的输出：

> SimpleXMLElement 对象（[响应] => SimpleXMLElement 对象（[状态] => SimpleXMLElement 对象（[代码] => 620 [请求] => 地理编码）））

它返回错误代码 620，这意味着我发出请求太快了。但是，我只提出一个请求，我什至还没有接近我的请求限制。更奇怪的是，当我直接访问 URL 时，它返回 XML 响应完全没有任何问题。就像某处的某种防火墙/权限设置阻止了我的 PHP 脚本的正确响应。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:27:17.260

仅供参考，我的最终解决方案是使用 Javascript 重写脚本并在客户端而不是服务器端做所有事情。我仍然不太确定我从我的 php 脚本发出的请求出了什么问题，但至少我完成了我需要的。感谢所有的建议！

# iphone - 使用 ASIHTTPRequest 在 requestDidReceiveResponseHeadersSelector: 方法中设置下载目标文件路径时下载数据错误

> ID：11055556
> 
> 赞同：0
> 
> 时间：2012-06-15T17:33:53.520
> 
> 标签：iphone, asihttprequest, filenames, content-disposition

当我在创建请求后立即设置下载目标文件路径时，我使用 ASIHTTPRequest 将文件下载到 ios 设备，它运行良好，我的代码是：A

```
SIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDownloadDestinationPath:@"/Users/zxllf23/Desktop/download/tmp.zip"]];
    [request setTemporaryFileDownloadPath:@"/Users/zxllf23/Desktop/download/tmp.zip.download"]]; 
```

但这不舒服，服务器上的 bcs 不同文件有不同的文件名，我们可以从 http 响应头的 Content-Disposition 中检索，所以我想自动确定文件名，我在 requestDidReceiveResponseHeadersSelector: 方法中编写了我的代码

```
-(void) downloadReceiveRespone:(ASIHTTPRequest *)request
{
    NSString *CoententDecription = [[request responseHeaders] objectForKey:@"Content-Disposition"];
    NSString *filename = [self getFilenameFrom:CoententDecription];

    [request setDownloadDestinationPath:[NSString stringWithFormat:@"/Users/zxllf23/Desktop/download/%@",filename]];
    [request setTemporaryFileDownloadPath:[NSString stringWithFormat:@"/Users/zxllf23/Desktop/download/%@.download",filename]];

} 
```

我在哪里可以成功下载文件，但无法正确打开，我将下载的文件数据与原始文件进行了比较，它们不一样

任何机构都可以在这个问题上帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:10:28.317

不支持在请求开始后设置 setDownloadDestinationPath，这可以解释为什么它不能正常工作。

请求完成后移动文件，或者自己将数据写入文件。

# javascript - 当应该只有一个时，正在创建多个 jQuery 对话框

> ID：11055559
> 
> 赞同：0
> 
> 时间：2012-06-15T17:33:57.353
> 
> 标签：javascript, jquery, jquery-ui, dom-manipulation

在我的网页上，我正在使用 jQuery.get 异步加载一个编辑表单并将其显示在 jQuery 对话框中。出于某种原因，我正在应用 .dialog 的 div 的多个实例被附加到 document.body 中。这是我的加载代码：

```
function openEditProjectDialog(event) {
    var projectNameToEdit = $(event.currentTarget).closest('.project-item').find('.project-name').text();
    var url = $("#EditProjectActionUrl").val();
    var dataString = 'name=' + projectNameToEdit + '&__RequestVerificationToken=' + encodeURIComponent($("input[name=__RequestVerificationToken]").val());

    $.get(url, dataString)
            .done(function (content) {
                $('.modal-popup').remove();
                var popupDiv = $('<div class="modal-popup"><div id="edit-project-block">' + content + '</div></div>').hide();
                var whatWeDialogOn = popupDiv.appendTo(document.body);
                whatWeDialogOn.dialog({
                    title: 'Editing project <b>' + projectNameToEdit + '</b>',
                    modal: true,
                    resizable: false,
                    draggable: true,
                    width: 725,
                    close: function(event, ui) {
                        $(this).dialog('destroy').remove();
                        $('.modal-popup').remove();
                    }
                });
                $("#edit-project-block #bottomAreaHtml").attr("id", "bottomAreaHtmlToEdit");
                CKEDITOR.replace('bottomAreaHtmlToEdit');
                $('.chzn-select').chosen();
                $("#edit-project-block #submit-project").on("click", submitUpdatedProject);

            });
}

$('#projects').on("click", '.edit-project', openEditProjectDialog); 
```

在此刻：

```
.done(function (content) {
    $('.modal-popup').remove(); 
```

有两个`<div class="modal-popup" style="display:none">`已经附加到文档中。在 .remove 调用之后，还剩下一个。（我知道应该没有 =） 调用 .dialog 后，有 6 或 7 个 modal-popup div 和 jQuery UI div 中唯一实际显示的一个。

如果我所描述的听起来很荒谬——请告诉我。问题的根源可能是什么？

PS`var popupDiv = $('<div class="modal-popup">...`是将具有此类名称的 div 添加到 DOM 的唯一位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:27:12.153

尝试构造函数以考虑[变量声明提升](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/)并在添加之前进行删除（如下所示）：

```
function openEditProjectDialog(event) {
    var projectNameToEdit = $(event.currentTarget).closest('.project-item').find('.project-name').text();
    var url = $("#EditProjectActionUrl").val();
    var dataString = 'name=' + projectNameToEdit + '&__RequestVerificationToken=' + encodeURIComponent($("input[name=__RequestVerificationToken]").val());
    $.get(url, dataString).done(function (content) {
        var div = $('<div />'),
            editDiv = null,
            popupDiv = null,
            whatWeDialogOn = null;
        //Create the Editing div
        editDiv = div.clone().attr('id', 'edit-project-block').html(content);
        editDiv.find('#bottomAreaHtml').attr("id", "bottomAreaHtmlToEdit");
        editDiv.find('#submit-project').on("click", submitUpdatedProject);
        //Create the containing div
        popupDiv = div.clone().addClass('modal-popup').append(editDiv).hide();
        //Create the dialog
        whatWeDialogOn = popupDiv.dialog({
            "title": "Editing project <b>" + projectNameToEdit + "</b>",
            "modal": true,
            "resizable": false,
            "draggable": true,
            "width": 725,
            "close": function (event, ui) {
                //$(this).dialog('destroy').remove();
                $('.modal-popup').dialog('destroy').remove();
            }
        });
        //No need since none is there if everything closes right from before
        //$('.modal-popup').dialog('destroy').remove();
        //.dialog call does appending from within constructor. No need to append anything
        //$('body').append(whatWeDialogOn); 

        CKEDITOR.replace('bottomAreaHtmlToEdit');
        $('.chzn-select').chosen();
    });
}
$('#projects').on("click", '.edit-project', openEditProjectDialog); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:38:31.147

试试这个：

```
.done(function (content) {
    $('.modal-popup').each(function(){
        $(this).remove();
    }); 
```

# css - 使用 jQuery 声明 CSS3 渐变

> ID：11055560
> 
> 赞同：1
> 
> 时间：2012-06-15T17:34:06.653
> 
> 标签：css, gradient

我正在向按钮添加 css3 渐变。我认为 jQuery 将我所有的跨浏览器“背景图像”声明组合为一个声明（它找到的最后一个“背景图像”）。有没有更好的方法来编写 jQuery，以便它像往常一样向浏览器呈现所有跨浏览器 css？

这是我的 jQuery：

```
 $('.button').css({
        'background-color' : FromGradientColor ,
        'background-image' : '-webkit-gradient(linear, 0% 0%, 0% 100%, from('+ FromGradientColor +'), to('+ ToGradientColor +'))' ,
        'background-image' : '-webkit-linear-gradient(top,' + FromGradientColor +', ' + ToGradientColor +')' ,
        'background-image' : '-moz-linear-gradient(top,' + FromGradientColor +', ' + ToGradientColor +')' ,
        'background-image' : '-ms-linear-gradient(top,' + FromGradientColor +', ' + ToGradientColor +')' ,
        'background-image' : '-o-linear-gradient(top,' + FromGradientColor +', ' + ToGradientColor +')' 
    }); 
```

这就是我希望 jQuery 呈现给浏览器的内容（由我在 jQuery 中的变量确定的颜色除外）：

```
background-color: #ddd;
background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#eee), to(#ccc));
background-image: -webkit-linear-gradient(top, #eee, #ccc);
background-image: -moz-linear-gradient(top, #eee, #ccc);
background-image: -ms-linear-gradient(top, #eee, #ccc);
background-image: -o-linear-gradient(top, #eee, #ccc);
background-image: linear-gradient(top, #eee, #ccc);
text-shadow: 0 1px 0 rgba(255,255,255,.8); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:11:36.837

将样式放入一个类中，例如这个[较少的](http://lesscss.org/)示例：

```
@bgcolor: #ddd;

.gradient(@from: #eee, @to: #ccc) 
  {
  background-color: @bgcolor; 
  background-image: -webkit-linear-gradient(top, @from, @to); 
  background-image: -moz-linear-gradient(top, @from, @to); 
  background-image: -ms-linear-gradient(top, @from, @to); 
  background-image: -o-linear-gradient(top, @from, @to); 
  filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=@{from}, endColorstr=@{to})"; 
  -ms-filter: "'progid:DXImageTransform.Microsoft.gradient (GradientType=0, startColorstr=@{from}, endColorstr=@{to})'"; 
  } 
```

然后像这样引用它：

```
$('.button').addClass("gradient") 
```

# ios5 - TWTweetComposeViewController 崩溃 ios5

> ID：11055561
> 
> 赞同：1
> 
> 时间：2012-06-15T17:34:06.657
> 
> 标签：ios5, twitter, crash

在 iOS 上，“协议”是

```
 id foo = [[SomeClass alloc] init]
        [foo release] 
```

应该创建一个 retainCount 为 1 的对象“foo”，以便发布将释放它。

下面在 iOS5 上的代码将产生 3 的 retainCount。

```
TWTweetComposeViewController *twController = [[TWTweetComposeViewController alloc] init];
log_trace(@"twController (after construction) retain count %d", [twController   retainCount]); 
```

问题是在向应用程序发出内存警告期间将崩溃

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: 'Cannot remove an observer <TWTweetComposeViewController 0x82a3980> for the key path "contentSize" from <UITextView 0x13f2e760> because it is not registered as an observer.' 
```

我已经检查了 iOS6 beta 1 版本，并且此行为已修复（崩溃也是如此）。

这就引出了一个问题：有没有办法在 iOS5.1 中以某种方式绕过这个问题？

# ruby-on-rails - factorygirl 序列无法正常工作

> ID：11055563
> 
> 赞同：0
> 
> 时间：2012-06-15T17:34:16.500
> 
> 标签：ruby-on-rails, ruby, factory-bot

我有这个工厂：

```
FactoryGirl.define do
  factory :from_sector, class: Sector do
    sequence(:name) { |n| name "gti#{n}" }                                                                                                                                   
  end
end 
```

但是当我这样做时：

```
from = FactoryGirl.create(:from_sector)
from.name  #=>  <Sector id: 9, name: #<FactoryGirl::Declaration::Static:0x00000002d13650 @name=:name, @ignored=false, @value="gti1">, created_at: "2012-06-15 17:24:05", updated_at: "2012-06-15 17:24:05"> 
```

“from.name”不应该返回“gti1”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:39:41.037

正确的语法是：

```
FactoryGirl.define do
  factory :from_sector, class: Sector do
    sequence(:name) { |n| "gti#{n}" }                                                                                                                                   
  end
end 
```

在中线调用*名称方法会使 FactoryGirl 窒息，因此输出看起来很有趣。*

# python - 连接 2 个字段

> ID：11055566
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:34:33.143
> 
> 标签：python, openerp

这是我的功能

```
def get_concat(self, cr, uid, ids, field_name, arg, context):
  x = {}
  for record in self.browse(cr, uid, ids ,context):
       x[record.id] = record.a+"--"+ record.b
  return x 
```

字段的定义

```
 'a' : fields.integer('A'),
   'b' : fields.integer('B'),
   'concat' : fields.function(get_concat, method=True, string='Inventaires',type='char', size=40), 
```

我的树视图不显示任何记录。当我评论功能字段时，一切都很好。这就是我知道我的功能不正确的方式，你能告诉我我在这个功能中犯了什么错误！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:36:06.247

因为字段 a 和字段 b 都是整数。在没有类型转换的情况下，python 中不可能进行 int 和 str 连接。

所以要么你错误地定义了 a,b 的数据类型（使用 char 作为数据类型），要么使用

$ x[record.id] = str(record.a or '') + "--" + str(record.b or '')

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:40:35.130

如果您告诉追溯信息，我可以帮助您。

但顺便说一句，如果你想以安全的方式连接并避免意外回溯，我会在 python 中更改你的行。

x[record.id] = record.a+"--"+record.b

经过

x[record.id] = "%s--%s" % (str(record.a), str(record.b))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T04:41:58.683

在第一个站点，您的功能看起来不错。

但是如果 record.a 或 reocrd.b 值为“False”，则会发生错误

**它将尝试将 False 连接到字符串。**

所以在这种情况下，你必须先检查条件，然后再连接变量。

# json - MVC 4 (RC) Web Api OData 没有正确排序

> ID：11055567
> 
> 赞同：2
> 
> 时间：2012-06-15T17:34:39.167
> 
> 标签：json, jquery, asp.net-mvc-4, odata, asp.net-web-api

最近更新到MVC4的RC。它解决了很多问题，尤其是在日期序列化方面。但是，我遇到了另一个问题。我用于分页/排序等的 OData 排序和选项现在不起作用。我没有更改代码中的任何内容，并且在发行说明中找不到任何提及功能更改的内容。我的代码在下面，知道我做错了什么吗？

注意：我正在使用[AttributeRouting 扩展](https://github.com/mccalltd/AttributeRouting)，不确定这是否导致问题。

* * *

**Web API 类/方法**

```
[RouteArea("v1")]
[RoutePrefix("locations")]
public class LocationsController : ApiController
{
    // Data Repository
    static readonly IRepository<Location> Repo = new LocationRepository();

    #region CRUD

    [GET("")]
    public IQueryable<Location> Get()
    {
        return Repo.All;
    }
} 
```

* * *

**jQuery 客户端调用**

```
$.ajax({
        url: '/v1/locations?$orderby=Name asc',
        success: function (data) {
            resultFunction(data);
        }
}); 
```

* * *

**JSON 响应**

```
[
    {
        "LocationId":"aca3e1fe-8192-4bb8-b233-1d6fe6b69ba4",
        "Name":"Triangle North"
    },
    {
        "LocationId":"0c99a267-2093-401a-9466-70788500630b",
        "Name":"Triangle West"
    },
    {
        "LocationId":"168e3755-b61e-41d6-99f3-941d738ab321",
        "Name":"Triangle East"
    },
    {
        "LocationId":"82e7a547-a4eb-4233-bdb4-cd8c5b369af8",
        "Name":"Triangle South",
    }
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T17:34:39.523

结果在此 MSFT 上搜索的过程中，决定要求指定一个显式属性，以便 OData 内容自动流动：

> （...）您必须在方法（ [docs](http://www.asp.net/web-api/overview/web-api-routing-and-actions/paging-and-querying)）上放置一个`[Queryable]`属性。
> 
> ```
> [Queryable]
> public IQueryable<Product> GetAllProducts()
> {
>     return repository.GetAll().AsQueryable();
> } 
> ```

[http://forums.asp.net/t/1809900.aspx/1?Web+API+OData+in+RC](http://forums.asp.net/t/1809900.aspx/1?Web+API+OData+in+RC)

嗬！

# gcc - 与具有依赖关系的动态库链接

> ID：11055569
> 
> 赞同：83
> 
> 时间：2012-06-15T17:34:41.493
> 
> 标签：gcc, dll, dependencies, g++

考虑以下场景：

*   共享库 libA.so ，没有依赖关系。
*   共享库 libB.so，以 libA.so 作为其依赖项。

我想编译一个与 libB 链接的二进制文件。我应该将二进制文件仅与 libB 链接还是与 libA 链接？

有没有办法只链接直接依赖项，让运行时依赖项中未解析的符号解析？

我担心库 libB 的实现将来可能会发生变化，引入其他依赖项（例如 libC、libD、libE）。我会有问题吗？

换句话说：

*   libA 文件：a.cpp 啊
*   libB 文件：b.cpp bh
*   主程序文件：main.cpp

当然，b.cpp 包含 ah，main.cpp 包含 bh

编译命令：

```
g++ -fPIC a.cpp -c
g++ -shared -o libA.so a.o

g++ -fPIC b.cpp -c -I.
g++ -shared -o libB.so b.o -L. -lA 
```

我应该使用以下哪个选项？

```
g++ main.cpp -o main -I. -L. -lB 
```

或者

```
g++ main.cpp -o main -I. -L. -lB -lA 
```

我无法使用第一个选项。链接器抱怨库 libA 中未解析的符号。但这对我来说听起来有点奇怪。

非常感谢。

**-- 更新评论：**

当我链接二进制文件时，链接器将尝试解析 main 和 libB 中的所有符号。但是，libB 具有来自 libA 的未定义符号。这就是链接器抱怨的原因。

这就是为什么我也需要与 libA 链接。但是我找到了一种方法来忽略共享库中未解析的符号。看起来我应该使用以下命令行来做到这一点：

```
g++ main.cpp -o main -I. -L. -lB -Wl,-unresolved-symbols=ignore-in-shared-libs 
```

看起来仍然可以使用该`-rpath`选项。但是我需要更好地理解它。

有谁知道使用该`-Wl,-unresolved-symbols=ignore-in-shared-libs`选项时可能存在的任何陷阱？

**-- 更新评论 2：**

`-rpath`不应用于此目的。强制在给定目录中找到库很有用。这种`-unresolved-symbol`方法看起来好多了。

再次感谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-05-31T01:58:15.120

看起来你已经大部分时间了。你的调查做得很好。让我们看看我是否可以帮助弄清楚它背后的“原因”。

这是链接器正在做的事情。当你链接你的可执行文件（上面的'main'）时，它有一些未解析的符号（函数和其他东西）。它将查看后面的库列表，尝试解析未解析的符号。一路上，它发现一些符号是由 libB.so 提供的，所以它注意到它们现在由这个库解析。

但是，它还发现其中一些符号使用了您的可执行文件中尚未解析的其他符号，因此它现在也需要解析这些符号。如果不链接 libA.so，您的应用程序将是不完整的。一旦它与 libA.so 链接，所有符号都被解析并且链接完成。

如您所见，使用`-unresolved-symbols-in-shared-libs`, 并不能解决问题。它只是推迟它，以便在运行时解析这些符号。这就是`-rpath`目的：指定要在运行时搜索的库。如果这些符号无法解析，您的应用将无法启动。

找出库依赖关系并不是一件容易的事，因为一个符号可以由多个库提供，并且可以通过链接其中任何一个来满足。

这里对这个过程还有另一种描述：[为什么链接库的顺序有时会导致 GCC 出错？](https://stackoverflow.com/questions/45135/linker-order-gcc)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-03-23T11:10:45.933

对于仅具有直接依赖项的动态链接，您可以**在****`-Wl,--as-needed`**以下位置添加库： **`-Wl,--as-needed`**

 **```
gcc main.c -o main -I. -L. -Wl,--as-needed -lB -lA 
```

要检查直接依赖关系，您应该使用**readelf**而不是**ldd**因为 ldd 也显示间接依赖关系。

```
$ readelf -d main | grep library
0x0000000000000001 (NEEDED)             Shared library: [libB.so]
0x0000000000000001 (NEEDED)             Shared library: [libc.so.6] 
```

ldd 还显示了间接依赖关系：

```
$ LD_LIBRARY_PATH=. ldd ./main
linux-vdso.so.1 (0x00007fff13717000)
libB.so => ./libB.so (0x00007fb6738ed000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fb6734ea000)
libA.so => ./libA.so (0x00007fb6732e8000)
/lib64/ld-linux-x86-64.so.2 (0x00007fb673af0000) 
```

如果您使用**cmake**，您可以添加以下行以仅包含直接依赖项：

```
set(CMAKE_EXE_LINKER_FLAGS    "-Wl,--as-needed ${CMAKE_EXE_LINKER_FLAGS}")
set(CMAKE_SHARED_LINKER_FLAGS "-Wl,--as-needed ${CMAKE_SHARED_LINKER_FLAGS}") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-14T14:36:02.393

另一种选择是使用[`libtool`](https://www.gnu.org/software/libtool/manual/html_node/index.html#Top)

如果您将`g++`调用更改`libtool --mode=compile g++`为编译源代码然后`libtool --mode=link g++`创建应用程序关闭`libB`，则将`libA`自动链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-15T17:23:20.277

这是一篇有趣的帖子-我也对此感到震惊，但我认为您在这里错过了一点..

思路如下，对吧？

```
main.cpp =(depends)=> libB.so =(depends)=> libA.so 
```

让我们进一步考虑..

*   在 a.cpp （并且只有在那里）中，您定义了一个类/变量，我们称它为“symA”
*   在 b.cpp（并且只有在那里）中，您定义了一个类/变量，我们称它为“symB”。
*   symB 使用 symA
*   main.cpp 使用 symB

现在，libB.so 和 libA.so 已按照您的描述编译。之后，您的第一个选项*应该可以*工作，即：

```
g++ main.cpp -o main -I. -L. -lB 
```

我想你的问题源于这样一个事实

**在 main.cpp 你也指 symA**

我对么？

如果您在代码中使用符号，则必须在 .so 文件中找到该符号

相互引用共享库（即创建 API）的整个想法是隐藏更深层中的符号（想想剥洋葱）并且不使用。.. 即不要在您的 main.cpp 中引用 symA，而只引用 symB（并让 symB 仅引用 symA）。**

# javascript - 弄清楚网页是否是窗口中唯一的选项卡？

> ID：11055570
> 
> 赞同：0
> 
> 时间：2012-06-15T17:34:42.177
> 
> 标签：javascript, html, browser

有没有办法确定您的网页正在运行的选项卡是否是窗口中唯一的选项卡？我现在在谷歌上找了大约 20 分钟，找不到任何类似的东西。我宁愿在没有任何附加组件/插件/等的情况下这样做。但是如果我必须使用插件，我唯一可以使用的是Java。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T17:35:32.477

在任何浏览器中，绝对没有办法做到这一点。哪些其他选项卡是否打开不在您的网页的控制范围内。

# sencha-touch-2 - Sencha touch 2 - 如何覆盖自定义组件的嵌套列表点击事件

> ID：11055574
> 
> 赞同：0
> 
> 时间：2012-06-15T17:34:52.117
> 
> 标签：sencha-touch-2, sencha-architect

我正在使用 getItemTextTpl 将复选框组件添加到嵌套列表中 - 我还希望能够覆盖默认的点击事件，以便在选中复选框时显示弹出消息并且列表不会前进到下一个项目。请参阅下面的配置 - 我能够捕获复选框检查事件，但不知道如何覆盖嵌套列表的默认行为。感谢您的帮助，如果我能澄清任何细节，请告诉我 - 如果有帮助，我正在使用 sencha 建筑师

嵌套列表配置：

```
getItemTextTpl: function(recordnode) {
        return '<table width="100%"><row>' + 
        '<tr><td width="100%" align="left" width="100%" valign="bottom"><div class="view"><input type="checkbox" <tpl  if="done">checked</tpl> />&nbsp;&nbsp;{name}</td></row></table>'; 

    } 
```

控制器：

```
onNestedlistInitialize: function(component, options) {
// setup taskList to listen on the tap on the checkbox and show a popup window 
component.element.on({
    tap: function(e, el) {
        console.log('checkbox tapped'); 
        //need to override nestedlist tap event and show popup message
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:58:37.850

为了防止列表切换到下一张卡片，您需要像这样覆盖 activeitemchange：

```
var nestedList = Ext.create('Ext.NestedList', {
  ...
  listeners:{
    activeitemchange:function(){
      if(...){ // Check if you checkbox is checked or not
         return false; // return false prevent the nestedlist from switching to the next view
      }
    }
  }
}); 
```

# android - 在对话框中更改新的文本视图

> ID：11055581
> 
> 赞同：-2
> 
> 时间：2012-06-15T17:35:35.410
> 
> 标签：android, dialog, android-linearlayout

我在对话框内构建了一个线性布局，这里的问题是我想更改此布局的 TextView 但我不知道如何！,,有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:39:34.417

与普通视图相同的方式。

```
TextView text = (TextView) dialog.findViewById(R.id.TextView01);
text.setText("Hello"); 
```

# java - 如何在 grails 2.0.3 中对服务进行单元测试？

> ID：11055587
> 
> 赞同：1
> 
> 时间：2012-06-15T17:35:59.133
> 
> 标签：java, grails, groovy, junit, junit4

我在 grails 2.0.3 中为服务创建了一个单元测试，我想在 eclipse 中使用 junit runner 运行这个测试。当我右键单击 test-class => debug as => junit test 我在控制台中收到以下错误消息：

```
Class not found myProject.ReportServiceTests
java.lang.ClassNotFoundException: myProject.ReportServiceTests
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我在 test/unit/myProject 中的 ReportServiceTest.groovy：

```
package myProject

import grails.test.mixin.*
import grails.test.mixin.support.*
import org.junit.*

/**
* See the API for {@link grails.test.mixin.support.GrailsUnitTestMixin} for usage     instructions
*/

@TestFor(myProject.ReportService)
@Mock(Sale)
class ReportServiceTests {

void setUp() {
    // Setup logic here
}

void tearDown() {
    // Tear down logic here
}

void testSomething() {
    fail "Implement me"
}

void testGetSalesCompleted() {
    def salesCompleted = service.getSalesCompleted()
    if(salesCompleted.count > 0) {
        assertTrue()
    }
    fail "no sales completed"
}
} 
```

错误在哪里？预生成的 *ControllerTests.groovy 在 Eclipse 中与 junit runner 一起工作正常！我正在使用 STS：SpringSource 工具套件

版本：2.9.2.RELEASE 构建 ID：201205071000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T20:37:13.407

使用 Eclipse junit runner 启用 Grails 单元测试的提示：只需将 @Test 注释添加到其中一个测试；

=> 运行器识别该类具有一组测试就足够了，@TestFor 魔术将完成其余的工作：动态地，所有方法“成为”eclipse junit 运行器的测试。

# delphi - 如何制作 TMS 的 DBAdvGrid 选项卡并像标准的 Delphi DBGrid 一样插入？

> ID：11055588
> 
> 赞同：1
> 
> 时间：2012-06-15T17:36:12.810
> 
> 标签：delphi, dbgrid

TMS Software 的 DBAdvGrid 是一个支持 DB 的 StringGrid。它功能丰富，我喜欢它，但有时它的功能*太*丰富了！我要更改哪些属性（从它们的默认值），以便当我在网格末尾使用 Tab 时插入和发布新记录，即类似于标准 DBGrid 的默认行为？

谢谢，一如既往！

# sql-server - SQL Server 实例相关问题

> ID：11055589
> 
> 赞同：0
> 
> 时间：2012-06-15T17:36:25.097
> 
> 标签：sql-server

嗨，我正在使用运行良好的 SQL Server 2008。今天，当我打开 SSMS 并尝试使用 Windows 身份验证连接服务器时，它给出了

## 标题：连接到服务器

无法连接到 mrdeveloper。

* * *

附加信息：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：2）

SQL Server 安装在 2 天前工作的同一台 PC 上，但现在......但是当连接到它连接的 express eddition 时......请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:39:56.467

检查 MSSQLSERVER 服务是否正在运行，如果没有，则启动它。

单击开始 > 运行 > 键入 services.msc > 按 Enter

# c# - 仅参数路由始终被触发 MVC3

> ID：11055590
> 
> 赞同：3
> 
> 时间：2012-06-15T17:36:41.290
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有两条非常简单的路线

```
 routes.MapRoute(
            "post", // Route name
            postPage + "/{slug}", // URL with parameters
            new { controller = "Home", action = "Article" } // Parameter defaults
        );

        routes.MapRoute(
            "page", // Route name
            "{slug}", // URL with parameters
            new { controller = "Home", action = "Page", slug = homePage} // Parameter defaults
        ); 
```

这是我的控制器逻辑

```
 public ActionResult Article(string slug)
    {
        return View(repo.GetPost(slug));
    }

    public ActionResult Page(string slug)
    {
        if (slug.ToLower() == MetaData.PostsPage.ToLower())
            return View("listPosts", repo.GetAllPosts());
        else
            return View("page", repo.GetPage(slug));
    } 
```

homePage 和 postPage 是从数据库中的值设置的。允许用户定义默认页面以及显示帖子的页面。

添加名为“Admin”的区域时出现我的问题。我将控制器添加到我的 RouteTable

```
 context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        ); 
```

现在，当用户访问 Admin/Account/Logon 时，页面加载正常，但我的调试器仍然尝试进入 Home 控制器和 Page 操作。但是 RouteDebugger 说它与当前请求不匹配。我很困惑如何解决这个问题。

RouteDebugger 截图： http: [//i.stack.imgur.com/7cpHm.png](http://i.stack.imgur.com/7cpHm.png) 调试器进入我的 HomeControler 页面 AtionResult：http: [//i.stack.imgur.com/uSJBK.png](http://i.stack.imgur.com/uSJBK.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:04:25.363

我发现了这个问题。

我在网站的主要区域设置了 favicon.ico，但没有在管理区域设置。因此，当我进入管理区域时，浏览器向 favicon.ico 发出了请求，该请求被该路由获取。这就是为什么我的路线在 RouteDebugger 中看起来不错的原因，因为它们确实如此。

感谢昆丹的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:54:34.283

实际上问题是，区域路由覆盖了全局路由，为了区分这两个路由，在 adminAreaRegistraton.cs 文件中的 context.MapRoute 方法中设置区域控制器的相关命名空间。IE

```
context.MapRoute(
 "admin_default",
 "admin/{controller}/{action}/{id}",
 new { controller = "Home", action = "Index", id = UrlParameter.Optional },
 null,
 new string[] { "MVCApplication1.Areas.admin.Controllers" }
); 
```

# c# - Workbooks.Open 找不到文件，但路径正确

> ID：11055599
> 
> 赞同：0
> 
> 时间：2012-06-15T17:37:00.813
> 
> 标签：c#, excel, comexception

我正在为 Autodesk Inventor 构建一个 C# 插件。这是相关的唯一原因是因为我必须取消选中“注册 COM 互操作”框。

这是我正在使用的。xls 始终位于代码运行所在的同一目录中。我也尝试过使用绝对路径，但我得到了同样的错误。bool 仅用于测试，但它返回 true。该文件不是只读的。

```
bool fileExists = File.Exists ("Assembly3.xls");
xlBook = xlApp.Workbooks.Open ("Assembly3.xls"); 
```

我收到的错误消息：[https](https://dl.dropbox.com/u/46698764/cantFindFile.png) ://dl.dropbox.com/u/46698764/cantFindFile.png 因为它说 COMException，我想我的问题可能是因为我未选中“注册 COM 互操作”框。如果是这种情况，有人可以推荐另一种打开工作簿的方法吗？

如果重要的话，我有 Excel 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:44:30.667

尝试指定完整路径。Excel 可能正在使用不同的启动目录打开，并且它可能正在该目录中查找 XLS 文件。由于您是作为插件托管的，因此您可能需要使用不同的方式来获取路径。有几个地方可以开始：

[应用程序.启动路径](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)

[获取当前目录](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)

# git - 并非所有文件都添加到 Git 存储库

> ID：11055601
> 
> 赞同：1
> 
> 时间：2012-06-15T17:37:02.820
> 
> 标签：git, repository

我用标准命令创建了 repo

```
git init
git add .
git remote add origin ssh://trololo.lo/~/git_rep.git
git commit -a -m "trololo"
git push origin master 
```

之后，我在另一台机器上创建了空仓库，拉取了原点。有些文件丢失了，知道为什么以及我应该做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:49:26.267

在你执行之前`commit`，运行`git status`并确保你正在提交你认为你正在提交的内容。如果您可以在提交`git status` *后*运行并获得除消息以外的任何内容`working directory clean`，那么您`add`在提交之前忘记了一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:41:25.390

```
git add -A
git commit -m "message here"
git push origin master 
```

# java - deployjava.js中code属性的功能

> ID：11055603
> 
> 赞同：0
> 
> 时间：2012-06-15T17:37:45.517
> 
> 标签：java, javascript, applet, deployjava

我想知道与 deployjava 一起使用的“代码”属性的特定语法。

`code: applet.class`很明显，该调用指向该名称的文件，可能与进行调用的文件位于同一目录中。

不过，有时我会看到类似`code: com.domain.applet`. 那指的是什么，该文件相对于进行该调用的脚本位于文件结构中的什么位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:14:44.813

> `code: applet.class`很明显，该调用指向该名称的文件，可能与进行调用的文件位于同一目录中。

显而易见的情况并不一定如此。

*   该类可能来自 jar，并且不会是目录中的松散类文件。
*   `codebase`确定搜索类或 jar 的路径。**未指定时默认**为当前目录。

最后，请注意 class 属性应该是“完全限定的类名” ¹，并且通用命名法会将其命名为`EachWordUpperCase`- 类似于`GraphApplet`.

> 不过，有时我会看到类似`code: com.domain.applet`. 那指的是什么，该文件相对于进行该调用的脚本位于文件结构中的什么位置？

好的，让我们再次假设调用了小程序`com.domain.GraphApplet`- 这是`GraphApplet`类的完全限定名称，在`package com.domain;`.

如果那是一个松散的类文件，它需要在一个像`${codebase}/com/domain/`. 或者，它需要位于`/com/domain/`罐子内的路径中。

1.  关于 FQN 的最后说明。程序员通常会添加`.class`例如`com.domain.GraphApplet.class`. 虽然可以容忍，但这是**不**正确的。它应该只是`com.domain.GraphApplet`

# linux - 在 Linux 中剪切 GREP 命令

> ID：11055604
> 
> 赞同：0
> 
> 时间：2012-06-15T17:37:51.320
> 
> 标签：linux, shell, unix, scripting, grep

好的，所以我有一个名为 search 的变量，其中包含字符串“Find this Code - Now”。我想搜索该代码，如果找到它，系统将在这些行上回复 true 或其他内容，如果没有，则它只是退出脚本并出错。

我尝试使用 grep 但我不知道如何仅剪切搜索的内容，以便我可以运行 if else 语句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:42:24.723

您可以使用`-q`开关并检查 grep 的退出状态，即类似`grep -q $var <file> && echo "true"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:40:25.547

> 我尝试使用 grep 但我不知道如何仅剪切搜索的内容，以便我可以运行 if else 语句

Grep 有一个开关`--only-matching`

```
 -o, --only-matching       show only the part of a line matching PATTERN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:47:40.920

```
> X="not gonna find it"
> grep -qR "$X" .; echo $?
1
> X="Find this Code - Now"
> grep -qR "$X" .; echo $?
0 
```

# java - Tomcat 没有在 Web 应用程序的上下文中添加斜杠

> ID：11055608
> 
> 赞同：19
> 
> 时间：2012-06-15T17:38:23.783
> 
> 标签：java, spring, tomcat, war

如果在没有它的情况下输入了 url，我想让 Tomcat 自动在我的应用程序的上下文中添加一个斜杠。

当我使用 Jetty 进行测试时，它会自动将斜杠添加到我的应用程序的上下文中，但 Tomcat 不会这样做。

我不确定一旦部署上下文将被命名，因为我将 WAR 交给其他人，所以 HTML 中的任何资源引用都是相对的。有没有办法让 Tomcat 自动重定向到相同的上下文并添加斜杠？

目前使用 Tomcat 7 和 Spring 3。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-12-21T16:51:19.427

这是一篇旧文章，但从 Tomcat 7.0.67 开始，您需要将以下属性添加到您的 context.xml 文件中：

```
<Context mapperContextRootRedirectEnabled="true">...</Context> 
```

根据 7.0.67 变更[日志](https://tomcat.apache.org/tomcat-7.0-doc/changelog.html)：

> 将为上下文根和目录提供重定向的功能从 Mapper 中添加尾随 / 移动到 DefaultServlet。这使得此类请求能够在进行重定向之前由任何已配置的 Valve 和 Filters 处理。此行为可通过 Context 的 mapperContextRootRedirectEnabled 和 mapperDirectoryRedirectEnabled 属性进行配置，这些属性可用于恢复先前的行为。

在 Tomcat 上下文[文档](https://tomcat.apache.org/tomcat-7.0-doc/config/context.html)中：

> mapperContextRootRedirectEnabled：如果启用，对 Web 应用程序上下文根的请求将在必要时由 Mapper 而不是默认的 Servlet 重定向（添加尾部斜杠）。这更有效，但具有确认上下文路径存在的副作用。如果未指定，则使用默认值 false。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-22T12:21:02.777

您的应用程序的 web.xml 似乎有一个映射到`"/*"`. servlet-mapping to`"/*"`使tomcat 将请求按原样传递给Web 应用程序（即不重定向）。

要正确重定向，您必须将`"/*"`映射更改为 just `"/"`，后者表示默认 servlet。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T18:02:21.200

Tomcat 会自动添加一个斜杠。只需使用 Tomcat 提供的示例应用程序对其进行测试。

如果 - 由于某些特殊配置 - 它没有，我会编写一个过滤器来检查查询字符串并根据应用程序的需要进行重定向。很多时候这是无论如何都需要的（进行 http->https 重定向等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:44:32.913

你试过在 Tomcat 上玩 URL Rewrite 吗？
这可能会有所帮助：[http ://code.google.com/p/urlrewritefilter/](http://code.google.com/p/urlrewritefilter/)

如果这没有帮助，请查看：[URL rewrite in tomcat web.xml](https://stackoverflow.com/questions/6631600/url-rewrite-in-tomcat-web-xml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-15T14:46:12.993

Pat 的出色回答帮助我挖掘了更多细节。这似乎与某些版本的 Tomcat（7.0.67+ 的 Tomcat 7，以及 8.29 和 8.37 之间的 Tomcat 8）中的一些怪癖有关，与会话 cookie 和 URL 重定向有关。

底线似乎是，如果 java 服务器创建路径特定的会话 cookie，末尾带有斜杠（如“/app_name/”），那么服务器还必须执行自动初始重定向（/app_name --> /app_name /) ... 否则，会话 cookie 将不会随请求一起发送，并且它永远不会像您拥有有效会话一样查看服务器。这可能会导致从应用程序到身份验证的重定向循环。

Tomcat 中有一些配置可以控制这两种行为，但据我所知，它们在这些版本中基本上是不同步的，因此人们可能会获得*带有*斜杠的 cookie，*而不会*获得重定向。Tomcat 更改日志中有几个相关的问题/更改： [https ://tomcat.apache.org/tomcat-8.0-doc/changelog.html](https://tomcat.apache.org/tomcat-8.0-doc/changelog.html)

正如 Pat 已经指出的那样，可以通过将此属性添加到应用程序的 Context 元素来解决此问题：

```
<Context mapperContextRootRedirectEnabled="true"> 
```

# android - NewObject 调用的间接引用无效

> ID：11055609
> 
> 赞同：7
> 
> 时间：2012-06-15T17:38:23.887
> 
> 标签：android, android-ndk, android-4.0-ice-cream-sandwich, native-code

好的，所以我有下面的本机代码。我正在尝试从中返回一个 FilePermissionInfo 数组，其中填充了一些由 stat() 返回的数据。问题是第一次调用 NewObject 时出现以下错误：

> 06-15 20:25:17.621: W/dalvikvm(2287): decodeIndirectRef 中的无效间接引用 0x40005820 06-15 20:25:17.621: E/dalvikvm(2287): VM 中止

这很奇怪，因为我拥有的唯一引用对象是 jclass（用于 FilePermissionInfo），我将其转换为全局引用。

代码是：

```
JNIEXPORT jobjectArray JNICALL
Java_com_mn_rootscape_utils_NativeMethods_getFilesPermissions( JNIEnv* env, jobject thizz, jobjectArray filePathsArray ) 
{
jobjectArray result;
int size = (*env)->GetArrayLength(env, filePathsArray);
jboolean isCopy;

jclass filePermInfoCls = (*env)->FindClass(env, kFilePermissionInfoPath);
if(!filePermInfoCls)
{
    LOGE("getFilesPermissions: failed to get class reference.");
    return NULL;
}

gFilePermInfoClass = (jclass)(*env)->NewGlobalRef(env, filePermInfoCls);
LOGI("got gFilePermInfoClass");

jmethodID filePermInfoClsConstructor = (*env)->GetMethodID(env, gFilePermInfoClass, "<init>", kFilePermInfoConstructorSig);
if(!filePermInfoClsConstructor)
{
    LOGE("getFilesPermissions: failed to get method reference.");
    return NULL;
}

struct stat sb;

LOGI("starting...");
result = (jobjectArray)(*env)->NewObjectArray(env, size, gFilePermInfoClass, NULL);
for(int i = 0; i != size; ++i) 
{
    jstring string = (jstring) (*env)->GetObjectArrayElement(env, filePathsArray, i);
const char *rawString = (*env)->GetStringUTFChars(env, string, &isCopy);    

    if(stat(rawString, &sb) == -1) 
    {
        LOGE("stat error for: %s", rawString);
    }

    LOGI("%ld %ld %ld %ld %ld %ld %ld %ld", sb.st_dev, sb.st_mode, sb.st_nlink, sb.st_uid, sb.st_gid, sb.st_atime, sb.st_mtime, sb.st_ctime);

    jobject permInfo = (*env)->NewObject(env, 
                            gFilePermInfoClass, 
                            filePermInfoClsConstructor, 
                            (long)sb.st_dev,
                            (long)sb.st_mode,
                            (long)sb.st_nlink,
                            (long)sb.st_uid,
                            (long)sb.st_gid,
                            (long)sb.st_atime,
                            (long)sb.st_mtime,
                            (long)sb.st_ctime,
                            "",
                            "",
                            1,
                            "");

    LOGI("xxx1");
    (*env)->SetObjectArrayElement(env, result, i, permInfo);
    LOGI("xxx2");
    (*env)->ReleaseStringUTFChars(env, string, rawString);
    LOGI("xxx3");
}

(*env)->DeleteLocalRef(env, filePermInfoCls);

return result; 
```

}

Java 类构造函数签名和路径是：

```
const char* kFilePermissionInfoPath = "com/mn/rootscape/utils/FilePermissionInfo";
const char* kFilePermInfoConstructorSig = "(JJJJJJJJLjava/lang/String;Ljava/lang/String;ZLjava/lang/String;)V"; 
```

请注意，如果我在默认构造函数上调用 NewObject，那么它可以正常工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T21:01:11.343

好的，找到了。这是`jstring`参数的问题。事实证明，您不能将空字符串（甚至 NULL ）作为`jstring`. 相反，我曾经`(*env)->NewStringUTF(env, NULL)`创建一个 NULL `jstring`。

现在似乎工作正常。

* * *

由于这个问题产生了一些高活动，我将在下面发布最终解决方案。请注意，该`nullString`变量在其作用域结束时（或当您完成使用它时）被释放：

```
 jstring nullString = (*env)->NewStringUTF(env, NULL);
...
        jobject permInfo = (*env)->NewObject(env, 
                                gFilePermInfoClass, 
                                filePermInfoClsConstructor, 
                                (jbyte)permsOwner,
                                (jbyte)permsGroup,
                                (jbyte)permsOthers,
                                (jlong)sb.st_uid,
                                (jlong)sb.st_gid,
                                (jlong)sb.st_atime,
                                (jlong)sb.st_mtime,
                                (jlong)sb.st_ctime,
                                nullString,
                                nullString,
                                (jboolean)1,
                                nullString);
...
       (*env)->DeleteLocalRef(env, nullString); 
```

# r - 如何将函数保存为新的 R 脚本？

> ID：11055618
> 
> 赞同：5
> 
> 时间：2012-06-15T17:38:56.113
> 
> 标签：r, function, save

给定一个函数，如何将其保存到 R 脚本 (.R)？

Save 适用于数据，但显然无法创建 .R 数据。

从控制台复制粘贴到新脚本文件似乎会引入导致错误的字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T17:46:02.587

看一下`dump`功能。它写入的文件是可以用其他方式`R`读回或使用的代码。`source`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:46:20.293

我不得不问：你为什么首先在控制台中编写你的函数？任意数量的编辑器都支持“源”调用，因此您可以在编辑时更新函数。如果没有别的，从控制台复制/粘贴将携带提示字符，所以一开始是个坏主意。

# trigger.io - 如何在 TriggerIO 中创建/显示类似 Twitter 的提要

> ID：11055620
> 
> 赞同：0
> 
> 时间：2012-06-15T17:39:09.047
> 
> 标签：trigger.io

我正在尝试创建一个移动应用程序，其中一个功能是类似于 twitter 的提要。twitter 提要将显示来自服务器的消息。使用 TriggerIO 实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:50:27.290

一种与桌面 Web 应用程序几乎相同的方式：

1.  利用 Twitter API 拉下 Json。
2.  更新你的 DOM。
3.  利用 setInterval() 每 X 分钟检查一次更新。
4.  用新的状态更新更新你的 DOM。

这是一个很棒的 Twitter trigger.io 教程，可以帮助您入门：

[http://trigger.io/cross-platform-application-development-blog/2012/03/02/how-to-build-fast-html5-mobile-apps-using-backbone-js-zepto-js-and-触发-io/](http://trigger.io/cross-platform-application-development-blog/2012/03/02/how-to-build-fast-html5-mobile-apps-using-backbone-js-zepto-js-and-trigger-io/)

# c# - 无法启动服务：服务没有响应控制语句

> ID：11055621
> 
> 赞同：1
> 
> 时间：2012-06-15T17:39:09.500
> 
> 标签：c#, windows-services, installation

我知道这是一个很常见的错误，通常与 Windows 服务的 onStart 方法有关，但我不知道为什么这个错误不起作用。

下面是通过 Windows 事件查看器的错误堆栈跟踪：

```
at System.Diagnostics.EventLog.FindSourceRegistration(System.String, System.String, Boolean, Boolean)
   at System.Diagnostics.EventLog.SourceExists(System.String, System.String, Boolean)
   at System.Diagnostics.EventLog.SourceExists(System.String)
   at ArchivalPurgeService.ArchivalPurge..ctor()
   at ArchivalPurgeService.Program.Main() 
```

这是我的程序：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Timers;

namespace ArchivalPurgeService
{
    public partial class ArchivalPurge : ServiceBase
    {
        public ArchivalPurge()
        {
            try
            {
                InitializeComponent();
            }
            catch (Exception ex)
            {
            }
        }

        protected override void OnStart(string[] args)
        {
            try
            {
                timer2 = new Timer();
                timer2.Enabled = true;
                timer2.Interval = Convert.ToInt32(System.Configuration.ConfigurationSettings.AppSettings["RuntimeFrequency"]);
            }
            catch (Exception ex)
            {
            }
        }

        private Queue<Job> QueryDBForJobs()
        {   
            int i = 0;
            return new Queue<Job>();
        }

        protected override void OnStop()
        {

        }

        private void timer2_Elapsed(object sender, ElapsedEventArgs e)
        {
            QueryDBForJobs();
        }
    }
} 
```

即使所有内容都被注释掉，我也尝试运行它，我遇到了同样的问题。这可能只是安装的问题吗？我正在使用我几乎完全根据 MSDN how-to 创建的安装程序来创建 Windows 服务。我显然也在每次代码更改后构建/卸载/重新安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:24:40.430

显然问题在于安装，而不是代码。当我通过 installutil 安装时，一切正常。

# android - 使用带有 PUT 请求和 StringEntity(String) 的 AQuery 库

> ID：11055622
> 
> 赞同：4
> 
> 时间：2012-06-15T17:39:10.047
> 
> 标签：android, http, request

我为 Android 使用 AndroidQuery(AQuery) 库，我需要使用 StringEntity(some string) 实体创建 PUT 请求。

我的代码，有什么问题？你的建议？我尝试在没有“.header("_method", "PUT") 的情况下使用

```
HttpEntity entity = null;
    try {
        entity = new StringEntity(stringData, HTTP.UTF_8);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }

    Map<String, Object> params = new HashMap<String, Object>();
    params.put(AQuery.POST_ENTITY, entity);

    AQuery aq = new AQuery(this);
    aq.progress(pDialog).ajax(url, params, String.class, new AjaxCallback<String>() {

        @Override
        public void callback(String url, String json, AjaxStatus status) {
            if(status.getCode() == 200) {

            } else {

            }

        }
    }.header("Content-Type", "application/x-www-form-urlencoded") 
    .header("_method", "PUT")); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T20:11:28.753

它有点隐蔽，但 AjaxCallback 有一个私有`method`字段（和相应的设置器），用于确定要使用的 HTTP 方法。默认情况下，它使用`METHOD_DETECT`，它试图找出使用什么，当你添加参数时，它会认为它是一个 POST。

所以，而不是：

```
.header("_method", "PUT")); 
```

利用

```
.method(AQuery.METHOD_PUT) 
```

（参考：[https](https://github.com/androidquery/androidquery/blob/master/src/com/androidquery/callback/AbstractAjaxCallback.java#L280) ://github.com/androidquery/androidquery/blob/master/src/com/androidquery/callback/AbstractAjaxCallback.java#L280 ）

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-17T22:52:38.880

AndroidQuery 通常不支持 PUT 和 DELETE 请求。:( 伤心。

# c# - 如何在单元测试中比较列表

> ID：11055632
> 
> 赞同：206
> 
> 时间：2012-06-15T17:39:39.250
> 
> 标签：c#, visual-studio-2010, unit-testing, mstest

这个测试怎么会失败？

```
[TestMethod]
public void Get_Code()
{
    var expected = new List<int>();
    expected.AddRange(new [] { 100, 400, 200, 900, 2300, 1900 });

    var actual = new List<int>();
    actual.AddRange(new [] { 100, 400, 200, 900, 2300, 1900 });

    Assert.AreEqual(expected, actual);
    // Assert.AreSame(expected, actual)       fails
    // Assert.IsTrue(expected.Equals(actual)) fails
} 
```

* * *

## 回答 #1

> 赞同：420
> 
> 时间：2012-06-15T17:43:20.827

要对集合进行断言，您应该使用[`CollectionAssert`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert.aspx)：

```
CollectionAssert.AreEqual(expected, actual); 
```

`List<T>`不会覆盖`Equals`，所以如果`Assert.AreEqual`只是调用`Equals`，它将最终使用引用相等。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-15T17:47:22.413

我想这会有所帮助

```
Assert.IsTrue(expected.SequenceEqual(actual)); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-08-14T09:56:55.220

如果要检查每个是否包含相同的值集合，则应使用：

```
CollectionAssert.AreEquivalent(expected, actual); 
```

编辑：

> “如果两个集合具有相同数量的相同元素，则它们是等价的，但如果它们的值相等，则元素相等，而不是如果它们引用同一个对象。” - [https://msdn.microsoft.com/en-us/library/ms243779.aspx](https://msdn.microsoft.com/en-us/library/ms243779.aspx)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-07-15T12:26:13.593

我在这个线程中尝试了其他答案，但它们对我不起作用，我正在比较在其属性中存储了相同值但对象不同的对象集合。

方法调用：

```
CompareIEnumerable(to, emailDeserialized.ToIndividual,
            (x, y) => x.ToName == y.ToName && x.ToEmailAddress == y.ToEmailAddress); 
```

比较方法：

```
private static void CompareIEnumerable<T>(IEnumerable<T> one, IEnumerable<T> two, Func<T, T, bool> comparisonFunction)
    {
        var oneArray = one as T[] ?? one.ToArray();
        var twoArray = two as T[] ?? two.ToArray();

        if (oneArray.Length != twoArray.Length)
        {
            Assert.Fail("Collections are not same length");
        }

        for (int i = 0; i < oneArray.Length; i++)
        {
            var isEqual = comparisonFunction(oneArray[i], twoArray[i]);
            Assert.IsTrue(isEqual);
        }
    } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-06-13T07:50:25.380

这个测试比较一个日期输入，检查它是否是闰年，如果是，从输入的日期输出 20 个闰年，如果不是，输出 NEXT 20 个闰年，myTest.Testing 引用 myTest 实例，该实例又调用值来自名为测试的列表，其中包含所需的计算值。我必须做的练习的一部分。

```
[TestMethod]
        public void TestMethod1()
        {
            int testVal = 2012;
            TestClass myTest = new TestClass();
            var expected = new List<int>();
            expected.Add(2012);
            expected.Add(2016);
            expected.Add(2020);
            expected.Add(2024);
            expected.Add(2028);
            expected.Add(2032);
            expected.Add(2036);
            expected.Add(2040);
            expected.Add(2044);
            expected.Add(2048);
            expected.Add(2052);
            expected.Add(2056);
            expected.Add(2060);
            expected.Add(2064);
            expected.Add(2068);
            expected.Add(2072);
            expected.Add(2076);
            expected.Add(2080);
            expected.Add(2084);
            expected.Add(2088);
            var actual = myTest.Testing(2012);
            CollectionAssert.AreEqual(expected, actual);
        } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-01-03T16:21:03.410

Fluent assertions 对数组进行深度比较`actualArray.Should().BeEquivalentTo(expectedArray)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-20T12:33:15.623

```
List<AdminUser> adminDetailsExpected = new List<AdminUser>()
{
new AdminUser  {firstName = "test1" , lastName = "test1" , userId = 
"001test1"  },
new AdminUser {firstName = "test2" , lastName = "test2" , userId = 
"002test2"   }
}; 
```

//行为

```
List<AdminUser> adminDetailsActual = RetrieveAdmin(); // your retrieve logic goes here 
```

//断言

```
Assert.AreEqual(adminDetailsExpected.Count, adminDetailsActual.Count);  //Test succeeds if the count matches else fails. This count can be used as a work around to test 
```

# wpf - 为什么 WPF Datagrid SelectionUnit="Cell" 会导致禁用 DataGridTemplateColumn 控件？

> ID：11055635
> 
> 赞同：0
> 
> 时间：2012-06-15T17:39:54.947
> 
> 标签：wpf, datagrid, datatemplate, wpfdatagrid, datagridtemplatecolumn

这似乎有点奇怪：我有一个带有按钮列的 Datagrid，当单击该行的按钮时，该列会删除该行。但是，如果我设置 Datagrid SelectionUnit="Cell" 则按钮列被禁用，我不能再单击该按钮。

谁能告诉我为什么会发生这种情况以及如何避免该列的禁用行为？

这是重新创建问题的 XAML - 添加和删除 SelectionUnit="Cell" 以查看行为变化

```
<Window.Resources>
    <local:DummyCollection x:Key="stringCollection">
        <local:Dummy x="1" y="2" z="3" />
        <local:Dummy x="4" y="5" z="6" />
        <local:Dummy x="7" y="8" z="9" />
    </local:DummyCollection>
</Window.Resources>

<StackPanel>
    <DataGrid ItemsSource="{Binding Source={StaticResource stringCollection}}" AutoGenerateColumns="False" SelectionUnit="Cell">
        <DataGrid.Columns>
            <DataGridTextColumn x:Name="a" Binding="{Binding Path=x}" Header="a" />
            <DataGridTextColumn x:Name="b" Binding="{Binding Path=y}" Header="b" />
            <DataGridTextColumn x:Name="c" Binding="{Binding Path=z}" Header="c" />
            <DataGridTemplateColumn  x:Name="deleteButtonColumn" Header="D">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Command="Delete" >D</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</StackPanel> 
```

将此添加到 Window 后面的代码中：

```
public class Dummy
{
    public string x { get; set; }
    public string y { get; set; }
    public string z { get; set; }
}
public class DummyCollection : ObservableCollection<Dummy> { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:33:16.623

我看不出设置`SelectionUnit="Cell"`或之间有什么区别`SelectionUnit="FullRow"`。两者都不起作用，因为命令属性未绑定到命令。

您应该将按钮的 Command 属性绑定到`ICommand`. 这是一个基于您的代码使用 MVVM Light 的 RelayCommand 的示例。

```
<Window.DataContext>
    <local:ViewModel/>
</Window.DataContext>
<StackPanel>
    <DataGrid ItemsSource="{Binding Items}" 
              AutoGenerateColumns="False" SelectionUnit="Cell">
        <DataGrid.Columns>
            <DataGridTextColumn x:Name="a" Binding="{Binding Path=x}" Header="a" />
            <DataGridTextColumn x:Name="b" Binding="{Binding Path=y}" Header="b" />
            <DataGridTextColumn x:Name="c" Binding="{Binding Path=z}" Header="c" />
            <DataGridTemplateColumn  x:Name="deleteButtonColumn" Header="D">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Command="{Binding Path=DataContext.Delete, 
                                RelativeSource={RelativeSource Mode=FindAncestor, 
                                AncestorType={x:Type DataGrid}}}" 
                                CommandParameter="{Binding}">D</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</StackPanel>

public class Dummy
{
    public string x { get; set; }
    public string y { get; set; }
    public string z { get; set; }

    public override string ToString()
    {
        return string.Format("x:{0}, y:{1}, z:{2}", x, y, z);
    }
}

public class DummyCollection : ObservableCollection<Dummy> { } 

public class ViewModel
{
    public ViewModel()
    {
        Items = new DummyCollection
            {
                new Dummy {x = "1", y = "2", z = "3"},
                new Dummy {x = "4", y = "5", z = "6"},
                new Dummy {x = "7", y = "8", z = "9"},
            };

        Delete = new RelayCommand<Dummy>(DeleteItem);
    }

    public ICommand Delete { get; private set; }

    private void DeleteItem(Dummy item)
    {
        Debug.WriteLine("Delete item, " + item);
    }

    public DummyCollection Items { get; private set; }
} 
```

# javascript - 在 JQuery 模态对话框中指定图像 onclick 侦听器

> ID：11055637
> 
> 赞同：0
> 
> 时间：2012-06-15T17:39:59.617
> 
> 标签：javascript, jquery

我正在开发一个打开模式对话框的应用程序。该对话框允许用户向正在显示的模态对话框 div 添加诸如条件之类的复选框。他们将复选框的文本输入页面上的文本框中，然后单击按钮以附加复选框。复选框显示得很好。在每个复选框旁边，我还添加了一个 jquery ui-icon icon-close 图像类，以便在单击新条目旁边的 X 时，从页面中删除该条目。

问题在于简单地在页面中指定脚本是行不通的。div 似乎不是页面的一部分，并且为所有图像定义 onclick 侦听器并没有达到预期的效果。所以我的问题是，如何在模态对话框中定义图像 onclick 侦听器。例如，在定义模式对话框时，我可以指定一个 on open 函数，该函数在对话框第一次打开时执行一些操作。我想以类似的方式定义一个在模式对话框中单击图像时主动监听的函数。

例子：

```
 $("<div class='rationale' style='position: relative;'><div class='rationaleContainer' style='display:block; height:155px; overflow-y: scroll;'></div><div class='rationaleText' style='position: absolute; bottom: 0; float: right;'><input type='text' placeholder='Add rationale' id='rationaleBox' style='width: 540px;' maxlength='180'></div></div>").dialog({
        height: 300,
        width: 600,
        modal: true,
        closeOnEscape: false,
        resizable: false,
        title: "Comments for " + item,
        open: function(event, ui){
            $(".ui-dialog-titlebar-close").hide();
            $(".ui-dialog-title").after("<i style='font-size: 12px; float: right;'>("+value+")</i>");
            $(".ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset").css("float", "none");
        }, 
```

与定义的 open 函数类似，我想为图像点击创建一个侦听器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:15:47.067

要定义一个在单击元素时侦听的全局处理程序，请使用`on`jQuery 1.7 或更高版本上的函数。例如：

```
$(document).ready(function() {
    $('.ui-dialog .icon-close').on('click', function() {
        // an element of *.icon-close* within *.ui-dialog*
        // had been clicked
        $('ui-dialog').hide();
    });
}); 
```

如果您使用的是 1.7 之前的 jQuery 版本，请使用以下`delegate`方式代替`on`：

```
$(document).ready(function() {
    $('.ui-dialog .icon-close').delegate('', 'click', function() {
        // an element of *.icon-close* within *.ui-dialog*
        // had been clicked
        $('ui-dialog').hide();
    });
}); 
```

# iphone - plist中的增量编号

> ID：11055639
> 
> 赞同：0
> 
> 时间：2012-06-15T17:40:03.597
> 
> 标签：iphone, objective-c, arrays, plist

我正在使用下面的方法从我的 plist 中获取一个数组，然后将某个值增加 1，然后保存它。但是，我记录了数组，并且该值实际上并没有每次都上升。

在我的 plist 中，我有一个数组，在那个数字值中，每个值都设置为 0。所以每次我再次运行它时，它似乎又回到了 0。

```
NSString *path = [[NSBundle mainBundle] bundlePath];
    NSString *finalPath = [path stringByAppendingPathComponent:@"Words.plist"];

    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile:finalPath];
    NSMutableArray *errors = [dict objectForKey:[NSString stringWithFormat:@"Errors%d.%d", [[stageSelectionTable indexPathForSelectedRow] section] +1, [[stageSelectionTable indexPathForSelectedRow] row] +1]];

    int a = [[errors objectAtIndex:wordIndexPath] intValue];
    a += 1;
    NSNumber *b = [NSNumber numberWithInt:a];
    [errors replaceObjectAtIndex:wordIndexPath withObject:b];

    [errors writeToFile:finalPath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:12:18.113

您只能写入文档文件夹中的文件。**你不能写你的包！**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Namelist.plist"]; 
```

您可以使用`NSFilemanager`将 Plist-File 复制到文档文件夹。

* * *

要获取文件的路径：

```
- (NSString *)filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"MyFile.plist"];
    return filePath;
} 
```

如果文件不存在，则复制该文件：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:[self filePath]]) {
        NSString *path = [[NSBundle mainBundle] pathForResource:@"MyFile" ofType:@"plist"];
    [fileManager copyItemAtPath:path toPath:[self filePath] error:nil];
} 
```

现在您可以将您**`NSDictionary`**的文件写入 Documents-Directory：

```
[dict writeToFile:[self filePath] atomically:YES]; 
```

**但是你真的需要更新字典中的数组！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:08:58.610

您正在将*数组*写入磁盘，而不是数组源自的字典：

```
[dict writeToFile:finalPath atomically:YES]; 
```

此外，您需要`Errors%d.%d`在保存之前将对象替换为更新的对象：

```
[dict setObject:errors forKey:/* your formatted key*/]; 
```

最后，正如@mavrick3 指出的那样，您不能将文件保存到您的包中，只能保存到应用程序的文档目录中。

# wpf - WPF 中的数据绑定可以简单地使用 winforms 中的数据视图完成吗？

> ID：11055640
> 
> 赞同：0
> 
> 时间：2012-06-15T17:40:05.010
> 
> 标签：wpf, vb.net, winforms

简短而简单的问题。在 Winforms 中，您可以简单地将数据视图绑定到组合框或其他控件：

```
combobox.DataSource = dataview
combobox.DisplayMember = "Something" 
```

在 WPF 中，我通常使用 ObservableCollection 完成数据绑定并编辑 xaml。有没有办法像上面那样快速做到这一点？

编辑：这似乎是我能想到的最简单/最快的事情，它本身有什么问题吗？

```
combobox.ItemSource = dataview
combobox.DisplayMemberPath = "Something" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:45:50.840

你可以这样做：

```
List<Person> someListOFPersons = new List<Person>();
comboBox.DataContext = someListOfPersons;
comboBox.DisplayMemberPath = "FirstName"; 
```

您不会看到集合中的更改。因此，如果一个人被添加到列表中或从列表中删除，组合框将看不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:53:46.827

您可以以编程方式设置绑定，但根据我对 MVVM 模式的理解，最佳实践是在 View (xaml) 中设置绑定，而不是在 ViewModel 或 View 代码隐藏中。

如何以编程方式设置绑定：

```
Binding myBinding = new Binding("Name");
myBinding.Source = dataview // data source from your example

combobox.DisplayMemberPath = "Something"
combobox.SetBinding(ComboBox.ItemsSourceProperty, myBinding); 
```

With this, when your dataview is updated, the updates will be shown in your ComboBox.

# ruby-on-rails-3 - Rails 3：社交流 - 狮身人面像安装错误

> ID：11055645
> 
> 赞同：0
> 
> 时间：2012-06-15T17:40:25.010
> 
> 标签：ruby-on-rails-3, sphinx, social-networking, social-stream

我在 Rails 3.2.5 中创建了一个新应用程序，运行“bundle”，然后“rails generate social_stream:install”

我收到以下消息：

在您的系统上找不到 Sphinx。您可能需要在 config/sphinx.yml 文件中配置以下设置： * bin_path * searchd_binary_name * indexer_binary_name

===============================

我的 sphinx.yml 看起来像这样：

开发：enable_star：1 min_infix_len：1 测试：enable_star：1 min_infix_len：1 生产：enable_star：1 min_infix_len：1

================================

我去了：http: [//freelancing-god.github.com/ts/en/advanced_config.html](http://freelancing-god.github.com/ts/en/advanced_config.html)

并寻找合适的配置来让我继续使用 Social_Stream 前进，但我被困在这一点上。

有谁知道可以让您通过此错误消息的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:13:03.477

您使用什么操作系统？

您是否实际安装了适当的二进制文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T23:12:52.233

在您的系统上安装 Sphinx。如果您使用的是自制软件，则可以运行以下命令：

```
brew install sphinx 
```

# sql - 我可以用参数规避 where 子句，而不是在查询中添加 OR 1=1 吗？

> ID：11055652
> 
> 赞同：1
> 
> 时间：2012-06-15T17:40:40.343
> 
> 标签：sql, sql-server, tsql, ado.net

现在我有一个很长的查询，我想用这样的语句来代替

```
where userid=@userid 
```

但是我还有其他改变流程的参数，所以，我想要两个选项，选择一个用户或任何用户

我可以发送用户名以便它可以选择和用户吗？就像我们在 LIKE 语句中所做的那样，我们发送

```
where username LIKE "%%" 
```

我们得到了所有记录，我怎样才能用 INT 做到这一点？

因为我的查询是参数化的，所以我不能像这样添加“OR 1=1”

```
where userid=1 or 1=1 
```

我应该使用 BETWEEN 并获取两个参数，所以当我选择一条记录时，我将输入 userid-1 和 userid+1 作为两个参数，并获取一个用户，当我想要全选时，我将输入 1 和百万。

它是参数化查询的一种合乎逻辑的方式，还是有另一种方式，只有一个参数？

解决方案 ![这就是我使用解决方案的方式，当您使用右侧的 or 列时，您的 sql 将被破坏。](../Images/fc4c4690eee5e7e90b25ad9b1847612c.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T17:44:05.103

通常这是使用

```
WHERE userid = @userid OR @userid IS NULL 
```

另一种变体（如果 userid 列不可为空）：

```
WHERE userid = COALESCE(@userid, userid) 
```

还有一个（对于整数）是说

```
WHERE userid BETWEEN COALESCE(@userid, 1)
    AND COALESCE(@userid, 2000000000); -- well, 2147whatever 
```

但是，如果您有很多这些条件，并且每次运行查询时参数都会更改，那么您可能会将自己锁定在并不总是合适的糟糕计划中。所以有时答案是生成动态SQL：

```
SET @sql = @sql + CASE WHEN @userid IS NOT NULL THEN 
    N' AND userid = ' + CONVERT(VARCHAR(12), @userid); 
```

将此与`OPTION RECOMPILE`和/或实例设置“针对临时工作负载进行优化”相结合，您只会在计划缓存中填充多次执行的查询版本的计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:46:05.310

以下内容会起作用吗？

```
SELECT * FROM Users WHERE UserID = @UserID OR @SelectAllUsers = 1 
```

您将 @SelectAllUsers 设置为可以作为 1 或任何其他数字传递的整数。如果为1，则选择所有用户，否则只选择传入的用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:44:06.810

```
where userId > -1 
```

那行得通吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T17:43:55.043

参数化查询可以防止发生 sql 注入。你为什么不做一个没有参数或 WHERE 子句的特定查询`SELECT * FROM users`？

# c# - 从 Skydrive 读取

> ID：11055653
> 
> 赞同：2
> 
> 时间：2012-06-15T17:40:43.303
> 
> 标签：c#, onedrive

我想这样做，如果可能的话，我想使用 Winform 应用程序访问我的 Skydrive。实际上，我想在任何地方访问我的一些内容，或者访问其他人也可以访问它们，但不喜欢在浏览器或 Windows 手机上。访问主要只是读取访问。

1.  对于这种情况，您有更好的解决方案吗？
2.  我应该或可以做什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:42:05.753

SkyDrive 有一个[官方的 RESTFul API](http://msdn.microsoft.com/en-us/live//default.aspx)。因此，请继续访问此站点并开始阅读文档以了解此 API 的工作原理。

还有一个非官方的[.NET 客户端](http://skydriveapiclient.codeplex.com/)。

# django - 创建 django 会话时

> ID：11055654
> 
> 赞同：16
> 
> 时间：2012-06-15T17:40:44.960
> 
> 标签：django, django-sessions

我真的不明白何时创建会话以及创建会话的实体（每个 ip、每个浏览器、每个登录用户）。我在文档中看到默认情况下会为每个访问者创建会话 - 但什么是访问者（浏览器或 ip）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T07:09:21.460

## 什么是 HTTP 会话？

要显示网页，您的浏览器会向服务器发送[HTTP](http://en.wikipedia.org/wiki/Http)请求，服务器会发回 HTTP 响应。每次您单击网站上的链接时，都会发生一个新的 HTTP 事务，即它不是一个长期持续的连接（如电话）。您与网站的通信包含许多单一的 HTTP 事务（数十或数百个电话，每个电话只有几个字）。

那么服务器如何记住有关用户的信息，例如用户登录（IP 地址不可靠）？第一次访问网站时，服务器会创建一个随机字符串，并在 HTTP 响应中要求浏览器使用该值创建一个所谓的 HTTP cookie。cookie 实际上只是（cookie 的）名称和值。如果您访问一个简单的启用会话的 Django 站点，服务器将要求您的浏览器设置一个名为“sessionid”的 cookie，该 cookie 具有这样一个随机生成的值。

![FireBug 网络选项卡的屏幕截图，同时向 Django 站点发出第一个请求。 它显示了如何设置 HTTP cookie。](../Images/66cba79e23c18db65d7705ebb0079528.png)

随后，您的浏览器将向该域发出 HTTP 请求，它将在 HTTP 请求中包含 cookie。

![显示后续请求将如何包含在初始事务中设置的 cookie。](../Images/ac4cc3bcd578298dfd85044a71b0a2d1.png)

服务器保存这些会话 ID（对于 django，默认是保存在数据库中）并将它们与所谓的会话变量一起保存。因此，基于与 HTTP 请求一起发送的会话 ID，它可以挖掘出先前设置的会话变量以及修改或添加会话变量。如果您删除 cookie（在 Firefox 中按 ctrl+shift+delete），您将意识到没有网站会再记住您（Gmail、Facebook、Django 网站等），您必须重新登录。大多数浏览器将允许您在一般情况下或针对特定网站（出于隐私原因）禁用 cookie，但这意味着您无法登录这些网站。

## 每个浏览器、每个窗口、每个选项卡、每个 IP？

It is not possible to log into different GMail accounts within the same browser, not even from different windows. But it is possible to log in to one account with Firefox and another with Chrome. So the answer is: per browser. However, it is not always that simple. You can use different profiles in Firefox, and each can keep different cookies and thus you can log into different accounts simultaneously. There are also Firefox plugins for keeping multiple sessions, e.g. [MultiFox](http://br.mozdev.org/multifox/).

The session all depends on which session cookie your browser sends in it's HTTP request.

## Play around

为了全面了解正在发生的事情，我建议为 Firefox 安装[FireBug](http://getfirebug.com/)和[FireCookie](https://addons.mozilla.org/en-US/firefox/addon/firecookie/)插件。以上截图取自 FireBug 的网络面板。FireCookie 将在您访问网站时为您提供设置 cookie 的时间和设置的概览，并让您控制允许的 cookie。

如果出现服务器端错误，并且您的 DEBUG=True，则 Django 错误消息将显示有关 HTTP 请求的信息，包括发送的 cookie

![在此处输入图像描述](../Images/eab02af0c5ab828be0c3e20f6f6f16eb.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-15T17:45:44.957

它是浏览器（不是IP）。会话基本上是存储在服务器上的数据，由作为 cookie 发送到浏览器的会话 ID 标识。浏览器将在所有后续请求中发回包含会话 ID 的 cookie，直到浏览器关闭或 cookie 过期（取决于与 cookie 标头一起发送的 expires 值，您可以通过 Django 使用 set_expiry 控制该值）。

服务器也可以通过基本上忽略浏览器发送的（未过期的）cookie 并要求启动新会话来使会话过期。

[这里](http://eli.thegreenplace.net/2011/06/24/how-django-sessions-work-introduction/)有关于会话如何工作的很好的描述。

# ruby - Ruby 1.9.2 中机架级别的 SystemStackError，而不是 1.8.7

> ID：11055656
> 
> 赞同：5
> 
> 时间：2012-06-15T17:40:48.637
> 
> 标签：ruby, ruby-on-rails-3.1, stack-overflow, infinite-loop

我被引入了一个遗留代码库，将它从 Rails 2.4/Ruby 1.8.7 升级到 Rails 3.1/Ruby 1.9.2。在这样做的时候，我发现了一个非常有趣的问题，花了 3 天时间才试图弄清楚。我想把它放在这里，既给它一些谷歌汁，让其他人看到这个问题，又问一个问题：**为什么？**

基本上，我`SystemStackError`在运行我的应用程序时看到了机架级别。在导致错误之前我无法获得任何请求，也无法调试它，因为我的代码从未被触及。在开发模式下，我可以看到网站的大部分内容，然后会突然获得`SystemStackError`数据库被击中的时间。所以我认为这是延迟加载。

切换到生产模式，异常发生在第一个请求上。服务器正常启动，但没有请求通过，我的代码也没有被触及。

快进太多小时，我追踪到 Rails 中的一个循环（[完整要点](https://gist.github.com/2933177)）：

```
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/url_for.rb:102:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_controller/metal.rb:140:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/rendering.rb:74:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/layouts.rb:301:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/url_for.rb:103:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_controller/metal.rb:140:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/rendering.rb:74:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/layouts.rb:301:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/url_for.rb:103:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_controller/metal.rb:140:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/rendering.rb:74:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/layouts.rb:301:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/url_for.rb:103:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_controller/metal.rb:140:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/rendering.rb:74:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/abstract_controller/layouts.rb:301:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/url_for.rb:103:in `initialize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_controller/metal.rb:238:in `new' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_controller/metal.rb:238:in `block in action' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/route_set.rb:71:in `call' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/route_set.rb:71:in `dispatch' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/route_set.rb:35:in `call' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/rack-mount-0.8.3/lib/rack/mount/route_set.rb:152:in `block in call' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:96:in `block in recognize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:68:in `optimized_each' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/rack-mount-0.8.3/lib/rack/mount/code_generation.rb:95:in `recognize' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/rack-mount-0.8.3/lib/rack/mount/route_set.rb:141:in `call' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/actionpack-3.1.6/lib/action_dispatch/routing/route_set.rb:538:in `call' 
/Users/john/.rvm/gems/ruby-1.9.2-p320@qstream-ruby19/gems/omniauth-1.1.0/lib/omniauth/builder.rb:48:in `call'
... 
```

我们在这里看到的是系统从`metal.rb`to `url_for.rb`to `layouts.rb`to `rendering.rb`to `metal.rb`to`url_for.rb`等循环

经过相当多的努力，我将其追踪到模型文件顶部的以下行（[就像这样](https://github.com/mettadore/infinite_loop/blob/master/app/models/widget.rb#L1)）：

```
include ActionView::Helpers::UrlHelpers 
```

请注意，这不在类内部，而是在模块级别。

有趣的是，**这在 Ruby 1.8.7 中有效，但`SystemStackError`在 Ruby 1.9.2 中会导致 a。**

我创建了一个[Github 存储库来说明这种行为](https://github.com/mettadore/infinite_loop)。

如果你抓住这个存储库并运行`ruby18`分支，你可以加载一个页面。如果你运行`ruby19`分支，你会在任何请求上得到一个 SystemStackError（任何加载了 Widget 的请求，在生产中运行它，它不会被延迟加载）。

那么，有人知道为什么吗？

我的意思是，我想这与 Ruby 1.9 加载模块的方式有关，因为这似乎不是Rails 核心*引起的问题。*我主要关心的问题是这是否只是代码库中的惰性编程实践引起的深奥问题，或者它是否指向更深层次的问题，无论是在 Ruby 还是 Rails 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:34:24.773

这看起来像[Bug 3144](https://github.com/rails/rails/issues/3144)，说直接引用助手。

```
Rails.application.routes.url_helpers 
```

# javascript - 反转对象如何耦合到其他对象的事件

> ID：11055657
> 
> 赞同：1
> 
> 时间：2012-06-15T17:41:00.913
> 
> 标签：javascript, jquery, event-handling

我目前有一个对象，volumeSlider，它受其他两个控件事件的影响：

```
var volumeSlider = $('#VolumeSlider');

$('#MuteButton').on('mouseenter', function() {
    volumeSlider.fadeIn('fast');
}

$('#Controls').on('mouseleave', function() {
    volumeSlider.fadeOut('fast');
} 
```

我想反转这一点，以便 volumeSlider '监听' MuteButton 和 Controls 上的事件，而不是被告知响应它们。这可能吗？就像是：

```
//Pseudo-Code:
volumeSlider.on('#MuteButton.mouseenter'){
    this.fadeIn('fast');
}.on('#Controls.mouseleave'){
    this.fadeOut('fast');
} 
```

jQuery 的[http://api.jquery.com/bind/](http://api.jquery.com/bind/)在这里有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:42:56.330

这里有一个建议：

```
volumeSlider.on('dosomething', function(e) {
    $(this).fadeIn('fast');
});

$('#MuteButton').on('mouseenter', function(e) {
    volumeSlider.trigger('dosomething');
} 
```

# c - 为什么 MACRO 会有这种行为？

> ID：11055664
> 
> 赞同：2
> 
> 时间：2012-06-15T17:41:30.343
> 
> 标签：c, macros

我有以下代码。如果我将 control_word 设为 6，为什么 if 条件评估为 true 并进入 if 块？这里到底发生了什么？

```
#define MACRO1 0x01
#define MACRO2 0x02
#define MACRO4 0x04
#define MACRO3 MACRO1 | MACRO2
#define MACRO7 MACRO4 | MACRO3

int main()
{
    if(control_word == MACRO3 || control_word == MACRO7)
    {
        /*DO SOME OPERATION*/
    }
    else
    {
        /*DO SOMETHING ELSE */
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T17:45:08.880

| 的优先级 和 == 运算符并不是您认为的那样。道德：总是用括号括起来你的宏！

```
#define MACRO3 (MACRO1 | MACRO2)
#define MACRO7 (MACRO4 | MACRO3) 
```

所以会发生什么是表达式扩展为

```
control_word == 0x01 | 0x02 || control_word == 0x01 | 0x02  | 0x04 
```

反过来形成

```
(control_word == 1) | 2 || (control_word == 7) | 6) 
```

那是

```
0 | 2 || 0 | 6 
```

所以总而言之

```
2 || 6 
```

这被 C 解释为“真或真”，结果为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:51:42.543

表达方式

```
control_word == MACRO3 || control_word == MACRO7 
```

扩展到

```
control_word == MACRO1 | MACRO2 || control_word == MACRO4 | MACRO3 
```

最终扩展到

```
control_word == 1 | 2 || control_word == 4 | 1 | 2 
```

查看[优先级表](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)，您会看到运算符的优先级`==`高于`|`，高于`||`，因此评估为：

```
((control_word == 1) | 2) || ((control_word == 4) | 1 | 2) 
```

评估为

```
((6 == 1) | 2) || ((6 == 4) | 1 | 2) 
```

这是 ( `6==1`is `false`，在算术表达式中被视为 0 - 与 相同`6==4`)

```
((0 | 2) || (0 | 1 | 2) 
```

这是

```
2 || 3 
```

这是

```
true 
```

因为 2 和 3 被视为`true`（非零），所以你进入`if`块，而不是`else`

为了保持（假定的）意图（并获得您期望的结果），您需要通过将宏的定义包装在括号中来保护宏的扩展 - 请注意，这*始终*是避免您的想法和想法之间不和谐的好主意实际上正在发生。

# jsf - 在 tabChange 事件上执行与 p:tabview 中选定选项卡对应的侦听器

> ID：11055665
> 
> 赞同：0
> 
> 时间：2012-06-15T17:41:31.970
> 
> 标签：jsf, primefaces

每当`tab`从`tabview`. 为此，我一直在尝试使用`f:event`，`preRenderComponent`但这对所需没有帮助。

每当在 tabview 中选择某个选项卡时，如何执行与该选项卡对应的侦听器。

```
 <p:tabView dynamic="true" cache="false">
                    <p:tab title="People I'm following" >
                        <f:event type="preRenderComponent" listener="#{listRetriever.retrieveFollowies()}"/>
                        <ui:repeat value="#{listRetriever.list}" var="person">
                            #{person}<br/>
                        </ui:repeat>
                    </p:tab>
                    <p:tab title="People following me" >
                        <f:event type="preRenderComponent" listener="#{listRetriever.retrieveFollowers()}"/>
                        <ui:repeat value="#{listRetriever.list}" var="person">
                            #{person}<br/>
                        </ui:repeat>
                    </p:tab>
                </p:tabView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:12:32.780

TabChangeEvent 将选定的选项卡实例传递给您，现场示例；

[http://www.primefaces.org/showcase-labs/ui/tabviewChangeListener.jsf](http://www.primefaces.org/showcase-labs/ui/tabviewChangeListener.jsf)

# javascript - Javascript .js 文件指南 - 如何在此文件之外使用函数？

> ID：11055666
> 
> 赞同：1
> 
> 时间：2012-06-15T17:41:32.650
> 
> 标签：javascript, directory-structure

所以这里有两部分问题。基本上，javascript函数位置的正确做法是什么？我假设会有几个`MyScriptFile.js`文件，每个文件都有几个函数而不是一个大`AllMyScripts.js`文件，因为不是每个页面都需要每个函数。

但是我不确定如何从这个文件之外引用另一个函数......

我的情况：我在我的许多页面中都使用了 AJAX 请求。每个请求响应都是不同的（来自不同的文件等），并且很难动态化（一个脚本适合所有人会很困难）。但是，我确实有`MakeAJAXRequest()`创建请求对象的函数，这是所有`DoSomethingWithRequest()`函数的标准。

如何包含`MakeAJAXRequest()`在其他包含`DoSomethingWithRequest()`函数的文件中？好像我应该能够找到这个..但我还没有遇到它。

tl;博士我有`MakeObject.js`和`UseObject.js`。怎么`UseObject()`参考`MakeObject()`？

编辑：发现如果您在 HTML标签中包含`MakeObject`BEFORE ，将能够引用. 似乎还是有点脏，因为任何想要使用该脚本的人都必须了解依赖关系......`UseObject``<script>``UseObject``MakeObject``UseObject``MakeObject`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:09:40.060

如果要确保加载依赖项，可以使用如下函数：[http](http://phpjs.org/functions/include:433) ://phpjs.org/functions/include:433还有`include_once()`, `require()`, 和`require_once()`

# xslt - 根据外部文件删除元素

> ID：11055667
> 
> 赞同：2
> 
> 时间：2012-06-15T17:41:33.527
> 
> 标签：xslt, xslt-2.0

我有一个外部设置文件，其中有一些节点保留主 xml 文档的属性值。如果属性值存在于设置文件中，我需要从 mian xml 文件中删除某些节点。

我的设置文件如下所示：

设置.xml

```
 <xml>
     <removenode titlename="abc" subtitlename="xyz"></removenode>
     <removenode titlename="dvd" subtitlename="dvd"></removenode>

 </xml> 
```

主.xml

```
<xml>
     <title titlename="abc">
         <subtitle subtitlename="xyz"></subtitle>
      </title>
      <title titlename="book">
          <subtitle subtitlename="book sub title"></subtitle>
      </title>
 </xml> 
```

如果在 main.xml 中找到 titlename 和 subtitlename，则需要一个查找 setting.xml 文件并删除 title 元素的脚本。输出应该是

输出.xml

```
 <xml>
      <title titlename="book">
          <subtitle subtitlename="book sub title"></subtitle>
      </title>
 </xml> 
```

我尝试使用文档来读取 setting.xml 文件，但无法找到如何在 main.xml 文件上进行匹配

```
 <xsl:variable name="SuppressionSettings" select="document('Setting.xml')" />
    <xsl:variable name="SuppressSetting" select="$SuppressionSettings/xml/removenode" /> 
```

.

任何提示如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:06:46.273

关键是使用身份/复制模式，并且在每次输出之前，检查当前（上下文）节点是否被抑制规则节点集禁止。

```
 <!-- get suppression settings -->
    <xsl:variable name='suppression_settings' select="document('http://www.mitya.co.uk/xmlp/settings.xml')/xml/removenode" />

    <!-- begin identity/copy -->

    <xsl:template match="node()|@*">
        <xsl:if test='not($suppression_settings[@titlename = current()/@titlename and @subtitlename = current()/subtitle/@subtitlename])'>
            <xsl:copy>
                <xsl:apply-templates select='node()|@*' />
            </xsl:copy>
        </xsl:if>
    </xsl:template> 
```

你可以在这里运行它（见输出源 - 'abc' 标题节点被省略）：

[http://www.xmlplayground.com/9oCYKp](http://www.xmlplayground.com/9oCYKp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:06:57.257

下面指出的这个 XSLT 适用于给定的文档。

请注意，我像您一样将*Setting.xml*的内容存储在一个变量中，但是，然后我将直接在我的查询中使用该变量。

这里的一个重要问题是，在`match`a 的元素中`template`，不能使用变量。因此，我的模板匹配任何`<title>`元素，然后在`<xsl:choose>`元素中确定属性是否匹配设置文件中给定的任何值 - 如果匹配，`<title>`则输出中将省略该元素。

作为解释为什么 中的那个`test`属性`<xsl:when>`做它应该做的事情，想象一个比较`someAttribute = someOtherAttribute`不是作为一个限制，*该属性`someAttribute`必须与该属性具有相同的值`someOtherAttribute`*，而是作为一个条件，*必须有任何两个属性`someAttribute`并且`someOtherAttribute`具有相同的值*。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="SuppressionSettings" select="document('Setting.xml')" />

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="//title">
        <xsl:choose>
            <xsl:when test="(@titlename = $SuppressionSettings/xml/removenode/@titlename) and (subtitle/@subtitlename = $SuppressionSettings/xml/removenode/@subtitlename)"/>
            <xsl:otherwise>
                <xsl:copy>
                    <xsl:apply-templates select="node()|@*"/>
                </xsl:copy>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:16:49.653

这是一个更通用的答案，其中属性的名称没有硬编码到 XSLT 中。就像 OR Mapper 指出的那样，在 XSLT 1.0 中，您不能在 中使用变量引用`match`，所以我将`document()`直接放在谓词中。这可能不如使用变量然后测试变量那么有效。

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@* = document('setting.xml')/*/removenode/@*]"/>

</xsl:stylesheet> 
```

**XML 输出**（使用带有 main.xml 作为输入的 2 个 xml 文件）

```
<xml>
   <title titlename="book">
      <subtitle subtitlename="book sub title"/>
   </title>
</xml> 
```

# iframe - 如何修复 w3.org 验证错误：没有属性“sid”或未定义元素“iframe”？

> ID：11055672
> 
> 赞同：1
> 
> 时间：2012-06-15T17:42:21.723
> 
> 标签：iframe, xhtml-1.0-strict, sid

我试图在这里验证别人的代码，他们正在使用**xhtml1-strict** DOCTYPE。

我快到了；除了一些错误...

*   没有属性“sid”
*   元素“iframe”未定义

对于 SID 属性问题，这就是他们所拥有的：

```
 <li class="drop" sid="nav_products"> <span class="head">Our Products</span>
    <ul id="nav_products" style="display: none;">

      <li><a href="/products/itemNumOne.php">Toys</a></li>

      <li><a href="/products/itemNumTwo.php">Tools</a></li>

      <li><a href="/products/itemNumThree.php">Beauty</a></li>

      <li><a href="/products/itemNumFour.php">Electronics</a></li>

    </ul>
    </li> 
```

由于 IFRAME 错误，我还收到了另外 2 个错误：

*   没有属性“src”
*   没有属性“风格”

    ```
    <h2>Read The Latest News</h2>
    <iframe src="http://p.p0.com/YesConnect/HtmlMessagePreview?a=TiTnp" style="width:100%; height:4350px; border-collapse:collapse; border:1px solid #ccc; padding:10px 0 0"></iframe> 
    ```

任何人都可以**帮**我解决这些错误吗？我不是这方面的专家，所以你必须解释一下解决方案。非常感谢您的时间和帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:10:22.820

好的，所以我在谷歌上搜索解决方案，发现这个网站回答了我在**iframe上的问题**

*   [http://madskristensen.net/post/Use-iframes-with-XHTML-10-Strict.aspx](http://madskristensen.net/post/Use-iframes-with-XHTML-10-Strict.aspx)

因此，我最终将该页面的 DOCTYPE 从“XHTML 1.0 Strict”更改为“XHTML 1.0 Transitional”，并修复了我使用 iframe 时遇到的所有 3 个错误。希望此信息对某人有所帮助:)

但是，我仍然坚持**sid**的错误，任何帮助将不胜感激！

**更新：** 这个答案已经快 6 年了，看起来从那以后几乎没有什么改变：P 正如**Davide Andrea**所指出的，上面的链接不再有效，你们中的一些人可能会觉得这个答案很有帮助：[https:// stackoverflow.com/a/8265544/1081016](https://stackoverflow.com/a/8265544/1081016)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:15:44.183

要问的问题可能是为什么以前的开发人员首先使用“sid”。据我所知，属性“sid”永远不会在任何 XHTML doctype 中验证，因此最好将其更改为“class”或“id”，然后相应地更改依赖“sid”的代码。

# database - 不同级别的用户对 SQLIte Db 文件的访问权限

> ID：11055673
> 
> 赞同：0
> 
> 时间：2012-06-15T17:42:22.027
> 
> 标签：database, sqlite

我知道 SQLite 不支持设置不同的用户。我有一个要求，我需要阻止某些用户对 SQLite DB 执行 INSERTS/UPDATES。由于 SQLite 没有任何 GRANT/REVOKE 命令，除了更改文件权限外，还有其他方法可以设置对 DB 文件的不同访问级别。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:28:11.757

没有内置在sqlite中，没有。

但是，您可以编写自己的访问控制。许多网络项目就是这种模式的一个例子。他们定期对数据库本身包含的用户记录进行身份验证。

# django - django 查询：如何使用模型查询 API 查找具有相同参数的课程

> ID：11055675
> 
> 赞同：0
> 
> 时间：2012-06-15T17:42:31.590
> 
> 标签：django, django-queryset

我有以下课程模型，我想找到每节课之前或之后（少于 15 分钟）的每节课，其语言、房间和老师都相同

```
class Lesson(models.Model):
      room = models.ForeignKey(Room, null=True, blank = True)
      language = models.ForeignKey(Lnaguage)
      teacher = models.ForeignKey(Teacher, null=True, blank = True)
      start = models.TimeField()
      end = models.TimeField()
      date = models.DateField() 
```

这可能使用 django 的模型查询 API 吗？如果是，我怎样才能找到这些课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:27:47.043

是的，您可以使用`Q`它来创建查询，`AND`并且`OR`

考虑到您手头有课程数据，

```
lesson = Lesson.objects.get(id=......) 
```

比

```
from django.db.models. import Q
from datetime import timedelta

filtered_lessons = Lesson.objects.filter( (Q(start__lt=lesson.end+timedelta(minutes=15)) | Q(end__gt=lesson.start-timedelta(minutes=15)))) # define time criteria using OR

filtered_lessons.filter(date=lesson.date, room=lesson.room, teacher=lesson.teacher, language=lesson.language) #apply the other filters 
```

当然，您可以使用单条语句作为连接两个查询。你也可以`&`像这样使用

```
filtered_lessons = Lesson.objects.filter( Q(Q(start__lt=lesson.end+timedelta(minutes=15)) | Q(end__gt=lesson.start-timedelta(minutes=15))) & Q(teaher=lesson.teacher) &Q(....) & Q(....)) 
```

[这是](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)复杂查找参数的文档...

# php - 查询不更新数据库

> ID：11055678
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:42:42.947
> 
> 标签：php, mysql, sql

当我执行此代码以加载图像并存储在数据库中时，它不会存储。

```
$image=$_POST['image'];

$img = $_FILES['image']['name'];

if($img)
{
    $imgnew = date("YmdHis").".".end(explode('.',$img));
    move_uploaded_file($_FILES['image']['tmp_name'],$img_src.$imgnew);
    $sql = "UPDATE news SET `image` = '".$imgnew."' WHERE `id` = '".$id."'";
    $result = mysql_query($sql);                  
} 
```

**我的表格代码是**

```
<input type="file" name="image" value="<?php echo $row['image']; ?>" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:44:19.487

1.  `exit()`您在执行查询之前调用
2.  有一个额外的括号（这可能只是一个错字或其他问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:57:47.260

检查为您“做”某事的函数的结果很重要。你想确保它确实完成了，然后再假设这样做。两者都`move_uploaded_file`可能`mysql_query` *失败*。

如果他们这样做了，他们会告诉你他们的返回值（通常是布尔值 FALSE）。捕获返回并做出适当的反应。然后，如果出现问题，您不必费力地找出原因！

```
$img_src = '/assuming/some/path/';
$img = false;
$error = false;
if (
    isset($_FILES['image']) && 
    $_FILES['image']['error'] != 4
) {
    $img = $_FILES['image'];
    switch ($img['error']) {
        case '1':
        case '2':
        case '3':
            $error = 'The uploaded file exceeds the maximum file size.';
            break;
        case '6':
        case '7':
        case '8':
            $error = 'Server error.  Please try again later.';
            break;
    }
    if (!$error) {
        $imgnew = date("YmdHis").".".end(explode('.',$img['name']));
        $result = move_uploaded_file($img['tmp_name'],$img_src.$imgnew);
        if (!$result)
            $error = 'File error while processing upload';
    }
    if (!$error) {
        $sql = "UPDATE news SET `image` = '".$imgnew."' WHERE `id` = '".$id."'";
        $result = mysql_query($sql);
        if (!$result)
            $error = mysql_error();
    }
}

// do something useful with the error message, preferrably not this
if ($img && $error)
die('There was a problem updating the image: '.$error); 
```

**文档**

PHP `move_uploaded_file`- [http://us2.php.net/manual/en/function.move-uploaded-file.php](http://us2.php.net/manual/en/function.move-uploaded-file.php)

PHP `mysql_query`- [http://us2.php.net/manual/en/function.mysql-query.php](http://us2.php.net/manual/en/function.mysql-query.php)

# sql - 将数据从一列复制到另一列以生成报告

> ID：11055684
> 
> 赞同：0
> 
> 时间：2012-06-15T17:43:18.343
> 
> 标签：sql, sql-server

我有一张桌子`MIS_Details`；它有以下列：

*   Cheque_status
*   检查退回日期
*   Policy_status_change_date

我正在使用选择查询在 Excel 中创建报告。

我的要求如下：如果检查状态列有值`'Cheque Bounce'`，我需要将该记录的检查退回日期复制到`Policy_status_change_date`但不更新数据库中的表。

这只是为了显示在报告中，所以我不能使用更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:55:34.637

通常，您应该能够使用 case 语句来查看`cheque status`列中的值是否与您的文本匹配，如果是，则使用退回日期作为`Policy_status_change_date`列的值（语法可能因提供的数据库类型而异你的数据）。

```
SELECT 
   ChequeStatus
   ,ChequeBounceDate
   ,CASE 
      WHEN ChequeStatus = 'Cheque Bounce'
         THEN ChequeBounceDate
      ELSE Policy_status_change_date
   END AS Policy_status_change_date
FROM 
   MIS_Details 
```

此外，在设计说明中，您可能希望将可能的状态存储在另一个表中，以便您只使用状态 ID 而不是实际文本进行比较 - 如果您想稍后更改状态文本，您不必更新所有查询。

# vba - 为什么 VBA 中的 VLookup 失败并出现运行时错误 1004？

> ID：11055687
> 
> 赞同：2
> 
> 时间：2012-06-15T17:43:25.130
> 
> 标签：vba, excel-2007, vlookup

电子表格“Sheet3”如下所示：

```
 S&P 500         DJIA

 1/1/1991   795.4476    2973.09

 1/2/1991   786.3856    2947.1

  1/3/1991  775.4636    2905.19

  1/4/1991  773.5364    2896.8

  1/7/1991  760.2996    2847.9

  1/8/1991  759.0029    2832.81

  1/9/1991  750.8416    2788.67

  1/10/1991 758.1719    2820.8 
```

此外，单元格“F2”实际上是 1/7/1991 单元格的复制和粘贴。

VBA 代码如下所示：

```
Sub badlook3()

Dim BenchSI As Variant
Dim BRange As Range
Dim SIDate As Date

Set BRange = Worksheets("Sheet3").Range("A2:C9")  

MsgBox BRange.Address

SIDate = Worksheets("Sheet3").Range("F2").Value

BenchSI = Application.WorksheetFunction.VLookup(SIDate, BRange, 2, True)

End Sub 
```

我收到“无法获取 WorkSheet 函数类的 VLOOKUP 属性”错误。

我在这里想念什么？A 列的顺序正确。它们是日期。Excel 想从我这里得到什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:33:10.933

问题在于使用 SIDate 作为日期（Visual Basic 日期类型）
我的猜测是 Visual Basic 日期类型和 excel 日期类型不匹配，这就是你收到错误的原因

而是将 SIDate 声明为**Range**，它将起作用

这是代码：

```
Sub badlook3()

   Dim BenchSI As Variant 
   Dim BRange As Range 
   Dim SIDate As Range

   Set BRange = Worksheets("Sheet3").Range("A2:C9")      
   MsgBox BRange.Address

   Set SIDate = Worksheets("Sheet3").Range("F2")    
   BenchSI = Application.WorksheetFunction.VLookup(SIDate, BRange, 2, True)

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:50:31.477

您要求 vLookup 针对 1 列范围返回 2 列范围。更改 BRange = "A2:B9" 以使您的 vLookup 获取 S&P 值。

或者，您可以将范围更改为 A2:C9 并将 vLookup 中的 2 更改为 3 并获得 DJ 平均值。

简而言之，vLookup 只能返回对一个范围内最大数量的列的列引用。它可以返回 3 列范围内的第 1、2、0r 第 3 列引用，但不能返回第 4 列，因为没有第 4 列。

# php - 从动态表单过帐（多行）

> ID：11055690
> 
> 赞同：1
> 
> 时间：2012-06-15T17:43:41.747
> 
> 标签：php, mysql, insert

我有一个表单，可以动态（添加-删除）创建最多七个表单行（字段）。每个附加的表格行都有一个附加的数字（即：name="product" 接下来是 name="product2".. "Product3" 等）。所以我想我会用 isset 查看发布的内容，只插入发布的内容，但我缺乏技能导致这不起作用。请参阅下面的代码：

```
 mysql_select_db("inventory", $con);

    $sql="INSERT INTO shipped (id, type, client, product, color, quantity)
    VALUES ('$_POST[productid]','$_POST[type]','$_POST[client]','$_POST[product]','$_POST[color]','$_POST[quantity]')";
    if( isset($_POST['productid2']) ) {
    "INSERT INTO shipped (id, type, client, product, color, quantity)
    VALUES ('$_POST[productid2]','$_POST[type2]','$_POST[client2]','$_POST[product2]','$_POST[color2]','$_POST[quantity2]')";
    } 
```

我计划只为每个产品添加“isset”，但事实证明这只会插入一组帖子值，而不是两者。我将有多达 product7 （所以最多七个插入）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:57:52.107

您将在输入字段中使用数组

```
<input type="text" name="productid[]" />
<input type="text" name="type[]" />
<input type="text" name="client[]" />
<input type="text" name="product[]" />
<input type="text" name="color[]" />
<input type="text" name="quantity[]" /> 
```

在服务器端：

```
foreach($_POST['product'] as $k => $v){
   $sql="INSERT INTO shipped (id, type, client, product, color, quantity) VALUES 
       ($_POST['productid'][$k],$_POST['type'][$k],$_POST[client][$k]','$v','$_POST[color][$k]','$_POST[quantity][$k]')";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:13:03.260

好的，所以我确实喜欢另一个答案，因为它似乎比我最终使用的解决方案优雅得多 - 但事实是另一个答案不起作用。所以我的解决方案只是检查是否设置了下一个表单字段集，如果是，它会显示正确的插入。请参阅此处的第一部分：

```
mysql_select_db("inventory", $con);

if( !isset($_POST['productid2']) ) {
$sql="INSERT INTO shipped (id, type, client, product, color, quantity)
VALUES ('$_POST[productid]','$_POST[type]','$_POST[client]','$_POST[product]','$_POST[color]','$_POST[quantity]')";
}

if( isset($_POST['productid2']) ) {
$sql="INSERT INTO shipped (id, type, client, product, color, quantity)
VALUES ('$_POST[productid]','$_POST[type]','$_POST[client]','$_POST[product]','$_POST[color]','$_POST[quantity]'),
('$_POST[productid2]','$_POST[type2]','$_POST[client2]','$_POST[product2]','$_POST[color2]','$_POST[quantity2]')";
}

if( isset($_POST['productid3']) ) {
$sql="INSERT INTO shipped (id, type, client, product, color, quantity)
VALUES ('$_POST[productid]','$_POST[type]','$_POST[client]','$_POST[product]','$_POST[color]','$_POST[quantity]'),
('$_POST[productid2]','$_POST[type2]','$_POST[client2]','$_POST[product2]','$_POST[color2]','$_POST[quantity2]'),
('$_POST[productid3]','$_POST[type3]','$_POST[client3]','$_POST[product3]','$_POST[color3]','$_POST[quantity3]')";
} 
```

像这样再四次......每次都添加其他值。这对我有用，因为我的表单字段最多只能添加七次，所以它不需要是无限的。因此，如果您只允许添加少量表单字段，这将运作良好。

# c++ - 需要一个轻量级的 C++ 模板引擎

> ID：11055693
> 
> 赞同：15
> 
> 时间：2012-06-15T17:43:48.817
> 
> 标签：c++, template-engine

我需要一个非常轻量级、快速的 C++ 模板引擎。我一直在测试 CTemplate，它符合我的需求，但速度有点慢。我已经查看了该站点上推荐的许多其他模板引擎，但其中大多数都比 CTemplate 更复杂，我正在寻找相反的东西。我真正需要的是简单的文本替换，但更喜欢使用现有的引擎。我还需要一个宽松的许可证，最好是 MIT 或 BSD。

编辑：查看了以下内容：ClearSilver、Teng、Templatizer、CTPP（这对我来说有点复杂......我对 C++ 和 linux 开发环境很陌生）qctemplate 等等，只需要尝试记住它们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-20T09:06:58.773

创建了一个，因为我也不喜欢将 boost 作为依赖项:-)

[https://github.com/hughperkins/Jinja2CppLight](https://github.com/hughperkins/Jinja2CppLight)

*   使用 Jinja2 语法
*   支持变量替换和for循环
*   可以嵌套for循环:-)
*   零依赖，只有 C++ 和标准库 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T11:34:21.013

您可以尝试[syslandscape-tmpl](https://github.com/syslandscape/syslandscape/blob/master/doc/tmpl/README.md)。

项目为 C++ 提供灵活而强大的模板引擎。

树状数据结构用于存储模板变量。变量可以是 int、string、list 或 object。

**特征**

*   变量
*   for 循环和嵌套 for 循环
*   if 和嵌套 if
*   包括其他模板

**要求**

C++11

**模板存储**

目前引擎只支持模板`string`和`file`存储。

**例子**

```
#include <iostream>
#include <memory>
#include <syslandscape/tmpl/data.h>
#include <syslandscape/tmpl/engine.h>
#include <syslandscape/tmpl/string_storage.h>

using syslandscape::tmpl::data;
using syslandscape::tmpl::engine;
using syslandscape::tmpl::storage;
using syslandscape::tmpl::string_storage;

int main()
{
  std::shared_ptr<string_storage> storage = std::make_shared<string_storage>();

  storage->put_template("/greetings.html", "Hello, I'm {$person.name}.");
  storage->put_template("/city.html", "I'm from {$person.city}.");
  storage->put_template("/age.html", "I'm {$person.age} years old.");
  storage->put_template("/examples.html", "\n{$message}: "
                        "{% for item in data %}{$item}{%endfor%}");
  storage->put_template("/index.html",
                        "{%include /greetings.html%} "
                        "{%include /city.html%} "
                        "{%include /age.html%} "
                        "{%include /examples.html%}");

  engine e;
  e.set_storage(storage);

  data model;
  model["person"]["name"] = "Alex";
  model["person"]["city"] = "Montana";
  model["person"]["age"] = 3;
  model["message"] = "List example";
  model["data"].append("Answer is");
  model["data"].append(" 42");

  std::cout << e.process("/index.html", model) << std::endl;

  return 0;
} 
```

# java - 写入文件而不覆盖或附加

> ID：11055695
> 
> 赞同：0
> 
> 时间：2012-06-15T17:43:52.890
> 
> 标签：java, file, append, overwrite

我正在用 Java 编写一个程序，其中输出被写入 .txt 文件。每次我运行程序时，文件都会被覆盖。我不想使用附加开关并将数据添加到文件中。

我想要它，所以每次运行程序时都会创建一个同名的新文件。例如，如果`overflow.txt`是文件名，我运行程序3次，文件，，，`overflow(1).txt`和`overflow(2).txt`应该`overflow(3).txt`被制作。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T17:46:31.527

检查文件是否存在，如果存在则重命名。使用`File.exists`和`FileUtils.moveFile`

您需要递归地执行此操作，直到没有发现冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T17:48:42.430

首先检查文件是否存在。如果是，请修改名称。

```
String origName = "overflow";
String ext = ".txt";
int num = 1;
file = new File(origName + ext);
while (file.exists()) {
 num++;
 file = new File(myOrigFileName +"(" + num + ")" + ext);
} 
```

根据实际需要进行修改。问题不是很清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T17:46:11.420

“具有相同名称的新文件”在大多数文件系统中没有意义。

在您的示例中，您有三个具有*不同*名称的文件：

*   溢出（1）.txt
*   溢出(2).txt
*   溢出(3).txt

括号中的位仍然是名称的一部分。如果你想模仿这种行为，你必须：

*   检测“普通”文件名的存在（如果你想写入它，如果它不存在）
*   从 1 开始计数，每次通过删除扩展名计算“​​新”文件名，将计数添加到括号中，然后将扩展名放回去
*   继续计数，直到找到不存在的文件名

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T17:49:13.320

```
String dirPath = "./";
String fileName = dirPath + "overflow.txt";
if(new File(dirPath + fileName).exist())
{
    int counter = 0;
    while(new File(dirPath + "overflow(" + ++counter + ").txt").exist());
    fileName = "overflow(" + counter + ").txt";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T17:47:04.913

当您实例化 File 对象时，验证它是否存在，如果存在，只需通过添加大括号和数字来重命名它，然后再次检查。

# javascript - 如何从一个点选择给定半径内的所有元素？

> ID：11055696
> 
> 赞同：2
> 
> 时间：2012-06-15T17:43:53.183
> 
> 标签：javascript, jquery, jquery-selectors, geometry

使用[jQuery Nearest Element](https://github.com/gilmoreorless/jquery-nearest)，我想在特定点周围的圆形区域中选择元素。这是我能得到的最接近的：http: [//jsfiddle.net/fuYHv/](http://jsfiddle.net/fuYHv/)。如果可能的话，我也希望能够获得反向​​选择。如果我列出的插件和方法无法做到这一点，我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:54:00.073

你想要的是接近：

[https://github.com/padolsey/jQuery-Plugins/tree/master/proximity-event](https://github.com/padolsey/jQuery-Plugins/tree/master/proximity-event)

我让你的小提琴工作了，事实证明这个`max: radius`语句没有做直观的事情，所以你必须专门检查事件中每个调用的距离。但它工作得很好：

[http://jsfiddle.net/fuYHv/12/](http://jsfiddle.net/fuYHv/12/)

```
$(selector + ' span').bind('proximity', {max: radius}, function (event, proximity, distance) {
    $(this).css('color', distance <= radius ? '#f00' : '#000');
}); 
```

对于更好和更优化的解决方案，请参阅原始海报的小提琴：http: [//jsfiddle.net/fuYHv/14/](http://jsfiddle.net/fuYHv/14/)

# salesforce - Visualforce 页面未执行操作

> ID：11055698
> 
> 赞同：0
> 
> 时间：2012-06-15T17:44:00.740
> 
> 标签：salesforce, visualforce

我对visualforce / salesforce很陌生，我是一个可怕的初学者，所以请原谅我可能很容易遇到的问题。

我正在创建一个页面来跟踪会议预算。基本上，用户在一个字段中输入多少作为预算设置，在下一个字段中输入实际成本，然后在第三个字段中 SF/VF 应该计算 2 个数字并显示差异。我设置了字段（正确地我相信这很容易）并设置了一个页面。现在，当您在字段中输入信息并单击保存时，没有任何反应。

这一切都在我的脑海中，我试图在文学中找到答案，但运气不佳。

这是代码：

```
 <apex:page standardController="Conference__c" sidebar="true"> 
    <apex:sectionHeader title="Conference Budget" subtitle="{!Conference__c.name}"/> 
        <apex:form > 
          <apex:pageBlock title="Conference Budget" id="thePageBlock" mode="edit"> 
            <apex:pageBlockButtons > 
                    <apex:commandButton value="Save" action="{!save}"/> 
                    <apex:commandButton value="Cancel" action="{!cancel}"/>                 
            </apex:pageBlockButtons> 
             <apex:actionRegion >
 <apex:pageBlocksection title="Conference Budget"> 
            <apex:panelGrid columns="4" width="400px" cellspacing="5px">                

                <apex:outputText value="Item" id="Item"/>
                <apex:outputText value="Budgeted" id="Budgeted"/>
                <apex:outputText value="Actual" id="Actual"/>
                <apex:outputText value="Difference" id="Difference"/>

                <apex:outputText value="Advertising" id="advertising"/>
                <apex:inputField value="{!Conference__c.Advertising_b__c}"/>
                <apex:inputField value="{!Conference__c.Advertising_a__c}"/>
                <apex:inputField value="{!Conference__c.Advertising_d__c}"/> 
<apex:outputText value="Totals" id="totals"/>
                <apex:inputField value="{!Conference__c.Total_Cost_b__c}"/>
                <apex:inputField value="{!Conference__c.Total_Cost_a__c}"/>
                <apex:inputField value="{!Conference__c.Total_Cost_d__c}"/>

                <apex:actionStatus startText="applying value..." id="status"/>

                </apex:panelGrid>
              </apex:pageBlocksection> 
                              </apex:actionRegion>

      </apex:pageBlock> 
 </apex:form> 
 </apex:page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:13:32.180

要意识到的主要事情是 Salesforce（除非您设置了某种类型的工作流）不会自动计算这些字段。此外，仅在操作区域内保存记录不会保存记录、重新加载并再次显示页面。据我所知，保存会将用户重定向到记录详细信息页面。

对于这个简单的计算，如果你想在保存记录*之前*计算 ti ，我会使用一些简单的**javascript**：

```
<apex:page standardController="Conference__c" sidebar="true">
  <!-- I use JQUERY because Salesforce IDs are very difficult to utilize in standard JS -->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
  <script type="text/javascript">
    var $j = jQuery.noConflict(); // SFDC uses $ so we need to assign jQuery to something else
    function recalcAd() {
      try{
        var budget =  parseFloat( $j("input[id$='ad-b']").val() );
        var actual =  parseFloat( $j("input[id$='ad-a']").val() );
        $j("input[id$='ad-d']").val(budget - actual);
      } catch (e) {
        $j("input[id$='ad-d']").val("");
      }
    }
    function recalcTot() {
      try{
        var budget =  parseFloat( $j("input[id$='tot-b']").val() );
        var actual =  parseFloat( $j("input[id$='tot-a']").val() );
        $j("input[id$='tot-d']").val(budget - actual);
      } catch (e) {
        $j("input[id$='tot-d']").val("");
      }
    }
  </script>
  <apex:sectionHeader title="Conference Budget" subtitle="{!Conference__c.name}"/> 
    <apex:form > 
      <apex:pageBlock title="Conference Budget" id="thePageBlock" mode="edit"> 
      <apex:pageBlockButtons > 
          <apex:commandButton value="Save" action="{!save}"/> 
          <apex:commandButton value="Cancel" action="{!cancel}"/>         
      </apex:pageBlockButtons> 
      <apex:pageBlocksection title="Conference Budget"> 
        <apex:panelGrid columns="4" width="400px" cellspacing="5px"> 
          <apex:outputText value="Item" id="Item"/>
          <apex:outputText value="Budgeted" id="Budgeted"/>
          <apex:outputText value="Actual" id="Actual"/>
          <apex:outputText value="Difference" id="Difference"/>
          <apex:outputText value="Advertising" id="advertising"/>
          <apex:inputField id="ad-b" value="{!Conference__c.Advertising_b__c}" onChange="recalcAd(); return true;"/>
          <apex:inputField id="ad-a" value="{!Conference__c.Advertising_a__c}" onChange="recalcAd(); return true;"/>
          <apex:inputField id="ad-d" value="{!Conference__c.Advertising_d__c}"/> 
          <apex:outputText value="Totals" id="totals"/>
          <apex:inputField id="tot-b" value="{!Conference__c.Total_Cost_b__c}" onChange="recalcTot(); return true;"/>
          <apex:inputField id="tot-a" value="{!Conference__c.Total_Cost_a__c}" onChange="recalcTot(); return true;"/>
          <apex:inputField id="tot-d" value="{!Conference__c.Total_Cost_d__c}"/>
        </apex:panelGrid>
      </apex:pageBlocksection> 
    </apex:pageBlock> 
 </apex:form> 
 </apex:page> 
```

在代码中，我添加了一些脚本来重新计算总数，并删除了似乎不必要的动作区域。我无法对其进行测试（因为我的帐户中没有设置该对象），但我认为它应该适合您。

# php - Amazon SES 错误：缺少必需的标头“收件人”

> ID：11055701
> 
> 赞同：4
> 
> 时间：2012-06-15T17:44:10.757
> 
> 标签：php, email, send, amazon-ses

我是 Amazon SES 的新手，我正在尝试使用以下代码发送电子邮件：

```
<?php
    require_once 'aws/sdk.class.php';

    $ses = new AmazonSES();
    $to = array('ToAddress' => 'mario@wowfi.com');
    $content = array('Subject.Data' => 'Tema', 'Body.Text.Data' => 'hello');
    $r = $ses->send_email("mario@wowfi.com", $to , $content);
    print_r($r);
?> 
```

在输出中它说：缺少必需的标题“To”，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T20:34:05.217

我已经解决了，我的代码中有两个问题：

1.  索引“ToAddress”不正确，它必须是复数“ToAddresses”。
2.  它的值必须是这样的数组：array('mario@wowfi.com')

# sql - 简化查询以缩短执行时间

> ID：11055703
> 
> 赞同：-2
> 
> 时间：2012-06-15T17:44:22.910
> 
> 标签：sql, sql-server, sql-server-2008

我想知道以下查询是否优化？

```
 select 
  SUM(payments.paid_amt) as paid_amt, 
  SUM(payments.copay_amt) as copay_amt,
  SUM(payments.CO_INSURANCE_AMT) as co_ins_amt,
  payor_group.PAYOR_GROUP as payor_group,
  DATEPART(MM,accession.XIFIN_LOAD_DATE) as load_month,
  DATEPART(yyyy,accession.XIFIN_LOAD_DATE) as load_year

  from 
  [F_PAYOR_PAYMENTS_monthly] payments

  join D_PAYOR payor
  on payor.PAYOR_ID=payments.PAYMENT_PAYOR_ID

  join D_PAYOR_GROUP payor_group
  on payor.PAYOR_GROUP_KEY=payor_group.PAYOR_GROUP_KEY

  join F_ACCESSION_DAILY accession
  on accession.ACCESSION_ID=payments.ACCESSION_ID

  group by  payor_group.PAYOR_GROUP, DATEPART(MM,accession.XIFIN_LOAD_DATE),
  DATEPART(yyyy,accession.XIFIN_LOAD_DATE) 
```

它现在已经执行了大约 1.5 小时。还没有任何表上的索引！

每个表大约有 10,000,000 行。

有什么办法可以简化此查询以提高执行时间？

非常感谢您的指导和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:50:43.010

每个有 10m 行的表上没有索引很可能会影响您的性能。任何运行一个小时的查询都没有优化，需要注意。大多数查询应该在几秒钟内运行。

我建议开始在您的关键列上添加索引（payor.payor_id、payments.payment_payor_id、payor.payor_group_key、paygor_group.payor_group_key、payments.accession_id）。之后，尝试在启用“包括实际执行计划”选项的 SSMS 中运行您的查询（在查询文件菜单下）。运行您的查询，它会向您建议其他索引，您应该考虑应用这些索引。

您的表是否承受其他进程的大量负载？他们是否接受大量传入数据？

在您将重点放在更改查询语法或进行任何“其他”优化之前，您需要应用索引。在您放入索引并以正常速率（<1 分钟）执行查询后，您可以查看额外的索引调整或在需要时添加表/查询提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:04:07.773

在您的第一个查询中，您分组依据`accession.XIFIN_LOAD_DATE`而不是该日期的月/年，这就是您需要第二个分组依据的原因。如果你解决了这个问题，那么它只是一个查询。这应该会提高性能，但索引将是最大的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:09:41.227

为什么要使用 With 呢？

```
 select 
  SUM(payments.paid_amt) as paid_amt, 
  SUM(payments.copay_amt) as copay_amt,
  SUM(payments.CO_INSURANCE_AMT) as co_ins_amt,
  payor_group.PAYOR_GROUP as payor_group,
  DATEPART(MM,accession.XIFIN_LOAD_DATE) as load_month,
  DATEPART(yyyy,accession.XIFIN_LOAD_DATE) as load_year

  from 
  [F_PAYOR_PAYMENTS_monthly] payments

  join D_PAYOR payor
  on payor.PAYOR_ID=payments.PAYMENT_PAYOR_ID

  join D_PAYOR_GROUP payor_group
  on payor.PAYOR_GROUP_KEY=payor_group.PAYOR_GROUP_KEY

  join F_ACCESSION_MONTHLY accession
  on accession.ACCESSION_ID=payments.ACCESSION_ID

  group by  payor_group.PAYOR_GROUP, DATEPART(MM,accession.XIFIN_LOAD_DATE),
  DATEPART(yyyy,accession.XIFIN_LOAD_DATE) 
```

# jquery - jQuery init() 函数。

> ID：11055704
> 
> 赞同：0
> 
> 时间：2012-06-15T17:22:48.580
> 
> 标签：jquery, wordpress

有没有办法强制小部件在一个'$（document）.ready（）'中输出jquery init（）函数？
它应该如下所示：

```
$(document).ready(function($) {
     $('.style1').plugin1Init();
     $('.style2').plugin2Init();
     $('.style3').plugin3Init();
}); 
```

我问是因为我正在尝试加快我的 wordpress 主题。我有几个小部件在 $(document).ready() 函数中输出 jquery 代码。

[根据Jquery 速度测试](http://jsperf.com/docready/3)，三个 '$(document).ready()' 函数将页面加载速度降低了近三倍

当我使用 3 个小部件时，页面上的示例代码：

```
$(document).ready(function($) {
     $('.style1').plugin1Init();
});

$(document).ready(function($) {
     $('.style2').plugin2Init();
});

$(document).ready(function($) {
     $('.style3').plugin3Init();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:45:25.643

您可以调用`$(document).ready(function($) {`一次

看：

```
$(document).ready(function($) {
    $('.style1').plugin1Init();
    $('.style2').plugin2Init();
    $('.style3').plugin3Init();
}); 
```

# sql - 将 XML 转换为选择

> ID：11055711
> 
> 赞同：0
> 
> 时间：2012-06-15T17:44:58.987
> 
> 标签：sql, xml

我正在尝试将此 XML 字符串转换为选择

我有@Schedule XML = '<days><day enabled="0">0</day><day enabled="1">1</day><day enabled="1">2</day>< day enabled="1">3</day><day enabled="1">4</day><day enabled="1">5</day><day enabled="0">6</day ></天>'

最后我想看到的是..

DayNumber DayEnabled
0 0
1 1
2 1
3 1
4 1
5 1
6 0

我尝试了几种方法，到目前为止没有任何工作正常..我将其作为 XML 数据类型处理，我不想使用函数，因为这将只是在存储过程中..

更新：也许我没有正确解释..我有一个存储过程，XML是传递给它的参数之一，我需要将它发送到要插入的表中，所以我正在尝试执行以下操作。 .

插入 tblDays (DayNumber, DayEnabled)
SELECT @XMLParsedOrTempTableWithResults

我只是不知道如何解析参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:23:06.377

```
DECLARE @myXML as XML = '<days><day enabled="0">0</day><day enabled="1">1</day><day      enabled="1">2</day><day enabled="1">3</day><day enabled="1">4</day><day enabled="1">5</day><day enabled="0">6</day></days>'

DECLARE @XMLDataTable table
(
DayNumber int
,DayEnabled int
)

INSERT INTO @XMLDataTable
SELECT d.value('text()[1]','int') AS [DayNumber]
,d.value('(@enabled)[1]','int') AS [DayEnabled]
FROM @myXML.nodes('/days/*') ds(d)

SELECT * FROM @XMLDataTable 
```

参考：

[http://beyondrelational.com/modules/2/blogs/28/posts/10279/xquery-labs-a-collection-of-xquery-sample-scripts.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10279/xquery-labs-a-collection-of-xquery-sample-scripts.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:48:04.977

XMLTABLE 函数是大多数支持 XML 的 DBMS 将 XML 文档分解为关系结果集的方式。

此示例使用 DB2 的 XMLTABLE 语法和传递到存储过程的输入参数：

```
INSERT INTO tblDays (DayNumber, DayEnabled)
SELECT X.* FROM 
    XMLTABLE ('$d/days/day' PASSING XMLPARSE( DOCUMENT SPinputParm ) as "d" 
        COLUMNS 
           dayNumber  INTEGER  PATH '.',
           dayEnabled SMALLINT PATH '@enabled'
    ) AS X
; 
```

# javascript - .click() 功能在同一页面上提交表单后停止工作

> ID：11055724
> 
> 赞同：0
> 
> 时间：2012-06-15T17:45:56.113
> 
> 标签：javascript, jquery, html

我有一个页面，其中有一个包含 10 个字段的表单，包括选择框、单选字段和文本框。它接受参数、查询数据库并在同一页面上打印结果。我还在同一页面上使用 $_POST[''] 来保留表单值而不会丢失它。

我有很多方法在这个页面中使用 .click 函数。在第一次提交之前，它们都可以正常工作。在第一次提交所有参数后，.click 函数停止工作。带有 .click 功能的 jquery 代码都不起作用。

这是否与服务器在同一页面上返回信息或我使用 $_POST[''] 保留表单信息的方式有关？

这是一段使用 .click 函数的代码。

```
 <!-- Clear form data after form submission -->
<script language="Javascript">
function resetForm($form) {
    alert("resetting form");
    $form.find('input:text, input:password, input:file, select, textarea').val('');
    $form.find('input:radio, input:checkbox')
    .removeAttr('checked').removeAttr('selected');
}
</script>

<script language="Javascript">
$(document).ready(function() {
$("#clear_form").click(function(){
    alert("clear form button clicked");
    resetForm($('#search_query'));
    });
});
</script> 
```

表格按以下方式提交。

```
<form method="POST" action="samepage.php" name="form1" id="formid" onsubmit="return validate_Form()">
# Bunch of text fields, select boxes, radio buttons,

<input type="submit" value="Submit" id="submit"> 
```

在页面的最开始我收集表单数据以在提交后自动填写表单字段以保留表单数据。

```
$x = $_POST['x']; 
```

如果表单提交成功（即通过所有表单验证），我会再次收集数据以查询数据库并在同一页面上打印结果。

```
$xx = $_POST['x] 
```

我有一个我写的自定义验证功能，它基本上只是检查字段是否为空，没什么特别的。它的设置方式是必须输入至少一个字段才能将表单提交到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:51:50.500

在对这个问题进行了更多研究之后，我终于找到了解决方案。

```
$('#buttonid').live('click', function () {

#Your code here 

}); 
```

我仍然需要了解为什么会这样。当我找到问题的根本原因时，我将重新编辑答案。

# ios5 - iOS在钥匙串中保存多个密码

> ID：11055731
> 
> 赞同：6
> 
> 时间：2012-06-15T17:46:07.067
> 
> 标签：ios5, keychain

我想在我的钥匙串中保存两个密码（一个应用密码和一个后端密码），我想知道这应该如何工作。
我正在使用带有不同标识符的 KeychainItemWrapper。

```
KeychainItemWrapper *kcw1 = [[KeychainItemWrapper alloc] initWithIdentifier:id1 accessGroup:nil];
KeychainItemWrapper *kcw2 = [[KeychainItemWrapper alloc] initWithIdentifier:id2 accessGroup:nil]; 
```

我正在使用其中一个来保存和检索应用程序或后端引脚。

我用 ：

```
[self.kcw1 setObject:aVerifyCode forKey:(__bridge id) kSecValueData]
[self.kcw2 setObject:aAppPin forKey:(__bridge id) kSecValueData] 
```

但它不起作用 - 结果是 -25299 - 指定的项目已存在于钥匙串中

那么如何在我的钥匙串中保存多个密码呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T18:39:14.880

好的，我想我知道问题所在了！KeychainItemWrapper 使用 kSecAttrGeneric 的标识符。
但这不是区分条目的方法。如果要保存两个帐户或两个密码

> kSecValueData

这将导致重复的整体出现错误（-25299）。
原因是，苹果钥匙串 api 使用

> kSecAttrAccount

和

> kSecAttrService

来区分条目。
所以你可以修改 keychainItemWraper 如果你想在这个[线程中显示](https://stackoverflow.com/questions/4891562/ios-keychain-services-only-specific-values-allowed-for-ksecattrgeneric-key)

# android - 无法将膨胀视图添加到自定义视图组

> ID：11055735
> 
> 赞同：2
> 
> 时间：2012-06-15T17:46:13.870
> 
> 标签：android, xml, view, inflate, viewgroup

我一直在尝试将视图从 xml 膨胀到它们相应的视图对象，然后将这些视图对象添加到编程的视图组中。但是，每当我调用 myviewgroup.addView(childview) 时，childview 似乎丢失了 xml 代码应该给它的所有按钮和东西。但是，子视图确实具有的一件事是我编写的背景颜色，以确保子视图具有正确的尺寸。子视图具有正确的尺寸，但其组件均不可见

```
 LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    viewchanger= new ViewChanger(this); //my viewgroup
    View mainmenu= inflater.inflate(R.layout.main, null); //the xml code
    mainmenu.setBackgroundColor(Color.rgb(0, 0, 255));
    viewchanger.addView(mainmenu);
    setContentView(viewchanger); 
```

上面的代码只是将我的屏幕背景设置为蓝色，但没有显示任何按钮。此外，当我 setContentView(mainmenu) 时，该 xml 代码以及背景颜色都会完美显示所有内容。这个视图组的重点是，我可以在多个视图中的任何一个之间切换，而不管它们作为子视图的顺序如何。

这是viewchanger的代码。我希望它有 7 个子视图，当我调用方法 setView(int v) 时，我希望所有其他视图都消失，我只希望那个视图可见。

```
public class ViewChanger extends ViewGroup{

/**Represent which view to show, only one can show at a time*/
public static final int MainMenu=0, ChooseMap=1, MapOptions=2, 
        SetLocation=3, view=4, EditMap=5, CreateMap=6;
private int current; //the current view
private View[] views= new View[7];

public ViewChanger(Context context) {
    super(context);
            //load 7 views into view array here
            //LayoutInflater inflater =    (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           /*views[0]= inflater.inflate(R.layout.main, null);
            * views[1]= inflater.inflate(R.layout.choose, null);
            * views[2]= inflater.inflate(R.layout.mapoptions, null);
        * views[0].setBackgroundColor(Color.rgb(255, 0, 0));
    * views[1].setBackgroundColor(Color.rgb(255, 255, 0));
    * views[2].setBackgroundColor(Color.rgb(0, 255, 0));*/
    * addView(views[0]);
    * addView(views[1]);
    * addView(views[2]);
            * this is how i want to load the childviews*/

}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    for(int i = 0; i < getChildCount(); i++){
                getChildAt(i).layout(0, 0, getWidth(), getHeight());
            }
}
    /**Sets the view of the view group, only one view can be viewed at a time*/
public void setView(int v){
            current=v;
    for (int i=0; i<views.length; i++){
        if (v==i){
            views[i].setVisibility(View.VISIBLE);
        } else{
            views[i].setVisibility(View.GONE);
        }
    }
} 
```

当我在 ViewChanger 构造函数中加载子视图时，视图组只显示我通过 setView(int v) 设置的任何视图的背景颜色，而不是按钮。

这是 main 的 xml 代码，但其他所有代码都与此非常相似：

```
 <?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:gravity="center"
   android:orientation="vertical" >

 <TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="The title"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 <TextView
    android:id="@+id/welcome"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Welcome [...]"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 <Button
    android:id="@+id/load"
    android:layout_width="122dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Load Map" />

 <Button
    android:id="@+id/create"
    android:layout_width="122dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Create Map" />

 <Button
    android:id="@+id/users"
    android:layout_width="122dp"
    android:layout_height="wrap_content"
    android:text="Other User" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T23:44:32.683

在对所有我能想到的东西进行了心理思考之后，我创建了一个与此相同的虚拟项目来检查几种可能性。出于某种原因，让 ViewChanger 从 FrameLayout 扩展而不是 ViewGroup 使得这项工作 - 很可能是因为 ViewGroup 缺少渲染它的子视图所需的东西（我尝试覆盖 onDraw，但它仍然没有工作）。由于您一次只显示一个视图 - 通常使用 FrameLayout - 我建议只进行此更改；这可能比隔离和修复 ViewGroup 中缺少的绘图功能要容易得多。

```
public class ViewChanger extends FrameLayout { 
```

应该是使原始设计（从构造函数添加视图）正常工作所需进行的唯一更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T06:37:11.653

我遇到了同样的问题，创建了一个自定义视图组，并在其中添加了一个线性布局视图组，但我看不到线性布局内容。我解决了在自定义 ViewGroup 中添加以下代码的问题：-

```
@Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            // TODO Auto-generated method stub
            final int count = getChildCount();
            for (int i = 0; i < count; i++) {
                childView = getChildAt(i);
                childView.measure(widthMeasureSpec, heightMeasureSpec);
            }
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:51:05.383

检查**FrameLayout 语句**。希望它有效。

```
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

viewchanger= new ViewChanger(this); //my viewgroup
View mainmenu= inflater.inflate(R.layout.main, null); //the xml code
mainmenu.setBackgroundColor(Color.rgb(0, 0, 255));
viewchanger.addView(mainmenu);
FrameLayout frameLayout = (FrameLayout) getWindow().getDecorView().findViewById(android.R.id.content);
frameLayout.addView(viewchanger); 
```

# javascript - 在 MVP 中如何创建复合视图？

> ID：11055737
> 
> 赞同：1
> 
> 时间：2012-06-15T17:46:26.953
> 
> 标签：javascript, mvp

我正在开发一个具有多个视图的应用程序。每个视图都由其他离散的可重用视图组件组成。

使用 MVP，如何创建子视图？父演示者很容易使用以下内容创建：

`var ParentPresenter = new ParentPresenter(model, parentView);`

但是在父演示者中，子视图或子视图是如何创建的？

我会在父演示者中实例化子视图演示者吗？要做到这一点，需要访问违反 MVP 的具体子视图实现，对吗？这不会让对我的演示者进行单元测试变得尴尬吗？

我已经阅读了许多文章、帖子和示例（主要是在 .NET 中），但我仍然没有“明白”。

此外，我在 JavaScript 中执行此操作（使用 Backbone），因此 JS 中的任何特定示例都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T12:43:24.867

在 .NET 中，我使用 IoC 容器来解决此问题：

SubPresenter 构造函数：

```
this.view = IoC.Resolve<ISubView>(); 
```

所以在应用中：

```
IoC.Register<ISubView, ConcreteSubView>(); 
```

在单元测试中：

```
IoC.Register<ISubView, MockSubView>(); 
```

我不了解 JS，但您可以查看此线程关于[JS 的 IoC 框架](https://stackoverflow.com/questions/1425086/are-there-any-inversion-of-control-frameworks-for-javascript)。

# php - 上传图片到会员区，需管理员批准

> ID：11055748
> 
> 赞同：-2
> 
> 时间：2012-06-15T17:47:27.207
> 
> 标签：php, image-processing, image-uploading

我正在尝试使用 php 创建一个成员站点，他们可以在其中上传图像（动态创建缩略图）和评论，供所有成员查看。我希望只有在管理员批准后才能发布所有上传。

我可以做很多这样的事情（注册、登录，甚至是基本的上传），但如果有人能提供任何课程或视频的链接来说明如何将它们组合在一起，我将不胜感激。我真的很想学习如何做而不是配置某人的脚本。

我检查了 YouTube，但找不到我正在寻找的确切内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:52:29.033

为了做一个批准系统，我认为最简单的方法是在数据库中为每个评论、图像等设置一个名为“已批准”的字段，它可以取 0,1 或 2 作为值.s

如果为 0，则表示需要批准。1 表示已批准。2 表示不被批准。

请注意， 2 并不是必需的。只是为了区分新条目和未批准的旧条目。

然后，在后端，您只能将审批系统的访问权限授予管理员。您可以使用相同的方法来定义管理员、用户、版主等...

# c# - C# 从 ThreadStart().Start() 返回值

> ID：11055749
> 
> 赞同：2
> 
> 时间：2012-06-15T17:47:29.953
> 
> 标签：c#, delegates

我有一个 Windows 窗体，我在其中打开新线程以进行服务器通信。我需要在表单中（在文本框中）写下服务器如何响应查询。

目前，我按如下方式进行服务器通信：

```
ServerClass SC = new ServerClass(param);
new Thread(new ThreadStart(SC.serverAction)).Start() 
```

现在的 serverAction 是 ServerClass 类中的一个 void 方法，但如果需要，我当然可以让它返回一个值。但是我更倾向于代表，但我不太确定如何从另一个线程回调......

ServerClass 是一个使用 WCF 的简单类，如下所示：

```
public class ServerClass
{
  private string var1;
  private string var2;

  public ServerClass(string var1, string var2)
  {
    this.var1 = var1; this.var2 = var2;
  }
  public void serverAction()
  {
    //WCF here
  }
} 
```

有什么建议我可以从“serverAction()”方法中获取值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:54:46.810

您可能想查看新的 .NET Framework 4.0 异步库。具体来说，您可能会感兴趣：`System.Threading.Tasks.Task<T>`.

此类将用于代替 System.Threading.Thread。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:55:40.360

考虑改用事件。当您的线程操作完成时触发一个事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:02:04.930

好吧，你不能从线程的入口点准确地返回一个值。我建议的是 Server 类之间的某种异步通信。

您可以在 Server 类中定义一个事件，例如：

```
public event EventHandler<YourEventInformation> OnServerConnected = (s, e) => {}; 
```

然后，当 serverAction 准备好时，您可以执行以下操作：

```
YourEventInformation evtInfo [= new YourEventInformation();
evtInfo.CustomReturnValue = "something here";

//Async call in the UI thread
OnServerConnected.BeginInvoke(this, evtInfo, null, null); 
```

接下来，您需要从 UI 的某个位置（可能是 Window）绑定到此事件。您只需在 UI 线程的上下文中调用您的代码，首先检查 Dispatcher.CheckAccess 然后调用您的 UI 代码。[与此处](http://blog.clauskonrad.net/2009/03/wpf-invokerequired-dispatchercheckacces.html)描述的内容非常相似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:40:38.753

> 线程不是.net中的方法和线程，其设计方式是异步运行且无法返回值。

但是您可以使用[BackgroundWorker](http://dotnetperls.com/backgroundworker)返回值。您可以在 e.Result 中的 BackgroundWorker 中获取结果。

此外，您可以检查[此项](https://stackoverflow.com/questions/1314155/returning-a-value-from-thread)以了解从线程返回值的不同技术。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-02T10:45:36.263

您可以使用此代码

```
class Program
 {
 static void Main(string[] args)
{
    string returnValue = null;
   new Thread(
      () =>
      {
          returnValue =test() ; 
      }).Start();
    Console.WriteLine(returnValue);
    Console.ReadKey();
  }
    public static string test()
   {
     return "Returning From Thread called method";
   }
} 
```

# sql - 如何使光标更快

> ID：11055754
> 
> 赞同：-2
> 
> 时间：2012-06-15T17:47:54.790
> 
> 标签：sql, tsql, sql-server-2005, cursor, duplicate-removal

我为佣金报告写了这个光标。发生的事情是佣金出现在一张表中，记录在另一张表中。我根据某些标准匹配两个（没有完全匹配可用）。问题是存在记录的地方存在重复。当我将佣金与`records`表格匹配时，可能会导致拾取这些重复项。因此，代表得到了更多的报酬。另一方面，佣金表中也有重复，但这些是有效的，因为它们简单地意味着一个帐户获得了 2 个月的付款。

我写了这个查询，但运行需要 5 分钟以上。我在记录表中有 50,000 条记录，在佣金表中有 100,000 条记录。有什么办法可以改进这个光标吗？

```
/* just preparation of cursor, this is not time consuming */
CREATE TABLE #result
  (
     repid         INT,
     AccountNo     VARCHAR(100),
     supplier      VARCHAR(15),
     CompanyName   VARCHAR(200),
     StartDate     DATETIME,
     EndDate       DATETIME,
     Product       VARCHAR(25),
     commodity     VARCHAR(25),
     ContractEnd   DATETIME,
     EstUsage      INT,
     EnrollStatus  VARCHAR(10),
     EnrollDate    DATETIME,
     ActualEndDate DATETIME,
     MeterStart    DATETIME,
     MeterEnd      DATETIME,
     ActualUsage   INT
  )

DECLARE @AccountNo VARCHAR(100)
DECLARE @supplier VARCHAR(10)
DECLARE @commodity VARCHAR(15)
DECLARE @meterstart DATETIME
DECLARE @meterEnd DATETIME
DECLARE @volume FLOAT
DECLARE @RepID INT
DECLARE @Month INT
DECLARE @Year INT

SET @repID = 80
SET @Month = 1
SET @year = 2012

/* the actual cursor */
DECLARE commission_cursor CURSOR FOR
  SELECT AccountNo,
         supplier,
         commodity,
         meterStart,
         MeterEnd,
         Volume
  FROM   commission
  WHERE  Datepart(m, PaymentDate) = @Month
         AND Datepart(YYYY, PaymentDate) = @Year

OPEN commission_cursor

FETCH next FROM commission_cursor INTO @AccountNo, @supplier, @commodity, @MeterStart, @MeterEnd, @Volume;

WHILE @@fetch_status = 0
  BEGIN
      IF EXISTS (SELECT id
                 FROM   Records
                 WHERE  AccountNo = @AccountNo
                        AND supplier = @supplier
                        AND Commodity = @commodity
                        AND RepID = @repID)
        INSERT INTO #result
        SELECT TOP 1 RepID,
                     AccountNo,
                     Supplier,
                     CompanyName,
                     [Supplier Start Date],
                     [Supplier End Date],
                     Product,
                     Commodity,
                     [customer end date],
                     [Expected Usage],
                     EnrollStatus,
                     ActualStartDate,
                     ActualEndDate,
                     @meterstart,
                     @MeterEnd,
                     @volume
        FROM   Records
        WHERE  AccountNo = @AccountNo
               AND supplier = @supplier
               AND Commodity = @commodity
               AND RepID = @repID
               AND @MeterStart >= Dateadd(dd, -7, ActualStartDate)
               AND @meterEnd <= Isnull(Dateadd(dd, 30, ActualEndDate), '2015-12-31')

      FETCH next FROM commission_cursor INTO @AccountNo, @supplier, @commodity, @MeterStart, @MeterEnd, @Volume;
  END

SELECT *
FROM   #result

/* clean up */
CLOSE commission_cursor

DEALLOCATE commission_cursor

DROP TABLE #result 
```

我已经阅读了[如何使 T-SQL 游标更快的答案？](https://stackoverflow.com/questions/859407/how-to-make-a-t-sql-cursor-faster)，为此我得到的是用表格形式重写这个查询。但我确实有另一个使用连接的查询，并且速度很快。问题是，它无法区分我`records`表中的副本。

有什么我可以做的更快。这是首要问题。如果没有，你有没有其他方法可以做到这一点。

我特别需要帮助

*   将使用视图或存储过程帮助
*   我有一种方法可以在 Cursor 中使用缓存以使其更快
*   语法中的任何其他选项

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T17:56:54.587

第一个选项是为您的游标设置最少的资源密集型选项：

```
declare commission_cursor cursor
local static read_only forward_only
for 
```

接下来是调查您是否需要游标。在这种情况下，我认为您可以通过单次传递而没有循环来执行相同的操作：

```
;WITH x AS 
(
  SELECT 
    rn = ROW_NUMBER() OVER (PARTITION BY r.AccountNo, r.Supplier, r.Commodity, r.RepID 
      ORDER BY r.ActualEndDate DESC),
    r.RepID, 
    r.AccountNo, 
    r.Supplier, 
    r.CompanyName, 
    StartDate = r.[Supplier Start Date], 
    EndDate = r.[Supplier End Date],
    r.Product, 
    r.Commodity, 
    ContractEnd = r.[customer end date], 
    EstUsage = r.[Expected Usage], 
    r.EnrollStatus, 
    EnrollDate = r.ActualStartDate,
    r.ActualEndDate, 
    c.MeterStart, 
    c.MeterEnd, 
    ActualUsage = c.Volume 
  FROM dbo.commission AS c 
  INNER JOIN dbo.Records AS r
    ON c.AccountNo = r.AccountNo
    AND c.Supplier = r.Supplier
    AND c.Commodity = r.Commodity
    AND c.RepID = r.RepID
  WHERE 
    c.PaymentDate >= DATEADD(MONTH, @Month-1, CONVERT(CHAR(4), @Year) + '0101')
    AND c.PaymentDate < DATEADD(MONTH, 1, CONVERT(CHAR(4), @Year) + '0101')
    AND r.RepID = @RepID
)
SELECT RepID, AccountNo, Supplier, CompanyName, StartDate, EndDate, 
  Product, Commodity, ContractEnd, EstUsage, EnrollStatus, EnrollDate, 
  ActualEndDate, MeterStart, MeterEnd, ActualUsage 
FROM x 
WHERE rn = 1 --ORDER BY something; 
```

如果这仍然很慢，那么游标可能不是问题 - 下一步将研究可能实施哪些索引以使此查询更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:15:40.550

**临时表是你的朋友**

我解决问题的方法，合并两个表中的数据，以复杂的方式删除重复项，一切都非常快，就是使用临时表。这就是我所做的

创建一个#temp 表，从两个表中获取合并的数据。确保在两个表中都包含 ID 字段，即使您不需要它。这将有助于删除重复项。

现在你可以在这张表上进行各种计算。从表 B 中删除重复项，只需删除重复的表 B ID。从表 A 中删除重复项，只需删除重复的表 A Id。这个问题有更多的复杂性，但至少这可能是解决问题的最佳方法，如果游标太昂贵并且需要相当长的时间来计算，它会大大加快速度。就我而言，它需要+ 5分钟。#temp 表查询大约 5 秒，其中包含更多计算。

* * *

在应用 Aaron 解决方案时，光标并没有变得更快。第二个查询更快，但它没有给我正确的答案，所以最后我使用了临时表。这是我自己的答案。

# css - Magento中的格式问题 我在将表格插入 Magento 的描述页面时遇到了一个大问题。 这是我一直在测试的产品。 http://www.buffalonutrition.co.uk/gaspari-myofusion-probiotic-2-2 问问题 问问题 2012-06-15T17:48:05.103 1813 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在将表格插入 Magento 的描述页面时遇到了一个大问题。 这是我一直在测试的产品。 http://www.buffalonutrition.co.uk/gaspari-myofusion-probiotic-2-2kg.html 由于某种原因，表格一直放在底部，并
插入了大量标签。 我还在设置/配置/内容管理端“完全禁用”所见即所得编辑。 有人对此有任何想法吗？因为我真的很想让每种产品都显示产品的营养价值。 它与这里的这个问题有关； http://www.magentocommerce.com/boards/viewthread/29526/#t96842 nl2br 函数正在应用于您的内容中的回车。您是否禁用了所见即所得编辑器？如果没有，那么我将禁用它（系统 -> 配置 -> 常规 -> 内容管理）并将表格的 html 直接输入到描述中。 cssmagentohtml-table 4 1 回答 1 This answer is useful 0 它与这里的这个问题有关； http://www.magentocommerce.com/boards/viewthread/29526/#t96842 nl2br 函数正在应用于您的内容中的回车。您是否禁用了所见即所得编辑器？如果没有，那么我将禁用它（系统 -> 配置 -> 常规 -> 内容管理）并将表格的 html 直接输入到描述中。 于 2012-06-16T10:25:22.527 回答 Related 3 xml - XPath/XQuery - 选择一个节点同时排除一些元素 1 ruby-on-rails - Ruby 和 Rails 上的 Hello World (ror) 1 master-pages - 我的设计视图不再显示，但网站运行良好。 1 solr - Nutch/Solr Indexing Sentences - 解析器插件或索引插件？ 1 javascript - JavaScript 使 getContext() 公开？ 1 android - 运行内存大小 0 android - 以编程方式将电话设置为响铃时没有音量 2 python - python - 如何将一个类方法中的变量值用于python中的另一个类 1 objective-c - Cocos2D求助：cocos2D中如何设置和使用SQLite数据库？ 2 xslt - 如何在循环期间更新或附加 XML 节点？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11055759
> 
> 赞同：0
> 
> 时间：
> 
> 标签：css, magento, html-table

我在将表格插入 Magento 的描述页面时遇到了一个大问题。

这是我一直在测试的产品。

[http://www.buffalonutrition.co.uk/gaspari-myofusion-probiotic-2-2kg.html](http://www.buffalonutrition.co.uk/gaspari-myofusion-probiotic-2-2kg.html)

由于某种原因，表格一直放在底部，并`<br>`插入了大量标签。

我还在设置/配置/内容管理端“完全禁用”所见即所得编辑。

有人对此有任何想法吗？因为我真的很想让每种产品都显示产品的营养价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:25:22.527

它与这里的这个问题有关；

[http://www.magentocommerce.com/boards/viewthread/29526/#t96842](http://www.magentocommerce.com/boards/viewthread/29526/#t96842)

nl2br 函数正在应用于您的内容中的回车。您是否禁用了所见即所得编辑器？如果没有，那么我将禁用它（系统 -> 配置 -> 常规 -> 内容管理）并将表格的 html 直接输入到描述中。

# machine-learning - 为什么 1-norm SVM 比 2-norm SVM 更稀疏？

> ID：11055761
> 
> 赞同：1
> 
> 时间：2012-06-15T17:48:37.673
> 
> 标签：machine-learning, sparse-matrix, svm, cost-based-optimizer

与在 SVM 的相同成本函数中使用 2 范数权重相比，我们如何通过在成本函数中使用 1 范数权重来增加稀疏性。

对于 1 范数`Minimize ||w||_1`
：成本函数 - 对于 2 范数：成本函数 -`Minimize ||w||_2`

它与LP-SVM有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:04:02.637

查看 l_1 损失对某个参数的偏导数。

相对于重量的增加，损失是恒定的。所以增加的重量需要抵消一些固定的误差，不管重量已经有多小。

比较一下 l2 损失，其中惩罚与当前参数的大小成比例。所以当它接近 0 时，它只需要有一个无限小的误差减少来抵消正则化惩罚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:38:47.650

请注意，||w||_2 < ||w||_1 对于相同的 w 当 0 < w < 1（通常发生）时，因为 L2 范数平方权重。

这就是为什么 ||w||_1 是一个更难的约束，它会导致稀疏向量。

它不是特定于 SVM，许多算法使用 L1 或 L2 正则化。

# google-maps - 用户在地图上设置他们的真实位置

> ID：11055763
> 
> 赞同：1
> 
> 时间：2012-06-15T17:48:54.840
> 
> 标签：google-maps, google-maps-api-3

我想知道是否有人这样做过，或者可以指出我使用 Google Maps API 最好是 PHP 和 JS 的正确方向。

我希望能够获取用户的地址和邮政/邮政编码，然后显示显示他们位置的地图。

由于英国邮政编码的性质，“实际”位置可能与显示的位置有一定距离。（例如在威尔士 - 一个高尔夫俱乐部的邮政编码可以覆盖大约 2 平方英里的区域，其中有小路和小巷纵横交错）。

然后我希望用户能够拖动指针 - 或其他一些方法 - 并指向他们在地图上的真实位置 - 并将这一点（纬度/经度）传递回我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:06:07.577

基本概念：

1.  将您拥有的数据地理编码为 LatLng 值：[https ://developers.google.com/maps/documentation/javascript/reference#Geocoder](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)
2.  使用步骤 1 中的 LatLng，在地图上放置一个可拖动的标记：[https ://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)
3.  收听`dragend`标记上的事件以获取新的 LatLng。

适用样品：

*   [地理编码](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)
*   [可拖动标记](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-animations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:03:40.187

以下是当用户点击我的 Google 地图时我用来获取 lat 和 lng 的代码：

```
 //capture lat and lng when user clicks on map
  google.maps.event.addListener(map, "click", function(event) {
     var lat = event.latLng.lat();
     var lng = event.latLng.lng();
     $("#lat").val(lat);
     $("#lng").val(lng);
     //console.log("Lat: "+ event.latLng.lat() +"Lng: "+ event.latLng.lng());    
  }); 
```

这是我用来将数据提交到服务器以添加到数据库中的 JQuery（用户可以在其中创建更多变量的表单）：

```
 //when user clicks submit button on form, use ajax/json to send info to db
    $("#submit").click(function() {
        var lat = $("#lat").val();
        var lng = $("#lng").val();
        var type = $("#type").val();
        var des = $("#des").val();
        $.ajax({
              type: "POST",
              url: "DB_addProblem.php",
              data: "lat="+ lat + "&lng="+ lng + "&type="+ type + "&des="+ des
        }).done(function( msg ) {
              alert( "Data Submited: " + msg + "!!!");
        });
     }); 
```

# java - 迁移到 Hibernate 4，@Inheritance 和 @GeneratedValue 的误解

> ID：11055767
> 
> 赞同：3
> 
> 时间：2012-06-15T17:49:13.817
> 
> 标签：java, inheritance, orm, hibernate-annotations, hibernate-4.x

我升级了我的 web 应用程序以使用 Hibernate 4。之后我遇到了一些问题，我需要帮助。

我的域对象有一个基类，如下所示：

```
@MappedSuperclass 
public class BaseDomainObject implements Serializable {

    @Id
    @GeneratedValue
    @Column
    protected Integer id;

    public Integer getId() {
            return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }
} 
```

然后，我有很多实体，比如：

```
@Entity
@Table(name="[user]")
public class User extends BaseDomainObject {

    @Column(name="first_name")
    private String      firstName;
    @Column(name="last_name")
    private String      lastName;

    ....
} 
```

我在实体之间有一些继承：

```
@Entity
@Table(name="record_data")
@Polymorphism(type=PolymorphismType.EXPLICIT)
public class RecordData extends BaseDomainObject {
    ....
}

@Entity
@Table(name="auto_data")
@Polymorphism(type=PolymorphismType.EXPLICIT)
public class AutoData extends RecordData {

} 
```

当我进行 hql 查询时，我得到了这个异常

```
 Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid column name 'DTYPE'. 
```

在hibernate源代码中，我看到如果实体有父项hibernate默认设置为SINGLE_TABLE继承，所以在每个查询中它连接DiscriminatorColumn，但我没有鉴别器列，因为每个类都映射到不同的表。

为了解决这个问题，我把这个注释放在我的实体上：

```
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS) 
```

但在那之后我得到了另一个例外

```
Caused by: org.hibernate.MappingException: Cannot use identity column key generation with <union-subclass> mapping for: bla.bla.RecordData 
```

我在网上找到了解决方案。它需要将我的 BaseDomainObject 中 @GeneratedValue 的策略更改为 TABLE

```
@GeneratedValue(strategy=GenerationType.TABLE) 
```

但这导致了另一个异常

```
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'hibernate_sequences'. 
```

我的数据库中的所有表都有一个自动增量 id.. 所以我不希望 hibernate 管理它..

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:23:33.990

一些解释：

```
Caused by: org.hibernate.MappingException: Cannot use identity column
key generation with <union-subclass> mapping for: bla.bla.RecordData 
```

原因是，如果您在多个表中有继承的实体，则无法使用标识列来生成键（因为这可能会在不同的列中生成相同的键）。试想一下，如果您尝试在查询中检索所有 BaseDomainObjects，则不可能以这种方式拥有不冲突的主键。

```
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name
'hibernate_sequences'. 
```

您已将 ID 生成策略设置为 TABLE，但由于某种原因，hibernate 没有创建表来存储这些 ID。您需要手动创建它或找出为什么 hibernate 没有在启动时创建它。

一些建议：

*   标识列和继承在您尝试过的情况下效果不佳。您可能应该尝试@Inheritance(strategy=InheritanceType.JOINED)，因为这将为具有标识列的基类创建一个表，并将其余属性存储在其他表中。

*   如果上述方法失败，请使用序列，通过指定 @GeneratedValue(strategy=GenerationType.SEQUENCE)

# silverlight - 如何使用 WebClient 在 Silverlight 中发布并获得响应

> ID：11055772
> 
> 赞同：3
> 
> 时间：2012-06-15T17:49:53.613
> 
> 标签：silverlight, webclient

是否可以使用 WebClient 发布到服务器并获得响应？我正在尝试通过 Silverlight 将文件上传到 MVC 应用程序。当我使用 WebClient 时，我可以成功上传文件，但我需要得到响应。我只是不知道怎么做。

```
private void UploadFile(string fileName, Stream data)
{
        UriBuilder ub = new UriBuilder("http://localhost:17016/upload/funds/" + fileName);
        WebClient c = new WebClient();

        c.OpenWriteCompleted += (sender, e) =>
        {
            input.Position = 0;
            input.CopyTo(e.Result);
            e.Result.Close();
            data.Close();
        };

        c.OpenWriteAsync(ub.Uri);

} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-15T18:50:30.373

WebClient 有一个事件[OpenWriteComplete](http://msdn.microsoft.com/en-us/library/system.net.webclient.openwritecompleted%28v=vs.95%29.aspx)。您可以使用它从 OpenWriteAsync 获取结果。

# java - 将 xml 文件中的元素与其在模式中的声明相匹配

> ID：11055775
> 
> 赞同：0
> 
> 时间：2012-06-15T17:50:03.590
> 
> 标签：java, xml, xsd

我想编写一个将 XML 模式作为输入并具有以下用例的应用程序：

1.  实例化架构。（即创建符合模式的随机 XML 实例。）
2.  遍历这样的 XML 实例并在不违反架构的情况下更改元素及其属性的值。*（这包括在sequences*中添加/删除元素，用其他*choices*替换元素，添加/删除可选*属性*s等）

基本上我需要一种在内存中表示模式和 XML 实例的方法，这将允许我将实例中的元素与模式中的元素进行匹配。最好它应该足够通用以处理 DTD、XSD 和 RELAX NG；但是，处理 XSD 也足够了。

所以我的问题是：是否有图书馆可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:54:02.250

[Dom4J](http://dom4j.sourceforge.net/)是一个非常好的 java xml 库。我认为任何库都不会开箱即用地完成您的第一个用例，但您自己实现它应该相对容易。

对于模式验证，他们使用[Xerces](http://xerces.apache.org/xerces2-j/features.html)，这可能足以满足您的需求。不过，从来没有直接使用过。

# javascript - JavaScript 对象的属性未定义

> ID：11055780
> 
> 赞同：0
> 
> 时间：2012-06-15T17:50:17.890
> 
> 标签：javascript, object

我有一个具有属性的对象，但是当我尝试访问它们时，它总是返回未定义的。

使用 Chrome，我将对象附加到窗口和控制台中，如果我这样做了，`window.country`

它返回这个对象：

```
[ Object
currency_code: null
iso: "USA"
iso3: "USA"
name: "USA"
states: Array[51]
__proto__: Object
] 
```

但是，当我尝试访问一个属性时，比如`window.country.iso`它是未定义的。任何想法为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:20:04.293

您的`window.country`对象实际上是一个数组。

Chrome 的控制台向您展示了这一点。如您所见，您的对象包含在 中`[]`，这意味着它位于数组中。

尝试像这样访问它：`window.country[0].iso`.

# makefile - gnu 制作子字符串

> ID：11055781
> 
> 赞同：2
> 
> 时间：2012-06-15T17:50:22.880
> 
> 标签：makefile, cross-compiling

我是 gnu 的新手。

我四处搜寻，但找不到任何工作...
我有一个工具前缀 suxh 的列表：

```
DEFTOOL= /usr/bin/i686-mingw32- /usr/bin/x86_64-w64-mingw32- /usr/bin/ 
```

如果字符串“mingw”在当前工具中，我想更改二进制文件的扩展名，所以

```
$(foreach c, $(DEFTOOL),$(call dist_make, $(c)))
...
define dist_make
result= ${shell echo $(1) | grep mingw }
echo x$(result)x
# $(if $(result),\
#   $(1)gcc $(DIST_CFLAGS) -o cap2hccap$(WINEXT) ./cap2hccap.c; echo "windows";,
#   $(1)gcc $(DIST_CFLAGS) -o cap2hccap$(LNXEXT) ./cap2hccap.c; echo "linux"; \
# )

endef 
```

其中 LNXEXT 为空，WINEXT 为“.exe”。
我不能让它工作....
我怎么知道函数的参数是否包含“mingw”？

PS：
我知道 64 位和 32 位 mingw 输出是相同的，但是当我了解如何检查一个字符串是否在另一个字符串中时，我会修复它。
如果您知道自动化跨开发构建的更好方法，那就吐出来:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:05:02.513

你的问题有点不清楚。如果要更改变量，则在任何规则之外：

```
ifneq ($(findstring mingw,$(DEFTOOL)),)
FILENAME = foo.xxx
endif 
```

如果要在规则内有条件地重命名文件：

```
someTarget:
ifneq ($(findstring mingw,$(DEFTOOL)),)
    mv foo.aaa foo.xxx
endif 
```

您也可以将条件放在*command*中，但我不明白您为什么要这样做。

# php - PHP 唤醒后重复进度

> ID：11055787
> 
> 赞同：-2
> 
> 时间：2012-06-15T17:50:47.193
> 
> 标签：php

每次 php 从 sleep() 唤醒时，我都想重复检查一个变量。此外，如果 3 分钟后仍未找到特定变量，则该函数应停止检查。我该怎么办？这是我到目前为止的代码：

```
<?php
  $file = file_get_contents("file.txt");
  if($file == 0){
    sleep(3);// then go back to $file
  } else {
    //stuff i want
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:00:51.613

如果您想继续做某事直到发生其他事情，您需要一个循环。您有两件事要检查是否应该退出循环：文件变量和时间长度。您需要添加一个变量来跟踪时间，或者您需要在每次循环时检查时间并将其与开始时间进行比较。

```
<?php

     $file = file_get_contents("file.txt");
     $timesChecked = 0;
     while($file == 0 and $timesChecked < 60)
     {
         sleep(3);
         $timesChecked++;
         $file = file_get_contents("file.txt");
     } 
     if($file != 0)
     {
          // stuff i want
     } else {
          // 3 minutes elapsed
     }
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:04:46.007

```
<?php
  //This function returns false if the time elapses without finding the variable.
  //Otherwise it executes what you want to do. It could instead return true if that makes sense.
  function waitForContent($filename) {
    $timeElapsed = 0;
    $lastTry = 0;//the time the file was last checked for contents

    $filehandler = file_get_contents($filename);
    while ($filehandler == 0) {
      $currentTime = microtime();//current time in microseconds
      $timeElapsed = $currentTime - $lastTry;//Note this may not be three seconds, due to how sleep works.
      $lastTry = currentTime;//update the time of the last trye
      if ($timeElapsed > (180 * 1000)) {//if three minutes has passed, quit.
        return false;
      }
      sleep(3);
      $filehandler = file_get_contents($filename);//update file handler
    }

    stuffIWantToDo();//stuff you want to do function.
  } 
```

# c# - 访问作为服务运行的注册表中的 CLSID。

> ID：11055791
> 
> 赞同：0
> 
> 时间：2012-06-15T17:51:08.030
> 
> 标签：c#, registry

我正在运行在系统帐户下运行的 C# 服务，试图访问以下注册表项：

\CLSID{8E7FE1EC-79FA-43DF-9452-B71542599B3C}\InProcServer32\

密钥存在，我可以在单元测试期间访问它（单元测试在当前用户下运行）。该服务可以访问 Classes 根目录中的其他键，但是当我尝试访问 CLSID 子键中的任何内容时，它会失败。

```
 var regPermission = new RegistryPermission(RegistryPermissionAccess.AllAccess,
                                                       @"HKEY_CLASSES_ROOT\" + regPath);
            regPermission.Demand();
            using (var regKey = rootKey.OpenSubKey(regPath))
            {
                if (regKey != null)
                {
                    string defaultValue = (string)regKey.GetValue("");
                    {
                        return defaultValue;
                    }
                }
                else
                {
                    Logger.Info("Unable to open " + regPath);        
                }
            } 
```

对于 CLSID 下的任何内容，我的代码都返回“无法打开”+ regPath..

关于为什么的任何提示将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:02:02.293

发生这种情况是因为 HKEY_CLASSES_ROOT 只是一个指针`HKEY_CURRENT_USER\Software\Classes`，当 noboy 登录时，嗯......然后它就不存在了。真正的配置单元可以在下面找到`HKEY_USERS\{user_guid | .DEFAULT}\Software\Classes`，所以除非您知道用户的 GUID，否则您必须使用 .DEFAULT。

您可以尝试`HKEY_LOCAL_MACHINE\Software\Classes`改用。

# asp.net-mvc-3 - 删除 ef 4 中的表 - mvc3

> ID：11055792
> 
> 赞同：1
> 
> 时间：2012-06-15T17:51:09.453
> 
> 标签：asp.net-mvc-3, entity-framework-4

我试图删除一个实体 - 表

这是代码：

```
db.Sessions.SqlQuery("delete table session");
db.SaveChanges(); 
```

这不是删除表。或者做任何事情.. db 继承自 DbContext 对象。

我找到了解决方案

```
foreach (var item in db.Sessions)
{
    db.Sessions.Remove(item);
}

db.SaveChanges(); 
```

但我确信有更好的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:08:16.583

`SqlQuery`顾名思义，如果您想删除需要其他东西的表，则仅用于执行查询：

通过使用[DbContext.Database](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.database%28v=vs.103%29)属性，您可以执行任何 DDL/DML 查询：

```
db.DataBase.ExecuteSqlCommand("drop table sessions"); 
```

我还创建了一个 repro，它在 EF4.3.1 和 SQL Server2008 上运行良好：

```
using (var db = new EFRepros())
{
    db.Sessions.Add(new Session() { Name = "Test1" });
    db.Sessions.Add(new Session() { Name = "Test2" });
    db.Sessions.Add(new Session() { Name = "Test3" });
    db.SaveChanges();
    Console.WriteLine(db.Sessions.Count()); // Output: 3
    db.Database.ExecuteSqlCommand("delete from sessions");
    //db.Database.ExecuteSqlCommand("truncate table sessions"); //this also works
    Console.WriteLine(db.Sessions.Count()); // Output: 0
} 
```

注意：默认情况下 EF 使用复数表名，因此您需要使用**sessions**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:59:23.360

你想把桌子放下吗？如果是这样，您不能通过`SqlQuery`调用来做到这一点，因为顾名思义，该方法严格处理查询。

如果您尝试从表中删除所有行，则此问题与此重复：

[Linq to Sql：如何快速清空表](https://stackoverflow.com/questions/1516962/linq-to-sql-how-to-clear-a-table-fast)

# asp.net - 迭代列表视图单元格值

> ID：11055793
> 
> 赞同：1
> 
> 时间：2012-06-15T17:51:14.363
> 
> 标签：asp.net, listview

我是 asp.net 的新手，并试图将值从 Sqlserver 提取到 listView (asp.net) 中。在代码隐藏中，如果选中 rowY 中的复选框，我想遍历所有行并拉取 columnX 的单元格值。我在以下代码中遇到编译错误，但无法找出问题所在。我可以从 GridView 但不能从 ListView 获取单元格值。

```
while (i < WOListView.Items.Count) {
  CheckBox cbCell = (CheckBox)WOListView.Items[i].FindControl("CheckBox1");
  if (cbCell.Checked) {
      if (WOListView.Items[i].SubItems[1].Text == "WO") {
        do stuff...
      }
  }
} 
```

以及由此产生的错误代码：

> CS1061：“System.Web.UI.WebControls.ListViewDataItem”不包含“SubItems”的定义，并且找不到接受“System.Web.UI.WebControls.ListViewDataItem”类型的第一个参数的扩展方法“SubItems”

有不同的方法吗？不支持子项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:13:02.770

列表视图中没有子项目。如果我没记错的话，您正在寻找列表视图中的控件

```
while (i < WOListView.Items.Count) {
  CheckBox cbCell = (CheckBox)WOListView.Items[i].FindControl("CheckBox1");
  if (cbCell.Checked) {
      Label somelabel = (Label)WOListView.Items[i].FindControl(“someLabel”);
      //if (WOListView.Items[i].SubItems[1].Text == "WO") {
       if (somelabel.Text == "WO") {
        do stuff...
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:05:46.927

> 不支持子项？？

不，这就是您收到编译错误的原因。

在我看来，您*可能*正在寻找这样的东西：

```
while (i < WOListView.Items.Count) {
  CheckBox cbCell = (CheckBox)WOListView.Items[i].FindControl("CheckBox1");
  if (cbCell.Checked) {
      if ((WOListView.Items[i].Controls[1] as Label).Text == "WO") {
        do stuff...
      }
  }
} 
```

注意`as Label`. 假设您正在尝试检查 ListView 行中的 Label 控件是否具有文本“WO”。这很可能是一种不同类型的控制。

# android - 为什么 SQLite 数据库不会更新？添加列

> ID：11055796
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:51:35.203
> 
> 标签：android, database, eclipse, sqlite

我已经尝试查看有关此主题的几个已经提出的问题，但我仍然无法让我的文件正常工作。我想也许一些直接的直接帮助可能正是我所需要的，所以我谦虚地向社区寻求帮助。感谢您的时间

```
public class RemindersDbAdapter {

//
// Database Related Constants
//
private static final String DATABASE_NAME = "data";
private static final String DATABASE_TABLE = "reminders";
private static final int DATABASE_VERSION = 3;

public static final String KEY_TITLE = "title";
public static final String KEY_CUSTOMER = "body";
public static final String KEY_DATE_TIME = "reminder_date_time";
public static final String KEY_END_TIME = "reminder_end_time";
public static final String KEY_ROWID = "_id";

private static final String TAG = "ReminderDbAdapter";
private DatabaseHelper mDbHelper;
private static SQLiteDatabase mDb;

/**
 * Database creation SQL statement
 */
private static final String DATABASE_CREATE =
        "create table " + DATABASE_TABLE + " ("
                + KEY_ROWID + " integer primary key autoincrement, "
                + KEY_TITLE + " text not null, " 
                + KEY_CUSTOMER + " text not null, " 
                + KEY_DATE_TIME + " text not null);" ;

private final Context mCtx;

private static class DatabaseHelper extends SQLiteOpenHelper 
{

    DatabaseHelper(Context context) 
    {

        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);

        //Adding a Column 
     // If you need to add a column
        if (newVersion > oldVersion) 
        {
            //example I tried pulling from the internet
            db.execSQL(
                "ALTER TABLE foo ADD COLUMN new_column INTEGER DEFAULT 0");
        }

        onCreate(db);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:55:54.697

如果要升级数据库，只需在 CREATE 语句中添加新列，然后增加版本。

您的代码尝试将一列添加到您刚刚删除的表中......

```
db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE); // Delete table
...
db.execSQL("ALTER TABLE foo ADD COLUMN new_column INTEGER DEFAULT 0"); // Won't find the table 
```

简单地改变这个：

```
private static final String DATABASE_CREATE =
        "create table " + DATABASE_TABLE + " ("
                + KEY_ROWID + " integer primary key autoincrement, "
                + KEY_TITLE + " text not null, " 
                + KEY_CUSTOMER + " text not null, " 
                + KEY_DATE_TIME + " text not null, "
                + "new_column INTEGER DEFAULT 0);" ; 
```

# c# - 如何在 Visual Studio 中关闭括号/引号自动完成

> ID：11055800
> 
> 赞同：112
> 
> 时间：2012-06-15T17:52:04.940
> 
> 标签：c#, autocomplete, visual-studio-2012

正如标题中所述：如何在 MSVS 中关闭括号/引号/花括号自动完成功能？我主要对 C# 和 XAML 感兴趣，但其他文本编辑器也会很好。

**编辑**：目前我正在使用带有这些扩展的 MSVS 11：

*   AnkhSVN
*   并发可视化器
*   PreEmptive Analytics 聚合器可视化工具
*   MSVS PerfWatson
*   VsGraphicsDebuggerPkg
*   Web 工具扩展

他们中的大多数必须预先安装了 msvs 安装，因为我不记得自己安装了它们；）

**EDIT2**：我在这个版本中使用 msvs：版本 11.0.50323.1 QRELB

**EDIT3**：
我发现当前可用的 msvs11 中没有出现问题。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2014-03-12T17:49:49.157

如果有人对 VS 2013 有这个问题，现在有一个设置。我刚刚重置了我的 VS 设置，它又开始完成我的牙套。对我来说，这不是生产力电动工具。您可以在此处打开/关闭它：

![在此处输入图像描述](../Images/7db50ae9becba907d302753a3532baf2.png)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-11-10T15:27:00.143

如果有人偶然使用 Resharper，您可能还需要调整设置

```
(Resharper Menu, Options) - Environment -> Editor -> Editor Behavior 
```

和

```
(Resharper Menu, Options) - Environment -> Intellisense -> Completion Behavior 
```

根据你的个人喜好，除了别人提到的 Visual Studio 内置设置。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-08-01T19:18:03.350

对于 Visual Studio 2017：

仅限 C#：

> 工具 > 选项 > 文本编辑器 > C# > 常规 > 自动大括号完成

所有语言：

> 工具 > 选项 > 文本编辑器 > 所有语言 > 常规 > 自动大括号完成

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-15T18:27:32.857

我知道你没有提到生产力电动工具，但是用它很容易关闭。我相信这个包可以通过nuget下载。

下载后转到工具 - 选项 - 生产力工具 - 然后在右侧您将看到自动支撑完成。关掉！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-02-01T16:30:35.317

要在 Visual Studio 2015 中关闭 XAML 的双引号自动完成，它是：

```
Tools -> Options -> Text Editor -> XAML -> Miscellaneous -> Attribute quotes 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-02-08T23:08:49.200

对于使用 2017 mac 版 Visual Studio 的用户：首选项 > 文本编辑器 > 行为 > 自动行为 > “插入匹配大括号”

[![在此处输入图像描述](../Images/5c628cf331f3643597acd0591a51f297.png)](https://i.stack.imgur.com/cDKps.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-19T14:59:32.937

关于 ReSharper，您可能还需要在调整设置后清除 chaches，如 Nate Cook 所述。

[![在此处输入图像描述](../Images/fdb3f3c85588357bbedf52550602081f.png)](https://i.stack.imgur.com/bFzaY.png)

# c++ - C 和 C++ 中的静态和外部全局变量

> ID：11055802
> 
> 赞同：36
> 
> 时间：2012-06-15T17:52:24.837
> 
> 标签：c++, c, static, global-variables, extern

我做了 2 个项目，第一个用 C 语言，第二个用 C++ 语言，两者都具有相同的行为。

C项目：

**头文件.h**

```
int varGlobal=7; 
```

**主程序**

```
#include <stdio.h>
#include <stdlib.h>
#include "header.h"

void function(int i)
{
    static int a=0;
    a++;
    int t=i;
    i=varGlobal;
    varGlobal=t;
    printf("Call #%d:\ni=%d\nvarGlobal=%d\n\n",a,i,varGlobal,t);
}

int main() {
    function(4);
    function(6);
    function(12);
    return 0;
} 
```

C++项目：

**头文件.h**

```
int varGlobal=7; 
```

**主文件**

```
#include <iostream>
#include "header.h"
using namespace std;

void function(int i)
{
    static int a=0;
    int t=i;
    a++;
    i=varGlobal;
    varGlobal=t;
    cout<<"Call #"<<a<<":"<<endl<<"i="<<i<<endl<<"varGlobal="<<varGlobal<<endl<<endl; 
}

int main() {
    function(4);
    function(6);
    function(12);
    return 0;
} 
```

我读到全局变量在默认情况下是**外部**变量，在 C 中是外部变量，在 C++ 中默认是**静态**的；那么为什么 C++ 代码有效呢？

我的意思是*int varGlobal=7;* 与*静态 int varGlobal=7 相同；*如果它是静态的，那么它只能在它声明的文件中使用，对吧？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-15T18:19:49.467

全局变量在 C 和 C++中`extern`也不是默认的。`static`当您将变量声明为`static`时，您将其限制为当前源文件。如果您将其声明为`extern`，则表示该变量存在，但在其他地方定义，如果您没有在其他地方定义它（没有`extern`关键字），您将收到链接错误（找不到符号）。

当您有更多源文件（包括该标头）时，您的代码将中断，在链接时您将多次引用`varGlobal`. 如果您将其声明为`static`，那么它将与多个源一起使用（我的意思是，它将编译和链接），但每个源都有自己的`varGlobal`.

您可以在 C++ 中做而在 C 中不能做的事情是将变量声明为`const`在标头上，如下所示：

```
const int varGlobal = 7; 
```

并包含在多个来源中，而不会在链接时破坏事物。这个想法是替换旧的 C 风格`#define`的常量。

如果您需要一个在多个源上可见的全局变量，而不是在头文件上`const`声明它`extern`，然后在源文件上定义它，这次不使用 extern 关键字：

多个文件包含的标头：

```
extern int varGlobal; 
```

在您的一个源文件中：

```
int varGlobal = 7; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T17:55:52.450

当您`#include`使用标头时，就好像您将代码放入源文件本身一样。在这两种情况下，`varGlobal`变量都是在源代码中定义的，因此无论它如何声明它都会起作用。

同样正如评论中所指出的，文件范围内的 C++ 变量在范围内不是静态的，即使它们将被分配给静态存储。例如，如果变量是类成员，则程序中的其他编译单元默认可以访问它，非类成员也不例外。

# list - 列表就地替换和时区转换

> ID：11055807
> 
> 赞同：0
> 
> 时间：2012-06-15T17:52:49.270
> 
> 标签：list, groovy, timezone, collect

过去一天我一直在尝试解决这个问题，但似乎找不到更优雅（Groovy 风格）的解决方案，希望有人能帮助我。

基本上我有一个列表，其中包含来自需要转换为指定时区（在本例中为巴黎 GMT+2）的外部源的时间戳 (GMT-0)，然后将列表中的原始时间戳替换为纪元格式的新时间 (GMT+2)。

注意：我曾尝试使用 GregorianCalendar，但还没有弄清楚如何设置输入时区 (GMT-0)，因此我可以将推算时间转换为任何时区。

这是我丑陋的解决方案：

```
def tStamp= ['2012-06-14T20:16:20Z', '2012-06-14T20:16:40Z', '2012-06-14T20:17:00Z', '2012-06-14T20:17:20Z '、'2012-06-14T20:17:40Z'、'2012-06-14T20:18:00Z']
println "分机："+ tStamp
tStamp = tStamp.collect { 7200+(new Date().parse("yyyy-MM-dd'T'HH:mm:ss'Z'", it).time.toString().toLong()/1000) .toInteger() }
println "New: "+ tStamp

分机：[2012-06-14T20:16:20Z, 2012-06-14T20:16:40Z, 2012-06-14T20:17:00Z, 2012-06-14T20:17:20Z, 2012-06-14T20:17 :40Z, 2012-06-14T20:18:00Z]
新：[1339704980、1339705000、1339705020、1339705040、1339705060、1339705080]

```

新版本：

```
def timeStamps =['2012-06-18T09:11:00Z', '2012-06-18T09:11:20Z', '2012-06-18T09:11:40Z']
println "ORIG: "+ timeStamps

// Import the external time: GMT-0
def inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'")
inputFormat.timeZone = TimeZone.getTimeZone('GMT-0')
timeStamps = timeStamps.collect { inputFormat.parse(it) }
println "IN: "+ timeStamps

// Convert the timez to GMT+2 and conver to epoch
timeStamps = timeStamps.collect { def gcal = new GregorianCalendar(TimeZone.getTimeZone("GMT+2")); gcal.setTime(it); return gcal.getTimeInMillis()/1000  }
println "OUT: "+ timeStamps

ORIG: [2012-06-18T09:11:00Z, 2012-06-18T09:11:20Z, 2012-06-18T09:11:40Z]
IN: [Mon Jun 18 11:11:00 CEST 2012, Mon Jun 18 11:11:20 CEST 2012, Mon Jun 18 11:11:40 CEST 2012]
OUT: [1340010660, 1340010680, 1340010700] 
```

有没有人有什么建议？

提前致以最诚挚的问候和感谢，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:19:26.023

您可以使用它[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)来解析和格式化日期。请注意，Date 对象对时区一无所知，因此在使用 Date 对象时，您通常不需要担心这些事情，只需从字符串中解析它们或将它们格式化为字符串。

```
import java.text.SimpleDateFormat

def timeStamps = ['2012-06-14T20:16:20Z', '2012-06-14T20:16:40Z']

def inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'")
inputFormat.timeZone = TimeZone.getTimeZone('GMT-0')

// Once parsed, dates are agnostic to time zones.
def dates = timeStamps.collect { inputFormat.parse(it) }

def outputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss Z")
outputFormat.timeZone = TimeZone.getTimeZone('GMT+2')

println "Dates in current locale: " + dates
println "Dates in GMT+2 time zone: " + dates.collect { outputFormat.format(it) } 
```

输出：

```
Dates in current locale: [Thu Jun 14 17:16:20 ART 2012, Thu Jun 14 17:16:40 ART 2012]
Dates in GMT+2 time zone: [2012-06-14T22:16:20 +0200, 2012-06-14T22:16:40 +0200] 
```

请注意，在第一行中，日期是使用当前语言环境打印的（在我的机器上是 GMT-3 ......这就是为什么它们与输入的 GMT-0 日期之间有 3 小时的差异）。

当然，你不需要中间`dates`列表，你可以直接这样做：

```
timeStamps.collect { outputFormat.format(inputFormat.parse(it)) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:26:26.967

我终于找到了解决这个问题的方法：

```
 import java.text.SimpleDateFormat
  def convertTimeZone(String time, String sourceTZ, String destTZ) {
    final String DATE_TIME_FORMAT = "yyyy-MM-dd'T'HH:mm:ss'Z'"
    def sdf = new SimpleDateFormat(DATE_TIME_FORMAT)
    Date specifiedTime

    try {
      if (sourceTZ != null){
        sdf.setTimeZone(TimeZone.getTimeZone(sourceTZ))
      }else{
        sdf.setTimeZone(TimeZone.getDefault()) // default to server's timezone
      }
      specifiedTime = sdf.parse(time)
    } catch (Exception e1){
      try {
        specifiedTime = new Date().parse(DATE_TIME_FORMAT, time)
      } catch (Exception e2) {
        return time
      }
    }
    // switch timezone
    if (destTZ != null){
      sdf.setTimeZone(TimeZone.getTimeZone(destTZ))
    }else{
      sdf.setTimeZone(TimeZone.getDefault()) // default to server's timezone
    }

    new Date().parse("yyyy-MM-dd'T'HH:mm:ss'Z'", sdf.format(specifiedTime))
  }

 def timeStamps = ['2012-06-14T20:16:20Z', '2012-06-14T20:16:40Z']

 println "IN: "+ timeStamps
 timeStamps = timeStamps.collect { ((convertTimeZone(it,"GMT-0","Europe/Paris")).time.toString().toLong()/1000).toInteger() }
 println "OUT: "+ timeStamps 
```

输出：

```
IN: [2012-06-14T20:16:20Z, 2012-06-14T20:16:40Z]
OUT: [1339712180, 1339712200] 
```

希望这个解决方案对其他人也有帮助。

# mysql - Oxwall 转移域名主机

> ID：11055808
> 
> 赞同：2
> 
> 时间：2012-06-15T17:53:00.453
> 
> 标签：mysql, phpmyadmin, xampp, cpanel, smf-forum

我正在使用 Oxwall，试图将我的文件从一个域/主机/服务器传输到另一个我使用 softaculous 安装 Oxwall 并制作数据库/cron/等。

如果我将文件传输到新的主机/域，我应该怎么做：

```
define('OW_DB_HOST', '???????');
define('OW_DB_PORT', ??????);
define('OW_DB_USER', '??????');
define('OW_DB_PASSWORD', '??????');
define('OW_DB_NAME', '??????'); 
```

[http://docs.oxwall.org/faq:how-to-transfer-my-site-to-another-hosting](http://docs.oxwall.org/faq:how-to-transfer-my-site-to-another-hosting)

我正在尝试使用 phpmyadmin 等设置 XAMPP，这会有帮助吗？或者在新主机中使用 cPanel 创建数据库会更容易吗？谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:56:42.583

您只需删除`ow_includes/config.php`并导入旧数据库。

# python - python检查列表中的字符串？

> ID：11055809
> 
> 赞同：2
> 
> 时间：2012-06-15T17:53:05.220
> 
> 标签：python, list

我正在尝试遍历一个列表，检查列表中的每个字符串是否有一个字符。

```
test = [str(i) for i in range(100)]

for i in test:
    if '0' or '4' or '6' or '8' in str(i):
        test.remove(i) 
```

我认为这会很好，但是列表如下：

```
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49, 51, 53, 55, 57, 59, 61, 63, 65, 67, 69, 71, 73, 75, 77, 79, 81, 83, 85, 87, 89, 91, 93, 95, 97, 99] 
```

'2'被删除但'41'不是？我注意到它只有偶数，但不知道为什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T17:58:26.740

您的代码有两个问题。第一个是您在迭代列表时正在修改列表。第二个是您`or`以错误的方式使用运算符 -`if`语句中的条件将始终为`True`.

这是一个固定版本：

```
test = [i for i in range(100) if set("0468").isdisjoint(str(i))] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T18:04:05.730

你有两个问题。首先，这个`if`陈述总是被采纳。

```
if '0' or '4' or '6' or '8' in str(i): 
```

因为字符串`0`是非零长度字符串，因此是`True`. `0`或是`4`，`0`因此`True`。声明的其余部分无关紧要。

我希望您实际上想测试这些数字中的*每一个*是否都在整数的字符串表示形式中。正如您现在编写的那样，您只是在测试是否`8`在字符串中，甚至没有得到测试，因为表达式`True`在它到达那里之前就计算了。像这样的东西会起作用：

```
if any(x in i for x in '0468'): 
```

顺便说一句，`str(i)`是多余的，因为您的列表已经是字符串列表。

另一个问题是您正在从正在迭代的列表中删除项目。所以，这就是发生的事情：

*   第一项，`0`，被删除，因为你的`if`陈述总是被采纳。
*   第二项 ,`1`成为第一项，因为您删除了`0`。
*   循环继续到第二`for`项，即 now `2`。

换句话说，因为你删除了`0`，`1`所以永远不会被测试。因此，所有其他项目（所有偶数）都被删除。

在代码中避免这种情况的最简单方法是遍历列表的副本：

```
for i in test[:]: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:06:31.080

考虑一下：

```
(Pdb) i=2
(Pdb) i='2'
(Pdb) '0' or 'beer' in str(i)
'0'
(Pdb) bool('0')
True 
```

你明白为什么`'0' or '4' or '6' or '8' in str(i)`不总是布尔值吗？

现在，考虑您要删除的内容：

```
>>> l=[str(i) for i in range(10)]
>>> for i in l:
...   print i
...   print l
...   l.remove(i)
... 
0
['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
2
['1', '2', '3', '4', '5', '6', '7', '8', '9']
4
['1', '3', '4', '5', '6', '7', '8', '9']
6
['1', '3', '5', '6', '7', '8', '9']
8
['1', '3', '5', '7', '8', '9'] 
```

当您在迭代列表时就地删除元素时，您正在缩短列表并跳过每个下一个值。

[Sven 有正确的 pythonic 解决方案](https://stackoverflow.com/a/11055881/418413)，但我觉得更冗长的解释可能是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T18:15:07.067

当您执行类似`'0' or '4'`的操作时，`or`运算符将验证第一个参数 ( `'0'`) 是否为假，如果不是假，则返回第一个值。由于`'0'`is not false （它是一个非空字符串，`True`当用作布尔值时产生），它将返回第一个值，甚至不会考虑以下值：

```
>>> '0' or '4'
'0' 
```

如果你重复它，你会得到相同的结果：

```
>>> '0' or '4' or '6' or '8'
'0' 
```

此外，`in`运算符具有更高的优先级，因此它将在 each 之前执行`or`：

> > > '0' 或 '4' 或 '6' 或 '8' 在 '88' '0'

您想要在您的条件下做的是验证结果中是否有任何值：

```
>>> '0' in str(i) or '4' in str(i) or '6' in str(i) or '8' in str(i)
True
>>> i = 17
>>> '0' in str(i) or '4' in str(i) or '6' in str(i) or '8' in str(i)
False 
```

这不是最优雅的解决方案，但它是您意图的最佳翻译。

那么，什么是优雅的解决方案？正如@sven 所建议的那样，您可以创建一组（[更多关于它](http://docs.python.org/tutorial/datastructures.html#sets)）寻找的字符：

```
>>> sought = set("0468")
>>> sought
set(['0', '8', '4', '6']) 
```

然后在您的号码中创建一组数字：

```
>>> i = 16
>>> set(str(i))
set(['1', '6']) 
```

现在，看看[它们是否不相交](http://docs.python.org/library/stdtypes.html#set.isdisjoint)：

```
>>> i = 16
>>> sought.isdisjoint(set(str(i)))
False
>>> i = 17
>>> sought.isdisjoint(set(str(i)))
True 
```

在这种情况下，如果集合不是不相交的*，*那么您要保留它：

```
>>> found = []
>>> for i in range(100):
...     if sought.isdisjoint(set(str(i))):
...         found.append(i)
... 
>>> found
[1, 2, 3, 5, 7, 9, 11, 12, 13, 15, 17, 19, 21, 22, 23, 25, 27, 29, 31, 32, 33, 35, 37, 39, 51, 52, 53, 55, 57, 59, 71, 72, 73, 75, 77, 79, 91, 92, 93, 95, 97, 99] 
```

大多数时候，每次你让自己创建一个`for`用于过滤迭代器的循环时，你真正想要的是一个[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
>>> [i for i in range(100) if sought.isdisjoint(set(str(i)))]
[1, 2, 3, 5, 7, 9, 11, 12, 13, 15, 17, 19, 21, 22, 23, 25, 27, 29, 31, 32, 33, 35, 37, 39, 51, 52, 53, 55, 57, 59, 71, 72, 73, 75, 77, 79, 91, 92, 93, 95, 97, 99] 
```

或者，使用更笨拙但对新手更友好的构造：

```
>>> [i for i in range(100) if not ( '0' in str(i) or '4' in str(i) or '6' in str(i) or '8' in str(i) )]
[1, 2, 3, 5, 7, 9, 11, 12, 13, 15, 17, 19, 21, 22, 23, 25, 27, 29, 31, 32, 33, 35, 37, 39, 51, 52, 53, 55, 57, 59, 71, 72, 73, 75, 77, 79, 91, 92, 93, 95, 97, 99] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T18:00:04.983

问题出在这行：

```
if '0' or '4' or '6' or '8' in str(i): 
```

这是不正确的。最好这样写：

```
if any(x in i for x in '0468'): 
```

第二个问题（如 Sven 所述）是您在迭代列表时修改了列表。

最好的解决方案是：

```
[i for i in test if not any(x in i for x in '0468')] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T18:00:22.267

```
itms = ['0','4','6','8']
test = [str(i) for i in range(100) if not  any([x in str(i) for x in itms])] 
```

也许....那是未经测试的，但我认为它会起作用

# regex - 匹配某些子域的正则表达式

> ID：11055813
> 
> 赞同：0
> 
> 时间：2012-06-15T17:53:17.157
> 
> 标签：regex, preg-match

我需要与**preg_match**匹配以.co 结尾但不匹配以 .com 结尾的某个域的 url

例子：

```
www.cool.com
www.cool.com.co [MATCH]
www.cool.co [MATCH] 
```

我试图使用该表达式`[\.co]{3}`，但它匹配我所有的 URL（www `.co`ol `.co`m `.co`）

在此先感谢您的帮助 ;-）

**[编辑]**

类似的 URL`www.cool.co/coolness`也应该是匹配的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:58:46.840

试试这个正则表达式

```
/((.*)(.co))$/gm 
```

看这个**[演示](http://regexr.com?31956)**

## 编辑：

```
/((.*)(.co)($|/)(.*))/gm 
```

看这个**[演示 2](http://regexr.com?3195c)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:16:21.800

终于做到了！

正则表达式是：`/\b\.(co)\b/g`

```
www.cool.com
cool.com
www.cool.com.co [MATCH]
cool.com.co [MATCH]

www.cool.com/coolness
cool.com/coolness
www.cool.com.co/coolness [MATCH]
cool.com.co/coolness [MATCH] 
```

# javascript - 使用 jQuery 裁剪图片

> ID：11055818
> 
> 赞同：-1
> 
> 时间：2012-06-15T17:53:43.737
> 
> 标签：javascript, jquery, image, crop

请有人向我解释或带我了解如何使用 JavaScript / jQuery 裁剪图片？我不是在寻找插件，我想了解它是如何完成并使用它的。我也不希望`div`对背景位置进行操作。我想裁剪实际的图片。但仅用于客户端目的。我不需要后端的挂钩来保存裁剪的图片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T17:55:29.820

jQuery 没有图片裁剪功能。

例如，您可以使用 HTML5 画布元素来实现这一点。这是一个[教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-crop/)：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      window.onload = function() {
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");
        var imageObj = new Image();

        imageObj.onload = function() {
          // draw cropped image
          var sourceX = 150;
          var sourceY = 0;
          var sourceWidth = 150;
          var sourceHeight = 150;
          var destWidth = sourceWidth;
          var destHeight = sourceHeight;
          var destX = canvas.width / 2 - destWidth / 2;
          var destY = canvas.height / 2 - destHeight / 2;

          context.drawImage(imageObj, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);
        };
        imageObj.src = "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg";
      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="400"></canvas>
  </body>
</html> 
```

# android - android 包管理器不能与 ICS 一起使用

> ID：11055819
> 
> 赞同：1
> 
> 时间：2012-06-15T17:53:44.760
> 
> 标签：android, linux, shell, adb

4.0之前可以正常运行，4.0之后就不能像“pm uninstall com.abc”一样运行了

我的代码是这样的：

```
try {
                // Executes the command.
                Process process = Runtime.getRuntime().exec("pm uninstall me.onemobile.android");
                DataOutputStream toProcess = new DataOutputStream(process.getOutputStream());
                toProcess.writeBytes("exec " + "shell pm uninstall me.onemobile.android" + "\n");
                toProcess.flush();
            } catch (IOException e) {
                System.out.println(e.getMessage());
                throw new RuntimeException(e);
            } 
```

当我运行它时，它的显示如下：

```
[1] + Stopped (signal) 
```

当我在 root 中运行“pm uninstall com.test”时有一些不同，它只是显示

```
[1] + Stopped (signal) 
```

但是当运行“adb shell pm uninstall com.test”时，它可以工作，所以这让我抓狂。

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:38:30.990

试试这个代码

```
 toProcess.writeBytes("export LD_LIBRARY_PATH=/vendor/lib:/system/lib" + "\n"); 
  toProcess.writeBytes("exec " + "shell pm uninstall me.onemobile.android" + "\n"); 
  toProcess.flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:41:42.933

我在 android 4.0.3 中遇到了同样的问题。运行“adb su”后，“pm”总是返回 [1] + Stopped（信号）。这似乎是由特权引起的。

# ruby - sendmail 仅在我说 rails s 时按下 ctrl + c 后才在 Rails 中发送电子邮件

> ID：11055822
> 
> 赞同：0
> 
> 时间：2012-06-15T17:53:52.043
> 
> 标签：ruby, ruby-on-rails-3, sendmail, actionmailer

在我的 development.rb 中，我有：

```
 config.action_mailer.delivery_method = :sendmail
    config.action_mailer.sendmail_settings = {
    :location => '/usr/sbin/sendmail',
    :arguments => '-i'
} 
```

我删除了 -t 选项，因为它不允许我发送电子邮件。当我启动控制台并转到我的应用程序并发送电子邮件时，电子邮件才会发送，但只有在我按下 ctrl + C 后才会发送。我猜这是因为 sendmail 创建了一个进程，而父进程 - rails 服务器 - 等待它完成并且 ctrl + c 告诉父进程孩子已经完成。这是正确的吗？你知道如何解决它，这样我就不必按 ctrl + c 了吗？我使用 rails 3.0.9 和 ruby​​ 1.9.2。提前感谢所有答案，请原谅我的英语。这不是我的母语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:09:56.267

如果它们有效，则在开发中发送电子邮件以手动查看它们通常不是一种干净的测试方式。

[这个 Rails 指南](http://guides.rubyonrails.org/testing.html#testing-your-mailers)也涵盖了控制器的测试。为您的电子邮件设置测试非常简单（来自链接的[Rails 指南](http://guides.rubyonrails.org/testing.html#testing-your-mailers)）：

```
#unit test
require 'test_helper'

class UserMailerTest < ActionMailer::TestCase
  tests UserMailer
  test "invite" do
    @expected.from    = 'me@example.com'
    @expected.to      = 'friend@example.com'
    @expected.subject = "You have been invited by #{@expected.from}"

    assert_equal @expected.encoded, UserMailer.create_invite('me@example.com',     'friend@example.com', @expected.date).encoded
  end
end 
```

和一个示例功能测试（也来自[Rails Guide](http://guides.rubyonrails.org/testing.html#testing-your-mailers)）：

```
require 'test_helper'

class UserControllerTest < ActionController::TestCase
  test "invite friend" do
    assert_difference 'ActionMailer::Base.deliveries.size', +1 do
      post :invite_friend, :email => 'friend@example.com'
    end
    invite_email = ActionMailer::Base.deliveries.last

    assert_equal "You have been invited by me@example.com", invite_email.subject
    assert_equal 'friend@example.com', invite_email.to[0]
    assert_match(/Hi friend@example.com/, invite_email.body)
  end
end 
```

# javascript - 带有 target=_blank 的 Rally SDK 2 网格手动链接将我带到一个不完全空白的页面

> ID：11055827
> 
> 赞同：1
> 
> 时间：2012-06-15T17:54:04.377
> 
> 标签：javascript, rally

当我创建一个 sdk 2 网格并尝试将第一列作为目标为 _blank 的项目详细信息页面的链接时，单击会将我带到一个只有 Rally 颜色的窗口。像这样：

![拉力赛涂装](../Images/ead4e6cf4c09efbac2252c9fecc6a68d.png)

我正在使用 columncfgs 上的渲染器进行配置：

```
columnCfgs: [
        {
          text: 'TestCase', dataIndex: 'FormattedID', width: 65,
          renderer: function(value,style,row_data, row_index){
                return Ext.String.format("<a target='_blank' href='/slm/detail/tc/{1}'>{0}</a>", value, row_data.data.ObjectID);
        }
    }, 
```

如果我不将 _blank 作为目标，那么它会将我带到正确的页面，但会被推到仪表板面板中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:50:19.567

这就是我们目前制作它们的方式（来自 XTemplate 的片段；这里的值将是您的 row_data.data）：

```
<a href="{[Rally.util.Navigation.createRallyDetailUrl(values)]}" 
    target="_top">{FormattedID}</a> 
```

当我们接近 2.0 SDK 的 GA 版本时，我们将公开一些更简单的标准方法来创建缺陷链接。

# ios - Xcode 4.3 保存用户数据

> ID：11055828
> 
> 赞同：0
> 
> 时间：2012-06-15T17:54:05.860
> 
> 标签：ios, objective-c, cocoa-touch, persistence

我正在制作我的第一个主要 iPhone 应用程序，在保存用户数据方面需要一些建议。我希望保存一个复杂的多维数组，例如包含一般信息和更多数据列表的联系人列表。

我在网上搜索了很长时间，发现了很多教程，但它们似乎有点模糊或不清楚。

保存此类数据的最佳做法是什么？如果有人可以指导我找到一个很好的教程，那就太好了。更新应用程序不会丢失保存的数据至关重要。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:59:30.110

更新时 NSUserDefaults 不会丢失数据。

```
//Writing
[[NSUserDefaults standardUserDefaults] setInteger:1 forKey:@"anInt"];
[[NSUserDefaults standardUserDefaults] setDouble:1.2 forKey:@"aDouble"];
[[NSUserDefaults standardUserDefaults] setString:@"aString" forKey:@"aString"];
[[NSUserDefaults standardUserDefaults] synchronize];

//Reading:

int i = [[NSUserDefaults standardUserDefaults] integerForKey:@"anInt"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:22:38.717

保存在 plist 文件中：

```
 // Copying the plist file
    NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    path = [[documentsDirectory stringByAppendingPathComponent:@"setting.plist"] retain]; 
    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath: path]) 
    {
        NSString *bundle = [[NSBundle mainBundle] pathForResource:@"setting" ofType:@"plist"]; 

        [fileManager copyItemAtPath:bundle toPath: path error:&error]; 
    }

    settings = [[NSMutableDictionary alloc]initWithContentsOfFile:path]; 
```

用法 ：

```
NSString *keyname = [[settings allKeys]objectAtIndex:0];  // Or indexPath.row
[settings setObject:@"yes" forKey:keyname];  //Setting Value
[settings objectForKey:keyname]; //Getting Value 
```

# c# - 杀死一个等待答案的线程

> ID：11055831
> 
> 赞同：0
> 
> 时间：2012-06-15T17:54:21.913
> 
> 标签：c#, embedded

我正在用 C# 编写一个程序，它与一个小型显示单元交互，该单元执行一大堆与此问题无关的事情。

我遇到的问题详细如下：当用户选择一个将尝试将某些设置保存到设备的按钮时，它使用确认协议来确保设置通过（意思-它发送设置然后等待确认来自设备的数据包。）

我所做的是在我的主应用程序中生成一个线程，该线程将成为我将要生成的线程的“父”线程，它将尝试保存到设备。目前，它的工作方式如下：

*   生成线程 1 -> 尝试保存。

*   如果超时，通过 Thread.Interrupt() 中断线程 1（释放设备的数据锁）**<----- 这就是问题所在**。这行不通。它加粗锁定，直到设备关闭或拔出，然后出错。（然后它会生成一个新线程，现在发生但它永远不会工作，因为第一个线程仍然锁定数据）。

*   如果没有超时，线程 1 的回调让父线程知道不再生成任何线程。

*   最后，如果没有线程成功，则整体尝试失败。

我也尝试过只生成并关闭一个线程来执行此操作，这也表现出相同的行为，即在等待来自设备的确认时，它会永久挂起，直到设备关闭或拔下电源。

没有办法封装等待设备发送带有布尔值的确认，该布尔值可以设置为停止线程，因为它永远不会离开等待调用。这是嵌入式软件，所以我无法修改等待功能。我只能修改嵌入式软件的C#接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:37:08.570

您似乎在说您的线程 1 永远等待 ACK。另一个线程检测到超时条件并尝试中断线程 1。我建议线程 1 不应该永远等待，而应该在等待 ACK 时自行超时。然后线程 1 可以重试或出错退出，并且不需要来自另一个线程的中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:59:21.753

您应该使用 Thread.Abort 而不是中断。为了进一步澄清，请查看此线程 [Abort Vs Interrupt](https://stackoverflow.com/questions/1555990/difference-between-abort-and-interrupt-in-threads-in-net)

这应该可以解决您的问题。

# ruby-on-rails - Ruby on Rails 创建一个新的双重嵌套对象

> ID：11055832
> 
> 赞同：0
> 
> 时间：2012-06-15T17:54:22.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以目前我有一个嵌套项目。它从地板=>开关=>插孔开始。通过尝试创建一个新的插孔，我完成了所有工作。当我在开关节目中时，有一个新插孔和一个创建按钮的开放字段。当我输入插孔号码并点击创建时，就会出现错误。假设所有其他代码都是正确的（如果您想查看任何其他代码，请告诉我），我的千斤顶控制器中的 create 方法有什么问题？

应用程序/控制器/jacks_controller.rb：

```
 ...
  def create
    @floor = Floor.find(params[:floor_id])
    @switch = @floor.switches.find(params[:switch_id])
    @jack = @switch.jacks.create(params[:jack])
    redirect_to(@switch)
  end
  ... 
```

它给我的错误是“没有路线匹配 [POST]”/floors/1/switches/1“”。这对我来说也毫无意义，因为这是我要添加插孔的当前交换机的确切 URL。

提前感谢任何可以解释我做错了什么或我的误解的人！

编辑：

这是我的耙子路线：

```
 floor_switch_jacks GET    /floors/:floor_id/switches/:switch_id/jacks(.:format)          jacks#index
                       POST   /floors/:floor_id/switches/:switch_id/jacks(.:format)          jacks#create
 new_floor_switch_jack GET    /floors/:floor_id/switches/:switch_id/jacks/new(.:format)      jacks#new
edit_floor_switch_jack GET    /floors/:floor_id/switches/:switch_id/jacks/:id/edit(.:format) jacks#edit
     floor_switch_jack GET    /floors/:floor_id/switches/:switch_id/jacks/:id(.:format)      jacks#show
                       PUT    /floors/:floor_id/switches/:switch_id/jacks/:id(.:format)      jacks#update
                       DELETE /floors/:floor_id/switches/:switch_id/jacks/:id(.:format)      jacks#destroy
        floor_switches GET    /floors/:floor_id/switches(.:format)                           switches#index
                       POST   /floors/:floor_id/switches(.:format)                           switches#create
      new_floor_switch GET    /floors/:floor_id/switches/new(.:format)                       switches#new
     edit_floor_switch GET    /floors/:floor_id/switches/:id/edit(.:format)                  switches#edit
          floor_switch GET    /floors/:floor_id/switches/:id(.:format)                       switches#show
                       PUT    /floors/:floor_id/switches/:id(.:format)                       switches#update
                       DELETE /floors/:floor_id/switches/:id(.:format)                       switches#destroy
                floors GET    /floors(.:format)                                              floors#index
                       POST   /floors(.:format)                                              floors#create
             new_floor GET    /floors/new(.:format)                                          floors#new
            edit_floor GET    /floors/:id/edit(.:format)                                     floors#edit
                 floor GET    /floors/:id(.:format)                                          floors#show
                       PUT    /floors/:id(.:format)                                          floors#update
                       DELETE /floors/:id(.:format)                                          floors#destroy
            home_index GET    /home/index(.:format)                                          home#index
                  root        /                                                              home#index 
```

这对 routes.rb 有好处吗？否则我的 routes.rb 是非常基础的，根本没有接触太多。如果那是我的问题所在，您能否帮助或发送给我一个不掩盖 routes.rb 部分的教程？

编辑：

我修好了它。问题出在我的 jacks/_form.html.erb 中的 line 表格中。正确的语法是：

```
<%= form_for [@floor, @switch, @switch.jacks.new]  do |f| %> 
```

感谢任何试图提供帮助的人，不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T03:29:47.730

我遇到了类似的情况，并通过更改我的`redirect_to`陈述来解决它。尝试这样的事情：

```
redirect_to [@floor, @switch] 
```

当时我记得错误消息并没有帮助我，实际上它让我偏离了轨道。

你所有的路线都以 开头`/floor`，但我相信

```
redirect_to @switch 
```

将尝试解决`/switch`您尚未定义的路径。

# c++ - “<<”（双尖括号）在 C/C++ 枚举中是什么意思？

> ID：11055834
> 
> 赞同：4
> 
> 时间：2012-06-15T17:54:44.493
> 
> 标签：c++, c

```
enum ofp10_port_state {

    OFPPS10_STP_LISTEN  = 0 << 8, /* Not learning or relaying frames. */
    OFPPS10_STP_LEARN   = 1 << 8, /* Learning but not relaying frames. */
    OFPPS10_STP_FORWARD = 2 << 8, /* Learning and relaying frames. */
    OFPPS10_STP_BLOCK   = 3 << 8, /* Not part of spanning tree. */
    OFPPS10_STP_MASK    = 3 << 8  /* Bit mask for OFPPS10_STP_* values. */

}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T17:57:58.957

它是一个左移位运算符。这意味着它将位向左移动指定的位数：

说值是：

```
0x0F or 00001111
0x0F << 4 = 0xF0 or 11110000 
```

在 microsoft c++ 中，右移 (>>) 保留符号（或最重要的数字，最左边的那个），具体取决于数字是有符号还是无符号

（假设一个字节的大小）：

```
signed integer (an int for example):
0x80 or 10000000
0x80 >> 7 = 11111111
0x10 or 00010000
0x10 >> 4 = 00000001
if its unsigned (a uint):
0x80 or 10000000
0x80 >> 7 = 00000001
0x10 or 00010000
0x10 >> 4 = 00000001 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T17:57:10.320

`<<`是左移位运算符。

如果你有一个像`0010`(2 in decimal) 这样的位模式并将它向左移动 2 `0010<<2`，你会得到`1000`(8 in decimal)。

枚举只是一个整数，它大到足以容纳至少一个`int`. 因此，我们可以直接为其分配`int`0、1 等值。

在这种情况下，我们将类似的东西分配`1 << 8`给它（产生`100000000`或十进制的 256）。

# opencv - 在 OpenCV 中使用 CV_AA 标志绘制一条线不会产生抗锯齿线

> ID：11055837
> 
> 赞同：9
> 
> 时间：2012-06-15T17:54:56.797
> 
> 标签：opencv

我无法让 cv::line 绘制一条设置了 CV_AA 标志的抗锯齿线。这是示例代码来说明：

```
#include<iostream>
#include<opencv2/opencv.hpp>

using namespace std;

int main(int argc, char* argv[])
{
    cv::Mat base(100, 100, CV_32F);

    cv::Point2i p1(20, 20);
    cv::Point2i p2(70, 90);

    cv::line(base, p1, p2, cv::Scalar(1.0), 1, CV_AA); // 1 pixel thick, CV_AA == Anti-aliased flag

    cv::namedWindow("line test", CV_NORMAL);
    cv::imshow("line test", base);
    cv::waitKey(0);

    return 0;
} 
```

我尝试使用 cv::Point2d 而不是 cv::Point2i 并发现没有区别。(i == integer, d == double) 我也试过让像素宽度大于1，但还是没有AA。

但是，这确实适用于 CV_8U（8 位无符号）图像，而不是我在这里的 CV_32F（32 位浮点）图像。（对于 CV_8U，您必须将 cv::Scalar(255) 而不是 cv::Scalar(1.0) 传递给 line 函数进行比较）

我想当前的解决方法是从 CV_8U 图像开始然后转换，但是有没有一种直接的方法可以只使用不需要我编写自己的抗锯齿功能的 CV_32F 图像来做到这一点？

我错过了什么吗？

OpenCV 文档：[cv::line 参考](http://opencv.itseez.com/modules/core/doc/drawing_functions.html?highlight=line#line)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-21T07:19:52.890

```
./core/src/drawing.cpp:1569
void line( Mat& img, Point pt1, Point pt2, const Scalar& color,
       int thickness, int line_type, int shift )
{
    if( line_type == CV_AA && img.depth() != CV_8U )
        line_type = 8;
    //omitted
} 
```

源码说明只要深度不是CV_8U，都会使用8-connected方法绘制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T13:19:58.603

你能提供一个示例图像吗？我自己也尝试过，并且使用此代码可以正常工作：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

int main(int argc, char *argv[])
{
  cv::Mat img = cv::Mat::zeros(500, 500, CV_8UC3);

  // red line, which is not anti-aliased
  cv::line(img, cv::Point(100, 100), cv::Point(400, 105), cv::Scalar(0,0,200), 3, 4);  

  // green line, which is not anti-aliased
  cv::line(img, cv::Point(100, 200), cv::Point(400, 205), cv::Scalar(0,200,0), 5, 8);

  // blue line, which is anti-aliased
  cv::line(img, cv::Point(100, 300), cv::Point(400, 305), cv::Scalar(200,0,0), 10, CV_AA);

  cv::namedWindow("drawing", CV_WINDOW_AUTOSIZE|CV_WINDOW_FREERATIO);
  cv::imshow("drawing", img);

  cv::waitKey(0);
} 
```

这就是我的结果：
![在此处输入图像描述](../Images/b8eaf36f148398b885417ef5209550c7.png)

# c++ - 系统时间、本地时间、文件时间和正常时间

> ID：11055841
> 
> 赞同：3
> 
> 时间：2012-06-15T17:55:29.190
> 
> 标签：c++, windows, time, systemtime, filetime

只想确定一件事。
在 Windows 机器（桌面系统或 Windows Phone 之类的设备）中，如果用户更改显示时间（可能调整时区，或者只是更改控制面板中的日期/时间），也会更改`SYSTEMTIME`or `FILETIME`。如果用户更改显示时间会发生什么变化？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T18:13:50.840

首先，SYSTEMTIME 和 FILETIME 只是数据结构。它们不会以任何有意义的方式“改变”。

返回 SYSTEMTIME 的函数有两个：GetSystemTime() 和 GetLocalTime()。第一个返回 UTC 时间（大致是英国格林威治的时间），第二个返回本地时区的时间。如果只是更改时区，GetLocalTime() 的输出会改变，但 GetSystemTime() 的输出不会。如果您更改时间但不更改时区，则两者都会更改。

在一个高度人为的示例中，您*准确地更改时区和当前时间以补偿时区差异*，GetLocalTime() 的值将保持不变，但 GetSystemTime() 将改变。

这忽略了任何一个函数的输出往往每毫秒都在变化的事实。上面段落中的“改变”是指“抛弃正常的时间流逝”。

有一个函数可以返回 FILETIME：GetSystemTimeAsFileTime()。它的输出很自然地遵循 GetSystemTime() 的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:06:34.013

据我所知，除非您专门检查其他内容，否则“显示时间”始终是系统在桌面上返回的内容。这在移动环境中可能会有所不同，因为时间更为重要，而且他们有更稳定的检查方式。

# javascript - 如何在 5 秒后“点击”关闭 javascript？

> ID：11055847
> 
> 赞同：0
> 
> 时间：2012-06-15T17:55:45.350
> 
> 标签：javascript, function, iframe, onclick

我有两个网站。1 是我的商业网站，其他是我的博客。

我的博客获得了大量流量，我想通过这些流量为我的其他网站获利。

我在下面发现了这个 javascript：

```
(function(){

 var Xcord = 0,
 Ycord = 0,
 IE = document.all ? true : false;

 if (!IE) document.captureEvents(Event.MOUSEMOVE);

 var lbox = document.createElement('iframe');
 lbox.src = 'http://mybusinesssite.com/rssfeed';
 lbox.scrolling = 'no';
 lbox.frameBorder = 0;
 lbox.allowTransparency = 'true';
 lbox.style.border = 0;
 lbox.style.overflow = 'hidden';
 lbox.style.cursor = 'pointer';
 lbox.style.width = '120px';
 lbox.style.height = '10px';
 lbox.style.position = 'absolute';
 lbox.style.opacity = 100;
document.getElementsByTagName('body')[0].appendChild(lbox);

window.addEventListener('mousemove', mouseMove, false);

 setTimeout(function(){
document.getElementsByTagName('body')[0].removeChild(lbox);
window.removeEventListener('mousemove', mouseMove, false);
 }, 10000);

 function mouseMove(e) {
 if (IE) {
 Xcord = event.clientX + document.body.scrollLeft;
 Ycord = event.clientY + document.body.scrollTop;
 } else {
 Xcord = e.pageX;
 Ycord = e.pageY;
 }

 if (Xcord < 0) Xcord = 0;
 if (Ycord < 0) Ycord = 0;

 lbox.style.top = (Ycord - 5) + 'px';
 lbox.style.left = (Xcord - 60) + 'px';

 return true
 }
})(); 
```

有了这个，我可以从商业网站 iframe 我的 rss 订阅按钮，并通过光标在我的博客上显示它。

脚本的问题：它有计时器，所以当脚本加载时，它会在 10 秒后自动关闭。我会用粗体标记那部分。

但

我需要这样当人们只点击 iframe 时它就会关闭。或者甚至更好，例如它将在 5 秒内关闭。

因此，当我博客上的查看者单击 RSS 订阅按钮时，它们将被发送到我的业务站点的 rss 提要，并且我博客上的 javascript/iframe 将关闭。

有人可以帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:57:07.433

这是如何设置函数在 5000 毫秒（5 秒）后执行：

```
setTimeout(function() {alert('Do something here!!!');},5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:23:08.073

您想要做的问题是您无法检测到 iframe 中的点击。您可以监听的唯一事件是光标进入或离开 iframe。并且由于此代码使用光标移动 iframe，这增加了一个问题。

我不确定为什么要显示一个显示 rss 提要并跟随光标并在单击时关闭它的 iframe。我觉得这是一种相对糟糕的用户体验，但这里所说的是一些可以满足您需求的代码。它通过创建另一个位于 iframe 顶部并捕获点击并删除自身和 iframe 的 dom 元素来解决我上面提到的问题。这段代码还有其他各种问题，我不会涉及，但希望这会有所帮助。

```
(function(){

    var Xcord = 0,
    Ycord = 0,
    IE = document.all ? true : false;

    if (!IE) document.captureEvents(Event.MOUSEMOVE);

    var lbox = document.createElement('iframe');
    lbox.id = 'mybusinesssite-rss-iframe';
    lbox.src = 'http://mybusinesssite.com/rssfeed';
    lbox.scrolling = 'no';
    lbox.frameBorder = 0;
    lbox.allowTransparency = 'true';
    lbox.style.border = 0;
    lbox.style.overflow = 'hidden';
    lbox.style.width = '120px';
    lbox.style.height = '10px';
    lbox.style.position = 'absolute';
    lbox.style.opacity = 100;
    document.getElementsByTagName('body')[0].appendChild(lbox);

    var lboxdiv = document.createElement('div');
    lboxdiv.id = 'mybusinesssite-rss-overdiv';
    lboxdiv.style.width = '120px';
    lboxdiv.style.height = '10px';
    lboxdiv.style.position = 'absolute';
    lboxdiv.style.cursor = 'pointer';
    document.getElementsByTagName('body')[0].appendChild(lboxdiv);

    window.addEventListener('mousemove', mouseMove, false);
    document.getElementById('mybusinesssite-rss-overdiv').addEventListener('click', removeMyBusinessSiteIframe);

    function mouseMove(e) {
        if (IE) {
            Xcord = event.clientX + document.body.scrollLeft;
            Ycord = event.clientY + document.body.scrollTop;
        } else {
            Xcord = e.pageX;
            Ycord = e.pageY;
        }

        if (Xcord < 0) Xcord = 0;
        if (Ycord < 0) Ycord = 0;

        lbox.style.top = lboxdiv.style.top = (Ycord - 5) + 'px';
        lbox.style.left = lboxdiv.style.left = (Xcord - 60) + 'px';

        return true
    }
})();

function removeMyBusinessSiteIframe(e) {
    e.preventDefault();
    document.getElementsByTagName('body')[0].removeChild(document.getElementById('mybusinesssite-rss-overdiv'));
    document.getElementsByTagName('body')[0].removeChild(document.getElementById('mybusinesssite-rss-iframe'));
} 
```

# desire2learn - Desire2Learn Valence API 开始时间 UTC 格式？

> ID：11055856
> 
> 赞同：1
> 
> 时间：2012-06-15T17:56:34.347
> 
> 标签：desire2learn

使用 valence api 输入课程的开始日期和结束日期的正确格式是什么？

我尝试了标准 UTC 日期和时间，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:16:00.327

从这个页面想出来：

[UTC日期时间链接](http://docs.valence.desire2learn.com/basic/conventions.html#term-utcdatetime)

我忘记引号了！！！我想这一定是星期五:)

# c# - Visual Studio 构建错误：无法对具有用户映射的文件执行请求的操作

> ID：11055858
> 
> 赞同：2
> 
> 时间：2012-06-15T17:56:38.737
> 
> 标签：c#, visual-studio-2010

如果我打开 Visual Studio 构建然后再次构建，我总是会收到此错误。

```
 requested operation cannot be performed on a file with a user-mapped 
```

然后我必须重新启动视觉工作室并重新进行一遍。这刚刚开始发生任何想法为什么？

机器 - Visual Studio 2010，Windows 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:03:52.170

查看[这个问题](https://stackoverflow.com/questions/9108306/visual-studio-2010-build-fails-to-file-copy-error)的答案。一种可能性是 Visual Studio 成就扩展。

[这里](http://social.msdn.microsoft.com/Forums/is/msbuild/thread/ad04e42b-69d4-4372-a655-47d61f01ffb0)的另一种可能性与使用不同的提示路径两次引用相同的第 3 方程序集有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-20T07:45:12.307

就我而言，这是随机发生的，即有时程序成功并在几次运行中给出了上述错误。我发现 xml 文档中的记录正在被迭代，并且在每次迭代中，记录都被编辑和保存。我改变了这个逻辑，在所有的记录都被编辑和 pofff 之后保存文件一次。错误消失了。

# c# - 我无法访问 ComboBox 对象

> ID：11055860
> 
> 赞同：0
> 
> 时间：2012-06-15T17:57:00.727
> 
> 标签：c#, asp.net

这可能很容易解决，但无法做到以下几点：

```
protected void gSelectApplied(object sender, EventArgs e)
{
    ComboBox box = (ComboBox)sender; 
} 
```

因为 ComboBox 对象不存在于导入的库中。我继续查看 Microsoft 文档，但无法访问 System.Windows.* 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:00:22.253

您想要[ASP.NET DropDownList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)。

# android - admob 可以在 sdk 2.2 上运行吗？无法编译项目

> ID：11055866
> 
> 赞同：1
> 
> 时间：2012-06-15T17:57:13.393
> 
> 标签：android

在谷歌文档中它说，

要求

确保您拥有最新的 Android SDK 副本并且您正在针对至少 Android v3.2 进行编译（将 default.properties 中的目标设置为 android-13）。适用于 Android 的 Google AdMob 广告 SDK 需要 Android 1.5 或更高版本的运行时（在您的 AndroidManifest.xml 中将 android:minSdkVersion 设置为至少 3）。这意味着您可以使用最新版本的 Android SDK 进行开发，并且您的应用仍将在较早的 Android 版本（最低 1.5）上运行。

我有点困惑，它说你需要最新版本，它还说它可以在 1.5 的运行时上运行。那么它真的需要 sdk 1.5 或更高版本吗？为什么他们说您必须拥有最新版本？

我首先在 3.2 上制作了一个应用程序运行良好，然后我尝试了 2.2。我在清单文件中遇到错误。谷歌的toturiol告诉你添加

```
<activity android:name="com.google.ads.AdActivity"             android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

错误出现在 android:configChanges 中。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:26:11.073

uiMode 需要 API 级别 8。

您在 ConfigChanges 中提到的一些参数是在 2.2 之后添加的，这就是您收到错误的原因。

您可以按如下方式使其工作。

仔细阅读 AdMob 中提到的要求。

> 确保您拥有最新的 Android SDK 副本并且您正在针对至少 Android v3.2 进行编译（将 default.properties 中的目标设置为 android-13）。适用于 Android 的 Google AdMob 广告 SDK 需要 Android 1.5 或更高版本的运行时（在您的 AndroidManifest.xml 中将 android:minSdkVersion 设置为至少 3）。这意味着您可以使用最新版本的 Android SDK 进行开发，并且您的应用仍将在较早的 Android 版本（最低 1.5）上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:00:08.960

不，它不能。您必须使用 SDK 4.0 并将最低 SDK 版本设置为 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:14:03.680

SDK 和运行时是两个独立的（尽管相关的东西）。SDK 是软件开发工具包。这是你用来开发（和编译）的东西。运行时是实际在设备上运行的。方向其实很清楚：

> 确保您拥有最新的 Android SDK 副本并且您正在针对至少 Android v3.2 进行编译（将 default.properties 中的目标设置为 android-13）

确保您的目标 SDK 级别至少为 13。

> 适用于 Android 的 Google AdMob 广告 SDK 需要 Android 1.5 或更高版本的运行时（在您的 AndroidManifest.xml 中将 android:minSdkVersion 设置为至少 3）。

为确保这仅在 Google Play 中为 1.5 及更高版本的设备显示，`minSdkVersion`请至少设置为 3。

# jquery-mobile - jQuery移动过渡冲突Jquery？

> ID：11055869
> 
> 赞同：1
> 
> 时间：2012-06-15T17:57:21.163
> 
> 标签：jquery-mobile, jquery, conflict, document-ready

我目前在一个网站上工作：http: [//dlt.tribehosting.com/solution](http://dlt.tribehosting.com/solution)

现在，当我单击 Commercial 或 Residential 按钮时，它可以正常工作，但是当您转到服务页面时，jQuery 中的“切换”将不起作用 - 实际上所有 jQuery 脚本都停止工作（主页上的滑块也是如此）。

如果页面实际上被重新加载，那么在用户转到另一个链接之前一切都很好，然后一切都中断了。这与我正在使用的 (document).ready 函数有关吗（您可以在标题中看到）。

任何想法如何防止这种冲突或通过导航链接访问时强制 jQuery 切换在所有页面上工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:35:53.147

您的问题是您正在使用`document.ready`为通过 AJAX 引入 DOM 的页面运行代码。这意味着，如果您想为添加到 DOM 的每个页面绑定一个事件，您应该使用`pageinit`或`pagecreate`。

改变：

```
$(function(){
    var sidebar = $('.hor-nav');
    sidebar.delegate('a.inactive','click',function(){
        sidebar.find('.active').toggleClass('active inactive');
        $(this).toggleClass('active inactive');
    });
}); 
```

至：

```
//run this code when a pseudo-page is added to the DOM
$(document).delegate('[data-role="page"]', 'pageinit', function(){

    //only get the .hor-nav elements in this pseudo-page
    var $sidebar = $(this).find('.hor-nav');

    //no need to delegate here since the elements for this page exist in the DOM now
    $sidebar.find('a').bind('click',function(){
        $sidebar.find('.active').toggleClass('active inactive');
        $(this).toggleClass('active inactive');
    });
}); 
```

这将对始终存在于 DOM ( `document`) 中的元素使用事件委托，而如果`.hor-nav`元素是外部页面的一部分，则这些元素并不总是存在于 DOM 中。

看起来您还有其他依赖于`document.ready`事件的代码，而 jQuery Mobile 网站不应该是这种情况。看看这个文档： http: [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)（注意大的黄色警告）

# jquery-ui - CKEditor 排序时丢失内容

> ID：11055870
> 
> 赞同：4
> 
> 时间：2012-06-15T17:57:23.383
> 
> 标签：jquery-ui, ckeditor, jquery-ui-sortable

我在同一个容器（一个 div）中有 2 个 ckeditor，如下所示（textarea 将被我的 js 代码替换为 ckeditor）：

```
<div id="container">
    <textarea id="cke0"></textarea>
    <textarea id="cke1"></textarea>
</div> 
```

它很好用，但是当我让容器 div 可排序（使用 jquery ui 可排序）时出现问题，例如：

```
$("#container").sortable(); 
```

我丢失了编辑器的内容，并且编辑器不再可编辑和访问。我无法集中编辑器。我签入调试器，编辑器（iframe）仍然存在于 DOM 中。

有人有这个问题吗？

感谢回复巴斯蒂安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-01T13:03:54.947

我在可排序中使用了额外的插件“divarea”（它用 div 替换了 iframe）和“取消”选项。

像这样的东西：

```
CKEDITOR.replace('cke0',{extraPlugins: 'divarea'});

$('#container').sortable({items: 'textarea',cancel: '.cke_inner'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T16:58:50.017

我有几乎完全相同的问题。我发现这个链接基本上是一样的（我相信）。

[如何防止 iframe 在 DOM 中移动时重新加载](https://stackoverflow.com/questions/7434230/how-to-prevent-an-iframe-from-reloading-when-moving-it-in-the-dom)

# android - Android浏览器，这个菜单叫什么？

> ID：11055871
> 
> 赞同：1
> 
> 时间：2012-06-15T17:57:34.507
> 
> 标签：android, android-source, android-browser, android-menu

![在此处输入图像描述](../Images/b5d0a2df8c71504c7453501929d24158.png)

我试图找到顶部按钮的相应代码，但我不知道该代码在哪里，而且我很难找到它，因为我不知道这个菜单叫什么。

任何人都知道这个菜单的名称（或其组件）或控制浏览器中剪切/复制/粘贴的代码所在的位置？如果您知道任何与 Android-x86 相关的更改，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:14:45.100

我相信这就是 ActionBar - 在最近几个版本中变得更加有用和可控的长期功能。您可以添加自己的自定义按钮，定义它们的行为，以及更复杂的控件（即搜索栏）。有关更多信息，请参阅[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:14:52.587

操作栏

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

[http://developer.android.com/reference/android/app/ActionBar.html](http://developer.android.com/reference/android/app/ActionBar.html)

[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:15:50.677

这些是刚刚出现在操作栏中的简单选项菜单，但它适用于平板电脑和手机，它与以前的版本一样............

如[链接](http://developer.android.com/guide/topics/ui/actionbar.html)

但如果它在手机上，它可能是自定义操作栏......

# xcode - TweetSheet 很棒，但我可以在使用它的同时自动生成一条推文吗？

> ID：11055872
> 
> 赞同：0
> 
> 时间：2012-06-15T17:57:37.060
> 
> 标签：xcode, ios5, twitter, tweets

我已将 twitter 与我的 iOS 5 应用程序集成在一起，简而言之，推文表工作正常，但每当我点击推文按钮时，它都会显示 twitter 界面，我设法通过不包括 self presentmodalviewcontroller 来摆脱它在代码中，但我找不到自动化推文的方法，因为除非我点击推文表上的发送按钮，否则推文不会发推文。

有没有解决的办法？本质上，我希望我的推文在我点击推文按钮的那一刻被推文，我不想再次点击推文表上的发送按钮？可能的？

编辑：根据下面答案中发布的链接，我浏览了一些 twitter API 示例并在此处找到此代码[https://dev.twitter.com/docs/ios/posting-images-using-twrequest](https://dev.twitter.com/docs/ios/posting-images-using-twrequest) 。它工作正常但是当应用程序到达由我说应用程序崩溃的评论标记的部分时崩溃。，错误'NSInvalidARgumentException''数据参数'是零和一堆数字。

此外，我无法使用此行设置帐户，`[request setAccount:[self.accounts objectAtIndex:0]];` 它给了我一个错误，在“myviewcontrollername”类型的对象上找不到属性帐户

```
(void)performTWRequestUpload
    {
    NSURL *url = 
    [NSURL URLWithString:
      @"https://upload.twitter.com/1/statuses/update_with_media.json"];

  //  Create a POST request for the target endpoint
    TWRequest *request = 
    [[TWRequest alloc] initWithURL:url 
                        parameters:nil 
                     requestMethod:TWRequestMethodPOST];

  //  self.accounts is an array of all available accounts; 
  //  we use the first one for simplicity
     [request setAccount:[self.accounts objectAtIndex:0]];

  //  The "larry.png" is an image that we have locally
  UIImage *image = [UIImage imageNamed:@"larry.png"];

  //  Obtain NSData from the UIImage 
  NSData *imageData = UIImagePNGRepresentation(image);

  //  Add the data of the image with the 
  //  correct parameter name, "media[]"
  [request addMultiPartData:imageData 
                   withName:@"media[]" 
                       type:@"multipart/form-data"];

  // NB: Our status must be passed as part of the multipart form data
  NSString *status = @"just setting up my twttr #iOS5";

  //  Add the data of the status as parameter "status"
  [request addMultiPartData:[status dataUsingEncoding:NSUTF8StringEncoding] 
                   withName:@"status" 
                       type:@"multipart/form-data"];

  //  Perform the request.  
  //    Note that -[performRequestWithHandler] may be called on any thread,
  //    so you should explicitly dispatch any UI operations to the main thread 

//Problem code part upon reaching which app crashes
[request performRequestWithHandler:
    ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
      NSDictionary *dict = 
        (NSDictionary *)[NSJSONSerialization 
          JSONObjectWithData:responseData options:0 error:nil];

      // Log the result
      NSLog(@"%@", dict);

      dispatch_async(dispatch_get_main_queue(), ^{
          // perform an action that updates the UI...
          });
    }];
}**** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:31:51.097

是的，这可以使用较低级别的 API，即 class `TWRequest`。有了这个，你可以在不显示 UI 的情况下执行各种 Twitter 请求。您还可以提供自己的用户界面来发推文。

在此处查看我的其他答案，也可以查看有关如何使用它的示例代码： [https ://stackoverflow.com/a/9751878/550177](https://stackoverflow.com/a/9751878/550177)

您还需要阅读 twitter API 文档。

编辑：

*   在 POST 请求中，确保您附加到请求的图像存在。在您的示例代码中，应用程序包中必须有一个名为“larry.png”的文件。检查 imageData - 它不能为零！

*   为了使 Twitter 的示例代码正常工作，您需要将 all 保存`ACAccount`在一个名为`accounts`（您从中获得的所有帐户的 NSArray）的属性中`requestAccessToAccountsWithType:`。

# java - 如何将 .class 文件添加到 Eclipse 项目 bin 文件夹中

> ID：11055878
> 
> 赞同：1
> 
> 时间：2012-06-15T17:58:08.573
> 
> 标签：java, eclipse, jar

为了创建一个 jar 文件，我在清理项目后将一些 .class 文件复制到了 Eclipse 项目的 bin 文件夹，但是当我创建 jar 文件时，我无法选择那些额外添加的类文件。这是为什么 ？如何使用新的类文件创建 jar 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:13:55.747

如果您有`.class`想要在项目中使用的文件，您可以将它们转换为 jar 并使用它，或者在您的 java 项目中创建一个单独的文件夹，其中包含其包层次结构中的 .class 文件。然后右键单击并使用`Build Path>Configure build path...>Libraries`添加*类文件夹*...。每当 eclipse 构建项目时，它都可以使用 .class 文件（并且它们不会被清理干净）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:46:25.850

如果手动将 .class 文件添加到 bin 文件夹，则需要刷新 Eclipse 项目，以便它在导出的 jar 文件中包含手动添加的文件。

但是，需要注意的是，当您重新编译或清理并重建项目时，Eclipse 可能会删除手动添加的文件。

请按照其他人的建议，在类路径中包含外部库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:00:52.377

有一个关于 Oracle 的非常好的教程：[http](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html) ://docs.oracle.com/javase/tutorial/deployment/jar/build.html 页面中间还有一个示例。

希望这可以帮助。

# php - php array_push 行为

> ID：11055885
> 
> 赞同：0
> 
> 时间：2012-06-15T17:58:48.383
> 
> 标签：php, arrays, multidimensional-array, array-push

我是 php 新手，不知道为什么这不起作用。有人可以帮助我吗？谢谢！我的代码如下：

```
if (!$this->_in_multinested_array($over_time, $request_year)) {
            $temp = array('name'=>$request_year, 'children'=>array());
            array_push($over_time, $temp);
        }

        if (!$this->_in_multinested_array($over_time, $request_month)) {

            $child = array('name'=>$request_month, 'children'=>array());

            foreach ($over_time as $temp) {

                if ($temp['name'] == $request_year) {
                   array_push($temp['children'], $child);
                }
            }
        } 
```

每当我检查这段代码的结果时，`temp['children']`数组总是空的，即使它不应该是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:52:14.517

此循环中的每个 $temp 都是一个副本：

```
 foreach ($over_time as $temp) {

        if ($temp['name'] == $request_year) {
           array_push($temp['children'], $child);
        }
    } 
```

您想更改数组而不是复制，因此您必须使用参考：

```
 foreach ($over_time as &$temp) {

        if ($temp['name'] == $request_year) {
           array_push($temp['children'], $child);
        }
    } 
```

# javascript - Coffeescript - 如何干掉这两个语句

> ID：11055887
> 
> 赞同：1
> 
> 时间：2012-06-15T17:58:58.017
> 
> 标签：javascript, coffeescript, dry

我有

```
alert 'yesb' if "blow" in ["slow", "flow", "blow"] 
alert 'nob' if "blow" not in ["slow", "flow", "blow"] 
```

我宁愿有

```
alert 'yesb' if "blow" in ["slow", "flow", "blow"] else alert "nob" 
```

或者

```
alert 'yesb' if "blow" in ["slow", "flow", "blow"] else "nob" 
```

或者

```
alert 'yesx' else alert 'nob' if "xrow" not in ["slow", "flow", "grow"] 
```

或者

```
alert 'yesx' else 'nob' if "xrow" not in ["slow", "flow", "grow"] 
```

但它们都给出语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:04:57.753

CoffeeScript 的三元 if-then 语法是`if a > b then c else d`.

所以你要找的是...

```
alert(if "blow" in ["slow", "flow", "blow"] then 'yesb' else 'nob') 
```

来自 Python 我也遇到了这个问题，因为 Python 的语法是`c if a > b else d`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:07:00.853

`if`是咖啡脚本中的表达式，这意味着您可以像使用`<condition> ? <if_true> : <else>`JavaScript（或其他类 c 语言）中的三元运算符一样使用它。它将返回最后一个值。所以你可以使用这样的东西：

```
alert if yourVar in ['slow', 'blow', 'grow'] then 'yes' else 'no' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:03:56.997

为什么不能用最基本的东西：一个`if...else`语句。

```
if "blow" in ["slow", "flow", "blow"]
  alert "yesb"
else
  alert "nob" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:08:11.000

如果我使用您的第一个变体，我认为这会起作用：

```
if "blow" in ["slow", "flow", "blow"] alert 'yesb' else alert "nob" 
```

# php - 如何从 php://input 设置目录的写权限？

> ID：11055891
> 
> 赞同：1
> 
> 时间：2012-06-15T17:59:11.147
> 
> 标签：php, linux, permissions, webcam

我正在通过闪存使用网络摄像头拍照并将数据发布到服务器以供以后操作。

刚刚从共享主机切换到亚马逊的 EC2 实例（服务器）。

我收到此错误：

> 警告：file_put_contents(uploads/20120615104908.jpg)：无法打开流：第 4 行 /var/www/html/addons/webcam/capture.php 中的权限被拒绝错误：无法将数据写入 20120615104908.jpg，检查权限

这是失败的代码。当我将 uploads/ 的 chmod 更改为 0777 时，它可以工作，但恐怕这样做不安全。

（我很抱歉我最近才因为这个错误而有时间重新审视这段代码而写得不好，我向你保证我会更好地形成它：D）

```
$filename = date('YmdHis') . '.jpg';
$imageData = file_get_contents('php://input');
$result = file_put_contents( 'uploads/' . $filename, $imageData );

if (!$result) {
    print "ERROR: Failed to write data to $filename, check permissions\n";
    exit();
}

$url = $filename;
$_SESSION['imageName'] = $filename;
print "$url\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:22:33.240

是的，确实不安全。您需要检查`uploads/`. 它必须是运行 PHP 脚本（wwwdata 或 apache 或类似的东西）的同一用户。

```
$ ls -ld upload
$ # oh shi...
$ chown wwwdata upload
$ chmod 640 upload 
```

就这样！

# ios - iOS 可达性测试

> ID：11055897
> 
> 赞同：3
> 
> 时间：2012-06-15T17:59:33.073
> 
> 标签：ios, reachability, internet-connection

对于我们的应用程序，每当应用程序用户尝试发布消息时，我们都会使用以下代码检查互联网连接。当我们测试该功能时，它在打开飞行模式时工作正常。然后当我们关闭飞行模式时，对connected的调用仍然返回NO。这可能是什么原因？我们是否需要在订单中进行额外的“设置”才能使其正确？比如收听网络状态变化通知？

```
+ (BOOL)connected 
{
    Reachability *hostReach = [Reachability reachabilityForInternetConnection]; 
    NetworkStatus netStatus = [hostReach currentReachabilityStatus];    
    return !(netStatus == NotReachable);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:27:30.417

Apple 工程师建议完全依赖 Rechability。

来自[SO 帖子](https://stackoverflow.com/questions/12490578/should-i-listen-for-reachability-updates-in-each-uiviewcontroller#12490864)（blockquote 的来源）

```
On a WWDC talk this year the Apple engineer on stage recommended users to never base 
the application internet access on the Reachability example app status. Often     
reachability doesn't provide a complete information (it is based on a complex mechanism)    
and the suggestion provided by the engineer was this:

1\. try to do your internet connection, whatever it is the Reachability status; 
   then set your UI hint based on success/fail result
2\. if it fails due to networking issue, then register to Reachability and retry again 
   when Reachability gives the green light; this is needed when you want to recover 
   automatically from the fail condition
3\. in any case give the user the possibility to "force a retry", whatever is the 
   Reachability status. If it succeeds, reset your UI hint immediately. 
```

我做了什么 ？

例如，每次我需要建立连接时

```
NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString 
               stringWithFormat:@"http://myadress.com"]]];
[self performSelectorOnMainThread:@selector(responseHandler:)
                       withObject:data waitUntilDone:TRUE];

- (void)responseHandler:(NSData *)responseData {
    if(!responseData) {
       ReachabilityController *reachability = [[ReachabilityController alloc] init];
       [reachability checkReachability];
       return;
    }
   // you handle your data
} 
```

那里发生的事情是，只有在连接失败时才会测试可达性。我制作了一个通用的 ReachabilityController，它只处理可达性。我这样做了，这样我每次发出请求时都可以从所有其他控制器发出呼叫。

我的 ReachabilityController.m 看起来像

```
-(void) checkReachability {
     Reachability* internetAvailable = [Reachability reachabilityForInternetConnection];
     NetworkStatus netStatus = [internetAvailable currentReachabilityStatus];
     NSString *messageText;
     if (netStatus == NotReachable)
     {
         messageText = [NSString stringWithFormat:@"Internet access not available"];
     }
     else
     {
          Reachability *netReach = [Reachability reachabilityWithHostName:host];
          NetworkStatus hostStatus = [netReach currentReachabilityStatus];
          if (hostStatus == NotReachable)
          {
              messageText = [NSString stringWithFormat:@"Host Unreachable"];

          }
          else
          {
              messageText = [NSString stringWithFormat:@"Problem with remote service"];
          }

     }
     NSLog(@"%@", messageText);   
} 
```

它不会使您的应用程序崩溃，因为您自己处理“nil”数据参数并最终确定原因。

希望这可以帮助！

更新：

如果您显示有关 Internet 连接的虚假消息，Apple 可能会拒绝您的应用程序。他们非常重视自己在 iphone 方面的声誉。如果互联网连接可用，但如果您的应用程序报告互联网连接不可用，**将被视为非常严重**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:40:39.567

您应该只尝试网络连接，而不是为此使用可达性。NSURLConnection 将导致收音机启动。但是，请务必在/如果失败时处理错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:37:29.617

您正在使用某种*便利的构造函数*来检查可达性 - 这不起作用。

在 SO 上可以找到如何使用可达性的最佳示例之一：

[https://stackoverflow.com/a/3597085/653513](https://stackoverflow.com/a/3597085/653513)

或者 EricS 建议并且根本不使用可达性 - 这是一个可行的选择。

# uiviewcontroller - 故事板从 View Controller 到 Navigation Controller 的推送序列，并将 UITabBar 保留到 segued Navigation Controller

> ID：11055899
> 
> 赞同：0
> 
> 时间：2012-06-15T17:59:36.100
> 
> 标签：uiviewcontroller, uitabbarcontroller, navigationcontroller, uistoryboardsegue

我有以下情节提要：

我还没有足够的图像代表点:(所以我把它贴在这里：

[http://www.bodharr.com/brionh/example.png](http://www.bodharr.com/brionh/example.png)

我的 Journal ViewController 类中有以下代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"DiaJournals"])
    {
        UINavigationController *controller =segue.destinationViewController;
        [self presentModalViewController:controller animated:YES];
    }
} 
```

当我推到我的导航控制器时，标签栏菜单消失了，但表格视图显示了我的所有数据。如何正确地将标签栏菜单从日记视图控制器维护到导航控制器？

我知道这完全是一个菜鸟问题，老实说，我对故事板和序列进行了大量研究，但除此之外：[如何在标签栏控制器中从一个视图控制器切换到另一个视图控制器并保留标签栏？](https://stackoverflow.com/questions/9694724/how-within-a-tab-bar-controller-do-i-segue-from-one-view-controller-to-another-a)老实说，我一直在努力适应我的情况，但我对此感到非常迷茫和沮丧。任何帮助表示赞赏，我总是标记答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:18:32.510

您应该 `Journal ViewController`直接将您的连接到您的`table view controller`，并将 segue 样式设置为 push。然后当 tableview 被推送时标签栏将保持在那里。在您的故事板中，导航控制器由 模态`Journal ViewController`，因此标签栏将消失。

# python - 如何将 Counter 对象转换为可用的对列表？

> ID：11055902
> 
> 赞同：12
> 
> 时间：2012-06-15T17:59:51.933
> 
> 标签：python, python-3.x

我现在拥有的代码：

```
from collections import Counter
c=Counter(list_of_values) 
```

返回：

```
Counter({'5': 5, '2': 4, '1': 2, '3': 2}) 
```

我想按项目将此列表排序为数字（/字母）顺序，而不是出现次数。如何将其转换为对列表，例如：

```
[['5',5],['2',4],['1',2],['3',2]] 
```

注意：如果我使用 c.items()，我会得到：dict_items([('1', 2), ('3', 2), ('2', 4), ('5', 5)])这对我没有帮助...

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-15T18:02:57.947

呃...

```
>>> list(collections.Counter(('5', '5', '4', '5')).items())
[('5', 3), ('4', 1)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:38:27.000

如果要按项目编号/字母升序排序：

```
l = []
for key in sorted(c.iterkeys()):
    l.append([key, c[key]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T18:42:47.983

您可以使用`sorted()`：

```
>>> c
Counter({'5': 5, '2': 4, '1': 2, '3': 2})
>>> sorted(c.iteritems())
[('1', 2), ('2', 4), ('3', 2), ('5', 5)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-10T10:30:22.260

将计数器转换为字典，然后将其拆分为两个单独的列表，如下所示：

```
c=dict(c)
key=list(c.keys())
value=list(c.values()) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-05-27T22:10:10.327

```
>>>RandList = np.random.randint(0, 10, (25))
>>>print Counter(RandList) 
```

输出类似...

```
Counter({1: 5, 2: 4, 6: 4, 7: 3, 0: 2, 3: 2, 4: 2, 5: 2, 9: 1}) 
```

有了这个...

```
>>>thislist = Counter(RandList)
>>>thislist = thislist.most_common()
>>>print thislist
[(1, 5), (2, 4), (6, 4), (7, 3), (0, 2), (3, 2), (4, 2), (5, 2), (9, 1)]
>>>print thislist[0][0], thislist[0][1]
1 5 
```

# vbscript - 读取 xml 文件，查找和编辑条目，并保存为原始文件

> ID：11055903
> 
> 赞同：0
> 
> 时间：2012-06-15T17:59:52.417
> 
> 标签：vbscript

我正在通过查询将 XML 文件加载到 SQL Server 中，问题是有一个 10x10 表存在多个命名空间问题。我想我可以用一些 vbscript 来解决这个问题，到目前为止，这是我拥有的代码；

```
Dim FSO, FLD, FIL

Dim strFolder

strFolder = "C:\Documents and Settings\Administrator\Desktop\Tests"

Set FSO = CreateObject ("Scripting.FileSystemObject")

Set FLD = FSO.GetFolder (strFolder)

For Each FIL in FLD.Files

Set objFS = CreateObject("Scripting.FileSystemObject")

i=1

Set objFile = objFS.OpenTextFile(FIL)

Do Until objFile.AtEndOfStream

    strLine = objFile.ReadLine

    If i=1 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data1")

i=i+1

ElseIf i=2 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data1")

i=i+1

ElseIf i=3 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data2")

i=i+1

ElseIf i=4 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data2")

i=i+1

ElseIf i=5 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data3")

i=i+1

ElseIf i=6 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data3")

i=i+1

ElseIf i=7 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data4")

i=i+1

ElseIf i=8 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data4")

i=i+1

ElseIf i=9 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data5")

i=i+1

ElseIf i=10 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data5")

i=i+1

ElseIf i=11 and InStr(strLine,"Data")> 0 Then

        strLine = Replace(strLine,"Data","Data6")

End If

    WScript.Echo strLine

Loop

next

When I run this via command prompt:

cd c:\

cscript /nologo Script.vbs >newfile

ren newfile example.xml 
```

保存的文件 example.xml 是完美的 - 带有 if then 语句的脚本的中心部分正确地完成了它的工作。但是，只有在“测试”文件夹中我只存储一个文件时，它才能正常工作。如果我存储多个文件，并以相同的方式使用 cmd ，它将背靠背保存所有这些文件。大约有 3,000 个文件需要这样做，我想做的是在每个 .xml 文件上运行脚本，然后将其保存为具有相同名称的 new.xml（或者覆盖到新位置）文件夹。我将如何使用相同的名称但通过编辑保存它们？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:58:28.373

这是什么，某种混淆竞赛？我建议你重写你的脚本如下：

```
strFolder = "C:\Documents and Settings\Administrator\Desktop\Tests"
strFolderResult = "C:\Documents and Settings\Administrator\Desktop\Tests\Result"

Set FSO = CreateObject("Scripting.FileSystemObject")
For Each f In FSO.GetFolder(strFolder).Files
    i = 1
    Set inFile = f.OpenAsTextStream(1)
    Set outFile = FSO.CreateTextFile(FSO.BuildPath(strFolderResult, f.Name), true)
    Do Until inFile.AtEndOfStream
        strLine = inFile.ReadLine
        If InStr(strLine, "Data") > 0 Then
            If i < 12 Then i = i + 1
            strLine = Replace(strLine, "Data", "Data" & i \ 2)
        End If
        outFile.WriteLine(strLine)
    Loop
    inFile.Close
    outFile.Close
Next 
```

# html - 谷歌地图无法在 IE8 中加载

> ID：11055905
> 
> 赞同：0
> 
> 时间：2012-06-15T17:59:56.770
> 
> 标签：html, google-maps, iframe

由于每个开发人员都偶然发现了一个困难的部分。一个不是我制作的网站，但我需要解决问题。老实说，在这一点上，我陷入了一个问题。

如果您愿意，请访问： http: [//ikeet.net/bijdeboer/index.php ?page=profielen&id=30](http://ikeet.net/bijdeboer/index.php?page=profielen&id=30)

然后按“联系”**选项卡。**

在除 IE8 之外的任何浏览器（经过测试的 IE7、IE9、firefox、chrome、safari）中，谷歌地图都是正确的。但是当我在 IE8 中渲染地图时，我唯一看到的是地图应该在的地方有一个大的白色块。

所以说实话，我用谷歌搜索了一些解决方案，但我不知道如何解决这个问题。

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:04:36.317

尝试在此处删除尾随逗号：

```
 var marker = new google.maps.Marker({
          position: latingmarker, 
          map: map,      }) 
```

所以它会是：

```
var marker = new google.maps.Marker({
          position: latingmarker, 
          map: map 
     }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:04:59.903

你有一个 JavaScript 错误。

删除此代码中 map 后的逗号：

```
var marker = new google.maps.Marker({
          position: latingmarker, 
          map: map,
     }) 
```

# javascript - 消失的单选按钮和可点击的标签

> ID：11055910
> 
> 赞同：3
> 
> 时间：2012-06-15T18:00:20.950
> 
> 标签：javascript, jquery, html

我想让单选按钮消失，而不是按钮，单选按钮的标签本身是可点击的，我将更改所选单选的背景颜色。我怎样才能做到这一点？例如，我有“是”和“否”标签，这些标签是可点击的，根本没有单选按钮。这些只是改变背景颜色，但显示不想要的单选按钮。

Javascript

```
$(document).ready(function(){
    var ok = "green";
    var notok = "red";

    $.each($(":radio"), function(){

        if($(this).prop("checked") == false)
        {
            $(this).parent().css("background", notok);
        }
        else
        {
            $(this).parent().css("background", ok );
        }
    })

    $(":radio").click(function(){
        $("[name='"+$(this).prop("name")+"']").parent().css("background", notok);
        $(this).parent().css("background", ok );

    })
}) 
```

HTML

```
<FORM name="form1">
 <div>
        <input type="radio" id="yes" name="q"checked="checked"/> Yes
        </div>
        <div>
        <input type="radio" id="no" name="q"/>No
        </div>

</FORM> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:05:59.873

这实际上很容易。如果您只使用“标签”标签，它将是可点击的。然后您可以简单地隐藏单选按钮。

```
<input id="yes" type="radio" name="q" value="radiobutton" style="display:none;" />
<label for="yes">Yes </label>

<input id="no" type="radio" name="q" value="radiobutton" style="display:none;" />
<label for="no">No</label> 
```

顺便说一句，这是一个工作的 JSFiddle：http: [//jsfiddle.net/scGE9/2/](http://jsfiddle.net/scGE9/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:28:18.277

如果我明白你在问什么，我会隐藏单选按钮，然后将点击处理程序附加到更改背景颜色的标签上：

```
$('label').click(function () {
   $('label').removeClass('selected');
   $(this).addClass('selected');
}); 
```

这是一个要演示的[jsfiddle](http://jsfiddle.net/AcWrf/1/)。

简而言之，当单击标签时，从所有相关标签中删除控制背景颜色的“选定”类，并将其应用于被单击的标签。

# wordpress - 如何在 Wordpress 中按标签排序帖子

> ID：11055919
> 
> 赞同：1
> 
> 时间：2012-06-15T18:01:21.217
> 
> 标签：wordpress, post, filter

我想用只有一个 WP_Query() 的标签来排序我的帖子

在我的 WP_Query 中，我想显示 2 个带有标签“肖像”的帖子

2 个带有“paysage”标签的帖子

2 个带有“肖像”标签的帖子

2 个带有“paysage”标签的帖子

2 个带有“肖像”标签的帖子

2 个带有“paysage”标签的帖子

ETC...

我需要按最近订购这些帖子。

这样做的查询是什么？

谢谢

PS：对不起，我不能使用代码，因为我用的是我的 iPhone。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:20:44.970

您的问题映射到流行的`greatest-n-per-group`SQL 问题，该问题映射到一个不简单的查询（至少在 MySQL 中，WordPress 使用它）。有关此类查询，请参见例如[http://rickosborne.org/blog/2008/01/sql-getting-top-n-rows-for-a-grouped-query/](http://rickosborne.org/blog/2008/01/sql-getting-top-n-rows-for-a-grouped-query/)。我认为不可能向 WP_Query 提供任何可以在内部生成类似复杂 SQL 查询的参数。

您可能必须基于此示例创建自定义 MySQL 查询：

[http://codex.wordpress.org/Function_Reference/setup_postdata#Example_2](http://codex.wordpress.org/Function_Reference/setup_postdata#Example_2)

并使用 WordPress 数据库架构：[http ://codex.wordpress.org/Database_Description#Database_Diagram](http://codex.wordpress.org/Database_Description#Database_Diagram)

# python - mongoexport可以用来导出mongodb中二进制格式存储的图片吗

> ID：11055921
> 
> 赞同：1
> 
> 时间：2012-06-15T18:01:33.093
> 
> 标签：python, image, mongodb, csv

我正在使用 mongoexport 导出 mongodb 数据，该数据也具有二进制格式的图像数据。

导出以 csv 格式完成。

我尝试将 csv 文件中的图像数据读取到 python 中，并尝试以 .jpg 格式将图像文件存储在磁盘上。

但似乎数据已损坏且图像未存储。

有没有人遇到过这种情况或解决过类似的事情？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:47:52.100

需要注意的一件事是 10gen 的几个实现中的任意 2MB BSON 对象大小限制。您可能必须对图像数据进行非规范化并将其存储在多个对象中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T21:46:02.747

根据您存储数据的方式，它可能以 4 字节大小为前缀。损坏的导出 4 字节/GridFS 块是否比您预期的要长？

# django - Django 中 raw_post_data 解码的问题

> ID：11055922
> 
> 赞同：2
> 
> 时间：2012-06-15T18:01:40.193
> 
> 标签：django

我偶然发现了一个我无法解决的奇怪问题：

在我的 Django 应用程序中，有一个方法被来自 java 小程序的 POST 命中，该方法向它发送一个 JSON 对象。Django 方法像这样解析它：

```
req = json.loads(request.raw_post_data) 
```

并根据结果返回一个值。我还没有写这段代码，但是昨天我被派去调查这个方法中触发的错误。它说有“ValueError：期望属性名称：第1行第1列（char 1）”。

我发现我的原始帖子数据如下所示：

```
{#012#011"ImmutableMachineFactors": #012#011{#012#011#011"machineName": "lukka",#012#011#011"osName": "MacOS"}} 
```

它的类型是字符串，但是，我尝试用空格替换这些奇怪的字符或什么都没有失败。它只会忽略 sub() 命令。我知道 raw_post_data 返回一个字节串，但是当我尝试使用以下方法将其转换为常规字符串时：

```
mystring.decode('utf-8') 
```

它确实添加了 u'' 符号，但没有删除那些奇怪的字符。更奇怪的是，在很多情况下（在我的个人机器上），Django 很乐意将这种数据转换为 JSON，但有时它只会失败，这让我相信触发错误的 JSON 格式不正确，但是当我删除时所有的#011 和#012 字符，它完美解析。

我的问题是：1）那些疯狂的事情是什么？（#011，#012）。我试着用谷歌搜索，但这些都是在搜索中很常见的东西，所以我找不到任何相关的东西。2）我怎样才能把这个字节串变成一个普通的字符串，这样我就可以替换那些字符？或者它是解决这个问题的扭曲方式？

谢谢！卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T17:47:13.867

这可能为时已晚，但由于 QueryDict 实例（request.POST 或 request.DATA）是不可变的，因此可以合理地预期 request.raw_post_data 也是不可变的。您必须在更改之前制作副本。

# c++ - std::enable_if ：参数与模板参数

> ID：11055923
> 
> 赞同：35
> 
> 时间：2012-06-15T18:01:40.833
> 
> 标签：c++, templates, c++11, g++

我正在构建一些需要具有整数和/或双精度函数的输入检查器（例如，'isPrime' 应该只适用于整数）。

如果我使用`enable_if`它作为参数，它工作得很好：

```
template <class T>
class check
{
public:
   template< class U = T>
   inline static U readVal(typename std::enable_if<std::is_same<U, int>::value >::type* = 0)
   {
      return BuffCheck.getInt();
   }

   template< class U = T>
   inline static U readVal(typename std::enable_if<std::is_same<U, double>::value >::type* = 0)
   {
      return BuffCheck.getDouble();
   }   
}; 
```

但如果我将它用作模板参数（如[http://en.cppreference.com/w/cpp/types/enable_if](http://en.cppreference.com/w/cpp/types/enable_if)所示）

```
template <class T>
class check
{
public:
   template< class U = T, class = typename std::enable_if<std::is_same<U, int>::value>::type >
   inline static U readVal()
   {
      return BuffCheck.getInt();
   }

   template< class U = T, class = typename std::enable_if<std::is_same<U, double>::value>::type >
   inline static U readVal()
   {
      return BuffCheck.getDouble();
   }
}; 
```

然后我有以下错误：

```
error: ‘template<class T> template<class U, class> static U check::readVal()’ cannot be overloaded
error: with ‘template<class T> template<class U, class> static U check::readVal()’ 
```

我无法弄清楚第二个版本有什么问题。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-15T18:32:28.190

默认模板参数不是模板签名的一部分（因此两个定义都尝试定义相同的模板两次）。但是，它们的参数类型是签名的一部分。所以你可以做

```
template <class T>
class check
{
public:
   template< class U = T, 
             typename std::enable_if<std::is_same<U, int>::value, int>::type = 0>
   inline static U readVal()
   {
      return BuffCheck.getInt();
   }

   template< class U = T, 
             typename std::enable_if<std::is_same<U, double>::value, int>::type = 0>
   inline static U readVal()
   {
      return BuffCheck.getDouble();
   }
}; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-15T18:18:55.403

问题是编译器看到相同方法的 2 个重载，它们都包含相同的参数（在本例中为无）和相同的返回值。你不能提供这样的定义。最简洁的方法是在函数的返回值上使用 SFINAE：

```
template <class T>
class check
{
public:
   template< class U = T>
   static typename std::enable_if<std::is_same<U, int>::value, U>::type readVal()
   {
      return BuffCheck.getInt();
   }

   template< class U = T>
   static typename std::enable_if<std::is_same<U, double>::value, U>::type readVal()
   {
      return BuffCheck.getDouble();
   }
}; 
```

这样，您将提供 2 种不同的重载。一个返回一个 int，另一个返回一个 double，并且只有一个可以使用某个 T 实例化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-02T18:12:24.153

我知道这个问题是关于的`std::enable_if`，但是，我想提供一个替代解决方案来解决相同的问题，而无需 enable_if。它确实需要 C++17

```
template <class T>
class check
{
public:
   inline static T readVal()
   {
        if constexpr (std::is_same_v<T, int>)
             return BuffCheck.getInt();
        else if constexpr (std::is_same_v<T, double>)
             return BuffCheck.getDouble();
   }   
}; 
```

这段代码看起来更像是在运行时编写的。所有分支都必须是语法正确的，但语义不一定是正确的。在这种情况下，如果 T 是 int，则 getDouble 不会导致编译错误（或警告），因为它不会被编译器检查/使用。

如果函数的返回类型很复杂，你总是可以使用`auto`它作为返回类型。

# c# - OracleTransaction 通过下拉列表更新 Gridview

> ID：11055929
> 
> 赞同：0
> 
> 时间：2012-06-15T18:02:32.993
> 
> 标签：c#, asp.net, oracle, gridview

我正在尝试使用绑定到 GridView 中的单元格的下拉列表来调用 SQL UPDATE 语句来更改 GridView 本身中的记录。下面是代码：

```
 <asp:TemplateField HeaderText="Send To...">
                <ItemTemplate>
                    <asp:DropDownList ID="StatusDD" runat="server" AutoPostBack="false" OnSelectedIndexChanged="StatusDD_SelectedIndexChanged">
                        <asp:ListItem Value="A">Active</asp:ListItem>
                        <asp:ListItem Value="C">Complete</asp:ListItem>
                        <asp:ListItem Value="I">In Process</asp:ListItem>
                        <asp:ListItem Value="E">Error</asp:ListItem>
                    </asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField> 
```

这是后面的代码，这是我的 try-catch 块**在 ExecuteNonQuery() 处挂起我的页面的地方。** 这是如何进行更新的正确语法吗？如您在上面看到的，我禁用了 AutoPostBack，但无论如何这对我没有任何作用：

```
 protected void StatusDD_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList ddl = sender as DropDownList;
        ToroGeneral toro = new ToroGeneral();
        string connString = toro.GetOracle1ConnectionString();

        using (OracleConnection conn1 = new OracleConnection(connString))
        {
            foreach (GridViewRow row in MMRGrid.Rows)
            {
                Control ctrl = row.FindControl("StatusDD") as DropDownList;
                if (ctrl != null)
                {
                    DropDownList ddl1 = (DropDownList)ctrl;
                    string qString = "";
                     // PreQuery work
                    DropDownList temp = new DropDownList();
                    temp = (DropDownList)row.FindControl("StatusDD");
                    string uKey = row.Cells[12].Text;
                    string tempStr = temp.SelectedValue.ToString().Trim();

                    if (ddl1.SelectedValue == "A")
                    {
                        qString = "UPDATE MATERIALMOVEREQUEST SET PROCESS_FLAG = 'A' WHERE UNIQUEKEY = '" + uKey + "'";
                    }
                    else if (ddl1.SelectedValue == "E")
                    {
                        qString = "UPDATE MATERIALMOVEREQUEST SET PROCESS_FLAG = 'E' WHERE UNIQUEKEY = '" + uKey + "'";
                    }
                    else if (ddl1.SelectedValue == "I")
                    {
                        qString = "UPDATE MATERIALMOVEREQUEST SET PROCESS_FLAG = 'I' WHERE UNIQUEKEY = '" + uKey + "'";
                    }
                    else if (ddl1.SelectedValue == "C")
                    {
                        qString = "UPDATE MATERIALMOVEREQUEST SET PROCESS_FLAG = 'C' WHERE UNIQUEKEY = '" + uKey + "'";
                    }
                    else
                    {
                        // Error
                    }

                    // Change the value of the record in the database.
                    conn1.Open();
                    OracleCommand cmd = conn1.CreateCommand();
                    OracleTransaction myTrans;
                    cmd.CommandText = qString;
                    myTrans = conn1.BeginTransaction(IsolationLevel.ReadCommitted);
                    cmd.Transaction = myTrans;

                    if (cmd.Connection.State == ConnectionState.Closed)
                    {
                        cmd.Connection.Open();
                    }

                    try
                    {
                        cmd.ExecuteNonQuery();
                        myTrans.Commit();
                    }
                    catch
                    {
                        myTrans.Rollback();
                    }

                }  // if
            } // foreach
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:12:24.360

你为什么不使用：

```
string updateSql = "UPDATE MATERIALMOVEREQUEST SET PROCESS_FLAG = :parameter1 WHEREUNIQUEKEY = :parameter2";"

OracleCommand cmd = new OracleCommand(updateString, conn1);
cmd.BindByName = true;
cmd.Parameters.Add("parameter1", Convert.ToChar(ddl1.SelectedValue);
cmd.Parameters.Add("parameter2", uKey);
myTrans = conn1.BeginTransaction(IsolationLevel.ReadCommitted);
cmd.Transaction = myTrans;

try
{
     cmd.ExecuteNonQuery();
     myTrans.Commit();
}
catch
{
     myTrans.Rollback();
} 
```

# swing - 在 JTextArea 中切换高亮

> ID：11055931
> 
> 赞同：2
> 
> 时间：2012-06-15T18:02:40.050
> 
> 标签：swing, jtextarea

我有一个 JTextArea，其中行在右键单击时突出显示。虽然我可以实现这一点（[使用我以前的帖子中的一些很大帮助](https://stackoverflow.com/questions/11053056/highlight-text-in-jtextarea-in-presence-of-duplicate-lines)），但是我还想要某种切换功能，即如果一行没有突出显示，右键单击会突出显示它，反之亦然。

**参考这个，是否可以检查所选行是否已经突出显示？**意见/建议？

我知道这样做的一种方法是跟踪所有亮点（可能使用[此处示例中所示](https://stackoverflow.com/questions/10306901/how-to-change-highlighting-color-in-java-swing-textarea-and-also-change-the-be/10309277#10309277)的 HashMap ），但这会稍微增加复杂性，因为我在帮助程序类中编写此方法包含这些文本区域的多个选项卡。任何其他替代解决方案都会非常有帮助（*如切换亮点*）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:21:30.713

我想你[在你提供的链接中](https://stackoverflow.com/a/10309277/613495)有你的答案。

只需编写您自己的类，扩展`JTextArea`每个实例负责存储其亮点的位置，然后改用您自己的类。

*BTW @nIcE cOw 很好的答案（+1 那里）。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T18:18:28.203

`SWT`有一`StyledText`堂课。

您可以为 Swing 编写一个样式化的文本类，实现`Document`接口，跟踪高亮和您想要跟踪的任何其他文本装饰。此类将封装确定样式文本中给定字符位置处的装饰的方法。

# css - 在半流体布局中显示内联左列和主列

> ID：11055932
> 
> 赞同：1
> 
> 时间：2012-06-15T18:02:49.983
> 
> 标签：css, magento, fluid-layout

我正在修改 magento 中的现代主题，使其宽度达到 1280 像素。

一切似乎都在工作，除了当左列是固定宽度并且主列扩展以填充其余空间时，我无法让左列和主列（在 2 列左布局中）内联显示。我让它工作的唯一方法是绝对定位左列，这不允许包装器再用左列内容扩展。

希望这有点道理。无论如何，这是我目前正在使用的临时绝对定位修复的 HTML 和 css。我尝试过使用浮点数和内联块以及通过谷歌找到的其他一些方法，但似乎都没有。问题 div 是 col-left 和 col-main。

任何帮助将不胜感激。

**HTML：**

```
 <div class="page">

        <div class="main-container col2-left-layout">

            <div class="main">
                <?php echo $this->getChildHtml('breadcrumbs') ?>
                <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
                <div class="col-main">
                    <?php echo $this->getChildHtml('global_messages') ?>
                    <?php echo $this->getChildHtml('content') ?>
                </div>
        <div style="clear:both"></div>

            </div>

        </div>

        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>

    </div> 
```

**CSS**

```
.page { width:80%; margin:15px auto 0; text-align:left; min-width:960px; max-width: 1280px;position:relative;}
.main-container {position:relative;float:left;clear:both;}
.main { background:#fff; border:1px solid #bbb;position:relative;float:left; padding-top:10px;width:100%;}

/* Base Columns */
.col-left { width:220px;float:left;position:absolute; left:10px;top:10px;z-index:1000;}
.col-main {  padding:0px 10px 10px 220px; float:left; margin-left:20px; }
.col-right { float:right; width:220px; padding:0 0 1px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:13:52.760

我似乎记得很久以前做过这样的事情，解决方案非常复杂。使用负边距等。幸运的是，我认为我找到了关于 smasingmag 的文章，它解释了如何做到这一点 - 您可能需要更改它，因为示例将正文设置为 80%，但我认为这个想法应该适用于全角网站。希望这可以帮助：

[http://coding.smashingmagazine.com/2010/11/08/equal-height-columns-using-borders-and-negative-margins-with-css/](http://coding.smashingmagazine.com/2010/11/08/equal-height-columns-using-borders-and-negative-margins-with-css/)

# nested - LESS 中的嵌套 mixins 会引发错误

> ID：11055936
> 
> 赞同：2
> 
> 时间：2012-06-15T18:03:08.267
> 
> 标签：nested, arguments, less, mixins, parse-error

我正在尝试使用一个`.flexbox`接受参数的 mixin `@orient`，它也应该自动应用`box-orient`。将它与 结合使用时`!important`，我遇到了一个错误，该错误也可以通过更缩小的测试用例重现：

```
.foo() {
  .bar;
}

.bar {
  color: red;
}

body {
  .foo() !important;
} 
```

这使得 LESS 抛出一个错误（我在 node.js 中使用它）：

```
C:\...\node_modules\less\lib\less\parser.js:385
                        throw new(LessError)(e, env);
                              ^
TypeError: Cannot call method 'charAt' of undefined 
```

奇怪的是，使用`.foo`而不是`.foo()`按预期工作：

```
.foo {
  .bar;
}

.bar {
  color: red;
}

body {
  .foo !important;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:20:59.720

快速搜索让我找到了这个错误报告。这是一个已知问题。

[https://github.com/cloudhead/less.js/issues/740](https://github.com/cloudhead/less.js/issues/740)

老实说，我建议您尝试以其他方式完成您想做的事情。在撰写本文时，less.js 的积压是 417 个大问题。它不太可能很快得到修复。

（是的，就是这个错误报告，您通过使用 .bar 扩展 .foo 创建了一个嵌套规则）

# delphi - 为什么连接字符串函数会以错误的顺序排列结果？

> ID：11055937
> 
> 赞同：1
> 
> 时间：2012-06-15T18:03:08.500
> 
> 标签：delphi, lazy-evaluation, string-concatenation

我正在使用类似的东西来定义一个 SQL 插入命令：

```
sql := 'insert into table(a, b, c) values (' + formatfunction(a) + ', ' + 
                                               formatfunction(b) + ', ' +
                                               formatfunction(c) + ');'; 
```

赋值后，变量sql包含a、b、c的不同顺序的格式化值，结果是这样的：

```
insert into (a, b, c) values ​​('value in c', 'value in a', 'value in b'); 
```

编译器优化可能有问题？

抱歉，示例代码不佳，完整的可执行代码如下：

```
procedure Execute(var v : String);
  function ExtractValue(var Content: String; Separator: Char = '|'): String;
  var
    vpHead,
    vpTail,
    vpContent: PChar;
    vsValor: String;
  begin
    vpContent := PChar(Content);
    Result := '';
    if (vpContent = nil) or
       (vpContent^=#0) then
      Exit;
    vpTail := vpContent;
    vpHead := vpTail;

    while not (CharInSet(vpTail^, [Separator]) or (vpTail^=#0)) do
      vpTail := StrNextChar(vpTail);

    if (vpHead^ <> #0) then
    begin
      if (vpHead <> vpTail) then
      begin
        SetString(vsValor, vpHead, vpTail - vpHead);
        Result := vsValor;
      end
      else
        Result := '';
    end;

    Content := Copy(Content, Length(vsValor) + 2, (Length(Content) - Length(vsValor)) + 1);
  end;

  function FormatAsDate(const s: String): TDate;
  begin
    Result := 0;

    if Trim(s) <> '' then
      Result := StrToDateDef(Copy(s, 1, 2) + '/' + Copy(s, 3, 2) + '/' + Copy(s, 5, 4), 0);
  end;

  function AsCurrency(const s: string): Double;
  begin
    Result := StrToFloatDef(s, 0);
  end;

  function AsDate(const s: string): string;
  var
    d: TDate;
  begin
    d := FormatAsDate(s);

    if d = 0 then
      Result := QuotedStr('null')
    else
      Result := QuotedStr(FormatDateTime('yyyy/mm/dd', d));
  end;

  function AsText(const s: string): string;
  begin
    Result := QuotedStr(s);
  end;
begin
  v :=
    'INSERT INTO TABLE (A, B, C, D, E, F, G, H, I, J, K, L, M) VALUES (' +
     AsText(ExtractValue(v)) + ', ' +
     AsText(ExtractValue(v)) + ', ' +
     AsText(ExtractValue(v)) + ', ' +
     AsText(ExtractValue(v)) + ', ' +
     AsText(ExtractValue(v)) + ', ' +
     AsText(ExtractValue(v)) + ', ' +
     AsDate(ExtractValue(v)) + ', ' +
     AsDate(ExtractValue(v)) + ', ' +
     StringReplace(FloatToStr(AsCurrency(ExtractValue(v))), ',', '.', []) + ', ' +
     StringReplace(FloatToStr(AsCurrency(ExtractValue(v))), ',', '.', []) + ', ' +
     AsText(ExtractValue(v)) + ', ' +
     StringReplace(FloatToStr(AsCurrency(ExtractValue(v))), ',', '.', []) + ', ' +
     StringReplace(FloatToStr(AsCurrency(ExtractValue(v))), ',', '.', []) + ');';
end; 
```

使用输入字符串'04368898000106|06|00|||3413572|26102011|31102011|1656,81|334,57||0,00|0,00'，插入命令的值顺序不同比输入字符串中显示的要多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T20:02:13.000

您的代码取决于表达式中操作数的计算顺序。该评估顺序未定义。

看一个更简单的例子，考虑这个代码：

```
x := f1(a) + f2(b); 
```

`f1()`无法保证函数调用和`f2()`执行的顺序。您大概希望`f1()`在之前执行，`f2()`但编译器不保证这一点，实际上我相信这些操作数通常会从右到左进行评估。

在您的代码中，表达式中的操作数涉及一个函数调用，`ExtractValue()`它具有修改其参数的副作用。由于表达式中的操作数不是从左到右计算的，因此调用`ExtractValue()`的顺序与它们在表达式中出现的顺序不同。并且由于`ExtractValue()`具有影响表达式其余部分的副作用，因此结果取决于评估顺序。

您将需要重新处理此代码，以便`ExtractValue()`在单独的语句中进行调用。

# asp.net - 覆盖母版页上控件中的函数

> ID：11055939
> 
> 赞同：3
> 
> 时间：2012-06-15T18:03:19.287
> 
> 标签：asp.net, vb.net, master-pages

场景：网站上的每个页面顶部都会有一个菜单栏，由许多按钮组成。某些页面具有相同数量的按钮来执行相同的操作（例如重定向到页面），但某些按钮取决于页面上当前的信息。问题：我希望能够覆盖控件上的按钮，以便我可以按页面处理它。我也在想也许使用事件并以这种方式处理它会更容易。这些方法中的任何一种是否可能，如果没有，是否有替代方法？

我目前拥有的代码如下

在 aspx 页面中

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        Dim myMenu As MenuBar
        myMenu = CType(Master.FindControl("MenuBar1"), MenuBar)
        myMenu.ShowButtons(MenuBar.Buttons.NewOrganization, MenuBar.Buttons.NewEquipment, MenuBar.Buttons.ChangeEquipmentOwner, MenuBar.Buttons.ChangeEquipmentLocation)

    End If
End Sub 
```

ascx 控件

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        RaiseEvent myEvent(sender, e)
    End If
End Sub
Public Sub ShowButtons(ByVal ParamArray args() As Buttons)
    For i As Integer = 0 To args.GetUpperBound(0)
        SetVisible(args(i))
    Next
End Sub
Public Enum Buttons
    NewOrganization = 1
    NewEquipment = 2
    ChangeEquipmentOwner = 3
    ChangeEquipmentLocation = 4
    UnderDevelopment = 5
    CheckoutEquipment = 6
    EditDocument = 7
    CreateEquipmentLoanForm = 8
End Enum
Private Sub SetVisible(ByVal btn As Buttons)
    Select Case (btn)
        Case 1
            btnNewOrganization.Visible = True
        Case 2
            btnNewEquipment.Visible = True
        Case 3
            btnChangeOwner.Visible = True
        Case 4
            btnChangeLocation.Visible = True
        Case 5
            btnUnderDevelopment.Visible = True
        Case 6
            btnCheckoutEquipment.Visible = True
        Case 7
            btnEditDocument.Visible = True
        Case 8
            btnCreateEquipment.Visible = True
    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:05:35.553

我要做的是在您的母版页上使用内容占位符，该占位符将为您的菜单控件之类的内容保留。然后每个页面都可以提供菜单控件。

使用此技术将使您的每个页面都可以将控件调整为所需的效果，而无需耦合母版页/页面逻辑。不仅如此，每个页面都不会与您在母版页上使用的 1 控件结合使用。您可能在某些时候想要包含另一个菜单控件或完全不同的菜单控件而不影响任何其他页面。

**但是** 如果您绝对必须从您的内容页面与您的母版页进行交互并且您不接受我的想法，您可以使用 C# 来执行此操作（但在您的情况下可以很容易地适应 VB.NET）：

**母版代码隐藏**

请务必在您的母版页代码隐藏中添加一个方法。像这样：

```
public void updateMenuControlWithOptions(MenuOptions options)
{
     //Tailor your menu control based on provided options
     //Menu1.FooButton.Visible = options.FooButtonVisible;
} 
```

**ASPX**

请务必将以下指令添加到页面。您很快就会明白为什么这会有所帮助，还将我的母版页名称更改为您的名称：

```
<%@ MasterType VirtualPath="~/Main.Master" %> 
```

**ASPX 代码隐藏**

```
if (foo)
    whateverOptions.FooButtonVisible = true;

this.Master.updateMenuControlWithOptions(whateverOptions); 
```

请注意，我不必键入强制转换 master..这是因为我包含在 aspx 中的 MasterType 指令。

# time - Outlook 是否正确处理 .ics (ICalendar) 文件的时区？

> ID：11055947
> 
> 赞同：5
> 
> 时间：2012-06-15T18:04:10.580
> 
> 标签：time, outlook, icalendar, zones

我有一个向用户发送日历约会的程序。然而，这些用户位于许多不同的时区。当我创建 .ics 文件时，我将时区设置为本地时区，因为它们是在这里安排的。然后将它们发送给分散在许多时区的用户。

Outlook 会正确处理这个问题吗？如：如果我安排一个人参加上午 8 点的会议，而我在费城，则应该在任何其他时区为他们安排上午 8 点的会议。

我知道 Outlook 在一定程度上适用于时区，但我找不到任何好的文档。

**编辑：** 我真的应该问更多关于你如何格式化它以正确处理这个问题，这是我目前使用的格式。但是我对此没有什么经验，所以我可能做错了：

```
String[] iCalArr = {   "BEGIN:VCALENDAR",
                            "PRODID:-//foobar//morefoobar//EN",
                            "VERSION:2.0",
                            "CALSCALE:GREGORIAN",
                            "METHOD:REQUEST",
                            "BEGIN:VTIMEZONE",
                                "TZID:America/New_York",
                                "X-LIC-LOCATION:America/New_York",
                                "BEGIN:DAYLIGHT",
                                    "TZOFFSETFROM:-0500",
                                    "TZOFFSETTO:-0400",
                                    "TZNAME:EDT",
                                    "DTSTART:19700308T020000",
                                    "RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU",
                                "END:DAYLIGHT",
                                "BEGIN:STANDARD",
                                    "TZOFFSETFROM:-0400",
                                    "TZOFFSETTO:-0500",
                                    "TZNAME:EST",
                                    "DTSTART:19701101T020000",
                                    "RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU",
                                "END:STANDARD",
                            "END:VTIMEZONE",
                            "BEGIN:VEVENT",
                                "DTSTART;TZID=America/New_York:" + strBeginDate, 
                                "DTEND;TZID=America/New_York:" + strEndDate, 
                                "DTSTAMP:" + strNow,
                                "UID:DT 2012 Training - " + System.Guid.NewGuid().ToString(),
                                "RECURRENCE-ID;TZID=America/New_York:20110207T103000",
                                "CREATED:" + strNow,
                                "DESCRIPTION;ENCODING=QUOTED-PRINTABLE:foobar",
                                "LAST-MODIFIED:" + strNow,
                                "LOCATION:" + location, 
                                "SEQUENCE:1",
                                "STATUS:TENTATIVE",
                                  "SUMMARY:foobar",
                                "TRANSP:OPAQUE",
                              "END:VEVENT", "END:VCALENDAR" }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T18:24:46.613

**假设您的特定应用程序写出正确的时区信息**，Outlook 应该可以处理得很好。或者 perhpaps 在 UTC 中工作，并用 Z 区标记所有内容。

我对你所说的“测试不是一种选择”感到困惑。我可以想象身份不明的“程序”无法写出测试数据，但您的问题表明您担心*Outlook*。当然，您可以手动编辑一些具有不同时区的 ICS 文件并将它们提供给 Outlook？这应该清楚地表明 Outlook 知道如何处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:27:54.210

是的 Outlook 处理时区，KB 中的这篇文章实际上表明了一个限制，即每次更改时区（DST，...）时都需要更新 Outlook：http: [//support.microsoft.com/kb/931667](http://support.microsoft.com/kb/931667)

# c++ - 太奇怪了 。静态变量提前出现但随后消失

> ID：11055948
> 
> 赞同：0
> 
> 时间：2012-06-15T18:04:29.113
> 
> 标签：c++, mfc, static

这是我的代码，太长了，所以我只显示重要的部分：

```
CObList &m_list=CManagerView::my_students;
m_list.AddHead(stu); 
```

`my_student`是 class 的静态变量`CManagerView`，这段代码运行良好，但是我想将 的数据保存`m_list`在另一部分：

```
CObList& m_list=CManagerView::my_students;
m_list.Serialize(ar); 
```

当我在`m_list`调试器的监视窗口中查看时，它显示

> 错误：找不到符号 m_list

我想不通这是什么原因，太奇怪了。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:09:00.183

如果您`m_list`在监视窗口中添加了第一个，您将遇到问题，因为另一个`m_list`是不同的变量，恰好与第一个具有相同的名称。

# php - 按 COND1 AND (COND2 OR COND3) 过滤 Magento 集合

> ID：11055952
> 
> 赞同：9
> 
> 时间：2012-06-15T18:04:48.040
> 
> 标签：php, mysql, magento

如何通过**attribute1 = value1 *AND* (attribute2 = value2 OR attribute3 = value2)**过滤 Magento 销售订单集合？我可以写**WHERE {COND1} AND {COND2} OR {COND3}**，但我不能分组**AND ({COND2} OR {COND3})**

首先，这不是重复的 AFAIK，我已经看到[了](https://stackoverflow.com/a/3828722/961455)，它在 1.3.2 版中运行良好，但在企业版 1.11.1 中却不行。这就是我想要做的......获取在定义的日期范围内创建或更新的、状态为“处理”的 Magento 订单。以下是在以前版本中有效的代码，但在我的版本中无效：

```
$orderIds = Mage::getModel('sales/order')->getCollection()
    ->addFieldToFilter('status', 'processing')
    ->addFieldToFilter(array(
        array(
            'attribute' => 'created_at',
            'from' => $fromDate->toString('yyyy-MM-dd HH:mm:ss'),
            'to'   => $toDate->toString('yyyy-MM-dd HH:mm:ss'),
        ),
        array(
            'attribute' => 'updated_at',
            'from' => $fromDate->toString('yyyy-MM-dd HH:mm:ss'),
            'to'   => $toDate->toString('yyyy-MM-dd HH:mm:ss'),
        ),
    )); 
```

这是它生成的 SQL，以及由此产生的错误：

```
SELECT `main_table`.* FROM `sales_flat_order` AS `main_table`
WHERE (status = 'processing') AND (Array = '')

SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Array' in 'where clause' 
```

在挖掘代码时，我`addFieldToFilter`在 lib/Varien/Data/Collection/Db.php 中找到了该函数

```
/** 
 * Add field filter to collection
 *
 * @see self::_getConditionSql for $condition
 * @param string $field
 * @param null|string|array $condition
 * @return Mage_Eav_Model_Entity_Collection_Abstract
 */
public function addFieldToFilter($field, $condition=null)
{   
    $field = $this->_getMappedField($field);
    $this->_select->where($this->_getConditionSql($field, $condition),
        null, Varien_Db_Select::TYPE_CONDITION);
    return $this;
}   

// **********************************************
// ** Different from addFieldToFilter in 1.3.2 **
// **********************************************

/** 
 * Add field filter to collection
 *
 * If $attribute is an array will add OR condition with following format:
 * array(
 *     array('attribute'=>'firstname', 'like'=>'test%'),
 *     array('attribute'=>'lastname', 'like'=>'test%'),
 * )
 *
 * @see self::_getConditionSql for $condition
 * @param string|array $attribute
 * @param null|string|array $condition
 * @return Mage_Eav_Model_Entity_Collection_Abstract
 */
public function addFieldToFilter($field, $condition=null)
{   
    $field = $this->_getMappedField($field);
    $this->_select->where($this->_getConditionSql($field, $condition));
    return $this;
} 
```

它看起来像`addFieldToFilter`以前接受第一个参数作为数组，但现在它必须是一个字符串......有趣，所以我尝试了以下零运气......

```
$orderIds = Mage::getModel('sales/order')->getCollection()
    ->addFieldToFilter('status', 'processing')
    ->addFieldToFilter('attribute', array(
        array(
            'attribute' => 'created_at',
            'from' => $fromDate->toString('yyyy-MM-dd HH:mm:ss'),
            'to'   => $toDate->toString('yyyy-MM-dd HH:mm:ss'),
        ),
        array(
            'attribute' => 'updated_at',
            'from' => $fromDate->toString('yyyy-MM-dd HH:mm:ss'),
            'to'   => $toDate->toString('yyyy-MM-dd HH:mm:ss'),
        ),
    ));
SELECT `main_table`.* FROM `sales_flat_order` AS `main_table`
WHERE (status = 'processing')
AND ((
    (attribute >= '2012-06-13 17:52:01' AND attribute <= '2012-06-15 17:52:01')
 OR (attribute >= '2012-06-13 17:52:01' AND attribute <= '2012-06-15 17:52:01')
)) 
```

我知道我可以通过操作 SQL 来做到这一点，但如果有的话，我真的很想知道如何用“Magento 方式”来做到这一点......

顺便说一句，我也尝试过使用`addAttributeToFilter`，错误消息是“无法确定字段名称”。

* * *

**更新**

我遇到了两个`Mage_Sales_Model_Resource_Order_Collection`看起来很有希望的函数，但它们仍然*不是*我想要的。

```
/**
 * Add field search filter to collection as OR condition
 *
 * @see self::_getConditionSql for $condition
 *
 * @param string $field
 * @param null|string|array $condition
 * @return Mage_Sales_Model_Resource_Order_Collection
 */
public function addFieldToSearchFilter($field, $condition = null)
{
    $field = $this->_getMappedField($field);
    $this->_select->orWhere($this->_getConditionSql($field, $condition));
    return $this;
}

/**
 * Specify collection select filter by attribute value
 *
 * @param array $attributes
 * @param array|integer|string|null $condition
 * @return Mage_Sales_Model_Resource_Order_Collection
 */
public function addAttributeToSearchFilter($attributes, $condition = null)
{
    if (is_array($attributes) && !empty($attributes)) {
        $this->_addAddressFields();

        $toFilterData = array();
        foreach ($attributes as $attribute) {
            $this->addFieldToSearchFilter($this->_attributeToField($attribute['attribute']), $attribute);
        }
    } else {
        $this->addAttributeToFilter($attributes, $condition);
    }

    return $this;
} 
```

当我更新我的代码时，我*非常接近*我想要的结果，但是我真正想要的是拥有**CONDITION1 AND (CONDITION2 OR CONDITION3)**

```
$orderIds = Mage::getModel('sales/order')->getCollection()
    ->addFieldToFilter('status', 'processing')
    ->addAttributeToSearchFilter(array(
        array(
            'attribute' => 'created_at',
            'from' => $fromDate->toString('yyyy-MM-dd HH:mm:ss'),
            'to'   => $toDate->toString('yyyy-MM-dd HH:mm:ss'),
        ),
        array(
            'attribute' => 'updated_at',
            'from' => $fromDate->toString('yyyy-MM-dd HH:mm:ss'),
            'to'   => $toDate->toString('yyyy-MM-dd HH:mm:ss'),
        ),
    ));

SELECT `main_table`.*,
       `billing_o_a`.`firstname`,
       `billing_o_a`.`lastname`,
       `billing_o_a`.`telephone`,
       `billing_o_a`.`postcode`,
       `shipping_o_a`.`firstname`,
       `shipping_o_a`.`lastname`,
       `shipping_o_a`.`telephone`,
       `shipping_o_a`.`postcode`
FROM `sales_flat_order` AS `main_table`
LEFT JOIN `sales_flat_order_address` AS `billing_o_a`
    ON (main_table.entity_id = billing_o_a.parent_id AND billing_o_a.address_type = 'billing')
LEFT JOIN `sales_flat_order_address` AS `shipping_o_a`
    ON (main_table.entity_id = shipping_o_a.parent_id AND shipping_o_a.address_type = 'shipping')
WHERE (status = 'processing')
OR (created_at >= '2012-06-16 16:43:38' AND created_at <= '2012-06-18 16:43:38')
OR (updated_at >= '2012-06-16 16:43:38' AND updated_at <= '2012-06-18 16:43:38') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T15:43:29.340

请注意，FLAT TABLE 和 EAV 集合使用不同的语法！

# 向 EAV 集合添加 OR 条件

请注意，当为同一属性指定 OR 条件时，如果您想使用两个不同的属性，则语法是不同的。

用于`$collection->load(true)`测试并将指定的过滤器视为 SQL（我发现这种方式更容易理解）。

对于 EAV 集合，使用`addAttributeToFilter()`or `addFieldToFilter()`，但第一个可以采用可选的第三个`$joinType`参数。

如何在 EAV 集合上为 ONE 属性添加 OR 过滤器：属性代码是第一个参数，条件是第二个参数。

例如：`$col->addFieldToFilter('name', array(array('like' => 'M%'), array('like' => '%O'))); // (get items whose name starts with M OR ends with O)`

如何为 EAV 集合上的不同属性添加 OR 过滤器：仅传递一个参数，即具有属性的条件数组。

# 向 FLAT TABLE 集合添加 OR 条件

在平面表集合上指定具有单个属性的 OR 过滤器与在 EAV 集合上相同。

例如：`$col->addFieldToFilter('name', array(array('like' => 'M%'), array('like' => '%O'))); // get items whose name start with M OR end with O`

要在 OR 条件中加入多个属性，语法与 EAV 集合不同（注意：这在 Magento 1.6 中已损坏）

例如：`$col->addFieldToFilter(array('weight', 'name'), array(array('in' => array(1,3)), array('like' => 'M%')));`

第一个属性映射到第一个条件，第二个属性映射到第二个条件，依此类推

由于这在 1.6 中被打破，我们可以使用以下方法为多个属性指定简单的相等条件`addFilter()`

例如：`$col->addFilter('weight', 1, 'or')->addFilter('weight', 2, 'or')->addFilter('sku', 'ABC', 'or'); // weight is 1 or 2 or sku is ABC`

您也可以始终使用`$collection->getSelect()->orWhere(…)`，但您必须注意跨 RDBMS 的兼容性

[注意：这是我多年前在 tumblr 上发布的两件事的交叉帖子： http](http://tweetorials.tumblr.com/post/11102525164/flat-table-collection-or-filters) ://tweetorials.tumblr.com/post/10844018716/eav-collection-or-filters
[http://tweetorials.tumblr.com/post/](http://tweetorials.tumblr.com/post/10844018716/eav-collection-or-filters)
[11102525164/flat-table-collection-or-filters](http://tweetorials.tumblr.com/post/11102525164/flat-table-collection-or-filters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:54:07.947

这是我不想使用的解决方案，它通过 Zend_Db 方法修改 SELECT 语句。

```
$orderIds = Mage::getModel('sales/order')->getCollection()
    ->getSelect();
$adapter = $orderIds->getAdapter();
$quotedFrom = $adapter->quote(
    $fromDate->toString('yyyy-MM-dd HH:mm:ss')
);
$quotedTo = $adapter->quote(
    $toDate->toString('yyyy-MM-dd HH:mm:ss')
);
$orderIds
    ->where('status = ?', 'processing')
    ->where(
        vsprintf(
            '(created_at >= %s AND created_at <= %s)'
          . ' OR (updated_at >= %s AND updated_at <= %s)',
            array(
                $quotedFrom, $quotedTo,
                $quotedFrom, $quotedTo,
            )
        )
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T06:33:06.687

也许是时候在核心方面做出一些改变了。我们有一些类似的问题。可能的情况是。

**（条件1）或（（条件2）和（条件3）......）**

如果你对它是如何制作的感兴趣。尝试阅读 [http://winzter143.blogspot.com/2012/03/magento-hack-nested-addattributetofilte.html](http://winzter143.blogspot.com/2012/03/magento-hack-nested-addattributetofilte.html)

# iphone - 自定义 UITableViewCell 中的 NSNotification 观察者？

> ID：11055963
> 
> 赞同：1
> 
> 时间：2012-06-15T18:05:51.047
> 
> 标签：iphone, objective-c, ios, uitableview

我正在构建一个带有类似 iPod 的控件（播放、暂停等）的应用程序。该应用程序在每个单元格中都有带有轨道名称的 tableView。我有一个`MainViewController`with a`UITableView`和一个自定义`UITableViewCell`类。播放器控件存在于`MainViewController`.

每个单元格中还有一个播放/暂停按钮。我已成功设置`NSNotifications`为在单元格中按下播放按钮时发布通知，因此将跟踪信息发送到观察者和响应者方法，`MainViewController`并启动播放器控件（由 驱动`MPMoviePlayerController`）。

这行得通，但是一旦播放了曲目，我就无法弄清楚如何使单元格中的播放/暂停按钮“镜像”我的 iPod 控件中播放/暂停按钮的状态。我不认为`NSNotification observer`在每个单元格中添加 a 是正确的方法。

附加信息：播放器中的播放/暂停按钮图像`MainViewController`由每半秒触发一次并检查`playbackstate`. `MPMoviePlayerController`如果播放，播放器按钮设置为播放图像。如果暂停，则设置为暂停图像。我在想设置 tableCell 播放/暂停按钮的实现也会放在这里。

**在我的 UITableViewController 中，只要播放状态发生变化（通过NSNotification**），就会调用此方法。（`playButton`是播放器控件中的播放/暂停按钮，而不是我试图根据播放状态更新的表格单元格中的播放/暂停）。

```
- (void) updateViewForPlayerState
{
// Change playButton image depending on playback state
[playButton setImage:((moviePlayer.playbackState == MPMoviePlaybackStatePlaying) ? pauseBtnBG : playBtnBG) forState:UIControlStateNormal];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:01:32.887

苹果开发网站上有一个很好的例子来说明你正在尝试做的事情。

[表视图套件](http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318)

有问题的项目称为 CustomTableViewCell。该项目使用 Timer 定期更新单元格，从您的描述中听起来您正在做类似的事情。

当单元格的状态发生变化时，请执行以下操作。

1.  更新单元格的状态。我假设这反映在 plabackstate
2.  调用 [cell setNeedsDisplay]

这应该会强制自定义单元格使用您设置的新状态重新绘制自身。

This would be in your table view controller in the timer callback method

```
NSArray *visibleCells = self.tableView.visibleCells;
    for (CustomCell *cell in visibleCells) {
        [cell redisplay];
} 
```

This would be in your custom table view cell

```
- (void)redisplay {
    [customCellView setNeedsDisplay];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:48:39.190

Use `[tableView reloadData]` when your state changed and on providing a cell in `cellForRowAtIndexPath:` set the button according to the state of your data (i.e whether the song that cell refers to is playing or not).

Also instead of notifications you could use delegation which is the usual approach. But notifications also work especially if you need multiple observers.

# c# - 将图像从浏览器拖放到 WPF 应用程序

> ID：11055965
> 
> 赞同：9
> 
> 时间：2012-06-15T18:06:06.353
> 
> 标签：c#, wpf, drag-and-drop

我正在尝试在我的 WPF 应用程序中实现功能，以将图像从浏览器拖到我的 WPF 应用程序的窗口中。

该代码在 Firefox 和 Windows 资源管理器中运行良好，但在 Chrome 和 IE 中出现问题（尚未尝试任何其他浏览器）。

这是一个代码片段：

```
private void Drag_Enter(object sender, DragEventArgs e)
{
    foreach (string format in e.Data.GetFormats())
        Console.WriteLine(format);
    Console.WriteLine("Effects:" + e.AllowedEffects);
}

private void Drag_Drop(object sender, DragEventArgs e)
{
    string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);
    ImageSourceConverter converter = new ImageSourceConverter();
    foreach (string file in files)
    {
        if (converter.IsValid(file))
        {
            // Do something with the image
        }
    }
 } 
```

查看输出，似乎 Firefox 实际上将图像保存到剪贴板，而 Chrome 只是抓取图像的 html，而 IE 没有做任何事情。

任何人都对我如何获得跨浏览器功能有一些见解？

* * *

**更新**：我发现的一些解决方法是解析图像源的 html (Chrome/Firefox)，然后使用 WebClient 对象之类的东西从源下载。不过，更喜欢一种对文件类型进行更强检查的方法。

IE9 和 Firefox 都具有在拖动非超链接图像时可用的 DeviceIndependentBitmap 文件格式。这似乎是一个更安全的选择，尽管 Chrome 似乎不支持它。对于超链接图像，它也不是那么有用。

* * *

使用 Firefox，输出是（Drag_Enter 由于某种原因被触发两次）：

```
text/x-moz-url
FileGroupDescriptor
FileGroupDescriptorW
FileContents
UniformResourceLocator
UniformResourceLocatorW
text/x-moz-url-data
text/x-moz-url-desc
text/uri-list
text/_moz_htmlcontext
text/_moz_htmlinfo
text/html
HTML Format
Text
UnicodeText
System.String
application/x-moz-nativeimage
DeviceIndependentBitmap
FileDrop
FileNameW
FileName
Preferred DropEffect
application/x-moz-file-promise-url
application/x-moz-file-promise-dest-filename
DragImageBits
DragContext
Effects: Link, All 
```

Chrome（drag_enter 也被触发两次）：

```
DragContext
DragImageBits
FileGroupDescriptorW
FileContents
HTML Format
text/html
text/x-moz-url
UniformResourceLocatorW
UniformResourceLocator
Text
UnicodeText
System.String
Effects: Copy, Move, Link 
```

Internet Explorer（再次，drag_enter 触发了两次）：

```
UntrustedDragDrop
msSourceUrl
FileGroupDescriptor
FileGroupDescriptorW
FileContents
UniformResourceLocator
Effects: Link 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:03:23.363

您可以使用 FileGroupDescriptorW 和 FileContent 格式来获取数据。

*   FileGroupDescriptorW 是一个 FileDescriptor 数组，用于描述您的数据（例如：名称、大小、修改时间……）
*   FileContent 包含您的文件内容。

如果您不关心文件名，只需要可以使用的二进制内容

```
var filestream = (MemoryStream[])dataObject.GetData("FileContents"); 
```

如果您想要有关如何使用 FileGroupDescriptor(W) 的更深入的教程，我可以在 codeproject.com 上推荐本[教程。](http://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C)它谈到了从 MS Outlook 拖放，但它使用相同的 IDataObject 格式。

# php - 如何从 WordPress 中特定页面的子页面中检索附件？

> ID：11055976
> 
> 赞同：0
> 
> 时间：2012-06-15T18:06:48.877
> 
> 标签：php, html, wordpress

如何从特定页面 ID 的 所有**子页面中检索附件？**

例子：

特定页面

*   孩子（带附件）
*   孩子（带附件）
*   孩子（带附件）

我目前正在使用此代码来检索站点范围内的所有附件，但是我想将其限制为仅从特定页面的所有子项中提取图像。

```
<?php
$args = array( 'post_type' => 'attachment', 'numberposts' => -1, 'post_status' => null, 'post_parent' => null ); 
$attachments = get_posts( $args );
if ($attachments) {
    foreach ( $attachments as $post ) {
        setup_postdata($post);
        the_title();
        the_attachment_link($post->ID, false);
        the_excerpt();
    }
}
?> 
```

根据下面尼克的建议，几乎可以使用此代码：

```
<?php

$mypages = get_pages('child_of=19');
foreach ( $mypages as $mypage  ) {
$attachments = get_children(array('post_parent' => $mypage->ID, 'numberposts' => 1, 'post_type' => 'attachment', 'post_mime_type' => 'image', 'orderby' => 'rand'));

if ($attachments) {

    foreach ( $attachments as $post ) {

        setup_postdata($post);
        the_title();
        the_attachment_link($post->ID, false);
        the_excerpt();
    }
}
}
?> 
```

但是，还有两个问题：

1.  限制提取的**总照片数量。**使用“numberposts”仅限制从每个帖子中提取的图像数量
2.  随机化。Orderby => rand 仅随机化每个帖子中的图像。我想随机打乱所有东西的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:59:19.497

尝试使用`get_pages( $args )`

```
<?php $args = array(
'child_of' => 'SPECIFIC PAGE',
'parent' => 'SPECIFIC PAGE',
'post_type' => 'attachment',
'post_status' => 'publish',
'numberposts' => -1
); ?> 
```

使用`child_of`将得到所有的子孙。

`parent`会将其限制为仅将其作为父母的孩子。没有孙子。

有关更多详细信息，请参见此处。[http://codex.wordpress.org/Function_Reference/get_pages](http://codex.wordpress.org/Function_Reference/get_pages)

# android - setRepeatingAlarm() 的 DAY_OF_MONTH 间隔是多少；（安卓）

> ID：11055978
> 
> 赞同：0
> 
> 时间：2012-06-15T18:06:59.203
> 
> 标签：android, alarmmanager

我在 Android 的 AlarmManager 中设置了一个闹钟。它是一个 setInexactRepeatingAlarm()，应该在相同的 DAY_OF_MONTH 结束。

我希望它在 5 月 21 日、6 月 21 日、7 月 21 日等开始。

解决这个问题的时间间隔是多少？由于某些月份有不同的日子，这甚至可能吗？

```
 am.setInexactRepeating(AlarmManager.RTC, cal.getTimeInMillis(), i, pendingIntent); 
```

其中“i”是我需要发布的间隔公式。例如，每天设置一次，则为 1 * 24 * 60 * 60 * 1000；

一个月一次与完全相同的日历日会发生什么？这甚至可能吗？如果没有，这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:56:51.397

不幸的是，我认为你在这个方面是 SOL。

在[文档](http://developer.android.com/reference/android/app/AlarmManager.html)中，它暗示`AlarmManager`对象中枚举了不精确的重复警报识别的唯一间隔：

> `setInexactRepeating(int, long, long, PendingIntent)`可用的不精确重复间隔由: `INTERVAL_DAY`, `INTERVAL_FIFTEEN_MINUTES`, `INTERVAL_HALF_DAY`, `INTERVAL_HALF_HOUR`,识别`INTERVAL_HOUR`。

此外，当设备重新启动时，所有警报都未注册，因此您的警报响起的可能性（连续一个月？）可能很低。

也许您以错误的方式处理此问题？

# xpath - Selenium IDE：如果每次随机生成 div id 和 class，如何检测 xpath？

> ID：11055980
> 
> 赞同：1
> 
> 时间：2012-06-15T18:07:02.433
> 
> 标签：xpath, selenium, selenium-webdriver

我正在尝试检测 xpath 或 css，但每次运行脚本时，div id 和类名都会更改，从而导致脚本失败。

```
<div class="yui-dt-bd" style="height: 300px; width: 100%;">
  <table id="yuievtautoid-0" summary="" style="margin-top: 0px;">
   <tr id="yui-rec28" class="yui-dt-rec yui-dt-first yui-dt-even yui-dt-selected" style="">
    <td id="yui-gen52" class="yui-dt23-col-professorId yui-dt-col-professorId yui-dt- sortable yui-dt-first" headers="yui-dt23-th-professorId ">
<div id="yui-gen51" class="yui-dt-liner">1</div>
</td>
<td id="yui-gen44" class="yui-dt23-col-professorName yui-dt-col-professorName yui-dt-sortable yui-dt-last" headers="yui-dt23-th-professorName ">
<div id="yui-gen43" class="yui-dt-liner">John Power</div>
</td>
</tr>
</table>
</div> 
```

我写了 xpath=//*[@id="yui-gen46"]，但是 id 一直在变化。也试过写表ID。但它不起作用。xpath=id('yuievtautoid-1').

感谢一些输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:26:21.650

您可以指定未更改的类或 id 的一部分。例如：

```
//*[contains(@class, 'col-professorName')] 
```

或者

```
//*[contains(@id, 'yuievtautoid')] 
```

或 CSS 版本：

```
css=*[class*="col-professorName"]
css=*[id^="yuievtautoid"] 
```

# c - 在 gcc 中匿名使用预定义的结构？

> ID：11055981
> 
> 赞同：2
> 
> 时间：2012-06-15T18:07:16.930
> 
> 标签：c, gcc, struct, anonymous

在 gcc 中，可以创建一个匿名结构，如下所示：

```
struct test2 {
    struct {
            int x;
            int y;
    };
    int z;
}; 
```

但是当我尝试对匿名结构的预定义版本做同样的事情时，它失败了：

```
struct test1 {
    int x;
    int y;
};

struct test2 {
    struct test1;
    int z;
}; 
```

我想这样做的原因是我想定义一个结构，其中包含一组与 C 类的“成员函数”相对应的函数指针。如果我不匿名包含该结构，那么我最终不得不做一些像这样令人讨厌的事情：

```
object->API->function(object,...); 
```

这对于我需要做的某些事情来说根本不起作用（例如，由于“object.API”与“object”不匹配，因此很难或不可能从支持隐藏的其他语言进行自动绑定对象指针。）

目前，我只是复制/粘贴函数，但这很乏味且容易出错。我可以使用 C 预处理器，但是创建一个包含一堆函数原型的宏似乎很难看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T18:08:20.813

`struct test1`是结构类型的名称。您缺少该字段的名称（并且除了内联定义的结构或联合之外，您不能拥有“匿名”字段）。

```
struct test2 {
    struct test1 myStructTest1;
    int z;
}; 
```

* * *

编辑：显然有一个[GCC 扩展](http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html#Unnamed-Fields)可以让你这样做：`-fms-extensions`

> 除非使用 -fms-extensions，否则未命名字段必须是不带标记的结构或联合定义（例如，`struct { int a; };'). If -fms-extensions is used, the field may also be a definition with a tag such as`struct foo { int a; };'，对先前定义的结构或联合的引用，例如 `struct foo; '，或对先前定义的结构或联合类型的 typedef 名称的引用。

```
 struct s1 { int a; };
 struct s2 { struct s1; }; 
```

# vba - DLookup 控制源

> ID：11055982
> 
> 赞同：0
> 
> 时间：2012-06-15T18:07:25.117
> 
> 标签：vba, ms-access, ms-access-2003

摘要：我想在从组合框中选择特定值时显示以另一种形式存储的值（在文本框中）。我想将我拥有的两个组合框值传递给 DLoopup 属性，但每次我这样做都会给我一个错误。

下面是在文本框的控件源属性中插入的代码：

```
=DLookUp("[Year_ended]","1_Supportive_Housing","[BudgetYear] ='" & [Combo5] & "'") 
```

这在文本框中给了我一个“#Error”。

还尝试了以下但给了我“#NAME”错误：

```
=DLookUp("[Year_ended]","1_Supportive_Housing","[BudgetYear] = '" & [Combo5.Value] & " And [Program_Name] = '" & [Combo7.Value] & "'") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:10:44.380

您需要整理好分隔符。AFAIR 预算年度是一个数字：

```
 =DLookUp("[Year_ended]","1_Supportive_Housing","[BudgetYear] =" & [Combo5]) 
```

将值传递给数字类型字段时，不要使用分隔符，对于文本，请使用引号，“Abc”或“Abc”，对于日期，请使用井号 (#) #2012/11/31#。

```
 =DLookUp("[Year_ended]","1_Supportive_Housing","[BudgetYear] =" & [Combo5]  & " And [Program_Name] = '" & [Combo7.Value] & "'") 
```

# java - 什么时候线程，什么时候WAR？

> ID：11055986
> 
> 赞同：0
> 
> 时间：2012-06-15T18:07:44.460
> 
> 标签：java, multithreading, tomcat, web-applications

我正在设计/开发一个最终将作为 WAR 部署到 Tomcat 的 Web 应用程序。此应用程序的功能之一是用户能够将图像上传到我们的服务器并进行编辑（生成缩略图等）。在幕后，我们将使用`ImageMagick`它的 Java 适配器库`IM4Java`。

初始原型表明，每次我们重新部署应用程序时，ImageMagick 都需要一些时间在我们的服务器上“预热”。这促使我们考虑以下两种可能性之一：

*   创建一个`ImageService.war`与主应用程序一起部署的 Web 服务，并基本上处理对`IM4Java`底层的所有调用（例如，公开一个 RESTful 服务并在收到请求时运行 ImageMagick；然后主 Web 应用程序可以找到已编辑的文件）在同一个本地文件系统上）；或者
*   只需创建一个`Thread`子类（即`ImageServiceThread`），启动它并在部署时运行它，并确保它在 Tomcat 取消部署应用程序时关闭

这两个前景让我从更抽象的意义上思考了这个问题：**什么时候应该简单地将工作委托给一个单独的线程，什么时候适合制作一个成熟的、单独的应用程序（在我们的例子中是一个 WAR）**？

我们的主要应用程序将是这个“*图像服务*”的唯一用户，这让我认为单独的 WAR 是矫枉过正和不必要的。但我以前从未处理过 Tomcat 内部的线程，并且不确定是否可以生成和终止线程，以便其生命周期与主/主应用程序线程的生命周期一致。

作为此类决定的一部分，应考虑哪些因素？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:05:29.117

> ImageMagick 需要一些时间来“热身”

最好在 servlet 容器之外卸载内存/cpu 密集型操作。事实上，在单独的 JVM 中启动您的图像服务。

由于您的应用程序将在内存中加载图像并对其进行编辑，因此您可以预期频繁的垃圾收集会通过影响 Web 应用程序其他部分的性能来阻碍 servlet 容器的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:04:19.237

一定要在需要它正常运行的 Web 应用程序中保留 ImageMagick 的预加载。这样一来，您就永远不会忘记这两个 web 应用程序应该部署在一起。

将特定 webapp 所需的所有东西放在一个地方是一个好主意：这就是创建 WAR 格式以及`ServletContextListener`存在诸如 s 之类的东西的原因。

老实说，我不确定我是否会费心去“线程”预加载 IM —— 只需从 a 运行一些示例命令`ServletContextListener`并让它同步加载。

# cocoa - 在 PDFDocument 中添加自定义元数据

> ID：11055988
> 
> 赞同：0
> 
> 时间：2012-06-15T18:07:56.830
> 
> 标签：cocoa, pdf, metadata

我正在桌面和手持设备之间发送文档，并且我想将元数据标题添加到 PDF，如下所示。

```
<CUSTOM_HEADER>\n
{"fileInfoEncodedInJson\":
   {"filename":"My Print Out",
   "filesize\":"630",
   "filedesc":"",}
   }\n
</CUSTOM_HEADER>\n
… file contents … 
```

我一直在使用提供`documentAttributes`和`setDocumentAttributes`方法的 PDFKit 和 PDFDocument ，但是因为它是一个自定义标题，所以当我设置属性并保存文件时它似乎不会持续存在：

```
NSURL *path = [NSURL fileURLWithPath:@"/Users/username/Desktop/file.pdf"];
PDFDocument *document = [[PDFDocument alloc] initWithURL:path];

NSDictionary *docAttributes = [self.document documentAttributes];
NSMutableDictionary *newAttributes = [[NSMutableDictionary alloc] initWithDictionary:docAttributes];
[newAttributes setObject: @"Custom header contents" forKey:@"Custom header"];
docAttributes = [[NSDictionary alloc] initWithDictionary: newAttributes];

[document setDocumentAttributes: docAttributes];

//Here Custom Header is an entry in the dictionary

[self.document writeToFile:@"/Users/username/Desktop/UPDATEDfile.pdf"];

//Here the UPDATEDfile.pdf does not contain the custom header 
```

我一直在寻找，我发现了几个类似的问题（例如[在](http://cocoadev.com/wiki/EditingPDFMetadata)cocoadev 上），但没有答案。有谁知道将自定义（即不是文档属性键下提供的 8 个预定义常量）标题存储到 PDF 文件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:27:42.727

我实际上并没有编辑预先存在的标题，我只是创建了一个 NSMutableData 对象，先添加文本数据，然后添加 PDF 数据，然后将此数据保存到我想要的路径。

```
 NSString *header = [NSString stringWithFormat:@"<CUSTOM_HEADER>\n {\"fileInfoEncodedInJson\":  {\"filename\":\"My Print Out\", \"filesize\":\"630\",\"filedesc\":\"\",}  }\n </CUSTOM_HEADER>\n"];

// Append header to PDF data
NSMutableData *data = [NSMutableData dataWithData:[header dataUsingEncoding:NSWindowsCP1252StringEncoding]];
[data appendData:[doc dataRepresentation]];

[data writeToFile:@"/Users/username/Desktop/UPDATEDfile.pdf" atomically:NO]; 
```

这会生成一个在 Adob​​e 中为我打开的 PDF 文件，并且在查看时标题是不可见的。

# ajax - 由 onblur 或更改事件执行的 AJAX 表单

> ID：11055989
> 
> 赞同：1
> 
> 时间：2012-06-15T18:07:59.670
> 
> 标签：ajax, onchange, onblur

我有一个表单，用户将在其中输入一个数字到文本字段中。然后，从下拉菜单中选择另一个数字。我希望 AJAX 在每次从一个字段到另一个字段时执行。这样它就可以实时进行计算。

我想文本字段将使用“onblur”，下拉菜单使用“change”或“onchange”......但是我如何编写脚本来根据它们当前所在的字段来执行？您可以将其设置为两者兼而有之吗？

编辑：新变量标签的新尝试。

```
 <script type="text/javascript">
        function postData(){
            var widthX = $('#width_str').val();
            var heightX = $('#height_str').val();
            var prodidX = $('#prodid').val();
            var roomX = $('#room_str').val();

            $.post('db_query.php',{widthX:widthX, heightX:heightX, prodidX:prodidX, roomX:roomX},   
                function(data){
                $("#search_results").html(data);
            });
        }

        $(function() {
            $("#lets_search").bind('submit',function() {postData()});
            $("#room_str").bind('change', function() {postData()});
            $("#width_str").bind('change', function() {postData()});
            $("#height_str").bind('change',function() {postData()});
        });
    </script> 
```

部分表格在这里....

```
 <form id="lets_search" action="" style="width:400px;margin:0 auto;text-align:left;">
            <input type="hidden" value="1" value="<?php echo stripslashes($_GET['prodid']); ?>" name="prodid" id="prodid">

            room name:
            <select name="room_str" id="room_str">
                <option value="Dining">Dining</option>
                <option value="Bathroom">Bathroom</option>
                <option value="Kitchen">Kitchen</option>
            </select>
            height:
            <select name="height_str" id="height_str">
                <option value="30">30"</option>
                <option value="31">31"</option>
                <option value="32">32"</option>
                <option value="33">33"</option>
                <option value="34">34"</option>
                <option value="35">35"</option>
                <option value="36">36"</option>
                <option value="37">37"</option>
            </select>
            <br>
            width:
            <select name="width_str" id="width_str">
                <option value="30">30"</option>
                <option value="31">31"</option>
                <option value="32">32"</option>
                <option value="33">33"</option>
                <option value="34">34"</option>
                <option value="35">35"</option>
                <option value="36">36"</option>
                <option value="37">37"</option>
            </select>
            <input type="submit" value="send" name="send" id="send">
         </form> 
```

处理数据的php页面...

```
<?php
include('db_pbconnection.php');

$tax = .06;
$tax2 = 1.06;
$grandtotal = 50;   

$query = mysql_query(" SELECT * FROM price_dimensions WHERE prodid = '".$_POST['prodidX']."' AND height >= '".$_POST['heightX']."' AND width >= '".$_POST['widthX']."' ORDER BY height ASC, width ASC LIMIT 1 ");
echo '<div>';
while ($data = mysql_fetch_array($query)) {
    echo '
    <div style="background-color:pink;">
        <div style="clear:both; font-size:18px;">height: '.$data["height"].'</div><br>
        <div style="clear:both; font-size:18px;">width: '.$data["width"].'</div>
        <div style="clear:both; font-size:18px;">unit price: '.$data["price"].'</div>
        <div style="clear:both; font-size:18px;">tax: '.(($data["price"])*($tax)).'</div>
        <div style="clear:both; font-size:18px;">grand total:'.(($data["price"])*($tax2)).'</div>
    </div>';
}
echo '</div>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:30:16.320

如果我理解正确，您可以通过将代码移动到单独的函数并将任何事件绑定到该函数来从任何区域调用 AJAX。

```
function postData(){
    var value = $('#str').val();
    var valueH = $('#strH').val();
    var prodid = $('#prodid').val();

    $.post('db_query.php',{valueH:valueH, value:value, prodid:prodid},   
        function(data){
        $("#search_results").html(data);
    });
    return false;
}

$(function() {
    $("#lets_search").bind('submit',function() {postData()});
    $("#strH").bind('change', function() {postData()});
    $("#str").bind('blur',function() {postData()});
}); 
```

# ssis - SSIS 中的事件处理程序优先级

> ID：11055991
> 
> 赞同：0
> 
> 时间：2012-06-15T18:08:05.387
> 
> 标签：ssis, bids

我的所有控制流元素上都有 OnPostExecute 事件处理程序，但是一旦我将 OnError 处理程序放在包级别，我就再也看不到任务级别的处理程序了。这是一个已知的错误还是我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:18:24.480

这是因为 OnPostExecute 事件处理程序是在每个包任务中创建的。包级别指示所有任务的 OnPosteExecute 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:41:33.373

你是什​​么意思你看不到他们？您的意思是，在事件处理程序下以粗体列出的唯一内容是包的 OnError 吗？

![在此处输入图像描述](../Images/cd8aa3e3504dfa0edb529e4961d62c2a.png)

如果是这样，请不要担心，您的所有包 OnPostExecute 事件仍然存在。诀窍是当您单击事件处理程序时光标的焦点位于包上。要查看与给定可执行文件关联的事件处理程序，请单击返回控制流，单击给定的可执行文件，然后单击事件处理程序。更简单的方法是只使用 Executable 选择器栏并深入了解它。

![在此处输入图像描述](../Images/a957177033db07ad5acc8539682bc55b.png)

我在我的 Execute SQL Task 上定义了一个 OnPostExecute 事件，所以我点击了它并选择了 OK。

现在我可以看到该可执行文件的事件

![在此处输入图像描述](../Images/f121dfb5ad05f1eb002d578e216676f6.png)

如果您不想花一生的时间点击各种可执行文件来尝试查找某些内容，包资源管理器选项卡在这方面非常有用，而且我发现人们不使用它。

在这里，您可以快速看到我在执行 SQL 任务上定义了 2 个事件处理程序，一个用于 OnPostExecute，一个用于 OnError，此外还有我在包级别定义的 OnError 事件。

![在此处输入图像描述](../Images/725717a8369bda61c4d84894c598aa53.png)

最后，快速说明一下操作顺序。鉴于我在控制流元素和包级别上定义的 OnError 事件处理程序的场景以及控制流元素上的 OnPostExecute 事件，当我的执行 SQL 任务引发错误（除以零）时，我将看到

1.  “执行 SQL 任务”的 OnError 事件触发
2.  “so_EventHandlerRajiv”（包）的 OnError 事件触发
3.  “执行 SQL 任务”的 OnPostExecute 事件触发

因此，OnError 将在 OnPostExecute 之前触发，并且给定的事件处理程序开始触发，它将渗透到所有侦听处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:22:54.420

也许您可以使用包资源管理器查看所有已定义的事件处理程序，而不是单击每个控制流任务的属性。马里奥 [http://msdn.microsoft.com/en-us/library/ms190114.aspx](http://msdn.microsoft.com/en-us/library/ms190114.aspx)

# android - 关于如何安装Android的问题

> ID：11055995
> 
> 赞同：2
> 
> 时间：2012-06-15T18:08:20.637
> 
> 标签：android, installation

我正在尝试在我的计算机上安装 android SDK，但是发生了很多奇怪的事情。我的主要问题是当我尝试安装 Android 4.0.3 包时。当我这样做时，它说没有安装任何东西。当我查看安装报告时，会出现以下情况：

```
Preparing to install archives
Downloading Android SDK Tools, revision 19
File not found: C:\Program Files (x86)\Android\android-sdk\temp\tools_r19-windows.zip (Access is denied)
Downloading SDK Platform Android 4.0.3, API 15, revision 3
File not found: C:\Program Files (x86)\Android\android-sdk\temp\android-15_r03.zip (Access is denied)
Downloading Samples for SDK API 15, revision 2
File not found: C:\Program Files (x86)\Android\android-sdk\temp\samples-15_r02.zip (Access is denied)
Downloading Sources for Android SDK, API 15, revision 2
File not found: C:\Program Files (x86)\Android\android-sdk\temp\sources-15_r02.zip (Access is denied)
Downloading Google USB Driver, revision 4
File not found: C:\Program Files (x86)\Android\android-sdk\temp\usb_driver_r04-windows.zip (Access is denied) 
Skipping 'ARM EABI v7a System Image, Android API 15, revision 2'; it depends on 'SDK Platform Android 4.0.3, API 15, revision 3' which was not installed.
Skipping 'Intel x86 Atom System Image, Android API 15, revision 1'; it depends on 'SDK    Platform Android 4.0.3, API 15, revision 3' which was not installed.
Skipping 'Google APIs, Android API 15, revision 2'; it depends on 'SDK Platform Android 4.0.3, API 15, revision 3' which was not installed.
Skipping 'HTC OpenSense SDK, Android API 15, revision 2'; it depends on 'SDK Platform Android 4.0.3, API 15, revision 3' which was not installed.
Skipping 'ICS_R1, Android API 15, revision 1'; it depends on 'SDK Platform Android 4.0.3, API 15, revision 3' which was not installed.
Done. Nothing was installed. 
```

在此，它表示当它试图访问某个文件时访问被拒绝。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T18:16:42.323

由于您显然使用的是 NetBeans，而不是 Eclipse：

右键单击您的 Android SDK 管理器 -> 以管理员身份运行。

这是假设您使用的是 Windows 操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:11:41.780

关闭你的日食。

然后**右键单击 Eclipse 图标 --> 以管理身份运行。**

这可能会解决您的问题或查看[此](http://developer-android.blogspot.in/2012/06/how-to-install-android-step-by-step.html)分步安装指南

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:13:50.937

如果您使用的是办公室计算机，则您可能不再拥有执行此操作的必要权限。尝试d：

# ios - 在 UIView 中创建 UISearchBar 和 UITableView

> ID：11055999
> 
> 赞同：1
> 
> 时间：2012-06-15T18:08:33.257
> 
> 标签：ios, uitableview

免责声明：我有点像 iOS n00b。我有一个基于导航的应用程序——即，在我的 AppDelegate 中，我创建了导航框架：

```
self.navigation_controller = [[UINavigationController alloc] initWithRootViewController:home_view_controller];
self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
self.window.rootViewController = navigation_controller;
self.window.makeKeyAndVisible; 
```

在我的主视图的框架内，我想要一个搜索栏，然后是可滚动的表格视图。所以，我写了这个：

```
- viewDidLoad{
  (HomeView*)home_view = [[HomeView alloc] init];
  self.view = home_view
  self.view.backgroundColor = [UIColor whiteColor]

  (UITableView*)self.table_view = [UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
  self.table_view.bounds.origin.y += 44;
  self.table_view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
  self.table_view.dataSource = self;
  self.table_view.delegate = self;
  [self.view addSubview:self.table_view];

  search_frame = self.view.bounds;
  search_frame.origin.y = 48.0;
  search_frame.size.height = 48.0;

  self.search_bar = [[UISearchBar alloc] initWithFrame:search_frame)];
  [self.view addSubview:self.search_bar];
} 
```

表格视图显示正常，但占据了导航栏下方的所有空间。我想要导航栏，然后是搜索栏，然后是表格视图。在 时`viewDidLoad`，`UITableView`还没有非零边界矩形，我希望这是问题的一部分。此外，我已经在我的文件中指定`UIViewAutoresizingFlexibleHeight`了我`autoresizingMask`何时真正希望它粘在搜索栏上——我再次相信这可能是问题的一部分。

我在这里误解了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:14:37.060

史蒂夫，

尝试以下更改：

1）使用以下方法设置tableview的框架：

```
CGRect targetRect = CGRectMake(0, 48, self.view.frame.size.width, self.view.frame.size.heigth);
(UITableView*)self.table_view = [UITableView alloc] initWithFrame:targetRect style:UITableViewStylePlain]; 
```

2）还添加以下自动调整掩码：

```
// This value will anchor your table view with top margin
UIViewAutoresizingFlexibleBottomMargin 
```

3）将搜索栏的框架设置为以下矩形框架：

```
CGRecttMake(0, 0, self.view.frame.size.width, 48); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:01:17.677

我要做的就是将 UISearchBar 添加为第一个 UITableView 标题。

（方法`tableView:viewForHeaderInSection:`：）

检查此博客文章：http: [//jainmarket.blogspot.com/2009/08/add-searchbar-as-uitableviews-header.html](http://jainmarket.blogspot.com/2009/08/add-searchbar-as-uitableviews-header.html)