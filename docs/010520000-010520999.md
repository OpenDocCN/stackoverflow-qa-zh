# StackOverflow 问答 10520000-10520999

# javascript - 如何为“构建自己的 T 恤”产品显示页面重叠 PNG 图像 - javascript/css/asp

> ID：10520000
> 
> 赞同：2
> 
> 时间：2012-05-09T16:14:49.370
> 
> 标签：javascript, css, image-processing, asp-classic, z-index

我用 Classic ASP 构建了我的 CMS（是的，我知道它很旧）。它有一个购物车和支付系统。除了标题、价格、缩略图等之外，我还添加了任何产品的功能：“用于堆叠的图像”。

因此，例如，如果您正在销售 T 恤，则页面上的一个“产品”将是“衬衫样式”，它有自己的 PNG 与之相关联。同一页面上的下一个“产品”将是“衬衫颜色”。然后是“标志”或“文字”。这些项目中的每一项都会影响页面左侧的一个图像，以便这些 PNG“堆叠”以创建最终产品的外观。

我的弱点是javascript和css。有没有人有一些代码或线索来帮助我？

哦，还有数百张图片，请提供有关如何使它们即时加载的提示，而不是在页面加载时尝试加载所有图片。

谢谢各位程序员！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:17:36.697

CSS 属性`position:absolute`允许您将元素置于彼此之上并`z-index`控制堆叠顺序，因此请使用它们来正确设置。

然后动态加载使用 javascript 将`src`任何现有元素更改为您需要的任何内容，就像这样。（使用 jQuery）

```
<div id="shirt>
    <img id="color" src="blank.png">
    <img id="decal" src="blank.png">
    <img id="logo" src="blank.png">
</div> 
```

-

```
$('#color').attr('src','red-shirt.png');
$('#decal').attr('src','lion-decal.png');
$('#logo').attr('src','bold-logo.png'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:44:49.210

用于`z-index`确定哪个图像在顶部并且可能`position:absolute`在一个图像上，以便图像重叠。

但是这里可以有很多方法。试试这个：http: [//jsfiddle.net/N6rjG/](http://jsfiddle.net/N6rjG/)

在那里，您将 T 恤作为 div 的背景，然后将选定的图像放入其中。脚本已经存在并且很简单。

html:

```
<!-- This one will be the tshirt--->
<div id="tshirt">
</div>

<h1>Click on Image to Select Design</h1>
<!--the choices-->
<img id="d1" class="d" src="https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcQUomLjtjuA81HKgj48ZaIT6Uvd9JGttmUvVcFO3j3ytp6v6MV0" />

<img id="d2" class="d" src="http://www.ironman2.net/iron-man.jpg" />

<img class="d" src="http://www.unc.edu/~bhamidi/personal/naruto.jpg" />​ 
```

CSS：

```
#tshirt{
   float:left;
   width:390px;
   height:400px;
   background:url(http://www.schumacher-fanclub.com/media/SFR1119-ferrari-t-shirt-small-scudetto-red.jpg);
}

.d{
    width:100px;
    height:130px;
    cursor:pointer;
} 
```

脚本：

```
$('img').click(function(){
    $("#tshirt").html(' ');
    $(this).clone()
        .appendTo("#tshirt")
        .css({margin:'130px 0 0 150px'});
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:25:53.583

不幸的是，您的问题比您想象的要广泛。

除了一些聪明的 CSS 之外，您可能还在寻找 AJAX。我建议您查看 jQuery。W3Schools 有一个非常好的教程。一旦掌握了基础知识，就可以设置一些基本的 AJAX 来加载图像文件，并将它们堆叠在一起。JQuery 有一种使用 AJAX 的非常简单的方法，所以一旦你弄清楚 jQuery 是如何工作的，你就不应该有任何麻烦。

从那里，您可以使用 CSS 定位每个图像文件。我将每个设置为 basic `<img>`，并将它们全部放在一个`<div>`. 从那里，看看`position: absolute;`，你可以希望找出其余的。如果您有更具体的问题，请不要犹豫！

# javascript - 如何在 javascript (sencha touch 2) 中使用带有个人 http 标头的 ajax 加载图像

> ID：10520001
> 
> 赞同：0
> 
> 时间：2012-05-09T16:14:50.013
> 
> 标签：javascript, html, ajax, extjs, sencha-touch-2

我正在开发一个 sencha touch 应用程序，我有一个表单，它需要加载 jpeg/图像并需要请求标头中的一些标头。**根本无法以传统方式加载，或者我收到 403（禁止）错误。**

我尝试了很多方法，但没有成功，所以我认为 ajax 是解决方案。Ajax 可以加载二进制数据吗？

*有人知道是否可以这样做？*

或者这只是不可能的，我必须以另一种方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:21:41.047

我相信这个stackoverflow线程可能会有所帮助：[Set a request header in JavaScript](https://stackoverflow.com/questions/1268673/set-request-header-in-javascript)

无论如何，请考虑使用**setRequestHeader**方法。检查[http://www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)上的第*4.7.2节*

# php - `array()` 函数中的 php IF 语句

> ID：10520008
> 
> 赞同：1
> 
> 时间：2012-05-09T16:15:12.877
> 
> 标签：php, arrays, if-statement, ranking

我正在尝试根据非空的查询结果设置一个数组。反过来，我希望以某种方式创建基于 NON Null 结果的排名。

SQL 查询返回：

```
Comp1    Comp2   Comp3   Comp4   Comp5   Comp6   Comp7   Comp8   Comp9
NULL     NULL    226.97   274    NULL    208     189     NULL    198.99 
```

我的PHP：

```
$COMP1 = $rankresult['Comp1'];
$COMP2 = $rankresult['Comp2'];
$COMP3 = $rankresult['Comp3'];
$COMP4 = $rankresult['Comp4'];
$COMP5 = $rankresult['Comp5'];
$COMP6 = $rankresult['Comp6'];
$COMP7 = $rankresult['Comp7'];
$COMP8 = $rankresult['Comp8'];
$COMP9 = $rankresult['Comp9']; 
```

这不起作用，因为我试图只放入非 Null 的变量：

```
$myarray = 'array(
        if(!empty($COMP1)){ 
        $COMP1,}
        if(!empty($COMP2)){ 
        $COMP2,}
        if(!empty($COMP3)){ 
        $COMP3,}
        if(!empty($COMP4)){ 
        $COMP4,}
        if(!empty($COMP5)){ 
        $COMP5,}
        if(!empty($COMP6)){ 
        $COMP6,}
        if(!empty($COMP7)){ 
        $COMP7,}
        if(!empty($COMP8)){ 
        $COMP8,}
        if(!empty($COMP9)){ 
        $COMP9})'; 
```

期望的输出：

```
$myarray = array(226.97,274,208,189,198.99) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:17:34.387

你试过[`array_filter()`](http://php.net/array-filter)吗？

```
$result = array_filter($rankresult); 
```

结果：

```
array(
    "comp3"=>226.97,
    "comp4"=>274,
    "comp6"=>208,
    "comp7"=>189,
    "comp9"=>198.99
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:22:55.867

您是否考虑过使用循环？

如果您有结果查询的大小，则可以执行以下操作：

```
$myarray=new array();
for ($ix=1; $ix<$num_rows; $ix++) {
    if (${COMP.$ix}!=NULL)
        array_push($myarray,${COMP.$ix});
} 
```

更新。

# java - Android - 在 webview 中加载 PDF

> ID：10520009
> 
> 赞同：3
> 
> 时间：2012-05-09T16:15:13.727
> 
> 标签：java, android, pdf, webview, webviewclient

我有这个 webview 代码，我希望在用户单击 PDF 链接时打开 PDF 文件。这是代码，你能告诉我我必须在这个PDF区域内放什么吗？我尝试了许多不同的方法，但根本无法查看 PDF。谢谢您的帮助。

```
webview.setWebViewClient ( new WebViewClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // do your handling codes here, which url is the requested url
        // probably you need to open that url rather than redirect:
        if (url.startsWith("tel:")) {
            startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(url)));
        } else if (url.startsWith("mailto:")) {
            url = url.replaceFirst("mailto:", "");
            url = url.trim();
            Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("plain/text").putExtra(Intent.EXTRA_EMAIL,
                    new String[]{url});
            startActivity(i);

        } else if (url.startsWith("geo:")) {
            try {
            } catch (Exception e) {
                System.out.println(e);
            }

        } else if (url.endsWith("pdf")) {

            try {

            } catch (Exception e) {
                System.out.println(e);
            }

        } else {
            view.loadUrl(url);
        }
        return true;
        // then it is not handled by default action
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T17:37:49.240

这可能很简单：

```
try
{
 Intent intentUrl = new Intent(Intent.ACTION_VIEW);
 intentUrl.setDataAndType(url, "application/pdf");
 intentUrl.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
 myActivity.startActivity(intentUrl);
}
catch (ActivityNotFoundException e)
{
 Toast.makeText(myActivity, "No PDF Viewer Installed", Toast.LENGTH_LONG).show();
} 
```

虽然我没有试过这个。

在我们的应用程序中，我们将 PDF 下载到应用程序文件系统，使其在世界范围内可读，然后在 Intent 中传递路径以打开 PDF 查看应用程序（例如 Acrobat Reader）。请注意，您还需要注意清理这些下载的 PDF！

在你的尝试块中

```
new DownloadPDFTask().execute(url); 
```

下载PDF任务类：

```
public class DownloadPDFTask extends AsyncTask<String, Void, Integer> 
{
    protected ProgressDialog mWorkingDialog;    // progress dialog
    protected String mFileName;         // downloaded file
    protected String mError;            // for errors

    @Override
    protected Integer doInBackground(String... urls)
    {

     try
     {
      byte[] dataBuffer = new byte[4096];
          int nRead = 0;

          // set local filename to last part of URL
          String[] strURLParts = urls[0].split("/");
          if (strURLParts.length > 0)
            mFileName = strURLParts[strURLParts.length - 1];
          else
                mFileName = "REPORT.pdf";

          // download URL and store to strFileName

          // connection to url
      java.net.URL urlReport = new java.net.URL(urls[0]);
          URLConnection urlConn = urlReport.openConnection();
          InputStream streamInput = urlConn.getInputStream();
          BufferedInputStream bufferedStreamInput = new BufferedInputStream(streamInput);
          FileOutputStream outputStream = myActivity.openFileOutput(mFileName,Context.MODE_WORLD_READABLE); // must be world readable so external Intent can open!
          while ((nRead = bufferedStreamInput.read(dataBuffer)) > 0)
                outputStream.write(dataBuffer, 0, nRead);
          streamInput.close();
          outputStream.close();
      }
      catch (Exception e)
      {
       Log.e("myApp", e.getMessage());
       mError = e.getMessage();
       return (1);
      }

     return (0);
    }

    //-------------------------------------------------------------------------
    // PreExecute - UI thread setup
    //-------------------------------------------------------------------------

    @Override
    protected void onPreExecute()
    {
     // show "Downloading, Please Wait" dialog
     mWorkingDialog = ProgressDialog.show(myActivity, "", "Downloading PDF Document, Please Wait...", true);
     return;
    }

    //-------------------------------------------------------------------------
    // PostExecute - UI thread finish
    //-------------------------------------------------------------------------

    @Override
    protected void onPostExecute (Integer result)
    {
         if (mWorkingDialog != null)
      {
       mWorkingDialog.dismiss();
       mWorkingDialog = null;
      }

         switch (result)
         {
         case 0:                            // a URL

            // Intent to view download PDF
            Uri uri  = Uri.fromFile(myActivity.getFileStreamPath(mFileName));

            try
            {
                Intent intentUrl = new Intent(Intent.ACTION_VIEW);
                intentUrl.setDataAndType(uri, "application/pdf");
                intentUrl.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                myActivity.startActivity(intentUrl);
            }
            catch (ActivityNotFoundException e)
            {
                Toast.makeText(myActivity, "No PDF Viewer Installed", Toast.LENGTH_LONG).show();
            }

            break;

        case 1:                         // Error

            Toast.makeText(myActivity, mError, Toast.LENGTH_LONG).show();
            break;

        }

    }

} 
```

对“myActivity”的任何引用都必须替换为对您的 Activity 类的引用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-09T06:27:22.087

请在 webview 中查看处理重定向 url 和打开 PDF 而不下载的示例。

```
private void init()
{
    WebView webview = (WebView) findViewById(R.id.webview);
    WebSettings settings = webview.getSettings();
    settings.setJavaScriptEnabled(true);
    webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

    PdfWebViewClient pdfWebViewClient = new PdfWebViewClient(this, webview);
    pdfWebViewClient.loadPdfUrl(
                "https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwjgwIfp3KXSAhXrhFQKHQqEDHYQFggZMAA&url=http%3A%2F%2Fwww.orimi.com%2Fpdf-test.pdf&usg=AFQjCNERYYcSfMLS5ukBcT2Qy11YxEhXqw&cad=rja");
}

private class PdfWebViewClient extends WebViewClient
{
    private static final String TAG = "PdfWebViewClient";
    private static final String PDF_EXTENSION = ".pdf";
    private static final String PDF_VIEWER_URL = "http://docs.google.com/gview?embedded=true&url=";

    private Context mContext;
    private WebView mWebView;
    private ProgressDialog mProgressDialog;
    private boolean isLoadingPdfUrl;

    public PdfWebViewClient(Context context, WebView webView)
    {
        mContext = context;
        mWebView = webView;
        mWebView.setWebViewClient(this);
    }

    public void loadPdfUrl(String url)
    {
        mWebView.stopLoading();

        if (!TextUtils.isEmpty(url))
        {
            isLoadingPdfUrl = isPdfUrl(url);
            if (isLoadingPdfUrl)
            {
                mWebView.clearHistory();
            }

            showProgressDialog();
        }

        mWebView.loadUrl(url);
    }

    @SuppressWarnings("deprecation")
    @Override
    public boolean shouldOverrideUrlLoading(WebView webView, String url)
    {
        return shouldOverrideUrlLoading(url);
    }

    @SuppressWarnings("deprecation")
    @Override
    public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl)
    {
        handleError(errorCode, description.toString(), failingUrl);
    }

    @TargetApi(Build.VERSION_CODES.N)
    @Override
    public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request)
    {
        final Uri uri = request.getUrl();
        return shouldOverrideUrlLoading(webView, uri.toString());
    }

    @TargetApi(Build.VERSION_CODES.N)
    @Override
    public void onReceivedError(final WebView webView, final WebResourceRequest request, final WebResourceError error)
    {
        final Uri uri = request.getUrl();
        handleError(error.getErrorCode(), error.getDescription().toString(), uri.toString());
    }

    @Override
    public void onPageFinished(final WebView view, final String url)
    {
        Log.i(TAG, "Finished loading. URL : " + url);
        dismissProgressDialog();
    }

    private boolean shouldOverrideUrlLoading(final String url)
    {
        Log.i(TAG, "shouldOverrideUrlLoading() URL : " + url);

        if (!isLoadingPdfUrl && isPdfUrl(url))
        {
            mWebView.stopLoading();

            final String pdfUrl = PDF_VIEWER_URL + url;

            new Handler().postDelayed(new Runnable()
            {
                @Override
                public void run()
                {
                    loadPdfUrl(pdfUrl);
                }
            }, 300);

            return true;
        }

        return false; // Load url in the webView itself
    }

    private void handleError(final int errorCode, final String description, final String failingUrl)
    {
        Log.e(TAG, "Error : " + errorCode + ", " + description + " URL : " + failingUrl);
    }

    private void showProgressDialog()
    {
        dismissProgressDialog();
        mProgressDialog = ProgressDialog.show(mContext, "", "Loading...");
    }

    private void dismissProgressDialog()
    {
        if (mProgressDialog != null && mProgressDialog.isShowing())
        {
            mProgressDialog.dismiss();
            mProgressDialog = null;
        }
    }

    private boolean isPdfUrl(String url)
    {
        if (!TextUtils.isEmpty(url))
        {
            url = url.trim();
            int lastIndex = url.toLowerCase().lastIndexOf(PDF_EXTENSION);
            if (lastIndex != -1)
            {
                return url.substring(lastIndex).equalsIgnoreCase(PDF_EXTENSION);
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T14:17:18.143

我试图处理这种完全相同的情况。我想出的解决方案如下。

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {
            String cleanUrl = url;
            if (url.contains("?")) {
                // remove the query string
                cleanUrl = url.substring(0,url.indexOf("?"));
            }

            if (cleanUrl.endsWith("pdf")) {

                try {
                    Uri uriUrl = Uri.parse(cleanUrl);
                    Intent intentUrl = new Intent(Intent.ACTION_VIEW, uriUrl);
                    startActivity(intentUrl);
                    return true;

                } catch (Exception e) {
                    System.out.println(e);
                    Toast.makeText(context,"No PDF Viewer Installed", Toast.LENGTH_LONG).show();
                }
            }

            return false;
        } 
```

我需要确保它能够处理 pdf 链接，即使有查询字符串。由于 cleanUrl 需要以“pdf”结尾，因此仍然有点麻烦，但只要这是真的，这应该可以工作。如果您通过 php 脚本或其他东西提供 pdf，您可能想要更深入地挖掘，根据 MIME 类型或其他东西处理事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-09T20:48:51.277

在 webview 中加载 pdf：

```
WebView wv = (WebView) view.findViewById(R.id.webPage);
            wv.getSettings().setJavaScriptEnabled(true);
            wv.setWebViewClient(new WebClient());
            wv.loadUrl("http://drive.google.com/viewerng/viewer?embedded=true&url=" + mUrl);
            wv.getSettings().setBuiltInZoomControls(true); 
```

mUrl - 将成为您的 pdf 链接

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-11T18:05:38.747

FWIW，mozilla 有一个[PDF 阅读器完全在 JavaScript](https://mozilla.github.io/pdf.js/)中，它是 apache 许可的。如果您不介意额外的尺寸，可能值得研究。这样您就可以在浏览器中完成所有操作，而不必依赖第 3 方 PDF 阅读器。

# jquery - jQuery Mobile 委托 vs 实时 vs 绑定

> ID：10520020
> 
> 赞同：11
> 
> 时间：2012-05-09T16:15:26.030
> 
> 标签：jquery, jquery-mobile

我似乎无法理解 jQuery Mobile 中以下内容之间的差异：

```
$( document ).live('pageshow', function(event) {
});

$( document ).bind('pageshow', function(event) {
});

$( document ).delegate("#page", "pageshow", function() {
}); 
```

如何在我的文档头部执行某些页面中不同的脚本？我使用哪些方法来调用这些脚本？

更新：jQuery 版本：1.7.1 jQuery Mobile 版本：1.1.0

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T16:23:53.283

您将绑定到 jQuery Mobile 公开的“页面事件”，例如`pageinit`：

```
$(document).delegate('#my-page', 'pageinit', function () {
    //this is like document.ready for this pseudo-page
}); 
```

由于您使用的是 jQuery Core 1.7.1，因此您可以使用`.on()`其语法略有不同：

```
$(document).on('pageinit', '#my-page', function () {
    //this is like document.ready for this pseudo-page
}); 
```

您的所有三种方法都做类似的事情。`.live()`与使用`.delegate()`with`document`作为根选择相同，但它已被贬值，因此停止使用它是个好主意（来源：[http](http://api.jquery.com/on) ://api.jquery.com/on ）。`.bind()`直接在元素上使用`document`与使用相同，`.delegate()`但是当您使用时，`.bind()`您必须确定哪个伪页面在事件处理程序中而不是在函数调用中触发了事件。

例如：

```
$(document).bind('pageshow', function () {
    var id = $.mobile.activePage[0].id;
    //you can use $.mobile.activePage to do work on the current page
}); 
```

通常，当我们不知道元素何时会存在于 DOM 中时，会使用事件委托。它依赖于冒泡 DOM 的事件，直到它们到达根选择（在您的情况下，它始终是`document`元素）。

文档`.delegate()`：[http ://api.jquery.com/delegate](http://api.jquery.com/delegate)

有关这些功能之间差异的更多一般信息，请参阅本文（我已阅读它以检查其准确性并且正确）：[http ://www.elijahmanor.com/2012/02/differences-between- jquery-bind-vs-live.html](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:23:44.003

这是一个很好的描述：http: [//jquerybyexample.blogspot.com/2010/08/bind-vs-live-vs-delegate-function.html](http://jquerybyexample.blogspot.com/2010/08/bind-vs-live-vs-delegate-function.html)

但简短的回答是，如果您使用的是 jquery 1.7，您可能应该开始使用新的 API on() 而不是以下任何一种： http: [//api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:25:34.553

前几天我也有同样的问题，发现这篇文章对每个问题都有明确的细分。

[http://jquerybyexample.blogspot.com/2010/08/bind-vs-live-vs-delegate-function.html](http://jquerybyexample.blogspot.com/2010/08/bind-vs-live-vs-delegate-function.html)

# php - PHP 中的预增量，定义了魔术 get 和 set

> ID：10520021
> 
> 赞同：5
> 
> 时间：2012-05-09T16:15:28.053
> 
> 标签：php, getter-setter, magic-methods, pre-increment

我有一个问题一直在破坏我想做的事情的方式很长一段时间。它与在 PHP 中使用魔法 get 和 set 以及尝试对对象进行预增量有关。我有一个 PHP 类，如下所示：

```
class Foo {
    public $object;

    function __construct() {
            $this->object = array("bar" => 1);
    }

    function & __get($name) {
            return $this->object[$name];
    }

    function __set($name, $value) {
            echo "Old value: ". $this->object[$name] ." - New value: ". $value ."\n";
            $this->object[$name] = $value;
    }
} 
```

注意方法`&`中的`__get`。现在我运行这段代码：

```
$o = new Foo();

echo "First test\n";
$o->bar = 2;

echo "Second test\n";
$o->bar = $o->bar + 1;

echo "Third test\n";
$o->bar += 1;

echo "Fourth test\n";
++$o->bar; 
```

输出是：

```
First test
Old value: 1 - New value: 2
Second test
Old value: 2 - New value: 3
Third test
Old value: 4 - New value: 4
Fourth test
Old value: 5 - New value: 5 
```

第三个和第四个测试有一个意想不到的（我）行为。看起来 $this->object['bar'] 返回要设置的值，而不是我预期的旧值。为什么在实际设置之前就已经设置了值？

如果我`&`从`__get`方法中删除 ，这将起作用，所以我想这与 PHP 所做的引用管理有关。但我希望第三个测试的行为与第二个相同，但事实并非如此。

我真的不明白这个。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:49:46.797

结果实际上（经过仔细考虑）是我所期望的。

* * *

*第一次测试*

代码：`$o->bar = 2;`
输出：`Old value: 1 - New value: 2`

操作，按顺序：

*   `$bar`为(call `__set()`)分配一个新值

显然，这只是放弃了旧值并在其位置上放置了一个新值。没什么复杂的。

* * *

*第二次测试*

代码：`$o->bar = $o->bar + 1;`
输出：`Old value: 2 - New value: 3`

操作，按顺序：

*   获取（致电）的*副本* `$bar``__get()`
*   给它加一个
*   `$bar`为(call `__set()`)分配一个新值

计算表达式的右侧，并将结果分配给左侧。实例变量的值`$bar`在右侧评估期间保持不变，因此您在`__set()`调用开始时会看到它的旧值。

* * *

*第三次测试*

代码：`$o->bar += 1;`
输出：`Old value: 4 - New value: 4`

操作，按顺序：

*   获取对(call )的*引用* `$bar``__get()`
*   给它加一个
*   `$bar`为(call `__set()`)分配一个新值

这很有趣 - 乍一看，我有点惊讶您看到`__set()`此操作生成的输出。因为您正在增加原始 zval 中保存的值，而不是分配一个全新的值 - 因此是一个全新的 zval - 就像前两个一样，所以`__set()`调用似乎是多余的。

但是，当`__set()`被调用时，您确实看到的输出是您所期望的，因为*引用的值在被调用**之前* 已经增加了`__set()`。传递给的值`__set()`是递增操作的结果，所以它不会导致另一个被添加到它，它只是分配`$foo->bar`to的值`$foo->bar`- 所以你看到旧值和新值是相同的。

* * *

*第四次测试*

代码：`++$o->bar;`
输出：`Old value: 5 - New value: 5`

...在语义上与第三个测试相同。以完全相同的顺序执行完全相同的操作会产生完全相同的输出。再一次，有点奇怪，有任何输出，但你去了。

* * *

*我发明的第五个测试*

代码：`$o->bar++;`
输出：`Old value: 5 - New value: 6`

...语义上与第二个测试相同。这又很有趣，也有点出乎意料，但它也很有意义，因为它`$i++`返回了 的旧值`$i`。

* * *

猜测在第三次和第四次测试中被不必要地调用的原因`__set()`是：

*   （不太可能但可能）因为计算`__get()`返回引用还是副本比简单地调用更昂贵`__set()`- 这似乎不太可能，因为函数调用通常非常昂贵。
*   （更有可能）因为该`__set()`函数可以包含与实际赋值操作无关的代码，并且如果在更改值时该代码没有运行，则可能会带来严重的不便。例如，如果要实现某种事件驱动的架构，当某些值被改变时触发事件，如果只使用直接赋值，那就太烦人了。

# grails - 在 Grails 应用程序中引用本地 Groovy 项目

> ID：10520025
> 
> 赞同：0
> 
> 时间：2012-05-09T16:15:41.150
> 
> 标签：grails, groovy

我在 Eclipse 中创建了一个本地 Groovy 项目。

我现在开始在 Eclipse 中构建一个 Grails 项目，我需要在我的一些控制器/服务类中引用 Groovy 项目。

通常对于 Java 项目，我只需在 webapp 项目上配置项目构建路径以引用我的本地 Java 项目，这很好（或者如果它们都是 maven 项目，请参考我的本地项目工件 ID 等更新 webapp pom ）。

但是，将本地 groovy 项目添加到 Grails 构建路径没有任何影响，并且我无法访问本地 Groovy 类 - 谁能建议我如何使本地项目在我的 Grails 项目中可用？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:09:47.357

从 groovy 项目中导出一个 jar 并包含它？

# java - 从构造函数分配数组时出现意外的 NullPointerException

> ID：10520027
> 
> 赞同：1
> 
> 时间：2012-05-09T16:15:48.647
> 
> 标签：java, android, arrays, nullpointerexception

我似乎无法弄清楚这一点，如果你们能帮助我，那就太棒了！我正在尝试将已经制作的对象传递给构造函数，以便获取它们的所有值。

```
public class Drops {
  Ship ship;
  Bullet[] bullet;
  Aliens[] aliens;
  Movement movement;

  public Drops(Ship ship,Bullet[] bull,Aliens[] alienT) {
    this.ship = ship;
    for (int a = 0; a < MainGamePanel.maxAliens;a++) {
      System.out.println(a +" " +alienT[a].x); // THIS WORKS, when nothing
                                               // is being assigned, so the values 
                                               // are being passed correctly.
      this.aliens[a] = alienT[a];
      for (int b = 0; b < MainGamePanel.maxShots;b++){
        this.bullet[b] = bull[b];
  }
    }
  }
// that is is the class, and also where the error occurs 
```

主要是我像这样将值发送给构造函数

```
drop = new Drops(ship, bull, alienT); 
```

ship 不是数组 bull，alienT 都是数组。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:17:46.663

您需要初始化数组：

```
Bullet[] bullet;
Aliens[] aliens; 
```

例如：

```
public Drops(Ship ship,Bullet[] bull,Aliens[] alienT){
    this.ship = ship;
    this.bullet = new Bullet[bull.length];
    this.aliens = new Aliens[alianT.length];
    // .. 
```

此外，请确保循环条件考虑了 和 的长度`alienT`，`bull`如果它们短于`MainGamePanel.maxAliens`并且`MainGamePanel.maxShots`您将得到`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:19:22.117

您可以分别定义 Bull 和 allienT`Collection<Bullet>`参数`Collection<AllienT>`。

然后你可以调用这个方法传递一个`ArrayList`，`HashSet`或者你喜欢的集合类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:21:17.557

你得到 NPE 因为`aliens`和`bullet`成员数组是`null`. 确保您在构造函数中以适当的长度实例化它们：

```
public Drops(Ship ship,Bullet[] bull,Aliens[] alienT){
    this.ship = ship;
    this.aliens = new Aliens[alienT.length];
    this.bullet = new Bullet[bull.length];
    // ...
} 
```

# java - Java 常量通过构建字符串进行实例化

> ID：10520028
> 
> 赞同：1
> 
> 时间：2012-05-09T16:15:52.767
> 
> 标签：java, string, dynamic, constants

我正在尝试从常量文件中读取键值对。当我直接使用类名和字段名时它可以工作，但是当我动态构造Class+字段组合时它不起作用。如何协商这个问题？

以下是我的常量文件

```
Public interface Constants
{
String  DEV_SELECT_STATEMENT  =  “DEV_INT_SQL_SELECT_STATEMENT”
String  INT_SELECT_STATEMENT  =  “DEV_INT_SQL_SELECT_STATEMENT”
} 
```

查询.properties 文件

```
DEV_INT_SQL_SELECT_STATEMENT =  “SELECT * FROM SOME TABLE”; 
```

JAVA类文件//这个工作

```
public someClass
{
public someMethod()  //This works
     {
      String sqlStatement = QueryLoader.getStatement(Constants.DEV_SELECT_STATEMENT);
      System.out.println("The  key is :" + Constants. DEV_SELECT_STATEMENT);
      System.out.println(“SqlStatement is : “ + sqlStatement);
      }
} 
```

关键是：DEV_INT_SQL_SELECT_STATEMENT

SqlStatement 是：SELECT * FROM SOME TABLE

```
 public someClass  //This does not work
 {
public someMethod(String env)  //This does not work
     {
      String queryKey =  “Constants” +env + “_SELECT_STATEMENT “;
      System.out.println(“The Key is :  “ + queryKey);
      String sqlStatement = QueryLoader.getStatement(queryKey);
      System.out.println(“SqlStatement is : “ + sqlStatement);
     } 
```

Key is :Constants.DEV_SELECT_STATEMENT //这里不给值而是字符串

SqlStatement 是：空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:25:28.130

使用反射：

```
String fieldName = env+"_SELECT_STATEMENT";

String value = String.valueOf(Constants.class.getField(fieldName).get(null)); 
```

编辑：我注意到我做了一些非法的事情（Constants.class.getClass() 无效）

我如何测试编辑的代码并且它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:32:22.337

有时解决方案不是回答 OP 提出的问题，而是解决他们问题的最简单的解决方案。

是的，您可以使用反射，但如果我正确理解了这个问题（虽然这个问题很混乱..），您要解决的基本问题是`<Key, Value>`从文件中读取对。最简单的解决方案是为此使用正确的数据结构，即`Map<String, String>`. 既然你想从文件中读取数据，你甚至不必自己解析这个，有java的[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:21:00.007

是的..它永远不会在语句中起作用，因为查询`String sqlStatement = QueryLoader.getStatement(queryKey);`键的字符串值被传递，而不是您正在寻找的绝对值。

尽管可以做到，但做到这一点很困难。您需要做的是，您需要重写 toString 方法并找到一种方法来在查询键上的 toString 被调用时返回绝对值！

解决方案：使用反射！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:47:47.953

您可能会使用枚举`enum`

# android - Android 应用简历问题

> ID：10520031
> 
> 赞同：1
> 
> 时间：2012-05-09T16:16:01.543
> 
> 标签：android, memory

在我的应用程序中，我有一个加载视图，它通过访问 API 并将一些启动信息带回存储来设置应用程序。我将它临时存储在 Application 类中。数据类型的一个示例是可服务城市的列表。

流程是：

加载视图 -> 主菜单 -> 等等

如果我退出应用程序并返回，它通常从主菜单视图开始并点击 onresume 并且一切都很好。但有时，如果我等待一段时间，操作系统可能会清除一些内存，我会回来并再次进入主菜单，但这一次通过调用 onCreate 从头开始​​为该视图。但似乎应用程序数据已被擦除。

我只是想知道为什么，如果它正在擦除应用程序数据，它不只是从头开始启动应用程序吗？

清单中是否有一些指令可以使它做到这一点？请记住，我不希望它在暂停返回应用程序时重新启动应用程序。仅当操作系统清除应用程序数据时...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:30:33.830

当应用程序关闭以释放内存时，存储在您的`Application`类中的状态将丢失。即使您的应用程序以几种方式关闭，您也可以保存将持续存在的信息。

一种是使用共享首选项：[Making data persistent in android](https://stackoverflow.com/questions/3310066/making-data-persistent-in-android)

另一种是使用`Bundles`可能更符合您需要的内容：[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

# c# - 合并接口上多个类的独特方法？

> ID：10520033
> 
> 赞同：0
> 
> 时间：2012-05-09T16:16:03.130
> 
> 标签：c#

我有 2 个包含唯一数据库存储库的类。两者都与不同的数据库交互。我想将这些存储库合并到一个界面上。这是可能的，还是总是这样，两个类都不会被视为完全实现所有接口成员？

我想要这样的东西，

```
public class FooDatabase : IFooBarDatabases
{
    public IFooRepository FooRepository { get; set; }
}

public class BarDatabase : IFooBarDatabases
{
    public IBarRepository BarRepository { get; set; }
}

public interface IFooBarDatabases
{
    IFooRepository FooRepository { get; }

    IBarRepository BarRepository { get; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:20:11.000

存储库应该是“数据库独立的”

*存储库在域和数据映射层之间进行调解，就像内存中的域对象集合一样。客户端对象以声明方式构造查询规范，并将它们提交给 Repository 以获得满意。对象可以添加到存储库中，也可以从存储库中删除，就像它们可以从简单的对象集合中一样，存储库封装的映射代码将在幕后执行适当的操作*

现在，您将如何创建您的存储库的方式实际上取决于您的域，而不是将命中哪个数据库：存储库不应该关心将命中哪个数据库

[http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)

# enterprise-architect - Enterprise Architect：如何在图表中将包显示为组

> ID：10520037
> 
> 赞同：2
> 
> 时间：2012-05-09T16:16:10.980
> 
> 标签：enterprise-architect

我正在尝试将一些源代码导入 EA，并制作包。在我的根类图中，我想将每个包显示为一个可视分组，并将该包内的所有类放在一个组中。

这可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:04:44.790

不是自动的。当您对源代码进行逆向工程时，您可以选择在每个包中创建一个类图，或者根本不创建图。

手动执行此操作，您可以创建一个仅包含包的图表：默认情况下，当包放置在图表中时，EA 会列出每个包的内容。

您还可以将类拖到图表中，并使用边界或泳道对它们进行分组。边界是从“通用”图表工具箱创建的，而泳道是通过右键单击图表的空白区域来访问的。

最后，您可以使用图表的属性（也可以通过右键单击空白区域访问），特别是有关名称空间和全范围对象名称的属性；这些会影响 EA 在图表中显示包和元素的方式。

# c# - 计算文件的 MD5 校验和

> ID：10520048
> 
> 赞同：379
> 
> 时间：2012-05-09T16:16:51.117
> 
> 标签：c#, .net, hash, md5

我正在使用[iTextSharp](https://en.wikipedia.org/wiki/IText)从 PDF 文件中读取文本。但是，有时我无法提取文本，因为 PDF 文件只包含图像。我每天都下载相同的PDF文件，我想看看PDF是否被修改过。如果无法获得文本和修改日期，[MD5](http://en.wikipedia.org/wiki/MD5)校验和是否是判断文件是否已更改的最可靠方法？

如果是，一些代码示例将不胜感激，因为我没有太多的密码学经验。

* * *

## 回答 #1

> 赞同：875
> 
> 时间：2012-05-09T16:19:09.107

[使用System.Security.Cryptography.MD5](https://msdn.microsoft.com/en-us/library/system.security.cryptography.md5(v=vs.110).aspx)非常简单：

```
using (var md5 = MD5.Create())
{
    using (var stream = File.OpenRead(filename))
    {
        return md5.ComputeHash(stream);
    }
} 
```

（我相信*实际上*使用的 MD5 实现不需要被处理，但我可能仍然会这样做。）

之后如何比较结果取决于您；例如，您可以将字节数组转换为 base64，或直接比较字节。（请注意，数组不会覆盖`Equals`。使用 base64 更容易正确，但如果您真的只对比较哈希感兴趣，则效率会稍低。）

如果您需要将哈希表示为字符串，您可以使用以下命令将其转换为十六进制`BitConverter`：

```
static string CalculateMD5(string filename)
{
    using (var md5 = MD5.Create())
    {
        using (var stream = File.OpenRead(filename))
        {
            var hash = md5.ComputeHash(stream);
            return BitConverter.ToString(hash).Replace("-", "").ToLowerInvariant();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2016-01-08T00:09:32.703

我就是这样做的：

```
using System.IO;
using System.Security.Cryptography;

public string checkMD5(string filename)
{
    using (var md5 = MD5.Create())
    {
        using (var stream = File.OpenRead(filename))
        {
            return Encoding.Default.GetString(md5.ComputeHash(stream));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-12-21T19:16:14.343

我知道这个问题已经回答了，但这就是我使用的：

```
using (FileStream fStream = File.OpenRead(filename)) {
    return GetHash<MD5>(fStream)
} 
```

哪里**GetHash**：

```
public static String GetHash<T>(Stream stream) where T : HashAlgorithm {
    StringBuilder sb = new StringBuilder();

    MethodInfo create = typeof(T).GetMethod("Create", new Type[] {});
    using (T crypt = (T) create.Invoke(null, null)) {
        byte[] hashBytes = crypt.ComputeHash(stream);
        foreach (byte bt in hashBytes) {
            sb.Append(bt.ToString("x2"));
        }
    }
    return sb.ToString();
} 
```

可能不是最好的方法，但它可以很方便。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-15T10:03:06.017

这是我发现的一个稍微简单的版本。它一次读取整个文件，只需要一个`using`指令。

```
byte[] ComputeHash(string filePath)
{
    using (var md5 = MD5.Create())
    {
        return md5.ComputeHash(File.ReadAllBytes(filePath));
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-16T13:45:10.833

我知道我迟到了，但在实际实施解决方案之前进行了测试。

我确实对内置的 MD5 类和[md5sum.exe](http://sourceforge.net/projects/unxutils/files/unxutils/current/UnxUtils.zip/download)进行了测试。在我的情况下，内置类需要 13 秒，而 md5sum.exe 每次运行也需要 16-18 秒左右。

```
 DateTime current = DateTime.Now;
    string file = @"C:\text.iso";//It's 2.5 Gb file
    string output;
    using (var md5 = MD5.Create())
    {
        using (var stream = File.OpenRead(file))
        {
            byte[] checksum = md5.ComputeHash(stream);
            output = BitConverter.ToString(checksum).Replace("-", String.Empty).ToLower();
            Console.WriteLine("Total seconds : " + (DateTime.Now - current).TotalSeconds.ToString() + " " + output);
        }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-25T00:45:06.083

如果您需要计算 MD5 以查看它是否与 Azure blob 的 MD5 匹配，那么这个 SO 问题和答案可能会有所帮助：[Azure 上上传的 blob 的 MD5 哈希与本地计算机上的相同文件不匹配](https://stackoverflow.com/questions/31183477/md5-hash-of-blob-uploaded-on-azure-doesnt-match-with-same-file-on-local-machine)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-01T14:24:01.657

对于动态生成的 PDF。创建日期和修改日期总是不同的。

您必须删除它们或将它们设置为恒定值。

然后生成 md5 哈希来比较哈希。

您可以使用`PDFStamper`删除或更新日期。

# git - 到 Git 的奇怪格式的 SVN 存储库

> ID：10520050
> 
> 赞同：3
> 
> 时间：2012-05-09T16:17:02.473
> 
> 标签：git, svn, git-svn

我正在努力移植一个非常古老的 svn 存储库，不幸的是，它是以非标准方式制作的。查看以下格式：

```
PROJECT/
  trunk/
    service1/
    service2/
  branches/
    service1-1.0
    service1-1.1
    service1.1.2
    service2-1.0
  tags/
    service1-1.0.0
    service1-1.0.1
    service2.1.0.0 
```

现在 git repo 只需要转换一次——我们不需要同时支持两者。我尝试了几种不同的方法来做到这一点。我得到的最接近的是这样的：

`svn2git --username user.name --trunk trunk/service1 --branches branches/service1-* --tags tags/service1-* --revision 12 --authors ../authors.txt -v https://www.domain.com/svn/PROJECT/`

如果有人能伸出援手，我将不胜感激！谢谢。

编辑：谢谢亚历克西斯。忘记贴那一点了。这是输出： `Invalid pattern in 'PROJECT/branches/service1-*': service1-*`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:04:41.913

在分支和标签文件夹级别指定分支和标签的根。然后删除之后每个项目不需要的分支和标签。

# javascript - 计算嵌套网格内文本框的总和

> ID：10520051
> 
> 赞同：0
> 
> 时间：2012-05-09T16:17:02.343
> 
> 标签：javascript, jquery, asp.net, .net, client-side

我在`GridView`. 两个嵌套网格都有不同数量的控件 ( `TextBoxes`)。我想计算嵌套网格文本框的总和并放入相关行父网格的相关文本框。

我想使用 jQuery 来做到这一点。

以下是网格的来源：

```
<table cellspacing="0" rules="all" border="1" id="gvSPActivities" style="width:100%;border-collapse:collapse;">
    <tr class="donorh1" align="left" style="height:35px;">
        <th scope="col" style="width:40px;">#</th><th scope="col">Activity</th><th scope="col">Unit</th><th scope="col">Target</th><th scope="col">Benefic</th><th scope="col">Cost</th>
    </tr><tr class="gridrow2">
        <td>
                1
            </td><td>a</td><td>u1</td><td>
                <input name="gvSPActivities$ctl02$txtTarget" type="text" value="100" id="gvSPActivities_txtTarget_0" class="numeric" style="width:150px;" />
            </td><td>
                <a class="showDetails" href="javascript:switchViews('div1', 'one');">
                Show Details</a>
                <input name="gvSPActivities$ctl02$txtTotalBenefic" type="text" id="gvSPActivities_txtTotalBenefic_0" />
                <div class="details" id="div1" style="display: none;
                left: 30px;">
                <div>
            <table cellspacing="0" rules="all" border="1" id="gvSPActivities_gvBenefic_0" style="border-collapse:collapse;">
                <tr>
                    <th scope="col">Male</th><th scope="col">Female</th><th scope="col">Children</th><th scope="col">Family</th>
                </tr><tr>
                    <td>
                        <input name="gvSPActivities$ctl02$gvBenefic$ctl02$txtMaleBenefic" type="text" id="gvSPActivities_gvBenefic_0_txtMaleBenefic_0" class="numeric" style="width:100px;" />
                        </td><td>
                        <input name="gvSPActivities$ctl02$gvBenefic$ctl02$txtFemaleBenefic" type="text" id="gvSPActivities_gvBenefic_0_txtFemaleBenefic_0" class="numeric" style="width:100px;" />
                        </td><td>
                        <input name="gvSPActivities$ctl02$gvBenefic$ctl02$txtChildren" type="text" id="gvSPActivities_gvBenefic_0_txtChildren_0" class="numeric" style="width:100px;" />
                        </td><td>
                        <input name="gvSPActivities$ctl02$gvBenefic$ctl02$txtFamilyBenefic" type="text" id="gvSPActivities_gvBenefic_0_txtFamilyBenefic_0" class="numeric" style="width:100px;" />
                        </td>
                </tr>
            </table>
        </div>
                </div>
            </td><td>
                <a class="showDetails" href="javascript:switchViews('div1', 'one');">
                Show Details</a>
                <input name="gvSPActivities$ctl02$txtTotalCost" type="text" id="gvSPActivities_txtTotalCost_0" />
                <div class="details" id="div1" style="display: none;
                left: 30px;">
                <div>
            <table cellspacing="0" rules="all" border="1" id="gvSPActivities_gvCost_0" style="border-collapse:collapse;">
                <tr>
                    <th scope="col">Main Cost</th><th scope="col">Other Cost</th>
                </tr><tr>
                    <td>
                        <input name="gvSPActivities$ctl02$gvCost$ctl02$txtMainCost" type="text" id="gvSPActivities_gvCost_0_txtMainCost_0" class="numeric" style="width:100px;" />
                        </td><td>
                        <input name="gvSPActivities$ctl02$gvCost$ctl02$txtOthercost" type="text" id="gvSPActivities_gvCost_0_txtOthercost_0" class="numeric" style="width:100px;" />
                        </td>
                </tr>
            </table>
        </div>
                </div>
            </td>
    </tr>
</table> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:22:10.277

```
var total = 0;

$("input[id^='gvSPActivities']", "#gvSPActivities").each(function() {
    total = total+this.value;
});

$(someInputElement).val(total); 
```

# jsf-2 - JSF2 ui：包括传递可变数量的输入参数

> ID：10520055
> 
> 赞同：3
> 
> 时间：2012-05-09T16:17:20.137
> 
> 标签：jsf-2

我们有一个共同的组件，其中按钮或复选框的数量以及标签也各不相同。我可以有一个通用的包含文件并传递可以变化的参数吗？在包含文件中，有没有办法找到有多少输入参数，并基于该渲染多少按钮或复选框..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:36:29.230

您可以使用`<ui:param>`将参数传递给包含文件。

```
<ui:include src="/WEB-INF/includes/some.xhtml">
    <ui:param name="number" value="3" />
</ui:include> 
```

参数值在上述特定示例中可用，如`#{number}`.`some.xhtml`

另一种方法是将包含文件注册为文件中的标记`.taglib.xml`文件：

```
<tag>
    <tag-name>some</tag-name>
    <source>/WEB-INF/tags/some.xhtml</source>
</tag> 
```

然后您可以将参数指定为标记文件属性：

```
<my:some number="3" /> 
```

这种方式也可以作为`#{number}`inside `some.xhtml`。

# sql - Magento 升级 1.7 导致以下错误

> ID：10520057
> 
> 赞同：0
> 
> 时间：2012-05-09T16:17:24.957
> 
> 标签：sql, magento, upgrade

管理面板工作正常，但在前端我收到以下错误。

SQLSTATE [23000]：违反完整性约束：1052 列“位置”在 order 子句中不明确

知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:21:46.390

这是我想出的解决方案，非常感谢 Vern Burton。

1.  在 phpmyadmin 中找到与 catalog_eav_attribute 相关的表 eav_attribute。
2.  在表 eav_attribute 中定位列位置并将其删除。
3.  清除所有缓存并重新索引所有数据，访问首页并得到一个新错误：SQLSTATE[42S22]: Column not found: 1054 Unknown column 'main_table.include_in_menu' in 'where Clause'</p>

4.  找到并打开文件 app/code/core/Mage/Catalog/Model/Resource/Category/Flat.php

5.  注释掉以下行：在我的情况下为 267 ----

    ```
     ->where('main_table.is_active = ?', '1')
       // ->where('main_table.include_in_menu = ?', '1') 
        ->order('main_table.position'); 
    ```

我不太确定这种方法解决这个问题有多美观，但现在肯定对我有用，如果有人有更好的方法来解决这个问题，如果你能发布你的解决方案，我将不胜感激。

希望这会帮助别人，干杯。

```
Next exception 'Zend_Db_Statement_Exception' with message 'SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'position' in order clause is ambiguous' in /chroot/home/user/my_domain.com/magento_root/lib/Zend/Db/Statement/Pdo.php:234 
```

堆栈跟踪：
0 /chroot/home/user/my_domain.com/magento_root/lib/Varien/Db/Statement/Pdo/Mysql.php(110)：Zend_Db_Statement_Pdo->_execute(Array)
1 /chroot/home/user/my_domain .com/magento_root/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
2 /chroot/home/user/my_domain.com/magento_root/lib/Zend/Db/Adapter/Abstract.php (479): Zend_Db_Statement->execute(Array)
3 /chroot/home/user/my_domain.com/magento_root/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `main_ta...', Array) <br>4 /chroot/home/user/my_domain.com/magento_root/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT`main_ta ...'，数组）
5 /chroot/home/user/my_domain.com/magento_root/lib/Zend/Db/Adapter/Abstract.php（734）：Varien_Db_Adapter_Pdo_Mysql->query（'SELECT `main_ta...', Array) <br>6 /chroot/home/user/my_domain.com/magento_root/lib/Varien/Data/Collection/Db.php(734): Zend_Db_Adapter_Abstract->fetchAll('SELECT`main_ta...'，数组)
7 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(521): Varien_Data_Collection_Db->_fetchAll('SELECT `main_ta.. .'，数组）
8 /chroot/home/user/my_domain.com/magento_root/lib/Varien/Data/Collection/Db.php(566)：Mage_Core_Model_Resource_Db_Collection_Abstract->getData()
9 /chroot/home/user/my_domain。 com/magento_root/app/code/core/Mage/Catalog/Model/Layer.php(232): Varien_Data_Collection_Db->load()
10 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage /Catalog/Block/Layer/View.php(163)：Mage_Catalog_Model_Layer->getFilterableAttributes()
11 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Catalog/Block/Layer/View。 php(122): Mage_Catalog_Block_Layer_View->_getFilterableAttributes()
12 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Core/Block/Abstract.php(238)：Mage_Catalog_Block_Layer_View->_prepareLayout()
13 /chroot/home/user/my_domain.com /magento_root/app/code/local/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
14 /chroot/home/user/my_domain.com/magento_root/app/code/ local/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('catalog/layer_v...', 'catalog.leftnav')
15 /chroot/home/user/my_domain.com/magento_root/app /code/local/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('catalog/layer_v...', 'catalog.leftnav')
16 /chroot/home/user/my_domain.com/magento_root/app/code/local/Mage/Core/Model/Layout.php（204）：Mage_Core_Model_Layout->_generateBlock（对象（Mage_Core_Model_Layout_Element），对象（Mage_Core_Model_Layout_Element））
17 / chroot/home/user/my_domain.com/magento_root/app/code/local/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
18 /chroot/home/user/my_domain .com/magento_root/app/code/core/Mage/Core/Controller/Varien/Action.php(344): Mage_Core_Model_Layout->generateBlocks()
19 /chroot/home/user/my_domain.com/magento_root/app/code/ core/Mage/Catalog/Helper/Product/View.php(73): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
20 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Catalog/Helper/Product/View.php（144）：Mage_Catalog_Helper_Product_View->initProductLayout（对象（Mage_Catalog_Model_Product），对象（Mage_Catalog_ProductController））
21 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Catalog/controllers/ProductController.php（132）：Mage_Catalog_Helper_Product_View->prepareAndRender（28491，对象（Mage_Catalog_ProductController），对象（Varien_Object））
22 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Catalog_ProductController->viewAction()
23 /chroot/home/user/my_domain .com/magento_root/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view')
24 /chroot/home/user/my_domain.com/magento_root/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
25 /chroot/home /user/my_domain.com/magento_root/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
26 /chroot/home/user/my_domain.com/magento_root/app/ Mage.php(683): Mage_Core_Model_App->run(Array)
27 /chroot/home/user/my_domain.com/magento_root/index.php(87): Mage::run('', 'store')
28 {main }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:15:35.177

您是否尝试过重建索引？我有一个类似的问题，并解决了它。

# c++ - 使用 std::string::size_type 而不是 size_t 有什么好处吗？

> ID：10520058
> 
> 赞同：3
> 
> 时间：2012-05-09T16:17:26.333
> 
> 标签：c++, stl, size-type

我正在查看另一个开发人员的代码，其中包含以下内容：

```
std::string name;
...
std::string::size_type colon = name.find(":"); 
```

我认为 using`size_t`会更容易理解并且同样安全，因为 STL 标准规定了`std::string`is`std::basic_string<char, std::allocator>`和`std::allocator::size_type`is `size_t`。

他希望确保 STL 标准永远不会改变以使这个假设无效。如果标准可以改变，那么`size_type`将比`size_t`.

那会发生吗？有没有其他理由使用`size_type`而不是`size_t`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T16:22:49.883

`size_type`应该在以容器类型为模板的代码中使用。当您一直在操作的代码时`std::string`，您可以使用`size_t`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T16:23:22.130

我认为最好的方法是使用`auto`，这样你就可以自动符合函数返回的任何内容：

```
auto colon = name.find(":"); 
```

它避免了您所描述的问题，而且要短得多。

正如 larsmans 在评论中提到的那样，您可能希望将字符串索引存储在 a`struct`或其他任何内容中，而没有可用于从中获取返回类型的变量。这也是可行的：

```
struct StoreStringIndex {
    decltype(declval<std::string>().length()) length;
}; 
```

`std::string::size_type`但比虽然更复杂且不短。因此，对于存储内容，您可能希望使用类型`size_type`，但对于局部变量和内容，请使用`auto`.

# sharepoint-2010 - 如何在 caml sharepoint 2010 中使用加入两个以上列表

> ID：10520066
> 
> 赞同：0
> 
> 时间：2012-05-09T16:18:19.660
> 
> 标签：sharepoint-2010

我有三个共享点列表区域，国家/地区。地区是国家的外国名单，国家是国家的外国名单。

那么我如何使用caml表达式获得某些区域的状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:21:55.980

这可以在 CAML 中完成，前提是您使用 Sharepoint 2010 &

> *创建列表连接时需要牢记一些要求。无论类型如何，您都不能只加入任何两个列表。如果可以连接两个列表，则不仅仅是任何主字段和外部字段都可以用作“加入”字段对。主列表中的字段必须是查找类型字段，并且必须查找外部列表中的字段。出于这个原因，所有连接都反映了列表之间现有的查找关系。*

有关更多信息，请参阅以下文档链接：

## [关于 Sharepoint 2010 JOIN in CAML 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ee539975%28office.14%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:16:30.660

您无法以 CAML 方式执行此操作，而是可以尝试以不同的方式以树方式执行此操作：

1.- Linq 到 SharePoint [http://msdn.microsoft.com/en-us/library/ee538250.aspx](http://msdn.microsoft.com/en-us/library/ee538250.aspx)

2.- 使用 SPSiteDataQuery [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsitedataquery.lists.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsitedataquery.lists.aspx)

3.- 做树 CAML 查询，每个数据源一个，将每个数据源添加到不同的列表，用 Linq 加入这些列表或用你的编码做一些神奇的事情。

使用 Caml Builder 或 Stramit Caml Query，这些工具对您非常有用。

此致！

# php - PHP和Xpath，基于曾孙过滤结果

> ID：10520068
> 
> 赞同：0
> 
> 时间：2012-05-09T16:18:21.017
> 
> 标签：php, xml, xpath

考虑以下 test.xml

```
<root>
    <parent>
        <ID>1</ID>
        <child1>Value1</child1>
        <child2>value11</child2>
        <child3>
             <grandchild>
                  <greatgrandchild>value1111</greatgrandchild>
             </grandchild>
        </child3>
    </parent>
    <parent>
        <ID>2</ID>
        <child1>value2</child1>
         <child3>
             <grandchild>
                  <greatgrandchild>value2222</greatgrandchild>
             </grandchild>
        </child3>
    </parent>
    <parent>
        <ID>3</ID>
        <child1>value3</child1>
        <child2>value33</child2>
        <child3>
             <grandchild>
                  <greatgrandchild>value3333</greatgrandchild>
             </grandchild>
        </child3>
    </parent>
    <parent>
        <ID>4</ID>
        <child1>value4</child1>
        <child2>value44</child2>
        <child3>
             <grandchild>
                  <greatgrandchild>value4444</greatgrandchild>
             </grandchild>
        </child3>
        </parent>
</root> 
```

当我对 xpath '/root/parent' 使用以下内容时，我可以轻松获取 ID、child1 和 child2 的值。

但是我不明白孙子的曾孙的价值观。

我能做些什么来获得这些值。

```
$query = '/root/parent'
$xQuery = $xml->xpath($query);
foreach($xQuery as $results){
    echo $results->ID;
    echo $results->child1;
    echo $results->child2;
    echo $results->greatgrandchild;
} 
```

我想根据曾孙的值过滤结果。我可以成功过滤ID和child1和child2的结果。根据曾孙的价值，我想成为父母及其所有的子女、孙子女和曾孙子女。

这可能使用xpath吗？

我已经编辑了问题的措辞并使用了正确的 test.xml，因为我第一次遇到了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:37:03.550

您的代码中有两个问题，

*   `grandchild`节点不明确且格式错误。的结束标签`grandchild2`是`grandchild`错误的。

    ```
    This is wrong------------+
                             |  
                             v
    <grandchild2>value3333</grandchild> 
    ```

*   `$results->grandchild`不存在，而是使用`$results->child3->grandchild`. 这里 Xpath 返回`parent`node 下的所有`root`节点为`SimpleXMLElement`

查找所有`parent`元素`child1=value3`并`grandchild1=value333`使用此查询。

```
/root/parent[child1 = "value3" and child3/grandchild = "value333"] 
```

# iphone - 如何从现有的应用程序安装/捆绑中删除旧的构建文件？

> ID：10520077
> 
> 赞同：0
> 
> 时间：2012-05-09T16:18:41.257
> 
> 标签：iphone, objective-c, ios, xcode, build

我最近在我的**编译源**构建阶段发现了一个问题，它将 MyDB.xcdatamodeld*和*MyDB.xcdatamodel 编译到构建中（可能是 Xcode 版本之间的一些迁移或其他东西留下的）。直到我最近开始使用使用以下库的库之前，这不是问题：

```
[NSManagedObjectModel mergedModelFromBundles:nil] 
```

哪个会找到两个 MyDB 文件并抛出一个错误，它无法合并重复的实体，类似于这个问题[Core Data: Error, "Can't Merge Models With Two different Entities Named 'foo'"](https://stackoverflow.com/q/3205783/155513)。但他们的解决方案的问题是它涉及删除应用程序:)

我在构建阶段解决了这个问题（我删除了 MyDB.xcdatamodel 行），如果我重新安装应用程序它工作正常，但如果我在现有安装（即更新）上安装应用程序，那么我仍然得到关于重复实体的相同数据库错误。我想这是因为 MyDB.xcdatamodel 文件仍在用户包中。

***所以我的问题是：***如何从现有安装包中删除此文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:45:01.473

我相信只有在开发过程中通过 Xcode 安装应用程序时才会留下旧文件。尝试测试通过临时分发完成的升级，您应该不会看到这个问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-09T16:40:48.790

清理所有目标并删除模拟器/设备上的应用程序？:)

# xml - 将 XSD 架构内联到 XML 文档中

> ID：10520082
> 
> 赞同：3
> 
> 时间：2012-05-09T16:18:48.247
> 
> 标签：xml, xsd

我想知道是否有办法将 xsd 模式直接定义到 xml 文档中。我在 MSXML 上看到类似这样的文字

```
<?xml version="1.0"?>
<catalog xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
         xmlns:x="urn:book"> 
<!-- START OF SCHEMA -->
<xsd:schema targetNamespace="urn:book">
 <xsd:element name="book">
  <xsd:complexType>
    <xsd:sequence>
      <xsd:element name="author" type="xsd:string"/>
      <xsd:element name="title" type="xsd:string"/>
      <xsd:element name="genre" type="xsd:string"/>
      <xsd:element name="price" type="xsd:float"/>
      <xsd:element name="publish_date" type="xsd:date"/>
      <xsd:element name="description" type="xsd:string"/>
    </xsd:sequence>
    <xsd:attribute name="id" type="xsd:string"/>
  </xsd:complexType>
 </xsd:element>
</xsd:schema>
<!-- END OF SCHEMA -->
   <x:book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications with
      XML.</description>
   </x:book>
</catalog> 
```

在标准 XML 中有类似的东西吗？

只是为了向您介绍上下文，我有一个代码可以动态地创建一个 XML 和他的 XSD，并通过一个流发送 XML。所以我的目标是同时为 XML 提供他的模式。

有任何想法吗 ？可能吗 ？或者在通过我的流发送我的 XML 之前，架构必须是 Web 可访问的？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:20:55.523

[这是一个可能的解决方案](http://www.herongyang.com/XML/XSD-Statements-Embedded-in-XML-File.html)，您需要确保您的 XML 解析器可以正常处理它。

# android - Eclipse 如何将小部件添加到现有的 Android 项目

> ID：10520090
> 
> 赞同：1
> 
> 时间：2012-05-09T16:19:35.533
> 
> 标签：android, eclipse, widget

我有一个几乎完成的项目。我想做的一件事是向项目中添加一个小部件。我看到很多关于创建小部件的教程，但我没有看到如何将小部件添加到现有项目中。他们都从“创建一个新项目并将其命名为 MyFirstWidget”开始。底线是我希望能够下载一个包并包含主应用程序和小部件。我在 Eclipse 中要做什么才能开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:46:12.807

android.com 上的[App Widgets 开发者页面](http://developer.android.com/guide/topics/appwidgets/index.html)似乎很好地解释了如何实现一个小部件，而且它并不特定于创建一个新项目。

# asp.net - 如何在asp.net中合并两个项目？

> ID：10520091
> 
> 赞同：0
> 
> 时间：2012-05-09T16:19:42.593
> 
> 标签：asp.net, visual-studio, web-config

我有两个不同的网站，我想访问第二个网站的主页作为第一个网站中的链接。但是我在Visual Studio（2008）中合并它们时遇到了问题。以及如何处理两个**web.config**文件。我还尝试在第一个项目中复制第二个项目的所有文件，但没有成功。合并两个网站的可能方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:31:57.597

将两个网站放在单个 VisualStudio 解决方案中的单独 VisualStudio 项目中，或者您可以将第二个网站放在第一个项目中的文件夹中并执行以下操作：

```
HttpContext.Response.Redirect("~/ProjectB/PageInProjectB.aspx");

<asp:HyperLink ID="lnkLink" runat="server"
NavigateUrl="~/ProjectB/PageInProjectB.aspx"> Link </asp:HyperLink> 
```

其中 ProjectB 是第一个项目中的新文件夹。

请参阅[Response.Redirect 从一个 Web 项目到 Visual Studio 中的另一个](https://stackoverflow.com/questions/5669159/response-redirect-from-one-web-project-to-another-in-visual-studio)

一个项目中只能有一个 web.config。您*可以*拥有更多，但这些通常用于不同的发布环境，例如开发和实时部署。（dev 用于测试东西，live 是人们使用的实际站点）

[http://msdn.microsoft.com/en-us/library/9d9ats98.aspx](http://msdn.microsoft.com/en-us/library/9d9ats98.aspx)

[http://msdn.microsoft.com/en-us/library/zk4ahe0t(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/zk4ahe0t(v=vs.90).aspx)

编辑：我还建议您[查看 http://www.asp.net/web-forms/tutorials](http://www.asp.net/web-forms/tutorials)以更熟悉 Visual Studio 和 ASP.NET Web 窗体。

# php - 新 PHP 上的旧版 Wordpress。错误报告

> ID：10520097
> 
> 赞同：0
> 
> 时间：2012-05-09T16:19:54.393
> 
> 标签：php, wordpress, error-handling

我在一个旧网站上工作，它是旧版本的 Wordpress。我到处都是不推荐使用的错误:(

我放了

```
error_reporting(E_ALL & ~E_NOTICE & ~E_DEPRECATED); 
```

在原始代码设置报告的位置下，以便覆盖它，但我仍然遇到错误。即使从下面我输入上述代码的同一个文档中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:26:55.220

@maiorano84 根据托管公司的不同，并不总是可以简单地升级 Wordpress - 因为有些仍在运行 MySQL 4 或更低版本。而 Wordpress 3.2 以上版本需要 MySQL 5。

至于原始问题，请尝试将 display_errors 也设置为关闭。

```
 display_errors = Off 
```

# ios - 部署 iPad App - Enterprise 或 Developer License

> ID：10520098
> 
> 赞同：0
> 
> 时间：2012-05-09T16:19:58.233
> 
> 标签：ios, ipad, deployment

如果有人问过这个问题，我很抱歉。我看过但找不到问题/答案。

我在一家网络机构工作，现在正在开发用于在 iPad 上部署的 IOS 应用程序。然而，我们拥有 Apple 的**开发者许可证**，阅读它建议应用程序需要通过 App Store 的宣传。由于应用程序（医疗）的性质，它们不能在 App Store 上。这个使用“Ad Hoc”选项的**开发人员许可证**是否足以使用链接将应用程序部署到客户（不在我们公司），还是我需要使用**企业许可证**？

企业许可证确实说：

> **您计划仅在您的公司或组织内分发您的 iOS 应用程序**
> 
> 企业计划面向希望在其公司或组织内开发和分发 iOS 应用程序的开发人员。

任何建议将不胜感激。对不起，这是一个随机/小问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:27:57.313

临时分发限制为 99 台设备，企业限制为 2k 或 5k，不确定。如果您想真正分发您的应用程序，但限制其使用，那么您必须在您的应用程序中构建一个授权机制（例如[http://www.doccheck.com](http://www.doccheck.com)用于医生）。您可以使用这样的现有服务，也可以实现自己的服务。顺便说一句，企业分发需要在您的公司中注册设备。在那种情况下，我不会作为客户这样做，也许这也是你的问题。

# phantomjs - 无法让 PhantomJS 使用一个简单的示例

> ID：10520100
> 
> 赞同：1
> 
> 时间：2012-05-09T16:20:01.180
> 
> 标签：phantomjs

我已经下载了可执行文件并创建了一个指向 /usr/local/bin 的 simlink。

我在 Mac OSX 10.7 下

然后，当我尝试运行需要某些模块的脚本时，即

```
var page = require('webpage').create(); 
```

我有一个错误

```
undefined:0 ReferenceError: Can't find variable: require 
```

好像'require'不被视为保留字，而是被解释为变量符号。

（顺便说一句，每当我吃午饭时，我的 Dock 中都会出现一个 Sencha Touch 图标）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:23:05.760

您的 PhantomJS 副本来自旧版本。总是从[http://phantomjs.org](http://phantomjs.org)获得最新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T03:31:09.397

我也有这个问题，问题是我的 mocha 版本——回到 1.9.0 修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:23:45.003

SenchaTouch 2.0 根据操作系统在某处安装 PhantomJS 1.1。在 *NIX 下检查 'which phantomjs' 的位置。

只需相应地修改您的 bash 或任何配置文件，以从您的 PATH 中删除 SenshaTouch 包含的 Phantomjs。

# javascript - 是否可以在 d3 中转换树形图上的节点的删除？

> ID：10520103
> 
> 赞同：3
> 
> 时间：2012-05-09T16:20:16.880
> 
> 标签：javascript, scale, d3.js, transitions, treemap

我正在尝试动画删除树节点。当我在不同的树形图之间移动时，我似乎无法让过渡正常工作。我目前有这样的代码

```
cell.exit()
  .transition()
    .duration(500)
    .call(animateCellRemove)
  .remove();

function animateCellRemove(selection) {
  selection
    .attr('scale', function(d) {
      return "scale(" + d.dx/2 + "," + d.dy/2 +")";
    });
} 
```

可能吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:58:58.977

你的意思是`selection.attr("transform", …)`？

# drupal - Drupal 模块中的@符号

> ID：10520105
> 
> 赞同：1
> 
> 时间：2012-05-09T16:20:24.160
> 
> 标签：drupal, drupal-modules

我正在尝试学习 Drupal 模块。谁能告诉我'@'符号是什么？我不记得在 PHP 中遇到过它。（据我所知，搜索它很棘手，你不能用谷歌搜索符号）。我可以将它转换成一个普通的 PHP 变量，修改它，最后把它放回 .module 文件的 PHP 中的 @ 东西吗？

更新：例如：

```
 $error['msg'] = t("We're sorry. We have now only @qty of the .... 
```

在文件中... [http://drupal.org/project/uc_out_of_stock](http://drupal.org/project/uc_out_of_stock)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:03:43.597

虽然一般 PHP 就是这种情况，但它在 Drupal 中的[t()](http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/t/7)函数中的使用方式有所不同。

您可以在文本中正确使用占位符（应将其包含在 t() 中，以便在 i18n 功能上进行翻译），方法是放置 @ , ! 或 % 在前面。

！= 按原样插入

@ = 通过 check_plain 运行文本

% = html 转义文本

[API 页面上的更多信息](http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/t/7#comment-25348)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:23:25.653

在 PHP 中，@ 符号抑制错误消息。

手册中有很多关于它的内容。如果有疑问，那就是去的地方。

[http://us3.php.net/manual/en/language.operators.errorcontrol.php](http://us3.php.net/manual/en/language.operators.errorcontrol.php)

# c++ - OpenCV Mat 数据结构

> ID：10520106
> 
> 赞同：2
> 
> 时间：2012-05-09T16:20:26.523
> 
> 标签：c++, opencv

我正在使用 C++ 开发 OpenCv。我想通过 OpenCV Mat 数据结构声明浮点矩阵。有人可以解释我应该使用哪个头文件以及如何用一些值声明浮点垫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:29:57.720

简单地：

```
#include <opencv2/opencv.hpp>
Mat_<float> mat (height, width); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:27:22.470

~~请参阅[文档](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#mat)~~。（死链接）有定义矩阵和使用它们的例子。

如果你包括`cv.h`你应该很好。

# cassandra - 如何删除 Cassandra 列族中的所有数据？

> ID：10520110
> 
> 赞同：55
> 
> 时间：2012-05-09T16:20:45.213
> 
> 标签：cassandra

我正在寻找一种方法来删除 cassandra 中给定列族中的所有行。

这相当于`TRUNCATE TABLE`在 SQL 中。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-09T17:17:33.687

您可以使用`truncate`thrift 调用或`TRUNCATE <table>`CQL 中的命令。

[http://www.datastax.com/docs/1.0/references/cql/TRUNCATE](https://wayback.archive.org/web/20150215104632/http://www.datastax.com:80/docs/1.0/references/cql/TRUNCATE)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-18T03:34:10.273

您也可以通过 Cassandra CQL 执行此操作。

```
$ cqlsh
Connected to Test Cluster at localhost:9160.
[cqlsh 4.1.1 | Cassandra 2.0.6 | CQL spec 3.1.1 | Thrift protocol 19.39.0]
Use HELP for help.
cqlsh> TRUNCATE my_keyspace.my_column_family; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T06:37:26.727

它在 Astyanax 中非常简单。只是一个单行语句

```
/* keyspace variable is Keyspace Type */
keyspace.truncateColumnFamily(ColumnFamilyName); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-04T14:37:30.577

如果您使用的是 Hector，它也很容易：

```
cluster.truncate("our keyspace name here", "your column family name here"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-19T10:40:41.810

如果您使用的是 cqlsh，那么您可以通过 2 种方式进行操作

1.  `use keyspace`; 接着`truncate column_family;`
2.  `truncate keyspace.column_family;`

如果您想使用 DataStax Java 驱动程序，可以查看 - [http://www.datastax.com/drivers/java/1.0/com/datastax/driver/core/querybuilder/QueryBuilder.html](http://www.datastax.com/drivers/java/1.0/com/datastax/driver/core/querybuilder/QueryBuilder.html) 或 [http://www。 datastax.com/drivers/java/2.0/com/datastax/driver/core/querybuilder/Truncate.html](http://www.datastax.com/drivers/java/2.0/com/datastax/driver/core/querybuilder/Truncate.html)

取决于你的版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-21T16:54:53.267

如果您正在处理集群设置，则只能在集群的所有节点都 UP 时使用 truncate。

通过使用截断，我们会丢失数据（我们不确定数据的重要性）

所以非常安全的方法以及删除数据的技巧是使用 COPY 命令，

1) 使用复制 cassandra cmd 备份数据
`copy tablename to 'path'`

2) 使用 linux cp cmd cp 'src path' 'dst path'复制文件

3) 编辑 dst 路径中的重复文件，删除除第一行之外的所有行。
保存文件。

4）使用复制cassandra cmd 导入
`copy tablename from 'dst path'`

# google-website-optimizer - 在开发和测试环境（但不是生产环境）中禁用 Google 网站优化器

> ID：10520113
> 
> 赞同：1
> 
> 时间：2012-05-09T16:20:56.390
> 
> 标签：google-website-optimizer

目前，如果我在我的开发或测试环境中运行 GWO 测试，那么我不能很好地访问我想要的所有内容（因为控制脚本可能会将我重定向到我想要查看的页面之外）。

当然，我可以删除 cookie 并再次尝试抽奖，但除了扭曲我的测试数据之外，这很麻烦。有没有一种*方便*的方法可以在不禁用 javascript 的情况下禁用 GWO 跟踪和控制？也许我可以作为 GET 数据传入的标志？

（我知道我可以更改后端以查找所述标志和输出，或者根据需要省略 GWO 代码，但这会给应用程序增加一个不需要的要求，其他开发人员不一定要实现。）

# css - 在 ul 列表中使用精灵图像？

> ID：10520115
> 
> 赞同：0
> 
> 时间：2012-05-09T16:20:58.840
> 
> 标签：css, background, html-lists, sprite

我试图更改我的 ul li 列表以将其与背景图像和精灵一起使用，但我在背景重复时遇到了这个问题，我错过了什么？

[http://jsfiddle.net/R7MU4/](http://jsfiddle.net/R7MU4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:37:37.653

由于您的精灵是垂直平铺的，因此您需要使用一个高度等于每个精灵图像高度的元素。

一种选择是使用另一个元素，例如跨度，并将背景应用于该元素。 [http://jsfiddle.net/mestekweb/R7MU4/2/](http://jsfiddle.net/mestekweb/R7MU4/2/)

您还可以将样式应用于链接元素。 [http://jsfiddle.net/mestekweb/R7MU4/3/](http://jsfiddle.net/mestekweb/R7MU4/3/)

在这两种情况下，您都必须调整列表和/或链接的边距和填充以进行补偿。

# javascript - Dynamic picture depends on attribute

> ID：10520119
> 
> 赞同：1
> 
> 时间：2012-05-09T16:21:06.810
> 
> 标签：javascript, html, css

My target is to have a list of file names, and near every item a picture of that file extension will appear next to it.

there is a nice way to do that:

```
p[icon^=".gif"]
{
background: url(images/gif.png) no-repeat center left)
} 
```

this checks if the icon attribute of the 'p' element ends with .gif. if it does, it applies the given style to that element.

but instead of define every file type, i want it to be generic since i have a folder with icons in this format: {file-extansion}.png

in case there is no matching file with the given extansion or there is no file extansion, there will be a default path of "default.png".

There is an option to do that or part of that? if no, what way you advise me doing that?

By the way I am not a css/javascript expert so please given enough details so I can understand your answers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:26:24.990

You can use [jQuery library](http://jquery.com/) for this:

**HTML**

```
<p data-ext=".gif">Text</p>
<p data-ext=".png">Text</p>
<p data-ext=".jpg">Text</p> 
```

**CSS**

```
p {
    background-repeat: no-repeat;
    background-position: 0 50%;
} 
```

**JavaScript**

```
$("p[data-ext]").each(function() {
    var ext = $(this).data("ext").substring(1);
    $(this).css("background-image", "url(images/" + ext + ".png)");
}); 
```

It works so that you add [`data-ext` attribute](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes) to each `p` (or whatever) tag. jQuery selects all `p` tags which have `data-ext` attribute, then gets attribute value, and changes `background-image` of each element.

**DEMO:** [http://jsfiddle.net/AEsx4/](http://jsfiddle.net/AEsx4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:48:22.500

Using pure CSS, you can't dynamically reference attributes in the URL, but you can make them content. Here are some lame workarounds using pure CSS and finally a wishful thinking approach :(

## Use a class

```
<div class="jpg">
</div>

/* css */
.jpg {
   background: url("/img/jpg.jpg");
} 
```

This works great, but you need one class per extension.

## Use an attribute selector

```
<div data-ext="jpg"></div>

div[data-ext=jpg] {
   background: url(/img/jpg.jpg);
} 
```

For more on this approach see: [http://css-tricks.com/attribute-selectors/](http://css-tricks.com/attribute-selectors/)

I used `data-ext`, because in HTML you're not really supposed to add random tags, so the HTML creators gave us `data-*` which is valid HTML5 and we can do whatever want with it. Either way, you need to create a new CSS selector for every extension. Not good.

## Closest you can get with pure css

```
<div data-ext="jpg"></div>

div:after {
   content: attr(data-ext);
} 
```

You will see the name of the extension next to the div. This almost works, but it's not quite good enough.

More about CSS Functions: [http://www.suburban-glory.com/blog?page=130](http://www.suburban-glory.com/blog?page=130)

## What you actually want

```
<div data-ext="jpg"></div>

div:after {
   content: url("/img/jpg." attr(data-ext));
} 
```

Sadly this doesn't appear to work at the moment, but boy would it be awesome.

# linux - ls 命令的前两个结果

> ID：10520120
> 
> 赞同：67
> 
> 时间：2012-05-09T16:21:08.457
> 
> 标签：linux, search, limit, ls

我`ls -l -t`用来获取按时间排序的目录中的文件列表。

我想将搜索结果限制为列表中的前 2 个文件。
这可能吗？
我已经尝试过 grep 并且我很挣扎。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-05-09T16:26:22.087

您可以将其通过管道传输到`head`：

```
ls -l -t | head -3 
```

将为您提供前 3 行（2 个文件和总数）。

这只会给你前两行文件，跳过大小行：

```
ls -l -t | tail -n +2 | head -2 
```

`tail`剥离第一行，然后`head`输出接下来的 2 行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-09T16:32:58.730

为避免处理顶部输出行，您可以反转排序并获取最后两行

```
ls -ltr | tail -2 
```

这是相当安全的，但取决于您在找到这两个文件条目后将如何处理它们，您应该阅读[Parsing ls](http://mywiki.wooledge.org/ParsingLs)关于使用`ls`获取文件和文件信息的问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-30T12:55:23.667

或者你可以试试这个

```
ls -1 -t | head -2 
```

-1 开关跳过标题行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T16:24:26.813

您可以使用该`head`命令仅获取前两行输出：

```
ls -l -t | head -2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T16:25:22.993

你必须通过头部管道。

> ls -l -t | 头-n 3

将输出前两个结果。

# android - 在 HTC One X 上，屏幕关闭时光线传感器无法工作

> ID：10520123
> 
> 赞同：1
> 
> 时间：2012-05-09T16:21:23.940
> 
> 标签：android, sensors

我有一个监听光传感器变化并读取其值的代码：

```
SensorManager sensorManager  = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
mLightSensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

//light sensor listener
private SensorEventListener lightSensorEventListener = new SensorEventListener(){

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
            //my reading code
    } 
```

这个简单的代码段在 Nexus S、Nexus One 和 Galaxy Nexus 上运行良好，无论屏幕是打开还是关闭。

但是在 HTC One X 上运行时，我发现它在关闭屏幕的情况下无法运行。即屏幕关闭时传感器似乎未触发。但是当屏幕打开时，它可以正常工作并给出正确的读数。

想知道这是否是硬件问题，所以我无能为力。还是只是设定问题？我已经在设置中打开了自动亮度，但它没有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:33:36.837

传感器不需要在屏幕关闭的情况下工作。由于光传感器通常用于调整屏幕亮度，因此设备制造商在屏幕关闭的情况下不启用它可能是合理的。

也就是说，尝试抓住部分唤醒锁定，这是让传感器在屏幕关闭的情况下工作的方式（至少对于加速度计）：

```
 PowerManager pm = (PowerManager) getSystemService(POWER_SERVICE);
    PowerManager.WakeLock lock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Light sensor");
    wl.acquire(); 
```

确保您获得唤醒锁定权限：

并确保在完成后释放唤醒锁。

# tridion - Tridion 2011 GUI 扩展，如何包含 css 文件？

> ID：10520127
> 
> 赞同：3
> 
> 时间：2012-05-09T16:21:35.533
> 
> 标签：tridion

我一直在构建一个仅 JavaScript 和 CSS 的 GUI 扩展。

我在这里按照阿尔伯特帖子中的说明进行操作：http: [//albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript-without-showing-a-gui-element/](http://albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript-without-showing-a-gui-element/)

JavaScript 加载正常，但我无法包含 CSS，我错过了什么吗？

这是我的配置文件的近似值：

```
<?xml version="1.0" ?> 
<Configuration xmlns="http://www.sdltridion.com/2009/GUI/Configuration/Merge"
      xmlns:cfg="http://www.sdltridion.com/2009/GUI/Configuration"
      xmlns:ext="http://www.sdltridion.com/2009/GUI/extensions"
      xmlns:cmenu="http://www.sdltridion.com/2009/GUI/extensions/ContextMenu">
  <resources cache="true">
    <cfg:filters/>
    <cfg:groups>
      <cfg:group name="Rob.Prototype.Extensions"
       merger="Tridion.Web.UI.Core.Configuration.Resources.CommandGroupProcessor" 
       merge="always">
        <cfg:domainmodel name="Rob.Prototype.Extensions.Domain">
          <cfg:fileset>
            <cfg:file type="script">/Scripts/script1.js</cfg:file>
            <cfg:file type="script">/Scripts/script2.js</cfg:file>
            <cfg:file type="style">/CSS/styles.css</cfg:file>
          </cfg:fileset>
          <cfg:services/>
        </cfg:domainmodel>
      </cfg:group>
    </cfg:groups>
  </resources>
  <definitionfiles/>
  <extensions>
    <ext:editorextensions/>
    <ext:dataextenders/>
  </extensions>
  <commands/>
  <contextmenus/>
  <localization/>
  <settings>
    <defaultpage>/Views/Default.aspx</defaultpage>
    <navigatorurl>/Views/Default.aspx</navigatorurl>
    <editurls/>
    <listdefinitions/>
    <itemicons/>
    <theme>
      <path>/CSS/</path>
    </theme>
    <customconfiguration/>
  </settings>
</Configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:45:47.743

域模型应该只包含非可视的东西，所以 Tridion 只处理非可视的文件类型。您不应该在 a 中包含 CSS 文件`domainmodel`，而是将它们放在`fileset`任何`domainmodel`.

这要求您有一个使用您的 CSS 所在组的 GUI 元素。如果您不打算添加任何 GUI 元素，您可以添加一个虚拟功能区按钮以链接到 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:32:07.137

这可能会帮助你

[Tridion GUI Extensions CommandSet 如何映射到 js 方法？](https://stackoverflow.com/questions/9393851/how-does-the-tridion-gui-extensions-commandset-map-to-js-methods)

这同样适用于 CSS 和 JS。

如果这不起作用，您是否尝试过增加 System.config 中存储在 C:\Program Files (x86)\Tridion\web\WebUI\WebRoot\Configuration 中的修改属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T16:38:18.853

我没有答案 Rob，但[@poeticGeek](https://twitter.com/poeticGeek)的以下博客文章可能会对您有所帮助。

[通过 8 个步骤设置 Tridion 2011 GUI 扩展](http://yoavniran.wordpress.com/2011/03/03/setting-up-a-tridion-gui-2011-extension-in-8-steps/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T17:12:09.743

这是我将“注入”javascript 到发布对话框视图中的扩展的配置，也许值得试一试，看看它是否还包含任何 css：

```
<?xml version="1.0"?>
<Configuration xmlns="http://www.sdltridion.com/2009/GUI/Configuration/Merge" xmlns:cfg="http://www.sdltridion.com/2009/GUI/Configuration" xmlns:ext="http://www.sdltridion.com/2009/GUI/extensions" xmlns:cmenu="http://www.sdltridion.com/2009/GUI/extensions/ContextMenu">
  <resources cache="true">
    <cfg:extensiongroups>
      <cfg:extensiongroup name="Company.Extensions.Group">
        <cfg:extension target="Tridion.Web.UI.Editors.CME.Views.Popups.Publish">
          <cfg:insertafter>Company.Extensions.Resources</cfg:insertafter>
        </cfg:extension>
      </cfg:extensiongroup>
    </cfg:extensiongroups>
    <cfg:groups>
      <cfg:group name="Company.Extensions.Resources">
        <cfg:fileset>
          <cfg:file type="script">/js/SelectRollbackFailure.js</cfg:file>
          <cfg:file type="script">/js/NoPublishItemWarning.js</cfg:file>          
        </cfg:fileset>
      </cfg:group>
    </cfg:groups>
    </resources>
    <definitionfiles/>
  <extensions>
    <ext:dataextenders/>
    <ext:editorextensions />
  </extensions> 
    <commands />
    <contextmenus/>
  <localization></localization>
    <settings>
        <defaultpage />
        <navigatorurl />
        <editurls/>
        <listdefinitions/>
        <itemicons/>
    <theme>
      <path></path>
      <resourcegroup />
    </theme>     
    <resourceextensions>
      <resourceextension>Company.Extensions.Group</resourceextension>
    </resourceextensions>
    <customconfiguration></customconfiguration>
  </settings> 
</Configuration> 
```

您需要更改此部分：

```
<cfg:extension target="Tridion.Web.UI.Editors.CME.Views.Popups.Publish"> 
```

到您希望包含项目的位置。如果不完全正确，或者您需要解释，请告诉我。

ps 我也怀疑一些空节点可以被剥离:)

# c# - 静态属性/集合在 ASP.NET 应用程序中未正确执行

> ID：10520129
> 
> 赞同：0
> 
> 时间：2012-05-09T16:21:40.973
> 
> 标签：c#, asp.net, multi-tenant

我们目前正在开发一个多租户应用程序，该应用程序在处理多租户方面时遇到了一些随机的奇怪行为。

背景：我们有一个供多组最终用户使用的 ASP.NET 应用程序。他们用来访问应用程序的 URL 决定了他们与哪个公司相关联，并最终决定了他们的数据库连接字符串。我们存储将特定公司 ID 映射到主机名的 CompanyHost 映射的静态列表。如果我们在静态列表中找不到匹配项，我们会从数据库中重新提取列表。

当应用程序第一次启动时，它会正确地拉起连接，为主机找到正确的公司 ID。但是，在一段未知的时间之后，应用程序将开始为所有主机头返回一个空 ID，即使它们存在于数据库中，导致应用程序无法确定连接字符串。进入服务器并回收应用程序池可以解决问题。我试图将应用程序池回收时间设置为低（2 小时）以尝试避免它，但它要么不够低，要么不是问题。

这是按主机获取公司 ID 的片段。即使对于有效的主机名，这也会返回一个空 Guid。

```
private static List<CompanyHost> lCompanyHosts = new List<CompanyHost>();

public static string Host
{
    get { return HttpContext.Current.Request.Url.DnsSafeHost; }
}

public static Guid CompanyIDByHost
{
    get
    {
        Guid gCompany_ID = Guid.Empty;

        lock (lCompanyHosts)
        {
            if (lCompanyHosts.Count == 0)
                lCompanyHosts = new CompanyHostDataLogic().RetrieveAll();

            gCompany_ID = lCompanyHosts.Where(ch => ch.hostname.ToLower() == Host.ToLower()).Select(ch => ch.company_id).FirstOrDefault();

            if (gCompany_ID == Guid.Empty)
            {
                lCompanyHosts = new CompanyHostDataLogic().RetrieveAll();
                gCompany_ID = lCompanyHosts.Where(ch => ch.hostname.ToLower() == Host.ToLower()).Select(ch => ch.company_id).FirstOrDefault();
            }
        }

        return gCompany_ID;
    }
} 
```

我很难理解为什么这会在正常工作一段时间后返回有效主机的 Guid Empty。我最好的猜测是它与导致问题的网站上一段时间的不活动有关。但是，我不确定解决此问题的最佳方法。

是否有我遗漏的东西或者是否有更好的方法来实现这种类型的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:05:35.027

这始于评论，但我认为它将受益于代码格式化。这不是一个完整的答案，但使用这种方法可能会得到更好的结果：

`RetrieveAll()`吞咽有问题吗？当一个新的主机名出现时，您将重置整个列表，`lCompanyHosts`但如果失败，您将失去一切。也许最好添加一个方法来`CompanyHostDataLogic`检索单个“CompanyHost”，然后将其添加到您的`List<CompanyHost> lCompanyHosts`

```
 if (lCompanyHosts.Count == 0)
            lCompanyHosts = new CompanyHostDataLogic().RetrieveAll();

        gCompany_ID = lCompanyHosts.Where
                        (ch => ch.hostname.ToLower() == Host.ToLower())
                        .Select(ch => ch.company_id).FirstOrDefault();

        if (gCompany_ID == Guid.Empty)
        {
            CompanyHost newEntry = 
                          new CompanyHostDataLogic().RetrieveOne(string Host);
            if(newEntry!=null)
                lCompanyHosts.Add(newEntry);

            gCompany_ID = lCompanyHosts.Where
                           (ch => ch.hostname.ToLower() == Host.ToLower())
                           .Select(ch => ch.company_id).FirstOrDefault();

        } 
```

* * *

如果您无法进行任何更改，`CompanyHostDataLogic`那么您可以将结果`RetrieveAll()`与现有列表合并。原理是一样的：不要重置现有列表，只需向其中添加任何新的或更新的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:25:05.893

最终的问题和我的解决方案的最终答案是，这个过程是在应用程序池启动时触发的。在存在实际请求之前，因此用作键的主机名为空。

这导致了我们看到的错误的奇怪行为。

After changing the initial load to a static object and then adding the dynamic load in as a lazy load it resolved the issue.

# installshield - InstallShield 2012：神秘错误代码 IISRT：-1204

> ID：10520132
> 
> 赞同：1
> 
> 时间：2012-05-09T16:21:58.543
> 
> 标签：installshield

尝试完成一个我在大约 3 周内没有接触过的安装脚本。上次我尝试安装时安装正常，但现在出现错误。它似乎与 ISIISCosting 有关，但谷歌一直没有帮助。

```
MSI (s) (D0:54) [11:09:53:273]: Doing action: ISIISCosting
Action start 11:09:53: ISIISCosting.
MSI (s) (D0:F8) [11:09:53:341]: Invoking remote custom action. DLL: C:\Windows\Installer  \MSI30AF.tmp, Entrypoint: ISIISCosting
MSI (s) (D0!14) [11:09:53:403]: Note: 1: 2711 2:  
InstallShield 11:09:53: Error with IISRT: -1204
CustomAction ISIISCosting returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)
Action ended 11:09:53: ISIISCosting. Return value 3.
Action ended 11:09:53: INSTALL. Return value 3. 
```

我重新启动了 IIS 服务器，并且我知道它正在工作，因为在此错误之前，我们向 IIS 服务器查询网站列表并将它们显示在面板中。

发现 -1204 = ERROR_IISRT_INVALID_VROOTCOMPNAME

IIS 问题或 InstallShield 问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:43:55.980

这里不涉及任何 InstallScript，只是您如何定义网站和 InstallShield 的内置自定义操作（成本、回滚、安装、提交、卸载类型的东西）通过该数据并将其传递到 IIS。

我的猜测是数据使用了特殊字符或不允许的东西。不看数据很难说。日志说明不够。

# objective-c - 如何在多个文件中使用字符串？

> ID：10520133
> 
> 赞同：1
> 
> 时间：2012-05-09T16:22:02.497
> 
> 标签：objective-c, nsstring

在我看来，controller.mi 有一个这样的字符串

```
 NSString *valueToSave = @"someValue"; 
```

并希望在 Appdelegate.m 中使用 NSUserDefauls 保护文本

```
 [[NSUserDefaults standardUserDefaults]
 setObject:valueToSave forKey:@"preferenceName"]; 
```

如何在另一个文件中使用 NSString？这不起作用：

```
#import "viewcontroller.m"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:37:16.517

在头文件中有`extern NSString *valueToSave;`. 然后在 (1 and only 1) .m 文件中有`NSString *valueToSave = @"someValue";`

* * *

第二种选择是使用#define。只需放入`#define kValueToSave (@"someValue")`一个头文件并在需要的地方使用它。

# javascript - JQuery Mobile changePage 替代方案不使用转换

> ID：10520136
> 
> 赞同：0
> 
> 时间：2012-05-09T16:22:16.453
> 
> 标签：javascript, jquery, zend-framework, mobile, jquery-mobile

我有一个页面，允许用户使用滑动手势来导航页面。我能够让这个工作，但我不能使用本机 jQM 方法 changePage。我不能使用changePage，因为我们为下一页动态生成URL。这是工作脚本：

```
$(function(){
  $('#page_div').live('swiperight', function(event){
location.href='/<?= $this->nextSlideLink ?>';
});
  $('#page_div').live('swipeleft', function(event){
location.href='/<?= $this->prevSlideLink ?>';
  });
}); 
```

现在，问题是我无法让 jQM 转换正常工作，因为我没有使用 changePage。

通常你会做这样的事情，但不是在这种情况下：

```
$('#page_div').live('swiperight', function(event){
$mobile.changePage('<?= $this->prevSlideLink ?>' {transition:'slide'});
 }); 
```

有谁知道我怎样才能让过渡工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:58:16.557

你为什么不使用 changePage ？

如果你真的需要避免 changePage，你可以尝试模拟点击：

```
jQuery('<a href="<?= $this->prevSlideLink ?>"/>')
    .appendTo(jQuery.mobile.activePage)
    .trigger('click')
    .remove(); 
```

# hadoop - 将 Sqoop 数据从 HDFS 移动到 Hive

> ID：10520138
> 
> 赞同：0
> 
> 时间：2012-05-09T16:22:26.000
> 
> 标签：hadoop, hive, hdfs, sqoop

使用 Sqoop 将一堆大型 MySQL 表导入 HDFS 时，我忘记包含 --hive-import 标志。所以现在我已经将这些表放在 HDFS 中，并且想知道是否有一种简单的方法可以将数据加载到 Hive 中（无需自己编写 LOAD DATA 语句）。

我尝试使用 sqoop create-hive-table：

```
./bin/sqoop create-hive-table --connect jdbc:mysql://xxx:3306/dw --username xxx --password xxx --hive-import --table tweets 
```

虽然这确实创建了正确的配置单元表，但它没有将任何数据导入其中。我有一种感觉，我在这里错过了一些简单的东西......

作为记录，我使用 Elastic MapReduce 和 Sqoop 1.4.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:42:53.917

您不能在 hive 中创建一个外部表并将其指向这些文件吗？

```
create external table something(a string, b string) location 'hdfs:///some/path' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T16:08:33.840

您没有在命令中指定“import”。语法是 sqoop 工具名称 [工具参数]

它应该如下所示：

> $ sqoop **import** --create-hive-table --connect jdbc:mysql://xxx:3306/dw --username xxx --password xxx --hive-import --table tweets

# mysql - 从 mysql 提示符执行时，mysql 慢查询 sql 语句没有那么慢

> ID：10520139
> 
> 赞同：1
> 
> 时间：2012-05-09T16:22:31.323
> 
> 标签：mysql, mysql-slow-query-log

我在我的服务器中启用了 mysql 慢查询来记录需要超过 5 秒的查询。当我从 mysql> 运行相同的查询时，报告超过 10 秒的查询用时不到 1 秒。这是为什么？

TIA，-彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:31:02.493

这可能是由于缓存。

数据库将一些数据缓存在内存中，而将大部分数据保留在磁盘上。当通过 sql 查询获取数据时，数据被加载——然后保存在内存中，以防在不久的将来再次被请求。最终，如果该数据不再被请求，它将在缓存中被后来查询进入缓存的新数据覆盖。

在某些系统上，硬盘本身有额外的缓存——从磁盘获取的数据可能会被磁盘控制器保存在缓存中。这是因为最近从磁盘获取的数据很可能会再次被获取。

因此，一旦从查询提示请求数据，它将被缓存——可能由磁盘控制器和数据库本身缓存。

在您的应用程序上，这种情况不太可能发生，因为新用户在不同时间出现并访问他们自己的数据（在他们到达之前不太可能被缓存）。

加速数据库的最常见方法之一是增加服务器可用的内存量，以便可以缓存更多数据。

有关更多信息，请[参阅 MySQL Query Cache 上的 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/query-cache.html)

# javascript - vert.x mySQL Javascript 驱动程序库

> ID：10520140
> 
> 赞同：2
> 
> 时间：2012-05-09T16:22:32.663
> 
> 标签：javascript, mysql, vert.x

我刚刚发现了 vert.x，并对它很感兴趣。当我发现一个新框架时，我做的第一件事就是寻找一个 mySQL 驱动程序。我已经搜遍了，似乎没有任何可用的东西。如何开发这样一个库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:42:25.587

事情就是这样。您不需要 javascript 驱动程序。

由于 vert.x 使用 rhino 将 javascript 编译成 java 类。所以你真正需要的是mysql的原生java驱动，并使用rhino的[java脚本](http://www.mozilla.org/rhino/ScriptingJava.html)特性来访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:25:56.230

问题是当前的 JDBC 驱动程序不支持并发模型和 vert.x 的异步特性。必须为每个 DB 供应商编写一个全新的 JDBC 驱动程序来支持它。不是一件轻而易举的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:38:20.337

vert.x 与您使用的数据源无关。您可以在 Verticle 中实例化并使用标准的 MySQL JDBC 驱动程序。

# xml - JSON.NET - 我可以提示要解析的 XML 类型吗？

> ID：10520144
> 
> 赞同：3
> 
> 时间：2012-05-09T16:22:36.787
> 
> 标签：xml, parsing, types, json.net

当我使用 JsonConvert.SerializeXNode 或 JsonConvert.SerializeXmlNode 解析 XML 时，以下代码

```
XElement person = XElement.Parse(@"
  <person>
    <name>Palle</name>
    <member>true</member>
  </person>");

string json = JsonConvert.SerializeXNode(person); 
```

给我这个 json 结果：

```
{"person":{"name":"Palle","member":"true"}} 
```

这里成员输入为字符串，我希望将其输入为布尔值。我可以在 XML 中添加类型提示（如`<member type="xsd:boolean">true</member>`）并让解析器对此进行处理吗？

我想得到这个结果：

```
{"person":{"name":"Palle","member":true}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:05:08.410

也许是这样的：

```
[TestFixture]
public class Class1
{
    [Test]
    public void DateTimeTest()
    {
        string xml = @"<person><name>Palle</name><member>true</member></person>";
        person person = xml.Deserialize<person>();
        var serializeXNode = JsonConvert.SerializeObject(person);
    }
}

public class person
{
    public string name { get; set; }
    public bool member { get; set; }
}

public static class Extension
{
    public static T Deserialize<T>(this string xml)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));
        using (var stringReader = new StringReader(xml))
        {
            using (var xmlReader = XmlReader.Create(stringReader))
            {
                return (T) xmlSerializer.Deserialize(xmlReader);
            }
        }
    }
} 
```

# c# - 无法计算来自richtextbox 的单词到标签？

> ID：10520145
> 
> 赞同：1
> 
> 时间：2012-05-09T16:22:48.573
> 
> 标签：c#, textbox, richtextbox, word-count

我不确定这里出了什么问题，但我正在尝试计算富文本框中的单词，并用标签显示它。

我在选项卡控件中放置了一个富文本框，这样我就可以拥有一个选项卡式文本框。这似乎使这变得更加困难，那么它应该

这也不是整个程序，我拿了与richtextbox和字计数器有关的部分

任何帮助表示赞赏:)

```
 public RichTab()
    {
        InitializeComponent();
        TabPage tp = new TabPage("Document");
        RichTextBox rtb = new RichTextBox();
        rtb.Dock = DockStyle.Fill;
        tp.Controls.Add(rtb);
        tabControl1.TabPages.Add(tp);
        WordCount();
    }

    public RichTextBox RTTB()
    {
        RichTextBox rtb = null;
        TabPage tp = tabControl1.SelectedTab;
        if (tp != null)
        {
            rtb = tp.Controls[0] as RichTextBox;
        }
        return rtb;
    }

    private void WordCount()
    {
        MatchCollection wordColl = Regex.Matches(RTTB().Text, @"[\W]+");
        label2.Text = wordColl.Count.ToString();   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:45:03.923

我可能只是连接`TextChanged`RichTextBox 的事件，然后计算那里的单词：

```
rtb.TextChanged += rtb_TextChanged; 
```

然后数单词（使用 Giorgio Minardi 的正则表达式）：

```
private void rtb_TextChanged(object sender, EventArgs e) {
  label2.Text = Regex.Matches(((RichTextBox)sender).Text, @"[\S]+").Count.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:29:56.793

实际问题是什么？这是一个计算单词的简单例程：

```
[Test]
public void CountWords()
{
    const string sample = "How you doing today ?";
    MatchCollection collection = Regex.Matches(sample, @"[\S]+");
    var numberOfWords = collection.Count;
    //numberOfWords is 5
    Assert.IsTrue(numberOfWords == 5);
} 
```

# php - IIS 6 上的 PHP 作为 ISAPI，有哪些进程隔离模式？

> ID：10520154
> 
> 赞同：0
> 
> 时间：2012-05-09T16:23:13.610
> 
> 标签：php, iis-6, fastcgi, isapi

我们有带有许多 php 应用程序的 IIS 6 服务器。PHP 5.2 作为 ISAPI 模块运行，IIS 设置为 IIS 5.0 隔离模式。

现在我想切换到 FastCGI 并启用应用程序池，需要释放 IIS 5.0 隔离模式并使用工作进程隔离模式。

但我不知道，如果它是安全的改变。服务器是生产的，所以我最好在出现任何大错误之前询问您的经验（应用程序不是那么重要，但一次重启就足够了）。

你有这个设置的经验吗？取决于什么，如果应用程序在第二种模式下也能正常工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T08:32:41.007

切换实时的大型设置绝非易事。

因为你问它是否安全，我会说，如果你进行切换，你很可能没有足够的能力来应对可能发生的问题和情况，这些问题和情况可能会导致过程不安全。

请注意，这与这里的技术问题无关，只是软技能。您可以通过克隆实时系统并在克隆上进行切换来模拟技术问题，这样您就知道您可能会遇到哪些问题。

我的建议：让系统一直运行，直到您*需要*切换为止。如果有真正的需要，就有真正的意愿和预算来聘请专业人士来完成这项工作。

# ruby-on-rails - Rails 的 *_url 助手在生产中使用自定义（不是 80）端口。（Nginx，独角兽）

> ID：10520155
> 
> 赞同：4
> 
> 时间：2012-05-09T16:23:17.170
> 
> 标签：ruby-on-rails, nginx, unicorn

我是rails生产环境的菜鸟。我可以配置 nginx 和 unicorn 以响应其他（不是 80）端口吗？我不需要任何域，我只需要 ip 和端口。这是我的应用程序的 nginx 配置（80 端口）：

```
server {
    listen 80;
    server_name  localhost;
    root /home/my_app_folder/web-app/public;
    client_max_body_size 32m;
    location / {
        try_files  $uri @unicorn;
    }
    location @unicorn {
        proxy_set_header  Client-Ip $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header  Host $host;
        proxy_pass  http://unix:/home/my_app_folder/web-app/tmp/sockets/unicorn.sock;
    }
} 
```

我的应用程序在 80 端口上运行良好。例如，如果我将 80 更改为 3000，如下所示：

```
server {
    listen 3000;
    server_name  localhost;
    root /home/my_app_folder/web-app/public;
    client_max_body_size 32m;
    location / {
        try_files  $uri @unicorn;
    }
    location @unicorn {
        proxy_set_header  Client-Ip $remote_addr;
        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header  Host $host;
        proxy_pass  http://unix:/home/my_app_folder/web-app/tmp/sockets/unicorn.sock;
    }
} 
```

我有问题。一切正常，我可以访问**http://my_ip:3000**但 Rails 的 url 助手（例如 root_url 等）没有端口（**http://my_ip**）。

我该怎么做才能看到带有端口的 url 助手？有没有办法在 Nginx 或 Unicorn 的配置文件中做到这一点？毕竟，当我在本地运行 Webrick 时，它具有 URL [http://localhost:3000](http://localhost:3000)的形式，并且每个 *_url 助手都返回带有端口 3000 的 url。我需要更改一些配置文件，并将应用程序转移到另一个港口。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:40:01.870

尝试在您的应用程序控制器中放置类似的内容：

```
default_url_options[:port] = 3000 if Rails.env.production? 
```

或者，取决于您使用的 Rails 版本：

```
Rails.application.routes.default_url_options[:port]= 3000 if Rails.env.production? 
```

信用 - 迪伦的回答：

[default_url_options 和 rails 3](https://stackoverflow.com/questions/6100954/default-url-options-and-rails-3)

# actionscript-3 - Flex：将变量传递给自定义组件时应用程序感到困惑

> ID：10520158
> 
> 赞同：0
> 
> 时间：2012-05-09T16:23:24.983
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我是 Flex 的新手，我缺少一些关于构建 Flex 应用程序的基本知识——我已经实现了一个自定义组件`MyReportGrid`并`GridColumn`使用`MyColumn`. 我试图概述下面的应用程序代码。

需要注意的有趣的事情是 class`OfficeItems`由 class 使用`MyItems`，并且`MyColumn`(which extends `GridColumn`) 包含一个`customPath`用于访问变量`pen`,`pencil`和`stapler`内部的变量 class `OfficeItems`。

我相信这就是为什么手动排序（通过单击数据网格中的列）仅适用于对应于`zipCode`and`stateCode`和 NOT `pen`、`pencil`和的列的原因`stapler`。

此外，当我尝试使用简单的 labelFunction for `zipCode`or`stateCode`时，它总是可以正常工作，但实现 labelFunction for `pen`、`pencil`或`stapler`永远不会奏效。“从不工作”我的意思是 labelFunction 被正确调用，它执行它是必需的任务，因为 labelFunction 接收正确的对象并实际上返回正确的格式化字符串，但是这个返回的值永远不会显示在数据网格中（我是假设`customPath`变量使 labelFunction 混淆了返回的 String 映射到哪个变量）。

我认为这些都是同一个问题，因为应用程序的`customPath`方面`MyColumn`混淆了应用程序。知道如何修复排序和/或 labelFunction 吗？提前感谢您耐心阅读此（长）帖子。

这些课程是：

```
package com.supportClasses  
{
    public class OfficeItems {
    public var pen:*;
    public var pencil:*;
    public var stapler:*;
    }
} 
```

和

```
package com.models
{
    import com.supportClasses.OfficeItems;
    [Bindable]
    public class MyItems extends Model {
        public function myItems() {
            super();
        }
        public var office:OfficeItems;
        public var zipCode:int;
        public var stateCode:String;
    }
} 
```

数据网格如下所示：

```
...
<components:MyReportGrid id="myGrid" dataProvider="{_myData}"...>
    <components:columns>
        <fx:Array>
            <supportClasses:MyColumn customPath="office" dataField="pen"... />
            <supportClasses:MyColumn customPath="office" dataField="pencil"... />
            <supportClasses:MyColumn customPath="office" dataField="stapler"... />
            <supportClasses:MyColumn dataField="zipCode"... />
            <supportClasses:MyColumn dataField="stateCode"... />
            ... 
```

where`_myData`有一个类`MyItems`（注意：该`customPath`特征在此处不存在时被忽略`MyColumn`，例如 for`zipCode`和`stateCode`）。`MyColumn`是：

```
package com.components.supportClasses {
    import spark.components.gridClasses.GridColumn;
    public class MyColumn extends GridColumn
    {
        public var customPath:String="";
        ...
        public function MyColumn(headerText:String="header" customPath:String="", dataField:String="data", ...) {
           this.headerText=headerText;
           this.customPath=customPath;
           this.dataField=dataField;
           ...
        }
    }
} 
```

MyReportGrid 是：

```
package com.models {
    <?xml version="1.0" encoding="utf-8"?>
    <s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"    
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         width="400" height="300">
       import com.components.myClasses.MyColumn;
       import com.itemRenderers.myItemRenderer;
       import mx.collections.ArrayCollection;
       import mx.collections.ArrayList;
       import mx.collections.ListCollectionView;
       import spark.components.gridClasses.GridColumn;
       ...
       <s:DataGrid width="100%" ... />
    </s:Group>
} 
```

标签函数是：

```
private function redFormat(item:Object, column:MyColumn):String {
   var formatResult:String = "red "+item.office.pen;
   return formatResult; // returns "red Bic15938" (for example)
} 
```

来自：

```
<supportClasses:MyColumn customPath="office" dataField="pen" labelFunction="redFormat"... /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:51:47.850

这只是一个猜测，但它可能类似于向 OfficeItems 类添加“toString”函数吗？（我会使用评论，但仍在努力获得声誉。）

# asp.net-mvc - 在查看 MVC 和 Web 表单页面之前强制执行选择

> ID：10520161
> 
> 赞同：0
> 
> 时间：2012-05-09T16:23:27.723
> 
> 标签：asp.net-mvc, webforms, response.redirect

我正在开发一个需要在用户进入站点之前了解用户选择的系统。到目前为止，选择已存储在 cookie 中，并在页面加载时由 JavaScript 检查 - 如果 cookie 不存在，则会显示一个对话框并由用户做出选择。

尽管我们通常希望用户到达应用程序的主页，但他们可以合法地按照 URL 访问应用程序内的任何页面，因此检查选择的 JavaScript 存在于每个页面上。

这导致了问题（几乎总是通过清除 cookie 来解决），因此我们切换到将选择存储在数据库中。我们需要一种简洁的方法来确保所有页面（MVC 和 Web 窗体）检查是否已做出选择，如果没有，则显示对话框或重定向到可以做出选择的页面。

困扰我的主要问题是，要使用 MVC 进行重定向，我需要返回 a `RedirectResult`，而这只能通过 Action 来完成。我不希望每个操作都有关于此检查的代码 - 这似乎是基本控制器应该可能的事情（就像基本页面可能导致`Response.Redirect`.

任何人都可以建议所有页面对数据库执行检查然后导致重定向或显示对话框的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:43:57.213

> 困扰我的主要问题是，要使用 MVC 进行重定向，我需要返回一个 RedirectResult，而这只能通过 Action 来完成。

哦，一点也不。[您还可以从自定义操作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)重定向。

例如，您可以编写一个自定义`IAuthorizationFilter`来检查用户是否做出了必要的选择，如果没有，则重定向到某个给定页面。可以针对 cookie、数据库或您决定保留此信息的任何地方进行检查：

```
public class EnsureChoiceHasBeenMadeAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        // get the current user
        var user = filterContext.HttpContext.User;
        if (user.Identity.IsAuthenticated && !UserMadeAChoice(user.Identity.Name))
        {
            // if the current user is authenticated and he didn't made a choice
            // redirect him to some page without even attempting to execute
            // the controller action that he requested
            var values = new RouteValueDictionary(new
            {
                controller = "home",
                action = "index"
            });
            filterContext.Result = new RedirectToRouteResult(values);
        }
    }

    private bool UserMadeAChoice(string username)
    {
        throw new NotImplementedException();
    }
} 
```

现在你有不同的可能性：

*   `[EnsureChoiceHasBeenMade]`您使用属性装饰要执行此检查的控制器/操作
*   您将操作过滤器注册为[全局操作过滤器](http://msdn.microsoft.com/en-us/gg618496)，以便它绝对适用于所有操作
*   您编写[自定义过滤器提供程序](http://bradwilson.typepad.com/blog/2010/07/service-location-pt4-filters.html)，以便根据某些动态值将操作过滤器动态应用于某些操作（您可以访问 HttpContext）。

# jquery - 仅在使用 jquery 的最后一个键之后进行键入

> ID：10520164
> 
> 赞同：22
> 
> 时间：2012-05-09T16:23:39.620
> 
> 标签：jquery

我正在编写一个简单的脚本来提取输入 keyup 事件的数据库信息。

我遇到的问题是每次用户按下一个键时都会重复 keyup 事件。我怎样才能让它只有在按下最后一个键后才能工作？

我想我应该在每次按键后使用像 setTimeOut() 这样的函数，但我不知道如何......你能给我一个简单的例子吗？

对不起，我的英语不好 ：）

这是我想做的事情：

```
$("input").keyup(function()
{
    var timer=setTimeout(function() {
    }, 1000);
    if(!timer)
    {
        //do .post ajax request
    }
}); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-09T16:26:24.113

```
var timer;

$("input").on('keyup', function() {
    clearTimeout(timer);  //clear any running timeout on key up
    timer = setTimeout(function() { //then give it a second to see if the user is finished
        //do .post ajax request //then do the ajax call
    }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T16:45:08.130

你基本上在那里。如果他们输入另一个字母，您只需要清除计时器即可；否则，无论他们是否继续输入，您的回调都将在 1000 毫秒后执行。

像这样的东西应该工作：

```
$("input").keyup(function (event)
{
    var self = this;
    if (self.timer)
        clearTimeout(self.timer);

    self.timer = setTimeout(function ()
    {
        self.timer = null;
        alert(self.value);
    }, 1000);

}); 
```

在我刚刚收到警报的地方，您会将您的 ajax 代码写回服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:19:27.707

我认为如果您使用 onchange 事件执行此操作，则无需进行时间间隔检查。每当您完成输入并更改焦点时。它会为您触发 onchange 事件

```
$("input").onchange(function()
{
   //extract database info
} 
```

# sql - SQL 语句，从特定时间范围内选择数据

> ID：10520165
> 
> 赞同：1
> 
> 时间：2012-05-09T16:23:41.393
> 
> 标签：sql, select

简介：例如，我有一个包含小时列的表的数据库

```
08:30:00
08:45:00
09:30:00
12:20:00
...
18:00:00 
```

此列中的数据类型是“时间”。问题：SQL 是否可以选择所有时间 [ 例如。10:00:00、10:30:00、11:00:00 等] 从 08:00:00 到 18:00:00，哪些不在列表中？

编辑：好吧，经过深思熟虑，您的解决方案[谢谢！]并不完全完美[嗯，我给你的细节很完美:)]。我的应用程序允许用户进行预约，这需要半小时 [在此版本的应用程序中]。我在第一个主题中给你的时间专栏是相当乐观的，因为我没有在 11:45:00 或 13:05:00 等时间安排封面会议，这将在 12:15:00 和 13 结束:35:00，所以我真的不知道我可以在这个额外的桌子上放几个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:30:39.797

首先，创建一个表格`T_REF`，其中的日期列`COL_HR`包含您想要报告的所有时间（如果在原始表格中找不到）。

在 MYSQL 中做这样的事情应该可以

```
SELECT DATE_FORMAT(COLUMN_NAME, '%H') FROM T_REF
MINUS
SELECT DATE_FORMAT(COLUMN_NAME, '%H') FROM ORIG_TABLE 
```

这将只获取和比较小时数，并报告不在您的表格中的小时数 ( `ORIG_TABLE`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:07:49.980

丑陋，但可能：

```
CREATE TABLE thours (h time);
INSERT INTO thours VALUES
    ('08:30:00'), ('08:45:00'), ('09:30:00'),
    ('12:20:00'), ('18:00:00');

CREATE VIEW hrange AS
SELECT 8 as h UNION ALL SELECT  9 UNION ALL SELECT 10 UNION ALL
SELECT 11     UNION ALL SELECT 12 UNION ALL SELECT 13 UNION ALL
SELECT 14     UNION ALL SELECT 15 UNION ALL SELECT 16 UNION ALL
SELECT 17     UNION ALL SELECT 18;

CREATE VIEW hours AS
SELECT cast(concat(cast(h as char), ':00:00') as time) AS h FROM hrange
UNION ALL
SELECT cast(concat(cast(h as char), ':30:00') as time)
  FROM hrange WHERE h < 18
 ORDER BY 1;

SELECT h.h AS ranged, t.h AS scheduled
  FROM hours h
  LEFT join thours t ON h.h = t.h; 
```

如果您要添加`WHERE t.h IS NULL`到查询中，您将获得所需时间的列表。

我创建了视图，因为 MySQL 无法动态生成系列。 [在这里试试](http://www.sqlfiddle.com/#!2/e514b/2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:27:45.940

您是否只希望找到每个小时和半小时？在不知道您希望找到或不找到的时间的情况下，我建议您执行以下操作：

创建一个包含所有可能时间的单独表，然后运行查询以查找原始表中不存在哪些时间。

# python - 使用 MySQLdb 更新表时出错

> ID：10520166
> 
> 赞同：1
> 
> 时间：2012-05-09T16:23:43.527
> 
> 标签：python

```
import MySQLdb
import csv
import sys
db = MySQLdb.connect("host","username","password","dbname" )
c = db.cursor()
posfile = 'C:/Users/name/Desktop/textfile.txt'
csv_data_pos = csv.reader(open(posfile, 'rb'))
count_pos = 0
for row_pos in csv_data_pos:
    count_pos = count_pos + 1
    pos_file_update = "UPDATE Sentence SET POS_score = %s WHERE Id = %s"
    c.execute(pos_file_update, (row_pos, count_pos)) 
```

我正在尝试将**row_pos**更新到表中，但出现错误

```
"ProgrammingError: (1064, ""You have an error in your SQL syntax; check the 
manual that corresponds to your MySQL server version for the right syntax
to use near ') WHERE Id = 1' at line 1"")" 
```

我错过了代码中的某些内容吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:26:57.950

在这种情况下，`row_pos`是一个数组而不是一个标量值。如果要从该数组中传递特定值，请使用索引`[0]`来检索它。

```
# row_pos is an array representing one row of the 2d array csv_data_pos
# as returned by the csv.reader() call
for row_pos in csv_data_pos:
    count_pos = count_pos + 1
    pos_file_update = "UPDATE Sentence SET POS_score = %s WHERE Id = %s"
    # If there is a specific value from the row_pos array, use its array index
    c.execute(pos_file_update, (row_pos[0], count_pos)) 
```

# java - Facebook 连接 - 安卓

> ID：10520172
> 
> 赞同：2
> 
> 时间：2012-05-09T16:23:59.537
> 
> 标签：java, android, facebook, localization

我正在关注 Facebook Connect 的以下教程：

[https://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)

并试图让我的用户通过 Facebook 登录。现在，我成功地渲染了一个权限请求/登录框，但是根据谷歌翻译，语言是印度尼西亚语。我在我的 FB App 设置中看不到任何地方可以更改它，在 FB-Connect 源中也看不到任何地方可以更改它。我不仅尝试了具有自定义 ROM 的 Inspire 4g，还尝试了库存的 Galaxy Tab。

有没有人遇到过这个？

**编辑：**此外，该应用程序正在尝试 SSO（单点登录），也就是它使用已安装的 Facebook 应用程序进行授权，所以我不能只将语言环境添加到 API URL 的末尾，因为它是不使用它们。如果用户没有安装 Facebook，我将需要这样做，但现在我正试图让 SSO 正常工作。

这是调用 FB 应用程序的 FB API 的相关代码部分。我想我需要在某个地方请求我的特定语言环境：

```
private boolean startSingleSignOn( Activity activity, String applicationId, String[] permissions, int activityCode )
{
  boolean didSucceed = true;
  Intent intent = new Intent();

  intent.setClassName( "com.facebook.katana", "com.facebook.katana.ProxyAuth" );
  intent.putExtra( "client_id", applicationId );

  /** perhaps here, I need to add to the Intent? **/

  if( permissions.length > 0 )
  {
    intent.putExtra( "scope", TextUtils.join( ",", permissions ) );
  }

  // Verify that the application whose package name is
  // com.facebook.katana.ProxyAuth
  // has the expected FB app signature.
  if( !validateActivityIntent( activity, intent ) )
  {
    return false;
  }

  mAuthActivity = activity;
  mAuthPermissions = permissions;
  mAuthActivityCode = activityCode;
  try
  {
    activity.startActivityForResult( intent, activityCode );
  }
  catch( ActivityNotFoundException e )
  {
    didSucceed = false;
  }

  return didSucceed;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:42:46.513

这看起来像是 Facebook 的问题：

[使用不正确的语言环境显示的 Facebook 授权应用程序对话框](http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

# javascript - 悬停时的jQuery淡出元素

> ID：10520173
> 
> 赞同：0
> 
> 时间：2012-05-09T16:24:06.177
> 
> 标签：javascript, jquery

我有一个 wordpress 网站，当填写表格时，如果引发错误，则插件会显示`<span>`其中的错误文本。

我试图使用 jQuery 淡出该文本，但我尝试了以下两种方法均无济于事......

```
$(".wpcf7-not-valid-tip").on("mouseenter", function(){
        alert( 'test');
});
$('.wpcf7-not-valid-tip').hover(
      function () {
       $(this).fadeOut();
}); 
```

我的 HTML 标记是这样输出的...

```
<span class="wpcf7-form-control-wrap telno">
    <input type="text" size="40" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required field wpcf7-not-valid" value="" name="telno">
    <span class="wpcf7-not-valid-tip">Please fill the required field.</span>
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:29:57.813

您是否有可能在项目存在之前绑定事件？

试试这个，看看你是否有更多的运气

```
$('.wpcf7-not-valid-tip').live('mouseenter', function(ev) {
    $(this).fadeOut();
}); 
```

或者

```
$(".wpcf7-not-valid-tip").on("mouseenter", function(ev){
    $(this).fadeOut();
}); 
```

# ajax - 将数据从 angularjs 发送到 django

> ID：10520174
> 
> 赞同：5
> 
> 时间：2012-05-09T16:24:17.060
> 
> 标签：ajax, django, http, angularjs

我正在使用 Angularjs 及其 $http 模块向 Django 服务器发送 POST AJAX 请求。这是一个例子：

```
$http({ 
        method: 'POST', 
        url: '/url/', 
        data: 'test data'
  }).
  success(function(data, status, headers, config) {
        doSomeStuffWhenSuccess();
  }); 
```

问题是我在 Django 中得到了什么。无论我发送什么，数据始终是`QueryDict`对象的键，其值始终是一个空列表。

```
<QueryDict: {u'test data': [u'']}> 
```

我不知道为什么。我错过了什么？

我使用几乎默认创建的 Django 应用程序和默认中间件。我只创建了一个视图并在 url config 中设置了一个 url。Django 的版本是 1.3。我将 Angular 的 $http 模块配置为始终发送包含 csrf 令牌的标头以满足 Django。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T20:09:49.220

我用 jQuery 参数函数解决了这个问题。我认为这是更优雅的解决方案。

```
$http({ 
    method: 'POST', 
    url: '/url/', 
    data: $.param({test: data})
}) 
```

现在它像我想要的那样工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T17:19:11.230

我相信 django 认为您正在发送一个 urlencoded 表单，例如。键=值&键2=值2...

如果您尝试：

```
$http({ 
    method: 'POST', 
    url: '/url/', 
    data: 'test=data'
}) 
```

你应该得到

```
<QueryDict: {u'test': [u'data']}> 
```

您始终可以按如下方式获取数据（原始正文内容）：

```
request.body 
```

希望这是您正在寻找的。

# iphone - 与后台服务相关的应用拒绝

> ID：10520180
> 
> 赞同：1
> 
> 时间：2012-05-09T16:24:36.343
> 
> 标签：iphone

我的应用刚刚被拒绝 ;-( 原因如下：

> “我们发现您的应用程序使用了后台模式，但不包含需要该模式持续运行的功能。这种行为不符合 App Store 审查指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持位置，但不包括需要持久位置的功能。
> 
> 在应用程序处于后台时添加需要位置更新的功能或从 UIBackgroundModes 键中删除“位置”设置是合适的。”

我查看了我的 info.plist，其中包含拒绝中所述的内容。现在我从“必需的背景模式”中删除了位置（在 Xcode 中），数组现在是空的。我可以简单地完全删除该密钥吗？我的意思是，那个键不是必需的，是吗？

我还注意到别的东西。虽然不是在拒绝。info.plist 的“应用程序支持 iTunes 文件共享”设置为“是”，那是什么？也许我也应该删除它，或者将其设置为 NO。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:28:23.163

> 现在我从“必需的背景模式”中删除了位置（在 Xcode 中），数组现在是空的。我可以简单地完全删除该密钥吗？我的意思是，那个键不是必需的，是吗？

是的，该键是可选的，您可以将其删除

> 我还注意到别的东西。虽然不是在拒绝。info.plist 的“应用程序支持 iTunes 文件共享”设置为“是”，那是什么？也许我也应该删除它，或者将其设置为 NO。

将此键设置为 YES 使用户能够使用 PC 上的 iTunes 在应用程序的 Documents 文件夹中添加/删除文件。如果您的应用程序不使用此功能，那么您应该删除该密钥，因为这也可能是拒绝的原因（实际上这正是几周前拒绝我的一个应用程序的原因，所以您可以在这里相信我 :) )

# linux - Linux：何时使用分散/收集 IO（readv、writev）与带有 fread 的大缓冲区

> ID：10520182
> 
> 赞同：77
> 
> 时间：2012-05-09T16:24:47.627
> 
> 标签：linux, io

在*分散*和*聚集*（即`readv`和`writev`）中，Linux 读取多个缓冲区并从多个缓冲区写入。

如果说，我有一个包含 3 个缓冲区的向量，我可以使用`readv`，或者我可以使用单个缓冲区，该缓冲区的组合大小为 3 个缓冲区并执行`fread`.

因此，我很困惑：对于哪些情况应该使用 scatter/gather 以及何时应该使用单个大缓冲区？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-09T17:07:19.550

`readv`提供的主要便利`writev`是：

1.  它允许使用不连续的数据块。即缓冲区不必*是*数组的一部分，而是单独分配的。
2.  I/O 是“原子的”。即，如果您执行 a `writev`，则向量中的所有元素都将写入一个连续的操作中，并且其他进程完成的写入不会发生在它们之间。

例如，您的数据是自然分段的，并且来自不同的来源：

```
struct foo *my_foo;
struct bar *my_bar;
struct baz *my_baz;

my_foo = get_my_foo();
my_bar = get_my_bar();
my_baz = get_my_baz(); 
```

现在，所有三个“缓冲区”*都不*是一个大的连续块。但是无论出于何种原因，您都希望将它们连续写入文件（例如，它们是文件格式的文件头中的字段）。

如果你使用`write`你必须选择：

1.  使用（开销）将它们复制到一个内存块中`memcpy`，然后进行一次`write`调用。然后写入将是原子的。
2.  `write`对（开销）进行三个单独的调用。此外，`write`来自其他进程的调用可以散布在这些写入之间（不是原子的）。

如果您`writev`改用，一切都很好：

1.  您只进行了一次系统调用，而不是`memcpy`从三个中创建一个缓冲区。
2.  此外，三个缓冲区是原子写入的，作为一个块写入。即，如果其他进程也写入，则这些写入不会出现在三个向量的写入之间。

所以你会做这样的事情：

```
struct iovec iov[3];

iov[0].iov_base = my_foo;
iov[0].iov_len = sizeof (struct foo);
iov[1].iov_base = my_bar;
iov[1].iov_len = sizeof (struct bar);
iov[2].iov_base = my_baz;
iov[2].iov_len = sizeof (struct baz);

bytes_written = writev (fd, iov, 3); 
```

资料来源：

1.  [http://pubs.opengroup.org/onlinepubs/009604499/functions/writev.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/writev.html)
2.  [http://linux.die.net/man/2/readv](http://linux.die.net/man/2/readv)

# c# - 实体框架将第一行从列表添加到数据库？

> ID：10520184
> 
> 赞同：0
> 
> 时间：2012-05-09T16:24:54.500
> 
> 标签：c#, wpf, entity-framework

```
foreach (StockItem item in StockList)
{
    Master master = new Master();
    master.VoucherNo = BillNo;
    master.Voucher = "Sales";
    master.StockName = StockList[0].StockName;
    master.Quantity = StockList[0].Quantity;
    master.Unit = StockList[0].Unit;
    master.Price = StockList[0].UnitPrice;
    master.Amount = StockList[0].Amount;
    dbContext.AddToMasters(master);
    dbContext.SaveChanges();
}
Sale sale = new Sale();
sale.InvoiceNo = BillNo;
sale.Date = BillDate;
sale.Party = Customer;
sale.Amount = (decimal)TotalAmount;
dbContext.AddToSales(sale);
dbContext.SaveChanges(); 
```

`StockList`如果有 n 行，则此代码仅添加所有 n 次的第一行。

代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:28:53.590

您正在迭代 StockList，但实际上并未使用迭代变量。

在您使用 StockList[0] 的任何地方，您都应该使用 item。

编辑：这是你的循环应该是这样的：

```
foreach (StockItem item in StockList)
{
    Master master = new Master();
    master.VoucherNo = BillNo;
    master.Voucher = "Sales";
    master.StockName = item.StockName;
    master.Quantity = item.Quantity;
    master.Unit = item.Unit;
    master.Price = item.UnitPrice;
    master.Amount = item.Amount;
    dbContext.AddToMasters(master);
    dbContext.SaveChanges();
} 
```

# ios5 - 是否有易于使用的 iPhone 照片缩略图查看器和浏览器？

> ID：10520192
> 
> 赞同：1
> 
> 时间：2012-05-09T16:25:29.053
> 
> 标签：ios5, three20, thumbnails, photo-gallery

我正在向我的 iPhone 应用程序添加一个缩略图照片库，其中将包括一个类似于 iPhone 照片应用程序的照片浏览器以及每张照片的详细视图。到目前为止，我发现唯一能提供此功能的是[Three20——](https://github.com/facebook/three20/)问题是 Three20 非常庞大，并且有一个看起来很复杂的 API，据我所知，这不是标准的 Apple 风格界面。

我还看过这篇文章[Open source photo viewer for iPhone](https://stackoverflow.com/questions/4163847/open-source-photo-viewer-for-iphone)，其中提到了其他几个照片浏览器——但这些没有内置缩略图库。

我的问题是：有没有人知道一个很好的组合照片浏览器和缩略图库库，它易于使用、不会太大且易于定制？缓存也很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:13:02.033

我找到了一个名为[KTPhotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)的我自己的问题的答案，它完全符合要求——只是一个缩略图库和照片浏览器。结合处理图像缓存的[SDWebImage](https://github.com/rs/SDWebImage)，它似乎是一个完美的简单解决方案，不需要 2 MB 代码！

更新：快速安装，与标签栏控制器一起使用（提供的示例应用程序！）并且像魅力一样工作。可能不具备 Three20 的所有功能，但它更易于使用且占用空间更小。TabBarController 问题做出了最终决定，我花了几个小时试图让 Three20 照片查看器与我的标签控制器应用程序配合得很好——但失败了！[经过半小时的尝试后，我通过使用他们的选项卡示例应用程序](https://github.com/kirbyt/KTPhotoBrowser/tree/master/src/TabBarSample)作为参考点让 KTPhotoBrowser 正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:18:53.833

我知道`Three20`看起来很大，但从我的角度来看它是最好的。我也有问题开始，但我能够做到。我在[stackoverflow](https://stackoverflow.com/questions/4655309/tabbar-support-of-three20-iphone-photo-gallery)和[github](https://github.com/doonot/TTThumbsViewController-in-a-TabBar-App)上有示例代码。检查一下，你会发现这正是你所需要的。

# html - 使用 html5 和/或 CSS3 动画文本移动

> ID：10520193
> 
> 赞同：0
> 
> 时间：2012-05-09T16:25:29.967
> 
> 标签：html, animation, css

我想要做的是有一点文字，说“Ipsum Lorem ...”水平滑入一个彩色的DIV快速，然后缓到接近停止，但继续缓慢移动，然后缓到高速和离开 DIV - 它也不能在 div 之外可见。

我知道我可以很容易地在 Flash 中做到这一点，但我试图避免使用它......！

这甚至可能吗？作为它的时间线。

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:58:47.587

我认为应该可以使用Javascript。您可以尝试查看 Adob​​e 的新 HTML5 编辑器。它被称为 Adob​​e Edge。他们前段时间有免费试用，虽然我不知道这是否还在继续，但它应该能够帮助你创建这个动画。

# java - 斯坦福解析器 - 使用金融工具进行标记

> ID：10520196
> 
> 赞同：1
> 
> 时间：2012-05-09T16:25:35.737
> 
> 标签：java, nlp, machine-learning, finance, stanford-nlp

我有一套财务文件（定期存款文件、信用卡文件）。我想自动识别和标记这些文档中的金融实体/工具。

例如，如果文件中包含“保留在不通知的情况下以利息偿还的权利”这一短语。我想识别与之相关的财务术语，并用它标记，对于这句话，它是“可调用的”。对于“允许提前提款”这个短语，相关的财务术语是“Putable”，所以如果这个短语在文档中，我想用术语“Putable”标记它。

金融术语将来自[金融行业业务本体](http://www.hypercube.co.uk/edmcouncil/)。有没有可能为此目的使用斯坦福解析器？我可以为此目的使用 POS 标记器吗？我可能必须用金融工具训练斯坦福解析器，如果可能的话，我如何训练斯坦福解析器来识别金融工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T22:34:05.873

开箱即用的解析器或词性标注器不会识别诸如此类的特定领域概念。但是，它们提供的自然语言分析可能是解决方案的有用构建块。或者，如果您需要识别的短语与固定短语足够接近，它们可能是不必要的，您应该专注于找到固定短语并对其进行分类。

虽然这些不是“命名实体”，但问题更接近于命名实体识别，因为您正在识别语义短语类。您可以注释您希望查找的短语示例并使用命名实体识别器（例如，斯坦福 NER）训练模型，或者编写匹配实例的规则（使用类似 GATE 中的 ANNIE 或斯坦福的 TokensRegexPattern。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:52:35.160

您必须解析整个句子，您必须从中识别值。然后标记值并识别名词、动词等。

您可以借助[此处](http://nlp.stanford.edu/software/lex-parser.shtml#Sample)显示的示例输出。通过使用，您可以使用必须开发的字典术语来解析和识别术语。

您也可以在[此处使用相同的 API](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/parser/lexparser/package-summary.html)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T22:54:45.690

POS 标记会将您的文本文件转换为 XML 文件。实现词性标注和命名实体识别的一种简单方法是：

```
import java.io.IOException;
import edu.stanford.nlp.pipeline.StanfordCoreNLP;

public class POSTagging{
  public static void main(String[] args) {
    String arguments= "-annotators tokenize,ssplit,pos,lemma,ner -filelist ./filelist/filelist.txt -outputDirectory ./annotated";
    String[] commArgs=arguments.split(" ");
    try {
      StanfordCoreNLP.main(commArgs);
    } catch (IOException e) {
      e.printStackTrace();
    } catch (ClassNotFoundException e) {
      e.printStackTrace();
    }
  }
} 
```

运行此程序后，您将拥有带注释的 XML 文件。您将不得不使用[JAXP](http://jaxp.java.net/)或类似的东西来解析它们。

# javascript - Javascript 函数在 IE 中工作，但在 FF、Chrome 或 Mobile Safari 中不工作

> ID：10520197
> 
> 赞同：0
> 
> 时间：2012-05-09T16:25:39.340
> 
> 标签：javascript, firefox, google-chrome, drop-down-menu, mobile-safari

我有一个使用 Javascript 的 HTML 页面，它在 IE 中运行良好，但在 Firefox、Chrome 或 Safari 中运行不佳。我的代码动态地将数据添加到 IE 的下拉列表中，但我猜我的语法不太适合 FF、Chrome 或 Safari？在 FF、Chrome、Safari 中，下拉框仅显示硬编码值，并且在前面提到的 3 种浏览器中永远不会更新。假设我的数组在 FF 或 Chrome 中正确填充，那么我猜我用来将数据添加回下拉框的方法不是 FF 或 Chrome 喜欢的方式编写的？

```
<script type="text/javascript">

dojo.require("esri.map");
    dojo.require("esri.tasks.route");
    dojo.require("esri.tasks.query");
var dynamicarray = [];

    queryTask.execute(query, showResults);

function showResults(results) {  //This is where I can add values to dropdown in IE

    var featureAttributes;
    var addoffices = document.getElementById("Office");
    var addrigs = document.getElementById("Rigs");

    for (var i = 0, il = results.features.length; i < il; i++) {
        featureAttributes = results.features[i].attributes;
        for (att in featureAttributes) {

            dynamicarray.push(featureAttributes[att]);
            if (isNaN(featureAttributes[att])) {
                addrigs.options.add(new Option(featureAttributes[att], att));
            }
            if (isNaN(featureAttributes[att])) {
                addoffices.options.add(new Option(featureAttributes[att], att));
            }
        }
     }
    }

function officeval() {

    d = document.getElementById("Office");
    var de = d.options[d.selectedIndex].text;
    addStop(de);                    

    }

 function addStop(evt) {

    var lat;
            var lon;
            var dar;
            for (dar in dynamicarray) {
                if (dynamicarray[dar] == evt) {
                    lon = dynamicarray[dar - 1]; //Get Longitude value
                    lat = dynamicarray[dar - 2]; //Get Latitude value

                    var inPoint = new esri.geometry.Point(lon, lat, map.spatialReference);
                    var stop = map.graphics.add(new esri.Graphic(inPoint, stopSymbol));
                    routeParams.stops.features.push(stop);

                    map.graphics.add(new esri.Graphic(new esri.geometry.Point(lon, lat, map.spatialReference), textSymbol));
                    break;
                }
            }
}
</script>

From: 
<SELECT id="Office" SIZE=0 onchange="officeval()">
<OPTION VALUE="0">
<OPTION VALUE="1"> Some Office
    <OPTION VALUE="2"> Warehouse Yard
</SELECT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:08:51.050

它仅适用于 Internet Explorer，因为您使用的是不合规代码

采用：

```
try {
    addrigs.options.add(new Option(featureAttributes[att], att), null); // standards compliant; doesn't work in IE
}
catch(ex) {
    addrigs.options.add(new Option(featureAttributes[att], att)) // IE only
} 
```

见[http://www.dzone.com/snippets/htmljavascript-select-list](http://www.dzone.com/snippets/htmljavascript-select-list)

# javascript - 从 URL 检索和显示 JSON 数据

> ID：10520199
> 
> 赞同：0
> 
> 时间：2012-05-09T16:25:47.253
> 
> 标签：javascript, jquery, ajax, json

我正在尝试使用 javascript 和 URL 请求从 JSON 对象中检索和显示有关当前天气的信息：

```
http://free.worldweatheronline.com/feed/weather.ashx?q=de39ga&format=json&num_of_days=2&key=ec9c2dc5ba201904120805' 
```

URL 中的数据如下所示：

```
 {
    "data": {
        "current_condition": [
            {
                "cloudcover": "75",
                "humidity": "88",
                "observation_time": "03:30 PM",
                "precipMM": "2.7",
                "pressure": "1008",
                "temp_C": "12",
                "temp_F": "54",
                "visibility": "8",
                "weatherCode": "302",
                "weatherDesc": [
                    {
                        "value": "Moderate rain"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0018_cloudy_with_heavy_rain.png"
                    }
                ],
                "winddir16Point": "SE",
                "winddirDegree": "140",
                "windspeedKmph": "17",
                "windspeedMiles": "11"
            }
        ],
        "request": [
            {
                "query": "DE3",
                "type": "Postcode"
            }
        ],
        "weather": [
            {
                "date": "2012-05-09",
                "precipMM": "11.8",
                "tempMaxC": "13",
                "tempMaxF": "56",
                "tempMinC": "12",
                "tempMinF": "53",
                "weatherCode": "266",
                "weatherDesc": [
                    {
                        "value": "Light drizzle"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0017_cloudy_with_light_rain.png"
                    }
                ],
                "winddir16Point": "SE",
                "winddirDegree": "141",
                "winddirection": "SE",
                "windspeedKmph": "12",
                "windspeedMiles": "7"
            },
            {
                "date": "2012-05-10",
                "precipMM": "11.1",
                "tempMaxC": "18",
                "tempMaxF": "64",
                "tempMinC": "6",
                "tempMinF": "43",
                "weatherCode": "353",
                "weatherDesc": [
                    {
                        "value": "Light rain shower"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0009_light_rain_showers.png"
                    }
                ],
                "winddir16Point": "SSW",
                "winddirDegree": "209",
                "winddirection": "SSW",
                "windspeedKmph": "30",
                "windspeedMiles": "19"
            }
        ]
    }
} 
```

我尝试了几个脚本来尝试获取数据并取出数据以显示在 div 中。第一个看起来像这样：

```
 $.ajax({
    url: "http://free.worldweatheronline.com/feed/weather.ashx?q=de39ga&format=json&num_of_days=2&key=ec9c2dc5ba201904120805"
    dataType: 'json',
    success: function(data) {
        jQuery.each(data, function() {
            alert("HELLO");
            alert("Current Cloud Cover = " + this.data.current_condition.cloudcover);
            alert("Current Humidity = " + this.data.current_condition.humidity);
        });
    }
}); 
```

第二个看起来像这样：

```
var postcode = document.getElementById("address").value;

function getWeather(userName, count) {

   $.getJSON(
     'http://free.worldweatheronline.com/feed/weather.ashx?q' + postcode + '&format=json&num_of_days=2&key=ec9c2dc5ba201904120805', 
     {}, 
     showWeather,
    //'jsonp'
  ); 
```

}

```
function showWeather(day) {

    var str = '<ul>';
    str += '<h2>Tweets from ' + postcode + '</h2>';
    var i = 0;
    $.each(day, function(index, value) {
        if (i == count) return;
        var dt = new Date(value.date);
        str += '<p>';
        str += value.temp_C; //gets "text" from JSON
        str += '</p>';
        str += '';
        str += '';
        i++;
    });
} 
```

我想从 JSON URL 获取天气信息并在 div 中显示一些信息，任何人都可以解释如何做到这一点，这两个脚本不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:37:50.773

```
$.ajax({
    url: "http://free.worldweatheronline.com/feed/weather.ashx?q=de39ga&format=json&num_of_days=2&key=ec9c2dc5ba201904120805",
    dataType: 'jsonp',  // You  need to use 'jsonp' here because it is cross domain request 
    success: function(data) {
        $.each(data, function(index, value) {
            alert(value.current_condition[0].cloudcover);
            alert(value.current_condition[0].humidity);
            alert(value.current_condition[0].weatherDesc[0].value);
            alert(value.request[0].query);
            alert(value.request[0].query);
            $.each(value.weather, function(i, val) {
                alert(val.precipMM);
                alert(val.weatherDesc[0].value);
            })
        });
    }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/26/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:35:45.833

有一些问题......以下应该可以工作（修改第一块代码）。

```
$.ajax({
    url: "http://free.worldweatheronline.com/feed/weather.ashx?q=de39ga&format=json&num_of_days=2&key=ec9c2dc5ba201904120805&callback=?",
    dataType: 'jsonp',
    success: function(data){
        jQuery.each(data, function(){
            alert(JSON.stringify(this));
            alert("Current Cloud Cover = " + this.current_condition[0].cloudcover);
            alert("Current Humidity = " + this.current_condition[0].humidity);
        });
    }
}); 
```

回顾一下：

1.  您需要使用**JsonP**来规避跨站点脚本限制（通过在 AJAX URL 中添加“&callback=?”来实现。
2.  JSON响应的根是**data**，所以需要写data.data。
3.  **current_condition**属性是一个数组——必须添加一个索引器（即[0]）才能访问它。

# python - Pydev：将标准输出发送到真实（tty）终端

> ID：10520200
> 
> 赞同：3
> 
> 时间：2012-05-09T16:25:49.543
> 
> 标签：python, console, pydev

跟进上一个问题（[子进程：PyDev 控制台 vs. cmd.exe](https://stackoverflow.com/questions/10236260/subprocess-pydev-console-vs-cmd-exe)），有没有办法改变 PyDev 发送标准输出的位置——即到 tty 终端？

我遇到过几个没有 tty 终端的情况。对于 subprocess 模块的情况，我可以使用 CREATE_NEW_CONSOLE 标志，但在其他情况下，例如在这个问题（[在控制台中正确打印 \r](https://stackoverflow.com/questions/6125692/print-r-correctly-in-console)）中，PyDev 控制台似乎不支持使用转义字符。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:26:39.680

我通常通过标准库中的模块来处理此类问题`logging`，这非常好，但我假设您有充分的理由想要这个。

如果 PyDev 控制台支持完整的终端仿真，我会感到惊讶。至少在 Windows 上的 Helios 下，我对 Unicode 显示没有任何问题，但终端转义是另一回事。

如果您明确知道要使用哪个终端，则可以在其中运行`sleep 3600`，然后在测试驱动程序中执行此操作：

```
import sys
def redirect_terminal(ttypath):
  term = open(ttypath, 'w+')
  sys.stdout = term
  sys.stderr = term 
```

在交互式解释器中尝试这个，这可能与在 PyDev 中运行它有点不同，我在初始终端中得到了这个（注意本地回显和提示仍然在这里返回）：

```
>>> redirect_terminal('/dev/pts/0')
>>> dir()
>>> raise TypeError
>>> 
```

这在`/dev/pts/0`终端：

```
['__builtins__', '__doc__', '__name__', '__package__', 'redirect_terminal', 'sys']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError 
```

虽然我没有在这里尝试任何终端转义，但它们只是像其他任何一样打印的字节序列，所以它们应该打印在远程终端上。

我无法设法从交互式解释器中的不同终端收集输入。当我尝试时，仍然从初始终端读取输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:14:46.243

这目前是 Eclipse 中的一个限制......（PyDev 继承）。

Aptana Studio 确实有一个终端视图，可能可以用作替代品，但目前还没有这样做的计划。

回答下面的评论，要从正在运行的 Python 程序创建一个新的 shell，可以使用下面的代码：

```
import subprocess
import sys
import os
args = [sys.executable] + sys.argv
new_environ = os.environ.copy()

if hasattr(subprocess, 'CREATE_NEW_CONSOLE'):
    popen = subprocess.Popen(args, env=new_environ, creationflags=subprocess.CREATE_NEW_CONSOLE)
    exit_code = popen.wait()
else:
    #On Linux, CREATE_NEW_CONSOLE is not available, thus, we use xterm itself.
    args = ['xterm', '-e'] + args
    popen = subprocess.Popen(args, env=new_environ)
    popen.wait() #This exit code will always be 0 when xterm is executed. 
```

# jquery - 从左侧滑动 DIV

> ID：10520203
> 
> 赞同：3
> 
> 时间：2012-05-09T16:25:58.843
> 
> 标签：jquery, html, slide

我正在尝试使用一个简单的 div(leftContainer) 并希望使其在页面加载时从左侧滑动到其总宽度，而不是单击按钮。

这是我的代码：

```
<div class="leftContainer ">
<div class="header">Header</div>
<div class="mainbody">
    <p>Body</p>
</div> 
```

**[​演示](http://jsfiddle.net/YCVhH/7/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:30:24.817

您可以使用 jQuery 为宽度设置动画。

[http://jsfiddle.net/YCVhH/9/](http://jsfiddle.net/YCVhH/9/)

```
$('.leftContainer').animate({ width: '100%'});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:39:36.903

```
$("div.leftContainer")
    .css("margin-left",-$(this).width())
    .animate({
        marginLeft:0
    }, 700); 
```

[演示](http://jsfiddle.net/duGkA/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:33:47.213

尝试以下操作：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript"> 
    $(document).ready(function()
    {
        $("div.leftContainer").animate({width:100%}, "slow");
    });
</script> 
```

如果您正在寻找固定宽度而不是 100%，那么也要更改它。祝你好运！如果它不起作用，请更清楚你想要做什么，我会尽力帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:31:12.407

做了一个简单的例子，不知道你在做什么。

[http://jsfiddle.net/YCVhH/12/](http://jsfiddle.net/YCVhH/12/)

使用 animate 做任何你想做的事情[animate();](http://api.jquery.com/animate/)

`$(".leftContainer").animate({ left: "50%" });`

# jsf - 后退按钮的 JSF 问题

> ID：10520204
> 
> 赞同：1
> 
> 时间：2012-05-09T16:26:03.753
> 
> 标签：jsf, back-button

我在使用后退按钮时遇到问题，没有将数据保存在请求范围 bean 上的 JSF 中的动态下拉列表中。

我有一个带有 2 个下拉列表的表单，其中 dropdown2 是基于在 dropdown1 中选择的动态的。下面是我的这些下拉列表的代码。

```
<h:selectOneMenu id="group" label="group" value="#{queryBacking.groupInternalId}">
    <f:ajax event="valueChange" render="membership" />
    <f:selectItems value="#{supportBean.groupInstitutions}" var="group" itemValue="#{group.institutionInternalId}" itemLabel="#{group.institutionName}" />
</h:selectOneMenu>

<h:selectOneMenu id="membership" label="Membership" value="#{queryBacking.institutionInternalId}">
    <f:selectItem itemLabel="Select One" itemValue="0" />
    <f:selectItems value="#{queryBacking.groupMembershipInstitutions}" var="institution" itemValue="#{institution.institutionInternalId}" itemLabel="#{institution.institutionShortName}" />
</h:selectOneMenu> 
```

我的代码效果很好，除了如果您提交表单然后单击后退按钮，dropdown2 不包含任何值。如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:26:44.727

你的意思是浏览器中的后退按钮对吗？

浏览器可能会从浏览器缓存中加载页面。因此，您需要使用过滤器禁用缓存：

```
public class NoCacheFilter implements Filter {
    private FilterConfig config;

    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        HttpServletRequest httpReq = (HttpServletRequest) request;
        HttpServletResponse httpRes = (HttpServletResponse) response;

        if (!httpReq.getRequestURI().startsWith(
                httpReq.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { 

            httpRes.setHeader("Cache-Control",
                    "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            httpRes.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            httpRes.setDateHeader("Expires", 0); // Proxies.
        }

        chain.doFilter(request, response);
    }

    @Override
    public void destroy() {
        config = null;
    }

    @Override
    public void init(FilterConfig config) throws ServletException {
        this.config = config;
    }
} 
```

然后将其添加到 web.xml：

```
<filter>
  <filter-name>NoCacheFilter</filter-name>
  <filter-class>yourpackage.NoCacheFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>NoCacheFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

您可以指定要过滤的页面`<url-pattern> </url-pattern>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:08:45.190

您可以在 bean 构造函数中初始化页面的值：

TestBean 类

```
@ManagedBean
@ViewScope
public class TestBean {
    private String name;

    public TestBean() {
        //initialize the name attribute

        //recover the value from session
        HttpSession session = (HttpSession)FacesContext.getCurrentInstance()
            .getExternalContext().getSession(false);
        name = session.getAttribute("name");
        if (name == null) {
            name = "Luiggi";
        }
    }

    public String someAction() {
        //save the value in session
        HttpSession session = (HttpSession)FacesContext.getCurrentInstance()
            .getExternalContext().getSession(false);
        session.setAttribute("name", name);
        return "Test";
    }

    //getters and setters...
} 
```

测试.xhtml

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">
    <h:body>
        <h:outputText value="Hello " />
        <h:outputText value="#{testBean.name}" />
        <h:form>
            <h:outputText value="Write your name: " />
            <h:inputText value="#{testBean.name}" />
            <br />
            <h:commandButton value="Change name" action="#{testBean.someAction}" />
        </h:form>
    </h:body>
</ui:composition> 
```

添加示例以在导航到 Text.xhtml 之前删除会话属性

SomeBean 类

```
@ManagedBean
@RequestScope
public class SomeBean {
    public SomeBean() {
    }
    public String gotoTest() {
        //removes an item from session
        HttpSession session = (HttpSession)FacesContext.getCurrentInstance()
            .getExternalContext().getSession(false);
        session.removeAttribute("name");
        return "Test";
    }
} 
```

SomeBean.xhtml

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">
    <h:body>
        <h:form>
            <!-- Every time you navigate through here, your "name" 
                 session attribute will be removed. When you hit the back
                 button to get Test.xhtml you will see the "name"
                 session attribute that is actually stored. -->
            <h:commandButton value="Go to Test" action="#{someBean.gotoTest}" />
        </h:form>
    </h:body>
</ui:composition> 
```

# ios - 重新加载视图时不会调用 UIView 动画

> ID：10520209
> 
> 赞同：0
> 
> 时间：2012-05-09T16:26:18.420
> 
> 标签：ios, animation, core-animation

我已经编写了以下动画，`UIImageView`当我加载视图时效果很好：

```
-(void) viewDidAppear:(BOOL)animated{
    [UIView animateWithDuration:2
                          delay:0
                        options:UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                     animations:^{
                         hat.transform = CGAffineTransformMakeRotation(0.2);
                     }completion:nil
     ];

} 
```

然后我在这个视图上推了一个新的视图控制器，但是当我弹出这个新的视图控制器时，动画不会触发……我试过把这个动画代码放进去`viewDidload`，`viewWillAppear`但这没有帮助…… 。 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:30:52.103

UIImage 视图是否有可能被卸载？如果你还没有尝试为你的 UIImageView 设置 strong/retain 属性。

# android - Android 与 mySQL 连接，Eclipse？

> ID：10520216
> 
> 赞同：0
> 
> 时间：2012-05-09T16:26:31.243
> 
> 标签：android

我只是有一个小问题..

我想知道**Android**与**MySql**的连接，因为我知道 Android 与 MySql 之间没有任何直接连接，我们需要使用**JSON**或任何其他库来连接。好吧，使用 JSON 并使用一些 PHP 文件对其进行配置，到目前为止，这是我们可以从 mysql 获取和查询数据的唯一方法吗？这种方式是否可取？？？或者还有其他方法如何将数据从 mysql 获取到 listview 或 Android 中的任何位置？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:39:05.133

您可以将 mysql JDBC 驱动程序部署到您的 Android 应用程序中。有几个博客向您展示了如何做到这一点。我无法判断它的功能性。请记住，如果您希望 Android 设备直接连接到您的 mysql 服务器，您需要将 mysql 服务器直接公开到 Internet。一般不建议这样做。此外，在 mysql 和设备之间流动的数据将是未加密的。

本质上，这样做会将您的架构移回客户端服务器模型。如果您以后想要支持 iPhone、黑莓或 Windows 移动设备，则必须让这些设备也直接连接到 mysql。通过使用 web 服务，甚至您自己定制开发的服务器，您可以消除对 MySQL 驱动程序的依赖。从长远来看，这可能是一个更好的模式。

然而，选择是你的。

# ruby - 从现有数据库生成数据映射器模型

> ID：10520219
> 
> 赞同：3
> 
> 时间：2012-05-09T16:26:51.573
> 
> 标签：ruby, ruby-on-rails-3, orm, ruby-datamapper

是否可以使用 datamapper 从现有的数据库模式生成模型？因此，要做迁移的逆操作，它采用模型并生成 sql。我想要的是给定一个数据库模式来生成模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:35:45.227

尝试检查[https://github.com/yogo/dm-reflection](https://github.com/yogo/dm-reflection)或其任何分叉..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:57:04.617

最后，我发现到目前为止最好的解决方案是使用[`dm-is-reflective`插件：https://github.com/godfat/dm-is-reflective](https://github.com/godfat/dm-is-reflective)。

它不会为反映现有数据库模式的 DataMapper 模型生成代码，但它的属性访问方法是自动可用的（当然，只要你继续使用这个插件）。

这是一个使用示例：

```
require 'data_mapper'
require 'dm-is-reflective'

DataMapper.setup(:default, "postgres://user:pwd@localhost/db")

class Table
   include DataMapper::Resource

   is :reflective #activate dm-is-reflective

   reflect #reflects eeach property. You can be more specific (look at plugin documentation)
end

DataMapper.finalize

#Even if no field is defined, all of them are accessible
entry = Table.first(nil, {:id => 469})
print entry.anotherField 
```

# ruby-on-rails - 使用来自 git clone 的 spree 进行捆绑安装的问题：

> ID：10520221
> 
> 赞同：1
> 
> 时间：2012-05-09T16:26:56.847
> 
> 标签：ruby-on-rails, rvm, bundler, spree, gemfile

错误消息：Bundler 找不到 gem "spree_core" 的兼容版本：

```
 *In Gemfile:
    spree_paypal_express (>= 0) ruby depends on
      spree_core (>= 1.0.0) ruby
    spree (= 0.50.2) ruby depends on
      spree_core (0.50.2)* 
```

当我做 rails --version 时，我得到：

```
git://github.com/shuber/sortable.git (at master) is not checked out. Please run `bundle install` 
```

已按照其他 StackOverflow 帖子的建议修改了 .bashrc 配置文件，“捆绑更新”给出了与上面第一个相同的错误消息。

```
Mac OS X Lion
Rails 3.0.7
ruby 1.8.7 (2011-02-18 patchlevel 334) [i686-darwin11.3.0], MBARI 0x6770, Ruby Enterprise Edition 2011.03 
```

'rvm gem list bundler' 仅返回 1.1.3 和 1.1.3，在我使用这个 git clone 的工作环境中，我有 bundler 1.1.3 和 1.0.22。

想法？目前还不确定该怎么做。我尝试删除 Gemfile.lock 并再次运行 bundle install ，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:29:29.010

您如何在 Gemfile 中指定 spree gem？错误消息似乎说您正在指定一个版本的“spree”（可能 = 0.50.2），而 spree_paypal_express 需要另一个版本（> = 1.0.0）。

我对bundler不太熟悉，所以不能肯定。也许发布您的 Gemfile 可以帮助我们为您找到更多潜在客户？

祝你好运！

# yii - 如何在 yii 中使用 join 创建条件

> ID：10520226
> 
> 赞同：3
> 
> 时间：2012-05-09T16:27:14.820
> 
> 标签：yii

我必须要桌子，一张是`profile`，另一张是`rating`。 `rating`有一个`profileid`作为主键`profile.id`的字段和一个带有评级值的字段。现在我想找到评分最高的字段并显示相应的配置文件。由于我是 YII 框架的新手，所以我遇到了麻烦。请帮我摆脱它。我在做什么如下所述。

```
$topRage=new CDbCriteria();
$topRage->select="*";
$topRage->alias="t1";
$topRage->order="rateing DESC";
$topRage->join="JOIN `ratings` ON `profile`.`id` = `t1`.`profileId`";
$topRage->limit="1"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:33:41.630

试试这个 ：

```
join='JOIN profile ON profile.id = t1.profileId'; 
```

如果你这样做：`Ratings::model()->findAll($topRage)`，那么评级表已经被查询，所以你需要加入配置文件表。

**编辑：**

对于回声，您需要这样做：

```
$echo "Rating id: ".$rating->id."|&nbspProfile Id: ".$rating->profile->id."|&nbspProfile Name: ".$rating->profile->name."|&nbspRating: ".$rating->ratingvalue; 
```

不要忘记`$rating`从控制器传递。

您也可以使用`find($topRage)`代替 the`findAll($topRage)`并删除`limit`，但这只是做同样事情的另一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:36:36.033

只查询不加入。

```
$topRage=new CDbCriteria();
$topRage->select="*";
$topRage->alias="t1";
$topRage->order="rateing DESC";
$topRage->limit="1";

$rating=Ratings::model()->findAll($topRage);
$profile=Profile::model()->findByPk($rating->profileId); 
```

# iphone - 您将如何打开存储在 iPhone 上的 PDF

> ID：10520227
> 
> 赞同：0
> 
> 时间：2012-05-09T16:27:16.673
> 
> 标签：iphone, objective-c, ios, ios4, ios5

我正在创建一个应用程序，它将其中一个屏幕下载为 PDF 并将其存储在 /var/mobile/Applications/B19F4B52-F19B-46F8-9CE0-FA4D4656367B/Documents/SecondScreen1.pdf 等位置。我不知道是什么这个位置是，我也想稍后打开这个 pdf。这意味着我希望用户能够轻松访问他的 PDF 等。这意味着将其存储在他可以访问的位置。我想知道如何指导路径或设法将其存储在其他一些应用程序存储中（例如照片等）。目前这是我存储我需要存储的文件的地方.. -

```
 NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

NSString* documentDirectory = [documentDirectories objectAtIndex:0];
NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

// instructs the mutable data object to write its context to a file on disk
[pdfData writeToFile:documentDirectoryFilename atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:33:38.407

您只能将其存储在您的应用程序沙盒文件层次结构中。文档文件夹通常是应可交换文件的推荐文件夹（例如通过 iTunes 访问）。但是您也可以创建自己的目录。您无法访问其他应用程序文件结构。我想你可以使用 iCloud 或 Dropbox。

但是为了让用户可以访问它，我会像你一样将它存储在文档中并启用 iTunes 文件交换。您还可以轻松地创建一个邮件编辑器，将您的 PDF 作为电子邮件发送。

# jquery - 如何在asp.net mvc3中回发后调用jquerybutton单击方法

> ID：10520228
> 
> 赞同：1
> 
> 时间：2012-05-09T16:27:17.547
> 
> 标签：jquery, asp.net-mvc-3

我使用 jquerymobile、asp.net mvc3、HTML5 开发了一个移动应用程序。我有一个场景，比如我需要使用对 localStorage 的 HTML5 API 支持将 guid 存储在浏览器的本地存储中。我需要将 guid 存储在浏览器的 localStorage 中，以防用户身份验证成功。如果用户身份验证不成功，则无需将 guid 存储在本地存储中。

所以这里我需要在用户认证成功后从服务器端调用jquery。

谁能帮我提供一个关于如何在回发事件后调用 jquery 方法的示例。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:42:25.403

您不需要“从服务器端调用 jQuery 调用”。根据您的“身份验证”调用的外观，您可以简单地将变量设置在身份验证成功页面上的本地存储中，或者如果您在回调上使用 .ajax 调用（两者都在客户端）。

添加到 localstorage 的参考： [将值保存到 HTML5 localStorage -> 在页面加载时填充](https://stackoverflow.com/questions/8018494/save-values-to-html5-localstorage-populate-on-page-load)

使用 ajax 调用回调进行身份验证的参考： [JQuery Mobile - 用户登录最佳实践](https://stackoverflow.com/questions/9237659/jquery-mobile-user-login-best-practice)

# jquery - 如何检查是否加载了 Jquery UI 主题？

> ID：10520238
> 
> 赞同：2
> 
> 时间：2012-05-09T16:28:00.373
> 
> 标签：jquery, jquery-ui, themes

最佳实践要求我的网站严重依赖 Jquery，并且它来自 Google 的 CDN 的 JQuery UI 应该有一个备用方案，以防 CDN 由于某种原因失败。

我的问题是，我该如何针对给定的主题执行此操作？如果重要的话，我使用的是 Redmond 主题。

目前我计划使用类似的代码：

```
 if(!jquery){//load local file instead; }
    else if(!jquery.ui){//load local file instead; } 
```

但如果可能的话，我也希望从谷歌加载主题文件。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:35:06.090

```
if (typeof jQuery=='undefined') { //check if jQuery is loaded
    console.log('no jQuery');
}else{ //if jQuery loaded
    if (typeof jQuery.ui=='undefined') { //check if jQuery UI is loaded
        console.log('no jQuery UI');
    }
} 
```

这是一个[FIDDLE](http://jsfiddle.net/adeneo/ZTyqe/)，切换左侧的库并检查控制台。

您需要一个间隔和一个超时来给库一个合理的加载时间。如果在几秒钟内未加载，请包含您自己的文件，或替换 src 属性以使用另一个 CDN。查看 Google 的分析代码或 Facebook 的插件等，了解如何在 head 部分插入新的脚本标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:44:51.767

使用[http://yepnopejs.com/](http://yepnopejs.com/)

它是一个资源加载器，也适用于 CSS 文件。试一试，他们的网页上有这个例子。

这也是一个重复的问题：

[如果 CDN 失败，如何回退到本地样式表（不是脚本）](https://stackoverflow.com/questions/7383163/how-to-fallback-to-local-stylesheet-not-script-if-cdn-fails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:36:45.377

您可以包含 CDN 参考，测试关键对象，如果它未定义，则：

1) 在您的服务器上托管文件（脚本和样式），如果 CDN 无法加载您的文件，则回退到这些文件。

2) ****推荐**** 使用现有的 CDN（亚马逊易于使用）并在 google cdn 无法正确加载时回退到这些文件。

# templates - 模板错误：未解决的外部和内部朋友类

> ID：10520241
> 
> 赞同：0
> 
> 时间：2012-05-09T16:28:03.543
> 
> 标签：templates, visual-c++, unresolved-external

我正在使用模板编写二叉搜索树。这个想法是我有一个带有虚拟运算符重载函数的纯抽象基类，用于将它与继承它的相同类型的其他类进行比较。这个类，或者更确切地说是从它继承的任何类，代表 BST 中的“键”。

一个很好的例子是我一开始就打算这样做，即将着色器源（在字符串中，从着色器文件中解析）作为值添加到 BST，键是类型`ShaderComparable`，它保存文件名着色器，用于 BST 中的关键比较。

问题是，当我编写代码时，它可以很好地编译，但只要我将 BST 类的一个实例粘贴到 main 中并尝试运行它，就会出现链接“未解决的外部”错误。

**代码**

*搜索树.hpp*

```
#pragma once

#include <stdint.h>
#include "Comparable.hpp"

namespace esc
{ 
    /*
     * NOTE: K must inherit from type 'Comparable', located in "Comparable.hpp"
     */

    template < typename TComparable, typename TValue > 
    class SearchTree
    {
    public:
        class Iterator;
    private:
        struct Node;
        typedef typename Node TNode;
    public:
        SearchTree( void );
        ~SearchTree( void );
    public:
        //TValue find( const TComparable& k );
        //TValue find( int32_t index );
        //TValue find( const Iterator& pIter );

        //Iterator begin( void ) const;
        //Iterator end( void ) const;

        void insert( const TComparable& k, const TValue& v );
        //void insert( const Iterator& pIter );

        friend class Iterator;
    private:
        int32_t mNodeCount;
        TNode* mRoot;
    public:
        class Iterator 
        {
        public:
            Iterator( void );   
            inline TNode* operator->( void ) const 
            { return mCurrentNode; }
        private:
            ~Iterator( void );
            int32_t getNumStepsLeftToLeaf( void );
            int32_t getNumStepsRightToLeaf( void );
            void tallyDirectionalComparison( int& numLeftTrue, int& numRightTrue, const TComparable& k );
            void insertLeft( const TComparable& k, const TValue& v );
            void insertRight( const TComparable& k, const TValue& v );
            bool isLeafNode( const Node*& a );
            bool isInternalNode( const Node*& node );
        private:
            TNode* mCurrentNode;
            int32_t mIterPosition;
            friend class Node;
        };
    private:
        struct Node
        {
        public:
            int32_t index;
            TComparable Key;
            TValue Value;
        private:
            TNode* mParent;
            TNode* mLeftChild;
            TNode* mRightChild;
        };
    };
} 
```

*搜索树.cpp*

```
template < typename TComparable, typename TValue >
    SearchTree< TComparable, TValue >::SearchTree( void )
        : mRoot( NULL ),
          mPosition( 0 ), 
          mNodeCount( 0 )
    {}

    template < typename TComparable, typename TValue >
    SearchTree< TComparable, TValue >::~SearchTree( void )
    {
        //TODO
    } 
```

源代码中有更多代码，我只是不想全部发布，希望避免歧义。迭代器定义通常是这样的：

```
template < typename TComparable, typename TValue >
void SearchTree< TComparable, TValue >::Iterator::insertRight( const TComparable& k, const TValue& v ) 
```

等等

**错误**

```
1>Main.obj : error LNK2019: unresolved external symbol "public: __thiscall esc::SearchTree<class esc::ShaderComparable,struct esc::Shader>::~SearchTree<class esc::ShaderComparable,struct esc::Shader>(void)" (??1?$SearchTree@VShaderComparable@esc@@UShader@2@@esc@@QAE@XZ) referenced in function _main

1>Main.obj : error LNK2019: unresolved external symbol "public: __thiscall esc::SearchTree<class esc::ShaderComparable,struct esc::Shader>::SearchTree<class esc::ShaderComparable,struct esc::Shader>(void)" (??0?$SearchTree@VShaderComparable@esc@@UShader@2@@esc@@QAE@XZ) referenced in function _main 
```

**问题**

为什么我会收到这些错误？我能做些什么来阻止这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:44:45.263

类模板成员函数体需要在标头（SearchTree.hpp）中，而不是在 .cpp 文件中。有关此问题的 Stack Overflow 规范响应，请参见[此处](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:05:00.537

我猜这是因为您已将一些析构函数设为私有。尝试将它们公开。

# jsf - JSF：转换错误设置值' '对于'空转换器'

> ID：10520245
> 
> 赞同：2
> 
> 时间：2012-05-09T16:28:16.667
> 
> 标签：jsf, jsf-2

对于我认为是一个非常简单的场景，我收到了 null Converter 错误：

```
<!-- My View -->
<ui:composition template="/template/template_v1.xhtml"
            xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html">
<!-- Simplified for clarity -->    
<h:form>
    <div class="block-panel customer-data">
        <h:outputLabel for="txtUsername">Username:</h:outputLabel>
        <h:inputText id="txtUsername" name="Username" 
                     value="#{userBean.user.id}"
                     styleClass="text" />
        <rich:message id="errorUsername" for="txtUsername"/>
    </div>
    <!--  Other fields omitted for clarity  -->
</h:form> 
```

```
/* The User Bean - simplified */
@ManagedBean
@ViewScoped
public class UserBean implements Serializable {
    private User user;

    public User getUser() {
        // Contains logic for reading a user from the database or creating a new
        // user object
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    } 
```

## }

```
/* The user Entity - Simplified */
@Entity
@Table(name = "user")
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "user_type", discriminatorType = DiscriminatorType.STRING)
public class User implements IEntity<String>, Serializable {
private static final long serialVersionUID = 1L;

    private String id;

    @Id
    @Column(name = "username", length = 50)
    @NotNull(message = "{userIdMandatory}")
    @Size(max = 50)
    public String getId() {
        return this.id;
    }

    public void setId(String id) {
        this.id = id;
    } 
```

## }

```
/* The IEntity interface */
public interface IEntity<ID extends Serializable> {
    ID getId();
    void setId(final ID pId);
} 
```

所以基本上我正在尝试将我的用户实体的字符串属性绑定到 inputText 字段。就我而言，应该不需要转换，所以我不应该得到我看到的错误。

有趣的是，如果我将以下 getter 和 setter 添加到我的实体中：

```
public String getTmpId() {
    return this.id;
}

public void setTmpId(String id) {
    this.id = id;
} 
```

然后对我的视图进行必要的更改以绑定到 tmpId 而不是 id，一切都按预期工作。

这对我来说似乎是一个错误，要么与我绑定到接口中定义的 getter/setter、在通用接口中定义的事实有关，要么因为 getter 标记有 Id 属性。不过，我会欣赏别人的想法。

顺便说一句，我继承了这个设计，并不特别喜欢它，所以我可能只是重构它以引入一个新的用户名属性，而不是尝试使用 Id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:57:56.973

据我所知，我认为这是由 BeanELResolver 中的一个模糊错误引起的，该错误用于获取绑定到的属性的类型 - 而不是返回 String，它返回的是 Serializable，没有转换器，因此错误我在看。

它不是特别优雅，但我通过向我的 userBean 添加一个 userId 属性然后在我的视图中绑定到它而不是用户实体上的 Id 属性来解决这个问题。然后，我在保存实体时使用该值在实体上手动设置 ID：

```
<!-- My New View -->
<ui:composition template="/template/template_v1.xhtml"
            xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html">
<!-- Simplified for clarity -->    
<h:form>
    <div class="block-panel customer-data">
        <h:outputLabel for="txtUsername">Username:</h:outputLabel>
        <h:inputText id="txtUsername" name="Username" 
                     value="#{userBean.userId}"
                     styleClass="text" />
        <rich:message id="errorUsername" for="txtUsername"/>
    </div>
    <!--  Other fields omitted for clarity  --> 
```

```
/* The New User Bean - simplified */
@ManagedBean
@ViewScoped
public class UserBean implements Serializable {
    private string userId;
    private User user;

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public User getUser() {
        // Contains logic for reading a user from the database or creating a new
        // user object
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public void saveUser() {
        if (user.getId() == null) {
            user.setId(userId);
        }
        // Actual saving omitted for brevity
    }
} 
```

# mysql - MySQL 查询将消息分组到对话中并在收件箱中显示第一个

> ID：10520246
> 
> 赞同：2
> 
> 时间：2012-05-09T16:28:19.403
> 
> 标签：mysql, database

例如，两个用户通过直接消息交谈，您将进行消息对话..我只想从该对话中选择最新消息，然后将其显示为他们的消息收件箱中的对话链接......就像 Facebook 和 Twitter消息工作。然后，他们可以单击最后发送的消息以查看整个对话。

我的消息表包含用户之间发送的所有消息，格式如下：

sourceUserId 是发送消息的用户 id，targetUserId 是接收消息的用户 id，body 是消息，time 是消息发送时间的时间戳。我将 body 保留为 abc... 和 time 1234 以使此示例保持简单，它们都是不同的值。

```
+----+--------------+--------------+--------+------+
| id | sourceUserId | targetUserId |  body  | time |
+----+--------------+--------------+--------+------+
| 1  |       1      |       2      | abc... | 1234 |
| 2  |       3      |       1      | abc... | 1234 |
| 3  |       3      |       1      | abc... | 1234 |
| 4  |       1      |       3      | abc... | 1234 |
| 5  |       2      |       1      | abc... | 1234 |
| 6  |       1      |       2      | abc... | 1234 |
| 7  |       3      |       1      | abc... | 1234 |
| 8  |       4      |       1      | abc... | 1234 |
| 9  |       5      |       4      | abc... | 1234 |
| 10 |       3      |       2      | abc... | 1234 |
+----+--------------+--------------+--------+------+ 
```

要获取一个用户的所有消息（发送和接收），我使用以下查询：

```
SELECT sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)  
FROM `usermessages`
WHERE targetUserId = 1
OR sourceUserId = 1
ORDER BY id DESC
LIMIT 10

+----+--------------+--------------+--------+------+
| id | sourceUserId | targetUserId |  body  | time |
+----+--------------+--------------+--------+------+
| 1  |       1      |       2      | abc... | 1234 |
| 2  |       3      |       1      | abc... | 1234 |
| 3  |       3      |       1      | abc... | 1234 |
| 4  |       1      |       3      | abc... | 1234 |
| 5  |       2      |       1      | abc... | 1234 |
| 6  |       1      |       2      | abc... | 1234 |
| 7  |       3      |       1      | abc... | 1234 |
| 8  |       4      |       1      | abc... | 1234 |
+----+--------------+--------------+--------+------+ 
```

**但**它返回同一消息对话的多个实例，而不仅仅是来自两个用户之间的对话的最新消息。以第 2,3 和 4 行为例，它们都将显示完全相同的对话。

我可以使用以下查询使查询仅适用于 targetUserId（用户收到的消息）：

```
SELECT sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)  
FROM `usermessages`
WHERE targetUserId = 1
GROUP BY sourceUserId
ORDER BY id DESC
LIMIT 10

+----+--------------+--------------+--------+------+
| id | sourceUserId | targetUserId |  body  | time |
+----+--------------+--------------+--------+------+
| 2  |       3      |       1      | abc... | 1234 |
| 5  |       2      |       1      | abc... | 1234 |
| 8  |       4      |       1      | abc... | 1234 |
+----+--------------+--------------+--------+------+ 
```

与此相反（用户发送的消息），请注意 WHERE 和 GROUP BY 刚刚交换：

```
SELECT sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)  
FROM `usermessages`
WHERE sourceUserId = 1
GROUP BY targetUserId
ORDER BY id DESC
LIMIT 10

+----+--------------+--------------+--------+------+
| id | sourceUserId | targetUserId |  body  | time |
+----+--------------+--------------+--------+------+
| 1  |       1      |       2      | abc... | 1234 |
| 4  |       1      |       3      | abc... | 1234 |
+----+--------------+--------------+--------+------+ 
```

但是如果我将这两个结果结合起来，`group by targetUserId, sourceUserId`然后它不会给出正确的结果，因为从 1 到 (2,3,4) 的所有传出消息都被分组了。

**我想退货**

我认为此类查询的伪代码是：

```
SELECT sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)  
FROM `usermessages`
WHERE sourceUserId = 1
OR targetUserId = 1
GROUP BY (If targetUserId != 1), (If sourceUserId != 1)
ORDER BY id DESC
LIMIT 10

+----+--------------+--------------+--------+------+
| id | sourceUserId | targetUserId |  body  | time |
+----+--------------+--------------+--------+------+
| 1  |       1      |       2      | abc... | 1234 |
| 2  |       3      |       1      | abc... | 1234 |
| 8  |       4      |       1      | abc... | 1234 |
+----+--------------+--------------+--------+------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:52:06.780

版本 2 这是未经测试的；它更接近但仍然不正确......虽然在这个工作上没有时间......

```
SELECT Um1.sourceUserId, Um1.targetUserId, um1.body,  UNIX_TIMESTAMP(um1.time)  
FROM usermessages um1
WHERE um1.time = 
   (Select max(um1.time) 
    FROM usermessages um2 
    where um1.sourceUserID = um2.sourceUserID 
      and Um1.targetUserID = Um2.targetUserID, 
      and UM1.Body = UM2.body 
      and (targetuserID = 1 or sourceuserID = 1))
Group by Um1.sourceUserId, Um1.targetUserId, um1.body
ORDER BY id DESC
LIMIT 10 
```

版本 1（小姐）IMO 您也需要按身体分组。

```
SELECT sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)  
FROM `usermessages`
WHERE targetUserId = 1
OR sourceUserId = 1
GROUP BY sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)
ORDER BY id DESC
LIMIT 10 
```

或使用不同的

```
SELECT distinct sourceUserId, targetUserId, body,  UNIX_TIMESTAMP(time)  
FROM `usermessages`
WHERE targetUserId = 1
OR sourceUserId = 1
ORDER BY id DESC
LIMIT 10 
```

我认为问题实际上在于这些记录的主体不同或时间戳不同；如果不是，那么为什么它们在表中重复？特别是在您的输出中，为什么记录 1 和 6 存在...您是否缺少可以防止重复的唯一索引/pk？

# asp.net-mvc-3 - 使用 javascript 代码访问 viewbag

> ID：10520248
> 
> 赞同：4
> 
> 时间：2012-05-09T16:28:44.483
> 
> 标签：asp.net-mvc-3

我在 ASP.NET mvc 项目中使用 aspx c# 作为视图引擎，我想使用 javascript 代码从 viewbag 中检索值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:31:31.590

我从像这样的剃刀视图中获取所有与viewbag相关的东西......

```
<script>
  var myJSVariable = @Viewbag.MyViewbagVariable;
</script> 
```

您可以为 MVC 视图引擎预剃刀执行以下操作，我相信

```
<script>
  var myJSVariable = <%Viewbag.MyViewbagVariable%>;
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:33:09.713

```
<script type="text/javascript">
    var yourVariable= @Html.Raw(Json.Encode(ViewBag.yourVariable))
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T19:21:52.440

如果您正在处理像字符串这样的简单内容，您可以将 viewbag 保存在 HTML 标记的 data-* 属性中，然后使用 JavaScript 来访问它。

# apache - 将特定 URL 重定向到备用页面

> ID：10520254
> 
> 赞同：0
> 
> 时间：2012-05-09T16:29:03.113
> 
> 标签：apache, redirect, rewrite

由于产品过期，我有一些现在是 404 的 URL，我需要将它们重定向到确实存在的相关页面。

例如

[http://www.example.com/package-product.php?id=72](http://www.example.com/package-product.php?id=72)到[http://www.example.com/best-sellers/](http://www.example.com/best-sellers/) [http://www.example.com/package-product.php? id=36](http://www.example.com/package-product.php?id=36)到[http://www.example.com/bedroom-furniture/](http://www.example.com/bedroom-furniture/)

等等

据我了解，由于 GET 参数，我无法使用 Redirect 301 执行此操作，而且我看到的重写示例似乎更通用，并为参数使用占位符 - 我需要发送一个特定替代的特定 URL。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:08:58.180

我可能会按照@BobLiu 建议的方式来做——即用PHP 本身来做。

如果你真的想要一个重写解决方案，那是不可能的，你可以查看 mod_rewrite 可用的 QUERY_STRING 变量：

```
RewriteCond %{QUERY_STRING} id=72$
RewriteRule ^.*$ http://www.example.com/best-sellers/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:34:29.527

为什么不在 package-product.php 页面上这样说：

switch ($_GET['id'])
{
case 72:
[做重定向 url1];

案例 36：
[做重定向 url2]；

等等……等等……
}

# php - 自动为 php 建议 ajax

> ID：10520255
> 
> 赞同：0
> 
> 时间：2012-05-09T16:29:03.757
> 
> 标签：php, jquery, ajax, autocomplete

我有一个 html 表单、php 脚本和 jquery。我需要一个 ajax 代码来从我的 php 脚本中进行自动建议。以下是代码...

**表单.html**

```
 <html>
    <head>
      <script src="jquery1.6.4.min.js" type="text/javascript"></script>  
      <script src="jquery.jSuggest.js" type="text/javascript"></script>  
      <link href="jSuggest.css" rel="stylesheet" type="text/css" />  
     </head>  
     <body>  
       <form id="form1" name="form1" method="post" action="#">  
          <input type="text" name="TagsInputField" id="TagsInputField"/>  
        </form>  
      </body>  
  </html> 
```

**测试.php**

```
 <?php 
      include("bc/script/core/dbcon.php");  
      $input = $_POST['TagsInputField'];  
      $data = array();  
      // query your DataBase here looking for a match to $input  
      $query = mysql_query("SELECT * FROM user WHERE username LIKE '%$input%'");  
      while ($row = mysql_fetch_assoc($query)) {  
        $json = array();  
        $json['value'] = $row['id'];  
        $json['name'] = $row['username'];  
        $data[] = $json;  
      }  
      header("Content-type: application/json");  
      echo json_encode($data);  
   ?> 
```

**jquery.jSuggest.js**

```
 $(function() {
    var dataSource = {
        items: [
            {
            value: "21",
            name: "Mick Jagger"},
        {
            value: "43",
            name: "Johnny Storm"},
        {
            value: "46",
            name: "Richard Hatch"},
        {
            value: "54",
            name: "Kelly Slater"},
        {
            value: "79",
            name: "Michael Jordan"}
        ]

    };

    $('#TagsInputField').jSuggest({
        source: dataSource.items,
        selectedItemProp: "name",
        seekVal: "name",
        selectionAdded: function(elem, data) {
            console.log(data.name);
        },
        selectionRemoved: function(elem, data) {
            console.log(data.name);
            elem.remove();
        }
    });
}); 
```

注意指针“源”它引用对象“dataSource.items”来读取建议。任何人都可以帮助我编写一个 ajax 代码来读取返回 json 的 php 文件的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:35:07.920

jSuggest 默认发出 GET 请求。您必须添加：

```
type: "POST" 
```

在规则中。

您的 jSuggest 规则中还有一些其他重大错误。您应该阅读文档：[http ://scottreeddesign.com/project/jsuggest](http://scottreeddesign.com/project/jsuggest)

# asp.net - 使用 .Net 的 HighchartsExport 库我得到空白页

> ID：10520256
> 
> 赞同：4
> 
> 时间：2012-05-09T16:29:04.600
> 
> 标签：asp.net, highcharts

我正在努力将 HighStock/HighCharts 嵌入我们的网站，我们希望用户能够导出图表，而无需将数据发送到 HighCharts 服务器以呈现 jpg/pdf/svg 等。我能找到的唯一 ASP.NET 包装器是[这个](https://github.com/imclem/Highcharts-export-module-asp.net)。这在本地演示版本中运行良好，但将其集成到我们的产品站点会为以下内容提供一个空白页面： http: [//oursite.com/path/where/called/HighchartsExport.axd](http://oursite.com/path/where/called/HighchartsExport.axd)

根据稀疏文档，我确认我已经添加了对所需 3 个 DLL 的引用。我们的网站已经使用了`requestValidationMode`所需的（2.0）。所以我只添加了 httpHandlers 项：

```
<add verb="POST" path="HighchartsExport.axd" type="Tek4.Highcharts.Exporting.HttpHandler, Tek4.Highcharts.Exporting"/> 
```

我不确定这里还需要什么才能使其正常工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:07:03.653

在将 SVG 发送到 ASP.NET 导出模块之前运行[chart.getSVG()可能会有所帮助。](http://api.highcharts.com/highcharts#Chart.getSVG%28%29)这将净化代表图表的 SVG。

当这个 asp 导出模块不适合您时，您可以考虑使用 PhantomJS 并使用 PhantomJS 的[Highcharts 转换脚本](https://github.com/highslide-software/highcharts.com/blob/master/exporting-server/phantomjs/highcharts-convert.js)运行 shell 命令。或者也许将此脚本作为内部网络服务器运行，并从您的 .NET 应用程序发出 POST 请求。这就是 Highcharts 的 java 导出服务器的一般工作方式。[在此处](http://docs.highcharts.com/#render-charts-on-the-server)阅读有关 Highcharts、PhantomJS 和导出到图像的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:56:50.047

我之前遇到过类似的问题，问题出在呈现的 HTML 的一部分中，导致导出时出错。如果您的图表 HTML 中有一个剪辑路径标签，请在导出前尝试将其删除。

# r - R：使用“段”命令在绘图点之间放置垂直线

> ID：10520257
> 
> 赞同：1
> 
> 时间：2012-05-09T16:29:07.173
> 
> 标签：r, vector, plot, point, segment

我有一个小数据框，我从中绘制 3 列以显示风险估计和 95% 置信区间。现在我将这 3 组向量显示为点，但我想使用“段”连接它们。

这是正在绘制的数据框的示例：

```
 Diagnosis  age.group X..change X..lower X..upper
1                    Dysrythmia All adults        16        0       35
2                 Heart failure All adults        -4      -20       14
3                        Asthma All adults        10       -5       28 
```

这是我的情节代码：

```
plot(dt[,4], pch="-", ylim=c(-20, 50), axes=F, ann=F, cex=1.5)
abline(h=0, col=1, lty=2)
points(dt[,3], pch=16, col="black", bg="black" )
points(dt[,5], pch="-", cex=1.5)
axis(1, at=1:10, lab=dt[,1], las=3, lwd=0, cex.axis=0.7, pos=-22)
axis(2, at=5*-20:54, las=1, cex.axis=0.7, cex.lab=0.7, col=1)
title(main="Risk estimates: All Adults", col.main="black", font.main=1)
title(ylab="Increase in risk (%)", col.lab=rgb(0,0.5,0))
box() 
```

点是估计值，破折号是置信区间。我想为每个诊断连接这三个点。我查看了 R 表示法，但它并不能帮助我弄清楚如何告诉 R 我想绘制连接的线段的哪些 xy“坐标”，因为我在这里使用了向量而不是值？谁能帮忙写一段代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:58:24.093

好的，所以你基本上想要绘制 CI。箭头命令可能更适合您想要的。这是一个简短的示例，适用于较低 CI 的内容。

```
plot(dt[,3], pch="•", ylim=c(-20, 50), axes=F, ann=F, cex=1.5, bty = 'o')
abline(h=0, col=1, lty=2)
arrows(1:3, dt[,3], 1:3, dt[,4], angle = 90, length = 0.08) 
```

因此，您可以省略额外的点命令和任何新的段命令。这一切都更加简洁。

但是，如果您坚持在您拥有的内容中添加细分，那只是......

```
segments(1:3, dt[,3], 1:3, dt[,5])
segments(1:3, dt[,3], 1:3, dt[,4]) 
```

# ios - 作为一名自由 iOS 开发者，您将如何从您的客户那里收取应用程序的版税？

> ID：10520259
> 
> 赞同：2
> 
> 时间：2012-05-09T16:29:20.293
> 
> 标签：ios, itunes

我刚刚为一位希望为其收费的客户完成了一个 iOS 应用程序，但他希望我在将其上传到 iTunes 后进行定期更新等。我已经收到了开发应用程序的付款。然而，作为定期更新的付款，我将按照他出售该应用程序的一定比例进行工作。这是我的第一份有偿工作的自由职业者，我不确定协议以及如何接收付款。

如果不询问每月的财务记录，或者只是相信他告诉我的金额正确，我怎么知道他从应用程序中收到了多少钱？

我没有看到任何关于 iOS 应用程序生产的业务方面的问题，所以如果这个问题不适合 SO，请告诉我，并可能将我引导到这个主题的更有针对性的论坛。我只是相信一定有几位经验丰富的自由开发者可以帮助我避免在客户面前犯初学者的错误。

干杯

# javascript - iPad - window.open("tel:555", "_top") 没有调用默认行为

> ID：10520261
> 
> 赞同：0
> 
> 时间：2012-05-09T16:29:26.850
> 
> 标签：javascript, ipad, call, invoke, window.open

我正在开发一个移动网站，需要在活动中调用移动电话`touchend`。在 iPhone 和 Android`window.open('tel:555', '_top')`上工作正常，调用电话。

在 iPad 上，默认行为是提供“添加到联系人”或“复制”选项。使用链接时，它工作正常，如`<a href='tel:555'>555</a>`

在 iPad 上尝试`window.open('tel:555', '_top')`时，我得到：

> 无法打开页面
> 
> Safari 无法打开页面，因为地址无效。

我也尝试过`setTimeout('window.location="tel:555";', 500);`How [to trigger click-to-call with javascript (iphone)](https://stackoverflow.com/questions/7237694/how-to-trigger-click-to-call-with-javascript-iphone)，同样的问题。

**有没有办法用 Javascript 调用默认行为？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:12:25.027

我相信这是正确的行为。

在[Apple URL Scheme Reference](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)中，他们特别说...

*如果设备上未安装电话应用程序，则打开电话 URL 会向用户显示适当的警告消息。*

我认为 iPod Touch 也会产生类似的错误。

# jquery - 使用 jQuery 启用/禁用 Gridview itemTemplate 控件

> ID：10520265
> 
> 赞同：1
> 
> 时间：2012-05-09T16:29:35.677
> 
> 标签：jquery, asp.net

这是我在 asp.net 中的`[checkbox]`代码`[dropdownlist]`......

```
var $ddls = $('select');
$ddls.prop("disabled", true); 
```

**我的问题**是：如何仅在选中复选框时启用下拉菜单？如果未选中该复选框，则禁用下拉菜单

```
<asp:GridView ID="routePlanGridView" runat="server" AutoGenerateColumns="False" 

    <Columns>          
         <asp:TemplateField HeaderText="Reason">
        <ItemTemplate> 
            <div class="selectreason">
                <asp:CheckBox CssClass="selectme" ID="chkReject" runat="server" Checked="false">
                </asp:CheckBox>
                <asp:DropDownList runat="server" ID="detail" >
                    <asp:ListItem Selected="True" Value="0">Select me</asp:ListItem>
                    <asp:ListItem Value="1">one</asp:ListItem>
                    <asp:ListItem Value="2">two</asp:ListItem>
                    <asp:ListItem Value="3">three</asp:ListItem>
                    <asp:ListItem Value="4">four</asp:ListItem>
                </asp:DropDownList>
            </div>
        </ItemTemplate> 
    </asp:TemplateField>

    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:55:14.010

不完全确定，但我认为您可以使用`JQuery` [.change()](http://api.jquery.com/change/)或.click( [)](http://api.jquery.com/click/)到`check-box`.

```
$('.selectme').change(function() {  
  var ddl = $(this).siblings("input[type='select']");

  if ($('this').is(':checked'))
  {
       $('ddl').attr('disabled', false);
  }
  else
  {
       $('ddl').attr('disabled', true);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:51:08.157

我会在`RowDataBound`活动中这样做。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    var chk = e.Row.FindControl("CheckBox1") as CheckBox;
    if (chk != null)
    {
        var ddl = e.Row.FindControl("DropDownList1") as DropDownList;
        if (ddl != null)
        {
            //assign the JavaScript function to execute when the checkbox is clicked               
            //pass in the checkbox element and the client id of the select
            chk.Attributes["onclick"] = string.Format("toggleSelectList(this, '{0}');", ddl.ClientID);
        }
    }
} 
```

该`toggleSelectList`函数看起来像这样：

```
toggleSelectList = function(el, selectID){
    var selectElement = document.getElementById(selectID);
    if (selectElement){
        selectElement.disabled = !el.checked;
    }
} 
```

# javascript - 从谷歌地图帮助中删除标记 - JavaScript

> ID：10520267
> 
> 赞同：0
> 
> 时间：2012-05-09T16:29:40.140
> 
> 标签：javascript, jquery, google-maps

当用户按下按钮时，我试图从我的地图中删除所有标记，这听起来应该很简单，所以我可能错过了一些非常愚蠢的东西。

我有一个全局数组将它们全部存储在：

```
var markersArray = []; 
```

然后我将所有标记添加到地图中，并将它们推送到数组中：

```
var marker = new google.maps.Marker({
        map: map,
        position: new google.maps.LatLng(lat, lng),
        title: description,
        icon: image,
        shadow: shadow,
        shape: shape
    });

  markersArray.push(marker); 
```

最后我声明了一个应该从数组中删除所有标记的函数：

```
google.maps.Map.prototype.deleteOverlays = function() {
if (markersArray.length) {
    var i;
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
} 
```

然而，这根本不起作用，经过无数小时的摆弄，我完全迷失了。我哪里错了？

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:38:09.447

在 for 循环之后将 maps.markers 设置为一个空数组，以通过添加以下行来清除标记：

```
this.markers = new Array(); 
```

或者

```
this.markers = []; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:44:44.670

您的数组迭代器是错误的（并且效率低下）。
您正在遍历数组的属性，而不是元素。

请看下面修改后的代码：

```
google.maps.Map.prototype.deleteOverlays = function() {
if (markersArray.length) {
    for (var i = 0, end = markersArray.length; i < end; i++) {
      markersArray[i].setMap(null);
    }
    markersArray = new Array(); //like Scorpion-Prince said
  }
} 
```

我已经这样做了，没有任何问题，而且效率也很高：

```
clearMarkers = function(){
    var marker;
    while( marker = markers.pop() ){
        marker.setMap(null);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:07:53.587

我整理了一个独立页面，仅更改标记选项（未知引用）。关键部分似乎是调用删除的位置。它必须能够引用地图变量。`map.deleteOverlays();`

这是 JS Fiddle 和代码：

[http://jsfiddle.net/VUfEy/](http://jsfiddle.net/VUfEy/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      var map;
      var markersArray = [];
      var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        google.maps.event.addListener(map, 'click', function(e) {
          addMarker(e.latLng);
        });
        document.getElementById("delete").onclick = function() { 
          map.deleteOverlays(); 
        };
      }

      function addMarker(latLng) {
       var marker = new google.maps.Marker({
        map: map,
        //position: new google.maps.LatLng(lat, lng),
        //title: description,
        //icon: image,
        //shadow: shadow,
        //shape: shape
        position: latLng
       });
       markersArray.push(marker);
      }

      google.maps.Map.prototype.deleteOverlays = function() {
       if (markersArray.length) {
        var i;
        for (i in markersArray) {
          markersArray[i].setMap(null);
        }
        markersArray.length = 0;
       }
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <button id="delete">delete overlays</button>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# ruby-on-rails - Rails3 ActionView 模板处理程序在生产服务器上不起作用

> ID：10520269
> 
> 赞同：14
> 
> 时间：2012-05-09T16:29:56.940
> 
> 标签：ruby-on-rails, ruby, production-environment, actionview

我正在使用 Rails 3.2.3 / Ruby 1.9.3p125 / jbuilder (0.4.0)

在我`view/mycontroller`的文件夹中，我有一个`show.json.jbuilder`文件。当我在本地机器上测试所有东西时`rails s -e production`一切正常。JSON 按预期呈现。

但是当我部署到 Ubuntu LTS (nginx/unicorn) 时，我收到以下错误消息：

```
ActionView::MissingTemplate (Missing template mycontroller/show, application/show with {:locale=>[:de, :en], :formats=>[:json], :handlers=>[:erb, :builder]}. Searched in:
  * "/home/deployer/apps/myapp/releases/#############/app/views"
): 
```

当我检查我的服务器时，如果安装了 jbuilder gem，`bundle show jbuilder`一切似乎都正确。

奇怪的是错误消息没有显示`:handlers=>[:erb, :builder, :jbuilder]` jbuilder 处理程序显然丢失了。但是我该如何解决这个问题？

**编辑：**问题不是基于 Jbuilder。我尝试了 rabl 并出现了同样的问题。

有没有人有提示，如何调试这个？

**这里有更多信息：**

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'jquery-rails'
gem 'mysql2'
gem 'simple_form'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass', '2.0.2'
end

# Use unicorn as the app server
gem 'unicorn'

# Deploy with Capistrano
gem 'capistrano'

# for performance monitoring
gem 'newrelic_rpm'

# use asset pipline and flash
gem 'swf_fu', '~> 2.0'

gem 'geocoder'

# To use Jbuilder templates for JSON
gem 'jbuilder' 
```

控制器

```
 def show

  end 
```

show.json.jbuilder - 文件

```
 json.(@map, :id) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:16:18.383

你的 jbuilder 似乎被跳过了。

jbuilder 在您的 Gemfile.lock 文件中吗？

```
cat Gemfile.lock | grep jbuilder 
```

如果丢失：

```
RAILS_ENV=production bundle update jbuilder 
```

jbuilder可以加载吗？

```
RAILS_ENV=production bundle exec rails console
> require 'jbuilder'
=> false  # this is false if jbuilder is pre-loaded 
```

你可以在控制台中构建吗？

```
> Jbuilder.encode{|j| j.foo :bar }
=> "{\"foo\":\"bar\"}" 
```

你能建立你的控制器动作吗？

```
def the_method_you_are_testing
   raise Jbuilder.encode{|j| j.foo :bar }
end 
```

您是否在不同的服务器设置中看到相同的错误，例如 Apache 和Passenger 而不是 Nginx 和 Unicorn，或者只是 rails 服务器？

```
rails server -e production 
```

如果您将服务器应用程序从生产更改为开发，您会得到相同的结果吗？

```
rails server -e development 
```

对于 RABL，您可以尝试将 RABL gem 放在 Gemfile 的*最后*吗？

```
gem 'rails'
#...
gem 'rabl' 
```

在要求建造者后立即尝试注册？

```
require 'tilt'
require 'rabl'
# ...
require 'builder'
Rabl.register! 
```

您使用 RABL master 得到相同的结果吗？

```
gem 'rabl', :git => "git://github.com/nesquena/rabl.git" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T11:35:41.580

问题在于rails在生产中启动时的加载顺序。它需要在 jbuilder 中修复，但这里有一个解决方法：

宝石文件：

```
gem :jbuilder, :require=>false 
```

配置/初始化程序/jbuilder.rb：

```
require 'jbuilder' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T08:12:45.910

如果您碰巧使用的是[grape-jbuilder](https://github.com/milkcocoa/grape-jbuilder)，那么他们添加到configu.ru 的建议可能会导致您的问题。

如果您正在使用 Rails 和 grape-jbuilder，那么请确保在包含葡萄-jbuilder 之前首先需要 Rails 环境。

# 配置.ru

```
require ::File.expand_path('../config/environment', __FILE__)

require 'grape/jbuilder'

use Rack::Config do |env|
  env['api.tilt.root'] = 'app/views/api'
end

run Rails.application 
```

# java - XStream 编码损坏

> ID：10520270
> 
> 赞同：1
> 
> 时间：2012-05-09T16:29:56.957
> 
> 标签：java, encoding, xstream

我有一个简单的 java String 对象，想使用 XStream 对其进行序列化/反序列化。序列化效果很好，但是正如这个字符串用俄语写的那样，在反序列化之后，我发现字符串的编码被破坏了。

谁能告诉我这个Xstream问题还是文件问题，我需要用某种编码来写它。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:36:24.803

我认为这是因为使用较新的 XStream 版本，您需要将解码委托给 XML 流的 Reader，以便在解析时使用正确的编码方案正确解码。

看看这个，它可能会有所帮助：http: [//x-stream.github.io/faq.html](http://x-stream.github.io/faq.html)

为什么 XStream 不尊重 XML 声明中的编码？

XStream 架构基于 IO Readers 和 Writers，而 XML 声明则由 XML 解析器负责。自 1.3 版以来，所有 HierarchicalStreamDriver 实现都尊重编码，但前提是您提供了 InputStream。如果 XStream 使用 Reader，您必须自己使用适当的编码初始化 reader，因为现在执行编码是 reader 的任务，并且没有 XML 解析器可以更改 Reader 的编码，并且 XML 标头中的任何编码定义都将被忽略.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:36:26.343

查看[Xstream 常见问题解答](http://x-stream.github.io/faq.html)并搜索“编码”。看起来您必须提供自己的编写器才能获得非默认本地编码。

正如上面的评论，这个问题涵盖了它：

[如何使用 XStream 框架对 UTF-8 进行编码？](https://stackoverflow.com/questions/1211624/how-do-i-encode-utf-8-using-the-xstream-framework)

# iphone - 带有框架、图标和图像的自定义 MKAnnotationView

> ID：10520274
> 
> 赞同：12
> 
> 时间：2012-05-09T16:30:10.147
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我一直在寻找一个类似的解决方案来设计一个像这样的自定义 MKAnnotationView。

![在此处输入图像描述](../Images/0bbd2aa7d51716a8f7f0bd67a0fe8ed2.png)

我对 MKAnnotation 进行了子类化，并且能够添加一个名为 F.png 的图像，F.png 是一个帧图像，如图所示。我想要的是添加一个内部图像。（我画的图中蓝色）

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{    
if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;
static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
if(annotationView)
    return annotationView;
else
{
    MKAnnotationView *annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    annotationView.canShowCallout = YES;
    annotationView.image = [UIImage imageNamed:[NSString stringWithFormat:@"F.png"]];        
    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self action:@selector(writeSomething:) forControlEvents:UIControlEventTouchUpInside];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];

    annotationView.rightCalloutAccessoryView = rightButton;
    annotationView.canShowCallout = YES;
    annotationView.draggable = NO;
    return annotationView;
}
return nil;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T01:12:47.567

在你的代码中

```
else
{
    MKAnnotationView *annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    annotationView.canShowCallout = YES;

    //change here
    annotationView.image = [UIImage imageNamed:[NSString stringWithFormat:@"F.png"]];  

    UIImage *frame = [UIImage imageNamed:[NSString stringWithFormat:@"F.png"];
    UIImage *image = theImageInFrameInner;

    UIGraphicsBeginImageContext(CGSizeMake(pin.size.width, pin.size.height));

    [frame drawInRect:CGRectMake(0, 0, frame.size.width, frame.size.height)];
    [image drawInRect:CGRectMake(2, 2, 60, 60)]; // the frame your inner image
    //maybe you should draw the left bottom icon here, 

    //then set back the new image, done
    annotationView.image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self action:@selector(writeSomething:) forControlEvents:UIControlEventTouchUpInside];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];

    annotationView.rightCalloutAccessoryView = rightButton;
    annotationView.canShowCallout = YES;
    annotationView.draggable = NO;
    return annotationView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:59:05.947

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *AnnotationViewID = @"annotationViewID";

    MKAnnotationView *annotationView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

    if (annotationView == nil)
    {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID];
    }

    UIImage *imgPinBorder = [UIImage imageNamed:@"pinBorder.png"];
    UIImageView *imageViewPinBorder = [[UIImageView alloc] initWithImage:imgPinBorder];
    imageViewPinBorder.center = annotationView.center;
    [annotationView addSubview:imageViewPinBorder];

    UIImage *img = [UIImage imageNamed:@"myIcon.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:img];
    imageView.center = annotationView.center;
    [annotationView addSubview:imageView];

    annotationView.annotation = annotation;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self action:nil forControlEvents:UIControlEventTouchUpInside];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];

    annotationView.rightCalloutAccessoryView = rightButton;
    annotationView.canShowCallout = YES;
    annotationView.draggable = NO;

    return annotationView;
} 
```

# jquery - jquery移动滑块的半圆形

> ID：10520275
> 
> 赞同：1
> 
> 时间：2012-05-09T16:30:12.337
> 
> 标签：jquery, jquery-ui, jquery-mobile, slider

jQuery mobile中水平滑块的形状可以改成半圆形吗？

[http://jquerymobile.com/test/docs/forms/slider/](http://jquerymobile.com/test/docs/forms/slider/)

我正在查看 js 文件，但不知道如何处理它。我正在研究它，以便可以在 Android 应用程序中使用它。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-12T20:12:38.060

您可以使用 jQuery [roundSlider](http://roundsliderui.com/)插件，它也支持移动设备和触摸设备。

这个圆形滑块具有与 jQuery 移动滑块类似的选项。它支持默认、最小范围和范围滑块类型。不仅是圆形滑块，它还支持各种[圆形](http://roundsliderui.com/demos.html#various-circle-shapes)，例如四分之一圆形、半圆形和饼形圆形。

请从 中查看您的需求演示[**`jsFiddle`**](http://jsfiddle.net/soundar24/LpuLe9tr/4/)。

**输出截图：**

![jquery 圆形滑块 - 不同的圆形](../Images/8f7262d164ddba69e1af75f5360c72a4.png)

有关更多详细信息，请查看[演示](http://roundsliderui.com/demos.html)和[文档](http://roundsliderui.com/document.html)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:35:32.640

这是该小部件的初始化 HTML：

```
<div role="application" class="ui-slider  ui-btn-down-c ui-btn-corner-all">
    <a href="#" class="ui-slider-handle ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="33" aria-valuetext="33" title="33" aria-labelledby="slider-0-label" style="left: 33%; ">
        <span class="ui-btn-inner ui-btn-corner-all">
            <span class="ui-btn-text"></span>
        </span>
    </a>
</div> 
```

如您所见，它只是一个 DIV 元素。因此，您可以为 DIV 分配不同的背景图像以显示圆形轨道，但要让滑块以圆形方式移动会困难得多。

这是你的开始：

```
var mousedown = false;
$(document).delegate('.ui-slider-handle', 'mousedown mouseup mousemove', function (event) {
    if (event.type == 'mousedown') {
        mousedown = true;
    } else if (event.type == 'mouseup') {
        mousedown = false;
    } else if (mousedown) {
        var max     = 150,
            percent = (parseInt(this.style.left) / 100);
        this.style.top = (50 - (Math.sin(percent) * max)) + '%';
    }
});​ 
```

还有一个演示：http: [//jsfiddle.net/yRrYL/1/](http://jsfiddle.net/yRrYL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:47:35.457

我认为逻辑是当滑块移动时，您希望手柄在 x 轴上移动时在 y 轴上移动。假设该区域是一个正方形，并且您将半圆形背景图像作为轨道。您可以应用除 y 之外的 x 轴的逻辑，只要面积是正方形，计算就可以保持不变。这是一个很好的开始吗？

# c++ - 递归重启循环（C++）

> ID：10520278
> 
> 赞同：0
> 
> 时间：2012-05-09T16:30:20.053
> 
> 标签：c++, recursion, for-loop

我有一个关于 C++ 的问题。所以我制作了这个程序，它计算所有可能的组合以使用递归（而不是 9 个循环）来解决问题。这是代码的一部分：

```
int used[9];
nMin=1000;

void Combinations(int index)
    {
      if(index>8)
      {
        return;
      }
      for(int i=k;i<4;i++)
      {
        used[index]=i;
        if (sum<nMin && Check())//Checks the solution
        {
          nMin = sum;
          used[i]=0;
          return;
        }
        else
        {
          Combinations(index+1);
        }
      }
} 
```

每次递归调用返回时，应该重复 4 次的 for 循环重置。换句话说，循环变量设置为 0。这就是它的工作方式，我是否必须存储当前循环变量值，还是有其他方法。

编辑：谢谢你们，提供详细信息和您的答案。代码经过一些调整后工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:35:17.927

`int i`是一个存在于该函数调用实例的 for 循环上下文中的局部变量。当您对同一个函数进行递归调用时，您将在堆栈上推送该函数调用的全新实例，该实例具有自己的 for 循环和自己的`int i`变量。它们之间没有任何联系。

如果您希望对函数的所有递归调用共享一个计数器，则需要将其定义为静态变量，并将其定义在 for 循环范围之外，如下所示：

```
void Combinations(int index)
{
     static int persistentCounter; 
```

这将保持它在递归调用中的价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:35:45.157

如果我没看错，你的问题是循环变量是否`i`会被递归调用保护/保存`Combinations`。

答案是**肯定的，循环计数器的值将被保留**。原因是[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。每次调用函数时，堆栈都会为`i`当前调用范围内的新变量创建空间。`i`这意味着函数调用期间的所有交互都是`i`为该特定调用创建的。

注意：C/C++ 语言标准没有明确的堆栈概念。这实际上是实现自动存储的一个实现细节。

# javascript - 将根节点传递给 d3 树图布局时，它是否会被缓存？

> ID：10520280
> 
> 赞同：4
> 
> 时间：2012-05-09T16:30:25.830
> 
> 标签：javascript, d3.js, treemap

我试图让一个 d3 树图来制作动画，并且有类似的东西

```
App.svg = d3.select("#medals-tree-map").append("svg:svg")
    .style("width", App.canvasWidth)
    .style("height", App.canvasHeight)
  .append("svg:g")
    .attr("transform", "translate(-.5,-.5)")
    .attr("id", "container");

App.treemap = d3.layout.treemap()
    .size([App.canvasWidth + 1, App.canvasHeight + 1])
    .value(function(d) { return d.number; })
    .sticky(true);

function drawGraphFromJson(data) {
  // Draw the graph
  var leaves = App.treemap(data);

  var cell = App.svg.selectAll("g.cell")
    .data(leaves);

  // More rendering code
} 
```

基于这个答案：[https ://stackoverflow.com/a/9650825/111884](https://stackoverflow.com/a/9650825/111884)

`drawGraphFromJson`但是，当我使用新数据调用时，树形图根本不会改变。

我通过`App.treemap`在`drawGraphFromJson`ie 中定义来解决这个问题，

```
function drawGraphFromJson(data) {
  App.treemap = d3.layout.treemap()
    .size([App.canvasWidth + 1, App.canvasHeight + 1])
    .value(function(d) { return d.number; })
    .sticky(true);

  // Draw the graph
  var leaves = App.treemap(data);

  var cell = App.svg.selectAll("g.cell")
    .data(leaves);

  // More rendering code
} 
```

为什么我需要这样做？`treemap`传入根节点时是否会被缓存？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T16:56:20.067

是的，如果您设置`treemap.sticky(true)`. 请参阅[treemap.sticky](https://github.com/mbostock/d3/wiki/Treemap-Layout#wiki-sticky)的文档。

treemap.sticky 的期望是您使用相同的根节点作为布局的输入，但您更改值函数以改变子节点的大小。有关使用粘性树图布局更改值函数的示例，请参阅D3 网站上的[树图可视化。](http://mbostock.github.com/d3/ex/treemap.html)这种约束的原因是，对于粘性布局，树的拓扑不能改变——在同一层次结构中必须有相同数量的节点。唯一改变的是价值。

因此，如果您`drawGraphFromJson`使用两组不同的数据进行调用，那么您要么需要设置`treemap.sticky(false)`，要么需要将两个数据集合并到一个层次结构中，然后更改值函数以在两者之间进行动画处理。

Also: you haven't included your rendering code, so it's possible there's an error in your data join. However, I think the sticky explanation is more likely. See [Thinking with Joins](http://bost.ocks.org/mike/join/) for an explanation.

# lotus-notes - 为复选框字段添加值

> ID：10520281
> 
> 赞同：0
> 
> 时间：2012-05-09T16:30:29.350
> 
> 标签：lotus-notes, lotusscript

我在 Notes 文档上有一个复选框字段，用于标识流程中完成的步骤。如果用户在 TestDate 字段中输入一个值，我希望它在 Tasks 字段中选中“已测试”框。出于某种原因，如果已选中其他复选框，我无法弄清楚如何添加该值。

我尝试在验证中使用公式语言（@SetField）对其进行设置，将其作为 LotusScript QuerySave 中的后端字段更改并在 onChange 事件中使用 LotusScript。我确信这很简单，但今天我无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:34:32.480

在 LotusScript 中，您应该能够执行以下操作：

```
set item = doc.getFirstItem("Tasks")
call item.AppendToTextList("Tested")
call doc.save(true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:59:01.630

您应该能够使用您指定的任何方法，但您需要保留现有值：

```
@SetField("Tasks"; Tasks:"Tested"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T03:08:48.723

复选框：使用公式进行选择；

公式：

```
@SetField("checkbox";@GetField("QW"))

sub click (on button)
    Call ws.CurrentDocument.Document.ReplaceItemValue("QW",choices)

    Call ws.CurrentDocument.Refresh
end sub 
```

# facebook-graph-api - 未经用户授权发布到墙上

> ID：10520286
> 
> 赞同：1
> 
> 时间：2012-05-09T16:30:59.653
> 
> 标签：facebook-graph-api, token

我有一个网站和一个 Facebook 页面。我怎样才能做到这一点，以便在添加新文章时，用户以管理员身份（即我的身份）在页面墙上发布所需的文本；未经用户授权。是否可以使用我的登录名和密码获取 access_token？

# xaml - 如何在全屏模式下更改 Windows Phone Listpicker 的背景颜色

> ID：10520289
> 
> 赞同：1
> 
> 时间：2012-05-09T16:31:04.547
> 
> 标签：xaml, windows-phone-7, background, popup, listpicker

之前已经提出过这个问题，但提供的答案对我自己和其他人都不起作用。listpicker 的样式是由我无法让 Listpicker 的背景改变颜色（在本例中为黄色）提供的，尽管我尝试了我能想到的每个属性来改变它。代码有什么问题？

* * *

```
<Style TargetType="toolkit:ListPicker" x:Key="ListPickerStyle1">
    <!--<Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}"/>-->
    <!--<Setter Property="Background" Value="YellowGreen"/>-->
    <Setter Property="Foreground" Value="{StaticResource PhoneTextBoxForegroundBrush}"/>
    <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="Margin" Value="{StaticResource PhoneTouchTargetOverhang}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="toolkit:ListPicker">
                <StackPanel>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="PickerStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Expanded">
                                <Storyboard>
                                    <!--<ObjectAnimationUsingKeyFrames  Storyboard.TargetName="Border" Storyboard.TargetProperty="Background"                                         Duration="0">                                             <DiscreteObjectKeyFrame                                             Value="{StaticResource PhoneTextBoxEditBackgroundColor}"                                             KeyTime="0"/>                                         </ObjectAnimationUsingKeyFrames>-->
                                    <ObjectAnimationUsingKeyFrames   Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderBrush"  Duration="0">
                                        <DiscreteObjectKeyFrame  Value="Yellow" KeyTime="0"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames   Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderThickness"  Duration="0">
                                        <DiscreteObjectKeyFrame  Value="200" KeyTime="0"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <ContentControl   Content="{TemplateBinding Header}"  ContentTemplate="{TemplateBinding HeaderTemplate}"  
                                          Foreground="{StaticResource PhoneSubtleBrush}" FontSize="{StaticResource PhoneFontSizeNormal}" 
                                          HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"  Margin="0 0 0 8"/>
                    <Grid>
                        <!--<Border   x:Name="Border"   Background="Yellow" BorderBrush="{TemplateBinding Background}"  BorderThickness="2">-->
                        <Border   x:Name="Border"   Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding Background}"  BorderThickness="2">
                            <Canvas x:Name="ItemsPresenterHost" MinHeight="46">
                                <ItemsPresenter x:Name="ItemsPresenter">
                                    <ItemsPresenter.RenderTransform>
                                        <TranslateTransform x:Name="ItemsPresenterTranslateTransform"/>
                                    </ItemsPresenter.RenderTransform>
                                </ItemsPresenter>
                            </Canvas>
                        </Border>
                        <Popup x:Name="FullModePopup">
                            <!--<Border Background="{StaticResource PhoneChromeBrush}">-->
                            <Border Background="Yellow" BorderThickness="200">
                                <!-- Popup.Child should always be a Border -->
                                <Grid Background="Yellow">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <ContentControl   Grid.Row="0" Content="{TemplateBinding FullModeHeader}" Background="Yellow" 
                                                          Foreground="{StaticResource PhoneForegroundBrush}" 
                                                          FontFamily="{StaticResource PhoneFontFamilySemiBold}" FontSize="{StaticResource PhoneFontSizeMedium}"   
                                                          HorizontalAlignment="Left"  Margin="24 12 0 0"/>
                                    <ListBox  x:Name="FullModeSelector" Grid.Row="1"  ItemTemplate="{TemplateBinding ActualFullModeItemTemplate}" 
                                                  FontSize="{TemplateBinding FontSize}"  Margin="{StaticResource PhoneMargin}" Background="Yellow">
                                        <ListBox.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Background="Yellow"/>
                                                <!-- Ensures all containers will be available during the Loaded event -->
                                            </ItemsPanelTemplate>
                                        </ListBox.ItemsPanel>
                                    </ListBox>
                                </Grid>
                            </Border>
                        </Popup>
                    </Grid>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:04:50.293

为此，我创建了一个表示 的接口`ListPickerPage`，并将 Toolkit 中的任何代码引用更改为使用该接口 ( `IListPickerPage`)。

然后，我刚刚创建了一个新的`PhoneApplicationPage`，并复制并稍微修改了源（`xaml & xaml.cs`），（我实现了它`IListPickerPage`）

```
using System.Collections;
using System.Windows;
using System.Windows.Controls;

namespace Microsoft.Phone.Controls
{
    public interface IListPickerPage
    {
        string HeaderText { get; set; }
        IList Items { get; }
        SelectionMode SelectionMode { get; set; }
        object SelectedItem { get; set; }
        IList SelectedItems { get; }
        DataTemplate FullModeItemTemplate { get; set; }
        bool IsOpen { get; set; }
    }
} 
```

然后，当你想使用它时，你只需指定你自己的页面，通过设置`PickerPageUri`

```
<toolkit:ListPicker x:Name="lpStr"
                    Grid.RowSpan="2"
                                    Width="1"
                                    Height="1"
                                    CacheMode="BitmapCache"
                                    ExpansionMode="FullScreenOnly"
                                    Foreground="Black"
                                    FullModeItemTemplate="{StaticResource ListPickerStringLargeTemplate}"
                                    IsHitTestVisible="False"
                                    Opacity="0"
                                    PickerPageUri="/Views/Globals/ToolkitPages/MyListPickerPage.xaml" />
            </Grid> 
```

其余的只是自定义您自己的`ListPickerPage xaml`文件以满足您的要求。

# function - 如何在 MATLAB 中对录音机对象使用函数回调（'StopFcn'、'TimerFcn'）？

> ID：10520290
> 
> 赞同：2
> 
> 时间：2012-05-09T16:31:05.433
> 
> 标签：function, matlab, callback

我想在通过录音机对象录制期间执行函数'get_pitch（samples，fs，winsize，winshift）'。为此，我发现“函数回调”会有所帮助。

所以我尝试这段代码。

```
% assume fs,winsize,winshift is given.

T = 0.1; % in seconds
samples = cell{100,1};
r = audiorecorder(fs,16,1);
k=1;
r.TimerPeriod = 0.1;
r.StopFcn = 'samples{k} = getaudiodata(r);';
r.TimerFcn = {@get_pitch,samples{k},winsize,winshift};

while 1
     record(r,T);
     k=k+1;
end 
```

但是在执行过程中会发生以下异常。

1) 在record(r,T) 执行之后。（现在称为 StopFcn）？？？使用 ==> eval 未定义函数或变量 'r' 时出错。

2) StopFcn 调用后（现在调用TimerFcn） 在这个阶段，get_pitch 函数的参数完全错误。例如，位置 samples{k} 中的参数更改为“audiorecorder object”。

看来我不知道“StopFcn”和“TimerFcn”的确切用法。

有没有人可以给我一些建议？我非常感谢您的所有评论。

# mysql - MySQL 的 WHERE 子句中的 CASE 或 COALESCE 性能

> ID：10520293
> 
> 赞同：6
> 
> 时间：2012-05-09T16:31:14.420
> 
> 标签：mysql, sql, performance, null, case

我想知道在处理 WHERE 子句和 NULL 值中的多个条件时哪个是更好的性能或最佳实践。

```
WHERE
    u.id = COALESCE(user_id, u.id) AND
    su.custom_id = COALESCE(student_number, su.custom_id) 
```

或者

```
WHERE
CASE 
    WHEN user_id IS NOT NULL AND LENGTH(user_id) > 0
    THEN
        u.id = user_id 
    ELSE
        su.custom_id = student_number
    END 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T16:47:20.660

我会避免这两种方法。`AND`您应该能够通过明智地使用、`OR`、`IS NULL`和括号来完成您正在尝试做的事情。

例如，你可以重写这个：

```
WHERE
    u.id = COALESCE(user_id, u.id) AND
    su.custom_id = COALESCE(student_number, su.custom_id) 
```

像这样：

```
WHERE
    (user_id IS NULL OR u.id = user_id) AND
    (su.custom_id = student_number) 
```

你可以重写这个：

```
WHERE
CASE 
    WHEN user_id IS NOT NULL AND LENGTH(user_id) > 0
    THEN
        u.id = user_id 
    ELSE
        su.custom_id = student_number
    END 
```

像这样：

```
WHERE
(user_id IS NOT NULL AND LENGTH(user_id) > 0 AND u.id = user_id)
OR
(su.custom_id = student_number) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:42:42.317

我建议使用[解释](http://dev.mysql.com/doc/refman/5.5/en/explain.html)并查看您的查询计划。像：

```
explain <your select query here> 
```

# java - 在 selenium 中定位 WebElements 的子节点

> ID：10520294
> 
> 赞同：44
> 
> 时间：2012-05-09T16:31:22.593
> 
> 标签：java, selenium, xpath, webdriver

我正在使用 selenium 测试我的 Web 应用程序，并且可以使用`By.xpath`. 但是有时我需要在该节点中找到子节点。

例子：

```
<div id="a">
    <div>
        <span />
        <input />
    </div>
</div> 
```

我可以：

```
WebElement divA = driver.findElement( By.xpath( "//div[@id='a']" ) ) 
```

但现在我需要找到输入，所以我可以这样做：

```
driver.findElement( By.xpath( "//div[@id='a']//input" ) ) 
```

但是，在代码中我只有`divA`，不再是它的 xpath ......我想做这样的事情：

```
WebElement input = driver.findElement( divA, By.xpath( "//input" ) ); 
```

但是这样的功能是不存在的。我可以这样做吗？

顺便说一句：有时我需要找到一个`<div>`具有某个后继节点的节点。如何在 xpath 中询问“`<div>`包含`<span>`带有文本的 a `'hello world'`”？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-09T17:44:32.653

根据[JavaDocs](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)，您可以这样做：

```
WebElement input = divA.findElement(By.xpath(".//input")); 
```

* * *

> 我如何在 xpath 中询问“包含文本‘hello world’的跨度的 div-tag”？

```
WebElement elem = driver.findElement(By.xpath("//div[span[text()='hello world']]")); 
```

[XPath 规范](http://www.w3.org/TR/xpath/#path-abbrev)在这方面是一个令人惊讶的好读物。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-20T17:25:05.910

如果您必须等待，则有一种方法`presenceOfNestedElementLocatedBy`采用“父”元素和定位器，例如`By.xpath`：

```
WebElement subNode = new WebDriverWait(driver,10).until(
    ExpectedConditions.presenceOfNestedElementLocatedBy(
        divA, By.xpath(".//div/span")
    )
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T19:40:16.290

要查找所有子节点，您可以使用以下代码段

```
List<WebElement> childs = MyCurrentWebElement.findElements(By.xpath("./child::*"));

        for (WebElement e  : childs)
        {
            System.out.println(e.getTagName());
        } 
```

请注意，这将使所有子节点处于同一级别 - > 如果您有这样的结构：

```
<Html> 
<body> 
 <div> ---suppose this is current WebElement 
   <a>
   <a>
      <img>
          <a>
      <img>
   <a> 
```

它只会在这里给我 3 个锚标签的标签名称。如果你想要递归所有的子元素，你可以将上面的代码替换为 MyCurrentWebElement.findElements(By.xpath(".//*"));

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:17:34.087

几周前，我也发现自己处于类似的位置。您还可以通过创建自定义 ElementLocatorFactory（或简单地将 divA 传递到 DefaultElementLocatorFactory）来执行此操作，以查看它是否是第一个 div 的子项 - 然后您将调用适当的 PageFactory initElements 方法。

在这种情况下，如果您执行以下操作：

```
PageFactory.initElements(new DefaultElementLocatorFactory(divA), pageObjectInstance));
// The Page Object instance would then need a WebElement 
// annotated with something like the xpath above or @FindBy(tagName = "input") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-16T13:42:31.590

Selenium 的 By-Class 的 toString() 方法产生类似“By.xpath: //XpathFoo”的东西

所以你可以从冒号开始取一个子字符串，如下所示：

```
String selector = divA.toString().substring(s.indexOf(":") + 2); 
```

有了这个，你可以在你的另一个元素中找到你的元素：

```
WebElement input = driver.findElement( By.xpath( selector + "//input" ) ); 
```

优点：您只需在实际 SUT 上搜索一次，因此它可以为您带来性能奖励。

缺点：丑陋......如果你想用css选择器搜索父元素并使用xpath作为它的子元素，你必须在连接之前检查类型......在这种情况下，Slanec的解决方案（在WebElement上使用findElement）好多了。

# php - MongoDB 动态数据库选择/创建

> ID：10520296
> 
> 赞同：1
> 
> 时间：2012-05-09T16:31:43.860
> 
> 标签：php, mongodb

在 Mongo DB 中，您可以执行以下操作：

```
$m = new Mongo();
// select a database
$db=$m->databaseName;    // this creates/returns the db "databaseName" 
```

如何制作一个函数，使 dataBasename 作为动态变量传递？以下功能当前失败。

```
load_db("databaseName");    

function load_db($dbname)
{
$m = new Mongo();
$db=$m->$dbname;   // I have also tried {$dbname}, with no success.

return $db;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:43:03.903

您可以使用`$db = $m->selectDb( $variable );`： http: [//php.net/manual/en/mongo.selectdb.php](http://php.net/manual/en/mongo.selectdb.php)

# indexed - 在 indexeddb 数据库中存储数据的理想方式是什么？

> ID：10520297
> 
> 赞同：0
> 
> 时间：2012-05-09T16:31:46.673
> 
> 标签：indexed

我知道关系数据库如何存储数据。我知道 indexeddb 的基础知识（直到并包括编写一个覆盖 chrome 和 ff 之间差异的脚本）。我了解使用索引背后的原理，并且 indexeddb 存储 js 对象。

我想知道在使用 indexeddb 之类的平面数据库时是否应该使用一些设计模式。现在，我将每个“行”保存到 objectStore，然后通过其键或索引进行查找。保存一个巨大的对象而不是一堆行会更好吗？

还有，关系应该怎么处理？也就是说，应该如何弥合 RDBSM 与 indexeddb 等平面数据库之间的差距？

昨天做了个测试，写了11秒

```
params = {
    "user_id":"4",
    "first_name":"Bob Smith",
     "phone": "1-800-555-1212"
}; 
```

到数据库 100 次。我确实每次都打开了一个新交易，但这似乎仍然很长一段时间。测试在ff中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:52:22.973

结果出来了——这并不重要。

如果您以关系方式存储它，它的读写时间与自然关系数据库 (websql) 甚至只是键/值对 (localStorage) 的读写时间大致相同。

# javascript - 通过 Chrome 扩展程序中的内容脚本与页面脚本通信

> ID：10520299
> 
> 赞同：0
> 
> 时间：2012-05-09T16:31:59.263
> 
> 标签：javascript, google-chrome-extension, scope

我正在加载一个`1.js`内容`<script>`脚本`2.js`（`2.js`不能作为内容脚本包含在内。

有没有办法使用`2.js`从内部定义的变量`1.js`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:17:28.017

在背景页面和内容脚本之间使用[消息传递。](http://code.google.com/chrome/extensions/messaging.html)后台页面保存该值（通过`2.js`作为脚本加载，或者作为`2.js`应用程序的后台脚本本身）并使用`chrome.extension.onRequest.addListener`. 内容脚本发送请求，内容脚本发送具有所需值的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:05:18.210

我想通了。有点脏，但适用于我有问题的动态对象。

我只是通过将其注入页面来添加所有代码。这是我的内容脚本：

```
var path = document.createElement('div');
path.id = 'codearea-path';
path.innerHTML = chrome.extension.getURL('/');
path.style.display = 'none';
document.body.appendChild(path);

var script = document.createElement('script');
script.src = chrome.extension.getURL('1.js');
document.head.appendChild(script); 
```

然后我用同一种代码包含`2.js`在里面`1.js`。

# javascript - 如何将所有css文件放在一个文件中，将所有javascript文件放在一个文件中

> ID：10520302
> 
> 赞同：17
> 
> 时间：2012-05-09T16:32:09.683
> 
> 标签：javascript, css, web-applications, web

当我想包含任何新`CSS`文件或任何新`JS`文件时，我把它放在标题中

# css 文件

```
<link rel="stylesheet" href="<?php echo URL; ?>public/css/header.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/index.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/footer.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/signup.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/contactUs.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/option.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/question.css"  />
    <link rel="stylesheet" href="<?php echo URL; ?>public/css/profile.css"  /> 
```

# js文件

```
<script src=<?php echo URL . "public/Js/profile.js" ?>></script>
    <script src=<?php echo URL . "public/Js/cell.js" ?>></script>
    <script src=<?php echo URL . "public/Js/place.js" ?>></script>
    <script src=<?php echo URL . "public/Js/ontology.js" ?>></script>
    <script src=<?php echo URL . "public/Js/informativeObject.js" ?>></script>
    <script src=<?php echo URL . "public/Js/question.js" ?>></script> 
```

我想要类似的东西

```
<header> 
include all css
include all js
</header> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:35:44.773

[Minify](http://code.google.com/p/minify/)是一个 PHP 库，它将您所有的 CSS / JS 文件合并为一个。这些帮助有用？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:37:53.793

对于 CSS，您可以使用`@import`：

带有 CSS 的 HTML：

```
<style type="text/css">
@import url('index.css');
@import url('footer.css');
</style> 
```

独立的 CSS：

```
@import url('index.css');
@import url('footer.css'); 
```

浏览器将 JavaScript 作为`#include`AFAIK 包含在内，因此没有比通过`<script>`标签或使用 Wintermute 的 JS 缩小器示例将它们全部包含在内更好的方法了。

编辑： Crockford 的[JSMin](http://www.crockford.com/javascript/jsmin.html)是一个 CLI 实用程序，如果您想离线使用它，您可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:41:31.753

假设你有一个文件数组（使用本地文件系统路径）

```
print "<style type='text/css'>\n";
showall($css);
print "</style>";

function showall($filelist)
{
   foreach ($filelist as $fname) {
      print file_get_contents($fname) . "\n";
   }
} 
```

# mobile - 移动应用程序。平板电脑。田间的赫普勒

> ID：10520312
> 
> 赞同：2
> 
> 时间：2012-05-09T16:33:04.410
> 
> 标签：mobile, xpages

我有一个非常简单的应用程序，允许用户在 iPad 上输入数据。但是，当用户开始在文本字段中输入文本时（使用 xp:inputText），他会得到帮助文本，然后如果按下“空格”或“前进”（德语称为“ weiter”，希望这是正确的翻译）。因此，经常发生这种情况，当用户快速键入时，最后输入了错误的数据。

我不知道如何使用 iOs 自己的工具来避免它。如果有人告诉我，我将不胜感激。

而且，基本上，有没有办法至少关闭或最好*从*XPages 方面控制这些助手？

没有使用 TypeAhead...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:05:30.063

您可以通过向 xp:inputText 添加两个 html 属性来禁用这些功能：

*   自动大写=“关闭”
*   自动更正=“关闭”

您也应该检查自动完成选项。

希望这可以帮助

斯文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:58:45.590

这个例子应该有效。修改为使用这两种方法。字段 1 = (svens)，字段 2 = 运行时更改。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:inputText id="inputText1">
        <xp:this.attrs>
            <xp:attr name="autocorrect" value="off" rendered="true"></xp:attr>
            <xp:attr name="autocapitalize" value="off" rendered="true"></xp:attr>
        </xp:this.attrs></xp:inputText>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xp:inputText id="inputText2"></xp:inputText>
    <xp:eventHandler event="onClientLoad" submit="true"
        refreshMode="norefresh">
        <xp:this.script>
<![CDATA[document.getElementById("#{id:inputText2}").setAttribute("autocorrect", "off");
document.getElementById("#{id:inputText2}").setAttribute("autocapitalize", "off");
]]></xp:this.script>
    </xp:eventHandler>
</xp:view> 
```

# android - ActionBarSherlock - SherlockActivity 问题 - 找不到内容容器视图

> ID：10520320
> 
> 赞同：0
> 
> 时间：2012-05-09T16:33:32.117
> 
> 标签：android, actionbarsherlock

我已经按照 ActionBarSherlock 的描述完成了[设置。](http://actionbarsherlock.com/usage.html)我还添加了 ABS 作为库项目，并相信这可以按预期工作，因为 Eclipse 正在其包中查找对类的引用。我还在代码和 AndroidManifest.xml 中根据需要设置了主题：

代码：

```
import com.actionbarsherlock.app.SherlockActivity;

public class TestClass extends SherlockActivity{

Context myContext;

public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_Sherlock_NoActionBar); 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test); 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.danieljgmaclean.xxx"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/px_icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light" >
    <activity
        android:name="TestClass"
        android:label="@string/app_name"
        android:noHistory="true" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

但是在执行时，我抛出了以下异常：

```
Caused by: java.lang.RuntimeException: Couldn't find content container view 
```

正在呼吁：

```
com.danieljgmaclean.xxx.TestClass.onCreate(TestClass.java:23) 
```

我在 2.3.3 模拟器上运行代码，并将目标构建设置为 4.0.3，将 JDK 版本设置为 1.6。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:15:40.187

就我而言，问题是 res 内的“原始”文件夹，其中包含应用程序的数据库。所以我刚刚删除了文件夹，操作栏又开始工作了。现在的问题是我需要生的...

# asp.net - IIS 中的自定义错误消息

> ID：10520325
> 
> 赞同：0
> 
> 时间：2012-05-09T16:33:52.870
> 
> 标签：asp.net, vb.net, security, iis, asp-classic

在 IIS 5.1 中，我将网站安全设置为基本身份验证，并在 IIS 中设置了指向 c:\test.asp 文件的自定义错误页面。

当用户尝试访问网站时，出现用户名和密码屏幕，输入错误密码 3 次后，系统显示自定义错误页面，这很好，但为什么系统再次提示输入用户名和密码（连续 3 次） )?

我不希望自定义错误页面上的用户登录屏幕。

我试图将自定义错误页面放在默认网站上并将安全设置为匿名，但它仍然在自定义错误页面上显示登录屏幕。

无论如何要绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:05:02.467

我认为当发生未处理的异常或任何其他意外行为时，应该使用自定义错误页面。我认为你最好创建一个帐户锁定对话框或屏幕来通知用户他们输入了三次错误的密码并且它已被锁定。

至于您的登录屏幕，它是如何显示的？它是什么？听起来无论发生什么其他事情，它都会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:06:13.570

通过为错误 401 和 402 添加 html 页面解决了此问题。

# javascript - 在文本字段中显示下拉列表的选定值（javascript）

> ID：10520328
> 
> 赞同：6
> 
> 时间：2012-05-09T16:34:24.400
> 
> 标签：javascript, forms, drop-down-menu

例如：这些是下拉列表中的项目。

```
<select name="cmbitems" id="cmbitems">
    <option value="price1">blue</option>
    <option value="price2">green</option>
    <option value="price3">red</option>
</select> 
```

当用户选择蓝色时，我想在下面的文本字段中显示 price1 的值：

```
<input type="text" name="txtprice" id="txtprice" onClick="checkPrice()"> 
```

谢谢你的回答

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T16:44:21.907

您需要做的就是在 select.onchange 事件处理程序中将输入的值设置为选择的值。

```
var select = document.getElementById('cmbitems');
var input = document.getElementById('txtprice');
select.onchange = function() {
    input.value = select.value;
} 
```

[这](http://jsfiddle.net/jumpnett/jNGWX/)是 jsFiddle 演示的链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:39:30.003

如果您使用的是[jquery](http://api.jquery.com/val/)，请使用

```
$('select.foo option:selected').val();    // get the value from a dropdown select 
```

**更新（我忘了包括`<input>`人口）**

首先，在您的 html 文件中包含 jquery。

在`<header>`你包括它：

```
<header>
<script type="text/javascript" src="YOUR_PATH_TO_LIBRARY/jquery-1.7.1-min.js"></script>
</header> 
```

然后

```
<input type="text" name="txtprice" id="txtprice" onClick="javascript:$('select.foo option:selected').val();"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:41:10.970

这是查找当前选定选项、检查其值并使用其显示文本更新您的输入的蛮力方式。就像 Daniele 建议的那样，如果您可以使用 jquery，这将变得非常容易。但是，如果您出于任何原因不能使用 JS 框架，这应该可以满足您的需求。

```
<select name="cmbitems" id="cmbitems" onchange="updateTextField()">
 ...
</select>
<input type="text" ..... />

<script type="text/javascript">
function updateTextField()
{
    var select = document.getElementById("cmbitems");
    var option = select.options[select.selectedIndex];
    if (option.id == "price1")
    {
        document.getElementById("txtprice").value = option.text;
    }
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:44:32.410

```
$.on('change', '#cmbitems', function() {
    $('#txtprice').val($('#cmbitems option:selected').val());
}); 
```

# ios - 队列和主 ui 队列之间的变量访问

> ID：10520330
> 
> 赞同：0
> 
> 时间：2012-05-09T16:34:29.760
> 
> 标签：ios, multithreading, grand-central-dispatch

我创建了一个自定义队列，我在其中进行了一些处理，从而创建了一组对象，UITableView 使用这些对象重新加载自身。在我的应用程序中的某个地方调用了自定义队列，在处理之后我正在主 UI 队列中重新加载我的表视图。到目前为止一切顺利，但是当我的表视图重新加载时，再次调用自定义队列，从而修改了我的数组。所以我在 cellforrowatindexpath 方法中得到了预期的越界异常。如何摆脱 GCD 的此类并发问题。在这些类型的场景中使用什么规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:46:51.720

不要将表重新加载添加到您的主队列中，请尝试

`[self performSelectorOnMainThread:@selector(doSomething:) withObject:object waitUntilDone:YES]`

这将在主线程上重新加载表，但暂停您的自定义队列直到它完成，从而防止您遇到错误。

# c++ - 如何在 C++ 中将 char* 缓冲区包装在 WinRT IBuffer 中

> ID：10520335
> 
> 赞同：9
> 
> 时间：2012-05-09T16:34:50.837
> 
> 标签：c++, windows-runtime

我想实现一个包装 char* 缓冲区的 C++ WinRT IBuffer，因此我可以将它与接受 IBuffer^ 参数的 WinRT WriteAsync/ReadAsync 操作一起使用。

编辑1（澄清）

我想避免数据复制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T20:27:45.227

[主要从http://jeremiahmorrill.wordpress.com/2012/05/11/http-winrt-client-for-c/](http://jeremiahmorrill.wordpress.com/2012/05/11/http-winrt-client-for-c/)复制，但适用于直接包装我自己的字节[]：

NativeBuffer.h：

```
#pragma once

#include <wrl.h>
#include <wrl/implements.h>
#include <windows.storage.streams.h>
#include <robuffer.h>
#include <vector>

// todo: namespace

class NativeBuffer : 
    public Microsoft::WRL::RuntimeClass<Microsoft::WRL::RuntimeClassFlags<Microsoft::WRL::RuntimeClassType::WinRtClassicComMix>,
    ABI::Windows::Storage::Streams::IBuffer,
    Windows::Storage::Streams::IBufferByteAccess>
{
public:
    virtual ~NativeBuffer()
    {
    }

    STDMETHODIMP RuntimeClassInitialize(byte *buffer, UINT totalSize)
    {
        m_length = totalSize;
        m_buffer = buffer;

        return S_OK;
    }

    STDMETHODIMP Buffer(byte **value)
    {
        *value = m_buffer;

        return S_OK;
    }

    STDMETHODIMP get_Capacity(UINT32 *value)
    {
        *value = m_length;

        return S_OK;
    }

    STDMETHODIMP get_Length(UINT32 *value)
    {
        *value = m_length;

        return S_OK;
    }

    STDMETHODIMP put_Length(UINT32 value)
    {
        m_length = value;

        return S_OK;
    }

private:
    UINT32 m_length;
    byte *m_buffer;
}; 
```

创建 IBuffer：

```
Streams::IBuffer ^CreateNativeBuffer(LPVOID lpBuffer, DWORD nNumberOfBytes)
{
    Microsoft::WRL::ComPtr<NativeBuffer> nativeBuffer;
    Microsoft::WRL::Details::MakeAndInitialize<NativeBuffer>(&nativeBuffer, (byte *)lpBuffer, nNumberOfBytes);
    auto iinspectable = (IInspectable *)reinterpret_cast<IInspectable *>(nativeBuffer.Get());
    Streams::IBuffer ^buffer = reinterpret_cast<Streams::IBuffer ^>(iinspectable);

    return buffer;
} 
```

以及读取数据的调用（lpBuffer 是 byte[]）：

```
Streams::IBuffer ^buffer = CreateNativeBuffer(lpBuffer, nNumberOfbytes);
create_task(randomAccessStream->ReadAsync(buffer, (unsigned int)nNumberOfBytesToRead, Streams::InputStreamOptions::None)).wait(); 
```

我不太确定 ComPtr 是否需要一些清理，因此欢迎提出有关内存管理的任何建议。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-13T14:20:49.607

这应该有效：

```
// Windows::Storage::Streams::DataWriter
// Windows::Storage::Streams::IBuffer
// BYTE = unsigned char (could be char too)
BYTE input[1024] {};

DataWriter ^writer = ref new DataWriter();
writer->WriteBytes(Platform::ArrayReference<BYTE>(input, sizeof(input));
IBuffer ^buffer = writer->DetachBuffer(); 
```

# c# - 我应该同时实现客户端和服务器端验证吗？

> ID：10520341
> 
> 赞同：0
> 
> 时间：2012-05-09T16:35:08.783
> 
> 标签：c#, asp.net-mvc-3

我一直认为我应该在单击提交按钮时验证 JavaScript 上的表单数据，然后我应该验证在服务器端 C# 上提交的数据。

但现在我在想我可能不需要在 JavaScript 上验证表单数据？由于 Ajax 无论如何都不会重新加载页面，这意味着来自 JavaScript 的错误消息和来自 C# 的错误消息对于用户来说没有区别。

奇怪的想法？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T16:37:27.390

**始终**在服务器端实施验证。然后在考虑客户端验证之前确保此验证有效。原因是我看到很多人先实现客户端验证，然后忘记服务器端验证，以为他们正在验证某些东西。客户端验证不应真正被视为验证。它应该被视为可以改善用户体验（用户无需提交整个表单即可获得即时反馈）并保留带宽的东西。因此，如果您想要这个额外的，那么请继续实施客户端验证。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T16:37:44.813

您应该**始终**验证服务器端。

验证客户端是可选的以增加可用性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:36:48.013

一般来说，在服务器端和客户端都实现验证是一种很好的做法（即使只有服务器端验证是强制性的）。

原因是有人可以通过您的客户端验证破坏您的域完整性。

无论如何，客户端验证对于防止到服务器的往返很有用，即使客户端验证失败也是如此

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:40:54.733

如果您只需要做 1 个，那么服务器端肯定是要走的路。

尽管 Ajax 给用户一种页面没有发布的“错觉”，但您仍然会为您的网站生成 HTTP 流量，因此取决于您的托管情况，这可能会增加不必要的成本并增加您的 Web 服务器的负载。

我的 0.02 美分？有了今天所有不错的 JS 库，没有充分的理由不实施客户端验证。

# java - 在 C++ 中是否有像 Java 初始化块这样的结构？

> ID：10520342
> 
> 赞同：9
> 
> 时间：2012-05-09T16:35:10.037
> 
> 标签：java, c++

我在一些文章中读到，在 java 中有一种叫做 Initializing blocks 的东西；当加载类或创建实例时，我们可以在其中执行一些初始化分配。

> 除了方法和构造函数之外，初始化块是 Java 程序中可以执行操作的第三个地方。

```
class InitDemo
{
     static int y;
     int x;
 {
   y = 10;
   x =  0;
 }
} 
```

我在问 C++ 中是否有这样的范例？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:20:23.823

需要指出的是，Java中有两种不同形式的初始化块。`{...}`没有关键字的裸块`static`只是编译器的一点混乱——块中的文本被附加到任何定义的构造函数的前面——没有生成单独的代码段。另一方面，一个开始的块`static {...`是一个静态初始化块和一个（半）适当的过程本身（毫不奇怪，命名为“静态”）。

该`static`块只执行一次，在加载类后立即（有一些警告）。每次执行构造函数时都会执行非静态初始化程序（通过复制到构造函数中），因此通常不适合静态初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:39:19.603

简而言之，C++ 没有这个 Java 构造的直接等价物。

要获得类似的行为，您必须设置`x`and `y`from`InitDemo`的构造函数（您也可以在 Java 中这样做）。

# c - C中strlen的未处理异常

> ID：10520347
> 
> 赞同：1
> 
> 时间：2012-05-09T16:35:19.167
> 
> 标签：c, strlen

我已经在这个问题上停留了一段时间，我不是 C 方面的专家。基本上，我正在尝试制作一个函数，可以“安全地”将字符转换为现有的 char *。

我试图从这个例子中获得“动态分配”方法：

[在 C 中使用 strcat](https://stackoverflow.com/questions/419604/using-strcat-in-c)

我做了一些修改，我删除了由 realloc 函数设置的 var（编译器说它返回 void）。我还将它修改为仅附加一个字符而不是一组字符。我想这会改变“realloc”参数，所以我没有传递加法字符串的长度，而是传递了“sizeof(char)”（x2，因为原来有一个额外的 sizeof char，我认为是因为空终止符?)

```
char *buffer = NULL;

int mystrcat(char addition)
{
   realloc(buffer, strlen(buffer) + sizeof(char)*2);
   if (!buffer)
     return 0;
   strcat(buffer, addition);
   return 1;
} 
```

我这样称呼它：

```
if(!safestrcat(str[i+j]))
    printf("Out of Memory"); 
```

出于某种原因，我看到了这个：

> myProg.exe 中 0x60f0d540 (msvcr100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

调试器在第 81 行显示 strlen.asm：

```
main_loop:
    mov     eax,dword ptr [ecx]     ; read 4 bytes 
```

如果这是一个新手问题，我很抱歉，但发生了什么？为什么添加字符没有附加到缓冲区？

对不起，我应该补充一点，它编译成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:40:48.197

*   你忘记了一个论点
*   `sizeof(char)`根据定义为 1
*   你的`realloc`代码坏了
*   `strcat`不以 a`char`作为第二个参数
*   我只是返回新创建的字符串，`strcat`就像

```
char* mystrcat(char* buffer, char addition) {
    unsigned oldlen = strlen(buffer);
    buffer = realloc(buffer, oldlen + 2);
    if (buffer == NULL)
        return NULL;

    buffer[oldlen + 0] = addition;
    buffer[oldlen + 1] = '\0';
    return buffer;
} 
```

**但是**，要注意两点：

1.  您*必须*使用有效的、已初始化的指针调用`mystrcat`- 与`strcat`!
2.  在失败的情况下，函数返回`NULL`——在这种情况下，调用者有责任确保原始缓冲区的内存被释放。这意味着您不能将函数调用为

    ```
    buffer = mystrcat(buffer, 'x'); 
    ```

    – 这可能会导致内存泄漏。

所以正确的用法是：

```
char* something = "hello";
char* buffer = malloc(sizeof(something) + 1);
strcpy(buffer, something);

char* new_buffer = mystrcat(buffer, 'x');
if (new_buffer == NULL) {
    free(buffer);
    exit(1);
}

buffer = new_buffer; 
```

是的，令人费解。这是安全内存操作的代价。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:08:56.010

其他答案中已经给出了大量非常好的建议，但是您收到访问冲突的原因是`buffer`因为`NULL`. 然后你做`strlen(buffer)`。 `strlen()`工作原理是从传入的地址开始计数字符，直到到达`'\0'`. 因此，在您的情况下，您第一次取消引用空指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T16:38:27.027

您对 realloc 的调用已完全中断-您需要检查是否成功，然后将函数的结果重新分配给现有指针。

您还需要将 a`char *`作为第二个参数传递给`strcat`，而不是 a `char`。

改变：

```
int mystrcat(char addition)
{
   realloc(buffer, strlen(buffer) + sizeof(char)*2);
   if (!buffer)
     return 0;
   strcat(buffer, addition);
   return 1;
} 
```

至：

```
int mystrcat(char addition)
{
   char st[2] = { addition, '\0' };               // make temporary string to hold `addition`
   int len = buffer != NULL ? strlen(buffer) : 0; // NB: handle case where `buffer` has not yet been allocated
   char * tmp = realloc(buffer, len + 2);         // increase size of `buffer`
   if (!tmp)                                      // handle realloc failure
     return 0;
   buffer = tmp;
   strcat(buffer, st);                            // append `addition`
   return 1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:44:20.880

```
char * mystrcat(char *str, char addition)
{
   size_t len;
   len = strlen(str);
   str = realloc(str, len + 2);
   if (!str)
     return NULL; /* ... */
   str[len++] = addition;
   str[len] = 0;
   return str;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-05T05:37:35.430

```
char *mystrcat(char *buffer, char addition) {
    char *bb;
    size_t ll;
    ll = buffer ? strlen(buffer) : 0;
    bb = realloc(buffer, ll + 2);
    if(!bb){
      fprintf(stderr, "Memory exhausted in function: mystrcat !\n");
      exit(EXIT_FAILURE);
    }
    buffer = bb; // Safe!!!
    buffer[ll] = addition;
    buffer[ll+1] = '\0';
    return buffer;
} 
```

类似的东西。因此，如果没有记忆，您很可能在完成申请之前根本无法做任何事情。如果只是你的系统没有被关闭。

这是一个严重的错误！但是您可以看到此消息。肯定在日志中。如果传递错误的 prt 缓冲区，则无法保证正常工作。例如，如果您忘记设置空终止符。strlen 发生错误！

# jquery - 证实使用 jQuery Tools Validator 插件 我正在使用这个插件：http://jquerytools.org/documentation/validator/index.html 有谁知道如何使用它来验证选择元素？我添加了 required="required" 但未完成验证。我认为这可能是因为选择中总是有一个可用的选项值。文档说这个属性也适用于复选框和 <select>字段在谈论使用 required 属性时，我假设它应该可以工作。有任何想法吗？我成功地将 ID：10520348 赞同：0 时间：2012-05-09T16:35:25.273 标签：jquery 回答 #1 赞同：0 时间：2012-05-14T21:40:58.917 好的。。整理好了。我需要向主“选择”标签添加一个“模式”属性，就像我对普通“输入”标签所做的那样。</select>

# entity-framework - EF 可以选择多个转换后的集合吗？

> ID：10520353
> 
> 赞同：0
> 
> 时间：2012-05-09T16:35:53.680
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, ef-code-first

假设我有一个名为 Request 的实体，它具有如下子实体的集合：

```
public class Request
{
    public int RequestID { get; set; }

    //Navigation Properties
    public ICollection<Task> Tasks { get; set; }
    public ICollection<Question> Questions { get; set; }
} 
```

我想检索一个包含 Tasks 和 Questions 集合的对象，我可以这样做，`include()`但我不需要这些集合中的所有字段。

假设我只对从每个实体中检索名称`Task`和日期字段感兴趣。`Question`

我知道如何做到这一点的唯一方法是调用`select()`多个查询来检索每个转换后的集合。

有没有办法在一次访问数据库中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:43:55.717

您应该能够执行以下操作：

```
var requests = context.Request
                      .Select(r => new 
                              {
                                id = R.RequestID,
                                tasks = R.Tasks
                                         .Select(t => new
                                                      {
                                                        Name = t.Name,
                                                        Date = t.Date
                                                      });                  
                                questions = R.Questions
                                             .Select(q => new
                                                          {
                                                            Name = q.Name,
                                                            Date = q.Date
                                                          });                  
                              }); 
```

我很确定`Include`不需要，因为查询本身已经加入以返回加入的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:42:05.530

我确定这不是您正在寻找的内容，但这应该只是到数据库的一次往返，并且应该让您朝着正确的方向开始：

```
entitycontext.Requests.Select(t => new {
   TaskName = t.Questions.First().Name,
   QuestionName = t.Tasks.First().Name
}); 
```

# xml - 这是什么编码以及如何解码？

> ID：10520370
> 
> 赞同：1
> 
> 时间：2012-05-09T16:37:03.503
> 
> 标签：xml, encoding, xml-serialization, xml-parsing, base64

我正在使用 XML 文档，并且在处理设置日期和时间范围的某个元素中，我有这个字符串，它是一些用于编码的：

```
<CONTAIN>AQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAnkQAAAAADACeRA</CONTAIN> 
```

这种形式的字符编码对任何人来说都很熟悉吗？我的第一个想法是base64，但将其解码为base64会返回乱码。

我很想知道这是如何编码的以及如何解码它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:15:49.767

对我来说绝对看起来像 base64，只是有很多零。不要转换成字符串，转换成 byte[] 得到 42 个字节。它可以对表示为位的范围进行编码。有 42 字节 * 8 = 336 位。可以编码 2 周 * 24 小时或 14 * 24 = 336 个不同的小时。好巧合。

# scala - Scala Play 2.0 框架中的搜索表单提交和分页

> ID：10520372
> 
> 赞同：2
> 
> 时间：2012-05-09T16:37:11.610
> 
> 标签：scala, playframework, playframework-2.0

我正在制作一个具有基本搜索功能的网站。查询包含一些信息，所以我有一个`case class Query`包含搜索信息。可能会有很多结果，所以我需要支持分页。

这是处理表单提交的方法。我使用 GET，所以该页面是可收藏的。

```
 GET  /search   controllers.Application.submit

  def submit = Action { implicit request =>
    searchForm.bindFromRequest.fold(
      errors => BadRequest(views.html.index(errors)),
      query => doSearch(query, 0))
  } 
```

当我想支持分页时，问题就来了。我希望 URL 不改变，只`&page=i`添加一个参数。但是，我可能不想回到`submit`控制器上的操作（但也许我在这里错了）。

我怎样才能提供这个？如果我有单独的分页路线，我可以传递`Query`对象还是需要分解所有参数？

我的想法是，我的分页链接将转到类似于此的 URL：

```
@{Application.search(query, pageNo)} 
```

当然，我不能只将它提交到我的表单提交操作，因为它需要一个`play.api.mvc.Request[play.api.mvc.AnyContent]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:59:45.813

如果您创建自己的 Query 对象，则可以传递该对象`QueryBinders`。您可以查看[Play 中的内容](https://github.com/playframework/Play20/blob/843f0338fd00ec75d04972cccaf467914ab01762/framework/src/play/src/main/scala/play/api/mvc/Binders.scala)以了解如何操作。请记住将您的对象（具有隐含的对象`QueryBinders`）添加到文件中的变量`routesImport`中`Build.scala`。

另一种选择是遵循 Computers 示例的分页（在`samples`Play Framework 版本的文件夹中），它使用 GET 请求和一些参数在页面之间移动。

# xcode - 没有 iPhone，如何使用 XCode 截屏？

> ID：10520373
> 
> 赞同：10
> 
> 时间：2012-05-09T16:37:12.800
> 
> 标签：xcode, screenshot

我正在使用 Xcode 构建 iPhone / iPad 应用程序。现在我想截取这个应用程序的屏幕截图。

尺寸为 960x640。

那怎么办？模拟器屏幕太小

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T16:38:48.010

您可以使用`cmd+S`进入模拟器，它会捕获屏幕。

图像将保存到桌面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:14:35.247

在模拟器中导航到

> 硬件>>设备>>iPhone (Retina)

然后就可以用command-s在retina中截取模拟器画面，截图要求为640x960。

请记住，视网膜模拟器屏幕可能无法垂直适合您的屏幕，具体取决于其分辨率。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T16:50:36.430

您也可以使用 cmd+shift+4 来截取带有 iphone 框架的屏幕截图。

# jquery - 如何将 DOM 转储到变量中并将其从文档中分离（jQuery）

> ID：10520375
> 
> 赞同：0
> 
> 时间：2012-05-09T16:37:18.787
> 
> 标签：jquery

我需要这样做：

```
var tempDoc;
$(tempDoc).load('<html>' + $(document).find('html').html() + '</html>'); 
```

然后这样做：

```
$('body', tempDoc).css('background-color', ''); 
```

但是，当我这样做时，背景色去除也会影响 $(document)。有没有办法将 $(document) 转储到临时变量中并更改其中的元素而不影响 $(document) 本身？

请让我知道这是否有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:58:30.993

我认为我根本不明白这一点，但是您是否有理由不能这样做：

```
var tempDoc = $('html')​.clone();
$('body', tempDoc).css('background-color', 'green'); 
```

[小提琴](http://jsfiddle.net/adeneo/ZTyqe/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:41:30.490

使用 documentFragment 将 HTML 转储到，然后在不影响主文档的情况下更新属性，就像这样。

```
var fragment = document.createDocumentFragment();
fragment.append($(document).html());
$('body', fragment).css('background-color', ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:59:53.690

只需使用[.detach()](http://api.jquery.com/detach/)。它正是为此而设计的。

但它会有相同的行为，因为不知何故（我不明白为什么）你在操纵同一个身体对象。

DocumentFragment 是一个很好的解决方案。另一种方法是使用[.clone()](http://api.jquery.com/clone/)复制您的身体，并操作该副本。

[然后，您可以使用.replaceWith()](http://api.jquery.com/replaceWith/)将原始副本替换为修改后的副本。

```
var tempBody= $('body').clone(true);
tempBody.css('background-color', 'red');
$('body').replaceWith(tempBody); 
```

[http://jsfiddle.net/nezXL/](http://jsfiddle.net/nezXL/)

# java - FileService 用大文件耗尽内存

> ID：10520387
> 
> 赞同：1
> 
> 时间：2012-05-09T16:38:09.753
> 
> 标签：java, google-app-engine

在开发服务器上，我正在尝试使用 FileService api 将数据写入单个文件。
即使我写入少量数据，关闭文件（使用`close()`）也不会释放内存。我需要使用`closeFinally()`from`FileService`来释放内存。因此，我的猜测是整个文件都被缓存在内存中，直到`closeFinally()`被调用，如果我想在单个 blob 中写入一个大文件，这可能会导致一些问题。
有没有办法解决这个内存问题？

这是示例代码：

```
String veryLongString = "verryyyyllooooonnnnggggssssttttrrrriiiiinnnnnggggg";
for (int i = 0; i < 10; ++i) {
    veryLongString += veryLongString;
}
// veryLongString.length() => 51200 char

FileService FILESERVICE =
    FileServiceFactory.getFileService();

// Create new file
String newPath =
    FILESERVICE.createNewBlobFile("application/octet-stream").getFullPath();

for (int i = 0; i < 10; ++i) {
    System.out.println(i);

    // Open file for append
    AppEngineFile file = new AppEngineFile(newPath);
    FileWriteChannel writeChannel = FILESERVICE.openWriteChannel(file, true);
    OutputStream out = Channels.newOutputStream(writeChannel);

    // Append some data to this file
    for (int j = 0; j < 5000; ++j) {
        out.write(veryLongString.getBytes());
    }
    writeChannel.close();
    // Writed 5000*51200 => 256Mo char (to memory, should be
    // also persisted to disk)
}

// Writed all data we want, we finally close the file
AppEngineFile file = new AppEngineFile(newPath);
FileWriteChannel writeChannel = FILESERVICE.openWriteChannel(file, true);
writeChannel.closeFinally(); 
```

输出 ：

```
0
1
2
3
com.google.apphosting.api.ApiProxy$UnknownException: An error occurred for the API request file.Append().
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:518)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:452)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:430)
    at java.util.concurrent.Executors$PrivilegedCallable$1.run(Executors.java:463)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.concurrent.Executors$PrivilegedCallable.call(Executors.java:460)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2786)
    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)
    at java.io.OutputStream.write(OutputStream.java:58)
    at com.google.appengine.api.files.dev.FileMetadata.append(FileMetadata.java:198)
    at com.google.appengine.api.files.dev.LocalFileService.append(LocalFileService.java:357)
    at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:498)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:49:53.127

开发服务器旨在帮助您测试和调试您的应用程序；可扩展性不是它的主要关注点。您是正确的，它将文件缓存在内存中；这就是它应该如何工作的。

# php - 在收到通知/警告时停止脚本执行

> ID：10520390
> 
> 赞同：44
> 
> 时间：2012-05-09T16:38:20.717
> 
> 标签：php, configuration

是否可以在全局范围内让 PHP 在收到通知/警告时停止执行？

我们运行一个有很多站点的开发服务器，但希望迫使我们的开发人员修复这些警告/通知（或至少寻求帮助）而不是忽略并继续前进。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-09T16:49:27.750

是的，有可能。这个问题涉及如何处理 PHP 中的错误的更普遍的问题。[`set_error_handler`^(*您应该使用文档*)](http://php.net/manual/en/function.set-error-handler.php)定义和注册自定义错误处理程序，以自定义 PHP 错误处理。

恕我直言，最好对任何 PHP 错误抛出异常并使用 try/catch 块来控制程序流，但在这一点上意见不同。

为了实现 OP 的既定目标，您可能会执行以下操作：

```
function errHandle($errNo, $errStr, $errFile, $errLine) {
    $msg = "$errStr in $errFile on line $errLine";
    if ($errNo == E_NOTICE || $errNo == E_WARNING) {
        throw new ErrorException($msg, $errNo);
    } else {
        echo $msg;
    }
}

set_error_handler('errHandle'); 
```

上面的代码将在`ErrorException`任何时候抛出`E_NOTICE`or `E_WARNING`，有效地终止脚本输出（如果没有捕获到异常）。对 PHP 错误抛出异常最好与并行异常处理策略 ( [`set_exception_handler`](http://us.php.net/manual/en/function.set-exception-handler.php)) 结合使用，以便在生产环境中优雅地终止。

请注意，上面的示例将不考虑`@`错误抑制运算符。如果这对您很重要，只需使用`error_reporting()`此处演示的函数添加一个检查：

```
function errHandle($errNo, $errStr, $errFile, $errLine) {
    if (error_reporting() == 0) {
        // @ suppression used, don't worry about it
        return;
    }
    // handle error here
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T08:23:59.527

您可以在[php.ini 文件^(*Docs 中全局配置它*)](http://php.net/manual/en/configuration.file.php)。

可以通过使用[`auto_prepend_file`指令^(*Docs 指定所有 PHP 进程包含的文件来完成*)](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)：

```
auto_prepend_file "/full/path/to/a/prepend-file.php" 
```

在全局 php.ini 文件中执行此操作将确保始终执行前置文件中的代码。然后使用它来注册一个全局错误处理程序，它将[所有错误转换为异常^(*文档*)](http://php.net/manual/en/class.errorexception.php)：

```
<?php
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}
set_error_handler("exception_error_handler"); 
```

这个小脚本会将所有错误/警告/通知等转换为[`ErrorException`](http://php.net/manual/en/class.errorexception.php).

此代码示例可能太短（将在下面进一步评论），因此请不要错过[`set_error_handler()`^(*Docs*)手册页](https://php.net/set_error_handler)上的示例。

将它与[`error_reporting`ini 指令^(*Docs 结合使用，*)](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)这些值在您的 php.ini 文件中进行了描述（或者作为另一个选项，使用第二个参数按其严重性`set_error_handler`处理错误）。

抛出异常是一件非常严格的事情。您的程序员将被迫处理警告和错误，否则代码将无法工作（包括带有[*`@`错误控制运算符*](https://www.php.net/manual/en/language.operators.errorcontrol.php)的代码，使其无效）。

可能这太过分了，在公司内部不被社会接受。相反，您还可以通过使用输出缓冲记录所有错误并将它们添加到输出的末尾（或在顶部以便更明显）。

创建（但不抛出）错误异常已经捕获了一个可用于错误处理的回溯。

显示错误和警告的另一种方法是将它们记录到日志文件中，然后使用另一个进程监视该文件并汇总信息。您可以创建一个记分牌来显示每个应用程序的警告数量，并将其显示在办公室中，这样每个人都可以看到团队的表现或类似的乐趣。

我想说的是：除了技术问题之外，这是一个社会问题，你需要创造性地解决这个问题，并实际与你的开发人员讨论这个问题。您需要明确为什么修复警告和错误很重要，以及他们的编码和技能将如何从中受益。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-11T01:29:06.367

自 PHP 5.3.0 起：

```
set_error_handler(
    function(int $nSeverity, string $strMessage, string $strFilePath, int $nLineNumber){
        if(error_reporting()!==0) // Not error suppression operator @
            throw new \ErrorException($strMessage, /*nExceptionCode*/ 0, $nSeverity, $strFilePath, $nLineNumber);
    },
    /*E_ALL*/ -1
); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-19T19:22:47.557

如果您在开发环境中，您可能会考虑安装模块 Xdebug 并`xdebug.halt_level=E_WARNING|E_NOTICE|E_USER_WARNING|E_USER_NOTICE`在 PHP ini 文件中的某个位置进行设置。开发人员可以 reset `xdebug.halt_level`，但我们对基于 的答案有同样的问题`set_error_handler`，因为我们可以将处理程序恢复到其原始值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-29T13:18:59.863

其他解决方案实现了一个自定义错误处理程序，它覆盖了默认的错误记录机制。这意味着当我们设置自定义错误处理程序时，通知/警告不再以默认方式打印，因此我们更改的不仅仅是“在通知/警告时停止脚本执行”。

但是，我需要一种仍然打印消息的方法——在我的情况下是在 PHP CLI 中——因为输出随后会被另一个程序解析。所以我不想以*某种方式*打印消息，但与 PHP 通常使用的方式完全相同。我*只是*想在打印通知/警告后立即使用退出代码*停止*PHP CLI 进程，并且不要*更改任何其他内容*。`!= 0`

 *不幸的是，似乎没有在不更改*整个错误处理*的情况下退出脚本的默认方式。所以我需要在 PHP 中重新实现默认的错误处理程序（用 C 实现）。

为此，我查看了 PHP 源代码中的默认错误打印机制，并将相关部分从 C 移植到 PHP，以获得以下错误处理程序，我想与您分享，以防您需要类似的东西：

```
set_error_handler(
    function($errNo, $errStr, $errFile, $errLine) {
        $error_type_str = 'Error';
        // Source of the switch logic: default error handler in PHP's main.c
        switch ($errNo) {
            case E_ERROR:
            case E_CORE_ERROR:
            case E_COMPILE_ERROR:
            case E_USER_ERROR:
                $error_type_str = "Fatal error";
                break;
            case E_RECOVERABLE_ERROR:
                $error_type_str = "Recoverable fatal error";
                break;
            case E_WARNING:
            case E_CORE_WARNING:
            case E_COMPILE_WARNING:
            case E_USER_WARNING:
                $error_type_str = "Warning";
                break;
            case E_PARSE:
                $error_type_str = "Parse error";
                break;
            case E_NOTICE:
            case E_USER_NOTICE:
                $error_type_str = "Notice";
                break;
            case E_STRICT:
                $error_type_str = "Strict Standards";
                break;
            case E_DEPRECATED:
            case E_USER_DEPRECATED:
                $error_type_str = "Deprecated";
                break;
            default:
                $error_type_str = "Unknown error";
                break;
        }
        fwrite(STDERR, "PHP $error_type_str:  $errStr in $errFile on line $errLine\n");
        exit(1);
    },
    E_ALL
); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-05-09T17:01:24.053

您可以在服务器的 PHP 配置文件中打开**error_reporting** to **E_ALL**。

在 PHP 5 中提供了一个新的错误级别 E_STRICT。由于 E_STRICT 不包含在 E_ALL 中，因此您必须明确启用这种错误级别。在开发过程中启用 E_STRICT 有一些好处。STRICT 消息将帮助您使用最新最好的建议编码方法，例如警告您不要使用已弃用的函数。

参考：[PHP 配置手册](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)

以下设置指导您输出脚本中的所有错误。请注意，这些将需要包含在所有脚本文件的开头。

```
<?php

// Turn off all error reporting
error_reporting(0);

// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE);

// Report all PHP errors (see changelog)
error_reporting(E_ALL);

// Report all PHP errors
error_reporting(-1);

// Same as error_reporting(E_ALL);
ini_set('error_reporting', E_ALL);

?> 
```*

# php - 如何通过 PHP 文件上传文本、pdf、doc、zip 文件到 MySQL

> ID：10520393
> 
> 赞同：-1
> 
> 时间：2012-05-09T16:38:30.773
> 
> 标签：php, mysql

我刚刚通过 PHP 实现了一个图像上传到 MySQL。但我想将文本、pdf、doc、zip 文件上传到 MySQL。这是我的代码。如何改变它？

```
// uploadAction.php

mysql_connect("localhost", "root", "1989") 

or die(mysql_error());

mysql_select_db("uploadfile") or die(mysql_error());

$sql_id = "SELECT (MAX(id)+1) as \"result\" FROM save";

$rs_id = mysql_query($sql_id);

$row_id = mysql_fetch_assoc($rs_id);

$id = $row_id['result'];

if($id == null)

$id = 1;    

$newName = '';  

$file = $_FILES['photo']['name'];

if ((($_FILES["photo"]["type"] == "image/gif")||

($_FILES["photo"]["type"] == "image/jpeg")||

($_FILES["photo"]["type"] == "image/pjpeg"))

&& ($_FILES["photo"]["size"] < 200000))
{

if ($_FILES["photo"]["error"] > 0)

    echo "Return Code: " . $_FILES["photo"]["error"] . "<br />";

  else{  

      $newName = "$id.".basename($_FILES["photo"]["type"]);

      move_uploaded_file($_FILES["photo"]["tmp_name"], "images/" . $newName);

      }

} 

else

  {

  echo "Invalid file";

  }

$queryUser = "INSERT INTO save VALUES(NULL, \"$newName\")";

$insert = mysql_query($queryUser);

if(!$insert){

    echo mysql_error().'Upload Fail';

  }else {

    echo "<script>alert('Upload Sccessful');";

    echo 'window.location="index.php";</script>';
} 
```

数据库 SQL

```
CREATE TABLE `save` (

  `id` int(255) NOT NULL auto_increment,

  `photo` varchar(255) character set utf8 collate utf8_unicode_ci NOT NULL,

  PRIMARY KEY  (`id`)

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:45:19.443

试试这个：

```
if ($_FILES["photo"]["type"] == "image/gif" ||
$_FILES["photo"]["type"] == "image/jpeg" ||   
$_FILES["photo"]["type"] == "image/pjpeg" || 
$_FILES["photo"]["type"] == "application/zip" || 
$_FILES["photo"]["type"] == "application/pdf" || 
$_FILES["photo"]["type"] == "application/msword" || 
$_FILES["photo"]["type"] == "application/vnd.openxmlformats-officedocument.wordprocessingml.document") 
```

您可以在此处查看不同的 MIME 类型：[http ://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)

# javascript - 原型继承的淘汰赛问题

> ID：10520400
> 
> 赞同：3
> 
> 时间：2012-05-09T16:39:00.740
> 
> 标签：javascript, inheritance, knockout.js, prototype

我有一个关于 Knockout 的问题，我在其中创建了一个用户对象的原型，其中我的对象的可观察属性似乎被最后一次出现覆盖了。

因此我不能多次使用同一个对象，否则它将被覆盖。

虽然这很难解释，但请看我的小提琴。

[http://jsfiddle.net/RSEcj/1/](http://jsfiddle.net/RSEcj/1/)

我究竟做错了什么？（或者这是 Knockout 中的错误？）我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:00:02.813

因为 observable 是函数而不是属性，所以它们由对象原型上的单个实例表示，这与设置对象时将在对象上创建的属性不同。

您可以使用功能继承来实现您想要的。

[http://jsfiddle.net/ypWQN/1/](http://jsfiddle.net/ypWQN/1/)

```
var User = function(firstName, lastName){
    var that = {};

    that.firstName = ko.observable(firstName);
    that.lastName = lastName;

    return that;
};

var Employee = function(firstName, lastName){
    var that = User();

    that.firstName(firstName);
    that.lastName = lastName; 

    return that;
}; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T21:00:52.630

这是一个很好的解决方案：http: [//jsfiddle.net/magikMaker/RSEcj/19/](http://jsfiddle.net/magikMaker/RSEcj/19/)

它使用了新的方法 inheritsFrom()，这归功于[http://phrogz.net/js/classes/OOPinJS2.html](http://phrogz.net/js/classes/OOPinJS2.html)

将它与 apply() 方法和 init() 方法结合起来，神奇的事情发生了...... :-)

```
var Person = function(firstName, lastName){

    this.init = function(firstName, lastName){
        this.firstName = ko.observable(firstName);
        this.setLastName(lastName);
    };

    this.setLastName = function(lastName){
        this.lastName = lastName;
    };

    this.init.apply(this, arguments);
};

var Child = function(firstName, lastName){
    this.init.apply(this, arguments);
};

Child.inheritsFrom(Person); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-17T21:09:39.197

我知道有点晚了，但这可能会对某人有所帮助。

尝试像这样定义它，对我来说总是一种享受

```
function User(firstName,lastName)
{
this.firstName = ko.observable(firstName);
this.lastName = lastName;
}

function Employee(firstName,lastName)
{
    User.apply(this,arguments);
   this.firstName(firstName);
    this.lastName = lastName;
}

Employee.prototype = Object.create(User.prototype);
Employee.prototype.constructor = Employee; 
```

# objective-c - 图片被拉伸

> ID：10520404
> 
> 赞同：2
> 
> 时间：2012-05-09T16:39:12.487
> 
> 标签：objective-c, ios, uiimageview

我有一个图像（从我们的服务器获取）我想放入 UIImageView。图像为 373x500。UIImageView 是 443x290 并且视图正在拉伸它。

```
UIImageView *myImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 
                                                                         0, 
                                                                         500, 
                                                                         300)];

myImageView.image = [UIImage imageWithData:photoData];
myImageView.backgroundColor = [UIColor viewBackgroundColor];
myImageView.contentMode = UIViewContentModeScaleAspectFit;

NSLog(@"myImageView.image.size: %@", NSStringFromCGSize(myImageView.image.size));
NSLog(@"myImageView.frame.size: %@", NSStringFromCGSize(myImageView.frame.size));

[wrapperView addSubview:myImageView]; 
```

日志内容：

```
2012-05-09 11:32:52.621[89145:1a303] myImageView.image.size: {373, 500}
2012-05-09 11:32:52.622[89145:1a303] myImageView.frame.size: {443, 290} 
```

好像：

![在此处输入图像描述](../Images/f1f060594f5ea768e2fb1746f76c0a7a.png)

“UIViewContentModeScaleAspectFit”不应该告诉它保持比例而不拉伸图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:42:55.700

您也应该设置`clipsToBounds = YES`视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:10:41.863

`UIViewContentModeScaleAspectFit`将**缩放**图像（顾名思义）以适应视图的纵横比。如果您不希望它缩放图像使用`UIViewContentModeCenter`，它只会将图像以其原始大小放置在视图的中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T21:04:18.763

为我解决这个问题的是在设置框架之前设置内容模式......

```
UIImageView *imageView = [UIImageView new];
imageView.myImage;
imageView.contentMode = UIViewContentModeScaleAspectFit;
imageView.frame = CGRectMake(...);
[self.view addSubiew:imageView]; 
```

# java - 正则表达式模式匹配（）方法java

> ID：10520405
> 
> 赞同：-1
> 
> 时间：2012-05-09T16:39:14.203
> 
> 标签：java, regex, pattern-matching

我正在尝试在 java 中找到与字符串 TTFI 中带有 TTFI 的子字符串匹配的正则表达式

我正在使用 /TTFI/ 匹配字符串中的字符串 TTFI，例如 TTFI1233

使用以下 URL [http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)进行检查时，结果为matches() 否

小提琴网址是： http: [//fiddle.re/e3y2](http://fiddle.re/e3y2)

谢谢，导航

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:51:43.417

斜杠不是正则表达式的一部分，而是在 perl、javascript 等中使用的特定于语言的分隔符。另请注意，Java RE 需要匹配*整个*字符串 - 使用`.*TTFI.*`完全匹配您的输入。

# java - JComboBox：如何获得适用于 HTML 条目的键选择？

> ID：10520406
> 
> 赞同：0
> 
> 时间：2012-05-09T16:39:19.110
> 
> 标签：java, swing, jcombobox

您好 :) 我首先使用的是 Java 6。

# 特征

当您使用 时`JComboBox`，您通常可以通过键入字符来选择一个条目。这很好。

# 问题

不幸的是，如果您的条目是 HTML 字符串，例如`"<html><b>foo</b> <i>bar</i></html>"`. 顺便说一句，我主要使用 HTML 来以不同的颜色显示我的条目。

# 解决办法，不好

所以，为了解决这个问题，我通过改变实现了我自己的 KeySelectionListener `JComboBox$DefaultKeySelectionManager`，如果条目以`"<html>"`.

这样可行。*但是：*我错误地认为默认使用的是`JComboBox$DefaultKeySelectionManager`. 为什么？因为它只处理输入的*第一个*字符。对于具有许多以相同字符开头的条目的长列表，这根本不方便。

处理输入框中的所有字符的好方法是`BasicComboBoxUI$DefaultKeySelectionManager`（这是默认设置）。问题是，这个与嵌套的 ComboBoxUI 交互。它接受它`JList`并调用`getNextMatch(prefix, …)`。可悲的是`JList.getNextMatch()`不关心 HTML 条目。

我不能简单地将 BasicComboBoxUI 扩展为具有不同的 JList 实现，因为给定的 LAF 决定使用哪个 UI。

有任何想法吗？我猜 Java 7 没有解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:56:25.297

这确实是一个皮塔饼，我也遇到过同样的问题。最后，组合框使用模型中包含的对象的 toString() 方法进行键选择。最简单的方法是将所有 HTML 字符串包装到具有 toString() 方法的对象中，该方法返回用于选择的文本，并使用单元格渲染器来渲染 HTML。例如：

```
public class HtmlOption {
    private final String rawText;
    private final String htmlText;

    private HtmlOption(String rawText, String htmlText) {
        this.rawText = rawText;
        this.htmlText = htmlText;
    }

    public String toString() {
        return this.rawText;
    }

    // getters, equals and hashCode omitted
} 
```

然后用这些对象填充你的组合：

```
model.addElement(new HtmlOption("foo bar", "<html><b>foo</b> <i>bar</i></html>")); 
```

并将渲染器设置为组合框

```
setText(((HtmlOption) value).getHtmlText()); 
```

# replace - 在该文件中搜索并用变量 one 替换常量字符串

> ID：10520412
> 
> 赞同：0
> 
> 时间：2012-05-09T16:39:41.130
> 
> 标签：replace

我在另一个论坛上问过这个问题，但没有得到答案。有人建议我在stackoverflow上发布这个问题。

我有数百个名为 001.html 002.html 003.html 等的 HTML 文档。所有这些 HTML 文件都包含多个常量“F0”字符串。此外，这些 HTML 文件包含一个*变量*字符串 {PABC}，其中“ABC”指的是标题编号。例如：

```
001.html has F0 string(s) and a string {P001}.
002.html has F0 string(s) and a string {P002}.
003.html has F0 string(s) and a string {P003}. 
```

等等。如何将这些 HTML 文件中出现的所有“F0”替换为相应的“{PABC}”字符串？比方说，我有 001.html，其中有多个 F0 和一个“{P001}”。我想用“{P001}”替换所有出现的“F0”。002.html 也是一样，将 F0 替换为“{P002}”。如何对所有 HTML 文件执行批处理操作？

有没有好的文本编辑器[用正则表达式替换文件中的变量]可以做到这一点，如果有，怎么做？到目前为止，我已经尝试过 UltraEdit、Funduc Studio Pro 等，但没有取得丰硕的成果。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:06:33.117

使用 Vim 相当容易。

```
$ vim *.html
:argdo %s/\<F0\>/\='P'.fnamemodify(expand('%'), ':t:r')/ge | update
:q 
```

*   `expand('%')`返回当前文件的名称。
*   `fnamemodify(x, ':t:r')`返回已删除扩展名 ( `:t`)的尾部 ( )`x``:r`
*   `\=`计算以下表达式并将其用作替换
*   `:%s/\<F0\>/.../ge`用整个缓冲区中的替换替换所有`F0`不是较大单词内部的字符串，并且如果搜索没有匹配项，则不会出错。
*   `|`是 Vim 如何在单个命令行上指定多个命令
*   `update`仅在修改文件时保存文件
*   `:argdo`对参数列表中的所有项目运行以下命令
*   `:q`退出 Vim

你也可以稍微改变一下，让它在一个文件上运行，然后为每个文件运行一次。

```
vim -e -s -c '%s/\<F0\>/\="P".fnamemodify(expand("%"), ":t:r")/ge' -c x 001.html 
```

这里的主要区别是 Vim 在脚本模式 ( `-e -s`) 下运行，并且`update`and`q`命令被替换为`x`命令。

# java - 有没有办法确定远程 RMI 服务器机器是否是多宿主的，即使它的某些 IP 地址不可见？

> ID：10520413
> 
> 赞同：0
> 
> 时间：2012-05-09T16:39:46.700
> 
> 标签：java, sockets, rmi

我遇到了一些让 RMI 服务器在多宿主机器上正常工作的障碍。我编写了一个自定义`RMISocketFactory`程序，并尝试了几种不同的方式来实现客户端`createSocket(String host, int port)`方法。一种方法仅在 RMI 服务器机器是多宿主时有效，另一种方法仅在 RMI 服务器机器不是时有效。这是我的`createSocket`客户端`RMISocketFactory`实现中两个方法版本的代码：

**仅当 RMI 服务器不是多宿主时才有效：**

```
@Override
public Socket createSocket(String host, int port) throws IOException{
    Socket s = new Socket(host,port);

    //Do some book-keeping here ...

    return s;
} 
```

**仅当 RMI 服务器为多宿主时才有效：**

```
private TreeSet<String> validHosts = null;

@Override
public Socket createSocket(String host, int port) throws IOException{
    Socket s = null;

    try {
        s = new Socket(host,port);
        synchronized(this){
            if(validHosts == null) validHosts = new TreeSet<String>();
            validHosts.add(host);
        }
    } catch (IOException e) {}

    if(s == null && validHosts != null){
        synchronized(this){
            for(String h : validHosts){
                try {
                    s = new Socket(h,port);
                } catch (IOException e) {}
            }
        }
    }

    if(s == null){
        try {
            String h = RemoteServer.getClientHost();
            s = new Socket(RemoteServer.getClientHost(),port);

            synchronized(this){
                if(validHosts == null) validHosts = new TreeSet<String>();
                validHosts.add(h);
            }
        } catch (Exception e) {}
    }

    //No dice - throw an exception:
    if(s == null){
        TreeSet<String> set = new TreeSet<String>();
        set.add(host+"(orig)");

        synchronized(this){
            if(validHosts != null) set.addAll(validHosts);
        }

        StringBuilder sb = new StringBuilder(
            "Could not connect socket on port "+port+
            " to any of the following hosts: ");
        for(String h : set) sb.append(h+" ");

        throw new IOException(sb.toString());
    }

    //Do some book-keeping here ...

    return s;
} 
```

**问题**

似乎如果我能以某种方式判断服务器端机器是否是多宿主的，那么我可以将两组代码包装在`if(serverIsMultihomed) ... else ...`一种语句中。我确实有能力在此调用中获取服务器的实际机器名称，但调用`InetAddress.getAllByHostName(host)`实际上并没有返回所有主机的 IP 地址，只返回客户端机器上的 NIC 可见的 IP 地址。因此，当`createSocket(host,port)`使用客户端实际上不可见的 IP 地址调用时，这就是我遇到问题的地方。此外，将 设置为`java.server.rmi.hostname`我要使用的服务器的 IP 地址并不能解决此问题，并且基本上会禁止服务器连接到的不同子网上的机器建立链接。

简而言之，是否有另一种方法可以从另一台机器上获取主机的所有 IP 地址，无论是可见的还是其他的，还是我在这里完全找错了树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:50:00.970

您看过[这个 Multihomed 解决方案](http://weblogs.java.net/blog/emcmanus/archive/2006/12/multihomed_comp.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:18:51.273

如果服务器有一个每个人都可以看到的 IP 地址，这似乎是 Sun 考虑的唯一多宿主情况，那么您只需在服务器 JVM 上将 java.rmi.server.codebase 设置为该地址。根本不需要套接字工厂。

# php - 是否可以强制 PHP 样式表导入忽略字符串？

> ID：10520418
> 
> 赞同：-1
> 
> 时间：2012-05-09T16:40:11.723
> 
> 标签：php, css, import

我想将 PHP 样式表 (style.php) 导入我的 HTML 文档。是否可以从 style.php 中删除某些字符串，然后使用常规方法（如`<link>`）将其导入？我想`<style>`专门删除标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:58:36.760

文件“css.php”，其中包含 style.php 文件，其中包含您的 CSS

```
ob_start();

require("style.php"); 

$css = ob_get_clean();

$css = str_replace(array("<style>","</style>"),array("",""),$css);

echo $css; 
```

将其包含在主页中 `<link rel="stylesheet" href="css.php" type="text/css" media="screen" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:46:31.043

这里没有太多选择。您需要将文件包含为文件，保留`<style></style>`原地而不是链接样式表。当然，这会破坏浏览器缓存文件的能力，因此它必须随每个页面提供。

仅仅为了获得一些语法突出显示，这似乎是一个糟糕的解决方法。

# c# - 数据网格对 GB、MB、KB、B 进行排序

> ID：10520419
> 
> 赞同：2
> 
> 时间：2012-05-09T16:40:26.123
> 
> 标签：c#, sorting, datagrid

好的，所以我已经申请了从 Exchange 获取邮箱大小，但是我需要一些帮助才能使排序正常工作。我用自己的类对网格进行数据绑定，我使用此处的解决方案使我的列表可排序：[如何对数据绑定 DataGridView 列进行排序？](https://stackoverflow.com/questions/1699642/how-to-sort-databound-datagridview-column)

但是当尝试对邮箱大小进行排序时，它并没有像我想要的那样做，请有人能给我一些见解吗？现在我故意将 MB 部分和大小（双）分成 2 个不同的列。欢迎任何想法。 ![在此处输入图像描述](../Images/4f0bd91b3830d844ee90cec6d1841a6b.png)

在屏幕截图上看不到问题，但是我只希望 GB 位于顶部，但 MB 最终位于顶部，因为它很容易在您的邮箱中拥有 200MB 而不是 200GB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:08:11.500

感谢上面的评论，我已经能够想出一种方法来完成这项工作。我在我的类中添加了一个附加值，它只包含字节，使它成为网格中的隐藏列。使用了 headerclick 事件，在这里我使它在隐藏列而不是字符串列上排序

# objective-c - 使用 NSMutableURLRequest 发布 HTML 表单（特别是“复选框”控件）

> ID：10520420
> 
> 赞同：1
> 
> 时间：2012-05-09T16:40:29.257
> 
> 标签：objective-c, cocoa-touch, post, nsmutableurlrequest

我知道有很多关于这方面的教程，而且我大部分时间都在工作。但是，有一个问题，那就是复选框。该控件的名称属性为`Confirmation`。它的值也为`Yes`。

因此，我将密钥设置为`Confirmation`并将值设置为，`Yes`但这不起作用。我也尝试将值设置为`On`，`checked`因为我在网上看到它们也经常被使用。没有什么。

我整理请求的方法是创建一个 NSMutableDictionary，设置键/值，然后循环遍历它们，在表单中设置 NSMutableData `KEY=VALUE&`，然后将请求设置`setHTTPBody`为 NSMutableData。

我知道 ASI 库，这是遗留代码，所以我现在只使用它。

# vb.net - 日期时间格式转换无效字符串

> ID：10520421
> 
> 赞同：1
> 
> 时间：2012-05-09T16:40:37.463
> 
> 标签：vb.net, datetime, type-conversion

我以前问过这个问题并使用了soln，但由于某种原因，这一次它不起作用。希望其他人可以看到错误/缺失的元素。解析一个字符串格式的日期，并希望将其转换为日期时间格式，但无法弄清楚如何执行此操作。日期显示如下：

```
Tue May 08 20:38:42 +08:00 2012 
```

这是我的转换代码：

```
Dim postDate As DateTime = DateTime.ParseExact(contentDate, "ddd MMMM dd hh:mm:ss zzz yyyy", System.Globalization.CultureInfo.InvariantCulture)
contentDate = postDate.ToString("yyyy-MM-dd hh:mm:ss") 
```

错误在第一行：“字符串未被识别为有效的日期时间”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:05:12.987

不幸的是，我认为问题在于您作为样本的日期不是星期四，而是星期日。此外，我认为您需要使用大写字母表示小时，因为看起来您正在获得军事时间。

```
Dim postDate As DateTime = DateTime.ParseExact(contentDate, "ddd MMMM dd HH:mm:ss zzz yyyy", System.Globalization.CultureInfo.InvariantCulture) 
```

一旦我进行了这些更改，它就起作用了。

# jquery - codeigniter 控制器中的回显不起作用

> ID：10520423
> 
> 赞同：0
> 
> 时间：2012-05-09T16:40:44.750
> 
> 标签：jquery, codeigniter-2

codeigniter 控制器中的 echo 不起作用。配置中是否有任何设置可以在 codeigniter 中启用 echo。除了那些在控制器中有回声的文件外，所有其他文件都在工作。

```
 <?php
class Blog extends CI_Controller {

    public function index()
    {
        echo 'Hello World!';
    }
} 
```

[基本上我正在测试http://www.ryantetek.com/2009/12/how-to-create-a-simple-ajax-post-in-codeigniter-using-jquery](http://www.ryantetek.com/2009/12/how-to-create-a-simple-ajax-post-in-codeigniter-using-jquery)中给出的 jquery 和 condeigniter 示例脚本。但我发现脚本不起作用，因为控制器中的 echo 语句。请帮我。

错误：“此网页不可用”..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:59:02.873

我遇到了同样的问题，但只在mac浏览器中，我用这个解决了这个问题在你的`./application/config/config.php`文件中检查`$config['compressed_output']`它是否设置为true然后将其设置为false，因为某些浏览器不支持压缩输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:46:51.153

你的代码是正确的。您可能访问了错误的路径。不要直接加载控制器，因为 CodeIgniter 对 URL 做了一些奇怪的事情——相反，加载类似于以下的 URL：

[http://yoursite.com/code_igniter_path/index.php/blog/index](http://yoursite.com/code_igniter_path/index.php/blog/index)

祝你好运！

# c# - 在 Visual Studio 2010 中，如何将我的 dll 项目设置合并到我的主 exe.config 文件中以用于 C# 应用程序？

> ID：10520424
> 
> 赞同：0
> 
> 时间：2012-05-09T16:40:45.617
> 
> 标签：c#, visual-studio-2010, dll, config, properties.settings

我无法详细说明我正在开发的应用程序，但这个想法应该是基本的，我只是找不到任何关于这个问题的具体内容。

我在 Visual Studio 2010 的解决方案中有两个 C# 项目。一个是可执行文件，它引用另一个是 DLL。

DLL 具有我想在外部修改的特定配置设置，可执行文件也是如此，但构建应用程序只会生成一个配置文件，而没有任何 DLL 文件配置的值。

似乎 DLL 的配置文件变成了内部的并且无法更改，但我需要能够更改这些值。

我可以访问的一个较旧的类似应用程序有一个可以访问它们的配置文件，但我不知道如何让它在 2010 年工作。它说如果我尝试像这样编辑配置文件，配置管理器无法加载：

```
 <EXEFILE.Properties.Settings>
        <setting name="Delimiter" serializeAs="String">
            <value>","</value>
        </setting>
    </EXEFILE.Properties.Settings>
    <DLLFILE.Properties.Settings>
        <setting name="logDirectory" serializeAs="String"><value>C:\logs</value></setting>
    </DLLFILE.Properties.Settings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:09:12.680

```
ExeConfigurationFileMap map = new ExeConfigurationFileMap();
map.ExeConfigFilename = "..\\mydll.config";
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(map,  ConfigurationUserLevel.None);
AppSettingsSection section = (AppSettingsSection)config.GetSection("appSettings"); 
```

# java - JAXB 2.2 不解组无界选择元素

> ID：10520430
> 
> 赞同：2
> 
> 时间：2012-05-09T16:41:21.283
> 
> 标签：java, jaxb, xml-parsing, musicxml

我正在更新一个使用 JAXB 1.0 和内部编写的 MusicXML 1.0 模式的 Java 应用程序，以使用 JAXB 2.2 和供应商提供的 MusicXML 3.0 模式。当我使用 JAXB 2.2 为 <part-list> 解组具有多个 <score-part> 子元素的文件时，仅返回 1 个 <score-part> 元素。我目前正在使用 DOM 的解决方法来获取附加的 <score-parts> 但这并不是很理想，因为我要解析文件两次以获取数据。如何让 JAXB 返回 <part-list> 中的所有 <score-parts>？

<part-list> 的 MusicXML 1.0 架构片段

```
<xs:element name="part-list">
<xs:complexType>
  <xs:sequence>
    <xs:element minOccurs="0" maxOccurs="unbounded" ref="part-group"/>
    <xs:element ref="score-part"/>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element ref="part-group"/>
      <xs:element ref="score-part"/>
    </xs:choice>
  </xs:sequence>
</xs:complexType>
</xs:element> 
```

<part-list> 的 MusicXML 3.0 架构片段

```
<xs:complexType name="part-list">       
<xs:sequence>
    <xs:group ref="part-group" minOccurs="0" maxOccurs="unbounded"/>
    <xs:group ref="score-part"/>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:group ref="part-group"/>
        <xs:group ref="score-part"/>
    </xs:choice>
</xs:sequence>
</xs:complexType> 
```

用于解组的 Java 片段

```
package test;
import java.io.FileInputStream;
import java.util.*;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Unmarshaller;
import recodare.MusicXML.*;
import javax.xml.bind.JAXBElement;

public class MusicXMLReader{

    private java.lang.String m_sXMLFielPath = "";
    private ScorePartwise m_spScorePartwise = null;
    public MusicXMLReader(java.lang.String filePath){
        m_sXMLFilePath = filePath;
    }
    public void processXML() throws Exception{

        JAXBContext jc = JAXBContext.newInstance("recodare.MusicXML");
        Unmarshaller u = jc.createUnmarshaller();
        m_spScorePartwise = (ScorePartwise)u.unmarshal(new FileInputStream(m_sXMLFilePath));

        PartList pl = m_spScorePartwise.getPartList();
        ScorePart scorePart = pl.getScorePart(); // 1st score-part
        // for remaining score-part or part-group this list is null even when part-list  
        // has multiple score-part elements
        List<Object> listPartGroupOrScorePart = pl.getPartGroupOrScorePart(); 
        //continue processing file

    }
} 
```

[对于测试数据，我使用来自The Unofficial MusicXML Test Suite 的](http://lilypond.org/doc/v2.12/input/regression/musicxml/collated-files.html)文件 41a-MultiParts-Partorder.xml 和 41b-MultiParts-MoreThan10.xml

如果您希望为 MusicXML 3.0 构建 JAXB 绑定，您可能会从 JAXB 收到以下（或类似）错误

```
[ERROR] Property "Segno" is already defined. Use &lt;jaxb:property> to resolve this conflict.
line 2793 of file: musicxml.xsd

[ERROR] The following location is relevant to the above error
line 2800 file: musicXML.xsd
[ERROR] Property "Coda" is already defined. Use &lt;jaxb:property> to resolve this conflict.
line 2794 of musicXML.xsd

[ERROR] The following location is relevant to the above error
line 2801 of file: musicXML.xsd
[ERROR] Element "link" shows up in more than one properties.
line 4765 of file: musicXML.xsd
[ERROR] Element "bookmark" shows up in more than one properties.
line 4766 of file: musicXML.xsd 
```

在这种情况下，请按照[此处概述的步骤进行操作](http://proxymusic.kenai.com/recipy.html)

# iphone - iPhone上的NSData writeToFile

> ID：10520432
> 
> 赞同：2
> 
> 时间：2012-05-09T16:41:27.087
> 
> 标签：iphone, objective-c, ios, nsdata, writetofile

我认为错误出在路径上，但是我从 Mac 应用程序的在线教程中获取了代码（稍作修改），并且运行良好。它写入`client_state.xml`（在构建文件夹中）。然而，在我的基于 iphone 导航的应用程序上，它编译并运行良好。如果我`NSLog`得到相应信息的数据或文件，我就无法在`.xml`任何地方找到文件。

```
//doc_client is a DDXMLDocument file from kissXML.  The XMLData message returns the NSData
//from the document
NSData *xmlD = [doc_client XMLData];
[xmlD writeToFile:@"client_state.xml" atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:43:31.737

文件路径是相对于您应用的当前工作目录的；如果应用程序被沙盒化并且当前目录在应用程序包之外，则该`writeToFile:atomically:`方法将失败。

[尝试提供基于 main bundle 动态](https://stackoverflow.com/questions/1949992/working-with-paths-from-nsbundle-mainbundle-resourcepath)构建的绝对路径。

# javascript - JavaScript + 事件传播

> ID：10520436
> 
> 赞同：2
> 
> 时间：2012-05-09T16:41:35.337
> 
> 标签：javascript, javascript-events

我有一个成功切换隐藏 div 的输入框。但是，当用户单击 div 本身以外的任何内容时，我也希望 div 隐藏。我该怎么做？

**html**

```
<input id="inputID" type="text" readonly />
<div id="divID"></div> 
```

**js**

```
var divObj = document.getElementById('divID');
var inputObj = document.getElementById('inputID');

inputObj.addEventListener('click', toggleDiv, false);
function toggleDiv(){
    divObj.style.display = (divObj.style.display == 'none') ? 'block' : 'none'; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:43:29.583

在元素上创建一个事件侦听`document.body`器并检查事件是否源自 div 内的元素，如果不是隐藏它。`.stopPropagation()`您可以通过不检查来源来稍微简化这项工作，而只需通过调用事件对象来防止来自 div 内部的点击事件冒泡。

```
divObj.addEventListener('click', function(e) {
    e.stopPropagation();
}, false);
document.body.addEventListener('click', function(e) {
    divObj.style.display = 'none';
}, false); 
```

演示：http: [//jsfiddle.net/ThiefMaster/D7YnS/](http://jsfiddle.net/ThiefMaster/D7YnS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:14:26.607

ThiefMaster 的方法有效，但如果您有多个地方需要做同样的事情，则需要考虑一个小问题。假设您需要对两个单独的 div 做同样的事情，然后调用`e.stopPropagation()`会导致 div1 在单击 div2 时不会被隐藏

例子

```
div1.addEventListeners('click', function(e){
    e.stopPropagation();
}, false);
div2.addEventListener('click', function(e) {
    e.stopPropagation();
}, false);
document.body.addEventListener('click', function(e) {
    div1.style.display = 'none';
    div2.style.display = 'none';
}, false); 
```

因此，更安全的选择是（为简单起见，我将使用 jQuery）[http://jsfiddle.net/qzMnj/1/](http://jsfiddle.net/qzMnj/1/)

```
$(function() {
    function hideWhenClickOutside(element) {
      $(document).click(function(e){
        if ( !element.contains(e.target)) {
            $(element).hide();
        }
      });
    }

    hideWhenClickOutside(document.getElementById('div1'));    
    hideWhenClickOutside(document.getElementById('div2'));
}) 
```

我的观点是，调用`stopPropagation()`可能会产生不必要的副作用，如果您不必这样做，最好不要这样做，除非您确定没有人会关心该点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:47:12.643

让我们看看这是否有效

1.  打电话给你的普通听众来隐藏 div
2.  如果没有隐藏，则向正文添加一个额外的侦听器以隐藏您的 div
3.  向 div 本身添加一个侦听器以停止事件（上面的 2.）
    *   这被称为[事件传播](http://www.javascripter.net/faq/eventbubbling.htm)
    *   你点击 div，最终是点击 body
    *   你不想打电话给 2\. 当你在 div 内点击时

另外，请注意上面（你的）和下面（我的）的代码不是跨浏览器的（addEventListener 在 IE8 和更少的版本中不起作用）希望你忽略这一点，这里是带有 JS 的 HTML

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Lab</title>
    <style type="text/css">
        #divID {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            margin-top: 85px;
            border: 1px solid #020202;

            // Unnecessary stuff
            -moz-border-radius:     2px;
            -webkit-border-radius:  2px;

            -moz-box-shadow:    0 0 8px #565656;
            -webkit-box-shadow: 0 0 8px #565656;
        }
    </style>
</head>
<body>
    <input id="inputID" type="text" readonly="readonly" />
    <div id="divID"></div>
</body>

<script type="text/javascript">

    var divObj = document.getElementById('divID'),
        inputObj = document.getElementById('inputID');

    inputObj.addEventListener('click', toggleDiv, false);
    document.body.addEventListener('click', docClick, false);
    divObj.addEventListener('click', divClick, false);

    function divClick(e) {
        // if you click any element inside the div
        // when the click reaches the div, stop going above
        e.stopPropagation();
    }

    function docClick(e){
        if (divObj.style.display !== 'none') {
            divObj.style.display = 'none';
        }
    }

    function toggleDiv(e) {
        e.stopPropagation();
        divObj.style.display = (divObj.style.display === 'none') ? 'block' : 'none'; 
    }

</script>

</html> 
```

# .net - 在我的场景中将验证和格式设置为字段或实体是一个好主意吗？

> ID：10520437
> 
> 赞同：0
> 
> 时间：2012-05-09T16:41:42.440
> 
> 标签：.net, validation, formatting

我喜欢对以下值进行语法和语义检查：

1.  邮政编码（美国）/邮政编码（加拿大）
2.  电话号码（美国）/（加拿大）

现在将验证和格式设置为字段是否是一个好主意，或者我应该将它们保留为单独的表以应用各种验证和格式设置规则？请举例讨论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:48:48.787

我认为您可以使用正则表达式进行检查和验证，并将正则表达式保存到 hashmap 中：

```
Map<String,String> myMap = new HashMap<>();
myMap.put("ZIP", "regexfor zip");
myMap.put("PHONE", "regexfor phone"); 
```

然后，您可以轻松地获得正确的正则表达式来验证哈希图中的字段，或者更好的是，您可以使用方法 validate 创建一个接口（验证器），并使用基于字段类型执行验证的特定类实现接口，一些东西类似于命令模式...

# php - 如何记住 REGEX 中的所有事件？

> ID：10520447
> 
> 赞同：1
> 
> 时间：2012-05-09T16:42:42.517
> 
> 标签：php, regex

有一条线

```
int gg = 665 j h = 78; 
```

检查条件并记住字符gg，j，h。写正则表达式：

```
/^\s*int\s+(?:\s*([a-z]+)\s*(?:=\s*[0-9]+\s*){0,1})+;$/ 
```

得到：

```
Array
(
    [0] => Array
    (
        [0] => int gg =665 j h = 78;
    ),
    [1] => Array
    (
        [0] => h
    )
) 
```

原来只记得最后一个条目，我也想抓住所有其他条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:48:48.787

看一下`preg_match_all`

[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

# java - textview前后xml中的空格

> ID：10520453
> 
> 赞同：0
> 
> 时间：2012-05-09T16:42:56.350
> 
> 标签：java, android, xml

![在此处输入图像描述](../Images/e0c4262136e70a2c28bd09fc2db56bc6.png) 我正在尝试删除它在 textview 之前和之后自动创建的空格。这怎么可能？

```
 <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:background="@drawable/ripetisfondo"
            android:padding="1dp" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:shadowColor="#000000"
                android:shadowDx="1"
                android:shadowDy="1"
                android:shadowRadius="2"
                android:text="@string/titolo1"
                android:textColor="#FFFFFF"
                android:textSize="15dp"
                android:textStyle="bold" />

            <ToggleButton
                android:id="@+id/toggleButton1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center" />
        </TableRow> 
```

该屏幕截图取自 Eclipse。当我运行该应用程序时，半切换按钮消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:53:13.453

像这样更改您的文本视图：

```
android:layout_width="0dp"
android:layout_weight="1" 
```

这将使文本视图在屏幕上布置其他所有内容**后扩展以填充可用空间。**这应该让切换器占据它需要的空间。

**编辑**

您可能需要将其包装在 LinearLayout 中以使其像我建议的那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:45:17.050

删除`android:layout_gravity="center"`。这就是为什么它居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:45:53.010

您将 XML TextView 重力设置为中心，这就是它位于中心的原因。将其设置为您想要的或删除它。

# c# - 无法从 C# 中的 URL 保存图像 - 使用 Webclient 和 DownloadFile()；

> ID：10520456
> 
> 赞同：0
> 
> 时间：2012-05-09T16:43:18.587
> 
> 标签：c#, image, webclient

我无法从 URL 不包含文件名的 RSS 源下载图像。

**例子 -**

我想下载的图片 URL（如果您在浏览器中单击它可以工作，但在代码中它不起作用）：

[http://www.deviantart.com/download/286471805/](http://www.deviantart.com/download/286471805/)

使用下面的代码，我得到“在 WebClient 请求期间发生异常”。错误。我不知道为什么这不起作用。

关于如何保存这些文件的任何想法？

```
 private void Start_Button_Click(object sender, EventArgs e)
    {
        WebClient MyDownloader = new WebClient();

            MyDownloader.DownloadFile(@"http://www.deviantart.com/download/286471805/", @"c:\test\");

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:54:11.790

您必须指定文件名作为第二个参数，而不是下载目录：

```
using (var client = new WebClient())
{
    client.DownloadFile("http://www.deviantart.com/download/174633066/",
                        @"c:\test\file.png");
}                                     ↑ 
```

# .net - 尝试连接到 ms sql server 时出现实例失败

> ID：10520460
> 
> 赞同：0
> 
> 时间：2012-05-09T16:43:50.763
> 
> 标签：.net, sql-server, ado.net

尝试从 c# 代码连接到 ms sql，但收到此错误。如果我像这样进行简单的连接：

```
 String connect = "server=MY-PC\\SQLEXPRESS; database=mydb; Integrated Security=SSPI;";
          con.ConnectionString = connect; 
```

但是当我从 app.config 尝试 connecto 时，我收到了这个错误：

```
 String connect = ConfigurationManager.AppSettings["connectionString"];
         con.ConnectionString = connect ; 
```

这是xml代码：

```
 <configuration>
      <appSettings>
       <add key="connectionString" value="server=MY-PC\\SQLEXPRESS; database=mydb;       Integrated        Security=SSPI;"/>
      </appSettings>
     </configuration> 
```

一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:02:16.703

尝试这个

String connect = @"数据源=.\SQLEXPRESS;AttachDbFilename=mydb;Integrated Security=True;" con.ConnectionString = 连接；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:49:22.000

您应该像这样在 app.config 中设置连接字符串

```
<connectionStrings>
<add name="connect" connectionString="Data
Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|Database1.mdf;Integrated 
Security=True;User Instance=True"
providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

然后让你的连接字符串为

```
ConfigurationManager.ConnectionStrings["connect"].ConnectionString 
```

示例 Conn 字符串：

```
<add name="NorthWind" 
       providerName="System.Data.SqlClient" 
       connectionString="server=.;database=NorthWind;Integrated Security=SSPI" /> 
```

# php - PHPUnit 严格模式有什么作用？

> ID：10520464
> 
> 赞同：36
> 
> 时间：2012-05-09T16:44:05.497
> 
> 标签：php, unit-testing, phpunit

我想知道什么是“PHPUnit 中的严格模式”？

例如：

```
phpunit --strict 
```

或在 phpunit.xml

```
<phpunit strict="true"/> 
```

我打开它只是为了尝试它，我的测试开始失败

```
PHP_Invoker_TimeoutException: Execution aborted after 1 second 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-09T17:13:52.040

> 请注意，PHPUnit 会吞下测试执行期间发出的所有输出。在严格模式下，发出输出的测试将失败。

这就是我在文档中可以找到的全部内容，但我也检查了来源，发现在严格模式下：

1.  没有断言的测试可能会被标记为不完整/失败。
2.  每个测试可能会在执行时间限制下运行，具体取决于它的大小以及[pcntl 扩展](http://php.net/manual/en/book.pcntl.php)和[PHP_Invoker 库](https://github.com/sebastianbergmann/php-invoker)的存在。有三个超时值：

    *   `timeoutForSmallTests`（默认值：1）
    *   `timeoutForMediumTests`（默认值：10）
    *   `timeoutForLargeTests`（默认值：60）

    测试大小（小、中或大）由以下`PHPUnit_Util_Test::getSize()`方法确定：

    *   测试用例下降`PHPUnit_Extensions_Database_TestCase`或`PHPUnit_Extensions_SeleniumTestCase`很大。
    *   测试用例和单个测试也可以通过将它们分别添加到“大”或“中”[组](http://phpunit.de/manual/3.7/en/appendixes.annotations.html#appendixes.annotations.group)来进行大或中。
    *   否则，测试很小。

* * *

严格模式似乎只进行了上述三个更改，但我对此并不确定。我以前从未研究过 PHPUnit 的源代码，也没有使用过严格模式。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-10T14:09:05.517

**简短回答：** 对于长时间运行的测试，使用注释来增加允许的运行时间：

```
@large // 10 seconds
@medium // 5 seconds
@small // 1 second max <-- Default, so no point using 
```

**长答案：**

这是在@Crozin 的帮助下得出的一组更新信息。

在我的情况下，错误是测试花费了太长时间（> 1 秒。）（Doctrine ORM 模式 drop + create 可以减慢速度，[请参阅此 ZendCast 了解我在做什么](http://www.zendcasts.com/unit-testing-doctrine-2-entities/2011/02/)）。这导致 PHP_Invoker 出现问题（和一些输出）。严格模式不允许任何输出。

通过阅读/逆向工程 /usr/share/php/pear/share/pear/PHPUnit/Util/Test.php::getSize() （和同一类的 getGroups() ）..我发现有 3 个未记录的注释我们可以用：

```
@large  // 10 seconds
@medium // 5 seconds
@small // 1 second max run time 
```

它们可以在类级别或方法级别上指定。 [PHPUnit github 上的 Issue #490](https://github.com/sebastianbergmann/phpunit/issues/490)暗示了提供类级别和方法级别的问题，因此如果混合使用它们，则为 YMMV。正如 crozin 所说，分配的超时时间分别为 10、5、1 秒。

另一种解决方案是增加允许调用的函数运行的时间（在我的慢速计算机上）。

```
sudo vi /usr/share/php/pear/share/pear/PHP/Invoker.php

Increase line 1 "declare(ticks = 1);" to
    "declare(ticks = 10);" // or any higher int that meets your needs 
```

这里有一堆关于严格模式的信息，帮助我找到了解决方案：

> PHP_Invoker
> 一个使用超时调用可调用对象的实用程序类。这个包是在严格模式下强制测试超时所必需的。[ [PHPUnit 安装说明](https://phpunit.de/manual/current/en/installation.html)]
> 
> 不断言任何内容的严格模式测试被标记为不完整的测试不完整（或跳过）不会产生代码覆盖[塞巴斯蒂安·伯格曼（Sebastian Bergmann）的幻灯片共享（幻灯片 10）](http://www.slideshare.net/sebastian_bergmann/towards-more-meaningful-code-coverage)
> 
> 注意
> 请注意 PHPUnit 会吞下测试执行期间发出的所有输出。在严格模式下，发出输出的测试将失败。[PHPUnit手册的测试输出部分](https://phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.output)

# windows - 使用TCL访问XP中的共享文件夹而不映射到驱动器

> ID：10520465
> 
> 赞同：1
> 
> 时间：2012-05-09T16:44:05.617
> 
> 标签：windows, file, tcl, unc

我想访问共享文件夹并将其中的一些文件复制到本地计算机。我使用 TCL 中的文件复制命令进行了尝试，将共享位置映射到驱动器，它可以工作。如何在不将其显式映射到驱动器的情况下访问它？

```
\\192.168.2.10\test\test1.txt
```

当我将其映射到驱动器时​​，例如`Y:`，我能够`file copy`在 TCL 中执行命令。但是有没有办法，我可以在不将其映射到驱动器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:59:24.063

您是否尝试过使用[“长”形式](http://en.wikipedia.org/wiki/Path_%28computing%29#Uniform_Naming_Convention)？它可能会起作用……</p>

```
\\?\UNC\192.168.2.10\test\test1.txt
```

另请注意，Tcl`\`用作转义字符；生成文件名时可能需要特别小心。（调试时，在使用它之前将文件名打印到控制台，这样您就可以*确切地*知道您正在使用什么；这将避免很多麻烦！）您可能会发现该[`file nativename`](http://www.tcl.tk/man/tcl8.5/TclCmd/file.htm)命令对此有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:22:19.550

实际上，只需使用 xcopy 和共享的完整路径即可（至少在共享不受密码保护的情况下）。

因此，`xcopy \\192.168.2.10\test\test1.txt c:\temp`将测试文件复制到您的 C:\Temp 文件夹。

# ruby - Ruby Exerb：缺少文件类

> ID：10520468
> 
> 赞同：0
> 
> 时间：2012-05-09T16:44:28.877
> 
> 标签：ruby, compiler-construction

我这个工作的 Ruby 代码我想在 windowspc 上用 exerb 制作一个可执行文件。当我编译 hello_world.rb 时，运行可执行文件没有问题，但是使用此代码 Exerb 创建了我的可执行文件，但是当我运行它时，出现以下错误

```
undefined method `write' for File:Class (NoMethodError) 
```

这里的代码

```
def replace text
  replacements = [
     {:pattern => /(^ARFD0001\|.*)(FAC_12125)/, :replace_with => '\1FAC_12102'},
     {:pattern => /^ARFD0001\|121\|25\|ZIEFAC\|/, :replace_with => 'ARFD0001|121|02|ZIEFAC|'},
     {:pattern => /(^ARFD0010\|.*)(12125203)(\d{3})/, :replace_with => '\112102181\3'},
     {:pattern => /(^ARFD0010\|.*)(2030341401)/, :replace_with => '\1181701500'},
     {:pattern => /(^ARFD0019\|.*)(12125203)(\d{3})/, :replace_with => '\112102181\3'},
     {:pattern => /(^ARFD0019\|\d*\|\d*\|\d*)(\|{2})/, :replace_with => '\1|PRINT|'},
     {:pattern => /^ARFD0009\|121\|25\|/, :replace_with => 'ARFD0009|121|02|'}
  ].each{|replacement|text.gsub!(replacement[:pattern], replacement[:replace_with])}
  text
end

Dir.glob("*.txt").each{|file|File.write(file, replace(File.read(file)))}
#line above gives the error in Exerb 
```

如何进行？代码没有任何问题，在 Ruby 解释器中这是可行的，但似乎我必须告诉 Execrb 包含 File 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:54:56.217

类上没有 write 方法`File`。您必须先打开文件，然后才能对其进行写入。可以这样做：

```
Dir.glob("*.txt").each do |file|
  File.open(file, 'w') {|f| f.write replace(File.read(file))}
end 
```

# java - 存储大量单元的方法，具有大量属性

> ID：10520470
> 
> 赞同：0
> 
> 时间：2012-05-09T16:44:35.527
> 
> 标签：java, database-design, game-engine

我和一个朋友目前正在考虑开发一款游戏，它与某个注册商标的 francise 有相似之处。为了定义游戏中的单位，我们创建了一个表示 44 个变量的抽象类，以及需要为每个单位实例实例化的两个方法。这个游戏的下一步当然是定义游戏中的所有单位。不幸的是，我有 648 个单元需要定义，每个单元有 22 个最终值，必须在游戏中的每个单独实例化时检查。例如，如果我在游戏中遇到这个单元，我会传递一个它的值的方法，它会查看某种定义表，它给出了所有这些基本的最终值。当然，我们遇到的问题是找到一种有效且安全地执行此操作的方法。目前，为了测试其他方法，我通过枚举定义了一些单元，并将它们的值存储在一个数组中。我的伙伴建议我们创建一个定义类，它将查看明文查找表。但是，我认为这种解决方案的问题要么是长度，要么是查找表的数量很大。我四处搜索，但大多数解决方案都需要使用服务器。然而，我们当前的目标是发布一个已经定义了所有内容的离线客户端。但大多数解决方案都需要使用服务器。然而，我们当前的目标是发布一个已经定义了所有内容的离线客户端。但大多数解决方案都需要使用服务器。然而，我们当前的目标是发布一个已经定义了所有内容的离线客户端。

无论如何，我知道这很可能是漫无边际的，但是......有没有人对如何有效地存储具有 22 个不同最终属性的 648 个单元有任何建议，以便以后可以调用和检查这样的实体？我不需要完整的代码示例，但想法会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:57:32.507

您可能想要创建一个**数据库**，其中包含一个单位**表**和一组用于相应属性的**列（或字段）。**这是我能提供的最抽象的例子。

没有服务器的实现将需要一个**平面文件数据库**，例如[SQLite](http://www.sqlite.org/)。当然，如果您想按照朋友的建议构建自己的自定义数据库，那也是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:44:23.540

只需在 Google 文档中使用 Excel 或电子表格。编写表格，然后导出为 CSV（逗号分隔值）。创建、修改和解析将非常简单。

# c# - KeyDown 识别左右方 向键，但不识别上下方向

> ID：10520472
> 
> 赞同：6
> 
> 时间：2012-05-09T16:44:47.473
> 
> 标签：c#, winforms, keydown, keycode, arrow-keys

使用下面的代码，左右箭头键按预期工作，但向上和向下箭头无法识别（单步执行，前两个条件在适当的情况下满足，但后两个条件永远不会）：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e) {
    TextBox tb = (TextBox)sender;

    if (e.KeyCode.Equals(Keys.Left)) {
        SetFocusOneColumnBack(tb.Name);
        e.Handled = true;
        return;
    }
    if (e.KeyCode.Equals(Keys.Right)) {
        SetFocusOneColumnForward(tb.Name);
        e.Handled = true;
        return;
    }
    if (e.KeyCode.Equals(Keys.Up)) {
        SetFocusOneRowUp(tb.Name);
        e.Handled = true;
        return;
    }
    if (e.KeyCode.Equals(Keys.Down)) {
        SetFocusOneRowDown(tb.Name);
        e.Handled = true;
        return;
    }
} 
```

为什么会这样，我该如何解决？

## 更新

这是我在单步执行时将鼠标悬停在 e.Keycode 上时看到的内容。如果我按下

*   ...左箭头键，我看到了：`e.KeyCode = "LButton | MButton | Space"`
*   ...右箭头键，我看到了：`e.KeyCode = "LButton | RButton | MButton | Space"`
*   ...向上箭头键，我看到：`e.KeyCode = "RButton | MButton | Space"`
*   ...向下箭头键，我看到：`e.KeyCode = "Backspace | Space"`

这让我感到困惑（它向我展示了什么），但是在 keyleft 和 keyright 上，我的代码被输入了 - 无论我多么努力地咬紧牙关，它都不会用于 keyup 和 keydown。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:47:51.423

Windows 会在它们每次发送到您的表单之前捕获用于 UI 导航的某些键。如果要覆盖此行为，则需要重载`IsInputKey`方法（并将文本字段子类化）：

```
 protected override bool IsInputKey(Keys keyData)
    {
        if (keyData == Keys.Right)
            return true;
        return base.IsInputKey(keyData);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:45:04.493

我发现使用 PreviewKeyDown 确实有效（我不得不删除“e.Handled = true”代码，因为它不适用于 PreviewKeyDown 事件）：

```
private void textBoxQH1_PreviewKeyDown(object sender,   PreviewKeyDownEventArgs e) {
    TextBox tb = (TextBox)sender;

    if (e.KeyCode.Equals(Keys.Up)) {
        SetFocusOneRowUp(tb.Name);
        return;
    }
    if (e.KeyCode.Equals(Keys.Down)) {
        SetFocusOneRowDown(tb.Name);
        return;
    }
} 
```

因此，需要三个不同的事件来处理我正在寻找的各种键：KeyPress 用于常规字符，KeyDown 用于非字符（左右箭头键）和这个（PreviewKeyDown）用于向上和向下箭头键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-24T09:53:04.253

您可以使用以下代码：

```
private void TextBox1_KeyDown(object sender, KeyEventArgs e)
{
    switch (e.KeyCode)
    {
        case Keys.Up:
            //Do stuff
            break;
        case Keys.Down:
            //Do stuff
            break;
        case Keys.Left:
            //Do stuff
            break;
        case Keys.Right:
            //Do stuff
            break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-08T21:36:40.970

派对为时已晚，但如果有人感兴趣，请`e.KeyValue`改为使用`e.KeyValue`左箭头键`37`和右箭头键`39`等。

# tfs - 如何在 TFS 预览版（Azure 托管 TFS）中为产品积压项目制作错误？

> ID：10520484
> 
> 赞同：1
> 
> 时间：2012-05-09T16:45:16.057
> 
> 标签：tfs, azure-devops

我是团队基础服务器的新手，更具体地说，是[tfspreview.com](http://tfspreview.com)上的 TFS 预览版（Azure Hosted TFS） 。

我觉得奇怪的是，当我添加一个错误工作项并将其作为子项链接到我的一个用户故事时，它在系统中单独显示为一个“容器”，可以在我的 scrum 板中包含多个任务，如下所示.

![在此处输入图像描述](../Images/b01554870876dbe5f546a46b376c77f9.png)

*顺便说一句，这个虫子是那个周围有红色“圆圈”的虫子。*

如您所见，该错误旁边有一个加号图标，允许我为该错误添加任务。但为什么需要这样做呢？在哪种情况下很方便？对我来说，发现的每个错误总是需要 2 个任务（我的开发人员知道这一点）。

*   如果可能，构建一个自动化测试以重新创建错误。
*   修复错误本身，使上述测试通过。

那么如何让我的 bug 包含在我的“General: Translations”产品积压项目中，使其从“To-do”到“In-progress”，然后从“Completed”移动（作为一项任务）？现在它就像一个任务类别，这对我来说根本不合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:59:30.313

由于 TFS Azure 仍处于有限预览阶段，因此您不会很幸运地在这里找到资源，因为只有极少数用户可以访问 TFS Azure。最好的办法是通过论坛或通过 TFSadmin 直接联系 Azure TFS 团队。

[更多信息]

由于您使用的是 TFS 预览，因此它不能在 TFSPreview 中自定义，并且只有任务显示在“待办事项”中，可以拖动到不同的状态。不能使用其他类型。

您可以直接在这里发布您的问题：

*   [http://social.msdn.microsoft.com/Forums/en-US/TFService/threads](http://social.msdn.microsoft.com/Forums/en-US/TFService/threads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:11:56.380

*代替我上面的评论，我将添加这个作为答案，因为我收到了产品团队的确认，即这是答案。*

我假设您使用的是 Scrum 模板？错误被认为是产品待办事项，并且该模板被配置为在右侧显示这些。任务仅显示在 Scrum 模板的任务板上。

目前，使用 TFS Preview，您无法更改现有团队项目的流程模板。如果您想使用 MSF Agile 模板，您将需要创建一个新的团队项目。

# objective-c - 为什么字符串出现在 NSDictionary 中并带有引号，而其他的却没有？

> ID：10520486
> 
> 赞同：6
> 
> 时间：2012-05-09T16:45:19.550
> 
> 标签：objective-c, ios, nsdictionary, nslog

所以我有一个填充的 NSMutableDictionary，但是当我将内容输出到 NSLog 时，在 for 循环中输入的条目的键和值显示不同，最终的 NSLog 调用甚至不输出任何内容。这里发生了什么？？？请帮忙！为什么在 for 循环中添加条目周围的引号？？？

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                            numberOfPhotosAsString, @"PackageFileCount",
                            wtID, @"wtID",
                            uploadType, @"type",
                            nil];
    for (int i= 0; i < photos.count; i++)
    {
        NSString *finalFileName = [fileNameBase stringByAppendingFormat:@"%i", i];
        [params setObject:[[fileNames objectAtIndex:i] stringByAppendingString:@".jpg"] forKey:finalFileName];
        // This one doesn't do anything differently:
        //[params setValue:[[fileNames objectAtIndex:i] stringByAppendingString:@".jpg"] forKey:[fileNameBase stringByAppendingFormat:@"%i", i]];
    }
    NSLog(@"Params: %@", params);
    NSLog(@"Value: %@", [params objectForKey:@"SourceName_0"]); 
```

NSLog 的输出（我只在 for 循环中添加了一个值：“SourceName_0”=“tbyg.jpg”，但是为什么“SourceName_0”周围的引号？？？这里发生的任何事情都阻止我访问该字典条目......

日志：

```
2012-05-09 12:38:26.448 PhotoUp[6231:707] Params: {
    PackageFileCount = 1;
    "SourceName_0" = "tbyg.jpg";
    type = T;
    wtID = "6bcb4126-4bbe-4b3d-be45-9a06cf56a22f";
}
2012-05-09 12:38:26.449 PhotoUp[6231:707] Value: (null) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T17:24:00.200

出现引号是因为字符串包含基本字母数字以外的内容——在本例中为下划线。这是相同的原因`"tbyg.jpg"`并且`"6bcb4126-4bbe-4b3d-be45-9a06cf56a22f"`有引号（它们分别包含一个点和破折号）。这就是该`description`方法的工作原理。它不会导致您的第二个日志失败。

# c - 关于c语言中oop特性的困惑，我的陈述证明c中也有很多oop特性

> ID：10520488
> 
> 赞同：-2
> 
> 时间：2012-05-09T16:45:26.507
> 
> 标签：c

循环功能

1.  类：但c中也有结构和联合
2.  运算符重载：我们可以写 0.1+3.4 或 1+3 或 'a'+'b' 这是什么，+ 运算符用于整数、浮点数和字符加法，所以它是一种运算符重载？
3.  继承：在 c 中，当我们使用 include 将任何文件包含在另一个文件中时`include<iostream.h>`，我们将 iostream 文件包含在另一个文件中，这样我们也在 c 中实现了继承。

    简而言之，我的问题是针对每一个面向对象的问题，我都有一些论据，所以任何人都可以帮助我清除所有面向对象的特性与 c 语言的比较。

    c 不是面向对象的语言，但我上面的论点证明，c 也是面向对象的语言

    因此，与 c 语言相比，我想更加平静地了解面向对象的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:51:29.670

C 语言不支持面向对象编程，但这并不意味着您不能在代码中实现面向对象的概念（例如封装、信息隐藏、多态）。你只需要更加努力地去做，因为语言并不能帮助你。

Bjarne Stroustrup 必须做大量工作才能在 C 之上添加对 OOP 的语言支持。C++ 并非易事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:00:51.917

1 一个类不仅仅是一个联合或结构，一个类可以包含变量和方法（代码）联合或结构都不能包含逻辑。

1.  运算符重载不是严格意义上的 oo 特性，java 没有运算符重载。你的例子是一个有限的重载，你不能让 structA + structB 在c中工作

2.  加载库和继承之间有很大的区别。继承允许您创建一个具有父级所有行为的子类型，然后允许您修改它们或添加更多功能。你可以在 C 中做到这一点，但这会更加困难和复杂

您对 OO 概念的理解似乎相当有限，我会阅读一些基本的 OO 教程来了解这些概念。

# php - 如何延长 ELO 等级？

> ID：10520490
> 
> 赞同：1
> 
> 时间：2012-05-09T16:45:32.810
> 
> 标签：php, algorithm

在我的足球联赛中，我使用（用户与球队一起比赛）ELO 评级。一切正常。我需要关于如何扩展公式以反映加入的系数和团队成员力量的建议。（队伍有1到10的权力，1 =最弱的队伍，10最强的队伍）。

## 例如：

国内选手系数1000，客队选手系数1000，常数事件重要性32，结果1:0

主队球员获得 +16，-16 客队球员。

现在结合球队的实力（例如，力量 10/6），结果应该是这样的 -> +12 / -12 = 更强的球员和更强的球队获胜。

我不知道如何编辑。谢谢你。

ELO 评级公式 = [http://www.eloratings.net/system.html](http://www.eloratings.net/system.html)

对不起，我的英语不好。

==================================================== ========================

# 新的编辑和回答你的评论

有趣的想法，但并不完全准确。我将尝试通过一个小例子来演示：

player1：spinning_plate（1000 elo 积分） player2：Kcko（1000 elo 积分）

## 例子：

spin_plate Kcko 失败（例如 1:0），他们获得 +15 / -15 分 -> 这仍然可以，但现在我们包括团队的力量

改进：spinning_plate 为 FC Barcelona 效力（Force 10），击败 Kcko（弱队为 AS Monaco，例如 force 7），spinning_plate 获得少于 15 分（因为他们拥有更好的球队的优势。两名球员的 ELO 积分是相同的，但他们的团队的实力不同）。

你了解问题的本质吗？

球员为不同力量的不同球队效力，这应该包含在 ELO 功能中:)

它取自真正的公式（[http://www.eloratings.net/system.html](http://www.eloratings.net/system.html)）我需要通过真实的公式（s1和s2）来增加强度

```
$k1 - elo points of player 1
$k2 - elo points of player 2
$konstanta = weight constant for the tournament played
$g1 = goals for player 1
$g2 = goals for player 2
$s1 = new my own constant = strenght of team of player 1
$s2 = new my own constant = strenght of team of player 2

function elo($k1, $k2, $konstanta = 0, $g1, $g2, $s1 = 0, $s2 = 0)
{

    $arg_list = func_get_args();
    //debug($arg_list

    $s1 = (int) $s1;
    $s2 = (int) $s2;

    $G_rozdil = Abs($g1 - $g2); // golovy rozdil 
    // Konstanta za vysledek hry
    if ($g1 > $g2)  
        $W = 1;
    elseif ($g1 == $g2)
        $W = 0.5;
    else
        $W = 0;  

    // Rating puvodni, za domaciho
    $Ro = $koeficient1; 
    $K  = $konstanta; // Zakladni konstanta pro hrane zapasy, cim dulezitejsi turnaj tim vyssi 20-60
                        // a dale se navysuje o urcity koeficient pocitaneho z rozdilu golu
    if ($G_rozdil==2) 
        $K=$K*1.5;
    elseif ($G_rozdil==3) 
        $K=$K*1.75;
    elseif ($G_rozdil>3) 
        $K=$K*((1.75+(($G_rozdil-3)/8)));

    $dr = $k1 - $k2; // 100 zvyhodnuje hosta , protoze hraje venku 

    // Konecny result
    $Rn = $Ro + $K * ($W - $We);

    // To dostanou domaci
    $Body1 = Round($Rn - $Ro);

    // Toto hoste
    $Body2 = $Body1 * -1;

    if ($Body1 == 0 || $Body2 == 0)
    {
        return array(0, 0);
    }

    return array($Body1, $Body2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:02:55.733

我认为在这种情况下最好的办法是将计算机的优势转化为初步的 ELO 评级。

我以国际象棋和互联网国际象棋服务器（如[FICS](http://freechess.org) ）为例。当一台电脑玩游戏时，它就像人类对手一样被对待——它会获得一个初步评级，然后根据它在对抗人类和电脑对手时是赢还是输来进行评级。

但是，您可能会遇到引导问题，如果您没有足够的玩家，那么强大的计算机可能无法获得不错的评级，因为所有其他玩家都很弱。在这种情况下，您可以简单地将 1-10 映射到 MIN_RATING-MAX_RATING 的范围内。MAX_RATING 实际上不是最高评分，MIN_RATING 可能不应该为 0。ELO 是一个相对排名系统，绝对数字没有任何意义，因此您可以根据您的玩家群来选择它们。在国际象棋中，Grandmasters 的评分较高的是 27-2800 左右，最低的是 400 多岁的新手，他们坚持但没有提高。

这里的要点是，如果你给他们一个初步评级，随着时间的推移，他们会朝着他们的“真实评级”迈进，因为他们会与玩家进行游戏并相应地移动。

***编辑***

为什么不根据团队差异来缩放权重常数呢？像这样的东西怎么样：

```
K*(F(9-abs(s1-s2))) 
```

其中 F(x) 是一个[sigmoid 函数](https://en.wikipedia.org/wiki/Sigmoid_function)，甚至只是一个线性函数 [0...9]->[1...0}。这意味着具有相同评级的团队获得完整的常数，而具有较大差异的团队缩小到零或您选择的任何内容。

我不知道我是否同意这种计算是解决这个问题的最佳方法。如果您以这种方式使用它，ELO 的统计数据可能不适用，但如果不做更多研究，我没有更好的建议。

# objective-c - 如何动态更改 iCarousel 对象的 'wrap' 属性？

> ID：10520491
> 
> 赞同：0
> 
> 时间：2012-05-09T16:45:39.267
> 
> 标签：objective-c, ios, coverflow, icarousel

我正在使用 Nick Lockwood 在 github 上非常慷慨地提供的 iCarousel 库。它做得很好，我很欣赏高水平的抽象。

在用户测试期间，一些用户对我们应用程序上的封面流程感到困惑。我想这与音乐应用程序中的“原生”使用不一致。就个人而言，对于我们的使用，我认为它有很大帮助。

我们的“解决方案”是通过在设置菜单中提供一个选项来包装封面流程，让用户自行处理。我希望 iCarousel 会在视图激活时调用委托，然后检查用户设置的偏好。

不幸的是，我发现情况并非如此。

有没有办法在不重新加载整个视图的情况下“刷新”这个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:19:14.957

不调用 reloadData 是不可能的，因为启用 wrap 时轮播可能会显示一组不同的视图。

无论如何，调用 reloadData 对用户来说应该是不可见的，所以我认为调用它没有问题。

# java - Eclipse 中的应用程序窗口与 WindowBuilder

> ID：10520494
> 
> 赞同：5
> 
> 时间：2012-05-09T16:46:00.217
> 
> 标签：java, swing, gwt, swt, windowbuilder

`JFrame`我在 Java 编程方面相对较新，我一直在使用 Eclipse 和 WindowBuilder，但我不明白在 Swing Designer 中使用或应用程序窗口有什么区别。谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T17:23:49.700

好吧，两者之间没有太大区别，因为 JFrame 向导的唯一独特之处在于它自愿创建了一个 JFrame 子类。另一方面，具有 JFrame 的 Object 子类会在 Swing Designer 的 Application Window 向导中自动创建。在我看来，JFrame 向导总是更适合使用。

# parallel-processing - 单台机器上的 Octave 并行计算——包和示例

> ID：10520495
> 
> 赞同：13
> 
> 时间：2012-05-09T16:46:00.457
> 
> 标签：parallel-processing, octave

我想在单台机器（而不是集群）上并行化 Octave 中的 for 循环。前段时间我问了一个关于 Octave 并行版本的问题 octave 中的 [并行计算](https://stackoverflow.com/questions/7047840/parallel-computing-in-octave)

答案建议我下载一个并行计算包，我这样做了。该软件包似乎主要面向集群计算，但确实提到了单机并行计算，但不清楚如何运行甚至是并行循环。

我还发现了另一个关于 SO 的问题，但是我没有找到在 Octave 中并行化循环的好答案： [Running parts of a loop in parallel with Octave？](https://stackoverflow.com/questions/348465/running-portions-of-a-loop-in-parallel-with-octave)

有谁知道我在哪里可以找到在 Octave 中并行运行 for 循环的示例？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-05T20:55:03.297

I am computing large number of RGB histograms. I need to use explicit loops to do it. Therefore computation of each histogram takes noticeable time. For this reason running the computations in parallel makes sense. In Octave there is an (experimental) function [parcellfun](http://octave.sourceforge.net/parallel/function/parcellfun.html) written by Jaroslav Hajek that can be used to do it.

My original loop

```
histograms = zeros(size(files,2), bins^3);
  % calculate histogram for each image
  for c = 1 : size(files,2)
    I = imread(fullfile(dir, files{c}));
    h = myhistRGB(I, bins);
    histograms(c, :) = h(:); % change to 1D vector
  end 
```

To use parcellfun, I need to refactor the body of my loop into a separate function.

```
function histogram = loadhistogramp(file)
  I = imread(fullfile('.', file));
  h = myhistRGB(I, 8);
  histogram = h(:); % change to 1D vector
end 
```

then I can call it like this

```
histograms = parcellfun(8, @loadhistogramp, files); 
```

I did a small benchmark on my computer. It is 4 physical cores with Intel HyperThreading enabled.

My original code

```
tic(); histograms2 = loadhistograms('images.txt', 8); toc();
warning: your version of GraphicsMagick limits images to 8 bits per pixel
Elapsed time is 107.515 seconds. 
```

With parcellfun

```
octave:1> pkg load general; tic(); histograms = loadhistogramsp('images.txt', 8); toc();
parcellfun: 0/178 jobs donewarning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
warning: your version of GraphicsMagick limits images to 8 bits per pixel
parcellfun: 178/178 jobs done
Elapsed time is 29.02 seconds. 
```

(The results from the parallel and serial version were the same (only transposed).

```
octave:6> sum(sum((histograms'.-histograms2).^2))
ans = 0 
```

When I repeated this several times, the running times were pretty much the same all the time. The parallel version was running around 30 second (+- approx 2s) with both 4, 8 and also 16 subprocesses)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T22:25:51.630

八度循环很慢，很慢，很慢，而且你最好用数组操作来表达事物。让我们以在 2d 域上评估一个简单的 trig 函数为例，就像在这个[3d octave 图形示例](http://math.jacobs-university.de/oliver/teaching/iub/resources/octave/octave-intro/octave-intro.html#SECTION00052000000000000000)中一样（但计算点的数量更真实，而不是绘图）：

矢量化.m：

```
tic()
x = -2:0.01:2;
y = -2:0.01:2;
[xx,yy] = meshgrid(x,y);
z = sin(xx.^2-yy.^2);
toc() 
```

将其转换为 for 循环为我们提供了 forloops.m：

```
tic()
x = -2:0.01:2;
y = -2:0.01:2;
z = zeros(401,401);
for i=1:401
    for j=1:401
        lx = x(i);
        ly = y(j);
        z(i,j) = sin(lx^2 - ly^2);
    endfor        
endfor
toc() 
```

请注意，矢量化版本已经“赢得”了更简单和更清晰的阅读，但还有另一个重要优势；时间有很大不同：

```
$ octave --quiet vectorized.m 
Elapsed time is 0.02057 seconds.

$ octave --quiet forloops.m 
Elapsed time is 2.45772 seconds. 
```

因此，如果您正在使用 for 循环，并且您拥有完美的并行性而没有开销，那么您必须将其分解为 119 个处理器，以便与非 for-loop 保持平衡！

不要误会我的意思，并行性很棒，但首先要让事情以串行方式有效地工作。

几乎所有 octave 的内置函数都已经向量化，因为它们在标量或整个数组上运行得一样好；因此通常很容易将事物转换为数组操作，而不是逐个元素地进行操作。对于那些不那么容易的时候，您通常会看到已经存在的实用功能（例如 meshgrid，它从 2 个向量的笛卡尔积生成二维网格）来帮助您。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-21T17:35:43.020

现在`pararrayfun`可以在此处找到使用示例： [http ://wiki.octave.org/Parallel_package](http://wiki.octave.org/Parallel_package)

# mongodb - 如何使用 mongoose 将文档插入 mongodb 并获取生成的 id？

> ID：10520501
> 
> 赞同：44
> 
> 时间：2012-05-09T16:46:47.350
> 
> 标签：mongodb, mongoose

我正在使用mongoose来操作mongodb。现在，为了测试，我想通过本机连接将一些数据插入到 mongodb 中。

但问题是插入后如何获取生成的id？

我试过：

```
var mongoose = require('mongoose');

mongoose.connect('mongo://localhost/shuzu_test');

var conn = mongoose.connection;

var user = {
    a: 'abc'
};

conn.collection('aaa').insert(user);

console.log('User:');
console.log(user); 
```

但它打印：

```
{ a: 'abc' } 
```

没有`_id`字段。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-09T16:52:53.823

您可以`_id`自己生成并将其发送到数据库。

```
var ObjectID = require('mongodb').ObjectID;

var user = {
  a: 'abc',
  _id: new ObjectID()
};

conn.collection('aaa').insert(user); 
```

这是我最喜欢的 MongoDB 功能之一。如果您需要创建多个相互链接的对象，则无需在 app 和 db 之间进行多次往返。您可以在应用程序中生成所有 ID，然后插入所有内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-02-10T18:46:29.973

如果您使用 .save ，那么您将在回调函数中取回 _id 。

```
const User = require('../models/user.js');    

var user = new User({
  a: 'abc'
});

user.save(function (err, results) {
  console.log(results._id);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-20T13:11:48.740

如果你喜欢使用 Promises：

```
const collection = conn.collection('aaa');
const instance = new collection({ a: 'abc' });
instance.save()
    .then(result => {
        console.log(result.id);  // this will be the new created ObjectId
    })
    .catch(...) 
```

或者，如果您使用的是 Node.js >= 7.6.0：

```
const collection = conn.collection('aaa');
const instance = new collection({ a: 'abc' });
try {
    const result = await instance.save();
    console.log(result.id);  // this will be the new created ObjectId
} catch(...) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-20T08:00:00.613

您可以使用带有 upsert: true 选项的 Update 方法

```
aaa.update({
    a : 'abc'
}, {
    a : 'abc'
}, {
    upsert: true
}); 
```

# php - php mysql 从一个月中选择 4 周

> ID：10520502
> 
> 赞同：0
> 
> 时间：2012-05-09T16:46:50.690
> 
> 标签：php, mysql

我需要选择该月的所有 4 周。我是如何获得工作日的：

`SELECT impression_ip, WEEKDAY(FROM_UNIXTIME(impression_time)) FROM impressions WHERE impression_time BETWEEN start_timestamp AND end_timestamp`

idk mysql 函数，但如果你得到我，它应该类似于 MONTHWEEK

[PHP 片段在这里](http://jsfiddle.net/z3ahP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:55:35.220

可以在执行 SQL 语句之前实施解决方案。

鉴于今天的日期 -`2012-05-09`

```
$currentDate = date("Y-m-d");// Take the current date
//Add four weeks
$plusFourWeeks = strtotime($currentDate . " +4 weeks ");

echo $plusFourWeeks; 
```

日期 增加四个星期后：`2012-06-06`

```
                            为了您的方便——
                          或者如果您只是不信任我；）

```

# grails - 将翻译放入标签值的更优雅的方式

> ID：10520507
> 
> 赞同：1
> 
> 时间：2012-05-09T16:47:08.690
> 
> 标签：grails, view

一个小问题......

将翻译放在其他标签内的视图中的更优雅的方法是什么？

模式一：

```
<g:submitButton name="signup" value="${g.message(code:'signUp')}"/> 
```

或模式 2：

```
<submitButton id="signInOrUp" name="signInOrUp" value="<g:message code='signUp' />"/> 
```

谢谢你。

# apache - mahout PFPGrowth 算法的错误输出？

> ID：10520510
> 
> 赞同：0
> 
> 时间：2012-05-09T16:47:28.267
> 
> 标签：apache, hadoop, data-mining, mahout

我在 hadoop 集群上使用 mahout 的 PFP Growth 实现的最新主干版本来确定 movielens 数据集中的频繁模式。在上一步中，我将数据集转换为交易列表，因为 pfp 增长算法需要该输入格式。

但是，我得到的输出是出乎意料的

例如，对于项目 1017，唯一的频繁模式是

> 1017 ([100,1017, 50])

我还期望在该行中出现像 ([1017], X) 这样的模式，其中 X >= 50。

我还测试了一个示例输入

> 1,2,3
> 
> 1,2,3
> 
> 1,3

我得到的输出是

> 1 ([1, 3],3), ([1],3), ([1, 3, 2],2)
> 
> 2 ([1, 3, 2],2)
> 
> 3 ([1, 3],3), ([1, 3, 2],2)

缺少像 ([1,2],2) 这样的模式

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:47:42.060

原因是 FP 算法在其支持度不高的情况下不会输出频繁模式的子集。它在这里描述： [http ://www.searchworkings.org/forum/-/message_boards/view_message/396093](http://www.searchworkings.org/forum/-/message_boards/view_message/396093)

我需要重写代码以供我使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T15:17:53.590

我阅读了论文和代码，似乎 PFP 算法根本不正确。我想知道为什么没有人没有意识到这一点。

如果您已经了解 FP-Growth 并且只需要几个小时来阅读本文和代码，那就很明显了。

# events - 在 MS Excel 中侦听鼠标（拖放）事件

> ID：10520513
> 
> 赞同：4
> 
> 时间：2012-05-09T16:47:36.223
> 
> 标签：events, vba, excel, drag-and-drop

有没有办法识别 MS Excel 工作表上的拖放事件？我正在寻找的是能够在您将文件（例如从桌面）拖放到 MS Excel 工作表中的单元格上（并将文件名插入到单元格中）时能够收听事件。

这完全可以用 Excel 宏来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:25:11.830

我自己不确定如何执行该任务 - 但是，似乎有人已经尝试解决这个问题。我从[vbadud.blogspot](http://vbadud.blogspot.com/2007/05/drag-drop-files-to-text-box.html)中提取了这段代码：

```
' Place file on textbox to display filename.
Private Sub TextBox1_OLEDragDrop(Data As DataObject, Effect As Long, Button As Integer, Shift As Integer, X As Single, Y As Single)

' Declare variable(s).
Dim eventvar1 As Integer '* Files Counter

' If an error occurs, go to the Error Handler.
On Error GoTo Error_Handle1
'Drag N' Drop Event Handler
If Data.GetFormat(vbCFFiles) = True Then
eventvar1 = Data.Files.Count
    If eventvar1 = 1 Then
        If InStr(1, LCase$(Data.Files(eventvar1)), ".xls") Then
            txtExcel.Text = Data.Files(eventvar1)
        End If
    End If
End If

   ' Error Handler
    Error_Handle1:
        If Err <> 0 Then
            Debug.Assert Err = 0
            Err.Clear
        End If
    End Sub 
```

如果将文件放入文本框中，代码将发布文件的名称。您可以使用方法、函数甚至单独的子程序来使用已放入文本框中的文本。

例如，查看一篇关于将文本从文本框复制到单元格的[SO 文章](https://stackoverflow.com/questions/9461260/copy-and-paste-content-from-a-textbox-to-a-worksheet-cell-range)，您可以使用此代码将文本输入到 Excel 工作表上的范围中：

```
Range("A2").End(xlDown).Offset(1, 0).Value = TextBox1.Text 
```

从那里开始，它的问题是将子例程绑定到另一个宏以实现一种或另一种自动化形式，在您认为合适的情况下拖放，或任何对您有意义的事情。

让我知道这是否有帮助，

~乔尔

# emacs - Lisp 源代码文件本身是列表吗？

> ID：10520514
> 
> 赞同：9
> 
> 时间：2012-05-09T16:47:39.610
> 
> 标签：emacs, clojure, lisp, scheme, common-lisp

无论 Lisp 方言如何，看起来每个包含 Lisp 函数的源代码文件本身都不是一个列表（我第一次对此感到“惊讶”是在处理我的 Emacs *.el*文件时）。

我有几个问题，但它们都与同一个“问题”有关，可能只是我误解了一些事情。

为什么各种 Lisp 方言的源代码文件似乎是一堆“杂乱无章”的函数，像这样：

```
(function1 ...)
(function2 ...)
(function3 ...) 
```

而不是函数的“Lisp 列表”，可能是这样的：

```
(
  '(function1 ...)
  '(function2 ...)
  '(function3 ...)
) 
```

我对整个*“代码就是数据，数据就是代码”*的事情感到有点惊讶，因为看到源代码文件本身显然不是整洁的列表......或者他们是！？

源代码文件是否应该“操纵”？

例如，如果我想将我的一个*.clj* (Clojure) 源文件转换为某个 CSS+HTML 网页怎么办，源代码文件本身显然不是一个列表，这难道不是一个“问题”吗？

我从 Lisp 开始，所以我不知道我的问题是否有意义，欢迎任何解释。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T19:34:30.087

在 Common Lisp 中，源文件包含`lisp forms`和注释。Lisp 表单是数据或 Lisp 代码。对源文件的典型操作由函数`LOAD`和`COMPILE-FILE`.

`LOAD`将从文件中读取表单并一一执行。

`COMPILE-FILE`复杂得多。它通常读取表单并将它们编译为其他表示形式（机器代码、字节代码、C 代码……）。它不执行代码。

如果文件包含一个表单列表而不是多个表单，它将对您有什么帮助？

*   你会有一层添加的括号
*   您必须先阅读整个列表，然后才能对其进行任何操作（或者您需要不同的阅读器机制）
*   通过程序将表单添加到文件的末尾会很痛苦
*   您不能在文件中添加一些内容，这会改变读者对文件其余部分的解释
*   对于 LOAD，文件不能无限长

现在举个例子，编译器将从文件流中读取 lisp 形式并逐段编译它们。

如果你想要所有表格，你可以做

```
CL-USER 170 > (defun read-forms (file)
               (with-open-file (stream file)
                 (loop for form = (read stream nil nil)
                       while form
                       collect form)))
READ-FORMS

CL-USER 171 > (read-forms (capi:prompt-for-file "source file"))
((DEFPARAMETER *UNITS-TO-SHOW* 4.1)
 (DEFPARAMETER *TEXT-WIDTH-IN-PICAS* 28.0)
 (DEFPARAMETER *DEVICE-PIXELS-PER-INCH* 300)
 (DEFPARAMETER *PIXELS-PER-UNIT* (* (/ (/ *TEXT-WIDTH-IN-PICAS* 6)
                                       (* *UNITS-TO-SHOW* 2))
                                    *DEVICE-PIXELS-PER-INCH*))
... 
```

如果您想在所有内容周围加上括号，请使用`PROGN`：

```
 (progn
   'form-1
   (defun function-defintion-form () )
   42) 
```

`PROGN`还保留了其子形式的“顶级”。

**旁注**：几十年来，Lisp 已经探索了替代方案。最突出的例子是施乐公司现已不复存在的 Interlisp-D。Interlisp-D 由 Xerox PARC 与 Smalltalk 并行开发。Interlisp-D 最初使用结构编辑器来编辑 Lisp 数据，源代码被编辑为这样的 Lisp 数据。开发环境就是基于这个想法。但从长远来看，“作为文本的来源”赢了。您仍然可以在许多当前的 Lisp 环境中模拟其中的一些。例如，许多 Lisp 系统允许编写当前执行内存的“图像”——该图像包括所有数据和所有代码（也包括编译后的代码）。因此，您可以处理此数据/代码并不时保存图像。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-09T16:54:14.963

源代码文件只是一个方便的地方来存储您的列表。Lisp 代码（通常）旨在在[读取-评估-打印-循环](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)（REPL）中执行，其中每个输入本身就是一个列表。所以当你执行一个源代码文件时，你可以把它想象成其中的每个列表都被一个一个地读入一个 REPL。这个想法是你有一个完全交互式的环境，它补充了“代码就是数据”范式。

当然，您可以将文件视为一个巨型列表，但是您暗示该文件具有明确定义的结构，但并非总是如此。如果你真的想创建一个包含一个巨大列表的文件，那么没有什么能阻止你这样做。您可以使用 Lisp 阅读器将其作为一个大列表（数据？）读取并根据需要处理它（可能使用某种 eval？）。以 Leiningen 的 project.clj 文件为例。它们通常只是一个大的 defproject 列表。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T06:50:29.257

在 Lisp 中有两个级别的源代码，或者根本没有源代码，这取决于您如何定义源代码。

存在这两个级别是因为（通常）由 Lisp 解释器/编译器执行两个独立的概念步骤。

## 第一步：“阅读”

在这一步中，源代码是一个字符序列，例如来自一个文件。在这里，括号、带引号的字符串、数字、符号、引号甚至部分准引号语法都被处理并转换为 Lisp 数据结构。在这个级别，语法规则是关于括号、数字、管道、引号、分号、尖号、逗号、at 符号等。

## 第二步：“编译”/“解释”

在这一步中，输入是 Lisp 数据结构，输出是机器码、字节码，或者源代码可能直接由解释器执行。在这个级别，语法是关于特殊形式的含义......例如`(if ...)`，，`(labels ...)`等等`(symbol-macrolet ...)`。Lisp 代码中的结构是统一的（只是列表和原子），但语义不是（`if`表单看起来像函数调用，但它们不是）。

所以在这个观点中，你的答案是肯定的和否定的。第 1 步否，第 2 步是。如果您只考虑文件，那么答案是否定的……文件包含字符，而不是列表。读者可以将这些字符转换为列表。

## Lisp 没有语法

为什么有人说 Lisp 没有语法，而实际上有**两个**不同的语法级别？原因是这两个级别都在程序员的控制之下。

您可以通过定义阅读器宏来自定义级别 1，您可以通过定义宏来自定义级别 2。所以 Lisp 没有**固定**的语法，因此源文件可以以“lispy”的外观开始，并且可以看起来与 Python 代码完全一样。

源文件可以包含任何内容（从某一点开始），因为初始形式可以定义一些新的阅读规则，这些规则将改变后面字符的含义。

通常 Lisp 程序员不会在阅读级别上做疯狂的事情，因此大多数 Lisp 源代码文件看起来就像 Lisp 表单的序列，并且它们仍然是“lispy”。

但这不是一个硬性约束……例如，我并不是在开玩笑说 Lisp 语法变成了 Python：[有人确实做到了](http://common-lisp.net/project/clpython/manual.html)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-09T18:47:08.717

为了彻底，所有源文件都是文本，而不是 lisp 数据结构。要评估或编译代码，lisp 必须首先`READ`文件，这意味着将文本转换为 lisp 数据结构。回想一下首字母缩略词 REPL，前两个字母代表`READ`和`EVAL`。`READ`接受代码的字符串表示，并返回表示代码的数据结构。`EVAL`获取返回的数据结构，并将数据结构解释（或编译并运行）为代码。因此，重要的是要记住涉及中间步骤。

一个很好的问题是，当多个 s 表达式被传递给`READ`并且它们不在列表中时会发生什么，正如您提到的那样？

如果您查看代码，您通常会发现`READ`clojure 的多个版本`read-string`只读取并返回第一个 s 表达式，而忽略其余的。但是，clojure 中使用的阅读器`load-file`将获取整个字符串，并“有效地”（实现可能不同）围绕所有形式包装一个隐式`do`（或`progn`普通 lisp），然后将其传递给`eval`. 这种行为与 REPL 中发生的情况形成对比，表单是按顺序读取、评估和打印的。

不过，在这两种情况下，这种“幕后”行为都是为了简洁而做出的权衡。我们可以假设当我们加载一个 s 表达式的文本文件时，我们希望它们都被计算，并且最多返回最后一个 s 表达式的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-14T09:15:54.227

***在***（Lisp 的）开头有***一个交互式 REPL***：*读取*，然后*评估*，然后*打印结果并再次询问*，循环。您将在提示符处*键入一些文本。*运行时系统将“读取”它，将文本转换为“代码”的内部表示，然后评估（“执行”或其他）*它*：

```
> (setq s "(setq a 2)")
"(setq a 2)"
> (type-of s)          ; s is just a bunch of text characters
(SIMPLE-BASE-STRING 10)
> (setq r (read (make-string-input-stream s)))
(SETQ A 2)
> (type-of r)          ; the result of reading is Lisp data - a CONS cell
CONS                   ;     - - - - - - - - -    ~~~~~~~~~
> (type-of 'a)         ; A is just a symol
SYMBOL
> (type-of a)          ; ERROR: A has no value    
*** - EVAL: variable A has no value

> (eval r)             ; now what? The data got treated as code.
2                      ;               ~~~~                ~~~~
> a                    ; 'A' has got its value
2
> (setf (caddr r) 4)   ; alter the Lisp data object! that is 
4                      ;  the value of a symbol 'r'
> (eval r)             ; execute the altered data, as 
4                      ;  new version of code
> a
4 
```

所以你看，“s-expressions”、AST 等等都是抽象的，它们在 Lisp 中由具体的、简单的、基本的 Lisp 数据对象表示。

现在*源文件*并不神秘，它们只是让我们不必在 REPL 中一遍又一遍地键入我们的定义。如何*读取*源文件的内容完全是任意的，取决于具体的实现。您也可以轻松地拥有可以读取 Python、Haskell 或类似 C 的语法文件的实现。

当然，Common Lisp 标准定义了它的兼容实现应该如何读取它的 Common Lisp 源文件。但是您的系统也可以定义一些附加格式为有效读取。最重要的是，它受到将它们都表示为类似 Lisp 列表的语法的需要的限制，更不用说作为一个巨大的列表。可以随意处理源文本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-09T17:16:10.883

你建议的变体——有一个引用列表的列表——可能反映了（恕我直言）关于 Lisp ☺ 最令人困惑的事情是什么——引用！

基本的想法是这样的：

编译器（或解释器）传递您的输入（REPL 或源文件）。然后将每个列表*评估*为“表格”。大多数表单（列表）将属于`defun`. 评估`defun`表单会导致符号表发生变化（这是另一个讨论的主题）——它会根据表单中的符号名称执行操作`def`。`fun`(`(defun foo (bar) (print bar))`定义符号表应该有一个有效地`foo`计算为的条目`(lamba (bar) (print bar))`。)

这些列表*没有*被引用，因为我们希望它们立即被评估。`'(…)`用or引用`(quote …)`是为了*防止*编译器/REPL 立即评估某些东西。

您的编译器的输出（取决于它是哪一个）通常是某种二进制或字节码，其中包含您定义的所有这些函数；或者，也许只是最终被某种“主要功能”引用的那些。

如果您提供了类似的内容：

```
 (
         '(defun foo (bar) (print bar))
 ) 
```

您的编译器将尝试评估外部列表的第一个元素，这是一个带引号的`defun`特殊形式（或宏），并且没有任何事情可做。

尽管如此，您*可以*`read`使用而*不是* 它来执行诸如读取 Lisp 源文件之类的操作`eval`，就像您说的那样：生成 HTML“副本”或类似内容。

一旦深入研究`funcall`and `defmacro`，了解所有这些引号的归属（以及更好的是，反引号-逗号引用-取消引用范式）可能需要一段时间才能习惯......</p>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T17:04:03.143

在 Lisp 中，您可以直接对抽象语法树进行编程，该语法树表示为嵌套列表。由于 Lisp 是根据它自己的列表数据结构来表达的，因此宏会因此而失效，因为这些列表可以通过编程方式进行修改。我想最顶层的列表是隐含的，这就是为什么，至少在 Clojure 中，你看不到以`(`...开头和结尾的程序`)`。

# flash - Flash FacebookGraphAPI 上的 Facebook.init 无法连接

> ID：10520515
> 
> 赞同：1
> 
> 时间：2012-05-09T16:47:40.033
> 
> 标签：flash, facebook-graph-api

我正在使用 FacebookGraphAPI 开发 Flash AS3 应用程序，今天 05/09/2012 该应用程序无法与 Facebook 连接，我不知道该怎么办。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:58:30.693

这是今天 Javascript SDK 中的一个错误
[https://developers.facebook.com/bugs/420667497951980](https://developers.facebook.com/bugs/420667497951980)
[https://developers.facebook.com/live_status](https://developers.facebook.com/live_status)

这是一个已经回答的问题：
[Facebook AS3 api 登录框确实有效，一天后它没有](http://facebook.stackoverflow.com/questions/10518388/facebook-as3-api-log-in-box-did-work-a-day-later-it-does-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:23:36.310

我认为这与此处的问题相同[Facebook AS3 api 登录框确实有效，但一天后就没有了](http://facebook.stackoverflow.com/questions/10518388/facebook-as3-api-log-in-box-did-work-a-day-later-it-does-not/10522626#10522626)

1.- 如果您使用的是 GraphAPI_Web_1_8_1.swc，请将其删除。

2.- 从[这里下载修改后的图形 api](http://ederchrono.com/blog/srcfiles/GRAPHAPI_mod.rar)

3.- 将这些文件夹粘贴到您的库中，如果您让 facebook 文件夹覆盖它。

4.- 发布您的项目。

当 facebook 更改其文件 connect.facebook.net/en_US/all.js 时，这个问题就开始了，从 as3 文件“FacebookJSBridge.as”进行的所有调用都必须从“FB.JSON”更改为“JSON” .

# c++ - 与 char 数组连接的 C++ 字符串

> ID：10520520
> 
> 赞同：4
> 
> 时间：2012-05-09T16:47:54.757
> 
> 标签：c++, arrays, string, char, connect

这是一个好方法吗？

```
char* array = "blah blah";
char* array2 = "bloh bloh";
string str = string() + array + array2; 
```

不能做直接`string str = array + array2`，不能加2个指针。或者我应该这样做

```
string str();
str += array;
str += array2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:48:51.813

我会写：

```
string str = string(array) + array2; 
```

请注意，您的第二个版本[不是有效代码](https://stackoverflow.com/questions/2318650/is-no-parentheses-on-a-c-constructor-with-no-arguments-a-language-standard)。您应该删除括号：

```
string str;
str += array;
str += array2; 
```

最后，`array`and`array2`应该是 type 。**`const`**`char *`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:52:15.083

有很多方法可以做到这一点：

```
string str(array);
str += array2; 
```

或者

```
string str = string(array) + array2; 
```

甚至

```
string str = array + string(array2); 
```

或字符串流：

```
stringstream ss;
ss << array << array2; 
```

# c# - 使用事件和 BackgroundWorker 更新导致竞争条件的 UI

> ID：10520524
> 
> 赞同：3
> 
> 时间：2012-05-09T16:48:29.770
> 
> 标签：c#, winforms, multithreading, thread-safety, backgroundworker

我有两个班，`Apple`和`Dog`。这两个类都有一个在启动时调用的方法，`DoLotsOfWork()`它发布一个事件`ProgressChanged`。

```
public class Apple
{
    //For progress bars
    public event EventHandler<ProgressChangedEventArgs> ProgressChanged;
    private void OnProgressChanged(double progress)
    {
        if(ProgressChanged != null)
            ProgressChanged(this, new ProgressChangedEventArgs((int)(progress * 100), null));
    }

    //Takes a long time to run
    public void DoLotsOfWork()
    {
        for(lots of things)
        {
            ...
            OnProgressChanged(percentage);
        }
    }
}
//Dog is similar 
```

为了防止 UI 锁定，我使用`BackgroundWorker`. 我有`Apple.ProgressChanged`并`Dog.ProgressChanged`调用`BackgroundWorker.ReportProgress` *（调用`BackgroundWorker.ProgressChanged`事件）*来更新标签和进度条，所以用户知道发生了什么。

```
public class MainForm : Form
{
    private Apple _apple;
    private Dog _dog;
    private bool _isAppleCompleted;

    ...

    //Set the ProgressChanged callbacks and start the BackgroundWorker
    private void MainForm_Load(object sender, EventArgs e)
    {
        _apple.ProgressChanged += (a, args) => backgroundWorker1.ReportProgress(args.ProgressPercentage);
        _dog.ProgressChanged += (a, args) => backgroundWorker1.ReportProgress(args.ProgressPercentage);
        backgroundWorker1.RunWorkerAsync();
    }

    //Invoke the UI thread to set the status/progress
    private void SetStatus(string status)
    {
        lblStatus.Invoke((Action)(() => lblStatus.Text = status));
    }
    private void SetProgress(int progress)
    {
        progressBar.Invoke((Action)(() => progressBar.Value = progress));
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        _isAppleCompleted = false;
        SetStatus("Apple (Step 1/2)");
        _apple.DoLotsOfWork();

        //Thread.Sleep(1); //This *sometimes* fixes the problem!?

        _isAppleCompleted = true;
        SetStatus("Dog (Step 2/2)");
        _dog.DoLotsOfWork();
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        //_apple.DoLotsOfWork should cause the progress bar to go from 0 to 50
        //_dog.DoLotsOfWork should cause the progress bar to go from 50 to 100
        int progress = (_isAppleCompleted ? 50 : 0) + e.ProgressPercentage/2;
        SetProgress(progress);
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //stuff
    }
} 
```

**我期望发生的事情：**当进度条从 0% 移动到 50% 时，文本*“Apple (Step 1/2)” 。*然后，随着进度条从 50% 移动到 100%，会显示短语“Dog (Step 2/2)”。

**实际发生的情况：**只显示文本“Dog (Step 2/2)”。进度条从 0% 变为 100%，然后返回 50% 并向上移动到 100%。

* * *

因为我*认为*事件处理程序与事件调用者在同一个线程上运行；而且我*认为* `Control.Invoke()`在完成之前会阻塞`Action`，我看不出怎么会有任何竞争条件，因为一切基本上都是同步发生的。 **有谁知道为什么会发生这种情况，以及如何解决它？**

是的，我检查了`0 <= e.ProgressPercentage <= 100`, 和`progressBar.Maximum = 100`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:05:47.667

您在底部的假设是正确的，尽管您应该注意 BackgroundWorker 将在创建控件的线程上引发 ProgressChanged，因此从工作线程调用 backgroundWorker1.ReportProgress 会调用 UI 线程上的 ProgressChanged 处理程序（假设这是你在哪里创建了后台工作程序），所以并不是所有的事情都是同步发生的。这也意味着您的私有 SetProgress 方法中的 Invoke 是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:15:51.900

通过在后台工作人员中调用 Invoke() 方法，您正在破坏拥有后台工作人员的目的。要更新您的进度： 1\. BackgroundWorker 应该调用 ReportProgress 方法。
2.在WinForm上的BackgroundWorker控件中，添加一个ProgressChanged处理程序来更新你的进度

# .net - Spring .NET oracle 连接失败

> ID：10520530
> 
> 赞同：0
> 
> 时间：2012-05-09T16:48:59.100
> 
> 标签：.net, spring.net

在 Spring .NET 中，我需要连接到 Oracle 数据库，我确定连接信息是正确的，但仍然没有打开 Oracle 连接。

提供商正在使用“OracleODP-2.0”，我如何验证我的项目/PC 中安装了正确的 Oracle .NET 驱动程序？

例外是

```
[OracleException (0x80004005)]
   Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck) +1440
   Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, Object src) +80
   Oracle.DataAccess.Client.OracleConnection.Open() +7561 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:33:07.607

我遇到了同样的问题。它与连接字符串没有任何关系，我们假设它是正确的。我发现来自 Oracle 客户端的关键文件丢失了。添加它们后，我就不再收到此错误。我已将其缩小到以下最小文件数。高级功能可能需要更多文件，但这些是您在安装中应该拥有的最低限度。我正在使用*OracleClient 11.2.0.3.0*：

*   **Oracle.DataAccess.dll** *（主要参考程序集）*
*   **OraOps11w.dll**
*   **oci.dll**
*   **oraociei11.dll** *（这是修复 Open() 异常错误的主要 DLL）*

# javascript - 试图有多个 jquery 对话框

> ID：10520531
> 
> 赞同：0
> 
> 时间：2012-05-09T16:49:00.713
> 
> 标签：javascript, jquery

我知道在一个页面中有一个与这个[Multiple Jquery modal Dialog Boxes 类似的问题？](https://stackoverflow.com/questions/972316/multiple-jquery-modal-dialog-boxes-in-one-page) 但它没有给我我需要的答案

这是js：

```
$("#dialog").dialog({
    autoOpen:false,
    modal:true,
    show:"puff",
    hide:"puff"
});

$(".opener").click(function () {
    $("#dialog").dialog("open");
    return false;
});

$("#dialog2").dialog({
    autoOpen:false,
    modal:true,
    show:"puff",
    hide:"puff"
});

$(".opener2").click(function () {
    $("#dialog2").dialog("open");
    return false;
}); 
```

即使在#dialog2 上它说 autoOpen:false 它还是会自动打开...有人有解决方案吗？这是我的网站[timothy.techbypaul.com](http://timothy.techbypaul.com/)当你第一次到达时它会弹出......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:14:36.043

您的第二个对话框还有另一个初始化`autoOpen: true`选项。

在部分的[主脚本](http://timothy.techbypaul.com/js/mainjs.js)中检查它`jQuery(document).ready`。

# bugzilla - 将组件移动到 Bugzilla 中的另一个产品？

> ID：10520532
> 
> 赞同：2
> 
> 时间：2012-05-09T16:49:06.627
> 
> 标签：bugzilla

我们有两种产品，A 和 B，本来应该是一种产品。

每个产品都有许多组件。

我希望能够移动 B 的组件，以便它们属于 A。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:15:19.340

一个不太容易的方法是

*   在产品 A 下创建相同的组件。
*   在尝试从产品 B 中删除组件时，Bugzilla 会提示您转移这些组件下已经存在的错误
*   将这些错误重新分配给产品 A 中的各个组件
*   转移后从产品 B 中删除组件

你们都准备好了！

# xml - Eclipse indigo 验证 xsd 文件时出错

> ID：10520533
> 
> 赞同：0
> 
> 时间：2012-05-09T16:49:06.713
> 
> 标签：xml, eclipse, wsdl, xsd

对于任何具有 xml 模式工作知识的人来说，这可能是一个基本错误，它可能只是 Eclipse Indigo 中的一个小配置更改问题，但它耗尽了我的谷歌搜索能力，所有实验都未能解决它。

它是现有项目中运行愉快的 xsd 文件。我将项目设置为 Eclipse 中的 maven / 动态 web 项目，在为动态 web 项目 2.4 打开 Eclipse 的项目方面后，Eclipse 坚持认为我的文件有问题。

这是 xsd 开始（在指向的指针上记录了错误`www.w3.org/2001/xmlschema`）

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<definitions 
    name="ThreeDSecureService" 
    targetNamespace="http://magpie.webservices.valueobject.domain.acme.com/"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://magpie.webservices.valueobject.domain.acme.com/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <types> 
```

以下是错误：

> s4s-elt-invalid：元素“定义”不是模式文档中的有效元素。magpie.xsd /Model/src/main/resources 第 8 行 XML Schema 问题
> 
> s4s-elt-schema-ns：元素“定义”的命名空间必须来自模式命名空间“http://www.w3.org/2001/XMLSchema”。magpie.xsd /Model/src/main/resources 第 8 行 XML Schema 问题
> 
> schema_reference.4：无法读取架构文档'file:///home/adahar/projects/Model/src/main/resources/magpie.xsd'，因为1）找不到该文档；2) 文件无法读取；3) 文档的根元素不是 . magpie.xsd /Model/src/main/resources 第 8 行 XML Schema 问题

感谢您提供任何帮助/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:20:15.803

原来文件是垃圾。这是一个带有错误文件扩展名的 .wsdl 文件，而且它不应该存在。所以 Eclipse 的错误是有道理的，我也学到了一些关于 web 服务和 XSD 的知识。我会更加警惕来自我们的 SCM 的文件，这些文件是由执行该操作的提交者签入的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:52:18.440

XSD 的根元素必须是`xsd:schema`（而不是`definitions`）。查看一些 XSD 示例以了解如何开始。您需要`xsd:`前缀，因为 XSD 元素的 XML 命名空间是`xsd`这样设置的：`xmlns:xsd="http://www.w3.org/2001/XMLSchema`

# php - 通过 HTML 编辑 MySQL 数据库——选项？

> ID：10520536
> 
> 赞同：2
> 
> 时间：2012-05-09T16:49:16.010
> 
> 标签：php, mysql, html, database, edit

我有一个 MySQL 数据库（目前使用 phpmyadmin 来管理），我想将其显示为 HTML 表格并能够直接编辑记录/列。

我有哪些实施方案？我不确定我应该寻找更多信息的术语。

我已经在使用 php/mysql 来显示带有复选框的表格，用于即时删除多条记录，但我需要能够查看页面上的完整条目并编辑各个值。

另外，无论如何要通过 HTML 表格“排序”？没必要，只是好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:12:11.343

看看 phpGrid [http://phpgrid.com/](http://phpgrid.com/) 它有所有的花里胡哨，而且很容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:52:42.013

一个很好的工具是`phpMyAdmin`. 自己编写这样的东西很困难。

可能还有其他“更轻”的选择。看看这个：[http ://www.google.com/search?q=database+html](http://www.google.com/search?q=database+html)

# java - 安卓数字键盘

> ID：10520538
> 
> 赞同：2
> 
> 时间：2012-05-09T16:49:21.480
> 
> 标签：java, android, compiler-errors

我正在尝试添加键盘侦听器...

```
txta1cresult.setOnEditorActionListener(new OnEditorActionListener() {
    public boolean onEditorAction(TextView v,int actionId, KeyEvent event) {
        if(actionId==EditorInfo.IME_ACTION_DONE){
            calculate();
        }
    return false;
    }
}); 
```

但是，我收到以下编译器错误...

```
/home/jocala/hba1c/src/com/android/hba1c.java:82: cannot find symbol
symbol  : class OnEditorActionListener
location: class com.jocala.hba1c.hba1c
txta1cresult.setOnEditorActionListener(new OnEditorActionListener() { 
```

这是我的`EditText`...

```
<EditText
    android:id="@+id/txta1cresult"
    android:inputType="numberDecimal"
    android:layout_width="80px"
    android:maxLength="5"
    android:layout_height="40px"
    android:textSize="18sp"
    android:layout_x="200px"
    android:layout_y="32px"
    >
</EditText> 
```

我需要导入和以外的东西`EditText`吗`TextView`？这里还有什么问题吗？

```
 [javac] Compiling 3 source files to /home/jeff/hba1c/bin/classes
  [javac] /home/jeff/hba1c/src/com/android/hba1c.java:83: cannot find symbol
  [javac] symbol: class KeyEvent
  [javac]     public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
     [javac]                                                       ^
[javac] /home/jeff/hba1c/src/com/android/hba1c.java:84: cannot find symbol
[javac] symbol: variable EditorInfo
[javac]         if(actionId==EditorInfo.IME_ACTION_DONE){
[javac]                      ^
[javac] 2 errors 
```

修复导入后剩余 2 个错误：

```
[javac] Compiling 2 source files to /home/jeff/hba1c/bin/classes
[javac] /home/jeff/hba1c/src/com/android/hba1c.java:161: cannot find symbol
[javac] symbol: class KeyEvent
[javac]     public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
[javac]                                                             ^
[javac] /home/jeff/hba1c/src/com/android/hba1c.java:162: cannot find symbol
[javac] symbol: variable EditorInfo
[javac]         if(actionId==EditorInfo.IME_ACTION_DONE){
[javac]                      ^
[javac] 2 errors 
```

它似乎扼杀了这段代码：

```
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    if(actionId==EditorInfo.IME_ACTION_DONE){
        calculate();
    } 
```

最后修复：

导入android.view.KeyEvent；导入android.view.inputmethod.EditorInfo；

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:03:26.470

看起来你需要导入[`TextView.OnEditorActionListener`](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)

相关，注意`KeyEvent`参数。如果操作是由 Enter 键触发的（听起来像您想要做的），它将在该参数中。您可以尝试这样做，而不是从`int`参数中收集它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:04:41.163

您需要`android.widget.TextView.OnEditorActionListener`在代码中导入。

或者，从这个改变你的听众......

```
txta1cresult.setOnEditorActionListener(new OnEditorActionListener() { 
```

对这个...

```
txta1cresult.setOnEditorActionListener(new TextView.OnEditorActionListener() { 
```

你得到的编译器错误基本上是说不知道是什么`OnEditorActionListener`，所以你需要导入它。

# c# - C# 我有一个超类对象数组，其中可能包含子类对象。如何测试子类对象并使用它的访问器？

> ID：10520543
> 
> 赞同：0
> 
> 时间：2012-05-09T16:49:35.347
> 
> 标签：c#

我有一个`Array`这个`AutoMobiles` 数组可能包含子类对象`Truck`或`Car`.

如何测试对象类型的数组中的位置？例如：

```
if(AutoMobileArray[1].IsObject(Car)){} 
```

该类`Car`有一个独特的访问器

```
public String BootSpace() 
```

如何使用子类对象访问器？例如：

```
if(AutoMobileArray[1].IsObject(Car))
{
    BootSpaceLabel.Text = AutoMobileArray[1].BootSpace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:50:57.490

```
if(AutoMobileArray[1] is Car){ } 
```

`is`运营商：http: [//msdn.microsoft.com/en-us/library/scekt9xw (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/scekt9xw(v=vs.71).aspx)

然后，您可以转换为适当的类型：

```
if(AutoMobileArray[1] is Car)
{
    Car car = (Car)AutoMobileArray[1];
    BootSpaceLabel.Text = car.BootSpace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:52:07.897

好吧，如果我理解正确的话，那就是`is`运营商：

```
if(AutoMobileArray[1] is Car)
{
  //Do stuff here
} 
```

要处理子类（子类中定义的访问方法等），您需要强制转换：

```
if(AutoMobileArray[1] is Car)
{
  Car c = (Car)AutoMobileArray[1];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T16:52:36.730

```
Car car = AutoMobileArray[1] as Car;
if(car != null)
{
    BootSpaceLabel.Text = car.BootSpace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T15:07:55.377

您可以简单地使用这样的表达式：

```
if (AutoMobileArray[1] is Car)
{
    BootSpaceLabel.Text = AutoMobileArray[1].BootSpace();
} 
```

尽管有一些解决方法如何不使用“is”关键字，例如，您可以在`AutoMobile`类中定义方法，如下所示：

```
virtual string BootSpace()
{ 
    return string.Empty; 
} 
```

或者

```
abstract string BootSpace(); 
```

以及`override`Car 子类（和其他子类，根据您的业务逻辑）中的此方法：

```
override string BootSpace()
{
    //Car bootspace logic here 
} 
```

之后，您可以简单地调用`BootSpaceLabel.Text = AutoMobileArray[1].BootSpace();`而不检查对象类型；

处理这个问题的更高级和“漂亮”的方法是使用“设计模式”。有许多标准设计问题得到了有效解决。它们被称为设计模式。在您的情况下，策略模式可能很有用。[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

# wpf - SoundPlayer 的替代品

> ID：10520548
> 
> 赞同：2
> 
> 时间：2012-05-09T16:49:56.110
> 
> 标签：wpf, soundplayer

我正在使用`SoundPlayer`该类在我的 WPF 应用程序中播放 WAV 文件。这些文件很短，是应用程序的一部分，并根据程序中发生的事件进行播放。用户无法控制播放什么声音，也无法自行决定播放声音。我也尝试过使用 WPF`MediaPlayer`控件，但我遇到了该控件的问题。效果很好，`SoundPlayer`但是有问题。

本质上，我需要保留一系列声音，并在它们排队时一个接一个地播放声音。在某些情况下，我必须停止播放任何声音并播放另一种声音。`SoundPlayer`所以我有两个要求与控件互斥：

1.  我的代码需要知道声音何时播放完毕。
2.  声音必须在后台播放

为了实现这一点，我创建了一个名为`SoundController`. 这有一个后台线程，它使用`Thread`'s `Dispatcher`对我用来播放声音的方法的调用进行排队，使用`BeginInvoke`. 该方法在`SoundController`调用播放声音之前在事件中引发一个事件`SoundPlayer.PlaySync`，然后在`PlaySync`返回后引发另一个事件。

在我的 UI 线程中，在我需要停止声音的地方，我调用了`SoundController`类的`Stop`方法。这会调用`SoundPlayer`'`Stop`方法来停止播放声音。这就是问题发生的地方。事实证明，`SoundPlayer.Stop`它不会停止声音，而是等待声音结束后再返回。

这会阻止我的 GUI 死机。虽然我可以异步调用它，但我的 GUI 不会停止，但声音也不会停止。

正如我所说，WPF MediaPlayer 对我们不起作用，而且无论如何它是矫枉过正的。是否有其他播放声音的替代方法可以让我能够引发事件、在后台线程中播放声音并停止播放？

2012 年 6 月 26 日编辑：

这个问题已经存在一个多月了，我还没有收到任何回复。所以我想没有其他替代`SoundPlayer`控制。

我将从不同的角度发布一个新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:55:27.920

没有人回答这个问题，我已经超越了这个。因此，对于任何想知道的人来说，替代方案是`MediaElement`WPF 控件和进行 WIN32 API 调用。

那么我使用了哪种替代方法？两者都不。

事实证明，对我来说，我不得不在我的`SoundController`班级中添加第二个线程。第二个线程不运行`Dispatcher`; 相反，它运行我在循环中编写的代码：

1.  它最初无限期地等待`AutoResetEvent`.
2.  当`AutoResetEvent`引发时，它会启动一个 while 循环，检查是否要播放声音。
3.  如果要播放声音，它会这样做。
4.  它循环播放，如果在播放最后一个声音时“排队”了另一个声音，它就会播放那个声音。
5.  重复此过程，直到没有声音排队播放。

还有一点点，但没关系。无论如何，这似乎工作正常。因为声音是在一个单独的 上播放的`Thread`，所以当前播放的声音可以`Thread`通过调用该`SoundPlayer.Stop`方法从一个不同的地方中止。

**编辑：**

这是我的代码的精简版本。我删除了一些特定于我的程序要求的东西，这些东西与特殊的声音有关。这显示了基本过程是如何工作的。

```
private string NextSound { get; set; }
public AutoResetEvent PlayASoundFlag = new AutoResetEvent( false );
private Dictionary<string, SoundPlayer> Sounds { get; set; }
private object soundLocker = new object();
public string SoundPlaying { get; private set; }
public bool Stopping { get; set; }

public void PlaySound( string key, bool stopCurrentSound ) {
    if ( !Sounds.ContainsKey( key ) )
        throw new ArgumentException( string.Format( "Sound \"{0}\" does not exist", key ), "key" );

    lock ( soundLocker ) {
        NextSound = key;
        if ( SoundPlaying != null && stopCurrentSound )
            Sounds[ SoundPlaying ].Stop();
        PlayASoundFlag.Set();
    }
}

private void SoundController() {
    do {
        PlayASoundFlag.WaitOne();
        while ( !Stopping && NextSound != null ) {
            lock ( soundLocker ) {
                SoundPlaying = NextSound;
                NextSound = null;
            }
            Sounds[ SoundPlaying ].PlaySync();
            lock ( soundLocker )
                SoundPlaying = null;
        }
    } while ( !Stopping );
} 
```

当您的程序启动时，该类将键和声音文件加载到`Sounds Dictionary`. 这样，用户所要做的就是将他们想要播放的声音的密钥传递给该`PlaySound`方法。

如果您愿意，可以将`NextSound`属性替换为`Queue`. 该`PlaySound`方法必须将要播放的声音的键加入队列，并且`SoundController`线程必须从`while`循环中的线程中取出每个键，当`Queue`.

最后，当您的程序停止时，您需要将`Stopping`标志设置为 true 并设置 PlayASoundFlag 以便代码退出循环。这将导致`SoundController`线程停止。

我把初始化`Dictionary`和启动线程留给你。

# java - Http连接中断检测

> ID：10520550
> 
> 赞同：1
> 
> 时间：2012-05-09T16:50:09.973
> 
> 标签：java, web-services, http, rest, servlets

让我们想象一个 Web 客户端向服务器发出 HTTP 请求。

我需要一种方法来知道客户端是否在服务器处理它的请求时关闭了连接。

我知道有 499 状态代码（客户端关闭请求），但据我所知，它是针对 Nginx Web 服务器的请求。

我正在使用 Websphere Application Server，并按照[以下步骤](https://stackoverflow.com/questions/1302072/how-can-i-get-the-http-status-code-out-of-a-servletresponse-in-a-servletfilter)获取状态代码：

# php - 从另一个类访问一个类中的一个类

> ID：10520553
> 
> 赞同：1
> 
> 时间：2012-05-09T16:50:25.433
> 
> 标签：php, oop, class, design-patterns, object

我需要我的父类能够访问子类中的方法。子类显然能够访问它们继承的父类方法。

但是，如果孩子 A 想借一个属于孩子 B 的玩具怎么办？孩子 A 会问父母是否可以从孩子 B 那里借那个玩具。父母告诉孩子 A，他们会从孩子 B 的房间里把它拿下来给孩子 A 玩。

我还在下面创建了这个场景来帮助说明我在这里需要什么。不太确定如何去做。

[故事]

假设您购买了新房子。您希望重新粉刷您工作时间的某些区域。哦，顺便说一句，你需要检查你的管道。

所以我们有一个人、房子、画家和水管工。

该人将找到众议院的问题区域，并将其写下来。然后，此人需要找到水管工和油漆工并打电话给他们，报告他们的问题。

然后，水管工和油漆工将带着他们的专业工具和设备出现在房子里，继续他们的工作。

**房子**将有以下区域：

1.  洗手间
2.  下沉
3.  淋浴
4.  外墙板
5.  内墙

    *   水管工需要使用厕所、水槽和淋浴间。
    *   画家将需要使用外墙和内墙。

所以水管工和油漆工已经到了房子，开始做他们最擅长的事情。

首先，水管工需要在内部完成他的工作，所以一旦水管工完成，油漆工将开始绘制外部壁板并移动到内墙。

水管工已经完成了他的工作。管道工向人员报告，让他们知道工作已完成。

然后，Person 告诉 Painter 管道工已经完成，并且当 Painter 准备好后，Painter 可以开始粉刷内墙。

在这种情况下，哪种类结构最好？我阅读了一些引起我兴趣的模式。

命令模式和对象池。

我认为对象池是更多的选择。这里有什么输入吗？

另外，如果我确实采用了对象池路线，那么在构造函数中实例化每个类并准备好供以后使用会更好吗？或者我应该仅在需要使用每个类时实例化它吗？（可能通过一些“运行”或“执行”方法完成）。

示例将不胜感激。

另外，我宁愿不使用静态调用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:13:18.377

如果我理解正确，您想要做的是`static`在您的父类中创建一个变量，该变量包含对您的子实例的所有引用（您必须自己跟踪实例，例如在您的`function __construct`和`function __destruct`.

```
class Parent {
    public static $references = array;

    public function __construct() {
        Parent::$references[] = $this;
    }

    public function __destruct() {
        // loop through $references and kill $this from it.
    }

    public function run($ref, $func) {
         // find the reference in $references and store to $r
         if (method_exists($func, $r)) {
             $r->$func();
         }
    } 
```

# lucene.net - 具有字段依赖性的 Lucene 查询

> ID：10520561
> 
> 赞同：1
> 
> 时间：2012-05-09T16:51:36.033
> 
> 标签：lucene.net, sitecore

我有一个具有 _IsPrivate 字段的文档的 lucene 索引。我需要查询索引以检索 _IsPrivate == false 或 _IsPrivate == true 和 _Owner == me 的所有文档。我一直在尝试以下 lucene 查询，但没有得到预期的结果......

```
_IsPrivate:false OR (_IsPrivate:true  AND _Owner:me) 
```

结果是我只获得了我拥有的文件（公共和私人）。

有什么想法可以重写我的查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:22:03.097

我会使用“BooleanQuery”来执行这种操作。您进行 2 个查询，每个查询语句对应一个完整的搜索语句，然后将它们与“SHOULD”运算符相加。

```
var bq = new BooleanQuery();
var bq1 = new BooleanQuery();
bg1.add(new Term("_IsPrivate", "false"), BooleanClause.Occur.MUST);
var bq2 = new BooleanQuery();
bg2.add(new Term("_IsPrivate", "true"), BooleanClause.Occur.MUST);
bg2.add(new Term("_Owner", "me"), BooleanClause.Occur.MUST);
bq.add(bq1, BooleanClause.Occur.SHOULD);
bq.add(bq2, BooleanClause.Occur.SHOULD); 
```

这可能有点麻烦，但我真的很喜欢以这种方式组织我的查询。

希望能帮助到你。

# android - 如果 ZoomCamera 从其原始位置移动，HUD 上的 Sprite 按钮不会检测到触摸事件

> ID：10520562
> 
> 赞同：1
> 
> 时间：2012-05-09T16:51:39.813
> 
> 标签：android, opengl-es-2.0, andengine

我正在尝试在 ZoomCamera 的 HUD 上放置一些可点击的精灵。精灵可以很好地检测到触摸事件，但前提是 ZoomCamera 放置在其原始位置。

如果我放大或平移相机，似乎触摸区域相对于场景保持在其区域中，而不是相机。因此，仅当我单击精灵以原始状态存在的区域时，该操作才有效。

这是大部分相关代码 -

```
FloorSelectorButton firstButton = new FloorSelectorButton(0, 100, 80, 80,
            this.getVertexBufferObjectManager(), 3, this);

    FloorSelectorButton secondButton = new FloorSelectorButton(0, 180, 80, 80,
            this.getVertexBufferObjectManager(), 2, this);

    FloorSelectorButton thirdButton = new FloorSelectorButton(0, 260, 80, 80,
            this.getVertexBufferObjectManager(), 1, this);

    mScene = new Scene();
    mScene.setOnAreaTouchTraversalFrontToBack();
    HUD hud = new HUD();

    mZoomCamera.setHUD(hud);

    hud.attachChild(firstButton);
    hud.attachChild(secondButton);
    hud.attachChild(thirdButton);

    hud.registerTouchArea(firstButton);
    hud.registerTouchArea(secondButton);
    hud.registerTouchArea(thirdButton);
            this.mScrollDetector = new SurfaceScrollDetector(this);
        this.mPinchZoomDetector = new PinchZoomDetector(this);
        this.mScene.setOnSceneTouchListener(this);
        this.mScene.setTouchAreaBindingOnActionDownEnabled(true);
        return mScene; 
```

FloorSelectorButton 只是一个扩展 Sprite 并实现 onAreaTouch 方法的类。

我希望你们能帮助我！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:47:31.053

显然我的问题真的很愚蠢。似乎由于某种原因，APK 没有在手机上更新，它仍然使用旧代码（因此 - [http://groups.google.com/group/android-developers/browse_thread/thread/2eb92316b474fa00](http://groups.google.com/group/android-developers/browse_thread/thread/2eb92316b474fa00)）在哪里我在场景中设置了 registerTouchArea 而不是 HUD。

所以现在它已经修复了！:)

无论如何谢谢！

# php - php词过滤功能？

> ID：10520564
> 
> 赞同：1
> 
> 时间：2012-05-09T16:51:43.990
> 
> 标签：php, mysql, sql, arrays, loops

我已经编程了这个功能

```
function bad_words($val){
    global $pre; 
    $sql = mysql_query("SELECT * FROM " . $pre . "BAD_WORDS") or die(mysql_error());
    $rs = mysql_fetch_assoc($sql); 
    if (mysql_num_rows($sql) > 0) { 
        $bad_words = $rs['BAD_WORD']; 
        $replace = $rs['REPLACE']; 
    } 
    $val = str_ireplace($bad_words, $replace, $val);
    return $val; 
} 
```

* * *

`BAD_WORDS Table (ID, BAD_WORD, REPLACE)`

* * *

当我使用这个函数时，它用 id = 1 替换单词，但不替换其他单词。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:55:59.827

您只从表中获取第一行。您必须使用循环来遍历结果集中的所有行。

```
function bad_words($val)
{
global $pre;
$sql = mysql_query("SELECT * FROM " . $pre . "BAD_WORDS") or die(mysql_error());

if (mysql_num_rows($sql) > 0) {
   while($rs = mysql_fetch_assoc($sql)) {
      $bad_words[] = $rs['BAD_WORD'];
      $replace[] = $rs['REPLACE'];
   }
}
$val = str_ireplace($bad_words, $replace, $val);
return $val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:56:13.167

嗯，那是因为你没有循环遍历结果行，你只是在第一行上执行代码。一旦您确定存在一行或多行 ( `if (mysql_num_rows($sql) > 0)`)，您需要一次遍历一条记录并执行操作。

检查更多： http: [//php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

# java - 正则表达式通配符匹配

> ID：10520566
> 
> 赞同：28
> 
> 时间：2012-05-09T16:51:48.037
> 
> 标签：java, regex

我有一个大约 12 万个英语单词的列表（基本上是语言中的每个单词）。

我需要一个正则表达式，它允许使用通配符（aka`*`和`?`.

几个例子：

*   如果用户搜索`m?st*`，它将匹配例如`master`or`mister`或`mistery`。
*   如果用户搜索`*ind`（任何以 结尾的单词`ind`），它将匹配`wind`or`bind`或`blind`or `grind`。

现在，大多数用户（尤其是那些不熟悉正则表达式的用户）都知道这`?`是替换正好 1 个字符，而`*`替换是替换 0、1 个或更多字符。我绝对想在此基础上构建我的搜索功能。

我的问题是：如何将用户类型（`m?st*`例如）转换为正则表达式？

我搜索了网络（显然包括这个网站），我能找到的只是那些试图教给我太多东西的教程或有些相似的问题，但不足以为我自己的问题提供答案。

我能想到的只是我必须`?`用`.`. 就这样`m?st*`变成了`m.st*`。但是，我不知道用什么代替`*`。

任何帮助将不胜感激。谢谢你。

PS：我对正则表达式完全陌生。我知道它们有多么强大，但我也知道它们可能很难学习。所以我只是从来没有花时间去做...

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T16:58:10.827

除非您想要一些有趣的行为，否则我建议您使用`\w`而不是`.`

`.`匹配空格和其他非单词符号，您可能不希望它这样做。

所以我会替换`?`并`\w`替换`*`为`\w*`

此外，如果您想`*`匹配至少一个字符，请将其替换为`\w+`。这将意味着`ben*`匹配`bend`但`bending`不匹配`ben`- 这取决于您，这取决于您的要求。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-27T04:53:03.103

看看这个库：[https ://github.com/alenon/JWildcard](https://github.com/alenon/JWildcard)

它通过正则表达式引号包装所有非通配符特定部分，因此不需要特殊字符处理：此通配符：

```
"mywil?card*" 
```

将转换为此正则表达式字符串：

```
"\Qmywil\E.\Qcard\E.*" 
```

如果您希望将通配符转换为正则表达式字符串，请使用：

```
JWildcard.wildcardToRegex("mywil?card*"); 
```

如果你想直接检查匹配，你可以使用这个：

```
JWildcard.matches("mywild*", "mywildcard"); 
```

默认通配符规则是“？” -> ".", " *" -> ".* "，但是您可以根据需要更改默认行为，只需定义新规则即可。

```
JWildcard.wildcardToRegex(wildcard, rules, strict); 
```

您可以使用源代码或使用 Bintray JCenter 的 maven 或 gradle 直接下载：[https ://bintray.com/yevdo/jwildcard/jwildcard](https://bintray.com/yevdo/jwildcard/jwildcard)

渐变方式：

```
compile 'com.yevdo:jwildcard:1.4' 
```

Maven方式：

```
<dependency>
  <groupId>com.yevdo</groupId>
  <artifactId>jwildcard</artifactId>
  <version>1.4</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-09T16:54:17.163

替换`?`为`.`和。`*`_`.*`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-12T23:22:08.933

这是一种将通配符转换为正则表达式的方法：

1.  在所有[特殊字符](http://docs.oracle.com/javase/tutorial/essential/regex/literals.html) **([{\^-=$!|]}).+**前面加上 \ -，这样它们就可以作为字符匹配，不会让用户体验出乎意料。您也可以将它包含在**\Q**（开始引号）和**\E**（结束它）中。另请参阅有关安全性的段落。
2.  将 * 通配符替换为**\S***
3.  代替 ？**带\S**的通配符？
***   可选：在模式前面加上**^** - 这将强制与开头完全匹配。*   **可选：将$**附加到模式 - 这将强制与结尾完全匹配。

    **\S** - 代表非空格字符，它发生零次或多次。** 

 **如果在 * 或**+**之后有要匹配的字符，请考虑[使用不情愿（非贪婪）量词](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)。这可以通过添加来完成**？**在 * 或**+**之后像这样：**\S*?** 和**\S*+?**

 ******考虑**安全性**：用户将向您发送代码以运行（因为正则表达式也是一种代码，并且用户字符串用作正则表达式）。您应该避免将未转义的正则表达式传递给应用程序的任何其他部分，并且仅用于过滤通过其他方式检索到的数据。因为如果您这样做，用户可以通过提供带有通配符字符串的不同正则表达式来影响代码的速度 - 这可以用于 DoS 攻击。

显示类似模式的执行速度的示例：

```
seq 1 50000000 > ~/1
du -sh ~/1
563M
time grep -P '.*' ~/1 &>/dev/null
6.65s
time grep -P '.*.*.*.*.*.*.*.*' ~/1 &>/dev/null
12.55s
time grep -P '.*..*..*..*..*.*' ~/1 &>/dev/null
31.14s
time grep -P '\S*.\S*.\S*.\S*.\S*\S*' ~/1 &>/dev/null
31.27s 
```

我建议不要使用 .* ，因为它可以匹配任何东西，并且通常用空格分隔。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T17:03:24.593

1.  全部替换 '？' 带有 '\w' 的字符
2.  将所有 '*' 字符替换为 '\w*'

'*' 运算符重复上一项 '.' （任何字符）0 次或多次。

这假定没有任何单词包含“.”、“*”和“？”。

这是一个很好的参考

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-09T16:53:25.083

`.`正如您所发现的，是一个匹配*任何一个字符*的表达式。在您搜索的几个小时中，您无疑也偶然发现了`*`，这是一个重复运算符，当在一个表达式与*前面的表达式连续匹配零次或多次后使用*时。

所以相当于你的意思`*`是将这两者放在一起：`.*`. 这意味着“任何字符零次或多次”。

请参阅[有关重复运算符的 Regex 教程](http://www.regular-expressions.info/repeat.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-09T16:53:30.463

替换`*`为`.*`（相当于“0 个或多个任意字符”的正则表达式）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-22T07:36:00.083

```
function matchWild(wild,name)
{
    if (wild == '*') return true;

    wild = wild.replace(/\./g,'\\.');
    wild = wild.replace(/\?/g,'.');
    wild = wild.replace(/\\/g,'\\\\');  
    wild = wild.replace(/\//g,'\\/');
    wild = wild.replace(/\*/g,'(.+?)');

    var re = new RegExp(wild,'i');
    return re.test(name);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-05T00:06:16.220

这就是我使用的：

```
String wildcardToRegex(String wildcardString) {
    // The 12 is arbitrary, you may adjust it to fit your needs depending
    // on how many special characters you expect in a single pattern.
    StringBuilder sb = new StringBuilder(wildcardString.length() + 12);
    sb.append('^');
    for (int i = 0; i < wildcardString.length(); ++i) {
        char c = wildcardString.charAt(i);
        if (c == '*') {
            sb.append(".*");
        } else if (c == '?') {
            sb.append('.');
        } else if ("\\.[]{}()+-^$|".indexOf(c) >= 0) {
            sb.append('\\');
            sb.append(c);
        } else {
            sb.append(c);
        }
    }
    sb.append('$');
    return sb.toString();
} 
```

[来自https://stackoverflow.com/a/26228852/1808989](https://stackoverflow.com/a/26228852/1808989)的特殊字符列表。********

# json - $.getJSON 没有读取我的 .aspx 返回

> ID：10520568
> 
> 赞同：0
> 
> 时间：2012-05-09T16:52:03.587
> 
> 标签：json, javascriptserializer, getjson

因此，我搜索了大多数 getJSON 问题，但仍然无法找到解决问题的方法。我的主要问题是：我有一个对 .aspx 页面进行 $.getJSON 调用的 .js 文件。.aspx 页面返回一个 json 对象。我已经用 demo.js 测试了 $.getJSON，它工作得很好；我能够引用 json 字段。.aspx 页面不是这种情况。这是我的代码：

.js 进行 $getJSON 调用

```
$.getJSON('updateSlides.aspx', function (json) {
    alert("JSON Data: " + json.url);
}); 
```

.aspx 返回 json obj

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim jsonString As String
    If Not Page.IsPostBack Then
        Dim ws As New wallboardSettings
        ' pull data values from db here, replace hardcoded values below
        ws.duration = 5
        ws.imagePath = "Images\slide1.jpg"
        ws.url = "slide1.html"
        Dim js As JavaScriptSerializer = New JavaScriptSerializer()
        jsonString = js.Serialize(ws)
        Response.Write(jsonString)
    End If
End Sub 
```

我在 VB 中放置了一个 msgbox，并从我的本地机器上运行它来查看我的值。它以 json 形式返回 ws 属性设置，该设置在 jsonlint.com 上正确验证。

我也尝试过使用带有 async: false 的 $.ajax 调用，但它不起作用。当我使用有效的 demo.js 时，我在 firebug 中看到了 json 字段；updateSlides.aspx 不是这种情况。

在此先感谢，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:09:29.043

从您的响应中将内容类型标头设置为 application/json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:48:25.977

所以事实证明json不是问题。aspx 页面返回 json 就好了。根据萤火虫相同的aspx页面也返回自动生成的附加html。我删除了这个 html，firebug 显示了 json 数据。感谢您的回复！

# c++ - 如何将 FileDialog 限制为特定路径

> ID：10520570
> 
> 赞同：3
> 
> 时间：2012-05-09T16:52:05.183
> 
> 标签：c++, winapi, openfiledialog, savefiledialog

是否可以将文件对话框（打开/保存）限制到特定文件夹是 winapi？

```
OPENFILENAME fileDialogSettings;
...
fileDialogSettings.lpstrInitialDir = "Some path";
...
if(GetOpenFileName(&fileDialogSettings))
{
} 
```

我想在对话框中将“某些路径”作为根路径，并限制导航到该文件夹​​，它只是子文件夹。我可以为此使用 lpfnHook 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:43:13.843

如果您只针对 Vista+，您可以使用该[`IFileDialogEvents::OnFolderChanging`](http://msdn.microsoft.com/en-us/library/bb775881(v=vs.85).aspx)方法完全阻止更改。

对于旧版本的 Windows，OpenFileDialog 允许您指定一个挂钩过程，您可以在其中获取[`CDN_FOLDERCHANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646859(v=vs.85).aspx)通知。虽然我看不到任何禁止更改的消息，但您可以发布消息告诉它“返回”，或者只是禁用“确定”按钮。

另一种选择是处理[`CDN_FILEOK`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646857(v=vs.85).aspx)通知并拒绝所需目录之外的路径。

有关挂钩过程的更多详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646960(v=vs.85).aspx#_win32_Explorer_Style_Hook_Procedures)。 [这个问题](https://stackoverflow.com/a/471398/588306)还讨论了在打开的对话框中更改目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:55:56.527

看看[`OFN_NOCHANGEDIR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839%28v=vs.85%29.aspx)标志，虽然文档是这样说的：

> 如果用户在搜索文件时更改了目录，则将当前目录恢复为其原始值。
> 
> 该标志对 GetOpenFileName 无效。

编辑：再次阅读您的问题，我想您不希望用户从该目录向上导航，不确定 GetOpenFileName 是否可行，您可能必须使用目录列表视图创建自己的对话框并以这种方式限制它们.

# php - Facebook - 登录重定向后如何保留 app_data 中的变量？

> ID：10520573
> 
> 赞同：0
> 
> 时间：2012-05-09T16:52:09.907
> 
> 标签：php, facebook, redirect

非常感谢这里的其他线程，如果用户已经登录到 facebook，我可以将变量传递给 facebook 应用程序标签页（使用 PHP sdk）：

[https://www.facebook.com/pages/my_dull_page/156000037732522?sk=app_305100762893495&app_data=choice%3Dmy_dull_choice](https://www.facebook.com/pages/my_dull_page/156000037732522?sk=app_305100762893495&app_data=choice%3Dmy_dull_choice)

```
//check if logged in
// if not -> login -> redirect 
```

$data= $facebook->getSignedRequest();
$app_data = $data['app_data'];

但是，如果用户没有登录，重定向后变量会丢失，传递它们的最佳方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:58:38.733

使用 php 会话。

```
session_start();

$_SESSION['variable'] = $value; 
```

然后在重定向后的页面上，您可以检查变量是否存在并设置它，然后将其销毁。

```
session_start();
if( isset( $_SESSION['variable'] ) )
{
    $var = $_SESSION['variable'];
    unset( $_SESSION['variable'] );
} 
```

第二种方法，我不确定你是如何重定向的，是在重定向中将变量作为 GET vars 传递..

```
http://domain.com/redirect.php?var1=1&var2=2&var3=3 
```

然后读取重定向页面上的变量...

```
$var1 = isset( $_GET['var1'] ) ? $_GET['var1'] : NULL; 
```

# php - 需要从播放列表中获取歌曲名称到带有 php&javascript 的“正在播放”横幅中

> ID：10520583
> 
> 赞同：0
> 
> 时间：2012-05-09T16:53:11.363
> 
> 标签：php, javascript, jquery

我正在使用 php 和 javascript 创建一个在线音乐播放器，但我想不出处理问题的最佳方法。我创建了一个 MySQL 数据库，其中包含歌曲的名称、艺术家、专辑等。

我从页面上显示的 MySQL db 生成的 XML 文件创建了一个播放列表，我无法获得的唯一功能是当我单击歌曲时让歌曲的名称出现在“正在播放”横幅中从播放列表。

我想我需要某种“onClick”功能，但我不知道我需要做什么。另外，我显然不想为了播放一首新歌而刷新页面。

谢谢你的帮助！

我的播放器的基本代码如下。实际播放器使用自定义界面和 XML 播放列表，但基本上就是这样。我只需要弄清楚如何创建“正在播放”功能。谢谢！

```
<html>
<head>
<script type="text/javascript">

    function loadPlayer() {
        var audioPlayer = new Audio();
        audioPlayer.controls="controls";
        audioPlayer.addEventListener('ended',nextSong,false);
        audioPlayer.addEventListener('error',errorFallback,true);
        document.getElementById("player").appendChild(audioPlayer);
        nextSong();
    }
    function nextSong() {
        if(urls[next]!=undefined) {
            var audioPlayer = document.getElementsByTagName('audio')[0];
            if(audioPlayer!=undefined) {
                audioPlayer.src=urls[next];
                audioPlayer.load();
                audioPlayer.play();
                next++;
            } else {
                loadPlayer();
            }
        } else {
            alert('the end!');
        }
    }
    function errorFallback() {
            nextSong();
    }
    function playPause() {
        var audioPlayer = document.getElementsByTagName('audio')[0];
        if(audioPlayer!=undefined) {
            if (audioPlayer.paused) {
                audioPlayer.play();
            } else {
                audioPlayer.pause();
            }
        } else {
            loadPlayer();
        }
    }
    function pickSong(num) {
        next = num;
        nextSong();
    }

    var urls = new Array();
        urls[0] = '/testphp/upload/Sleep Away.mp3';
        urls[1] = '/testphp/upload/Kalimba.mp3';
        urls[2] = '/testphp/upload/Sleep Away.mp3';
        urls[3] = '/testphp/upload/Kalimba.mp3';
    var next = 0;

</script>

</head>
<body>

<div id="player"></div>
<a href="#" onclick="playPause()">Play / Pause!</a> |
<a href="#" onclick="nextSong()">Next!</a><br><br>

<a href="#" onclick="pickSong(0)">Sample 1</a><br>
<a href="#" onclick="pickSong(1)">Sample 2</a><br>
<a href="#" onclick="pickSong(2)">Missing File</a><br>
<a href="#" onclick="pickSong(3)">Sample 3</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:06:40.827

你用什么播放器播放音乐文件？就我而言，我使用了在线[yahoo webplayer](http://webplayer.yahoo.com/)，它非常易于集成和使用。它具有您需要的所有功能。关于您的问题，例如，如果您有：

```
<a href="your song address" id="song">The song</a> 
```

和：

```
<div id="now_playing"></div> 
```

在您的 javascript 中使用：

```
$("#song").click(function(){
    $("#now_playing").html() = $(this).html();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:59:33.643

我假设您单击的歌曲的名称在页面上，对吗？如果是这样，您可以使用 jquery 获取该名称并将其写入横幅，但就像第一条评论所说的那样，如果没有看到某种代码或示例代码，很难为您提供帮助。

更新：假设你有 jquery。

好的，所以你只需要创建一个现在播放的 div

```
<div id="nowPlaying"></div> 
```

对于挑选歌曲 html，向锚标签添加一个类，例如 class="songs" 然后创建一个 jquery 函数来捕捉点击

```
$('a.songs').click(function(){
    $('#nowPlaying').html($(this).html());
}); 
```

我还没有测试过，但它应该可以工作，这个函数会为你点击的锚点提取 html 并在 nowPlaying 中输出它。对于 next() 函数，您只需在数组的正确位置输出歌曲名称（您必须解析字符串以便输出名称，顺便说一下，数组中的名称应该与 html 匹配）。在 nextsong 函数中是这样的

```
$('#nowPlaying').html(parseThis(urls[index])); 
```

您必须定义 parseThis 来解析您的字符串，以便它给出歌曲名称而不是整个路径。或者，您可以创建一个仅包含歌曲名称的不同数组，以便您可以抓取它。如果没有下一首歌曲，请确保您有默认情况，或者您可以回到第一首歌曲，这取决于您。至少这是逻辑，它相当简单，逻辑可能也可以改进，但这应该让你开始

# grails - 域有一些共同的领域，扩展域或嵌入？

> ID：10520584
> 
> 赞同：1
> 
> 时间：2012-05-09T16:53:12.163
> 
> 标签：grails, dns, domain-driven-design, grails-orm

当我设计数据库时。我使用嵌入式来嵌入公共字段。但它无法初始化 dateCreated 和 createdBy，我该怎么办？扩展域或嵌入是处理公共字段的正确方法？代码说什么？

```
 class Created {
      Date dateCreated
      Long createdBy
        def beforeInsert()
            {
             dateCreated= new Date()
             createdBy=0
        }
   }

class Updated {

Date lastUpdated
Long updatedBy

//it works?
def beforeUpdate(){
    lastUpdated=new Date()
    updatedBy=0
}
//it works?
def beforeInsert(){
    lastUpdated=new Date()
    updatedBy=0
}
}

class CreatedUpdated {

Created created

Updated updated

//Must use the embedded option, or the type of exception, can not find CreatedUpdated
static embedded = ['created','updated']
}

class Term {

String name

CreatedUpdated createdUpdated

static embedded = ['createdUpdated']

    Term parent

    static hasMany =[terms:Term]

    static mapping = {
        version false
   }

   String toString()
  {
    name
  }

static constraints = {
    name unique:true,size: 1..20
    parent nullable: true  
    createdUpdated display:false,nullable:true
    terms display:false
    url url: true
}
   } 
```

或使用扩展？

```
 class Term extends CreatedUpdated{
    String name

    Term parent

    static hasMany =[terms:Term]

    static mapping = {
        version false
   }

   String toString()
  {
    name
  }

static constraints = {
    name unique:true,size: 1..20
    parent nullable: true  
    terms display:false
    url url: true
}
   } 
```

`

我有什么权利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:32:43.297

我肯定会让这个例子嵌入而不是继承。我认为您不应该仅仅基于对象包含公共字段的事实来进行此调用。相反，如果使用标准 OO 设计技术对您的模型有意义，则应该使用继承。例如，如果“myClass is a myBaseClass”不成立，那么继承可能是错误的解决方案。

一般来说，我会远离`CreatedUpdated`那些只是属性集合而不是您域中的实际对象的类。Java/Groovy 只有单一继承，所以只有当你有一个这样的基类时才有效。

[此外，对于这种特殊情况， GORM 可以自动应用](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)创建和更新的时间戳。如果您使用的是 spring security，请查看用于自动创建和列的[audit-trail 插件。](http://www.grails.org/plugin/audit-trail)`createdBy``updatedBy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:21:25.667

在这种特殊情况下，审计跟踪插件应该足以满足要求。但是，如果您对没有可用插件的其他字段有这样的要求，那么可能的解决方案之一可能是在编译时通过[AST Transformation](http://groovy.codehaus.org/Compile-time+Metaprogramming+-+AST+Transformations)注入这些公共字段。内部审计跟踪插件使用这个概念来注入这些字段。根据您的要求，您可以使用全局 AST 转换或本地 AST 转换。

# c++ - WM_EX_COMPOSITED 没有双缓冲

> ID：10520585
> 
> 赞同：0
> 
> 时间：2012-05-09T16:53:12.273
> 
> 标签：c++, c, winapi, doublebuffered, double-buffering

我正在尝试在 Win32 应用程序中实现双缓冲，因此我需要将窗口的控件从最后面的控件绘制到最前面。据我了解，`WM_EX_COMPOSITED`这样做，但它也会对自身进行双重缓冲¹。如何在`WS_EX_COMPOSITED`没有双缓冲的情况下让窗口从下到上绘制？

* * *

我没有使用`WM_EX_COMPOSITED`双缓冲，因为我认为我可以手动做得更好，并且不会出现 DWM 闪烁等问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:01:39.773

使用[`WS_EX_TRANSPARENT`](http://msdn.microsoft.com/en-us/library/aa251511%28v=vs.60%29.aspx)扩展窗口样式使顶层窗口油漆最后。

# c++ - 如何使用 DLL 在应用程序中实现单例

> ID：10520587
> 
> 赞同：2
> 
> 时间：2012-05-09T16:53:14.810
> 
> 标签：c++, visual-studio, dll, singleton

我有一个包含 3 个项目的应用程序（在 MS Visual Studio 中）：

*   **main**（包含`main`函数的那个​​）
*   **设备**（模拟一些硬件设备）
*   **config**（包含其他两个项目的一些配置）

所以依赖图是：

*   **main**取决于**device**，这取决于**配置**
*   **主要**取决于**配置**

**config**项目包含一个 Singleton，其中包含一些配置参数。

我决定把**设备**项目变成一个 DLL。当我这样做时，似乎我在**配置**项目中有两个单例实例！我想这是一个经典问题，它可能有一个很好的解决方案。那么我该如何解决这个问题？

我用以下（相对较小的）代码重现了这个问题。当然，就我而言，有大约 30 个项目，而不仅仅是 3 个。我只想制作 1 个 DLL（如果可能的话）。

* * *

```
// config.h
#pragma once
#include <string>
#include <map>
class Config
{
public:
    static void Initialize();
    static int GetConfig(const std::string& name);

private:
    std::map<std::string, int> data;
};

// config.cpp
#include "config.h"

static Config g_instance;

void Config::Initialize()
{
    g_instance.data["one"] = 1;
    g_instance.data["two"] = 2;
}

int Config::GetConfig(const std::string& name)
{
    return g_instance.data[name];
} 
```

* * *

```
// device.h
#pragma once

#ifdef _DLL
#define dll_cruft __declspec( dllexport )
#else
#define dll_cruft __declspec( dllimport )
#endif

class dll_cruft Device
{
public:
    void Work();
};

// device.cpp
#include "device.h"
#include <iostream>
#include "config.h"

void Device::Work()
{
    std::cout << "Device is working: two = " << Config::GetConfig("two") << '\n';
} 
```

* * *

```
// main.cpp
#include <iostream>
#include "config.h"
#include "device.h"

int main()
{
    std::cout << "Before initialization in application: one = " << Config::GetConfig("one") << '\n';
    Config::Initialize();
    std::cout << "After initialization in application: one = " << Config::GetConfig("one") << '\n';
    Device().Work();
    std::cout << "After working in application: two = " << Config::GetConfig("two") << '\n';
} 
```

* * *

输出：

> 在应用程序初始化之前：一 = 0
> 
> 在应用程序中初始化后：一 = 1
> 
> 设备正在工作：两个 = 0
> 
> 在应用程序中工作后：2 = 2

关于代码的作用和原因的一些解释：

1.  主应用程序启动
2.  第一次打印只是为了表明单例尚未初始化
3.  主应用程序初始化单例
4.  第一个打印显示初始化工作
5.  主应用程序启动“硬件设备”
6.  在 DLL 内部，未初始化单例！我希望它输出`two = 2`
7.  最后打印显示单例仍在主应用程序中初始化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:37:05.003

您可以决定单例应该驻留在哪里，然后将其公开给其他消费者。

* * *

由OP编辑：

例如，我希望`config`实例只出现在 EXE（而不是 DLL）中。

1.  将实例变成指针

    ```
    static Config* g_instance; 
    ```

2.  `device`为的导出函数添加一个单独的初始化函数：

    ```
    void InitializeWithExisting(Config* instance) {g_instance=instance;} 
    ```

3.  正常初始化单例后，使用第二次初始化：

    ```
    Config::Initialize();
    Config::InitializeWithExisting(); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:18:19.777

当我遇到同样的问题时，我通过创建另一个 DLL 来解决它，该 DLL 的唯一目的是管理单例实例。所有获取指向单例的指针的尝试都会调用这个新 DLL 中的函数。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-09T17:13:55.753

我相信以这种方式定义和访问单例实例可能会解决您的问题：

```
Config& getInstance()
{
  static Config config;
  return config;
} 
```

这样你也不需要拥有（和调用） Initialize 方法，你可以使用构造函数进行初始化，当你第一次调用 getInstance 时会自动调用它。

# ruby-on-rails - 社区引擎沙漠

> ID：10520588
> 
> 赞同：0
> 
> 时间：2012-05-09T16:53:15.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, communityengine

我尝试安装社区引擎。问题：您通过 :lib 作为 gem 'desert' 的选项，但它是无效的。

我的沙漠宝石：沙漠（0.5.4）

请帮忙..日志：

```
home@home-desktop:~$ rails new wbce -m https://raw.github.com/bborn/communityengine/edge/community_engine_setup_template.rb
      create  
      create  README.rdoc
      create  Rakefile
      create  config.ru
      create  .gitignore
      create  Gemfile
      create  app
      create  app/assets/images/rails.png
      create  app/assets/javascripts/application.js
      create  app/assets/stylesheets/application.css
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb
      create  app/mailers
      create  app/models
      create  app/views/layouts/application.html.erb
      create  app/mailers/.gitkeep
      create  app/models/.gitkeep
      create  config
      create  config/routes.rb
      create  config/application.rb
      create  config/environment.rb
      create  config/environments
      create  config/environments/development.rb
      create  config/environments/production.rb
      create  config/environments/test.rb
      create  config/initializers
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb
      create  config/initializers/mime_types.rb
      create  config/initializers/secret_token.rb
      create  config/initializers/session_store.rb
      create  config/initializers/wrap_parameters.rb
      create  config/locales
      create  config/locales/en.yml
      create  config/boot.rb
      create  config/database.yml
      create  db
      create  db/seeds.rb
      create  doc
      create  doc/README_FOR_APP
      create  lib
      create  lib/tasks
      create  lib/tasks/.gitkeep
      create  lib/assets
      create  lib/assets/.gitkeep
      create  log
      create  log/.gitkeep
      create  public
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/favicon.ico
      create  public/index.html
      create  public/robots.txt
      create  script
      create  script/rails
      create  test/fixtures
      create  test/fixtures/.gitkeep
      create  test/functional
      create  test/functional/.gitkeep
      create  test/integration
      create  test/integration/.gitkeep
      create  test/unit
      create  test/unit/.gitkeep
      create  test/performance/browsing_test.rb
      create  test/test_helper.rb
      create  tmp/cache
      create  tmp/cache/assets
      create  vendor/assets/javascripts
      create  vendor/assets/javascripts/.gitkeep
      create  vendor/assets/stylesheets
      create  vendor/assets/stylesheets/.gitkeep
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
       apply  https://raw.github.com/bborn/communityengine/edge/community_engine_setup_template.rb
  Please enter the application's name:  WBCE
         run    rm public/index.html from "."
         run    git init from "."
Initialized empty Git repository in /home/home/wbce/.git/
         run    git add . from "."
         run    touch tmp/.gitignore log/.gitignore vendor/.gitignore from "."
         run    find . -type d -empty | grep -v "vendor" | grep -v ".git" | grep -v "tmp" | xargs -I xxx touch xxx/.gitignore from "."
    conflict    .gitignore
  Overwrite /home/home/wbce/.gitignore? (enter "h" for help) [Ynaqdh] 
       force    .gitignore
     gemfile    desert
     gemfile    rmagick
     gemfile    hpricot
     gemfile    htmlentities
     gemfile    haml
     gemfile    aws-s3
     gemfile    calendar_date_select
     gemfile    ri_cal
     gemfile    authlogic
     gemfile    searchlogic
     gemfile    rakismet
        rake    gems:install
[sudo] password for home: 
You passed :lib as an option for gem 'desert', but it is invalid.
      plugin    community_engine
Initialized empty Git repository in /home/home/wbce/vendor/plugins/community_engine/.git/
remote: Counting objects: 17261, done.
remote: Compressing objects: 100% (6043/6043), done.
remote: Total 17261 (delta 11405), reused 16199 (delta 10653)
Receiving objects: 100% (17261/17261), 6.05 MiB | 333 KiB/s, done.
Resolving deltas: 100% (11405/11405), done.
         run    git submodule init from "."
Submodule 'vendor/plugins/community_engine' (git://github.com/bborn/communityengine.git) registered for path 'vendor/plugins/community_engine'
         run    git submodule update from "."
 [CE SETUP] Checking out the edge branch 

         run    git checkout --track -b edge origin/edge from "./vendor/plugins/community_engine"
Branch edge set up to track remote branch edge from origin.
Switched to a new branch 'edge'
       route    map.routes_from_plugin :community_engine
 [CE SETUP] Modifying your environment.rb and environments files to work with CE 

        gsub    config/environment.rb
      append    config/environment.rb
 [CE SETUP] Modifying environment files ... 

  Please enter the url where you plan to deploy this app (use 'example.com' for now if you don't know yet): 
      create    config/application.yml
    generate    plugin_migration
You passed :lib as an option for gem 'desert', but it is invalid.
        rake    db:create:all
You passed :lib as an option for gem 'desert', but it is invalid.
        rake    db:migrate
You passed :lib as an option for gem 'desert', but it is invalid.
      capify    
         run    git add . from "."
         run    git commit -a -m 'Initial commit' from "."
[master (root-commit) efde59c] Initial commit
 38 files changed, 870 insertions(+), 0 deletions(-)
 create mode 100644 .gitignore
 create mode 100644 .gitmodules
 create mode 100644 Gemfile
 create mode 100644 README.rdoc
 create mode 100644 Rakefile
 create mode 100644 app/assets/images/rails.png
 create mode 100644 app/assets/javascripts/application.js
 create mode 100644 app/assets/stylesheets/application.css
 create mode 100644 app/controllers/application_controller.rb
 create mode 100644 app/helpers/application_helper.rb
 create mode 100644 app/mailers/.gitkeep
 create mode 100644 app/models/.gitkeep
 create mode 100644 app/views/layouts/application.html.erb
 create mode 100644 config.ru
 create mode 100644 config/application.rb
 create mode 100644 config/application.yml
 create mode 100644 config/boot.rb
 create mode 100644 config/database.yml
 create mode 100644 config/environment.rb
 create mode 100644 config/environments/development.rb
 create mode 100644 config/environments/production.rb
 create mode 100644 config/environments/test.rb
 create mode 100644 config/initializers/backtrace_silencers.rb
 create mode 100644 config/initializers/inflections.rb
 create mode 100644 config/initializers/mime_types.rb
 create mode 100644 config/initializers/secret_token.rb
 create mode 100644 config/initializers/session_store.rb
 create mode 100644 config/initializers/wrap_parameters.rb
 create mode 100644 config/locales/en.yml
 create mode 100644 config/routes.rb
 create mode 100644 db/seeds.rb
 create mode 100644 doc/README_FOR_APP
 create mode 100644 lib/assets/.gitkeep
 create mode 100644 lib/tasks/.gitkeep
 create mode 100644 log/.gitignore
 create mode 100644 log/.gitkeep
 create mode 100644 public/404.html
 create mode 100644 public/422.html
 create mode 100644 public/500.html
 create mode 100644 public/favicon.ico
 create mode 100644 public/robots.txt
 create mode 100755 script/rails
 create mode 100644 test/fixtures/.gitkeep
 create mode 100644 test/functional/.gitkeep
 create mode 100644 test/integration/.gitkeep
 create mode 100644 test/performance/browsing_test.rb
 create mode 100644 test/test_helper.rb
 create mode 100644 test/unit/.gitkeep
 create mode 100644 tmp/.gitignore
 create mode 100644 vendor/.gitignore
 create mode 100644 vendor/assets/javascripts/.gitkeep
 create mode 100644 vendor/assets/stylesheets/.gitkeep
 create mode 100644 vendor/plugins/.gitkeep
 create mode 160000 vendor/plugins/community_engine
SUCCESS!
Next, you should probably run `rake test` and `rake community_engine:test` and make sure all tests pass. 
         run  bundle install
You passed :lib as an option for gem 'desert', but it is invalid.
home@home-desktop:~$ 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

gem "desert", :lib => "desert"
gem "rmagick", :lib => "RMagick"
gem "hpricot", :lib => "hpricot"
gem "htmlentities", :lib => "htmlentities"
gem "haml", :lib => "haml"
gem "aws-s3", :lib => "aws/s3"
gem "calendar_date_select"
gem "ri_cal"
gem "authlogic"
gem "searchlogic"
gem "rakismet" 
```

版本社区引擎： [https](https://github.com/bborn/communityengine) ://github.com/bborn/communityengine 短版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:31:02.073

你能告诉我们你的`Gemfile`吗？听起来错误是该文件中的某些内容，可能`lib`应该是`require`Bundler 的错误。

您使用的是哪个版本的 CommunityEngine？

# html - 在悬停时更改 div 中链接的颜色

> ID：10520589
> 
> 赞同：0
> 
> 时间：2012-05-09T16:53:22.617
> 
> 标签：html, href

我有一个 div 里面有几个链接，我想知道当你将鼠标悬停在 div 上时是否有办法改变链接的全局颜色？不是当您将鼠标悬停在链接上时链接的颜色会发生变化，而是当您将鼠标悬停在 div 上时，所有链接的颜色都会从全局链接颜色发生变化。

任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:00:14.367

正确的 CSS 应该是这样的

```
#divId:hover a:link,
#divId:hover a:visited,
#divId:hover a:active{color:#f00} 
```

或者

```
.divClass:hover a:link,
.divClass:hover a:visited,
.divClass:hover a:active{color:#f00} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:02:46.903

```
div:hover a {
   color: green;
} 
```

应该做的伎俩。

# xsd - 2 个元素中的元素引用

> ID：10520596
> 
> 赞同：0
> 
> 时间：2012-05-09T16:53:33.620
> 
> 标签：xsd

我不知道如何命名我的问题。

我有一个包含以下元素的 XSD

```
 <xs:element name="abc">
   <xs:complexType>
     <xs:element maxOccurs="unbounded" ref="ele1"/>
   </xs:complexType>
 </xs:element>

 <xs:element name="xyz">
   <xs:complexType>
     <xs:element maxOccurs="unbounded" ref="ele1"/>
   </xs:complexType>
 </xs:element>

 <xs:element name="ele1">
   <xs:complexType>
     <xs:attribute name="ID" type="xs:integer"/>
   </xs:complexType>
 </xs:element> 
```

问题是对于元素`xyz` `ID`是强制性的，而对于`abc`它不是；如何在 XSD 中指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:14:41.357

假设 ID 是在“容器”下重复的内容的唯一标识符，那么您可以像这样为 xyz 设置 xs:key 约束：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="abc">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" ref="ele1"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="xyz">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" ref="ele1"/>
            </xs:sequence>
        </xs:complexType>
        <xs:key name="PK_xyz">
            <xs:selector xpath="ele1"/>
            <xs:field xpath="@ID"/>
        </xs:key>
    </xs:element>
    <xs:element name="ele1">
        <xs:complexType>
            <xs:attribute name="ID" type="xs:integer"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

然后，由于缺少 ID，XML 无效：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<xyz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ele1 ID="1"/>
    <ele1 />
</xyz> 
```

错误信息：

```
Error occurred while loading [], line 5 position 3
The identity constraint 'PK_xyz' validation has failed. Either a key is missing or the existing key has an empty node.
Document3.xml is invalid. 
```

无效，因为它是重复的（这是不利的，如果上述关于唯一性的假设不成立）：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<xyz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ele1 ID="1"/>
    <ele1 ID="1"/>
</xyz> 
```

错误：

```
Error occurred while loading [], line 5 position 3
There is a duplicate key sequence '1' for the 'PK_xyz' key or unique identity constraint.
Document3.xml is invalid. 
```

工作样本：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<xyz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ele1 ID="1"/>
    <ele1 ID="2"/>
</xyz> 
```

# sql-server - 尝试仅将唯一行插入新表

> ID：10520599
> 
> 赞同：1
> 
> 时间：2012-05-09T16:53:37.903
> 
> 标签：sql-server, tsql

我正在尝试仅将唯一值插入表中，但它不起作用。对于所有 6000 行，Securities 表中只有一个 LastDownload 值。但在我的查询中，我在@Temp 中得到了超过 6000 个重复值。我只想要一个值。我错过了什么？

```
DECLARE @Temp TABLE ( Info VARCHAR( 256 ) )

INSERT INTO @Temp
SELECT LastDownLoad
FROM Securities AS S
WHERE NOT EXISTS( SELECT * FROM @Temp AS T WHERE T.Info = S.LastDownLoad ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:57:38.183

也许这过于简单了……但是……它似乎适合……

```
DECLARE @Temp TABLE ( Info VARCHAR( 256 ) )

    INSERT INTO @Temp
    SELECT Distinct LastDownLoad
    FROM Securities 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:02:09.653

将两个答案放在一起，您将得到完整的答案：

```
DECLARE @Temp TABLE ( Info VARCHAR( 256 ) )

INSERT INTO @Temp
SELECT DISTINCT LastDownLoad
FROM Securities AS S
WHERE NOT EXISTS( SELECT * FROM @Temp AS T WHERE T.Info = S.LastDownLoad ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:56:57.747

你试过用`distinct`吗？

```
DECLARE @Temp TABLE ( Info VARCHAR( 256 ) )

INSERT INTO @Temp
SELECT LastDownLoad
FROM Securities AS S
WHERE NOT EXISTS( SELECT DISTINCT * FROM @Temp AS T WHERE T.Info = S.LastDownLoad ) 
```

# rest - 如何使用 servlet 与 openstack api 通信

> ID：10520600
> 
> 赞同：1
> 
> 时间：2012-05-09T16:53:45.340
> 
> 标签：rest, jakarta-ee, openstack

我正在尝试编写一个示例程序以与 OpenStack API 进行通信。从 OpenStack 的 API 文档中，我发现使用 Java，我们需要一个 REST 客户端，但无法编写一段代码，那么您能否提供一段示例代码来从 OpenStack API 获取令牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:30:50.167

There are now (unofficial) [Java bindings for OpenStack](https://github.com/woorea/openstack-java-sdk).

Also, the [OpenStack API Quick Start](http://docs.openstack.org/api/quick-start/content/) has samples using curl about how to get an authentication token.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T06:29:37.593

我会使用[OpenStack4j](http://openstack4j.com)。它开箱即用地支持 Keystone、Nova、Neutron、Glance 和 Cinder。它快速流畅。

# php - Php Sqlite3：插入语句在命令行中有效，但在浏览器中无效

> ID：10520603
> 
> 赞同：0
> 
> 时间：2012-05-09T16:53:52.250
> 
> 标签：php, sqlite, apache2

你好这是我的代码：

```
<?

$DBNAME='astbase.db';
$MYTABLE ='extens';

$wsdl = "wwwwww";
$reply = "wwww";
$idsms = "4";
$exten = 100;

$base= new PDO('sqlite:'.$DBNAME);//, 0666, $err);
$query = "CREATE TABLE IF NOT EXISTS $MYTABLE(id INTEGER PRIMARY KEY,exten VARCHAR(255), wsdl TEXT, reply text, idsms INTEGER)";    
$results = $base->exec($query);
print_r($results);

$query = "INSERT INTO $MYTABLE(id,exten,wsdl,reply,idsms) VALUES(NULL,'$exten','$wsdl','$reply',$idsms)";
$results = $base->exec($query);
print_r($results);

?> 
```

当我在命令行（php5 script.php）中执行脚本时，它工作正常，但是当我用网络浏览器运行它时，只执行第一条语句！！！怎么了 ？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:40:14.063

你应该

*   检查您的 PHP 错误日志文件
*   `sqlite_last_error()`在您的第一条语句之后调用该函数（[手动](http://us.php.net/manual/en/function.sqlite-last-error.php)）

我猜这是一个权限问题，即您的网络服务器无权写入您的 sqlite 数据库文件所在的目录。

它适用于命令行，因为它使用您自己的用户权限（而在浏览器中它使用 Apache 的用户，该用户通常拥有较少的权限）。

# bash - Bash 的源命令不适用于从 Internet 卷曲的文件

> ID：10520605
> 
> 赞同：5
> 
> 时间：2012-05-09T16:53:58.513
> 
> 标签：bash, shell, url

我正在尝试使用 curl 从 Internet 获取脚本文件，如下所示：`source <( curl url ); echo done`，我看到的是在 curl 甚至开始下载文件*之前回显了“完成”！*

这是实际的命令和输出：

```
-bash-3.2# source <( curl --insecure https://raw.github.com/gurjeet/pg_dev_env/master/.bashrc ) ; echo done
done
-bash-3.2# % Total % Received % Xferd Average Speed Time Time Time Current
Dload Upload Total Spent Left Speed
100 2833 100 2833 0 0 6746 0 --:--:-- --:--:-- --:--:-- 0 
```

我不太担心在任何事情之前或之后会回显“完成”，我特别担心为什么源命令不会读取并执行脚本！

这个命令在我的 LinuxMint 的 bash 上按预期工作，但在 CentOS 服务器的 bash 上却不行！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T03:17:29.117

起初，我没有注意到您使用的是 Bash 3.2。该版本不会来自进程替换，但更高版本（例如 Bash 4）可以。

您可以保存文件并对其进行正常来源：

```
source /tmp/del 
```

（使用您评论中的文件）

或者，您可以使用`/dev/stdin`此处字符串和带引号的命令替换：

```
source /dev/stdin <<< "$(curl --insecure https://raw.github.com/gurjeet/pg_dev_env/master/.bashrc)"; echo done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:37:16.370

尝试这个：

```
exec 69<> >(:);
curl url 1>&69;
source /dev/fd/69;
exec 69>&-; 
```

这应该迫使您的外壳等待来自管道的所有数据。如果这不起作用，这个将：

```
exec 69<> >(:);
{ curl url 1>&69 & } 2>/dev/null;
wait $!
source /dev/fd/69;
exec 69>&-; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T07:57:25.743

Does the following work?

```
file=$(mktemp)
curl --insecure -o $file https://raw.github.com/gurjeet/pg_dev_env/master/.bashrc 
source $file
rm $file 
```

# java - 关于比较器的开发

> ID：10520607
> 
> 赞同：2
> 
> 时间：2012-05-09T16:54:00.567
> 
> 标签：java

我有一个查询我开发了一个 pojo ..

```
public class Customer {
int Age;
public Customer(int age, String surname, String forename) {
    super();
    Age = age;
    Surname = surname;
    Forename = forename;
}

String Surname,Forename;

public int  getAge() {
    // TODO Auto-generated method stub
    return Age;
}

public String getSurname() {
    // TODO Auto-generated method stub
    return Surname;
}

public String getForename() {
    // TODO Auto-generated method stub
    return Surname;
}

 public void display()
 {
  // System.out.println(Forename+"\t"+Surname+"\t"+Age);
     System.out.println(Age+"\t"+Forename+"\t"+Surname);
  } 
```

}

这是我的收藏课..

```
 class testCustomerComparator
{

    public static void main(String... a)
    {

            Customer customerFirst = new Customer(46,"Alabama", "Christonson");
        Customer customerSecond = new Customer(21, "Anna", "Sobek");
        Customer customerThird = new Customer(27, "Rafael", "Sobek");

        List<Customer> list = new ArrayList<Customer>();
        list.add(customerThird);
        list.add(customerSecond);
        list.add(customerFirst);
}
} 
```

请告诉我如何为这个类制作比较器，我想制作比较器，以便客户列表按年龄排序，其次按姓氏排序。之后，您要按名字排序。请告知我在比较器中有嵌套条件

逻辑一定是这样的……

```
 public class CustomerComparator implements Comparator<Customer> {

  @Override
  public int compare(Customer c1, Customer c2) {

    if (c1.getAge() == c2.getAge()) {
      if (c1.getSurname().compareTo(c2.getSurname()) == 0) {
          return c1.getForename().compareTo(c2.getForename()) {
      } else {
          return c1.getSurname().compareTo(c2.getSurname());
      }
    } else if (c1.getAge() > b2.getAge()) {
        return -1;
    } else {
        return 1;
    }
  } 
```

但它不起作用请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:01:50.990

看起来很像家庭作业。我可以给你一些关于在哪里看的提示。

你有两个选择：

*   使 POJO 类扩展`Comparable<Customer>`
*   将自定义外部比较器定义为`Comparator<Customer>`.

假设第二个选择，您有两个明确的客户，您必须定义一个类似于这个的方法：

```
@Override
public int compare(Customer c1, Customer c2)
{
  // this method should return 0 if c1.equals(c2), 
  // should instead return 1 if c1 should come first than c2 and -1 otherwise
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:03:43.470

你可以帮助下面的代码。

```
import java.util.*;

class Customer {

    private int age;
    private String name;
    private String forename;

    public Customer(int age, String surname, String forename) {
        super();
        this.age = age;
        this.name = surname;
        this.forename = forename;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public int getAge() {
        return this.age;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return this.name;
    }

    public void setForename(String forename) {
        this.forename = forename;
    }

    public String getForename() {
        return forename;
    }
}

class AgeComparator implements Comparator {

    public int compare(Object emp1, Object emp2) {

        int emp1Age = ((Customer) emp1).getAge();
        int emp2Age = ((Customer) emp2).getAge();

        if (emp1Age > emp2Age)
            return 1;
        else if (emp1Age < emp2Age)
            return -1;
        else
            return 0;
    }

}

/*
 * The below given comparator compares employees on the basis of their name.
 */

class NameComparator implements Comparator {

    public int compare(Object emp1, Object emp2) {

        // parameter are of type Object, so we have to downcast it to Employee
        // objects

        int emp1Age = ((Customer) emp1).getAge();
        int emp2Age = ((Customer) emp2).getAge();

        if (emp1Age > emp2Age) {
            return 1;
        } else if (emp1Age < emp2Age) {
            String emp1Name = ((Customer) emp1).getName();
            String emp2Name = ((Customer) emp2).getName();

            // uses compareTo method of String class to compare names of the
            // employee
            return emp1Name.compareTo(emp2Name);
        } else {
            return 0;
        }
    }

}

class CustomerComparator implements Comparator {

    public int compare(Object emp1, Object emp2) {

        // parameter are of type Object, so we have to downcast it to Employee
        // objects

        String emp1Name = ((Customer) emp1).getName();
        String emp2Name = ((Customer) emp2).getName();

        // uses compareTo method of String class to compare names of the
        // employee
        return emp1Name.compareTo(emp2Name);

    }

}

public class JavaComparatorExample {

    public static void main(String args[]) {

        // Employee array which will hold employees
        Customer employee[] = new Customer[3];

        // set different attributes of the individual employee.
        employee[0] = new Customer(46, "Alabama", "Christonson");
        employee[1] = new Customer(21, "Anna", "Sobek");
        employee[2] = new Customer(27, "Rafael", "Sobek");

        System.out.println("Order of employee before sorting is");
        // print array as is.
        for (int i = 0; i < employee.length; i++) {
            System.out.println("Employee " + (i + 1) + " name :: "
                    + employee[i].getName() + ", Age :: "
                    + employee[i].getAge());
        }

        Arrays.sort(employee, new AgeComparator());
        System.out
                .println("\n\nOrder of employee after sorting by employee age is");

        for (int i = 0; i < employee.length; i++) {
            System.out.println("Employee " + (i + 1) + " name :: "
                    + employee[i].getName() + ", Age :: "
                    + employee[i].getAge());
        }

        // Sorting array on the basis of employee Name by passing NameComparator
        Arrays.sort(employee, new NameComparator());

        System.out
                .println("\n\nOrder of employee after sorting by employee name is");
        for (int i = 0; i < employee.length; i++) {
            System.out.println("Employee " + (i + 1) + " name :: "
                    + employee[i].getName() + ", Age :: "
                    + employee[i].getAge());
        }

    }

} 
```

希望这会帮助你。

**编辑**

看看`CustomerComparator` 班级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:37:08.590

```
@Override
public int compare(Customer c1, Customer c2) {
  int r = Integer.valueOf(c1.getAge()).compareTo(c2.getAge());
  if (r != 0) return r;
  r = c1.getSurname().compareTo(c2.getSurname());
  if (r != 0) return r;
  return c1.getForename().compareTo(c2.getForename());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T17:02:19.357

```
public class CustomerComparator implements Comparator<Customer> {

public int compare(Customer c1, Customer c2) {
 .... here you have c1 and c2\. compare returns -1 if c1 should go before c2,
 0 if they are found to be equal, and 1 if c2 should go before c1.
 You add the logic to compare c1 and c2 fields as you stated and return the result.
 }

 } 
```

然后，您使用 Collections.sort 使用此比较器对该列表进行排序。

# java - 格式化字符串以删除科学记数法 - Java

> ID：10520608
> 
> 赞同：7
> 
> 时间：2012-05-09T16:54:01.430
> 
> 标签：java, string, floating-point, bigdecimal

我有以下代码拆分一串数字（由空格分隔），然后创建一个浮点数组：

```
//Split the string and then build a float array with the values.
String[] tabOfFloatString = value.split(" ");
int length = tabOfFloatString.length;
System.out.println("Length of float string is" + length);
float[] floatsArray = new float[length];
for (int l=0; l<length; l++) {
float res = Float.parseFloat(tabOfFloatString[l]);
    System.out.println("Float is " + res);
    floatsArray[l]=res;
} 
```

问题是字符串中的一些值是用科学记数法格式化的——例如它们读取-3.04567E-8。

我想要做的是最终得到一个不包含 E 数字的浮点数。

我一直在阅读这个帖子，它表明我可以使用 BigDecimal，但是无法让它工作 - 这是最好的方法还是我应该尝试其他方法？[如何在 Java 中将字符串 3.0103E-7 转换为 0.00000030103？](https://stackoverflow.com/questions/1229516/how-to-convert-a-string-3-0103e-7-to-0-00000030103-in-java)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T17:16:54.780

以下是您的代码稍作修改。据我所知，这很好用，实际上并不关心指数的顺序：

```
public void function() {
    String value = "123456.0023 -3.04567E-8 -3.01967E-20";
    String[] tabOfFloatString = value.split(" ");
    int length = tabOfFloatString.length;
    System.out.println("Length of float string is" + length);
    float[] floatsArray = new float[length];
    for (int l = 0; l < length; l++) {
        String res = new BigDecimal(tabOfFloatString[l]).toPlainString();
        System.out.println("Float is " + res);
        floatsArray[l] = Float.parseFloat(res);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-02T10:23:46.873

接受的回答对我不起作用，什么时候做

```
floatsArray[l] = Float.parseFloat(res); 
```

Float.parseFloat(res) 将非科学注释更改为科学注释，因此我不得不将其删除。

这个有效：

```
public String[] avoidScientificNotation(float[] sensorsValues)
{
     int length = sensorsValues.length;
     String[] valuesFormatted = new String[length];

     for (int i = 0; i < length; i++) 
     {
         String valueFormatted = new BigDecimal(Float.toString(sensorsValues[i])).toPlainString();
         valuesFormatted[i] = valueFormatted;
     }
    return valuesFormatted;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:13:46.420

```
NumberFormat format = new DecimalFormat("0.############################################################");
System.out.println(format.format(Math.ulp(0F)));
System.out.println(format.format(1F)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T17:14:48.047

浮动不包含`e`，这就是它向您显示的方式。您可以使用`DecimalFormat`它来更改它的显示方式。

[http://ideone.com/jgN6l](http://ideone.com/jgN6l)

```
java.text.DecimalFormat df = new java.text.DecimalFormat("#,###.######################################################");
System.out.println(df.format(res)); 
```

但是，由于浮点，您会注意到一些看起来很奇怪的数字。

# android - OSMDroid main.xml 地图视图应该如何显示？

> ID：10520614
> 
> 赞同：1
> 
> 时间：2012-05-09T16:54:18.123
> 
> 标签：android, openstreetmap, osmdroid

**警告**：菜鸟警报。

我对 Android 和 OSM 都很陌生。我想要的只是一张要显示的地图。

Google 的 MapView 可以是 main.xml 的根，OSM 的 MapView 也可以是根吗？

**这是我当前的 main.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<org.osmdroid.views.MapView
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    tilesource="MapquestOSM" />

</LinearLayout> 
```

**这是我的活动：**

```
public class AndroidManiTestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.id.map);
    }
} 
```

**我收到以下错误：**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.anny/com.anny.AndroidManiTestActivity}: 

Android.content.res.Resources$NotFoundException: Resource ID #0x7f050000 type #0x12 is not valid 
```

**编辑**：我正在运行 osmdroid 3.0.8 和 slf4j 1.5.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:33:43.497

您的 setContentView(.. ) 需要采用 .layout 参数而不是 .id，所以它是

```
setContentView(R.layout.main); 
```

之后，您可以使用以下行引用 .map：

```
findViewById(R.id.map); 
```

# java - 为什么数组常量只能在初始化器中使用？

> ID：10520617
> 
> 赞同：56
> 
> 时间：2012-05-09T16:54:32.467
> 
> 标签：java

> **可能重复：**
> [数组常量只能用于初始化错误](https://stackoverflow.com/questions/6348479/arrays-constants-can-only-be-used-in-initializers-error)

我正在研究数组，我通过这种在一行中声明和初始化数组的捷径获得了。例如，

```
int[] a = {1, 2, 3, 4, 5}; 
```

但是当我尝试执行以下代码时，我得到了这个编译器错误，说“数组常量只能在初始化程序中使用”。

```
int[] a;
a = {1, 2, 3, 4}; 
```

为什么这样？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-09T16:57:41.497

这是不允许的，因为[JLS 这么说](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)。该语法仅允许在声明和数组创建表达式中使用。

后者提供了实现相同结果的另一种方法：

```
int[] a;
a = new int[]{1, 2, 3, 4}; 
```

至于要求 的实际根本原因`new T[]`，我的猜测如下。考虑以下数组初始值设定项：

```
{1, 2, 3, 4} 
```

它可用于初始化不同类型的数组：

```
new int[]{1, 2, 3, 4};
new float[]{1, 2, 3, 4};
new double[]{1, 2, 3, 4}; 
```

如果`new T[]`不需要该位，我怀疑裸露`{1, 2, 3, 4}`可能会在语义分析过程中造成困难。在这里，我正在考虑以下情况：

```
void f(float[] x) { ... }
void f(double[] x) { ... }
void g() {
  f({1, 2, 3, 4});
} 
```

如果允许这种语法，语言规范将不得不处理选择调用哪个函数的复杂性。

同样，不清楚应该是什么类型的`{null}`. 它可以是`Object[]`, `Integer[]`,`Serializable[]`等等。

最后，空数组`{}`将是最棘手的。在这里，我们甚至无法判断它是对象数组还是标量数组。

语言设计者似乎选择通过要求`new T[]`语法来避免这些复杂性，而不是处理所有这些复杂性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T17:00:24.343

简短的回答是[因为语言规范是这么说的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)。

至于为什么？我怀疑这*取决于打字*。在第一种情况下，解析器/编译器知道它在初始化数组变量的上下文中，因此可以推断花括号是数组初始化器。

在后一种情况下，花括号的含义并不清楚。推测打字机在解析的后期运行，因此简单地推断含义是不可行的。

这个论点似乎很重要，因为如果您专门（并且在技术上是多余的）再次声明该类型，您可以使用非常相似的语法：

```
int[] a;
// then later
a = new int[] { 1, 2, 3, 4 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:20:39.187

你能得到的唯一答案是哲学性质的。不允许隐式数组类型的决定符合 Java 的一般设计原则，以使事情简单明了。同样，您可能会问为什么每次向下转换都必须是显式的，或者每次缩小类型转换。Java是蓝领语言，明显+显式是它的核心价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:57:05.903

我java你只能使用第一种方法初始化一个数组。您不能分配数组。理解为什么可能涉及一些关于如何实现数组的理论。编译器在声明数组时必须知道数组有多大，因此在第一行的声明和初始化中，编译器可以推断出大小，但不能通过第二行推断。

# actionscript-3 - 多平台中的 Starling 游戏分辨率

> ID：10520622
> 
> 赞同：1
> 
> 时间：2012-05-09T16:54:57.013
> 
> 标签：actionscript-3, air, starling-framework

我们正在用 Starling 制作一款游戏，我们希望它是多平台的，但我们发现了一些分辨率问题，

我们为 iPad 设计了游戏，我们希望它在三星 Galaxy Tab 10.1 和 iPhone 上运行，我们在 SGT 10.1 中遇到的问题是我们想要将内容居中并添加额外的背景来修复侧面的黑色轮胎，而在 iPhone 4 中，内容比屏幕更大...

你知道解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:47:17.190

这是一个链接，解释了如何在八哥中开发多种分辨率： [http ://wiki.starling-framework.org/manual/multi-resolution_development](http://wiki.starling-framework.org/manual/multi-resolution_development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T15:12:48.593

如果您的资产是从矢量图形创建的，并且不想拉伸结果位图。或者您不想包含多个纹理图集。有一个开源库可以解决问题：[https ://github.com/XTDStudios/DMT](https://github.com/XTDStudios/DMT)

该库根据您提供的内容呈现矢量资产，并将其缓存在设备上。

在线教程：http: [//goo.gl/6NhQk](http://goo.gl/6NhQk)

# bash - 如何在 bash shell 中将一个字符串拆分为多个变量？

> ID：10520623
> 
> 赞同：211
> 
> 时间：2012-05-09T16:54:57.317
> 
> 标签：bash, shell, variables

我一直在寻找解决方案并发现了类似的问题，只是他们试图用空格分隔句子，而答案对我的情况不起作用。

目前，一个变量被设置为这样的字符串：
`ABCDE-123456`
我想将其拆分为 2 个变量，同时消除“ **-** ”。IE：
`var1=ABCDE`
`var2=123456`

怎么可能做到这一点？

* * *

这是对我有用的解决方案：
`var1=$(echo $STR | cut -f1 -d-)`
`var2=$(echo $STR | cut -f2 -d-)`

是否可以使用不带分隔符的**cut**命令（每个字符都设置为变量）？

`var1=$(echo $STR | cut -f1 -d?)`
`var2=$(echo $STR | cut -f1 -d?)`
`var3=$(echo $STR | cut -f1 -d?)`
`etc.`

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-05-10T03:14:24.343

要拆分由 分隔的字符串`-`，您可以使用`read`with `IFS`：

```
$ IFS=- read var1 var2 <<< ABCDE-123456
$ echo "$var1"
ABCDE
$ echo "$var2"
123456 
```

**编辑：**

以下是如何将每个单独的字符读入数组元素：

```
$ read -a foo <<<"$(echo "ABCDE-123456" | sed 's/./& /g')" 
```

转储数组：

```
$ declare -p foo
declare -a foo='([0]="A" [1]="B" [2]="C" [3]="D" [4]="E" [5]="-" [6]="1" [7]="2" [8]="3" [9]="4" [10]="5" [11]="6")' 
```

如果字符串中有空格：

```
$ IFS=$'\v' read -a foo <<<"$(echo "ABCDE 123456" | sed 's/./&\v/g')"
$ declare -p foo
declare -a foo='([0]="A" [1]="B" [2]="C" [3]="D" [4]="E" [5]=" " [6]="1" [7]="2" [8]="3" [9]="4" [10]="5" [11]="6")' 
```

* * *

## 回答 #2

> 赞同：219
> 
> 时间：2012-05-09T17:02:19.263

如果您知道它将只有两个字段，则可以跳过这样的额外子流程，使用：

```
var1=${STR%-*}
var2=${STR#*-} 
```

这是做什么的？从字符串末尾开始删除与模式匹配`${STR%-*}`的最短子字符串。做同样的事情，但使用模式并从字符串的开头开始。它们每个都有对应物，并且找到*最长*的锚定模式匹配。如果有人有一个有用的助记符来记住哪个做什么，请告诉我！我总是不得不尝试两者来记住。`$STR``-*``${STR#*-}``*-``%%``##`

 *有关更多信息，请参阅[bash 文档](https://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)。

* * *

## 回答 #3

> 赞同：182
> 
> 时间：2012-05-09T17:00:36.877

*如果*您的解决方案不必是通用的，即只需要像您的示例那样适用于字符串，您可以这样做：

```
var1=$(echo $STR | cut -f1 -d-)
var2=$(echo $STR | cut -f2 -d-) 
```

我选择`cut`这里是因为您可以简单地为更多变量扩展代码......

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2012-05-09T17:57:58.760

听起来像`set`一个自定义的工作`IFS`。

```
IFS=-
set $STR
var1=$1
var2=$2 
```

（您将希望在带有 a 的函数中执行此操作，`local IFS`这样您就不会弄乱脚本的其他部分，因为您需要`IFS`成为您所期望的。）

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2012-05-09T17:09:48.793

使用 bash 正则表达式功能：

```
re="^([^-]+)-(.*)$"
[[ "ABCDE-123456" =~ $re ]] && var1="${BASH_REMATCH[1]}" && var2="${BASH_REMATCH[2]}"
echo $var1
echo $var2 
```

**输出**

```
ABCDE
123456 
```*

# android - 带有精灵 2D android 的动画

> ID：10520625
> 
> 赞同：0
> 
> 时间：2012-05-09T16:55:07.887
> 
> 标签：android

我正在建立一个效果与此相同的虚拟商店

[在此处输入链接描述](http://www.htc.com/au/smartphones/)

用户可以自由地从左到右和从上到下旋转图像，反之亦然。我想使用 sprite 2D 来实现该动画。我找到了一些教程，但是因为我对图形编程很陌生，所以任何人都可以指出我达到预期性能的正确方法。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:03:11.743

最简单的方法是在 Android中使用[Canvas API。](http://developer.android.com/guide/topics/graphics/2d-graphics.html)[这](http://www.edu4java.com/androidgame/androidgame4.html)是一个如何将它与精灵一起使用的示例。

# php - 为什么 sqlsrv 不在 PHP 中执行？

> ID：10520626
> 
> 赞同：5
> 
> 时间：2012-05-09T16:55:12.863
> 
> 标签：php, sql-server

当我通过检查时，为什么“extension=php_sqlsrv_53_nts.dll”没有加载到我的 php 中`phpinfo()`？

我的电脑上安装了 PHP 版本 5.3.13，并将 8 个 DLL php_sqlsrv_* 文件提取到 php ext 文件夹中。我将行 extension=php_sqlsrv_53_nts.dll 添加到 php.ini 文件中。

当我刷新我的 phpinfo 时，我从来没有看到那里的 sqlsrv ..

有任何想法吗？

# c# - 未使用的属性会导致开销吗？

> ID：10520628
> 
> 赞同：3
> 
> 时间：2012-05-09T16:55:15.330
> 
> 标签：c#, .net, properties, overhead

假设我们有一个带有很多冗余访问器的生成类。它们只是访问器，它们不是字段。他们在任何地方都没有被调用。他们只是坐在那里多余和丑陋。

例如：

```
public class ContrivedExample
{
    public int ThisOneIsUsed { get; set; }

    public int ThisOneIsNeverCalled0 { get { /* Large amounts of logic go here, but is never called. */ } }
    public int ThisOneIsNeverCalled1 { get { /* Large amounts of logic go here, but is never called. */ } }
    public int ThisOneIsNeverCalled2 { get { /* Large amounts of logic go here, but is never called. */ } }
    //...
    public int ThisOneIsNeverCalled99 { get { /* Large amounts of logic go here, but is never called.*/ } }
}

ContrivedExample c = new ContrivedExample() { ThisOneIsUsed = 5; } 
```

我能想到的唯一开销是它会使 .DLL 更大。我希望运行时惩罚为零。

这会导致任何其他开销吗？即使是任何种类的微小开销？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:01:55.860

它不太可能有任何可测量的运行时开销。无论如何，因为这是性能问题 - 如果有疑问，请衡量**您的**使用情况并为您的情况做出决定。

未引用的方法不会被 JIT 编译，也不会导致直接的运行时开销。

该类的元数据将更大（以及您提到的程序集大小）。

如果在一些涉及大量反射的代码中使用该类，您可能会受到间接影响，而且如果代码在同一个类上重复反射，则它本身可能是错误的。

# sql - 在 IF 语句中嵌套 Case 语句

> ID：10520636
> 
> 赞同：0
> 
> 时间：2012-05-09T16:56:07.977
> 
> 标签：sql, db2, case

我在 where 子句中的最后一个 CASE 语句上遇到编译器错误。我似乎无法弄清楚我做错了什么......任何帮助将不胜感激，谢谢。

```
P1: BEGIN
DECLARE cursor1 CURSOR WITH RETURN FOR
    SELECT DISTINCT MPWBIPS.MIP_NO,                                  
        MPWBIPS.ITEM_NO,                                 
        MPWBIPS.MATL_PLNR_ID,                            
        MPWBIPS.ITEM_OBS_STATUS,                       
        MPWBMIT.EXCS_ITEM_COST_TOT,
        MPWBMIP.TRGT_CHGOVR_DATE,
        SLOTLOC.LOT_FROM_EFF_DATE,              
    FROM MPWBIPS MPWBIPS                                          
    INNER JOIN MPWBMIT MPWBMIT 
        ON MPWBMIT.MIP_NO = MPWBIPS.MIP_NO             
        AND MPWBMIT.ITEM_NO = MPWBIPS.ITEM_NO 
    INNER JOIN MPPLNR MPPLNR
        ON MPWBIPS.MATL_PLNR_ID = MPPLNR.MATL_PLNR_ID
    INNER JOIN MPWBMIP MPWBMIP
        ON MPWBIPS.MIP_NO = MPWBMIP.MIP_NO
    INNER JOIN SMPROJ_DPIMS SMPROJ
        ON MPWBIPS.MIP_NO = SMPROJ.MIP_NO
    INNER JOIN SLOTLOC_DPIMS SLOTLOC
        ON SMPROJ.MFG_CHGOVR_PER = SLOTLOC.LOT

    WHERE plannerID =
        CASE WHEN mgrIndc = 'Y' THEN
            MPPLNR.MGR_LID
        WHEN suprvIndc = 'Y' THEN
            MPPLNR.SPRVSR_LID
        WHEN plannerID = '' THEN
            ''
        ELSE
            MPPLNR.MATL_PLNR_ID
        END

        AND CASE WHEN obsStatus = 'ACTION' THEN
                    MPWBIPS.ITEM_OBS_STATUS <> 'RESOLVED 99'
                    AND MPWBIPS.ITEM_OBS_STATUS <> 'EXCESS 90'
                WHEN obsStatus = 'ALL' OR obsStatus = '' THEN
                    obsStatus = ''
                ELSE
                    MPWBIPS.ITEM_OBS_STATUS = obsStatus
                END
        AND (COALESCE(mipNo, '') = '' OR MPWBIPS.MIP_NO = mipNo);
OPEN cursor1; 
```

结束 P1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:01:17.243

不要认为您可以在此方法中使用 if 。但是，您可以嵌套案例。

```
case when parm1 <> '' THEN
            CASE parm1 
                WHEN '1' THEN
                    --do something
                WHEN '2' THEN
                    --do something
                ELSE
                    --do something
            END
end 
```

但为什么？而只是添加到您的案例中

```
 CASE parm1

                WHEN '1' THEN
                    --do something
                WHEN '2' THEN
                    --do something
                WHEN <> ''
                    --do something
            END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:03:30.050

您不能在语句中嵌套`case`语句`if`。考虑一下，重写您的查询。

你`case`最后不见了。你的案例陈述应该是

```
CASE WHEN obsStatus = 'ACTION' THEN 
MPWBIPS.ITEM_OBS_STATUS <> 'RESOLVED 99'
AND MPWBIPS.ITEM_OBS_STATUS <> 'EXCESS 90'
WHEN obsStatus = 'ALL' OR obsStatus = '' THEN                     
obsStatus = ''                 
ELSE                     
MPWBIPS.ITEM_OBS_STATUS = obsStatus
END CASE 
```

编辑：

`<>`（不等于）运营商正在制造问题；你不能在那里使用它们。不确定为什么您使用 Not equal in case 条件。两行以下

```
MPWBIPS.ITEM_OBS_STATUS <> 'RESOLVED 99'
AND MPWBIPS.ITEM_OBS_STATUS <> 'EXCESS 90' 
```

可能使您的 Where 条件如下所示：

```
WHERE plannerID = 
(CASE WHEN mgrIndc = 'Y' THEN             
MPPLNR.MGR_LID         
WHEN suprvIndc = 'Y' THEN             
MPPLNR.SPRVSR_LID         
WHEN plannerID = '' THEN  ''         
ELSE MPPLNR.MATL_PLNR_ID         
END)          

AND 

((obsStatus = 'ACTION') and (MPWBIPS.ITEM_OBS_STATUS <> 'RESOLVED 99'
 AND MPWBIPS.ITEM_OBS_STATUS <> 'EXCESS 90'))

or

((obsStatus = 'ALL' OR obsStatus = '') and (obsStatus = ''))

or

MPWBIPS.ITEM_OBS_STATUS = obsStatus

AND 

(COALESCE(mipNo, '') = '' OR MPWBIPS.MIP_NO = mipNo); 
```

# c# - CoreScanner（摩托罗拉）事件未被触发 C#

> ID：10520639
> 
> 赞同：1
> 
> 时间：2012-05-09T16:56:14.357
> 
> 标签：c#, barcode, motorola

我正在尝试一个简单的 Windows 窗体应用程序，其中用户扫描条形码，然后应用程序解码条形码，然后将一行插入数据库。一个基本的轨道应用程序。我拿起了一个摩托罗拉扫描仪并下载了用于 Windows 开发的 SDK。我读到“附录 A 使用扫描仪 SDK API 编写简单的应用程序”似乎是从开发人员指南开始的好地方（[http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=14978402apdf&sliceId =&dialogID=311240750&stateId=1%200%20311224446](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=14978402apdf&sliceId=&dialogID=311240750&stateId=1%200%20311224446)）。我让 5 个控制台示例工作正常，但我无法让 Windows 窗体应用程序工作，永远不会触发 OnBarcode 事件。我跟着这个视频（[http://www.youtube.com/watch?v=GfIWWUw4YSc&t=15m47s](http://www.youtube.com/watch?v=GfIWWUw4YSc&t=15m47s)）由摩托罗拉一步一步。

我似乎遇到了与此类似的问题：[摩托罗拉条形码扫描仪 SDK 事件 C#](https://stackoverflow.com/questions/8807297/motorola-barcode-scanner-sdk-events-c-sharp)，但我使用的是 USB 连接。

我意识到示例代码最初是用 .net 2.0 编写的，所以我尝试重新编译该项目，但它仍然没有工作。然后我尝试将 CCoreScannerClass 更改为 CCoreScanner 以便嵌入互操作类型可以工作，但这也无济于事。这是示例代码：

```
using CoreScanner;

namespace Scanner_WindowsFormsApplication
{
public partial class Form1 : Form
{
    CCoreScanner cCoreScanner;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
    void OnBarcodeEvent(short eventType, ref string pscanData)
    {
        string barcode = pscanData;
        this.Invoke((MethodInvoker)delegate { textBox1.Text = barcode; });

    }
    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            //Instantiate CoreScanner Class
            cCoreScanner = new CCoreScanner();
            //Call Open API
            short[] scannerTypes = new short[1];//Scanner Types you are interested in
            scannerTypes[0] = 1; // 1 for all scanner types
            short numberOfScannerTypes = 1; // Size of the scannerTypes array
            int status; // Extended API return code
            cCoreScanner.Open(0, scannerTypes, numberOfScannerTypes, out status);
            // Subscribe for barcode events in cCoreScannerClass
            cCoreScanner.BarcodeEvent += new _ICoreScannerEvents_BarcodeEventEventHandler(OnBarcodeEvent);
            // Let's subscribe for events
            int opcode = 1001; // Method for Subscribe events
            string outXML; // XML Output
            string inXML = "<inArgs>" +
            "<cmdArgs>" +
            "<arg-int>1</arg-int>" + // Number of events you want to subscribe
            "<arg-int>1</arg-int>" + // Comma separated event IDs
            "</cmdArgs>" +
            "</inArgs>";
            cCoreScanner.ExecCommand(opcode, ref inXML, out outXML, out status);
            Console.WriteLine(outXML);
        }
        catch (Exception exp)
        {
            Console.WriteLine("Something wrong please check... " + exp.Message);
        }
    }
} 
```

}

我通读了开发人员指南并发现：“当扫描仪捕获条形码时触发 BarcodeEvent。要接收 BarcodeEvents，应用程序需要使用 SUBSCRIBE_BARCODE 事件类型执行 REGISTER_FOR_EVENTS 方法。” 我是 c# 的新手，所以我真的不知道这意味着什么以及它如何应用于示例。

如果[https://stackoverflow.com/users/68043/scott](https://stackoverflow.com/users/68043/scott)读到这个线程，我很想知道你是如何让 onBarcodeEvent 在你的线程中运行的：[从事件调用时对话框挂起](https://stackoverflow.com/questions/9799900/dialog-hangs-when-called-from-event)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T03:24:42.650

要从 Motorola Scanner SDK 获取条码事件，您的扫描仪应该使用 IBM 手持 USB 或 SNAPI。如果它连接到串行端口，它应该处于 NIXDORF 模式 B。如果您的扫描仪以 HIDKB 模式连接，则您不能通过 SDK 获得条形码事件，因为扫描仪作为键盘工作。我的建议是首先尝试 SDK 附带的示例应用程序的可执行文件，并检查您是否可以从提供的应用程序中看到事件。

要将扫描仪配置为正确模式，请参阅[文档](https://www.zebra.com/content/dam/zebra_new_ia/en-us/manuals/barcode-scanners/ds3678-qsg-en.pdf)- 第 5 页和第 6 页

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:04:11.880

每次使用条码扫描器时，我发现将条码扫描器简单地用作键盘要容易得多；即，将您的WinForms应用程序中的焦点放在文本框以等待条形码扫描，然后处理TextBox的text_changed事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T10:57:46.213

我刚刚遇到了同样的问题。在仔细查看摩托罗拉文档后，我发现以下两行仅告诉扫描仪您想要获取事件。（开启事件）

```
int upcode = 1001
cCoreScanner.ExecCommand(opcode, ref inXML, out outXML, out status); 
```

现在为了进行条形码扫描，您需要发送操作码 2011。所以代码看起来像这样：

```
int upcode = 1001
cCoreScanner.ExecCommand(opcode, ref inXML, out outXML, out status);
int upcode = 2011
cCoreScanner.ExecCommand(opcode, ref inXML, out outXML, out status); 
```

这样做时，我确实得到了 BarcodeEvent

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-04T07:10:29.590

使用操作码 2011 您设法触发 USB HIDKB 扫描仪的回码事件？

您是否还添加了以下代码：

```
"<inArgs><scannerID>1</scannerID></inArgs>" 
```

执行 2011 命令时？

# objective-c - 多值设置（Settings.bundle）问题

> ID：10520642
> 
> 赞同：2
> 
> 时间：2012-05-09T16:56:24.383
> 
> 标签：objective-c, ios

我只是无法在我的 Ipad 应用程序中使用多值设置。这是我的多值 plist 代码：

```
<dict>
        <key>Type</key>
        <string>PSMultiValueSpecifier</string>
        <key>DefaultValue</key>
        <string>0</string>
        <key>Values</key>
        <array>
            <string>0</string>
            <string>1</string>
            <string>2</string>
        </array>
        <key>Title</key>
        <string>Project</string>
        <key>Key</key>
        <string>project</string>
    </dict> 
```

我已经尝试了一切，重置了 iPad 模拟器，添加了其他设置......并且多个值一直没有显示在设置中。我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:50:08.597

通过定义“标题”数组解决了这个问题。没有它就不会显示设置。

# php - php排序数组并对特定字段进行排名

> ID：10520647
> 
> 赞同：4
> 
> 时间：2012-05-09T16:56:31.403
> 
> 标签：php, arrays, sorting, ranking

我正在尝试根据数值首先为特定字段（`OurPrice`）输出最低数字的排名。

`var_dump`结果

```
$myarray = array_filter($rankresult);
natsort($myarray); 

array(6) { 
    ["Comp7"]=> string(3) "189" 
    ["OurPrice"]=> string(3) "189" 
    ["Comp9"]=> string(6) "198.99" 
    ["Comp6"]=> string(3) "208" 
    ["Comp3"]=> string(6) "226.97" 
    ["Comp4"]=> string(3) "274" 
} 
```

您会注意到计数中总共有 6 个，其中两个是相同的数字，因此它等于相同的排名（即 Comp7 和 OurPrice 都在 6 中排名第 1）。

期望的输出：

**我们的价格排名 = 1 of 6**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:32:11.510

尝试使用此代码

```
 $newarray = (array_unique(array_values($myarray)));
 $rank = array_search($myarray['OurPrice'],$newarray)+1;
 $count = count($myarray));
 echo "Our Price Rank" . $rank . " of " . $count" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:31:50.373

假设您已经对这些值进行了排序（看起来您有），您可以简单地告诉他们“OurProduct”键所在的索引。

```
$keys = array_keys( $array );
$rank = array_search( "OurPrice", $keys );

printf( "We rank %d of %d", ++$rank, count($keys) ); 
```

在线尝试：[http ://codepad.org/qIwTGBzG](http://codepad.org/qIwTGBzG)

# android - 使用 phoneGap 播放声音时出错

> ID：10520648
> 
> 赞同：0
> 
> 时间：2012-05-09T16:56:51.363
> 
> 标签：android, html, audio, cordova

嗨，我正在尝试向游戏按钮和不同的组件添加声音，我正在使用 phoneGap 网站上的这段代码，当我测试它时它工作正常：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                      "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Media Example</title>

    <script type="text/javascript" charset="utf-8" src="js/phonegap-1.4.1.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        playAudio("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3");
    }

    // Audio player
    //
    var my_media = null;
    var mediaTimer = null;

    // Play audio
    //
    function playAudio(src) {
        // Create Media object from src
        my_media = new Media(src, onSuccess, onError);

        // Play audio
        my_media.play();

        // Update my_media position every second
        if (mediaTimer == null) {
            mediaTimer = setInterval(function() {
                // get my_media position
                my_media.getCurrentPosition(
                    // success callback
                    function(position) {
                        if (position > -1) {
                            setAudioPosition((position) + " sec");
                        }
                    },
                    // error callback
                    function(e) {
                        console.log("Error getting pos=" + e);
                        setAudioPosition("Error: " + e);
                    }
                );
            }, 1000);
        }
    }

    // Pause audio
    // 
    function pauseAudio() {
        if (my_media) {
            my_media.pause();
        }
    }

    // Stop audio
    // 
    function stopAudio() {
        if (my_media) {
            my_media.stop();
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    }

    // onSuccess Callback
    //
    function onSuccess() {
        console.log("playAudio():Audio Success");
    }

    // onError Callback 
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' + 
              'message: ' + error.message + '\n');
    }

    // Set audio position
    // 
    function setAudioPosition(position) {
        document.getElementById('audio_position').innerHTML = position;
    }

    </script>
  </head>
  <body>
    <a href="#" class="btn large"  
  onclick="playAudio('http://audio.ibeat.org/content/p1rj1s/p1rj1s_-   
   _rockGuitar.mp3');">Play Audio</a>
    <a href="#" class="btn large" onclick="pauseAudio();">Pause Playing Audio</a>
    <a href="#" class="btn large" onclick="stopAudio();">Stop Playing Audio</a>
    <p id="audio_position"></p>
  </body>
</html> 
```

但是当我在我自己的代码中使用它时，会生成一个错误，这是我的代码：

html:

```
 <section id="popup">
    <div id="popup-bg">
    </div>
    <div id="popup-box">
        <div id="popup-box-content">
    **<p><a id="gamePlay" class="gameReset button"  href="">Play</a></p>**
        </div>
    </div>
</section> 
```

脚本：

```
 var ui = $("#gameUI");
   var uiIntro = $("#popup");

   //Wait for PhoneGap to load//
      document.addEventListener("deviceready", onDeviceReady, false);

     // PhoneGap is ready
         //
        function onDeviceReady() {
          playAudio("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3");
         }

      //Audio player//
    var my_media = null;
    var mediaTimer = null;

   $(function(){
  init();
      });

    function init() {
        uiComplete.hide();
        uiCards.hide();
        playGame = false;

        **uiPlay.click(function(e) { //this is the button i want to play             
                                                  //sound after clicking it 
        e.preventDefault();

            playAudio('http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3');
                    //uiIntro.hide();
                    //startGame();
                });**
        }

         .....

    /****Audio Part***********/
   // Play audio//
    function playAudio(src) {
        // Create Media object from src
        my_media = new Media(src, onSuccess, onError);

        // Play audio
        my_media.play();

        // Update my_media position every second
        if (mediaTimer == null) {
            mediaTimer = setInterval(function() {
                // get my_media position
                my_media.getCurrentPosition(
                    // success callback
                    function(position) {
                        if (position > -1) {
                            setAudioPosition((position) + " sec");
                        }
                    },
                    // error callback
                    function(e) {
                        console.log("Error getting pos=" + e);
                        setAudioPosition("Error: " + e);
                    }
                );
            }, 1000);
        }
    }

    // Pause audio
    // 
    function pauseAudio() {
        if (my_media) {
            my_media.pause();
        }
    }

    // Stop audio
    // 
    function stopAudio() {
        if (my_media) {
            my_media.stop();
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    }

    // onSuccess Callback
    //
    function onSuccess() {
        console.log("playAudio():Audio Success");
    }

    // onError Callback 
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' + 
              'message: ' + error.message + '\n');
    }

    // Set audio position
    // 
    function setAudioPosition(position) {
        document.getElementById('audio_position').innerHTML = position;
    } 
```

我没有把整个代码只放在声音的一部分。单击 uiPlay 按钮后出现此错误：

```
 05-09 16:38:35.580: E/Web Console(521): ReferenceError: Can't find variable: Media    
   at file:///android_asset/www/js/dinopairs6.js:196 
```

请问有什么想法吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:23:39.703

这又是我，我只是忘记在我的 HTML 文件中添加包含 phonegep.js 的脚本标签：

```
<script type="text/javascript" charset="utf-8" src="js/phonegap-1.4.1.js"></script> 
```

希望这对其他人有帮助:)

# .net - Entity Framework 4.0 - 多对多关系是在映射的左侧插入记录，而不仅仅是在关系表中

> ID：10520654
> 
> 赞同：0
> 
> 时间：2012-05-09T16:57:13.953
> 
> 标签：.net, entity-framework, entity-framework-4, many-to-many

我在实体框架中与 POCOS 建立了多对多关系。

我有一个名为 Transaction 的表，它有一个 TransactionId 列和一些其他列，这是我要插入的实体，一个名为 Reason 的表是一个具有 ReasonId 和一个 ReasonDescription 列的目录表，我还有一个名为 Transaction_Reason 的表为了保存关系，该表有 2 列，称为 ReasonId 和 TransactionId，它们各自的表都有外键。

在我的 EF Transation 配置中，构造函数中有以下内容：

```
 base.HasKey(t => new { t.TransactionId }).HasMany(c => c.Reasons).WithMany(r => r.Transactions)
            .Map(t =>
            {
                t.MapRightKey("ReasonId");
                t.MapLeftKey("TransactionId");
                t.ToTable("Transaction_Reason");
            }); 
```

关系正确完成，我在我的 Transaction_ReasonTable 中插入了记录，但是每当我检查原因表时，我也会在这里创建记录，而这应该只是一个目录表。

这是我的插入代码：

```
 if (reasons != null)
                {
                    foreach (var item in reasons)
                    {
                        Reason reason = _reasonReopository.Find(item);

                        transaction.Reasons.Add(reason);

                    }
                }

                transaction = this._repository.Create(transaction);
                this._repository.Commit(); 
```

我只想在我的事务表中插入记录，这是我在 Save 方法和保存关系的 Transaction_Reason 表中创建的记录，而不是在我的原因目录表中。

有人知道如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:31:15.347

原因:) 是：您`reason`通过 获取实例`_reasonReopository.Find(item)`，它使用自己的上下文实例。被`transaction`添加到另一个上下文中`this._repository.Create(transaction)`，但是这个上下文不“知道” 中的`reason`实例，`transaction`并善意地将它们作为新项目插入。

您可以通过两种方式解决此问题：

*   获取`reason`与`transaction`.
*   将`reason`实例附加到`Reasons`DbSet 的上下文中`transaction`

我更喜欢第一个选项，但是由于您似乎每个实体都有存储库，因此选项 2 可能最适合您的情况。但是，我会考虑将您的存储库重构为每个“聚合”的存储库，其中聚合是许多逻辑相关的实体。但是，在聚合之间绘制边界可能是主观的。

# android - 打开 iOS、Android 和 BlackBerry 应用程序的通用链接

> ID：10520655
> 
> 赞同：2
> 
> 时间：2012-05-09T16:57:20.603
> 
> 标签：android, ios, blackberry

每个平台都有自己的方式通过 URL 打开已安装的应用程序。

Android有可以注册的URL pattern，iOS可以设置URL scheme。

如何通过邮件发送单个 URL 并根据单击 URL 的平台使该链接在 iOS 和 Android 上打开我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:01:06.217

您可以编写一个简单的网页来检测请求来自哪个浏览器，然后重定向到适当的链接。例如，[这里是 PHP 中重定向的解释](http://php.about.com/od/learnphp/ht/phpredirection.htm)。

**编辑：**

下面是一个代码示例。在 Android 上，它确实会弹出一个弹出窗口并要求用户输入，因为您的 Android 知道它可以打开 Google Play 网页或 Google Play 应用程序。这是 Android 上的预期行为。我没有在 iPhone 上尝试过，但它不应该在台式计算机上导致弹出窗口。

```
<?php

    if(preg_match ( "/.*Android.*/" , $_SERVER['HTTP_USER_AGENT'])){
        header( 'Location: https://play.google.com/store' ) ;
    } else if (preg_match ( "/.*iPhone.*/" , $_SERVER['HTTP_USER_AGENT'])){
        header( 'location: http://www.apple.com/itunes/whats-on/');
    }

?>
<html>

<body>
Show for web page for desktop
</body>
</html> 
```

这是[与其他一些解决方案相关的问题](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

**编辑：**

我刚刚注意到，您想打开应用程序本身而不是应用程序的下载页面。上面的代码仍然可以工作。您只需要修复网址。这两个问题适用

*   [Android 自定义 URL 可以像在 iOS 中一样打开应用程序](https://stackoverflow.com/questions/5065982/android-custom-url-to-open-app-like-in-ios)
*   [从 android 浏览器启动自定义 android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)

# python - SQLAlchemy：选择相关多对多元素的计数

> ID：10520658
> 
> 赞同：0
> 
> 时间：2012-05-09T16:57:38.300
> 
> 标签：python, sql, many-to-many, sqlalchemy

我有两个表/对象之间的多对多关系：标签和内容。`Tag.content`是从标签到具有该标签的所有内容的关系。

现在我想找出分配给标签的内容对象的数量（对于所有标签，否则我会简单地使用`len()`）。以下代码几乎可以工作：

```
cnt = db.func.count()
q = db.session.query(Tag, cnt) \
    .outerjoin(Tag.content) \
    .group_by(Tag) \
    .order_by(cnt.desc()) 
```

但是，由于明显的原因，它永远不会返回零计数 - 毕竟由于`LEFT JOIN`使用，每个标签至少有一行。这是一个问题，因为我想获得所有标签的正确计数 - 即`0`如果标签是孤立的。

所以我想知道是否有办法实现这一点 - 显然不需要向数据库发送*n+1*查询。纯 SQL 解决方案也可能没问题，通常以某种方式将这样的解决方案映射到 SA 并不难。

`.filter(Tag.content.any())`删除计数不正确的结果，但它会通过从结果集中完全删除行来做到这一点，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:23:08.307

解决了。我需要在 COUNT 中使用 DISTINCT：

```
cnt = db.func.count(db.distinct(Content.id)) 
```

# asp.net-mvc-3 - asp.net mvc3，为什么 dataannotation 验证没有验证器属性？

> ID：10520660
> 
> 赞同：0
> 
> 时间：2012-05-09T16:57:56.247
> 
> 标签：asp.net-mvc-3, data-annotations

我有一个简单的 ViewModel

```
public class ProductViewModel
{
    [Required(ErrorMessage = "This title field is required")]
    public string Title { get; set; }
    public double Price { get; set; }
} 
```

这是我基于此视图模型的表单。

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>ProductViewModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Price)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Price)
        @Html.ValidationMessageFor(model => model.Price)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

我不想验证价格字段。但它会自动验证，如果没有输入，将显示此字段是必需的。我注意到我使用双倍价格。如果我将其更改为“字符串”。验证被删除。为什么键入“double”会导致自动验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:03:06.913

因为 double 是值类型，不能为 null。你本可以做到的，`double?`或者`Nullable<double>`它会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:01:55.340

> 我不想验证价格字段。但它已自动验证，如果未输入任何内容，将显示此字段为必填项

因为 double 是值类型，不能为 null。如果您希望该值允许没有值，请在您的模型上使用可为[空](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)的双精度：`double?`

```
public class ProductViewModel
{
    [Required(ErrorMessage = "This title field is required")]
    public string Title { get; set; }
    public double? Price { get; set; }
} 
```

# iphone - 无法使用 stringByAppendingPathComponent 创建文件

> ID：10520663
> 
> 赞同：0
> 
> 时间：2012-05-09T16:58:10.723
> 
> 标签：iphone

这段代码在我的应用程序中一直有效到昨天：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *applicationDocDirectory = [paths objectAtIndex:0];
        NSLog(@"%@", applicationDocDirectory);
        NSString *tempFilePath = [applicationDocDirectory stringByAppendingPathComponent:@"temp.txt"];  

    NSFileManager *fileManager = [NSFileManager defaultManager];
    BOOL success = [fileManager fileExistsAtPath:tempFilePath]; 
```

我继续收到 Cocoa 错误代码 4，即路径中不存在我的文件。我检查了路径，路径是正确的。这段代码停止工作有什么明显的原因吗？我尝试清理，从模拟器或设备中删除我的应用程序并修复了一段时间，但随后它就停止了工作。不太确定还有什么可能导致这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:32:49.937

您无法使用 -stringByAppendingPathComponent 创建文件。这会创建一个自动释放的 NSString 对象。

如果这一直有效，那么“temp.txt”必须已经存在。

要创建文件，您可以使用：

```
- (BOOL)createFileAtPath:(NSString *)path contents:(NSData *)contents attributes:(NSDictionary *)attributes 
```

要从 NSString 创建文件，您可以使用：

```
- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile encoding:(NSStringEncoding)enc error:(NSError **)error 
```

# objective-c - 创建一个不规则形状的框架

> ID：10520672
> 
> 赞同：1
> 
> 时间：2012-05-09T16:58:51.573
> 
> 标签：objective-c, ios, uiimageview, uibezierpath, image-clipping

我创建了一个画布，其中显示了一个在越过边缘时被剪裁的图像。我可以用方形框架来做这件事，但是我想要使用的框架是下面的那个。有什么方法可以在框架内剪辑图像而不必在图像周围添加非透明方形边框，即只使用我已经绘制的黑线？（在 iPad 上）

![在此处输入图像描述](../Images/adafbe01c9b3c340432a90f1d2ff76a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:17:58.630

您需要使用 Core Graphics 和 Quartz 来处理这种剪辑/图形操作。 [http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066)

如果您使用的是 UIBezierPath，则可以在使用以下过程 [http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_paths/dq_paths 后实现您的剪辑。 html#//apple_ref/doc/uid/TP30001066-CH211-TPXREF101](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-TPXREF101)

1.  将您的 UIBezierPath 转换为 CGPath
2.  将您的图像放入 CGContext
3.  通过 CGContextAddPath 将您的 CGPath 添加到上下文中
4.  使用 CGContextClip 剪辑你的上下文

或者，如果您不想弄乱路径（并且取决于此技术是否适合您的情况，您对问题的描述很难判断），可能值得使用图像遮罩来实现您的效果'在之后。请参阅第一个链接并查看“位图图像和图像蒙版”。

# validation - 即时银行帐号验证

> ID：10520673
> 
> 赞同：6
> 
> 时间：2012-05-09T16:58:51.787
> 
> 标签：validation, emacs, elisp, iban

今天我不得不将一个真实的（死树）信中的银行帐号复制到 Emacs 缓冲区，然后通过电子邮件发送。我在将它从字母复制到 Emacs 缓冲区时犯了一个错误（忘记了一位数字）。这导致一位同事的一封电子邮件告诉我：*“无法付款，伪造的 IBAN”*。

创建一个功能/次要模式有多难：

*   检测看起来像 IBAN 的“事物”（例如，两个大写字母后跟在“x”和“y”数字之间，忽略空格等。有现成的正则表达式可以验证某事物是否看起来像 IBAN或不）

*   运行 mod 97，如果 IBAN 看起来无效，则以红色突出显示

理想情况下，我需要一种可以为几种类型的缓冲区（愚蠢的文本文件，还有电子邮件等）打开的次要模式。

使用 Emacs 来做到这一点的“方法”是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T02:18:28.743

您可以轻松地使用类似的东西

```
(font-lock-add-keywords nil
  '(("[A-Z][A-Z][0-9]\\{x,y\\}"
     (0 (if (eq (mod blabla 97) foo) nil 'font-lock-warning-face)))))) 
```

填个blabla就行了。

# ruby-on-rails - Paperclip - 如何控制在上传的文件名中哪些字符被转义/更改为下划线？

> ID：10520674
> 
> 赞同：4
> 
> 时间：2012-05-09T16:58:55.683
> 
> 标签：ruby-on-rails, paperclip

在最近的回形针 gem 升级中，我注意到上传的文件名正在修改，并且一些字符正在更改为下划线。

我不喜欢将空格更改为下划线的事实。文件名中的空格有什么问题？90年代已经过去了。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T17:03:22.440

经过一番挖掘，我发现了 has_attached_file 的这个未记录的选项：

```
:restricted_characters 
```

此选项的默认值似乎是这样的：

```
:restricted_characters => /[&$+,\/:;=?@<>\[\]\{\}\|\\\^~%# ]/, 
```

最后一个是空格。删除它，你很好。

# jquery - jquery datepicker range - 自动显示第二天

> ID：10520675
> 
> 赞同：2
> 
> 时间：2012-05-09T16:58:57.340
> 
> 标签：jquery, datepicker, range

我有 2 个用于酒店预订的日期选择器，在日期范围的表单中有 2 个文本字段。如果有人使用第一个日期选择器选择一个日期，第二个会自动在文本字段二中填充相同的日期。如何更改脚本以在文本字段二中填充第二天的日期而不是相同的日期？

我的代码

```
$(function() {
var dates = $( "#from, #to" ).datepicker({
showOn: "both",
buttonImage: "fileadmin/template/datepicker/img/kalender.png",
buttonImageOnly: true,
defaultDate: "+1w",
changeMonth: true,
numberOfMonths: 1,
onSelect: function( selectedDate ) {
  var option = this.id == "from" ? "minDate" : "maxDate",
    instance = $( this ).data( "datepicker" );
    date = $.datepicker.parseDate(
      instance.settings.dateFormat ||
      $.datepicker._defaults.dateFormat,
      selectedDate, instance.settings );
  dates.not( this ).datepicker( "option", option, date );
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:08:03.380

试试这个代码的`onSelect`事件：

```
onSelect: function(selectedDate) {
    var option = this.id == "from" ? "minDate" : "maxDate";
    var date = new Date($(this).datepicker('getDate'));
    date.setDate(date.getDate() + 1);
    dates.not(this).datepicker("option", option, date);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:09:53.710

```
$(function() {
    var dates = $("#from, #to").datepicker({
        showOn: "both",
        buttonImage: "fileadmin/template/datepicker/img/kalender.png",
        buttonImageOnly: true,
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function(dateText, inst) {
            var option = this.id == "from" ? "minDate" : "maxDate",
                actualDate = new Date(dateText);
            var newDate = new Date(actualDate.getFullYear(), actualDate.getMonth(), actualDate.getDate() + 1);
            dates.not(this).datepicker("option", option, newDate);
        }
    });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/SAtr3/2/)**

# java - 应用程序结束后具有 Hibernate 的 HSQLDB 不保存记录

> ID：10520682
> 
> 赞同：0
> 
> 时间：2012-05-09T16:59:33.003
> 
> 标签：java, hibernate, hsqldb

我有一个示例应用程序，它加载 2 条记录 ro 数据库，然后从数据库中获取所有记录并从每条记录中打印信息。

我的问题如下：当我运行程序时，它只获取在此运行时插入的记录，而不是之前插入的记录，另外，当我用 SQirrel 打开数据库时，没有这样的数据库。

这是我的休眠配置：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="dialect">org.hibernate.dialect.HSQLDialect</property>
        <property name="connection.driver_class">org.hsqldb.jdbcDriver</property>
        <property name="connection.url">jdbc:hsqldb:hibertest</property>
        <property name="connection.username">sk</property>
        <property name="connection.password">0000</property>
        <property name="show_sql">true</property>
        <property name="current_session_context_class">thread</property>
        <property name="hbm2ddl.auto">update</property>

        <mapping class="models.Work" />
    </session-factory>
</hibernate-configuration> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:09:48.170

我对 HSQLDB 没有经验，但请尝试以下 URL：

```
<property name="connection.url">jdbc:hsqldb:file:hibertest;shutdown=true</property> 
```

请参阅：[*连接 URL*文档](http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html#dpc_connection_url)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:10:14.673

我相信 hsqldb 的默认配置是不在磁盘上为创建的表保存数据。请查看 hsqldb 文档以了解如何更改此行为并使表持久化。

[http://hsqldb.org/doc/guide/guide.html#sgc_persist_tables](http://hsqldb.org/doc/guide/guide.html#sgc_persist_tables)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-02T06:51:25.353

所有提供的答案都对我没有帮助。目前我使用 HSQLDB-2.3.2 和 hibernate-core-3.5.6 和 annotations-3.2.0

除了 Tomasz 的回答之外，我还需要手动编辑数据库脚本文件来设置：

```
SET WRITE_DELAY 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T17:21:04.577

您可以通过执行以下操作使用 HSQL 持久化数据，1。

```
 Connection c = DriverManager.getConnection("jdbc:hsqldb:file:/opt/db/testdb", "SA", ""); 
```

**“/opt/db/testdb”这里是磁盘中的数据库位置。**
2\. `CREATE **TEXT** TABLE <tablename> (<column definition> [<constraint definition>])`
3\. 分配表格的来源
`SET TABLE mytable SOURCE "myfile;fs=|"`

参考： http: [//hsqldb.org/doc/2.0/guide/texttables-chapt.html](http://hsqldb.org/doc/2.0/guide/texttables-chapt.html)

我的 Github 存储库显示了示例[https://github.com/Ayyamperumal/HSQL/tree/master/SampleHSQLdb](https://github.com/Ayyamperumal/HSQL/tree/master/SampleHSQLdb)

您可以使用 Eclipse 中的“数据库开发”透视图来查看数据。（提供 hsql jar 作为驱动程序）或者从 hsqldb-*.jar 执行**org.hsqldb.util.DatabaseManager**以获取用于查看数据的 GUI。

# vb.net - 如何在visual basic中使用不同的“姓氏”访问变量

> ID：10520684
> 
> 赞同：0
> 
> 时间：2012-05-09T16:59:35.380
> 
> 标签：vb.net, visual-studio, visual-studio-2010

我在创建一个 Visual Basic 应用程序时使用了 15 个文本框。文本框的名称从“TB1”到“TB15”。我现在想将该值复制到名为“a”的二维数组中。我该怎么做请帮助下面的代码

```
For i = 0 To 4 Step 1     
  For j = 0 To 2 Step 1
    a(i, j) = Convert.ToInt32(TB1.Text)    
  Next
Next 
```

我应该如何修改线路`a(i, j) = Convert.ToInt32(TB1.Text)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:06:04.003

默认情况下，步长始终为 +1，因此不需要。您可以通过调用 Controls() 按名称访问控件，并且可以完全访问该对象。

```
 Dim Counter As Long = 0
    For i = 0 To 4
        For j = 0 To 2
            Counter += 1
            a(i, j) = Convert.ToInt32(Controls("TB" & Counter.ToString).Text)
        Next
    Next 
```

# iphone - UIGraphicsGetImageFromCurrentImageContext 和 drawInrect 之间的连接

> ID：10520692
> 
> 赞同：0
> 
> 时间：2012-05-09T17:00:17.310
> 
> 标签：iphone, ios, uikit, uiimage, image-resizing

我找到了以下代码来调整 UIImage 的大小：

```
CGSize newSize = CGSizeMake(self.image.size.width*0.25, self.image.size.height*0.25);
UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
[self.image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
self.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但有几件事我不明白。

首先，我尝试将原始图像的大小调整为原始大小的 25% - 但这种方法将其大小调整为原始大小的 50%。为什么？

`drawInRect`和之间有什么联系`UIGraphicsGetImageFromCurrentImageContext`。正如我所看到的，它`UIGraphicsGetImageFromCurrentImageContext`正在覆盖当前图像，从而使调用`drawInRect`变得多余。

如果有人可以帮助我详细了解正在发生的事情，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:07:17.353

首先，因为它是视网膜屏幕，你应该将比例设置为 1.0 ，或者它只是 x2

```
UIGraphicsBeginImageContextWithOptions(newSize, NO, 1.0); 
```

如果您调用**UIGraphicsBeginImageContext**，任何绘画工作都会导致您指定的**上下文**

代码中的**drawInRect**将图像绘制到上下文中，它不是多余的

或者你可以删除它，你会得到一个空图像

最后，您可以从上下文中获取合并的 UIImage

```
UIGraphicsGetImageFromCurrentImageContext(); 
```

只需从您所做的事情中获取 UIImage（根据上下文）

如果你不设置图像回来，它不会改变任何东西

```
self.image = UIGraphicsGetImageFromCurrentImageContext(); 
```

# grails - 资源插件——如何在目录中包含所有内容？

> ID：10520693
> 
> 赞同：9
> 
> 时间：2012-05-09T17:00:22.597
> 
> 标签：grails, resources

我有一个 grails 应用程序，其中包含一系列嵌套目录中的大量单个 javascript 文件。我想通过资源插件管理它们，但不想显式注册每一个。

**网页目录结构**

```
webapp
  app
    controller
      controller1.js
      controller2.js
      ...
    model
      model1.js
      ...
    view
      view1.js 
```

最好在我的`AppResources.groovy`文件中声明：

`resource url: 'app/**/*.js'`

但这不起作用——抛出一个空指针。我试过了：

`resource url: 'app/**'`但没有运气

我以为我会在配置文件中放入一些代码，这些代码将通过目录结构递归，但这似乎不起作用。这是我尝试过的：

```
def iterClos = {
        it.eachDir( iterClos );
        it.eachFile {
            resource url: ${it.canonicalPath};

        }

    }

    iterClos( new File("$grails.app.context/app") ) 
```

不幸的是，这也失败了。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T01:52:53.077

问题解决了。

事实证明，运行代码以通过我的 javascript 目录回避的想法是可行的。我只是代码不正确。这是动态加载我的 javascript 文件的代码：

--AppResources.groovy

```
import org.codehaus.groovy.grails.web.context.ServletContextHolder as SCH

modules = {
    core {
        resource url: '/resources/css/app.css', disposition: 'head'
        resource url: '/resources/css/myapp.css', disposition: 'head'
        resource url: '/extjs/ext-all-debug.js', dispostion: 'head'

        getFilesForPath('/app').each {
          resource url: it
        }
    }
}

def getFilesForPath(path) {

    def webFileCachePaths = []

    def servletContext = SCH.getServletContext()

    //context isn't present when testing in integration mode. -jg
    if(!servletContext) return webFileCachePaths

    def realPath = servletContext.getRealPath('/')

    def appDir = new File("$realPath/$path")

    appDir.eachFileRecurse {File file ->
        if (file.isDirectory() || file.isHidden()) return
        webFileCachePaths << file.path.replace(realPath, '')
    }

    webFileCachePaths
} 
```

以上将导致资源插件跟踪我的 javascript 文件。下面是资源处于调试模式时 html 的样子：

```
<script src="/myapp/extjs/ext-all-debug.js?_debugResources=y&n=1336614540164" type="text/javascript" ></script>
<script src="/myapp/app/controller/LogController.js?_debugResources=y&n=1336614540164" type="text/javascript" ></script>
<script src="/myapp/app/controller/LoginController.js?_debugResources=y&n=1336614540164" type="text/javascript" ></script>
<script src="/myapp/app/controller/ProfileController.js?_debugResources=y&n=1336614540164" type="text/javascript" ></script> 
```

...

作为 Grails 的新手，可以将可执行代码放在配置文件中是一个非常受欢迎的事实！

# xml - 使用处理指令提供元信息？

> ID：10520695
> 
> 赞同：0
> 
> 时间：2012-05-09T17:00:30.717
> 
> 标签：xml, xslt, jaxb

我打算在我的 XML 数据中添加一些版本信息。由于我的工具多年来不断发展，我的 XML 内容/格式也在不断发展。

我可能会向根元素添加一些属性，但我不太喜欢这个解决方案，因为版本信息不是我的业务类的固有属性。另一个想法是为每个新版本引入一个版本化的命名空间......

我观察到 MS 使用一些`<?mso-application ... ?>`PI 来标记他们的文档。这样做并引入我自己的自定义 PI 来携带我的元信息是个好主意吗？是否有常用 PI 标签的列表或如何设计自己的 PI？

为了使我的工具能够读取以前/过时的 XML 数据，我需要在我的 unmashaller 前面插入一些 XSLT 转换以自动适应以前的版本。

因此，我的业务类不必关心任何过时的 XML 语法。

有什么建议么？

迪特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:48:09.883

使用版本化命名空间绝对是个坏主意。这意味着如果您对架构进行 3% 的更改，这仅影响 1% 的用户，那么每个用户都将不得不更改他们的应用程序以更改为新的命名空间，或者更糟糕的是，处理识别多个命名空间的复杂性.

使用 PI 不是一种常见的解决方案，但它没有明显的危害；除了在模式验证期间您无法强制 PI 的存在或内容这一事实之外。

在我看来，最干净的解决方案是根元素上的版本属性。XSLT 就是这样做的，而且效果很好。

# c# - ASP.NET 2.0 C# 插入数据库不起作用

> ID：10520698
> 
> 赞同：0
> 
> 时间：2012-05-09T17:00:40.960
> 
> 标签：c#, asp.net-2.0

我的 Web 应用程序中有一个 asp.net 向导控件，我正在从后面的代码调用存储过程以将数据插入数据库。在 SSMS 中执行 proc 工作正常，我之前已经让这个块工作过一次并进行了更改（不幸的是我不记得我做了哪些更改）。我的问题是，当单击下一个按钮时，不会引发错误，也不会将数据写入数据库。我已经通过将异常添加到 cnx2 try 块中进行了测试，并且抛出了异常，所以我知道代码正在执行到我想要的位置，但它仍然没有插入。任何帮助表示赞赏谢谢。如果有任何我可以添加的信息可能有助于让我知道

```
 protected void onNextButtonClick(object sender, EventArgs e)
    {
        if (Wizard1.ActiveStepIndex.Equals(1))
        {
            page1Submit();
        }
        else if (Wizard1.ActiveStepIndex.Equals(2))
        {
            page2Submit();
        }
        else if (Wizard1.ActiveStepIndex.Equals(3))
        {
            page3Submit();
        }
        else if (Wizard1.ActiveStepIndex.Equals(8))
        {
            page8submit();
        }
    }
    protected void page1Submit()
    {
        string hispanic;
        if (cbIsHispanic.Checked)
        {
            hispanic = "1";
        }
        else
        {
            hispanic = "0";
        }
        bool newReport = true;
        SqlConnection cnx = new SqlConnection(server);
        SqlCommand cmd = new SqlCommand("[ReportCheckExists]", cnx);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@reportNumber", dReportNumber.Text.ToString());
        try
        {
            cnx.Open();
            int rowCount = Convert.ToInt32(cmd.ExecuteScalar());
            cnx.Close();
            if (rowCount > 0)
            {
                newReport = false;
            }

        }
        catch (Exception ex)
        {
            throw new Exception("Error executing MyProcedureName.", ex);
        }
        if (newReport)
        {
            SqlConnection cnx2 = new SqlConnection(server);
            SqlCommand cmd2 = new SqlCommand("[NewReport]", cnx2);
            cmd2.CommandType = CommandType.StoredProcedure;
            cmd2.Parameters.AddWithValue("@reportNumber", dReportNumber.Text.ToString());
            try
            {
                cnx.Open();
                cmd.ExecuteNonQuery();
                cnx.Close();

            }
            catch (Exception ex)
            {
                throw new Exception("Error executing MyProcedureName.", ex);
            }  
        }
        else
        {
            string strJavaScript = "<script language = javascript type=text/Javascript> alert('That report number already exists. If you need to modify a report select it from the main menu or enter the report number again.')</script>";
            this.Page.RegisterClientScriptBlock("Key4", strJavaScript);
            Wizard1.ActiveStepIndex = 0;

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:07:01.227

It's probably because you are executing the `cmd` command, and not `cmd2` in your second try catch block

# python - 语法高亮 标签

> ID：10520714
> 
> 赞同：13
> 
> 时间：2012-05-09T17:02:03.663
> 
> 标签：python, html, css, syntax-highlighting, pre

是否有任何库可以让我在标签中显示代码`<pre>`并根据语言突出显示语法？我在想象这样的事情：

```
<pre class="python">
class MyClass:
    """A simple example class"""
    i = 12345
    def f(self):
        return 'hello world'
</pre> 
```

...其中的 CSS`pre.python`将适当地突出显示 Python 代码。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T17:05:05.077

有[SyntaxHighlighter](https://github.com/syntaxhighlighter/syntaxhighlighter)：

```
<pre class="brush: python">
   # python code here
</pre> 
```

还有[highlight.js](https://highlightjs.org/)可以选择自动检测语法并适当地突出显示；但是，您需要同时使用这两个`<pre><code>`标签来包装您的代码。

如果您正在寻找服务器端示例，则可以使用[GeSHi](http://qbnz.com/highlighter/)或Python 的[Pygments](https://pygments.org/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-23T14:44:50.950

我更喜欢[**highlight.js**](https://highlightjs.org/)。它支持[112 种语言](https://highlightjs.org/static/demo/)。

从浏览器控制台使用此代码注入预览您的页面：

```
// Highlight 22 popular code types. TODO: Inline for speed and security.
function loadjscssfile(filename, filetype){  // http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml
    if(filetype=="js"){
        var fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", filename)
    }
    else if(filetype=="css"){
        var fileref=document.createElement("link")
        fileref.setAttribute("rel", "stylesheet")
        fileref.setAttribute("type", "text/css")
        fileref.setAttribute("href", filename)
    }
    if(typeof fileref!="undefined") document.getElementsByTagName("head")[0].appendChild(fileref)
}
loadjscssfile("//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/vs.min.css", "css")
loadjscssfile("//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js", "js")
setTimeout("var a = document.querySelectorAll('.code'); for(var i=0; i < a.length; ++i) hljs.highlightBlock(a[i])", 600) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:36:09.893

不确定这是否是您所追求的，但是当我想要文档中的语法高亮代码块时，我在[Pandoc-Markdown](http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown)中编写文档，然后使用[Pandoc](http://johnmacfarlane.net/pandoc/)将文档处理为 html。

您可以使用 pandoc-markdown 语法获得突出显示的代码块，如下所示：

```
~~~{.python}
class MyClass:
    """A simple example class"""
    i = 12345
    def f(self):
        return 'hello world'
~~~ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T17:47:17.090

是的。您可以使用[SyntaxHighlighter](https://github.com/syntaxhighlighter/syntaxhighlighter)。它易于使用，正是您需要的东西。只需在您的块中添加`code`标签。`pre`

它突出显示了包括 Python 在内的大约 23 种语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-02T10:53:48.820

**首先下载或使用 CDN***强调文本*

```
 <link rel="stylesheet" href="{{asset("assets/css/prism.css")}}">
    <link rel="stylesheet" href="{{asset("assets/css/prism-unescaped-markup.min.css")}}">

<script src="{{asset("assets/js/prism.js")}}"></script>
<script src="{{asset("assets/js/prism-unescaped-markup.min.js")}}"></script> 
```

**使用 HTML**（仅 HTML）

```
<script type="text/plain" class="language-markup">
<!DOCTYPE html>
<html>
  <head>
    <title>Hello World</title>
  </head>
  <body>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec viverra nec nulla vitae mollis.</p>
  </body>
</html>
</script> 
```

**与任何**

```
 <code class="language-css">
       p { color: red }
    </code> 
```

# mongodb - 如何在猫鼬中让插入同步？

> ID：10520715
> 
> 赞同：0
> 
> 时间：2012-05-09T17:02:05.290
> 
> 标签：mongodb, mongoose, synchronous

> **可能重复：**
> [节点+猫鼬：获取最后插入的ID？](https://stackoverflow.com/questions/6074245/node-mongoose-get-last-inserted-id)

我正在尝试通过 mongoose 将文档插入 mongodb：

```
var mongoose = require('mongoose');

mongoose.connect('mongo://localhost/shuzu_test');

var conn = mongoose.connection;

var user1;

conn.collection('users').insert({a: 111}, function(err, docs){
    console.log(docs);
    user1 = docs[0];
});

var question1;
conn.collection('questions').insert({
    t:'Hello', 
    userId: user1._id /*!!!! error: user1 is undefined */
}, function(err, docs){
    question1 = docs[0];
}); 
```

请注意这一行：

```
/*!!!! error: user1 is undefined */ 
```

当它试图插入问题时，`user1`仍然没有插入，它仍然是`undefined`。如何更改代码以使插入同步？所以我可以确保`user1`在插入问题之前已经插入并且有价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:35:16.340

您需要将插入问题集合的代码放在从插入到用户集合的回调中。

所以像这样：

```
conn.collection('users').insert({a: 111}, function(err, docs){
    console.log(docs);
    user1 = docs[0];

    var question1;
    conn.collection('questions').insert({
        t:'Hello', 
        userId: user1._id /*!!!! error: user1 is undefined */
    }, function(err, docs){
        question1 = docs[0];
    });
}); 
```

# jquery - jQuery循环不起作用

> ID：10520721
> 
> 赞同：0
> 
> 时间：2012-05-09T17:02:43.053
> 
> 标签：jquery, jquery-cycle

我正在使用 jquery 循环。如果它有多个图像，它就可以工作。一张图片它不起作用。也不显示标题。这是一个[js 小提琴](http://jsfiddle.net/qnLtc/)。谢谢

具有多个图像的滑块正在工作。

```
<div id="main">
        <div id="slideshow" class="pics">
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" width="200" height="200" alt="Beach 1" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" width="200" height="200" alt="Beach 2" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" width="200" height="200" alt="Beach 3" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach4.jpg" width="200" height="200" alt="Beach 4" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach5.jpg" width="200" height="200" alt="Beach 5" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach6.jpg" width="200" height="200" alt="Beach 6" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach7.jpg" width="200" height="200" alt="Beach 7" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach8.jpg" width="200" height="200" alt="Beach 8" />
        </div>
        <p id="caption"></p>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:22:20.317

您可以在循环调用之前添加它：

```
if ($("#slideshow img").length == 1) {
    $("#slideshow img").clone().appendTo($("#slideshow"))
} 
```

[演示](http://jsfiddle.net/jXZDX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:09:36.280

无需检查长度即可实现此目的的另一种方法是在循环调用之前为第一张图像设置标题：

**更新：**

要在不是实际循环的项目时使用 img 的 alt：

[http://jsfiddle.net/lucuma/4Ts3T/7/](http://jsfiddle.net/lucuma/4Ts3T/7/)

```
$(function() {
    $('#caption').html($('#slideshow img:eq(0)').attr('alt'));
    $('#slideshow').cycle({
        fx:       'fadeZoom',
        timeout:   2000,
        after:     function() {
            $('#caption').html($('img', this).attr('alt')); // get nested img's alt
        }
    });
})​ 
```

**原答案：**

[http://jsfiddle.net/lucuma/4Ts3T/2/](http://jsfiddle.net/lucuma/4Ts3T/2/)

```
$(function() {
    $('#caption').html($('#slideshow img:eq(0)').attr('alt'));
    $('#slideshow').cycle({
        fx:       'fadeZoom',
        timeout:   2000,
        after:     function() {
            $('#caption').html(this.alt);
        }
    });
})​ 
```

# ruby-on-rails-3.1 - 为什么 rake assets:precompile 在开发中会导致问题，但在我的生产环境中却没有

> ID：10520724
> 
> 赞同：4
> 
> 时间：2012-05-09T17:03:09.493
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

我已将 heroku 上的应用程序升级到 cedar 堆栈，以便资产管道正常工作。通过选择在本地编译资产，我遵循了[heroku 文档中给出的说明。](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

这已经创建了一个目录 public/assets。生产中的一切都完美无缺（css，js，没有问题）。回到我的开发环境似乎会导致 js 无法正常运行。

在**环境/生产.rb**

```
config.serve_static_assets = false
config.assets.compress = true
config.assets.compile = true
config.assets.digest = true 
```

在**环境/development.rb**

```
config.assets.compress = false
config.assets.debug = true
config.assets.compile = true 
```

我检查了源页面，所有文件都正确加载，没有重复条目。我已经阅读了一些关于是在本地还是在生产环境中编译资产的问题，但它们似乎都没有帮助。我是否还缺少其他东西来恢复我的开发 JavaScript 代码，这是要遵循的正确程序吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:17:19.497

好的，我似乎已经解决了。

**在 environment/development.rb 中更改此行**

```
config.assets.debug = true 
```

**对此**

```
config.assets.debug = false 
```

不知道为什么会这样，但通过阅读 rails 指南和引用：

“当调试模式关闭时，Sprockets 连接并在所有文件上运行必要的预处理器。关闭调试模式后，上面的清单将生成：”

```
<script src="/assets/application.js" type="text/javascript"></script> 
```

希望这可以帮助有类似问题的人。

# mod-rewrite - Mod rewrite apache - 仅重写基本 url

> ID：10520725
> 
> 赞同：0
> 
> 时间：2012-05-09T17:03:09.780
> 
> 标签：mod-rewrite

我想 改写`www.site.com/a/b/?param1=one&param2=two` 。 `www.site.com/c/d/e/?param1=one&param2=two`

www.site.com/a/b 不存在的地方。我试过了

```
RewriteEngine on
Options +FollowSymLinks    
RewriteRule ^a/b/(.*)$ www.site.com/c/d/e/$1 [QSA,L] 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:05:51.703

试试这个：

```
RewriteEngine on
Options +FollowSymLinks
RewriteRule ^/a/b/(.*)$ /c/d/e/$1 [QSA,L] 
```

不需要添加不完整的域。如果您希望用户访问第二个域，您必须添加`R`选项和协议。要重定向到第二个域，请尝试以下操作：

```
RewriteRule ^/a/b/(.*)$ http://www.site.com/c/d/e/$1 [R,QSA,L] 
```

# android - 关闭 ProgressDialog 但仍然泄漏

> ID：10520728
> 
> 赞同：1
> 
> 时间：2012-05-09T17:03:12.080
> 
> 标签：android, progressdialog

当我尝试完成我的活动时，我得到了泄漏的 Windows 错误。

我查看了很多关于此的类似问题，答案是使用`dismiss()`而不是`hide()`，或者在调用之前关闭对话框`finish()`。

我打电话`dismiss()`然后打电话`finish()`为什么我会漏水？

这是我`ProgressDialog`在扩展 AsyncTask 的类中的代码

```
 public Background(Context c){
        context = c; //the activity's context
        dialog = new ProgressDialog(c);
    }
    protected void onPreExecute(){
        dialog.show();
    }
    protected String doInBackground(String... urls) {
        //do http request
        return "";
    }
    protected void onPostExecute(String result) {

        dialog.dismiss();
        if(request == LOGOUT_REQUEST)
            finish();
        else{
            getResults(document);
        }
    } 
```

它以前工作过，但我相信我的代码是错误的。我开始一项新活动回到旧活动，而不是仅仅调用完成，我认为这是正确的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:20:08.850

您正在关闭`onPostExecute`方法中的对话框。`AsyncTask`除非已完成，否则该方法不会运行。当您使用后退按钮退出应用程序时，您是否只会收到错误消息？如果是这样，您还应该确保在`onDestroy`Activity 中关闭对话框。

# asp.net-mvc-3 - Ninject UnitOfWork 混乱

> ID：10520729
> 
> 赞同：1
> 
> 时间：2012-05-09T17:03:14.777
> 
> 标签：asp.net-mvc-3, unit-of-work, ninject.web.mvc

我一直在 MVC 3 应用程序中使用 Ninject，但我正在尝试更改我的数据对象的模式以使用 UnitOfWork，但我无法弄清楚如何让 Ninject 正确处理这个问题。

我知道我的类的实现在我的控制台应用程序中像这样手动构建时起作用：

```
IDatabaseFactory factory = new DatabaseFactory();
IUnitOfWork worker = new UnitOfWork(factory);
IBlogCategoryDao dao = new BlogCategoryDao(factory);
IBlogCategoryService service = new BlogCategoryService(dao);

BlogCategory category = service.GetById(id);

try
{
    if (category != null)
    {
    service.Delete(category);
    worker.Commit();
    Console.WriteLine("Category deleted successfully!");
    }
    else
    {
    Console.WriteLine("Entity doesn't exist.");
    }
}
catch (Exception ex)
{
    Console.WriteLine("Error deleting category: {0}", ex.Message);
} 
```

在我的 MVC 3 应用程序中，我使用的是 Ninject.MVC3 NuGet 包，它位于 RegisterServices 方法中。

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<IDatabaseFactory>().To<DatabaseFactory>();
    kernel.Bind<IUnitOfWork>().To<UnitOfWork>().InRequestScope();

    kernel.Bind<IBlogCategoryDao>().To<BlogCategoryDao>();
    kernel.Bind<IBlogDao>().To<BlogDao>();

    kernel.Bind<IBlogCategoryService>().To<BlogCategoryService>();
    kernel.Bind<IBlogService>().To<BlogService>();
} 
```

虽然这在大多数情况下都有效，但不会执行所有 POST 请求（插入、更新、删除）。没有抛出异常，当我单步执行它时，它会毫无问题地通过 SaveChanges() 方法并返回堆栈，但没有执行任何操作。所以我知道我的 Ninject 配置一定遗漏了一些东西。

这是我的工作单元课。

```
public class UnitOfWork : IUnitOfWork
{
    private Database _database;  <-- DbContext derived class

    private readonly IDatabaseFactory _databaseFactory;

    public UnitOfWork(IDatabaseFactory databaseFactory)
    {
        this._databaseFactory = databaseFactory;
    }

    public Database Database
    {
        get
        {
            return _database ?? (_database = _databaseFactory.Get());
        }
    }

    public void Commit()
    {
        Database.Commit();
    }
} 
```

这是 DatabaseFactory 类：

```
public class DatabaseFactory : Disposable, IDatabaseFactory
{
    private Database _database;

    public DatabaseFactory()
    {

    }

    public virtual Database Get()
    {
        if (_database == null)
        {
            _database = DataObjectFactory.CreateContext();
        }

        return _database;
    }

    protected override void DisposeCore()
    {
        if (_database != null)
        {
            _database.Dispose();
        }
    }
} 
```

还有我的 DataObjectFactory 类：

```
public static class DataObjectFactory
{
    private static readonly string _connectionString;

    /// <summary>
    /// Static constructor. Reads the connectionstring from web.config just once.
    /// </summary>
    static DataObjectFactory()
    {
        string connectionStringName = ConfigurationManager.AppSettings.Get("ConnectionStringName");
        _connectionString = ConfigurationManager.ConnectionStrings[connectionStringName].ConnectionString;
    }

    /// <summary>
    /// Creates the Context using the current connectionstring.
    /// </summary>
    /// <remarks>
    /// Gof pattern: Factory method. 
    /// </remarks>
    /// <returns>Action Entities context.</returns>
    public static Database CreateContext()
    {
        return new Database(_connectionString);
    }
} 
```

这与 EFMVC CodePlex 应用程序中使用的模式相似，但我不使用 AutoFac。

对此的任何想法表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:16:58.227

我只是这样做：

```
kernel.Bind<IUnitOfWork>.To<EFUnitOfWork>().InRequestScope(); 
```

EFUnitOfWork.cs

```
public class EFUnitOfWork : DbContext, IUnitOfWork
{
    // your normal DbContext plus your IUnitOfWork members that delegate to EF context
} 
```

由于 EF 已经实现了一种形式的工作单元，因此您可以为它使用更通用的接口，并轻松地注入它。

此外，您可以为连接字符串实现 EF 构造函数，并将它们传递给基本构造函数。然后，您可以使用 Ninject`.WithConstructorArgument()`使用您的 AppSettings 代码配置连接字符串。

# javascript - 使用onClick时如何根据IF语句隐藏元素

> ID：10520739
> 
> 赞同：0
> 
> 时间：2012-05-09T17:03:47.853
> 
> 标签：javascript, image, if-statement, hide, show

`value=""`仅当（引号内没有任何内容）时，我才需要能够隐藏单击选择字段中的选项时出现的图像。如果选项中的 value="some_url" ，那么我希望显示图像。

单击选项时，我使用以下代码显示图像。但是当使用 onClick 时，即使选项 value="" 也会显示图像。

这是我正在使用的 Javascript：

```
function showImage() {
    document.getElementById('openimg').style.display = 'block'; 
```

这是html：

```
<select name="" >
   <option value="url" onclick="showImage();">Some_option_1</option>
   <option value="">Some_option_2</option>
   <option value="">Some_option_3</option>
 </select>

<a href='url_2'><img src='images/some_img.jpg' id='openimg' style='display:none'></a> 
```

我只在一个选项中插入了一个 onClick 命令，只是为了表明它有效。似乎我需要一个 if 语句来“显示 if”或“隐藏 if”以及每个选项中的 onClick 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:23:14.653

我会这样做：

```
<script type="text/javascript">
function showImage()
{
    var choice = document.getElementById('myDropDown').value;
    if(choice.length > 0)
    {
        document.getElementById('openimg').style.display = 'block';
    }
    else
    {
        document.getElementById('openimg').style.display = 'none';
    }
}
</script>

<select id="myDropDown" onchange="showImage()">
<option value="url">Some_option_1</option>
<option value="">Some_option_2</option>
<option value="">Some_option_3</option>
</select>
<a href='url_2'><img src='images/some_img.jpg' id='openimg' style='display:none'></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:23:54.503

嗯，您是在问如何使用 if 或如何确定选择了什么？

首先，在下拉列表中使用 onchange 事件。

这是用于说明目的的 LONGHAND 方式。

```
function onChange(){

    var mySelect = document.getElementById("my-select");
    var selectedValue = "";

    for( var i = 0; i < mySelect.length;i++){
       if( mySelect[i].selected)
         selectedValue = mySelect[i].value;        
    }

    if( selectedValue == "whatever")
    {
           //do something
    }

    if( selectedValue == "ugh")
          // do something else

} 
```

# iphone - 重新提交被拒绝的 iPhone 应用

> ID：10520743
> 
> 赞同：0
> 
> 时间：2012-05-09T17:04:01.613
> 
> 标签：iphone

我做了拒绝报告中指示的更改，并准备再次提交应用程序。难道我

1.  像第一次一样再次完成添加新应用程序并填写所有信息，或者
2.  只需单击“准备上传二进制文件”并从 Xcode 上传二进制文件 - 意思是除了上传固定的二进制文件之外，没有其他事情可做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:07:18.243

如果您对二进制文件进行了更改，则只需上传一个新的（选项 2）。如果他们只让您更改应用商店数据（描述/屏幕截图），那么您甚至可以跳过此步骤，只需要求他们在解决中心重新审核即可。

# javascript - 基于字符串、IE加载和解析xml

> ID：10520747
> 
> 赞同：0
> 
> 时间：2012-05-09T17:04:12.017
> 
> 标签：javascript, jquery, xml, internet-explorer, activex

我试图根据以下示例在 IE 中解析 xml 字符串：http: [//dean.edwards.name/weblog/2006/04/easy-xml/](http://dean.edwards.name/weblog/2006/04/easy-xml/)

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title></title>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

    $(function(){

        var xml = document.createElement("xml");
        xml.src = '<test><node1>Test</node1></test>';
        document.body.appendChild(xml);
        var xmlDocument = xml.XMLDocument;
        document.body.removeChild(xml);

    });

</script>
</head>
<body>

</body>
</html> 
```

[小提琴](http://jsfiddle.net/YwVMV/%20fiddle)

但是，它不起作用。我没有收到任何错误，但什么也没发生。

有什么方法可以根据有效的 xml 字符串在 IE 的客户端生成 XML 文件？activeX 是唯一的选择吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:59:39.480

我工作的一个变体不是创建一个 xml 对象，而是创建一个包装器 div：

```
<script type="text/javascript">
  $(function(){
    var div, xmlDocument;
    div = document.createElement('div');
    div.innerHTML = '<xml><test><node1>Test</node1></test></xml>';
    document.body.appendChild(div);

    xmlDocument = div.firstChild.XMLDocument;
    document.body.removeChild(div);
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:34:57.533

ActiveX 无疑是一种选择。代码将类似于：

```
var xml = '<test><node1>Test</node1></test>';
var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
xmlDoc.async = "false";
xmlDoc.loadXML(xml);

alert(xmlDoc.documentElement.nodeName); 
```

# bing-maps - 使用 Bing 地图检测鼠标右键双击

> ID：10520750
> 
> 赞同：1
> 
> 时间：2012-05-09T17:04:22.117
> 
> 标签：bing-maps

我在 Bing 地图 API v7 中没有看到会显示双击事件的事件。有没有办法做到这一点？假设我没有错过本机支持，我想我将不得不编写自己的带有计时器的双击处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:23:04.957

如果你只使用双击事件

```
Microsoft.Maps.Events.addHandler(this.map, 'dblclick', functionHandler) 
```

应该解决问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T12:53:45.963

点击事件也有问题。事实上，正常的点击事件也会在双击事件期间触发。这就是为什么我必须实现我自己的双击处理程序。我的方法可以翻译成右键单击，因为我只使用单击事件，鼠标右键也可用。

```
//Set up my Handler (of course every object can be the target)
Microsoft.Maps.Events.addHandler(map, 'click', Click);
//count variable, that counts the amount of clicks that belong together
myClick=0;

//A click fires this function
function click (e)
{
    //If it is the first click of a "series", than start the timeout after which the clicks are handled
    if (myClick == 0)
    {       
        //Target have to be buffered
        target= e;
        //accumulate the clicks for 200ms and react afterwards
        setTimeout("reaction(target)", 200);
    }
        //count the clicks
    myClick = myClick+1;
}

//At the end of timeout check how often a click has been performed and react
function reaction(e)
{
    if (myClick==1)
    {
        alert("Single Click!");
    }
    else (myClick==2)
    {
        alert("Double click!");
    }
        else (myClick==3)
        {
                alert("Tripple click");
        }
    //reset ClickCount to zero for the next clicks
    myClick = 0;
} 
```

此外，删除 Bing-Maps 的标准双击行为以放大可能会很有趣。这可以通过以下代码实现：

```
Microsoft.Maps.Events.addHandler(map, 'dblclick', function(e){
      e.handled = true;
}); 
```

# javascript - 一次渲染所有元素，而不是渲染框并等待图像加载

> ID：10520751
> 
> 赞同：1
> 
> 时间：2012-05-09T17:04:24.443
> 
> 标签：javascript, asp.net, dom, browser

我如何告诉浏览器首先获取所有图像然后显示一个准备好的页面，而不是允许浏览器呈现 img 元素并在其后加载图像？

我在服务器端使用 asp.net，但该解决方案可能与 DOM 和 javascript 有关。

我期待诸如“创建一个 div 并更改 z 索引”或“在隐藏元素中加载图像以更早开始加载图像”或“设置标题以告诉浏览器首先加载图像”之类的答案，所以这不是一个问题进行广泛的讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:25:35.163

解决方案肯定必须是客户端。我建议使用 jQuery。您可以将所有图像放在 a 中`<div>`并将其设置`<div>`为不可见（即`<div id="container" style="display:none">`）。然后您可以为该事件设置一个事件处理程序，该事件在页面加载后`.ready()`显示隐藏：`<div>`

```
.ready(function() {
  $('#container').show();
}); 
```

# c# - WMI 调用性能

> ID：10520754
> 
> 赞同：2
> 
> 时间：2012-05-09T17:04:29.627
> 
> 标签：c#, wmi

我需要在我的服务的构造函数中进行 WMI 调用。但是当我启动/重新启动系统时，此调用需要大量时间。

我正在使用以下代码来获取 Windows 服务的路径....这里我使用`EnumerationOptions`来提高查询性能，现在为了使用它我必须使用`ManagementScope`which is **"root\civm2"**，每个时间我必须使用“root'civm2”作为管理范围，

之前我`managementObjectCollection.Count`用来知道它是否包含任何项目，现在为了提高我正在使用的性能`managementObjectEnumerator.MoveNext`，它会有所帮助吗，我已经评论了与计数相关的代码。

有没有更好的方法来提高相同代码的性能...

```
EnumerationOptions options = new EnumerationOptions();
//   options.Rewindable = false; **// I HAVE TO COMMENT OUT THIS IN ORDER TO GET THE RESULTS....**
options.ReturnImmediately = true;

string query = string.Format("SELECT PathName FROM Win32_Service WHERE Name = '{0}'", "MyService");

ManagementScope ms12 = new ManagementScope(@"root\cimv2");
ms12.Connect();

using (var managementObjectSearcher = new ManagementObjectSearcher(query))
{
    managementObjectSearcher.Scope = ms12;
    managementObjectSearcher.Options = options;

    var managementObjectCollection = managementObjectSearcher.Get();

    //if (managementObjectCollection.Count > 0)
    //{
        var managementObjectEnumerator = managementObjectCollection.GetEnumerator();

        if (managementObjectEnumerator.MoveNext())
        {
            var invalidChars = new Regex(string.Format(CultureInfo.InvariantCulture, "[{0}]", Regex.Escape(new string(Path.GetInvalidPathChars()))));
            var path = invalidChars.Replace(managementObjectEnumerator.Current.GetPropertyValue("PathName").ToString(), string.Empty);
                Console.WriteLine(path);
        }
    //}
        else
        {
            Console.WriteLine("Else part...");
        }
} 
```

**我是否以正确的方式使用范围和 EnumerationOption ？** 请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:52:19.717

正如对另一个[问题](https://stackoverflow.com/questions/10502879/wmi-call-takes-too-much-time-when-system-starts-restarts)的回答建议您可以构建类的对象路径并直接使用 ManagementObject 来提高性能，现在如果您想检查 ManagementObject 是否返回实例，您可以使用私有属性`IsBound`。

```
string ServicePath = string.Format("Win32_Service.Name=\"{0}\"", "MyService");
var WMiObject = new ManagementObject(ServicePath);
PropertyInfo PInfo = typeof(ManagementObject).GetProperty("IsBound", BindingFlags.NonPublic | BindingFlags.Instance);
if ((bool)PInfo.GetValue(WMiObject, null))
{
    string PathName = (string)WMiObject.GetPropertyValue("PathName");
    var invalidChars = new Regex(string.Format(CultureInfo.InvariantCulture, "[{0}]", Regex.Escape(new string(Path.GetInvalidPathChars()))));
    var path = invalidChars.Replace(PathName, string.Empty);
    Console.WriteLine(path);
}
else
{
    Console.WriteLine("Else part...");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T19:23:35.187

似乎在 .NET 框架的更新版本中，绑定发生得越晚越好。至少当我测试特定共享文件夹的存在时，我就是这种情况。

这是 @RRUZ 解决方案的更新，它使用 try-catch 而不是反映 IsBound 内部属性。

```
var servicePath = string.Format("Win32_Service.Name=\"{0}\"", "MyService");
string pathName = null;
try
{
    var wmiObject = new ManagementObject(servicePath);
    pathName = (string)wmiObject.GetPropertyValue("PathName");
}
catch {}

if (pathName != null)
{
    var invalidChars = new Regex(string.Format(CultureInfo.InvariantCulture, "[{0}]", Regex.Escape(new string(Path.GetInvalidPathChars()))));
    var path = invalidChars.Replace(pathName, string.Empty);
    Console.WriteLine(path);
}
else
{
    Console.WriteLine("Else part...");
} 
```

# java - 在结果集中使用 getter

> ID：10520756
> 
> 赞同：0
> 
> 时间：2012-05-09T17:04:31.930
> 
> 标签：java, mysql, resultset

我正在尝试编写 java 代码来访问具有列“customer_id”、“email”、“deliverable”和“create_date”的表“customer”

我有

```
 Connection conn = DriverManager.getConnection(connectionUrl, connectionUser, connectionPassword);
        Statement constat = conn.createStatement();
        String query = "SELECT * FROM customer WHERE customer_id LIKE " + customerId;
        ResultSet rtn = constat.executeQuery(query);
        Customer cust = new Customer(rtn.getInt("customer_id"), rtn.getString("email"),  rtn.getInt("deliverable"), rtn.getString("create_date"));
        conn.close();
        return cust; 
```

我收到错误：

java.sql.SQLException：结果集开始之前

据我所知，我的错误在于我正在创建一个新的 Customer 对象，但我无法弄清楚我做错了什么。谁能给我一些帮助？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:07:21.700

`resultSet.next()`在访问该行的数据之前，您必须始终通过调用（并检查它是否返回 true）转到下一行：

```
Customer cust = null;
if (rtn.next()) {
    cust = new Customer(rtn.getInt("customer_id"), 
                        rtn.getString("email"), 
                        rtn.getInt("deliverable"), 
                        rtn.getString("create_date"));
} 
```

请注意，您还应该

*   使用准备好的语句而不是字符串连接来避免 SQL 注入攻击，并拥有更健壮的代码
*   在 finally 块中关闭连接、语句和结果集，或者如果使用 Java 7，则使用 try-with-resources 构造

阅读[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:10:15.650

您应该调用[`ResultSet.first()`](http://docs.oracle.com/javase/6/docs/api/index.html?java/sql/ResultSet.html)将结果移动到第一个位置。结果集是一种编程约定，不检索查询的整个结果并保存在内存中。因此，它的接口是相当低级的，您必须通过类似的方法显式选择行`first()`，`last()`或者`next()`（每个返回`true`以检查请求的行索引是否在集合中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:10:48.893

您需要添加

```
rtn.next(); 
```

在使用结果集之前。

通常这是这样做的

```
while (rtn.next()) {
  <do something with the row>
} 
```

# java - 在java中解析xml数据

> ID：10520757
> 
> 赞同：3
> 
> 时间：2012-05-09T17:04:35.847
> 
> 标签：java, xml

我有一个从 xml 获取数据的要求。

字符串资源；

数据将在字符串 res 中，如下所示。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<person>
  <id>QZhx_w1eEJ</id>
  <first-name>pratap</first-name>
  <last-name>murukutla</last-name>
</person> 
```

我必须从该数据中获取 id 以及名字和姓氏，并且必须存储在变量 id,first-name,last-name

如何访问 xml 以获取这些详细信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:19:16.483

您可以使用 JAXB (JSR-222) 并执行以下操作。Java SE 6 中包含了一个实现。

**演示**

```
package forum10520757;

import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.bind.annotation.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader xml = new StringReader("<person><id>QZhx_w1eEJ</id><first-name>pratap</first-name><last-name>murukutla</last-name></person>");
        Person person = (Person) unmarshaller.unmarshal(xml);

        System.out.println(person.id);
        System.out.println(person.firstName);
        System.out.println(person.lastName);
    }

    @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    static class Person {
        String id;

        @XmlElement(name="first-name")
        String firstName;

        @XmlElement(name="last-name")
        String lastName;
    }

} 
```

**输出**

```
QZhx_w1eEJ
pratap
murukutla 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:12:02.613

你可以从：

```
ByteArrayInputStream inputStream = 
    new ByteArrayInputStream(response.getBody().getBytes("UTF-8"));
DocumentBuilder builder = DocumentBuilderFactory.newInstance()
    .newDocumentBuilder();
Document doc = builder.parse(new InputSource(inputStream)); 
```

[您可以在http://www.java2s.com/Code/Java/XML/XMLDocumentinformationbyDOM.htm](http://www.java2s.com/Code/Java/XML/XMLDocumentinformationbyDOM.htm)中看到一个示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:06:39.040

使用 Java 中内置的 SAX 或 DOM 解析器。将字符串解析为 DOM 树，遍历树，获取您的值。

[http://java.sun.com/xml/tutorial_intro.html](http://java.sun.com/xml/tutorial_intro.html)

# drupal-6 - 将 Drupal 6 模块配置为仅出现在主页上

> ID：10520761
> 
> 赞同：0
> 
> 时间：2012-05-09T17:04:53.677
> 
> 标签：drupal-6, drupal-modules, configure

我正在构建一个 drupal 6 模块。

我想对其进行编码，使其仅在有人启用它时才显示在网站的主屏幕上。

我应该添加什么以及在哪里添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:15:16.390

[解决了]

基本上在 YOURMODULE.module 文件中添加以下条件

if(drupal_is_front_page())
{
//显示条件

}

# c++ - 当我从地图中删除条目时，`map::iterator` 会发生什么？

> ID：10520762
> 
> 赞同：3
> 
> 时间：2012-05-09T17:04:54.957
> 
> 标签：c++, map, iterator

> **可能重复：**
> [如何从 std::map 中过滤项目？](https://stackoverflow.com/questions/180516/how-to-filter-items-from-a-stdmap)
> [如果在从头到尾迭代时在地图元素上调用 erase() 会发生什么？](https://stackoverflow.com/questions/263945/what-happens-if-you-call-erase-on-a-map-element-while-iterating-from-begin-to)

我有对象图，我想遍历它并删除一些条目。

```
typedef std::map<A,B> MapT;
MapT m;
MapT::iterator it;

for(it = m.begin(); it != m.end(); it++ ) {
    if( condition ) m.erase(it);
} 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T17:08:19.353

如果`std::map`迭代器和对已擦除元素的引用无效 [23.1.2/8]。您的代码在迭代器失效*后*使用它，这会导致**Undefined Behavior**。为了避免这种未定义的行为，迭代器需要在它在调用中失效*之前递增。*`erase()`

你需要使用：

```
for(it = m.begin(); it != m.end(); ) {
    if( condition )
        m.erase(it++);
    else
        ++it;
} 
```

请注意，此处`it++`递增`it`，以便它引用下一个元素但产生其原始值的副本。因此，`it`不指`erase()`调用时删除的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:10:49.290

假设`MapT`为 a `std::map`，则迭代器在擦除时将失效。执行此操作的正确方法（`erase`在循环中）是缓存迭代器并在擦除之前递增：

```
MapT m;
MapT::iterator it;

for(it = m.begin(); it != m.end();)
{
    if(condition)
    {
       MapT::iterator tmp = it++;
       m.erase(tmp);
    }
    else
    {
       ++it;
    } 
} 
```

# silverlight - ContentControl 内的 Silverlight TextBlock TextTrimming 消失

> ID：10520763
> 
> 赞同：2
> 
> 时间：2012-05-09T17:04:59.243
> 
> 标签：silverlight, textblock, contentcontrol, texttrimming

我在网格上显示一系列消息（如电子邮件）：

```
<layout:TransitioningContentControl Name="tccCmdMessage" Margin="0,4">
    <layout:TransitioningContentControl.ContentTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                <TextBlock Name="tbCmdMessage" Text="{Binding Message}" TextTrimming="WordEllipsis" />
            </StackPanel>
        </DataTemplate>
    </layout:TransitioningContentControl.ContentTemplate>
</layout:TransitioningContentControl> 
```

但是，tbCmdMessage 永远不会显示。如果我删除 TextTrimming（或将其更改为 None），它会起作用。或者，如果我不使用 ContentControl 父级，它也可以工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:56:53.233

看看这个链接： [http](http://social.msdn.microsoft.com/Forums/eu/wpf/thread/30fd3279-7bc8-424f-9ee6-41b9f9589a1a) ://social.msdn.microsoft.com/Forums/eu/wpf/thread/30fd3279-7bc8-424f-9ee6-41b9f9589a1a 。

我想明确指定的`Width`（或`MaxWidth`）`StackPanel`可以使文本修剪。您也可以尝试使用其他类型的容器，例如`Grid`.

描述了具有类似问题的其他链接：

*   [Silverlight 文本修剪和换行问题](https://stackoverflow.com/questions/8242732/silverlight-text-trimming-and-wrapping-issue)
*   [文本修剪不起作用](https://stackoverflow.com/questions/10370455/texttrimming-not-working)
*   [http://forums.silverlight.net/t/58227.aspx/1](http://forums.silverlight.net/t/58227.aspx/1)

# facebook - 在 Facebook 上安装 iframe 页面选项卡时如何获取页面 ID？

> ID：10520766
> 
> 赞同：1
> 
> 时间：2012-05-09T17:05:08.760
> 
> 标签：facebook, facebook-graph-api, facebook-page

我想创建一个简单的 facebook 页面选项卡。在我想要的地方，如果用户将此应用程序安装到页面，则页面 ID 将存储在我的数据库中。然后我将为各个 fb 页面显示不同的内容。我阅读了一些文档，其中提到`signed_request`可用于获取页面 ID。但在页面加载到某些 fb 页面后收到签名请求。

由于任何人都可以安装我的应用程序，因此无法知道谁将安装下一个应用程序。但我计划在不同的页面（在 Facebook）标签中显示不同的页面（来自我的服务器）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:59:58.143

刚刚注意到它现在是一个名为 tabs_added 的数组。数组的键是页面 ID，对于添加的选项卡，值为 1（真）。这会给您一个想法，即其他页面 ID 键将位于数组中，值为 0（假），但它们不会被传递。

```
<?
// grab all keys in an array
$aKeys = array_keys($_REQUEST['tabs_added']);
// take the first key - this is one of the page ID's the tab was added to
$sFirstKey = array_shift($aKeys);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:47:06.977

由 dk1 提供，正是`$_REQUEST['fb_page_id']`让它发挥了作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:48:00.933

当有人将您的应用程序安装为页面选项卡时，Facebook 将调用您的应用程序 URL。是否有一些 $_REQUEST 日志记录以找出 Facebook 在这种情况下发送的参数。有一个值可以标识添加应用程序的页面。我已经这样做了，但这里没有示例代码 atm 向您展示。

# php - php if 语句等于这个然后显示这个

> ID：10520770
> 
> 赞同：0
> 
> 时间：2012-05-09T17:05:37.687
> 
> 标签：php, forms, if-statement

**这是我的问题...请参阅下面的详细信息：**

mysamplesite.com 上有一个表格，需要下拉选择一个产品，有 4 个产品。

一旦选择了产品并提交了表单，它就会将该产品表单值传递到下一页。在下一页上，我需要知道将显示从上一页中选择的产品的“ *if 语句”，因为 tehre 是 4 种产品。*

**这是用于捕获值的内容：**

```
<?php $id = $_GET['product1']; echo $id;?> 
```

我只需要知道要使用的“if 语句”，就可以在下一页显示不同的产品。将根据选择的产品显示产品。所以“如果是这个，那就显示这个”......

我搜索了stackoverflow并没有真正找到我正在寻找的示例。也许我在寻找错误的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:08:17.577

我想这会对你有所帮助。

```
if($id == "option1") {
    // do this
}
else if($id == "option2") {
    // do this
}
else if($id == "option3") {
    // do this
}
else{
    // do this
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:12:45.027

```
<?php 
    switch($_GET['product1']) {
       case 'option 1' :
           echo "option 1";
       break;
       case 'option 2' :
           echo "option 2";
       break;
       case 'option 3' :
           echo "option 3";
       break;
       case 'option 4' :
           echo "option 4";
       break;
       default:
           //no option selected ?
    }
?> 
```

# java - Spring MVC 中的自动装配 ViewResolver

> ID：10520771
> 
> 赞同：1
> 
> 时间：2012-05-09T17:05:39.490
> 
> 标签：java, spring, spring-mvc, autowired

由于某种原因，我无法自动装配`ViewResolver`：

```
@Component
public class JsonMultipleViewFactory
{
    @Autowired
    private ViewResolver viewResolver;

    // ...
} 
```

viewResolver 是`null`.

该类`JsonMultipleViewFactory`在弹簧控制器中自动装配：

```
@Controller
public class HomeController
{
    @Autowired
    private JsonMultipleViewFactory jsonMultipleViewFactory;

    // ...
} 
```

我创建了一个[github 存储库](https://github.com/MintTwist/ViewResolver-test)，其中包含一个重现问题的非常小的示例。

谁能帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:13:01.020

我回答了[你之前的问题](https://stackoverflow.com/questions/9705293/render-multiple-views-within-a-single-request)，没有答案：

> 在您的示例中，`JsonMultipleViewFactory`通过父上下文 ( `applicationContext.xml`) 的组件扫描发现。 `InternalResourceViewResolver`在子上下文 ( `test-servlet.xml`) 中定义。因此，父上下文看不到子上下文中定义的 bean 是正常的。这就是您获得 `NoSuchBeanDefinitionException`. 尝试将所有这些 bean 放在同一个上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:16:29.553

看起来您没有将视图解析器注册为 spring bean，您需要添加到应用程序上下文中，例如：

```
<bean class="package.full.name.ViewResolver" /> 
```

# r - 在 R 中，如何在将对象发送到函数后获取对象的名称？

> ID：10520772
> 
> 赞同：159
> 
> 时间：2012-05-09T17:05:40.323
> 
> 标签：r

我正在寻找`get()`.

给定一个对象名称，我希望直接从对象中提取代表该对象的字符串。

`foo`作为我正在寻找的函数的占位符的简单示例。

```
z <- data.frame(x=1:10, y=1:10)

test <- function(a){
  mean.x <- mean(a$x)
  print(foo(a))
  return(mean.x)}

test(z) 
```

将打印：

```
 "z" 
```

我的解决方法是：

```
test <- function(a="z"){
  mean.x <- mean(get(a)$x)
  print(a)
  return(mean.x)}

test("z") 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-05-09T17:09:19.160

旧的 deparse-substitute 技巧：

```
a<-data.frame(x=1:10,y=1:10)
test<-function(z){
   mean.x<-mean(z$x)
   nm <-deparse(substitute(z))
   print(nm)
   return(mean.x)}

 test(a)
#[1] "a"   ... this is the side-effect of the print() call
#          ... you could have done something useful with that character value
#[1] 5.5   ... this is the result of the function call 
```

编辑：用新的测试对象运行它

注意：当一组列表项从第一个参数传递给时，这在本地函数内不会成功`lapply`（并且当对象从给定的列表传递给`for`-loop 时，它也会失败。）您将能够提取“.Names”-属性和结构结果的处理顺序，如果它是正在处理的命名向量。

```
> lapply( list(a=4,b=5), function(x) {nm <- deparse(substitute(x)); strsplit(nm, '\\[')} )
$a      # This "a" and the next one in the print output are put in after processing
$a[[1]]
[1] "X"    ""     "1L]]"  # Notice that there was no "a"

$b
$b[[1]]
[1] "X"    ""     "2L]]"

> lapply( c(a=4,b=5), function(x) {nm <- deparse(substitute(x)); strsplit(nm, '\\[')} )
$a
$a[[1]]   # but it's theoretically possible to extract when its an atomic vector
[1] "structure(c(4, 5), .Names = c(\"a\", \"b\"))" ""                                            
[3] "1L]]"                                        

$b
$b[[1]]
[1] "structure(c(4, 5), .Names = c(\"a\", \"b\"))" ""                                            
[3] "2L]]" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-01-30T07:57:03.457

```
deparse(quote(var)) 
```

我的直观理解其中引号冻结了评估中的 var 或表达式，而与 parse 函数相反的 deparse 函数使冻结的符号回到 String

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-02T20:24:02.540

请注意，对于打印方法，行为可能会有所不同。

```
print.foo=function(x){ print(deparse(substitute(x))) }
test = list(a=1, b=2)
class(test)="foo"
#this shows "test" as expected
print(test)

#this (just typing 'test' on the R command line)
test
#shows
#"structure(list(a = 1, b = 2), .Names = c(\"a\", \"b\"), class = \"foo\")" 
```

我在论坛上看到的其他评论表明，最后一种行为是不可避免的。如果您正在为包编写打印方法，这将是不幸的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-18T23:19:48.423

详细说明 Eli Holmes 的回答：

1.  `myfunc`效果很好
2.  我很想在另一个函数中调用它（如他在 20 年 8 月 15 日的评论中所讨论的）
3.  失败
4.  **在**一个函数中，直接编码（而不是从外部函数调用），这个`deparse(substitute()`技巧很有效。
5.  这一切都隐含在他的回答中，但为了便于窥视我的健忘程度，我想把它拼出来。

```
an_object <- mtcars
myfunc <- function(x) deparse(substitute(x))

myfunc(an_object)
#> [1] "an_object"

# called within another function 
wrapper <- function(x){
  myfunc(x)
}

wrapper(an_object)
#> [1] "x" 
```

# java - Java - 客户端可以同时充当服务器还是反之亦然？

> ID：10520774
> 
> 赞同：4
> 
> 时间：2012-05-09T17:05:53.753
> 
> 标签：java, tcp, client-server

好吧，我正在做一个需要编写 TCP/IP 客户端-服务器程序的项目。就其本身而言，这很简单，但我被要求做一些我以前从未做过的事情。

我想知道，我可以编写一个 Java 客户端应用程序，将命令发送到服务器并从服务器获取响应。此外，服务器能够向客户端发送相同的命令并接收类似的响应。

简单来说，我被要求编写一个应用程序，其中一个客户端同时也是一个服务器（不是它自己的，而是它连接到的服务器），反之亦然。

> 例如，如果客户端向服务器请求摄像头 01 的视频源，则服务器会发回确认。之后，如果服务器需要，它可以向客户端发送查看摄像机 02 的视频的请求，客户端也会相应地回复。

**这可以吗？！？**如果是的话，请一些建议会很好，因为我不知道如何处理它，我猜可能是多线程。如果是，如何？！？一些帮助会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:10:04.370

您可以在双方开发多线程应用程序。在服务器上有两个线程，一个用于接收数据包，另一个用于发送数据包。在客户端你可以做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:15:51.370

是的，你可以这样做。事实上，[对等](http://en.wikipedia.org/wiki/Peer-to-peer)应用程序正是这样做的。您有一个对等点，而不是客户端或服务器，它同时是客户端和服务器。您当然必须使用多线程才能使其正常工作。

# c# - 循环12个月

> ID：10520778
> 
> 赞同：1
> 
> 时间：2012-05-09T17:06:12.960
> 
> 标签：c#, asp.net, sql, tsql

我需要用数据填充条形图。我已经准备好了一切。我有用于收集数据的 sql 查询。

我正在寻找的是提供当月和过去 11 个月（总共 12 个月）数据的最佳方式。

这段代码将为我提供当月到今天的信息。我该如何修改它，这样它也会给我前 11 个月的信息？

是否会对查询进行此修改，或者我们是否会循环查询 12 次？

```
protected void FillChart ()
{
    DateTime now = DateTime.Now;
    DateTime startDate = now.AddDays( 1 - now.Day );
    DateTime endDate = now;
    string query;

    query = "SELECT SUM(case when r.Type in ('Programming-Billable', 'Consulting-Billable') then r.Minutes_Spent";
    query += " end) AS 'Custom Programming and Consulting',";
    query += " SUM(case when r.Type in ('Data Maintenance', 'Tech Support-Billable', 'Training') then r.Minutes_Spent";
    query += " end) AS 'Tech. Support / Data Maint. / Training'";
    query += " FROM TK_Project p ";
    query += " INNER JOIN TK_Task t";
    query += " ON p.Project_ID = t.Project_ID ";
    query += " JOIN TK_Time_Record r";
    query += " ON t.ID = r.Task_ID";
    query += " WHERE p.Company = " + Session[ "Distid" ];
    query += " AND p.Name ='Technical Support' ";
    query += " AND r.Work_Date BETWEEN  '" + startDate + "'  AND  '" + endDate + "' ";
    query += " AND r.Type NOT LIKE '%non%'";

    DataTable data = GeneralFunctions.GetData( query );
} 
```

该查询当前返回以下结果：

```
Custom Programming and Consulting   Tech. Support / Data Maint. / Training
           90                                           105 
```

编辑：

```
SELECT SUM(case when r.Type in ('Programming-Billable', 'Consulting-Billable') then r.Minutes_Spent
           end) AS 'Custom Programming and Consulting',
       SUM(case when r.Type in ('Data Maintenance', 'Tech Support-Billable', 'Training') then r.Minutes_Spent
           end) AS 'Tech. Support / Data Maint. / Training'
FROM TK_Project p 
INNER JOIN TK_Task t
     ON p.Project_ID = t.Project_ID 
JOIN TK_Time_Record r
     ON t.ID = r.Task_ID
WHERE p.Company = 162 AND p.Name ='Technical Support' 
AND r.Work_Date BETWEEN  '04/01/2001'  AND  '04/30/2012' 
AND r.Type NOT LIKE '%non%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:09:24.217

您只需要更改开始和结束日期：

```
DateTime startDate = now.AddYears( -1 );
DateTime endDate = now; 
```

顺便说一句，对两个日期时间都使用参数可能会更好。因此，您应该将它们传递给该`GetData`方法并从中创建 SqlParameters。

**编辑**：如果你想得到每个月的总和，你需要按月分组。

```
GROUP BY DATEADD(month, DATEDIFF(month, 0, Work_Date),0) 
```

无论如何，如果您想获取所有记录，则可以省略 enddate：

```
SELECT SUM(case when r.Type in ('Programming-Billable', 'Consulting-Billable') then r.Minutes_Spent
           end) AS 'Custom Programming and Consulting'
     , SUM(case when r.Type in ('Data Maintenance', 'Tech Support-Billable', 'Training') then r.Minutes_Spent
           end) AS 'Tech. Support / Data Maint. / Training'
     , DATEADD(month, DATEDIFF(month, 0, Work_Date),0) AS Month
FROM TK_Project p 
INNER JOIN TK_Task t
     ON p.Project_ID = t.Project_ID 
JOIN TK_Time_Record r
     ON t.ID = r.Task_ID
WHERE p.Company = 162 AND p.Name ='Technical Support' 
AND r.Work_Date BETWEEN  @startDate  AND  GetDate()
AND r.Type NOT LIKE '%non%'
GROUP BY DATEADD(month, DATEDIFF(month, 0, Work_Date),0)
Order By Month 
```

请注意，我已将 @startDate 添加为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:23:20.450

如果我正确理解要求，您将按 Work_Date 月份分组

```
Group by datepart(month, r.Work_Date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:07:58.977

也许我不理解这个问题，但听起来你需要将开始日期和结束日期作为`FillChart()`.

# grails - 无法在空对象上调用方法列表

> ID：10520780
> 
> 赞同：2
> 
> 时间：2012-05-09T17:06:17.750
> 
> 标签：grails

我正在尝试在此处遵循 ajax 驱动的选择教程：http: [//grails.org/AJAX-Driven+SELECTs+in+GSP](http://grails.org/AJAX-Driven+SELECTs+in+GSP)但是，我收到以下错误：

```
URI
    /ajaxSelects/
Class
    java.lang.NullPointerException
Message
    Cannot invoke method list() on null object 
```

我完全按照教程进行。问题似乎来自以下代码，其中 grails 不喜欢 Country.list()：

```
<g:select
        optionKey="id" optionValue="name" 
        name="country.nameid="country.name" from="${Country.list()}"
        onchange="${remoteFunction(
        controller:'country',
        action:'ajaxGetCities',
        params:'\'id=\' + escape(this.value)',
        onComplete:'updateCity(e)')}"
></g:select> 
```

关于为什么此代码不起作用的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T00:34:19.613

您要么需要进行页面导入：

```
 <%@ page import="com.yourpackage.Country" %> 
```

或使用列表的完整路径

```
 from="${com.yourpackage.Country.list()}" 
```

你在这里也打错了

```
 name="country.nameid="country.name" 
```

应该

```
 name="country.name" id="country.name" 
```

# php - 有没有办法使用 php 检查具有不同名称的重复图像？

> ID：10520781
> 
> 赞同：10
> 
> 时间：2012-05-09T17:06:21.350
> 
> 标签：php

有没有办法使用 php 检查具有不同名称的重复图像？我想删除所有重复项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T17:08:41.870

是的，您可以遍历所有文件并使用 hash_file 函数来比较它们： [http ://php.net/manual/en/function.hash-file.php](http://php.net/manual/en/function.hash-file.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:09:04.200

我想一个有点简单的解决方案是使用`md5()`.

打开一个目录，遍历生成 md5s 的文件，比较 md5s，删除重复项。

编辑：这是一个使用的脚本`hash_file()`

```
<?php

$dir = "/full/path/to/images";
$checksums = array();

if ($h = opendir($dir)) {
    while (($file = readdir($h)) !== false) {

        // skip directories
        if(is_dir($_="{$dir}/{$file}")) continue;

        $hash = hash_file('md5', $_);

        // delete duplicate
        if (in_array($hash, $checksums)) {
            unlink($_);
        }
        // add hash to list
        else {
            $checksums[] = $hash;
        }
    }
    closedir($h);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-22T09:57:10.023

您可以通过文件的[sha1_file](http://php.net/manual/en/function.sha1-file.php)哈希进行比较和检查

它返回 40 个字符的十六进制数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-03T09:36:49.433

我花了很多时间寻找 php 中的最佳解决方案，但失败了，请阅读我的 5 个通往天堂的步骤（或者只是获得第 5 步）。

1.  hash_file 不能按预期工作，例如在一个包含 11000 张不同名称的图片的文件夹中，我知道只有 800 个唯一的，hash_file() 仅找到 30 个匹配项。

2.  我无法在 Windows + Openserver 上安装像[http://libpuzzle.pureftpd.org/project/libpuzzle/php](http://libpuzzle.pureftpd.org/project/libpuzzle/php)这样的第三方库。

3.  尝试按主色或逐像素进行比较`ImageColorAt()`，创建“图像的数字印章”。它工作得非常慢，很多编码，最后非常糟糕 - 改变大小或合并/旋转图像是难以捉摸的。

4.  检查了 Github 以找到 readytogo 解决方案，但没有任何关于 PHP 的解决方案（为什么？这让我感到惊讶）。

5.  最后，我找到了共享软件桌面程序[http://www.mindgems.com/products/VS-Duplicate-Image-Finder/VSDIF-Tutorials.htm?postinstall=1](http://www.mindgems.com/products/VS-Duplicate-Image-Finder/VSDIF-Tutorials.htm?postinstall=1)它工作得非常好（快！它在多线程和负载中工作CPU 到 100%、8gb 和 11000 张图像仅在约 30 秒内进行比较），并具有所有必要的功能、异常和过滤。在这 11000 张图像目录中，该程序创建了所有视觉上相似的图像，向我展示了组和实例，允许使用自动过滤器等选择移动。主要缺点是金钱，但有种子 ;)

# mysql - 外键不起作用：错误代码 1005，SQL 状态 HY000：无法创建表

> ID：10520782
> 
> 赞同：0
> 
> 时间：2012-05-09T17:06:25.093
> 
> 标签：mysql, sql, foreign-keys, foreign-key-relationship

我已经创建了两个表，并且在事后添加了外键约束。

这两个表定义如下：

```
CREATE TABLE `user` (
  `user_id` int(11) NOT NULL auto_increment,
  `user_ad_id` varchar(500) default NULL,
  `user_name` varchar(100) NOT NULL,
  `login_id` varchar(100) default NULL,
  `email` varchar(256) NOT NULL,
  `personal_config` int(10) NOT NULL,
  PRIMARY KEY  (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

和

```
CREATE TABLE IF NOT EXISTS personal_config (
    config_id INT(10) NOT NULL AUTO_INCREMENT,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    configuration TEXT(25600) NOT NULL,
    PRIMARY KEY (config_id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE personal_config ADD CONSTRAINT personal_config_fk_user FOREIGN KEY 
(config_id) REFERENCES user(personal_config); 
```

而且我不断收到相同的错误，但无法弄清楚。我已经搜索了所有与此相关的线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:09:27.653

您的 FK`config_id`不能是自动增量字段，这没有多大意义，对吧？该字段反映了外部表中的一个值，不能在本地表中任意设置。

我认为这就是你想要的：

```
ALTER TABLE user ADD CONSTRAINT personal_config_fk_user FOREIGN KEY (personal_config) REFERENCES personal_config(config_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:11:02.577

你的`ALTER TABLE`说法是落后的。由于`personal_config.config_id`是一个 auto_increment 主键，外键应该在`users`表中定义`personal_config`，而不是在`personal_config`表`users`中。

```
ALTER TABLE users ADD CONSTRAINT user_fk_personal_config 
   FOREIGN KEY (personal_config)
   REFERENCES personal_config(config_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:20:30.350

如果您将用户表字段personal_config设置为主键，则可以执行

```
CREATE TABLE IF NOT EXISTS personal_config (
    config_id INT(10) NOT NULL AUTO_INCREMENT,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    configuration TEXT(25600) NOT NULL,
    PRIMARY KEY (config_id), FOREIGN KEY 
(config_id) REFERENCES user(personal_config)
)ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# python - Python WX - 从 wx 对话框返回用户输入

> ID：10520788
> 
> 赞同：7
> 
> 时间：2012-05-09T17:06:56.437
> 
> 标签：python, wxpython, wxwidgets, boa-constructor

我是 Python 和 WX 的新手。我创建了一个简单的测试对话框，如下所示，它使用组合框提示用户。我想从我的主程序中的组合框中捕获值。如何从我的主程序中调用它？

这就是我打算如何调用它以显示对话框但当前不从组合框中捕获值：

```
 import highlight
    highlight.create(self).Show(True)
    a = highlight.OnComboBox1Combobox(self)
    print a 
```

对话框文件的名称是“highlight”。下面是代码：

```
#Boa:Dialog:Dialog2

import wx

def create(parent):
    return Dialog2(parent)

[wxID_DIALOG2, wxID_DIALOG2COMBOBOX1, wxID_DIALOG2STATICTEXT1, 
] = [wx.NewId() for _init_ctrls in range(3)]

class Dialog2(wx.Dialog):
    def _init_ctrls(self, prnt):
        # generated method, don't edit
        wx.Dialog.__init__(self, id=wxID_DIALOG2, name='', parent=prnt,
              pos=wx.Point(264, 140), size=wx.Size(400, 485),
              style=wx.DEFAULT_DIALOG_STYLE, title='Dialog2')
        self.SetClientSize(wx.Size(384, 447))

        self.comboBox1 = wx.ComboBox(choices=['test1', 'test2'],
              id=wxID_DIALOG2COMBOBOX1, name='comboBox1', parent=self,
              pos=wx.Point(120, 16), size=wx.Size(130, 21), style=0,
              value=u'wining\n')
        self.comboBox1.SetToolTipString(u'comboBox1')
        self.comboBox1.SetLabel(u'wining\n')
        self.comboBox1.Bind(wx.EVT_COMBOBOX, self.OnComboBox1Combobox,
              id=wxID_DIALOG2COMBOBOX1)

        self.staticText1 = wx.StaticText(id=wxID_DIALOG2STATICTEXT1,
              label=u'test', name='staticText1', parent=self, pos=wx.Point(88,
              16), size=wx.Size(19, 13), style=0)

    def __init__(self, parent):
        self._init_ctrls(parent)

        ##print get_selection
        ##print get_selection1

    def OnComboBox1Combobox(self, event):
        get_selection = self.comboBox1.GetValue()
        return get_selection 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T18:35:43.160

那里有很多对话框示例。这里有一对：

*   [wxPython 的对话框](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)（第 1 部分，共 2 部分）
*   [http://zetcode.com/wxpython/dialogs/](http://zetcode.com/wxpython/dialogs/)

基本上，您需要做的就是实例化对话框，显示它，然后在关闭它之前提取值。典型的做法是这样的：

```
myDlg = MyDialog()
res = myDlg.ShowModal()
if res == wx.ID_OK:
    value = myDlg.myCombobox.GetValue()
myDlg.Destroy() 
```

**更新：**这是一个更成熟的例子：

```
import wx

########################################################################
class MyDialog(wx.Dialog):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Dialog.__init__(self, None, title="Dialog")

        self.comboBox1 = wx.ComboBox(self, 
                                     choices=['test1', 'test2'],
                                     value="")
        okBtn = wx.Button(self, wx.ID_OK)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.comboBox1, 0, wx.ALL|wx.CENTER, 5)
        sizer.Add(okBtn, 0, wx.ALL|wx.CENTER, 5)
        self.SetSizer(sizer)

########################################################################
class MainProgram(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Main Program")
        panel = wx.Panel(self)

        btn = wx.Button(panel, label="Open dialog")
        btn.Bind(wx.EVT_BUTTON, self.onDialog)

        self.Show()

    #----------------------------------------------------------------------
    def onDialog(self, event):
        """"""
        dlg = MyDialog()
        res = dlg.ShowModal()
        if res == wx.ID_OK:
            print dlg.comboBox1.GetValue()
        dlg.Destroy()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainProgram()
    app.MainLoop() 
```

# android - 在谷歌地图中获取网格视图

> ID：10520791
> 
> 赞同：1
> 
> 时间：2012-05-09T17:07:11.260
> 
> 标签：android, view, grid, maps

在这里，我编写了一些应用程序，它显示了我的位置。

在模拟器中我得到这个：

[![模拟器](../Images/a3eb09f657bb76cb93e6c3bcf4323395.png)](https://i.stack.imgur.com/o9HvU.jpg)

但在设备中我看到了这个：

[![设备](../Images/e3d78f47ed1bed99b1bac14bdf83dd5d.png)](https://i.stack.imgur.com/3dxGs.png)

我通过wifi连接，因此互联网没有问题，它应该打开了地图。

是什么原因？我该如何解决这个问题？

谢谢。

# 添加

我刚刚用 keytool 重新生成了我的 API 密钥。拿到了和以前一样的钥匙。

手机里的景色还是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:12:15.273

尝试在设备上打开默认的谷歌地图应用程序，看看是否可以加载地图。如果不能，则连接存在一些问题。如果它正在打开默认应用程序，那么问题可能是谷歌地图的[API](https://developers.google.com/maps/documentation/android/mapkey?hl=sv-SE)密钥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:12:58.183

它的 Google 地图 API 密钥问题，您必须使用您用于导出 apk 的密钥库重新生成 API 密钥。

[以下是为最终版本生成 Maps API 密钥的方法。](https://developers.google.com/maps/documentation/android/mapkey)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-09T17:12:54.120

添加到清单：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# asp-classic - 无限经典 Asp do while 循环

> ID：10520794
> 
> 赞同：0
> 
> 时间：2012-05-09T17:07:19.607
> 
> 标签：asp-classic

我在几个页面上运行了相同类型的循环，但是我说我会在 1 天内完成的循环只是...忽略 out.movenext 并仅打印可能的 10 个结果中的第一个结果，直到它崩溃. SQL 没问题。我用示踪剂得到了它。

更改：我最初在循环之前最后有 movenext - 但将其移动了一行以进行跟踪。尝试 (out = out.movenext , out = out.next) 看看它是否会做任何事情。我尝试输入一个整数，让它在 20 次循环后停止，这样我就可以更快地调试它。int 更改，数据打印，但 out 不前进。

```
strSQL = "SELECT [RecordID],[SubmitDate],[DataEntered] FROM [ManagerFileReview] where submitdate = '" & timetap & "'"
out = cnt.execute(strSQL)
out.movefirst
response.write "<table>"
Do while not out.eof 
    response.write "<tr><td>"
    response.write "<table><thead></thead>"
    response.write "<tr><td>Submit Date:</td><td>" & out(1) & "</td></tr>"
    response.write "<tr><td>Data Entered:</td><td>" & out(2) & "rrrrrrrrrrr</td></tr>"
    out.movenext
    response.write "passed movenext</table></td></tr>"
loop
response.write "</table>" 
```

**编辑：在 cnt.execute 之前忘记了“SET”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:34:02.180

逻辑看起来不错，除非我遗漏了什么。尽管 out 没有被列为 MS 的保留字，但我确实想知道这是否是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:13:54.387

找到了。在 out = cnt.execute(strSQL) 之前没有**SET**

本来应该

```
set out = cnt.execute(strSQL) 
```

# sql-server - 数据库连接适用于 Cassini，但适用于 IIS

> ID：10520797
> 
> 赞同：1
> 
> 时间：2012-05-09T17:07:30.480
> 
> 标签：sql-server, security, iis

我正在连接到远程数据库。该连接适用于 ASP.NET 开发服务器，但由于我切换到使用 IIS 而失败。这是我的连接字符串：

```
<add name="ConnectionString"
    connectionString="Server=SQL-NWSS-048\SHRDDEV01;Database=PESTS;Trusted_Connection=True;" 
    providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:12:35.330

在 Cassini 中，网站在您的帐户下运行。由于您的帐户有权访问数据库，因此它可以工作，因为您使用 Windows 集成安全性来访问 SQL Server。（可信连接=真）。

在 IIS 中，除非您对其进行不同的配置，否则它会在**<Server Name>\Network Service**帐户下运行，该帐户是该服务器上的本地帐户。奇怪的是该帐户无权访问数据库。

请参阅[如何：使用 Windows 集成安全性访问 SQL Server](http://msdn.microsoft.com/en-us/library/bsz5788z.aspx)

与使用 SQL Server 身份验证相比，这相对困难。我建议使用 SQL Server 身份验证，如果您的情况允许，您可以在其中传递用户名/密码。请务必[加密 web.config 中的连接字符串](http://msdn.microsoft.com/en-us/library/89211k9b%28VS.80%29.aspx)。

# php - mysql上的php密码更新

> ID：10520804
> 
> 赞同：1
> 
> 时间：2012-05-09T17:07:59.863
> 
> 标签：php, mysql

我正在尝试让用户更改他们的密码。

我不断收到用户名和密码不在文件中，我怀疑脚本无法正确读取密码，可能是因为 md5 加密。我的 SQL 查询是否有任何错误？

```
$query = "SELECT * FROM users WHERE name='$e' AND pass='".md5($p)."'";   
    $result = mysql_query($query) or die ("Error in query: $query. ".mysql_error());
    $num = mysql_num_rows($result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:12:36.813

[您应该考虑使用PHP Data Objects (PDO)](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)，而不是使用连接来构建查询。

它不仅可以修复您的错误，还可以修复您当前的[Sql Injection](http://en.wikipedia.org/wiki/SQL_injection)漏洞。

# jsf - 带有编辑和选择选项的数据表上的错误类型错误属性不可读

> ID：10520808
> 
> 赞同：2
> 
> 时间：2012-05-09T17:08:10.977
> 
> 标签：jsf, primefaces

我试图实现一个具有编辑和选择功能的数据表。这是我的 XHTML 部分

```
 <p:dataTable var="selectedRow" value="#{editBean.subStudyPlanList}" id="display" editable="true"
            selectionMode="single" selection="#{editBean.selectedSubStudyPlan}" 
            paginator="true" rows="10" > 
```

我得到的错误是这个。

```
selection="#{editBean.selectedSubStudyPlan}": Property 'selectedSubStudyPlan' not readable on typecom.buddhiedge.server.entity.StudyplanCategory 
```

我正在使用下面的方法来做同样的事情。

实现`SelectableDataModel`接口并扩展一个`DataModel`like`ListDataModel`来填充`dataTable`.

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T19:05:30.803

> selection="#{editBean.selectedSubStudyPlan}"：com.buddhiedge.server.entity.StudyplanCategory 类型上的属性“selectedSubStudyPlan”不可读

此异常意味着该`#{editBean.selectedSubStudyPlan}`属性没有公共 getter 方法。换句话说，类`getSelectedSubStudyPlan()`上没有公共方法`StudyplanCategory`。

写入/自动生成一个，这个问题应该会消失。

# php - PHP 更新 MySQL 数据库表

> ID：10520810
> 
> 赞同：1
> 
> 时间：2012-05-09T17:08:15.433
> 
> 标签：php, mysql, sql, sql-update

首先，我只是想说我是这种编码的新手，尽管我希望我最终能在一些指导下理解这一切。

我有一个 MySQL 数据库表（促销），其中存储了各种产品的一堆兑换代码（用于赠品比赛）。这个想法是，第一个输入兑换码的人将赢得产品，他们的信息应该存储在“促销”表中。

该表的列是：redeem_id（自动增量字段）、redeem_code、redemer_email、redeer_first_name、redeeder_last_name 和redeem_date_time。

最初，redeem_id 和redeem_code 字段是唯一包含任何数据的字段。我希望发生的是，当用户输入他们的信息（姓名、电子邮件等）并提交兑换代码时，他们的信息将填充该特定代码的其余行。如果其他人尝试提交已兑换的代码，他们应该会收到一条错误消息 - 对于无效代码（即表中不存在的代码）也是如此。

我到目前为止的 PHP 代码是：

```
<?php
function get_promotion_by_redeem_code($redeem_code)
{
$sql = "SELECT * FROM promotion WHERE redeem_code= '".mysql_real_escape_string($redeem_code)."'";
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);

return $row;
}

function redeem_promotion($email,$first_name,$last_name,$redeem_date_time,$redeem_code)
{
    $query = 'UPDATE promotion
    SET redeemer_email=".mysql_real_escape_string($email).", redeemer_first_name=".mysql_real_escape_string($first_name).", redeemer_last_name=".mysql_real_escape_string($last_name).", redeem_date_time=NOW(), WHERE redeem_code=".mysql_real_escape_string($redeem_code)."';
    $insert = mysql_query($query);
    return $insert;
}

$email=$_POST['e_mail'];
$first_name=$_POST['f_name'];
$last_name=$_POST['l_name'];
$redeem_code=$_POST['v_code'];

$connection = mysql_connect('localhost', 'db', 'pw');
mysql_select_db('db', $connection);

$promotion = get_promotion_by_redeem_code($redeem_code);

if ($promotion) {
    if (!$promotion['redeemer_email']) {
        redeem_promotion($email,$first_name,$last_name,$redeem_date_time,$redeem_code);
        echo 'Congratulations, you have successfully claimed this item!';
    } else {
        echo 'Sorry, this item has already been redeemed.';
    }
} else {
    echo 'Sorry, you have entered an incorrect claim code. Please use your browser\'s back button to try again.';
}

mysql_close($connection);  
?> 
```

当我输入无效的索赔代码或之前已填充代码行时，它会按预期工作。当它不起作用时，就是有人第一次去兑换物品。本质上，它将显示“恭喜”消息，但是表格不会针对提交的信息进行更新。因此，无论输入多少次正确的代码，用户都会收到“恭喜”消息。

我相当肯定错误出在redeem_promotion() 函数中，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:11:33.223

您在子句之前添加了一个**额外的逗号（，） 。**`WHERE`那是错误，我想。

```
function redeem_promotion($email,$first_name,$last_name,$redeem_date_time,$redeem_code)
{
    $query = 'UPDATE promotion
    SET redeemer_email=".mysql_real_escape_string($email).", 
        redeemer_first_name=".mysql_real_escape_string($first_name).", 
        redeemer_last_name=".mysql_real_escape_string($last_name).", 
        redeem_date_time=NOW() 
    WHERE redeem_code=".mysql_real_escape_string($redeem_code)."';

    **OR**

    $query = "UPDATE promotion
    SET redeemer_email='".mysql_real_escape_string($email)."', 
        redeemer_first_name='".mysql_real_escape_string($first_name)."', 
        redeemer_last_name='".mysql_real_escape_string($last_name)."', 
        redeem_date_time=NOW() 
    WHERE redeem_code='".mysql_real_escape_string($redeem_code)."'";

    $insert = mysql_query($query);
    return $insert;
} 
```

# javascript - 栏固定在顶部，但仅当滚动试图隐藏它时

> ID：10520814
> 
> 赞同：2
> 
> 时间：2012-05-09T17:08:25.700
> 
> 标签：javascript, css

我在网络的最高区域有[一个菜单](https://i.stack.imgur.com/Wp9MD.png)，但不是在顶部。我希望当用户滚动页面时它保持在顶部，但只有当它消失时才会消失。如果标题是可见的，我想要它下面的菜单，在一个明显的静态位置。

没有javascript，只有css有可能吗？我在一个网站上看到它，但我不记得在哪里。

提前谢谢你（对不起我丑陋的英语！）；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:42:21.497

我认为这就是你要找的东西：[https ://jsfiddle.net/QuVkV/2/](https://jsfiddle.net/QuVkV/2/)

这里的html结构：

```
<div id='wrapper'>
    <div id='upper'>This is upper content</div>
    <div id='position-saver'>
        <div id='bar'>This is the menu bar</div>
    </div>
    <div id='lower'>This is some content lower than the menu bar</div>
</div> 
```

这是CSS：

```
#wrapper {
    width: 100%;
    height: 2000px;
}

#upper {
    width: 100%;
    height: 100px;
}

#position-saver {
    height: 50px;
    width: 100%;
}

#bar {    
    position: static;
    height : 50px;
    width: 100%;
} 
```

这是javascript：

```
$(document).on('scroll', function(){
    if ($('#bar')[0].offsetTop < $(document).scrollTop()){
        $("#bar").css({position: "fixed", top:0});            
    }
    if ($(document).scrollTop() < $("#position-saver")[0].offsetTop){
        $("#bar").css({position: "static", top: 0});           
    }            
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:25:58.660

我不确定，但我在很多网站上都看到过这种类型的东西。9gag.com 上的一个

无论如何，您可以使用`position`css 的属性。

像这个：[JSFiddle](https://jsfiddle.net/cWzp9/)

```
#scroll-me{ 
    width:100%;
     height:100px; 
     background:#333;
     position: fixed;
     top:15px;
     } 
```

scroll-me div的`position:fixed`with`top:15px`使其始终位于顶部 15px

# iphone - Xcode：我刚收到 Apple Mach-O Linker (Id) 错误，不知道为什么

> ID：10520815
> 
> 赞同：-1
> 
> 时间：2012-05-09T17:08:30.947
> 
> 标签：iphone, objective-c, ios, xcode

我是 iOS 开发的新手，我使用的是最新版本的 Xcode，只是收到一个错误，提示 Apple Mach-O Linker (Id) Error exit code 1，我不知道为什么。我认为这是相关的，但我不确定这意味着什么：

> ld：在/Users/tomkenning/Library/Developer/Xcode/DerivedData/EggTimer-ciznfdheqrtybuavrtbbcxfywyyw/Build/Intermediates/EggTimer.build/Debug-iphonesimulator/EggTimer.build/Objects-normal/i386/Mediumhb.o 中重复符号_OBJC_CLASS_$_Timing1ViewController和 /Users/tomkenning/Library/Developer/Xcode/DerivedData/EggTimer-ciznfdheqrtybuavrtbbcxfywyyw/Build/Intermediates/EggTimer.build/Debug-iphonesimulator/EggTimer.build/Objects-normal/i386/Timing1ViewController.o 架构 i386

我最近所做的只是初始化并在 .m 文件中设置一些整数值，然后使用 #import "suchandsuch.m" 从另一个 ViewController 的 .h 文件链接到它们，代码中没有错误，但是那不允许？

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:16:58.463

不要这样做：

```
#import "suchandsuch.m" 
```

做这个：

```
#import "suchandsuch.h" 
```

您可能正在编译`suchandsuch.m`，它通常定义类`Timing1ViewController`（通过包含`suchandsuch.m`在目标的要构建的文件列表中）。然后你`#import "suchandsuch.m"`会导致相同的代码被插入到不同的源文件中，该文件也被编译。结果：两个不同的源文件尝试定义`Timing1ViewController`.

要以正确的方式执行常量 - 通过在其中声明它们并`extern`在`suchandsuch.h`其中定义它们`suchandsuch.m`- 请参阅[此答案](https://stackoverflow.com/a/539191/1218876)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:10:50.213

您可能有两个`Timing1ViewController`具有相同名称的类。如果您不尝试 Product -> Clean 并再次构建。

# fortran - “真实*8”是什么意思？

> ID：10520819
> 
> 赞同：33
> 
> 时间：2012-05-09T17:08:45.000
> 
> 标签：fortran, precision, bit, fortran90

用 Fortran 90 编写的程序手册说：“所有实变量和参数都以 64 位精度（即`real*8`）指定。”

根据[Wikipedia](http://en.wikipedia.org/wiki/Single_precision)，单精度对应于 32 位精度，而双精度对应于 64 位精度，因此显然该程序使用双精度。

但这是什么`real*8`意思？

我认为这`8`意味着小数点后面有8位数字。但是，[维基百科](http://en.wikipedia.org/wiki/Single_precision)似乎说单精度通常提供 6-9 位，而[双精度](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)通常提供 15-17 位。这是否意味着声明“64 位精度”与 不一致`real*8`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-09T17:10:49.130

8 指的是数据类型使用的*字节数。*

所以一个 32 位整数也是如此`integer*4`。

快速搜索找到[了 Fortran 数据类型指南](http://www-classes.usc.edu/engr/ce/108/text/fbk01.htm)，其中包括：

> “real*4”语句将变量名称指定为单精度 4 字节实数，其精度为 7 位，幅度范围为 -38 到 +38 的 10。在几乎所有 32 位计算机中，“real”语句与“real*4”语句相同。

和

> “real*8”语句将变量名称指定为双精度 8 字节实数，精度为 15 位，幅度范围为 -308 到 +308 的 10。在几乎所有 32 位计算机中，“双精度”语句与“real*8”语句相同。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-09T18:03:07.197

现在至少有 4 种方法可以在 Fortran 中指定精度。

正如已经回答`real*8`的那样，指定字节数。它有些过时，但应该是安全的。

新方法是使用“种类”。应该使用内在函数来获得具有所需精度的类型。通过特定数值指定种类是有风险的，因为不同的编译器使用不同的值。

还有一种方法是使用 ISO_C_Binding 的命名类型。[这个问题](https://stackoverflow.com/questions/3170239/fortran-integer4-vs-integer4-vs-integerkind-4/3170438)讨论了整数的种类系统——它与实数非常相似。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-09T17:45:39.447

如果`TYPE*n`与. `TYPE`_`CHARACTER`

如果应用于字符类型，它会创建一个`n`字符数组（或字符串`n`）。

如果应用于其他类型，它指定存储大小（以字节为单位）。*在引入了类型KIND*概念的 Fortran 90+ 中，应不惜一切代价避免这种情况。指定存储大小会创建非便携式应用程序。

# razor - RazorEngine 中的模板是如何缓存的？

> ID：10520821
> 
> 赞同：12
> 
> 时间：2012-05-09T17:08:48.927
> 
> 标签：razor

调用`RazorEngine.Razor.Compile()`时，编译好的模板存放在哪里？

重新启动程序后是否可用？如果内存不足，会被转储吗？

我`RazorEngine`在[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET) ( [MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework) ) 项目中使用。应用程序重新启动后，预编译的模板是否可用？

将它们存储在 中对我来说更有意义`HttpContext.Cache`吗？`Compile`如果我这样做了，那么使用绕过内部缓存的不同功能（除了 ）是否更有意义？有没有办法执行一个`ITemplate`并只传递一个模型？

是否`RazorEngine.Razor.Parse()`进行任何缓存？还是每次都重新编译模板？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-22T22:12:56.587

目前，在 RazorEngine 编译模板后，它们被加载到内存中。这些程序集仅保留在内存中，并且在应用程序的生命周期之后不会继续存在。

我正在考虑添加对将这些程序集编译为文件的支持，但这将是未来的版本。

如果您调用`Razor.Parse`并传入模板的名称，它将尝试

1.  检查内存中程序集的缓存中是否存在同名程序集。
2.  无效缓存的模板内容已更改。
3.  缓存新编译的模板。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-24T10:20:24.300

我已经让它与 2014 年 1 月下旬安装的 RazorEngine 3.4.1.0 一起使用。

关键是先调用代价函数`Razor.Compile(content, name)`把模板放入缓存，再调用代价函数`Razor.Run(name, model)`执行模板。

请记住，读取模板内容可能很昂贵——比如说，涉及从磁盘读取——所以我的解决方案只获取一次模板内容。这可能对您来说缓存*太多，所以要小心！*

这是`RenderPartial`我在自定义`TemplateBase<T>`子类中使用的方法。对于同一个模板的多次调用，它运行得非常快。

```
public abstract class SqlTemplate<T>: TemplateBase<T>
{
    public string RenderPartial(string templateName, object model = null)
    {
        // loading a template might be expensive, so be careful to cache content
        if (Razor.Resolve(templateName) == null)
        {
            // we've never seen this template before, so compile it and stick it in cache.
            var templateContent = GetTemplateContent(templateName);
            Razor.Compile(templateContent, templateName);
        }

        // by now, we know we've got a the template cached and ready to run; this is fast
        var renderedContent = Razor.Run(templateName, model); 
        return renderedContent;
    }

    private string GetTemplateContent(string templateName)
    {
        ... your implementation here
    }
} 
```

你还需要告诉 Razor 使用这个基类`(SqlTempalte<T>)`，你可以这样做，通过调用`RazorEngineConfigurator.Configure()`;

```
public static class RazorEngineConfigurator
{
    private static bool configured = false;

    public static void Configure()
    {
        if (configured) 
        {
            return;
        }

        var templateConfig = new TemplateServiceConfiguration
        {
            BaseTemplateType = typeof(SqlTemplate<>), 
            EncodedStringFactory = new RazorEngine.Text.RawStringFactory()
        };

        RazorEngine.Razor.SetTemplateService(new TemplateService(templateConfig));

        configured = true;
    }
} 
```

[如果没有这个 SO 答案](https://stackoverflow.com/a/11798922/6722)，就不可能做到这一点——为什么不也给那个人投票呢？:)

* * *

编辑 - 如果您需要以更精细的方式执行缓存，则需要使用不同的方法使用`RazorEngineTemplateService`and `ITemplateResolver`。

这是一段起始代码；

```
 public static RazorEngineTemplateService CreateService(ITemplateResolver resolver, ICollection<string> namespaces)
    {
        Check.IsNotNull(resolver, "resolver");
        var config = new TemplateServiceConfiguration();
        config.BaseTemplateType = typeof(PlainTextTemplate<>);
        config.EncodedStringFactory = new RazorEngine.Text.RawStringFactory();
        config.Resolver = resolver;
        config.Namespaces = new HashSet<string>(namespaces);

        var service = new RazorEngineTemplateService(config);
        return service;
    } 
```

`ITemplateResolver`将模板名称转换为模板内容，因此您可以实现，例如，`CachedFileTemplateResolver`从磁盘加载缓存内容的 a。

# javascript - 用jquery解析json子节点

> ID：10520833
> 
> 赞同：0
> 
> 时间：2012-05-09T17:09:19.450
> 
> 标签：javascript, jquery, json

我在尝试使用 jquery 解析带有子节点的 JSON 时遇到问题。我一直没有从 json 中得到任何值。我解析json的代码如下：

```
 function getSC () {
  var sc2url = 'http://sc2ranks.com/api/base/teams/sea/Classified$788.json?appKey=foo.bar?jsonp=sc2test?';
 $.ajax({
  url: sc2url,
  dataType: 'jsonp',
  jsonp: 'jsonp=sc2test',
  success: sc2test,
  cache: true
 })
}

function sc2test(data) {
  console.log(data);
  var test = data['teams'][0]['divison'];
  console.log(test);
} 
```

并且返回的json是：

```
 {
    "portrait": {
        "row": 0,
        "icon_id": 0,
        "column": 0
    },
    "character_code": 788,
    "updated_at": "2012-05-08T01:33:27Z",
    "achievement_points": 970,
    "teams": [
        {
            "fav_race": "protoss",
            "bracket": 1,
            "division": "Division Zekrath Dixie",
            "ratio": "1.00",
            "world_rank": 8683,
            "wins": 97,
            "is_random": false,
            "updated_at": "2012-05-09T08:25:54Z",
            "losses": 0,
            "points": 342,
            "region_rank": 303,
            "division_rank": 21,
            "league": "diamond"
        }
    ],
    "bnet_id": 39578,
    "name": "Classified",
    "region": "sea",
    "id": 1645881
} 
```

其中有 2 个子节点，我想知道如何使用 javascript 的 jQuery 解析它们。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:12:33.397

你拼错了`division`。你有`divison`.

[例子](http://jsfiddle.net/5uCEf/)

# grails - 执行脚本清理时出错：org.codehaus.gant.GantBuilder（使用 --stacktrace 查看完整跟踪）

> ID：10520837
> 
> 赞同：0
> 
> 时间：2012-05-09T17:09:36.050
> 
> 标签：grails

Java 1.6
版 Grails 2.0.0 版

当我执行 grails clean 我得到

```
Error executing script Clean: org.codehaus.gant.GantBuilder (Use --stacktrace to see the full trace)

C:\projects\botServices>grails --stacktrace clean
| Configuring classpath
| Error Error executing script Clean: org.codehaus.gant.GantBuilder (NOTE: Stack trace has been filtered. Use --verbose to see entire trace.)
java.lang.NoClassDefFoundError: org.codehaus.gant.GantBuilder
        at org.codehaus.gant.GantBinding.class$(GantBinding.groovy)
        at org.codehaus.gant.GantBinding.$get$$class$org$codehaus$gant$GantBuilder(GantBinding.groovy)
        at org.codehaus.gant.GantBinding.<init>(GantBinding.groovy:41)
| Error Error executing script Clean: org.codehaus.gant.GantBuilder 
```

我以前从未遇到过这个问题。奇怪的。

感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:26:22.597

我在我的 Mac（Leopard）中遇到了类似的问题。这是因为 JAVA_HOME 没有指向 jdk 1.6 它可以通过几种方式解决

1.  export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home （如果仅针对该特定会话）

2.  如果您需要每次都反映 Java_Home，请更新 ~/.profile

希望有帮助

# ruby - 用于多用户的 RVM

> ID：10520838
> 
> 赞同：1
> 
> 时间：2012-05-09T17:09:46.687
> 
> 标签：ruby, ubuntu, rvm

[我使用这个官方教程](https://rvm.io/rvm/install/)安装了 RVM ，但是当我再次登录控制台时，我必须`source /etc/profile.d/rvm.sh`再次为所有用户运行。所有用户都在 RVM 组中。有人帮我吗？我有 Ubuntu 12.04，但我在 Ubuntu 10.10 上遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:15:24.327

您需要修复 gnome-terminal 的设置，我将在 RVM 安装程序中添加额外的检查：

[https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

# c - 制作隐式规则和头文件

> ID：10520839
> 
> 赞同：7
> 
> 时间：2012-05-09T17:09:46.527
> 
> 标签：c, makefile, header-files

Make 的隐含规则据说可以使编写 Makefile 更容易，但是，如果我的理解是正确的，如果我的 C 文件依赖于任何头文件，我需要明确地编写规则。我对吗？这似乎严重降低了隐式规则的有用性，因为大多数 C 文件都依赖于几个头文件，所以我想也许我缺少一些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T18:00:55.783

您可以使用以下 makefile 片段使用 gcc 自动生成头文件依赖项

```
SOURCES := $(wildcard *.c)
DEPS := $(SOURCES:%.c=%.d)
CFLAGS += -MMD

-include $(DEPS) 
```

代码可能需要一些调整才能与您的特定规则集一起使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T17:22:14.450

您不需要编写规则，只需要编写依赖项。例子：

```
foo.o : foo.h bar.h 
```

文件 foo.o 仍将由隐式规则生成，但具有额外的依赖项`foo.h`和`bar.h`. 大多数编译器也可以自动生成此依赖行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T17:18:37.150

`make`不是一个实用程序，**它**会在您的 C 文件中读取并确定它包含哪个标头。它基于文件更改的时间戳工作。因此，无论目标是依赖于头文件还是任何其他文件，您都需要明确告知`make`依赖关系。

`gcc`可以通过像这样为您生成依赖项列表来帮助您减轻工作

**主程序**

```
#include<stdio.h>
#include"my_header.h"

int main ()
{
return 0;
} 
```

进而，

```
gcc -M main.c 
```

现在，使用`-M`预处理器标志，它会自动生成一个依赖列表，如

```
main.o: main.c /usr/include/stdio.h /usr/include/features.h \
 /usr/include/bits/predefs.h /usr/include/sys/cdefs.h \
 /usr/include/bits/wordsize.h /usr/include/gnu/stubs.h \
 /usr/include/gnu/stubs-64.h \
 /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/include/stddef.h \
 /usr/include/bits/types.h /usr/include/bits/typesizes.h \
 /usr/include/libio.h /usr/include/_G_config.h /usr/include/wchar.h \
 /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/include/stdarg.h \
 /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h \
 my_header.h 
```

`gcc`也已经弄清楚了里面的所有内容`stdio.h`！

# ruby-on-rails-3 - 无法在 Rails 控制台中访问模型

> ID：10520845
> 
> 赞同：2
> 
> 时间：2012-05-09T17:10:02.623
> 
> 标签：ruby-on-rails-3

好的，所以我已经安装了 xampp 1.7.7 并设置了我的 mysql 数据库和一切。我在 phpmyadmin 中的数据库名为“spree-default-1.1_development”，我的 database.yml 文件如下所示：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: spree-default-1.1_development
  pool: 5
  username: root
  password:
  socket: /opt/lampp/var/mysql/mysql.sock 
```

当我输入“rails console development”时，它似乎可以很好地加载控制台：

```
adnan@ubuntu:~/Documents/Aptana Studio 3 Workspace/spree-default-1.1$ rails console development
Loading development environment (Rails 3.2.3)
1.9.3-p194 :001 > 
```

但是，当我尝试访问 mysql 数据库中的任何内容时，出现错误：

```
1.9.3-p194 :001 > Order
NameError: uninitialized constant Order
    from (irb):1
    from /home/adnan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
    from /home/adnan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /home/adnan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我不确定为什么我无法访问 mysql 数据库中的模型。我的设置是在 ubuntu 11.04 中，使用 rails 3.2.3 和 ruby​​ 1.9.3p194。当我在 aptana 中加载 rails 服务器时，我可以使用 localhost:3000 正常运行服务器，并且似乎连接到数据库没有问题。

当我使用带有 rails 2.3 的 Windows 7 设置时，我可以毫无问题地访问模型。输入“订单”会给我这个结果，我期望：

```
>> Order
=> Order(id: integer, user_id: integer, number: string, item_total: decimal, total: decimal, created_at: datetime, updat
ed_at: datetime, state: string, token: string, adjustment_total: decimal, credit_total: decimal, completed_at: datetime) 
```

有谁知道发生了什么？我应该能够使用简单的 rails 查询很好地访问数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T03:46:18.520

在当前版本的 Spree (1.1+) 中，您需要命名 spree 对象。

```
>> Spree::Order.first 
```

# c++ - boost asio套接字停止后无法连接

> ID：10520849
> 
> 赞同：0
> 
> 时间：2012-05-09T17:10:23.617
> 
> 标签：c++, sockets, boost, boost-asio

我使用 boost asio 来实现 TCP 套接字。我遵循了聊天服务器示例。我第一次运行套接字服务器时它工作正常。我这样做是这样的：

```
 void ActiveSocketServer::run() throw (ActiveException){

     initBoost();

     server->startAccept();

     t=new boost::thread(boost::bind(&boost::asio::io_service::run, &io_service));
    }

    void ActiveSocketServer::initBoost(){

       if (isIpV6){
            endpoint=new tcp::endpoint(tcp::v6(), port);
       }else{
            endpoint=new tcp::endpoint(tcp::v4(), port);
       }
       server=new ActiveSocketServerConnection(io_service,
                    *endpoint,
                    port,
                    id,
                    maxSizePacket,
                    this); 
```

}

启动后，我调用 stop 方法，写成这样：

```
 void ActiveSocketServer::stop(){
     io_service.stop();
     if (t){
        t->join();
        delete t;
        t=NULL;
      }

      if (endpoint){
        delete endpoint;
        endpoint=NULL;
      }

      if (server){
         delete server;
         server=NULL;
      }
   } 
```

在此之后，端口未启动（netstat 不显示）。稍后，我尝试再次调用 run 并引发任何错误，端口已启动（我可以通过 netstat 看到）但任何连接都被接受（async_accept 永远不会醒来）。

我认为这可能与 io_service 有关，但如果在 stop 方法中进行重置，则会引发错误 125（操作已取消）。

任何想法？

* * *

是的，在我调用 startAccept 的同时，我正在接收一个新连接，但出现错误 125。这正常吗？我在哪里可以阅读有关它的信息？

我的开始接受：

```
 void ActiveSocketServerConnection::startAccept(){

       sessionId++;

        newSession=new ActiveSocketServerSession(   io_service_,
                        getPort(),
                        getId(),
                        maxSizePacket,
                        activeSocketServer,
                        sessionId);

        acceptor_.async_accept( newSession->socket(),
                 boost::bind(&ActiveSocketServerConnection::handleAccept, 
                         this, newSession,
                 boost::asio::placeholders::error));
        } 
```

并且手柄接受：

```
 void ActiveSocketServerConnection::handleAccept(ActiveSocketServerSession* newSession,
                                                          const boost::system::error_code& error){
     if (!error){
       newSession->start();

         }else{

    activeSocketServer.onException(error);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:18:55.700

在[文档](http://www.boost.org/doc/libs/1_48_0/doc/html/boost_asio/reference/io_service/stop.html)中，它声明任何对`run`（或类似）的调用将立即返回，直到[`io_service::reset()`](http://www.boost.org/doc/libs/1_48_0/doc/html/boost_asio/reference/io_service/reset.html)被调用。

如果您打算`run`再次致电，那么我认为“启动”之`io_service`类的方法没有任何害处：

```
void ActiveSocketServer::stop(){
     io_service.stop();

     // prime to make ready for future run/run_one/poll/poll_one calls
     io_service.reset();

     // ...
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T07:30:18.757

在第二次调用“run”后得到的 125 是正常的：它是在调用 Stop 时取消的上一个挂起的处理程序。AFAIN 摆脱这种情况的唯一方法是销毁并重新创建 io_service （请参阅此[答案](https://stackoverflow.com/questions/2314816/remove-all-handlers-from-a-boostasioio-service-without-calling-them)，在您的情况下，动态分配 io_service 可能会更好）

如果您的新“async_accept”调用仍然失败，您可能想重新初始化接受器（关闭然后打开/绑定/侦听）......因为您重新创建了端点（我猜您用来构造接受器？）

# jquery - jquery mobile和ios地址栏

> ID：10520850
> 
> 赞同：0
> 
> 时间：2012-05-09T17:10:24.193
> 
> 标签：jquery, ios, jquery-mobile

由于 URL 地址栏，我在使用 ios 设备时遇到了一些问题。我正在使用 Esri Javascript api maps 和 Jquery mobile。当我更改页面时，我重新调整了地图的大小，但由于顶部的 URL 栏未修复，我在底部得到空白，因为它无法获得精确的高度。谁能告诉我如何解决这个问题。我尝试使用滚动顶部但没有帮助。我为此苦苦挣扎了将近一天。有什么办法我可以始终显示地址栏或仅隐藏几页的地址栏。

谢谢，帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:19:28.563

`window.resize`您可以在事件处理程序中更新容器元素的高度：

```
$(window).bind('resize', function () {
    $('#container').height($(this).height());
}); 
```

这当然是非常简单的，您很可能需要做一些数学运算来计算出容器的确切高度。

我还会添加一个超时，因此每次调整大小时只会触发一次（随着浏览器调整大小，不同的浏览器会发送不同数量的调整大小事件）：

```
var timer;
$(window).bind('resize', function () {
    clearTimeout(timer);
    timer = setTimeout(function () {
        $('#container').height($(this).height());
    }, 50);
}); 
```

由于地址栏被隐藏，`resize`事件被触发，因为视口正在改变大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T04:10:06.863

JQM 有一个方向改变事件，

```
$( window ).on( "orientationchange", function( event ) {
    /* your codes here */
}); 
```

# c++ - C++/C 虚拟/可嵌入文件系统 [交叉兼容（库）]？

> ID：10520856
> 
> 赞同：3
> 
> 时间：2012-05-09T17:10:46.227
> 
> 标签：c++, c, filesystems, virtual

我想尝试一些虚拟文件系统，例如拥有 1 个存储所有数据的文件（1 个文件 = 虚拟磁盘）。例如，我可以打开虚拟磁盘并将文件放入其中，将数据写入文件，从文件中读取数据，打开文件并使用 fseek 等。

有没有我可以使用的图书馆？许可证等并不重要。我只是想在我的机器上测试它，因为我很无聊，所以我想在 C++/C 中尝试一下。

提前致谢！:)

如果库只有windows，那也没关系，也许我会找到一个linux库，这样我就可以制作2个项目了？

* * *

编辑：感谢 BRPocock，我知道我的问题有点不清楚。我真正想要的是一个能够在库已经提供的 VFS 上存储文件、读取文件和执行文件操作的库。当然还有安装。所以，如果有一个库可以在 C++ 中给我这个函数，我会更喜欢：

```
OpenVirtualDrive(const name[]);//
CloseVirtualDrive(handle);//
fopen(const name[], mode);//open file, return handle
fclose(handle);//close handle
ftemp(); //open file as temporary file
fremove(const name[]);//delete file

fwrite(handle, array[]);//write array to file
fread(handle, array[], size = sizeof array, pack = false);//read from file
fputchar(handle, value, utf8 = true);//put char into file
fgetchar(handle, value, utf8 = true);//read char from file, move pointer
fblockwrite(handle, const buffer[], size = sizeof buffer);//write block
fblockread(handle, buffer[], size = sizeof buffer);//read block, move pointer

fseek(handle, position = 0, seek_whence: whence = seek_start);//move pointer
flength(handle);//size of file
fexist(const pattern[]);//check if file exists
fmatch(name[], const pattern[], index = 0, size = sizeof name);//search for file 
```

这只是伪代码：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:19:41.573

Linux（以及许多 BSD，我相信包括 MacOSX）使用 FUSE 系统 (http://fuse.sourceforge.net/) 来提供这些类型的服务。您应该能够在“网络”上找到许多示例。

我相信在 Windows 上执行相同操作的“公认”方式是将其编写为设备驱动程序可加载模块 ( `.dll`) ......在[http://msdn.microsoft.com/en-us/windows/hardware /gg463062](http://msdn.microsoft.com/en-us/windows/hardware/gg463062)也许是起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:50:43.043

我们的[SolFS](http://www.eldos.com/solfs/)将完成这项工作。评估许可证对您来说没问题，我们也为非商业公共项目提供免费许可证。如果你想要一个从其他应用程序可见的文件系统，你需要 SolFS 的 OS 版本，如果你只想从你的应用程序调用它的函数，那么 SolFS 应用程序版本就足够了。

# django - Django - 我可以创建一个可以从不同文件中的不同函数访问/操作的全局变量吗？

> ID：10520862
> 
> 赞同：0
> 
> 时间：2012-05-09T17:10:50.587
> 
> 标签：django, global-variables, argument-passing

我试图找出一种方法可以避免将这么多参数传递给我的应用程序中的函数。我为每个表使用不同的数据库，因此无法加入，因此我需要创建一个主键字典，其中包含后续函数所需的对象。我这样做是为了只做两个查询。

我的例子如下。请注意我必须如何将`people_ref`参考字典传递给每个变形函数。我想做的是设置某种`people_ref`可以从任何地方访问的全局变量。这样我就可以将 People.in_bulk() 响应转储到全局池，然后直接从变形函数内部访问它，而无需传入引用。有没有办法做到这一点？

我想叫什么：

```
>>> myapp.models.make_crazy_books([1,2,3]) 
```

来自 myapp/models.py：

```
import itertools
from django.db import models
from myapp.utils import deform

class People(models.Model):
    born = model.DateField()

class Book(models.Model):
    author = models.ForeignKey(People, related_name='author_set')
    editor = models.ForeignKey(People, related_name='editor_set')
    last_edition = model.DateField()

def make_crazy_books(book_ids):
    book_list = Book.objects.using("db1").filter(id__in=book_ids) #Query here, db1

    people_list = ((b.author_id, b.editor_id) for b in book_list)
    people_ids = set(itertools.chain(*people_list))
    people_ref = People.objects.using("db2").in_bulk(people_ids) #Query here, db2

    #Would like to not have to send people_ref to each function
    book_list = deform.deform_edition(book_list, people_ref)
    book_list = deform.deform_author(book_list, people_ref)
    """ ... do some other deforming functions """

    return book_list 
```

来自 mayapp/utils/deform.py：

```
def deform_edition(book_list, people_ref):
    for book in book_list:
        author = people_ref[book.author_id] #Change to global lookup?
        b.last_edition = author.born
    return book_list

def deform_author(book_list, people_ref):
    for book in book_list:
        editor = people_ref[book.editor_id] #Change to global lookup?
        b.author = editor
    return book_list 
```

我会尝试使用 Django 的缓存功能，但是在运行多个线程的情况下，缓存的引用字典可以被其他同时请求读取/覆盖。

编辑：也许[本地内存缓存](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#local-memory-caching)会起作用，因为它是线程安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:11:31.253

通常，在一组相关函数之间共享数据是 OOP 的用途 - 定义一个包含函数（作为方法）的类，然后用特定数据实例化该类。

在这种情况下，虽然已经有一个类与数据相关联 - 它是 People 对象的 QuerySet。因此，您可以为包含方法的 People 定义一个自定义 QuerySet 子类`deform`- 不幸的是，在 Django 中要使其正常工作，您还需要定义一个自定义 Manager，覆盖`get_query_set`以返回您的 QuerySet 子类。

# php - 得到后继的site_id，php（preg_match或json_decode？）=不高兴

> ID：10520865
> 
> 赞同：0
> 
> 时间：2012-05-09T17:11:17.840
> 
> 标签：php, preg-match, json, posterous

我正在尝试从posterous 中获取用户的site_id。这些数据似乎不在用户的个人资料中，FAQ、帮助或文档中没有任何内容表明如何找到它。我能找到的唯一方法是通过 API 请求站点列表，所以，这就是我想要做的，我得到一个 json 响应，而且，事实上，用户在后世拥有的任何站点的 site_id 是在那里，我只想输出这个。

首先我尝试了（其中 $result 是 json 响应）

```
$siteid = preg_match('"site_id": \d+', $result);
echo $siteid; 
```

我什么都得不到。

然后我尝试了

```
json_decode($result);
echo $result->site_id; 
```

我仍然一无所获。

我可以看到，在 json 响应 ($result) 中，

```
"site_id": $somenumber; 
```

为什么我不能使用 preg_match 或 json_decode 提取这些数据？还有其他更好的方法吗？

我的完整代码粘贴在[http://tonybaldwin.me/paste/index.php?3u](http://tonybaldwin.me/paste/index.php?3u)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:18:52.853

Posterous list-of-sites API 返回一个映射列表（如您所料）。因此，您需要做的是首先从列表中选择正确的项目，然后阅读它的`id`关键。

```
$result = json_decode($response);
$first_result = $result[0];
$first_result_id = $first_result["id"];
echo $first_result_id; 
```

# c# - 匹配 DataView RowFilter 中的单个字符？

> ID：10520866
> 
> 赞同：2
> 
> 时间：2012-05-09T17:11:25.300
> 
> 标签：c#, asp.net, regex, dataview, rowfilter

我想知道是否有任何可能的方法可以在提供单字符匹配的 a`RowFilter`上应用？`DataView`

**例如 DataView.RowFilter = "SOME_COL like 'A_BCD%';**

其中下划线表示 Oracle SQL 中的单个字符匹配，并且`%`是 0 个或多个字符的通配符。

显然 RowFilter 仅支持通配符 (`* or %)`在匹配表达式的开头或结尾。我唯一的另一个想法是遍历行并删除与正则表达式不匹配的行，但这并不理想。

任何帮助或想法将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-08T06:22:57.660

或者，

```
DataView.RowFilter = "Substring(SOME_COL, 1, 1) = 'A' and Substring(SOME_COL, 3, 3) = 'BCD';" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:39:48.570

您可以使用 Linq to Datasets 来执行此操作

```
class Program
{

    static void Main(string[] args)
    {
        DataTable dt = new DataTable("test");
        dt.Columns.Add("SOME_COL", typeof(string));

        dt.Rows.Add("AABCDEFG");
        dt.Rows.Add("AZBCDEFG");
        dt.Rows.Add("AZZBCDEFG");
        dt.Rows.Add("ABC");

        Regex r = new Regex("A\\wBCDE");

        DataView dv 
           = (from t in dt.AsEnumerable()
              where r.IsMatch(t.Field<string>("SOME_COL"))
             select t).AsDataView();

        foreach(DataRowView row in dv)
        {
            Console.WriteLine(row[0]);
        }

    }

} 
```

输出

```
AABCDEFG
AZBCDEFG
Press any key to continue . . . 
```

# java - 如何实现双向地图

> ID：10520868
> 
> 赞同：0
> 
> 时间：2012-05-09T17:11:30.870
> 
> 标签：java, algorithm

我知道 Google 的 guava 甚至 Apache commons 都提供双向地图。但是，我想知道它们是如何实现的。从我发现的一点点来看，最简单的方法是使用 2 个单独的映射来存储键/值和值/键数据。但是，肯定有更好的方法吗？谷歌的实现肯定不是这么简单吗？魔法在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:54:55.300

显然，仅此而已（Louis Wasserman）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:58:52.100

如果您考虑一下，实际上可以使用单个 Object->Object 映射来实现一种双向映射，将 (key,value) 对插入映射两次，每个方向一次。只要您不需要明确的逆视图，它就可以工作。在键和值是相同类型的情况下（允许相同的对象作为键和值），在给定的键和值之间只能有一个映射（O1->O2 意味着 O2->O1 )，而使用传统的 BiMap，您可以有效地拥有两个（O1->O2 逆 O2->O1 和 O3->O1 逆 O1->O3）。但是对于许多双向地图需求，单地图解决方案就足够了。

# javascript - 如何从 Rest APi 获取 JSON 数据

> ID：10520871
> 
> 赞同：1
> 
> 时间：2012-05-09T17:11:41.617
> 
> 标签：javascript, ajax, json

我在 javascript 中创建一个对象：

```
 var t = null;
            $.getJSON('http://localhost:53227/Home/GetData', function (data) {
                alert(data);
                t = data;
            });
            alert(t); 
```

当我提醒数据时，我会返回一个对象。当我提醒 t 时，它为空。

您能否指导一下，如何为返回的数据设置“t”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:16:53.920

这将按预期工作 - 问题不在于`t`未设置，而是您在执行回调`alert(t)`之前正在做的事情。`getJSON`尝试`alert(t)`后立即做`t = data;`

换句话说，这是您当前的操作顺序：

1.  设置 t = null
2.  调用服务器脚本
3.  alert(t) --> t 仍然为空！
4.  （一段时间后）收到 JSON 响应
5.  警报数据
6.  设置 t = 数据

...如您所见，在第 3 步，“t”仍将为空。试试这个：

```
var t = null;

$.getJSON('http://localhost:53227/Home/GetData', function (data) {
    alert(data);
    t = data;
    alert(t);
}); 
```

干杯

# activex - 无法实例化 ActiveX 控件，因为线程位于单线程单元中。将 PC 从睡眠中唤醒后发生

> ID：10520872
> 
> 赞同：3
> 
> 时间：2012-05-09T17:11:56.267
> 
> 标签：activex, sta, single-threaded, apartments, apartment-state

我正在开发一个 VOIP 客户端（窗口形式），它在拨打或接听电话时会打开一个浏览器窗口（ExtendedWebBrowser）。通常它工作正常，但如果计算机进入睡眠模式然后唤醒程序将崩溃并出现以下错误：

```
"System.Threading.ThreadStateException crossed a native/managed boundary
  Message=ActiveX control '8856f961-340a-11d0-a96b-00c04fd705a2' cannot be instantiated because the current thread is not in a single-threaded apartment." 
```

我尝试在代码中设置线程，`thread.SetApartmentState(ApartmentState.STA)`但我得到了相同的结果。另外，我确实有`[STAThread]`之前的`main()`功能。现在我想知道它是否与计算机进入睡眠状态时线程未正确终止有关，但我不确定。我的背景是 C++ 和 DirectX，这是我工作过的第一个 Windows 窗体，因此将不胜感激。

**跟进：**在发现程序在工作线程而不是主线程上启动后，我能够解决这个问题。可以在此处阅读更多信息：[Sleep(suspend) 和 Resuming windows form 在工作线程而不是主线程上启动程序](https://stackoverflow.com/questions/10608551/sleepsuspend-and-resuming-windows-form-starts-program-on-worker-thread-instead)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:58:58.237

我能够解决这个问题。当程序从睡眠模式恢复`run()`并被调用时，它正在 Windows 事件工作线程而不是主线程上运行。可以在此处阅读更多信息：[Sleep(suspend) 和 Resuming windows form 在工作线程而不是主线程上启动程序](https://stackoverflow.com/questions/10608551/sleepsuspend-and-resuming-windows-form-starts-program-on-worker-thread-instead)

# entity-framework - EF Code First 多个表到单个实体

> ID：10520877
> 
> 赞同：2
> 
> 时间：2012-05-09T17:12:13.050
> 
> 标签：entity-framework, ef-code-first

我刚开始使用实体框架，我似乎误解了一些东西。基本上我已经设置了一个数据库。假设以下是我的表格。

```
**Employees**
EmployeeId
CubeId (FK to Cubes table)
NameId (FK to Name table)

**Cubes**
CubeId
CubeName

**Person**
NameId
FirstName
LastName 
```

我希望能够写出这样的东西：`SELECT EmployeeId, CubeId, CubeName, FirstName, LastName FROM Employees LEFT OUTER JOIN Cubes LEFT OUTER JOIN Person`. 所以它会返回所有的员工。基本上，在 EF Code First 中，您是否必须为每个表创建一个类？如果没有，你如何创建一个 LEFT OUTER Join 等价物？我发现的所有示例都使用导航属性从一个表转到另一个表（即从类到类）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:46:00.860

楷模：

```
public class Employee 
{
    [Key]
    public int EmployeeId {get;set;}
    public int CubeId {get;set;}
    [ForeignKey("Cube")]
    public int NameId {get;set;}
    [ForeignKey("Name")]

    public virtual Cube Cube {get;set;}
    public virtual Name Name {get;set;}
}

public class Cube
{
    [Key]
    public int CubeId {get;set;}
    public string CubeName {get;set;}
}

public class Name
{
    [Key]
    public int NameId {get;set}

    public string FirstName {get;set;}
    public string LastName {get;set;}
} 
```

您的上下文：

```
public class YourContext:DbContext
{
    public DbSet<Name> Names {get;set;}
    public DbSet<Cube> Cubes {get;set;}
    public DbSet<Employee> Employees {get;set;}
} 
```

您的查询：

```
YourContext db = new YourContext();
var query = db.Employees.Where(x => x.EmployeeId == id).Select(x => new 
{ 
    EmployeeId = x.EmployeeId,
    CubeId = x.Cube.CubeId,
    CubeName = x.Cube.CubeName,
    FirstName = x.Name.FirstName,
    LastName = x.Name.LastName
}).FirstOrDefault(); 
```

这将找到第一个具有某些 id 的员工（如果没有，则返回 null），然后创建一个具有您提到的所有属性的类型。如果您需要姓氏，您可以通过以下方式访问它：

字符串姓氏 = 查询。姓氏；

# c++ - 如何以跨平台的方式在 C/C++ 中测试计算机的真实通用性能？

> ID：10520878
> 
> 赞同：0
> 
> 时间：2012-05-09T17:12:14.437
> 
> 标签：c++, algorithm, performance-testing

我想要一种以跨平台方式在 C++ 中测试**计算机真正“整体”性能的方法。**

我正在考虑运行一些通常在基准套件软件中使用的简单测试，但是我发现的所有基准（软件）套件要么是封闭源代码，要么不是跨平台的。因此，我是否在寻求建议/指导，首选哪些算法？是否有任何已经免费的独立库，我已经可以在没有太多工作的情况下使用它们？任何帮助表示赞赏。

我考虑测试：

*   CPU/内存速度
*   显卡速度
*   磁盘速度
*   并行执行速度

我一直在考虑是否只复制 Google V8 基准 JavaScript 测试并在我已经嵌入的 JavaScript V8 引擎中运行它们 是否是一个**好主意：http:** [//v8.googlecode.com/svn/data/benchmarks/v3/run.html](http://v8.googlecode.com/svn/data/benchmarks/v3/run.html)

我有一些想法要做一些简单的磁盘复制、数据压缩/解压缩、阶乘素数。对于显卡性能，我可以简单地使用 SFML/OpenGL 并做一些 GPU 密集型的事情。但是做所有这些事情对我来说应该需要一些时间，而且从一开始就可能不是一件好事，因此问题是：

**如何以跨平台的方式在 C/C++ 中测试计算机的真实通用性能？**

如果您有关于我可能想要使用的好算法的提示，请告诉我，它只会有帮助。

提前致谢！

注意我可以检查可用的硬件，但我相信实际测量计算机性能的最佳方法是对其进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:31:28.517

“真正的一般性能”最好通过在计算机上运行实际应用程序并测量它们的性能来进行测试。这就是为什么 3D 基准测试包括尽可能类似于“真实”游戏的“真实”3D 场景。内存和 CPU 速度也是如此——最重要的是真正的内存和 CPU 密集型应用程序如何在计算机上运行。用一个小程序来模仿一套真正的数百万行应用程序的操作指纹是相当困难的。

我宁愿收集一些（开源）真实程序并找到一种自动运行它们以评估性能的方法。例如，使用 GNU C 编译器并运行它来编译一个大型应用程序；采用任何开源加速 3D 游戏（是的，它们存在）并可能对其进行修补，使其运行特定数量的帧等。对于硬盘速度，采用构建索引的开源全文索引工具直接在硬盘上，或者在开源数据库上执行大量的插入和删除等操作。然后基于实际应用程序构建测试组合，然后从中构建性能指标。

# java - java.sql.SQLException: ORA-00936: 缺少表达式

> ID：10520881
> 
> 赞同：4
> 
> 时间：2012-05-09T17:12:20.807
> 
> 标签：java, oracle, ora-00936

下面我正在创建表格。

```
 public static final String CREATE_SQL = "CREATE TABLE " +DATABASE_TABLE +
        "(ID number(10,0), " +
        " CGUID VARCHAR(255), " + 
        " PGUID VARCHAR(255), " + 
        " SGUID VARCHAR(255), " + 
        " USERID VARCHAR(255), " +
        " ULOC VARCHAR(255), " +
        " SLOC VARCHAR(255), " +
        " PLOC VARCHAR(255), " +
        " ALOC VARCHAR(255), " +
        " SITEID VARCHAR(255), " +
        " ATTRIBUTEID VARCHAR(255), " +
        " ATTRIBUTEVALUE VARCHAR(255), " +
        " PRIMARY KEY ( ID ))"; 
```

这是以下 UPSERT_SQL 查询，当我尝试更新我的数据库表时，我总是**得到 - java.sql.SQLException: ORA-00936: missing expression** 。我检查了我的 SQL，我找不到表达式丢失的地方。下面的 SQL 有问题吗？

```
public static final String UPSERT_SQL = "MERGE INTO " +DATABASE_TABLE+ " USING (  SELECT ? AS ID, " +    // We will maybe add this record
    "                ? AS CGUID, " +
    "                ? AS PGUID, " +
    "                ? AS SGUID, "+
    "                ? AS USERID, "+
    "                ? AS ULOC, "+
    "                ? AS SLOC, "+
    "                ? AS PLOC, "+
    "                ? AS ALOC, "+
    "                ? AS SITEID, "+
    "                ? AS ATTRIBUTEID, "+
    "                ? AS ATTRIBUTEVALUE, "+
    "                FROM dual ) maybe "+
    "   ON (maybe.ID = "+DATABASE_TABLE+".ID) "+
    "         WHEN MATCHED THEN "+
            // We only need update the fields that might have changed
    "       UPDATE SET " +DATABASE_TABLE+ ".ULOC = maybe.ULOC, " +DATABASE_TABLE+ ".SLOC = maybe.SLOC, " +DATABASE_TABLE+ ".PLOC = maybe.PLOC, " +DATABASE_TABLE+ ".ALOC = maybe.ALOC "+
    "         WHEN NOT MATCHED THEN "+
       // Insert new record
    "   INSERT VALUES (maybe.ID, maybe.CGUID, maybe.PGUID, maybe.SGUID, maybe.USERID, maybe.ULOC, maybe.SLOC, maybe.PLOC, maybe.ALOC, maybe.SITEID, maybe.ATTRIBUTEID, maybe.ATTRIBUTEVALUE)"; 
```

从下面我正在执行那个 UPSERT_SQL 语句。

```
LnPDataConstants.PSTMT = LnPDataConstants.DB_CONNECTION.prepareStatement(LnPDataConstants.UPSERT_SQL); // create a statement
                        LnPDataConstants.PSTMT.setInt(1, (int) ind);
                        LnPDataConstants.PSTMT.setString(2, LnPDataConstants.CGUID_VALUE);
                        LnPDataConstants.PSTMT.setString(3, LnPDataConstants.PGUID_VALUE);
                        LnPDataConstants.PSTMT.setString(4, LnPDataConstants.SGUID_VALUE);
                        LnPDataConstants.PSTMT.setString(5, LnPDataConstants.UID_VALUE);
                        LnPDataConstants.PSTMT.setString(6, LnPDataConstants.ULOC_VALUE);
                        LnPDataConstants.PSTMT.setString(7, LnPDataConstants.SLOC_VALUE);
                        LnPDataConstants.PSTMT.setString(8, LnPDataConstants.PLOC_VALUE);
                        LnPDataConstants.PSTMT.setString(9, LnPDataConstants.ALOC_VALUE);
                        LnPDataConstants.PSTMT.setString(10, LnPDataConstants.SITEID_VALUE);
                        LnPDataConstants.PSTMT.setString(11, "10200");
                        LnPDataConstants.PSTMT.setString(12, attrValue1.toString().split("=")[1]);
                        LnPDataConstants.PSTMT.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T17:23:39.877

是的，SQL有问题，就是你在**FROM dual**之前写了一个逗号。这会导致 Oracle 的 SQL 解析器报错。

# cron - Debian+删除以 * 开头的文件

> ID：10520882
> 
> 赞同：0
> 
> 时间：2012-05-09T17:12:29.683
> 
> 标签：cron, debian

我已经设置了一个 cronjob 来删除一个每小时由另一个脚本生成的文件。

文件名：`inc.php?cronUsers`

我当前的命令如下所示：

```
rm -f "/root/inc.php?cronUsers" 
```

问题是，当有多个文件时，文件名会发生如下变化：

`inc.php?cronUsers.1`,`inc.php?cronUsers.2`等等..

我对这一切都很陌生，所以唯一幸运的猜测是：

```
rm -f "/root/inc.php?cronUsers.*" 
```

但这似乎行不通。

我还能如何删除所有以 开头的文件`inc.php?cronUsers`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:39:18.493

rm -f inc.php\?cronUsers*

似乎工作：

```
$ touch "inc.php?cronUsers.1"
$ touch "inc.php?cronUsers.2"
$ touch "inc.php?cronUsers"
$ ls
inc.php?cronUsers  inc.php?cronUsers.1  inc.php?cronUsers.2
$ rm -f inc.php\?cronUsers*
$ ls
<empty> :) 
```

问候

*（你为什么把你的问题标题写成“以*开头”？？我错过了什么吗？）*

# php - 试图从 PHP 函数中执行 SQL 查询

> ID：10520885
> 
> 赞同：1
> 
> 时间：2012-05-09T17:12:36.710
> 
> 标签：php, mysql, sql, mysqli

我正在尝试从 PHP 函数中执行 SQL 查询，但我不断收到以下错误：

> 致命错误：在第 14 行的 /homepages/23/d363590707/htdocs/bNames.php5 中的非对象上调用成员函数 prepare()

第 14 行是下面方法中带有 prepare 方法的行：

```
function testing()
{
    $query = "SELECT `no` FROM `brandNames` WHERE `id` = $index";
    $stmt = $dbc->prepare($query);   <--- line 14 -----------------<<<
    $stmt->execute();
    $stmt->store_result();
    $stmt->bind_result($no);
    $stmt->fetch(); 
} 
```

注意：当我将代码块粘贴在页面中（不使用函数）时，查询有效，我没有任何问题。

另外，我打算给这个函数添加参数来替换表名、列名和值。这只是一个可能出错的东西最少但仍然说明我的问题的版本。

提前致谢

编辑：这是文件的样子：

```
<?php
    require_once('connectvars.php'); //contains the info used in mysqli_connect

    $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

    function testing($dbc)
    {
        $query = "SELECT `no` FROM `brandNames` WHERE `id` = $index";
        $stmt = $dbc->prepare($query);
        $stmt->execute();
        $stmt->store_result();
        $stmt->bind_result($no);
        $stmt->fetch(); 
    }

//more code
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:15:12.223

问题是 $dbc 对象（可能是 PDO？）不在您的函数范围内。您可以在此处阅读更多相关信息：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

要解决此问题，您可以尝试将以下行添加到函数顶部：

```
global $dbc; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T17:16:50.897

虽然您可以定义`$dbc`为`global`，但我建议简单地传递`$dbc`给函数：

```
function testing($dbc)
{
    $query = "SELECT `no` FROM `brandNames` WHERE `id` = $index";
    $stmt = $dbc->prepare($query);   <--- line 14 -----------------<<<
    $stmt->execute();
    $stmt->store_result();
    $stmt->bind_result($no);
    $stmt->fetch(); 
} 
```

现在，当您调用时`testing()`，您需要传入`$dbc`: `testing($dbc);`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:15:10.890

您可能需要`global $dbc;`在函数的开头将其[带入函数的作用域](http://php.net/manual/en/language.variables.scope.php)。

# visual-studio-2010 - 如何在 Visual Studio 2005 中保存到 SQL Server Express 数据库

> ID：10520890
> 
> 赞同：1
> 
> 时间：2012-05-09T17:12:47.053
> 
> 标签：visual-studio-2010, sql-server-express, sqldatasource

我是 vb.net 的初学者，想知道如何在 Visual Studio 2005 中将窗口窗体连接到 SQL Server Express 数据库，以便我们以后可以对记录执行添加、搜索、更新和删除操作。

这是我的代码：

```
Dim mycommand As SqlCommand
Dim dr As SqlDataReader
Dim dr1 As SqlDataReader
Dim ra As Integer

Private Sub cmdsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)       Handles cmdsave.Click

    Using myconnection As SqlConnection = New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\database\app.mdf;Integrated Security=True;User Instance=True")
        myconnection.Open()
        mycommand = New SqlCommand("insert into staff([FirstName],[LastName],[Address],[DOB], " & _
                                   "[TelephoneNum], [DateJoinIn], [HighestQualifi], [AppointedAs], [Salary]) " & _
                                   "VALUES (@first, @last, @address, @dob, @tel, @dateJ, @highQ, @appointed, @sal)", myconnection)

        mycommand.Parameters.AddWithValue("@first", txtfname.Text)
        mycommand.Parameters.AddWithValue("@last", txtlname.Text)
        mycommand.Parameters.AddWithValue("@address", txtaddress.Text)
        mycommand.Parameters.AddWithValue("@dob", txtdob.Text)
        mycommand.Parameters.AddWithValue("@tel", txttelephone.Text)
        mycommand.Parameters.AddWithValue("@dateJ", txtdjoinin.Text)
        mycommand.Parameters.AddWithValue("@highQ", txthqualifi.Text)
        mycommand.Parameters.AddWithValue("@appointed", txtappoint.text)
        mycommand.Parameters.AddWithValue("@sal", txtsalary.Text)
        mycommand.ExecuteNonQuery()

        myconnection.Close()
    End Using

End Sub 
```

问题是它没有保存在我的数据库中？？？？？？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:26:56.130

正如我之前在这个网站上所说的那样——整个*User Instance 和 AttachDbFileName=*方法是有缺陷的——充其量是！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`myconnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`MyAppDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=MyAppDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# c# - 如何使用匿名方法返回值？

> ID：10520892
> 
> 赞同：96
> 
> 时间：2012-05-09T17:12:56.967
> 
> 标签：c#, .net, lambda

这失败了

```
string temp = () => {return "test";}; 
```

有错误

> 无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-05-09T17:14:20.123

这里的问题是您定义了一个匿名方法，该方法返回 a`string`但试图将其直接分配给 a `string`。它是一个表达式，在调用时会产生 a`string`它不是直接 a `string`。它需要分配给兼容的委托类型。在这种情况下，最简单的选择是`Func<string>`

```
Func<string> temp = () => {return "test";}; 
```

这可以通过一点转换或使用委托构造函数在一行中完成，以建立 lambda 的类型，然后进行调用。

```
string temp = ((Func<string>)(() => { return "test"; }))();
string temp = new Func<string>(() => { return "test"; })(); 
```

注意：两个样本都可以缩写为缺少`{ return ... }`

```
Func<string> temp = () => "test";
string temp = ((Func<string>)(() => "test"))();
string temp = new Func<string>(() => "test")(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-09T17:15:45.200

您正在尝试将*函数委托*分配给字符串类型。试试这个：

```
Func<string> temp = () => {return "test";}; 
```

您现在可以这样执行该函数：

```
string s = temp(); 
```

“s”变量现在将具有值“test”。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-05T04:05:44.870

使用一点辅助函数和泛型，您可以让编译器推断类型，并缩短一点：

```
public static TOut FuncInvoke<TOut>(Func<TOut> func)
{
    return func();
}

var temp = FuncInvoke(()=>"test"); 
```

旁注：这也很好，因为您可以返回匿名类型：

```
var temp = FuncInvoke(()=>new {foo=1,bar=2}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-09T08:31:24.827

您可以使用带有参数的匿名方法：

```
int arg = 5;

string temp = ((Func<int, string>)((a) => { return a == 5 ? "correct" : "not correct"; }))(arg); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-12T06:41:55.287

**匿名方法可以使用 func 委托返回值。这是一个示例，我展示了如何使用匿名方法返回值。**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    class Program
    {

        static void Main(string[] args)
        {
            Func<int, int> del = delegate (int x)
              {
                  return x * x;

              };

            int p= del(4);
            Console.WriteLine(p);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-29T23:34:31.777

这是使用**C# 8**的另一个示例（*也可以与支持并行任务的其他 .NET 版本一起使用*）

```
using System;
using System.Threading.Tasks;

namespace Exercise_1_Creating_and_Sharing_Tasks
{
    internal static class Program
    {
        private static int TextLength(object o)
        {
            Console.WriteLine($"Task with id {Task.CurrentId} processing object {o}");
            return o.ToString().Length;
        }

        private static void Main()
        {
            const string text1 = "Welcome";
            const string text2 = "Hello";

            var task1 = new Task<int>(() => TextLength(text1));
            task1.Start();

            var task2 = Task.Factory.StartNew(TextLength, text2);

            Console.WriteLine($"Length of '{text1}' is {task1.Result}");
            Console.WriteLine($"Length of '{text2}' is {task2.Result}");

            Console.WriteLine("Main program done");
            Console.ReadKey();
        }
    }
} 
```

# ios - MonoTouch.Dialog - EntryElement 不允许编辑键入的文本

> ID：10520894
> 
> 赞同：2
> 
> 时间：2012-05-09T17:13:00.600
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我创建了一个简单的`EntryElement`“eNote”并将其添加到`Section`. 超级简单。

```
 Section secNote = new Section ("Notes");
        eNote.AutocapitalizationType = UITextAutocapitalizationType.None;
        eNote.AutocorrectionType = UITextAutocorrectionType.No;
        eNote.KeyboardType = UIKeyboardType.ASCIICapable;
        secNote.Add (eNote); 
```

我们输入这样的句子：

![在此处输入图像描述](../Images/c967dce25e63829a25fb2de02756bdf3.png)

然后，当我尝试通过点击“U”之前在“Unity”之前添加文本“我喜欢”时，输入第一个字母，但其余字母放在文本末尾。结果是我们无法编辑文本。

![在此处输入图像描述](../Images/257bd871f2bb12d0ce31c9e1b4b595b3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:56:16.837

简短的回答是，这是一个错误，应该向[Xamarin提交](https://bugzilla.xamarin.com/)

但是我确实找到了解决方法。使用程序集浏览器，您可以“借用”EntryElement 的现有实现并将 Value 属性更改为以下内容。

```
public string Value
{
    get
    {
        return this.val;
    }
    set
    {
        this.val = value;
        if (this.entry != null && value != null && !value.Equals (this.entry.Text))
        {
            this.entry.Text = value;
        }
    }
} 
```

快乐黑客！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:04:44.477

这是由[这种变化](https://github.com/migueldeicaza/MonoTouch.Dialog/commit/4cffe144f89fc9fbfe032d56e67a8583c2d641bf)引起的倒退。如果您从源代码 (github) 构建 MonoTouch.Dialog，那么您可以恢复**4cffe144f89fc9fbfe032d56e67a8583c2d641bf**提交。

除了您填写的[错误报告](https://bugzilla.xamarin.com/show_bug.cgi?id=4972)之外，相同的更改还有其他副作用，例如[#4736 。](https://bugzilla.xamarin.com/show_bug.cgi?id=4736)您应该检查这是否会影响您的应用程序（或不），以查看解决方法是否比恢复更好。

# objective-c - 标签字符串未设置

> ID：10520898
> 
> 赞同：0
> 
> 时间：2012-05-09T17:13:12.133
> 
> 标签：objective-c, cocoa

这适用于 Mac 应用程序，“setText”适用于 iOS

我通常将所有代码都填充到 AppDelegate 类中，但我正在尝试更改这一点，我认为这就是为什么我在处理如此基本的事情时遇到问题的原因。

我创建了一个名为Calculate 的新NSObject 类，并创建了一个Label 和TextField。我已将标签连接到计算类，作为一个名为“summaryLabel”的插座。

在实现类中，我将标签设置为：

```
[summaryLabel setStringValue:@"TEST"]; 
```

没发生什么事！

我不知道为什么，但就像我说的那样，我正在尝试不同的课程，所以我确定有些东西没有正确连接。有谁有想法吗？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:57:59.707

我猜你有两个`Calculate`类的实例。您可能已经在 NIB 中实例化了一个，这就是您连接插座的方式。然后你可能会使用类似的代码在代码中实例化另一个`[[Calculate alloc] init]`。这是一个不同的对象。因为它不是来自 NIB 的，所以它的插座没有连接到任何东西。

你想要一个实例。如果它真的需要连接到 NIB 中的东西，那么它通常需要在 NIB 中。（NIB 可以有一些代理对象，例如 File's Owner，它们没有在 NIB 中*实例化*，但您可以将它们连接到事物，并且当 NIB 加载时，这些连接将连接到真实对象。）

如果您还需要一种方法来引用 NIB 中的实例，那么您需要从其他东西（可能是您的应用程序委托）到该实例的出口。

* * *

更新：

好的。因此，您在 NIB 中有一个计算对象。那是一个真正的“冻干”物体。当 NIB 被加载时，该对象被重构并建立其连接。

您还可以`Calculate`通过执行类似的操作分别在代码中实例化一个对象`[[Calculate alloc] init]`，对吧？那是创建一个单独的对象。它不是 NIB 中的那个，您在 NIB 中设置的连接不会影响它。所以，它的`summaryLabel`实例变量就是`nil`.

您需要选择一种实例化对象的方法并坚持下去：

选项 1）您坚持使用`Calculate`NIB 中的对象。因此，请删除代码中分配并初始化新代码的部分。相反，只需引用加载 NIB 时创建的现有文件。你需要一个参考。因此，在您的应用程序委托上创建一个插座以指向它并在 NIB 中连接它。

选项 2）您坚持使用`Calculate`您在代码中创建的对象。所以，从你的NIB中删除一个。您在代码中创建的对象与标签没有连接，因为它不是来自 NIB。因此，您必须在代码中设置与标签的连接，就像您在代码中创建它一样。您需要对标签的引用。您可以将插座添加到应用程序委托并将其连接到标签。然后，您的应用程序委托可以`calculateObject.summaryLabel = summaryLabel;`告诉`Calculate`它已创建的对象有关标签的信息。

# javascript - 用 javascript 形成动作

> ID：10520899
> 
> 赞同：42
> 
> 时间：2012-05-09T17:13:23.970
> 
> 标签：javascript, forms

我有一个必须在提交时执行 javascript 函数的表单，然后该函数将数据发布到我的 php 发送邮件文件并发送邮件。但它只适用于火狐。表单操作在 IE 中似乎没有做任何事情，我的问题是：这是从表单操作中从外部文件调用函数的正确方法：

```
action="javascript:simpleCart.checkout()" 
```

simpleCart 是 .js 文件， checkout() 是函数。

提示赞赏，努力理解为什么它可以在 Firefox 中工作，但不能在 IE、chrome 或 safari 中工作。

```
<form name=form onsubmit="return validateFormOnSubmit(this)" enctype="multipart/form-data" action="javascript:simpleCart.checkout()" method="post"> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-09T17:19:15.910

没有广泛支持设置为 JavaScript 函数的表单操作，我很惊讶它在 FireFox 中工作。

`action`最好的方法是为您的 PHP 脚本设置表单；如果您需要在提交之前做任何事情，您可以添加到`onsubmit`

**编辑**原来你不需要任何额外的功能，这里只是一个小改动：

```
function validateFormOnSubmit(theForm) {
    var reason = "";
    reason += validateName(theForm.name);
    reason += validatePhone(theForm.phone);
    reason += validateEmail(theForm.emaile);

    if (reason != "") {
        alert("Some fields need correction:\n" + reason);
    } else {
        simpleCart.checkout();
    }
    return false;
} 
```

然后以您的形式：

```
<form action="#" onsubmit="return validateFormOnSubmit(this);"> 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-12-26T02:20:30.487

## 绝对有效。

```
 <form action="javascript:alert('Hello there, I am being submitted');">
        <button type="submit">
            Let's do it
        </button>
    </form>
    <!-- Tested in Firefox, Chrome, Edge and Safari --> 
```

因此，简短的回答是：***是***的，这是一个选择，而且是一个不错的选择。它说*“提交后，请不要去任何地方，只需运行此脚本”* - 非常中肯。

**一个小小的改进**

为了让事件处理程序知道我们正在处理哪种表单，传递 sender 对象似乎是一种显而易见的方式：

```
 <form action="javascript:myFunction(this)">  <!-- should work, but it won't --> 
```

但不是什么会有意义，而是`this`指向 Window 对象。显然`javascript:`链接存在于一个单独的范围内。因此，我建议使用以下格式，它仅多了 13 个字符，而且效果很好：

```
 <form action="javascript:;" onsubmit="myFunction(this)">  <!-- now you have it! --> 
```

...现在您可以正确访问发件人表单。（你可以写一个简单的“#”作为动作，这很常见——但它有提交时滚动到顶部的副作用。）

同样，我喜欢这种方法，因为它毫不费力且不言自明。没有“return false”，没有 jQuery/domReady，没有重型武器。它只是做它看起来做的事情。当然其他方法也行得通，但对我来说，这是武士之道。

**关于验证的说明**

只有当它们的事件处理程序返回真实的东西时，表单才会被提交`onsubmit`，因此您可以轻松地运行一些先发制人的检查：

```
 <form action="/something.php" onsubmit="return isMyFormValid(this)"> 
```

现在*isMyFormValid*将首先运行，如果它返回 false，服务器甚至不会被打扰。不用说，您也必须在服务器端进行验证，这是更重要的一个。但是为了快速方便的早期检测，这很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-07T08:42:45.397

自从提出这个问题以来已经快 8 年了，但我会冒险给出一个以前没有给出的答案。OP说这不起作用：

```
action="javascript:simpleCart.checkout()" 
```

OP 说，尽管尝试了他得到的所有好建议，但这段代码仍然失败。所以我冒险猜测一下。动作`checkout()`作为`simpleCart`类的静态方法调用；但也许`checkout()`实际上是一个**实例**成员，而不是**static**。这要看他是怎么定义`checkout()`的。

顺便说一句，`simpleCart`大概是一个类名，按照惯例，类名的首字母大写，所以让我们在这里使用那个约定。让我们使用名称`SimpleCart`。

这是一些示例代码，说明了定义`checkout()`为实例成员。这是在 ECMA-6 之前的正确方法：

```
function SimpleCart() {
    ...
}
SimpleCart.prototype.checkout = function() { ... }; 
```

许多人使用了不同的技术，如下所示。这很流行，并且有效，但我反对它，因为实例应该在 , 上定义`prototype`一次，而以下技术定义成员 on`this`并在每次实例化时重复这样做。

```
function SimpleCart() {
    ...
    this.checkout = function() { ... };
} 
```

这是ECMA-6中的一个**实例**定义，使用官方`class`：

```
class SimpleCart {
    constructor() { ... }
    ...
    checkout()    { ... }
} 
```

与ECMA-6 中的**静态**定义进行比较。区别就一个字：

```
class SimpleCart {
    constructor() { ... }
    ...
    static checkout()    { ... }
} 
```

这是旧方式的静态定义，在 ECMA-6 之前。请注意，该`checkout()`方法是在函数之外定义的。它是*函数*对象的成员，*而不是原型*对象，这就是它成为**static**的原因。

```
function SimpleCart() {
    ...
}
SimpleCart.checkout = function() { ... }; 
```

`this`由于它的定义方式，静态函数对于关键字引用的内容会有不同的概念。请注意，**实例**成员函数是使用`this`关键字调用的：

```
this.checkout(); 
```

**使用类名调用**静态成员函数：****

 **```
SimpleCart.checkout(); 
```

问题是 OP 希望将调用放入 HTML 中，它将在**全局**范围内。他不能使用关键字`this`，因为`this`它会引用全局范围（即`window`）。

```
action="javascript:this.checkout()" // not as intended
action="javascript:window.checkout()" // same thing 
```

在 HTML 中使用实例成员函数没有简单的方法。您可以结合 JavaScript 做一些事情，在类的静态范围内创建一个注册表，然后调用代理静态方法，同时将参数传递给该代理，该代理将索引提供给您的实例的注册表，然后拥有代理调用实际的实例成员函数。像这样的东西：

```
// In Javascript:
SimpleCart.registry[1234] = new SimpleCart();

// In HTML
action="javascript:SimpleCart.checkout(1234);"

// In Javascript
SimpleCart.checkout = function(myIndex) {
    var myThis = SimpleCart.registry[myIndex];
    myThis.checkout();
} 
```

您还可以将索引存储为元素的属性。

但通常更容易在 HTML 中什么都不做，而在 JavaScript 中使用`.addEventListener()`并使用该`.bind()`功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T17:26:05.493

我总是在 html 文档的头部包含 js 文件，并且它们在操作中只是调用 javascript 函数。像这样的东西：

```
action="javascript:checkout()" 
```

你试试这个？

不要忘记在 html 头中包含脚本引用。

我不知道在Firefox中起作用的原因。问候。**

# c++ - 丢失蒙皮网格

> ID：10520901
> 
> 赞同：0
> 
> 时间：2012-05-09T17:13:34.940
> 
> 标签：c++, opengl, glsl, skinning, mesh

我有点迷路了

我终于有时间在 GPU 上使用 MD5 处理蒙皮网格了——通过矩阵，我绝望地无法得到正确的结果（这该死的错误）！

所以这就是我所做的：

*   加载 MD5MESH 文件

*   构建绑定姿势网格（这一步正确完成 - 几何形状正确）

*   像这样创建 bindpose 和 inverse bindpose （注意关节被用作加载，而不是由父级转换，它们需要吗？）：

    ```
     for(unsigned int i = 0; i < this->mMatricesCount; i++)
    {
        mat4 mBoneTranslation = mat4(
                1, 0, 0, mModel->mJoints[i].mPosition.x, 
                0, 1, 0, mModel->mJoints[i].mPosition.y, 
                0, 0, 1, mModel->mJoints[i].mPosition.z, 
                0, 0, 0, 1);
        mat4 mBoneRotation = mat4(mModel->mJoints[i].mOrientation);

        mat4 mBoneMatrix = mBoneTranslation * mBoneRotation;

        this->mMatrices[i] = mBoneMatrix;
        this->mInverseMatrices[i] = inverse(mBoneMatrix);
    } 
    ```

*   加载 MD5ANIM 文件（其中每个框架关节计算为）：

    ```
     if(mAnimation->mJoints[i].mParent < 0)
                    {
                        mAnimation->mFrames[mFrameID][i].mPosition = _position;
                        mAnimation->mFrames[mFrameID][i].mOrientation = _orientation;
                    }
                    else
                    {
                        MD5FrameJoint *mParent = &mAnimation->mFrames[mFrameID][mAnimation->mJoints[i].mParent];

                        float4 rpos = rotate(mParent->mOrientation, _position);

                        mAnimation->mFrames[mFrameID][i].mPosition = rpos + mParent->mPosition;
                        mAnimation->mFrames[mFrameID][i].mOrientation = mParent->mOrientation * _orientation;                           
                    } 
    ```

*   每一帧，构建骨骼矩阵（现在最多 4 个权重不会造成问题，因为目前我在简单的镶嵌四边形的场景中只有 3 个骨骼 - 旋转错误）：

    ```
    for(unsigned int i = 0; i < this->mJoints; i++)
    {
        const mat4 mTranslate = mat4(
            1, 0, 0, this->mFramePositions[mFrame][i].x, 
            0, 1, 0, this->mFramePositions[mFrame][i].y, 
            0, 0, 1, this->mFramePositions[mFrame][i].z, 
            0, 0, 0, 1);
        const mat4 mRotate = mat4(this->mFrameOrientations[mFrame][i]);

        this->mOutput[i] = mTranslate * mRotate;
    } 
    ```

*   并计算顶点（现在在 CPU 上做，想把它移到 GPU 上）：

    ```
     for(unsigned int j = 0; j < mSkinnedModel->mVertexCount[i]; j++)
            {
                float4 mResult = float4(0, 0, 0, 0);

                float4 mPosition = float4(mSkinnedModel->mVertices[i][j].mPosition[0],
                                          mSkinnedModel->mVertices[i][j].mPosition[1],
                                          mSkinnedModel->mVertices[i][j].mPosition[2],
                                          1.0f);

                for(unsigned int k = 0; k < 4; k++)
                {
                    mResult += (mAnimatedBones[mSkinnedModel->mVertices[i][j].mBoneIndices[k]] * mPosition) * mSkinnedModel->mVertices[i][j].mBoneWeights[k];
                }

                mBuffer[j].mPosition[0] = mResult.x;
                mBuffer[j].mPosition[1] = mResult.y;
                mBuffer[j].mPosition[2] = mResult.z;
                mBuffer[j].mPosition[3] = 1.0f;
            } 
    ```

Mesh + anim 文件是正确的（将它们导出并导入 3d 建模软件，可以！）

现在我正在测试我的数学库是否还可以，到目前为止它看起来不错（矩阵求逆很好，四元数乘法也是，四元数矩阵测试......）

请不要向我指出任何文章，我已经打开了其中一些文章（包括那些在 GPU 上使用矩阵 + 源代码进行 MD5 蒙皮的文章）并找出问题所在，到目前为止，代码看起来几乎和我的一模一样。这将是一些小小的蹩脚的细节。

有人看到大师在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:46:28.073

> （大错特错）！

一张图片胜过千言万语。你没有发图片。那么，你期待什么？

```
 mat4 mBoneTranslation = mat4(
        1, 0, 0, mModel->mJoints[i].mPosition.x, 
        0, 1, 0, mModel->mJoints[i].mPosition.y, 
        0, 0, 1, mModel->mJoints[i].mPosition.z, 
        0, 0, 0, 1); 
```

这应该是OpenGL矩阵吗？OpenGL 矩阵有不同的方向，它们的布局与 DirectX 中使用的 D3DXMATRIX/D3DMATRIX 完全相同——除非你想存储所有转置的矩阵。

非转置平移矩阵：

```
 mat4 translation = mat4(
        1, 0, 0, 0, 
        0, 1, 0, 0, 
        0, 0, 1, 0, 
        x, y, z, 1); 
```

当然，非转置矩阵使用反向乘法顺序：

```
mat4 combined = rotation * translation; 
```

此外，您可以简单地复制最后一行（非转置），而不是相乘：

```
mat4 combined = rotation;
combined.rows[3] = translation.rows[3]; 
```

或列（转置）。

另外，在这部分：

```
 this->mOutput[i] = mTranslate * mRotate; 
```

您忘记将反向骨骼变换包括在计算中。Withotu 反向骨骼变换蒙皮网格将“炸毁”。

它应该是（转置矩阵）

```
 this->mOutput[i] = mTranslate * mRotate * mInverseMatrices[i]; 
```

或（对于非转置）。

```
 this->mOutput[i] = mInverseMatrices[i] * mRotate * mTranslate; 
```

* * *

- 编辑 -

您可能错误地计算了关节层次结构变换。

```
{
    MD5FrameJoint *mParent = &mAnimation->mFrames[mFrameID][mAnimation->mJoints[i].mParent];

    float4 rpos = rotate(mParent->mOrientation, _position);

    mAnimation->mFrames[mFrameID][i].mPosition = rpos + mParent->mPosition;
    mAnimation->mFrames[mFrameID][i].mOrientation = mParent->mOrientation * _orientation;                           
} 
```

这不是通常的做法。

计算每个关节的局部变换。

```
this->localTransform = positionMatrix * rotationMatrix 
```

通过将父变换和子变换相乘，计算每个关节的世界变换

```
this->worldTransform = parent->worldTransform * this->localTransform; 
```

对于根节点，世界变换是对象矩阵（平移网格）和局部变换的乘积。

```
root->worldTransform = worldMatrix * root->localTransform; 
```

*如果层次结构中的矩阵（任何矩阵）具有缩放分量，您的*方案将无法正常工作。

如果这没有帮助，那么您需要找人调试您的代码。我不免费进行调试，但不允许（AFAIK）在 SO 上提供“自由职业”服务。所以你必须找到其他人。

另一件事是，您必须使用可以显示动画 md5 格式并保证正确执行的应用程序，而不是使用“白点来指示”它应该在哪里“”。否则无法保证您的白点位于正确的位置。

# air - Air Native Extensions：如何分配 ByteArray 并管理其内存？

> ID：10520904
> 
> 赞同：1
> 
> 时间：2012-05-09T17:13:51.757
> 
> 标签：air, air-native-extension

我正在考虑编写一个基于 C 的 ANE 来加速我的应用程序的关键部分。它应该接收一个带有数据的 ByteArray，进行一些处理，然后返回一个不同的 ByteArray。

输出 ByteArray 将由我的 ANE 的 C 端创建（和 malloc'd）。我的问题是：

是否有可能做到这一点以及如何做到这一点？（Adobe 网站上的例子很差；它只是修改了一个输入 ByteArray，甚至没有改变它的大小）

如果我设法这样做，那么 AS 端是否会负责通过正常的垃圾回收释放返回对象的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:51:26.387

思路是在AS3端传入一个空`ByteArray`，在C端操作对象。

您不能从 C 端返回 a `ByteArray`（或`BitmapData`就此而言），因为它作为 a 存在于 C 端，与API 期望您返回的`struct`不兼容。`FREObject`

# xcode - iPad EXC_BAD_ACESS 即使在模拟器上运行良好

> ID：10520906
> 
> 赞同：0
> 
> 时间：2012-05-09T17:13:55.733
> 
> 标签：xcode, ipad, memory, memory-leaks

好的，所以我遇到了一个错误，我相信这是与内存管理相关的错误，但让我感到困惑的是它没有指向任何特定的东西。该程序在模拟器上运行 100% 正常，但每当我在实际设备上运行它时，它就会加载，但是当我点击“开始”按钮启动程序时会崩溃。有谁知道我可以如何尝试诊断这个问题？

哦，还有一件事，当我尝试在“仪器”下运行它以检查内存泄漏和分配错误时，它会给我提示音，说明有问题，并且不会让我运行程序进行记录。

![崩溃截图](../Images/08366a62f8e8df0b1f753dbf8a9f53e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:09:36.030

肯·托马斯是对的。（见上面的评论）我发现了一堆要调试的 NSLogs 的错误。

# ios - 无论如何确定 webViewDidFinishLoad: 之外的 UIWebView 的高度吗？

> ID：10520908
> 
> 赞同：3
> 
> 时间：2012-05-09T17:14:02.223
> 
> 标签：ios, uiwebview

我有一个`UIWebView`里面的`UITableViewCell`。单元格的高度基于 Web 视图的高度，因此我需要知道在将 HTML 字符串加载到其中后 Web 视图的高度。

无论如何，在`webViewDidFinishLoad:`调用之前确定 web 视图的高度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:01:28.317

恐怕没有办法。`webViewDidFinishLoad:`在 HTML 完全加载后立即调用。要确定高度，HTML 必须完全由 UIWebView 呈现。这只能在加载 HTML**后开始。**

事实上，情况可能更糟。依赖于`webViewDidFinishLoad:`确定 HTML 的高度可能会导致不同的结果，因为 HTML 可能仍然需要在`webViewDidFinishLoad:`已经被调用时呈现。

为确保高度正确，您可以使用我刚才在我的博客中描述的以下[方法。](http://www.pixeldock.com/blog/set-the-height-of-a-uiwebview-to-the-height-of-its-html-content/)

# c# - 递归控件查找器将文本框返回为文字

> ID：10520911
> 
> 赞同：0
> 
> 时间：2012-05-09T17:14:12.690
> 
> 标签：c#, asp.net

所以我一直在使用这段代码一段时间，其中一个表单有多个用户填写的控件，例如，文本框、下拉列表、单选按钮等......它递归地找到它们，然后存储结果值在 XML 文档中。但是，我遇到了一个问题，即数据库中的值（存储为 XML，每个控件作为一个单独的节点）不完整。在做了一些调查之后，我消除了我的 XML 模板和数据库的配置问题。

然后我继续将调试器附加到 IIS 工作进程，发现递归函数由于某种原因将控件返回为 System.Web.UI.LiteralControl 而不是 Sytem.Web.UI.WebControls.TextBox 就像它有一个过去一百万次。

ASP.NET 表单：

```
<div class="field">
                <label>
                    <asp:RequiredFieldValidator Text="*" ID="ValidateCompanyName" runat="server" ErrorMessage="<%$ AppSettings: ValidateCompanyName %>"
                    ControlToValidate="ControlCompanyName" CssClass="requiredField" SetFocusOnError="True">
                    </asp:RequiredFieldValidator>
                    <asp:Literal ID="ControlFieldCompanyName" runat="server" Text="<%$ AppSettings: FieldCompanyName %>" />
                </label>
                <asp:TextBox ID="ControlCompanyName" runat="server" CssClass="form" />
                <br>
            </div> 
```

递归控制函数：

```
public static Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id)
        return root;

    foreach (Control ctl in root.Controls)
    {
        Control foundCtl = FindControlRecursive(ctl, id);

        if (foundCtl != null)
            return foundCtl;
    }

    return null;
} 
```

我想也许它是第一个表单控件存在问题，所以我在行为不端的控件之前放置了一个隐藏的文本框，并带有一些默认文本......仍然不行。然后我决定将控件的名称更改为“ControlCompany”，并开始将其作为 System.Web.UI.TextBox 返回。

它让我难过。

更新：http: [//i.stack.imgur.com/JdtiX.png](http://i.stack.imgur.com/JdtiX.png)

UPDATE2：它与母版页有关。从表单中删除了引用并将递归函数更改为仅迭代 Page 而不是 Page.Master。

```
FormToEmailHandler.ProcessForm(Page.Master, contactMethod, pageName, escapedEmailAddress, escapedContactName, true); 
```

变成：

```
FormToEmailHandler.ProcessForm(Page, contactMethod, pageName, escapedEmailAddress, escapedContactName, true); 
```

和

```
public static XmlDataDocument ProcessForm(
    MasterPage master,
    string contactMethod,
    string pageName,
    string escapedEmail,
    string escapedName,
    bool processAll) 
```

变成：

```
public static XmlDataDocument ProcessForm(
    Page master,
    string contactMethod,
    string pageName,
    string escapedEmail,
    string escapedName,
    bool processAll) 
```

更新 3：

下面是 XML 处理代码，只是为了展示它如何与递归函数集成。

```
public static XmlDataDocument ParseFormIntoXml(XmlDataDocument xmlTemplate, Control root)
{
    XmlNode nodeContact = xmlTemplate.SelectSingleNode("/Contact");
    if (nodeContact != null)
    {
        foreach (XmlNode thisNode in nodeContact.ChildNodes)
        {
            string controlToFind = thisNode.Name;

            switch (controlToFind)
            {
                case "DateTime":
                    thisNode.InnerText = DateTime.Now.ToString(CultureInfo.InvariantCulture);
                    break;
                case "ReferringLink":
                    thisNode.InnerText = CheckReferer(HttpContext.Current);
                    break;
                default:
                {
                    Control thisControl = FindControlRecursive(root, controlToFind);

                    if (thisControl != null)
                    {
                        string controlType = thisControl.GetType().ToString();

                        switch (controlType)
                        {
                            case "System.Web.UI.WebControls.TextBox":

                                var thisBox = (TextBox) thisControl;
                                thisNode.InnerText = thisBox.Text;

                                break;

                            case "System.Web.UI.WebControls.DropDownList":

                                var thisList = (DropDownList) thisControl;
                                thisNode.InnerText = thisList.SelectedItem.Text;

                                break;

                            case "System.Web.UI.WebControls.ListBox":

                                var thisListBox = (ListBox) thisControl;
                                thisNode.InnerText = thisListBox.SelectedValue;

                                break;

                            case "System.Web.UI.WebControls.RadioButtonList":

                                var thisRadioList = (RadioButtonList) thisControl;
                                thisNode.InnerText = thisRadioList.SelectedValue;

                                break;

                            case "System.Web.UI.WebControls.CheckBoxList":

                                var thisCheckList = (CheckBoxList) thisControl;

                                HttpContext.Current.Response.Write("<hr/>");

                                foreach (
                                    ListItem thisCheckBox in
                                        thisCheckList.Items.Cast<ListItem>().Where(
                                            thisCheckBox => thisCheckBox.Selected))
                                    thisNode.InnerText = string.Format(
                                        "{0}{1};", thisNode.InnerText, thisCheckBox.Value);

                                thisNode.InnerText = thisNode.InnerText.TrimEnd(';');

                                break;

                            case "System.Web.UI.WebControls.HiddenField":

                                var thisHidden = (HiddenField) thisControl;
                                thisNode.InnerText = thisHidden.Value;

                                break;
                        }
                    }
                }
                    break;
            }
        }
    }

    return xmlTemplate;
} 
```

更新 4：似乎是构建缓存问题。詹姆斯的代码现在可以工作了。然后我修改它不工作......它仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:13:42.347

好吧，我之前的错误。我的大脑今天一定不能正常运作。

首先，您原来的递归函数应该可以正常工作。我为自己是个白痴而道歉。现在有了更多信息，您遇到的问题可能与以下几件事之一有关：

1.  您在调用该函数时指定了错误的根容器。控件所在的位置 ( `Page`, `Master`) 应该是您开始搜索的根容器。
2.  您提到可能存在缓存问题 - 这是有道理的，而且您很可能已经找到了正确的解决方案。

我认为禁用此页面上的缓存是有意义的，您可以通过在页面加载事件中添加以下内容来做到这一点：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore(); 
```

您还可以通过向页面添加以下元标记来实现此目的：

```
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache"> 
```

这应该确保逻辑在它应该运行的时候运行。一旦我们知道逻辑一直在运行，如果您仍然遇到问题，我们需要进一步研究控件所在的位置与您正在搜索的位置。

# jquery - Jqgrid 获取 postData

> ID：10520912
> 
> 赞同：0
> 
> 时间：2012-05-09T17:14:14.430
> 
> 标签：jquery, jquery-plugins, jqgrid, jqgrid-asp.net, jqgrid-php

我只想从 jqgrid 导出数据。

所以基本上我已经有一个包含数据的绑定网格，我想将数据作为 json 字符串获取，这样我就可以`BindGridModel(data)`稍后调用并绑定数据，而无需仅从客户端返回服务器。

如何将数据作为 json 字符串获取，以便稍后我可以将其作为数据提供给网格？

这是我的网格配置：

```
function BindGridModel(data) {
    $('#jqgInventory').jqGrid({
        autowidth: true,
        caption: 'Inventory',
        datatype: 'json',
        forceFit: true,
        gridview: true,
        height: 500,
        hidegrid: false,
        ignoreCase: true,
        loadui: 'disable',
        pager: '#pager',
        mtype: 'post',
        rowNum: 25,
        shrinkToFit: true,
        url: '/MCI/Inventory/Inventory/GetIndexGridData',
        viewrecords: true,
        postData: {
            modelView: JSON.stringify(model),
            __RequestVerificationToken: $('[name="__RequestVerificationToken"]').val()
        },
        beforeRequest: function() {
            $('#gridScript').block();
        },
        beforeSelectRow: function(rowid, e) {
            return false;
        },
        gridComplete: function() {
            $('#lblVehicleCount').html($('#jqgInventory').getGridParam('records'));
            $('#gridScript').unblock();
            Inventory.modifyGridCellClick();
        },
        colModel: [
            {
            align: 'center',
            name: 'Select',
            label: 'SEL',
            title: true,
            width: 20,
            index: 'Select'},
        {
            align: 'left',
            name: 'Photo',
            hidden: false,
            label: 'PHOTO',
            stype: 'text',
            sortable: false,
            sorttype: 'text',
            title: true,
            width: 100,
            index: 'Photo'},
        {
            align: 'left',
            name: 'Information',
            hidden: false,
            label: 'INFO',
            stype: 'text',
            sortable: false,
            sorttype: 'text',
            title: true,
            width: 100,
            index: 'Information'},
        {
            align: 'right',
            name: 'Price',
            hidden: false,
            label: 'PRICE',
            stype: 'text',
            sortable: true,
            sorttype: function(cellValue) {
                return CustomGridSortByIntegerAsString(cellValue);
            },
            title: true,
            width: 50,
            index: 'Price'},
        {
            align: 'right',
            name: 'Mileage',
            hidden: false,
            label: 'MILEAGE',
            stype: 'text',
            sortable: true,
            sorttype: function(cellValue) {
                return CustomGridSortByIntegerAsString(cellValue);
            },
            title: true,
            width: 25,
            index: 'Mileage'},
        {
            align: 'right',
            name: 'Age',
            hidden: false,
            label: 'AGE',
            stype: 'text',
            sortable: true,
            sorttype: function(cellValue) {
                return CustomGridSortByIntegerAsString(cellValue);
            },
            title: true,
            width: 50,
            index: 'Age'},
        {
            name: 'VehicleKey',
            hidden: true,
            label: 'VEHICLEKEY',
            width: 50,
            index: 'VehicleKey'}
        ],
        data: data
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:05:03.687

在[loadComplete](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)事件中，您可以访问绑定到网格的数据，并且可以对其进行 JSON 字符串化。我通常将其设置为 Jquery 数据属性，以便我可以在事件之外访问它。

```
loadComplete: function(data) {
    $('#gridid').data('jqdata', data);//JSON stringify the data 1st if you need to
}, 
```

然后，您可以稍后通过以下方式访问该数据：

```
$('#gridid').data('jqdata'); 
```

# c# - 用于在控件线程上调用的扩展实用程序

> ID：10520919
> 
> 赞同：1
> 
> 时间：2012-05-09T17:14:44.920
> 
> 标签：c#, user-interface, multithreading

我试图创建一个通用的实用程序，用于在主线程上调用。以下是我想出的 - 这样做有什么问题吗？检查 IsHandleCreated 和 IsDisposed 是多余的吗？Disposed时，IsHandleCreated会被设置为false吗？（因为这是布尔的默认值）

```
 public static void InvokeMain(this Control Source, Action Code)
    {
        try
        {
            if (Source == null || !Source.IsHandleCreated || Source.IsDisposed) { return; }
            if (Source.InvokeRequired)
            {
                Source.BeginInvoke(Code);
            }
            else
            {
                Code.Invoke();
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }    
    } 
```

先谢谢了！威廉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:34:49.547

我是从头顶上回答的，如果有任何错误，请见谅；

您不应该捕获异常，除非您期望它们并且知道如何在它们被抛出的情况下做出反应，如果不是这种情况最好让它们冒泡，直到它们到达您记录它/显示的常见应用程序错误处理程序消息什么的。

如果控件为空/未初始化，还返回意味着您将隐藏一个可能的错误，您为什么要这样做？我非常喜欢调用失败而不是不做任何事情就返回，如果你想防止出现 NullPointer 异常，那么如果控件为 null，你应该自己引发异常（作为 ArgumentNullException）

```
public static void Invoke(this Control control, Action action)
{
    if (control == null)
        throw new ArgumentNullException("control");

    if (control.InvokeRequired)
    {
        control.Invoke(action);
        return;
    }

    action();
}

public static T Invoke<T>(this Control control, Func<T> action)
{
    if (control == null)
        throw new ArgumentNullException("control");

    if (control.InvokeRequired)
        return (T)control.Invoke(action);

    return action();
} 
```

# facebook - 谷歌元标签 vs 元标签打开 facebook 图表

> ID：10520926
> 
> 赞同：2
> 
> 时间：2012-05-09T17:15:26.747
> 
> 标签：facebook, seo, facebook-opengraph, meta-tags

我有一个大型网站，我对元标记有疑问。

例如，我`meta title, description and keywords`一直都知道，这些标签对于 SEO 来说是必不可少的。

有了 facebook 新的开放图，我的脑海里有了这个：

```
<meta property="og:title" content="Advertising">
<meta property="og:description" content="description advertising">
<meta property="og:type" content="website">
<meta property="og:url" content="url">
<meta property="og:site_name" content="mi_site_name">
.
.
.
and more meta og: if you want add more.... 
```

我的问题是：

我可以同时使用（谷歌的元标记和 facebook 的元标记打开图）吗？它如何影响seo？如果您添加`og meta tags`? 最好使用 google 的 meta 关键字还是使用 facebook 的 open graph？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T09:30:20.930

可以同时使用两者，但请注意不要创建可能导致奇怪结果的冲突元。

根据我自己的经验，Google 会在其索引中使用 og:title，这意味着在创建`<title>`与`<meta>`.

作为我使用过的项目的一部分

```
<meta property="og:title" content="Key and Word | XYZ"> 
```

和

```
<title>SEO Friendly Intro - Key and Word | XYZ</title> 
```

令我惊讶的是，谷歌突然将网站结果显示为：*Key and Word | XYZ*而不是*SEO 友好介绍 - 关键字和词 | XYZ*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T17:20:24.507

您可以在同一页面中包含 Google 和其他搜索引擎以及 Facebook 的元标记，而不会影响另一个。拥有 Facebook 元标签不会影响您的排名（就此而言，常规元标签也不会）或让您受到惩罚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T14:10:57.977

Google 使用 og:title 和 og:content 并且优先于标题和描述，尽管首选方式是使用[schema.org](http://schema.org/docs/gs.html)

[https://developers.google.com/+/web/snippet/](https://developers.google.com/+/web/snippet/)

> 包含链接的 Google+ 帖子会呈现预览或片段，其中包含页面标题、页面简要说明和缩略图。这些数据片段以四种方式之一从共享 URL 的内容中提取，按优先顺序列出：
> 
> *   Schema.org 微数据（推荐）
> *   开放图协议
> *   标题和元“描述”标签
> *   页面内容的最佳猜测（不推荐）

我确信 facebook 将能够像 og:title 和 og:content 一样有效地阅读这些内容。

# python - 为什么要使用集合进行列表比较？

> ID：10520935
> 
> 赞同：7
> 
> 时间：2012-05-09T17:15:58.703
> 
> 标签：python

我只是在寻找一种计算两个列表差异的方法时阅读了另一个用户问题。

[Python，计算列表差异](https://stackoverflow.com/questions/6486450/python-compute-list-difference)

我的问题是我为什么要这样做

```
def diff(a,b):
    b = set(b)
    return [aa for aa in a if aa not in b] 
```

而不是做

```
def diff(a,b):
    tmp = []
    for i in a:
        if(i not in b):
            tmp.append(i)
return tmp 
```

编辑：刚刚注意到第二个 diff 函数实际上返回了相似之处。现在应该是正确的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T17:20:30.910

仅从算法的角度来看，它需要`O(n)`构造集合并`O(n)`进行列表理解（因为测试一个元素是否包含在集合中是`O(1)`）。但是在第二个示例中，需要`O(n^2)`遍历两个列表。因此，无论使用哪种编程语言，第一种方法都更胜一筹。

此外，python 中的列表推导本质上比 for 循环更快。这进一步降低了常数因子（并且也显着降低了）。原因可以在我在这里引用的[这篇文章中进行总结：](http://mail.python.org/pipermail/python-list/2010-May/1243754.html)

> 列表推导只能由表达式而不是语句组成这一事实是一个相当大的因素，因为每次迭代在幕后所需的工作量要少得多。另一个因素是列表推导的底层迭代机制比执行循环更接近 C 循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T17:19:50.240

这两个选项之间的主要区别在于，使用的选项`set`渐近效率更高。

在相当有利的条件下，可以及时查找集合中的一个项目`O(1)`；在列表中查找项目需要`O(n)`时间。

第二个不太重要的区别是一个版本使用列表推导，而另一个版本使用`for`循环。列表推导倾向于产生更紧凑的代码。它们也往往更有效率（尽管如果性能是一个问题，获得准确图片的唯一方法是运行基准测试）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T17:17:46.200

在创建列表时，列表理解通常被认为比使用常规列表操作更有效。如果内存是一个问题，您可能想要使用生成器来代替。

[这](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Loops)提供了一些关于`for`-loops`map`和`list comprehension`. @benhoyt 还提供了一个有用的[链接](https://gist.github.com/2647005)，比较循环与列表理解。

但是，请注意，如果性能是一个特定问题，可能值得您花时间/基准测试您的各种选项，以便为您的特定要求选择最佳选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T17:19:25.013

使用集合通常更快，因为它只需要迭代`b`一次，而您的示例必须`b`为`a`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-10T11:21:53.177

我做了一些测试：

test_lists.py

```
a = range(1, 1000)
b = range(2, 1002)

tmp = []
for i in a:
    if(i not in b):
        tmp.append(i) 
```

test_set_list_comprehensions.py

```
a = range(1, 1000)
b = range(2, 1002)

b = set(b)
[aa for aa in a if aa not in b] 
```

测试集.py

```
a = range(1, 1000)
b = range(2, 1002)
list(set(a).difference(set(b))) 
```

这就是 timeit 所说的：

```
~$ python -m timeit 'import test_lists'
1000000 loops, best of 3: 0.671 usec per loop
~$ python -m timeit 'import test_set_list_comprehension'
1000000 loops, best of 3: 0.766 usec per loop
~$ python -m timeit 'import test_set'
1000000 loops, best of 3: 0.656 usec per loop 
```

所以最好的似乎是：

测试集.py

```
a = range(1, 1000)
b = range(2, 1002)
list(set(a).difference(set(b))) 
```

# javascript - 如何在 jQuery 的 iframe 中添加脚本元素

> ID：10520938
> 
> 赞同：0
> 
> 时间：2012-05-09T17:16:13.430
> 
> 标签：javascript, jquery

我有一个带有一些 JavaScript 代码的父文档和 iframe，可以`script`在下面添加一个元素`iframe`：

```
var script = window.document.createElement('script');
script.src = '/jquery.myPlugin.js';
window.frames['test'].document.head.appendChild(script); 
```

如何为 jQuery 重写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:56:33.387

```
var $script = $('<script></script>').attr('src', '/jquery.myPlugin.js');
$('head', $('iframe[name=test]').get(0).contentWindow.document).append($script); 
```

# google-maps - 使用 Google Maps v3 为集群标记创建 InfoWindow

> ID：10520940
> 
> 赞同：7
> 
> 时间：2012-05-09T17:16:21.997
> 
> 标签：google-maps, label

我正在开发一个地图，该地图将聚集针脚以防止针脚过于拥挤，但我想创建一个 infoWindow，当我单击标记时将列出所有标记，我试图获得一些帮助，发现我可以使用marker.getTitle() 但这对我没有帮助，因为我使用的是 makrewithLable 对象而不使用标题，我的问题是为什么要向标记添加标题，或者我更喜欢使用标签而不是在信息窗口中列出它们。这是我的工作的副本。

```
google.setOnLoadCallback(initialize);
var globalMarker = [];
var map;

  function initialize() {
    var center = new google.maps.LatLng(45.4214, -75.6919);

    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      center: center,
      disableDoubleClickZoom: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];
    var infowindow = new google.maps.InfoWindow();
    for(i=0; i<50; i++) {
    var latLng = new google.maps.LatLng(center.lat() + Math.random() - 0.5, center.lng() + Math.random() - 0.5);
    //var latLng = new google.maps.LatLng(45.4214, -75.6919)
     markers[i] = new MarkerWithLabel({
       position: latLng,
       draggable: true,
       raiseOnDrag: true,
       map: map,
       labelContent: "Marker ID = "+i,
       labelAnchor: new google.maps.Point(30, 0),
       labelClass: "labels", // the CSS class for the label
       labelStyle: {opacity: 0.75}
     });
      markers.push(markers);
    makeDiv(i, 15, "Marker #");
     google.maps.event.addListener(markers[i], 'click', function(e) {
    infowindow.setContent('Marker postion: '  + this.getPosition());
    infowindow.open(map, this);});
    }
    var clusterOptions = { zoomOnClick: false }
    var markerCluster = new MarkerClusterer(map, markers, clusterOptions);
    globalMarker = markers.slice();
    google.maps.event.addListener(markerCluster, 'clusterclick', function(cluster) {
var content = '';

// Convert lat/long from cluster object to a usable MVCObject
var info = new google.maps.MVCObject;
info.set('position', cluster.center_);

//----
//Get markers
var markers = cluster.getMarkers();

var titles = "";
//Get all the titles
for(var i = 0; i < markers.length; i++) {
    titles += markers[i].getTitle() + "\n";
}
//----

infowindow.close();
infowindow.setContent(titles); //set infowindow content to titles
infowindow.open(map, info);
});
  }

  function makeDiv(index, zoomLevel, content) {
    document.getElementById("sidebar").innerHTML += '<div onclick="zoomIn(' + index + ',' + zoomLevel + ')">' + content + ' ' + index + '</div>';
  }

  function zoomIn(index, zoomLevel) {
    map.setCenter(globalMarker[index].getPosition());
    map.setZoom(zoomLevel);
  }
  google.maps.event.addDomListener(window, 'load', initialize); 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T18:31:59.847

关键的变化是`titles += markers[i].labelContent + "\n";`。（您可以使用点符号或`markers[i]["labelContent"]`引用您设置的任何属性）。我也改变了部分`markers.push(markers)`，当缩放改变时窗口消失（因为簇数可能会改变）其他一切看起来都很棒！

[http://jsfiddle.net/ErYub/](http://jsfiddle.net/ErYub/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map { margin: 0; padding: 0; height: 100% }

.labels {
     color: red;
     background-color: white;
     font-family: "Lucida Grande", "Arial", sans-serif;
     font-size: 10px;
     font-weight: bold;
     text-align: center;
     width: 90px;     
     border: 2px solid black;
     white-space: nowrap;
   }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
 <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn-history/r315/trunk/markerwithlabel/src/markerwithlabel_packed.js"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    <script type="text/javascript">

var globalMarker = [];
var map;

  function initialize() {
    var center = new google.maps.LatLng(45.4214, -75.6919);

    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      center: center,
      disableDoubleClickZoom: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];

    var infowindow = new google.maps.InfoWindow();
    for(i=0; i<50; i++) {
    var latLng = new google.maps.LatLng(center.lat() + Math.random() - 0.5, center.lng() + Math.random() - 0.5);
    //var latLng = new google.maps.LatLng(45.4214, -75.6919)
     marker = new MarkerWithLabel({
       position: latLng,
       draggable: true,
       raiseOnDrag: true,
       map: map,
       labelContent: "Marker ID = "+i,
       labelAnchor: new google.maps.Point(30, 0),
       labelClass: "labels", // the CSS class for the label
       labelStyle: {opacity: 0.75}
     });
      markers.push(marker);

    makeDiv(i, 15, "Marker #");
     google.maps.event.addListener(markers[i], 'click', function(e) {
    infowindow.setContent('Marker postion: '  + this.getPosition());
    infowindow.open(map, this);});
    }
    var clusterOptions = { zoomOnClick: false }
    var markerCluster = new MarkerClusterer(map, markers, clusterOptions);
    globalMarker = markers.slice();
    google.maps.event.addListener(markerCluster, 'clusterclick', function(cluster) {
var content = '';

// Convert lat/long from cluster object to a usable MVCObject
var info = new google.maps.MVCObject;
info.set('position', cluster.center_);

//----
//Get markers
var markers = cluster.getMarkers();

var titles = "";
//Get all the titles
for(var i = 0; i < markers.length; i++) {
    titles += markers[i].labelContent + "\n";
}
//----

infowindow.close();
infowindow.setContent(titles); //set infowindow content to titles
infowindow.open(map, info);

google.maps.event.addListener(map, 'zoom_changed', function() { infowindow.close() });

});
  }

  function makeDiv(index, zoomLevel, content) {
    document.getElementById("sidebar").innerHTML += '<div onclick="zoomIn(' + index + ',' + zoomLevel + ')">' + content + ' ' + index + '</div>';
  }

  function zoomIn(index, zoomLevel) {
    map.setCenter(globalMarker[index].getPosition());
    map.setZoom(zoomLevel);
  }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map"></div>
    <div id="sidebar"></div>
  </body>
</html> 
```

# asp.net - 动态数据中的日期选择器

> ID：10520943
> 
> 赞同：0
> 
> 时间：2012-05-09T17:16:37.790
> 
> 标签：asp.net, asp.net-dynamic-data

任何帮助表示赞赏。

我是动态数据的新手。我希望用户在填写日期字段时能够使用 datepicker。我有一个日期选择器组件，它是一个 dll 文件。如何在动态数据中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:55:39.390

创建一个自定义动态数据过滤器（称为“DatePickerFilter”），它实现您选择的日期选择器：（jQUery、Ajax、asp.net 等）然后在列上应用元数据以引用该过滤器，如下所示

```
[FilterUIHint("DatePickerFilter")]        
[Display(Name = "Date of Enrollment", AutoGenerateField = true, AutoGenerateFilter = true)]
public object EnrollmentDate { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:47:36.507

你用的是哪个dll？我在我的项目中使用了 AjaxControlToolkit.dll。当您注册此文件时，您可以在添加到页面的每个文本框中选择“添加扩展器”，其中有 datepicker 扩展名。或者您可以使用 jquery... 来检查这一点，您可以访问[http:/ /jqueryui.com/demos/](http://jqueryui.com/demos/)

# jquery - 需要一个用于 Flash 制作的电影的 jQuery 滑块

> ID：10520951
> 
> 赞同：0
> 
> 时间：2012-05-09T17:17:04.647
> 
> 标签：jquery, jquery-plugins

伙计们，谁能指出我用 jQuery 或任何其他 js 框架制作的这种类型的滑块？

[http://jandjmediasolutions.com/nse/slider.swf](http://jandjmediasolutions.com/nse/slider.swf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:21:38.957

我不清楚您到底要什么，但如果您还没有检查过 jQuery UI，它有一些出色的 jQuery 滑块选项（请参阅右侧的示例列表）：

*   [http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

另请查看动画演示：

*   [http://jqueryui.com/demos/animate/](http://jqueryui.com/demos/animate/)

# sql - 构建查询的最佳方法？

> ID：10520953
> 
> 赞同：1
> 
> 时间：2012-05-09T17:17:12.617
> 
> 标签：sql, sql-server

首先，我想抛出我对 SQL 还很陌生。

假设您有一个包含 x 和 y 列的表，其中两者都是正整数。

问题一：

查找所有值是否存在指定`y`值的最佳方法是什么？`i``x`

问题2：

查找一组大小为 p 的值中的每个值是否存在指定`y`值的最佳方法是什么？`i``x``x`

我找到了一种方法，我在第一种情况下进行 n 次自我连接，在第二种情况下进行 p 次自我连接。但我很好奇实现这一目标的更好方法。

一个示例表：

```
x,y
---
1,a
1,b
2,a
3,b
3,c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:30:22.023

您的怀疑是正确的：使用一堆连接是非常*低效*的。
这是有效的方法：

问题1：如果前提为真，这两个值将相同

```
select 
    (select count(distinct x) from t1 where y = '1') as x_count_with_y,
    (select count(distinct x) from t1) as x_count 
```

问题2：如果前提为真，这个值将与集合中x的个数相同

```
select count(distinct x)
from t1
where y = '1'
and x in (1,2,3,5,8) 
```

# javascript - 具有轮询周期的不同 ajax 调用

> ID：10520954
> 
> 赞同：1
> 
> 时间：2012-05-09T17:17:12.503
> 
> 标签：javascript, jquery, python, ajax, web2py

让我们假设第一个 ajax 调用是立即进行的，控制器调用的函数会循环直到读取某些内容，例如：

```
def FirstAjax():
    while True:
        if something is read:
            val = something
            break
    return val 
```

在读取某些内容之前，用户按下“返回”按钮并发送新的 ajax 请求，例如：

```
def SecondAjax():
    print "Response from second ajax" 
```

第二个 ajax 调用确实被调用了（显然，我们正在谈论异步的东西 :)）但是直到 FirstAjax 循环完全完成后才会打印文本。

我希望第二个请求告诉 python 停止第一个请求的操作，但不知道如何完成！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:42:06.740

第二个 Ajax 请求可能在第一个完成之前被阻塞，因为会话文件可能被锁定。假设第一个 Ajax 请求不需要使用会话，您可以让它解锁会话：

```
def FirstAjax():
    session.forget(response) # unlock the session file
    [rest of code] 
```

有关更多详细信息，请参见[此处](http://web2py.com/books/default/chapter/29/4#session)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:26:55.783

问题已解决，这是一个特定的 web2py 问题。

```
def FirstAjax():
    session.forget(response) # unlock the session file
    [rest of code] 
```

与 web2py 对话以不锁定会话文件，以便第二个 ajax 可以立即启动。另一种方法是设置：

```
session.connect(request, response, db) 
```

在您的模型中，这意味着会话不会保存在文件中，而是保存在您的 DAL“db”中，因此该会话不会被锁定。

这两种解决方案对于我的需要是相同的。

在我的情况下，我还需要在按下后退按钮时进行设备释放，只需添加一个要在轮询周期中检查的标志，例如：

```
def FirstAjax():
    session.forget(response) # unlock the session file
    HSCAN.SetLeave(False)
    HSCAN.PollingCycle()
    #Rest of code    

def SecondAjax():
    HSCAN.SetLeave(True)
    #Rest of code 

class myHandScanner():
    def __init__(self):
        self.leave = False

    def SetLeave(self, leave):
        self.leave = leave

    def PollingCycle(self):
        while True:
            if self.leave:
                #Do device release
                return
            if something is read:
                val = something
                break
        #Do device release
        return val 
```

谢谢大家，希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:37:50.837

使用[芹菜](http://celeryproject.org/)。

这是过程：

1.  `FirstAjax`提出要求。Python 使用 celery 对任务进行排队。您可以让任务立即开始，也可以在几分钟/几小时/几天内开始。FirstAjax 将创建的任务的 id 发回，而任务本身则排队等待在后台执行。[使用 celery 任务 ID](http://ask.github.com/celery/faq.html#how-can-i-get-the-task-id-of-the-current-task)

2.  制作`SecondAjax`，发送任务ID。使用该任务 ID 取消任务。[如何取消芹菜任务](http://ask.github.com/celery/faq.html#can-i-cancel-the-execution-of-a-task)。

# javascript - 在新行 AJAX 中显示 JSON 结果

> ID：10520955
> 
> 赞同：1
> 
> 时间：2012-05-09T17:17:15.030
> 
> 标签：javascript, json, jquery

嗨，我正在使用 JSON 和 ajax 从数据库中检索一些数据。当我获取我需要的信息时，我希望它显示在 div 中的新行上，我将其放入。

此刻，邮政编码只是相互覆盖。

```
$.ajax({    
              url: 'process.php',
              type: 'GET',
              data: 'address='+ criterion,
              dataType: 'json',
              success: function(data) 
              {
                  jQuery.each(data, function()
                  {
                    $('#carParkResults').html("Postcode " + data[count].postcode);
                    codeAddress(data[count].postcode);
                    alert(count);
                    count++;
                  });
              },
              error: function(e) 
              {
                //called when there is an error
                console.log(e.message);
                alert("error");
              }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:21:01.063

使用 append / appendTo 将元素添加到 DOM 元素，而不覆盖元素的现有子元素。

```
 $('<p>').text("Postcode " + data[count].postcode).appendTo('#carParkResults'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:20:35.137

您需要使用 .append()，.html() 总是会替换 div 内的所有 html。

# javascript - Javascript清除框架

> ID：10520957
> 
> 赞同：0
> 
> 时间：2012-05-09T17:17:17.837
> 
> 标签：javascript

我正在使用具有 3 个框架的框架集，使用 parent.error.document.write("hi") 我写到其中一个框架，但我想从另一个框架中清除它。可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:22:33.893

在没有看到您的代码的情况下，我只能猜测可能的原因。

1.  你在`id`s 中有`<frame>`s 而不是`name`s。

2.  您已经使用`document.write()`已经为目标框架创建了内容，而没有使用`document.close()`. 在这种情况下，再次写入时不会清除文档。

3.  目标框架中的文档已从不同域加载。

如果根据上面的列表没有什么需要修复的，你可以尝试`frameTwo`使用`top.window.frameTwo.document`, 或`top.window.frames['frameTwo'].document`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:24:46.030

假设你的两个框架是这样的：

```
<frameset framespacing="0" rows="*"> 
       <frame name="frameOne" src="frame1.html">
       <frame name="frameTwo" src="frame2.html">
</frameset> 
```

从 frameOne 内部，您应该能够通过以下方式访问 frameTwo：

```
window.parent.frameTwo.document 
```

# iphone - 描边填充内的 Core Graphics 复杂形状

> ID：10520968
> 
> 赞同：1
> 
> 时间：2012-05-09T17:18:20.120
> 
> 标签：iphone, objective-c, ios, core-graphics

我正在尝试使用 Core Graphics 在我的应用程序中绘制一些形状，但在理解将多个形状合并为一个的最佳实践时遇到了一些问题。

这是我想要最终得到的形状（包括颜色）。

[圈子 http://www.myquaapps.com/help/lvl1Circle1.png](http://www.myquapps.com/help/lvl1Circle1.png)

到目前为止，我已经用正确的笔划画了一个相同大小的圆圈，如下所示：-

```
 CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextClearRect(ctx, rect);
    CGContextSetRGBFillColor(ctx, 0, 0, 0, 1);
    CGFloat red[4] = {1.0f, 0.0f, 0.0f, 1.0f};
    CGContextSetStrokeColor(ctx, red);
    CGContextSetLineWidth(ctx, 18);
    CGContextStrokeEllipseInRect(ctx, CGRectMake(9, 9, 232, 232));
    CGContextFillPath(ctx); 
```

这里的任何帮助将不胜感激！这是我第一次使用 Core Graphics，它看起来正是我所需要的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:51:50.903

花了我一点时间，但你走了（所有贝塞尔路径都是实例变量）：

编辑：使圆圈的内部透明，但要振作起来，这会很快变得丑陋！

```
#define LARGE_RADIUS 200
#define SMALL_RADIUS 160

#define RADIANS(degrees) ((degrees) / (180.0 / M_PI))

@implementation MyView
{
    UIBezierPath *largeCircle;
    UIBezierPath *orangeWedge;
    UIBezierPath *yellowWedge;
    UIBezierPath *greenWedge;
    UIBezierPath *whiteCircle;

    UIImage *image;
    void *_imageData;
}

-(void) createPaths {
    largeCircle = [UIBezierPath bezierPathWithArcCenter:self.center radius:LARGE_RADIUS startAngle:0 endAngle:RADIANS(360) clockwise:YES];
    whiteCircle = [UIBezierPath bezierPathWithArcCenter:self.center radius:SMALL_RADIUS startAngle:0 endAngle:RADIANS(360) clockwise:YES];    

    orangeWedge = [UIBezierPath bezierPath];
    [orangeWedge moveToPoint:self.center];

    double startAngle = RADIANS(45);
    double endAngle = RADIANS(135);

    [orangeWedge addLineToPoint:CGPointMake(sin(startAngle) + self.center.x, cos(startAngle) + self.center.y)];
    [orangeWedge addArcWithCenter:self.center radius:LARGE_RADIUS startAngle:startAngle endAngle:endAngle clockwise:YES];
    [orangeWedge addLineToPoint:self.center];

    startAngle = RADIANS(60);
    endAngle = RADIANS(120);

    yellowWedge = [UIBezierPath bezierPath];
    [yellowWedge moveToPoint:self.center];

    [yellowWedge addLineToPoint:CGPointMake(sin(startAngle) + self.center.x, cos(startAngle) + self.center.y)];
    [yellowWedge addArcWithCenter:self.center radius:LARGE_RADIUS startAngle:startAngle endAngle:endAngle clockwise:YES];
    [yellowWedge addLineToPoint:self.center];

    startAngle = RADIANS(75);
    endAngle = RADIANS(105);

    greenWedge = [UIBezierPath bezierPath];
    [greenWedge moveToPoint:self.center];

    [greenWedge addLineToPoint:CGPointMake(sin(startAngle) + self.center.x, cos(startAngle) + self.center.y)];
    [greenWedge addArcWithCenter:self.center radius:LARGE_RADIUS startAngle:startAngle endAngle:endAngle clockwise:YES];
    [greenWedge addLineToPoint:self.center];
}

-(void) drawPaths
{
    [[UIColor blackColor] setStroke];
    [[UIColor redColor] setFill];
    [largeCircle fill];
    [largeCircle stroke];
    [[UIColor orangeColor] setFill];
    [orangeWedge fill];
    [orangeWedge stroke];
    [[UIColor yellowColor] setFill];
    [yellowWedge fill];
    [yellowWedge stroke];
    [[UIColor greenColor] setFill];
    [greenWedge fill];
    [greenWedge stroke];

    [whiteCircle stroke];
}

-(int32_t *) pixelAt:(int) x :(int) y
{
    return &((int32_t *)_imageData)[x + (y * (int) self.frame.size.width)];
}

-(void) removeInnerCircle
{
    int32_t invisible = 0;

    int centerX = self.center.x;
    int centerY = self.center.y;

    for (int i = SMALL_RADIUS - 1; i > 0; i--) {
        float incr = (22.0 / i);

        for (float j = 0; j <= 360; j += incr) {
            float angle = RADIANS(j);

            *[self pixelAt:(sin(angle) * i + centerX) :(cos(angle) * i + centerY)] = invisible;
        }
    }
}

-(void) setUpContext
{
    size_t width  = self.frame.size.width;
    size_t height = self.frame.size.height;

    _imageData = malloc(4 * width * height);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef context = CGBitmapContextCreate(_imageData, width, height, 8, width * 4, colorSpace, kCGImageAlphaPremultipliedFirst);
    CGColorSpaceRelease(colorSpace);
    CGContextTranslateCTM(context, 0, height);
    CGContextScaleCTM(context, 1, -1);

    assert(context != NULL);

    UIGraphicsPushContext(context);

    CGContextRelease(context);
}

-(void) destroyContext
{
    CGImageRef imageRef = CGBitmapContextCreateImage(UIGraphicsGetCurrentContext());

    assert(imageRef != NULL);

    image = [UIImage imageWithCGImage:imageRef];

    UIGraphicsPopContext();

    free(_imageData);
    _imageData = NULL;
}

-(void) awakeFromNib
{    
    [self createPaths];

    [self setUpContext];

    [self drawPaths];
    [self removeInnerCircle];

    [self destroyContext];    
}

-(void) drawRect:(CGRect)rect
{
    [image drawInRect:self.frame];
}

@end 
```

~~根据 的值`SMALL_RADIUS`，您可能希望更改`j`in的增量`-removeInnerCircle`，以便它不会执行不必​​要的循环。~~

更改代码以`j`根据当前半径进行增量，因此您越接近中心，需要更改的像素就越少！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:26:32.320

我会通过创建圆形路径、设置粗线宽度，然后使用`CGContextReplacePathWithStrokedPath()`. 这将形成一条实际上是两个同心圆的新路径。

```
CGContextBeginPath(ctx);
CGRect rect = CGRectMake(9, 9, 232, 232);
CGContextAddEllipseInRect(ctx, CGRectInset(rect, 16, 16));
CGContextSetLineWidth(ctx, 32);
CGContextReplacePathWithStrokedPath(ctx); 
```

现在您可以为圆环的黑色边缘设置线条粗细和颜色并对其进行描边。这得到内部和外部黑色同心圆：

```
CGContextSetLineWidth(ctx, 32);
CGContextSetGrayStrokeColor(ctx, 0, 1);
CGContextStrokePath(ctx); 
```

设置填充颜色并填充：

```
CGContextSetRGBFillColor(ctx, 1, 0, 0, 1);
CGContextFillPath(ctx); 
```

现在剪辑到它：

```
CGContextClip(ctx); 
```

现在您可以绘制橙色、黄色和绿色的形状，它们将被剪裁到环内。我不清楚 Richard 的代码是否完全正确地处理了这些形状。他使用以圆环中心为中心的楔形，但在您的图片中，边缘似乎并不都指向中心。（此外，他画了一个白色圆圈来“擦除”内部部分，而您的图片在内部是透明的。）设置剪裁后，您可以只绘制三角形或任何最方便的方式来使这些边缘按您的方式倾斜想要它们，它们会自动被限制在环上。

# python - 监控性能和维护 python 代码性能统计的最佳方法是什么？

> ID：10520970
> 
> 赞同：0
> 
> 时间：2012-05-09T17:18:33.093
> 
> 标签：python, multithreading, performance

我正在开发一个 python 多线程守护程序，它将通过各种 API 处理数据。

我的设置是：

主守护进程：管理线程，将消息发送到线程队列。

API 线程：每个 API 一个线程。这允许我在 API #1 上启动 Task #2，而 Task #1 正在完成最终的 API。有 4 或 5 个 API（也许 6 个？）。其中一些 API 是基于 Web 的，一些是我从线程执行的 java 应用程序。

所以，有了这个，我还想设置一些东西来监控守护进程及其线程的 cpu/内存使用情况，同时它在生产中运行，我想将此信息保存在某个地方（平面文件？场外数据库？）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:00:23.360

您可以使用 **[psutil](https://code.google.com/p/psutil/)**检索正在运行的进程的信息，并使用[日志记录](http://docs.python.org/library/logging.html)模块存储想要的结果。

# ios - 如何根据 detailTextLabel.text 值对 TableViewController 的单元格进行排序？

> ID：10520982
> 
> 赞同：0
> 
> 时间：2012-05-09T17:19:23.047
> 
> 标签：ios, sorting, uitableview

我有几个单元格动态添加到 TableViewController。由于单元格是动态添加到 tableView 中的，因此我无法按升序排列它们，但只能在添加所有单元格后对它们进行排序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:50:10.083

您可以通过将 TableView 的数据写入 NSMutableArray 来实现这一点。然后，您可以使用您选择的排序算法对单元格进行排序。最后，获取数组并将其应用回表格视图！希望这有帮助！

# php - 如果设置了 cookie，是否可以开始新会话？

> ID：10520983
> 
> 赞同：0
> 
> 时间：2012-05-09T17:19:24.333
> 
> 标签：php, session, authentication, cookies, remember-me

一旦前一个会话被破坏，我想使用 cookie 开始一个新会话。

如果设置了 cookie，但没有设置会话，我可以自动创建仅使用 cookie 的新会话吗？

目前，我正在实现一个记住我的按钮。我的登录代码的一部分是

```
if($rememberme=="on"){
            $user_id=mysql_result($query_run,0,'id');
            setcookie("user_id",$user_id,time()+7200);
            $_SESSION['user_id']=$_COOKIE['user_id'];
            header('Location:front_page.php');
        }else if($rememberme==""){
            echo'ok';
            $user_id=mysql_result($query_run,0,'id');
            echo $user_id;
            $_SESSION['user_id']=$user_id;
            header('Location:front_page.php'); 
```

我需要这样做，因为如果设置了 cookie，但没有设置会话，它会在我的网站上导致各种错误。因为我在各个地方都使用了 $_SESSION['userid'] 变量。如果没有设置会话，我的许多功能都不起作用

编辑：我尝试了以下方法，但没有成功。

一旦前一个会话被破坏，我想使用 cookie 开始一个新会话。还有其他建议吗？

```
set_session_from_cookie();

function set_session_from_cookie(){
if(isset($_COOKIE['user_id'])){
    $_SESSION['user_id']=$_COOKIE['user_id'];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:49:50.770

我建议您对“记住我”功能使用不同的方式。

您可以检查是否选中了“记住我”复选框，然后生成唯一密钥和密钥并将密钥放入 cookie 和数据库中的某些用户行中。

现在，在页面顶部的某个地方，检查 cookie，然后如果需要，设置会话。

## 例子

```
if(isset($_COOKIE["c_key"]) && !isset($_SESSION["userId"])) 
{ 
     /*
      * Here check for users matching $_COOKIE["c_key"] in database and get the userId
      */
     $_SESSION["userId"] = $user_data["userId"]; 
} 
```

并在任何地方继续使用会话。

# c - Scheme和C一起工作

> ID：10520987
> 
> 赞同：4
> 
> 时间：2012-05-09T17:19:30.417
> 
> 标签：c, scheme

有没有办法让 C 运行方案程序？我知道这两种语言，并希望以 C 的速度使用方案的逻辑。一个基本的例子 C 使方案需要使用的列表然后方案返回一些东西。到目前为止，我一直在使用 DrRacket 进行计划。谁能指出我正确的方向？

编辑：

看着 Caleb 的回答，我看到了 Racket CGC。你如何找到这个我有来自其网站的球拍源，我在 Ubuntu 上。我在哪里可以获得 libracket.a 和 libmzgc.a 库。我在任何地方都找不到它们。我在任何地方都看到它只是指向文章说你需要它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:29:55.227

您是否查看[过 Racket C API 文档](http://docs.racket-lang.org/inside/index.html)，尤其是标题为[将 Racket 嵌入程序](http://docs.racket-lang.org/inside/overview.html#%28part._embedding%29)的部分？那里提供了适用于 Unix、Windows 和 MacOS X 的说明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T20:48:32.853

混合 Scheme 和 C 的最简单方法是在 Scheme 中编写主程序，并且只在 C 中编写 C 中绝对需要的内容。

C 源代码编译为库，然后使用 FFI 将其导入 Racket。FFI 非常容易使用，即使您决定以相反的方式编写程序，也绝对是您应该首先检查的内容。

[FFI 简介](http://docs.racket-lang.org/foreign/intro.html)

[FFI 上的文档](http://docs.racket-lang.org/foreign/index.html)

顺便说一句 - libracket.a 和 libmzgc.a 应该与其余的 Racket 文件一起安装。我不在 Ubuntu 上，所以我不知道确切的路径。但是，您可以使用 unix 命令`find`来定位它。

如果我没记错的话，命令是：

```
find / -name libracket.a 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T21:31:23.887

大多数当前方案都有某种外部函数接口，允许您使用非方案代码。这里的很多人都比我有更多的球拍经验，所以我会让他们告诉你。

[Chicken](http://www.call-cc.org)在方案中相当独特，因为它包含一个编译器来`C`. 因此，chicken 允许您`C`使用这些直接将代码嵌入到方案程序中，`#> ... <#`并且有几个用于[与外部变量和函数交互的](http://wiki.call-cc.org/man/4/Interface%20to%20external%20functions%20and%20variables)过程。

有关详细信息，请参阅手册的“[入门](http://wiki.call-cc.org/man/4/Getting%20started)”部分。

# graph-algorithm - 无法理解算法中的 find-set(x) 是什么

> ID：10520988
> 
> 赞同：1
> 
> 时间：2012-05-09T17:19:30.863
> 
> 标签：graph-algorithm

FIND-SET(x) – 返回代表或指向包含元素 x 的集合代表的指针。

在算法中，find-set(x) 用于不相交的数据结构。我不明白这个功能的用途。假设我有一个包含 4 个顶点 a、b、c、d 的图，权重为 ab=4, bc=5, cd=6 ... find-set(u)!=find-set(v ) （其中 u,v 是图中的任何顶点）帮助我定义图中循环的出现！？？查找定义为：

```
function Find(x)
     if x.parent == x
        return x
     else
        return Find(x.parent) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:23:33.140

`Find-Set(x)`在不相交的数据结构中最常用于实现最小生成树（MST）。

如果`u`和`v`在同一个集合中，则表示它们已经**连接**。如果它们已经**连接**，则在它们之间添加*另一个*连接会创建一个**循环**。

我们可以通过说所有顶点都在它们自己不同的单元素集中来开始分析这一点。当我们在两个顶点之间建立连接时，例如`a-b`，然后我们将`a`和`b`放在同一个集合中。因此，我们需要确定它们如何在同一个集合中；因此，我们`Find-Set(x)`用来确定它们是否在同一个集合中（在您的情况下，这是一个不相交的森林实现）。

您提供的示例没有循环，因此我将添加另一个边：

## 例子

最初，假设我们有一组顶点`a`、`b`和。我们想要确定最小生成树，以便将所有三个顶点连接到同一个森林的最小边数。`c``d`

现在可用的边缘： `(a, b)`, `(c, d)`, `(b, c)`, `(d, c)`（额外的边缘是一个循环！）

*这假设您知道顶点、边和森林的定义，它们都是基本的图术语*

由于`a`和`b`目前是不同的集合，我们可以通过一种算法将它们组合起来，例如`Merge-Set(a, b)`将它们放在同一个集合中：`A=(a, b)`虽然仍然存在`c`并且`d`必须连接。*注意这里`A`是集合的名称*

我们可以看到这`(c, d)`也是可能的；所以，我们可以合并它们：`B=(c, d)`我们也有`(a, b)`. *`B`是这个不相交集的名称*

现在我们可以合并`A=(a, b)`并且`B=(c, d)`知道我们有 edge `(b, c)`。由于集合内有多个元素，我们首先通过 判断边是否必要`Find-Set(x)`。如果`Find-Set(b) == Find-Set(c)`那么我们知道我们有一个循环，即 if `A == B`。幸运的是，我们没有，因为`(b, c)`不会出现在 set`A=(a, b)`或`B=(c, d)`. 现在我们像往常一样合并它们并到达我们的 MST，它是一个集合：（`A=(a, b, c, d)`注意 B 已被删除！）。

回想一下我们的额外优势，它现在是一个循环。如果我们尝试相加`(d, c)`，我们会看到 which`d`和`c`驻留的集合是相同的 ie`Find-Set(d) == Find-Set(c)`或`A == A`since`d`并且`c`都在 set 中`A`。因此，我们可以确定这条边创建了一个循环！

# java - Windows 7 和 Solaris (Mule 3.3) 之间的 Java 信任库差异

> ID：10520989
> 
> 赞同：3
> 
> 时间：2012-05-09T17:19:32.273
> 
> 标签：java, mule, truststore

我有两个我希望在同一个 JVM 中运行的模块。两者都使用 Mule 3.3，并且都需要与特定的外部服务建立 https 连接。

模块 A 使用特定的 https 连接器：

```
<https:connector name="proxiedHttpsConnector">
    <spring:property name="proxyHostname" value="${feeds.proxy.server}"/>
    <spring:property name="proxyPort" value="${feeds.proxy.port}"/>
    <https:tls-server path="security/modulea_store" storePassword="thesecretpassowrd"/>
</https:connector> 
```

模块 B 使用使用 com.sun.jersey.client.apache.ApacheHttpClient (v 1.6) 的第三方代码。模块 B 已修改为通过相同的代理工作。

在使用 jdk1.6.0_27 在 Windows 7 上测试模块 B 时，我收到以下异常：

```
ERROR 2012-05-09 10:02:39,585 [VideoAvailable.stage1.02] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Component that caused exception is: DefaultJavaComponent{VideoAvailable.commponent.414853995}. Message payload is of type: VideoEvent
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. unable to find valid certification path to requested target (sun.security.provider.certpath.SunCertPathBuilderException)
  sun.security.provider.certpath.SunCertPathBuilder:174 (null)
2\. PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target (sun.security.validator.ValidatorException)
  sun.security.validator.PKIXValidator:323 (null)
3\. sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target (javax.net.ssl.SSLHandshakeException)
  com.sun.net.ssl.internal.ssl.Alerts:174 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/net/ssl/SSLHandshakeException.html)
4\. javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target (com.sun.jersey.api.client.ClientHandlerException)
  com.sun.jersey.client.apache.DefaultApacheHttpMethodExecutor:213 (null)
5\. Component that caused exception is: DefaultJavaComponent{VideoAvailable.commponent.414853995}. Message payload is of type: VideoEvent (org.mule.component.ComponentException)
  org.mule.component.DefaultComponentLifecycleAdapter:359 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:318)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

我可以将证书添加到模块 B 的远程服务到模块 A 的信任库，并且两个模块在 Windows 7 上都可以正常工作。

在运行 jre 1.6.0_06（我知道它很旧）的 SunOS 5.10 上运行相同的配置，会产生以下错误：

```
2012/05/08 17:42:32 | ERROR 2012-05-08 17:42:32,265 [VideoAvailable.stage1.04] org.mule.exception.DefaultMessagingExceptionStrategy: 
2012/05/08 17:42:32 | ********************************************************************************
2012/05/08 17:42:32 | Message               : Component that caused exception is: DefaultJavaComponent{VideoAvailable.commponent.6015177}. Message payload is of type: VideoEvent
2012/05/08 17:42:32 | Code                  : MULE_ERROR--2
2012/05/08 17:42:32 | --------------------------------------------------------------------------------
2012/05/08 17:42:32 | Exception stack is:
2012/05/08 17:42:32 | 1\. the trustAnchors parameter must be non-empty (java.security.InvalidAlgorithmParameterException)
2012/05/08 17:42:32 |   java.security.cert.PKIXParameters:183 (null)
2012/05/08 17:42:32 | 2\. Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty (java.lang.RuntimeException)
2012/05/08 17:42:32 |   sun.security.validator.PKIXValidator:59 (null)
2012/05/08 17:42:32 | 3\. java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty (javax.net.ssl.SSLException)
2012/05/08 17:42:32 |   com.sun.net.ssl.internal.ssl.Alerts:190 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/net/ssl/SSLException.html)
2012/05/08 17:42:32 | 4\. javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty (com.sun.jersey.api.client.ClientHandlerException)
2012/05/08 17:42:32 |   com.sun.jersey.client.apache.DefaultApacheHttpMethodExecutor:213 (null)
2012/05/08 17:42:32 | 5\. Component that caused exception is: DefaultJavaComponent{VideoAvailable.commponent.6015177}. Message payload is of type: VideoEvent (org.mule.component.ComponentException)
2012/05/08 17:42:32 |   org.mule.component.DefaultComponentLifecycleAdapter:359 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
2012/05/08 17:42:32 | --------------------------------------------------------------------------------
2012/05/08 17:42:32 | Root Exception stack trace:
2012/05/08 17:42:32 | java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
2012/05/08 17:42:32 |   at java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:183)
2012/05/08 17:42:32 |   at java.security.cert.PKIXParameters.<init>(PKIXParameters.java:103)
2012/05/08 17:42:32 |   at java.security.cert.PKIXBuilderParameters.<init>(PKIXBuilderParameters.java:87)
2012/05/08 17:42:32 |     + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
2012/05/08 17:42:32 | ******************************************************************************** 
```

两者都可以在 Windows 7 和 SunOS 上独立运行。两者都在 Windows 7 上运行良好。两者在 SunOS 上不兼容。此外，将模块 B 所需的证书添加到 /NFL/ESB/apps/jdk1.6.0_06/jre/lib/security/cacerts 和弹跳 Mule 并没有帮助。我还尝试将我的 Windows 7 JDK 配置为指向 SunOS cacerts 的副本（默认）并且没有重现 Sun 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:36:11.833

您是否有可能使用“\”作为路径分隔符，从而在 SunOS 上失败？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:59:07.340

我能够重新配置模块 A 以使用默认的信任库：

```
<https:connector name="proxiedHttpsConnector"
     http:proxyHostname="${feeds.proxy.server}"
     http:proxyPort="${feeds.proxy.port}"/> 
```

然后允许两个模块一起运行。

就主要目标而言，这很好用。我从来没有完全解开 Windows 7 和 Solaris 之间不同的信任存储初始化路径，但在这个问题上花了足够的时间，我需要继续前进。

# html - 非字符串值的 GWT Html5 存储

> ID：10520995
> 
> 赞同：1
> 
> 时间：2012-05-09T17:19:50.830
> 
> 标签：html, gwt

Html5 支持仅存储键 AND 值的字符串。

哪些方法可以打破这个限制，尤其是在 GWT 的背景下？

是否有处理这种情况的库或框架？

标准库的一些代码对此有用吗？

编辑

我想做最自然的方法：

从缓存/存储中获取/请求数据，如果不可用，则通过 GWT-RPC 请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:51:44.650

AutoBeans 非常适合这一点 - 只需定义一个 bean 接口和一个工厂接口 AutoBeans 将解决如何将数据转换为 JSON（或其他一些字符串数据）并再次返回的其余细节。

这个问题/答案讨论了如何使用 JavaScriptObject 子类和 AutoBeans 来解决这个问题：[Cache in GWT app/widget with HTML5 localStorage](https://stackoverflow.com/questions/9277593/cache-in-gwt-app-widget-with-html5-localstorage)

如果可能编码几种不同的类型，几个月前提出的答案可能会有所帮助：[Parsing JSON objects of unknown type with AutoBean on GWT](https://stackoverflow.com/questions/9234601/parsing-json-objects-of-unknown-type-with-autobean-on-gwt)

如果您正在处理来自 RPC 的数据，事情会变得有点棘手。首先，您必须考虑到 RPC 序列化机制是为单向旅行连接起来的（尽管其中有两个，每个方向一个），以防止出于安全原因在服务器上反序列化某些服务器->客户端对象。其次，请记住，每次模型更改或 RPC 接口更改时，服务器和客户端不再是一致的，因为序列化格式已被修改 - 您的应用程序的 localStorage 缓存中的数据将在一段时间后无法再读取更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T21:47:04.043

你可以试试 GWT-Storage **[https://github.com/seanchenxi/gwt-storage](https://github.com/seanchenxi/gwt-storage)**。它可以帮助您将**对象**值存储在 HTML 存储中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:28:22.890

您可以将数据序列化为 XML，然后反序列化回 POJO。

[http://x-stream.github.io/tutorial.html](http://x-stream.github.io/tutorial.html)

好吧，也许在 GWT 中使用库并不容易。

# zend-framework - 模块特定的布局插件作为 .ini 资源工作，但在引导文件中注册时不能

> ID：10520996
> 
> 赞同：0
> 
> 时间：2012-05-09T17:19:58.610
> 
> 标签：zend-framework

我目前正在为每个模块加载不同的布局文件。

我已将以下内容添加到我的 config.ini 文件中

```
; Module Support
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"

; Module-based Layout Support
resources.layout.pluginClass= "Layout_Plugin_ModuleLayout" 
```

以及以下控制器插件：

```
class Layout_Plugin_ModuleLayout extends Zend_Layout_Controller_Plugin_Layout {    

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $this->getLayout()->setLayoutPath(
            Zend_Controller_Front::getInstance()
                ->getModuleDirectory($request->getModuleName()) . '/layouts'
        );
        $this->getLayout()->setLayout('layout');
    }   
} 
```

一切正常，但我更愿意将此插件与其他插件一起注册到引导文件中。当我将此插件移动到 Bootstrap 文件并像这样注册它时：

```
 protected function _initLayouts() {
   $front = Zend_Controller_Front::getInstance();
   $front->registerPlugin(new Layout_Plugin_ModuleLayout());
 } 
```

我收到以下错误：

致命错误：在第 31 行调用 C:\workarea\web_projects\gam\trunk\website\library\Layout\Plugin\ModuleLayout.php 中非对象的成员函数 setLayoutPath()

显然，我做错了什么或者误解了这个插件是如何工作的。

编辑：最终在[http://dustint.com/post/28/per-module-zend_layout](http://dustint.com/post/28/per-module-zend_layout)使用了解决方案的修改版本。但是，我愿意接受有关此的建议。这个解决方案使用普通的控制器插件，而我怀疑我应该让我们使用布局插件类型。然而，它奏效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:38:27.647

问题是布局资源初始化了一些东西，如果你查看 Zend_Layout_Controller_Plugin_Layout 的源代码，你需要传递布局来使用，所以你可能需要在你的引导程序上这样做：

```
protected function _initLayouts()
{
     $this->bootstrap('layout');
     $this->bootstrap('frontController');
     $layout = $this->getResource('layout');

     $front = $this->getResource('frontController');
     $front->registerPlugin(new Layout_Plugin_ModuleLayout($layout));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:57:23.987

[最终在http://dustint.com/post/28/per-module-zend_layout](http://dustint.com/post/28/per-module-zend_layout)使用了解决方案的修改版本。

# java - JBoss AS 7.1 - 数据源如何加密密码

> ID：10520997
> 
> 赞同：17
> 
> 时间：2012-05-09T17:20:01.110
> 
> 标签：java, security, jboss, password-protection, jboss7.x

在 JBoss AS 5 中，我在 *-ds.xml 中定义了一个数据源，但将用户名/加密密码放在 *-jboss-beans.xml 中。

现在在 JBoss AS 7.1 中，数据源在standalone.xml 或 domain.xml 中定义。在 AS 7.1 中我应该把加密密码放在哪里？

换句话说，在 AS 7 中明文密码是如何加密和保护的？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-10T22:03:48.203

在 AS7 中，您可以使用 SecureIdentityLoginModule 添加加密的密码域。例如，您可以在standalone.xml 或 domain.xml 中定义一个安全域：

```
<security-domain name="EncryptedPassword">
  <authentication>
    <login-module code="SecureIdentity" flag="required">
      <module-option name="username" value="test"/>
      <module-option name="password" value="encrypted_password"/>
    </login-module>
  </authentication>
</security-domain> 
```

然后您可以在您的特定数据源中添加此安全域，该数据源在standalone.xml 或 domain.xml 中使用此 userid/pwd 组合：

```
 <datasource ... >
       .....
       <security>
              <security-domain>EncryptedPassword</security-domain>
       </security>
  </datasource> 
```

要加密密码本身，您可以运行此命令（请验证您的特定 AS7 下载中的 picketbox jar 和 logging jar 的版本以相应地替换）：

```
java -cp $JBOSS_HOME/modules/org/picketbox/main/picketbox-4.0.6.<beta|final>.jar:$JBOSS_HOME/modules/org/jboss/logging/main/jboss-logging-3.1.0.<some_version>.jar:$CLASSPATH org.picketbox.datasource.security.SecureIdentityLoginModule password 
```

这将返回一个加密的密码，您可以在您的安全域中使用该密码。

[您可以在此处](http://docs.jboss.org/author/display/AS7/Security+subsystem+configuration)阅读有关 JBoss AS7 安全子系统的更多信息。由于*开源摇滚*，您可以在[SecureIdentityLogin](http://source.jboss.org/browse/PicketBox/trunk/security-jboss-sx/jbosssx/src/main/java/org/picketbox/datasource/security/SecureIdentityLoginModule.java?r=276)的源代码中看到编码代码是如何工作的。`Blowfish`您会在它用于加密的源代码中注意到。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T11:50:24.243

以下是 Jboss AS-7 的完整安全域配置：

```
 <security-domains>
        <!--  Security Setting's --> 
        <security-domain name="encryptedSecurity" cache-type="default">
            <authentication>
                <login-module code="org.picketbox.datasource.security.SecureIdentityLoginModule" flag="required">
                <module-option name="username" value="user_name"/>
                <module-option name="password" value="encrypted_password"/>
                <module-option name="managedConnectionFactoryName" value="jboss.jca:service=LocalTxCM,name=dataSource-1-PoolName,dataSource-2-PoolName"/>
            </login-module>
            </authentication>
        </security-domain> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-01T19:47:04.713

谁有兴趣在 Windows 上运行它（在我的情况下是在 JBoss EAP 6.4 上......）

```
set JBOSS_HOME=C:\dev\jboss\jboss-eap-6.4
set MYPATH=%JBOSS_HOME%\modules\system\layers\base\org\picketbox\main\picketbox-4.1.1.Final-redhat-1.
jar;%JBOSS_HOME%\modules\system\layers\base\org\jboss\logging\main\jboss-logging-3.1.4.GA-redhat-2.jar;
java -classpath %MYPATH% org.picketbox.datasource.security.SecureIdentityLoginModule SecretPass

Encoded password: 13e0362237c93a9cda89f5b3da271521 
```

希望这会有所帮助，马特奥

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T15:15:57.773

在 CentOS 版本 6.3 的环境中，JBoss-EAP-6.0.0 这只适用于 code="SecureIdentity"，使用 picketbox-4.0.9.Final-redhat-1.jar 进行密码加密。

```
<security-domain name="some-ds-EncryptedPassword">
  <authentication>
    <login-module code="SecureIdentity" flag="required">
      <module-option name="username" value="username"/>
      <module-option name="password" value="encrypted_password"/>
    </login-module>
  </authentication>
</security-domain> 
```

code="SecureIdentityLogin" 给出“PB00024：访问被拒绝：未经身份验证的呼叫者：null”。

来源：[https ://docs.jboss.org/author/display/AS7/Security+subsystem+configuration](https://docs.jboss.org/author/display/AS7/Security+subsystem+configuration)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-17T11:51:44.277

使用 jars 创建简单的项目（jboss-logging-3.1.4.GA-redhat-2.jar picketbox-4.1.1.Final-redhat-1.jar picketbox-commons-1.0.0.final-redhat-3.jar picketbox -infinispan-4.1.1.Final-redhat-1.jar）并使用输入参数运行自定义类：

```
public class Test {

    public static void main(String[] args) throws Exception {
        new org.picketbox.datasource.security.SecureIdentityLoginModule()
                .main(args);

    }

} 
```

输出将是：编码密码：3d5bc094c128...