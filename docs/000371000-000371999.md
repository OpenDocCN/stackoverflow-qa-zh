# StackOverflow 问答 000371000-000371999

# configuration - Unity IOC 配置

> ID：371005
> 
> 赞同：0
> 
> 时间：2008-12-16T11:08:56.187
> 
> 标签：configuration, unity-container

我有一堂课

```
public class Broker
{
    public Broker(string[] hosts, string endPoint, string port, Type remoteType)
    {
    }
} 
```

我想使用 Unity XML 配置进行配置，我可以使用 C# 中的代码对其进行配置，如下所示，其中“容器”是我的 Unity 容器

```
 container.Configure<InjectedMembers>()
                .ConfigureInjectionFor<Broker>("myBroker",
                                                           new InjectionConstructor(hosts, endPoint, port, new InjectionParameter(typeof(IMyBrokeredObject)))); 
```

它会很高兴使用正常的统一调用来解决

container.Resolve("myBroker");

但是目前我的 xml 无法解析最终参数 IMyBrokeredObject，我得到一个解析异常，因为 Unity 正试图解析类型，只需注入类型，就像在上面的代码中那样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T17:55:01.800

您是否在配置文件中定义了类型：

```
<unity>
<typeAliases>
  <typeAlias alias="IMyBrokeredObject" type="MyAssembly.IMyBrokeredObject, MyAssembly" />
</typeAliases>
<containers>
      <container>
        <types>
          <!-- Views -->
          <type type="IMyBrokeredObject" mapTo="MyAssembly.MyBrokeredObjectImplementation, MyAssembly" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-02T15:43:02.020

但我的问题是 IMyBrokeredObject 没有可用的实现，在此背景中实际发生的是代理提供给定接口的远程对象，实际实现在其他地方。

在代码中，我可以通过提供“InjectionParameter”让容器提供代理，但我无法在 xml 配置中找到如何执行此操作。

这很棘手，因为我不希望容器提供接口的实例，而是按原样实际传递接口，“InjectionParameter”是一个值的存储，存储的值是在容器创建对象时提交的，照原样。我正在寻找的是创建 InjectionParameter 并为其赋值所需的配置 xml，如果这可能的话？

# css - Firefox 溢出：滚动调整大小问题

> ID：371007
> 
> 赞同：0
> 
> 时间：2008-12-16T11:09:25.733
> 
> 标签：css, firefox, resize, scroll, overflow

在火狐中......

```
<div id="container" style="overflow:scroll; width:400px; height:500px">
      <div id="content" style="height:500px; width:800px"/>
</div> 
```

“容器”DIV 应该有滚动条，因为 id 为“content”的 div 比它宽。

如果使用 JavaScript（见下文），我将“内容”div 的大小重置为“200px”，我希望 div“容器”上的滚动条消失。他们不会，除非我手动调整浏览器窗口的大小。

```
function Resize() {
   document.getElement("content").style.width="200px";
} 
```

我尝试通过应用 css 类来强制对容器进行回流。这没有用...

```
function Resize() {
   document.getElement("content").style.width="200px";
   document.getElement("container").className="test";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T11:14:52.320

设置`overflow: scroll;`应该强制滚动条打开。如果您希望它们随内容大小出现和消失，请尝试`overflow: auto;`

# c++ - 从 HFONT 创建修改后的 HFONT

> ID：371018
> 
> 赞同：16
> 
> 时间：2008-12-16T11:14:08.610
> 
> 标签：c++, c, winapi

我使用 Win32 API 和 C/C++。我有一个 HFONT，想用它来创建一个新的 HFONT。新字体应该使用完全相同的字体规格，只是它应该是粗体。就像是：

```
HFONT CreateBoldFont(HFONT hFont) {
    LOGFONT lf;
    GetLogicalFont(hFont, &lf);
    lf.lfWeight = FW_BOLD;
    return CreateFontIndirect(&lf);
} 
```

“GetLogicalFont”是缺少的 API（据我所知）。还有其他方法吗？最好是在 Windows Mobile 5+ 上工作的东西。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-16T11:36:10.280

您想使用[GetObject 函数](http://msdn.microsoft.com/en-us/library/dd144904%28v=vs.85%29.aspx)。

```
GetObject ( hFont, sizeof(LOGFONT), &lf ); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-16T20:54:47.487

像这样的东西 - 请注意，错误检查留给读者作为练习。:-)

```
static HFONT CreateBoldWindowFont(HWND window)
{
    const HFONT font = (HFONT)::SendMessage(window, WM_GETFONT, 0, 0);
    LOGFONT fontAttributes = { 0 };
    ::GetObject(font, sizeof(fontAttributes), &fontAttributes);
    fontAttributes.lfWeight = FW_BOLD;

    return ::CreateFontIndirect(&fontAttributes);
}

static void PlayWithBoldFont()
{
    const HFONT boldFont = CreateBoldWindowFont(someWindow);
    .
    . // Play with it!
    .
    ::DeleteObject(boldFont);
} 
```

# java - Java 侦听器必须继承自 java.util.EventListener - 为什么？

> ID：371019
> 
> 赞同：10
> 
> 时间：2008-12-16T11:14:49.683
> 
> 标签：java, events, listener

在 javadoc 中它说 EventListener 是

> “所有事件侦听器接口都必须扩展的标记接口。”

这是为什么？让自定义监听器实现EventListner有什么意义？某处对 EventListner 有什么特殊处理吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T13:11:55.673

可能被[javabeans introspection](http://java.sun.com/docs/books/tutorial/javabeans/introspection/index.html)使用。

例如，如果`extends EventListener`侦听器中缺少事件，Netbeans beaninfo 编辑器将无法识别该事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-16T11:25:03.767

仅当您想使用[EventListenerList](http://java.sun.com/javase/6/docs/api/javax/swing/event/EventListenerList.html)或[EventListenerProxy](http://java.sun.com/javase/6/docs/api/java/util/EventListenerProxy.html)时才重要。不过，我也喜欢在我自己的事件监听器接口上使用它。它使界面的目的更加清晰。

# java - 在Java中获取一系列整数的迭代器的最短方法

> ID：371026
> 
> 赞同：25
> 
> 时间：2008-12-16T11:16:22.193
> 
> 标签：java, iterator

在Java中的一系列整数上获取迭代器的最短方法是什么？换句话说，实现以下内容：

```
/** 
* Returns an Iterator over the integers from first to first+count.
*/
Iterator<Integer> iterator(Integer first, Integer count); 
```

就像是

```
(first..first+count).iterator() 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2011-07-26T10:49:00.357

此实现没有内存占用。

```
/**
 * @param begin inclusive
 * @param end exclusive
 * @return list of integers from begin to end
 */
public static List<Integer> range(final int begin, final int end) {
    return new AbstractList<Integer>() {
            @Override
            public Integer get(int index) {
                return begin + index;
            }

            @Override
            public int size() {
                return end - begin;
            }
        };
} 
```

## 编辑：

在 Java 8 及更高版本中，您可以简单地说：

```
IntStream.range(begin, end).iterator()          // returns PrimitiveIterator.OfInt 
```

或者如果您需要盒装版本：

```
IntStream.range(begin, end).boxed().iterator()  // returns Iterator<Integer> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-16T11:28:34.463

未经测试。将其映射到“min, count”作为练习留给读者。

```
public class IntRangeIterator implements Iterator<Integer> {
  private int nextValue;
  private final int max;
  public IntRangeIterator(int min, int max) {
    if (min > max) {
      throw new IllegalArgumentException("min must be <= max");
    }
    this.nextValue = min;
    this.max = max;
  }

  public boolean hasNext() {
    return nextValue <= max;
  }

  public Integer next() {
    if (!hasNext()) {
      throw new NoSuchElementException();
    }
    return Integer.valueOf(nextValue++);
  }

  public void remove() {
    throw new UnsupportedOperationException();
  }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-16T11:30:09.420

如果您真的想要最少的代码，那么 Bombe 的答案就可以了。但是，它无缘无故地吸收内存。如果你想自己实现它，它会是这样的：

```
import java.util.*;

public class IntegerRange implements Iterator<Integer>
{
    private final int start;
    private final int count;

    private int position = -1;

    public IntegerRange(int start, int count)
    {
        this.start = start;
        this.count = count;
    }

    public boolean hasNext()
    {
        return position+1 < count;
    }

    public Integer next()
    {
        if (position+1 >= count)
        {
            throw new NoSuchElementException();
        }
        position++;
        return start + position;
    }

    public void remove()
    {
        throw new UnsupportedOperationException();
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-10-31T16:27:33.763

使用 guava 框架的示例。请注意，这不会实现集合（尽管您必须阅读 ContiguousSet 实现来验证这一点）。

```
import com.google.common.collect.ContiguousSet;
import com.google.common.collect.DiscreteDomain;
import com.google.common.collect.DiscreteDomains;

class RangeIterator { 

    public Iterator<Integer> range(int start, int length) {
        assert length > 0;
        Range<Integer> dim_range = Ranges.closedOpen(start, start + length);
        DiscreteDomain<Integer> ints = DiscreteDomains.integers();
        ContiguousSet<Integer> dim = dim_range.asSet(ints);
        return dim.iterator();
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-16T11:22:14.880

直接执行您的作业：

```
List<Integer> ints = new ArrayList<Integer>();
for (int i = 0; i < count; i++) {
    ints.add(first + i);
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-20T11:17:18.280

在 java 8 中使用流 API 的示例：

```
int first = 0;
int count = 10;
Iterator<Integer> it = IntStream.range(first, first + count).iterator();
while (it.hasNext()) {
    System.out.println(it.next());
} 
```

如果没有迭代器，它可能是：

```
int first = 0;
int count = 10;
IntStream.range(first, first + count).forEach(i -> System.out.println(i)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-16T11:59:01.017

它通常被认为是传递`Collection`和朋友而不是`Iterator`（参见[这个常见问题条目](http://java.sun.com/j2se/1.4.2/docs/guide/collections/designfaq.html#8)）的好风格，所以我推荐类似的东西

```
public final class IntegerRange implements Set<Integer> {
        final LinkedHashSet<Integer> backingList;
        public IntegerRange(final int start, final int count) {
                backingList = new LinkedHashSet(count, 1.0f);
                for (int i=0; i < count; i++) {
                        backingList.set(i, start + i);
                }       
        }       
        /** Insert a bunch of delegation methods here */
} 
```

然后`.iterator()`在您需要将 an 传递`Iterator`给您正在使用的任何框架时使用。

更新：显然，这段代码并不懒惰。如果您无法承受存储（可能） 2^32-1 `Integer`s 的额外内存开销，则应该使用不同的解决方案。此外，关于类型的任何内容都不能保证范围会被排序（即使它是基于实现的）。如果您需要保证排序，您可以考虑实现[SortedSet](http://java.sun.com/j2se/1.4.2/docs/api/java/util/SortedSet.html)并使用[TreeSet](http://java.sun.com/j2se/1.4.2/docs/api/java/util/TreeSet.html)支持它，但构建范围需要更长的时间。老实说，如果您非常关心正确获取详细信息，那么寻找图书馆可能是值得的。例如， Tapestry 有一个[内部版本](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/internal/util/IntegerRange.html)。

# php - 愚蠢的 sprintf() 问题

> ID：371027
> 
> 赞同：3
> 
> 时间：2008-12-16T11:17:31.350
> 
> 标签：php, printf

如何向其中添加 SQL 通配符：

```
 sprintf("SELECT robot FROM robots WHERE robot LIKE '%s'",strtolower($user_agent)); 
```

作为

```
 sprintf("SELECT robot FROM robots WHERE robot LIKE '%%s%'",strtolower($user_agent)); 
```

爆炸成壮观的火球，

PS对不起这个相当基本的问题。这些天我正在减少我的咖啡。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-16T11:20:55.617

文字`%`被指定为`%%`，所以你想要`"... LIKE '%%%s%%'"`

# c# - C#中的带宽限制

> ID：371032
> 
> 赞同：21
> 
> 时间：2008-12-16T11:21:12.073
> 
> 标签：c#, bandwidth, throttling

我正在开发一个在后台持续发送数据流的程序，我希望允许用户设置上传和下载限制的上限。

我已经阅读了[令牌桶](http://en.wikipedia.org/wiki/Token_bucket)和[漏桶](http://en.wikipedia.org/wiki/Leaky_bucket)算法，似乎后者似乎符合描述，因为这不是最大化网络带宽的问题，而是尽可能不引人注目。

然而，我有点不确定我将如何实现这一点。一种自然的方法是扩展抽象 Stream 类以简化现有流量的扩展，但这是否不需要额外的线程参与来发送数据同时接收（漏桶）？任何有关执行相同操作的其他实现的提示将不胜感激。

此外，虽然我可以修改程序接收的数据量，但带宽限制在 C# 级别的工作情况如何？计算机是否仍会接收数据并简单地保存数据，从而有效地取消节流效果，还是会等到我要求接收更多数据？

编辑：我对限制传入和传出数据感兴趣，我无法控制流的另一端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-09T10:02:28.423

基于@0xDEADBEEF 的解决方案，我创建了以下基于 Rx 调度程序的（可测试的）解决方案：

```
public class ThrottledStream : Stream
{
    private readonly Stream parent;
    private readonly int maxBytesPerSecond;
    private readonly IScheduler scheduler;
    private readonly IStopwatch stopwatch;

    private long processed;

    public ThrottledStream(Stream parent, int maxBytesPerSecond, IScheduler scheduler)
    {
        this.maxBytesPerSecond = maxBytesPerSecond;
        this.parent = parent;
        this.scheduler = scheduler;
        stopwatch = scheduler.StartStopwatch();
        processed = 0;
    }

    public ThrottledStream(Stream parent, int maxBytesPerSecond)
        : this (parent, maxBytesPerSecond, Scheduler.Immediate)
    {
    }

    protected void Throttle(int bytes)
    {
        processed += bytes;
        var targetTime = TimeSpan.FromSeconds((double)processed / maxBytesPerSecond);
        var actualTime = stopwatch.Elapsed;
        var sleep = targetTime - actualTime;
        if (sleep > TimeSpan.Zero)
        {
            using (var waitHandle = new AutoResetEvent(initialState: false))
            {
                scheduler.Sleep(sleep).GetAwaiter().OnCompleted(() => waitHandle.Set());
                waitHandle.WaitOne();
            }
        }
    }

    public override bool CanRead
    {
        get { return parent.CanRead; }
    }

    public override bool CanSeek
    {
        get { return parent.CanSeek; }
    }

    public override bool CanWrite
    {
        get { return parent.CanWrite; }
    }

    public override void Flush()
    {
        parent.Flush();
    }

    public override long Length
    {
        get { return parent.Length; }
    }

    public override long Position
    {
        get
        {
            return parent.Position;
        }
        set
        {
            parent.Position = value;
        }
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        var read = parent.Read(buffer, offset, count);
        Throttle(read);
        return read;
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        return parent.Seek(offset, origin);
    }

    public override void SetLength(long value)
    {
        parent.SetLength(value);
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        Throttle(count);
        parent.Write(buffer, offset, count);
    }
} 
```

和一些只需要几毫秒的测试：

```
[TestMethod]
public void ShouldThrottleReading()
{
    var content = Enumerable
        .Range(0, 1024 * 1024)
        .Select(_ => (byte)'a')
        .ToArray();
    var scheduler = new TestScheduler();
    var source = new ThrottledStream(new MemoryStream(content), content.Length / 8, scheduler);
    var target = new MemoryStream();

    var t = source.CopyToAsync(target);

    t.Wait(10).Should().BeFalse();
    scheduler.AdvanceTo(TimeSpan.FromSeconds(4).Ticks);
    t.Wait(10).Should().BeFalse();
    scheduler.AdvanceTo(TimeSpan.FromSeconds(8).Ticks - 1);
    t.Wait(10).Should().BeFalse();
    scheduler.AdvanceTo(TimeSpan.FromSeconds(8).Ticks);
    t.Wait(10).Should().BeTrue();
}

[TestMethod]
public void ShouldThrottleWriting()
{
    var content = Enumerable
        .Range(0, 1024 * 1024)
        .Select(_ => (byte)'a')
        .ToArray();
    var scheduler = new TestScheduler();
    var source = new MemoryStream(content);
    var target = new ThrottledStream(new MemoryStream(), content.Length / 8, scheduler);

    var t = source.CopyToAsync(target);

    t.Wait(10).Should().BeFalse();
    scheduler.AdvanceTo(TimeSpan.FromSeconds(4).Ticks);
    t.Wait(10).Should().BeFalse();
    scheduler.AdvanceTo(TimeSpan.FromSeconds(8).Ticks - 1);
    t.Wait(10).Should().BeFalse();
    scheduler.AdvanceTo(TimeSpan.FromSeconds(8).Ticks);
    t.Wait(10).Should().BeTrue();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-05T11:18:19.900

我想出了 arul 提到的 ThrottledStream-Class 的不同实现。我的版本使用 WaitHandle 和间隔为 1 秒的计时器：

```
public ThrottledStream(Stream parentStream, int maxBytesPerSecond=int.MaxValue) 
{
    MaxBytesPerSecond = maxBytesPerSecond;
    parent = parentStream;
    processed = 0;
    resettimer = new System.Timers.Timer();
    resettimer.Interval = 1000;
    resettimer.Elapsed += resettimer_Elapsed;
    resettimer.Start();         
}

protected void Throttle(int bytes)
{
    try
    {
        processed += bytes;
        if (processed >= maxBytesPerSecond)
            wh.WaitOne();
    }
    catch
    {
    }
}

private void resettimer_Elapsed(object sender, ElapsedEventArgs e)
{
    processed = 0;
    wh.Set();
} 
```

每当带宽限制超过线程将休眠直到下一秒开始。无需计算最佳睡眠时间。

全面实施：

```
public class ThrottledStream : Stream
{
    #region Properties

    private int maxBytesPerSecond;
    /// <summary>
    /// Number of Bytes that are allowed per second
    /// </summary>
    public int MaxBytesPerSecond
    {
        get { return maxBytesPerSecond; }
        set 
        {
            if (value < 1)
                throw new ArgumentException("MaxBytesPerSecond has to be >0");

            maxBytesPerSecond = value; 
        }
    }

    #endregion

    #region Private Members

    private int processed;
    System.Timers.Timer resettimer;
    AutoResetEvent wh = new AutoResetEvent(true);
    private Stream parent;

    #endregion

    /// <summary>
    /// Creates a new Stream with Databandwith cap
    /// </summary>
    /// <param name="parentStream"></param>
    /// <param name="maxBytesPerSecond"></param>
    public ThrottledStream(Stream parentStream, int maxBytesPerSecond=int.MaxValue) 
    {
        MaxBytesPerSecond = maxBytesPerSecond;
        parent = parentStream;
        processed = 0;
        resettimer = new System.Timers.Timer();
        resettimer.Interval = 1000;
        resettimer.Elapsed += resettimer_Elapsed;
        resettimer.Start();         
    }

    protected void Throttle(int bytes)
    {
        try
        {
            processed += bytes;
            if (processed >= maxBytesPerSecond)
                wh.WaitOne();
        }
        catch
        {
        }
    }

    private void resettimer_Elapsed(object sender, ElapsedEventArgs e)
    {
        processed = 0;
        wh.Set();
    }

    #region Stream-Overrides

    public override void Close()
    {
        resettimer.Stop();
        resettimer.Close();
        base.Close();
    }
    protected override void Dispose(bool disposing)
    {
        resettimer.Dispose();
        base.Dispose(disposing);
    }

    public override bool CanRead
    {
        get { return parent.CanRead; }
    }

    public override bool CanSeek
    {
        get { return parent.CanSeek; }
    }

    public override bool CanWrite
    {
        get { return parent.CanWrite; }
    }

    public override void Flush()
    {
        parent.Flush();
    }

    public override long Length
    {
        get { return parent.Length; }
    }

    public override long Position
    {
        get
        {
            return parent.Position;
        }
        set
        {
            parent.Position = value;
        }
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        Throttle(count);
        return parent.Read(buffer, offset, count);
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        return parent.Seek(offset, origin);
    }

    public override void SetLength(long value)
    {
        parent.SetLength(value);
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        Throttle(count);
        parent.Write(buffer, offset, count);
    }

    #endregion

} 
```

# python - 有没有人尝试过 NetBeans 6.5 Python IDE？

> ID：371037
> 
> 赞同：14
> 
> 时间：2008-12-16T11:23:32.677
> 
> 标签：python, ide, netbeans

有人试过[NetBeans 6.5 Python IDE](http://en.wikipedia.org/wiki/NetBeans#Other_NetBeans_IDE_Bundles)吗？

你有什么意见？它比[PyDev](http://en.wikipedia.org/wiki/PyDev)更好/更差吗？你喜欢它吗？它如何与源代码控制工具（尤其是[Mercurial](http://en.wikipedia.org/wiki/Mercurial)）集成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-06T11:43:39.427

我将分享一些使用它很长一段时间的感受。与 Eclipse+Pydev+mercurial 中质量大致相同的东西：

1.  编辑器，代码完成
2.  调试器功能

更好的事情：

1.  自动导入
2.  配色方案（今天的挪威摇滚）
3.  Mercurial 支持（尽管它在 Eclipse 中越来越好）

更糟糕的事情：

1.  代码完成或自动导入都无法识别压缩的鸡蛋包
2.  无法识别 libdyn 包（例如 datetime）
3.  调试器在处理多处理包时遇到问题
4.  您不能从项目外部（/usr/bin/paster）选择文件作为主文件（这是我用来调试[Pylons](http://en.wikipedia.org/wiki/Pylons_%28web_framework%29)应用程序的文件）

有没有人有什么要添加到列表中的？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T04:39:53.867

BraveSirFoobar，很高兴能更多地了解您发现的问题——非常非常缓慢的部分，以及崩溃。第一次运行 IDE 时，它将索引有关您的 Python 平台、项目和库的信息 - 这样它就可以快速完成代码、稍后进入声明等 - 但一旦完成，它就不应该很慢 - 但可能会有是错误。

Mercurial 肯定应该得到很好的支持，因为 NetBeans 项目本身（以及 Solaris 和 Java）都托管在 Mercurial 存储库中。

我们计划对 Python 提供真正深入的支持，这与我们的 Ruby 支持风格非常相似。对我们的 Ruby 工作真正有帮助的一件事是我们早期采用者的反馈，所以如果您尝试使用 Python 并遇到问题，请告诉我们以便我们修复它。（这里的反馈链接：[http://wiki.netbeans.org/Python](http://wiki.netbeans.org/Python)）

-- 托尔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-01T11:26:38.563

在过去的几个月里一直在使用 PyDev 和 Eclipse 的 PyDev 扩展，迁移到 NetBeans 是一件非常愉快的事情。

无需为 PyDev 和 Eclipse 寻找所有不同的插件，NetBeans 就拥有了我需要的一切：自动完成、超快速索引搜索、样式控件导入控件，应有尽有。而且它似乎比 Eclipse（相当稳定）更不容易出错。此外，它使用的内置 Vim 之类的自动代码片段也非常棒。IMO，它击败了 Eclipse。

我上瘾了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-16T13:32:23.167

与 pydev 相比，我发现它非常非常慢，并且当我从现有资源创建项目时它崩溃（一次）。不过，它仍然是测试版。

与 SCM 的集成将与 netbeans 一样好（我只尝试过 subversion，效果很好）。

功能方面大致相同：重构、调试、代码辅助……我暂时坚持使用 pydev，恕我直言，这是一个很棒的工具。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-16T14:20:28.657

Sun 现在在内部使用 Mercurial，因此希望他们的 IDE 对它的支持将是一流的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T15:08:08.823

我不久前开始使用它，我喜欢它。我通常使用简单的编辑器 (SciTE) 进行开发，NetBeans 很适合组织较大的项目。

[在这里简要地写了](http://coreygoldberg.blogspot.com/2008/12/python-trying-out-netbeans-ide.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-09T18:28:32.953

它与 PyDev Extensions 相比如何？我最近安装了它，老实说，我无法想象自己会回到 PyDev。

不过，NetBeans 似乎很有趣，如果我还没有迷上其他几个 Eclipse 插件就好了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-26T06:22:50.783

看了这个之后，我决定继续使用 PyDev 而不是 NetBeans。

然而，最好的祝愿 NetBeans 团队获得更快和更好的 Python 支持。等不及了:)

# c# - C#中Action委托的使用

> ID：371054
> 
> 赞同：134
> 
> 时间：2008-12-16T11:38:42.350
> 
> 标签：c#, lambda, delegates, action

我正在与 C# 中的 Action Delegates 一起工作，希望能更多地了解它们并思考它们可能有用的地方。

有没有人使用过 Action Delegate，如果有，为什么？或者你能举一些可能有用的例子吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2008-12-16T13:33:40.077

这是一个小例子，展示了 Action 委托的用处

```
using System;
using System.Collections.Generic;

class Program
{
    static void Main()
    {
        Action<String> print = new Action<String>(Program.Print);

        List<String> names = new List<String> { "andrew", "nicole" };

        names.ForEach(print);

        Console.Read();
    }

    static void Print(String s)
    {
        Console.WriteLine(s);
    }
} 
```

请注意，foreach 方法迭代名称集合并`print`针对集合的每个成员执行该方法。随着我们向更实用的编程风格迈进，这对我们 C# 开发人员来说是一种范式转变。（有关其背后的计算机科学的更多信息，请阅读：[http://en.wikipedia.org/wiki/Map_(higher-order_function)](http://en.wikipedia.org/wiki/Map_%28higher-order_function%29)。

现在，如果您使用的是 C# 3，您可以使用 lambda 表达式来稍微完善一下，如下所示：

```
using System;
using System.Collections.Generic;

class Program
{
    static void Main()
    {
        List<String> names = new List<String> { "andrew", "nicole" };

        names.ForEach(s => Console.WriteLine(s));

        Console.Read();
    }
} 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2008-12-16T11:53:32.603

那么你可以做的一件事是如果你有一个开关：

```
switch(SomeEnum)
{
  case SomeEnum.One:
      DoThings(someUser);
      break;
  case SomeEnum.Two:
      DoSomethingElse(someUser);
      break;
} 
```

借助动作的强大功能，您可以将该开关变成字典：

```
Dictionary<SomeEnum, Action<User>> methodList = 
    new Dictionary<SomeEnum, Action<User>>()

methodList.Add(SomeEnum.One, DoSomething);
methodList.Add(SomeEnum.Two, DoSomethingElse); 
```

...

```
methodList[SomeEnum](someUser); 
```

或者你可以更进一步：

```
SomeOtherMethod(Action<User> someMethodToUse, User someUser)
{
    someMethodToUse(someUser);
} 
```

……

```
var neededMethod = methodList[SomeEnum];
SomeOtherMethod(neededMethod, someUser); 
```

只是几个例子。当然，更明显的用途是 Linq 扩展方法。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-12-16T11:46:16.453

MSDN 说：

> Array.ForEach 方法和 List.ForEach 方法使用此委托对数组或列表的每个元素执行操作。

除此之外，您可以将它用作接受 1-3 个参数而不返回任何值的通用委托。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-12-16T12:07:47.613

您可以对短事件处理程序使用操作：

```
btnSubmit.Click += (sender, e) => MessageBox.Show("You clicked save!"); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-12-16T11:53:02.977

我曾经在一个项目中使用过这样的动作委托：

```
private static Dictionary<Type, Action<Control>> controldefaults = new Dictionary<Type, Action<Control>>() { 
            {typeof(TextBox), c => ((TextBox)c).Clear()},
            {typeof(CheckBox), c => ((CheckBox)c).Checked = false},
            {typeof(ListBox), c => ((ListBox)c).Items.Clear()},
            {typeof(RadioButton), c => ((RadioButton)c).Checked = false},
            {typeof(GroupBox), c => ((GroupBox)c).Controls.ClearControls()},
            {typeof(Panel), c => ((Panel)c).Controls.ClearControls()}
    }; 
```

它所做的只是针对一种控件存储一个操作（方法调用），以便您可以将表单上的所有控件清除回默认值。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2008-12-16T11:56:00.833

有关如何使用 Action<> 的示例。

Console.WriteLine 具有满足的签名`Action<string>`。

```
 static void Main(string[] args)
    {
        string[] words = "This is as easy as it looks".Split(' ');

        // Passing WriteLine as the action
        Array.ForEach(words, Console.WriteLine);         
    } 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2010-04-07T14:09:46.247

我在处理非法跨线程调用时使用它例如：

```
DataRow dr = GetRow();
this.Invoke(new Action(() => {
   txtFname.Text = dr["Fname"].ToString();
   txtLname.Text = dr["Lname"].ToString(); 
   txtMI.Text = dr["MI"].ToString();
   txtSSN.Text = dr["SSN"].ToString();
   txtSSN.ButtonsRight["OpenDialog"].Visible = true;
   txtSSN.ButtonsRight["ListSSN"].Visible = true;
   txtSSN.Focus();
})); 
```

我必须感谢 Reed Copsey SO 用户 65358 的解决方案。我的完整问题是[SO Question 2587930](https://stackoverflow.com/questions/2587930/ramifications-of-checkforillegalcrossthreadcallsfalse)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-16T11:51:08.147

我将它用作事件处理程序中的回调。当我引发事件时，我传入一个以字符串为参数的方法。这是事件引发的样子：

```
SpecialRequest(this,
    new BalieEventArgs 
    { 
            Message = "A Message", 
            Action = UpdateMethod, 
            Data = someDataObject 
    }); 
```

方法：

```
 public void UpdateMethod(string SpecialCode){ } 
```

是事件 Args 的类声明：

```
public class MyEventArgs : EventArgs
    {
        public string Message;
        public object Data;
        public Action<String> Action;
    } 
```

这样我可以调用从事件处理程序传递的方法，并带有一些参数来更新数据。我用它来向用户请求一些信息。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-09T14:50:28.947

我们在测试中使用了很多 Action 委托功能。当我们需要构建一些默认对象并且稍后需要对其进行修改时。我做了一个小例子。要构建默认人（John Doe）对象，我们使用`BuildPerson()`函数。后来我们也添加了 Jane Doe，但我们修改了她的生日、姓名和身高。

```
public class Program
{
        public static void Main(string[] args)
        {
            var person1 = BuildPerson();

            Console.WriteLine(person1.Firstname);
            Console.WriteLine(person1.Lastname);
            Console.WriteLine(person1.BirthDate);
            Console.WriteLine(person1.Height);

            var person2 = BuildPerson(p =>
            {
                p.Firstname = "Jane";
                p.BirthDate = DateTime.Today;
                p.Height = 1.76;
            });

            Console.WriteLine(person2.Firstname);
            Console.WriteLine(person2.Lastname);
            Console.WriteLine(person2.BirthDate);
            Console.WriteLine(person2.Height);

            Console.Read();
        }

        public static Person BuildPerson(Action<Person> overrideAction = null)
        {
            var person = new Person()
            {
                Firstname = "John",
                Lastname = "Doe",
                BirthDate = new DateTime(2012, 2, 2)
            };

            if (overrideAction != null)
                overrideAction(person);

            return person;
        }
    }

    public class Person
    {
        public string Firstname { get; set; }
        public string Lastname { get; set; }
        public DateTime BirthDate { get; set; }
        public double Height { get; set; }
    } 
```

# perl - 如何将 mbox 文件中的消息转换为 UTF-8？

> ID：371055
> 
> 赞同：2
> 
> 时间：2008-12-16T11:40:43.453
> 
> 标签：perl, email, encoding, utf-8

我正在尝试修改以下程序以确保使用 Encode::decode() 将每个 msg 转换为 utf-8，但我不确定如何以及在何处放置它以使其工作。

```
#!/usr/bin/perl
use warnings;
use strict;
use Mail::Box::Manager;

open (MYFILE, '>>data.txt');
binmode(MYFILE, ':encoding(UTF-8)');

my $file = shift || $ENV{MAIL};
my $mgr = Mail::Box::Manager->new(
    access          => 'r',
);

my $folder = $mgr->open( folder => $file )
or die "$file: Unable to open: $!\n";

for my $msg ( sort { $a->timestamp <=> $b->timestamp } $folder->messages)
{
    my $to          = join( ', ', map { $_->format } $msg->to );
    my $from        = join( ', ', map { $_->format } $msg->from );
    my $date        = localtime( $msg->timestamp );
    my $subject     = $msg->subject;
    my $body        = $msg->decoded->string;

    # Strip all quoted text
    $body =~ s/^>.*$//msg;

    print MYFILE <<"";
From: $from
To: $to
Date: $date
Subject: $subject
\n
$body

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T19:53:59.887

脚本中的任何内容似乎都没有指定您期望输入的编码......通常这很重要，因为自动检测硬字符编码（并且通常不被编码库支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T20:44:33.280

从我怀疑你想替换的文档中

```
my $body        = $msg->decoded->string; 
```

和

```
my $body        = $msg->decoded('UTF-8')->string; 
```

虽然我不完全确定，也可能根本不重要。

# terminal - 自定义串口终端

> ID：371058
> 
> 赞同：1
> 
> 时间：2008-12-16T11:41:24.857
> 
> 标签：terminal, serial-port

我正在尝试开发一个具有内置串行端口终端的自定义应用程序，但它将能够挂起终端并以自定义命令和数据格式执行一些 I/O。

例如，当我单击“获取数据”按钮时，软件将发送一些二进制命令并获取一些二进制数据作为回报，然后对数据进行处理。并且终端将忽略所有这些事务。

正如我刚刚了解到的，仅仅从 /dev/ttyxx 写入（）和读取（）对于正确的终端连接是不够的。

在我的应用程序中包含一个简单终端的最简单方法是什么？我不想使用外部终端应用程序。我目前正在检查cutecom的源代码以从头开始实现它，但也许有一种更简单的方法。

注意：请不要建议使用 xmodem/ymodem 软件，我必须使用自定义命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T12:31:53.897

请看

[http://www.easysw.com/~mike/serial/serial.html](http://www.easysw.com/~mike/serial/serial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T12:06:08.567

你检查过[Linux IO-Port Programming mini-HowTo](http://www.faqs.org/docs/Linux-mini/IO-Port-Programming.html)吗？

# sql - 如何修改它以在连接的多端获取随机记录？

> ID：371059
> 
> 赞同：0
> 
> 时间：2008-12-16T11:41:45.183
> 
> 标签：sql, tsql, random

这是我的查询：

```
 Select Top 10 CS.CaseStudyID,
    CS.Title,
    CSI.ImageFileName
From CaseStudy CS
Left Join CaseStudyImage CSI On CS.CaseStudyID = CSI.CaseStudyID
And CSI.CSImageID in(
    Select Min(CSImageID) -- >not really satisfactory
    From CaseStudyImage
    Group By CaseStudyID
    )
Order By CS.CaseStudyID ASC 
```

而不是 min(CSImageID) 我想从我的 CaseStudyImage 表中获得与特定案例研究相对应的随机记录

任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T07:50:22.577

通常，只是`ORDER BY NEWID()`做的伎俩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T17:53:51.063

您可以使用排名函数和 newid() 来创建带有分组的随机顺序。

```
WITH CSI AS (
    SELECT CSI.CaseStudyID, CSI.ImageFileName,
        ROW_NUMBER() OVER(PARTITION BY CSI.CaseStudyID ORDER BY newid()) AS RowNumber
    FROM CaseStudyImage CSI
)
SELECT TOP (10) CS.CaseStudyID, CS.Title, CSI.ImageFileName
FROM CaseStudy CS LEFT JOIN CSI On CS.CaseStudyID = CSI.CaseStudyID
WHERE CSI.RowNumber = 1
ORDER BY CS.CaseStudyID ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T11:43:43.730

`ORDER BY RAND() LIMIT 1`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T11:46:32.087

本文[介绍](http://msdn.microsoft.com/en-us/library/aa175776(SQL.80).aspx)了 t-sql 中随机抽样的 3 种技术。这取决于您对表结构的控制程度，其中之一可能确实想要您想要的。

# ruby - 从地图构建排序部分

> ID：371064
> 
> 赞同：2
> 
> 时间：2008-12-16T11:46:24.973
> 
> 标签：ruby, collections

我有未排序的键值对映射。

```
input = {
  "xa" => "xavalue",
  "ab" => "abvalue",
  "aa" => "aavalue",
  "ba" => "bavalue",
} 
```

现在我想按键对它们进行排序，并按键的第一个字符将它们聚集成部分。与此类似：

```
output1 = {
  "a" => {
      "aa" => "aavalue",
      "ab" => "abvalue",  
  },
  "b" => {
    "ba" => "bavalue",
  },  
  "x" => {
    "xa" => "xavalue",
  },  
} 
```

1.  虽然这相对微不足道，但我正在寻找一种简洁的方式来表达在 ruby​​ 中从输入到输出 1 的这种转换。（对于 ruby​​ 标准，我的方法可能过于冗长）

2.  您可能还注意到地图（通常）没有排序。因此，除非我手动对键进行排序并包装对地图的访问，否则上述数据结构将无法正常工作。那么我将如何在 ruby​​ 中创建一个关键的有序映射呢？或者已经有一个了？

3.  如果有序映射方法不是那么容易，我将不得不将最终结构更改为如下所示。我再次寻找一些简洁的 ruby​​ 代码来从输入到输出 2。

.

```
output2 = [
  {
    "name" => "a",
    "keys" => [ "aa", "ab" ],
    "values" => [ "aavalue", "abvalue" ],
  },
  {
    "name" => "b",
    "keys" => [ "ba" ],
    "values" => [ "bavalue" ],
  },
  {
    "name" => "x",
    "keys" => [ "xa" ],
    "values" => [ "xavalue" ],
  }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T14:10:34.137

据我所知，Ruby 中没有排序哈希/映射的概念，因此您仅限于使用旧数组。您可能希望从以下代码开始：

```
output = input.inject({}) { |acc, pair|
  letter = pair.first[0].chr
  acc[letter] ||= {}
  acc[letter][pair.first] = pair.last
  acc
}.sort 
```

这将为您提供表单中的数据结构

```
[ ["a", {"aa"=>"aavalue",
         "ab"=>"abvalue"}],
  ["b", {"ba"=>"bavalue"}],
  ["x", {"xa"=>"xavalue"}]] 
```

通过将组件数组映射到哈希...

```
output.map {|pair| {pair.first => pair.last}} 
```

你可以把它变成类似的东西

```
[{"a"=>{"aa"=>"aavalue",
        "ab"=>"abvalue"}},
 {"b"=>{"ba"=>"bavalue"}},
 {"x"=>{"xa"=>"xavalue"}}] 
```

使用类似的地图，您可以访问您列出的最后一个表单（输出 2）：

```
output2 = output.map { |pair|
  hash = pair.last
  { 'name' => pair.first,
    'keys' => hash.keys,
    'values' => hash.values }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T13:03:08.703

我是pythonista，但无论如何我都尝试过：

```
class Hash
  def clustered
    clustered = Hash.new
    sort.each do | key, value |
      first = key[0,1]
      unless clustered.has_key?(first)
        clustered[first] = Hash.new        
      end
      clustered[first][key] = value
    end
    clustered
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T14:04:25.257

```
output = input.inject({}){ |h, p| k,v=p; (h[k[0..0]] ||= {})[k] = v; h} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-03T01:50:06.693

不幸的是，没有一个答案是完整的。所以我根据蒂亚戈的解决方案想出了这个：

```
output1 = input.inject({}) { |acc, pair|
  letter = pair.first[0].chr
  acc[letter] ||= {}
  acc[letter][pair.first] = pair.last
  acc
}.sort

output2 = output1.inject([]) { |acc, pair|
  acc << {
    'name' => pair.first,
    'keys' => pair.last.keys(),
    'values' => pair.last.values()
  }
  acc
} 
```

# php - javascript问题-包括php

> ID：371072
> 
> 赞同：0
> 
> 时间：2008-12-16T11:50:49.940
> 
> 标签：php, javascript, ajax

我在下面粘贴了代码，它作为小型 ajax 应用程序的核心服务器。这以前工作得很好，makewindows 实际上显示了一个包含 artcile_desc 结果的弹出窗口。但是，在该函数之前我似乎有一个错误，因为现在只输出实际的 php 代码。这不是我的服务器设置的问题，因为我是管理员并且这没有改变。

Firebug 出现以下错误，但我不确定它们的含义。

```
unterminated string literal
onclick(click clientX=52, clientY=50)1GmRZ%2F...D9g%3D%3D (line 2)
[Break on this error] child1.document.write("<br />\n
1GmRZ%2F...D9g%3D%3D (line 2)
updateByQuery is not defined
onclick(click clientX=29, clientY=17)CLQWYjW1...WlQ%3D%3D (line 2)
[Break on this error] updateByQuery("Layer3", "Ed Hardy");

var xmlHttp
var layername
var url
function update(layer, url) {
    var xmlHttp=GetXmlHttpObject(); //you have this defined elsewhere

    if(xmlHttp==null) {
        alert("Your browser is not supported?");
    }

    xmlHttp.onreadystatechange = function() {
        if(xmlHttp.readyState==4 || xmlHttp.readyState=="complete") {
            document.getElementById(layer).innerHTML=xmlHttp.responseText;
        } else if (xmlHttp.readyState==1 || xmlHttp.readyState=="loading") {
            document.getElementById(layer).innerHTML="loading";
        }

       //etc
    }

    xmlHttp.open("GET",url,true);
    xmlHttp.send(null);
}

function updateByPk(layer, pk) {
   url = "get_auction.php?cmd=GetAuctionData&pk="+pk+"&sid="+Math.random();
   update(layer, url);
}

function updateByQuery(layer, query) {
   url = "get_records.php?cmd=GetRecordSet&query="+query+"&sid="+Math.random();
   update(layer, url);
}

function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
    {
        xmlHttp=new XMLHttpRequest();
    }catch (e)
    {

        try
        {
                xmlHttp =new ActiveXObject("Microsoft.XMLHTTP");
        } 
        catch (e) {}

    }
return xmlHttp;
}
function makewindows(){
child1 = window.open ("about:blank");
child1.document.write("<?php echo htmlspecialchars(json_encode($row2['ARTICLE_DESC']), ENT_QUOTES); ?>");
child1.document.close(); 
} 
```

无论我尝试什么 makewindows 函数，都只是将 php 代码输出为 html 源代码，而不是 php 代码的结果。这以前工作正常，我不确定我做了什么改变导致了这种行为。

我现在已经粘贴了所有代码。调用 updateByQuery 的链接会生成错误，从而阻止正确解析 makewindows..我认为。

编辑：当我使用此代码时，php 正在被解析：

```
function makewindows(){
child1 = window.open ("about:blank");
child1.document.write("<?php echo htmlspecialchars(json_encode($row2['ARTICLE_DESC']), ENT_QUOTES); ?>");
child1.document.close(); 
} 
```

但不是上面的代码

php的结果是这样的：

```
child1.document.write("<br />
58<b>Notice</b>: Undefined variable: row2 in <b>C:\Programme\EasyPHP 2.0b1\www\records4\fetchlayers.js</b> on line <b>57</b><br />
59null"); 
```

这会导致错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T13:28:17.043

我不知道 Firebug 抱怨什么，但我立即看到了别的东西。

您不能从 Javascript 输出 PHP 代码并期望它运行。Javascript 在浏览器中执行，PHP 代码应该在服务器上执行。基本上你给浏览器一个看起来像 PHP 代码的文本文件，但浏览器不知道如何处理它。

如果要执行 PHP 代码，请将其放在 Web 服务器上的文件中。将浏览器窗口指向服务器上的该文件，输出将在窗口中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T13:22:29.443

首先，每当您将任何内容编码为特定符号时，您都应该在这样做之前转换“特殊字符”，以防它破坏符号。

```
child1.document.write("<?php echo htmlspecialchars(json_encode($row2['ARTICLE_DESC']), ENT_QUOTES); ?>"); 
```

应该读：

```
child1.document.write("<?php echo json_encode(htmlspecialchars($row2['ARTICLE_DESC'], ENT_QUOTES)); ?>"); 
```

但是我仍然很困惑，但是为什么您甚至调用 json_encode，因此文章 desc 应该是一个字符串：

```
child1.document.write("<?php echo htmlspecialchars($row2['ARTICLE_DESC']), ENT_QUOTES); ?>"); 
```

就足够了。

但是，这只会在页面加载时填充，我猜这是您的意图。如果它不起作用，请查看源代码并确保它在源代码标记中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T12:15:24.650

嗯，如果 JavaScript 显示 PHP 代码，这意味着服务器不再知道 something.php 必须运行 PHP 解释器。您应该仔细检查设置。并验证 PHP 没有损坏或其他什么。

此外，您显示的 Firebug 错误很奇怪，它显示垃圾。也许您已将服务器（或脚本？）设置为发送 Gzipped 数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T14:23:55.247

看起来 PHP 代码正在产生错误。（事实上​​，它甚至在第 57 行将您指向 fetchlayers.js）也许您应该用 try/catch 块包装它以处理错误，或者至少显示正在发生的错误？

还可以看看[FirePHP——](http://www.firephp.org/)我用的不多，但它看起来非常有用，可以让你将 PHP 脚本中的调试信息发送到 Firebug 的控制台窗口（这是通过自定义 http 标头和 Firefox 扩展完成的）。

# asp.net - jquery UI 对话框和 __DoPostback

> ID：371079
> 
> 赞同：1
> 
> 时间：2008-12-16T11:53:21.883
> 
> 标签：asp.net, javascript, jquery

我的 ASP.NET 表单中的 jQuery-UI 对话框有问题：

```
$("#pnlReceiverDialog").dialog({
  autoOpen:false, 
  modal: true,
  height:220, 
  width:500,
  resizable :false,
  overlay: {  opacity: 0.5,background: "black" },
  buttons: {
    "Cancel": function() { 
      $(this).dialog("close");
    },
    "Ok": function() {
      __doPostBack('ctl00$phContent$ctl00$LetterLocation$pupNewReceiver','')
    }
  }
}); 
```

`pnlReceiverDialog`包含一个 ASP.NET `TextBox`。

当我单击“确定”按钮时，表单会发回，但文本框没有值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-27T17:19:38.440

jQuery 对话框确实将字段移到了 <form> 之外，这就是为什么您在回发时看不到该值的原因。

你有两个选择：

1.  添加代码以在调用 __doPostBack 之前将对话框 div 移回表单——您可以使用类似*$("form")[0].appendChild($("div.yourdivdialog input:first")[0]);* 要做到这一点。
2.  在您的表单中添加一个隐藏字段（但不在对话框 div 中）并添加代码以将您的对话框字段复制到 __doPostBack 之前的隐藏字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-19T14:30:46.257

我知道您可能已经检查过对象名称是否是您编写的对象名称（ctl00$phContent$ctl00$LetterLocation$pupNewReceiver），但我要做的第一件事是双重或三重检查它......

我曾经在类似的情况下花了将近一天的时间，唯一错误的是对象名称，因为客户端对象 ID 和客户端对象名称之间存在差异。

检查 Request.Params 集合以确保名称正确。

您还可以使用 __doPostBack 函数的第二个参数来指定要回发的值

这是我通常做的一个例子：

__doPostBack($("#<%=Me.btnDeleteItem.ClientID %>").attr("name"), $("#<%=txtId.ClientID%>").val());

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-22T01:01:08.557

我无法回答具体问题。但是，我强烈建议您更改代码以使用 asp.net 插入对象 ID，就像 vitorsilva 所做的那样 - 即 <%=TEST.ClientID %> 其中 TEST 是您的文本框的 ASP.Net ID 或其他。如果您更改页面结构，发送到浏览器的实际对象 ID（即示例中的 ctl00$phContent$ctl00$LetterLocation$pupNewReceiver）可能会更改。通过使用 ClientID 方法，您将始终获得呈现的正确 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-22T01:12:31.967

它是只读的还是禁用的或隐藏的文本框？如果文本框是只读的、禁用的或隐藏的，ASP.NET 不会回发该值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T05:22:04.290

JQuery Script 封装在 ASP.Net 自定义控件中并使用 Page.ClientScript.GetPostBackEventReference(this,"")。pnlReceiverDialog 是控件外的 DIV。

我检查了 Request.Params，TextBox 的值不存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-11-16T10:42:40.517

我相信文本框没有价值，因为它最终在表单之外。

尝试使用以下代码将 Modal 添加到表单中：

```
$("#ModalId").parent().appendTo(jQuery("form:first")); 
```

# html - HTML表格水平间距

> ID：371088
> 
> 赞同：0
> 
> 时间：2008-12-16T11:57:37.320
> 
> 标签：html, html-table, cells, spacing

如何在 html 表格的列之间设置 X 间距？

使用 cellpadding 或 cellspacing 我也得到了垂直间距（我不想要它！）。

我不能使用 CSS。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T11:59:52.807

嗯，如何插入一个带有 width=X 的额外列？我认为这是在纯 html 中做到这一点的唯一方法。

# c# - 将 unicode 字符的十六进制序列解码为字符串的最佳方法

> ID：371096
> 
> 赞同：2
> 
> 时间：2008-12-16T12:01:38.827
> 
> 标签：c#, unicode, hex

什么是解码字符串的最无代码方式：

```
\xD0\xAD\xD0\xBB\xD0\xB5\xD0\xBA\xD1\x82\xD1\x80\xD0\xBE\xD0\xBD\xD0\xBD\xD0\xB0\xD1\x8F 
```

到 C# 中的人类字符串？

这个十六进制字符串包含一些 unicode 符号。

我知道

```
System.Convert.ToByte(string, fromBase); 
```

但我想知道是否有一些 asp.net 内部使用的内置帮助程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T12:38:28.253

在这个站点中，您不太可能获得无*代码的方式*（它是关于代码的）。如果您知道原始编码，则可以解码*十六进制编码的字节数组。*

猜测编码为 UTF8，使用 [System.Text.UTF8encoding](http://msdn.microsoft.com/en-us/library/system.text.utf8encoding.aspx)对其进行解码会 产生以下 11 个 unicode 字符*Cyrillic string*：

> A 西里尔大写字母 E、西里尔小写字母 EL、西里尔小写字母 IE、西里尔小写字母 KA、西里尔小写字母 TE、西里尔小写字母 ER、西里尔小写字母 O、西里尔小写字母 EN、西里尔小写字母 EN、西里尔西里尔小写字母 YA，

一旦您弄清楚如何将数据放入 a`Byte[]`中，上述参考中的示例代码就会显示出方法：

```
// fill encodedBytes with original data
Byte[] encodedBytes = new Byte[] {0xD0,0xAD,0xD0,0xBB,0xD0,0xB5}; //...
UTF8Encoding utf8 = new UTF8Encoding();
String decodedString = utf8.GetString(encodedBytes); 
```

# c# - 你能得到 XmlCompiledTransform 的进展吗？

> ID：371105
> 
> 赞同：4
> 
> 时间：2008-12-16T12:06:21.780
> 
> 标签：c#, .net, file-io, xslt

我想读取一个 xml 文件，应用一个转换，然后写入另一个文件。我能想到的最好的方法是：

```
using (XmlTextReader reader = new XmlTextReader(new FileStream(_source, FileMode.Open)))
using (XmlTextWriter writer = new XmlTextWriter(new StreamWriter(_destination)))
{
   _xslTransform.Transform(reader, writer);
} 
```

但我真的很想进步。如果我只是复制数据，我可以做这样的事情（这可能不是 100% 正确，而是这样）：

```
using (BinaryReader reader = new BinaryReader(new FileStream(_source, FileMode.Open)))
using (BinaryWriter writer = new StreamWriter(_destination))
{
    byte[] buffer = new byte[2048];
    int read = 0;
    int actual = 0;
    long total = reader.BaseStream.Length;

    while ((read = reader.Read(buffer, 0, buffer.Length)) > 0)
    {
        writer.Write(buffer, 0, read);
        actual = (actual <= total ? actual + read : read);
        updateProgress(Convert.ToInt32(actual / total * 100));
    }
} 
```

那么在使用 XslCompiledTransform 时是否有某种方法可以做到这一点。我可以在写入文件之前先将其读入内存，但我想限制使用的内存量，或者 XslCompiledTransform 是否将其全部加载到内存中？

我希望这有某种意义，谢谢！

亚当。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T12:32:19.653

一个选项是从转换​​中发送 xsl:message 消息并收听这些消息。

使用这种方法，您必须首先遍历输入文档并计算转换“迭代”的节点。这可以使用一个非常基本的 XSLT 来完成，它只在每个感兴趣的节点上发送一条消息。

然后 - 在实际转换期间 - 每次点击感兴趣的节点时，您都​​可以发送一个

```
<xsl:message terminate="no">progress:mynode</xsl:message> 
```

进度消息。

可以使用消息侦听器在调用 C# 代码中截获此消息。您可以将以下代码放入一个小类中以应用 XSL 转换。这只是一个用于说明的基本示例；我希望你能明白：

```
protected event MessageListener progressMessageIntercepted;

public void AddProgressMessageListener(MessageListener listener)
{
    progressMessageIntercepted += listener;
}

public void RemoveMessageListeners()
{
    progressMessageIntercepted = null;
}

protected void MessageCallBack(object sender, XsltMessageEncounteredEventArgs e)
{
    if (e.Message.StartsWith("progress:"))
    {
        if (progressMessageIntercepted != null)
        {
            progressMessageIntercepted(this, null);
        }
    }
}

protected void Transform(string inputFile, string outputFile, string xsltFile)
{
    XslCompiledTransform xslt = new XslCompiledTransform();
    xslt.Load(xsltFile);
    XsltArgumentList parameters = new XsltArgumentList();
    parameters.XsltMessageEncountered += new XsltMessageEncounteredEventHandler(MessageCallBack);

    using (XmlWriter xmlWriter = XmlWriter.Create(outputFile))
    {
        xslt.Transform(inputFile, parameters, xmlWriter);
    }
} 
```

# iphone - iOS（Iphone/iPad/iPod Touch）设备中有多少 RAM？

> ID：371107
> 
> 赞同：30
> 
> 时间：2008-12-16T12:07:38.703
> 
> 标签：iphone, objective-c, ios, cocoa-touch, macos

不同的 iPhone 有不同的发布内存 4GB、8GB 和 16GB。触摸可以有32GB。我的理解是这是离线内存（类似磁盘）。

可用于我的 Cocoa 应用程序的设备中有多少实际的快速 ram？

是否有预配置的虚拟数量？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-12-16T12:14:13.903

# 苹果手机

*   iPhone（2007 年 6 月）：128MB
*   iPhone 3G（2008 年 7 月）：128MB
*   iPhone 3GS（2009 年 6 月）：256MB
*   iPhone 4（2010 年 6 月）：512MB
*   iPhone 4S（2011 年 10 月）：512MB
*   iPhone 5（2012 年 9 月）：1GB
*   iPhone 5S（2013 年 9 月）：1GB
*   iPhone 6（2014 年 9 月）：1GB
*   iPhone 6 Plus（2014 年 9 月）：1GB
*   iPhone 6S（2015 年 9 月）：2GB
*   iPhone 6S Plus（2015 年 9 月）：2GB
*   iPhone 7（2016 年 9 月）：2GB
*   iPhone 7 Plus（2016 年 9 月）：3GB

# iPod 触摸

*   第一代（2007 年 9 月）：128MB
*   第二代（2008 年 9 月）：128MB
*   第三代（2009 年 9 月）：256MB
*   第 4 代（2010 年 9 月）：256MB
*   第 5 代（2012 年 10 月）：512MB
*   第 6 代（2015 年 7 月）：1GB

# iPad

*   第一代（2010 年 4 月）：256MB
*   iPad 2 (2011)：512MB
*   第三代（2012 年 3 月）：1GB
*   第 4 代（2012 年 11 月）：1GB
*   iPad Air（2013 年 11 月）：1GB
*   iPad Air 2（2014 年 10 月）：2GB
*   iPad Pro 12.9"（2015 年 11 月）：4GB
*   iPad Pro 9.7"（2016 年 4 月）：2GB

# 小型平板电脑

*   第一代（2012 年 11 月）：512MB
*   iPad mini 2（2013 年 11 月）：1GB
*   iPad mini 3（2014 年 10 月）：1GB
*   iPad mini 4（2015 年 9 月）：2GB

# 苹果手表

*   第一代（2015 年 4 月）：512MB

# 苹果电视

*   第二代（2010 年）：256MB
*   第三代（2012 年）：512MB
*   第 4 代（2015 年）：2GB

iOS 不使用交换空间，因此只有 RAM 可供进程使用。（也就是说，iOS 确实支持分页可执行文件。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-06-21T14:56:01.350

![在此处输入图像描述](https://i.stack.imgur.com/5hjEx.png)当前发布的 Apple iOS 设备具有以下数量的工作内存：

```
iPhone        =  128 MB
iPhone 3G     =  128 MB
iPhone 3GS    =  256 MB
iPhone 4      =  512 MB
iPhone 4S     =  512 MB    
iPhone 5      = 1024 MB
iPhone 5S     = 1024 MB

iPod Touch 1G  =  128 MB
iPod Touch 2G  =  128 MB
iPod Touch 3G  =  256 MB
iPod Touch 4G  =  256 MB
iPod Touch 5G  =  512 MB

iPad           =  256 MB
iPad 2         =  512 MB
iPad (3)       = 1024 MB
iPad (4)       = 1024 MB
iPad Air       = 1024 MB

iPad mini (1G) =  512 MB
iPad mini (2G) = 1024 MB 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-17T18:34:18.830

iPhone 和 iPod touch 有 128 兆的内存，但第 3 方应用程序应该只指望有大约 20 兆的可用内存。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-16T14:53:55.453

正如 Mehrdad Afshari 所说，它是 128Mb（除了 3GS 的两倍），但您为什么需要知道呢？并非所有程序都可以访问程序，并且确切的数量会有所不同。大概像在后台运行 iPod 这样的活动会消耗一些内存，例如，OS2.1 留下的可用内存似乎比 2.0 少。

应用程序方面的关键是缓存内容而不是要求内存中的所有内容并注意内存警告通知。如果您不这样做，您的应用程序将被迫退出。（如果它以状态 101 退出，则说明您使用了太多内存。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-24T08:21:54.743

转到[ios app 最大内存预算](https://stackoverflow.com/questions/5887248/ios-app-maximum-memory-budget)以查看可以真正分配的更多设备和 RAM 量。

# c# - 使用匿名委托进行事件处理时的垃圾收集

> ID：371109
> 
> 赞同：13
> 
> 时间：2008-12-16T12:08:18.720
> 
> 标签：c#, event-handling, garbage-collection

**更新**

我已将此处的各种答案组合成一个[新问题](https://stackoverflow.com/questions/1747235/weak-event-handler-model-for-use-with-lambdas/1747236#1747236)的“明确”答案。

**原始问题**

在我的代码中，我有一个事件发布者，它存在于应用程序的整个生命周期（这里简化为基本要素）：

```
public class Publisher
{
    //ValueEventArgs<T> inherits from EventArgs
    public event EventHandler<ValueEventArgs<bool>> EnabledChanged; 
} 
```

因为这个发布者可以在任何地方使用，我很高兴自己创建了这个小助手类，以避免在所有订阅者中重写处理代码：

```
public static class Linker
{
    public static void Link(Publisher publisher, Control subscriber)
    {
         publisher.EnabledChanged += (s, e) => subscriber.Enabled = e.Value;
    }

    //(Non-lambda version, if you're not comfortable with lambdas)
    public static void Link(Publisher publisher, Control subscriber)
    {
         publisher.EnabledChanged +=
             delegate(object sender, ValueEventArgs<bool> e)
             {
                  subscriber.Enabled = e.Value;
             };
    }
} 
```

它工作得很好，直到我们开始在较小的机器上使用它，当我开始偶尔：

```
System.ComponentModel.Win32Exception
Not enough storage is available to process this command 
```

事实证明，代码中有一个地方是订阅者控件被动态创建、添加和从表单中删除的。鉴于我对垃圾收集等的深入了解（即直到昨天还没有），我从来没有想过要在我身后进行清理，因为在绝大多数情况下，订阅者也会在应用程序的整个生命周期内都存在。

[我已经用Dustin Campbell 的 WeakEventHandler](http://diditwith.net/CommentView,guid,aacdb8ae-7baa-4423-a953-c18c1c7940ab.aspx#commentstart)摆弄了一段时间，但它*不适用于匿名代表*（无论如何都不适合我）。

反正有这个问题吗？我真的很想避免在整个商店复制粘贴样板代码。

（哦，别问我为什么我们一直在创建和销毁控件，这不是我的设计决定......）

（PS：这是一个winforms应用程序，但我们已经升级到VS2008和.Net 3.5，我应该考虑使用[弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)吗？）

（PPS：[来自 Rory 的好答案](http://#371150)，但如果有人能想出一个与 WeakEventHandler 等效的方法，这样我就不必记住显式 UnLink/Dispose，那会很酷......）

**编辑**我必须承认我通过“回收”有问题的控件来解决这个问题。然而，解决方法又回来困扰我，因为我使用的“钥匙”显然不是唯一的（呜咽）。我刚刚[在这里](http://danylaporte.blogspot.com/2008/09/weakeventhandler.html)发现了其他链接（尝试过这个 - 似乎有点*太弱了*- 即使目标仍然存在，GC也会清除代表，下面[的 s,oɔɯǝɹ 答案](https://stackoverflow.com/questions/371109/garbage-collection-when-using-anonymous-delegates-for-event-handling/955928#955928)也有同样的问题），[这里](http://code.logos.com/blog/2008/08/event_subscription_using_weak_references.html)（强制你修改发布者，并且不't 真正与匿名代表一起工作）和[这里](http://joshsmithonwpf.wordpress.com/2009/04/06/a-mediator-prototype-for-wpf-apps/)（引用为不完整的达斯汀坎贝尔）。

我突然想到，我正在寻找的东西在语义上可能是不可能的——闭包的设计目的是“即使在我离开后也能闲逛”。

我找到了另一种解决方法，所以我会坚持下去，等待[众神的声音](http://blogs.msdn.com/ericlippert/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-09-19T03:17:05.033

我知道这个问题很古老，但是地狱 - 我找到了它，而且我认为其他人也可能这样做。我正在尝试解决相关问题，并且可能会有一些见解。

您提到了 Dustin Campbell 的 WeakEventHandler - 它确实不能通过设计使用匿名方法。当我意识到 a) 在 99% 的情况下我需要这样的东西时，我试图将一些东西摆弄在一起，他原来的解决方案会更安全，并且 b) 在我必须这样做的少数情况下（注意：有to，而不是“想要，因为 lambdas 更漂亮和简洁”）如果你有点聪明，它可以让它工作。

您的示例似乎完全是一种一次性的情况，其中有点棘手可能会导致一个相当简洁的解决方案。

```
 public static class Linker {
    public static void Link(Publisher publisher, Control subscriber) {
        // anonymous method references the subscriber only through weak 
        // references,so its existance doesn't interfere with garbage collection
        var subscriber_weak_ref = new WeakReference(subscriber);

        // this instance variable will stay in memory as long as the  anonymous
        // method holds a reference to it we declare and initialize  it to 
        // reserve the memory (also,  compiler complains about uninitialized
        // variable otherwise)
        EventHandler<ValueEventArgs<bool>> handler = null;

        // when the handler is created it will grab references to the  local 
        // variables used within, keeping them in memory after the function 
        // scope ends
        handler = delegate(object sender, ValueEventArgs<bool> e) {
            var subscriber_strong_ref = subscriber_weak_ref.Target as Control;

            if (subscriber_strong_ref != null) 
                subscriber_strong_ref.Enabled = e.Value;
            else {
                // unsubscribing the delegate from within itself is risky, but
                // because only one instance exists and nobody else has a
                // reference to it we can do this
                ((Publisher)sender).EnabledChanged -= handler;

                // by assigning the original instance variable pointer to null
                // we make sure that nothing else references the anonymous
                // method and it can be collected. After this, the weak
                //  reference and the handler pointer itselfwill be eligible for
                // collection as well.
                handler = null; 
            }
        };

        publisher.EnabledChanged += handler;
    }
} 
```

据传 WPF 弱事件模式会带来很多开销，因此在这种特殊情况下我不会使用它。此外，在 WinForm 应用程序中引用核心 WPF 库似乎也有点繁重。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-16T12:26:15.797

如果您保留对匿名委托的引用，然后在从表单中删除控件时将其删除，则应该允许对控件和匿名委托进行垃圾收集。

所以是这样的：

```
public static class Linker
{

    //(Non-lambda version, I'm not comfortable with lambdas:)
    public static EventHandler<ValueEventArgs<bool>> Link(Publisher publisher, Control subscriber)
    {
         EventHandler<ValueEventArgs<bool>> handler = delegate(object sender, ValueEventArgs<bool> e)
             {
                  subscriber.Enabled = e.Value;
             };
         publisher.EnabledChanged += handler;
         return handler;
    }

    public static void UnLink(Publisher publisher, EventHandler<ValueEventArgs<bool>> handler)
    {
        publisher.EnabledChanged -= handler;
    }

} 
```

有关删除委托的示例，请参阅[C# 中的取消订阅匿名方法。](https://stackoverflow.com/questions/183367/unsubscribe-anonymous-method-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-05T13:45:20.800

我最近基于 WeakReference 制作的一些示例代码：

```
// strongly typed weak reference
public class WeakReference<T> : WeakReference
    where T : class
{
    public WeakReference(T target)
        : base(target)
    { }

    public WeakReference(T target, bool trackResurrection)
        : base(target, trackResurrection)
    { }

    public new T Target
    {
        get { return base.Target as T; }
        set { base.Target = value; }
    }
}

// weak referenced generic event handler
public class WeakEventHandler<TEventArgs> : WeakReference<EventHandler<TEventArgs>>
    where TEventArgs : EventArgs
{
    public WeakEventHandler(EventHandler<TEventArgs> target)
        : base(target)
    { }

    protected void Invoke(object sender, TEventArgs e)
    {
        if (Target != null)
        {
            Target(sender, e);
        }
    }

    public static implicit operator EventHandler<TEventArgs>(WeakEventHandler<TEventArgs> weakEventHandler)
    {
        if (weakEventHandler != null)
        {
            if (weakEventHandler.IsAlive)
            {
                return weakEventHandler.Invoke;
            }
        }

        return null;
    }
}

// weak reference common event handler
public class WeakEventHandler : WeakReference<EventHandler>
{
    public WeakEventHandler(EventHandler target)
        : base(target)
    { }

    protected void Invoke(object sender, EventArgs e)
    {
        if (Target != null)
        {
            Target(sender, e);
        }
    }

    public static implicit operator EventHandler(WeakEventHandler weakEventHandler)
    {
        if (weakEventHandler != null)
        {
            if (weakEventHandler.IsAlive)
            {
                return weakEventHandler.Invoke;
            }
        }

        return null;
    }
}

// observable class, fires events
public class Observable
{
    public Observable() { Console.WriteLine("new Observable()"); }
    ~Observable() { Console.WriteLine("~Observable()"); }

    public event EventHandler OnChange;

    protected virtual void DoOnChange()
    {
        EventHandler handler = OnChange;

        if (handler != null)
        {
            Console.WriteLine("DoOnChange()");
            handler(this, EventArgs.Empty);
        }
    }

    public void Change()
    {
        DoOnChange();
    }
}

// observer, event listener
public class Observer
{
    public Observer() { Console.WriteLine("new Observer()"); }
    ~Observer() { Console.WriteLine("~Observer()"); }

    public void OnChange(object sender, EventArgs e)
    {
        Console.WriteLine("-> Observer.OnChange({0}, {1})", sender, e);
    }
}

// sample usage and test code
public static class Program
{
    static void Main()
    {
        Observable subject = new Observable();
        Observer watcher = new Observer();

        Console.WriteLine("subscribe new WeakEventHandler()\n");
        subject.OnChange += new WeakEventHandler(watcher.OnChange);
        subject.Change();

        Console.WriteLine("\nObserver = null, GC");
        watcher = null;
        GC.Collect(0, GCCollectionMode.Forced);
        GC.WaitForPendingFinalizers();

        subject.Change();

        if (Debugger.IsAttached)
        {
            Console.Write("Press any key to continue . . . ");
            Console.ReadKey(true);
        }
    }
} 
```

生成以下输出：

```
new Observable()
new Observer()
subscribe new WeakEventHandler()

DoOnChange()
-> Observer.OnChange(ConsoleApplication4.Observable, System.EventArgs)

Observer = null, GC
~Observer()
DoOnChange()
~Observable()
Press any key to continue . . . 
```

（请注意，取消订阅 (-=) 不起作用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-06T12:26:03.830

进一步基于[Egor 的](https://stackoverflow.com/questions/371109/garbage-collection-when-using-anonymous-delegates-for-event-handling/1447619#1447619)回答，我想尝试构建一个版本，我不必提前确定要附加到*哪个事件。*

我只设法使它与通用事件处理程序一起工作：对于“标准”事件处理程序（例如 FormClosingEventHandler），这有点棘手，因为你不能有类型约束`where T : delegate`（除非你的名字以[Pony](http://msmvps.com/blogs/jon_skeet/archive/2009/09/10/generic-constraints-for-enums-and-delegates.aspx)结尾）。

```
private static void SetAnyGenericHandler<S, T>(
     Action<EventHandler<T>> add,     //to add event listener to publisher
     Action<EventHandler<T>> remove,  //to remove event listener from publisher
     S subscriber,                    //ref to subscriber (to pass to consume)
     Action<S, T> consume)            //called when event is raised*
         where T : EventArgs 
         where S : class
{
    var subscriber_weak_ref = new WeakReference(subscriber);
    EventHandler<T> handler = null;
    handler = delegate(object sender, T e)
    {
        var subscriber_strong_ref = subscriber_weak_ref.Target as S;
        if(subscriber_strong_ref != null)
        {
            Console.WriteLine("New event received by subscriber");
            consume(subscriber_strong_ref, e);
        }
        else
        {
            remove(handler);
            handler = null;
        }
    };
    add(handler);
} 
```

（*我确实`EventHandler<T> consume`在这里尝试过，但是调用代码变得很难看，因为您必须在消费 lambda 中将 s 强制转换为订阅者。）

调用代码示例，取自上面的示例：

```
SetAnyGenericHandler(
    h => publisher.EnabledChanged += h, 
    h => publisher.EnabledChanged -= h, 
    subscriber, 
    (Subscriber s, ValueEventArgs<bool> e) => s.Enabled = e.Value); 
```

或者，如果您愿意

```
SetAnyGenericHandler<Subscriber, ValueEventArgs<bool>>(
    h => publisher.EnabledChanged += h, 
    h => publisher.EnabledChanged -= h, 
    subscriber, 
    (s, e) => s.Enabled = e.Value); 
```

能够仅将事件作为一个参数传递会很好，但是您无法从事件中访问添加/删除，就像您无法从属性访问 get/set 一样（我认为无需进行令人讨厌的反射操作） ）。

# dynamics-crm - 如何使用 Dynamics CRM 视图检索帐户活动的完整列表？

> ID：371112
> 
> 赞同：1
> 
> 时间：2008-12-16T12:10:56.343
> 
> 标签：dynamics-crm

使用 CRM 视图，有没有办法检索链接到特定帐户的所有活动的列表？

我希望它不仅检索与该帐户直接关联的那些，还检索与该帐户的联系人、案例等关联的那些。我正在尝试复制当您从一个帐户中单击“活动”选项时生成的列表。

到目前为止，我已经检索了该帐户的联系人及其活动。我还注意到 CRM 似乎并不总是返回我所期望的。有时不会显示与帐户联系人相关的活动。其他时候，会显示在逻辑上与帐户相关但在其相关对象 ID 字段中没有任何内容的电子邮件/约会。

我希望这并不意味着创建所有联接的母亲或分别查询每种活动类型。特别是因为我需要所有相关的案例活动、机会活动等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-05T10:19:52.717

您应该使用汇总请求（如果您使用 SDK 网络服务）来完成您的任务：

> 汇总操作 Microsoft Dynamics CRM 具有强大的汇总消息，可让您打开一个实体实例，例如一个帐户，并不仅可以查找有关该帐户的相关记录（机会、报价、订单、发票、合同和案例）的信息，还可以查找关于账户的子账户和联系人的相关记录。

更多的：

> TargetRollupActivityPointerByAccount 类 (CrmService) 指定检索与指定帐户相关的所有活动所需的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-29T18:12:17.707

我用过这样的东西。实际上，我用我想要搜索的项目的所有 guid（在我的情况下为帐户和联系人）构建了一个表 var，然后我查询 AcitivtyParty 以获取他们参与活动的所有活动 - 然后转到 Activity 以获取详细信息。

```
Declare @account_guid varchar(200)
Select @account_guid = 'insert some guid here'

Declare @GUIDS as Table(id varchar(200), fullname varchar(200), objecttype char(2)) 
Declare @ActivityIds as Table(id varchar(200))

--grab all guids we need activities for
    Insert Into @GUIDS
    Select contactid, fullname, 'C'
    From FilteredContact
    Where accountid = @account_guid
    UNION ALL
    Select accountid, [name], 'A'
    From FilteredAccount
    Where accountid = @account_guid 

--find all activities where the account/contact are referred to
Insert Into @ActivityIds
Select activityid
From FilteredActivityParty fap
Join @GUIDS g on g.id=fap.partyid
Group By activityid

Select *
From FilteredActivityPointer fap
Join @ActivityIds a on fap.activityid = a.id
Where statecode<>2 --hide canceled items 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T19:48:35.320

查看下面的帖子，它使用检索插件来汇总自定义实体的活动，开箱即用的 CRM 不支持：http: [//www.catapulterp.com/blog/2013/03/11/rolling -up-custom-entities-in-microsoftcrm-2011-and-crm-online/](http://www.catapulterp.com/blog/2013/03/11/rolling-up-custom-entities-in-microsoftcrm-2011-and-crm-online/)

# grep - 使用 grep 计算大量文件中字符串的所有出现次数

> ID：371115
> 
> 赞同：316
> 
> 时间：2008-12-16T12:12:56.073
> 
> 标签：grep

我有一堆日志文件。我需要找出一个字符串在所有文件中出现了多少次。

```
grep -c string * 
```

返回

```
...
file1:1
file2:0
file3:0
... 
```

使用管道，我只能获取出现一次或多次的文件：

```
grep -c string * | grep -v :0

...
file4:5
file5:1
file6:2
... 
```

我怎样才能只获得组合计数？（如果它返回`file4:5, file5:1, file6:2`，我想返回 8。）

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2010-07-14T19:31:55.687

这适用于每行多次出现：

```
grep -o string * | wc -l 
```

* * *

## 回答 #2

> 赞同：298
> 
> 时间：2008-12-16T12:17:21.993

```
cat * | grep -c string 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-02-27T07:40:33.363

```
grep -oh string * | wc -w 
```

将计算一行中的多次出现

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2008-12-16T12:15:58.377

不要使用 -c，只需将其通过管道传递给 wc -l。

```
grep string * | wc -l 
```

这将在一行中列出每个出现，然后计算行数。

但是，这将错过字符串在一行上出现 2 次以上的情况。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2008-12-16T12:18:14.347

```
cat * | grep -c string 
```

的罕见有用的应用程序之一`cat`。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-12-12T12:18:30.357

您可以添加`-R`到递归搜索（并避免使用 cat）并`-I`忽略二进制文件。

```
grep -RIc string . 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-02-27T08:00:26.510

与之前所有答案不同的东西：

```
perl -lne '$count++ for m/<pattern>/g;END{print $count}' * 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2011-09-29T12:26:37.380

强制 AWK 解决方案：

```
grep -c string * | awk 'BEGIN{FS=":"}{x+=$2}END{print x}' 
```

请注意您的文件名是否包含“：”。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-01-25T20:07:35.510

AWK 解决方案还可以处理包括冒号在内的文件名：

```
grep -c string * | sed -r 's/^.*://' | awk 'BEGIN{}{x+=$1}END{print x}' 
```

请记住，此方法仍然*无法*`string`在同一行上找到多次出现的。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-04-30T15:35:07.083

如果您想要每个文件的出现次数（例如字符串“tcp”）：

```
grep -RIci "tcp" . | awk -v FS=":" -v OFS="\t" '$2>0 { print $2, $1 }' | sort -hr 
```

示例输出：

```
53  ./HTTPClient/src/HTTPClient.cpp
21  ./WiFi/src/WiFiSTA.cpp
19  ./WiFi/src/ETH.cpp
13  ./WiFi/src/WiFiAP.cpp
4   ./WiFi/src/WiFiClient.cpp
4   ./HTTPClient/src/HTTPClient.h
3   ./WiFi/src/WiFiGeneric.cpp
2   ./WiFi/examples/WiFiClientBasic/WiFiClientBasic.ino
2   ./WiFiClientSecure/src/ssl_client.cpp
1   ./WiFi/src/WiFiServer.cpp 
```

解释：

*   `grep -RIci NEEDLE .`- 从当前目录递归查找字符串 NEEDLE（遵循符号链接），忽略二进制文件，计算出现次数，忽略大小写
*   `awk ...`- 此命令忽略出现次数为零的文件并格式化行
*   `sort -hr`- 按第一列中的数字以相反的顺序对行进行排序

当然，它也适用于带有选项`-c`（计数）的其他 grep 命令。例如：

```
grep -c "tcp" *.txt | awk -v FS=":" -v OFS="\t" '$2>0 { print $2, $1 }' | sort -hr 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-06-12T13:19:38.037

您可以使用简单`grep`的方法来有效地捕获出现次数。我将使用该`-i`选项来确保`STRING/StrING/string`正确捕获。

给出文件名的命令行：

```
grep -oci string * | grep -v :0 
```

如果有一个文件没有出现，则删除文件名并打印 0 的命令行：

```
grep -ochi string * 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-07-17T16:25:39.247

短**递归**变体：

```
find . -type f -exec cat {} + | grep -c 'string' 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-06-11T19:02:34.820

这是一种比 grep AWK 更快的替代方法，它`<url>`在目录中的 XML 文件集合中处理每行的多个匹配项：

```
awk '/<url>/{m=gsub("<url>","");total+=m}END{print total}' some_directory/*.xml 
```

这适用于某些 XML 文件没有换行符的情况。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-12-15T19:05:18.033

我用 grep for windows 测试的 Grep 唯一解决方案：

```
grep -ro "pattern to find in files" "Directory to recursively search" | grep -c "pattern to find in files" 
```

即使一行中有多个，此解决方案也会计算所有出现次数。`-r`递归搜索目录，`-o`将“仅显示与 PATTERN 匹配的行的一部分”——这是在一行上拆分多个出现并让 grep 在新行上打印每个匹配项的原因；然后通过管道将这些换行符分隔的结果返回到 grep 中，`-c`以使用相同的模式计算出现次数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-01-23T16:26:55.803

另一个使用基本命令行函数处理每行多次出现的单行器。

```
 cat * |sed s/string/\\\nstring\ /g |grep string |wc -l 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-09-13T20:47:57.593

```
awk -v RS='' -v FPAT='fast' '{print NF,FILENAME}' <file1..N> 
```

取一个字符串，使其成为一个快速的实例，然后打印带有文件名的字段数。

# php - 在 PHP 中，每页有多少个 DB 调用是可以的？

> ID：371126
> 
> 赞同：14
> 
> 时间：2008-12-16T12:16:12.620
> 
> 标签：php, sql, performance, lamp

我在 LAMP 上设置了共享主机。显然，每页对 Db 的调用越少越好。但是有多少是太多了？二？十？一百？好奇人们怎么想。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-16T12:21:27.663

这实际上取决于您的（db）服务器设置。尽量缓存大部分信息，并将数据库调用减少到最低限度。数据库将（几乎在所有情况下）成为您服务的瓶颈 - 您的网站使用率越高。因此，无论您做什么，都尽量避免触发查询，就好像不是真的有必要一样。

我尽量不使用每页超过 10 个 db 调用，但这实际上取决于您的基础架构和您想要提供的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-16T12:22:24.963

我会说这取决于服务器负载。如果您每分钟有 1 个访问者，那么每页 1-10 db 调用就可以了。如果您的服务器负载高于此值，例如每秒 10 个页面请求，那么您应该考虑缓存以最小化数据库服务器上的负载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-16T13:04:47.810

当我在 .com 热潮中从事 www.boxman.com 项目时，他们有一个网站，在不同的域下显示为 9 个不同的语言/国家网站。每条文本都是从数据库中提取的，以及产品等通常的东西......每个页面通常会涉及 200 个奇怪的数据库请求，但主要返回一个 id、string 组合。我们一次在系统上有 100 个用户。

DB 在 16 路 RS6000 unix box 上运行 DB2 SQL。这可能相当于现代 3ghz QUAD 核心英特尔盒。

系统工作......随着卷的增加，我实现了一个缓存，其中涉及编写一个同步过程，该过程将每天静态的数据移动到网络服务器的驱动器，因此它不再访问数据库。

基本上我会说，如果性能还可以，那就可以了！但是你应该允许扩大需求，并在它发生时做好准备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-11-21T21:41:12.560

它最终将取决于您的用户所期望的体验。如果他们期望页面上显示全面的数据，则必须有一些期望：1.）考虑到从数据库中提取的数据量，该站点将能够在负载下运行，以及 2.）加载页面的时间成本将取决于该特定页面的数据加载，而不是整体服务器负载。

一个可接受的数据库调用数量的巨大支持者也必须是底层数据库设计。由于底层数据库结构的复杂性，有一些企业级电子商务网站在每次（未缓存的）页面加载时会定期进行超过 100 次调用。

总体而言，查看 db 调用的一个好方法是确定特定页面是否在可接受的时间内加载，然后从那里查看优化加载时间以及 cpu 和内存使用的策略。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T19:59:20.377

一段绳子有多长？男人的腿应该多长？您应该在页面加载时进行多少数据库查询？

没有单一的答案。显然，进行不必要的查询是个坏主意。启动过多的数据库连接更糟糕。缓存不变的值是好的。除此之外，你不能在一个页面上随意地说“你应该只使用 $N 查询”——这取决于你想要做什么以及你的性能目标是什么。

从理论上讲，任何应用程序都可以编写为使用单个数据库查询——即使该查询是涉及未索引全表扫描的大规模 20 路连接，并返回数千行，这些行大多为空，这将占用大量内存和时间一旦它到达您的应用程序。显然，这将是一件非常糟糕的事情。一般来说，避免做明显浪费的事情（比如在一个循环中做一堆单行查询）并担心以后的性能。

用 Donald Knuth 的话来说：“我们应该忘记小的效率，大约 97% 的时间说：过早的优化是万恶之源”。每个人都在谈论“可扩展性”，就好像他们真的会成为下一个 Twitter，但实际上，如果 Twitter 专注于像现在这样大，他们可能一开始就不会推出产品地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T12:21:25.400

只要服务器（网络和数据库）可以处理您的所有请求并在可接受的时间内返回页面，我认为您当前的查询数量是可以的。它在很大程度上取决于服务器。尽管如此，无论如何使用尽可能少的查询是一个很好的规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-16T13:23:15.277

除了缓存之外，另一个重要的事情是使用准备好的语句。当您执行查询时，数据库必须 1) 分析查询并 2) 执行它。如果使用prepared statements，db可以缓存上次使用的查询计划，这样每次查询对dbms的负担就会更小。不要计算执行多少查询的负载，而要计算对 dbms 施加的压力。执行 100 个准备好的查询比执行 50 个在代码中临时生成的查询要快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-16T15:52:40.200

记住 100,000 个页面请求在 24 小时内仅超过 1 秒。只要他们不立即提出要求。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-12-16T15:48:35.263

**不要忘记**

1.  使用存储过程 - 它们运行得更快。
2.  以新鲜的方式运行它们 - 每周一次。（数据库使用其当前状态优化存储过程。如果这种情况发生变化，那么存储过程将停止优化）。
3.  使用诸如“显示计划”之类的命令来真正了解您的 SP 正在做什么。
4.  存储过程可以返回多个数据集（数据表），这减少了网络流量。一个存储过程可以做很多事情。

托尼

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2008-12-16T12:57:42.067

一个或更少总是最好的。两个通常是一个太多。

如果您可以在单个查询中返回多个结果集，请执行此操作。如果信息是相当静态的，则将其缓存并从缓存中提取。

10 个单独的数据库调用并不好，但它不会杀死一个低使用率的站点。

# jaxb - 使用 JAXB 的元素默认设置

> ID：371127
> 
> 赞同：0
> 
> 时间：2008-12-16T12:16:15.503
> 
> 标签：jaxb

我正在尝试使用 JDeveloper 10g 版本提供的 JAXB 1.0。我创建了一个模式定义，其中元素具有默认值。我有以下问题：

1.  每当我使用 JAXB 生成的类创建 Java 内容树时，都应该使用 XML 模式中提到的默认值创建 Java 对象。但它不会发生。如何使 JAXB 使用元素的默认值创建 XML 文档的 Java 对象？
2.  我正在尝试使用 Marshaller.setProperty( Marshaller.JAXB_SCHEMA_LOCATION, " [http://mylocation](http://mylocation) ");将架构位置添加到编组的 XML 文档中。但它没有反映在编组的 XML 内容中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-12T13:18:26.983

看看[JAXB 默认值插件](http://java.net/projects/jaxb2-commons/pages/Home)。[这里](http://ozgwei.blogspot.com/2007/08/generating-developer-friendly-codes.html)提到了一些不错的附加插件。

# .net - 修改集合时运行代码（添加或删除项目）

> ID：371133
> 
> 赞同：2
> 
> 时间：2008-12-16T12:18:21.727
> 
> 标签：.net, collections

我有一个包含对象列表的类。修改列表时在类中运行某些代码的最佳方法是什么？

```
class MyManagerClass
{
    ArrayList list = new ArrayList(); // will likely be a different collection class
    private OnItemAddedToList(object o)
    {
        // how to call this?
    }

    private OnItemRemovedFromList(object o)
    {
        // how to call this?  
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-16T12:42:25.280

如果您正在编写自定义集合，您可以实现`INotifyCollectionChanged`或`INotifyPropertyChanged`接口。他们添加了您可以订阅的事件，当集合数据以某种方式更改时通知侦听器。
这样做你可以订阅你的集合之外的代码中的事件。

或者，您可以使用`ObservableCollection<T>`实现这两个接口的类。这两个`INotifyCollectionChanged`接口`ObservableCollection<T>`都仅在 .Net Framework 3.0 及更高版本中可用。

在 .Net Framework 2.0 上，您可以使用`IBindingList`接口来获得相同的功能，但实现起来比`INotifyCollectionChanged`3.0 中的接口更复杂

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-16T12:41:38.853

您还可以考虑使用`System.Collections.ObjectModel.ObservableCollection<T>`该类，它以 CollectionChanged 事件的形式为您提供这一点，它为您提供有关更改内容的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-16T12:34:13.863

到目前为止我一直在使用的方法是创建一个从 派生的私有集合类`System.Collections.ObjectModel.Collection<T>`，并直接在覆盖中调用方法：

```
class MyManagerClass
{
    private class MyCollection : System.Collections.ObjectModel.Collection<object>
    {
        private MyManagerClass manager;

        private MyCollection(MyManagerClass manager)
        {
            this.manager = manager;
        }

        protected override void InsertItem(int index, object item)
        {
            base.InsertItem(index, item);
            manager.OnItemAddedToList(item);
        }

        protected override void SetItem(int index, object item)
        {
            object oldItem = (index < base.Count) ? base[index] : null;
            base.SetItem(index, item);

            if (oldItem != null) {
                manager.OnItemRemovedFromList(oldItem);
            }

            manager.OnItemAddedToList(item);
        }

        protected override void RemoveItem(int index, object item)
        {
            base.RemoveItem(index, item);
            manager.OnItemRemovedFromList(item);
        }
    }

    private OnItemAddedToList(object o)    
    {
    }

    private OnItemRemovedFromList(object o)    
    {
    }
} 
```

我不确定这是否是*正确*的方法，我想看看是否有更好的选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-16T13:42:07.547

在 2.0 及更高版本中，`BindingList<T>`它具有可观察集合的所有必要钩子。现在还有（如前所述）一个`ObservableCollection<T>`非常相似的类。

在许多情况下，从中派生新集合`Collection<T>`也是相当合理的。但不要派生自`List<T>`，因为它没有（有用的）虚方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T12:31:28.313

与其使用 System.Collections 中的 ArrayList，不如考虑使用[C5 Generic Collection Library](http://www.itu.dk/research/c5/)中的 ArrayList 。它有诸如`CollectionChanged`等之类的事件`ItemAdded`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-16T12:40:42.350

我个人会在一个有,和事件/代表`IList<T>`的类中实现 , 。该类将具有类型的私有实例成员，所有实现的调用都将委托给该成员，并引发事件。`Added``Removed``Replaced``List<T>`

如果您愿意，您还可以让您“取消”添加/删除`OnBefore...`元素。`OnAfter`

这通常是它的完成方式，但就像 mookid 所说，可能有现有的库可以做类似的事情。该类`DataTable`实现了与该类类似的概念`DataRow`，包括添加、删除和更新。

您可以组合这些概念，以便添加到集合中的项目可以引发`OnChanged`“冒泡”到集合中的事件，并可用于在集合中重新引发`ItemChanged`事件。

# algorithm - 二叉树 vs. 链表 vs. 哈希表

> ID：371136
> 
> 赞同：72
> 
> 时间：2008-12-16T12:20:17.587
> 
> 标签：algorithm, hashtable, linked-list, binary-tree, symbol-tables

我正在为我正在处理的项目构建符号表。我想知道人们对存储和创建符号表的各种方法的优缺点有何看法。

我进行了相当多的搜索，最常见的推荐是二叉树或链表或哈希表。以上所有的优点和缺点是什么？（在 C++ 中工作）

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2008-12-16T12:25:34.957

这些数据结构之间的标准权衡适用。

*   二叉树
    *   实现的中等复杂度（假设您无法从库中获取它们）
    *   插入是 O(logN)
    *   查找是 O(logN)
*   链表（未排序）
    *   实现复杂度低
    *   插入是 O(1)
    *   查找是 O(N)
*   哈希表
    *   实施复杂度高
    *   插入平均为 O(1)
    *   查找平均为 O(1)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-12-16T12:28:35.590

您的用例可能是“插入数据一次（例如，应用程序启动），然后执行大量读取，但如果有额外插入，则很少”。

因此，您需要使用一种快速查找所需信息的算法。

因此，我认为 HashTable 是最适合使用的算法，因为它只是生成密钥对象的哈希并使用它来访问目标数据 - 它是 O(1)。其他是 O(N) （大小为 N 的链接列表 - 您必须一次遍历列表一个，平均 N/2 次）和 O(log N) （二叉树 - 您将搜索空间减半每次迭代 - 仅当树是平衡的，所以这取决于您的实现，不平衡的树的性能可能会明显变差）。

只需确保 HashTable 中有足够的空间（桶）用于您的数据（Re，Soraz 对这篇文章的评论）。大多数框架实现（Java、.NET 等）都具有您无需担心实现的质量。

你在大学里学过数据结构和算法的课程吗？

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2008-12-16T13:21:16.450

每个人似乎都忘记了，对于小的 Ns，IE 表中的几个符号，链表可以比哈希表快得多，尽管理论上它的渐近复杂度确实更高。

Pike's Notes on Programming in C 中有一句名言：“规则 3。当 n 小时，花哨的算法很慢，而 n 通常很小。花哨的算法有很大的常数。直到你知道 n 经常会很大，别花里胡哨。” [http://www.lysator.liu.se/c/pikestyle.html](http://www.lysator.liu.se/c/pikestyle.html)

我无法从您的帖子中判断您是否会处理小 N，但请始终记住，大 N 的最佳算法不一定适用于小 N。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-16T14:34:00.343

听起来以下可能都是真的：

*   你的键是字符串。
*   插入完成一次。
*   经常进行查找。
*   键值对的数量相对较少（比方说，少于 K 左右）。

如果是这样，您可能会考虑对任何其他结构进行排序列表。这在插入过程中会比其他的表现更差，因为排序列表在插入时是 O(N)，而对于链表或哈希表是 O(1)，并且 O(log [2]N) 平衡二叉树。但是在排序列表中查找可能比任何其他结构都快（我将很快解释这一点），因此您可能会排在首位。此外，如果您一次执行所有插入（或者在所有插入完成之前不需要查找），那么您可以将插入简化为 O(1) 并在最后进行更快的排序。更重要的是，排序列表使用的内存比任何其他结构都少，但唯一可能重要的是如果您有许多小列表。如果您有一个或几个大列表，那么哈希表可能会胜过排序列表。

为什么使用排序列表查找会更快？好吧，很明显它比链表快，后者的查找时间为 O(N)。对于二叉树，如果树保持完美平衡，查找仅保持 O(log [2] N)。保持树平衡（例如红黑）增加了复杂性和插入时间。此外，对于链表和二叉树，每个元素都是单独分配的¹ *node*，这意味着您必须取消引用指针并可能跳转到可能变化很大的内存地址，从而增加缓存未命中的机会。

至于哈希表，您可能应该在 StackOverflow 上阅读其他[几个](https://stackoverflow.com/questions/360040/which-is-faster-hash-lookup-or-binary-search)[问题](https://stackoverflow.com/questions/332952/whats-up-with-o1)，但这里的主要兴趣点是：

*   在最坏的情况下，哈希表可以退化为 O(N)。
*   散列的成本是非零的，在某些实现中它可能很重要，特别是在字符串的情况下。
*   与链表和二叉树一样，每个条目都是一个*节点*，不仅存储键和值，在某些实现中也是单独分配的，因此您使用更多内存并增加缓存未命中的机会。

当然，如果您真的关心这些数据结构中的任何一个将如何执行，您应该测试它们。对于大多数常用语言，您应该可以轻松找到其中任何一个的良好实现。将一些真实数据放在这些数据结构中的每一个上，看看哪个表现最好，应该不会太难。

1.  [实现可以预先分配节点数组，这将有助于解决缓存未命中问题。我在链表或二叉树的任何实际实现中都没有看到这一点（当然，我并不是每个都见过），尽管你当然可以自己动手。但是，缓存未命中的可能性仍然略高，因为*节点*对象必然大于键/值对。]

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-12-16T14:32:58.553

我喜欢比尔的回答，但它并没有真正综合起来。

从三个选择中：

链表从 (O(n)) 中查找项目相对较慢。因此，如果您的表中有*很多*项目，或者您要进行大量查找，那么它们不是最佳选择。但是，它们很容易构建，也很容易编写。如果表很小，并且/或者您在构建后只对其进行一次小扫描，那么这可能是您的选择。

哈希表可以非常快。然而，为了让它工作，你必须为你的输入选择一个好的散列，你必须选择一个足够大的表来容纳所有的东西，而不会出现很多散列冲突。这意味着您必须了解输入的大小和数量。如果你把它搞砸了，你最终会得到一组非常昂贵和复杂的链表。我会说，除非您提前知道表的大小，否则不要使用哈希表。这与您的“已接受”答案不一致。对不起。

留下树木。不过，您在这里有一个选择：平衡或不平衡。通过研究我们这里的 C 和 Fortran 代码上的这个问题，我发现符号表输入往往是足够随机的，如果不平衡树，你只会损失大约一两个树级别。鉴于平衡树插入元素的速度较慢且难以实现，因此我不会打扰它们。但是，如果您已经可以访问很好的调试组件库（例如：C++ 的 STL），那么您不妨继续使用平衡树。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-16T13:09:01.343

有几点需要注意。

*   *如果树是平衡*的，二叉树只有 O(log n) 查找和插入复杂度。如果您的符号以非常随机的方式插入，这应该不是问题。如果它们按顺序插入，您将构建一个链表。（对于您的特定应用程序，它们不应该按任何顺序排列，所以应该没问题。）如果符号有可能过于有序，[红黑](http://en.wikipedia.org/wiki/Red-black_tree)树是更好的选择。

*   哈希表的平均插入和查找复杂度为 O(1)，但这里也有一个警告。如果您的哈希函数很糟糕（我的意思是*非常*糟糕），您最终也可以在这里构建一个链表。但是，任何合理的字符串散列函数都应该这样做，所以这个警告实际上只是为了确保您知道它可能会发生。您应该能够测试您的哈希函数在您的预期输入范围内没有太多冲突，您会没事的。另一个小缺点是如果您使用的是固定大小的哈希表。大多数哈希表实现在达到一定大小时都会增长（更精确的负载因子，请参见[此处](http://en.wikipedia.org/wiki/Hash_table)详情）。这是为了避免将一百万个符号插入十个桶时遇到的问题。这只会导致十个平均大小为 100,000 的链表。

*   如果我有一个非常短的符号表，我只会使用链接列表。它最容易实现，但链表的最佳情况性能是其他两个选项的最差情况性能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-16T00:21:11.587

其他评论集中在添加/检索元素上，但是如果不考虑迭代整个集合需要什么，这个讨论是不完整的。这里的简短回答是哈希表需要更少的内存来迭代，但树需要更少的时间。

对于哈希表，迭代 (key, value) 对的内存开销不取决于表的容量或表中存储的元素数量；事实上，迭代应该只需要一个或两个索引变量。

对于树，所需的内存量始终取决于树的大小。您可以在迭代时维护未访问节点的队列，也可以向树添加额外的指针以便于迭代（为了迭代的目的，使树像链表一样），但无论哪种方式，您都必须为迭代分配额外的内存.

但在时机问题上情况正好相反。对于哈希表，迭代所需的时间取决于表的容量，而不是存储元素的数量。因此，以 10% 的容量加载的表将比具有相同元素的链表花费大约 10 倍的时间来迭代！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-16T12:24:28.513

当然，这取决于几件事。我会说链表是正确的，因为它几乎没有合适的属性可以用作符号表。如果您已经拥有二叉树并且不必花时间编写和调试它，二叉树可能会起作用。我的选择是哈希表，我认为这或多或少是此目的的默认值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-16T12:25:10.637

[这个问题](https://stackoverflow.com/questions/198079/where-can-i-learn-about-the-various-types-of-net-lists#198131)涉及 C# 中的不同容器，但它们在您使用的任何语言中都是相似的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-16T12:29:23.140

除非你希望你的符号表很小，否则我应该避开链表。包含 1000 个项目的列表平均需要 500 次迭代才能找到其中的任何项目。

二叉树可以更快，只要它是平衡的。如果您要保留内容，则序列化表单可能会被排序，并且当它重新加载时，结果树将完全不平衡，并且它的行为与链表相同 - 因为那是基本上它变成了什么。平衡树算法解决了这个问题，但使整个 shebang 更加复杂。

哈希图（只要您选择合适的哈希算法）看起来是最好的解决方案。您没有提到您的环境，但几乎所有现代语言都内置了 Hashmap。

# command-line - 如何在没有命令提示符窗口的情况下创建文件

> ID：371140
> 
> 赞同：1
> 
> 时间：2008-12-16T12:22:26.630
> 
> 标签：command-line, command-prompt, cmd, wsh

我正在使用 WinRAR SFX 模块来创建安装，并使用它的预设选项来运行一些初步测试。

由于 wscript 只能接受 vbs 文件，而不是脚本本身，我首先运行“cmd /c echo {...script code...} > setup.vbs”，然后运行“wscript setup.vbs”。第一个 cmd 命令的运行会打开一个简短的命令窗口，我真的很想避免这种情况。我想用 RunDll32 来写这个数据，但是找不到任何合适的 API 来使用。

谁能想到一种绕过它并在不打开命令提示符窗口的情况下创建一个带有小 VBScript 文本的小文件的方法？

非常感谢，

分裂者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T12:45:50.953

脚本代码是否已经在文件中？如果是这样，

您可以使用 TYPE 命令将脚本发送到文件：

```
TYPE [script_file] > setup.vbs 
```

或复制脚本文件：

```
COPY [script_file] setup.vbs 
```

如果脚本代码在您的正文中`cmd`，您可以使用该`START`命令在`cmd`没有窗口（`/b`标志）的情况下运行：

```
START /B cmd /c echo {...script code...} > setup.vbs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-26T03:14:41.517

而不是`cmd /c echo {...script code...} > setup.vbs`用作预设步骤，也许您可​​以在您的安装中打包一个 VBscript，它会进行初步测试和创建`setup.vbs`，然后调用`setup.vbs`您。你必须把它放在 WinRAR 脚本的设置部分。

您可以像这样从 VBScript 调用另一个 VBScript：

```
Set WSHShell = CreateObject("WScript.Shell") 
WSHShell.Run "wscript d:\setup.vbs, ,True 
```

有关 Run 命令的语法，请参阅[此 MSDN 链接](http://msdn.microsoft.com/en-us/library/d5fk67ky(VS.85).aspx)。

# ruby-on-rails - Rails AJAX：我的部分需要一个 FormBuilder 实例

> ID：371147
> 
> 赞同：15
> 
> 时间：2008-12-16T12:24:48.547
> 
> 标签：ruby-on-rails, ajax, partial, formbuilder

所以我在我的 Rails 应用程序中有一个表单，它使用自定义 FormBuilder 给我一些自定义字段标签

```
<% form_for :staff_member, @staff_member, :builder => MyFormBuilder do |f| %>
[...]
    <%= render :partial => "staff_members/forms/personal_details", :locals => {:f => f, :skill_groups => @skill_groups, :staff_member => @staff_member} %>  
[...]
<% end %> 
```

现在，这个部分位于表单的一个区域中，该区域被 AJAX 回调替换。我最终从控制器响应 AJAX 请求所做的是：

```
render :partial => "staff_members/forms/personal_details", :locals => {:skill_groups => @skill_groups, :staff_member => @staff_member} 
```

但是，如果我这样做，那么表单会中断，因为我在 form_for 中使用的 FormBuilder 对象不再可用。我有什么方法可以在用于 AJAX 回调的部分中使用我的自定义 FormBuilder 对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-02T12:43:46.967

`fields_for`在你的局部使用。它执行类似的任务，但不包装表单标签。请参阅[API 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#M001386)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-10-18T22:56:03.500

这个怎么样？

```
 @template.with_output_buffer do
    @template.form_for @model_object do |f|
      f.fields_for :some_nested_attributes do |ff|
        render :partial => 'nested_attributes', :object => @model_object, :locals => {:form => ff}
      end
    end
  end 
```

如果您需要在部分中使用嵌套的fields_for，这将特别有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-01T20:31:08.173

您可以在控制器中实例化表单构建器的新实例，尽管这对我来说有点糟糕：

```
# in the controller
render :partial => {
  :f => MyFormBuilder.new(:staff_member, @staff_member, template),
  :skill_groups => @skill_groups,
  :staff_member => @staff_member
} 
```

或者，您可以将更多更新逻辑移动到客户端，这根本不需要您担心渲染任何内容。您可以通过 JS 更新值。不确定这是否适用于您的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-22T14:51:48.673

也许我在这里的游戏有点晚了，也许我没有正确理解这个问题，但是在 ApplicationHelper.rb 我认为你可以添加以下行：

```
ActionView::Base.default_form_builder = MyFormBuilder 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-19T23:15:34.790

您可以在您的 ajax 调用中提交 f.object_name 的内容（它也适用于部分）并使用它来呈现[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)中定义的标签，将其传递为第一个论点。

# html - 如何从电子邮件中删除 HTML 和附件？

> ID：371153
> 
> 赞同：1
> 
> 时间：2008-12-16T12:27:31.130
> 
> 标签：html, perl, email, attachment

我正在使用下面的程序对电子邮件进行排序并最终打印出来。某些邮件可能包含不利于打印的附件或 HTML 代码。有没有一种简单的方法可以从邮件中去除附件并去除 HTML，但不去除由 HTML 格式化的文本？

```
#!/usr/bin/perl
use warnings;
use strict;
use Mail::Box::Manager;

open (MYFILE, '>>data.txt');
binmode(MYFILE, ':encoding(UTF-8)');

my $file = shift || $ENV{MAIL};
my $mgr = Mail::Box::Manager->new(
    access          => 'r',
);

my $folder = $mgr->open( folder => $file )
or die "$file: Unable to open: $!\n";

for my $msg ( sort { $a->timestamp <=> $b->timestamp } $folder->messages)
{
    my $to          = join( ', ', map { $_->format } $msg->to );
    my $from        = join( ', ', map { $_->format } $msg->from );
    my $date        = localtime( $msg->timestamp );
    my $subject     = $msg->subject;
    my $body        = $msg->decoded->string;

    # Strip all quoted text
    $body =~ s/^>.*$//msg;

    print MYFILE <<"";
From: $from
To: $to
Date: $date
Subject: $subject
\n
$body

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T12:43:18.883

`Mail::Message::isMultipart`将告诉您给定消息是否有任何附件。 `Mail::Message::parts`会给你一个邮件部分的列表。

因此：

```
if ( $msg->isMultipart ) {
    foreach my $part ( $msg->parts ) {
        if ( $part->contentType eq 'text/html' ) {
           # deal with html here.
        }
        elsif ( $part->contentType eq 'text/plain' ) {
           # deal with text here.
        }
        else {
           # well?
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T12:39:13.510

剥离 HTML 方面在常见问题解答 #9（或 中的第一项`perldoc -q html`）中进行了说明。简单来说，相关的模块是 HTML::Parser 和 HTML::FormatText。

至于附件，带有附件的电子邮件作为 MIME 发送。从[这个示例](http://en.wikipedia.org/wiki/Multipart_message#Multipart_messages)中，您可以看到格式非常简单，您可以相当容易地提出解决方案，或者检查[CPAN 的 MIME 模块](http://search.cpan.org/search?query=MIME&mode=all)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T12:46:59.780

看起来有人已经[在 linuxquestions 论坛上解决了这个问题](http://www.linuxquestions.org/questions/programming-9/perl-mimehtml-mail-48546/)。

来自论坛：

```
 # This is part of Mail::POP3Client to get the headers and body of the POP3 mail in question
            $body = $connection->HeadAndBody($i);
            # Parse the message with MIME::Parser, declare the body as an entitty
            $msg = $parser->parse_data($body);
            # Find out if this is a multipart MIME message or just a plaintext
            $num_parts=$msg->parts;
            # So its its got 0 parts i.e. is a plaintext
            if ($num_parts eq 0) {
            # Get the message by POP3Client
            $message = $connection->Body($i);
            # Use this series of regular expressions to verify that its ok for MySQL
            $message =~ s/</&lt;/g;
            $message =~ s/>/&gt;/g;
            $message =~ s/'//g;
                                  }
            else {
                  # If it is MIME the parse the first part (the plaintext) into a string
                 $message = $msg->parts(0)->bodyhandle->as_string;
                  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T23:33:16.887

你在 perl Mail-Box-2.117 中有一个完整的例子：

[http://cpansearch.perl.org/src/MARKOV/Mail-Box-2.117/examples/strip-attachments.pl](http://cpansearch.perl.org/src/MARKOV/Mail-Box-2.117/examples/strip-attachments.pl)

# python - Python中的字符串转换

> ID：371155
> 
> 赞同：-3
> 
> 时间：2008-12-16T12:27:53.360
> 
> 标签：python, clr

我正在使用 Python 2.5。我导入的 DLL 是使用 CLR 创建的。DLL 函数正在返回一个字符串。我正在尝试对其应用“分区”属性。我做不到。甚至分区也不起作用。我认为“从 CLR 返回的所有字符串都作为 Unicode 返回”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T12:46:24.400

你能发布你的错误信息吗？你能发布你有什么类型的对象（`type(yourvar)`）？

请检查您是否有`partition(sep)`此对象的方法 ( `dir(yourvar)`)。

应用`partition`方法应如下所示：

```
>>> us=u"Привет, Unicode String!"
>>> us.partition(' ')
(u'\u041f\u0440\u0438\u0432\u0435\u0442,', u' ', u'Unicode String!') 
```

您也可以尝试`split`使用函数而不是`partition`：

```
>>> from string import split
>>> split(us,' ',1)
[u'\u041f\u0440\u0438\u0432\u0435\u0442,', u'Unicode String!'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T12:46:26.943

如果*CLR*是指[.NET CLR](http://msdn.microsoft.com/en-us/library/ddk909ch.aspx)，请尝试使用[IronPython](http://www.codeplex.com/IronPython)：

> IronPython 是在 .NET 上运行的 Python 编程语言的新实现。它支持具有完全动态编译的交互式控制台。它与 .NET Framework 的其余部分很好地集成，使 Python 程序员可以轻松使用所有 .NET 库，同时保持与 Python 语言的完全兼容性。

在 IronPython 中，加载（导入）和调用 .NET dll 是有据可查且直截了当的。

# sql - 与包含值的 nn 表交叉连接（枢轴）

> ID：371162
> 
> 赞同：0
> 
> 时间：2008-12-16T12:31:16.490
> 
> 标签：sql, linq, pivot, cross-join

我有 3 张桌子：

```
TABLE MyColumn (
  ColumnId INT NOT NULL,
  Label VARCHAR(80) NOT NULL,
  PRIMARY KEY (ColumnId)
)

TABLE MyPeriod (
  PeriodId CHAR(6) NOT NULL, -- format yyyyMM
  Label VARCHAR(80) NOT NULL,
  PRIMARY KEY (PeriodId)
)

TABLE MyValue (
  ColumnId INT NOT NULL,
  PeriodId CHAR(6) NOT NULL,
  Amount DECIMAL(8, 4) NOT NULL,
  PRIMARY KEY (ColumnId, PeriodId),
  FOREIGN KEY (ColumnId) REFERENCES MyColumn(ColumnId),
  FOREIGN KEY (PeriodId) REFERENCES MyPeriod(PeriodId)
) 
```

MyValue 的行仅在提供实际值时创建。

我希望我的结果以表格方式显示，如：

```
Column   | Month 1 | Month 2 | Month 4 | Month 5 |
Potatoes |   25.00 |    5.00 |    1.60 |    NULL |
Apples   |    2.00 |    1.50 |    NULL |    NULL | 
```

我已经成功创建了一个交叉连接：

```
SELECT
    MyColumn.Label AS [Column],
    MyPeriod.Label AS [Period],
    ISNULL(MyValue.Amount, 0) AS [Value]
FROM
    MyColumn CROSS JOIN
    MyPeriod LEFT OUTER JOIN
    MyValue ON (MyValue.ColumnId = MyColumn.ColumnId AND MyValue.PeriodId = MyPeriod.PeriodId) 
```

或者，在 linq 中：

```
from p in MyPeriods
from c in MyColumns
join v in MyValues on new { c.ColumnId, p.PeriodId } equals new { v.ColumnId, v.PeriodId } into values
from nv in values.DefaultIfEmpty()
select new {
    Column = c.Label,
    Period = p.Label,
    Value = nv.Amount
} 
```

并了解如何在 linq 中创建一个支点（[此处](https://stackoverflow.com/questions/183585/sql-command-to-linq-pivoting)或[此处](https://stackoverflow.com/questions/167304/is-it-possible-to-pivot-data-using-linq)）：

（假设 MyDatas 是具有上一个查询结果的视图）：

```
from c in MyDatas
group c by c.Column into line
select new
{
  Column = line.Key,
  Month1 = line.Where(l => l.Period == "Month 1").Sum(l => l.Value),
  Month2 = line.Where(l => l.Period == "Month 2").Sum(l => l.Value),
  Month3 = line.Where(l => l.Period == "Month 3").Sum(l => l.Value),
  Month4 = line.Where(l => l.Period == "Month 4").Sum(l => l.Value)
} 
```

但我想找到一种方法来创建一个结果集，如果可能的话，Month1, ... 属性是动态的。

注意：导致 n+1 查询的解决方案：

```
from c in MyDatas
group c by c.Column into line
select new
{
    Column = line.Key,
    Months =
        from l in line
        group l by l.Period into period
        select new
        {
            Period = period.Key,
            Amount = period.Sum(l => l.Value)
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-16T16:19:42.987

您是否有日历期间（1-12）或会计期间（1-12 或 1-13，具体取决于年份）？

你会只运行一年的报告吗？

如果可能的话，我会将 PeriodId 分解为 Year 和 Period 两个字段。这将使选择特定年份变得更容易。查询会更简单。

# c# - 带有自定义基础集合的 Linq

> ID：371174
> 
> 赞同：8
> 
> 时间：2008-12-16T12:37:55.850
> 
> 标签：c#, linq

在使用自定义集合对象时，我经常发现 linq 存在问题。他们经常被辩护为

基础集合

```
abstract class BaseCollection<T> : List<T> { ... } 
```

集合定义为

```
class PruductCollection : BaseCollection<Product> { ... } 
```

有没有比 addrange 或 concat 更好的方法将 linq expession 的结果添加到这个集合中？

```
var products = from p in HugeProductCollection
               where p.Vendor = currentVendor
               select p;
PruductCollection objVendorProducts = new PruductCollection();
objVendorProducts.AddRange(products); 
```

如果从 linq 查询返回的对象是我的自定义集合类型，那就太好了。因为您似乎需要两次枚举集合才能执行此操作。

**编辑**：阅读答案后，我认为最好的解决方案是实现 ToProduct() 扩展。想知道 c#4.0 中的协变/逆变是否有助于解决这些问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T12:55:02.243

问题是 LINQ 通过扩展方法`IEnumerable<T>`知道如何构建数组、列表和字典，它不知道如何构建您的自定义集合。你可以让你的自定义集合有一个构造函数，`IEnumerable<T>`或者你可以写你。前者允许您直接在构造函数中使用 LINQ 结果，后者允许您使用扩展装饰 LINQ 语句并取回您想要的集合。无论哪种方式，您都需要在构造函数或扩展中进行从通用集合到专用集合的某种转换。或者你可以两者都做...

```
public static class MyExtensions
{
     public static ProductCollection
                      ToProducts( this IEnumerable<Product> collection )
     {
          return new ProductCollection( collection );
     }
}

public class ProductCollection : BaseCollection<Product>
{
     ...

     public ProductCollection( IEnumerable<Product> collection )
              : base( collection )
     {
     }

     ...
 }

var products = (from p in HugeProductCollection
                where p.Vendor = currentVendor
                select p).ToProducts(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T12:56:00.260

我可以建议你一种方法，你不必枚举集合 2 次：

```
abstract class BaseCollection<T> : List<T>
{
    public BaseCollection(IEnumerable<T> collection)
        : base(collection)
    {
    }
}

class PruductCollection : BaseCollection<Product>
{
    public PruductCollection(IEnumerable<Product> collection)
        : base(collection)
    {
    }
}

var products = from p in HugeProductCollection
               where p.Vendor = currentVendor
               select p;
PruductCollection objVendorProducts = new PruductCollection(products); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-26T13:04:03.263

这可以与 BindingList 一起使用吗？因为 BindingList 没有构造函数，它可以接受 IEnumerable 但确实实现了它。

BindingList：集合、IBindingList、IList、ICollection、IEnumerable、ICancelAddNew、IRaiseItemChangedEvents

# exchange-server - MS Exchange 集成

> ID：371175
> 
> 赞同：0
> 
> 时间：2008-12-16T12:38:16.897
> 
> 标签：exchange-server

是否存在第三方组件可让您将日历应用程序与 MS Exchange 无缝集成？

是否有任何开源组件可以做到这一点？

这是关于日历，而不是邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T12:59:48.863

默认情况下，Exchange 现在使用 WebDAV 来授予对邮件和日历的访问权限。您可能想看看[Evolution](http://en.wikipedia.org/wiki/Novell_Evolution)邮件客户端是如何做到的。

# gac - 我的 DLL 具有强名称，但 WSPBuilder 报告它们不是

> ID：371181
> 
> 赞同：1
> 
> 时间：2008-12-16T12:39:33.133
> 
> 标签：gac, strong-typing, wspbuilder

WSPBuilder

版本：0.9.8.0830 由 Carsten Keutmann GPL 许可证 2007 创建

安装和部署 [MYDLL] 无法部署解决方案 内部异常 (1)：此解决方案包含一个或多个针对全局程序集缓存的程序集。您应该为将在全局程序集缓存中的任何程序集使用强名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-08-03T17:41:18.357

我有同样的问题，但对我有用的是删除 bin 和 obj 文件夹中的所有文件，然后重建 WSP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T12:53:58.860

`Delay sign only`就我而言，在为一个项目使用选项时，我遇到了一些奇怪的错误（不记得确切的消息） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T13:00:29.970

我找到了问题，但没有找到解决方案，看来我的项目确实是一个 12 hive，也设置为输出一个类库，这个类库正在包含在 WSP 中。

所以...我需要确保 bin 文件夹确实从构建过程中排除。我在程序文件中设置了值，但还没有反应...

现在要重新启动服务器...

**后来：**好的 - 修复是重新启动服务器，出于某种原因这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-13T14:03:27.833

我遇到了同样的问题，一个解决方案，多个项目，一个无法编译的问题是使用来自另一个项目的对象。

我试过清除 bin & obj 文件夹，以及重新启动服务器。我想我会使用 gacutil 将文件 dll 复制到 gac。

# html - 开发HTML邮件通讯，刷新Apple Mail

> ID：371183
> 
> 赞同：5
> 
> 时间：2008-12-16T12:40:13.740
> 
> 标签：html, email, caching, apple-mail

我正在使用 PHP & PEAR 开发一个 HTML 通讯系统。它可以很好地发送电子邮件。

但是我不能强制 Apple Mail 从服务器重新加载图像。我试过了：

*   重新启动邮件
*   清除 ~/Library/MailDownloads
*   清除~/库/缓存/邮件
*   清空 Safari 缓存

有谁知道 Apple Mail 将图像缓存在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-27T21:53:07.490

您是否可以选择向所有图像 URL 添加虚拟查询字符串？

```
<img src="http://example.com/images/hello.png?343882881923"/> 
```

您只需更新查询字符串以防止使用缓存的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T23:14:07.253

您可以使用[OnyX](http://www.titanium.free.fr/)清除所有应用程序缓存并调整操作系统的其他方面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-09-27T08:53:37.757

我刚遇到这个问题，可以通过退出Mail并删除来解决：

~/Library/Caches/com.apple.mail/Cache.db

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-01T22:57:49.113

使用最新的 FSeventer 程序，我将缓存文件跟踪到：

/private/var/folders/Sl/rand chars+++TM/-Caches-/com.apple.mail/Cache.db

我尝试关闭互联网连接，删除文件，然后查看 HTML 新闻通讯。没有加载图像。重新连接并查看 HTML 邮件后，Cache.db 文件的大小增加到 1MB。

似乎还有另一个中间缓存。我在查看两个不同的时事通讯时尝试删除缓存和断开连接。他们都正确显示。在我退出并重新打开邮件后，它们的图像没有显示。

所以可以删除缓存，但是我还没有找到强制刷新图像的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T03:47:45.620

我今天花了一些时间玩这个，并且能够轻松地复制这个问题。邮件中的图像**不会改变**- 无论您在服务器上更改图像多少次，当您第一次查看电子邮件时显示的任何图片似乎都与该消息保持一致。即使我将消息转发给自己，它也不会重新加载图片。哇。而且我也无法在任何缓存中的任何地方找到图像。

我确实找到了去年夏天对[同样问题](http://discussions.apple.com/thread.jspa?threadID=1575939&tstart=73)的参考，但没有真正的答案。一个人同意 Leandro Ardissone 的回答，并建议使用 OnyX 来“破坏应用程序缓存”，但这只是一次修复。

Ates Goral 建议的“虚拟查询字符串”对我来说效果很好，所以如果你每次更改图片时都能处理更改，那似乎是你最好的选择。

希望我能提供更多帮助，但我很难过。

我认为我们需要来自 Apple Mail 小组的人来启发我们找到真正的解决方法！

# svn - TFS 转 SVN

> ID：371203
> 
> 赞同：21
> 
> 时间：2008-12-16T12:46:44.633
> 
> 标签：svn, tfs

您能推荐任何将源（带有历史记录）从 TFS 迁移到 SVN 的工具吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-16T12:49:45.423

你看过[tfs2svn](http://sourceforge.net/projects/tfs2svn/)吗？

> tfs2svn 是一个 Windows 应用程序，它将 Team Foundation Server (TFS) 存储库转换为 Subversion (SVN) 存储库，保留历史记录、分支和提交信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-29T01:36:47.957

我们正在将 TFS 2010 集合迁移到 svn。为了让它对我们有用，我需要下载和修改 TFS2SVN 的源代码，以便它理解我们制作的集合。

目前我只是硬编码了这些值，因为我们只会使用它两次。我们修改了 tfs2svn\trunk\Colyar.SourceControl.Tfs2Svn\Tfs2SvnConverter.cs 如下

```
public Tfs2SvnConverter(string tfsPath, string svnPath, bool createSvnFileRepository, int fromChangeset, string workingCopyPath, string svnBinFolder, bool doInitialCheckout, string tfsUsername, string tfsPassword, string tfsDomain)
    {
        ParsePaths(tfsPath, svnPath);
        this._tfsServer = "http://<tfs domain>:8080/tfs/<team project collection name>";
        this._tfsRepository = "<remote source location>"; // "$/<team project name>/..."
        //this._tfsExporter = new TfsExporter(this._tfsServer, this._tfsRepository, workingCopyPath, fromChangeset, tfsUsername, tfsPassword, tfsDomain);
        TfsClient.Provider.Connect(this._tfsServer, this._tfsRepository, workingCopyPath, fromChangeset, tfsUsername, tfsPassword, tfsDomain);

        this._svnImporter = new SvnImporter(this._svnRepository, workingCopyPath, svnBinFolder);
        _createSvnFileRepository = createSvnFileRepository;
        _doInitialCheckout = doInitialCheckout;
        _workingCopyPath = workingCopyPath;

        HookupTfsExporterEventHandlers();
    } 
```

# error-handling - 如何在 Windows Installer 中使用托管自定义操作显示错误消息

> ID：371204
> 
> 赞同：9
> 
> 时间：2008-12-16T12:46:59.250
> 
> 标签：error-handling, windows-installer, managed, custom-action

我正在编写托管自定义操作。我正在使用 Windows Installer Xml 中的 DTF 框架将托管 dll 包装到可用的 CA dll 中。CA 做了它应该做的事情，但我仍然遇到错误处理问题：

```
Dim record As New Record(1)

' Field 0 intentionally left blank
' Field 1 contains error number
record(1) = 27533
session.Message(InstallMessage.Error, record) 
```

上面的代码在 MSI 日志中生成以下文本：

> MSI (c) (C4 ! C6) [13:15:08:749]：产品：TestMSI -- 错误 27533。区分大小写的密码不匹配。

错误编号是指包含在 MSI 中的错误表中的代码。上面显示的消息是正确的。

我的问题是：为什么 Windows Installer 不创建一个对话框来通知用户错误？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-23T04:29:40.077

MSI 可以做到这一点，但您需要为 messageType 参数添加一些额外的值。

例如。

```
Record record = new Record();
record.FormatString = string.Format("Something has gone wrong!");

session.Message(
    InstallMessage.Error | (InstallMessage) ( MessageBoxIcon.Error ) |
    (InstallMessage) MessageBoxButtons.OK,
    record ); 
```

有关更多详细信息，请参阅wix-users 邮件列表中的[此线程](http://www.mail-archive.com/wix-users@lists.sourceforge.net/msg24901.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-11T16:00:28.193

根据Wix：Nick Ramirez 的Windows Installer XML 开发人员指南，我遇到了同样的问题，当从UI 控件调用自定义操作时，日志和消息方法不起作用。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-03-17T15:49:16.990

如果您希望显示包含该消息的对话框，您必须自己完成。

下面是一些我用来在运行 SQL 的托管自定义操作中进行错误处理的代码。如果安装使用完整的 UI 运行，它会显示一个消息框。它在 c# 中，但希望你能明白。

```
 private void _handleSqlException(SqlException ex)
    {
        StringBuilder errorMessage = new StringBuilder();
        errorMessage.Append("A SQL error has occurred.");
        for (int i = 0; i < ex.Errors.Count; i++)
        {
            errorMessage.Append("Index #" + i + "\n" +
                "Message: " + ex.Errors[i].Message + "\n" +
                "LineNumber: " + ex.Errors[i].LineNumber + "\n" +
                "Source: " + ex.Errors[i].Source + "\n" +
                "Procedure: " + ex.Errors[i].Procedure + "\n");
        }
        session.Log(errorMessage);
        if (session["UILevel"] == "5")
        {
            MessageBox.Show(errorMessage);
        }
    } 
```

# asp.net - 我可以在 IIS 5 中自动创建 .NET Web 应用程序/虚拟目录吗？

> ID：371207
> 
> 赞同：3
> 
> 时间：2008-12-16T12:48:57.000
> 
> 标签：asp.net, iis, deployment, iis-5

我问这个[我可以在 IIS 中自动创建一个 .NET Web 应用程序吗？](https://stackoverflow.com/questions/313877/can-i-automate-creating-a-net-web-application-in-iis)不久前，得到了 IIS 6 和 IIS 7 的解决方案：

*   IIS6：`iisweb /create C:\Rome "My Vacations" /d www.reskit.com /dontstart`
*   IIS7： `%windir%\system32\inetsrv\AppCmd ADD SITE /name:MyNewSite /bindings:http/*:81: /physicalPath:c:\inetpub\mynewsite`

但我刚刚回到实际项目，结果证明我需要在（震惊）IIS 5.1 上部署

有没有人有任何想法？

说清楚：

**我想使用 IIS，但我想在不打开 IIS Microsoft 管理控制台 (MMC) 的情况下自动创建 Web 应用程序（最好是批处理文件）**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-16T13:14:57.180

您可以在 VBScript 中访问 IIS 5.1 元数据库，这允许您创建一个虚拟目录。例如，这应该设置一个名为“TestDir”的虚拟目录，它指向文件夹 C:\inetpub\wwwroot\Test

```
strComputer = "localhost"
strVdirName = "TestDir"
strVdirPath = "C:\Inetpub\wwwroot\Test"

set objIIS = GetObject("IIS://" & strComputer & "/W3SVC/1")
set objWebSite = objIIS.GetObject("IISWebVirtualDir","Root")
set objVdir = objWebSite.Create("IISWebVirtualDir",strVdirName)
objVdir.AccessRead = True
objVdir.Path = strVdirPath
objVdir.AppCreate (True)
objVdir.SetInfo
WScript.Echo "Successfully created virtual directory: " & objVdir.Name 
```

# css - CSS中的整页模糊

> ID：371209
> 
> 赞同：33
> 
> 时间：2008-12-16T12:49:16.563
> 
> 标签：css, blur

如何使用 CSS 模糊整个页面？允许使用其他元素，例如图像。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-19T07:59:19.900

这在 Firefox 和 WebKit 中使用`filter: blur(radius)`. 请参阅[我可以使用：](http://caniuse.com/#feat=css-filters)浏览器可以支持的 CSS 过滤器。

```
.blurredElement {

     /* Any browser which supports CSS3 */
    filter: blur(1px);

    /* Firefox version 34 and earlier */
    filter: url("blur.svg#gaussian_blur");

    /* Webkit in Chrome 52, Safari 9, Opera 39, and earlier */
    -webkit-filter: blur(1px);
} 
```

Firefox 34 或更低版本的 blur.svg 如下所示：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <filter id="gaussian_blur">
            <feGaussianBlur in="SourceGraphic" stdDeviation="1" />
        </filter>
    </defs>
</svg> 
```

您可以调整半径，但较低的值意味着更好的性能。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-26T22:38:47.430

您可以将`filter`属性与 一起使用`blur`，尽管它没有得到广泛支持：http: [//jsfiddle.net/GkXdM/1/](http://jsfiddle.net/GkXdM/1/)。它在 Chrome 上受支持，但在整个页面上使用时会带来很大的性能损失。

```
body {
    filter: blur(2px);
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-16T13:12:46.453

我不确定这是否是您的意思，但是通过创建具有 background-color 和 opacity 属性集的全高、全宽 DIV 元素来创建常见的模糊效果。

```
/* DIV-element with black background and 50% opacity set */
div.overlay {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    background: #000;
    opacity: 0.5;
    filter: alpha(opacity = 50); /* required for opacity to work in IE */
} 
```

由于您的页面高度可能会有所不同，因此您可能希望使用 Javascript 来设置此元素的高度。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-29T18:04:35.343

~~此处的真实演示：http: [//premium.wpmudev.org/project/e-commerce/](http://premium.wpmudev.org/project/e-commerce/)（点击视频）。~~

当thickbox打开时，他们将类添加`thickbox-open`到正文中，并从那里定位和设置包含元素的整个内容（覆盖和弹出窗口除外），如下所示：

```
.thickbox-open #main-container {
  -webkit-filter: blur(2px);
  -moz-filter: blur(2px);
  -ms-filter: blur(2px);
  -o-filter: blur(2px);
  filter: blur(2px); 
} 
```

好吧，不，仍然不能完全使用（[http://caniuse.com/css-filters](http://caniuse.com/css-filters)），但我们已经到了那里。

如上所述应用于包含元素，而不是`body`因为子元素不能否定模糊过滤器。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-11-01T13:33:52.220

这仅在 Firefox 中是可能的。以下是步骤（请参见[此处](http://css-plus.com/examples/2010/05/how-to-add-a-gaussian-blur-effect-to-elements-within-firefox/)的示例）。

您需要 XHTML 文档类型（因为我们使用的是 XML SVG 标记）。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg"> 
```

在应出现模糊的位置插入 SVG 元素。

```
<div class="blurDiv"></div>
<svg:svg>
    <!-- Filter -->
    <svg:filter id="blurLayer">
         <!-- Blur and attributes -->
         <svg:feGaussianBlur stdDeviation="0.9"/>
    </svg:filter>
</svg:svg> 
```

包括内联样式（不是来自外部 css 文件）。

```
<style type="text/css">
    div.blurDiv { filter:url(#blurLayer); }
</style> 
```

这为您提供了真正的模糊效果（如缩小效果），而不是您在其他任何地方都能找到的标准透明玻璃外观。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-01-27T23:09:37.350

这是一个快速而肮脏的解决方案，如果需要，可以使用它，在 Firefox 和 chrome 上测试，但应该适用于兼容的浏览器

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Blur</title>
<style type="text/css">
#f0,#f1,#f2{position:absolute;left:0px;top:0px;height:95%}
#f0{filter:alpha(opacity=50);opacity: 0.15;-moz-opacity:0.15;z-index:15}
#f1{filter:alpha(opacity=25);opacity: 0.25;-moz-opacity:0.25;z-index:2}
#f2{filter:alpha(opacity=75);opacity: 0.75;-moz-opacity:0.75;}
.fin{margin-right:auto;margin-left:auto}
body{display:none}
</style>
<script type="text/javascript">
var winX=window.innerWidth-20;
var winY=screen.availHeight-10;
var count=0;
var maxCount=50;
var goBlur=true;

function ele(id) {
    return document.getElementById(id);
}
function runBlur() {
    if(goBlur) {
        for(var i=0; i<2; i++) {
            var x = Math.random()<0.5?-1:1;
            var y = Math.random()<0.5?1:-1;
            if(ele("f"+i).offsetLeft >3)
                x=-1;
            else if(ele("f"+i).offsetLeft<-3)
                x=1;
            if(ele("f"+i).offsetLeft >3)
                y=-1;
            else if(ele("f"+i).offsetLeft<-3)
                y=1;

            ele("f"+i).style.left = (ele("f"+i).offsetLeft + x)+"px";
            ele("f"+i).style.top = (ele("f"+i).offsetTop + x)+"px";
        }
    }
    count++
    if(count>maxCount) {
        count=0;
        if(goBlur)
            goBlur=false;
        else
            goBlur=true;
        for(var i=0; i<3; i++) {
            ele("f"+i).style.left = "0px";
            ele("f"+i).style.top = "0px";
        }
    }
    setTimeout("runBlur()",200);
}

function pageLoaded() {
    var content = document.body.innerHTML;
    var rewriteBody="";
    for(var i=0; i<3; i++) {
        rewriteBody+='<div id="f'+i+'"><div class="fin">'+content+'</div></div>';
    }
    document.body.innerHTML=rewriteBody;
    setTimeout("setUp()",200);
}
function setUp() {

    for(var i=0; i<3; i++) {
        ele("f"+i).style.width=winX+"px";
    }

    document.body.style.display="block";
    runBlur();
}
</script>
    </head>
    <body onload="pageLoaded()">
<h1 style="color:#900">Page blur example</h1>
You can put any page content and html you want here.
    </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-16T12:59:16.400

无论你想做什么，如果它不仅仅是为了好玩，就不要这样做:)

我认为您必须通过仅适用于 IE 而不适用于 Firefox 的模糊过滤器循环所有元素。

这是在 FF 中实现 IMO 丑陋模糊的丑陋解决方案：http: [//kilianvalkhof.com/2008/css-xhtml/cross-browser-text-shadow/](http://kilianvalkhof.com/2008/css-xhtml/cross-browser-text-shadow/)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2011-10-12T01:07:22.987

在高度 100% 的问题上，没有 CSS 解决方案，即使在 CSS3 中也是如此，但有一种 JQuery 方法可以做到这一点。如果元素是#modal，请在 CSS 文件中定义所有其他属性，甚至不要在 CSS 中提及 height 属性。然后将以下 JQuery 代码放入您的 HTML 中，如下所示：

```
<script type="text/javascript">
$(function(){
    $('.modal') .css({'height': (($(window).height()))});
});
$(window).resize(function(){
    $('.modal') .css({'height': (($(window).height()))});
});
</script> 
```

这当然需要 JQuery，如果内容高于视口，可能会导致问题。至于动态模糊其背后内容的能力，这是我很想知道的。

# c# - 可以验证 .NET 属性参数吗？

> ID：371218
> 
> 赞同：1
> 
> 时间：2008-12-16T12:54:25.740
> 
> 标签：c#, attributes

我想知道是否可以验证（自定义）.net 属性的参数。例如：如果我有一个采用正整数的属性，我可以在提供负值时强制编译时错误吗？

[DonkeyAttribute(1)] //确定

[DonkeyAttribute(-828)] //错误

在这个例子中，我可以使用一个无符号整数（但我相信这是不符合 cls 的？）推荐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T13:05:01.023

您可以通过单元测试来强制执行此操作；可能与我为[这个问题](https://stackoverflow.com/questions/19454/enforce-attribute-decoration-of-classesmethods#19455)提出的解决方案类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T13:02:49.123

我不认为这是正常的，但是[本文](http://karlagius.wordpress.com/2008/01/29/validating-attribute-usage-with-postsharp-aspects/)详细介绍了使用[PostSharp](http://www.postsharp.org/)的解决方案。不确定它是否适合您的目的，但放手吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T13:06:03.690

直接地？不，不重写 csc 或 vbc。大多数人会在运行时执行上述验证。

[然而，在 PostSharp Aspects 上](http://karlagius.wordpress.com/2008/01/29/validating-attribute-usage-with-postsharp-aspects/)，通过谷歌搜索找到了这篇博文。从技术上讲，它并没有从编译器进行验证，但它确实提供了编译时的检查。你可以在[这里查看](http://www.postsharp.org/)。可以在[此处](http://karlagius.wordpress.com/2008/01/03/aop-using-postsharp-laos/)找到来自同一作者的有关 PostSharp 的其他注释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T13:20:03.847

您可以通过从 System.Attribute 继承来创建自定义属性。在自定义构造函数中，您应该能够检查参数。

# sql-server - 更改 ASPNETDB 名称

> ID：371227
> 
> 赞同：3
> 
> 时间：2008-12-16T12:59:35.433
> 
> 标签：sql-server, sql-server-2005, sql-server-2005-express, aspnetdb

无论如何要更改 ASPNETDB 并使用 SQLExpress (2005) 用户实例？

我已将 web.config 的连接字符串更改为

```
<remove name="LocalSqlServer"/>
<add name="LocalSqlServer"
     connectionString="Data Source=.\SQLEXPRESS;
     AttachDbFilename=|DataDirectory|\Kooft.mdf;
     User Instance=true;
     Integrated Security=True;
     Initial Catalog=Kooft;"
  providerName="System.Data.SqlClient" /> 
```

但每次我使用 ASP.Net 配置工具时，它都会在我的 App_Data 文件夹中创建另一个 ASPNETDB.mdf 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T13:24:56.053

1.  从您的 Framework 2.0 文件夹运行 aspnet_regsql.exe，我的是：

    C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727

2.  完成向导并选择您也希望添加 AspNetDB 表的数据库。

3.  设置连接字符串以连接到您的数据库，例如（方括号中的任何内容都可能需要更改并删除括号。

4.  更新 web.config 的成员资格提供程序部分，并将以下设置设置为上面的连接字符串名称：

    connectionStringName="INSERTCONNNSTRINGNAME"

然后你应该准备好滚动了。请记住在 web.config 中可能已经拥有的任何角色或个性化提供程序上更改相同的设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T13:26:00.840

首先，在您的 SQL Express 实例中创建一个新的空数据库。

然后运行可以在此处找到的 aspnet_regsql.exe 工具：

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_regsql.exe 
```

这将打开一个 GUI 向导，允许您选择要使用 aspnet 提供程序（成员资格、配置文件、角色）的默认模式设置的数据库服务器和数据库。

适当配置数据库的安全性 - 为获得最佳结果，您可能希望启用集成安全性，因此请确保运行网站的帐户有权访问数据库，为您创建了许多数据库角色 -将您的帐户添加到相应的帐户。

然后，在你的 webconfig 中，你会有类似的东西：

```
 <connectionStrings>
    <remove name="LocalSqlServer"/>
    <add name="LocalSqlServer" 
        connectionString="Data Source=[ComputerName]\SQLEXPRESS;Initial Catalog=[DatabaseName];Integrated Security=True" 
        providerName="System.Data.SqlClient"/>
    </connectionStrings> 
```

更新的关键部分有：

*   [ComputerName] - 这应该是 SQL Express 安装的实例名称。
*   [DatabaseName] - 这应该是您在前两步中使用的数据库的名称。

这当然是我启动和运行的方式。

# c# - 在 C# 中生成整数集

> ID：371237
> 
> 赞同：3
> 
> 时间：2008-12-16T13:04:32.350
> 
> 标签：c#, set

在 F# 中，您可以生成一组数字，只需说出 [1..100]。

我想在 C# 中做类似的事情。到目前为止，这是我想出的：

```
public static int[] To(this int start, int end)
{
    var result = new List<int>();
    for(int i = start; i <= end; i++)
        result.Add(i);
    return result.ToArray();
} 
```

通过这样做，我现在可以通过说 1.To(100) 创建一个集合

不幸的是，这不像 [1..100] 那样可读。有没有人想出更好的方法在 C# 中做到这一点？如果它是小写的，它是否更具可读性？1.to(100)，例如？或者，“到”是一个坏词吗？像 1.Through(100) 这样的东西更具可读性吗？

只是在寻找一些想法。有没有其他人想出一个更优雅的解决方案？

**编辑：** 阅读回复后，我使用范围重写了我的 To 方法：

```
public static int[] To(this int start, int end)
{
    return Enumerable.Range(start, end - start + 1).ToArray();
} 
```

我仍在寻找有关 1.To(100) 可读性的想法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T13:07:06.993

Enumerable.Range(1, 100);

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-16T13:17:39.577

我喜欢使用`To`. 替代方案`Enumerable.Range`有一个微妙的缺陷imo。第二个参数**不是**最后一个元素的*值，是枚举的**长度*。这是我过去所做的：

```
public IEnumerable<int> To(this int start, int stop)
{
  while (start <= stop)
    yield return start++;
} 
```

编辑：如果您希望结果为`int[]`，只需添加`.ToArray()`：

```
int[] theSet = 1.To(100).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T13:09:10.780

我认为类似`Set(1,100)`或`IntSequence(1,100)`比使用扩展方法更容易阅读。

不过个人意见...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T16:32:43.193

您对自己问题的回答很好。如果您担心性能，请不要使用列表。构建一个列表并不断扩展它是愚蠢的。只需构造一个适当大小的数组。使用扩展方法

```
public static int[] To(this int num)
    {
        //do work
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T17:12:02.833

我认为您太担心该语言无法准确表达您想要的特定句法内容。

在我看来，扩展方法是一个很好的糖，但我想知道你是否真的使用它来证明扩展方法的“惊喜”是合理的。

在 C# 语言的领域内，通过方法名称拼出您要执行的操作更为合适。这感觉更像 Ruby 而不是 C#。这感觉更像是它想独自上课，特别是如果您想添加带有跳过模式的范围（即，从 1 到 10 的数字，三个）。我觉得

```
public class RangedArray {
    public static int[] Generate(int from, into to, int by=1) { /* ... */ }
} 
```

在 C# 中表达这一点是完全可以接受的。

# c# - 从 Access 运行时，UPDATE 查询工作正常，但在 C# 应用程序中引发 SQL 语法错误

> ID：371246
> 
> 赞同：0
> 
> 时间：2008-12-16T13:07:25.450
> 
> 标签：c#, sql, oledb, sql-update

我有一个非常简单的更新语句，它将更新邮件服务器设置和网络凭据信息......当我在 Access 中运行它时查询工作正常，但 C# 不断给我错误，指出我的 SQL 语法错误......我有一个数据访问图层（dal类）和更新实例方法粘贴在下面......但问题一定是其他因为我已经以这种方式更新了很多东西，但这次它不会做......任何线索将不胜感激。提前谢谢。

更新 DAL 类中的实例方法 ..（这应该是数据访问层 :) 我只是一名管理专业毕业生 :P

```
public int UpdateRow(string Query, bool isSP, params OleDbParameter[] args)
{
    int affectedRows = -1;
    using (con = new OleDbConnection(connStr))
    {
        using (cmd = con.CreateCommand())
        {
            cmd.CommandText = Query;
            if (isSP)
            {
                cmd.CommandType = CommandType.StoredProcedure;
            }
            if (args != null)
            {
                foreach (OleDbParameter prm in args)
                {
                    cmd.Parameters.Add(prm);
                }
            }

            try
            {
            con.Open();
            affectedRows = cmd.ExecuteNonQuery();
            }
            catch(OleDbException ex)
            {
            throw ex;
            }
            catch (Exception ex)
            {
            throw ex;
            }
        }
    }
    return affectedRows;
} 
```

以及将进行更新的 ASP.NET 代码隐藏 =

```
protected void Update_Click(object sender, EventArgs e) {
DAL dal = new DAL();
string upt = string.Format("UPDATE [MailConfig] SET Server='{0}', Username='{1}', Password='{2}', AddressFrom='{3}', DisplayName='{4}'",server.Text,username.Text,password.Text,replyto.Text,displayname.Text);
dal.UpdateRow(upt,false,null);
LoadData();
} 
```

和平！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T13:32:51.887

尝试将您的字段名称包装在 [ ] 中。过去我遇到过某些字段名称的问题，例如用户名和密码以及计数等，被识别为保留字并搞砸了 sql 给我一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T13:13:49.820

首先 - 不要`string.Format`在这里使用。使用参数，并在命令中添加参数。现在，您对 SQL 注入攻击持开放态度。想想“[鲍比桌](http://xkcd.com/327/)”。

重新“声明我的 SQL 语法错误” - 你能引用确切的错误吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T13:14:35.373

首先，您的更新中没有 where 子句，因此它将更新所有行，并违反导致错误的键约束（如果有的话）。

其次，运行这种代码会让你很容易受到 SQL 注入的影响，如果有人输入了一个嵌入了 sql 命令的用户名，你可能会丢失所有数据。

您应该使用参数化查询。您在 sql 命令中使用 @paramname 而不是使用 {4} 指定参数，然后使用命令对象执行 accessCommand.parameters.AddWithValue("@paramname", value)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T13:20:38.307

您正在使用 StoredProcedure 的 CommandType，但您的查询不是存储过程名称，它是一个没有 where 子句的 sql 查询。

```
UPDATE [MailConfig] 
SET Server='{0}', 
    Username='{1}', 
    Password='{2}', 
    AddressFrom='{3}', 
    DisplayName='{4}'" 
```

因此，您需要删除命令类型行，或将其更改为正确的命令类型 CommandType.Text，并添加 Where 子句指定要影响的行。

我认为 Access 甚至没有存储过程，因此没有使用该命令类型。

使用存储过程的命令示例如下：

```
string sqlCommString = "QCApp.dbo.ColumnSeek";
SqlCommand metaDataComm = new SqlCommand(sqlCommString, sqlConn);
metaDataComm.CommandType = CommandType.StoredProcedure; 
```

该类型的命令字符串只是存储过程的名称。

# c# - 对在远程桌面上运行的程序使用调试模式

> ID：371248
> 
> 赞同：0
> 
> 时间：2008-12-16T13:08:42.873
> 
> 标签：c#, debugging, pinvoke, remote-desktop

我有一个专门用于远程桌面连接的短程序，该连接已设置为仅运行该程序，不允许任何其他访问远程计算机。以前，程序只是退出，让连接终止，但是速度很慢，所以我写了下面的代码，在程序运行完成后终止远程会话。

```
 [DllImport("wtsapi32.dll", SetLastError = true)]
    static extern bool WTSLogoffSession(IntPtr hServer, int SessionId, bool bWait);

    private IntPtr WTS_CURRENT_SERVER_HANDLE;
    private const int WTS_CURRENT_SESSION = -1;

    ...

    private void HardTerminalExit()
    {
        WTSLogoffSession(WTS_CURRENT_SERVER_HANDLE, WTS_CURRENT_SESSION, false);
    } 
```

当该程序处于其生产环境中时，这可以正常工作，由使用特定 RDP 连接文件进行远程处理的人员使用。程序运行后连接退出。但是，在测试和调试此程序时，我的计算机在每次运行后都会重新启动。

我正在寻找一种区分这些情况的好方法。我应该设置某种远程调试脚本并远程运行程序吗？或者有没有办法以编程方式检测程序是否在调试模式下运行并在这种情况下禁用退出过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T13:44:09.120

您可以使用编译指示指令：

```
private void HardTerminalExit()
{
  #if DEBUG
  // Soft Exit
  #else
  // Hard Exit
  #end if
} 
```

我认为使用较新的 ConditionalAttribute 是更好的做法，但我认为您不能否定这一点，因此您需要自己为“RELEASE”设置一个环境变量：

```
[Conditional ( "RELEASE" )]
private void HardTerminalExit()
{
  // Hard Exit, only called when "RELEASE" is defined.
} 
```

这将告诉编译器仅在某处声明“RELEASE”环境变量时调用此方法 - 这可以在编译期间声明（构建属性窗格上的条件编译符号）或作为操作系统外壳的一部分，请参阅[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)了解更多信息这方面的信息。

# .net - 是否使用 TransactionScope 导致删除语句对数据库？

> ID：371262
> 
> 赞同：1
> 
> 时间：2008-12-16T13:14:31.957
> 
> 标签：.net, linq-to-sql

我正在使用 LINQ to SQl 并使用 TransactionScopre 我在 SQL 中插入数据。

```
_context.tblDataContainer.InsertOnSubmit(migrationData);

using (TransactionScope ts = new TransactionScope())
{
    _context.SubmitChanges();
    ts.Complete();
} 
```

这样做，linq 是否会在 SQL 上执行任何删除语句。我已经使用上下文日志进行了检查，并且没有向数据库发出删除语句，但是我的数据库管理员说我正在此事务中执行一些删除语句。对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T13:31:00.767

我们真的需要更多地了解您的架构。请记住，L2S 是声明性的——您声明的是您想要完成的事情，而不是如何去做。L2S 引擎完全有可能查看您的数据库，发现某种类型的约束或其他情况，并决定安全插入该数据的最佳方法是首先删除一条记录。虽然这是一个延伸，但它可能会发生。

但是，还有其他可能性，例如触发器。您是否检查过表是否正在执行插入操作，并查看是否有任何触发器可能会在其他地方删除数据？

# c# - 检查 C# new() 初始化是否为空？

> ID：371266
> 
> 赞同：9
> 
> 时间：2008-12-16T13:15:15.450
> 
> 标签：c#, exception, new-operator

我在[Koders](http://www.koders.com/csharp/fidACD7502AA845419FF59B7DA804D3C8FCA0E40138.aspx?s=basecodegeneratorwithsite#L76)上找到了这段代码：

```
private ServiceProvider SiteServiceProvider
{
    get
    {
        if (serviceProvider == null)
        {
            serviceProvider = new ServiceProvider(site as VSOLE.IServiceProvider);
            Debug.Assert(serviceProvider != null, "Unable to get ServiceProvider from site object.");
        }
        return serviceProvider;
    }
} 
```

我想知道，有没有*什么*可能的`Debug.Assert(serviceProvider != null`触发方式？我的印象是`new`只能被异常中止，在这种情况下永远不会达到断言。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-16T13:23:28.210

ServiceProvider 可能会覆盖 !=/== 运算符，因此对于*无效*状态，与 null 的比较返回 true。

总之看起来很奇怪。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-16T13:30:54.607

如果它是一种工厂方法，我希望“测试空”模式更多 - 即

```
SomeType provider = SomeFactory.CreateProvider();
if(provider == null) // damn!! no factory implementation loaded...
{ etc } 
```

还有另一种情况值得了解，但在这里并不适用（因为我们知道我们正在创建的类型）... `Nullable<T>`；这主要是泛型的问题：

```
static void Test<T>() where T : new()
{
    T x = new T();
    if (x == null) Console.WriteLine("wtf?");
}
static void Main()
{
    Test<int?>();
} 
```

这[在此处](https://stackoverflow.com/questions/194484/whats-the-strangest-corner-case-youve-seen-in-c-or-net#194671)进行了更多介绍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-16T13:34:12.993

我同意。如果使用普通的 != 运算符（继承自 Object），则永远不会发生这种情况。构造函数总是返回一个对象引用，正如您所指出的，如果在构造函数中抛出异常，则执行点将完全离开该属性。

我会检查这段代码的用途。当然，构造函数可能使构造的对象处于不一致的状态，这可能是应该测试的。

如果您的 ServiceProvider 类实现了 System.IServiceProvider，您可能需要检查以确保 GetService() 不返回 null。

# vb.net - 如果服务器上未加载 SMTP，您如何发送电子邮件？

> ID：371268
> 
> 赞同：0
> 
> 时间：2008-12-16T13:15:36.027
> 
> 标签：vb.net, smtp

使用代码片段在 VB.Net 中发送电子邮件我已经成功地从本地计算机发送了一封电子邮件，但是当我将其上传到我的服务器时，我收到一封电子邮件失败的消息。我们有一个运行 SMTP 的国家中继服务器，我在这两种情况下都指向该服务器。两台机器之间唯一的区别是服务器没有运行 SMTP。如果我使用中继服务器发送运行 SMTP 的电子邮件，是否需要在服务器上运行 SMTP？

```
 Dim message As New MailMessage("DoNotReply@faa.gov", My.Settings.NotifyList, "Starting FalconCMSOffloader @ " & My.Settings.FacID & " - " & Now, "NM")
        Dim emailClient As New SmtpClient(My.Settings.EmailServerAddress)
        emailClient.Send(message) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T13:30:53.107

您不需要在本地运行 SMTP，因为 VB.Net 代码应该只使用基本的 TCP/IP 直接与中继服务器通信。

查看错误消息会很有用，服务器可能无法访问中继服务器上的端口 25（例如，由于防火墙配置）。请注意，您可以通过从命令行（在服务器上）启动 telnet 来在某种程度上测试此连接性，如下所示：

```
telnet RelayServerAddress 25 
```

当您在域帐户下的机器上本地运行代码时，中继服务器也有可能发生一些身份验证，而当代码在本地帐户下的服务器上运行时无法发生（我我在这里做了一些大的假设）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T13:27:19.013

如果指定中继服务器，则服务器上不需要 smtp 服务器。仔细检查 My.Settings.EmailServerAddress 确实指向中继服务器。

# c# - C# 扩展方法 - 有多远？

> ID：371272
> 
> 赞同：15
> 
> 时间：2008-12-16T13:17:27.223
> 
> 标签：c#, ruby-on-rails, extension-methods

Rails 为 Ruby 引入了一些核心扩展，例如`3.days.from_now`返回，正如您预计三天后的日期。使用 C# 中的扩展方法，我们现在可以做类似的事情：

```
static class Extensions
{
    public static TimeSpan Days(this int i)
    {
        return new TimeSpan(i, 0, 0, 0, 0);
    }

    public static DateTime FromNow(this TimeSpan ts)
    {
        return DateTime.Now.Add(ts);
    }
}

class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(
            3.Days().FromNow()
        );
    }
} 
```

或者怎么样：

```
static class Extensions
{
    public static IEnumerable<int> To(this int from, int to)
    {
        return Enumerable.Range(from, to - from + 1);
    }
}

class Program
{
    static void Main(string[] args)
    {
        foreach (var i in 10.To(20))
        {
            Console.WriteLine(i);
        }
    }
} 
```

这从根本上是错误的，还是有时它是一个好主意，例如在 Rails 之类的框架中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T13:55:28.550

我非常喜欢扩展方法，但我确实觉得当它们在 LINQ 之外使用时，它们会以牺牲可维护性为代价来提高可读性。

举`3.Days().FromNow()`个例子。这非常具有表现力，任何人都可以阅读此代码并准确告诉您它的作用。这真是一件美好的事情。作为编码人员，我们很高兴编写具有自我描述性和表现力的代码，这样几乎不需要任何注释并且阅读起来很愉快。这段代码在这方面至关重要。

然而，作为编码人员，我们也对后代负责，我们之后的人将花费大部分时间试图理解这段代码是如何工作的。我们必须小心，不要过于表达，以至于调试我们的代码需要在无数扩展方法中跳跃。

扩展方法掩盖了“如何”以更好地表达“什么”。我想这使它们成为一把双刃剑，最好适度使用（就像所有东西一样）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-16T14:14:00.587

首先，我的直觉：`3.Minutes.from_now`看起来很酷，但没有说明为什么扩展方法很好。这也反映了我的普遍看法：很酷，但我从未真正错过它们。

* * *

**问题：是`3.Minutes`时间跨度还是角度？**

通过 using 语句“通常”引用的命名空间只影响类型，现在它们突然决定什么`3.Minutes`意思。

所以最好的就是“不让他们逃跑”。
可能被引用的命名空间中的所有公共扩展方法最终都是“某种全局的”——所有潜在的问题都与此相关。将它们保留在您的程序集内部，或者将它们放入单独的命名空间中，该命名空间分别添加到每个文件中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-16T13:25:19.983

我个人喜欢 int.To，我对 int.Days 很矛盾，我不喜欢 TimeSpan.FromNow。

我不喜欢我所认为的“流利”接口的一种时尚，它可以让你编写伪英文代码，但通过实现具有可能孤立地令人费解的名称的方法来做到这一点。

例如，这对我来说并不好读：

```
TimeSpan.FromSeconds(4).FromNow() 
```

显然，这是一个主观的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T14:15:28.820

我同意 siz 的观点，并且在这个问题上倾向于保守。Rails 有这种东西，所以它从来没有那么令人困惑。当您编写“days”和“fromnow”方法时，不能保证您的代码没有错误。此外，您正在向代码添加依赖项。如果您将扩展方法放在他们自己的文件中，则每个项目中都需要该文件。在项目中，您需要在需要时包含该项目。

综上所述，对于其他框架/世界中存在的非常简单的扩展方法（例如 Jeff 对[“left”](https://blog.codinghorror.com/monkeypatching-for-humans/)的使用或 thatismatt 对 days.fromnow 的使用），我认为没关系。熟悉日期的人应该明白“3.Days().FromNow()”是什么意思。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T14:04:20.013

我是保守派，至少目前是这样，并且反对扩展方法。对我来说，这只是语法糖，并不那么重要。我认为如果初级开发人员不熟悉 C#，这也可能是一场噩梦。我宁愿将扩展封装在我自己的对象或静态方法中。

如果您要使用它们，请不要过度使用它们，以免给自己带来方便，但会惹恼其他接触您的代码的人。:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-16T14:07:30.537

对于语言应该是什么，每种语言都有自己的**观点。**Rails 和 Ruby 的设计有着各自截然不同的观点。PHP 有明显不同的意见，C(++/#) 也是如此……Vis​​ual Basic 也是如此（尽管我们显然不喜欢他们的风格）。

平衡在于拥有许多易于阅读的内置功能，而不是对所有内容的基本控制。我不希望有这么多函数，以至于每次你想做任何事情时都必须去查找（而且对于臃肿的框架肯定会有性能开销），但我个人喜欢 Rails，因为它拯救了我很多时间开发。

我想我在这里要说的是，如果您正在设计一种语言，请采取立场，从那里开始，并构建您（或**您的目标开发人员）最常使用**的功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-16T14:35:22.527

我个人的偏好是暂时少用它们，然后等着看微软和其他大型组织如何使用它们。如果我们开始看到很多代码、教程和书籍都使用 3.Days().FromNow() 之类的代码，那么它就会大量使用。如果只有少数人使用它，那么您将面临代码过于难以维护的风险，因为没有足够多的人熟悉扩展的工作方式。

在相关说明中，我想知道普通 for 循环和 foreach 循环之间的性能如何比较？第二种方法似乎需要对计算机进行大量额外工作，但我对这个概念还不够熟悉，无法确定。

# .net - 如何使用此 Linq2Sql 减少数据库往返次数？

> ID：371279
> 
> 赞同：5
> 
> 时间：2008-12-16T13:19:48.450
> 
> 标签：.net, linq-to-sql

我有以下 Linq2Sql，它为我的“SELECT”语句做了不止一次的往返。我不确定为什么。首先是代码，然后是解释：-

```
from p in db.Questions
select new Models.Question
{
    Title = p.Title,
    TagList = (from t in p.QuestionTags
               select t.Tag.Name).ToList()
} 
```

现在数据库是

> *问题 <-一对多-> QuestionTags <-多对一->标签*

所以一个问题有一对多的标签，中间有一个链接表。这样，我可以多次重复使用标签。（如果有更好的模式，我愿意接受）。

这样做会执行以下由 Linq2Sql 生成的 Sql 代码

```
SELECT [t0].[QuestionId] AS [ID], etc....  <-- that's the good one 
```

.

```
exec sp_executesql N'SELECT [t1].[Name]
FROM [dbo].[QuestionTags] AS [t0]
INNER JOIN [dbo].[Tags] AS [t1] ON [t1].[TagId] = [t0].[TagId]
WHERE [t0].[QuestionId] = @x1',N'@x1 int',@x1=1 
```

第二个 sql 块列出了 2x .. 我认为这是因为第一个 sql 块返回两个结果，所以第二个是针对第一个结果的每个结果触发的。

有什么办法可以让这个 sql 语句代替 1 + n，其中 n = 第一个查询的结果数？

## 更新：

我已经尝试过 Eager 和 Lazy 加载，没有区别。

```
DataLoadOptions dataLoadOptions = new DataLoadOptions();
dataLoadOptions.LoadWith<Question>(x => x.QuestionTags);
dataLoadOptions.LoadWith<QuestionTag>(x => x.Tag);
db.LoadOptions = dataLoadOptions; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-16T16:46:59.607

ToList() 肯定会阻碍你。您应该对整个查询执行 ToList() 。

我认为您可以做的另一件事是使用“让”。我认为在这种情况下，它可以创建延迟执行并包含在表达式树中，但是 YMMV.

```
from p in db.Questions
let Tags = (from t in p.QuestionTags
               select t.Tag.Name)
select new Models.Question
{
    Title = p.Title,
    TagList = Tags
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T18:47:54.403

You could try configuring Eager Loading on this object association. Something like:

```
 var dlo = new DataLoadOptions();
        // Configure eager loading
        dlo.LoadWith<Question>(q => q.QuestionTags);

        _context = new WhateverContext();
        _context.LoadOptions = dlo; 
```

But you may need to refactor your code a little. Basically you are telling the framework to issue SQL to pull in the wider object graph, rather than wait until the object association is accessed (lazy loading is the default).

Maybe see ([http://blog.codeville.net/2007/12/02/linq-to-sql-lazy-and-eager-loading-hiccups/](http://blog.codeville.net/2007/12/02/linq-to-sql-lazy-and-eager-loading-hiccups/)). Different Steven by the way!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-16T13:27:07.657

这可能是 LINQ 本身还不够的情况之一。您是否考虑过将此逻辑编写为 UDF 或 SPROC，并简单地使用 LINQ 来调用它？LINQ-to-SQL 非常擅长调用任何一种方法（实体框架对 UDF 来说不是很好）。

然后，您可以在数据库中进行标记组合，并将其作为 varchar 返回，例如。有一个 TSQL 技巧可以在没有游标的情况下执行此操作：

```
DECLARE @foo varchar(max)
SET @foo = ''
SELECT @foo = @foo + [SomeColumn] + ',' -- CSV
FROM [SomeTable]
WHERE -- some condition 
```

（也许删除尾随逗号）

运行后，`@foo`将是值的 CSV - 如果您返回单行，则非常有效。如果您要返回多个主行，那就不是很好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-01T16:17:09.363

您可以像这样进行延迟加载：

```
from p in db.Questions
let Tags = GetTags(Questions.Id)
select new Models.Question
{
    Title = p.Title,
    TagList = LazyList<string>(Tags)
}

public IQueryable<string> GetTags(int questionId) {
    from qt in db.QuestionTags
    join t in db.Tags on qt.TagId equals t.Id
    where qt.questionId = questionId
    select t.Name
} 
```

LazyList 是一个实现 IList 的 IQueryable 容器。枚举 TagList 属性后，将执行存储在其中的 IQueryable。

LazyList 类由 Rob Connery 编写，可在此处找到：http: [//blog.wekeroad.com/blog/lazy-loading-with-the-lazylist/](http://blog.wekeroad.com/blog/lazy-loading-with-the-lazylist/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T14:03:45.087

我想问题是您也应该为整个查询调用 .ToList() 。这将从数据库中返回整个集合。

在您的情况下，第一个 SQL 命令仅返回所有问题的 ID，然后，每个问题都会发生单个 SQL 调用（在 foreach 循环中的迭代期间） - 请参阅@x1 参数。

# c++ - WCF 服务问题的托管 C++ Web 参考

> ID：371287
> 
> 赞同：0
> 
> 时间：2008-12-16T13:24:07.023
> 
> 标签：c++, wcf, reference, managed

我开发了一个名为 CLSAPIService 的简单 WCF 服务，它的 Contract 包含一个名为 UpdateLastOpenCloseCall 的方法：

```
[OperationContract(Name = "UpdateLastOpenCloseCall", Action = "http://uniform.com/UpdateLastOpenCloseCall")]
CallResult UpdateLastOpenCloseCall(int iSwitchID, int iAgentID, string strExtension, BusinessDataField[] bdFields); 
```

它的参数之一是一个简单的 DataContract：

```
[DataContract]
public struct BusinessDataField
{
    [DataMember]
    public string Name;
    [DataMember]
    public object Value;
} 
```

然后我在 Visual .Net 2005 的托管 C++ 中创建了一个简单的测试项目，并为该服务创建了 Web 参考：

```
CLSAPIProxy::CLSAPIService^ service = gcnew CLSAPIProxy::CLSAPIService();
CLSAPIProxy::BusinessDataField ^f1 = gcnew CLSAPIProxy::BusinessDataField();
f1->Name = L"test_string";
f1->Value = L"string";

CLSAPIProxy::BusinessDataField ^f2 = gcnew CLSAPIProxy::BusinessDataField();
f2->Name = L"test_int";
f2->Value = 123;

System::Collections::Generic::List<CLSAPIProxy::BusinessDataField^> ^list = gcnew;
System::Collections::Generic::List<CLSAPIProxy::BusinessDataField^>();
list->Add(f1);
list->Add(f2);
service->UpdateLastOpenCloseCall(1,true,22817,true,L"24319",list->ToArray()); 
```

当 BusinessDataField 结构到达 WCF 方法时，似乎只有 Value 属性被更新，而 Name 属性是`null`，即使我为它分配了一个值。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-23T07:53:01.690

请将订单添加到您的数据成员。[DataMember(Name = "FirstName", IsRequired = true, ***Order = 2*** )] 并参考以下文章： [更改数据成员的顺序](http://nayyeri.net/blog/change-the-order-of-data-members-in-data-contracts-in-wcf/)

# sharepoint - Sharepoint：所有子站点的迭代性能是否可以承受？

> ID：371288
> 
> 赞同：1
> 
> 时间：2008-12-16T13:24:09.563
> 
> 标签：sharepoint, sharepoint-api

我需要创建将遍历网站集的所有子网站的功能，并向每个子网站添加一些示例内容（示例内容=新页面、图像、文档，可能是一些列表）。有一种解决方案使用递归来遍历站点（可以在[此处](http://blog.rafelo.com/2008/07/iterating-through-sharepoint-web.html)找到）。

所以我问：

1.  你们中的任何人是否实现了类似的东西，也许以不同的方式？
2.  这种迭代的性能如何？

我真的不能说网站集中可以存在多少子网站，因为应该在更多项目中使用此功能。但我想子站点的数量不应该超过 100 个左右。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T14:38:48.103

这是执行站点和 Web 部件循环的一种非常常见的方法。

100 个子站点的速度将不是问题。它真的很快，如果你做了很多可以减慢它的处理。

需要注意的一件事是，如果您打开或不关闭项目，您可能会从 WFE 中吸走所有内存，尤其是在许多用户同时重新加载页面的情况下。请参阅[http://www.sharepointnutsandbolts.com/2008/06/disposing-sharepoint-objects-what-they.html](http://www.sharepointnutsandbolts.com/2008/06/disposing-sharepoint-objects-what-they.html)和[http://blogs.msdn.com/rogerla/archive/2008/02/12/sharepoint-2007 -and-wss-3-0-dispose-patterns-by-example.aspx](http://blogs.msdn.com/rogerla/archive/2008/02/12/sharepoint-2007-and-wss-3-0-dispose-patterns-by-example.aspx)例如，他们在[http://blogs.msdn.com/sharepoint/archive/2008/11/12/announcing-spdisposecheck也有处置工具-tool-for-sharepoint-developers.aspx](http://blogs.msdn.com/sharepoint/archive/2008/11/12/announcing-spdisposecheck-tool-for-sharepoint-developers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:32:29.450

你可以看看我给[这个](https://stackoverflow.com/questions/633633/sharepoint-how-can-i-find-all-the-pages-that-host-a-particular-web-part)问题的答案。我想我已经为那段代码使用了正确的处置模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T12:02:55.540

如果您需要在大型结构中执行*只读*循环，这是一种很酷但有点非传统的方法：

[http://hristapavlov.wordpress.com/2008/10/20/a-very-fast-method-to-get-the-site-collections-web-structure/](http://hristopavlov.wordpress.com/2008/10/20/a-very-fast-method-to-get-the-site-collections-web-structure/)

# nhibernate - 在 HQL where 子句中使用对象类型

> ID：371300
> 
> 赞同：4
> 
> 时间：2008-12-16T13:27:48.373
> 
> 标签：nhibernate, hibernate, hql

在我的域模型中，我有一个抽象类 CommunicationChannelSpecification，它有 FTPChannelSpecification、EMailChannelSpecification 和 WebserviceChannelSpecification 等子类。现在我想创建一个 HQL 查询，其中包含一个 where 子句，该子句将结果缩小到某些类型的通道规范。例如（用简单的英语）选择所有类型出现在集合 {FTPChannelSpecification, WebserviceChannelSpecification} 中的 CommunicationChannelSpecifications。

如何在 HQL 中实现这一点？我正在使用 NHibernate 2.0.1 和每个子类继承映射策略的表...

谢谢！

帕斯卡

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T13:46:18.507

在 NHibernate 中不是正数，但是在 Hibernate 中，有两个特殊的属性总是引用 id 和 class。所以，对于你的特殊情况，我会做

```
from CommunicationChannelSpecifications spec where spec.class in (?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T03:07:08.203

在这种情况下，NHibernate 支持与 Hibernate 相同的语法。有关示例，请参见[此处。](http://nhforge.org/doc/nh/en/index.html#queryhql-where)

# visual-studio - VS 构建后事件

> ID：371302
> 
> 赞同：11
> 
> 时间：2008-12-16T13:28:32.677
> 
> 标签：visual-studio, build, post-build-event

我想实现一个执行以下操作的构建后事件

1.  DLL 输出的相对路径副本（1 个文件，并非所有调试爵士乐）
2.  A 将输出 DLL 注册到 GAC

这是怎么做到的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-16T13:42:49.310

你想要吗？

```
copy $(TargetPath) $(TargetDir)..\..\someFolder\myoutput.dll
regasm $(TargetPath) 
```

（在项目属性下输入构建后步骤的字段）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-16T14:07:15.517

在“项目属性->构建事件->构建事件后命令行：”中输入以下内容：

```
xcopy "$(TargetPath)" "target path" /Y && regasm "$(TargetPath)" 
```

或将以下代码段添加到项目（例如 csproj）文件中

```
<PropertyGroup>
    <PostBuildEvent>xcopy "$(TargetPath)" "target path" /Y && regasm "$(TargetPath)"</PostBuildEvent>
</PropertyGroup> 
```

请注意，建议在复制命令参数周围添加“”，以避免包含空格的路径出现问题。另请注意，可以使用 && 组合多个命令

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-16T14:13:35.410

您确定要将此作为编译的一部分吗？如果可以避免的话，我建议在解决方案中使用项目引用而不是 GAC。复制文件是一回事，但在 GAC 中注册相当麻烦，您可能需要考虑编译代码的其他环境。例如其他开发人员的机器、测试环境/构建服务器等。如果您有构建服务器实际上，您应该将 NAnt 之类的东西与某种持续集成服务器一起使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T02:52:02.627

我不得不遇到同样的问题，我努力让它发挥作用。

在我的情况下，我想以**另一种方式**将 SDL dll 复制到我的输出文件夹中。

```
copy "$(SolutionDir)SDL\lib\x86\SDL.dll" "$(SolutionDir)$(Configuration)\" 
```

请注意，`$(Configuration)`将是您的输出文件夹（例如 Debug 或 Release）。

引号是我所缺少的，显然当右侧以 . 结尾时您需要它们`\`。因此，始终使用它们可能更安全。

希望为别人节省5分钟！

PS我使用Visual Studio 2010

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T13:43:36.407

你可能想看看 MS Build。它是我们在工作中使用的。

[CodeProject 链接](http://www.codeproject.com/KB/books/msbuild.aspx) 和 [MSDN 参考](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-18T11:43:01.533

对于问题中的第 2 步，我似乎更喜欢以下内容：

```
"C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\gacutil" /f /i $(TargetPath) 
```

*注意：这需要在您的开发机器上安装[Windows SDK 。](http://www.microsoft.com/downloads/en/details.aspx?FamilyId=E6E1C3DF-A74F-4207-8586-711EBE331CDC&displaylang=en)*

[MSDN 上有关可用宏的更多信息，例如 $(TargetPath)。](http://msdn.microsoft.com/en-us/library/42x5kfw4%28v=VS.90%29.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T15:48:12.430

遇到一个相关的问题。这里的答案有帮助（谢谢！）。

我的场景是在调试依赖 MEF 的应用程序时，我需要在特定位置拥有相关的 DLL。我遇到了覆盖先前构建的问题，因此确实需要向脚本添加删除。

```
delete $(SolutionDir)FileService\$(ProjectName).dll
copy $(TargetPath) $(SolutionDir)FileService\$(ProjectName).dll 
```

希望对某人也有帮助！

# javascript - YouTube 常规播放器中的 loadVideoById()（非无铬）

> ID：371320
> 
> 赞同：6
> 
> 时间：2008-12-16T13:34:19.153
> 
> 标签：javascript, api, youtube

我在网页中有一个 YouTube 播放器。我需要动态更改此播放器播放的视频。

使用 YouTube 的 chromeless 播放器，这（相对）容易。它有[`loadVideoById()`](http://code.google.com/apis/youtube/chromeless_player_reference.html#loadVideoById)完美的方法。问题是，无铬播放器没有任何控件（播放/暂停等）。常规的[YouTube 播放器](http://code.google.com/apis/youtube/js_api_reference.html#Functions)拥有所有这些，但它没有`loadVideoById()`方法。

有没有办法将普通播放器的控件包含到无铬播放器中，或者`loadVideoById()`在普通播放器中实现方法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-16T13:50:03.880

您不能这样做，因为“常规 youtube 播放器”中的调用将 URL 中的 VideoID 作为参数：

*   常规视频：[http ://www.youtube.com/v/VIDEO_ID&enablejsapi=1&playerapiid=ytplayer](http://www.youtube.com/v/VIDEO_ID&enablejsapi=1&playerapiid=ytplayer)
*   [无铬： http](http://www.youtube.com/apiplayer?enablejsapi=1) ://www.youtube.com/apiplayer? enablejsapi =1

取而代之的是，您可以轻松创建自己的函数来更改 Embbebed SWF，我的意思是说，您将[swfobject](http://code.google.com/p/swfobject/)用于“常规播放器”，然后使用[createSWF 函数](http://code.google.com/p/swfobject/wiki/api#swfobject.createSWF(attObj,_parObj,_replaceElemIdStr))，您将能够动态替换以前的视频为实际视频.

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-10-25T21:47:55.687

你可以这样做...

[http://code.google.com/apis/ajax/playground/#change_the_playing_video](http://code.google.com/apis/ajax/playground/#change_the_playing_video)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-15T07:54:11.770

仅供参考，还有一个 jQuery 插件可以为您完成，并为您提供大量控件！

~~[http://tikku.com/jquery-youtube-tubeplayer-plugin](http://tikku.com/jquery-youtube-tubeplayer-plugin)~~

[https://github.com/nirvanatikku/jQuery-TubePlayer-Plugin](https://github.com/nirvanatikku/jQuery-TubePlayer-Plugin)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-27T01:07:40.953

我发现使用 loadVideoByUrl() 作为 loadVideoByIdl() 的替代品而不是使用 createSWF 更容易，您不必这样弄乱 swfobject，它是一个内置函数...只需使用视频 ID 来创建一个 youtube swf url，例如： url="http://www.youtube.com/e/" + VIDEO_ID + "?enablejsapi=1&version=3" 并使用 loadVideoByUrl() 函数提交，如下所示： player.loadVideoByUrl(url )

这样你就不必弄乱 swfobject 了，这里有说明：

[http://code.google.com/apis/youtube/js_api_reference.html#loadVideoById](http://code.google.com/apis/youtube/js_api_reference.html#loadVideoById)

"player.loadVideoByUrl(mediaContentUrl:String, startSeconds:Number):Void 加载并播放指定视频。

```
 * The mediaContentUrl must be a fully qualified YouTube player URL in the format http://www.youtube.com/e/VIDEO_ID. In YouTube Data API video feeds, the url attribute of the <media:content> tag contains a fully qualified player URL when the tag's format attribute has a value of 5.
    * startSeconds accepts a float/integer and specifies the time from which the video should start playing. If startSeconds (number can be a float) is specified, the video will start from the closest keyframe to the specified time." 
```

# java - 通过 IP 过滤在外部保护 ActiveMQ

> ID：371321
> 
> 赞同：2
> 
> 时间：2008-12-16T13:35:45.860
> 
> 标签：java, activemq

我有一个 ActiveMQ 实例在面向外部的服务器上运行并公开一个 STOMP 接口。

我希望能够确保外部连接的客户端只能接收主题通知，而不会向主题本身发送任何内容。任何内部连接的客户端都可以接收和发送。

我希望我可以在主题或服务器级别设置一些规则，根据 IP 规则定义对主题的权限，但我找不到对此的任何参考。

有没有人对我如何做到这一点有任何建议，或者可能有其他方法来达到预期的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T16:02:01.790

IP 范围或内部与外部 IP 地址之间的 STOMP 传输目前没有区别。

你可以使用用户角色吗？有内部连接的特殊用户和角色？然后使用正常的访问控制列表，使外部连接只能从主题消费而不能发布？

请参阅[ActiveMQ 安全支持](http://activemq.apache.org/security.html)

# parsing - 我必须从复杂的 ASCII 文件中读取发票数据，您将如何防范未来的变化？

> ID：371322
> 
> 赞同：0
> 
> 时间：2008-12-16T13:36:07.340
> 
> 标签：parsing, ascii

我必须阅读以非常复杂的方式构建的发票 ascii 文件，例如：

```
55651108 3090617.10.0806:46:32101639Example Company               Construction Company          Example Road. 9            9524 Example City 
```

里面实际上还有其他东西，但我不想让你进一步混淆。

我知道如果客户不能提供更好的结构，我就完蛋了。例如 30906 是一个不断增长的迭代数字。101639 是客户 ID。“Example Company”和“Construction Company”之间的空格是可变长度的 “Example Company”字段也可以有可变长度的空格，例如“Microsoft Corporation Redmond”。与其他字段相同。所以没有明确的方法可以从后半部分提取数据。

但这不是问题。我被带走了。我的问题如下：

如果输入有点结构化且定义明确，您将如何防范其结构的未来变化。您将如何设计和实现阅读器。

我正在考虑在我的数据库中使用一个简单的 EAV 模型，并使用描述输入、实体名称及其值类型的文本或 xml 模板。我会根据模板解析发票文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T14:05:09.077

“如果输入有点结构化且定义明确，您将如何防范其结构的未来变化。您将如何设计和实现阅读器？”

您必须以可以灵活选择的方式定义布局。

这是一个python版本

```
class Field( object ):
    def __init__( self, name, size ):
        self.name= name
        self.size = size
        self.offset= None

class Record( object ):
    def __init__( self, fieldList ):
        self.fields= fieldList
        self.fieldMap= {}
        offset= 0
        for f in self.fields: 
            f.offset= offset
            offset += f.size
            self.fieldMap[f.name]= f
    def parse( self, aLine ):
        self.buffer= aLine
    def get( self, aField ):
        fld= self.fieldMap[aField]
        return self.buffer[ fld.offset:fld.offset+fld.size+1 ]
    def __getattr__( self, aField ):
        return self.get(aField) 
```

现在您可以定义记录

```
myRecord= Record( 
    Field('aField',8), 
    Field('filler',1), 
    Field('another',5),
    Field('somethingElse',8),
) 
```

这使您有机会以相当灵活的方式挑选一些输入。

```
myRecord.parse(input)
myRecord.get('aField') 
```

Once you can parse, adding conversions is a matter of subclassing Field to define the various types (dates, amounts, etc.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T13:44:50.693

我相信描述实体名称和值类型的模板是好的。类似于文本文件的“模式”。

我会尝试做的是将阅读器与应用程序的其余部分尽可能分开。所以，真正的问题是，如何定义一个能够适应参数列表变化的接口。这可能并不总是可能的，但是，如果您依赖接口来读取数据，您可以更改读取器的实现而不影响系统的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T13:46:37.337

好吧，您的文件格式看起来很像银行及其客户之间使用的称为[Etebac的法国协议。](http://www.etebac.com/)

这是一种固定宽度的文本格式。

你能做的最好的就是使用某种`unpack`功能：

```
$ perl -MData::Dumper -e 'print Dumper(unpack("A8 x A5 A8 A8 A6 A30 A30", "55651108 3090617.10.0806:46:32101639Example Company               Construction Company          Example Road. 9            9524 Example City"))'
$VAR1 = '55651108';
$VAR2 = '30906';
$VAR3 = '17.10.08';
$VAR4 = '06:46:32';
$VAR5 = '101639';
$VAR6 = 'Example Company';
$VAR7 = 'Construction Company'; 
```

您应该对每个输入做的是，检查它是否是它应该是的，即 XX.XX.XX 或 YY:YY:YY 或者它不是以空格开头，如果是则中止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T13:49:32.273

我有一个发票数据数据库，其中包含公司、发票、Invoice_Items 等表。取决于复杂性，您是否也希望记录您的订单，然后将发票链接到订单，等等？但我离题了...

我有一个数据库模型的内存模型，但这是给定的。如果需要 XML 输出和输入，如果我需要将发票作为数据提供到其他地方，我将有一个模型的 XML 序列化，以及一个 SAX 解析器来读入它。一些 API 可能使这变得微不足道，或者你可能只是如果您要让客户从您那里阅读，想要向您的存储库公开 Web 服务。

至于阅读文本文件（并且没有太多与它们相关的信息 - 为什么这些格式会改变？它们来自哪里？你是在更换这个系统，还是会继续运行，你是只是他们正在提供的新后端？）您说空格的数量是可变的-仅仅是因为格式是固定宽度的列吗？我会创建一个阅读器，将它们读入您的模型，从而读入您的数据库模式。

# c# - 为什么在重写 Equals 方法时重写 GetHashCode 很重要？

> ID：371328
> 
> 赞同：1588
> 
> 时间：2008-12-16T13:41:18.283
> 
> 标签：c#, overriding, hashcode

给定以下课程

```
public class Foo
{
    public int FooId { get; set; }
    public string FooName { get; set; }

    public override bool Equals(object obj)
    {
        Foo fooItem = obj as Foo;

        if (fooItem == null) 
        {
           return false;
        }

        return fooItem.FooId == this.FooId;
    }

    public override int GetHashCode()
    {
        // Which is preferred?

        return base.GetHashCode();

        //return this.FooId.GetHashCode();
    }
} 
```

我已经覆盖了该`Equals`方法，因为`Foo`它代表了`Foo`s 表的一行。哪个是覆盖的首选方法`GetHashCode`？

为什么覆盖很重要`GetHashCode`？

* * *

## 回答 #1

> 赞同：1420
> 
> 时间：2008-12-16T13:47:48.673

是的，如果您的项目将用作字典中的键或`HashSet<T>`等，这一点很重要 - 因为它用于（在没有自定义的情况下`IEqualityComparer<T>`）将项目分组到存储桶中。如果两个项目的哈希码不匹配，它们可能*永远不会*被视为相等（永远不会调用[Equals ）。](https://docs.microsoft.com/en-us/dotnet/api/system.object.equals?view=netframework-4.8)

[GetHashCode()](https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode?view=netframework-4.8)方法应该反映`Equals`逻辑；规则是：

*   如果两件事相等（`Equals(...) == true`），那么它们*必须*返回相同的值`GetHashCode()`
*   如果`GetHashCode()`相等，则它们*不必*相同；这是一个冲突，`Equals`将被调用以查看它是否是一个真正的平等。

在这种情况下，看起来“ `return FooId;`”是一个合适的`GetHashCode()`实现。如果您正在测试多个属性，通常使用下面的代码将它们组合起来，以减少对角线冲突（即，与`new Foo(3,5)`具有不同的哈希码`new Foo(5,3)`）：

在现代框架中，该`HashCode`类型具有帮助您从多个值创建哈希码的方法；在较旧的框架上，您需要不使用，例如：

```
unchecked // only needed if you're compiling with arithmetic checks enabled
{ // (the default compiler behaviour is *disabled*, so most folks won't need this)
    int hash = 13;
    hash = (hash * 7) + field1.GetHashCode();
    hash = (hash * 7) + field2.GetHashCode();
    ...
    return hash;
} 
```

哦-为方便起见，您还可以考虑在覆盖and时提供`==`and运算符。`!=``Equals``GetHashCode`

* * *

当你弄错时会发生什么的演示在[这里](https://stackoverflow.com/questions/638761/c-gethashcode-override-of-object-containing-generic-array/639098#639098)。

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2008-12-21T12:39:21.113

实际上很难`GetHashCode()`正确实现，因为除了 Marc 已经提到的规则之外，哈希码在对象的生命周期内不应该改变。因此，用于计算哈希码的字段必须是不可变的。

当我使用 NHibernate 时，我终于找到了解决这个问题的方法。我的方法是根据对象的 ID 计算哈希码。ID 只能通过构造函数设置，因此如果您想更改 ID（这不太可能），您必须创建一个具有新 ID 的新对象，因此需要一个新的哈希码。这种方法最适用于 GUID，因为您可以提供随机生成 ID 的无参数构造函数。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2008-12-16T13:48:38.377

通过覆盖 Equals，您基本上是在说明您是最了解如何比较给定类型的两个实例的人，因此您可能是提供最佳哈希码的最佳人选。

这是 ReSharper 如何为您编写 GetHashCode() 函数的示例：

```
public override int GetHashCode()
{
    unchecked
    {
        var result = 0;
        result = (result * 397) ^ m_someVar1;
        result = (result * 397) ^ m_someVar2;
        result = (result * 397) ^ m_someVar3;
        result = (result * 397) ^ m_someVar4;
        return result;
    }
} 
```

正如您所看到的，它只是试图根据类中的所有字段猜测一个好的哈希码，但是由于您知道对象的域或值范围，您仍然可以提供更好的哈希码。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2011-11-17T07:46:56.567

请不要忘记`null`在覆盖时检查 obj 参数`Equals()`。并且还要比较类型。

```
public override bool Equals(object obj)
{
    Foo fooItem = obj as Foo;

    if (fooItem == null)
    {
       return false;
    }

    return fooItem.FooId == this.FooId;
} 
```

这样做的原因是：`Equals`与 比较时必须返回 false `null`。另请参阅[http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2010-11-25T00:48:20.767

怎么样：

```
public override int GetHashCode()
{
    return string.Format("{0}_{1}_{2}", prop1, prop2, prop3).GetHashCode();
} 
```

> 假设性能不是问题:)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2020-05-11T12:52:37.133

作为`.NET 4.7`覆盖的首选方法`GetHashCode()`如下所示。如果针对较旧的 .NET 版本，请包含[System.ValueTuple nuget](https://www.nuget.org/packages/System.ValueTuple/)包。

```
// C# 7.0+
public override int GetHashCode() => (FooId, FooName).GetHashCode(); 
```

在性能方面，这种方法将优于大多数*复合*哈希码实现。ValueTuple是一个，所以不会有任何垃圾，并且底层算法是尽可能快的[。](https://docs.microsoft.com/en-us/dotnet/api/system.valuetuple?view=netcore-3.1)`struct`

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2013-11-19T10:17:21.473

我们有两个问题需要解决。

1.  `GetHashCode()`如果可以更改对象中的任何字段，您将无法提供合理的信息。也经常一个对象永远不会在依赖于 `GetHashCode()`. 所以实施的成本`GetHashCode()`往往是不值得的，或者是不可能的。

2.  如果有人将您的对象放入调用的集合中， `GetHashCode()`并且您已经覆盖`Equals()`而没有以正确的方式进行 `GetHashCode()`行为，那么该人可能会花费数天时间来追踪问题。

因此，默认情况下我会这样做。

```
public class Foo
{
    public int FooId { get; set; }
    public string FooName { get; set; }

    public override bool Equals(object obj)
    {
        Foo fooItem = obj as Foo;

        if (fooItem == null)
        {
           return false;
        }

        return fooItem.FooId == this.FooId;
    }

    public override int GetHashCode()
    {
        // Some comment to explain if there is a real problem with providing GetHashCode() 
        // or if I just don't see a need for it for the given class
        throw new Exception("Sorry I don't know what GetHashCode should do for this class");
    }
} 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2014-11-12T13:48:02.457

只是添加上面的答案：

如果您不覆盖 Equals，则默认行为是比较对象的引用。这同样适用于哈希码——默认实现通常基于引用的内存地址。因为您确实覆盖了 Equals 这意味着正确的行为是比较您在 Equals 上实现的任何内容而不是引用，因此您应该对哈希码执行相同的操作。

您的类的客户会期望哈希码与 equals 方法具有相似的逻辑，例如使用 IEqualityComparer 的 linq 方法首先比较哈希码，只有当它们相等时，他们才会比较可能更昂贵的 Equals() 方法要运行，如果我们没有实现 hashcode，equal 对象可能会有不同的 hashcode（因为它们有不同的内存地址）并且会被错误地确定为不相等（Equals() 甚至不会命中）。

此外，除了如果您在字典中使用它可能无法找到您的对象的问题（因为它是由一个哈希码插入的，当您查找它时，默认哈希码可能会不同，并且 Equals()甚至不会被调用，就像 Marc Gravell 在他的回答中解释的那样，您还引入了对字典或哈希集概念的违反，它不应该允许相同的键 - 您已经声明当您覆盖 Equals 时这些对象本质上是相同的，所以您不要不希望它们都作为假设具有唯一键的数据结构上的不同键。但是因为它们具有不同的哈希码，“相同”键将作为不同的键插入。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2008-12-16T13:48:32.120

这是因为框架要求两个相同的对象必须具有相同的哈希码。如果重写 equals 方法对两个对象进行特殊比较，并且该方法认为这两个对象相同，那么这两个对象的哈希码也必须相同。（字典和哈希表依赖于这个原则）。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2012-02-21T11:36:55.887

哈希代码用于基于哈希的集合，如 Dictionary、Hashtable、HashSet 等。此代码的目的是通过将特定对象放入特定组（桶）来非常快速地对其进行预排序。当您需要从哈希集合中检索该对象时，这种预排序非常有助于找到该对象，因为代码必须仅在一个存储桶中搜索您的对象，而不是在它包含的所有对象中搜索。哈希码分布越好（唯一性越好），检索速度越快。在每个对象都有唯一哈希码的理想情况下，找到它是一个 O(1) 操作。在大多数情况下，它接近 O(1)。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2011-06-26T23:21:09.240

这不一定重要；这取决于您的集合的大小和您的性能要求，以及您的类是否将用于您可能不知道性能要求的库中。我经常知道我的集合大小不是很大，我的时间比通过创建完美的哈希码获得的几微秒性能更有价值；所以（摆脱编译器恼人的警告）我只是使用：

```
 public override int GetHashCode()
   {
      return base.GetHashCode();
   } 
```

（当然我也可以使用#pragma 来关闭警告，但我更喜欢这种方式。）

当然，当您处于*确实*需要性能的位置时，其他人在这里提到的所有问题都适用。**最重要**- 否则在从散列集或字典中检索项目时会得到错误的结果：**散列码不得随对象的生命周期而变化**（更准确地说，在需要散列码的时间段内，例如在字典中的键）：例如，以下是错误的，因为 Value 是公共的，因此可以在实例的生命周期内从外部更改为类，因此您不能将其用作哈希码的基础：

```
 class A
   {
      public int Value;

      public override int GetHashCode()
      {
         return Value.GetHashCode(); //WRONG! Value is not constant during the instance's life time
      }
   } 
```

另一方面，如果 Value 无法更改，则可以使用：

```
 class A
   {
      public readonly int Value;

      public override int GetHashCode()
      {
         return Value.GetHashCode(); //OK  Value is read-only and can't be changed during the instance's life time
      }
   } 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-02-12T20:00:32.447

您应该始终保证如果两个对象相等，如 Equals() 定义的那样，它们应该返回相同的哈希码。正如其他一些评论所述，理论上，如果对象永远不会在基于哈希的容器（如 HashSet 或 Dictionary）中使用，则这不是强制性的。不过，我建议您始终遵循此规则。原因很简单，因为人们太容易将集合从一种类型更改为另一种类型，其目的是实际提高性能或只是以更好的方式传达代码语义。

例如，假设我们将一些对象保存在 List 中。一段时间后，有人真正意识到 HashSet 是一个更好的选择，因为它具有更好的搜索特性。这是我们可能遇到麻烦的时候。List 将在内部使用类型的默认相等比较器，这意味着在您的情况下为 Equals，而 HashSet 使用 GetHashCode()。如果两者的行为不同，您的程序也会如此。请记住，此类问题并不是最容易解决的问题。

我在一篇[博](https://vkontech.com/gethashcode-pitfalls/)文中总结了这种行为以及其他一些 GetHashCode() 陷阱，您可以在其中找到更多示例和解释。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-01-15T11:18:32.683

从[C# 9](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-9)（.net 5 或 .net core 3.1）开始，您可能希望像使用[Value Based Equality](https://dev.to/wrijugh/c-9-0-value-based-equality-2n8j)一样使用[记录](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-9#record-types)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-10-07T17:06:53.963

我的理解是原始的 GetHashCode() 返回对象的内存地址，因此如果您想比较两个不同的对象，则必须覆盖它。

编辑：这是不正确的，原来的 GetHashCode() 方法不能保证 2 个值的相等性。尽管相等的对象返回相同的哈希码。

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2014-03-14T18:08:28.467

在我看来，考虑到公共属性，下面使用反射是一个更好的选择，因为您不必担心添加/删除属性（尽管不是很常见的情况）。我发现这也表现得更好。（使用对角秒表比较时间）。

```
 public int getHashCode()
    {
        PropertyInfo[] theProperties = this.GetType().GetProperties();
        int hash = 31;
        foreach (PropertyInfo info in theProperties)
        {
            if (info != null)
            {
                var value = info.GetValue(this,null);
                if(value != null)
                unchecked
                {
                    hash = 29 * hash ^ value.GetHashCode();
                }
            }
        }
        return hash;  
    } 
```

# c# - 如何使 TextBox 上的 Enter 充当 TAB 按钮

> ID：371329
> 
> 赞同：22
> 
> 时间：2008-12-16T13:41:40.387
> 
> 标签：c#, .net, winforms

我有几个文本框。我想让 Enter 按钮充当 Tab。这样当我在一个文本框中时，按 Enter 键会将我移至下一个文本框。您能否告诉我如何在不在文本框类中添加任何代码的情况下实现这种方法（如果可能，不要覆盖等等）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-22T15:30:36.117

这是我通常使用的代码。它必须在 KeyDown 事件上。

```
if (e.KeyData == Keys.Enter)
{
    e.SuppressKeyPress = true;
    SelectNextControl(ActiveControl, true, true, true, true);
} 
```

**更新**

其他方式是发送“TAB”键！并覆盖该方法使其变得更容易:)

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{            
    if (keyData == (Keys.Enter))
    {
        SendKeys.Send("{TAB}");
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-16T14:13:13.880

您可以在任何控件的**keyDown上写：**

```
 if (e.KeyCode == Keys.Enter)
        {

            if (this.GetNextControl(ActiveControl, true) != null)
            {
                e.Handled = true;
                this.GetNextControl(ActiveControl, true).Focus();

            }
        } 
```

[GetNextControl 在Vista](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.getnextcontrol(VS.80).aspx)上不起作用。

要使其与 Vista 一起使用，您需要使用以下代码替换 this.GetNextControl...：

```
System.Windows.Forms.SendKeys.Send("{TAB}"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-02T16:29:46.307

您不需要制作“输入事件处理程序”

您需要做的就是制作一个“中央”KeyDown 事件：

例子

```
private void General_KeyDown(object sender, KeyPressEventArgs e)
 {
 if (e.KeyCode == Keys.Enter)
        {

            if (this.GetNextControl(ActiveControl, true) != null)
            {
                e.Handled = true;
                this.GetNextControl(ActiveControl, true).Focus();
            }
        }
} 
```

然后你所要做的就是去设计器选择你想用 EnterKey 循环浏览的所有文本框（通过按住 Ctrl 并用鼠标单击文本框来选择它们）然后去事件（像按钮一样雷），搜索 Keydown 事件并输入在 General_KeyDown 内。现在您选择的所有文本框都将具有相同的 keydown 事件 :) 这使一切变得更加容易，因为想象一个具有 100 个文本框的表单，并且您想使用 enter 循环遍历所有文本框......为每个 texbox 制作一个分开的事件是...... . 好吧，这不是制作程序的正确方法，它不整洁。希望它有帮助！

> 块引用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-13T18:39:10.503

重要的是要注意，如果每次控件期望关联的按钮控件时您都会听到烦人的“叮”声或警告声，并且`e.Handled = true`并不总是摆脱噪音/声音/叮当声的答案。

如果控件（即单行文本框）需要一个关联按钮来“输入”您的条目，那么您还必须处理“缺失”控件。

```
e.Handled = e.SuppressKeyPress = true; 
```

这在消除“叮”声时可能会有所帮助。

对于它的价值——在我的情况下，当我们从终端/绿屏应用程序转换到 Windows 应用程序时，我的用户需要使用“ENTER KEY”，他们更习惯于通过字段“ENTER-ing”而不是 Tab .

所有这些方法都有效，但在我添加`e.SuppressKeyPress`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-12-15T16:00:50.007

这对我有用

```
if (e.Key == Key.Enter)
            ((TextBox)sender).MoveFocus(new TraversalRequest(new FocusNavigationDirection())); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-20T09:44:12.043

如果定义所有控件的 Tab Order 并使 Form.KeyPreview = True，只需要这个：

```
 Private Sub frmStart_KeyDown(sender As Object, e As KeyEventArgs) Handles Me.KeyDown
    If e.KeyCode = Keys.Enter Then
        System.Windows.Forms.SendKeys.Send("{TAB}")
    End If
End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-01T12:53:04.353

对于那些在 vb 中编写代码的人...

```
Public Class NoReturnTextBox
    Inherits System.Windows.Forms.TextBox

    Const CARRIAGE_RETURN As Char = Chr(13)

    ' Trap for return key....
    Private Sub NoReturnTextBox_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Me.KeyPress

        If e.KeyChar = CARRIAGE_RETURN Then
            e.Handled = True
            System.Windows.Forms.SendKeys.Send(vbTab)
        End If

    End Sub

End Class 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-10T11:30:09.983

我在文本框 keydown 事件之一中使用此代码

```
if (e.KeyData == Keys.Enter)
{
     e.SuppressKeyPress = true;
     SelectNextControl(ActiveControl, true, true, true, true);
} 
```

无法`keydown`为表单中的所有文本框处理此事件。提出一些建议。谢谢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-13T11:03:03.190

这是我用于 VB.NET 的解决方案

1.  在表单属性中设置**Keypreview=True 。**

2.  将此代码放入表单 keydown 事件中：

    如果 (e.KeyData = Keys.Enter) 那么

    '对于任何多行控件，您必须退出以让多行'文本框介绍'按键使行跳过。

    ```
     If ActiveControl.Name = txtMyMutilineTextBox.Name Then Exit Sub 

     e.SuppressKeyPress = True
     SelectNextControl(ActiveControl, True, True, True, True) 
    ```

    万一

**享受 ！！！！**

**Xabier Aberasturi Larruzea**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-21T15:36:52.717

我不在表单级别做。我创建了一个方法，该方法在我想要使用的所有输入 KeyDown 事件中共享（有一个例外）：

```
 private void alltextBoxes_KeyDown(object sender, KeyEventArgs e)
    {
        try
        {
            if (e.KeyCode == Keys.Enter)
            {
                e.SuppressKeyPress = true;
                SelectNextControl(ActiveControl, true, true, true, true);                    
            }
        }
        catch
        {
        }
    } 
```

如果我正在编写一个我想在其他应用程序中使用的控件，我会为最后一个输入提供它自己的方法，如下所示：

```
 private void lastinput_KeyDown(object sender, KeyEventArgs e)
    {
        try
        {
            if (e.KeyCode == Keys.Enter)
            {
                e.SuppressKeyPress = true;
                System.Windows.Forms.SendKeys.Send("{TAB}");
            }
        }
        catch
        {
        }
    } 
```

否则，当您尝试在另一个项目中运行控件时，控件只会在自身内部循环。您可以在任何地方使用第二种方式，但我认为第一种是首选方式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-15T08:51:48.107

这更好，因为当输入时你可以关注下一个选项卡。你需要先设置选项卡顺序

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {
            if (keyData == (Keys.Enter))
            {
                SelectNextControl(ActiveControl, true, true, true, true);
            }

            return base.ProcessCmdKey(ref msg, keyData);
        } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-12-16T13:49:15.567

大胆猜测：

```
// on enter event handler
parentForm.GetNextControl().Focus(); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-12-16T13:56:28.547

我会结合 Pharabus 和 arul 的回答如下：

```
private void textBox_KeyPress(object sender, KeyPressEventArgs e)
{
if (e.KeyChar == ‘\r’)
{
e.Handled = true;
parentForm.GetNextControl().Focus()
}
} 
```

让我知道这是否有帮助！联合部队

# ruby - 如何从 Ruby 中的较大字符串中提取单个字符（作为字符串）？

> ID：371333
> 
> 赞同：19
> 
> 时间：2008-12-16T13:43:22.083
> 
> 标签：ruby

从字符串中检索单个字符作为单字符字符串的 Ruby 惯用方法是什么？当然有`str[n]`方法，但是（从 Ruby 1.8 开始）它返回一个字符代码作为一个固定数字，而不是一个字符串。你如何得到一个单字符的字符串？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-17T11:42:06.243

在 Ruby 1.9 中，这很容易。在 Ruby 1.9 中，字符串是可识别编码的字符序列，因此您只需对其进行索引，就可以从中得到一个单字符的字符串：

```
'µsec'[0] => 'µ' 
```

然而，在 Ruby 1.8 中，字符串是字节序列，因此完全不知道编码。如果您索引到一个字符串并且该字符串使用多字节编码，则您可能会直接索引到多字节字符的中间（在此示例中，“µ”以 UTF-8 编码）：

```
'µsec'[0] # => 194
'µsec'[0].chr # => Garbage
'µsec'[0,1] # => Garbage 
```

但是，正则表达式和一些专门的字符串方法至少支持一小部分流行的编码，其中包括一些日文编码（例如 Shift-JIS）和（在本例中）UTF-8：

```
'µsec'.split('')[0] # => 'µ'
'µsec'.split(//u)[0] # => 'µ' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-12-16T13:51:38.543

在 Ruby 1.9 之前：

```
'Hello'[1].chr  # => "e" 
```

红宝石 1.9+：

```
'Hello'[1]  # => "e" 
```

Ruby 1.9 发生了很多[变化](http://eigenclass.org/hiki.rb?Changes+in+Ruby+1.9)，包括[字符串语义](http://eigenclass.org/hiki.rb?Changes+in+Ruby+1.9#l116)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-16T14:45:39.137

应该在 1.9 之前和之后为 Ruby 工作：

```
'Hello'[2,1]  # => "l" 
```

请参阅 Jörg Mittag 的评论：这仅适用于单字节字符集。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-16T13:46:00.207

```
'abc'[1..1] # => "b" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T13:45:17.510

```
'abc'[1].chr # => "b" 
```

# css - Firefox 中不显示背景图像

> ID：371337
> 
> 赞同：20
> 
> 时间：2008-12-16T13:44:39.477
> 
> 标签：css, firefox, image, background

设置为 DIV 背景的图像在 IE 中显示，但在 Firefox 中不显示。

CSS 示例：

```
div.something {
background:transparent url(../images/table_column.jpg) repeat scroll 0 0;
} 
```

（这个问题在很多地方都有描述，但没有看到任何结论性的解释或修复。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-05T15:34:37.230

Sorry this got huge, but it covers two possibilities that consistently happen to me.

## Possibility 1

You may find the path to the CSS file isn't correct. For example:

Say I have the following file structure:

```
public/
    css/
        global.css
    images/
        background.jpg
    something/
        index.html
    index.html 
```

On `public/index.html` the following paths will include the CSS file:

```
#1:  <link href="./css/global.css"
#2:  <link href="/css/global.css"
#3:  <link href="css/global.css" 
```

However on `public/something/index.html` number 1 and 3 will fail. If you are using a directory structure like this (or an MVC structure e.g.: `http://localhost/controller/action/params`) use the second href type.

Firebug's Net monitor tab will tell you if the CSS file can't be included.

On the subject of paths remember that images are relative to the path of the CSS file. So:

```
url('./images/background.jpg') /* won't work */
url('../images/background.jpg') /* works: ../ == up one level */ 
```

Hover over the `url()` part of the background attribute in Firebug's CSS tab to check if the file's being loaded.

## Possibility 2

It could be that the `div` has no content and thus has a 0 height. Make sure the div has at least a line of something in (e.g.: lorem ipsum delors secorum) or:

```
div.something {
    display: block; /* for verification */
    min-height: 50px;
    min-width: 50px;
} 
```

Check Firebug's layout tab (of the HTML tab) to check the div has a height/width.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-03-29T03:35:04.763

奇怪的是，在键盘上砸了几个小时后，我添加了 display:table; 以DIV的风格和背景图像神奇地出现在FF中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-20T04:32:03.357

它看起来像一个背景附件问题。它需要设置为固定（不是滚动）才能在 FF 中工作。见：[http ://www.w3schools.com/cssref/tryit.asp?filename=trycss_background-position](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_background-position)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-02-23T14:22:44.210

发生在我身上。jpg 确实在 IE 中显示，但在 Firefox 或 Chrome 中不显示。这是解决方案

为显示图像的元素更改以下 css。它可以是 span、div 或任何其他元素：

> 显示：块

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-04T13:51:18.123

旧帖子，但我只是有一个类似的问题图像没有出现在 Firefox 中原来是广告拦截插件，不得不更改我的图像的名称

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T13:58:30.040

尝试将图像名称放在引号中，例如：

```
background-image: url('image.jpg'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-26T23:20:10.303

确保您所指的图像是相对于 css 文件而不是 html 文件的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-26T23:28:24.233

尝试这个。

```
background-color: transparent;
background-image: url("/path/to/image/file.jpg");
background-repeat: repeat;
background-position: top;
background-attachment: scroll; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-28T13:46:56.587

对我来说，这是文件名区分大小写的问题。我不确定它是 CSS 还是我的 Ubuntu 操作系统，或者是 firefox，但我最终获得显示背景图像的方式是参考 BlueGrad.jpg 而不是 bluegrad.jpg。两者中的前者是如何保存的。我不认为它会区分大小写，但确实如此。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-08-11T10:53:38.983

跨浏览器的解决方案不是使用相对于页面/样式表的 URL，而是提供以应用程序/域根目录开头的相对 URL。

```
 /* Relative to Stylesheet (Works in Firefox) */
background: url('../images/logo.gif');
/* Relative to Page (Works in IE, Chrome etc.) */
background: url('images/logo.gif');
/* Absolute path (Fine, unless you change domains)*/
background: url('http://www.webby.com/myproduct/images/factsheet.gif');
/* Domain Root-relative path (Works in Firefox, IE, Chrome and Opera) */
background: url('/myproduct/images/factsheet.gif'); 
```

仅供参考：就我而言，没有要求在 CSS URL 中使用引号，我在这里使用它们，因为它看起来更漂亮。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-03-22T07:09:58.883

我通过重命名 CSS 类解决了类似的问题。MSIE 允许 CSS 类 ID 以数字开头；火狐没有。我使用图像的宽度（以像素为单位）创建了一个类，例如 .1594px-01a

我实际上知道这是非标准语法，但由于它在 MSIE 中运行良好，所以我忘记了它。在尝试了所有其他东西之后，我终于意识到它可以像命名一样简单，而且我一在全班面前放了一封信，presto！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-12T07:59:44.463

我有一个类似的问题。原因是 Firefox 对 css 中缺少的字段很敏感。Chrome 会（有时）自动完成缺失的字段，因此问题会出现在您的 Firefox 浏览器上。

您需要添加一个显示类型，因为现在它被转换为 0 高度。

就我而言：

```
.left-bg-image {
    display: block; // add this line

    background-image: url('../images/profile.jpeg');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
    opacity: .6;
    min-width: 100%;
    min-height: 100vh;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-11-23T18:34:49.187

关于 FF 中的 CSS background-image 属性，我遇到了类似的问题。它在 IE 中运行良好，但拒绝在 FF 中运行；）在阅读了一些帖子后，我确定问题确实是 div 中除了表格之外没有任何内容（我试图使背景图像调整为大小没有折叠或扩展的浏览器，因此在 div 的背景中使用了更大的图像以形成各种“裁剪”。）对我来说，解决方案似乎是通过放置一个 img 标签来简单地“作弊”显示了一个空白 .png 文件，然后我将其重新调整为图像的正确高度，宽度设置为 100%。这对我的问题很有用，我希望它可以帮助遇到类似问题的其他人。可能不是最好的修复，但它是一个修复；）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-16T20:00:06.707

您确定图像是 JPG 文件而不是 PNG/其他文件吗？

我想知道 IE 是否让你摆脱了其他浏览器没有的东西。

同样，文件大小写是否与指定的完全一致？

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-16T20:14:31.843

有这个 HTML 'base' 标签，就像

```
<head>
   <base href="http://example.com/some/bizarre/directory"/>
</head> 
```

如果这存在于您的页面中，则该 url 的图像与您当前的 url 无关，而是与给定的基本 url 相关。不过，我不知道为什么 IE 会显示它而 Firefox 不会。

[Webdeveloper](https://addons.mozilla.org/de/firefox/addon/60) Firefox 扩展提供了“显示损坏的图像”选项 - 这可能会派上用场。此外，您可以尝试“ [Live Http Headers](https://addons.mozilla.org/de/firefox/addon/3829) ”来查看是否/请求了什么图像以及返回代码是什么。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-16T13:57:48.110

你可以试试这个：

```
div.something {
background: transparent url(../images/table_column.jpg);
} 
```

其他声明是简写的 CSS 属性，我 afaik 不需要它们。
你在网上有这个吗？我想看看我能不能稍微摆弄一下。（本地）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-12-16T14:03:12.340

恐怕问题多于答案，但它们可能会帮助您找到正确的答案：

您是否有可能以某种方式折叠 Firefox 中的 div（带有一些浮点数或类似的）？

div 中是否还有其他内容以确保其足够大以显示图像？

您是否安装了[Firebug](http://getfirebug.com/)并查看了页面上的 CSS 定义？

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-04-25T19:07:52.700

我发现了导致此问题的两件事：

1.  我使用的是 .tif 文件，Firefox 似乎不喜欢它——我改成了 .png 文件。
2.  我`overflow:auto;`为 div 添加了 CSS -`display:block;`对我不起作用。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-11-23T20:34:52.610

除了已经说过的话，我唯一能想到的另一件事就是图片的创作方式。如果您在 Photoshop 中制作/编辑了图像，请确保将图像另存为另存为 Web...

有时，如果您在 Photoshop 中使用 JPG 图像而不另存为 Web 图像，它可能不会出现在 Firefox 中。几周前我发生过这种情况，一位图形艺术家为一个迷你网站创建了一个漂亮的标题，它不会出现在 FF 中！

等待...

尝试在 div 上设置宽度和高度以扩展它。这可能是您的 div 中的无内容问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-08-20T17:42:55.057

它可能看起来很奇怪，但这对我有用>

```
#hwrap {
background-color: #d5b75a;
background: url("..//design/bg_header_daddy.png"), url("..//design/nasty_fabric.png");
background-position: 50% 50%, top left;
background-origin: border-box, border-box;
background-repeat: no-repeat, repeat;
} 
```

是的，双点和双斜线...... ??!!?? ...我在互联网上找不到任何报告这种奇怪行为的东西。

[编辑] 我已经单独发帖 > [https://stackoverflow.com/q/18342019/529802](https://stackoverflow.com/q/18342019/529802)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2012-05-07T07:51:49.853

我的错误是使用“\”而不是“/”。在 IE 中可以正常工作，但在其他浏览器中不行。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2011-05-15T05:47:49.173

对于那些在 FF 中遇到问题但在 Chrome 中没有遇到问题的人：

您可能会错误地将职位的不同值类型混合在一起。

例如，

```
background: transparent url("/my/image.png") right 60%  no-repeat; 
```

会犯这个错误。修复可能是：

```
background: transparent url("/my/image.png") 100% 60%  no-repeat; 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-01-05T22:46:29.377

（这似乎不是 OP 的确切情况，但问题有点相关，我找到了我想分享的解决方法）

我也遇到过同样的问题——除了在 Firefox 中，到处都可以看到背景图像——对我来说，这个问题与我正在开发浏览器插件这一事实有关。

我正在使用该属性`style.css`在`pageMod`模块中注入一个文件。`contentStyleFile`在其中，有一个规则`background-image: url(/img/editlist.png);`是我引用附加组件*外部的图像文件。*这里的问题是，与其他浏览器不同，Firefox 将这个外部域根错误地解释为附加组件的内部根！

css 文件是 Chrome 版本的扩展/附加组件的 1:1 端口，所以我不想弄乱它。这就是为什么我`contentStyle`在资源文件夹中添加了一个附加规则以及该图像的副本。此规则只是覆盖 css 文件中的规则。

（事后看来，甚至可能是比以前更优雅的方法……）

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-06-03T08:12:18.523

在我的情况下，它是由 FF 隐私和安全设置中的“严格”模式引起的。在我更改为“标准”后，所有背景图像都变得可见。

[![在此处输入图像描述](https://i.stack.imgur.com/5hDdK.png)](https://i.stack.imgur.com/5hDdK.png)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-11-10T10:03:30.643

没有人提到**背景来源**，所以你去：

```
background-image:url('dead.beef');
background-size: 100% 100%;
background-origin:border-box; 
```

为我解决了问题；我的背景显然在我的 div 之外。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2011-12-03T18:48:10.697

这对我有用：

1) 单击背景图像表。
2) 右键单击​​页面底部的状态栏。
3) 单击内联样式。
4) 单击背景样式选项卡。
5) 如果您在颜色标题中看到“透明”，那就是问题所在。
6) 单击颜色框并选择一种颜色（白色是一个不错的选择。）
7) 颜色标题现在应该显示为白色。
8) 单击确定。
9) 保存页面。
10) 上传页面并覆盖现有文件。
11) 刷新页面，你的背景图片就会显示出来。

注意：请确保您已上传背景图片 jpeg。我忘记上传背景 jpeg 一次，并且在我意识到我的错误之前花了很长时间尝试对其进行排序。

问候

马丁

# php - 经验丰富的开发人员学习 PhP 的最佳方式是什么

> ID：371356
> 
> 赞同：2
> 
> 时间：2008-12-16T13:51:07.467
> 
> 标签：php

我在 .Net 方面有不错的经验，在 Python 方面有一些经验，在 PhP 方面经验为零。现在我想学习一些PhP，有没有适合我这样的人的网络资源？

PhP程序员通常使用的工具是什么？

### 复制：

PHP 教程或/和工具已经讨论过很多次了。

1.  [/what-is-your-preferred-tool-stack-for-php-development-in-the-windows-environment](https://stackoverflow.com/questions/116949/what-is-your-preferred-tool-stack-for-php-development-in-the-windows-environment)
2.  [/great-eclipse-set-up-for-php-development](https://stackoverflow.com/questions/207696)
3.  [/the-best-php-editor-for-vista](https://stackoverflow.com/questions/67729/the-best-php-editor-for-vista)
4.  [/what-are-some-pros-and-cons-of-the-various-php-ides](https://stackoverflow.com/questions/165817/what-are-some-pros-and-cons-of-the-various-php-ides)
5.  [/any-good-php-ide-preferably-free-or-cheap](https://stackoverflow.com/questions/6166/any-good-php-ide-preferably-free-or-cheap)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T14:28:06.113

## 学习：

最好的：[php.net](http://www.php.net)，但您可以在[tizag](http://www.tizag.com/phpT/)获得很棒的教程。如果您需要更多[教程](http://www.phptutorial.info/)，这里可以帮助您开始，

## 工具：

IDE - (light one) UE Studio ( [www.ultraedit.com](http://www.ultraedit.com) ):

1.  我喜欢手动输入我的代码
2.  有基本的智能感知可以帮助我传递所有正确的函数参数
3.  它可以折叠大功能以使它们不碍事
4.  它有不错的代码突出显示，我可以自定义
5.  它不是像 eclipse 那样的“选项超载”
6.  它具有内置的项目管理功能
7.  它的速度足以成为记事本的替代品
8.  有一个**非常**酷的功能，我喜欢在 C/PHP 中输​​入“..”变成“->”的对象编程

当然，您可以使用**完整的 IDE**：我也喜欢[Eclipse](http://www.eclipse.org/)和[PDT](http://www.eclipse.org/pdt/)。我不得不说这是一个更好的选择，因为它与调试器、语法高亮等功能非常完整。

源代码控制：SVN ( [http://subversion.tigris.org/](http://subversion.tigris.org/) )

1.  优惠的价格（免费）
2.  与 UltraEdit 集成
3.  [TortoiseSVN](http://tortoisesvn.tigris.org/)与 Windows 集成得非常好。
4.  SVN 被许多人认为是一个“标准”——所以善于使用它是件好事

调试：Firefox + [Web Developer Toolbar](https://addons.mozilla.org/en-US/firefox/addon/60)和[Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)

1.  Firefox 快速呈现网页
2.  Firefox 是最符合标准的浏览器之一
3.  FF 适用于许多平台（Mac/Win/Linux）
4.  “为 FF 编码您的页面，然后使其适用于 IE”
5.  Web 开发人员可以让您以多种不同的方式查看您的页面（带/不带 css、图像等）
6.  我不确定它在调试 javascript 方面是否比 firebug 好得多！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T14:14:35.657

每当您想学习一门新语言时，最好的办法是下载完全符合您要求的代码片段并更改代码。

如果你只是学习 PHP。不要像上面提到的 Ikke 那样为 EasyPHP/XAMPP 之类的 Web 框架而烦恼。它们更复杂，然后您将拥有要学习的语言和功能强大的 IDE。

从 PHP 代码网站（谷歌是你的朋友）下载代码片段并自定义它们。

如果您想走使用软件自定义的路线（正如我所说的那样更难），您可以尝试通过编辑 wordpress 主题目录中的 PHP 文件来自定义 Wordpress 主题：

wordpress/wp-内容/主题/主题名称/

尝试编辑一个文件，例如：“sidebar.php”。您可以尝试编辑一小部分 wordpress 并亲自查看更改。

我提到 Wordpress 学习 PHP 的唯一原因是因为最初，这正是我学习 PHP 的方式。我曾尝试阅读书籍，唯一能帮助我理解 PHP 的就是将其更改为我真正想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T13:59:03.910

[我从http://php.net](http://php.net)学到了很多东西。互联网上也有很多入门教程。

刚开始尝试制作一些示例网站。对于已经有编程经验的人来说，跨步使用 PHP 并不难，所以你应该很容易上手。

关于工具：我自己使用 eclipse 作为 IDE。我将尝试使用 aptana 插件，因为它具有调试支持。

但是您可以尝试其他几个 IDE，例如 Zend Studio。vs.php 等等。

本地网络服务器也很简单，例如 XAMPP 或 EasyPHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T14:17:53.513

我使用 vim 作为我的文本编辑器。除非您在服务器上使用 Xdebug 之类的东西，否则 IDE 对 PHP 来说有点过分了。在反对者否决我的亵渎神明的声明之前，您也可以使用 vim 获得智能感知。

抱歉，我的意思是，你真正需要的是 php 二进制文件和一个简单的文本编辑器来编写 .php 文件

# c - 在 C 中序列化数据结构

> ID：371371
> 
> 赞同：45
> 
> 时间：2008-12-16T14:00:18.807
> 
> 标签：c, serialization

我想要一个可以将我的数据结构序列化到磁盘的 C 库，然后再加载它们。它应该接受任意嵌套的结构，可能带有循环引用。

我认为这个工具需要一个描述我的数据结构的配置文件。该库允许使用代码生成，尽管我相当确定没有它也可以做到这一点。

注意我对数据可移植性不感兴趣。我想把它用作缓存，所以我可以依赖环境不变。

谢谢。

* * *

*结果*

有人建议[Tpl](http://tpl.sourceforge.net/)这是一个很棒的库，但我相信它不会做任意对象图，例如每个包含两个其他节点的节点树。

另一个候选者是[Eet](http://www.enlightenment.org/p.php?p=about/efl/eet&l=en)，它是 Enlightenment 窗口管理器的一个项目。看起来很有趣，但同样，似乎没有序列化嵌套结构的能力。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-16T14:09:37.443

查看[tpl](http://tpl.sourceforge.net/)。从概述：

> Tpl 是一个用于序列化 C 数据的库。数据以其自然二进制形式存储。API 很小，并试图保持“不碍事”。与使用 XML 相比，tpl 在 C 程序中使用起来更快、更容易。Tpl 可以序列化许多 C 数据类型，包括结构。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-16T17:55:11.110

我知道你要图书馆。如果你找不到一个（::boggle::，你会认为这是一个已解决的问题！），这里有一个解决方案的大纲：

您应该能够编写代码生成器 [1] 来序列化树/图，而无需（运行时）相当简单的预处理。

您需要解析节点结构（`typedef`处理？），并以直接的方式写入包含的数据值，但要小心处理指针。

*   *对于您知道*被单独引用的其他对象（即`char *name;`）的指针，您可以直接序列化目标数据。

**   对于可能被多次引用的对象以及树的其他节点，您必须表示指针结构。每个对象都被分配了一个序列号，这是在指针的位置写出的。维护当前内存位置和序列号之间的转换结构。在遇到指针时，查看它是否已经分配了一个数字，如果没有，给它一个并将该对象排队以进行序列化。* 

 *回读还需要一个 node-#/memory-location 转换步骤，并且可能更容易在两遍中完成：使用指针槽中的节点号重新生成节点（错误的指针，请注意）以找出每个节点的位置放，然后再次遍历结构来修复指针。

我对tpl一无所知，但你也许可以背负它。

* * *

磁盘/网络格式可能应该包含一些类型信息。您将需要一个名称修改方案。

* * *

[1] [ROOT](http://root.cern.ch/)使用这种机制在 C++ 中提供非常灵活的序列化支持。

* * *

**后期添加：**在我看来，这并不总是像我上面暗示的那样容易。考虑以下（人为设计且设计不当）声明：

```
enum {
   mask_none = 0x00,
   mask_something = 0x01,
   mask_another = 0x02,
   /* ... */
   mask_all = 0xff
};
typedef struct mask_map {
   int mask_val;
   char *mask_name;
} mask_map_t;
mask_map_t mask_list[] = {
   {mask_something, "mask_something"},
   {mask_another, "mask_another"},
   /* ... */
};
struct saved_setup {
   char* name;
   /* various configuration data */
   char* mask_name;
   /* ... */
}; 
```

并假设我们初始化`struct saved_setup`项目，以便`mask_name`指向`mask_list[foo].mask_name`。

当我们去序列化数据时，我们会做什么`struct saved_setup.mask_name`？

**您需要小心设计数据结构和/或为序列化过程带来一些特定于案例的智能。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-25T09:52:11.310

这是我的解决方案。它使用我自己实现的 malloc、free 和 mmap、munmap 系统调用。按照给定的示例代码。参考：[http ://amscata.blogspot.com/2013/02/serialize-your-memory.html](http://amscata.blogspot.com/2013/02/serialize-your-memory.html)

在我的方法中，我创建了一个 char 数组作为我自己的 RAM 空间。然后有分配内存和释放它们的函数。创建数据结构后，通过使用`mmap`，我将 char 数组写入文件。

每当您想将其加载回内存时，都会有一个函数用于`munmap`将数据结构再次放入 char 数组中。由于它具有指针的虚拟地址，因此您可以重新使用您的数据结构。这意味着，您可以创建数据结构、保存、加载、再次编辑并再次保存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-16T22:46:10.647

你可以看一下[eet](http://www.enlightenment.org/p.php?p=about/efl/eet&l=en)。用于存储 C 数据类型（包括嵌套结构）的启蒙项目库。尽管启蒙项目的几乎所有库都处于 pre-alpha 状态，但 eet 已经发布。但是，我不确定它是否可以处理循环引用。可能不是。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-17T14:10:19.440

[http://s11n.net/c11n/](http://s11n.net/c11n/)

HTH

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-02-15T07:21:05.310

你应该检查 gwlib。串行器/解串器非常广泛。并且有大量的测试可供查看。[http://gwlib.com/](http://gwlib.com/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-16T14:12:00.467

我假设您正在谈论存储图形结构，如果不是那么忽略...

如果您存储一个图，我个人认为最好的办法是实现一个将您的图转换为邻接矩阵的函数。然后，您可以创建一个将邻接矩阵转换为图形数据结构的函数。

这有三个好处（这在您的应用程序中可能很重要，也可能不重要）：

*   邻接矩阵是创建和存储图的一种非常自然的方式
*   您可以创建一个邻接矩阵并将它们导入您的应用程序
*   您可以以有意义的方式存储和读取数据。

我在一个 CS 项目中使用了这种方法，而且我肯定会再次这样做。

您可以在此处阅读有关邻接矩阵的更多信息：[http ://en.wikipedia.org/wiki/Modified_adjacency_matrix](http://en.wikipedia.org/wiki/Modified_adjacency_matrix)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-12T15:28:47.397

另一种选择是[Avro C](http://avro.apache.org/docs/current/api/c/index.html)，它是[Apache Avro](http://avro.apache.org)在 C中的实现。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-13T06:15:55.837

这是一个使用[Binn](https://github.com/liteserver/binn)库的示例（我的创作）：

```
 binn *obj;

  // create a new object
  obj = binn_object();

  // add values to it
  binn_object_set_int32(obj, "id", 123);
  binn_object_set_str(obj, "name", "Samsung Galaxy Charger");
  binn_object_set_double(obj, "price", 12.50);
  binn_object_set_blob(obj, "picture", picptr, piclen);

  // send over the network
  send(sock, binn_ptr(obj), binn_size(obj));

  // release the buffer
  binn_free(obj); 
```

如果您不想将字符串用作键，则可以使用 binn_map 使用整数作为键。

还支持列表，所有这些结构都可以嵌套：

```
 binn *list;

  // create a new list
  list = binn_list();

  // add values to it
  binn_list_add_int32(list, 123);
  binn_list_add_double(list, 2.50);

  // add the list to the object
  binn_object_set_list(obj, "items", list);

  // or add the object to the list
  binn_list_add_object(list, obj); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-11-03T21:47:57.093

理论上 YAML 应该做你想做的事[http://code.google.com/p/yaml-cpp/](http://code.google.com/p/yaml-cpp/)

请让我知道它是否适合您。

# sql - mysql full text search is empty

> ID：371372
> 
> 赞同：0
> 
> 时间：2008-12-16T14:00:21.443
> 
> 标签：sql, mysql, ruby-on-rails

I am using ruby on rails with a MySQL backend. I have a table called notes and here is the migration I use to create it:

```
def self.up
  create_table(:notes, :options => 'ENGINE=MyISAM') do |t|
    t.string :title
    t.text :body

    t.timestamps
  end

  execute "alter table notes ADD FULLTEXT(title, body)"

end 
```

I want to do full text searches on the title and body fields. The problem is that the full text searches always come back empty. For example if I add this row into the database: `Title: test, Body: test`. Then I run this query `SELECT * FROM notes WHERE MATCH(title, body) AGAINST('test')`. It returns a nil set. Can anybody tell me what I am doing wrong and how to get full text search working?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-16T14:13:04.740

I'm just guessing here, but the documentation states:

> A natural language search interprets the search string as a phrase in natural human language (a phrase in free text). There are no special operators. The stopword list applies. In addition, words that are present in 50% or more of the rows are considered common and do not match. Full-text searches are natural language searches if the IN NATURAL LANGUAGE MODE modifier is given or if no modifier is given.

Therefore, if there is only one row, and it contains 'test', then 'test' is present in more than 50% of the rows and is therefore not considered a match. Perhaps try:

```
SELECT * FROM notes WHERE MATCH(title, body) AGAINST('test' IN BOOLEAN MODE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-19T16:35:19.830

While this probably does not answer your specific question, I would just go ahead and use [Ferret](http://rm.jkraemer.net/projects/show/aaf) or [Solr](http://acts-as-solr.rubyforge.org/) as the search engine, especially if lots of text is involved. Both are very easy to setup and powerful to boot. Ultrasphinx is also another option.

With RoR, I usually don't get bogged trying to get something to work in one particular way. It's all about being Agile ;) you see.

# c# - C# 用户控件继承

> ID：371378
> 
> 赞同：2
> 
> 时间：2008-12-16T14:03:19.703
> 
> 标签：c#, inheritance, user-controls, user-interface, designer

使用 VS.NET 2008，输出类型类库，目标框架 .NET 2.0

我想出了一个简化的场景来问这个问题。

我有一个`Button`用户控件，它是一个简单的面板，上面有一个大按钮。

我想创建一个`RedButton`扩展 的控件，`Button`类似地，一个`GreenButton`.
例如`Class RedButton : Button`

理想情况下，当我打开`RedButton`的设计器时，我会看到我在其中创建的按钮`Button`并能够对其进行修改，例如将其设为红色，或更改字体等。

我曾经尝试过这样做，但是当我打开`RedButton`'s 设计器时，我得到了一堆错误。

在这种情况下，以编程方式完成所有这些工作对我们来说不是一种选择，因为在实际情况下这将是一种痛苦。

有人可以对此有所了解吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T16:02:20.917

老实说，您的示例应该可以正常工作。只需确保为派生类提供默认构造函数即可。还要确保您不使用通用控件，因为设计者不知道如何创建它的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-21T17:35:43.377

如果您还没有，请遵循此示例：

```
public class RedButton : Button 
```

然后在 XAML 中而不是

```
<UserControl></UserControl> 
```

开始/结束您的 XAML 文件

```
<Button></Button> 
```

请注意，即使您尚未定义命名空间，也可以从另一个命名空间中的某些内容继承。例子：

```
<radDock:RadPane ...            
        xmlns:radDock="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Docking"
        ...
        Title="{Binding Path=StudyTitle}"... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-09T18:18:37.647

自 VS.NET 2008 以来，根设计器能够呈现您提到的“一堆错误”。一般来说，所描述的场景应该“正常工作”。

你面临什么样的错误？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T14:12:53.553

您的装配设置是否要延迟签名？查找延迟签名属性以及项目属性中的复选框。我已经看到延迟签名导致 VS2005 出现此类问题，也许它在 VS2008 中仍然是一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T14:26:05.337

我不得不在一家老公司处理这个问题多年。我当时稍微研究了一下。我认为没有解决方案。

我不知道您想在实际示例中扩展多少基类，但是您在示例中提到的更改将是微不足道的。就像

```
btnTheButton.BackGround=Color.Red; 
```

实际上，可能您需要对按钮进行的​​任何更改都可以在几分钟内完成。不幸的是，每次您需要继承一个新控件时，这将是几分钟，但我认为这是唯一的选择

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T16:54:19.203

如果您继承的控件来自 DLL 而不仅仅是解决方案中的另一个类，那么您的设计器将正确呈现继承的控件。我的猜测是 VS 设计视图需要 DLL 来绘制控件。可能还有其他方法可以解决这个问题。

# c# - Windows 客户端（不是 Web 应用程序）的最佳打印方式？

> ID：371384
> 
> 赞同：12
> 
> 时间：2008-12-16T14:05:38.687
> 
> 标签：c#, .net, printing

从 c#/.net 打印东西的最佳方法是什么？

问题是关于单页以及包含大量页面的报告。

如果能得到一份最常见的打印库列表，其中包含每个库的主要特性和陷阱，那就太好了。

[更新] 适用于标准 Windows 客户端（或服务器），不适用于 Web 应用程序，请。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-16T14:10:06.430

对于报告，我使用 RDLC 控件。

对于其他一切，我使用 .NET 中的固有打印对象。

**编辑** 固有的打印对象都可以在 System.Drawing.Printing 命名空间中找到。当您在 WinForms（或 WPF）应用程序中使用 PrintDialog 或 PrintPreviewDialog 时，您将控制这些对象。

基本概念是您正在向打印机绘图。最简单的形式是：

```
Sub MyMethod()
     Dim x as New PrintDocument
     AddHandler x.PrintPage, AddressOf printDoc_PrintPage
     x.Print
End Sub
Sub printDoc_PrintPage( sender as Object,  e as PrintPageEventArgs)
      Dim textToPrint as String= ".NET Printing is easy"
      dim printFont as new Font("Courier New", 12)
      dim leftMargin as int= e.MarginBounds.Left
      dim topMargin as int = e.MarginBounds.Top
      e.Graphics.DrawString(textToPrint, printFont, Brushes.Black, leftMargin, topMargin)
End Sub 
```

这里发生的情况是，当我的对象 (x) 被发送打印命令时，它会引发“PRINT PAGE”事件（旨在一次打印 1 页）。然后，此事件使用 PrintPageEventArgs 的 Graphics 属性将相关字符串直接绘制到打印后台处理程序。

[这是一个教程](http://www.ondotnet.com/pub/a/dotnet/2002/06/24/printing.html)，在 Google 上快速搜索“.NET 打印教程”会返回超过 200K 的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T14:26:58.970

[我们使用了一组来自PDFSharp](http://www.pdfsharp.com/PDFsharp/index.php?option=com_frontpage&Itemid=1 "PDFSharp")的第三方 DLL，后者又使用来自 MigraDoc 的 DLL。我不知道我们朝着这个方向发展的所有原因（决定是由高级开发人员做出的），但我可以告诉你：

*   它似乎正在积极开发中。
*   它具有我们需要的大部分功能。
*   源代码可用。尽管它使用了一些我以前从未见过的模式和约定，但一旦我了解它们，进行更改就相当容易了。我添加了对直接使用 System.Drawing.Image 而不是保存文件的支持。
*   内部或外部都没有很好地记录它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-25T11:13:23.180

» 显示在 Windows 窗体应用程序中打印基础知识的示例代码：

```
 using System.Drawing.Printing;

    PrintDocument printDoc = new PrintDocument();
    printDoc.DefaultPageSettings.Landscape = true;
    printDoc.DefaultPageSettings.Margins.Left = 100; //100 = 1 inch = 2.54 cm
    printDoc.DocumentName = "My Document Name"; //this can affect name of output PDF file if printer is a PDF printer
    //printDoc.PrinterSettings.PrinterName = "CutePDF";
    printDoc.PrintPage += new PrintPageEventHandler(printDoc_PrintPage);

    PrintDialog printDialog = new PrintDialog();
    printDialog.Document = printDoc; //Document property must be set before ShowDialog()

    DialogResult dialogResult = printDialog.ShowDialog();
    if (dialogResult == DialogResult.OK)
    {
        printDoc.Print(); //start the print
    }   

    void printDoc_PrintPage(object sender, PrintPageEventArgs e)
    {
        Graphics g = e.Graphics;
        string textToPrint = ".NET Printing is easy";
        Font font = new Font("Courier New", 12);
        // e.PageBounds is total page size (does not consider margins)
        // e.MarginBounds is the portion of page inside margins
        int x1 = e.MarginBounds.Left;
        int y1 = e.MarginBounds.Top;
        int w = e.MarginBounds.Width;
        int h = e.MarginBounds.Height;

        g.DrawRectangle(Pens.Red, x1, y1, w, h); //draw a rectangle around the margins of the page, also we can use: g.DrawRectangle(Pens.Red, e.MarginBounds)
        g.DrawString(textToPrint, font, Brushes.Black, x1, y1);

        e.HasMorePages = false; //set to true to continue printing next page
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T14:29:51.930

一堆东​​西，你说。嗯，看来您应该使用设计器的解决方案，因此您应该研究 Crystal Reports 和 RDLC。还有 Reporting Services 解决方案，但在这种情况下，您需要一台带有 SQL Server 的服务器。

Crystal Reports 似乎给你更多的选择，但比 RDLC 需要更多的学习。

我不建议您在 HTML + CSS 中创建它们，因为这些限制和您必须投入的额外工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T17:25:36.067

如果您可以将输出构建为[FlowDocument](http://msdn.microsoft.com/en-us/magazine/cc163371.aspx)，则可以轻松地将其转换为 XPS 以获得“电子”版本，并打印 XPS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-16T14:13:35.753

这在很大程度上取决于您的应用程序的要求。

尽管它不是完美的工具（远非如此），但 Crystal Reports 往往是一个不错的选择。它使您可以选择直接从数据库中获取数据，或者，如果您已经有了要打印的对象列表，则可以将它们传递给文档并将对象属性绑定到报告的标签。

但是请给我们更多关于您正在尝试做什么的信息，以便您收到更好的建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-24T19:16:49.193

## 可以通过 Adob​​e Acrobat 打印

我使用 System.Diagnostics.ProcessStartInfo 等标准库来使用 Adob​​e Acrobat 打印 pdf。最终用户不必与 Acrobat GUI 交互，但令人讨厌的是，以下代码仍将其拉到屏幕上几秒钟。

```
 // Sample fileName = System.Environment.GetFolderPath(
    // System.Environment.SpecialFolder.CommonApplicationData)
    //  + @"\MyCompany\MyProject\TestPrint.pdf"
    private void SendPrintJob(string fileName)
    {
        try
        {
           // Start by finding Acrobat from the Registry.
           // This supposedly gets whichever you have of free or paid
            string processFilename = Microsoft.Win32.Registry.LocalMachine
                 .OpenSubKey("Software")
                 .OpenSubKey("Microsoft")
                 .OpenSubKey("Windows")
                 .OpenSubKey("CurrentVersion")
                 .OpenSubKey("App Paths")
                 .OpenSubKey("AcroRd32.exe")
                 .GetValue(String.Empty).ToString();

            ProcessStartInfo info = new ProcessStartInfo();
            info.Verb = "print";
            info.FileName = processFilename;
            info.Arguments = String.Format("/p /h {0}", fileName);
            info.CreateNoWindow = true;
            info.WindowStyle = ProcessWindowStyle.Hidden;
            info.UseShellExecute = false;

            Process p = new Process();
            p.StartInfo = info;
            p.Start();

            p.WaitForInputIdle();

            // Recommended to add a time-out feature. Mine is coded here.
        }
        catch (Exception e)
        {
            Console.WriteLine("Error sending print job. " + e.Message);
        } 
```

## 可以通过 PDFSharp/MigraDoc 进行操作

我没有将文档操作读入 OP，但我看到其他答案评论了这一事实。2008-2012 年的一些 StackOverflow 问答（包括来自这个问题的@Robert Gowland）说 PDFSharp / MigraDoc 的文档很差。

在 2018 年，我发现它是一个简单的学习曲线，[主页](http://www.pdfsharp.net/)上有很多示例。我今天早上读了这个问题，想知道如何打印图表，现在有一个按钮可以截屏我的应用程序并打印。

您将需要转到 NuGet 包管理器以获取`PDFsharp-MigraDocs`（或`PDFsharp-MigraDocs-WPF`，或`PDFsharp-MigraDocs-GDI`）。*MigraDocs*是一个高级组件，它可以从元素创建文档，而不用关心它们是 pdf 还是图像或者你有什么。*PDFSharp*是帮助重新排列文档、将多个文档放在一个页面上以及将内容从一页拆分到两页的组件。

# asp.net-mvc - ASP.Net MVC 的奇怪缓存（？）问题

> ID：371386
> 
> 赞同：2
> 
> 时间：2008-12-16T14:06:49.290
> 
> 标签：asp.net-mvc, vb.net, session, caching

在 IIS6 (Windows 2003) 上部署的 ASP MVC 有一个奇怪的问题。我已将控制器代码简化为以下内容；

```
<AcceptVerbs(HttpVerbs.Get)> _
Public Function CloseBatches() As ActionResult
    ViewData("Title") = "Close Batches"
    ViewData("Message") = Session("Message")
    Return View()
End Function

<AcceptVerbs(HttpVerbs.Post)> _
Public Function CloseBatches(ByVal RequestId As String) As ActionResult

    Session("Message") = "Yadda yadda blah"

    Return RedirectToAction("CloseBatches")

End Function 
```

当然，控制器最初确实做得更多，但将其剥离到此以尝试排除故障。该页面具有基本的 ViewPage html（母版页参考等），然后；

```
<p><%=ViewData("Message")%></p>
<%Using Html.BeginForm("CloseBatches", "Home", New With {.RequestId = "Close"})%>
    <input type="submit" id="Close" value="Close"/>
<%End Using%> 
```

如您所见，我正在尝试使用 Post-Redirect-Display 模式，这似乎是目前要走的路。问题是当您单击按钮时，无论您单击按钮多少次，消息都不会出现。但是，如果您执行刷新/F5，文本确实会出现 - 然后再次刷新并消失 - 再次刷新并出现 - 重复！

我在两个控制器函数上都有断点，它在正确的点命中它们，我已经单步执行了代码并且没有发生错误，因此应该填充 ViewData，但页面并不总是显示它！

用 IE7 和 FF3 测试过——后者似乎有点断断续续，因为它偶尔会起作用！

有任何想法吗？我错过了什么明显的东西？会发生一些奇怪的缓存吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T14:19:03.730

更改您的代码如下：

```
<AcceptVerbs(HttpVerbs.Get)> _
Public Function CloseBatches() As ActionResult
    ViewData("Title") = "Close Batches"
    Return View()
End Function

<AcceptVerbs(HttpVerbs.Post)> _
Public Function CloseBatches(ByVal RequestId As String) As ActionResult
    TempData("Message") = "Yadda yadda blah"
    Return RedirectToAction("CloseBatches")
End Function

<p><%=ViewData.Eval("Message")%></p>
<%Using Html.BeginForm("CloseBatches", "Home", New With {.RequestId = "Close"})%>
    <input type="submit" id="Close" value="Close"/>
<%End Using%> 
```

请注意，[ViewData.Eval](http://weblogs.asp.net/stephenwalther/archive/2008/08/13/asp-net-mvc-tip-32-repopulate-form-fields-with-viewdata-eval.aspx)表示“如果存在则从 ViewData 获取值，如果不存在则从 TempData 获取值”。这是查找消息的**正确位置。**

我在 MVC 应用程序中根本不使用 Session。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T14:12:54.537

我真的不知道您面临什么问题，但请尝试使用 TempData 而不是 Session。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T14:47:11.707

我面临着同样的问题，我想我已经把它缩小到只有在我使用 RedirectToAction 时才会发生。有时它有效，有时则无效。它似乎在 IE7 中按预期工作，但在 FF3 中却不是。

我已经在我的母版页中尝试了这两种方法来检查是否设置了这个值

```
TempData.ContainsKey("Error") 
```

和

```
ViewData.Eval("Error") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T14:54:32.097

抱歉，应该提到我最初使用的是 TempData，但后来改用 Session 来确保每个请求都存在 Message 数据以简化测试。在单步执行时确实存在，并且每次都通过 ViewData("Message") = Session("Message") 位，并且调试器将 ViewData 显示为其中包含 Message 项。这

页面上的位无论如何都不是有条件的，因此它应该显示所说的 ViewData ...但它没有，或者至少不是所有时间。

我将研究 .Eval 位，看看是否能解决任何问题。谢谢。

# database - 尝试在 Linq 中进行子查询...遇到问题！

> ID：371391
> 
> 赞同：2
> 
> 时间：2008-12-16T14:08:48.787
> 
> 标签：database, linq, linq-to-sql, tsql

我正在尝试将我的一些存储过程转换为 Linq，并且遇到以下 Transact-Sql 语句的问题：

```
Select 
    Year(p.StartDate) As Year,
    (Select Sum(t.Units) From Time t Where Year(t.TransactionDate) = Year(p.StartDate)) As Hours,
    (Select Sum(i.Price) From Invoice i Where Year(i.CreatedDate) = Year(p.StartDate)) As Invoices
From 
    Period p
Group By
    Year(p.StartDate)
Order By
    Year(p.StartDate) 
```

我正在与 LinqPad 合作试图解决这个问题......任何帮助将不胜感激！

**进步**

到目前为止，我有以下内容......只是想弄清楚如何转换子查询：

```
from p in Periods
group p by p.StartDate.Year into g
orderby g.Key
select new 
{
    g.Key,
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-16T14:22:04.800

尝试：

```
from p in Periods
group p by p.StartDate.Year into g
orderby g.Key
select new
{
g.Key,
Hours = (from t in Times where t.TransactionDate.Year == g.Key select t).Sum(t => t.Units),
Invoices = (from i in Invoices where i.CreatedDate.Year == g.Key select i).Sum(i => i.Price)
} 
```

# php - 使用 HTML Mime Mail for PHP 发送电子邮件，但需要通过 Exchange 服务器进行身份验证

> ID：371392
> 
> 赞同：2
> 
> 时间：2008-12-16T14:08:55.857
> 
> 标签：php, email, authentication, exchange-server

首先，服务器：在 Windows 2003 Server sp2 上运行的 Exchange 2003 sp2

我有一个脚本，可以将电子邮件发送到两个电子邮件帐户，一个名为 student@，另一个是 fs@（教师/员工）。我们将这两个电子邮件帐户设置为仅接受交换服务器上经过身份验证的用户的传入电子邮件，以使自己免受垃圾邮件/垃圾邮件的侵害。所以现在脚本发送的电子邮件不成功。我有作为合法用户的返回路径电子邮件，但它没有经过身份验证。我注意到，当我尝试通过我的邮件客户端（Apple 的 Mail.app）发送测试时，由于我通过他们的 IMAP 服务器而不是通过 Exchange 使用电子邮件，我的电子邮件也失败了。

这是发送电子邮件的代码：

```
$mail = new htmlMimeMail();
$message = $today.$announcements.$food.$upcoming;
$mail->setHTML($message);
$mail->setSubject($subject);
$mail->setSMTPParams('mail.domain.com', 25, true, 'user', 'pass');
$mail->setFrom("no-reply@domain.com");
$mail->setReturnPath("webmaster@domain.com");

if($message)
    $mailresult = $mail->send(array($emailto)); 
```

[我以前从未使用 HTML Mime Mail for PHP ( http://www.phpguru.org/static/mime.mail.html](http://www.phpguru.org/static/mime.mail.html) ) 类向交换服务器进行身份验证。任何帮助，将不胜感激。

也许还有另一个 PHP 类可以轻松地通过 Exchange 服务器进行身份验证？

编辑：是否有任何 php 邮件类可以通过交换服务器正确验证？

另一个编辑：Exchange Server 使用 NTLM 身份验证并使用 Active Directory。希望这可以帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-16T19:03:23.453

Exchange 支持标准的[SMTP Auth](http://en.wikipedia.org/wiki/SMTP-AUTH)机制，所以我会使用它。这是一个使用[Pear::Mail](http://pear.php.net/package/Mail) from [here](http://email.about.com/od/emailprogrammingtips/qt/et073006.htm)的示例。

```
<?php
require_once "Mail.php";

$from = "Sandra Sender <sender@example.com>";
$to = "Ramona Recipient <recipient@example.com>";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";

$host = "mail.example.com";
$username = "smtp_username";
$password = "smtp_password";

$headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject);
$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
 } else {
  echo("<p>Message successfully sent!</p>");
 }
?> 
```

# c#-3.0 - 自动属性问题

> ID：371398
> 
> 赞同：1
> 
> 时间：2008-12-16T14:09:54.887
> 
> 标签：c#-3.0

这是反射器给出的：

```
public int Int1 { get; set; }
public string StringA { get; set; }

// Fields
[CompilerGenerated]
private int <Int1>k__BackingField;
[CompilerGenerated]
private string <StringA>k__BackingField; 
```

问题是 C# 规范没有明确指定如何命名自动属性的支持字段。这可能是二进制序列化的问题（摘自 C# 3.0 in a Nutshell）。自动属性还有其他问题吗？MS 应该在 C# 规范中指定这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T14:45:08.107

我不认为 MS 应该指定一个名称 - 我认为避免二进制序列化更合理，在我看来这总是有点脆弱。（Java 序列化同样脆弱。）如果它依赖于字段名称（并且可能有一种方法可以通过归因您的属性来解决这个问题 - 我对二进制序列化没有足够的经验知道），那么它已经非常讨厌地限制了实现更改.

我对自动属性的最大问题是无法创建*真正*的只读属性（带有只读支持字段）。不过我之前也吐槽过这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-04T08:33:10.373

我不喜欢以下关于自动属性的内容：

1.  无法在自动属性上放置断点。

2.  类中的字段很明显，您必须检查字段以及属性才能知道类中的字段是什么。如果不使用它们，则只需检查字段区域即可。

3.  删除用 readonly、volatile 等装饰底层字段的能力。

# macos - 如何在 Quartz Composer 中使用当前声音输出作为音频输入？

> ID：371401
> 
> 赞同：1
> 
> 时间：2008-12-16T14:10:46.960
> 
> 标签：macos, audio, visualization, visualizer, quartz-composer

如果我想构建一个频谱可视化器，显示我的扬声器上当前正在播放的内容（而不是线路），我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T16:26:17.793

从 Ambrosia Software 下载并安装[Wiretap Anywhere 。](http://www.ambrosiasw.com/utilities/wta/)

Wiretap 允许您从应用程序获取任何音频输出并将它们路由到您可以在 Quartz Composer 或任何其他使用硬件输入的 OS X 应用程序中使用的虚拟音频输入。

# c# - 如何在 C# 中使用 OleDB 列出 MS Access 文件中的所有查询？

> ID：371404
> 
> 赞同：2
> 
> 时间：2008-12-16T14:12:27.440
> 
> 标签：c#, ms-access, oledb

我有一个包含 200 个查询的 Access 2003 文件，我想在 SQL 中打印出它们的表示形式。我可以使用设计视图查看每个查询并将其剪切并粘贴到文件中，但这很乏味。另外，我可能必须在其他 Access 文件上再次执行此操作，因此我肯定想编写一个程序来执行此操作。

Access db 的查询存储在哪里？我找不到任何能说明如何对付它们的东西。我不熟悉Access，所以我会很感激任何指针。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-16T16:21:47.163

程序是您正在寻找的：

```
OleDbConnection conn = new OleDbConnection(connectionString);
conn.Open();

DataTable queries = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Procedures, null);

conn.Close(); 
```

这将为您提供一个 DataTable，其中包含以下列（除其他外）：

PROCEDURE_NAME：查询的名称

PROCEDURE_DEFINITION：SQL 定义

所以你可以像这样遍历表格：

```
foreach(DataRow row in queries.Rows)
{
    // Do what you want with the values here
    queryName = row["PROCEDURE_NAME"].ToString();
    sql = row["PROCEDURE_DEFINITION"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T14:56:47.663

您可以使用 OleDbConnection 的**GetSchema**方法以及 Remou 发布的关于 ADO 架构的内容将其放在一起

**哎呀忘记了链接： [MSDN](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.getschema.aspx)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-29T22:46:26.017

如果您想手动进行快速查询。

```
SELECT MSysObjects.Name
FROM MSysObjects
WHERE type = 5 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-12-16T14:18:32.293

不在 C# 中，但可能是一个不错的起点：

[http://www.datastrat.com/Code/DocDatabase.txt](http://www.datastrat.com/Code/DocDatabase.txt)

# c# - 如何获取内联委托的参数？

> ID：371413
> 
> 赞同：1
> 
> 时间：2008-12-16T14:13:40.977
> 
> 标签：c#, .net

有谁知道在使用如下内联委托时是否有办法让发送者和事件参数传递给事件？

```
p.Click+=delegate
    {
        //do some stuff                
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T14:15:17.590

好吧，你可以声明它：

```
p.Click += delegate (object sender, EventArgs args) {...} 
```

并将它们用作`sender`和`args`。

或者使用 lambda：

```
p.Click += (sender, args) => {...} 
```

# visual-studio - 如何从 Visual Studio 对象浏览器打印

> ID：371417
> 
> 赞同：2
> 
> 时间：2008-12-16T14:14:56.450
> 
> 标签：visual-studio

我正在处理.NET 中的两个对象的映射。

我希望能够从 Visual Studio 2008 的“对象浏览器”窗口打印属性列表中的项目。有没有办法将该信息打印到控制台？

如果那不可能，那么打印类的一般定义（属性名称、方法名称）的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-25T11:01:35.303

您可以截取对象浏览器的屏幕截图并打印出来。简单但有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T14:34:29.470

要从对象浏览器打印属性列表，您可能需要编写一个 VS 插件。对于第二个问题：您可以使用`System.Reflection`来获取所有属性和方法，并从那里开始工作。

# c# - 你能用 Google 的 Protocol Buffer 格式表示 CSV 数据吗？

> ID：371418
> 
> 赞同：5
> 
> 时间：2008-12-16T14:15:04.237
> 
> 标签：c#, serialization, csv, protocol-buffers

我最近发现了协议缓冲区，并想知道它们是否可以应用于我的特定问题。

基本上我有一些 CSV 数据需要转换为更紧凑的格式进行存储，因为其中一些文件是几个 gig。

CSV 中的每个字段都有一个标题，并且只有两种类型，字符串和小数（因为有时有很多有效数字，我需要以相同的方式处理所有数字）。但是每个文件的每个字段都有不同的列名。

除了捕获原始 CSV 数据外，我还需要能够在保存之前向文件添加额外信息。我希望通过处理不同的文件版本来证明这一点。

那么，是否可以使用协议缓冲区来捕获随机数量的随机命名的数据列，例如 CSV 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-16T14:38:07.373

嗯，它当然是有代表性的。就像是：

```
message CsvFile {
    repeated CsvHeader header = 1;
    repeated CsvRow row = 2;
}

message CsvHeader {
    require string name = 1;
    require ColumnType type = 2;
}

enum ColumnType {
    DECIMAL = 1;
    STRING = 2;
}

message CsvRow {
    repeated CsvValue value = 1;
}

// Note that the column is implicit based on position within row    
message CsvValue {
    optional string string_value = 1;
    optional Decimal decimal_value = 2;
}

message Decimal {
    // However you want to represent it (there are various options here)
} 
```

我不确定它会提供多少好处，请注意...您当然可以添加更多信息（添加到 CsvFile 消息中），并且未来的校对采用“正常 PB 方式” - 仅添加可选字段等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T14:32:19.147

好吧，protobuf-net（我的版本）基于常规的 .NET 类型，所以不（因为它不会一直处理不同的模式）。但是 Jon 的版本可能允许动态类型。就我个人而言，我只是使用 CSV 并通过 GZipStream 运行它——我希望这会很好。

* * *

编辑：实际上，我忘记了：protobuf-net 确实支持可扩展对象，但是您需要小心一点……我希望这取决于完整的上下文。

另外，Jon 的嵌套数据方法也可能会奏效。

# python - 测试输入是格式正确的数字的最pythonic方法是什么

> ID：371419
> 
> 赞同：2
> 
> 时间：2008-12-16T14:15:10.647
> 
> 标签：python, idioms

我有一个期望实数（整数或浮点数）作为其输入的函数，并且我试图在对其进行数学运算之前验证此输入。

我的第一直觉是从 try-except 块中将输入转换为浮点数。

```
try:
   myinput = float(input)
except:
   raise ValueError("input is not a well-formed number") 
```

我也可以打电话`isinstance(mydata, (float, int, long) )`，但“所有这些可能是数字”的列表对我来说似乎有点不雅。

最pythonic的方式是什么？还有另一个我忽略的选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-16T14:26:45.180

引用我自己[应该对我的 python 函数/方法进行多少输入验证？](https://stackoverflow.com/questions/367560/how-much-input-validation-should-i-be-doing-on-my-python-functionsmethods#368072)：

> 对于总和、阶乘等计算，python 内置的类型检查就可以了。计算最终会为这些类型调用 add、mul 等，如果它们中断，它们无论如何都会抛出正确的异常。通过执行您自己的检查，您可能会使其他工作输入无效。

因此，最好的选择是将类型检查留给 Python。如果计算失败，Python 的类型检查将给出异常，所以如果你自己做，你只是复制代码，这意味着你需要做更多的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-16T14:58:08.003

[在 Python 2.6 和 3.0 中，添加](http://www.python.org/dev/peps/pep-3141/)了数字抽象数据类型的类型层次结构，因此您可以执行以下检查：

```
>>> import numbers
>>> isValid = isinstance(myinput , numbers.Real) 
```

numbers.Real 将匹配整数或浮点类型，但不匹配非数字类型或复数（为此使用 numbers.Complex）。它也会匹配有理数，但大概你也想包括那些。IE：

```
>>> [isinstance(x, numbers.Real) for x in [4, 4.5, "some string", 3+2j]]
[True, True, False, False] 
```

不幸的是，这一切都在 Python >=2.6 中，因此如果您正在为 2.5 或更早版本进行开发，则不会有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-16T14:19:43.807

也许您可以使用`assert`和`isinstance`语句的组合。像下面这样的东西我认为是一种更 Pythonic 的方式，因为只要你的输入不符合你的要求，你就会抛出一个异常。不幸的是，我没有看到比您的有效数字更好的定义。也许有人会提出一个更好的主意。

```
number = (float, int, long)
assert isinstance(mydata, (float, int, long)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T19:15:47.093

我不明白这个问题。

有两种语义截然不同的东西被当作“替代品”。

类型转换是一回事。它适用于任何支持 的对象，`__float__`可以是各种各样的对象，其中很少有实际是数字的。

```
try:
   myinput = float(input)
except:
   raise ValueError("input is not a well-formed number")
# at this point, input may not be numeric at all
# it may, however, have produced a numeric value 
```

类型测试是另一回事。这仅适用于作为特定类集的正确实例的对象。

```
isinstance(input, (float, int, long) )
# at this point, input is one of a known list of numeric types 
```

这是响应的示例类`float`，但仍然不是数字。

```
class MyStrangeThing( object ):
    def __init__( self, aString ):
        # Some fancy parsing 
    def __float__( self ):
        # extract some numeric value from my thing 
```

“实数（整数或浮点数）”这个问题通常是无关紧要的。许多东西是“数字”的，可以在数字运算中使用，但不是整数或浮点数。例如，您可能已经下载或创建了一个有理数包。

There's no point in overvalidating inputs, unless you have an algorithm that will not work with some types. These are rare, but some calculations require integers, specifically so they can do integer division and remainder operations. For those, you might want to assert that your values are ints.

# sql - 如何编写一个字符串搜索查询，该查询使用我在该字段上的非聚集索引？

> ID：371422
> 
> 赞同：0
> 
> 时间：2008-12-16T14:15:18.057
> 
> 标签：sql, string, indexing, field

我正在寻找一个查询，该查询将在使用非聚集索引构建的街道地址字段上使用非聚集索引计划。我遇到的问题是，如果我正在搜索街道地址，我很可能会使用“like”评估函数。我在想使用这个函数会导致表扫描而不是使用索引。在这种情况下，我将如何写一个？在 address3 字段上放置非聚集索引是否毫无意义？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T14:23:21.660

如果您的 LIKE 表达式正在执行字符串开头搜索 ( `Address LIKE 'Blah%'`)，我希望使用索引，很可能是通过索引搜索。

如果您搜索`Address LIKE '%Blah%'`，将发生表扫描/索引扫描，具体取决于您在查询中返回的字段数以及索引的选择性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T14:23:58.197

varchar 字段是从左到右索引的，与字典或百科全书的索引非常相似。

如果您知道该字段的开头（例如 LIKE 'streetname%'），那么索引将是有效的。但是，如果您只知道部分字段（例如 LIKE '%something%'），则不能使用索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T14:24:52.280

使用 LIKE 不一定会使用表扫描；它可能会使用索引，具体取决于您要搜索的字符串。（例如，LIKE 'something%' 通常能够使用索引，而 LIKE '%something' 可能不是，尽管在这种情况下服务器可能至少仍然能够进行索引扫描，这比直接索引查找，但仍然比全表扫描便宜。）这里有一篇很好的文章[讨论](http://myitforum.com/cs2/blogs/jnelson/archive/2007/11/16/108354.aspx)了关于 SQL Server 的 LIKE 与索引（显然，不同的 DBMS 会以不同的方式实现它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T14:24:34.483

理论上，数据库将使用最好的索引。你正在使用什么数据库服务器，你真正想要实现什么，你的 LIKE 语句会是什么样子？例如，通配符所在的位置可能会对所使用的查询计划产生影响。

取决于您想要实现的目标的其他可能性是对数据执行一些预处理并拥有对您的搜索有用的其他列，或使用索引视图。

[下面是](http://myitforum.com/cs2/blogs/jnelson/archive/2007/11/16/108354.aspx)关于在 SQL Server 2005 和 varchar 字段中使用索引的一些讨论。

# asp.net - ASP.Net 错误：“类型 'foo' 存在于“temp1.dll”和“temp2\. dll”中

> ID：371426
> 
> 赞同：110
> 
> 时间：2008-12-16T14:16:21.083
> 
> 标签：asp.net

运行 Web 应用程序项目时，在看似随机的时间页面可能会失败并出现 CS0433 错误：类型存在于多个 DLL 中。DLL 都是生成的 DLL，驻留在“Temporary ASP.NET Files”目录中。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2008-12-16T14:19:16.130

将 batch="false" 属性添加到 web.config 文件的“编译”元素。

出现此问题的原因是 ASP.NET 2.0 使用应用程序引用和应用程序的文件夹结构来编译应用程序的方式。如果应用程序的 web.config 文件中元素的批处理属性设置为 true，则 ASP.NET 2.0 会将应用程序中的每个文件夹编译成一个单独的程序集。

[http://www.sellsbrothers.com/1995](http://sellsbrothers.com/1995)

[http://support.microsoft.com/kb/919284](http://support.microsoft.com/kb/919284)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-26T10:48:49.297

如果您将 .cs 文件放在 App_Code 中并将其构建操作更改为在 Web 应用程序项目中编译，则可能会发生这种情况。

要么将 App_Code 中的 .cs 文件的构建操作作为内容，要么将 App_Code 的名称更改为其他名称。我更改了名称，因为智能感知不会修复标记为内容的 .cs 文件。

更多信息请访问[http://vishaljoshi.blogspot.se/2009/07/appcode-folder-doesnt-work-with-web.html](http://vishaljoshi.blogspot.se/2009/07/appcode-folder-doesnt-work-with-web.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-20T06:01:24.240

此错误的一个可能原因是行中有 2 个具有相同名称的 aspx`inherits=`页面`<@page language=......inherits=>`。

更改`inherits=`名称可以解决错误。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-16T08:05:40.187

以防其他人分享我的问题，我在尝试发布新分支项目的网站时遇到此错误，构建工作完美。

原来我忘记在**发布设置->配置预编译**下删除**“允许预编译站点可更新”**的复选框。

 *** * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-03T15:02:51.123

作为另一个数据点，我只是遇到了这个问题*，没有*任何循环引用的证据，如 Ben 的答案中的链接中所述。构建我的网站项目会因其中一些错误而失败，并设置`compilation batch="false"`修复它，但我不想走那条路，因为这是一个大型生产网站。

此解决方案位于我的 D:\svn 文件夹的子文件夹中，我已将其映射到 S:。当我从 S: 打开解决方案时，出现了这些错误，但如果我直接进入 D:\svn 并打开解决方案，则没有错误。

我还注意到，尽管`compilation batch="true"`在我的 web.config 中，当从映射的 S: 驱动器打开解决方案时，我的所有 .ascx 文件都被编译到它们自己的程序集中。如果我从物理位置打开它，.ascx 文件会被编译到它们各自文件夹的程序集中（这是`batch="true"`应该的工作方式）。

奇怪的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-08-30T08:56:05.090

此错误是由于 Web 表单的类名和具有相同类名的 wsdl 存根（文件 .cs 后面的代码）之间的冲突，即

ASPX 页面：仪表板类：partiacl 类仪表板

AppCode/APIServices.cs：公共部分类仪表板

错误仅在发布网站时可重现，但构建和调试未通知任何错误。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-06T20:29:08.827

在我的情况下，从解决方案中所有项目的 bin 文件夹中删除所有输出程序集解决了这个问题。不幸的是，我对此没有任何解释。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-10T06:48:14.000

在我的情况下，我重命名了一个项目，因此 dll 也已重命名。当我刚刚复制了新的 dll 但没有想到从服务器中删除旧的 dll 时，我很快就有了一堆同名的类。删除过时的 dll 是成功的（原因）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-05T00:53:49.820

这些答案都不适合我，但我确实解决了这个问题。由于我使用 VS 的 Publish 功能来部署 Web 应用程序，因此我在 Publish Web 向导中选择了在发布**之前删除所有现有文件的选项。**这迫使应用程序的一个干净副本，并且从那里一切正常。

如果您的本地调试副本工作正常但发布的系统不能正常工作，此解决方案可能会有所帮助。如果您不想花时间追踪要删除的单个 dll 并且不介意首先删除生产文件，那也很棒。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-12-19T15:49:23.233

就我而言，当我编辑仍然具有重复类名的 Designer.cs 文件时，问题就解决了。出于某种原因，当我将类“logout”重命名为“logout2”时，在设计器文件中它没有自动更改，仍然是“logout”，并且这个类名已经存在于我项目的预编译 dll 中（属于到我使用和开发的第三方网络应用程序）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-15T15:36:32.610

将 aspx 页面的一部分放入单独的用户控件时出现此问题。在我的机器上一切都很好，在服务器上出现错误。

**重命名问题类和文件。**

[http://support.microsoft.com/kb/919284](http://support.microsoft.com/kb/919284)方法2：重新排序应用程序中的文件夹正在写关于可能的循环引用

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-03-16T14:34:03.220

这些解决方案都不适合我。我的两个冲突 DLL 都在 C:\...\AppData\...\Temporary ASP.NET Files\...

问题是我已将源代码库回滚到早期版本 - 在我们将类型从一个项目移动到同一解决方案中的另一个项目之前。

我尝试从 msbuild 标识的“临时 ASP.NET 文件”位置删除较新的 DLL——它甚至根本不应该存在于旧代码库中。msbuild 只是把它放回去。

我还尝试了这里的一些成功使用的 web.config 设置，但这也不起作用。虽然，当我写这篇文章时，我意识到实际上在同一个解决方案中有两个 MVC 项目并且都有错误，所以问题可能是我没有为这两个项目添加设置。

我尝试将我的源代码库向前滚动并清理并再次回滚并清理。没有。

我尝试删除“临时 ASP.NET 文件”位置的所有内容。msbuild 只是把它放回去了。

最后，我尝试在 Visual Studio 中重建。尽管命令行输出和“错误”输出都给出了相同的 msbuild“临时 ASP.NET 文件”错误，但 Intellisense 错误（将鼠标悬停在冲突类型上时）实际上抱怨输出目录中的 DLL。显然“清洁”和“重建”并没有做好他们的工作。我手动删除了Intellisense识别的输出目录中的DLL，问题就解决了。

tl;dr - 确保使用批处理设置覆盖所有 web.config，并尝试利用 Intellisense 获取更多线索。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-03-30T22:36:26.190

我的问题与在我的项目文件夹中生成的 .dll 相关联。

如果您正在引用另一个文件，而不是执行您在上面看到的所有操作，那么立即解决我的问题的只是删除保留在我的项目 /bin 目录中的 .dll。

问题不一定是 web.config 修复 - 它是需要解决的循环引用。我意识到我清除了原始项目文件中的旧 .dll，但没有在引用它的项目中清除。

我不建议对您的 web.config 文件进行修改，因为这只是一个创可贴的修复 - 并不能真正解决实际问题。如果您不想解决问题，请执行此操作，但如果您想避免将来的麻烦，只需从这两个位置删除 .dll。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-03T14:00:33.930

我在两个不同的项目中有一个同名的部分类。我只将它留在一个项目中解决了它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-06T08:10:41.780

有时，删除解决方案并重新创建它可能会有所帮助。由于从 VS2005 转换到 vs2010 时会发生这种使用，因此解决方案中保留了对框架 4.0（升级后）的一些引用，甚至所有项目都定义为 3.5。

通常重建解决方案应该可以解决这些问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-07-26T21:13:02.927

我在编译服务器上编译应用程序时遇到了同样的问题。

我的控制器有一个简单的静态代码，所以我改变了我的 ascx：

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="controllerName.ascx.cs" Inherits="Controls.controllerName" %> 
```

到

```
 <%@ Control Language="C#" AutoEventWireup="true" Src="controllerName.ascx.cs" Inherits="Controls.controllerName" %> 
```

还从代码隐藏中删除了 partial 关键字，并向代码隐藏添加了一个命名空间。

这：

```
using System;
using System.Web.UI;

/// <summary>
/// My controller
/// </summary>
public partial class controllerName: UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

对此：

```
using System;
using System.Web.UI;

namespace Controles
{
    /// <summary>
    /// My controller
    /// </summary>
    public class controllerName : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }
    }
} 
```

这对我有用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-09-17T03:40:00.123

对我来说，这发生在我将 PrecompiledWeb/Publish 位置设置为当前目录时，该目录也是该站点的根文件夹所在的位置。

然后，我的网站在编译/构建时将发布文件夹视为项目的一部分，然后以这种方式查找重复项。

即不要将您网站的已发布/预编译版本放在您网站的代码文件夹中。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-12-02T11:00:08.743

我在编译时遇到了这个问题。

我*同意***batch="true"**属性，错误告诉存在 2 个程序集

**解决方案1：** 删除其中一个

**解决方案2：**配置其中一个

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-03-11T11:53:29.063

如果 DLL 显示在临时文件夹中，您应该尝试清理您的解决方案。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-07-07T15:17:11.050

发布我的解决方案：

该问题与 Mcafee Antivirus 的“按访问扫描”有关。禁用此功能可解决问题。不知何故，当防病毒软件打开时，ASP 没有正确使用 ASP 临时文件夹。

希望这可以帮助某人。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-05-28T08:00:01.513

App_Code 文件夹导致问题，将类放在文件夹之外（工作正常）

App_Code 文件夹不是为 Web 应用程序项目设计的

[http://vishaljoshi.blogspot.in/2009/07/appcode-folder-doesnt-work-with-web.html](http://vishaljoshi.blogspot.in/2009/07/appcode-folder-doesnt-work-with-web.html)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-06-23T07:13:19.723

转到添加引用并搜索这两个 dll，这两个 dll 都已选中，取消选中其中一个 dll，因为生成了对具有不同版本歧义的相同 dll 的引用。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-10-18T10:25:40.317

我的解决方案是在 .aspx 文件中用 CodeBehind="..." 替换 CodePage="...."。在从以前的 .NET 版本迁移期间，它以某种方式保留为 CodePage。此页面指令创建另一个与项目 dll 文件冲突的 dll 文件。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-07-13T09:48:04.053

这些解决方案都不适合我。在“发布”模式下编译是有效的，但是当我切换到“调试”时，我收到了无数这样的错误消息。

我不明白为什么，但我的解决方案是简单**地重新启动 Visual Studio**。

# c# - 如何关闭 C# ListView 中的行选择 - 特别是虚线轮廓！

> ID：371427
> 
> 赞同：2
> 
> 时间：2008-12-16T14:16:59.410
> 
> 标签：c#, listview

我有一个 ListView 控件，它处于 FullRowSelect 模式，MultiSelect 关闭并使用“详细信息”视图模式。当用户单击一行时，它以蓝色突出显示该行，这很好，但是当我通过将行的“已选择”字段设置为 false 以编程方式关闭选择时，蓝色突出显示确实消失了，但它留下了一个虚线在行周围勾勒轮廓。

你如何关闭虚线轮廓？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T14:36:47.327

当另一个控件处于焦点时，虚线消失。您可以通过在另一个控件上调用 Focus() 方法来实现此目的。据我所知，没有简单的方法可以永久摆脱虚线轮廓。

如果你*真的*想摆脱这条线，你必须将 OwnerDraw 属性设置为 true 并为 DrawItem 和 DrawSubItem 提供处理程序。

# com - 如何在webcontrol主机的img元素中提取图片？

> ID：371431
> 
> 赞同：0
> 
> 时间：2008-12-16T14:18:58.613
> 
> 标签：com, activex, bho, web-controls, ihtmlimgelement

我想从 html 页面中提取位图。我希望从网页中的 IHTMLImgElement 中找到 IStream、IPersistStream 或 IPersistStreamInit。但是我找不到任何这些。

我可以从缓存中读取图片，但这有点不可靠，我想避免从文件系统中读取。

有没有我可以用来获取位图的接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-06T10:34:57.070

使用 IHTMLElementRender。

在 IHTMLImgElement 上使用 QueryInterface，您应该能够获得指向 IHTMLElementRender 接口的指针，然后在内存 DC 中调用 DrawToDC。

当位图在内存 DC 中时，有几种方法可以保存位图。

...

我实际上找到了一个示例，只需 g**gle 'IHTMLElementRender IHTMLImgElement "GDI+"'。

# wpf - 打印/预览 WPF RichTextBox - ApplicationCommands.PrintPreview？

> ID：371435
> 
> 赞同：1
> 
> 时间：2008-12-16T14:19:36.660
> 
> 标签：wpf, printing, richtextbox, preview

我真的很喜欢 WPF RichTextBox，以及它附带的所有开箱即用的功能......但是打印是我遇到的麻烦。我*可以*使用 PrintDialog 打印（从代码）并将我的 RichTextBox 作为 Visual 传递（或使用“文档”）。

但我的问题是，有没有一种简单的方法来使用应用程序命令：

*   应用程序命令.打印
*   ApplicationCommands.PrintPreview

使用 WPF RichTextBox？另外，我将如何让用户更改页面布局等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T09:26:32.490

看看[http://blogs.msdn.com/llobo/archive/2007/01/24/printing-richtextbox-content-find-the-idle-printer.aspx](http://blogs.msdn.com/llobo/archive/2007/01/24/printing-richtextbox-content-find-the-idle-printer.aspx)

# c# - Linq2SQL：更新未在数据上下文中创建的对象

> ID：371439
> 
> 赞同：4
> 
> 时间：2008-12-16T14:20:41.370
> 
> 标签：c#, asp.net, linq-to-sql

通常，当您在 linq2sql 中更新对象时，您会从数据上下文中获取对象并使用相同的数据上下文来保存对象，对吗？

更新您用来执行保存操作的数据上下文尚未检索的对象的最佳方法是什么，即我正在使用florinefx在flex和asp.net之间传递数据以及当对象从客户端返回时保存我不知道如何保存对象？

```
 public static void Save(Client client)
    {
        CompanyDataContext db = new CompanyDataContext();
        Validate(client);
        if(client.Id.Equals(Guid.Empty))
        {
            //Create (right?):
            client.Id = Guid.NewGuid();
            db.Clients.InsertOnSubmit(client);
            db.SubmitChanges();
        }
        else
        {
            //Update:
            OffertaDataContext db = new OffertaDataContext();
            db.Clients.????

        }
    } 
```

更新：在这种情况下，使用 Attach 的不同方法不起作用。所以我想需要一种基于反射的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-16T14:34:25.087

要更新现有但断开连接的对象，您需要将其“附加”到数据上下文中。这将重新使用现有的主键等。您可以控制如何处理更改 - 即视为脏，或视为干净并跟踪未来的更改等。

Attach 方法在桌面上 - 即

```
ctx.Customers.Attach(customer); // optional bool to treat as modified 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-16T14:34:22.527

我认为您在这里有两个选择：

1) 将对象附加到您将在其上进行保存的 DataContext 2) 使用对象上的主键，获取附加到您的上下文的实例（例如执行 FirstOrDefault()），然后从修改后的对象到具有上下文的对象（反射在这里可能有用）。

[Rick Strahl 在http://www.west-wind.com/weblog/posts/134095.aspx](http://www.west-wind.com/weblog/posts/134095.aspx)上有一篇关于将实体附加到上下文的非常好的博客文章，特别是关于您可能遇到的一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T14:15:29.720

我希望你能帮忙。我正在使用 Linq to Sql 开发一个分层网站。我在 DBML 设计器中创建了一个名为 memberState 的新类（或对象）。此对象不是数据库中的实际表。我的中间层有这个方法：

```
public override IEnumerable(memberState) GetMembersByState(string @state)<br/>
{<br/>
using (BulletinWizardDataContext context = DataContext)<br/>
{<br/>
IEnumerable(memberState) mems = (from m in context.Members<br/>
join ma in context.MemberAddresses<br/>
on m.UserId equals ma.UserId<br/>
join s in context.States<br/>
on ma.StateId equals s.StateId<br/>
where s.StateName == @state<br/>
select new memberState<br/>
{<br/>
userId = m.UserID,<br/>
firstName = m.FirstName,<br/>
middleInitial = m.MiddleInitial,<br/>
lastName = m.LastName,<br/>
createDate = m.CreateDate,<br/>
modifyDate = m.ModifyDate<br/>
}).ToArray(memberState)();<br/>
return mems;
}
} 
```

我的联接中的表（Members、States 和 MemberAddresses 是我的数据库中的实际表）。我创建了对象 memberStates 以便可以在上面的查询中使用它（注意**Select New memberState**。当网页上的数据更新时，如何将更改保留回成员表？我的成员表由以下列组成: UserId, FirstName, MiddleInitial, LastName, CreateDate, ModifyDate. 我不确定如何将更改保存回数据库。

谢谢，

# linq-to-sql - 具有多个结果的 Linq to SQL 存储过程

> ID：371445
> 
> 赞同：15
> 
> 时间：2008-12-16T14:22:25.890
> 
> 标签：linq-to-sql, multiple-resultsets

我们按照以下方法使用 LINQ To SQL 从多个结果中获取数据

```
CREATE PROCEDURE dbo.GetPostByID
(
    @PostID int
)
AS
    SELECT    *
    FROM      Posts AS p
    WHERE     p.PostID = @PostID

    SELECT    c.*
    FROM      Categories AS c
    JOIN      PostCategories AS pc
    ON        (pc.CategoryID = c.CategoryID)
    WHERE     pc.PostID = @PostID 
```

从 DataContext 继承的类中的调用方法应如下所示：

```
[Database(Name = "Blog")]
public class BlogContext : DataContext
{
    ... 

    [Function(Name = "dbo.GetPostByID")]
    [ResultType(typeof(Post))]
    [ResultType(typeof(Category))]
    public IMultipleResults GetPostByID(int postID)
    {
        IExecuteResult result = 
            this.ExecuteMethodCall(this, 
                  ((MethodInfo)(MethodInfo.GetCurrentMethod())), 
                  postID);

        return (IMultipleResults)(result.ReturnValue);
    }
} 
```

请注意，该方法不仅使用映射到存储过程名称的 Function 属性进行修饰，而且还使用具有存储过程返回的结果集类型的 ReturnType 属性进行修饰。此外，该方法返回 IMultipleResults 的无类型接口：

```
public interface IMultipleResults : IFunctionResult, IDisposable
{
    IEnumerable<TElement> GetResult<TElement>();
} 
```

所以程序可以使用这个接口来检索结果：

```
BlogContext ctx = new BlogContext(...);

IMultipleResults results = ctx.GetPostByID(...);

IEnumerable<Post> posts = results.GetResult<Post>();

IEnumerable<Category> categories = results.GetResult<Category>(); 
```

在上面的存储过程中，我们有两个选择查询 1\. 选择不带连接的查询 2\. 选择带连接的查询

但是在上面的第二个选择查询中，显示的数据来自表之一，即来自类别表。但是我们使用了连接，并希望显示数据表，其中包含两个表的结果，即来自类别和 PostCategories。

1.  请如果有人可以让我知道如何使用 LINQ to SQL 来实现这一点
2.  如果我们使用上述方法与使用简单 SQL 实现上述方法相比，性能权衡是什么

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-16T14:59:06.253

[Scott Guthrie](http://weblogs.asp.net/scottgu/about.aspx)（在 MS 管理 .Net 开发团队的人）几个月前在他的博客上介绍了如何做到这一点，比我以前做得更好，**[链接在这里](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)**。在该页面上有一个标题为“处理来自 SPROC 的多个结果形状”的部分。这解释了如何处理来自不同形状（或相同形状）的存储过程的多个结果。

我强烈建议订阅他的 RSS 提要。他几乎是.Net 上所有事物**的**权威来源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-20T05:42:43.093

嘿，伙计——这行得通吗？

```
IEnumerable<Post> posts;
IEnumerable<Category> categories;

using (BlogContext ctx = new BlogContext(...))
{
    ctx.DeferredLoadingEnabled = false; // THIS IS IMPORTANT.
    IMultipleResults results = ctx.GetPostByID(...);
    posts = results.GetResult<Post>().ToList();
    categories = results.GetResult<Category>().ToList();
}
// Now we need to associate each category to the post.
// ASSUMPTION: Each post has only one category (1-1 mapping).
if (posts != null)
{
    foreach(var post in posts)
    {
        int postId = post.PostId;
        post.Category = categories
            .Where(p => p.PostId == postId)
            .SingleOrDefault();
    }
} 
```

好的。让我们分解一下。

首先，在 using 块内有一个很好的连接（所以它被很好地处理掉了）。

接下来，我们确保*DEFERRED LOADING 处于***关闭**状态。否则，当您尝试设置（例如`post.Category == blah`）时，它会看到它为空，*延迟加载数据*（例如，对数据库进行往返）设置数据，然后覆盖刚刚从数据库中拖下来的内容，与there`Where(..)`方法的结果。呸！*摘要：确保在查询范围内关闭延迟加载。*

最后，对于每个帖子，从第二个列表中迭代并设置类别。

这有帮助吗？

## 编辑

修复它，使其不会通过调用`ToList()`方法引发枚举错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-20T13:51:36.743

只是好奇，如果一个帖子有一个或多个类别，是否可以使用 JOIN 一次性加载带有类别列表（一对多）的 Post.PostCategories，而不是使用 for 循环？

```
var rslt = from p in results.GetResult<Post>()
           join c in results.GetResult<Category>() on p.PostId = c.PostID
           ...
           p.Categories.Add(c) 
```

# asp.net - 如何开始在 ASP.NET 中开发阿拉伯语网站？

> ID：371446
> 
> 赞同：0
> 
> 时间：2008-12-16T14:22:51.163
> 
> 标签：asp.net, internationalization

我想开发一个使用 ASP.NET 的阿拉伯语网站。

什么是开始的好地方？

要记住的有用建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T14:56:31.000

我在前世做过一些这样的事情，这就是我记得的：

它会只是 ar-foo 吗？如果不是（我总是鼓励考虑未来的可能性），那么拥有足够灵活以处理 RTL*和*LTR 或可切换的页面布局将是一件大事。这包括移动元素，如无处不在的左侧菜单。

确保您的字符编码支持阿拉伯语并且从 DB 开始完全标准化。XML/XSLT 文档因在这里被遗忘而臭名昭著。

日历不太可能但可能会成为问题。您*可能*会在业务应用程序中使用西方日历而侥幸，但[回历](http://en.wikipedia.org/wiki/Islamic_calendar)不仅因国家/地区而异，而且因天文事件而具有不可预测的模式。

最后，要非常小心你的图形内容。同样，这不太可能是一个问题，但如果它确实出现，那就是一个大问题。我相信我当时的公司实际上是在当地清真寺社区中心的一名神职人员面前跑来跑去的。

# cocoa-touch - 如何将 NSDecimalNumber 转换为 NSInteger？

> ID：371450
> 
> 赞同：2
> 
> 时间：2008-12-16T14:23:57.900
> 
> 标签：cocoa-touch, types, json-framework

好的，我正在使用支持 JSON 的 Rails Web 服务向 iPhone 应用程序提供数据。我发现我的整数值 (ID) 被 json-framework 解释为 NSDecimalNumber 类型。我需要它作为一个整数。如何从我的 NSDecimalNumber 类型变量中获取整数值？我已经尝试了我所知道的一切，但我束手无策。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-16T15:30:53.787

我不确定 JSON，但是：

NSDecimalNumber 继承自 NSNumber，因此您可以只使用 NSNumber 的 -integerValue 方法。

需要 10.5，但应该不是问题。

# linq-to-sql - 在 LinqToSql 中如何表示继承？

> ID：371453
> 
> 赞同：2
> 
> 时间：2008-12-16T14:24:35.027
> 
> 标签：linq-to-sql, inheritance

我需要代表像人/学生这样的继承。你如何在 LInqToSql 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T14:40:26.993

尝试：[linqtosql 继承](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/10/01/linq-to-sql-inheritance.aspx)或[其他 linqtosql 继承](http://tinyurl.com/6benub)

# c# - 活动目录身份验证

> ID：371455
> 
> 赞同：1
> 
> 时间：2008-12-16T14:25:13.920
> 
> 标签：c#, com, asp-classic, active-directory

我有 ac# 类，它使用 WindowsIdentity 命名空间返回当前 Active Directory 用户的详细信息。这可以通过 SPS 上的 Web 部件访问，并且确实返回了特定于该用户的所需记录值。

我有一个经典的 ASP 应用程序，我想继承这个功能。将其包装为 COM 并将其注册到服务器后，我创建了一个经典 ASP 页面，从该页面调用并将详细信息显示到浏览器窗口。

我的问题是，当从客户端计算机上的经过身份验证的用户访问此页面时，它显示的唯一用户详细信息是本地计算机的用户详细信息。

因此，如何更改我的代码，以便显示从客户端计算机访问页面的用户的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T14:42:02.963

经典 ASP 将我们带回来。:-) 不要以为我自 2002 年以来就没有碰过它……

仅查看 ASP 页面中的 Request.ServerVariables("logon_user") 有什么问题吗？那应该给你域\用户名。

与其尝试以最终用户的身份运行 COM 包装的类（这是您遇到的问题），不如将域\用户名传递给一个类以从 AD 检索帐户详细信息，然后从那里显示任何需要的项目。这将消除模拟获取当前用户的 windows 身份的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T15:11:34.903

还要检查站点在 IIS 中运行的身份验证方法。

在 IIS 管理器中右键单击该网站，属性 --> 目录安全 --> 身份验证和访问控制 --> 编辑...

确保选中集成 Windows 身份验证，清除启用匿名访问。

# windows - 查找使用的编程语言

> ID：371460
> 
> 赞同：43
> 
> 时间：2008-12-16T14:26:18.783
> 
> 标签：windows, computer-forensics

找出应用程序是用什么编程语言编写的最简单的方法是什么？我想从程序 exe 文件中知道它的 vb 或 c++ 或 delphi 或 .net 等。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-16T14:28:05.770

尝试[PEID](http://www.softpedia.com/get/Programming/Packers-Crypters-Protectors/PEiD-updated.shtml)

当然，如果他们使用打包机，则需要先进行一些拆包 :)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-16T14:31:38.117

启动它并检查它与 Process Explorer 一起使用的运行时 DLL。

如果这不能立即显示出来，请在 Web 上搜索对这些 DLL 的引用。

大多数反汇编程序（包括我认为的 Olly）都可以轻松地向您显示 EXE 或 DLL 中包含的文本，这有时也可以提供线索。Delphi 类型通常以 T 为前缀，就像在 TMyClass 中一样。

如果它是一个没有 DLL 引用且没有文本的小型可执行文件，那么您可能是 SOL。那时你需要寻找特定编译器的习语，这主要是猜测。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-08-31T05:32:17.033

检测程序是用什么语言编写的是一门艺术。这是可能的，但没有硬性规定。这需要大量的经验（这也导致了“你为什么要……”的问题，但这里有一些关于如何去做的想法。

您正在寻找的是“签名”。签名可以是编译器包含的某个字符串，对正在使用的编程工具中非常常见的 API 的引用，或者甚至是正在使用的工具中常见的编程风格，在包含的字符串中可见在应用程序中。

此外，应用程序的部署方式也有不同的风格：部署目录中的各种配置文件、dll 和程序集，甚至图像、目录或图标。

包装在自启动可执行文件中的 Java 应用程序将包含对 java 库的引用，并且可能在同一目录中包含某些库或文件，表明它是 java。

如其他答案所示，托管程序集也将显示某些迹象：您可以在反射器等中打开它。虽然 c# 和 VB 在编译后可以“互换”是正确的，但它们并不相同。如果您使用[Reflector](http://www.red-gate.com/products/reflector/)反汇编 VB 代码，您会经常看到程序集引用了 Microsoft.VisualBasic.dll 程序集。您将能够分辨出[Mono](http://www.mono-project.com/Main_Page)应用程序之间的区别，因为它们很可能包含对 mono 程序集的引用。

许多编译器以某种方式组装和链接代码，并留下足迹。例如，在[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)中使用“strings: tab”检查窗口可执行文件，您会看到很多字符串。使用这些字符串，您可以确定 exe 中的编程风格、调用的方法、错误或跟踪方法。

例如，编译器使用不同的本地化机制：Microsoft 将本地化字符串存储在 XML 文件或资源文件中。其他编译器将使用不同的策略。

另一个例子是 c++ [name mangling](http://en.wikipedia.org/wiki/Name_mangling)。[CodeWarrior](http://en.wikipedia.org/wiki/CodeWarrior)编译器使用与 Visual Studio 不同的算法来处理调用的成员变量和函数的名称。

我想你可以写一本关于准确确定任何可执行文件的血统的书。这个主题可能会被称为“编程考古学”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-16T15:23:29.073

最简单的方法是询问程序的开发人员。它不需要任何知识和实用程序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-16T14:28:50.463

您可以尝试使用[Depends](http://www.dependencywalker.com/)来查看它具有哪些运行时依赖项，这可能会提供一些线索。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T14:48:32.250

*   [确定 Delphi 应用程序](http://delphi.wikia.com/wiki/Determine_Delphi_Application)
*   使用 eda_preview270.exe（从[这里](http://assarbad.net/de/stuff)）或其他一些间谍工具并检查窗口类名称。如果他们读起来像 TButton 或 TfrmBlubb，那么它就是一个 VCL 应用程序。如果其中有“Afx”，则可能是 MFC。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-08-31T04:52:44.023

编译语言（我的意思是没有脚本语言，或 Java、.NET 等）被编译为 CPU 汇编指令，这本质上是一种单向转换。通常不可能确定程序是用哪种语言编写的。但是，使用依赖遍历器，您可能会确定程序正在加载哪个运行时库（如果有），从而确定它使用哪种语言（例如 MS Visual C++ 9使用 msvcr90.dll)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-08-31T04:52:55.287

您可以通过尝试使用 ildasm.exe 工具打开来检查是否为 .net 程序集

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-08-31T04:53:07.143

一般来说，你不能。

如果您可以将其加载到[Reflector](http://www.red-gate.com/products/reflector/)中，您就知道它是一个托管程序集。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-31T05:03:11.443

这是个好问题。没有任何通用的方法可以说明，但我敢打赌，大多数编译器和库都会在生成的 EXE 文件中留下标记。如果你想花很多时间在上面，你可以收集一堆用已知语言编写的 EXE 并扫描常见的字符串。我会想象你会找到一些。

[Dependancy Walker](http://www.dependencywalker.com/)，其他人提到这将是寻找明显依赖项的好方法，例如 MSVCRT 的版本等

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-08-31T05:04:23.673

如果我没记错的话， [PE Explorer Disassembler](http://www.heaventools.com/PE_Explorer_disassembler.htm)提供了一些关于创建给定非 .net 和 java 二进制文件的编译器的信息，对于 .net 使用[Reflector](http://www.red-gate.com/products/reflector/)或[ILDAsm](http://msdn.microsoft.com/en-us/library/f7dy01k1%28VS.80%29.aspx)工具

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-08-31T05:16:15.567

我会尝试通过“字符串”程序运行 .exe 以获得各种提示。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-22T21:51:02.483

我发现（至少在电脑游戏中）最简单的方法是查看嵌套在游戏主文件夹中的“redist”文件夹。对于一些在自己编程方面更有经验的人来说可能很明显，但此文件夹中 MSI 的特定目的是允许 setup.exe 文件自动安装游戏本身的先决条件。例如：在帝国全面战争中，有一个名为“vcredist_x86-sp1.exe”的微星。这表明游戏/程序是用 Microsoft 的“Visual C 2005”在 .NET Framework 中编写的（通常）。事实上，如果您打开 MSI/EXE，安装程序应该会立即指出它所使用的语言和版本。我熟悉的原因是因为我在 . NET Framework，我们会自动安装我们的业务应用程序的先决条件。希望这可以帮助！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-14T06:35:13.777

[PE Detective](https://ntcore.com/?page_id=367)最适合我。

[![在此处输入图像描述](https://i.stack.imgur.com/rkeKI.png)](https://i.stack.imgur.com/rkeKI.png)

# c# - 获取组件的父窗体

> ID：371464
> 
> 赞同：26
> 
> 时间：2008-12-16T14:27:52.150
> 
> 标签：c#, vb.net, winforms, components

我有一个管理其他可视控件的非可视组件。

我需要引用该组件正在运行的表单，但我不知道如何获取它。

我不确定添加一个将父级指定为控件的构造函数，因为我希望组件只需被放入设计器即可工作。

我的另一个想法是拥有一个父属性作为控件，默认值为“我”

任何建议都会很棒

**编辑：**

为了澄清，这是一个**组件**，而不是一个**控件**，请参见此处：[ComponentModel.Component](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.aspx)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-12-16T16:26:00.430

[It is important to understand that the ISite technique below only works at design time. Because ContainerControl is public and gets assigned a value VisualStudio will write initialization code that sets it at run-time. Site is set at run-time, but you can't get ContainerControl from it]

[Here's an article](http://www.wiredprairie.us/journal/2004/05/finding_the_component_containe.html) that describes how to do it for a non-visual component.

Basically you need to add a property ContainerControl to your component:

```
public ContainerControl ContainerControl
{
  get { return _containerControl; }
  set { _containerControl = value; }
}
private ContainerControl _containerControl = null; 
```

and override the Site property:

```
public override ISite Site
{
  get { return base.Site; }
  set
  {
    base.Site = value;
    if (value == null)
    {
      return;
    }

    IDesignerHost host = value.GetService(
        typeof(IDesignerHost)) as IDesignerHost;
    if (host != null)
    {
        IComponent componentHost = host.RootComponent;
        if (componentHost is ContainerControl)
        {
            ContainerControl = componentHost as ContainerControl;
        }
    }
  }
} 
```

If you do this, the ContainerControl will be initialized to reference the containing form by the designer. The linked article explains it in more detail.

A good way to see how to do things is to look at the implementation of Types in the .NET Framework that have behaviour similar to what you want with a tool such as Lutz Reflector. In this case, System.Windows.Forms.ErrorProvider is a good example to look at: a Component that needs to know its containing Form.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-16T14:53:57.357

我使用递归调用来遍历控制链。将此添加到您的控件中。

```
public Form ParentForm
{
    get { return GetParentForm( this.Parent ); }
}

private Form GetParentForm( Control parent )
{
    Form form = parent as Form;
    if ( form != null )
    {
        return form;
    }
    if ( parent != null )
    {
        // Walk up the control hierarchy
        return GetParentForm( parent.Parent );
    }
    return null; // Control is not on a Form
} 
```

**编辑：**我看到你在我打字的时候修改了你的问题。如果它是一个组件，该组件的构造函数应该将它的父级作为参数，并且父级应该在构造时传入 this。其他几个组件执行此操作，例如计时器。

将父控件保存为成员，然后在我上面给你的 ParentForm 属性中使用它而不是这个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-16T15:56:12.770

You will have to set the parent container some how. Your component is just a class, that resides in memory just like everything else. It has no true context of what created it unless something tells you that it did. Create a Parent control property and set it.

Or simply derive from control and use FindForm(). Not all controls must have a visible component

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-16T15:24:59.307

如果组件正在管理其他可视控件，那么您应该能够通过它们到达父级。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T09:26:49.990

I found [this solution](http://www.codeproject.com/Articles/20938/How-to-Get-a-Reference-to-Parent-Form-from-a-Compo) which does not need the input. For C# I implemented it this way:

```
public partial class RegistryManager : Component, ISupportInitialize
{

    private Form _parentForm;
    public Form ParentForm
    {
        get { return _parentForm;  }
        set { _parentForm = value; }
    }

    // Etc....

    #region ISupportInitialize
    public void BeginInit() {  }
    public void EndInit()
    {
        setUpParentForm();
    }
    private void setUpParentForm()
    {
        if (_parentForm != null) return; // do nothing if it is set
        IDesignerHost host;
        if (Site != null)
        {
            host = Site.GetService(typeof(IDesignerHost)) as IDesignerHost;
            if (host != null)
            {
                if (host.RootComponent is Form)
                {
                    _parentForm = (Form)host.RootComponent;
                }
            }
        }
    }
    #endregion
} 
```

This way allows the set ParentForm by user, but it is set by parent form as Default.

I hope it helps you.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-25T09:02:46.413

Try This ....

```
private Form GetParentForm(Control parent)
{
    if (parent is Form)
        return parent as Form;

    return parent.FindForm();
} 
```

Call `GetParentForm(this.Parent)` from component

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-16T15:02:35.170

我认为您想使用 IComponent 的 Site 属性。它或多或少等同于 Parent 属性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-03T13:17:52.437

Thanks Rob, I used your solution in a VB.Net program, looks like this:

```
''' <summary>
''' Returns the parent System.Windows.form of the control
''' </summary>
''' <param name="parent"></param>
''' <returns>First parent form or null if no parent found</returns>
''' <remarks></remarks>
Public Shared Function GetParentForm(ByVal parent As Control) As Form
    Dim form As Form = TryCast(parent, Form)
    If form IsNot Nothing Then
        Return form
    End If

    If parent IsNot Nothing Then
        ' Walk up the control hierarchy
        Return GetParentForm(parent.Parent)
    End If

    ' Control is not on a Form
    Return Nothing
End Function 
```

Referenced it on my blog: [http://www.dailycode.info/Blog/post/2012/07/03/How-to-get-a-user-controls-parent-form-(Windows-forms).aspx](http://www.dailycode.info/Blog/post/2012/07/03/How-to-get-a-user-controls-parent-form-(Windows-forms).aspx)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-12-17T12:49:45.003

If the component related `Form` is the active `Form` you may get it by `Form.ActiveForm`.

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-05-22T05:14:30.180

A improvement of above is:

```
public static Form ParentForm(this Control ctrl) => ctrl as Form ?? ctrl.FindForm(); 
```

# c++ - C++ 游戏的四叉树与红黑树？

> ID：371465
> 
> 赞同：8
> 
> 时间：2008-12-16T14:27:59.700
> 
> 标签：c++, quadtree

多年来，我一直在网上寻找四叉树/四叉树节点实现。有一些基本的东西，但没有什么能让我真正用它来玩游戏。

我的目的是将对象存储在游戏中以处理诸如碰撞检测之类的事情。我不能 100% 确定四叉树是最好的数据结构，但从我所读到的数据来看。我已经编写了一个红黑树，但我真的不知道性能是否足以适合我的游戏（这将是像 Ankh 这样的冒险第三人称游戏）。

我将如何用 C++ 编写一个基本但完整的四叉树类（或八叉树）？您将如何使用四叉树进行碰撞？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-16T16:25:38.170

当您只需要存储有效地在平面上的东西时，使用四叉树。就像经典 RTS 中的单位一样，它们都在地面上或略高于地面。本质上，每个节点都有到 4 个子节点的链接，这些子节点将节点的空间分成均匀分布的四分之一。

八叉树做同样的事情，但在所有三个维度上，而不仅仅是两个维度，因此它们有 8 个子节点并将空间划分为八个。当游戏实体在所有三个维度中分布更均匀时，应使用它们。

如果您正在寻找二叉树（例如红黑树），那么您希望使用称为二叉空间分区树（BSP 树）的数据结构或称为 KD 树的版本。这些使用平面将空间分成两半，在 KD 树中，平面是正交的（在 XZ、XY、ZY 轴上），因此有时它在 3D 场景中效果更好。BSP 树使用任何方向的平面来划分场景，但它们可能非常有用，并且早在 Doom 时就已使用它们。

现在因为您已经划分了游戏空间，所以您现在不必针对每个其他游戏实体测试每个游戏实体以查看它们是否发生碰撞，这充其量是 O(n^2) 算法。相反，您查询数据结构以返回游戏空间子区域内的游戏实体，并且仅对这些节点执行碰撞检测。

这意味着所有游戏实体的碰撞检测应该是 n O(nlogn) 操作（最坏的情况）。

需要注意的一些额外事项：

*   确保从相邻节点测试游戏实体，而不仅仅是当前节点中的实体，因为它们仍然可能发生碰撞。
*   在实体移动后重新平衡数据结构，因为现在数据结构中可能有空节点，或者包含太多实体以获得良好性能的节点（也是所有实体位于同一节点中的退化情况）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-16T16:10:03.553

红黑树不是空间索引；它只能对单个序号键进行排序。四叉树是（对于二维）允许快速查找和消除点的空间索引。八叉树对三个维度做同样的事情。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-16T16:02:00.743

使用四叉树的原因是因为您可以在 x 和 y 坐标上进行拆分，在 x、y 和 z 上使用八叉树，从而使碰撞检测变得微不足道。

四叉树：如果一个元素不在左上角，它不会与右上角、左下角或右下角的元素发生碰撞。

这是一个非常基本的类，所以我不明白你在找到的实现中缺少什么。

我不会写这样的课程，我只是从具有合适许可证的项目中借用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-16T17:11:31.993

我强烈建议您使用渲染引擎，例如 Ogre3D。据我所知，它支持八叉树进行场景管理。但是您可以根据需要扩展基于八叉树的类。我以前自己编写需要的东西，但对于复杂的项目，这不是正确的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T17:09:31.170

通常，树对此存在问题，因为插入的任何项目都可能位于边界上，并且处理这种情况的所有方法都相当不令人满意。

您很可能希望将对象分类为可移动对象和静态对象，并检查在给定框架上移动的任何对象与静态对象。

BSP 树是静态几何（通过将对象分成两部分来处理边界情况）的公认解决方案，对于动态尝试类似排序和扫描（也称为扫描和修剪）的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-05T20:14:51.047

目前 STANN 是最好的开源实现。

[http://sites.google.com/a/compgeom.com/stann/](http://sites.google.com/a/compgeom.com/stann/)

# asp.net - 访问 offsetParent 时是否有针对 IE 6/7“未指定错误”错误的解决方法

> ID：371468
> 
> 赞同：7
> 
> 时间：2008-12-16T14:28:43.193
> 
> 标签：asp.net, jquery, asp.net-ajax, updatepanel

我在一个简单的 ASP.NET 概念证明应用程序中使用 jQuery UI 的可拖放库。此页面使用 ASP.NET AJAX UpdatePanel 进行部分页面更新。该页面允许用户将项目放入垃圾箱 div，这将调用从数据库中删除记录的回发，然后重新绑定项目所在的列表（和其他控件）。所有这些元素（可拖动项和垃圾桶 div）都在 ASP.NET UpdatePanel 中。

这是拖放初始化脚本：

```
 function initDragging()
    {
        $(".person").draggable({helper:'clone'});
        $("#trashcan").droppable({
            accept: '.person',
            tolerance: 'pointer',
            hoverClass: 'trashcan-hover',
            activeClass: 'trashcan-active',
            drop: onTrashCanned
        });
    }

    $(document).ready(function(){
        initDragging();

        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(function()
        {
            initDragging();
        });
    });

    function onTrashCanned(e,ui)
    {
        var id = $('input[id$=hidID]', ui.draggable).val();
        if (id != undefined)
        {
            $('#hidTrashcanID').val(id);
            __doPostBack('btnTrashcan','');
        }

    } 
```

当页面回发时，部分更新了 UpdatePanel 的内容，我重新绑定了可拖动对象和可放置对象。然后当我用光标抓取一个可拖动对象时，我得到一个“htmlfile：未指定的错误”。例外。我可以通过替换`elem.offsetParent`我编写的对这个函数的调用来解决 jQuery 库中的这个问题：

```
function IESafeOffsetParent(elem)
{
    try
    {
        return elem.offsetParent;
    }
    catch(e)
    {        
        return document.body;
    }
} 
```

我还必须避免调用 elem.getBoundingClientRect() ，因为它会引发相同的错误。对于那些感兴趣的人，我只需要在[Dimensions Plugin](http://plugins.jquery.com/project/dimensions)`jQuery.fn.offset`的函数中进行这些更改。

我的问题是：

*   虽然这可行，但是否有更好的方法（更清洁；更好的性能；无需修改 jQuery 库）来解决这个问题？
*   如果不是，那么当我将来更新 jQuery 库时，管理保持我的更改同步的最佳方法是什么？例如，除了从 jQuery 网站下载的文件中的内联文件之外，我还可以将库扩展至其他地方吗？

**更新：**

@some 它不可公开访问，但我会看看 SO 是否会让我将相关代码发布到这个答案中。只需创建一个 ASP.NET Web 应用程序（将其命名为**DragAndDrop**）并创建这些文件。不要忘记将 Complex.aspx 设置为您的起始页。您还需要下载[jQuery UI 拖放插件](http://ui.jquery.com/download_builder/)以及[jQuery 核心](http://code.google.com/p/jqueryjs/downloads/detail?name=jquery-1.2.6.js)

**复杂的.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Complex.aspx.cs" Inherits="DragAndDrop.Complex" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
    <script src="jquery-1.2.6.min.js" type="text/javascript"></script>
    <script src="jquery-ui-personalized-1.5.3.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function initDragging()
        {
            $(".person").draggable({helper:'clone'});
            $("#trashcan").droppable({
                accept: '.person',
                tolerance: 'pointer',
                hoverClass: 'trashcan-hover',
                activeClass: 'trashcan-active',
                drop: onTrashCanned
            });
        }

        $(document).ready(function(){
            initDragging();

            var prm = Sys.WebForms.PageRequestManager.getInstance();
            prm.add_endRequest(function()
            {
                initDragging();
            });
        });

        function onTrashCanned(e,ui)
        {
            var id = $('input[id$=hidID]', ui.draggable).val();
            if (id != undefined)
            {
                $('#hidTrashcanID').val(id);
                __doPostBack('btnTrashcan','');
            }

        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:UpdatePanel ID="updContent" runat="server" UpdateMode="Always">
    <ContentTemplate>
        <asp:LinkButton ID="btnTrashcan" Text="trashcan" runat="server" CommandName="trashcan" 
            onclick="btnTrashcan_Click" style="display:none;"></asp:LinkButton>
        <input type="hidden" id="hidTrashcanID" runat="server" />
        <asp:Button ID="Button1" runat="server" Text="Save" onclick="Button1_Click" />
        <table>
            <tr>
                <td style="width: 300px;">
                    <asp:DataList ID="lstAllPeople" runat="server" DataSourceID="odsAllPeople"
                        DataKeyField="ID">
                        <ItemTemplate>
                            <div class="person">
                                <asp:HiddenField ID="hidID" runat="server" Value='<%# Eval("ID") %>' />
                                Name:
                                <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>' />
                                <br />
                                <br />
                            </div>
                        </ItemTemplate>
                    </asp:DataList>
                    <asp:ObjectDataSource ID="odsAllPeople" runat="server" SelectMethod="SelectAllPeople" 
                        TypeName="DragAndDrop.Complex+DataAccess" 
                        onselecting="odsAllPeople_Selecting">
                        <SelectParameters>
                            <asp:Parameter Name="filter" Type="Object" />
                        </SelectParameters>
                    </asp:ObjectDataSource>
                </td>
                <td style="width: 300px;vertical-align:top;">
                    <div id="trashcan">
                        drop here to delete
                    </div>
                    <asp:DataList ID="lstPeopleToDelete" runat="server" 
                        DataSourceID="odsPeopleToDelete">
                        <ItemTemplate>
                            ID:
                            <asp:Label ID="IDLabel" runat="server" Text='<%# Eval("ID") %>' />
                            <br />
                            Name:
                            <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />
                            <br />
                            <br />
                        </ItemTemplate>
                    </asp:DataList>
                    <asp:ObjectDataSource ID="odsPeopleToDelete" runat="server" 
                        onselecting="odsPeopleToDelete_Selecting" SelectMethod="GetDeleteList" 
                        TypeName="DragAndDrop.Complex+DataAccess">
                        <SelectParameters>
                            <asp:Parameter Name="list" Type="Object" />
                        </SelectParameters>
                    </asp:ObjectDataSource>
                </td>
            </tr>
        </table>    
    </ContentTemplate>
    </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

**复杂的.aspx.cs**

```
namespace DragAndDrop
{
    public partial class Complex : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }

        protected List<int> DeleteList
        {
            get
            {
                if (ViewState["dl"] == null)
                {
                    List<int> dl = new List<int>();
                    ViewState["dl"] = dl;

                    return dl;
                }
                else
                {
                    return (List<int>)ViewState["dl"];
                }
            }
        }

        public class DataAccess
        {
            public IEnumerable<Person> SelectAllPeople(IEnumerable<int> filter)
            {
                return Database.SelectAll().Where(p => !filter.Contains(p.ID));
            }

            public IEnumerable<Person> GetDeleteList(IEnumerable<int> list)
            {
                return Database.SelectAll().Where(p => list.Contains(p.ID));
            }
        }

        protected void odsAllPeople_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
        {
            e.InputParameters["filter"] = this.DeleteList;
        }

        protected void odsPeopleToDelete_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
        {
            e.InputParameters["list"] = this.DeleteList;
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            foreach (int id in DeleteList)
            {
                Database.DeletePerson(id);
            }

            DeleteList.Clear();
            lstAllPeople.DataBind();
            lstPeopleToDelete.DataBind();
        }

        protected void btnTrashcan_Click(object sender, EventArgs e)
        {
            int id = int.Parse(hidTrashcanID.Value);
            DeleteList.Add(id);
            lstAllPeople.DataBind();
            lstPeopleToDelete.DataBind();
        }
    }
} 
```

**数据库.cs**

```
namespace DragAndDrop
{
    public static class Database
    {
        private static Dictionary<int, Person> _people = new Dictionary<int,Person>();
        static Database()
        {
            Person[] people = new Person[]
            {
                new Person("Chad")
                , new Person("Carrie")
                , new Person("Richard")
                , new Person("Ron")
            };
            foreach (Person p in people)
            {
                _people.Add(p.ID, p);
            }
        }

        public static IEnumerable<Person> SelectAll()
        {
            return _people.Values;
        }

        public static void DeletePerson(int id)
        {
            if (_people.ContainsKey(id))
            {
                _people.Remove(id);
            }
        }

        public static Person CreatePerson(string name)
        {
            Person p = new Person(name);
            _people.Add(p.ID, p);

            return p;
        }
    }

    public class Person
    {
        private static int _curID = 1;
        public int ID { get; set; }
        public string Name { get; set; }
        public Person()
        {
            ID = _curID++;
        }

        public Person(string name)
            : this()
        {
            Name = name;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-05T16:01:49.793

@arilanto - 我在我的 jquery 脚本之后包含了这个脚本。性能方面，它不是最好的解决方案，但它是一个快速简单的解决方法。

```
function IESafeOffsetParent(elem)
{
    try
    {
       return elem.offsetParent;
    }
    catch(e)
    {        
      return document.body;
    }
}

// The Offset Method
// Originally By Brandon Aaron, part of the Dimension Plugin
// http://jquery.com/plugins/project/dimensions
jQuery.fn.offset = function() {
/// <summary>
///     Gets the current offset of the first matched element relative to the viewport.
/// </summary>
/// <returns type="Object">An object with two Integer properties, 'top' and 'left'.</returns>

var left = 0, top = 0, elem = this[0], results;

if ( elem ) with ( jQuery.browser ) {
    var parent     = elem.parentNode,
        offsetChild  = elem,
        offsetParent = IESafeOffsetParent(elem),
        doc       = elem.ownerDocument,
        safari2   = safari && parseInt(version) < 522 && !/adobeair/i.test(userAgent),
        css       = jQuery.curCSS,
        fixed       = css(elem, "position") == "fixed";

    // Use getBoundingClientRect if available
    if (false && elem.getBoundingClientRect) {
        var box = elem.getBoundingClientRect();

        // Add the document scroll offsets
        add(box.left + Math.max(doc.documentElement.scrollLeft, doc.body.scrollLeft),
            box.top  + Math.max(doc.documentElement.scrollTop,  doc.body.scrollTop));

        // IE adds the HTML element's border, by default it is medium which is 2px
        // IE 6 and 7 quirks mode the border width is overwritable by the following css html { border: 0; }
        // IE 7 standards mode, the border is always 2px
        // This border/offset is typically represented by the clientLeft and clientTop properties
        // However, in IE6 and 7 quirks mode the clientLeft and clientTop properties are not updated when overwriting it via CSS
        // Therefore this method will be off by 2px in IE while in quirksmode
        add( -doc.documentElement.clientLeft, -doc.documentElement.clientTop );

    // Otherwise loop through the offsetParents and parentNodes
    } else {

        // Initial element offsets
        add( elem.offsetLeft, elem.offsetTop );

        // Get parent offsets
        while ( offsetParent ) {
            // Add offsetParent offsets
            add( offsetParent.offsetLeft, offsetParent.offsetTop );

            // Mozilla and Safari > 2 does not include the border on offset parents
            // However Mozilla adds the border for table or table cells
            if ( mozilla && !/^t(able|d|h)$/i.test(offsetParent.tagName) || safari && !safari2 )
                border( offsetParent );

            // Add the document scroll offsets if position is fixed on any offsetParent
            if ( !fixed && css(offsetParent, "position") == "fixed" )
                fixed = true;

            // Set offsetChild to previous offsetParent unless it is the body element
            offsetChild  = /^body$/i.test(offsetParent.tagName) ? offsetChild : offsetParent;
            // Get next offsetParent
            offsetParent = offsetParent.offsetParent;
        }

        // Get parent scroll offsets
        while ( parent && parent.tagName && !/^body|html$/i.test(parent.tagName) ) {
            // Remove parent scroll UNLESS that parent is inline or a table to work around Opera inline/table scrollLeft/Top bug
            if ( !/^inline|table.*$/i.test(css(parent, "display")) )
                // Subtract parent scroll offsets
                add( -parent.scrollLeft, -parent.scrollTop );

            // Mozilla does not add the border for a parent that has overflow != visible
            if ( mozilla && css(parent, "overflow") != "visible" )
                border( parent );

            // Get next parent
            parent = parent.parentNode;
        }

        // Safari <= 2 doubles body offsets with a fixed position element/offsetParent or absolutely positioned offsetChild
        // Mozilla doubles body offsets with a non-absolutely positioned offsetChild
        if ( (safari2 && (fixed || css(offsetChild, "position") == "absolute")) ||
            (mozilla && css(offsetChild, "position") != "absolute") )
                add( -doc.body.offsetLeft, -doc.body.offsetTop );

        // Add the document scroll offsets if position is fixed
        if ( fixed )
            add(Math.max(doc.documentElement.scrollLeft, doc.body.scrollLeft),
                Math.max(doc.documentElement.scrollTop,  doc.body.scrollTop));
    }

    // Return an object with top and left properties
    results = { top: top, left: left };
}

function border(elem) {
    /// <summary>
    ///     This method is internal.
    /// </summary>
    /// <private />
    add( jQuery.curCSS(elem, "borderLeftWidth", true), jQuery.curCSS(elem, "borderTopWidth", true) );
}

function add(l, t) {
    /// <summary>
    ///     This method is internal.
    /// </summary>
    /// <private />
    left += parseInt(l, 10) || 0;
    top += parseInt(t, 10) || 0;
}

return results;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-13T17:31:49.140

如果您想修复 jQuery 版本 1.4.2 的缩小/压缩 .js 文件，请替换：

```
var d=b.getBoundingClientRect(), 
```

和

```
var d = null; 
try { d = b.getBoundingClientRect(); }
catch(e) { d = { top : b.offsetTop, left : b.offsetLeft } ; } 
```

（注意现在右大括号后面没有逗号）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-11T09:58:47.200

我在拖放时尝试了以下解决方法来解决**getBoundingClientRect()未指定错误，它工作正常。**

在 jquery.1.4.2.js 中（*即基本 jquery 文件，错误被准确抛出的地方*）

替换js文件中的**elem.getBoundingClientRect()函数调用**

//抛出未指定错误的行

`var box = elem.getBoundingClientRect(),`

有了这个..

`var box = null; try { box = elem.getBoundingClientRect(); } catch(e) { box = { top : elem.offsetTop, left : elem.offsetLeft } ; }`

这解决了问题，即使在通过更新面板回发后，拖放也能正常工作

问候

拉古

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-16T19:55:21.813

@Raghu

感谢这段代码！我在 IE 中遇到了同样的问题，这解决了它。

```
var box = null; 
try { 
    box = elem.getBoundingClientRect(); 
} catch(e) { 
    box = { 
        top : elem.offsetTop, 
        left : elem.offsetLeft 
    }; 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-14T09:18:18.260

我的版本是：

1.  添加功能：

    ```
    function getOffsetSum(elem) {
        var top = 0, left = 0
        while (elem) {
            top = top + parseInt(elem.offsetTop)
            left = left + parseInt(elem.offsetLeft)
            try {
                elem = elem.offsetParent
            }
            catch (e) {
                return { top: top, left: left }
            }
        }
        return { top: top, left: left }
    }; 
    ```

2.  代替

    ```
    var box  = this[0].getBoundingClientRect() 
    ```

    和

    ```
    var box = getOffsetSum(this[0]) 
    ```

PS：jQuery-1.3.2。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T13:56:38.457

这不仅仅是一个 jQuery 错误。我在 IE8 上使用 ExtJS 4.0.2a 遇到了它。`element.getBoundingClientRect()`如果元素在 DOM 中被替换，似乎 IE 几乎总是会绊倒。您的 try/catch hack 几乎是解决此问题的唯一方法。我想实际的解决方案是最终放弃对 IE < 9 的支持。

**相关 ExtJS v4.0.2a 源代码（第 11861-11869 行）：**

```
...
if(el != bd){
    hasAbsolute = fly(el).isStyle("position", "absolute");

    if (el.getBoundingClientRect) {
        b = el.getBoundingClientRect();
        scroll = fly(document).getScroll();
        ret = [Math.round(b.left + scroll.left), Math.round(b.top + scroll.top)];
    } else {
... 
```

**使用 try/catch 修复：**

```
...
if(el != bd){
    hasAbsolute = fly(el).isStyle("position", "absolute");

    if (el.getBoundingClientRect) {
        try {
            b = el.getBoundingClientRect();
            scroll = fly(document).getScroll();
            ret = [Math.round(b.left + scroll.left), Math.round(b.top + scroll.top)];
        } catch(e) {
            ret = [0,0];
        }
    } else {
... 
```

# javascript - HTML + Javascript：动态图像调整大小？

> ID：371471
> 
> 赞同：4
> 
> 时间：2008-12-16T14:29:09.463
> 
> 标签：javascript, html, css, resize-image

我试图让一些`JavaScript`以编程方式调整 HTML`img`标签的宽度以正确显示各种大小的图像。

我有一个固定宽度的`img`标签`800px`来显示图像，这是最大宽度。

如果图像更宽，那么`800px`我想以`800px`宽幅显示它；

如果图像小于`800px`宽度，我想保留它的宽度以避免拉伸它。

我使用这个 html/javacript 代码来获得部分解决方案：

```
function resize_image(id) {
	var img = document.getElementById(id);
	var normal_width = img.width;
	img.removeAttribute("width");
	var real_width = img.width;
	if (real_width < normal_width) {
		img.width = real_width;
	} else {
		img.width = normal_width;
	}
}
```

```
<img id="myimage" onload="resize_image(self.id);" src="https://via.placeholder.com/350x150" width="800" />
```

上面的代码似乎适用于我测试过的所有浏览器`Safari`（除非刷新页面，否则图像不会显示）。

我知道我可以使用 CSS ，但这在< 7 上`max-width`不起作用，这是一个阻碍。`IE`

我怎样才能让它适用于所有浏览器？提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T14:56:30.517

我从未见过工作中的 safari，但您可以尝试将 onload 事件更改为：

```
onload="resize_image(self.id);return true" 
```

可能是没有返回值，safari 认为不应该加载这个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T14:37:21.023

使用 IE6 css+javascript hack：

```
.dynamic_img {
    width: expression(document.body.clientWidth <= 800? "auto" : "800px");
    max-width: 800px; //For normal browsers
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-04T15:23:34.867

没有身份证：

```
...
  function resize_image( img )
  {
     //var img = document.getElementById( id );
...
  <img onload="resize_image(this);" src="IMAGE.JPG" width="800" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T14:38:34.483

你试过猴子`img.style.width`吗？您还可以尝试为 2 个条件中的每一个设置 2 个 CSS 类并以编程方式更改它们。

# linux - Linux lib / include 交叉编译库的组织？

> ID：371485
> 
> 赞同：2
> 
> 时间：2008-12-16T14:32:47.257
> 
> 标签：linux, shared-libraries

我们正在为桌面 Linux 下的嵌入式 Linux 目标交叉编译应用程序。出于测试和其他目的，我们在应用程序中使用静态链接库。我们使用的测试库是[CMockery](http://code.google.com/p/cmockery/)。

我的问题是：考虑到我们正在交叉编译，CMockery 的静态库和包含文件应该在哪里？

如果我们不进行交叉编译，[则应该进入 /usr/local/lib](http://www.faqs.org/docs/Linux-HOWTO/Program-Library-HOWTO.html#AEN46)。

我们团队的一些建议是：

*   /opt/google/lib 和 /opt/google/include*   /opt/ **embeddedLinuxDistro** /usr/local/share/google/lib（包括）*   /usr/local/ **arch** /lib （包括）

    任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T15:15:40.550

注意：写完这个答案后，我的总结是：

> 将您正在使用的 Linux 发行版的非标准内容分开保存。事实上，即使它们共享库，也可以将不同项目的文件分开。这将使您更容易将文件移动到另一台机器，设置多个完整的构建进行测试，最重要的是能够从头开始重新创建构建。

* * *

这个决定真的很主观。

*   您是否只需要为所有用户提供一份库副本？
*   它很少改变吗？
*   如果您的构建机器起火并且您没有该机器的备份，那么您可以如何快速轻松地重新构建您的库和交叉编译器环境？

我问这些问题，因为如果库经常更改或者不同的用户可能需要不同的版本，你最好让它是可移植的。也就是说，您可以在构建中指定在哪里找到文件。

在您团队的建议中，我倾向于包含对您的项目的引用的路径。这将使一年后（当有人要求您设置另一台构建机器时）更容易重现所有内容。

最后，我不会担心尝试遵守“标准”库位置，因为您不是在创建和管理 Linux 发行版。此外，大多数人真的不知道“/usr/lib”和/usr/local/lib”之外的任何东西，甚至知道它们的人也不知道它们之间的区别。

做最适合你的项目的事情，不管它是什么。

# sql - Oracle SQL - 解析名称字符串并将其转换为首字母和姓氏

> ID：371490
> 
> 赞同：1
> 
> 时间：2008-12-16T14:33:53.510
> 
> 标签：sql, string, parsing, informix

有谁知道如何把这个字符串： "Smith, John R"
变成这个字符串： "jsmith" ？

我需要使用 lower() 将所有内容小写
查找逗号的位置并跟踪它的整数位置值
获取该逗号之后的第一个字符并将其放在字符串前面
然后获取整个姓氏并将其粘贴在第一个首字母之后。

旁注 - instr() 函数与我的版本不兼容

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T14:48:44.887

首先编写您自己的 INSTR 函数 - 例如将其称为 my_instr。它将从字符 1 开始并循环，直到找到一个“，”。

然后像 INSTR 一样使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-02T18:33:35.250

最好的方法是使用 Oracle 正则表达式功能，如下所示：

```
SELECT LOWER(regexp_replace('Smith, John R', 
             '(.+)(, )([A-Z])(.+)', 
             '\3\1', 1, 1)) 
  FROM DUAL; 
```

也就是说，1）当您找到任何一组字符的模式时，后跟“，”，后跟一个大写字符，然后是任何剩余的字符，取第三个元素（名字的首字母）并附加姓氏。然后将所有内容变为小写。

您的旁注：“instr() 函数与我的版本不兼容”对我来说没有意义，因为该函数已经存在了很长时间。检查您的版本，因为正则表达式仅在 9i 版中添加到 Oracle。

感谢您的积分。

- 炖

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T21:14:20.817

instr() 与您的版本不兼容？甲骨文？您使用的是版本 4 还是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T20:02:03.347

我很难相信您无法访问正确的 instr() 但如果是这种情况，请实现您自己的版本。

假设你已经理顺了：

```
选择
  substr(
      低（'史密斯，约翰 R'）
    , instr('Smith, John R', ',') + 2
    , 1
  ) || -- first_initial
  substr(
      低（'史密斯，约翰 R'）
    , 1
    , instr('史密斯, 约翰 R', ',' ) - 1
  ）  -  姓
从双;

```

此外，请注意您假设所有名称都将采用该格式。注意逗号后的单个空格以外的其他内容，姓氏中包含“Parisi, Jr.”等数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-22T16:23:48.383

没有必要创建自己的函数，坦率地说，如果可以使用已经存在的 sql 函数相当容易地完成，这似乎是浪费时间。必须注意草率的数据输入。

这是实现既定目标的另一种方法：

```
with name_list as
  (select '   Parisi, Kenneth R' name from dual)
select name
      -- There may be a space after the comma.  This will strip an arbitrary
      -- amount of whitespace from the first name, so we can easily extract
      -- the first initial.
     , substr(trim(substr(name, instr(name, ',') + 1)), 1, 1) AS first_init
      -- a simple substring function, from the first character until the
      -- last character before the comma.
     , substr(trim(name), 1, instr(trim(name), ',') - 1) AS last_name
      -- put together what we have done above to create the output field      
     , lower(substr(trim(substr(name, instr(name, ',') + 1)), 1, 1)) ||
       lower(substr(trim(name), 1, instr(trim(name), ',') - 1)) AS init_plus_last
  from name_list; 
```

HTH，加布

# java - 在生产系统上详细分析 Tomcat 堆

> ID：371495
> 
> 赞同：9
> 
> 时间：2008-12-16T14:34:32.013
> 
> 标签：java, tomcat, heap-memory, jmx

使用 JMX 控制台分析了在 tomcat 中运行的轻负载 Web 应用程序，结果表明“PS Old Gen”增长缓慢但稳定。它从 200MB 开始，增长到大约 80MB/小时。

CPU 不是问题，它平均以 0-1% 的速度运行，但在某处它会泄漏内存，因此在部署后几天会变得不稳定。

我如何找出堆上分配了哪些对象？你知道有什么好的教程或工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T15:46:31.710

您可以尝试[jmap](http://java.sun.com/javase/6/docs/technotes/tools/share/jmap.html)，它是[JDK 开发工具](http://java.sun.com/javase/6/docs/technotes/tools/)之一。您可以使用带有输出的[jhat](http://java.sun.com/javase/6/docs/technotes/tools/share/jhat.html)来使用 Web 浏览器遍历堆转储。

请参阅[此答案](https://stackoverflow.com/questions/154309/how-do-i-make-sure-my-objects-get-garbage-collected#154570)以获取简短说明。

这经常出现，因此搜索这些工具应该会找到一些替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T16:10:47.560

您可以使用[NetBeans 分析器](http://www.netbeans.org/features/java/profiler.html)。它有 2 种模式，直接从 ide（对于 localhost）启动配置文件的 tomcat，或者使用提供的 JAR 和一些在服务器上运行配置的远程配置文件。

我在一个项目中使用它来解决内存泄漏问题，它很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T15:46:55.267

我使用[IBM 的 alphaWorks 的 HeapAnalyzer 工具](http://www.alphaworks.ibm.com/tech/heapanalyzer)取得了很好的成功。它从 Java 的堆配置文件 hprof 中获取输出，并对其进行分析以向您展示最可能的内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-08T11:26:36.060

在这里查看我的答案：

[Java内存问题的诊断策略](https://stackoverflow.com/questions/418272/strategies-for-the-diagnosis-of-java-memory-issues#418456)

这里也有提示：

[我怎样才能弄清楚是什么保留了未释放的对象？](https://stackoverflow.com/questions/154309/how-do-i-make-sure-my-objects-get-garbage-collected#154570)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T21:43:48.350

你所看到的都是正常的，除非你能证明不是这样。当旧空间中的 GC 发生时，额外的“已消耗空间”消失时，您无需分析堆。在某些时候，当已用空间达到最大堆大小时，您会观察到由您使用的默认 GC 引起的暂停，之后使用的内存应该会下降很多。只有在 GC 后它没有停止时，您可能会对仍然持有这些对象的内容感兴趣。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T23:49:58.020

JRockit Mission Control 可以在连接到 JVM 时分析内存泄漏。无需一直拍摄快照。如果您有一个具有大堆的服务器，这将很有用。

只需将该工具连接到 JVM，它就会为您提供一个趋势表，您可以在其中查看增长最多的对象类型，然后您可以探索对这些对象的引用。您还可以在 JVM 运行时获取分配跟踪，因此您可以查看对象在应用程序中的分配位置。

你可以在这里[免费下载](http://www.oracle.com/technology/products/jrockit/missioncontrol/index.html)

# javascript - 使用 Javascript 下载 HTTP 文件

> ID：371497
> 
> 赞同：7
> 
> 时间：2008-12-16T14:34:48.330
> 
> 标签：javascript, http, curl, io

有没有办法（在 Javascript 中）下载远程网站（即像 Curl 一样），将其读入字符串变量并进一步处理它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-16T14:44:13.803

[根据同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您只能从同一个域下载文件。不过，您可以使用 XMLHTTPRequest 对象从同一域下载内容：

```
 var xhReq = createXMLHttpRequest();
 xhReq.open("GET", "page.html", true);
 xhReq.onreadystatechange = onResponse;
 xhReq.send(null);
 ...
 function onResponse() {
   if (xhReq.readyState != 4)  { return; }
   var serverResponse = xhReq.responseText;
   ...
 } 
```

有一些方法可以规避该政策，其中一些方法列在同一个维基百科页面中。但这充其量是一种黑客行为，最坏的情况是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T14:48:33.327

当然- url 必须来自同一个域，除非 url 具有跨域策略或您创建服务器端代理脚本。

以下代码是通过代理 PHP 脚本对任何域进行 ajax 调用的示例：

```
 var xmlhttp =  new XMLHttpRequest();
xmlhttp.open("POST","http://localhost/proxy.php?url=http://google.com", true);
xmlhttp.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {
      // ensure we have a response...
      if (xmlhttp.responseText) {
         var html =  xmlhttp.responseText;
         // do your processing here...
      }
    }
};
xmlhttp.send(); 

```

然后，您将使您的 proxy.php 脚本通过 Curl（或您的服务器端语言具有的任何 url 库）连接到给定的 url，然后简单地回显来自您的域的内容......

```
 <?php

// proxy.php

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,$_GET["url"]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$result=curl_exec ($ch);
curl_close ($ch);
echo $result;

?> 

```

希望一切都说得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T16:07:19.517

您可以使用[Yahoo Query Language](http://developer.yahoo.com/yql/console/)查询网络上的任何页面。

例如，如果您想要[Google](http://google.com)主页的完整源代码，您可以使用：

```
select * from html where url="http://google.com" and xpath='/html' limit 1 
```

您必须使用他们的 JSON 回调并重新序列化返回的对象，但您将能够获得页面的完整视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T16:53:59.377

大多数情况下你不会被允许的。出于安全原因，Javascript 会阻止您这样做。但是，您可以使用 jQuery 从其他域请求 json 数据。这是 jquery docs 中的一个示例，该示例从 flickr 获取了一些猫图片...

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?",
    function(data){
      $.each(data.items, function(i,item){
        $("<img/>").attr("src", item.media.m).appendTo("#images");
        if ( i == 4 ) return false;
      });
    }); 
```

[您可以在jQuery Docs](http://docs.jquery.com/Ajax/jQuery.getJSON#urldatacallback)中找到此代码。如您所见，这会发出请求，取回数据并使用猫图片更新 DOM 中的一些图像标签......

# c++ - 为什么 ++i 被认为是左值，而 i++ 不是？

> ID：371503
> 
> 赞同：47
> 
> 时间：2008-12-16T14:37:07.827
> 
> 标签：c++, operators, increment, rvalue

为什么 ++i 是左值而 i++ 不是？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-12-16T14:58:28.860

其他人已经解决了后增量和前增量之间的功能差异。

就**左值**而言，`i++`不能分配给，因为它不引用变量。它指的是计算值。

在分配方面，以下两者以同样的方式没有意义：

```
i++   = 5;
i + 0 = 5; 
```

因为 pre-increment 返回对递增变量的引用而不是临时副本，`++i`所以是一个左值。

当您增加诸如迭代器对象（例如在 STL 中）之类的东西时，出于性能原因首选预增量成为一个特别好的主意，它可能比 int 更重量级。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-12-17T10:15:35.200

好吧，正如另一个回答者已经指出的那样`++i`，左值的原因是将其传递给引用。

```
int v = 0;
int const & rcv = ++v; // would work if ++v is an rvalue too
int & rv = ++v; // would not work if ++v is an rvalue 
```

第二条规则的原因是当引用是对 const 的引用时，允许使用文字来初始化引用：

```
void taking_refc(int const& v);
taking_refc(10); // valid, 10 is an rvalue though! 
```

您可能会问，为什么我们要引入右值。好吧，在为这两种情况构建语言规则时会出现这些术语：

*   我们想要一个定位器值。这将表示一个包含可以读取的值的位置。
*   我们想要表示表达式的值。

以上两点取自 C99 标准，其中包含这个非常有帮助的漂亮脚注：

> [ 名称“左值”最初来自赋值表达式 E1 = E2，其中要求左操作数 E1 是（可修改的）左值。将其视为表示对象“定位器值”可能更好。有时被称为“右值”的东西在本国际标准中被描述为“表达式的值”。]

定位器值称为*lvalue*，而评估该位置产生的值称为*rvalue*。根据 C++ 标准，这也是正确的（谈论左值到右值的转换）：

> 4.1/2：左值表示的对象中包含的值是右值结果。

### 结论

使用上述语义，现在很清楚为什么`i++`不是左值而是右值。因为返回的表达式不再位于`i`其中（它是递增的！），它只是可能感兴趣的值。修改返回的值是`i++`没有意义的，因为我们没有可以再次读取该值的位置。所以标准说它是一个右值，因此它只能绑定到一个对常量的引用。

但是，相比之下，返回的表达式`++i`是 的位置（左值）`i`。引发左值到右值的转换，例如 in`int a = ++i;`会从中读取值。或者，我们可以对它做一个参考点，然后再读出它的值：`int &a = ++i;`.

还要注意生成右值的其他场合。例如，所有临时变量都是右值，二进制/一元 + 和减号的结果以及所有不是引用的返回值表达式。所有这些表达式都不位于命名对象中，而是仅携带值。这些值当然可以由非恒定的对象支持。

下一个 C++ 版本将包括所谓的`rvalue references`，即使它们指向非常量，也可以绑定到右值。基本原理是能够从这些匿名对象中“窃取”资源，并避免复制这样做。假设一个类类型具有重载的前缀 ++（返回`Object&`）和后缀 ++（返回`Object`），以下将首先导致复制，对于第二种情况，它将从右值窃取资源：

```
Object o1(++a); // lvalue => can't steal. It will deep copy.
Object o2(a++); // rvalue => steal resources (like just swapping pointers) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-16T15:42:24.717

似乎很多人都在解释`++i`左值是如何产生的，而不是**为什么**，例如，*为什么*C++ 标准委员会会加入这个特性，尤其是考虑到 C 不允许将左值作为左值的事实。从[关于 comp.std.c++](http://groups.google.com/group/comp.std.c++/browse_thread/thread/7804d1fdf2f05a1c)的讨论中，您可以获取它的地址或分配给参考。摘自 Christian Bau 帖子的代码示例：

> ```
>    诠释我;
>    外部无效 f (int* p);
>    外部无效 g (int& p);
> 
>    f (&++i); /* 将是非法的 C，但 C 程序员
>                   没有错过这个功能 */
>    g (++i); /* C++ 程序员希望这是合法的 */
>    g (i++); /* 不是合法的 C++，而且很难
>                   给出这个有意义的语义 */
> 
> ```

顺便说一句，如果`i`碰巧是一个内置类型，那么诸如`++i = 10`调用**未定义行为**之类的赋值语句，因为`i`在序列点之间被修改了两次。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-16T14:51:40.917

尝试编译时出现左值错误

```
i++ = 2; 
```

但不是当我将其更改为

```
++i = 2; 
```

这是因为前缀运算符 (++i) 改变了 i 中的值，然后返回 i，所以它仍然可以被赋值。后缀运算符 (i++) 更改 i 中的值，但返回旧*值*的临时副本，赋值运算符无法修改该副本。

* * *

**回答原始问题**：

如果您正在谈论在自己的语句中使用增量运算符，例如在 for 循环中，那真的没有区别。Preincrement 似乎更有效，因为 postincrement 必须自增并返回一个临时值，但编译器会优化这种差异。

```
for(int i=0; i<limit; i++)
... 
```

是相同的

```
for(int i=0; i<limit; ++i)
... 
```

当您将操作的返回值用作较大语句的一部分时，事情会变得更加复杂。

即使是两个简单的陈述

```
int i = 0;
int a = i++; 
```

和

```
int i = 0;
int a = ++i; 
```

是不同的。您选择使用哪个增量运算符作为多运算符语句的一部分取决于预期的行为。简而言之，不，你不能只选择一个。你必须了解两者。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-16T14:49:28.580

### POD 预增量：

预增量应该就像对象在表达式之前增加一样，并且可以在这个表达式中使用，就好像发生了一样。因此，C++ 标准委员会决定它也可以用作左值。

### POD 后期增量：

后增量应该增加 POD 对象并返回一个副本以在表达式中使用（参见 n2521 第 5.2.6 节）。由于副本实际上不是一个变量，因此使其成为左值没有任何意义。

### 对象：

对象的前后增量只是语言的语法糖，提供了一种调用对象方法的方法。因此，从技术上讲，对象不受语言标准行为的限制，而仅受方法调用所施加的限制。

由这些方法的实现者来使这些对象的行为反映 POD 对象的行为（这不是必需的，而是预期的）。

### 对象预增量：

这里的要求（预期行为）是对象是递增的（意味着依赖于对象），并且该方法返回一个可修改的值，并且在递增发生之后看起来像原始对象（好像递增发生在此语句之前）。

要做到这一点很简单，只需要该方法返回对它自身的引用。引用是一个左值，因此将按预期运行。

### 对象后增量：

这里的要求（预期行为）是对象递增（以与预递增相同的方式）并且返回的值看起来像旧值并且是不可变的（因此它的行为不像左值） .

不可变：
为此，您应该返回一个对象。如果对象在表达式中使用，它将被复制构造到临时变量中。临时变量是 const 的，因此它是不可变的并按预期运行。

看起来像旧值：
这可以通过在进行任何修改之前创建原始副本（可能使用复制构造函数）来简单地实现。副本应该是深层副本，否则对原始副本的任何更改都会影响副本，因此状态将与使用对象的表达式的关系发生变化。

与预增量相同：
最好根据预增量实现后增量，以便获得相同的行为。

```
class Node // Simple Example
{
     /*
      * Pre-Increment:
      * To make the result non-mutable return an object
      */
     Node operator++(int)
     {
         Node result(*this);   // Make a copy
         operator++();         // Define Post increment in terms of Pre-Increment

         return result;        // return the copy (which looks like the original)
     }

     /*
      * Post-Increment:
      * To make the result an l-value return a reference to this object
      */
     Node& operator++()
     {
         /*
          * Update the state appropriatetly */
         return *this;
     }
}; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-16T14:46:45.577

**关于 LValue**

*   在`C`（例如 Perl）中，LValue*既不是* `++i`也不是。`i++`

*   在`C++`, `i++`is not 和 LValue but `++i`is.

    `++i`等价于`i += 1`，即等价于`i = i + 1`。
    结果是我们仍在处理同一个对象`i`。
    它可以被视为：

    ```
    int i = 0;
    ++i = 3;  
    // is understood as
    i = i + 1;  // i now equals 1
    i = 3; 
    ```

    `i++`另一方面可以看作：
    *首先我们使用 的**值**，`i`然后增加**对象** `i`。*

    ```
    int i = 0;
    i++ = 3;  
    // would be understood as 
    0 = 3  // Wrong!
    i = i + 1; 
    ```

（编辑：在第一次尝试有污点后更新）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-16T14:48:40.050

主要区别在于 i++ 返回前增量值，而 ++i 返回后增量值。我通常使用 ++i ，除非我有非常令人信服的理由使用 i++ - 即，如果我确实*需要*预增量值。

恕我直言，使用 '++i' 形式是一种很好的做法。虽然在比较整数或其他 POD 时无法真正测量前增量和后增量之间的差异，但如果对象非常昂贵，则使用“i++”时必须创建和返回的额外对象副本可能会对性能产生重大影响复制或频繁增加。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-16T14:50:13.993

顺便说一句 - 避免在同一语句中对同一变量使用多个增量运算符。至少在 C 中，您会陷入“序列点在哪里”和未定义的操作顺序的混乱。我认为其中一些在 Java 和 C# 中已被清除。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-16T19:36:19.673

也许这与后增量的实现方式有关。也许是这样的：

*   在内存中创建原始值的副本
*   增加原始变量
*   退回副本

由于副本既不是变量也不是对动态分配内存的引用，因此它不能是左值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-19T18:20:13.723

编译器如何翻译这个表达式？`a++`

我们知道我们想要返回未*递增*的版本，即递增*之前*`a`的旧版本。我们还希望将增量作为副作用。换句话说，我们返回的是旧版本的，它不再代表 的当前状态，它不再是变量本身。*`a``a``a`*

 *`a`返回的值是被放入[寄存器](https://techterms.com/definition/register)的副本。然后变量递增。所以在这里你不是返回变量本身，而是返回一个**单独**的实体的副本！该副本临时存储在寄存器中，然后返回。*回想一下，C++ 中的左值是在内存*中具有可识别位置的对象。但是副本存储在*CPU 的寄存器中，而不是内存中。**所有右值都是在内存中*没有可识别位置的对象。这就解释了为什么旧版本的副本`a`是一个右值，因为它被临时存储在寄存器中。通常，任何副本、临时值或长表达式的结果`(5 + a) * b`都存储在寄存器中，然后将它们分配给变量，这是一个左值。

后缀运算符必须将原始值存储到寄存器中，以便它可以返回未递增的值作为其结果。考虑以下代码：

```
for (int i = 0; i != 5; i++) {...} 
```

这个 for 循环最多可计数 5 个，但却`i++`是最有趣的部分。它实际上是 1 中的两条指令。首先我们必须将 的旧值移动`i`到寄存器中，然后我们递增`i`。在伪汇编代码中：

```
mov i, eax
inc i 
```

`eax`注册现在包含`i`作为副本的旧版本。如果变量`i`驻留在主存中，CPU 可能会花费大量时间从主存中获取副本并将其移动到寄存器中。对于现代计算机系统来说，这通常非常快，但如果你的 for 循环迭代十万次，所有这些额外的操作就会开始加起来！这将是一个重大的性能损失。

现代编译器通常足够聪明，可以优化整数和指针类型的额外工作。对于更复杂的迭代器类型，或者可能是类类型，这种额外的工作可能成本更高。

那么前缀增量`++a`呢？

我们要返回 的*增量*版本，增量*之后*`a`的新版本。新版本代表 的当前状态，因为它是变量本身。`a` *`a``a`*

 *首先`a`是递增的。既然我们想得到 的更新版本`a`，为什么不直接返回**变量`a`本身**呢？我们不需要将临时副本复制到寄存器中来生成右值。这将需要不必要的额外工作。所以我们只是将变量本身作为左值返回。

如果我们不需要未递增的值，则不需要将旧版本的复制`a`到寄存器中的额外工作，这是由后缀运算符完成的。这就是为什么你应该只`a++`在你**真的**需要返回未增加的值时使用。对于所有其他目的，只需使用`++a`. 通过习惯使用前缀版本，我们不必担心性能差异是否重要。

使用的另一个好处`++a`是它更直接地表达了程序的意图：我只想递增`a`！但是，当我看到`a++`别人的代码时，我想知道他们为什么要返回旧值？它是干什么用的？

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2008-12-16T14:47:47.087

C＃：

```
public void test(int n)
{
  Console.WriteLine(n++);
  Console.WriteLine(++n);
}

/* Output:
n
n+2
*/ 
```

# database - 您如何将元数据置于版本控制之下？

> ID：371513
> 
> 赞同：3
> 
> 时间：2008-12-16T14:39:15.140
> 
> 标签：database, version-control, metadata

我们有一个数据库来保存我们的元数据和数据。

我们的元数据是由一个专门的团队使用开发服务器上的 Web 应用程序生成的，并且是我们应用程序的关键部分。

然后客户根据这个元数据生成数据。

我们已经对数据库模式进行了版本化，并且所有模式都发生了变化。下一步是将我们的元数据置于版本控制之下。

天真的解决方案

一个天真的解决方案是转储所有元数据，并在生成相应的包之前将其提交到版本控制下。由于它是一个转储，它可以很容易地恢复。但可能有更好的方法，比如增量解决方案（仅版本差异）。

文本转储

另一种解决方案是以文本格式（如 XML）导出所有元数据表，然后对这些文本文件进行版本控制。但是你必须找到一种方法来重新导入它们。

那么，您的元数据是否受版本控制？为什么？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T15:06:22.120

非 Niave 解决方案：-

版本控制您的 mata 数据构建脚本。

IE 数据库模式 drop/create 和 SQL“INSERTS”都应置于版本控制之下。

这种方法的优点是 Schema 和 Insert 脚本确实是源代码。版本控制系统是为源代码设计的，因此它们可以很好地使用这种方法。此外，它几乎是独立的，可以轻松移植到其他系统。

如果您的元数据是交互式开发的，那么有几个实用程序可以让您将数据库导出为插入脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T21:25:58.297

K. Scott Allen 有一系列关于这个主题的优秀博客文章：

*   [版本控制数据库 - 基线](http://odetocode.com/Blogs/scott/archive/2008/01/31/11710.aspx)
*   [版本控制数据库 - 更改脚本](http://odetocode.com/Blogs/scott/archive/2008/02/02/11721.aspx)
*   [版本控制数据库 - 视图、存储过程等](http://odetocode.com/Blogs/scott/archive/2008/02/02/11737.aspx)
*   [版本控制数据库 - 分支和合并](http://odetocode.com/Blogs/scott/archive/2008/02/03/11746.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-17T23:10:19.863

需要考虑的是 Embarcadero 提供的工具。 [例如， ErStudio](http://www.embarcadero.com/products/erstudio/index.html)提供了对整个数据库模型进行版本控制的能力。

# asp.net - ASP.NET 2.0 RijndaelManaged 加密算法与 FIPS

> ID：371534
> 
> 赞同：7
> 
> 时间：2008-12-16T14:46:53.673
> 
> 标签：asp.net, viewstate, rijndaelmanaged, fips

我遇到了 ASP.NET 2.0 应用程序的问题。我们的网络人员刚刚提高了我们的安全性，现在每当我尝试访问该应用程序时都会出现以下错误：

> “此实现不是 Windows 平台 FIPS 验证的加密算法的一部分。”

我做了一些研究，听起来 ASP.NET 使用 RijndaelManaged AES 加密算法来加密页面的 ViewState ......并且 RijndaelManaged 在不符合 FIPS 的算法列表中。我们当然没有明确地调用*任何*加密算法......更不用说不合规列表上的任何东西了。

我猜这个 ViewState 业务对我来说很有意义。不过，我无法混淆的是如何处理它。我发现一篇[知识库文章](http://support.microsoft.com/kb/911722)建议使用 web.config 设置来指定不同的算法......但要么没有坚持，要么该算法不符合标准。

所以：

1) RijndaelManaged / ViewState 真的是问题吗？还是我在叫错树？

2) 如何指定使用什么算法而不是 RijndaelManaged？我有一份符合和不符合要求的算法列表；我只是不确定在哪里插入这些信息。

谢谢！

理查德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-10-24T18:04:02.223

仔细检查`<compilation debug="true" />`您的 Web.config 中没有。设置调试编译时，.NET 使用 MD5 散列进行一些内部簿记。MD5 不符合 FIPS，因此您会收到此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-26T05:41:15.830

Source: [http://blogs.msdn.com/b/shawnfa/archive/2008/03/14/disabling-the-fips-algorithm-check.aspx](http://blogs.msdn.com/b/shawnfa/archive/2008/03/14/disabling-the-fips-algorithm-check.aspx)

You could add the following to your web.config or machine config so your ASP.Net applications will stop failing due to the FIPs compliance checks.

```
<configuration>   

  <runtime>
        <enforceFIPSPolicy enabled="false"/>
    </runtime> 
```

Your machine.config can be found here: \Microsoft.NET\Framework\\config\machine.config

If you change your machine.config, an iisreset may be required for the settings to take effect. Note: changing your maching.config will effect all .NET applications on the system.

* * *

To get your application to be FIPs compliant without having to disable FIPs, you can try the following:

1) Configure your machine key to use 3DES for decryption and SHA1 for validation.

EDIT (2018-04-05): The new IIS8.5 STIG says you should set your Machine Key settings to Validation: HMACSHA256, Encryption: Auto.

```
<configuration>
<system.web>
    <authentication mode="Windows" />
    <machineKey decryption="3DES" decryptionKey="AutoGenerate,IsolateApps" validation="SHA1" validationKey="AutoGenerate,IsolateApps" />
</system.web>
</configuration> 
```

NOTE: if you are using a web farm environment, you can use IIS GUI and go to the Machine Keys configuration section to generate a set of keys and use the same keys across your web farm.

2) Ensure that your compilation debug="false", and all page directives have debug="false". Setting debug to true will also kick off the FIPs compliance check.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T12:40:10.943

关于您的第二个问题：也许这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/w8h3skw9.aspx)有帮助。

根据文档，您可以像这样配置加密算法：

`<machineKey validationKey="AutoGenerate,IsolateApps" decryptionKey="AutoGenerate,IsolateApps" validation="3DES" decryption="3DES"/>`

对于验证，您可以使用以下方法之一：[SHA1 | MD5 | 3DES | AES]

对于解密，您可以使用以下之一：[Auto | DES | 3DES | AES]

因此，为了符合 FIPS，您可以使用 3DES（尽管 AFAIK 理论上不太安全）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-22T14:48:34.207

您还需要在包装盒上执行此操作

[执行 FIPS 认证的密码学](http://blogs.msdn.com/shawnfa/archive/2005/05/16/417975.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-04T20:04:33.057

某些站点（例如 SharePoint 站点）在 Web 配置中已经具有 SHA1 机器密钥，因此请检查是否已经存在算法，如果有删除它并添加以上内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-22T14:42:24.733

我们已经尝试过您建议的 machineKey。它对一些 Web 应用程序（与 配对时）有帮助，这很棒，但不是*全部*，这令人沮丧。

我错过了一些东西，但如果我能说出什么，我会很高兴。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-29T03:04:22.083

就我所见，viewstate machine key 和 compilation="debug" 配置问题是导致此问题的最常见原因。据我所知，在 .NET 2.0 中，用于视图状态验证/加密的 3DES 算法是唯一符合 FIPS 的算法。所以 SHA1、MD5 和 AES 选项在那里不起作用。

同样重要的是要意识到，如果代码中引用了任何不符合 FIPS 的算法，即使从未实际使用过/无法访问，也会导致 FIPS 合规性错误。例如，仅声明一个 MD5CryptoServiceProvider 变量而不实例化它会导致错误。这包括其他引用的 .NET 程序集，因此请确保没有引用的 dll 也可能使用不符合 fips 的算法。

这是一个方便的站点，列出了 .NET 中的所有 FIPS 和非 FIPS 算法 [http://blog.aggregatedintelligence.com/2007/10/fips-validated-cryptographic-algorithms.html](http://blog.aggregatedintelligence.com/2007/10/fips-validated-cryptographic-algorithms.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-29T11:14:09.493

根据[这个答案](https://social.msdn.microsoft.com/Forums/vstudio/en-US/b1c59dcd-9a51-408d-bdaf-9a625c3cf503/what-are-all-the-encryption-algorithms-those-supported-by-fips-1402-standard-in-net-framework-40) ，对于 Cryptography 命名空间中的算法，**没有任何托管实现是 FIPS 认证的。**

使用**非托管**实现应该可以解决您的问题：Rijnaed 是 AES 的前身 - 也许尝试[**AesCng**](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.aescng?view=netframework-4.7.2)？

非托管实现的缺点是它们可能[与旧版本的 windows 不兼容](http://mytenpennies.wikidot.com/blog:cryptography-in-dot-net)。

# .net - 您是否知道可以在 .net 中用于在服务器和多个客户端之间共享数据的良好缓存技术？

> ID：371537
> 
> 赞同：0
> 
> 时间：2008-12-16T14:47:11.970
> 
> 标签：.net, caching, client-server

我正在尝试解决以下问题：

1.  我有一个服务器端 .net 应用程序，其中包含 PONO 字典：缓存。

2.  我有许多客户端 .net 用户界面可以查询其中一些 PONO，方法是使用密钥或要求服务器仅过滤具有特定属性值的 PONO：客户端

*编辑：*客户端是 C# 胖客户端，而不是 Web 应用程序。所以在客户端和服务器之间使用任何通道类型都是可以的。

3.  当然，一些客户端可以更新 PONO 并将其发送回服务器。然后我希望服务器足够聪明，以通知所有已经持有此 PONO 的客户端具有新值，甚至将 PONO 发送给所有具有与新 PONO 值匹配的过滤器的客户端。

4.  我并不真正关心交易方面。就我而言，最后一个发言的总是正确的。

我认为这样的功能看起来很通用，所以它一定已经存在于某个地方。有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T16:17:59.777

您是否查看过 Microsoft 的*“项目代码名称速度” ？*真正可扩展且易于使用。

*   [http://msdn.microsoft.com/en-us/data/cc655792.aspx](http://msdn.microsoft.com/en-us/data/cc655792.aspx)
*   [http://blogs.msdn.com/velocity/](http://blogs.msdn.com/velocity/)
*   [http://www.microsoft.com/downloads/details.aspx?FamilyId=B24C3708-EEFF-4055-A867-19B5851E7CD2&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=B24C3708-EEFF-4055-A867-19B5851E7CD2&displaylang=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T16:22:04.540

你看过微软的 WCF 技术吗？我们正在构建一个与您的项目执行类似功能的系统，并且运行良好。

以下是我用作路线图的 2 个 WCF 示例，可能对您有所帮助：

*   [http://www.codeproject.com/KB/WCF/WCFWPFChat.aspx](http://www.codeproject.com/KB/WCF/WCFWPFChat.aspx)
*   [http://www.codeproject.com/KB/WCF/WCF_Duplex_UI_Threads.aspx](http://www.codeproject.com/KB/WCF/WCF_Duplex_UI_Threads.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T15:32:03.770

您正在寻找推送技术。我会研究[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)的使用。例如，试试 Comet 的[Dojo](http://weblogs.java.net/blog/caroljmcdonald/archive/2008/10/dojo_rest_comet_1.html)实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T16:09:08.890

您肯定在寻找推送模型。不幸的是，ASP.net 是一种请求/响应机制。客户端必须请求服务器响应。从基于 Web 的层处理此类事务非常困难。OrbMan 是正确的，您正在寻找的是 Comet 风格的实现。

我只是说，如果没有像 silverlight 这样的活跃客户端，这并不像听起来那么简单。

# java - 有什么好的安卓开发ORM工具吗？

> ID：371538
> 
> 赞同：290
> 
> 时间：2008-12-16T14:47:26.417
> 
> 标签：java, android, sqlite, orm, crud

任何在 Android ('gPhone') 上工作的人都有或知道我可以找到一个好的 ORM 工具的地方吗？代码是用 Java 编写的，数据库是 SQLite。我想找到的是一个给定对象定义的工具，可以自动生成表和 CRUD 函数（那会很棒），或者，除此之外，一个可以接受表定义、对象定义的工具，并自动生成 CRUD 功能。问题在于，所有这些都必须发生在 Android 框架内，该框架对数据库访问的工作方式有自己的约定。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2010-06-25T18:04:05.080

以为我会在这里添加关于我的[ORMLite 包](http://ormlite.com/)的 0.02 美元。

它是 Hibernate 的轻量级替代品，并使用原生 Android OS 数据库调用来支持 Android 上的 SQLite。它还支持在其他架构上使用 JDBC 的许多其他数据库类型。我们有一个用于 ORMLite 问题的[Android 邮件列表。](https://groups.google.com/forum/?fromgroups#!forum/ormlite-android)

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-02-18T17:29:03.427

这个问题不会过时，但建议的框架可以。因此，这里首先列出我认为在此类框架中比较重要的内容：

*   是否有 Maven 或 Gradle 工件？（显然，这取决于您使用 maven 还是 gradle，这是一个很大的优势）
*   代码是否可以轻松访问，包括对提交的快速概览以判断活动？（在这件事上，托管在 github 上的代码对我来说绝对是一个优势）
*   发布管理：是否有发布/发布标签和工件？（有些托管在 github 上，需要 git clone 或提供主 tarball 以供下载 - 对我来说，即使没有在 README 中设置和解决发布标签，也是一个很大的减号）
*   由于尺寸很重要，我在容易获得的地方提出了一些提示（我没有下载任何东西，所以从那些不提供发布工件的项目中，没有尺寸）

这是一个框架列表，上面有关于上述几点的注释。我查找了一些更像[aBatis](http://sonixlabs.com/abatis/)和 Hadi，但我只添加了 2011 年之后有一些活动的那些。

*   [http://ormlite.com](http://ormlite.com) , Maven artifact, 52 kB, SVN, the website is... 困难但似乎有很多例子，根据[http://ormlite.com/changelog.txt](http://ormlite.com/changelog.txt)最后一个版本是2013 年 4.48， [https://github.com/j256/ormlite-core](https://github.com/j256/ormlite-core)（发布标签），最后一次活动 2015 年 3 月
*   [http://greendao-orm.com](http://greendao-orm.com)，良好的维护，[Maven神器](http://greendao-orm.com/2013/02/25/greendao-1-3-release/)，重点：性能快，体积小，RAM消耗少。Github：[https](https://github.com/greenrobot/greenDAO/) ://github.com/greenrobot/greenDAO/ （发布标签，> 2300 颗星），最后一次活动 2014 年 11 月
*   [https://github.com/roscopeco/ormdroid](https://github.com/roscopeco/ormdroid)，小尺寸，最后一次活动 2014 年 8 月
*   [http://www.activeandroid.com](http://www.activeandroid.com) , [https://github.com/pardom/ActiveAndroid](https://github.com/pardom/ActiveAndroid) (> 2300 颗星), 良好的维护, 社区, 没有发布标签 (下载点到主 tarball), Maven 工件, 上次活动 2014 年 10 月
*   [http://droidparts.org](http://droidparts.org) , [https://github.com/yanchenko/droidparts](https://github.com/yanchenko/droidparts) (release tags, > 600 stars), 还有依赖注入, Maven artifact, 积极维护
*   [http://www.androrm.com](http://www.androrm.com) , [https://github.com/androrm/androrm](https://github.com/androrm/androrm) (发布标签), 最后一次活动 2014 年 1 月 2 日 (github)
*   [https://github.com/emilsjolander/sprinkles](https://github.com/emilsjolander/sprinkles)（发布标签，> 600 颗星），2014 年 5 月的最后一次活动，Maven 工件（感谢@AndroidGecko）
*   [http://realm.io](http://realm.io) , [https://github.com/realm/realm-java](https://github.com/realm/realm-java)不仅替换了 ORM 还替换了 SQLite，也适用于 iOS（发布标签，> 1600 颗星），积极维护，拥有 Maven 存储库

我没有尝试过任何这些，但也许我可以通过列出现在活跃的项目来为当前的读者节省一点时间。如果您知道其他满足上述某些要点并且（在一段时间内）正在进行一些重大开发的项目，请添加评论。

编辑（2013 年 11 月）：将列表更新为项目的当前状态。其中一些已将发布标签添加到其 github 存储库以及 Maven/Gradle 支持。干得好！

编辑（2015 年 4 月）：更新列表，添加 Sprinkles（根据 @AndroidGecko 的评论）和 Realm.io。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2011-10-24T09:11:24.353

如果性能和代码大小很重要，请查看[greenDAO](http://greendao-orm.com/)。我是它的作者，我创建另一个 ORM 的动机是避免在热点中反射。事实证明，greenDAO 可以比 ORMLite 快 4 倍。查看[功能页面](http://greendao-orm.com/features/)了解详情。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-02-17T21:10:31.413

我不知道您所要求的任何东西，但是如果您的架构要求灵活，您可能会发现 SQLite 的替代方案很有用。可能值得一试*db4o*：

*   [安卓 db4o](http://www.db4o.com/android/)
*   [代码比较示例](http://developer.db4o.com/blogs/product_news/archive/2007/11/27/android-db4o-or-sqlite.aspx)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2010-05-03T21:00:00.340

[ActiveAndroid](http://www.activeandroid.com) ~~（20 美元）~~看起来可能正是您所需要的。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-10-20T12:46:22.263

我喜欢 ActiveAndroid。它似乎是专门为Android编写的。这对我来说是一个加分项。

我有一些 Ruby on Rails 经验，如果你喜欢 Rails 的 ActiveRecord 方式，你可以很快开始使用这个库。

[https://www.activeandroid.com/](https://www.activeandroid.com/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-07-15T21:40:36.383

[https://github.com/ahmetalpbalkan/orman](https://github.com/ahmetalpbalkan/orman)

Orman 框架可能会对您有所帮助。它专为此而设计，非常小巧实用。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2010-09-09T16:00:56.553

我也在寻找Android上的ORM。我测试了[ActiveAndroid](http://www.activeandroid.com/)、[NeoDatis](http://neodatis.wikidot.com/)和[db4o](http://www.db4o.com/android/)，我认为我会使用最后两个中的一个。

NeoDatis 和 db4o 非常相似，所以我想要一些建议来选择最好的。有人在他的项目中使用其中一个吗？我将它用于免费和付费应用程序，但似乎两者对 Android 没有任何许可限制。

[这里](http://sourceforge.net/projects/neodatis-odb/files/NeoDatis%20ODB%20Performance/NeoDatis%201.9/PolePosition_NeoDatis-1.9.pdf/download)有一个基准，似乎说 NeoDatis 比 db4o 快，但我不知道我们是否可以以此为基础。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-11-18T05:57:23.727

又一个新人：android-active-record。[它是由 SQLite http://code.google.com/p/android-active-record/](http://code.google.com/p/android-active-record/)支持的 Android 的非常轻量级且易于使用的持久性框架

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-02-15T17:52:27.243

[Aptana 的ActiveRecordJS](http://www.activerecordjs.org)是一个应该在 gPhone 上运行的 Javascript ORM。它旨在与 Jaxer 和 Gears 一起使用。当您使用 Jaxer 适配器时，您可以连接到 SQLLite。

更新：我想我没有说清楚，但 ActiveRecordJS 是一个运行客户端的 ORM，这可能对你在 gPhone 上是一个优势。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-09-08T07:43:16.877

[http://hadi.sourceforge.net](http://hadi.sourceforge.net)

这个工具非常简单易用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-11-30T21:10:16.870

Even though this is an old post, the topic is still relevant. Hence, I want to share an interesting article and nice approach to solving most of the issues mentioned in the question:

[http://blog.codecentric.de/en/2011/04/android-persistence-accelerated-small-inhouse-orm/](http://blog.codecentric.de/en/2011/04/android-persistence-accelerated-small-inhouse-orm/)

Hope anyone finds this as useful as myself!

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-02-10T18:07:57.613

我已经为 Android 开发了自己的 JPA ORM 实现。它还没有完全完成功能，但是您可以使用@Entity、@Id、@Column 注释对类进行注释，并且您可以获得可以从 SQLite 数据库存储和检索的 JPA 实体。在我将它发布给公众之前，它需要更多的功能和清理，但如果有足够的兴趣，它可能会加速我的工作。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-05-19T09:52:25.727

我自己的[DroidParts /http://droidparts.org/](http://droidparts.org)刚刚达到 v0.5。这是一个 DI/ORM 库等等。
文档不多，但包含一个示例应用程序。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-09-13T14:54:02.890

对 db4o (v. 8) 有负面体验：索引无法正常工作（异常等）。因此，当对象结构中有对象时，我没有设法避免在外部表中创建重复项。[我的问题](https://stackoverflow.com/questions/7402127/restrict-child-duplicates-on-creating-object-in-db4o)中有更详细的解释。希望有一天会更好。

# sql - 嵌套记录是sql server

> ID：371546
> 
> 赞同：0
> 
> 时间：2008-12-16T14:49:24.480
> 
> 标签：sql, oop

```
select Table1.colID, Table1.colName, 
(select * from Table2 where Table2.colID = Table1.colID) as NestedRows
from Table1 
```

上面的查询给你这个错误：子查询返回超过 1 个值。当子查询遵循 =、!=、<、<=、>、>= 或使用子查询时，这是不允许的.....

谁能解释为什么存在这种限制？

我有这样的想法，这种多维查询对于直接从数据库中使用 1 个查询构建 OO 对象会很好

编辑：

这个问题很理论。为了解决这个实际问题，我将使用连接或简单地完成 2 个查询，但我想知道是否有什么阻止您将列作为表类型返回（在 sql server 2008 中，您可以创建表类型）。

假设你在代码中有相应的类，想想 Linq2Sql

```
public class Table1
{
  public int colID,
  public string colName,
  public List<Table2> table2s;
} 
```

我希望能够用 1 个查询直接填充此类的实例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T15:16:12.693

看起来好像您想要从 Table2 为 table1 中的每一行返回一个记录集（多列和多行）。如果这是正确的，也许您可​​以将数据作为 XML 从数据库返回。像这样的东西...

```
select Table1.colID, Table1.colName, Table2.*
from   Table1
       Inner Join Table2
         On Table1.ColId = Table2.ColId
Order By Table1.ColId
For XML Auto 
```

然后，对于 Table1 中的每一行，您将在 XML 中为 table2 数据获取多个子节点。

从数据库返回 XML 以及在前端加载数据结构可能会对性能产生影响。我不一定建议这是最好的方法，但它可能值得研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T15:00:04.893

因为 select 子句中的子查询必须“插入”到外部查询结果集中每一行的列值中。您不能将一组值放入结果集的单个单元格（单行的单列）中。

您需要使用内部联接。连接表返回的多行将作为最终结果集中的多行输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T14:59:02.713

您最好在两个表之间使用 INNER JOIN 并简单地从每个表中选择您想要的行。

```
SELECT tab1.colID, tab1.colName, tab2.Column1, tab2.column2
FROM dbo.Table1 AS tab1
    INNER JOIN dbo.Table2 AS tab2
        ON tab1.colID = tab2.colID 
```

但是，请记住，table1 中的数据将针对 table2 中的每个匹配记录重复。虽然我相信我发布的查询会以您正在寻找的形式获得数据，但我认为这不是查询数据库的最佳方法。我要么执行单独的查询，要么将单独的查询放入存储过程并返回多个结果集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T15:01:45.607

我认为您正在寻找的查询可能是：

```
select Table1.colID, Table1.colName,Table2.*
from Table1 inner join Table2 ON Table1.colID = Table2.colID 
```

在 WHERE 子句中更通常使用子查询（至少由我使用）。

# .net - Visual Studio 挂起构建

> ID：371551
> 
> 赞同：7
> 
> 时间：2008-12-16T14:51:31.493
> 
> 标签：.net, visual-studio

当我尝试在 Visual Studio 2008 中构建我的项目时，网站将不再构建，它们挂在这个阶段：

```
------ Build started: Project: C:\...\Web\, Configuration: Debug Any CPU ------
Validating Web Site
Building directory '/Web/Admin/Secure/'.
Building directory '/Web/Admin/'.
Building directory '/Web/Students/'.
Building directory '/Web/'.

Validation Complete 
```

而且我必须取消它，因为即使离开一个小时后它也没有完成。有人对发生的事情有任何想法吗？类库构建良好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-16T15:37:58.077

尝试清除所有临时文件

```
C:\WINDOWS\Microsoft.NET\Framework\<Framework Version>\Temporary ASP.NET Files 
```

这在过去为我解决了类似的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-16T15:49:24.077

如果您拥有未正确许可\注册的第 3 方控件，这也可能经常发生。它可能正在尝试显示没有使其成为焦点的警告\注册 UI。我们在构建服务器上遇到过这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-16T15:41:01.927

我过去也遇到过这个问题。我能够通过构建 -> 清洁解决方案来纠正它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-03-04T20:35:39.683

重命名或删除 SUO 文件似乎可以解决此问题。我的 SUO 文件是 8mb，一旦我重命名并打开我的项目备份，它运行没有任何崩溃。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-16T15:00:20.743

我以前遇到过类似的问题。

我通过制作一个新的解决方案文件并再次添加项目来修复它——这可能值得一试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-06-02T11:40:55.907

我基本上按照删除`.suo`文件的说明进行操作。但是，在较新版本的 VS 中，该`.suo`文件现在位于`.vs`根解决方案文件夹级别的隐藏文件夹中。我关闭了 Visual Studio，然后将`.vs`文件夹重命名为`old.vs.old`VS，然后重新打开。然后解决方案成功构建，并且由于某种原因，它的构建速度也比最近快得多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-07-29T13:04:03.677

如果您的 .suo 文件太大，您可以尝试删除/移动/重命名它。VS 将在您的下一次构建中创建一个新版本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-22T22:53:38.153

我知道这是一个旧线程，但我刚刚在 Visual Studio Community 2013（更新 5）中遇到了这个问题。以为我会分享对我有用的东西。

我清除了项目属性页面中“启用代码分析”的复选框，单击“确定”，单击“全部保存”。在此之后以正常速度完成构建。

代码分析似乎在构建目录阶段挂起。

希望这对某人有帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-07-22T19:41:49.413

我只是有同样的问题。结果是我创建的用户控件是透明的。在我弄清楚它的时候，我不小心让它从控件的 OnPaint 方法中使表单无效，从而导致绘画的无限循环。如果任何开放式设计器中存在该控件，VS 甚至都不会开始构建，尽管它会锁定所有内容，就好像它正在构建一样。我无法使用固定控件更新设计器，因为无法构建控件。

我的回答：去掉绘画循环，关闭设计师，重建。

哦，设计师……

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-02-28T00:36:56.340

如果您是 SharePoint 开发人员，并且已安装 SPDisposeCheck，请确保关闭“生成后执行”。

![在此处输入图像描述](https://i.stack.imgur.com/rpprt.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-23T05:34:15.163

重新启动系统。它帮助了我。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-02-20T21:21:30.877

今天遇到类似的建筑问题。VS 2017。在对新项目进行远程调试时进行了一些更改。突然，下次我建造时，它会在建造时挂起。VS 没有被锁定，所以我总是可以停止它，但我不知道发生了什么经过一番摸索后，我发现我的构建后批处理脚本在尝试将构建的文件同步到远程机器时卡住了调试，因为其中一个文件正在远程计算机上使用。Robocopy 陷入了无休止的等待循环。令我沮丧的是，在我停止构建过程后查看 VS 输出窗口后，我才发现这一点。构建后的错误在构建时没有显示，所以我花了一点时间才看到输出窗口项目。

我还尝试了此页面上的许多其他解决方案，但没有运气。希望这可以帮助某人。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-08-14T18:20:54.090

我还从 cmd 提示符（以管理员身份运行）执行了这个命令：

```
regsvr32 "C:\Program Files (x86)\Internet Explorer\ieproxy.dll" 
```

# php - 如何跳过数组循环中的第一个键？

> ID：371554
> 
> 赞同：54
> 
> 时间：2008-12-16T14:52:25.143
> 
> 标签：php, arrays

我有以下代码：

```
if ($_POST['submit'] == "Next") {
    foreach($_POST['info'] as $key => $value) {
        echo $value;
    }
} 
```

如何让 foreach 函数从数组中的第二个键开始？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2008-12-16T14:56:47.053

对于相当小的数组，使用[array_slice](http://fr.php.net/manual/en/function.array-slice.php)创建第二个：

```
foreach(array_slice($_POST['info'],1) as $key=>$value)
{
    echo $value;
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-12-16T14:55:35.370

```
foreach(array_slice($_POST['info'], 1) as $key=>$value) {
    echo $value;
} 
```

或者，如果您不想复制数组，您可以这样做：

```
$isFirst = true;
foreach($_POST['info'] as $key=>$value) {
    if ($isFirst) {
        $isFirst = false;
        continue;
    }   
    echo $value;
} 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2011-03-30T09:20:37.953

难道你不能取消数组...

因此，如果我有一个不想要第一个实例的数组，我可以：

```
unset($array[0]); 
```

这将从数组中删除实例。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-16T18:09:38.117

如果您使用的是普通数组，我会说使用类似的东西

`foreach (array_slice($ome_array, 1) as $k => $v {...`

但是，由于您正在查看用户请求，因此您对返回参数的顺序没有任何真正的保证——某些浏览器/代理可能会改变其行为，或者您可能只是决定在未来。无论哪种方式，忽略数组的顺序并将 POST 值视为无序哈希映射对您来说都是最有利的，您有两个选择：

*   复制数组和`unset`要忽略的键
*   循环遍历整个数组，并`continue`在看到您希望忽略的键时

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-16T14:54:19.790

在循环中：

```
if ($key == 0) //or whatever
   continue; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-16T08:43:05.580

另一种方法是使用数组指针：

```
reset($_POST['info']); //set pointer to zero
while ($value=next($_POST['info'])  //ponter+1, return value
{
  echo key($_POST['info']).":".$value."\n";
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-18T00:48:37.077

如果您愿意丢弃第一个元素，则可以使用`array_shift()`. 然而，这在一个巨大的阵列上很慢。更快的操作将是

```
reset($a);
unset(key($a)); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-17T21:52:14.953

在一个包含 1000 个元素的数组上，差异非常小。

**测试：**

```
<?php
function slice($a)
{
    foreach(array_slice($a, 1) as $key)
    {

    }

    return true;
}

function skip($a)
{
    $first = false;

    foreach($a as $key)
    {
        if($first)
        {
            $first = false;
            continue;
        }
    }

    return true;
}

$array = array_fill(0, 1000, 'test');

$t1 = time() + microtime(true);

for ($i = 0; $i < 1000; $i++)
{
    slice($array);
}

var_dump((time() + microtime(true)) - $t1);

echo '<hr />';

$t2 = time() + microtime(true);

for ($i = 0; $i < 1000; $i++)
{
    skip($array);
}

var_dump((time() + microtime(true)) - $t2);
?> 
```

**输出：**

浮动（0.23605012893677）

浮动（0.24102783203125）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-22T11:08:23.903

我网站上的工作代码，用于跳过第一个结果然后继续。

```
<?php 

$counter = 0;

foreach ($categoriest as $category) { if ($counter++ == 0) continue; ?> 
```

如果您需要，它也在 tpl 文件中的 opencart 上工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-16T17:59:33.190

```
 foreach($_POST['info'] as $key=>$value) {
    if ($key == 0) { //or what ever the first key you're using is
        continue;
    }  else { 
        echo $value;
    }
} 

```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-17T06:37:03.083

如果您以不同的方式构建表单

```
 <input type='text' name='quiz[first]' value=""/>
  <input type='text' name='quiz[second]' value=""/> 
```

...然后在你的 PHP 中

```
if( isset($_POST['quiz']) AND 
    is_array($_POST['quiz'])) {

    //...and we'll skip $_POST['quiz']['first'] 
    foreach($_POST['quiz'] as $key => $val){
      if($key == "first") continue;
      print $val; 
    }
} 
```

...您现在可以遍历该特定结构并正常访问休息

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-05-20T03:55:35.993

这样的事情怎么样？`key()`使用and读取第一个键和值`current()`，然后~~`array_shift()`从数组中取出前面的元素~~（编辑：不要使用`array_shift()`，它会重新编号数组中的任何数字索引，您并不总是想要！）。

```
    <?php

    $arr = 数组（

      '一个' => "一个!!",
      '两个' => "两个！！",
      '三' => "树",
      4 => "第四元素",
      99 =>“我们在这里跳过了一些..”

    ) ;

    $firstKey = key($arr);
    $firstVal = 当前（$arr）；

    回声（“好的，第一个值是 $firstKey, $firstVal" ) ;
    ####数组移位（$arr）；#'dequeue' 前端元素＃ 坏的！重新编号！
    未设置（$arr[$firstKey]）；＃ 更好的！

    回声（“现在对于其余的人" ) ;
    foreach( $arr as $key=>$val )
    {
      回声（“$key => $val" ) ;
    }

    ?>

```

# mysql - 不安全/错误查询的编译时发现模式

> ID：371555
> 
> 赞同：1
> 
> 时间：2008-12-16T14:53:01.210
> 
> 标签：mysql

我的团队正在开发一个大型 java 应用程序，它广泛地查询 MySQL 数据库（在不同的类和模块中）。我想知道是否有一种模式可以让我在编译时收到通知，如果有查询引用了错误的表结构（例如，如果我在表上删除或添加字段并且查询字符串引用它），以防止运行时错误。这也适用于 JOIN 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-10T13:56:56.647

[Querydsl](http://source.mysema.com/display/querydsl)类似于 LiquidForm 并且支持 JPA / Hibernate 和基于 SQL 的后端。

对于基于 SQL 的版本，我们目前支持 MySQL（5.? 测试）、Oracle（10g 测试）和 HSQLDB。

简而言之，这样的查询

```
select count(*) from test where name = null 
```

会成为

```
long count = query.from(test).where(test.name.isnull()).count(); 
```

Querydsl SQL 使用代码生成将 SQL 模式反映到 Java 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T15:12:56.630

我想说简单的答案是“不”。更完整的答案是“是的，在某种程度上”，这取决于您是否愿意跳过篮球。

除非您有数据库模式的 java 表示，否则如果您的查询错误（可以生成这些类），您将永远无法获得编译时通知。此外，您必须使用这些类来构建查询，因此必须放弃您今天使用的方法（查询字符串）。为了能够使用 java 类来构建您的查询，您还必须使用技巧。[液体形式](http://code.google.com/p/liquidform/)使用所需的技巧来构建 JPA 查询，但我还没有看到用于构建 SQL 查询的类似库（LiquidForm 是新的并且非常出色）。您实际上必须自己构建一个类似的库。因此，如您所见，在构造 SQL 时获得编译时警告很困难，但并非不可能（几乎不可能）。但是，即使您应该能够创建我建议的内容，您的架构的 Java 表示也必须在架构更改后立即更新，因此 Java 类的生成必须内置到您的 IDE 或构建工具中。

我建议您宁愿进行良好的单元测试，当您的查询由于架构更改而变得非法时会注意到。这是实现您想要的最常见的方法。此外，如果您决定“升级”到 JPA，您可以使用 LiquidForm 来获得您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T16:35:12.080

有一个名为 DODS（数据对象设计工作室）的开源工具可以做你想做的事。DODS 工具最初是 Enhydra Java 应用程序服务器项目的一部分，并且自从支持该项目的公司在 2002 年停止运营以来，DODS 一直在 ObjectWeb 上托管和维护。无论如何，它是开源的（LGPL）。

[http://forge.objectweb.org/projects/dods](http://forge.objectweb.org/projects/dods)

这个概念是您在 XML 文件中描述您的模式，并且 DODS 生成 Java POJO 类，您可以使用这些类查询和操作数据库表。当然，每次更改架构时，都需要再次运行 DODS 以重新生成 ORM 类，并针对它们重新编译应用程序。

但结果是，如果表或列消失，并且您的应用正在查询不再存在的数据库元数据，您确实会收到编译时错误，因为您的代码现在正在调用不再存在的相应类或方法。

# ironruby - Ironruby IDE

> ID：371569
> 
> 赞同：6
> 
> 时间：2008-12-16T14:57:48.627
> 
> 标签：ironruby

如果有的话，人们使用哪个 IDE 来开发 Ironruby？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-08-11T14:01:05.850

如果你正在寻找一个集成的 Visual Studio 编辑器，带有智能感知等，微软还没有任何计划（根据 John Lam 的这篇文章 -> [http://www.infoq.com/articles/state-of-ironruby](http://www.infoq.com/articles/state-of-ironruby)）。[但是在http://www.sapphiresteel.com/Ruby-In-Steel-For-IronRuby](http://www.sapphiresteel.com/Ruby-In-Steel-For-IronRuby)有一个运行良好的集成编辑器 - SappireSteel 。

如果您只想在 VS 中进行编辑而不关心智能感知等，您可以尝试在 VS 中设置一个外部工具并调用 ir.exe ( [http://msdn.microsoft.com/en-us /图书馆/68c8335t%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/68c8335t%28VS.80%29.aspx) )

有许多支持 ruby​​ 突出显示的编辑器，您也可以尝试一下，但没有一个（我认为）支持 .NET 框架的类似智能感知的支持。Scite ( [http://www.scintilla.org/SciTE.html](http://www.scintilla.org/SciTE.html) ) 非常受欢迎，Scott Hanselman 写了一篇关于 Notepad2 中的 Ruby 支持/突出显示 ( [http://www.hanselman.com/blog/NewNotepad2WithRubySyntaxHighlighting.aspx](http://www.hanselman.com/blog/NewNotepad2WithRubySyntaxHighlighting.aspx) ) 的博客。在 Codeplex 上，您可以找到一个名为 IronEdit ( [http://www.codeplex.com/IronEditor](http://www.codeplex.com/IronEditor) ) 的工具，我自己还没有尝试过。

我运行了一段时间的 RubyMine ( [http://www.jetbrains.com/ruby/index.html](http://www.jetbrains.com/ruby/index.html) )，这似乎是一个非常好的 Ruby IDE（需要花钱），但对 IronRuby 没有任何特定的支持。我希望 JetBrains 最终会发布一些可以插入 Visual Studio 的东西......

我个人*认为*蓝宝石最终会想出一些非常好的东西。我希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-29T05:44:08.903

我使用[Vim](http://www.vim.org)作为我的 IDE，并带有一些我[前一段时间在博客中提到](http://www.iunknown.com/2007/06/vibrant_ink_vis.html)的自定义设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-16T15:04:32.997

视觉工作室？

根据[IronRuby 网站](http://www.ironruby.net/)，可以使用 Visual Studio C# Express（反过来，我假设任何商业版本的 Visual Studio 2005+）。

从 IronyRuby.net 主页：

> 今天，您必须从 Rubyforge 上的 IronRuby Subversion 存储库中查看源代码。您将需要一个 Subversion 客户端：我们推荐 TortoiseSVN。要从命令行构建源代码，您还必须已经在您的计算机上安装了 Ruby：我们推荐使用 Ruby 一键式安装程序。您还可以使用 Visual Studio 构建源代码；如果您还没有副本，可以下载 Visual C# Express 2008 的免费副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T15:08:43.347

[Sapphire Steel](http://www.sapphiresteel.com/)的[Ruby in Steel](http://www.sapphiresteel.com/Ruby-In-Steel-Developer-Overview)构建在[Visual Studio Shell（集成模式）](http://msdn.microsoft.com/en-us/vsx2008/products/bb933751.aspx)之上，如果您已经安装了它，它将与 Visual Studio 2008 合并，或者如果您没有安装 Visual Studio，则只是一个独立的安装。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T15:33:22.127

另外，对你没有用，但微软将在未来某个时候发布**IronRuby Studio**（和**IronPython Studio ）。**不过，我在网上找不到太多关于这些的信息——几周前 Teched Europe 的一位演讲者提到了它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-26T05:21:47.687

您可能对 IronEditor 感兴趣。类似于 SciTE。在[http://www.codeplex.com/IronEditor获取](http://www.codeplex.com/IronEditor)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-12T15:08:38.507

Sapphire 现在有一个专门针对 IronRuby 的版本。此外，现在不仅 alpha 免费，而且他们声称生产也将免费。

编辑：忘记包括[链接](http://www.sapphiresteel.com/IronRuby-IDE-The-Visual-Form)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-05-24T23:51:02.767

IronRuby 在 VS2010 中的集成可以在这里找到：http: [//ironruby.net/tools/](http://ironruby.net/tools/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-08-01T11:27:38.883

IronRuby 工具是一个很好的起点，但我认为执行 Ruby 或更详细的 Rails 的最佳 IDE 是 VIM。通过使用诸如 rails.vim 之类的插件，您可以跨边界保留所有快捷方式和脚本，例如 Windows / Linux 或 IronRubyOnRails / RubyOnRails ...

JetBrains 为 RubyMine 提供了一个很棒的 IDE。我记得我读过一篇关于如何配置 RubyMine 以支持 IronRuby 的文章。

但正如已经提到的，用于 VS2010 的 IronRuby 工具是一个不错的起点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-11-01T13:18:41.763

IronRuby 的当前版本现在包含[Visual Studio 的 Ruby 工具](http://www.ironruby.net/tools/)，它与 IR 本身一起安装。这适用于 1.1 及更高版本。

# orm - 实体和计算属性

> ID：371570
> 
> 赞同：1
> 
> 时间：2008-12-16T14:57:49.907
> 
> 标签：orm, domain-driven-design

实施以下内容的最佳做法是什么：

1.  我们有一个班级`Order`并 `OrderItem`作为亲子。
2.  类 `OrderItem`提供属性`Cost`
3.  在 OrdersList 表单上，我们必须看到 `MaxCost`column = max(cost) from `Items`collection

我在这里只找到了一个不会破坏 DDD 概念的有用解决方案：向`MaxCost`类添加常用属性`Order`并在每次项目列表更新时更新它。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T15:31:30.820

可能，但你必须问自己“为什么？”。从域的角度来看，如果您反复重新计算它，它是否“关心”？还是您让程序员领域潜入您的问题领域？

另一件事 --- 考虑将“物品的最大成本”作为 OrderItems 集合的一部分，并隐藏您如何从系统的其余部分获取它。

# batch-file - 删除是删除整个目录而不是单个文件

> ID：371571
> 
> 赞同：4
> 
> 时间：2008-12-16T14:57:52.107
> 
> 标签：batch-file, cmd

我正在运行一个由 vbscript 生成的简单批处理文件来删除单个文件，但是当我执行它时，它正在删除整个子目录。有人对此有任何想法吗？下面是批处理文件。

```
rem 2008-12-15D:\DP-Production\Administrative\BUSINESS\FileLink
del D:\DP-Production\Administrative\BUSINESS\FileLink\.-1003067260  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\.-997208891  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\.-998224323  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._proofing.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Sample1.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut (2) to PDFProofs.lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut to Art.lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut to Filelink on 'Admin-srv' (I).lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut to LeadGen program.lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut to Mail.lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut to Maintained on 'Data Pro (Pmi41)' (H).lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Shortcut to Openjobs on 'SRV-srv02' (J).lnk  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._SHRP.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._skyphone2.bmp  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Smokey Bones Solo_Mailer.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._steakhouseback.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._steakhousefront.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Summercamp.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._taxsampleback.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._taxsamplefront.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Temporary Items  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Beta.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Trurdy.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Trash  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._trishwenrick.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._Tulane.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._valpak_price.mdb  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\._WasteM.jpg  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\weekly_deletions.vbs  /q/f
rem 2008-12-15D:\DP-Production\Administrative\BUSINESS\FileLink\Art
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._+.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._0805_NJGolf 12-44-24.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._806857.eps  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._ADPLogo.JPG  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._FranchiseLtr_MM.doc  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._REPAIR-SMA.doc  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._Safety.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\._Summer 2008 Donor V1.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Art\desktop.ini  /q/f
rem 2008-12-15D:\DP-Production\Administrative\BUSINESS\FileLink\Mail
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\ BOBBSS    LIST COUNT - DRIBOX 2008-06 ejs.msg  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\#7608 GHA MD Mailing.ZIP  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\2008 Adel List.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\2008 mailing-BREAK OUT.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\2008 Password Letter to GM (R).doc  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\2008 RL Mailing.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\2008DLRCRICKPage1.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\805026.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\805442_Breakfast.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\806330_Letter.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\806778.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\806785 JONES WORLD VIEW DHL.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\807364-807117.csv  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8522435_INTDELIVERY.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8674252_INTDELIVERY.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8674856_INTDELIVERY.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8675351_INTDELIVERY.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8694521_INTDELIVERY.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8720608_INTDELIVERY.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8cletoy0903_1.csv  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8roncar0657.csv  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\8vanhyu0531.zip  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\addressfile0605.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\All Active Employee Address 070808.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\APPA_Mailing_List-FINAL-XLS4.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\Aug 08 Coupon Data.txt  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\BMA.pdf  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\BODYCOPY.doc  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\BOISE JUNE SALON MASTER LIST rev 6-9-08 (6).xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\Broward Committe REVISED.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\CAW Tournament Letter (2).doc  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\detroit lasalle delete list.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\CHIROPRACTOR 300.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\CMTFV08204macroed.bak  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\Comm Ltr#2.doc  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\Contact Directory.rtf-MA  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\Copy of Jones Newsletter 0708.xls  /q/f
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\Copy of MD L-Listing 07_11_08.xls  /q/f 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-16T15:00:52.990

将文件名放在双引号之间...（例如“D:\My Program\test.exe”）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-16T15:05:21.623

我假设这是因为这条线：

```
del D:\DP-Production\Administrative\BUSINESS\FileLink\Mail\ BOBBSS    LIST COUNT - DRIBOX 2008-06 ejs.msg  /q/ 
```

注意那里的空格，上面写着：删除该文件夹中的所有内容，然后删除名为 BOBBSS 的文件，然后删除名为 LIST 的文件，然后是名为 COUNT 的文件，然后……嗯，错误，然后是名为 DRIBOX 的文件，等等。

[按照文森特范登伯格](https://stackoverflow.com/users/39259/vincent-van-den-berghe)所说的做，在文件名周围使用“。

# sharepoint - 如何更改共享点工作流任务状态？

> ID：371572
> 
> 赞同：4
> 
> 时间：2008-12-16T14:58:06.503
> 
> 标签：sharepoint, workflow

我是sharepoint编程的新手。我有以下代码：

```
SPWorkflowTask  task = some_getter();
task["Status"] = "Canceled";    
task.Update(); 
```

我得到了 SPException：

```
Microsoft.SharePoint.SPException: "This task is currently locked by a running workflow and cannot be edited."
at Microsoft.SharePoint.SPListItem.PrepareItemForUpdate(Guid newGuidOnAdd, Boolean bMigration, Boolean& bAdd, Boolean& bPublish, Object& objAttachmentNames, Object& objAttachmentContents, Int32& parentFolderId)
at Microsoft.SharePoint.SPListItem.UpdateInternal(Boolean bSystem, Boolean bPreserveItemVersion, Guid newGuidOnAdd, Boolean bMigration, Boolean bPublish, Boolean bNoVersion, Boolean bCheckOut, Boolean bCheckin, Boolean suppressAfterEvents)
at Microsoft.SharePoint.SPListItem.Update()
at mycode 
```

我相信我在做一些根本错误的事情。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-17T12:15:38.517

这是对此问题的专家评论：http: [//geek.hubkey.com/2007/09/locked-workflow.html](http://geek.hubkey.com/2007/09/locked-workflow.html)

而且，如果您已编辑任务列表中的列，此链接可能会有所帮助：[http ://social.msdn.microsoft.com/Forums/en-US/sharepointworkflow/thread/8ec834b6-5408-4079-bdfb-b88d341b36bf/](http://social.msdn.microsoft.com/Forums/en-US/sharepointworkflow/thread/8ec834b6-5408-4079-bdfb-b88d341b36bf/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T10:42:28.707

实际上，您可以使用 SPWorkflowTask.AlterTask(SPListItem task, Hashtable htData, bool fSynchronus) 方法修改任务扩展属性。此处的 Hashtable 包含扩展属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-12T22:56:42.333

在您的 SPWeb 对象中，设置 AllowUnsafeUpdates = true。错误会消失。完成后请记住将 AllowUnsafeUpdates 设置为 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-28T13:50:15.883

您需要将任务项的 SPBuiltInFieldId.WorkflowVersion 属性设置为 1 我在这里写过博客：http: [//blogs.technet.com/b/meamcs/archive/2011/03/26/workflow-error-this-task -当前由运行工作流锁定且无法编辑.aspx](http://blogs.technet.com/b/meamcs/archive/2011/03/26/workflow-error-this-task-is-currently-locked-by-a-running-workflow-and-cannot-be-edited.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-16T15:03:14.967

遗憾的是，您无法从工作流外部修改工作流任务。您必须以某种方式告诉工作流来修改任务。我不是 100% 确定最好的方法是什么，我也对答案很感兴趣 :)

# c# - 在 NHibernate 中删除多对多关联

> ID：371589
> 
> 赞同：3
> 
> 时间：2008-12-16T15:03:40.473
> 
> 标签：c#, nhibernate

我使用 NHibernate 建立了多对多的关系。

有没有一种更简单的方法可以在不为联接表创建类的情况下从所有产品中删除类别关联？

我希望 SQL 看起来像

```
DELETE FROM ProductCategories WHERE CategoryId = 123 
```

这是我们用来删除关联的代码

```
 DetachedCriteria fetchCriteria = DetachedCriteria.For<Product>()
            .CreateAlias("Categories", "categories")
            .Add(Restrictions.Eq("categories.Id", category.Id));

        ICollection<Product> products = productRepo.FindAll(fetchCriteria);

        foreach(var product in products)
        {
            product.Categories.Remove(category);
            productRepo.Save(product);
        } 
```

一个产品有一组类别

```
public class Product{
    public ISet<Category> Categories
    {
        get;set;
    }
} 
```

类别具有 Id Guid 属性

```
public class Category {
    public Guid Id {get;set;}
    public string Name {get;set;}
} 
```

非常感谢 :o)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T15:26:27.773

您是否尝试过使用该`ISession.Delete(query)`方法？它需要一个 HQL 查询，加载对象然后删除它们。

```
session.Delete("from Product p join p.Categories c where c.id = :category", category, NHibernateUtil.Entity(typeof(Category))); 
```

我的 HQL 有点生疏，如果查询不太正确，请见谅。

如果您不热衷于预加载所有对象的想法，另一种选择是使用`session.CreateSQLQuery`并直接传入一条 SQL 语句来执行删除。NHibernate 将在不问任何问题的情况下对服务器执行该操作。

# jquery - 使用母版页的 ASP.net MVC 应用程序中的 jQuery

> ID：371591
> 
> 赞同：13
> 
> 时间：2008-12-16T15:04:09.050
> 
> 标签：jquery, asp.net-mvc

我正在尝试让简单的 jQuery 在我的内容页面上执行，但我正在尝试执行以下操作：

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">

   <script src="../../Scripts/jquery-1.2.6.js" type="text/javascript"></script>
   <script type="text/javascript">

       $(document).ready(function() {
           alert("hi");
       });   
   </script>

</asp:Content> 
```

我也尝试过让以下工作：

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">

   <script src="../../Scripts/jquery-1.2.6.js" type="text/javascript"></script>
   <script type="text/javascript">
       function onload()
       {
          $("#myDiv").css("border", "1px solid green");
       }
   </script>

   <div id="myDive">
      Hello
   </div>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-12-16T15:08:59.370

可能是找不到JQuery文件，脚本参考试试这个：

```
<script src="<%= Url.Content ("~/Scripts/jquery-1.2.6.js") %>" type="text/javascript"></script> 
```

无论应用程序是在根目录还是子目录中运行，Url.Content 都会构建正确的路径。

另外，如果你已经安装了 JS 智能感知的热修复，你可以在上面使用它：

```
<% if (false) { %>
    <!-- Don't wrap this is a Url.Content call, it's like this so we get intellisense! -->
    <script src="../../Scripts/jquery-1.2.6-vsdoc.js" type="text/javascript"></script>
<% } %> 
```

**编辑：**

自 RC 1 Refresh 发布以来，有一个关于在标题中放置带有代码块的元素的已知错误，Philip Haacked 有一篇很好的[文章](http://haacked.com/archive/2009/01/27/controls-collection-cannot-be-modified-issue-with-asp.net-mvc-rc1.aspx)来解决它......

**编辑2：**

显然，自从 RC 2 发布以来，这已得到修复......

> • 如果将runat="server" 属性添加到它们，则作为head 元素的直接子代的代码块不会导致异常。

**编辑3：**

前面提到的修补程序仅适用于 VS2008，可[在此处获取 - 请在](http://code.msdn.microsoft.com/KB958502/Release/ProjectReleases.aspx?ReleaseId=1736)[此处](http://blogs.msdn.com/webdevtools/archive/2008/02/08/jscript-intellisense-working-with-jquery.aspx)查看 VS Web 开发团队的博客文章了解详细信息。VS2010 已经内置了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T16:41:48.103

尝试将 javascript 引用放在您的母版页中。然后您不必担心尝试多次加载脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T19:30:54.810

必须使用才能发布网站，但是当您与只知道如何使用 Photoshop 和 Dreamweaver 的设计师合作时会很痛苦

# qt - 如何从 QSplitter 中删除 QWidgets

> ID：371599
> 
> 赞同：19
> 
> 时间：2008-12-16T15:08:06.093
> 
> 标签：qt, parent, qwidget, qsplitter

在我的应用程序中有一个由 QSplitter 拆分的窗口，我需要删除一个小部件。

我怎样才能做到这一点？我找不到有用的方法

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-19T07:17:49.927

我不清楚您是要保留小部件并将其放在其他地方，还是要销毁小部件。

*   **销毁小部件：**如果您可以获得指向小部件的指针，则可以简单地删除它。拆分器将被安全地通知其子节点正在被删除，并将其从自身中删除。

*   **保留小部件：**如果您抓住小部件的指针，您可以简单地将其父级设置为其他小部件并将其添加到另一个小部件的布局中，它将显示在那里。这是安全的，因为 QSplitter 将被通知它的一个孩子正在被重新设置。

如果您想将父级设置为 NULL（cjhuit 的回答），请注意您现在负责清理该内存，因为小部件不再具有父级。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-16T15:26:40.863

Qt 中的许多东西不能“传统地”删除。而是在其上调用 hide() 并销毁它。来自[QSplitter](http://doc.qt.io/qt-5/qsplitter.html#details)文档：

> 当你 hide() 一个孩子时，它的空间将分布在其他孩子之间。当您再次显示（）时，它将恢复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-16T15:33:46.153

我喜欢 Tuminoid 的回答。但是，如果您绝对需要删除它，请尝试获取要删除的小部件，然后调用`setParent( NULL )`该小部件。这是我最好的猜测。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-07T23:28:35.693

如果您持有指向小部件的指针，则只需将其删除，或者如果您想安全起见，请使用 deleteLater()。

如果您没有小部件指针，请使用 QSplitter::widget(int index) 函数。然后，您可以使用调用它的 deleteLater() 槽。

如果您没有小部件索引，但您仍然知道小部件 objectName()，那么 QObject::findChild() 是获取小部件指针的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T16:06:39.623

我遇到了同样的问题。在 Qt 4.8 中，为了暂时隐藏 QSplitter 的小部件之一，我只是将其隐藏。然而这还不够，因为分离器手柄仍然可以移动。但是也可以访问和隐藏句柄：

```
frameA->setVisible(conditionA);
frameB->setVisible(conditionB);
if ( !(conditionA && conditionB) ) // if only 1 frame is visible
{
   splitter->handle(0)->setVisible(false);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2010-08-04T13:44:20.370

另一种防止子小部件被删除的简单方法是使用 QSplitter.takeWidget(child)。这也是从拆分器中删除小部件的推荐方法。（Qt 文档）

# c# - 在协议缓冲区中表示 System.Decimal 的最佳方式是什么？

> ID：371604
> 
> 赞同：19
> 
> 时间：2008-12-16T15:09:30.850
> 
> 标签：c#, .net, floating-point, protocol-buffers

从[这个](https://stackoverflow.com/questions/371418/can-you-represent-csv-data-in-googles-protocol-buffer-format)问题开始，在协议缓冲区中表示 System.Decimal 对象的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T16:36:51.097

好吧，protobuf-net 会为你简单地处理这个；它运行类型的属性，并完全支持`decimal`. 由于在 proto 中没有直接的表达方式`decimal`，它不会（当前）`decimal`从“.proto”文件生成属性，但识别一些常见类型（“BCL.Decimal”或类似的）将是一个很好的调整并将其解释为十进制。

至于表示它——我在 protobuf-net wiki 区域有一个关于这个的[讨论文件](http://code.google.com/p/protobuf-net/wiki/DotNetTypes)（我怀疑现在已经过时了）；现在 protobuf-net 中有一个工作版本，可以为您简单地完成它。

毫无疑问，乔恩和我将在今天晚些时候更进一步地解决这个问题；-p

这个（在 .proto 中）的 protobuf-net 版本类似于（从[这里](http://code.google.com/p/protobuf-net/source/browse/trunk/Tools/bcl.proto)）：

```
message Decimal {
  optional uint64 lo = 1; // the first 64 bits of the underlying value
  optional uint32 hi = 2; // the last 32 bis of the underlying value
  optional sint32 signScale = 3; // the number of decimal digits, and the sign
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-16T15:47:15.283

Marc 和我有一个非常模糊的计划来提出一个“通用 PB 消息”库，这样您就可以以一种通用的方式表示非常常见的类型（日期/时间和小数），并且可以在 .NET 和 Java 中进行转换（以及任何其他人想要贡献的东西）。

如果您乐于坚持使用 .NET，并且正在寻找紧凑性，我可能会选择以下内容：

```
message Decimal {

    // 96-bit mantissa broken into two chunks
    optional uint64 mantissa_msb = 1;
    optional uint32 mantissa_lsb = 2;

    required sint32 exponent_and_sign = 3;
} 
```

符号只能用 exponent_and_sign 的符号表示，指数为绝对值。

使尾数的两个部分都是可选的意味着 0 表示*非常*紧凑（但仍然可以区分 0m 和 0.0000m 等）。如果我们真的想要，exponent_and_sign 也可以是可选的。

我不知道 Marc 的项目，但在我的端口中，我生成了部分类，因此您可以将 System.Decimal 和 Protobuf.Common.Decimal（或其他）之间的转换放入部分类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-11T21:24:14.627

一种比 Jon 或 Marc 更简单的实现方法是将其存储为 4 个`sint32`值，这可以方便地映射到[Decimal.GetBits()](https://docs.microsoft.com/en-us/dotnet/api/system.decimal.getbits?view=netframework-4.8)的输出。

原型文件将如下所示：

```
message ProtoDecimal {
    sint32 v1 = 1;
    sint32 v2 = 2;
    sint32 v3 = 3;
    sint32 v4 = 4;
} 
```

转换器将是：

```
public decimal ConvertToDecimal(AbideDecimal value)
{
    return new decimal(new int[] { value.V1, value.V2, value.V3, value.V4 });
}

public ProtoDecimal ConvertFromDecimal(decimal value)
{
    var bits = decimal.GetBits(value);
    return new ProtoDecimal 
    {
        V1 = bits[0],
        V2 = bits[1],
        V3 = bits[2],
        V4 = bits[3]
    }
} 
```

这在其他语言中可能没有那么简单，但是如果您只需要以 C# 为目标，那么它将占用与其他方法相同的最大 16 个字节（尽管像 0 这样的值可能不会像存储的那样紧凑 - 我不对 protobuf 如何存储 int 的复杂细节有足够的了解），同时对像我这样的愚蠢的程序员来说更清楚:)

显然，如果您想测试性能，您将不得不[与马匹比赛，但我怀疑其中有很多。](https://ericlippert.com/2012/12/17/performance-rant/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-20T23:17:13.520

当您知道小数位数有限时，您可以使用可能的最小单位作为整数值。例如，在处理货币时，不需要小数类型，而是可以定义为使用单位美分。然后一个具有值的整数`2`将引用`0.02`任何使用的货币。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T00:51:53.233

我用钩子为 protobuf-csharp-port 拼凑了一个补丁，它生成带有原生 Decimal 和 DateTime 结构的 protobuf 类。有线格式明智，它们由两个“内置”原始消息表示。

这是链接： [https ://code.google.com/p/protobuf-csharp-port/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby =&排序=&id=78](https://code.google.com/p/protobuf-csharp-port/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=78)

# html - 双浮动错误 - IE

> ID：371606
> 
> 赞同：0
> 
> 时间：2008-12-16T15:10:40.973
> 
> 标签：html, css, internet-explorer

我正在尝试修复一个我正在帮助朋友的网站，并且在 IE 中它显示导航栏，就像它堆叠在彼此之上一样。

这是双浮动错误的一部分，我尝试添加显示：内联，但我仍然有这个问题。

网址：[http](http://www.flanels.com/RadiantecHOME.html)
://www.flanels.com/RadiantecHOME.html CSS：[http](http://www.flanels.com/style.css) ://www.flanels.com/style.css `

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T15:40:01.740

*对我来说看起来*不像双浮动。

从我从 IE 开发人员看到的情况来看，IE 中的 <li>*既没有显示也没有应用浮动*，但它的样式“#top-navigation ul li”是绑定的，因为边距设置为 0。我看到你'正在使用过渡文档类型，因此如果可以摆脱难以预测的怪癖模式，我将首先将其更改为严格。

正如 smiller 指出的那样，您不需要 float 和 inline，因此您应该删除其中一个，然后我建议开始简化代码以找出冲突所在。

希望更改为严格会立即解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T15:44:24.260

我保存了一个本地副本并修改`#top-navigation`为删除`float: left;`.

这似乎使顶部菜单在 Firefox 和 IE 中呈现相同，但是我不知道它可能会产生什么其他问题。

我在 IE 和 Firefox 中看到的问题之一是除了我认为是图像一部分的倾斜条之外，还有白色竖条（图像之间的中断）。

另一件事是，如果浏览器不够宽，顶层菜单会根据需要进行换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T15:44:46.630

你在包含的 div 上有一个浮点数。

# java - 如何告诉 Java 使用哪个 StringEscapeUtils.escapeXML()？

> ID：371607
> 
> 赞同：3
> 
> 时间：2008-12-16T15:10:43.423
> 
> 标签：java, xml, jsp

我正在尝试使用 org.apache.commons.lang 中的 StringEscapeUtils.escapeXML() 函数...

该函数有两个版本，一个需要 (Writer, String)，一个只需要 (String)....

[http://commons.apache.org/lang/api/org/apache/commons/lang/StringEscapeUtils.html#escapeXml(java.lang.String)](http://commons.apache.org/lang/api/org/apache/commons/lang/StringEscapeUtils.html#escapeXml(java.lang.String))

我正在尝试使用只需要没有 Writer 的 String 参数的版本，但 Java 抱怨我没有给它一个 Writer。

如何在我的程序中使用它，这样我就不需要 Writer？

```
String escXml = StringEscapeUtils.escapeXml(attr.get());
xml = xml.concat("<"+attr.getID()+">"+escXml+"</"+attr.getID()+">"); 
```

我也尝试过在字符串本身中内联。

```
xml = xml.concat("<"+attr.getID()+">"+StringEscapeUtils.escapeXml(attr.get())+"</"+attr.getID()+">"); 
```

不过，这两种尝试都给了我关于它期待作家的错误。谁能帮我这个？

谢谢，马特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-16T15:24:28.510

错误消息告诉您将对象传递给方法，而不是字符串。

如果您确定对象是字符串，那么您需要先将其转换为字符串。

如果这不起作用，请发布给您带来麻烦的实际代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:17:46.847

如果您在系统中安装了多个版本的 java，则应使用指定版本编译 java 类。

您应该使用这种方式编译您的文件。

javac -target -source

例如 H:>javac -target 1.6 -source 1.6 Testt.java

所以你的目标和源版本被告知java，所以它会在运行时调用特定的版本类..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T15:13:43.087

编译器错误消息到底是什么？

您是否有可能使用不具有 1 参数方法的不同版本的 commons 库？

# c - C typedef：参数类型不完整

> ID：371608
> 
> 赞同：3
> 
> 时间：2008-12-16T15:10:55.170
> 
> 标签：c, gcc

GCC 3.4.5（MinGW 版本）产生警告：参数有以下 C 代码的第 2 行的不完整类型：

```
struct s;
typedef void (* func_t)(struct s _this);
struct s { func_t method; int dummy_member; }; 
```

有没有办法在不将方法参数的签名更改为 (struct s *) 的情况下解决此问题（或至少隐藏警告）？

**注意：**
至于为什么这样的东西会有用：我目前正在修补一个面向对象的框架；'method' 是调度表中的一个条目，由于框架的特殊设计，通过值而不是通过引用传递 '_this' 是有意义的（因为它通常是这样做的）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T17:08:43.107

你不能很容易地做到这一点 - 根据[C99 标准](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)，第 6.7.5.3 节，第 4 段：

> 调整后，作为该函数定义的一部分的函数声明器中的参数类型列表中的参数不应具有不完整类型。

因此，您的选择是让函数采用指向结构的指针，或采用指向稍有不同类型的函数的指针，例如采用未指定参数的函数：

```
typedef void (* func_t)(struct s*);  // Pointer to struct
typedef void (* func_t)(void *);     // Eww - this is inferior to above option in every way
typedef void (* func_t)();           // Unspecified parameters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T04:07:52.213

切换到 GCC 4 似乎应该可行。MinGW 4.3.0 版：http: [//sourceforge.net/project/showfiles.php ?group_id=2435&package_id=241304&release_id=596917](http://sourceforge.net/project/showfiles.php?group_id=2435&package_id=241304&release_id=596917)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T15:21:01.717

隐藏警告通常很容易 - 只需查看特定编译器的帮助即可。

[http://developer.apple.com/documentation/DeveloperTools/gcc-4.0.1/gcc/index.html#//apple_ref/doc/uid/TP40001838](http://developer.apple.com/documentation/DeveloperTools/gcc-4.0.1/gcc/index.html#//apple_ref/doc/uid/TP40001838)

请注意，我通常不提倡禁止警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-24T11:29:37.557

该警告似乎是当前 MinGW 版本的 gcc 的错误。与亚当所说的相反，它*是*有效的 C99 - 第 6.7.5.3 节，第 12 段明确允许这样做：

> 如果函数声明符不是该函数定义的一部分，则参数可能具有不完整的类型，并且可以在其声明符说明符序列中使用 [*] 符号来指定可变长度数组类型。

似乎没有办法指示（这个版本的）gcc 不打印这个警告——至少*我*找不到一个有效的开关——所以我现在只是忽略它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-16T16:41:33.643

你想用函数指针调用它。为什么不使用 void 指针呢？

```
typedef void (*func_t)(void*); 
```

您也可以传递一个松散类型的函数指针；我手头没有编译器。

```
typedef void (*func_t)(void (*)()); 
```

# vim - 除了 vi/vim，还有哪些模态编辑器可用？

> ID：371618
> 
> 赞同：6
> 
> 时间：2008-12-16T15:15:46.780
> 
> 标签：vim, editor, vi

[另一个问题](https://stackoverflow.com/questions/14410/why-are-there-so-few-modal-editors-that-arent-vi)问为什么非 vi 模态编辑器这么少。该问题中的一些评论顺便提到了其他模态编辑器，但我认为制定更全面的列表会很有用。在 Google 上搜索这些信息很困难，因为与 vim 相关的信息往往会淹没其他所有信息。

一些让事情顺利进行的项目：

*   Divascheme（[来自前面提到的问题](https://stackoverflow.com/questions/14410/why-are-there-so-few-modal-editors-that-arent-vi)）
*   埃德（[据此](http://www.csd.uwo.ca/~moreno/cs211_moreno_2007/notes/unix-editors-W2007.pdf)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T20:11:37.387

多年来有许多非 vi 模态编辑器。其中许多都与单个操作系统相关联。

想到 WordStar、edlin 和 ISPF。还可以从 HDOS 系统进行编辑。可能至少有十几个其他名称为 EDIT 或其变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-29T04:42:06.003

我从未尝试过，但 AFAIK Emacs 有一个插件来模拟 vi 的模态编辑。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-12-16T15:22:52.790

猫王是这些编辑之一。此外，nvi 可以算作一个。

# html - 为什么 HTML::Obliterate 不删除我的 HTML？

> ID：371637
> 
> 赞同：2
> 
> 时间：2008-12-16T15:27:53.997
> 
> 标签：html, perl, strip

我正在尝试使用以下代码，但我还无法测试，因为我收到以下错误：

```
#!/usr/bin/perl
use warnings;
use strict;
use Text::Wrap;
use Mail::Box::Manager;
use HTML::Obliterate qw(extirpate_html);

open (MYFILE, '>>data.txt');
binmode(MYFILE, ':encoding(UTF-8)');

my $file = shift || $ENV{MAIL};
my $mgr = Mail::Box::Manager->new(
    access          => 'r',
);

my $folder = $mgr->open( folder => $file )
or die "$file: Unable to open: $!\n";

for my $msg ( sort { $a->timestamp <=> $b->timestamp } $folder->messages)
{
    my $to          = join( ', ', map { $_->format } $msg->to );
    my $from        = join( ', ', map { $_->format } $msg->from );
    my $date        = localtime( $msg->timestamp );
    my $subject     = $msg->subject;
    my $body        = $msg->decoded->string;

if ( $msg->isMultipart ) {
    foreach my $part ( $msg->parts ) {
        if ( $part->contentType eq 'text/html' ) {
          my $nohtml = extirpate_html( $msg );
$body =~ s/^>.*$//msg;
$Text::Wrap::columns=80;
print MYFILE wrap("", "", <<"");
\n
From: $from
To: $to
Date: $date
Subject: $subject
\n
$body
        }

else {

$body =~ s/^>.*$//msg;
$Text::Wrap::columns=80;
print MYFILE wrap("", "", <<"");
\n
From: $from
To: $to
Date: $date
Subject: $subject
\n
$body

}

}} 
```

所有的大括号似乎都匹配，所以我不确定问题出在哪里

```
syntax error at x.pl line 46, near "else"
  (Might be a runaway multi-line << string starting on line 36)
Missing right curly or square bracket at x.pl line 63, at end of line
syntax error at x.pl line 63, at EOF
Execution of x.pl aborted due to compilation errors. 
```

编辑：

它现在可以工作了，但是 html 没有条带化：取而代之的是几封电子邮件，其中包含
>
> 之类的东西交错贯穿，导致它的页面比应有的多得多。有一个更好的方法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T15:39:10.243

所以第36行似乎是

```
print MYFILE wrap("", "", <<""); 
```

这意味着 perl 将包装以下文本，直到出现终止符`""`（我从不使用像这样令人困惑的项目，为了简单起见，我总是使用 END 或 UNTIL_END。）

然后在第 45 行（空行）找到该终止符，这意味着它处理的下一件事是第 46 行：

```
else { 
```

这是没有意义的，因为前一个`if`还没有关闭（有 } 的第 44 行在终止符*之前*`""`，因此它被视为用于换行的文本。Perl 注意到了这一点，并建议你这可能是罪魁祸首：

```
(Might be a runaway multi-line << string starting on line 36) 
```

您需要交换第 44 和 45 行以首先具有终止符`""`（空行），然后关闭 if 与`}`. 您示例中的第二个包装正确地做到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T16:10:22.397

回答您修改后的问题：

而不是消除消息正文，而是消除整个消息。然后你不会在任何地方使用它。

```
my $nohtml = extirpate_html( $msg );
$body =~ s/^>.*$//msg;
$Text::Wrap::columns=80;
print MYFILE wrap("", "", <<"");
\n
From: $from
To: $to
Date: $date
Subject: $subject
\n
$body 
```

也许您需要将其更改为：

```
my $nohtml = extirpate_html( $body );
$nohtml =~ s/^>.*$//msg; 
```

然后将其应用`$nohtml`为消息正文进行换行。

# iphone - iPhone 应用程序中的异步 vs 同步 vs 线程

> ID：371638
> 
> 赞同：26
> 
> 时间：2008-12-16T15:28:11.390
> 
> 标签：iphone, objective-c, cocoa-touch, multithreading, rest

我正处于一个应用程序的设计阶段，该应用程序将利用 REST Web 服务，并且在使用异步、同步和线程方面有点进退两难。这是场景。

假设您有三个选项可以深入研究，每个选项都有自己的基于 REST 的资源。我可以使用同步请求懒惰地加载每个请求，但这会阻止 UI 并阻止用户在检索数据时点击后退导航按钮。这种情况几乎适用于任何地方，*除非*您的应用程序需要登录屏幕。仅仅因为这个原因，我看不出有任何理由使用同步 HTTP 请求与异步。唯一有意义的是让工作线程发出同步请求，并在请求完成时通知主线程。这将防止阻塞。然后问题是对您的代码进行基准测试并查看哪个具有更多开销，线程同步请求或异步请求。

异步请求的问题是您需要设置智能通知或委托系统，因为您可以在任何给定时间对多个资源进行多个请求。他们的另一个问题是，如果我有一个类，比如说一个处理我所有数据的单例，我不能在 getter 方法中使用异步请求。意味着以下内容不会发生：

```
 - (NSArray *)users {
     if(users == nil)
        users = do_async_request // NO GOOD

     return users;
 } 
```

而以下：

```
 - (NSArray *)users {
    if(users == nil)
      users == do_sync_request // OK.

    return users;
 } 
```

你也可能有优先权。我所说的优先级的意思是，如果您查看 iPhone 上的 Apple 邮件应用程序，您会注意到它们首先会读取您的整个 POP/IMAP 树，然后再发出第二个请求以检索您的消息的前两行（默认值）。

我想我向各位专家提出的问题是这样的。你什么时候使用异步、同步、线程——你什么时候在线程中使用异步/同步？您设置了哪种委托系统来知道异步请求完成时要做什么？您是否优先考虑异步请求？

对于这个太常见的问题，有很多解决方案。破解一些东西很简单。问题是，我不想破解，我想要一些简单且易于维护的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T22:29:51.803

我不会忽视异步委托调用，但我通常最终会使用带有同步请求的线程工作者类。我发现从长远来看，拥有一个定义良好的线程 API 会更容易，而不是用管理异步方法之间状态的代码来填充你的控制器。您甚至可以在工作线程中进行异步操作，尽管通常使用同步方法更容易，除非它们不支持您需要使用的功能。当然，这一切都取决于具体情况，我可以想到很多情况，其中简单地使用异步方法是最好的方法。

如果你走这条路，一定要考虑 NSOperationQueue；它极大地简化了创建多个工作线程的过程，并且还支持操作之间的优先级和依赖关系。目前在 10.5 上存在一些问题，但我还没有听说 iPhone 上有任何问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T20:59:41.353

一个官方的回应是你应该[几乎总是去异步](https://devforums.apple.com/message/14845#14845)，[同步是不好的](https://devforums.apple.com/message/37677#37677)。我发现[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)使异步请求变得容易。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-16T16:07:53.667

我不认为有一个“正确”的答案。您似乎了解所涉及的妥协，您只需要围绕这些进行设计。

一些额外的随机点：有时您的应用程序会强制使用特定方法。例如，许多便利（即同步）方法不允许身份验证。对我来说，这意味着我做出了决定。

对于[Yummy](http://www.yummyapp.com/)，我最终*没有*使用线程。我使我的所有网络调用都是异步的，并且我使用了默认的 XML 解析器（它使用回调来工作）。由于它都是事件驱动的并且每个单元都很小，它允许 GUI 非常流畅，而没有线程的复杂性。

我使用状态机来弄清楚为什么我会得到一个特定的响应，并使用一个队列，这样我只需要在任何给定时间进行一个“运行中”的操作。大多数请求都有不同的顺序，所以我不需要优先系统。

网络代码是我的应用程序中最复杂的，它花了很长时间才变得不那么健壮！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T15:33:14.110

我个人看看正在做什么，我通常会使用一个 asyc 请求来确保 UI 不会阻塞，但是，我可以在该请求的过程中禁用我的应用程序的 UI。

一个典型的例子是我使用“搜索”按钮构建的应用程序。一旦将搜索作为异步请求触发，我将禁用该按钮，直到响应返回，从而有效地限制了用户产生第二个异步请求的能力。

这样做，至少我可以避免对优先级的需求，如果你能以一种简单的方式将你的用户一次限制为一个操作，那么这只有在你能做到的情况下才有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T16:09:12.353

毫无疑问，我会推荐异步方式。然后，仅在需要时加载信息，并使用委托系统将该信息提供给正确的对象。

您不想阻止用户界面。曾经。并且异步加载信息可以让您更好地控制正在发生的事情，因此您可以在需要时抛出错误消息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-04-11T12:00:42.347

只是一个想法：如果你想使用 iPhone 的单元测试框架，你*可能*需要同步功能，因为这可以使编写测试更容易。

但是，您的某些 API 可能无法同步工作，因此您需要将它们转换为同步任务。如果执行单元测试的代码在其自己的线程中运行，您可以编写一个包装器，该包装器将等待异步任务完成。

为此，您将使用信号量：您的包装函数启动异步操作，然后使用信号量来阻止自己（即让自己进入睡眠状态）。表示异步事件结束的回调释放信号量，以便休眠的包装线程可以继续并返回。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T20:10:05.753

我会将 dispatch_async 与同步一起使用。这样，您就具有没有委托/NSNotifications 的优势，并且它是非阻塞的

```
- (NSArray *)users {
    if(users == nil) {
        users = do_sync_request();
    }

    return users;
}

// now when calling the users method, do this

- (NSArray *)getUsers {
     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
           NSArray *users = [self users];
           dispatch_sync(dispatch_get_main_queue(), ^{
                 return users;
           }
     }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-17T07:38:01.930

为什么不能像这样使用异步请求：

```
- (NSArray *)users {
     if(users == nil && !didLaunchRequestAlready )
        users = do_async_request // Looks good to me
     return users;
 } 
```

异步绝对是唯一的选择——唯一真正的问题是您是否想开始使用单独的线程，或者您是否只想使用异步调用。如果你真的需要，从那里开始，看看管理线程。

# php - 在 mysqli 准备好的语句中使用空值

> ID：371644
> 
> 赞同：26
> 
> 时间：2008-12-16T15:33:01.007
> 
> 标签：php, mysql, null, mysqli, prepared-statement

在 mysqli 准备好的语句中，NULL 变成 ''（在字符串的情况下）或 0（在整数的情况下）。我想将其存储为真正的 NULL。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2011-07-31T21:39:26.993

可以将一个真正的 NULL 值绑定到准备好的语句（阅读[这个](http://www.php.net/manual/en/mysqli-stmt.bind-param.php#96148)）。

> 事实上，您可以使用 mysqli_bind_parameter 将 NULL 值传递给数据库。只需创建一个变量并将 NULL 值（参见手册页）存储到变量并绑定它。无论如何对我来说都很好。

因此它必须是这样的：

```
<?php
    $mysqli = new mysqli('localhost', 'my_user', 'my_password', 'world');

    // person is some object you have defined earlier
    $name = $person->name();
    $age = $person->age();
    $nickname = ($person->nickname() != '') ? $person->nickname() : NULL;

    // prepare the statement
    $stmt = $mysqli->prepare("INSERT INTO Name, Age, Nickname VALUES (?, ?, ?)");

    $stmt->bind_param('sis', $name, $age, $nickname);
?> 
```

这应该在数据库中插入一个 NULL 值。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-04-26T20:15:40.640

对于任何因为在他们的`WHERE`声明中绑定 NULL 时遇到问题而来看这个的人，解决方案是这样的：

有一个必须使用的 mysql [NULL 安全运算符：](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#operator_equal-to)

`<=>`

例子：

```
<?php
$price = NULL; // NOTE: no quotes - using php NULL
$stmt = $mysqli->prepare("SELECT id FROM product WHERE price <=> ?"); // Will select products where the price is null
$stmt->bind_param($price);
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-16T16:12:44.857

对[PHP 文档`mysqli_stmt::bind_param`](http://php.net/mysqli-stmt-bind-param)的注释表明，传入`NULL`并不容易。

* * *

> 请参阅@creatio 的回答：[https ://stackoverflow.com/a/6892491/18771](https://stackoverflow.com/a/6892491/18771)

* * *

评论中提供的解决方案对准备好的语句进行了一些预先准备工作，将`"?"`标记替换为具有 PHP值`"NULL"`的每个参数。`null`然后使用修改后的查询字符串。

以下功能来自[用户评论 80119](http://de.php.net/manual/en/mysqli-stmt.bind-param.php#80119)：

```
function preparse_prepared($sQuery, &$saParams)
{
    $nPos = 0;

    $sRetval = $sQuery;
    foreach ($saParams as $x_Key => $Param)
    {
        //if we find no more ?'s we're done then
        if (($nPos = strpos($sQuery, '?', $nPos + 1)) === false)
        {
            break;
        }

        //this test must be done second, because we need to 
        //increment offsets of $nPos for each ?.
        //we have no need to parse anything that isn't NULL.
        if (!is_null($Param))
        {
            continue;
        }

        //null value, replace this ? with NULL.
        $sRetval = substr_replace($sRetval, 'NULL', $nPos, 1);

        //unset this element now
        unset($saParams[$x_Key]);
    }
    return $sRetval;
} 
```

*（这不是我真正会使用的编码风格，但如果它有效......）*

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-08-05T18:57:52.793

我将所有参数存储在一个数组中，并`bind_param`使用`array_shift($myArray)`. NULL 就是这样被接受的。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-12-31T21:27:49.127

```
<?php
$mysqli=new mysqli('localhost','root','','test');
$mysqli->query("CREATE TABLE test_NULL (id int(11))");
if($query=$mysqli->prepare("insert into test_NULL VALUES(?)")){
    $query->bind_param('i',$null); //note that $null is undefined
    $query->execute();
}else{
    echo __LINE__.' '.$mysqli->error;
}
?> 
```

# visual-studio-2008 - 德语 Visual Studio 2008 / ASP.NET 中的英语错误消息

> ID：371651
> 
> 赞同：9
> 
> 时间：2008-12-16T15:35:48.503
> 
> 标签：visual-studio-2008, internationalization, locale, custom-errors

这可能是一个有点奇怪的问题，但我会试一试：

帮助，我的 Visual Studio 2008 / ASP.NET 给了我德语错误消息。除了翻译往往不如原文好之外，我无法在互联网上搜索这些并找到我的问题的相关答案。

那么：如何将我的德语 Visual Studio 2008 标准版切换到英语本地版本？

* * *

更新 - 只是为了说清楚：

我是一名德国开发人员，使用的是德文 Windows Vista……我也有德文版的 Visual Studio，所以毫不奇怪，一切都是德文。只是不想那样......但是，必须有一种方法可以将英语本地人安装到我的 Visual Studio 中？或者卸载德语的，所以使用默认的英语？！？

（顺便说一句：SQL Server Management Studio 也是如此。F**k“Sichten”。我想要“Views”。这就是你真正称呼它们的方式。没有人说“Sichten”，甚至在德国也没有，甚至没有虽然翻译正确）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-18T08:13:17.913

转到控制面板-> 软件。.NET 有语言包（每个版本都有）。卸载它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-17T13:50:58.870

You have to switch the user interface language (UI Language) to en-US via Web.Config. This will make sure they are in English.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T16:01:40.277

检查系统范围的语言首选项 - WinXP 控制面板中的“区域和语言选项”。我发现在使用 VS 时，我的键盘会从英国模式变为美国模式，甚至是法语，因为 SHIFT + ALT + F10 按键被 VS 用于显示一些上下文菜单，并且它也被 Windows 用作更改系统语言的按键.

更新：检查您的系统范围的语言首选项。如有必要，请安装语言包，但我在 MS 下载中心找不到任何语言包。否则安装英文版本。我即将下载VS 2008 C# Express，我有英文、中文、法文、德文等选项。

# c# - nhibernate，与父母和孩子一起上课导致重复键

> ID：371653
> 
> 赞同：2
> 
> 时间：2008-12-16T15:36:37.427
> 
> 标签：c#, .net, nhibernate

您可以提供的任何帮助都将非常感激地接受。我一遍又一遍地研究这个问题，似乎找不到解决方案。它可能正盯着我的脸:(

我有以下课程，其中包含要保留在层次结构表中的父母和孩子的列表。

```
class Item  
{  
    public virtual int Id {get;set;}  
    public virtual List`<Item`> Parents {get;set;}  
    public virtual List`<Item`> Children {get;set;}  
} 
```

在休眠设置中，我有：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
  assembly="Pl.Components" namespace="Pl.Components"`>  
    <class name="Pl.Components.Item, Pl.Components" table="Item">  
        <id name="Id" type="Int32"  column="Id" >  
            <generator class="identity" />  
        </id>  
        <bag name="Parents" lazy="true" table="Hierarchy" cascade="save-update">  
            <key column="ChildId"/>  
            <many-to-many class="Item" column="ParentId" />  
        </bag>  
        <bag name="Children" lazy="true" table="Hierarchy" cascade="delete">  
            <key column="ParentId"/>  
            <many-to-many class="Item" column="ChildId"/>  
        </bag`>  
    </class>  
</hibernate-mapping> 
```

这会导致层次表中出现重复的键，因为键对是为子级和父级插入的。

除了在单独的表中保留父层次结构和子层次结构之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T05:14:53.450

您需要将其中一个袋子标记为 inverse="true"。见[http://www.hibernate.org/hib_docs/nhibernate/html/collections.html#collections-bidirectional](http://www.hibernate.org/hib_docs/nhibernate/html/collections.html#collections-bidirectional)

# pdf - 用于制作用户手册的应用程序（不是标记语言）

> ID：371654
> 
> 赞同：39
> 
> 时间：2008-12-16T15:36:43.713
> 
> 标签：pdf, documentation, publishing, manuals

任何人都可以推荐一个程序来创建用户手册吗？不是一种标记语言（如 LaTeX 或 DocBook），而是更像 Scribus 之类的交互式标记语言。由于我不是唯一会更新手册的软件，因此该软件应该是新手容易上手的软件，但仍具有一些高级功能（例如从外部源/表格链接文本，处理母版页/主题等） .

问候，奥斯卡

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2008-12-16T17:22:38.850

**[技术出版软件——对FrameMaker](http://www.adobe.com/products/framemaker.html)及其替代品的看法**

我已经使用 LaTeX 和 Framemaker 完成了规范文档，并设计了 Framemaker 工作流程来支持由 5 名分析师组成的团队为保险承保系统制作规范文档。该文件预计将达到 2,000 页左右。许多年前（大约 1992 年至 1993 年），我还曾短暂地担任过排字员。

Framemaker 专为技术文档而设计，并且确实**做得很好。** 它还具有旨在支持具有多个作者的超大型文档的功能——人们使用该系统来处理超过 100,000 页的文档。对于熟悉文字处理软件的用户来说，它也比 LaTeX 更易于访问。

**Framemaker的主要特点：**

*   **由多个文件组成的文档：**您可以将一个“书”与不同文件中的多个小节组合在一起。该文档也可以保存在源代码管理中。

*   **用于导入/导出**的文本 MIF 格式：导入器有点挑剔（我发现生成工作 LaTeX 更容易），但您可以生成数据字典等项目并将它们导入文档。该文件具有文本锚（见下文），因此您可以创建跨导入稳定的交叉引用链接。我发现这是规范的一个关键特性，因为它允许交叉引用直接链接到生成的项目。

*   **强大的标签、索引和交叉引用系统：**一切都基于 Framemaker 中的标签，易于快速应用标签。这意味着交叉引用、索引、条件文本和整体应用样式很容易而且 *很有效*。您可以根据标签生成索引和 TOC，因此拥有多个专用索引（例如屏幕或数据字典中的数据字段名称列表）很容易做到。我上面描述的文档有 4 个单独的索引。

*   **稳定：** Framemaker 是为专业人士设计的，因此它不会像这个词那样猜测你。它在大型文档上也更加稳定。任何尝试在 Word 上编写超过 50-100 页文档的人都应该非常清楚这意味着什么。

*   **Scriptable：** FM 有一个 C API，并且有各种脚本插件（[FrameScript](http://www.framescript.com/)和[FMPython](http://www.framemakerfdksource.com/bloggers/windows/2007/02/17/fmpython-download-here/) 可能是使用最广泛的），可用于在 FM 中自动化作业。 [Framemaker 10](http://www.adobe.com/products/framemaker.html)增加了对名为[Extendscript](http://help.adobe.com/en_US/framemaker/using/WSd5e89bb44d752f2f4e0f6b6612c81bacb1a-7ff4.html)的基于 Javascript 的脚本工具的支持，大概是从 InDesign 中的脚本工具移植过来的。

*   **单一来源：**从单个 FM 文档，您可以相当轻松地生成 PDF、Windows 帮助 (CHM)、HTML 和打印文档。交叉引用也解析为超链接。

*   **全局样式控件：**您可以轻松地为文档设置样式并将其应用于整个文档。它还有助于运行页眉和页脚，并具有很大的灵活性，可以让它们跟踪部分、版本、章节等。

**Framemaker的替代品**

*   **LaTeX/Lout：**您已经表明您不需要标记语言，但是[TeX](http://www.ctan.org)和 [Lout](http://lout.wiki.sourceforge.net/)系统用于大型结构化文档并且做得很好。

*   **[Ventura Publisher：](http://www.corel.com/servlet/Satellite/us/en/Product/1152105061811#tabview=tab0)**如果您想要那种用户界面而不为特权支付身体部分，这可能是 Framemaker 的唯一真正替代品。它对结构化文档和基于 XML 的文档交换格式具有强大的支持。它现在归 Corel 所有，Corel 似乎仍在积极推广它。

    市场上还有其他几种技术发布工具：[Quicksilver](http://www.broadvision.com/bvsn/bvcom/ep/programView.do?pageTypeId=8155&programPage=%2Fjsp%2Fwww%2Fcontent%2FgeneralContentBody.jsp&programId=8297&channelId=-9482&BV_SessionID=NNNN1185750526.1229445772NNNN&BV_EngineID=ccccadeejdjfiegcefecefedgfhdfng.0) （以前称为[Interleaf](http://en.wikipedia.org/wiki/Interleaf)）和[ArborText](http://www.ptc.com/products/arbortext/)。这两个是强大的工具——Interleaf 曾经一度是该领域的市场领导者——但价格相当昂贵。

*   **[Adobe Indesign：](http://www.adobe.com/products/indesign/)**尽管 Adob​​e 声称您可以使用 InDesign 制作大型文档，但 Framemaker 爱好者往往认为交叉引用和其他大型文档功能缺乏。但是，它有一个名为[InCopy](http://www.adobe.com/products/incopy/)的文本输入系统，它显然确实具有这种功能和相当多的[第三方插件](http://www.adobe.com/products/plugins/indesign/)，其中一些确实支持标记和其他此类工具。InDesign 还有一个脚本 API 和一个用于执行脚本的 JavaScript 解释器。

    我没有使用过 Indesign，所以我无法评论它在实践中的效果如何。

*   **[DocBook：](http://www.docbook.org/)** 这实际上只是结构化文档的标准格式，但围绕它有一个庞大的工具生态系统，用于编写和呈现文档。如果您不想使用 LaTeX，您可能出于类似的原因不想使用 DocBook。正如[Vinko Vrsalovic](https://stackoverflow.com/questions/371654/application-not-a-markup-language-for-producing-a-user-manual#371674) 指出的 (+1)，[此链接指向](https://stackoverflow.com/questions/182334/company-insists-on-using-a-binary-format-for-all-our-documentation#182591)StackOverflow 帖子，来自某人描述在实践中使用 DocBook。我从未真正使用过 DocBook，而且我对这篇文章进行了如此多的编辑，以至于它现在处于 Wiki 模式，因此熟悉 DocBook 的人可能想要详细说明这一点。

*   **文字处理软件：** [Word](http://www.microsoft.com/office/2007-rlt/en-GB/Default.aspx?s=whatsnew&id=word&WT.mc_id=ad&WT.srch=1) 作为技术发布工具存在严重缺陷，不推荐使用。 [OpenOffice](http://www.openoffice.org/)具有比 word 更好的结构化文档功能，如果政治或使用 .doc 作为文档交换格式的要求排除了更好的选择，它可能是更好的选择。 [Wordperfect](http://www.corel.com/servlet/Satellite/gb/en/Product/1207676528492?trkid=ukgoogwpoq406#tabview=tab0)在处理大型文档方面也比 word 好得多，并且仍然存在于多个垂直市场，例如法律办公室。

*   **[Madcap Software 的](http://www.madcapsoftware.com/) [Blaze](http://www.madcapsoftware.com/products/blaze/)和[Flare](http://www.madcapsoftware.com/products/flare/)：**这些是街区里的新孩子，与 Framemaker 住在大致相同的空间。该公司由前 eHelp（RoboHelp 的创建者）员工创立，并正在积极发展，每年发布多个版本。他们的产品在过去两年中大大扩展，损害了单个产品的质量。似乎重点一直放在生产新产品上，因此每个产品都存在很多“适合和完成”问题。作者选择以多种方式重新发明轮子，从而导致令人困惑且经常被破坏的实现。经常保存，会遇到未处理的异常。源代码控制集成是不稳定的。例如，移动或删除一组文件将导致每次文件删除都提交一个源代码控制提交。当您有源代码控制电子邮件通知时，大 PITA。你好 500 封电子邮件。Flare 可以导入 Word 和 Framemaker 文件，但导入远非无缝。期望保留您的所有内容，但计划从头开始完全重新设计。Flare 与 Word 一样倾向于在幕后做太多事情并假设用户会选择什么。HTML 看起来就像您导出 HTML 时 Word 输出的内容 - 大量自定义标签和属性、深度嵌套的内联样式等。文本编辑器令人抓狂，例如，它的光标模型与您曾经使用过的任何其他软件都不同。

**Framemaker 与 LaTeX**

这两个是我用来生成大型、美观的系统文档的主要系统，我在这两个方面都取得了很好的效果。

*   **易于学习：** TeX 可以为您提供绝对控制，但实际上在不破坏其他项目的情况下在复杂的 LaTeX 文档上实现这一点并非易事，尤其是在涉及大量宏包的情况下。基本的 LaTeX 并不难学，但是如果你不是一个真正深入的 TeX 黑客，那么制作仍然可以工作的 .sty 文件的修改版本需要一些修修补补。这是可以做到的，但要准备好花很多时间摆弄。

    Framemaker 可以让您很好地控制文档的外观，而且学习起来并不难。使用 Framemaker 获得房屋风格和调整布局（您可能必须这样做）会更容易。

*   **易于文本输入：**您可以使用[Lyx](http://www.lyx.org/)等工具为 LaTeX 提供类似文字处理器的前端，如果您想编写大量文本，这些工具可以很好地工作。Framemaker 类似 DTP 的用户界面以习惯文字处理软件的人所熟悉的方式工作。从这个角度看，实际差别不大。

*   **模板化文档结构：** Framemaker 允许根据标签或 XML 模式定义文档结构（如果使用结构化 Framemaker）。LaTeX 有一组固定的结构元素，它们足够灵活，非常有用。添加额外的结构元素（例如数据字典项）可以作为宏来完成，但是使它们自动编号更具挑战性，您需要在幕后四处寻找。两者都可以做到，但在 LaTeX 中做这件事的技术性要强得多，而不是微不足道的情况。

    此外，LaTeX 没有像 Structured Framemaker 那样对文档结构进行模板化的功能。但是，您可以使用 DocBook 实现这种效果，然后根据需要生成 LaTeX。

*   **易于集成：**我发现为非常复杂的 MIF 文件制作一个生成器非常繁琐。MIF 解析器在 FM 中非常棘手，并不能真正提供良好的诊断。LaTeX 会产生更好的错误信息，并且不那么挑剔。

**技术出版软件与排版软件**

页面布局软件从[Pagemaker](http://www.adobe.com/products/pagemaker/)开始，该领域的其他主要参与者是它的竞争对手[Quark Xpess](http://8.quark.com/)和现在的 InDesign，Adobe 基本上试图用它来弃用和替换它和 Framemaker。 [您之前提到的Scribus](http://www.scribus.net/)与这些产品位于同一空间。

如果您制作的手册页数少于（例如）50-100 页，那么其中一个包可能就足够了。它们实际上是为广告和布局繁重的出版任务（如杂志）而设计的，因此它们对 Framemaker 中的大型文档功能的支持相当有限。这些产品的关键问题是可扩展性——它们不适用于大型文档。

仅供参考，我实际上已经使用 Pagemaker 排版了一本 200 页的书（某人的自传）。虽然细粒度的字距调整和前导控制有助于复制拟合，但布置书本大小的文档仍然是一个高度手动的过程。在这种情况下，这本书只是纯文本，除了章节之外没有重要的交叉引用或结构。使用 Pagemaker 编写复杂的技术规范文档或这种大小的手册会非常繁琐，而且可能几乎不可能在没有任何错误的情况下正确完成。

**技术出版与文字处理软件**

这更多地描述了 MS-Word 对于大型规范文档的主要缺点。但是，它将说明大型文档所需的一些主要功能：

*   **索引和交叉引用：**这是 Word 中的一项真正的苦差事，而且非常不稳定。Framemaker 的标记功能和 LaTeX 的标签意味着您可以分配标签或已知标签（必要时以可预测的格式）。标签锚的文本格式在用户界面中公开，并用于链接。在 Word 中，锚点更加不透明，并且不容易以这种方式控制。结合笨拙的用户界面和产品的不稳定性，这使得维护这些繁琐，而且往往不稳定——你经常不得不手动修复它们。

*   **模板化布局：** word 中的样式支持非常基本，编号往往有些不稳定。FrameMaker 就是从标签驱动并基于标签应用样式。全局样式更改仅在 Framemaker 中起作用，而在 Word 中则不起作用。

*   **大型多文件文档：**我一直无法在 Word 中很好地使用它，但它是 Framemaker 和 LaTeX 中的一个关键特性。同样，Word 的不稳定性意味着您往往会花费大量时间来整理它。随着文档变大，花在这项工作上的时间比例呈二次方增长 - 破损倾向与*n*（文档大小）成正比 * 修复时间与大小*n*（修复时间）成正比

*   **为什么 Word 如此不稳定：** Word 在幕后做了很多工作来支持新手用户并干预布局。它也不是真正基于框架的（文本流在概念上与文档布局分开），但开发人员尝试在 UI 中实现各种类似框架的行为。当人工智能对复杂文档进行第二次猜测时，它通常会做错事。Framemaker '将用户视为成年人'并且不做任何事情，所以事情会留在你放置它们的地方。

    其他文字处理器（例如 Open Office 和 WordPerfect）的行为方式与 Word 并不完全相同，这也是 Word以外的***任何***文字处理器都能更好地处理技术文档的原因之一。

*   **Pre-Flighting：**在文档中，这是在提交打印之前检查文档（图像文件等）的文件组合是否正确的过程。专业系统会抱怨错误的地方，让您有机会纠正它。Word 只会装出一副幸福的表情，并尝试在幕后解决问题。

    一个很好的例子是带有链接图形的 word 文件。如果您将文件和图形复制到另一个目录并就地更新其中一个图形，word 很可能仍然从旧路径读取文件（我已经看到它这样做了）而不是您刚刚更新的新路径。然而，这种行为并不一致，并且代表了该产品中对不稳定启发式的猖獗滥用。

*   **印前支持：**出版系统延伸到工作流程的印前阶段。这意味着它涵盖了打印准备。文字处理软件往往不具有此功能或具有非常有限的形式。

无需深入探讨，关键区别在于，发布软件倾向于将您视为同意的成年人，而不是在您想要扩展或自动化事物时妨碍您。*可以*将文字处理软件用于大型文档，但它有许多设计决策适合临时用户编写短文档而很少考虑质量。这些适应是以牺牲大规模文档准备工作的任务适应性为代价的。我发现 Word for spec 文档的主要问题是索引和交叉引用不佳以及一般的不稳定问题，我总是不得不回去修复问题。但是，大多数环境（我是承包商）中的政治考虑意味着人们经常会坚持下去。

**关于技术文档软件状态的一些一般性评论**

如果 Adob​​e 没有继续发出他们试图弃用它并将其用户群转移到 InDesign 的信号，那么 Framemaker 将是显而易见的选择。然而，FM 被广泛用于航空航天、软件和工程界，如果 Adob​​e 的管理层在没有可靠的迁移路径的情况下真的将产品停产，他们将面临[一群私刑。](http://en.wikipedia.org/wiki/Lynch_mob)从网上了解到的情况来看，Adobe 收购 FM 是由 John Warnock 推动的，但他被赶下台，FM 成为办公室政治的受害者。最终结果是它已被转移到维护模式并且非常停滞不前。

Ventura Publisher 在某种程度上也被归入了一个小众市场，但至少 Corel 没有像 Adob​​e 那样有两条相互竞争的产品线。它可能是 FM 的一个合格的替代品，并且可能在政治上更容易被 PHB 类型接受，因为它被称为“商业出版”系统。

Quicksilver 和 Arbortext 似乎都是可行的产品，但价格非常昂贵。我也没有使用过，所以我无法对它们的优点做出任何真正的判断。

标记语言系统在许多方面都是免费且非常强大的。Lout 可能更容易使用，因为它没有 LaTeX 那样的遗留包袱。DocBook 也被广泛使用，并且有相当多的工具支持。这些技术极大地挤压了 Framemaker 市场份额的“极客”端，*并且这样做是基于它们的优点*——它们多年来可能从 Adob​​e 的利润率中拿走了相当大的一部分。我不会忽视这些技术，但在实践中它们会更难学习。

您可以尝试评估 InDesign 和一组选定的插件（专注于那些用于标记和交叉引用/索引管理的插件）。最后，一些文字处理软件（Wordperfect 和 OpenOffice）为您提供了一个合理的结构化文档工具包，并且在这方面的工作比 MS-Word 好得多。

**后记**

是的，这是一个双关语。我还没有提到任何这些产品的印前功能。印刷和印前本身就是技术领域，代价高昂的错误范围意味着您可能应该将其留给专家。Framemaker、InDesign、Ventura、QuickSilver、Arbortext 和（大概）MadCap 产品都配备了进行印前准备的设施。总的来说，文字处理软件没有。

使用 LaTeX 进行印前往往涉及使用[psutils](http://www.tardis.ed.ac.uk/~ajcd/psutils/)等软件对 PS 输出进行后处理或渲染为 PDF 并从那里进行印前工作流程。一般来说，大多数印前机构都可以使用 PDF，因此像 Distiller 这样的优秀 PDF 编写工具是使用非印前工作工具准备工作的最佳界面。请注意，[Distiller](http://www.adobe.com/products/acrobat/)的输出质量往往优于基于[Ghostscript](http://pages.cs.wisc.edu/~ghost/)的[PDFCreator](http://sourceforge.net/projects/pdfcreator/)等。

请注意，显示器的 RGB 色彩空间没有直接映射到印刷机使用的 CYMK 色彩空间。如果您没有合适的工具包，实际上要让颜色——尤其是彩色照片——在印刷机上正确打印出来有点令人担忧。对于印刷制作，请咨询专家，除非您有理由相信自己知道自己在做什么。对于一个普通用户，在我涉足这个行业 15 年后，我仍然会推荐这个，因为一旦他们致力于打印错误，修复它们的成本就***非常昂贵。***

如果您真的想在内部进行彩色打印工作，您可能需要[校准](http://www.normankoren.com/makingfineprints1A.html)您的显示器。为获得最佳效果，您应该从 HP购买[一台像这样](http://h20195.www2.hp.com/v2/default.aspx?cc=uk&oid=3648397&lc=en&jumpid=reg_R1002_UKEN)的高保真显示器。为了校准显示器，如果显示器没有配备传感器，您可能还需要像[本评论中描述的传感器之一。](http://www.drycreekphoto.com/Learn/monitor_calibration_tools.htm)[Nvidia](http://www.nvidia.co.uk/page/quadrofx_family.html)、[AMD](http://ati.amd.com/products/firegl.html)或[Matrox](http://www.matrox.com/graphics/en/products/graphics_cards/parhelia/)等大多数专业显卡都具有支持伽马校正的功能；许多消费者也这样做。您还需要获取用于印刷的印刷机的校准数据，尽管印前机构可能能够做到这一点。

如前所述，印刷媒体本身就具有很强的技术性，一旦印刷就容易出错并且修复成本很高。如果您不能 100% 确定您的校准是否正确，请获得像[Chromalin](http://www.answers.com/topic/chromalin)这样的颜色证明。这是从实际的胶片分离中完成的（因此非常昂贵），因此它可以准确再现最终印刷品的实际颜色。对几个示例页面执行此操作将为您提供有关校准设置是否正确的准确反馈。

**致谢：**感谢[Aidan Ryan](https://stackoverflow.com/users/1042/aidan-ryan)扩展了关于 Madcap 产品的部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-16T17:38:07.413

我会推荐 EC Software 的“ [Help & Manual](http://www.helpandmanual.com/) ”。您可以从单个源文档创建印刷手册、PDF、Windows 帮助文件 (CHM) 和基于 Web 的 HTML 帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-16T15:44:52.947

我听说过有关[FrameMaker](http://www.adobe.com/products/framemaker/)的好消息。我自己没有使用过它，但是为了这样的应用程序向我推荐了它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-16T16:15:29.797

Adobe Framemaker 确实是编写用户手册的经典工具。我已经将它用于各种长文档，并且效果很好。太糟糕了，Adobe 让它腐烂多年，然后才注意到用户不会切换。

MSWord 直到 2003 年才解决项目符号/编号错误，我不知道他们是否最终让主文档工作。

LaTeX 仍然是一个合理的选择。该格式易于处理，您可以从 wiki 生成它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T15:40:22.240

如果您想要协作，那么基于语言的方法（LaTeX 将是我的首选，尽管基于 XML 的方法也很好——Docbook 是这里的旗舰）确实有意义，尤其是当您使用版本控制系统跟踪文件时。

任何使事情复杂化的东西，例如任何具有二进制或专有格式的软件，都不会在这里为您提供帮助。

抱歉，如果这不是您想要的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T15:43:58.533

我同意 Ollivier 的观点，即使用 DocBook（或 LaTEX）是最简单的方法，可以轻松转换、合理的格式、良好的版本控制。

令人高兴的是，您可以尝试使用 DocBook 编辑器制作蛋糕并吃掉它。

试试[这个列表](http://wiki.docbook.org/topic/DocBookAuthoringTools)中的那些，看看是否有满足你的需求（我没有使用过）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-09T20:40:29.760

我们正在使用[EC Software](http://www.ec-software.com/)的“帮助和手册” ，它运行良好。我们的作者遍布美国，因此我们通过托管的 SVN 服务器共享我们的内容文件以管理版本控制。在每个工作站上，我们使用 Tortoise SVN 保持同步。该产品非常易于使用和生产。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-24T17:43:27.733

A VERY nice explanation on what O'Reilly (actually the ones selling all these books...) uses:

[O'Reilly Toolchain](http://www.apeth.net/matt/iosbooktoolchain.html)

It may seem complicated, but depending on the amount of pages you are going to write you maybe should put some consideration into it.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-16T15:42:21.063

Word（或您最喜欢的文字处理器）

我在 Word 中制作所有用户手册（不要与用户帮助文件混淆）。然后我可以确定它们是否需要 PDF、RTF、DOC 甚至转换为 HTML。为了解决多用户更新问题，我将文件存储在源代码管理中，它可以处理所有这些有趣的事情。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-16T15:55:57.217

有关使用 DocBook 等权衡的深入讨论，请参阅[Fastware Project博客。Scott Meyer 尝试了很多可能性并分享了他的想法。](http://fastwareproject.blogspot.com/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-11-28T18:53:19.720

Adobe InDesign CS5.5 在交叉引用和长文档方面比早期版本要好得多。它非常强大并且相对容易学习和使用。该功能集非常丰富，您了解的越多，您可以使用它做的事情就越多。它支持非常强大的 XML 功能，可以根据需要导入和导出 XML。它还可以将样式映射到标签，将标签映射到样式，如果您只需使用一整套字符和段落样式，就可以自动创建 XML。我已经使用该程序多年，并制作了从书籍到一次性广告的多个项目。它是一种图形设计工具，但支持书籍和手工制作的许多方面。如果您更关心图形、图像或插图，我推荐它。InDesign 支持多种导入和导出格式。

InDesign CS5.5 添加并改进了对 EPUB（电子书）和 Adob​​e 的 Digital Publishing Suite (DPS) 电子杂志格式的交互式内容和导出的支持。

Framemaker 是用于书籍、手册和长篇技术文档的绝佳工具。它比 InDesign 更难学习，但如果您有时间和兴趣学习如何使用它们，它有一套更丰富的工具来构建变量和运行页眉和页脚。它还有一个非常健壮的 XML 功能集，但我没有亲自使用过。

Unfortunately, Framemaker suffers from lack of support for graphic design. The color system is based very kludgey and spot (PMS) colors are hard to define. Simple things like adding a stroke color and fill color are rudimentary at best. For example, you still can't select a stroke color that's different from an objects fill color. The program is intended to output to laser and inkjet printers and not really to printing presses.

One feature that is really cool is the ability to apply master pages based on the Paragraph styles appearing on the page. The paragraph/illustration numbering in Framemaker is superior to any other program that I have ever used. But it is also difficult to learn and use.

Both programs support output to PDF and PostScript file formats and can generate hyperlinks and interactive content.

# .net - 可以自动更新数据库模式的 O/R 映射器？

> ID：371656
> 
> 赞同：3
> 
> 时间：2008-12-16T15:38:00.620
> 
> 标签：.net, orm

是否有任何 O/R 映射器可以在您更新业务对象时自动创建或修改数据库模式？环顾四周后，似乎大多数库通过从数据库模式创建业务对象以另一种方式工作。

我想拥有这种能力的原因是我正在计划一种将其数据存储在客户机器上的数据库中的产品。因此，当新版本出现时，我可能必须更新数据库架构。

另一个要求是映射器支持基于文件的数据库，如 SQLite 或 JET，而不仅仅是 SQL 服务器。

我知道 Developer Express 的 XPO 具有这种能力，但我想知道是否有任何替代方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T15:44:41.030

[NHibernate](http://www.hibernate.org/343.html)可以为您从业务对象生成数据库模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T08:59:52.530

[SubSonic 可以满足](http://subsonicproject.com/)您的需求。它有一个迁移类，可与声波指挥官一起使用。我修改了代码并将其放在我的应用程序的启动中，并让它检查版本差异并自动升级。这是您需要进行设置的方式：

1.  您需要添加版本化迁移类。如果您以前从未使用过 SubSonic，您可能想看看本[教程。](http://blog.wekeroad.com/blog/subsonic-using-migrations/)以下类保存为 \Migrations\001_initial.cs，如果您从 subsonic 调用 migrate.exe（在 VS 中），它会将当前数据库更新为可用的最新版本。您需要保留 3 位版本前缀作为您的文件名，以便 migrate.exe 如教程中所述正常工作。至于类名，我自己写的迁移类需要下划线和3位版本前缀才能正确检测版本。

//*不知道为什么我需要这一行来使代码块在下面工作

```
namespace MyApps.Migrations
{
    public class _001_Initial : Migration
    {
        public override void Up()
        {
            //Execute your upgrade query here
        }
        public override void Down()
        {
            //Execute your downgrade query here
        }
    }
} 
```

2.  在应用程序启动期间调用 CheckForMigration()。IsUpdateAvailable 将指示您需要更新数据库。您只需要调用 Migrate()。IsAppVersionOlder 表明您的应用程序是使用旧版本的数据库架构制作的（可能新应用程序的另一个副本已更新了数据库）。使用，您可以防止旧应用程序运行并损坏您更新的数据库。

//

```
using System;
using System.Collections.Generic;
using SubSonic;
using SubSonic.Migrations;

namespace MyApps.Migrations
{
    internal static class MigrationHelper
    {
        const string NameSpace = "MyApps.Migrations";
        private const string SCHEMA_INFO = "SubSonicSchemaInfo";
        public static int CurrentVersion { get { return currentVersion; } }
        public static int AppVersion { get { return latestVersion; } }
        public static bool IsUpdateAvailable { get { return (updateVersion.Count > 0); } }
        public static bool IsAppVersionOlder { get; private set; }
        public static bool Checked { get; internal set; }
        private static int currentVersion;
        private static int latestVersion;
        private static List<string> updateVersion;
        private static List<string> availableVersion;

        static MigrationHelper()
        {
            Checked = false;
        }

        /// <summary>
        /// Migrates the specified migration directory.
        /// </summary>
        public static void CheckForMigration()
        {
            currentVersion = Migrator.GetCurrentVersion("YourProviderName");
            Type[] allTypes =
                        System.Reflection.Assembly.GetExecutingAssembly().GetTypes();
            availableVersion = new List<string>();
            foreach (Type type in allTypes)
            {
                if (type.Namespace == NameSpace)
                    if (type.Name.Substring(0, 1) == "_")
                        availableVersion.Add(type.Name);
            }

            availableVersion.Sort();
            updateVersion = new List<string>();
            foreach (string s in availableVersion)
            {
                int version = 0;
                if (int.TryParse(s.Substring(1,3), out version))
                {
                    if (version > currentVersion)
                    {
                        updateVersion.Add(s);
                    }
                    latestVersion = version;
                }
            }
            IsAppVersionOlder = (latestVersion < currentVersion);
            //log.WriteLine(string.Format(
            ///"CheckForMigration: DbVer = {0}, AppVer = {1}, UpdateAvailable = {2}, IsAppOlder = {3}",
                //currentVersion, latestVersion, updateVersion.Count, IsAppVersionOlder));
            Checked = true;
        }

        internal static void Migrate()
        {
            foreach (string s in updateVersion)
            {
                Migration _migration = (Migration)Activator.CreateInstance(
                    System.Reflection.Assembly.GetExecutingAssembly().GetType(
                    "MyApps.Migrations." + s));
                _migration.Migrate("YourProviderName", Migration.MigrationDirection.Up);
                IncrementVersion();
            }
        }

        private static void IncrementVersion()
        {
            new Update(SCHEMA_INFO, 
            "YourProviderName").SetExpression("version").EqualTo("version+1").Execute();
        }

    }
} 
```

SubSonic 将自动将名为 SubSonicSchemaInfo 的表添加到您的数据库中，以帮助跟踪数据库版本。

帖子很长，希望没有遗漏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T17:17:57.237

NHibernate 可以更新架构还是删除并重新创建它？

# sharepoint - Sharepoint 2007 工作流在哪个进程中运行？

> ID：371657
> 
> 赞同：1
> 
> 时间：2008-12-16T15:38:36.157
> 
> 标签：sharepoint, moss

如果我更新包含工作流的程序集，我必须重新启动相应的 Windows 进程以获取新的程序集。

对于 Web 部件和东西，这只是有问题的 IIS 应用程序池 (iisapp /r)，对于 Timer Jobs，它是 OWSTIMER.exe (net stop/start SPTimerV3)

但是谁来运行工作流程？它们是否在 IIS 的应用程序池中运行并在我使用 iisapp /r 重新启动应用程序池时重新启动？如果是，要重新启动哪个 AppPool，如果我有一个用于站点 (:80) 和一个用于中央管理员 (:49173)？

**编辑：**根据答案，我设法将调试器附加到服务器，并且至少 feature.xml 中 Scope="Site" 的工作流确实在应用程序池的 w3wp.exe 中运行。不过，我还没有测试农场级别的工作流程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-21T14:32:45.360

SharePoint 中的工作流实例在 sptimerv3.exe 进程或 w3wp.exe 进程中运行。实例在任何特定时间运行在哪一个取决于最近的等待活动。如果工作流由于用户交互操作而启动，或者如果它在等待面向 Web 的用户活动后重新启动，则工作流实例将在 w3wp.exe 进程上执行。如果工作流实例由于延迟活动（一些超时）而重新启动，那么它将在 v3timer.exe 进程上运行。

我建议您使用内置于 SharePoint 工作流模板的 Visual Studio 2008，并在您的开发计算机上安装 Visual Studio 2008 和 SharePoint 2007。这避免了 SharePoint 中调试工作流的大部分复杂性，因为 Visual Studio 2008 会处理它。

或者，您可以使用 Visual Studio 附加到这两个进程来进行调试，它会正常工作。

在您的站点列表上运行的工作流实例*不会*在您的 Central Admin 进程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T15:43:53.307

层次结构是这样的：

*   应用程序池
*   Web应用程序
*   网站集
*   地点

特定 SharePoint Web 应用程序的工作流在为托管该特定 Web 应用程序的应用程序池设置的工作进程中运行。

管理中心通常有自己的 AppPool，因此在您的情况下，您需要重新启动站点的 AppPool (:80)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T12:49:41.163

Sharepoint 工作流在**OWSTIMER**进程上运行

# c++ - openGL转成png

> ID：371665
> 
> 赞同：4
> 
> 时间：2008-12-16T15:41:50.783
> 
> 标签：c++, opengl, png, ldf

我正在尝试将包含大量纹理（没有任何移动）的openGL [编辑：“我绘制的卡片”（？）:) thx unwind]转换为一个PNG文件，我可以在框架的另一部分中使用该文件我'我一起工作。是否有一个 C++ 库可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-16T16:29:02.313

如果您只是说“获取 OpenGL 渲染的场景并将其保存为图像”，那么它相当简单。您需要使用 glReadPixels() 读取场景，然后将该数据转换为图像格式，例如 PNG ( [http://www.opengl.org/resources/faq/technical/miscellaneous.htm](http://www.opengl.org/resources/faq/technical/miscellaneous.htm) )。

还有更有效的方法可以实现这一点，例如使用[FBO](http://www.songho.ca/opengl/gl_fbo.html#example)。您可以通过 FBO 将场景渲染为纹理，然后将该纹理渲染为全屏四边形，而不是将场景直接渲染到帧缓冲区中。然后，您可以获取此纹理并将其保存到文件中（例如，使用[glGetTexImage](http://www.opengl.org/sdk/docs/man/xhtml/glGetTexImage.xml)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T15:45:00.293

什么是“OpenGL 文件”？OpenGL 是一个图形 API，它没有指定任何文件格式。你的意思是DDS文件还是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T16:11:02.583

有比用显卡绘制它们更好的方法来制作合成纹理。这确实是您在 cpu 上之前想要做的事情，存储然后在需要时使用 opengl

# html - 将网站转换为 pdf 的最佳解决方案

> ID：371670
> 
> 赞同：1
> 
> 时间：2008-12-16T15:42:55.447
> 
> 标签：html, .net, pdf, export, screenshot

我为之工作的公司拥有我们开发的 CBT 系统。我们必须通过我们系统中的内容来创建书籍，我开发了一个程序，可以从我们的系统中下载所有内容，并创建不同培训模块的离线版本。

我创建了一个使用 CBT 离线版本创建 PDF 文档的程序。它通过使用网站截图来创建不同页面的屏幕截图，然后使用 iTextSharp 从这些图像创建 PDF 文档。

它似乎是一个记忆的拥抱，而且缓慢得令人痛苦。它需要将 40 个 CBT 模块变成书籍。即使每次创建一本书后我都会采取每一步来清除内存。大约 2 本书后，它崩溃了，因为没有剩下的内存了。

有没有更好的方法来做到这一点，而不必对页面进行屏幕截图，从而在 pdf 文档中产生与网页相同的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T15:51:33.137

我进行了搜索和演示，发现[WebSuperGoo 的 ABCPdf](http://www.websupergoo.com/abcpdf-1.htm)是 .NET 的最佳产品。这是最准确的，不需要打印机驱动程序。它使用 IE 作为渲染引擎，所以它看起来几乎和你在 IE 中得到的一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T15:49:35.077

[PrinceXML](http://www.princexml.com/)是从网站生成 pdf 的商业软件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T15:53:58.593

我过去使用过[PDFSharp](http://pdfsharp.com/PDFsharp/)，并且在生成 PDF 方面取得了很好的成功。

它也是开源的，因此如果遇到您提到的问题，您可以通过狩猎和啄食来提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T16:24:50.840

如果您控制源，那么直接生成pdf而不是通过屏幕截图可能并不太难。

你试过卸载dll吗？

获取屏幕截图的方法也有多种：

[http://mashable.com/2007/08/24/web-screenshots/](http://mashable.com/2007/08/24/web-screenshots/)

# linux - git-svn 是否有可接受的 Linux 目标 GUI 客户端？

> ID：371682
> 
> 赞同：18
> 
> 时间：2008-12-16T15:45:57.517
> 
> 标签：linux, git, version-control, git-svn

我的雇主使用 subversion 进行版本控制，这不太可能改变。我有兴趣了解有关 git 的更多信息，并使用 git-svn 与我雇主的颠覆存储库进行交互。我的问题是：如果我开始使用 git-svn，我需要从命令行完成部分或全部版本控制工作吗？或者是否有一个（linux）GUI 客户端可以执行我需要的所有 git-svn 相关任务？

更新：根据到目前为止的答案，似乎没有 git-svn 的 GUI 客户端。但是，我想提请注意Giggle GUI 客户端的[此功能请求](http://bugzilla.gnome.org/show_bug.cgi?id=566293)，以证明人们对此类功能感兴趣。希望可以在未来几个月的某个时候添加对这个问题的肯定答案。（事实上​​，我认为在不久的将来，与 subversion 交互的最佳方式可能是使用 git 的 GUI 客户端！）

更新 2：最近发布的 SmartGit 2.1 版本完全支持 Git/SVN 集成。这证明至少有一个 GUI 客户端允许 Git 和 SVN 一起使用。可能还有更多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T19:28:16.100

Git-SVN 没有 gui 客户端；所以你将不得不使用命令行来使用 Git-svn。幸运的是，你不需要学习太多就可以使用 git-svn。一些资源，从简单到详细：

*   [5分钟学习git-svn](http://tsunanet.blogspot.com/2007/07/learning-git-svn-in-5min.html)
*   [Git - SVN 速成课程](http://git.or.cz/course/svn.html)
*   [Subversion/SVK 用户和逃兵的 git-svn 简介](http://utsl.gen.nz/talks/git-svn/intro.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-06-04T07:12:30.503

[这个页面](http://www.syntevo.com/git-svn/index.html)似乎表明[SmartGit](http://www.syntevo.com/smartgit/index.html)可以做你想做的事。据我所知，您必须从 cmd/bash 进行初始初始化/克隆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T15:50:13.717

您可以将任何 GUI 客户端用于您想要使用的 Git。当您想与 Subversion 服务器交互时（例如，提交和更新），您只需要恢复到命令行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-07T14:36:34.927

我想知道是否有可能以某种方式拦截 git-gui 中的 Push 命令并使其运行 git-svn dcommit ？我已经添加了一个 git 别名来运行 !git-svn dcommit。

# reporting - 升级到 Birt 2.3.1 并记录 SEVERE: Not allowed selection any

> ID：371686
> 
> 赞同：0
> 
> 时间：2008-12-16T15:46:48.543
> 
> 标签：reporting, report, birt

升级到 BIRT 2.3.1 后有大量日志：

```
org.eclipse.birt.report.model.metadata.ChoicePropertyType validateXml
SEVERE: Not allowed choice any 
```

任何如何摆脱它们的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T07:10:17.523

我找到了解决方案。在升级到 2.3.1 期间，您必须从所有 BIRT 文件中删除指向**“任何”数据类型的链接。**

IMO 最简单的方法是从 *.rptdesign 文件中删除所有字符串，如下所示。

```
<property name="dataType">any</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-17T20:06:39.200

BIRT 2.5 中针对这种情况的错误消息是

```
SEVERE: not found choice: any 
```

非常令人困惑，但第一个答案很有帮助。

# c# - 流文件和字符集问题

> ID：371702
> 
> 赞同：0
> 
> 时间：2008-12-16T15:50:58.007
> 
> 标签：c#, encoding, character-encoding

我编写了一些代码，将期刊文章的一些细节导出到名为[Endnote的参考管理器](http://www.endnote.com/enhome.asp)

其格式是如下项目列表（作者）：

```
%A Schortgen Frédérique 
```

不幸的是，我在某处遇到了一些编码问题，因为当尾注打开文件时，这就是上述作者的原因：

> Schortge Frédérique

我疯狂地尝试使用我正在输出的编码和东西，但我不知所措，这是代码：

```
 Response.ContentType = _citation.ContentType;

        string fileExtension = "";
        if (_citation.GetFileExtension() != null)
            fileExtension = "." + _citation.GetFileExtension();

        Response.AddHeader("content-disposition", "attachment; filename=citation" + fileExtension);
        Response.ContentType = _citation.GetFileReferrer();
        Response.Charset = "UTF-8";
        Response.write(-snip-);
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T16:00:14.757

看起来 Endnote 并不期待 UTF-8。你有 Endnote期望的细节吗*？*您可能会发现使用 Encoding.GetEncoding(1252) 或 Encoding.GetEncoding(28591)（分别是西方代码页 1252 和 ISO-8859-1）可能会起作用。

顺便说一句，您设置 Response.ContentType 两次。这听起来不太可能是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T11:34:17.430

```
Response.Charset = "ISO-8859-1";            
Response.ContentEncoding = System.Text.Encoding.GetEncoding(28591);
Response.HeaderEncoding = System.Text.Encoding.GetEncoding(28591); 
```

你先生，是一个传奇（再一次）

# c# - 为什么 EventInfo.RemoveEventHandler 会抛出 NullReferenceException？

> ID：371703
> 
> 赞同：3
> 
> 时间：2008-12-16T15:51:06.803
> 
> 标签：c#, .net, reflection, mshtml

我有一些代码使用反射在 Internet Explorer BHO 中的 MSHTML 对象上安装 .NET 事件处理程序，它似乎工作正常。但是，当我尝试删除事件处理程序时，我遇到了麻烦。

事件处理程序安装和删除的代码如下所示：

```
public class HandlerExample {
    private static void Handler(IHTMLEventObj e) { ... }
    private static Delegate handlerDelegate;

    public static void InstallHandler(IHTMLElement target, string eventName)
    {
        // FindInterface() finds the correct event interface for the particular subclass of
        // IHTMLElement that target really is
        Type eventInterface = FindInterface(target);
        EventInfo eInfo = eventInterface.GetEvent(eventName);
        Type tHandler = eInfo.EventHandlerType;

        handlerDelegate = Delegate.CreateDelegate(tHandler, typeof(HandlerExample), "Handler");

        eInfo.AddEventHandler(target, handlerDelegate);
    }

    public static void RemoveHandler(IHTMLElement target, string eventName)
    {
        Type eventInterface = FindInterface(target);
        EventInfo eInfo = eventInterface.GetEvent(eventName);
        eInfo.RemoveEventHandler(target, handlerDelegate); // THIS LINE CRASHES
    }
} 
```

调用`InstallEventHandler`工作正常，`Handler`然后在浏览器中触发事件时调用。当我`RemoveEventHandler`使用与调用相同的参数进行`InstallEventHandler`调用时，最后一行抛出 a `TargetInvocationException`，内部异常为`NullReferenceException`。我无法弄清楚我在这里做错了什么，堆栈跟踪也没有多大帮助。

**编辑：**我已经通过调试器中的代码，我直接引用的对象变量都不是空的。

我也尝试在 InstallHandler 方法中调用`AddEventHandler`和调用`RemoveEventHandler`，并且工作正常。

堆栈跟踪如下：

```
System.Reflection.TargetInvocationException 发生
  Message="调用的目标已抛出异常。"
  来源="mscorlib"
  堆栈跟踪：
       在 System.RuntimeMethodHandle._InvokeMethodFast（对象目标，Object[] 参数，SignatureStruct& sig，MethodAttributes methodAttributes，RuntimeTypeHandle typeOwner）
       在 System.RuntimeMethodHandle.InvokeMethodFast（对象目标，对象 [] 参数，签名 sig，MethodAttributes 方法属性，RuntimeTypeHandle typeOwner）
       在 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化，布尔型 skipVisibilityChecks）
       在 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化）
       在 System.Reflection.EventInfo.RemoveEventHandler（对象目标，委托处理程序）
       在 RemoveHandler（IHTMLElement 目标，字符串事件名称）
  内部异常：System.NullReferenceException
       Message="对象引用未设置为对象的实例。"
       来源="Microsoft.mshtml"
       堆栈跟踪：
            在 mshtml.HTMLTextContainerEvents2_EventProvider.remove_onclick(HTMLTextContainerEvents2_onclickEventHandler )
            在 mshtml.HTMLTextAreaElementClass.HTMLTextContainerEvents2_Event_remove_onclick(HTMLTextContainerEvents2_onclickEventHandler)
       内部异常：
```

这可能是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T16:57:33.737

好吧，当您调用 RemoveHandler 时，看起来您的 handlerDelegate 为空。我不确定为什么会发生这种情况，但是您是否尝试过在调用 RemoveEventHandler 之前实例化 handlerDelegate？

# java - Java JAXB 优点/缺点和文档

> ID：371705
> 
> 赞同：13
> 
> 时间：2008-12-16T15:51:20.190
> 
> 标签：java, documentation, jaxb

自从我愤怒地使用Java以来​​已经有一段时间了，所以如果这很愚蠢，请原谅我。

我刚刚开始使用 JAXB 来反序列化传入的 XML 字符串（来自 Jetty 服务器）的 Java 项目。该项目仅针对这种情况使用 JAXB。

JAXB 的替代品是什么？
JAXB 对这些替代方案的优缺点是什么

我进行了一些谷歌搜索并找到了很多参考资料，但是是否有一个明确的来源是 JAXB 问题的转到位置，或者人们只是看到人们在做什么并从那里解释。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-16T23:45:08.483

我发现 JAX-B 非常有用，实际上比许多替代方案更喜欢它，尤其是当我从头开始并从 Java 对象而不是从模式中生成 Java 对象时。

根据我的经验，无论出于何种原因，我发现仅通过 Google 搜索很难找到好的文档。JAX-B 下载中提供了最好的电子文档，您还可以在其中找到大量示例。“ [SOA Using Java Web Services](https://rads.stackoverflow.com/amzn/click/com/0130449687) ”也有很好的概述。

至于替代品，有：

*   [XStream](http://xstream.codehaus.org/)
*   [蓖麻](http://castor.codehaus.org/xml-framework.html)

可能还有更多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-17T14:19:09.593

想到 XML Bean ( [http://xmlbeans.apache.org/](http://xmlbeans.apache.org/) )

JAXB 的优点之一是它现在与 JDK6 捆绑在一起。生成输出非常紧凑且高效。我们目前正在将所有 XML Bean 实现转换为使用 JAXB 2。我们看到的最大缺点是缺少 XSD 相关操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-16T17:34:50.777

我一直在为几个项目使用 JAXB。我认为它最好的一点是它与 JAX-WS 和 JAX-RS（JSR 311，Restful 规范）等新技术的集成。

如果您使用 Jetty 将传入的 XML 作为字符串处理，我会认真考虑查看 JAX-RS。它为您处理所有 JAXB 绑定内容，您只需使用一个对象。

对于 REST 样式和 SOAP Web 服务，我对通过 CXF 的 JAXB 非常满意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-17T18:15:07.917

我已经尝试了许多列出的建议，并且更喜欢简单。它在整体上相对较新，但成熟稳定，并且似乎考虑了其他 XML 框架的很多抱怨。我强烈建议阅读首页，如果可能的话，在你的项目中给它一个概念原型的快速证明。

[http://simple.sourceforge.net/](http://simple.sourceforge.net/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-21T08:57:38.073

看这里：http: [//jcp.org/en/jsr/all](http://jcp.org/en/jsr/all)对于 JSR-222。此 Java 规范请求指定标准（非免费）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T20:38:34.133

对于 JAXB 的替代方案，您可能需要查看 XFire ( [http://xfire.codehaus.org/](http://xfire.codehaus.org/) ) 或 Axis2 ( [http://ws.apache.org/axis2/](http://ws.apache.org/axis2/) )。这些似乎是 2 种流行的替代方案，我相信现在两者都是 JAX-WS 投诉。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-17T14:21:11.663

如果您有要解析的 xml 的对象模型，那么[XStream非常好。](http://xstream.codehaus.org/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-26T02:46:03.853

其他替代方案可能是 Castor、JibX、XMLBeans 或 JDOM。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-09T07:36:05.407

其实我用过Castor。在 xml 绑定的情况下，它比 JAXB 更好。它提供了映射现有 Java bean 的功能。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-29T09:41:05.040

JAXB 的一大缺点（如果在传输对象中使用注释）是 Android 不支持 JAXB 注释（类未知）并且您不能手动添加它们。另请参阅[将 JAXB 与 Google Android 一起使用](https://stackoverflow.com/questions/5461127/using-jaxb-with-google-android)

# model-view-controller - 如何构造两个对象，彼此作为参数/成员

> ID：371708
> 
> 赞同：1
> 
> 时间：2008-12-16T15:52:04.900
> 
> 标签：model-view-controller, language-agnostic, oop

我有两个类，每个类都需要一个彼此的实例才能起作用。通常，如果一个对象需要另一个对象来运行，我喜欢在构造函数中传递它。但在这种情况下我不能这样做，因为一个对象必须在另一个对象之前实例化，因此第二个对象不存在以传递给第一个对象的构造函数。

我可以通过将第一个对象传递给第二个对象的构造函数来解决此问题，然后在第一个对象上调用 setter 以将第二个对象传递给它，但这似乎有点笨拙，我想知道是否有更好的方法：

```
backend = new Backend();
panel = new Panel(backend);
backend.setPanel(); 
```

我从来没有研究过 MVC。我想我在这里处理一个模型（后端）和一个视图或控制器（面板）。我可以从 MVC 中获得任何见解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T16:05:55.667

是时候看看 MVC 了。:-) 当你遇到模型-视图-控制器的情况时，共识是模型不应该知道视图控制器（MVC 通常表现为 M-VC），但视图总是知道模型.

如果模型需要告诉视图一些事情，它通过通知它的听众来做到这一点，它可能有多个。你的观点应该是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T15:57:15.123

在循环构造场景中，我会使用工厂类/工厂方法。我通常会将构造逻辑设为工厂私有（使用友元构造、包级别保护或类似方法），以确保没有人可以在不使用工厂的情况下构造实例。

setter/constructor 的使用实际上是两个类和工厂之间契约的一部分，所以我只使用方便的那个。

正如已经指出的那样，您确实应该尝试找到一个非循环的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-16T16:09:39.870

首先，与其他人在这里所说的相反，循环引用没有固有的问题。例如，Order 对象应该具有对下订单人的 Customer 对象的引用。类似地，Customer 对象拥有他所下的订单列表是很自然的。

在基于引用的语言（如 Java 或 C#）中完全没有问题。在基于值的语言（如 C++）中，您必须小心设计它们。

也就是说，您的设计：

```
backend = new Backend();
panel = new Panel(backend);
backend.setPanel(panel); 
```

这几乎是唯一的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T15:58:41.327

最好避免循环引用。我个人会尝试重新考虑我的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T16:12:00.630

```
panel = new Panel(backend); 
```

您在此例程中执行此操作，例如

```
 Public Sub Panel(ByVal BackEnd as BackEnd)
        Me.MyBackEnd = BackEnd
        BackEnd.MyPanel = Me
  End Sub 
```

你不需要 BackEnd.SetPanel

最好使用代理。代理通过引发事件将一个对象链接到另一个对象。父母交给孩子一个代理。当孩子需要父母时，它会在代理上调用 GetRef 方法。然后代理引发一个事件，父使用该事件将自身返回给代理，然后将其交给子。

事件/委托机制的使用避免了任何循环引用问题。

所以你有（假设后端是这里的'父'）

```
 Public Sub Panel(ByVal BackEnd as BackEnd)
        Me.MyBackEnd = BackEnd.Proxy
        BackEnd.MyPanel = Me
  End Sub

  Public Property MyBackEnd() as BackEnd
     Set (ByVal Value as BackEnd)
        priBackEndProxy = BackEnd.Proxy
     End Set
     Get
        Return priBackEndProxy.GetRef
     End Get
  End Property 
```

这是关于循环引用问题的更全面的讨论。尽管它专注于在 Visual Basic 6.0 中修复它。

[动态内存分配](https://stackoverflow.com/questions/264541/dynamic-memory-allocation-in-vb6)

另一个解决方案是将 Panel 和 BackEnd 聚合到另一个对象中。如果两个元素都是 UI 控件并且需要以协调的方式运行，这很常见。

最后，就 MVC 而言，我建议改用 Model View Presenter 方法。

基本上你有你的表单实现一个 IPanelForm 接口。它向一个名为 Panel 的类注册自己，该类执行所有 UI 逻辑。BackEnd 应该具有 Panel 可以在模型更改时挂钩的事件。Panel 处理事件并通过 IPanelForm 接口更新表单。

1.  用户单击按钮

2.  表单传递给用户单击按钮的面板

3.  Panel 处理按钮并从后端检索数据

4.  面板格式化数据。

5.  Panel 使用 IPanelForm 接口在 Form 上显示数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-07T20:57:03.897

我一直在推迟实施这里学到的经验教训，让我有足够的时间思考正确的方法来做到这一点。正如其他人所说，明确区分后端对象在其属性发生变化时具有侦听器的位置绝对是要走的路。它不仅会解决我在这个问题中提出的具体问题，还会让这段代码中的许多其他不良设计气味看起来更好。实际上有很多不同的后端类（按照我在示例中使用的通用类名），每个类都有自己对应的 Panel 类。甚至有几个地方可以移动一些东西，以按照相同的模式将其他类对分成后端/面板对，并减少大量传递垃圾作为参数。

这个答案的其余部分将针对特定语言，因为我使用的是 Java。

我并不十分担心“JavaBeans”，但我发现过去遵循基本的 JavaBean 约定对我非常有帮助：基本上，使用标准的 getter 和 setter 属性。原来有一个我不知道的 JavaBean 约定在这里真的会有所帮助：绑定属性。绑定属性是可通过标准 getter 和 setter 获得的属性，它们在更改时触发 PropertyChangeEvents。[我不确定，但 JavaBeans 标准可能会指定所有属性都应该是“绑定属性”。在这一点上，与我无关。还要注意，通过使用 BeanInfo 类来定义 JavaBean 的确切接口，“标准”getter 和 setter 可能非常不标准，但我也从不使用它。

我找到[了这个博客条目](http://weblogs.java.net/blog/rbair/archive/2006/05/the_unknown_jav.html)，它非常有助于让我了解绑定的属性/PropertyChangeEvents 问题，并帮助我制定如何重新编写此代码的计划。

现在我所有的后端对象都继承自一个名为 Model 的通用类，它提供了这个系统中每个后端需要的一些东西，包括序列化支持。我将创建一个附加类 JavaBean 作为 Model 的超类，它将提供我需要的 PropertyChangeEvent 支持，由每个 Model 继承。我将更新每个模型中的设置器以在调用时触发 PropertyChangeEvent。我也可能有几个类继承了 JavaBean，这些类在技术上与这些类不同，但它们也可以从将其他类注册为它们的侦听器中受益。JavaBean 类可能没有完全实现 JavaBean 规范；正如我所说，有几个细节我不关心。但是对于这个项目来说已经足够了。听起来我可以通过从 java.awt.Component 继承来获得所有这些，但这些在任何意义上都不是我可以证明的组件，所以我不想这样做。（我也不知道它可能需要什么开销。）

一旦每个模型都是一个 JavaBean，并支持 PropertyChangeEvent，我将进行大量代码清理：当前保留对面板的引用的模型将被更新，面板将自己注册为侦听器。干净多了！当属性更新时，模型不必知道（并且不应该首先知道）面板应该调用自己的哪些方法。

# sql-server - 您在 SQL Server 中使用什么数据类型进行枚举

> ID：371716
> 
> 赞同：3
> 
> 时间：2008-12-16T15:54:18.717
> 
> 标签：sql-server, enums

当我们将枚举从 C# 序列化到 SQL Server 时，我们使用 NCHAR(3) 数据类型，枚举的每个值都有助记符值。这样我们就可以轻松读取 SELECT qry。

你如何将枚举保存到你的数据库中？

你使用什么数据类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T16:02:32.320

更好的方法是存储为 int。这样您就可以从数据库反序列化/强制转换回正确的枚举值。

如果枚举将来可能会更改，则使用显式值，例如

```
public enum ActionType
{
  Insert = 1,
  Update = 2,
  Delete = 3
} 
```

存储为助记词的实用性一定会导致您根据助记词生成算法发生冲突？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-16T15:58:25.213

我为每个枚举使用带有 ID 和描述的单独参考数据表。您可以将它们全部分组到一个带有 ID、类型和描述的表中，但我发现您经常最终希望随着时间的推移扩展这些表，如果您将所有参考数据分组到一个表中，从长远来看会使生活变得更加困难跑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-16T15:59:24.853

我一直只在 MSSQL 中使用查找表，否则我会在支持它们的数据库中使用枚举。如果您使用某种 char 类型，则必须使用检查约束来确保插入或更新的值是枚举的成员。

当枚举的成员发生变化时，我一直觉得向查找表添加条目比更改检查约束更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:11:35.887

[这是我在另一个线程上的答案。](https://stackoverflow.com/a/11759395/1545350)

我认为最好的方法是使用带有 int 的查找表，如上所述，但将其与代码生成相结合以保持 DRY 原则（不要重复自己）。

[这是代码生成示例的链接。](http://erraticdev.blogspot.co.il/2011/01/generate-enum-of-database-lookup-table.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T16:02:26.377

nchar(3) 用于助记符？

正如 Martin 所指出的，使用 INT 作为 PK、VARCHAR 标识符作为 UK、NVARCHAR 描述的查找表。

您可以编写一个存储过程来将表值脚本化为 C# 枚举或 C# 公共常量。

因此，这些值记录在数据库和 C# 源代码中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-16T16:14:04.590

我将它们保留为整数。它真正可爱地将它们相互转换为 (int)enum 和 (enum)int :) 我的另一个最喜欢的是 dropdownlist.datasource = Enum.GetNames(typeof(EnumType));

这是不是太原始了，因为你在谈论很多复杂的东西

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-07T15:22:20.770

它没有。有一个模糊的等价物：

Genre VARCHAR(10) NOT NULL CHECK (Genre IN('Male', 'Female', 'Others'))

# php - 文件/图像复制

> ID：371721
> 
> 赞同：5
> 
> 时间：2008-12-16T15:55:27.030
> 
> 标签：php, mysql, sql-server, apache, image

我有一个简单的问题，希望听听其他人的经验，了解哪种方法是跨多个主机复制图像的最佳方式。

我已经确定将图像存储在数据库中，然后在多个主机上使用数据库复制将导致最大可用性。

我对文件系统的担心是同步图像的困难（例如，我不希望 5 个服务器都为图像访问同一服务器！）。

现在，我在数据库中存储图像的唯一问题是访问数据库的额外查询以及如果我希望“虚拟”图像链接指向数据库条目，我必须在 apache 中进行额外的处理。（例如 AddHandler）

据我的理解：

*   如果您有一个提供图像的脚本：每个图像都需要一个数据库调用。
*   如果将图像内联显示为二进制数据：这可以在单个数据库调用中完成。
*   要提供外部/可链接图像，您必须为您希望“伪造”的扩展添加一个 addHandler，并将其指向您的脚本语言（例如 php、asp）。

我可能错过了一些东西，但我很好奇是否有人有更好的想法？

* * *

编辑：Tom 建议使用 mod_rewrite 来使用 AddHandler 进行保存，我已接受作为 AddHandler 问题的建议解决方案；但是我觉得我还没有一个完整的解决方案，所以请继续回答；）

一些人建议在 Apache 上使用 lighttpd。lighttpd 的 ISAPI 模块有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T16:23:51.870

如果您将图像存储在数据库中，您会受到额外的数据库影响，并且*您*会失去 Web 服务器中固有的缓存/文件服务优化。Apache 提供静态图像的速度比 PHP 管理它的速度要快得多。

在我们的大型应用环境中，我们最多使用 4 个集群：

*   应用服务器集群
*   Web服务/数据服务集群
*   静态资源（图片、文档、多媒体）集群
*   数据库集群

您会惊讶于静态资源服务器可以处理多少流量。由于它不是真正的计算（没有应用程序逻辑），因此可以疯狂地优化响应。如果您使用单独的静态资源集群，那么您也可以只更改架构的那一部分。例如，在某些基准测试中，[lighttpd](http://www.lighttpd.net/)在提供静态资源方面甚至比 apache 更快。如果您有一个单独的集群，您可以在那里更改您的 http 服务器，而无需更改应用程序环境中的任何其他内容。

我将从一个 2 机静态资源集群开始，看看它是如何执行的。这是分离函数的另一个好处——你可以只在需要的地方进行扩展。至于同步文件，看看现有的[文件同步](http://en.wikipedia.org/wiki/File_synchronization)工具与滚动你自己的工具。您可能会发现无需编写一行代码即可满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-17T06:29:30.010

从您决定存储它们的任何位置提供图像是一个小问题；我不会讨论如何解决它。

决定将它们存储在哪里是您需要做出的真正决定。你需要考虑你的目标是什么：

*   硬件冗余
*   大量廉价存储
*   读取缩放
*   写缩放

最后两个不一样，肯定会出问题。

如果您确信此映像库的大小不会超过您愿意放在 Web 服务器上的磁盘（例如，在撰写本文时为 200G，这是可以获得的最大高速服务器级磁盘） ; 我假设您想使用 1U 网络服务器，因此您将无法在 raid1 中存储更多内容，具体取决于您的供应商），然后您可以通过将所有图像的副本放置在每个网络服务器。

当然，您可能还想在某个地方保留一个主副本，并拥有一个不时同步它们的守护程序或进程，并进行监控以检查它们是否保持同步并且该守护程序工作，但这些都是细节。在每个 Web 服务器上保留一个副本将使读取缩放非常完美。

但是到处保留副本会破坏写入可扩展性，因为每个 Web 服务器都必须写入每个更改/新文件。因此，您的总写入吞吐量将被限制在集群中最慢的单个 Web 服务器上。

在许多服务器之间“分片”您的图像数据将提供良好的读/写可扩展性，但这是一项不平凡的练习。它还可能允许您使用便宜的（ish）存储。

拥有一个带有昂贵 IO 硬件的中央服务器（或主动/被动对或其他东西）将比在任何地方使用“便宜”的 IO 硬件提供更好的写入吞吐量，但是您将受到读取可扩展性的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T16:20:20.817

将图像保存在数据库中并不一定意味着每个图像都需要调用数据库。您可以在检索它们时将它们分别缓存在每个主机上（例如在临时文件中）。源图像仍将在数据库中，并且易于跨服务器同步。

您也不需要添加 Apache 处理程序来通过 PHP 脚本提供图像，同时保持良好的 url - 您可以制作[http://server/image.php/param1/param2/param3.JPG](http://server/image.php/param1/param2/param3.JPG)之类的 url 并读取参数通过`$_SERVER['PATH_INFO']`. 您还可以使用 mod_rewrite 删除 URL 的“image.php”部分（如果需要）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-16T17:01:12.373

您正在寻找的已经存在并且称为[MogileFS](http://danga.com/mogilefs/ "MogileFS") 目标设置涉及 mogilefsd、复制的 mysql 数据库和用于服务文件的 lighttd/perlbal；它将为您带来故障转移、细粒度的文件复制（例如，您可以决定在多个物理设备上复制最终用户图像，并只保留一个物理缩略图实例）。负载平衡也可以很容易地实现。

# xslt - 我怎样才能做一个列表选项

> ID：371725
> 
> 赞同：1
> 
> 时间：2008-12-16T15:57:08.350
> 
> 标签：xslt

在伪代码中

```
If Domain inList(GB,US,ES,FR Then
   Print This Html
Else
  Print This HTML
EndIf 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T16:55:48.577

这是一种*非常*通用的形式，但是您在设计时不知道列表，只要您可以获得对代表列表的节点集的引用，您就可以进行简单的测试，例如：

```
<xsl:when test="$listset/item[@property=$variable]"> 
```

在哪里说 $variable = /foo/bar/@property 和 $listset = /foo/list for XML

```
<?xml version="1.0"?>
<foo>
  <bar property="gb" />
  <list>
    <item property="gb"/>
    <item property="us"/>
  </list>
</foo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T16:45:20.703

尝试使用[xsl:choose。](http://www.w3schools.com/Xsl/el_choose.asp)（另请参阅[此处的规范](http://www.w3.org/TR/xslt#section-Conditional-Processing-with-xsl:choose)）它提供了基本的 if/else 功能。编辑 - 我做了测试，它的工作原理：

```
<xsl:choose>
  <xsl:when test="domain = 'GB' or domain = 'US' or domain = 'ES' or domain = 'FR'">
    print this html
  </xsl:when>
  <xsl:otherwise>
    print other html
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-16T23:44:22.900

如果您使用 XSLT 2.0 给定文件

你可以使用这样的东西：
`<xsl:template match="list/item">
Property [<xsl:value-of select="@property"/>] html
</xsl:template>

<xsl:template match="list/item[some $x in ('us', 'gb') satisfies $x eq @property ]">
Property [<xsl:value-of select="@property"/>] HTML
</xsl:template>` 

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-17T00:40:15.143

**当前 3 个答案未提及的另一种解决方案**是拥有一串选项，您将与`domain`. 然后是下面的 XPath 表达式（在 any 的`@test`属性中，`<xsl:if>` 或者当 的值是字符串中的分隔值之一时精确`<xsl:when>`计算（在这个具体示例中，我们使用空格作为分隔符）：`true()``domain`

  **`contains(' GB US ES ', concat(' ', domain, ' '))`**

这里我们假设 的值中没有空格`domain`。如果这不能保证，XPath 表达式也可以验证这个要求：

  **`not(contains(domain, ' '))`**
**`and`**
  **`contains(' GB US ES ', concat(' ', domain, ' '))`**

# excel - 如何永久阻止 Excel 将所有新文档设置为 R1C1 模式？

> ID：371728
> 
> 赞同：0
> 
> 时间：2008-12-16T15:58:08.193
> 
> 标签：excel, excel-2007

每次创建新的excel表格时，我都必须进去将其单元格引用模式更改为熟悉的A1、B1等。我似乎无法找到将其永久设置为A1样式的方法。

是否有我可以编写的宏或使用模板或其他东西的方法，这样我就不必不断更改 R1C1 设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-16T16:06:36.413

在 Office 2007 中，单击 Office 按钮，然后单击 Excel 选项，您将在最后的退出 Excel 附近找到该选项。

转到公式选项卡并在使用公式下，选中或取消选中 R1C1 参考样式以使用它或将其更改为 A1 参考样式。

[![](https://i.stack.imgur.com/hfZTf.jpg)](https://i.stack.imgur.com/hfZTf.jpg)
[（来源：[lytebyte.com](http://www.lytebyte.com/wp-content/uploads/2008/05/r1c1-reference-style-in-excel-2007.jpg)）]

如果它不坚持你有一些问题`personal.xls`或默认模板或我猜的东西......

编辑：

**先试试这个：** 关闭所有电子表格。假设您之前创建了一个，请取消隐藏您的`Personal.xls`工作簿（窗口>取消隐藏；在 Excel 2007 及更高版本中，查看，取消隐藏），然后取消选中 R1C1 参考样式。保存您的 Personal.xls，重新隐藏并关闭 Excel（单击是保存对 Personal.xls 的更改）。运气好的话，您现在应该可以恢复默认的 A1 样式了。您必须对 XLSTART 目录中的任何其他工作簿和/或工具>选项>常规选项卡中的启动位置重复上述操作。

**然后是：** 帮助>检测和修复。
如果不好，请尝试[http://support.microsoft.com/kb/291288](http://support.microsoft.com/kb/291288)

**最后的手段：** 使用开始>运行`excel /regserver`
注意“excel”后面的空格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T16:08:59.780

您可以创建一个工具栏按钮，允许您将工作表更改为 A1 类型引用。这个 Excel 宏将完成这项工作：

```
 Sub useA1references ()
      Application.ReferenceStyle = xlA1
  End Sub 
```

如果可行，您可以将宏设置为在[打开 Excel 或创建新工作簿](http://office.microsoft.com/en-us/excel/HA010346281033.aspx)时运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-17T09:58:54.267

就我而言，只有[此链接](https://answers.microsoft.com/en-us/msoffice/forum/msoffice_excel-mso_winother-mso_2007/excel-keeps-unilaterally-changing-reference-style/e8716ca1-6ec3-4fb4-97fe-6463fa941cd2)有效（我将答案粘贴在这里，因为它可能会消失）：

> 1.  按 [Alt]+[F11] 启动 VBE。
> 2.  如果“立即”窗口不可见，请按 [Ctrl]+g。
> 3.  在立即窗口中，键入？application.StartupPath 并按 Enter。VBA 将显示 XLStart 的路径。
> 4.  记下响应。我的是 C:\Users\Bernard\AppData\Roaming\Microsoft\Excel\XLSTART
> 5.  打开一个新工作簿
> 6.  打开 Excel > 文件 > 选项 > 公式 > 取消选中“使用样式”下的“R1C1 参考样式”> 单击“确定”。
> 7.  单击文件 > 另存为 > 浏览到 XLSTART 文件夹并将文件命名为 Book.xltx。按确定

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-11T18:13:09.037

R1C1 引用样式设置的最大问题是 Excel 将其保存在模板和/或文件中。这种行为是不可预测的，并且因版本而异。因此，有时，此设置会像蠕虫一样从单个文件中传播。

为了解决这个问题，我编写了一个[小](https://github.com/Programmierus/excel-no_r1c1)插件，它默默地强制所有现有和新工作簿使用 A1 参考样式。它还包含一个请求的宏，并在 Office 2016 和 2019 上进行了测试。

还值得一提的是，[Office ADMX 模板](https://www.microsoft.com/en-us/download/details.aspx?id=49030)具有控制 R1C1 默认值的内置策略（用户策略/管理模板/Microsoft Excel 2016/Excel 选项/公式/R1C1 参考样式）。不过，它根本不会影响现有文件和模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T16:19:43.267

我想模板已经用 R1C1 选项保存了。也许您可以打开它，更改选项并覆盖原始模板？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-16T16:21:56.663

正如 In.Site 提到的，这可能是一个默认模板问题。如果您用未选中该框的选项覆盖默认`R1C1 reference`设置，它应该记住该设置。

这是 KB 描述的哪里可以找到默认模板：http: [//support.microsoft.com/kb/924460](http://support.microsoft.com/kb/924460)

找到模板，打开它，取消选中`R1C1 参考框，然后覆盖旧模板。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-16T20:11:08.603

不直接适用，但是...

出于我的某些目的，R1C1 表示法非常有用，因此我制作了一个宏来切换它并将其附加到工具栏按钮：

```
With Application
    If .ReferenceStyle = xlA1 Then
        .ReferenceStyle = xlR1C1
    Else
        .ReferenceStyle = xlA1
    End If

End With ' Application 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-22T03:46:25.057

我已经编写了一个插件来解决这个（和相关的）问题 wrt R1C1 寻址。可以将加载项配置为以特定格式（R1C1 或 A1 模式）保存所有工作簿，并在您打开工作簿时强制 Excel 进入所需的寻址模式。它还在功能区上提供了一个用于在寻址模式之间切换的按钮。可从以下网址获得：[http ://rath.ca/Misc/VBA/Excel/RC_A1_Toggle_v2.zip](http://rath.ca/Misc/VBA/Excel/RC_A1_Toggle_v2.zip)

# unit-testing - 我应该在同一个项目中混合我的单元测试和集成测试吗？

> ID：371738
> 
> 赞同：9
> 
> 时间：2008-12-16T16:01:02.493
> 
> 标签：unit-testing, nunit, integration-testing

我正在使用 NUnit 来测试我的 C# 代码，并且到目前为止，我一直将单元测试（快速运行的测试）和集成测试（运行时间更长的测试）分开，并保存在单独的项目文件中。我使用 NUnit 进行单元测试和集成测试。我刚刚注意到 NUnit 提供的[category 属性](http://www.nunit.org/index.php?p=category&r=2.2)，以便可以对测试进行分类。这就引出了一个问题，我应该将它们混合在一起并简单地使用类别属性来区分它们吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-16T16:07:31.793

如果分开它们不是太困难，现在就这样做

单元测试应该尽早并经常运行（例如，每次更改某些内容、签入前、签入后），并且应该在短时间内完成。

集成测试应定期（例如每天）运行，但可能需要大量时间和资源才能完成

因此最好将它们分开

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T16:10:20.277

如果可能，将它们分开，因为集成测试通常比 UnitTests 花费更长的时间。也许你的项目增长了，你最终得到了很多测试，所有这些都需要很短的时间——除了集成测试——你想尽可能频繁地运行你的单元测试......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T16:08:05.037

我发现使用单独的项目进行单元测试和集成测试往往会在项目中创建太多顶级工件。即使我们是 TDD 和所有，我仍然认为正在开发的代码应该至少值得我的项目结构顶层的一半。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T16:03:24.783

我会继续使用您当前使用的任何方法。这更像是一种意见，您不希望重新调整您的整个测试方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T16:15:42.993

我认为这并不重要，但将它们分开听起来是一个更好的主意，因为隔离、自动化将变得如此容易。从可用性的角度来看，类别功能很好，但不是那么好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T00:53:46.690

[Category] ​​背后的最初动机是解决您提到的问题。它还旨在创建更广泛的测试套件，但这就是您正在做的事情。

请注意[类别]。并不是所有的测试运行者都支持它，就像 NUnit gui 一样（或者确实，我有一段时间没有升级了）。过去，如果属性位于类本身上，一些跑步者会忽略该属性，或者将其全部忽略。大多数现在似乎工作。

# email - 如何开发 Outlook/Mail 插件？

> ID：371739
> 
> 赞同：18
> 
> 时间：2008-12-16T16:01:04.520
> 
> 标签：email, outlook, plugins

我想开发一个插件来做到这一点：

*单击一个按钮时，会打开新邮件窗口，但在主题行中有一个特定的短语，例如，当我单击一个名为“PROJ123”的按钮时，新邮件窗口会打开主题行“[PROJ123]”*

它需要的其他功能：

*   能够根据需要创建/更新/删除按钮

做这个的最好方式是什么？

非常感谢任何和所有提示、参考、在线资源、示例！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-16T16:18:09.637

要为 Outlook 创建插件，我会阅读以下资源：

*   [CodeProject：如何为 Outlook 创建插件](https://www.codeproject.com/Articles/1112815/How-to-Create-an-Add-in-for-Microsoft-Outlook)
*   MSDN：[如何在 .NET 中创建插件](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/0fb13e44-b360-4251-a7eb-45c266e40a9b/)
*   使用[VSTO for .NET](http://msdn.microsoft.com/en-us/office/aa905533.aspx)在 Outlook 中创建插件

这并不能直接回答您的问题，但我发现了一个可能对您有用的加载项：

*   Outlook的[模板插件](http://www.office-outlook.com/outlook-addins/quick-templates-for-outlook.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-16T17:12:05.110

You can use VBA and a UserForm, or a Custom Menu. Here is an example of the code:

```
Private Sub cmdCommand_Click()
    Dim eml As MailItem

    Set eml = Application.CreateItem(olMailItem)
    eml.Subject = "Proj1"
    UserForm1.Hide
    eml.Display
End Sub 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-18T12:19:47.110

这与创建按钮无关，它回答了标题：如何开发 Outlook/Mail 插件？

这是我在 10 分钟内开发我的第一个加载项所遵循的演练。

[“演练：为 Outlook 创建您的第一个 VSTO 加载项”](https://msdn.microsoft.com/en-us/library/cc668191.aspx)

主要步骤：

*   为 Outlook 创建 Outlook VSTO 外接程序项目。
*   编写代码，使用 Outlook 的对象模型将文本添加到新邮件的主题和正文。
*   构建并运行项目以对其进行测试。

# java - 面向初学者的 Java Mobile 编程，从哪里开始？

> ID：371751
> 
> 赞同：5
> 
> 时间：2008-12-16T16:04:11.223
> 
> 标签：java, mobile, mobile-phones

在我将[Google Mail](http://mobile.google.com)和[Google Maps](http://mobile.google.com)应用程序下载到我的手机后，我对我想要实施的服务有了一个想法。

我的问题是我从来没有为移动平台做过任何编程，我需要有人指出一些关于移动端 Hello World 的资源，然后是一些更复杂的东西。

让我们把它扩大一点，就像目前在 J2ME 中一般。一旦我将非 Android/*Berry/etc 排除在外，我将深入研究 Android。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T16:10:40.197

单击[此处](http://developers.sun.com/mobility/midp/articles/wtoolkit/)将是一个很好的起点，它是最好的 J2ME 程序员在您之前开始的地方...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-16T16:42:34.360

[使用 J2ME](http://www.netbeans.org/features/javame/index.html)安装NetBeans - 您可以在各种目标设备模拟器上测试您的移动应用程序。易于开发的模型 - 您可以使用 Visual Mobile Designer 快速开发 GUI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T18:54:38.233

我真的建议将黑莓视为一个目标平台，原因如下：

*   大量的文档
*   获得廉价的测试设备
*   没有围墙花园（批准系统或封闭市场），您可以通过无线下载分发您的应用程序（用户只需将浏览器指向适当的 JAD 文件并开始下载/安装）
*   庞大的用户群（至少在美国境内）
*   为黑莓开发者提供高质量的论坛支持
*   支持 J2ME。您可以开发 J2ME 特定应用程序的黑莓特定应用程序，两者都在黑莓设备上运行。
    *   黑莓特定的应用程序有一个更优雅的 UI 库（很多 J2ME witdgets 你需要自己滚动或使用像[LWUIT](https://lwuit.dev.java.net/)这样的库），你将无法在其他设备上运行黑莓特定的应用程序（尽管底层逻辑将是相同的）
    *   Blackberry 和 J2ME 特定应用程序仍然可以访问和使用每个框架的底层非 ui 类。

唯一的缺点：

*   不像 Android 或 iPhone 开发那样性感
*   初始设置可能很笨拙
*   由于没有正规的黑莓商店来管理交易和安装，因此很难货币化

您可以在此处获取有关黑莓开发的更多信息：

[http://na.blackberry.com/eng/developers/started/](http://na.blackberry.com/eng/developers/started/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-12T16:14:07.717

从 Sun 的 JavaME（前 J2ME）网站开始，您可以找到很多文档和示例（即使我必须管理员，它们也有点旧）。如果您想要更复杂但更高级的东西，可以查看[GEAR](http://sourceforge.net/projects/gearjmf/) Java Mobile Framework。它是一个轻量级 JavaME 框架，托管在 sourceforge 上。还有一个[博客](http://digitalapes.blogspot.com/)包含一些关于如何从头开始新应用程序的有用教程。

# regex - PL/SQL 函数返回带有正则表达式特殊字符转义的字符串

> ID：371752
> 
> 赞同：3
> 
> 时间：2008-12-16T16:04:21.800
> 
> 标签：regex, oracle, plsql

是否存在现有的 PL/SQL 方法，它接受一个字符串并返回相同的字符串，但在任何正则表达式字符之前都有反斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-17T14:53:52.627

试试这个：

```
result := REGEXP_REPLACE(subject, '([$^[()+*?{\|])', '\\\1', 1, 0, 'c'); 
```

# python - 如何在没有无限递归错误的情况下实现 __getattribute__？

> ID：371753
> 
> 赞同：119
> 
> 时间：2008-12-16T16:04:38.990
> 
> 标签：python, class, getattr

我想覆盖对类中一个变量的访问，但正常返回所有其他变量。我如何做到这一点`__getattribute__`？

我尝试了以下（这也应该说明我正在尝试做的事情），但我得到一个递归错误：

```
class D(object):
    def __init__(self):
        self.test=20
        self.test2=21
    def __getattribute__(self,name):
        if name=='test':
            return 0.
        else:
            return self.__dict__[name]

>>> print D().test
0.0
>>> print D().test2
...
RuntimeError: maximum recursion depth exceeded in cmp 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2008-12-16T16:26:37.387

您会收到递归错误，因为您尝试访问`self.__dict__`内部属性会再次`__getattribute__`调用您`__getattribute__`。如果您使用`object`'s`__getattribute__`代替，它可以工作：

```
class D(object):
    def __init__(self):
        self.test=20
        self.test2=21
    def __getattribute__(self,name):
        if name=='test':
            return 0.
        else:
            return object.__getattribute__(self, name) 
```

这是有效的，因为`object`（在这个例子中）是基类。通过调用你的基本版本，`__getattribute__`你可以避免你之前遇到的递归地狱。

foo.py 中带有代码的 Ipython 输出：

```
In [1]: from foo import *

In [2]: d = D()

In [3]: d.test
Out[3]: 0.0

In [4]: d.test2
Out[4]: 21 
```

**更新：**

在当前文档中标题为“[*更多属性访问新样式类*](http://docs.python.org/reference/datamodel.html#more-attribute-access-for-new-style-classes)”的部分中有一些内容，他们建议这样做以避免无限递归。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-12-16T22:01:38.053

实际上，我相信您想改用`__getattr__`特殊方法。

引用 Python 文档：

> `__getattr__( self, name)`
> 
> 当属性查找在通常的位置没有找到属性时调用（即它不是实例属性，也不是在 self 的类树中找到）。name 是属性名称。此方法应返回（计算的）属性值或引发 AttributeError 异常。
> 注意如果属性是通过正常机制找到的，`__getattr__()`是不会被调用的。`__getattr__()`（这是和之间的有意不对称`__setattr__()`。）这样做既是出于效率原因，也是因为否则`__setattr__()`将无法访问实例的其他属性。请注意，至少对于实例变量，您可以通过不在实例属性字典中插入任何值（而是将它们插入另一个对象）来伪造完全控制。见`__getattribute__()`下面的方法是一种在新型类中实际获得完全控制的方法。

注意：为此，实例不应*具有*属性`test`，因此`self.test=20`应删除该行。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-12-16T16:39:23.710

[Python语言参考：](http://docs.python.org/reference/datamodel.html#object.__getattribute__)

> 为了避免此方法中的无限递归，其实现应始终调用具有相同名称的基类方法来访问它需要的任何属性，例如 `object.__getattribute__(self, name)`.

意义：

```
def __getattribute__(self,name):
    ...
        return self.__dict__[name] 
```

您正在调用一个名为`__dict__`. 因为它是一个属性，所以`__getattribute__`被调用以搜索`__dict__`哪个调用`__getattribute__`哪个调用... yada yada yada

```
return  object.__getattribute__(self, name) 
```

使用基类`__getattribute__`有助于找到真正的属性。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-12-16T16:32:36.267

你确定要使用`__getattribute__`吗？你到底想达到什么目的？

做你问的最简单的方法是：

```
class D(object):
    def __init__(self):
        self.test = 20
        self.test2 = 21

    test = 0 
```

或者：

```
class D(object):
    def __init__(self):
        self.test = 20
        self.test2 = 21

    @property
    def test(self):
        return 0 
```

编辑：请注意，在每种情况下，一个实例`D`将具有不同的值。`test`在第一种情况下`d.test`是 20，在第二种情况下是 0。我会留给你找出原因。

Edit2：Greg 指出示例 2 将失败，因为该属性是只读的，并且该`__init__`方法试图将其设置为 20。更完整的示例是：

```
class D(object):
    def __init__(self):
        self.test = 20
        self.test2 = 21

    _test = 0

    def get_test(self):
        return self._test

    def set_test(self, value):
        self._test = value

    test = property(get_test, set_test) 
```

显然，作为一个类，这几乎完全没用，但它给了你一个继续前进的想法。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-05T23:48:48.703

> ## 方法是如何`__getattribute__`使用的？

它在正常的点查找之前被调用。如果它加注`AttributeError`，那么我们跟注`__getattr__`。

这种方法的使用是相当罕见的。标准库中只有两个定义：

```
$ grep -Erl  "def __getattribute__\(self" cpython/Lib | grep -v "/test/"
cpython/Lib/_threading_local.py
cpython/Lib/importlib/util.py 
```

**最佳实践**

以编程方式控制对单个属性的访问的正确方法是使用[`property`](https://docs.python.org/library/functions.html#property). 类`D`应该写成如下（设置器和删除器可选地复制明显的预期行为）：

```
class D(object):
    def __init__(self):
        self.test2=21

    @property
    def test(self):
        return 0.

    @test.setter
    def test(self, value):
        '''dummy function to avoid AttributeError on setting property'''

    @test.deleter
    def test(self):
        '''dummy function to avoid AttributeError on deleting property''' 
```

和用法：

```
>>> o = D()
>>> o.test
0.0
>>> o.test = 'foo'
>>> o.test
0.0
>>> del o.test
>>> o.test
0.0 
```

属性是一个数据描述符，因此它是普通点查找算法中首先要查找的内容。

## 选项`__getattribute__`

如果您绝对需要通过[`__getattribute__`](https://docs.python.org/reference/datamodel.html#more-attribute-access-for-new-style-classes).

*   raise `AttributeError`，导致`__getattr__`被调用（如果实现）
*   从中返回一些东西
    *   用于[`super`](https://docs.python.org/library/functions.html#super)调用父（可能`object`是）实现
    *   打电话`__getattr__`
    *   以某种方式实现自己的点查找算法

例如：

```
class NoisyAttributes(object):
    def __init__(self):
        self.test=20
        self.test2=21
    def __getattribute__(self, name):
        print('getting: ' + name)
        try:
            return super(NoisyAttributes, self).__getattribute__(name)
        except AttributeError:
            print('oh no, AttributeError caught and reraising')
            raise
    def __getattr__(self, name):
        """Called if __getattribute__ raises AttributeError"""
        return 'close but no ' + name    

>>> n = NoisyAttributes()
>>> nfoo = n.foo
getting: foo
oh no, AttributeError caught and reraising
>>> nfoo
'close but no foo'
>>> n.test
getting: test
20 
```

## 你原本想要的。

这个例子展示了你可以如何做你最初想做的事：

```
class D(object):
    def __init__(self):
        self.test=20
        self.test2=21
    def __getattribute__(self,name):
        if name=='test':
            return 0.
        else:
            return super(D, self).__getattribute__(name) 
```

并且会表现得像这样：

```
>>> o = D()
>>> o.test = 'foo'
>>> o.test
0.0
>>> del o.test
>>> o.test
0.0
>>> del o.test

Traceback (most recent call last):
  File "<pyshell#216>", line 1, in <module>
    del o.test
AttributeError: test 
```

## 代码审查

您的代码带有注释。您对 self in 进行了虚线查找`__getattribute__`。这就是你得到递归错误的原因。您可以检查 name 是否为`"__dict__"`并用于`super`解决方法，但这不包括`__slots__`. 我将把它作为练习留给读者。

```
class D(object):
    def __init__(self):
        self.test=20
        self.test2=21
    def __getattribute__(self,name):
        if name=='test':
            return 0.
        else:      #   v--- Dotted lookup on self in __getattribute__
            return self.__dict__[name]

>>> print D().test
0.0
>>> print D().test2
...
RuntimeError: maximum recursion depth exceeded in cmp 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-29T10:18:19.013

这是一个更可靠的版本：

```
class D(object):
    def __init__(self):
        self.test = 20
        self.test2 = 21
    def __getattribute__(self, name):
        if name == 'test':
            return 0.
        else:
            return super(D, self).__getattribute__(name) 
```

它从父类调用**__ *getattribute* __**方法，最终退回到对象。**__ *getattribute* __**方法，如果其他祖先不覆盖它。

# asp.net-mvc - 控制器处理应用程序流，那么我的业务逻辑到哪里去了？

> ID：371758
> 
> 赞同：3
> 
> 时间：2008-12-16T16:07:03.260
> 
> 标签：asp.net-mvc, architecture, standards, oxite

我将通过承认我对 MVC 非常陌生来开始这个问题。设计模式在较高层次上对我来说很有意义，但现在我正在探索 ASP.NET MVC，一些架构部分正在挑战我的先入为主的观念。学习是好事。

我最近一直在使用[Oxite](http://www.codeplex.com/oxite)作为一种学习工具，由创建 ASP.NET MVC的[公司的人员编写，因此，它是一个表面上的 ASP.NET MVC 参考应用程序。](http://www.microsoft.com)

但今天我看到Rob Conery[写的一篇关于 Oxite 的博](http://blog.wekeroad.com/blog/some-thoughts-on-oxite/)文，上面写着：

> Oxite 团队决定做的一件事是将控制器和视图分离到另一个项目中，因为我只能假设业务逻辑与视图逻辑的分离。这可能会导致一些混乱，因为控制器旨在处理应用程序流 - 不一定是业务逻辑。

这让我陷入了困境。这种分离是 MVC 的一个原则，因此是 Oxite 开发人员的错误，还是 Rob 的观点？如果业务逻辑属于模型，为什么 Oxite 团队将其放在控制器中？如果不在控制器中，我如何执行作为业务逻辑的操作*？*

除此之外，考虑到 Rob 的评论，我是否在使用 Oxite 作为学习基准时犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T16:24:39.123

您的业​​务逻辑进入您的业务层。控制器使用业务层为您的视图创建模型以进行渲染。Rob Conery 制作的 MVC Storefront 应用程序就是一个很好的例子。Oxite 目前受到很多负面报道，因为它显然没有很好地利用 MVC 框架。

您想要一个与控制器分离的业务层的原因是您可能希望跨多个控制器甚至多个应用程序重用业务层。这方面的一个例子是用于显示数据的普通用户功能，以及用于更新和添加数据的管理功能。您可以在这两种情况下使用相同的 BL 组件，但使用不同的控制器和视图来呈现数据。模型对象将是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T15:54:17.280

您可以使用您的实体、聚合、存储库和服务来实现您的业务层（即模型）。服务调用存储库，它以实体的形式从 DAL 中提取数据。

这可以在一个单独的项目中设置，该项目只不过是一个 DLL。

接下来，让你的 MVC 应用程序，它实际上是你的表示层，并让它利用你的业务层项目。控制器将与您的服务一起使用，并将这些服务生成的数据泵入 ViewData，然后将其泵入您的视图。

控制器应该只处理路由问题，例如显示哪些视图，基于来自表单、查询字符串、cookie、会话等的用户输入。

“MVC 纯粹主义者”社区对 Oxite 被用作一个很好的 MVC 示例的有效性引起了轩然大波。底线是，业务逻辑不应该包含在控制器中，我相信随着 Oxite 在接下来的几个月里被重构，你会看到这一点。

# language-agnostic - GUID 到底是什么？为什么以及我应该在哪里使用它？

> ID：371762
> 
> 赞同：86
> 
> 时间：2008-12-16T16:07:48.360
> 
> 标签：language-agnostic, guid

GUID 到底是什么？为什么以及我应该在哪里使用它？
我在很多地方和维基百科中都看到了对 GUID 的引用，但并不清楚告诉你在哪里使用它。如果有人能回答这个问题，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2008-12-16T16:14:42.450

GUID 在技术上代表全球唯一标识符。实际上，它是一个 128 位结构，*不太可能*重复或产生冲突。如果您进行数学计算，值的域在[undecillions](https://en.wikipedia.org/wiki/Names_of_large_numbers#Standard_dictionary_numbers)中。

当您有多个独立系统或客户端生成需要唯一的 ID 时，请使用 guid。

例如，如果我有 5 个客户端应用程序创建事务数据并将其插入到对 ID 具有唯一约束的表中，则使用 guids。这避免了必须强制客户端首先从服务器请求一个已发布的 ID。

这对于将大量对象类型存储在不同表中的对象工厂和系统也非常有用，您不希望任何 2 个对象具有相同的 ID。这使得缓存和清除模式更容易实现。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-12-16T16:11:27.637

GUID 是“全局唯一标识符”。您可以在需要保证与其他所有标识符不同的标识符的任何地方使用它。

通常，您只需要一个值是“本地唯一的”——例如，数据库表中的主键标识只需与该表中的其他行不同，但可以与其他表中的 ID 相同. （这里不需要 GUID）

当您要定义的 ID 必须不同于其他人（不受您的控制）将要定义的 ID 时，通常使用 GUID。ActiveX 控件的接口标识符中的一个这样的位置。任何人都可以创建 ActiveX，但不知道其他人将使用哪些控件来使用它们——而且没有什么可以阻止每个人给他们的控件起相同的名称。GUID 使它们保持不同。

GUID 是时间（在非常小的几分之一秒内）（因此确保与之前或之后定义的任何 GUID 不同）和定义您的位置的数字（有时取自网卡的 MAC 地址）的组合（因此可以确保与其他人现在定义的任何其他 GUID 不同）。

它们有时也称为 UUID（通用唯一 ID）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-12-16T16:22:15.603

除了所有其他答案，这里是一个**在线 GUID 生成器**：

[http://www.guidgenerator.com/](http://www.guidgenerator.com/)

> **什么是 GUID？**
> 
> GUID（或 UUID）是“全局唯一标识符”（或“通用唯一标识符”）的首字母缩写词。它是一个 128 位整数，用于标识资源。GUID 一词通常由使用 Microsoft 技术的开发人员使用，而 UUID 则在其他任何地方使用。
> 
> **GUID 有多独特？**
> 
> 128 位足够大，生成算法也足够独特，如果在 1 年内每秒生成 1,0000,000,000 个 GUID，则重复的概率仅为 50%。或者，如果地球上的每个人都生成了 600,000,000 个 GUID，那么重复的概率只有 50%。
> 
> **如何使用 GUID？**
> 
> GUID 在软件开发中用作数据库键、组件标识符或几乎任何其他需要真正唯一标识符的地方。GUID 还用于标识 COM 编程中的所有接口和对象。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-12-16T16:41:27.343

GUID 是“全球唯一 ID”。也称为 UUID（通用唯一 ID）。

它基本上是以某种方式生成的 128 位数字（参见 RFC 4112 [http://www.ietf.org/rfc/rfc4122.txt](http://www.ietf.org/rfc/rfc4122.txt)），几乎不可能生成重复项。这样，我可以生成 GUID，而无需某些第三方组织将它们提供给我以确保它们是唯一的。

GUID 的一种广泛使用是作为 Windows 上的 COM 实体（类、类型库、接口等）的标识符。使用 GUID，开发人员可以构建他们的 COM 组件，而无需前往 Microsoft 获取唯一标识符。尽管识别 COM 实体是 GUID 的主要用途，但它们用于许多需要唯一标识符的事情。一些开发人员将为数据库记录生成 GUID，以便为它们提供一个可以使用的 ID，即使它们在许多不同的数据库中必须是唯一的。

通常，您可以将 GUID 视为任何人都可以随时生成的序列号，并且他们会知道该序列号是唯一的。

其他获取唯一标识符的方法包括获取域名。为了确保域名的唯一性，您必须从某个组织（最终由 ICANN 管理）获得它。

因为 GUID 可能很笨拙（从人类可读的角度来看，它们是一串十六进制数字，通常像这样分组：aaaaaaaa-bbbb-cccc-dddd-ffffffffffff），一些需要跨不同组织的唯一名称的命名空间使用另一种方案（通常基于互联网域名）。

因此，按照约定，Java 包的命名空间以组织的域名（颠倒）开头，后跟以某种组织特定方式确定的名称。例如，一个 Java 包可能被命名为：

```
com.example.jpackage 
```

这意味着处理名称冲突成为每个组织的责任。

XML 命名空间也以类似的方式变得独特——按照惯例，创建 XML 命名空间的人应该将其置于其控制下的注册域名“下方”。例如：

```
xmlns="http://www.w3.org/1999/xhtml" 
```

管理唯一 ID 的另一种方式是以太网 MAC 地址。制造以太网卡的公司必须获得 IEEE 分配给他们的一组地址（我认为是 IEEE）。在这种情况下，该方案运行良好，即使制造商搞砸并发行具有重复 MAC 地址的卡，只要这些卡不在同一个子网中，一切仍然可以正常工作，因为超出子网，只有 IP地址用于路由数据包。尽管 MAC 地址的其他一些用途可能会受到影响 - 生成 GUID 的算法之一使用 MAC 地址作为一个参数。这种 GUID 生成方法不再被广泛使用，因为它被认为是一种隐私威胁。

Microsoft 为 Windows 9x 中的“VxD”驱动程序提供的 ID 是一种无法很好地提出唯一标识符的方案示例。第三方 VxD 驱动程序的开发人员应该要求 Microsoft 提供一组 ID，以用于第三方编写的任何驱动程序。这样，Microsoft 可以确保没有重复的 ID。不幸的是，许多驱动程序编写者从不打扰，只是使用他们用作起点的示例 VxD 中的任何 ID。我不确定这会造成多大的麻烦——我不认为 VxD ID 唯一性是绝对必要的，但它可能会影响某些 API 中的某些功能。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-12-16T16:11:58.540

GUID 或 UUID（全局与通用）唯一标识符是一个唯一 ID :) 当您需要生成真正独特的机器时，有一些库可以为您提供。

有关详细信息，请参阅[wikipedia 上的 GUID](http://en.wikipedia.org/wiki/GUID)。

至于何时不需要 GUID，是当您控制的计数器（一种或另一种方式，如 SERIAL SQL 类型或序列）增加时。索引“文本”值（文本形式的 GUID）或 128 位二进制值（GUID）比整数要昂贵得多。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-16T16:46:36.397

有人说它们在概念上是 128 位随机值，这基本上是正确的，但是对[UUID](http://en.wikipedia.org/wiki/Universally_Unique_Identifier)（GUID 通常指微软的 UUID 实现）做了一些阅读，我看到有几个不同的 UUID 版本，其中大部分实际上并不是随机的。因此，可以为机器（或其他东西）生成 UUID，并能够可靠地重复该过程以获得相同的 UUID，这对于某些应用程序很重要。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-16T16:22:52.417

对我来说，更容易将它们视为简单的“128 位随机值”。它们本质上就是这样。有一些算法可以在您的 GUID 的几位数字中包含一些信息（因此随机部分变得更小），但它们仍然是相当大的几乎随机值。

由于它们非常大，因此**极**不可能生成两个相同的 GUID。出于所有实际目的，曾经生成的每个 GUID 在世界上都是独一无二的。

我会让你弄清楚在哪里使用它们，但其他答案已经有一些例子。让想象力自由驰骋。:)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-16T16:15:04.353

由于生成它们背后的所有数学运算，可能很难理解。将其视为一个唯一的 ID。如果您碰巧使用 C# 或许多其他应用程序或网站之一，您可以让 Visual Studio 为您生成一个，或者 .NET。它们被认为是独一无二的，因为您会看到两次相同的机会非常小，因此不值得考虑。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-12-16T16:16:44.350

128 位全球唯一 ID。您可以从现在到日落生成 GUID，而且您永远不会两次生成相同的 GUID，其他人也不会。它们与 COM 一起使用很多。

例如，您将它们用于什么用途，我们将它们用于我们的一种产品中。我们的用户可以在各种设备上生成类别和卡片。我们希望确保不会将在一台设备上创建的类别与在另一台设备上创建的类别混淆，因此无论是谁生成、生成它们以及何时生成它们，ID 都是唯一的，这一点很重要。所以我们使用 GUID（实际上我们使用我们自己的方案，使用 64 位数字，但它们类似于 GUID）。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-12-19T23:59:25.110

几年前，我在 ACD 呼叫中心系统上工作，我们希望将来自多个呼叫处理器的呼叫详细记录收集到一个数据库中。我在 MS SQL 中设置了一个列来为数据库键生成一个 GUID，而不是使用系统生成的顺序 ID（身份列）。那时，这需要将默认值设置为 NewID（或在代码中生成它，但 NewID() 函数更安全）。当然，钥匙的价值很大可能会引起一些人的注意，但我宁愿放弃空间也不愿冒碰撞的风险。

我没有看到任何人使用 GUID 作为数据库键的地址，所以我认为知道你也可以这样做可能会有所帮助。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-12-16T16:16:19.030

GUID 代表“全球唯一标识符”，当您想要拥有一个全球唯一标识符时可以使用它。

例如，在 RSS 提要中，提要中的每个项目都应该有一个 GUID。这样，提要阅读器软件可以跟踪您是否已阅读该项目。如果没有 GUID，就无法分辨。

GUID 与数据库 ID 之类的不同之处在于，无论是谁创建了一个对象——你、我、街上的那个人——我们的 GUID**总是**不同的。使用 GUID 应该没有冲突。

您还会看到术语 UUID，它代表“通用唯一标识符”。两者本质上没有区别。UUID 是更合适的术语。GUID 是 Microsoft 使用的术语。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-12-16T16:16:29.123

如果您需要生成在应用程序的整个生命周期内必须唯一的标识符，则使用 GUID。

假设您有一个带有会话的服务器，如果您给每个会话一个 GUID，您可以确定它对于您的服务器创建的每个会话都是唯一的。这对于跟踪错误很有用。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-12-16T16:19:30.630

我发现的一个特别有用的 GUID 应用程序是使用它们来跟踪 Web 应用程序中的唯一访问者，其中访问者是匿名的（即未登录或注册）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-16T16:11:34.343

GUID = 全局唯一标识符。

当您想在全局上下文中唯一标识某物时，请使用它。

[这个生成器](http://www.newguid.net/Guid_Generator.aspx)可以很方便。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-16T16:12:51.347

关于 GUID的[Wikipedia](http://en.wikipedia.org/wiki/Guid)文章非常清楚它们的用途——也许改写你的问题会有所帮助——你需要 GUID 做什么？

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-08T14:54:42.507

要实际查看它在 Windows 计算机上的外观，请转到 cmd 或 powershell。

1.  电源外壳 =>`[guid]::NewGuid()`

2.  指令 =>`powershell [guid]::NewGuid()`

[![在此处输入图像描述](https://i.stack.imgur.com/LMEoD.png)](https://i.stack.imgur.com/LMEoD.png)

# css - 如何创建带有页眉、页脚和内容的 HTML CSS 页面

> ID：371781
> 
> 赞同：1
> 
> 时间：2008-12-16T16:12:34.920
> 
> 标签：css, dhtml

页面有 3 个部分。

1.  标头，在设计时具有未知内容，因为它在运行时填充了文本。必须显示所有文本，没有滚动条。（我认为`height: 100%`这样做）

2.  内容，内容应填满页面底部下方的页眉到顶部的页脚。如果内容中有更多可以显示的文本，则应该可以使用滚动条。

3.  页脚。页脚应该`25px`很高并且始终位于视口的底部。

窗口是一个弹出窗口，它不应该有窗口滚动条，它可以调整大小但没有滚动条。内容滚动条应该是唯一可用的。

调整窗口大小时内容区域应该调整大小，但页脚保持不变，即固定在底部。

宽度都是`100%`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T16:21:43.607

标题：不要指定高度。Divs 将自动调整到其内容的高度

content: 指定一个margin-bottom: 25px 避免被页脚重叠

页脚：位置：固定；高度：25px

您必须研究模拟 position:fixed for IE < 7 的方法。例如，请参阅，

[如何让浮动页脚粘在 IE 6 的视口底部？](https://stackoverflow.com/questions/146659/how-do-i-get-a-floating-footer-to-stick-to-the-bottom-of-the-viewport-in-ie-6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T16:26:21.803

如果您希望页脚位于窗口底部，这可能会让人头疼。我发现这样做并使其跨浏览器工作的唯一方法是使用可怕的表格布局 - 在我把头咬掉之前，表格布局是不受欢迎的 - 很重要。

定位页眉和内容很容易......但据我所知，到目前为止，不是页脚，我只找到了两种将页脚定位在窗口底部的方法（而不是底部对于短文档，文档可能位于窗口的一半），1 使用 Javascript 来引用 Window.Height 和其他使用表格（不赞成，但这样做的简单方法）。

到目前为止，我还没有看到在所有浏览器中都能可靠地做到这一点的 CSS。我很想看到一个 CSS 做到这一点......

# apache - .htaccess 使用片段重定向

> ID：371791
> 
> 赞同：0
> 
> 时间：2008-12-16T16:15:41.560
> 
> 标签：apache, .htaccess, anchor, fragment-identifier

我需要使用 .htaccess 向带有片段（也称为锚点）的 URL 发出重定向，但它会自动转义 #。

目前我想要一个硬编码的片段，但是为了其他人，如果你也知道如何从 URL 中获取它，那就太好了。

理想情况下，我也应该能够使用 QSA。

例如：

```
http://www.exameple.com/test?foo=bar 
```

应该成为

```
1) http://www.example.com/?foo=bar#MYVALUE 
```

或从网址中获取片段：

```
2) http://www.example.com/?foo=bar#test 
```

我的（非工作）代码如下所示：

```
RewriteRule /test http://www.example.com/#MYVALE [R,QSA] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T17:35:20.650

我想我已经弄清楚了...

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} /test
RewriteRule ^test/?(.*)$ $1 [C]
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1?%{QUERY_STRING}#MYVALUE [NE,L,R]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} /test
RewriteRule ^test/?(.*)$ $1 [C]
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1?%{QUERY_STRING}#MYVALUE [NE,L,R] 
```

必须为 HTTP 和 HTTPS 做一次有点糟糕 - 我会看看我是否能找到解决方法。

# mysql - 在 Rails 迁移 (MySQL) 中，您能否指定新列的位置？

> ID：371796
> 
> 赞同：63
> 
> 时间：2008-12-16T16:17:14.957
> 
> 标签：mysql, ruby-on-rails, migration

如果我通过 MySQL 添加一列，我可以指定该列在表中的哪个位置使用 AFTER 修饰符。但是，如果我通过 Rails 迁移执行 add_column，则该列将在表的末尾创建。

rails迁移是否有任何功能来指定添加列的位置？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2010-07-14T22:17:43.230

现在可以通过传递 :after 参数在 Rails 2.3.6+ 中实现

[https://rails.lighthouseapp.com/projects/8994/tickets/3286-patch-add-support-for-mysql-column-positioning-to-migrations](https://rails.lighthouseapp.com/projects/8994/tickets/3286-patch-add-support-for-mysql-column-positioning-to-migrations)

对于没有看到拥有此功能的优势的每个人：您从不在 ORM 之外查看您的数据库吗？如果我在任何类型的 UI 中查看，我喜欢将外键、状态列、标志等所有内容组合在一起。这不会影响应用程序，但肯定会加快我查看数据的能力。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-03-30T15:47:06.620

你当然可以。

*   简短的回答：

    ```
    add_column :users, :gender, :string, :after => :column_name 
    ```

*   长答案：

这是一个示例，假设您要在“ **users ”表的“** **username ”列之后添加一个名为“** **gender** ”的列。

 ****1.  类型`rails g migration AddGenderToUser gender:string`
2.  在创建的迁移中添加“ **after => :username** ”，如下所示：

    ```
    class AddSlugToDictionary < ActiveRecord::Migration
      def change
        add_column :users, :gender, :string, :after => :username
      end
    end 
    ```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-10-04T20:28:23.367

我创建了一个补丁，将这个附加功能添加到 ActiveRecord Mysql 适配器。它适用于master和2-3-stable。

[https://rails.lighthouseapp.com/projects/8994/tickets/3286-patch-add-support-for-mysql-column-positioning-to-migrations](https://rails.lighthouseapp.com/projects/8994/tickets/3286-patch-add-support-for-mysql-column-positioning-to-migrations)

它可能是特定于 mysql 的，但它不会降低迁移的可移植性（其他适配器只会忽略额外的定位选项）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-16T17:02:27.690

`add_column`迁移中的方法似乎没有位置选项。但是迁移支持执行文字 SQL。我不是 Rails 开发人员，但类似以下内容：

```
class AddColumnAfterOtherColumn < ActiveRecord::Migration
  def self.up
    execute "ALTER TABLE table_name ADD COLUMN column_name INTEGER 
      AFTER other_column"
  end

  def self.down
    remove_column :table_name, :column_name
  end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-16T17:49:33.430

Rails 中无法指定列的位置。事实上，我认为列是按照它们在迁移中的命名顺序创建的只是巧合（因此不能依赖）。

表中列的顺序几乎是相关的，应该如此：给出的常见“原因”是在执行“SELECT *”时能够看到特定的子集，但这确实不是一个好的理由。

任何其他原因都可能是设计气味，但我很想知道我错的正当理由！

在某些平台上，通过将最有可能为 NULL 的列放在末尾可以获得（微小的）空间和性能节省（因为 DMBS 不会将任何磁盘空间用于“尾随”NULL 值，但我认为您必须在 1980 年代的硬件上运行才能注意到。

# visual-studio-2008 - 在 Server 2003 下的 Visual Studio 2008 中使用自定义字体的问题

> ID：371797
> 
> 赞同：0
> 
> 时间：2008-12-16T16:17:25.033
> 
> 标签：visual-studio-2008, fonts, windows-server-2003

我的公司创建的自定义字体有问题。当我在 Visual Studio 2008 中将控件的 Font 属性设置为我们的字体时，我收到以下错误：

> 仅支持 TrueType 字体。这不是 TrueType 字体。

字体选择对话框显示我们的字体，双击 Windows 字体文件夹中的字体正确显示预览。

我已经与与我一起工作的其他开发人员进行了一些测试。显然这个问题只有在 Server 2003 下运行 VS2008 时才会出现，但设计时字体在 Vista 和 XP 下工作正常。其他系统字体如 Arial 和 Courier New 工作正常，只是不是我们内部的自定义字体。

有谁知道为什么 Server 2003 会出现一个应该是 TrueType 的字体问题？

**更新：**

我正在研究机器之间的其他差异。有问题的 PC 没有安装 Microsoft Office。安装 Office 后，有问题的字体在 Visual Studio 中工作，无需任何其他修改。

作为原始问题的补充，为什么安装 Microsoft Office 会导致字体开始工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T19:25:53.203

You really need to tell more about your custom font. It sounds like it could be an OpenType font that Server 2003 wouldn't know how to handle, while XP and Vista do. OpenType fonts on Windows usually have the extension .ttf, so you could mistake it for a TrueType font at first glance, but Windows font viewer should display it with the green and black 'O' logo, at least on XP and Vista. If you want to really know what's in the font, use a font editor; for example FontForge which is great and free ([http://fontforge.sourceforge.net/](http://fontforge.sourceforge.net/)), or FontLab Studio's demo version ([http://www.fontlab.ch/](http://www.fontlab.ch/)).

As for why installing Office solved the problem, my guess would be that it added some DLL that deals with OpenType fonts, but again, it's really difficult to tell without knowing more about the font.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-23T21:38:59.783

我有一个类似但不同的问题。在现场我们将安装 XP 但没有 MS Office 并且可能没有安装“东亚”字体包（单独的搜索并没有告诉我该选项的确切内容）。我们的目标是能够显示亚洲字符，所以我一直在寻找解决方案。我想我会尝试免费的 Unicode 字体，例如[http://en.wikipedia.org/wiki/GNU_Unifont](http://en.wikipedia.org/wiki/GNU_Unifont)

所以我在这里带头，因为我正在使用 VS2008（使用我的 XP 以及 Office 的 Dev box）创建一个 Windows 窗体应用程序。它是一个 TTF 扩展，在字体文件夹中看起来很好，以及在写字板中工作。

在 VS 设计器中，我为我的 TextBox 控件选择了 Unifont，但 VS 给出了关于它不是 TrueType 的错误消息。那么什么时候 TrueType 字体不是 TrueType 呢？

# wcf - Vista 上的 TCP 通信

> ID：371805
> 
> 赞同：1
> 
> 时间：2008-12-16T16:20:15.887
> 
> 标签：wcf, iis-7, windows-vista, tcp

我有一个非常简单的应用程序，我试图在 Vista Enterprise 上使用 WCF 3.5 在 TCP 下运行。[我在尝试在http://localhost:8080](http://localhost:8080)（或任何其他未由 http 保留的端口）上访问 WCF 服务时遇到的错误是：

TCP错误代码10061：无法建立连接，因为目标机器主动拒绝它127.0.0.1:8080。

几个月前我已经让这个工作了，但我忘记了如何。我想知道我是否保留了端口或其他什么...我尝试允许编译的可执行文件通过 Windows 防火墙，并尝试通过防火墙为 TCP 打开端口 8080，但我得到了同样的错误。关于在哪里查看或检查什么的任何想法或想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T16:23:43.320

尝试访问 http:// *machinename* :8080 - 我之前已经让 Vista 基于此区分防火墙，尤其是在安装了 Loopback 适配器的情况下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T21:23:34.057

没有骰子。将 localhost 更改为机器名称不会让我进入。

有问题的不是 http ......localhost 也可以正常工作。但是我尝试用 tcp 做的所有事情都失败了，并出现了同样的错误。完全令人沮丧，因为我知道我以前在这个盒子上看到过这项工作。

**编辑以包括评论答案：** *仅供参考，终于找到了问题。服务的配置文件中的某些内容命名错误。我希望错误可以更清楚一点，但一切都很好。谢谢！*

# c# - 使用 XPath/应用 XSL 转换遍历任意 C# 对象图

> ID：371807
> 
> 赞同：12
> 
> 时间：2008-12-16T16:20:45.230
> 
> 标签：c#, .net, xml, xpath, xslt

我一直在寻找允许我将任意 C# 对象传递给 XSL 转换的组件。

这样做的天真方法是使用 XmlSerializer 序列化对象图；但是，如果您有一个大型对象图，就性能而言，这可能会导致问题。循环引用、延迟加载、代理等问题可能会进一步搅浑这里的水。

更好的方法是拥有某种实现 IXPathNavigable 和 XPathNavigator 的适配器类。我遇到的一个这样的例子是[Byte-Force 的 ObjectXPathNavigator](http://blogs.byte-force.com/media/g/objectxpathnavigator/default.aspx) —— 然而，它的大部分关键文档都是俄语的，我最初的测试似乎表明它有一些怪癖和特质。

**有没有人知道 (a) 任何关于此特定英语**的资源（概述、教程、博客文章等）或 (b) 提供相同或相似功能的任何其他替代方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-11-13T21:09:25.200

有一篇（非常）旧的 MSDN 文章，标题为[XPath Querying Over Objects with ObjectXPathNavigator](http://msdn.microsoft.com/en-us/library/ms950764.aspx)，它实现了一个类似的类（也称为 ObjectXPathNavigator，很有趣）。我很久以前就用它从 Visual SourceSafe 查询一些数据并从更改日志构建一个 RSS 提要，它工作得很好。但是，我没有用它做 XSLT，所以我不确定它是否有效。另外，请注意它是为 Framework 1.0 编写的，因此您可能需要为更新的框架更新它。此外，现在可能有更好的方法来做到这一点，但它会给你一个起点（这篇文章很好地解释了它的工作原理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T23:02:30.110

Sounds as though the problem you're trying to solve is quite interesting.

At first glance, I'd suggest writing your own implementation of an `XPathNavigator` descendant - there are only 20-odd methods to write, and none of them have a particularly difficult signature.

A naive implementation using non-cached reflection would be slow(ish) but would work well as a proof of concept and you could make changes to improve performance if/when that became an issue.

However ...

... I think you may run into some difficulties that stem from your approach, not from any implementation detail.

An XML file is (by nature) a simple hierarchy of elements and attributes - there are no loops (aka cycles) in the node graph.

An XPath expression can include the operator "`//`" which broadly means to search to unlimited depth. (For an exact definition, see section 2.5 of [XPath 1.0](http://www.w3.org/TR/xpath).)

If you applied such an expression to an object graph with cross references (aka object cycles), then you run the risk of the XPath evaluator going into an infinite loop as it tried to recursively enumerate an effectively infinite graph.

You may be able to work around this issue by somehow keeping track of parent nodes in your `XPathNavigator` and throwing an exception if a loop is detected, but I'm not sure how viable this will be.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T18:54:48.390

由于对象图可能是循环的，因此您不可能从中创建基于树的结构。最好的办法是用最简单的组件来表示对象图：节点和向量。

更具体地说，使每个节点（对象）成为具有唯一 ID 的元素（可能由 C# 的 GetHashCode() 方法提供？）。对其他对象（向量）的引用将通过引用对象的 ID 来处理。

示例类（请注意，我不懂 C#，所以我的语法可能有点偏离）：

```
public class SomeType {
   public int myInt  { get; set; }
}

public class AnotherType {
   public string myString { get; set; }
   public SomeType mySomeType { get; set; }
}

public class LastType {
   public SomeType mySomeType { get; set; }
   public AnotherType myAnotherType { get; set; }
}

public class UserTypes{
    static void Main()
    {
        LastType lt = new LastType();
        SomeType st = new SomeType();
        AnotherType atype = new AnotherType();

        st.myInt = 7;
        atype.myString = "BOB";
        atype.mySomeType = st;
        lt.mySomeType = st;
        lt.myAnotherType = atype;

        string xmlOutput = YourAwesomeFunction(lt);
    }
} 
```

然后我们期望 xmlOutput 的值是这样的（注意选择的 ID 值是完全合成的）：

```
<ObjectMap>
 <LastType id="0">
   <mySomeType idref="1" />
   <myAnotherType idref="2" />
 </LastType>

 <SomeType id="1">
  <myInt>7</myInt>
 </SomeType>

 <AnotherType id="2">
  <myString>BOB</myString>
  <mySomeType idref="1" />
 </AnotherType>
</ObjectMap> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:56:27.693

你可以尝试这样的事情：

[http://code.google.com/p/antix-software/wiki/AntixReflectionQuery](http://code.google.com/p/antix-software/wiki/AntixReflectionQuery)

# iphone - Cocoa 界面风格

> ID：371808
> 
> 赞同：3
> 
> 时间：2008-12-16T16:21:14.793
> 
> 标签：iphone, objective-c, cocoa, coding-style, interface

我正在做一个 iPhone 应用程序的项目。我们有一个可可顾问进来几个星期。他向我展示了一个有趣的 Cocoa 习语，处理接口，但我们之间存在语言障碍，他无法解释*为什么*这样做或它在哪里记录，因此我可以自己学习更多。我进入了猴子看模式，只是使用了他喜欢的风格。但是，我对这种风格的历史一无所知，这让我很恼火。这当然不是一个非正式的协议。果然，查看*一些*Cocoa API 标头，我有时会看到他断言的样式是“Cocoa”方式。这是一个示例（注意访问器、修改器等，每个都有自己的接口声明，没有有趣的大括号）：

```
@interface AViewController : UIViewController <UITextViewDelegate> {

@public
    UITableView *tableView;
@private
    NSUInteger someIndex;
}

@property (nonatomic, retain) ...
@end

@interface AViewController (AViewControllerCreation)

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withController:(id)controller;

@end

@interface AViewController (AViewControllerMutator)

- (void) doSomeSettingStuff;

@end

@interface AViewController (AViewControllerAccessor)

- (NSString *)doSomeAccessorStuff;

@end

@interface AViewController (AViewControllerAction)

- (IBAction)cancel:(id)sender;

@end

@interface AViewController (AViewControllerTableViewDelegate)  <UITableViewDelegate, UITableViewDataSource>

@end 
```

你可以在 NSButton、NSControl 等中看到这种设置界面的风格。有趣的是，像 UIButton、UIControl 这样的相应类不使用这种习惯用法。嗯，这些可能是因为我认为 UIKit 是在 AppKit 之后完成的。那么这个成语是“老帽子”吗？另外，除了风格之外还有什么理由吗？是不是很好的风格？坏的？有什么文档可以解决这个问题吗？谢谢大家。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-16T16:54:48.453

这些在 Objective-C 中被称为“类别”。类别使得同一类可以有多个@interface 和@implementation 块。这甚至可以在您可以在标准 Apple 框架中的类上添加方法的范围内起作用，例如在 NSString 上添加一个类别以向其添加新方法。类别可以添加方法，但不能添加实例变量，因此在您的示例中，第一个 @interface 是核心类声明，所有其他都是 AViewController 类上的类别。

无论如何，这不是“老帽子”，但您的示例将类别的使用带到了一个相当奇怪的极端。只要将一个类的实现分解为多个块在逻辑上是有意义的，类别就有意义，例如，如果该类有一堆在逻辑上分为两个或多个组的方法。它们有时还用于通过将名为“private”的类别@interface 与@implementation 放在同一文件中来声明伪私有方法。ObjC 的动态分派意味着不存在私有方法之类的东西，但这种方法避免了发布您不希望人们使用的方法的名称。

上面的例子实际上并没有错，但它有点荒谬。这表明承包商认为，出于某种原因，每种新方法都应始终具有自己的类别，但事实并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T17:25:12.793

这个例子很奇怪，对于任何有经验的 Cocoa 程序员来说肯定会引发危险。

以相同的方式使用类别将私有方法与公共实现分开是一种常见的做法，过去我也做过同样的事情，将私有线程方法与在主线程上运行的代码分开。不过，我看不出像这样分离所有公共方法会带来什么好处。

什么是这种情况的好工具是`#pragma mark <label>`关键字。它允许您在实现中对类似的方法进行分组。我认为这就是您的目标，尽管您不需要在创建群组时过火。例如，在窗口控制器类中，我会有`#pragma mark API`、`#pragma mark NSWindowController Overrides`、`#pragma mark NSObject Overrides`、`#pragma mark NSWindow Delegate Methods`等等。这有助于我在 Xcode 中快速找到并跳转到我正在寻找的方法，尽管这只是风格问题，所以你可以真正使用它，但你认为合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T16:14:28.360

拥有一个公共类别的一个非常好的理由，也是 Apple 经常使用的一个，是为了扩展一个类，该类具有该类别框架中存在的功能，但定义该类的框架中不存在该功能。例如，NSString 是在 Foundation.framework 中定义的，但 NSString 上定义用于将 NSString 绘制到屏幕的方法的类别是在 AppKit.framework 中定义的。

类别的另一个很好的用法是依赖隐藏。例如，如果您确实需要对类的一部分进行提升，则可以将其放在单独的头文件和实现文件中，并且需要提升部分的类的用户可以将该头文件与最初定义该类的头文件一起导入，并且只有那个文件需要很长时间才能编译。这在 64 位运行时更有用，其中类别*可以*添加实例变量。

正如 Tom 指出的那样，对多个源文件（但只有一个标头）进行非常大的实现也是一个不错的选择：)

我只想添加到汤姆的原始答案：通常，在声明私有方法时，使用类扩展比使用类类别更好。这样，您可以在与公共方法相同的@implementation 块中实现扩展，而不会收到有关“缺少类别实现”的警告。例子：

```
// .h file

@interface Foo : NSObject
-(void)publicMethod;
@end

// .m file

@interface Foo () 
// Notice the empty paren; this is how you define
// a class extension, which is not the same as a category
-(void)somePrivateMethod;
@end

@implementation Foo
#pragma mark Public methods
-(void)publicMethod;
{ ... }

#pragma mark Private methods
-(void)privateMethod;
{ ... }
@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-16T16:56:12.490

我不知道; 对我来说，这些看起来很像非正式协议，主要针对代表。*请参阅Cocoa Programming with Mac OS X, 3rd Edition*的第 297 - 298 页。这些协议是通过类别实现的......老实说，它们似乎在您的样本中被过度使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-16T18:14:59.323

关于 John Rudy 的回应——非正式协议确实是作为类别实现的，但它们通常是 NSObject 上的类别。由于非正式协议几乎可以被任何对象使用，它需要是类中的一个类别，采用对象继承自，并且几乎所有内容都将从 NSObject 继承。在特定情况下，您可以将非正式协议作为其他类的一个类别，但这是一种不寻常的方法，绝对不是“可可方式”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-17T15:59:08.457

好的，我相信汤姆的回答是迄今为止最有用的。然而，由于每个人似乎都认为这是对类别的过度使用，我再次查看了 NSButton。以下是标题的混蛋版本：

```
@interface NSButton : NSControl <NSUserInterfaceValidations>

- (NSString *)title;
- (void)setTitle:(NSString *)aString;
...
...
@end

@interface NSButton(NSKeyboardUI)
- (void)setTitleWithMnemonic:(NSString *)stringWithAmpersand;
@end

@interface NSButton(NSButtonAttributedStringMethods)
- (NSAttributedString *)attributedTitle;
- (void)setAttributedTitle:(NSAttributedString *)aString;
- (NSAttributedString *)attributedAlternateTitle;
- (void)setAttributedAlternateTitle:(NSAttributedString *)obj;
@end

@interface NSButton(NSButtonBezelStyles)
- (void) setBezelStyle:(NSBezelStyle)bezelStyle;
- (NSBezelStyle)bezelStyle;
@end

@interface NSButton(NSButtonMixedState)
- (void)setAllowsMixedState:(BOOL)flag;
- (BOOL)allowsMixedState;
- (void)setNextState;
@end

@interface NSButton(NSButtonBorder)
- (void) setShowsBorderOnlyWhileMouseInside:(BOOL)show;
- (BOOL) showsBorderOnlyWhileMouseInside;
@end

@interface NSButton (NSButtonSoundExtensions)
- (void)setSound:(NSSound *)aSound;
- (NSSound *)sound;
@end 
```

因此，如果他们使用类别将 NSButton 组织成部分：上面的 (NSButtonMixedState) (NSButtonBorder)，实际上只有几个操作，为什么使用它来组织访问器/修改器不好的风格？当然，我的第一个示例是一个愚蠢的迂腐界面，但分离操作分组的意图是相同的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T21:28:30.907

首先，仅仅因为某些东西出现在 Apple 的一个头文件中并不一定意味着你应该把它作为一个很好的做事方式的例子。Apple 的开发人员也是人，并且与其他任何人一样受到技能和时间压力的限制。

以这种方式使用多个类别表明 NSButton 的实现分为几个源文件。这可能是因为 NSButton 的不同方面是由不同的人编写的，或者是在不同的时间编写的，或者可能是其他一些原因。无论如何，划分很可能部分基于开发团队及其流程的组织方式，类别系统为划分工作提供了一种方式。在理想的设置中，您会在逻辑功能边界上分解事物，但在实践中，其他因素可能会发挥作用。

# wireshark - 如何清除wireshark过滤器组合内容

> ID：371816
> 
> 赞同：3
> 
> 时间：2008-12-16T16:22:36.427
> 
> 标签：wireshark

有谁知道如何清除 Wireshark 中的过滤器下拉（组合）内容？内容是否存储在某个文件中？

对于我的生活，我无法弄清楚这一点。而且，Wireshark 帮助文件只告诉我“下拉列表中的条目即使在程序重新启动后仍然可用。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T16:34:15.623

叹...

回答了我自己的问题。

过滤器历史存储在 c:\documents and settings\foo\Application Data\Wireshark\recent 中，其中“foo”是您的 Windows 用户名。

我不在 Linux 中使用 Wireshark，所以我不知道这个文件在哪里。我会想象在你的主目录中。

在该文件中，有一个部分标记为“######## 最近的显示过滤器（最新的最后一个），无法通过命令行更改 ########”。每个recent.display_filter 行都是过滤器下拉列表中的一个条目。只需在下拉列表中删除您不想要的过滤器，或将它们全部删除以完全清除过滤器历史记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-16T16:25:09.323

它们位于`~/.wireshark/recent`并命名为“recent.display_filter”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-13T17:52:29.627

现在在 %APPDATA%\Wireshark\recent_common

又名 C:\Users\username\AppData\Roaming\Wireshark\recent_common

查找######## 最近的显示过滤器（最新的最后），不能通过命令行######## 部分进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-05T16:49:54.120

我发现了如何在 Windows10 系统上删除已保存的 wireshark 过滤器：首先，您必须转到此目录 C:\Users\<your_username>\AppData\Roaming\Wireshark 并使用任何文本编辑器打开 recent_common 文件，然后按 CTRL + f 搜索您要删除的过滤器的名称并删除整行，过滤器将永远不会回来！

我希望我能帮助你。

# java - Java 嵌套列表到数组的转换

> ID：371839
> 
> 赞同：10
> 
> 时间：2008-12-16T16:30:10.937
> 
> 标签：java, arrays, list, jtable

将数据从嵌套列表转换为对象数组（可用作 JTable 的数据）的最有效方法是什么？

```
List<List> table = new ArrayList<List>();

for (DATAROW rowData : entries) {
    List<String> row = new ArrayList<String>();

    for (String col : rowData.getDataColumn())
        row.add(col);

    table.add(row);
}

// I'm doing the conversion manually now, but
// I hope that there are better ways to achieve the same
Object[][] finalData = new String[table.size()][max];
for (int i = 0; i < table.size(); i++) {
    List<String> row = table.get(i);

    for (int j = 0; j < row.size(); j++)
        finalData[i][j] = row.get(j);
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-16T18:02:41.563

```
//defined somewhere
List<List<String>> lists = ....

String[][] array = new String[lists.size()][];
String[] blankArray = new String[0];
for(int i=0; i < lists.size(); i++) {
    array[i] = lists.get(i).toArray(blankArray);
} 
```

我对 JTable 一无所知，但是只需几行就可以将列表列表转换为数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-16T16:42:43.283

特别是，我`JTable`建议`AbstractTableModel`像这样子类化：

```
class MyTableModel extends AbstractTableModel {
    private List<List<String>> data;
    public MyTableModel(List<List<String>> data) {
        this.data = data;
    }
    @Override
    public int getRowCount() {
        return data.size();
    }
    @Override
    public int getColumnCount() {
        return data.get(0).size();
    }
    @Override
    public Object getValueAt(int row, int column) {
        return data.get(row).get(column);
    }
    // optional
    @Override
    public void setValueAt(Object aValue, int row, int column) {
        data.get(row).set(column, aValue);
    }
} 
```

注意：这是可能的最基本的实现；为简洁起见，省略了错误检查。

使用这样的模型，您不必担心无意义的`Object[][]`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-19T10:09:59.803

Java 11 答案。

```
List<List<String>> table = List.of(List.of("A", "B"), List.of("3", "4"));
String[][] finalData = table.stream()
        .map(arr -> arr.toArray(String[]::new))
        .toArray(String[][]::new);

System.out.println(Arrays.deepToString(finalData)); 
```

> [[A, B], [3, 4]]

该`Collection.toArray​(IntFunction<T[]> generator)`方法是 Java 11 中的新方法。

当然，您也可以在 Java 8+ 中使用流。只需使用此映射：

```
.map(arr -> arr.toArray(new String[0])) 
```

（该`List.of`方法是在 Java 9 中引入的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-23T14:39:46.317

要将嵌套列表转换为二维对象数组，可以使用以下代码：

```
public Object[][] ToObjectMatrix(List<List<String>> data) throws IllegalArgumentException {
    if(data == null) {
        throw new IllegalArgumentException("Passed data was null.");
    }

    Object[][] result = new Object[data.size()][];

    for(int i = 0; i < data.size(); i++) {
        result[i] = data.get(i).toArray();
    }

    return result;
} 
```

# perl - Perl 的 Devel::DProf 中的“外部未堆叠调用”是什么？

> ID：371840
> 
> 赞同：6
> 
> 时间：2008-12-16T16:31:04.633
> 
> 标签：perl, profiling, profiler

我正在使用`perl -d:DProf`. `dprofpp`在生成的文件上运行时`tmon.out`，我收到如下警告：

```
Compress::Zlib::__ANON__ has 5 unstacked calls in outer
Compress::Zlib::AUTOLOAD has -5 unstacked calls in outer 
```

*   什么是非堆叠调用？
*   谁或什么是“外在”？
*   这些数字代表着什么？怎么会有负数的来电？
*   我应该担心吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-16T16:59:52.063

我试一试：

*   未堆栈调用表明，当 DProf 分析配置文件时，它在堆栈（在配置文件中）遇到比预期更多（或更少）的调用，这意味着分析数据不正确。
*   “外部”指的是`%outer`DProf 中的内部变量，它（显然）在分析配置文件时跟踪堆栈计数。
*   这些数字表示 DProf 预计会找到多少呼叫与找到多少呼叫。5 表示调用次数多于预期，-5 表示调用次数减少 5。同样，这是因为配置文件数据已损坏。
*   我不会担心您的代码完整性，因为 AFAIK 这是由于 DProf 本身的实现中的错误造成的。似乎 DProf 在编写`tmon.out`文件时感到困惑。`dprofpp`但是，由于这种不准确性，其余结果可能不可靠。因此，您应该（有点）担心这些结果的准确性。

您可能想查看备用分析模块，例如[Devel::NYTProf](http://search.cpan.org/dist/Devel-NYTProf/)

# php - javascript中的ajax php变量

> ID：371841
> 
> 赞同：0
> 
> 时间：2008-12-16T16:31:51.387
> 
> 标签：php, javascript, ajax

我有以下代码，以前可以正常工作：

```
var xmlHttp
var layername
var url
function update(layer, url) {
    var xmlHttp=GetXmlHttpObject(); //you have this defined elsewhere

    if(xmlHttp==null) {
        alert("Your browser is not supported?");
    }

    xmlHttp.onreadystatechange = function() {
        if(xmlHttp.readyState==4 || xmlHttp.readyState=="complete") {
            document.getElementById(layer).innerHTML=xmlHttp.responseText;
        } else if (xmlHttp.readyState==1 || xmlHttp.readyState=="loading") {
            document.getElementById(layer).innerHTML="loading";
        }

       //etc
    }

    xmlHttp.open("GET",url,true);
    xmlHttp.send(null);
}

function updateByPk(layer, pk) {
   url = "get_auction.php?cmd=GetAuctionData&pk="+pk+"&sid="+Math.random();
   update(layer, url);
}

function updateByQuery(layer, query) {
   url = "get_records.php?cmd=GetRecordSet&query="+query+"&sid="+Math.random();
   update(layer, url);
}

function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
    {
        xmlHttp=new XMLHttpRequest();
    }catch (e)
    {

        try
        {
                xmlHttp =new ActiveXObject("Microsoft.XMLHTTP");
        } 
        catch (e) {}

    }
return xmlHttp;
}
function makewindows(){
child1 = window.open ("about:blank");
var phpstring = <?php $out = htmlspecialchars(json_encode($row2['ARTICLE_DESC']), ENT_QUOTES); echo("'$out'"); ?>; 
child1.document.write(phpstring); 
//child1.document.write("<?php echo htmlspecialchars(json_encode($row2['ARTICLE_DESC']), ENT_QUOTES); ?>");
child1.document.close(); 
} 
```

commeneted 的部分在以前的版本中运行良好，因为 javascript 正在替换 row2['ARTICLE_DESC']，这是一个带有变量内容的 php 变量。此 javascript 文件包含在 php 文件中的脚本标记中，并且始终运行良好。我最近改变了一些东西，但我不确定具体是什么，但现在我从萤火虫那里得到了这些错误：

```
function makewindows(){
    child1 = window.open ("about:blank");
    child1.document.write("<br />
    <b>Notice</b>: Undefined variable: row2 in <b>C:\Programme\EasyPHP 2.0b1\www\records4\fetchlayers.js</b> on line <b>57</b><br />
    null");
    child1.document.close();
    } 
```

第 57 行未终止的字符串文字，并且未定义 updateByQuery。

我不知道为什么会出现这些错误，以及为什么 updateByPk 不会引发错误。我更加困惑的是 article_Desc 正在扩展到什么以及如何扩展。这发生在 index.php 上，它有一个调用 updateByQuery 的链接，它将通过 ajax 加载一个部分，该部分将具有指向 updateByPk 的链接，它将显示最后一个部分，该部分将具有指向 makewindows() 的链接，其中 article_Desc将与相关的 $pk

这一切都很好，我不知道为什么它不再是了。

如果我将 php 文件粘贴到某处会有帮助吗？

编辑。

我不明白为什么会这样，但试图修改函数，所以它需要一个参数。

```
function makewindows(html){
child1 = window.open ("about:blank");
child1.document.write(html);
child1.document.close(); 
} 
```

结合这两个 php 片段

```
$html = json_encode(htmlspecialchars($row2['ARTICLE_DESC'])); 
```

和

```
<a href='#' onclick='makewindows(/"".$html."/"); return false;'>Click for full description </a></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T03:52:45.780

一切都表明问题出在您的 PHP 文件中。您收到的通知来自 PHP，而不是您可能假设的来自 JavaScript。

```
<b>Notice</b>: Undefined variable: row2 in <b>C:\Programme\EasyPHP 2.0b1\www\records4\fetchlayers.js</b> on line <b>57</b><br />
    null"); 
```

所以问题出在这里：

```
<?php $out = htmlspecialchars(json_encode($row2['ARTICLE_DESC']), ENT_QUOTES); echo("'$out'"); ?>; 
```

**$row2**数组未定义，因此$ **row2['ARTICLE_DESC']**不存在。您应该验证它应该来自哪里，因为我在您提供的代码中找不到它。

# visual-studio - 如何在 AnkhSVN for Visual Studio 中执行“svn st”？-没有文字-

> ID：371850
> 
> 赞同：0
> 
> 时间：2008-12-16T16:35:38.460
> 
> 标签：visual-studio, svn, ankhsvn

刚刚安装了 AnkhSVN，我看到了“svn up”的等价物，但我更愿意先运行“svn st”，这样我就不会盲目更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-17T09:59:40.507

AnkhSVN 的下一个版本将启用待更改窗口中的“最近更改”选项卡。这允许等效于'svn st -u'（它显示传出和传入的更改）。

我们仍在研究此视图在 [日常构建](http://ankhsvn.net/daily/)中的可用性。

在 AnkhSVN 用户列表中输入欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T16:38:13.463

您可以添加一个待定更改窗口，该窗口将显示您在本地工作副本中更改了哪些文件。我通常将它保存在输出窗口所在的一组停靠窗口中。通常，您还可以通过文件旁边的图标来判断文件处于什么状态。例如，加号表示已添加。

**更新：** [这](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug.html#tsvn-dug-general-icons)是图标覆盖的指南。它们应该与 Tortoise SVN 中的相同。

# .net - 网站/Web 应用架构建议

> ID：371851
> 
> 赞同：2
> 
> 时间：2008-12-16T16:35:54.047
> 
> 标签：.net, html, css, silverlight

让我在这里设置舞台。我是一个非常初级的开发人员，最近从为他的雇主做一些 WinForms 的网络管理员过渡到一个全职开发职位，从事将过渡到 Silverlight 的 ASP.NET 产品。我有宝贵的一点网络开发经验。对 HTML 和 ASP.NET 有一些基本的了解。我没有 JavaScript 经验，对 CSS 的了解也很少。

我的妻子要求我为她所属的青少年女子俱乐部的当地分会开发一个网站。该网站有一些目标是要完成的。

1.  为章节创建一个真实的网络存在。目前，他们在当地城镇网站上只有一个页面。
2.  为分会提供公关平台。以下是我们提供的一些社区服务，以下是一些即将举行的活动等...
3.  帮助推动会员资格。他们是一个小分会，希望利用该网站作为一种机制来帮助增加会员，尤其是在年轻女性中。
4.  充当会员追踪基本信息（如会员名单等...）的应用程序

我对这个项目有几个目标

1.  学习 Silverlight（至少在基本级别上）。
2.  提高我的 HTML 知识。
3.  提高我的 CSS 知识。
4.  提供一个可合理搜索（来自 Google 等）的网站。

因此，这是我想到的基本高级架构（不考虑 DB 等）。

1.  在 HTML 或 ASPX 页面中托管整个 silverlight 应用程序，并在 Silverlight 中构建整个站点。- 这个选项给我的印象充其量是建立可搜索的网络存在的最佳选择。

2.  构建一个带有母版页的 ASP.NET 站点，以管理整体外观和感觉，并在适当的位置托管**一些**Silverlight 控件（标题中的菜单、相册的丰富控件、管理数据的控件等...）。- 这让我觉得最容易保持整体外观和感觉，同时仍然保持一些可搜索性。

3.  构建一个主要是 HTML 的站点，使用 CSS 作为主要机制来管理外观和感觉，并在我想要丰富交互的地方托管适当的 Silverlight 控件（如上面的 #2）。- 这让我觉得这是最容易搜索的选项，但考虑到我目前的技能，这对我来说可能是最难的。

我意识到架构还有其他选择，并想听听这些建议，但请记住，我有一个即将到来的 Silverlight 项目正在工作，并希望将其部分用作学习该技术的工具，这意味着所有HTML、CSS、JavaScript/JQuery 选项并没有真正为我提供这些。

我还想听听你们对学习 CSS 的好资源（付费或免费）以及我需要根据做出的选择学习的任何其他技术的看法。

感谢您对长篇文章的耐心等待。

---稍后添加为了清晰（我希望）---

我应该补充一点，我愿意稍后重新编写它以获得更好的性能并学习更多东西，但是为了让这个网站在一个月或更短的时间内（在我的业余时间）运行，我想限制我需要学习的新事物的数量。我很想有时间学习 JavaScript、MVC，也许还有 DotNetNuke 框架，但从一个非常初级的开发人员甚至更初级的 Web 开发人员的角度来看，这太多了。首先是婴儿步骤，最好是婴儿步骤，这将有助于我的日常工作，因为我在那里也有很多学习要做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-16T17:06:51.690

我的建议：

不要从头开始制作网站。使用 DotNetNuke 或 Drupal 等内容管理系统来执行此操作。找到将托管这些平台的提供商并学习它。不要重新发明轮子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-16T17:03:31.947

事情是这样的，HTML/CSS/Javascript 是网络的语言。Microsoft 确实通过 webforms 和 asp.net AJAX 等提供了上面的抽象，但是如果你想认真地成为一名 web 开发人员，你仍然需要知道“幕后”发生了什么，即使你一直使用 webforms你完蛋了。

对于资源，我一直推荐的是[HTML-dog](http://htmldog.com/)，我发现教程写得很好而且简洁。[ASP.net](http://www.asp.net/learn)官方网站有大量内容（包括截屏视频），可帮助您了解 .net 特定的各种技术

谈到建筑，问题是你想走多远？您可以创建一个具有管理界面和 sql server 后端的数据驱动型 CMS 风格的网站。如果您想这样做，我建议使用 Linq2SQL 或出色的[SubSonic](http://subsonicproject.com/)为您生成数据访问层和实体对象。对于这么小的东西，你不应该需要超过两层的架构，特别是如果你想保持简单，这两件事可以为你生成数据层。

至于silverlight，其实我是反其道而行之，先学了WPF，所以帮不了你太多。像 silverlight 或 flash 这样的东西要记住的重要一点是，尽管它们很酷，但它们仍然只是网页中的框。您可以使用它们来达到很好的效果，但是当他们意识到自己在“Flash 站点”时，很少有人会不畏缩。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-16T16:46:20.000

我建议看看 ASP.NET MVC（stackoverflow 是用它构建的）。虽然它目前处于测试阶段，但它非常稳定，您可以在您的实时站点上使用它。

它比 ASP.NET“更接近金属”，在我看来，当你想学习 HTML 和 CSS 时，它非常棒，因为这些正是你将要从事的工作。这有点像学习摄影——获取手册相机并学习基础知识，以便您了解正在发生的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-22T18:27:01.753

这条建议对任何学习新事物的人都有效：保持简单。在 Web 开发的情况下，出于多种原因，我肯定会投票反对 Silverlight。

您已经提到的第一个，它对 Google 非常不友好。

第二个是它不是一个无处不在的插件：很多人还没有它，当他们到达一个站点并看到这个要求他们下载和安装插件的东西时，很多人感到（正确地）害怕。当您谈论 Mac 和 Linux 用户时，情况会变得更糟，他们中的许多人甚至不知道 Silverlight 是什么（只是在您的朋友中尝试）。

另一个方面是，除非你有一些非常好的设计技能，或者打算聘请设计师，否则 Silverlight 网站很有可能看起来丑得要命。当您选择好的旧 HTML 时，您会拥有[大量漂亮、免费的 html 和 css 模板](http://www.freecsstemplates.org/)，但 Silverlight 和 AFAIK 并非如此。

最后，如果你真的想学习 Web 编程，最好从基础开始，HTML、CSS 和 Javascript。在 Javascript 的情况下，您可以跳过学习所有坚韧不拔的细节，而选择 jQuery，这将是一个很好的垫脚石。如果您真的想使用 Silverlight 和 XAML，我建议您在网站启动并运行*后*添加一些 pzazz ，但不要预先添加。

对于从 ASP.NET 方面开始进行 Web 开发的人，我强烈推荐 ASP.NET MVC，就像我之前的那个人所做的那样：它比 Web 表单更接近*真正的*Web 开发，并且它促进了（尽管它没有保证）更优雅的架构。我知道您的目标 #1 是学习 Silverlight，但我会坚持一会儿，先了解基础知识。

现在，当涉及到您提到的特定青少年女子俱乐部网站时，我会首先选择像 DNN 这样的打包解决方案；然后，一旦每个人都开心和花花公子（这将需要一段时间，一旦可用，您将收到无限数量的请求，从字体颜色到新功能再到管理任务），然后您就可以开始按照自己的节奏工作了自制 v2 上的和平。DNN 的另一个好处是它允许您编写自己的自定义模块，因此您可以分小块进行一些 Web 开发（包括 Silverlight），而不是一次陷入巨大的项目中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-22T22:52:23.047

可能是最好的“什么 CMS？”之一 我在 SO 上读过的问题。

考虑到您的 IT 背景，我怀疑您对 Windows 的手册/说明感到满意，并且启动和运行 CMS 可能会相当快。您越早获得一些内容越好，并将 HTML/css 留待以后使用。事实上，我想说出去找一个免费/普通的模板并掌握 CMS 的功能。了解 HTML/css 很好，但了解内容是什么以及 CMS 的工作原理是关键。

一旦你的网站启动并运行起来，你就可以专注于 HTML/css，如果你在这方面的任何一个部分都失败了，那么 HTML/css 是你可以承受的部分。

# jpa - JPA 默认持久化单元

> ID：371853
> 
> 赞同：2
> 
> 时间：2008-12-16T16:36:13.453
> 
> 标签：jpa, default, persistence.xml, persistence-unit

我收到异常“此部署中没有默认持久性单元”。我可以以某种方式将单位标记为默认单位吗？（我只有一个持久性单位，所以我宁愿不叫它名字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T20:48:47.000

不，你必须直呼 PU 的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-06T06:24:01.277

您可能是通过代码而不是让容器来管理它。在这种情况下，您必须按名称指定。

我的单元测试代码有这个代码块来做到这一点。

```
@Before
public void createEntityManagerFactory() throws IOException {
    final Properties p = new Properties();
    p.load(getClass().getResourceAsStream("/inmemory.properties"));
    emf = Persistence.createEntityManagerFactory("default", p);
} 
```

但是，我的应用程序代码如下所示。

```
/**
 * Injected persistence context.
 */
@PersistenceContext
private EntityManager em; 
```

# c# - DataGridView 中的类 Excel 表达式

> ID：371861
> 
> 赞同：1
> 
> 时间：2008-12-16T16:38:47.627
> 
> 标签：c#, .net, datagridview, expression

在 Excel 中，我可以对单元格使用“=C16+C17”之类的表达式来显示其他单元格的值。

在我的应用程序中，我需要类似的东西。用户需要能够从数据绑定的研究中选择一系列单元格并在另一个单元格中显示总和（而不是在页脚中！）。所以我需要的是能够将诸如“从由 ids 7、23、42 标识的记录中获取列 xyz 的值并将它们相加”之类的内容分配给任意单元格。

有谁知道提供这种“表达语言”的组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T16:46:09.860

DataGridView 中没有任何内容可以帮助您做到这一点。您的选择显然是自定义控件。我确信 Infragistics UltraGrid 有类似的东西，但如果你不想花钱，你可以自己动手。其实可能没那么难。这是简单的方法。

始终将 datagridview 绑定到 DataTable，然后当您要添加表达式时，添加新的 DataColumn 并设置 Expression 属性。这是有关 DataColumn 的表达式属性的一些信息。[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression(VS.71).aspx)

我们在工作中做了一些与此类似的事情，实际上效果很好。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-17T16:55:46.470

我将阅读这篇 CodeProject 文章：“[实现类似 Excel 的公式引擎](http://www.codeproject.com/KB/vb/FormulaEngine.aspx)”。它有一个解析器、公式评估，并且很容易将它与数据网格连接起来。

# javascript - 使用 JavaScript 访问本地文件

> ID：371875
> 
> 赞同：192
> 
> 时间：2008-12-16T16:43:00.333
> 
> 标签：javascript, file-access

是否有使用 JavaScript 完成的本地文件操作？我正在寻找一种无需安装足迹即可完成的解决方案，例如需要[Adob​​e AIR](http://en.wikipedia.org/wiki/Adobe_Integrated_Runtime)。

具体来说，我想从一个文件中读取内容并将这些内容写入另一个文件。在这一点上，我并不担心获得权限，只是假设我已经拥有这些文件的完全权限。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2011-08-14T10:14:06.973

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)中只是 HTML5 功能的更新。这篇优秀的文章将详细解释 JavaScript 中的本地文件访问。上述文章的摘要：

该规范提供了几个用于[从“本地”文件系统访问文件的](http://www.html5rocks.com/en/tutorials/file/dndfiles/)接口：

1.  文件 - 单个文件；提供只读信息，例如名称、文件大小、MIME 类型和对文件句柄的引用。
2.  FileList - 一个类似数组的 File 对象序列。（思考`<input type="file" multiple>`或从桌面拖动文件目录）。
3.  Blob - 允许将文件分割成字节范围。

请参阅下面的 Paul D. Waite 的评论。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2008-12-16T19:12:43.450

如果用户通过 选择文件`<input type="file">`，您可以使用[File API](https://www.w3.org/TR/FileAPI/)[读取](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)和[处理](http://www.html5rocks.com/en/tutorials/file/dndfiles/)该文件。

设计不允许读取或写入任意文件。这是对沙盒的侵犯。来自[维基百科 -> Javascript -> 安全性](http://en.wikipedia.org/wiki/JavaScript#Security)：

> JavaScript 和 DOM 为恶意作者提供了通过 Web 传递脚本以在客户端计算机上运行的可能性。浏览器作者使用两个限制来控制这种风险。**首先，脚本在沙箱中运行，它们只能执行与 Web 相关的操作，而不是创建文件**等通用编程任务 。

**2016 更新：可以通过**[Filesystem API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_API)直接访问文件系统，该API[仅受 Chrome 和 Opera 支持](http://caniuse.com/#feat=filesystem)，[可能最终无法被其他浏览器实现](http://www.html5rocks.com/en/tutorials/file/filesystem/)（[Edge 除外](https://developer.microsoft.com/en-us/microsoft-edge/platform/status/filewriter/)）。有关详细信息，请参阅[凯文的回答](https://stackoverflow.com/questions/371875/local-file-access-with-javascript/38254151#38254151)。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-12-16T16:52:40.563

**更新**自 Firefox 17 起，此功能已被删除（请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=546848](https://bugzilla.mozilla.org/show_bug.cgi?id=546848)）。

* * *

在 Firefox 上，您（程序员）可以在 JavaScript 文件中执行此操作：

```
netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserWrite"); 
```

并且您（浏览器用户）将被提示允许访问。（对于 Firefox，您只需在每次启动浏览器时执行一次）

如果浏览器用户是其他人，他们必须授予权限。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-07-07T19:51:30.410

如前所述，[FileSystem](https://www.w3.org/TR/FileAPI/)和[File](https://www.w3.org/TR/2012/WD-file-system-api-20120417/) API 以及[FileWriter](https://www.w3.org/TR/2012/WD-file-writer-api-20120417/) API 可用于从浏览器选项卡/窗口的上下文读取和写入文件到客户端计算机。

您应该注意与 FileSystem 和 FileWriter API 有关的几件事，其中一些已被提及，但值得重复：

*   API 的实现目前仅存在于基于 Chromium 的浏览器（Chrome 和 Opera）中
*   这两个 API 均已于 2014 年 4 月 24 日脱离 W3C 标准轨道，并且现在是专有的
*   将来有可能从实现浏览器中删除（现在是专有的）API
*   **沙箱**（磁盘上的一个位置，文件在该位置之外不会产生任何影响）用于存储使用 API 创建的文件
*   使用**虚拟文件系统**（一种目录结构，不一定以与从浏览器中访问时相同的形式存在于磁盘上）表示使用 API 创建的文件

以下是如何直接和间接地使用 API 来执行这些操作的简单示例：

**[烘焙食品](https://github.com/klawson88/Baked-Goods)***

写入文件：

```
bakedGoods.set({
    data: [{key: "testFile", value: "Hello world!", dataFormat: "text/plain"}],
    storageTypes: ["fileSystem"],
    options: {fileSystem:{storageType: Window.PERSISTENT}},
    complete: function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

读取文件：

```
bakedGoods.get({
        data: ["testFile"],
        storageTypes: ["fileSystem"],
        options: {fileSystem:{storageType: Window.PERSISTENT}},
        complete: function(resultDataObj, byStorageTypeErrorObj){}
}); 
```

**使用原始 File、FileWriter 和 FileSystem API**

写入文件：

```
function onQuotaRequestSuccess(grantedQuota)
{

    function saveFile(directoryEntry)
    {

        function createFileWriter(fileEntry)
        {

            function write(fileWriter)
            {
                var dataBlob = new Blob(["Hello world!"], {type: "text/plain"});
                fileWriter.write(dataBlob);              
            }

            fileEntry.createWriter(write);
        }

        directoryEntry.getFile(
            "testFile", 
            {create: true, exclusive: true},
            createFileWriter
        );
    }

    requestFileSystem(Window.PERSISTENT, grantedQuota, saveFile);
}

var desiredQuota = 1024 * 1024 * 1024;
var quotaManagementObj = navigator.webkitPersistentStorage;
quotaManagementObj.requestQuota(desiredQuota, onQuotaRequestSuccess); 
```

读取文件：

```
function onQuotaRequestSuccess(grantedQuota)
{

    function getfile(directoryEntry)
    {

        function readFile(fileEntry)
        {

            function read(file)
            {
                var fileReader = new FileReader();

                fileReader.onload = function(){var fileData = fileReader.result};
                fileReader.readAsText(file);             
            }

            fileEntry.file(read);
        }

        directoryEntry.getFile(
            "testFile", 
            {create: false},
            readFile
        );
    }

    requestFileSystem(Window.PERSISTENT, grantedQuota, getFile);
}

var desiredQuota = 1024 * 1024 * 1024;
var quotaManagementObj = navigator.webkitPersistentStorage;
quotaManagementObj.requestQuota(desiredQuota, onQuotaRequestSuccess); 
```

尽管 FileSystem 和 FileWriter API 不再符合标准，但在我看来，在某些情况下使用它们是合理的，因为：

*   未实施的浏览器供应商重新产生了兴趣，可能会让他们重新考虑
*   实施（基于 ​​Chromium 的）浏览器的市场渗透率很高
*   谷歌（Chromium 的主要贡献者）没有给出 API 的终止日期

但是，“某些情况”是否包含您自己的情况由您决定。

**BakedGoods 由这里的这个人维护 :)*

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-12-01T03:14:26.060

NW.js 允许您使用 Javascript 创建桌面应用程序，而没有通常放在浏览器上的所有安全限制。因此，您可以使用函数运行可执行文件，或创建/编辑/读取/写入/删除文件。您可以访问硬件，例如当前 CPU 使用率或正在使用的总内存等。

您可以使用它创建不需要任何安装的 windows、linux 或 mac 桌面应用程序。

*   [http://nwjs.io](http://nwjs.io)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-16T16:50:25.060

如果您在 Windows 上进行部署，[Windows 脚本宿主](http://msdn.microsoft.com/en-us/library/9bbdkx3k.aspx)为文件系统和其他本地资源提供了一个非常有用的 JScript API。然而，将 WSH 脚本合并到本地 Web 应用程序中可能并不像您希望的那样优雅。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-10-23T14:03:52.517

如果您有输入字段，例如

```
<input type="file" id="file" name="file" onchange="add(event)"/> 
```

您可以获取 BLOB 格式的文件内容：

```
function add(event){
  var userFile = document.getElementById('file');
  userFile.src = URL.createObjectURL(event.target.files[0]);
  var data = userFile.src;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-08T18:45:12.930

[FSO.js](http://fsojs.com/)包装了由 W3C 标准化的新 HTML5 FileSystem API，并提供了一种*非常简单*的方法来读取、写入或遍历本地沙盒文件系统。它是异步的，因此文件 I/O 不会干扰用户体验。:)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-12-06T21:24:41.637

如果您需要访问客户端上的整个文件系统、读/写文件、监视文件夹的更改、启动应用程序、加密或签署文档等，请查看 JSFS。

它允许从您的网页安全且无限制地访问客户端上的计算机资源，而无需使用 AcitveX 或 Java Applet 等浏览器插件技术。但是，也必须安装一个和平软件。

为了使用 JSFS，您应该具备 Java 和 Java EE 开发 (Servlet) 的基本知识。

请在此处找到 JSFS：[https](https://github.com/jsfsproject/jsfs) ://github.com/jsfsproject/jsfs 。它是免费的，并在 GPL 下获得许可

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-06-06T14:51:20.127

假设 JavaScript 代码可能需要的任何文件都应该由用户直接允许。著名浏览器的创建者一般不会让 JavaScript 访问文件。

该解决方案的主要思想是：JavaScript 代码无法通过其本地 URL 访问文件。但是它可以通过拥有它的 DataURL 来使用该文件：所以如果用户浏览一个文件并打开它，JavaScript 应该直接从 HTML 获取“DataURL”而不是获取“URL”。

然后它使用 readAsDataURL 函数和 FileReader 对象将 DataURL 转换为文件。源代码和带有很好示例的更完整指南位于：

[https://developer.mozilla.org/en-US/docs/Web/API/FileReader?redirectlocale=en-US&redirectslug=DOM%2FFileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader?redirectlocale=en-US&redirectslug=DOM%2FFileReader)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-20T09:24:02.580

有一种（商业）产品“localFS”可用于在客户端计算机上读取和写入整个文件系统。

必须安装小型 Windows 应用程序，并且页面中包含微小的 .js 文件。

作为一项安全功能，可以将文件系统访问权限限制在一个文件夹中，并使用密钥进行保护。

[https://www.fathsoft.com/localfs](https://www.fathsoft.com/localfs)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-07-20T21:02:43.330

我只是提到这一点，因为没有人提到这一点。我知道没有一种编程语言允许操作底层文件系统。所有编程语言都依赖操作系统中断来真正完成这些事情。在浏览器中运行的 JavaScript 只有浏览器“中断”才能使用，通常不会授予文件系统访问权限，除非已实现浏览器以支持此类中断。

据说，使用 JavaScript 访问文件系统的明显方法是使用 Node.js，它确实具有与底层操作系统直接交互的能力。

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2016-01-25T07:44:43.287

> 如果您使用 angularjs 和 aspnet/mvc 来检索 json 文件，则必须在 web config 中允许 mime 类型

```
<staticContent>
    <remove fileExtension=".json" />
    <mimeMap fileExtension=".json" mimeType="application/json" />
  </staticContent> 
```

# gzip - 使用 IIS6.0 对没有扩展名的文件进行 Gzip 压缩

> ID：371877
> 
> 赞同：4
> 
> 时间：2008-12-16T16:44:26.307
> 
> 标签：gzip, castle-monorail

有没有人设法在 IIS6 的网站上激活 Gzip 压缩？我们正在使用 Castle Monorail（顺便说一句，它非常好），因此有干净的 RESTful URL，没有扩展............而且有问题 -> 据我们所见，我们需要扩展端点以允许 gzip 压缩。

似乎唯一的出路是我们自己的 HTTPModule - 还有其他人知道其他方式吗？

干杯伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-17T09:14:06.777

好吧，我找到了一种方法……它结合了 HTTPModule 技术和 Monorail 过滤器。

因此[，Rick Strahl 的上述文章](http://www.west-wind.com/WebLog/posts/102969.aspx)是网络上展示使用 gzip / deflate 压缩的众多文章之一。迷人的。将这些技术与[Monorail TransformFliter 一起使用应该可以很好地工作](http://www.castleproject.org/MonoRail/documentation/trunk/advanced/transformation.html)。

还有其他方法，还是仍然需要编写代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-24T20:52:24.100

这是在 IIS6 中启用 gzip 压缩的一个很好的演练：http: [//engineering.leads360.com/post/9301650692/http-compression-gzip-on-iis-6](http://engineering.leads360.com/post/9301650692/http-compression-gzip-on-iis-6)

# syntax - 对象初始化语法

> ID：371878
> 
> 赞同：103
> 
> 时间：2008-12-16T16:44:43.530
> 
> 标签：syntax, f#, object-initializers

我刚开始使用 F#，我找不到像 C# 3 那样进行对象初始化的语法。

即给出这个：

```
public class Person {
  public DateTime BirthDate { get; set; }
  public string Name { get; set; }
} 
```

如何在 F# 中编写以下内容：

```
var p = new Person { Name = "John", BirthDate = DateTime.Now }; 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2008-12-16T16:54:43.447

你可以这样做：

```
let p = new Person (Name = "John", BirthDate = DateTime.Now) 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2008-12-16T18:19:41.217

CMS的答案绝对正确。这只是一个可能也有帮助的补充。在 F# 中，您通常希望仅使用不可变属性来编写类型。当使用“对象初始化器”语法时，属性必须是可变的。F# 中的另一种选择是使用命名参数，它为您提供类似的语法，但保持不变：

```
type Person(name:string, ?birthDate) =
  member x.Name = name
  member x.BirthDate = defaultArg birthDate System.DateTime.MinValue 
```

现在我们可以写：

```
let p1 = new Person(name="John", birthDate=DateTime.Now)
let p2 = new Person(name="John") 
```

该代码要求您指定名称，但生日是一个带有一些默认值的可选参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-10T08:06:01.500

您还可以省略`new`关键字并使用不太冗长的语法：

```
let p = Person(BirthDate = DateTime.Now, Name = "John") 
```

[https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/members/constructors](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/members/constructors)

# wpf - WPF 按钮 IsEnabled 基于 ComboBox 选择覆盖默认样式

> ID：371879
> 
> 赞同：6
> 
> 时间：2008-12-16T16:44:56.023
> 
> 标签：wpf, xaml, styles, isenabled

我有一个 Button 正在查看 2 个组合框，以确保它们在启用之前具有一个值。问题是我这样做的方式是覆盖我的主题项目中声明的默认样式。

```
<Button x:Name="btnOK" VerticalAlignment="Center" Content="OK" IsDefault="True"  Margin="0" Click="btnOK_Click">
                    <Button.Style>
                      <Style BasedOn="{StaticResource DefaultButton}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=ddlWageTypes, Path=SelectedItem}" Value="{x:Null}">
                                    <Setter Property="Button.IsEnabled" Value="false"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ElementName=ddlJobTitles, Path=SelectedItem}" Value="{x:Null}">
                                    <Setter Property="Button.IsEnabled" Value="false"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button> 
```

我尝试将 BasedOn="{StaticResouce MyDefaultButtonStyleName}" 添加到样式标签，但它在运行时会爆炸。

错误是“'System.Windows.Style'值不能分配给对象'System.Windows.Controls.Button'的属性'Style'。只能基于目标类型为'IFrameworkInputElement'的样式。错误在标记文件中的对象“System.Windows.Style”处”

是否可以在 XAML 中执行此操作而不覆盖默认样式。

编辑：代码示例更新。我在 OKButtonStyle 上收到一条错误消息，提示“无法将元素添加到属性‘资源’，因为如果该属性使用显式集合标记，则它只能有一个子元素。标记文件中的对象‘System.Windows.Style’出现错误”

```
<UserControl x:Class="UK.Budgeting.XBAP.ShiftDiff.NewFTEPremiumPaySummary"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:compModel="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    xmlns:local="clr-namespace:UK.Budgeting.XBAP.ShiftDiff">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="CellTemplates.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>

      <Style TargetType="{x:Type Button}" x:Key="OKButtonStyle" BasedOn="{StaticResource DefaultButton}">
        <Style.Triggers>
          <DataTrigger Binding="{Binding ElementName=ddlWageTypes, Path=SelectedItem}" Value="{x:Null}">
            <Setter Property="Button.IsEnabled" Value="false"/>
          </DataTrigger>
          <DataTrigger Binding="{Binding ElementName=ddlJobTitles, Path=SelectedItem}" Value="{x:Null}">
            <Setter Property="Button.IsEnabled" Value="false"/>
          </DataTrigger>
        </Style.Triggers>
      </Style>

    </UserControl.Resources>
    <Grid>
        <Rectangle Style="{StaticResource DialogRectangle}"/>
        <Border Style="{StaticResource DialogBorder}">
            <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition MinWidth="300"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="2"/>
                    <RowDefinition/>
                    <RowDefinition Height="2"/>
                    <RowDefinition/>
                    <RowDefinition Height="2"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource LabelStyle}">Wage Type</TextBlock>
                <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource LabelStyle}">Job Title</TextBlock>

                <ComboBox x:Name="ddlWageTypes" VerticalAlignment="Top" Grid.Column="2" Grid.Row="0"
                          DisplayMemberPath="DisplayName"
                          SelectedValuePath="WageTypeCode"/>
                <ComboBox x:Name="ddlJobTitles" VerticalAlignment="Top" Grid.Column="2" Grid.Row="2"
                          DisplayMemberPath="JobTitle"
                          SelectedValuePath="JobCode"/>

                <StackPanel Grid.Column="2" Grid.Row="6" VerticalAlignment="Top" Orientation="Horizontal" Margin="5">
                  <Button x:Name="btnOK" VerticalAlignment="Center" Content="OK" IsDefault="True"  Margin="0" Click="btnOK_Click" Style="{StaticResource OKButtonStyle}"/>
                    <Button x:Name="btnCancel" VerticalAlignment="Center" Content="Cancel" IsCancel="True" Margin="10,0,0,0" Click="btnCancel_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-16T16:48:09.730

这怎么样

```
BasedOn="{StaticResouce DefaultButton}" 
```

应该参考默认按钮样式？这会崩溃，因为 DefaultButton 是您的应用程序中未定义的资源。

它应该是：

```
BasedOn="{StaticResource {x:Type Button}}" 
```

编辑：对不起，回答太仓促了。

我注意到现在您的按钮设置了 Style={}，并且指向了一个名为 OkBUttonStyle 的样式。这是应该定义所有内容并基于默认按钮样式的样式。无论如何，我包括那些触发器。您在 XAML 中所说的是 Style 是您的 Button 的内容。

也许一些代码会有所帮助：

```
 <Window x:Class="WindowsApplication7.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="WindowsApplication7" Height="300" Width="300"
    >
  <Window.Resources>
    <Style TargetType="{x:Type Button}" x:Key="defaultButtonStyle">
      <Setter Property="Background" Value="Red" />
    </Style>

    <Style TargetType="{x:Type Button}" x:Key="okButtonStyle" BasedOn="{StaticResource defaultButtonStyle}">
      <Setter Property="Foreground" Value="Green" />
      <Style.Triggers>
        <Trigger Property="IsEnabled" Value="True">
          <Setter Property="Background" Value="Yellow" />
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
          <Setter Property="Foreground" Value="Blue" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </Window.Resources>
  <StackPanel>
    <Button>System default</Button>
    <Button Style="{StaticResource defaultButtonStyle}">My Default</Button>
    <Button Style="{StaticResource okButtonStyle}">Ok</Button>
    <Button Style="{StaticResource okButtonStyle}" IsEnabled="False">Ok disabled</Button>
  </StackPanel>
</Window> 
```

# wpf - 具有由 ObservableCollection 生成和填充的列的 TreeListView

> ID：371883
> 
> 赞同：2
> 
> 时间：2008-12-16T16:45:53.887
> 
> 标签：wpf, data-binding, gridviewcolumn, treelistview

是否有人知道（甚至有一个示例）基于 WPF 的 TreeListView 可以通过数据绑定到其树项的 ObservableCollection 来生成其列？

例如，数据绑定模型是由代表公司主管层次结构的 Employee 实例组成的树。每个员工都有一个 ObservableCollection 的 Responsibility 实例（属性：ResponsibiltyName、ResponsibleSinceDate）。现在，我希望在任何数据绑定员工中找到的每个 ResponsibiltyName 都有一个单独的列，并且该列值应该填充 ResponsibleSinceDate。如果员工没有特定职责，则该列值应留空。

通常如何在 WPF 中解决这样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T16:54:55.877

您可能想看看以下答案：[如何将 WPF DataGrid 绑定到可变数量的列？](https://stackoverflow.com/questions/320089/how-do-i-bind-a-wpf-datagrid-to-a-variable-number-of-columns)

这里建议使用 CompositeCollection 的解决方案：http: [//social.msdn.microsoft.com/forums/en-US/wpf/thread/a4c5b2de-260c-49d0-b4ff-cca6ee4e8b08/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/a4c5b2de-260c-49d0-b4ff-cca6ee4e8b08/)

这里建议了一个涉及 HierarchicalDataTemplate 的解决方案：http: [//blogs.msdn.com/karstenj/archive/2005/11/02/488420.aspx](http://blogs.msdn.com/karstenj/archive/2005/11/02/488420.aspx)

希望这可以帮助！

# model-view-controller - 差分执行是如何工作的？

> ID：371898
> 
> 赞同：85
> 
> 时间：2008-12-16T16:49:50.320
> 
> 标签：model-view-controller, language-agnostic, differential-execution

我在 Stack Overflow 上看到过一些关于此的提及，但盯着 Wikipedia（相关页面已被删除）和[MFC 动态对话框演示](http://sourceforge.net/projects/dyndlgdemo/)并没有启发我。有人可以解释一下吗？学习一个根本不同的概念听起来不错。

* * *

根据答案：我想我对此有了更好的感觉。我想我只是第一次没有仔细看源代码。在这一点上，我对差异化执行的感觉很复杂。一方面，它可以使某些任务变得相当容易。另一方面，启动并运行它（也就是说，用你选择的语言设置它）并不容易（我相信如果我能更好地理解它的话）......虽然我猜它的工具箱只需制作一次，然后根据需要进行扩展。我认为为了真正理解它，我可能需要尝试用另一种语言来实现它。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-01-28T23:49:20.797

哎呀，布赖恩，我希望我早点看到你的问题。由于这几乎是我的“发明”（无论好坏），我也许可以提供帮助。

> 插入：我能做出的最短解释是，如果正常执行就像向空中扔球然后接住它，那么差异执行就像杂耍。

@windfinder 的解释与我的不同，没关系。这种技术不容易理解，我花了大约 20 年（断断续续地）找到有效的解释。让我在这里再试一次：

*   它是什么？

我们都理解计算机逐步执行程序、根据输入数据进行条件分支并执行操作的简单概念。（假设我们只处理简单的结构化 goto-less、return-less 代码。）该代码包含语句序列、基本结构化条件、简单循环和子例程调用。（暂时忘记返回值的函数。）

现在想象两台计算机彼此同步执行相同的代码，并且能够比较笔记。计算机 1 使用输入数据 A 运行，计算机 2 使用输入数据 B 运行。它们并排运行。如果他们得出一个像 IF(test) .... ENDIF 这样的条件语句，并且如果他们对测试是否为真有不同意见，那么说测试是否为假的人会跳到 ENDIF 并等待它的妹妹赶上了。（这就是为什么代码是结构化的，所以我们知道姐姐最终会到达 ENDIF。）

由于两台计算机可以相互通信，它们可以比较笔记并详细解释两组输入数据和执行历史的不同之处。

当然，在差分执行 (DE) 中，它是用一台计算机完成的，模拟两台计算机。

现在，假设您只有一组输入数据，但您想查看它从时间 1 到时间 2 的变化情况。假设您正在执行的程序是一个序列化器/反序列化器。在执行时，您既序列化（写出）当前数据，又反序列化（读入）过去的数据（上次执行此操作时写入的数据）。现在您可以很容易地看到上次数据和这次数据之间的差异。

您正在写入的文件和您正在读取的旧文件一起构成一个队列或 FIFO（先进先出），但这不是一个非常深刻的概念。

*   到底有什么好处呢？

我在做一个图形项目时突然想到，用户可以构建称为“符号”的小型显示处理器例程，这些例程可以组装成更大的例程来绘制管道、罐、阀门等图表。我们希望图表是“动态的”，因为它们可以增量更新自己，而无需重新绘制整个图表。（按照今天的标准，硬件速度很慢。）我意识到（例如）绘制条形图的条形的例程可以记住它的旧高度并且只是逐步更新自己。

这听起来像 OOP，不是吗？但是，我可以利用图表过程执行顺序的可预测性，而不是“制作”一个“对象”。我可以在顺序字节流中写入条的高度。然后要更新图像，我可以在一个模式下运行该过程，它在写入新参数的同时顺序读取其旧参数，以便为下一次更新传递做好准备。

这似乎很明显，并且一旦过程包含条件就会中断，因为这样新流和旧流就会不同步。但后来我突然意识到，如果他们也序列化条件测试的布尔值，他们可以*重新同步*。花了一段时间说服自己，然后证明，只要遵循一个简单的规则（“擦除模式规则”） ，这将*始终有效。*

最终结果是用户可以设计这些“动态符号”并将它们组合成更大的图表，而不必担心它们将如何动态更新，无论显示多么复杂或结构多变。

那个时候，我确实需要担心视觉对象之间的干扰，这样擦除一个就不会损坏另一个。但是，现在我将这项技术与 Windows 控件一起使用，并让 Windows 处理渲染问题。

那么它实现了什么？这意味着我可以通过编写一个绘制控件的过程来构建一个对话框，并且我不必担心实际记住控件对象或处理增量更新它们，或者根据条件使它们出现/消失/移动。结果是更小更简单的对话框源代码，大约一个数量级，并且动态布局或更改控件数量或拥有控件数组或网格之类的事情是微不足道的。此外，像 Edit 字段这样的控件可以很容易地绑定到它正在编辑的应用程序数据，并且它总是可以证明是正确的，我永远不必处理它的事件。为应用程序字符串变量添加编辑字段是单行编辑。

*   为什么很难理解？

我发现最难解释的是它需要对软件进行不同的思考。程序员如此固执于软件的对象-动作视图，以至于他们想知道什么是对象，什么是类，他们如何“构建”显示，以及他们如何处理事件，这需要一个樱桃炸弹把他们炸出来。我试图传达的是，真正重要的是*你需要说什么？*想象一下，您正在构建一种特定于领域的语言 (DSL)，您需要做的就是告诉它“我想在此处编辑变量 A，在此处编辑变量 B，在此处编辑变量 C”，它会神奇地为您处理. 例如，在 Win32 中有这种“资源语言”用于定义对话框。它是一个非常好的 DSL，只是它还远远不够。它不“存在于”主要的过程语言中，也不为您处理事件，也不包含循环/条件/子例程。但这意味着很好，Dynamic Dialogs 试图完成这项工作。

**因此，不同的思维模式是：**要编写程序，首先要找到（或发明）一个合适的 DSL，然后尽可能多地在其中编写程序代码。让它**处理**所有仅为实现而存在的对象和动作。

如果您想真正了解差异执行并使用它，有几个棘手的问题可能会让您大吃一惊。我曾经在[Lisp](http://en.wikipedia.org/wiki/Lisp_%28programming_language%29)宏中对其进行编码，可以为您处理这些棘手的部分，但在“普通”语言中，它需要一些程序员纪律来避免这些陷阱。

抱歉这么啰嗦。如果我没有说得通，如果您指出，我将不胜感激，我可以尝试修复它。

添加：

在[Java Swing](http://en.wikipedia.org/wiki/Swing_%28Java%29)中，有一个名为 TextInputDemo 的示例程序。这是一个静态对话框，有 270 行（不包括 50 个状态的列表）。在动态对话框中（在 MFC 中）大约有 60 行：

```
#define NSTATE (sizeof(states)/sizeof(states[0]))
CString sStreet;
CString sCity;
int iState;
CString sZip;
CString sWholeAddress;

void SetAddress(){
    CString sTemp = states[iState];
    int len = sTemp.GetLength();
    sWholeAddress.Format("%s\r\n%s %s %s", sStreet, sCity, sTemp.Mid(len-3, 2), sZip);
}

void ClearAddress(){
    sWholeAddress = sStreet = sCity = sZip = "";
}

void CDDDemoDlg::deContentsTextInputDemo(){
    int gy0 = P(gy);
    P(www = Width()*2/3);
    deStartHorizontal();
    deStatic(100, 20, "Street Address:");
    deEdit(www - 100, 20, &sStreet);
    deEndHorizontal(20);
    deStartHorizontal();
    deStatic(100, 20, "City:");
    deEdit(www - 100, 20, &sCity);
    deEndHorizontal(20);
    deStartHorizontal();
    deStatic(100, 20, "State:");
    deStatic(www - 100 - 20 - 20, 20, states[iState]);
    if (deButton(20, 20, "<")){
        iState = (iState+NSTATE - 1) % NSTATE;
        DD_THROW;
    }
    if (deButton(20, 20, ">")){
        iState = (iState+NSTATE + 1) % NSTATE;
        DD_THROW;
    }
    deEndHorizontal(20);
    deStartHorizontal();
    deStatic(100, 20, "Zip:");
    deEdit(www - 100, 20, &sZip);
    deEndHorizontal(20);
    deStartHorizontal();
    P(gx += 100);
    if (deButton((www-100)/2, 20, "Set Address")){
        SetAddress();
        DD_THROW;
    }
    if (deButton((www-100)/2, 20, "Clear Address")){
        ClearAddress();
        DD_THROW;
    }
    deEndHorizontal(20);
    P((gx = www, gy = gy0));
    deStatic(P(Width() - gx), 20*5, (sWholeAddress != "" ? sWholeAddress : "No address set."));
} 
```

添加：

这是用大约 40 行代码编辑医院患者数组的示例代码。第 1-6 行定义了“数据库”。第 10-23 行定义了 UI 的整体内容。第 30-48 行定义了用于编辑单个患者记录的控件。请注意，程序的形式几乎不会及时通知事件，就好像它所要做的只是创建一次显示。然后，如果添加或删除主题或发生其他结构更改，则只需重新执行它，就好像它是从头开始重新创建一样，只是 DE 会导致增量更新。这样做的好处是，程序员不必关注或编写任何代码来进行 UI 的增量更新，并且可以保证它们是正确的。这种重新执行似乎是一个性能问题，但事实并非如此，

```
1  class Patient {public:
2    String name;
3    double age;
4    bool smoker; // smoker only relevant if age >= 50
5  };
6  vector< Patient* > patients;

10 void deContents(){ int i;
11   // First, have a label
12   deLabel(200, 20, “Patient name, age, smoker:”);
13   // For each patient, have a row of controls
14   FOR(i=0, i<patients.Count(), i++)
15     deEditOnePatient( P( patients[i] ) );
16   END
17   // Have a button to add a patient
18   if (deButton(50, 20, “Add”)){
19     // When the button is clicked add the patient
20     patients.Add(new Patient);
21     DD_THROW;
22   }
23 }

30 void deEditOnePatient(Patient* p){
31   // Determine field widths
32   int w = (Width()-50)/3;
33   // Controls are laid out horizontally
34   deStartHorizontal();
35     // Have a button to remove this patient
36     if (deButton(50, 20, “Remove”)){
37       patients.Remove(p);
37       DD_THROW;
39     }
40     // Edit fields for name and age
41     deEdit(w, 20, P(&p->name));
42     deEdit(w, 20, P(&p->age));
43     // If age >= 50 have a checkbox for smoker boolean
44     IF(p->age >= 50)
45       deCheckBox(w, 20, “Smoker?”, P(&p->smoker));
46     END
47   deEndHorizontal(20);
48 } 
```

补充：布赖恩问了一个很好的问题，我认为答案属于这里的正文：

@Mike：我不清楚“if (deButton(50, 20, “Add”)){” 语句实际上在做什么。deButton 函数有什么作用？另外，您的 FOR/END 循环是否使用某种宏或其他东西？– 布赖恩。

@Brian：是的， FOR/END 和 IF 语句是宏。SourceForge 项目有一个完整的实现。deButton 维护一个按钮控件。当任何用户输入动作发生时，代码以“控制事件”模式运行，其中 deButton 检测到它被按下并通过返回 TRUE 来表示它被按下。因此，“if(deButton(...)){... action code ...} 是一种将操作代码附加到按钮的方式，无需创建闭包或编写事件处理程序。DD_THROW 是一个采取行动时终止传递的方式，因为该操作可能已经修改了应用程序数据，因此继续“控制事件”通过例程是无效的。如果将其与编写事件处理程序进行比较，它可以节省您编写那些，它允许您拥有任意数量的控件。

补充：对不起，我应该解释一下“维护”这个词的意思。当程序第一次执行时（在 SHOW 模式下），deButton 创建一个按钮控件并记住它在 FIFO 中的 id。在随后的传递中（在 UPDATE 模式下），deButton 从 FIFO 中获取 id，如有必要，对其进行修改，然后将其放回 FIFO。在 ERASE 模式下，它从 FIFO 中读取它，将其销毁，并且不将其放回原处，从而“垃圾收集”它。因此，deButton 调用管理控件的整个生命周期，使其与应用程序数据保持一致，这就是我说它“维护”它的原因。

第四种模式是事件（或控制）。当用户键入一个字符或单击一个按钮时，该事件被捕获并记录下来，然后在 EVENT 模式下执行 deContents 过程。deButton 从 FIFO 中获取其按钮控件的 id 并询问这是否是被单击的控件。如果是，则返回 TRUE，以便可以执行操作代码。如果不是，它只返回 FALSE。另一方面，`deEdit(..., &myStringVar)`检测事件是否针对它，如果是，则将其传递给编辑控件，然后将编辑控件的内容复制到 myStringVar。在这个和正常的 UPDATE 处理之间，myStringVar 总是等于编辑控件的内容。这就是“绑定”的完成方式。同样的想法适用于滚动条、列表框、组合框，以及任何可以让您编辑应用程序数据的控件。

这是我的维基百科编辑的链接：[http ://en.wikipedia.org/wiki/User:MikeDunlavey/Difex_Article](http://en.wikipedia.org/wiki/User:MikeDunlavey/Difex_Article)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-19T18:53:35.290

差异执行是一种基于外部事件更改代码流的策略。这通常是通过操纵某种数据结构来记录变化来完成的。这主要用于图形用户界面，但也用于序列化之类的事情，您可以将更改合并到现有的“状态”中。

基本流程如下：

```
Start loop:
for each element in the datastructure: 
    if element has changed from oldDatastructure:
        copy element from datastructure to oldDatastructure
        execute corresponding subroutine (display the new button in your GUI, for example)
End loop:
Allow the states of the datastructure to change (such as having the user do some input in the GUI) 
```

这样做的好处有几个。第一，它是将更改的执行与支持数据的实际操作分开。这对于多个处理器来说很好。第二，它提供了一种低带宽的方法来传达程序中的变化。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-11-10T11:08:08.480

**想想监视器是如何工作的：**

它以 60 Hz 的频率更新——每秒 60 次。闪烁闪烁闪烁60次，但你的眼睛很慢，无法*真正*分辨。监视器显示输出缓冲区中的任何内容；无论您做什么，它都会每隔 1/60 秒将这些数据拖出。

现在，如果图像不应该经常更改，您为什么希望您的程序每秒更新整个缓冲区 60 次？如果你只改变图像的一个像素，你应该重写整个缓冲区吗？

* * *

这是基本思想的抽象：您希望根据您希望在屏幕上显示的信息来更改输出缓冲区。您希望尽可能多地节省 CPU 时间和缓冲区写入时间，因此您不需要为下一次屏幕拉动编辑不需要更改的缓冲区部分。

显示器与您的计算机和逻辑（程序）是分开的。它以更新屏幕的任何速率从输出缓冲区中读取数据。我们希望我们的计算机停止不必要的同步和重绘。我们可以通过改变我们使用缓冲区的方式来解决这个问题，这可以通过多种方式完成。他的技术实现了一个延迟的 FIFO 队列——它保存了我们刚刚发送到缓冲区的内容。延迟的 FIFO 队列不保存像素数据，它保存“形状基元”（可能是应用程序中的像素，但也可能是线条、矩形、易于绘制的东西，因为它们只是形状，没有不必要的数据允许）。

所以你想从屏幕上绘制/擦除东西？没问题。根据 FIFO 队列的内容，我知道监视器目前的样子。我将我想要的输出（擦除或绘制新基元）与 FIFO 队列进行比较，并且只更改需要更改/更新的值。这是将其命名为差异评估的步骤。

**我欣赏这一点的**两种不同方式：****

 ****第一个：** Mike Dunlavey 使用条件语句扩展。FIFO 队列包含大量信息（“先前状态”或监视器或基于时间的轮询设备上的当前内容）。您需要添加的只是您希望接下来出现在屏幕上的状态。

一个条件位被添加到每个可以在 FIFO 队列中保存原语的槽。

```
0 means erase
1 means draw 
```

但是，我们有以前的状态：

```
Was 0, now 0: don't do anything;
Was 0, now 1: add it to the buffer (draw it);
Was 1, now 1: don't do anything;
Was 1, now 0: erase it from the buffer (erase it from the screen); 
```

这很优雅，因为当您更新某些内容时，您实际上只需要知道要在屏幕上绘制哪些图元——这种比较将确定它是否应该删除一个图元或将其添加/保留到缓冲区中。

**第二个：** 这只是一个例子，我认为 Mike 真正得到的东西应该是所有项目设计的基础：通过将计算最密集的操作编写为计算机大脑食物来降低设计的（计算）复杂性或尽可能接近。尊重设备的自然时间。

绘制整个屏幕的重绘方法非常昂贵，并且在其他应用程序中这种洞察力非常有价值。

*我们永远不会在屏幕上“移动”物体。如果我们在为计算机显示器之类的东西设计代码时要模仿“移动”的物理动作，“移动”是一项代价高昂的操作。相反，对象基本上只是随着监视器闪烁。每当一个对象移动时，它现在就是一组新的基元，而旧的基元组就会闪烁。*

每次监视器从缓冲区中拉出时，我们都有看起来像的条目

```
Draw bit    primitive_description
0           Rect(0,0,5,5);
1           Circ(0,0,2);
1           Line(0,1,2,5); 
```

对象永远不会与屏幕（或时间敏感的轮询设备）交互。当对象贪婪地要求更新整个屏幕以显示仅针对其自身的更改时，我们可以比对象更智能地处理它。

假设我们有一个程序能够生成的所有可能的图形原语的列表，并且我们将每个原语与一组条件语句联系起来

```
if (iWantGreenCircle && iWantBigCircle && iWantOutlineOnMyCircle) ... 
```

当然，这是一种抽象，实际上，表示特定原语开/关的条件集可能很大（可能有数百个标志必须全部计算为真）。

如果我们运行程序，我们可以以基本上与我们可以评估所有这些条件相同的速率绘制到屏幕上。（最坏的情况：评估最大的条件语句集需要多长时间。）

现在，对于程序中的任何状态，我们都可以简单地评估所有条件并*快速输出到屏幕！*（我们知道我们的形状基元及其相关的 if 语句。）

这就像购买图形密集型游戏。只是不是将它安装到硬盘上并通过处理器运行，而是购买一个全新的板，它可以容纳整个游戏并作为输入：鼠标、键盘，并作为输出：监视器。令人难以置信的浓缩条件评估（因为条件的最基本形式是电路板上的逻辑门）。这自然会非常敏感，但它几乎不支持修复错误，因为当您进行微小的设计更改时，整个电路板设计都会发生变化（因为“设计”与电路板的本质相去甚远）。以牺牲我们如何在内部表示数据的灵活性和清晰度为代价，我们获得了显着的“响应能力”，因为我们不再在计算机中进行“思考”；*基于输入的电路板。*

 *据我了解，这个教训是分工，这样你就可以为系统的每个部分（不一定只是计算机和显示器）提供一些它可以做得很好的东西。“计算机思维”可以用对象之类的概念来完成……计算机的大脑会很乐意为你考虑这一切，但如果你能让计算机思考，你可以大大简化任务data_update 和 conditional_evals 的条款。我们人类将概念抽象为代码是理想主义的，在内部程序绘制方法的情况下有点过于理想化了。当你想要的只是一个结果（具有正确颜色值的像素数组）并且你有一台机器可以*轻松地*每 1/60 秒吐出一个那么大的数组，尝试从计算机大脑中消除尽可能多的华丽思维，以便您可以专注于您真正想要的：将您的图形更新与您的（快速）输入同步，并且监视器的自然行为。

**这如何映射到其他应用程序？** 我想听听其他例子，但我敢肯定有很多。我认为任何为您的信息状态提供实时“窗口”（变量状态或类似数据库的东西......监视器只是进入显示缓冲区的窗口）的任何东西都可以从这些见解中受益。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-17T07:26:45.317

我发现这个概念与经典数字电子设备的状态机非常相似。特别是那些记得他们以前的输出的人。

根据（您的代码），其下一个输出取决于当前输入和上一个输出的机器。当前的输入只不过是先前的输出 + (USER, INTERACT HERE)。

用这样的机器填充一个表面，它将是用户交互的，同时代表一层可变数据。但是在这个阶段它仍然是愚蠢的，只是反映了用户对底层数据的交互。

接下来，根据（您的代码在此处）将您表面上的机器互连，让它们共享笔记，现在我们让它变得智能。它将成为一个交互式计算系统。

所以你只需要在上述模型的两个地方提供你的逻辑；其余的由机器设计本身处理。这就是它的好处。

# vb.net - VB.Net 2008 新关键字

> ID：371906
> 
> 赞同：0
> 
> 时间：2008-12-16T16:53:49.953
> 
> 标签：vb.net

我可以发誓我看到了 VS 2008 中新功能的快速演示，其中包括一种设置公共变量的方法，而无需创建大量构造函数来获取变量并将它们设置为值。有谁知道这个的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-16T17:00:59.847

您可能在谈论对象初始化器，例如...这是 C# 3.0 和 VB.NET 9 的一个特性。

```
Dim cust = New Person() With {.Id = 2, .Name = "Jesse B"} 
```

并在 C# 中

```
var cust = new Person() { Id = 2, Name = "Jesse B"}; 
```

# user-interface - 是否应该隐藏、禁用 UI 中的未经授权的操作或导致错误？

> ID：371921
> 
> 赞同：58
> 
> 时间：2008-12-16T16:56:43.007
> 
> 标签：user-interface, authorization

这对我来说是一个长期存在的问题，我从来没有真正解决过，所以我想听听你的意见。如果我知道用户由于权限或对象状态不足而无法执行的操作，这些操作的 UI 元素应该对用户隐藏、可见但禁用，还是可见并在尝试时导致错误？你回答的理由是什么？如果禁用，您会说明原因吗？如果是，如何说明？

这是一个网络界面，所以我已经知道我需要检查传入的帖子/获取权限并在那里处理错误。我主要是在谈论如何处理 UI。

这类似于[关于禁用或隐藏菜单项的规则](https://stackoverflow.com/questions/79033/rules-about-disabling-or-hiding-menu-items)，尽管我对所有类型的 UI 元素感兴趣，而不仅仅是菜单。

例子：

1.  我有一个允许用户创建新事件的新页面。事件可以是主事件或子事件。创建主事件需要“EditMasterEvent”权限，而创建子事件只需要“EditEvent”权限。我有一个下拉菜单，允许您选择现有事件作为父事件（主事件）或无父事件（这是主事件）。如果用户只有“EditEvent”权限，“创建主事件”选项应该显示在下拉列表中还是省略。

2.  删除事件需要您是应用程序管理员或对事件类型具有适当的编辑权限。在后一种情况下，事件也必须超过 5 年。删除事件会导致系统中相关数据的重大级联删除，出于法律原因，这些数据必须在事件发生后至少保留 5 年。由于该操作对于普通用户来说是很少见的，典型的情况是该操作不可用。应该始终显示还是仅在实际可能时显示？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-12-16T20:01:21.370

隐藏 - 这是当前用户永远无法使用的操作的最佳方法。如果他们无法采取任何行动来改变这一点，那么让用户浪费脑力去弄清楚为什么某些东西会被禁用是没有意义的。

已禁用 - 这是有时可用但目前或当前上下文中不可用的操作的最佳方法。禁用的选项应该传达两件事：首先，该操作现在不可用，其次，用户可以做一些事情来使该操作可用（更改某些设置或权限，选择一个项目，输入先决条件数据等。 ）。如果您可以在工具提示中指出需要执行哪些操作以启用该操作 - 那就更好了。在用户输入数据或更改上下文时启用/禁用操作可提供有关程序所需内容的出色反馈。

失败并出现错误 - 这是最糟糕的选择。对于可能有效的操作，您应该只求助于错误报告：除非通过尝试，否则您无法判断它会失败。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-16T17:21:26.573

与几乎所有 UI 问题一样，答案是“视情况而定”。

您需要权衡可发现性和用户满意度等。例如，允许无效操作让您有机会解释为什么某事无效。如果“为什么禁用”的答案不明显，这将特别有用。对于大多数用户都是初学者的应用程序，这很重要。

另一方面，看到一个控件可能会非常令人沮丧，单击它，只会得到“抱歉，你现在不能这样做”消息的奖励。我几年前继承的一个应用程序充斥着这类东西，它使使用 UI 成为一种沮丧的练习。

完全隐藏功能可能不是一个好主意。想象一下，知道某些功能“在一分钟前就存在”，但现在它已经消失了。无论是菜单项、工具栏按钮还是其他完全隐藏的东西，将其隐藏起来可能会让最终用户感到沮丧。

尝试做一些可用性测试，如果只是问下一个你看到的人“嘿，禁用它或向你显示一个信息性对话框是否有意义”。仅仅一个其他的意见通常就足以让你从另一个方向看待问题。

底线：做最能为用户服务的事情。您提到的所有场景在某些情况下都是有效的。与所有 UI 问题一样，问问你自己（或者更好的是，你的用户）什么最能满足他们的需求。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-16T16:59:53.420

我禁用元素而不是隐藏它们。这样用户就知道该选项通常可用，并且我提供了一个工具提示来解释为什么该元素当前不可用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-16T17:12:43.613

这取决于。您是否希望用户知道该操作是可能的，而不是对他们而言？在这种情况下，向他们显示按钮，但禁用它。一个例子可能是如果一个用户没有删除权限，但其他用户有，他们应该知道条目可以被删除，因此如果他们需要该操作，他们可以要求某人为他们执行此操作。

另一方面，如果用户甚至不应该知道该操作（例如，对审核日志没有读取权限的用户可能不应该知道这些日志存在），则应该无法看到该按钮，所以完全隐藏它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-16T17:04:41.960

好问题！

几个考虑：

如果您将元素放置在页面上但禁用它们，那么用户仍然很可能会篡改系统并使用 javascriptlet 启用它们。

如果您根本不显示它们，则整体功能可能会让一般用户感到有些困惑。“这里不应该有一个编辑按钮吗？”

如果您要显示和禁用或显示和验证元素，我**肯定会**进行服务器端验证。不要将验证留给 JavaScript；我认为这其中的原因是显而易见的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-16T17:42:39.183

我倾向于以不同的方式处理这两种不同类型的情况。这是一个受特权和对象状态支配的动作吗？

如果此人没有足够的权限来执行某项操作，我会隐藏该选项，他们不知道他们可以执行该操作。

如果该选项不可用，因为对象不处于可以使用该选项的状态，我将禁用它，允许该选项对用户可见，但无法执行任何操作。

从你的例子：

1.  我不会有“创建主事件”作为选项。用户没有足够的权限查看它。

2.  我会让管理员可以看到删除按钮。然后根据您对网站其余部分的处理方式（大量可见文本、工具提示、帮助图标等），我将遵循通知用户为什么此时按钮不可用的约定。并且可能在上面的按钮附近放置一个计时器，说明帖子的年龄或可以删除​​的时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-16T17:04:26.327

根据项目，我们将隐藏它们或禁用它们。如果用户可以访问一个大功能，但不能访问其中的一个较小的部分，那么我们将隐藏较小的部分。但是，如果用户可以访问多个大型功能，但不能访问其他功能，我们将让它们可见但禁用，作为一种营销策略，以提醒他们如果他们决定需要这些功能，则可以购买这些功能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-16T17:14:00.707

我还看到一些程序禁用菜单项并将其文本更改为“登录以执行等等...”

我喜欢这个，因为它不会给我留下“为什么这不起作用？” 感觉并立即告诉我该怎么做才能让它发挥作用。并非在所有情况下都适用，但如果您可以实现它，这是一个不错的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-23T15:30:42.453

如果用户可以在 UI 中执行某些操作来获得权限，则一般规则是使用禁用。禁用意味着“您可以执行此命令，但不是现在这样。” “方式”包括当前选择，因此如果用户对旧对象具有 EditEvent 权限但对新对象没有权限，请使用启用/禁用。应该清楚地表明哪些对象是可删除的，以便用户理解为什么对某些对象禁用相关命令（例如，如果用户通常知道记录必须保留 5 年，那么简单的 Age 字段可能就足够了，或许可以加强超过 5 年的记录有图形差异）。

如果假设用户对该领域有平均的了解，那么如果无法向用户说明禁用的原因，请使用消息框而不是禁用。顺便说一句，禁用控件的工具提示是个好主意，但它们本身可能还不够。

如果用户在考虑到他们当前在组织中的位置（例如，他们不是应用程序管理员）的情况下，无论他们在 UI 中做什么，都没有特权，则使用隐藏。在这种情况下使用禁用或消息框是混乱和令人沮丧的。就用户而言，他们没有权限的操作不是他们的工作（否则他们将拥有权限），因此相关的控件不应该存在于他们的 UI 中。文档或组织程序手册可能会告诉用户这些操作是如何完成的（例如，“您的主管为您创建新事件。”）。

我在[http://www.zuschlogin.com/?p=40](http://www.zuschlogin.com/?p=40)有更多详细信息。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-23T15:36:05.127

我会说禁用包含原因的悬停。

它可以防止用户想知道到底发生了什么，同时让他们知道某些操作在正确的条件下是可能的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-16T17:18:48.903

我特别讨厌禁用按钮的应用程序。如果您是最终用户 - 您想知道为什么不能使用该按钮。将其显示为灰色并不能告诉您任何信息。您如何到达该州以启用它？工具提示是一种解决方案，但它们并不是最好的，很多用户都会对工具提示感到困惑（除非您与有经验的用户一起工作）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-16T17:22:10.847

我个人的感觉是元素应该始终存在。如果用户没有足够的权限来执行这些操作，则单击时应该会生成错误。

我知道翻译人员并不真正喜欢创建无数种不同的“权限被拒绝”错误消息，因此这通常不会在本地化应用程序中完成，而是倾向于隐藏元素。

实际上，即使在非本地化的应用程序中，很多人也倾向于隐藏选项。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-22T09:42:23.477

其他人提供了很好的答案和有效的建议，以避免隐藏元素，而是禁用它们并提供一些提示原因。

所以，我想从不同的角度来看待它——但是如何在用户不需要看到它们的情况下隐藏一些 UI 元素，无论他是否拥有与元素相关的特定操作的权限？

例如，假设某个角色的用户可以访问系统中的卖家记录。

但随后业务分析师说：“看，这种形式的卖家列表有一个下拉列表，我们不应该让某些特定角色看到它”。

开发者问：“所以，我们只是从这个角色中删除“阅读卖家”权限，对吧？但分析师回答：“不！这个角色应该仍然可以在卖家页面上查看卖家。只是这种单一的形式，我们应该隐藏一些角色的列表并显示给其他一些角色。”

因此，开发人员添加了名为“在表单 X 上显示卖家下拉菜单”的权限。

哎呀，现在我们有一个问题。对相同数据的访问由两个单独的权限控制。现在我们必须弄清楚如何将它们结合起来。如果有不止一种表格应该为某些角色隐藏卖家列表怎么办？我们如何将它与“阅读卖家列表”结合起来？对于我们开发人员来说，“读取”权限应该比“查看”具有更高的优先级，所以即使用户可以“查看”列表，他仍然不应该看到它（或者看到空或禁用有帮助提示）如果他没有“读取”权限。我们，系统的开发人员和分析师都知道这一点。但是系统管理员应该怎么知道呢？我们应该教他这个吗？我们如何保证管理员不会混淆所有那些“查看”和“阅读”

如您所见，这一切都变得混乱有一个原因 - 我们在角色权限列表中将数据处理权限与 UI 便利性混合在一起。

我已经看到许多项目变得混乱，因为服务器端的权限与 UI 耦合太多，这会带来麻烦和可能的安全漏洞（因为您的角色权限编辑器中有多个项目，用于对相同数据的相同操作） .

权限是关于对某些特定数据的访问和操作。UI 只能在整个系统中以一致的方式对权限做出反应（通过提示禁用、隐藏等）。我们不应该仅仅为了 UI 目的而发明新的权限条目。

现在问题仍然存在 - 但我们如何真正为某些系统用户隐藏 UI 元素，以避免大量始终禁用的项目使他们不堪重负？一种解决方案可能是角色工作区。如果我们清楚地知道某个角色的用户永远不需要访问某些特定数据，我们就会创建一组 UI 控制条目，类似于权限，但这次我们不称它们为权限。我们可以在这里变得非常花哨，甚至允许用户自己自由定制他们的工作空间并选择他们可以看到或看不到的内容。当然，权限始终占据最高优先级，但它只会影响 UI 元素的数据和状态，而不会影响可见性。

那是我的两分钱。不幸的是，我自己没有在这样一个系统上工作过，权限和 UI 工作区选项被巧妙地分开，因为当“损坏已经完成”时，我总是以某种方式来得太晚。但我希望有一天我会有机会。我只是希望找到一个很好的例子来正确地做到这一点，但不知何故，互联网搜索并没有给我任何有用的东西。这真的意味着没有其他人得出与我相同的结论吗？我不相信，企业设计模式世界中的某个人应该早就注意到这种 UI<-> 权限阻抗不匹配。

# parsing - 解码字节流

> ID：371923
> 
> 赞同：0
> 
> 时间：2008-12-16T16:57:13.877
> 
> 标签：parsing, decoder

我有一系列由独立结构定义的消息。这些结构共享一个公共标头，在应用程序之间发送。我正在创建一个解码器，它将获取使用这些结构构建的消息中的原始数据捕获并将它们解码/解析为一些纯文本。

我有超过 1000 条不同的消息需要解码，所以我不确定是否在 XML 中定义所有结构格式，然后使用 XSL 或一些翻译是可行的方法，或者是否有更好的方法来做到这一点。

有时我需要解码包含超过一百万条消息的日志，因此性能是一个问题。

关于创建解码器/解析器的技术/工具/算法有什么建议吗？

```
struct:
struct {
  dword messageid;
  dword datavalue1;
  dword datavalue2;
} struct1; 
```

原始数据示例：

```
0101010A0A0A0A0F0F0F0F 
```

解码消息（所需输出）：

```
message id: 0x01010101, datavalue1: 0x0A0A0A0A, datavalue2: 0x0F0F0F0F 
```

我正在使用 C++ 进行此开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T18:23:54.513

关于“性能” - 如果您使用磁盘 IO 和可能的显示 IO，我怀疑您的解析器/解码器会产生很大的影响，除非您使用真正可怕的算法。

我也不确定问题是什么 - 鉴于现在的问题 - 您在一个结构中有 3 个 DWORD，并且您声称有超过 1000 条基于这些值的唯一消息。

您的解码消息并不意味着您需要任何类型的解析 - 只是直接输出似乎有效（从字节转换为十六进制值的 ascii 表示）

如果您确实有从值到字符串的映射，那么大 switch 语句很简单 - 或者如果您希望能够动态添加这些或更改显示，那么我将提供键/值对（映射) 在配置文件（文本、xml 等）中，然后在读取日志文件/原始数据时进行查找。

map 是我在这种情况下会使用的。

也许如果您提供另一个值和解码输出的具体示例，我可以提出更合适的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T00:08:10.683

If you have the message definitions already given in the syntax that you've used in your example, you should definitely not try to convert it manually into some other syntax (XML or otherwise).

Instead, you should try to write a compiler that takes these method definitions, and compiles them into a decoder function.

These days, the recommendation is to use ANTLR as the parser generator, using any of the ANTLR languages for the actual compiler (Java, Python, Ruby, C#, C++). That compiler then should output C code, which does the entire decoding and pretty-printing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-28T16:42:13.680

我将假设您需要做的就是格式化记录并输出它们。

使用自定义代码生成器。生成的代码将如下所示：

```
typedef struct { word messageid; } Header;

//repeated for each record type
typedef struct {
    word messageid;
    // <members here>
} Record_##;
//END

void Process(Input inp, Output out) {
    char buffer[BIG_ENOUGH];
    char *offset;

    offset = &buffer[BIG_ENOUGH];

    while(notEnd) {
        if(&offset[sizeof(LargestStruct)] >= &buffer[BIG_ENOUGH])
            // move remaining buffer to start and fill tail from inp

        Header *hpt = (Header*)offset;

        switch(hpt->messageid)
        {
            //repeated for each record type
            case <recond ID for given type>: 
            {
                Record_##* rpt = (Record_##*)offset;
                outp.format("name1: %t, ...\n", rpt->name1, ...);
                offset += sizeof(Record_##);
                break;
            }
            //END
        }
    }
} 
```

其中大部分是样板，因此编写程序来生成它应该不难。

如果您需要更多处理，我认为可以对这个想法进行一些调整以使其也能正常工作。

* * *

*编辑：*重新阅读问题后，看起来您可能已经定义了结构。在这种情况下，您可以只`#include`使用它们并直接使用它们。但是，您最终会遇到如何解析结构以生成格式化函数的输入的问题。awk 或 sed 在那里可能很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-28T11:38:35.137

您可以使用 yacc 或 antlr，添加适当的解析规则，在解析时从中填充一些数据结构（可能是树），然后遍历数据结构并做任何您喜欢的事情。

# security - 有没有办法通过脚本禁用 MSFT IE XML 数据绑定功能？

> ID：371928
> 
> 赞同：0
> 
> 时间：2008-12-16T16:57:58.230
> 
> 标签：security, browser, binding, explorer

**问题：**是否可以构建一个网页，其中包含关闭 MSIE 中 XML 数据绑定的脚本？理想的方法是编写一个 HTML 页面，并指示办公室中的所有人使用“关闭数据绑定”按钮访问该页面。

**理由：**此时桌面系统管理员不可用，目标是创建一种简单的脑死方法，让人们无需通过一堆 MSIE 配置菜单即可关闭此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T17:09:35.787

我假设您正在谈论[Microsoft 安全公告 (961051)](http://www.microsoft.com/technet/security/advisory/961051.mspx)。

如果您可以使用客户端脚本禁用 XML 数据绑定，那么有人可以使用客户端脚本启用它并再次暴露该漏洞。所以这是不可能的。

但是，如果每个人都运行相同版本的 Windows 和相同的位数，那么只需将他们发送到一个页面，他们可以将其复制并粘贴到“开始”>“运行”中：

`Regsvr32.exe /u "Program Files\Common Files\System\Ole DB\oledb32.dll"`

请注意，这将防止当前的攻击，但要全面保护他们建议应用另一种解决方法的漏洞。更多关于[这里](http://blogs.technet.com/swi/archive/2008/12/12/Clarification-on-the-various-workarounds-from-the-recent-IE-advisory.aspx)。

鼓励您的员工通过电子邮件访问网站并运行他们被告知要运行的东西可能是一个坏主意，因为这会使他们面临各种网络钓鱼攻击，因为大多数人无法区分来自他们自己公司 IT 部门的电子邮件和恶意人员发送的电子邮件。

有关可用解决方法的更多信息，请[点击此处](http://support.microsoft.com/kb/961051)。

最后，最佳实践是推出上述知识库文章中描述的一种解决方法。

# c# - .Net XmlWriter - 意外的编码让我感到困惑

> ID：371930
> 
> 赞同：8
> 
> 时间：2008-12-16T16:58:28.773
> 
> 标签：c#, xml

环境是VS2008，.Net 3.5

以下C#代码（注意指定的UTF8编码）

```
XmlWriterSettings settings = new XmlWriterSettings ();
StringBuilder sb  = new StringBuilder();
settings.Encoding = System.Text.Encoding.UTF8;
settings.Indent   = false;
settings.NewLineChars = "\n";
settings.ConformanceLevel =  System.Xml.ConformanceLevel.Document;

XmlWriter writer = XmlWriter.Create (sb, settings);
{
   // Write XML data.
   writer.WriteStartElement ("CCHEADER");
   writer.WriteAttributeString ("ProtocolVersion", "1.0.0");
   writer.WriteAttributeString ("ServerCapabilities", "0x0000000F");
   writer.WriteEndElement ();
   writer.Flush ();
} 
```

实际生成 XML（>< 省略，因为它们上有 SO barfs）：

?xml 版本=“1.0”编码=“utf-16”？
CCHEADER ProtocolVersion="1.0.0" ServerCapabilities="0x0000000F" /

为什么我会在这里生成错误的编码？我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-16T17:02:05.833

我怀疑这是因为它正在写入本质上是 UTF-16 的 StringBuilder。解决此问题的另一种方法是创建一个派生自 StringWriter 的类，但它会覆盖 Encoding 属性。

我相信我在[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)中有一个- 但无论如何写起来都很简单。像这样的东西：

```
public sealed class StringWriterWithEncoding : StringWriter
{
    private readonly Encoding encoding;

    public StringWriterWithEncoding (Encoding encoding)
    {
        this.encoding = encoding;
    }

    public override Encoding Encoding
    {
        get { return encoding; }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T17:03:06.270

.Net 字符串以 Unicode (UTF-16) 编码。我希望这是您的编码问题的根源，因为您正在写入 StringBuilder。

# entity-framework - 实体框架函数导入，无法为返回实体类型的函数加载关系

> ID：371933
> 
> 赞同：6
> 
> 时间：2008-12-16T16:59:11.067
> 
> 标签：entity-framework

我创建了一个函数导入，它将存储过程的结果作为我的实体之一返回。但是我似乎无法遍历我的导航属性来访问其他实体中的数据。我知道您可以将 include() 用于 objectQueries，但找不到任何会强制 EF 为函数导入的实体结果加载我的关系的东西。

有任何想法吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-10-03T18:54:16.390

这在 EF 1.0 中是不可能的

原因是 EF 将认为存储过程值只是值而不是导航属性。

例如，Employee 实体有多个 Order 实体。在订单中，您有一个名为 EmployeeID 的属性。当数据库使用包含语句填充您的查询时，它会在 SQL 中创建 1 个投影查询来填充特定员工可能拥有的所有订单数据。

所以如果我说

var employee = context.Employees.Include("Orders").Where(e => e.ID == 1).First();

var 订单 = 员工。订单；

第一个查询的 SQL 将创建一个投影查询，其中包含 EmployeeID = 1 的订单。

现在，当您的存储过程运行时，它可以在后台执行任何代码（换句话说，它可以返回任何数据集）。因此，当 SQL 运行存储过程时，它只运行该存储过程中的代码，并且不知道 Order 上的 EmployeeID 是该属性的 FK。此外，如果您的存储过程返回一个 Employee 实体，那么您将看到另一种场景，您甚至没有要追求的 OrderID。

但是，要解决此问题，您可以使用可以镜像任何存储过程的 Include 语句在 EF 中设置查询。如果您使用 .Select 和 .Include 语句的正确组合，您应该能够做同样的事情。

# asp.net-mvc - ASP.NET MVC 路由问题

> ID：371938
> 
> 赞同：1
> 
> 时间：2008-12-16T16:59:59.583
> 
> 标签：asp.net-mvc, routes

我有两条路线要映射到我的 ASP.NET MVC 应用程序中

1.  /用户登录
2.  /User/{userid}/{username}/{action}（例如 /User/1/blah/profile）

以下是我定义的路线：

```
 routes.MapRoute(
        "Profile",
        "Users/{userID}/{username}/{action}",
        new { controller = "Users", action = "Profile" }
    );

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = "" }
    ); 
```

到目前为止，这在大多数情况下都非常有效。以下 URL 可在我的主页上使用：

```
<%= Html.ActionLink((UsersController x) => x.Login(), "Login") %>
<%= Html.ActionLink((UsersController x) => x.Profile(1, "blah") %> 
```

这些映射到（恭敬地）：

/Users/登录 /Users/1/blah

但是，一旦我导航到 /Users/1/blah，登录 url 立即变为 /Users/1/blah/login。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-17T16:06:07.320

你想用`<%=Html.RouteLink%>`

这与我遇到的问题非常相似[，您可以在此处查看](https://stackoverflow.com/questions/323572/asp-mvc-routing-with-1-parameter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T21:17:56.940

您的路线是否符合授权过滤器？是否需要登录才能查看 /Users/1/blah 页面？（即，UsersController 类或 Profile Action 上是否有 [Authorize] 属性？）

那么，如果它不是授权过滤器，我*强烈*建议您将此[路由调试器工具](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)实施到您的项目中。

# .net - 如何确定 AD 组是否包含来自另一个（受信任）域的给定 DirectoryEntry？

> ID：371947
> 
> 赞同：3
> 
> 时间：2008-12-16T17:02:21.513
> 
> 标签：.net, active-directory, ldap, adsi

我正在尝试增强我的代码，以确定用户是否是给定 AD 组的成员。它基本上可以工作，除非该组的成员碰巧来自另一个（受信任的）域，因为它被存储为 foreignsecurityprincipal。

鉴于我对要测试的组和要检查的帐户都有一个有效的 DirectoryEntry 对象，我需要一个 DirectorySearcher 过滤器字符串，它允许我确认该帐户在该组中，即使该帐户是外国安全负责人。

（演示问题的 VB.NET 代码示例）

```
Dim ContainerGroup as DirectoryEntry = ... Code to get Group
Dim UserToCheckFor as DirectoryEntry = ... Code to get User

DSearcher = New DirectorySearcher(ContainerGroup, "(WHATCANIPUTINHERE)", New String() {"member;Range=0-5000"}, SearchScope.Base)
DSearcher.AttributeScopeQuery = "member"

'If an object is found, the account was in the group
Return (DSearcher.FindOne() IsNot Nothing) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T23:18:24.903

好的。找到了。这是诀窍。

我正在尝试增强我的代码，以确定用户是否是给定 AD 组的成员。它基本上可以工作，除非该组的成员碰巧来自另一个（受信任的）域，因为它被存储为 foreignsecurityprincipal。

（VB.NET 代码示例）

```
Dim ContainerGroup as DirectoryEntry = ... Code to get Group
Dim UserToCheckFor as DirectoryEntry = ... Code to get User

DSearcher = New DirectorySearcher
Dim DSearcher As New DirectorySearcher(ContainerGroup, getLDAPQueryStringUsingSID(containedGroup), New String() {"member;Range=0-5000"}, SearchScope.Base)

Return (DSearcher.FindOne() IsNot Nothing) 

** Helper Methods **

Private Function getLDAPQueryStringUsingSID(ByVal DEObject As DirectoryEntry) As String            
  Return "(objectSid=" + getSDDLSidForDirectoryEntry(DEObject) + ")"
End Function

Private Function getSDDLSidForDirectoryEntry(ByVal DEObject As DirectoryEntry) As String
      Dim bytes As Byte() = CType(DEObject.Properties("objectSid").Value, Byte())
      Dim sid As New System.Security.Principal.SecurityIdentifier(bytes, 0)
      Return sid.ToString
End Function 
```

# msdn - MSDN - 关于 MSDN 订阅和 Microsoft Expression 工具的问题

> ID：371952
> 
> 赞同：-1
> 
> 时间：2008-12-16T17:04:02.570
> 
> 标签：msdn, subscriptions

Microsoft MSDN 订阅是否涵盖最新的表达工具？我知道过去它们不是 MSDN 下载的一部分。我想我记得有人说他们现在可用。这些是试用版还是完整版？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-16T17:10:15.130

是的，现在可以从订阅者下载处获得完整的表达式工具集。

我有 VSTS Architecture Edition，我可以下载：

Expression Blend 2 (x86) - DVD (English) Expression Design 2 (x86) - DVD (English) Expression Encoder 2 (x86) - DVD (English) Expression Media 2 (Mac) - DMG (English) Expression Media 2 (x86) - DVD（英语）Expression Studio 2 (x86) - DVD（英语）Expression Web 2 (x86) - DVD（英语）

Expression Blend 1（英语） Expression Studio 1（英语） Expression Web 1（英语） Expression Web 1 Service Pack 1 (x86) - EXE（英语）

但是，MSDN 订阅比较页面仅列出了 Architecture and Developer Edition 下的 Blend 和 Web。Expression Studio 应该需要 VSTS Team Suite。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T17:10:17.753

我通过 MSDN 订阅获得的唯一版本是 Expression Blend 2 和 Expression Web 2，因此整个套件不是订阅的标准，但可以购买。Blend 和 Web 是成熟的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T18:16:54.607

是的，我还在 Microsoft MSDN 订阅下载站点上看到了完整的 Expressions Suit。这些是完整版，不是试用版。

我刚刚检查了这些是可供下载的程序：

Expression Blend 2 (x86) - DVD（英语）

表达式设计 2 (x86) - DVD（英语）

表达式编码器 2 (x86) - DVD（英语）

Expression Media 2 (Mac) - DMG（英语）

表达媒体 2 (x86) - DVD（英语）

Expression Studio 2 (x86) - DVD（英语）

Expression Web 2 (x86) - DVD（英语）

但我有通用 MSDN 订阅。

# c# - 如何使用 Visual Studio 2008 对 C# Web 服务进行单元测试

> ID：371961
> 
> 赞同：12
> 
> 时间：2008-12-16T17:08:36.803
> 
> 标签：c#, web-services, unit-testing

您应该如何使用 Visual Studio 2008 在 C# 中对 Web 服务进行单元测试？当我生成单元测试时，它会添加对 Web 服务类的实际引用，而不是 Web 引用。它设置指定的属性：

[http://msdn.microsoft.com/en-us/library/ms243399(VS.80).aspx#TestingWebServiceLocally](http://msdn.microsoft.com/en-us/library/ms243399(VS.80).aspx#TestingWebServiceLocally)

然而，它会在不执行测试的情况下完成。我试图将调用添加到，`WebServiceHelper.TryUrlRedirection(...)`但调用不喜欢目标，因为它继承自`WebService`，而不是`WebClientProtocol`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-16T19:14:29.343

我通常做的不是直接针对 Web 服务进行测试，而是尝试在服务中放置尽可能少的代码，并调用一个不同的类来完成所有实际工作。然后我为其他类编写单元测试。事实证明，类有时在 Web 服务上下文之外很有用，所以这样 - 你会获得两倍的收益。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-16T19:47:57.903

如果您正在编写 Web 服务，请尝试将所有逻辑放在另一个（可测试的）层中。每个 Web 方法都应该有尽可能少的代码。那么您将没有理由直接测试 web 方法，因为您可以测试底层。

```
[WebMethod]
public void DoSomething()
{ 
   hander.DoSomething();
} 
```

如果您正在使用 Web 方法，请将生成的调用者包装在类包装器中，并为类包装器实现一个接口。然后，每当您需要调用 Web 服务时，使用该接口调用该方法。您希望使用该接口以使类包装器在测试期间可交换（使用 Rhino Mocks、Moq 或 TypeMock）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-16T17:31:43.730

您可以将服务引用添加到您的单元测试项目或生成您的客户端存根并将该类放入您的单元测试项目中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-27T00:46:13.283

我也有这个问题，所以我使用这个解决方法： http: [//techkn0w.wordpress.com/2009/07/01/unit-testing-an-asmx-web-service-in-visual-studio-2008/](http://techkn0w.wordpress.com/2009/07/01/unit-testing-an-asmx-web-service-in-visual-studio-2008/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-26T15:15:12.143

在我的网络方法单元测试之上，我有以下内容：

```
// TODO: Ensure that the UrlToTest attribute specifies a URL to an ASP.NET page (for example,
// http://.../Default.aspx). This is necessary for the unit test to be executed on the web server,
// whether you are testing a page, web service, or a WCF service.
[HostType("ASP.NET")]
[UrlToTest("http://localhost/MyWebService")] 
```

除了常规：

```
[TestMethod()]
[DeploymentItem("MyWebService.dll")] 
```

此代码来自使用 Visual Studio 2008 单元测试向导。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-05T12:50:19.087

知道有两种类型的 Web 服务。那些您自己编写并想要测试的，以及您使用的那些。对于前者，上述规则适用。但是，我会说有时我会看到开发人员针对外部 Web 服务进行测试。逻辑表明第三方服务是不可靠的，因此需要更多的测试。在面向对象编程中，最好理解 Martin Fowler 和其他人都告诉我们的关注点分离。这意味着我们不应该测试我们自己的外部系统。

但是，我喜欢编写包装类来为服务提供有用的功能。例如，Bing Maps 有许多非常强大的功能。我针对这些编写测试只是为了确保它们给我预期的值。虽然不广泛，但它们的重点是，如果 Web 服务因任何原因（身份验证密钥过期等）而死，那么我可以通过测试服务器获知它。

# asp.net - ASP.NET 中的模板控件从页面中隐藏内容

> ID：371974
> 
> 赞同：0
> 
> 时间：2008-12-16T17:13:07.887
> 
> 标签：asp.net, template-control

我正在编写自己的 Modal Popup 作为 ASP.NET 中的模板控件。我有两个模板容器——一个用于窗口的标题，一个用于我想在模式窗口中显示的实际控件（我们称之为表单控件）。表单控件可以包含服务器控件，如按钮、文本框等。

它工作得很好，除非我想在我的网页中访问表单控件。我的代码隐藏无法识别模板控件中的内容 - 就像它不会在其中一样，比如中继器。所以我认为面板控件就像我需要的一样工作，除了面板控件只有“一个容器”并且我真的希望能够同时设置标题和内容（表单控件）。

我想我可以覆盖面板控件来添加我自己的 html，但这会限制我的标题在属性中是可编码的。那么我最好的选择真的是将标题公开为一个属性，而不是一个模板，因此我可以为标题编写的内容受到限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T19:11:23.217

就像使用中继器一样，尝试使用 ParentControl.FindControl(...) 方法来获得所需的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T09:09:30.700

我最终覆盖了面板控件，接受了我只能“传递”一组控件作为其子控件。我还必须使标题成为我在 modalpopup 控件上设置为属性的属性。

即使我无法以我想要的方式解决它，但我认为解决方案已经足够好了。

# grails - Grails and multiple databases (one per host)?

> ID：371976
> 
> 赞同：2
> 
> 时间：2008-12-16T17:13:20.833
> 
> 标签：grails

Is there a way (in Grails) to change the 'primary' database while the application is running, but before any domain objects have been instantiated? I'm trying to set up an app where each customer has their own database, but don't want to have to run a separate Java interpreter for every single customer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-17T15:59:26.007

退房： http: [//www.leebutts.com/2008/07/switchable-grails-datasource.html](http://www.leebutts.com/2008/07/switchable-grails-datasource.html)

# coldfusion - OpenBD 或 Railo 是 ColdFusion 的可行替代品吗？

> ID：371985
> 
> 赞同：11
> 
> 时间：2008-12-16T17:16:02.920
> 
> 标签：coldfusion, railo, openbd, cfml

这里有人有在生产中运行 OpenBD 或 Railo 的经验吗？我们有一些需要托管在某个地方的遗留 CF6.1 应用程序，我想知道 OpenBD 或 Railo 是否足够稳定以供生产使用，不需要大量的努力即可迁移到等等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-17T16:00:19.110

我会以“Adobe”的身份插话并说是的，OpenBD 和 Railo 都是可行的 CFML 引擎。主要障碍是 CFML 兼容性。在过去的十年中，Allaire/Macomedia/Adobe 一直在推动 CFML 标准，但我们已经成立了一个由该领域的各种专家组成的开放式 CFML 顾问委员会，以帮助推动该语言的未来。

今天，ColdFusion 7 似乎是基础标准。从那里开始，CFML 标准似乎在供应商之间分裂。ColdFusion 8 添加了许多其他引擎未添加的独家功能，Railo 和 OpenBD 反之亦然。未来，CFML Advisory 应该会解决这个问题。

使用 ColdFusion 作为标准，我发现以下两个链接是了解兼容性差异的最佳位置。

[OpenBD 兼容性](http://en.wikipedia.org/wiki/BlueDragon#Compatibility)

[Railo 兼容性](http://www.railo-technologies.com/en/index.cfm?treeID=107)

这是 CFML 咨询小组的网址。他们刚刚启动了该站点，因此那里还没有太多信息。

[OpenCFML.org](http://www.opencfml.org)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-25T15:57:57.607

Railo 中的 CFML 兼容性是我们的主要关注点。如果 Railo 中存在与 Adob​​e CF 不兼容的内容，请告知我们，我们会尽快修复。我们当然会尝试在 Railo 3.1.x 中实现 CFML 咨询委员会的所有要求，以便我们可以称自己为 CFML 2009 兼容。

AFAIK 一个引擎应该实现被称为 CFML 2009 兼容的核心和扩展核心，但我猜咨询委员会尚未就此达成一致。事实上，供应商（就像我们一样）应该遵守这些标准并相应地实施它们。

当然，如果您遇到任何问题，请告知 Railo Google 小组或通过 www.getrailo.com 联系我们

格特弗兰兹

* * *

Railo 专业开源

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-16T17:38:12.063

两者都与 CFMX 7 兼容，因此将 cf6.1 站点迁移到任何一个站点都不会有任何问题。

请注意，[OpenBD](http://openbluedragon.org/) **不**支持**CFDOCUMENT**标签，因此 PDF 生成将是一个问题。另一方面，[Railo做到了。](http://railo.ch/en/index.cfm)

Railo 有一个[express 版本](http://railo.ch/en/index.cfm?treeID=224)，它不需要安装，并且可以很容易地查看现有应用程序是否可以使用它。

OpenBD 也有一个[下载和准备运行版本](http://www.openbluedragon.org/download.cfm)，虽然我没有尝试过，它应该和 Railo Express 版本一样容易设置。

OpenBD 似乎已经启动了一个项目来集成[飞碟项目](http://code.google.com/p/flying-saucer//)以替代 CFDOCUMENT 支持。更多信息可以在[这里找到](http://groups.google.com/group/openbd/browse_thread/thread/0f157a49cf84da73)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-17T11:24:18.980

绝对地！两者都是企业级解决方案，不应该造成太多问题。正如 rip747 提到的，您可以下载副本以快速测试您的应用程序兼容性。

至于性能，一般认为Railo 是三款引擎中最快的，而BlueDragon 是最慢的。虽然它目前没有投入生产，但我正在开发一个针对 Railo 3.0 的应用程序，并打算在 Railo 3.1 发布后部署到它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-18T17:44:29.033

对 cfdocument 的支持将包含在 OpenBD 的下一个“主要”版本中。

只是为了给人们一些关于 OpenBD 中 cfdocument 支持的背景知识，在 New Atlanta BlueDragon 中为 cfdocument 使用了一个商业库，因此当 OpenBD 开源时必须将其删除。然而，“钩子”仍在 OpenBD 引擎中，因此实际上只是使用开源文档引擎实现底层功能的问题，其中有很多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-06T21:35:38.203

我认为 replacedirect.nl 最近将他们的网店迁移到 railo。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-10-04T16:29:36.873

Railo 几乎没有文档。这似乎不是核心团队的优先事项，他们没有很好地管理 Railo 开源项目。这是由于无能而失去动力的情况。

由于文档非常薄弱，Railo 很难部署，因此不能认真对待。此外，当您向下滚动到使用示例时，标签和功能标签是空的。这个开源项目和运行它的团队是一个笑话，与过去 2 年中反复出现的安装/配置困难的抱怨完全脱节。

坚持使用具有良好文档的 Adob​​e Coldfusion 或切换到另一种语言。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-12-05T02:51:36.413

Rob，介意我是否尝试通过提供与您的问题不同的解决方案来解决您的问题？

在您提到对托管的兴趣时，请记住，如果您指的是共享托管，那么您无需担心 CFML 引擎的成本。这将由托管服务提供商承担，并由服务器上的人员分摊。因此，您会发现许多低成本（甚至免费）的 CF 托管服务提供商在 Adob​​e CF 上运行（并且您会发现其中有一系列运行不同版本以适应个人口味，从 CF 6、7、8 或9，正如我今天所写的那样。）

有各种 CF 托管服务提供商列表。我在我的 CF411 站点的一个类别中提供了一个（并且还提供了指向其他列表的指针）：[http ://www.cf411.com/#cfhost](http://www.cf411.com/#cfhost)

# c# - 如何在 C# 中验证日期时间？

> ID：371987
> 
> 赞同：129
> 
> 时间：2008-12-16T17:16:15.400
> 
> 标签：c#, datetime, validation

我怀疑我是唯一提出此解决方案的人，但如果您有更好的解决方案，请在此处发布。我只是想把这个问题留在这里，以便我和其他人以后可以搜索它。

我需要判断是否在文本框中输入了有效日期，这是我想出的代码。当焦点离开文本框时，我会触发它。

```
try
{
    DateTime.Parse(startDateTextBox.Text);
}
catch
{
    startDateTextBox.Text = DateTime.Today.ToShortDateString();
} 
```

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2008-12-16T17:18:03.493

```
DateTime.TryParse 
```

我相信这更快，这意味着您不必使用丑陋的 try/catch :)

例如

```
DateTime temp;
if(DateTime.TryParse(startDateTextBox.Text, out temp))
{
  // Yay :)
}
else
{
  // Aww.. :(
} 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2008-12-16T17:18:42.337

不要使用异常进行流量控制。使用[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)和[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)。就我个人而言，我更喜欢具有特定格式的 TryParseExact，但我想有时候 TryParse 会更好。基于您的原始代码的示例使用：

```
DateTime value;
if (!DateTime.TryParse(startDateTextBox.Text, out value))
{
    startDateTextox.Text = DateTime.Today.ToShortDateString();
} 
```

首选这种方法的原因：

*   更清晰的代码（它说明了它想要做什么）
*   比捕获和吞咽异常更好的性能
*   这不会不恰当地捕获异常 - 例如 OutOfMemoryException、ThreadInterruptedException。（您当前的代码可以通过捕获相关异常来修复以避免这种情况，但使用 TryParse 仍然会更好。）

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-07-02T15:34:47.757

这是解决方案的另一种变体，如果字符串可以转换为`DateTime`类型，则返回 true，否则返回 false。

```
public static bool IsDateTime(string txtDate)
{
    DateTime tempDate;
    return DateTime.TryParse(txtDate, out tempDate);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-16T17:18:41.260

我会使用 DateTime.TryParse() 方法：http: [//msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-16T17:19:03.507

使用[TryParse](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)怎么样？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-16T19:48:00.477

使用的一个问题`DateTime.TryParse`是它不支持非常常见的数据输入用例，即不带分隔符输入的日期，例如`011508`.

这是一个如何支持这一点的示例。（这是来自我正在构建的框架，所以它的签名有点奇怪，但核心逻辑应该是可用的）：

```
 private static readonly Regex ShortDate = new Regex(@"^\d{6}$");
    private static readonly Regex LongDate = new Regex(@"^\d{8}$");

    public object Parse(object value, out string message)
    {
        msg = null;
        string s = value.ToString().Trim();
        if (s.Trim() == "")
        {
            return null;
        }
        else
        {
            if (ShortDate.Match(s).Success)
            {
                s = s.Substring(0, 2) + "/" + s.Substring(2, 2) + "/" + s.Substring(4, 2);
            }
            if (LongDate.Match(s).Success)
            {
                s = s.Substring(0, 2) + "/" + s.Substring(2, 2) + "/" + s.Substring(4, 4);
            }
            DateTime d = DateTime.MinValue;
            if (DateTime.TryParse(s, out d))
            {
                return d;
            }
            else
            {
                message = String.Format("\"{0}\" is not a valid date.", s);
                return null;
            }
        }

    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-19T13:42:24.080

一个班轮：

```
if (DateTime.TryParse(value, out _)) {//dostuff} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-05T03:10:23.760

```
 protected bool ValidateBirthday(String date)
    {
        DateTime Temp;

        if (DateTime.TryParse(date, out Temp) == true &&
      Temp.Hour == 0 &&
      Temp.Minute == 0 &&
      Temp.Second == 0 &&
      Temp.Millisecond == 0 &&
      Temp > DateTime.MinValue)
            return true;
        else
            return false;
    } 
```

//假设输入字符串是短日期格式。
例如“2013/7/5”返回真或
“2013/2/31”返​​回假。
[http://forums.asp.net/t/1250332.aspx/1](http://forums.asp.net/t/1250332.aspx/1)
//bool booleanValue = ValidateBirthday("12:55"); 返回假

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-13T15:39:35.993

```
private void btnEnter_Click(object sender, EventArgs e)
{
    maskedTextBox1.Mask = "00/00/0000";
    maskedTextBox1.ValidatingType = typeof(System.DateTime);
    //if (!IsValidDOB(maskedTextBox1.Text)) 
    if (!ValidateBirthday(maskedTextBox1.Text))
        MessageBox.Show(" Not Valid");
    else
        MessageBox.Show("Valid");
}
// check date format dd/mm/yyyy. but not if year < 1 or > 2013.
public static bool IsValidDOB(string dob)
{ 
    DateTime temp;
    if (DateTime.TryParse(dob, out temp))
        return (true);
    else 
        return (false);
}
// checks date format dd/mm/yyyy and year > 1900!.
protected bool ValidateBirthday(String date)
{
    DateTime Temp;
    if (DateTime.TryParse(date, out Temp) == true &&
        Temp.Year > 1900 &&
       // Temp.Hour == 0 && Temp.Minute == 0 &&
        //Temp.Second == 0 && Temp.Millisecond == 0 &&
        Temp > DateTime.MinValue)
        return (true);
    else
        return (false);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-26T17:13:52.200

所有的答案都非常好，但如果你想使用单个功能，这可能会奏效。它将与其他日期格式一起使用，但不适用于此日期，例如：05/06/202 它会将其视为有效日期，但它不是。

```
private bool validateTime(string dateInString)
{
    DateTime temp;
    if (DateTime.TryParse(dateInString, out temp))
    {
       return true;
    }
    return false;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-24T10:15:24.323

您还可以定义`DateTime`特定的格式`CultureInfo`

```
public static bool IsDateTime(string tempDate)
{
    DateTime fromDateValue;
    var formats = new[] { "MM/dd/yyyy", "dd/MM/yyyy h:mm:ss", "MM/dd/yyyy hh:mm tt", "yyyy'-'MM'-'dd'T'HH':'mm':'ss" };
    return DateTime.TryParseExact(tempDate, formats, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out fromDateValue);
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-09-14T08:14:47.750

```
DateTime temp;
try
{
    temp = Convert.ToDateTime(grd.Rows[e.RowIndex].Cells["dateg"].Value);
    grd.Rows[e.RowIndex].Cells["dateg"].Value = temp.ToString("yyyy/MM/dd");
}
catch 
{   
    MessageBox.Show("Sorry The date not valid", "Error", MessageBoxButtons.OK, MessageBoxIcon.Stop,MessageBoxDefaultButton.Button1,MessageBoxOptions .RightAlign);
    grd.Rows[e.RowIndex].Cells["dateg"].Value = null;
} 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2016-09-14T08:22:00.683

```
DateTime temp;
try
{
    temp = Convert.ToDateTime(date);
    date = temp.ToString("yyyy/MM/dd");
}
catch 
{
    MessageBox.Show("Sorry The date not valid", "Error", MessageBoxButtons.OK, MessageBoxIcon.Stop,MessageBoxDefaultButton.Button1,MessageBoxOptions .RightAlign);
    date = null;
} 
```

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2020-04-10T00:17:41.770

```
protected static bool CheckDate(DateTime date)
{
    if(new DateTime() == date)      
        return false;       
    else        
        return true;        
} 
```

# asp.net-mvc - ASP MVC 中的自定义错误处理

> ID：371989
> 
> 赞同：5
> 
> 时间：2008-12-16T17:16:40.000
> 
> 标签：asp.net-mvc, error-handling

我想超越 ASP mvc 中给出的默认错误处理。我有一个错误控制器，所以我希望可以根据发生的情况给出不同的错误消息：即无效参数、权限被拒绝、OMG DATABASE DEAD 等。

但我似乎无法弄清楚如何做到这一点，这是我尝试过的：

```
[HandleError(View="/Errors/InvalidArgument",ExceptionType=typeof(ArgumentException))] 
```

它最终给出了一个运行时错误。

此外，在同一主题上，是否可以添加更多可以传递给错误控制器的参数，例如：

```
[HandleError(View="/Errors/InvalidArgument",ExceptionType=typeof(ArgumentException), Error="dumb arguments")] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-16T17:19:23.413

只需指定视图名称，而不是路径...至于传递参数，我认为您不能。************