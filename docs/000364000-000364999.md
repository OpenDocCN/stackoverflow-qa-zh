# StackOverflow 问答 000364000-000364999

# wpf - 如何制作具有多个内容值的 Button？

> ID：364001
> 
> 赞同：1
> 
> 时间：2008-12-12T20:15:12.643
> 
> 标签：wpf, xaml, contentpresenter

我的目标是制作一个具有两个 Content 值的 Button。

将 Scrabble 瓷砖想象成一个按钮：它的中心是大字母，右下角有一个小数字。这就是我想要的效果。

我制作了一个按钮，其中包含两个 ContentPresenter 对象，并且我为每个 ContentPresenter 赋予了不同的样式。但是，我还没有找到一种方法来给每个演示者一个单独的值（即，如果我将按钮的内容设置为“X”，那么两个 ContentPresenter 都显示“X”，尽管样式不同）。

我怎样才能实现我的目标？我猜我的方法是完全错误的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T20:39:51.593

呸...我想我现在知道该怎么做了。我应该自己控制而不是修改按钮。如果我一直在 WinForms 中工作，这对我来说是显而易见的，但由于某种原因，所有这些 Xaml 都让我变得愚蠢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-14T09:36:47.527

[在http://msdn.microsoft.com/en-us/library/ms753296.aspx](http://msdn.microsoft.com/en-us/library/ms753296.aspx)查看 Expander 示例 ControlTemplate

Expander 是 HeaderedContentControl 的子类，它有两个“内容”：Header 和 Content

控件模板有两个 ContentPresenter 元素，未绑定默认内容属性的 ContentPresenter 定义为：

<ContentPresenter ContentSource="Header" />

如果您需要使用 Button 并且不想为第二个内容添加另一个属性，则可以使用附加属性并将第二个 ContentPresnter Content 属性绑定到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-23T17:54:58.517

[我在这里](https://stackoverflow.com/questions/1029955/wpf-template-or-usercontrol-with-2-or-more-contentpresenters-to-present-conte)创建了具有多个“内容槽”的 UserControl - 它比从 HeaderedControl 派生更好，因为您不受槽数量的限制。

示例用法：

```
<Window x:Class="TkMVVMContainersSample.Services.TaskEditDialog.ItemEditView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Common="clr-namespace:TkMVVMContainersSample.Views.Common"
    Title="ItemEditView"
    >
    <Common:DialogControl>
        <Common:DialogControl.Heading>
            <!-- Heading string goes here -->
        </Common:DialogControl.Heading>
        <Common:DialogControl.Control>
            <!-- Concrete dialog's content goes here -->
        </Common:DialogControl.Control>
        <Common:DialogControl.Buttons>
            <!-- Concrete dialog's buttons go here -->
        </Common:DialogControl.Buttons>
    </Common:DialogControl>

</Window> 
```

# c# - C# 和 WPF：程序控制

> ID：364007
> 
> 赞同：3
> 
> 时间：2008-12-12T20:17:31.717
> 
> 标签：c#, wpf, controls

我正在学习 WPF，似乎发现了一些奇怪的东西，我无法找到我搜索过的任何地方的原因。

我有一个窗口，上面有一个名为“chkTest”的复选框。我将其默认设置为 true。

以下代码是我不明白的。基本上我试图将“chkTest”控件设置为我动态创建的控件。消息框显示我在代码中设置的值，但是窗口上的控件仍然设置为true。

有人可以解释这背后的过程吗？

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        CheckBox chk = new CheckBox();
        chk.IsChecked = false;

        this.chkTest = chk;

        MessageBox.Show(chk.IsChecked.Value.ToString());
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T05:18:03.513

这是解决问题的一种方法。首先，你给你的主网格起一个名字——比如说，LayoutRoot：

```
<Grid x:Name="LayoutRoot">
    <CheckBox x:Name="chkTest" IsChecked="True"></CheckBox>
</Grid> 
```

然后，你说：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        CheckBox chk = new CheckBox();
        chk.IsChecked = false;

        LayoutRoot.Children.Remove(chkTest);
        LayoutRoot.Children.Add(chk);
    }
} 
```

你完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-12T20:23:59.300

这是因为您这样做是在欺骗 DependencyProperty 系统 - 请记住，DP 属性的 getter/setter 与常规属性的工作方式不同。UI 在 IsChecked 属性上有一个触发器，但您替换了整个对象。由于您实际上并未更改可见复选框上的 IsChecked，因此触发器不会触发并且 UI 不会更新。

# c# - 模式中带有 \Uxxxxxxxx 字符的 C# 正则表达式

> ID：364009
> 
> 赞同：6
> 
> 时间：2008-12-12T20:18:26.053
> 
> 标签：c#, regex, unicode, astral-plane

```
Regex.IsMatch( "foo", "[\U00010000-\U0010FFFF]" ) 
```

抛出：System.ArgumentException：以相反的顺序解析“[-]” - [xy] 范围。

查看 \U00010000 和 \U0010FFF 的十六进制值，我得到：第一个字符为 0xd800 0xdc00，第二个字符为 0xdbff 0xdfff。

所以我想我真的有一个问题。为什么用 \U 形成的 Unicode 字符在字符串中分成两个字符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-12T20:24:24.073

他们是[代理对](http://en.wikipedia.org/wiki/UTF-16)。看看这些值——它们超过了 65535。一个字符只是一个 16 位的值。您将如何仅用 16 位表示 65536？

不幸的是，从文档中不清楚 .NET 中的正则表达式引擎如何（或是否）处理不在基本多语言平面中的字符。（正则表达式文档中的 \uxxxx 模式仅涵盖 0-65535，就像将 \uxxxx 作为 C# 转义序列一样。）

您真正的正则表达式是否更大，或者您实际上只是想查看其中是否有任何非 BMP 字符？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T20:33:19.193

为了使用 .Net 正则表达式引擎解决此类问题，我使用了以下技巧： `"[\U010000-\U10FFFF]"`替换为`[\uD800-\uDBFF][\uDC00-\uDFFF]` 这背后的想法是，当 .Net 正则表达式处理代码单元而不是代码点时，我们将代理范围作为常规字符提供给它。也可以通过使用边缘来指定更窄的范围，例如：`[\U011DEF-\U013E07]`与`(?:\uD807[\uDDEF-\uDFFF])|(?:[\uD808-\uD80E][\uDC00-\uDFFF])|(?:\uD80F[\uDC00-uDE07])`

它更难阅读和操作，也不是那么灵活，但仍然适合作为解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T20:41:05.240

@乔恩斯基特

所以你告诉我的是，没有办法使用 .net 中的正则表达式工具来匹配 utf-16 范围之外的字符？

完整的正则表达式是：

```
^(\u0009|[\u0020-\u007E]|\u0085|[\u00A0-\uD7FF]|[\uE000-\uFFFD]|[\U00010000-\U0010FFFF])+$ 
```

我正在尝试检查字符串是否仅包含 yaml 文档定义为可打印 Unicode 字符的内容。

# javascript - 有没有办法在 JavaScript 中对正则表达式使用不贪婪的匹配？

> ID：364014
> 
> 赞同：24
> 
> 时间：2008-12-12T20:22:18.493
> 
> 标签：javascript, regex, bbcode, non-greedy

我想知道是否有办法在 JavaScript 中使用不贪婪的匹配？我尝试了 U 修改器，但它似乎不起作用。

我想用 JavaScript 编写一个小的 BBCode 解析器，但是如果没有不贪婪的匹配，就不可能（至少在我看来）做这样的事情：

```
'[b]one[/b] two [b]three[/b]'.replace( /\[b\](.*)\[\/b\]/, '<b>$1</b>' ); 
```

但是这样的替换会很好，因为那时不需要检查 HTML 的有效性。未封闭的标记将保持简单的文本。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-12-12T20:24:55.820

您可以使用`?`after`*`或`+`使其不贪婪，例如`(.*?)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-12T20:30:39.770

我迟到了，但无论如何我都会发布正则表达式。

```
'[b]one[/b] two [b]three[/b]'.replace( /\[b\](.+?)\[\/b\]/g, '<b>$1</b>' ); 
```

# python - MVC 和 django 基础知识

> ID：364015
> 
> 赞同：8
> 
> 时间：2008-12-12T20:22:29.290
> 
> 标签：python, django, django-models, django-templates

这个场景很新，并试图找到一些文档来采用最佳实践。我们正在构建一个相当大的内容站点，其中将包含各种媒体目录，我正在尝试找到一些可比较的数据/架构模型，以便我们可以更好地了解我们应该使用我们从未使用过的框架使用的方法以前用过。任何见解/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-12T20:37:36.183

“数据/架构模型，以便我们可以更好地了解我们应该使用以前从未使用过的框架使用的方法”

Django 将最佳实践强加给您。你没有很多选择，也不能犯很多错误。

MVC（虽然是一个崇高的愿望）实现如下：

*   使用 Django ORM 模型在“models.py”文件中定义数据。
*   urls.py 文件将 URL 映射到视图函数。明智地选择您的网址。
*   视图函数做所有处理，利用模型和模型中的方法
*   View 函数调用的演示文稿（通过 HTML 模板）。本质上不能在presentation中做任何处理，只是轻量级的迭代和决策

该模型是为您定义的。只要坚持 Django 自然做的事情，你就会很开心。

在架构上，你通常有一个这样的堆栈。

*   Apache 做了两件事。

    *   直接和立即提供静态内容
    *   将动态 URL 传递给 Django（通过 mod_python、mod_wsgi 或 mod_fastcgi）。Django 应用程序将 URL 映射到视图函数（访问数据库（通过 ORM/模型）并通过模板显示。
*   Django 视图函数使用的数据库。

该架构已为您明确定义。只要坚持 Django 自然做的事情，你就会很开心。

随意阅读[Django 文档](http://docs.djangoproject.com/en/dev/)。太棒了；也许是最好的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-12T21:12:11.327

首先，忘记所有 MVC 口头禅。拥有良好的分层结构很重要，但 MVC（如最初定义的那样）不是一个，它是一种**模块化**结构，其中每个**GUI**模块都拆分为这些树子模块。这里没有什么可以在网上使用的。

在 Web 开发中，分层结构确实很划算，其中最重要的层是存储/建模层，后来被称为*模型层*。最重要的是，您需要一些其他层，但它们实际上与 GUI 世界中的视图和控制器不同。

Django层大致是：

*   存储/建模：models.py，很明显。尝试将大部分“工作”概念放在那里。所有的关系，所有的操作都应该在这里实现。
*   调度：主要在 urls.py 中。在这里，您将 URL 方案转换为代码路径。把它想象成一个大的 switch() 语句。努力拥有可读的 URL，这些 URL 映射到用户意图。添加新功能或执行相同操作的新方法（例如稍后的 AJAX UI）将有很大帮助。
*   收集：主要是视图功能，包括您的和预建的通用视图。在这里，您只需从模型中收集所有信息以满足用户请求。在许多令人惊讶的情况下，它只需要选择一个模型实例，其他所有内容都可以从关系中检索。对于这些 URL，一个通用视图就足够了。
*   演示文稿：模板。如果视图为您提供了所需的数据，那么将其转换为网页就足够简单了。在这里，您会感谢模型类具有良好的访问器，可以从任何给定实例获取任何类型的相关数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-12T22:56:05.983

要了解 django 基础知识和 django 对 MVC 的看法，请参阅以下内容：http: [//www.djangobook.com/](http://www.djangobook.com/)

作为开始着手处理......“......试图找到一些可比较的数据/架构模型”

这是一种快速而肮脏的方法来对数据库进行逆向工程以获取 models.py 文件，然后您可以检查该文件以查看 django 将如何处理它。

1.) 获得与您的目标密切匹配的 er 图。例如像这样 [http://www.databaseanswers.org/data_models/product_catalogs/index.htm](http://www.databaseanswers.org/data_models/product_catalogs/index.htm)

2.) 从 er 图中创建一个 sql 脚本并创建数据库，我建议使用 Postgre，因为某些 MySQL 表类型不会有 forgien key 约束，但在紧要关头 MySQL 或 SQLITE 会做

3.) 创建并配置一个 django 应用程序以使用该数据库。然后运行：python manage.py inspectdb

这至少会为您提供一个 models.py 文件，您可以阅读该文件以了解 django 如何尝试对其进行建模。

请注意，inspect 命令旨在作为在 django 中开发时处理遗留数据库的快捷方式，因此并不完美。在尝试之前请务必阅读以下内容：http: [//docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin](http://docs.djangoproject.com/en/dev/ref/django-admin/#ref-django-admin)

# c++ - 在 sqlite3 中更快的批量插入？

> ID：364017
> 
> 赞同：55
> 
> 时间：2008-12-12T20:23:04.857
> 
> 标签：c++, sqlite, insert, bulk

我有一个包含大约 30000 行数据的文件，我想将它们加载到 sqlite3 数据库中。有没有比为每行数据生成插入语句更快的方法？

数据以空格分隔并直接映射到 sqlite3 表。是否有任何类型的批量插入方法可以将卷数据添加到数据库？

如果不是内置的，有没有人设计了一些非常棒的方法来做到这一点？

我应该先问一下，是否有 C++ 方法可以从 API 中做到这一点？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-12-12T20:54:50.207

*   将所有 INSERT 包装在一个事务中，即使只有一个用户，它也快得多。
*   使用准备好的语句。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2009-04-17T10:15:44.460

您想使用该`.import`命令。例如：

```
$ cat demotab.txt
44      92
35      94
43      94
195     49
66      28
135     93
135     91
67      84
135     94

$ echo "create table mytable (col1 int, col2 int);" | sqlite3 foo.sqlite
$ echo ".import demotab.txt mytable"  | sqlite3 foo.sqlite

$ sqlite3 foo.sqlite
-- Loading resources from /Users/ramanujan/.sqliterc
SQLite version 3.6.6.2
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> select * from mytable;
col1    col2
44      92
35      94
43      94
195     49
66      28
135     93
135     91
67      84
135     94 
```

请注意，此批量加载命令不是 SQL，而是 SQLite 的自定义功能。因此它有一个奇怪的语法，因为我们将它传递`echo`给交互式命令行解释器，`sqlite3`.

在 PostgreSQL 中相当于`COPY FROM`： [http ://www.postgresql.org/docs/8.1/static/sql-copy.html](http://www.postgresql.org/docs/8.1/static/sql-copy.html)

在 MySQL 中是`LOAD DATA LOCAL INFILE`： [http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

最后一件事：记住要小心`.separator`. 在进行批量插入时，这是一个非常常见的问题。

```
sqlite> .show .separator
     echo: off
  explain: off
  headers: on
     mode: list
nullvalue: ""
   output: stdout
separator: "\t"
    width: 
```

您应该在执行之前将分隔符明确设置为空格、制表符或逗号`.import`。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-12-12T21:11:12.670

您还可以尝试[调整一些参数](http://sqlite.org/pragma.html#modify)以从中获得额外的速度。具体来说，您可能想要`PRAGMA synchronous = OFF;`.

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2008-12-13T00:25:00.220

*   增加到`PRAGMA cache_size` 一个更大的数字。这将增加缓存在内存中的页数。注意：`cache_size`是每个连接的设置。

*   将所有插入包装到一个事务中，而不是每行一个事务。

*   使用已编译的 SQL 语句进行插入。
*   最后，如前所述，如果您愿意放弃完全的 ACID 合规性，请设置`PRAGMA synchronous = OFF;`.

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2019-10-24T18:43:38.417

我在这里测试了答案中提出的一些[编译指示：](https://sqlite.org/pragma.html)

*   `synchronous = OFF`
*   `journal_mode = WAL`
*   `journal_mode = OFF`
*   `locking_mode = EXCLUSIVE`
*   `synchronous = OFF`+ `locking_mode = EXCLUSIVE`+`journal_mode = OFF`

这是我在事务中插入不同数量的数字：

[![](https://i.stack.imgur.com/Q8SBP.png)](https://i.stack.imgur.com/Q8SBP.png)

增加批量大小可以给你带来真正的性能提升，而关闭日志、同步、获取独占锁只会带来微不足道的收益。大约 110k 的点显示了随机后台负载如何影响您的数据库性能。

此外，值得一提的是，这`journal_mode=WAL`是一个很好的替代默认值。它提供了一些收益，但不会降低可靠性。

[C#代码。](https://github.com/astef/benchmark-sqlite3-bulk-insert)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2010-06-17T08:18:05.767

> RE：“有没有更快的方法为每行数据生成插入语句？”

首先：通过使用 Sqlite3 的[虚拟表 API](http://www.sqlite.org/c3ref/create_module.html)将其减少到 2 个 SQL 语句，例如

```
create virtual table vtYourDataset using yourModule;
-- Bulk insert
insert into yourTargetTable (x, y, z)
select x, y, z from vtYourDataset; 
```

这里的想法是您实现一个 C 接口，该接口读取您的源数据集并将其作为虚拟表呈现给 SQlite，然后您一次性将 SQL 复制从源表复制到目标表。这听起来比实际上更难，我已经通过这种方式测量了巨大的速度改进。

第二：利用此处提供的其他建议，即编译指示设置和使用事务。

第三：也许看看你是否可以取消目标表上的一些索引。这样，sqlite 将为插入的每一行更新更少的索引

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-01-20T19:21:53.110

> 没有办法批量插入，但是有办法将大块写入内存，然后将它们提交到数据库。对于 C/C++ API，只需执行以下操作：
> 
> sqlite3_exec(db, "开始交易", NULL, NULL, NULL);
> 
> ...（插入语句）
> 
> sqlite3_exec(db, "提交事务", NULL, NULL, NULL);

假设 db 是您的数据库指针。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-09-08T09:53:46.943

一个很好的折衷办法是在 BEGIN 之间包装您的 INSERTS；和结束；关键字即：

```
BEGIN;
INSERT INTO table VALUES ();
INSERT INTO table VALUES ();
...
END; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-16T00:34:19.277

根据数据的大小和可用的 RAM 量，将 sqlite 设置为使用全内存数据库而不是写入磁盘将获得最佳性能提升之一。

对于内存数据库，将 NULL 作为文件名参数传递给`sqlite3_open`并 [确保正确定义了 TEMP_STORE](http://www.sqlite.org/pragma.html#pragma_temp_store)

（以上所有文字均摘自我自己对一个[单独的 sqlite 相关问题的回答](https://stackoverflow.com/questions/136175/fastest-small-datastore-on-windows#136714)）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-11-18T09:16:51.110

我发现这对于一次性长时间导入来说是一个很好的组合。

```
.echo ON

.read create_table_without_pk.sql

PRAGMA cache_size = 400000; PRAGMA synchronous = OFF; PRAGMA journal_mode = OFF; PRAGMA locking_mode = EXCLUSIVE; PRAGMA count_changes = OFF; PRAGMA temp_store = MEMORY; PRAGMA auto_vacuum = NONE;

.separator "\t" .import a_tab_seprated_table.txt mytable

BEGIN; .read add_indexes.sql COMMIT;

.exit 
```

来源：[http ://erictheturtle.blogspot.be/2009/05/fastest-bulk-import-into-sqlite.html](http://erictheturtle.blogspot.be/2009/05/fastest-bulk-import-into-sqlite.html)

一些附加信息：[http ://blog.quibb.org/2010/08/fast-bulk-inserts-into-sqlite/](http://blog.quibb.org/2010/08/fast-bulk-inserts-into-sqlite/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-12-28T15:03:17.413

如果你只是插入一次，我可能会对你有一个肮脏的把戏。

这个想法很简单，首先插入内存数据库，然后备份，最后恢复到原始数据库文件。

[我在我的博客上](http://notes.theorbis.net/2009/12/fast-batch-insert-to-sqlite-database.html)写了详细的步骤。:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-23T18:35:12.973

我用这种方法进行批量插入：

```
colnames = ['col1', 'col2', 'col3'] 
nrcols = len(colnames) 
qmarks = ",".join(["?" for i in range(nrcols)]) 
stmt = "INSERT INTO tablename VALUES(" + qmarks + ")" 
vals = [[val11, val12, val13], [val21, val22, val23], ..., [valn1, valn2, valn3]] 
conn.executemany(stmt, vals)

colnames must be in the order of the column names in the table 
vals is a list of db rows
each row must have the same length, and
contain the values in the correct order 
Note that we use executemany, not execute 
```

# svn - 如何将 Subversion 修订号包含到 Delphi 项目中

> ID：364019
> 
> 赞同：9
> 
> 时间：2008-12-12T20:23:20.533
> 
> 标签：svn, delphi

我想知道 Delphi 的源代码和 exe 版本的源代码的修订号。自动执行此操作的最佳方法是什么？

我想在“关于”屏幕和项目的版本信息中显示修订号。

我目前正在使用 Delphi IDE (2006/2007) 和 Tortoise SVN。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-12T20:28:52.270

TortoiseSVN 附带了一个名为 SubWCRev.exe 的程序，它会为您进行令牌替换。因此，在您的源代码的某处，您插入令牌，并将输入和输出文件名传递给 SubWCRev.exe，它会用各种 SVN 信息（例如修订号）替换令牌。请注意，这是一个可以与构建脚本一起使用的独立程序，您不需要将 TortoiseSVN 与它一起使用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-12T22:21:03.760

我同意关于*$Revision$*不是适合这项工作的工具的评论。使用工具从*svn* *info*的输出中提取修订号确实是正确的做法。

不过还有两点需要注意：

1.  **如果svn* *update*已经在带有签出源的目录上运行，*svn* *info*只会返回正确的信息。如果您使用自定义构建步骤，您可能也应该为它添加一个命令。*

****   *svn* *info*还为您提供有关存储库路径的信息。这是区分*主干*和其他地方的来源的唯一方法，例如*标签*。如果您希望关于框包含一个字符串以正确识别用于构建应用程序的源，请确保存储库路径也可用。*** 

 ****编辑：**

这是一个应该复制到项目顶级目录的命令脚本。它将更新存储库中的源，从*svn info*调用中获取 SVN 修订号，并将其与文件*src\SvnRev.inc*中的常量 SVN_REVISION 进行比较。如果文件丢失，它将创建它，如果版本不同，它将覆盖它。如果*svn*不可用，它会将修订号 0 写入文件。

生成的文件*src\SvnRev.inc*可以简单地包含在源文件中。可以创建一个类似的文件以包含在版本资源中。

```
@echo off

setlocal
rem determine project top level directory from command file name
set PRJDIR=%~dp0
cd %PRJDIR%

set SVNREVFILE=src\SvnRev.inc

rem execute "svn info", extract "Revision: 1234" line, and take SVN rev from there
svn update
for /F " usebackq tokens=1,2 delims=: " %%i in (`svn info`) do set key=%%i&set value=%%j&call :read-svn-rev
@echo SVN revision "%SVNREV%"

rem extract "const SVN_REVISION = 1234;" line, and take header SVN rev from there
for /F " usebackq tokens=2,4 " %%i in (%SVNREVFILE%) do set name=%%i&set value=%%j&call :read-file-rev
@echo Include file revision "%FILEREV%"

rem check for valid SVN rev
if "%SVNREV%" EQU "" goto :no-svn-ref
rem do not write file if SVN ref is equal
if "%FILEREV%" EQU "%SVNREV%" goto :EOF

@echo Writing svn revision %SVNREV% to %SVNREVFILE%
@echo const SVN_REVISION = %SVNREV% ; > %SVNREVFILE%
goto :EOF

:no-svn-ref
if not exist %SVNREVFILE% goto :no-header-file
rem do not write file if SVN ref is already unset
if "%FILEREV%" EQU "0" goto :EOF
@echo Writing svn revision 0 to %SVNREVFILE%
goto :write-no-version

:no-header-file
@echo Creating %SVNREVFILE% with svn revision 0
:write-no-version
@echo const SVN_REVISION = 0 ; > %SVNREVFILE%
goto :EOF

endlocal
goto :EOF

:read-svn-rev
if "%key%" EQU "Revision" set SVNREV=%value%&
goto :EOF

:read-file-rev
if "%name%" EQU "SVN_REVISION" set FILEREV=%value%&
goto :EOF 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-12T21:25:18.570

在您提到的评论中，您想要全局修订，而不是任何特定文件的修订。您不会在关键字中获得该数字，因为该数字与任何一个文件都不相关，而是与树中最近签入的任何文件相关。

您可以编写一个脚本或小程序运行`svn info`，然后解析输出以获取您所追求的修订号。您可以将该编号与*RC*文件模板结合使用，以在版本信息记录中插入修订号。不会签入此生成的文件。将脚本作为 MSBuild 过程的一部分运行。

对于 MSBuild 之前的 Delphi 版本，创建一个项目组，然后将脚本作为该组中的第一个项目。“全部构建”或“全部编译”将在编译主项目之前运行脚本。

您还可以在每个单元的`initialization`部分中有代码，将其修订版（如 Ieure 的回答所获得）添加到全局列表中。然后在运行时选择列表中最大的数字。这可以让您在“关于”框中显示数字，但您不能在程序的版本信息中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T20:27:10.527

建议：修改您的构建脚本以更改之后编译的一些版本文件。如果不知道您正在使用的构建环境，就很难提出更具体的建议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-12T20:29:53.720

如果您使用[svn:keywords](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)并包含`$Revision$`在您的文件中，则每次提交该文件时都会更新它。

因此，将其粘贴在`version`项目顶层的文件中，您可以在每次构建时更改/提交该文件，然后将其读入以获取版本。

# iis - 在 IIS 上运行多个虚拟目录 - 任何性能问题？

> ID：364030
> 
> 赞同：0
> 
> 时间：2008-12-12T20:25:00.780
> 
> 标签：iis, iis-6

我需要在 IIS 6.0 上运行我的应用程序的 8-10 个实例，它们都是相同的，但指向不同的后端（通过配置文件处理，每个虚拟目录都不同）。我想创建多个指向不同版本应用程序的虚拟目录，并且我想知道这是否有任何显着的性能损失。服务器（Windows Server 2003）是四核的，内存为 4 GB，应用程序的单次安装几乎不会触及 CPU 或内存，所以这似乎不是问题。这似乎不能证明另一台服务器是合理的，特别是因为一些实例将被非常轻地使用。显然，性能取决于服务器和应用程序，但是这种情况有什么顾虑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T20:36:01.057

Windows Server 2003 上的 IIS 是为处理大量站点而构建的，因此站点本身的数量不是问题。应用程序的资源需求更多是一个因素。即，它消耗了多少 i/o、cpu、线程、数据库资源？

我们这里有一个四核 Windows Server 2003 服务器，处理数百个站点没有问题。但是一个资源密集型应用程序可以吃掉整个服务器没有问题。

如果您发现您的应用程序受 cpu 限制，您可以将每个实例放入自己的应用程序池中，然后限制每个池可以使用的 cpu 数量，这样一个实例就不会成为其他实例的瓶颈。

我建议你一次添加一些，看看效果如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T20:34:56.690

不用担心。如果您遇到任何性能问题，那么 10 个大小的应用程序将不会与 IIS 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T20:35:36.860

您应该考虑使用多个应用程序池。如果你这样做了，服务器的cpu、内存、IO和网络资源都是有序的。那么就没有性能问题了。

可以在同一个应用程序池上运行它们。但是然后添加到列表中，线程池使用问题，因为所有应用程序都将使用一个线程池，如果它是 32 位服务器，那么 w3wp 进程有一个限制（大约 1.5 Gb）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T20:35:45.033

我们在 10 台服务器负载平衡的场中不断地为每台服务器运行 15-20 台服务器。我们没有遇到任何问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-12T20:38:46.480

简短的回答是否定的，不应该有任何担忧。

实际上，您是在询问 IIS 是否可以托管 8 到 10 个网站……当然可以。也许，您可能希望将其配置为单独的网站而不是虚拟目录，并且可能带有单独的应用程序池，以便每个实例完全独立。

您提到这些不是要求苛刻的应用程序；假设它们没有全部链接到同一个 Access 数据库，我看不出有任何问题。

# silverlight - Silverlight 浏览器支持似乎不是无处不在？

> ID：364035
> 
> 赞同：1
> 
> 时间：2008-12-12T20:26:00.717
> 
> 标签：silverlight, safari, browser

我们一直在将 Adob​​e Flex 用于一个大型项目，但它太慢了。

我们正在考虑切换到 Silverlight。

问题似乎在于 Silverlight 不像 Flex/Flash 那样受到浏览器的广泛支持。

例如，我尝试使用 Windows 版 Safari 访问 Silverlight 展示，但没有成功。

Web RIA 平台肯定必须以浏览器无处不在为基础吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T20:30:11.893

浏览器插件本质上是本机应用程序，因此每个架构本质上都需要一个插件。

例如，没有适用于 Windows 的 64 位 Flash 插件，所以我总是必须使用 32 位 IE。我也相信没有 Linux-PPC 支持，但我已经有一段时间没有看到它了。而且来自 Sun 的新 JavaFX 产品也不能在许多平台和浏览器上运行。

对于支持的平台列表，维基百科有一个简洁的表格：

[http://en.wikipedia.org/wiki/Silverlight#Compatibility](http://en.wikipedia.org/wiki/Silverlight#Compatibility)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-12T20:30:44.700

恕我直言 Flash 是唯一接近完美的东西。微软只支持一些主要的浏览器。

# c# - 如何使类受保护以进行继承？

> ID：364038
> 
> 赞同：6
> 
> 时间：2008-12-12T20:27:16.410
> 
> 标签：c#, .net, oop

我想用`final`关键字做我在Java中做的同样的事情。我尝试使用`const`关键字，但它不起作用。如何防止其他类从我的类继承？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-12T20:27:47.657

您正在搜索的关键字是“密封”。

[MSDN](http://msdn.microsoft.com/en-us/library/88c54tsw.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-12T20:29:30.290

VB.NET 的“不可继承”

[MSDN](http://msdn.microsoft.com/en-us/library/h278d2d4.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-13T21:19:17.110

一般来说，你应该用密封的关键字标记你的类型，以防你想防止派生。但是，在某些情况下它是不合适的。例如，您希望允许程序集中的类型从您的可公开访问的类型派生，但阻止第三方派生。

这里有一些技巧可以让你做到这一点：

*   [防止第三方衍生，第一部分](http://blogs.msdn.com/ericlippert/archive/2008/09/26/preventing-third-party-derivation-part-one.aspx)
*   [防止第三方衍生，第二部分](http://blogs.msdn.com/ericlippert/archive/2008/10/06/preventing-third-party-derivation-part-two.aspx)

# bea - BEA出版商困境

> ID：364041
> 
> 赞同：0
> 
> 时间：2008-12-12T20:28:19.900
> 
> 标签：bea, publisher

我正在使用 BEA 的 Publisher 产品和 ALUI。我想要一个简单的portlet，它只显示我已发布的内容项，但是在玩了几个小时之后，我发现自己卡住了。

我有一个数据输入模板，它只需要一个名称和一个文件，以及一个与之关联的演示模板。但我不知道如何使演示模板显示与数据输入模板关联的已发布内容项的列表。

我尝试使用 Tag Helper，发现文件属性可用，例如名称、位置、长度，但是我无法让模板实际显示信息。

另外，由于我不能发布所述演示模板（您不允许发布与数据输入模板关联的演示模板），我必须制作另一个演示模板，并包含第一个，然后制作一个新的 portlet显示第二个模板。这是它应该如何工作的吗？对于这样一个简单的任务，它似乎非常复杂。

我将非常感谢任何人可以提供的任何意见。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-15T20:28:44.777

万一其他人遇到这种情况：

[http://forums.oracle.com/forums/thread.jspa?messageID=3171395摃](http://forums.oracle.com/forums/thread.jspa?messageID=3171395&#3171395)

# silverlight - Silverlight 性能

> ID：364042
> 
> 赞同：7
> 
> 时间：2008-12-12T20:28:34.270
> 
> 标签：silverlight, performance

我们正在考虑从 Adob​​e Flex 切换到 Silverlight，因为 Flex 太慢了。

我感兴趣的不是图形性能，而是计算性能和它执行代码的速度。

有没有人分享他们在 Silverlight 性能方面的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-27T03:17:31.097

Unlike Flex, Silverlight is multi-threaded. Which if used properly gives you the ability to write highly performant apps. There are many articles and blog posts on this. Here's a sample...

[http://www.silverlighthack.com/post/2008/09/07/Silverlight-MultiThreading-with-a-Computational-Process-(Counting-Primes).aspx](http://www.silverlighthack.com/post/2008/09/07/Silverlight-MultiThreading-with-a-Computational-Process-(Counting-Primes).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T15:48:32.177

[托宾哈里斯公布了计算 1,000,000 个素数的测试结果。](http://www.tobinharris.com/2008/8/30/performance-of-silverlight-vs-flash-vs-javascript-vs-tracemonkey)Silverlight 是性能的明显胜利者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-19T16:31:20.290

为了补充 Caryden 的答案，微软正在开发一个多线程库，这使得编写多线程代码变得非常容易（将成为 .Net 4.0 的一部分）。这个库很可能会在未来的版本中加入 Silverlight 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-15T13:34:07.520

Not sure about how flex does work on the client side.

What I like frokm Silverlight is that a real OOP language (C#) and all is compiled, about computation power, Scott Guthrie published a link to a chess game (same algorithm / implementation approach but javascript vs. silverlight), interesting how SL behave.

In the app I have developed I haven't had any issue on performance (some samples are managing more than 70 tables and relations) working with LINQ to XML... jejej where I have found some samples is fighting against some buggy controls on SL (combo and datagrid).

HTH Braulio

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-17T05:29:12.363

我发现 Silverlight 可以很好地处理计算性能。我对一些图形性能感到失望。既然这不是你的问题，我建议用一些复杂的过程进行一些测试。我没有使用过 Flex，所以我没有自己的差异测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-28T15:30:06.727

1.  Silverlight 允许多线程，这非常适合处理大量数据（顺便说一下，使 UI 看起来更快/对用户响应更快）
2.  用 >Net 编写的 Silverlight 2 应用程序的运行速度应该与 .Net 应用程序一样快。在本地编译并在托管环境中“本机”运行，因此性能应该与我发现非常好的任何 .Net 应用程序相同，或者至少受程序员人才限制而不是工具集限制。
3.  我最担心的是你在客户端上运行，你几乎没有能力知道客户端到客户端的速度。SL 的最低要求非常低
4.  此外，大量处理通常意味着大量数据，因此您需要考虑使用独立存储（另一个简洁的 SL 功能）并压缩任何 WCF 调用（使用 IIS7 并打开动态压缩）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-19T01:18:51.770

阅读本网站以及与各种帖子相关的评论可能会对您有所帮助：

[http://www.shinedraw.com/flash-vs-silverlight-gallery/](http://www.shinedraw.com/flash-vs-silverlight-gallery/)

现实情况是，Silverlight 目前有一个劣质的光栅化器，存在一些问题（在上面链接的网站上概述）。但是，正如这里提到的，您确实可以获得其他可以帮助渲染过程的好处，例如多线程。最近我们遇到了很多输入文本的光栅化问题，导致我们的 Flash（为了这次谈话，Flex 是 Fl​​ash）演示文稿打嗝，目前在 Flash 中没有真正好的解决方案。

我还建议您主要让网络和系统程序员在这里发表意见，而不是计算机图形程序员。

# wpf - 什么 WPF 书详细介绍了 GetContainerForItemOverride 和相关内容？

> ID：364053
> 
> 赞同：3
> 
> 时间：2008-12-12T20:31:43.263
> 
> 标签：wpf, itemscontrol

什么 WPF 书详细介绍了 ItemsControl.GetContainerForItemOverride 及相关内容？此外，我想了解 TreeView 覆盖它的原因以及 IsItemItsOwnContainerOverride 与它的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T20:44:44.657

我不确定那里有什么书，但这里有一些关于 ItemsControls 如何工作的必读：

*   [WPF 博士 - 项目控制 A- Z](http://drwpf.com/blog/ItemsControlSeries/tabid/59/Default.aspx)
*   [Josh Smith - 树视图和 MVVM 模式](http://www.codeproject.com/KB/WPF/TreeViewWithViewModel.aspx)

我认为您需要意识到 Menus 和 TreeViews 是 ItemsControls，但 MenuItem 和 TreeViewITem 也是如此。从本质上讲，TreeView 项目不仅是父 TreeView 中的项目，而且本身也是 TreeView/ItemsControl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T17:21:20.740

这是一个与 TreeView 控件相关的使用此覆盖的真实示例：http: [//blogs.msdn.com/jpricket/archive/2008/08/05/wpf-a-stretching-treeview.aspx](http://blogs.msdn.com/jpricket/archive/2008/08/05/wpf-a-stretching-treeview.aspx)

我希望这有帮助。

# excel - 将Excel导入SS2000；现场错误；DTS

> ID：364054
> 
> 赞同：0
> 
> 时间：2008-12-12T20:31:54.013
> 
> 标签：excel, import, sql-server-2000, dts

我正在尝试使用 DTS 将 excel 文件导入 SQL Server 2000 数据库。这没什么花哨的，只是直接导入。在我工作的地方，我们每天这样做 1000 次。此过程通常可以正常工作，但文件中必须发生某些更改。

我收到以下错误：

[错误截图 http://www.understandingguitar.org/wp-content/uploads/2008/12/packageerror-screenshot-20081212.jpg](http://www.understandingguitar.org/wp-content/uploads/2008/12/packageerror-screenshot-20081212.jpg)

我已检查以确保“AssignmentID”列在 Excel 工作表中存储为“文本”。我也尝试将其更改为一般。无论设置如何，完全相同的错误。该字段确实包含数字......我感谢大家对此的帮助！

问候，
弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-12T20:56:50.763

尝试在 excel 文件中打开并查看列内容。
该列中的任何行值是否右对齐？（通常用于数字）？

我猜这样的一行可能是个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T22:38:56.503

这可能很明显，但是目标字符串是否足够长以容纳浮点数的字符串表示形式？我不确定 Excel 是否会四舍五入它向您显示的内容，因此可能值得尝试使用更宽的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-22T17:04:17.147

**答案**与程序需要文本这一事实有关，但即使您将属性（在格式对话框中）设置为“文本”，excel 也可能不会将数据作为文本处理。因此，SQL Server（或库）不会将其处理为文本。

当程序尝试导入它时，系统感觉它正在从数字转换为文本，并且它预计数据可能会丢失（即使不会丢失任何数据）并引发错误。

**如果发现我可以通过在每个列出的数字之前放置一个 '（撇号）来解决此错误。**[IE '124321] 这会强制 excel 将数字视为文本。

希望这可以避免其他人为此感到头疼。:-)

问候，
弗兰克

# unit-testing - 为什么这个单元测试在测试 DateTime 相等性时会失败？

> ID：364055
> 
> 赞同：8
> 
> 时间：2008-12-12T20:32:51.623
> 
> 标签：unit-testing, datetime, .net-3.5, nunit

在 .NET 3.5 上使用 NUnit 2.2，以下测试在使用 DateTime.Equals 时失败。为什么？

```
[TestFixture]
public class AttributeValueModelTest
{
    public class HasDate
    {
        public DateTime? DateValue
        {
            get
            {
                DateTime value;
                return DateTime.TryParse(ObjectValue.ToString(), out value) ? value : new DateTime?();
            }
        }

        public object ObjectValue { get; set; }
    }

    [Test]
    public void TwoDates()
    {
        DateTime actual = DateTime.Now;
        var date = new HasDate {ObjectValue = actual};
        Assert.IsTrue(date.DateValue.Value.Equals(actual));
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-12T20:43:57.623

日期不相等。TryParse 会掉一些滴答声。比较刻度值。

对于一次测试运行：

```
Console.WriteLine(date.DateValue.Value.Ticks);
Console.WriteLine(actual.Ticks); 
```

产量：

```
633646934930000000
633646934936763185 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-12T21:16:00.147

问题不是真正的 TryParse，而是实际上是 ToString()。

DateTime 对象以精确到百万分之一秒的精度（如果不是精确度）开始。ToString() 将其转换为字符串，精度仅为一秒。

TryParse 正在尽其所能提供给它的东西。

如果您添加格式说明符（沿 行`"yyyy-MM-dd HH:mm:ss.ffffff"`），它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T22:36:18.490

要指定包含所有精度的格式，可以使用 String.Format() 方法。James 给出的示例如下所示：

```
String.Format("{0:yyyy-MM-dd HH:mm:ss.ffffff}", ObjectValue); 
```

我不知道当你传递一些不是约会的东西时会发生什么。

也许更简单的方法是在您已经有了日期对象时添加一个特殊情况：

```
 public DateTime? DateValue
    {
        get
        {
            DateTime value = ObjectValue as DateTime;
            if (value != null) return value;
            return DateTime.TryParse(ObjectValue.ToString(), out value) ? value : new DateTime?();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T20:34:48.407

我不知道这在 .NET 中是否相同，但在 Java 中，equals 通常只会在实例相同的情况下进行比较，而不是在值相同的情况下进行比较。相反，您想使用 compareTo。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-12T20:37:49.350

```
 public DateTime? DateValue
        {
            get
            {
                DateTime value;
                bool isDate = DateTime.TryParse(ObjectValue.ToString(), out value); 
                return isDate ? new DateTime?(value) : new DateTime?();
            }
        } 

```

# php - 为什么我网站上的所有 html 表单都禁用了 Internet Explorer 自动完成功能？

> ID：364066
> 
> 赞同：1
> 
> 时间：2008-12-12T20:35:23.880
> 
> 标签：php, internet-explorer, ssl, caching, http-headers

当 Internet Explorers AutoComplete 为表单打开时，HTML 表单中每个字段的条目应被缓存并在用户第二次开始向表单中输入内容时显示为提示。

在我的网站上，该网站上存在的任何表单都不会显示自动完成功能。但是其他网站可以毫无问题地保留和交付该内容。

我的网站使用 PHP 作为脚本语言，所有内容都通过 SSL 传递。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-12T20:46:12.953

我已经确定问题与发出 start_session() 命令并且站点正在运行 SSL 时 PHP 发出的 Cache-Headers 有关。

我已经能够联系到微软 IE 安全团队的一个人，他们已经确认这就是 IE 的工作方式。这是电子邮件中的直接报价。

***“这被认为是自动完成系统的一项功能。编写了重要的代码以使其以这种方式运行。”***

当 session_start(); 发出 php 发出的默认 http 标头是无缓存标头。这是微软代表的另一句话。

***如果安全页面显示“不要缓存我”，则表明数据是敏感的，因此自动完成数据本身可能是敏感的。诚然，这是一个简单的启发式方法。就个人而言，我认为这有点愚蠢，但它一直存在。支持“autocomplete=on”来覆盖默认启发式方法可能是一个好建议。***

为了重新启用自动完成功能，我必须在start_session() 命令**之前在 php 中发出此命令：**

```
session_cache_limiter ('private, must-revalidate'); 
```

我确信还有其他方法可以操作标头缓存控件以允许 autoComplete 也能正常工作。

[这是我制作的 3 个示例表单的链接，以便您可以使用 IE 进行测试。](http://gavey.ca/autocomplete/index.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-12T21:21:36.283

dgavey - 您的表格是如何提交的？微软对这个微妙的问题并不太清楚，但是；

```
YOU HAVE TO SUBMIT YOUR FORMS WITH A SUBMIT BUTTON 
```

为此工作！

当然，除非您像每个喜欢设计自己的表单的网站一样非常感谢您，因此***您需要这个 hack 来使 IE 正常运行***。

[http://webbugtrack.blogspot.com/2007/08/bug-137-ie-autocomplete-hardly-ever.html](http://webbugtrack.blogspot.com/2007/08/bug-137-ie-autocomplete-hardly-ever.html)

这指向了[KB 文章](http://support.microsoft.com/kb/329156/en-us)，MS 解释了这种非常奇怪的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T20:38:09.820

您`autocomplete="off"`的表单元素中有属性吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T20:43:34.130

使用 SSL 时，IE 中不使用自动完成功能（在您的标签中提到，但在您的问题中没有）。

# silverlight - 有人用过 Silverlight 数据网格吗？

> ID：364068
> 
> 赞同：1
> 
> 时间：2008-12-12T20:35:44.113
> 
> 标签：silverlight, datagrid

我们正在考虑围绕 Silverlight 数据网格构建一个大型项目。

如果有人对他们使用 Silverlight 数据网格进行开发的角色体验有任何故事、评论或意见，那么我很想听听他们的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T20:59:14.940

Jon Galloway 是关于 Silverlight 的重要资源。

[http://weblogs.asp.net/jgalloway/](http://weblogs.asp.net/jgalloway/)

# excel - 我可以在 excel 07 中将结构化引用设为绝对引用吗？

> ID：364073
> 
> 赞同：6
> 
> 时间：2008-12-12T20:37:23.017
> 
> 标签：excel, excel-2007, excel-formula

我有一个表“A”，有 2 列“Foo”和“Bar”。我有一个带有结构化参考 A[Foo] 的公式。当我水平填充这个公式时，我希望引用保持 A[Foo]，但现在，在第二列中，引用变为 A[Bar]。有没有办法让这个结构化的引用成为绝对的？

如果不支持，这将是令人震惊的。

示例公式：

=A[Foo]

如果表格有多个列，水平拖动它并且 Foo 改变

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T22:14:05.553

您可以通过复制对列的引用来使引用成为绝对引用，就好像它是一个范围一样。如下所示：

A[[Foo]:[Foo]]

将 A[[Foo]:[Foo]] 放入您的公式中并拖动。引用将保留在 [Foo] 列中。请注意，您必须拖动公式。复制/粘贴不起作用。

如果您想对同一个表的同一行中的单元格进行绝对引用，这也适用。假设公式在名为“A”的表中，以下将单元格锚定在公式的同一行中。

A[@[Foo]:[Foo]]

我的网站上有一篇关于这个问题的文章和视频，我试图清楚地解释它。:)

[http://www.excelcampus.com/tips/absolute-formula-references-excel-structured-table/](http://www.excelcampus.com/tips/absolute-formula-references-excel-structured-table/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-12T20:59:05.750

复制和拖动是有区别的。拖动也称为“填充”公式。在[Microsoft 的支持网站上](https://support.office.com/en-us/article/Using-structured-references-with-Excel-tables-a547e45e-3589-4417-b611-abb7e5d3f912)，您会找到以下说明：

> **移动、复制和填充结构化引用**
> 
> 当您复制或移动使用结构化引用的公式时，所有结构化引用保持不变。
> 
> 当您填写公式时，完全限定的结构化引用可以调整列说明符，如下表中总结的系列。

所以它基本上意味着你看到的行为是设计使然。如果您希望引用是绝对的，您应该复制公式而不是拖动/“填充”它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-24T11:19:52.723

我也无法让`Control`+的`drag`想法奏效。但是，通过选择原始单元格和要填充的单元格并使用`Control`+ `R`，向右填充，快捷方式似乎确实在复制而不更改跨列的结构化引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-28T00:20:52.863

看来您不能将结构化引用 (.ie - A[Foo]) 设为绝对。如果你想在你的公式中使用绝对引用，那么你可以使用填充句柄，使用旧的绝对引用方法（$A$2 或 $A2）

例子：

表名：DiscountPricing

```
 A       B           C                                   D
1   Item    Base Price  5%                                  10%

2   Pencil  $0.50       =[Base Price]-([Base Price]*        =[5%]-([5%]*
                        DiscountPricing[[#Headers],[5%]])   *DiscountPricing[[#Headers],[10%]])

3   Pen     $1          =$B3-($B3*                        =$B3-($B3*
                        *DiscountPricing[[#Headers],[5%]])  *DiscountPricing[[#Headers],[10%]]) 
```

有关更多信息，请参阅： [http ://www.technicalcommunicationcenter.com/2011/05/31/how-to-use-structured-references-in-ms-excel/](http://www.technicalcommunicationcenter.com/2011/05/31/how-to-use-structured-references-in-ms-excel/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-20T20:13:29.810

尝试使用 INDIRECT 函数插入表名，例如；

```
INDIRECT("Table Name[Column Heading]") 
```

在你的情况下，`INDIRECT("A[Foo]")`

现在您可以水平拖动它并且列引用保持静态！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-12T20:43:02.303

似乎如果在复制公式时按住 Ctrl 键，它将保持静态/绝对。

[http://office.microsoft.com/en-us/excel/HA101556861033.aspx](http://office.microsoft.com/en-us/excel/HA101556861033.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-27T09:37:57.323

听起来你还在拖动/填充，瞄准单元格的底部，而不是角落。罗斯

# wpf - 水平方向的WPF TreeView？

> ID：364083
> 
> 赞同：3
> 
> 时间：2008-12-12T20:40:15.710
> 
> 标签：wpf, treeview

改变 WPF 树视图方向的最糟糕的方法是什么。我想使用展开折叠功能从左到右而不是从上到下工作。即，当我单击树节点的展开按钮时，我会使其子节点出现在父节点的右侧，并且缩进应该自上而下地工作。此外，连接节点的垂直线现在必须是水平的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-12T20:47:59.410

这是[Josh Smith 在 CodeProject 上](http://www.codeproject.com/KB/WPF/CustomTreeViewLayout.aspx)的一篇很棒的文章，详细介绍了如何做这种事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-17T15:02:37.993

要扩展[John Smith 的 CodeProject 文章](http://www.codeproject.com/KB/WPF/CustomTreeViewLayout.aspx)，如果您只想在树中的特定级别上进行水平布局（而不是像他的文章显示的那样在所有级别上），那么只需在您想要的级别`ItemsPanel`上设置属性.`TreeViewItem``StackPanel`

一开始对我来说并不直观，但是你可以通过你想要水平的图层上方的图层的`ItemContainerStyle`属性来获得这个属性。`HierarchicalDataTemplate`

像这样：

```
<ItemsPanelTemplate
    x:Key="ItemsPanelForHorizontalItems">
    <StackPanel
        Orientation="Horizontal"/>
</ItemsPanelTemplate>

<HierarchicalDataTemplate
    x:Key="DataTemplateForLayerAboveHorizontalItems"
    DataType="{x:Type viewModel:ThingHavingHorizontalItems}"
    ItemsSource="{Binding HorizontalItems}"
    ItemTemplate="{StaticResource DataTemplateForLayerWithHorizontalItems}">
    <HierarchicalDataTemplate.ItemContainerStyle>
        <Style
            TargetType="TreeViewItem">
            <Setter
                Property="ItemsPanel"
                Value="{StaticResource ItemsPanelForHorizontalItems}"/>
        </Style>
    </HierarchicalDataTemplate.ItemContainerStyle>
    <ContentControl
        Content="{Binding}"
        ContentTemplate="{StaticResource DataTemplateForThingHavingHorizontalItems}"/>
</HierarchicalDataTemplate> 
```

按照此模式，您可以为树中的任何单个层设置水平布局，根层除外。如果您希望根层是水平的，那么只需将 上的`ItemsPanel`属性设置`TreeView`为使用水平`StackPanel`。

# eclipse - 将 Emacs 键盘配置导入 Eclipse？

> ID：364089
> 
> 赞同：6
> 
> 时间：2008-12-12T20:43:20.417
> 
> 标签：eclipse, configuration, emacs, keyboard-shortcuts

在 Eclipse 中，在菜单中，我可以转到 Window -> Preferences -> Keys 并将 Scheme 设置为“Emacs”。我还可以单击对话框右下角的“导出”以导出包含我的键盘映射列表的 .CSV 文件。

如何将此配置重新导入到不同的 Eclipse 安装中？File -> Import 选项似乎既不支持 .CSV 文件，也不支持特定的键盘配置文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T01:02:35.723

您可以尝试导出和导入所有偏好

**导出** 文件->导出...->常规->首选项

**导入** 文件->导入...->常规->首选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T21:32:15.920

应该工作的是导出所有首选项，然后将它们导入另一个安装。但我不知道单独为键盘首选项做到这一点。

我同意这是有道理的。我建议你打开一个针对 Eclipse 的错误报告。也许它确实是一个缺失的功能（或者解决方案太简单了，我们没有看到它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T18:26:14.757

关键配置与每个工作区相关。您可以在工作区目录中找到配置文件：

```
工作区
  /.元数据
    /.plugins
```

我还没有弄清楚这些文件中的哪个对应于您的键盘配置。在您的主文件夹中还有一个用户配置文件夹（在 GNU/Linux 系统中为 ~/.eclipse）。您可能会在这些目录的某处找到正确的文件。

# c - 使用 GetEffectiveRightsFromAcl() 拒绝访问..？

> ID：364096
> 
> 赞同：4
> 
> 时间：2008-12-12T20:48:10.237
> 
> 标签：c, winapi

我正在尝试检查特定受托人对特定文件的权限，并且正在使用 win32 API GetEffectiveRightsFromAcl()。当文件可由域组访问时，当使用本地帐户（管理员或其他）执行该函数时，该函数返回 5（拒绝访问）。

这三个语句总结了我在 GetEffectiveRightsFromAcl() 中看到的行为：

*   当域组对该文件具有权限并且程序在本地帐户下运行时：拒绝访问。
*   当域组对文件具有权限并且程序在域帐户或本地系统下运行时：成功
*   当域组对该文件没有权限并且程序在任何帐户下运行时：成功

有谁知道这背后的原因？在我看来，这与 Active Directory 安全性有关。哪些设置可能会影响这一点，以及什么是调试它的好方法？

另外，我听说 GetEffectiveRightsFromAcl() 通常可能会出现问题，因此请改用 AccessCheck()。但是我需要能够获取任意 SID 并检查它对文件的访问，并且由于 AccessCheck() 需要一个模拟令牌，我不知道如何从任意 SID 中获取一个令牌......有什么想法吗？谢谢

鲍勃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-27T08:25:21.907

我在 C# 中使用过，它对我来说效果很好。

```
using System;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Security.AccessControl;

namespace DACL
{
    class Class1
    {
        private enum MULTIPLE_TRUSTEE_OPERATION
        {
            NO_MULTIPLE_TRUSTEE,
            TRUSTEE_IS_IMPERSONATE
        }

        private enum TRUSTEE_FORM
        {
            TRUSTEE_IS_SID,
            TRUSTEE_IS_NAME,
            TRUSTEE_BAD_FORM,
            TRUSTEE_IS_OBJECTS_AND_SID,
            TRUSTEE_IS_OBJECTS_AND_NAME
        }

        private enum TRUSTEE_TYPE
        {
            TRUSTEE_IS_UNKNOWN,
            TRUSTEE_IS_USER,
            TRUSTEE_IS_GROUP,
            TRUSTEE_IS_DOMAIN,
            TRUSTEE_IS_ALIAS,
            TRUSTEE_IS_WELL_KNOWN_GROUP,
            TRUSTEE_IS_DELETED,
            TRUSTEE_IS_INVALID,
            TRUSTEE_IS_COMPUTER
        }

        private struct TRUSTEE
        {
            public IntPtr pMultipleTrustee;
            public MULTIPLE_TRUSTEE_OPERATION MultipleTrusteeOperation;
            public TRUSTEE_FORM TrusteeForm;
            public TRUSTEE_TYPE TrusteeType;
            public IntPtr ptstrName;
        }

        [DllImport("advapi32.dll", SetLastError = true)]
        private static extern void BuildTrusteeWithSid(
            ref TRUSTEE pTrustee,
            byte[] sid
        );

        [DllImport("advapi32.dll")]
        private static extern uint GetEffectiveRightsFromAcl(byte[] pacl, ref TRUSTEE pTrustee, ref uint pAccessRights);

        public bool HasAccess(SecurityIdentifier sid)
        {
            DiscretionaryAcl dacl = <DACL from somewhere>;

            byte[] daclBuffer = new byte[dacl.BinaryLength];
            dacl.GetBinaryForm(daclBuffer, 0);

            byte[] sidBuffer = new byte[sid.BinaryLength];
            sid.GetBinaryForm(sidBuffer, 0);

            TRUSTEE t = new TRUSTEE();
            BuildTrusteeWithSid(ref t, sidBuffer);

            uint access = 0;
            uint hr = GetEffectiveRightsFromAcl(daclBuffer, ref t, ref access);

            int i = Marshal.Release(t.ptstrName);

            return ((access & <Desired Access>) == <Desired Access>) ? true : false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-12T22:12:52.653

*   如果域组有权访问该文件，则此函数必须访问活动目录以枚举受托者的组成员身份（至少如果它是域用户）。如果您的程序在本地帐户下运行，则该帐户无权访问活动目录，因此返回错误代码。
*   域帐户和本地系统可以访问活动目录。本地系统是活动目录中的计算机帐户（计算机就像 AD 中的用户）。
*   如果没有域组有权访问该文件，则该函数不必检查活动目录。所以本地用户也成功了。

# vb.net - 在不安装 Oracle 软件的情况下从 VB 2008 应用程序连接到 Oracle DB？

> ID：364101
> 
> 赞同：3
> 
> 时间：2008-12-12T20:50:27.047
> 
> 标签：vb.net, oracle, .net-3.5, connection

```
Imports System.Data.OleDb

Public Class Log

    Private mConnectionString As String = "Provider=OraOLEDB.Oracle;Data Source=(DESCRIPTION=(CID=GTU_APP)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=xxx)(PORT=1521)))(CONNECT_DATA=(SID=xxx)(SERVER=DEDICATED)));User Id=xxx;Password=xxx;"
    Dim ds As New DataSet
    Dim da As New OleDbDataAdapter
    Dim dr As DataRow
    Dim Connection As New OleDbConnection(mConnectionString)
    Dim Command As OleDbCommand
    goes on... 
```

这就是代码，它在我们的开发机器上运行良好。我们的机器上都安装了 Oracle 提供程序。现在我尝试在另一台没有安装 Oracle 软件的机器上的应用程序中使用此代码，但它不起作用。

现在我知道我可以在这些其他机器上安装 Oracle 提供程序并且它会工作。问题是 A）他们很多，B）我必须通过我们的 IT 部门，他们需要六个月的时间才能完成。所以我的问题是，我可以从没有安装 Oracle 提供程序的机器连接到这个 Oracle 数据库吗？我以为微软有自己的 Oracle 提供商，但它没有出现在 System.Data 下。如果有帮助，.NET 版本是 3.5。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-12T21:07:01.600

我对[Oracle Instant Client](http://www.oracle.com/technology/tech/oci/instantclient/index.html)和[ODP.NET](http://www.oracle.com/technology/tech/windows/odpnet/index.html)的运气相当好，这几乎是直接的 XCOPY 部署（如果您不需要 ODBC）。

IIRC，您确实需要修改 PATH 环境变量，但这相对容易——尤其是与 Oracle 用来让您跳过的箍相比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T21:04:04.760

问题实际上是您在没有与公司的 IT/DBA 团队讨论基础架构需求的情况下启动了一个项目。这不是技术问题，而是工艺问题。

这里所说的是一个可能的解决方案（尽管我没有亲自使用过）。 [http://devart.com/dotconnect/oracle/](http://devart.com/dotconnect/oracle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-12T20:58:48.980

我很确定您必须安装 Oracle 提供程序才能使其正常工作。OleDb 可以轻松连接到 SQL Server 和 Access 等，但这仅仅是因为这些提供程序预装在 Windows 中。

我认为您唯一的选择（除了在每台机器上安装 Oracle 提供程序）是创建一个 SQL Server“前端”数据库，其中包括您需要的每个 Oracle 表的传递表，然后从 SQL Server 而不是 Oracle 获取数据.

实际上，另一种选择是让您的客户端应用程序从中间 Web 服务获取数据，而不是直接连接到数据库，但这可能需要进行重大重写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T21:01:27.400

是否可以在您的应用程序中找到并包含 Oracle DLL 而不是安装它们？

# grep - 使用带有正则表达式的 grep 过滤掉匹配项

> ID：364105
> 
> 赞同：57
> 
> 时间：2008-12-12T20:53:05.623
> 
> 标签：grep

我正在尝试将 grep 与 -v 一起用于反转匹配以及 -e 用于正则表达式。我无法正确使用语法。

我正在尝试类似的东西

```
tail -f logFile | grep -ve "string one|string two" 
```

如果我这样做，它不会过滤如果我将其更改为

```
tail -f logFile | grep -ev "string one|string two" 
```

我明白了

```
grep: string one|string two: No such file or directory 
```

我曾尝试使用 () 或引号，但找不到任何有效的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2008-12-12T20:57:06.770

问题是，默认情况下，您需要转义 | 以获得正确的交替。也就是说，grep 将“foo|bar”解释为仅匹配文字字符串“foo|bar”，而模式“foo\|bar”（带有转义的 |）匹配“foo”或“bar”。

要更改此行为，请使用 -E 标志：

```
tail -f logFile | grep -vE 'string one|string two' 
```

或者，使用 egrep，它等效于 grep -E：

```
tail -f logFile | egrep -v 'string one|string two' 
```

此外， -e 是可选的，除非您的模式以文字连字符开头。grep 自动将第一个非选项参数作为模式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-12T20:57:47.453

使用 -e 时需要转义管道符号：

```
tail -f logFile | grep -ve "string one\|string two" 
```

编辑：或者，正如[@Adam](https://stackoverflow.com/questions/364105/using-grep-with-regular-expression-to-filter-out-matches#364113)指出的那样，您可以使用 -E 标志：

```
tail -f logFile | grep -vE "string one|string two" 
```

# oracle - 您对 Oracle 的结果缓存功能有何体验？

> ID：364107
> 
> 赞同：0
> 
> 时间：2008-12-12T20:54:18.850
> 
> 标签：oracle

我们最近更新到 Oracle 11g，我们的 DBA 建议使用结果缓存来提高我们某些查询的性能。对 Google 的快速搜索表明，对该功能及其扩展方式存在一些[批评](http://www.pythian.com/blogs/1004/oracle-11g-result-cache-in-the-real-world)。像任何缓存方案一样，在某些情况下它会赢得大量时间，而在其他情况下它会惨败。我们的使用模式（多次向数据库询问很少更改的相同信息）似乎非常适合结果缓存。

您对该功能有正面或负面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T22:03:28.243

我会非常警惕任何试图让数据库缓存所有查询结果的东西——这很可能会导致大量额外的工作来维护 90% 不会受益的查询的结果缓存。Oracle 的缓存失效算法非常基本，旨在确保永远不会返回过时的结果，因此对基础表的任何更改都会强制从该表派生的所有结果缓存失效。假设您的大多数查询正在访问确实以某种频率更改的表，那么这可能不值得开销。

您真的只想缓存运行成本高昂的结果（否则，缓存结果而不是像 Oracle 已经在做的那样将数据缓存在缓冲区缓存中的边际收益是最小的。缓存单行主键查找是可能永远不值得） - 在一段合理的时间内保持不变（确保其他人可以使用缓存） - 引用大部分是静态的表（确保您不必花费大量时间使缓存结果无效）你对桌子做 DML）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T21:53:53.347

我们的第一个（也是非常初步的）测试显示出相当大的希望。由于我们正在测试的查询中的缓存命中避免了全表扫描（约 350 万行），因此即使是几次命中也很容易使缓存变得有价值。

到目前为止，我们只进行了一次查询，这似乎相当安全。我想将数据库设置为缓存所有结果，但这可能风险更大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T18:39:04.337

在 RAC 环境中，我总是看到返回值在同一个实例上有效，但是当它与经常更新表数据的函数一起使用时，我们抱怨在另一个实例上调用该函数时该值过时而不是完成更新的实例。

# java - 我可以将 jars 添加到 Maven 2 构建类路径而不安装它们吗？

> ID：364114
> 
> 赞同：723
> 
> 时间：2008-12-12T20:57:31.247
> 
> 标签：java, maven-2

在开发的实验/快速而肮脏的模型阶段，Maven 2 让我发疯。

我有一个`pom.xml`文件，它定义了我想要使用的 web 应用程序框架的依赖项，我可以从该文件快速生成启动项目。但是，有时我想链接到尚未`pom.xml`定义文件的 3rd 方库，因此与其`pom.xml`手动为 3rd 方库创建文件并安装它，并将依赖项添加到 my`pom.xml`中，我只想告诉 Maven：“除了我定义的依赖项之外，还包括其中的任何 jars `/lib`。”

看起来这应该很简单，但如果是的话，我错过了一些东西。

非常感谢任何有关如何执行此操作的指示。除此之外，如果有一种简单的方法可以将 maven 指向一个`/lib`目录并轻松创建一个`pom.xml`所有封闭的 jar 映射到一个依赖项，然后我可以一举命名/安装并链接到它就足够了。

* * *

## 回答 #1

> 赞同：621
> 
> 时间：2011-10-02T00:15:09.230

# 流行方法的问题

您在 Internet 上找到的大多数答案都会建议您将依赖项安装到本地存储库或在 中指定“系统”范围，`pom`然后将依赖项与项目的源一起分发。但这两种解决方案实际上都有缺陷。

## 为什么不应该应用“安装到本地仓库”方法

当您将依赖项安装到本地存储库时，它仍然存在。只要您的分发工件有权访问此存储库，它就可以正常工作。问题是在大多数情况下，此存储库将驻留在您的本地计算机上，因此无法解决对任何其他计算机的这种依赖关系。显然，让您的工件依赖于特定的机器并不是处理事情的一种方式。否则，这个依赖项必须本地安装在使用该项目的每台机器上，这并没有更好。

## 为什么不应该应用“系统范围”方法

您使用“系统范围”方法所依赖的 jar 既不会安装到任何存储库，也不会附加到目标包。这就是为什么您的分发包在使用时无法解决该依赖关系的原因。我相信这就是为什么系统范围的使用甚至被弃用的原因。无论如何，您不想依赖已弃用的功能。

# 静态项目内存储库解决方案

将其放入您的`pom`：

```
<repository>
    <id>repo</id>
    <releases>
        <enabled>true</enabled>
        <checksumPolicy>ignore</checksumPolicy>
    </releases>
    <snapshots>
        <enabled>false</enabled>
    </snapshots>
    <url>file://${project.basedir}/repo</url>
</repository> 
```

对于具有表单 Maven 的组 id 的每个工件，`x.y.z`在其搜索工件时，将在您的项目目录中包含以下位置：

```
repo/
| - x/
|   | - y/
|   |   | - z/
|   |   |   | - ${artifactId}/
|   |   |   |   | - ${version}/
|   |   |   |   |   | - ${artifactId}-${version}.jar 
```

要详细说明这一点，您可以阅读[此博客文章](https://dub.podval.org/2010/01/28/maven-in-project-repository.html)。

## 使用 Maven 安装到项目 repo

我建议不要手动创建此结构，而是使用 Maven 插件将您的 jar 安装为工件。因此，要将工件安装到`repo`文件夹下的项目内存储库中，请执行：

```
mvn install:install-file -DlocalRepositoryPath=repo -DcreateChecksum=true -Dpackaging=jar -Dfile=[your-jar] -DgroupId=[...] -DartifactId=[...] -Dversion=[...] 
```

如果您选择这种方法，您将能够将存储库声明简化`pom`为：

```
<repository>
    <id>repo</id>
    <url>file://${project.basedir}/repo</url>
</repository> 
```

## 辅助脚本

由于为每个库执行安装命令有点烦人并且绝对容易出错，我创建了一个[实用程序脚本](https://github.com/nikita-volkov/install-to-project-repo)，它自动将`lib`文件夹中的所有 jar 安装到项目存储库，同时自动解析所有元数据（groupId、artifactId 等）文件的名称。该脚本还打印出依赖项 xml 供您复制粘贴到`pom`.

## 在目标包中包含依赖项

当您创建项目内存储库时，您将解决分发项目依赖项及其源的问题，但从那时起，您的项目的目标工件将依赖于未发布的 jar，所以当您安装它到一个存储库，它将具有无法解决的依赖关系。

为了解决这个问题，我建议将这些依赖项包含在您的目标包中。您可以使用[Assembly Plugin](https://stackoverflow.com/a/1729094/485115)或更好地使用[OneJar Plugin](http://code.google.com/p/onejar-maven-plugin/)来做到这一点。OneJar 上的官方文档很容易掌握。

* * *

## 回答 #2

> 赞同：499
> 
> 时间：2008-12-12T21:21:55.517

**仅用于丢弃代码**

设置范围 == 系统，只需组成一个 groupId、artifactId 和 version

```
<dependency>
    <groupId>org.swinglabs</groupId>
    <artifactId>swingx</artifactId>
    <version>0.9.2</version>
    <scope>system</scope>
    <systemPath>${project.basedir}/lib/swingx-0.9.3.jar</systemPath>
</dependency> 
```

注意：系统依赖项不会复制到生成的 jar/war 中
（请参阅[如何在使用 maven 构建的 war 中包含系统依赖项](https://stackoverflow.com/questions/19065666/how-to-include-system-dependencies-in-war-built-using-maven)）

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-10-05T13:01:08.997

您可以在项目上创建本地存储库

例如，如果您`libs`在项目结构中有文件夹

*   在`libs`文件夹中，您应该创建如下目录结构：`/groupId/artifactId/version/artifactId-version.jar`

*   在你的 pom.xml 你应该注册存储库

    ```
     <repository>
         <id>ProjectRepo</id>
         <name>ProjectRepo</name>
         <url>file://${project.basedir}/libs</url>
     </repository> 
    ```

*   并像往常一样添加依赖项

    ```
     <dependency>
         <groupId>groupId</groupId>
         <artifactId>artifactId</artifactId>
         <version>version</version>
     </dependency> 
    ```

就这些。

详细信息：[如何在 Maven 中添加外部库](https://web.archive.org/web/20130801071744/http://charlie.cu.cc/2012/06/how-add-external-libraries-maven/)（已归档）

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2009-01-08T21:58:29.543

注意：使用系统范围时（[如本页所述](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them#364188)），Maven 需要绝对路径。

如果您的 jars 位于项目的根目录下，您需要在 systemPath 值前面加上 ${basedir}。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2011-10-13T00:38:20.987

这就是我所做的，它也适用于包问题，它适用于签出的代码。

在我使用的情况下，我在项目中创建了一个新文件夹`repo`，但可以随意使用`src/repo`

在我的 POM 中，我有一个不在任何公共 maven 存储库中的依赖项

```
<dependency>
    <groupId>com.dovetail</groupId>
    <artifactId>zoslog4j</artifactId>
    <version>1.0.1</version>
    <scope>runtime</scope>
</dependency> 
```

然后我创建了以下目录`repo/com/dovetail/zoslog4j/1.0.1`并将 JAR 文件复制到该文件夹​​中。

我创建了以下 POM 文件来表示下载的文件（此步骤是可选的，但它删除了一个警告）并帮助下一个人弄清楚我从哪里得到文件。

```
<?xml version="1.0" encoding="UTF-8" ?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.dovetail</groupId>
    <artifactId>zoslog4j</artifactId>
    <packaging>jar</packaging>
    <version>1.0.1</version>
    <name>z/OS Log4J Appenders</name>
    <url>http://dovetail.com/downloads/misc/index.html</url>
    <description>Apache Log4j Appender for z/OS Logstreams, files, etc.</description>
</project> 
```

我创建的两个可选文件是 POM 的 SHA1 校验和以及用于删除缺少校验和警告的 JAR。

```
shasum -b < repo/com/dovetail/zoslog4j/1.0.1/zoslog4j-1.0.1.jar \
          > repo/com/dovetail/zoslog4j/1.0.1/zoslog4j-1.0.1.jar.sha1

shasum -b < repo/com/dovetail/zoslog4j/1.0.1/zoslog4j-1.0.1.pom \
          > repo/com/dovetail/zoslog4j/1.0.1/zoslog4j-1.0.1.pom.sha1 
```

最后，我将以下片段添加到我的 pom.xml 中，它允许我引用本地存储库

```
<repositories>
    <repository>
        <id>project</id>
        <url>file:///${basedir}/repo</url>
    </repository>
</repositories> 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2011-02-10T14:38:58.693

这就是我们添加或安装本地 jar 的方式

```
 <dependency>
        <groupId>org.example</groupId>
        <artifactId>iamajar</artifactId>
        <version>1.0</version>
        <scope>system</scope>
        <systemPath>${project.basedir}/lib/iamajar.jar</systemPath>
    </dependency> 
```

我给了一些默认的 groupId 和 artifactId 因为它们是强制性的:)

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2009-04-19T02:16:45.123

您确实应该通过存储库来建立一个框架并预先确定您的依赖项。使用系统范围是人们常犯的错误，因为他们“不关心依赖管理”。问题是这样做你最终会得到一个变态的 Maven 构建，在正常情况下不会显示 Maven。你最好遵循这样的[方法](http://www.sonatype.com/people/2009/04/how-to-convert-from-ant-to-maven-in-5-minutes/)。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2009-01-08T22:23:07.123

[Maven 安装插件](http://maven.apache.org/plugins/maven-install-plugin/usage.html)具有命令行用法来将 jar 安装到本地存储库中，POM 是可选的，但您必须指定 GroupId、ArtifactId、Version 和 Packaging（所有 POM 内容）。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-05-10T01:47:15.063

`<scope>system</scope>`由于其他人解释的原因，使用是一个糟糕的主意，手动将文件安装到本地存储库会使构建无法重现，并且使用`<url>file://${project.basedir}/repo</url>`也不是一个好主意，因为（1）可能不是格式正确的`file`URL（例如，如果项目被检出在一个有异常字符的目录中），（2）如果这个项目的 POM 被用作其他人项目的依赖项，结果是不可用的。

假设您不愿意将工件上传到公共存储库，Simeon 建议使用辅助模块就可以了。但是现在有一种更简单的方法……</p>

## 建议书

使用[非 maven-jar-maven-plugin](https://github.com/stephenc/non-maven-jar-maven-plugin)。完全符合您的要求，没有其他方法的缺点。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2013-06-03T19:53:35.697

我找到了另一种方法来做到这一点，从[Heroku 帖子中看到这里](https://devcenter.heroku.com/articles/local-maven-dependencies#deploy-the-artifact-into-the-repo)

总结（抱歉有些复制和粘贴）

*   在根文件夹下创建一个`repo`目录：

```
你的项目
+- pom.xml
+- 源代码
+- 回购

```

*   运行此命令将 jar 安装到本地 repo 目录

```
mvn deploy:deploy-file -Durl=file:///path/to/yourproject/repo/ -Dfile=mylib-1.0.jar -DgroupId=com.example -DartifactId=mylib -Dpackaging=jar -Dversion=1.0

```

*   将此添加到您的`pom.xml`：

> ```
> <repositories>
>     <!--other repositories if any-->
>     <repository>
>         <id>project.local</id>
>         <name>project</name>
>         <url>file:${project.basedir}/repo</url>
>     </repository>
> </repositories>
> 
> <dependency>
>     <groupId>com.example</groupId>
>     <artifactId>mylib</artifactId>
>     <version>1.0</version>  
> </dependency> 
> ```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2016-02-04T19:51:58.833

对我来说似乎最简单的就是配置您的 maven-compiler-plugin 以包含您的自定义 jar。此示例将加载 lib 目录中的任何 jar 文件。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <includes>
                    <include>lib/*.jar</include>
                </includes>
            </configuration>
        </plugin> 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2013-01-17T10:46:35.233

在与 CloudBees 人员就此类 JAR 的正确 maven 打包进行了很长时间的讨论后，他们提出了一个有趣的好解决方案建议：

创建一个伪造的 Maven 项目，该项目附加一个预先存在的 JAR 作为主要工件，运行到所属的 POM install:install-file 执行。以下是此类 POM 的一个示例：

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-install-plugin</artifactId>
            <version>2.3.1</version>
            <executions>
                <execution>
                    <id>image-util-id</id>
                    <phase>install</phase>
                    <goals>
                        <goal>install-file</goal>
                    </goals>
                    <configuration>
                        <file>${basedir}/file-you-want-to-include.jar</file>
                        <groupId>${project.groupId}</groupId>
                        <artifactId>${project.artifactId}</artifactId>
                        <version>${project.version}</version>
                        <packaging>jar</packaging>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

但是为了实施它，应该改变现有的项目结构。首先，您应该记住，对于每种此类 JAR，都应该创建不同的假 Maven 项目（模块）。并且应该创建一个父 Maven 项目，包括所有子模块：所有 JAR 包装器和现有的主项目。结构可以是：

> *根项目（这包含父 POM 文件，包括所有带有模块*XML 元素的子模块）（POM 打包）
> 
> JAR 1 wrapper Maven 子项目（POM 打包）
> 
> JAR 2 wrapper Maven 子项目（POM 打包）
> 
> 主要现有 Maven 子项目（WAR、JAR、EAR ....打包）

当通过 mvn:install 或 mvn:packaging 运行父级时，将执行子模块。这可能是一个减号，因为项目结构应该改变，但最后提供了一个非静态的解决方案

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2011-07-06T07:08:43.507

问题`systemPath`在于依赖项的 jars 不会作为传递依赖项沿着您的工件分发。试试我在此处发布的内容：[最好将您的项目 jar 文件 Mavenize 或将它们放在 WEB-INF/lib 中？](https://stackoverflow.com/questions/6571022/is-it-best-to-mavenize-your-project-jar-files-or-put-them-in-web-inf-lib/6592613#6592613)

然后像往常一样声明依赖项。

请阅读页脚说明。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2011-04-21T08:17:09.217

如果您想要一个快速而肮脏的解决方案，您可以执行以下操作（尽管我不建议将其用于除测试项目之外的任何东西，maven 会长篇大论地抱怨这不合适）。

为您需要的每个 jar 文件添加一个依赖项，最好使用 perl 脚本或类似的东西，然后将其复制/粘贴到您的 pom 文件中。

```
#! /usr/bin/perl

foreach my $n (@ARGV) {

    $n=~s@.*/@@;

    print "<dependency>
    <groupId>local.dummy</groupId>
    <artifactId>$n</artifactId>
    <version>0.0.1</version>
    <scope>system</scope>
    <systemPath>\${project.basedir}/lib/$n</systemPath>
</dependency>
"; 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2010-09-17T10:29:48.097

我发现了一个奇怪的解决方案：

使用 Eclipse

*   创建简单的（非 Maven）java 项目
*   添加一个主类
*   将所有 jar 添加到类路径
*   导出 Runnable JAR（这很重要，因为这里没有其他方法可以做到）
*   选择将所需库提取到生成的 JAR 中
*   决定许可证问题
*   tadammm ...将生成的 jar 安装到您的 m2repo
*   将此单一依赖项添加到您的其他项目中。

干杯，巴林特

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-05-14T01:15:35.363

一个*快速而肮脏*的批处理解决方案（基于亚历克斯的回答）：

**libs.bat**

```
@ECHO OFF
FOR %%I IN (*.jar) DO (
echo ^<dependency^>
echo ^<groupId^>local.dummy^</groupId^>
echo ^<artifactId^>%%I^</artifactId^>
echo ^<version^>0.0.1^</version^>
echo ^<scope^>system^</scope^>
echo ^<systemPath^>${project.basedir}/lib/%%I^</systemPath^>
echo ^</dependency^>
) 
```

像这样执行它：`libs.bat > libs.txt`. 然后打开`libs.txt`并将其内容复制为依赖项。

就我而言，我只需要这些库来编译我的代码，而这个解决方案最适合这个目的。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2010-09-18T19:40:40.960

即使它不完全适合您的问题，我也会把它放在这里。我的要求是：

1.  在在线 maven 存储库中找不到的 jar 应该在 SVN 中。
2.  如果一个开发人员添加了另一个库，其他开发人员不应该为手动安装它们而烦恼。
3.  IDE（在我的例子中是 NetBeans）应该能够找到源代码和 javadocs 以提供自动完成和帮助。

让我们先谈谈（3）：只是将 jars 放在一个文件夹中并以某种方式将它们合并到最终的 jar 中，在这里是行不通的，因为 IDE 无法理解这一点。这意味着必须正确安装所有库。但是，我不想让每个人都使用“mvn install-file”安装它。

在我的项目中，我需要 metawidget。开始了：

1.  创建一个新的 maven 项目（将其命名为“shared-libs”或类似名称）。
2.  下载 metawidget 并将 zip 解压到 src/main/lib 中。
3.  文件夹 doc/api 包含 javadocs。创建内容的 zip (doc/api/api.zip)。
4.  [像这样](http://pastebin.com/GscFtMUP)修改pom
5.  构建项目并安装库。
6.  将库作为依赖项添加到您的项目中，或者（如果您在 shared-libs 项目中添加了依赖项）添加 shared-libs 作为依赖项以一次获取所有库。

每次你有一个新的库时，只需添加一个新的执行并告诉每个人重新构建项目（你可以通过项目层次结构改进这个过程）。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-10-07T17:35:13.917

对于那些在这里没有找到好的答案的人，这就是我们正在做的事情，以获取一个包含所有必要依赖项的 jar。这个答案（[https://stackoverflow.com/a/7623805/1084306](https://stackoverflow.com/a/7623805/1084306)）提到使用 Maven Assembly 插件，但实际上并没有在答案中给出示例。如果你没有一直读到答案的结尾（它很长），你可能会错过它。将以下内容添加到您的 pom.xml 将生成`target/${PROJECT_NAME}-${VERSION}-jar-with-dependencies.jar`

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4.1</version>
            <configuration>
                <!-- get all project dependencies -->
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <!-- MainClass in mainfest make a executable jar -->
                <archive>
                  <manifest>
                    <mainClass>my.package.mainclass</mainClass>
                  </manifest>
                </archive>

            </configuration>
            <executions>
              <execution>
                <id>make-assembly</id>
                <!-- bind to the packaging phase -->
                <phase>package</phase> 
                <goals>
                    <goal>single</goal>
                </goals>
              </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-10-06T20:43:51.460

要安装不在 maven 存储库中的 3rd 方 jar，请使用 maven-install-plugin。

以下是步骤：

1.  从源（网站）手动下载 jar 文件
2.  创建一个文件夹并将您的jar文件放入其中
3.  运行以下命令在本地 maven 存储库中安装 3rd 方 jar

> mvn install:install-file -Dfile= -DgroupId= -DartifactId= -Dversion= -Dpackaging=

下面是我用于 simonsite log4j 的示例

> mvn install:install-file -Dfile=/Users/athanka/git/MyProject/repo/log4j-rolling-appender.jar -DgroupId=uk.org.simonsite -DartifactId=log4j-rolling-appender -Dversion=20150607-2059 - dpackaging=jar

4.  在 pom.xml 中包含如下依赖项

    > ```
    >  <dependency> 
    >         <groupId>uk.org.simonsite</groupId>
    >         <artifactId>log4j-rolling-appender</artifactId>
    >         <version>20150607-2059</version> 
    >   </dependency> 
    > ```

5.  运行 mvn clean install 命令来创建你的打包

下面是参考链接：

[https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html](https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-02-12T20:28:09.717

我在@alex lehmann's 的答案的评论中提到了一些 python 代码，所以我把它贴在这里。

```
def AddJars(jarList):
  s1 = ''
  for elem in jarList:
   s1+= """
     <dependency>
        <groupId>local.dummy</groupId>
        <artifactId>%s</artifactId>
        <version>0.0.1</version>
        <scope>system</scope>
        <systemPath>${project.basedir}/manual_jars/%s</systemPath>
     </dependency>\n"""%(elem, elem)
  return s1 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2012-03-02T12:52:49.117

在我们的项目中起作用的是 Archimedes Trajano 所写的，但我们在 .m2/settings.xml 中有这样的内容：

```
 <mirror>
  <id>nexus</id>
  <mirrorOf>*</mirrorOf>
  <url>http://url_to_our_repository</url>
 </mirror> 
```

并且 * 应更改为中央。所以如果他的回答对你不起作用，你应该检查你的 settings.xml

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-12-12T21:06:05.317

这并没有回答如何将它们添加到您的 POM 中，并且可能是没有道理的，但是只需将 lib 目录添加到您的类路径中就可以了吗？我知道当我需要一个不想添加到我的 Maven 存储库的外部 jar 时，我会这样做。

希望这可以帮助。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-01-02T14:55:06.753

Java中scope='system'方法的解决方案：

```
public static void main(String[] args) {
        String filepath = "/Users/Downloads/lib/";
        try (Stream<Path> walk = Files.walk(Paths.get(filepath))) {

        List<String> result = walk.filter(Files::isRegularFile)
                .map(x -> x.toString()).collect(Collectors.toList());

                String indentation = "    ";
                for (String s : result) {
                    System.out.println(indentation + indentation + "<dependency>");
                    System.out.println(indentation + indentation + indentation + "<groupId>"
                            + s.replace(filepath, "").replace(".jar", "")
                            + "</groupId>");
                    System.out.println(indentation + indentation + indentation + "<artifactId>"
                            + s.replace(filepath, "").replace(".jar", "")
                            + "</artifactId>");
                    System.out.println(indentation + indentation + indentation + "<version>"
                            + s.replace(filepath, "").replace(".jar", "")
                            + "</version>");
                    System.out.println(indentation + indentation + indentation + "<scope>system</scope>");
                    System.out.println(indentation + indentation + indentation + "<systemPath>" + s + "</systemPath>");
                    System.out.println(indentation + indentation + "</dependency>");
                }

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-10-26T15:29:58.523

我只是想要一个快速而肮脏的解决方法......我无法从 Nikita Volkov 运行脚本：语法错误 + 它需要 jar 名称的严格格式。

我制作了这个 Perl 脚本，它适用于 jar 文件名的任何格式，它在 xml 中生成依赖项，因此可以直接复制粘贴到 pom.xml 中。

如果您想使用它，请确保您了解脚本在做什么，您可能需要更改`lib`文件夹和`groupId`or的值`artifactId`...

```
#!/usr/bin/perl

use strict;
use warnings;

open(my $fh, '>', 'dependencies.xml') or die "Could not open file 'dependencies.xml' $!";
foreach my $file (glob("lib/*.jar")) {
    print "$file\n";
    my $groupId = "my.mess";
    my $artifactId = "";
    my $version = "0.1-SNAPSHOT";
    if ($file =~ /\/([^\/]*?)(-([0-9v\._]*))?\.jar$/) {
        $artifactId = $1;
        if (defined($3)) {
            $version = $3;
        }
        `mvn install:install-file -Dfile=$file -DgroupId=$groupId -DartifactId=$artifactId -Dversion=$version -Dpackaging=jar`;
        print $fh "<dependency>\n\t<groupId>$groupId</groupId>\n\t<artifactId>$artifactId</artifactId>\n\t<version>$version</version>\n</dependency>\n";
        print " => $groupId:$artifactId:$version\n";
    } else {
        print "##### BEUH...\n";
    }
}
close $fh; 
```

# c# - 类中的数据库常量

> ID：364141
> 
> 赞同：6
> 
> 时间：2008-12-12T21:06:27.563
> 
> 标签：c#

例如，如果我有一个电影表，其中包含一个 int FilmTypeId 字段和一个电影类型表，其 id 和有意义的描述如下：

*   1 - 恐怖
*   2 - 喜剧
*   ...

在 C# 类中使用该信息的最佳方式是什么？

目前我会将它们作为辅助类中的常量（不出所料的空气代码）：

```
public class FilmHelper
{
    public const int HorrorFilmType = 1;
    public const int ComedyFilmType = 2;
    ...
} 
```

但这似乎不那么可维护。但是我想避免每次我使用常量或每次使用帮助器或主实体时额外的数据库调用时调用数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-12T21:10:20.580

类型列表是固定的还是改变了？

如果已修复，我会将其封装在一个枚举中：

```
public enum FilmType {
   Horror = 1,
   Comedy = 2
} 
```

然后就投了。您可以使用属性（和几行定制代码）为每个枚举项存储额外的描述。

如果列表发生变化，我可能会在应用程序的早期读取它一次，并将列表缓存在某个地方的查找中（可能是静态的，可能在特定的缓存中）。然后从缓存的副本中进行查找。

您可以通过添加在两种表示之间变化的属性来进一步实现这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-12T21:35:33.493

您可以使用强类型而不需要强类型化值。

```
class FilmType : Dictionary<int, string> {} 
```

然后按照 Joel 的建议，在应用程序加载时加载值。

如果您更关心编译时的实际值，那么您不会比枚举做得更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-12T22:22:34.070

我的回答假设您想针对数据库中的这些值进行显式编码。

我过去所做的是构建一个脚本来创建我的常量文件。（我还有一个 SQL 脚本，它在使用文本输出运行时会输出 C# 代码，因此我可以将其粘贴到文件中并立即使用该常量。）

如果您这样做，您可以将其作为持续集成构建的一部分，并在构建完成后获取该文件的最新信息。

这里要注意的一件事是，当您从该表中删除行时，某些代码可能会变得无法访问/死掉，并且根据您实现脚本的方式，构建会中断（这是迫使您删除死行的好方法代码）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T21:11:23.730

我总是将我的代码查找存储在与此类似的枚举文件中

```
public enum ReportStatus
{
    [Description("Reports that are running")] Running,
    [Description("Reports that are pending to run")] Pending,
    [Description("Reports that have errored while running")] Error,
    [Description("Report completed successfully.")] Finished
} 
```

为了读取枚举的描述标签，我使用了一个与[Monsters Got My .NET](http://monstersgotmy.net/post/Enumerations-and-Strings-Stop-the-Madness!.aspx)中的示例类似的类。这使您可以灵活地将查找类型对象的 ID、代码和描述同时存储在枚举中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-12T21:17:32.000

当应用程序启动时，我实际上会从数据库中提取它，或者在使用数据的任何查询中加入表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-12T22:16:15.517

关于使用枚举...取决于枚举值代表什么（例如 IDENTITY 列），我可能会在我的表中添加一个 StaticIdentifier 列，并使该字段成为查找的枚举值（适当地修改我的存储过程以获取静态标识符字段而不是标识列）。身份列不可避免地会在 DEV、QA 和 PROD 之间混淆，我不需要这种麻烦。

# c++ - C++ 语法有助于处理递归定义（或者我的编译器告诉我）

> ID：364146
> 
> 赞同：3
> 
> 时间：2008-12-12T21:07:09.463
> 
> 标签：c++

我正在构建一个游戏，我正在编译，看看会出现什么样的错误，其中有一个非常常见并且让我非常困惑：

```
1>c:\users\owner\desktop\bosconian\code\bosconian\ship.h(9) : error C2460: 'Ship::Coordinate' : uses 'Ship', which is being defined 
```

这也适用于 SpaceObject 类及其所有其他派生类。Coordinate 类只是一个 2d 矢量类，如果重要的话，它只引用一个 Environment 类。

Environment 类引用了 SpaceObject，但我不认为这是一个问题（如果我错了，请纠正我）

这是我在 C++ 中的第一个更大规模的项目，我想知道这是否可能是一个常见的新手错误，并且有一个更明显的解决方案。如果重要的话，SpaceObject 类层次结构并不是一直填充的，而是在 SpaceObject 和 Ship 类之后的几个级别中填充。.
.
.
编辑：这是对评论的回应。

-当我说参考时，我的意思是在另一个类中引用该类。就像在 SpaceObject 类中一样，我引用了 Coordinate 类：
Coordinate * position

Environment 确实引用了 SpaceObject 指针，但我看不到我不能像那样引用类......我的意思是，我的所有类都必须以某种方式相互关联，对吧？

为了响应粘贴代码，这有点困难，因为它们是巨大的类，但这是错误指向的行：

```
public:
Ship(Coordinate * positionObject_, int direction_, int possibleDirections_, int maxHealth_, Component * objectSectors_, int numOfObjectSectors_, double speed_);//this is the line
void move();//handles the actual translation of calculated move on the map (i.e. bounds checking) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-12T21:13:39.403

你有这样的东西：

```
class Ship
{
    class Coordinate
    {
        Ship m_ship;
    };

    Coordinate m_coordinate;
}; 
```

问题是每个 Ship 对象都包含一个 Coordinate 作为成员，Coordinate 包含一个 Ship 作为成员，令人作呕。如果允许这种情况继续下去，一艘船的大小将变得无限大。您真正想要的是用指针或引用替换这些成员变量 - 指针/引用具有已知大小（例如 32 位 CPU 上的 4 个字节），并且可以在不知道有关被指向/引用的类型的任何信息的情况下声明到。

# theorem-proving - Kowalski 图定理证明

> ID：364148
> 
> 赞同：4
> 
> 时间：2008-12-12T21:07:58.340
> 
> 标签：theorem-proving

我正在尝试使用 Kowalski 图算法进行分辨率定理证明。[http://www.doc.ic.ac.uk/~rak/](http://www.doc.ic.ac.uk/~rak/)对算法的描述 没有说明如何处理它生成的大量重复子句。我想知道是否有一种众所周知的技术来处理它们？

特别是，您不能简单地抑制重复子句的生成，因为它们附带的链接是相关的。

在我看来，可能有必要跟踪迄今为止生成的所有子句的集合，并且当生成重复项时，将新链接添加到现有实例。即使在名义上删除子句时，这也可能需要维护，因为当它重新生成时。

重复可能需要根据文本表示来定义，而不是对象相等，因为不同子句的文字即使它们相同也是不同的对象。

谁能确认我在这里是否走在正确的轨道上？另外，我能找到的关于这个算法的唯一重要的在线参考是上面的链接，有没有人知道其他的，或者任何现有的实现它的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-12T21:56:27.103

这看起来非常合理。一些谷歌搜索没有提供任何明显的实现。我同意，您想查看表示之间的平等而不是身份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T14:53:22.930

事实证明，Kowalski 算法并没有我想象的那么有用。基本上，您需要保留您生成的所有内容，以免几乎所有的 CPU 时间都在一遍又一遍地生成相同的子句。保留所有内容意味着您想要发现重复项，这意味着您想要对所有内容进行哈希处理，这具有有用的副作用，即可以通过简单的指针比较来检查身份（因为每个表达式只有一个副本）。

# eclipse - 如何在 Eclipse 中为 .htaccess 文件着色

> ID：364152
> 
> 赞同：8
> 
> 时间：2008-12-12T21:09:47.587
> 
> 标签：eclipse, .htaccess, syntax-highlighting, colors

我花了一些时间在 Eclipse 中的多个项目中编辑 .htaccess 文件中的配置。我将如何告诉 Eclipse 以与 shell 脚本或 HTML 类似的方式自动为该文件着色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-10-20T00:17:55.560

我发现使用“属性文件编辑器”似乎可以提供不错的颜色输出。它实际上是用于 Java 文件的，因此它带有一个库存 Eclipse。

在首选项中，“常规”->“内容类型”->“文本”->“Java 属性文件”单击“添加...”按钮，输入“.htaccess”，单击“确定”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T22:34:09.007

您可以使用[**Gstaff**](http://www.gstaff.org/colorEditor/)的 ColorEditor 来定义您[**自己的语法着色**](http://www.codecommit.com/blog/eclipse/general-purpose-editor-within-eclipse)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-12T22:47:51.290

肯定会起作用的一件事是为 .htaccess 文件编写自己的插件。但是，如果您以前从未这样做过，则需要一些时间才能进入。不过，网上有很多教程。有关示例，请参见[此处。](http://www.eclipse.org/articles/Article-PDE-does-plugins/PDE-intro.html)

# excel - 如何通过在excel中使用结构化引用来获取表列的索引？

> ID：364159
> 
> 赞同：6
> 
> 时间：2008-12-12T21:11:32.933
> 
> 标签：excel, excel-2007, excel-formula

我有一个有 3 列的表。我想编写一个公式，给定结构化引用，返回列的索引。这将帮助我使用结构化参考编写 VLookup 公式。

因此，例如，对于带有 columns 的表，`MyTable`我`A`希望能够编写：`B``C`

```
=GetIndex(MyTable[C]) 
```

并让它返回 3。

现在我只是确保表格范围从工作表的第一列开始，然后我写

```
=Column(MyTable[C]) 
```

但我想要更强大的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-10-07T23:46:49.713

基于您的示例的合适公式是

```
=COLUMN(MyTable[C])-COLUMN(MyTable)+1 
```

论坛的第一部分`COLUMN(MyTable[C])`将返回引用列的列号。

*公式COLUMN(MyTable)*的第二部分将始终返回表格第一列的列号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-08-17T19:44:03.713

您提出的问题（或接近它的问题）的另一个解决方案是使用类似的东西`=MATCH("C",MyTable[#Headers],0)`，这将在您发布的示例中返回 3。

但是，如果您使用 INDEX 而不是 VLOOKUP，则不需要这样做。例如，如果您想在 A 等于 2 的行中找到 C 的值（假设不超过一个），您可以使用类似 的公式`=INDEX(MyTable[C],MATCH(2,MyTable[A],0))`，它可以很好地自我记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T22:05:16.977

你的意思是：

```
Dim r As Range
MyLetter ="AA"
Set r = Range(MyLetter & "1")
MyIndex= r.Column 
```

编辑重新评论

```
Function GetRelativeColumn(Letter, RangeName)
Dim r As Range
Dim ColStart, ColRequired, ColTemp
Set r = Range(RangeName)

ColStart = r.Column
ColRequired = Range(Letter & "1").Column
ColTemp = ColRequired - ColStart + 1
If ColTemp < 1 Or ColTemp > r.Columns.Count Then
    MsgBox "Ooutside range"
Else
    GetRelativeColumn = ColTemp
End If
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T21:54:32.677

您可以使用: ，您想要索引的列在哪里。`=COLUMN(MyTable[`*`]) - COLUMN(MyTable[A]) + 1``*`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-07T18:17:17.727

=对 eJames 的响应稍作修改： =COLUMN(MyTable[ * ]) - MIN(COLUMN(MyTable)) + 1，其中 * 是您想要索引的列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-17T19:24:00.217

你的最终目标是什么？您最好使用 SUMIF（如我[在此处](https://stackoverflow.com/questions/7098205/how-to-create-running-total-using-excel-table-structured-references/7098262#7098262)描述）或 INDEX（如我[在此处](https://stackoverflow.com/questions/1880168/excel-structured-reference-table-syntax/7098041)描述）来访问您的值，而不是跳回行/列...

# ruby-on-rails - Rails - 使用邮件模板为多部分电子邮件设置多个布局

> ID：364162
> 
> 赞同：2
> 
> 时间：2008-12-12T21:13:21.433
> 
> 标签：ruby-on-rails, ruby, actionmailer

所以 Rails 2.2 添加了邮件布局，这很好，除了我不知道如何在我发送多部分电子邮件时使它们工作..它用相同的布局包装我的邮件内容对于文本/纯文本版本和 text/html 版本。我想要的是仅将我的布局包装在 text/html 版本周围，或者能够为每个版本提供单独的布局。

有人遇到过这个吗？我在其他地方没看到有人提到，

卡梅伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T02:35:26.990

为了将来参考，上面在第二篇博客文章中修改的博客文章中的解决方案在下面给出了上述博客文章的所有功劳。[解决方案博文](http://blog.kreeti.com/rails/multipart-emails-with-mailer-templates)

将此代码添加到您的 environment.rb 文件中，以阻止邮件程序将布局应用于纯文本电子邮件。它还有一个检查可以阻止它与异常通知插件冲突。

```
# Do not use the mailer layout template for plain text emails
module ActionMailer
  class Base
    private    
    def candidate_for_layout?(options)
       (!options[:file] || !options[:file].respond_to?(:content_type) ||
          options[:file].content_type != 'text/plain') &&
          !@template.send(:_exempt_from_layout?, default_template_name)
    end
  end
end 
```

# scripting - Sybase 12.5 中表数据发生变化时如何调用脚本？

> ID：364167
> 
> 赞同：0
> 
> 时间：2008-12-12T21:16:06.293
> 
> 标签：scripting, triggers, sybase

操作系统是 UNIX。当表中的数据发生变化时，我想调用一个 shell 脚本来进行外部验证。有没有可能，如果有，怎么做。

非常感谢。

* * *

更新：理想情况下，我想为任何离散操作调用一次我的外部脚本：即

*   更新... > 调用脚本一次
*   插入... > 调用脚本一次
*   bcp into > 调用脚本一次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T23:18:04.910

我认为您可以从触发器中调用[xp_cmdshell 。](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sprocs/html/sprocs/sprocs244.htm)

* * *

编辑：如评论中所述，每个数据修改语句仅触发一次触发器。（请参阅[在线书籍](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.commands/html/commands/commands29.htm)。）因此，如果您有一个影响 100 行的更新语句，则触发器只会触发一次，而不是 100 次。这应该照顾你的前两点（更新，插入）。

触发器不会在 bcp 上触发。但是 bcp 应该从命令行发生，所以不知道为什么你不会在每个 bcp 命令之后添加你的 shell 脚本？

[这里](http://www.sybase.com/detail?id=20218)有一些关于从触发器调用 xp_cmdshell 的更多信息。

一些进一步的评论：你还没有真正描述你的环境或你想要完成的事情。如果您在 OLTP 环境中，则必须确保您的 shell 脚本在表同时发生多个更新时可以正常工作。如果 3 个用户同时进行更新，如果其中三个用户同时运行，您的脚本是否仍然有效？如果您将此作为某种 OLAP 或批处理系统的一部分，我不确定您为什么不将 shell 脚本添加到作业流程中。

# eclipse - 在 Eclipse 中显示一些不可见/空白字符

> ID：364168
> 
> 赞同：175
> 
> 时间：2008-12-12T21:16:25.263
> 
> 标签：eclipse, tabs, spaces, bbedit

很久以前，我从 BBEdit 过渡到在 Eclipse 中进行所有 Web 应用程序开发。但我错过了 BBEdit 的一个小功能。我曾经能够显示诸如制表符之类的不可见字符，但不能显示诸如空格之类的其他不可见字符。我知道我可以在 Eclipse 中批量打开所有这些，但我想知道是否有办法在 Eclipse 中只显示一些不可见的。

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2008-12-12T21:27:59.140

不幸的是，您只能同时打开所有不可见（空白）字符。我建议您提交增强请求，但我怀疑他们会接受它。

Eclipse 中的文本组件本身就非常复杂，他们并不热衷于让它们变得更糟。

**[更新]**这已在 Eclipse 3.7 中修复：转到 Window > Preferences > General > Editors > Text Editors

单击链接“空白字符”以微调应显示的内容。

感谢[约翰·艾萨克](https://stackoverflow.com/users/46011/john-isaacks)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-01-07T20:54:53.423

导航到窗口 > 首选项 > 常规 > 编辑器 > 文本编辑器

单击复选框“显示空白字符”。

![在此处输入图像描述](https://i.stack.imgur.com/CAt6Q.png)

就这样。！！！

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-06-10T10:06:16.410

我希望保留工具栏上的“显示空白”按钮，以便一键切换它。

转到 Window -> Perspective -> Customize Perspective 并启用以在工具栏上显示按钮。

[![在此处输入图像描述](https://i.stack.imgur.com/lhpHu.png)](https://i.stack.imgur.com/lhpHu.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-04-05T18:58:12.543

我为此目的使用 Checkstlye 插件。在 Checkstyle 配置中，我添加了特殊的正则表达式规则来检测带有 TAB 的行，然后将这些行标记为 checkstyle ERROR，这在 Eclipse 编辑器中清晰可见。工作正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-15T02:55:16.663

AnyEdit 一直向下滚动：[http ://andrei.gmxhome.de/anyedit/examples.html](http://andrei.gmxhome.de/anyedit/examples.html)

# objective-c - 使用垃圾收集时新创建的 Cocoa 应用程序中的内存泄漏？

> ID：364172
> 
> 赞同：2
> 
> 时间：2008-12-12T21:17:50.910
> 
> 标签：objective-c, cocoa, memory-leaks, garbage-collection

我决定将 GC 用于我最新的 Cocoa 项目的内存管理，我发现了一些有趣的东西——如果我在 Xcode 中创建一个全新的 Cocoa 应用程序项目，将 GC 设置为支持或必需（我都尝试过），构建并运行它泄漏，它显示内存泄漏！

主要是 NSCFData、GeneralBlock、CGEvent、CFDictionary、CGSRegion 等类型的对象的大量微小泄漏。

重现步骤：

1.  文件->新建项目->Cocoa应用
2.  项目->编辑项目设置->GC 必需（或支持，任一）
3.  构建->构建
4.  运行->使用性能工具运行->泄漏
5.  等待泄漏检测触发（我将其设置为 10 秒，默认为 30）

大约 80% 的时间我会泄漏大约 2-20 Kb 的上述各种对象。

其他人有同样的行为吗？

* * *

编辑：我通过重命名 InputManagers 文件夹测试了以下情况（此时日志消息消失了，所以它们肯定不再被加载）并且仍然出现内存泄漏。因此，这似乎与它无关。我把文字留在那里，所以阿什利克拉克的回答仍然有意义。

我知道的唯一奇怪的情况是，每当我运行启用了 GC 的应用程序时，我都会在控制台中收到以下消息：

```
2008-12-12 13:03:09.829 MemLeakTest[41819:813] Error loading /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor:  dlopen(/Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor, 265): no suitable image found.  Did find:
    /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor: GC capability mismatch
2008-12-12 13:03:09.840 MemLeakTest[41819:813] Error loading /Library/InputManagers/Saft/SaftLoader.bundle/Contents/MacOS/SaftLoader:  dlopen(/Library/InputManagers/Saft/SaftLoader.bundle/Contents/MacOS/SaftLoader, 265): no suitable image found.  Did find:
    /Library/InputManagers/Saft/SaftLoader.bundle/Contents/MacOS/SaftLoader: GC capability mismatch 
```

我猜这与这两个插件试图加载到每个启动的程序中有关，而不仅仅是 Safari（它们是它们的插件）。我不确定这是否与此有关，但这似乎绝对是一种可能性。我无法方便地使用带有开发工具的干净而不是 OS X 10.5 来测试在没有 SAFT 或 Inquisitor 的原始安装上是否会发生同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T08:21:08.073

该`leaks`工具在 Leopard 中的 Objective-C 垃圾收集下并不准确，因为它对垃圾收集器的运行时结构了解不足，无法实际确定哪些对象仍然存在但准备好被回收。

此外，您对结果的解释有点错误`leaks`：看起来像泄漏的东西不是*来自*NSCFData、CGEvent 等——那些*是*假定的泄漏对象。

如果您认为特定对象在 Objective-C 垃圾回收下的生存时间过长，那么您可以使用 GDB 中的`info gc-references`和命令。[Bill Bumgarner 在Cocoa-Dev](http://www.cocoabuilder.com/archive/message/cocoa/2007/11/4/192262)`info gc-roots`的这篇文章中讨论了它们以及 GC 下“泄漏”的一般概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T21:33:56.493

这些日志消息告诉您 Inquisitor.bundle 和 SaftLoader.bundle 不是为在 GC 程序下运行而构建的，因此不会被加载。虽然它们可能仅适用于 Safari，但它们是输入管理器，这意味着**每个**Cocoa 应用程序都会在启动时尝试加载它们，因此编写不当的输入管理器可能会导致很多问题。

我怀疑他们对您所看到的负责，但如果您想在没有他们的情况下进行测试，只需在运行测试之前重命名 InputManagers 文件夹，它们将被忽略。

你在哪里看到这些泄漏？

# java - 在实现树时使用 java.io.Serializable？

> ID：364178
> 
> 赞同：1
> 
> 时间：2008-12-12T21:19:46.863
> 
> 标签：java, serialization, tree

我还有另一个序列化问题，但这次是关于序列化为二进制时 Java 的本机序列化导入。我必须序列化在另一个 java 文件中生成的随机树。我知道序列化和反序列化是如何工作的，但是我在使用带有 java.io.Serializable 的二进制序列化时遵循的示例与使用简单对象时的方式不同。这是我的代码段：

```
import java.io.*;
import java.io.FileInputStream;

public class BinaryS 
    {

    public static void main(String[] args) {
        Tree randomTree = RandomTreeBuilder.randomTree(10);

        FileOutputStream fOut=null;
        ObjectOutputStream oOut=null;

        try{
            fOut= new FileOutputStream("/Users/Pat/programs/binaryfile.txt");
            oOut = new ObjectOutputStream(fOut);
            oOut.writeObject(randomTree); //serializing randomTree
            System.out.println("An employee is serialized into /Users/Pat/binaryfile.txt");
        }catch(IOException e){
            e.printStackTrace();
        }finally{
            try {
                oOut.flush();
                oOut.close();
                fOut.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
    }
}); 
```

我相信问题出在我使用 writeObject(randomTree) 时。发生这种情况时，我会遇到一些终端异常……它们如下：

java.io.NotSerializableException：GeneralTree 在 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1081) 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302) 在 BinaryS.main(BinaryS.java:24)

编辑：我知道它说的是 GeneralTree，但在课程开始时我把它放在了

```
print("public class RandomTreeBuilder implements java.io.Serializable"); 
```

然后，在它下面找到GeneralTree

```
print(" protected static Tree tree;
protected static ArrayList names;
//e6.1

/**
 *Builds a random tree.  The build method does the work.
 */
//b6.2
public static Tree randomTree(int n) {
    // Create a random binary tree with n external nodes
    tree = new GeneralTree();
    names = NameGenerator.getNames();
    build(tree.getRoot(), n);  // auxiliary recursive method
    return tree; 
```

");

更新：嘿，伙计们，我发现了自己的问题，结果我是个白痴，没有意识到我必须下载一个额外的 .java 文件，现在很容易解决！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-12T21:22:33.537

猜测一下，GeneralTree 没有实现[Serializable](http://java.sun.com/javase/6/docs/api/java/io/Serializable.html)标记接口，如此[处](http://java.sun.com/javase/6/docs/api/java/io/ObjectOutputStream.html#writeObject(java.lang.Object))所述。

实际上，也可能是您存储在树中的对象不可序列化。只有集合中的所有元素也是可序列化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T13:07:24.313

> 编辑：我知道它说的是 GeneralTree，但在课程开始时我把它放在了

```
print("public class RandomTreeBuilder implements java.io.Serializable"); 
```

这对你没有好处——你没有尝试将*RandomTreeBuilder*类型的对象写入对象流；您尝试编写的类型是*GeneralTree*，并且该类必须实现*Serializable*。

* * *

仅供参考：如果您还没有遇到过，本文介绍了序列化的许多技巧和注意事项：[发现 Java 序列化 API 的秘密](http://java.sun.com/developer/technicalArticles/Programming/serialization/)。

# delphi - 在 FreeAndNil 之后使用对象时应该发生什么？

> ID：364184
> 
> 赞同：8
> 
> 时间：2008-12-12T21:21:18.607
> 
> 标签：delphi

在我的 Delphi7 中，这段代码

```
var MStr: TMemoryStream;
...
FreeAndNil(MStr);
MStr.Size:=0; 
```

在模块“Project1.exe”中的地址 0041D6D1 处生成 AV：访问冲突。读取地址 00000000。但有人坚持认为它不应该引发任何异常，无论如何。他还说他的 Delphi 5 确实没有引发任何异常。他称之为“过时的指针错误”。换句话说，他说 FreeAndNil 不能用作调试器来检测释放对象或使用已释放对象的双重尝试。

有人可以启发我吗？这应该引发和错误（总是/随机）还是程序应该在没有问题的情况下运行这个错误？

谢谢

* * *

我问这个是因为我相信我的程序中有一个“双重自由对象”或“自由和重新访问”错误。释放对象后，如何用零填充分配给对象的内存？我希望通过获取和 AV 来检测错误在哪里。最初，我希望如果我将对象设置为 FreeAndNil，我在尝试重新访问它时总是会得到一个 AV。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-12T21:42:12.450

使用空引用的方法或属性总是错误的，即使它有时似乎有效。

`FreeAndNil`确实不能用于检测双重释放。调用`FreeAndNil`已经为零的变量是安全的。由于它是安全的，因此无法帮助您检测任何东西。

这不是一个过时的指针错误。这是一个空引用错误。一个过时的指针错误是当您释放一个对象但*没有*清除所有引用它的变量时。然后变量仍然保存对象的旧地址。这些很难被发现。你可以得到这样的错误：

```
MStr := TMemoryStream.Create;
MStr.Free;
MStr.Size := 0; 
```

你也可以得到一个这样的：

```
MStr := TMemoryStream.Create;
OtherStr := MStr;
FreeAndNil(MStr);
OtherStr.Size := 0; 
```

`MStr.Size`在释放引用的对象后使用`MStr`是错误的，它应该引发异常。它*是否*引发异常取决于实现。也许会，也许不会。不过，这不是随机的。

如果您正在寻找双重释放错误，您可以使用 FastMM 提供的调试助手，正如其他人所建议的那样。它的工作原理是不将内存实际释放回操作系统，甚至释放回 Delphi 的内部空闲内存池。相反，它将已知的坏数据写入对象的内存空间，因此当您看到这些值时，您会知道您正在读取您已经释放的内容。它还修改了对象的 VMT，以便下次您在该对象引用上调用虚拟方法时，您将得到一个可预测的异常，它甚至会告诉您您尝试使用哪个据称已释放的对象。当您再次尝试释放该对象时，它不仅可以告诉您您已经释放了它，还可以告诉您第一次释放的位置（带有堆栈跟踪）以及分配的位置。*少于*一次而不是更多。

您还可以使用一些习惯来避免未来代码的问题：

*   减少全局变量的使用。全局变量可以被整个程序中的任何代码修改，这迫使您在使用它时想知道，“这个变量的值是否仍然有效，或者其他代码是否已经释放了它？” 当您限制变量的范围时，您可以减少在查找变量不具有您期望的值的原因时必须在程序中考虑的代码量。
*   清楚谁拥有一个对象。当有两段代码可以访问同一个对象时，您需要知道哪些代码段*拥有*该对象。它们可能每个都有不同的变量来引用对象，但那里仍然只有一个对象。如果一段代码调用`FreeAndNil`它的变量，那仍然保持另一个代码的变量不变。如果其他代码认为它拥有该对象，那么您就有麻烦了。（所有者的这个概念不一定与`TComponent.Owner`属性相关联。不需要拥有它的*对象*；它可以是您程序的通用子系统。）
*   不要保留对您不拥有的对象的持久引用。如果您不保留对对象的长期引用，那么您不必担心这些引用是否仍然有效。唯一的持久引用应该在拥有该对象的代码中。需要使用该对象的任何其他代码都应接收引用作为输入参数，使用该对象，然后在返回其结果时丢弃该引用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-12T21:38:02.460

据我所见，此代码应始终导致错误。FreeAndNil 将传递的值显式设置为 Nil（又名 0），因此在尝试取消引用对象时绝对应该遇到访问冲突。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-12T22:15:36.377

只是为了使问题复杂化：

如果您调用的方法是静态（非虚拟）方法，并且它本身不调用任何虚拟方法，也不访问对象的任何字段，则即使对象引用已设置为 NIL，您也不会遇到访问冲突。

原因是访问冲突是由取消引用自指针（在本例中为 NIL）引起的，但这仅在访问字段或对象的 VMT 以调用虚拟方法时发生。

这只是您不能调用我想在这里提到的 NIL 对象引用的方法的规则的一个例外。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-12T21:48:11.830

如果您将指针设置为 nil，您将无法再使用它。但是如果你有另一个指向同一个对象的指针，你可以在不获取 AV 的情况下使用它，因为这个指针仍然指向对象地址而不是 nil。

此外，释放对象不会清除该对象使用的内存。它只是将其标记为未使用。这就是您想要获得 AV 的原因。如果释放的内存分配给另一个对象，您将获得一个 AV，因为它不再包含看似有效的数据。

FastMM4 有一些您可以在调试时使用的设置，这些设置将检测此类情况。从 FsatMM4Options.inc：

> {设置以下选项以对所有内存块进行广泛检查。所有块都填充有用于验证堆完整性的头部和尾部。被释放的块也会被清除，以确保它们被释放后不能被重复使用。此选项会显着减慢内存操作，并且仅应用于调试覆盖内存或重用已释放指针的应用程序。设置此选项会自动启用 CheckHeapForCorruption 并禁用 ASMVersion。非常重要：如果启用此选项，您的应用程序将需要 FastMM_FullDebugMode.dll 库。如果此库不可用，您将在启动时收到错误。}
> {$define FullDebugMode}

来自同一文件的另一个引用：

> FastMM 总是会捕获两次释放同一内存块的尝试...

由于 delphi 使用 Delphi 2007（2006 年？）的 FastMM，如果您尝试双重释放对象，您应该会收到错误消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-28T19:13:47.387

EurekaLog 博客在 2009 年 4 月对此发表了一篇很棒的文章：

[为什么你应该总是使用 FreeAndNil 而不是 Free。](http://blog.eurekalog.com/why-should-you-always-use-freeandnil-instead-of-free/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-30T21:00:26.510

*Thomas Mueller*: have you tried virtual class methods? A constructor is sort of a virtual method but you call it against the type - not the instance. This means that even some specific virtual methods will not cause AV on a null-reference :D

*Vegar*: You couldn't be more right! FastMM is the best ever ever ever tool that helped me tracking down this kind of bugs.

# visual-studio - 为 VS 加载项使用 connectMode 的正确方法

> ID：364185
> 
> 赞同：0
> 
> 时间：2008-12-12T21:21:33.023
> 
> 标签：visual-studio, add-in, vsx, extensibility

有人可以向我指出有关如何解释加载 VS 加载项时传递的 connectMode 参数的指南吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T17:01:55.700

我建议查看[Carlos Quintero](http://www.mztools.com/articles/2008/MZ2008004.aspx)讨论此问题的文章以及[有关 enumeration 的文档](http://msdn.microsoft.com/en-us/library/extensibility.ext_connectmode.aspx)。

# com - 如何在 WiX 3 中注册 Win32 COM DLL 文件？

> ID：364187
> 
> 赞同：37
> 
> 时间：2008-12-12T21:21:38.077
> 
> 标签：com, dll, wix, wix3

我找到了一个关于注册 DLL 的示例，*[使用 Windows Installer XML 工具集在 MSI 文件中注册 COM 互操作程序集。](http://blogs.msdn.com/robmen/archive/2004/04/28/122491.aspx)*，并且 WiX 抱怨“AssemblyRegisterComInterop”属性。

我删除了它并将“Assembly”属性更改为 win32，它说我需要指定 AssemblyManifest 属性，但我应该放什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-12-12T21:31:35.560

最简单的方法（Rob M 会大骂这是*错误*的）就是 `SelfRegCost=1`在 DLL 的 File 标记上使用。

这是错误的，因为我们应该显式控制 DLL 的注册，而不是允许它通过 DllRegisterServer 运行任意代码。理论上，当调用 DllRegisterServer 时，DLL 除了将适当的条目放入注册表之外什么都不做。不幸的是，他们中的许多人做得更多，因此自我注册可能是让您的安装工作的唯一方法。

这也是错误的，因为这意味着 Windows 安装系统对这些注册表项一无所知，也不知道应该存在什么和不应该存在什么。这意味着修复将不起作用，并且可能无法正确清理卸载等。

否则，您可以通过指向`heat.exe`您的 DLL 并将其输出集成到您当前的 WiX 项目中来生成适当的 WiX 代码。您将获得各种 Class、ProgID、TypeLib 和 Registry 标签。您可能需要手动编辑该输出以使其编译。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-12-13T00:18:44.693

不只是我会咆哮和狂欢 SelfReg 是多么邪恶。MSI SDK[列出了不使用 SelfReg 的*七个*理由](http://msdn.microsoft.com/en-us/library/aa371608.aspx)。

例子：

```
<Component Id="Component" Guid="*">
    <File Source="ComServer.dll">
        <Class Id="PUT-CLSID-HERE" Context="InprocServer32" ThreadingModel="apartment" Description="Your server description">
            <ProgId Id="Your.Server.1" Description="Your ProgId description">
                <ProgId Id="Your.Server" Description="Your ProgId description" />
            </ProgId>
        </Class>

        <Class Id="PUT-PROXY-CLSID-HERE" Context="InprocServer32" ThreadingModel="both" Description="Your server Proxies, assuming you have them">
            <Interface Id="PUT-INTERFACEID-HERE" Name="IInterface1" />
            <Interface Id="PUT-INTERFACEID-HERE" Name="IInterface2" />
            <Interface Id="PUT-INTERFACEID-HERE" Name="IInterface3" />
            <Interface Id="PUT-INTERFACEID-HERE" Name="IInterface4" />
        </Class>
    </File>
</Component> 
```

最终，特洛伊的答案是正确的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-02-27T23:36:04.137

您可以尝试使用 heat.exe 程序，然后在您的 wix 代码中引用该片段。

```
 heat.exe file <filename> -out <output wxs file> 
```

如：

```
 heat.exe file my.dll -out my.wxs 
```

# database-design - 在数据库中创建 Metatable 表

> ID：364189
> 
> 赞同：2
> 
> 时间：2008-12-12T21:21:58.780
> 
> 标签：database-design, entity-attribute-value

有人对在数据库中创建元表有什么建议吗？这些表将用于模拟数据库中的表，使用数据库。这是为了当您想要轻松地将结构（更多字段）动态添加到数据库中而不必担心所涉及的所有技术细节时。我唯一的例子是这样的：

表：MetaTables 字段：tableName、tableDescription

表：元字段字段：tableName、fieldName、fieldDesc、fieldDesc

表：元代码字段：tableName、fieldName、codeName、codeValue 等...

我以前从未真正使用过这样的东西，并且想知道是否有任何“陷阱”需要注意。

这样的事情是否可以合理维护，或者你会反对它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-12T21:32:46.540

您所说的是一种灵活的模式模型，通常称为开放模式模型或实体属性值模型。谷歌这些，你会得到很多参考资料和文章。

我还建议您不要回避添加列的设计。当设计中的波动程度并不那么重要时，我经常看到人们采取这样的方法。编写创建新数据容器（表、列等）的脚本并不难。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-12T21:58:57.487

我认为采用完全实现的关系数据库，忽略几乎所有功能，并在关系数据库之上构建自己的关系数据库的想法是等待发生的麻烦。

建立自己的模型听起来很“酷”。

当然，您必须建立自己的元级空间管理。那是颈部的中度疼痛。

查询执行、优化、索引处理等相对复杂。

然后，还有事务、锁定、死锁检测等。这真的很难纠正。但是，一旦你让它工作，它就会有一个巨大的“酷”因素。

此外，您还需要发明一个 API。ODBC 在低级别工作，而您希望在更高级别工作，因此您必须发明自己的“酷”版本的 ODBC。

“酷”因素最能胜过所有这些工作。您将花费数年时间才能使其正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-12T21:47:04.657

正如 keithwarren7 建议的那样，做一些谷歌搜索，你会看到（根据你的评论）这样做完全不酷。（好吧，在某些情况下是这样，但几乎总是不是，IMO。）

很酷，而且比您想象的要少得多的**是**，以它们预期的使用方式使用关系数据库，并具有经过深思熟虑的模式设计。您会发现这为您提供了更好的数据完整性、性能、使用更少的存储空间，并且通常比实体-属性-值模型更容易使用。您将阅读到一些明显的陷阱，例如，您将自己负责执行引用完整性，而不是数据库。

无论如何，在你继续之前仔细研究这个想法（超越stackoverflow），因为一旦你实现了这种方式，改变你的想法真的很重要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-12T22:56:50.803

大多数情况下，元表模式首先破坏了使用关系数据库的目的。除了基本的事务/ACID 属性外，关系数据库在向系统添加两大功能方面最有用：a) 与报告生成器等应用程序共享数据，b) 允许临时查询。

如果以上两种都不适用并且您仍然希望通用，则其他一些数据持久性解决方案可能会更好。您可以非常优雅地在 Berkley DB 之类的东西中推出自己的解决方案，或者尝试对通用模式进行变体：

[http://theprogrammersparadox.blogspot.com/2008/06/structuring-noun-verb-data.html](http://theprogrammersparadox.blogspot.com/2008/06/structuring-noun-verb-data.html)

保罗。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-15T13:07:23.857

我同意说 EAV 看起来很酷但并不酷的评论。它做了很多工作，结果证明是次要的或完全适得其反。

我使用自己的包含元数据的用户表的地方是为了比较两个不同的数据库以找出它们的分歧点。比较两个结构相同的模式之间的值很简单。检测模式之间的差异更加微妙，并且涉及比较元数据。

我的方法是将两个或多个数据库的元数据表中的数据复制到我的“元数据库”中用户定义的元数据表中，然后进行比较。大约一个小时后，我发现一个列在一个数据库中定义为实数，在另一个数据库中定义为整数。这几个月来一直对 DBA 隐藏。我还发现一个或另一个数据库中缺少几列。

今天，有一些工具可以为您进行这种比较。但是，如果您了解 DBMS 为您构建的系统表的架构，那么您自己的操作并不难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-12T22:27:20.380

如果您的老板想要*真正*酷，并且想要动态元数据，那么请忘记笨重的旧关系数据库 - 尝试[RDF](http://en.wikipedia.org/wiki/Resource_Description_Framework)和语义数据引擎！RDF 允许您以相同的方式存储和查询元数据和数据。数据库中的每个实体都是完全动态的和自我描述的。有关示例实现，请参见[Sesame 。](http://en.wikipedia.org/wiki/Sesame_(framework))

RDF 是 EAV 设计的逻辑扩展。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-12T21:58:34.260

您始终可以使用 XML 数据的单个字段，而不是使用表和字段来表达动态结构。许多主流 RDBMS 允许在 XML 中索引属性/元素，因此您的查询甚至可能是高性能的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-25T07:11:53.643

抱歉，正如其他海报所指出的那样，这确实是在重新发明轮子。

如果要使用这些数据，大多数数据库都有包含数据库模式的表。这可以用于反射的目的。

任何好的数据库手册都应该告诉您如何访问这些表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-25T07:53:35.917

对一个大型 eav 表中的大型数据集进行一些性能测试。如果你的老板看到表现缓慢，他/她不会使用“酷”这个词。

# finite-automata - 什么是有限状态自动机，程序员为什么要了解它们？

> ID：364193
> 
> 赞同：6
> 
> 时间：2008-12-12T21:24:56.073
> 
> 标签：finite-automata

呃 - 问题所说的。这是我一直听说的事情，但我还没来得及调查它。

* * *

（更新）我可以查找定义......但为什么不（正如@erikson 指出的那样）深入了解您的真实经历和轶事。Community Wiki'd incase 可以帮助人们投票选出最有见地的答案。到目前为止有趣的阅读，谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-12T21:44:29.047

简短的回答，这是一种可以用来表达具有具体状态的系统（与量子状态/概率分布相反）的技术。

引用[维基百科的文章](http://en.wikipedia.org/wiki/Finite_state_machine)：

> 有限状态机 (FSM) 或有限状态自动机（复数：自动机）或简称为状态机，是由有限数量的状态、这些状态之间的转换和动作组成的行为模型。有限状态机是具有原始内部存储器的机器的抽象模型。

那么，这对你意味着什么？简而言之，它是表示您关心的系统从起始状态到结束状态的路径的有效方法。使用正则表达式作为一个相当容易理解的示例，让我们看一下模式 AB+C（想象那个加号是一个上标）。我希望这种模式能够接受诸如“ABC”、“ABBC”、“ABBBC”等字符串。A 在开头，C 在结尾，中间有一些 B（大于或等于一个） .

如果您考虑一下，从图片的角度考虑这一点几乎更容易。用文本伪造它（我的括号是一个环回弧），您可以看到 A（在左侧）是起始状态，C（在右侧）是右侧的结束状态。

```
 _
     ( ) 
A --> B --> C 
```

从 FSA 出发，您可以前往[图灵机](http://en.wikipedia.org/wiki/Turing_machine)领域，继续您的计算复杂性之旅。

但是，您也可以使用状态机来表示真实的行为和系统。在我的世界里，我们使用它们来模拟实际人员的某些工作流程，这些工作流程非常不容忍状态顺序错误的组件。如，“A 最好在 C 之前发生，否则会出现非常严重的问题。现在不可能做到这一点。”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-12T21:46:53.020

You *could* look it up, but what the hell. Intuitively, a finite state automaton is an abstraction of something that has some finite number of states, and rules by which you can go from state to state. A *state* is something for which a true or false statement can be made, and a rule is a way that you change from one state to another. So, you could have, say, two states: "I'm at home" and "I'm at work" and two rules, "go to work" and "go home."

It turns out that you can look at machines like this mathematically, and find there are things they can and cannot do. Regular expressions are basically a way of describing a finite state machine in which the states are a set of different strings, and the rules move you from state to state based on the next character read. You can prove that. But you can also prove that no finite state machine can tell whether or not the parentheses in an expression are matched (via the [pumping lemma](http://en.wikipedia.org/wiki/Pumping_lemma) for FSAs.)

The reason you should *learn* about FSAs is that they can be used to solve many problems: string matching, control of systems, business process descriptions, digital circuit design. They're also inherently pretty.

*Formally*, an FSA is a algebraic structure *F = ⟨Σ, S, s[0], F, δ⟩* where *Σ* is the *input alphabet*, *S* is a set of *states*, *s[0] ∈ S* is a particular *start state*, *F ⊆ S* is a set of *accepting states*, and *δ:S×Σ → S* is the *state transition function*.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-12T21:58:01.297

in OOP terms: if you have an object with methods that you call on certain events, and some (other) methods that have different behaviour depending on the previous calls.... surprise! you have a state machine!

now, if you know the theory, you don't have to rethink it all. you simply say: "piece of cake, it's just a state machine" and go on to implement it.

if you don't know the theory you'll think about it for a while, write some clever hacks, and get something that's difficult to explain and document... because you don't have the words to describe it

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-12T21:44:37.330

Every programmer should know about them because they are an excellent tool for certain kinds of problems, where the usual 'iterative-thinking' approach would yield nasty, complex code.

A typical example is game AI, where NPCs have different states that change according to where the player is, something like:

*   NPC_STATE_IDLE
*   NPC_STATE_ALERT (player at less than 100 meters)
*   NPC_STATE_ENGAGE (player attacked NPC)
*   NPC_STATE_FLEE (low on health)

where a FSM can describe easily the transitions and help perform complex reasoning about the system the FSM is describing.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-12T21:52:37.453

You need state machines whenever you have to release your thread before you have completed your operation.

Since web services are often not statefull, you don't usually see this in web services--you re-arrange your URL so that each URL corresponds to a single path through the code.

I guess another way to think about it could be that every web server is a FSM where the state information is kept in the URL.

You often see it when processing input. You have to release your thread before the input has all been completed, so you set a flag saying "input in progress" or something like that. When done you set the flag to "awaiting input". That flag is your state monitor.

More often than not, a FSM is implemented as a switch statement that switches on a variable. Each case is a different state. At the end of the case, you may set the state to a new value. You've almost certainly seen this somewhere.

The nice thing about a FSM is that you can make the state a part of your data rather than your code. Imagine that you need to fill out 1000 items in the database. The incoming data will address one of the 1000 items, but you generally don't have enough data to complete the operation.

Without an FSM you might have hundreds of threads waiting around for the rest of the data so they can complete processing and write the results to the DB. With a FSM, you write the state to the DB, then exit your thread. Next time you can check the incoming data, read the state from the thread and that should give you enough info to determine what code to run.

Nearly every FSM operation COULD be done by dedicating a thread to it, but probably not as well (The complexity multiplies based on number of states, whereas with a state machine the rise in complexity is more linear). Also, there are some conceptual design issues--examining your code at the state level is in some cases much easier than examining it at the line of code level.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-12T22:01:14.317

Good answers above. I would only add that FSA are primarily a **thinking tool**, not a programming technique. What makes them useful is they have nice properties, and anything that acts like one has those properties. If you can think of something as an FSA, there are many ways you can build it:

*   as a regular expression

*   as a state-transition table

*   as a while-switch-on-state loop

*   as a goto-net (horrors!)

*   as simple structured program code

etc. etc.

If somebody says something is a FSA, you can immediately know what they are talking about, no matter how it is built.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-03T18:52:25.773

## Important: If you are a "visual" style learner, stop everything you are doing and go to this link ... Right Now.

If you are a "visual" learner, here is an excellent link that gives a very accessible introduction.

[Reanimator by Oliver Steele](http://osteele.com/archives/2006/02/reanimator)

It looks like you've already approved an answer, but if you appreciate "visual" introduction to new concepts, as is common, you really should check out the link. It is simply outstanding.

(Note: the link points to a discussion of DFA and NDFA in the context of regular expressions -- with animated interactive diagrams)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-12T21:28:50.357

是的！你可以查一下！

[http://en.wikipedia.org/wiki/Finite_state_machine](http://en.wikipedia.org/wiki/Finite_state_machine)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-12T21:49:15.480

What it is is better answered on other sites (such as Wikipedia), because there are pretty extensive answers out there already.

Why you should know them: Because you probably implemented them already.

Any time your code has a limited number of possible states (that's the "finite state" part) and switches to another one once some input/event happend (that's the "machine" part) you've written a finite state machine.

It is a very common tool and knowing the theoretical basics for that, being able to reason about it and knowing how to combine two FSMs into a single one that does the same work can be a great help.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-12T22:00:20.650

FSAs are great data structures to understand because any chance you have to implement them, you're working at the lowest level of computational complexity on the Chomsky hierarchy. A great example is in word morphology (how parts of words come together). A lot of work has been done to show that even the most severe cases can be analyzed in this extremely fast analytical framework. Take a look at Karttunnen and Beesley's work out of PARC.

FSAs are also a great place to start learning about machine learning concepts like hidden markov models, because in many ways, the problem can be broken down using the same ideas and vocabulary.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-12T22:02:02.520

One item that hasn't been mentioned so far is the [semantic equivalence](http://www.cse.ohio-state.edu/~gurari/theory-bk/theory-bk-twose3.html) of finite state automata and regular expressions. A regular expression can be compiled to a finite state automaton (this is how regex libraries work) and vice-versa.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-03T18:55:44.830

FSA (including DFA and NFA) are very important for computer science and they are use in many fields including many fields. For instance hidden markov fields for speech recognition also regular expressions are converted to the FSA's before they are interpreted by the software and NLP (Natural Language Processing), AI (game programming), Robot Programming etc.

One of the disadvantage of FSA's are they are usually slow and usually hard to implement and hard to understand or visualize while reading the code, but they are good because they usually provide generic solutions to the problems and they are well-known with a lot of studies on FSA's.

# outlook - 移动到 Outlook 2007 时的兑换共享文件夹问题

> ID：364194
> 
> 赞同：0
> 
> 时间：2008-12-12T21:25:07.930
> 
> 标签：outlook, vsto, office-2007, outlook-redemption, shared-directory

我们目前有一个适用于 Outlook 2003 的应用程序。为了获取共享联系人文件夹的所有者，我们只需调用：Redemption.RDOSessionClass.GetFolderFromID()，然后获取该文件夹并获取 RDOFolder.Store.Name 属性。

但是，在 Outlook 2007 中使用共享联系人文件夹尝试此操作时，RDOFolder.Store.Name 为空。

对于普通联系人和我添加到帐户中的“其他邮箱”中的联系人，一切仍然正常。

[http://blogs.msdn.com/mstehle/archive/2006/09/07/744798.aspx](http://blogs.msdn.com/mstehle/archive/2006/09/07/744798.aspx)中提到的方法似乎有效，但我宁愿不发布我们的应用程序的新版本，除非我必须这样做。

基本上我想了解为什么它的工作方式不同以及我可以做些什么（如果有的话）从服务器端解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-12T22:38:25.863

**编辑评论：见[http://msdn.microsoft.com/en-us/library/bb147715.aspx](http://msdn.microsoft.com/en-us/library/bb147715.aspx)**

一些想法...

您是否在您的配置文件中打开了“下载共享文件夹”（在 Outlook 2007 中默认启用）？我最初的猜测是共享的联系人文件夹内容被缓存在您的本地商店中，并且商店名称属性不再有效。

它实际上是返回 null 还是抛出异常？

你有 Outlook 间谍吗？侦查此类问题的宝贵工具，尤其是在使用 Redemption 时。

您是否已在[Outlook 编程讨论组](http://www.microsoft.com/communities/newsgroups/en-us/default.aspx?dg=microsoft.public.outlook.program_vba&cat=en_US_f2349ded-ffa8-474e-a28d-ef611f1d45b4&lang=en&cr=US)发帖？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T19:39:59.900

[“你无能为力，这就是 Exchange 提供程序的实现方式。” -德米特里·斯特雷布利琴科（MVP）](http://www.microsoft.com/communities/newsgroups/en-us/default.aspx?dg=microsoft.public.outlook.program_vba&tid=f3743734-b6e8-4d7e-a1a0-0a9b44aeb1be&cat=en_US_f2349ded-ffa8-474e-a28d-ef611f1d45b4&lang=en&cr=US&sloc=&p=1)

# visual-studio - 有使用 Visual Studio Shell 的经验吗？

> ID：364206
> 
> 赞同：11
> 
> 时间：2008-12-12T21:30:28.667
> 
> 标签：visual-studio

我们公司正在考虑将[Visual Studio Shell](http://msdn.microsoft.com/en-us/vsx2008/products/bb933751.aspx)用于我们的一种产品。

有没有人有使用它的经验？工作容易吗？它节省了时间吗？有什么事情是你无法做到的吗？你用它寄过东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T11:39:16.207

**关于隔离壳的几点说明。**

您可能知道，使用 shell 时有两个注意事项 - 隔离模式和集成模式。（[从 MSDN 阅读更多](http://msdn.microsoft.com/en-us/vsx2008/products/bb933751.aspx)）

组织可以使用独立 Shell 来构建与其他版本的 Visual Studio 并行运行的应用程序。

以下是我们学到的一些要点，尝试将 shell 用于我们的一些应用程序。

*   如果您打算使用独立外壳，则不能在其中使用 C# 和 VB.NET 等 Microsoft 语言包。
*   为你的 shell 创建一个包很像创建任何其他 VS 包。
*   您不支持 Team Explorer 和 VS 内置源代码控制访问，在独立外壳中（[请参阅 Vin 的这篇文章](https://stackoverflow.com/questions/21404/source-control-in-visual-studio-isolated-shell)）

虽然没有直接关系——如果你使用 VS SDK 1.1 来开发你的包——请记住，托管包框架在默认发行版中不再可用。因此，如果您的旧软件包在迁移到 SDK 1.1 后无法加载 MPF 文件，请不要感到惊讶。它已作为单独的下载移至 Codeplex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T23:45:26.587

几周前我玩了一下它，就像每件事都会有一个学习曲线，但是如果你稍微研究一下这些例子，然后看看 codeplex 上的一个名为 Storyboard Designer 的项目。我相信你可以把它捡起来，我发现很难在网上找到其他例子，但我看起来并不难。

我会说，如果您认为 shell 可以满足您的需要，我会选择它，这是一个非常方便的界面，如果您的目标开发人员它也是他们的通用界面，所以它会感觉很自然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T14:41:33.807

我通常`Visual Studio Community`在我的 PC 上使用来开发商业智能解决方案（数据库、SSIS、SSAS、SSRS），然后部署到服务器。几周前，我的经理要求我们将 Visual Studio 放在服务器上，以便其他开发人员和顾问可以连接到服务器并访问 Visual Studio。

最终我安装了**`SQL Server Data Tools (14.0.61021.0)`**，里面自动安装了**`Visual Studio Shell 2015`**。安装后，我启动了 Visual Studio Shell 并尝试做一些我在社区版中习惯做的事情。我几乎可以做任何我习惯于做 BI 开发的事情。

> **视觉工作室外壳 2015**：
> 
> *   带有 BI 项目的解决方案文件...
>     *   SSIS
> *   正在安装扩展和附加组件...
>     *   使用 SVN 服务器进行版本控制的 ANKHSVN
>     *   Visual Studio 2015 颜色主题编辑器
> *   项目部署

# c++ - 声明为 void 的变量或字段

> ID：364209
> 
> 赞同：56
> 
> 时间：2008-12-12T21:31:32.987
> 
> 标签：c++, string, void

我有一个名为：

```
void initializeJSP(string Experiment) 
```

在我的 MyJSP.h 文件中，我有：

```
2: void initializeJSP(string Experiment); 
```

当我编译我得到这个错误：

> MyJSP.h:2 错误：变量或字段 initializeJSP 声明为 void

哪里有问题？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2008-12-12T21:36:22.867

例如，在这种情况下发生在这里：

```
void initializeJSP(unknownType Experiment); 
```

尝试使用`std::string`而不是仅使用`string`（并包含`<string>`标题）。C++ 标准库类位于命名空间`std::`中。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2011-09-26T06:36:06.603

这实际上不是函数为“void”的问题，而是函数参数的问题。我认为这只是 g++ 给出了一个无用的错误消息。

编辑：在接受的答案中，解决方法是使用`std::string`而不是`string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-13T16:13:50.013

或者像我的情况一样，解决方案只是在中声明合适的标题`main.cpp`而不是在中的标题`function.cpp`，试图包含那个..

...

```
#include"header.h" //instead of "function.cpp"
int main() 
```

并且在`function.cpp`

```
#include"header.h"
void () 
```

这样编译和链接就可以正常工作...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-13T23:25:03.507

问题是，当你调用一个函数时，你不应该写函数的类型，这意味着你应该像调用函数一样

```
initializeJSP(Experiment); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-21T15:05:30.330

其他答案给出了非常准确的回答，我不完全确定您的问题到底是什么（如果只是由于您的程序中的未知类型，那么您将得到更多明确的错误以及您提到的错误）但是要添加有关更多信息，如果我们在调用函数时将函数类型添加为 void，也会引发此错误，如下所示：

```
#include<iostream>
#include<vector>
#include<utility>
#include<map>
using namespace std;
void fun(int x);
main()
{
   int q=9;
   void fun(q); //line no 10
}
void fun(int x)
{
    if (x==9)
        cout<<"yes";
    else
        cout<<"no";
} 
```

错误：

```
 C:\Users\ACER\Documents\C++ programs\exp1.cpp|10|error: variable or field 'fun' declared void|
||=== Build failed: 1 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===| 
```

所以从这个例子中我们可以看出，这个原因也可能导致“变量或字段声明为无效”错误。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-04-12T19:47:06.240

你在调用你的函数时放了 void 吗？

例如：

```
void something(int x){
    logic..
}

int main() {

    **void** something();

    return 0;

} 
```

如果是这样，您应该删除最后一个空白。

# objective-c - 如何在不共享 cookie 的情况下拥有多个 webkit 实例？

> ID：364219
> 
> 赞同：20
> 
> 时间：2008-12-12T21:34:29.080
> 
> 标签：objective-c, macos, webkit

我有一个创建几个 WebView 实例的应用程序，我想让它们尽可能独立地运行。

至少，我不希望他们共享 cookie。快速的谷歌搜索给了我类似“你不能”的结果。我希望有人有更好的答案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-13T10:26:26.683

基本答案是“你不能”。

看了一会儿，我认为这是可能的，但非常复杂。这将涉及在您的 WebView 上实现一个 resourceLoadDelegate，它实现`-webView:resource:willSendRequest:redirectResponse:fromDataSource:`和修改请求以关闭`HTTPShouldHandleCookies`并将任何相关的 cookie 手动添加到请求中。它还必须执行`-webView:resource:didReceiveResponse:fromDataSource:`以找出从服务器返回的任何 cookie。您可以分配/初始化您自己的 per-webview 副本，`NSHTTPCookieStorage`并使用它来存储/检索 cookie。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T11:49:56.623

[这篇文章](http://lists.apple.com/archives/Webkitsdk-dev/2008/Jan/msg00018.html)总结了你可以做什么。我不确定这对您是否可行，我觉得这不是一项简单的任务，甚至可能有风险，但它似乎是*可能的*：作者声称 iCab 就是这样做的。

我也希望有一个更简单的解决方案，真的。当然，由于 Webkit 是开源的，我猜你可以推出你自己的框架版本并改变行为？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-12T22:02:19.290

我会假设 cookie 将在服务/应用程序级别配置，而不是针对特定实例或进程。也许您可以修改您的问题以找到解决您遇到的问题的方法，该问题要求实例不共享 cookie。

不在实例之间共享 cookie 的动机是什么？

如果您只需要对同一个 Web 资源的 3 个视图，您可以设置一些指向同一个数据源的虚拟主机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-22T16:48:28.757

您可以做的是查看[libcurl](http://developer.apple.com/documentation/Darwin/Reference/Manpages/man3/libcurl-tutorial.3.html)，它可以处理不与 URL 加载系统范围的 cookie 存储混合的 cookie 存储，用于您想要分离的那些请求。对我来说，这似乎是一个有效且简单的解决方案。如果你真的需要依赖 webview/webkit，它可能不是。

# sql - MySQL和聚合中的表JOIN问题

> ID：364230
> 
> 赞同：1
> 
> 时间：2008-12-12T21:41:47.787
> 
> 标签：sql, mysql, join

我有三张桌子。此查询将写下正确答案（btv.id_user 的 x 行，带有适当的 btv.cas 和 race.id_zavod

```
SELECT `btv.id_user`, `btv.id_zavod`,`btv.cas`
FROM `btv`
JOIN `btu` ON `btv.id_user` = `btu.id_user`
JOIN `race` ON 'btv.id_zavod' = `race.id_zavod`
WHERE `race.type` = '8' AND `btv.id_user` = '607' 
```

结果：

```
| 607 |  512 | 03:15:58 |  
| 607 |  730 | 03:01:18 |  
| 607 |  164 | 03:07:26 |  
| 607 |  767 | 02:58:31 |  
| 607 | 1147 | 03:06:47 |  
| 607 | 1149 | 03:09:41 |  
| 607 | 1178 | 03:24:20 | 
```

但是当我尝试通过 id_user 将其聚合到一行时，它返回正确的 min btv.cas 但错误的加入错误的race.id_zavod

```
SELECT `btv.id_user`, `btv.id_zavod`, MIN( `btv.cas` )
FROM `btv`
JOIN `btu` ON `btv.id_user` = `btu.id_user`
JOIN `race` ON 'btv.id_zavod' = `race.id_zavod`
WHERE `race.type` = '8' AND `btv.id_user` = '607'
GROUP BY `btv.id_user` 
```

结果：

```
| 607 | 512 | 02:58:31 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T21:53:14.770

您编写的查询：

```
SELECT `btv.id_user`, `btv.id_zavod`, MIN( `btv.cas` )
FROM `btv`
JOIN `btu` ON `btv.id_user` = `btu.id_user`
JOIN `race` ON 'btv.id_zavod' = `race.id_zavod`
WHERE `race.type` = '8' AND `btv.id_user` = '607'
GROUP BY `btv.id_user`
```

不会跑。你需要一个 id_zavod 或其他东西的组。你能告诉我们你真正在运行什么查询吗？您期望什么结果集？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T21:54:54.280

尝试：

```
SELECT `btv.id_user`, `btv.id_zavod`, MIN( `btv.cas` )
FROM `btv`
Inner JOIN `btu` ON `btv.id_user` = `btu.id_user`
Inner JOIN `race` ON 'btv.id_zavod' = `race.id_zavod`
WHERE `btv.id_user` = '607'
GROUP BY `btv.id_user` having `race.type` = '8' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-12T22:08:42.693

当您使用 GROUP BY 时，选择列表中的列必须满足以下条件之一：

*   列在 GROUP BY 中命名（例如`btv.id_user`在您的示例中）
*   列在聚合函数内（例如`MIN( btv.cas )`）
*   列是您在 GROUP BY 中命名的列的*功能依赖项。*

这是您的查询中的错误： `btv.id_zavod`每个值都有很多值`btv.id_user`。这不满足功能依赖。`id_zavod`的每个值必须只有一个值，`id_user`才能成为函数依赖项。

在某些数据库品牌中，此查询实际上会给您一个错误。MySQL 更加灵活，相信您只命名选择列表中的列，这些列是您在 GROUP BY 中命名的列的功能依赖项。

这是一个查询，它返回您想要的，`btv.cas`per的 MIN 值`id_user`，对应的值为`btv.id_zavod`：

```
SELECT b1.id_user, b1.id_zavod, b1.cas
FROM btv AS b1
 JOIN btu ON (b1.id_user = btu.id_user)
 JOIN race ON (b1.id_zavod = race.id_zavod)
 LEFT OUTER JOIN btv AS b2 ON (b1.id_user = bt2.id_user AND 
   (b1.cas > b2.cas OR (b1.cas = b2.cas AND b1.primarykey > b2.primarykey))
WHERE race.type = '8' AND b1.id_user = '607'
 AND b2.id_user IS NULL; 
```

换句话说，您需要像以前一样进行连接，然后再次将其连接`btv`起来，以查看是否有另一行具有相同的`id_user`值和较小的值`cas`。使用 OUTER JOIN，因为您正在寻找不匹配的情况。您可以使用 进行测试`b2.id_user IS NULL`，因为 OUTER JOIN 在不匹配时使所有列都为 NULL。

请注意，可能存在平局，因此我们使用主键作为平局者添加额外的术语。

您不需要在此查询中使用 GROUP BY。这是隐式处理的，因为只有一行满足 OUTER JOIN 条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T22:14:01.827

我不确定您要完成什么，但您是否正在寻找[GROUP_CONCAT 功能？](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat "按功能分组@mysql.com")?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-13T01:38:41.490

您是否只是试图获取最低 btv.cas 值及其其他相应列？如果是这样，您可以通过 btv.cas 订购并限制为 1 次点击：

```
SELECT `btv.id_user`, `btv.id_zavod`,`btv.cas`
FROM `btv`
JOIN `btu` ON `btv.id_user` = `btu.id_user`
JOIN `race` ON 'btv.id_zavod' = `race.id_zavod`
WHERE `race.type` = '8' AND `btv.id_user` = '607'
ORDER BY `btv.cas` LIMIT 1
```

# c++ - 您如何减少 Visual C++ 项目（原生 C++）的编译时间和链接时间？

> ID：364240
> 
> 赞同：41
> 
> 时间：2008-12-12T21:46:19.307
> 
> 标签：c++, visual-c++, compilation

您如何减少 VC++ 项目（原生 C++）的编译时间和链接时间？

请指定每个建议是否适用于调试、发布或两者。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-12-12T21:52:11.417

这对您来说可能听起来很明显，但我们尝试尽可能多地使用前向声明，即使它需要写出类型所在的长命名空间名称：

```
// Forward declaration stuff
namespace plotter { namespace logic { class Plotter; } }

// Real stuff
namespace plotter {
    namespace samples {
        class Window {
            logic::Plotter * mPlotter;
            // ...
        };
    }
} 
```

它也大大减少了在其他编译器上编译的时间。实际上它适用于所有配置:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-12-12T22:18:59.723

使用[Handle/Body 模式](http://c2.com/cgi/wiki?HandleBodyPattern)（有时也称为“pimpl”、“adapter”、“decorator”、“bridge”或“wrapper”）。通过将类的实现隔离到 .cpp 文件中，它们只需要编译一次。大多数更改不需要更改头文件，因此这意味着您可以进行相当广泛的更改，而只需要重新编译一个文件。这也鼓励重构和编写注释和单元测试，因为编译时间减少了。此外，您会自动分离接口和实现的关注点，从而简化代码的接口。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-12-12T22:46:56.250

如果您的构建过程中的大多数 .cpp 文件必须包含大型复杂标头，并且这些标头不经常更改，则可以预编译它们。在具有典型配置的 Visual C++ 项目中，只需将它们包含在 stdafx.h 中即可。这个特性有它的批评者，但充分利用模板的库往往在头文件中有很多东西，在这种情况下，预编译的头文件是加速构建的最简单方法。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-12T23:13:28.833

这些解决方案适用于调试和发布，并且专注于已经庞大且繁琐的代码库。

前向声明是一种常见的解决方案。

分布式构建，例如使用 Incredibuild 是一个胜利。

将代码从标头向下推送到源文件中是可行的。小类、常量、枚举等可能会从头文件开始，因为它**可以**在多个编译单元中使用，但实际上它们只在一个编译单元中使用，并且可以移动到 cpp 文件中。

我尚未阅读但使用过的解决方案是拆分大标题。如果您有一些非常大的标题，请查看它们。它们可能包含相关信息，也可能依赖于许多其他标头。获取不依赖于其他文件的元素...简单的结构、常量、枚举和前向声明，并将它们`the_world.h`从`the_world_defs.h`. 您现在可能会发现很多源文件现在只能包含`the_world_defs.h`并避免包含所有这些开销。

Visual Studio 还有一个“显示包含”选项，可以让您了解哪些源文件包含许多头文件以及哪些头文件最常包含。

对于非常常见的包含，请考虑将它们放在预编译的标头中。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-12-17T00:21:51.110

我使用[Unity Builds](http://buffered.io/posts/the-magic-of-unity-builds/)（[位于此处](http://buffered.io/posts/screencast-setting-up-unity-builds/)的屏幕截图）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-12-12T21:54:16.343

我们使用[Xoreax 的 Incredibuild](http://www.incredibuild.com/incredibuild-product-overview.html)在多台机器上并行运行编译。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-12-12T21:54:56.340

编译速度问题很有趣，Stroustrup 在他的[FAQ](http://www.stroustrup.com/bs_faq2.html#abstract-class)中有这个问题。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-11-29T12:24:44.223

还有一篇来自 Ned Batchelder 的有趣文章：http: [//nedbatchelder.com/blog/200401/speeding_c_links.html](http://nedbatchelder.com/blog/200401/speeding_c_links.html)（关于 Windows 上的 C++）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-12-12T21:55:25.810

我们的开发机器都是四核的，我们使用Visual Studio 2008 支持并行编译。我不确定是否所有版本的 VS 都可以做到这一点。

我们有一个包含大约 168 个单独项目的解决方案文件，在我们的四核机器上编译这种方式大约需要 25 分钟，而在我们为暑期学生提供的单核笔记本电脑上大约需要 90 分钟。不完全可比的机器，但你明白了:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-12T23:32:42.447

在 Visual C++ 中，有一种方法称为 Unity，它通过减少对象模块的数量来显着改善链接时间。

这涉及连接 C++ 代码，通常按库分组。这当然使编辑代码变得更加困难，除非你很好地使用它们，否则你会遇到命名空间冲突。它使您无法使用“使用命名空间 foo”；

我们公司的几个团队有精心设计的系统来获取普通的 C++ 文件并在编译时将它们连接起来作为构建步骤。链接时间的减少可能是巨大的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-07-15T14:54:17.217

另一种有用的技术是blobbing。我认为这与 Matt Shaw 所描述的相似。

简单地说，您只需创建一个包含其他 cpp 文件的 cpp 文件。您可能有两种不同的项目配置，一种是普通的，一种是 blob。当然，blobbing 对您的代码施加了一些约束，例如，未命名的命名空间中的类名可能会发生冲突。

当您更改一个 cpp 文件时，避免在 blob 中重新编译整个代码的一种技术（正如 David Rodríguez 所提到的）是让您的“工作” blob 是从最近修改的文件和其他普通 blob 中创建的。

我们大部分时间都在工作中使用blobbing，它减少了项目构建时间，尤其是链接时间。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-05T06:45:04.507

**编译时间：**
如果您有 IncrediBuild，编译时间将不是问题。如果您没有 IncrediBuild，请尝试“统一构建”方法。它将多个 cpp 文件合并到一个 cpp 文件中，从而减少了整个编译时间。
**链接时间：**
“统一构建”方法也有助于减少链接时间，但作用不大。但是，您可以检查是否启用了“整体全局优化”和“LTCG”，虽然这些标志使程序变快，但它们确实使链接变慢。
尝试关闭“全局优化”并将 LTCG 设置为“默认”，链接时间可能会减少 5/6。
*（LTCG 代表链接时间码生成）*

# java - 从 Java 创建 PDF 并在网页中显示

> ID：364247
> 
> 赞同：2
> 
> 时间：2008-12-12T21:48:48.817
> 
> 标签：java, pdf-generation, apache-fop

目前我正在使用 FOP 从 java 代码和 xslt 文档生成 pdf。FOP 吐出显示（嵌入）到网页中的 PDF 文件。文档的长度可以从一页到几千页不等，生成它们可能需要一些时间。

有没有更好的工具可以做到这一点？FOP 是开源和自由世界中的最佳选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-12T21:57:02.187

我们使用[iText](http://www.lowagie.com/iText/)。

这是一篇博客文章[Comparing Apache FOP with iText](http://blog.xebia.com/2008/03/03/comparing-apache-fop-with-itext/)。

从您的使用情况来看（从 java 代码和 xslt 文档生成 pdf），似乎 FOP 对您来说是更好的选择。

编辑：这个关于[FOP Vs IText](http://saloon.javaranch.com/cgi-bin/ubb/ultimatebb.cgi?ubb=get_topic&f=64&t=001845)的论坛帖子包括以下内容：

> 就 PDF 而言，iText 比 FOP 功能更丰富：您可以添加注释、创建 AcroForms、对 PDF 文档进行数字签名。**如果您需要生成包含数千或一万页的 PDF 文档，iText 也是唯一的解决方案。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-13T14:46:06.630

您可以使用 OpenOffice.org，作为服务器运行并远程命令它进行文档转换。

除了 HTML 到 PDF，还有其他可能的转换：doc --> pdf, html, txt, rtf xls --> pdf, html, csv ppt --> pdf, swf

代码示例：

导入officetools.Office文件；... FileInputStream fis = new FileInputStream(new File("c:/test.html")); FileOutputStream fos = new FileOutputStream(new File("c:/test.pdf"));

// 假设 OpenOffice.org 在 localhost 的 8100 端口上运行

OfficeFile f = new OfficeFile(fis,"localhost","8100", true); f.convert(fos,"pdf");

从：使用 PHP、Java 或 ASP 的 HTML 到 PDF：dancrintea.ro/html-to-pdf/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-21T12:32:19.727

这个答案对你来说为时已晚，但如果它对其他搜索者有所帮助，[Docmosis](http://www.docmosis.com)可以以相当高的速度生成文档，并且可以将高负载分散到多台机器上。它使用 OpenOffice 作为底层格式转换引擎，通过 Docmosis Java API 添加文档填充和操作工具。
几千页的文档会占用大多数系统一段时间，但是如果系统（或您的代码）允许您并行化和分配工作量，那么至少平均文档率会很高，即使单个文档的时间可能是重大。

[JODReports](http://jodreports.sourceforge.net/)是另一个类似的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-26T19:27:41.730

Adobe ColdFusion 具有 [最好的内置 PDF 支持](http://www.adobe.com/products/coldfusion/features/pdf_features/)。

# c# - 如何反序列化 XML 文档

> ID：364253
> 
> 赞同：515
> 
> 时间：2008-12-12T21:49:58.597
> 
> 标签：c#, asp.net, xml, serialization, xml-deserialization

如何反序列化此 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<Cars>
  <Car>
    <StockNumber>1020</StockNumber>
    <Make>Nissan</Make>
    <Model>Sentra</Model>
  </Car>
  <Car>
    <StockNumber>1010</StockNumber>
    <Make>Toyota</Make>
    <Model>Corolla</Model>
  </Car>
  <Car>
    <StockNumber>1111</StockNumber>
    <Make>Honda</Make>
    <Model>Accord</Model>
  </Car>
</Cars> 
```

我有这个：

```
[Serializable()]
public class Car
{
    [System.Xml.Serialization.XmlElementAttribute("StockNumber")]
    public string StockNumber{ get; set; }

    [System.Xml.Serialization.XmlElementAttribute("Make")]
    public string Make{ get; set; }

    [System.Xml.Serialization.XmlElementAttribute("Model")]
    public string Model{ get; set; }
} 
```

.

```
[System.Xml.Serialization.XmlRootAttribute("Cars", Namespace = "", IsNullable = false)]
public class Cars
{
    [XmlArrayItem(typeof(Car))]
    public Car[] Car { get; set; }

} 
```

.

```
public class CarSerializer
{
    public Cars Deserialize()
    {
        Cars[] cars = null;
        string path = HttpContext.Current.ApplicationInstance.Server.MapPath("~/App_Data/") + "cars.xml";

        XmlSerializer serializer = new XmlSerializer(typeof(Cars[]));

        StreamReader reader = new StreamReader(path);
        reader.ReadToEnd();
        cars = (Cars[])serializer.Deserialize(reader);
        reader.Close();

        return cars;
    }
} 
```

这似乎不起作用:-(

* * *

## 回答 #1

> 赞同：475
> 
> 时间：2008-12-12T22:44:21.357

您是否将 xml 保存到文件中，然后使用[xsd](http://msdn.microsoft.com/en-us/library/x6c1kb0s.aspx)生成 C# 类？

1.  将文件写入磁盘（我将其命名为 foo.xml）
2.  生成 xsd：`xsd foo.xml`
3.  生成 C#：`xsd foo.xsd /classes`

Et voila - 和 C# 代码文件应该能够通过以下方式读取数据`XmlSerializer`：

```
 XmlSerializer ser = new XmlSerializer(typeof(Cars));
    Cars cars;
    using (XmlReader reader = XmlReader.Create(path))
    {
        cars = (Cars) ser.Deserialize(reader);
    } 
```

（将生成的 foo.cs 包含在项目中）

* * *

## 回答 #2

> 赞同：384
> 
> 时间：2008-12-12T22:40:18.637

这是一个工作版本。我将`XmlElementAttribute`标签更改为`XmlElement`因为在 xml 中 StockNumber、Make 和 Model 值是元素，而不是属性。我还删除了`reader.ReadToEnd();`（该[函数](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)读取整个流并返回一个字符串，因此该`Deserialize()`函数不能再使用阅读器......位置在流的末尾）。我也对命名采取了一些自由：）。

以下是课程：

```
[Serializable()]
public class Car
{
    [System.Xml.Serialization.XmlElement("StockNumber")]
    public string StockNumber { get; set; }

    [System.Xml.Serialization.XmlElement("Make")]
    public string Make { get; set; }

    [System.Xml.Serialization.XmlElement("Model")]
    public string Model { get; set; }
}

[Serializable()]
[System.Xml.Serialization.XmlRoot("CarCollection")]
public class CarCollection
{
    [XmlArray("Cars")]
    [XmlArrayItem("Car", typeof(Car))]
    public Car[] Car { get; set; }
} 
```

反序列化函数：

```
CarCollection cars = null;
string path = "cars.xml";

XmlSerializer serializer = new XmlSerializer(typeof(CarCollection));

StreamReader reader = new StreamReader(path);
cars = (CarCollection)serializer.Deserialize(reader);
reader.Close(); 
```

稍微调整的 xml（我需要添加一个新元素来包装 <Cars>...Net 对反序列化数组很挑剔）：

```
<?xml version="1.0" encoding="utf-8"?>
<CarCollection>
<Cars>
  <Car>
    <StockNumber>1020</StockNumber>
    <Make>Nissan</Make>
    <Model>Sentra</Model>
  </Car>
  <Car>
    <StockNumber>1010</StockNumber>
    <Make>Toyota</Make>
    <Model>Corolla</Model>
  </Car>
  <Car>
    <StockNumber>1111</StockNumber>
    <Make>Honda</Make>
    <Model>Accord</Model>
  </Car>
</Cars>
</CarCollection> 
```

* * *

## 回答 #3

> 赞同：257
> 
> 时间：2013-10-27T02:11:51.067

你有两种可能。

## 方法一**、XSD**工具

* * *

假设您的 XML 文件位于此位置`C:\path\to\xml\file.xml`

1.  打开**开发人员命令提示符**
    您可以在`Start Menu > Programs > Microsoft Visual Studio 2012 > Visual Studio Tools` 或者如果您有 Windows 8 可以开始在*开始屏幕中输入***开发人员命令提示符**
**   通过键入将位置更改为您的 XML 文件目录`cd /D "C:\path\to\xml"`*   通过键入从您的 xml 文件创建**XSD 文件**`xsd file.xml`*   通过键入创建**C# 类**`xsd /c file.xsd`*

 *就是这样！您已经从 xml 文件中生成了 C# 类`C:\path\to\xml\file.cs`

## 方法 2 - 特殊粘贴

* * *

需要 Visual Studio 2012+

1.  将 XML 文件的内容复制到剪贴板
2.  将新的空类文件 ( `Shift`++ `Alt`)添加到您的解决`C`方案
3.  打开该文件并在菜单中单击`Edit > Paste special > Paste XML As Classes`
    ![在此处输入图像描述](https://i.stack.imgur.com/jSmc3.png)

就是这样！

## 用法

* * *

这个助手类的使用非常简单：

```
using System;
using System.IO;
using System.Web.Script.Serialization; // Add reference: System.Web.Extensions
using System.Xml;
using System.Xml.Serialization;

namespace Helpers
{
    internal static class ParseHelpers
    {
        private static JavaScriptSerializer json;
        private static JavaScriptSerializer JSON { get { return json ?? (json = new JavaScriptSerializer()); } }

        public static Stream ToStream(this string @this)
        {
            var stream = new MemoryStream();
            var writer = new StreamWriter(stream);
            writer.Write(@this);
            writer.Flush();
            stream.Position = 0;
            return stream;
        }

        public static T ParseXML<T>(this string @this) where T : class
        {
            var reader = XmlReader.Create(@this.Trim().ToStream(), new XmlReaderSettings() { ConformanceLevel = ConformanceLevel.Document });
            return new XmlSerializer(typeof(T)).Deserialize(reader) as T;
        }

        public static T ParseJSON<T>(this string @this) where T : class
        {
            return JSON.Deserialize<T>(@this.Trim());
        }
    }
} 
```

你现在要做的就是：

```
 public class JSONRoot
    {
        public catalog catalog { get; set; }
    }
    // ...

    string xml = File.ReadAllText(@"D:\file.xml");
    var catalog1 = xml.ParseXML<catalog>();

    string json = File.ReadAllText(@"D:\file.json");
    var catalog2 = json.ParseJSON<JSONRoot>(); 
```

* * *

## 回答 #4

> 赞同：101
> 
> 时间：2008-12-22T22:24:49.340

以下代码段应该可以解决问题（您可以忽略大多数序列化属性）：

```
public class Car
{
  public string StockNumber { get; set; }
  public string Make { get; set; }
  public string Model { get; set; }
}

[XmlRootAttribute("Cars")]
public class CarCollection
{
  [XmlElement("Car")]
  public Car[] Cars { get; set; }
} 
```

...

```
using (TextReader reader = new StreamReader(path))
{
  XmlSerializer serializer = new XmlSerializer(typeof(CarCollection));
  return (CarCollection) serializer.Deserialize(reader);
} 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2008-12-12T22:09:59.400

看看这是否有帮助：

```
[Serializable()]
[System.Xml.Serialization.XmlRootAttribute("Cars", Namespace = "", IsNullable = false)]
public class Cars
{
    [XmlArrayItem(typeof(Car))]
    public Car[] Car { get; set; }
} 
```

.

```
[Serializable()]
public class Car
{
    [System.Xml.Serialization.XmlElement()]
    public string StockNumber{ get; set; }

    [System.Xml.Serialization.XmlElement()]
    public string Make{ get; set; }

    [System.Xml.Serialization.XmlElement()]
    public string Model{ get; set; }
} 
```

如果失败，请使用 Visual Studio 附带的 xsd.exe 程序基于该 xml 文件创建架构文档，然后再次使用它来创建基于架构文档的类。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-01-26T12:06:48.133

我不认为.net '对反序列化数组很挑剔'。第一个 xml 文档格式不正确。没有根元素，虽然看起来有。规范的 xml 文档有一个根和至少 1 个元素（如果有的话）。在您的示例中：

```
<Root> <-- well, the root
  <Cars> <-- an element (not a root), it being an array
    <Car> <-- an element, it being an array item
    ...
    </Car>
  </Cars>
</Root> 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-10-07T11:06:07.333

如果您的 .xml 文件已在磁盘的某处生成并且您使用过，请尝试使用此代码块`List<T>`：

```
//deserialization

XmlSerializer xmlser = new XmlSerializer(typeof(List<Item>));
StreamReader srdr = new StreamReader(@"C:\serialize.xml");
List<Item> p = (List<Item>)xmlser.Deserialize(srdr);
srdr.Close();` 
```

注意：`C:\serialize.xml`是我的 .xml 文件的路径。您可以根据需要更改它。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-05-22T09:36:36.700

# 对新手而言

我发现这里的答案非常有帮助，也就是说我仍然在努力（只是有点）让这个工作正常。因此，如果它对某人有帮助，我将说明可行的解决方案：

来自原始问题的 XML。该xml在一个文件Class1.xml中，`path`这个文件的一个用于在代码中定位这个xml文件。

我使用@erymski 的答案来完成这项工作，因此创建了一个名为 Car.cs 的文件并添加了以下内容：

> ```
> using System.Xml.Serialization;  // Added
> 
> public class Car
> {
>     public string StockNumber { get; set; }
>     public string Make { get; set; }
>     public string Model { get; set; }
> }
> 
> [XmlRootAttribute("Cars")]
> public class CarCollection
> {
>     [XmlElement("Car")]
>     public Car[] Cars { get; set; }
> } 
> ```

@erymski 提供的另一段代码...

> ```
> using (TextReader reader = new StreamReader(path))
> {
>   XmlSerializer serializer = new XmlSerializer(typeof(CarCollection));
>   return (CarCollection) serializer.Deserialize(reader);
> } 
> ```

...进入您的主程序（Program.cs），`static CarCollection XCar()`如下所示：

```
using System;
using System.IO;
using System.Xml.Serialization;

namespace ConsoleApp2
{
    class Program
    {

        public static void Main()
        {
            var c = new CarCollection();

            c = XCar();

            foreach (var k in c.Cars)
            {
                Console.WriteLine(k.Make + " " + k.Model + " " + k.StockNumber);
            }
            c = null;
            Console.ReadLine();

        }
        static CarCollection XCar()
        {
            using (TextReader reader = new StreamReader(@"C:\Users\SlowLearner\source\repos\ConsoleApp2\ConsoleApp2\Class1.xml"))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(CarCollection));
                return (CarCollection)serializer.Deserialize(reader);
            }
        }
    }
} 
```

希望能帮助到你 ：-）

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-01-13T14:11:38.143

Kevin 的分析器很好，但事实上，在现实世界中，您通常无法更改原始 XML 以满足您的需要。

原始 XML 也有一个简单的解决方案：

```
[XmlRoot("Cars")]
public class XmlData
{
    [XmlElement("Car")]
    public List<Car> Cars{ get; set; }
}

public class Car
{
    public string StockNumber { get; set; }
    public string Make { get; set; }
    public string Model { get; set; }
} 
```

然后你可以简单地调用：

```
var ser = new XmlSerializer(typeof(XmlData));
XmlData data = (XmlData)ser.Deserialize(XmlReader.Create(PathToCarsXml)); 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2019-09-20T12:36:58.550

一个班轮：

```
var object = (Cars)new XmlSerializer(typeof(Cars)).Deserialize(new StringReader(xmlString)); 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-05-12T06:18:13.670

试试这个用于 Xml 序列化和反序列化的通用类。

```
public class SerializeConfig<T> where T : class
{
    public static void Serialize(string path, T type)
    {
        var serializer = new XmlSerializer(type.GetType());
        using (var writer = new FileStream(path, FileMode.Create))
        {
            serializer.Serialize(writer, type);
        }
    }

    public static T DeSerialize(string path)
    {
        T type;
        var serializer = new XmlSerializer(typeof(T));
        using (var reader = XmlReader.Create(path))
        {
            type = serializer.Deserialize(reader) as T;
        }
        return type;
    }
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-12-02T05:00:52.723

反序列化 XML 文档的通用类怎么样

```
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Generic class to load any xml into a class
// used like this ...
// YourClassTypeHere InfoList = LoadXMLFileIntoClass<YourClassTypeHere>(xmlFile);

using System.IO;
using System.Xml.Serialization;

public static T LoadXMLFileIntoClass<T>(string xmlFile)
{
    T returnThis;
    XmlSerializer serializer = new XmlSerializer(typeof(T));
    if (!FileAndIO.FileExists(xmlFile))
    {
        Console.WriteLine("FileDoesNotExistError {0}", xmlFile);
    }
    returnThis = (T)serializer.Deserialize(new StreamReader(xmlFile));
    return (T)returnThis;
} 
```

这部分可能是必要的，也可能不是必要的。在 Visual Studio 中打开 XML 文档，右键单击 XML，选择属性。然后选择您的架构文件。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-09-30T03:11:40.347

想法是处理所有级别以进行反序列化请查看解决我类似问题的示例解决方案

```
<?xml version="1.0" ?> 
 <TRANSACTION_RESPONSE>
    <TRANSACTION>
        <TRANSACTION_ID>25429</TRANSACTION_ID> 
        <MERCHANT_ACC_NO>02700701354375000964</MERCHANT_ACC_NO> 
        <TXN_STATUS>F</TXN_STATUS> 
        <TXN_SIGNATURE>a16af68d4c3e2280e44bd7c2c23f2af6cb1f0e5a28c266ea741608e72b1a5e4224da5b975909cc43c53b6c0f7f1bbf0820269caa3e350dd1812484edc499b279</TXN_SIGNATURE> 
        <TXN_SIGNATURE2>B1684258EA112C8B5BA51F73CDA9864D1BB98E04F5A78B67A3E539BEF96CCF4D16CFF6B9E04818B50E855E0783BB075309D112CA596BDC49F9738C4BF3AA1FB4</TXN_SIGNATURE2> 
        <TRAN_DATE>29-09-2015 07:36:59</TRAN_DATE> 
        <MERCHANT_TRANID>150929093703RUDZMX4</MERCHANT_TRANID> 
        <RESPONSE_CODE>9967</RESPONSE_CODE> 
        <RESPONSE_DESC>Bank rejected transaction!</RESPONSE_DESC> 
        <CUSTOMER_ID>RUDZMX</CUSTOMER_ID> 
        <AUTH_ID /> 
        <AUTH_DATE /> 
        <CAPTURE_DATE /> 
        <SALES_DATE /> 
        <VOID_REV_DATE /> 
        <REFUND_DATE /> 
        <REFUND_AMOUNT>0.00</REFUND_AMOUNT> 
    </TRANSACTION>
  </TRANSACTION_RESPONSE> 
```

上述 XML 分两级处理

```
 [XmlType("TRANSACTION_RESPONSE")]
public class TransactionResponse
{
    [XmlElement("TRANSACTION")]
    public BankQueryResponse Response { get; set; }

} 
```

内在层次

```
public class BankQueryResponse
{
    [XmlElement("TRANSACTION_ID")]
    public string TransactionId { get; set; }

    [XmlElement("MERCHANT_ACC_NO")]
    public string MerchantAccNo { get; set; }

    [XmlElement("TXN_SIGNATURE")]
    public string TxnSignature { get; set; }

    [XmlElement("TRAN_DATE")]
    public DateTime TranDate { get; set; }

    [XmlElement("TXN_STATUS")]
    public string TxnStatus { get; set; }

    [XmlElement("REFUND_DATE")]
    public DateTime RefundDate { get; set; }

    [XmlElement("RESPONSE_CODE")]
    public string ResponseCode { get; set; }

    [XmlElement("RESPONSE_DESC")]
    public string ResponseDesc { get; set; }

    [XmlAttribute("MERCHANT_TRANID")]
    public string MerchantTranId { get; set; }

} 
```

同样的方式你需要多级`car as array` [检查这个例子进行多级反序列化](https://stackoverflow.com/questions/32856249/deserialization-not-filling-data-c-sharp/32856380?noredirect=1#comment53546753_32856380)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-05-24T08:45:19.427

```
async public static Task<JObject> XMLtoNETAsync(XmlDocument ToConvert)
{
    //Van XML naar JSON
    string jsonText = await Task.Run(() => JsonConvert.SerializeXmlNode(ToConvert));

    //Van JSON naar .net object
    var o = await Task.Run(() => JObject.Parse(jsonText));

    return o;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-16T20:39:54.827

如果您在使用 xsd.exe 创建 xsd 文件时遇到错误，请使用[msdn](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemainference.aspx)中提到的 XmlSchemaInference 类。这是一个单元测试来演示：

```
using System.Xml;
using System.Xml.Schema;

[TestMethod]
public void GenerateXsdFromXmlTest()
{
    string folder = @"C:\mydir\mydata\xmlToCSharp";
    XmlReader reader = XmlReader.Create(folder + "\some_xml.xml");
    XmlSchemaSet schemaSet = new XmlSchemaSet();
    XmlSchemaInference schema = new XmlSchemaInference();

    schemaSet = schema.InferSchema(reader);

    foreach (XmlSchema s in schemaSet.Schemas())
    {
        XmlWriter xsdFile = new XmlTextWriter(folder + "\some_xsd.xsd", System.Text.Encoding.UTF8);
        s.Write(xsdFile);
        xsdFile.Close();
    }
}

// now from the visual studio command line type: xsd some_xsd.xsd /classes 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-11-17T05:20:35.707

您只需将 Cars 汽车属性的一个属性从 XmlArrayItem 更改为 XmlElment。也就是说，从

```
[System.Xml.Serialization.XmlRootAttribute("Cars", Namespace = "", IsNullable = false)]
public class Cars
{
    [XmlArrayItem(typeof(Car))]
    public Car[] Car { get; set; }
} 
```

到

```
[System.Xml.Serialization.XmlRootAttribute("Cars", Namespace = "", IsNullable = false)]
public class Cars
{
    [XmlElement("Car")]
    public Car[] Car { get; set; }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-08-09T11:05:00.227

我的解决方案：

1.  用于`Edit > Past Special > Paste XML As Classes`获取代码中的类
2.  尝试这样的事情：创建该类 ( `List<class1`>) 的列表，然后使用 将该`XmlSerializer`列表序列化为`xml`文件。
3.  现在您只需用您的数据替换该文件的正文并尝试使用`deserialize`它。

代码：

```
StreamReader sr = new StreamReader(@"C:\Users\duongngh\Desktop\Newfolder\abc.txt");
XmlSerializer xml = new XmlSerializer(typeof(Class1[]));
var a = xml.Deserialize(sr);
sr.Close(); 
```

注意：您必须注意根名称，不要更改它。我的是“ArrayOfClass1”

# msbuild - 如何从命令行为智能设备 cab 项目创建 inf 文件？

> ID：364256
> 
> 赞同：7
> 
> 时间：2008-12-12T21:51:39.483
> 
> 标签：msbuild, cab, cabwiz, smart-device

我正在尝试让我的持续集成从命令行的 msbuild 中创建构建智能设备 cab 项目。我发现的所有内容都说使用从 Visual Studio 中构建项目时创建的 inf 文件（带有 cabwiz）。有没有办法使用 .vddproj 文件创建 inf 以便我可以将它与 cabwiz.exe 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-28T23:54:00.590

您最好的选择是从 msbuild 任务运行 devenv.exe（或 devenv.com），或者窃取 Visual Studio 生成的 INF 并使用它从 msbuild 任务运行 cabwiz.exe。

MVP 讨论：[http ://social.microsoft.com/Forums/en-US/csharpide/thread/a3caae81-fd79-45a9-ac38-f471e30e5b2a](http://social.microsoft.com/Forums/en-US/csharpide/thread/a3caae81-fd79-45a9-ac38-f471e30e5b2a)

CabWiz.exe：http: [//msdn.microsoft.com/en-us/library/aa924359.aspx](http://msdn.microsoft.com/en-us/library/aa924359.aspx)

INF 参考：http: [//msdn.microsoft.com/en-us/library/aa924371.aspx](http://msdn.microsoft.com/en-us/library/aa924371.aspx)

示例： [http :](http://blog.opennetcf.com/ctacke/2008/09/18/AutomatingCABFileGenerationWithMSBUILD.aspx) [//blog.enterprisemobile.com/2008/07/automating-build-versioning-and-publishing-smart-device-projects-with-team-foundation-build/ http://blog.opennetcf.com/](http://blog.enterprisemobile.com/2008/07/automating-build-versioning-and-publishing-smart-device-projects-with-team-foundation-build/) [ctacke/2008/09/18/AutomatingCABFileGenerationWithMSBUILD.aspx](http://blog.opennetcf.com/ctacke/2008/09/18/AutomatingCABFileGenerationWithMSBUILD.aspx) [http://guystarbuck.blogspot.com/2006/08/automate-build-of-windows-moble-cab.html](http://guystarbuck.blogspot.com/2006/08/automate-build-of-windows-moble-cab.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T14:45:34.993

如何将“智能设备 CAB 项目”添加到您的解决方案（在 Visual Studio 2005 和 2008 中可用）？这些项目从解决方案中其他项目的输出构建 .inf 文件并生成“cabwiz.exe”以生成最终的 cab。

我个人使用 NAnt 而不是 MSBuild，并且更喜欢手动编辑我的 inf 文件（不经常更改），但 CAB 项目似乎是使用 MSBuild 的解决方案的方式。

PS：如果您的 cab 需要将注册表 dword 设置为 -1 (0xffffffff)，请小心：众所周知，cabwiz 有一个讨厌的错误。

PS2：另请注意this [other post](https://stackoverflow.com/questions/483836/creating-inf-file-from-command-line-using-msbuild)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-12-12T22:41:25.513

您是在问如何创建 cab 文件或如何将其包含在您的项目中？您可以创建[inf](http://www.sundialsoft.freeserve.co.uk/cabinfo.htm)然后将[命令行](http://msdn.microsoft.com/en-us/library/aa924359.aspx)添加到构建后事件。

# function - 对于良好的例行程序来说，最重要的单一特征是什么？

> ID：364259
> 
> 赞同：3
> 
> 时间：2008-12-12T21:52:47.127
> 
> 标签：function, methods, procedures, routines

例程、过程、方法——无论你怎么称呼它们，它们都是我们开发人员的重要组成部分。你认为哪一个特征是*最重要*的？

（通过为每个答案提供一个特征，可以单独为他们投票。即这个问题的目的不是决定挑选出一个特征，而是突出**所有**重要的特征。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-12T21:55:07.247

我认为最重要的标准是它有一个单一的目的。

在那之后，它正确地满足了那个目的（并且只有那个目的）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-12T21:55:06.043

自注释过程名称。

示例：GetStoreFromAddress GetCarsByMake

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-12T21:55:24.560

它应该很容易进行单元测试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-12T21:56:42.437

例程的名称与其功能一一对应。

令人惊讶的是，函数 X 执行 X 和 Y 的频率，或者 X 的大部分而不是 X 的全部。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-12T22:01:47.123

没有一个单一*的*标准可以区分一个好的例程和一个坏的例程。

*标准*包括：

*   概念完整性：它做了可以用简单的简短形式、一句话或段落来描述的事情；
*   松耦合：它的行为对其周围的代码中发生的事情不敏感；
*   合理的规模：长例程更难阅读和理解，并且不太可能具有良好的概念完整性；
*   Parnas 的标准：他们“隐藏”了一件可以改变的事情，因此需求变化对系统其余部分的影响有限。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-12T21:55:46.543

设计为易于人类阅读和理解 - 没有它，很难修改它以拥有将在此处列出的所有其他精彩属性

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-12T21:56:01.720

它尝试做的事情的数量。

如果这不完全是 1，那么您可能有问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-15T15:56:54.233

它不应该有意想不到的副作用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-12-12T21:57:52.090

良好的错误处理（可靠性）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-07T14:47:18.107

简洁

（这应该是一个半有趣的答案，但所以不会让自己发布一个词！）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-12T21:53:53.520

它必须是原子的

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-12T21:54:49.180

代码行。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-12T21:56:53.437

您应该跟踪例程投入使用后所需的编辑次数。一个“好”的例程是一个几乎不需要编辑的例程。当需要进行大量修复时，“糟糕”的例程肯定会证明自己如此。

这可以通过在每次编辑后更新的每个方法调用上的注释标题轻松完成。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-12T21:58:10.610

它做一件事或将多件事委托给其他功能

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-12T21:59:08.097

清晰 - 易于理解

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-12-12T22:00:50.307

如果您将例程视为 API 的一部分，我认为这更容易回答。没有多少例程是独立的，至少在真正有用的系统中没有。老实说，我认为编写例程时要考虑的最重要的事情是：

1.  **直观**性 我的指令集有多直观——人们是否能够理解其目的而无需翻阅大量文档？

2.  **正交**性 我的例程有多正交？每个人都完成一项特定的任务，还是有多种（但略有不同）的方式来做同样的事情？如果有，那就不好了，API 可能需要重新设计。

3.  **紧凑性**完成简单任务需要多少 API？我是否需要学习很多东西才能完成某件事，或者我可以只用几个直观而强大的例程就足够了吗？您需要权衡这个与正交性的权衡，以便为您的特定领域取得良好的平衡。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-12-12T22:01:17.233

从例程名称中，您可以说出例程的作用（当您检查代码时，您会意识到您是对的 ;-)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-12-12T22:16:21.993

该例程始终使用一致的抽象级别。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-12-15T15:59:46.897

我会说有据可查（并实际执行）的前后条件。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-01-07T14:53:22.837

单个返回点

# sql - 什么是 ERP 的最佳默认事务隔离级别（如果有）？

> ID：364265
> 
> 赞同：14
> 
> 时间：2008-12-12T21:54:45.390
> 
> 标签：sql, database, database-design, transactions

简短背景：我们刚刚开始使用 Hibernate 将 ERP 系统迁移/重新实现到 Java，目标是使用该系统的并发用户数为 50-100 个用户。我们使用 MS SQL Server 作为数据库服务器，对于这种负载来说已经足够了。

现在，旧系统根本不使用任何事务，并且依赖于关键部分（例如库存更改）设置手动锁定（使用标志）并释放它们。这类似于手动事务管理。但有时会出现数据不一致的问题。在新系统中，我们希望使用事务来消除这些问题。

现在的问题是：考虑到大约 85% 的 OLTP 和 15% 的 OLAP 的使用情况，对于 ERP 系统使用什么好的/合理的**默认事务隔离级别？**还是我应该始终根据每个任务决定使用哪个事务级别？

提醒一下，四个事务隔离级别：READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ、SERIALIZABLE

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-12T22:12:02.250

100 次中有 99 次，读取已提交是正确答案。这可确保您只看到其他会话已提交的更改（因此，假设您正确设计了事务，结果是一致的）。但它不会强加可重复读取或可序列化强加的锁定开销（尤其是在非 Oracle 数据库中）。

偶尔，您可能想要运行一个报告，在该报告中您愿意牺牲准确性来换取速度并设置读取未提交的隔离级别。这很少是一个好主意，但它有时是一个合理可接受的解决方法来锁定争用问题。

当您有一个进程需要在整个运行过程中查看一致的数据集时，偶尔会使用可序列化和可重复读取，而不管当时其他事务正在做什么。将月末对账流程设置为可序列化可能是合适的，例如，如果有很多程序代码，用户可能会在流程运行时进行更改，以及流程需要确保它始终看到协调开始时存在的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-12T22:07:32.820

不要忘记 SNAPSHOT，它位于 SERIALIZABLE 的正下方。

这取决于报告中数据准确的重要性。这真的是一个任务一个任务的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-12T22:36:40.140

这在很大程度上取决于您如何设计应用程序，简单的答案就是在 READ_COMMITTED 运行。

您可以提出一个论点，即如果您在设计系统时牢记它，您可以使用 READ_UNCOMMITTED 作为默认值，并且仅在需要时增加隔离级别。无论如何，您的绝大多数事务都会成功，因此读取未提交的数据不会有什么大不了的。

隔离级别影响查询的方式取决于您的目标数据库。例如，Sybase 和 MSSQL 等数据库在运行 READ_COMMITTED 时必须锁定比 Oracle 等数据库更多的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T22:06:15.803

对于 SQL Server（可能是大多数主要的 RDBMS），我会坚持使用默认值。对于 SQL Server，这是 READ COMMITTED。再多一点，你就会开始对数据库负担过重，少一点，你就会遇到一致性问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-14T20:44:37.020

Read Uncommitted 绝对是大多数论坛中的弱者。然而，使用它的理由超出了经常被指出的“速度与准确性”的问题。

假设您有：

*   事务 T1：写入 B，读取 A，（更多工作），提交。
*   事务 T2：写入 A，读取 B，（更多工作），提交。

提交读后，上述事务在提交之前不会释放。然后你会遇到这样的情况，T1 正在等待 T2 释放 A，而 T2 正在等待 T1 释放 B。这里两个事务在锁中发生冲突。

您可以重新编写这些程序来避免这种情况（例如：总是按字母顺序获取资源！）。尽管如此，由于并发用户过多和数万行代码，这个问题可能变得非常可能而且非常难以诊断和解决。

另一种方法是使用未提交的读取。然后你设计你的事务，假设可能有脏读。我个人认为这个问题比联锁的火车残骸更加局部化和可治疗。

脏读的问题可以被抢占

*   (1) 回滚：不要。这应该是硬件故障、网络故障或程序崩溃的最后一道防线。

*   (2) 使用应用程序锁来创建在更高抽象级别上运行的锁定机制，其中每个锁都更接近于现实世界的资源或动作。

# mysql - 免费的 MySQL 同步工具

> ID：364291
> 
> 赞同：10
> 
> 时间：2008-12-12T21:59:20.187
> 
> 标签：mysql, synchronization

有人知道像[Navicat](http://mysql.navicat.com/) for Windows 中用于同步 MySQL 数据库（数据和结构）的免费工具吗？

* * *

我正在使用结构和数据同步。有时数据传输。我只是想知道是否没有这样的免费软件。只找到 HeidiSQL（看起来很完美，但效果更差）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-12-03T10:10:47.210

[MySQL Workbench Beta](http://wb.mysql.com/)完美地做到了这一点，而且现在是免费的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T06:21:40.837

您可以尝试**使用 dbForge Studio for MySQL** 来同步 mysql 数据库。此工具提供了许多帮助您进行 mysql 同步的功能：

*   MySQL 同步工具可让您快速比较 MySQL 架构和数据
*   查看差异、应用组和过滤器
*   应用多于一种同步方式可供选择
*   由开发人员为开发人员和 DBA 创建的经过良好测试的功能

在[dbForge Studio 试用版](http://www.devart.com/dbforge/mysql/studio/database-synchronization.html)中可以免费使用 MySQL 同步工具 30 天。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-12T22:23:45.113

如果您只想同步，MySQL 复制是否适合您？

[http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-12T22:27:14.170

Percona Toolkit（以前的 Maatkit）有一个用于此的工具....

[https://www.percona.com/doc/percona-toolkit/2.2/pt-table-sync.html](https://www.percona.com/doc/percona-toolkit/2.2/pt-table-sync.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-04-08T22:39:04.630

您应该使用 MySQL Workbench。它具有同步功能，这很棒。我使用 2 个不同的服务器（开发和产品），当然还有 EER 模型。我将模型与开发数据库同步，然后将 prod 数据库与我的模型同步。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T21:27:28.347

[Toad for MySQL](http://www.quest.com/toad-for-mysql/)具有同步功能并且是免费的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-12T22:23:22.307

你需要 Navicat 的什么功能？没有该软件有很多方法可以同步 mysql。您可以使用 MySQL 复制功能或简单地复制和粘贴数据文件（如果您使用 MyISAM 表，它只是一个直接副本）innoDB 表有点棘手。

# sql - SQL Server 2005 - 选择前 N 个加“其他”

> ID：364292
> 
> 赞同：1
> 
> 时间：2008-12-12T21:59:25.630
> 
> 标签：sql, sql-server

我有一个表，我想在 A 列的前 5 行中选择它。我还想要第 6 行标题为“其他”，它将 A 列中除前 5 行之外的所有值相加。

是否有捷径可寻？我开始：

```
select top 5 
    columnB, columnA 
from 
    someTable t
order by
    columnA desc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T22:04:00.363

未经测试，但尝试这样的事情：

```
select * from (
    select top 5 
        columnB, columnA 
    from 
        someTable t
    order by
        columnA desc
    union all
    select 
        null, sum(columnA) 
    from 
        someTable t
    where primaryKey not in   (
        select top 5 
            primaryKey
        from 
            someTable t
        order by
            columnA desc
    )  
) a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T22:17:50.303

```
select top 5 columnB, columnA
from someTable 
order by columnA desc

select SUM(columnA) as Total
from someTable 
```

在客户端做减法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T23:06:03.873

100% 未经测试，而且在我的脑海中，但你可以试试这样的东西。如果今晚我有机会测试，我会更新帖子，但是晚餐有一瓶酒，现在是星期五晚上...... :)

```
WITH CTE AS
     (
     SELECT
          ColumnB,
          ColumnA,
          ROW_NUMBER() OVER (ORDER BY ColumnB) AS RowNumber
     FROM
          dbo.SomeTable
     )
 SELECT
      CASE WHEN RowNumber <= 5 THEN ColumnB ELSE 'Other' END AS ColumnB,
      SUM(ColumnA) AS ColumnA
 FROM
      CTE
 GROUP BY
      CASE WHEN RowNumber <= 5 THEN ColumnB ELSE 'Other' END
 ORDER BY
      MIN(RowNumber) 
```

编辑：看起来这在几个愚蠢的语法错误之后有效。我已经更正了这些，所以它现在应该像上面列出的那样工作。虽然我不能谈论大型数据集的性能，但值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T22:06:26.723

这不是我的想法，我会保证非常高效：

```
SELECT TOP 5 columnB, columnA
FROM comTable t
ORDER BY columnA desc

UNION

SELECT 'Other', (A.Sum - B.Sum) AS Summary
FROM (SELECT SUM(columnA) FROM someTable) A
JOIN (SELECT SUM(One) FROM 
    (SELECT TOP 5 columnA FROM someTable ORDER BY columnA DESC)) B 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-12T22:11:08.837

我最近经常使用 EXCEPT statemnet：（未测试但我试一试）

```
select top 5 
    columnB, columnA 
from 
    someTable t
order by
    columnA desc
UNION ALL
SELECT 'OTHER' ColumnB, SUM(ColumnA)
FROM
(SELECT ColumnB, ColumnA 
FROM someTable t
EXCEPT
select top 5 
    columnB, columnA 
from 
    someTable t
order by
    columnA desc
) others 
```

# c# - System.Addin & ClickOnce

> ID：364295
> 
> 赞同：2
> 
> 时间：2008-12-12T22:00:45.533
> 
> 标签：c#, clickonce, system.addin

使用带有 ClickOnce 的 System.Addins API 时，我有一个烦人的构建过程。使用 System.Addins 需要特定的目录结构，并且主项目不直接引用适配器、视图和合同，这与 ClickOnce 架构不能很好地配合。

构建过程令人讨厌的部分是我必须通过构建后事件将加载项组件中的 .dll 复制到主应用程序项目的目录中，然后从主项目手动引用这些文件，以便 ClickOnce将包括他们。首先，这需要 2 次构建迭代才能正确构建，其次，它会干扰源代码管理（我必须从源代码管理中排除复制的加载项 dll 文件，否则对它们所做的任何更改都需要签出）。

所以，我的问题是，有没有办法绕过这个黑客？更优雅的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-30T14:34:59.657

我无法完全回答您的问题，但您似乎正在通过 Visual Studio 创建 ClickOnce 部署。我会放弃该方法并改用[MageUI](http://msdn.microsoft.com/en-us/library/xc3tc5xx(VS.80).aspx)。它是一个独立的可执行文件，可以在框架 SDK 中找到，它将生成您的应用程序和部署清单文件。它带有一个 gui 版本 (mageui.exe) 和一个命令行版本 (mage.exe)。

Mage 可能不会摆脱您的构建后事件，但它应该消除必须引用文件才能让 ClickOnce 看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T23:07:47.707

感谢您的意见，我目前正在按照您提到的方式进行操作；在我的项目中创建文件夹，并包含我需要的 dll。它有效，但它是一个丑陋的解决方案，它会干扰源代码控制。

我知道 ClickOnce 的局限性，我希望有办法解决它。例如，我在某处读到我可以使用部署项目来创建特定结构所需的适当依赖项。问题在于，一旦将其部署到公众，就没有简单的方法（在 ClickOnce 中）来更新这些依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-27T10:32:47.943

我使用的解决方案是为所有项目提供一个输出文件夹。每个项目都将它自己的文件放在正确的子文件夹中。应用程序引导程序项目也将他的 dll 放在输出（根）文件夹中。然后，当您为引导程序创建一个可点击的内容时，它将从输出文件夹中获取所有内容。

最困难的部分是实际上将所有 dll 放在正确的位置（并且每个 dll 只有一次）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-27T17:35:16.967

我通过将管道程序集作为内容添加到主要解决方案结构中来解决了这个问题。

为此，请将输出文件夹从 (/bin/debug /bin/Release) 更改为其他文件夹。我使用了 ../lib 否则你会得到一个 Visual Studio 无法引用此文件错误。

在主解决方案中创建管道文件夹

*   \AddInSideAdapters
*   \AddInViews
*   \合同
*   \HostSideAdapters

右键单击每个文件夹，然后单击“添加现有项目”更改以查看所有文件，然后浏览到您的 ../lib（或您有输出集的任何位置），然后下拉添加按钮（单击向下箭头）并单击“添加为链接”。

右键单击每个文件并将其设置为内容。

这将创建一个指向您的程序集的刷新文件，它们将包含在 clickonce 清单中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-12T22:06:19.330

ClickOnce 不允许您将软件安装到您想要的位置。它将在文档和设置中安装二进制文件和 dll。您可以在项目属性中的“发布”选项卡中选择“应用程序文件”以选择要包含的其他文件。如果 System.Addings 需要相对于您的程序集的特定文件夹中的 dll，您可能只需在项目中创建该文件夹并从此处包含 dll。这可能有效。如果没有，我没有“hack”或其他解决方案，clickonce 很棒，但某些功能有限。

# windows - 确定 Windows Mobile 下的默认消息存储

> ID：364300
> 
> 赞同：2
> 
> 时间：2008-12-12T22:01:32.397
> 
> 标签：windows, mobile, mapi

以下一段测试代码在 Windows Mobile 下*运行。*

它的目标是寻找默认的消息存储，以便我可以获得正确的帐户名称，以便以编程方式编译电子邮件。

```
IMAPISession *mapiSession;
HRESULT hr = S_OK;

MAPIInitialize (NULL);
IMAPITable *msgTable;

SRowSet *pRows;
IMsgStore *msgStore;

if (MAPILogonEx(0,NULL,NULL,0,&mapiSession) != S_OK)
{
//  MessageBox(g_hWnd,_T("Failed to logon"),_T("Error"),0);
}
else
{
SizedSPropTagArray(3, PropTagArr) = {3,{PR_DISPLAY_NAME, 
                        PR_ENTRYID,
                        PR_DEFAULT_STORE}};

    hr = mapiSession->GetMsgStoresTable(MAPI_UNICODE,&msgTable);

    hr = msgTable->SetColumns((LPSPropTagArray)&PropTagArr, 0);

    if (!hr)
    {
        do
        {
            hr = msgTable->QueryRows(1,0,&pRows);

            LPSPropValue lpProp;
            lpProp = &pRows->aRow[0].lpProps[0];

//          if(_tcscmp( lpProp->Value.LPSZ, _T("SMS") ) == 0 )
//              break;

            lpProp = &pRows->aRow[0].lpProps[0];
            if (lpProp->ulPropTag == PR_DEFAULT_STORE)
                break;

            lpProp = &pRows->aRow[0].lpProps[1];
            if (lpProp->ulPropTag == PR_DEFAULT_STORE)
                break;

            lpProp = &pRows->aRow[0].lpProps[2];
            if (lpProp->ulPropTag == PR_DEFAULT_STORE)
                break;

            FreeProws(pRows);
            pRows = NULL;

        }while (!hr);

    hr = mapiSession->OpenMsgStore (0, 
            pRows->aRow[0].lpProps[1].Value.bin.cb, 
            (ENTRYID*)pRows->aRow[0].lpProps[1].Value.bin.lpb, 
            NULL, 
            MDB_NO_DIALOG | MAPI_BEST_ACCESS, 
            &msgStore); 
```

**`PR_DEFAULT_STORE`**...但是，无法在 Windows Mobile 设备上获取该属性。我猜微软没有准确地实现它。所以，`lpProp->ulPropTag`永远**不会** `== PR_DEFAULT_STORE`。它始终是 0000。

有没有人在 Windows Mobile 下使用 MAPI 成功获得 PR_DEFAULT_STORE？

还有*另一种*确定默认消息存储的方法吗？

# regex - Solr：使用正则表达式分段器提取段落

> ID：364301
> 
> 赞同：2
> 
> 时间：2008-12-12T22:01:41.337
> 
> 标签：regex, solr, highlighting

我将此消息发布到 Solr 邮件列表，但我也在此处尝试，以防附近有 Solr 专家潜伏。

我正在尝试使用正则表达式分段器并且很难获得我想要的结果。我正在尝试获取以单词字符开头并以标点符号结尾的片段，但由于某种原因，返回给我的片段似乎非常不灵活，尽管我已经提供了很大的斜率。以下是我正在使用的相关参数，也许有人可以帮助指出我哪里出错了：

```
<str name="hl.fragsize">500</str>
<str name="hl.fragmenter">regex</str>
<str name="hl.regex.slop">0.8</str>
<str name="hl.regex.pattern">[\w].*{400,600}[.!?]</str>
<str name="hl">true</str>
<str name="q">chinese</str> 
```

这应该匹配 400-600 个字符，以单词字符开头并以 .!? 之一结尾。以下是典型结果的示例：

> . 检查这些图片。周四，九只熊猫幼崽在中国西南地区首次展出。他们还不到一岁。他们最近才停止哺乳。中国中部山区森林里只剩下1600只这些家伙，中国的繁育设施和动物园里还有120只。他们大约有 20 岁，住在中国以外的动物园里。它们几乎完全存在于竹子上。他们可以活到30岁。这些小家伙最终会变得更大。他们会成长

如您所见，它以句点开头并以单词字符结尾！就好像片段只是按原样出现，而正则表达式根本没有做任何事情，但是当我使用间隙片段器时结果会有所不同。在上面的结果中，我看不出有什么理由不应该去掉前面的句号和最后两个词，在 slop 和正则表达式模式中有足够的空间。请帮我弄清楚我做错了什么......

非常感谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T22:15:42.040

尝试：

```
\w[^\.!\?]{400,600}[\.!\?] 
```

你不应该需要第一个方括号`\w`

你应该避开最后一个点。

而且我认为`.*`在另一个量词 ( `{400,600}`) 之前不是一个好主意，因此`.{400,600}`

由于`?`是正则表达式中的特殊字符，您也应该对其进行转义。

因为`.`匹配任何东西，你应该使用`[^\.!\?]`它来匹配除了*你*的结尾字符之外的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T12:55:24.433

我从未听说过您正在使用的工具（Solr），但是您的正则表达式中的量词肯定是错误的。此正则表达式将匹配 402 到 602 个字符，其中第一个是单词字符，最后一个是三个标点字符之一：

```
\w.{400,600}[.!?] 
```

点和问号不是字符类中的元字符，因此转义它们没有意义。\w 可以独立存在。

由于点也匹配 3 个标点字符，因此您的正则表达式将匹配尽可能多的字符（最多 602 个），然后返回以确保最后一个是您的 3 个标点字符之一。

如果您想优先考虑较短的运行，请使用惰性量词：

```
\w.{400,600}?[.!?] 
```

如果您希望您的正则表达式仅匹配一个句子，请使用否定字符类：

```
\w[^.!?]{400,600}[.!?] 
```

以上所有假设 Solr 使用 Perl 风格的正则表达式。像 \w 和 {400,600} 这样的东西并不适用于所有正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-28T08:58:46.787

如果您使用的是`WordDelimiterFilterFactory`. 此处描述了该问题[http://www.mail-archive.com/solr-user@lucene.apache.org/msg30631.html](http://www.mail-archive.com/solr-user@lucene.apache.org/msg30631.html)

如上面链接中所述，一种解决方案可能是添加`preserveOriginal="1"`到您的`WordDelimiterFilterFactory`. 我试过这个，它对我有用。但是，（对 SOLR 来说是新手）我不知道这种方法是否有任何缺点（除了增加索引大小）。

# facebook - 什么是向 iGoogle、Facebook 和 MySpace 等许多网站添加内容片段（小部件）的好资源

> ID：364308
> 
> 赞同：-1
> 
> 时间：2008-12-12T22:02:54.703
> 
> 标签：facebook, widget, myspace, igoogle

我找到了诸如 ClearSpring 和 Widgetbox 之类的服务，用于将内容片段放到一系列社交网站的小部件上，但我想构建自己的小部件，而不需要第三方依赖。我一直在寻找，但我还没有找到一个好的资源来学习如何为多个站点创建小部件/小工具。为 iGoogle 构建一个小工具很容易，但 Facebook、MySpace 和其他公司就不那么明显了。

为多个网站创建内容片段的好资源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-03-16T22:47:20.743

它实际上不仅仅是不同的标准。不同网络的上下文使得映射 1 到 1 变得更加困难。当然存在重叠，但每个网络之间的差异很大。

它管理增量是困难的部分，而不是学习不同的语法。

在移动领域，很少有产品，如 OpenFeint 和 PhoneGap。

大多数开发人员倾向于推出自己的框架，因为它是如此不稳定的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T22:08:41.633

似乎他们在两个阵营趋同：-FaceBook-其他所有人（使用 OpenSocial）

您的 iGoogle 小部件是 OpenSocial，因此几乎可以在 MySpace 和其他平台上使用它。现在去 Facebook 覆盖所有。

# asp.net - ASP.net IHttpHandler 执行 .aspx 文件

> ID：364318
> 
> 赞同：1
> 
> 时间：2008-12-12T22:06:31.403
> 
> 标签：asp.net, ihttphandler

使 IHttpHandler 让现有的 .aspx 页面处理请求的正确方法是什么？我希望能够将 .aspx 文件编译成 IHttpHandler，然后让它处理请求。有 PageParser.GetCompiledPageInstance 方法，但是在文档中它声明它不能直接从代码中使用。我知道我可以将 apsx 文件自动定向到或执行 RewritePath，但是我希望对象引用到处理程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T22:18:07.917

这是一种快速且肮脏的方法：

```
var virtualPath = "~/foo/bar.aspx"
var output = HttpContext.Current.Response.Output;

// Get the compiled page type (i.e. foo_bar_aspx)
Type controlType = BuildManager.GetCompiledType(virtualPath);

// "new()" it up
var pageInstance = Activator.CreateInstance(controlType);

// Execute it
HttpContext.Current.Server.Execute(pageInstance, output, true); 
```

# php - 你能推荐一个好的php甘特图开发吗？

> ID：364322
> 
> 赞同：0
> 
> 时间：2008-12-12T22:08:40.573
> 
> 标签：php

我想在我的开发中添加一个简单的甘特图，想知道你是否可以推荐任何对你来说看起来不错的东西。我不需要任何真正的闪光（我不是想重现 MS Project）只需要在 24/7 的时间范围内绘制一些项目。非常感谢您的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T22:12:49.377

[JpGraph](http://www.aditus.nu/jpgraph/features.php)摇滚。它有一个甘特图模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-17T13:41:15.557

嗨，有一个名为 jSGantt 的好控件，纯粹用 javascript、CSS、HTML 编写，可以与任何语言集成 这里有基于 ASP.net 语言的好教程[CodeGlobe](http://codeglobe.blogspot.com/2009/04/creating-gantt-chart-in-aspnet.html)

或者你可以看看 jsGantt 网站有一个基于你首选语言 PHP 的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-26T02:03:58.357

[fusionchart](http://www.fusioncharts.com/free/)（免费版）可以替代，因为它使用的是 Flash，所以看起来更具交互性

# python - python的基于标记的GUI

> ID：364327
> 
> 赞同：6
> 
> 时间：2008-12-12T22:10:08.930
> 
> 标签：python, user-interface, markup

我想让自己编写一些严肃的基于 GUI 的应用程序，但是当我从 Java 中查看诸如 Swing/SWT 之类的东西时，我不禁讨厌通过创建“小部件”对象并填充它们并调用方法来编写 GUI 界面他们。

我认为 GUI 设计应该以某种标记格式在一个单独的基于文本的文件中完成，该文件被读取和呈现（例如 HTML），这样界面的设计就不会与其余代码紧密耦合。

我见过[HTMLayout](http://www.terrainformatica.com/htmlayout/)并且我喜欢这个想法，但到目前为止它似乎只在 C++ 中。

我正在寻找一个 python 库（甚至是 WIP 项目）来做基于标记的 gui。

**更新**

我不能接受 QT 的 xml 的原因与我讨厌编程方法的原因是一样的；您正在分别组装每个小部件，并在单独的行上指定它的每个属性。与以编程方式执行此操作相比，它没有提供任何优势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-20T14:18:21.090

你可以试试 Mozilla 的 XUL。它通过 XPCOM 支持 Python。

看到这个项目：[pyxpcomext](http://pyxpcomext.mozdev.org/no_wrap/tutorials/pyxulrunner/python_xulrunner_about.html)

XUL 没有被编译，它是在运行时打包和加载的。Firefox 和许多其他优秀的应用程序都使用它，但其中大多数使用 Javascript 来编写脚本而不是 Python。不过，有一两个使用 Python。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-12T22:15:19.170

您应该研究 Qt，您可以使用出色的 PyQt 接口从 Python 中使用它（为什么他们没有将其命名为 QtPy --- cutiepie，明白了吗？---我永远不会明白）。

使用 Qt，您可以选择以编程方式构建您的 GUI（您不希望这样做），或者使用 XML 标记。该 XML 文件既可以预先编译为代码，也可以使用短命令加载。后者是使用 PyQt 的正常工作方式。

Qt 是通用的、高质量的、跨平​​台的，您很可能已经在不知不觉中使用它。如果我没记错的话，官方的 Skype 客户端应用程序是用 Qt 编写的。

**编辑：**只需添加一些链接，以便 OP 获得一些感觉......

*   [使用 C++ 进行 Qt 编程的简短介绍](http://sector.ynet.sk/qt4-tutorial/my-first-qt-gui-application.html)——注意 Qt Designer 的使用，它输出 .ui 文件，这是一种 XML 格式，我记得它也很容易手动使用。PyQt 编程非常相似，除了当然是更简单的编程语言:-)
*   [Python wiki 上有关 PyQt 的信息](http://wiki.python.org/moin/PyQt4)
*   [PyQt 编程在线书籍](http://www.commandprompt.com/community/pyqt/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-12T22:36:16.977

wxPython怎么样？我刚刚开始使用它，但是有一个工具——XRC 资源编辑器——它允许您组装您的 GUI，然后将其写入 XML 文件。据我了解，您的 Python 应用程序会加载 XML 文件，而不是将一大堆 GUI 布局代码与您的 Python 代码混合在一起。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T15:26:43.623

如果您选择像 Tcl 或 Python 和 Tk 这样的语言来进行应用程序开发，那么编写自己的 DSL 来描述接口变得相当简单。例如，您可以编写一个 DSL 来创建这样的菜单：

```
menubar {
    File => {
        Open => cmd.open
        Save => cmd.save
        Exit => cmd.exit
    }
    Edit => {
        Cut => cmd.cut
        Copy => cmd.copy
        Paste => cmd.paste
    }
} 
```

...和您的主要 GUI 形式如下：

```
form PropertiesForm {
          Font: [fontchooser]
    Foreground: [foregroundChooser]
    Background: [backgroundChooser]
}
form NewUserForm {
    username [_____________________]
    [] administrator
    enable the following features:
    () feature 1
    () feature 2
    () feature 3
}
notebook {
   Properties => PropertiesForm
   New User => NewUserForm
} 
```

... 等等。Tcl 真的很擅长让你编写这样的 DSL。请注意，Tcl 本身并未内置此功能，但该语言使 DSL 变得微不足道。Tcler 的 wiki 上存在一些这类东西，例如，有一些代码可以创建类似于我在[Menus Made Easy](http://wiki.tcl.tk/827)中描述的菜单。

不过，我认为，一段时间后你会发现以这种方式制作专业级 UI 真的非常困难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-12T22:38:32.040

如果您使用[GTK](http://www.pygtk.org/)，则可以使用[Glade](http://glade.gnome.org/)，它是一个 XML 文件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-12T22:14:46.223

它是 XML，不是 Python，但看看[Open Laszlo](http://www.openlaszlo.org/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2008-12-12T22:23:33.087

视窗？

您可以在 Visual Studio 中使用 WinForms 编辑器，然后从 IronPython 与程序集对话。

# c# - 拒绝访问路径“c:\ApplicationFolder”

> ID：364336
> 
> 赞同：3
> 
> 时间：2008-12-12T22:13:04.463
> 
> 标签：c#, .net, winforms

我在远程 Windows 客户端上遇到一个奇怪的错误（使用 C# 2.0 的 WinForm 应用程序）

错误消息：对路径“c:\ApplicationFolder”的访问被拒绝。

堆栈跟踪：在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options , SECURITY_ATTRIBUTES secAttrs, 字符串 msgPath, 布尔 bFromProxy)

让我说我知道我不应该将应用程序文件夹直接放在 c:\ 文件夹之外。这是一个我无法控制的旧应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-12T22:18:20.273

这可能归结为您不应该将应用程序文件夹放在那里的*原因*：标准用户默认没有写入权限。由于大多数人以管理员身份运行 Windows，这通常不是问题，但如果您尝试在最近更新了安全策略的公司环境中安装，您会突然遇到严重问题。

你检查过文件夹的权限吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-31T22:00:09.727

您可能正在尝试对只读文件进行写访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-12T22:37:23.197

一个问题，一个建议。

消息中报告的文件路径是否与文件夹的名称*完全*匹配 - 字母大小写、空格、下划线、重音符号等等？

为什么？我见过一些奇怪的案例，这会导致问题。

建议：使用[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)（来自 SysInternals，现在是 Microsoft 的一部分）来监视对文件夹的访问，您将看到有关错误的更多详细信息 - 如果您看到的错误报告不准确，这尤其有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-29T21:42:10.297

同意过程监视器很有帮助，节省了我一天的几个小时。如果 Path.Combine 的参数翻转了，所以我最终尝试写入目录来代替文件。调试中没有提示，进程 mon 立即出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T06:56:06.707

在您的应用程序中创建并嵌入清单文件以获得应用程序的管理权限

```
Executable: IsUserAdmin.exe 
Manifest:IsUserAdmin.exe.manifest
Sample application manifest file:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity version="1.0.0.0"
     processorArchitecture="X86"
     name="IsUserAdmin"
     type="win32"/> 
  <description>Description of your application</description> 
  <!-- Identify the application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly> 
```

这里 requireAdministrator 说您的应用程序需要管理员权限这将在用户启动您的应用程序时导致确认对话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-31T01:56:22.137

`System.IO.FileStream.Init`听起来你正在打开一个文件，而不是一个文件夹。文件是什么？

你确定文件存在吗？它不是由另一个应用程序打开的吗？您是否正在尝试写入文件？它是锁定的还是只读的？

我们需要查看打开文件的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-12T22:35:19.503

该应用程序是否至少从配置文件/注册表/数据库表中加载“应用程序文件夹”？如果是这样，当您将该值更改为“我的文档”文件夹中的某个值时会发生什么？

我看到您添加了用户是管理员并且拥有完整的管理员权限，所以我不得不问一个显而易见的问题——该文件夹是否存在于代码认为应该存在的位置？

# asp.net - 如何创建通用 StateManagedCollection？

> ID：364347
> 
> 赞同：8
> 
> 时间：2008-12-12T22:17:48.493
> 
> 标签：asp.net, viewstate

**[此处](http://sujitmanolikar.blogspot.com/2007/07/generic-statemanagedcollection.html)**描述了一个示例。但作者显然忘记包含下载代码。

**[此处](http://blog.spontaneouspublicity.com/child-collections-in-asp-net-custom-controls)**显示了另一个示例。但是，这个不太有效（如评论中所述）。

你如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-01T02:55:35.093

您发现的**[第二个示例](http://blog.spontaneouspublicity.com/post/2007/05/Child-Collections-in-AspNet-Custom-Controls.aspx)**几乎可以正常工作，只是缺少了一点。所需要的只是主控件中的 2 种方法。

将此代码添加到`AppointmentControl.cs`文件中，它将起作用。

```
protected override object SaveViewState()
{
    if (appointments != null)
        return appointments.SaveViewState();
    return null;
}

protected override void LoadViewState(object savedState)
{
    appointments = new AppointmentCollection();
    appointments.LoadViewState(savedState);
} 
```

示例站点中的代码相当不错。它实现了它应该拥有的所有接口并且做得很好。它崩溃的地方在于，尽管在抽象位中有它需要的所有代码，但这并不重要，因为接口没有在它们需要的地方被引用。

除了实现一些接口之外，所使用的集合类没有什么“特别”之处。框架不会自动调用这些方法。然而，该框架**将**调用我在上面编写的重写方法，您需要实现这些方法以便您的控件将元素保存在集合中。只要你打电话给他们，一切都会奏效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-01T03:20:31.067

丹赫伯特明白了。该死，我也花了几个小时在这上面！在尝试回答这个问题的过程中，我想出了一个简化的通用 StateManagedCollection，它继承自框架的内置 StateManagedCollection，基于[此处](http://blog.spontaneouspublicity.com/post/2007/05/Child-Collections-in-AspNet-Custom-Controls.aspx)的版本。也许你会发现它很有用。我的示例项目的完整源代码可[在此处](http://files.tomeofwisdom.com/StateMangedExample.zip)获得。

```
using System;
using System.Collections;
using System.Collections.Specialized;
using System.Security.Permissions;
using System.Web;
using System.Collections.Generic;
using System.Web.UI;

namespace Web
{
    public abstract class StateManagedCollection<T> : StateManagedCollection, IList<T>, ICollection<T>, IEnumerable<T>
        where T : class, IStateManagedItem, new()
    {

        protected override object CreateKnownType(int index)
        {
            return Activator.CreateInstance<T>();
        }

        protected override Type[] GetKnownTypes()
        {
            return new Type[] { typeof(T) };
        }

        protected override void SetDirtyObject(object o)
        {
            ((IStateManagedItem)o).SetDirty();
        }

        #region IList<T> Members

        public int IndexOf(T item)
        {
            return ((IList)this).IndexOf(item);
        }

        public void Insert(int index, T item)
        {
            ((IList)this).Insert(index, item);
            if (((IStateManager)this).IsTrackingViewState)
            {
                this.SetDirty();
            }
        }

        public void RemoveAt(int index)
        {
            ((IList)this).RemoveAt(index);
            if (((IStateManager)this).IsTrackingViewState)
            {
                this.SetDirty();
            }
        }

        public T this[int index]
        {
            get { return (T)this[index]; }
            set { this[index] = value; }
        }

        #endregion

        #region ICollection<T> Members

        public void Add(T item)
        {
            ((IList)this).Add(item);
            this.SetDirty();
        }

        public bool Contains(T item)
        {
            return ((IList)this).Contains(item);
        }

        public void CopyTo(T[] array, int arrayIndex)
        {
            ((IList)this).CopyTo(array, arrayIndex);
        }

        public bool IsReadOnly
        {
            get { return false; }
        }

        public bool Remove(T item)
        {
            if (((IList)this).Contains(item))
            {
                ((IList)this).Remove(item);
                return true;
            }
            return false;
        }

        #endregion

        #region IEnumerable<T> Members

        IEnumerator<T> IEnumerable<T>.GetEnumerator()
        {
            throw new NotImplementedException();
        }

        #endregion

        #region IEnumerable Members

        IEnumerator IEnumerable.GetEnumerator()
        {
            return ((IList)this).GetEnumerator();

        }

        #endregion
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-18T21:56:32.983

我已经使用了上面提供的解决方案的代码，但是我得到了异常-“StackOverflow”很酷:) 通过在 aspx 页面中添加一些子项并切换到设计视图到 Visual Studio 的设计视图（Visual Studio 只是重新启动，没有人知道发生了什么......）。

```
 IEnumerator IEnumerable.GetEnumerator()
    {
        return ((IList)this).GetEnumerator();

    } 
```

所以，我想我想通了只是像这样改变上述方法的实现：

```
 IEnumerator IEnumerable.GetEnumerator()
    {
        // return ((IList)this).GetEnumerator();
        return this.GetEnumerator();

    } 
```

希望这会帮助像我这样的其他人:) 只是不要浪费几个小时来让它与 VS 的设计师合作

# xaml - 访问 xaml 文件中的 http 查询字符串

> ID：364357
> 
> 赞同：0
> 
> 时间：2008-12-12T22:21:47.877
> 
> 标签：xaml

如果对 ASP 网页发出 HTTP 请求，则 asp 代码可以通过`Request.QueryString`对象访问查询字符串。

在 XAML 中执行此操作的类似方法是什么？例如，假设我想编写一个简单的 XAML 页面，它只在响应中回显查询字符串。这个代码会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-16T05:18:50.980

由于您提到查询字符串和响应，我假设您在谈论 XBAP（即浏览器中托管的 WPF 应用程序）。

看看这篇博文：

[如何将 Querystring 参数传递给我的 WPF XBAP 应用程序？](https://learnwpf.com/post/2007/02/24/How-can-I-pass-Querystring-parameters-to-my-WPF-XBAP-Application.aspx)

一旦您将`ApplicationDeployment.CurrentDeployment.ActivationUri`值作为字符串获得，将其泵入页面上的 TextBlock 应该是相当简单的。哎呀，如果你想走那么远，你可以直接绑定到它。

# python - mod_python 上的线程代码

> ID：364358
> 
> 赞同：1
> 
> 时间：2008-12-12T22:21:53.650
> 
> 标签：python, django, multithreading, apache

我编写了一个 Django 应用程序，它使用 Python 线程来创建一个网络蜘蛛，蜘蛛作为一系列线程来检查链接。

当我使用 django 测试服务器（内置）运行这个应用程序时，应用程序运行良好，线程似乎按时启动和停止。

但是，在 Apache 上运行应用程序似乎线程没有启动和运行（大约 80 秒后应该有一个排队的数据库更新并且这些更改没有发生）。

有谁知道我在这里缺少什么？

-- 编辑：我的问题是，Apache 如何处理线程应用程序，即单个应用程序可以运行多少个线程有限制吗？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T22:51:37.163

最有可能的是，您错过了新流程的创建。Apache 不会在单个进程中运行，而是不时地为请求分叉新进程（取决于[十几个配置参数](http://httpd.apache.org/docs/2.2/mod/worker.html)）。如果您在每个进程中运行 django，它们将不共享内存，并且在一个工作人员中产生的结果对其他任何工作人员都不可见。此外，Apache 进程可能会终止（在空闲时或在特定时间后），从而丢弃您的内存结果。

# javascript - 消息：在 JavaScript 中查询 XML 时需要对象错误

> ID：364360
> 
> 赞同：0
> 
> 时间：2008-12-12T22:22:57.190
> 
> 标签：javascript

```
test[_nObjectives].pool[j].feedbackCorrect = 
oQuestions[j].getElementsByTagName("feedbackCorrect")[0].firstChild.data; 
```

在这种情况下，XML 包含以下内容：

```
 <feedbackCorrect>
  </feedbackCorrect> 
```

执行该行代码时发生以下错误：消息：需要对象

我不明白。标签在那里，如果它是空的，则会发生错误，甚至有空格字符也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T22:24:39.010

您收到错误是因为

```
oQuestions[j].getElementsByTagName("feedbackCorrect")[0] 
```

正在返回该标签，而 .firstChild 正在返回 null，因为它没有子级...

你确定你不想要

```
oQuestions[j].getElementsByTagName("feedbackCorrect")[0].data 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T22:34:29.257

但是为什么当 xml 是这样的时候它可以工作：

```
<feedbackCorrect>any value</feedbackCorrect> 
```

?

# c# - 使用 LINQ 从动态创建的表中读取

> ID：364365
> 
> 赞同：2
> 
> 时间：2008-12-12T22:23:48.123
> 
> 标签：c#, linq-to-sql

我们在运行时创建表。它们与我们的 DBML 中存在的表具有相同的模式布局，但具有备用名称。我们想在使用 Linq to Sql 的运行时设置表名。

[如https://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=4233721&SiteID=1](https://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=4233721&SiteID=1)中所述，在元数据上使用包装类非常适用于更新、删除和插入。

有谁知道我们如何让备用表的读取工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-31T19:55:28.513

您需要使用[外部映射文件](http://msdn.microsoft.com/en-us/library/bb386907.aspx)。在运行时使用表的名称填充 xml。这会覆盖基于属性的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T02:00:43.023

您需要在运行时通过 System.Linq.Expressions 更新您的 LINQ 表达式

# windows - 在 Windows 系统上移动文件的最快方法

> ID：364367
> 
> 赞同：30
> 
> 时间：2008-12-12T22:24:54.313
> 
> 标签：windows, performance, batch-file, copy-paste

我想在 Windows 系统**上将大约 800gb 的数据从 NTFS 存储设备移动到 FAT32 设备**（两者都是外部硬盘驱动器）。

实现这一目标的最佳方法是什么？

1.  简单地使用剪切粘贴？
2.  使用命令提示符？( `move`)
3.  编写一个批处理文件以在给定的时间间隔内复制一小块数据？
4.  使用一些为我完成这项工作的特定应用程序？
5.  还是有更好的主意...？

实现如此耗时的过程，最安全、最有效、最快捷的方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-12-12T22:30:17.393

[机械复制](http://en.wikipedia.org/wiki/Robocopy)

您可以重新启动命令，它会恢复。我一直在网络上使用它。也适用于大文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-12T22:25:47.887

如果可能的话，我会物理移动硬盘。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-12T22:29:58.580

我发现快速复制非常适合这种事情。它是一个 gui 工具....

[http://www.ipmsg.org/tools/fastcopy.html.en](http://www.ipmsg.org/tools/fastcopy.html.en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-12T22:31:14.707

如果必须通过网络移动它，则需要在服务器之间使用 FTP。Windows 文件系统将陷入繁琐的协议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-12T22:34:58.023

我发现[Teracopy](http://www.codesector.com/teracopy.php)非常快速和方便。据称 Fastcopy （[由 benlumley 建议](https://stackoverflow.com/questions/364367/fastest-way-to-move-files-on-a-windows-system#364378)）甚至更快，但我没有任何经验。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-12T22:47:08.497

尝试使用 WinRar 或压缩工具。大“文件”比许多小文件移动得更快。大多数压缩工具允许将存档（zip）文件拆分为多个存档。

当您打开压缩时，您甚至可以稍微减小大小。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-29T21:27:15.143

我想评论来自@hello_earth, 201510131124 的关于多线程的评论，但我在 Stackoverflow 上没有足够的声誉点（到目前为止，我主要在 Superuser 上发布）：
多线程通常**不是**将文件从一个存储设备复制到另一个存储设备时效率很高，因为顺序读取达到了最快的吞吐量，并且使用多个线程会使 HDD 嘎嘎作响并且疯狂地同时读取或写入多个文件，并且因为 HDD 一次只能访问一个文件，它必须从文件中读取或写入一个块，然后从位于不同区域的另一个文件移动到一个块，这大大减慢了进程（我不知道 SSD在这种情况下会表现）。它既低效又可能有害：当磁头在盘片上反复移动以短时间连续到达多个区域时，机械应力要高得多，而不是停留在同一个位置来解析一个大的连续文件。

我在使用 md5deep 批量检查一个充满视频文件的非常大文件夹的 MD5 校验和时发现了这一点：使用默认选项，分析是多线程的，因此 i7 6700K CPU 有 8 个线程，而且速度非常慢。然后我添加了 -j1 选项，意思是 1 个线程，它运行**得**更快，因为文件现在是按顺序读取的。

由此得出的另一个考虑是，如果文件没有碎片，传输速度将显着提高，而且，如果它们位于硬盘驱动器的开头，对应于盘片的最外层，则传输速度会更小一些，其中线速度最大（该方面与固态驱动器或其他基于闪存的设备无关）。

此外，最初的发帖人想要“以最安全、最有效和最快速的方式来实现这样一个耗时的过程”——我想说，人们必须选择一个有利于速度**/**效率**或**安全的折衷方案：如果你想要安全，你必须检查每个文件是否被完美复制（通过检查 MD5 校验和，或使用 WinMerge 之类的东西）；如果您不这样做，您将永远无法 100% 确定过程中没有一些 SNAFU（硬件或软件问题）；如果你这样做，你必须在任务上花费两倍的时间。

 **例如：我依靠一个叫做 SynchronizeIt 的小工具！出于我的文件复制目的，因为与保留所有时间戳（包括目录时间戳，就像 Robocopy 使用 /DCOPY:T 开关一样）的大多数类似工具相比，它具有巨大的优势，并且它具有简化的界面，仅包含我需要的选项. 但是我发现有些文件在复制后总是损坏，恰好在 25000 字节后被截断（例如，1GB 视频的副本有 25000 个好字节，然后是 1GB 的 00，复制过程异常快，只花了一瞬间，这首先引发了我的怀疑）。我在 2010 年第一次向作者报告了这个问题，但后来他将其归结为硬件故障，并没有多想。我仍然使用SI，但开始彻底检查文件**每次**我做了一个副本（使用 WinMerge 或 Total Commander）；当文件最终损坏时，我改用 Robocopy （使用 SynchronizeIt 损坏的文件，当它们用 Robocopy 复制，然后用 SynchronizeIt 再次复制时，被完美复制，所以它们在 NTFS 分区上的记录方式有些混乱该软件，并且 Robocopy 以某种方式修复了）。然后在 2015 年我再次报告了它，在确定了更多关于哪些文件已损坏的模式之后：它们都是通过特定的下载管理器下载的。那次笔者挖了一番，找到了解释：原来他的工具在复制文件时遇到了鲜为人知的“稀疏”属性，并且一些下载管理器设置该属性是为了在多块下载文件时节省空间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-12T22:26:16.713

命令行：xcopy 可能是你最好的选择

命令参考： http: [//www.computerhope.com/xcopyhlp.htm](http://www.computerhope.com/xcopyhlp.htm)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-14T05:40:28.950

我使用 Teracopy 并将 50+GB 复制到 128GB 闪存驱动器。
太快了 48 小时...不得不做两次，因为电源打嗝。不得不重新格式化并重新开始......不是我最喜欢做的事情......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-31T18:25:57.087

复制文件的最快方法之一是使用上述帖子中 Pyrolistical 指出的**robocopy 。**它非常灵活和强大。如果命令不能直接从您的 dos 提示符运行，请尝试使用 powershell 选项，如下例所示。

**在使用“robocopy /？”之前必须检查该命令的文档。**

```
powershell "robocopy  'Source' 'destination' /E /R:3 /W:10 /FP /MT:25 /V" 

/E - Copy subdirectory including empty ones.
/R - Retry 3 times if failed.
/W - wait for 10 seconds between retries.
/FP - include full path name in output.
/MT - Multi thread.
/V - verbose output. 
```

# javascript - 使用 Javascript 渲染数据 onload

> ID：364392
> 
> 赞同：0
> 
> 时间：2008-12-12T22:36:03.997
> 
> 标签：javascript, html

这篇文章可能需要一些修改。我会尽力解释...

基本上，作为一名测试人员，我注意到有时使用基于模板的 Web 后端的程序员会将很多东西推送到 onload 处理程序中，然后这些处理程序会执行诸如加载菜单项、更改表单中的显示值等操作。

例如，显示您的网络配置的页面会为 IP 信息加载空白（或虚拟值），然后在 onload 函数中加载一个变量块，该函数在页面呈现时设置值。

我的经验（和直觉）是，这是一个非常糟糕的做法，有几个原因。

1- 如果页面在关闭 Javascript 的环境中显示（例如使用“发送页面”），则页面将无法在该环境中正常显示。

2- HTML 页面变得非常难以诊断，因为实际显示在屏幕上的内容需要通过在您的脑海中执行 javascript 来拼凑起来（由于 Firebug，这个问题在使用 Firefox 时不太突出）。

3- 大多数时候，这不是通过环境特征的标准实践来完成的。换句话说，后端没有服务，后端代码看起来和生成的 HTML 一样意大利面条。

而且，并不是真正的原因，更多的是相关性：

我注意到大多数这样做的编码人员通常是有很多与代码相关的错误或关键集成错误的编码人员。

所以，我并不是说我们不应该使用javascript，我想我的意思是，当你动态生成一个页面时，动态行为应该被隔离到后端，你应该避免改变显示的信息在页面加载和渲染之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T22:43:24.917

我认为您所说的是我们应该做的是[使用 JavaScript 进行渐进式增强](http://www.alistapart.com/articles/progressiveenhancementwithjavascript)。

还相关：[使用 CSS 进行渐进增强](http://www.alistapart.com/articles/progressiveenhancementwithcss)、[了解渐进增强](http://www.alistapart.com/articles/understandingprogressiveenhancement)和[测试驱动渐进增强](http://www.alistapart.com/articles/testdriven)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T22:40:18.497

所以实际的问题是javascript内容生成的“优点/缺点是什么”？

这里有一个：设计师想要的很多东西在直接的 html/css 中很难，或者没有完全支持。例如，使用 Jquery 用“:odd”做斑马表。有时服务器端框架没有很好的方法来实现这一点，所以获得*最干净的代码*的方法实际上就是像这样拆分它。

# jquery - 将数据关联到 jQuery 的 DOM 元素

> ID：364412
> 
> 赞同：5
> 
> 时间：2008-12-12T22:45:08.407
> 
> 标签：jquery, unobtrusive-javascript

在前世，我可能做过这样的事情：

```
<a href="#" onclick="f(311);return false;">Click</a><br/>
<a href="#" onclick="f(412);return false;">Click</a><br/>
<a href="#" onclick="f(583);return false;">Click</a><br/>
<a href="#" onclick="f(624);return false;">Click</a><br/> 
```

现在使用 jQuery，我可能会做这样的事情：

```
<a class="clicker" alt="311">Click</a><br/>
<a class="clicker" alt="412">Click</a><br/>
<a class="clicker" alt="583">Click</a><br/>
<a class="clicker" alt="624">Click</a><br/>

<script language="javascript" type="text/javascript">
    $(".clicker").bind("click", function(e) {
        e.preventDefault();
        f($(this).attr("alt"));
    });
</script> 
```

除了使用 alt 属性将数据从 DOM 传递到 jQuery 感觉像 hack，因为这不是它的预期目的。在 DOM 中存储/隐藏数据以供 jQuery 访问的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-12T22:47:52.630

您可以使用像“clicker-123”这样的 id 属性，然后解析出数字。我通常这样做或使用“rel”属性。

因此，从本质上讲，我知道没有更好的方法可以做到这一点。我希望这个线程证明我错了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-25T19:32:10.373

您最好使用 HTML5 的一个新特性：`data-...`-attribute。

您的 html 代码将如下所示：

```
<a class="clicker" data-mynumber="311">Click</a> 
```

然后就可以使用`el.attr('data-mynumber')`来获取数据了。

您可以选择任何名称，而不是 mynumber。

这适用于所有浏览器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-12T23:09:30.963

[JQuery.data](http://docs.jquery.com/Core/data#name)允许您将字典与 DOM 元素相关联。该数据可以通过 jQuery 设置：

```
<a class="clicker">Click</a><br/>
<a class="clicker">Click</a><br/>
<a class="clicker">Click</a><br/>
<a class="clicker">Click</a><br/>

<script language="javascript" type="text/javascript">
    var values = new Array("311", "412", "583", "624");
    $(".clicker").each(function(i, e) {
       $(this).data('value', values[i]).click(function(e) { 
         f($(this).data('value'));
       });
    });
</script> 
```

或者（从 jQuery 1.4.3 开始）使用[HTML5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)，即使在非 HTML5 文档中也可以使用：

```
<a class="clicker" data-value="311">Click</a><br/>
<a class="clicker" data-value="412">Click</a><br/>
<a class="clicker" data-value="583">Click</a><br/>
<a class="clicker" data-value="624">Click</a><br/>

<script language="javascript" type="text/javascript">
    $(".clicker").click(function(e) { 
       f($(this).data('value'));
    });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T23:14:01.953

很抱歉，但如果您已经填写了 alt 标签，我看不出延迟分配给 jQuery 的 onclick 处理程序实际上会给您带来什么。这不就是“现在我有了锤子，每一个问题看起来都像钉子”这样的例子吗？我认为当动作不依赖于从内容中自然派生的额外数据时，最好使用 jquery 方法，例如，类定义、标签类型等。

# linux - 基于网络的软件分发

> ID：364426
> 
> 赞同：0
> 
> 时间：2008-12-12T22:50:55.370
> 
> 标签：linux, apache, ubuntu, installation, software-distribution

目前在我的工作中，我们正在使用 Apache 身份验证通过 Ubuntu 服务器上的 apache Web 服务器分发我们的 Windows 基础软件的安装程序。当我们最初开始这样做时，我们只有 3 个项目要分发，因此需要管理 3 个 htpasswd 文件。从那时起，我们已经发展壮大，现在正在分发 8 个项目以及每个项目的几个赞助商特定的变体。此外，我们已经开始向潜在的研究赞助商分发视频以及相当大的软件。这已成为管理所有 htpasswd 文件的巨大负担。所以我的问题是，以基于 Web 的方式提供对大型文件集的密码保护访问的更好方法是什么？我认为 CMS 在这种情况下可能是合适的，但我对人们可能有的其他想法感兴趣。我的具体要求是：

*   在 Apache/Linux 上运行。特别是 Ubuntu 6.06/Apache2
*   免费或相对便宜，研究不提供昂贵的企业软件
*   能够轻松创建用户并为其帐户设置到期日期
*   能够创建文件的逻辑集合，并限制用户只能看到这些特定的集合
*   能够处理相对较大的文件（数百兆字节以上，尽管这种情况很少见）。此外，应该有一种简单的方法可以在 Web 界面之外添加文件，因为通过 Web 上传 300 MB 的视频是不可行的。命令行客户端可能是最好的。

非常感谢任何可以处理上述要求的软件建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-12T23:05:25.403

设置 apache 以使用 LDAP 进行身份验证。然后，您可以使用预先存在的 LDAP 前端，或者使用您自己的前端来管理访问权限和帐户到期。

使用 LDAP，您可以为每个项目设置一个组，这样用户就可以通过位于多个组中来访问多个项目。

[可以在此处](http://www.yolinux.com/TUTORIALS/LinuxTutorialApacheAddingLoginSiteProtection.html#LDAP)找到有关为 LDAP 设置 Apache 的一些信息。

例如，如果您喜欢离线 Java 应用程序，该目录可以由[phpLDAPadmin](http://phpldapadmin.sourceforge.net/wiki/index.php/Main_Page)或旧但很好的[LDAP 浏览器/编辑器管理。](http://www.mcs.anl.gov/~gawor/ldap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T22:58:38.630

我可能会考虑[使用](http://plone.org)LDAP 插件进行克隆。

作为旁注，我还建议更新到 Ubuntu 的最新 LTS 版本，但这不是强制性的 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-13T01:17:18.833

可能值得考虑 Amazon S3。它不是免费的，但非常便宜。

您不能拥有用户，但您可以为每个文件生成单独签名的 URL - 这些 URL 将允许在某个预定时间段内进行访问。

因此，不必注册用户，担心分发密码并在一段时间后过期，只需为您需要共享的文件生成 URL，并将 URL 提供给您的用户。

并且有任意数量的客户端可以将文件放在 S3 上——如果你想要一个命令行界面，只需将它作为文件系统挂载并在那里“cp”文件。

# database - 什么是实现与代码库同步的敏捷数据库流程的好方法，尤其是在持续集成方面？

> ID：364428
> 
> 赞同：9
> 
> 时间：2008-12-12T22:51:44.650
> 
> 标签：database, database-design, version-control, continuous-integration, agile

我正在从事的项目正在尝试提出一种解决方案，使数据库和代码变得敏捷，并且能够一起构建和部署。

由于应用程序是代码加上数据库模式和数据库代码表的组合，因此除非您拥有与代码一起进行版本控制的数据库，否则您无法真正拥有应用程序的完整构建。

我们还没有想出一个好的敏捷方法来进行数据库开发以及敏捷/scrum 环境中的代码。

以下是我的一些要求：

1.  我希望能够拥有一个与系统的完整构建相对应的 svn 版本号。
2.  我不想将二进制文件签入数据库的源代码控制。
3.  开发人员需要能够将代码提交到持续集成服务器并一起构建整个系统和数据库。
4.  必须能够自动部署到不同的环境，而无需在构建服务器上进行原始构建以外的重建。

（更新）我将在此处添加更多信息以进一步解释。

没有 OR/M 工具，因为它是一个包含大量代码的遗留项目。我已经阅读了敏捷数据库设计信息，并且孤立的这个过程似乎有效，但我正在谈论将它与主动代码开发相结合。

这里有两个场景

1.  开发人员签入需要更改数据库的代码更改。开发人员应该能够同时签入数据库更改，以便自动构建不会失败。

2.  开发人员检查数据库更改，这应该会破坏代码。自动化构建需要运行和失败。

最大的问题是，这些东西如何同步起来。没有“签入数据库更改”之类的东西。现在，数据库更改的应用程序是一个人必须做的手动过程，而代码更改是不断进行的。它们需要一起制作并一起检查，构建系统需要能够构建整个系统。

（更新 2）这里再添加一个：

你不能降低生产，你必须修补它。重建整个生产数据库是不可接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T23:07:29.003

您需要一个构建过程来构建数据库模式并添加任何必要的引导数据。如果您使用的是支持模式生成的 O/R 工具，那么大部分工作都会为您完成。任何不是工具生成的，都保存在脚本中。

对于持续集成，理想情况下，“构建”应该包括数据库的完全重建和静态测试数据的重新加载。

我刚刚看到你没有 ORM 工具......这是我们在我曾经工作过的公司所拥有的

```
db/
db/Makefile (run `make` to rebuild db from scratch, `make clean` to close db)
db/01_type.sql
db/02_table.sql
db/03_function.sql
db/04_view.sql
db/05_index.sql
db/06_data.sql 
```

安排然而必要......每个`*.sql`脚本都将运行以生成结构。开发人员每个人都有数据库的本地副本，任何数据库更改都只是另一个代码更改，没什么特别的。

如果您正在处理已经具有构建过程（Java、C、C++）的项目，这是第二天性。如果您以根本没有构建过程的方式使用脚本，这将是一些额外的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-15T01:44:31.647

“没有“检查数据库更改”之类的东西。”

实际上，我认为您可以检查数据库更改。诀窍是停止使用简单的——未版本化的——模式和表名。

如果您将版本号作为一个整体（或表）附加到模式，那么您可以轻松地进行版本签入。

请注意，数据库版本没有花哨的主要-次要版本。应用软件中的“主要”版本通常反映了基本的兼容性水平。该基本级别的兼容性应定义为“使用相同的数据模型”。

所以应用程序版本 2.23 和 2.24 使用数据库模式的版本 2。

版本签入有两个部分。

1.  新表。例如，MyTable_8 是给定表的版本 8。

2.  迁移脚本。例如 MyTable_8 包括一个 MyTable_7 到 MyTable_8 脚本，它移动数据，提供默认值或任何需要的东西。

有几种使用方法。

*   兼容升级。当仅更改表以添加允许空值的列时，版本号保持不变。

*   不兼容的升级。当添加非空列（需要初始值）或更改表的基本形状或列的数据类型时，您正在进行重大更改并且您有一个迁移脚本。

请注意，旧数据会一直保留，直到在更改过程结束时明确删除。您必须运行测试以确保一切正常。

您可能有两部分的删除-首先重命名，然后（一周后）最终删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T23:00:50.560

确保您的 O/R-Mapping 工具能够根据其默认配置构建必要的表，并添加缺失的列。这应该涵盖 90% 的案例。

其他 10% 是

*   处理插入数据后添加的列的缺失值
*   为需要在版本之间进行更多基本更改的罕见情况编写数据迁移脚本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-15T02:08:40.787

请参阅 DBDeploy 开源项目。[http://dbdeploy.com/](http://dbdeploy.com/)

它允许您签入数据库更改脚本。然后它将生成一个合并的更改脚本，包括所有尚未应用的更改。该站点很好地描述了该过程。

该项目基于之前提到的 Martin Fowler 文章中的技术。我参与了马丁这篇文章所依据的项目。DbDeploy 是我们使用的过程的一个很好的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-18T21:56:33.380

Ruby on Rails的*迁移*工具正是为了满足这种需求而开发的。如果您的应用程序没有使用 Rails，您可能会查看是否已将相同的概念移植到您选择的框架中，或者阅读它并确定是否可以编写一些实现相同功能的快速脚本。

# apache - 如何使用 Microsoft 证书服务生成 SSL 证书，然后安装/配置它以与 Apache 一起使用？

> ID：364429
> 
> 赞同：0
> 
> 时间：2008-12-12T22:52:08.190
> 
> 标签：apache, ssl

我已生成证书请求，并将其提交给 Microsoft 证书服务程序。它颁发证书。我把它下载到 conf/ssl/server.cert

我在 apache 中将其配置为使用

```
SSLCertificateFile conf/ssl/server.cert
SSLCertificateKeyFile conf/ssl/server.key 
```

当我使用此配置启动服务器时，我得到

安全连接失败 连接到 192.168.1.100 期间发生错误。

证书类型未获批准申请。（错误代码：sec_error_inadequate_cert_type）您尝试查看的页面无法显示，因为无法验证接收到的数据的真实性。

*   请联系网站所有者以告知他们此问题。

如果我下载 CA 证书并使用

```
SSLCertificateFile conf/ssl/server.crt
SSLCertificateKeyFile conf/ssl/server.key
SSLCACertificateFile conf/ssl/cacert.crt 
```

服务器无法启动。

如果我生成自签名证书并安装它，它工作正常，但我需要它来自 Microsoft 证书服务，因此它不会警告内部用户有关证书。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-12T23:21:23.950

听起来您的证书不允许用于服务器。IIRC，您可以在浏览器中查看证书并查找 Usage 或某种此类语言，它应该显示 SSL Server（可能还有其他内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T04:03:53.333

您需要确保颁发的证书已将“服务器身份验证”指定为扩展密钥使用扩展中的允许用途之一。最简单的方法（也是 Win2k3 Standard 上唯一的方法）是使用 Web 服务器证书模板。

You need to use the Certificate Services MMC snap-in to add this certificate template to the list of those allowed, and then need to configure permissions so the appropriate user(s) can request certificates.

# django - 如何在 Django 中从 2 个不同的模型对象创建表单对象？

> ID：364440
> 
> 赞同：2
> 
> 时间：2008-12-12T22:57:40.910
> 
> 标签：django, django-forms

我有 2 个对象，它们都来自不同的模型类，并且想要显示一个包含每个对象的一些字段的表单。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T15:00:04.383

我这样做的方法是创建两个`ModelForm`类，它们使用`fields`Meta 属性来指定要在表单中显示[的字段子集。](http://docs.djangoproject.com/en/dev/topics/forms/modelforms/?from=olddocs#using-a-subset-of-fields-on-the-form)我在模板中显示这两个表单，并在视图中处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-15T19:37:11.573

只需创建 2 个单独的表单，上面那个人的方法的问题是你会丢失 .save()。表单实际上是代表一组数据，每个模型的数据实际上是一组单独的数据。这就是为什么表单在渲染时不包含标签的原因。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-12-13T00:05:59.650

我从未尝试过，但您可以在代码中定义两个 ModelForm 类，然后创建一个新的普通`Form`类，在其中`__init__`创建每个类的副本`ModelForm`并将字段复制到自身中。

就像是：

```
class DualForm(forms.Form):
    def __init__(self, *args, **kwargs):
        model1 = Model1Form(**kwargs)
        model2 = Model2Form(**kwargs)

        for f in model1.fields:
            self.fields[f] = model1.fields[f]

        for f in model2.fields:
            self.fields[f] = model2.fields[f]

class Model1Form(forms.ModelForm):
    ... your model form...

class Model2Form(forms.ModelForm):
    ... your other model form... 
```

我不明白为什么它不起作用。

只要确保您将数据参数传递给`ModelForms`并捕获和冒泡异常...我也不确定如果您有冲突的字段名称会发生​​什么。那可能很麻烦...

# asp.net - ASP.NET TreeView 自动展开？

> ID：364448
> 
> 赞同：1
> 
> 时间：2008-12-12T23:00:24.213
> 
> 标签：asp.net, controls, treeview

有谁知道如何显示 asp:TreeView 总是扩展到叶子？因此，如果我有一个 2 级树，我希望它始终被扩展。TreeView 上是否有执行此操作的属性，或者您能否显示有关如何执行此操作的代码片段？

非常感谢你！射线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T23:27:21.660

aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    TreeView1.ExpandAll();
} 
```

如果您还想禁用树中的展开折叠符号：

```
<asp:TreeView ID="TreeView1" runat="server" ShowExpandCollapse="false">
</asp:TreeView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-09T20:04:35.060

如果您只想显示每个默认值的根项，则可以使用 Integer：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        TreeView1.ExpandDepth = 1;
    } 
```

# java - Findbugs 警告：Equals 方法不应假设任何关于其参数类型的内容

> ID：364454
> 
> 赞同：24
> 
> 时间：2008-12-12T23:04:20.337
> 
> 标签：java, equals, findbugs

在我的项目上运行 FindBugs 时，我遇到了一些上述错误的实例。

也就是说，我的 equals 覆盖版本将 RHS 对象转换为与定义覆盖版本的对象相同的类型。

但是，我不确定是否有可能有更好的设计，因为 AFAIK Java 不允许方法参数发生变化，因此无法为 equals 参数定义任何其他类型。

是我做错了什么，还是 FindBugs 太急切了？

表达这个问题的另一种方式是：如果传递给 equals 的对象与 LHS 的类型不同，那么正确的行为是什么：这是错误的，还是应该有例外？

例如：

```
public boolean equals(Object rhs)
{
    MyType rhsMyType = (MyType)rhs; // Should throw exception
    if(this.field1().equals(rhsMyType.field1())... // Or whatever
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-12-12T23:10:57.997

通常，在实现 equals 时，您可以在强制转换之前检查参数的类是否与实现类相等（或兼容）。像这样的东西：

```
if (getClass() != obj.getClass())
    return false;
MyObj myObj = (MyObj) obj; 
```

这样做可以防止 FindBugs 警告。

解决评论的旁注：
有些人认为使用`instanceof`而不是`getClass`检查类型安全。对此有一个很大的争论，当我注意到你可以检查类相等**或**兼容性时，我试图不参与其中，但我想我无法逃避它。它归结为这一点 - 如果你使用`instanceof`你可以支持一个类的实例和它的子类的实例之间的相等性，但是你可能会破坏`equals`. 一般来说，我建议不要使用`instanceof`，除非你知道你需要它并且你知道你在做什么。有关更多信息，请参阅：

*   [http://www.artima.com/weblogs/viewpost.jsp?thread=4744](http://www.artima.com/weblogs/viewpost.jsp?thread=4744)
*   [在 Java 中覆盖 equals 和 hashCode 时应该考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)
*   [http://www.macchiato.com/columns/Durable5.html](http://www.macchiato.com/columns/Durable5.html)
*   [http://commons.apache.org/lang/api-release/org/apache/commons/lang/builder/EqualsBuilder.html（Apache](http://commons.apache.org/lang/api-release/org/apache/commons/lang/builder/EqualsBuilder.html) common 的实现助手）
*   [http://www.eclipsezone.com/eclipse/forums/t92613.rhtml（Eclipse](http://www.eclipsezone.com/eclipse/forums/t92613.rhtml)的默认 equals 生成器）
*   NetBeans 生成器也使用 getClass()

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-12T23:15:06.350

你可能正在做这样的事情：

```
public class Foo {
  // some code

  public void equals(Object o) {
    Foo other = (Foo) o;
    // the real equals code
  }
} 
```

在本例中，您假设有关 equals() 的参数：您假设它是 Foo 类型的。不必如此！您还可以获得一个字符串（在这种情况下，您几乎肯定应该返回 false）。

所以你的代码应该是这样的：

```
public void equals(Object o) {
  if (!(o instanceof Foo)) {
    return false;
  }
  Foo other = (Foo) o;
  // the real equals code
} 
```

（或使用`getClass() != o.getClass()`Dave L.

你也可以这样看：

```
Integer i = new Integer(42);
String s = "fourtytwo";
boolean b = i.equals(s); 
```

这段代码是否有任何理由应该抛出 a`ClassCastException`而不是正常完成并设置`b`为`false`？

抛出 a`ClassCastException`作为回应`.equals()`是不明智的。因为即使这是一个愚蠢的问题（“当然，字符串永远不会等于 Foo！”）它仍然是一个有效的问题，答案非常好（“否”== `false`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-06-10T15:09:51.390

我建议忽略上述 findbugs 警告。在实践中，如果使用意外类的对象调用 equals，几乎可以肯定它是一个错误，并且您希望在错误上快速失败。

例如，如果你有一个 'ArrayList files' 并调用 files.contains("MyFile.txt")，如果你得到一个 ClassCastException 就好了。相反，Java 只返回 false，并且您可能需要很长时间才能发现该错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T23:17:14.740

我像这样开始我的 equals(Object) 实现：

```
if ((object == null) || !(object instaceof ThisClass)) {
    return false;
} 
```

这也将防止 FindBugs 警告，但不会`false`在提交 ThisClass 的子类时自动返回。它也可能被认为是相等的，特别是如果它的`equals(Object)`方法没有被覆盖。

# actionscript-3 - 是否有 AS3 文档的标准模板？

> ID：364461
> 
> 赞同：0
> 
> 时间：2008-12-12T23:08:38.830
> 
> 标签：actionscript-3, documentation, templates

我已经看到它使用了几个地方：

*   [http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/)
*   [http://developer.yahoo.com/flash/astra-flash/classreference/](http://developer.yahoo.com/flash/astra-flash/classreference/)

这只是巧合还是我可以抓住的地方？我很想将它用于我正在从事的新项目。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T00:18:34.757

看看[asdoc](http://livedocs.adobe.com/flex/3/html/help.html?content=asdoc_1.html)。这是自动生成文档的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-02T08:09:19.927

记录 ActionScript 最常用的标准是 javadoc，它是一个用于注释代码的标签池。这些信息被提取并转化为某种文档，例如 html 页面。

为了提取这些信息，有许多可用的工具。ASDoc 是一个命令行工具。另一个工具是[Ortelius](http://ortelius.marten.dk)，它带有一个简单的 GUI，对于像我这样的 GUI 迷来说可能不那么“可怕”。

# java - 使用 Java 将 SQL 查询结果输出到平面文件

> ID：364472
> 
> 赞同：0
> 
> 时间：2008-12-12T23:17:14.193
> 
> 标签：java, database, hibernate, flat-file

Java中是否有一种简单或直接的方法将数据库查询的结果输出到文件（csv、tab等）。甚至在 Hibernate 中？

我知道查询结果可以转储到数据库服务器上的平面文件中。我正在寻找一种应用程序可以运行查询并将这些结果放入文件的方法。

我意识到一种选择是只遍历结果集并一次输出一行记录，并用分隔符分隔。但是如果有一个内置的方式，或者一个休眠方式——那就更好了！

我真正在寻找的是一种在代码中执行此操作的方法（例如 - 当应用程序运行时）。这样，服务器可以接受查询，针对数据库运行它，将输出发送到平面文件。

发送查询的服务器并不真正需要文件本身，只需要知道它是否有效。因此，如果有 SQL（对于 Oracle DB）可以将输出重定向到 Oracle DB 服务器有权访问的目录中的平面文件 - 那也可以。我真的不必在 Java 服务器中实际编写文件 - 只需根据它的查询触发文件创建。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T19:13:51.277

You can change the EntityMode of your Session to "DOM4J" so that Hibernate will return the data represented as an XML document instead of a POJO graph.

```
xmlSession = session.getSession(EntityMode.DOM4J);
Element elem = (Element) xmlSession.load(SomePersistentClass.class, id);
System.out.println(elem.asXML()); 
```

You could then easily write this to the file system or do subsequent transformations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T23:28:14.593

我似乎记得 IntelliJ 的 JDBC 数据库浏览器能够导出查询结果。如果 Eclipse 或 Netbeans DB 插件或可以做到这一点，我不会感到惊讶。这是一大堆[开源客户端](http://java-source.net/open-source/sql-clients)。

还有[JdbcTool](http://web.quuxo.com/products/jdbctool/)，它是一个命令行客户端

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T01:02:30.733

> *我意识到一种选择是只遍历结果集并一次输出一行记录，并用分隔符分隔。但是如果有一个内置的方式，或者一个休眠方式——那就更好了！*

不，那里没有。但这**很**容易：

```
 public void printToFile( ResultSet rs, String path ) throws IOException { 

     PrintStream out = new FileOutputStream( path );

     int cols = rs.getMetaData().getColumnCount();

     while( rs.next() ) { 
         for( int i = 0; i < cols ; i++ ) { 
             out.printf("%s,", rs.getObject( i ) );
          }           
          out.println();
     }

     // add exception handling and such...
     // or move the from here.
     out.close();
     rs.close();

 } 
```

然后这样称呼它：

```
 ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM TABLE2");
 printToFile( rs, "/some/file" ); 
```

这只是从头开始，您需要将文件和 rs 的关闭移动到更有意义的位置。

> *因此，如果有 SQL（对于 Oracle DB）可以将输出重定向到 Oracle DB 服务器有权访问的目录中的平面文件 - 那也可以*

我认为这确实是可能的。但是我距离成为 DBA 还差几年，所以我不知道“如何”去做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T19:59:33.847

也改为

```
for( int i = 1; i < cols ; i++ ) { 
         out.printf("%s,", rs.getObject( i ) );
      } 
```

# language-agnostic - 投票：当传递的对象与 LHS 类型不匹配时，相等的正确行为？

> ID：364478
> 
> 赞同：4
> 
> 时间：2008-12-12T23:19:41.193
> 
> 标签：language-agnostic, oop, equality, overriding

我问了一个关于 findbugs 的相关问题，但让我们问一个更一般的问题。

假设我正在使用一种可以实现多态的面向对象语言。

假设语言支持静态类型检查（例如，Java、C++）

假设该语言不允许参数变化（例如，Java，再次......）

如果我要重写将 Object 作为参数的相等操作，在参数与调用 equals 的 LHS 不同的类型或子类型的情况下，我应该怎么做？

选项 1 - 返回 false，因为对象显然不等于

选项 2 - 抛出一个转换异常，因为如果语言实际上支持方差（这本来是可取的），这将在编译时作为错误被捕获；因此，在运行时检测此错误是有意义的，因为发送另一种类型的情况应该是非法的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T23:28:13.907

我投票支持选项 1。两个不同类型的对象可能相等——例如，int 和 double，如果第一类对象可以有效地相互转换并且在数学上是可比较的。此外，您可能希望考虑不同的子类在某些方面是相等的，但两者都不能转换为另一个（尽管它们可能来自同一个父类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T23:25:33.303

返回 false，因为对象不相等。

我看不出`ClassCastException`在这里扔 a 会更好。

接口中有一些契约，例如`Collection`或`List`实际上依赖于任何能够检查与任何其他对象是否相等的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-12T23:25:03.990

这取决于。

```
SomeClass obj1 = new SomeClass();
object other = (object)obj1;

return obj1.Equals(other); // should return "true", since they are really the same reference. 
```

* * *

```
SomeClass obj1 = new SomeClass();
object other = new object();

return obj1.Equals(other); // should return "false", because they're different reference objects. 
```

* * *

```
class SomeClass { }
class OtherClass { }

SomeClass obj1 = new SomeClass();
OtherClass obj2 = new OtherClass();

return obj1.Equals(obj2); // should return "false", because they're different reference objects. 
```

如果这些类型是两种完全不同的类型，它们不会相互继承，那么它们不可能是相同的引用。

您不应该抛出任何类型的转换异常，因为您接受基对象类作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-13T00:41:58.033

嗯.. 我也喜欢选项 1，原因如下：

1）无论您用来检查的任何条件，这些对象显然都不相等

2）每次进行比较时，抛出 ClassCastException 都需要检查该异常，我认为这会导致代码难以理解或至少更长......

3) 类转换异常只是问题的一个症状，即两个对象不相等，即使在类型级别也是如此。

4）正如上面提到的用户“cbo”，double/int 是相等的，尽管它们的类型不同（4.0 == 4），这也适用于其他类型。

免责声明：我可能会让我的 Python 方式为 Java 辩论着色 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-13T00:55:03.420

[Dobb 博士的 Java Q&A](http://www.ddj.com/java/184405053)说最佳实践是它们都是同一类型。所以我投票选项1。

# c++ - 确定 C/C++ 结构相对于其成员的对齐方式

> ID：364483
> 
> 赞同：27
> 
> 时间：2008-12-12T23:24:36.347
> 
> 标签：c++, c, alignment

如果结构成员的对齐方式已知，是否可以找到结构类型的对齐方式？

例如。为了：

```
struct S
{
 a_t a;
 b_t b;
 c_t c[];
}; 
```

是 S = max(alignment_of(a), alignment_of(b), alignment_of(c)) 的对齐方式吗？

在互联网上搜索我发现“对于结构化类型，其任何元素的最大对齐要求决定了结构的对齐”（在[What Every Programmer Should Know About Memory](http://people.redhat.com/drepper/cpumemory.pdf)中）但我在标准中找不到任何类似的东西（最新更准确地起草）。

* * *

**编辑：** 非常感谢所有的答案，特别是罗伯特甘布尔，他对原始问题和其他做出贡献的人提供了非常好的答案。

简而言之：

***为了确保结构成员的对齐要求，结构的对齐必须至少与其最严格的成员的对齐一样严格。***

至于确定结构的对齐方式，提出了一些选择，经过一些研究，我发现：

*   c++ std::tr1::alignment_of
    *   尚未标准，但接近（技术报告 1），应该在 C++0x 中
    *   最新草案中存在以下限制： 前提条件：T 应是完整类型、引用类型或未知边界数组，但不应是函数类型或（可能是 cv 限定的）void。
        *   这意味着我提出的使用 C99 灵活数组的用例将不起作用（这并不奇怪，因为灵活数组不是标准 C++）
    *   在最新的 c++ 草案中，它是用一个新关键字 - alignas 定义的（这具有相同的完整类型要求）
    *   在我看来，如果 C++ 标准曾经支持 C99 灵活数组，则可以放宽要求（结构与灵活数组的对齐方式不应根据数组元素的数量而改变）
*   c++ boost::alignment_of
    *   主要是 tr1 替代品
    *   似乎专门用于 void 并在这种情况下返回 0 （这在 c++ 草案中是禁止的）
    *   开发人员注意：严格来说，您应该只依赖 ALIGNOF(T) 的值是 T 的真实对齐的倍数，尽管在实践中它确实在我们所知道的所有情况下计算正确的值。
    *   我不知道这是否适用于灵活的数组，它应该（通常可能不起作用，这解决了我平台上的编译器内在问题，所以我不知道它在一般情况下会如何表现）
*   Andrew Top 提出了一个简单的模板解决方案，用于计算答案中的对齐方式
    *   这似乎与 boost 所做的非常接近（如果它小于我所看到的计算对齐，boost 将另外返回对象大小作为对齐）所以可能同样的通知适用
    *   这适用于灵活的数组
*   使用 Windbg.exe 找出符号的对齐方式
    *   不是编译时间，特定于编译器，没有测试它
*   在包含该类型的匿名结构上使用 offsetof
    *   查看答案，不可靠，不可移植 c++ non-POD
*   编译器内在函数，例如。MSVC __alignof
    *   使用灵活的数组
    *   alignof 关键字在最新的 c++ 草案中

* * *

如果我们想使用“标准”解决方案，我们仅限于 std::tr1::alignment_of，但如果您将 c++ 代码与 c99 的灵活数组混合使用，这将不起作用。

正如我所见，只有 1 个解决方案 - 使用旧的 struct hack：

```
struct S
{
 a_t a;
 b_t b;
 c_t c[1]; // "has" more than 1 member, strictly speaking this is undefined behavior in both c and c++ when used this way
}; 
```

在这种情况下（以及所有其他情况），不同的 c 和 c++ 标准及其日益增长的差异是不幸的。

* * *

另一个有趣的问题是（如果我们不能以可移植的方式找出结构的对齐方式）可能最严格的对齐要求是什么。我可以找到几个解决方案：

*   boost（内部）使用多种类型的联合，并在其上使用 boost::alignment_of
*   最新的 c++ 草案包含 std::aligned_storage
    *   对于大小不大于 Len 的任何 C++ 对象类型，default-alignment 的值应是最严格的对齐要求
        *   所以`std::alignment_of< std::aligned_storage<BigEnoughNumber>>::value`应该给我们最大的对齐
        *   仅草稿，尚不标准（如果有的话），`tr1::aligned_storage`没有此属性

对此的任何想法也将不胜感激。

*我已暂时取消选中已接受的答案，以获得对新子问题的更多可见性和输入*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-12T23:29:53.030

这里有两个密切相关的概念：

1.  处理器访问特定对象所需的对齐方式
2.  编译器实际用于在内存中放置对象的对齐方式

为了确保结构成员的对齐要求，结构的对齐必须至少与其最严格的成员的对齐一样严格。我不认为标准中明确说明了这一点，但可以从以下事实中推断出来（标准中单独说明）：

*   结构允许在其成员之间（以及最后）有**填充**
*   数组元素之间**不允许**有填充
*   您可以创建任何结构类型的数组

如果结构的对齐方式至少不如它的每个成员那么严格，那么您将无法创建结构数组，因为某些结构成员的某些元素不会正确对齐。

现在编译器必须根据其成员的对齐要求确保结构的最小对齐，但它也可以以比要求更严格的方式对齐对象，这通常是出于性能原因。例如，许多现代处理器允许以任何对齐方式访问 32 位整数，但如果它们未在 4 字节边界上对齐，则访问速度可能会明显变慢。

没有可移植的方法来确定处理器对任何给定类型强制执行的对齐方式，因为这不是由语言公开的，尽管由于编译器显然知道目标处理器的对齐要求，它可以将此信息作为扩展公开。

也没有可移植的方法（至少在 C 中）来确定编译器如何实际对齐对象，尽管许多编译器都有选项来提供对对齐的某种程度的控制。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-13T00:29:56.200

我编写了这个类型特征代码来确定任何类型的对齐方式（基于已经讨论过的编译器规则）。您可能会发现它很有用：

```
template <class T>
class Traits
{
public:
    struct AlignmentFinder
    {
        char a; 
        T b;
    };

    enum {AlignmentOf = sizeof(AlignmentFinder) - sizeof(T)};
}; 
```

所以现在你可以去：

```
std::cout << "The alignment of structure S is: " << Traits<S>::AlignmentOf << std::endl; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-13T01:44:14.397

以下宏将返回任何给定类型的对齐要求（即使它是一个结构）：

```
#define TYPE_ALIGNMENT( t ) offsetof( struct { char x; t test; }, test ) 
```

注意：我可能在过去的某个时候从微软的标题中借用了这个想法......

* * *

编辑：正如 Robert Gamble 在评论中指出的那样，这个宏不能保证有效。事实上，如果将编译器设置为将元素打包到结构中，它肯定不会很好地工作。因此，如果您决定使用它，请谨慎使用。

一些编译器有一个扩展，允许你获得一个类型的对齐（例如，从 VS2002 开始，MSVC 有一个`__alignof()`内在的）。这些应该在可用时使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-12T23:31:37.503

如果您了解有关正在使用的编译器选项的更多详细信息，则可以假设结构对齐。例如，#pragma pack(1) 将强制某些编译器在字节级别对齐。

旁注：我知道问题是关于对齐的，但一个侧面问题是填充。对于嵌入式编程、二进制数据等等——一般来说，如果可能的话，不要假设任何关于结构对齐的事情。如有必要，请在结构中使用显式填充。我遇到过这样的情况，如果不添加填充元素，就不可能将一个编译器中使用的精确对齐复制到不同平台上的编译器。它与结构内部结构的对齐有关，因此添加填充元素修复了它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-12T23:36:02.657

正如其他人提到的，它的实现依赖于。Visual Studio 2005 使用 8 个字节作为默认结构对齐。在内部，项目按其大小对齐——浮点数使用 4 字节对齐，双精度使用 8 等。

您可以使用#pragma pack 覆盖该行为。GCC（和大多数编译器）具有类似的编译器选项或编译指示。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-13T01:57:44.557

如果你想在 Windows 中找到特定情况，请打开 windbg：

```
Windbg.exe -z \path\to\somemodule.dll -y \path\to\symbols 
```

然后，运行：

```
dt somemodule!CSomeType 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-12T23:28:29.087

我认为在任何 C 标准中都不能保证内存布局。这在很大程度上取决于供应商和架构师。可能有一些方法可以在 90% 的情况下工作，但它们不是标准的。

不过，我很高兴被证明是错误的 =)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-21T02:54:17.790

我主要同意 Paul Betts、Ryan 和 Dan 的观点。真的，这取决于开发人员，您可以保留 Robert 提到的默认对齐方式 symanic（Robert 的解释只是默认行为，而不是以任何方式强制或要求），或者您可以设置您想要的任何对齐方式 /Zp[# #]。

这意味着如果你有一个带有浮点数、长双精度数、uchar 等的 typedef... 包括各种数组。然后有另一种类型，其中包含一些奇怪形状的成员，一个字节，然后是另一个奇怪的成员，它将简单地按照 make/solution 文件定义的任何偏好对齐。

如前所述，在运行时使用 windbg 的 dt 命令，您可以了解编译器如何在内存中布局结构。

您还可以使用任何 pdb 读取工具（如 dia2dump）从 pdb 中静态提取此信息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-20T17:55:38.023

改编自[Peeter Joot 的博客](http://peeterjoot.wordpress.com/2009/11/11/c-structure-alignment-padding/)

C 结构对齐基于结构中最大尺寸的本机类型，至少通常是这样（例外情况是在 win32 上使用 64 位整数，其中只需要 32 位对齐）。

如果您只有字符和字符数组，则添加一个 int 后，该 int 将最终从 4 字节边界开始（在 int 成员之前可能有隐藏的填充）。此外，如果结构不是 sizeof(int) 的倍数，则将在末尾添加隐藏填充。对于短类型和 64 位类型也是如此。

例子：

```
struct blah1 {
    char x ;
    char y[2] ;
}; 
```

sizeof(blah1) == 3

```
struct blah1plusShort {
    char x ;
    char y[2] ;
    // <<< hidden one byte inserted by the compiler here
    // <<< z will start on a 2 byte boundary (if beginning of struct is aligned).
    short z ;
    char w ;
    // <<< hidden one byte tail pad inserted by the compiler.
    // <<< the total struct size is a multiple of the biggest element.
    // <<< This ensures alignment if used in an array.
}; 
```

sizeof(blah1plusShort) == 8

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-18T10:36:31.070

8 年后我读了这个答案，我觉得@Robert 接受的答案通常是正确的，但在数学上是错误的。

为了确保结构成员的对齐要求，结构的对齐必须至少**与其成员对齐的最小公倍数**一样严格。考虑一个奇怪的例子，成员的对齐要求是 4 和 10；在这种情况下，结构的对齐方式是 LCM(4, 10)，它是 20，而不是 10。当然，奇怪的是看到具有这种对齐要求的平台不是 2 的幂，因此对于所有实际情况，结构对齐等于其成员的最大对齐。

这样做的原因是，只有结构的地址以其成员对齐的LCM开头，才能满足所有成员的对齐，并且成员与结构末尾的填充与起始地址无关.

**Update:** As pointed out by @chqrlie in the comment, C standard does not allow the odd values of the alignment. However this answer still proves why structure alignment is the maximum of its member alignments, just because the maximum happens to be the least common multiple, and thus the members are always aligned relative to the common multiple address.

# php - 哪个 Eclipse 发行版适合使用 Python、PHP 或 Perl 进行 Web 开发？

> ID：364486
> 
> 赞同：4
> 
> 时间：2008-12-12T23:26:53.393
> 
> 标签：php, python, perl, eclipse

我想试试 Eclipse，但我对它的所有不同发行版有点困惑。我主要使用 Python 进行 Web 开发，但我还需要维护 PHP 和 Perl 应用程序。看起来 EasyEclipse 有点落后。我应该抓住基本的 Eclipse 并开始加载插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-12T23:31:45.273

也许试试 Aptana ( [http://www.aptana.com/](http://www.aptana.com/) ) - 然后您可以根据需要插入任意数量的额外模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T23:40:19.233

PDT 2.0 是非常好的 Eclipse [PHP Ide](http://www.eclipse.org/pdt/)。它是与 Zend 合作创建的，所以 Zend Studio 有很多特点。我还将它与 Subeclipse（用于 SVN）和目标管理（用于远程处理 FTP）一起使用。我还将建议使用 HTML 和 Js 的 Aptana 插件——它们比 Eclipse 的标准 Web 工具要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-12T23:52:43.887

我在工作中开发 Python 应用程序，发现 Eclipse Classic 和 Eclipse for Java Devs 非常适合，因为我不做任何插件或 Java EE 的东西。我们使用 Eclipse 编写 Java、Python 和 NSIS（nullsoft 安装程序）脚本。

我所做的 Python 开发需要 pydev 插件（参见：[http](http://pydev.sourceforge.net/) ://pydev.sourceforge.net/ ），到目前为止，它在 Windows 机器上非常棒。我在 Fedora 9 机器上发现了一些不稳定性，但这不是我的 linuxier 同事的普遍共识 :)

pydev 插件带有一组非常少的可定制功能，包括一个简短的着色语法列表，并且很容易为 python 开发创建一个深色方案（黑色背景，亮文本）（如果这对你很重要）。到目前为止，调试器非常好，但是当我的应用程序在 PyQt 中遇到线程时我遇到了问题。我不知道这是否是 QThread（Qt 线程）或一般 python 线程的问题。

我无法提供有关 PERL 或 PHP 的任何建议，但基本上就像您说的那样，下载 Eclipse 版本并为您的开发环境找到一些好的插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-15T02:11:48.597

[EPIC](http://www.epic-ide.org/)是我所知道的唯一一个用于 Perl 的 Eclipse Perl 插件。

集成没问题。提供图形调试器，但要注意检查包含循环的数据，因为 perl 执行程序可能会进入无限循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-26T02:17:07.243

我在 Eclipse 上使用 PHP、python、C（python 模块）、SQL 和 JS/HTML/CSS 进行开发。为此，我将 PDT、CDT、pydev 和 SQL 工具安装到 eclipse 平台上，然后为混合项目使用不同的工作区。

具体来说有两个工作区，一个用于 PHP Web 开发，另一个用于 Python/C。我确实在一台相当强大的机器上运行它，所以我允许增加内存（2G）的奢侈。

像魅力一样工作，能够为所有事情使用相同的 IDE 非常好:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-12T23:54:48.970

我相信你知道 PyDev 相当不错。它可以安装在所有 Eclipse 发行版之上（只要它们满足最低版本要求）。如果你在做 webdev 的东西，你可能会发现最适合 Aptana。

也就是说，与体面的文本编辑器相比，我发现 Aptana 非常笨拙。我使用 django 构建站点，为此我使用 Eclipse（纯）和 PyDev 来执行 python 和 gedit（gnome 的增强记事本）来为模板/CSS/JS/等编写 HTML。

归根结底，最适合*您*的就是您要选择的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-02T18:36:53.760

我使用 javascript eclipse helios 并向其添加了 pydev 插件以支持 django，它似乎可以满足我的一切需要。

# sql - 您会考虑使用 MS SQL Server Management Studio 的替代品吗？

> ID：364492
> 
> 赞同：9
> 
> 时间：2008-12-12T23:31:37.270
> 
> 标签：sql, sql-server, sql-server-2005, query-analyzer

在工作中，我们最近从 Microsoft SQL Server 7 升级到 SQL 2005。数据库引擎要先进得多，但管理工作室在很多方面都非常糟糕。我们的大多数开发人员决定他们更喜欢使用旧的查询分析器工具，尽管它有很多限制。

在业余时间，我决定为 Query Analyzer / Management Studio 编写一个替代品，它完成了我们的开发人员最需要做的事情。我终于获得了免费发布它的许可：Versabanq Squel (versabanq.com/squel)。

就像我说的，它是免费的，所以这不是推销。但这让我思考。我想知道的是：你们中的大多数人是否对 SQL Studio 的现状感到满意？人们是否只是因为它是微软推动他们的东西而使用它？有很多人在寻找更好的东西吗？如果看起来可能会有更广泛的兴趣，也许我可以获得一些长期发展的支持。

顺便说一句，请查看[SQL Server Management Studio Alternatives](https://stackoverflow.com/questions/5170/sql-server-management-studio-alternatives)，这是其他人较早提出的关于此主题的问题。我在那里看到的是，选择很少。你认为这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-02-02T10:20:11.117

哈，我的观点完全相同，所以我制作了一个工具、代码完成等等，而且还有一个免费版本。它位于[http://www.atlantis-interactive.co.uk](http://www.atlantis-interactive.co.uk) - 它基本上是为那些想念 QA 的人准备的。你的工具看起来不错，干得好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-13T00:48:43.183

虽然我会喜欢更好的东西，但它必须要好得多且免费。SMS 绝对是一头猪，但我已经习惯了。我最怀念的是查询分析器。我不介意使用 SSMS 来管理服务器，但是拥有一个快速轻量级的 SQL 查询编辑器会很糟糕......

我提到免费了吗？不是我现在愿意支付的。

# 编辑

仅供参考，我下载的工具看起来很整洁，但您需要添加对 Windows 身份验证的支持，除非我只是想念它是如何完成的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-15T21:35:51.803

我认为 Management Studio 远远优于旧的 SQL 2000 工具。企业管理器是一个令人震惊的工具，永远挂起和崩溃。如果您所做的只是创建和运行 SQL 查询，查询分析器仍然可以，但老实说，一旦我开始使用 Management Studio，我就再也没有回到 EM/QA 了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-13T00:13:10.460

我以前使用过 Apex SQL Edit，并且比 Management Studio 更喜欢它。它在 SQL Server 2008 的 Management Studio 之前就提供了智能感知。

[http://www.apexsql.com/sql_tools_edit.asp](http://www.apexsql.com/sql_tools_edit.asp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-14T17:03:17.160

我刚开始使用 mysql 在 linux 上进行开发，我想念 MS SQL Management Studio。这是一个很棒的工具。我同意在使用查询分析器后需要一些时间来适应，但管理工作室中的查询工具实际上更好。我真的不认为有更好的选择。我也尝试了 Apex SQL Edit，但发现 MS 更胜一筹。

我还建议使用Red-Gate 的[SQL Prompt](http://www.red-gate.com/products/SQL_Prompt/)来获取智能感知（自动完成）。他们的其他工具也很出色。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-15T21:45:45.763

如果您目前正在使用 .NET 3.5 Framework 进行开发（或将开始开发），那么我建议您为您的开发人员提供这个方便的小应用程序：[**LINQPad**](http://www.linqpad.net/)

这将帮助您的开发人员学习 LINQ（一种集成的 O/R 映射器，使 .net 开发人员的生活更轻松）语法，同时使用更轻量级的 SQL 管理应用程序

仅当您的开发人员使用 Microsoft 的 .net 3.5 框架时，此建议才有效

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-15T21:57:26.270

我对 7.0 和 2000 的 Enterprise Manager 非常满意。我有点喜欢 MMC 管理单元的想法。只要您记得点击刷新，它就没有那么糟糕。

新的 2005 Management Studio 也不错。我认为选择其他任何东西没有意义。我看不到可以证明我采取行动的巨大进步。好像大家都在用SQL Server自带的东西，和Oracle自带的东西比起来，还是很不错的。Oracle 开发人员有更多选择，这并不神秘！

Books Online 很棒，从 7.0 开始就一直如此。

关于查询分析器，我最喜欢的部分是并且一直是执行计划视图。这是一件好事！

每个新版本的 SQL Server 都有很多新东西，但遗憾的是有些东西也被丢弃了。我觉得English Query 没了很可惜。我从来没有为它找到一个项目，在挪威推动它是问题的一部分，但我认为它很棒。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-19T20:55:51.440

我已经尝试了其中的几个，包括 TOAD、ApexSqlEdit 和其他几个。所有这些的问题在于，虽然它们包含 Management Studio 缺少的强大功能，但它们也缺少 Management Studio 已经拥有的关键功能，我总是发现自己打开了两个窗口，我的第三方编辑器和 Management Studio。这是我认为 Red-Gate 真正做到的一个领域，他们并没有试图取代 management studio，只是通过扩展它、添加智能感知、轻重构和代码格式化来弥补它的不足。到目前为止，我最喜欢的解决方案是 Management Studio，它添加了 RedGate SqlPrompt Pro，用于智能感知和格式化，大大提高了我的工作效率。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-19T20:59:28.967

SQL Server Management Studio 2008 用于 SQL Server 2008 数据库时，支持**SQL 查询的 Intellisense**。努夫说！

编辑：对不起，没有意识到你说的是 SQL 2005。嗯，我也喜欢 SSMS 2005。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-12T23:41:21.273

一方面，我肯定会喜欢 Management Studio 以外的东西。只是我，还是其他人觉得它比 SQL Server 2000 的企业管理器慢呢*？*是否有更多功能，我需要一些可以快速完成工作的东西。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-15T21:49:42.027

是的，但他们几乎总是有自己的问题。

在所有这些中，我使用了相当多的 Toad，但发现与 Management Studio 相比，它的响应速度稍差一些。也许是智能感知的构建（这也很挑剔——它总是要求我输入 Database.owner. 前缀并且在使用别名时遇到了麻烦），但它只是感觉不那么舒服。

回到 SQLMS...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-19T20:53:10.993

我在确定如何在 SSMS 上设置用户权限时遇到问题。最终我不小心遇到了正确的方法，现在效果很好。我以前从未为 SQL Server 使用过任何工具，因此无法比较，但我认为这可以满足我目前所需的一切。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-04T19:12:13.483

任何东西都比称为 SQL Server Management Studio 的牛肚好。对不起，但这对我们这些非 DBA 的人来说实在是太糟糕了。也许您的 DBA 和程序员类型喜欢它，但对于我们这些只是安排备份等的服务器人员来说，它是一个主要的 PITA。它很慢。慢。维护计划界面是错误和陷阱的活生生的噩梦。Enterprise Manager 并不完美，但它比 SSMS 使用起来要容易得多。

与 VB3 相比，它真的让我想起了 Visual Basic 4 - MS 正试图朝着正确的方向前进，他们只是做得非常糟糕。当然，我们最终得到了 VB6，所以也许在 MSSQL Server 2011 中我们会再次获得一些不错的东西。但是现在，我只希望我可以在我的 SQL2005 服务器上运行企业管理器，因为 SMSS 让我很生气。

但是，我从 2000 年开始针对我的 2005 年服务器运行查询管理器还没有遇到任何问题，至少对于我所做的简单查询来说没有任何问题。至少这仍然有效。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-02-02T17:36:01.110

Management Studio 并不完美，并且有一些错误，但我发现它比旧的 2000 工具要好得多。没有比赛。我使用 SSMS 2008 来管理我的所有服务器，包括 SQL Server 2000 (ack!) 实例。

即使有缺陷，我还没有看到有人创建了一个更好的工具——可能没有人有时间（重新）构建每个功能。

我的 2 美分。

# emacs - 带有 cscope 的非 GUI Emacs

> ID：364495
> 
> 赞同：3
> 
> 时间：2008-12-12T23:32:24.133
> 
> 标签：emacs, cscope

所以，我在一个糟糕的 ssh 连接上运行 emacs，并且我将它设置为使用 cscope。因为这个，我不能使用 X ......因此我在 putty 中运行 emacs。但是，当我使用 cscope 搜索某些内容并打开另一个缓冲区时，我无法访问 cscope 告诉我该项目所在的文件和行号的链接。当我进入行号并按回车键时，emacs 告诉我“缓冲区是只读的”（它实际上是在尝试插入新行而不是跟随链接）。有谁知道我可以如何关注这些链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T00:24:15.120

我不确定 cscope - 但是您应该能够通过在包含所有链接的缓冲区中执行“Ctrl-h m”来找到适当的键绑定。这应该会打开另一个缓冲区，显示所有活动模式的帮助/键绑定。

例如，如果您在 grep 结果缓冲区中执行相同的操作，则它指示键绑定“Cc Cc compile-goto-error”，该键用于在 grep 行号处打开文件（因此它可能是 cscope 的相同键）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-10T21:54:27.683

作为一种解决方法，我在 cscope 结果行上按*<space>键。*它在另一个框架中显示代码，尽管它没有将光标定位在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T20:09:25.817

在 xcscope.el 中更改此行修复了我计算机上的问题。

```
-(define-key cscope-list-entry-keymap [return] 'cscope-select-entry-other-window)
+(define-key cscope-list-entry-keymap (kbd "RET") 'cscope-select-entry-other-window) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-14T02:21:44.503

你可以在 Tramp 模式下使用 cscope 吗？我对 cscope 不熟悉，但我使用tramp 模式通过SSH 连接远程读取/写入文件取得了很好的效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-02T14:33:29.077

我相信`GNU find version 4.2`及以上支持`-L`遵循符号链接。因此，

```
find -L . -name *.[ch] > cscope.files
cscope -b -R -q -i cscope.files 
```

可能运作良好

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T10:22:18.647

另一种解决方法。只需键入“o”即可选择您想要的内容。这意味着 cscope-select-entry-one-window :)

# mobile - 为可以推断出我在做什么的小工具编写什么程序？终极生活黑客？

> ID：364497
> 
> 赞同：5
> 
> 时间：2008-12-12T23:33:20.387
> 
> 标签：mobile, gps

这不是一个真正的编程问题，更多的是一个*想法*问题。忍受我。

我姐姐给了我一台用得很好的诺基亚 N95。我真的不需要它，但我希望它为它做一些编程。它支持几种语言，其中我可以使用 Python。

我的问题是：如何处理它？如果我想一想，它可以提供很多东西：我可以对 GPS、运动传感器、无线互联网、声音和视觉捕捉进行编程；它有很多硬盘空间，可以播放声音和视频等。

组合似乎是无限的。在我看来，它是一个可以轻松随身携带的设备，可以访问一个巨大的数据存储库（互联网，以及其中的我的个人数据），并且可以知道我是否坐在家里，在工作，或在某处移动。它基本上可以读取我的谷歌日历以检查我*是否应该*在我不在的地方——也许给我公共汽车时刻表去我应该去的地方。它可以检查它是否靠近我的家，因此可以检查我的家用 PC 蓝牙/wifi。也许可以从我的台式电脑中获取我最近的工作文件，以及最新的每日秀，以便乘坐公交车去上班。它可以检查我的图书馆帐户，看看我的书是否到期，并提醒我早上把它们带走。根据我在谷歌日历中标记的班次设置闹钟。

基本上，我有一个设备可以分析我的时间（带有我的数据的日历等）和空间（gps、载波单元 ID）的运动。通过代理，它可以识别上下文情况——我可以存储我当地的杂货店 gps 坐标或小区桅杆 ID，它可以提醒我带咖啡。

就像我说的那样，可能性似乎是无限的，因此令人困惑。还有其他人有这些伪幻想的渴望来编写这样的东西吗？或者有什么类似的想法？这种设备如何融入并帮助您的生活？

我希望我们可以做一些头脑风暴。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-12T23:43:03.690

“Gotta Leave” - 计算公交车时间、距离公交车站多远的提醒，并显示倒计时，直到您“可以”离开（绿色）、“应该”离开（黄色）、“必须”离开（橙色）和“必须跑到那里”（红色）。

作为输入，它需要您想乘坐的公交车号。你打开它，它会找到你，找到离你最近的几个公交车站，估计你的步行速度为 2/mph，并计算你何时需要离开你要去的地方，等待 5 分钟或更短时间到达公交车。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-13T00:06:00.883

您应该选择任何一个并实施它。

从哪里开始并不重要，重要的是你实际上是从哪里开始的。不要专注于目的地，迈出一步，看看旅程有什么。

这样做是为了一笑而过，当你找到你的杀手级应用程序和你没有找到时，你的期望都将是正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-13T00:26:16.207

“电话回家” - 如果您向手机发送丢失/被盗的消息，则用于报告回家的界面。从手机持有者的角度来看必须是静音操作

选项：

*   自毁模式可防止窥探您的数据
*   每隔 10 分钟继续使用它的位置呼叫一次，直到发送解锁指示手机已找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T23:53:15.680

这与我在使用 android 时遇到的问题相同（尽管是 java 而不是 python）。潜力正在瘫痪:)

我建议查看已经为在该手机上做很酷的事情而编写的库，然后利用它们进行构建——这是一个提供灵感、方向和良好开端的系统。例如，在 android 端，我正在玩弄“zxing”，一个可以让你通过手机摄像头读取条形码的库。那是它自己的可能性子宇宙，但至少它给了我一个前进的方向。“利用物理附近的产品信息做一些很酷的事情”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-13T00:23:19.833

“上班迟到” - 确定您是否不在工作，用蜂鸣器提醒您，并准备电话拨打病假电话。如果你要迟到也可以使用。

输入：您的病号。你应该上班的时间。你的家在哪里，你的工作在哪里

可选的：

*   发一个短信
*   发布到在线输入/输出板
*   如果您还在家里，请发出警报
*   如果您仍然在家，请打电话请病假，如果您不在家，请发送“我要迟到了”的信息

喜剧选项： - 如果您没有响应十个警报，请拨打 911

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-13T01:18:11.313

为了补充其他人所说的话，想出某种办公室 GPS（也许通过 WiFi？它*有*WiFi 吗？）并告诉你什么时候需要去开会。

# asp.net - system.net.mail.smptclient 是否与服务器断开连接？

> ID：364501
> 
> 赞同：1
> 
> 时间：2008-12-12T23:38:24.197
> 
> 标签：asp.net, email, .net-2.0

我们的网络系统中有几个页面使用 .net system.net.mail 控件发送电子邮件。事情一直很好，除了现在开始看起来 smptclient 类实际上可能没有与服务器断开连接，因此 SMTP 服务器使该连接保持打开状态，我们最终将允许的连接数最大化尽管一次只发送一封电子邮件，但在 SMTP 服务器上一次打开。

（作为记录，这是一个用 VB 编写的 .net 2.0 asp.net 应用程序，我们相当有信心这不是某种安全/病毒/垃圾邮件通过情况。）

Google 和 MSDN 没有提供任何结论性的信息，但博客条目中的异端足以证实我们可能没有产生幻觉。

有没有其他人有过这个问题？（并设法修复它？）

当然，如果它运行良好，并且我们*产生*幻觉，那也很高兴知道。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T00:39:02.873

使用 SmtpClient 无法立即发送电子邮件的问题是因为在某些情况下，它没有在应该发送 SMTP 命令“QUIT”时发送（即它没有正确断开连接）。我过去曾使用以下代码强制断开连接：

```
var smtp = new SmtpClient();
smtp.ServicePoint.MaxIdleTime = 1;
smtp.ServicePoint.ConnectionLimit = 1;
smtp.Send(message); 
```

这会强制 smtpclient 对象尽早断开连接。此外，请确保您的 smtpclient 实例很快就超出了范围（即不要在某处存储对它的静态引用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-12T23:47:00.967

MailMessage 发送后，您是否妥善处理了它？我从来没有看到任何迹象表明 SmtpClient 没有关闭它的连接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T00:03:24.757

您是否检查了 StmpClient 类的 StmpDeliveryMthod 属性？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T00:08:56.460

**SysInternals（现为 Microsoft）的TcpView**（\\live.sysinternals.com\Tools\Tcpview.exe）是此类“**我是否已连接**”问题的便捷工具

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-13T00:32:26.693

确保在邮件服务器上设置了这些（假设是 windows）-

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters] "TcpTimedWaitDelay"=dword:0000001e "MaxFreeTcbs"=dword:000007d0 "MaxUserPort"=dword:0000fffe

# vb6 - 我可以通过 Project 启用哪些额外的“标准”VB6 控件

> ID：364503
> 
> 赞同：0
> 
> 时间：2008-12-12T23:40:59.637
> 
> 标签：vb6

您可以通过项目>组件在 VB6 中启用许多其他控制“包”（库）。

我正在尝试为 Sheridan SScommand 和 SSframe 控件找到好的替代品。但我也想找到其他控件，例如选项卡式对话框。

I'm not sure which of the ones in the list of Components are ones that: a. I can distribute b. Are fairly mature and well supported (or at least were when development on VB6 ended).

Any tips?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-15T13:34:06.533

如果您长期维护 VB6（或 VB.NET）应用程序，我强烈建议您尽量减少使用 3rd 方控件。第三方控件非常适合一次性“现在”。然而，对于长期维护，它们是一个痛苦的处理，因为第三方供应商的命运导致支持停止。

对于 Threed 控件包等外观控件尤其如此。我们最终制作了我们自己维护的面板控件。这是一项一次性投资，多年来使支持变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T04:23:37.040

以下是 VB 附带的控件列表：http: [//support.microsoft.com/kb/194784](http://support.microsoft.com/kb/194784)

列出了 Sheridan Controls。我不知道他们的支持程度如何：

控件摘要 以下是 Visual Basic 不同版本附带的 ActiveX 控件文件的摘要：

ActiveX 控件文件名版本版本*

* * *

ADO 数据控制 6.0 (OLEDB) MSADODC.ocx 6.00.8171 L,P,E

AXBrowse VCMAXB.ocx 6.00.8169 P,E

Cdlg RepCdlg.ocx 6.00.8161 P,E

图表控件 6.0 MSChart.ocx 6.00.8079 P,​​E

图表控件 6.0 (OLEDB) MSChrt20.ocx 6.00.8177 P,E

通讯控制 6.0 MSComm32.ocx 6.00.8169 P,E

通用控件-3 6.0 ComCt332.ocx 6.00.8169 P,E

通用对话框控件 5.0 (SP2) Comdlg32.ocx 5.01.4319 E

通用对话框控件 6.0 ComDlg32.ocx 6.00.8169 L,P,E

数据绑定网格控件 5.0(SP3) DBGrid32.OCX 5.1.814 P,E

数据绑定列表控件 6.0 DBList32.ocx 6.00.8169 L、P、E

DataGrid 控件 6.0 (OLEDB) MSDatGrd.ocx 6.00.8169 L,P,E

数据列表控件 6.0 (OLEDB) MSDatLst.ocx 6.00.8169 L、P、E

DataRepeater Control 6.0 (OLEDB) MSDatRep.ocx 6.00.8169 P,E

Desaware 动画按钮控件 AniBtn32.OCX 1.00.036 P,E

FlexGrid 控件 5.0 (SP2) Msflxgrd.ocx 5.01.4319 E

FlexGrid 控制 6.0 MSFlxGrd.ocx 6.00.8169 L,P,E

网格控制 Grid32.ocx 1.0.2908 P,E

网格控制 Grid32.ocx 1.00.2930 P,E

分层 FlexGrid 控件 6.0 MSHFlxGd.ocx 6.00.3005 L、P、E

互联网传输控制 6.0 MSInet.ocx 6.00.8169 P,E

MAPI 控制 6.0 MSMAPI32.ocx 6.00.8169 P,E

蒙版编辑控件 6.0 MSMask32.ocx 6.00.8169 P,E

MicroHelp Gauge Control Gauge32.ocx 1.00.0024 P,E

MicroHelp 键状态控制 KeySta32.ocx 1.00.0024 P,E

MSFlexGrid 向导 FlexWiz.ocx 6.00.8169 P,E

多媒体控制 6.0 Mci32.ocx 6.00.8169 P,E

大纲控件 MSOutl32.ocx 1.00.2922 P,E

Outrider SpinButton Control Spin32.ocx 1.00.0044 P,E

PictureClip Control 6.0 PicClp32.ocx 6.00.8169 P,E

Pinnacle-BPS 图形控制 Graph32.ocx 1.00.047 P,E

远程数据控制 6.0 Msrdc20.ocx 6.00.8169 E

富文本框控件 6.0 RichTx32.ocx 6.00.8169 L,P,E

脚本控制 1.0 MSScript.ocx 1.0.02604 P,E

SysInfo 控制 6.0 SysInfo.ocx 6.00.8169 P,E

选项卡式对话框控件 5.0 (SP2) Tabctl32.ocx 5.01.4319 E

选项卡式对话框控件 6.0 TabCtl32.ocx 6.00.8169 L、P、E

THREED32 Threed32.ocx 1.00.0041 P,E

Vbsql OLE 自定义控制模块 Vbsql.ocx 6.50.163 E

VisModelBrowser VCMVMB.ocx 6.00.8169 P,E

Visual Basic 6.0 应用程序向导 AppWiz.OCX 6.00.8177 L,P,E

Visual Basic 6.0 数据表单向导 DataForm.ocx 6.00.8169 P,E

Visual Basic 6.0 MSChart 向导 ChartWiz.ocx 6.00.8177 P,E

无窗口控件 6.0 MSWLess.ocx 6.00.8169 P,E

Windows 通用控件 5.0 (SP2) Comctl32.ocx 5.1.4319 E

Windows 通用控件 5.0 (SP2) ComCtl32.ocx 6.00.8022 L,P,E

Windows 通用控件 6.0 MSComCtl.ocx 6.00.8177 L,P,E

Windows 通用控件 Comctl32.ocx 1.00.2415 E

Windows 通用控件-2 5.0 (SP2) Comct232.ocx 5.01.4319 E

Windows 通用控件-2 5.0 (SP2) ComCt232.ocx 6.00.8022 L,P,E

Windows 通用控件-2 6.0 MSComCt2.ocx 6.00.8177 L,P,E

Winsock 控制 6.0 MSWinsck.OCX 6.00.8169 P,E

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-15T23:36:00.563

我发现[VB Accelerator](http://vbaccelerator.com/home/VB/Code/Controls/index.asp)上的控件作为 VB6 默认值和商业产品的替代品非常有用。它们是开源的，因此您可以进行更改，但它们足够稳定，我只是偶尔需要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-05T17:59:13.773

我会避免来自threed32.ocx 的Sheridan SS 控件。[Vista 不支持](http://msdn.microsoft.com/en-us/vbrun/ms788708.aspx)它们。我同意一般来说最好尽量减少对第三方控件的依赖，因为控件创建者不太可能仍然支持它们。

# asp.net-mvc - 你如何在asp.net mvc中提交下拉列表

> ID：364505
> 
> 赞同：23
> 
> 时间：2008-12-12T23:42:12.553
> 
> 标签：asp.net-mvc, drop-down-menu, onchange

```
<% using (Html.BeginForm() { %>

  <%=Html.DropDownList("TopItemsList", ViewData["ListData"], new { onchange="[???]" })%>

<% } %> 
```

在上面的示例中，您应该将 onchange 设置为什么值？或者，您如何获得正确的表格？

Ajax.BeginFrom 有什么不同吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2008-12-12T23:44:44.903

试试这个：

```
<%=Html.DropDownList("TopItemsList", ViewData["ListData"], new { onchange="this.form.submit();" })%> 
```

中的每个表单元素都有一个“form”属性，该属性指向包含该元素的表单。

是的，使用“HTML”。和“阿贾克斯”。有区别。阿贾克斯。表示将使用部分页面更新，并且不会重新加载整个页面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-12-22T14:11:37.693

你为什么要混合你的 html 和 javascript？

删除 onchange 属性并添加一些 JQuery：

```
$("#TopItemsList").change(function () {

    $("input[type=submit]").click();

}); 
```

# cocoa-touch - iPhone应用程序退出时调用什么方法？

> ID：364514
> 
> 赞同：4
> 
> 时间：2008-12-12T23:49:23.067
> 
> 标签：cocoa-touch

我知道 -applicationWillResignActive 会在来电时被调用，但是如果用户点击“退出”按钮（iPhone 前面的唯一按钮），是否有标准方法被调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-12T23:57:16.390

`- (void)applicationWillTerminate:(UIApplication *)application`，在 UIApplicationDelegate 协议中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-20T09:01:22.760

我做了一些尝试，我正在使用 iPhone SDK 4，当你按下“退出”按钮时，应用程序调用了两种方法：

```
(void)applicationWillResignActive:(UIApplication *)application
(void)applicationDidEnterBackground:(UIApplication *)application 
```

# python - 在 Python 中，如何按排序键顺序遍历字典？

> ID：364519
> 
> 赞同：220
> 
> 时间：2008-12-12T23:57:05.143
> 
> 标签：python, sorting, dictionary

有一个以以下结尾的现有函数，其中`d`是字典：

```
return d.iteritems() 
```

返回给定字典的未排序迭代器。我想返回一个遍历*key*排序的项目的迭代器。我怎么做？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2008-12-13T00:49:38.063

尚未对此进行非常广泛的测试，但可以在 Python 2.5.2 中使用。

```
>>> d = {"x":2, "h":15, "a":2222}
>>> it = iter(sorted(d.iteritems()))
>>> it.next()
('a', 2222)
>>> it.next()
('h', 15)
>>> it.next()
('x', 2)
>>> 
```

如果您习惯于使用`for key, value in d.iteritems(): ...`而不是迭代器，这仍然适用于上述解决方案

```
>>> d = {"x":2, "h":15, "a":2222}
>>> for key, value in sorted(d.iteritems()):
>>>     print(key, value)
('a', 2222)
('h', 15)
('x', 2)
>>> 
```

在 Python 3.x 中，使用`d.items()`而不是`d.iteritems()`返回迭代器。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2008-12-12T23:57:53.613

使用[`sorted()`](http://pydoc.org/2.5.1/__builtin__.html#-sorted)功能：

```
return sorted(dict.iteritems()) 
```

如果您想要对排序结果进行实际迭代，因为`sorted()`返回一个列表，请使用：

```
return iter(sorted(dict.iteritems())) 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2008-12-13T00:44:32.723

字典的键存储在哈希表中，因此这是它们的“自然顺序”，即伪随机。任何其他排序都是字典消费者的概念。

sorted() 总是返回一个列表，而不是一个字典。如果你传递给它一个 dict.items() （它产生一个元组列表），它将返回一个元组列表 [(k1,v1), (k2,v2), ...] 可以在循环中使用在某种程度上非常像字典，但*它无论如何都不是字典*！

```
foo = {
    'a':    1,
    'b':    2,
    'c':    3,
    }

print foo
>>> {'a': 1, 'c': 3, 'b': 2}

print foo.items()
>>> [('a', 1), ('c', 3), ('b', 2)]

print sorted(foo.items())
>>> [('a', 1), ('b', 2), ('c', 3)] 
```

以下感觉就像一个循环中的 dict，但它不是，它是一个元组列表被解压缩到 k,v 中：

```
for k,v in sorted(foo.items()):
    print k, v 
```

大致相当于：

```
for k in sorted(foo.keys()):
    print k, foo[k] 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2008-12-13T00:00:20.020

格雷格的回答是对的。请注意，在 Python 3.0 中，您必须这样做

```
sorted(dict.items()) 
```

会`iteritems`消失的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-07-08T17:49:52.737

您现在也可以`OrderedDict`在 Python 2.7 中使用：

```
>>> from collections import OrderedDict
>>> d = OrderedDict([('first', 1),
...                  ('second', 2),
...                  ('third', 3)])
>>> d.items()
[('first', 1), ('second', 2), ('third', 3)] 
```

在这里，您可以看到2.7 版本[的新增功能页面和](http://docs.python.org/dev/whatsnew/2.7.html)[OrderedDict API](http://docs.python.org/dev/library/collections.html#collections.OrderedDict)。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-06T20:53:01.927

一般来说，可以像这样对 dict 进行排序：

```
for k in sorted(d):
    print k, d[k] 
```

对于问题中的特定情况，对 d.iteritems() 进行“替换”，添加如下函数：

```
def sortdict(d, **opts):
    # **opts so any currently supported sorted() options can be passed
    for k in sorted(d, **opts):
        yield k, d[k] 
```

所以结束行从

```
return dict.iteritems() 
```

到

```
return sortdict(dict) 
```

或者

```
return sortdict(dict, reverse = True) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-04-11T04:39:35.657

```
>>> import heapq
>>> d = {"c": 2, "b": 9, "a": 4, "d": 8}
>>> def iter_sorted(d):
        keys = list(d)
        heapq.heapify(keys) # Transforms to heap in O(N) time
        while keys:
            k = heapq.heappop(keys) # takes O(log n) time
            yield (k, d[k])

>>> i = iter_sorted(d)
>>> for x in i:
        print x

('a', 4)
('b', 9)
('c', 2)
('d', 8) 
```

这个方法仍然有一个 O(N log N) 排序，但是，在一个简短的线性 heapify 之后，它会按排序顺序生成项目，当你并不总是需要整个列表时，理论上它会更有效。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-12-09T10:25:31.380

如果您想按插入项目的顺序而不是键的顺序进行排序，您应该查看 Python 的[collections.OrderedDict](http://docs.python.org/py3k/library/collections.html?highlight=collections.ordereddict#collections.OrderedDict)。（仅限 Python 3）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-13T01:27:02.513

sorted 返回一个列表，因此当您尝试对其进行迭代时会出现错误，但是因为您无法订购 dict 您将不得不处理一个列表。

我不知道您的代码的更大上下文是什么，但您可以尝试将迭代器添加到结果列表中。也许像这样？：

```
return iter(sorted(dict.iteritems())) 
```

当然，您现在将获得元组，因为 sorted 将您的 dict 变成了元组列表

例如：说你的 dict 是： `{'a':1,'c':3,'b':2}` sorted 把它变成一个列表：

```
[('a',1),('b',2),('c',3)] 
```

因此，当您实际迭代列表时，您会返回（在此示例中）一个由字符串和整数组成的元组，但至少您将能够迭代它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-18T09:57:20.500

假设您使用的是 CPython 2.x 并且有一个大字典 mydict，那么使用 sorted(mydict) 会很慢，因为 sorted 会构建 mydict 键的排序列表。

在这种情况下，您可能想查看我的 ordereddict 包，其中包括 C 中的 C 实现`sorteddict`。特别是如果您必须在字典生命周期的不同阶段（即元素数量）多次检查键的排序列表。

[http://anthon.home.xs4all.nl/Python/ordereddict/](http://anthon.home.xs4all.nl/Python/ordereddict/)

# asp.net - 如何在 ASP.NET 页面上使用框架？

> ID：364522
> 
> 赞同：7
> 
> 时间：2008-12-12T23:57:56.030
> 
> 标签：asp.net, iframe

你如何在asp.net页面上正确使用框架，所以我有一个左框架和一个右框架，当我单击左框架中显示的页面上的链接时，它会在右框架中加载相应的页面？最重要的是，我需要在所有正确框架的页面上都有一个母版页。

我该怎么做呢？还是有其他方法可以达到相同的效果？

谢谢，雷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T03:03:07.700

是的。框架是邪恶的。你不应该真的使用它们。

它们会引起问题，但在（非常）少数极端情况下，它们可能有用且在开发时间方面更便宜，它们仍然大量出现在生成的 api 文档中。

但无论如何，看你如何问如何使用它们，我们开始吧

首先，这取决于您是否要使用框架集，或者只是将一些 iframe 放入页面中，iframe 可能更容易，但会描述一个框架集。下面的一些参考资料。如果您在archive.org 上搜索wayback 机器，您会看到一些示例，以及Sun 的在线Java 文档曾经在框架集中，但多年没有看过它们。

[http://www.w3schools.com/tags/tag_frameset.asp](http://www.w3schools.com/tags/tag_frameset.asp)
[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

基本上，每个框架的内容都是单独的页面，并且框架本身必须在包含框架集的文件中命名，这可能看起来有点像这样：

```
<html>
<frameset cols="25%,75%">
  <frame name="_left" src="nav.aspx" />
  <frame name="_right" src="foo.aspx" />
</frameset>
</html> 
```

所以，为了练习起见，给左边的框架属性 name="__left" 和 name="__right" 为右边。

**关于链接的重要信息**
*右框架内任何需要定位到该框架的链接都应该有 target="_self"，任何需要转义框架并设置父页面位置的链接都应该有 target="_top"。*

*左框架中的链接需要具有属性 target="_right"，并且在单击链接时应该将适当的文档加载到右框架中。*

其余部分非常正常，将右手框架的内容视为普通页面，将母版页设为正常页面，所有正常的 html、head、body 标签等。aspnet 中的框架没有什么不同或php 或其他任何东西，它只是 html。

你有它，我可能错过了一些东西，因为它们不是我这些天经常使用的东西，但有时，当可访问性和所有无关紧要时，它们可能是一个快速而肮脏的修复。例如，Web 服务站点上的一些不起眼的管理页面，一个了解正在发生的事情的极客每年会访问 12 次。

所以，它们是邪恶的，但这不应该阻止你了解它们，你会真正理解为什么它们是邪恶的，并就何时以及何时不使用它们形成你自己的看法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T00:13:43.800

由于某些原因，框架在现代 Web 开发中通常不受欢迎（我不会在这里讨论它们）。你最好使用 CSS 来制作 2 列布局。有很多关于如何在网络上制作这样的布局的好教程。一个例子可以在这里找到：

[http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/)

该站点上的示例如下所示：

[http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/finished.html](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/finished.html)

如果您希望布局适合屏幕，只需为`#main`. 完成后，您只需将其添加到您的 CSS 中：

```
#main{height:600px} 
```

如果它不适合您，请将“600px”更改为您想要的任何高度。

要在母版页上使用它，只需让您的母版页遵循上面的示例，然后将`#main` `<div />`标签内部设为主要 ContentPlaceholder

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-13T01:13:31.900

简短而甜蜜的答案？

框架和框架集在 Web 开发中不再是必需或有用的，它们产生的问题比它们解决的问题多得多。

更详细地说：

您可能会使用框架来帮助完成三件事：

**1）**你想左边有一个导航栏，右边有一个单独的内容区域，基本上是垂直分隔的。

**非框架解决方案：**

使用常规 HTML 和 CSS 创建 2 列布局。请参阅其他一些资源或“[您将永远需要的 CSS 布局的最后指南](http://searchlightdigital.com/the-last-guide-to-css-layout-youll-ever-need)”。

**2）**您希望能够拥有一个带有导航的文件，而不必在几个不同的页面上拥有它的版本。

**非框架解决方案：**

将导航保存在单独的文件中，并将其包含在所有内容页面中。在 ASP.NET 中，您可以创建一个 UserControl 或 .ascx 文件并将其包含在您的所有更改中。将您的导航放在 UserControl 中，您只需在一处进行更改。

**3)**您希望只需要重新加载的内容框架而不是导航框架的更快性能。

**非框架解决方案：**

加载整个页面的额外时间可以忽略不计，一次提供单个文档的简单性足以弥补微小的性能损失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-15T08:10:45.520

您可以将 iframe 代码放在正文部分。下面给出一个例子。尝试这个 ：）

```
<iframe width="100%" height="600px" scrolling="no" seamless="yes" src="https://facebook.com"></iframe> 
```

# java - 是否有用于 Java 反射的通用“后端”库

> ID：364523
> 
> 赞同：12
> 
> 时间：2008-12-13T00:00:06.993
> 
> 标签：java, reflection, dynamic, invoke

我目前正在使用一种用 Java 实现的专门的、解释性的编程语言。作为该语言的一小部分，我想添加调用 Java 的功能。在深入探讨反射的所有细节之前，我想知道是否有人知道一个通​​用库，用于执行反射调用 Java 代码的“后端”部分。

也就是说，我将一个字符串（我定义了语法）解析为一些表示 Java 方法调用（或构造函数，或字段访问）的数据结构，然后将该数据结构传递给调用该调用并返回结果的库。特别是，我希望它已经处理了我不想弄清楚的所有边缘情况：

*   根据参数类型自动选择正确的方法（如智能 Class.getDeclaredMethod()）
*   处理数组和普通对象引用之间的区别
*   ETC

我花了一点时间研究 JVM 上的动态语言的实现，但这些通常比我正在寻找的要复杂得多，或者针对特定语言进行了高度优化。

另一种选择是将我的语法转换为某种动态语言的字符串并用 Rhino 或其他东西调用它，但这比我正在寻找的开销要多一些。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-13T21:00:01.503

试试[FEST 反射](https://github.com/alexruiz/fest-reflect)模块。这是一种进行 Java 反射的流畅方式。例如：

```
 String name = method("get").withReturnType(String.class)
                         .withParameterTypes(int.class)
                         .in(names)
                         .invoke(8); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-15T08:52:21.283

只是对您自己的答案的评论；实际上 beanutils 支持在给定一组参数的情况下获得“近距离匹配”。请参阅[getMatchingAccessibleMethod()](http://commons.apache.org/beanutils/v1.8.0/apidocs/org/apache/commons/beanutils/MethodUtils.html#getMatchingAccessibleMethod(java.lang.Class,%20java.lang.String,%20java.lang.Class[]))

BeanUtils 真的很强大，并且有很多用于检查类的实用方法。构造函数自然可以使用相同的支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-12-29T19:16:02.033

如果您正在寻找简单性，我创建了一个名为[jOOR](http://code.google.com/p/joor/)的简单库，以便于访问 Java 中的反射 API。它支持最基本的操作，而无需构建庞大的 API。这是 jOOR 代码的示例：

```
String world = 
on("java.lang.String") // Like Class.forName()
.create("Hello World") // Call the most specific matching constructor
.call("substring", 6)  // Call the most specific matching substring() method
.call("toString")      // Call toString()
.get()                 // Get the wrapped object, in this case a String 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-13T00:46:15.653

看看[Java 的脚本支持](http://java.sun.com/javase/6/docs/api/javax/script/package-summary.html)；我相信它会帮助你解决你的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-13T19:59:36.507

看看[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-21T06:10:07.587

我也会强烈考虑看看 springs ReflectionUtils 类。非常强大的反射处理。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-06-03T15:56:29.787

从死里复活：

```
invoke(Object object, String methodName, Object[] args) 
```

Apache Commons lang 正是这种方法。 [MethodUtils#invoke](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/reflect/MethodUtils.html#invokeMethod%28java.lang.Object,%20java.lang.String,%20java.lang.Object%5B%5D%29)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-12-21T11:40:14.297

我已经开始创建一个与[hamcrest](http://code.google.com/p/hamcrest/%20hamcrest)和[lambdaj集成的库 com.lexicalscope.fluent-reflection:fluent-reflection](http://code.google.com/p/lambdaj/%20lambdaj)

你可以这样写代码；它调用一个类中的所有 post 构造注释方法：

```
forEach(
   object(subject).methods(annotatedWith(PostConstruct.class)),
   ReflectedMethod.class).call(); 
```

博客文章在这里： http: [//www.lexicalscope.com/blog/category/software-projects/fluent-reflection/](http://www.lexicalscope.com/blog/category/software-projects/fluent-reflection/)

此处的文档：http: [//fluent-reflection.lexicalscope.com/](http://fluent-reflection.lexicalscope.com/)

你可以从这里的 Maven 中心获取它： [http ://repo1.maven.org/maven2/com/lexicalscope/fluent-reflection/fluent-reflection/](http://repo1.maven.org/maven2/com/lexicalscope/fluent-reflection/fluent-reflection/)

它目前缺少一些基本功能，例如访问字段，但它适用于方法。可能需要一段时间才能达到一个真正的功能稳定点（比如一两年），因为我只是偶尔工作。但它是按照相当高的质量标准开发的（我希望如此），而且它是开源的，所以如果它具有您需要的所有功能，您基本上可以像现在一样使用它（如果您愿意，您可能只需要稍微调整一下代码）使用已发布的较新版本）。我现在正在一些生产代码中使用它。

它被设计为非常可扩展，因此您可以插入策略以以松散耦合（组合）的方式找到您想要的方法。因此，如果它没有您想要的确切方法查找策略，希望很容易添加它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-13T21:41:58.017

我最终接受了亚历克斯的建议。BeanUtils 对 bean 有很大帮助，但我不想只使用 Beans。FEST 看起来真的很酷，我已将其添加为书签以供进一步研究，但与 BeanUtils 一样，它似乎并不能解决我认为的难题。即，给定方法名称和参数列表，选择最“适合”参数的方法。如果一个方法采用浮点数并且我有一个双精度数，它应该足够聪明，不会因为签名不完全匹配而拒绝该方法。

显然，构建在 JVM 上的脚本语言解决了这个问题，但由于语言特定的优化，其方式比我需要的要复杂得多。因此，由于这是一个次要的实验性特性，我选择了一个使用 Java 1.6 中的脚本引擎支持（尤其是 JavaScript）的快速解决方案。这是基本思想：

```
private ScriptEngine engine = ... initialize with JavaScript engine ...

private Object invoke(Object object, String methodName, Object[] args) 
   throws RhsFunctionException
{
   // build up "o.method(arg0, arg1, arg2, ...)"
   StringBuilder exp = new StringBuilder("o." + methodName);
   engine.put("o", object);
   buildArgs(arguments, exp);

   try {
      return engine.eval(exp.toString());
   }
   catch (ScriptException e) {
      throw new RhsFunctionException(e.getMessage(), e);
   }
}

private void buildArgs(Object[] args, StringBuilder exp)
{
   // Use bindings to avoid having to escape arguments
   exp.append('(');
   int i = 0;
   for(Symbol arg : args) {
         String argName = "arg" + i;
         engine.put(argName, arg);
         if(i != 0) {
            exp.append(',');
         }
         exp.append(argName);
         ++i;
   }
   exp.append(')');
} 
```

显然还有更多内容，但这是基本思想。我真的不喜欢建立一个字符串并对其进行评估，但是通过使用 Alex 建议的绑定，我避免了大多数转义的陷阱。此外，我有一个干净、简单的接口，如果证明有必要，我可以用“真实”实现替换它。

任何反馈或替代解决方案都非常受欢迎。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-11-07T06:36:39.247

在阅读了这个帖子后，我编写并开源了这段代码，也许你会发现它很有用。

[https://github.com/yclian/Reflects.java/blob/master/src/test/java/my/jug/reflects/ReflectsTest.java](https://github.com/yclian/Reflects.java/blob/master/src/test/java/my/jug/reflects/ReflectsTest.java)

它的灵感来自 Guava，因此您可以使用它`Predicate`来过滤您喜欢的方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-11T16:14:38.277

有[反射](https://github.com/ronmamo/reflections)项目，我相信与上面列出的其他方法相比，它是支持 Java 8 的最新实用反射库，并且最终是截至 2020 年 3 月执行一些高级反射操作的最佳方式。

上面写着：

> 发布 org.reflections:reflections:0.9.12 - 支持 Java 8
> ...
> Reflections 库每月从 Maven Central 下载超过 250 万次，并被数千个项目和库使用。我们正在寻找维护人员来协助审查拉取请求和管理发布，请联系。
> ...
> Reflections 扫描您的类路径，索引元数据，允许您在运行时查询它，并且可以为项目中的许多模块保存和收集该信息。

与 Java 标准反射结合使用，它应该可以满足您的所有需求。

# ant - 如何在 ant jar 文件中包含目录结构？

> ID：364531
> 
> 赞同：11
> 
> 时间：2008-12-13T00:09:34.137
> 
> 标签：ant, jar

我有点像蚂蚁新手，我无法正确制作罐子。例如，假设我想用我的 StringUtil 类制作一个 jar。使用下面的 ant 指令，我可以创建 jar，但问题是目录结构丢失了。它只是将 StringUtil.class 放在 jar 的基本目录中。如何更正这个 ant 指令，使 StringUtil.class 位于 jar 的 com/test 目录中？

```
<jar destfile="myjar.jar" >
  <fileset file="${build}/com/test/StringUtil.class"/>
</jar> 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-13T00:21:06.093

您需要告诉 Ant 从基本目录构建 jar，然后告诉它只包含所需的文件。像这样：

```
<jar destfile="myjar.jar" >
  <fileset dir="${build}" includes="com/test/StringUtil.class"/>
</jar> 
```

[`<fileset>`](http://ant.apache.org/manual/Types/fileset.html)这是标签的文档。

# c# - 在 Java 服务器和 C# 客户端之间共享数据对象的最快方法

> ID：364535
> 
> 赞同：0
> 
> 时间：2008-12-13T00:13:13.487
> 
> 标签：c#, java, serialization

在 Java 和 C# 之间共享数据结构的最快方法是什么？我想要一些我可以真正发送“汽车”对象或“foo”对象并在服务器和客户端上对其进行序列化和反序列化的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T09:26:38.737

WSDL (SOAP) 是*相当*可互换的。如果你想要一些不那么健谈的东西，像谷歌的“协议缓冲区”、“ICE”（ZeroC）等提供可互换的二进制序列化和代码生成。

对于 .NET / C#，目前这里有两个可行的协议缓冲区[实现](http://code.google.com/p/protobuf/wiki/OtherLanguages)；protosharp 本质上是不活动且不完整的）- 两者都可以，但目前都没有完整的 RPC 堆栈，因此您必须自己处理消息传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T00:22:33.827

您也许可以使用 IKVM，它是 .NET 之上的类似 Java 的环境；您可以在 IKVM 上使用 Java 序列化并使用互操作来使用“常规”.NET 语言中的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-13T00:34:24.617

看起来[IKVM](http://www.ikvm.net/)似乎是个好主意。但是，如果这不能满足您的需求，尤其是因为它仍在开发中。但是，Uri 的帖子通过使用 xml 和传递消息为您指明了一个很好的方向，这些消息可以在任一侧重新构建在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-13T02:08:42.677

您能否在服务器上使用 SOAP Web 服务并让客户端使用该 Web 服务？对象的数据结构将在 Web 服务的 WSDL 中进行描述。

# vim - 如何客观地对编辑器的生产力进行基准测试？

> ID：364539
> 
> 赞同：5
> 
> 时间：2008-12-13T00:17:14.680
> 
> 标签：vim, editor, benchmarking

我不确定 Vim 是否让我比其他编辑器/ide 更高效，例如 Eclipse。

但不知何故，我在使用 Vim 时获得了一种强大的感觉，并注意到尝试其他编辑器的阻力。

示例：当我在其他编辑器中看到一些很酷的功能时，我想“ *Vi 可以做到这一点*（我只需要找到按键或配置插件）”

如何客观地对编辑器的生产力进行基准测试？

我理想的编辑器是：[Netbeans](https://netbeans.org)功能集和易用性，但具有 SublimeText 的性能和漂亮的外观。

**更新**
[Visual Studio Code](https://code.visualstudio.com)现在是我的主要代码编辑器。用于配置文件和快速编辑的
[Sublime Text 。](http://sublimetext.com/)
[Vim](http://vim.org/)用于 ssh 会话或使用宏进行编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T00:20:59.993

如果您喜欢在 vim 中编写代码，那么仅此一项就是使用 vim 的一个很好的理由。

一个工具能让你的工作效率提高 2%（根据一些研究），但你不太喜欢这个工具有什么好处？我告诉你，使用你喜欢的工具非常重要！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-13T00:38:58.070

我也沉迷于 Vi 输入模型，我确信它会让我更有效率。

当我使用其他一些编辑器时，我感到不舒服。当我使用 Visual Studio 时，我真的需要[ViEmu](http://www.viemu.com/)，在 Eclipse 中我使用[viPlugin](http://www.satokar.com/viplugin/)，等等。

前段时间我是 Emacs 用户，现在没有[Viper](http://sunsite.ualberta.ca/Documentation/Gnu/emacs-20.7/html_chapter/viper_2.html)就无法使用它。

然而，当您能够使用命令而不用考虑它们时，Vi 的生产力就真的来了。

因此，无论您使用何种编辑器，为了获得真正的生产力提升，编辑器都必须成为*您双手的延伸*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-13T00:44:27.170

我会说这些症状是您可能在 Vim 中更有效率的主观线索 - 对其他工具的挫败感可能是一个相当好的指标。

我会非常肯定地说，如果你对 Vim 的深入了解以至于对其他编辑器感到沮丧，那么切换所带来的任何生产力提升都可能非常小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T00:36:35.017

要*客观*地做到这一点，您需要一些可衡量的东西。

如果您有足够的空闲时间进行实验，我想您可以使用每个编辑器录制自己几个小时的视频，然后将与每个编辑器战斗的时间加起来...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-13T00:31:57.007

为什么不尝试几个不同的编辑器，看看您是否能*注意到*它们带来的任何生产力提升。如果您不选择最吸引您的那个，那么您将需要确定生产力的提高是否超过了您在使用 vim 时所感受到的快乐。

您可能还想为不同的框架/语言考虑不同的编辑器。我在我的大部分 C 和 Perl 编程中使用 vim，为非平凡的 Java 应用程序使用不同的编辑器，以及在 Rails 中开发的另一个编辑器，我还没有找到一个万能的编辑器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-17T09:22:28.740

**我建议简单地测量你的实际输出：**

*   使用 vim 一周，测量实际输出。将结果另存为`V`.
*   使用另一个编辑器一周并测量实际输出。将结果另存为`E`.

如果`V`< `E`，则另一个编辑器具有更好的生产力，否则 vim 对您来说是更好的选择。

* * *

请注意，困难的部分是*测量实际输出*。例如，代码总行数或`diff`一周的输出大小可能是糟糕的方法。此外，可能会发现，在第一周你编写了一些简单的代码，而在第二周你试图修复一个非常困难的错误。因此，您可能实际上是在将一个工作周与另一个工作周进行基准测试，而不是一个编辑器与另一个编辑器进行基准测试。

我想它归结为弄清楚**你想要完成什么，然后尽可能地决定作为客观的测量方法**。然后衡量哪个编辑器得到更好的结果。

我什至不会尝试测量实际的编辑器使用情况。可以实现一个非常高性能的编辑器，`dd if=/dev/urandom bs=1M count=1 > code.cpp`但是更改很高，因此您的代码质量很糟糕。如果输出很好，没有人会关心你是如何发出它的。

仅当您无法长时间实际使用编辑器时，才应计算实际的编辑器使用量；例如，如果编辑器经常需要在键盘和鼠标之间切换，您可能会产生 RSI 问题，尽管在短期内该编辑器将提供最佳工作效率。

# asp.net-mvc - ASP.NET MVC 中的 NHibernate 会话管理

> ID：364540
> 
> 赞同：28
> 
> 时间：2008-12-13T00:17:26.367
> 
> 标签：asp.net-mvc, nhibernate, orm

我目前正在玩 Jeffrey Palermo 的博客文章中的 HybridSessionBuilder 类：

[http://jeffreypalermo.com/blog/use-this-nhibernate-wrapper-to-keep-your-repository-classes-simple/](http://jeffreypalermo.com/blog/use-this-nhibernate-wrapper-to-keep-your-repository-classes-simple/)

使用此类，我的存储库如下所示：

```
public class UserRepository : IUserRepository
{
    private readonly ISessionBuilder _sessionBuilder;

    public UserRepository(ISessionBuilder sessionBuilder)
    {
        _sessionBuilder = sessionBuilder;
    }

    public User GetByID(string userID)
    {
        using (ISession session = _sessionBuilder.GetSession())
        {
            return session.Get<User>(userID);
        }
    }
} 
```

这是管理 NHibernate 会话/工厂的最佳方式吗？我听说过关于工作单元的事情，并为每个 Web 请求创建一个会话并在最后刷新它。据我所知，我目前的实现没有做任何这些。它基本上是依靠存储库从会话工厂中获取会话并使用它来运行查询。

以这种方式进行数据库访问有什么陷阱吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-12-16T19:20:51.873

您不应该将 ISession 包装在 using 语句中——将 ISessionBuilder 传递到存储库构造函数（依赖注入）的关键在于调用代码负责控制 ISession 的生命周期。通过将其包装在 using 中，在 ISession 上调用 Dispose()，您将无法延迟加载对象成员或将其持久化。

我们通过将 ISession 传递给存储库构造函数来做类似的事情。据我了解，Palermo 先生的代码只是添加了 ISession 的延迟初始化。我认为这不是必需的，因为如果您不打算使用它，为什么还要新建一个存储库？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-13T00:45:41.067

使用 ASP.Net MVC，您希望确保在控制器上的 Action 方法期间保持会话的生命周期，因为一旦您的控制器退出，您的所有数据都应该被收集。我不确定这种机制是否会对此有所帮助。

您可能想查看 S#arp Architechure，它是一组用于使用 nHibernate 构建 ASP.Net MVC 应用程序的库和指南。[http://code.google.com/p/sharp-architecture/](http://code.google.com/p/sharp-architecture/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-04-07T16:01:11.027

这是我在研究更多之后使用的设置。似乎工作得很好，并且没有像大多数指南那样在静态文件请求上创建 ISession 的烦人习惯：

[http://www.kevinwilliampang.com/2010/04/06/setting-up-asp-net-mvc-with-fluent-nhibernate-and-structuremap/](http://www.kevinwilliampang.com/2010/04/06/setting-up-asp-net-mvc-with-fluent-nhibernate-and-structuremap/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T05:20:17.033

我不会针对 NHibernate 的每个数据请求打开和关闭会话。我会使用许多其他人建议的工作单元库或做更多阅读。NHForge.org 正在起步，我相信有一些关于为一般 Web 应用程序设置 NHibernate 的做法。

我从 NHibernate 获得的“哇，那是很酷的时刻”之一就是在开发过程中利用延迟加载集合。不必为了在某些关联对象上显示数据而不必执行所有这些连接，这是一种很好的体验。

通过像这样关闭会话，上述情况是不可能的。

交易也可能会发生一些事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-16T20:01:10.787

刚刚找到了一个干净的解决方案，使用 Unity 为每个请求注入一个会话：

[http://letsfollowtheyellowbrickroad.blogspot.com/2010/05/nhibernate-sessions-in-aspnet-mvc.html](http://letsfollowtheyellowbrickroad.blogspot.com/2010/05/nhibernate-sessions-in-aspnet-mvc.html)

# mysql - SQL Server和MySql之间数据传输过程中出现的错误如何解决？

> ID：364545
> 
> 赞同：1
> 
> 时间：2008-12-13T00:19:33.490
> 
> 标签：mysql, sql-server-2005, ssis

我有一个 SSIS 包，它连接到 mysql 服务器并尝试从不同的表中提取数据并将行插入到 SQL Server 2005 数据库中。

我注意到的一个问题是，在它运行的任何给定时间，无论它在哪一步，它几乎总是无法将 mysql 的总记录导入 sql server。

没有抛出错误。

一天早上，它将拥有所有 1100 万条记录，而在下一次运行时，它将拥有 3K 到 17K 之间的任何记录。

有人注意到这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T07:23:06.283

我从两个独立的 MySQL 数据库导入数据——一个通过 Internet，一个在内部。我从来没有遇到过这类问题。您能描述一下您是如何设置与 MySQL 数据库的连接的吗？我使用 MySQL 网站上提供的 ODBC 驱动程序，并在我的数据流中使用引用 ODBC 连接的 ADO.NET 数据源进行连接。

至少可以防止自己加载不完整数据的一种可能方法是仅加载新记录。如果源表有一个 ID，并且记录一旦插入就永远不会改变，那么您可以通过首先检查您的数据库来输入最大 ID。

防止加载不完整数据的另一种可能方法是将 MySQL 数据库加载到目标服务器上的临时表中，然后仅加载尚未加载的记录。

另一种方法是将数据加载到临时表中，验证记录是否大于某个最小阈值，例如目标表的行数或每天预期的最小事务数，然后仅在此之后提交更改验证。如果行数不足，则在包上引发错误并发送通知电子邮件。引发错误的好处是您可以将 SQL Server 代理作业设置为重试该步骤，以定义尝试次数，以查看这是否可以解决问题。

希望这些提示对您有所帮助，即使它们不能直接解决问题的根本原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-21T12:51:42.383

我只通过 SSIS 尝试过 MySQL -> SQL Server 一次，但我发现的错误与 MySQL 日期时间没有转换为 SQL Server 日期时间有关。我原以为这会破坏整个数据流，但是根据您的配置，您可以将其设置为纯粹忽略坏行吗？

# php - 找到一个“最合适”的方程

> ID：364558
> 
> 赞同：12
> 
> 时间：2008-12-13T00:25:06.570
> 
> 标签：php, math

自从我上大学并知道如何计算最佳拟合线以来已经有一段时间了，但我发现自己需要这样做。假设我有一组点，我想找到这些点中最好的线。

确定最佳拟合线的方程式是什么？我将如何用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-13T00:40:03.683

这是[一篇文章](http://www.johndcook.com/blog/2008/10/20/comparing-two-ways-to-fit-a-line-to-data/)，比较了将线条拟合到数据的两种方法。需要注意的一件事是，有一个理论上正确但可能存在数值问题的直接解决方案。文章说明了为什么该方法会失败，并给出了另一种更好的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-13T00:35:51.960

最小二乘法 [http://en.wikipedia.org/wiki/Least_squares](http://en.wikipedia.org/wiki/Least_squares)。这本书[Numerical Recipes 第 3 版：科学计算的艺术（精装本）](https://rads.stackoverflow.com/amzn/click/com/0521880688) 包含实现最小二乘和其他技术的算法所需的一切。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-13T00:35:40.680

尽管您可以使用迭代方法，但您可以使用最小二乘法直接计算给定一组观测值的直线的斜率和截距。有关如何计算系数和给定点集的信息，请参阅[关于线性回归的 Wikipedia 文章](http://en.wikipedia.org/wiki/Linear_regression)的“单变量线性案例”部分。 `a``b``y = a + bx``(x,y)`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-13T00:43:17.390

从 wiki 页面实现，未经测试。

```
$sx = 0;
$sy = 0;
$sxy = 0;
$sx2 = 0;
$n = count($data);
foreach ($data as $x => $y)
{
    $sx += $x;
    $sy += $y;
    $sxy += $x * $y;
    $sx2 += $x * $x;
}
$beta = ($n*$sxy - $sx*$sy) / ($n*$sx2 - $sx*$sx);
$alpha = $sy/$n - $sx*$beta/$n;

echo "y = $alpha + $beta x"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-13T00:39:21.720

您可能想检查[线性回归](http://en.wikipedia.org/wiki/Linear_regression)，或更一般地说，[曲线拟合](http://en.wikipedia.org/wiki/Curve_fitting)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-13T00:45:22.113

额外的兴趣可能是这条线的拟合程度。为此，在 PHP 函数中使用 Pearson 相关性：

```
/**
 * returns the pearson correlation coefficient (least squares best fit line)
 * 
 * @param array $x array of all x vals
 * @param array $y array of all y vals
 */

function pearson(array $x, array $y)
{
    // number of values
    $n = count($x);
    $keys = array_keys(array_intersect_key($x, $y));

    // get all needed values as we step through the common keys
    $x_sum = 0;
    $y_sum = 0;
    $x_sum_sq = 0;
    $y_sum_sq = 0;
    $prod_sum = 0;
    foreach($keys as $k)
    {
        $x_sum += $x[$k];
        $y_sum += $y[$k];
        $x_sum_sq += pow($x[$k], 2);
        $y_sum_sq += pow($y[$k], 2);
        $prod_sum += $x[$k] * $y[$k];
    }

    $numerator = $prod_sum - ($x_sum * $y_sum / $n);
    $denominator = sqrt( ($x_sum_sq - pow($x_sum, 2) / $n) * ($y_sum_sq - pow($y_sum, 2) / $n) );

    return $denominator == 0 ? 0 : $numerator / $denominator;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-13T00:29:57.510

一种常用的方法是迭代地最小化您的点和拟合函数之间的平方 y 差之和。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-31T13:51:37.297

要补充 FryGuy 的答案，如果您需要一个也提供 R^2 的函数（以显示拟合的好坏）：

```
function mathTrend($data) {
    $sx = 0;
    $sy = 0;
    $sxy = 0;
    $sx2 = 0;
    $yTotal = 0;
    $n = count($data);
    if($n <= 1) {
        return false;
    }
    foreach ($data as $row)
    {
        $row = array_values($row);
        $x = $row[0];
        $y = $row[1];
        $yTotal += $y;
        $sx += $x;
        $sy += $y;
        $sxy += $x * $y;
        $sx2 += $x * $x;
    }
    $yAvg = $yTotal / $n;
    $m = ($n*$sxy - $sx*$sy) / ($n*$sx2 - $sx*$sx);
    $b = $sy/$n - $sx*$m/$n;

    //Go through again to determine rSquared
    //Using method from https://www.youtube.com/watch?v=w2FKXOa0HGA
    $diffActual = 0;
    $diffEstimated = 0;
    foreach($data as $row) {
        $row = array_values($row);
        $x = $row[0];
        $y = $row[1];

        $expectedY = $m*$x+$b;
        $diffActual += ($y - $yAvg)**2;
        $diffEstimated += ($expectedY-$yAvg)**2;
    }
    $rSquared = $diffEstimated / $diffActual;

    $result = ['m'=> $m, 'b' => $b, 'rSquared' => $rSquared];
    return $result;
} 
```

# xcode - 如何在控制台或文件中获取 OS X 应用程序的输出？

> ID：364564
> 
> 赞同：53
> 
> 时间：2008-12-13T00:30:32.330
> 
> 标签：xcode, debugging, terminal

我正在编写一个嵌入 Mono 的 Cocoa 应用程序。我想在终端中运行并查看我的调试输出。在 Cocoa 方面我正在使用`NSLog()`，在 Mono 方面我正在使用`Debug.Write()`。我可以在 Xcode 的控制台中看到我的调试输出，但在终端中看不到。这是我尝试过的：

```
$：打开/path/build/Debug/MyProgram.app
$: 打开 /path/build/Debug/MyProgram.app > 输出
$: 打开 /path/build/Debug/MyProgram.app 2> 输出

```

在终端中，但我不在控制台或“输出”中输出。

正确的命令是什么？

PS。我的最终目标是编写一个 vim 插件来管理、构建、运行、调试 xcode 项目。如果你能让这个[vi 输入管理器](http://www.corsofamily.net/jcorso/vi/)与 xcode 一起工作，你就可以为我省去这个麻烦。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2008-12-13T09:58:38.220

Chris 很好地概述了控制台的工作原理，但要专门回答您的问题：如果您想直接在终端中查看结果，您需要将构建的产品作为终端的子级运行，这意味着使用类似

```
/path/debug/build/MyProgram.app/Contents/MacOS/MyProgram 
```

启动应用程序。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-12-13T08:29:31.740

Mac OS X 上的终端只是另一个应用程序。为文本 I/O 打开终端窗口并不是每个应用程序的固有功能，就像在 Windows 上一样。

此外，`open /path/to/MyApp.app`不会将 MyApp.app 作为 shell 的子进程执行，它会向操作系统的启动基础结构发送一条消息，要求*它*以正常方式执行应用程序，就像在 Finder 中双击或单击一样在码头。这就是为什么你不能仅仅重定向它的输出来查看你的应用程序发送到什么`stdout`或`stderr`.

您可以使用 Console.app 查看以正常方式启动的应用程序的输出，因为启动基础设施专门将它们的`stdout`和发送到`stderr`那里。您还可以使用`asl`例程来查询日志，或者如果您愿意，可以执行更复杂的日志记录。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-13T00:38:04.123

在 /Applications/Utilities 中打开 Console.app。所有 NSLog 输出都将打印在系统日志中。

或者，如果您在 Xcode 中运行它，所有输出都将打印在 Debug 控制台中。

我现在不在我的 Mac 上，不记得命令序列或调试控制台所在的菜单，可能是构建菜单？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-01T08:05:33.473

## 概述

[这个想法是简单地使用ios-deploy](https://github.com/phonegap/ios-deploy)从命令行运行应用程序。

## 指示

1.  安装[ios-deploy](https://github.com/phonegap/ios-deploy)
2.  从 xcode 运行应用程序（确保它运行成功）
3.  转到 xcode 菜单 > 首选项 > 位置，然后单击派生数据中的箭头： ![在此处输入图像描述](https://i.stack.imgur.com/ybEtI.png)
4.  在派生数据目录中，在 Build/intermediates/Products 下搜索您的 .app 文件
5.  在终端中键入以下内容， `ios-deploy --debug --bundle` 然后将 .app 文件从第 4 步拖到终端.. 你应该有这样的东西 `ios-deploy --debug --bundle path/to/your/applicationName.app` ，就是这样！该应用程序应该成功运行，所有日志都将转到您的终端。

# vba - 接口 VBA._Collection 的 QueryInterface 失败

> ID：364600
> 
> 赞同：1
> 
> 时间：2008-12-13T00:50:25.580
> 
> 标签：vba, collections, queryinterface

在系统长时间执行期间，我们随机看到此错误。错误被我们的警报系统捕获，我们成功重试，并继续运行系统。我们在谷歌上发现的唯一点击似乎提到了损坏的安装。我们认为这里不是这种情况，因为我们的系统正在运行，得到错误，并且可以继续运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-10T06:10:07.787

使用以下命令从命令窗口再次注册 .dll 文件：

```
regsvr32 C:\WINDOWS\system32\msvbvm60.dll 
```

# c++ - 在 AIX 上使用 pthread 进行静态链接

> ID：364605
> 
> 赞同：1
> 
> 时间：2008-12-13T00:54:12.330
> 
> 标签：c++, linker, pthreads, static-libraries, aix

我已经阅读和研究了这几天，并决定我需要一些外部帮助！

（而且这个网站似乎是一个不错的地方，所以我想我会在这里发布我的问题，看看情况如何）

我们的小公司已经好几年没有在 AIX 上构建我们的应用程序了，我被分配了这项任务（幸好我喜欢挑战）。

我遇到的问题很容易描述，我可以看到其他人也在经历它，尽管我似乎无法找到答案。

如果我链接应用程序“非静态”，这意味着我不在构建命令中使用“-static”，则该应用程序在开发机器上运行良好，但在我们用于测试的其他 AIX 机器上运行良好。

【两机速记；

开发：

```
~$ uname -a
AIX aix3 2 5 000BA50D4C00 
```

测试：

```
~$ uname -a
AIX aix4 1 5 002459A64C00 
```

]

如果我与“-static”链接，则应用程序在开发机器上运行时会在引发异常时“中断”：

```
terminate called after throwing an instance of 'MyAppError'
Segmentation fault      (core dumped) 
```

并且（好像这还不够），该应用程序仍然无法在测试机器上运行：

```
exec(): 0509-036 Cannot load program ./myapp because of the following errors:
        0509-130 Symbol resolution failed for myapp because:
        0509-136   Symbol _sigqueue (number 65) is not exported from
                   dependent module /unix.
        0509-136   Symbol ra_attachrset (number 95) is not exported from
                   dependent module /unix.
        0509-136   Symbol __rs_pickmcm (number 99) is not exported from
                   dependent module /unix.
        0509-136   Symbol _timer_create (number 122) is not exported from
                   dependent module /unix.
        0509-136   Symbol _timer_delete (number 123) is not exported from
                   dependent module /unix.
        0509-136   Symbol _timer_getoverrun (number 124) is not exported from
                   dependent module /unix.
        0509-136   Symbol _timer_gettime (number 125) is not exported from
                   dependent module /unix.
        0509-136   Symbol _timer_settime (number 126) is not exported from
                   dependent module /unix.
        0509-136   Symbol count_event_waiters (number 159) is not exported from
                   dependent module /unix.
        0509-192 Examine .loader section symbols with the
                 'dump -Tv' command. 
```

我应该在这里注意我们正在使用“-pthead”进行链接，并且我已经阅读了几篇文章说在使用 pthread 时静态链接是不合适的。

我的脑袋疼。

我将非常感谢您对此的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T03:20:46.137

您的部分麻烦是您正在 AIX 5.2 上构建并尝试在 AIX 5.1 上进行测试（`uname -a`信息表明 - 感谢您提供它）。您通常可以在较旧的平台上构建并在较新的平台上运行，但反之则不行。所以，这就是你麻烦的开始。

AIX 5.1 和 5.2 都很长。您应该至少使用 AIX 5.3 并且可以说是 AIX 6.x。

# html - 将文本导入 html 的最佳实践

> ID：364610
> 
> 赞同：1
> 
> 时间：2008-12-13T01:02:30.923
> 
> 标签：html, content-management-system, ms-word, adobe-indesign

将文本从多页 InDesign 文档（从设计师到非设计师）导入 html 的最佳实践是什么？在 Mac 上设计的文档进入 PC 上的 CMS - 移交 InDesign 文件或将文本剥离成 word 文件？提供所有图像和 pdf 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T17:10:29.967

与 InDesign 相比，能够打开 PDF 的人可能更多，尤其是考虑到字体。我更喜欢以 PDF 格式工作。我可以轻松提取文本，然后将文档拉入 PhotoShop 进行切片。您只需要确保质量/压缩设置正确，这样它就不会过多地破坏 JPEG。

# c# - .NET 示例 VCF 阅读器

> ID：364612
> 
> 赞同：3
> 
> 时间：2008-12-13T01:13:00.077
> 
> 标签：c#, .net, vcf-vcard

有谁知道使用 C#/.NET 从 VCF 文件中提取数据的好示例（内联回复或网络教程）？

有人再使用 VCF 文件了吗？对于联系人管理系统来说，这是否值得？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T01:16:07.980

我有点惊讶，它没有内置到任何地方的 .NET Framework 中，但我确实找到了这个教程，我打算使用它：

[.NET VCF 阅读器](http://www.codeproject.com/KB/dotnet/vCardReader.aspx)

# data-structures - 在红黑树中，自上而下的删除是否比自下而上的删除更快、更节省空间？

> ID：364616
> 
> 赞同：15
> 
> 时间：2008-12-13T01:15:40.273
> 
> 标签：data-structures, red-black-tree

根据此页面[http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx](http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx) “自上而下删除”是红黑树节点删除的实现，通过将红色节点向下推来主动平衡树通过树，以便保证被删除的叶节点是红色的。由于叶子节点保证是红色的，因此您不必担心重新平衡树，因为删除红色叶子节点不会违反任何规则，并且您不必执行任何额外的操作来重新 -平衡并恢复红黑色。

“自下而上删除”涉及在树上进行正常的二分搜索以找到要删除的节点，交换叶节点（如果找到的节点不是叶节点），然后恢复红黑树属性在修复红黑规则违规的同时爬回树上。

自上而下的删除是否最小化了重新平衡操作的数量？自上而下的删除是否有可能在向下的过程中主动进行过多的重新着色和重新平衡？

这个场景怎么样：（x）表示一个红色节点

```
 8
         _____/ \____
        /            \
       4              12
     /   \          /    \
   2       6      10      14
  / \     / \    /  \    /  \
 1   3   5   7   9  11  13  15
                             \
                            (16) 
```

如果我想删除 16，自下而上的删除不会进行任何重新平衡，但自上而下的删除会一直向下重新着色节点，然后发现重新着色操作是不必要的：

迭代1：

```
 (8)
         _____/ \____
        /            \
       4              12
     /   \          /    \
   2       6      10      14
  / \     / \    /  \    /  \
 1   3   5   7   9  11  13  15
                             \
                            (16) 
```

迭代2：

```
 8
         _____/ \____
        /            \
      (4)            (12)
     /   \          /    \
   2       6      10      14
  / \     / \    /  \    /  \
 1   3   5   7   9  11  13  15
                             \
                            (16) 
```

迭代 3：

```
 8
         _____/ \____
        /            \
      (4)             12
     /   \          /    \
   2       6     (10)    (14)
  / \     / \    /  \    /  \
 1   3   5   7   9  11  13  15
                             \
                            (16) 
```

然后在第 4 次迭代中，您发现不需要下推，因为 16 已经是红色的。那么自上而下的删除是否更节省时间和空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T20:01:19.407

据我所知：“自上而下的删除”避免了在操作过程中多次遍历路径中的同一节点。所以，给定从根到给定节点的简单路径，如果无论如何你要对该路径中的节点做一些事情，为什么不直接在向下的路上做呢？它避免了多次遍历路径的某些部分。因此，这可以节省时间。

2-3-4 树（a,b-trees 的特殊子情况）中的多个操作（包括插入）采用类似的原则

## 自上而下的删除是否最小化了重新平衡操作的数量？

想想，在一般情况下，确实如此。因为您可以通过很少的重新平衡操作使之后插入一些东西变得更容易。

## 自上而下的删除是否有可能在向下的过程中主动进行过多的重新着色和重新平衡？

也许吧，但这取决于数据集。但是，如上所述。这可以减少总体上重新着色和重新平衡的次数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-11-05T23:41:06.433

### 自上而下是否比自下而上更*节省空间？*

一句话，是的。[永远困惑](http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx)的自顶向下算法不需要节点上的父指针。自下而上的算法在时间和空间之间进行权衡：在插入和删除后重新平衡时，父指针允许一些短路。

例如，[OpenJdk-7 的](http://www.docjar.com/html/api/java/util/TreeMap.java.html)红黑树实现具有父指针，它允许它选择在删除后是否需要重新平衡（例如在您的场景中）。

### 自上而下是否比自下而上更节省*时间？*

一般来说，是的：自顶向下方法每次操作只能遍历一次树，而底部方法每次操作必须遍历树两次。正如我之前提到的，自下而上的方法可以通过使用父指针来节省一些时间。但绝对不是每次都遍历整个树。

两种实现都可以选择使用[线程](http://www.delorie.com/gnu/docs/avl/libavl_130.html)来改进遍历整个树所需的时间或空间。这需要每个节点一个或两个标志的开销。这也可以使用父指针来实现，但效率不高。**注意：**线程链接说线程不如父指针高效，但这仅适用于自下而上的树（本书涵盖）。

### 传闻

回到大学，我们在 C++ 中实现[了永远困惑的自上而下的红黑树](http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx)，并与我们的 STL（自下而上）实现的 std::map 进行了比较。我们的自上而下的方法肯定更快——我想说它在所有变异操作上都快了 2 倍。搜索也更快，但我不能说这是由于更平衡的树还是不太复杂的代码。

可悲的是，我不再有代码，也没有文章。

# python - 如何获取项目在列表中的位置？

> ID：364621
> 
> 赞同：181
> 
> 时间：2008-12-13T01:20:32.853
> 
> 标签：python, list

我正在迭代一个列表，如果它满足某个条件，我想打印出该项目的索引。我该怎么做？

例子：

```
testlist = [1,2,3,5,3,1,2,1,6]
for item in testlist:
    if item == 1:
        print position 
```

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2008-12-13T03:28:26.120

嗯。这里有一个带有列表理解的答案，但它消失了。

这里：

```
 [i for i,x in enumerate(testlist) if x == 1] 
```

例子：

```
>>> testlist
[1, 2, 3, 5, 3, 1, 2, 1, 6]
>>> [i for i,x in enumerate(testlist) if x == 1]
[0, 5, 7] 
```

更新：

好的，你想要一个生成器表达式，我们将有一个生成器表达式。这是列表推导，在一个 for 循环中：

```
>>> for i in [i for i,x in enumerate(testlist) if x == 1]:
...     print i
... 
0
5
7 
```

现在我们将构建一个生成器......

```
>>> (i for i,x in enumerate(testlist) if x == 1)
<generator object at 0x6b508>
>>> for i in (i for i,x in enumerate(testlist) if x == 1):
...     print i
... 
0
5
7 
```

并且足够巧妙地，我们可以将它分配给一个变量，并从那里使用它......

```
>>> gen = (i for i,x in enumerate(testlist) if x == 1)
>>> for i in gen: print i
... 
0
5
7 
```

想想我曾经写过 FORTRAN。

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2012-04-22T09:35:15.410

下面的呢？

```
print testlist.index(element) 
```

如果您不确定要查找的元素是否确实在列表中，您可以添加初步检查，例如

```
if element in testlist:
    print testlist.index(element) 
```

或者

```
print(testlist.index(element) if element in testlist else None) 
```

或者我不太喜欢的“pythonic方式”，因为代码不太清晰，但有时效率更高，

```
try:
    print testlist.index(element)
except ValueError:
    pass 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2008-12-13T01:37:46.767

使用枚举：

```
testlist = [1,2,3,5,3,1,2,1,6]
for position, item in enumerate(testlist):
    if item == 1:
        print position 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-12-13T01:33:30.143

```
for i in xrange(len(testlist)):
  if testlist[i] == 1:
    print i 
```

xrange 而不是要求的范围（见评论）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-12T14:36:57.923

这是另一种方法：

```
try:
   id = testlist.index('1')
   print testlist[id]
except ValueError:
   print "Not Found" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-04T16:41:33.803

```
[x for x in range(len(testlist)) if testlist[x]==1] 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-05-10T06:41:18.443

试试下面的：

```
testlist = [1,2,3,5,3,1,2,1,6]    
position=0
for i in testlist:
   if i == 1:
      print(position)
   position=position+1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-13T03:14:50.110

如果您的列表足够大并且您只希望在稀疏数量的索引中找到该值，请考虑此代码*可以*更快地执行，因为您不必迭代列表中的每个值。

```
lookingFor = 1
i = 0
index = 0
try:
  while i < len(testlist):
    index = testlist.index(lookingFor,i)
    i = index + 1
    print index
except ValueError: #testlist.index() cannot find lookingFor
  pass 
```

如果您希望找到很多值，您可能应该将“索引”附加到列表并在最后打印列表以节省每次迭代的时间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-20T22:06:41.450

我认为使用 Tkinter 库中的 curselection() 方法可能很有用：

```
from Tkinter import * 
listbox.curselection() 
```

此方法适用于 Tkinter 列表框小部件，因此您需要构建其中一个而不是列表。

这将返回如下位置：

**('0',)**（虽然更高版本的 Tkinter 可能会返回一个整数列表）

这是第一个位置，数字将根据项目位置而变化。

有关更多信息，请参阅此页面： [http ://effbot.org/tkinterbook/listbox.htm](http://effbot.org/tkinterbook/listbox.htm)

问候。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-27T06:14:26.863

为什么要把事情复杂化？

```
testlist = [1,2,3,5,3,1,2,1,6]
for position, item in enumerate(testlist):
    if item == 1:
        print position 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-26T04:11:56.403

只是为了说明完整的示例以及您想要在其中查找`input_list`（例如：input_list[1]）并获取 series2 的索引（如果它存在于 series1 中）。`searies1``series2`

注意：`certain condition`如果条件简单，您将使用 lambda 表达式

```
input_list = [[1,2,3,4,5,6,7],[1,3,7]]
series1 = input_list[0]
series2 = input_list[1]
idx_list = list(map(lambda item: series1.index(item) if item in series1 else None, series2))
print(idx_list) 
```

输出：

```
[0, 2, 6] 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-11-25T20:24:35.603

```
testlist = [1,2,3,5,3,1,2,1,6]
for id, value in enumerate(testlist):
    if id == 1:
        print testlist[id] 
```

我想这正是你想要的。;-) 'id' 将始终是列表中值的索引。

# objective-c - 内存管理，在这种情况下应该使用释放吗？

> ID：364631
> 
> 赞同：1
> 
> 时间：2008-12-13T01:28:27.487
> 
> 标签：objective-c

给定方法内部的以下代码片段；

```
NSBezierPath * tempPath = [NSBezierPath bezierPathWithOvalInRect:pathRect];
            [tempPath retain];
            [path release];
            [self setPath:tempPath]; 
```

我负责释放`tempPath`还是会为我完成？
setPath 是`@synthesize`d 所以我可能也可以省略`[path release]`？

我知道这样做的更好方法很简单；

```
[path appendBezierPathWithOvalInRect:pathRect]; 
```

但是，作为 Objective C 和 Cocoa 的新手，我试图了解事物是如何结合在一起的。

---添加内容

遗漏结果会导致使用路径的对象`[tempPath retain]`崩溃。调试器的结果：`NSView`

> ```
> (gdb) po [0x145dc0 path]
> 
> Program received signal EXC_BAD_ACCESS, Could not access 
> ```
> 
> 记忆。原因：KERN_PROTECTION_FAILURE at address: 0x00000021 0x93c56688 in objc_msgSend()

**认罪**——我的错误。希望别人能从我的错误中得到一些有用的东西。我在声明中使用`assign`了代替。修复这些使代码按预期工作。`retain``@property`

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T01:41:12.890

如果`path`是支持该`-setPath:`方法的实例变量，那么不，您绝对不应该在您的`-dealloc`方法之外释放它。您不需要手动保留您的`tempPath`对象，因为您使用访问器来保存该对象。`-setPath:`在这种情况下，您的访问器`-init`和`-dealloc`方法应该是您要调用的唯一方法`-retain`以及`-release`您的实例变量。

您的代码也可以像这样工作，并且内存泄漏的可能性较小：

```
NSBezierPath *tempPath = [NSBezierPath bezierPathWithOvalInRect:pathRect];
[self setPath:tempPath]; 
```

由于该`-bezierPathWithOvalInRect:`方法返回一个自动释放的对象并且您的访问器将保留它，您不需要对它做任何其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T01:40:40.503

您不需要释放 tempPath。

您也可以删除`[tempPath retain]`和`[path release]`。这些是通过综合 set 方法来处理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T01:55:32.173

让我们以另一种方式来看：

如果您没有使用合成访问器，那么您将自己编写它们。在最简单的形式中，它们看起来像这样：

```
- (NSBezierPath *) path {
    return path;
}

- (void)setPath:(NSBezierPath *)newPath {
    if (path == newPath) {
        // both objects have the same pointer so are the same.
        return;
    }

    [path release];
    path = [newPath retain];
} 
```

您可以看到旧路径已释放，新路径保留在 setter 中，因此您不需要在方法中执行此操作，可以写为

```
self.path = [NSBezierPath bezierPathWithOvalInRect:pathRect]; 
```

# javascript - 如何在网页上制作所见即所得的部分？

> ID：364642
> 
> 赞同：3
> 
> 时间：2008-12-13T01:37:51.803
> 
> 标签：javascript, html, dom, wysiwyg

我想知道用于网络上所见即所得页面的基本原理。我开始对其进行编码并使用文本区域进行编写，但很快我意识到我无法在文本区域中添加或显示图像或任何 HTML。所以我使用 DIV 制作它，但我不明白如何使它可编辑。

所以，总的来说，**我想知道（原则上）如何在网页上制作可编辑的 DIV 部分，类似于 Google docs 或 FCKEditor 或 TinyMCE。**

我将非常感谢任何指示和信息。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T02:14:47.440

可以将`contentEditable`标志添加到页面上的任何元素以使其可编辑，例如。

```
<div contentEditable>I am editable!!!!</div> 
```

现在应该可以在所有主流浏览器中使用，并且快捷键（cmd/ctrl-b 等）之类的东西都可以使用。

然后可以通过将 innerHTML 拉出可编辑区域来完成表单提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T22:44:08.330

*所见即所得 - 不要走所见即所得的道路，因为它充满了陷阱*。**

 *[WYMeditor](http://www.wymeditor.org/)在输出语义和干净的 HTML 方面是最好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-13T01:42:46.023

[TinyMCE](http://tinymce.moxiecode.com/)是开源的，所以你可以看看它是如何工作的。:)

从[安装](http://wiki.moxiecode.com/index.php/TinyMCE:Installation#The_most_basic_page_integration_.28converts_all_textarea_elements_into_editors.29)说明中可以看出，HTML`form`部分（允许将表单提交到服务器进行存储）是用`textarea`TineMCE 编辑器替换的内部创建的。

源本身是从`tiny_mce.js`目标 HTML 文件中引用的文件中引用的，因此这可能是了解其工作原理的一个很好的起点。

祝你好运！

**编辑：**

虽然我没有花很多时间，但查看 TinyMCE 的源代码似乎表明编辑器本身位于`iframe`一个 .

如果您好奇，请下载[开发包](http://tinymce.moxiecode.com/download.php)，并查看`tiny_mce/jscripts/tiny_mce/classes/Editor.js`. 从第 400 行开始，他们似乎正在设置一个`iframe`并将其添加到目标 HTML 的 DOM 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-13T02:48:07.090

使用[TinyMCE](http://tinymce.moxiecode.com/)并关闭工具栏。

说真的，为网络制作一个所见即所得的编辑器比听起来要复杂得多，而且有上百万种方法可能会出错。你可以在接下来的两个月里与不同的浏览器和无缘无故地崩溃的东西作斗争，或者你可以相信比你或我更了解这个主题的人。

TinyMCE 的可配置性令人印象深刻，您只需使用最简单的配置选项即可隐藏所有工具栏：

```
tinyMCE.init({
    mode: 'textareas',
    theme: 'advanced',
    theme_advanced_buttons1 : '',
    theme_advanced_buttons2 : '',
    theme_advanced_buttons3 : '',
    theme_advanced_statusbar_location : "none",
}); 
```

您也可以使用普通的 CSS 来制作

```
.mceLayout {
    background: none !important;
    border: none !important;
} 
```

我不确定您想要 WYSIWYG 区域做什么，但您可能需要在某个时候获取内容。您可以使用简单的 Javascript 来做到这一点：

```
var editor = tinyMCE.get('editorid');
var stuff = editor.getContent(); 
```

它是免费的、易于使用的，并且被*许多*用户证明是可靠的。没有充分的理由重新发明轮子。

# python - 从 xcode 宏运行 python 脚本时如何使用我的标准 python 路径

> ID：364655
> 
> 赞同：2
> 
> 时间：2008-12-13T01:50:38.767
> 
> 标签：python, xcode, macos, path

我正在尝试使用 Xcode 的用户脚本菜单运行 Python 脚本。

我遇到的问题是，从 XCode 运行脚本时，我通常的 os.sys.path（取自 ~/.profile）似乎没有像在终端（或使用 IPython）上运行它们时那样导入。我得到的只是默认路径，这意味着我不能做类似的事情

```
#!/usr/bin/python
import myScript

myScript.foo() 
```

myScript 是我添加到路径中的文件夹中的一个模块。

我可以很容易地手动将特定路径附加到 os.sys.path ，但是我必须在每个脚本中为每个我想使用模块的单个路径执行此操作

有没有办法设置它，所以它使用我在其他地方使用的相同路径？

编辑：在进一步研究之后，似乎从 Xcode 执行的脚本使用的 PATH 与正常情况完全不同。我通过在 Xcode 中运行脚本得到的路径是：

```
PATH=/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin 
```

而且我确定我的常规路径中没有 /Developer/usr/bin 。有人知道这条路从何而来吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T04:23:46.337

在 Mac 上，.profile 中的环境变量对终端外的应用程序不可见。

如果您希望 xcode 应用程序可以使用环境变量（如 PATH、PYTHONPATH 等），则应将其添加到您在 ~/.MacOSX/environment.plist 中创建的新 plist 文件中。

有关更多详细信息，请参阅Apple 开发者网站上的[EnvironmentVars文档。](http://developer.apple.com/documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T02:16:06.423

一种快速但不成熟的方法是为 python 提供一个包装脚本。

```
cat > $HOME/bin/mypython << EOF
#!/usr/bin/python
import os
os.path = ['/list/of/paths/you/want']
EOF 
```

然后启动所有 XCode 脚本

```
#!/Users/you/bin/mypython 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T03:18:11.773

只需将路径添加到 sys,path。

```
>>> import sys
>>> sys.path
['', ... lots of stuff deleted....]
>>> for i in sys.path:
...     print i
... 

/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python25.zip
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-darwin
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac/lib-scriptpackages
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-tk
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload
/Library/Python/2.5/site-packages
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/PyObjC
>>> sys.path.append("/Users/crm/lib")
>>> for i in sys.path:
...     print i
... 

/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python25.zip
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-darwin
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac/lib-scriptpackages
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-tk
/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload
/Library/Python/2.5/site-packages
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/PyObjC
/Users/crm/lib
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-06T03:28:58.427

我倾向于使用[pth](http://docs.python.org/install/index.html)文件。从文档。

> 最方便的方法是将路径配置文件添加到 Python 路径上已经存在的目录中，通常是 .../site-packages/ 目录。路径配置文件的扩展名为 .pth，每行必须包含一个将附加到 sys.path 的路径。（因为新的路径附加到 sys.path 中，添加的目录中的模块不会覆盖标准模块。这意味着您不能使用这种机制来安装标准模块的固定版本。）

因此，最简单的方法是执行以下操作：

```
echo "/some/path/I/want/to/add" > /Library/Python/2.5/site-packages/custom.pth 
```

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-13T03:22:09.473

如果我的回答看起来很无知，请原谅我，我对 Mac 并不完全熟悉，我也可能误解了你的问题。

在 Windows 和 Linux 上，当我想引用我编写的脚本时，我设置了 PYTHONPATH 环境变量。如果我没记错的话，这就是 os.sys.path 从中获取值的地方。

假设 myScript.py 在 /Somewhere 中。将 PYTHONPATH 设置为：

```
PYTHONPATH = /Somewhere 
```

现在您应该可以“导入 myScript”了。

如果您开始将子文件夹作为 python 包进行，请查看每个文件夹中**init** .py 文件的使用情况。

如果您计划一直重复使用此脚本和其他脚本，则应将 PYTHONPATH 设置为环境变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-08T17:06:47.990

不确定 Xcode 是否算作通过 Finder 启动脚本，但如果确实如此，显然 Finder在为用户启动时不会像终端那样读取`.profile`或文件。`.cshrc`

如果您的问题仍未得到解答，请查看 Apple 的知识库：[QA1067](http://developer.apple.com/library/mac/#qa/qa1067/_index.html)并使用`plist`.

# mod-rewrite - 您如何使用 Lighttpd 限制对某些路径的访问？

> ID：364664
> 
> 赞同：1
> 
> 时间：2008-12-13T01:55:12.393
> 
> 标签：mod-rewrite, redirect, admin, lighttpd

我想限制对我的`/admin`URL 的访问仅限于内部 IP 地址。开放互联网上的任何人都应该无法登录我的网站。由于我使用的是 Lighttpd，我的第一个想法是使用`mod_rewrite`将任何外部请求的`/admin`URL 重定向回我的主页，但我对 Lighty 了解不多，文档也没有说太多关于检测 192.168.0.0 IP范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T08:16:22.937

试试这个：

```
$HTTP["remoteip"] == "192.168.0.0/16" {
    /* your rules here */
} 
```

[文档](http://redmine.lighttpd.net/wiki/lighttpd/Docs:Configuration)中的示例：

```
 # deny the access to www.example.org to all user which 
  # are not in the 10.0.0.0/8 network
  $HTTP["host"] == "www.example.org" {
    $HTTP["remoteip"] != "10.0.0.0/8" {
     url.access-deny = ( "" )
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:02:30.887

这对我有用：

```
$HTTP["remoteip"] != "192.168.1.1/254" {
      $HTTP["url"] =~ "^/intranet/" {
        url.access-deny = ( "" )
      }
    } 
```

`!=`工作结束`==`。

# sql - 如何创建引用整个复合键的外键？

> ID：364665
> 
> 赞同：5
> 
> 时间：2008-12-13T01:55:30.847
> 
> 标签：sql, sql-server, sql-server-2005

我有两张表，一张有一个三列复合键。另一个需要引用这个复合键。

创建引用多列的外键的语法是什么。

我尝试用谷歌搜索，但我找不到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-13T01:59:22.183

```
FOREIGN KEY (col1, col2, col3) REFERENCES ParentTable (colA, colB, colC) 
```

`<table_constraint>`在 Microsoft SQL Server [CREATE TABLE](http://msdn.microsoft.com/en-us/library/ms174979(SQL.90).aspx)的在线文档中查看“ ” 。

# php - 如何使用 Zend_Db 快速创建复杂的选择查询？

> ID：364666
> 
> 赞同：1
> 
> 时间：2008-12-13T01:55:31.190
> 
> 标签：php, mysql, zend-framework, zend-db-table

假设有类似的东西：

```
SELECT energy_produced, energy_consumed, timestamp1 AS timestamp FROM (
SELECT max(energy_produced) AS energy_produced, mid(timestamp, 1, 10) AS timestamp1 FROM tbl_energy
WHERE site_id = 1366 AND mid(timestamp, 1, 10) >= DATE_SUB(curdate(),INTERVAL 1 day)
group by mid(timestamp1, 1, 10)) AS e1
INNER JOIN (
SELECT max(energy_consumed) AS energy_consumed, mid(timestamp, 1, 10) AS timestamp2 FROM tbl_energy
WHERE site_id = 1366 AND mid(timestamp, 1, 10) >= DATE_SUB(curdate(),INTERVAL 1 day)
group by mid(timestamp2, 1, 10)) AS e2
ON e1.timestamp1 = e2.timestamp2 
```

我可以把它塞进一个变量中，然后像 $db->fetchAll($select)->toArray 这样调用傻瓜吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T02:04:41.330

是的，您可以将 SQL 语句作为字符串传递给`$db->fetchAll()`方法。

您不需要调用`toArray()`结果，因为默认情况下结果已经作为数组返回。

该类`Zend_Db_Table`也有一个`fetchAll()`方法，但它不接受 SQL 字符串，而是返回一个`Zend_Db_Table_Rowset`对象。

# database - 帮助处理多对多关系

> ID：364671
> 
> 赞同：0
> 
> 时间：2008-12-13T01:59:47.813
> 
> 标签：database, many-to-many

我的表中存在多对多关系的问题，这是在培训中心工作的员工和讲师之间的关系。我找不到它们之间的链接，我不知道如何获得它。员工字段是：

*   职工号。
*   员工姓名
*   公司名称
*   部门职称
*   商业领域
*   手机号码
*   分机
*   排行

讲师字段是

*   导师姓名
*   研究所
*   手机号码
*   电子邮件地址
*   费用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-13T02:03:24.937

在多对多关系中，关系将在第三张表中，例如

```
table EmployeeInstructor 
    EmployeeID
    InstructorID 
```

要查找特定讲师的所有员工，您可以对所有三个表使用联接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-13T02:10:36.980

或者更有可能会涉及到课程——

员工上课 讲师讲课

所以你会有一个 EmployeeClass 表，
一个 InstructorClass 表，

并通过他们加入。并且 Class 需要是唯一的，否则您将需要

课程在课堂上按季度授课

并最终将 EmplyeeClassSchedule 加入 InstructorClassSchedule。

这很快就会成为您更有趣的关系设计之一。如果您在 google 上搜索“Terry Halpin”和“Object Role Modeling”，这将用作教程中的说明性情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-13T02:09:39.760

首先，您将需要两个表中的唯一键。员工编号可能适用于员工表，但您需要另一个用于讲师表。就个人而言，我倾向于在我的表中使用称为 ID 的自动递增标识字段。这是主键。其次，创建一个新表 InstructorEmployee。该表有两列，InstructorID 和 EmployeeID。这两个字段都应该被索引。现在，您可以通过创建包含两个 ID 的记录来创建任何 Employee 和任何 Instructor 之间的关联。

# php - 如何在数组或 mySQL 表中查找丢失的数据？

> ID：364676
> 
> 赞同：0
> 
> 时间：2008-12-13T02:02:31.723
> 
> 标签：php, mysql

我有一个填充了值（twitter ids）的数组，我想在最低 id 和最高 id 之间找到缺失的数据？任何关心分享一个简单的功能或想法如何做到这一点？

另外，我想知道我是否可以对 mySQL 做同样的事情？我有键索引。该表现在包含 250k 行，因此临时表和连接不会非常快速或高效。我可以做一个 PHP 循环来循环遍历数据，但这也需要很长时间，并且需要大量内存。我可以运行特定的 mysql 查询吗？或者我可以以某种方式使用上面的功能吗？

谢谢，詹姆斯·哈蒂格 [http://twittertrend.net](http://twittertrend.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T02:09:30.023

你的意思是顺序ID吗？

在这种情况下

```
$new_ids = range($lowid, $highid, 1);
$ids = array_merge($ids, $new_ids);
$ids = array_unique($ids);
sort($ids); 
```

在 SQL 中（带占位符）

```
SELECT key, other_data from `table` WHERE key > :low_id AND key < :high_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T02:28:37.443

你的 range() 给了我一个好主意，你的代码不能作为唯一的保留唯一键，所以我只剩下范围函数的结果。

但是，这有效：

```
$diff = array_values(array_diff(range(min($array), max($array), 1), $array)); //returns array of incomplete values 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-22T23:03:37.887

我有类似的要求，并编写了一个函数来返回丢失的 ID 列表。

```
---------------------------
create function dbo.FreeIDs ()
---------------------------
returns @tbl table (FreeID int)

as
begin

    declare @Max int
    declare @i int

    select @Max = MAX(ID) from [TheTable]
    set @i = 0

    while @i < @Max begin
          set @i = @i + 1
          if not exists (select * from [TheTable] where ID = @i) 
             insert into @tbl select @i
    end

    return

end 
```

# c# - 加载大量前期数据。. 同步或异步。

> ID：364687
> 
> 赞同：2
> 
> 时间：2008-12-13T02:13:26.303
> 
> 标签：c#, winforms, multithreading

所以我有一个 winforms 应用程序，可以在启动时同步下载一组数据。这显然需要一段时间，但是当任何服务或 GUI 类加载时，它们都有这些数据。我可以将其更改为放在后台线程上，但随后需要访问此数据的每个组件都必须在此数据准备好时不断收到通知。对于我的每个依赖于要加载的数据以进行 If (Loaded) 检查或必须订阅已加载事件的类来说，这似乎都是糟糕的设计。. . 有任何想法吗？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T02:47:11.070

我已经编写了许多与您描述的行为相似的应用程序，并为您提供了三个建议......

**启动画面**

向您的应用程序添加一个启动屏幕，显示多个启动步骤的状态。过去，当应用程序在启动时必须执行许多步骤时，我就使用过这个，在用户开始使用应用程序之前 - 通过 Active Directory 确认身份和访问授权，联系数据库以获取系统信息，加载静态数据、与指定 Web 服务的初始联系、检查先决条件（如 Crystal 报表）是否已安装和工作等。

**订阅**

让每个组件向您的数据加载器注册兴趣，并在数据可用时收到通知。这是观察者模式，没有错，尽管管理订阅可能有点混乱。

**延迟加载**

将应用程序的其余部分设计为尽可能晚地请求数据，从而尽可能多地完成后台加载。启动后快速偏离标准的用户必须等待必要的数据加载；花时间的用户（也许他们启动了应用程序然后切换到 Outlook）发现响应是立即的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T03:05:06.637

我建议您使用观察者模式并设置所有依赖于正在加载的数据集的类。为了尽量减少用户需要等待的时间，您还可以考虑实现两类类，一类是需要整个数据集才能运行，一类是加载数据子集后才能运行。

[观察者设计模式](http://www.dofactory.com/Patterns/PatternObserver.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T17:17:57.347

*我在桌面应用程序中所做的一切*，无论是 Winforms 还是 WPF，我都尝试在后台线程上进行。这样做有两个原因。首先，用户体验更好。其次，在 WPF 测试中，我发现它在加载大量数据时表现更好，比如将记录加载到网格或列表中。

预先加载数据与延迟加载实际上是每个应用程序的自定义。我将构建一个处理这两种情况的中央数据对象。我可能建议这样做的方式是创建一个事件驱动的依赖模型。我的意思是你可以在一个数据管理器对象上放置一个事件或回调注册函数，当各种代码单元需要使用数据时，它们会订阅，然后在数据可用时回调它们。如果数据已经可用，则立即发生回调。否则，当从后台线程加载数据时，代码单元会被回调。例如，在某些窗口或组件中，您可能有一些如下代码：

```
DataManager.LoadDataAsync(dataCommandPatternObject, CallBackFunction);

...

public void CallbackFunction(SomeDataObjectClass data)
{
    //load data into UI
} 
```

如果数据加载是通过中央机制完成的，那么如果两次请求相同的数据，则可以使用缓存版本，或者如果第一个请求仍在运行，则第二个请求可以等待。

如果需要预先加载数据，加载屏幕（启动屏幕）可以请求多条数据，并在每个数据块加载时触发回调。当所有回调都被触发时，启动画面就存在了。

这些只是我多年来用来管理主要是静态/查找数据的大型数据集加载的各种技术中的几点。除此之外，我还建议对很少更改的非常大的数据集进行某种客户端磁盘缓存，并在数据库中实现某种更改跟踪。这将允许客户端从本地磁盘加载这些数据，这比去数据库要快。它还可以让数据库更好地扩展，因为它不提供高度重复的数据，而是可以专注于事务数据。

# asp.net - 针对 Active Directory 对 ASP.NET 用户进行身份验证：谁管理用户和组？

> ID：364692
> 
> 赞同：0
> 
> 时间：2008-12-13T02:18:49.867
> 
> 标签：asp.net, authentication, active-directory

我正在研究的一个项目应该对 AD 用户进行身份验证。我以前从未使用过 AD，也没有在使用 AD 的组织工作过，所以这是我的愚蠢问题：如果涉及 AD，谁来管理应用程序的角色、组和用户？我是否有责任为站点管理员提供 UI 以将 AD 用户分配给我的应用程序角色，或者 AD 管理员应该注意创建我的应用程序期望的适当组并在那里分配现有的 AD 用户？

该部门的最佳实践是什么？

* * *

有一点需要注意——这不是内部应用程序，因此它应该与现有的广告一起使用。问题是如果我期望像“教师”和“学生”这样的角色（只是为了说明这一点），我是否可以期望 IT 人员会在 AD 中创建适当的组并将用户分配给他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T12:04:19.620

我认为您不应该为活动目录提供 Gui。大多数使用 Active Directory 的组织使用标准的 Active Directory 工具对其进行管理。

如果要办理小店的情况。然后将组设置为应用程序数据库的内部。您仍然可以使用活动目录用户。但是组管理和成员资格将在您的应用程序内部。这将避免处理活动目录的复杂规则的大多数问题，并且仍然受益于单点登录。

还有一点需要注意。组名应该是可定制的。大多数地方都有组名的命名约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T02:56:06.997

这实际上取决于谁拥有 AD，以及谁将负责管理用户帐户。如果此 AD 与您的公司域隔离，并且您希望您的支持或销售人员或其他业务人员管理帐户，那么请务必为它们创建一个管理工具。

如果您试图与现有的 AD 绑定，那么您应该与您的 IT 部门密切合作，他们可能希望以自己的方式创建帐户（尤其是在您使用现有凭据的情况下）。

本质上，这归结为您的 IT 运作方式，以及您使用的 AD 与运行企业网站的 AD 之间的确切关系。

# 已编辑

根据您的其他信息，我认为您需要提供一个管理员控制台。特别是如果您想针对那里的小商店。您的解决方案应该使其成为可选的，因此如果他们想要使用管理 UI，他们可以，但如果 IT 部门想要使用 Powershell，例如，他们也可以这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-13T05:01:33.937

如果您正在为另一家公司编写此应用程序，我想您可以假设他们将负责管理 AD 用户和组。您只需要与客户就您的应用将使用的角色/组进行协调。

# asp.net - 如何使用 ASP.net asp:RangeValidator 正确验证日期？

> ID：364701
> 
> 赞同：1
> 
> 时间：2008-12-13T02:31:46.343
> 
> 标签：asp.net, asp.net-2.0, validation

这是我的代码：

```
<asp:TemplateField HeaderText="* License Setup Date">
    <EditItemTemplate>
        <asp:RequiredFieldValidator ID="LicenseSetupDateRequired" 
            ErrorMessage="License Setup Date can't be blank."
            ValidationGroup="EditClientDetails" 
            ControlToValidate="BeginDate"  
            Text="*!" 
            Display="Dynamic" 
            runat="server"></asp:RequiredFieldValidator>                    
        <asp:RangeValidator ID="LicenseSetupDateRange" 
            ErrorMessage="License Setup Date needs to be a date between 01/01/2000 and 12/31/2200"
            ValidationGroup="EditClientDetails" 
            ControlToValidate="BeginDate"
            MinimumValue="01/01/2000"
            MaximumValue="12/31/2002"
            Type="Date"
            Text="*!" Display="Dynamic" runat="server"></asp:RangeValidator>                        
        <asp:TextBox ID="BeginDate" MaxLength="10" 
            Text='<%# Bind("BeginDate", "{0:MM/dd/yyyy}") %>' 
            runat="server"></asp:TextBox>
        <span class="fieldNote">(mm/dd/yyyy format)</span>
    </EditItemTemplate>
</asp:TemplateField> 
```

结果：

*   01/01/2008 没有通过
*   2008 年 2 月 2 日没有通过
*   2000 年 11 月 11 日通行证
*   2001 年 8 月 8 日通行证

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T02:34:52.983

您需要将 MaximumValue 增加到大于测试日期的日期。具体来说，MaximumValue 应设置为 12/31/2200。你已经用过MaximumValue了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T02:40:50.507

您给出的示例似乎有错字。您将 MaximumDate 指定为“ **31/12/2002** ”而不是“ **31/12/2200** ”。

# database - 嵌入式数据库的选择？

> ID：364719
> 
> 赞同：1
> 
> 时间：2008-12-13T02:50:38.083
> 
> 标签：database, sqlite, embedded, filesystems

我们正在嵌入式平台上构建一个应用程序，该平台需要一个相当高性能的数据库（在具有 > 500,000 个条目的表上选择速度非常低）。

数据库需要能够：

*   将原子提交信息存储在 NVRAM 中，以便在提交完成前断电时保留此类信息。*   写入 NAND 闪存的方式是在内存中均衡磨损（可以使用例如 jffs2 或 yaffs2 来完成）。

    目前，我们的选项似乎是一种“自己动手”的方法，或者可能是 SQLite。

    任何其他选项，或关于“滚动你自己”或使用 SQLite 的细节的指针表示赞赏！

    **编辑：**目标有 32MB 的 RAM、1MB 的 NVRAM 和 64MB 的 NAND 闪存。其余代码是 C，因此这是首选语言。目标处理器是 ARM。一般来说，需要最高性能的查询非常简单。复杂查询不需要具有相同级别的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T03:41:04.660

Apple 的 iPhone（和 iPod Touch）的许多功能都使用 SQLite DB，因此那里肯定有一个经过验证的基于闪存的平台。但是，我怀疑任何这些表中的数据量都超过 500k 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-13T21:18:24.883

我认为[这个 Wikipedia RDBMS 比较](http://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems)可能会帮助您做出选择。

但我不明白您为什么有特定的 NVRAM 要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T02:53:07.067

Codebase 提供了一个可靠的可移植轻量级快速 isam 事务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T03:21:21.160

如果您的嵌入式系统可以访问 .NET 框架，则可以嵌入[VistaDB](http://vistadb.net/vistadb3/features.aspx)。

# html - 定位标志和导航链接不对齐

> ID：364730
> 
> 赞同：1
> 
> 时间：2008-12-13T03:02:25.003
> 
> 标签：html, css, positioning

问题截图：

![http://i36.tinypic.com/dfxdmd.jpg](https://i.stack.imgur.com/qutvW.jpg)

黄色块是徽标，蓝色框是导航链接（我已将它们消隐）。我想对齐底部的链接，使它们粘在正文内容的顶部（白框）。我该怎么做？这是相关的CSS和HTML。

```
#header {
    height: 42px;
}
#logo {
    width: 253px;
    height: 42px;
    background-image:url(logo.png);
    float: left;
}
#nav {
    width: 100%;
    border-bottom: 2px solid #3edff2;
    vertical-align: bottom;
}
#nav ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    margin-bottom: 4px;
    text-align: right;
    font-size: 1.25em;
}
#nav ul li {
    display: inline;
    background-color: #3edff2;
    padding: 5px;
}

    <div id="header">
        <div id="logo"><a href="/"></a></div>
        <div id="nav">
            <ul>
            <li><a href="#">*****</a></li>
                            [...]
            </ul>
        </div>
    </div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T03:31:31.653

尝试这个。似乎在 Firefox/Mac 中工作

```
#header {
    height: 42px;
}
#logo {
    width: 253px;
    height: 42px;
    background: #00ffff;
    float: left;
}
#nav {
    width: 100%;
    border-bottom: 2px solid #3edff2;
    height: 42px;
}
#nav ul {
    list-style-type: none;
    margin: 0;
    padding-top: 18px;
    margin-bottom: 4px;
    text-align: right;
    font-size: 1.25em;
}
#nav ul li {
    display: inline;
    background-color: #3edff2;
    padding: 5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T03:08:07.707

左下方？如果是这样 - 首先`clear: both;`在您的#nav 块上进行设置。

除此之外，我真的不明白你的问题 - 你能制作一个你希望它看起来如何的 jpg 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-15T10:01:28.523

您可以像这样使用绝对定位：

```
#header {
    position: relative;

    height: 42px;
}
#nav {
    position: absolute;
    bottom: 0px;

    width: 100%;
    border-bottom: 2px solid #3edff2;
    height: 42px;
} 
```

在这种方法中，您可以使用与“标题”划分相关的绝对定位来制作“导航”。

# javascript - Google Maps API - 无法正确加载信息窗口数据

> ID：364731
> 
> 赞同：0
> 
> 时间：2008-12-13T03:02:44.317
> 
> 标签：javascript, google-maps, openinfowindowhtml

我有这段代码可以生成我希望可以通过弹出信息窗口点击的市场。

```
for (i = 0; i < marker_array.length; i++) {
    var point = new GLatLng(marker_array[i][0], marker_array[i][1]);
    var marker = new GMarker(point, markerOptions);

    GEvent.addListener(marker, "click", function() {
        marker.openInfoWindowHtml(html_data);
        });
    map.addOverlay(marker);
    } 
```

问题是只有一个市场最终可以点击。无论点击哪一个，都会在该可点击标记上方弹出一个带有该可点击标记数据的信息窗口。所有标记都加载并位于正确的位置，因此问题仅在于为每个标记显示弹出窗口数据。

[我已经在这里](http://mapki.com/wiki/Read_This_First)查看了关于“展开”标记功能的部分，看起来这可能是我出错的地方，但我无法通过测试他们建议的更改来让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T13:56:30.263

我相信你的问题是变量 html_data 对于这个循环的所有迭代都是相同的。您应该在循环中每次遍历时更新该变量，以使值不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T18:45:53.567

我使用了一个与我的 HTML 标记数据匹配的数组，它运行良好：

```
function createMarker(posn, title, icon, i) {
    var marker = new GMarker(posn, {title: title, icon: icon, draggable:false});
    GEvent.addListener(marker, 'mouseover', function() { 
        map.closeInfoWindow()
        marker.openInfoWindowHtml(infoText[i])

     } );   
    return marker;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-13T03:23:05.320

我不太确定我是否遵循，但你是说所有弹出窗口中都有相同的数据吗？

我认为这是问题所在，这是因为事件侦听器的工作方式。当单击功能发生时，它会评估侦听器事件。所以你显示的 HTML 总是相同的，因为变量总是被重写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-29T18:16:45.193

我发现了同样的情况，我有解决这个问题的方法。我建议您创建一个扩展 Marker 类的自定义类。在这个自定义类中，您应该为您的数据创建一个具有参数的构造函数，并且该类还应该有自己的信息窗口变量，该变量将从您的主应用程序中调用。例如：

自定义类：

```
public class StoreSpot extends Marker
{  
    public var infoWindow:InfoWindowOptions;
    public var store_id:String;
    public var address:String;
    public var name:String;
    ...
} 
```

主要应用：

```
tempMarker = new StoreSpot(
    tempLatlng,
    new MarkerOptions({
        icon:new spotStore(), 
        iconAlignment:MarkerOptions.ALIGN_HORIZONTAL_CENTER,
        iconOffset:new Point(0,-50)
    }),
    temp.store_id,
    temp.name,
    temp.address,
    temp.detail
); 
```

这样，您可以为不同的标记放置不同的信息窗口。希望这对你有用。在此处输入代码。

# .net - Linq 2 SQL 或 Linq 实体

> ID：364740
> 
> 赞同：5
> 
> 时间：2008-12-13T03:10:22.053
> 
> 标签：.net, linq, linq-to-sql, linq-to-entities, ado

我开始设计一个新的应用程序，我想知道人们对 Linq2SQL 或 Linq2Entities 的看法，以及他们认为快速开发的更好技术。

我也在对 ADO.net 数据服务进行一些研究。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-14T05:01:56.693

是的，同意 Slace。

请注意您选择的框架，以确保它满足您的所有需求。

例如，我最近从一个工作项目中删除了实体框架，因为它在过去几周内非常稳固地工作，因为它不能满足我的需求，主要是因为：-

1.  [您在 Linq to Entities 中不能做](http://mosesofegypt.net/post/LINQ-to-Entities-what-is-not-supported.aspx)的事情（例如映射到 .net 枚举类型 (grr) 以及如果您尝试通过调用函数来在 linq 查询语句中花哨的话，几乎每次都收到“NotSupportedException”的恶化或方法调用（见链接））。
2.  缺乏本机延迟加载（我知道有诸如 EF Lazy LoadGen 之类的工具来促进这一点，但这不是我想要加入的东西）。

除此之外，命令和框架看起来简单明了，我选择 EF 的原因是：

1.  我认为 EF 更多地针对企业开发，并且认为 L2S 更适合业余爱好者并且是一个有限的框架。然而，随着进一步的理解和个人的理解，我不需要在 EF 中做任何 L2S 无法做到的事情，我对 L2S 很满意。特别是如果它适合 stackoverflow，我会涵盖可扩展性和效率。
2.  多个 DBMS 的选项（但是我还没有看到它的实际效果）
3.  有传言称微软正在[放弃对 Linq to SQL 的支持和投资](http://oakleafblog.blogspot.com/2008/05/is-adonet-team-abandoning-linq-to-sql.html)。
4.  我喜欢这样一个事实，您可以在 EF .edmx 中更新表和数据库更改，而无需删除现有的模式模型（您必须在 Linq to SQL 中这样做）。尽管如此，除非您在 L2S 模式 (.dbml) 中自定义了任何属性，否则这不会很烦人。

进一步阅读（另一个 SO 帖子）：
[LINQ to SQL 是死的还是活的？](https://stackoverflow.com/questions/252683/is-linq-to-sql-doa)

我很想选择 EF，我真的不知道如何看待 L2S 与 EF 的失败，如果 L2S 真的是一只死鸭，耸耸肩。不可否认，我对 EF 的主要抱怨是 NotSupportedException - 如果我可以在 linq 中执行方法调用而不得到这个，我可以绕过延迟加载......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-13T03:18:09.950

如果您满足以下设计要求，我是 LINQ to SQL 的忠实粉丝：

*   MS SQL Server 作为数据库引擎
*   RAD 开发
*   只需要 1 - 1 个类映射

我没有用 Entity Framework 做很多工作，但据我所知和我所做的是，当从与 LINQ to SQL 使用的相同数据库生成时，它没有那么好的性能。

较低的性能是由于实体框架的性质，它使用 ADO 而不是您正在使用的数据库服务器的特定提供程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-13T03:16:39.547

我想说，对于一个简单到适度的数据库模式，Linq2SQL 工作得很好，并且更容易设置和使用。这是我用于我的 ORM 的，通过部分类进行一些小调整以支持验证和授权/审计。我使用 DBML 设计器并添加我的表/关系。我更改了 DataContext 以使其抽象并构建一个具体的实现，它允许我提供表值函数/存储过程（作为方法映射到数据上下文中）的实现，这些实现提供了用于审计和授权的钩子。我在实体类上实现了 OnValidate 和 OnLoad 的部分方法，以在表级别进行验证和授权。我发现这几乎就是我所需要的。最近，我

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-13T09:34:09.580

为了与 ADO.NET 数据服务（您提到的）一起使用，实体框架是开箱即用的。如果你想用 LINQ-to-SQL 更新数据（通过 ADO.NET 数据服务），你需要做一些工作来实现`IUpdatable`. 幸运的是，我[这周](http://marcgravell.blogspot.com/)一直在写博客。

我在两者之间的整体想法在[这里](https://stackoverflow.com/questions/276433/do-you-think-its-advantageous-to-switch-to-entity-framework#276439)涵盖了，但从那时起我已经软化了一点，请参见[这里](http://marcgravell.blogspot.com/2008/12/entity-framework-in-reality.html)。

基本上，目前我更喜欢 LINQ-to-SQL，但我希望 EF 在下一个版本中更有用。因此，我为什么要努力让 LINQ-to-SQL 与 ADO.NET 数据服务一起工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-13T12:16:34.010

我认为 Linq 2 Sql 是一个很好的选择。几点：

*   [它真的很快，我记得在 L2S beta 期间阅读了Rico Mariani 的 Performance Tidbits](http://blogs.msdn.com/ricom/)上的一篇博文，他测量到它几乎与普通的旧 ADO.Net 一样快，而且那是在它的 beta 期间。
*   如果您愿意，您可以同时执行 linq 查询以及使用存储过程和良好的旧 sql，并且仍然可以为您完成数据到对象的映射。
*   Stackoverflow 使用 L2S 的事实证明它可以在大型网站上运行。
*   它比实体框架轻得多，实体框架的好坏取决于你的需要。一般来说，如果您的需求不是超高级的，您通常可以很快解决任何问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-13T03:27:13.067

我的投票投给了 Linq-to-SQL。适合您的快速开发场景；易于上手，易于使用。此外，它还从 Linq 表达式生成良好/高效的 SQL 查询。

Linq-to-Entities 很笨重，如果您尝试使用任何应该将其与 L2S 分开的“高级”功能，那么您将不得不开始使用 XML 编辑器编辑您的 EDMX 模型文件（您很快就会运行进入设计器中的“限制”，微软推荐的唯一解决方法/解决方案是使用 XML 编辑器手动启动 EDMX）。最重要的是，它往往会生成非常糟糕/低效的 SQL 查询。

微软表示，Entity Framework 的下一个版本会好很多，并将支持 L2S 的所有优点。但是下一个版本不会很快发布，所以在此之前 L2S 是您最好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-13T06:11:06.777

我建议查看 ORM 的非微软解决方案。nHibernate 是一个很好的解决方案，它具有这两个框架的所有优点以及更多优点。是的，它的学习曲线更陡峭，但流畅的 nHibernate 对此有所帮助。它非常值得努力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-13T07:54:12.357

没有人可以肯定地说你**什么**更好。

两种技术都有问题（NHibernate 也有问题）。

我正在使用 Linq-to-SQL 并且对它非常满意。我认为 Linq-to-SQL 中的问题少于 EF ^_^。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-03T14:57:25.587

在我们尝试进行更新之前，我们认为 L2S 很棒。然后就很可怜了。我的同事在做大部分工作，而我做其他事情。他谈到了 EF 以及过度可配置性使其使用变得混乱的方式。

我建议，既然我们以 MSSQL 为目标并且这不会改变，他可以破解所有数据库提供程序抽象的东西。一段时间后，他告诉我这是一个很好的建议，而且他的代码更简单，维护起来也不那么繁琐。

* * *

我很好奇这个答案被否决的*依据*。它描述了实际经验，并讨论了另一种策略以及该方法的相对成功。否决投票是针对具有误导性、事实上不正确或只是简单的拖钓的答案。

碰巧我已经改变了我在整个 EF 与 L2S 事情上的立场，但这并没有改变这样一个事实，即仅仅因为它表达了与你自己不同的观点而拒绝投票是幼稚的，并且与 StackOverflow 的精神完全背道而驰。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-29T11:57:56.847

这是一个很老的问题，但投票最多的 LinqToSql 啦啦队让我很担心。LinqToSql 有很大的缺点。

[不要使用 Visual Studio 2008 LinqToSql O/R 设计器](http://www.capprime.com/software_development_weblog/PermaLink,guid,f1a9b52c-b407-4cbb-9197-4bae289ae11d.aspx)

[采用 Linq To Sql 的弊端](http://www.capprime.com/software_development_weblog/PermaLink,guid,78e9dd46-b743-4d10-a541-2593354028ba.aspx)

也就是说，EntityFramework 也有很大的缺点。

有很多更好的选择（[NHibernate](http://nhforge.org/Default.aspx)是目前最好的选择）。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-12-13T05:01:17.633

如今，Linq to SQL 是一条死胡同，因为 Microsoft 不会再更新它了。我在自己的项目中使用了一段时间，但与真正的 SQL 相比，我发现它的功能不足。当然，在短期内运行似乎更容易，但在应用程序的开发周期中，您会发现您更喜欢 SQL 的强大功能。

我认为 LINQ TO SQL 应该只被那些严重依赖框架抽象层并且没有时间/精力/欲望追求 SQL 的人采用。

您应该记住的另一件事是，SQL 和应用程序之间的额外层有其自身的成本。您不会轻易注意到速度差异，但它就在那里。

就我个人而言，我建议刚开始的人应该直接学习 SQL，而不要错过 LINQ to SQL。

# gridview - ASP.NET 工具包 Accordion 双击问题

> ID：364741
> 
> 赞同：0
> 
> 时间：2008-12-13T03:11:57.853
> 
> 标签：gridview, asp.net-ajax, ajaxcontroltoolkit, accordion

我正在使用一个手风琴控件，它在内容部分和一系列按钮中有嵌套的网格视图。首次加载页面时，需要单击 2 次才能触发任何按钮或链接按钮的事件。

对于按钮，我使用通过javascript调用的外部按钮进行了修复，但是对于gridview的“编辑”和“删除”命令按钮，这不适用。

有没有人找到这个错误的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-24T05:15:14.603

我有同样的问题。我猜手风琴控件中存在导致此问题的错误。查看此链接[http://www.codeplex.com/AjaxControlToolkit/WorkItem/View.aspx?WorkItemId=11055](http://www.codeplex.com/AjaxControlToolkit/WorkItem/View.aspx?WorkItemId=11055)以获取修复此问题的更新代码。在搜索和调试几个小时后，它在我的情况下处理了它。

# c - 如果函数参数超出范围，则强制编译错误

> ID：364757
> 
> 赞同：3
> 
> 时间：2008-12-13T03:21:37.943
> 
> 标签：c

我仅限于 C（不能使用 C++）。我希望 C 有更严格的类型检查。

有没有办法在注释行上获得编译错误？如果有帮助，枚举值不能重叠。

* * *

```
enum hundred {
    VALUE_HUNDRED_A = 100,
    VALUE_HUNDRED_B
};

enum thousand {
    VALUE_THOUSAND_A = 1000,
    VALUE_THOUSAND_B
};

void print_hundred(enum hundred foo)
{
    switch (foo) {
        case VALUE_HUNDRED_A:     printf("hundred:a\n");     break;
        case VALUE_HUNDRED_B:     printf("hundred:b\n");     break;
        default: printf("hundred:error(%d)\n", foo); break;
    }
}

void print_thousand(enum thousand bar)
{
    switch (bar) {
        case VALUE_THOUSAND_A:     printf("thousand:a\n");     break;
        case VALUE_THOUSAND_B:     printf("thousand:b\n");     break;
        default: printf("thousand:error(%d)\n", bar); break;
    }
}

int main(void)
{
    print_hundred(VALUE_HUNDRED_A);
    print_hundred(VALUE_THOUSAND_A);  /* Want a compile error here */

    print_thousand(VALUE_THOUSAND_A);
    print_thousand(VALUE_HUNDRED_A);  /* Want a compile error here */

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-13T06:18:14.610

在 C 中，枚举类型与整数无法区分。很烦人。

我能想到的唯一方法是使用结构而不是枚举的笨拙的解决方法。结构是可生成的，因此成百上千的结构是不同的。如果调用约定是合理的（AMD64），就不会有运行时开销。

这是一个使用结构的示例，它可以获取您想要的编译时错误。Kludgy，但它有效：

```
#include <stdio.h>
enum hundred_e {
    VALUE_HUNDRED_A = 100,
    VALUE_HUNDRED_B
};

enum thousand_e {
    VALUE_THOUSAND_A = 1000,
    VALUE_THOUSAND_B
};

struct hundred { enum hundred_e n; };
struct thousand { enum thousand_e n; };

const struct hundred struct_hundred_a = { VALUE_HUNDRED_A }; 
const struct hundred struct_hundred_b = { VALUE_HUNDRED_B }; 
const struct thousand struct_thousand_a = { VALUE_THOUSAND_A }; 
const struct thousand struct_thousand_b = { VALUE_THOUSAND_B }; 

void print_hundred(struct hundred foo)
{
    switch (foo.n) {
        case VALUE_HUNDRED_A:     printf("hundred:a\n");     break;
        case VALUE_HUNDRED_B:     printf("hundred:b\n");     break;
        default: printf("hundred:error(%d)\n", foo.n); break;
    }
}

void print_thousand(struct thousand bar)
{
    switch (bar.n) {
        case VALUE_THOUSAND_A:     printf("thousand:a\n");     break;
        case VALUE_THOUSAND_B:     printf("thousand:b\n");     break;
        default: printf("thousand:error(%d)\n", bar.n); break;
    }
}

int main(void)
{

    print_hundred(struct_hundred_a);
    print_hundred(struct_thousand_a);  /* Want a compile error here */

    print_thousand(struct_thousand_a);
    print_thousand(struct_hundred_a);  /* Want a compile error here */

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T03:41:37.217

你不能这样做。在 C++ 中，您可以重载函数并做一些诡计（或使用 boost::enable_if），或者仅仅依靠 C++ 的类型安全使其自动出错。在 C 中，这不起作用，因为不支持函数重载。而且您无法检查函数中的值并导致编译时错误，因为所有值仅在运行时才知道（与类型相反）。

C 标准允许编译器警告您所做的事情。因此，您可以启用该`-Wall -Werror`标志并希望 gcc 会出错。但这不是通用的 C 方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-14T13:05:19.993

您可以使用函数的#defines 和__builtin_constant(x) 来实现，如果x 解析为常量，则返回1，否则返回0。请注意，这是仅 gcc 的内在函数；我不知道其他编译器是否有等价物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-14T11:53:25.630

我认为严格来说答案是“这取决于编译器”。我相当确定代码是合法的 C，因此默认情况下 C 编译器不会/不应该抱怨，但不同的编译器中可能有不同的选项可以选择它。

如果这种类型的错误检查对您很重要，那么我建议调查 C linters/样式检查程序/静态分析工具，这些工具将捕获此错误和其他常见（并且不那么常见）错误（如果您正确设置它们！）。将这些工具添加到您的构建过程中需要一些工作，但如果对于您的项目，您认为在编译时捕获这些东西是有价值的，那么成本将是值得的。

我推荐的两个是：

[FlexeLint](http://www.gimpel.com/html/lintinfo.htm)，这是一种相对便宜的商业产品，我用过效果很好。

[Splint](http://www.splint.org/)是一个开源替代品，但不幸的是，目前它似乎大部分都没有维护。

还有更昂贵的商业工具，例如 Klocwork 和 Coverity。

将这些工具添加到您的软件中确实需要一些努力。它们通常非常灵活和可定制，您需要对您希望允许哪些行为以及您希望在代码库中禁止哪些行为做出一些明智的决定。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-13T03:27:31.553

我认为问题不在于 C 不支持严格的类型检查，而在于它确实不支持真正的用户定义类型。

我的猜测是，大多数 C 编译器会将您的两个枚举都转换为简单的整数或短裤或其他任何东西，并且不会做任何其他事情。

所以据我所知，答案是知道的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-13T03:36:32.157

仅 C 语言无法做到这一点，因为编译器除了基本类型之外什么都不知道。通常的做法是使用`assert()`宏，但这是运行时检查。

# maven-2 - 我们应该将 Nexus 或 Artifactory 用于 Maven 存储库吗？

> ID：364775
> 
> 赞同：120
> 
> 时间：2008-12-13T03:32:01.777
> 
> 标签：maven-2, nexus, artifactory

我们正在使用 Maven 进行大型构建过程（> 100 个模块）。我们一直在源代码管理中存储我们的外部依赖项，并使用它来更新本地存储库。

但是，我们已经准备好升级到可以缓存中央的本地存储库，这样我们就不必主动下载所有第 3 方（但我们仍然可以从本地存储库中提取）。此外，我们希望通过每晚构建发布我们的内部构建工件，以便开发人员不必构建世界。

我们正在考虑 Nexus 和 Artifactory。偏爱其中一个的原因是什么？还有其他我们应该考虑的吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2010-11-03T22:47:41.160

我敢肯定，如果您只谈论从“ `mvn deploy`”存储二进制文件，两者都可以。

我们非常广泛地使用 Artifactory，并在此过程中进行所有升级。许多项目，部署的大量快照和代理的外部存储库。没有一个问题。我发现很难解释其他人如何遇到其数据库、索引或其他任何问题。类似的事情从未发生在我们身上。此外，Artifactory 允许将数据存储在磁盘上，并且只使用数据库来存储元数据，它非常灵活（[请参阅此处](http://wiki.jfrog.org/confluence/display/RTF/Changing+the+Default+Storage)的更多内容）。

使这些应用程序*非常*不同的是它们与其他构建工具和技术集成的方法。~~Nexus 和 Sonatype 几乎都锁定在 Maven 和 m2eclipse 上。他们忽略了其他任何事情，直到最近才开始致力于他们自己的专有 Hudson 集成（请参阅他们的[Maven 3 网络研讨会](http://blog.sonatype.com/people/2010/10/maven-3-webinar-recording-now-available/)）。~~ **编辑：**自 2017 年起，这不再是真的 Nexus[为其他构建工具提供了更大的支持](https://help.sonatype.com/display/NXRM2/Maven+and+Other+Build+Tools) **编辑结束**

Artifactory 提供了很棒的[Hudson、TeamCity 和 Bamboo 集成](http://wiki.jfrog.org/confluence/display/RTF/Build+Integration)，以及[Gradle](http://wiki.jfrog.org/confluence/display/RTF/Working+with+Gradle) / [Ivy](http://wiki.jfrog.org/confluence/display/RTF/Working+with+Ivy)支持。因此，当您走出 Sonatype“舒适区”（Maven、m2eclipse）时，尽管 Nexus 没有给您任何帮助，但 Artifactory 拥抱并与所有主要的构建工具协作。

事实上，能够在工作完成后从 Hudson 部署构建工件，而不是通过 " " 部署是一个巨大的区别：Artifactory Hudson 插件会*立即*`mvn deploy`对所有工件进行原子式部署，只有在构建作业成功完成时。" " 在每个模块之后运行，如果构建作业在中间失败，则可以部署部分工件集。在模块完成时从 Maven 部署，而不是在作业完成时从构建服务器进行部署，这确实是一件坏事。*`mvn deploy`*

 *如您所见，Artifactory 认为“框外”而 Nexus 认为“框内”并且只关心 Maven 和 Maven 工件。

使 Artifactory 更易于访问的其他因素是他们[基于云的 Artifactory Online 解决方案](http://www.jfrog.org/art-online.php)。每月大约 80 美元，您就拥有了自己的 Artifactory 实例，无需为它专门配置任何服务器。

Artifactory 有一个[简单直接的 REST API](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API)，不知道它在 Nexus 上是如何工作的。 **Edit** Nexus[还有一个 REST API](https://repository.sonatype.org/nexus-restlet1x-plugin/default/docs/index.html)，您也可以轻松使用。

总而言之，对于 Maven 工件的基本存储，我认为两者都很好。~~但是，虽然 Nexus 不再是严格意义上的“Maven 存储库管理器”，但 Artifactory 仍在继续，它是来自任何构建工具和 CI 服务器的任何类型二进制文件的通用“二进制存储”。~~

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2008-12-17T11:40:36.887

我不了解 Artifactory，但以下是我使用 Nexus 的原因：

*   非常简单的安装（从 1.2 开始，也有非常简单的升级）
*   非常好的网络用户界面
*   易于维护，几乎没有管理开销
*   为您提供最近安装、损坏的工件和错误的 RSS 提要
*   它可以对多个存储库进行分组，因此您可以镜像多个源，但在 settings.xml 中只需要一个或两个条目
*   从 Maven 部署开箱即用（不需要 WebDAV hack 等）。
*   免费
*   您可以重定向访问路径（即一些损坏的 pom.xml 需要来自“xxx”的“abc”）。您可以修复 Nexus 中的错误并将请求重定向到工件实际所在的位置，而不是修补 POM。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2010-04-22T22:08:15.867

Artifactory 支持*文件*系统和数据库存储后端。存储是基于校验和的，相同的二进制文件只存储一次，无论它们在 repo 中出现多少次，这使得 Artifactory 的存储效率更高。由于这种架构，移动和复制也非常便宜（在 Nexus 中，移动/复制没有 REST - 您必须在文件系统上移动内容，然后在存储库上运行纠正措施以使其知道内容已更改）。

另一个重要的区别是 Artifactory 与 Hudson 和 TeamCity 具有独特的集成，用于捕获有关已部署的工件、已解决的依赖项和与构建运行相关的环境数据的信息，从而提供完整的构建可追溯性。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2008-12-25T18:33:20.460

Artifactory 将工件存储在数据库中，这意味着如果出现问题，您的所有工件都会消失。Nexus 为您的珍贵文物使用平面文件，因此您不必担心它们都会丢失。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-08-19T11:52:22.413

如果您需要其中任何一个的“Pro”功能（例如 Staging repos、工件促销、NuGet），那么您需要考虑不同的定价模型，这些定价模型显示在他们的网站上。

*   [http://www.jfrog.com/home/v_pricing](http://www.jfrog.com/home/v_pricing)
*   [http://www.sonatype.com/nexus/purchase](http://www.sonatype.com/nexus/purchase)

总之：

*   神器专业版
    *   **您为每台服务器**付费
    ***   您可以为增加的服务时间支付更多费用**
***   连结临
    *   **您为每个席位**付费，即有多少开发人员下载了工件
    *   支持服务仅限美国东部时间周一至周五 0800-2000，无论您支付多少费用**

 **无论您有多少用户，Nexus Pro 提供的支持服务大致相当于 Artifactory 每年 7,450 美元的“白银超值包”。

7,450 美元/年将为您购买大约 67 个 Nexus Pro 席位（1-50 个 @ 108 美元，其余的 @ 120 美元）。

仅就价格和支持而言，Nexus Pro 在您达到 67 个用户之前是有意义的，此时 Artifactory 成为更便宜的选择。

如果您在内部提供所有支持；然而，这个神奇的点是大约 23 个用户（Artifactory 最基本的支持服务是 2,750 美元/年）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-10-08T12:56:06.740

我最近对 ​​Artifactory 2 和 Nexus 1.3 做了一些研究。我将在这里列出我发现的主要区别：

*   Artifactory 将元数据和可选文件存储在 DB 中，Nexus 直接写入文件系统。有优点。和缺点。对于每种方法。DB支持事务，而FS中存储的文件可以直接访问。
*   Artifactory 对系统有更高的要求，尤其是对磁盘空间的要求。
*   Artifactory 支持 LDAP，而 Nexus 仅在付费版本中提供。另一方面，适用于 Nexus 的免费 LDAP 插件可在 Google 代码上找到。

最完整的对比：[http ://binary-repositories-comparison.github.io/](http://binary-repositories-comparison.github.io/)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-01-07T06:38:23.413

你应该使用 Artifactory 它的最新版本是一个真正的跳跃你可以增量备份你的存储库，这意味着你可以保存和维护所有的工件它有一个易于使用的 web ui 并且非常容易设置我非常喜欢它检查推出新版本 2.0

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-01-09T03:31:27.620

从学习者的角度来看，我注意到两者之间的一些具体差异。

1.  当时 Jboss 应用服务器不支持 Sonatype .war 部署，尽管它确实在 Tomcat 下运行。
2.  Sonatype 目前没有为我提供 Amazon 系统映像 (AMI)，我可以快速站起来进行测试。
3.  一个 Artifactory AMI 由 Bitnami 提供，只需几分钟即可站起来，然后再配置几分钟，可能需要几十分钟，具体取决于您要实现的目标。
4.  Artifactory 在云中提供了 Artifactory 的 SaaS 版本，因此您可以专注于完成工作而不是基础设施。
5.  我没有使用 Nexus 的经验，但我发现 Artifactory 非常直观且易于配置，至少在最初是这样。
6.  补充 - 我确实注意到 Artifactory 用户指南，对于经验丰富的专业人士来说可能没问题，但对于一些深入的解释来说有点轻率。例如，一开始，解压缩然后添加一个存储库，比如 RedHat 的 Jboss EAP Enterprise Repo。一切都很好，但是当我尝试查看导入的工件时 Artifactory 报告零工件？没有错误或警告，所以我现在正在寻找解释。这是正常还是不正常？doco 中的一个简单解释可以快速指出正确的方向。作为一个优秀的贡献者，我将这些评论添加到项目中，以使其他初学者受益。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-01-27T21:14:00.813

撇开所有政治/宗教不谈，许可对某些组织产生了影响。

Nexus 是~~GPL~~ ，现在是~~AGPLv3~~，现在是[Eclipse Public License (EPL)](http://kb.sonatype.org/entries/20999097-sonatype-nexus-2-0-release-notes)。

Artifactory 是~~Apache 许可的~~ [LGPLv3](https://sourceforge.net/projects/artifactory/#more)，自该产品的 2.1 版起获得许可。

您可能还想考虑[Archiva](http://archiva.apache.org/)，只是为了比较。它是 Apache 2.0 许可的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-23T09:42:42.667

我看到 Nexus 的使用量正在增长，而 Artifcatory 的使用量一般保持不变。

![在此处输入图像描述](https://i.stack.imgur.com/XbFss.png)

图片取自这里[http://blog.sonatype.com/2014/11/42000-nexus-repository-managers-and-growth/](http://blog.sonatype.com/2014/11/42000-nexus-repository-managers-and-growing/)

还有矩阵比较[http://docs.codehaus.org/display/MAVENUSER/Maven+Repository+Manager+Feature+Matrix](http://docs.codehaus.org/display/MAVENUSER/Maven+Repository+Manager+Feature+Matrix)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2009-09-22T07:29:13.420

Artifactory 和 Nexus 都有或多或少相似的功能集，但 Artifactory 的 LDAP 支持使其比 Nexus 更具吸引力。虽然 Nexus 也有 LDAP 支持，但在付费版本中 :-(

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2010-11-01T21:17:59.243

嗯……我在人工制品方面的经验很糟糕……但我是一个相对新手，所以对它持保留态度。我的总体抱怨是最近上传到 Artifactory 的 jar 文件似乎没有立即被索引 - 就像几个小时一样 - 似乎没有一个好的方法来强制它。我尝试了各种看起来好像它们应该起作用的东西，但没有。我一直在使用 m2eclipse，将依赖项添加到我从 ant 转换的项目中。当我尝试添加一个刚刚添加到工件的 jar 时，我希望它在选择器中显示为一个选项，但它没有。

一位同事告诉我，他们已经安装了 nexus，到目前为止他们喜欢它……但我还不能保证。只要 IT 能找到我，我就会将它安装在 Linux 机器上。

# c# - 从数据表中提取双精度列

> ID：364788
> 
> 赞同：2
> 
> 时间：2008-12-13T03:42:48.760
> 
> 标签：c#, .net, linq

有没有更简单的方法来实现以下目标？

```
var obj = from row in table.AsEnumerable()
          select row["DOUBLEVALUE"];

double[] a = Array.ConvertAll<object, double>(obj.ToArray(), o => (double)o); 
```

我从 a 中提取一列`DataTable`并将该列存储在一个`double`s 数组中。

假设它`table`包含`DataTable`一个名为“DOUBLEVALUE”的列，类型为`typeof(Double)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T03:50:22.020

```
double[] a = (from row in table.AsEnumerable()
              select Convert.ToDouble( row["DOUBLEVALUE"] )).ToArray(); 
```

如果您有可能对该列具有空值的行，请`where row["DOUBLEVALUE"] != null`在选择之前添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-13T09:28:40.060

```
var obj = (from row in table.AsEnumerable()
      select row.Field<double>("DOUBLEVALUE")).ToArray(); 
```

当然，该`.ToArray()`位是可选的；如果没有`ToArray()`，您将获得可枚举的双精度序列而不是数组 - 这取决于您是否需要阅读一次或两次。如果数据中有空值，请`<double?>`改用。

（请注意，这需要对 System.Data.DataSetExtensions.dll 的引用和“使用 System.Data；”语句 - 这会`.Field<T>(...)`发挥扩展方法的作用）

# jquery - jQuery选择后代，包括父母

> ID：364791
> 
> 赞同：23
> 
> 时间：2008-12-13T03:49:07.657
> 
> 标签：jquery, jquery-selectors, parent, descendant

考虑以下 HTML：

```
<div class="foo" id="obj">
   I should be changed red
   <div class="bar" style="color:black;">
      I should not be changed red.
      <div class="foo">I should be changed red.</div>
   </div>
</div> 
```

给定一个 DOM 元素`obj`和一个表达式，我该如何选择任何子元素和可能`obj`？我正在寻找类似于“选择后代”但也包括父母的东西，如果它与表达式匹配。

```
var obj = $("#obj")[0];

//wrong, may include siblings of 'obj'
$(".foo", $(obj).parent()).css("color", "red");

//wrong -- excludes 'obj'
$(".foo", obj).css("color", "red");

//correct way, but it's annoying
var matches = $(".foo", obj);
if ($(obj).is(".foo")) matches = matches.add(obj);
matches.css("color", "red"); 
```

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-13T04:01:27.257

如果我理解正确：

```
$(currentDiv).contents().addBack('.foo').css('color','red'); 
```

为了清楚起见，我将“div”重命名为“currentDiv”。这将选择当前元素及其包含的所有元素，然后过滤掉没有 class 的元素并将`foo`样式应用于其余部分，即确实有 class的元素`foo`。

**编辑** 轻微优化

```
$(currentDiv).find('.foo').addBack('.foo').css('color','red'); 
```

**编辑**

此答案已更新以包含更新的 jQuery 方法。它原本是

```
$(currentDiv).find('.foo').andSelf().filter('.foo').css('color','red'); 
```

1.8 之前的 jQuery 仍然需要它

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-31T23:39:27.200

jQuery 1.8 引入了[.addBack()](http://api.jquery.com/addBack/)，它接受一个选择器，支持 .andSelf()。因此 tvanfosson 的代码变得更加高效

```
$(currentDiv).find(".foo").addBack(".foo").css("color", "red"); 
```

如果你没有那个，我认为

```
$(currentDiv).find(".foo").add(currentDiv.filter(".foo")).css("color", "red"); 
```

即使不是很漂亮，也会非常有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-05T10:56:18.907

[Andrew 的](https://stackoverflow.com/users/718050/andrew)答案非常有用，也是所有答案中最有效的（从 jQuery 1.8 开始），所以我按照[Sam](https://stackoverflow.com/users/43005/sam)的建议做了，并将其变成了一个简单的 jQuery 扩展方法供大家使用：

## 扩展代码：

```
jQuery.fn.findAndSelf = function (selector){
    return this.find(selector).addBack(selector);
}; 
```

## 像这样使用：

```
$(function(){
    $('#obj').findAndSelf('.foo').css('color', 'red');
}); 
```

## JSFiddle：http: [//jsfiddle.net/BfEwK/](http://jsfiddle.net/BfEwK/)

*完全归功于 Andrew 提出`addBack()`的最佳选择（截至目前）。相应地支持他并建议每个人都这样做。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T03:55:07.173

除非有更好的解决方案，否则我创建了一个新函数并使用它来代替 $：

```
var _$ = function(expr, parent){ 
   return $(parent).is(expr) ? $(expr, parent).add(parent) : $(expr, parent); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-08-23T21:18:44.220

如果我没记错的话，你能不能不做以下事情？

```
$("#obj").css("color", "red").find(".foo").css("color", "red"); 
```

找到预期的对象/元素应用CSS，然后使用所述选择器找到所述对象/元素内的所有对象/元素，然后也将CSS应用到？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-10T19:13:00.287

选择*所有*后代元素（包括父元素）的更短方法：

```
$('*', '#parent').addBack(); 
```

这与以下内容相同：

```
$('#parent').find('*').addBack(); 
```

```
$('*', '#parent').addBack().css('border', '1px solid #f00');
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="parent">
  <span>Child</span>
  <span>Another child</span>
</div>
```

当然，您可以将通用选择器更改为所需的元素。

```
$('.foo', '#parent').addBack(); 
```

或者

```
$('#parent').find('.foo').addBack(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-13T03:54:48.720

```
 $('div.foo, div.foo > *').css('color','red'); 
```

主要思想是你可以用逗号分隔不同的规则来匹配。就像在 css 中一样。据我所知[，这里](http://css.maxdesign.com.au/selectutorial/index.htm)的所有内容都由 jquery 支持，并且可以通过逗号分隔来“或”。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-13T04:00:22.920

这不是你想要的（除非我误解了......）

```
$(document).ready(function(){
    $("div.foo").css("color", "red");
}); 
```

# java - Java 使用什么来确定键是否在 Map 中重复？

> ID：364794
> 
> 赞同：12
> 
> 时间：2008-12-13T03:51:53.250
> 
> 标签：java, map

我的第一直觉是说每个键都是一个对象，并且有一个哈希码，用于确定是否插入了重复项。但是，我找不到任何可以肯定的支持。有人可以提供一个链接，或者在这里提供真正的答案吗？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-13T04:13:56.293

该`Map`接口指定如果两个键是`null`重复的，否则如果存在`k`这样的键`key.equals(k)`，则存在重复。请参阅此处的 contains 或 get 方法：

[http://java.sun.com/javase/6/docs/api/java/util/Map.html#containsKey(java.lang.Object)](http://java.sun.com/javase/6/docs/api/java/util/Map.html#containsKey(java.lang.Object))

但是，`Map`如何执行该检查取决于实现，并且 a`HashMap`将使用哈希码来缩小它将使用该`equals`方法检查的潜在键。因此，在实践中，对于典型的基于哈希的映射，要检查重复映射，映射将采用哈希码（可能是某种大小的模数），并用于`equals`与哈希码模数相同大小给出相同余数的任何键进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T03:55:11.840

读错了问题，但上面的人的答案是正确的，我的链接提供了如何确定的答案（equals方法）。查看链接中的 contains 和 get 方法。

地图如何插入：地图中不能有重复的键。如果您发现重复键，它将用新值替换旧值。这是地图界面的[链接。](http://java.sun.com/javase/6/docs/api/java/util/Map.html)此外，如果你看一下 put(K key, V value) 方法，它还解释了 map 的工作原理。希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T08:32:56.723

我假设您指的`java.util.Map`是标准 Java 库中提供的接口。确定密钥是否重复的方法由具体实现决定。A`java.util.HashMap`使用`equals`和`hashCode`，例如。您可以编写自己的 Map 实现，使用完全不同的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-13T03:55:06.037

它在键上使用 equals() 方法。hashCode() 方法只是帮助有效地存储地图的键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-13T18:43:57.423

小心这里的边缘情况。空键并不总是重复的。事实上，空键会在 Map 实现之间造成很大的挫败感（请参阅我关于[一致性](http://scanningcrew.blogspot.com/2008/12/consistency.html)的帖子）。

例如，在 HashMap 中空键是可以的，但在使用自然排序的 TreeMap 或禁止空键的 ConccurentHashMap 中则不行。这里的问题是，如果您使用 null 键，它们会在许多方法上抛出未捕获的异常，并且当您在重构期间切换实现时会引入可怕的运行时错误。

# python - 生成器理解究竟是如何工作的？

> ID：364802
> 
> 赞同：116
> 
> 时间：2008-12-13T03:55:44.630
> 
> 标签：python

生成器理解是做什么的？它是如何工作的？我找不到关于它的教程。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2008-12-13T04:14:04.483

你了解列表推导吗？如果是这样，生成器表达式就像一个列表推导式，但它不是找到所有您感兴趣的项目并将它们打包到列表中，而是等待，并从表达式中一个接一个地产生每个项目。

```
>>> my_list = [1, 3, 5, 9, 2, 6]
>>> filtered_list = [item for item in my_list if item > 3]
>>> print(filtered_list)
[5, 9, 6]
>>> len(filtered_list)
3
>>> # compare to generator expression
... 
>>> filtered_gen = (item for item in my_list if item > 3)
>>> print(filtered_gen)  # notice it's a generator object
<generator object <genexpr> at 0x7f2ad75f89e0>
>>> len(filtered_gen) # So technically, it has no length
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: object of type 'generator' has no len()
>>> # We extract each item out individually. We'll do it manually first.
... 
>>> next(filtered_gen)
5
>>> next(filtered_gen)
9
>>> next(filtered_gen)
6
>>> next(filtered_gen) # Should be all out of items and give an error
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> # Yup, the generator is spent. No values for you!
... 
>>> # Let's prove it gives the same results as our list comprehension
... 
>>> filtered_gen = (item for item in my_list if item > 3)
>>> gen_to_list = list(filtered_gen)
>>> print(gen_to_list)
[5, 9, 6]
>>> filtered_list == gen_to_list
True
>>> 
```

因为生成器表达式一次只需要产生一个项目，它可以大大节省内存使用量。生成器表达式在您需要一次取一个项目、基于该项目进行大量计算然后继续下一个项目的情况下最有意义。如果需要多个值，也可以使用生成器表达式，一次抓取几个。如果您在程序继续之前需要所有值，请改用列表推导式。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-12-13T04:08:34.887

生成器推导是列表推导的惰性版本。

它就像一个列表推导式，只是它返回一个迭代器而不是列表，即一个具有 next() 方法的对象，该方法将产生下一个元素。

如果您不熟悉列表推导式，请参见[此处](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，生成器请参见[此处](http://docs.python.org/tutorial/classes.html#generators)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-13T04:09:29.703

列表/生成器理解是一种构造，您可以使用它从现有列表/生成器中创建新的列表/生成器。

假设您要生成从 1 到 10 的每个数字的平方列表。您可以在 Python 中执行此操作：

```
>>> [x**2 for x in range(1,11)]
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100] 
```

在这里，`range(1,11)`生成 list `[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`，但该`range`函数不是 Python 3.0 之前的生成器，因此我使用的构造是列表推导。

如果我想创建一个做同样事情的生成器，我可以这样做：

```
>>> (x**2 for x in xrange(1,11))
<generator object at 0x7f0a79273488> 
```

然而，在 Python 3 中，`range`它是一个生成器，因此结果仅取决于您使用的语法（方括号或圆括号）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-28T23:06:29.730

生成器理解是创建具有特定结构的生成器的简单方法。假设您想要一个一个一个`generator`输出所有偶数的`your_list`. 如果您使用函数样式创建它，它将是这样的：

```
def allEvens( L ):
    for number in L:
        if number % 2 is 0:
            yield number

evens = allEvens( yourList ) 
```

您可以使用此生成器理解表达式获得相同的结果：

```
evens = ( number for number in your_list if number % 2 == 0 ) 
```

在这两种情况下，当你打电话时，`next(evens)`你会得到下一个偶数`your_list`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-12T14:42:21.507

生成器理解是一种创建可迭代对象的方法，类似于在资源上移动的光标。如果您知道 mysql 游标或 mongodb 游标，您可能知道整个实际数据永远不会一次加载到内存中，而是一次加载一个。您的光标来回移动，但内存中始终存在一个行/列表元素。

简而言之，通过使用生成器理解，您可以轻松地在 python 中创建游标。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-24T15:24:03.830

生成器理解的另一个例子：

```
print 'Generator comprehensions'

def sq_num(n):
    for num in (x**2 for x in range(n)):    
        yield num

for x in sq_num(10):
    print x 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-30T06:05:55.500

生成器仅与列表相同，细微的区别在于，在列表中，我们得到所有需要的数字或列表中的项目，但在生成器中，所需的数字一次生成一个。因此，为了获取所需的项目，我们必须使用 for 循环来获取所有必需的项目。

```
#to get all the even numbers in given range

def allevens(n):
    for x in range(2,n):
        if x%2==0:
            yield x

for x in allevens(10)
print(x)

#output
2
4
6
8 
```

# c# - 从 ASP.NET 批量打印 PDF

> ID：364803
> 
> 赞同：3
> 
> 时间：2008-12-13T03:57:07.483
> 
> 标签：c#, asp.net, pdf, printing

我有一种情况，在 Web 应用程序中，用户可能需要打印一个可变的 PDF 列表。也就是说，给定一个大的 PDF 列表，用户可以选择该列表的任意子集进行打印。这些 PDF 存储在文件系统中。我需要一种方法来允许用户相对轻松地打印这些批次的 PDF（因此，要求用户单击每个 PDF 并打印不是一个选项），并且不会对性能造成太大影响。

我考虑过的几个选项：

1) 我有一位同事使用 PDF 库，我可以使用它来获取 PDF 并即时组合它们，然后将该 PDF 发送给用户进行打印。我不知道这种方法是否会弄乱任何类型的页码。这可能是一种“好的”方法，但我担心这会影响性能。

2) 我考虑过创建一个 ActiveX，我会将 PDF 传递给它并让它调用打印功能。我担心这是不必要的复杂，并且可能会出现一些奇怪的用户交互。

所以，我正在寻找在这种情况下使用的最佳选择，这可能不是我经历过的选择之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T04:07:08.307

我为您提供的最佳解决方案是 1 号。有很多库可以合并文档。从我使用的那一个开始，编号应该不是问题，因为所有页面都已准备好呈现。

如果您使用 ActiveX，您将限制自己使用 IE，这可能是可以接受的。唯一的另一个想法是使用智能客户端，这样您就可以拥有更多控制权……然后您可以通过网络服务提供 PDF。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T05:09:55.307

我认为连接文件是要走的路。对于工具，我推荐 iText#。免费

你可以在这里下载[iTextSharp](http://sourceforge.net/projects/itextsharp/)

> iText# (iTextSharp) 是用于生成 PDF 的 iText 开源 Java 库的一个端口，该库完全用 C# 编写，用于 .NET 平台。使用 iText 邮件列表获得支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T05:07:23.130

我同意＃1。你可以做一些测试来看看性能会是什么样子。

# sql-server - 请批评设计

> ID：364809
> 
> 赞同：1
> 
> 时间：2008-12-13T04:06:16.967
> 
> 标签：sql-server, sql-server-2008, ssis

我想从位于欧洲和亚洲的不同数据服务器收集数据。而不是运行会阻塞海底网络的普通数据查询任务，我正在考虑在本地站点为我提供的几台机器。

我正在考虑设计主包，以便我可以：

1.  运行远程设置任务
2.  使用 psexec dtexec 在本地启动数据收集包 ...
3.  获取本地存储在多个原始文件中的数据（每种数据类型 1 个）
4.  拉上拉链并拉回
5.  解压并批量上传到本地服务器

数据收集是通过自定义脚本源处理的，因为数据可以通过一个奇怪的类库获得。

任务可能会意外失败。如果成功捕获了特定类型的数据而其他特定位置的数据失败，我不想再次运行它。

如果可能的话，我怎样才能简化这个设计并使它更健壮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T12:07:30.753

**通过缓慢或昂贵的 WAN 链接进行提取**

我认为你描述的听起来很合适。对于缓慢或昂贵的 WAN 链接，您可能希望减少数据传输量。对此的一些方法是：

*   更改数据捕获。
*   压缩。

如果您可以轻松地从源头识别新事务或更改的数据，则可以通过仅发送更改来减少数据量。如果您在源头有资源但无法轻松识别更改的数据，您可以执行以下操作（如果需要，请为此构建通用框架）：

*   从源头提取
*   使用生日附加概率低的算法（例如 MD5、SHA-1）计算哈希值
*   使用表单中的哈希值维护数据库或文件（源系统键，所有非键属性的哈希值）
*   捆绑任何具有不匹配哈希值的东西，然后通过 WAN 链接发送。
*   更新哈希数据库。

**稳健的分布式提取**

像这样的分布式系统有许多故障模式，因此您需要为此实现一个相当健壮的错误处理机制。故障模式的示例可能是：

*   源系统或网络连接之一可能按计划发生故障。
*   其中一个数据包迟到
*   数据以某种方式损坏。
*   瞬态负载或其他问题会导致超时，因此必须对传输进行分块。

根据仓库系统的要求，您可能需要容忍单个提要的失败。您将需要为此设计一个强大的错误处理策略。

**提取合并与转换合并**

如果系统相同（例如连锁零售店中的 POS 系统），您可能会通过在转换阶段之前合并数据来获得更简单的架构。这意味着暂存区需要了解数据源，至少出于审计目的。

如果您有少量系统或多个异构源，则应在转换过程中进行数据合并。在这种情况下，您的 ETL 可能会为每个源系统至少为某些过程提供单独的例程。

**我们需要消耗臭氧层物质吗？**

数据仓库中的一场重大宗教战争是是否应该拥有 ODS。我已经完成了有和没有 ODS 结构的系统，在个别情况下，设计决策是有原因的。我对此的看法是，这个决定的任何一方都没有普遍令人信服的论据，这首先是宗教战争存在的通常原因。

从 50,000 英尺的角度来看，我对此的看法是，源系统越多，数据越同质，ODS 的情况就越强。可以为此绘制一个加特纳式象限：

```
High+--------------------------+--------------------------+
    |                          |                          |
    | Kimball Model (low/high) | Enterprise Data Warehouse|
H   | Unified ODS model hard   |        (high/high)       |
e   | to meaningfully design.  | ODS both difficult and   |
t   | Flat star schemas easier | probably necessary to    |
e   | to fit disparate         | make a manageable system |
r   | data into.               | Better to separate trans-|
g   |                          | formation ahd history.   |
e   +--------------------------+--------------------------+
n   |                          |                          |
e   |                          |  Consolidated Reporting  |
a   |   Data Mart (low/low)    |       (high/low)         |
i   |                          |  ODS easy to implement   |
t   |   ODS probably of        |  and will simplify the   |
y   |   little benefit         |  overall system          |
    |                          |  architecture            |
    |                          |                          |
Low +--------------------------+--------------------------+
Low                  Number of data sources            High 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T08:58:30.557

我可能会避免创建一个适用于**所有**位置的主包。**相反，创建一个可配置的包，为一个**位置执行这些步骤（使用 SSIS 变量指定特定于位置的属性）。

您现在可以从 .cmd 脚本运行此程序包，或者如果您愿意，可以创建具有多个执行进程任务的主 SSIS 程序包，每个任务都使用适当的变量值启动第一个程序包。

PS 是的，在主包中，您应该使用启动 DTEXEC 的执行**进程**任务，而不是执行包任务 - 不幸的是，执行包不是很可配置 - 请参阅[http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx？反馈ID=295885](http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=295885)。

# sql - 使用 GROUP BY 查询获取行数

> ID：364825
> 
> 赞同：59
> 
> 时间：2008-12-13T04:14:15.967
> 
> 标签：sql, mysql

我有一个关于效果的查询

```
SELECT t3.id, a,bunch,of,other,stuff FROM t1, t2, t3 
WHERE (associate t1,t2, and t3 with each other) 
GROUP BY t3.id 
LIMIT 10,20 
```

我想知道这个查询在没有 LIMIT 的情况下返回的总行数（所以我可以显示分页信息）。

通常，我会使用这个查询：

```
SELECT COUNT(t3.id) FROM t1, t2, t3 
WHERE (associate t1,t2, and t3 with each other) 
GROUP BY t3.id 
```

但是 GROUP BY 改变了 COUNT 的含义，相反，我得到了一组行，表示每个组中唯一 t3.id 值的数量。

当我使用 GROUP BY 时，有没有办法计算总行数？我想避免执行整个查询而只计算行数，因为我只需要行的一个子集，因为值是分页的。我正在使用 MySQL 5，但我认为这很通用。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-12-13T04:26:56.813

MySQL 中有一个很好的解决方案。

在关键字 SELECT 之后添加关键字 SQL_CALC_FOUND_ROWS ：

```
SELECT SQL_CALC_FOUND_ROWS t3.id, a,bunch,of,other,stuff FROM t1, t2, t3 
WHERE (associate t1,t2, and t3 with each other) 
GROUP BY t3.id 
LIMIT 10,20 
```

之后，使用函数 FOUND_ROWS() 运行另一个查询：

```
SELECT FOUND_ROWS(); 
```

它应该返回没有 LIMIT 子句的行数。

查看此页面以获取更多信息：[http ://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2008-12-13T04:27:54.613

“一堆其他东西”都是聚合体吗？我假设是这样，因为您的 GROUP BY 只有 t3.id。如果是这种情况，那么这应该有效：

```
SELECT
     COUNT(DISTINCT t3.id)
FROM... 
```

另一个选择当然是：

```
SELECT
     COUNT(*)
FROM
     (
     <Your query here>
     ) AS SQ 
```

我不使用 MySQL，所以我不知道这些查询是否可以在那里工作。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-10T12:11:57.627

使用子查询：

```
SELECT COUNT(*) FROM    
(
SELECT t3.id, a,bunch,of,other,stuff FROM t1, t2, t3 
WHERE (associate t1,t2, and t3 with each other) 
GROUP BY t3.id 
)    
as temp; 
```

所以 temp 包含行数。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-12-13T04:23:27.400

您正在使用 MySQL，因此您可以使用它们的功能来做到这一点。

```
SELECT SQL_CALC_FOUND_ROWS t3.id, a,bunch,of,other,stuff 
FROM t1, t2, t3 
WHERE (associate t1,t2, and t3 with each other) 
GROUP BY t3.id 
LIMIT 10,20;

SELECT FOUND_ROWS(); -- for most recent query 
```

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-06T11:21:14.710

所有给出的答案都将执行查询，然后找到计数。在大型数据集上，Distinct 肯定比 group by 慢。

查找分组依据的最佳方法如下

```
SELECT 
    sum(1) as counttotal
FROM (
    Your query with group by operator
) as T 
```

这将在计算分组依据时找到计数。

# php - PHP+MySQL：使用通配符进行搜索

> ID：364832
> 
> 赞同：1
> 
> 时间：2008-12-13T04:22:26.653
> 
> 标签：php, mysql, optimization

所以，我在数据库中有以下行：

1 | /用户/

2 | /用户/管理员/

3 | /用户/管理员/*

4 | /用户/管理员/迈克/

5 | /用户/管理员/史蒂夫/文档/

输入 URL 是**/users/admin/steve/**，目标是从数据库中找到匹配的 URL。

我想将#3 作为正确的行返回，因为通配符“*”指定任何东西都可以代替星号。这样做最有效的方法是什么？

**这是我最初的想法，但我相信它们可以改进：**

1.  进行查询以查看是否存在完全匹配的 URL
2.  如果没有匹配项，则以相反的顺序检索最后一个字符为“*”的所有行（因此更具体的 URL 优先）
3.  对于每一行，如果它（减去“*”）与输入 URL 匹配，则返回它
4.  如果什么都没找到，那么我们就是 SOL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T04:29:19.057

这是我的做法：

```
SELECT * FROM mytable AS m
WHERE <input-url> = m.urlpattern
 OR <input-url> REGEXP REPLACE(m.urlpattern, '*', '.*'); 
```

REPLACE() 是将通配符通配符更改为等效的正则表达式通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T04:27:58.700

如果我理解正确，这样的事情应该可以工作：

选择合并（

> （从您的查询中选择任何内容以查看是否有确切的 url），
> （选择下一个近似值），
> 'SOL'

)

# perl - 如何从 Perl 脚本中运行 Perl 脚本？

> ID：364842
> 
> 赞同：27
> 
> 时间：2008-12-13T04:34:18.250
> 
> 标签：perl, ipc

我有一个需要执行另一个 Perl 脚本的 Perl 脚本。第二个脚本可以直接在命令行上执行，但我需要在我的第一个程序中执行它。我需要向它传递一些参数，这些参数通常会在它独立运行时传入（第一个脚本定期运行，并在一组特定的系统条件下执行第二个脚本）。

初步的 Google 搜索建议使用反引号或 system() 调用。还有其他方法可以运行吗？（我猜是的，因为我们正在谈论的是 Perl :P）如果我需要从被调用的程序中捕获输出（并且，如果可能的话，当它执行到 stdout 时，就像第二个一样通过管道输出该输出）程序被直接调用）？

（编辑：哦，**现在**SO 提出了一些相关的问题。[这个](https://stackoverflow.com/questions/109124/run-external-process-from-perl-capture-stderr-stdout-and-the-process-exit-code)很接近，但与我要问的不完全相同。第二个程序可能需要一个小时或更长时间才能运行（大量 I/O），所以我不确定一次性调用是否适合此。）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-12-15T01:59:10.417

你可以*做到*。

```
{
    local @ARGV = qw<param1 param2 param3>;
    do '/home/buddy/myscript.pl';
} 
```

防止加载另一个 perl 副本的开销。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-12-13T13:21:28.873

您当前的 perl 解释器的位置可以在特殊变量中找到`$^X`。如果 perl 不在您的路径中，或者如果您有多个 perl 版本可用，但要确保您使用的是同一个版本，这一点很重要。

在执行包括其他 Perl 程序在内的外部命令时，确定它们是否实际运行是相当困难的。检查`$?`会留下持久的心理创伤，所以我更喜欢使用[IPC::System::Simple](http://search.cpan.org/perldoc?IPC::System::Simple)（可从 CPAN 获得）：

```
use strict;
use warnings;
use IPC::System::Simple qw(system capture);

# Run a command, wait until it finishes, and make sure it works.
# Output from this program goes directly to STDOUT, and it can take input
# from your STDIN if required.
system($^X, "yourscript.pl", @ARGS);

# Run a command, wait until it finishes, and make sure it works.
# The output of this command is captured into $results.
my $results = capture($^X, "yourscript.pl", @ARGS); 
```

在上述两个示例中，您希望传递给外部程序的任何参数都进入`@ARGS`. 在上面的两个示例中也避免了 shell，这给您带来了一点速度优势，并避免了涉及 shell 元字符的任何不必要的交互。上面的代码还期望你的第二个程序返回一个零退出值来表示成功；如果不是这种情况，您可以指定允许退出值的附加第一个参数：

```
 # Both of these commands allow an exit value of 0, 1 or 2 to be considered
 # a successful execution of the command.

 system( [0,1,2], $^X, "yourscript.pl", @ARGS );
 # OR
 capture( [0,1,2, $^X, "yourscript.pl", @ARGS ); 
```

如果您有一个长时间运行的进程，并且您希望在生成数据*时*对其数据进行处理，那么您可能需要一个管道打开，或者来自 CPAN 的更重量级的 IPC 模块之一。

说了这么多，任何时候你需要从 Perl 调用另一个 Perl 程序，你可能希望考虑使用模块是否是一个更好的选择。启动另一个程序会带来相当多的开销，无论是在启动成本方面，还是在进程之间移动数据的 I/O 成本方面。这也大大增加了错误处理的难度。如果你能把你的外部程序变成一个模块，你会发现它简化了你的整体设计。

祝一切顺利，

*保罗*

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-13T05:40:17.353

我可以想到几种方法来做到这一点。你已经提到了前两个，所以我不会详细介绍它们。

1.  反引号： `$retVal = `perl somePerlScript.pl`;`
2.  `system()`称呼
3.  `eval`

`eval`可以通过将另一个文件插入一个字符串（或字符串列表），然后“评估”字符串来完成。这是一个示例：

```
#!/usr/bin/perl
open PERLFILE, "<somePerlScript.pl";
undef $/;   # this allows me to slurp the file, ignoring newlines
my $program = <PERLFILE>;
eval $program; 
```

4\. 做：

```
做'somePerlScript.pl'
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-12-13T12:41:40.060

您的问题已经得到了很好的答案，但总是有可能采取不同的观点：也许您应该考虑重构要从第一个脚本运行的脚本。将功能转换为模块。使用第一个和第二个脚本中的模块。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-13T04:56:29.127

如果您需要捕获命令的输出，请使用反引号。

如果`system`您不需要捕获命令的输出，请使用。

TMTOWTDI：所以还有其他方法，但这是最简单和最有可能的两种。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-13T05:23:07.247

如果你需要异步调用你的外部脚本——你只想启动它而不是等待它完成——那么：

```
# On Unix systems, either of these will execute and just carry-on
# You can't collect output that way
`myscript.pl &`;
system ('myscript.pl &');    

# On Windows systems the equivalent would be
`start myscript.pl`;
system ('start myscript.pl');

# If you just want to execute another script and terminate the current one
exec ('myscript.pl'); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-13T08:06:47.963

有关进程间通信的几个选项，请参阅[perlipc文档。](http://perldoc.perl.org/perlipc.html)

如果您的第一个脚本只是为第二个脚本设置环境，您可能正在寻找`exec`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-13T04:57:50.230

```
#!/usr/bin/perl
use strict;

open(OUTPUT, "date|") or die "Failed to create process: $!\n";

while (<OUTPUT>)
{
  print;
}

close(OUTPUT);

print "Process exited with value " . ($? >> 8) . "\n"; 
```

这将启动进程`date`并将命令的输出通过管道传输到 OUTPUT 文件句柄，您可以一次处理一行。命令完成后，您可以关闭输出文件句柄并检索进程的返回值。`date`用任何你想要的替换。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T18:42:46.123

我想做这样的事情来将非子程序卸载到外部文件中，以使编辑更容易。我实际上把它变成了一个子程序。这种方式的优点是外部文件中的那些“我的”变量在主命名空间中声明。如果您使用“do”，它们显然不会迁移到主命名空间。请注意，下面的演示文稿不包括错误处理

```
sub getcode($) {
  my @list;
  my $filename = shift;
  open (INFILE, "< $filename");
  @list = <INFILE>;
  close (INFILE);
  return \@list;
}

# and to use it:

my $codelist = [];
$codelist = getcode('sourcefile.pl');
eval join ("", @$codelist); 
```

# asp.net - 如何在 asp.net 的对象数据源中动态更改连接字符串？

> ID：364847
> 
> 赞同：0
> 
> 时间：2008-12-13T04:37:37.447
> 
> 标签：asp.net, object, datasource

如何在 asp.net 的对象数据源中动态更改连接字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-13T04:40:23.823

```
protected void ObjectDataSource1_ObjectCreated(object sender, ObjectDataSourceEventArgs e)
{
    if (e.ObjectInstance != null)
    {
        SqlConnection conn = new SqlConnection();
        conn.ConnectionString = MyConnectionManager.ConnectionString;
        e.ObjectInstance.GetType().GetProperty("Connection").SetValue(e.ObjectInstance, conn, null);
    }
} 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-06T18:01:54.960

我没有让上述工作，但这样做：

```
 if (e.ObjectInstance != null)
  {
    ((ReportPrototype.ReleasedRatingsDataTableAdapters.RatingsViewTableAdapter)e.ObjectInstance).Connection.ConnectionString = ConfigurationManager.ConnectionStrings["RADSDataConnectionString"].ConnectionString;
  } 
```

ObjectInstance 是表适配器，在我的例子中是绑定到 ObjectDataSource 的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T21:42:22.800

这是一种适用于所有生成的表适配器的方法，使用反射：

```
void OnObjectDataSourceObjectCreated(object sender, ObjectDataSourceEventArgs e)
{
    if (e.ObjectInstance != null)
    {
        ((SqlConnection)e.ObjectInstance.GetType()
            .GetProperty("Connection", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance )
            .GetValue(e.ObjectInstance, null)
         ).ConnectionString = ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString;
    }
} 
```

请注意，Microsoft 生成的 Connection 属性是作为内部创建的（在我的 VS 2013 上），因此您需要将 BindingFlags.NonPublic 提供给 GetProperty。

当然，以一种或另一种方式连接 ObjectCreated 事件：

```
ObjectDataSource ObjectDataSource1 = new ObjectDataSource();
...
ObjectDataSource1.ObjectCreated += OnObjectDataSourceObjectCreated; 
```

# ruby-on-rails - ROR：脚手架还是不脚手架？

> ID：364860
> 
> 赞同：4
> 
> 时间：2008-12-13T04:56:39.953
> 
> 标签：ruby-on-rails

我喜欢脚手架，它对原型设计非常有帮助。但是我们应该使用脚手架来开发应用程序吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-14T17:26:16.287

“脚手架”这个名字现在在 Rails 中有点用词不当（2.0 后）。通过脚手架生成器生成的结构更像是一个可以构建的基础应用程序，而不是您以后丢弃的“原型”。

至少，如果您将应用程序设计为 RESTful，您会发现自己保留了大部分由脚手架生成器生成的控制器和模型代码，同时向它们添加更多逻辑。您可能最终会替换视图，同时在其中保留一些 Ruby 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T06:16:32.850

使用脚手架启动应用程序的开发并没有什么坏处。但是，如果您是新手，则需要了解没有它如何完成工作。Scaffold 是一种用于在 Rails 中进行快速原型开发的工具，如果您可以对其进行更改以快速满足您的要求，则可以使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-13T15:30:16.710

我经常使用它

我先使用脚手架，然后逐渐用自定义代码替换它；这是一种快速启动和运行的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-08-01T11:37:51.937

其实这取决于你的要求。当我们考虑脚手架时，它会立即生成 CRUD（创建、读取、更新和删除）操作。因此，如果您需要删除一些操作，如果您手动编码它真的很容易。但这也可以通过使用脚手架来完成。只是你只需要删除这些方法。所以用不用是你的选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T07:19:45.443

我读过一些书，作者都告诉我，开发人员不会在他们的商业项目中使用它。所以我不会在我的项目中使用它。但这只是我的选择，这取决于你。

# linux - 适用于 Linux 的 Oracle XE ...？

> ID：364867
> 
> 赞同：0
> 
> 时间：2008-12-13T05:06:58.373
> 
> 标签：linux, oracle, oracle-xe

是否有 Linux 版本的 Oracle XE？

我在 Oracles 官方网站上找不到任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T05:12:58.907

是的，[这里](http://www.oracle.com/technology/software/products/database/xe/htdocs/102xelinsoft.html)有。

您可以在 RPM 和 Deb 包中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-14T16:04:22.580

你可以下载@[http://www.oracle.com/technology/software/products/database/xe/htdocs/102xelinsoft.html](http://www.oracle.com/technology/software/products/database/xe/htdocs/102xelinsoft.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-28T13:00:36.083

不知道你在想什么 disto，但 ubuntu 已经将它包含在包管理器中，这使得它非常容易安装，包括初始化脚本和你可能需要的一切。

[https://help.ubuntu.com/community/Oracle10g](https://help.ubuntu.com/community/Oracle10g)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-13T15:26:00.463

他们不提供 x86_64 版本似乎有点没用；i386 只对玩具服务器真正有用。

# c++ - 如何在 Windows 平台上测量应用程序的运行时内存需求？

> ID：364881
> 
> 赞同：2
> 
> 时间：2008-12-13T05:20:12.510
> 
> 标签：c++, windows

如何在 Windows 平台上测量应用程序的运行时内存需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T05:48:30.970

Perfmon.exe 将监视进程的使用情况。

运行 perfmon.exe，右键单击 Add counters，为 Performance Object 选择 Process，然后选择 Virtual Bytes、Working Set 和 Page File。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T05:28:58.593

我假设您的意思是特定时间点的内存使用量，而不是它可能需要的内存量。

您可以通过 Windows API 获取有关进程消耗量的信息，例如 GetProcessMemoryInfo。Windows 以块为单位分配内存，因此它可能比仅检查使用了多少内存或堆空间更准确。

[从 MSDN 查看更多详细信息](http://msdn.microsoft.com/en-us/library/ms682050(VS.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-15T12:35:19.680

首先，“内存要求”没有很好的定义。当您开始时，您的可执行文件将链接到许多 DLL。与第一个堆栈一起，这构成了您的初始过程。然后，您的进程可能会启动额外的线程、分配更多内存和/或内存映射某些文件。

现在 Wwindows 不会为您提供真正的 RAM 来满足所有这些需求。由于其他原因，许多 DLL 已被加载，因此您将共享该 RAM。当您获得软堆栈溢出时，会为堆栈分配额外的 RAM。当这些页面出现故障时，内存映射文件会分配 RAM。

所以，重要的问题之一是你真正想要什么。你必须先回答这个问题。

# iphone - Stomp.framework iPhone 链接。有人有经验吗？

> ID：364893
> 
> 赞同：1
> 
> 时间：2008-12-13T05:34:42.543
> 
> 标签：iphone, linker, stomp

将 Stomp.framework 链接到 iPhone SDK 应用程序时遇到问题。

[http://code.google.com/p/stompframework/](http://code.google.com/p/stompframework/)

我按照说明将其添加到项目中，添加用于复制文件的构建阶段，并通过 #import 包含它。

我不断收到“找不到图像”。

任何人都尝试过这个和/或有一个明确的想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-04-07T13:27:22.907

这可能会更好：

[http://github.com/juretta/objc-stomp](http://github.com/juretta/objc-stomp)

我发现这很容易上手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T06:37:35.850

确保包含 .framework 包的任何文件夹都列在目标或项目的框架搜索路径设置中。

如果您想将框架嵌入到您的应用程序中，您还需要做更多工作，但这是另一个问题。

*编辑：*完全忽略了那里的 iPhone 要求，您必须将框架编译为静态库并链接到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-13T10:28:45.040

iPhone SDK 不支持在应用程序中嵌入框架。我相信它支持 dylibs，尽管我不确定这一事实。但是，最安全的做法是获取该框架的源代码并将其直接编译到您的应用程序中。

# windows - 通过安装程序将应用程序注册到 URL 协议（所有浏览器）

> ID：364895
> 
> 赞同：5
> 
> 时间：2008-12-13T05:34:51.700
> 
> 标签：windows, installation

我知道这可以通过一个简单的注册表更改来完成，只要使用 IE/firefox。但是，我想知道其他浏览器是否有可靠的方法，

我正在专门寻找一种通过安装程序执行此操作的方法，因此在特定浏览器中编辑首选项不会削减它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-08T20:52:45.813

这是我能想到的最好的：

**即：http : **//msdn.microsoft.com/en-us/library/aa767914 (** [VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa767914(VS.85).aspx)**

 ****火狐**： http: [//kb.mozillazine.org/Register_protocol](http://kb.mozillazine.org/Register_protocol)

**Chrome**：由于其他所有浏览器似乎都支持相同的约定，因此我为 chrome 创建了一个[错误](http://code.google.com/p/chromium/issues/detail?id=5502)。

**Opera**：我找不到任何文档，但它似乎遵循与 IE/Firefox 相同的方法（见上面的链接）

**Safari**：与 Opera 相同，它可以工作，但我找不到任何文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-13T05:55:10.723

是的。以下是使用 FireFox 的方法：

[http://kb.mozillazine.org/Register_protocol](http://kb.mozillazine.org/Register_protocol)

和歌剧：

[http://www.opera.com/support/kb/view/535/](http://www.opera.com/support/kb/view/535/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-27T06:37:13.683

如果有人看起来像是 Intranet 网站的解决方案（适用于所有浏览器，不仅是 IE），其中包含指向共享服务器文件夹的超链接（如我的情况），这是一个可能的解决方案：

1.  [通过注册表注册协议（URI 方案）](https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85))（我想这可以为所有公司用户完成）。例如，“myfile:”方案。（感谢格雷格·迪恩的回答）
2.  超链接 href 属性应该看起来像

    ```
    <a href='myfile:\\mysharedserver\sharedfolder\' target='_self'>Shared server</a> 
    ```

3.  编写一个控制台应用程序，将参数重定向到 Windows 资源管理器（请参见此类应用程序的步骤 1）

这是我的一个测试应用程序：

```
const string prefix = "myfile:";

static string ProcessInput(string s)
{
    // TODO Verify and validate the input 
    // string as appropriate for your application.
    if (s.StartsWith(prefix))
        s = s.Substring(prefix.Length);

    s = System.Net.WebUtility.UrlDecode(s);

    Process.Start("explorer", s);

    return s;
} 
```

我认为您的管理员可以为所有 Intranet 用户轻松安装此应用程序 :)

*如果没有这个单独的应用程序，我无法设置方案设置以在资源管理器中打开此类链接。*

# git - 是否可以追溯地将一组提交变成一个分支？

> ID：364925
> 
> 赞同：53
> 
> 时间：2008-12-13T06:31:03.053
> 
> 标签：git, branch

假设我有一个 git 存储库并且我一直在做 master，我可以追溯创建一个分支吗？例如：

A - B - C - A1 - D - A2 - E

我想让它看起来像这样：

```
A - A1 - A2   
\           \   
B - C - D - E 
```

具体的用例是当我将一堆提交挑选到旧版本分支中并且它需要进入多个旧版本并且我不想在所有这些修订上重复挑选时。

从本质上讲，它本来可以作为一个特性或主题分支，但不是这样创建的。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2011-01-20T18:11:17.417

如果您希望修订 XXX 之后的所有提交都发生在分支中，我发现这比其他建议的方法容易得多。

```
$ git branch fixes       # copies master to new branch
$ git reset --hard XXX   # resets master to XXX 
```

提交现在仅在“修复”分支中。

此过程在 git 的帮助页面中的`reset`“撤消提交，使其成为主题分支”下进行了描述。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-12-13T12:55:14.307

当然可以。（使用 Git 没有什么是你做不到的。:)

```
git checkout -b new-branch hash-of-A
git cherry-pick hash-of-A1
git cherry-pick hash-of-A2 
```

这将创建一个新分支，从 commit 开始`A`。之后你再次回到同一个提交，创建另一个分支：

```
git checkout -b new-branch2 hash-of-A
git cherry-pick hash-of-B
git cherry-pick hash-of-C
git cherry-pick hash-of-D
git cherry-pick hash-of-E
git merge new-branch 
```

现在您只需合并`new-branch`并`new-branch2`获得所需的结构并删除旧分支。

当然，Dustin 所说的仍然有效：提交的哈希值会发生变化，所以只有在尚未发布更改的情况下才应该这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-13T08:26:21.200

你不能透明地做到这一点，因为哈希必须改变，但你基本上只需要分支 HEAD 和 rebase -i 两个分支来删除相应的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-15T00:52:48.210

你要做的是真正**改写**历史。提交的标识符会改变，在某些情况下，提交给出的变更集也会改变。因此，如果有人可能基于您想要更改的旧版本分支的工作，最好不要这样做。但是，如果您没有发布此分支，请随意。

假设我们要更改的分支名为“master”，并且我们要开始新分支的点名为“A”（在给定的示例中，您可以使用的名称之一是“master~6”）。

首先，让我们从提交“A”创建新分支，我们将其命名为“修复”

```
$ git checkout -b fixes A 
```

这也将使分支“修复”成为当前的。因为只有少数提交是我们想要 un-cherry-pick 的，所以我们可以在分支 'fixes' 上挑选它们：

```
$ git cherry-pick A1
$ git cherry-pick A2 
```

然后我们要从分支“master”中删除提交“A1”和“A2”。因为我们只想要删除一些提交，可能还有更多我们想要保留，所以我们可以使用 'git rebase --interactive' 来实现：

```
$ git rebase -i fixes master 
```

在提交“A”之后，编辑器将启动“master”中的所有提交（这是常见的提交，即分支“master”和分支“fixes”的合并基础）。该列表如下所示：

```
pick deadbee B
pick fa1afe1 C
pick a98d4ba A1
... 
```

删除带有提交“A1”和“A2”的行，保存更改，关闭编辑器（或以其他方式将更改发送到无效的变基），git 将重新应用所有提交，除了那些您已删除的提交。

然后你可以完成

```
$ git merge fixes 
```

（git-rebase 将我们留在了重写的分支“master”上）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-20T20:20:32.600

忘记所有的樱桃采摘。只需 rebase -i 两次忽略更改，每次创建一个新分支，然后合并 2.

# wpf - WPF 如何让用户控件继承按钮？

> ID：364928
> 
> 赞同：14
> 
> 时间：2008-12-13T06:34:54.480
> 
> 标签：wpf, button, user-controls

我创建了一个由几个椭圆和标签组成的 UserControl。我将它添加到另一种形式中就很好了，事情看起来很时髦。

然后我开始添加一些事件处理程序，发现我制作的控件没有暴露 Click 事件。哎呀。很容易修复，对吧？只需回到我制作的 UserControl 上的代码隐藏，让它继承 Button。

不幸的是，这样做会导致“MyControl 的部分声明不得指定不同的基类”消息。这让我感到意外，因为我还没有声明任何其他基类。搜索有问题的 Partial 也没有返回任何结果。

有没有办法解决这个问题？如果没有，这里最简单的解决方法是什么？我的目标只是在 UserControl 上获得一个 Click 事件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-13T09:06:57.093

是的，您已经声明了其他基类 :) 相信编译器 :)

当您`<UserControl ...></UserControl>`使用 XAML 编写代码时，您是在继承 UserControl。如果要子类化 Button，请`<Button ...></Button>`在代码隐藏文件中使用“：Button”。

但我强烈建议您不要继承 Button，这对您的任务来说太过分了。您可以使用 MouseLeftButtonUp 事件而不是 Click 事件。

# ruby-on-rails - 自引用 has_many 的问题：通过 Rails 中的关联

> ID：364934
> 
> 赞同：10
> 
> 时间：2008-12-13T06:42:45.793
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

我正在阅读关于自我引用 has_many :through 数据情况的文章，因为我正在尝试构建一个使用它们的 Rails 应用程序。我在网上找到了这个[示例情况](http://blog.hasmanythrough.com/2007/10/30/self-referential-has-many-through)，对此我有一个疑问。让我从这个人的博客中发布这个示例代码：

```
create_table :animals do |t|
  t.string :species
end
create_table :hunts do |t|
  t.integer :predator_id
  t.integer :prey_id
  t.integer :capture_percent
end

class Animal < ActiveRecord::Base
  has_many :pursuits,  :foreign_key => 'predator_id',
                       :class_name => 'Hunt',
                       :dependent => :destroy
  has_many :preys,     :through => :pursuits
  has_many :escapes,   :foreign_key => 'prey_id',
                       :class_name => 'Hunt',
                       :dependent => :destroy
  has_many :predators, :through => :escapes
end
class Hunt < ActiveRecord::Base
  belongs_to :predator, :class_name => "Animal"
  belongs_to :prey,     :class_name => "Animal"
end 
```

假设我正在构建一个网页，其中列出了其数据库中的第一个动物。此标题下方是百分比列表 (capture_percent)。每个百分比都是指该页面的动物狩猎的动物，但它不会告诉您动物的名称，只是百分比。点击任何给定的百分比将带您到相应的动物页面。

我知道，这是一个很难解决的问题，但我正在努力解决这个问题。我是否必须为 CapturePercent 创建一个单独的表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-13T10:06:23.650

> 我是否必须为 CapturePercent 创建一个单独的表？

一点也不，这似乎没有什么复杂的：

```
<ul>
<% @animal.pursuits.each do |pursuit| %>
  <li><%= link_to "#{pursuit.capture_percent}%", pursuit.prey %></li>
<% end %>
</ul> 
```

# java - Java中的输入和输出流管道

> ID：364936
> 
> 赞同：9
> 
> 时间：2008-12-13T06:49:13.190
> 
> 标签：java, input, multiple-inheritance

有没有人对在 Java 中创建一个既是 InputStream 又是 OutputStream 的 Pipe 对象有什么好的建议，*因为*Java 没有多重继承，并且两个流都是抽象类而不是接口？

潜在的需求是拥有一个可以传递给需要 InputStream 或 OutputStream 的东西的单一对象，以将输出从一个线程传递到另一个线程的输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-13T23:25:02.990

似乎错过了这个问题的重点。如果我理解正确，您需要一个对象在一个线程中像 InputStream 一样工作，而在另一个线程中像 OutputStream 一样创建两个线程之间的通信方式。

也许一个答案是使用组合而不是继承（无论如何这是推荐的做法）。使用 getInputStream() 和 getOutputStream() 方法创建一个包含相互连接的 PipedInputStream 和 PipedOutputStream 的管道。

您不能直接将 Pipe 对象传递给需要流的对象，但您可以传递它的 get 方法的返回值来执行此操作。

那对你有用吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-13T08:22:12.223

java.io.PipedOutputStream 和 java.io.PipedInputStream 看起来是用于此场景的类。它们被设计为一起用于在线程之间传递数据。

如果你真的想要一些单个对象传递，它需要包含其中的每一个并通过 getter 公开它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-13T07:01:04.367

我认为这是很常见的事情。看到这个问题。

[将 Java InputStream 的内容写入 OutputStream 的简单方法](https://stackoverflow.com/questions/43157/easy-way-to-write-contents-of-a-java-inputstream-to-an-ouptutstream#43164)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T09:23:02.740

你不能创建一个既派生自`InputStream`又派生的类，`OutputStream`因为它们不是接口并且它们具有通用方法并且Java不允许多重继承（编译器不知道是否调用`InputStream.close()`或者`OutputStream.close()`你是否调用`close()`你的新对象） .

另一个问题是缓冲区。Java 想要为数据分配一个静态缓冲区（它不会改变）。这意味着当您使用 `java.io.PipedXxxStream' 时，写入数据最终会阻塞，除非您使用两个不同的线程。

所以来自 Apocalisp 的答案是正确的：你必须编写一个复制循环。

我建议您在项目中包含 Apache 的 commons-io，其中包含许多仅用于此类任务的辅助例程（在流、文件、字符串及其所有组合之间复制数据）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T20:04:35.830

见[http://ostermiller.org/utils/CircularBuffer.html](http://ostermiller.org/utils/CircularBuffer.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-19T12:23:21.490

我必须为与 Servlet 的慢速连接实现一个过滤器，所以基本上我将 servlet 输出流包装到一个 QueueOutputStream 中，它将每个字节（在小缓冲区中）添加到一个队列中，然后将这些小缓冲区输出到第二个输出流，所以在某种程度上，这充当输入/输出流，恕我直言，这比无法很好扩展的 JDK 管道更好，基本上标准 JDK 实现（每个读/写）中有太多的上下文切换，阻塞队列只是非常适合单个生产者/消费者场景：

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.concurrent.*;

public class QueueOutputStream extends OutputStream
{
  private static final int DEFAULT_BUFFER_SIZE=1024;
  private static final byte[] END_SIGNAL=new byte[]{};

  private final BlockingQueue<byte[]> queue=new LinkedBlockingDeque<>();
  private final byte[] buffer;

  private boolean closed=false;
  private int count=0;

  public QueueOutputStream()
  {
    this(DEFAULT_BUFFER_SIZE);
  }

  public QueueOutputStream(final int bufferSize)
  {
    if(bufferSize<=0){
      throw new IllegalArgumentException("Buffer size <= 0");
    }
    this.buffer=new byte[bufferSize];
  }

  private synchronized void flushBuffer()
  {
    if(count>0){
      final byte[] copy=new byte[count];
      System.arraycopy(buffer,0,copy,0,count);
      queue.offer(copy);
      count=0;
    }
  }

  @Override
  public synchronized void write(final int b) throws IOException
  {
    if(closed){
      throw new IllegalStateException("Stream is closed");
    }
    if(count>=buffer.length){
      flushBuffer();
    }
    buffer[count++]=(byte)b;
  }

  @Override
  public synchronized void write(final byte[] b, final int off, final int len) throws IOException
  {
    super.write(b,off,len);
  }

  @Override
  public synchronized void close() throws IOException
  {
    flushBuffer();
    queue.offer(END_SIGNAL);
    closed=true;
  }

  public Future<Void> asyncSendToOutputStream(final ExecutorService executor, final OutputStream outputStream)
  {
    return executor.submit(
            new Callable<Void>()
            {
              @Override
              public Void call() throws Exception
              {
                try{
                  byte[] buffer=queue.take();
                  while(buffer!=END_SIGNAL){
                    outputStream.write(buffer);
                    buffer=queue.take();
                  }
                  outputStream.flush();
                } catch(Exception e){
                  close();
                  throw e;
                } finally{
                  outputStream.close();
                }
                return null;
              }
            }
    );
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-27T00:33:47.737

最好使用 Pipe 或 ArrayBlockingQueue，我建议您不要使用 PipedInput/OutputStream，因为它们有不好的做法，即使您可以在下面的链接中看到他们已要求弃用，因为这会导致许多问题。

[https://bugs.openjdk.java.net/browse/JDK-8223048](https://bugs.openjdk.java.net/browse/JDK-8223048)

对于 BlockingQueue 和 Pipe 这里是一个简单的例子

**管道：**

```
Pipe pipe = Pipe.open();
Pipe.SinkChannel sinkChannel = pipe.sink();
String newData = "New String to write to file..." + System.currentTimeMillis();

ByteBuffer buf = ByteBuffer.allocate(48);
buf.clear();
buf.put(newData.getBytes());

buf.flip();

while(buf.hasRemaining()) {
    sinkChannel.write(buf);
}
Pipe.SourceChannel sourceChannel = pipe.source();
ByteBuffer buf = ByteBuffer.allocate(48);

int bytesRead = inChannel.read(buf); 
```

参考：[http ://tutorials.jenkov.com/java-nio/pipe.html](http://tutorials.jenkov.com/java-nio/pipe.html)

**阻塞队列：**

```
//Shared class used by threads
public class Buffer {
    // ArrayBlockingQueue
    private BlockingQueue<Integer> blockingQueue = new ArrayBlockingQueue<Integer>(1);

    public void get() {
        // retrieve from ArrayBlockingQueue
        try {
            System.out.println("Consumer received - " + blockingQueue.take());
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void put(int data) {
        try {
            // putting in ArrayBlockingQueue
            blockingQueue.put(data);
            System.out.println("Producer produced - " + data);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

public static void main(String[] args) {
        // Starting two threads
        ExecutorService executorService = null;
        try {
            Buffer buffer = new Buffer();
            executorService = Executors.newFixedThreadPool(2);
            executorService.execute(new Producer(buffer));
            executorService.execute(new Consumer(buffer));
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            if(executorService != null) {
                executorService.shutdown();
            }
        }
    }

public class Consumer implements Runnable {
    private Buffer buffer;

    public Consumer(Buffer buffer) {
        this.buffer = buffer;
    }

    @Override
    public void run() {
        while (true) {
            try {
                buffer.get();
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

public class Producer implements Runnable {
    private Buffer buffer;

    public Producer(Buffer buffer) {
        this.buffer = buffer;
    }

    @Override
    public void run() {
        while (true) {
            Random random = new Random();
            int data = random.nextInt(1000);
            buffer.put(data);
        }
    }
} 
```

参考： [https ://github.com/kishanjavatrainer/ArrayBlockingQueueDemo/tree/master/ArrayBlockingQueueDemo](https://github.com/kishanjavatrainer/ArrayBlockingQueueDemo/tree/master/ArrayBlockingQueueDemo)

# vb.net - 在 VB .NET 中单击并拖动用户控件会创建对象引用错误消息

> ID：364937
> 
> 赞同：1
> 
> 时间：2008-12-13T06:50:56.570
> 
> 标签：vb.net, visual-studio, controls

未能创建组件“用户控件 1”。错误信息如下：

> 'System.NullReferenceException：对象引用未设置为对象的实例。在 System.ComponentModel.ReflectPropertyDescriptor.SetValue（对象组件，对象值）............等......

我应该怎么做才能修复这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-03T20:07:38.673

当用户控件无法加载到 Visual Studio 设计器中时，您需要执行此操作。这些指令适用于 vb.net 项目，但 c# 应该类似。此外，在执行此操作之前，请关闭所有打开的窗口（或至少关闭您正在处理的控件的源文件和设计器文件。）

最后一件事。您应该做的第一件事是确保重新启动 Visual Studio 不能解决问题。如果没有，您可以尝试以下步骤。这些说明假定错误的用户控件位于 Visual Studio 的控件库项目中。如果不是，您应该能够稍微调整方向以使其工作，但当控件位于其自己的项目中时，它会容易得多。

请执行下列操作：

1.  使控件库成为您的启动项目。
2.  打开控件库项目的属性，然后单击调试选项卡。
3.  在 Start Action 下单击 Start external program 选项并浏览到 Visual Studio 可执行文件。

注意：这意味着当您运行解决方案时，它将启动另一个 Visual Studio 实例，而不是实际运行您的解决方案。Visual Studion 的第一个实例 (INSTANCE_1) 将在您运行时“托管”第二个 Visual Studio 实例 (INSTANCE_2)。

4.  运行您的解决方案。INSTANCE_2 将加载。
5.  切换回 INSTANCE_1。
6.  在 INSTANCE_1 中按 CTRL-ALT-E。这将打开例外对话框。选中 Common Language Runtime Exceptions 旁边的 THROWN 列复选框。

注意：这将确保 INSTANCE_1 将在任何运行时错误时中断，即使它在 try 块中被击中。

7.  切换到 INSTANCE_2。在解决方案资源管理器中双击打开错误用户控件。

您应该会发现 INSTANCE_1 OF Visual Studio 应该在导致设计器不加载控件的代码行处停止。修复代码（这通常意味着在引用对象属性之前测试 IsNot Nothing ......但可能意味着其他事情。）

此外，有时我发现控件将在 INSTANCE_2 中加载，而不是在 INSTANCE_1 中出现错误。在这种情况下，只需停止调试...关闭 INSTANCE_2。保存/重新启动 INSTANCE_1，您的问题通常会消失。

教训是这样的。用户控件必须能够加载/引用所有对象及其成员，以便将其加载到设计器中。因此，对于将被放置到其他容器上的用户控件，我通常会设计事件来通知父控件，而不是尝试将对象推送到子控件中。

希望这有助于将来参考这个老问题。

赛斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-16T11:32:02.957

当您打开表单进行编辑时不会发生错误，听起来好像是在您已经在编辑表单并添加新的用户控件时发生。前面提到的[CodeProject 文章](http://www.codeproject.com/KB/cs/wsod.aspx)显示了在表单加载不正确的情况下应该做什么，而不是特定的用户控件。

您的用户控件是否具有映射到自定义对象的任何属性（即 not`Integer`或`String`）？如果是这样，表单设计器将尝试将您的属性加载到属性编辑器中。如果显示属性产生错误，表单设计器将向您显示。我认为这就是您的用户控件正在发生的事情。

如果您可以编辑问题并添加有关错误性质的更多信息（更多错误文本），它将帮助其他人更好地帮助您。或者，查看您是否可以找到可能导致错误的属性（例如，是否有任何属性依赖于设置的非空值）。您还可以查看这篇[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc164048.aspx)，了解有关如何将控件限制为仅运行时的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T17:35:58.880

我发现当控制 dll 没有正确构建时，经常会发生这个错误。95% 的情况下，只需重新启动 Visual Studio 即可解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-07T12:51:02.483

谢谢，赛斯，为了这篇文章！您的解决方案帮助我确定了错误。我唯一要补充的是，当“INSTANCE_2”加载时，您可能需要实际加载 INSTANCE_2 中的项目文件。我需要这样做是因为我不是在处理控件库，而是在表单所在的同一个项目中定义了自定义用户控件。在 INSTANCE_2 中加载项目后，我打开了错误的表单，这导致了 INSTANCE_1弹出到用户控件中的违规代码行。

# oop - 多重继承是邪恶的吗？

> ID：364941
> 
> 赞同：9
> 
> 时间：2008-12-13T07:05:31.363
> 
> 标签：oop, multiple-inheritance

> **可能重复：**
> [多重继承的确切问题是什么？](https://stackoverflow.com/questions/225929/what-is-the-exact-problem-with-multiple-inheritance)

为什么多重继承被认为是*邪恶*的，而实现多个接口却不是？尤其是当曾经认为接口只是纯粹的抽象类时？

**（或多或少）重复** [多重继承的确切问题是什么？](https://stackoverflow.com/questions/225929/what-is-the-exact-problem-with-multiple-inheritance "多重继承的确切问题是什么？")，[C#中的多重继承](https://stackoverflow.com/questions/178333/multiple-inheritance-in-c "C#中的多重继承")，以及其他一些......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-13T07:09:16.347

多重继承的常见问题是“钻石问题”。

```
 A
 / \
B   c
 \ /
  D 
```

如果 A 中的一个虚方法由 B 和 C 共同实现，那么你在创建 D 时会得到哪一个？

这不是接口问题的原因是因为接口没有实现，所以如果 A/B/C 都是接口，那么 D 选择如何以任何合适的方式实现 A 方法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-13T07:46:33.730

它被认为是邪恶的，因为它比人们通常预期的更复杂并且引发的问题更多，尤其是在基类不是纯粹抽象的（没有数据成员）的情况下。菱形继承可以使用虚拟继承来解决，其中共享一个公共基础。编译器可以捕获方法签名冲突。使用得当，它可以产生优雅和干燥的解决方案，否则通过接口和组合/委托来实现更加冗长。

C++ 中一个常见的 MI 习惯用法是用于复杂的包装构造函数，其中基构造函数需要使用非平凡的成员对象构造，并且由于需要在成员对象之前构造基对象，因此诀窍是使用 MI（“来自成员的基础”成语。），否则您必须使用工厂和更多步骤来像Java那样进行构造（Java没有用于非接口类的MI）。

不要害怕它并在适当的时候使用它（尽管可能需要一些练习才能找到合适的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-13T07:22:25.337

MI 与其说是邪恶的，不如说是一个罕见问题的高度复杂的解决方案。在大多数情况下，有更好的方法来完成同样的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-13T07:08:03.183

如果 A 实现了一个名为 z 的方法，而 b 实现了一个名为 z 的方法，并且您有：

孩子：a，b

现在，如果我的客户端代码调用 new child().z()。哪个实现被调用？我不认为它是邪恶的，它只是提出了一大堆的粘性点并且提供了很少的价值

# php - 如何使 PDF 文件可在 HTML 链接中下载？

> ID：364946
> 
> 赞同：132
> 
> 时间：2008-12-13T07:09:26.253
> 
> 标签：php, pdf, xhtml, download, markup

我在我的网页上提供了一个 pdf 文件的链接以供下载，如下所示

```
<a href="myfile.pdf">Download Brochure</a> 
```

问题是当用户点击此链接时

*   如果用户已安装 Adob​​e Acrobat，则它会在 Adob​​e Reader 的同一浏览器窗口中打开该文件。
*   如果未安装 Adob​​e Acrobat，则会弹出用户下载文件。

但我希望它总是弹出给用户下载，无论是否安装了“Adobe acrobat”。

请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-06-09T15:46:50.117

这是一个常见问题，但很少有人知道有一个简单的 HTML 5 解决方案：

```
<a href="./directory/yourfile.pdf" download="newfilename">Download the pdf</a> 
```

`newfilename`建议用户保存文件的文件名在哪里。或者，如果您将其留空，它将默认为服务器端的文件名，如下所示：

```
<a href="./directory/yourfile.pdf" download>Download the pdf</a> 
```

兼容性：我在 Firefox 21 和 Iron 上进行了测试，都运行良好。它可能不适用于不兼容 HTML5 或过时的浏览器。我测试的唯一没有强制下载的浏览器是 IE ......

在此处检查兼容性：http: [//caniuse.com/#feat=download](http://caniuse.com/#feat=download)

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2008-12-13T07:18:13.147

而不是链接到 .PDF 文件，而是执行类似的操作

```
<a href="pdf_server.php?file=pdffilename">Download my eBook</a> 
```

它输出自定义标题，打开 PDF（二进制安全）并将数据打印到用户的浏览器，然后他们可以选择保存 PDF，尽管他们的浏览器设置。pdf_server.php 应如下所示：

```
header("Content-Type: application/octet-stream");

$file = $_GET["file"] .".pdf";
header("Content-Disposition: attachment; filename=" . urlencode($file));   
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: File Transfer");            
header("Content-Length: " . filesize($file));
flush(); // this doesn't really matter.
$fp = fopen($file, "r");
while (!feof($fp))
{
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
} 
fclose($fp); 
```

PS：显然对“文件”变量运行一些健全性检查，以防止人们窃取您的文件，例如不接受文件扩展名，拒绝斜杠，将 .pdf 添加到值

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2011-11-14T13:35:59.197

**不要**遍历每个文件行。改用**readfile**，它更快。这是关闭 php 网站： http: [//php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

```
$file = $_GET["file"];
if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header("Content-Type: application/force-download");
    header('Content-Disposition: attachment; filename=' . urlencode(basename($file)));
    // header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

确保清理您的 get 变量，因为有人可能会下载一些 php 文件...

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-02-09T10:24:00.613

与其使用 PHP 脚本来读取和刷新文件，不如使用`.htaccess`. 这将保留一个“不错”的 URL（`myfile.pdf`而不是`download.php?myfile`）。

```
<FilesMatch "\.pdf$">
ForceType applicaton/octet-stream
Header set Content-Disposition attachment
</FilesMatch> 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-08-06T14:59:06.100

我找到了一种使用普通 HTML 和 JavaScript/jQuery 优雅降级的方法。在 IE7-10、Safari、Chrome 和 FF 中测试：

下载链接的HTML：

```
<p>Thanks for downloading! If your download doesn't start shortly, 
<a id="downloadLink" href="...yourpdf.pdf" target="_blank" 
type="application/octet-stream" download="yourpdf.pdf">click here</a>.</p> 
```

jQuery（纯 JavaScript 代码会更冗长）在一小段延迟后模拟点击链接：

```
var delay = 3000;
window.setTimeout(function(){$('#downloadLink')[0].click();},delay); 
```

为了使它更健壮，您可以添加 HTML5 功能检测，如果不存在，则使用`window.open()`该文件打开一个新窗口。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-12-13T07:27:19.617

这是关键：

```
header("Content-Type: application/octet-stream"); 
```

发送 PDF 文件时发送内容类型 application/x-pdf-document 或 application/pdf。Adobe Reader 通常会为此 MIME 类型设置处理程序，以便浏览器在收到任何 PDF MIME 类型时将文档传递给 Adob​​e Reader。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-24T18:48:24.440

我知道我很晚才回答这个问题，但我发现了一个在 javascript 中执行此操作的技巧。

```
function downloadFile(src){
    var link=document.createElement('a');
    document.body.appendChild(link);
    link.href= src;
    link.download = '';
    link.click();
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-11-19T11:30:19.027

这可以使用 HTML 来实现。

```
<a href="myfile.pdf">Download Brochure</a> 
```

为其添加下载属性：这里的文件名将是 myfile.pdf

```
<a href="myfile.pdf" download>Download Brochure</a> 
```

为下载属性指定一个值：

```
<a href="myfile.pdf" download="Brochure">Download Brochure</a> 
```

这里的文件名是 Brochure.pdf

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-21T02:15:48.260

试试这个：

`<a href="pdf_server_with_path.php?file=pdffilename&path=http://myurl.com/mypath/">Download my eBook</a>`

pdf_server_with_path.php 里面的代码是：

```
header("Content-Type: application/octet-stream");

$file = $_GET["file"] .".pdf";
$path = $_GET["path"];
$fullfile = $path.$file;

header("Content-Disposition: attachment; filename=" . Urlencode($file));   
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: File Transfer");            
header("Content-Length: " . Filesize($fullfile));
flush(); // this doesn't really matter.
$fp = fopen($fullfile, "r");
while (!feof($fp))
{
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
} 
fclose($fp); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-29T16:52:53.317

这是一种不同的方法。我更喜欢而不是依赖浏览器支持，或者在应用程序层解决这个问题，来使用 Web 服务器逻辑。

如果您使用的是 Apache，并且可以将 .htaccess 文件放在相关目录中，则可以使用下面的代码。当然，如果您可以访问它，您也可以将它放在 httpd.conf 中。

```
<FilesMatch "\.(?i:pdf)$">
  Header set Content-Disposition attachment
</FilesMatch> 
```

FilesMatch 指令只是一个正则表达式，因此可以根据需要进行精细设置，也可以添加其他扩展。

Header 行与上述 PHP 脚本中的第一行执行相同的操作。如果您还需要设置 Content-Type 行，您可以以相同的方式进行，但我认为没有必要。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-05T11:05:41.027

我使用 PDF 文件的整个 url 解决了我的问题（而不仅仅是将文件名或位置放在 href 中）：a href="domain .com/pdf/filename.pdf"

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-06T05:30:29.490

如果您需要限制下载速率，请使用此代码！

```
<?php
$local_file = 'file.zip';
$download_file = 'name.zip';

// set the download rate limit (=> 20,5 kb/s)
$download_rate = 20.5;
if(file_exists($local_file) && is_file($local_file))
{
header('Cache-control: private');
header('Content-Type: application/octet-stream');
header('Content-Length: '.filesize($local_file));
header('Content-Disposition: filename='.$download_file);

flush();
$file = fopen($local_file, "r");
while(!feof($file))
{
    // send the current file part to the browser
    print fread($file, round($download_rate * 1024));
    // flush the content to the browser
    flush();
    // sleep one second
    sleep(1);
}
fclose($file);}
else {
die('Error: The file '.$local_file.' does not exist!');
}

?> 
```

欲了解更多信息[，请单击此处](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-06T08:38:32.040

```
<!DOCTYPE html>  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
    <title>File Uploader</title>  
    <script src="../Script/angular1.3.8.js"></script>  
    <script src="../Script/angular-route.js"></script>  
    <script src="../UserScript/MyApp.js"></script>  
    <script src="../UserScript/FileUploder.js"></script>  
    <>  
        .percent {  
            position: absolute;  
            width: 300px;  
            height: 14px;  
            z-index: 1;  
            text-align: center;  
            font-size: 0.8em;  
            color: white;  
        }  

        .progress-bar {  
            width: 300px;  
            height: 14px;  
            border-radius: 10px;  
            border: 1px solid #CCC;  
            background-image: -webkit-gradient(linear, left top, left bottom, from(#6666cc), to(#4b4b95));  
            border-image: initial;  
        }  

        .uploaded {  
            padding: 0;  
            height: 14px;  
            border-radius: 10px;  
            background-image: -webkit-gradient(linear, left top, left bottom, from(#66cc00), to(#4b9500));  
            border-image: initial;  
        }  
    </>  
</head>  
<body ng-app="MyApp" ng-controller="FileUploder">  
    <div>  
        <table ="width:100%;border:solid;">  
            <tr>  
                <td>Select File</td>  
                <td>  
                    <input type="file" ng-model-instant id="fileToUpload" onchange="angular.element(this).scope().setFiles(this)" />  
                </td>  
            </tr>  
            <tr>  
                <td>File Size</td>  
                <td>  
                    <div ng-repeat="file in files.slice(0)">  
                        <span ng-switch="file.size > 1024*1024">  
                            <span ng-switch-when="true">{{file.size / 1024 / 1024 | number:2}} MB</span>  
                            <span ng-switch-default>{{file.size / 1024 | number:2}} kB</span>  
                        </span>  
                    </div>  
                </td>  
            </tr>             
            <tr>  
                <td>  
                    File Attach Status  
                </td>  
                <td>{{AttachStatus}}</td>  
            </tr>  
            <tr>  
                <td>  
                    <input type="button" value="Upload" ng-click="fnUpload();" />  
                </td>  
                <td>  
                    <input type="button" value="DownLoad" ng-click="fnDownLoad();" />  
                </td>  
            </tr>  
        </table>  
    </div>  
</body>  
</html> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2008-12-13T07:49:25.253

在 Ruby on Rails 应用程序中（尤其是使用 Prawn gem 和 Prawnto Rails 插件之类的东西），您可以比完整的脚本（如前面的 PHP 示例）更简单地完成此操作。

在您的控制器中：

```
def index

 respond_to do |format|
   format.html # Your HTML view
   format.pdf { render :layout => false }
 end
end 
```

render :layout => false 部分告诉浏览器打开“你想下载这个文件吗？” 提示而不是尝试呈现 PDF。然后你就可以正常链接到文件了：http: [//mysite.com/myawesomepdf.pdf](http://mysite.com/myawesomepdf.pdf)

# sharepoint - 以编程方式停止共享点工作流

> ID：364947
> 
> 赞同：0
> 
> 时间：2008-12-13T07:13:01.753
> 
> 标签：sharepoint, api

事情是我有一个预定的脚本来检查不同数据库（Oracle）中的一些变化，如果发生变化

如果工作流在我的列表中的特定项目上进行，我需要取消 /kill/ 停止工作流

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-15T18:08:43.140

我没有尝试，但是[SPWorkflowManager.CancelWorkflow 方法](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.workflow.spworkflowmanager.cancelworkflow.aspx)应该做你想做的事：“取消指定的工作流实例。”

我希望它有效并解决您的问题。

# flash - 除了 Scribd 之外，我自己的网站的在线 PDF 阅读器？

> ID：364949
> 
> 赞同：1
> 
> 时间：2008-12-13T07:15:27.037
> 
> 标签：flash, pdf, scribd

我正在使用 Scribd API (www.scribd.com) 在我的网站上显示 PDF 文件。我只想知道是否有任何其他 PDF API 可用于将 PDF 嵌入我的网站。比 Scribd 更快、更具可定制性，主要是我想将我的公司徽标放在该 API 中，而在 scribd 中，他们在那里显示徽标。

所以只想知道任何开源、免费和可定制的网站 PDF API。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T08:35:20.573

根据您正在寻找多少功能，推出自己的功能并不难。[SWFTools](http://www.swftools.org/)允许您将 PDF 转换为 SWF，您可以将这种格式加载到简单的 Flash 查看器中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-02-16T14:13:30.013

当然，您可以使用 Google Docs Viewer（您不需要拥有 google 文档帐户）：[https](https://docs.google.com/viewer) ://docs.google.com/viewer - 页面上有说明

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-27T08:40:39.560

您也可以尝试[http://issuu.com](http://issuu.com)。但它对 SEO 不友好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-12T20:41:43.283

也许你可以试试这个：[FreepapeR](http://lededansdubocal.net/spip.php?article22)

# svn - 使用 svn 的 Web 开发工作流程

> ID：364951
> 
> 赞同：3
> 
> 时间：2008-12-13T07:18:43.973
> 
> 标签：svn, workflow, assembla

我在 assembla 中设置了我的 svn，并在与生产服务器设置相同的本地机器上进行编码和测试。然后，我提交对 assembla svn 的更改，并将 ftp 上传到我的生产服务器。

如何改进我的工作流程？我想将我的 svn 保留在 assembla 上，因为我经常可以移动到另一台生产服务器。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T07:44:11.627

更好的方法是构建将自动完成所有脏活的 nant 或 MSBuild 脚本。那些脚本也可以ftp上传。

我已经使用生产服务器脚本来检查 svn 的最后更改，构建并与生产文件夹同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-13T07:39:55.410

例如，如果您使用 PHP、Python 或 Ruby 等解释型语言，您可以直接从存储库到生产服务器执行干净的[svn 导出](http://svnbook.red-bean.com/en/1.0/re10.html)，而不是通过 ftp 从您的机器上传源文件。

您需要对生产服务器的 shell 访问权限。

# javascript - jQuery/JavaScript：访问 iframe 的内容

> ID：364952
> 
> 赞同：835
> 
> 时间：2008-12-13T07:20:34.733
> 
> 标签：javascript, jquery, iframe, same-origin-policy

我想使用 jQuery 在 iframe 中操作 HTML。

我想我可以通过将 jQuery 函数的上下文设置为 iframe 的文档来做到这一点，例如：

```
$(function(){ //document ready
    $('some selector', frames['nameOfMyIframe'].document).doStuff()
}); 
```

但是，这似乎不起作用。一些检查表明，除非我等待 iframe 加载，否则其中的变量`frames['nameOfMyIframe']`是。`undefined`但是，当 iframe 加载时，变量不可访问（我得到`permission denied`-type 错误）。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1017
> 
> 时间：2009-10-28T18:54:19.867

如果`<iframe>`来自同一域，则可以轻松访问元素

```
$("#iFrame").contents().find("#someDiv").removeClass("hidden"); 
```

[**参考**](http://simple.procoding.net/2008/03/21/how-to-access-iframe-in-jquery/)

* * *

## 回答 #2

> 赞同：400
> 
> 时间：2008-12-13T08:25:40.263

我认为您所做的是受[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的约束。这应该是您收到*权限被拒绝类型*错误的原因。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2010-04-02T18:27:46.360

你可以使用[`.contents()`](https://api.jquery.com/contents/)jQuery的方法。

> 如果 iframe 与主页位于同一域中，则该`.contents()`方法还可用于获取 iframe 的内容文档。

```
$(document).ready(function(){
    $('#frameID').load(function(){
        $('#frameID').contents().find('body').html('Hey, i`ve changed content of <body>! Yay!!!');
    });
}); 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2010-06-27T10:15:18.890

如果 iframe src 来自另一个域，您仍然可以这样做。您需要将外部页面读入 PHP 并从您的域中回显它。像这样：

## iframe_page.php

```
<?php
    $URL = "http://external.com";

    $domain = file_get_contents($URL);

    echo $domain;
?> 
```

* * *

然后是这样的：

## display_page.html

```
<html>
<head>
  <title>Test</title>
 </head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>

<script>

$(document).ready(function(){   
    cleanit = setInterval ( "cleaning()", 500 );
});

function cleaning(){
    if($('#frametest').contents().find('.selector').html() == "somthing"){
        clearInterval(cleanit);
        $('#selector').contents().find('.Link').html('ideate tech');
    }
}

</script>

<body>
<iframe name="frametest" id="frametest" src="http://yourdomain.com/iframe_page.php" ></iframe>
</body>
</html> 
```

* * *

以上是如何通过 iframe 编辑外部页面而不拒绝访问等的示例...

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2010-12-02T10:20:33.573

采用

```
iframe.contentWindow.document 
```

代替

```
iframe.contentDocument 
```

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2012-08-03T19:17:51.690

我发现这种方式更清洁：

```
var $iframe = $("#iframeID").contents();
$iframe.find('selector'); 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2008-12-13T08:11:29.683

您需要将事件附加到 iframe 的 onload 处理程序，并在其中执行 js，以便确保 iframe 在访问之前已完成加载。

```
$().ready(function () {
    $("#iframeID").ready(function () { //The function below executes once the iframe has finished loading
        $('some selector', frames['nameOfMyIframe'].document).doStuff();
    });
}; 
```

以上将解决“尚未加载”的问题，但关于权限，如果您在 iframe 中加载来自不同域的页面，由于安全限制，您将无法访问它。

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2014-02-02T14:34:25.387

您可以使用 window.postMessage 在页面和他的 iframe 之间调用一个函数（跨域与否）。

[**文档**](https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage)

**page.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>Page with an iframe</title>
    <meta charset="UTF-8" />
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script>
    var Page = {
        id:'page',
        variable:'This is the page.'
    };

    $(window).on('message', function(e) {
        var event = e.originalEvent;
        if(window.console) {
            console.log(event);
        }
        alert(event.origin + '\n' + event.data);
    });
    function iframeReady(iframe) {
        if(iframe.contentWindow.postMessage) {
            iframe.contentWindow.postMessage('Hello ' + Page.id, '*');
        }
    }
    </script>
</head>
<body>
    <h1>Page with an iframe</h1>
    <iframe src="iframe.html" onload="iframeReady(this);"></iframe>
</body>
</html> 
```

**iframe.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>iframe</title>
    <meta charset="UTF-8" />
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script>
    var Page = {
        id:'iframe',
        variable:'The iframe.'
    };

    $(window).on('message', function(e) {
        var event = e.originalEvent;
        if(window.console) {
            console.log(event);
        }
        alert(event.origin + '\n' + event.data);
    });
    $(window).on('load', function() {
        if(window.parent.postMessage) {
            window.parent.postMessage('Hello ' + Page.id, '*');
        }
    });
    </script>
</head>
<body>
    <h1>iframe</h1>
    <p>It's the iframe.</p>
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-09-02T15:21:04.603

我更喜欢使用其他变体进行访问。您可以从父级访问子 iframe 中的变量。 `$`也是一个变量，您可以访问它的刚刚调用 `window.iframe_id.$`

例如`window.view.$('div').hide()`- 隐藏 iframe 中 ID 为“view”的所有 div

但是，它在 FF 中不起作用。为了更好的兼容性，您应该使用

`$('#iframe_id')[0].contentWindow.$`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-13T08:06:29.930

您是否尝试过经典的，使用 jQuery 的内置准备功能等待加载完成？

```
$(document).ready(function() {
    $('some selector', frames['nameOfMyIframe'].document).doStuff()
} ); 
```

ķ

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-09-24T09:29:04.870

我创建了一个示例代码。现在您可以轻松地从不同的域了解您无法访问 iframe 的内容 .. 相同的域我们可以访问 iframe 内容

我与您分享我的代码，请运行此代码检查控制台。我在控制台打印图像 src。有四个 iframe，两个 iframe 来自同一域，另外两个来自其他域（第三方）。您可以看到两个图像 src（[https://www.google.com/logos/doodles/2015/googles-new-logo -5078286822539264.3-hp2x.gif](https://www.google.com/logos/doodles/2015/googles-new-logo-5078286822539264.3-hp2x.gif)

和

[https://www.google.com/logos/doodles/2015/arbor-day-2015-brazil-5154560611975168-hp2x.gif](https://www.google.com/logos/doodles/2015/arbor-day-2015-brazil-5154560611975168-hp2x.gif) ）在控制台，也可以看到两个权限错误（2错误：权限被拒绝访问属性'文档'

...irstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument...

) 来自第三方 iframe。

```
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
<p>iframe from same domain</p>
  <iframe frameborder="0" scrolling="no" width="500" height="500"
   src="iframe.html" name="imgbox" class="iView">

</iframe>
<p>iframe from same domain</p>
<iframe frameborder="0" scrolling="no" width="500" height="500"
   src="iframe2.html" name="imgbox" class="iView1">

</iframe>
<p>iframe from different  domain</p>
 <iframe frameborder="0" scrolling="no" width="500" height="500"
   src="https://www.google.com/logos/doodles/2015/googles-new-logo-5078286822539264.3-hp2x.gif" name="imgbox" class="iView2">

</iframe>

<p>iframe from different  domain</p>
 <iframe frameborder="0" scrolling="no" width="500" height="500"
   src="http://d1rmo5dfr7fx8e.cloudfront.net/" name="imgbox" class="iView3">

</iframe>

<script type='text/javascript'>

$(document).ready(function(){
    setTimeout(function(){

        var src = $('.iView').contents().find(".shrinkToFit").attr('src');
    console.log(src);
         }, 2000);

    setTimeout(function(){

        var src = $('.iView1').contents().find(".shrinkToFit").attr('src');
    console.log(src);
         }, 3000);

    setTimeout(function(){

        var src = $('.iView2').contents().find(".shrinkToFit").attr('src');
    console.log(src);
         }, 3000);

         setTimeout(function(){

        var src = $('.iView3').contents().find("img").attr('src');
    console.log(src);
         }, 3000);

    })

</script>
</body> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-10-31T21:50:22.960

为了更加稳健：

```
function getIframeWindow(iframe_object) {
  var doc;

  if (iframe_object.contentWindow) {
    return iframe_object.contentWindow;
  }

  if (iframe_object.window) {
    return iframe_object.window;
  } 

  if (!doc && iframe_object.contentDocument) {
    doc = iframe_object.contentDocument;
  } 

  if (!doc && iframe_object.document) {
    doc = iframe_object.document;
  }

  if (doc && doc.defaultView) {
   return doc.defaultView;
  }

  if (doc && doc.parentWindow) {
    return doc.parentWindow;
  }

  return undefined;
} 
```

和

```
...
var frame_win = getIframeWindow( frames['nameOfMyIframe'] );

if (frame_win) {
  $(frame_win.contentDocument || frame_win.document).find('some selector').doStuff();
  ...
}
... 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-12-30T23:42:00.290

我最终在这里寻找没有 jquery 的 iframe 的内容，所以对于其他寻找它的人来说，就是这样：

```
document.querySelector('iframe[name=iframename]').contentDocument 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-01-15T11:06:28.507

此解决方案与 iFrame 相同。我创建了一个 PHP 脚本，可以从其他网站获取所有内容，最重要的是您可以轻松地将自定义 jQuery 应用于该外部内容。请参考以下脚本，该脚本可以从其他网站获取所有内容，然后您也可以应用您的自定义 jQuery/JS。此内容可以在任何地方、任何元素或任何页面内使用。

```
<div id='myframe'>

  <?php 
   /* 
    Use below function to display final HTML inside this div
   */

   //Display Frame
   echo displayFrame(); 
  ?>

</div>

<?php

/* 
  Function to display frame from another domain 
*/

function displayFrame()
{
  $webUrl = 'http://[external-web-domain.com]/';

  //Get HTML from the URL
  $content = file_get_contents($webUrl);

  //Add custom JS to returned HTML content
  $customJS = "
  <script>

      /* Here I am writing a sample jQuery to hide the navigation menu
         You can write your own jQuery for this content
      */
    //Hide Navigation bar
    jQuery(\".navbar.navbar-default\").hide();

  </script>";

  //Append Custom JS with HTML
  $html = $content . $customJS;

  //Return customized HTML
  return $html;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-12T15:42:01.363

如果下面的代码不起作用

```
$("#iFrame").contents().find("#someDiv").removeClass("hidden"); 
```

这是使其工作的可靠方法：

```
$(document).ready(function(){ 
  setTimeout(
    function () {
      $("#iFrame").contents().find("#someDiv").removeClass("hidden");
    },
    300
  );
}); 
```

这样脚本将在 300 毫秒后运行，因此它将获得足够的时间`iFrame`来加载，然后代码将开始执行。有时`iFrame`不会加载并且脚本会尝试在它之前执行。`300ms`可以根据您的需要调整为其他任何内容。

# javascript - 从 iframe 访问 id

> ID：364959
> 
> 赞同：1
> 
> 时间：2008-12-13T07:31:19.593
> 
> 标签：javascript, html, iframe

在这里，我构建了一个带有`iFrame`. 我在`iFrame`src 页面中有一个 id。是否可以通过 JavaScript 从我当前的页面访问 id。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-13T08:03:35.177

如果您从父页面访问 iframe 的脚本，则必须小心，以确保您的 iframe 在请求之前已经完成加载。这是一个例子：

```
window.onload = function () {
    document.getElementById('iframeId').onload = function () { //Attach an onload function to the iframe
        //Do the stuff you want to do with the iframe here
        //because this function is executed once the iframe has finished loading
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T07:52:02.830

这是我通过的一个小例子，

```
<title>Untitled Page</title>
<script type="text/javascript" >
    function ShowVal() {
        alert(myIframe.document.getElementById('nameText').value);
    }

</script> 
```

'myIfrmae' 是 iframe 的 ID。'nameText' 是 iframe 中包含的页面中的文本框控件。

我在单击按钮时从父页面调用此 ShowVal 函数。

谢谢。

PS 抱歉，无法发布整个示例。发布 Html 时遇到问题。

# c# - 从会话将连接字符串分配给表适配器

> ID：364962
> 
> 赞同：1
> 
> 时间：2008-12-13T07:39:31.620
> 
> 标签：c#, asp.net, xsd

我的应用程序已经开发完毕，现在我们将更改存储在会话对象中的连接字符串（分布式数据库管理系统 (DDBMS) 的 Bcoz）

问题就在这里......

> ```
> In that application There are so many **ObjectDataSource** which are 
> ```
> 
> 使用**.XSD** 文件进行初始化。它与 **TableAdapter相关，并且****TableAdapter**的连接字符串 是从 Web.Config 文件中分配的。现在如何将连接字符串更改为存储在会话对象中的任何内容？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-14T11:06:48.320

要在运行时更改 XSD 的连接，您需要将表适配器的 ConnectionModifier 属性设置为 Public。如果它们是由“向导”创建的，它们将默认设置为 Friend/Internal (VB/C#)。

我很难找到 ConnectionModifier 属性（它没有在我的 vs2005 文档中列出）！如果单击 XSD 的下部区域（查询所在的位置），那么它应该在属性窗口中可见以进行更改。

然后，您可以在声明表适配器的地方设置 Connection 属性（它需要一个对象而不是字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-01T00:36:56.837

这是我讨厌类型化数据集的原因之一，实际上也是 LinqToSQL 的缺点之一（但更容易解决）。

我认为您要么在更改连接字符串后重新生成所有键入的数据集，要么进入并“自定义”它们以在运行时使用 web.config 文件中的连接字符串，而不是从网络上复制它.config 在设计时。如果您“自定义”，那么每当您进行任何会导致重新创建类型化数据集的更改时，您都必须担心丢失自定义代码。这就是优点/缺点。

编辑：我稍微误解了这个问题。解决方案仍然相同，但只有我提出的第二个解决方案是可行的。您必须自定义 TableAdapter 代码，然后在对类型化数据集进行更改时小心维护它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-13T12:32:51.860

生成的表格适配器是一个部分类。这意味着您可以在另一个文件中添加该类的代码。您可以公开表适配器的 Connection 属性，并根据您的需要从客户端代码修改它。几乎不是一个好的解决方案，但也许是您唯一的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T15:04:17.057

我有一个 winforms 应用程序，我遇到了类似的问题。我创建了一个包含我的设置 (clsGlobal) 的静态类，其中一个属性是连接字符串。在我引用数据表的页面中，我将连接字符串设置为 clsGlobal.gstrConnectionString 或连接字符串属性。在应用程序初始化阶段执行此操作可能会更好。但是，在应用程序启动时从共享属性设置 tableadapter 连接字符串应该可以解决这个问题。

```
myTableAdapter.Connection.ConnectionString = clsGlobals.gstrConnectionString; 
```

因此，您只需`.ToString()`要将会话对象分配给 ta.Connection.ConnectionString。

# asp.net - 缓存问题

> ID：364963
> 
> 赞同：0
> 
> 时间：2008-12-13T07:39:33.680
> 
> 标签：asp.net, caching, http-headers, http-caching

我有一个 aspx 页面，但所有内容都是手动生成的（是的，我知道我需要制作一个处理程序，我还有一个问题）

我想在客户端浏览器中缓存输出。问题是它只为一个查询缓存。

```
 public static void ProceedCaching(string etag, string lastModify, string response, HttpResponse Response,
                                      HttpRequest Request)
    {
        Response.AddHeader("ETag", "\"" + etag + "\"");
        Response.AddHeader("Last-Modified", lastModify);
        Response.AppendHeader("Cache-Control", "Public");
        Response.AppendHeader("Expires",
                              DateTime.Now.AddMinutes(1).ToUniversalTime().ToString("r",DateTimeFormatInfo.InvariantInfo));

        string ifModified = Request.Headers["If-Modified-Since"];

        if (!string.IsNullOrEmpty(ifModified))
        {
            if (ifModified.Contains(";"))
                ifModified = ifModified.Remove(ifModified.IndexOf(';'));
        }

        string incomingEtag = Request.Headers["If-None-Match"];

        if (String.Compare(incomingEtag, etag) == 0 || string.Compare(ifModified, lastModify) == 0)
        {
            Response.StatusCode = 304;
            Response.End();
        }

        Response.Write(response);
        Response.End();
    } 
```

它变得非常混乱。正如我所说，它只缓存一次。接收到 HTTP 304 浏览器后，将发送没有缓存信息（etag，lastmodified）的干净请求。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-13T10:12:01.690

如果我删除您在第一行的 etag 周围添加的引号，您的代码片段对我来说很好。但我猜这只是片段中的一个错误，而不是你面临的真正问题。

Firefox 3 在收到第一个 304 后甚至不打扰服务器。IE7 继续运行，但它正确发送 lastmod/etag 标头并且每次都收到 304。

您确定不是因为您更改了浏览器中的缓存设置吗？我会在另一个浏览器中尝试以确保。

为了使它更简洁，您可以使用 Response.Caching 上的方法而不是直接设置标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T03:31:42.817

[在这里](http://www.mnot.net/cache_docs/)找到了这个答案

一般来说，这些是最常见的遵循的规则（如果你不了解细节不要担心，下面会解释）：

1.  如果响应的标头告诉缓存不要保留它，它不会。
2.  如果请求经过身份验证或安全，则不会被缓存。
3.  如果响应中没有验证器（ETag 或 Last-Modified 标头），并且它没有任何明确的新鲜度信息，则它将被视为不可缓存。
4.  如果满足以下条件，则缓存表示被认为是新鲜的（即，能够发送到客户端而无需与源服务器进行检查）：
    *   它具有到期时间或其他年龄控制标头集，并且仍在新鲜期内。
    *   如果浏览器缓存已经看到表示，并且已设置为在会话中检查一次。
    *   如果代理缓存最近看到了该表示，并且它在相对较长之前被修改过。新的表示直接从缓存中提供，无需与原始服务器进行检查。
5.  如果一个表示是陈旧的，原始服务器将被要求验证它，或者告诉缓存它拥有的副本是否仍然是好的。

如果您不想缓存， [Microsoft有一篇很好的文章。](http://support.microsoft.com/kb/234067)

# windows - 用开始打开单独的窗口

> ID：364964
> 
> 赞同：1
> 
> 时间：2008-12-13T07:39:42.183
> 
> 标签：windows, batch-file

我想用批处理文件中的 start 命令打开几个 IE 实例。例如，我想在不同的窗口中同时打开 www.google.com 和 www.yahoo.com。

任何帮助，将不胜感激。

问候，亚伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-13T07:43:09.320

```
$>start iexplore http://google.com
$>start iexplore http://yahoo.com 
```

# connection - 如何检查服务器连接

> ID：364978
> 
> 赞同：-1
> 
> 时间：2008-12-13T07:59:10.600
> 
> 标签：connection

我想检查我的服务器连接以了解它是否可用以通知用户..

那么如何将 pkg 或 msg 发送到服务器（它不是 SQL 服务器；它是一个包含一些服务的服务器）......

thnx 提前..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T08:17:32.527

由于防火墙阻止 ICMP 数据包或特定端口的所有可能性，保证服务正在运行的唯一方法是做一些使用该服务的事情。

例如，如果它是 JDBC 服务器，您可以执行非破坏性 SQL 查询，例如`select * from sysibm.sysdummy1`DB2。如果它是 HTTP 服务器，您可以为 index.htm 创建一个 GET 数据包。

如果您确实可以控制该服务，那么创建一个特殊的子服务来处理这些请求是一件简单的事情（例如您通过 CHECK 数据包发送并返回 OKAY 响应）。

这样，您就可以避免所有可能的防火墙问题，并且测试是真正的端到端测试。PING 和 traceroutes 将能够判断您是否可以访问机器（防火墙允许），但它们不会告诉您您的服务是否正常运行。

从一个不得不在公司环境中与网络之神战斗的人那里得到这个，在这个环境中机器被锁得像众所周知的鱼一样严密......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T11:58:15.810

如果您可以打开一个端口但不想使用 ping（我不知道为什么，但嘿），您可以使用以下内容：

```
import socket

host = ''
port = 55555

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((host, port))
s.listen(1)

while 1:
    try:
        clientsock, clientaddr = s.accept()
        clientsock.sendall('alive')
        clientsock.close()
    except:
        pass 
```

这只不过是一个简单的 python 套接字服务器侦听 55555 并活着返回

# c++ - 查找大于或等于给定值的最小幂的算法

> ID：364985
> 
> 赞同：51
> 
> 时间：2008-12-13T08:08:49.893
> 
> 标签：c++, algorithm, assembly

我需要找到大于或等于给定值的两个的最小幂。到目前为止，我有这个：

```
int value = 3221; // 3221 is just an example, could be any number
int result = 1;

while (result < value) result <<= 1; 
```

它工作正常，但感觉有点幼稚。有没有更好的算法来解决这个问题？

编辑。有一些很好的汇编程序建议，所以我将这些标签添加到问题中。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-12-13T10:08:55.313

这是我最喜欢的。除了初始检查它是​​否无效（<0，如果你知道你只传入 >=0 的数字，你可以跳过它），它没有循环或条件，因此将优于大多数其他方法。这与埃里克森的回答类似，但我认为我在开头递减 x 并在结尾添加 1 比他的回答要尴尬一些（并且也避免了最后的条件）。

```
/// Round up to next higher power of 2 (return x if it's already a power
/// of 2).
inline int
pow2roundup (int x)
{
    if (x < 0)
        return 0;
    --x;
    x |= x >> 1;
    x |= x >> 2;
    x |= x >> 4;
    x |= x >> 8;
    x |= x >> 16;
    return x+1;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-12-13T08:18:35.957

```
ceil(log2(value)) 
```

`ilog2()`可以在 3 个 asm 指令中计算，例如[http://www.asterisk.org/doxygen/1.4/log2comp_8h-source.html](https://web.archive.org/web/20081205054906/http://www.asterisk.org/doxygen/1.4/log2comp_8h-source.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-13T08:39:43.607

在 Intel 硬件上，BSR 指令接近您想要的 - 它找到最高有效位。如果您需要更精确，您可以想知道剩余位是否精确为零。我倾向于假设其他 CPU 会有类似 BSR 的东西——这是一个你想要回答的问题以标准化一个数字。如果您的数字超过 32 位，那么您将从最重要的 DWORD 进行扫描，以找到第一个设置了*ANY*位的 DWORD。Edsger Dijkstra 可能会说，上述“算法”假设您的计算机使用二进制数字，而从他那种崇高的“算法”角度来看，您应该考虑图灵机或其他东西——显然我的风格更务实。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-01-20T19:35:11.570

本着 Quake II 的 0x5f3759df 和 Bit Twiddling Hacks 的 IEEE 版本的精神 - 这个解决方案达到了双精度以提取指数作为计算 floor(lg2(n)) 的方法。它比公认的解决方案快一点，比 Bit Twiddling IEEE 版本快得多，因为它避免了浮点数学。按照编码，它假设 double 是小端机器上的真正*8 IEEE 浮点数。

```
int nextPow2(int n) 
{ 
    if ( n <= 1 ) return n;
    double d = n-1; 
    return 1 << ((((int*)&d)[1]>>20)-1022); 
} 
```

编辑：在同事的帮助下添加优化的 x86 程序集版本。速度提高了 4%，但仍比 bsr 版本慢 50%（6 秒，我的笔记本电脑上的 n=1..2^31-2 为 4）。

```
int nextPow2(int n) 
{ 
    if ( n <= 1 ) return n;
    double d;
    n--;
    __asm {
      fild    n 
      mov     eax,4
      fstp    d 
      mov     ecx, dword ptr d[eax]
      sar     ecx,14h 
      rol     eax,cl 
  }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-18T14:26:52.407

这是位移技术的模板版本。

```
template<typename T> T next_power2(T value)
{
    --value;
    for(size_t i = 1; i < sizeof(T) * CHAR_BIT; i*=2)
        value |= value >> i;
    return value+1;
} 
```

由于循环仅使用常量，因此编译器会将其展平。（我检查过）该功能也是面向未来的。

这是一个使用 __builtin_clz 的。（也是未来的证明）

```
template<typename T> T next_power2(T value)
{
    return 1 << ((sizeof(T) * CHAR_BIT) - __builtin_clz(value-1));
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-13T08:24:14.387

您的实现并不幼稚，它实际上是合乎逻辑的，除了它是错误的 - 它对于大于 1/2 最大整数大小的数字返回负数。

假设您可以将数字限制在 0 到 2^30 的范围内（对于 32 位整数），它会工作得很好，并且比任何涉及对数的数学函数都要快得多。

无符号整数会更好，但最终会出现无限循环（对于大于 2^31 的数字），因为使用 << 运算符永远无法达到 2^32。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-04-01T22:37:29.040

**pow（2，ceil（log2（值））；**

log2(value) = log(value) / log(2);

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-17T01:42:35.877

[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogLookup)页面上提供了对密切相关问题的可能解决方案（即向下舍入而不是向上舍入）的探索，其中许多解决方案比简单方法快得多，这是进行各种优化的绝佳资源你正在寻找。最快的解决方案是使用具有 256 个条目的查找表，这将总操作计数从天真的方法的平均 62（通过类似的操作计数方法）减少到大约 7。使这些解决方案适应您的问题是一个比较和增量的问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-13T13:10:18.333

您并没有真正说出“更好的算法”是什么意思，但是由于您提出的那个非常清楚（如果有些缺陷），我假设您追求的是更有效的算法。

Larry Gritz 给出了可能是最有效的 c/c++ 算法，没有查找表的开销，并且在大多数情况下就足够了（有关类似算法，请参见[http://www.hackersdelight.org](http://www.hackersdelight.org)）。

正如其他地方所提到的，如今大多数 CPU 都有机器指令来计算前导零的数量（或等效地返回 ms 设置位），但是它们的使用是不可移植的，并且 - 在大多数情况下 - 不值得付出努力。

然而，大多数编译器具有“内在”功能，允许使用机器指令，但以更可移植的方式。

Microsoft C++ 有 _BitScanReverse() 并且 gcc 提供 __builtin_clz() 来有效地完成大部分工作。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-02-18T01:33:01.350

递归模板版本如何生成编译常量：

```
template<uint32_t A, uint8_t B = 16>
struct Pow2RoundDown { enum{ value = Pow2RoundDown<(A | (A >> B)), B/2>::value }; };
template<uint32_t A>
struct Pow2RoundDown<A, 1> { enum{ value = (A | (A >> 1)) - ((A | (A >> 1)) >> 1) }; };

template<uint32_t A, uint8_t B = 16>
struct Pow2RoundUp { enum{ value = Pow2RoundUp<((B == 16 ? (A-1) : A) | ((B == 16 ? (A-1) : A) >> B)), B/2>::value }; };
template<uint32_t A >
struct Pow2RoundUp<A, 1> { enum{ value = ((A | (A >> 1)) + 1) }; }; 
```

可以这样使用：

```
Pow2RoundDown<3221>::value, Pow2RoundUp<3221>::value 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-13T09:34:22.653

下面的代码反复去除最低位，直到数字是 2 的幂，然后将结果加倍，除非数字是 2 的幂。它的优点是运行时间与设置的位数成正比。不幸的是，它的缺点是在几乎所有情况下都需要比问题中的代码或汇编建议更多的指令。我只是为了完整性才包括它。

```
int nextPow(int x) {
  int y = x
  while (x &= (x^(~x+1))) 
    y = x << 1;
  return y
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-17T01:57:07.063

我知道这是投反对票，但如果数字足够小（如 8 位或 16 位），直接查找可能是最快的。

```
// fill in the table
unsigned short tab[65536];
unsigned short bit = tab[i]; 
```

通过先执行高位字然后执行低位字，可以将其扩展到 32 位。

```
//
unsigned long bitHigh = ((unsigned long)tab[(unsigned short)(i >> 16)]) << 16;
unsigned long bitLow = 0;
if (bitHigh == 0){
    bitLow = tab[(unsigned short)(i & 0xffff)];
}
unsigned long answer = bitHigh | bitLow; 
```

shift-or 方法可能并不好，但也许可以扩展到更大的字数。

（实际上，这给出了最高的 1 位。您必须将其左移 1 才能获得下一个更高的 2 幂。）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-05-12T23:47:53.163

我的版本相同：

```
int pwr2Test(size_t x) {
    return (x & (x - 1))? 0 : 1; 
}

size_t pwr2Floor(size_t x) {
    // A lookup table for rounding up 4 bit numbers to
    // the nearest power of 2.
    static const unsigned char pwr2lut[] = {
        0x00, 0x01, 0x02, 0x02,     //  0,  1,  2,  3
        0x04, 0x04, 0x04, 0x04,     //  4,  5,  6,  7
        0x08, 0x08, 0x08, 0x08,     //  8,  9, 10, 11
        0x08, 0x08, 0x08, 0x08      // 12, 13, 14, 15
    };

    size_t pwr2 = 0;                // The return value
    unsigned int i = 0;             // The nybble interator

    for( i = 0; x != 0; ++i ) {     // Iterate through nybbles
        pwr2 = pwr2lut[x & 0x0f];   // rounding up to powers of 2.
        x >>= 4;                    // (i - 1) will contain the
    }                               // highest non-zero nybble index.

    i = i? (i - 1) : i;
    pwr2 <<= (i * 4);
    return pwr2; 
}

size_t pwr2Size(size_t x) {
    if( pwr2Test(x) ) { return x; }
    return pwr2Floor(x) * 2; 
 } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-20T19:11:42.460

我喜欢这种转变。

我会接受的

```
 int bufferPow = 1;
    while ( bufferPow<bufferSize && bufferPow>0) bufferPow <<= 1; 
```

这样循环总是会终止，并且 && 之后的部分几乎不会被评估。而且我不认为两行值得一个函数调用。你也可以根据自己的判断做长或短，而且可读性很强。（如果 bufferPow 变为负数，希望您的主代码能够快速退出。）

通常你在算法开始时只计算一次 2 次方，所以无论如何优化都是愚蠢的。但是，如果有足够无聊的人会关心速度比赛......使用上面的例子和 255 256 257 .. 4195 4196 4197

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-08-21T17:30:39.893

通过除以 2 的对数，可以将任意对数函数转换为以 2 为底的对数：

```
$ /usr/local/pypy-1.9/bin/pypy
Python 2.7.2 (341e1e3821ff, Jun 07 2012, 15:38:48)
[PyPy 1.9.0 with GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
And now for something completely different: ``<arigato> yes but there is not
much sense if I explain all about today's greatest idea if tomorrow it's
completely outdated''
>>>> import math
>>>> print math.log(65535)/math.log(2)
15.9999779861
>>>> print math.log(65536)/math.log(2)
16.0
>>>> 
```

它当然不会 100% 精确，因为涉及到浮点运算。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2011-08-20T18:16:12.333

这很有效，而且速度非常快（在我的 2.66 GHz Intel Core 2 Duo 64 位处理器上）。

```
#include <iostream>
int main(void) {
    int testinput,counter;
    std::cin >> testinput;
    while (testinput > 1) {
        testinput = testinput >> 1;
        counter++;
    }
    int finalnum = testinput << counter+1;
    printf("Is %i\n",finalnum);
    return 0;
} 
```

我在 3、6 和 65496 上对其进行了测试，并给出了正确答案（4、8 和 65536）。

抱歉，如果这看起来有点神秘，我在写作之前受到了几个小时的*Doom的影响。*:)

# c# - 是否有与 .NET 兼容但不支持无符号类型的语言？

> ID：364986
> 
> 赞同：5
> 
> 时间：2008-12-13T08:11:07.347
> 
> 标签：c#, .net, programming-languages, unsigned

假设我正在用 C# 编写一个库，但我不知道谁会使用它。

库的公共接口有一些无符号类型——uint、ushort。显然，这些类型不符合 CLS，并且从理论上讲，可能存在无法使用它们的语言。

现实中有这样的语言吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-13T08:57:27.657

我相信在 VB.NET 的原始版本中，无符号类型是可用的，但语言中不支持它们。当然，这已在以后的版本中得到解决。

此外，我怀疑现在已经失效的 J# 不支持无符号类型（假设 Java 没有）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-13T11:02:31.993

.NET 兼容性和 CLS 合规性是两个不同的东西。任何可以以某种方式与 .NET 框架一起工作的东西都可以说是与它兼容的。CLS 合规性更加严格。它为语言实现者和库设计者提供了一套规则，以创建相互兼容的语言和库的生态系统。

像 CLS 这样的东西的全部意义在于让您避免研究语言的每个示例并弄清楚如何支持它们。如果您想这样做，您可以这样做，但另一种选择是遵守 CLS，因此知道您将与也符合 CLS 的任何其他事物（从过去现在或未来）兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-13T21:22:04.423

如果今天没有，明天可能会有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-13T08:16:01.267

视觉基础..？

# php - Smarty 基准测试，有人吗？

> ID：364989
> 
> 赞同：8
> 
> 时间：2008-12-13T08:15:42.623
> 
> 标签：php, smarty, template-engine

我正在考虑将 Smarty 作为我的 Web 应用程序模板解决方案，我现在关心它与普通 PHP 相比的性能。

Smarty 网站说应该是一样的，但是，我找不到任何人做真正的基准测试来证明这个说法是对还是错。

有人对 Smarty 与普通 PHP 进行了一些基准测试吗？或者可能会在此类测试中遇到一些资源？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-13T16:25:06.973

因为最终Smarty将模板文件编译缓存为原生PHP代码，理论上确实没有性能差异。当然，由于每次都需要解释大量 Smarty 代码，总会有一些性能损失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-21T06:29:24.357

您可能还想使用一个类似于 Smarty 的新模板库，称为[Dwoo](http://dwoo.org)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-13T10:05:49.970

刚刚发现[这个](http://lutt.se/blog/2006/08/13/why-template-engines-like-smarty-sucks-in-php.html)非常简单的基准 - 可能不是很重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-10T04:35:07.353

这是另一个模板解决方案 XSLT 这里是我转换的一个页面的基准（它是一个简单的页面）：

```
// with smarty (baseline)
    0.014 seconds

// with xsl/xslt-clientside
    0.008 seconds
    42% decrease in server stress

// with xsl/xslt-serverside
// this process would only be done if the users browser doesn't support client-side XSLT
    0.016 seconds
    14% increase in server stress 
```

它不适合所有人，但如果性能是您的主要关注点:)

最重要的是，您允许客户端缓存您的模板。

这是我正在做的一个例子（这是我的网站之一）： http: [//pixao.com](http://pixao.com)

这是另一个大型网站上的例子：[http ://worldofwarcraft.com](http://worldofwarcraft.com)

到目前为止，我还没有遇到任何表演障碍

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-16T15:59:55.280

这是一个模板引擎基准测试，用于测试 PHP 与 Smarty 以及更多模板引擎[http://www.raintpl.com/PHP-Template-Engines-Speed-Test/](http://www.raintpl.com/PHP-Template-Engines-Speed-Test/)

*   对于赋值 Twig 更快，它将 html 模板编译为一个类，因此它在执行更多内容时也比 PHP 包含更快！恕我直言，很重（很多文件）并且很复杂，但是非常快！

*   为了更快地循环是 PHP 包含，很快就有了 Rain，它非常简单、小（1 个文件）和快速。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-13T16:31:31.110

Smarty 在第一次使用模板文件时为其所有模板文件生成 PHP 代码，前提是您已正确设置并尽可能使用它们，而不是再次解析模板。

我用了一段时间，它足够快，但最后我把它换成了普通的 PHP 文件，因为它有点限制（PHP4-isms 太多）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-13T18:24:09.790

Smarty 本身就是一个比较大的库……如果你要使用 Smarty，我建议你使用 APC 来缓存编译后的版本。它会抵消 Smarty 库的相当大的大小……

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-13T20:05:10.270

这取决于您如何使用 Smarty，因为您的页面流**可能会**发生变化

经典的纯 PHP 流程：

*   输出
*   处理 $_REQUEST 数据
*   输出
*   处理数据库查询
*   输出
*   处理 $_REQUEST 数据
*   输出
*   ...

经典 Smarty 流程：

*   处理所有 $_REQUEST 数据
*   处理所有数据库查询
*   全部输出

如果这个页面的普通 PHP 需要 1.0 秒，Smarty 页面也需要 1.0 秒。但是，如果我们假设所有数据库和 $_request 处理需要 0.7 秒。普通 PHP 直接开始输出，Smarty 版本在 0.7 秒后开始输出。因此，浏览器可以更快地开始下载样式表和图像。无输出也意味着“停止”按钮无效。

但是在 Smarty 中，您可以从模板中调用函数和方法。将慢速部分延迟到需要数据的地方。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-13T20:36:52.157

[Smarty 的替代品称为 Template Lite](http://templatelite.sourceforge.net/)，它在库文件大小方面更加轻量级。也就是说，我在一些极高负载的情况下使用了原始 Smarty，而无需在此库中进行交换。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-11T16:00:01.897

根据我自己的经验和非正式的基准，Smarty 本身不会导致任何重大的性能下降。但是，当您开始编写自定义插件时，事情就会走下坡路。

Smarty 模板作为 PHP 编译和缓存，但自定义插件总是在运行时加载和执行，并且总是比在普通的旧 PHP 文件中运行相同的代码慢。使用自定义字符串格式化插件您不会注意到这一点，但在插件中进行数据库查询时您肯定会看到它。

总的来说，我强烈推荐 Smarty。从 PHP 中获取显示使我们的代码更具可读性和可维护性。你只需要确保你对插件中的内容非常小心。*************