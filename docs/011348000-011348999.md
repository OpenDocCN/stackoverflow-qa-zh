# StackOverflow 问答 11348000-11348999

# regex - 正则表达式捕获括号中的数字

> ID：11348002
> 
> 赞同：1
> 
> 时间：2012-07-05T15:49:02.910
> 
> 标签：regex

我尝试搜索此内容，但找不到类似的问题。

我有一个如下所示的字符串：

> 产品 Ran (14, 51, 71, 92) at 2012-07-05

我只想获取括号内的数字，以便获得以下匹配项：

> 14 51 71 92

我尝试了以下方法，但显然遗漏了一些东西：

```
(?x)
(?<=\()            #Opening parentheses
(?<product>\d*)    #Group the numbers
(?=\))             #Closing parentheses 
```

* * *

提出以下解决方案：

```
(?<=\([^\)]*)\d+(?=[^\(]*\)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:52:10.603

使用这个正则表达式`(?<=\(.*)(\d+)(?=.*\))`

# c#-4.0 - Datagridview 数据源为空

> ID：11348004
> 
> 赞同：0
> 
> 时间：2012-07-05T15:49:04.560
> 
> 标签：c#-4.0, data-binding, datagridview

本质上，我有一个显示来自列表数据源的记录的 DGV。当我尝试在另一个函数中访问 DataSource 属性时，它出现 null。我正在尝试将新记录添加到网格中，但似乎无法访问数据源来执行此操作。我尝试让整个表单类都可以看到 List 对象，但它是空的。任何人都知道为什么会这样，或者我如何访问数据源以便添加新记录？此外，欢迎任何有关改进此代码的提示。

这是将数据填充到网格中的代码：

```
SchedulingDataContext progDB = new SchedulingDataContext();

List<Attendance> attendanceRecords = new List<Attendance>();
attendanceRecords = (from a in progDB.Attendances
                     where a.ReasonCode == null
                     select a).ToList<Attendance>();

BindingSource bs = new BindingSource();
bs.DataSource = attendanceRecords;

AttendanceGrid.DataSource = bs; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:00:24.230

只是一个想法（因为我从未使用过`BindingSource()`，我使用`DataSource`and `DataBind()`）：

尝试添加

```
AttendanceGrid.DataBind(); 
```

后

```
AttendanceGrid.DataSource = bs; 
```

# internet-explorer - MSHTML：有没有办法在拖放或粘贴后将事件或行为附加到元素？

> ID：11348011
> 
> 赞同：1
> 
> 时间：2012-07-05T15:49:30.583
> 
> 标签：internet-explorer, browser, webbrowser-control, mshtml

我正在使用 WebBrowser 控件，使用 DesignMode 函数来编辑 HTML。我正在使用 MSHTML 接口来查看和修改 DOM。

以输入文本框为例 - 我可以使用连接点附加事件接收器，或添加自定义呈现行为，但是当我将此输入框移动到文档的另一部分时，我会丢失连接点挂钩和添加的行为。

有没有我可以连接的事件，我可以连接事件接收器并重新添加行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:07:09.137

当控件删除或创建元素时，我找不到任何要挂钩的事件，我确实找到了一个在进行任何更改（包括控件本身）时将触发的事件：[IHTMLChangeSink](http://msdn.microsoft.com/en-us/library/aa704257%28v=vs.85%29.aspx)

这个接口有一个方法“Notify()”，当文档改变时触发。

将事件连接到实现此接口的类：

```
 var markupContainer = _document as IMarkupContainer2;
        if(markupContainer != null)
        {
            uint tmpCookie = 0;
            markupContainer.RegisterForDirtyRange(this, out tmpCookie);
            _changeSinkCookie = tmpCookie;
        } 
```

我保留文档中的元素列表，然后在触发此事件时进行比较，以判断是否添加或删除了任何元素。

# jquery - 悬停滑块上的jQuery暂停

> ID：11348016
> 
> 赞同：1
> 
> 时间：2012-07-05T15:49:48.397
> 
> 标签：jquery, hover, slider, slideshow

我这里的滑块有问题。当我悬停滑块时，我想暂停它。不幸的是，我不明白这一点。有任何想法吗？更新到 jsFiddle 的链接：http: [//jsfiddle.net/fZYK4/](http://jsfiddle.net/fZYK4/)

```
$(function(){
    var slide = $('.productSlide');
    $('.productSlider ul').removeClass('displaynone');

    slide.not(':first').hide();
    $('.productSlider ul a:first').addClass('active');
    $('.productSlider ul a').on('hover', function(e){
        e.preventDefault(false);
        var target = $(this).attr("href");
        $('.productSlider ul a').removeClass('active');
        $(this).toggleClass('active');
        slide.not('#'+target).hide();
        $(target).show();
    });
    var counter = 0;
        if( slide.length > 1 ){         
            slide.hide();
            slide.first().show();
            setInterval(function() {
                slide.eq(counter).hide();
                counter++;
                if (counter == slide.length) {
                    counter = 0;
                }
                slide.eq(counter).show();
                $('.productSlider ul a').removeClass('active');
                $('.productSlider ul a').eq(counter).toggleClass('active');
            }, 5000);           
        };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:03:03.387

你必须分配你正在设置的时间间隔

```
var counter = 0;
var myInterval;
if ( slide.length > 1 ) {
  slide.hide().first().show();
  myInterval = setInterval(function() {
   // ... and so on 
```

并在悬停时清除它

```
$('.productSlider ul a').on('mouseenter', function(e){
  clearInterval(myInterval);
  // ... and so on 
```

如果你想在用户悬停时重置，你最好包装这个函数：

```
function doAnimation() {
            return setInterval(function() { 
              slide.eq(counter).hide();
              counter++;
              if (counter == slide.length) {
                counter = 0;
              }
              slide.eq(counter).show();
              $('.productSlider ul a').removeClass('active');
              $('.productSlider ul a').eq(counter).toggleClass('active');
            }, 5000);
        } 
```

并在您希望它开始的地方调用它，例如在 mouseleave 上：

```
$('.productSlider ul a').on('mouseleave', function(e){
   myinterval = doAnimation(); 
```

# function - 扩展 MATLAB 函数名称的最大长度

> ID：11348017
> 
> 赞同：5
> 
> 时间：2012-07-05T15:49:51.673
> 
> 标签：function, matlab

`unix`我编写了一个 MATLAB 程序，它可以动态创建自定义 MATLAB 函数并使用命令在其他 MATLAB 实例中启动它们。我使用这个程序来自动化 fMRI 神经成像分析（使用 SPM8 for MATLAB），一切正常。但是，MATLAB 规定函数名称的最大长度为 63 个字符 ( `namelengthmax`)。因为我需要在每个函数名称中保存两个不同的时间戳以及创建它的函数的名称（我有几个不同的函数来创建这些用于多线程 fMRI 分析的新函数），所以 63 个字符对于像这样的文件名是非常有限的：

`atf_2012_07_05_18_01_02_specify_1st_level_2012_07_05_18_10_15.m`

在此示例`atf`中表示“分析线程函数”（将其与具有相似文件名的其他文件分开），第一个时间戳标识运行（全局时间戳，本例为 2012 年 7 月 5 日 18:01:02），然后有一个`specify_1st_level`标识创建此新“分析线程函数”的函数（在本例中）的字符串，`specify_1st_level.m`然后第二个时间戳从创建以在其他线程中运行的其他新“分析线程函数”中标识此特定的新“分析线程函数” （以及针对不同的分析主题，或针对不同的分析）并且同时运行。

**我的问题是函数名称的字符数限制为 63 个字符。**

我知道我可以编写不带下划线 ( `_`) 的时间戳，或者压缩它们，我可以缩短我的函数名称（例如`specify_1st_level.m`-> `sp1st.m`），我还可以将动态创建的函数划分在不同的子文件夹中也创建即时命名例如。带有全局时间戳。**编辑：**或者我什至可以创建整个函数名称的散列，并将散列用作函数名称，而不是上面显示的人类可读字符串。

但是，我计划在“分析线程函数”的名称中添加更多数据（本次运行中使用的不同分析参数集的一个或多个哈希值，以识别不同时间的相同分析）。如果可能的话，我想让它保持简洁（人类可读的函数名称有助于调试动态创建的“分析线程函数”）。

**那么，有什么办法可以延长** `namelengthmax` **吗？**我在 Linux 中运行 MATLAB R2012a。我也很高兴听到任何其他解决此问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:21:16.637

我很确定您不能更改名称长度的限制。但也许您可以省略第二个时间戳中的日期。而不是保存完整的时间戳，只需使用偏移量（如果运行需要 x 小时才能完成，格式为“HH:MM:SS”；如果运行需要 x 天完成，则格式为“dd HH:MM:SS”； ...）。

你也可以看看

```
help datenum 
```

为了缩短您的时间戳。但是这个函数不会产生人类可读的时间戳。

我现在这不是很聪明，但对我来说这听起来像是一个需要非常务实的解决方案的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:28:49.817

回答我自己的问题：经过深思熟虑后，我找到了一种方法，可以将尽可能多的信息嵌入到 MATLAB 函数名称中，并且仍然保持对人类的可读性。首先，我将计算我的函数文件名的 SHA1 哈希值： SHA1 哈希值`atf_2012_07_05_18_01_02_specify_1st_level_2012_07_05_18_10_15.m`（`E545831A 0002C73B CA095F11 25FC5C51 35B82451`为了清楚起见，这里用空格表示）。

那么我的函数名`[ 'atf_', sha1hashString, '.m' ]`就是 ，在这个例子中就是`atf_E545831A0002C73BCA095F1125FC5C5135B82451.m`，所以函数名长度是 44 个字符，完全没有问题。这解决了 63 个字符的限制，但我还需要一种能够使用常规 bash 命令找到我的函数的方法。

因此，我将创建该函数文件的副本，将散列连接到原始函数名称的末尾，使其变为`atf_2012_07_05_18_01_02_specify_1st_level_2012_07_05_18_10_15_E545831A0002C73BCA095F1125FC5C5135B82451.m`. `ls`然后我可以使用or （出于调试目的）在 bash 中轻松找到正确的函数`find`，检查文件名末尾的哈希并在 MATLAB 调试器中设置断点，该函数将从 MATLAB 调用（例如。`atf_E545831A0002C73BCA095F1125FC5C5135B82451.m`）并使用 MATLAB 调试器没有问题。

这是我能想到的最实用的解决方案，它也可以将分析参数集的散列添加到函数名称中：我将只计算分析参数集的 SHA1 散列（假设参数的 SHA1 散列set is `A9993E36 4706816A BA3E2571 7850C26C 9CD0D89D`, 并与原始函数名连接起来 it'll be `atf_2012_07_05_18_01_02_specify_1st_level_2012_07_05_18_10_15_A9993E364706816ABA3E25717850C26C9CD0D89D.m`. 然后我将计算这个原始函数名的新 SHA1 哈希值, 并使用分析参数集的 SHA1 哈希值扩展: is 的 SHA1 哈希值`atf_2012_07_05_18_01_02_specify_1st_level_2012_07_05_18_10_15_A9993E364706816ABA3E25717850C26C9CD0D89D.m`.`A81F0083 38868103 F1A0DB69 010279D5 5DB3751E`然后我将创建两个相同的函数，一个用于 MATLAB，一个用于我的调试目的，它们将被命名`atf_A81F008338868103F1A0DB69010279D55DB3751E.m`为`atf_2012_07_05_18_01_02_specify_1st_level_2012_07_05_18_10_15_A9993E364706816ABA3E25717850C26C9CD0D89D_A81F008338868103F1A0DB69010279D55DB3751E.m`. 甚至可以通过这种方式在同一个函数名中设置多个不同参数的 SHA1 哈希，例如。一个定义要包含的主题，另一个定义数据处理参数等，然后将它们两者或全部连接到文件名，然后计算 SHA1 哈希并编写两个与上述相同的函数。

# jquery - JQuery：用于 ajax 的 .live() 与 .delegate()：替换元素上的完成事件

> ID：11348019
> 
> 赞同：3
> 
> 时间：2012-07-05T15:50:04.500
> 
> 标签：jquery, ruby-on-rails

我在 Ruby on Rails 3.0.7 应用程序中使用 jQuery 1.6.2 并希望切换`.live()`到`.delegate()`（计划升级到 jQuery 1.7 并使用`.on()`）。我正在使用 Rails 中的选项发送 ajax 请求并尝试为使用事件`:remote => true`的响应设置处理程序。`ajax:complete`这些 ajax 请求通常会删除/替换实际触发请求的元素。

我遇到的问题是，如果一个元素被 ajax 请求替换，`.live()`似乎`ajax:complete`在请求完成时无论如何都会触发处理程序，但`.delegate()`没有（另外，我对 jQuery 1.7 做了一些实验，发现它`.on()`不起作用任何一个）。

本质上，如果`ajax_link`元素被替换，这有效：

```
$(".ajax_link").live("ajax:complete", function(){
  //Do something...
}); 
```

但这不会：

```
$("body").delegate(".ajax_link", "ajax:complete", function(){
  //Do something...
}); 
```

关于为什么会发生这种情况的任何想法？我在 SO 的其他地方读到了在幕后`.delegate()`使用的，所以这种行为让我感到惊讶。`.live()`此外，任何有关解决此问题的更好方法的建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:11:07.993

使用 jquery 1.7 和 1.8，从已删除元素触发事件不会冒泡到文档。因此，您注册的回调处理程序`body`将`document`不会被调用。

要解决此问题，您必须：

1.  在没有选择器的情况下注册您的`complete`回调：

    ```
    $(document).on('ajax:complete', function() {
      // do something
    }); 
    ```

2.  如果元素与文档分离，则修补`handleRemote`函数`rails.js`以触发事件。`document`

    代替：

    ```
     complete: function(xhr, status) {
        element.trigger('ajax:complete', [xhr, status]); 
    ```

    和：

    ```
     complete: function(xhr, status) {
        if (element.parents().last().parent().get(0) == document)
          element.trigger('ajax:complete', [xhr, status]);
        else
          $(document).trigger('ajax:complete', [xhr, status]); 
    ```

我[对 rails-ujs 的 issue #223](https://github.com/rails/jquery-ujs/issues/223#issuecomment-8427540)发表了评论。

# android - 获取android google play评论的API（获取设备名称和应用版本）

> ID：11348025
> 
> 赞同：24
> 
> 时间：2012-07-05T15:50:24.243
> 
> 标签：android, google-play

我想在 google play 上检索特定应用程序的所有评论，我需要评论中的这些信息：评分、评论、设备名称和评论所针对的应用程序版本。

我尝试使用 android-market-api，但遗憾的是我只能获得评级、创建时间、作者姓名、文本、authorid。

所以我想知道是否有 API 或 url 我可以发送帖子或获取请求（如 android-market-api 发送帖子请求）来检索我需要的信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-05-21T16:22:29.170

最后，谷歌现在提供它（在[谷歌 I/O 2016](http://android-developers.blogspot.com/2016/05/whats-new-in-google-play-at-io-2016.html)上宣布）：

[Google Play 评论 API](https://developers.google.com/android-publisher/api-ref/reviews)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-14T23:16:34.867

Python 中的示例，带有使用[服务帐户](https://developers.google.com/identity/protocols/OAuth2ServiceAccount)凭据的新[评论 API 。](https://developers.google.com/resources/api-libraries/documentation/androidpublisher/v2/python/latest/androidpublisher_v2.reviews.html)

```
from httplib2 import Http
from oauth2client.service_account import ServiceAccountCredentials
from apiclient.discovery import build

credentials = ServiceAccountCredentials.from_json_keyfile_name(
    '<secret from service account>.json',
    scopes=['https://www.googleapis.com/auth/androidpublisher'])

service = build('androidpublisher', 'v2', http=credentials.authorize(Http()))

package_name = "<package name>"
reviews_resource = service.reviews()
reviews_page = reviews_resource.list(packageName=package_name, maxResults=100).execute()
reviews_list = reviews_page["reviews"]

infinite_loop_canary = 100
while "tokenPagination" in reviews_page:
    reviews_page = reviews_resource.list(packageName=package_name,
                               token=reviews_page["tokenPagination"]["nextPageToken"],
                               maxResults=100).execute()
    reviews_list.extend(reviews_page["reviews"])
    infinite_loop_canary -= 1
    if infinite_loop_canary < 0:
        break 
```

请记住——我发现，Reviews API 只允许访问最近两周的评论评级。如果您想进行一些追溯分析，最好将评论评分作为 csv 文件从它们保存在您帐户的 google-cloud 存储桶中的位置获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T01:33:46.717

因此，当人们开始回答这个问题时，他们会将您指向以下 API：

标题：android-market-api。
链接：[http ://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

不幸的是，这个 API 是平庸的，并且有一些我认为与 API 的开发人员无关的问题，而是与谷歌的交互。

我已经使用了这个 API 和我编写的应用程序，用于查找一些应用程序及其元数据，但其他应用程序只是不返回任何结果。我一直在寻找这个问题的答案，但我还没有弄清楚。

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-19T14:01:25.377

我目前也在寻找同样的东西。虽然它是一个旧线程，但只是想分享我迄今为止在这个领域的研究，这可能对其他访问者有帮助。

商业的

*   [https://42matters.com/api/lookup](https://42matters.com/api/lookup)

开源的

*   [https://code.google.com/p/android-market-api/](https://code.google.com/p/android-market-api/) Java
*   [https://github.com/MarcelloLins/GooglePlayAppsCrawler](https://github.com/MarcelloLins/GooglePlayAppsCrawler) C#
*   [https://github.com/chadrem/market_bot](https://github.com/chadrem/market_bot)红宝石
*   [https://github.com/Akdeniz/google-play-crawler](https://github.com/Akdeniz/google-play-crawler) Java
*   [https://github.com/egirault/googleplay-api](https://github.com/egirault/googleplay-api) Python

**更新 ：**

[http://www.playstoreapi.com/docs#app_info](http://www.playstoreapi.com/docs#app_info)（现在不可用！）但您可以尝试[https://github.com/thetutlage/Google-Play-Store-API/](https://github.com/thetutlage/Google-Play-Store-API/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-20T13:33:27.717

发布了一些有趣的 api，用于在 google play 上获得评论和回复。您可以获得所需的所有数据：

```
 "device": string,
    "androidOsVersion": integer,
    "appVersionCode": integer,
    "appVersionName": string 
```

* * *

**get** GET 根据评论 ID 返回单个评论。
**list**
返回来自 Playstore 的评论列表。
**回复**
回复单个评论，或更新现有回复。

[更多在这里。](https://developers.google.com/android-publisher/api-ref/reviews#resource-representations)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-26T18:19:08.363

如果您不需要实时信息，您可以从谷歌云存储下载 Google Play 报告。每天都会生成报告。

请参阅[https://support.google.com/googleplay/android-developer/answer/6135870?p=crash_export&rd=1#export](https://support.google.com/googleplay/android-developer/answer/6135870?p=crash_export&rd=1#export)

# php - PHP 排序数组错误

> ID：11348027
> 
> 赞同：-3
> 
> 时间：2012-07-05T15:50:30.053
> 
> 标签：php, arrays, sorting

我有以下数组：

```
$franchise_a_status[] = array(
    'id'   => $franchise['franchise_id'],
    'text' => $franchise['franchise_surname']. ' ' .$franchise['franchise_firstname'].' '.'('.$distance.')'
); 
```

$franchise 数组是从数据库中填充的，距离变量从[Google 距离矩阵](https://developers.google.com/maps/documentation/distancematrix/)中检索信息。我希望数组按距离顺序排序 - 从最近到最远。

我认为这很容易：

```
asort($franchise_a_status); 
```

可悲的是我错了。我将如何根据距离对该数组进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:54:10.967

我只给你一个提示：使用[`usort()`](http://php.net/manual/en/function.usort.php)可以帮助你。

您应该编写比较函数。从那个长字符串中获取那个距离并不是一件容易的事，但是出于某种原因，你以这种方式存储它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:57:40.920

在这里使用`asort`对您没有帮助。我建议重组你的数组并使用[`ksort`](http://www.php.net/manual/en/function.ksort.php)：

*未经测试的例子：*

```
// some loop {

    $franchise_a_status[$distance . '_' . $franchise['franchise_id']] = array(
        'id'   => $franchise['franchise_id'],
        'text' => $franchise['franchise_surname'] . ' ' . $franchise['franchise_firstname'] . ' ' . '(' . $distance . ')'
    );

// }

ksort($franchise_a_status); 
```

`ksort`将按键排序数组。通过将距离放在键的开头，结果将按距离排序。当距离恰好相同时，还需要 id 来避免过度编写特许经营权。

# winapi - 如何覆盖默认的“打印到文件”端口的保存对话框？

> ID：11348032
> 
> 赞同：1
> 
> 时间：2012-07-05T15:51:00.707
> 
> 标签：winapi, printing, driver, port, spooler

我正在尝试创建版本 3 虚拟打印机驱动程序，它使用 XPS 过滤器管道将 XPS 假脱机文件转换为另一个 PDL 并将其保存到磁盘。

我对事物的转换方面很好（使用管道过滤器），但是在向用户展示一个对话框以选择要保存到的路径时，我不确定什么是最好的！

我知道当我将我的虚拟打印机分配给“打印到文件”端口 (FILE:) 时，后台打印程序将在作业进入打印队列之前显示默认保存对话框，如下面的 Windows 7 所示：

![默认保存对话框](../Images/86af0b30458a789ffec16283f0f2e0ff.png)

唯一的问题是默认设置有点太基本了。有没有办法为我的特定打印机驱动程序覆盖这个默认保存对话框并提供我自己的完整保存对话框？

非常感谢！

安迪

**为了评论的利益而更新**

这是在打印到 Adob​​e PDF 打印机和显示保存对话框的阶段时记事本中主线程的调用堆栈。我想我对这个调用堆栈的解释是在显示保存对话框的阶段没有涉及端口监视器库。我的解释正确吗？如果是这样，问题仍然存在，Adobe PDF 打印机中显示的自定义保存对话框是什么？

```
ntdll.dll!NtWaitForMultipleObjects+0xa
KERNELBASE.dll!GetCurrentThread+0x36
kernel32.dll!WaitForMultipleObjectsEx+0xb3
USER32.dll!PeekMessageW+0x1cd
DUser.dll+0x14e6
DUser.dll+0x15ef
DUser.dll+0x1565
USER32.dll!TranslateAcceleratorW+0x5e
ntdll.dll!KiUserCallbackDispatcher+0x1f
USER32.dll!WaitMessage+0xa
USER32.dll!MapDialogRect+0x234
USER32.dll!MapDialogRect+0x4c5
USER32.dll!DialogBoxIndirectParamAorW+0x56
USER32.dll!DialogBoxIndirectParamW+0x18
COMDLG32.dll!DllCanUnloadNow+0x590
COMDLG32.dll!Ordinal100+0xb620
COMDLG32.dll!Ordinal100+0xb53f
COMDLG32.dll!Ordinal100+0xb45d
COMDLG32.dll!Ordinal100+0xb31e
COMDLG32.dll!Ordinal100+0xb239
ADUIGP.DLL!DllCanUnloadNow+0x51e
ADUIGP.DLL!DllGetClassObject+0xeef
ADUIGP.DLL!DllCanUnloadNow+0x1441
PS5UI.DLL!DrvDocumentEvent+0xef
WINSPOOL.DRV!Ordinal100+0x20b
WINSPOOL.DRV!DeletePortW+0x2d0
WINSPOOL.DRV!DocumentEvent+0x213
GDI32.dll!ExtFloodFill+0x16b
GDI32.dll!StartDocW+0x58b
notepad.exe+0xa24c
notepad.exe+0x7701
notepad.exe+0x23e8
notepad.exe+0x14eb
USER32.dll!GetSystemMetrics+0x2b1
USER32.dll!GetSystemMetrics+0x4fa
notepad.exe+0x10bc
notepad.exe+0x133c
kernel32.dll!BaseThreadInitThunk+0xd
ntdll.dll!RtlUserThreadStart+0x21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:40:38.900

创建您自己的[端口监视器](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559895%28v=vs.85%29.aspx)，以提供更好的对话。您可以使用 WDK 中的示例端口监视器作为它的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:38:16.580

实现扩展 WDK XPSDrvSample 的需求并将 inf 文件更改为指向另一个位置，以确保打印机所需的所有文件都是“新鲜的”，这样做您将避免基本对话框。现在您必须使用自定义端口监视器或使用添加到管道路径的流过滤器来实现自己的保存对话框。

祝你好运 ！

PD：您也可以使用 redmon 将输出重定向到外部应用程序以管理输出。

# internet-explorer - 当我们在 IE 中右键单击 URL 并选择“另存为”时会发生什么？

> ID：11348035
> 
> 赞同：0
> 
> 时间：2012-07-05T15:51:06.510
> 
> 标签：internet-explorer, http, download

当我们右键单击以下 URL 并选择“另存为”时，IE 会执行什么操作？

```
http://www.somesite.com/some_file.zip 
```

我听说过“HTTP 下载”之类的东西，它到底是什么？

我的理解是，HTTP 是一个基于文本的协议，它怎么能被用来传输不同类型的文件呢？

我的猜测是，当我们为 URL 选择另存为时，IE（或任何其他浏览器）将打开与服务器的新 TCP 连接并进行文件传输。它应该与 HTTP 无关。

*   当我们访问一个网页时，浏览器使用 TCP 连接来传输 HTTP 信息和 HTML。
*   当我们在 IE 中下载文件时，浏览器使用 TCP 传输文件内容。

**它本质上是相同的，只是传输的内容不同。**

我对吗？连接传输文件内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:53:08.380

您可以通过 HTTP 传输任何二进制数据。例如，服务器可以将`Content-Type`响应标头设置为任何内容，然后将任何数据写入响应。因此，例如，您可以设置`Content-Type`为`application/octet-stream`然后将二进制数据写入响应。所以 IE 所做的是它分析 Content-Type 响应头，下载内容，如果它是它可以显示的已知内容类型（例如 HTML），它会显示它内联，如果不是，它会提示用户保存。

HTTP 不是基于文本的协议。标头应该是文本，但请求/响应的主体可以是任意字节。这就是标头的用途：准确指示正文是如何编码的，以便对方可以正确理解和解码。

就 TCP 和 HTTP 而言，HTTP 是 TCP 之上的协议。因此，当使用 HTTP 时，您会隐式使用 TCP。将其视为基于 TCP 的主要传输机制的基于约定的协议。TCP是低级的：它允许客户端和服务器之间的连接。HTTP 就像一种语言。如果没有 HTTP，TCP 就像来自不同国家的两个人，每个人都说不同的语言，在酒吧里见面。你认为会发生什么？他们将无法交换一个字。HTTP 是统一它们并允许它们交谈的通用语言。只是TCP吧。

# c# - 如何将数据从 WebUserControl 传递到页面

> ID：11348042
> 
> 赞同：1
> 
> 时间：2012-07-05T15:51:32.907
> 
> 标签：c#, asp.net

我有 WebUserControl，它由 3 个 DropDownLists（日/月/年）组成。它具有公共属性 DateTime BirthDate。我在 Page (Page_Load) 上动态创建了这个 WebUserControl。我希望能够更改加载的 WebUserControl 中的数据并使用页面上的按钮保存它。

WebUserControl 代码：

```
public DateTime BirthDate { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    DropDownList dd = new DropDownList();
    DropDownList dm = new DropDownList();
    DropDownList dy = new DropDownList();

    this.Controls.Add(dd);
    this.Controls.Add(dm);
    this.Controls.Add(dy);

    dd.Items.Add(new ListItem("day","0"));
    dm.Items.Add(new ListItem("month", "0"));
    dy.Items.Add(new ListItem("year", "0"));

    dd.Items.AddRange(GetNumericValues(1, 31).ToArray());
    dm.Items.AddRange(GetNumericValues(1, 12).ToArray());
    int yearNow = DateTime.Now.Year;
    dy.Items.AddRange(GetNumericValues(yearNow - 100, yearNow - 17).ToArray());

    dd.DataBind();
    dm.DataBind();
    dy.DataBind();

    if (BirthDate != DateTime.MinValue)
    {
        dd.SelectedValue = BirthDate.Day.ToString();
        dm.SelectedValue = BirthDate.Month.ToString();
        dy.SelectedValue = BirthDate.Year.ToString();
    }
    else
    {                
        dd.SelectedValue = "0";
        dm.SelectedValue = "0";
        dy.SelectedValue = "0";
    }

}

private List<ListItem> GetNumericValues(int from, int to)
{
    List<ListItem> n = new List<ListItem>();
    for (int i = from; i <= to; i++)
    {
        n.Add(new ListItem(i < 10 ? "0" + i.ToString() : i.ToString()));
    }
    return n;
} 
```

页面代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        BirthDateWebUserControl bc = new BirthDateWebUserControl();
        PanelForm.Controls.Add(bc);
        ViewState["BirthDateWebUserControl"] = bc;
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    BirthDateWebUserControl bc = (BirthDateWebUserControl)ViewState["BirthDateWebUserControl"];
    LabelResult.Text = bc.BirthDate.ToString("dd/MM/yy");
} 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:54:20.720

在每个页面回发时，必须在页面 PreInit 或 Init 事件中创建动态创建的控件。ASP.NET 将在 Init 和 Load 事件之间刷新控件的视图状态值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:02:17.910

假设您有`UserControl`以下内容：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Test.ascx.cs" Inherits="YourApplication.Test" %>
<asp:DropDownList ID="ddl1" runat="server" /> 
```

目标是能够获取和设置 的值`DropDownList`，为此我们创建了一个`UserControl`能够这样做的属性。

```
public partial class Test : System.Web.UI.UserControl
{
    public string Value
    {
        get { return ddl1.SelectedValue; }
        set { ddl1.SelectedValue = value; }
    }
} 
```

然后我们可以将它用作`UserControl`其他页面的属性。

```
<uc:Test ID="ucTest" runat="server" Value="1" /> 
```

或者

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string theValue = ucTest.Value;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:11:33.840

```
if you want to pass data to user (FindControl because added dynamicly)

    you must use this

    public partial class UserControl1 : System.Web.UI.UserControl
    {
        public string Property
        {
            get { return dd.SelectedValue; }
            set { dd.SelectedValue = value; }
        }
    }

    When you create, affect UniqueId to your user control

    UserControl1 control = new UserControl1();
    control.UniqueId="Test";  
    add.....

    And find it in your page  with PreInit event before other events 

    UserControl1 control = (UserControl1)Page.FindControl("Test");
    control.Property = your value;

But if you want to pass data to your user control, this last must have this property with public modifier.
You can also pass with static forms as this example

<tagprefix:tagname id="" runat="server" Property="your value"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T16:46:52.990

这是您的控件+页面的工作版本。

**用户控制**：

```
using System;
using System.Collections.Generic;
using System.Web.UI.WebControls;

public partial class BirthDateWebUserControl : System.Web.UI.UserControl
{
    private readonly string ViewStateKey = "BirthDateWebUserControl_VSKEY";
    public DateTime BirthDate
    {
        get
        {
            int day = int.Parse(((DropDownList)this.FindControl("DayDropDown")).SelectedValue);
            int month = int.Parse(((DropDownList)this.FindControl("MonthDropDown")).SelectedValue);
            int year = int.Parse(((DropDownList)this.FindControl("YearDropDown")).SelectedValue);
            return new DateTime(year, month, day);
        }
        set
        {
            ((DropDownList)this.FindControl("DayDropDown")).SelectedValue = value.Day.ToString("00");
            ((DropDownList)this.FindControl("MonthDropDown")).SelectedValue = value.Month.ToString("00");
            ((DropDownList)this.FindControl("YearDropDown")).SelectedValue = value.Year.ToString("00");
        }
    }

    protected void Page_Init(object sender, EventArgs e)
    {
        DropDownList dd = new DropDownList();
        dd.ID = "DayDropDown";
        DropDownList dm = new DropDownList();
        dm.ID = "MonthDropDown";
        DropDownList dy = new DropDownList();
        dy.ID = "YearDropDown";

        this.Controls.Add(dd);
        this.Controls.Add(dm);
        this.Controls.Add(dy);

        if (ViewState[ViewStateKey] == null)
        {

            dd.Items.Add(new ListItem("day", "0"));
            dm.Items.Add(new ListItem("month", "0"));
            dy.Items.Add(new ListItem("year", "0"));

            dd.Items.AddRange(GetNumericValues(1, 31).ToArray());
            dm.Items.AddRange(GetNumericValues(1, 12).ToArray());
            int yearNow = DateTime.Now.Year;
            dy.Items.AddRange(GetNumericValues(yearNow - 100, yearNow - 17).ToArray());

            dd.DataBind();
            dm.DataBind();
            dy.DataBind();

            ViewState[ViewStateKey] = true;
        }
    }

    private List<ListItem> GetNumericValues(int from, int to)
    {
        List<ListItem> n = new List<ListItem>();
        for (int i = from; i <= to; i++)
        {
            n.Add(new ListItem(i < 10 ? "0" + i.ToString() : i.ToString()));
        }
        return n;
    }
} 
```

示例页面内容：

```
<asp:Panel ID="PanelForm" runat="server">
</asp:Panel>
<asp:Label ID="LabelResult" runat="server"></asp:Label>
<asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Click" /> 
```

示例页面背后的代码：

```
protected void Page_Init(object sender, EventArgs e)
{
    BirthDateWebUserControl bc = new BirthDateWebUserControl();
    bc.ID = "bcInPanel";
    PanelForm.Controls.Add(bc);
}
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        // init with some date in case not post back
        ((BirthDateWebUserControl)PanelForm.FindControl("bcInPanel")).BirthDate = new DateTime(1950, 4, 12);
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
    var bc = (BirthDateWebUserControl)PanelForm.FindControl("bcInPanel");
    LabelResult.Text = bc.BirthDate.ToString("dd/MM/yy");
} 
```

需要考虑的几点：

*   使用动态控件时，初始化它们的合适位置是`Page_Init`
*   在这种情况下（UserControl），初始化动态创建的子控件`Page_Init`
*   将初始化控件所需的必要数据存储在`ViewState`. 不要存储整个控件本身。

最重要的是：

*   **质疑以 . 开头使用动态创建的控件是否有意义**。在此示例中，用户控件中的下拉菜单也可以静态声明。它会使与他们一起工作更容易（不需要 FindControl + 强制转换来更正类型等）**。**

# c++ - 在 C++ 中重命名命名空间的一致方法

> ID：11348043
> 
> 赞同：19
> 
> 时间：2012-07-05T15:51:37.307
> 
> 标签：c++, namespaces, hierarchy

使用嵌套命名空间时，有时完全限定名称会变得很长。我知道我可以用`namespace abc = aaa::bbb::ccc`它来减少打字量（在某些情况下它也可以提高可读性）。

但是，我不确定在项目中的所有文件中实现这种重命名的最佳方法是什么。直接的方法（即，在每次使用的基础上重命名长名称空间）可能会导致最终在不同文件中为相同的完全限定名称使用不同的短名称。所以，我正在考虑想出一个更一致的方法来做到这一点。

例如，让我们假设如下：

```
project
  |- client
  |   |- core
  |   |- plugin
  |   |- util
  |- server
      ... 
```

我正在考虑为每个目录创建一个标题，包括减少的名称。例如，`project/client/core/core.h`将包含`namespace pr_cl_core = project::client::core`（我知道这个短名称的示例相当糟糕，但在实际项目中它们更有意义）。然后，我将包含`core.h`到所有头文件中，`project/client/core`以便当该目录中的头文件包含在中时，比方说，`project/client/plugin/plugin_foo.h`短命名空间版本很容易获得。

这是一个很好的方法吗？还有其他更好的方法吗？

我在 SO 上发现了几个关于 C++ 命名空间的问题（例如[1](https://stackoverflow.com/questions/5056958/is-there-a-way-to-substitute-long-namespaces-with-define)和[2](https://stackoverflow.com/questions/6108704/renaming-namespaces)），但没有一个与如何以项目范围的方式解决命名空间重命名有关。

**编辑：**此外，这种机制可用于系统地重命名整个项目的长名称空间（例如 Boost 的名称空间）。例如，我通常重命名一些命名空间，例如：

```
namespace ip = boost::asio::ip;
namespace ptime = boost::posix_time; 
```

目前我在每个翻译单元的基础上执行此操作，但我想对整个项目使用全局方法来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:51:50.170

我会争辩说，如果您反复输入长名称空间名称，那么您的名称空间层次结构中有问题。

假设你对类也有同样的情况，反复发现自己在打字`obj->sub()->subsub()->some_method()`。这将违反得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。在类的情况下，您将重构您的代码（通过编写包装函数），以便层次结构中的下级类只需要访问上一级的方法。

命名空间也应该这样做：如果您必须调用，`project::client::core`那么您应该编写包装函数/类`client`以将必要的接口公开给`project`. `client`如果您需要在所有地方执行此操作，为什么不扁平化您的命名空间结构，以便`core`它们处于同一级别？

Boost 使用嵌套命名空间的事实只是部分正确，因为大多数嵌套命名空间都喜欢`aux`并且`detail`不应该被客户端调用。例如，Boost.MPL 是一个非常好的库示例，它注意不要无缘无故地暴露嵌套的命名空间。

# asp.net - 如何在控制器的操作调用之前将数据（item.id）维护到会话中？

> ID：11348047
> 
> 赞同：0
> 
> 时间：2012-07-05T15:51:45.917
> 
> 标签：asp.net, asp.net-mvc-3

我正在从控制器端构建一些视图，下面的代码在视图中显示了一个“编辑”链接，单击时我需要执行一些不同的控制器操作。根据代码，我将“item.Id”本身保留在锚标记中。

```
response.Rows =
            (
            from item in selectedListAfterPagging
            select new GridEmployeeData()
            {
                id = item.Id,
                cell = new string[] { 
                item.Id.ToString(),
                item.Name,
                "<a href='/Home/MenuThree/"+ item.Id + "' title='Edit'>Edit</a>"
                }
            }
            ).ToArray(); 
```

我的问题，有没有办法将此数据“item.Id”设置为 Session 变量，并且可用于任何控制器的操作？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:26:38.903

要写入会话：

```
Session["ItemId"] = item.Id; 
```

从会话中读取：

```
int ItemId = Session["ItemId"]; 
```

您可以将任何有效的 .NET 类型存储在会话变量中。当您从会话中阅读时，只需投射它。

这是一个详细描述 ASP.NET 会话的链接：

[http://msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

为了解决您的问题，您可以：在构建视图之前设置会话变量，然后在调用编辑时，您可以查询会话以查看正在编辑的项目 ID。

# r - 成对数据的适当数据结构及其功能的扩展

> ID：11348049
> 
> 赞同：1
> 
> 时间：2012-07-05T15:51:51.333
> 
> 标签：r

问题有 2 个部分。

1.  这是 R 中允许存储配对数据的数据结构：

    ```
    0:0  
    0.5:10  
    1:20 
    ```

    （Python 字典`{[0]:0, [0.5]:10, [1]:20}`）

    以及如何用一个班轮启动它？即`seq(0,1,by=0.5)` 在`seq(0,10,by=5)`这个数据结构中耦合

2.  假设我添加`0.25`到列表中，那么我希望相邻节点的加权平均值（自动）出现在数据集中，即元素`0.25:5`和配对集将是

    ```
    0:0
    0.25:5  
    0.5:10  
    1:20 
    ```

    如果我添加元素`0.3`，那么它必须与要添加的`5+(10-5)*(0.3-0.25)/(0.5-0.25)=6`元素配对`0.3:6`。

如何使用 S4 或 Reference Class 类模型创建可以放置此功能的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:26:01.770

不太确定你得到了什么，但也许包裹`hash`可能有你想要的

```
library(hash)
h<-hash(keys=seq(0,1,by=0.5),values=seq(0,10,by=5))
h[['0.25']]<-2.5 
```

可能涉及您问题的第一部分。[http://cran.r-project.org/web/packages/hash/hash.pdf](http://cran.r-project.org/web/packages/hash/hash.pdf)可能会暗示第二个帮助。

具有列表的类似结构

```
lst<-list()
lst<-seq(0,10,5)
names(lst)<-seq(0,1,0.5)
> lst['0.5']
0.5 
  5 
lst['0.25']<-2.5 
```

对于您的第二部分，您可以构建一个简单的函数来使用新值更新您的哈希/列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:40:45.230

两列 data.frame 似乎合适：

```
xy <- data.frame(x = seq(0, 1, by = 0.5), y = seq(0, 20, by = 10))
xy
#     x  y
# 1 0.0  0
# 2 0.5 10
# 3 1.0 20 
```

然后，您要做的是线性插值，您可以使用该`approx`函数来实现。例如：

```
approx(xy$x, xy$y, xout = 0.3)
# $x
# [1] 0.3
# 
# $y
# [1] 6 
```

如果您想将该结果添加到 data.frame，您可以执行以下操作：

```
xy <- as.data.frame(approx(xy$x, xy$y, xout = sort(c(xy$x, 0.3))))
xy
#     x  y
# 1 0.0  0
# 2 0.3  6
# 3 0.5 10
# 4 1.0 20 
```

这有点贵，特别是如果您打算一次添加一个点。相反，您可以一次添加所有点，因为结果与添加它们的顺序无关：

```
add.points <- c(0.25, 0.3)
xy <- as.data.frame(approx(xy$x, xy$y, xout = sort(c(xy$x, add.points))))
xy
#      x  y
# 1 0.00  0
# 2 0.25  5
# 3 0.30  6
# 4 0.50 10
# 5 1.00 20 
```

# jquery - jquery选项卡-切换选项卡时选项卡下方的动态div不应向上滑动

> ID：11348058
> 
> 赞同：0
> 
> 时间：2012-07-05T15:52:16.063
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我在 jQuery 选项卡下面有内容，这些内容随着选项卡上下滑动。标签是可折叠的，当标签关闭时，内容也会向上滑动。但是当我在选项卡之间切换时，内容也会在它应该保持原位时上下移动。我试图用事件处理程序来解决这个问题，但正如您在这里看到的[http://jsfiddle.net/eqUVm/5/](http://jsfiddle.net/eqUVm/5/)，问题仍然存在。

有谁知道我的问题的可能解决方案？

编辑：我忘记了一些重要的东西：内容（地图）需要一个绝对位置，否则不会显示。链接已更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:54:14.517

见[http://jsfiddle.net/kXS4g/4/](http://jsfiddle.net/kXS4g/4/)

我仅在取消选择选项卡时才制作动画。jQuery ui 中显然没有取消选择事件，所以我通过计算“ui-tabs-selected”元素（应该为零）来检查选择。不幸的是，这个 css 类直到 select 回调完成后才被删除，所以我选择使用的 hackish 方法是 setTimeout 来延迟函数调用。

* * *

您可能还想调整时间`setTimeout`。我稍微摆弄了一下，如果您快速单击或计算机挂起，它会有点不可靠。任何低于 20 毫秒的东西都将难以察觉。

另一个技巧 - 您可以使用它`stop(false,false)`来防止快速切换的双重动画 - 动画将尝试从它离开的地方继续。这意味着，如果您打开选项卡并在动画进行到一半时决定关闭它，则动画将立即向后循环而不是排队。

如果遇到问题，请考虑研究一种更正式的方法来检测取消选择`setTimeout(..., 20)`。我只是想让它为你工作。

最后，我使用 console.log 来了解触发事件的时间。我期望只有在您选择选项卡时才会触发 select 是错误的，就像关于何时添加/删除 css 类的假设一样。断点同样可以很好地工作（在 Firebug 或 Chrome 中很容易获得）。有时手册没有涉及这些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:00:08.537

这是一个 CSS 问题。您在`#content`div 上有绝对定位，并且它被放置在距离文档顶部 58px 的位置。

尝试这个：

```
#content{
    border:1px solid black;
    margin: .2em;
} 
```

和：

```
.ui-tabs .ui-tabs-panel {
    background: none repeat scroll 0 0 transparent;
    border-width: 0;
    display: block;
    height: 125px; /* Added this */
    padding: 1em 1.4em;
} 
```

并从那里计算出你的尺寸。

# function - 工作表中的 VBA 自定义过程/函数在其模块外调用

> ID：11348061
> 
> 赞同：2
> 
> 时间：2012-07-05T15:52:18.700
> 
> 标签：function, vba, reference, worksheet

我一直在玩这个问题一段时间，并没有想出如何做到这一点。 **我在每个工作表中都有相同的功能**（这些工作表的名称如下 Name="One", CodeName="SheetOne" ...）：

```
const someVar as Boolean = True

Public Function myFunction() as Boolean
myFunction = someVar
End Function 
```

现在我希望它像这样从外部调用 - 在 ThisWorkbook 中有过程“doThis（）”和函数“TestThis（）：

```
Sub doThis()
Dim i as Integer
For i = 1 to ThisWorkbook.Sheets.Count
   If testThis(ThisWorkbook.Worksheets(i)) = True then
      Debug.print "Success!"
   End If
Next i

Function testThis(x As Worksheet)
If x.myFunction = True Then
   testThis = True
Else
   testThis = False
End If 
```

现在我知道在这一行“**如果 x.myFunction = True** ”它会抛出错误“找不到方法或数据成员”，因为我不能用这个引用调用那个函数，所以我用 VBComponent 尝试过：

```
Sub doThis()
Dim i as Integer
For i = 1 to ThisWorkbook.Sheets.Count
   If testThis(ThisWorkbook.VBProject.VBComponents(Worksheets(i).CodeName)) _
   = True then
      Debug.print "Success!"
   End If
Next i

Function testThis(x As VBComponent)
If x.myFunction = True Then
   testThis = True
Else
   testThis = False
End If 
```

但同样，它会引发“对象不支持此属性或方法”错误。任何想法，我如何从一个变量中调用该函数，该变量存储了对该工作表的任何类型的引用？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:10:02.740

编译代码时，Excel 会检查“WorkSheet”对象类型是否有`myFunction`方法 - 它正在查看通用的内置 Worksheet 对象，这不包括您的“附加”功能（“VBComponent”也不包括" 类型），因此它会引发错误。

如果您将参数类型更改为 Object（更通用的类型），那么它将编译...

```
Function testThis(x As Object)
    testThis = x.myFunction()
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T07:03:24.397

我知道这是一个旧线程，但我想我不妨分享我的发现。另外，我怀疑有更好的方法来评估每张工作表中完全相同的功能，但是对于任何搜索的人，这里有一个解决方案可以完全按照您在帖子标题中的要求进行操作。

在你的`ThisWorkbook`包括

```
Const myFunction = "myFunctuion"
Public ws as Worksheet

For each ws in Me.Sheets
    If testThis(ws) then Debug.print "Success!"
next ws

Function testThis(x as Worksheet)
    testThis = callByName x, x.CodeName & "." & myFunction
End Function 
```

# android - 未触发 HTML5 视频事件

> ID：11348064
> 
> 赞同：0
> 
> 时间：2012-07-05T15:52:33.030
> 
> 标签：android, video

我在这里使用了建议：[WebView and HTML5 <video>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

通过覆盖 onShowCustomView 并将 videoView 设置为活动内容，在 webview 中显示视频。

在 js 中，视频元素上有一个事件监听器等待“结束”事件。该事件永远不会被抛出，因此本应在视频结束时发生的动作（例如，转到下一页）永远不会发生。

据我所知，我无权访问 js 视频元素，因此无法通过覆盖 Android 代码中的 onCompletion 手动引发事件。

有没有办法在不更改 js 的情况下解决这个问题，因为不确定我是否总是可以访问这个。

谢谢

KK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:02:17.590

看起来像 GingerBread 的问题。在几种设备上尝试过，2.0- <2.3 运行良好。最后，我通过 js 桥将 onCompletion 中的自定义事件传递到 js 页面，并以相同的方式处理自定义结束事件和正常结束事件。

KK

# linux - IPtables 块范围异常

> ID：11348067
> 
> 赞同：0
> 
> 时间：2012-07-05T15:52:42.803
> 
> 标签：linux, tcp, ip, firewall, iptables

我的网络中有一台服务器，我希望将出站流量 DROP 到 LAN 中的任何其他主机，除了一个或两个单台主机。例如，我想阻止到 123.123.1.1/16 的出站流量，但 123.123.10.10 和 123.123.20.20 除外。我怎样才能在 IPTABLES 中做到这一点？

我尝试过这样的事情：

```
sudo iptables -D OUTPUT -d 123.123.1.1/16 ! -d 123.123.10.10 -j DROP 
```

但是我收到一个错误，该`-d`运算符只能使用一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T15:54:22.453

`ACCEPT`在`DROP`. _

```
iptables -A OUTPUT -d 123.123.10.10 -j ACCEPT
iptables -A OUTPUT -d 123.123.1.1/16 -j DROP 
```

这样，一旦数据包匹配第一个规则，它甚至不会针对第二个规则进行测试。

# javascript - JavaScript 程序

> ID：11348073
> 
> 赞同：-1
> 
> 时间：2012-07-05T15:53:07.473
> 
> 标签：javascript

我正在放置一个交互式 java 脚本表单，而输出与 switch case 混淆了。请帮助我：这是管道重量计算。

管道尺寸：100 毫米、150 毫米、200 毫米、250 毫米到 1000 毫米 对于每个管道，压力等级各不相同：PN3、PN6 和 PN9 对于每个压力等级，刚度各不相同：SN124 和 SN256

对于给定的管道尺寸、压力等级和刚度等级 - 重量会有所不同。到达输出 - 我正在使用开关盒，这非常冗长且耗时。任何机构都可以帮助我解决 java 脚本，以便将其放入 HTML 文件中。

这是我拥有的代码，但我认为必须有更好的方法来做到这一点。

有什么更好的方法？

```
<SCRIPT LANGUAGE="JavaScript">
function CalculateSum(Atext, Btext, Ctext,form)
{
var A = parseFloat(Atext);
var B = parseFloat(Btext);
var C = parseFloat(Ctext);

switch (true){
case (A == 100 && B == 3  && C == 124): K =21.4; L=102; M =55; break ;
case (A == 100 && B == 3  && C == 256): K =21.9; L=125; M=49;  break ;
case (A == 100 && B == 3  && C == 512): K =22.2; L=133; M=45;  break ;
case (A == 100 && B == 6  && C == 124): K =42.9; L=139; M=41;  break ;
case (A == 100 && B == 6  && C == 256): K =42.78;L=141; M=39;  break ;
case (A == 100 && B == 6  && C == 512): K =43.01;L=144; M=37;  break ;
case (A == 100 && B == 9  && C == 124): K =54.84;L=148; M=34;  break ;
case (A == 100 && B == 9  && C == 256): K =55.02;L=152; M=31;  break ;
case (A == 100 && B == 9  && C == 512): K =56.90;L=157; M=29;  break ;
case (A == 150 && B == 3  && C == 124): K =39.4; L=164; M=25;  break ;
....
......
.......
break ;
}
    form.Ans1.value = K  + "   Kg/Rmt"; 
    form.Ans1.value = L  + "   Rmt";
    form.Ans1.value = M  + "   Nos";

}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:28:01.020

我假设您无法`K`从`A`、`B`和计算`C`，这当然是最好的。假设是这种情况：

你的方法行得通。这是一种不寻常的使用方式`switch`，但在 JavaScript 中是有效的。（不是在大多数其他语言中。）

另一种方法是将表格作为一组嵌套的对象，并在表格中查找值：

```
var Values = {
    // Values for A
    100: {
        // Values for B when A = 100
        3: {
            // Values for C when A == 100 and B == 3
            124: 21.4,
            256: 21.9,
            512: 22.2
        },
        6: {
            // Values for C when A == 100 and B == 6
            124: 42.9,
            256: 42.78,
            512: 43.01
        },
        9: {
            // Values for C when A == 100 and B == 9
            124: 54.84,
            256: 55.02,
            512:39.4
        }
    },
    150: {
        // Values for B when A = 150
        3: {
            // Values for C when A == 150 and B == 3
            124: 39.4
        }
    }
}; 
```

我不确定这是否会使数据更具可读性/可维护性，但它使用起来非常快，并且您*可以*将其写得更简洁一些（见答案的末尾）；我想包括上面的评论。

`CalculateSum`最终看起来像这样：

```
function CalculateSum(Atext, Btext, Ctext,form)
{
    var A = parseFloat(Atext);
    var B = parseFloat(Btext);
    var C = parseFloat(Ctext);
    var entry;

    // Get the top-level entry for A
    entry = Values[A];
    if (entry) {
        // We have one, get its entry for this value of B
        entry = entry[B];
        if (entry) {
            // We have one, get _its_ entry for C
            entry = entry[C];
        }
    }

    if (typeof entry === "number") {  
        form.Ans.value = entry  + "   Kg/Rmt"; 
    }
    else {
        // Didn't find it
    }
} 
```

或者正如 Deestan 在评论中指出的那样，如果您不是在运行数十万次的超紧密循环中执行此操作（我猜您不是），您可以缩短一点：

```
function CalculateSum(Atext, Btext, Ctext,form)
{
    var A = parseFloat(Atext);
    var B = parseFloat(Btext);
    var C = parseFloat(Ctext);
    var K;

    // Get the entry from our tables
    K = Values[A] && Values[A][B] && Values[A][B][C];

    if (typeof K === "number") {  
        form.Ans.value = K  + "   Kg/Rmt"; 
    }
    else {
        // Didn't find it
    }
} 
```

（我改`entry`到那里是`K`因为我们除了最终值之外从不存储任何东西。）

这是更简洁的`Values`：

```
var Values = {
    100: {
        3: { 124: 21.4,  256: 21.9,  512: 22.2  },
        6: { 124: 42.9,  256: 42.78, 512: 43.01 },
        9: { 124: 54.84, 256: 55.02, 512: 39.4  }
    },
    150: {
        3: { 124: 39.4 }
    }
}; 
```

# c# - 简单的数字正则表达式匹配

> ID：11348077
> 
> 赞同：2
> 
> 时间：2012-07-05T15:53:17.760
> 
> 标签：c#, .net, regex

嗨，我在进行简单的数字匹配时遇到问题，我做错了什么：

标准：

```
1) Always anchor to start
2) Always Numeric 6-7 digits
3) Always Followed by _ (underscore) 
```

示例：（想要匹配 LoremIpsum 之前的所有内容）

```
1212384_LoremIpsum...
1266625_LoremIpsum...
234233_LoremIpsum...
2348199_LoremIpsum... 
```

我尝试了几件事：（不匹配）

```
^[\d]{6-7}_
^[0-9]{6-7}_ 
```

如果我做：

```
^[\d]{6}_
^[0-9]{7}_ 
```

我得到匹配，为什么我不能在这个表达式中做可变长度？我在这里想念什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:54:20.223

正确的语法是逗号：

```
{6,7} 
```

不是：

```
{6-7} 
```

此外，您不必将`\d`括号括起来：

```
^\d{6,7}_ 
```

# javascript - 如何从迭代组合框中获取所有项目

> ID：11348079
> 
> 赞同：1
> 
> 时间：2012-07-05T15:53:24.097
> 
> 标签：javascript, rally

我曾经使用 getItems 获取下拉列表中的所有项目。 [http://developer.rallydev.com/developer/iteration-dropdown](http://developer.rallydev.com/developer/iteration-dropdown)

但在 API 2.0 中，我找不到从迭代组合框中获取所有项目的等效函数。

任何想法？

另一个问题：

使用 getRawValue 仅返回迭代名称，我怎样才能获得迭代开始日期和结束日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:55:34.227

要获取迭代组合框的所有项目，您需要获取与组合框关联的商店。下面的代码为存储加载添加了一个侦听器，然后返回与该存储关联的所有记录。

获得记录后，您可以使用 get 方法检索字段的值并传入字段名称。

```
Ext.create('Ext.Container', {
    items: [{
        xtype: 'rallyiterationcombobox',
        storeConfig: {
            listeners: {
                 load: function(store, records){
                    console.log(records);
                }
            }
        },
        listeners: {
            select: function(combobox) {
                console.log(combobox.getRecord().get("StartDate"));
                console.log(combobox.getRecord().get("EndDate"));
            }    
        }    
    }],
    renderTo: Ext.getBody().dom
}); 
```

# java - 有没有办法在底部组件上使用 setDividerLocation ？

> ID：11348080
> 
> 赞同：2
> 
> 时间：2012-07-05T15:53:32.577
> 
> 标签：java, swing, jsplitpane

我有`JSplitPane`一个垂直分割的。最上面的组件是一个在 a 中的表格，`JScrollPane`下面的组件是对一行的详细描述。底部组件始终具有相同数量的元素，因此基本上它保持相同的高度。

现在，我`setDividerLocation`用来定位窗格被拆分的位置。如果我放入`100`它，顶部将是`100px`，如果`500`然后顶部将是`500px`。但是如果我重新调整大小`JFrame`，那么顶部组件仍然是 100px，底部组件真的很大。

我想知道是否有办法根据底部组件而不是顶部组件设置分隔线位置？

对不起，如果我没有解释清楚，如果我说的仍然令人困惑，请告诉我，我可以尝试更好地解释它。

- - - 编辑 - - -

感谢 ControlAltDel 解决这个问题。这就是我的代码现在看起来的样子：

```
JSplitPane splitPane = new JSplitPane();
splitPane.setTopComponenet(new JTable());
splitPane.setBottomComponent(new JPanel());
splitPane.setResizeWeight(1); // This gives the top component priority when the window is resized 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:56:26.973

[http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html#setResizeWeight(double](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html#setResizeWeight(double) )

# javascript - TinyMCE 剥离所有标记

> ID：11348085
> 
> 赞同：2
> 
> 时间：2012-07-05T15:53:43.170
> 
> 标签：javascript, tinymce, django-tinymce

我正在尝试在 TinyMCE 包装的文本字段中插入一个简单的图像链接，但它剥离了我*所有*的标记。我的标记看起来像：

```
<a class="video-launcher lightbox-video-launcher" href="http://www.youtube.com/watch?v=blah" ><span class="video-launcher-bg"></span><span class="video-launcher-button"></span></a> 
```

我的 tinymce_config_url_init.html 看起来像：

```
{
  "theme_advanced_toolbar_align":"left",
  "content_css":"/media/css/cms_tinymce.css,/media/css/cms_tinymce_admin.css",
  "theme_advanced_blockformats":"p,h2,h3,div,customformat",
  "theme_advanced_statusbar_location":"bottom",
  "theme_advanced_path":false,
  "plugins":"fullscreen,paste",
  "valid_elements":"*[*]",
  "media_strict":false,
  "paste_auto_cleanup_on_paste":true,
  "theme_advanced_styles":"Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1",
  "width":"680",
  "theme":"advanced",
  "theme_advanced_font_sizes":"8px,10px,12px,14px,16px,18px,20px,24px,36px",
  "theme_advanced_resizing":true,
  "height":"300",
  "relative_urls":false,
  "theme_advanced_toolbar_location":"top",
  "inline_styles":true,
  "language":"en",
  "theme_advanced_buttons1":"fullscreen,|,undo,redo,|,bullist,numlist,|,anchor,link,unlink,charmap,|,code,|,justifyleft,justifycenter,justifyright,|,image,",
  "theme_advanced_buttons3":"",
  "theme_advanced_buttons2":"removeformat,styleselect,formatselect,fontselect,fontsizeselect,|,bold,italic,underline,|,forecolor,backcolor",
  "removeformat_selector":"span,div,p,h1,h2,h3"
} 
```

我知道问题出在 TinyMCE 上，因为如果不提交表单，只需再次单击“html”按钮，TinyMCE 的弹出窗口就不会显示任何内容。

我假设 TinyMCE 正在删除它认为看起来不安全或无效的任何内容。对于我的应用程序，它正在管理部分中使用，因此可以信任内容。如何禁用导致此标记被剥离的 TinyMCE 配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:31:19.570

您应该仔细查看 tinymce 配置参数[valid_elements。](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)您需要根据需要设置它们并定义有效的元素和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:58:17.647

也许将您网站的 css 样式表添加到`"content_css"`变量中？

并且还设置`"paste_auto_cleanup_on_paste"`为假，不是真的。

# apache-flex - Flex 3中复选框的填充颜色

> ID：11348086
> 
> 赞同：0
> 
> 时间：2012-07-05T15:53:51.140
> 
> 标签：apache-flex, flex3, flexbuilder

我有大约 8 个使用 for 循环动态创建的复选框。每个复选框都有不同的颜色。基本上我想使用 8 种预定义颜色更改每个复选框（不包括标签）的填充颜色。这是我的代码。

```
for (var i:int=0; i <= annotatorNames.length; i++)
{
    var checkbox:CheckBox = new CheckBox();
    var colorIndex:int = parseInt(annotatorColours[i]) - 1;
    var checkboxColor:String = UiConstants.ANNOTATOR_COLORS[colorIndex];

    checkbox.label=annotatorNames[i];
    checkbox.selected=true;
    checkbox.setStyle("fillColors", [checkboxColor, checkboxColor, checkboxColor, checkboxColor]);
    annotatorCheckboxes[i] = checkbox;
    this.addChild(checkbox);
} 
```

由于某种原因，fillCollors 不适用，并且复选框未设置样式。如果我设置标签的样式，它可以工作……几乎任何其他样式都适用……但不是填充颜色。我在这里做错了什么？

代码没有错误，颜色为“0XA52A2A”的形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:17:26.723

您对示例中没有的代码片段有疑问，即常量 UiConstants.ANNOTATOR_COLORS[colorIndex]; ETC

我将您的代码修剪到最低限度以研究您的缺陷，并且样式的设置没有问题。

下面的代码工作得很好，运行它并检查一下：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()">
<mx:Script>
    <![CDATA[
        import mx.controls.CheckBox;
        private function init() : void {
            for (var i:int=0; i <= 8; i++)
            {
                var checkbox:CheckBox = new CheckBox();
                var checkboxColor:String = 'red';

                checkbox.label=i.toString();
                checkbox.selected=true;
                checkbox.setStyle("fillColors", [checkboxColor, checkboxColor, checkboxColor, checkboxColor]);
                holder.addChild(checkbox);
            }
        }
    ]]>
</mx:Script>
<mx:HBox id="holder"/>
</mx:Application> 
```

那应该为您指明正确的方向...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:15:15.997

尝试使用样式表，包括：

```
CheckBox {
   fillColors: #yourColor, #yourColor, #yourColor, #yourColor;
} 
```

通过以下语句导入它：

```
<mx:Style source="yourstylesheet.css"/> 
```

# sap - SAP BI 7.0 Analysis Process Desinger 与转型中的例程

> ID：11348093
> 
> 赞同：0
> 
> 时间：2012-07-05T15:54:18.710
> 
> 标签：sap, business-intelligence

A1：我对 Analysis Process Desinger(APD) 的使用感到困惑。这有什么用途？

A2: 看来转换中的套路是 APD 的替代方案，是真的吗？APD 和常规有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T00:02:18.857

这里已经很晚了，我不想过多（明显）细节，但我偶然发现了你的问题，并想至少提供一个部分答案，尽管我怀疑它是否及时看到你的问题已经是几个几个月大。

APD 的一项简洁功能是您可以将查询指定为源。这在转换中是不可能的。如果您面临每个 SAP 建议的库存场景，即与快照场景相对的非累积场景，使用查询作为源特别有用，因为查询会自动计算库存余额，因此您不必这样做。

除此之外，APD还可以用于数据挖掘，在SAP BW下我不熟悉，还有一些我也没有经验的东西。除非我弄错了，否则 SAP 不再开发 APD，而且我知道有很多错误，即使在当前版本的 BW 中也是如此。

无论如何，根据您的用例，您很可能会对坚持转换及其开始、结束和专家例程感到非常满意，除非您有非常具体的场景或要求。

# spring - 处理activemq-spring连接错误

> ID：11348094
> 
> 赞同：0
> 
> 时间：2012-07-05T15:54:18.770
> 
> 标签：spring, activemq, spring-jms

我已经配置（使用 spring）我的应用程序以使用 activemq 收听 jms que，并且一切正常。我的 activemq 服务器安装在另一台服务器上，有时它可能会脱机，我想处理连接错误。那可能吗？

这是我的弹簧配置

```
 <amq:connectionFactory id="jmsFactory" brokerURL="tcp://xxx.xxx.xxx.xxx:61616" />
    <bean id="messageConverter" class="com.unic.thesting.main.jms.message.TheStingMessageConverter" scope="tenant"/>
    <jms:listener-container concurrency="10" connection-factory="thestingJmsFactory" destination-type="queue" message-converter="thestingMessageConverter">
        <jms:listener destination="in" ref="orderStatusConsumer" method="consume"/>
    </jms:listener-container>

    <bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate" scope="tenant">
        <property name="messageConverter" ref="messageConverter" />
        <property name="connectionFactory">
            <bean class="org.springframework.jms.connection.SingleConnectionFactory" scope="tenant">
                <property name="targetConnectionFactory">
                    <ref local="jmsFactory" />
                </property>
            </bean>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:03:11.013

当`DefaultMessageListenerContainer`您使用 ` 处理恢复与 JMS 提供程序的连接时，如果它因任何原因被丢弃（默认情况下它每 5 秒重试一次，直到连接恢复），因此您不必在侦听器前端执行任何操作.

在使用 jmsTemplate 的发送端，`org.springframework.jms.JmsException`如果发送消息有任何问题，您将收到运行时。您应该能够捕获它以进行任何自定义处理

# android - 在android中使用Ksoap2时处理超时

> ID：11348100
> 
> 赞同：2
> 
> 时间：2012-07-05T15:54:30.063
> 
> 标签：android, timeout, ksoap2, handlers

我正在从我的活动中调用另一个类的方法，该方法使用 ksoap2 调用 Web 服务。我想为此处理超时。如果该方法的执行时间超过 10 秒，那么我需要显示一个警告对话框，指示该过程不成功。

我尝试使用超时值如下：

```
HttpsTransportSE transport = new HttpsTransportSE(URL,TIMEOUT); 
```

但是 ksoap2 出于某种原因忽略了超时。我正在使用 ksoap2 2.6.5。

有什么方法可以让我执行该方法 10 秒，然后在 android 中显示指示成功或失败的相应对话框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T05:40:16.553

HttpTransportSE 在某些情况下忽略超时值似乎仍然存在一个未解决的问题。请参阅此相关[链接](http://code.google.com/p/ksoap2-android/issues/detail?id=60&q=httpTransportse%20timeout)。

但是，对此的解决方案涉及修改现有的`ksoap2 API`.

感谢[Lightsoftai](http://www.lightsoftai.com/?p=707)的开发人员，您现在可以`HttpTransportSE`使用以下代码添加超时：

**注意**：*您可以为此使用 ksoap2 API 版本 2.5.2 或更高版本*

```
 /**
       * Creates instance of HttpTransportSE with set url
       *
       * @param url 
       *             the destination to POST SOAP data
       */
         public HttpTransportSE(String url) {
         super(url);
         }

       /**
      * Creates instance of HttpTransportSE with set url
      *
      * @param url
      *            the destination to POST SOAP data
      * @param timeout
      *               timeout for connection and Read Timeouts (milliseconds)
       */
       public HttpTransportSE(String url, int timeout) {
       super(url, timeout);
          } 
```

[您可以从此处](http://www.lightsoft.se/_lightsoft/wp-content/plugins/download-monitor/download.php?id=1)下载相同的 jar 文件。

另请参阅[ksoap never timeout](https://stackoverflow.com/questions/5489671/ksoap-never-timeout)。

希望能帮助到你。

# internet-explorer - 除非我使用 js 警报或调试时，否则 IE 中的右键菜单不会抑制

> ID：11348102
> 
> 赞同：0
> 
> 时间：2012-07-05T15:54:38.083
> 
> 标签：internet-explorer, right-click

我正在尝试在特定类型的 DIV 上创建右键菜单……我认为它可以正常工作，因为当我在 Visual Studio 中调试时，不会出现右键菜单。但是当我在没有调试的情况下运行它时，确实会出现正确的菜单！

如果我使用 alert() 函数，这会杀死正确的菜单，但我不想使用警报，我只是希望出现一个备用的右键单击菜单，并且似乎无法阻止默认菜单的出现。

这是一个小提琴：http: [//jsfiddle.net/tvance929/5N2ak/](http://jsfiddle.net/tvance929/5N2ak/)

您会注意到，如果您注释掉警告行 - 右键菜单将重新出现。

我已经尝试过 RETURN FALSE 和 e.preventdefault() ...我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:43:08.077

您的回答似乎只能在 IE8 中解决问题。在 IE5-9 中，修复是在处理程序中使用`oncontextmenu`而不是`onkeydown`和：

```
event.cancelBubble=true;
event.returnValue=false;
return false; 
```

# git - 使用本地存储库更改推送更新 Eclipse 项目

> ID：11348105
> 
> 赞同：1
> 
> 时间：2012-07-05T15:54:40.487
> 
> 标签：git, egit

我有一个本地 GIT 存储库，供同事共享以从中提取/推送。现在他已经完成了他的第一次推送，但是我无法用他的更改来更新我的 Eclipse 项目。事实上，他的更改对我来说似乎是删除，也就是说，同步显示我删除了他最近推送的文件：

![在此处输入图像描述](../Images/4ba9f26d7c3790d809c3233959f07452.png)

**覆盖**抛出错误：

```
An internal error occurred during: "Overwriting 3 resources.".
Attempted to beginRule: F/Core/src/com/blablabla/android/core, does not match outer scope rule: F/Core/src/com/blablabla/android/core/db 
```

**Merge**表示没有要合并的更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:00:51.437

我认为这是由于[这个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362219)（我使用的是 Ubuntu 12.04 LTS btw，所以这个错误适用于 Linux 和 WXP）

为了解决这个问题，我只需要创建缺少的目录（在我的示例中，未创建 core/db 包 -directory-），然后**Overwrite**将正常工作。

# android - Android GPS ACCURACY_HIGH 导致强制关闭？

> ID：11348109
> 
> 赞同：8
> 
> 时间：2012-07-05T15:54:51.393
> 
> 标签：android

我正在研究 GPS 部分和标准，我可以将精度设置为 ACCURACY_FINE、ACCURACY_MEDIUM 等。但是，由于某种原因，如果我将标准设置为 ACCURACY_HIGH，我会不断收到强制关闭错误。关于可能导致它的任何想法？

这是我的清单，我很确定一切都很好，因为我可以使用不同的标准：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
<uses-permission android:name="android.permission.ACCESS_CHECKIN_PROPERTIES" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.VIBRATE" /> 
```

这是我的日志：

```
 07-05 08:51:48.641: W/dalvikvm(1040): threadid=1: thread exiting with uncaught exception (group=0x40015578)
 07-05 08:51:48.657: E/AndroidRuntime(1040): FATAL EXCEPTION: main
 07-05 08:51:48.657: E/AndroidRuntime(1040): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jetdelivery.mobile/com.jetdelivery.mobile.statuspage}: java.lang.IllegalArgumentException: accuracy=3
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.os.Handler.dispatchMessage(Handler.java:99)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.os.Looper.loop(Looper.java:130)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.ActivityThread.main(ActivityThread.java:3687)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at java.lang.reflect.Method.invokeNative(Native Method)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at java.lang.reflect.Method.invoke(Method.java:507)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at dalvik.system.NativeStart.main(Native Method)
 07-05 08:51:48.657: E/AndroidRuntime(1040): Caused by: java.lang.IllegalArgumentException: accuracy=3
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.location.Criteria.setAccuracy(Criteria.java:223)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at com.jetdelivery.mobile.statuspage.onCreate(statuspage.java:125)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
 07-05 08:51:48.657: E/AndroidRuntime(1040):    ... 11 more 
```

我正在使用 Android 2.3.5 固件进行开发。谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T16:02:19.470

android [Criteria](http://developer.android.com/reference/android/location/Criteria.html)有两组不同的精度常数。`ACCURACY_FINE`和`ACCURACY_COARSE`用于一般位置，而`ACCURACY_LOW`、`ACCURACY_MEDIUM`和`ACCURACY_HIGH`“可用于水平、高度、速度或方位精度。” 如果您在谈论一般 GPS 位置，您应该使用粗略或精细。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-08T11:23:54.740

为了更清楚地说明 matt5784 的答案，这里有一个如何使用新常量的示例：

```
 //All your normal criteria setup
    Criteria criteria = new Criteria();
    //Use FINE or COARSE (or NO_REQUIREMENT) here
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    criteria.setAltitudeRequired(true);
    criteria.setSpeedRequired(true);
    criteria.setCostAllowed(true);
    criteria.setBearingRequired(true);

    //API level 9 and up
    criteria.setHorizontalAccuracy(Criteria.ACCURACY_HIGH);
    criteria.setVerticalAccuracy(Criteria.ACCURACY_HIGH);
    criteria.setBearingAccuracy(Criteria.ACCURACY_LOW);
    criteria.setSpeedAccuracy(Criteria.ACCURACY_MEDIUM); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-11T20:41:52.280

`ACCURACY_FINE`分别`ACCURACY_COARSE`用常数值 1 和 2 分组。`ACCURACY_LOW`,`MEDIUM`并`HIGH`与常数值 1、2 和 3 组合在一起。

似乎 setAccuracy 期望并返回`COARSE`or ，而 setVerticalAccuracy、setHorizo​​ntalAccuracy 、`FINE`setSpeedAccuracy 和 setBearingAccuracy 期望or 。此外，当您调用 setAccuracy 时，它会像这样设置水平精度：`LOW``MEDIUM``HIGH`

```
public void setAccuracy(int accuracy) {
    if (accuracy < NO_REQUIREMENT || accuracy > ACCURACY_COARSE) {
        throw new IllegalArgumentException("accuracy=" + accuracy);
    }
    if (accuracy == ACCURACY_FINE) {
        mHorizontalAccuracy = ACCURACY_HIGH;
    } else {
        mHorizontalAccuracy = ACCURACY_LOW;
    }
} 
```

所以，使用`ACCURACY_FINE`. 我同意这应该得到更好的记录。

# regex - 正则表达式获取由“/”分隔的单词中除最后一个单词之外的所有内容？

> ID：11348111
> 
> 赞同：6
> 
> 时间：2012-07-05T15:54:55.073
> 
> 标签：regex

什么是适当的正则表达式来获得除最后一个词之外的句子的所有内容：

例如：

```
/hello/world     -> /hello/
/one/two/three   -> /one/two/
/foo/bar/ice/tea -> /foo/bar/ice/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:59:19.490

使用这个正则表达式 `^/.+/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:08:51.463

```
(.+)\b\w+$ 
```

这适用于所有句子。不管有没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:57:20.453

这个正则表达式会帮助你

```
.*[^a-zA-Z]+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T15:57:36.193

使用捕获组：

```
^((/[^/]+)*)/[^/]*$ 
```

编辑：

```
^(/.*/)[^/]*$ 
```

两者都可以与非贪婪引擎一起使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T15:58:09.483

您可以使用`.*`匹配任何字符，然后匹配斜杠：

```
#^.*/#

```

请注意，如果您使用`/`分隔正则表达式，则需要`/`使用反斜杠转义。

```
/^.*\//

```

# jquery - jQuery小部件smoothDivScroll右热点不滚动，仅在鼠标悬停时缓动

> ID：11348114
> 
> 赞同：0
> 
> 时间：2012-07-05T15:55:44.840
> 
> 标签：jquery

我遇到了 smoothDivScroll ( [http://www.smoothdivscroll.com/](http://www.smoothdivscroll.com/) ) 的问题。左侧热点工作正常；然而，正确的热点在鼠标悬停时没有任何作用，但确实尊重缓和（即我设置`easingAfterHotSpotScrollingDistance: 100`并在鼠标悬停时它跳跃那么多）。我在smoothDivScroll-1.2.js 中添加了一个console.log() 来记录mouseover 和mouseout，它们在正确的时间触发。

另外，请注意下图：如果我将宽度：10% 添加到右侧热点，则背景图像被推到左侧，图像右侧的空白区域在鼠标悬停时可以正常工作，但是将鼠标悬停在背景图像没有。 ![滚动条](../Images/27d380990547829d97be35e114d7f21c.png)

请看下面的代码：

调用 smoothDivScroll() 之后的 HTML：

```
<ul class="quicktabs-tabs quicktabs-style-nostyle">
  <div class="scrollingHotSpotLeft scrollingHotSpotLeftVisible" style=""></div>
  <div class="scrollingHotSpotRight scrollingHotSpotRightVisible" style=""></div>
  <div class="scrollWrapper">
    <div class="scrollableArea" style="width: 1173px; ">
      <li class="active first"><a href="/drupal-7.14/general?qt-view__show_history__block=0#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-0" class="active quicktabs-loaded jquery-once-2-processed">1972</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=1#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-1" class="active jquery-once-2-processed">1984</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=2#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-2" class="active jquery-once-2-processed">1991</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=3#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-3" class="active jquery-once-2-processed">1994</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=4#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-4" class="active jquery-once-2-processed">1996</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=5#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-5" class="active jquery-once-2-processed">1997</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=6#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-6" class="active jquery-once-2-processed">1998</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=7#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-7" class="active jquery-once-2-processed">2000</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=8#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-8" class="active jquery-once-2-processed">2001</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=9#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-9" class="active jquery-once-2-processed">2002</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=10#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-10" class="active jquery-once-2-processed">2003</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=11#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-11" class="active jquery-once-2-processed">2004</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=12#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-12" class="active jquery-once-2-processed">2005</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=13#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-13" class="active jquery-once-2-processed">2006</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=14#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-14" class="active jquery-once-2-processed">2008</a></li>
      <li><a href="/drupal-7.14/general?qt-view__show_history__block=15#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-15" class="active jquery-once-2-processed">2011</a></li>
      <li class="last"><a href="/drupal-7.14/general?qt-view__show_history__block=16#qt-view__show_history__block" id="quicktabs-tab-view__show_history__block-16" class="active jquery-once-2-processed">2012</a></li>
    </div>
  </div>
</ul> 
```

Javascript：

```
jQuery(document).ready(function($){
    $(".quicktabs-tabs").smoothDivScroll({
      mousewheelScrolling: true,
      visibleHotSpotBackgrounds: 'always',
      hotSpotScrollingStep:1,
      hotSpotScrollingInterval:15,
      autoScrollingMode: "",
      manualContinuousScrolling: true,
      easingAfterHotSpotScrollingDistance: 100,
    });
  }); 
```

CSS：

```
.scrollingHotSpotLeft {
position: absolute;
left: 0;
width: 90px;
height: 106px;
background: transparent url(../img/show-history-arrow_sprite.gif) 0 -110px no-repeat;
}
.scrollingHotSpotRight {
  position: absolute;
  z-index: 99;
  right: 0;
  width: 90px;
  height: 106px;
  background-image: url(../img/show-history-arrow_sprite.gif) no-repeat;
    background-repeat: no-repeat;
    background-position: 47px 0;
}
div.scrollWrapper {
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
}

div.scrollableArea {
  position: relative;
  width: auto;
  height: 100%;
} 
```

# css - Magento CSS Merge 会破坏 IE 浏览器中的布局

> ID：11348117
> 
> 赞同：2
> 
> 时间：2012-07-05T15:55:53.353
> 
> 标签：css, internet-explorer, magento-1.4

我正在开发一个 magento 网站，它使用 CSS 合并选项。目前在 IE 中，CSS 无法正确呈现。当我删除 CSS 文件的某些部分时，它的工作。有时当我从顶部删除 50 行时它会起作用。有时当我从底部删除 100 行时它会起作用。所以这与我写的 CSS 无关。合并后的文件包含大约 6000 行，文件大小为 380 KB。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T12:46:19.377

似乎 Internet Explorer 的 8 和 9 4095 选择器限制。

在我的例子中，我有一个大约 7 个样式表的列表，这些样式表被添加到 page.xml 中（所以站点范围内）。这些文件中的总选择器计数为 4463，因此超出了限制。

我用过：

```
@import 'some-style-sheet.css' all; 
```

对于 3 个顶级样式表，将它们导入到第 4 个，然后在 page.xml 中注释掉这 3 个。

这有助于减少合并文件中的选择器总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:08:16.553

我在 layout.xml 的节点中为具有巨大大小的文件添加了 media="null" 属性。因此它将与 media="all" 和 media="print" 合并为另一个文件。

这对我有用。

# magento - git pull 后样式和脚本未加载到我的 magento 网站中

> ID：11348119
> 
> 赞同：0
> 
> 时间：2012-07-05T15:56:03.870
> 
> 标签：magento

在我将更改从开发服务器拉到生产服务器后，样式和脚本没有加载到 html 中，如下所示

![在此处输入图像描述](../Images/919526555837b83423522a9e06667385.png)

我尝试重新启动服务器和 php 服务并清除 /var/cache 文件夹下的 caceh。

我猜是因为缓存，但我无法在管理面板下禁用缓存，因为所有脚本都没有添加到头部。

在这种情况下如何禁用所有缓存？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:05:39.537

如果您有 SSH 访问权限，请转到`var/cache/`rm -rf。我也写了一个 php 脚本来做到这一点，所以当扩展的开发人员告诉我们“手动删除所有缓存”时，我的员工不必使用 SSH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:19:38.753

我认为您可以在 Admin 中刷新缓存；如果不允许，则不必禁用。另外，请清除浏览器缓存。

三个主要缓存，除了您可能已经安装的任何其他 3rd 方缓存包之外，最好的做法是清除

1.  变量/缓存
2.  Magento Admin => System-> Cache Management（根据您的要求刷新缓存）。
3.  浏览器缓存

干杯，斯瓦普纳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:33:49.177

我已经解决了这个问题，我做了以下事情

1) 移除`var/cache`

2）重新启动我的网络服务器和php服务

3）通过shell禁用我的编译器路径

它就像那样工作。

# javascript - 使用“for”动态分配对象键和值

> ID：11348120
> 
> 赞同：-1
> 
> 时间：2012-07-05T15:56:04.243
> 
> 标签：javascript

我有一个函数 ，`SWFUpload_config`它接受一个参数`post_params_arr`- 一个对象。

```
post_params_arr = {"ajaxtask":"swfupload_files", "param": "2012"} 
```

我需要解析它`post_params_arr`并通过以下方式动态添加键和值`swfu_settings`（请注意，swfu_settings 默认具有'SWFSESSID'：session_id 和所有其他键：必须从 post_params_arr 添加）：

```
function SWFUpload_config (post_params_arr) {
    var swfu_settings = {
        'SWFSESSID' : session_id,
        'ajaxtask' : 'swfupload_files',
        'param' : '2012'
    };
} 
```

我怎样才能做到这一点？`post_params_arr`我将如何在`swfu_settings`我分配键和值的地方解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:00:43.603

与您访问任何其他对象的方式相同...

```
var swfu_settings = {
    ajaxtask: post_params_arr.ajaxtask,
    param: post_params_arr.param
}; 
```

或者你的意思是它是JSON？如果您有 jQuery，请使用`jQuery.parseJSON`;解析它 否则，使用`JSON.parse`并依靠`eval('(' + post_params_arr + ')')`.

* * *

如果出于某种原因需要对对象进行浅克隆，则`for in`循环将起作用：

```
var swfu_settings = {
    SWFSESSID: 'blah'
    // etc.
};

for(var x in post_params_arr) {
    if(post_params_arr.hasOwnProperty(x)) {
        swfu_settings[x] = post_params_arr[x];
    }
} 
```

# xml - 数据库同步 - XML 或 JSON

> ID：11348123
> 
> 赞同：0
> 
> 时间：2012-07-05T15:56:18.993
> 
> 标签：xml, database, json

我为 android 编写应用程序，它将位于 android 设备上的数据库与外部数据库同步。简而言之，Android会生成一些数据并将其存储在自己的数据库中。Android 有时会通过互联网将此数据发送到 HTTP 服务器。我想知道，发送这些数据 XML 或 JSON 会更好吗？我知道 JSON 比 XML 轻得多，但 XML 对 JSON 有什么优势吗？什么是更好的同步数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:03:07.630

我会说 json.... 因为 json 更轻，如果您正在寻找的只是传递数据，那么 json 是更快、更简单的方法。我现在使用 json 和 xml 有一段时间了，但我还没有找到任何理由更喜欢 xml 而不是 json，除非 XML“看起来”更好......

无论如何，如果您使用现有的解析和编码工具（例如 JAXB），从 json 到 xml 的转换应该花费您 2-3 行代码，sio 您也可以切换另一个...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:31:11.290

您还没有说明这是单用户应用程序还是多用户应用程序......分布式数据同步不是一个简单的问题要解决。

如果这是单用户解决方案，我会调查您的数据库是否支持复制。如果您的数据集很小，我也会考虑简单地发布数据库转储文件。这两种解决方案都避免了将数据序列化进出 XML/JSON 的性能开销。也避免了数据库类型支持的讨厌。

最后，对于“左字段”解决方案，为什么不考虑将数据存储在[couchdb](http://couchdb.apache.org/)中？内置客户端服务器复制。

*   [安卓-Couchdb](https://github.com/couchbase/Android-Couchbase-SourceBuild)
*   有一个名为[pouchdb](http://pouchdb.com/)的新 javascript 客户端，值得评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:03:30.437

我会推荐 JSON，因为它比 XML 更轻量级，并且在我看来是更容易处理的格式。要么完成这项工作。其他要考虑的事情是您在 HTTP 服务器上使用的服务来拦截数据。你是自己写的吗？使用一种可能比另一种格式更好地工作的预先存在的格式？

还有没有理由不直接连接到远程数据库并以这种方式更新它？我知道经常这样做可能会减慢应用程序的速度并产生大量数据使用，但如果你只是像你计划的那样谨慎地这样做，那应该不是什么大问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T16:04:29.453

在非常大的数据集中，XML 会稍微重一些，因为它需要开始和结束标记。还有一个问题是标签之间的数据有多大。如果您在开始标签和结束标签之间有大量数据，那么这会“软化”效果。如果您没有处理大量数据，那么我只会使用对客户端和服务器都有更好的本机库支持的任何一个。对于中小型数据集，我认为差异不会很明显。

# c# - Windows 服务在运行时无法访问其他项目

> ID：11348125
> 
> 赞同：-2
> 
> 时间：2012-07-05T15:56:35.383
> 
> 标签：c#, windows-services, runtime

在我的解决方案资源管理器中，我有许多项目（目标框架 3.5）和一个 Windows 服务（目标框架 4.0）

在我的 Windows 服务中，我使用了其他项目的一些方法

但在运行时我的服务无法访问它们中的任何一个

任何想法 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:02:36.227

我假设您使用的是 Visual Studio，对吗？一、你的解决方案中的非windows服务项目是什么项目（DLL、windows窗体等）？如果它们是 DLL 项目，请确保在 Windows 服务项目中有对它们的引用。此外，请确保您的所有项目都使用相同的 .NET Framework 版本，因为这可能会导致问题。

当你说在运行时，你的意思是当你通过服务管理器安装和运行你的服务时？或者，您现在只是在模拟该服务并将其作为控制台应用程序运行？您是否遇到异常，或者代码没有编译？

一旦我得到了其中一些答案，我就可以提供更好的回应。谢谢。

# cakephp - CakePHP 1.3 HABTM - 添加工作正常，编辑不会保存 HABTM

> ID：11348126
> 
> 赞同：1
> 
> 时间：2012-07-05T15:56:39.083
> 
> 标签：cakephp, save, edit, has-and-belongs-to-many

我在 CakePHP 1.3 中的 HABTM 更新有问题。

首先，这是出现在警报模型中的关系声明：

```
var $hasAndBelongsToMany = array(
    'Region' => array(
        'className' => 'Region',
        'joinTable' => 'alerts_regions',
        'foreignKey' => 'alert_id',
        'associationForeignKey' => 'region_id',
        'unique' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ),
    'ForecastZone' => array(
        'className' => 'ForecastZone',
        'joinTable' => 'alerts_forecast_zones',
        'foreignKey' => 'alert_id',
        'associationForeignKey' => 'forecast_zone_id',
        'unique' => true,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )       
); 
```

当我提交表单为模型创建记录时，一切正常，并且关联的模型（HABTM 表）会创建正确的记录。$this->data 看起来像这样：

```
Array
(
[Alert] => Array
    (
        [title] => Test Alert
        [overview] => This is a test alert overview
        [user_id] => 3
        [timeframe] => Tonight
        [effective] => 2012-07-05 18:00:00
        [effective_time] => 6:00
        [effective_ampm] => pm
        [expires] => 2012-07-05 21:00:00
        [expires_time] => 9:00
        [expires_ampm] => pm
    )

[Region] => Array
    (
        [Region] => Array
            (
                [0] => 6
                [1] => 5
            )

    )

[ForecastZone] => Array
    (
        [ForecastZone] => Array
            (
                [0] => 1598
                [1] => 1594
                [2] => 2685
                [3] => 1565
                [4] => 1613
                [5] => 1595
            )

    )

) 
```

现在，由于与此模型（警报、ForecastZone 和区域）的复杂关联，我已经对其进行了设置，因此警报/编辑页面上有一个单独的界面来更新预测区域。警报控制器计算出预测区域所属的区域，并且控制器自己填充 [Region][Region] 值。ForecastZones 是从用户单击以选择他们想要的区域的界面中选择的。

当我向 /alerts/edit 操作提交表单时，我可以毫无问题地保存警报数据（标题、概述等）。但是，我不可能更新相关的 HABTM 模型。我即将使用 $this->query() 完成所有操作，但我将最后一次尝试找出问题所在。

这是我提交到 /alerts/edit 时表单的样子：

```
Array
(
    [Alert] => Array
        (
            [id] => 37
            [fcz_update] => true
        )

    [Region] => Array
        (
            [Region] => Array
                (
                    [0] => 6
                    [1] => 5
                )

        )

    [ForecastZone] => Array
        (
            [ForecastZone] => Array
                (
                    [0] => 1595
                    [1] => 1613
                    [2] => 1565
                    [3] => 2685
                    [4] => 1594
                    [5] => 1598
                    [6] => 2989
                    [7] => 3723
                    [8] => 1650
                    [9] => 1626
                    [10] => 1653
                    [11] => 1678
                    [12] => 3447
                    [13] => 1649
                    [14] => 1654
                    [15] => 1675
                    [16] => 3448
                    [17] => 1668
                    [18] => 1664
                    [19] => 1635
                    [20] => 1667
                    [21] => 1628
                )

        )

) 
```

我已经尝试过 $this->Alert->save($this->data) 以及 $this->Alert->saveAll($this->data) 并且这些都不起作用。两个 save() 函数都返回 1（真），所以我认为它们是成功的......但是当我返回到我最近编辑的记录时......什么都没有改变。我尝试将所有其他警报数据作为隐藏字段添加到表单中，这样我就可以一次保存整个警报数据......这也不起作用。

编辑：

这是我的 alerts_controller.php 编辑函数/操作中执行保存操作的代码：

```
if (!empty($this->data)) {

    //If we are updating forecast zones
    if(array_key_exists('fcz_update',$this->data['Alert'])){ 

        $fcz_str = $this->data['Alert']['AlertForecastZone'];
        $forecast_zones = explode(',',$fcz_str);

        $fcz_regions = $this->ForecastZone->query('SELECT DISTINCT region_id FROM forecast_zones WHERE id IN (' . $fcz_str . ') AND region_id != 0;');

        if(!empty($fcz_regions)){

            foreach($fcz_regions as $fczr){ $alert_regions[] = $fczr['forecast_zones']['region_id']; }
            $this->data['Region']['Region'] = $alert_regions;   

        }

        $this->data['ForecastZone']['ForecastZone'] = $forecast_zones;
        unset($this->data['Alert']['AlertForecastZone']);               

        //debug($this->data);

        $this->Alert->save($this->data);

        //Go back to alert edit to review changes
        $this->redirect($this->referer());              

    } 

} 
```

最好的错误是那些不会引发错误或有任何方法让您找出问题所在的错误。如此愤怒和沮丧......请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:32:54.967

玩弄数据的键控。

尝试 [ForecastZone][0] => 1595 或 [ForecastZone][0][id] => 1595 甚至 [ForecastZone][0][ForecastZone] => 1595

我总是要努力记住 HABTM 的正确键控顺序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T16:02:28.237

要保存关联和相关数据，您需要使用该`saveAll`功能 `$this->Alert->saveAll($this->data)`

# facebook - 为 G+、FB 和 LinkedIn 自定义共享文本，而不使用 OG 元标记

> ID：11348130
> 
> 赞同：0
> 
> 时间：2012-07-05T15:56:50.390
> 
> 标签：facebook, share, facebook-opengraph, linkedin, google-plus

Twitter 有一个漂亮的分享 API。如果我想自定义文本，我只需将它包含在我链接到的 URL 中：

```
<a href="https://twitter.com/share" 
   class="twitter-share-button" 
   data-text="whoa, check out this SUPER-EASY CUSTOMIZED TWEET TEXT!" 
   data-via="foo">
   Tweet
</a> 
```

我的问题是 Facebook、Google Plus 和 LinkedIn 是否有办法做到这一点。

我希望能够做到这一点*，而不*必将 og 元标记放在链接目标中。基本上，我希望共享按钮本身具有该知识，而不是链接目标具有该消息的知识。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:59:45.860

使用元数据填充页面以向非人类系统（包括搜索引擎、社交网络、屏幕阅读器等）进行描述是个好主意。对于 Google+，您可以选择方法：Schema.org 元数据、OpenGraph 或简单的元名称/说明。[您可以在https://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)阅读有关如何从您的网站填充片段的更多信息

# jquery - Jquery Checkbox All on Select box更改值问题 - 动态生成复选框（Ajax）

> ID：11348134
> 
> 赞同：0
> 
> 时间：2012-07-05T15:57:23.040
> 
> 标签：jquery, checkbox

我有一个大问题。这是代码：

```
<tr>
                                            <td width="50%">
                                                <select id="ptype"  name="ptype" class="required" style="width: 320px; float:left;" SIZE=14 onChange="selecttype(); CategoryGrab('<?php echo $_SERVER["SITE_HTMLROOT"];?>/sell/leftsell_catselect.php?idPtype='+this.value);">
                                                    <?php 
                                                        $namesub=$langid."_name";
                                                        $result = mysql_query ( "SELECT id, $namesub FROM ptype_new ORDER BY $namesub");
                                                            while($row = mysql_fetch_array($result)){
                                                                echo "<option value=".$row[0].">".$row[1]."</option>";
                                                            }?>
                                                </select>
                                            </td>
                                            <td width="50%">
                                                <div id="categories">
                                                    <div class="control-group" style="width: 320px">
                                                    <input type="checkbox" class="chkAll" name="chkall"> All <br/>
                                                    <?php 
                                                    $namecat=$langid."_name";
                                                    $result = mysql_query ( "SELECT categories.id, categories.$namecat FROM categories LEFT JOIN ptype_new ON ( ptype_new.catid LIKE concat( '%::', categories.id, '::%' ) ) WHERE ptype_new.id =12" ) or die(mysql_error());
                                                        while($row1 = mysql_fetch_array($result)){
                                                            echo '<input type="checkbox" name="'.$row1[1].'" value="'.$row1[0].'">'.$row1[1].'<br/>';
                                                        } ?>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr> 
```

这是JS代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.chkAll').click(function() {
        $(this).parents('.control-group').children(':checkbox').not('.chkAll').attr('checked', this.checked);
    });

     $('.chkAll').parents('.control-group').children(':checkbox').not('.chkAll,:checked').click(function() {
        $(this).parents('.control-group').children('.chkAll').attr('checked', false);
    });
}); 
```

复选框的值来自 SQL 查询。复选框“CHECK ALL”仅在第一个视图上工作。问题是值的变化取决于 $_POST $id 和 .... 和“CHECK ALL”是否不再起作用。

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:06:53.617

也许你的代码可以这样写：

```
$(document).ready(function() {
    $('#categories').on('change','.chkAll',function() {
        $('.chkAll ~ input[type="checkbox"]',this.parentNode).prop('checked', $(this).prop('checked'));
    });
    $('#categories').on('change','.chkAll ~ input[type="checkbox"]',function(){
        $(this).siblings('.chkAll').prop('checked',false);
    });
}); 
```

# windows - 如何以编程方式从 win7 中的屏幕分辨率对话框获取显示器编号？

> ID：11348136
> 
> 赞同：11
> 
> 时间：2012-07-05T15:57:25.043
> 
> 标签：windows, winapi, windows-7, windows-shell, multiple-monitors

当您在“屏幕分辨率”对话框中按下“识别”按钮时，Windows 会在每台显示器上显示大白显示器编号。在 Windows XP（使用 EnumDisplayDevices）中很容易以编程方式与监视器坐标一起找到它们，但在 Windows 7 上它已损坏。我怎样才能做到这一点？

1.  EnumDisplayDevices 和 GetMonitorInfo在 Windows 7中[不再可靠用于该目的。](http://windows7forums.com/windows-7-programming-scripting/43596-multi-monitor-display-numbers-unreliable.html?language=ga)
2.  我尝试了 GetMonitorInfo，然后从 MONITORINFOEX.szDevice (IE \.\Display2) 中提取监视器编号，但没有成功。另一个人在两年前[也这样做了，并声称 getMonitorInfo 有一个错误。](http://social.msdn.microsoft.com/Forums/en/windowsgeneraldevelopmentissues/thread/668e3cf9-4e00-4b40-a6f8-c7d2fc1afd39?prof=required&lc=1033&ppud=4)[这个错误](http://connect.microsoft.com/VisualStudio/feedback/details/545217/windows-7-getmonitorinfo-returns-wrong-information#)被微软标记为已修复，没有任何评论，但它仍然可以在具有最新更新的 win7 机器上重现。（顺便说一句，有人可以告诉我 - 也许这个错误在 win8 上不存在？）
3.  我从新的 CCD API 尝试[了 QueryDisplayConfig](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569216(v=vs.85).aspx)，但没有找到需要的信息。

有人知道路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-17T22:01:53.960

Windows 不提供允许应用程序获取显示设置应用程序使用的数字的功能。这些数字本身仅特定于显示设置应用程序，在系统或用于查询/设置显示拓扑的[CCD API中没有任何意义。](https://docs.microsoft.com/en-us/windows-hardware/drivers/display/connecting-and-configuring-displays)

最好的选择是让应用程序在提示用户选择显示时定义自己的分配索引的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T20:07:18.197

我从来不想在我的 Windows 应用程序中知道显示器的数量，但是您可以使用参数值调用[GetSystemMetrics 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385.aspx)`SM_CMONITORS`来获取桌面上显示显示器的数量。

`GetSystemMetrics`我主要使用参数值`SM_CXVIRTUALSCREEN`、和调用我的 Windows 应用程序函数`SM_CYVIRTUALSCREEN`，以避免在显示区域之外完全或部分打开应用程序窗口。如果用户将显示区域扩展到多个监视器上，但并非所有监视器都打开，则应用程序窗口可能仍然不可见。`SM_XVIRTUALSCREEN``SM_YVIRTUALSCREEN`

具有参数值的[SystemParametersInfo 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947.aspx)`SPI_GETWORKAREA`功能对于`uiAction`了解应用程序窗口的位置以及它在主屏幕上的宽度和高度可以有多大也非常有用，而不会被始终位于顶部的其他窗口（栏）部分隐藏。

如果您的 Windows 应用程序需要来自监视器的更多信息，另请参阅[GetMonitorInfo 函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144901.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T05:31:43.590

对于 Windows 7 支持的支持 WDDM 的 Windows 版本，您可以简单地使用作为 DirectX 一部分的 DXGI。DXGI 允许您非常轻松地枚举现有显示适配器、每个适配器可用的显示输出以及每个显示输出支持的显示模式。在枚举时，您可以读出许多额外的数据，例如句柄、标识符和设备名称。所有这些都可以很容易地用于检索工作区域。枚举适配器和输出的顺序由系统定义，并且与配置屏幕的顺序相匹配。

有关更多信息，请参见此处：[MSDN DXGI 概述](https://msdn.microsoft.com/en-us/library/windows/desktop/bb205075%28v=vs.85%29.aspx)

# pdf - 如何在 iReport 中嵌入和显示 SVG 图像

> ID：11348138
> 
> 赞同：5
> 
> 时间：2012-07-05T15:57:29.723
> 
> 标签：pdf, svg, jasper-reports, ireport

我正在使用 iReport 4.5.0，并希望嵌入 SVG 图像来生成 PDF。

当使用 iReport 的预览选项来运行报表时，图像不会被渲染到 PDF 中（即图像应该在的地方有一个空白区域）。

我在执行过程中没有在日志中看到任何异常，这是怎么回事？

这是图像标记代码片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
        name="reportSVGTest" language="groovy" pageWidth="595" 
        pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" 
        topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="50">
            <staticText>
                <reportElement x="81" y="13" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Hello]]></text>
            </staticText>
        </band>
    </title>
    <detail>
        <band height="443" splitType="Stretch">
            <image hAlign="Center" vAlign="Middle" isUsingCache="true" isLazy="true">
                <reportElement x="12" y="17" width="512" height="403"/>
                <imageExpression  class="net.sf.jasperreports.engine.JRRenderable">
                    <![CDATA[
                        net.sf.jasperreports.renderers.BatikRenderer.getInstance(
                            new java.io.File("C:\\Users\\akshayd\\Desktop\\polygons1.svg"))
                    ]]>
                </imageExpression>
            </image>
        </band>
    </detail>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T15:42:06.983

我想在我的报告中嵌入一个 SVG 文本，这个主题帮助我成功了。
我正在使用完全支持 JasperReports 5.5.0 的 Jaspersoft Studio。
这是我的做法：

*   创建图像元素
*   选择*自定义表达式*并让表达式为空
*   修改JRXML源：在标签*图片*中添加标签*imageExpression*

 *```
<image>
  <reportElement x="0" y="60" width="50" height="50" uuid="c0d0856e-0bb1-4634-b8b0-   6f7ace0e3ff3"/>
  <imageExpression><![CDATA[net.sf.jasperreports.renderers.BatikRenderer.getInstanceFromText("<svg:svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.0\" width=\"88\" height=\"21\" id=\"svg\"><svg:g id=\"layer1\"><svg:path id=\"path1\" d=\"M 61.799149,2.0342178 L 67.119461,2.0342178 L 67.119461,19.213905 L 61.799149,19.213905 L 61.799149,2.0342178 z\" style=\"text-anchor:start;fill:#FF0000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;\" /></svg:g> </svg:svg>")]]></imageExpression>
</image> 
```

所以，我使用[BatikRenderer的](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/renderers/BatikRenderer.html)*getInstanceFromText*方法。 不要忘记保护 SVG 文本中的双引号。*

# c++ - 为什么我的控制台不等待 VS2010 和 Windows7 中的输入？

> ID：11348142
> 
> 赞同：1
> 
> 时间：2012-07-05T15:57:37.707
> 
> 标签：c++, c, visual-studio-2010, windows-7, opencv

主要功能是这样的：

```
void main( int argc, char** argv ){
    // validate that an input was specified
    if( argc != 2 )
    {
        printUsage();
        return;
    }

    if( !strcmp(argv[1], "train") ) learn();
    else if( !strcmp(argv[1], "test") ) recognize();
    else
    {
        printf("Unknown command: %s\n", argv[1]);
        printUsage();
    }
} 
```

当我执行程序时，控制台一出现就消失了。

非常感谢您的耐心和帮助！:)

零

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:58:37.517

> 为什么我的控制台不等待 VS2010 和 Windows7 中的输入？

因为您没有指示它等待输入。

尝试`system("pause");`或`getchar()`类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:04:25.800

该程序不使用用户输入，而是使用程序参数。

该程序需要 1 个输入参数，您可以通过以下方式设置：

1.  打开`cmd`，将 directory( `cd`) 更改为 exe 文件所在的位置，然后使用参数运行程序。例如`main.exe train`
2.  在 vs2010 上，转到项目属性，在“配置属性”下找到调试并将“命令参数”设置为您想要的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:23:52.127

您可以直接按“Ctrl+F5”，默认情况下会等待您按 Enter 以关闭控制台，而不是添加诸如“暂停”之类的代码`getchar()`或类似代码。请参阅此 SO 帖子：[防止控制台窗口在 Visual Studio C/C++ 控制台应用程序上关闭](https://stackoverflow.com/questions/1775865/visual-studio-console-app-prevent-window-from-closing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:24:26.837

通过调试（按 F5）控制台应用程序，VS 不会在您的应用程序完成后自动调用“暂停”。您可以运行（按 CTRL+F5）该应用程序，VS 会为您调用“暂停”。

# powershell - VSphere CLI：如何拍摄新快照并添加描述？

> ID：11348143
> 
> 赞同：0
> 
> 时间：2012-07-05T15:57:40.607
> 
> 标签：powershell, vmware, powercli

我正在编写一个 VSphere CLI 脚本，该脚本将拍摄 6 个快照，并允许我将每个快照的描述设为它的创建日期。目前这是我正在尝试的代码：

```
$server = "<ServerName>"
connect-VIserver $server
$snapshot = Get-vm | New-Snapshot -Name $"<serverName>" | Set-Snapshot -$snapshot -Description get-date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:38:34.343

您可以在一个电话中完成此操作

> 获取虚拟机 | 新快照-名称“$serverName”-描述（获取日期）

我不确定您为什么要这样做，因为快照对象有一个名为“Created”的属性您可以通过执行以下操作来获取它：

> $snapshots = 获取虚拟机 | 新快照-名称“$serverName”
> 
> $快照 | foreach { Set-Snapshot -Description $_.Created }

# cassandra - Cassandra：使用包含大于或小于（< 和 >）的 where 子句进行查询

> ID：11348158
> 
> 赞同：7
> 
> 时间：2012-07-05T15:58:27.147
> 
> 标签：cassandra, where-clause, cql

我正在使用 Cassandra 1.1.2 我正在尝试将 RDBMS 应用程序转换为 Cassandra。在我的 RDBMS 应用程序中，我有一个名为 table1 的表：

```
| Col1 | Col2 | Col3 | Col4 | 
```

1.  Col1：字符串（主键）
2.  Col2：字符串（主键）
3.  Col3：Bigint（索引）
4.  Col4：比格特

该表包含超过 2 亿条记录。最常用的查询是这样的：

```
Select * from table where col3 < 100 and col3 > 50; 
```

在 Cassandra 中，我使用以下语句创建表：

```
create table table1 (primary_key varchar, col1 varchar, 
col2 varchar, col3 bigint, col4 bigint, primary key (primary_key));

create index on table1(col3); 
```

我将主键更改为额外的列（我在应用程序中计算键）。导入一些记录后，我尝试执行以下 cql：

```
select * from table1 where col3 < 100 and col3 > 50; 
```

这个结果是：

```
Bad Request: No indexed columns present in by-columns clause with Equal operator 
```

查询**select col1,col2,col3,col4 from table1 where col3 = 67** works

谷歌表示没有办法执行这种查询。是对的吗？任何建议如何创建这样的查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T22:29:29.777

Cassandra 索引实际上并不支持顺序访问；请参阅[http://www.datastax.com/docs/1.1/ddl/indexes](http://www.datastax.com/docs/1.1/ddl/indexes)以快速了解它们的用处。但不要绝望；使用 Cassandra（和许多其他 NoSQL 系统）的更经典的方法是反规范化、反规范化、反规范化。

在您的情况下，使用经典的桶范围模式*可能*是一个好主意，它允许您使用推荐的 RandomPartitioner 并保持您的行在集群周围良好分布，同时仍然允许顺序访问您的值。这种情况下的想法是，您可以将第二个动态列族映射（分桶和有序）`col3`值返回到相关`primary_key`值。例如，如果您的`col3`值范围从 0 到 10^9 并且分布相当均匀，您可能希望将它们放入 1000 个范围为 10^6 的存储桶中（最佳粒度级别取决于您需要的查询类型，您拥有的数据类型，查询往返时间等）。cql3 的示例架构：

```
CREATE TABLE indexotron (
    rangestart int,
    col3val int,
    table1key varchar,
    PRIMARY KEY (rangestart, col3val, table1key)
); 
```

插入时，应在,`table1`中插入相应的行。那么当需要枚举col3>X中的所有行时，最多需要查询1000个桶，但是里面的s都会被排序。用于查找所有值的示例查询：`indexotron``rangestart = int(col3val / 1000000)``table1``indexotron``col3val``table1.primary_key``table1.col3 < 4021`

```
SELECT * FROM indexotron WHERE rangestart = 0 ORDER BY col3val;
SELECT * FROM indexotron WHERE rangestart = 1000 ORDER BY col3val;
SELECT * FROM indexotron WHERE rangestart = 2000 ORDER BY col3val;
SELECT * FROM indexotron WHERE rangestart = 3000 ORDER BY col3val;
SELECT * FROM indexotron WHERE rangestart = 4000 AND col3val < 4021 ORDER BY col3val; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-12T21:34:14.417

如果 col3 始终是已知的小值/范围，则您可以使用一个更简单的表，该表也映射回初始表，例如：

```
 create table table2 (col3val int, table1key varchar,
                      primary key (col3val, table1key)); 
```

并使用

```
 insert into table2 (col3val, table1key) values (55, 'foreign_key');
 insert into table2 (col3val, table1key) values (55, 'foreign_key3');
 select * from table2 where col3val = 51;
 select * from table2 where col3val = 52;
 ... 
```

或者

```
 select * from table2 where col3val  in (51, 52, ...); 
```

如果您没有太大的范围，也许可以。（您也可以使用二级索引获得相同的效果，但不强烈推荐二级索引？）。理论上也可以“在客户端本地”[并行化它。](https://stackoverflow.com/q/36690811/32453)

似乎“Cassandra 方式”是有一些像“userid”这样的键，你用它作为“所有查询”的第一部分，所以你可能需要重新考虑你的数据模型，然后你可以有这样的查询`select * from table1 where userid='X' and col3val > 3`并且它可以[工作](https://stackoverflow.com/a/48755128/32453)（假设 col3val 上有一个聚类键）。

# php - 使用 PHP 将变量从一个页面传递到另一个页面

> ID：11348161
> 
> 赞同：1
> 
> 时间：2012-07-05T15:58:37.270
> 
> 标签：php

有谁知道下面的代码有什么问题，阻止我在`File2.php`变量`$myusername`中打印`File1.php`.

我只是想打印变量`$myusername`，或者如果您知道如何传递该变量的任何其他方式，这对我非常有帮助。

这是我的例子：

**文件1.php**

```
<?php 
$myusername=$_POST['myusername']; 

function getusername() 
{ 
   return $myusername;    
} 
?> 
```

**文件2.php**

```
<?php 
require_once('File1.php'); 
getusername(); 
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:04:37.690

我会提倡使用[`$_SESSION`](http://php.net/manual/en/features.sessions.php).

> PHP 中的会话支持包括一种在后续访问中保留某些数据的方法。这使您能够构建更多定制的应用程序并增加您网站的吸引力。
> 
> 访问您的网站的访问者被分配一个唯一的 id，即所谓的会话 id。这要么存储在用户端的 cookie 中，要么在 URL 中传播。
> 
> 会话支持允许您将请求之间的数据存储在 $_SESSION 超全局数组中。当访问者访问您的站点时，PHP 将自动检查（如果 session.auto_start 设置为 1）或根据您的请求（显式通过 session_start() 或隐式通过 session_register()）检查是否已随请求发送了特定会话 ID。如果是这种情况，则重新创建先前保存的环境。

**文件1.php**

```
<?php
session_start();
$_SESSION['myusername'] = (isset($_POST['myusername']) ? $_POST['myusername'] : '');
?> 
```

**文件2.php**

```
<?php
session_start();
echo $_SESSION['myusername'];
?> 
```

您还会注意到，在提供的`File1.php`代码中，`$_SESSION['myusername']`声明正在检查是否首先提供了值。如果是，则将会话变量设置为该值，否则将其设置为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:00:02.670

`$myusername`当您尝试从函数内部访问它时，您需要声明为全局，您还需要以某种方式打印（例如`echo`）；）

```
File1.php
<?php 
$myusername=$_POST['myusername']; 

function getusername() 
{ 
   global $myusername; // declare as global
   return $myusername;    
} 
?>

File2.php
<?php 
    require_once('File1.php'); 
    echo getusername();        // echo value
?> 
```

阅读更多：[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)。您也可以通过[$_SESSION](http://php.net/manual/en/features.sessions.php)传递它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:01:48.753

按会话。

文件1.php

```
<?php
session_start();
$_SESSION['myusername'] = $_POST['myusername']; 
```

文件2.php

```
<?php
session_start();
echo $_SESSION['myusername']; 
```

# hibernate - Hibernate c3p0 和 DBCP 连接池机制

> ID：11348163
> 
> 赞同：2
> 
> 时间：2012-07-05T15:58:41.343
> 
> 标签：hibernate, tomcat, c3p0, apache-commons-dbcp

如果您没有在 hibernate.cfg.xml 中指定设置，默认连接池是什么，您如何更改它？这是休眠配置

```
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/POM_IVR</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">XXX</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
    <mapping resource="com/SurveyResults.hbm.xml"/>

  </session-factory>
</hibernate-configuration> 
```

问题 1\. c3p0 jar 自带 hibernate3 吗？

2.如果你不指定c3p0，hibernate是使用它的默认连接池（你怎么知道它没有使用默认，有参数）还是DBCP？

3.如何修改我的 Web 应用程序的 DCBP 参数 我是否必须更改 catalina 或 hibernate 配置中的上下文文件 conf/catalina/locahost/Applicationame.xml，我必须更改/添加什么我必须指定用户名和密码还是只是参数？

4.有人能解释一下这是如何工作的，休眠请求连接，tomcat会从池中获取连接吗？如果您指定 c3p0，DBCP 会被绕过吗？

5.如果我有 2 个 Web 应用程序使用相同的表/用户名/密码怎么办？如果他们有自己的 DBCP 和 c3p0 jar，他们会被征用什么？如果 conf/context.xml 应用于所有应用程序，您可以为 DBCP 指定全局参数以供应用程序使用吗？

这都与mysql的8小时连接超时有关，我不想更改数据库参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:50:56.940

是的，c3p0 是休眠的一部分：http: [//www.informit.com/articles/article.aspx ?p=353736&seqNum=4](http://www.informit.com/articles/article.aspx?p=353736&seqNum=4)

清单 10.2 示例 Hibernate c3p0 配置

hibernate.c3p0.max_size=1
hibernate.c3p0.min_size=0
hibernate.c3p0.timeout=5000
hibernate.c3p0.max_statements=100
hibernate.c3p0.idle_test_period=300
hibernate.c3p0.acquire_increment=2

我相信你所有的答案都在那里。

# c++ - 使用 Hook Engine 时的 ACCESS_VIOLATION

> ID：11348165
> 
> 赞同：1
> 
> 时间：2012-07-05T15:58:47.460
> 
> 标签：c++, sockets, hook

我在使用这个钩子引擎时遇到问题[http://www.codeproject.com/Articles/21414/Powerful-x86-x64-Mini-Hook-Engine](http://www.codeproject.com/Articles/21414/Powerful-x86-x64-Mini-Hook-Engine)

函数已正确挂钩，但是当我尝试调用真实函数（原始）时，错误 ACCESS_VIOLATION 正在引发。

我的代码

```
typedef int (__stdcall *MyCloseSocket) (SOCKET s);
MyCloseSocket pTrampolineCloseSocket = NULL;

    int main()
    {
     //...
      HookFunction((ULONG_PTR) GetProcAddress(LoadLibrary(dll), "closesocket"),  (ULONG_PTR) &OwnCloseSocket); 
      pTrampolineCloseSocket = (MyCloseSocket) GetOriginalFunction((ULONG_PTR) OwnCloseSocket);
    }

int OwnCloseSocket(SOCKET fd)
{
        // here successfully. Function is hooked
    return pTrampolineCloseSocket(fd); // but here ACCESS_VIOLATION
} 
```

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:48:14.040

如果您可以自由选择挂钩技术，我推荐我们自己的挂钩引擎 Deviare，因为它自己处理挂钩复杂性（远程进程注入、参数解析、竞争条件），提供更高级别的编程接口。它可在[http://www.nektra.com/products/deviare-api-hook-windows/](http://www.nektra.com/products/deviare-api-hook-windows/)获得，希望它能加快您的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:38:46.147

根据程序其余部分的实现，您有一个潜在的竞争条件，您的钩子函数可以在`pTrampolineCloseSocket`设置之前被调用。`pTrampolineCloseSocket`当你崩溃时有什么价值？

# ruby-on-rails - 模型关系

> ID：11348166
> 
> 赞同：1
> 
> 时间：2012-07-05T15:58:52.827
> 
> 标签：ruby-on-rails, ruby

所以我在rails webapp上构建这个ruby。我有两个模型：课程和课程。课程有很多课程，课程属于课程。我的表格运行得很好，但我想做的是将 :course_id 传递给课程表格，以便能够跟踪课程所属的课程。（我在课程表中包含了 course_id 值。

基本上，我的问题是如何将课程的 :id 传递到课程表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:15:41.620

为什么不直接分配新`lesson`的课程 ID？

而不是做

```
@lesson = Lesson.new 
```

做

```
@lesson = Course.find(params[:course_id]).lessons.new 
```

或类似的东西。

**或更好）：**

```
@lesson = Course.find(params[:course_id]).lessons.build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:09:22.057

隐藏领域？

不确定您想在表单中使用此 course_id 做什么，但如果只是在提交时将其传回，请查看嵌套资源

# c# - 通过 .NET 发布到 Umbraco 后未出现的文章

> ID：11348171
> 
> 赞同：3
> 
> 时间：2012-07-05T15:59:05.917
> 
> 标签：c#, .net, umbraco, umbraco-blog

我有一个 .NET(C#) 脚本，它从 XML 文件中提取新闻文章。一切正常，但在发布它们并出现在网页上时，有些地方不太对劲。

这是到目前为止的代码：

```
 try {
                    newNode.Save();
                    newNode.Publish(User.GetUser(0));   //0 is default user
                }
                catch (Exception ex) {
                    // error message
                }
                umbraco.library.UpdateDocumentCache(newNode.Id); 
```

如您所见，我要发布的是 newNode。首先保存，然后通过具有发布权限的用户 0 发布，然后更新文档缓存。问题是它出现在 Umbraco 的后端，但文档链接只是一个井号 (#)，它不会显示在网页上。

谁能建议为什么这种发布方法不起作用？

**编辑：应该提到，我正在使用 Umbraco 4.7.1**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:24:51.543

如果`newNode`是您正在创建的节点的子节点，则需要在发布（和更新缓存）其子节点之前发布和更新父节点的文档缓存。无论如何，父节点需要事先发布。尝试在之前重新发布整个网站，如果仍然无法正常工作，则在之后重新发布。

**重新发布整个网站：**

1.  右键单击内容节点。
2.  从菜单中选择“重新发布整个站点”。
3.  单击“重新发布整个站点”按钮。

它应该非常快，因为所有这些都是重建 umbraco.config 缓存文件。

# facebook - 在新闻提要中的图标旁边显示应用名称

> ID：11348172
> 
> 赞同：1
> 
> 时间：2012-07-05T15:59:08.537
> 
> 标签：facebook, facebook-php-sdk

当我使用 facebook 上的应用程序发布帖子时，下面有一个小图标，旁边是点赞按钮。我想在该图标旁边添加应用程序名称或一些自定义文本。下面是一个 twitter 应用程序的截图，它符合我的意思。帖子使用开放图 API 发布。有任何想法吗？

![在此处输入图像描述](../Images/01e15cad2e2bbe86ca3bd65851615a82.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:14:12.180

这些称为操作，您可以通过将 JSON 对象数组作为参数发送到您的 post 调用来添加它们。

例子：

```
actions=[{'name':'@JemalaTony on Twitter', 'link':'http://twitter.com/#!/JemalaTony'}] 
```

来源：[图 API > 帖子](https://developers.facebook.com/docs/reference/api/post/)

# c# - 在 View on Demand 中渲染 PartialView

> ID：11348180
> 
> 赞同：0
> 
> 时间：2012-07-05T15:59:47.547
> 
> 标签：c#, asp.net-mvc-3, view, telerik, asp.net-mvc-partialview

该页面有 2 个下拉列表 + 一个文本框 + 一个提交按钮。

在提交时，它应该根据在第一个 DropDownList 中选择的值来选择并填充部分视图。我得到了一些工作；但是，它将始终在新窗口中返回 pv，而不是在主视图的 div 中呈现它。

我正在使用 MVC 3 + Telerik。

代码中最重要的部分：

**查看**- 更新

```
<script type="text/javascript">

    function onMainDDL1Change(e) {
        var combo = $("#SubDDL1").data("tComboBox");
        combo.value("");
        combo.reload();
    }

    function onSubDDL1DataBinding(e) {
        var combo = $("#MainDDL1").data("tComboBox");
        e.data = $.extend({}, e.data, { mainDDL1ID: combo.value() });
    }
</script>

@using (Ajax.BeginForm("PartialGrid", "DataSearch", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "result", InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace }))
{ 
<table>
    <tr>
        <td>
            @(Html.Telerik().ComboBox()
                .Name("MainDDL1")
                .AutoFill(true)
                .DataBinding(binding => binding.Ajax().Select("LoadMainDDL", "DataSearch"))
                .HighlightFirstMatch(true)
                .ClientEvents(events => events.OnChange("onMainDDL1Change"))
                )
        </td>
    </tr>    
    <tr>
        <td>
            @(Html.Telerik().ComboBox()
                .Name("SubDDL1")
                .DataBinding(binding => binding.Ajax().Select("LoadSubDDL1", "DataSearch"))
                .HighlightFirstMatch(true)
                .ClientEvents(events => events.OnDataBinding("onSubDDL1DataBinding"))
                )
        </td>
    <tr>
        <td>
            @Html.TextBoxFor(o => o.sSearch1)
        </td>
    </tr>
    <tr align="center">
        <td colspan="4">
        <input type="submit" class="t-button" value="Search" name="submit" />
        </td>
    </tr>
</table>
}

<div id="result">
</div> 
```

**控制器**- 更新

```
[HttpPost]
 //PartialView
    public PartialViewResult PartialGrid(DataSearchModel voModel)
    {
        voModel.dtResultSet1 = DLA.DataSearchContext.getResultSet1(voModel.MainDDL1, voModel.SubDDL1, voModel.sSearch1);
        return PartialView("_TPRCL", voModel);
    }

    //Initial View
    public ViewResult DataSearch(string text)
    {
        DataSearchModel oModel = new DataSearchModel();
        oModel.alMainDDL = DLA.DataSearchContext.getMainDDL();

        return View(oModel);
    } 
```

**部分视图**

```
 @model ISC.Utilities.GISTransactionTools.Models.DataSearchModel

 @(Html.Telerik().Grid(Model.dtResultSet1)
            .Name("Grid")
            .Footer(false)
            .Columns(columns =>
                {
                    columns.Bound(o => o.Row[0]).Title("T_PRCL");
                })) 
```

PartialView Grid 实际上有更多的列，这只是为了让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:46:41.707

我没有使用 Telerik，但这是我做类似事情的方式：

在初始视图中，我有以下代码：

```
 @using (Ajax.BeginForm("PhoneForm", "Home", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "form-lead", InsertionMode = InsertionMode.Replace, OnSuccess = "HookupValidation" })) {
        @Html.ValidationSummary(false, "Please address the following items:")

        <div class="phone">
            <div class="field">
                @Html.LabelFor(model => model.Phone1)
                @Html.EditorFor(model => model.Phone1)
                @Html.ValidationMessageFor(model => model.Phone1)
            </div>
            <div class="button">
                <input type="submit" value="Get Customer" name="submit" /></div>
        </div>

    }
    <div id="form-lead">
    </div> 
```

基本上，当单击“获取客户”按钮时，它将通过 AJAX 调用我的“主页”控制器中的“PhoneForm”方法。此方法生成局部视图，然后将其插入 (InsertionMode = InsertionMode.Replace) 到 (UpdateTargetId = "form-lead")。OnSuccess 函数只是为了确保客户端验证和 jQuery 事件连接到局部视图。如果您不这样做，则客户端验证或脚本都不适用于局部视图中的项目。

“PhoneForm”的控制器代码如下：

```
 [HttpPost]
    public PartialViewResult PhoneForm(string Phone1) {
        HomeViewModel viewModel = new HomeViewModel();

        // ... get data and set up view model here ... //
        // ... also choose which partial view you want to return ... //

        return PartialView("LeadInfoPartial", viewModel);
    } 
```

希望这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:51:43.957

好吧，让它在 Javascript 中工作。

**看法**

```
 <script type="text/javascript"> $('#btnSubmit').click(function () {
             var time = new Date().getTime(); // @* unique random number to workaround IE cache issue - IE will cache the ajax if you
 don't use this *@
             var oMainDDL1 = $('#MainDDL1').data("tComboBox");
             var oSubDDL1 = $('#SubDDL1').data("tComboBox");
             var sSearch1 = $("#Search1").val();

  var actionURL = '@Url.Action("getGrid1", "DataSearch", new { MainDDL1
 = "PLACEHOLDER" })'.replace('PLACEHOLDER', oMainDDL1.value()) + "&SubDDL1=" + oSubDDL1.value() + "&Search1=" + sSearch1 + "&time=" +
 time;
             if (actionURL != null) {
                 $.get(actionURL, function (data) {
                     $('#result1').fadeOut('slow', 'linear', function () { $('#result1').empty(); $('#result1').append(data); });
                     $('#result1').fadeIn('slow', 'linear', function () {
                         if ($.browser.msie) {
                             this.style.removeAttribute('filter'); // @* Needed to fix IE7 cleartype bug with jQuery fade, but will crap out
 on FF/Chrome *@
                         }
                     });
                 });
             }
         });
     }); </script>

             @(Html.Telerik().ComboBox()
                 .Name("MainDDL1")
                 .AutoFill(true)
                 .DataBinding(binding => binding.Ajax().Select("LoadMainDDL", "DataSearch"))
                 .HighlightFirstMatch(true)
                 .ClientEvents(events => events.OnChange("onMainDDL1Change"))
                 )

             @(Html.Telerik().ComboBox()
                 .Name("SubDDL1")
                 .DataBinding(binding => binding.Ajax().Select("LoadSubDDL1", "DataSearch"))
                 .HighlightFirstMatch(true)
                 .ClientEvents(events => events.OnDataBinding("onSubDDL1DataBinding"))
                 )

             @Html.TextBox("Search1")

 <input type="button" class="t-button button1" value="Search"
 id="btnSubmit" />

 <div id="result1"> </div> 
```

**控制器**

```
public PartialViewResult getGrid1(string MainDDL1, string SubDDL1, string Search1)
{
    DataSearchModel voModel = new DataSearchModel();
    voModel.dtResultSet1 = DLA.DataSearchContext.getResultSet1(MainDDL1, SubDDL1, Search1);
    return PartialView(MainDDL1, voModel);
}

public ViewResult DataSearch(string text)
{
    DataSearchModel oModel = new DataSearchModel();
    oModel.alMainDDL = DLA.DataSearchContext.getMainDDL();

    return View(oModel);
} 
```

# python - 具有特定颜色和图例位置的熊猫条形图？

> ID：11348183
> 
> 赞同：30
> 
> 时间：2012-07-05T15:59:54.960
> 
> 标签：python, legend, pandas

我有一只熊猫`DataFrame`，我想绘制一个包含图例的条形图。

```
import pylab as pl
from pandas import *

x = DataFrame({"Alpha": Series({1: 1, 2: 3, 3:2.5}), "Beta": Series({1: 2, 2: 2, 3:3.5})}) 
```

如果我直接调用 plot ，那么它会将图例放在图上方：

```
x.plot(kind="bar") 
```

如果我打开图中的图例并稍后尝试添加它，那么它不会保留与 DataFrame 中的两列关联的颜色（见下文）：

```
x.plot(kind="bar", legend=False)
l = pl.legend(('Alpha','Beta'), loc='best') 
```

在 Pandas DataFrame 的 matplotlib 图中包含图例的正确方法是什么？ ![在此处输入图像描述](../Images/99f655a3c98acb6a6ca0c39a4f0dff65.png)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-03-07T16:25:55.740

最简洁的方法是：

```
x.plot(kind="bar").legend(bbox_to_anchor=(1.2, 0.5)) 
```

或一般来说

```
x.plot(kind="bar").legend(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-08T16:16:39.380

如果要手动添加图例，则必须向子图询问条形图的元素：

```
In [17]: ax = x.plot(kind='bar', legend=False)

In [18]: patches, labels = ax.get_legend_handles_labels()

In [19]: ax.legend(patches, labels, loc='best')
Out[19]: <matplotlib.legend.Legend at 0x10b292ad0> 
```

此外，`plt.legend(loc='best')`或者`ax.legend(loc='best')`应该“正常工作”，因为在制作绘图时已经设置了条形图补丁的“链接”，因此您不必传递轴标签列表。

我不确定您使用的 pandas 版本是否返回子图（`ax = ...`）的句柄，但我相当肯定 0.7.3 确实如此。您始终可以使用`plt.gca()`.

# android - 蜂窝日历访问

> ID：11348185
> 
> 赞同：1
> 
> 时间：2012-07-05T15:59:56.597
> 
> 标签：android, calendar, android-3.0-honeycomb

我正在开发一个应用程序，在 Android 日历中插入每周提醒。该应用程序已经过测试，可以在 Android 2.3.* 和 4.0 设备上更新日历。

我知道 Android 4.0 正式化了日历提供程序 API，并且在此之前的版本中，解决方案是“非官方的”。出于这个原因，我开发了两种实现，一种用于 ICS 及更高版本，一种用于 ICS 之前的版本。

我的代码在 Android 2.3.* 和 >= 4.0 设备上运行良好。但是，我在使用 Honeycomb 平板电脑时遇到了困难。有了这些，我得到一个“无法找到日历的提供者信息”。

任何知道的人都可以指出 2.3 和 Honeycomb 在访问日历方面的区别，以便我可以让我的应用程序在 Honeycomb 上运行吗？

# facebook - 从流表中检索链接的大尺寸图像

> ID：11348192
> 
> 赞同：0
> 
> 时间：2012-07-05T16:00:15.667
> 
> 标签：facebook, facebook-fql

我们需要在 iOS 设备上显示用户朋友在墙上共享的链接的高分辨率图像。为此，我们对流表进行选择，包括请求中的“附件”字段。从“附件”数组中，我们得到“媒体”字典。之后，从“媒体”字典中，src 键为我们提供了缩略图的值。

对于链接，src 提供的图像尺寸通常很小，很难很好地呈现该尺寸的数据。

我的问题是：

有没有其他方法可以检索朋友在墙上分享的链接的大尺寸图像？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:00:38.367

如果您只是从 Graph API 中检索帖子的信息，其中有一个字段`picture`，包含这样的链接，

> HTTPS; // fbexternal-a.akamaihd.net/safe_image.php d = AQDkuCdvs9FkPGT_＆W = 90＆H = 90＆URL = HTTP \ u00253A \ u00252F \ u00252Fwww.faz.net \ u00252Fpolopoly_fs \ u00252F1.1809933.1341414925 \ u002521 \ u00252Fimage \ u00252F2222140031.jpg_gen \ u00252Fderivatives\u00252Farticle_top_teaser\u00252F2222140031.jpg

应该很容易从中提取原始图像 URL - 然后您可以尝试获取它，希望它是一个更大的版本。

# c++ - 2D游戏地图移动

> ID：11348193
> 
> 赞同：0
> 
> 时间：2012-07-05T16:00:18.843
> 
> 标签：c++, map, game-loop

我有一个 2d 随机生成的地图，用于由存储在 30 个数组中的块（正方形 40 乘 40）组成的平台游戏，我有一个推送功能来移动块，推送更改 xpos 以及我在数组上的位置仅在阵列上绘制 5-25 位置。

当我移动时，我只会在屏幕的前半部分移动角色。所以中间部分和屏幕的 0xpos 之间存在碰撞，现在我遇到的问题是移动块。

我想不出一种方法来移动它们，让它看起来很自然。关于如何做的任何想法？到目前为止，我拥有它，因此每次角色与屏幕的一侧碰撞时，它相当于 40 像素的速度，它会推动一个块并随机生成另一个块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:08:41.980

通过使用一些物理引擎可以更好地实现这种效果。看看[这个](http://code.google.com/p/box2d/)例子。这样的引擎确实简化了游戏开发的现场，其结果总是值得努力学习如何使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:28:47.363

与其尝试通过数组移动所有块，不如使用标准队列更容易。

[http://www.cplusplus.com/reference/stl/queue/](http://www.cplusplus.com/reference/stl/queue/)

使用这种方法，您只需要处理屏幕上块的移动，并且可以在不再需要时从队列前面移除块，在末尾添加另一个块。

# php - 从 PHP 连接到 SQL Server 2008

> ID：11348197
> 
> 赞同：1
> 
> 时间：2012-07-05T16:00:32.103
> 
> 标签：php, sql-server, sql-server-2008

使用 Microsoft 的 PHP 驱动程序，我们无法使用 Windows 身份验证或 SQL Server 身份验证进行连接。我们使用以下 PHP 代码：

```
$serverName =  "(A\B)";
$connectionInfo = array( "UID"=>"u1",
                         "PWD"=>"p1",
                         "Database"=>"db1"); 

$conn = sqlsrv_connect( $serverName, $connectionInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:03:17.987

简而言之，php sql server 的东西很糟糕。

唯一可靠的解决方案（对于一个非常复杂的项目，我不得不在这里使用 SQL Server 2008）是使用 PHP ADODB。

# java - 如何在 JFrame 中显示不同的组件？

> ID：11348201
> 
> 赞同：1
> 
> 时间：2012-07-05T16:00:45.663
> 
> 标签：java, swing, jframe, awt, actionlistener

我对 Java AWT 很陌生。我的问题标题对您来说一定很荒谬，对此感到抱歉。在我的应用程序中，我有三个按钮，单击它们会显示不同的线程。现在我想在单击特定按钮时添加一个按钮或复选框或选择列表等。例如，如果我单击是按钮，它应该显示一个选择列表，类似的东西。我如何实现这样的目标？到目前为止，这是我的代码：

```
import java.awt.Button;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

public class AppWindow extends Frame implements ActionListener{
    String keymsg = "Test message";
    String mousemsg = "Nothing";
    int mouseX=30, mouseY=30;
    String msg;
    public AppWindow(){
        //addKeyListener(new MyKeyAdapter(this));
        //addMouseListener(new MyMouseAdapter(this));
        addWindowListener(new MyWindowAdapter());
    }

    public void paint(Graphics g){
        g.drawString(msg, 150, 100);
    }

    //Here the window is created:

    public static void main(String args[]){
        AppWindow appwin = new AppWindow();

        appwin.setSize(new Dimension(300,200));
        appwin.setTitle("My first AWT Application");
        appwin.setLayout(new FlowLayout(FlowLayout.LEFT));
        appwin.setVisible(true);

        Button yes,no,maybe;
        yes = new Button("yes");
        no = new Button("no");
        maybe = new Button("maybe");

        appwin.add(yes);
        appwin.add(no);
        appwin.add(maybe);

        yes.addActionListener(appwin);
        no.addActionListener(appwin);
        maybe.addActionListener(appwin);

    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        // TODO Auto-generated method stub
        String str = ae.getActionCommand();
        if(str.equals("yes")){
            msg = "You pressed Yes";
        }
        if(str.equals("no")){
            msg = "You pressed No";
        }
        if(str.equals("maybe")){
            msg = "You pressed Maybe";
        }

        repaint();
    }

}

class MyWindowAdapter extends WindowAdapter {
    public void windowClosing(WindowEvent we){
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:08:49.993

我不知道我是否很好地理解了这个问题，但是......你不能创建这些元素并调用它们的 setVisible(boolean) 方法以使它们一开始不可见，并且当用户按下按钮时它们使它们可见？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:14:20.620

描述你应该做什么的要点：

*   正如其他人已经提到的，最好使用 Swing 而不是 AWT，因为 Swing 更高级。
*   尽可能地，总是尝试`Paint`在 a`JPanel`或 a 之上`JComponent`，而不是`Painting`在你的之上`JFrame`，通过覆盖上述的[paintComponent(Graphics g)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)方法 `JComponent/JPanel`
*   永远不要调用直到，除非它`setVisible(true)`的`JFrame`大小已经确定。所以一般来说，这必须是最后一次调用，一旦你完成向 LayoutManager 添加组件`JFrame`并且 LayoutManager 的大小`JFrame`已经实现。
*   在你的里面`actionPerformed(...)`，而不是写所有`if statement blocks`，你应该坚持`if-else if statement blocks`。与前者相比，这样做的好处是，在任何给定时间，只会触发一个事件，因此一旦满足上述条件，您不希望您的代码继续检查其他条件，这通常不是一个很好的编程习惯，恕我直言。
*   **最重要的事情：**永远不要在 main 方法中进行像 pack()/setVisible(...) 这样的调用，这样的调用属于 Event Dispatch Thread，并且必须在同一个方法上进行。有关更多详细信息，请阅读[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

看一下示例程序，以便更好地理解。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ComponentExample
{
    private CustomPanel drawingBoard;
    private JPanel contentPane;
    private JButton yesButton;
    private JButton noButton;
    private JButton maybeButton;
    private JComboBox cbox;
    private ActionListener buttonAction = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            JButton button = (JButton) ae.getSource();

            if (cbox.isShowing())
                    contentPane.remove(cbox);

            if (button == yesButton)
            {
                drawingBoard.setText("You Pressed YES.");           
                contentPane.add(cbox, BorderLayout.PAGE_END);               
            }
            else if (button == noButton)
                drawingBoard.setText("You Pressed NO.");
            else if (button == maybeButton)
                drawingBoard.setText("You Pressed MAYBE.");             

            /*
             * revalidate()/repaint() is needed
             * when the JComponent is added or
             * removed from the already 
             * visible Container.
             */
            contentPane.revalidate();
            contentPane.repaint();
        }
    };

    public ComponentExample()
    {
        cbox = new JComboBox(
                    new String[]{"I GOT IT"
                               , "I STILL HAD DOUBT"});
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Component Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBackground(Color.DARK_GRAY);
        contentPane.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(5, 5));

        JPanel buttonPanel = new JPanel();
        buttonPanel.setOpaque(true);
        buttonPanel.setBackground(Color.WHITE);

        yesButton = new JButton("YES");
        yesButton.addActionListener(buttonAction);
        noButton = new JButton("NO");
        noButton.addActionListener(buttonAction);
        maybeButton = new JButton("MAY BE");
        maybeButton.addActionListener(buttonAction);
        buttonPanel.add(yesButton);
        buttonPanel.add(noButton);
        buttonPanel.add(maybeButton);

        contentPane.add(buttonPanel, BorderLayout.PAGE_START);

        drawingBoard = new CustomPanel();
        contentPane.add(drawingBoard, BorderLayout.CENTER);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ComponentExample().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private String msg;

    public CustomPanel()
    {
        msg = "";
        setOpaque(true);
        setBackground(Color.WHITE);
    }

    public void setText(String msg)
    {
        this.msg = msg;
        repaint();
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(300, 300));
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawString(msg, getWidth() / 3, getHeight() / 3);
    }
} 
```

# mysql - Mysql 查询 - 在 case 语句中使用 Locate 函数按来源对流量进行分组

> ID：11348203
> 
> 赞同：2
> 
> 时间：2012-07-05T16:00:53.087
> 
> 标签：mysql, sql, select, case

我基本上是在尝试根据流量来源对流量进行分组

假设该表具有以下列

```
注册_ID | 最后修改 | 推荐人
     1 | 2012-07-01 15:00:00 | http://www.facebook.com/l.php?xyz
     2 | 2012-07-01 16:00:00 | http://www.facebook.com/l.php?abc

```

现在推荐人是不同的 - 所以即使我按推荐人分组 - 它不会说 2 所以这是我使用的查询

```
select count(*) as 'Enrollments',date_format(e.last_modified,'%d/%m/%y') as 'Date', if(LOCATE('facebook', referrer)>0,'facebook',referrer ) 作为“推荐人”
从入学 e
其中 e.last_modified >='2012-07-01 00:00:00'
按日期格式分组(e.last_modified,'%d/%m/%y'),3

```

这工作正常。但显然我会有不止一个推荐人。所以我想到了使用case语句

```
选择 count(*) 作为 'Enrollments'，date_format(e.last_modified,'%d/%m/%y') 作为 'Date'，
案例推荐人
当 LOCATE('facebook', referrer)>0 然后 'facebook'
当 LOCATE('google', referrer)>0 然后 'google'
其他推荐人
以“推荐人”结尾
从入学 e
其中 e.last_modified >='2012-07-01 00:00:00'
按日期格式分组(e.last_modified,'%d/%m/%y'),3

```

这不能按预期工作。

对于第一个和第二个查询 - 我创建了一个 sql fiddle

首先 - [http://sqlfiddle.com/#!2/70f6b/2](http://sqlfiddle.com/#!2/70f6b/2)

第二 - [http://sqlfiddle.com/#!2/ad890/3](http://sqlfiddle.com/#!2/ad890/3)

如果有人可以快速浏览一下，我将不胜感激

谢谢你的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:12:12.013

我从不使用 MySQL，但我习惯于在其他数据库中有两种类型的 CASE 语句，你似乎试图混合使用它们。

一种

```
CASE <Field Name>
WHEN <value>... 
```

乙

```
CASE
WHEN <condition>... 
```

因此，只需删除您对referrer 的第一次引用，您的查询可能会起作用：

```
case
  when LOCATE('facebook', referrer)>0 then 'facebook' 
  when LOCATE('google', referrer)>0 then 'google' 
else referrer
end as 'referrer' 
```

另一件事是尝试将引荐来源网址拆分为多个字段可能会更简洁，其中一个字段是互联网地址。

# windows - perl windows IPv6

> ID：11348206
> 
> 赞同：3
> 
> 时间：2012-07-05T16:00:56.877
> 
> 标签：windows, perl, ipv6

我有一个使用 TCP/IP 套接字的 Perl/Windows 应用程序，我需要添加 IPv6 支持。

我有一台 Windows 7 64 位机器，它运行带有 Hurricane Electric 隧道的 IPv6，它在[http://test-ipv6.com/](http://test-ipv6.com/)上的得分为 10 分（满分 10 分），并且将访问仅限 IPv6 的站点，例如[http://loopsofzen。 co.uk/](http://loopsofzen.co.uk/) .

它有 ActivePerl 5.14.2（我也试过草莓 Perl 5.16.0.1）。

这是一个简单的测试脚本：

```
use Socket qw( getaddrinfo );
$host = 'loopsofzen.co.uk';
$port = 80;
$hints = (socktype => SOCK_STREAM, family -> Socket::AF_INET6);
($err, @addrs) = getaddrinfo($host, 0);
die $err if $err; 
```

这会产生错误：

```
no address associated with nodename at ip.pl line 6. 
```

（新）`getaddrinfo()`功能似乎可用，如果我设置`$host`为使用 IPv4 主机名，它确实有效。但是 IPv6 似乎根本不起作用。

我错过了什么？还是 Perl/Windows/IPv6 暂时还是一个失败的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:23:13.890

以下“适用于我”在 OSX 上，可以成功`ping -6 loopsofzen.co.uk`.

```
$ perl -lE'use Socket qw( getaddrinfo );
   ($err, @addrs) = getaddrinfo(q{loopsofzen.co.uk}, 0);
   die $err if $err; print map { "@{[ %$_ ]}" } @addrs;'
protocol 17 canonname  addr ?? socktype 2 family 30protocol 6 canonname  addr ?? socktype 1 family 30 
```

我认为您的问题不是 Perl 位，因为相同的代码适用于我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:38:27.980

因此，我将 Linux (Ubuntu) 的副本扔到一台旧笔记本电脑上，同样的代码也能正常工作。

似乎存在 IPv6 支持，但在 Windows 上的 ActivePerl 和 Strawberry Perl 中被破坏了。

有人建议用于制作 Windows 版本的编译器头文件和库尚未针对 IPv6 进行更新。希望这将在适当的时候得到解决。与此同时，我可以继续在 Linux 上进行开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:58:09.467

您可以在 Windows 上从源代码编译您自己的 Perl 5.16。

我使用“Visual Studio x64 Win64 命令提示符（2010）”在 VC10（Microsoft Visual Studio 2010）上完成了它。它基本上是常规命令提示符，但为 x64 构建准备了所有环境。

我认为有一些 Visual Studio 的“快速”免费版本，但我不知道与商业版本相比是否缺少一些东西。

我在构建 Perl 时真的没有遇到任何问题，只需阅读 README 和 INSTALL 文件即可。实际上，我对 Apache 2.2、mod_perl 以及我从源代码中使用/需要的 CPAN 中的所有模块都做了同样的事情。如果您从同一个 VS 命令提示符运行 cpan 和 cpanm 之类的东西，只要模块与 Win32 兼容（95% 的模块兼容），一切都会构建得很好。

“getaddrinfo”功能对我来说非常有效。

# ruby-on-rails - 模型中的范围声明不起作用

> ID：11348208
> 
> 赞同：1
> 
> 时间：2012-07-05T16:01:01.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Ruby on Rails 3，并在我的对象类中创建了一些范围，但是当我从我的代码中调用它们时，它返回一个错误：

> irb>Transaction.first.committed
> 
> => 未定义的方法 `commited' for #

对象类：

> 类事务 < ActiveRecord::Base
> 
> ```
>  attr_accessible :amount, :description, :published, :task_description_id, :discrete_task_id, :transaction_type
> 
>  belongs_to :discrete_task
> 
>  scope :committed, where(:transaction_type => "committed")
> 
>  scope :obligated, where(:transaction_type => "obligated")
> 
>  scope :expensed, where(:transaction_type => "expensed") 
> ```
> 
> 结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:06:52.057

您不能在单个 Transaction 对象（实例）上调用范围（类方法）。

你必须这样做：

```
Transaction.committed 
```

你得到一个`ActiveRelation`（本质上是一个`Array`，但你可以在它上面调用其他作用域）。

无论如何，你希望`Transaction.first.committed`做什么？您将有一个对象，然后您会尝试找到它`transaction_type`“提交”的位置。您已经拥有该对象，因此您将调用它的`#transaction_type`方法。

范围将带回*所有*事务类型为已提交的事务对象。如果您想要一个*实例*方法来告诉您是否提交了*单个*对象，那么您必须创建一个实例方法，例如：

```
def committed?
  transaction_type == "committed"
end 
```

然后你可以写：

```
Transaction.first.committed? # => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:08:42.610

`Transaction.first`将返回一个`Transaction`对象，因此您无法调用`where`它。尝试：

```
Transaction.committed.first 
```

# c - 出错时退出 C 代码到 R

> ID：11348210
> 
> 赞同：2
> 
> 时间：2012-07-05T16:01:04.133
> 
> 标签：c, r

在发现错误返回 R 时退出 C 代码的最佳实践是什么？包指南说不要使用`exit()`，这是有道理的（当你杀死所有东西时），但你如何退出到 R 并指示发生了错误。显然你可以在返回向量中有一个错误标志，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:32:18.577

你正在寻找`error()`. 它在[编写 R 扩展的](http://cran.r-project.org/doc/manuals/R-exts.html)[第 6.2 节](http://cran.r-project.org/doc/manuals/R-exts.html#Error-handling)中有描述……你应该更经常地倾听你的潜意识。;-)

# select - Alfresco Share 约束默认空值

> ID：11348211
> 
> 赞同：1
> 
> 时间：2012-07-05T16:01:13.663
> 
> 标签：select, constraints, share, alfresco

我有一个简单的问题。是否有可以编辑的简单配置文件或行以实现此目的：我需要来自 Alfresco 内容模型的约束在高级搜索和编辑元数据表单中有一个空字段（如“未选择”）。所以一个约束：

```
<constraint name="custom:customList" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>first type</value>
                    <value>second type</value>
                </list>
            </parameter>
        </constraint> 
```

我需要以“SELECT”形式查看这些，但第一个选择为空，例如：

```
 <select>
          <value></value>
          <value>first type</value>
          <value>second type</value>
   </select> 
```

希望我说清楚了。PS 我不想在自定义内容模型 XML 文件中插入一个。应该有另一种方法来实现这一点。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:21:51.720

您需要覆盖表示逻辑，即自定义或创建新的表单控件模板。默认的在[selectone.ftl](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/web-framework-commons/config/alfresco/site-webscripts/org/alfresco/components/form/controls/selectone.ftl)中实现，您可以自定义它或从它开始为一个全新的控件模板，您可以稍后将其[分配给表单配置中的元数据字段](http://wiki.alfresco.com/wiki/Forms_Examples#Providing_A_Custom_Form_Template)。

# javascript - 在 ASP.NET 中弹出注册表单

> ID：11348213
> 
> 赞同：0
> 
> 时间：2012-07-05T16:01:35.863
> 
> 标签：javascript, asp.net, ajax, jquery

我想在我的 ASP.NET 页面中为注册表单使用 ajax 弹出窗口。得到这个的最好方法是什么。我怎样才能在不刷新页面的情况下更新我的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:03:51.323

如果您使用的是 ASP.NET WebForms，我建议您使用 AJAX 控件工具包中的[ModalPopup](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)来显示[UpdatePanel](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)的内容。

# facebook - 如何使用 node.js 发送 facebook api 批处理请求

> ID：11348214
> 
> 赞同：0
> 
> 时间：2012-07-05T16:01:36.097
> 
> 标签：facebook, node.js, batch-processing

如何使用 node.js 发送 facebook api 批处理请求？

FB的例子不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:01:37.657

但我终于让 danwong/restler.js 像这样工作：

```
exports.updateUserFriends = function (userData, next) {
    var TOKEN = userData[1];
    var fbID = userData[3].id;
    var batchreq = {};
    batchreq.batch = [];
    batchreq.batch.push({"method":"GET", "relative_url":fbID+"/"});
    batchreq.batch.push({"method": "GET", "relative_url":fbID+"/friends?limit=50"});
    restler.post('https://graph.facebook.com?access_token='+TOKEN, 
                  {data:"batch="+JSON.stringify(batchreq.batch)})
                  .on('complete', function(data) {
               console.log(data);
               return next;
    });
}; 
```

所以我想我会发布这个来拯救别人一点挫败感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T09:38:35.417

首先要注意的是，FB Api 中的“批量请求只允许 POST”。

```
var https = require('https');
var url = '/?access_token='+ YOUR_ACCESS_TOKEN_HERE,
batch=[{

 "method":"GET",
 "relative_url":page + "/insights"

  }, {

  "method": "GET",
  "relative_url":page 

}];

  url = url + '&batch=' + JSON.stringify(batch);

  console.log(url);

var options = {
      host:'graph.facebook.com',
      path:url,
      method: 'POST'
   };

 var req =https.request(options, function(res){
   console.log('STATUS: ' + res.statusCode);
   console.log('HEADERS: ' + JSON.stringify(res.headers));
   res.setEncoding('utf8');
   var body='';
   res.on('data', function(chunk){
  // console.log("body:" + chunk);
  body += chunk;

    });
   res.on('end', function(){
      var fbRes = JSON.parse(body);
      console.log(fbRes);
   });
});

 req.on('error', function(e) {
      console.log('problem with request: ' + e.message);

 });

 req.end(); 
```

# objective-c - Obj-c / Cocoa 中的互斥锁

> ID：11348217
> 
> 赞同：4
> 
> 时间：2012-07-05T16:01:42.647
> 
> 标签：objective-c, multithreading, cocoa, locking, mutex

我对多线程编程和可可很陌生。

我需要一把锁来访问/修改`NSMutableArray`iVar。最简单的方法是什么？

当我在这里的时候，你们有一些关于使用 Obj-c/Cocoa 进行多线程编程的读物吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T16:03:16.973

使用`@synchronized`块：

```
@synchronized(MyArray)
{
    // thread safe code
} 
```

Xcode 有时无法识别此块，但相信我，它有效！

有关更多信息，您可以阅读[这篇](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:36:59.700

另一种方法是使用 GCD 和串行队列。

对于您的 NSArray 属性，写入使用私有串行队列的访问器。设置并从后备存储中获取值。由于串行队列是先进先出的，并且将顺序运行块，这提供了对属性的线程安全访问。

# qt - QListView 放置指示器样式

> ID：11348219
> 
> 赞同：5
> 
> 时间：2012-07-05T16:01:44.847
> 
> 标签：qt, drag-and-drop, qlistview, qtstylesheets

我`QListView`用来显示可以拖放以更改其顺序的项目列表。问题是：

*   下降指示器只是一条很小的线（1px 粗细）
*   放置区域非常狭窄，因此需要非常准确才能在其他两个项目之间正确放置一个项目。

我想知道是否可以更改下降指示器的样式，`QListView`使线条更粗，下降区域更宽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T07:15:47.773

可以使用 QStyle 更改放置指示器的样式。`QStyle::PE_IndicatorItemViewItemDrop`枚举值对应于它，可用于设置指示器的样式，该指示器被绘制以显示在项目视图中的拖放操作期间项目视图中的项目将要被放置的位置

# java - getCurrentSession 给出 No Session Bound to Context，openSession 没有

> ID：11348223
> 
> 赞同：1
> 
> 时间：2012-07-05T16:01:54.087
> 
> 标签：java, spring, hibernate

我正在尝试将 Spring 3.1 与 Hibernate 4.1.4 集成，但在从通用 DAO 获取会话时遇到问题。

问题是，如果我使用 getCurrentSession() 我得到一个 NullPointerException 并且 Hibernate 说没有会话绑定到上下文，但是如果我使用 openSession 一切似乎都在工作。不知何故，我觉得我应该使用 getCurrentSession，但找不到问题的根源。

我已经在互联网上搜索了这个，但没有一个解决方案对我有用。

这是我的通用 DAO 代码：

```
public class GenericDaoHibernateImpl<E, PK extends Serializable> implements GenericDao<E, PK> {

    private Class<E> entityClass;

    protected GenericDataBaseExceptionHandler exceptionHandler;

    private SessionFactory sessionFactory;  

    @SuppressWarnings("unchecked")
    public GenericDaoHibernateImpl() {
        this.entityClass = (Class<E>) ((ParameterizedType) getClass().
            getGenericSuperclass()).getActualTypeArguments()[0];
    }

    public void setExceptionHandler(GenericDataBaseExceptionHandler exceptionHandler) {
        this.exceptionHandler = exceptionHandler;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    protected Session getSession() {
        if (sessionFactory.getCurrentSession() == null)
            throw new IllegalStateException("Session has not been set on DAO before usage");
        return sessionFactory.getCurrentSession(); //This crashes
//      return sessionFactory.openSession(); //This does not
    }

    public Class<E> getEntityClass() {
        return entityClass;
    }

    public void persist(E entity) throws GenericDataBaseException {
        try {
            getSession().persist(entity);       
        } catch (Throwable t) {
            Collection<Object> args = new ArrayList<Object>();
            args.add(entity);
            throw exceptionHandler.handle(t, "persist", args);
        }
    }
    (...)

} 
```

还有我的弹簧配置文件：

```
 <context:annotation-config />
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass">
            <value>com.mysql.jdbc.Driver</value>
        </property>
        <property name="jdbcUrl">
            <value>jdbc:mysql://localhost/forestool</value>
        </property>
        <property name="user">
            <value>forestool</value>
        </property>
        <property name="password">
            <value>forestool</value>
        </property>
    </bean>

    <!-- Declaración de la factoría de sesiones hibernate con los mappings necesarios -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource"/>
        </property>
        <property name="mappingLocations">
            <list>
                <value>classpath*:/hbm/*.hbm.xml</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <ref bean="hibernateProperties"/>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
     <property name="sessionFactory">
         <ref bean="sessionFactory"/>
     </property>
    </bean>
<bean id="hibernateProperties" class="java.util.Properties">
    <constructor-arg index="0">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
        </props>
    </constructor-arg>
</bean> 
```

例外：

```
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041)
    at es.fsc.core.dao.impl.GenericDaoHibernateImpl.getSession(GenericDaoHibernateImpl.java:83)
    at es.fsc.core.dao.impl.GenericDaoHibernateImpl.findAll(GenericDaoHibernateImpl.java:244)
    at es.fsc.dao.explotacion.impl.ExplotacionDaoImpl.getExplotacionesAbiertas(ExplotacionDaoImpl.java:21)
    at es.fsc.service.explotacion.impl.ExplotacionServiceImpl.getExplotacionesAbiertas(ExplotacionServiceImpl.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy5.getExplotacionesAbiertas(Unknown Source)
    at es.fsc.app.FscApp.runApp(FscApp.java:58)
    at es.fsc.app.App.run(App.java:65)
    at es.fsc.main.Main.main(Main.java:20)
Exception in thread "main" java.lang.NullPointerException
    at es.fsc.core.dao.impl.GenericDaoHibernateImpl.findAll(GenericDaoHibernateImpl.java:253)
    at es.fsc.dao.explotacion.impl.ExplotacionDaoImpl.getExplotacionesAbiertas(ExplotacionDaoImpl.java:21)
    at es.fsc.service.explotacion.impl.ExplotacionServiceImpl.getExplotacionesAbiertas(ExplotacionServiceImpl.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy5.getExplotacionesAbiertas(Unknown Source)
    at es.fsc.app.FscApp.runApp(FscApp.java:58)
    at es.fsc.app.App.run(App.java:65)
    at es.fsc.main.Main.main(Main.java:20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:19:47.277

我在这个配置中看不到任何实际上会为您打开 Hibernate 会话或控制何时完成的东西。

如果您是 Spring 新手，您可能只想在您的[OpenSessionInViewFilter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)`web.xml`中配置一个 Session 打开并自动绑定到每个请求。

# ios - iOS - UISlider 的自定义图像

> ID：11348225
> 
> 赞同：7
> 
> 时间：2012-07-05T16:02:04.757
> 
> 标签：ios, customization, uislider

我想为 UISlider 轨道使用图像。我不希望拇指左边有一种颜色，右边有另一种颜色。我只想在整个轨道上放一张静态图像。可能的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T17:28:42.167

要将图像设置为滑块，您可以使用**setMinimumTrackImage**、**setMaximumTrackImage**方法。根据您的要求，将两者都设置为相同的图像。

**iOS 5 及以下**

```
UIImage *sliderTrackImage = [[UIImage imageNamed: @"Slider.png"] stretchableImageWithLeftCapWidth: 7 topCapHeight: 0];

[mySlider setMinimumTrackImage: sliderTrackImage forState: UIControlStateNormal];
[mySlider setMaximumTrackImage: sliderTrackImage forState: UIControlStateNormal]; 
```

**iOS 5+**

```
UIImage *sliderTrackImage = [[UIImage imageNamed:@"Slider.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 7, 0, 0)];

[mySlider setMinimumTrackImage: sliderTrackImage forState: UIControlStateNormal];
[mySlider setMaximumTrackImage: sliderTrackImage forState: UIControlStateNormal]; 
```

有关更多信息，请查看以下链接：

1.  [用户界面定制教程](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)
2.  [http://jasonlawton.com/blog/customizing-uislider-in-iphone/](http://jasonlawton.com/blog/customizing-uislider-in-iphone/)
3.  [自定义 UISlider](https://stackoverflow.com/questions/8016496/customize-uislider-track-image-height)
4.  [滑块图像](https://stackoverflow.com/questions/2379326/change-iphone-uislider-bar-image)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-22T06:04:06.870

```
[[UISlider appearance] setThumbImage:[UIImage imageNamed:@"ball.png"] forState:UIControlStateNormal];
[slider setMinimumTrackImage:[[UIImage imageNamed:@"volume_slider_oragne.png"] stretchableImageWithLeftCapWidth:0.3 topCapHeight:0.0] forState:UIControlStateNormal];
[slider setMaximumTrackImage:[[UIImage imageNamed:@"volume_strap_gry.png"] stretchableImageWithLeftCapWidth:0.3 topCapHeight:0.0] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:28:28.567

只需将两侧设置为相同的图像。如果您想要两端的圆角，您可能想要制作两个具有相同颜色/图案的单独图像。

# c# - 从 xml 文件中获取节点

> ID：11348229
> 
> 赞同：6
> 
> 时间：2012-07-05T16:02:23.853
> 
> 标签：c#, xml, winforms

如何解析xml文件？

```
<?xml version="1.0" encoding="UTF-8"?>
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> 
<sitemap> 
    <loc>link</loc>
    <lastmod>2011-08-17T08:23:17+00:00</lastmod> 
</sitemap> 
<sitemap>
    <loc>link</loc> 
    <lastmod>2011-08-18T08:23:17+00:00</lastmod> 
</sitemap> 
</sitemapindex> 
```

我是 XML 新手，我试过这个，但它似乎不起作用：

```
 XmlDocument xml = new XmlDocument(); //* create an xml document object. 
        xml.Load("sitemap.xml");
        XmlNodeList xnList = xml.SelectNodes("/sitemapindex/sitemap");
        foreach (XmlNode xn in xnList)
        {
            String loc= xn["loc"].InnerText;
            String lastmod= xn["lastmod"].InnerText;
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T16:16:36.657

问题是该`sitemapindex`元素定义了一个默认命名空间。选择节点时需要指定命名空间，否则找不到。例如：

```
XmlDocument xml = new XmlDocument();
xml.Load("sitemap.xml");
XmlNamespaceManager manager = new XmlNamespaceManager(xml.NameTable);
manager.AddNamespace("s", "http://www.sitemaps.org/schemas/sitemap/0.9");
XmlNodeList xnList = xml.SelectNodes("/s:sitemapindex/s:sitemap", manager); 
```

通常来说，使用 时`XmlNameSpaceManager`，您可以将前缀保留为空字符串，以指定您希望该命名空间成为默认命名空间。所以你会认为你可以做这样的事情：

```
// WON'T WORK
XmlDocument xml = new XmlDocument();
xml.Load("sitemap.xml");
XmlNamespaceManager manager = new XmlNamespaceManager(xml.NameTable);
manager.AddNamespace("", "http://www.sitemaps.org/schemas/sitemap/0.9"); //Empty prefix
XmlNodeList xnList = xml.SelectNodes("/sitemapindex/sitemap", manager); //No prefixes in XPath 
```

但是，如果您尝试该代码，您会发现它找不到任何匹配的节点。原因是在 XPath 1.0（这是 XmlDocument 实现的）中，当没有提供命名空间时，它总是使用空命名空间，而不是默认命名空间。因此，无论您是否在 中指定默认名称空间，`XmlNamespaceManager`XPath 都不会使用它。引用[Official XPath Specification](http://www.w3.org/TR/xpath/#node-tests)中的相关段落：

> 使用来自表达式上下文的命名空间声明将节点测试中的 QName 扩展为扩展名称。这与对开始和结束标记中的元素类型名称进行扩展的方式相同，只是不使用使用 xmlns 声明的默认命名空间：**如果 QName 没有前缀，则命名空间 URI 为空**（这是相同的方式属性名称被扩展）。如果 QName 具有在表达式上下文中没有名称空间声明的前缀，则这是一个错误。

因此，当您正在阅读的元素属于某个名称空间时，您无法避免将名称空间前缀放在您的 XPath 语句中。但是，如果您不想费心将命名空间 URI 放入代码中，则可以只使用该`XmlDocument`对象返回根元素的 URI，在这种情况下，这就是您想要的。例如：

```
XmlDocument xml = new XmlDocument();
xml.Load("sitemap.xml");
XmlNamespaceManager manager = new XmlNamespaceManager(xml.NameTable);
manager.AddNamespace("s", xml.DocumentElement.NamespaceURI); //Using xml's properties instead of hard-coded URI
XmlNodeList xnList = xml.SelectNodes("/s:sitemapindex/s:sitemap", manager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:12:40.887

站点地图有 2 个子节点“loc”和“lastmod”。您正在访问的节点是“名称”和“网址”。这就是为什么你没有得到任何结果。同样在您的 XML 文件中，最后一个站点地图标签未正确关闭相应的请尝试 xn["loc"].InnerText 并查看是否获得所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:17:33.317

我肯定会使用 LINQ to XML 而不是旧的基于 XmlDocument 的 XML API。您可以使用以下代码完成您想要做的事情。请注意，我将尝试获取值的元素的名称更改为“loc”和“lastmod”，因为这是您的示例 XML 中的内容（“name”和“url”不存在）：

```
XElement element = XElement.Parse(XMLFILE);
        IEnumerable<XElement> list = element.Elements("sitemap");
        foreach (XElement e in list)
        {
            String LOC= e.Element("loc").Value;
            String LASTMOD = e.Element("lastmod").Value;
        } 
```

# git - 我可以在我的机器上本地运行 git 并且仍然可以很好地使用公司 SVN 存储库吗？

> ID：11348232
> 
> 赞同：1
> 
> 时间：2012-07-05T16:02:40.763
> 
> 标签：git, svn, workflow

我的公司使用 SVN 进行版本控制。我发现我必须同时处理多个错误，这需要对同一个文件进行多次（有时是冲突的）更改，以创建一个我可以开发和修复的环境。本质上，我只是希望能够实例化我的工作流程。

为了让我的工作更轻松，我想在我的本地机器上使用 git 管理实例，同时使用 SVN 使我的本地与公司最新的稳定版本保持同步。

我推测如果我创建一个本地主干线和一个本地“夜间”干线（基本上是最新更新的），我可以做到这一点。我保持每晚更新最新版本，Main 将充当一种“推送点”，我可以将更改提交到公司主干。每当我想创建一个项目时，我都会将 nightly 分支出来，进行更改，合并到 nightly 中，然后将其合并回我的 main 中，并提交给 SVN。

看起来像：

```
Main    -----------------------------------------------------------------------
           \                                  /
Nightly     -------------------------------------------------------------------
                     \                /
Project               ---------------- 
```

如果不是很明显，每晚的重点是让我得到的更新进入我的项目，而不会污染主干。

这行得通吗？可能（可能）有更好的解决方案吗？我希望得到一些反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:04:23.467

您可以通过在它们之间切换（使用“svn switch”）或使用 Al_G 建议的多个工作副本来使用 SVN 分支。

如果您真的更喜欢基于 Git 的解决方案，请查看以下工具： * [SubGit](http://subgit.com) --- 安装在服务器上，为该 SVN 存储库创建一个纯 Git 接口。推送到 Git 的每个提交都将与 SVN 同步，反之亦然。* 如果您无法访问服务器，则可以使用[SmartGit](http://www.syntevo.com/smartgit/index.html)或 git-svn：它们具有相似的功能，但 SmartGit 可以更正确地翻译合并（包括樱桃挑选）、忽略和标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:01:41.713

我将从评论中得出我的答案。

我一直使用多个分支。我们的布局在主干中具有“现场/现场测试”，并且在分支上进行了所有开发。我刚刚在分支上完成了两个新功能的开发，同时在主干上修复了错误。

通常我会为我正在处理的每个项目创建一个分支（标签）并为其创建一个唯一的目录。因此，如果我有 2 个项目正在进行，那将是这样的；

```
.../Trunk/
.../Branch1/
.../Branch2/ 
```

这节省了每次我想“转移”项目时都必须进行的切换。根据需要（每周至少两到三次），我从主干合并到我的分支中，以使它们保持最新。所有新工作都签入相应的分支。我可以在目录之间移动并“更改分支”而不会有太多痛苦——除了磁盘空间。

当我被清除合并时，我将分支重新集成（合并）回主干。我建议在 SVN 文档中查看[Branching and Merging 。](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.html)

您使用的是 Windows、Linux、OS X 等吗？您将希望获得一个好的 UI 或围绕常见用法的脚本。[我在使用Tortoise SVN](http://tortoisesvn.net/)和[VisualSVN](http://www.visualsvn.com/)（不隶属于任何一家公司）的 Windows 上都有一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:56:25.520

是的。绝对地。

我有将我的东西合并（即`git svn dcommit`）到一个名为的分支的设置，该分支`svn`映射到`trunk`SVN 存储库。整个开发是通过单独的分支和所有 git 魔法完成的。

唯一重要的是您不会意外**地**`svn`使用`git rebase`. 将`svn`分支视为只能通过一组有限的功能访问的东西，例如

*   `git svn fetch`更新索引（
*   `git svn rebase`更新索引并将本地更改重新定位到更新的索引
    （如`git pull --rebase`）
*   `git svn dcommit`将本地提交推送到`trunk`
    （如`git push`）

当然，如果您想对 git 的使用保密，请不要使用诸如

> 02259fd 的修复：忘记了一些东西

如果同事问这样的问题，请不要诚实

> 你**已经**合并了一切？？？

进一步阅读：[*Git Magic*，*Guerilla 版本控制一章*](http://www-cs-students.stanford.edu/~blynn/gitmagic/ch03.html#_guerilla_version_control)

# c++ - 在另一个类中声明一个具有非默认构造函数的类

> ID：11348233
> 
> 赞同：1
> 
> 时间：2012-07-05T16:02:44.913
> 
> 标签：c++, constructor

我怎样才能实现这种行为？

```
class A
{
    int x;
public:
    A(int x) : x(x) {}
};

class B
{
    A a; // here is the problem
public:
    B() : a(1) {} // solution i found
};

int main(void)
{
    B b;
    return 0;
} 
```

我想知道除了我找到的答案之外，是否还有另一种方法可以使这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:04:08.890

不，这是正确的解决方案。您**明确**声明您不希望在`A`没有参数的情况下进行初始化，所以这个结果不应该让您感到惊讶。

或提供默认值`x`：

```
class A
{
    int x;
public:
    A(int x = 1) : x(x) {}
}; 
```

使其成为默认构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:05:18.953

向 A 添加第二个默认构造函数：

```
class A
{
    int x;
public:
    A(int x) : x(x) {}
    A() : x(1) {}
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T16:09:21.633

是的，在 C++11 中，你可以这样写：

```
class B
{
    A a(1); //C++11 support this! (though the compilers may not, now)
public:
    B() {} //nothing here!
}; 
```

或这个，

```
 A a{1}; //using uniform initialization 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T16:20:52.660

我确定您已经知道这一点，但是您可以使“a”成为指向 A 类型对象的指针：这将允许您控制何时实例化对象，从而可以在运行时将什么值传递给 A 构造函数（显然需要删除）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T16:12:46.960

您应该记住，当您显式添加一个构造函数时，不会自动创建默认构造函数。它只是一个默认构造函数。将创建复制构造函数。

还要记住三法则：

> 三规则（也称为三巨头或三巨头）是 C++ 中的一条经验法则，它声称如果一个类定义了以下之一，它可能应该明确定义所有三个 [1]：

```
destructor
copy constructor
copy assignment operator 
```

>

# c# - 使用 WCF 数据服务从集合中删除项目

> ID：11348235
> 
> 赞同：1
> 
> 时间：2012-07-05T16:02:49.493
> 
> 标签：c#, wcf-data-services, odata

我在 Windows 窗体应用程序中有一个选中的列表框，允许用户将一个或多个安全组分配给选定的用户。

使用 WCF 数据服务，我可以毫无问题地填充该框。但是，当用户更改框中的选择并尝试保存这些更改时，我遇到了问题。

这是代码，并带有注释来解释我的逻辑。

```
private void ProcessSecurityGroupSelection_Original()
{
  //Get a reference to the selected user, including the associated SecurityGroups.
  var user = _ctx.Users
    .AddQueryOption("$filter", "UserID eq " + ((DataService.User)lstUsers.SelectedItem).UserID)
    .AddQueryOption("$expand", "SecurityGroups")
    .First();

  //Remove all the SecurityGroups so we can replace them.
  user.SecurityGroups.Clear();

  foreach (var selectedGroup in lstSecurityGroups.CheckedItems)
  {
    //Loop through the selected SecurityGroups, linking and adding each SecurityGroup to the User object.
    var securityGroup = (from sg in _ctx.SecurityGroups
                 where sg.SecurityGroupID == ((DataService.SecurityGroup)selectedGroup).SecurityGroupID
                 select sg).First();

    _ctx.AddLink(user, "SecurityGroups", securityGroup);

    user.SecurityGroups.Add(securityGroup);
  }

  _ctx.UpdateObject(user);
  _ctx.SaveChanges();
} 
```

当代码命中之前选择的 SecurityGroup 的 AddLink 方法时，我收到一条错误消息，指出“上下文已经在跟踪关系”。Clear() 方法似乎没有删除上下文中的任何链接。

我该如何去删除现有的链接，还是我处理这一切都错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:33:02.573

我在 Silverlight 项目中遇到了同样的问题。我采用了对我有用的解决方案并将其应用于您的用户/安全组模型。

将以下内容添加到您的用户类：

```
public User()
    {
    this.SecurityGroups.CollectionChanged += (sender, e) =>
        {
        if (e.Action == Add)
            {
            foreach (SecurityGroup AddedGroup in e.NewItems)
            AddSecurityGroup(AddedGroup);
            }
        if (e.Action == Remove)
            {
            foreach (SecurityGroup RemovedGroup in e.OldItems)
            RemoveSecurityGroup(RemovedGroup);
            }

        };

    ..... rest of constructor
    }

public void AddSecurityGroup(SecurityGroup secGroup)
    {
    LinkDescriptor descriptr = _ctx.GetLinkDescriptor(this, "SecurityGroups", secGroup);

    if (descriptr == null)
        _ctx.AddLink(this, "SecurityGroups", secGroup);

    else if (descriptr.State == EntityStates.Deleted)
        _ctx.DetachLink(this, "SecurityGroups", secGroup);

    }

public void RemoveSecurityGroup (SecurityGroup secGroup)
    {
    LinkDescriptor descriptr = _ctx.GetLinkDescriptor(this, "SecurityGroups", secGroup);

    if (descriptr == null)
        {
        _ctx.AttachLink(this, "SecurityGroups", secGroup);
        _ctx.DeleteLink(this, "SecurityGroups", secGroup);
        }

    else if (descriptr.State == EntityStates.Added)
        _ctx.DetachLink(this, "SecurityGroups", secGroup);

    else
        _ctx.DeleteLink(this, "SecurityGroups", secGroup);

    } 
```

现在删除该行：

```
_ctx.AddLink(user, "SecurityGroups", securityGroup); 
```

从你上面的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:24:32.740

删除链接的一种方法是添加如下事件：

```
private void lstSecurityGroups_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (e.NewValue == CheckState.Unchecked)
    {
        _ctx.DetachLink(user, "SecurityGroups", securityGroup);
    }
    else if (e.NewValue == CheckState.Checked)
    {
        _ctx.AddLink(user, "SecurityGroups", securityGroup);
    }
} 
```

请注意，这`DeleteLink`也会将实体标记为删除，如果多次调用这将导致错误。如果您只想删除链接，请使用`DetachLink`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T16:14:41.960

根据 A Aiston 的回答，我准备了一组扩展来帮助处理一般情况下添加然后删除和删除然后添加链接。

1.  这是通用的
2.  AddSecurityGroup 也应该附加链接，如果它以前被删除
3.  我更喜欢以一些小的性能成本来避免使用魔术字符串

    ```
    public static class DataServiceContextExtensions
    {
        public static void AddOrAttachLink<TSource>(this DataServiceContext context, object source, Expression<Func<TSource>> sourceProperty, object target)
        {
            AddOrAttachLink(context, source, sourceProperty.GetExpressionMemberInfo().Name, target);
        }

        public static void AddOrAttachLink<TSource, TTarget>(this DataServiceContext context, TSource source, Expression<Func<TSource, ICollection<TTarget>>> sourceProperty, TTarget target)
        {
            AddOrAttachLink(context, source, sourceProperty.GetExpressionMemberInfo().Name, target);
        }

        public static void AddOrAttachLink(this DataServiceContext context, object source, string propertyName, object target)
        {
            var descriptor = context.GetLinkDescriptor(source, propertyName, target);
            if(descriptor == null)
            {
                context.AddLink(source, propertyName, target);
            }
            else if(descriptor.State == EntityStates.Deleted)
            {
                context.DetachLink(source, propertyName, target);
                context.AttachLink(source, propertyName, target);
            }
        }

        public static void DeleteOrDetachLink<TSource>(this DataServiceContext context, object source, Expression<Func<TSource>> sourceProperty, object target)
        {
            DeleteOrDetachLink(context, source, sourceProperty.GetExpressionMemberInfo().Name, target);
        }

        public static void DeleteOrDetachLink<TSource, TTarget>(this DataServiceContext context, TSource source, Expression<Func<TSource, ICollection<TTarget>>> sourceProperty, TTarget target)
        {
            DeleteOrDetachLink(context, source, sourceProperty.GetExpressionMemberInfo().Name, target);
        }

        public static void DeleteOrDetachLink(this DataServiceContext context, object source, string propertyName, object target)
        {
            var descriptor = context.GetLinkDescriptor(source, propertyName, target);
            if(descriptor == null)
            {
                context.AttachLink(source, propertyName, target);
                context.DeleteLink(source, propertyName, target);
            }
            else if(descriptor.State == EntityStates.Added)
            {
                context.DetachLink(source, propertyName, target);
            }
            else
            {
                context.DeleteLink(source, propertyName, target);
            }
        }

        public static MemberInfo GetExpressionMemberInfo(this Expression expression)
        {
            var lambda = (LambdaExpression)expression;

            MemberExpression memberExpression;
            if(lambda.Body is UnaryExpression)
            {
                var unaryExpression = (UnaryExpression)lambda.Body;
                memberExpression = (MemberExpression)unaryExpression.Operand;
            }
            else
            {
                memberExpression = (MemberExpression)lambda.Body;
            }

            return memberExpression.Member;
        }
    } 
    ```

用法：

```
var ctx = new YourContext();
ctx.AddOrAttachLink(addTo, () => addTo.Collection, toAdd);
ctx.DeleteOrDetachLink(removeFrom, () => removeFrom.Collection, toRemove); 
```

# php - 覆盖 Magento Adminhtml 模板文件

> ID：11348240
> 
> 赞同：0
> 
> 时间：2012-07-05T16:03:16.033
> 
> 标签：php, xml, zend-framework, magento, configuration

我试图覆盖页面上的特定块，在本例中是 Sales_Order_View_History 模板。我看到的问题是这个块已经被覆盖了。

覆盖这个块的自定义模块使用了一个观察者，它基本上是这样的：当要加载 History.php 时，加载 Historytwo.php 代替。History.php 也被用于后端的两个独立页面。我只能在一页上覆盖它。这让我完全迷失了。我确实相信我想要覆盖模板的模块只是覆盖我想要覆盖的那个。

我认为覆盖块的普遍接受的格式是：

```
<adminhtml>
    <rewrite>
       <sales_order_view_companyhistory>
       Namespace_Package_Blocks_Adminhtml_Sales_Order_View_Companyhistory_Content</ 
```

上面的代码给了我一个损坏的布局，它停止了大多数块/模板的渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:44:49.067

如果另一个模块在“adminhtml_block_html_before”事件上使用了观察者，您是否尝试过重写他们的观察者模型以使其执行您想要的操作？
同时，您还可以在同一事件上添加自己的观察者，这将做同样的事情，但仅在未启用其他模块时（例如，通过检查`Mage::helper('core')->isModuleEnabled()`），以便它适用于所有情况.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:45:23.693

这两个配置片段将重写两个单独的类名。

`sales`映射在`Mage/Sales/etc/config.xml`：

```
global/blocks/sales/class>Mage_Sales_Block 
```

`adminhtml`映射在`Mage/Adminhtml/etc/config.xml`：

```
global/blocks/adminhtml/class>Mage_Adminhtml_Block 
```

# javascript - 检查facebook是否被阻止

> ID：11348243
> 
> 赞同：0
> 
> 时间：2012-07-05T16:03:19.950
> 
> 标签：javascript, facebook

我正在使用 facebook 注册插件，但某些工作场所现在禁止使用 facebook（例如我的）。我需要快速确定是否是这种情况并显示替代注册。我已经阅读了有关此问题的所有先前问题，[例如这个](https://stackoverflow.com/questions/7264667)问题，并且提出的解决方案似乎非常简单（从 facebook 加载图像并在 facebook 不可用时使用 onerror 运行您想要的任何脚本）。

我的问题是，当我在工作中测试它时，运行 onerror 脚本需要 45 秒（它会加载页面的其余部分并显示“发送请求”）。到那时，用户将单击注册按钮并被发送到错误页面（因为 facebook 不会加载）。

有什么方法可以加快流程或其他方法来检查用户是否可以访问 facebook？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:13:31.310

安排一个定时事件，在几秒钟后报告“Facebook 被屏蔽”。如果成功返回，请让您的图像请求取消计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:16:17.823

您可以假设，如果需要超过 2-3 秒，则该站点不可用。因此，要么让事件运行，要么在一定次数后未加载事件时进行假设。这是可靠的，因为 facebook 很少需要超过一秒钟的时间来加载内容。

# html - 将 div 放在不同的行

> ID：11348249
> 
> 赞同：3
> 
> 时间：2012-07-05T16:03:47.887
> 
> 标签：html, css

我想建立一个项目列表。每个项目应该在一行中，就像几个段落一样。

为什么我的 div.empresa 元素在同一行？我认为它们应该在不同的行上，因为它们的显示属性是块。

看一下代码：http: [//jsfiddle.net/Yz8Cq/](http://jsfiddle.net/Yz8Cq/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T16:05:59.977

你需要删除`float: left;`

```
#ListaDeEmpresas .arrow {
    height: 50px;
    width: 20px;
    background: url("/Content/SetaBrancoh40.png") no-repeat center center;
    background-color: #A9462F;
} 
```

[http://jsfiddle.net/spacebeers/Yz8Cq/5/](http://jsfiddle.net/spacebeers/Yz8Cq/5/)

一开始，花车可能有点棘手。这篇文章很棒 - [http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:13:00.477

实际上，`float: left`从 中删除`label`会使箭头`span`出现在 的左侧`label`。假设您希望箭头`span`s 继续出现在`label`s 的右侧，那么您要添加：

```
#ListaDeEmpresas div.empresa {
    clear: left;
} 
```

这将确保每个标签/跨度集都出现在前一个标签/跨度集的下方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T16:07:21.647

摆脱`float: left;`内`#ListaDeEmpresas .arrow`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T16:07:40.420

`float: left;`是让他们这样做。

# sql - TSQL 有序表

> ID：11348252
> 
> 赞同：0
> 
> 时间：2012-07-05T16:03:59.000
> 
> 标签：sql, tsql

所以我正在查询一些数据并试图确定每个用户登录和注销之间的时间量。我接近得到这个，但得到的结果不起作用。这是我现在拥有的代码：

```
WITH OrderedTable AS
(
SELECT  EventType
        , ModuleAndEventText
        , Time
        , Node
        , UserSID
        , ROW_Number() OVER (Partition BY UserSID ORDER BY UserSID,EventID,Time) RN 
FROM    viewevent 
where EventType in ('BROKER_USERLOGGEDIN','BROKER_USERLOGGEDOUT') and usersid = 'S-1-5-21-999033763-294680432-740312968-10026'
)

SELECT  t1.EventType
    , t1.ModuleAndEventText
    , t1.Node
    , t1.UserSID
    , t1.Time as TimeIn
    , t2.Time as TimeOut
    , DATEDIFF(hour, t1.Time, t2.Time ) TimeElapsedInHours
FROM    OrderedTable t1
JOIN    OrderedTable t2 ON t1.UserSID = t2.UserSID AND t2.RN = t1.RN + 1
WHERE   t1.RN % 2 <> 0
ORDER BY t1.UserSID 
```

以下是我得到的一些结果：

```
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-04-14 08:00:36.137   2012-04-14 09:32:08.267     1
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-04-14 08:00:36.137   2012-04-14 09:32:08.267     1
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-11 14:50:40.420   2012-06-11 16:43:08.640     2
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-11 17:49:46.330   2012-06-11 18:42:50.047     1
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-11 18:59:40.550   2012-06-12 23:20:16.027     29
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-12 23:20:16.777   2012-06-12 23:20:16.823     0
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-12 23:20:17.120   2012-06-15 13:03:31.807     62 
```

前两条记录是正确的。最后几个不是，它选择注销的记录作为时间，我不清楚如何解决这个问题。这是数据：

```
EventType    ModuleAndEventText    Time    Node    UserSID
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-04-14 08:00:36.137 VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-04-14 09:32:08.267 VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-04-14 08:00:36.137 VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-04-14 09:32:08.267 VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-06-11 14:50:40.420 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-06-11 16:43:08.640 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-06-11 17:49:46.330 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-06-11 18:42:50.047 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-06-11 18:59:40.550 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-06-12 23:20:16.027 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-06-12 23:20:16.777 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-06-12 23:20:16.823 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDOUT    User YRMC_MAIN\jerogers has logged out  2012-06-12 23:20:17.120 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026
BROKER_USERLOGGEDIN     User YRMC_MAIN\jerogers has logged in   2012-06-15 13:03:31.807 VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026 
```

提前致谢。卡梅隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:18:02.930

问题是日志文件没有巧妙地交错登录和注销。

这是另一种方法。它选择每次登录后的最短注销时间：

```
select ins.UserSID, ins.time as login_time, min(outs.time) as logout_time
from (SELECT *
      FROM viewevent
      where EventType in ('BROKER_USERLOGGEDOUT')
     ) outs left outer join
     (SELECT *
      FROM viewevent
      where EventType in ('BROKER_USERLOGGEDIN')
     ) ins
     on outs.UserSID = ins.UserSID and
        outs.Time >= ins.Time
group by ins.UserSID 
```

我省略了对用户 ID 的限制（您应该将其添加到两个子查询或放入 with 子句中），以及小时差的具体计算（因为我会使用浮点数而不是整数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:40:41.257

假设没有连接就没有断开连接，我喜欢下面产生伪 sessionId 的方法

```
declare @tEvent table (
    UserId int,
    EventType varchar(10),
    EventDate datetime2
)

insert into @tEvent (UserId, EventType, EventDate) values
(1, 'CONNECT', '20120101'),
(2, 'CONNECT', '20120101'),
(1, 'DISCONNECT', '20120102'),
(1, 'CONNECT', '20120103'),
(2, 'DISCONNECT', '20120103'),
(1, 'DISCONNECT', '20120105'),
(1, 'CONNECT', '20120106')

select 
    conn.UserId, conn.SessionId, conn.EventDate as startDate, disco.EventDate as endDate, DATEDIFF(d, conn.EventDate, disco.EventDate) as duration
from 
    (select 
        ROW_NUMBER() over (partition by UserId order by EventDate) SessionId,
        UserId,
        EventDate
    from
        @tEvent 
    where EventType = 'CONNECT') conn
    left join (
    select 
        ROW_NUMBER() over (partition by UserId order by EventDate) SessionId,
        UserId,
        EventDate
    from
        @tEvent 
    where EventType = 'DISCONNECT' ) disco on conn.UserId = disco.UserId and conn.SessionId = disco.SessionId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:32:26.913

你能在你的 t1 上添加限制吗`WHERE`

```
WITH OrderedTable  AS
(
SELECT  EventType
    , ModuleAndEventText
    , Time
    , Node
    , UserSID
    , ROW_Number() OVER (Partition BY UserSID ORDER BY UserSID,EventID,Time) RN 
FROM  viewevent 
where EventType in ('BROKER_USERLOGGEDIN','BROKER_USERLOGGEDOUT') and usersid = 'S-1-5-21-      999033763-294680432-740312968-10026'
 )

SELECT  t1.EventType
    , t1.ModuleAndEventText
    , t1.Node
    , t1.UserSID
    , t1.Time as TimeIn
    , t2.Time as TimeOut
    , DATEDIFF(hour, t1.Time, t2.Time ) TimeElapsedInHours
FROM    OrderedTable2 t1
JOIN    OrderedTable2 t2 ON t1.UserSID = t2.UserSID AND t2.RN = t1.RN + 1
WHERE   t1.RN % 2 <> 0 AND t1.EventType = 'BROKER_USERLOGGEDIN' --ONLY CHANGE IS HERE - THIS RETURNS WHAT MY UNDERSTANDING OF WHAT YOU EXPECT IS

EventType   ModuleAndEventText  Node    UserSID TimeIn  TimeOut TimeElapsedInHours
--------------------------------------------------------------------------------------
BROKER_USERLOGGEDIN User YRMC_MAIN\jerogers has logged in   VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-04-14 08:00:36.137 2012-04-14 09:32:08.267 1
BROKER_USERLOGGEDIN User YRMC_MAIN\jerogers has logged in   VMVIEWTC1.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-04-14 08:00:36.137 2012-04-14 09:32:08.267 1
BROKER_USERLOGGEDIN  User YRMC_MAIN\jerogers has logged in  VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-11 14:50:40.420 2012-06-11 16:43:08.640 2
BROKER_USERLOGGEDIN User YRMC_MAIN\jerogers has logged in   VMVIEWWC2.yrmc.org  S-1-5-21-999033763-294680432-740312968-10026    2012-06-11 17:49:46.330 2012-06-11 18:42:50.047 1
ORDER BY t1.UserSID 
```

# upgrade - 从 Rails 2.3.5 升级到 2.3.11，现在出现此错误：“未初始化的常量 AssignmentsPresenter::OrderedHash

> ID：11348255
> 
> 赞同：0
> 
> 时间：2012-07-05T16:04:06.490
> 
> 标签：upgrade, ruby-on-rails-2

升级后，当我尝试登录我的 Rails 应用程序时，我得到以下信息：

```
NameError in ApplicationsController#index 
```

未初始化的常量 AssignmentsPresenter::OrderedHash

RAILS_ROOT：/Users/jasonbodak
应用程序跟踪 | 框架跟踪 | 全跟踪

```
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/dependencies.rb:131:in `const_missing'
/Users/jasonbodak/janova/janova/lib/assignments_presenter.rb:4:in `present'
/Users/jasonbodak/janova/janova/app/controllers/applications_controller.rb:12:in `index'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:1333:in `send'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:1333:in `perform_action_without_filters'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/Users/jasonbodak/.rvm/gems/ree-1.8.7-2011.03@janova-local_app/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call' 
```

要求

参数：

```
None 
```

显示会话转储响应

标题：

```
{"Content-Type"=>"",
"Cache-Control"=>"no-cache"} 
```

这对任何人都意味着什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:55:54.747

好的，我想通了。我不知道为什么将 Rails 从 2.3.5 升级到 2.3.11 会这样做，但我不得不将线路更改`assignments_by_status = OrderedHash.new`为`assignments_by_status = ActiveSupport::OrderedHash.new`，现在它工作得很好。

# android - 生成动态线性布局时的强制宽度

> ID：11348257
> 
> 赞同：0
> 
> 时间：2012-07-05T16:04:12.137
> 
> 标签：android, android-layout

我正在设置一个布局，我基于一组对象添加（通过 for 循环）。问题是如果有 3 个字段（列），如果第一个条目中的中间字段的文本长度比第二个条目长……第一个条目中的中间字段将消耗更大的宽度，即使我已经已经为该中心列定义了 weightSum 和 layout_weight。我的问题是，当像这样动态添加行时，如何确保它们最终都具有完全相同的宽度，如 XML 中定义的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:07:47.143

你为什么不设置一个固定的宽度？

如在

```
设置宽度（整数宽度）
```

编辑：

将px转换为dpi的公式是：

```
truePixels = DIP * (设备 DPI / 160)
```

下面看看如何获​​取[屏幕dpi。](https://stackoverflow.com/questions/3166501/getting-the-screen-density-programmatically-in-android)

关于支持多屏的[文档。](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:31:33.877

如果您对行使用 xml 布局，则：

```
android:layout_width="0" 
```

如果一切都以编程方式完成，那么`setWidth(0)`

# windows - 等宽字体、引号和抑扬符 a

> ID：11348261
> 
> 赞同：0
> 
> 时间：2012-07-05T16:04:16.427
> 
> 标签：windows, fonts, quote, monospace

大多数通常用于在 Windows 上编程的等宽字体（到目前为止我发现的所有字体）都不能正确显示“有趣的引号”（0xE2）。例如，来自 gcc 编译器的错误消息，如

> 警告：内置函数“printf”的类型冲突

这真的是

> {funnyquote}fname{funnyquote}

在 Ludida Console、DejaVu 等中显示为

> {circumflex a}fname{circumflex a}

（它现在可能正在为您这样做）。是否有一种类似 helvetica 的等宽字体尊重该特定的 8 位代码页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:28:24.280

Windows 具有分裂的个性。其中大部分基于 Unicode，而有些部分仍然依赖于代码页字符翻译。

您为 0xE2 获得的字符是正确的 Unicode 翻译，在非常常见的[代码页 1252](http://en.wikipedia.org/wiki/Windows-1252)和其他大部分代码页中也是如此。唯一包含该值引号的代码页是[代码页 10000, Mac OS Roman](http://en.wikipedia.org/wiki/Code_page_10000)。

该`chcp`命令用于更改命令窗口的代码页，但我无法让它适用于您的具体情况。

# emacs - 在 Emacs 中，如何一次编辑多个点？

> ID：11348269
> 
> 赞同：7
> 
> 时间：2012-07-05T16:04:39.047
> 
> 标签：emacs, elisp

有两种变体。我认为您可以选择一个矩形并将内容添加到所有行的开头和结尾。

我还想知道是否可以选择位于不同偏移量上的多个点，以便一次编辑所有点。我认为 Yasnippet 提供了类似的功能，但仅限于使用预定义模板时。像这样的东西。

```
<div class="">
<a class=""> 
```

我可以在两个类的东西上标记一个点，键入将编辑两个类属性。是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T16:21:28.633

Emacs 摇滚！描述[mark-multiple](https://github.com/magnars/mark-multiple.el)，它可以满足您的需求。（这是他们的[视频介绍](http://emacsrocks.com/e08.html)。）

**编辑：** @Lifton 指出它已被[multiple-cursors](https://github.com/magnars/multiple-cursors.el)取代。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:46:54.713

除了 Juancho 的回答之外，我还[`multi-select`](https://sites.google.com/site/steveyemacsutils/multi-select-el)为您的目的使用了 Steve Yegge 的回答。示例用法（第一个示例将提供我认为您想要的内容）：

```
 C-u C-M-m w foo <RET> <RET>
  - inserts/prepends "foo" to every multi-selection (you can also append or replace text)

 C-u -1 C-M-m r <pre>\(\w+\).+\s-+\(.+\)</pre>
  - selects first and last word of the contents every <pre> tag
    (provided the contents don't span multiple lines)

 C-M-m x M-x upcase-region
  - converts all multi-selections in buffer to uppercase

 C-u M-w C-q C-j --- C-q C-j <RET>
  - saves all multi-selections to kill-ring as a single item,
    with selections separated by "---" on a line by itself 
```

# drupal - 字段 api，定义新字段和获取/设置值

> ID：11348271
> 
> 赞同：0
> 
> 时间：2012-07-05T16:05:05.393
> 
> 标签：drupal

我可以创建一个字段，使用

```
 $form['title'] = array( '#type' => 'text', '#value' => 'Drupal'); 
```

1）但我希望能够从数据库中获取/设置值。我该怎么做？

2）PS 在类型和值前面有一个“#”有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:00:00.943

首先我不知道你使用的是什么 Drupal 版本。其次尝试从我的回答中获取更多信息：

1) 使用[数据库 API](http://drupal.org/node/310069)从数据库中获取值。

2) 阅读有关[表单 API](http://drupal.org/node/37775)的更多信息。

希望这可以帮助。

# sql - 多租户数据库编写程序，模式为变量

> ID：11348272
> 
> 赞同：1
> 
> 时间：2012-07-05T16:05:07.713
> 
> 标签：sql, sql-server-2008, schema, prepared-statement, multi-tenant

我正在设计一个多租户数据库。许多基于每个租户所需的操作已被编写为存储过程。几乎所有这些都使用动态 SQL 执行，因为除了动态语句之外，我还没有找到区分模式的方法。

```
EXEC( 'SELECT * FROM ' + @SchemaName + '.Contacts' ) 
```

有什么方法可以创建一个表示模式的变量，这样我就可以在不动态构建它们的情况下调用 select 语句？

```
SELECT * FROM @TheSchema.Contacts 
```

SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:25:55.637

FWIW 我发现按数据库区分客户比按模式区分客户更有用。原因？

1.  所有模式都可以具有相同的过程，因此从模型中派生它们而不必创建任何东西。部署到多个数据库并不比部署到多个架构复杂，实际上我认为更复杂，唯一的区别是应用程序必须知道要引用哪个数据库而不是哪个架构。

2.  不同的客户可以有不同的恢复模式，按照不同的时间表进行备份等。这可以改善您的备份/恢复计划，尤其是在数据集变大时。

3.  将每个客户放在一个单独的数据库中，如果租户对于当前服务器来说太大，则可以很容易地将其移动到不同的服务器。仅为其模式提取数据和对象将非常复杂。

4.  一些客户可能在法律和/或合同上要求您不要将他们的数据存储在与其他客户相同的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T13:20:01.310

这个问题有点老了，但我正在考虑将此选项作为一种节省成本的措施——因为许多云提供商对每个数据库收费并且与存储相关的成本较少——对于多租户小型数据库尤其有用。

据我了解，可以为登录设置默认模式，因此，为每个登录设置一个模式将自动将该模式用于所有查询和存储过程。遇到这个问题的人需要考虑的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:07:55.033

一个更简单的解决方案是将存储过程保存在每个租户数据库中并在其中执行它。

# xcode - XCode 在 UITextView 不更新的单独视图中实现多个实现

> ID：11348273
> 
> 赞同：0
> 
> 时间：2012-07-05T16:05:08.280
> 
> 标签：xcode, uitextview, uitabcontroller

嘿，我刚刚对 XCode 的行为有疑问，多个视图实现了我自己创建的同一个 UIView 类。我正在使用一个选项卡式应用程序和控制器，我在情节提要上有多个视图，所有这些视图都实现了我创建的一个类。在其中一个视图中，我有一个文本字段和一个按钮，在另一个视图中，我有一个带有启动文本的文本视图，上面写着“Waiting...”。正如您可能猜到的，我想在第一个视图的文本字段中输入文本，按下按钮，然后在另一个视图的文本视图中显示正确的输出文本。
**我的问题是：在多个视图之间实现同一个类有问题吗？**
我研究了很多关于在其中设置文本的 TextView 方法的讨论，但是论坛之间的所有建议都说不同，而且似乎没有一种方法能正常工作。

`[textView setText string]`当我切换到另一个选项卡时不想工作， `textView.text = @"Message here"`也不起作用

感谢您的帮助，我已附上我的代码以供参考。

```
#import "MasterController.h"

@interface MasterController ()

@end

@implementation MasterController
@synthesize input;
@synthesize output;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [self setInput:nil];
    [self setOutput:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)generate:(id)sender 
{
    [output setText:input.text];
}
- (IBAction)textFieldReturn:(id)sender
{
    [sender resignFirstResponder];
}
- (void)dealloc 
{
    [input release];
    [output release];
    [super dealloc];
}
@end

//MasterController.h
#import <UIKit/UIKit.h>

@interface MasterController : UIViewController
- (IBAction)generate:(id)sender;
- (IBAction)textFieldReturn:(id)sender;
@property (retain, nonatomic) IBOutlet UITextField *input;
@property (retain, nonatomic) IBOutlet UITextView *output;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:32:01.833

如果您有多个由同一个视图控制器控制的视图，它们将不会以您尝试创建它们的方式相互通信。当您调用 [output setText:input.text] 时，您是在说：为您当前所在视图的输出文本字段设置文本。

解决这个问题的一种有点笨拙的方法是创建第二个视图控制器并让它从你的“主人”继承。变量默认设置为受保护，并在子类化时保留其信息。

但是，如果您想在不同的视图控制器之间正确通信，您应该在这个问题中研究状态注入：[在视图控制器之间进行通信的最佳方式是什么？](https://stackoverflow.com/questions/569940/whats-the-best-way-to-communicate-between-view-controllers)或者使用 NSNotification center 等通讯系统。或者你可以使用 NSCoding，所有这些都相当容易实现。

# sqlite - 使用liquibase changelog创建带有日期时间字段的表，该字段怎么变成文本类型

> ID：11348275
> 
> 赞同：0
> 
> 时间：2012-07-05T16:05:16.423
> 
> 标签：sqlite, data-migration, liquibase, changelog

我使用 liquibase databaseChangeLog 创建了一个表：

```
 <changeSet id="1" author="person1">
        <createTable tableName="schedule">
         <column name="id" type="varchar(20)">
                <constraints primaryKey="true" nullable="false"/>
         </column>
         <column name="worktime" type="datetime">
         </column>
  </createTable>
  </changeSet> 
```

但是，在验证我的 sqlite 数据库时，表架构如下：

```
sqlite> .schema schedule
CREATE TABLE schedule (
id TEXT NOT NULL, 
worktime TEXT, 
CONSTRAINT PK_SCHEDULE 
PRIMARY KEY (id)); 
```

您会看到 varchar 和 datatime 都更改为文本类型。我应该添加到 changeSet 表定义中以使其正常工作。顺便说一句，我使用的是 liquibase-1.9.3.jar。现在我必须直接从 sqlite DB 更正它们。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:31:50.877

SQLite 没有日期时间数据类型。它只支持数字、文本和 blob：

引用自[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

> *SQLite 没有专门用于存储日期和/或时间的存储类*

# ios - iCloud的iOS“管理存储”设置显示文件包的内容而不是包名是否正常？

> ID：11348276
> 
> 赞同：0
> 
> 时间：2012-07-05T16:05:17.190
> 
> 标签：ios, icloud

我的应用程序使用自定义文件包（UTI 符合 com.apple.package）来存储单独的“笔记本”，每个包（目录）包含各种单独的文件。我希望 iPad 上 iCloud 设置的“管理存储”部分显示包的名称，而不是这些包的内容。用户能够删除整个“笔记本”而不是里面的组件文件更有意义。

这是正常的，还是当我将包上传到 iCloud 时我做错了什么？我已经为我的自定义文件类型创建并导出了 UTI（它似乎工作，因为电子邮件应用程序识别我的新文件并将它们与我的应用程序相关联）。我是否必须以某种方式告诉 iCloud 我的 UTI 定义？

最后，如果这种行为是“正常的”，有没有办法强迫它像我想要的那样工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:18:44.140

我想我偶然发现了答案。我最近从 iCloud 设置 -> 管理存储页面中删除了我的应用程序的所有 iCloud 数据（通过点击“编辑”，然后点击“全部删除”）。将我的数据重新加载到 iCloud 后，它按预期工作 - 我现在只看到包文件名，而不是包的所有内容。

我怀疑这是因为我最初在正确定义 UTI 之前将数据上传到了 iCloud。在我完成正确的 UTI 后，我让我的应用程序删除数据并重新加载它，但这显然不如通过“管理存储”页面删除整个 iCloud 容器那么彻底。我最好的猜测是，当我完全删除所有内容并从头开始重新加载时，这次正确的 UTI 导出数据随之而来。

无论如何，它现在有效！我希望这可以帮助处于类似情况的其他人。

# mysql - 转义mysql表名

> ID：11348278
> 
> 赞同：2
> 
> 时间：2012-07-05T16:05:31.700
> 
> 标签：mysql, escaping

如何转义名为 的表名`log\'; WAITFOR DELAY \'0:0:5\';--`？

我想删除表。

这些都不起作用：

```
SHOW TABLES LIKE 'log\\\'; WAITFOR DELAY \\\'0:0:5\\\';--';
SHOW TABLES LIKE "log\\'; WAITFOR DELAY \\'0:0:5\\';--";
SHOW TABLES LIKE `log\\'; WAITFOR DELAY \\'0:0:5\\';--`; 
```

最后一个给出错误，而其他没有给出结果。错误是：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '`log\\'; WAITFOR DELAY \\'0:0:5\\';--`' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:22:39.227

这些语句将返回表名（如果表存在）：

```
SHOW TABLES LIKE "log\\\\'%"

SHOW TABLES LIKE "log\\\\'; WAITFOR DELAY \\\\'0:0:5\\\\';--"

SELECT table_name FROM information_schema.tables 
 WHERE table_name LIKE "log\\\\'; WAITFOR DELAY \\\\'0:0:5\\\\';--" 
```

要在 SQL 语句中引用表名，您需要使用反引号将名称括起来，例如：

```
SELECT 1 FROM `log\'; WAITFOR DELAY \'0:0:5\';--` LIMIT 1 ;

RENAME TABLE `log\'; WAITFOR DELAY \'0:0:5\';--` TO `foo` ;

DROP TABLE `log\'; WAITFOR DELAY \'0:0:5\';--` ; 
```

注意：在 SQL 语句中引用对象名称时，名称中的反斜杠和特殊字符不需要转义，只需将其括在反引号中即可。但是这些反斜杠在被解释为字符串文字时确实需要转义，就像在 LIKE 谓词中一样。

（我去过那里并做到了，创建了一个不稳定的表名。）

* * *

要删除名称以 开头的所有表`log\'`，我将分两步进行。首先，我会生成 DROP TABLE 语句，然后我会执行这些语句。

```
SELECT CONCAT('DROP TABLE `',table_name,'`;') 
 FROM information_schema.tables
WHERE table_name LIKE "log\\\\'%"
  AND table_schema = DATABASE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:14:31.773

```
`log\'; WAITFOR DELAY \'0:0:5\';--` 
```

试试看。

## 编辑

编辑自

```
`log\\'; WAITFOR DELAY \\'0:0:5\\';--` 
```

到

```
`log\'; WAITFOR DELAY \'0:0:5\';--` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:24:07.620

表名实际上是否包含 \ 字符，还是只是`log'; WAITFOR DELAY '0:0:5';--`？因为根据[http://dev.mysql.com/doc/refman/5.0/en/identifiers.html](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)表名中不允许使用 \ 字符。

这是否有效：

```
SHOW TABLES LIKE `log'; WAITFOR DELAY '0:0:5';--`; 
```

# shell - 是否有一种可移植的方式使用 unix shell 命令来判断是否有配置的 IPv6 接口？

> ID：11348280
> 
> 赞同：2
> 
> 时间：2012-07-05T16:05:41.153
> 
> 标签：shell, unix, ipv6

具体来说，我正在寻找一种方法来判断系统是否具有配置有**全局**范围 IPv6 地址的网络接口。环回和链接范围的地址“不算数”。

我想要实现的是匹配是否将返回任何带有提示标志`getaddrinfo()`的 IPv6 地址。`AI_ADDRCONFIG`

我可以通过编写一些代码来使用`getaddrinfo()`. 但这是一个相当复杂的构建过程的测试的一部分，不必为了测试这个相当简单的东西而构建可执行文件会简单得多。

到目前为止我发现的最好的只适用于 Linux，并使用`ip`最近发行版附带的命令。

```
if ip -f inet6 -o addr | cut -f 9 -s -d' ' | grep global > /dev/null ; then
    echo "IPv6 addresses configured continuing"
else
    echo "No global IPv6 addresses configured - skipping test"
    exit 0
fi 
```

然而，这依赖于`ip`我怀疑可以保证的输出的当前格式，并且在其他版本的 Unix（例如 FreeBSD）上不存在。

我不认为 ifconfig 在不同的 Unix 版本中提供了足够相似的输出以供使用。

我还缺少其他工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:10:28.440

现在，查看您是否至少有一些 v6 连接的好方法是检查结果

```
ping6 -c 10 ipv6.google.com 
```

然而，它是一个kludge。但在某种程度上，它应该适用于大多数 unice，甚至更多。

# java - Android - 对话框问题/单击按钮

> ID：11348282
> 
> 赞同：0
> 
> 时间：2012-07-05T16:05:45.257
> 
> 标签：java, android, button, dialog, onclick

我有一个游戏，用户在画布上四处移动，并且可以在这种情况下与触发战斗的狗交互。

这会加载一个对话框，让用户可以选择战斗或逃跑。用户点击战斗，然后弹出另一个对话框，其中显示一些文本（您的详细信息和狗的详细信息），并且在该文本下方有一个攻击按钮。

当您单击附加按钮时，会发生一些事情（不是相关的），这实际上意味着用户和狗的详细信息发生了变化（例如 DogHP 下降到 18）。

所以我的问题是：

*   我加载的第一个对话框有动态信息“狗 HP”。
*   单击攻击按钮后，该信息将更改。
*   因此，我需要使用当前使用 builder.setMessage() 显示的新信息更新第一个对话框
*   例如原始HP = 20 ...点击攻击按钮...新HP = 10

请参阅下面的一些代码片段，任何想法或指导将不胜感激：

代码片段：

```
void Fight()
{
    final int DogHP = 25;
    final int DogAtk = 15;
    final int DogDef = 5;
    final int DogSpeed = 20;

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle(context.getText(R.string.monster_dog_title));
    LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.fight, null);
    builder.setView(view);
    final AlertDialog DogBattle = builder.create();

    View FightBtn = view.findViewById(R.id.dog_fight);
    FightBtn.setOnClickListener(new OnClickListener()
    {
        boolean attacked = false;
        @Override
        public void onClick(View clicked)
        {
            if(clicked.getId() == R.id.dog_fight)
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setTitle(context.getText(R.string.monster_fight));
                builder.setMessage("Your Current Battle Details:\n" + "HP = " + UserHP + "  Def = " + UserDef + "  Atk = " + UserAtk + "\n\n" + "Your Enemy:\n" + "HP = " + DogHP + "  Def = " + DogDef + "  Atk = " + DogAtk);

                LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View view = inflater.inflate(R.layout.monsterbattle, null);
                builder.setView(view);
                final AlertDialog BattleRun = builder.create();
                BattleRun.show();
                View LeaveBattle = view.findViewById(R.id.Attack);
                LeaveBattle.setOnClickListener(new OnClickListener()
                {
                    @Override
                    public void onClick(View clicked)
                    {
                        if(clicked.getId() == R.id.Attack)
                        {
                            // SOME CODE GOES HERE
                        }
                    }
                });
            }
        }
    });
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:23:44.623

我没有尝试过，但我相信对话框中文本字段的 id 是 android.R.id.custom，所以你应该能够执行以下操作：

```
((TextView)dialog.findViewById(android.R.id.custom)).setText(newTextToShow) 
```

不过，更好的方法可能是使用自定义对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:52:21.290

我决定完全放弃上面的想法，因为它在对话框中发生了太多事情，最终创建了一个新类以及使用对象而不是变量。

# php - 使用 WEHERE 的 SQL 语法错误

> ID：11348283
> 
> 赞同：0
> 
> 时间：2012-07-05T16:05:54.710
> 
> 标签：php, mysql, sql

```
$query = sprintf("SELECT * FROM sorular WEHERE test_id='%s' ORDER BY id LIMIT '%s', '%s'",
mysql_real_escape_string(htmlentities(stripslashes($testid))), 
mysql_real_escape_string(htmlentities(stripslashes($start))), 
mysql_real_escape_string(htmlentities(stripslashes($perpage)))); 
```

我收到错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'test_id='1' ORDER BY id LIMIT '4', '2'' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:07:46.317

限制和偏移总是整数。尝试这个：

```
$query = sprintf("SELECT * FROM sorular WHERE test_id='%s' ORDER BY id LIMIT %s, %s",
mysql_real_escape_string(htmlentities(stripslashes($testid))), 
$start, 
$perpage); 
```

无论如何，您以最糟糕的方式过滤变量。整数是整数，使用`$int = (int) $maybeInteger;`，字符串 - 你这样做`mysql_real_escape_string()`，`stripslashes()`同时，这个函数很熟悉，看手册。`htmlentities()`应过滤后使用。

如前所述，正确答案是：`WEHERE`=> `WHERE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:08:15.490

你只是打了一个简单的错字：WEHERE -> WHERE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:08:35.893

您在查询中拼写了 WHERE 错误。

# android - 如何在Android中的方法显示数据之前制作Progressdialog

> ID：11348292
> 
> 赞同：0
> 
> 时间：2012-07-05T16:06:39.577
> 
> 标签：android, multithreading, progressdialog

我的 Android 应用程序有问题，我的应用程序是`ProgressDialog`为显示计算数据而构建的，但没有使用“睡眠”

但是该计算的数据结果没有显示

我想用 TextView 和 Listview 显示数据

消息错误是`only the original thread that created a view hierarchy can touch its views`

这是我的代码：

```
 progressDialog = ProgressDialog.show(hasilrute.this, "","Communicating",true); 

            new Thread(new Runnable() { 
                 @Override 
                 public void run() { 
                    cariRute(tv);
                    try { 

                    } catch (Exception e) { 
                    // TODO: handle exception 
                   } 
                   handler.sendEmptyMessage(0); 
                progressDialog.dismiss(); 
                 } 
           }).start(); 
          progressDialog.dismiss(); 
           Handler handle=new Handler(){ 
                 public void handleMessage(Message msg) { 
                       super.handleMessage(msg); 
                       if(msg.what == 0) { 
                         //perform some action here................ 
                       } 
                 } 
           }; 
```

这是我的`cariRute`方法：

```
public void cariRute(TextView t){
    String haha = tv.getText().toString().toLowerCase();
    String []getAsalTujuan = haha.split("-");
    getAsal = getAsalTujuan[0];
    getTujuan = getAsalTujuan[1];
    cari(getAsal,getTujuan);

    route = new ArrayList<rute>();
    for(int i=0;i<hasilKahir.size()-1;i++){
        a = hasilKahir.get(i);
        i++;

        b = hasilKahir.get(i);
        i--;

        hitungJarak(a, b);
        System.out.println(a+b);

        List<rute> temp = new ArrayList<rute>();
        temp = getDataRute(a,b);

        /*temp = getDataRute(a,b);
        for(int j = 0; j < temp.size(); j++){
            route.add(temp.get(j));             
        }*/

    }
    List<rute> temp = new ArrayList<rute>();
    temp = filterList(listJalan);
    route = temp;

        jrk = 0;
        for(int k = 0;k<Ljrk.size();k++){

                jrk = jrk + Ljrk.get(k);
            }
        //System.out.println(jrk);
        ongkos = 0; 
        for(int l = 0;l<Longkos.size();l++){

            ongkos = ongkos + Longkos.get(l);
            //System.out.println(ongkos);
        }

        pembulatan("####.##", jrk);
        hitungOngkos(ongkos);
        System.out.println(jrk+ongkos);

    JARAK = (TextView)findViewById(R.id.textView11);
    JARAK.setText("        Jarak : "+keluaran+" km");

    ONGKOS = (TextView)findViewById(R.id.textView12);
    ONGKOS.setText("        Ongkos : Rp."+harga);

    Longkos.clear();

    for(int x = 0; x < route.size();x++){

    }
        ListAdapter adapter = new ruteListAdapter(this, (List<? extends Map<String, String>>) route,
                R.layout.list_item_2, new String[] {
                  rute.ANGKOT, rute.JALAN }, new int[] {
                  R.id.textID, R.id.textRute });
                  this.setListAdapter(adapter);
                  //db.close();

    } 
```

这是我的`ruteListAdapter`课：

```
private List<rute> route;
private int[] colors = new int[] { 0x30ffffff, 0x30808080 };
@SuppressWarnings("unchecked")
public ruteListAdapter(Context context, 
    List<? extends Map<String, String>> route, 
    int resource, 
    String[] from, 
    int[] to) {
super(context, route, resource, from, to);
this.route = (List<rute>) route;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
View view = super.getView(position, convertView, parent);
int colorPos = position % colors.length;
view.setBackgroundColor(colors[colorPos]);
return view;
} 
```

谁能帮我解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:13:30.057

尝试这个

```
progressDialog = ProgressDialog.show(hasilrute.this, "","Communicating",true); 

    new Thread(new Runnable() { 
         @Override 
         public void run() { 
            cariRute(tv);
            youActivityName.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    progressDialog.dismiss();

                }
            });
            try { 

            } catch (Exception e) { 
            // TODO: handle exception 
           } 

         } 
   }).start(); 
```

编辑

更新 UI 时的另一件事

使用 UI 线程

喜欢：

```
yourActivityName.this.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        ONGKOS.setText("        Ongkos : Rp."+harga);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:16:44.237

您正在从您创建的新线程中调用 cariRute(tv)，这很好。但是，在您的 cariRute() 方法中，您正在尝试更改 TextView 的文本。这种操作（编辑现有视图）必须在主 UI 线程上完成；您正在尝试在后台线程上执行此操作，因此它会给您一个错误。您将不得不更改您的代码，以便视图的更改发生在 UI 线程上。

（例如：让 cariRute(tv) 调用返回您想要显示的文本（也就是除了实际更改文本之外的所有其他操作）然后使用返回值在 UI 线程上设置文本。）

**根据您在评论中的解释进行编辑：**

你应该看看这个问题。（[Android，ListView IllegalStateException：“适配器的内容已更改，但 ListView 没有收到通知”](https://stackoverflow.com/questions/3132021/android-listview-illegalstateexception-the-content-of-the-adapter-has-changed)）本质上，如果您要编辑 ListView 的内容（通过更改 ListAdapter），您必须调用 notifyDataSetChanged 以便 listview知道检查数据的变化。

# rally - Rally Javascript API：如何确定缺陷需求的发布？

> ID：11348293
> 
> 赞同：1
> 
> 时间：2012-07-05T16:06:43.757
> 
> 标签：rally

我正在尝试创建一个 Rally Javascript API 应用程序，以将发布周期内报告的缺陷分解为“当前”和“先前”。当前 = 针对所选版本中的故事的缺陷。先前 = 针对先前版本中的故事或没有相关故事的缺陷。在这两种情况下，缺陷创建日期都必须在发布日期范围内。

这是我想要的基本流程：

1.  选择一个版本
2.  查询 CreationDate 在所选发布日期范围内的所有缺陷
3.  如果缺陷有需求并且需求在选定的版本中，则计为“当前”，否则计为“先前”

这看起来很简单，但我在确定是否针对所选版本中的故事报告了缺陷时遇到了障碍。缺陷具有 Requirement 属性，该属性表示缺陷所针对的故事，但 Requirement 对象没有 Release 属性。只有 HierarchicalRequirement 具有 Release 属性。

关于如何确定发布缺陷需求的任何想法？或者也许可以用不同的方法来完成同样的事情？

* * *

根据对代码段的请求：

我从目录中的[Defects by Closer](https://rally1.rallydev.com/#/697590494d/custom/6990991664)应用程序开始，因为它具有我想要的基本布局，并且只是修改了查询和表填充逻辑。

这是查询：

```
var relDateBeg = rally.sdk.util.DateTime.toIsoString(new Date(releaseDropdown.getSelectedStart()));
var relDateEnd = rally.sdk.util.DateTime.toIsoString(new Date(releaseDropdown.getSelectedEnd()));

var queryCriteria = '((CreationDate >= ' + relDateBeg + ') AND (CreationDate <= ' + relDateEnd + '))';
                var queryConfig =
                {
                    key   : "defects",
                    type  : "Defect",
                    fetch : "ObjectID,FormattedID,Name,ClosedDate,Requirement,CreationDate",
                    order : "FormattedID",
                    query : queryCriteria
                }; 
```

然后在`showResults()`处理查询结果的方法中，我遍历所有缺陷并填充表。在这段代码中，我检查缺陷是否有需求，如果是，我想检查需求属于哪个版本，以便我可以将缺陷分类为“当前”或“之前”，但需求对象没有释放财产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:18:52.870

将 Release 添加到您的 fetch 中。这应该包括每个缺陷和相关故事的结果中的发布。

# php - MySQL 查询给定时间段内的报告数据

> ID：11348297
> 
> 赞同：0
> 
> 时间：2012-07-05T16:06:52.883
> 
> 标签：php, mysql

我正在为我制作的招聘网站编写报告系统。到目前为止，我已经设法获得下面的函数来完成给定时间段内的总工作量，以天、几周、几个月或几年为单位

我想做的是浏览同一时期的所有工作申请。工作申请存储在另一个名为 job_application 的表中，并包含 job_application_id、job_id 和 date_added 字段

有没有办法可以在同一个查询中提取这些数据？SQL 开始让我大吃一惊，所以任何帮助都将不胜感激！

```
public function getJobReport($data = array()) {
    $sql = "SELECT MIN(tmp.date_added) AS date_start, MAX(tmp.date_added) AS date_end, COUNT(tmp.job_id) AS `jobs` FROM (SELECT j.job_id, j.date_added FROM `" . DB_PREFIX . "job` j WHERE 1"; 

    if (isset($data['date_start']) && $data['date_start']) {
        $sql .= " AND DATE(j.date_added) >= '" . $this->db->escape($data['date_start']) . "'";
    }

    if (isset($data['date_end']) && $data['date_end']) {
        $sql .= " AND DATE(j.date_added) <= '" . $this->db->escape($data['date_end']) . "'";
    }

    $sql .= " GROUP BY j.job_id) tmp";

    if (isset($data['group'])) {
        $group = $data['group'];
    } else {
        $group = 'week';
    }

    switch($group) {
        case 'day';
            $sql .= " GROUP BY DAY(tmp.date_added)";
            break;
        default:
        case 'week':
            $sql .= " GROUP BY WEEK(tmp.date_added)";
            break;  
        case 'month':
            $sql .= " GROUP BY MONTH(tmp.date_added)";
            break;
        case 'year':
            $sql .= " GROUP BY YEAR(tmp.date_added)";
            break;                                  
    }

    if (isset($data['start']) || isset($data['limit'])) {
        if ($data['start'] < 0) {
            $data['start'] = 0;
        }           

        if ($data['limit'] < 1) {
            $data['limit'] = 20;
        }   

        $sql .= " LIMIT " . (int)$data['start'] . "," . (int)$data['limit'];
    }   

    $query = $this->db->query($sql);

    return $query->rows;        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:29:23.933

我不明白为什么这里需要子查询...此查询使用左连接并选择您输入的开始和结束日期作为列，然后选择 GROUP（因此将只有一个结果行）。我对您的标识符的细节略加了一些，以使其更具可读性。

```
...
$date_resolution_function = "DAY"; // set via a switch similar to yours
...
SELECT 
  $date_resolution_function(apps.date_added), 
  count(jobs.id) as numb_jobs, 
  count(apps.id) as num_apps
FROM 
  jobs JOIN job_application as apps ON jobs.id = apps.job_id
WHERE apps.date_added BETWEEN $start_date AND $end_date
GROUP BY $date_resolution_function(apps.date_added) 
```

编辑：请注意，此技术需要设置您的开始和结束日期......但我强烈建议您无论如何定义合理的默认值。如果您希望默认值较宽，请使用 epoch 和 +100 年后的时间，或其他内容……但也许像“本季度”这样的内容更适合您的客户。

编辑 2（添加日期解析）：重要的是要意识到，通过这种查询，您只能在任何一个工作或应用程序上获得准确的日期选择，而另一个将是“全部”。我选择了我认为更明智的选择，在申请日期选择并包括所有职位，无论它们何时发布（如果他们在指定期间提交了申请）。如果您想要其他方式（仅显示在此期间发布的工作），您可以更改传递给日期函数的列，并使 JOIN 成为 LEFT 连接...但请记住，应用程序数量的数据工作将持续整个时期，而不仅仅是发布工作的日期/周。

# jquery - 锚标记仅在基于 webkit 的浏览器中无法正确链接

> ID：11348301
> 
> 赞同：1
> 
> 时间：2012-07-05T16:07:09.747
> 
> 标签：jquery, html, webkit

我有一个在基于 webkit 的浏览器中行为不正确的锚标记。我最初认为这是因为我有一个正则表达式可以将文本字符串中的 url 动态转换为适当的锚标记。我删除了所有动态代码和动画，但我仍然遇到同样的问题。我还尝试给元素一个巨大的 z-index，但这也不起作用。在玩它的时候，我注意到 mouseover 事件被触发了，但是 click 事件没有被触发。

URL 是[http://stream9.net](http://stream9.net)。当您将鼠标悬停在 Twitter 鸟上时，我们最近的推文会从右侧拉出并在末尾显示 URL。任何帮助是极大的赞赏。

# django - django i18n_patterns 从 url 隐藏默认 lang_code

> ID：11348303
> 
> 赞同：8
> 
> 时间：2012-07-05T16:07:15.373
> 
> 标签：django, url, internationalization, url-routing

我正在使用 i18n_patterns 将当前 lang_code 的前缀添加到我的 url。

```
urlpatterns += i18n_patterns('',
    url(r'^', include('blaszczakphoto2.gallery.urls')),
) 
```

它使我可以获取诸如等之类的网址`/en/about-us/`。`/pl/about-us/`我的默认语言是`pl`

```
LANGUAGE_CODE = 'pl' 
```

我想要像 /about-us/ 这样的网址，供客户以波兰语查看我的网站。有没有办法从默认 lang_code 的 url 隐藏 lang_code 前缀？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-05-11T09:36:35.303

Django`>=1.10`可以本机处理这个问题。函数中有一个新`prefix_default_language`参数`i18n_patterns`。

> 设置`prefix_default_language`为从默认语言 ( )`False`中删除前缀。`LANGUAGE_CODE`这在将翻译添加到现有站点时很有用，这样当前的 URL 就不会改变。

*来源：* [https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#language-prefix-in-url-patterns](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#language-prefix-in-url-patterns)

例子：

```
# Main urls.py:
urlpatterns = i18n_patterns(
    url(r'^', include('my_app.urls', namespace='my_app')), 
    prefix_default_language=False
)

# my_app.urls.py:
url(r'^contact-us/$', ...),

# settings:
LANGUAGE_CODE = 'en' # Default language without prefix

LANGUAGES = (
    ('en', _('English')),
    ('cs', _('Czech')),
) 
```

will的回复`example.com/contact-us/`是英语和`example.com/cs/contact-us/`捷克语。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-07T22:23:29.907

这是一个非常简单的包：[django-solid-i18n-urls](https://github.com/st4lk/django-solid-i18n-urls)

设置后，没有语言前缀的 url 将始终使用默认语言，即在`settings.LANGUAGE_CODE`. 不会发生重定向。

如果 url 将具有语言前缀，则将使用该语言。

也在这里回答：[https](https://stackoverflow.com/a/16580467/821594) ://stackoverflow.com/a/16580467/821594 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T21:10:31.723

我遇到了这个问题并以这种方式解决了：

*   `i18n_patterns`创建了一个不作为站点主要语言前缀的替代方案（在 中定义`settings.LANGUAGE_CODE`）。

*   创建了一个仅使用 URL 前缀语言来激活当前语言的替代中间件。

我没有看到使用这种技术的任何副作用。

编码：

```
# coding: utf-8
"""
Cauê Thenório - cauelt(at)gmail.com

This snippet makes Django do not create URL languages prefix (i.e. /en/)
for the default language (settings.LANGUAGE_CODE).

It also provides a middleware that activates the language based only on the URL.
This middleware ignores user session data, cookie and 'Accept-Language' HTTP header.

Your urls will be like:

In your default language (english in example):

    /contact
    /news
    /articles

In another languages (portuguese in example):

    /pt/contato
    /pt/noticias
    /pt/artigos

To use it, use the 'simple_i18n_patterns' instead the 'i18n_patterns'
in your urls.py:

    from this_sinppet import simple_i18n_patterns as i18n_patterns

And use the 'SimpleLocaleMiddleware' instead the Django's 'LocaleMiddleware'
in your settings.py:

    MIDDLEWARE_CLASSES = (
    ...
        'this_snippet.SimpleLocaleMiddleware'
    ...
    )

Works on Django >=1.4
"""

import re

from django.conf import settings
from django.conf.urls import patterns
from django.core.urlresolvers import LocaleRegexURLResolver
from django.middleware.locale import LocaleMiddleware
from django.utils.translation import get_language, get_language_from_path
from django.utils import translation

class SimpleLocaleMiddleware(LocaleMiddleware):

    def process_request(self, request):

        if self.is_language_prefix_patterns_used():
            lang_code = (get_language_from_path(request.path_info) or
                         settings.LANGUAGE_CODE)

            translation.activate(lang_code)
            request.LANGUAGE_CODE = translation.get_language()

class NoPrefixLocaleRegexURLResolver(LocaleRegexURLResolver):

    @property
    def regex(self):
        language_code = get_language()

        if language_code not in self._regex_dict:
            regex_compiled = (re.compile('', re.UNICODE)
                              if language_code == settings.LANGUAGE_CODE
                              else re.compile('^%s/' % language_code, re.UNICODE))

            self._regex_dict[language_code] = regex_compiled
        return self._regex_dict[language_code]

def simple_i18n_patterns(prefix, *args):
    """
    Adds the language code prefix to every URL pattern within this
    function, when the language not is the main language.
    This may only be used in the root URLconf, not in an included URLconf.

    """
    pattern_list = patterns(prefix, *args)
    if not settings.USE_I18N:
        return pattern_list
    return [NoPrefixLocaleRegexURLResolver(pattern_list)] 
```

上面的代码可在： [https ://gist.github.com/cauethenorio/4948177](https://gist.github.com/cauethenorio/4948177)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:54:47.400

您可能想检查[yawd-translations](https://github.com/yawd/yawd-translations)正是这样做的。如果您不关心额外的功能（从 db 管理语言），您可以查看`urls.translation_patterns`方法并`middleware.TranslationMiddleware`了解它是如何完成的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:24:14.387

这是我的解决方案：

创建 django 中间件：django_app/lib/middleware/locale.py

```
from django.utils import translation

    class SwitchLanguageMiddleware(object):

        def process_request(self, request):
            lang = request.GET.get('lang', '')

            if lang:
                translation.activate(lang)
                request.LANGUAGE_CODE = translation.get_language()

        def process_response(self, request, response):
            request.session['django_language'] = translation.get_language()
            if 'Content-Language' not in response:
                response['Content-Language'] = translation.get_language()
            translation.deactivate()

            return response 
```

读取request的get参数，如果有lang属性，则切换语言。例如：/about-us/?lang=pl

将此中间件包含到 settings.py 中：

```
MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.common.CommonMiddleware',

    'django_app.libs.middleware.locale.SwitchLanguageMiddleware',
) 
```

# php - 像谷歌地图一样 - 只是本地的

> ID：11348304
> 
> 赞同：0
> 
> 时间：2012-07-05T16:07:19.637
> 
> 标签：php, javascript, html, google-maps, geolocation

我一直在寻找我们产品的解决方案。我们在没有互联网连接的基于网络的仪表板上有一个地理位置。

我一直在寻找一种可以让您拥有本地地图和脚本的产品，我发现 OpenLayers 虽然重量为 22gb，但看起来很酷。

您知道是否有其他解决方案可以在本地生成占用更少空间的地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:16:16.070

如果我假设正确，您基本上是在寻找 Google Maps 的替代品，即您可以使用自己的本地数据的替代地图服务，对吗？

现在，根据您的问题，很难判断您是否

1.  想为自己开发一些东西或购买/采用已经实施的软件
2.  正在寻找服务器端（即平铺/缓存引擎、地理空间数据库等）或客户端或两者

如果您想自己开发客户端应用程序，我可以给您一个可能的配置示例，但这可能不是您真正想要的。

对于服务器端，您可以使用[MapServer](http://mapserver.org/)，由[PostGIS](http://www.postgis.org/)空间数据库（PostGIS 是 PostgreSQL 的增强版）支持，然后使用基于 OpenLayers 的客户端 Javascript 框架来开发您的客户端应用程序（即地图查看器），例如[Fusion](http://research.dmsolutions.ca/projects/fusion/)，它也基于 MooTools Javascript 库。您也可以使用 OpenLayers 进行本地开发。开源世界有很多可能性，这取决于你拥有的技能和时间。

另外，看看[OSGEO](http://www.osgeo.org/)，在右侧边栏中，您会发现很多由他们托管的项目。它绝对是您第一个使用开源网络地图解决方案的地址。

# jquery - IE9背景：过滤器和jquery点击事件

> ID：11348306
> 
> 赞同：1
> 
> 时间：2012-07-05T16:07:21.993
> 
> 标签：jquery, internet-explorer-9

奇怪的问题，我使用 CSS3 渐变来创建淡出叠加效果（ala 灯箱）。

在 IE9 中，我注意到（由于我使用过滤器：progid:DXImageTransform.Microsoft.gradient）我的覆盖层不可点击，并且不会阻止我点击并悬停在下方。

我创建了一个小提琴：http: [//jsfiddle.net/tJPF6/](http://jsfiddle.net/tJPF6/)

预期行为：单击数字。出现模态窗口。不能将鼠标悬停在数字上以获得悬停效果。可以单击覆盖上的任意位置以将其关闭。

IE9 行为：单击数字。出现模态窗口。可以将鼠标悬停在数字上以获得悬停效果。不能单击覆盖上的任何位置以将其关闭。

有没有人有这方面的经验？我可以重新使用 PNG，但如果可能的话，我更愿意坚持使用渐变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:45:44.287

你只需要为 div 添加一个实际的背景。IE 有一个臭名昭著的问题，即无法识别对具有透明背景的元素的点击，并且您拥有的 CSS 使每个版本的 IE 的背景在技术上都是透明的（过滤器不算作背景）。

*只需在其他背景定义之前*添加一个备用背景，即：

```
#transCover {
    background:#666; /* add this line */
    background: -moz-linear-gradient(top,  rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.4) 1%, rgba(0,0,0,0.4) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0.4)), color-stop(1%,rgba(0,0,0,0.4)), color-stop(100%,rgba(0,0,0,0.4))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(0,0,0,0.4) 0%,rgba(0,0,0,0.4) 1%,rgba(0,0,0,0.4) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(0,0,0,0.4) 0%,rgba(0,0,0,0.4) 1%,rgba(0,0,0,0.4) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(0,0,0,0.4) 0%,rgba(0,0,0,0.4) 1%,rgba(0,0,0,0.4) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(0,0,0,0.4) 0%,rgba(0,0,0,0.4) 1%,rgba(0,0,0,0.4) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#66000000', endColorstr='#66000000',GradientType=0 ); /* IE6-9 */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:19:39.273

我建议你留在png。不使用 IE 滤镜功能进行渐变的原因有很多：

*   无论如何，微软都将弃用它的 css3 功能，因为它们将替换过滤器的所有功能
*   根据我的经验，ms 过滤器的渲染引擎（我曾经尝试过它）与页面渲染的其余部分相结合可能会导致意想不到的结果：

    *   元素消失
    *   字体未正确呈现
    *   链接不可点击，悬停不工作（你现在遇到的那种）

在您的情况下，如果您已经使用 png 实现了解决方案，请保持原样。它将为您节省很多麻烦，无需从任何地方开始调试所花费的时间等。

# r - 是否有记录数据框的标准方法？

> ID：11348320
> 
> 赞同：11
> 
> 时间：2012-07-05T16:08:09.270
> 
> 标签：r, dataframe

给定一个数据框 DF，很容易将 DF 保存为 R 对象，`save()`并与同事共享。但是，通常需要附加一个单独的文档来解释精确的列定义。是否有（标准/通用）方法将此信息包含在对象中？

如果我们为 DF 构建一个包，我们可以创建一个帮助页面来解释所有这些细节，比如内置数据集。因此数据和解释总是可用的，我们只需要共享一个包源文件。但是，对于这个问题，构建一个包似乎过分了。（作为附带的好处，我们将获得对数据集的版本控制，因为更改会增加包版本号）。

Hmisc 包包含该`label()`函数，该函数为对象添加了一个新属性。包含用于子集/创建/等 data.frames 的相关方法以传播新属性（因为属性通常被大多数函数删除）。

设置属性显然是编写包的替代方法，我们可以添加任意命名的属性。

一个简单的例子：

```
DF <-
structure(list(Gender = structure(c(1L, 1L, 1L, 2L, 2L, 2L), .Label = c("Female",
"Male"), class = "factor"), Date = structure(c(15518, 15524,
15518, 15526, 15517, 15524), class = "Date"), Dose = c(15, 10,
11, 11, 12, 14), Reaction = c(7.97755180189919, 11.7033586194156,
9.959784869289, 6.0170950790238, 1.92480908119655, 7.70265419443507
)), .Names = c("Gender", "Date", "Dose", "Reaction"), row.names = c(NA,
-6L), class = "data.frame")

library(Hmisc)

label(DF$Reaction) <- "Time to react to eye-dot test, in seconds, recorded electronically"

# or we could set our own attributes

attr(DF$Date,"Description") <- "Date of experiment. Note, results are collected weekly from test centres"

# Since Hmisc adds class "labelled" to data.frame and impelments
# the appropriate methods, the formed is retained on subsetting 
# (not that this is feature is wanted)

DF.mini <- DF[ DF$Gender=="Male",]

# compare
str(DF)      # Not quite sure why str() prints the label attribute but not the Desciptions
str(DF.mini) # we retain the label attribute

attributes(DF$Date)
attributes(DF.mini$Date) # we lose the Description attribute 
```

所以我的问题：

1.  人们是否在他们的对象中包含额外的信息（我的示例是一个数据框，但适用于所有 R 对象），将所有相关信息保存在一个地方？
2.  如果是，如何？
3.  好奇，为什么要`str()`打印标签属性，我相信 Hmisc 包在某处添加了另一个函数/方法，但不明白为什么 - 有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T16:24:45.833

有一个基本功能：`comment`它可以分配或检索存储在属性中的文本。

（而且我不明白为什么要`str`打印标签的问题。不应该显示所有（非名称，非类，非行名）属性`str`吗？）

# tsql - 为什么这个字段没有出现在结果中？

> ID：11348322
> 
> 赞同：0
> 
> 时间：2012-07-05T16:08:16.097
> 
> 标签：tsql

当我运行下面的选择时，我没有在结果集中得到 Field3，为什么？

```
 Select 
        a.Field1,
        a.Field2,
        a.Field3,
        sum(IsNull(a.Field4, 0)) AS SomeAlias1,
        a.SomeField5,
        a.SomeField6,
        a.SomeField7
From SomeTable a
INNER JOIN SomeView1 v on v.au = a.au
inner join (select Username, House from Users userBuildings where UserName = @UserName) as userHouses on userHouses.au = a.au
WHERE
(((where claus logic here....

Group BY    a.Field1, 
        a.Field2, 
        a.SomeAlias1, 
        a.Field3,
        a.Field4,
        a.Field5,
        a.Field6,
        a.Fielf7
)

Select 
    transBudget.Field1,
    transBudget.Field2,
    transDiscount.Field4,
    ... some other fields...
    IsNull(transDiscount.Actual, 0) - IsNull(transBudget.Actual, 0) AS Variance 
from (Select * from Transactdions Where TransDesc = 'Budget') AS transBudget
    FULL OUTER JOIN
    (Select * from Transactions Where TransDesc = 'Discount') AS transDiscount
        ON transBudget.Market = transDiscount.Market AND transBudget.SubMarket = transDiscount.SubMarket 
```

出于某种原因，我看到了除 Field3 之外的所有领域，这到底是如何发生的，这超出了我的理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:11:17.093

在查询的第二部分中，您缺少字段 3。

```
Select 
    transBudget.Field1,
    transBudget.Field2,
    transDiscount.Field4,
    ... some other fields...
    IsNull(transDiscount.Actual, 0) 
```

您似乎在那里有两个单独的 SQL 查询。第一个包含 Field3，但第二个不包含。

# c# - 适用于 .Net 的 Blackmagic Decklink 接口

> ID：11348326
> 
> 赞同：5
> 
> 时间：2012-07-05T16:08:31.353
> 
> 标签：c#, .net, interface, video-capture, directshow.net

我正在使用 DirectShowLib.Net 为 C# .Net 寻找一个 decklink 视频设备的接口。

似乎有可用的，因为它们在这里使用： [blackmagic SDK in c#](https://stackoverflow.com/questions/6355930/blackmagic-sdk-in-c-sharp) 不幸的是没有信息，使用了哪个库，并且要求更多信息的评论被忽略了。

但我不知道在哪里可以找到它们。会很好，如果有人可以给我一个提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T12:24:50.173

SDK 可从 Blackmagic 网站获得：[Blackmagic Design SDKs](http://www.blackmagic-design.com/support/sdks/)。示例代码大部分是 C++，但也有一部分是 C#。SDK 上有所有 IDL 文件，您可以将接口转换为 .NET 兼容的形状。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T19:19:05.830

还有可用的第三方 SDK，根据您的任务可能更有效。例如这个[用于摄取和播放的 SDK](http://www.medialooks.com/mplatform/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T13:13:45.547

很抱歉发布到旧线程。也许有人觉得它有用。

[GitHub 上](https://github.com/simongh/DeckLink.net)有一个 DeckLink .NET 包装器，但我发现它用处不大，因为如果您在 Visual Studio 中引用 C:\Program Files (x86)\Blackmagic Design\Blackmagic Desktop Video\DeckLinkAPI.dll，则会自动创建 C# Interop（包装器） .

# python - Scapy 性能低下

> ID：11348328
> 
> 赞同：4
> 
> 时间：2012-07-05T16:08:37.330
> 
> 标签：python, networking, scapy

我正在创建一个脚本，将来自 Tap0 的所有流量发送到 Eth0，并将来自 Eth0 的所有流量发送到 Tap0。在网上找到了很多例子后，我设法使它工作。我遇到的问题是性能非常低。

在不使用脚本的情况下在 2 个 VM 之间进行 Ping，所需时间不到 1 毫秒。使用脚本大约需要 15 毫秒。

当我使用 scp 从一个 VM 发送一个 10 MB 的文件到另一个时，avg. 没有脚本的传输速率为 12 Mbps。使用该脚本，它会下降到低于 1 Mbps。

我知道 Python 实际上并不是处理网络流量最快的语言，但它有那么慢吗？

有没有办法优化这段代码？

我的虚拟机是 Ubuntu 10.04 32 位。

这是代码：

```
import os,sys,getopt,struct,re,string,logging

from socket import *
from fcntl  import ioctl
from select import select

from scapy.all import *

TUNSETIFF = 0x400454ca
IFF_TAP   = 0x0002
TUNMODE   = IFF_TAP

ETH_IFACE  = "eth0"
TAP_IFACE = "tap0"

conf.iface = ETH_IFACE

# Here we capture frames on ETH0
s = conf.L2listen(iface = ETH_IFACE)

# Open /dev/net/tun in TAP (ether) mode (create TAP0)
f = os.open("/dev/net/tun", os.O_RDWR)
ifs = ioctl(f, TUNSETIFF, struct.pack("16sH", "tap%d", TUNMODE))

# Speed optimization so Scapy does not have to parse payloads
Ether.payload_guess=[]

os.system("ifconfig eth0 0.0.0.0")
os.system("ifconfig tap0 192.168.40.107")
os.system("ifconfig tap0 down")
os.system("ifconfig tap0 hw ether 00:0c:29:7a:52:c4")
os.system("ifconfig tap0 up")

eth_hwaddr = get_if_hwaddr('eth0')

while 1:
 r = select([f,s],[],[])[0] #Monitor f(TAP0) and s(ETH0) at the same time to see if a frame came in.

 #Frames from TAP0
 if f in r:  #If TAP0 received a frame
  # tuntap frame max. size is 1522 (ethernet, see RFC3580) + 4
  tap_frame = os.read(f,1526)
  tap_rcvd_frame = Ether(tap_frame[4:]) 
  sendp(tap_rcvd_frame,verbose=0) #Send frame to ETH0

 #Frames from ETH0
 if s in r: #If ETH0 received a frame   
  eth_frame = s.recv(1522)
  if eth_frame.src != eth_hwaddr:           
   # Add Tun/Tap header to frame, convert to string and send. "\x00\x00\x00\x00" is a requirement when writing to tap interfaces. It is an identifier for the Kernel.
   eth_sent_frame = "\x00\x00\x00\x00" + str(eth_frame)     
   os.write(f, eth_sent_frame) #Send frame to TAP0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:50:17.627

老实说，我对它的预演以及它的现状感到惊讶。如果你能做得比现在更好，我会感到惊讶。

请记住数据包必须遵循的路径才能穿过您的用户陆桥：

通过 NIC 驱动程序进入一个接口，进入内核，然后它必须等待上下文切换到用户空间，在那里它必须在你的代码评估它之前使用 scapy 协议抽象。然后你的代码发送回 scapy 协议抽象（可能在 python 用户空间中重新组装数据包），被写入套接字，等待上下文切换回内核态，写入 NIC 驱动程序，最后被发送出去界面...

现在，当您通过该链接进行 ping 操作时，您会测量两次完成整个过程所需的时间——一次去一次，一次返回。

考虑你的上下文从内核切换到用户域 4 次（每个方向 2 次）并且你能够在 0.015 秒内完成 - 这非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T19:27:27.307

我有类似的问题：来自似乎已经[剖析了 scapy 源代码的链接](https://byt3bl33d3r.github.io/mad-max-scapy-improving-scapys-packet-sending-performance.html)

> 每次调用 send() 或 sendp() 时，Scapy 都会为您发送的每个数据包自动创建和关闭一个套接字！我可以从中看到便利，使 API 更简单！但我敢打赌，这肯定会影响性能！

这里也有[类似的分析（link2）](https://home.regit.org/2014/04/speeding-up-scapy-packets-sending/)。因此，您可以按照链接 2 中的示例代码进行优化。

```
 #The code sample is from
 #https://home.regit.org/2014/04/speeding-up-scapy-packets-sending/
 #also see https://byt3bl33d3r.github.io/mad-max-scapy-improving-scapys-packet-sending-performance.html for similar sample. This works.
 def run(self):
     # open filename
     filedesc = open(self.filename, 'r')
     s = conf.L2socket(iface=self.iface) #added
     # loop on read line
     for line in filedesc:
         # Build and send packet
         # sendp(pkt, iface = self.iface, verbose = verbose) This line goes out
         s.send(pkt) #sendp() is replaced with send() 
```

# ruby-on-rails - 如何在 gem 中扩展 ApplicationController？

> ID：11348332
> 
> 赞同：19
> 
> 时间：2012-07-05T16:08:43.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, applicationcontroller, load-order

我想我会想出一个巧妙的方法来在 Rails 3.x gem 中扩展 ApplicationController。

在我的宝石中`lib/my_namespace/my_controller.rb`，我有：

```
class MyNamespace::MyController < ApplicationController

  before_filter :some_method
  after_filter :another_method

  def initialize
    # getting classname of the subclass to use for lookup of the associated model, etc.
    # and storing the model_class in an instance variable
    # ...
  end

  # define :some_method, :another_method, etc.
  # ...

private
  attr_accessor :subclass_defined_during_initialize # etc.

  # etc.
end 
```

但是当 Gem 被加载时，`app/controllers/application_controller.rb`还没有加载，所以它失败了：

```
/path/to/rvm/gemset/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:
in `require': cannot load such file -- my_gem_name/application_controller (LoadError) 
```

作为一种解决方法，我在我的 gem 中将 ApplicationController 定义`lib/gem_namespace/application_controller.rb`为：

```
class ApplicationController < ActionController::Base
end 
```

我假设即使我在那里定义了它，它也会在我的 Rails 3 应用程序中重新定义`app/controllers/application_controller.rb`，这样扩展的应用程序中的控制器和扩展的`ApplicationController`控制器`MyNamespace::MyController`都会直接或间接扩展`app/controllers/application_controller.rb`.

但是，我们注意到加载 gem 后，扩展`ApplicationController`的控制器无法访问`app/controllers/application_controller.rb`. 此外，该`ApplicationHelper` `(app/helpers/application_helper.rb)`模块不再被其他辅助模块加载。

我如何`ApplicationController`在我的 gem 中的控制器中进行扩展，以便定义 a`before_filter`和`after_filter`to 并使用它`initialize`来访问类的名称以确定关联模型的类，然后它可以在其方法中存储和使用该类？

*2012 年 10 月 22 日更新*：

这是我想出的：

在`lib/your_gem_name/railtie.rb`：

```
module YourGemsModuleName
  class Railtie < Rails::Railtie
    initializer "your_gem_name.action_controller" do
    ActiveSupport.on_load(:action_controller) do
      puts "Extending #{self} with YourGemsModuleName::Controller"
      # ActionController::Base gets a method that allows controllers to include the new behavior
      include YourGemsModuleName::Controller # ActiveSupport::Concern
    end
  end
end 
```

并在`lib/your_gem_name/controller.rb`：

```
module YourGemsModuleName
  module Controller
    extend ActiveSupport::Concern

    # note: don't specify included or ClassMethods if unused

    included do
      # anything you would want to do in every controller, for example: add a class attribute
      class_attribute :class_attribute_available_on_every_controller, instance_writer: false
    end

    module ClassMethods
      # notice: no self.method_name here, because this is being extended because ActiveSupport::Concern was extended
      def make_this_controller_fantastic
        before_filter :some_instance_method_available_on_every_controller # to be available on every controller
        after_filter :another_instance_method_available_on_every_controller # to be available on every controller
        include FantasticStuff
      end
    end

    # instance methods to go on every controller go here
    def some_instance_method_available_on_every_controller
      puts "a method available on every controller!"
    end

    def another_instance_method_available_on_every_controller
      puts "another method available on every controller!"
    end

    module FantasticStuff
      extend ActiveSupport::Concern

      # note: don't specify included or ClassMethods if unused

      included do
        class_attribute :class_attribute_only_available_on_fantastic_controllers, instance_writer: false
      end

      module ClassMethods
        # class methods available only if make_this_controller_fantastic is specified in the controller
        def some_fanastic_class_method
          put "a fantastic class method!"
        end
      end

      # instance methods available only if make_this_controller_fantastic is specified in the controller
      def some_fantastic_instance_method
        puts "a fantastic instance method!"
      end

      def another_fantastic_instance_method
        puts "another fantastic instance method!"
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T16:11:46.310

对于这种特定类型的功能，我建议在您的 gem 中创建一个模块并将该模块包含在您的应用程序控制器中

```
class ApplicationController < ActionController::Base
  include MyCoolModule
end 
```

添加前置过滤器等（将其添加到您的模块中）

```
def self.included(base)
  base.send(:before_filter, my_method)
end 
```

更新：您也许可以做`base.before_filter :my_method`更清洁的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T23:37:44.577

[这是一个要点](https://gist.github.com/3057139) ，它显示了如何访问子类的类并将其存储在实例变量中，并在前后过滤器中访问它。它使用包含方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-24T17:30:13.623

真理要简单得多，灵活得多。

添加`lib/engine.rb`到此：`class Engine < Rails::Engine; end`

然后只需使用：

```
ActionController::Base.class_eval do

  include SomethingFromMineGemModule

  # or:
  def hello_from_gem
    'Hey people!'
  end

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T19:58:21.583

我能够使用初始化回调来引用 ApplicationController。

子类/引用 ApplicationController 的 gem 代码：

```
class GemApplicationController < ApplicationController
  before_filter :method_to_call

  def method_to_call
    #your code here
  end
end 
```

用于创建子类控制器的 gem 代码回调：

```
module GemName
  def self.load_gem_application_controller
    require "path/to/gem_application_controller"
  end
end 
```

rails_app/config/initializers/gem_name.rb

```
GemName.load_gem_application_controller 
```

然后让控制器使用此功能的子类 GemApplicationController

```
class SpecialCaseController < GemApplicationController
  # this will inherit from the gem's controller, 
  # which inherits from the rails_app ApplicationController
end 
```

# xcode - 加载 sqlite 本地数据库时显示活动指示器

> ID：11348335
> 
> 赞同：0
> 
> 时间：2012-07-05T16:08:52.490
> 
> 标签：xcode, arrays, sqlite, uiactivityindicatorview, nsautoreleasepool

我有一个本地 SQLite 数据库，需要返回大量记录。加载需要几秒钟，所以我想添加一个活动指示器。活动指示器似乎在正常运行，但问题是池不允许数组返回任何值，见下文。

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        activityIndicator = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray] autorelease];
        activityIndicator.frame = CGRectMake(0.0, 0.0, 48.0, 48.0);
        activityIndicator.center = self.view.center;
        [self.view addSubview:activityIndicator];

        [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
         [activityIndicator startAnimating];            

     [self performSelectorInBackground:@selector(loadData) withObject:nil];   

    }
//What I need to load from SQLITE
-(void)loadData {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; // Path to the database

//CODED HERE FOR DATABASE TO OPEN AND QUERY HERE TO BUILD ARRAYS

        NSString *firstField = [NSString stringWithUTF8String:cFirst];
                NSString *secondField = [NSString stringWithUTF8String:cSecond];
                NSString *thirdField = [NSString stringWithUTF8String:cThird];

                [FirstArray addObject:firstField];
        [SecondArray addObject:secondField];
                [ThirdArray addObject:thirdField];  

   //Checking to see if records are being added to the arrays
NSString *recordAdded = [NSString stringWithFormat:@"%@ - %@ - %@", firstField, secondField, thirdField];

                    NSLog(@"Song: %@", recordAdded);

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;     
    [activityIndicator stopAnimating];

  [pool release];   
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

        NSString *firstValue = [firstArray objectAtIndex:indexPath.row]; 
        NSString *secondValue = [secondArray objectAtIndex:indexPath.row];
        NSString *thirdValue = [thirdArray objectAtIndex:indexPath.row];

        NSString *details = [NSString stringWithFormat:@"%@ - %@", secondValue, thirdValue];

        cell.textLabel.text = cellValue;

        cell.detailTextLabel.text = details ;

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
} 
```

当我查看调试器时，我看到随着活动指示器的进行而构建数组。问题是我认为池释放也在释放我的阵列。

当我不添加池和活动指示器时，代码可以很好地在表视图中返回查询。

如果这就是这里发生的事情，任何人都可以帮助我指出正确的方向，不要释放阵列吗？任何形式的帮助将不胜感激。:-)

---另外--- 环顾四周后，我发现我必须将数组传递回主线程。这是我从网上搜索收集到的。

```
[self performSelectorOnMainThread:@selector(done:) withObject:cellData waitUntilDone:NO]; 
```

我将如何使用这些数组加载表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:43:10.170

不确定您的池是否会释放数组，您的代码似乎很直接。您可能想检查您是否真的从数据库中获取任何数据。

但是，我注意到您停止在后台线程中为活动指示器设置动画。UI 活动应该在主线程中完成。我昨晚刚刚完成了这个编码，并使用这个[线程](https://stackoverflow.com/questions/3317068/how-do-i-show-and-start-animating-a-uiactivityindicatorview-from-within-a-method)解决了我的问题。将停止动画代码放入 performSelectorOnMainThread 指定的选择器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:00:31.840

字符串很好，因为它们被添加到数组中。

看起来您的数组正在被释放，但您没有显示它的代码。

你是如何创建数组本身的？如果它是自动释放的，它将在您耗尽池时被释放。您应该“保留”它而不是“自动释放”它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T18:37:53.843

尝试`[tableview reloadData]`在末尾添加`-(void)loadData method`

# python - 查找列表中不常见的元素

> ID：11348347
> 
> 赞同：32
> 
> 时间：2012-07-05T16:09:20.993
> 
> 标签：python, algorithm, list, set, discrete-mathematics

我正在尝试编写一段可以自动分解表达式的代码。例如，如果我有两个列表[1,2,3,4]和[2,3,5]，代码应该能够找到两个列表中的共同元素，[2,3]，并结合其余元素一起在一个新列表中，即 [1,4,5]。

来自这篇文章：[如何找到列表交集？](https://stackoverflow.com/questions/3697432/python-how-to-find-list-intersection) 我看到可以通过以下方式找到共同元素

```
set([1,2,3,4]&set([2,3,5]). 
```

有没有一种简单的方法可以从每个列表中检索非常见元素，在我的示例中是 [1,4] 和 [5]？

我可以继续做一个 for 循环：

```
lists = [[1,2,3,4],[2,3,5]]
conCommon = []
common = [2,3]
for elem in lists:
    for elem in eachList:
    if elem not in common:
        nonCommon += elem 
```

但这似乎是多余且低效的。Python 是否提供任何方便的函数来做到这一点？提前致谢！！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-05T16:12:07.917

对 s 使用对称差分算子`set`（又名 XOR 算子）：

```
>>> set([1,2,3]) ^ set([3,4,5])
set([1, 2, 4, 5]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-18T07:56:41.710

您可以使用 Intersection 概念来处理此类问题。

```
b1 = [1,2,3,4,5,9,11,15]
b2 = [4,5,6,7,8]
set(b1).intersection(b2)
Out[22]: {4, 5} 
```

使用此代码最好的一点是它也适用于大数据。当我使用这个逻辑时，我有 607139 的 b1 和 296029 元素的 b2 ，我在 2.9 秒内得到了结果。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-01-21T20:56:06.120

老问题，但看起来 python 有一个内置函数来提供你正在寻找的内容：`.difference()`.

**例子**

```
list_one = [1,2,3,4]
list_two = [2,3,5]

one_not_two = set(list_one).difference(list_two)
# set([1, 4])

two_not_one = set(list_two).difference(list_one)
# set([5]) 
```

这也可以写成：

```
one_not_two = set(list_one) - set(list_two) 
```

**定时**

我对两者都进行了一些计时测试，似乎`.difference()`有轻微的优势，大约为 10 - 15%，但每种方法都需要大约八分之一秒来过滤 1M 项（500 到 100,000 之间的随机整数），所以除非你'对时间*非常*敏感，这可能无关紧要。

**其他注意事项**

看来 OP 正在寻找一种提供两个单独列表（或集合）的解决方案 - 第一个列表包含第二个不包含的项目，反之亦然。以前的大多数答案都返回一个包含所有项目的列表或集合。

还有一个问题是，是否应该多次计算第一个列表中可能重复的项目，还是只计算一次。

如果 OP 想要维护重复项，可以使用列表推导，例如：

```
one_not_two = [ x for x in list_one if x not in list_two ]
two_not_one = [ x for x in list_two if x not in list_one ] 
```

...这与原始问题中提出的解决方案大致相同，只是更简洁一些。此方法将保留原始列表中的重复项，但对于较大的数据集，速度要慢得多（如多个数量级）*。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-01T07:25:00.930

您可以使用`.__xor__`属性方法。

```
set([1,2,3,4]).__xor__(set([2,3,5])) 
```

或者

```
a = set([1,2,3,4])
b = set([2,3,5])
a.__xor__(b) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-05T06:18:36.023

这应该得到共同和剩余的元素

```
lis1=[1,2,3,4,5,6,2,3,1]
lis2=[4,5,8,7,10,6,9,8]

common = list(dict.fromkeys([l1 for l1 in lis1 if l1 in lis2]))
remaining = list(filter(lambda i: i not in common, lis1+lis2)) 
```

`common = [4, 5, 6]`

`remaining = [1, 2, 3, 2, 3, 1, 8, 7, 10, 9, 8]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-10T13:26:53.803

您可以使用 symmetric_difference 命令

x = {1,2,3} y = {2,3,4}

z = set.difference(x,y)

输出将是：z = {1,4}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-05T04:03:24.780

所有好的解决方案，从基本的 DSA 风格到使用内置函数：

```
# Time: O(2n)
def solution1(arr1, arr2):
  map = {}
  maxLength = max(len(arr1), len(arr2))
  for i in range(maxLength):
    if(arr1[i]):
      if(not map.get(arr1[i])):
        map[arr1[i]] = [True, False]
      else:
        map[arr1[i]][0] = True
    if(arr2[i]):
      if(not map.get(arr2[i])):
        map[arr2[i]] = [False, True]
      else:
        map[arr2[i]][1] = False

  res = [];
  for key, value in map.items():
    if(value[0] == False or value[1] == False):
      res.append(key)

  return res

def solution2(arr1, arr2):
  return set(arr1) ^ set(arr2)

def solution3(arr1, arr2):
  return (set(arr1).difference(arr2), set(arr2).difference(arr1))

def solution4(arr1, arr2):
  return set(arr1).__xor__(set(arr2))

print(solution1([1,2,3], [2,4,6]))
print(solution2([1,2,3], [2,4,6]))
print(solution3([1,2,3], [2,4,6]))
print(solution4([1,2,3], [2,4,6])) 
```

# php - 是否可以让下拉菜单影响返回值

> ID：11348351
> 
> 赞同：0
> 
> 时间：2012-07-05T16:09:31.213
> 
> 标签：php, html

我正在尝试设置一个 html 表单，允许用户从下拉菜单中选择一个字段，然后指定该字段的信息。例如，如果他们从菜单中选择“姓名”，然后输入姓名，则会发布特定回复。

这是html的外观：

```
 <form action="hello.php" method="post">
    <select>
    <option disabled="yes" selected="yes">Select...</option>
    <option value="name">Name</option>
    <option value="gender">Gender</option>
    <option value="birthday>Birthday</option>
    <input name="name" type="text" />
    <input type="submit" value="Submit">
    </form> 
```

我正在尝试做的是根据提交的内容更改 php 代码响应。这是php代码：

```
 $name = $_POST['name'];
   $gender = $_POST['gender'];
   $bday = $_POST['birthday']; 
```

随着回应：

```
 echo "Hello, $name!";
    echo "Your gender is $gender!";
    echo "Happy birthday on $birthday!"; 
```

取决于他们选择的选项。（我还没有完成 if/elseif/else 语句，因为我不确定它们是否受到信息接收方式的影响。）

是否有可能做到这一点？我知道我的代码在这个例子中只会返回 $name，因为

```
 <input name="name"...> 
```

但我不知道是否可以通过下拉菜单识别文本字段的信息。我想用 Javascript 可能是可能的，但我从来没有使用过 Javascript，也不知道该怎么做。谢谢！

编辑：我找到了答案。我最终设置

```
 <input type="text" name="submit" /> 
```

在我的 html 代码中，和

```
 $submit = $_POST['submit']; 
```

在我的 php 代码中。现在，如果我做一些事情，比如

```
 echo $submit; 
```

它返回我在 html 页面中输入的任何内容。再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:13:11.007

```
<form action="hello.php" method="post">
<select name="myselectbox">
<option disabled="yes" selected="yes">Select...</option>
<option value="name">Name</option>
<option value="gender">Gender</option>
<option value="birthday>Birthday</option>
<input name="name" type="text" />
<input type="submit" value="Submit" />
</form> 
```

然后在 hello.php 文件的顶部执行此操作。

```
 var_dump($_POST); 
```

这应该可以帮助您了解 html 表单和 PHP Postback Form Handler 之间的关系（在您的情况下为 hello.php）

# c# - Razor Foreach 循环不返回所有数据

> ID：11348352
> 
> 赞同：2
> 
> 时间：2012-07-05T16:09:32.133
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor

我有一个 foreach 循环，它根据模型中的项目数构建超链接。它工作正常，除了说的部分：`ProgramId = @item.ProgramIds.First()`只返回每个 ProgramType 的第一个程序 ID。让它遍历所有程序 ID 而不仅仅是第一个的语法是什么？

```
@model IEnumerable<CMESurvey.ViewModels.ProgramTypeViewModel>
@{
    ViewBag.Title = "Home";
}
@foreach (var item in Model)
{ 
    <h2>@Html.DisplayFor(modelItem => item.ProgramTypes)</h2> 

    <ul>
        @foreach (var ProgramTitles in item.ProgramTitles)
        {
            <li>

                @Html.ActionLink(@ProgramTitles, "Results", "SurveyResponse", new { ProgramId = @item.ProgramIds.First() }, null)
    </li>
    }
</ul> 
```

}

```
 public class ProgramTypeViewModel
    {
        public int ProgramTypeIds { get; set; }

        public IEnumerable<string> ProgramTitles { get; set; }

        public IEnumerable<int> ProgramIds { get; set; }

        public IEnumerable<string> ProgramTypes { get; set; }

    } 
```

控制器动作：

```
 public ViewResult Home()
        {
            var data = from SurveyProgramModel in surveyProgramRepository.Get()
                       group SurveyProgramModel by SurveyProgramModel.ProgramTypeId into programTypeGroup
           select new ProgramTypeViewModel()
           {

               ProgramTypeIds = programTypeGroup.Key,
               ProgramIds = programTypeGroup.Select(r => r.ProgramId),
               ProgramTitles = programTypeGroup.Select(r => r.ProgramTitle),
               ProgramTypes = programTypeGroup.Select(r => r.ProgramType.ProgramType).Distinct(),
           };

            return View(data);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:17:17.730

`item`指来自外循环的值。看起来您想使用内部循环中的值：

```
@foreach (var ProgramTitles in item.ProgramTitles)         
{             
    foreach(var programId in item.ProgramIds)
    {

       <li>                  
           @Html.ActionLink(ProgramTitles, "Results", "SurveyResponse", new { ProgramId = programId  }, null)             
       </li>         
    }
} 
```

提供 viewModel 后，看起来您将 ProgramTitles 和 ProgramIds 作为两个断开连接的数组。也许，您所拥有的是 ProgramTitle 的数组索引 n 处的项目在 ProgramIds 数组的第 n 个项目中具有相应的条目。viewModel 可以改进，但这是我的解决方案：

```
@for (var index = 0; index < item.ProgramTitles.Count; index++)         
{             

       <li>                  
           @Html.ActionLink(ProgramTitles[index], "Results", "SurveyResponse", new {  ProgramId = item.ProgramIds[index]}, null)             
       </li>         
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:19:11.360

我对你的模型和查询有点困惑。据我所知，程序和类型之间应该存在关系，而没有。

因此，我强烈建议您查看您的视图模型及其查询。

但是，看看这是否有帮助：

```
@foreach (var currentProgramTypeViewModel in Model)
        { 
            foreach(string currentProgramType in currentProgramTypeViewModel.ProgramTypes)
            {
                <h2>@currentProgramType</h2> 

                <ul>
                    @for (int mProgramIndex = 0; mProgramIndex < currentProgramTypeViewModel.ProgramIds.Count(); mProgramIndex++)
                    {
                        var programTitle = currentProgramTypeViewModel.ProgramTitles.ToList<string>()[mProgramIndex];
                        var programId = currentProgramTypeViewModel.ProgramIds.ToList<int>()[mProgramIndex];
                        <li>
                            @Html.ActionLink(programTitle, "Results", "SurveyResponse", new { ProgramId = programId }, null)
                        </li>
                    }
                </ul>
            }
        } 
```

# javascript - 使用 jQuery 中的 text() 方法将字符串从函数写入 div 元素

> ID：11348355
> 
> 赞同：3
> 
> 时间：2012-07-05T16:09:41.980
> 
> 标签：javascript, jquery, openx

下面是我正在使用的当前代码：

```
<script type="text/javascript" >
  function rightTopSidebarAd() {
    document.write ("Text to test!");  
  }
</script>

<div style="border:3px solid #FF0000" id="rightTopSidebar">

</div>

<script type="text/javascript">
   $j('#rightTopSidebar').text(rightTopSidebarAd());
</script> 
```

在这里，我有一个简单的函数`rightTopSidebarAd()`，我想返回或打印字符串“要测试的文本！”。我希望该函数能够将内容放置在`rightTopSidebar`元素内。

目前它打印“要测试的文本！” 就在 div 之后，因为那是`text()`放置方法的地方。如果我将 jQuery 代码放在上面，那么它会打印在那个位置。

*注意：我不能把 jQuery 代码放在里面，`div`因为这只是一个演示。在原始页面中，所有`div`元素都将散布在网页周围，并且我将 jQuery 函数存储在外部 JavaScript 文件中。*

编辑：伙计们，我的错：我确实展示了一个简单的功能

```
 function rightTopSidebarAd() {
    document.write ("Text to test!");  
  } 
```

为了说明我的问题，正如你所说的一个简单的“返回”将解决这个问题，但真正的功能并不是那么简单，我正在尝试返回一个 OpenX 代码，请告诉我如何使用这个函数来做到这一点：

```
 function rightTopSidebarAd() {
    document.MAX_ct0 ='{clickurl}';

    var m3_u = (location.protocol=='https:'?'https://one.mydomain.com/www/delivery/ajs.php':'http://one.mydomain.com/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
    document.write ("?zoneid=15&amp;target=_blank");
    document.write ('&amp;cb=' + m3_r);
    if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
    document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
    document.write ("&amp;loc=" + escape(window.location));
    if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
    if (document.context) document.write ("&context=" + escape(document.context));
    if ((typeof(document.MAX_ct0) != 'undefined') && (document.MAX_ct0.substring(0,4) == 'http')) {
        document.write ("&amp;ct0=" + escape(document.MAX_ct0));
    }
    if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
    document.write ("'><\/scr"+"ipt>");
    document.write ("<noscript><a href='http://one.mydomain.com/www/delivery/ck.php?n=a8ed906c&amp;cb={random}' target='_blank'><img src='http://one.mydomain.com/www/delivery/avw.php?zoneid=15&amp;cb={random}&amp;n=a8ed906c&amp;ct0={clickurl}' border='0' alt='' /></a></noscript>");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:10:16.267

您需要返回您的值而不是将其写入文档：

```
function rightTopSidebarAd() {
   return "Text to test!";  
} 
```

根据您的问题更新，您现在的功能应该是：

```
function rightTopSidebarAd() {
    var valueToReturn = '';
    document.MAX_ct0 ='{clickurl}';

    var m3_u = (location.protocol=='https:'?'https://one.mydomain.com/www/delivery/ajs.php':'http://one.mydomain.com/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    valueToReturn += "<scr"+"ipt type='text/javascript' src='"+m3_u;
    valueToReturn += "?zoneid=15&amp;target=_blank";
    valueToReturn += '&amp;cb=' + m3_r;
    if (document.MAX_used != ',') valueToReturn += "&amp;exclude=" + document.MAX_used;
    valueToReturn += document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : '');
    valueToReturn += "&amp;loc=" + escape(window.location);
    if (document.referrer) valueToReturn += "&amp;referer=" + escape(document.referrer);
    if (document.context) valueToReturn += "&context=" + escape(document.context);
    if ((typeof(document.MAX_ct0) != 'undefined') && (document.MAX_ct0.substring(0,4) == 'http')) {
        valueToReturn += "&amp;ct0=" + escape(document.MAX_ct0);
    }
    if (document.mmm_fo) valueToReturn += "&amp;mmm_fo=1";
    valueToReturn += "'><\/scr"+"ipt>";
    valueToReturn += "<noscript><a href='http://one.mydomain.com/www/delivery/ck.php?n=a8ed906c&amp;cb={random}' target='_blank'><img src='http://one.mydomain.com/www/delivery/avw.php?zoneid=15&amp;cb={random}&amp;n=a8ed906c&amp;ct0={clickurl}' border='0' alt='' /></a></noscript>";
    return valueToReturn;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:11:07.450

只需从您的函数返回文本而不是打印它：

```
<script type="text/javascript" >
  function rightTopSidebarAd() {
    return "Text to test!";  
  }
</script>

<div style="border:3px solid #FF0000" id="rightTopSidebar">

</div>

<script type="text/javascript">
   $j('#rightTopSidebar').text(rightTopSidebarAd());
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:12:14.003

您当前的方法尝试写入文档对象，而不是`#rightTopSidebar`.

尝试对您的函数进行以下更新：

```
function rightTopSidebarAd() {     
    return "Text to test!";     
} 
```

通过使用 return，您将字符串传递给`text()`方法，这将导致传递的字符串被写入所需的元素。

此外，您需要通过将代码封装在[`$(document).ready()`](http://api.jquery.com/ready/)函数中来调用 text() 方法。

```
<script type="text/javascript">
function rightTopSidebarAd() {
    return "Text to test!";
} 
$(function(){
    $('#rightTopSidebar').text(rightTopSidebarAd());
});
</script>
<div style="border:3px solid #FF0000" id="rightTopSidebar"></div > 
```

# asp.net-mvc-3 - 当条件为真时显示默认视图，asp.net mvc3

> ID：11348357
> 
> 赞同：0
> 
> 时间：2012-07-05T16:10:00.620
> 
> 标签：asp.net-mvc-3

如果 web.config 键设置为 true，如何为所有视图显示默认页面，如维护页面？

如果键为假，则显示常规视图。

请注意，我不想在每个控制器中重复代码，我正在寻找一个共同的地方，比如可以定义它的 _ViewStart 或 _Layout 页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:29:15.773

您可以创建自己的 ActionFilterAttribute 和基本控制器，这使您可以访问 OnActionExecuting。然后，您可以测试是否设置了 Web.Config 值（可能在您第一次启动 Web 应用程序时将其加载到 Application 变量中），如果已设置，则将 Controller 和 Action 属性设置为您的维护页面。然后你的所有控制器，而不是从标准控制器继承，而是从你的控制器继承，除了维护控制器，它仍然可以从普通控制器继承。

例如：

```
[RedirectToMaintenancePage]
public class MyController : Controller
{
} 
```

对于典型的控制器：

```
public class SampleController : MyController
{
... Your actions ...
} 
```

然后创建一个名为 RedirectToMaintenancePageAttribute.cs 的类：

```
public class RedirectToMaintenancePageAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
         If Web.config says to go to Maintenance page then...
         {
              filterContext.Result = RedirectToRouteResult("route name") // Or some other redirect
              return;
         }

         // else
         base.OnActionExecuting(filterContext);
    }
} 
```

这一切都在我的脑海中，但我认为它应该工作，如果它不希望它会给你一些想法。

# asp.net - 带有 wcf 的大图像 - ThrowMaxReceivedMessageSizeExceeded()

> ID：11348361
> 
> 赞同：1
> 
> 时间：2012-07-05T16:10:18.250
> 
> 标签：asp.net, wcf

我创建了一个 WCF 服务来上传图像。它适用于各种小图像。但是当我尝试使用 800KB 之类的图像时，我得到“远程服务器返回错误：（400）错误请求。” 当我查看日志文件时，我看到了这个异常： ThrowMaxReceivedMessageSizeExceeded() 我一直在寻找年龄并尝试了很多不同的东西，包括设置 maxRequestLength 和其他几个设置。

我有 WCFApp、WebApplocation-用于我的站点，以及 classLibrary-用于具有服务参考的 BLClient。

这些是我的配置文件：

**WCFApplication 的 Web.config：**

```
 <?xml version="1.0"?>
     <configuration>
  <connectionStrings>
    <add name="photoShopEntities"
         connectionString="metadata=res://*/photoShop.csdl|
         res://*/photoShop.ssdl|
         res://*/photoShop.msl;
         provider=System.Data.SqlClient;provider connection string='Data Source=.\SQLEXPRESS;AttachDbFileName=|DataDirectory|photoShop.mdf;Integrated Security=True;User Instance=True'"
         providerName="System.Data.EntityClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

**WebApplication 的 Web.config：**

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="true">
      <providers>
        <clear />
        <add connectionStringName="ApplicationServices" applicationName="/"
          name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
        <add applicationName="/" name="AspNetWindowsTokenRoleProvider"
          type="System.Web.Security.WindowsTokenRoleProvider" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IBLServer" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
              maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:50739/PhotoShopWS.svc" binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_IBLServer" contract="PhotoShopWS.IBLServer"
          name="BasicHttpBinding_IBLServer" />
    </client>
  </system.serviceModel>
</configuration> 
```

**classLibrary 的 App.config：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IBLServer" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
              maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:50739/PhotoShopWS.svc" binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_IBLServer" contract="PhotoShopWS.IBLServer"
          name="BasicHttpBinding_IBLServer" />
    </client>
  </system.serviceModel>
</configuration> 
```

我看到了很多关于它的答案，但我的问题仍然存在。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:34:18.927

在 WCF 应用程序的 web.config 中，您必须将其指定`maxReceivedMessageSize`为更高的值。

前任。

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
             <binding transferMode="Streamed"
                     maxReceivedMessageSize="67108864">
               <!-- other config here -->
            </binding>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:43:07.993

我使用了标记帮助，现在我的网站允许上传大图像。

这是更改后我的 WCFApplication 的 web.config。

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="photoShopEntities"
         connectionString="metadata=res://*/photoShop.csdl|
         res://*/photoShop.ssdl|
         res://*/photoShop.msl;
         provider=System.Data.SqlClient;provider connection string='Data Source=.\SQLEXPRESS;AttachDbFileName=|DataDirectory|photoShop.mdf;Integrated Security=True;User Instance=True'"
         providerName="System.Data.EntityClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2147483647"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding transferMode="Streamed"
                maxReceivedMessageSize="67108864">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
            maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <!-- other config here -->
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>

          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

非常感谢！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:42:30.993

查看

如果它存在于 httpTransport 元素中，则在 classLibrary 的 App.config 中：

```
maxReceivedMessageSize="104857600" 
```

# objective-c - NSImageView setImageScaling notWorkingCorrectly

> ID：11348362
> 
> 赞同：2
> 
> 时间：2012-07-05T16:10:22.443
> 
> 标签：objective-c, cocoa

我在正确缩放 nsimageview 中的图像时遇到问题。加载图像时会发生什么，它不会填满整个 nsimageview。我使用了 NSScaleToFit，它完全拉伸了图像。由于我不知道照片的尺寸（它会根据使用的图像而变化），因此我无法将 nsimageview 设置为某个尺寸并将其留在那里。 **我想要做的是按比例用图像填充整个 nsimageview，即使某些图像被截断。**

这是我正在使用的代码：

```
NSString *image_path = [applicationSupportDirectory stringByAppendingPathComponent:desktop_name];
        NSImage *imageFromBundle = [[NSImage alloc] initWithContentsOfFile:image_path];
        [ViewImage setImageScaling:NSScaleProportionally];
        [ViewImage setImage: imageFromBundle]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-04T17:15:06.027

我有同样的问题。我想让图像缩放以填充但保持原始图像的纵横比。奇怪的是，这并不像看起来那么简单，并且没有 NSImageView 开箱即用。我希望 NSImageView 在使用超级视图调整大小时很好地缩放。我做了一个插入式 NSImageView 子类，你可以在 github 上找到：[KPCScaleToFillNSImageView](https://github.com/onekiloparsec/KPCScaleToFillNSImageView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:20:47.700

我不认为这样的东西是内置的。您可能必须自己转换图像。

不过，它相对简单；[你可以在这里](http://theocacao.com/document.page/498/)看到一个示例实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:28:18.053

我制定了自己的解决方案，因为内置的解决方案不起作用。

```
NSRect frame = [MyWindow frame];

   if (abs(windowHeight-[imageFromBundle size].width) > abs(windowWidth-[imageFromBundle size].height)) {
        frame.size.height = windowWidth;
        frame.size.width = 1+windowWidth*(([imageFromBundle size].width/[imageFromBundle size].height-(10*pow([imageFromBundle size].width, 2))/(pow([imageFromBundle size].height, 2)* windowHeight)));
    } else {
        frame.size.width = windowHeight;
        frame.size.height = ((windowHeight/[imageFromBundle size].width)*[imageFromBundle size].height);
    }

    [MyWindow setFrame: frame
             display: YES
             animate: YES]; 
```

# java - object.equals 方法应该如何在 Java 中工作？

> ID：11348363
> 
> 赞同：0
> 
> 时间：2012-07-05T16:10:43.957
> 
> 标签：java

这是我的源代码。我试图实现一个简单的程序，该程序向用户提出问题并期望答案为“是”或“否”，并且仅当用户回答“是”或“否”问题时才终止。这本书我建议我不要使用 == 比较，而是使用 equals 方法，这样程序就可以理解用户是否输入了“ye s”而不是“yes”。但是通过这种方式，结果是相同的，并且该方法似乎会比较用户的答案是否恰好是“是”或“否”。它不接受例如“n o”的回答。这种方法合乎逻辑吗？它应该这样工作吗？如何更改程序以接受“是”“是的”“否”“否”等答案。? 我会很感激你的帮助:)

```
import acm.program.*;

public class YesNoExample extends ConsoleProgram{
public void run(){
    while(true){
    String answer = readLine("Would you like instructions? ");
    if(askYesNoQuestion(answer)){
        break;
    }
    println("Please answer yes or no.");
    }
}

private boolean askYesNoQuestion(String str){
    if(str.equals("yes")||str.equals("no")){
        return true;
    }else{
        return false;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:14:32.150

如果您使用`==`，您将比较两个 String 对象的*引用*（内存指针）。如果您使用，将运行该类`equals`中的自定义方法，该方法会进行一些“智能”比较，在这种情况下，检查字符是否都相同，并且整个事物具有相同的长度。`String`

如果您想支持混合大小写字母，您可以使用`"someString".equalsIgnoreCase("SoMeString")`（这将返回 true）。这是通过将两个字符串都设为小写（因此大小写无关紧要）并使用等号比较它们来完成的（粗略地说）。

编辑：其他海报让我意识到，除了大写之外，您还想寻找空格无关紧要的字符串相等。如果是这种情况，类似于将所有内容转换为小写的技巧适用，您首先删除所有空格，正如@LouisWasserman 在他的回答中所说

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:48:25.687

如果您需要模糊识别是/否，首先您需要关于匹配内容的确切规则。根据您的示例，我可以提出以下建议：

```
private boolean askYesNoQuestion(String str) {
  str = str.replace(" ", "").toUpperCase();
  return str.equals("YES") || str.equals("NO");
} 
```

如果对顶级性能感兴趣，而对可理解性完全不感兴趣，请使用：

```
private static final Pattern p = 
    Pattern.compile("y\\s*e\\s*s|n\\s*o", Pattern.CASE_INSENSITIVE);
private boolean askYesNoQuestion(String str) {
  return p != null && p.matcher(str.trim()).matches();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:13:25.160

### `==`vs的语义`.equals()`

首先，您误解了语义。

`==`测试对象身份。`A == B`说是`A`对与 完全相同的对象的引用`B`。

`.equals()`应用自定义逻辑来测试对象是否以某种逻辑方式相等，而不是完全相同的对象。为了正确实现这一点，两个对象也应该具有相同的`.hashCode()`值。

### 惯用的 Java 解决方案

由于`String`对象是`final`这意味着它不能被继承。您不能覆盖对象`.equals()`上的。`String`

您需要做的是将输入预处理为可以直接与目标值比较的内容`.equalsIgnoreCase()`。

一种方法是使用，`answer.replaceAll("\\s","")`删除所有空格，然后您可以将其与目标`String`文字进行比较`.equalsIgnoreCase()`。

更好的替换方法`askYesNoQuestion()`是：

```
private boolean isAnswerYesOrNo(final String answer)
{
    final String input = answer.replaceAll("\\s","");
    return "yes".equalsIgnoreCase(input) || "no".equalsIgnoreCase(input);
} 
```

如果输入参数恰好是“yes”.equalsIgnoreCase() NullPointerException` ，将 a`literal`与输入参数进行比较将使您免受影响。这是惯用的Java。`NullPointerExceptions``null``can never throw a`

### 买一本更好的书

如果那本书真的说出了你所声称的内容，那本书就不是很有用。此外，它还教您编写大量代码来处理错误输入，因为这是一个完整的反模式，并且设计良好的程序会退出，并详细解释确切的问题是可以做些什么来修复输入。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T16:58:49.987

上面对 == 和 .equals 进行了很好的解释，这里有两个例子来说明你想要的比较。

```
if ( Pattern.matches("\\s*[yY]\\s*[eE]\\s*[sS]\\s*", input) ) {
  // do something
}

if ( input.replaceAll("\\s", "").equalsIgnoreCase("yes") ) {
  // do something
} 
```

# amazon-s3 - 如何为 S3 使用 Plupload HTML4 上传？

> ID：11348364
> 
> 赞同：1
> 
> 时间：2012-07-05T16:10:47.527
> 
> 标签：amazon-s3, plupload, html4

我正在尝试让 Plupload 的 html4 运行时与 S3 一起使用。不幸的是，[我在这里找到的示例](http://www.plupload.com/punbb/viewtopic.php?id=133)必须是一个非常旧的 plupload 版本或没有正确记录，并且没有实时工作示例或源代码下载。

所以我将我的 Plupload/Flash 运行时的工作版本带到 S3 并简单地将 html4 运行时而不是 flash 并添加`'success_action_redirect':` *（我从 plupload 论坛了解到，plupload 需要这样做才能知道文件上传何时完成）*。我发现它确实有效，但有些脚本确实失败了。

这是我的源代码...

**PHP：**

```
<?php
$bucket = 'MyBucket';
$accessKeyId = 'MyKey';
$secret = 'MySecret';

// Policy Setup
if (!function_exists('hash_hmac')) : function hash_hmac($algo, $data, $key, $raw_output = false){
    $blocksize = 64;
    if (strlen($key) > $blocksize)
        $key = pack('H*', $algo($key));

    $key = str_pad($key, $blocksize, chr(0x00));
    $ipad = str_repeat(chr(0x36), $blocksize);
    $opad = str_repeat(chr(0x5c), $blocksize);
    $hmac = pack('H*', $algo(($key^$opad) . pack('H*', $algo(($key^$ipad) . $data))));

    return $raw_output ? $hmac : bin2hex($hmac);
}
endif;
// prepare policy
$policy = base64_encode(json_encode(array(
    'expiration' => date('Y-m-d\TH:i:s.000\Z', strtotime('+1 day')),  
    'conditions' => array(
        array('bucket' => $bucket),
        array('acl' => 'authenticated-read'),
        array('success_action_redirect' => 'http://mydomain.com/ThisCanBeAnyPage.php'),
        array('starts-with', '$key', ''),
        array('success_action_status' => '201'),
        array('starts-with', '$name', ''),  
        array('starts-with', '$Filename', ''), 
    )
)));
// Sign Policy
$signature = base64_encode(hash_hmac('sha1', $policy, $secret, true));
?> 
```

**Javascript：**

```
<script type="text/javascript" src="js/plupload.full.js"></script>
<script type="text/javascript" src="js/plupload.html4.js"></script>
<script type="text/javascript">
// Custom example logic
$(function() {
    var uploader = new plupload.Uploader({
        preinit : {
            UploadFile: function(up, file) {
        // When file is loaded, directory on S3 is set here.
                up.settings.multipart_params.key = 'myFolder/'+file.name;
            }
        },
        runtimes : 'html4',
        browse_button : 'pickfiles',
        container : 'container',
        url : 'http://<?php echo $bucket; ?>.s3.amazonaws.com/',
        max_file_size : '300mb',
        multipart: true,
        multipart_params: {
            'key': '${filename}', // use filename as a key
            'success_action_redirect':'http://mydomain.com/ThisCanBeAnyPage.php',
            'Filename': '${filename}', // adding this to keep consistency across the runtimes
            'acl': 'authenticated-read',
            'success_action_status': '201',
            'AWSAccessKeyId' : '<?php echo $accessKeyId; ?>',       
            'policy': '<?php echo $policy; ?>',
            'signature': '<?php echo $signature; ?>'
        },
        file_data_name: 'file',
        multiple_queues: true,
        filters : [
            {title : "Image Files", extensions : "jpg,jpeg"},
        ],
        flash_swf_url : 'js/plupload.flash.swf',
        silverlight_xap_url : 'js/plupload.silverlight.xap'
    });

    uploader.bind('Init', function(up, params) {
        //$('#filelist').html("<div>Current runtime: " + params.runtime + "</div>");
    });

    $('#uploadfiles').click(function(e) {
        uploader.start();
        e.preventDefault();
    });

    uploader.bind('FilesAdded', function(up, files) {
        $.each(files, function(i, file) {
        // file.name seems to be the only thing that is returned so file.size is displayed as 'N/A'
            $('#filelist').append(
                '<div class="Section" id="'+file.id+'">'
                    +file.name+' ('+plupload.formatSize(file.size)+')&nbsp;&nbsp;<b>'
                    +'</b><div class="PlupLoadingBarWrap"><div class="PlupLoadingBar"></div></div>'
                +'</div>'
            );
        });
        up.refresh(); // Reposition Flash/Silverlight
    });

    uploader.bind('UploadProgress', function(up, file) {
        // file.name seems to be the only thing that is returned
        // This triggers when file is complete before 'FileUploaded' and not during upload process.
    });

    uploader.bind('Error', function(up, err) {
        // Haven't received an error to know if this works.
        $('#filelist').append("<div>Error: " + err.code +
            ", Message: " + err.message +
            (err.file ? ", File: " + err.file.name : "") +
            "</div>"
        );

        up.refresh(); // Reposition Flash/Silverlight
    });

    uploader.bind('FileUploaded', function(up, file) {
        // file.name seems to be the only thing that is returned
        // This does trigger once file is completely loaded
    });

    uploader.bind('UploadComplete', function(up, files){
        // Calls a function
    });

    uploader.init();
});
</script> 
```

**HTML：**

```
<h3>Custom example</h3>
<div id="container">
    <div id="filelist">No runtime found.</div>
    <br />
    <a id="pickfiles" href="#">[Select files]</a>
    <a id="uploadfiles" href="#">[Upload files]</a>
</div> 
```

所以总而言之，这个脚本确实有效，但缺少 file.size 并且根据我能够找到的内容没有进度指示。我想知道那里是否有一个 plupload html4 脚本，其中包含这里缺少的东西。我有一个尚未测试的解决方法。但我会保持更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:03:07.843

简单的答案是否定的。

HTML4 本身不支持任何这些功能。

但是，如果您使用提交功能，您可以做到这一点。基本上，您需要在客户端设计自己的分块，使用 post 提交块并控制块的数量以制作进度条。它在理论上很简单，但在实践中很难看。为什么可以使用闪光灯或银光注射？

# jquery - 如何制作类似谷歌的侧导航？

> ID：11348369
> 
> 赞同：0
> 
> 时间：2012-07-05T16:11:10.573
> 
> 标签：jquery, nav

我需要一点帮助才能让我的侧导航正常工作。

链接到我的工作版本：[http ://recx.vaughndtaylor.com/](http://recx.vaughndtaylor.com/)

请注意，导航正确扩展/收缩，但我希望 +/- 独立于链接运行。例如，我希望在单击 + 时扩展菜单，但我希望链接转到页面。

我以谷歌的侧导航为例：[https ://developers.google.com/chart/](https://developers.google.com/chart/)

可以单击此示例中的切换开关，但您也可以单击链接。

这就是我所拥有的：

```
 $('li.openable').click(function(){
        if ($(this).children('div.accordion').is(':hidden')) {
            $(this).siblings().removeClass('active').children('div.accordion').slideUp();
            $(this).toggleClass('active').children('div.accordion').slideDown('fast');
        } else {
            $(this).removeClass('active').children('div.accordion').slideUp('fast');
        }
        return false;
    }); 
```

我想我需要更多这样的东西：

```
$('li.openable > span.icon').click(function(){
    if ($(this).children('div.accordion').is(':hidden')) {
        $(this).siblings().removeClass('active').children('div.accordion').slideUp();
        $(this).toggleClass('active').children('div.accordion').slideDown('fast');
    } else {
        $(this).removeClass('active').children('div.accordion').slideUp('fast');
    }
    return false;
}); 
```

我很难在这里弄清楚对象之间的关系。在我的第二个示例中，$(this) 不再是正确的对象（现在是 span.icon）。我是否将其设置为变量？我是否使用关系（例如兄弟姐妹（），父母（）？）

对此问题的任何帮助将不胜感激。

谢谢！

更新：这就是我使用以下建议解决问题的方式：

```
$('li.openable > span.icon').click(function(){
        var expander = $(this).parents('li');
        if (expander.children('div.accordion').is(':hidden')) { 
            expander.siblings().removeClass('active').children('div.accordion').slideUp(); 
            expander.toggleClass('active').children('div.accordion').slideDown('fast'); 
        } else {
            expander.removeClass('active').children('div.accordion').slideUp('fast');
        }
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:17:11.440

你说的对。根据 span 元素的 parent() 创建一个变量，然后从那里开始：

```
$('li.openable > span.icon').click(function(){
    var thingToExpandOrContract = $(this).parents('li');

... 
```

从那里使用变量而不是“this”。

# forms - Symfony2：如何在验证之前修改表单值

> ID：11348370
> 
> 赞同：9
> 
> 时间：2012-07-05T16:11:11.477
> 
> 标签：forms, symfony, doctrine

我有以下情况：

*   表单字段类型`date`
*   一个验证模式，比如`dd.mm.YYYY`
*   `12`变成`12.07.2012`或`2.5`变成`02.05.2012`等的辅助对象。

**我的问题是：我在哪里调用转换输入值的方法？**

当我从`set`实体的 - 方法调用它时，值实际上会发生变化。但是当再次加载表单（例如不完整的提交）时，会显示旧值（如`2.5`）而不是转换后的值（`2.5.2012`）。现在，我如何告诉表单，实体内的值已更改？

也许在两者之间还有另一种方法：

```
$form->bindRequest($request);
// do some fancy stuff here
if ($form->isValid()) {} 
```

**PHP**

这是来自*实体*：

```
/**
 * @ORM\Column(type="datetime", nullable=true)
 * @Assert\DateTime()
 */
protected $date_start; 
```

这是来自*类型*：

```
$builder->add('date_start', 'datetime', array(
    'label' => 'Start Datum/Uhrzeit',
    'date_widget' => 'single_text',
    'time_widget' => 'single_text',
    'date_format' => 'dd.MM.yyyy',
    'with_seconds' => false,
    'required' => false,
)); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T16:17:21.627

有两种方法可以修改表单和绑定到它们的数据。您可以使用表单事件，这里有一个使用示例，或者您可以使用此处解释[的](http://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html)[DataTransformer](http://symfony.com/doc/master/cookbook/form/data_transformers.html)

从你的情况来看，我认为 DataTransformer 最有意义。您以一种方式表示对象中的数据，但您需要以不同的方式在表单中表示它，并在提交表单时反转该转换。这是 DataTransformer 的目的。

# php - php regex 删除重复的单词

> ID：11348371
> 
> 赞同：2
> 
> 时间：2012-07-05T16:11:14.520
> 
> 标签：php, regex

我有字符串：

```
$s = 'Артгалерея Живопись Африка и от the Albert$Lizah, L-77, Christ UF1.1 (Christ).'; 
```

我希望在数组中接收下一个字符串：

```
$s = 'Артгалерея Живопись Африка Albert Lizah Christ'; 
```

我使用了正则表达式：

```
 preg_match_all('#\pL{4,}+#iu', $s, $m);
   $m = preg_replace("/\b(\w+)\s+\\1\b/i", "$1", implode(' ',$m[0]));
   $m = explode(' ', $m);
   echo '<pre>'.print_r($m, 1).'</pre>'; 
```

并收到：

```
$s = 'Артгалерея Живопись Африка Albert Lizah Christ Christ'; 
```

但是我不能在不重复单词的情况下接收字符串。

**问题**：如何更改正则表达式 php - '#\pL{4,}+#iu'，以排除包含在重复单词字符串中？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:08:10.167

使用带有反向引用的否定前瞻断言：

```
 \b(\pL{4,}+)\b(?!.*\b\1\b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:21:30.523

[`array_unique`](http://php.net/array_unique)在 preg_match_all 的结果上使用：

```
...
$words = array_unique($m[0]);
... 
```

# c++ - 标准向量 C++——深拷贝或浅拷贝

> ID：11348376
> 
> 赞同：67
> 
> 时间：2012-07-05T16:11:33.613
> 
> 标签：c++, vector, copy, std, deep-copy

我想知道是否复制向量我正在复制向量及其值（而这不适用于数组，并且深度复制需要循环或 memcpy）。

你能暗示一个解释吗？

问候

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-07-05T16:13:36.623

每次复制向量时，您都在进行深层复制。但是，如果您的向量是指针向量，则您将获得指针的副本，而不是指向的值

例如：

```
std::vector<Foo> f;
std::vector<Foo> cp = f; //deep copy. All Foo copied

std::vector<Foo*> f;
std::vector<Foo*> cp = f; //deep copy (of pointers), or shallow copy (of objects).
//All pointers to Foo are copied, but not Foo themselves 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-13T15:50:46.900

Vector 将调整大小以便为对象提供足够的空间。然后它将遍历对象并为每个对象调用默认的复制运算符。

这样，向量的副本就“深”了。向量中每个对象的副本是为默认复制运算符定义的任何内容。

在示例中...这是错误的代码：

```
#include <iostream>
#include <vector>

using namespace std;

class my_array{
public:
    int *array;
    int size;
    my_array(int size, int init_val):size(size){
        array = new int[size];
        for(int i=0; i<size; ++i)
            array[i]=init_val;
    }
    ~my_array(){
        cout<<"Destructed "<<array[0]<<endl;
        if(array != NULL)
            delete []array;
        array = NULL;
        size = 0;
    }

};

void add_to(vector<my_array> &container){
    container.push_back(my_array(4,1));
}

int main(){

    vector<my_array> c;
    {
        my_array a(5,0);
        c.push_back(a);
    }
    add_to(c);
    //At this point the destructor of c[0] and c[1] has been called.
    //However vector still holds their 'remains'
    cout<<c[0].size<<endl; //should be fine, as it copies over with the = operator
    cout<<c[0].array[0]<<endl;//undefined behavior, the pointer will get copied, but the data is not valid
    return 0;
} 
```

这是更好的代码：

```
#include <iostream>
#include <vector>

using namespace std;

class my_array{
public:
    int *array;
    int size;
    my_array(int size, int init_val):size(size){
        cout<<"contsructed "<<init_val<<endl;
        array = new int[size];
        for(int i=0; i<size; ++i)
            array[i]=init_val;
    }
    my_array(const my_array &to_copy){
        cout<<"deep copied "<<to_copy.array[0]<<endl;
        array = new int[to_copy.size];
        size = to_copy.size;
        for(int i=0; i<to_copy.size; i++)
            array[i]=to_copy.array[i];
    }

    ~my_array(){
        cout<<"Destructed "<<array[0]<<endl;
        if(array != NULL)
            delete []array;
        array = NULL;
        size = 0;
    }

};

void add_to(vector<my_array> &container){
    container.push_back(my_array(4,1));
}

int main(){

    vector<my_array> c;
    {
        my_array a(5,0);
        c.push_back(a);
    }
    add_to(c);
    //At this point the destructor of c[0] and c[1] has been called.
    //However vector holds a deep copy'
    cout<<c[0].size<<endl; //This is FINE
    cout<<c[0].array[0]<<endl;//This is FINE
    return 0;
} 
```

# java - 如何在 JSTL 中实现“instanceOf”

> ID：11348378
> 
> 赞同：14
> 
> 时间：2012-07-05T16:11:35.640
> 
> 标签：java, jsp, jstl

或者说获取类名或获取类型名

这样可以在主要流行的 Web 容器/服务器上运行吗？

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T16:37:02.523

`${foo.class.name}`返回 的完全限定名称`foo`。

但是`instanceof`已经是你应该很少在设计良好的 OO 程序中使用的东西，它应该在 JSP EL 中使用更少，其中方法被动态调用而不关心实际类型，并且最终目标应该只是生成标记.

# clojure - 在 (reduce f val coll) 中，val 是累加器吗？

> ID：11348380
> 
> 赞同：11
> 
> 时间：2012-07-05T16:11:44.487
> 
> 标签：clojure, reduce, accumulator

当你调用*reduce*并传递一个函数和两个参数时，第一个参数可以被认为是一个累加器吗？

它*总是*一个累加器吗？

*有时*是累加器吗？

我正在阅读一篇关于使用 Clojure 解析大文件的博客文章，发现这一行：

```
(reduce line-func line-acc (line-seq rdr)) 
```

链接到博客条目：

[http://lethain.com/reading-file-in-clojure/](http://lethain.com/reading-file-in-clojure/)

一个简单的：*(reduce + [1 2 3])*怎么样？有没有累加器？

我认为我的问题是：*“究竟什么是蓄能器？”*

但我仍然想了解累加器和*reduce*函数之间的关系。因此，欢迎对这些特定（相关）问题的任何回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T16:31:51.060

## 在 (reduce f val coll) 中，val 是累加器吗？

**不**，这是函数 f 的参数。这意味着`f`应用于 val 和 coll 中的第一个元素。

例如：

```
(reduce + 1 [2 3 4])        ;; 10
(reduce + (cons 1 [2 3 4])) ;; 10 
```

## 一个简单的：(reduce + [1 2 3]) 怎么样？有没有累加器？

**不**，它是一系列功能的应用`f`；像这样：

```
(reduce f [1 2 3 4]) ; ==> (f (f (f 1 2) 3) 4)
(reduce f 1 [2 3 4]) ; ==> (f (f (f 1 2) 3) 4) 
```

请注意，在这两种情况下，最里面的调用都`f`需要参数 1 和 2 ？在第一种情况下，1 和 2 是 coll 的第一个和第二个元素；在第二种情况下，1 是唯一值，2 是 coll 的第一个元素。

## 究竟什么是蓄能器？

累加器是**保存计算中间结果的变量。**就像在这个 Java 片段中一样：

```
int sum = 0;
for (int i = 0; i < 10; i++) {
    sum += i;
}
return sum; 
```

这里，变量 sum 的值随着循环的进行而改变。在 Clojure 中，变量是不可变的，所以你看不到这个习语。相反，累加器更经常（但不总是）是递归函数的参数。

例如，这里有一个函数，它通过将列表中的第一个条目*“累积”*到累加器的前面来反转列表。在这种情况下，变量没有改变，而是传递给函数的另一个调用。

```
(defn reverse [[f & r] acc]
  (if (nil? f)
    acc
    (recur r (conj acc f))))

(reverse [1 2 3] ()) ;; [3 2 1] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T10:59:43.303

它可以是一个累加器。

这取决于你如何使用它，也取决于你对“累加器”的定义。

这是一个传统的可变累加器，请注意需要在每一步继续传递相同的累加器：

```
(reduce 
  (fn [atom val] (do (swap! atom + val) atom))
  (atom 10)
  [1 2 3 4 5])
=> #<Atom@115872f5: 25> 
```

这是与不可变的“累加器”一起使用的 reduce。尽管累加器传统上是可变的，但我认为大多数函数式程序员会将其定义为累加器：

```
(reduce + 10 [1 2 3 4 5])
=> 25 
```

这是一个不累积任何东西的 reduce，所以很难证明第二个参数是一个累加器：

```
(reduce 
  (fn [_ x] (println x))
  nil 
  [1 2 3]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-05T16:33:07.313

我假设最初的问题是使用累加器作为通用术语，而不是语言中使用的官方术语。

我不知道函数之后的第一个参数（第二个参数）是否会被称为 Clojure 术语中的累加器。但它确实似乎是这样行事的。

在下面的：

```
(defn reduce-csv-row
     "Accepts a csv-row (a vector) a list of columns to extract, 
     and reduces the csv-row to a smaller list based on selection
     using the values in col-nums (a vector of integer vector 
     positions.)"

    [csv-row col-nums]

    (reduce
        (fn [filter-csv-row col-num]

            ;Don't use vectors without the proper information in them.

            (if-not (<= (count csv-row) 1)
                (conj filter-csv-row (nth csv-row col-num nil))))
        []
        col-nums)) 
```

我当然希望调用这个函数后会返回一个序列，所以累加器可能不是一个坏词，但作为一个官方术语，我不能说。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T04:15:32.163

它总是一个累加器吗？

是的，它始终是一个累加器。累加器是在计算过程中保存计算的中间值的东西，当计算结束时，累加器具有计算的最终结果。累加器是可变的还是不可变的，这是累加器的不同方面，但这就是累加器在概念上的含义。

有时是累加器吗？

不，它始终是 a 中的累加器，因为AKA`reduce`的整个概念是将值列表转换为单个值，如果处理列表中的下一个元素需要处理结果，则确实需要一个累加器来进行此类计算列表的前一个元素等等。`reduce``fold`

当您不传递累加器初始值（即函数签名`val`中的部分`reduce`）时，累加器的初始值设置为列表的第一个元素，处理将从列表的第二个元素开始。

将`val`视为 的第一个参数在`f`概念上是不正确的，因为如果是这种情况，那么`f`应该总是得到`val`最初指定的相同，这就像创建`f`with first param as的偏函数`val`。每次调用都`f`将`val`作为调用的前一个返回值`f`。因此`val`是一个累加器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-18T07:11:41.483

Ankur 的回答是正确的。另外，我认为这个链接很好地解释了事情：

[http://www.learningclojure.com/2010/08/reduce-not-scary.html](http://www.learningclojure.com/2010/08/reduce-not-scary.html)

现在，回答你的问题...

* * *

是的。第二个参数`reduce`是累加器的*初始*值。

* * *

是的，它*始终*是一个累加器。的*全部意义*在于`reduce`它可以让你以一种功能性和不可变的方式进行积累。

我会注意到，可以以`reduce`累积无关紧要的方式使用，就像在 mikera 的回答中一样。在那种情况下，`reduce`仍然*在*做累加（内部），但它一遍又一遍地使用相同的值，所以它没有明显的效果。

* * *

当`reduce`只使用两个参数调用时...... [Clojure 使用的规则](http://clojure.github.io/clojure/clojure.core-api.html#clojure.core/reduce)有点复杂，但归结为......

```
(reduce + [1 2 3]) 
```

...将使用序列的第一个元素作为初始值，这意味着它与此相同：

```
(reduce + 1 [2 3]) 
```

* * *

你问什么是蓄能器。累加器是在循环某些东西时累积数据的*概念*。

在命令式语言中，累加器通常是一个在循环时发生变异的变量。让我们看一下 Leonel 的示例，稍作修改：

```
var sum = 0;
for (var i = 0; i < 10; ++i) {
    sum = sum + i;
}
return sum; 
```

起初，这似乎不可能以功能性的方式完成。但是`reduce`，你可以！

```
(reduce (fn [sum i] (+ sum i)) 0 (range 0 10)) 
```

这是如何工作的，`reduce`需要三个参数：

1.  转换函数
2.  累加器的初始值
3.  一个序列

它使用两个参数调用转换函数：

1.  `sum`是累加器的当前值
2.  `i`是序列的当前元素

现在，无论转换函数返回什么，都将用作累加器的当前值。换句话说......第一次迭代`sum`将是初始值。在第一次迭代之后，是*前*`sum`一次迭代中返回的转换函数。

 *`reduce`如果我在 JavaScript 中编写一个使用突变的实现，也许会有所帮助：

```
function reduce(f, init, coll) {
    for (var i = 0; i < coll.length; ++i) {
        init = f(init, coll[i]);
    }
    return init;
}

reduce(function (sum, i) { return sum + i }, 0, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]); 
```

如您所见，该`reduce`函数看起来与之前的命令式代码非常相似。

现在让我们`reduce`在 Clojure 中以一种没有变异的函数方式实现：

```
(defn reduce [f init coll]
  (if-let [s (seq coll)]
    (reduce f (f init (first s)) (rest s))
    init))

(reduce (fn [sum i] (+ sum i)) 0 (range 0 10)) 
```

但是不管是`reduce`可变的还是不可变的积累，*都是*在做积累。

* * *

有趣的是，值得注意的是 Clojure`reverse`使用以下方法实现`reduce`：

```
(defn reverse
  "Returns a seq of the items in coll in reverse order. Not lazy."
  {:added "1.0"
   :static true}
  [coll]
    (reduce1 conj () coll)) 
```

弄清楚*为什么*会这样是一个有趣的心理练习。

你也可以做一些简洁的事情，比如使用 reduce 实现 map、filter 和其他东西。但我认为这超出了你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-05T07:48:52.550

在

```
(reduce f x y) 
```

*   总是`x`一个累加器？**不。**
*   `x`有时是蓄能器吗？**不**

*   `x`是提供给 的初始值`reduce`。

**究竟什么是蓄能器？**

*累加器是作为递归函数的值返回的本地绑定。*

例如，如果我们要实现`reduce`自己，我们可能会这样做：

```
(defn reduce [f acc coll]
  (if (empty? coll)
    acc
    (recur f (f acc (first coll)) (rest coll)))) 
```

*   `acc`是一个累加器：作为一个参数，它是一个本地的。
*   `coll`为空时作为函数的值返回。

某物是否是累加器取决于函数的*主体*。

例如，如果我们这样实现`reverse`：

```
(defn reverse [coll]
  (loop [in coll, out ()]
    (if (seq in)
      (recur (rest in) (cons (first in) out))
      out))) 
```

... 然后`out`是一个累加器。

但是如果我们这样实现：

```
(defn reverse [coll]
  (reduce conj () coll)) 
```

...没有累加器。

在`reduce`调用内部，`acc`最初绑定到`()`. 但说这`()`是一个累加器是没有意义的。*

# c# - EMGU CV 中未处理 AccessViolationException

> ID：11348384
> 
> 赞同：1
> 
> 时间：2012-07-05T16:12:00.560
> 
> 标签：c#, opencv, emgucv

当我运行我的程序时，我总是得到这个错误......

![在此处输入图像描述](../Images/2ff12a61d9aac132e8af2134f25f5395.png)

我不确定我的程序有什么问题，仅供参考，实际上我的程序包含许多图像处理算法，例如

*   viola-jones，用于手部检测的 haarcascade
*   用于手部跟踪的 camshift + 卡尔曼滤波器
*   手指计数的凸包和凸面缺陷
*   和其他预处理....

我不知道这些过程是否会触发错误......

但是当我去除凸包/凸面缺陷时，错误消失了......有什么解决方案吗？

编辑：（添加）

这是代码片段

```
 private void ExtractContourAndHull()
        {
            using (MemStorage storage = new MemStorage())
            {

                Contour<Point> contours = backproject.FindContours(Emgu.CV.CvEnum.CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE, Emgu.CV.CvEnum.RETR_TYPE.CV_RETR_LIST, storage);
                Contour<Point> biggestContour = null;

                Double Result1 = 0;
                Double Result2 = 0;
                while (contours != null)
                {
                    Result1 = contours.Area;
                    if (Result1 > Result2)
                    {
                        Result2 = Result1;
                        biggestContour = contours;
                    }
                    contours = contours.HNext;
                }

                if (biggestContour != null)
                {
                    //image.Draw(biggestContour, new Bgr(Color.DarkViolet), 2);
                    Contour<Point> currentContour = biggestContour.ApproxPoly(biggestContour.Perimeter * 0.005, storage);
                    image.Draw(currentContour, new Bgr(Color.LimeGreen), 2);
                    biggestContour = currentContour;

                    hull = biggestContour.GetConvexHull(ORIENTATION.CV_CLOCKWISE);
                    box = biggestContour.GetMinAreaRect();
                    PointF[] points = box.GetVertices();
                    //handRect = box.MinAreaRect();
                    //image.Draw(handRect, new Bgr(200, 0, 0), 1);

                    Point[] ps = new Point[points.Length];
                    for (int i = 0; i < points.Length; i++)
                        ps[i] = new Point((int)points[i].X, (int)points[i].Y);

                    image.DrawPolyline(hull.ToArray(), true, new Bgr(200, 125, 75), 2);
                    image.Draw(new CircleF(new PointF(box.center.X, box.center.Y), 3), new Bgr(200, 125, 75), 2);

                    //ellip.MCvBox2D= CvInvoke.cvFitEllipse2(biggestContour.Ptr);
                    //image.Draw(new Ellipse(ellip.MCvBox2D), new Bgr(Color.LavenderBlush), 3);

                    //PointF center;
                    //float radius;
                    //CvInvoke.cvMinEnclosingCircle(biggestContour.Ptr, out  center, out  radius);
                    //image.Draw(new CircleF(center, radius), new Bgr(Color.Gold), 2);

                    //image.Draw(new CircleF(new PointF(ellip.MCvBox2D.center.X, ellip.MCvBox2D.center.Y), 3), new Bgr(100, 25, 55), 2);
                    //image.Draw(ellip, new Bgr(Color.DeepPink), 2);

                    //CvInvoke.cvEllipse(image, new Point((int)ellip.MCvBox2D.center.X, (int)ellip.MCvBox2D.center.Y), new System.Drawing.Size((int)ellip.MCvBox2D.size.Width, (int)ellip.MCvBox2D.size.Height), ellip.MCvBox2D.angle, 0, 360, new MCvScalar(120, 233, 88), 1, Emgu.CV.CvEnum.LINE_TYPE.EIGHT_CONNECTED, 0);
                    //image.Draw(new Ellipse(new PointF(box.center.X, box.center.Y), new SizeF(box.size.Height, box.size.Width), box.angle), new Bgr(0, 0, 0), 2);

                    filteredHull = new Seq<Point>(storage);
                    for (int i = 0; i < hull.Total; i++)
                    {
                        if (Math.Sqrt(Math.Pow(hull[i].X - hull[i + 1].X, 2) + Math.Pow(hull[i].Y - hull[i + 1].Y, 2)) > box.size.Width / 10)
                        {
                            filteredHull.Push(hull[i]);
                        }
                    }

                    defects = biggestContour.GetConvexityDefacts(storage, Emgu.CV.CvEnum.ORIENTATION.CV_CLOCKWISE);

                    defectArray = defects.ToArray();
                }
            }
        }
        private void DrawAndComputeFingersNum()
        {
            using (MemStorage storage = new MemStorage())
            {
                int fingerNum = 0;

                #region hull drawing
                //for (int i = 0; i < filteredHull.Total; i++)
                //{
                //    PointF hullPoint = new PointF((float)filteredHull[i].X,
                //                                  (float)filteredHull[i].Y);
                //    CircleF hullCircle = new CircleF(hullPoint, 4);
                //    image.Draw(hullCircle, new Bgr(Color.Aquamarine), 2);
                //}
                #endregion

                #region defects drawing
                ***defects = new Seq<MCvConvexityDefect>(storage);***
                for (int i = 0; i < defects.Total; i++)
                {
                    PointF startPoint = new PointF((float)defectArray[i].StartPoint.X,
                                                    (float)defectArray[i].StartPoint.Y);

                    PointF depthPoint = new PointF((float)defectArray[i].DepthPoint.X,
                                                    (float)defectArray[i].DepthPoint.Y);

                    PointF endPoint = new PointF((float)defectArray[i].EndPoint.X,
                                                    (float)defectArray[i].EndPoint.Y);

                    LineSegment2D startDepthLine = new LineSegment2D(defectArray[i].StartPoint, defectArray[i].DepthPoint);

                    LineSegment2D depthEndLine = new LineSegment2D(defectArray[i].DepthPoint, defectArray[i].EndPoint);

                    CircleF startCircle = new CircleF(startPoint, 5f);

                    CircleF depthCircle = new CircleF(depthPoint, 5f);

                    CircleF endCircle = new CircleF(endPoint, 5f);
                    MCvFont angga = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_SCRIPT_COMPLEX, 0.5, 0.5);
                   // image.Draw(defectArray[i].StartPoint.X.ToString() + " , " + defectArray[i].StartPoint.Y.ToString(), ref angga, new Point(defectArray[i].StartPoint.X, defectArray[i].StartPoint.Y), new Bgr(Color.Red));
                    image.Draw(defectArray[i].StartPoint.X.ToString() + " , " + defectArray[i].StartPoint.Y.ToString() + " , " + i.ToString(), ref angga, new Point(defectArray[i].StartPoint.X, defectArray[i].StartPoint.Y), new Bgr(Color.Red));

                    //Custom heuristic based on some experiment, double check it before use
                    if ((startCircle.Center.Y < box.center.Y || depthCircle.Center.Y < box.center.Y) && (startCircle.Center.Y < depthCircle.Center.Y) && (Math.Sqrt(Math.Pow(startCircle.Center.X - depthCircle.Center.X, 2) + Math.Pow(startCircle.Center.Y - depthCircle.Center.Y, 2)) > box.size.Height / 6.5))
                    {
                        fingerNum++;
                        //image.Draw(startDepthLine, new Bgr(Color.Blue), 2);
                        //image.Draw(depthEndLine, new Bgr(Color.Magenta), 2);
                    }

                    image.Draw(startCircle, new Bgr(Color.Red), 2);
                    image.Draw(depthCircle, new Bgr(Color.Yellow), 5);
                    //image.Draw(endCircle, new Bgr(Color.DarkBlue), 4);
                }
                #endregion

                MCvFont font = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_DUPLEX, 5d, 5d);
                image.Draw(fingerNum.ToString(), ref font, new Point(50, 150), new Bgr(Color.White));
                hand.fingerChangedCompute = fingerNum;
            }

        }

        public MemStorage storage { get; set; } 
```

orgin 看看 DrawandComputeFingersNUm() 你会看到一行

```
defects = new Seq<MCvConvexityDefect>(storage); 
```

当我取消注释上面的行时会出现问题..

有谁知道如何解决这个问题？任何帮助将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:19:06.330

如您所知，我是您正在使用的代码的创建者。

我的一位读者有时会发现与您类似的问题，评论了我的帖子并建议删除 using Memstorage 并将其放在全局范围内，然后清除存储内部`DrawAndComputeFingersNum()`功能

```
MemStorage storage = new MemStorage() //Global Declaration

private void DrawAndComputeFingersNum()
    {

            int fingerNum = 0;

            #region hull drawing
            //for (int i = 0; i < filteredHull.Total; i++)
            //{
            //    PointF hullPoint = new PointF((float)filteredHull[i].X,
            //                                  (float)filteredHull[i].Y);
            //    CircleF hullCircle = new CircleF(hullPoint, 4);
            //    image.Draw(hullCircle, new Bgr(Color.Aquamarine), 2);
            //}
            #endregion

            #region defects drawing
            defects = new Seq<MCvConvexityDefect>(storage);
            for (int i = 0; i < defects.Total; i++)
            {
                PointF startPoint = new PointF((float)defectArray[i].StartPoint.X,
                                                (float)defectArray[i].StartPoint.Y);

                PointF depthPoint = new PointF((float)defectArray[i].DepthPoint.X,
                                                (float)defectArray[i].DepthPoint.Y);

                PointF endPoint = new PointF((float)defectArray[i].EndPoint.X,
                                                (float)defectArray[i].EndPoint.Y);

                LineSegment2D startDepthLine = new LineSegment2D(defectArray[i].StartPoint, defectArray[i].DepthPoint);

                LineSegment2D depthEndLine = new LineSegment2D(defectArray[i].DepthPoint, defectArray[i].EndPoint);

                CircleF startCircle = new CircleF(startPoint, 5f);

                CircleF depthCircle = new CircleF(depthPoint, 5f);

                CircleF endCircle = new CircleF(endPoint, 5f);
                MCvFont angga = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_SCRIPT_COMPLEX, 0.5, 0.5);
               // image.Draw(defectArray[i].StartPoint.X.ToString() + " , " + defectArray[i].StartPoint.Y.ToString(), ref angga, new Point(defectArray[i].StartPoint.X, defectArray[i].StartPoint.Y), new Bgr(Color.Red));
                image.Draw(defectArray[i].StartPoint.X.ToString() + " , " + defectArray[i].StartPoint.Y.ToString() + " , " + i.ToString(), ref angga, new Point(defectArray[i].StartPoint.X, defectArray[i].StartPoint.Y), new Bgr(Color.Red));

                //Custom heuristic based on some experiment, double check it before use
                if ((startCircle.Center.Y < box.center.Y || depthCircle.Center.Y < box.center.Y) && (startCircle.Center.Y < depthCircle.Center.Y) && (Math.Sqrt(Math.Pow(startCircle.Center.X - depthCircle.Center.X, 2) + Math.Pow(startCircle.Center.Y - depthCircle.Center.Y, 2)) > box.size.Height / 6.5))
                {
                    fingerNum++;
                    //image.Draw(startDepthLine, new Bgr(Color.Blue), 2);
                    //image.Draw(depthEndLine, new Bgr(Color.Magenta), 2);
                }

                image.Draw(startCircle, new Bgr(Color.Red), 2);
                image.Draw(depthCircle, new Bgr(Color.Yellow), 5);
                //image.Draw(endCircle, new Bgr(Color.DarkBlue), 4);
            }
            #endregion

            MCvFont font = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_DUPLEX, 5d, 5d);
            image.Draw(fingerNum.ToString(), ref font, new Point(50, 150), new Bgr(Color.White));
            hand.fingerChangedCompute = fingerNum;
        storage.clear(); // clear storage allocation

    } 
```

# r - 制表多项回答问题

> ID：11348391
> 
> 赞同：5
> 
> 时间：2012-07-05T16:12:24.957
> 
> 标签：r, apply

想象一下，我有一个有四个选项的问题，受访者可以选择零或四个选项的任意组合。变量被命名为`A`, `B`, `C`, 并且`D`响应存储在 data.frame 中，如下所示。

```
set.seed(1)
dat = data.frame(A = sample(c(0, 1), 20, replace=TRUE), 
                 B = sample(c(0, 1), 20, replace=TRUE), 
                 C = sample(c(0, 1), 20, replace=TRUE),
                 D = sample(c(0, 1), 20, replace=TRUE)) 
```

我可以通过执行以下操作将响应组合制成表格（例如，有多少人`A`单独响应，或`A`+`B`或`C`+`D`等）：

```
data.frame(table(dat))
#    A B C D Freq
# 1  0 0 0 0    2
# 2  1 0 0 0    2
# 3  0 1 0 0    0
# 4  1 1 0 0    1
# 5  0 0 1 0    1
# 6  1 0 1 0    3
# 7  0 1 1 0    0
# 8  1 1 1 0    2
# 9  0 0 0 1    0
# 10 1 0 0 1    2
# 11 0 1 0 1    1
# 12 1 1 0 1    1
# 13 0 0 1 1    2
# 14 1 0 1 1    0
# 15 0 1 1 1    3
# 16 1 1 1 1    0 
```

我现在想创建一个新列，显示此输出所代表的字母组合。例如，第 4 行表示`A`+`B`响应的计数，第 14 行表示`A`+ `C`+`D`响应的计数。

我认为其中一个`apply`功能在这里会很有用，但我不确定如何进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:19:17.620

```
dat.t <- data.frame(table(dat))    
dat.t$combn <- apply(dat.t[,1:4] == 1, 1, function(x) paste(names(dat)[x], collapse=' + '))

> dat.t
   A B C D Freq         combn
1  0 0 0 0    2              
2  1 0 0 0    2             A
3  0 1 0 0    0             B
4  1 1 0 0    1         A + B
5  0 0 1 0    1             C
6  1 0 1 0    3         A + C
7  0 1 1 0    0         B + C
8  1 1 1 0    2     A + B + C
9  0 0 0 1    0             D
10 1 0 0 1    2         A + D
11 0 1 0 1    1         B + D
12 1 1 0 1    1     A + B + D
13 0 0 1 1    2         C + D
14 1 0 1 1    0     A + C + D
15 0 1 1 1    3     B + C + D
16 1 1 1 1    0 A + B + C + D
> 
```

# c# - C# WPF SQL Server Express 本地 db ObjectContext.CreateDatabase 产生错误 26

> ID：11348392
> 
> 赞同：1
> 
> 时间：2012-07-05T16:12:29.587
> 
> 标签：c#, .net, entity-framework-4, sql-server-2008r2-express

我创建了一个使用 SQL Server 2008 R2 Express 作为其后端的 WPF 应用程序。使用 EF，我通过发出一个`Objectcontext.CreateDatabase()`方法来构建我的数据库。此方法（在某些工作站上）会导致 SQL Server 错误 26 - 查找指定的服务器/实例时出错。

我的安装例程验证 SQL Server Express 依赖项并相应地安装。我的 SQL Server Express 默认实例 ( `.\SQLEXPRESS`) 是我的目标实例，并且在运行我的应用程序的机器上是本地的。

我可以使用 Windows 身份验证和以下服务器名称使用 SQL Server Management Studio 登录：

```
(local)\SQLEXPRESS, .\SQLEXPRESS, and CLASS8\SQLEXPRESS 
```

所有这些实例名称都适用于 SSMS，并且我可以在 SSMS 中发出命令而不会出现任何问题。但是，我的应用程序失败并出现错误 26。

此设置适用于我的开发工作站（Win 7 Pro），但在运行 Win 7 Pro 的 VirtualBox 中失败。我已经完成了所有 SQL Server 设置，并*认为*我已经将它们配置为相同。

遇到此问题的 VirtualBox VM 上的 Windows 防火墙已被禁用，因此它不应该是被阻止的 UDP 数据包......

我的问题可能是什么原因？

**更新**

清理和重建我的项目解决了这个问题。

# c# - 如何创建、调用管道？

> ID：11348399
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:12:53.837
> 
> 标签：c#

如何在 C# 中创建管道，以及如何从另一个进程调用创建的管道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:14:30.663

您可以使用[NamedPipeServerStream](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeserverstream.aspx)在 C# 中创建管道。MSDN 文档显示了一个使用示例，以及这个[MSDN Pipes Example](http://msdn.microsoft.com/en-us/library/bb546085.aspx)。

话虽如此，直接使用[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)通常比制作管道并自己管理它更容易。WCF 可以使用管道作为传输机制，这极大地简化了管道的创建和使用。

# c# - mvc3 提示 System.InvalidOperationException

> ID：11348401
> 
> 赞同：0
> 
> 时间：2012-07-05T16:13:01.600
> 
> 标签：c#, asp.net-mvc-3, internationalization, data-annotations

我正在使用`App_GlobalResources`mvc3 模型中存储在带有 DataAnnotations 的文件夹中的 resx 文件的翻译。

它适用于 a `Required DataAnnotation`，但如果我尝试使用`Display DataAnnotation`.

这是我的代码：

```
[Required(ErrorMessageResourceType = typeof(Resources.Error), ErrorMessageResourceName = "RequiredClientName")]
[Display(Prompt = "ClientName", ResourceType = typeof(Resources.Front))]
public string Name { get; set; } 
```

`System.InvalidOperationException`只有当我把`Display DataAnnotation`

这是完整的例外（对不起，我没有找到用英文翻译它的方法）：

> Impossible de récupérer la propriété 'Prompt' en raison de l'échec de la localisation。Le type 'Resources.Front' n'est pas public ou ne contient pas une propriété de chaîne statique publique avec le nom 'FooterAbout'。
> 
> 描述 : Une exception non gérée s'est produite au moment de l'exécution de la requête Web actuelle。Contrôlez la trace de la pour pour plus d'informations sur l'erreur et son origine dans le code。
> 
> 异常详细信息：System.InvalidOperationException: Impossible de récupérer la propriété 'Prompt' en raison de l'échec de la localisation。Le type 'Resources.Front' n'est pas public ou ne contient pas une propriété de chaîne statique publique avec le nom 'FooterAbout'。

我使用的模型存储在`Area`. 此外，我可以从`_Layout`或 中访问我的 resx 文件中的值`Required DataAnnotation`

感谢您的帮助

弗洛伦特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:25:26.880

错误消息非常不言自明（我正在为该网站的非法语观众翻译）：

> 无法检索属性“提示”，因为本地化失败。类型“Resources.Front”不是公共的或不包含名为“ClientName”的公共静态字符串属性。

您应该通过在 RESX 文件的属性中将 Custom Tool`PublicResXFileCodeGenerator`和 Build Action设置为来公开资源文件：`Embedded Resource`

![在此处输入图像描述](../Images/27b0b21405934a6769f6d9983cbaa423.png)

原因是默认情况下，生成的强类型类是内部的，并且在运行时编译成单独的程序集的 Razor 视图无法访问。

# magento - 使用magento继承主题

> ID：11348402
> 
> 赞同：3
> 
> 时间：2012-07-05T16:13:06.933
> 
> 标签：magento

我正在开发一个 magento 网站。我有 4 个类别，其中两个使用另一个主题（没有我特定的 magento 主题）。如何配置我的主题以从我的默认主题而不是基本主题中获取丢失的文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:10:50.070

通常最好为您的设计创建一个新的主题包和模板，然后将任何`base/default`更改移入`your_package/default`并将其用作第二层回退到您的设计。

*   [http://www.magentocommerce.com/knowledge-base/entry/magentos-theme-hierarchy/](http://www.magentocommerce.com/knowledge-base/entry/magentos-theme-hierarchy/)

# asp.net - IIS 7.5 授权问题 - 无法访问网络共享

> ID：11348406
> 
> 赞同：1
> 
> 时间：2012-07-05T16:13:17.607
> 
> 标签：asp.net, iis-7.5

我突然在访问 ASP.NET 应用程序中的文件时遇到了麻烦。我无法访问共享上的文件（与 Web 服务器不同的服务器）。

比如说，我的开发机器是“A”，我有文件要从服务器“B”访问。

当我在 asp.net 中编写代码时，它在调试模式下工作正常。但是当我部署到 IIS 7.5 时，我得到了未经授权的异常。

一段代码：

```
protected void Button1_Click(object sender, EventArgs e)
{           
    string filepath = @"\\ServerB\MyDocs\{0}"; //Here MYDocs folder is a shared folder in ServerB
    string filename = "Resume.pdf";

    string fileFullName = String.Format(filepath,filename);
    Response.TransmitFile(fileFullName);            
} 
```

当我在调试模式下运行时，pdf 文档会在 IE 中打开，但在部署时不会。

大多数谷歌页面说，它将在 IIS 7.5 中的应用程序池标识下运行。但我不知道我还需要修改什么。

注意：我在匿名身份验证下运行 -> 应用程序池标识

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:13:41.123

我找到了身份验证问题的解决方案。

问题是我的 Web 服务器是 Windows 2008 R2，而文件共享在 Windows 2003 服务器中。使用“IIS AppPool\DefaultAppPool”标识运行的应用程序。但此用户在 Windows 2003 Server 中不可用。

我将我的应用程序池的身份更改为“网络服务”，并在 2003 服务器中将权限授予“网络服务”用户。现在我可以打开文件应用程序了。

我在这个网站上找到了这个有用的信息：[http ://www.element-it.com/OnlineHelpHTTPCommander/Windows/ntfs.html](http://www.element-it.com/OnlineHelpHTTPCommander/Windows/ntfs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:21:52.173

尝试以下方法之一。

创建网络驱动器，并使用其驱动器号

```
string filepath = @"Z:\{0}"; 
```

尝试谷歌并搜索“网络驱动映射”。你会发现很多结果。

或者，您可以为运行应用程序池的用户授予访问权限。

并检查您是否没有使用应用程序池的经典模式。

# c++ - 扩展枚举

> ID：11348413
> 
> 赞同：3
> 
> 时间：2012-07-05T16:13:39.680
> 
> 标签：c++, enums, factory

我有一个设计问题。

我有一个多态结构，带有一个接口 A（抽象的）和一个在类 W 中实现的工作流，它使用接口 A 而不知道派生类。这是在 DLL1 中实现的，我有一个能够返回 A* 的工厂接口 F。在 DLL2 中，我有 A 的具体实现，可以是 A1、A2 等，以及能够创建 A1 和 A2 实例的工厂实现 F1。

我拥有的工厂界面是这样的。

```
enum ObjectType{typeA1, typeA2};

class F
{
    public:
    A* create(enum ObjectType) = 0;
} 
```

一些知道 DLL1 和 DLL2 的客户端类会给我具体的对象类型。

但这很难看，因为当我编写 DLL1 时，我必须预先知道具体类的可能类型。这几乎违背了我多态设计的目的。我不想这样做。

我能想到的另一种选择是使用字符串，而不是枚举。但是，我喜欢避免使用字符串，因为它们不是类型安全的并且容易出错。我希望我有机会通过继承来扩展枚举，就像类一样。

我的问题：

有没有更好的出路？在 C++11 中可以扩展枚举吗？（虽然我现在没有）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:48:06.547

您可以修改您的抽象以允许接口的用户`A`也提供创建它的特定工厂。（而不是提供`enum`）。

```
// In DLL1
class AbstractF {
public:
    virtual A * create () = 0;
};

template <typename ConcreteA>
class ConcreteF : public AbstractF {
public:
    A * create () { return new ConcreteA; }
}; 
```

现在，`ConcreteF<>`对于需要创建正确的`A`. 因此，框架用户必须通过传入正确的（即或）而不是通过传递来通知框架创建`A1`或创建哪个。`A2``ObjectType``ConcreteF``ConcreteF<A1>``ConcreteF<A2>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:21:35.573

如果让 DDL2 有一个“string-to-int”接口，你可以用它来翻译一次字符串，然后使用该 id 作为实际工厂的参数？如果 DLL2 无法识别该字符串，则创建过程可能会在此处失败。

# objective-c - ios中的图像弯曲变换

> ID：11348415
> 
> 赞同：1
> 
> 时间：2012-07-05T16:13:49.837
> 
> 标签：objective-c, ios

我认为我们不能在 iOS 中进行任何弯曲变换，即使是 3D 变换也不行，但是我们可以定义一些变换矩阵并实现它吗？

或者我们如何在 OpenGL ES 中将图像绘制到球形/圆柱形上下文？我想在我的 iPhone 应用程序中弯曲图像。

这种弯曲是可变的，取决于上下文的曲率。

一个典型的例子是杯子上的照片。

感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:58:37.090

我终于在这件事上告一段落了。我没有使用 Open GLES ，而是使用了非常有用的 ImageMagick 库。

我还发现了一个 bash 脚本，可以使用 ImageMagick C API 将图像扭曲成圆柱形。

[请参阅圆柱化脚本](http://www.fmwconcepts.com/imagemagick/cylinderize/index.php)。只是认为它可能对某人有用。干杯。

# c# - 使用后期绑定使用 C# 更改 Excel 单元格属性

> ID：11348427
> 
> 赞同：1
> 
> 时间：2012-07-05T16:14:41.497
> 
> 标签：c#, excel, office-interop, late-binding

我似乎无法获得 Excel 工作表中各个单元格的属性。我创建的函数创建了一个 Excel 工作表，用 DataSet 中的数据填充它，然后打印该工作表。

我遇到的问题是，当我打印工作表时，格式完全不正常 - 单元格太小并且很多信息被截断。我将如何设置单元格的宽度并更改字体？

这是我正在使用的一小部分内容，供您阅读：

```
// Add rows
iRow = 1;

foreach (DataRow row in table.Rows)
{
    iCol = 1;

    foreach (DataColumn col in table.Columns)
    {
        Parameters = new Object[2];
        Parameters[0] = iRow + 1;
        Parameters[1] = iCol;
        excelCell = excelSheet.GetType().InvokeMember("Cells",
          BindingFlags.GetProperty, null, excelSheet, Parameters);

        Parameters = new Object[1];
        Parameters[0] = row[col.ColumnName];
        excelCell.GetType().InvokeMember("Value",
          BindingFlags.SetProperty, null, excelCell, Parameters);

        iCol++;
    }
    iRow++;
} 
```

似乎有很多例子说明如何通过早期绑定实现类似的东西，但我一定错过了后期绑定的一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:26:41.663

我不喜欢通过反思来解决这个问题。这是痛苦的。如果可以的话，我真的建议您查看新的“动态”关键字。你失去了 Intellisense（没什么大不了的，因为无论如何它在这种情况下并不是那么有用），但是代码更容易编写和理解。

下面是打开 Excel，创建工作簿，设置单元格值，设置字体大小，最后更改列宽的示例：

```
var excelType = Type.GetTypeFromProgID("Excel.Application");
dynamic excel = Activator.CreateInstance(excelType);
excel.Visible = true;
excel.Workbooks.Add();
excel.Cells(1, 1).Value = "Hello";
excel.Cells(1, 1).Font.Size = "14";
excel.Columns(@"A:A").ColumnWidth = 20; 
```

如果您不确定如何做某事，您基本上可以在 Excel 中记录一个宏，然后查看代码。您几乎可以将其剪切并粘贴到您的 C# 代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:34:44.320

更改单元格的宽度与更改列的宽度相同

看看这有帮助吗？（**未经测试**）

```
// Set the column width
public void SetColWdth(string rng, double wdth)
{
    Range = excelSheet.GetType().InvokeMember("Range",
    BindingFlags.GetProperty,null, excelSheet, new object [] {rng});
    object [] args = new object [] {wdth};
    Range. GetType().InvokeMember ("Columnwdth",
    BindingFlags.SetProperty, null, Range, args);
} 
```

对于字体，看看[这](http://www.koders.com/csharp/fidF4EF6767132378178316CA57EDC3340B232E9EAF.aspx?s=excel)是否有帮助？

从上面的链接中引用以防万一它死了

```
foreach (string line in header)
{

    Object entireRow = GetRow(sheet, columnCount, rowOffset);
    entireRow.GetType().InvokeMember("MergeCells",
    BindingFlags.SetProperty, null, entireRow,
    new object[] { true });
    entireRow.GetType().InvokeMember("HorizontalAlignment",
    BindingFlags.SetProperty, null, entireRow, new object[] { 3 });
    Object tlCell = GetCell(sheet, 1, rowOffset);
    tlCell.GetType().InvokeMember("Value2", BindingFlags.SetProperty,
    null, tlCell, new object[] { "'" + line });
    Object font = tlCell.GetType().InvokeMember("Font",
    BindingFlags.GetProperty, null, tlCell, null);

    rowOffset++;
}

for (int col = 0; col < data.Columns.Count; col++)
{
    Object test = GetCell(sheet, col + 1, rowOffset);
    //DataTable Headers
    {
        Object erow = test.GetType().InvokeMember("EntireRow",
        BindingFlags.GetProperty, null, test, null);
        Object font = erow.GetType().InvokeMember("Font",
        BindingFlags.GetProperty, null, erow, null);
        erow.GetType().InvokeMember("HorizontalAlignment",
        BindingFlags.SetProperty, null, erow, new object[] { 3 });
        font.GetType().InvokeMember("Bold", BindingFlags.SetProperty,
        null, font, new object[] { true });
        test.GetType().InvokeMember("Value2", BindingFlags.SetProperty,
        null, test, new object[] { data.Columns[col].ColumnName.ToString() });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:47:55.923

使用 Siddharth 向我展示的内容，我能够从工作表中获取一个单元格范围并更改该范围的 ColumnWidth 属性：

```
//Get the first worksheet.
Parameters = new Object[1];
Parameters[0] = 1;
excelSheet = excelSheets.GetType().InvokeMember("Item",
    BindingFlags.GetProperty, null, excelSheets, Parameters);

//Set the Column Width within a large Range of cells.
Parameters = new Object[2];
Parameters[0] = "A1";
Parameters[1] = "E55";
excelRange = excelSheet.GetType().InvokeMember("Range",
    BindingFlags.GetProperty, null, excelSheet, Parameters);

Parameters = new Object[1];
Parameters[0] = 26;
excelRange.GetType().InvokeMember("ColumnWidth",
BindingFlags.SetProperty, null, excelRange, Parameters); 
```

我可以使用此方法通过将“ColumnWidth”替换为我想要设置的任何属性来更改该范围内的任何单元格属性。

* * *

要更改字体，我首先需要将单元格的 Font 属性作为对象，然后使用该对象访问字体属性：

```
object cellFont = excelCell.GetType().InvokeMember("Font",
    BindingFlags.GetProperty, null, excelCell, null);

Parameters = new Object[1];
Parameters[0] = true;
cellFont.GetType().InvokeMember("Bold",
BindingFlags.SetProperty, null, cellFont, Parameters); 
```

谢谢！

# javascript - 从数组中删除元素：pop 不是函数（javascript）

> ID：11348429
> 
> 赞同：3
> 
> 时间：2012-07-05T16:14:50.837
> 
> 标签：javascript, arrays, function

```
thead = new Array();
alert(thead.length);
thead = document.getElementsByTagName("th");
alert(thead.length);

thead.pop();
alert(thead.length); 
```

`document.getElementsByTagName("th")`返回一个元素数组，所以`thead`变量应该是一个数组，如果是这样，那么为什么它会给我错误“thead.pop() 不是函数”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T16:17:40.290

`getElementsByTagName`（[文档](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)）不返回一个`Array`，它返回一个[`NodeList`](https://developer.mozilla.org/en/DOM/NodeList)。正如链接`NodeList`文档所说：

> NodeList 的使用与数组非常相似，并且很想在它们上使用 Array.prototype 方法。然而，这是不可能的。

你可以用 a 做一些`Array`类似的事情`NodeList`，你甚至可以对它们使用`.apply`一些`Array.prototype`方法，但是你应该阅读文档以避免“陷阱”，尤其是在`NodeList`“生活”问题可能会咬到你的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:20:21.657

从技术上讲，`document.getElementsByTagName`返回一个`NodeList`没有`pop`功能的对象。

试一下`alert(Array.isArray(thead))`，你会看到它返回 false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:18:17.303

[`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)返回一个[`DOM 2 NodeList`](http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177)，而不是一个`Array`。

# php - 使用 jumi 传递参数

> ID：11348431
> 
> 赞同：0
> 
> 时间：2012-07-05T16:15:03.443
> 
> 标签：php, joomla, content-management-system, jumi

我在使用 jumi 传递参数时遇到问题。在我的普通 php 代码中，我像这样传递它

```
<a href=\"editdata_form.php?isbn=$row[isbn]\"> Edit </a> 
```

$row[isbn] 是一个整数值，它放入 isbn 变量并将其发送到“editdata_form.php”页面，在那里我使用 $_GET['isbn'] 获取该值。

在 jumi 中，我想将这种数据从模块（自定义 jumi 模块）传递到文章页面。为此，当我使用此代码传输数据时

```
<a href=\"index.php?option=com_content&view=article&id=18&Itemid=18?isbn=$row[isbn]\"> Edit </a> 
```

它显示类似“警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源”的错误

那么，在 jumi 中，将数据从一个模块传递到另一个文章页面的适当方法是什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:35:46.330

我相信您的查询字符串中有错字。这 ？应该 ＆：

```
<a href=\"index.php?option=com_content&view=article&id=18&Itemid=18&isbn=$row[isbn]\"> Edit </a>
                                                                   ^ 
```

并且不清楚这是否是您的实际代码，因此进一步的更改可能包括一些变化：

```
<a href=\"index.php?option=com_content&view=article&id=18&Itemid=18&isbn=<?php echo $row[isbn] ?>\"> Edit </a> 
```

# java - 使用 Java 进行休眠统计

> ID：11348432
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:15:09.467
> 
> 标签：java, hibernate, java-melody

是否可以按照以下链接中的说明使用 java melody 生成休眠统计信息：http: [//docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/stat/Statistics.html](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/stat/Statistics.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:41:29.697

我使用 JSP 来监控二级缓存。

非常类似于：

[http://hibernatestats.blogspot.in/2007/02/page-import-org.html](http://hibernatestats.blogspot.in/2007/02/page-import-org.html)

# regex - 正则表达式：订单很重要？

> ID：11348433
> 
> 赞同：2
> 
> 时间：2012-07-05T16:15:10.417
> 
> 标签：regex

我试图从电话号码中删除所有非数字字符。

所以，假设我们有这种格式的数字：“(123) 456-7890”。

```
Regex.Replace(phone, @"[ -()]", string.Empty) 
```

留下破折号。与 () 转义 ("\(\)") 相同。

这个

```
Regex.Replace(phone, @"[() -]", string.Empty) 
```

虽然有效。

我认为 [] 中的字符顺序不起作用？事实上，如果我切换空间并四处冲刺，我会得到相同的结果。但是括号必须先起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:18:32.523

`-`可用于声明范围，例如`[a-z]`. 你需要逃避它：`[ \-()]`.

例外情况是，如果您将破折号放在字符组的末尾，它的唯一含义可以是文字`-`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:20:15.203

连字符的位置很重要，因为连字符在字符类 ( `[]`) 中用于表示范围，例如`a-z`. 因此，在末尾有连字符，正则表达式引擎知道您不打算在某个范围内使用破折号，因为它后面没有任何内容。见[http://www.regular-expressions.info/charclass.html](http://www.regular-expressions.info/charclass.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T16:17:41.883

`-`在此上下文中是一个特殊字符，表示一个范围（例如`[a-zA-Z0-9]`）。当它出现在末尾时，它不能表示范围，因此可以正常工作。

正确的解决方案是用反斜杠转义它：`\-`.

# java - 在 Android 上使用多个内容视图（XML 和画布）

> ID：11348437
> 
> 赞同：0
> 
> 时间：2012-07-05T16:15:21.430
> 
> 标签：java, android

我在使用 Canvas 绘制数学方程式和文本以及在屏幕底部使用文本框输入结果数据时遇到问题。在我当前的设置中，我可以有按钮和文本框，或者方程和变量名称。这是我的java类代码

```
 package com.soraingraven.suprRef;

import java.io.IOException;
import java.io.InputStream;

import android.app.Activity;
import android.content.Context;
import android.content.res.AssetManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;

public class PerfectGasLaw extends Activity {
    class RenderView extends View {
        //For the Text
        Paint paint;
        Typeface font;

        //For the pics
        Bitmap PGL;

        public RenderView(Context context) {
            super(context);
            paint = new Paint();

            //Attempt to load the bitmaps
            try {               
                AssetManager assetManager = context.getAssets();
                InputStream inputStream = assetManager.open("PerfGasLaw.png");
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inPreferredConfig = Bitmap.Config.ARGB_4444;
                PGL = BitmapFactory.decodeStream(inputStream, null, options);
                inputStream.close();
                Log.d("BitmapText", "bobargb8888.png format: " + PGL.getConfig());

            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                //we should really close our input streams here.
            }
        }

        //Drawing text and pics
        protected void onDraw(Canvas canvas) {
            paint.setColor(Color.BLUE);
            paint.setTypeface(font);
            paint.setTextSize(32);
            paint.setTextAlign(Paint.Align.LEFT);
            canvas.drawText("P = Pressure in Atmospheres", 25, 350, paint);
            canvas.drawText("V = Volume in Liters", 25, 400, paint);
            canvas.drawText("n = Number of moles", 25, 450, paint);
            canvas.drawText("R = Gas Constant", 25, 500, paint);
            canvas.drawText(" - (0.0821 Liter-Atmospheres / K / mole)", 50, 550, paint);
            canvas.drawText("T = Temperature in K", 25, 600, paint);
            canvas.drawText("If Constant Pressure - V1/V2 = T1/T2", 25, 650, paint);
            canvas.drawText("If Constant Temperature - P1/P2 = V2/V1", 25, 700, paint);
            canvas.drawText("If Constant Volume - P1/P2 = T1/T2", 25, 750, paint);

            canvas.drawBitmap(PGL, 25, 25, null);
            invalidate();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setContentView(new RenderView(this));
    }
} 
```

和 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/edit_message"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        android:ems="10"
        android:hint="@string/edit_message" >

        <requestFocus />
    </EditText>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:text="@string/button_send" />

</LinearLayout> 
```

请协助我执行此操作。此外，如果有人能告诉我如何从这样的文本字段中获取输入，那将会很有帮助。此外，我正在尝试使用尽可能少的 XML 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:22:36.993

你可以继承你自己的子类，比如`EquationView`从一个`View`视图有你的 onDraw 方法（）。

然后在 XML 中放置视图，例如

```
<mypackage.equation.EquationView ... 
  android:layout_width=...
  android:layout_height=...
/> 
```

连同那些`EditText`和`Button`

# asp.net-mvc-3 - MVC3 如何动态添加验证错误

> ID：11348438
> 
> 赞同：1
> 
> 时间：2012-07-05T16:15:22.603
> 
> 标签：asp.net-mvc-3, razor, data-annotations

我试图在视图中显示错误消息。您能否建议我正确的方法来做到这一点。我正在考虑动态添加数据注释，但找不到任何解决方案。

谢谢

```
[HttpPost]
public ActionResult AddBook(BooksModel booksModel)
{           
    try
    {
        booksModel.Account = _bookRepository.BookDetails(booksModel.Title,booksModel.RefCode, booksModel.DontHaveRefCode);
    }
    catch (FaultException faultException)
    {
        switch (faultException.Code.Name)
        {
            case "exc1":
            // Show Error Message Here
            return View("AddBook", booksModel);
            default:
            break;
        }
    }
    return View("ConfirmBook", booksModel);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T16:21:29.260

我想你正在寻找：

```
[HttpPost] 
public ActionResult AddBook(BooksModel booksModel) 
{            
    try 
    { 
        booksModel.Account = _bookRepository.BookDetails(booksModel.Title,booksModel.RefCode, booksModel.DontHaveRefCode); 
    } 
    catch (FaultException faultException) 
    { 
        switch (faultException.Code.Name) 
        { 
            case "exc1": 

            ModelState.AddModelError("", faultException);
            return View("AddBook", booksModel); 
            default: 
            break; 
        } 
    } 
   return View("ConfirmBook", booksModel); 
} 
```

# spring-mvc - 在自定义 AuthenticationProvider 中访问 HttpServletRequest

> ID：11348439
> 
> 赞同：10
> 
> 时间：2012-07-05T16:15:30.303
> 
> 标签：spring-mvc, spring-security

如何在自定义 AuthenticationProvider 中访问 HttpServletRequest。我试过这样做

```
RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();

HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();
String username = (String) httpReq.getAttribute("j_username"); 
```

或者

```
RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();
HttpServletRequest httpReq = ((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes()).getRequest();

String username = (String) httpReq.getAttribute("j_username"); 
```

我的用户名为空

但`RequestContextHolder.getRequestAttributes();`返回`null`。

我想引用 requestcontext，将其传入，或者让 Spring 执行它的 Magic，以便我可以引用它。

我还在 web.xml 中提供 RequestContextListener

```
 <listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
  </listener> 
```

我已经搜索了安全论坛，但仍然没有找到任何东西。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T12:29:19.733

我刚刚将侦听器添加到我的 web.xml 和 RequestContextHolder.getRequestAttributes() 返回 RequestAttributes 而不是 null。

```
<listener>
  <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

如果您想自定义登录表单，为什么不扩展此过滤器：org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-12-03T07:59:40.573

Use request.getParameter("j_username"); instead of request.getAttribute("j_username");

It works for me. See if it helps you.

# java - GWT 代码生成、MVC 和支持

> ID：11348440
> 
> 赞同：1
> 
> 时间：2012-07-05T16:15:40.467
> 
> 标签：java, javascript, gwt

我正在阅读 GWT，到目前为止，这听起来好得令人难以置信（！）。

我想开始投入时间来真正学习 GWT，但我会有一些非常具体的用途，而且我不想花 2 周时间学习它，却发现我根本无法使用它。

我已经梳理了常见问题解答并进行了大量搜索，但在我的一生中无法找到一些非常具体的问题的答案。由于它们在本质上是如此相似（它们都与 GWT 的功能有关，令人惊讶的是，项目文档中基本上没有这些功能）我认为与其把 SO 与许多微问题混为一谈，我只会把它们在这里，他们应该阐明我难以理解的同一个问题：

*   高性能 Web 开发的标志性“最佳实践”之一是将 CSS 放在每个 HTML 页面的顶部，将 JS 放在底部；**GWT 可以尊重这一点**，更一般地说，GWT 是否允许您输出您喜欢的客户端代码（意思是，生成代码的顺序以及生成的代码）？
*   GWT 是否支持客户端 MVC/MVP 模式？简而言之，如何？
*   GWT 是否需要任何类型的特殊配置、库等来输出代码的“移动网络”版本以及**“**普通网络”版本（意思是，2+ 生成的代码库，其中 1 意味着提供给网络浏览器另一个是提供给像 WebKit 这样的移动浏览器的）？
*   **官方 GWT 项目（由Google**托管和维护）在哪里记录其支持的浏览器列表？我只能找到4岁的[这个。](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/FAQ_CurrentlySupportBrowsers)

提前感谢您在正确方向上的任何帮助/推动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:23:41.407

*   GWT 有许多不同的引导机制，并且以非常出色而著称。如果您想知道可以做什么，请查看不同的链接器。总的来说，它对这类事情非常好。
*   那里有很好的 MVP 框架（GWTP - [http://code.google.com/p/gwt-platform/](http://code.google.com/p/gwt-platform/)），GWT 内部也有一个 MVP 实现（https://developers.google.com/web-toolkit /doc/latest/DevGuideMvpActivitiesAndPlaces)
*   如果您想从相同的代码库编写移动和桌面应用程序，请查看 m-gwt ( [http://www.m-gwt.com](http://www.m-gwt.com) )，它是一个类似于 GWT Core 构建的移动框架。
*   GWT 支持所有相关的浏览器，因为它被谷歌广泛用于支持许多谷歌应用程序。

# c# - 为了读取二维码，暂时将 PDF 转换为图像

> ID：11348444
> 
> 赞同：5
> 
> 时间：2012-07-05T16:15:50.100
> 
> 标签：c#, .net, pdf, qr-code

我需要能够从 PDF 文件中读取二维码。我正在使用 thinkworks.QRCode，它接受图像并返回 QR 码中保存的数据。我有那部分工作。

但是，我需要能够接受多页 PDF 文件并将每一页作为图像发送到 QR 阅读器。然后，我需要将原始 PDF 的每一页保存为以 QR 码中包含的数据命名的单页 PDF。

你会推荐我在这个项目中使用什么库？我见过的许多作品都创建了永久图像，但我只想要临时图像。有什么东西可以让我轻松做到这一点吗？是否有另一个可以阅读 pdf 的 QR 阅读器？

感谢您提供的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T16:31:11.080

我使用 itextsharp 和 libtiff.NET 将 tiff 图像从 PDF 文件提取到内存中。底线是 itextsharp 将允许您访问图像，但如果它们被编码，您需要自己进行编码或使用另一个库，这就是 libtiff.NET 的用武之地。

以下代码根据我提出的问题的答案进行了修改：[PDF Add Text and Flatten](https://stackoverflow.com/questions/7519748/pdf-add-text-and-flatten)

```
Private Shared Function ExtractImages(ByVal pdf As Byte()) As List(Of Byte())
    Dim images As New List(Of Byte())
    Dim reader As New PdfReader(pdf)

    If (reader IsNot Nothing) Then
        ' Loop through all of the references in the PDF.
        For refIndex = 0 To (reader.XrefSize - 1)
            ' Get the object.
            Dim obj = reader.GetPdfObject(refIndex)

            ' Make sure we have something and that it is a stream.
            If (obj IsNot Nothing) AndAlso obj.IsStream() Then
                ' Cast it to a dictionary object.
                Dim pdfDict = DirectCast(obj, iTextSharp.text.pdf.PdfDictionary)

                ' See if it has a subtype property that is set to /IMAGE.
                If pdfDict.Contains(iTextSharp.text.pdf.PdfName.SUBTYPE) AndAlso (pdfDict.Get(iTextSharp.text.pdf.PdfName.SUBTYPE).ToString() = iTextSharp.text.pdf.PdfName.IMAGE.ToString()) Then
                    ' Grab various properties of the image.
                    Dim filter = pdfDict.Get(iTextSharp.text.pdf.PdfName.FILTER).ToString()
                    Dim width = pdfDict.Get(iTextSharp.text.pdf.PdfName.WIDTH).ToString()
                    Dim height = pdfDict.Get(iTextSharp.text.pdf.PdfName.HEIGHT).ToString()
                    Dim bpp = pdfDict.Get(iTextSharp.text.pdf.PdfName.BITSPERCOMPONENT).ToString()

                    ' Grab the raw bytes of the image
                    Dim bytes = PdfReader.GetStreamBytesRaw(DirectCast(obj, PRStream))

                    ' Images can be encoded in various ways. 
                    ' All of our images are encoded with a single filter.
                    ' If there is a need to decode another filter, it will need to be added.
                    If (filter = iTextSharp.text.pdf.PdfName.CCITTFAXDECODE.ToString()) Then
                        Using ms = New MemoryStream()
                            Using tiff As Tiff = tiff.ClientOpen("memory", "w", ms, New TiffStream())
                                tiff.SetField(TiffTag.IMAGEWIDTH, width)
                                tiff.SetField(TiffTag.IMAGELENGTH, height)
                                tiff.SetField(TiffTag.COMPRESSION, Compression.CCITTFAX4)
                                tiff.SetField(TiffTag.BITSPERSAMPLE, bpp)
                                tiff.SetField(TiffTag.SAMPLESPERPIXEL, 1)

                                tiff.WriteRawStrip(0, bytes, bytes.Length)
                                tiff.Flush()
                                images.Add(ms.ToArray())
                                tiff.Close()
                            End Using
                        End Using
                    Else
                        Throw New NotImplementedException("Decoding this filter has not been implemented")
                    End If
                End If
            End If
        Next
    End If

    Return images
End Function 
```

# javascript - Fancybox：检测事件何时设置？

> ID：11348450
> 
> 赞同：0
> 
> 时间：2012-07-05T16:16:06.473
> 
> 标签：javascript, jquery, events, fancybox, frontend

我想在我的一个页面上动态生成一个花式框弹出窗口。这个想法是，我生成一个图像，应用fancybox和它，然后直接显示弹出窗口

目前，我这样做：

```
// Image generation...
// At the end I get the image then apply the fancbox
jQuery('a#myimage').fancybox();

// Then I would like the popup to appear directly so I do...
jQuery('a#myimage').click(); 
```

...但它不起作用，因为有时，当点击触发时，fancybox 尚未激活！当fancybox完全初始化时，有没有办法执行点击？

提前致谢

# algorithm - 解决文字游戏 Ghost（如 xkcd 上所见） - 拼写字母而不造字

> ID：11348467
> 
> 赞同：5
> 
> 时间：2012-07-05T16:16:59.577
> 
> 标签：algorithm, data-structures, puzzle

如何解决文字游戏Ghost？[Ghost](http://en.wikipedia.org/wiki/Ghost_(game))是一款两人文字游戏。玩家轮流向不断增长的单词片段添加字母。

引用[兰德尔·门罗](http://blog.xkcd.com/2007/12/31/ghost/)

> 玩幽灵，你交替说字母。第一个（a）拼写一个单词，或（b）创建一个不能作为单词开头的字符串的人输了。因此，您交替构建一个单词，并且您必须始终朝着一个单词努力，但您不能成为结束它的人。示例游戏，玩家一和两个交替字母：
> 
> GAME - 玩家 1 因拼写“Game”而输了</p>
> 
> ABSORB — 玩家 2 因拼写“ABSORB”而输了</p>
> 
> BZ-“挑战”——玩家 1，看到“Z”，说“挑战”。意思是“我认为你没有建立一个词。说出一个以‘BZ’开头的词，证明你不只是在编造东西。” 玩家 2 不能，并且输了。如果他能，他会赢。

然后，门罗吹嘘说他在一次飞行中解决了这个游戏（针对特定的字典）。他

*   断言第一个玩家总是可以获胜
*   展示第一个玩家可以用来保证获胜的短床单
*   展示一张短床单，如果第一个玩家犯错，第二个玩家可以用它来获胜

例如，如果第一个玩家以“L”开局，那么第二个玩家可以用另一个“L”回复，迫使第一个玩家在“LLAMA”处输掉。

Munroe 没有分享他的算法或代码 :( 他是如何解决 Ghost 的？

* * *

还有一个[更难的变体](http://everything2.com/user/%252Fdev%252Fjoe/writeups/Ghost)，可以在单词片段之前添加字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:31:49.843

解字典——

您创建一个树结构，其中根节点没有字母，每个子节点都是将单词中的下一个字母添加到树中的结果。

叶节点是完整的单词（您可以丢弃具有初始子集也是完整单词的单词）。

当您构建完整的树并拥有所有叶节点时，具有奇数个字母的叶节点是玩家 2 的目标，具有偶数个字母的节点是玩家 1 的目标。

你上一层楼；如果给定节点下的所有节点都是玩家 x 的目标，则该节点也成为玩家 x 的目标；或者如果给定节点下的任何节点是玩家 x 的目标，并且该节点将在玩家 x 的回合中被击中，则该节点成为玩家 x 的目标。

如果单个角色节点是玩家 1 的目标，玩家 1 总是可以赢得游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:32:24.197

从字典中的所有单词构建一棵树（trie）。

我们将逐步将树中的所有节点标记为玩家 1 或 2 的获胜者。

*   在叶子中你已经知道游戏的结果，所以简单地标记它们
*   一旦一个叶子的所有子节点都被填满，我们就知道结果：如果正在进行下一步的玩家至少有一个获胜子叶子，那么所讨论的父叶子就是他的赢家，否则就是另一个玩家。
*   通过在这两个步骤之后对树进行后序遍历，我们可以填充所有树，并在每个节点处确定每个玩家的获胜步骤是什么。

检查根节点（用空词），看看谁有获胜策略（假设另一个玩家玩得很完美）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:39:43.277

解决了！一年前我做了第一部分，但今天我想如何修剪成一个简洁的获胜策略

[https://github.com/hickford/ghost](https://github.com/hickford/ghost)

# datamapper - 高级 DataMapper 搜索多对多关系

> ID：11348475
> 
> 赞同：0
> 
> 时间：2012-07-05T16:17:23.147
> 
> 标签：datamapper, ruby-datamapper

在 DataMapper 文档中给出[Tag/Photo示例：](http://datamapper.org/docs/associations.html)

```
 class Photo
   include DataMapper::Resource

   property :id, Serial

   has n, :taggings
   has n, :tags, :through => :taggings
 end

 class Tag
   include DataMapper::Resource

   property :id, Serial

   has n, :taggings
   has n, :photos, :through => :taggings
 end

 class Tagging
   include DataMapper::Resource

   belongs_to :tag,   :key => true
   belongs_to :photo, :key => true
 end 
```

我想选择所有没有照片的标签我知道我可以做

```
Tag.select { |tag| tag.photos.size < 1} 
```

但我想要更多的 Datamapper 语法。就像是

```
Tag.all :photos.count.lt => 1  #not works 
```

有没有办法做到这一点？有谁知道用于高级查询的不错的 Datamapper 文档？[该站点上的文档](http://datamapper.org/docs/find.html)非常好，但太基础了。

太极拳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:02:43.907

`Tag.all(:photos => nil)`将在 2 个 SQL 查询中得到你想要的。如果您更喜欢一个复杂的查询，则必须编写自定义 SQL 并使用`repository(:default).adapter.select('SELECT ...')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:37:49.497

尝试这个：

```
Tag.photos.all(:count.lt => 1) 
```

# ruby-on-rails-3 - 使用 Rails 在 Bootstrap 中进行媒体查询

> ID：11348477
> 
> 赞同：1
> 
> 时间：2012-07-05T16:17:34.473
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我想在我的 rails 应用程序中使用以下媒体查询。

```
 @media (min-width: 768px) {

   .center.navbar .nav, .center.navbar .nav > li {
    display:inline-block;
    float:none;
     vertical-align:top;
    width:100%;
    }

  .center .dropdown-menu {
  display: none;
  text-align:left;

   }

 .center .dropdown.open ul {

 display: block;

   } 
```

我使用引导程序作为我的前端框架。通常，如果我想覆盖一段 Bootstrap CSS，我会将我的代码放在覆盖样式表中，但是我不确定在哪里放置媒体查询。我已经尝试了主样式表和覆盖样式表，但它没有阅读它。我确定我在这里遗漏了一条基本规则，如果有人能指出我正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:25:39.793

Chrome 非常适合 CSS 优先级调试。

我之前已将您的 CSS 放在`<style>`标签中`</head>`

并添加`.center`到`.navbar`

然后只需右键单击`.navbar`并单击`Inspect Element`

您可以在左下角的代码中导航，如果单击，`.nav`您可以在右下角看到应用于您的选择的 CSS（您将识别媒体查询）。

你的css的位置不是问题，优先考虑你的覆盖，因为 `.center.navbar`包括2个类，默认行为只使用1个类。

![用 chrome 调试 css](../Images/68fdb8fdec07fc0fda503c3cf8c06a60.png)

确保上课`.center`。`.navbar`

**笔记：**

对我来说，您的问题有 3 个可能的原因。

*   失踪了`.center`（这就是为什么我要求你确保`.center`存在）
*   缓存服务于 CSS，您需要清除 Web 浏览器的缓存。
*   样式表中不存在媒体查询（您可以使用 chrome 进行调试以证明这一点）

# javascript - 语音转文本 javascript,html5

> ID：11348478
> 
> 赞同：0
> 
> 时间：2012-07-05T16:17:36.657
> 
> 标签：javascript, html

如何使用 javascript 或 html5 对文本进行语音转换，我已经使用 x-webkit-speech 在 chrome 中完成了它，但它在其他浏览器中不受支持。所以是否有任何 api 或库来进行语音识别。任何答案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:14:56.520

快速谷歌搜索显示以下语音到文本：

[http://speechapi.com](http://speechapi.com)

[是否有适用于 Google 语音识别技术的 API？](https://stackoverflow.com/questions/8830203/is-there-an-api-for-googles-speech-recognition-technology)

# asp.net - Safari 添加尾部斜杠

> ID：11348479
> 
> 赞同：2
> 
> 时间：2012-07-05T16:17:37.667
> 
> 标签：asp.net, safari, seo, url-rewrite-module

我有一个 ASP.NET 网站，它使用 URLRewrite 2 从 URL 中删除尾部斜杠。

我们注意到 Mac 上的 Safari 不遵守此规则。它总是在 URL 中留下斜杠。SEO Moz 显示这两个 URL，这似乎是一个潜在的重复内容问题。

这是我们 Web.Config 中的 URLRewrite 规则

```
<rule name="Remove trailing slash" stopProcessing="true">
    <match url="(.*)/$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Redirect" redirectType="Permanent" url="{R:1}" />
 </rule> 
```

这是有问题的网站：[http](http://www.kurtzandblum.com/) ://www.kurtzandblum.com/ （除 Safari 外，斜线将被删除）

我正在努力决定是否...

1.  这是 Safari 中一个无害的错误吗？
2.  我的重写脚本有缺陷。
3.  我应该将其切换为“添加”尾随斜杠。

谷歌说斜线或不斜线都可以工作[http://googlewebmastercentral.blogspot.com/2010/04/to-slash-or-not-to-slash.html](http://googlewebmastercentral.blogspot.com/2010/04/to-slash-or-not-to-slash.html)

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:13:00.077

这就是 Safari 处理 URL 的方式。对 SEO 没有影响，因此您无需执行任何操作。

您的网址在 Chrome 中看起来不错。

# mysql - 将语法从 sqlplus 格式更改为 mysql 格式

> ID：11348486
> 
> 赞同：0
> 
> 时间：2012-07-05T16:18:21.690
> 
> 标签：mysql, sqlplus

我目前正在尝试将语法从 sqlplus 更改为 mysql 以设置报告文件的外观，以便更有条理

```
set pagesize 66
set linesize 75
ttitle center EarthOrientation Parameters(U) 2                                       

column year heading "Year" format 9999
column month heading "Month" format 99
column day heading "Day" format 99
column mjd heading "MJD" format 99999
select year, month , day , mjd, from     TB_PARAMETER_UI order by year,month,day,mjd; */ 
```

有谁知道 setpage size 和 set line size 和 title 的正确替换以及如何在 mysql 中设置列​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:36:07.763

那是在Oracle中你可以设置的，在Mysql中我还没有听说过这样的东西，但你可以使用这个：

```
select LEFT(`text`,100) as columname from table1; 
```

其中 100 是字符数，但是如果您想以其他格式显示结果，您可以`\G`使用`;`

编辑

```
mysql> select left(first_name,4) as short_name from t1 limit 10;
+------------+
| short_name |
+------------+
| PENE       |
| NICK       |
| ED         |
| JENN       |
| JOHN       |
| BETT       |
| GRAC       |
| MATT       |
| JOE        |
| CHRI       |
+------------+
10 rows in set (0.00 sec) 
```

编辑2：

```
mysql> select left(first_name,4) as short_name 
from t1 limit 10 into outfile 'test.txt';
Query OK, 10 rows affected (0.00 sec) 
```

编辑 3：

尝试这个：

```
mysql -e "select left(first_name,4) as short_name 
from t1 limit 10" -u myuser -pxxxxxxxxx mydatabase > mydumpfile.txt 
```

它给出了这样的结果：

```
short_name
PENE
NICK
ED
JENN
JOHN
BETT
GRAC
MATT
JOE
CHRI 
```

# playframework - JPQL 等效于具有 EXISTS 和关系的 SQL 查询

> ID：11348489
> 
> 赞同：0
> 
> 时间：2012-07-05T16:18:46.680
> 
> 标签：playframework, jpql

我正在使用 Play 框架 1.2.4

我创建了 3 个具有关系的模型类：

标题 <1 - n> 行 - 1> LineType

```
@Entity
public class Header extends Model {
   @OneToMany(mappedBy="header" , cascade=CascadeType.ALL)
   public List<Line> lines;
   ...
}

@Entity
public class Line extends Model{
   @ManyToOne
   public Header header ;

  @ManyToOne
   publicLineType lineType;
   ...
}

@Entity
public class LineType extends Model {

   public Integer code ;
   ...
} 
```

我想在标题搜索期间对线型进行过滤。

如何在 Play Framework 中使用 JPQL（或其他）编写此 SQL 查询的等效项？

```
 Select * from header where exists(select 1 from line,typeline where line.header=header.id and  line.lineType=linetype.id and linetype.code = 'X') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:00:01.123

我回答我自己的问题：

```
Query query = JPA.em().createQuery("select header from Header as header where exists(select line from Line line JOIN ligne.lineType as type where ligne.header=header and type.code='X')");
List<Header> headers = query.getResultList(); 
```

内连接：[http ://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_inner_joins](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_inner_joins)

存在：[http ://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_exists](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_exists)

# javascript - 没有jquery如何做hoverintent？

> ID：11348491
> 
> 赞同：2
> 
> 时间：2012-07-05T16:19:03.700
> 
> 标签：javascript

我不想在我的所有页面中包含 jquery，但我在一个部分的悬停时添加了一个全局“弹出”菜单，但我不希望它立即出现，因为它只是在移动鼠标时很烦人。通常我会用 jquery 和 hoverintent 来做这件事，但这次不是。

我想我可以`onmouseover`为该区域设置一个超时，但不确定它是否就这么简单（比如，当鼠标移动时它不会像数千次一样触发吗？）

目前的代码是这样的......

```
<div onMouseOver="showCart();">Hover here!</div> 
```

那么将其更改为这项工作吗？：

```
<div onMouseOver="setTimeout(showCart, 50);">Hover here!</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:48:36.673

这是一个非常简单的 Vanilla DOM 方法。这需要一个具有 id 的元素`target`（用于菜单项）和一个具有 id 'dropdown' 的元素。

请注意，这使用全局旧式“on”处理程序，这可能不是最佳实践（您应该使用`addEventListener`），但是，我认为这使代码更具可读性:)

我还在[这里设置了一个 jsFiddle](http://jsfiddle.net/Nt8Pq/1)

```
var target = document.getElementById('target');
var dropdown = document.getElementById('dropdown');
var curEl;

document.onmousemove = function(e) {
    e = e || window.event;
    curEl = e.target || e.srcElement;
}

target.onmouseover = function(e) {
    setTimeout(function() {
        if (curEl === target || curEl === dropdown) {
            dropdown.style.display = "block";
        } else {
            dropdown.style.display = "none";
        }
    }, 300);
}

target.onmouseout = dropdown.onmouseout = function() {
    setTimeout(function() {
        if (curEl !== target && curEl !== dropdown) {
            dropdown.style.display = "none";
        }
    }, 300);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:28:08.663

好吧，我最初的尝试惨遭失败，但后来让它像这样工作......

```
<div onmouseover="window.mycarthoverin = 1; setTimeout(showCart, 100);" onmouseout="window.mycarthoverin = 0;">Hover here!</div> 
```

然后里面`showCart`...

```
if (window.mycarthoverin == 1) {
  ...
} 
```

有人看到我可能不知道的这种方法有问题吗？

# delphi - Windows XP 中的 Delphi Aero 风格

> ID：11348492
> 
> 赞同：3
> 
> 时间：2012-07-05T16:19:04.560
> 
> 标签：delphi, delphi-xe2

是否可以使用 DelphiXE2 在 Windows XP 中制作窗体和其他组件的 Aero Glass Effect。如果是，请告诉我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:08:57.733

您不能在 Windows XP 下使用 Aero 样式，Aero 样式是 Windows Vista 中引入的[DWM](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969540%28v=vs.85%29.aspx)（桌面窗口管理器）的一部分，唯一的选择是使用模拟这种外观的皮肤库，所以尝试使用像[AlphaControls Lite Edition](http://www.alphaskins.com/)组件这样的库。（Delphi XE2 包含一个名为 Vcl Styles 的皮肤库，但这不支持高级可视化效果，如 alpha 混合和分层/透明窗口）

# c# - 调整 3D 数组的大小

> ID：11348493
> 
> 赞同：5
> 
> 时间：2012-07-05T16:19:10.737
> 
> 标签：c#, visual-studio-2010, vb6, vb6-migration

我正在尝试在 C# 中调整 3D 数组的大小。

VB6 代码如下：

```
ReDim Combos(ProductNum, 4, 3) 
```

由于我不能`Array.Resize`用于 3D 数组，是否有另一种方法可以在 C# 中执行此功能？

我已经将数组声明为 3D 数组：

```
int[ , , ] Combos; 
```

但我无法调整它的大小。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:25:09.440

无法在 .NET 中直接重新调整多维数组的大小。我建议分配一个新数组，然后使用[`Array.Copy`](http://msdn.microsoft.com/en-us/library/z50k9bft%28v=vs.100%29).

话虽如此，根据您所做的事情，您可能还需要考虑使用不同的集合类型。.NET 在集合方面比 VB6 有更多的选择，因此许多使用多维数组的情况更适合其他集合类型，尤其是在它们要调整大小的情况下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T16:29:00.557

即使对于一维数组，在 C# 中，数组大小调整也是通过将元素复制到新调整大小的数组中来实现的。

如果您需要经常调整数组大小，集合将是更好的解决方案。

如果您仍想调整数组大小，代码如下：

```
T[,,] ResizeArray<T>(T[,,] original, int xSize, int ySize, int zSize)
{
    var newArray = new T[xSize, ySize, zSize];
    var xMin = Math.Min(xSize, original.GetLength(0));
    var yMin = Math.Min(ySize, original.GetLength(1));
    var zMin = Math.Min(zSize, original.GetLength(2));
    for (var x = 0; x < xMin; x++)
        for (var y = 0; y < yMin; y++)
            for (var z = 0; z < zMin; z++)
                newArray[x, y, z] = original[x, y, z];
    return newArray;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:37:51.467

代码：

```
 public int[,,] ReDimension(int[,,] OldArray,int arr1stDimLength,int arr2ndDimLength,int arr3rdDimLength)
     {
        // declare a larger array
         int[,,] NewArray = new int[arr1stDimLength,arr2ndDimLength,arr3rdDimLength];

        // determine if we are shrinking or enlarging
        const int FirstDimension = 0;
        const int SecondDimension = 1;
        const int ThirdDimension = 2;
        int xMax = 0;
        int yMax = 0;
        int zMax = 0;
         // determine if we are shrinking or enlarging columns
         if (OldArray.GetUpperBound(FirstDimension) < (arr1stDimLength - 1))
             xMax = OldArray.GetUpperBound(FirstDimension) + 1;
        else
             xMax = arr1stDimLength;

         // determine if we are shrinking or enlarging rows
         if (OldArray.GetUpperBound(SecondDimension) < (arr2ndDimLength - 1))
             yMax = OldArray.GetUpperBound(SecondDimension) + 1;
         else
             yMax = arr2ndDimLength;

         // determine if we are shrinking or enlarging depth
         if (OldArray.GetUpperBound(ThirdDimension) < (arr3rdDimLength - 1))
             zMax = OldArray.GetUpperBound(ThirdDimension) + 1;
        else
            zMax = arr3rdDimLength;

         // place values of old array into new array
         for(int z = 0; z < zMax; z++)
         {
             for(int x = 0; x < xMax; x++)
             {
                 for(int y = 0; y < yMax; y++)
                 {
                     NewArray[x, y, z] = OldArray[x, y, z];
                     Console.Write("[{0}]", NewArray[x, y, z]);
                 }
                 Console.Write("\n");
             }
             Console.Write("\n\n");
         }

         return NewArray;
    } 
```

取自： http: [//www.codeproject.com/Articles/2503/Redhotglue-C-ArrayObject](http://www.codeproject.com/Articles/2503/Redhotglue-C-ArrayObject)

使用控制台应用程序在 C# (VS 2008) 中测试：

```
 static void Main(string[] args)
    {
        int[, ,] combos = new int[1,2,3];
        Console.WriteLine("Combos size: {0}",combos.Length.ToString());
        combos = ReDimension(combos, 5, 5, 5);
        Console.WriteLine("New Combos size: {0}", combos.Length.ToString());
        Console.ReadKey();
    } 
```

似乎工作正常。

# google-maps-api-3 - 将 Choropleth 与 Google Maps API V3 结合使用

> ID：11348496
> 
> 赞同：0
> 
> 时间：2012-07-05T16:19:27.523
> 
> 标签：google-maps-api-3, raphael, cartography

我目前正在尝试在我的地图中实现一个简单的等值线地图（使用谷歌地图 api v3）。稍后我将使用 xml 或 json 来检索我的数据，但目前我只是尝试使用硬编码数据。它适用于 V2 API 谷歌地图，但不适用于 v3。我不确定我做错了什么。我的代码如下：

```
 <script type="text/javascript">
    var geocoder;
    var map;
    function initialize() {

geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(51.500152, -0.126236);
var myOptions = {
  zoom: 8,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.TERRAIN
}
map = new google.maps.Map(document.getElementById("map"), myOptions);

  var cartographer = Cartographer( map, { colorize:"#000", colorizeAlpha:.3 } );
cartographer.choropleth([
  {region:"US-MN",val:6},
  {region:"US-IA",val:10},
  {region:"US-WI",val:8},
  {region:"US-SD",val:7},
  {region:"US-ND",val:9},
  {region:"US-MI",val:12}
], { colorScheme:"BuPu"});

    }

     function codeAddress() {
var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map, 
        position: results[0].geometry.location
    });
  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
});
    }

    </script>
    </head>
    <body onload="initialize()">
    <input id="address" type="textbox" value="London">
    <input type="button" value="Search" onclick="codeAddress()">
<div id="map" style="height:100%;top:0px"></div>
   </body> 
```

如果您知道我可以使用的替代方法（但以 google maps API v3 作为背景），请告诉我我愿意研究并尝试一下。

我已经在代码中导入了 raphael 和制图库。

谢谢

添加：

与 div 一起使用的样式如下：

```
 <style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map { height: 100% }
</style> 
```

对此进行任何更改都不会显示我的地图:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:08:00.493

事实证明，制图库并未与 Google Maps API V3 一起使用，而仅与 V2 一起使用，因此我将不得不使用不同的方法。

不管怎么说，多谢拉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:55:59.133

我注意到您正在将包含地图的`height`属性设置为. 尝试使用特定的高度。正如开发人员指南的Map DOM Elements[部分所述](https://developers.google.com/maps/documentation/javascript/tutorial#Map_DOM_Elements)，如果您的地图位于较大的.`DIV``100%``DIV``DIV``DIV``DIV`

我使用 CSS 取得了不错的效果`width: 100%`，但在使用`height: 100%`.

# php - 回滚 PHP - CodeIgniter

> ID：11348503
> 
> 赞同：0
> 
> 时间：2012-07-05T16:20:00.243
> 
> 标签：php, codeigniter, transactions, rollback

我也是 CI 和 PHP 的新手。

我有一个表格，可以将公司及其联系人添加到服务器，包括文件上传。

我需要一键点击所有东西。

所以

```
function create_company()
{

 $insert = $this->database->insert();

 return $insert["insertID"]; //returns the inserted ID

}

function file_upload()
{

//upload files if there are some file input selected

return $array_of_uploaded_files;
}

function insert_contacts($company_id,$contacts_array)
{
//return true if everything success

} 
```

我的问题是

1.  **第一个公司插入成功，但未能添加其联系人，然后我需要删除当前插入的项目**
2.  **如果 insert_contact 失败，我需要删除上传的文件**

那么，如果一个或多个依赖项失败，是否有任何方法可以回滚操作？

我知道 Codeignitor 中的事务，但我如何使用它[具有多个功能范围]？

文件上传呢？

请注意，我问这个问题是因为我是 php 新手，我能做的是创建这么多函数并在适当的情况下调用它。

我只想知道如何改进或简化我的代码......

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:25:37.510

为什么不使用事务？

[http://ellislab.com/codeigniter/user-guide/database/transactions.html](http://ellislab.com/codeigniter/user-guide/database/transactions.html)

所以像：

```
$this->db->trans_start();
// your database queries
$this->db->trans_end(); 
```

通过以下方式检查交易是否有任何错误：

```
$this->db->trans_status(); 
```

# string - 使用 PowerShell 拆分字符串并对每个令牌执行一些操作

> ID：11348506
> 
> 赞同：61
> 
> 时间：2012-07-05T16:20:17.087
> 
> 标签：string, powershell, tokenize

我想在空格上分割管道的每一行，然后在自己的行上打印每个标记。

我意识到我可以使用以下方法获得此结果：

```
(cat someFileInsteadOfAPipe).split(" ") 
```

但我想要更多的灵活性。我希望能够对每个令牌做任何事情。（我曾经在 Unix 上使用[AWK](http://en.wikipedia.org/wiki/AWK)，我正在尝试获得相同的功能。）

我目前有：

```
echo "Once upon a time there were three little pigs" | %{$data = $_.split(" "); Write-Output "$($data[0]) and whatever I want to output with it"} 
```

显然，它只打印第一个令牌。有没有办法让我在令牌上逐个打印，依次打印？

另外，`%{$data = $_.split(" "); Write-Output "$($data[0])"}`我从博客中得到的部分，我真的不明白我在做什么或语法是如何工作的。

我想用谷歌搜索它，但我不知道该怎么称呼它。请帮我说一两个词给谷歌，或者一个链接向我解释`%`和所有`$`符号的作用，以及左括号和右括号的意义。

我意识到我实际上不能使用`(cat someFileInsteadOfAPipe).split(" ")`，因为文件（或最好的传入管道）包含不止一行。

关于部分答案：

如果您使用[`Select-String`](https://technet.microsoft.com/en-us/library/hh849903.aspx)在标记化之前过滤输出，您需要记住该`Select-String`命令的输出不是字符串的集合，而是`MatchInfo`对象的集合。要获取要拆分的字符串，您需要访问对象的`Line`属性`MatchInfo`，如下所示：

```
cat someFile | Select-String "keywordFoo" | %{$_.Line.Split(" ")} 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-07-05T16:38:49.860

```
"Once upon a time there were three little pigs".Split(" ") | ForEach {
    "$_ is a token"
 } 
```

关键是`$_`，它代表管道中的当前变量。

关于您在网上找到的代码：

`%`是 的别名[`ForEach-Object`](https://technet.microsoft.com/en-us/library/hh849731.aspx)。括号内的任何内容都会针对它接收到的每个对象运行一次。在这种情况下，它只运行一次，因为您要向它发送一个字符串。

`$_.Split(" ")`正在获取当前变量并将其拆分为空格。当前变量将是当前正在循环的任何内容`ForEach`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-04T14:15:25.697

为了补充[Justus Thane 的有用答案](https://stackoverflow.com/a/11348779/45375)：

*   正如[Joey](https://stackoverflow.com/a/11348779/45375)在评论中指出的那样，PowerShell 有一个强大的、基于正则表达式的[`-split` *运算符*](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_split)。

    *   **一*元*形式 ( `-split '...'`) 的`-split`行为类似于`awk`的默认字段拆分**，这意味着：
        *   忽略前导和尾随空格。
        *   任何空格（例如，*多个相邻空格）**都*被视为*单个*分隔符。

***   在**PowerShell v4+**中，可以使用基于表达式（因此速度更快）的***cmdlet*****替代方案：数组（集合）方法`ForEach-Object` *`.ForEach()`****，如[本博](http://www.powershellmagazine.com/2014/10/22/foreach-and-where-magic-methods/)文中所述（与`.Where()`方法一起，是更强大的基于表达式的替代方法`Where-Object`）。*** 

 ***这是基于这些功能的解决方案：

```
PS> (-split '   One      for the money   ').ForEach({ "token: [$_]" })
token: [One]
token: [for]
token: [the]
token: [money] 
```

请注意，前导和尾随空格被忽略，并且 和 之间的多个空格`One`被`for`视为单个分隔符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-11T00:19:38.330

-split 输出一个数组，你可以将它保存到一个变量中，如下所示：

```
$a = -split 'Once  upon    a     time'
$a[0]

Once 
```

另一个可爱的事情是，你可以在赋值语句的两边都有数组：

```
$a,$b,$c = -split 'Once  upon    a'
$c

a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-02T00:19:44.240

实现这一点的另一种方法是结合 Justus Thane 和 mklement0 的答案。当您查看单行示例时，这样做没有意义，但是当您尝试批量编辑文件或一堆文件名时，它非常方便：

```
$test = '   One      for the money   '
$option = [System.StringSplitOptions]::RemoveEmptyEntries
$($test.split(' ',$option)).foreach{$_} 
```

这将显示为：

```
One
for
the
money 
```***

# shader - 在统一 cg 着色器中使用 sizeof 浮点数

> ID：11348508
> 
> 赞同：0
> 
> 时间：2012-07-05T16:20:23.610
> 
> 标签：shader, unity3d, sizeof, cg

我正在尝试使用 cg 为统一编写着色器，我想知道我的浮点数的精度，但我不知道如何使用 sizeof 命令。当我尝试使用它时，我得到了错误：

```
Shader error in 'Relativity/ColorShift': GLSL vertex shader: ERROR: 0:433: 'sizeof' : Reserved word.  at line 218 
```

218 是显示“CGPROGRAM”的行。

谁能告诉我是否有使用 arbvp1/arbfp1 配置文件作为浮点数的标准尺寸或如何使用 sizeof 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:06:06.923

标准尺寸将（希望）写在这里：[http](http://http.developer.nvidia.com/Cg/arbvp1.html) ://http.developer.nvidia.com/Cg/arbvp1.html ，在数据类型部分（目前说“待写”）

同时，您可以尝试假设，根据 Cg 规范，float 是 32 位的。

至于sizeof，是保留字，但没有实现，至少没有作为库函数

在 Cg 运行时（但不是在 Unity 中）你可以使用 cgGetParameterResourceSize()...

# ruby-on-rails - CarrierWave extension_white_list 似乎不起作用

> ID：11348510
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:20:25.703
> 
> 标签：ruby-on-rails, carrierwave

我正在尝试使用 CarrierWave 的`extension_white_list`方法：

```
def extension_white_list
  [/jpe?g/, 'gif', 'png']
end 
```

现在，每当我上传任何东西（甚至是 jpeg 和 png），我都会得到一个`CarrierWave::IntegrityError`

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:09:04.767

你试过 ['jpeg', 'jgp', 'png', 'gif'] 吗？

似乎正则表达式弄乱了调用，因为它应该是extension_white_list 包含的“单词”数组（参见[Rails - Using %W ）。](https://stackoverflow.com/questions/4455429/rails-using-w)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-05T13:01:06.947

问题是我正在上传到 S3，但由于某种原因它无法获取扩展。

# python - 如何为多个类别实现 memcache

> ID：11348511
> 
> 赞同：0
> 
> 时间：2012-07-05T16:20:28.943
> 
> 标签：python, google-app-engine, memcached

我正在使用 python 和 jinja2 在谷歌应用引擎上构建一个 Web 应用程序。我有一个网站，用户可以在其中写帖子，我有 15 个主要类别，每个类别都有 4 个部门。现在我想实现 memcache，因为我有 20:1 的读者与海报的比例，但是如果不制作 60 个不同的键，我怎么能做到呢？我应该那样做吗？或者我应该点击数据库并对结果进行排序并在函数上有一些参数来获得这些结果，如下所示：

```
def posts_cache(update = False, category = None, sport = None):
        key = 'main'
        posts = memcache.get(key)
        if posts is None or update:
                logging.error("DB QUERY")
                posts = db.GqlQuery("SELECT * "
                                        "FROM Post "
                                        "ORDER BY created DESC "
                                        "LIMIT 100",
                                         key)
                posts = list(posts)
                memcache.set(key, posts)
        if category and sport:
            sportcatlist = []
            for post in posts:
                     if post.category == category:
                         if post.sport == sport:
                             sportcatlist.append(post)
            return sportcatlist
        elif category:
            categorylist = []
            for post in posts:
                     if post.category == category:
                            categorylist.append(post)
            return categorylist
        elif sport:
            sportlist = []
            for post in posts:
                     if post.sport == sport:
                            sportlist.append(post)
            return sportlist
        return posts 
```

还是有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T16:26:16.847

所有其他 memcached 数据仍然存在，因此其他请求仅由 memcache 处理。由于 appengine 对可以存储在 memcache 中的数据量实施限制，它会删除旧的和罕见的命中项目并保持经常使用，这正是您所需要的并且可以很好地扩展，您描述的方法不会给您这个。希望能帮助到你。

# javascript - 可以跨 iframe 共享 javascript 导入吗？

> ID：11348512
> 
> 赞同：4
> 
> 时间：2012-07-05T16:20:29.617
> 
> 标签：javascript, iframe

我有一个 web 应用程序，它有几个 iframe，它们都需要导入相同的 javascript 库（例如 jquery）。

有没有办法只加载一次并以某种方式在所有 iframe 之间共享该数据？我宁愿不要让我的页面加载缓慢，因为它会为每个 iframe 加载一次相同的 JS 文件。

谢谢！

**编辑：人们说你不能从 iframe 共享数据，但是如果 js 导入都在一个命名空间中，比如 NAMESPACE，然后 iframe 会执行类似 NAMESPACE = parent.NAMESPACE 的操作**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:23:04.170

假设您`src`使用相同的 URI，并且您有健全的缓存控制标头，那么 JS 将被缓存并且不会为每个帧重新下载。

也就是说，如果你真的想要，你可以将它加载到顶部框架中，然后通过`parent`对象访问所有内容。

例如：[http ://dorward.me.uk/tmp/frames/top.html](http://dorward.me.uk/tmp/frames/top.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:25:02.477

如果所有框架都加载相同的 js 文件，现代浏览器（chrome、firefox、IE）应该简单地从缓存中加载相同的文件......所以你不必一遍又一遍地重新加载相同的文件。如果您的页面加载时间很长，请考虑缩小您的 javascript（通过使用另一个程序使您的 js 文件更小）...这可以大大减少加载时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T19:47:49.110

Certain environments generate `iframe` urls you can't control. In CRM Dynamics, for example, I had the same thought. I have common web resources, but when included as a dependency of another resource the library ended up downloading again. I wanted the library to cross the wire once but that didn't happen.

Even if you manage getting your library to load once as I eventually did you'll have issues sharing it across `iframes`. The host objects and types (e.g. classes) are [unique to the `iframe`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof#instanceof_and_multiple_context_e.g._frames_or_windows).

```
function isHTMLDocument(el){ //impure
  return el instanceof HTMLDocument;
}

function dropdown(values){ //impure
   const el = document.createElement("select");
   ...
   return el;
} 
```

If you call methods against foreign `iframes` hopefully you can see the problem. `HTMLDocument` in the context where your library loads will not be the same as `HTMLDocument` in a foreign `iframe`. While `isHTMLDocument` will work on `document` in the local environment it won't work in the foreign one.

Same with `document` and many libraries bake `document` into functions to avoid requiring you to pass it in again and again. Unfortunately, due to [each environment being its own sandbox](https://github.com/mrdoob/three.js/issues/5886), host-environment tainted functions are [effectively broken](http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/).

Only pure functions would work when used in a foreign context like an `iframe` document.

```
function is(el, type){ //pure
  return el instanceof type;
}

function dropdown(document, values){ //pure
   const el = document.createElement("select");
   ...
   return el;
} 
```

# wpf - 在 Windows 8 WPF 应用程序中，是否有任何 UI 控件可以与“MediaCapture”类的“StartPreviewAsync”一起使用？

> ID：11348513
> 
> 赞同：1
> 
> 时间：2012-07-05T16:20:36.340
> 
> 标签：wpf, windows-8

我一直在开发 Windows 8 WPF 应用程序并想预览 WebCam。在 WinRT 中，有一个直接的“MediaCapture”类，它提供“StartPreviewAsync”功能。在 Metro 风格的应用程序中，有一个“CaptureElement”UI 控件，它允许直接将 MediaCapture 分配给它的“Source”属性。但在 WPF 中没有。任何帮助我如何使用 MediaCapture 工具将网络摄像头预览到 WPF 应用程序中？我尝试过使用 WPF“MediaElemnet”，但找不到将“MediCapture”的网络摄像头馈入其中的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:11:29.433

我意识到这是一个古老的问题，但我讨厌看到没有回应的问题。当您说 Windows 8 WPF 时，您真正谈论的只是 WPF 4.5。在 WPF 中没有与此等价的东西，我非常怀疑永远不会有。在 WPF 中最好的选择是使用 Jeremiah Morrill 的[WPF MediaKit](http://wpfmediakit.codeplex.com/)，它支持从网络摄像头源捕获。

# iphone - 带有三个信息的进度条

> ID：11348514
> 
> 赞同：-2
> 
> 时间：2012-07-05T16:20:37.410
> 
> 标签：iphone, ios, macos, ipad

大家好，我是 iOS 的 Objective-c 编程新手。我对进度条有很大的问题。这是我的问题：

我的进度条中需要三个信息：

幻灯片的数量、使用的时间和剩余的时间。它们将以百分比来衡量。例如，如果使用了 50% 的演示时间并且我已经演示了 60% 的幻灯片，那么该栏应该看起来像“bbbbbgyyyy”，其中“b - 使用时间的蓝色”，“g - 前面幻灯片的绿色”和“y - 剩余时间的黄色”。

如果使用了 50% 的时间并且我只展示了 30% 的幻灯片，那么该栏应该看起来像“bbbppyyyyy”，其中“b - 使用时间的蓝色”、“p - 后面的幻灯片的粉红色”和“y -黄色表示剩余时间”。

谁能帮我？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:24:29.707

标准类无法实现这种效果`UIProgressBar`，您需要子类化或创建自己的控件并为此编写必要的逻辑和绘图代码。如果您在实施过程中遇到困难，请提出另一个 qStack Overflow 问题，但不要指望任何人为您编写应用程序。

# c++ - 数组中 4 个数字的总和等于特定数字

> ID：11348515
> 
> 赞同：1
> 
> 时间：2012-07-05T16:20:40.083
> 
> 标签：c++, algorithm, subset

> **可能重复：**
> [在数组中找到总和等于给定数字 X 的四个元素](https://stackoverflow.com/questions/3569504/find-four-elements-in-array-whose-sum-equal-to-a-given-number-x)

给定一个正整数和负整数的整数数组，找到四个不同的数字，它们总和为特定数字，比如 0。`O(n^4)`显然不是一个好的解决方案。例如

一个数组包含

0,1,-4,3,7,-8, -11

在这里，可能的解决方案是 0,1,-4,3 或 0,1,7,-8 或 1,3,7,-11

相同的值可以重复。完全没有关系。唯一要记住的是，选择的四个数字应该有不同的索引。就是这样。

我找到了一些有关有效解决方案的材料，但对我来说并不满意。如果有人可以帮助我，非常欢迎您。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:47:29.417

好吧，从[http://en.wikipedia.org/wiki/3SUM](http://en.wikipedia.org/wiki/3SUM)开始，这是关于找到 3 个加起来为 0 的数字，我认为（类似于相关的（？）背包问题）没有真正好的方法做4个数字。

现在，我假设 3SUM 算法可以适用于解决找到 3 个加起来为 c 而不是 0 的数字的问题——给出的算法与 ==0 和 <0 进行比较，所以也许可以将其更改为另一个常数。如果这不起作用，您始终可以将每个整数乘以 3，然后在执行 3SUM 之前从每个整数中减去常数（实际上我想从每个整数中减去 c/3，因为我们要添加其中的 3 个，但算法说整数数字...）。

第 4 个数字可能会引入另一个因素“n”：遍历所有数字并将第 4 个数字合并到常数中。因此，对于 3SUM，我们将保持在 n^2，对于 4SUM，我们将保持在 n^3。

# mysql - 有什么方法可以让 Rails 不生成“schema_migrations”表？

> ID：11348518
> 
> 赞同：2
> 
> 时间：2012-07-05T16:20:48.507
> 
> 标签：mysql, sql, database, ruby-on-rails-3

我正在为一个项目使用 Rails 3，但我没有使用迁移（原因与问题无关）。相反，我只是在每次对架构进行更改时进行编辑`schema.rb`和运行。`rake db:create db:schema:load`

但是，在使用 phpMyAdmin 检查时，Rails 似乎仍在创建一个名为`schema_migrations`. `schema.rb`在使用DSL的同时，有没有一种快速的方法可以让我关闭它？我可以使用 SQL 文件来创建我的数据库，但我宁愿不必这样做。

# jquery - 使用 jQuery 对话框的带有参数的回调函数

> ID：11348520
> 
> 赞同：3
> 
> 时间：2012-07-05T16:20:53.423
> 
> 标签：jquery, jquery-ui

我正在尝试通过单击对话框中的按钮来调用带有参数的 javascript 函数。这是我可以在此处发布的简化版本的流程： 1) 单击 HTML 按钮时，将函数和按钮 ID 作为参数传递给“确认”对话框。2) 在确认对话框中单击“是”时，调用传入的函数，该函数只会更新 HTML 按钮的 ID 和值。

出于某种原因，对话框继续使用原始参数并且永远不会获得更新的参数。我认为代码会更好地解释这个问题。这是 HTML 片段：

```
<script type="text/javascript" src="jquery-1.3.2.js"></script>
<script type="text/javascript" src="jquery-ui-1.7.2.custom.js"></script>
<div id="confirmDialog"></div>
<div id="div_input">
    <input type="button" id="1" value="1" onClick="javascript:confirmAction(updateButton, this.id)" />
</div> 
```

这是javascript片段：

```
function confirmAction(onSuccessFunction, functionArg)
{
    var message = "Are you sure?";
    $('#confirmDialog').html(message);
    $('#confirmDialog').dialog({
        modal: true,
        autoOpen: false,
        title: 'Confirm',
        width: 400,
        height: 150,
        buttons: {
            'Yes': function() {
                $(this).dialog('close');
                onSuccessFunction(functionArg);
            },
            'No': function() {
                $(this).dialog('close');
            }
        }
    });
    $("#confirmDialog").dialog('open');
};

function updateButton(buttonId)
{
    alert(buttonId);
    var buttonHTML = '';
    if(buttonId == '1')
    {
        buttonHTML = "<input type='button' id='2' value='2' onClick='javascript:confirmAction(updateButton, this.id)' />";
    }
    else
    {
        buttonHTML = "<input type='button' id='1' value='1' onClick='javascript:confirmAction(updateButton, this.id)' />";
    }

    document.getElementById("div_input").innerHTML = buttonHTML;
}; 
```

confirmAction(...) 总是调用 updateButton(...) 并且 buttonId 为 '1'。如果我直接调用 updateButton(...) 'onClick'，它工作正常。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:42:40.303

我也在 jQuery 论坛上发布了这个 - [https://forum.jquery.com/topic/jquery-dialog-callback-function-with-arguments](https://forum.jquery.com/topic/jquery-dialog-callback-function-with-arguments)。事实证明，这是旧版本 jQuery 中的一个错误，现已修复。

# grails - Ubuntu 上的多个 Grails 版本

> ID：11348521
> 
> 赞同：1
> 
> 时间：2012-07-05T16:21:04.750
> 
> 标签：grails, ubuntu, groovy

我必须在 Ubuntu 上管理多个 Grails 版本，即 1.3.9 和 2.0.4。我从 PPA 安装了 Grails，它允许安装多个版本，但只在 bin 下创建一个条目，它指向最新版本。

在 Grails 版本之间切换的最简单方法是什么？请注意，我是 Grails 的新手，我更喜欢不依赖于特定 IDE 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:47:34.147

我使用解析`application.properties`文件的脚本来确定特定应用程序需要哪个版本的 Grails，然后调用它。我将此脚本作为“grails”安装在我的`bin`目录中。这样我就可以运行`grails whatever`，并且会自动使用正确版本的 Grails。

我使用的脚本是我自己编写的，但也有类似（并且设计更好）的解决方案可供下载，例如[https://github.com/deluan/grails.sh 。](https://github.com/deluan/grails.sh)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:34:59.810

我写了一个简单的脚本，不像[Ian Roberts 回答](https://stackoverflow.com/a/11349727/462015)那样复杂，但这对我有用。我想 Grails 版本安装在`/opt`文件夹下，您还需要将此文件添加`grails`到`PATH`.

```
#!/bin/bash

GRAILS_VERSION=`grep app.grails.version application.properties | cut -d'=' -f2`
GRAILS_HOME="/opt/grails-$GRAILS_VERSION"

export GRAILS_HOME
$GRAILS_HOME/bin/grails $* 
```

Stack Overflow 中有更多关于这个主题的问题：

*   [如何运行多个 Groovy/Grails 版本](https://stackoverflow.com/q/5055793/462015)
*   [如何在多个 grails/groovy 版本中管理开发？](https://stackoverflow.com/q/11081703/462015)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T10:49:50.380

Groovy 环境管理器。[http://gvmtool.net/](http://gvmtool.net/)不仅适用于 grails 的最佳工具，它还适用于 groovy、griffon、gradle、vertx 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T17:15:06.140

最简单的方法是指定要使用的 grails 安装的完整路径，而不是仅仅依赖`grails run-app`. 这样您就可以控制正在执行的“grails”版本*。*

我确信还有其他更高级的方法可以做到这一点，但简单地指定 grails 可执行文件的位置是最简单的。

也就是说，在 IDE 中工作可能会使这更容易或更难，但是如何做到这一点将取决于特定的 IDE。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T13:36:58.503

我这样做……

[http://www.objectpartners.com/2010/10/12/update-fast-path-switching-between-projects/](http://www.objectpartners.com/2010/10/12/update-fast-path-switching-between-projects/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-11T21:08:59.677

我在我的 ubuntu 机器上使用 7 grails 版本。将下面的代码放在 .bashrc 文件的底部。

```
function switchGrails() { 
```

echo “切换到 grails 版本：1 美元”</p>

sudo rm /opt/grails

sudo ln -s /opt/$1 /opt/grails

回声“完成！”</p>

}

别名 grails225='switchGrails “grails-2.2.5”'</p>

别名 grails224='switchGrails “grails-2.2.4”'</p>

别名 grails223='switchGrails“grails-2.2.3”'</p>

别名 grails233='switchGrails “grails-2.3.3”'</p>

别名 grails235='switchGrails “grails-2.3.5”'</p>

别名 grails237='switchGrails“grails-2.3.7”'</p>

别名 grails2311='switchGrails“grails-2.3.11”'</p>

保存退出后。编译 .bashrc 文件。键入 cd 和 . .bashrc 编译 .bashrc 文件。

更多参考：[https ://pkashyap28.wordpress.com/2014/09/11/manage-multiple-grails-application-in-ubuntu/](https://pkashyap28.wordpress.com/2014/09/11/manage-multiple-grails-application-in-ubuntu/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-03T19:33:38.473

我在项目中创建[了一个 bash 脚本](https://github.com/iPrayag/gccount/blob/master/grails.sh)( `grails.sh`) 以确定 grails 版本并使用相同的版本来编译/测试/运行项目。

```
#!/bin/bash

GRAILS_DIRECTORY="/usr/local"
GRAILS_VERSION=`grep app.grails.version application.properties | cut -d'=' -f2`
GRAILS_HOME="$GRAILS_DIRECTORY/grails-$GRAILS_VERSION"  
export GRAILS_HOME

$GRAILS_HOME/bin/grails compile
$GRAILS_HOME/bin/grails test-app
$GRAILS_HOME/bin/grails -Dserver.port=8443 run-app 
```

执行 bash 脚本

```
$ bash grails.sh 
```

# java - 在 Eclipse Indigo 中验证 JSF 标记/属性

> ID：11348524
> 
> 赞同：2
> 
> 时间：2012-07-05T16:21:11.263
> 
> 标签：java, eclipse, jsf-2

在 Eclipse Indigo（对于 Java EE 开发人员，安装了 JBoss 工具）中，我
创建了新的“动态 Web 项目”，
从 Project Facets 启用了 JSF v 2.0，并
添加了 xhtml 文件，其内容如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>
<body>
    <h:messages layout="table" />
</body>
</html> 
```

现在，当我将 JSF 标记或其属性更改为以下无效值时，我想查看验证警告/错误：
Invalid tag `<h:barfoo layout="table" />`
Invalid attribute `<h:messages barfoo="table" />`
Invalid attribute val`<h:messages layout="barfoo" />`
目前我在 Eclipse 中看不到所有 3 个警告。如何验证页面？
自动补全 (Ctrl+Space) 对标签和属性效果很好。JBoss AS 7.1.1 已注册到 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:39:04.977

我也遇到过几次这个问题。您需要了解 xhtml 页面可以包含任何内容，纯文本、JavaScript、html 标签以及许多其他类型的标签。现在 h: 前缀表示 jsf 标记，但请记住，您还可以创建扩展 h: 前缀的自定义标记。因此，即使标签在默认命名空间中不可用。eclipse 不会警告你，但是它会在运行时失败。如果您的 xml 格式不正确，您将收到验证警告，但仅此而已。这是 xml 具有如此可塑性的缺点之一。

# frame - 旋转方向时重置帧

> ID：11348535
> 
> 赞同：0
> 
> 时间：2012-07-05T16:21:51.787
> 
> 标签：frame, landscape, bounds, portrait

我有一个应用程序，它有一些按钮、一个文本视图和一个标签。我想旋转设备并让它们在屏幕上重新绘制以适应。我想以编程方式进行。目前我有这些方法：

```
 -(void)willRotateToInterfaceOrientation:
(UIInterfaceOrientation)toInterfaceOrientation 
                               duration:(NSTimeInterval)duration {

    [super willRotateToInterfaceOrientation:toInterfaceOrientation  
                                   duration:duration];

    if (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight ||
        toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
        [self reOrderSideways];
    } else {
        [self reOrderUpDown];
    }
}

-(void)reOrderSideways{
    self.viewLabel.frame=CGRectMake(175.0,140.0,130.0,20.0);
    self.buttonOne.frame=CGRectMake(20.0,20.0,440.0,100.0);
    self.buttonTwo.frame=CGRectMake(20.0,180.0,440.0,100.0);
    self.textContent.frame=CGRectMake(20.0, 290.0, 440.0, 100.0);
    self.theScroller.contentSize = CGSizeMake(480.0, 350.0);
}

-(void)reOrderUpDown{
    self.viewLabel.frame=CGRectMake(95.0,15.0,130.0,20.0);
    self.buttonOne.frame=CGRectMake(20.0,50.0,280.0,190.0);
    self.buttonTwo.frame=CGRectMake(20.0,250.0,280.0,190.0);
    self.textContent.frame=CGRectMake(20.0, 450.0, 280.0, 190.0);
    self.theScroller.contentSize = CGSizeMake(320.0, 460.0);
} 
```

它不太好用，因为当我横向旋转时，按钮和标签以及 textview 会在右侧被截断。我检查了它，它看起来像使用我给它的坐标，但它仍然使用纵向框架或边界。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:27:11.860

尝试`willAnimateRotationToInterfaceOrientation:`改用。

# ruby-on-rails - 在推送到heroku之前无法进行资产预编译

> ID：11348538
> 
> 赞同：0
> 
> 时间：2012-07-05T16:21:57.980
> 
> 标签：ruby-on-rails, heroku, asset-pipeline, precompile

我需要让我的 jQuery 在 Heroku 上工作。

这是我的控制台：

```
 $ rake assets:precompile
    c:/Ruby192/bin/ruby.exe c:/Ruby192/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
  rake aborted!
  Access denied for user 'root'@'localhost' (using password: NO)
  Tasks: TOP => environment
  (See full trace by running task with --trace)
   rake aborted!
  Command failed with status (1): [c:/Ruby192/bin/ruby.exe c:/Ruby192/bin/rak...]
  Tasks: TOP => assets:precompile
  (See full trace by running task with --trace) 
```

当我尝试运行时：

```
 $ assets:precompile
     sh: assets:precompile: command not found 
```

**编辑：** 我也将此行添加到 application.rb：

```
 config.assets.initialize_on_precompile = false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:31:13.340

您提到了错误的mysql用户名和密码。一些需要对资产进行数据库访问的 gem：预编译。

# javascript - 如何通过 javascript 访问 XUL 覆盖中的元素？

> ID：11348539
> 
> 赞同：1
> 
> 时间：2012-07-05T16:22:05.123
> 
> 标签：javascript, firefox-addon, xul

我已经将一个插件加载到我的 XUL 覆盖中，通过

```
<vbox style="height:0;">
    <html:embed type="application/x-my-plugin" id="my-plugin" style="height:0;"/>
</vbox> 
```

现在，当用户加载新选项卡并且我有对调用者的引用时，会触发一个事件。这是通过附加到 XUL 覆盖层的 javascript 完成的。

```
var caller = myEvent.originalTarget; 
```

当我尝试执行以下操作时，我的变量“plugin”为空。可能是什么问题，我该如何解决这个问题？

```
var plugin = caller.getElementById("my-plugin");
plugin.calculateTime(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:07:36.600

我假设您的真实代码使用`document.getElementById`而不是`caller.getElementById`. 如果`document.getElementById`返回`null`，则具有此 ID 的元素肯定不在文档中。这可能有两个原因：

1.  您访问文档的时间过早，并且没有完成加载。您通常不应该在`load`事件之前访问 DOM，这可能会导致各种问题。但是，如果您的代码从`TabOpen`事件中运行，那么这应该不是问题。
2.  当您的叠加层被合并到浏览器窗口中时，这个特定的元素被跳过了。如果覆盖顶层的元素没有 ID 或在文档中找不到它们的 ID，则它们将被忽略。为了考虑您的元素，您的叠加层应如下所示：

```
<overlay ...>
  <window id="main-window">
    <vbox collapsed="true">
      <html:embed .../>
    </vbox>
  </window>
</overlay> 
```

`main-window`是根元素的 ID，`browser.xul`以便您的元素将插入到顶层。请注意，我使用了[`collapsed`属性](https://developer.mozilla.org/en/XUL/Attribute/collapsed)`height`，如果您需要一个不占用任何空间但仍处于初始化状态的元素，这比设置样式要好。

# java - 设置一个变量并在一行中检查相等性

> ID：11348540
> 
> 赞同：1
> 
> 时间：2012-07-05T16:22:18.563
> 
> 标签：java

我正在创建一个迷宫程序以在 Java 中进行更多练习。我有一个移动玩家的方法，`boolean`如果移动成功（即它没有撞到墙），它会返回一个值。

这是有问题的方法：

```
public boolean move(Direction direction) {
    if(currentLocation == (currentLocation = maze.movePlayer(this, direction))) {
        return false;
    } else {
        return true;
    }
} 
```

显然，这将始终返回 false。我想知道是否有一种方法可以检查是否`currentLocation`没有更改（或等于的返回值，`maze.movePlayer(...)`如果不是，则将它们设置为相等）。我不知道是否可以在不调用该方法两次或使用局部变量的情况下执行此操作。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:26:54.537

您可以使用条件运算符：

```
public boolean move(Direction direction) {
     return (currentLocation == (currentLocation = maze.movePlayer(this, direction))) ? false : true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:49:41.067

`equals`假设一种合理的方法，这可以按照您的预期工作，使用单行。

*（我通过 a`Location`而不是转换 a `Direction`，但机制是相同的。）*

```
public class Main {

    private Location loc = new Location(0, 0);

    public boolean move(Location newLoc) {
        return !loc.equals(loc = newLoc);
    }

    public static void main(String[] args) {
        Main m = new Main();

        // Not same; moved from 0, 0: true--move successful.
        System.out.println(m.move(new Location(42, 69)));

        // Same; moved from 42, 69: false--move failed.
        System.out.println(m.move(new Location(42, 69)));

        // Not same; moved from 42, 69, 0: true--move successful.
        System.out.println(m.move(new Location(69, 42)));
    }
} 
```

这使用了一个简单的`Location`实现；注意`equals`, 由 IntelliJ 自动生成：

```
public class Location {

    private int x;
    private int y;

    public Location(int x, int y) {
        this.x = x;
        this.y = y;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) {
            return true;
        }

        if (o == null || getClass() != o.getClass()) {
            return false;
        }

        Location location = (Location) o;

        if (x != location.x) {
            return false;
        }

        if (y != location.y) {
            return false;
        }

        return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:33:53.270

使用临时变量的另一种方法：

```
public boolean move(Direction direction) {
    Location oldLocation = currentLocation;
    currentLocation = maze.movePlayer(this, direction));
    return !oldLocation.equals(currentLocation);
} 
```

# windows-phone-7 - 返回包含 List 的页面时出现 ArgumentOutOfRangeException

> ID：11348541
> 
> 赞同：0
> 
> 时间：2012-07-05T16:22:19.223
> 
> 标签：windows-phone-7, list, exception, data-binding

我有一个简单的待办事项列表，它存储在列表对象中，通过数据绑定通过列表框显示。这些项目是可点击的，它们会将您带到详细信息页面，您还可以在其中删除任务。一切正常，但是当我单击后退按钮时，我得到一个 ArgumentOutOfRangeException 并且应用程序崩溃。

现在，我认为这是因为应用程序认为列表中仍有项目，但我不太确定如何修复它。

System.Windows.dll 上引发了异常 - 没有具体内容。另外，我知道在 OnNavigatedTo 事件之后引发了异常。

XAML（只是列表框 - 有点简化）：

```
<ListBox Name="MyActivitiesList" ItemsSource="{Binding MyActivities}" SelectionChanged="ListBox_SelectionChanged">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <ListBoxItem>
                <StackPanel Margin="0,0,0,12">
                    <-- context menu was here, but has been removed -->
                    <TextBlock Text="{Binding Title}" Style="{StaticResource BigHeader}"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Category.Name}" Style="{StaticResource SubtleText}"/>
                        <TextBlock Text=" - " Style="{StaticResource SubtleText}"/>
                        <TextBlock Text="{Binding VotesPercentage}" Style="{StaticResource SubtleText}"/>
                        <TextBlock Text="% positive" Style="{StaticResource SubtleText}" />
                    </StackPanel>
                </StackPanel>
            </ListBoxItem>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

代码隐藏：

```
private MyActivitiesViewModel myActivitiesViewModel;

public MyActivitiesView()
{
    InitializeComponent();
}

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    myActivitiesViewModel = new MyActivitiesViewModel();
    this.DataContext = myActivitiesViewModel;
    base.OnNavigatedTo(e);
}

protected override void OnNavigatingFrom(System.Windows.Navigation.NavigatingCancelEventArgs e)
{
    MyActivitiesList.SelectedItem = null;
    base.OnNavigatingFrom(e);
}

private void ListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (((ListBox)sender).SelectedItem != null)
    {
        var idea = ((ListBox)sender).SelectedItem as Idea;
        ((ListBox)sender).SelectedItem = null;

        Dispatcher.BeginInvoke(() => NavigationUtility.Navigate(new Uri("/View/IdeaView.xaml", UriKind.Relative), idea));

    }
} 
```

有任何想法吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:53:13.033

我认为问题可能是您正在从列表中删除一个项目，而同一项目绑定到列表框中的当前项目。

解决此问题的一种简单方法是使用 ObservableCollection 而不是 List - 该集合将使用 INotifyCollectionChanged 机制告诉列表框有关任何删除的信息。

# jquery - Fancybox 2 自定义关闭按钮和无限滚动

> ID：11348543
> 
> 赞同：0
> 
> 时间：2012-07-05T16:22:27.113
> 
> 标签：jquery, fancybox, infinite-scroll

我在使用通过无限滚动拉入的内容上的自定义关闭按钮关闭 Fancybox 时遇到问题。

[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

无限滚动之前页面上包含的所有内容都可以正常打开和关闭。对于通过无限滚动拉入的内容，我可以毫无问题地启动 Fancybox，但是单击关闭后，我只是将备份扔到页面顶部并且 Fancybox 永远不会关闭。

这是我正在使用的代码：

**HTML**

```
<a href="#" class="fncy-custom-close">
    <span>Close</span>
</a> 
```

**JS**

```
$(document).ready(function() {
    $('.fancybox').fancybox({
        padding : 0,
        scrolling : 'no',
        arrows : false,
        closeBtn : false,
        helpers : {
            overlay: {
                opacity: 0.6
            }
        }
    });
    $('a.fncy-custom-close').click(function(e){
        e.preventDefault();
        $.fancybox.close();
    });
}); 
```

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:32:29.090

This may have been a bug in the plugin, as it seems to have resolved itself. All is good now!

# xml - 跨 ie6+ 和 mozilla 处理客户端 xslt 中的大小写敏感性

> ID：11348545
> 
> 赞同：0
> 
> 时间：2012-07-05T16:22:27.370
> 
> 标签：xml, case-sensitive

我正在向包装在 DIV 中的客户端提供少量 XML，我使用 jQuery 将其剪断，将其存储为字符串（称为文本）并将其转换为 XMLdoc 片段。

在 IE(6+) 中，我使用：

```
var doc=new ActiveXObject('Microsoft.XMLDOM');
doc.async='false';
doc.loadXML(text); 
```

在 MOZILLA(3+) 中，我使用：

```
var parser=new DOMParser();
var doc=parser.parseFromString(text,'text/xml'); 
```

这很好用，除了 IE 将所有标签名称大写，而 Mozilla 将它们全部变成小写。问题是我应用到它们的 XSLT 是区分大小写的，因此我必须编写 2 个模板，例如：

```
<xsl:template match="VIDEOPLAYER">... 
```

和

```
<xsl:template match="videoplayer">... 
```

它们在做同样的事情（在这种情况下注入 javascript）。

（我不想在服务器上执行 XSLT，因为我不想解析每个传出页面，这对我们的服务器来说是个问题。）

那么有谁知道是否有一种方法可以控制在创建 XML 对象时发生的大小写转换，或者有一种方法可以在我的 XSLT xpath 匹配属性中处理大小写。

# android - 使 Android WebView.loadUrl(...) 行为同步

> ID：11348549
> 
> 赞同：4
> 
> 时间：2012-07-05T16:22:40.083
> 
> 标签：android, multithreading, webview, synchronous

有没有人试图让 Android WebView.loadUrl(...) 同步运行？

我的场景是这样的：我想执行一些 javascript，但我不想初始化执行 javascript 的 WebView，直到要执行 javascript 的时间。为了使 javascript 成功执行，需要准备好调用堆栈。

我需要调用 loadUrl 来加载加载 javascript 方法的 html 页面。问题是 loadUrl 被调用然后立即返回，在这个过程中拆除了调用堆栈。然后 WebViewClient::onPageFinished(...) 稍后被调用，表明 WebView 已准备就绪，我可以执行我的脚本。但现在为时已晚，因为我的调用堆栈不见了。

我希望 loadUrl 等待 onPageFinished 但问题是 onPageFinished 在调用 loadUrl 的同一线程中被调用（即使 loadUrl 发生在另一个线程中）。因此，在调用 loadURL 之后等待会阻塞线程并且永远不会调用 onPageFinished。

android/java 中是否有一些模式允许线程等待但线程的消息循环继续执行以便可以接收到该线程的通知？

# visual-studio-2010 - 为 Azure 项目设置 TargetProfile

> ID：11348551
> 
> 赞同：10
> 
> 时间：2012-07-05T16:22:56.083
> 
> 标签：visual-studio-2010, azure, teamcity-7.0

我在开发机器上通过 TeamCity 运行的构建中出现以下错误：

```
[ResolveServiceConfiguration] WATMessage
[16:02:05][WATMessage] C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Windows Azure Tools\1.7\Microsoft.WindowsAzure.targets(354, 5): No default service configuration "ServiceConfiguration.cscfg" could be found in the project.
[16:02:05][Xxx.Azure.Production\Xxx.Azure.Production.ccproj] Project Xxx.Azure.Production\Xxx.Azure.Production.ccproj failed. 
```

相同的解决方案在 VS.NET 中构建良好。

我认为我需要做的是`TargetProfile`为每个 Azure 项目（有不止一个抱怨）设置覆盖默认值，`Cloud`但我无法找到在哪里执行此操作。

那么如何为 Azure 项目设置目标配置文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-11T14:06:26.523

您是否尝试过在命令行设置目标配置文件？

```
/p:TargetProfile=MyProfile 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-17T05:37:00.757

给定一个名为“ServiceConfiguration.Production.cscfg”的 Azure 服务配置文件：

1.  在您的 TeamCity 项目构建配置中，转到构建参数（步骤 7）
2.  添加名称为“system.TargetProfile”且值为“Production”的系统属性

此模式适用于格式为 ServiceConfiguration.[your profile].cscfg 的任何命名配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-16T12:49:00.070

为了解决这个问题，我使用定义中设置的`ServiceConfiguration.Cloud.cscfg`为每个 Azure 项目创建。`.cscfg`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T10:01:13.067

在我的例子中，我重命名了 ServiceConfiguration.Cloud.csfg 文件，并且由于默认 TargetProfile 是“Cloud”，构建代理将首先查找该文件，因此我不得不重新创建 ServiceConfiguration.Cloud.csfg 文件位置，然后进入 .ccproj 文件并在`<ItemGroup>`节点下添加这一行：

```
<ServiceConfiguration Include="ServiceConfiguration.Cloud.csfg" /> 
```

然后我重建并解决了问题。

# php - 对子文件夹中文件的 ajax 调用更改会话 ID

> ID：11348558
> 
> 赞同：0
> 
> 时间：2012-07-05T16:23:26.197
> 
> 标签：php

我在我的顶级目录（“/filename.php”）中调用一个 ajax 文件

ajax 文件位于子目录（“/uploads/filename.php”）中

当我调用该`start_session()`函数然后在每个页面的顶部回显会话 ID 时，顶级目录中的文件上的会话 ID 与子目录中文件上的会话 ID 不同。

我需要从子目录访问在顶级目录中创建的会话变量。我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:13:17.300

无论您的脚本在哪个目录中，会话 ID 都应该相同（除非服务器端配置另有定义）。你不是在命名你的会话是吗？如果没有，您可以尝试命名会话示例：

文件.php

```
session_name("example");
session_start();
echo session_id(); 
```

其他/file.php

```
session_name("example");
session_start();
echo session_id(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:46:14.720

我不知道该怎么做，但我可以通过 ajax 传递用户名和密码的会话变量，用数据库检查它们，然后根据它获取信息

# c# - 转换列表 > 在 C# 中转换成字符串 [][][]

> ID：11348559
> 
> 赞同：5
> 
> 时间：2012-07-05T16:23:33.000
> 
> 标签：c#, web-services

在创建 web 服务时，在 c# 中，我发现传回锯齿状数组非常有用，即 string[][]

我还发现了一个巧妙的技巧，可以在我的代码中以一种简单的方式构建它们，即创建一个 List 并通过调用 ToArray() 来转换它。

例如

```
public string[][] myws() {
    List<string[]> output = new List<string[]>();
    return output.ToArray();
} 
```

我希望能够采用类似的解决方案，但我想不出如何使用 3 级锯齿状数组或字符串 [][][] 来做类似的事情，而不求助于循环等。

问候马丁

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T16:27:18.757

您可以通过使用`Select()`将每个内部转换`List<string>`为数组 `ToArray()`，然后使用以下方法转换这些结果来实现`ToArray()`：

```
 var x = new List<List<string[]>>();

        string[][][] y = x.Select(a => a.ToArray()).ToArray(); 
```

依此类推，你想去多少层就多少。

# actionscript-3 - 无法访问空对象引用 Flex 的属性或方法

> ID：11348560
> 
> 赞同：0
> 
> 时间：2012-07-05T16:23:41.097
> 
> 标签：actionscript-3, flash, apache-flex, flex4, mxml

我一直在尝试学习 flex/flash 编程，并且正在开发一个项目，我需要从字符串中动态填充 flex 中的微调器列表。我有一个使用“split”分隔字符串的函数，现在我需要填充一个数组列表。我已经和这个愚蠢的大家伙一起工作了好几个小时了，但在任何地方都找不到帮助。我不断收到以下错误：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在意见::CommonPlaces/initApp()[/Users/twing207/Documents/Adobe Flash Builder 4.6/AmericanTaxi/src/views/CommonPlaces.mxml:30]

我的代码在这里：

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayList;
        import spark.events.IndexChangeEvent;

        var Arr1:Array;
        var Arr2:Array;
        var Arr3:Array;

        [Bindable]
        public var CommonPlacesArray:ArrayList;

        var CommonPlacesData:String = new String("2133664:American Taxi Dispatch, Inc:Mount Prospect:834 E RAND RD|2133665:Walmart:Mount Prospect:930 Mount Prospect Plaza|2228885:Garage:Des Plaines:1141 Lee St|2228886:Asian Island:Palatine:1202 E Dundee Rd|2229464:Kohl's:Arlington Heights:700-856 W Dundee Rd|");
        var CurrentSelect:String = new String();

        private function initApp():void {

            Arr1 = CommonPlacesData.split("|");
            var arrLength:Number = new Number(Arr1.length);

            for (var i:Number = 0; i < (arrLength - 1); i++) {
                CurrentSelect = new String(Arr1[i]);
                Arr2 = CurrentSelect.split(":");

      //THE LINE BELOW IS WHERE IT STOPS:
                CommonPlacesArray.addItem(Arr2[1]);
            }

        } 
```

它似乎不喜欢“CommonPlacesArray.addItem”行。任何帮助或正确方向的观点都会很棒。先谢谢了！

另一方面，我也收到以下错误：“未定义属性的访问：数据”：

在另一个视图中，我将 data.UserCommonReturnData 的值设置为字符串。

```
function LoginLoaded (e:Event):void {
                        trace(e.target.data);
                        var ServerReturn:String;
                        ServerReturn = new String(e.target.data);
                        data.UserCommonReturnData = ServerReturn;
                        navigator.pushView(CommonPlaces, data);
                    } 
```

在这里我试着把它拉回来：

```
var CommonPlacesData:String = new String();
            var CurrentSelect:String = new String(); 
```

//下一行给出错误：CommonPlacesData = data.UserCommonReturnData;

任何想法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:28:30.987

你永远不会构造 CommonPlacesArray，你只需声明它。

```
var CommonPlacesArray:ArrayList = new ArrayList(); 
```

如果您检查[Array List API](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayList.html#ArrayList%28%29)，您还可以清楚地看到它有一个接受数组的构造函数，这意味着您可以将数据复制到其中，而无需自己对其进行迭代。

# tsql - 在 tsql 中使用 Sum 函数进行透视

> ID：11348562
> 
> 赞同：2
> 
> 时间：2012-07-05T16:23:42.253
> 
> 标签：tsql, pivot-table

我有以下格式的数据

```
Client       Business Unit    Year  Quarter     USD Amt
BalckRock    Pricing          2010  Q1          234
BalckRock    Pricing          2010  Q2          343
BalckRock    Pricing          2010  Q3          545
BalckRock    Pricing          2010  Q4          5435
BalckRock    Pricing          2011  Q1          5425
BalckRock    Pricing          2011  Q2          3524
BalckRock    Pricing          2011  Q3          54
BalckRock    Pricing          2011  Q4          5425
BalckRock    Pricing          2012  Q1          545
BalckRock    Pricing          2012  Q2          5445
BalckRock    Pricing          2012  Q3          545
BalckRock    Pricing          2012  Q4          4545
BalckRock    Sales            2010  Q1          23
BalckRock    Sales            2010  Q2          3434
BalckRock    Sales            2010  Q3          4234
BalckRock    Sales            2010  Q4          4234
BalckRock    Sales            2011  Q1          3423
BalckRock    Sales            2011  Q2          1
BalckRock    Sales            2011  Q3          1341
BalckRock    Sales            2011  Q4          434
BalckRock    Sales            2012  Q1          421
BalckRock    Sales            2012  Q2          42
BalckRock    Sales            2012  Q3          434
BalckRock    Sales            2012  Q4          4214 
```

我希望它采用以下格式

```
Client        Business Unit    2010    2011    2012
BalckRock     Pricing          6557    14428   11080
BalckRock     Sales            11925   5199    5111 
```

基本上是每年美元的总和，但以年为列标题

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T17:18:01.277

您可以使用不同的方法`PIVOT`（静态或动态，取决于您的需要），或者您可以简单地使用`CASE`：

```
SELECT  Client,
        [Business Unit],
        SUM(CASE WHEN [Year] = 2010 THEN [USD Amt] ELSE 0 END) [2010],
        SUM(CASE WHEN [Year] = 2011 THEN [USD Amt] ELSE 0 END) [2011],
        SUM(CASE WHEN [Year] = 2012 THEN [USD Amt] ELSE 0 END) [2012]
FROM YourTable
GROUP BY Client, [Business Unit] 
```

使用`PIVOT`：

```
SELECT *
FROM (  SELECT Client, [Business Unit], [USD Amt], [Year]
        FROM YourTable) T
PIVOT (SUM([USD Amt]) FOR [Year] IN ([2010],[2011],[2012])) PT 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T01:56:54.937

您可以轻松地为此使用[PIVOT 。](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)正如其他人所说，您可以使用静态枢轴来编码所需的列，也可以使用动态枢轴，它在运行时获取列列表。

静态枢轴（参见[Sql Fiddle 的演示](http://sqlfiddle.com/#!3/95271/4)）

```
select *
from
(
  select client, businessunit, year, USD_Amount
  from t
) x
pivot
(
  sum(USD_Amount)
  for year in ([2010], [2011], [2012])
) p 
```

但为此，我可能会推荐一个动态 Pivot，这样您就不必在进入新的一年时更改代码。（参见[Sql Fiddle with Demo](http://sqlfiddle.com/#!3/95271/2)）

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(year) 
                    from t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT client, businessunit, ' + @cols + ' from 
             (
                select client, businessunit, year, USD_Amount
                from t
            ) x
            pivot 
            (
                sum(USD_Amount)
                for year in (' + @cols + ')
            ) p '

execute(@query) 
```

两个查询将产生相同的结果。但是，动态数据透视的好处是，当您拥有其他年份的数据时，您不必更新查询以包含这些字段。查询的第一部分获取表中的列表`distinct years`，然后使用该列表`years`来确定`SUM`您要查找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:34:07.817

-- 一行五列的数据透视表

```
SELECT Client  Business Unit   Year    Quarter USD Amt,[2010],[2011],[2012]
FROM
(SELECTClient  Business Unit   Year    Quarter USD Amt 
    FROM Table) AS SourceTable
PIVOT
(
sum(USD Amt)
FOR Year IN ([2010], [2011], [2012])
) AS PivotTable; 
```

# spring-mvc - Spring 3.1 MVC：GET & POST 在同一个映射上，它可以工作吗？

> ID：11348570
> 
> 赞同：1
> 
> 时间：2012-07-05T16:24:24.873
> 
> 标签：spring-mvc

我正在学习 Spring 3.1。

我的网络应用程序名称是**“acme”。**

网址大致是**https://blah.blah.blah/acme**

该 URL 设置为显示**login.jsp**

我的控制器中有一个“/ login”映射，我的 login.jsp 提交到该映射

如果出现问题，它会在浏览器中使用以下 URL 将用户返回到**login.jsp ：** **https://blah.blah.blah/acme/login**

“/login”映射设置为处理 POST 请求，所以我担心用户将 **https://blah.blah.blah/acme/login 加入书签**，并收到“不支持 GET 请求”的错误消息

所以，我想我会放入一个函数来处理对 /login 的 GET 请求，以通过我的“/”和“/home”的通用映射处理程序重新路由：

**登录控制器.java**

```
package gov.noaa.acme.controller;

import java.security.Principal;
import javax.servlet.http.*;

import org.springframework.stereotype.Controller;
import org.springframework.validation.*;
import org.springframework.ui.ModelMap;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.SessionAttributes;

import org.apache.log4j.Logger;

@Controller
public class LoginController {

    private static final Logger logger  = Logger.getLogger(LoginController.class);

    @RequestMapping({"/","home"})
    public String home(ModelMap model,HttpSession session,HttpServletRequest request) {

        // Do some stuff

        return "login";
    }
    @RequestMapping(value = "/login", method = RequestMethod.GET)
    public String login_get(){
        logger.debug("started...");
        return "forward:home";
    }

    @RequestMapping(value = "/login", method = RequestMethod.POST)
    public String login(@ModelAttribute("laph") LAPH laph, 
                        BindingResult bindingResult,
                        ModelMap model, 
                        HttpSession session,
                        HttpServletRequest request, 
                        HttpServletResponse response,
                        @RequestParam(required=true) String last_usertype) {

        if (bindingResult.hasErrors()) {
            logger.debug("Error returning home");
            return "home";
        }

        logger.debug("Started ....");  

        // Do authentication  

        if (!isAuthenticated) {
            model.put("status_message", error_message);       
            return "login";
        }

        // success, send newly authenticated user to a search page
        nextView = "search";
        return "redirect:" + nextView;
    }

}// end class LoginController 
```

我的日志显示我什至没有达到处理 /login 的 GET 请求的控制器方法，我仍然收到 /login 不支持 GET 的错误消息。

关于如何解决这个问题的任何想法？

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:07:33.057

> 我担心用户在 https://blah.blah.blah/acme/login 上添加书签，并收到“不支持 GET 请求”的错误消息。

您的方法签名是正确的；使用您放置在`login_get`和上的注释`login`，Spring 不会被混淆，并且会为 GET 和 POST 请求调用正确的方法。

你的方法`home`不对；它返回字符串`"login"`，但我猜您没有名为 login 的视图，并且您希望它调用其中一种登录方法。在这种情况下，您应该返回“forward:login”，但这个解决方案也好不到哪里去。

我的建议是：

1.  `/home``home.jsp`应该通过使用文件或您正在使用的任何视图技术来呈现主视图。
2.  使用[HandlerInterceptor](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)来检查用户是否登录，如果没有，只有你将他重定向到登录 url。

# ruby-on-rails - ruby on rails 从路由中获取页面名称

> ID：11348575
> 
> 赞同：1
> 
> 时间：2012-07-05T16:24:45.433
> 
> 标签：ruby-on-rails, navigation, routes

我有一个用于用户配置文件的用户控制器

然后我从

```
/users/{username} 
```

到

```
/{username} 
```

但现在如果我想添加页面

*   关于我们
*   帮助
*   联系我们
*   服务条款
*   隐私
*   ETC...

我面临一个问题，我无法通过`params[]`代码访问我所在的页面

我的路线看起来像

```
 match '/home' => 'home#index'

  #change /users/{username} to /{username}
  match '/:username' => 'users#show' 
```

我需要知道我的导航菜单是哪个页面，这样我就可以添加一个活动类来突出显示该页面

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:31:58.020

```
for /fxuser route
controller.action_name     # => show
controller.controller_name # => users

for /home route
controller.action_name     # => index
controller.controller_name # => home 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:36:00.883

您可以使用`params[:controller]`，但我不确定这是否是最好的方法。

[此外，您的问题听起来像是菜单中突出显示选项卡](https://stackoverflow.com/questions/829727/highlight-tab-in-menu)的副本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:46:50.480

通过检查我使用的控制器解决了问题

`params[:controller]`在 if 条件下

# vba - 在word 2010中搜索某种样式并使用vba将其制作成书签

> ID：11348577
> 
> 赞同：0
> 
> 时间：2012-07-05T16:24:50.327
> 
> 标签：vba, ms-word, styles, bookmarks, word-2010

如何在word 2010中制作一个样式作为书签？

![在此处输入图像描述](../Images/997e32c820f104a5d1f22ca554eaf5b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:23:40.590

您将无法将文档中的大部分文本用作书签名称。在 Word/VBA 的书签名称中使用某些字符是非法的。可以在文档的 XML 格式的书签名称中添加此类字符，因此如果需要，您可以提出单独的问题。

这感觉就像在 SO 上发布的代码太多了。你真的需要解释你有什么框架，并告诉我们你的障碍在哪里。我们不能再这样做了。“为我工作”。如果您有任何问题，请不要犹豫。

运行底部的“RunMe”宏。

```
Private Function IsParagraphStyledWithHeading(para As Paragraph) As Boolean
    Dim flag As Boolean: flag = False
    If InStr(1, para.Style, "heading", vbTextCompare) > 0 Then
        flag = True
    End If
    IsParagraphStyledWithHeading = flag
End Function

Private Function GetTextRangeOfStyledParagraph(para As Paragraph) As String
    Dim textOfRange As String: textOfRange = para.Range.Text
    GetTextRangeOfStyledParagraph = textOfRange
End Function

Private Function BookmarkNameAlreadyExist(bookmarkName As String) As Boolean
    Dim bookmark As bookmark
    Dim flag As Boolean: flag = False
    For Each bookmark In ActiveDocument.Bookmarks
        If bookmarkName = bookmark.name Then
            flag = True
        End If
    Next
    BookmarkNameAlreadyExist = flag
End Function

Private Function CreateUniqueBookmarkName(bookmarkName As String)
    Dim uniqueBookmarkName As String
    Dim guid As String: guid = Mid$(CreateObject("Scriptlet.TypeLib").guid, 2, 36)
    guid = Replace(guid, "-", "", , , vbTextCompare)
    uniqueBookmarkName = bookmarkName & guid
    CreateUniqueBookmarkName = uniqueBookmarkName
End Function

Private Function BookmarkIt(rng As Range, bookmarkName As String)
    Dim cleanName As String: cleanName = MakeValidBMName(bookmarkName)
    If BookmarkNameAlreadyExist(cleanName) Then
        cleanName = CreateUniqueBookmarkName(cleanName)
    End If
    ActiveDocument.Bookmarks.Add name:=cleanName, Range:=rng
End Function

''shamelessly stolen from gmaxey at http://www.vbaexpress.com/forum/showthread.php?t=37674
Private Function MakeValidBMName(strIn As String)
    Dim pFirstChr As String
    Dim i As Long
    Dim tempStr As String
    strIn = Trim(strIn)
    pFirstChr = Left(strIn, 1)
    If Not pFirstChr Like "[A-Za-z]" Then
        strIn = "A_" & strIn
    End If
    For i = 1 To Len(strIn)
        Select Case Asc(Mid$(strIn, i, 1))
        Case 49 To 58, 65 To 90, 97 To 122
            tempStr = tempStr & Mid$(strIn, i, 1)
        Case Else
            tempStr = tempStr & "_"
        End Select
    Next i
    tempStr = Replace(tempStr, "  ", " ")
    MakeValidBMName = tempStr
End Function

Sub RunMe()
    Dim para As Paragraph
    Dim textOfPara As String
    For Each para In ActiveDocument.Paragraphs
        If IsParagraphStyledWithHeading(para) Then
            textOfPara = GetTextRangeOfStyledParagraph(para)
            If para.Range.Bookmarks.Count < 1 Then
                BookmarkIt para.Range, textOfPara
            End If
        End If
    Next
End Sub 
```

# cuda - pycuda -- 错误：命令“x86_64-pc-linux-gnu-g++”失败，退出状态为 1

> ID：11348579
> 
> 赞同：0
> 
> 时间：2012-07-05T16:25:00.107
> 
> 标签：cuda, pycuda

我安装了 sabayon linux 并尝试安装 pycuda 但尝试时收到以下错误

> su -c "进行安装"
> 
> 在 src/cpp/cuda.cpp:1:0 中包含的文件中：src/cpp/cuda.hpp:12:18：致命错误：cuda.h：没有此类文件或目录编译终止。错误：命令“x86_64-pc-linux-gnu-g++”失败，退出状态为 1

我必须提到我可以用 cuda 编译。

同样的事情发生，当我尝试

> sudo -E sh -c “进行安装”

我的 .bashrc 是：

```
# Put your fun stuff here.
export PATH=~/bin:$PATH 
export PATH=$PATH:$HOME/Matlab_2010b/bin 
export PATH=/opt/cuda/bin:$PATH 
export LD_LIBRARY_PATH=/opt/cuda/lib64:$LD_LIBRARY_PATH 
export CUDA_ROOT=/opt/cuda/bin 
```

（当我以用户身份回显 $PATH 时，它向我显示：/opt/cuda/bin 但是当我以 root 身份尝试它时，它没有显示任何内容，我必须再次导出 PATH ......才能显示。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:50:06.747

您将 CUDA 安装在非标准路径中，并且 PyCUDA 安装程序不知道如何找到它需要编译的工具包头文件。根据[安装说明](http://wiki.tiker.net/PyCuda/Installation/Linux)，您需要执行以下操作：

```
python configure.py --cuda-root=/opt/cuda 
```

然后

```
su -c "make install" 
```

这将确保编译可以找到必要的驱动程序 API 头文件来构建支持库并将所有正确的路径硬编码到 PyCUDA python 库中，以便一切正常工作。

# jquery - 动态添加验证规则

> ID：11348586
> 
> 赞同：4
> 
> 时间：2012-07-05T16:25:17.010
> 
> 标签：jquery, jquery-validate

我有一个插件，它通常处理用于 CRUD 操作的 jQuery 对话框的创建。添加到对话框的表单标记在插件代码外部可用，并且插件只要求 http 服务提供标记，并在收到时简单地将其添加到对话框本身。

然后我在插件（`onSetupValidation`函数）中创建了一个回调，它是插件用户自定义每个表单验证的句柄。这是我正在使用的代码示例

```
var element = $('#mydiv');
element.crudplugin({
    [...]
    onSetupValidation: function(markup) {
        var form = $('#myForm', markup);
        var container = $('<div class="error"><p>Errors were found validating your form. Please correct them and retry.</p><ol></ol></div>')
                       .appendTo(form).hide();
        var validator = form.validate({
            errorContainer: container,
            errorLabelContainer: $('ol', container),
            errorElement: 'em',
            wrapper: 'li',
            highlight: function (element) {
                $(element).addClass("ui-state-error");
            },
            unhighlight: function (element) {
                $(element).removeClass("ui-state-error");
            },
            submitHandler: function (form) {
                [...]
            }
        });
    }
    [...]
}); 
```

好。让我们去解决问题

1.  如果我在标记中添加验证规则（作为类属性），验证根本不起作用。`validate()`如果我在方法中添加规则，则行为相同
2.  谷歌搜索我发现了很多示例，特别是在 SO 上，它们使用了[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)`.rules('add', rule)`的方法，如下面的示例，所有这些链接都建议在添加任何规则之前调用该方法，如下面的示例`validate`

    ```
    $("#myField", markup).rules("add", { required: true }); 
    ```

但是，如果我在执行指令时使用此方法，则会收到以下错误：

> SCRIPT5007：无法获取属性“设置”的值：对象为 null 或未定义 jquery.validate.min.js，第 15 行字符 257

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:14:13.717

你绝对是在正确的轨道上。

关键是您必须`validate`在向表单中的各个字段添加规则之前调用表单。

如果您想查看触发此案例的示例，您可以查看[我对上一个问题的回答](https://stackoverflow.com/a/4129124/312208)（或者特别是[jsfiddle](http://jsfiddle.net/ryleyb/wHpus/66/)）。在那个 jsfiddle 中，如果您注释掉 javascript ( `$('#myForm').validate({/* ... */});`) 的最后 4 行，它将触发您所看到的相同错误消息。

从您的问题中也不清楚，但是您有可能`validate`在表格可见之前打电话？如果是这样，很可能这没有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:33:11.117

只是补充。如果你不介意使用丑陋的代码，你可以做这样的事情

```
var your_new_object = $("#theForm").validate().settings;
your_new_object ... //do some stuff with it
$("#theForm").validate().setting = your_new_object; 
```

其中 your_new_object 是原始设置对象的更新版本

正如我所说，这是一种丑陋的方法，但如果没有其他方法，请尝试一下

# jquery - JQuery 选项卡停止工作

> ID：11348594
> 
> 赞同：2
> 
> 时间：2012-07-05T16:25:46.197
> 
> 标签：jquery, css, jquery-ui, jquery-tabs

网站在 2010 年最初创建时显示标签。不再显示。我已经尝试了几个修复，但它仍然不加载样式。

[http://www.rlulaw.com/members.php](http://www.rlulaw.com/members.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:32:58.457

看起来像是权限错误，这是来自 Chrome 的 JS 控制台转储：

```
GET http://jqueryui.com/ui/jquery.ui.core.js 403 (Forbidden) members.php:14
GET http://jqueryui.com/ui/jquery.ui.widget.js 403 (Forbidden) members.php:14
GET http://jqueryui.com/jquery-1.7.2.js 403 (Forbidden) members.php:14
GET http://jqueryui.com/themes/base/jquery.ui.tabs.css 403 (Forbidden) members.php:11
GET http://jqueryui.com/ui/jquery.ui.tabs.js 403 (Forbidden) members.php:14
Uncaught ReferenceError: $ is not defined members.php:19 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:33:02.057

使用谷歌代码链接你的脚本......使用这些：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script> 
```

# c# - 两个数据表以两个不同的 Excel CSV 文件导出

> ID：11348595
> 
> 赞同：0
> 
> 时间：2012-07-05T16:25:54.257
> 
> 标签：c#, asp.net

你终于看到了，我有 2 个填充了不同数据的数据表，现在我有一个按钮，允许我将一个数据表发送到 .CSV Excel 文件，如下所示：

```
string name="Dat_Agrup";
HttpContext context = HttpContext.Current;
context.Response.Clear();

foreach (System.Data.DataColumn column in _myDataTable.Columns)
{
    context.Response.Write("name"+ ",");
}

context.Response.Write(Environment.NewLine);

foreach (System.Data.DataRow row in _myDataTable.Rows)
{
    for (int i = 0; i < _myDataTable.Columns.Count; i++)
    {
        context.Response.Write(row[i].ToString().Replace(",", string.Empty) + ",");
    }

    context.Response.Write(Environment.NewLine);
}

context.Response.ContentType = "text/csv";
context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + name + ".csv");
context.Response.End(); 
```

现在这段代码运行完美，它可能缺少一些行，比如我声明数据表的地方，但相信我它可以工作：D，现在如果我想在同一个 action_button 中使用相同的代码保存第二个数据表是那些不起作用的，我用这个下一个代码：

```
string name2="Centroids";
HttpContext context2 = HttpContext.Current;
context2.Response.Clear();

foreach (System.Data.DataRow row in _myDataTable2.Rows)
{   
    for (int i = 0; i < _myDataTable2.Columns.Count; i++)
    {
        context2.Response.Write(row[i].ToString().Replace(",", string.Empty) + ",");
    }

    context2.Response.Write(Environment.NewLine);
}

context2.Response.ContentType = "text2/csv";
context2.Response.AppendHeader("Content-Disposition", "attachment; filename=" + name2 + ".csv");
context2.Response.End(); 
```

它只保存第一个数据表并忽略其余代码任何人都可以解释发生这种情况的原因或原因，非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:53:23.157

原因是您的第一个代码片段中的这一行：

```
context.Response.End(); 
```

该[`HttpResponse.End()`方法](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)“停止执行页面，并引发 EndRequest 事件”。

如果您想继续处理代码，则不能在最后调用该方法。

# android - onPostExecute 方法永远不会在 AsyncTask 中被调用

> ID：11348600
> 
> 赞同：1
> 
> 时间：2012-07-05T16:26:07.260
> 
> 标签：android, android-asynctask

我正在尝试从数据库服务器获取一些数据。我知道我无法在 UI 主线程上执行网络作业。我找到的解决方案是 AsyncTask。我覆盖了两个方法（onPostExecute，doInBackground），但是在 doInBackground 之后，onPostExecute 从未调用过，并且我的 android 手机（galaxy s2）强制我的应用程序停止。哪里错了？

```
public class MainActivity extends Activity {

    EditText mResult;
    private static final String TAG = "JSON";
    String Json;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mResult = (EditText)findViewById(R.id.result);

        Button btn = (Button)findViewById(R.id.parse);
        btn.setOnClickListener(new Button.OnClickListener(){
            @Override
            public void onClick(View v){
                getHtml("http://192.168.0.12/index.php");
                //Json = getHtml("http://192.168.0.12/index.php");
                Log.i(TAG, Integer.toString(5));
                Log.i(TAG, Json);
                Log.i(TAG, Integer.toString(6));
                try{
                    String Result = "member list: \n";
                    JSONArray ja = new JSONArray(Json);
                    for(int j=0; j<ja.length(); j++)
                    {
                        JSONObject order = ja.getJSONObject(j);
                        Result +="ID : " + order.getInt("id") + " " +
                        "number : " + order.getInt("gisoo")+ " " +
                        "name : " + order.getString("name")+ " " +
                        "sex : " + order.getString("sex")+ " " +
                        "age : " + order.getInt("age")+ " " +
                        "school : " + order.getString("university")+ " " +
                        "phone : " + order.getString("phone")+ " " +
                        "no : " + order.getInt("numberOfVolunteer")+ " " +
                        "lastlogin : " + order.getString("lastLogin")+ " " +
                        "lastactivity : " + order.getString("lastVolunteer")+ " " +
                        "message : " + order.getString("message")+ "\n\n";
                    }
                    mResult.setText(Result);
                } catch(JSONException e)
                {
                    Toast.makeText(v.getContext(), e.getMessage(), Toast.LENGTH_LONG).show();
                }
            }
        });
    }

    private void getHtml(String url)
    {
        new ProcessHtmlTask().execute(url);
    }

    private class ProcessHtmlTask extends AsyncTask<String, Void, String>{

        @Override
        protected void onPostExecute(String JSON){
            Log.i(TAG, Integer.toString(8));  //I couldn't see number 8 in log.
            Json = JSON;

            return;
        }

        @Override
        protected String doInBackground(String... addr){
        StringBuilder jsonHtml = new StringBuilder();
        HttpURLConnection conn;
        try{
            URL url = new URL(addr[0]);
            conn = (HttpURLConnection)url.openConnection();

            if(conn != null)
            {

                conn.setConnectTimeout(10000);
                conn.setUseCaches(true);
                int n = conn.getResponseCode();
                Log.i(TAG, Integer.toString(n));
                if(conn.getResponseCode() == HttpURLConnection.HTTP_OK){

                    BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream(), "EUC-KR"));
                    for(;;){
                        String line = br.readLine();

                        if(line == null) break;
                        jsonHtml.append(line + "\n");
                    }

                    Log.i(TAG, Integer.toString(3));
                    br.close();
                }
                Log.i(TAG, Integer.toString(4));
                conn.disconnect();
            }

        } catch(Exception ex){
            Log.i(TAG, ex.getMessage());

        }
        Log.i(TAG, jsonHtml.toString());  
        Log.i(TAG, Integer.toString(5));  //I checked html string and number 5 showed up in log.
        return jsonHtml.toString();
    }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:29:14.037

问题出在您的 onCLick 方法中。在 getHtml() 之后要执行的所有操作都必须放在 onPostExecute 中。这是因为您的 AsyncTask 是异步执行的。

# javascript - Buzz.all().mute() 在 iframe 中不起作用

> ID：11348601
> 
> 赞同：1
> 
> 时间：2012-07-05T16:26:13.997
> 
> 标签：javascript, html, iframe, buzz.js

我在 HTML5 游戏中为我的音频使用 Buzz 库。为了在不停止音乐的情况下跨菜单，我将每个菜单加载到 iframe 中，然后从主页启动音乐：

```
<body style="overflow: hidden">
    <iframe id="MainFrame" src="./mainmenu.html" 
     frameborder=0 seamless="seamless" class="mainframe"></iframe>

    <script>
        window.onload = function() {
            playLoop('audio/menumusic.mp3');
        }
</script>
</body>

var playLoop = function(name)
{
    sound = new buzz.sound(name, {preload: true, loop: true});
    sound.play();
    setInitialSoundState(sound);
    loops.add(sound);
} 
```

事情是我希望能够切换/更改 iframe 中加载的页面中的音乐。但每当我使用

```
buzz.all().mute(); 
```

没发生什么事。我猜`buzz`iframe 中的`buzz`变量和主页中的变量不一样。如何访问主页`buzz`以使所有音乐正确静音？

如果需要，我很乐意提供更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:37:52.397

试试这个：

```
window.parent.buzz.all().mute();
// window.parent references an iframe's parent window
// or the current window if the call is made from a regular page (i.e. not in an iframe) 
```

# doctrine-orm - 使用 Doctrine NativeQuery 获取单行结果

> ID：11348604
> 
> 赞同：58
> 
> 时间：2012-07-05T16:26:29.700
> 
> 标签：doctrine-orm

我正在尝试使用 Doctrine 从本机查询返回单行。这是我的代码：

```
$rsm = new ResultSetMapping;
$rsm->addEntityResult('VNNCoreBundle:Player', 'p');
$rsm->addFieldResult('p', 'player_id', 'id');

$sql = " 
    SELECT player_id
      FROM players p
     WHERE CONCAT(p.first_name, ' ', p.last_name) = ?
";

$query = $this->getEntityManager()->createNativeQuery($sql, $rsm);
$query->setParameter(1, $name);
$players = $query->getResult(); 
```

最后一行返回一个玩家列表，但我只想要一个结果。我怎么做？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-05T23:42:59.030

您可以使用`$query->getSingleResult()`，如果找到多个结果，或者没有找到结果，则会抛出异常。（请参阅此处的相关 phpdoc [https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/AbstractQuery.php#L791](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/AbstractQuery.php#L791)）

还有一个不太出名`$query->getOneOrNullResult()`的，如果找到多个结果会抛出异常，如果没有找到结果则返回 null。（请参阅此处的相关 phpdoc [https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/AbstractQuery.php#L752](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/AbstractQuery.php#L752)）

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-08-23T17:32:20.003

如果有多个结果，两者都会抛出`getSingleResult()`异常。`getOneOrNullResult()`要解决此问题，您可以添加`setMaxResults(1)`到查询生成器。

```
 $firstSubscriber = $entity->createQueryBuilder()->select('sub')
        ->from("\Application\Entity\Subscriber", 'sub')
        ->where('sub.subscribe=:isSubscribe')
        ->setParameter('isSubscribe', 1)  
        ->setMaxResults(1)
        ->getQuery()
        ->getOneOrNullResult(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-06-04T06:18:40.270

->getSingleScalarResult() 将返回单个值，而不是数组。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-05T07:16:31.890

> 我只想要一个结果

意味着您希望只返回一行。因此，要么调整您的查询，例如

```
SELECT player_id
FROM players p
WHERE CONCAT(p.first_name, ' ', p.last_name) = ?
LIMIT 0, 1 
```

（然后`getSingleResult()`按照 AdrienBrault 的建议使用）或将行作为数组获取并访问第一项：

```
// ...
$players = $query->getArrayResult();
$myPlayer = $players[0]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-25T11:52:21.190

我在这里使用 fetchObject() 一个使用 Symfony 4.4 的小例子

```
 <?php 
    use Doctrine\DBAL\Driver\Connection;

    class MyController{

    public function index($username){
      $queryBuilder = $connection->createQueryBuilder();
      $queryBuilder
        ->select('id', 'name')
        ->from('app_user')
        ->where('name = ?')
        ->setParameter(0, $username)
        ->setMaxResults(1);
      $stmUser = $queryBuilder->execute();

      dump($stmUser->fetchObject());

      //get_class_methods($stmUser) -> to see all methods
    }
  } 
```

回复：

```
{ 
"id": "2", "name":"myuser"
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-01-11T14:30:47.313

获取单行

```
$result = $this->getEntityManager()->getConnection()->fetchAssoc($sql) 
```

获取所有记录

```
$result = $this->getEntityManager()->getConnection()->fetchAll($sql) 
```

在这里您可以使用 sql native 查询，一切都可以正常工作。

# python - Django / WSGI - 如何分析部分请求？我的分析工具是按请求进行的，但在此之前应用程序内存不足

> ID：11348611
> 
> 赞同：0
> 
> 时间：2012-07-05T16:27:20.127
> 
> 标签：python, django, profiling

如何分析我的 python / django 应用程序，该应用程序在占用更多内存 100 秒后因单个请求而崩溃？

我在顶部看到的是 wsgi 进程正在缓慢地消耗内存，直到它崩溃。

我知道的唯一分析技术在完整的请求/响应周期上运行，但我无法完成请求。然后怎样呢？

我什至可以运行开发服务器并尝试在请求中终止它并查看堆栈在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:49:49.923

有点繁琐并且会有一些开销，但是您可以使用 sys.setprofile() 提供一个在进入和退出函数时调用的函数，并将调用进度转储到自己的日志文件中，可能会检查正在使用的内存同时。

[http://docs.python.org/dev/library/sys.html#sys.setprofile](http://docs.python.org/dev/library/sys.html#sys.setprofile)

也可以查看 heapy 作为让控制台类型访问您的实时进程以转储内存/对象使用情况的一种方式。

# json - 在 Play Framework 视图中使用 JSON 的示例

> ID：11348617
> 
> 赞同：1
> 
> 时间：2012-07-05T16:28:23.987
> 
> 标签：json, playframework, playframework-2.0, flexjson

我试图在控制器中进行切换，从将 JPA 检索到的项目作为列表发送到模板引擎，现在将这些作为 JSON 发送。

我更愿意使用 flexJSON 库来完成这项任务。

我所拥有的是具有以下方法的应用程序控制器：

```
public static Result index() {

        ... Processing ...

    flash("success", "Items have been processed");
    return ok(index.render(Item.all()));
} 
```

和一个像这样的视图 index.scala.html ：

```
@(items: List[Item])

@import helper._

@main("Item list") {

    <h1>@items.size() items(s)</h1>

    <ul>
        @for(item <- items) {
            <li>
                @item.title                
            </li>
        }
    </ul>
} 
```

这些完美地显示了所有已处理项目的未编号列表。

现在，如果我将控制器更改为使用 flexJSON，如下所示：

```
public static Result getItems() {
        List<Item> items = Item.all();

        String s = new JSONSerializer().exclude("*.class", "description").serialize(items);

        flash("success", "Messages have been processed");
        return ok(index.render(s));
    } 
```

我将如何对我的模板进行编程以使用该 json 项目字符串？我试图关注这个关于此事的博客，[http://www.jamesward.com/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku](http://www.jamesward.com/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku)，但在如何使用 json我的模板视图...任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T17:52:47.903

只是样品它可能会帮助你。

应用程序.conf

```
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:mem:play"
ebean.default="models.*" 
```

路线

```
GET     /                           controllers.Application.index()
GET /cities             controllers.Application.all() 
```

控制器 => Application.java

```
package controllers;

import play.*;
import play.mvc.*;
import models.City;
import play.libs.Json;
import views.html.*;

public class Application extends Controller {  

  public static Result index() {
    return ok(index.render());
  }

    public static Result all(){

        City pune=new City();
        pune.name="pune";
        pune.save();

        City mumbai=new City();
        mumbai.name="mumbai";
        mumbai.save();

        return ok(Json.toJson(City.all()));
      }

} 
```

模板 => index.scala.html

```
<!DOCTYPE html>

<html>
<head>
<title>Sample</title>
<script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
</head>
<body>
    <div id="content"></div>

    <script type="text/javascript">

    $(function(){
        get_cities();       
    });

    var get_cities = function() {       
        $.ajax({
            url: '@routes.Application.all()',
            processData:false,
            type: 'GET',
            beforeSend:function(jqXHR, settings){                   
                jqXHR.setRequestHeader("Content-Type", "application/json");                 
            },
            success: function(data, textStatus, jqXHR){                 
                process_cities(data);   
            },
            error: function(jqXHR, textStatus, errorThrown){                
            },
            complete: function(jqXHR,textStatus){                   
            }   
        });
    };

    var process_cities = function(cities){      
        var contentDiv=$("div#content");
        contentDiv.append("<ul>");            
        $.each(cities,function(i,city){
            contentDiv.append("<li>" + city.name + "</li>");
        });
        contentDiv.append("</ul>");                 
    };
    </script>
</body>
</html> 
```

# powershell - 在 Here-String 函数中展开时变量出现乱序

> ID：11348619
> 
> 赞同：1
> 
> 时间：2012-07-05T16:28:28.723
> 
> 标签：powershell

我刚刚遇到了一个我认为非常奇怪的问题，但很可能我只是做错了什么。

当我运行此代码时：

```
Function OutOfOrder($animal,$verb,$adjective) {
@"
The quick brown $animal $verb over the $adjective dog
"@
}

OutOfOrder("fox","jumped","lazy") 
```

这是我收到的输出：

```
The quick brown fox jumped lazy  over the  dog 
```

PS 2.0 和 3.0 中的行为相同。是什么赋予了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:55:38.410

这是一个常见的错误。调用 powershell 函数时不应使用括号和逗号。

您将一个包含 3 个字符串的数组传递给第一个参数，而其他 2 个字符串为空。

试试这个：

```
 OutOfOrder "fox" "jumped" "lazy" 
```

# mysql - Jasper ireport 查询设计

> ID：11348623
> 
> 赞同：1
> 
> 时间：2012-07-05T16:28:43.223
> 
> 标签：mysql, jasper-reports, ireport

我需要在 Jasper iReport 中绘制一个图表，可以根据用户选择对结果进行汇总。假设我有水果桌：

```
id (pk)       town          bananas          orange          cherry 
1            boston           5                 0              11              
2            paris            100               18             12              
3            bucharest        10                3              9
4            barcelona        9                 4              12 
```

从带有 ireport 参数的 Jasper Web 服务器输入控件 (java.util.collection) 用户将选择水果/水果。

我需要总结用户选择的所有水果并绘制图表。

例如，当用户同时选择“香蕉”和“橙子”时，结果将是

```
 town          result  
1            boston           5 
2            paris            118 
3            bucharest        13 
4            barcelona        13 
```

问题是：

我做不到 `select sum(bananas,orange) as result from fruits group by town`。

mysql sum 函数不能以这种方式工作，但这是 jasper 输入控件将用户选择返回给报告查询的方式。

我试过`SELECT (SELECT REPLACE('bananas,orange', ',', '+')) as result from fruits group by town`了，但是 MySQL 不能将替换语句识别为列名。我明白了：

```
 town          result  
1            boston           bananas+orange 
2            paris            bananas+orange
3            bucharest        bananas+orange
4            barcelona        bananas+orange 
```

同样，`SELECT sum(SELECT REPLACE('bananas,orange', ',', '+')) as result from fruits group by town` 将返回 0 作为结果

任何的想法？也许这可以从 ireport 完成..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:56:13.560

您可以根据用户指定的输入参数动态创建以下查询（使用存储过程）。然后存储过程将成为您在 JRXML 中的数据源。

```
select id, town, sum(bananas) + sum(oranges) as result from fruits group by town 
```

我现在认为这很混乱。

另一种方法是重构 FRUIT_SALES 表，如下所示

```
CREATE TABLE "SEEDY_FOODS"."FRUIT_SALES"
  (
    "ID"            NUMBER NOT NULL ENABLE,
    "TOWN"          VARCHAR2(20 BYTE) NOT NULL ENABLE,
    "FRUIT_TYPE_ID" NUMBER,
    "QTY_SOLD"      NUMBER NOT NULL ENABLE,
    CONSTRAINT "FRUIT_SALES_PK" PRIMARY KEY ("ID") 
  ) 
```

样本数据

```
FRUIT_SALES
 ID TOWN    FRUIT_TYPE_ID  SALES
 1  boston  1              5
 2  boston  2              0
 3  boston  3              11
 4  paris   1              100
 5  paris   2              18
 6  paris   3              12 
```

然后有一个参考表，如。

```
CREATE TABLE "SEEDY_FOODS"."FRUIT_TYPES"
  (
    "ID"   NUMBER NOT NULL ENABLE,
    "NAME" VARCHAR2(20 BYTE)
  ) 
```

样本数据

```
FRUIT_TYPE
 ID NAME
 1  bananas
 2  orange
 3  cherry 
```

*上面的 DDL SQL 是使用 SQL Developer 为 Oracle 创建的。您将需要在 MySQL 上验证此语法*

现在，作为 Jasper 报表数据源的目标查询变为

```
select town, sum(qty_sold)
from fruit_sales
where $X{IN,FRUIT_TYPE_ID,COUNTED_FRUIT_TYPES}
group by town 
```

在这里，我们使用 JasperReports 功能`$X{IN,<column>,<PARAMETER>}`仅选择那些符合`$P{COUNTED_FRUIT_TYPES}`类型参数中指定的水果标准的行`java.util.Collection`

这是 JXRML 的开始

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
              name="FruitSalesByTown" 
              language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" 
              leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" 
              uuid="9cc45ae0-15a8-4f13-8e02-b0a4379f7019">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
 :
 :
snip style tags 
 :
 :
    <parameter name="COUNTED_FRUIT_TYPES" class="java.util.Collection"/>
    <queryString>
        <![CDATA[select town, sum(qty_sold)
from fruit_sales
where $X{IN,FRUIT_TYPE_ID,COUNTED_FRUIT_TYPES}
group by town]]>
    </queryString> 
```

（参考 Jasper 报告终极指南的第 80 页）

# .net - 城堡 activerecord 是否被积极维护？

> ID：11348635
> 
> 赞同：2
> 
> 时间：2012-07-05T16:29:32.967
> 
> 标签：.net, nhibernate, castle-activerecord

几周前我在城堡项目网站上看了一眼，似乎“正在建设中”。

如果你去项目页面： http: [//www.castleproject.org/projects/](http://www.castleproject.org/projects/)

向下滚动，活动记录被列为存档项目。

它实际上不再被处理了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:30:02.203

是的，ActiveRecord 最近已移至存档项目。这并不意味着它已经死了。

这意味着没有一个主要贡献者正在**积极**致力于它。拉取请求仍在被接受，如果有人介入并承诺开发项目，它可能会从存档项目列表中恢复。

希望能稍微澄清一下情况。

# linux - 为什么 syslog-ng 无法使用 SELinux TYPE syslogd_exec_t 启动？

> ID：11348636
> 
> 赞同：0
> 
> 时间：2012-07-05T16:29:34.650
> 
> 标签：linux, syslog, selinux, syslog-ng

我在 CentOS 5.7 系统上安装了 syslog-ng，并执行 SELinux。

由于以下错误，我无法通过“service syslog-ng start”启动 syslog-ng 服务：

```
[root@localhost ~]# service syslog-ng start
Starting syslog-ng: 
GThread-ERROR **: file gthread-posix.c: line 135 (): error 'Operation not permitted' during 'pthread_getschedparam (pthread_self(), &policy, &sched)'
aborting...
                                                           [FAILED] 
```

我通过谷歌检查并得到如下：

```
This is probably related to your SELinux policy, which does not allow syslog-ng  get the scheduler parameters. 
```

我可以看到 SELinux 类型

```
[root@localhost ~]# ls -lZ /sbin/syslog*
-rwxr-xr-x  root root system_u:object_r:syslogd_exec_t /sbin/syslogd
-rwxr-xr-x  root root system_u:object_r:syslogd_exec_t /sbin/syslog-ng 
```

但是同样的 SELinux 类型“syslogd_exec_t”，syslogd 可以通过“service syslog start”来启动，为什么 SELinux 不允许 syslog-ng 启动？我认为他们都需要获得“调度程序参数”。

以及如何使 syslog-ng 与 SELinux 类型“syslogd_exec_t”一起使用，因为它们自然都适用于 syslog 机制。

谢谢，EM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:45:38.137

查看 /var/log/audit/audit.log 以查看 SE Linux 拒绝了哪些操作（如果有）。

如果 SE Linux 拒绝访问，则可以使用命令“audit2allow”生成允许这些操作的策略。不要盲目地允许所有操作，只允许那些看起来相关的操作。

# android - Android做while循环

> ID：11348637
> 
> 赞同：6
> 
> 时间：2012-07-05T16:29:44.340
> 
> 标签：android, while-loop

嗨这是我的第二个问题。我有下表

```
|-----|-------|------|------|
|._id.|..INFO.|.DONE.|.LAST.|
|..1..|...A...|...N..|......|
|..2..|...B...|...Y..|..L...|<--- cursor.moveToPosition((int)_id-1);
|..3..|...C...|...Y..|......|
|..4..|...D...|...Y..|......|
|..5..|...E...|...N..|......|
|..6..|...F...|...N..|......|
|-----|-------|------|------| 
```

我使用代码：

```
cursor = db.query(TABLE_NAME, new String[]{INFO,DONE,LAST},null,null,null,null,null);
cursor.moveToPosition((int)_id-1);
String Yval = cursor.getString(cursor.getColumnIndex(DONE));
do
{
    cursor.moveToNext();
    Yval= cursor.getString(cursor.getColumnIndex(DONE));
}
while (Yval=="Y");
s = Yval; 
```

我最初将光标指向我访问的最后一行，然后我循环遍历 DONE 列中的值，如果该列的行中有 Y，则不会停止。当循环中出现 N 时，循环应该停止。但它不起作用。Yval 从不等于“Y”。因此光标执行了一次“moveToNext”然后退出循环，因为它不会将 Yval 读取为“Y”。（我还将所有内容都更改为整数。1 表示 N，0 表示 Y，但它仍然不起作用）那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T16:32:14.717

`equals()`所以如果你想比较，你必须使用方法`Strings`

```
while (Yval.equals("Y")); 
```

你应该知道：

*   `==`测试参考相等。
*   `equals`测试值相等。

所以你想测试**Yval** `String`是否有**Y**值所以你必须使用`equals()`方法。

你的方法不起作用，因为：

```
String data = "lorem";
data == "lorem" ==> FALSE
data.equals("lorem") == TRUE 
```

还要确保你`Cursor`有有效的*行*，所以你需要添加到条件*cursor.moveToNext()*所以

```
cursor.moveToNext() && (Yval.equals("Y") 
```

你也需要治疗`cursor.moveToPosition((int)_id-1)`，所以将其添加到条件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:44:03.397

我建议更改一些内容：

```
if(cursor.moveToPosition((int) _id - 1)) {
    int doneIndex = cursor.getColumnIndex(DONE);
    String Yval;
    do {
        Yval = cursor.getString(doneIndex);
    } while(Yval.equals("Y") && cursor.moveToNext());
} 
```

*   您应该检查位置是否存在行，`_id - 1`因为 SQLite`_id`是唯一的 id，而不是光标中行的位置。
*   您只需要获取`DONE`一次列的索引，只需将其存储在局部变量中即可。
*   正如欺骗者所提到的，String 是用`equals()`类似的方法测试的。
*   您需要考虑如果所有行都“完成”会发生什么，那么您必须在抛出*越界*异常之前停止尝试读取光标。

# android - Android：如何从您的 JNI 代码中使用现有的 C++ 静态库？

> ID：11348646
> 
> 赞同：2
> 
> 时间：2012-07-05T16:30:36.290
> 
> 标签：android, c++, java-native-interface, static-libraries

我见过与此类似的问题，但场景并不完全相同，我也无法得到适用于我的问题的答案。

我有一个 C++ 库的源代码。我们需要将此库用作 android 应用程序的一部分，但它也需要可供第三方用作 C++ 库。

我有一个makefile，它使用ndk的编译器从库的源代码中生成.a文件。那是纯 C++ 部分。

在 Java 部分，我有一个简单的演示项目，其中包含一个包含按钮的简单活动。当按下按钮时，会调用本机代码。

只要我不尝试从 JNI 函数调用库中的函数，一切正常。

以下是图书馆的来源：

**简单数学.h**

```
int Add(int aNumber1, int aNumberB); 
```

**简单数学.cpp**

```
#include "SimpleMath.h"

int Add(int aNumberA, int aNumberB)
{
  return aNumberA + aNumberB;
} 
```

生成**文件**

```
APP      = simple_app
LIBRARY  = simple_library.a
OBJECTS  = SimpleMath.o
CFLAGS   = -Wall -pedantic
NDK_PATH = /home/jug/perforce/jug_navui_personal_main/Env/Linux/Android/ndk/r7c
CXX      = $(NDK_PATH)/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++
AR       = $(NDK_PATH)/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-ar
SYSTEM_LIBS = -lstdc++ -lm
INCLUDE_PATH += ${NDK_PATH}/platforms/android-9/arch-arm/usr/include

all: $(LIBRARY)

$(LIBRARY): 
    $(CXX) -c SimpleMath.c
    $(AR) rcs simple_library.a SimpleMath.o

clean:
    rm *.o *.a 
```

在 java 方面，这些是文件：

**你好-jni.c**

```
#include <string.h>
#include <jni.h>

#include "../../../native/simple_library/SimpleMath.h"

jstring Java_com_amstapps_samples_draft08jni_MainActivity_helloJni(JNIEnv* env, jobject obj)
{
    // Uncommenting the line below results in undefined-symbol compile error
    //int d = Add(1, 2);

    return (*env)->NewStringUTF(env, "Hello from JNI!");
} 
```

**安卓.mk**

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := my_simple_library
LOCAL_ARM_MODE := arm
LOCAL_SRC_FILES := ../../../native/simple_library/simple_library.a
include $(PREBUILT_STATIC_LIBRARY)
#include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE_TAGS    := eng
LOCAL_ARM_MODE       := arm
#LOCAL_PRELINK_MODULE := false
LOCAL_MODULE         := hello-jni
LOCAL_SRC_FILES      := hello-jni.c
LOCAL_C_INCLUDES     := ../../../android/native/simple_library
LOCAL_STATIC_LIBRARIES := my_simple_library
#LOCAL_WHOLE_STATIC_LIBRARIES := my_simple_library
include $(BUILD_SHARED_LIBRARY) 
```

**应用程序.mk**

```
APP_MODULES := my_simple_library hello-jni 
```

正如我所说，当我从 java 应用程序中的 jni 本机代码中实际使用库中的功能时，问题就出现了。

现在，我不再确定我的问题是在静态库的 makefile 中还是在 Android.mk 中。我一开始以为这一定和库本身的生成有关，但此时看到Android.mk中有这么多我不知道的选项后，我不得不承认我没有头绪。

还有什么..？

哦，是的，我还注意到我的纯 C++ 库使用 cpp 扩展，而 java 项目中的 jni 代码使用 c 扩展。我试图让后者也使用 cpp，但编译器抱怨。这可能是问题的一部分吗？

我在尝试编译 Android.mk 文件时得到的错误代码是“未定义符号”，因此 simple_library.a 中的函数列表（实际上有 1 个函数）对 hello-jni.c 不可见，因为它是C++ 而不是普通的 C？

您可能会注意到的另一件事是我正在尝试在其自己的 makefile 上构建静态库，而不是使用 Android.mk 生成它；这是有原因的，但在这一点上，如果我必须让它由 Android.mk 生成，如果需要的话，我也会很高兴。

我看不到任何方法可以在此处添加附件以便与项目共享 zip。让我知道我是否遗漏了一些东西。否则代码在 bitbucket 的一个仓库中，所以我可以轻松地与在那里拥有帐户的任何人共享它。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T20:35:19.200

你写了很多正确的东西，但你只漏掉了一个。

该函数的名称在 C++ 中被破坏。在 .so 文件中，您没有得到“Add”符号，而是“Add@8i”之类的符号。为避免损坏，只需使用

```
extern "C" int Add(int x, int y) 
```

.cpp 文件和 .h 中的声明。

通常还会添加

```
/// Some .h file
#ifdef __cplusplus
extern "C" {
#endif

/// Your usual C-like declarations go here

#ifdef __cplusplus
} // extern "C"
#endif 
```

和

```
extern "C" 
```

对于 .cpp 文件中的每个导出函数。

# mysql - 尝试使用 MAX() 聚合结果时出现奇怪的 MySQL 行为

> ID：11348647
> 
> 赞同：0
> 
> 时间：2012-07-05T16:30:41.950
> 
> 标签：mysql

因此，我正在使用的以下查询产生 4 行：

```
SELECT 
  `DMV`.`id` AS `dmvID`,
  `D`.`id` AS `documentID`,
  `DMV`.`name` AS `documentName`,
  `U`.`username` AS `creatorUserName`,
  `D`.`folder_id` AS `folderID`,
  `D`.`created` AS `createDate`,
  `SL`.`name` AS `statusName`,
  `UM`.`username` AS `modifiedUserName`,
  `DMV`.`version_created` AS `modifiedDate`,
  `UO`.`username` AS `ownerUserName`,
  `DTL`.`name` AS `documentTypeName` 
FROM 
  `document_metadata_version` `DMV`
  LEFT JOIN `documents` `D` 
    ON `DMV`.`document_id` = `D`.`id`
  LEFT JOIN `users` `U` 
    ON `D`.`creator_id` = `U`.`id`
  LEFT JOIN `users` `UM` 
    ON `D`.`modified_user_id` = `UM`.`id`
  LEFT JOIN `users` `UO` 
    ON `D`.`owner_id` = `UO`.`id`
  LEFT JOIN `status_lookup` `SL` 
    ON `D`.`status_id` = `SL`.`id`
  LEFT JOIN `document_types_lookup` `DTL` 
    ON `DMV`.`document_type_id` = `DTL`.`id`
WHERE
    DMV.document_id = 543433
; 
```

为简洁起见，我将省略所有与手头问题无关的不相关字段。`dmvID`和`documentTypeName`（第一列和最后一列）的结果是：

```
+--------+------------------+
| dmvID  | documentTypeName |
+--------+------------------+
| 566053 | Default          |
| 566183 | Default          |
| 681391 | ASCO Documents   |
| 681411 | ASCO Documents   |
+--------+------------------+ 
```

我只对最后一行感兴趣，所以很自然，我将修改 SELECT 语句以在 MAX() 上使用`dmvID`：

```
SELECT 
  MAX(`DMV`.`id`) AS `dmvID`,
# Rest of query unchanged 
```

返回：

```
+--------+------------------+
| dmvID  | documentTypeName |
+--------+------------------+
| 681411 | Default          |
+--------+------------------+ 
```

从上面注意到，681411 实际上是 MAX()，但关联`documentTypeName`不是`dmvID`681411 的等效值，我假设它与`dmvID`566053 匹配。我如何让它返回：

```
+--------+------------------+
| dmvID  | documentTypeName |
+--------+------------------+
| 681411 | ASCO Documents   |
+--------+------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:33:37.177

如果您只需要该列中具有最高值的单行，请使用 ORDER BY 和 LIMIT 1（而不是使用 MAX() 的聚合查询）。

```
...
WHERE
DMV.document_id = 543433
ORDER BY dmvID DESC
LIMIT 1; 
```

# c - 在 C 中测试函数的时序

> ID：11348648
> 
> 赞同：2
> 
> 时间：2012-07-05T16:30:48.537
> 
> 标签：c, windows

我想测试一个函数的时间：function()

我不知道如何在 C 中做到这一点，这是我想要做的伪代码：

```
int main()
{
int startTime = getTime();
function();
int endTime = getTime();
print endTime - startTime;
} 
```

这是如何在 C 中完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:36:16.533

不幸的是，使用 ANSI C 无法做到这一点。但是，您可以使用[`gettimeofday`](http://pubs.opengroup.org/onlinepubs/000095399/functions/gettimeofday.html)POSIX 函数来做到这一点：

```
#include <sys/time.h>

struct timeval tv;
struct timeval start_tv;

gettimeofday(&start_tv, NULL);

// call your function here

double elapsed = 0.0;

gettimeofday(&tv, NULL);
elapsed = (tv.tv_sec - start_tv.tv_sec) +
  (tv.tv_usec - start_tv.tv_usec) / 1000000.0; 
```

或者，如果您想要整个程序的执行时间，您也可以只[`time ./your_program`](http://unixhelp.ed.ac.uk/CGI/man-cgi?time)在命令行上运行。

最后，如果您使用的是 Windows，则可以使用该[`timeGetTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757629%28v=vs.85%29.aspx)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:36:11.930

此代码运行`function()`100 万次，然后打印每个函数调用的平均运行时间。

```
#include <time.h>
#include <stdlib.h>

int main(int argc, const char ** argv)
{
    time_t start, end;

    start = time(NULL);
    for (int i = 0; i < 1000000; ++i)
        function();
    end = time(NULL);

    printf("%f\n", (end - start) / 1000000.0);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:35:44.633

查看`gettimeofday`和/或`clock`函数。可能有更多的高精度时钟/定时器，但对于良好的代码横截面来说，这些应该足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T16:36:58.563

我总是使用这个类（对不起，它是 C++），这是我很久以前在某个地方找到的。对不起，我不知道作者，但我想发布它是可以的。

用法：

```
Timer hello;
hello.start();
function();
hello.stop();
std::cout << "Total time in ms: " << hola.getElapsedTimeInMilliSec() << std::endl; 
```

类本身：

```
#include "timer.hh"
#include <stdlib.h>

///////////////////////////////////////////////////////////////////////////////
// constructor
///////////////////////////////////////////////////////////////////////////////
Timer::Timer()
{
#ifdef WIN32
    QueryPerformanceFrequency(&frequency);
    startCount.QuadPart = 0;
    endCount.QuadPart = 0;
#else
    startCount.tv_sec = startCount.tv_usec = 0;
    endCount.tv_sec = endCount.tv_usec = 0;
#endif

    stopped = 0;
    startTimeInMicroSec = 0;
    endTimeInMicroSec = 0;
}

///////////////////////////////////////////////////////////////////////////////
// distructor
///////////////////////////////////////////////////////////////////////////////
Timer::~Timer()
{
}

///////////////////////////////////////////////////////////////////////////////
// start timer.
// startCount will be set at this point.
///////////////////////////////////////////////////////////////////////////////
void Timer::start()
{
    stopped = 0; // reset stop flag
#ifdef WIN32
    QueryPerformanceCounter(&startCount);
#else
    gettimeofday(&startCount, NULL);
#endif
}

///////////////////////////////////////////////////////////////////////////////
// stop the timer.
// endCount will be set at this point.
///////////////////////////////////////////////////////////////////////////////
void Timer::stop()
{
    stopped = 1; // set timer stopped flag

#ifdef WIN32
    QueryPerformanceCounter(&endCount);
#else
    gettimeofday(&endCount, NULL);
#endif
}

///////////////////////////////////////////////////////////////////////////////
// compute elapsed time in micro-second resolution.
// other getElapsedTime will call this first, then convert to correspond resolution.
///////////////////////////////////////////////////////////////////////////////
double Timer::getElapsedTimeInMicroSec()
{
#ifdef WIN32
    if(!stopped)
        QueryPerformanceCounter(&endCount);

    startTimeInMicroSec = startCount.QuadPart * (1000000.0 / frequency.QuadPart);
    endTimeInMicroSec = endCount.QuadPart * (1000000.0 / frequency.QuadPart);
#else
    if(!stopped)
        gettimeofday(&endCount, NULL);

    startTimeInMicroSec = (startCount.tv_sec * 1000000.0) + startCount.tv_usec;
    endTimeInMicroSec = (endCount.tv_sec * 1000000.0) + endCount.tv_usec;
#endif

    return endTimeInMicroSec - startTimeInMicroSec;
}

///////////////////////////////////////////////////////////////////////////////
// divide elapsedTimeInMicroSec by 1000
///////////////////////////////////////////////////////////////////////////////
double Timer::getElapsedTimeInMilliSec()
{
    return this->getElapsedTimeInMicroSec() * 0.001;
}

///////////////////////////////////////////////////////////////////////////////
// divide elapsedTimeInMicroSec by 1000000
///////////////////////////////////////////////////////////////////////////////
double Timer::getElapsedTimeInSec()
{
    return this->getElapsedTimeInMicroSec() * 0.000001;
}

///////////////////////////////////////////////////////////////////////////////
// same as getElapsedTimeInSec()
///////////////////////////////////////////////////////////////////////////////
double Timer::getElapsedTime()
{
    return this->getElapsedTimeInSec();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:03:22.297

```
#include <stdio.h>
#include <time.h>

int main()
{
clock_t start, finish;

start = clock();
....
finish = clock();   

printf("Time: %d", ((double) (finish - start)) / CLOCKS_PER_SEC);
return 0;
} 
```

clock() 获取自进程开始以来的时钟滴答数。因此，从结束中减去开始并除以 CLOCKS_PER_SEC 应该会给你以秒为单位的运行时间。（有关更多信息，请参阅[手册](http://www.gnu.org/software/libc/manual/html_node/CPU-Time.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T17:24:01.423

查看[GetTickCount](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx) windows api 和[About Timers](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644900%28v=vs.85%29.aspx) (for Windows)

# asp.net-mvc-4 - 将 Web API 控制器部署到生产环境

> ID：11348651
> 
> 赞同：2
> 
> 时间：2012-07-05T16:31:04.060
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在 VS 2010 中有一个 ASP.NET MVC 应用程序。我在我的应用程序中添加了一个新的 Web API 控制器。这是我试图调用的简单方法：

```
 public List<Article> Get()
        {
            using (var db = new HighOnCodingDbEntities())
            {
                var articles = (from a in db.Articles
                               select a).Take(10).ToList();
                return articles; 
            }

        } 
```

全球.asax：

```
routes.MapHttpRoute(
    name: "API Default",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

当我调用此方法时，我得到“找不到资源”。我已将应用程序二进制文件发布到生产环境中，我相信这就是我需要做的。

网址应为：[http ://www.highoncoding.com/api/articlesapi](http://www.highoncoding.com/api/articlesapi)

文章APIController.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using HighOnCoding.Models;

namespace HighOnCoding.Controllers
{
    public class ArticlesAPIController : ApiController
    {
        // GET api/<controller>
        public List<Article> Get()
        {
            using (var db = new HighOnCodingDbEntities())
            {
                var articles = (from a in db.Articles
                               select a).Take(10).ToList();
                return articles; 
            }

        }

        // GET api/<controller>/5
        public string Get(int id)
        {
            return "value";
        }

        // POST api/<controller>
        public void Post(string value)
        {
        }

        // PUT api/<controller>/5
        public void Put(int id, string value)
        {
        }

        // DELETE api/<controller>/5
        public void Delete(int id)
        {
        }
    }
} 
```

在本地机器上工作：

![在此处输入图像描述](../Images/7442be81aef60bf4cb5dff50cac0f0d5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:25:39.280

在生产中，确保您网站的 IIS7 应用程序池的 .NET Framework 版本在集成模式下设置为 .NET 4.0.xxx。

# javascript - 在显示自定义结果时如何通知 Google Search Appliance 有点击的链接？

> ID：11348652
> 
> 赞同：0
> 
> 时间：2012-07-05T16:31:05.540
> 
> 标签：javascript, google-search-appliance

我正在向 Google Search Appliance (GSA) 执行 Web 请求并返回 XML。然后我解析该 XML 以创建到 EXTJS Web 应用程序的内部链接。我的主要问题是，如何告诉 GSA 从我的自定义结果中点击了哪个链接，以免失去点击排名培训？我不想失去 GSA 了解随着时间的推移哪些结果相关的能力，但我必须从 GSA 返回的 XML 构建链接。我知道我可以在 IFrame 中显示结果，但鉴于我的要求，这是不可能的。我浏览了文档，但我还没有找到任何好的线索。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:26:43.150

为了从基于非 XSLT 的搜索页面获取点击跟踪，您需要执行以下操作：

1) 从 GSA 复制 clicklog.js 或 clicklog_compiled.js 并在您的页面中引用它。（位于 http:///*.js 2）您需要在您的网络服务器上为 /click 实现反向代理并将其指向 http://

它解析页面中的所有锚标记，因此您无需做太多其他事情。ASR 报告并由属性 ctype 捕获，如

关于协议的一些细节： [https ://developers.google.com/search-appliance/documentation/614/xml_reference?hl=de-DE#ASRProtocol](https://developers.google.com/search-appliance/documentation/614/xml_reference?hl=de-DE#ASRProtocol)

# windows - 什么是named.exe进程以及如何避免消耗高CPU速率

> ID：11348660
> 
> 赞同：2
> 
> 时间：2012-07-05T16:31:36.100
> 
> 标签：windows, windows-server-2008, plesk

我有一个带有 Plesk 的 Windows Server 2008 运行两个网站。有时服务器运行缓慢，并且有一个 named.exe 进程使 CPU 峰值达到 100%。它会持续很短的时间，过一段时间又会出现。我想知道这个过程是做什么的，以及如何配置它以不消耗这个 cpu 并使我的网站变慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:39:18.303

这必须是 DNS 服务，也称为 Bind。高 CPU 使用率可能表示以下情况之一：

1.  DNS 正在重新读取其配置。在这种情况下，高 CPU 使用率应与您在 Plesk 中的活动保持一致 - 即添加和删除域。
2.  有人（通常是另一个 DNS 服务器）正在从您的 DNS 服务器中提取数据。这是正常的过程。正如你所说，它是短期的，它看起来不像 DNS DDoS

AFAIK 如果目前没有其他应用程序需要 CPU，Windows 中没有默认方法来限制软件占用 100% CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:15:52.647

参见“DNS Treewalk Suite”系统，关闭进程，并使用杀毒软件。

检查系统中的错误“日志”。

# php - 当我将纯 PHP 代码转换为 CodeIgniter 时，我遇到了原生 PHP 函数问题

> ID：11348663
> 
> 赞同：0
> 
> 时间：2012-07-05T16:31:44.617
> 
> 标签：php, codeigniter

当我将纯 PHP 代码转换为 CodeIgniter 时，我遇到了原生 PHP 函数问题。对此有任何想法或替代解决方案吗？

纯 PHP 代码

```
$aColumns = array( 'id', 'name', 'first_name' );
$sTable = "ajax";
$sQuery = "SELECT SQL_CALC_FOUND_ROWS 
          ".str_replace(" , ", " ", implode(", ", $aColumns))."FROM   $sTable
$rResult = mysql_query( $sQuery );
while ( $aRow = mysql_fetch_assoc( $rResult ) )
{
  print_r($aRow);
} 
```

完美的结果输出

```
Array
(
    [id] => 1
    [name] => kane
    [first_name] => kane
)
Array
(
    [id] => 2
    [name] => kane
    [first_name] => kane
)
Array
(
    [id] => 3
    [name] => kane
    [first_name] => kane
) 
```

代码点火器

```
$aColumns = array( 'id', 'name', 'first_name' );
$sTable = "ajax";
$sQuery = "SELECT SQL_CALC_FOUND_ROWS 
           ".str_replace(" , ", " ", implode(", ", $aColumns))."FROM   $sTable
$rResult = $this->db->query($sQuery);
while ( $aRow =  $rResult->row_array() )
{
      print_r($aRow);
} 
```

无限结果输出

```
Array
    (
        [id] => 1
        [name] => kane
        [first_name] => kane
    )
Array
    (
        [id] => 1
        [name] => kane
        [first_name] => kane
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:42:26.073

那是因为`$result->row_array()`在你试图完成的事情中使用是错误的。

循环结果并将结果作为数组获取的正确方法是使用该`$result->result_array()`方法。像这样：

```
foreach( $rResult->result_array() as $aRow )
{
      print_r($aRow);
} 
```

查看在 CI中[生成查询结果](http://codeigniter.com/user_guide/database/results.html)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:42:33.507

删除 SQL_CALC_FOUND_ROWS。您不需要它，因为您没有限制结果集。

```
foreach($rResult->result_array() as $aRow)
     print_r($aRow); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:36:15.617

您可能需要考虑稍微组织一下您的 SQL 语句。

```
$this->db->select('id, name, first_name')
    ->from('ajax')

$query = $this->db->get();

$count = $query->num_rows();

foreach ($query->result_array() as $row)
    print_r($row); 
```

# linux - Vim：将硬包装转换为软包装

> ID：11348668
> 
> 赞同：2
> 
> 时间：2012-07-05T16:31:55.950
> 
> 标签：linux, vim

> **可能重复：**
> [在 vim 中展开文本](https://stackoverflow.com/questions/11039544/unwrap-text-in-vim)

如何使用 vim 或（如果更简单）一些其他标准 GNU/Linux 工具将硬包装转换为文本文件中的软包装？这同时保留了段落本身。删除所有换行符很容易，但无法使用。

硬包装是指每行最多在（例如）第 80 列结束的文档。

我注意到程序 aquamacs 具有执行此操作的功能，但我不知道它的输出是什么样的，而且它仅适用于 Mac OS X。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T17:27:36.023

你可以这样做：

```
:%规范vipJ
```

它将解开文本中的所有段落。但是，如果您想手动执行此操作，只需`ipJ`在要展开的每个段落上执行内部可视模式即可。

* * *

我还找到[了另一种方法](http://vim.1045645.n5.nabble.com/Does-automated-quot-line-unwrap-quot-exist-td1157525.html)来实现这一点

```
:g/^\s*\n.*\S$/+norm vipJ
```

意思是：

```
:g "当模式匹配时执行命令
```

图案：

```
^\s*\n "只有空格或制表符（或没有）的行
\n.*\S$ "除了以非空格字符结尾的任何内容的行

```

命令：

```
+norm vipJ "加入段落中的行
```

请注意，第一段之前也需要一个空行。

# maven - 将 SBT 项目发布到本地目录

> ID：11348670
> 
> 赞同：12
> 
> 时间：2012-07-05T16:32:01.403
> 
> 标签：maven, sbt

我正在尝试在我的个人网络服务器上发布我的一些 SBT 项目。据我所知，您通常将 SBT 项目导出为包含项目定义的 POM.xml 的 Maven 目录。

正如[Brian Clapper 所指出的](http://brizzled.clapper.org/blog/2010/05/07/sbt-and-your-own-maven-repository/)，您可以通过创建多个配置文件并使用`sbt publish`. 在他的教程中，存储库是通过 FTP 传输的。

我想手动将我的 Maven 存储库推送到服务器，以便拥有更多控制权。你能给我一些提示，如何做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T14:14:04.737

我想出了如何做到这一点。此解决方案创建一个与 Maven 兼容的本地 Ivy 存储库。

您必须在 中设置以下值`build.sbt`：

```
name := "project-name"

organization := "org.example"

version := "0.0.0"

scalaVersion := "2.9.2"

publishTo := Some(Resolver.file("file", new File("/path/to/your/releases")) 
```

之后，您可以发布您的版本

```
sbt publish 
```

这将打印类似于以下行的内容

```
[info] Set current project to project-name (in build file:/path/to/your/project/)
[info] Updating {file:/path/to/your/project/}default-2e51ea...
[info] Packaging /path/to/your/project/target/scala-2.9.2/project-name_2.9.2-0.0.0-S
NAPSHOT-sources.jar ...
[info] Resolving org.scala-lang#scala-library;2.9.2 ...
[info] Done packaging.
[info] Done updating.
[info] :: delivering :: org.example#project-name_2.9.2;0.0.0 :: 0.0.0 :: release :: Tue Jul 24 15:41:04 CEST 2012
[info]  delivering ivy file to /path/to/your/project/target/scala-2.9.2/ivy-0.0.0.xml
[info] Wrote /path/to/your/project/target/scala-2.9.2/project-name_2.9.2-0.0.0.pom
[info] Packaging /path/to/your/project/target/scala-2.9.2/project-name_2.9.2-0.0.0.jar ...
[info] Done packaging.
[info]  published project-name_2.9.2 to /path/to/your/releases/org/example/project-name_2.9.2/0.0.0-SNAPSHOT/project-name_2.9.2-0.0.0.pom
[info]  published project-name_2.9.2 to /path/to/your/releases/org/example/project-name_2.9.2/0.0.0-SNAPSHOT/project-name_2.9.2-0.0.0.jar
[info]  published project-name_2.9.2 to /path/to/your/releases/org/example/project-name_2.9.2/0.0.0-SNAPSHOT/project-name_2.9.2-0.0.0-sources.jar
[info]  published project-name_2.9.2 to /path/to/your/releases/org/example/project-name_2.9.2/0.0.0-SNAPSHOT/project-name_2.9.2-0.0.0-javadoc.jar
[success] Total time: 1 s, completed 24.07.2012 15:41:05 
```

您可以将生成的文件放在任何 Web 服务器上（例如[http://repo.example.org/](http://repo.example.org/)），并在另一个项目的构建脚本中使用它，方法是将以下行添加到您的`build.sbt`:

```
resolvers += "Personal repository" at "http://repo.example.org/"

libraryDependencies += "org.example" % "project-name" % "0.0.0" 
```

For more information, see [SBT: Getting Started Library Dependencies](https://github.com/harrah/xsbt/wiki/Getting-Started-Library-Dependencies) and [SBT: Publishing](https://github.com/harrah/xsbt/wiki/Publishing).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T15:00:42.273

从 sbt，您可以使用

```
project myproject
[myproject] $ publish-local 
```

它将发布到您当地的常春藤目录（通常`~/.ivy2/local`）。

在输出中，您将看到所有文件的路径：

```
[info] Done packaging.
[info] published myproject_2.9.1 to .../ivy2/...myproject.../poms/myproject_2.9.1.pom
[info] published myproject_2.9.1 to .../ivy2/...myproject.../jars/myproject_2.9.1.jar
[info] published myproject_2.9.1 to .../ivy2/...myproject.../srcs/myproject_2.9.1-sources.jar
[info] published myproject_2.9.1 to .../ivy2/...myproject.../docs/myproject_2.9.1-javadoc.jar
[info] published ivy to .../ivy2/...myproject.../ivys/ivy.xml 
```

然后你可以抓取这些文件并将它们上传到你的 ftp 服务器。

不过，我仍然会推荐链接的博客文章中描述的方法。至少我们是这样做的。只是关于存储凭据的一个小说明。使用以下 sbt 设置：

```
val credentials = Credentials(Path.userHome / ".ivy2" / ".my-credentials") 
```

凭据文件将如下所示：

```
realm=Sonatype Nexus Repository Manager
host=nexus.example.com
user=deployment
password=pass 
```

凭据与您用于登录 Nexus Web 界面的凭据相同。

# php - 两种形式一种提交

> ID：11348674
> 
> 赞同：1
> 
> 时间：2012-07-05T16:32:08.280
> 
> 标签：php, html, forms, post, field

我的网站有三列。我在一个表单中有两个字段需要在左列中，还有一个字段是当前需要在中间列中的不同表单。问题是，我希望他们表现得像一种形式......（或者如果可能的话，成为一种形式）。

提交表单时，需要将来自所有字段的数据传递到操作页面。

实现这一目标的最佳方法是什么？H

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:35:59.843

如果您不必支持旧浏览器，您可以`form`在某些元素上使用该属性，使它们的行为与表单中的一样。

见[http://www.impressivewebs.com/html5-form-attribute/](http://www.impressivewebs.com/html5-form-attribute/)

```
<form id="some_form">
 ...
</form>

<input form="some_form" /> 
```

否则，更好的方法是让表单元素成为所有字段的父元素。只需将表单元素移出第一列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:35:49.297

列不是一种形式。将所有列 div 包装在一个表单标签中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:34:39.003

听起来你控制着代码。最简单的解决方案是制作一个表格。您正在寻找的是非标准功能以及您在未来解决我的问题的任何解决方案。

# event-handling - 如何判断哪个 FloatSpin 在 wxPython 中触发了 EVT_FLOATSPIN 事件？

> ID：11348677
> 
> 赞同：1
> 
> 时间：2012-07-05T16:32:16.317
> 
> 标签：event-handling, wxpython

我想捕获由我的 floatspinners 触发的 FLOATSPIN 事件，但我需要知道哪个 FloatSpin 控件触发了此事件。这是必需的，以便我可以更新字典的值。

FloatSpin 控件是基于键值对字典创建的。键是我的 FloatSpin 控件的唯一 ID，值是控件的默认值。我想更新我的字典 k:v 对，我正在更新的值将来自 FloatSpin 控件事件。

鉴于以下（精简）示例，我将如何捕获触发事件的控件的唯一 ID？

```
firstFS = FS.FloatSpin(self, -1, min_val=0, max_val=None, increment=1, value=1, agwStyle=FS.FS_RIGHT)
secondFS = FS.FloatSpin(self, -1, min_val=0, max_val=None, increment=1, value=1, agwStyle=FS.FS_RIGHT)

self.Bind(FS.EVT_FLOATSPIN, self.OnFloatSpin)

def OnFloatSpin(self, event):
    floatspin = event.GetEventObject() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:20:18.523

花了几个小时试图弄清楚，但我明白了！

```
firstFS = FS.FloatSpin(self, -1, min_val=0, max_val=None, increment=1, value=1, agwStyle=FS.FS_RIGHT)
firstFS.SetName('firstFS')  # for example
secondFS = FS.FloatSpin(self, -1, min_val=0, max_val=None, increment=1, value=1, agwStyle=FS.FS_RIGHT)
secondFS.SetName('secondFS')  # for example

self.Bind(FS.EVT_FLOATSPIN, self.OnFloatSpin)

def OnFloatSpin(self, event):
    floatspin = event.GetEventObject()
    floatspinID = event.GetId()  # grab the widgets id that is firing the event
    '''OR'''
    floatspinName = event.GetEventObject().GetName()  # grab the widget name 
```

# php - 一个小的 php 函数 Http Error 500 出现问题

> ID：11348678
> 
> 赞同：0
> 
> 时间：2012-07-05T16:32:19.290
> 
> 标签：php, http

我只是在学习 php，为了练习，我想尝试制作一个可以在文档中轻松生成 CSS3 渐变的 php 函数。

我遇到了 HTTP 错误 500。这是代码：

```
<?php
function cgrad($c1,$c2,$applyto)
{
echo 
"<style type="text/css">
$applyto {
background-image: -ms-linear-gradient(top, $c1 0%, $c2 100%);
background-image: -moz-linear-gradient(top, $c1 0%, $c2 100%);
background-image: -o-linear-gradient(top, $c1 0%, $c2 100%); 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, $c1), color-stop(1, $c2));
background-image: -webkit-linear-gradient(top, $c1 0%, $c2 100%);
background-image: linear-gradient(to bottom, $c1 0%, $c2 100%);
height : 100%;
width : 100%;}
</style>";
};
?>
<html>
<head>
<?php
cgrad(#FFFFFF,#000000,body);
?>
</head>
<body>
testing
</body>
</html> 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T16:35:54.550

```
echo 
"<style type="text/css"> 
```

您不能将双引号放在双引号内。您可以转义它们（如其他答案所说）或使用单引号。

```
echo 
"<style type='text/css'> 
```

此外，调用时需要引号`cgrad`。

```
<?php
cgrad('#FFFFFF','#000000','body');
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:34:01.567

```
echo 
"<style type="text/css"> 
```

您正在使用引号来分隔您的 echo 语句，并且在其中 - PHP 无法确定哪些引号是哪些。一种方法是转义 echo 语句中的引号：

```
echo 
"<style type=\"text/css\"> 
```

# c# - ILookup 如何使用 Where 方法？

> ID：11348679
> 
> 赞同：0
> 
> 时间：2012-07-05T16:32:21.767
> 
> 标签：c#

我的查找：

```
var myLookup = myList.ToLookUp(x=> new {x.Name, x.Job, x.Phone}); 
```

我正在尝试做的事情：

`x.Name`可以包含作业字符串，或作业列表的字符串，即`"Programmer"`或`"QA, Programmer"`.

下面的语句将遍历可用的作业，并将它们与我查找的内容相匹配：

```
foreach(var j in jobs)
{
     foreach(var m in myLookup[new {j.Name, j.Job, j.Phone}])
     {
          //do whatever
     }
} 
```

现在，这适用于任何没有用逗号设置的作业名称，所以我尝试了这个：

```
foreach(var j in jobs)
{
     foreach(var m in myLookup[new {j.Name, j.Job, j.Phone}].Where(x=>x.Name.Contains(j.Name))
     {
          //do whatever
     }
} 
```

但这似乎仍然不起作用。它只是像其他方式一样匹配名称。

如何在我的查找中合并包含或位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:39:01.087

我不确定，但您可以在 for each 之前进行字符串操作：类似于：`j.Job.replace(',','');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:40:22.667

如果我理解正确，你想要类似的东西

```
string jobsToMatch = "Programmer,QA";
var relevantNames = jobsToMatch.Split(',');
var myLookup = 
    myList.Where(x => relevantNames.Contains(x.Name))
      .ToLookup(k => k.Job, x => new { x.Name, x.Job, x.Phone }); 
```

# php - 无法使用 php 通过 telnet 会话启动 putty

> ID：11348681
> 
> 赞同：0
> 
> 时间：2012-07-05T16:32:26.837
> 
> 标签：php

我的桌面上有 putty.exe，所以如果我转到命令提示符然后 `C:\Documents and Settings\user\Desktop`定位并执行以下命令，它将启动 telnet 连接到指定服务器的 Putty 窗口：

`putty.exe telnet://a.b.c.d/`

我正在尝试使用以下命令将腻子启动到 telnet 到特定服务器，但它对我不起作用：

```
<?php
$securecrt = "C:\\Documents and Settings\\user\\Desktop\\putty.exe telnet://a.b.c.d/ ";

exec($securecrt);
?>

If I try following then it launches the putty application but will have to provide the host name or IP to login:

<?php
$securecrt = "C:\\Documents and Settings\\user\\Desktop\\putty.exe ";

exec($securecrt);
?> 
```

不确定我是否遗漏了一些非常基本的东西，如果有人可以帮助解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:31:42.430

您可以尝试将 PHP 与 fsock 一起使用，或者使用类似[http://www.geckotribe.com/php-telnet/的类，而不是使用 Putty](http://www.geckotribe.com/php-telnet/)

但是，您可以使用当前设置尝试以下操作：

```
$securecrt = '"C:\Documents and Settings\user\Desktop\putty.exe" telnet://a.b.c.d/'; 
```

# javascript - 如果小于另一个值错误超过一位，则 Javascript 添加到值

> ID：11348683
> 
> 赞同：0
> 
> 时间：2012-07-05T16:32:34.397
> 
> 标签：javascript, forms, math

如果当前值小于另一个值，我有一个 javascript 函数可以将一个数量加一。这是javascript函数：

```
function addQty()
{
    if(document.getElementById("quantity").value < document.getElementById("stock").value)
        document.getElementById("quantity").value++;
    else
        return;
} 
```

以下是从中获取值的表单元素：

```
<input type='text' id="quantity" name='quantity' value ='0' />
<input type='hidden' id="stock" name="stock" value="<?php echo $adjustedStock; ?>" /> 
```

因此，基本上，只有当有足够的库存时，用户才能在他们的产品数量中添加一个来订购。

现在，如果库存数量是 1-9，这绝对可以正常工作，但是如果库存水平是两位数，则用户可以添加到他们的购物篮中的最大值（即代码中的“数量”）返回为第一位+ 1。因此，如果库存为 13，则最大数量为 2，或者如果库存为 63，则最大数量为 7。

我已经尝试将 $adjustedStock 的整数值转换为字符串，然后再将其用于表单中，因为我读到有时浏览器在这种情况下可能会表现得很奇怪，但这不起作用。任何想法为什么会发生这种情况？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:37:15.520

an 的“值”属性`<input>`始终是一个字符串。因此，您的比较是在两个字符串之间进行的，这不是您想要的。

在比较之前将值转换为数字：

```
function addQty()
{
    var qtyInp = document.getElementById('quantity'),
      qty = parseInt(qtyInp.value, 10),
      stk = parseInt(document.getElementById('stock').value, 10);

    if (qty < stk)
        qtyInp.value = qty + 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:35:17.493

表单元素值是字符串。`parseInt`以其他方式使用或转换为数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:45:41.723

您可以`Math.min()`用于此目的...

```
function addQty() {
    var quantity = document.getElementById("quantity");

    quantity.value = Math.min(+quantity.value + 1, 
                              document.getElementById("stock").value);
} 
```

这清楚地表明您想要增加的数量或库存总量中的较小者。

# embedded-linux - BeagleBoard C5 构建 u-boot

> ID：11348684
> 
> 赞同：1
> 
> 时间：2012-07-05T16:32:36.320
> 
> 标签：embedded-linux, beagleboard, toolchain, u-boot

我正在尝试为我的 BeagleBoard C5 板成功构建 u-boot。我正在使用 Ubuntu 10.04 和 Crosstool-NG 工具链。我有 Xloader (MLO)、u-boot.bin 和 uImage 的工作映像，我发现这些映像是从 AngstromBB 项目中预构建的，这些板可以成功启动 Angstrom。

我可以通过执行以下操作成功构建 u-boot.bin 文件：

```
git clone git://git.denx.de/u-boot.git u-boot/
make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- omap3_beagle_config
make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- 
```

然后我复制我刚刚构建的 u-boot.bin 以替换 SD 卡上 u-boot.bin 的工作版本并尝试启动板，但它挂在以下位置失败：

```
Reading boot sector
Loading u-boot.bin from mmc 
```

它会永远坐在那里！我似乎找不到任何关于为 C5 BeagleBoard 构建 u-boot 的明确说明，除了它与以前的版本不同或需要使用 u-boot 构建的称为“SPL”的东西。有人知道我如何成功地为 BeagleBoard C5 构建自己的 u-boot.bin 映像吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:50:42.567

您的第一步应该是研究开发板的启动顺序。一些处理器不直接引导至 u-boot。他们启动存储在 Flash 或板上的 EEPROM 中的应用程序。对于您的 C5，此应用程序是 X-Loader (https://gitorious.org/x-loader)。您将需要了解此 1 级引导加载程序的作用以及它如何启动 u-boot。通常，他们会在启动完整的引导加载程序之前进行一些基本的 PSC、DRAM 等配置。但它在哪里寻找 u-boot？X-Loader 是否将 u-boot 复制到 RAM 并从那里开始执行？还是它从您的 MMC 开始执行？有时可以设置一些跳线来控制启动顺序。因此 X-Loader 可以根据设置从 NAND、NOR 或 SD/MMC 启动。

你从哪里得到你的 u-boot 源代码？你是直接从 denx 网站下载的还是随你的 Beagle 板一起提供的？

一般来说，在没有工具的情况下调试开发板（即使它是参考板）是非常困难的。开发板是否提供了调试器，或者您有自己的 JTAG 调试器，您可以使用它来设置硬件断点并单步执行代码？

# c# - 没有数据库的单元测试：Linq to SQL

> ID：11348691
> 
> 赞同：2
> 
> 时间：2012-07-05T16:32:54.307
> 
> 标签：c#, unit-testing, linq-to-sql, tdd, domain-driven-design

我有一个使用 LINQ to SQL 实现的存储库。尽管我没有数据库，但我需要进行单元测试。如何为 FreezeAllAccountsForUser 方法编写 UT？你能举一个使用手动模拟的例子吗？

注意：在域对象中使用了继承映射

注意：单元测试将使用 Visual Studio Team Test 完成

> 来自@StuperUser 的评论。单元测试涉及将代码与其交互的其他对象完全隔离开来。这意味着如果代码失败，您可以确定失败与被测代码有关。为此，您必须伪造这些对象。

代码

```
 public void FreezeAllAccountsForUser(int userId)
    {
        List<DTOLayer.BankAccountDTOForStatus> bankAccountDTOList = new List<DTOLayer.BankAccountDTOForStatus>(); 

        IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
        foreach (DBML_Project.BankAccount acc in accounts)
        {
            string typeResult = Convert.ToString(acc.GetType());
            string baseValue = Convert.ToString(typeof(DBML_Project.BankAccount));

            if (String.Equals(typeResult, baseValue))
            {
                throw new Exception("Not correct derived type");
            }

            acc.Freeze();

            DTOLayer.BankAccountDTOForStatus presentAccount = new DTOLayer.BankAccountDTOForStatus();
            presentAccount.BankAccountID = acc.BankAccountID;
            presentAccount.Status = acc.Status;
            bankAccountDTOList.Add(presentAccount);

        }

        IEnumerable<System.Xml.Linq.XElement> el = bankAccountDTOList.Select(x =>
                        new System.Xml.Linq.XElement("BankAccountDTOForStatus",
                          new System.Xml.Linq.XElement("BankAccountID", x.BankAccountID),
                          new System.Xml.Linq.XElement("Status", x.Status)
                        ));

        System.Xml.Linq.XElement root = new System.Xml.Linq.XElement("root", el);

        //AccountRepository.UpdateBankAccountUsingParseXML_SP(root);
        AccountRepository.Update();

    } 
```

存储层

```
namespace RepositoryLayer
{
public interface ILijosBankRepository
{
    System.Data.Linq.DataContext Context { get; set; }
    List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID);
    void Update();

}

public class LijosSimpleBankRepository : ILijosBankRepository
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public List<DBML_Project.BankAccount> GetAllAccountsForUser(int userID)
    {
        IQueryable<DBML_Project.BankAccount> queryResultEntities = Context.GetTable<DBML_Project.BankAccount>().Where(p => p.AccountOwnerID == userID);
        return queryResultEntities.ToList();
    }

    public virtual void Update()
    {
        //Context.SubmitChanges();
    }

}

} 
```

领域类

```
namespace DBML_Project
{

public  partial class BankAccount
{
    //Define the domain behaviors
    public virtual void Freeze()
    {
        //Do nothing
    }
}

public class FixedBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenFA";
    }
}

public class SavingsBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenSB";
    }
}  
} 
```

LINQ to SQL 自动生成的类

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
[InheritanceMapping(Code = "Fixed", Type = typeof(FixedBankAccount), IsDefault = true)]
[InheritanceMapping(Code = "Savings", Type = typeof(SavingsBankAccount))]
public partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:09:02.673

简单地说，你不能。存储库实现的唯一目的是与数据库通信。所以数据库技术确实很重要，你应该执行集成测试。

对这段代码进行单元测试是不可能的，因为 LINQ to Objects 是 LINQ to SQL 的超集。您可能有一个绿色单元测试，但在使用真实数据库时仍然会出现运行时异常，因为您在存储库中使用了无法转换为 SQL 的 LINQ 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:04:13.593

Repository 的职责是持久化域对象并根据请求获取它们。即它的工作是获取一个对象并将其反序列化/序列化为某种形式的持久存储。

因此，在这种情况下，存储库的测试必须针对真实存储进行测试，即数据库。即这些是集成测试 - 测试您的类与外部数据库集成。

一旦确定了这一点，客户端/应用程序的其余部分就不必针对真实的数据库工作。他们可以模拟存储库并进行快速的单元测试。您可以假设 GetAccount 在集成测试通过后可以正常工作。

**更多细节：** 通过将 Repository 对象作为 ctor 或方法 arg 传递，您打开了传递虚假或模拟的大门。因此，现在服务测试可以在没有真正的存储库的情况下运行 >> 没有数据库访问 >> 快速测试。

```
public void FreezeAllAccountsForUser(int userId, ILijosBankRepository accountRepository)
{
  // your code as before
}

test ()
{  var mockRepository = new Mock<ILijosBankRepository>();
    var service = // create object containing FreezeAllAccounts...

    service.FreezeAllAccounts(SOME_USER_ID, mockRepository);

    mock.Verify(r => r.GetAllAccountsForUser(SOME_USER_ID);
    mock.Verify(r => r.Update());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T00:36:45.793

您可以通过在数据上下文中使用 IDbSet 接口并为数据上下文类提取接口。面向接口的编程是创建可单元测试代码的关键。

您希望为这些 linq 查询创建单元测试的原因是对逻辑查询进行单元测试。集成测试会受到各种假阴性的影响。数据库未处于正确状态，同时运行其他查询，其他集成测试等。很难将数据库隔离到足以进行可靠集成测试的程度。这就是为什么集成测试经常被忽略的原因。如果我必须选择一个，我想要单元测试......

# php - php postgres 从查询到理论上获取行

> ID：11348693
> 
> 赞同：1
> 
> 时间：2012-07-05T16:32:59.530
> 
> 标签：php, postgresql, optimization, memory, driver

我想知道究竟发生了什么，因为 php 脚本将查询运行到数据库返回数据并且 php 脚本开始获取它们的那一刻。

理论上，我有一个带有巨大表的 Postgre 数据库，谈论 20 多列的 10/20 百万条记录，并且我有一个 php 脚本，它请求将数据库中的所有行放入某个文件中。

**我的知识是：**

*   php 脚本使用 sql 查询运行 pg_query 命令
*   通过 postgres php 驱动程序/扩展查询被传递到数据库
*   数据库完成工作并将结果返回给驱动程序
*   php postgres 驱动程序将结果存储在服务器 RAM 内存中，并将资源 id 返回给引用结果的 php 脚本
*   pg_fetch_row 从 RAM 内存中读取记录

我正在尝试对执行上述工作的 php 代码进行最佳优化。

**问题是：**

*   我的知识正确吗？如果缺少某些内容或我对某些步骤不正确，请纠正我。
*   我怎么知道有多少 RAM 内存分配给数据库结果？如果我的服务器没有足够的内存，这可能很重要。
*   我知道我可以获取单行，然后将其存储到文件中，只要有行就重复这两个步骤，这样我就可以最大限度地减少 php 脚本所需的内存，但是如何影响资源使用的内存呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:09:05.883

PostgreSQL 确实（默认情况下）一次返回所有行。这样做的好处是可以释放服务器端的资源，但代价是客户端可能会出现较大的结果集。

另一种方法是使用一次可以返回一行的游标。一些驱动程序直接支持这一点（可能是[PDO](https://stackoverflow.com/questions/7878138/best-practice-to-iterate-over-result-set-in-postgres-php-pdo)？）或者您可以使用[DECLARE](http://www.postgresql.org/docs/9.1/static/sql-declare.html)和[FETCH](http://www.postgresql.org/docs/9.1/static/sql-fetch.html)

要注意的另一件事是 PostgreSQL 的[COPY](http://www.postgresql.org/docs/9.1/static/sql-copy.html)命令，它可以直接将表或查询转储到文件（假设您不需要太多处理/格式化）。检查您的数据库库是否提供直接访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:16:48.547

PHP脚本在查询执行之后和之前分配的内存量之间的差异将为您提供DB结果分配的内存量。

```
$before = memory_get_usage();
$res = pg_query( $sql );
$after  = memory_get_usage();
$amount = $after - $before //This should be size of $res variable; 
```

# java - 在演示者之间传递控件/值，GWT 模型视图演示者？

> ID：11348700
> 
> 赞同：1
> 
> 时间：2012-07-05T16:33:15.987
> 
> 标签：java, design-patterns, gwt, mvp

这里是菜鸟。在我的一个用例中使用 GWT 实现模型视图演示者模式时，我遇到了这个特定问题。

我刚从 Ray Ryan 的 Google IO 演讲开始，并关注了 Google Developers 网站上的一些文章。我没有使用任何 GWT 附加组件，例如 GWTP 或 MVP4G 或 GIN 或任何其他东西。只是按照 GWT 网站上的联系人示例并尝试为我的案例建模。

这就是问题所在。

我有这样的 AppController onValueChage 方法

```
 public void onValueChange(ValueChangeEvent<String> event) {
   if(token != null){
    presenter = null;

    if(token == "display")
    {

    presenter = new DefaultPresenter(rpcService, eventBus, new DefaultView());
    }
    else if(token == "popup")
    {
    presenter = new PopUpPresenter(rpcService, eventBus, new PopUpView());      
    }
    else if(token == "dialog")
    {
    presenter = new DialogPresenter(rpcService, eventBus, new DialogView());
    }

    if (presenter!= null) {
       presenter.go(container);
     }
    }
} 
```

我的应用程序是这样流动的，首先**显示**，然后在那里进行选择会导致一个**对话框**，然后**对话框**设置一些变量。然后在**对话框**被隐藏后，我需要回到原来的**显示**并继续。但问题是我无法以相同的视图返回到我原来的**DisplayPresenter**，因为每当历史发生变化时，我最终都会创建一个新的演示者实例。

所有以**粗体显示**的东西都是独立的 Presenter，它们扩展了**Presenter** ，它们都有特定的视图。

问题 ？1\. 每次历史发生变化时，帮助我摆脱创建演示者新实例的困境。

1.  MVP 模式中有没有一种方法可以在具有持久值的演示者之间传递控件？

2.  如何在事件触发时在应用控制器内加载演示者的现有实例？

3.  如何在事件触发时在应用控制器内加载演示者的现有实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:31:29.173

关于在演示者之间传递状态信息（问题 #1），检查[Places](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#Places)可能会有所帮助。

# android - 动态选择 TableLayout 中的 tableRow

> ID：11348703
> 
> 赞同：1
> 
> 时间：2012-07-05T16:33:29.160
> 
> 标签：android, xamarin.android, tablelayout, tablerow

我正在动态创建一个包含许多 TableRows 的 Tablelayout，例如：

```
for(int i = 0; i<cont; i++)
                { 
                     id[i] = customers[i].CustomerNumber;

                     //Create a new row to be added.
                     tr = new TableRow(this);

                     //Create text views to be added to the row.
                     tv = new TextView(this);

                     //Put the data into the text view by passing it to a user defined function createView()
                     createView(tr, tv, id[i].ToString());

                     //Add the new row to our tableLayout tl
                     tl.AddView(tr);
                } 
```

这是 createView 代码：

```
private void createView(TableRow tr, TextView t, String viewdata) {

        t.SetText(viewdata, TextView.BufferType.Editable);

       //adjust the porperties of the textView

       //t.SetLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

        //You have to use Android.Graphics.Color not System.ConsoleColor;
        t.SetTextColor(Color.Blue);
        t.SetBackgroundColor(Color.Cyan); 
        t.SetPadding(5, 0, 0, 0);

        tr.SetPadding(0, 1, 0, 1); 
        tr.SetBackgroundColor(Color.Black); 

        tr.AddView(t); // add TextView to row.

   } 
```

我的问题是我想从包含单行中所有内容的 TableLayout 中进行选择，以便能够选择并响应单击事件，以便将其用于进一步的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:40:52.790

更改代码以设置 TableRow Clickable`tr.setClickable(true)`并添加`setOnClickListener`：

```
 private void createView(TableRow tr, TextView t, String viewdata) {

        t.SetText(viewdata, TextView.BufferType.Editable);

       //adjust the porperties of the textView

       //t.SetLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

        //You have to use Android.Graphics.Color not System.ConsoleColor;
        t.SetTextColor(Color.Blue);
        t.SetBackgroundColor(Color.Cyan); 
        t.SetPadding(5, 0, 0, 0);

        tr.SetPadding(0, 1, 0, 1); 
        tr.SetBackgroundColor(Color.Black); 
        tr.setClickable(true);

        tr.setOnClickListener(tablerowOnClickListener);//add OnClickListener Here

        tr.AddView(t); // add TextView to row.

   }
private OnClickListener tablerowOnClickListener = new OnClickListener() {
        public void onClick(View v) {
            //GET TEXT HERE
            String currenttext = ((TextView)v).getText().toString());
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:37:12.857

在表格行上设置点击侦听器。

```
 tr.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            //TODO:
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-21T13:15:25.030

我发现了一些很酷的东西，它工作正常......

```
TableLayout tl=(TableLayout)findViewById(R.id.maintable);

....

TableRow tr1 = new TableRow(this);
tr1.setLayoutParams(newLayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

TextView textview1 = new TextView(this);
textview1.setText(etFirstname.getText());
textview1.setPadding(5, 0, 0, 0);
textview1.setTextColor(Color.YELLOW);
textview1.setBackgroundColor(Color.GREEN);
tr1.addView(textview1);

TextView textview2 = new TextView(this);
textview2.setText(etAge.getText());
//textview2.setText(etAge.getText());
textview2.setPadding(5, 0, 0, 0);
textview2.setTextColor(Color.RED);
textview2.setBackgroundColor(Color.GRAY);
tr1.addView(textview2);

tr1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        TableRow tr1=(TableRow)v;
        TextView tv1= (TextView)tr1.getChildAt(0);

        Toast.makeText(getApplicationContext(),tv1.getText().toString(),Toast.LENGTH_SHORT).show();

    }
});

tl.addView(tr1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-24T18:46:27.597

```
 /************ if table row is dynamic then this method else method 2 is perfect************/
//if we want to applay listener on dynamic tablerow then use this
//sure that perfect 
 TablRowe tr = new TableRow(this);
tr.setClickable(true);
tr.setId(100);// if in loop then add 1 counter with 100 like (100+counter) at end count++ it
 tr.setOnClickListener(this);
 @Override
    public void onClick(View v) 
{
        switch (v.getId())
         {
         case 100: 
               Toast.makeText(getApplicationContext(), "100", Toast.LENGTH_SHORT).show();   
             break;

         case 101:
            Toast.makeText(getApplicationContext(), "101", Toast.LENGTH_SHORT).show();  
             break;
}
/************************** for simple like this ************************/
   TableRow row1 = (TableRow)findViewById(R.id.row1);
row1.setonClickListener(this);
public void onClick(View v)
{
switch (v.getId())
         {
         case R.id.row1: 
           // do work
             break;
          }        
} 
```

# php - 如何在 PHP 中从 Soapclient 结果创建表

> ID：11348704
> 
> 赞同：2
> 
> 时间：2012-07-05T16:33:33.213
> 
> 标签：php, soap, wsdl

我正在尝试使用 php 5.3.x 从 webservice 响应构建一个表。

这是我的 WSDL 的一部分：

```
 <s:element name="CardStatementResponse">
    <s:complexType>
        <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="CardStatementResult" type="tns:CardStatementResult"/>
        </s:sequence>
    </s:complexType>
</s:element>
<s:complexType name="CardStatementResult">
    <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="CardHolder" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="AccountNo" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="Currency" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="MoreTrans" type="s:string"/>
        <s:element minOccurs="1" maxOccurs="1" name="StartBalance" nillable="true" type="s:decimal"/>
        <s:element minOccurs="1" maxOccurs="1" name="EndBalance" nillable="true" type="s:decimal"/>
        <s:element minOccurs="0" maxOccurs="1" name="Transactions" type="tns:ArrayOfTransactionRecord"/>
        <s:element minOccurs="0" maxOccurs="1" name="Delay" type="s:string"/>
    </s:sequence>
</s:complexType>
<s:complexType name="ArrayOfTransactionRecord">
    <s:sequence>
        <s:element minOccurs="0" maxOccurs="unbounded" name="TransactionRecord" nillable="true" type="tns:TransactionRecord"/>
    </s:sequence>
</s:complexType>
<s:complexType name="TransactionRecord">
    <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="STAN" type="s:string"/>
        <s:element minOccurs="1" maxOccurs="1" name="TransactionDate" nillable="true" type="s:dateTime"/>
        <s:element minOccurs="0" maxOccurs="1" name="TranType" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="TranTypeDesc" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="ReferenceNumber" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="ApprovalNumber" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="DebitCredit" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="TranCurr" type="s:string"/>
        <s:element minOccurs="1" maxOccurs="1" name="TranAmount" nillable="true" type="s:decimal"/>
        <s:element minOccurs="1" maxOccurs="1" name="TranActualAmount" nillable="true" type="s:decimal"/>
        <s:element minOccurs="1" maxOccurs="1" name="TranActivityFee" nillable="true" type="s:decimal"/>
        <s:element minOccurs="0" maxOccurs="1" name="AcctCurr" type="s:string"/>
        <s:element minOccurs="1" maxOccurs="1" name="AcctCurrAmount" nillable="true" type="s:decimal"/>
        <s:element minOccurs="1" maxOccurs="1" name="AcctActivityFee" nillable="true" type="s:decimal"/>
        <s:element minOccurs="1" maxOccurs="1" name="AcctProcessFee" nillable="true" type="s:decimal"/>
        <s:element minOccurs="1" maxOccurs="1" name="AcctServiceFee" nillable="true" type="s:decimal"/>
        <s:element minOccurs="0" maxOccurs="1" name="AcqPart" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="DataStorRet" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="CAID" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="CATI" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="CATA" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="MCC" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="ReversalFlag" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="AuthorizationFlag" type="s:string"/>
    </s:sequence>
</s:complexType> 
```

这就是我正在尝试的

```
 $result = $client->CardStatement(array('req' => $parameters));
       $row = $result->Transactions;
        print "
            <div id='demo'>
            <table cellpadding='0' cellspacing='0' border='0' class='display' id='example' width='100%'>
            <thead>
                <tr>
                    <th>Row</th>
                    <th>TransactionDate</th>
                    <th>DebitCredit</th>
                    <th>TranAmount</th>
                    <th>TranActualAmount</th>
                </tr>
            </thead>
            <tbody>";
        foreach ($row as $k => $v) {
            if (($k + 1) % 2 == 0) {
                $grade = 'odd_gradeX';
            } else {
                $grade = 'even_gradeX';
            }
            print "
                <td align='right' class= $grade>" . ($k + 1) . "</td>              
                <td>". $v->TransactionDate. "</td>
                <td align='right'>" . $v->DebitCredit . "</td>
                <td align='right'>" . $v->TranAmount . "</td>
                <td align='right'>" . $v->TranActualAmount . "</td> ";
        }
        print "
            </tbody>
            <tfoot>
                <tr>
                    <th>Row</th>
                    <th>TransactionDate</th>
                    <th>DebitCredit</th>
                    <th>TranAmount</th>
                    <th>TranActualAmount</th>
                </tr>
            </tfoot>
            </table>
         </div>";?> 
```

当 om 尝试访问 Transactions 时出现此错误 `Undefined property: stdClass::$Transactions` ，所以我的问题是如何访问 Transactions 以及如何从中创建表？假设我正在使用 php SoapClient？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:25:10.033

在玩了这个 wsdl 之后，我发现我必须将一个复杂类型称为数组，即使它只有一个元素，所以这就是我所做的：

```
 $result = $client->CardStatement(array('req' => $parameters));
    print "
        <div id='demo'>
        <table cellpadding='0' cellspacing='0' border='0' class='display' id='example' width='100%'>
        <thead>
            <tr>
                <th>Row</th>
                <th>TransactionDate</th>
                <th>DebitCredit</th>
                <th>TranAmount</th>
                <th>TranActualAmount</th>
            </tr>
        </thead>
        <tbody>";
    foreach ($result as $k => $v) {
      $obj = $v->Transactions->TransactionRecord;

      foreach ($obj as $k => $v) {
        if (($k + 1) % 2 == 0) {
            $grade = 'odd_gradeX';
        } else {
            $grade = 'even_gradeX';
        }
        print "
            <td align='right' class= $grade>" . ($k + 1) . "</td>              
            <td>". $v->TransactionDate. "</td>
            <td align='right'>" . $v->DebitCredit . "</td>
            <td align='right'>" . $v->TranAmount . "</td>
            <td align='right'>" . $v->TranActualAmount . "</td> ";
    }
 }
    print "
        </tbody>
        <tfoot>
            <tr>
                <th>Row</th>
                <th>TransactionDate</th>
                <th>DebitCredit</th>
                <th>TranAmount</th>
                <th>TranActualAmount</th>
            </tr>
        </tfoot>
        </table>
     </div>";?> 
```

# facebook - 用户在 Facebook 应用程序中创建的开放图形对象

> ID：11348706
> 
> 赞同：1
> 
> 时间：2012-07-05T16:33:37.613
> 
> 标签：facebook, object, facebook-opengraph, creation

我正在尝试构建一个将在 Facebook 上的 Canvas 中运行的 Facebook 应用程序。我想让用户能够创建自定义的开放图形对象。例如，我希望用户能够进行捐赠桶。标题、描述、所需数量、剩余时间、目标。我希望用户制作这些，然后当有人捐款时，它会发布说“USER_NAME added to thedonation TITLE”

用户可以用这种方式创建对象吗？我所看到的大部分内容都是关于开发人员制作对象和用户对它们进行操作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:47:00.527

Open Graph 对象基本上只是一个 URL，它通过适当的元元素提供相关信息。

那么问题出在哪里？您只需提供一个 URL，该 URL 提供您的用户输入的数据——这可能只包含一个 id 作为 GET 参数，让您的脚本从数据库中读取相关数据并用它填充元元素。

# python - 带有随机点的python中的二维插值

> ID：11348708
> 
> 赞同：1
> 
> 时间：2012-07-05T16:33:40.590
> 
> 标签：python, numpy, scipy

我检查了 scipy 中可用的插值方法，但无法为我的情况找到合适的解决方案。假设我有 100 个点的坐标是随机的，例如，它们的 x 和 y 位置是：

```
x=np.random.rand(100)*100
y=np.random.rand(100)*100
z = f(x,y) #the point value calculated by certain function 
```

现在我想获得一个新的均匀采样坐标的点值 z（xnew 和 y new）

```
xnew = range(100)
ynew = range(100) 
```

我应该如何使用双线性采样来做到这一点？我知道可以逐点进行，例如，找到最近的 4 个随机点，然后进行插值，但是必须有一些更简单的现有函数来做到这一点

多谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:40:58.297

使用`scipy.interpolate.griddata`. 它做你需要的确切事情

```
# griddata expects an ndarray for the interpolant coordinates
interpolants = numpy.array([xnew, ynew])

# defaults to linear interpolation
znew = scipy.interpolate.griddata((x, y), z, interpolants) 
```

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata)

# php - PHP网站的浏览器兼容性问题

> ID：11348711
> 
> 赞同：1
> 
> 时间：2012-07-05T16:33:53.867
> 
> 标签：php, javascript, html, css, wordpress

我有一个网站叫`www.kratosguide.com`.

该网站为大约 90% 的用户按预期工作，但是，我最近收到很多投诉，称该页面在某些浏览器（例如 chrome/firefox/opera）中无法完全加载。

这是有人发给我的页面加载方式的屏幕截图：http: [//i.imgur.com/sqNX4.jpg](http://i.imgur.com/sqNX4.jpg)

似乎只有页眉和页脚正在加载，而内容`index.php`则没有。

[http://www.reddit.com/r/productivity/comments/w1y30/16_habits_you_should_do_everyday/](http://www.reddit.com/r/productivity/comments/w1y30/16_habits_you_should_do_everyday/)

这是一个链接，该链接演示了用户说明上述问题 - （第 4 条评论）。

我的主机无法复制他们的问题，他们说它工作正常。我的朋友不断刷新他的页面缓存，他可以复制错误，但只是间歇性的。

提前致谢。

* *** *编辑：我忘了提到该网站在 WordPress 上运行，而且该网站在每个浏览器中对我来说都很好，这让我很难看出问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:36:51.107

检查控制台。你有一些错误

`Uncaught ReferenceError: jQuery is not defined - 068690ea.84e407.js:24`

可能是由于在 jquery 库之前调用此脚本引起的。

如果无法复制它，就很难说出是什么导致了错误。我会尝试在各种浏览器中加载它，看看我是否可以让它做到这一点。然后查看控制台是否有任何错误并检查 DOM 以查看内容是否加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:39:59.857

是的，我仍然在日志中看到错误。

让我更清楚。

对我来说，网页加载并且 100% 可见，但是当我查看控制台时，我看到了下面显示的内容。这表明您有问题。我的个人设置允许我查看该页面，但使用不同的设置或插件我将无法查看该页面。您需要修复您的 XSS 错误。

**您可以自己重现问题！**

下载chrome（或firefox）然后加载页面，查看控制台，看到报错。

然后修复它。

*原答案如下*

* * *

第一步，修复chrome显示的这些错误。看起来你有一个 XSS 错误。

![在此处输入图像描述](../Images/61067bd9297a01524672afda80aec3ec.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:51:17.807

我在您的页面上看到了 1200 多个未使用的 CSS 元素。尝试优化用户必须下载才能查看您的网站的数据量。我的网站也有类似的问题，我意识到用户必须加载多少内容才能看到我的网站。

我在 Firefox、Chrome、IE7+ 下测试过。我没有遇到任何问题。

您似乎正在使用 WordPress，因此您可能需要检查 WordPress 社区是否存在类似问题。

# c++ - 在编写 MFC 应用程序之前或之后创建卫星 dll 是否更好

> ID：11348725
> 
> 赞同：1
> 
> 时间：2012-07-05T16:34:40.223
> 
> 标签：c++, mfc, resource-dll

我正在开发 MFC`Form`应用程序，我知道我将不得不以多种语言发布它。我计划使用卫星 DLL 来实现这个目标。顺便说一句，我正在使用 Visual Studio 2012。

我已经读过一些书，但我仍然是这个主题的新手。为了创建一个包含`Form`其他语言的附属 DLL，我必须`Form`在新 DLL 项目的资源文件中复制 DLL，为 DLL 指定特定名称，将`/NOENTRY`选项添加到链接器，然后翻译`Form`.

问题是，`Form`在不久的将来可能会发生变化（移动/删除/添加控件）。如果我现在创建附属 DLL，我担心如果我需要更改`Form`.

我的问题是：我应该等到我完成我的应用程序然后创建附属 DLL，还是在 VS 中有一种机制，或者允许我在一个地方对我的 DLL 进行修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:52:41.657

您没有提到您是否使用 .NET - 您的 C++ 应用程序是否受管理？我建议您先编写应用程序，但将其设计为以后可以轻松插入纯资源/卫星 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:05:24.647

我想我会用两种语言做一个完整的应用程序，然后翻译成其他语言。

至于为什么要先做两个而不是一个：因为这样，你几乎被迫保持结构易于被翻译成更多。如果您第一次只做一个，无论您认为自己多么小心，您似乎几乎不可避免地会错过至少一些东西，因此您最终会返回并重写以适应更多语言。无论如何，你可能会做*一点*，但第一次做两个会减少很多。

# css - 为什么用户代理样式表会覆盖我的样式？

> ID：11348727
> 
> 赞同：57
> 
> 时间：2012-07-05T16:34:49.517
> 
> 标签：css, font-size

我想要一个 11 的字体大小，但 Chrome 和 Firefox 给了我 16。当我检查 Chrome 中的元素时，我看到并查看了我看到的计算属性：

```
font-size: 16px;
  table - medium user agent stylesheet
  Style Attribute - 11px
  table - medium user agent stylesheet
  .v11gray - 11px style.css 
```

在 Firefox 的计算样式下，我得到：

```
font-size: 16px
   TABLE[0].style → 11px    element
   .v11gray → 11px  style.css:19 
```

最后三行被删除。为什么我的 css 规则被覆盖？我可以采取哪些步骤来找出答案？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-18T14:22:31.593

这是没有您的代码的外部镜头，但是当我遇到完全相同的问题时的解决方案。[如本问题](https://stackoverflow.com/questions/9308234/user-agent-stylesheet-overriding-my-table-style-twitter-bootstrap)所述，我的 DOCTYPE 语句被错误的击键弄乱了。您可能想要目视检查和/或验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-08T23:27:30.873

这可能听起来很奇怪，但它有助于检查（特别是如果您没有使用 IDE 或没有对 CSS 进行验证的IDE）。您可能需要确保在行尾有 a`;`而不是 a 。因为乍一看，在检查器中语法似乎是正确的，但不是。所以你的用户代理样式表会覆盖它。这是“确保您的打印机已插入”检查之一。它每隔一段时间就会发生在我们所有人身上。`:``your:style;`

# c# - 如何将新的 OperationContract 添加到现有的 ServiceContract

> ID：11348729
> 
> 赞同：0
> 
> 时间：2012-07-05T16:35:09.323
> 
> 标签：c#, web-services

对不起这里的新手问题。

我有一个标有 [ServiceContract] 属性的类，我想向它添加另一个 [OperationContract]。

这很好，但是在我完成之后，我需要 Reference.cs 来反映更改，但它没有。

请问我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:45:26.130

请重新启动您的 Visual Studio，有时 VS 不会反映更改并需要重新启动

# android - 服务如何以及何时在 Android 中自动重启

> ID：11348732
> 
> 赞同：0
> 
> 时间：2012-07-05T16:35:18.787
> 
> 标签：android

根据文档（参考： http: [//developer.android.com/reference/android/app/Service.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle)），android 将自动重新启动因内存不足而被终止的服务。

去引用：

> 请注意，这意味着您的服务大部分时间都在运行，如果内存压力过大，它可能会被系统杀死。如果发生这种情况，系统稍后会尝试重新启动服务。

我的问题是：（1）系统如何决定重启哪些服务？(2) “迟”是什么时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:43:48.167

Android 上的进程以分层结构工作，因此列表顶部的任何服务都会首先重新启动。这也适用于活动进程，因此如果您在前台有正在运行的进程，则该前台服务位于列表顶部，将首先被删除。这几乎是一个堆栈。我认为内存压力较高的进程优先级提高，但谁知道呢，你必须看看野兽的肚子才能看到实际发生了什么。

# activerecord - mysql2销毁错误

> ID：11348733
> 
> 赞同：3
> 
> 时间：2012-07-05T16:35:30.327
> 
> 标签：activerecord, ruby-on-rails-3.2, mysql2

我正在尝试使用类似于的调用来销毁对象

```
MyObject.destroy_all({:user_id => current_user.id, :item_type_id => params[:type_id], :item_id => params[:item_id]}) 
```

Rails 将其生成为 SQL 命令：

```
User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
MyObject Load (0.2ms)  SELECT `my_objects`.* FROM `my_objects` WHERE `my_objects`.`user_id` = 1 AND `my_objects`.`item_type_id` = 3 AND `my_objects`.`item_id` = 9
(0.1ms)  BEGIN 
SQL (0.4ms)  DELETE FROM `my_objects` WHERE `my_objects`.`` = NULL 
```

最后一条 SQL 语句导致此错误（这是有道理的）

```
Mysql2::Error: Unknown column 'my_objects.' in 'where clause': DELETE FROM `my_objects` WHERE `my_objects`.`` = NULL 
```

难道我做错了什么？

Rails 3.2.1 mysql2 0.3.11 mysql 5（我认为）

# jquery - 使用 jquery .attr 选择样式参数

> ID：11348734
> 
> 赞同：0
> 
> 时间：2012-07-05T16:35:34.777
> 
> 标签：jquery, attr

我有以下代码：

```
alert($("div", data).attr("style.background")); 
```

我想在此代码上选择颜色值：

```
<div id = "test"style="font-family: serif; font-size: x-large; font-weight: bold; background: #5e5; text-align: center; margin: 0px; padding: 16px;"> 
```

我不确定用什么代替`style.background`.

任何帮助都会很棒，谢谢！

编辑：

更多代码

```
 success: function (data) {

                    alert(data);
                    alert($("div", data).css("background"));

                }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:36:30.317

尝试使用[`css()`](http://api.jquery.com/css/)而不是`attr()`：

```
 alert($("div", data).css("background")); 
```

要仅获得颜色，您需要通过`background-color`而不是`background`. 这也适用于其他 CSS 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:38:40.090

至于为什么你的 jQuery 选择器`$('div',data)`不起作用，那是因为`data`它是一个字符串，而不是一个 jQuery 对象。要得到你想要的，你需要做：

```
 $(data).filter('div') 
```

这将使您`div`包含在`data`字符串中。

如果您想要的只是颜色，请尝试：

```
$(data).filter('div').css('backgroundColor') 
```

但是，这将返回`rgb(...)`格式中的颜色，因为 jQuery 将所有颜色代码转换为 rgb。

但是，如果您想要`style`属性中使用的实际值，则需要解析属性本身以找到答案：

```
var style = $(data).filter('div').attr('style');
var styleObj = {};
$.each(style.split(';'),function(){
    var rule = this.split(':');
    styleObj[$.trim(rule[0])] = $.trim(rule[1]);
});

alert(styleObj.background) // "#e55" 
```

[**jsFiddle 演示**](http://jsfiddle.net/jackwanders/wN87m/)

# magento - 对可配置产品使用简单的产品定价

> ID：11348735
> 
> 赞同：1
> 
> 时间：2012-07-05T16:35:37.987
> 
> 标签：magento

我为可配置产品定价安装了[Simple Configurable Products](http://www.magentocommerce.com/magento-connect/simple-configurable-products.html)扩展。

在描述中它说我们需要设置：`System->Configuration->SCP Products`. 但是，在后端我看不到这部分。有人可以帮助解决这个问题吗？

我不想使用等级价格，所以这个扩展看起来很完美，但我无法让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:42:55.133

如果 Swapna 关于寻找正确位置的说明没有做到这一点，那么请考虑：

当您安装新模块时，您将看不到配置页面，直到您注销然后重新进入管理面板。试试看。

如果做不到这一点，你能看到模块`System->Configuration->Advanced`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:00:03.483

请进入系统 -> 配置。在左侧查找“SCP”选项卡，您将在其中找到“SCP Config”，单击它将显示“SCP Config”页面。“SCP 产品页面”选项卡有多种选项，可让您相应地更新简单的产品详细信息。

如果您不理解我的解释，请告诉我。

干杯，斯瓦普纳

# android - 具有半透明背景的动画高 fps

> ID：11348749
> 
> 赞同：3
> 
> 时间：2012-07-05T16:36:18.810
> 
> 标签：android, android-animation, frame-rate

我创建了一个具有半透明 ( `#7F00FF00`) 背景的应用程序。

现在下半部分`Activity`是`FrameLayout`我用以下动画设置一个新片段的地方：

```
<translate
    android:fromXDelta="0%"
    android:toXDelta="100%" /> 
```

现在这工作正常，但问题是帧速率。由于半透明背景，它的 fps 很低。但是当我使背景完全透明时，动画会非常流畅。

如何提高此动画的 fps？有没有其他方法可以使背景半透明而不会丢失帧？

[Tegra2 设备上的 Android 4.0]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:33:40.763

[查看此 Google 2012 视频“更糟糕的黄油”@ 54:34](http://www.youtube.com/watch?v=Q8m9sHdyXnE)

尽管 JellyBean 对动画有更流畅的感觉，但这似乎是 Android 尚未优化的事情之一，因为甚至 Chet Haase 和 Romain Guy 都建议在动画时禁用半透明（但告诉它对于静态目的来说很好）。

编辑：[facepalm]所以也许我应该再看几分钟那部电影......

# android - 无法将图片保存在给定位置

> ID：11348762
> 
> 赞同：1
> 
> 时间：2012-07-05T16:37:14.350
> 
> 标签：android, camera

我是android编程的初学者。这是拍摄图像并将其保存在 sdcard 文件夹中的代码。图像保存在图库中，但未保存在我想要的位置。请帮忙...

* * *

```
public class CameraActivity extends Activity {
    /** Called when the activity is first created. */

    Button button1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button1=(Button)findViewById(R.id.button1);

    }

    public void send(View v)
    {
      Intent imageIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

      File imagesFolder = new File(
          Environment.getExternalStorageDirectory(),
          "MyImages");

      imagesFolder.mkdirs(); //

      File image = new File(imagesFolder, "image_001.jpg");

      Uri uriSavedImage = Uri.fromFile(image);

      imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);

      startActivityForResult(imageIntent,0);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:28:03.583

最后我得到了解决方案，修改后的代码是：

```
File image = new File("/sdcard/picture.jpg");
Uri uriSavedImage = Uri.fromFile(image);

intent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage); 

// start the image capture Intent
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:52:21.647

您应该将 a 添加`/`到您的 MyImages 字符串。例如，

```
new File(Environment.getExternalStorageDirectory() + "/MyImages/"); 
```

这应该创建对目录的引用，而不是当前的文件。

# xcode - 一次构建一个元素的数组

> ID：11348768
> 
> 赞同：0
> 
> 时间：2012-07-05T16:37:38.380
> 
> 标签：xcode, cocoa

目前我正在一行中填充一个数组，例如

```
self.monthMonths = [[NSArray alloc] initWithObjects:@"January", @"February", @"March", @"April", @"May", @"June",@"July",@"August",@"September",@"October",@"November",@"December", nil]; 
```

当我想从数据库中提取数据时，一次添加这些元素的语法是什么。我以一年中的月份为例。

```
while([results next]) {
    NSString *months = [results stringForColumn:@"month"];
    self.month = [[NSArray alloc] initWithObjects:@"month",nil];
    //[NSArray 
    NSLog(@"Month: %@",month);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:40:43.677

创建一个 NSMutableArray 并将对象一一添加到其中`addObject`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:41:17.887

您需要改用 NSMutableArray，并调用 -addObject：

# java - GWT 与 PhoneGap 的集成

> ID：11348772
> 
> 赞同：3
> 
> 时间：2012-07-05T16:37:53.677
> 
> 标签：java, javascript, gwt, cordova, mgwt

**编辑**- 我知道在 SO 上有*类似*的问题，但我觉得我的具体问题根本不是重复的。如果您不同意我的观点，请在投票或近距离投票之前引起我的注意！如果你能向我证明我的问题是一个真正的重复，我会自己删除这个问题！

我对 GWT 的理解是，它提供了一个 SDK 和 API，允许您使用 Java 编写代码，并且它生成运行成熟的 Web（或移动 Web）应用程序所需的所有客户端 HTML、CSS 和 JavaScript。

我对 PhoneGap 的理解是，它允许您针对其 JavaScript API 编写代码，并且通过配置，您可以告诉它应该为哪些原生移动平台（Android、iOS、Windows Phone 等）创建原生包装器。因此，您可以使用它“编写一次，多次运行”，将您的 JavaScript 代码转换为原生 Android 应用程序、原生 iOS 应用程序等。

如果这两个假设不正确，请先纠正我！而且，如果对这些假设有任何警告，请告诉我！

假设我对 GWT 和 PhoneGap 的理解或多或少是正确的，我想尝试将它们一起用于一个可用作 (1) 网络应用程序、(2) 移动网络应用程序、(3) Android 应用程序的应用程序(4) 作为 iOS 应用程序。

我想在我的 Ant 构建中“菊花链”这两个，从而将我的纯 Java 代码（通过 GWT）转换为 JavaScript（符合 PhoneGap API），然后第二个构建过程使用 PhoneGap 创建和部署：

*   Java WAR（网络和移动网络应用程序）
*   一个安卓APK
*   一个 iOS 二进制文件（我*相信*这是一个 IPA 文件，但我可能错了）

因此，将这些作为“给定”，这是我的问题：

*   这可能吗？如果不是，为什么？有什么办法可以破解或陪审团一起*强制*解决这个问题？
*   我注意到一个叫做的东西`gwt-phonegap`——我**需要**这个才能让我提出的解决方案起作用，还是这个库只是一个“很高兴拥有”？为什么或者为什么不？
*   我在这里没有考虑其他任何考虑因素吗？其他适合我的库或工具？

**注意：**我*听说*（但不是断言！）Titanium 优于 PhoneGap。然而，钛不是免费的。我很破产。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:05:16.007

有一个开源项目结合 GWT 和 Phonegap 来构建移动应用程序：

mgwt - [http://www.m-gwt.com](http://www.m-gwt.com)

有很多人使用它来构建移动应用程序，并且有很多文档，包括那里的视频，尤其是这个：

[http://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp](http://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp)

# .net - .Net System.Timers.Timer：如果我使用少于 1 毫秒的间隔会发生什么？

> ID：11348773
> 
> 赞同：0
> 
> 时间：2012-07-05T16:37:56.860
> 
> 标签：.net, timer

如果我将 System.Timers.Timer 的时间间隔设置为 .5 会发生什么？

这是我要添加的更多文本，所以愚蠢的过滤器会让我发布这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:41:04.033

通常，什么都没有。通常，Windows 中的计时器只能精确到特定的时间间隔，大约 15 毫秒。任何小于这个值的东西通常只会导致计时器每 14-15 毫秒左右触发一次。

话虽如此，该框架并非仅限于 Windows。在不同的实时操作系统上，您可能会让计时器比每毫秒一次更频繁地引发事件。框架 API 不假定您将处理非实时操作系统的限制，即使实际上（大多数情况下）确实如此。

请注意，在内部，它`System.Timers.Timer`实际上使用 a`System.Threading.Timer`来实现它，它使用[Int32 来表示 period 和 dueTime](http://msdn.microsoft.com/en-us/library/2x96zfy7.aspx)。因此，Windows 版本不可能有非整数计时。框架`Math.Ceiling`在传递的时间间隔上使用，因此您将获得 1 毫秒的时间间隔。话虽这么说，这是一个实现细节，所以一般不会或应该依赖的东西。

# php - 如何显示来自 mySQL 数据库的两个单独表中的值？

> ID：11348774
> 
> 赞同：1
> 
> 时间：2012-07-05T16:38:04.930
> 
> 标签：php, mysql, html-table

我正在尝试使用 foreach 循环从两个单独的表中查看值。用户从下拉列表中选择一个“开始学期”和一个“结束学期”，这两个学期存储在一个名为 $semesterarray 的数组中

```
<table style='width: 75%; text-align: left;' cellpadding = '4'>
<tr bgcolor=#000090>
<th><FONT COLOR = #FFFFFF><b><?php echo $startsem ?></b></th>
<th><FONT COLOR = #FFFFFF><b><?php echo $endsem ?></b></th>
</tr>

// If $semesterarray contains 10 and 11, I want to be able to view the
// courses taken in the 10 semester and the 11 semester under two separate columns.

<?php
function getSemesterDetails($semester) 
{
    $output = "";
    $semA = $semester."reg";
    $query = "SELECT course1,course2,course3 FROM $semA";
    $result = mysql_query($query) or die(mysql_error());

    while ($row = mysql_fetch_array($result))
    {

            // row displays: [course1]=> [course2]=> [course3]=>

            // Add semester code to array Keys to indicate proper semester
            // [course1.11]=> [course2.11]=> [course3.11]=>

            foreach ($row as $key => $value)
            {
                $row[$key.".".$semester] = $value;
                unset($row[$key]);
            }

        $startcourse1 = $row['course1.'.$semester];
        $startcourse2 = $row['course2.'.$semester];
        $startcourse3 = $row['course3.'.$semester];
        $startcoursesarray = array($startcourse1, $startcourse2, $startcourse3);
        $startcourses = implode("<br>", $startcoursesarray);

        $endcourse1 = $row['course1.'.$semester];
        $endcourse2 = $row['course2.'.$semester];
        $endcourse3 = $row['course3.'.$semester];
        $endcoursesarray = array($endcourse1, $endcourse2, $endcourse3);
        $endcourses = implode("<br>", $endcoursesarray);

        echo "<tr bgcolor=#ABB5F6>
        <td>$startcourses</td>
        <td>$endcourses</td>
        </tr>";
    }
}

foreach ($midsemarrayA as $key => $semester)
{
echo getSemesterDetails($semA);
}

?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:48:45.937

这应该足以让您开始：

```
function getSemesterDetails ($semester) {
    $output = "";

    $query = "SELECT course1,course2,course3 FROM $semester";
    $result = mysql_query($query) or die(mysql_error());

    while ($row = mysql_fetch_array($result)) {
            // row displays: [course1]=> [course2]=> [course3]=>

            // Add semester code to array Keys to indicate proper semester
            // [course1.11]=> [course2.11]=> [course3.11]=>

            foreach ($row as $key => $value) {
                $row[$key.".".$semester] = $value;
                unset($row[$key]);
            }

        $startcourse1 = $row['course1.'.$semester];
        $startcourse2 = $row['course2.'.$semester];
        $startcourse3 = $row['course3.'.$semester];
        $startcoursesarray = array($startcourse1, $startcourse2, $startcourse3);
        $startcourses = implode("<br>", $startcoursesarray);

        $endcourse1 = $row['course1.'.$semester];
        $endcourse2 = $row['course2.'.$semester];
        $endcourse3 = $row['course3.'.$semester];
        $endcoursesarray = array($endcourse1, $endcourse2, $endcourse3);
        $endcourses = implode("<br>", $endcoursesarray);

        $output .= "<tr bgcolor=#ABB5F6>
        <td>$startcourses</td>
        <td>$endcourses</td>
        </tr>";
    }

return $output;
}

foreach ($semesterarray as $key => $semester) {
     getSemesterDetails($semester);
} 
```

你会想让它返回一个值数组而不是一个字符串，但是将它转移到一个子例程中应该可以解决问题。

# android - 当用户点击选项菜单项时，只想播放一次音频

> ID：11348778
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:38:48.983
> 
> 标签：android

单击选项菜单项时，我只想播放一次音频。当用户下次点击同一项目时，音频将停止，我认为但找不到任何解决方案帮助我解决我的问题。这是我的代码。当用户交替点击该项目时，音频将交替播放和停止。

```
public boolean onCreateOptionsMenu(Menu menu) 
{
    // TODO Auto-generated method stub
    MenuInflater menuInflater= getMenuInflater();
    menuInflater.inflate(R.menu.menu, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    if (item.getItemId()== R.id.item1)
    {
        Intent intent = new Intent(AthravaShirshaActivity.this, EnglishExpln.class);
        startActivity(intent);
    }
    if(item.getItemId()== R.id.item2)
    {
        MediaPlayer mp= MediaPlayer.create(AthravaShirshaActivity.this, R.raw.mantra);
        mp.start();
        mp.setLooping(false);
        mp.setOnCompletionListener(new OnCompletionListener() 
        {
            @Override
            public void onCompletion(MediaPlayer mp)
            {
                mp.stop();
            }
        });
        item.setIcon(android.R.drawable.ic_media_pause);
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:46:53.770

您可以`mp`在 onCreate() 中公开并初始化它 `MediaPlayer mp= MediaPlayer.create(AthravaShirshaActivity.this, R.raw.mantra);`

现在在`onOptionsItemSelected`

```
if(mp.isPlaying())
         {
             mp.stop();
         mp=null;
             item.setIcon(android.R.drawable.ic_media_play);
         }
         else
         {
                    mp= MediaPlayer.create(AthravaShirshaActivity.this, R.raw.mantra);
            mp.start();
                mp.setLooping(false);
                mp.setOnCompletionListener(new OnCompletionListener() 
                {
                    @Override
                    public void onCompletion(MediaPlayer mp)
                    {
                        mp.stop();
                    }
                });
                item.setIcon(android.R.drawable.ic_media_pause);
         } 
```

# sql - 无法运行具有特殊字符的列名的访问报告

> ID：11348780
> 
> 赞同：1
> 
> 时间：2012-07-05T16:38:51.343
> 
> 标签：sql, sql-server, ms-access, ms-access-2007

我正在尝试在 Access 中运行一个报告，该报告引用了一个命名不佳的列：供应商#。对于那些不熟悉 Access 的人：'#' 是具有特殊含义的保留关键字。我一直在尝试运行报告，每次执行时都会出现一个弹出窗口，询问该列的值：换句话说，它一直将其视为变量名。我尝试了许多名称的变体，包括：[Vendor#]、'Vendor#'、['Vendor#']。我尝试了别名，但后来在引用别名的 where 子句中遇到了同样的问题。不，我无法更改架构以将列重命名为更合适的名称。任何帮助表示赞赏。

这是查询：

```
SELECT * FROM dbo_Vendors
WHERE ((dbo_Vendors.[Vendor#]) = [Forms]![frm_Report_Vendor]![VendorNumber]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:39:30.217

我刚刚测试了一个链接的 sql server 表，该表有一个名为 Vendor# 的列。我可以创建一个报告并且它运行正常。

您可以保存查询并测试查询运行吗？我怀疑您可能有拼写错误的表单参考，因为我已经测试了整个场景并且它对我有用。我不认为这份报告与它有任何关系。

# python - Django：转换为 Postgres 数据库时缺少配置文件表

> ID：11348784
> 
> 赞同：0
> 
> 时间：2012-07-05T16:39:12.540
> 
> 标签：python, django, postgresql

我有一个问题，希望有见识的人可以提供帮助。我的第一个 Django 项目即将完成，我目前正在过渡到 Postgres 数据库，以期通过 Heroku 进行部署。在我运行 python manage.py syncdb 之前，这个过程进行得相当顺利。

```
django.db.utils.DatabaseError: relation “report_userprofile” does not exist
LINE 1: INSERT INTO “report_userprofile” (“user_id”, “first_name”, “… 
```

显然，它没有为 UserProfile 模型创建数据库表。当我尝试运行服务器时，我现在遇到了这个异常：

```
Exception Type: DoesNotExist at /accounts/login/
Exception Value: Site matching query does not exist. 
```

我用于该项目的其他应用程序包括 django-profiles，我在设置时遇到了一些问题，这些问题显然很常见。“缺失手册”站点 - [http://birdhouse.org/blog/2009/06/27/django-profiles/](http://birdhouse.org/blog/2009/06/27/django-profiles/) - 帮助解决了这些问题，但可能导致了当前的问题。

我正在使用那里推荐的 signals.post_save.connect(create_profile, sender=User) 。我正在研究可能出了什么问题，并在 Google Groups 上看到了这篇文章并回答说“如果你在 User 上使用 post_save 信号，你就不能这样做，因为它会导致竞争条件。”我是想知道这是否可能导致问题，显然，最好的解决方法是将这些表放入新数据库并正常运行。

任何有关如何解决此问题的见解将不胜感激。

这是可能导致问题的数据库模型：

```
class UserProfile(models.Model):
user = models.OneToOneField(User, unique=True, related_name="profile")
first_name = models.CharField(max_length=25)
last_name = models.CharField(max_length=35)
email = models.EmailField()
birth_date = models.DateField(blank=True, null=True)
city = models.CharField(max_length=25)
state = models.CharField(max_length=20)
zip_code = models.CharField(max_length=10)
profile_pic = models.ImageField(upload_to='profilepictures', blank=True)

def __unicode__(self):
    return " %s" % (self.user)

def get_absolute_url(self):
    return ('profiles_profile_detail', (), { 'username': self.user.username })
get_absolute_url = models.permalink(get_absolute_url)
signals.post_save.connect(create_profile, sender=User) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:46:56.897

这里似乎有些可疑：

```
INSERT INTO “report_userprofile” (“user_id”, “first_name”, “… 
```

这两个字段是本机 User 模型上的字段，而不是自定义 Profile 模型上的字段。为什么要尝试将这些字段插入到您的 Profile 表中？

是否还有更多代码没有在这里显示？

环顾四周，我看到了一些有趣的替代方法来自动创建个人资料记录：

[http://djangosnippets.org/snippets/500/](http://djangosnippets.org/snippets/500/) http://www.turnkeylinux.org/blog/django-profile

但我知道您使用的技术（在 Birdhouse 中列出）对于我构建的每个 Django 站点都运行良好，所以我对此并不特别怀疑。

# ruby-on-rails-3 - Rails 3 destroy oldest item in database if user owns more than 10

> ID：11348790
> 
> 赞同：0
> 
> 时间：2012-07-05T16:39:33.023
> 
> 标签：ruby-on-rails-3, android-activity, model, sti

I have an Activity stream I have designed using STI in rails 3.

I want to do a check to see if a user has more than 10 activity items on create. When a user creates his 11th Activity in the database, I want it to destroy the oldest record * essentially the first record the user made and so on.* This way I am keeping my database clean of thousands of old useless records.

I am assuming I would start at the model level, but since I dont want to define the "current_user" in the model, it should be in the controller.

Any help would be appreciated to accomplish this task, I am fairly new at these type of more advanced tasks in rails.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:08:10.340

You can hook this logic up in an AR callback. Assuming you kept rails conventions when modeling you classes, and each activity belongs to a user, you can then easily do the following in your `Activity` model:

```
after_save do |record|
  if Activity.where(:user => record.user).count >= 11
    Activity.where(:user => record.user).order('created_at asc').first.destroy
  end
end 
```

I guess this will create three transactions to the db (one for count, another to find the first record, and one to delete it). I wonder if there's a more efficient way to do this, as it will be invoked on every `Activity#save`...

# javascript - 检查数字是否在特定范围内

> ID：11348793
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:40:09.953
> 
> 标签：javascript, algorithm, math

我有一个数字序列-`1,2,3,4,5,....100`

序列按组划分，每个组中有 3 个数字（最后一个除外）-`[1,2,3] [4,5,6] ... [97,98,99] [100]`

我正在尝试查找特定数字的组索引。

例如：

*   数字 1 将具有组索引 0
*   数字 4 将具有组索引 1
*   数字 6 将具有组索引 1

除了遍历所有组之外，找到该组索引的最快方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T16:42:18.417

你需要的是：

```
var groupNo = Math.floor((x-1)/3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:42:38.933

使用除法运算符：

```
y = Math.floor((x-1) / 3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:48:12.973

这是另一种方法：

```
GroupIndex = Ceiling(Number/3) - 1 
```

测试了从 1 到 100 的所有数字。

# java - Spring循环引用示例

> ID：11348794
> 
> 赞同：29
> 
> 时间：2012-07-05T16:40:12.230
> 
> 标签：java, spring, dependency-injection, autowired, circular-reference

我在使用 spring 的一个项目中有一个**循环引用**，我无法修复它，并且在启动时失败并出现以下错误：

```
'org.springframework.security.authenticationManager': Requested bean is currently in creation: Is there an unresolvable circular reference? 
```

我试图在示例项目中以较小的级别重新创建相同的问题（没有我工作项目的所有细节）。然而，我一直无法想出一个合理的场景，即 spring 因错误而失败。这是我所拥有的：

```
public class ClassA {
    @Autowired
    ClassB classB;
}

public class ClassB {
    @Autowired
    ClassC classC;
}

@Component
public class ClassC {
    @Autowired
    ClassA classA;
}

@Configuration
public class Config {
    @Bean
    public ClassA classA() {
        return new ClassA();
    }

    @Bean
    public ClassB classB() {
        return new ClassB();
    }
} 
```

我的项目中有一个类似的场景，但失败了，我期待 spring 也会在我的示例项目中抱怨。但它工作正常！有人可以给我一个简单的例子来说明如何用循环引用错误来打破弹簧吗？

**编辑：**我使用 javax.inject.Provider 解决了这个问题。这两个项目中唯一的其他区别是使用的注解是 javax.inject.Inject 和 javax.annotation.ManagedBean 代替了@Autowired 和@Component。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-05T16:48:04.120

您可以使用`@Lazy`来指示 bean 是延迟创建的，从而打破了自动装配的急切循环。

这个想法是循环中的某些 bean 可以被实例化为代理，并且在真正需要它的那一刻它将被初始化。这意味着，除了作为代理的 bean 之外，所有 bean 都被初始化。第一次使用它会触发配置，因为其他 bean 已经配置，所以不会有问题。

来自 Spring-Jira 中的一个问题：

> @Lazy 注释可以与@Configuration 一起使用，以指示该配置类中的所有bean 都应该被延迟初始化。当然，@Lazy 也可以与单独的 @Bean 方法结合使用，以逐一指示延迟初始化。 [https://jira.springsource.org/browse/SJC-263](https://jira.springsource.org/browse/SJC-263)

这意味着注释你的bean`@Lazy`就足够了。或者，如果您更喜欢只注释配置类，`@Lazy`如下所示：

```
@Configuration
@Lazy
public class Config {
    @Bean
    public ClassA classA() {
        return new ClassA();
    }

    @Bean
    public ClassB classB() {
        return new ClassB();
    }
} 
```

如果您实现 bean 的接口，这将非常有效。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-11-30T06:33:22.287

这是一个旧线程，所以我猜你几乎忘记了这个问题，但我想让你知道这个谜团。我遇到了同样的问题，我的并没有神奇地消失，所以我必须解决这个问题。我会一步一步解决你的问题。

**1、为什么不能重现循环引用异常？**

因为[Spring会照顾它。它创建 bean 并根据需要注入它们](https://stackoverflow.com/questions/3485347/circular-dependency-in-spring)。

**2\. 那你的项目为什么会产生异常呢？**

*   正如@sperumal 所说，如果您使用构造函数注入，Spring 可能会产生循环异常
*   根据日志，您在项目中使用了 Spring Security
*   在 Spring Security 配置中，它们确实使用构造函数注入
*   注入的 bean`authenticationManager`具有循环引用

**3\. 那么为什么异常神秘地消失了呢？**

异常可能发生也可能不发生取决于 bean 的创建顺序。我猜你制作了几个`*context.xml`文件左右，并在 web.xml 中使用类似下面的配置加载它们

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:*-context.xml</param-value>
</context-param> 
```

xml 文件将按`XmlWebApplicationContext`类加载，不保证文件的加载顺序。它只是从文件系统加载文件。问题就在这里。如果类首先加载应用程序上下文文件没有问题，因为您的bean在用于Spring Security的构造注入时已经创建。但是，如果它首先加载 Spring Security 上下文文件，就会出现循环引用问题，因为 Spring 在创建它们之前尝试在构造函数注入中使用您的 bean。

**4.如何解决问题？**

强制 xml 文件的加载顺序。在我的例子中，我使用`<import resource="">`. 即使使用相同的代码，加载顺序也可以根据环境进行更改，因此我建议设置顺序以消除潜在问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-05T16:54:06.027

根据 Spring 文档，有可能获得循环依赖问题或`BeanCurrentlyInCreationException`使用**构造函数注入**。

解决此问题的解决方案是使用 setter 而不是构造函数注入。

参考[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html)。

# actionscript-3 - 使用 getChildByName 使用变量查找按钮

> ID：11348802
> 
> 赞同：0
> 
> 时间：2012-07-05T16:40:45.850
> 
> 标签：actionscript-3, flash

快速提问..我认为:)

我试图在 af 电影剪辑中尝试一个按钮的色调。影片剪辑被称为“容器”，按钮被命名为“陷阱”（我从其他地方的另一个变量中获得）。

这是我的代码

```
function get_muscle(muscle:String, tension:String):void {
    if (tension == 'primary') {
        var getChild:MovieClip = MovieClip(container.getChildByName(muscle));

        greenHue(getChild);
    }

} 
```

可悲的是它不起作用。如果我手动输入 greenHue(container.traps) 它可以正常工作，但是当我尝试这样做时，它不起作用。我也尝试只使用 greenHue(container.muscle) 但这也不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:47:22.903

getChildByName 在容器的子项中搜索具有与您传入的 name 属性相同的元素的元素。

container.traps.name == 肌肉也是如此吗？

还有什么是 container.traps 的类型？您说它是一个按钮，但您尝试将其投射到 MovieClip。

# content-management-system - Typo 3 安装以 URL Not Found 结束

> ID：11348804
> 
> 赞同：1
> 
> 时间：2012-07-05T16:40:57.637
> 
> 标签：content-management-system, typo3

我安装了 Typo 3 版本 4.7.2 并在最后一步中选择了名为“Introduction package”的示例系统（不是“Blank”）。单击“转到您的网站”后，它会将我重定向到显示以下`BASE/get-started/`内容的 URL：

> 未找到
> 
> 在此服务器上未找到请求的 URL BASE/index.php。

你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:15:59.587

我找到了解决方案。这有点令人困惑，因为`.htaccess`他们说

```
# For httpd.conf, use this line instead of the next one:
# RewriteRule ^/TYPO3root/<...>
RewriteRule ^<...> 
```

因此，尽管使用了 .htaccess，但我用 TYPO3root 取消了对据说用于 的行的注释`httpd.conf`，将 TYPO3root 替换为实际值，仅此而已。

它不仅应该在不更改 .htaccess 的情况下开箱即用，而且评论也令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T12:58:27.623

我不知道在 4.7.2 中，但在 6.1.7 中，您可以找到一个名为的文件`_.htaccess`，您可以将其复制`.htaccess`到您的 Web 根目录中。

# ruby-on-rails - Postgresql 无法在正确的路径上被识别

> ID：11348806
> 
> 赞同：0
> 
> 时间：2012-07-05T16:41:03.803
> 
> 标签：ruby-on-rails, database, postgresql, heroku

我正在尝试使用 postgresql 设置一个新应用程序，以便可以使用 Heroku 进行部署。但是，当我使用“rails server”运行应用程序时，欢迎使用 rails 屏幕会出现此错误：

> PG::错误
> 
> 无法连接到服务器：权限被拒绝服务器是否在本地运行并接受 Unix 域套接字“/var/pgsql_socket/.s.PGSQL.5432”上的连接？

我确定这与此处讨论的问题相同：

[升级到 OSX 10.7 Lion 后修复 Postgresql](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

但是John Wang的修复不起作用。

我尝试将 'export PATH=/usr/local/bin:$PATH' 添加到 .bash_profile、.bashrc 和 .zshrc，但这些都不会改变结果。调用 which psql 总是返回 /usr/bin/psql。

我在这里做错了什么？任何帮助将非常感激！

**编辑**

运行 /usr/local/bin/psql 给出相同的错误，运行 echo $PATH 给出：

> /opt/local/bin:/opt/local/sbin:/Users/dave/.rvm/gems/ruby-1.9.3-p194/bin:/Users/dave/.rvm/gems/ruby-1.9.3- p194@global/bin:/Users/dave/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/dave/.rvm/bin:/usr/bin:/bin:/usr/sbin:/ sbin:/usr/local/bin:/usr/X11/bin:/Users/dave/.rvm/bin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:58:35.203

如果直接运行本地安装的 psql 会发生什么？

```
/usr/local/bin/psql ... 
```

如果可行，那么这就是您需要更改的路径。您可以尝试在终端中运行导出，然后`which psql`. 如果那没有选择正确的 psql 然后检查导出是否使用

```
echo $PATH 
```

我不确定您需要更新哪个 .xxrc 文件 - 恐怕手头没有 mac，但至少您会知道该命令会起作用。

哦 - 我保留了几个不同版本的 PostgreSQL，发现设置一些别名很有用：

```
alias psql90='/usr/local/pgsql90/bin/psql -p 5490'
alias psql84='/usr/local/pgsql84/bin/psql -p 5484'
alias pg_dump90=... 
```

* * *

您`$PATH`只是一个要检查的目录列表，以“：”分隔。它开始`/opt/local/bin`而不是`/usr/local/bin`，如果你继续往前看，你会看到`/usr/bin`前面`/usr/local/bin`。所以 - 我们需要做两件事：

1.  找出我们真正想要的 psql
2.  确保我们可以编辑我们的 PATH

首先 - 找到您的 postgresql.conf 文件并检查您正在运行的端口。有三个感兴趣的项目`listen_addresses`：`port`和`unix_socket_directory`。然后我们会看看那里是否有一个套接字。

```
ls -a <your unix_socket_directory> 
```

您应该会看到类似“.s.PGSQL.5432”的“文件”，其中 5432 是配置文件中的端口号。如果没有这样的文件，它就没有运行，是时候让它运行了。如果配置文件中的端口号与 Apple 的现有用法相匹配，您可能需要更改它。

然后找到存在哪些psql安装

```
find /usr -type f -name psql
find /opt -type f -name psql 
```

试着找出你需要哪一个，也许添加 --version 来帮助。

然后，让我们看看如何编辑您的 PATH。无论如何，您必须在设置文件中进行一些更改，所以让我们看看我们是否可以找到该设置的位置。

```
grep -l 'local/bin' ~/.*rc 
```

那应该列出包含 local/bin 的文件名 - 看看他们是否正在编辑您的 PATH。

# asp.net - Safari & IE9 两次触发 Page

> ID：11348808
> 
> 赞同：0
> 
> 时间：2012-07-05T16:41:05.843
> 
> 标签：asp.net, events, safari

我有一个在 chrome 和 mozilla 中运行良好的 asp.net 页面，但是当我在 safari 或 IE9 中加载它时，页面会触发两次。并且当它第二次触发页面时，会话变为空。我不明白为什么 safari & IE9 会触发页面两次。

我的代码如下： -

```
public partial class home : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        FBInstance fb;
        if (!IsPostBack)
        {
            Drivertab(Convert.ToInt32(GlobalVars.DriverType.PAVEMENT));
            Drivertab(Convert.ToInt32(GlobalVars.DriverType.OFFROAD));
            if (Request.Form["signed_request"] != null)
            {

                string payload = Request.Params["signed_request"].Split('.')[1];
                var encoding = new UTF8Encoding();
                var decodedJson = payload.Replace("=", string.Empty).Replace('-', '+').Replace('_', '/');
                var base64JsonArray = Convert.FromBase64String(decodedJson.PadRight(decodedJson.Length + (4 - decodedJson.Length % 4) % 4, '='));
                var json = encoding.GetString(base64JsonArray);
                //Response.Write(json.ToString());
                var o = JObject.Parse(json);
                var lPid = Convert.ToString(o.SelectToken("page.id")).Replace("\"", "");
                var isLiked = Convert.ToString(o.SelectToken("page.liked")).Replace("\"", "");
                var lUserId = Convert.ToString(o.SelectToken("user_id")).Replace("\"", "");

                {
                    string message = string.Empty;
                    DataTable FBUserData = StoredProcedures.ReadFacebookUserID(lUserId, out message);
                    hfIsUserAuthenticated.Value = "false";

                    if (FBUserData != null)
                    {
                        if (FBUserData.Rows.Count > 0)
                        {
                            hfIsUserAuthenticated.Value = "true";
                            fb = new FBInstance();

                            fb.BUserID = Convert.ToInt32(FBUserData.Rows[0]["UserID"]);
                            fb.FBUserID = FBUserData.Rows[0]["FacebookUserID"].ToString();
                            fb.AuthToken = FBUserData.Rows[0]["AuthToken"].ToString();
                            fb.IsAuthenticated = Convert.ToBoolean(FBUserData.Rows[0]["IsActive"]);
                            fb.NoOfVote = 0;
                            Session[GlobalVars.FBSession] = fb;
                            hfFBUserID.Value = fb.FBUserID;
                            RecentVoteDriver(Convert.ToInt32(GlobalVars.DriverType.PAVEMENT), fb);
                            RecentVoteDriver(Convert.ToInt32(GlobalVars.DriverType.OFFROAD), fb);
                        }

                    }
                }
            }

        }
    }

protected void Drivertab(int driverTypeID)
    {

        DataTable dt = StoredProcedures.ReadDriverCard(driverTypeID);
        if (driverTypeID == 1)
        {
            dtDriverCard.DataSource = dt;
            dtDriverCard.DataBind();
        }
        else
        {
            dtDriverCard2.DataSource = dt;
            dtDriverCard2.DataBind();
        }
    }

public void RecentVoteDriver(int DriverTypeID, FBInstance fb)
    {
        DataTable dt = StoredProcedures.ReadRecentVote(fb.BUserID, DriverTypeID);

        if (DriverTypeID == 2)
        {
            if (dt.Rows.Count > 0)
            {
                DateTime VoteDate = Convert.ToDateTime(dt.Rows[0]["VoteDateTime"]);
                if (VoteDate.Date != DateTime.Now.Date)
                {
                    Image1.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver.jpg";
                }
                else
                {
                    DataTable Rdt = StoredProcedures.ReadRecentDriverCard(Convert.ToInt32(dt.Rows[0]["DriverCardID"]));
                    if (Rdt.Rows.Count > 0)
                    {
                        Image1.ImageUrl = GlobalVars.ImageURL + "/drivers/" + Rdt.Rows[0]["ImageURL"].ToString();
                    }
                    else
                    {
                        Image1.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver.jpg";
                    }
                }
            }
            else
            {
                Image1.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver.jpg";
            }

        }
        else
        {
            if (dt.Rows.Count > 0)
            {
                DateTime VoteDate = Convert.ToDateTime(dt.Rows[0]["VoteDateTime"]);
                if (VoteDate.Date != DateTime.Now.Date)
                {
                    Image2.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver1.jpg";
                }
                else
                {
                    DataTable Rdt = StoredProcedures.ReadRecentDriverCard(Convert.ToInt32(dt.Rows[0]["DriverCardID"]));
                    if (Rdt.Rows.Count > 0)
                    {
                        Image2.ImageUrl = GlobalVars.ImageURL + "/drivers/" + Rdt.Rows[0]["ImageURL"].ToString();
                    }
                    else
                    {
                        Image2.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver1.jpg";
                    }
                }
            }
            else
            {
                Image2.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver1.jpg";
            }
        }
    } 
```

有没有人有什么解决办法。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:54:24.437

尝试编辑`RecentVoteDriver`设置此默认值 `Image1.ImageUrl`（是否会发生在某些情况下没有设置 if-else 子句中的图像？）。

## 原因

请查看页面上呈现的 html：

每次出现

```
<img src=""/> 
```

对于某些浏览器，可能会发生双重回发...

如果这是问题，您可以为每个按钮设置一个默认的空白图像来解决它

```
<asp:ImageButton ImageUrl="~/Images/blank.gif"... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:52:02.190

```
public partial class home : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        FBInstance fb;
        if (!IsPostBack)
        {
            Drivertab(Convert.ToInt32(GlobalVars.DriverType.PAVEMENT));
            Drivertab(Convert.ToInt32(GlobalVars.DriverType.OFFROAD));
            if (Request.Form["signed_request"] != null)
            {

                string payload = Request.Params["signed_request"].Split('.')[1];
                var encoding = new UTF8Encoding();
                var decodedJson = payload.Replace("=", string.Empty).Replace('-', '+').Replace('_', '/');
                var base64JsonArray = Convert.FromBase64String(decodedJson.PadRight(decodedJson.Length + (4 - decodedJson.Length % 4) % 4, '='));
                var json = encoding.GetString(base64JsonArray);
                //Response.Write(json.ToString());
                var o = JObject.Parse(json);
                var lPid = Convert.ToString(o.SelectToken("page.id")).Replace("\"", "");
                var isLiked = Convert.ToString(o.SelectToken("page.liked")).Replace("\"", "");
                var lUserId = Convert.ToString(o.SelectToken("user_id")).Replace("\"", "");

                {
                    string message = string.Empty;
                    DataTable FBUserData = StoredProcedures.ReadFacebookUserID(lUserId, out message);
                    hfIsUserAuthenticated.Value = "false";

                    if (FBUserData != null)
                    {
                        if (FBUserData.Rows.Count > 0)
                        {
                            hfIsUserAuthenticated.Value = "true";
                            fb = new FBInstance();

                            fb.BUserID = Convert.ToInt32(FBUserData.Rows[0]["UserID"]);
                            fb.FBUserID = FBUserData.Rows[0]["FacebookUserID"].ToString();
                            fb.AuthToken = FBUserData.Rows[0]["AuthToken"].ToString();
                            fb.IsAuthenticated = Convert.ToBoolean(FBUserData.Rows[0]["IsActive"]);
                            fb.NoOfVote = 0;
                            Session[GlobalVars.FBSession] = fb;
                            hfFBUserID.Value = fb.FBUserID;
                            RecentVoteDriver(Convert.ToInt32(GlobalVars.DriverType.PAVEMENT), fb);
                            RecentVoteDriver(Convert.ToInt32(GlobalVars.DriverType.OFFROAD), fb);
                        }

                    }
                }
            }

        }
    }

protected void Drivertab(int driverTypeID)
    {

        DataTable dt = StoredProcedures.ReadDriverCard(driverTypeID);
        if (driverTypeID == 1)
        {
            dtDriverCard.DataSource = dt;
            dtDriverCard.DataBind();
        }
        else
        {
            dtDriverCard2.DataSource = dt;
            dtDriverCard2.DataBind();
        }
    }

public void RecentVoteDriver(int DriverTypeID, FBInstance fb)
    {
        DataTable dt = StoredProcedures.ReadRecentVote(fb.BUserID, DriverTypeID);

        if (DriverTypeID == 2)
        {
            if (dt.Rows.Count > 0)
            {
                DateTime VoteDate = Convert.ToDateTime(dt.Rows[0]["VoteDateTime"]);
                if (VoteDate.Date != DateTime.Now.Date)
                {
                    Image1.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver.jpg";
                }
                else
                {
                    DataTable Rdt = StoredProcedures.ReadRecentDriverCard(Convert.ToInt32(dt.Rows[0]["DriverCardID"]));
                    if (Rdt.Rows.Count > 0)
                    {
                        Image1.ImageUrl = GlobalVars.ImageURL + "/drivers/" + Rdt.Rows[0]["ImageURL"].ToString();
                    }
                    else
                    {
                        Image1.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver.jpg";
                    }
                }
            }
            else
            {
                Image1.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver.jpg";
            }

        }
        else
        {
            if (dt.Rows.Count > 0)
            {
                DateTime VoteDate = Convert.ToDateTime(dt.Rows[0]["VoteDateTime"]);
                if (VoteDate.Date != DateTime.Now.Date)
                {
                    Image2.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver1.jpg";
                }
                else
                {
                    DataTable Rdt = StoredProcedures.ReadRecentDriverCard(Convert.ToInt32(dt.Rows[0]["DriverCardID"]));
                    if (Rdt.Rows.Count > 0)
                    {
                        Image2.ImageUrl = GlobalVars.ImageURL + "/drivers/" + Rdt.Rows[0]["ImageURL"].ToString();
                    }
                    else
                    {
                        Image2.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver1.jpg";
                    }
                }
            }
            else
            {
                Image2.ImageUrl = GlobalVars.ImageURL + "/DefaultDriver1.jpg";
            }
        }
    } 
```

# iphone - 为什么字符串不等于存储的内容？

> ID：11348809
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:41:11.087
> 
> 标签：iphone, objective-c, ios, ios5

这是一个简单而奇怪的问题......

```
if(tableViewNum == @"One") {
        if ([drinkArray objectAtIndex:0] == currentDate) {
            [updatedArray addObject:drinkArray];
            NSLog(@"MADE THE ELSE1");
        }
        NSLog(@"MADE THE ELSE2");
    }
    else if (tableViewNum == @"Two") {
        if ([[drinkArray objectAtIndex:0] isEqualToString:yesterdayDate])
            [updatedArray addObject:drinkArray];
    } else {
        NSLog(@"MADE THE ELSE %@",tableViewNum);
        [updatedArray addObject:drinkArray];
    } 
```

在第一个 if 语句中，我询问 tableViewNum == @"One"

但即使 tableViewNum 实际上等于 @"One"，我也不会进入 if 语句的那个​​部分

如您所见，最后一个 NSLog 的所有方式都显示为

```
MADE THE ELSE One 
```

但是如果 tableViewNum 真的等于 One 它会通过 if 语句而不是 else 语句代码...?????

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T16:42:14.897

您不能将字符串与`==`运算符进行比较。改用`isEqualToString`：

```
if([tableViewNum isEqualToString:@"One"]) {
    // etc. 
```

……其余条件也一样。你已经在第二个街区做对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:59:31.980

更具体地说，您不应该使用 == 比较任何对象。这仅比较指针。使用 [obj isEqual: otherObj] 或 NSStrings isEqualToString: 如上所述。

# curl - 向 JIRA 进行身份验证时出现 curl 错误

> ID：11348810
> 
> 赞同：3
> 
> 时间：2012-07-05T16:41:13.273
> 
> 标签：curl, jira, curly-braces, jira-plugin

```
curl  -H "Content-Type: application/json; charset=UTF-8" -d '{"username":"admin","password":"admin"}' http://localhost:2990/jira/rest/auth/1/session 
```

我在 DOS 中使用了上述查询，但总是收到以下错误：

> {"errorMessages":["Unexpected character (''' (code 39)): 在 [Source: org.apache.catalina.connector.CoyoteInputStream@1fd9611；行：1，列：2]"]}

我尝试了许多排列和组合..仍然没有用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-25T15:58:09.467

它是 Windows 的东西，尝试`'`用`"`和`"`替换`"""`。

```
curl  -H "Content-Type: application/json; charset=UTF-8" -d "{"""username""":"""admin""","""password""":"""admin"""}" ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:51:30.290

在 OSX 上为我工作。39 是一个单引号字符，但我看不出它是从哪里来的。

# javascript - Raphaël.js 动画 resume() 失败

> ID：11348812
> 
> 赞同：6
> 
> 时间：2012-07-05T16:41:25.333
> 
> 标签：javascript, html, animation, raphael, resume

我有这段代码（[**在 jsfiddle 上**](http://jsfiddle.net/7nGcR/1/)）

```
var paper = new Raphael('holder', 400, 100);

var set = paper.set();

for(var i = 0; i < 10; i++) {
    var circle = paper.circle((i * 30) + 30, 20, 5);
    circle.attr({ fill: '#ff0' });
    circle.animate(Raphael.animation({ transform: 's2,2' }, 2000).repeat('Infinity'));

    set.push(circle);
}

set.hover(function() {
    set.pause();
}, function() {
    set.resume(); // <- things get nasty here
});​ 
```

* * *

现在，当鼠标进入集合时，`set.pause()`会正确调用并且所有动画都会停止。
但是当离开悬停区域时，它不会恢复动画，而是在控制台中出现以下错误：

> 未捕获的类型错误：无法读取未定义的属性“转换”

我不知道为什么会这样；有人能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T20:35:51.217

在 Safari/Firefox 上，悬停一段时间后，我收到此错误消息（使用[https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael.js](https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael.js)处的未压缩源）：

```
`raphael.js`, line 2946: `e.totalOrigin is undefined` 
```

唯一设置的地方`totalOrigin`是`runAnimation`函数：

```
line 3072: function runAnimation(anim, element, percent, status, totalOrigin, times) { 
```

您的代码首先调用`elproto.pause()`（第 3352 行），然后`elproto.resume()`（第 3361 行）。`pause()`将`paused`属性设置为 true，`resume()`删除此属性。但也在删除标志后立即`resume`调用该方法：`status()``paused`

```
var e = animationElements[i];
if (eve("raphael.anim.resume." + this.id, this, e.anim) !== false) {
    delete e.paused;
    this.status(e.anim, e.status);
} 
```

奇怪的正在进行的`elproto.status`方法（第 3323 行）仅由`elproto.setTime()`and调用`elproto.resume()`。这个函数构造了一些复杂的返回值，但没有活动代码使用它的返回值，只有从第 2980 行开始的注释掉的行。

`runAnimation`如果该函数有参数，该函数也会调用该函数`value`：

```
 runAnimation(anim, this, -1, mmin(value, 1)     );
          totalOrigin should be passed here! ^^^ 
```

不幸的是，它没有传递任何东西`totalOrigin`，这就是错误的原因。

我尝试`totalOrigin`根据第 3312 行添加一个参数：

```
 runAnimation(anim, this, -1, mmin(value, 1), this.attr()); 
```

虽然它似乎有效，但它会出错。

作为第二次尝试，我注释掉了整行：

```
 // runAnimation(anim, this, -1, mmin(value, 1)); 
```

结果：它可以工作，但是时间不对，可能动画开始时间应该在某个地方更新。

[http://jsfiddle.net/7nGcR/26/](http://jsfiddle.net/7nGcR/26/) https://raw.github.com/gist/3067995/1e82de48eeacf98697b572efdc74c11a9b1d9d03/gistfile1.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T23:34:08.583

在`elproto.status`方法中，您需要替换（Raphael 2.1.4 中的第 5127-5128 行）

```
runAnimation(anim, this, -1, mmin(value, 1));
return this; 
```

和

```
for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
    e = animationElements[i];
    runAnimation(anim, this, -1, mmin(value, 1), e.totalOrigin, e.repeat);
    return this;
} 
```

# jquery - 动画信息图表 JQuery 与否 JQuery

> ID：11348814
> 
> 赞同：1
> 
> 时间：2012-07-05T16:41:33.977
> 
> 标签：jquery, html, animation

嗨，我有点迷失在这个主题上，不是我的专业领域。我正在尝试通过 JS 制作动画。只是一个指向天空的箭头，并显示类似于动画信息图的趋势。

但我不知道如果我用画布做它还是用 JQuery 为图像制作动画，该怎么开始？尝试循环背景垂直以模仿向上箭头的效果。

如果有人可以为此提出一个好的方法。这将会非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:46:47.530

在我看来，做视差滚动将是一种非常酷的方式。 [在这里查看如何做这样的效果。](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/) 我（和教程）建议使用[Stellar.js](http://markdalgleish.com/projects/stellar.js/)。

它可能不是您正在寻找的“动画”（我建议使用画布亲自显示 javascript 代码），但它会创建一个非常酷的效果，其中背景将以与顶部元素不同的速度滚动它。

# sql-server - 未在 Visio 2010 中使用 SQL Server 2008 进行逆向工程更新的注释

> ID：11348815
> 
> 赞同：3
> 
> 时间：2012-07-05T16:41:40.747
> 
> 标签：sql-server, reverse-engineering, visio

我在visio 2010中进行逆向工程时使用ms sql server作为驱动来构建数据源。只导入表。生成的 ER 图很好，虽然只有部分表是自动添加的，但很好。问题是表格的注释和特定字段即使在手动引用数据后也没有“更新”。它只是保持它们创建时的状态。

我发现“更新”的唯一方法是删除所有组件并重做逆向工程，这显然不应该称为“刷新”。

以前有人遇到过这个问题吗？

PS：“刷新”按钮总是显示visio模型和数据库之间奇怪的“冲突”。例如，即使我根本没有在数据库中做任何事情，它也可能检测到更改。刷新模型向导对话框中有一个“更新数据库”单选按钮（虽然我测试时它总是灰色的）让我想知道它能否以某种方式将 visio 模型上的更改更新到数据库？

# jquery - 使用 jQuery 设计动态元素

> ID：11348817
> 
> 赞同：0
> 
> 时间：2012-07-05T16:41:50.150
> 
> 标签：jquery, dynamic

我`load()`用来将内容插入`div`容器，其中一些内容需要使用**jQuery**进行样式设置。

有什么方法可以使用外部脚本加载内容而无需将`<script>`标签放入内容本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:45:58.327

使用 css 应该可以工作，您只需声明会影响加载数据的 css 样式，然后在渲染时考虑它们，而无需执行任何其他操作

如果你需要用 javascript 来做，你可以使用 load 函数的完整回调：

```
$('#yourDiv').load('content.html', function() {
  $("#yourDiv").find("#someDynamicallyLoadedElement").height(500); // do whatever you want here
}); 
```

# php - 如何禁用302重定向

> ID：11348818
> 
> 赞同：1
> 
> 时间：2012-07-05T16:41:59.837
> 
> 标签：php, zend-framework, redirect, ubuntu

我的网站托管在由带有 LAMP 的 Ubuntu 驱动的 VPS 上。

我不能使用没有`www`.

即输入 url [http://example.com/secondpage](http://example.com/secondpage)将重定向到[http://www.example.com/](http://www.example.com/)。第二页丢失了。但是[http://www.example.com/secondpage](http://www.example.com/secondpage)工作得很好。我尝试更改`.htaccess`，但没有效果。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:45:20.643

你需要在你的内部使用它`.htaccess`：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

如果这不起作用，你可以使用这个：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example.com [nc]
RewriteRule ^(.*)$ http://www.example.com/$1 [r=301,nc] 
```

# powershell - Powershell gci -exclude 被设计破坏的解决方法

> ID：11348823
> 
> 赞同：0
> 
> 时间：2012-07-05T16:42:16.530
> 
> 标签：powershell

这听起来像是一个糟糕的笑话，但显然来自 MS 的天才无法使超级复杂 - 排除 gci 参数工作。通过“天才”设计，它仅适用于文件，而不适用于整个路径。那么如何让它发挥作用。例如如何排除路径包含“Windows”子字符串的所有文件？天真
`gci -exclude "*Windows*" -rec`
不起作用

编辑：谷歌搜索/想通了这个：

```
 | where {$_.DirectoryName -notmatch ".*abcdef.*" } 
```

如果有人知道更好的解决方案，请分享。如果没有，将关闭问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:46:32.527

解决方案是这样的：

```
 gci ./ |Where{ $_.PSPath -notmatch ".*Windows.*"} 
```

顺便说一句，对于猜测此类问题的解决方案很有用的是知道当前对象有哪些方法，为此我使用了 Get-Member。示例输出：

```
PS C:\Users\jh> gci ./ | Get-Member

       TypeName: System.IO.DirectoryInfo

    Name                      MemberType     Definition
    ----                      ----------     ----------
    Mode                      CodeProperty   System.String Mode{get=Mode;}
    Create                    Method         void Create(), void Create(System.Security.AccessControl.DirectorySecurity ...
    CreateObjRef              Method         System.Runtime.Remoting.ObjRef CreateObjRef(type requestedType)
    CreateSubdirectory        Method         System.IO.DirectoryInfo CreateSubdirectory(string path), System.IO.Director...
    Delete                    Method         void Delete(), void Delete(bool recursive)
    EnumerateDirectories      Method         System.Collections.Generic.IEnumerable[System.IO.DirectoryInfo] EnumerateDi...
    EnumerateFiles            Method         System.Collections.Generic.IEnumerable[System.IO.FileInfo] EnumerateFiles()...
    EnumerateFileSystemInfos  Method         System.Collections.Generic.IEnumerable[System.IO.FileSystemInfo] EnumerateF...
    Equals                    Method         bool Equals(System.Object obj)
    GetAccessControl          Method         System.Security.AccessControl.DirectorySecurity GetAccessControl(), System....
    GetDirectories            Method         System.IO.DirectoryInfo[] GetDirectories(), System.IO.DirectoryInfo[] GetDi...
    GetFiles                  Method         System.IO.FileInfo[] GetFiles(string searchPattern), System.IO.FileInfo[] G...
    GetFileSystemInfos        Method         System.IO.FileSystemInfo[] GetFileSystemInfos(string searchPattern), System...
    GetHashCode               Method         int GetHashCode()
    GetLifetimeService        Method         System.Object GetLifetimeService()
    GetObjectData             Method         void GetObjectData(System.Runtime.Serialization.SerializationInfo info, Sys...
    GetType                   Method         type GetType()
    InitializeLifetimeService Method         System.Object InitializeLifetimeService()
    MoveTo                    Method         void MoveTo(string destDirName)
    Refresh                   Method         void Refresh()
    SetAccessControl          Method         void SetAccessControl(System.Security.AccessControl.DirectorySecurity direc...
    ToString                  Method         string ToString()
    PSChildName               NoteProperty   System.String PSChildName=Contacts
    PSDrive                   NoteProperty   System.Management.Automation.PSDriveInfo PSDrive=C
    PSIsContainer             NoteProperty   System.Boolean PSIsContainer=True
    PSParentPath              NoteProperty   System.String PSParentPath=Microsoft.PowerShell.Core\FileSystem::C:\Users\jh
    PSPath                    NoteProperty   System.String PSPath=Microsoft.PowerShell.Core\FileSystem::C:\Users\jh\Cont...
    PSProvider                NoteProperty   System.Management.Automation.ProviderInfo PSProvider=Microsoft.PowerShell.C...
    Attributes                Property       System.IO.FileAttributes Attributes {get;set;}
    CreationTime              Property       datetime CreationTime {get;set;}
    CreationTimeUtc           Property       datetime CreationTimeUtc {get;set;}
    Exists                    Property       bool Exists {get;}
    Extension                 Property       string Extension {get;}
    FullName                  Property       string FullName {get;}
    LastAccessTime            Property       datetime LastAccessTime {get;set;}
    LastAccessTimeUtc         Property       datetime LastAccessTimeUtc {get;set;}
    LastWriteTime             Property       datetime LastWriteTime {get;set;}
    LastWriteTimeUtc          Property       datetime LastWriteTimeUtc {get;set;}
    Name                      Property       string Name {get;}
    Parent                    Property       System.IO.DirectoryInfo Parent {get;}
    Root                      Property       System.IO.DirectoryInfo Root {get;}
    BaseName                  ScriptProperty System.Object BaseName {get=$this.Name;} 
```

# php - XML属性作为php中的数组索引

> ID：11348833
> 
> 赞同：0
> 
> 时间：2012-07-05T16:42:41.260
> 
> 标签：php, simplexml

我有一些 XML，其中包含很多属性信息，这里是一个小例子。

```
<?xml version="1.0" encoding="UTF-8"?>
 <collection xmlns="http://www.loc.gov/MARC21/slim">
  <record>
    <leader>04170npc a22003613u 4500</leader>
    <controlfield tag="001">vtls003932502</controlfield>
    <controlfield tag="003">WlAbNL</controlfield>
    <datafield tag="035" ind1=" " ind2=" ">
        <subfield code="a">(WlAbNL)1002</subfield>
    </datafield>
    <datafield tag="040" ind1=" " ind2=" ">
        <subfield code="a">WlAbNL</subfield>
        <subfield code="b">eng</subfield>
        <subfield code="c">WlAbNL</subfield>
    </datafield>
    <datafield tag="245" ind1="0" ind2="0">
        <subfield code="a">Scott Blair Collection,</subfield>
        <subfield code="f">1910 -</subfield>
    </datafield>
    <datafield tag="653" ind1=" " ind2=" ">
        <subfield code="a">rheology</subfield>
    </datafield>
  </record>
  <record>
    <leader>04229npc a22005893u 4500</leader>
    <controlfield tag="001">vtls003932503</controlfield>
    <datafield tag="035" ind1=" " ind2=" ">
        <subfield code="a">(WlAbNL)1004</subfield>
    </datafield>
    <datafield tag="040" ind1=" " ind2=" ">
       <subfield code="a">WlAbNL</subfield>
       <subfield code="b">eng</subfield>
       <subfield code="c">WlAbNL</subfield>
    </datafield>
    <datafield tag="245" ind1="0" ind2="0">
       <subfield code="a">Celtic Collection,</subfield>
       <subfield code="f">17th century -</subfield>
    </datafield>
    <datafield tag="653" ind1=" " ind2=" ">
        <subfield code="a">Scottish Gaelic language</subfield>
    </datafield>
 </record>
</collection> 
```

目前我有一个 php 脚本，它只加载整个文档

```
$xml = simplexml_load_file("Mapping_coll_wales.xml");
$records = $xml->record; 
```

这将创建一个看起来像这样的记录数组（我已将其缩减为一条记录）

```
 SimpleXMLElement Object
(
[leader] => 04170npc a22003613u 4500
[controlfield] => Array
    (
        [0] => vtls003932502
        [1] => WlAbNL
    )
 [datafield] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [tag] => 035
                        [ind1] =>  
                        [ind2] =>  
                    )

                [subfield] => (WlAbNL)1002
            )
        [1] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [tag] => 040
                        [ind1] =>  
                        [ind2] =>  
                    )

                [subfield] => Array
                    (
                        [0] => WlAbNL
                        [1] => eng
                        [2] => WlAbNL
                    )

            )

        [2] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [tag] => 245
                        [ind1] => 0
                        [ind2] => 0
                    )

                [subfield] => Array
                    (
                        [0] => Scott Blair Collection,
                        [1] => 1910 -
                    )
            )
        [3] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [tag] => 653
                        [ind1] =>  
                        [ind2] =>  
                    )

                [subfield] => rheology
            )
    )

) 
```

目前我只是通过假设它在数组中的位置来拉出我需要的字段，并遍历每条记录（大约有 500 个）

```
for ($i =0; $i <5; $i++) {

echo '<strong>Title</strong> = : ' . $records[$i]->datafield[2]->subfield . '<br />';
echo '<strong>tag</strong>  = :' . $records[$i]->datafield[3]->subfield . '<br />';

echo '<br />------------------------------------------------------------------------<br />';
} 
```

然而，xml 可能包含其他标签，所以我不想依赖它作为索引 2 等的子字段。理想情况下，我希望能够使用类似的东西来调用它

```
echo '<strong>Title</strong> = : ' . $records[$i]->datafield[245][a] . '<br />'; 
```

我确定它相当直截了当，我只是遗漏了一些东西，但是能够将标签加载为数组索引或者有某种方式直接通过其标签获取数据字段并通过其代码获取子字段会很好，因为那不会改变。

希望这是有道理的。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:47:19.510

您可以使用 XPath 匹配满足特定条件的元素。

但是，因为您使用的是命名空间节点，所以您必须在希望使用`xpath()`命名空间路径表达式的每个节点上注册命名空间。

请参见下面的示例，该示例在循环中起作用。

```
$nsp = 'marc';
$nsuri = 'http://www.loc.gov/MARC21/slim';

$records = $xml->record;

foreach($records as $record) {
    $record->registerXPathNamespace($nsp, $nsuri);
    $datafields = $record->xpath('marc:datafield[@tag=245]');
    foreach ($datafields as $datafield) {
        $datafield->registerXPathNamespace($nsp, $nsuri);
        $subfields = $datafield->xpath('marc:subfield[@code="a"]');
        var_dump($subfields);
    }
} 
```

或者，您可以仅使用 xpath 而不是 simplexml 对象访问来向下递归。这里有两种方法可以得到相同的结果：

```
$records = $xml->record;
$records->registerXPathNamespace($nsp, $nsuri);

$tags = array('245', '653');
$codes = array('a', 'f');

// METHOD 1: run an xpath for each tag/code combination
$desiredfields = array();
foreach ($tags as $tag) {
    $desiredsubfields = array();
    foreach($codes as $code) {
        $subfields = $records->xpath("marc:datafield[@tag='$tag']/marc:subfield[@code='$code']");
        $desiredsubfields[$code] = (string) $subfields[0];
    }
    $desiredfields[$tag] = $desiredsubfields;
}

var_export($desiredfields);

// METHOD 2: create a single xpath expression that matches every subfield you want
// Then visit each subfield retrieving tag from parent
$tagexpr = implode(' or ', array_map(function($t){return "@tag='{$t}'";}, $tags));
$codeexpr = implode(' or ', array_map(function($c){return "@code='{$c}'";}, $codes));
$xpath = "marc:datafield[{$tagexpr}]/marc:subfield[{$codeexpr}]";

$desiredfields = array();
$subfields = $records->xpath($xpath);

foreach ($subfields as $subfield) {
    $datafield = $subfield->xpath('..');
    $datafieldcode = (string) $datafield[0]['tag'];
    $desiredfields[$datafieldcode][(string) $subfield['code']] = (string) $subfield;
}

var_export($desiredfields); 
```

# android - 我需要在搜索栏高度中心的搜索栏拇指

> ID：11348836
> 
> 赞同：0
> 
> 时间：2012-07-05T16:43:01.990
> 
> 标签：android

我在我的应用程序中使用了一个搜索栏，并设置了一个自定义可绘制对象（形状）来设置拇指。

以下是我的 drawable(seekbar_circle_normal.xml) 代码片段：

```
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#FDC300" />
        <size
            android:height="16dp"
            android:width="16dp" />
        <padding 
            />
        <corners
            android:bottomLeftRadius="23dp"
            android:bottomRightRadius="23dp"
            android:topLeftRadius="23dp"
            android:topRightRadius="23dp" />
    </shape>
</item>
 <item>
    <shape android:shape="rectangle" >
        <corners
            android:bottomLeftRadius="23dp"
            android:bottomRightRadius="23dp"
            android:topLeftRadius="23dp"
            android:topRightRadius="23dp" />
        <gradient
            android:angle="270"
            android:endColor="#33B7E7"
            android:gradientRadius="1"
            android:startColor="#33B7E7" >
        </gradient>
        <size
            android:height="3dp"
            android:width="3dp" />
        <stroke
            android:width="0.5dp"
            android:color="#1DA6AE" />
    </shape>
</item> 
```

我的xml文件代码如下：

我想将拇指显示在搜索栏的中心。我怎么能证明这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T06:09:31.767

你可以在[这里](https://stackoverflow.com/a/7404421/968526)找到你的答案。你需要设置 android:maxHeight 和 android:minHeight 相同。例如

```
android:maxHeight="3dp"
android:minHeight="3dp" 
```

# objective-c - 在 UITableView 的 header 中添加 UISegmentedControl

> ID：11348837
> 
> 赞同：3
> 
> 时间：2012-07-05T16:43:03.647
> 
> 标签：objective-c, ios, uitableview, uisegmentedcontrol

我正在使用以下代码在 UITableView 中添加 UISegmentedControl。一切正常，除了 UISegmentedControl 根本不响应用户交互。可能是什么问题？

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if(section == 2) {            
        UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0, 320, 44)]; // x,y,width,height    

        NSArray *itemArray = [NSArray arrayWithObjects: @"One", @"Two", nil];
        UISegmentedControl *control = [[UISegmentedControl alloc] initWithItems:itemArray];
        [control setFrame:CGRectMake(60.0, 0, 200.0, 40.0)];
        [control setSegmentedControlStyle:UISegmentedControlStylePlain];
        [control setSelectedSegmentIndex:0];
        [control setEnabled:YES];

        [headerView addSubview:control];
        return headerView;

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T16:49:22.973

您还应该有一个相应的 heightForHeaderInSection 方法，如下所示：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if (section == 2) return 44.f;
    return 0.f;
} 
```

如果没有，控件可能仍会出现，但不会在任何可触摸区域内绘制。

# java - 使用 Maven 预处理将使用 Maven 构建的源代码

> ID：11348840
> 
> 赞同：0
> 
> 时间：2012-07-05T16:43:13.827
> 
> 标签：java, maven, build, preprocessor

我有以下示例源代码：

```
public interface SomeInterface {
  void method1();

  @Support
  void method2();

  @Support(ENVIRONMENT_A)
  void method3();

  @Support({ ENVIRONMENT_A, ENVIRONMENT_B })
  void method4();
} 
```

上述 API 可以在各种环境中使用，其中`A`和`B`（例如，A=Oracle，B=MySQL）。为了传达哪种环境支持哪种方法，我添加`@Support`了具有以下语义的注释：

*   无`@Support`注解表示对应方法不依赖环境
*   “空”`@Support`注解表示所有环境都支持相应的方法
*   参数化`@Support`注释意味着相应的方法仅在作为注释参数提供的环境中受支持。

为了改善与 API 客户端的这种通信，我想编写一个 Maven 插件，可用于 API 预处理。该插件将环境列表作为参数，以弃用所有提供的环境中不支持的所有方法。

一些例子：

*   我运行插件`ENVIRONMENT_A`：对界面没有影响。所有方法都支持`ENVIRONMENT_A`
*   我运行插件`ENVIRONMENT_B`：结果界面应该是这样的

    ```
    public interface SomeInterface {
      void method1();

      @Support
      void method2();

      /* @deprecated - Not supported in ENVIRONMENT_B */
      @Support(ENVIRONMENT_A)
      @Deprecated
      void method3();

      @Support({ ENVIRONMENT_A, ENVIRONMENT_B })
      void method4();
    } 
    ```

*   `ENVIRONMENT_A`我同时使用和运行插件`ENVIRONMENT_B`：

    ```
    public interface SomeInterface {
      void method1();

      @Support
      void method2();

      /* @deprecated - Not supported in both ENVIRONMENT_A *AND* ENVIRONMENT_B */
      @Support(ENVIRONMENT_A)
      @Deprecated
      void method3();

      @Support({ ENVIRONMENT_A, ENVIRONMENT_B })
      void method4();
    } 
    ```

所以换句话说，该插件应该在编译 src/main/java 中的源代码之前，根据上述规则转换 src/main/java 中的所有源代码。原始来源应保持不变，以便随时重现。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:16:59.253

[预处理源代码作为 maven 构建的一部分](https://stackoverflow.com/questions/187550/preprocessing-source-code-as-a-part-of-a-maven-build)似乎是一个答案，但实际上不是，因为它忽略了很多细节：

1.  Maven 可以在构建期间调用外部工具，但您仍然需要一个工具来处理您的源代码。
2.  您打算如何使 Maven Java 编译器远离`src/*/java`. 如果你不正确，它将尝试编译原始源代码和转换后的源代码。
3.  您打算如何编辑原始资源？如果您将原始源代码移动到不同的文件夹，m2e 之类的工具将阻止您在 Eclipse 等中编辑它们，因为它们会读取您的 POM 以确定路径。
4.  开发人员看着代码会很困惑，因为他们习惯了 Maven，而 Maven 说：“src/*/java 中的源代码将被编译并最终出现在工件中”。所以你违反了约定。

# android - 从后台线程访问视图尺寸

> ID：11348849
> 
> 赞同：3
> 
> 时间：2012-07-05T16:44:18.850
> 
> 标签：android, multithreading, user-interface, thread-safety

`View.getWidth()`希望这是一个关于和`View.getHeight()`方法的线程安全的简单问题。

我正在编写一个后台任务，该任务执行给定 View 对象的操作。视图中唯一真正需要的部分是它的维度。但是，当我的任务启动时，视图可能没有经过布局过程，因此它的尺寸设置为 0。任务在 UI 上启动，但在返回到发布结果的 UI 线程（很像`AsyncTask`）。

我想知道从后台线程调用这些 getter 方法会产生什么影响。我知道 UI 工具包被设计为单线程的，所以我担心我可能会冒着发布不安全出版物的风险。

Kcoppock 有一个很好的解决方案，当尺寸已知时，通过在 UI 线程上接收回调来避免这个问题[。](https://stackoverflow.com/a/4406090/525097)

我写了一个小测试来查看这些维度何时可以从后台线程（附在下面）中看到，并且似乎它们与回调同时可用。

当然，我知道这并不能证明任何事情，所以如果有人对 UI 框架有更深入的了解，我将不胜感激。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final ImageView view = new ImageView(this);
    view.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            Log.d("TAG", Thread.currentThread().getName() + ": onGlobalLayout()");
            Log.d("TAG", Thread.currentThread().getName() + ": view dimensions: " + view.getWidth() + "x" + view.getHeight());
        }
    });

    // Bad code follows
    new Thread(new Runnable() {
        @Override
        public void run() {
            while (true) {
                Log.d("TAG", Thread.currentThread().getName() + ": view dimensions: " + view.getWidth() + "x" + view.getHeight());
                try {
                    Thread.sleep(1);
                } catch (InterruptedException ignored) {}
            }
        }
    }).start();

    setContentView(view);
    Log.v("TAG", "Set view as content");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:40:36.540

由于 Android UI 框架设计为在单线程环境中工作，因此它没有任何内部同步，并且所有 View 类都不是线程安全的。这意味着在从 UI 线程设置它们之后，不能保证从后台线程中可以看到`width`和值。`height`您可能会在后台线程中收到陈旧的值或根本没有收到任何正值。有一个[Java 内存模型](http://www.ibm.com/developerworks/library/j-jtp03304/)，它描述了 Java 中的线程如何通过内存进行交互，并说明了您需要做什么才能使变量通过不同的线程可见。

我想您的代码可以在单处理器系统上运行，但在 SMP 上可能会失败。我不能说这是一个严重的问题，但无论如何这段代码在 Java 内存模型方面是不正确的。要修复它，您需要使用修饰符或`width`块或. 您的代码将如下所示：`height``volatile``synchronized``AtomicInteger`

```
...
private volatile int width;
private volatile int height;
...
@Override
public void onGlobalLayout() {
    // here values are published safely
    width = view.getWidth();
    height = view.getHeight();
}
...
new Thread(new Runnable() {
    @Override
    public void run() {
        while (true) {
            // and here they are read
            Log.d("TAG", Thread.currentThread().getName() + ": view dimensions: " + width + "x" + height);
            try {
                Thread.sleep(1);
            } catch (InterruptedException ignored) {}
        }
    }
}).start(); 
```

`volatile`修饰符保证 UI 线程中的任何更改`width`和`height`变量将立即在后台线程中看到，并且此后台线程将接收最新值。

# angularjs - AngularJS：Ember.js 的 CollectionView 等价于什么？

> ID：11348851
> 
> 赞同：0
> 
> 时间：2012-07-05T16:44:24.753
> 
> 标签：angularjs

我目前正在评估一些 JavaScript 框架，现在我正在使用 AngularJS。我想知道如何在 AngularJS 中完成与 Ember.js 的 CollectionView 等效的工作？我似乎找不到我要找的东西，我只需要指出正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:08:08.423

我不确定，但我认为你想要的是[ng-repeat](http://docs.angularjs.org/api/ng.directive%3angRepeat)

# asp.net - Visual Studio 发布/或构建解决方案 ZIP

> ID：11348853
> 
> 赞同：4
> 
> 时间：2012-07-05T16:44:46.937
> 
> 标签：asp.net, .net, visual-studio-2010, zip, post-build-event

右键单击项目文件并单击“发布”后，有没有办法自动压缩/归档整个解决方案？

我在尝试恢复到以前版本的应用程序时遇到了一些问题，因为我忘记在发布后检查所有内容。有些 TFS 很难在给定日期获取应用程序的快照。每次发布或构建时都有一个 ZIP 存档将非常有益。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:09:09.723

如果您正在构建 Web 应用程序，您的网站项目应该有一个选项卡，您可以在其中为不同的构建配置设置“打包/发布 Web”设置。这应该允许您在构建时生成 ZIP 包。

对于大多数开发人员在他们的机器上使用的标准“调试”构建，您不会想要它，但您可能希望将其配置为其他构建配置。

有关该主题的一些不错的 MSDN 读物是：

[ASP.NET Web 应用程序项目部署概述](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28WEBAPPLICATIONPROJECTS.PACKAGEPUBLISHOVERVIEW%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)

[如何：使用 Team Foundation Server Team Build 创建自动生成和部署解决方案](http://msdn.microsoft.com/en-us/library/ff650529.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:14:01.020

通常的做法是在构建服务器端执行此操作。任何持续集成系统都允许在成功构建时执行操作。增加开发人员机器上的构建时间不是一个好习惯，因为它会影响生产力。

# html - kineticJs的transitionTo方法不适用于点击事件

> ID：11348854
> 
> 赞同：0
> 
> 时间：2012-07-05T16:44:47.157
> 
> 标签：html, html5-canvas, kineticjs, html5-animation

我正在使用 kineticJS 的 transitionTo 方法来显示鼠标单击事件时形状的动画旋转。如果我们第一次单击该形状，它可以正常工作，但随后单击它不会旋转该形状。每次单击时，我都想以某个角度显示形状的过渡（旋转）。请让我知道我正在犯的错误以及如何纠正它？

这是我正在使用的代码

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.9.6.js"></script>
    <script>
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 200
        });

        var layer = new Kinetic.Layer({
         x:stage.getWidth()/3 ,
            y: stage.getHeight()/3 
            });

        var rect = new Kinetic.Rect({
          x: 239,
          y: 75,
          width: 100,
          height: 50,
          fill: "#00D2FF",
          stroke: "black",
          strokeWidth: 4,
          centerOffset: [50, 100]
        });

        // add the shape to the layer
        layer.add(rect);

        // add the layer to the stage
        stage.add(layer);

        rect.on("click", function() {

            rect.transitionTo({
            rotation:2*Math.PI,
            duration:1
            });
            stage.draw();
        });
      };

    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:59:23.970

试试这个：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.0.js"></script>
    <script>
      window.onload = function() {
       var angle = 0;
        var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 200
        });

        var layer = new Kinetic.Layer();

        var rect = new Kinetic.Rect({
          x: 239,
          y: 75,
          width: 100,
          height: 50,
          fill: "#00D2FF",
          stroke: "black",
          strokeWidth: 4
        });

        layer.add(rect);

        stage.add(layer);

        rect.on("click", function() {

            angle += 2;

            rect.transitionTo({
            rotation: Math.PI * angle,
            duration:1
            });
        });

      };

    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html> 
```

点击工作得很好，但是你告诉它每次都旋转到同一个角度（为什么它只在第一次点击时产生动画）。我添加了一个变量，以便每次单击它时角度都会增加 360 度。

# sql-server - 如何返回与参数相同的类型

> ID：11348855
> 
> 赞同：3
> 
> 时间：2012-07-05T16:44:56.767
> 
> 标签：sql-server

在 SQL Server 中，我需要[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)用另一个函数包装内置函数。

问题是我需要实现这种行为：

> **返回类型**
> 
> 返回数据类型是日期参数的数据类型[...]

例如，如果我传入 a`datetime`作为参数，则`DATEADD`返回 a `datetime`。如果我传入 a `date`，则`DATEADD`返回 a `date`。

以下示例始终返回`datetime`...

```
create function add_months(@dt date, @interval int) 
   returns datetime
as
begin
   return DATEADD(month, @interval, @dt)
end 
```

如何在 SQL Server 中实现这一点？

***（编辑）***

**语境**

我正在执行从 informix 到 SQL Server 的数据库迁移。数据库部分不是这里的问题，代码才是。我们有数百个程序必须更改，因为其中嵌入了 SQL 查询。这是我试图避免使用的主要原因`DATEADD(MONTH, 1, foo)`。这种**自动**转换虽然在大多数情况下很简单，但在某些情况下可能非常困难。使用 udf，我可以只替换 informix 函数的名称，而无需进行更深入的重构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:09:49.283

重载函数是不可能的。我正试图想办法硬塞`SQL_VARIANT`进去，但我能想到的所有选择都会导致不必要的恶心并发症。我会创建一个接受和返回日期的函数，以及一个接受和返回日期时间的函数，然后调用适当的函数。精度较低的可以调用精度较高的，因此您不必复制代码，例如

```
CREATE FUNCTION dbo.add_months_to_datetime
(@dt DATETIME, @interval INT)
RETURNS DATETIME
AS
BEGIN
  RETURN DATEADD(MONTH, @interval, @dt);
END
GO

CREATE FUNCTION dbo.add_months_to_date
(@dt DATE, @interval INT)
RETURNS DATE
AS
BEGIN
  RETURN dbo.add_months_to_datetime(@dt, @interval);
END
GO 
```

或者，始终使用最高精度（第一个函数），并在呈现数据时担心它是日期还是日期时间。您可以使用内联转换或将其适当地包装在另一个函数中来执行此操作。

**编辑**

或者更好的是，只需用适当的内联 dateadd 调用替换对这个有问题的函数的所有调用。

```
dbo.add_months(foo, 1) 
```

变成：

```
DATEADD(MONTH, 1, foo) 
```

虽然它不像您希望的那样自动，但除了保持输出类型与输入相同的要求外，这还可能会提高某些查询的性能，具体取决于查询中使用这些查询的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:16:34.993

由于 SQL Server 中标量函数的性能不佳，我通常会避免这种情况或使用 Aaron 的技术。

但是，如果您必须使用该语法，则可以使用这样的可憎：

```
create function dbo.add_months(@dt sql_variant, @interval int) 
   returns sql_variant
as
begin
   IF SQL_VARIANT_PROPERTY(@dt, 'BaseType') = 'datetime'
       return DATEADD(month, @interval, CAST(@dt AS DATETIME))
   ELSE IF SQL_VARIANT_PROPERTY(@dt, 'BaseType') = 'date'
       return DATEADD(month, @interval, CAST(@dt AS DATE))
   RETURN null
end

DECLARE @d DATE = '20120705';
DECLARE @dt DATETIME = '20120705 12:30:30';

SELECT dbo.add_months(@d, 1), dbo.add_months(@dt, 1); 
```

您可以在此 SQLFiddle 中看到，现在将数据从 sql_variant 提取到有用的东西中存在问题：[http ://sqlfiddle.com/#!6/f95ba/4](http://sqlfiddle.com/#!6/f95ba/4)

# android - 安卓滚动标签

> ID：11348856
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:44:59.277
> 
> 标签：android, android-layout, android-widget

我想在我的应用程序中滚动 android 选项卡小部件中的选项卡，我使用[此代码](http://blog.uncommons.org/2011/04/18/scrolling-tabs-in-android/) 它适用于 android 2.2 但在 android 4.0 上它显示非常大的空间，如下图所示

![在此处输入图像描述](../Images/84b52925dc901919acf548369bf5ea71.png)

这是我的代码（（水平

```
ScrollView) findViewById(R.id.tabWidget_sv))
                                            .post(new Runnable() {

                                                @Override
                                                public void run() {
                                                    // TODO Auto-generated
                                                    // method stub
                                                    ((HorizontalScrollView) findViewById(R.id.tabWidget_sv))
                                                            .fullScroll(View.FOCUS_RIGHT);
                                                }
                                            }); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:00:27.470

我不确定是什么导致选项卡在 Android 4.0 上无法滚动，但我认为值得一提的是，在 Android 4.0 中，TabActivity 已被弃用，您应该将操作栏用于选项卡。操作栏还具有内置行为，可以在标签开始离开屏幕时为您滚动标签。唯一的缺点是您必须重构您的应用程序以使用 Fragments，如果您想继续支持 Android 2.2，您可能必须使用 Android 支持库。

您可以前往[此处](http://developer.android.com/guide/topics/ui/actionbar.html)了解有关操作栏的更多信息。如果您想在旧版本的 Android（例如 2.2）中使用 Action Bar，我建议您考虑使用 [ActionBarSherlock](http://actionbarsherlock.com/)

# emacs - Emacsclient 获取当前缓冲区？

> ID：11348864
> 
> 赞同：6
> 
> 时间：2012-07-05T16:45:40.570
> 
> 标签：emacs, elisp

当我使用`emacsclient --eval '(current-buffer)'`它时，它会返回`*server*`而不是`current-buffer`on emacs。我可以`*server*`使用`--eval`命令插入和修改，但有没有办法知道让它插入到真正的当前缓冲区？有没有办法传递一个类似的字符串`#<buffer index.html>`并将它变成一个缓冲区对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T17:17:36.283

试试`(window-buffer (selected-window))`。例如，

```
emacsclient --eval '(with-current-buffer (window-buffer (selected-window)) (insert "foo"))' 
```

# php - 使用分组数据

> ID：11348867
> 
> 赞同：0
> 
> 时间：2012-07-05T16:45:44.800
> 
> 标签：php, xml

我在这个上画了一个空白，需要一些帮助。我有一个包含指标的数据库，我正在尝试创建一个折线图。它涉及根据指标的 ID 对记录进行分组或合并，因此我可以循环然后对值进行子循环以生成 XML 以使用 PHP 生成图表。

例如我的记录集：

```
MetricID, Metric Name, Quarter,  Year, Value

1   Total Calls 1   2011-01-01  22403.00

1   Total Calls 2   2011-01-01  22366.00

1   Total Calls 3   2011-01-01  34456.00

1   Total Calls 4   2011-01-01  36456.00

1   Total Calls 1   2012-01-01  38456.00

1   Total Calls 2   2012-01-01  33256.00

1   Total Calls 3   2012-01-01  35456.00

1   Total Calls 4   2012-01-01  30456.00

2   Total Referrals 1   2011-01-01  9668.00

2   Total Referrals 2   2011-01-01  9154.00

2   Total Referrals 3   2011-01-01  10445.00,

2   Total Referrals 4   2011-01-01  12445.00

2   Total Referrals 1   2012-01-01  12845.00

2   Total Referrals 2   2012-01-01  10145.00

2   Total Referrals 3   2012-01-01  10445.00

2   Total Referrals 4   2012-01-01  12445.00 
```

我需要先遍历 Total Calls 以对值进行子循环，然后遍历 Total Referrals，对其值进行子循环。由于列表是可变的，我永远不知道我可能会得到多少个区别度量 ID，从 1 到 4。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:38:53.163

由于没有人回应，这里是一个答案：

```
$i = 0;
while ($row = mysql_fetch_object($result)) {
    if ($i != $row->metricID) {
        print $row->mTitle."<br />";
        $i = $row->metricID;
    }
    print $row->value."<br />";
} 
```

# google-maps - 为什么我在使用 Google 的 Geocoder API 时会出现 OVER_QUERY_LIMIT？

> ID：11348870
> 
> 赞同：0
> 
> 时间：2012-07-05T16:45:56.390
> 
> 标签：google-maps, google-geocoding-api

我有这个应用程序，可以让我输入地址并通过 Google 的地理编码 API 获取 lat/lng。我使用 AJAX 调用创建 Google Geocoder API 调用的 PHP 脚本，它看起来像这样：

```
 $base_url = "http://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=";
    $address = urlencode($addy1 . ' ' . $addy2);
    $url = $base_url.$address; 
```

其中 $addy1 是街道地址，$addy2 是正确格式的城市/州/邮编以进行地理编码。

当我对该 $url 执行 file_get_contents 时，我始终得到一个“状态”=> OVER_QUERY_LIMIT。

我什至没有接近达到每天 2500 个查询的限制。到目前为止，我已经尝试了大概 15 个不同的地址，而昨天我根本没有工作。

顺便说一句，我们从星期一早上开始就遇到了这个问题。我们最近确实将应用程序迁移到了云解决方案。由于云上共享 IP 的性质，我们是否有可能收到 OVER_QUERY_LIMIT？

我对此没有任何其他解决方案。使用 API 密钥以 REQUEST_DENIED 响应结束，因为地理编码 API 不使用 API 密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:01:35.660

从星期一早上开始，我们就一直遇到这个问题。我们最近确实将应用程序迁移到了云解决方案。由于云上共享 IP 的性质，我们是否有可能收到 OVER_QUERY_LIMIT？

这是最有可能的答案。您可以将地理编码移动到客户端吗？

编辑：另一种选择是查看您是否可以获得执行地理编码的服务器的专用 IP 地址。

[2011 年的类似查询](https://stackoverflow.com/questions/6766222/google-maps-v3-api-over-query-limit-but-just-1-request)

# javascript - 正则表达式 javascript 验证

> ID：11348871
> 
> 赞同：0
> 
> 时间：2012-07-05T16:45:56.610
> 
> 标签：javascript, regex

我有以下正在运行的 JavaScript 代码：

```
<script>
function validate(form) {
    // Shortcut to save writing
    var pwd = form.elements.lgps.value;

    // Check length
    if(8 > pwd.length || pwd.length > 16)
        return false;

    // Check for at least 1 lowercase letter
    var rgx = /[a-zA-Z]+/;
    if(!rgx.test(pwd))
        return false;

    // Check for at least 1 digit
    rgx = /\d+/;
    if(!rgx.test(pwd))
        return false;

    // Check for no spaces
    rgx = /\s/;
    if(rgx.test(pwd))
        return false;

    return true;
}
</script> 
```

这是我的表格：

```
<form method="post" action="406.php" language="javascript" 
    name="myform" id="myform" onsubmit="return validate(this);"> 
```

如果上述所有方法均失败，我想添加一条消息警报，并在我的表单中添加另一个字段进行验证。所以基本上我有一个用户名字段和一个密码字段。我希望密码字段的长度在 8 到 20 个字符之间，并且至少包含 1 个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:56:10.097

```
function validatePwd(form) {
    var pwd = form.elements.lgps.value;

    if(8 > pwd.length || pwd.length > 16){
        alert("Your password must be 8-16 characters in length");
        return false;
    }

    var rgx = /[a-zA-Z]+/;
    if(!rgx.test(pwd)){
        alert("Your need at least 1 lowercase letter");
        return false;
    }

    rgx = /\d+/;
    if(!rgx.test(pwd)){
        alert("You need at least 1 digit");
        return false;
    }

    rgx = /\s/;
    if(rgx.test(pwd)){
        alert("You can't have spaces");
        return false;
    }

    return true;
}

function validateUnm(form){
    var unm = form.elements.lgem.value;

    if(3 > unm.length || unm.length > 20){
        alert("Your username must be 3-20 characters in length");
        return false;
    }

    //and more conditions....

    return true;
} 
```

你可以这样称呼它：

```
<form onsubmit="validatePwd(this);validateUnm(this)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:52:53.317

看起来不错，除了第一个正则表达式测试大写和小写之外，只需将 if 语句括起来并添加

```
 alert('Password not right') 
```

在退货声明之前..显然对于每次退货，您都可以相应地更改警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:41:59.537

下面包括一个利用 jQuery 并将验证要求存储到`object`命名的`tests`.

`pass`根据每个属性中声明的测试检查从所需元素提供的值，在本例中为 ID 为 的输入。如果测试通过，则该属性设置为 1 以指示`true`. 如果测试失败，则将该属性设置为 0 以指示`false`.

然后遍历该对象以检查哪些属性通过，哪些属性失败。如果至少一项测试失败，则使用一条`alert()`消息通知用户无效标准。

**HTML：**

```
<input type="text" id="pass" /> 
```

**jQuery：**

```
function validatePassword(pwd) { 
    var errors = [];

    var tests = {
        '- Min/Max Length of 8-16 characters': function(){
            return (pwd.length < 8 || pwd.length > 16 ? 0 : 1);
        }(),
        '- Contains Alpha-numeric characters': function(){
            rgx = /[a-zA-Z]+/;
            return (!rgx.test(pwd) ? 0 : 1);
        }(),
        '- Contains 1 or more Digits': function(){
            rgx = /\d+/;
            return (!rgx.test(pwd) ? 0 : 1);
        }(),
        '- Contains No Spaces': function(){
            rgx = /\s/;
            return (rgx.test(pwd) ? 0 : 1);
        }()
    };

    for(result in tests ){
        if(tests[result] == 0){
            errors.push(result);
        }
    }

    if(errors.length > 0){
                alert('Please correct your password to meet the following criteria:\n' + errors.join('\n'));
    }
}

$(function(){
    $('#pass').blur(function(){
        validatePassword($(this).val());
    });
}); 
```

演示：http: [//jsfiddle.net/Rmm6d/](http://jsfiddle.net/Rmm6d/)

# c# - 具有多个连接的 Lambda 返回强类型对象

> ID：11348877
> 
> 赞同：1
> 
> 时间：2012-07-05T16:46:20.770
> 
> 标签：c#, .net, entity-framework, lambda

这是我正在使用的一组简化的表，描述为类。我正在使用 T4 模板来创建简单的 POCO。 **我已经删除了所有可能混淆问题的类的所有非必要属性**。

```
public class MarketingPlan
{
  public guid MarketingPlanID { get; set; }
  public bool Disabled { get; set; }
  public virtual ICollection<MarketingPlanItem> MarketingPlanItems { get; set; }
}

public partial class MarketingPlanItem
{
    public System.Guid MarketingPlanItemID { get; set; }
    public System.Guid MarketingPlanID { get; set; }
    public System.Guid MarketingPlanItemTypeID { get; set; }
    public bool Disabled { get; set; }
    public Nullable<System.Guid> EmailTemplateID { get; set; }
    public virtual EmailTemplate EmailTemplate { get; set; }
    public virtual MarketingPlanItemType MarketingPlanItemType { get; set; }
}

public partial class EmailTemplate
{
    public System.Guid EmailTemplateID { get; set; }
}

public partial class MarketingPlanItemType
{
    public System.Guid MarketingPlanItemTypeID { get; set; }
} 
```

我尝试创建的强类型结果不需要连接到实体框架上下文。这是我对解决方案的尝试。

```
public MarketingPlan GetMarketingPlanWithItems(Guid marketingPlanID)
{
  var query = 
      this.Context
          .MarketingPlanItems
          .GroupJoin(this.Context.MarketingPlanItemTypes,
                     mpi => mpi.MarketingPlanItemTypeID,
                     mpit => mpit.MarketingPlanItemTypeID,
                     (mpi, mpit) =>
                     {
                       mpi.MarketingPlanItemType = mpit.FirstOrDefault();
                       return mpi;
                     })
          .GroupJoin(this.Context.EmailTemplates,
                     mpi => mpi.EmailTemplateID,
                     et => et.EmailTemplateID,
                     (mpi, et) =>
                     {
                       mpi.EmailTemplate = et.FirstOrDefault();
                       return mpi;
                     })
          .Where(mpi => mpi.Disabled == false);

  var result = 
      this.Context
          .MarketingPlans
          .GroupJoin(query,
                     mp => mp.MarketingPlanID,
                     mpi => mpi.MarketingPlanID,
                     (mp, mpi) =>
                     {
                       mp.MarketingPlanItems = mpi.ToList();
                       return mp;
                     })
          .Where(mp => mp.MarketingPlanID == marketingPlanID)
          .FirstOrDefault();

  return result;
} 
```

现在我意识到我不能在中使用真正的匿名函数，`GroupJoin`因为它会引发以下错误：

> 带有语句体的 lambda 表达式不能转换为表达式树

在这个例子中我是这样编码的，因为如果我`new`是一个强类型的对象，我相信我必须填充我不想做的每个字段。

最终的结果是拥有；a仅`MarketingPlan`填充`MarketingPlanItems`了那些不是的`Disable`，它`EmailTemplate`由 EmailTemplate 或 Null 填充，并且每个 MarketingPlanItem 都填充了它`MarketingPlanItemType`。用于此的 sql 可能看起来像（大致）：

```
SELECT
  mp.*,
  mpi.*,
  mpit.*,
  et.*
FROM
  MarketingPlan mp
  LEFT JOIN MarketingPlanItem mpi 
    on mp.MarketingPlanID = mpi.MarketingPlanID 
  INNER JOIN MarketingPlanItemType mpit 
    on mpi.MarketingPlanItemTypeID = mpit.MarketingPlanItemTypeID
  LEFT JOIN EmailTemplate et
    on mpi.EmailTemplateID = et.EmailTemplateID 
```

有没有办法在 Entity Framework 中使用 Lambda 完成此操作，而无需对数据库执行多个请求？

**更新 1**

```
public MarketingPlan GetMarketingPlanWithItems(Guid marketingPlanID)
{
  MarketingPlan result = null;

  var query = this.Context.MarketingPlanItems
                          .Include("MarketingPlan")
                          .Include("MarketingPlanItemType")
                          .Include("EmailTemplate")
                          .Include("EmailTemplate.EmailTemplateCategory")
                          .Where(mp => !mp.Disabled
                                       && !mp.MarketingPlan.Disabled
                                       && mp.MarketingPlanID == marketingPlanID)
                          .ToList();

  var query2 = query.FirstOrDefault();

  if (query2 != null)
  {
    result = query2.MarketingPlan;
    result.MarketingPlanItems = query;
  }

  return result;
} 
```

这最终返回了我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:38:03.063

你不能只退回计划项目吗？

如：

```
var items = this.Context.MarketingPlanItems
            .Where(x => !x.Disabled && !x.MarketingPlan.Disabled) 
```

返回的每个项目都已经有一个关联的电子邮件模板。只需将其用作`item.EmailTemplate`，无需手动连接。

为此，您可以最终按您自己`item.MarketingPlan.MarketingPlanID`的`Dictionary<MarketingPlan, IList<MarketingPlanItem>>`或自定义`Type`的方式进行分组，它代表每个计划及其启用的项目，而实际上不需要创建任何新实体。

为什么不利用 ORM 为您解决关系？当心 SELECT N+1 问题，并确保 EF 正在获取所有关联实体。比如使用：

```
this.Context.MarketingPlanItems
    .Include(i => i.MarketingPlan)
    .Include(i => i.EmailTemplate) 
```

您还可以在您的`MarketingPlan`类型上编写一个扩展方法，以返回一个返回启用项的表达式，并将其与 Linq 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:37:19.390

如果我没记错的话，您想为 MarketingPlans 加载相关子项。

为什么不使用 Include()？使用这样的东西：

```
this.Context.MarketingPlans.Include("MarketingPlanItems.EmailTemplates") 
```

# javascript - 修改用于验证 URL 的正则表达式以允许 IP 地址

> ID：11348878
> 
> 赞同：2
> 
> 时间：2012-07-05T16:46:24.503
> 
> 标签：javascript, regex

为我工作的开发人员编写了一个正则表达式，用于在用户输入 url 时检查有效 url。到目前为止，它运行得非常好，除了它不能识别 IP 地址。

```
url = url.match(/(http\:\/\/)?[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\S*)?/) 
```

正确的：

```
Given: http://www.mywebsite.com/index.cfm?do=something
Result: http://www.mywebsite.com/index.cfm?do=something 
```

不正确：

```
Given: http://64.200.10.50/index.cfm?do=something
Result: http://index.cfm?do=something

Should be: http://64.200.10.50/index.cfm?do=something 
```

我将如何修改正则表达式以考虑 IP 地址？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:50:30.633

简单的解决方案：只允许除 / 和 https:// 和第一个 / 之间的空格之外的所有内容。这样，您还将支持单级域名、ipv6 地址等

```
/^https?\:\/\/[^\/\s]+(\/.*)?$/ 
```

# iis - IIS 7 将默认网站重定向到自定义页面

> ID：11348879
> 
> 赞同：-1
> 
> 时间：2012-07-05T16:46:25.487
> 
> 标签：iis, iis-7, webserver, windows-server-2008

我们有一个在 IIS 7 上设置的网站，并试图用新网站替换它。

旧站点使用自定义文件作为主页，称为 WN-main.asp

新站点不再使用 ASP，我们希望使用常规 index.html 作为主文件。但是，当我们访问该网站时，它会不断尝试将我们的 .com 重定向到 .com/WN-main.asp

在 IIS“默认文档”设置中，我们在顶部有 index.html，而 WN-main.asp 在列表中无处可寻（它从未存在过）。这个重定向到底在 IIS 中的什么位置？:)

我们还从根目录中删除了 web.config 文件，并将整个旧网站放在一个子目录中。以及重新启动IIS。此重定向所在的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:54:05.223

我们不确定最终是什么问题 - 不知何故，旧主页可能缓存在服务器上，并且页面本身重定向到 /WN-main.asp 页面......即使服务器不应该一直在缓存任何东西，我们最初已经检查过多次。在玩了很多设置之后，它突然开始工作了！微软。我们禁用和启用 asp 和 .net 的事实可能有所帮助，但我不确定……至少它现在可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:12:47.090

在 IIS 中，您可以将设置配置到网站以外的其他级别，例如，定义服务器所有站点设置的 machine.config 文件。您网站的最终配置不仅会使用您的 web.config，还会使用这些其他父级配置。

检查这些文件以查看是否有任何定义错误`<defaultDocument>`：

```
Server-level configuration is stored in the following configuration files:    
- Machine.config. This file is located in %windir%\Microsoft.NET\Framework\framework_version\CONFIG.    
- Root Web.config for the .NET Framework. This file is located in %windir%\Microsoft.NET\Framework\framework_version\CONFIG.    
- ApplicationHost.config. This file is located in %windir%\system32\inetsrv\config.

Site, application, and virtual and physical directory configuration can be stored in one of the following locations:    
- A server-level configuration file. When configuration for a site, application, directory, or URL is stored in a server-level configuration file, you must use a location tag to specify the site, application, directory, or URL to which the configuration applies.    
- A parent-level Web.config file. When configuration for an application, directory, or URL is stored in a parent-level configuration file, you must use a location tag to specify the child at which the configuration applies.     
- The Web.config file for the site, the application, or the directory. When you configure settings for an application, directory, or URL, the configuration is stored in the same directory as the site, application, or directory. You do not need to use location tags. 
```

摘自：[在 IIS7 中使用配置文件](http://technet.microsoft.com/en-us/library/cc754617%28v=ws.10%29.aspx)

# biopython - Biopython——一次读取固定数量的 seq_records

> ID：11348880
> 
> 赞同：0
> 
> 时间：2012-07-05T16:46:28.590
> 
> 标签：biopython, fastq

我构建了一些从 fastq 文件中检索 PHRED 分数的代码，将它们全部放入一个列表中，然后将列表传递给另一个函数。它看起来像这样：

```
def PHRED_get():
    temp_scores = []
    all_scores = []
    fastq_location
    print("Building PHRED score bins...")
    for seq_record in SeqIO.parse(fastq_location, "fastq"):
        temp_scores = seq_record.letter_annotations
        temp_scores = temp_scores['phred_quality']
        all_scores.append(temp_scores)
    all_scores = list(itertools.chain(*all_scores))
    score_bin_maker(all_scores) 
```

问题是这个循环会一直持续到所有的 seq_records 都被搜索并检索到相应的 PHRED 分数。为了更加保守 RAM，我希望有一些代码一次读取较少数量的 seq_records（例如 100 个），然后将它们各自的质量分数弹出到我正在进行的 uberlist 中。然后它将从接下来的 100 个 seq_records 中获取信息并再次执行循环。我无法理解如何完成这项工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T17:26:42.657

***简单***：保留一个计数器，当它达到 100 时，退出循环。或者其他一些早期停止条件也`if len(temp_scores) > 1000: break`可以工作。

***优雅***：使用 itertools.islice 从迭代器中获取前 100 条记录，

```
import itertools

def PHRED_get():
    temp_scores = []
    all_scores = []
    fastq_location
    print("Building PHRED score bins...")
    for seq_record in itertools.islice(SeqIO.parse(fastq_location, "fastq"), 100):
        temp_scores = seq_record.letter_annotations
        temp_scores = temp_scores['phred_quality']
        all_scores.append(temp_scores)
    all_scores = list(itertools.chain(*all_scores))
    score_bin_maker(all_scores) 
```

# tooltwist - 未找到 ToolTwist 请求处理程序或导航点

> ID：11348882
> 
> 赞同：0
> 
> 时间：2012-07-05T16:46:35.063
> 
> 标签：tooltwist

我正在服务器上手动设置 ToolTwist webapp，一切正常，除了每次调用请求处理程序时，我都会收到错误回复和 catalina.out 中的以下错误。

> 2012-07-05 09:35:03,680 ERROR RoutingUIM - ERROR ERROR ERROR ERROR ERROR 错误
> 2012-07-05 09:35:03,680 错误 RoutingUIM - 未知请求处理程序：op=myproject.widgets.selectName.selectName

我检查了日志文件以确保扩展项目正在加载，并且导航点正在加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:06:24.043

ToolTwist 服务器能够作为配置选项从一个项目切换到另一个项目。这简化了开发，开发人员可能会间歇性地处理多个项目，并且不想设置多个 Tomcat 服务器。

同时，开发人员不希望一个项目的页面受到来自另一个项目的导航点或请求处理程序的影响。

为了保持项目分离，tooltwist.conf 为每个定义的 Web 应用程序都有一个名为“mainProject”的参数。如果开发人员在配置文件中切换 Web 应用程序，那么服务器将自动被限制为该新 Web 应用程序的导航点和请求处理程序。这

因此，如果您的网站没有找到请求处理程序，但您可以在文件系统上看到它们定义，那么您的 mainProject 可能在 tooltwist.conf 中设置不正确。

```
<webapp>
    <name>webdesign</name>
    <mainProject>ttdemo</mainProject>
    ...
<webapp> 
```

请注意，主项目包含的项目的导航点和请求处理程序（在其 project.xml 中定义）也可用。

# f# - F# 数字关联

> ID：11348883
> 
> 赞同：2
> 
> 时间：2012-07-05T16:46:39.727
> 
> 标签：f#, numeric

我有一个自定义类型的数字关联，如下所示：

```
let DiffNumerics =
{ new INumeric<Diff> with
      member op.Zero = C 0.0
      member op.One = C 1.0
      member op.Add(a,b) = a + b
      member op.Subtract(a,b) = a - b
      member op.Multiply(a,b) = a * b
      member ops.Negate(a) = Diff.negate a
      member ops.Abs(a) = Diff.abs a
      member ops.Equals(a, b) = ((=) a b)
      member ops.Compare(a, b) = Diff.compare a b
      member ops.Sign(a) = int (Diff.sign a).Val
      member ops.ToString(x,fmt,fmtprovider) =  failwith "not implemented"
      member ops.Parse(s,numstyle,fmtprovider) = failwith "not implemented"
}

GlobalAssociations.RegisterNumericAssociation(DiffNumerics) 
```

它在 f# 交互中运行良好，但在我运行时崩溃，因为 .ElementOps 未正确填充这些类型的矩阵。任何想法为什么会这样？

编辑：

在 fsi 中，代码

```
let A = dmatrix [[Diff.C 1.;Diff.C 2.;Diff.C 3.];[Diff.C 4.;Diff.C 5.;Diff.C 6.]]
let B = matrix [[1.;2.;3.];[4.;5.;6.]] 
```

给出：

```
> A.ElementOps;;
val it : INumeric<Diff> = FSI_0003.NewAD+DiffNumerics@258
> B.ElementOps;;
val it : INumeric<float> = Microsoft.FSharp.Math.Instances+FloatNumerics@115
> 
```

在调试器 A.ElementOps 中显示：

```
'(A).ElementOps' threw an exception of type 'System.NotSupportedException' 
```

并且，对于 B 矩阵：

```
Microsoft.FSharp.Math.Instances+FloatNumerics@115 
```

所以不知何故 DiffNumerics 并没有进入编译程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:59:52.787

不是答案 - 但它解决了问题。

GlobalAssociations.RegisterNumericAssociation(DiffNumerics) 不知何故没有运行。如果我添加一个运行它的初始化函数 - 它会失败并出现错误，说 DiffNumerics 已经加载，但此后我就没事了。如果我不调用 initialisation() （失败，因为它说它已经加载）然后它没有加载并且 ElementOps 返回上面的错误。

没时间弄清楚到底发生了什么……

ñ

# c# - XML 解析为 c# 对象

> ID：11348886
> 
> 赞同：2
> 
> 时间：2012-07-05T16:46:44.410
> 
> 标签：c#, asp.net, linq-to-sql, xml-parsing

我正在尝试做一个 XML 解析器，它将使用 REST 服务从网站中提取数据，通信协议是 HTTP，我得到的数据是 XML 格式，在对不同地址的多次请求后，我得到了我需要的数据服务器。我需要将这些数据解析为 c# 对象，以便最近可以使用它们。服务器上的信息分为 5 个级别（我愿意只做其中的 4 个） 1-供应商列表 2-组列表 3-子组列表 4-产品列表 5-有关完整信息的列表产品 达到第 4 级后，我需要检查产品是否在我的数据库中，或者它是否有不同的详细信息，以便我可以添加或更新它。

通过对服务器的“GET”请求，我得到具有这种结构的 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
     <vendors>
              <vendor>
                      <id>someID</id>
                      <name>someName</name>
              </vendor>
              <vendor>
                      <id>someId1</id>
                      <name>somename1</name>
              </vendor>
     </vendors> 
```

组的 XML 结构是相同的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<groups vendor_id="43153185318">
         <group>
               <id>someID</id>
               <name>someName</name>
         </group>
         <group>
               <id>someId1</id>
               <name>somename1</name>
         </group> 
```

XML 结构对于子组和产品是类比的，除了对于产品我有更多的元素，如目录编号、价格等。

我的课程如下：

```
public class VendorList
    {
            public List<Vendor> vendor_list { get; set; }
            public VendorList()
            {
                    vendor_list = new List<Vendor>();
            }
    }
    public class Vendor
    {
            public string id { get; set; }
            public string name { get; set; }
            public List<Group> groups_list { get; set; }
            public Vendor()
            {
                    id = "N/A";
                    name = "N/A";
                    groups_list = new List<Group>();
            }
    }
    public class Group
    {
            public string id { get; set; }
            public string name { get; set; }
            public List<SubGroup> subgroup_list { get; set; }
            public Group()
            {
                    id = "N/A";
                    name = "N/A";
                    subgroup_list = new List<SubGroup>();
            }
    }
    public class SubGroup
    {
            public string id { get; set; }
            public string name { get; set; }
            public List<Product> product_list { get; set; }
            public SubGroup()
            {
                    id = "N/A";
                    name = "N/A";
                    product_list = new List<Product>();
            }
    }
    public class Product
    {
            public string available { get; set; }
            public string catalog_num { get; set; }
            public string code { get; set; }
            public string currency { get; set; }
            public string description { get; set; }
            public string haracteristics { get; set; }
            public string product_id { get; set; }
            public string model { get; set; }
            public string name { get; set; }
            public string price { get; set; }
            public string price_dds { get; set; }
            public string picture_url { get; set; }
            public Product()
            {
                    available = "N/A";
                    catalog_num = "N/A";
                    code = "N/A";
                    currency = "N/A";
                    description = "N/A";
                    haracteristics = "N/A";
                    product_id = "N/A";
                    model = "N/A";
                    name = "N/A";
                    price = "N/A";
                    price_dds = "N/A";
                    picture_url = "N/A";
            }
    } 
```

和这样的 Parser 方法：

```
 public static void FillVendor(string url)
            {
                    string result = GetXMLstream(url);
                    var vendors = new VendorList();
                    XmlDocument doc = new XmlDocument();
                    doc.Load(new StringReader(result));
                    doc.Save(@"D:/proba/proba.xml");
                    XDocument d = XDocument.Load(@"D:/proba/proba.xml");
                    vendors.vendor_list = (from c in d.Descendants("vendor")
                                                               select new Vendor()
                                                               {
                                                                       id = c.Element("id").Value,
                                                                       name = c.Element("name").Value
                                                               }).ToList<Vendor>();
                    foreach (Vendor v in vendors.vendor_list)
                    {
                            FillGroups(v.id);
                    }
            }
            public static void FillGroups(string vendorID)
            {
                    string url = "main address" + vendorID;
                    string result = GetXMLstream(url);
                    var group = new Vendor();
                    XmlDocument doc = new XmlDocument();
                    doc.Load(new StringReader(result));
                    doc.Save(@"D:/proba/proba1.xml");
                    XDocument d = XDocument.Load(@"D:/proba/proba1.xml");
                    group.groups_list = (from g in d.Descendants("group")
                                                             select new Group()
                                                             {
                                                                     id = g.Element("id").Value,
                                                                     name = g.Element("name").Value
                                                             }).ToList<Group>();
                    foreach (Group g in group.groups_list)
                    {
                            FillSubGroup(vendorID, g.id);
                    }
            }
            public static void FillSubGroup(string vendorID, string groupID)
            {
                    string url = "main address" + vendorID+"/"+groupID;
                    string result = GetXMLstream(url);
                    var subgroup = new Group();
                    XmlDocument doc = new XmlDocument();
                    doc.Load(new StringReader(result));
                    doc.Save(@"D:/proba/proba2.xml");
                    XDocument d = XDocument.Load(@"D:/proba/proba2.xml");
                    subgroup.subgroup_list = (from g in d.Descendants("subgroup")
                                                             select new SubGroup()
                                                             {
                                                                     id = g.Element("id").Value,
                                                                     name = g.Element("name").Value
                                                             }).ToList<SubGroup>();
                    foreach (SubGroup sb in subgroup.subgroup_list)
                    {
                            FillProduct(vendorID, groupID, sb.id);
                    }
            }
            public static void FillProduct(string vendorID,string groupID,string subgroupID)
            {
                    string url = "main address" + vendorID + "/" + groupID+"/"+subgroupID;
                    string result = GetXMLstream(url);
                    var product = new SubGroup();
                    XmlDocument doc = new XmlDocument();
                    doc.Load(new StringReader(result));
                    doc.Save(@"D:/proba/proba2.xml");
                    XDocument d = XDocument.Load(@"D:/proba/proba2.xml");
                    product.product_list = (from g in d.Descendants("subgroup")
                                                                      select new Product()
                                                                      {
                                                                              available = g.Element("available").Value,
                                                                              catalog_num = g.Element("catalog_num").Value,
                                                                              code = g.Element("code").Value,
                                                                              currency = g.Element("currency").Value,
                                                                              description = g.Element("description").Value,
                                                                              haracteristics = g.Element("haracteristics").Value,
                                                                              product_id = g.Element("id").Value,
                                                                              model = g.Element("model").Value,
                                                                              name = g.Element("name").Value,
                                                                              price = g.Element("price").Value,
                                                                              price_dds = g.Element("price_dds").Value,
                                                                              picture_url = g.Element("small_picture").Value,
                                                                      }).ToList<Product>();
            } 
```

但是在完成解析后，我尝试检查我的列表是否填充了对象，但是我收到一个错误，说它们是空的“NullReferenceException”所以我的问题是我是否正确地制作了类并且我的解析方法是否正确（你可以建议如何解析xml而不在我的计算机上创建文件），如果我没有，我的错误在哪里，我应该如何让它正常工作？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:50:55.863

```
modify this line add 's'( vendor -> vendors)

-> vendors.vendor_list = (from c in d.Descendants("vendor")

and the same case for group -> groups 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:51:38.213

而不是自己制作课程。

手动或使用 Visual Studio 创建格式正确的 XML 架构，然后从您创建的 XSD 文件生成 C# 类。

# html - 我怎样才能给这张桌子圆角边框并且仍然保持我的配色方案？

> ID：11348893
> 
> 赞同：1
> 
> 时间：2012-07-05T16:46:59.573
> 
> 标签：html, css

我不想在这样做时使用表格，但我不知道该怎么做。基本上，我想要一张白色和灰色交替行的表格。表格需要有一个圆形边框，并且各个行之间应该有边框（但没有列边框）。

这是我到目前为止所得到的：http: [//jsfiddle.net/zVDyh/1/](http://jsfiddle.net/zVDyh/1/)

即使我设置了边框半径，它似乎根本不会影响表格的边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:49:10.843

设置宽度并使其块显示：

```
.my_table {
    border: 1px solid $grey;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    display: block;
    width: 90%;
} 
```

这是更新的[小提琴](http://jsfiddle.net/zVDyh/4/)！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:01:03.373

以下是使用 DIV 的方法：

[http://jsfiddle.net/RRd2e/](http://jsfiddle.net/RRd2e/)

```
<div class="con">
    <div class="row">
        <div class="col">c1</div>
        <div class="col">c2</div>
        <div class="col">c3</div>
    </div>
    <div class="row">
        <div class="col">c1</div>
        <div class="col">c2</div>
        <div class="col">c3</div>
    </div>
    <div class="row">
        <div class="col">c1</div>
        <div class="col">c2</div>
        <div class="col">c3</div>
    </div>
    <div class="row">
        <div class="col">c1</div>
        <div class="col">c2</div>
        <div class="col">c3</div>
    </div>
    <div class="row">
        <div class="col">c1</div>
        <div class="col">c2</div>
        <div class="col">c3</div>
    </div>
</div>

.con {
  border: 1px solid #ccc;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
}
.row { 
    height: 38px; 
    border-bottom:1px solid #ccc; 
}
.row:nth-child(even) {
     background:#e3e3e3;
}
.row:last-child {
    border-bottom:none;
}
.col { 
    width:50px; 
    line-height:38px; 
    display:inline; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:34:01.617

感谢 Praveen Kumar + Lokase 的所有帮助。这是我最容易遵循的答案：[CSS3 的border-radius 属性和border-collapse:collapse 不能混用。如何使用border-radius创建一个圆角折叠表？](https://stackoverflow.com/questions/628301/css3s-border-radius-property-and-border-collapsecollapse-dont-mix-how-can-i)

它链接到此页面： http: [//vamin.net/examples/rounded_tables2.html](http://vamin.net/examples/rounded_tables2.html)（查看最后一个示例 - cellspacing = 0）

# netty - 当服务器准备响应时，如何防止 Netty 中的服务器端 ReadTimeoutHandler 被触发？

> ID：11348900
> 
> 赞同：0
> 
> 时间：2012-07-05T16:47:32.333
> 
> 标签：netty

由于 Netty 中的服务器端 ReadTimeoutHandler 不知道**为什么**客户端不写入任何数据，因此它可能会在服务器仍在准备对接收到的客户端请求的响应时抛出 ReadTimeoutException（即，在客户端根本不写任何东西的时间，因为它仍在等待服务器的回复）。

处理这种情况的最佳做法是什么？我目前正在考虑

*   在我的处理程序中保留一个标志，告诉服务器在准备响应时忽略读取超时，
*   在服务器准备响应时从管道中删除 ReadTimeoutHandler，然后重新添加它或
*   编写我自己的 ReadTimeoutHandler 版本，可以在每个通道的基础上打开和关闭。

是否有建议的方法在 Netty 中处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:28:59.557

如果它被触发并且是预期的，我会忽略超时。我之前也做过的另一种方法是动态地从管道中添加和删除处理程序

# makefile - 重新创建目录结构并使用 gnu make 递归处理每个文件

> ID：11348903
> 
> 赞同：2
> 
> 时间：2012-07-05T16:47:58.380
> 
> 标签：makefile

我有一个这样的目录树：

```
├── dir_a
│   └── file_1.txt
├── dir_b
│   └── dir_c
│       ├── file_2.txt
|       └── file_3.txt
└── file_4.txt 
```

我想镜像这个目录结构来保存处理每个文本文件的命令的结果。即，输出将如下所示：

```
├── build
│   ├── dir_a
│   │   └── processed_file_1.txt
│   ├── dir_b
│   │   └── dir_c
│   │       ├── processed_file_2.txt
│   |       └── processed_file_3.txt
│   └── processed_file_4.txt
├── dir_a
│   └── file_1.txt
├── dir_b
│   └── dir_c
│       ├── file_2.txt
|       └── file_3.txt
└── file_4.txt 
```

我对 Makefile 不是很熟练，所以我的问题是：如何获得 Makefile 来重新创建目录结构并递归处理所有文本文件以将它们放置到构建目录中的正确位置？随着输入文件的变化，我将重复运行它，因此不处理未更改文件的 Makefile 似乎是正确的方法。

更新：我还应该提到新的输入文件会经常添加，所以我不希望 Makefile 明确命名它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:27:10.903

如果您使用具有不同后缀的词干而不是插入“processed_”字符串会更容易，但这里有一个适用于我的示例：

```
OUTPUTS := build/dir_a/processed_file_1.txt       \
           build/dir_b/dir_c/processed_file_2.txt \
           build/dir_b/dir_c/processed_file_3.txt \
           build/processed_file_4.txt

all: $(OUTPUTS)

.SECONDEXPANSION:
$(OUTPUTS): build/% : $$(subst processed_file_,file_,%)
    mkdir -p $(dir $@)
    cp $< $@

clean:
    rm -rf build 
```

`.SECONDEXPANSION`您可以通过更改文件名的结尾而不是开头来消除复杂性：

```
OUTPUTS := build/dir_a/file_1.out       \
           build/dir_b/dir_c/file_2.out \
           build/dir_b/dir_c/file_3.out \
           build/file_4.out

all: $(OUTPUTS)

$(OUTPUTS) : build/%.out : %.txt
    mkdir -p $(dir $@)
    cp $< $@

clean:
    rm -rf build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:49:13.330

正如 Carl 建议的那样，您可以使用[辅助扩展](http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)，但要与[仅订购的](http://www.gnu.org/software/make/manual/make.html#Prerequisite-Types)先决条件结合使用。

```
BUILD_DIR = build

IN_FILES := dir_a/file_1.out       \
            dir_b/dir_c/file_2.out \
            dir_b/dir_c/file_3.out \
            file_4.out

OUT_FILES := $(IN_FILES:%=$(BUILD_DIR)/%)

all: $(OUT_FILES)

.SECONDEXPANSION:
$(OUT_FILES) : $(BUILD_DIR)/%.out : %.txt | $$(@D)/.
    # your text processing rule here...

%/. :
    mkdir -p $* 
```

`| $$(@D)`方法：

*   在二次扩展期间计算`$(@D)` [自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)的值（这是目标的目录部分），并且
*   添加对它的仅订单依赖，即确保目录存在，但如果它比目录旧，则不要考虑重新制作目标（这是一种常见情况）

# javascript - 我怎样才能让 Zemanta 和 Redactor 一起工作？

> ID：11348914
> 
> 赞同：4
> 
> 时间：2012-07-05T16:48:44.067
> 
> 标签：javascript, jquery-plugins, wysiwyg, redactor, zemanta

我正在尝试同时使用[Zemanta](http://developer.zemanta.com/docs/sdk/)的小部件和[Redactor](http://redactorjs.com/docs/api/) HTML 编辑器。单击其中一个小部件后，我无法让 Zemanta 找到 Redactor`iframe/content`并能够向其发送更新。

Redactor 创建一个`iframe`，但将真实`textarea`隐藏在幕后，我想在两者之间发送更新，但我不知道如何同时更新两者。如果我更新`textarea`using it's `ID`，它可以工作，但除非我单击 ，否则我在 Redactor 中看不到它`code view`。如果我使用`iframe`该类，我会在 redactor 中看到它，但它不会在 内部进行更改`textarea`，并且当我保存时，我什么也得不到。

```
.redactor_frame (redactor IFRAME)
#zemanta_content (textarea) 
```

如何使用 Zemanta 的小部件更新两者？

```
 get_editor: function () {
                var elm = null, win = null, editor = {element: null, property: null, type: null, win: null};
                try {
                    elm = $('.redactor_frame').get(0);
                    if (elm && elm.contentWindow) {
                        win = elm.contentWindow;
                        elm = null;
                    } else {
                        elm = $('#zemanta_content').get(0);
                    }
                    editor = win && {element: win.document.body, property: 'innerHTML', type: 'RTE', win: win} ||
                        elm && {element: elm, property: 'value', type: elm.tagName.toLowerCase(), win: null} ||
                        editor;
                } catch (er) {
                    $.zemanta.log(er);
                }
                return editor;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:07:41.687

来自泽曼塔的安德拉兹在这里。

我不确定这是否会是一件容易解决的事情，但我们会聘请前端开发人员来看看这个。

由于 Redactor 编辑器的行为有点不标准，也许最好的办法是求助于他们的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:54:26.657

正如 Andraz 指出的那样，在这种情况下，仅覆盖/更改 get_editor() 是不够的。但是，我宁愿指出一个不同的解决方案。其他编辑器似乎很频繁地更新他们用 iframe 升级的 textarea，如果不是经常的话，你会看到它们好像保持相同的状态。现在，如果您只使用一个，您可以通过 JavaScript 将内容从当前活动的内容复制到某个关键操作（保存、更新）的背景内容。这种方法可以为您节省大量时间，而且实施起来可能非常简单。

这对你有帮助吗？

# struts2 - struts2 在参数中找不到令牌名称

> ID：11348918
> 
> 赞同：0
> 
> 时间：2012-07-05T16:48:57.047
> 
> 标签：struts2

这是struts的配置：

```
<interceptors>
        <interceptor-stack name="packStack">
            <interceptor-ref name="token" />
            <interceptor-ref name="defaultStack" />
        </interceptor-stack>
    </interceptors>

    <default-interceptor-ref name="packStack" /> 
```

我收到了这个警告，并且令牌拦截器没有阻止重复提交请求。

```
WARNING: Could not find token name in params. 
```

我搜索了网络和很多论坛。如何解决这个问题？我试过改变拦截器的顺序，最后我像上面一样安排了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:32:59.313

使用[`<s:token>`tag](http://struts.apache.org/2.x/docs/token.html)，否则不会有 token 参数，有点像消息所说的。

# garbage-collection - 编译器：如何实现引用计数（在一个简单的 VM 中）

> ID：11348920
> 
> 赞同：2
> 
> 时间：2012-07-05T16:49:07.463
> 
> 标签：garbage-collection, implementation, reference-counting

我写了一个非常简单的编译器，将我的源语言翻译成字节码，这段代码由虚拟机处理（作为一个简单的堆栈机器，所以 3 + 3 将被翻译成

```
push 3
push 3
add 
```

现在我在垃圾收集中挣扎（我想使用引用计数）。我知道它的基本概念，如果分配了引用，则该对象的引用计数器增加，如果离开范围，则减少，但我不清楚 GC 如何释放获得的对象传递给函数...

这里有一些更具体的例子来说明我的意思

```
string a = "im a string" //ok, assignment, refcount + 1 at declare time and - 1 when it leaves scope    
print(new Object()) //how is a parameter solved? is the reference incremented before calling the function?

string b = "a" + "b" + "c" //dont know how to solve this, because 2 strings get pushed, then concanated, then the last gets pushed and concanated again, but should the push operation increase the ref count too or what, and where to decrease them then? 
```

如果有人可以给我链接到实现引用计数的教程或帮助我解决这个非常具体的问题，如果有人之前遇到过这个问题，我会很高兴（我的问题是我不明白何时增加、减少引用或计数在哪里存储）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:54:13.033

我认为文字可能会发生一些事情。您可以将它们视为文字数字，它们是常量并且永远存在，或者您可以有一个隐式变量，其重新训练计数为 1 before `print`，并在之后释放它。

回应您的编辑：您可以使用隐式变量解决方案，也可以使用 Objective-C 中的“自动释放”概念。您有一个放置在自动释放池中的对象，该对象将在很短的时间内释放，对象的接收者可以在其中保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:25:43.860

首先，您的语言允许将哪些类型的对象放入堆中？字符串？你有可变或不可变的字符串吗？

查看这篇关于[Java 中的字符串的](https://stackoverflow.com/questions/1270760/passing-a-string-by-reference-in-java)帖子。因此，在类似 Java 的语言中，每次连接它们时都会复制字符串，因为它们是不可变的。也`"this is a string"`实际上是对字符串类的构造函数的调用。

如果参数`print()`是对构造函数的调用`(new Object())`，则在调用函数的范围内没有对对象的引用，因此该对象位于函数的范围内，并且计数器应根据进入和离开范围而相应地递增和递减的`print()`功能。如果在调用范围内调用构造函数并将其分配给变量，则它位于调用范围内。

在阅读这些内容时，Wikipedia 是一个好的开始，但是[Andrew Appel 的编译器书](http://www.cs.princeton.edu/~appel/modern/java/)会很方便（那里应该有第二版，并且也有该书的 C 和 ML 版本）。[Lambda-the-Ultimate](http://lambda-the-ultimate.org/node/4155)是许多编程语言研究人员讨论事物的地方，因此绝对值得一看。

# mysql - Mysql 限制性能

> ID：11348922
> 
> 赞同：1
> 
> 时间：2012-07-05T16:49:10.430
> 
> 标签：mysql, sql

我在 mysql 中有一个大表，大约 100 万条记录。

我在 where 子句和 order 中使用具有不同参数的动态查询，所以我不能使用一些代码，例如`AND id > 34000 LIMIT 10`

我在`WHERE`and中的字段上有索引`LIMIT`，`ORDER`但索引并不能单独帮助。

我需要一个更好的方法`LIMIT 34000, 10`，有没有办法解决偏移延迟？

我放置了我的表模式，但我只是复制了更多可用字段而没有任何索引，因为我使用的是动态查询。

```
CREATE TABLE IF NOT EXISTS `p_apartmentbuy` (
  `property_id` mediumint(8) unsigned NOT NULL,
  `dateadd` int(10) unsigned NOT NULL,
  `sqm` smallint(5) unsigned NOT NULL,
  `sqmland` smallint(5) unsigned NOT NULL,
  `age` tinyint(2) unsigned NOT NULL,
  `price` bigint(12) unsigned NOT NULL,
  `pricemeter` int(11) unsigned NOT NULL,
  `floortotal` tinyint(3) unsigned NOT NULL,
  `floorno` tinyint(3) unsigned NOT NULL,
  `unittotal` smallint(4) unsigned NOT NULL,
  `unitthisfloor` tinyint(3) unsigned NOT NULL,
  `room` tinyint(1) unsigned NOT NULL,
  `parking` tinyint(1) unsigned NOT NULL,
  `renovate` tinyint(1) unsigned NOT NULL,
  `address` varchar(255) COLLATE utf8_general_ci NOT NULL,
  `describe` varchar(500) COLLATE utf8_general_ci NOT NULL,
  `featured` tinyint(1) unsigned NOT NULL,
  `l_location_id` smallint(5) unsigned NOT NULL,
  `l_city_id` smallint(4) unsigned NOT NULL,
  `pf_furnished_id` tinyint(2) unsigned NOT NULL,
  PRIMARY KEY (`property_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:01:15.920

具有 1 个轧机记录的表的问题不会是结构`AND id > 34000 LIMIT 10`和`LIMIT 34000, 10` 查询的其余部分。IE，你需要索引、PK、FK 来加快查询速度，除此之外，Order by 可能会减慢查询速度，进行搜索`like '%text%'`会使查询速度变慢。这也取决于桌子的引擎

所以不要指望改变限制 10 会产生巨大的影响。有几个工具可以帮助您确定“更好”的查询，但并非所有查询都一样，所以不要指望“最佳解决方案”，因为它不存在。

您可以使用 Show `create table`or `Describe select ......`or`explain`查看发生了什么，或使用命令`benchmark`查看您正在应用的函数的大致时间以改进它

编辑：

MySQL 的一些工具我建议你看看这个程序，它将帮助你提高这部分性能。

*   Mysqlslap（它就像基准，但您可以自定义更多结果）。
*   SysBench（测试 CPU 性能、I/O 性能、互斥争用、内存速度、数据库性能）。
*   Mysqltuner（您可以使用它分析一般统计信息、存储引擎统计信息、性能指标）。
*   mk-query-profiler（执行 SQL 语句分析）。
*   mysqldumpslow（很高兴知道女巫查询会导致问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:58:04.623

如果 MySQL 能够仅使用索引来查找与查询匹配的行，则 MySQL 能够优化 LIMIT 子句（即仅扫描/评估 LIMIT 指定范围内的行）。

对于像这样的查询`SELECT * FROM users WHERE active = 1 ORDER BY created_at`，在 (active, created_at) 上添加和索引就足够了。

见[http://www.mysqlperformanceblog.com/2006/09/01/order-by-limit-performance-optimization/](http://www.mysqlperformanceblog.com/2006/09/01/order-by-limit-performance-optimization/)

# twitter - 我可以使用 Twitter API 获取用户的年龄或出生日期吗？

> ID：11348925
> 
> 赞同：1
> 
> 时间：2012-07-05T16:49:14.687
> 
> 标签：twitter

我正在进行一项研究，我需要使用 Twitter API 获取任何用户的年龄/出生日期。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:35:17.900

Twitter 不存储用户的出生日期，所以不，这是不可能的。

# html - Span 和 Div 标签的内在区别

> ID：11348926
> 
> 赞同：1
> 
> 时间：2012-07-05T16:48:35.053
> 
> 标签：html

> **可能重复：**
> [HTML 标签 DIV 和 SPAN 有什么区别？](https://stackoverflow.com/questions/183532/what-is-the-difference-between-html-tags-div-and-span)

我想知道使用`<span>`和`<div>`编写除 div 以外的单行文本时的区别是块样式容器，而跨度不会在其后留下空格。

是否有一些与文本溢出相关的东西我们应该使用 span ？我正在寻找其他差异，但我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:53:26.513

从样式的角度来看，`<span>`默认为`display: inline`和`<div>`默认为`display: block`. 没有其他 CSS 差异。

（它们对于它们可以包含哪些元素以及哪些元素可以包含它们有不同的规则，但这与 CSS 无关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:53:18.623

根据[维基百科](http://en.wikipedia.org/wiki/Span_and_div#Differences_and_default_behavior)：

> div 和 span 有一个区别。在标准 HTML 中，div 是块级元素，而 span 是内联元素。div 块以与段落相同的方式在页面上直观地隔离文档的一部分。span 元素包含一条与周围文本内联的信息。在实践中，甚至可以通过使用级联样式表 (CSS) 来更改此功能。

很抱歉打破你的泡沫寻找更特别的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:55:14.983

好吧，这些元素的块级与内联级属性*是*两者之间的主要区别。

您应该考虑的是除了文本之外的其他内容。将内联元素以及其他块元素*放入*块元素中是完全有效的，但是仅将其他内联元素放入内联元素*中*才有效。

更多阅读：http: [//www.w3resource.com/html/HTML-block-level-and-inline-elements.php](http://www.w3resource.com/html/HTML-block-level-and-inline-elements.php)

至于使用哪个来编写“单行文本”，我可能都不会使用。段落或`<p>`标签似乎最适合于此。在语义上，段落标签用于显示一段文本，而 a`<div>`在语义上用于显示一段内容*......*段落、列表、图像、表格等。同时，a`<span>`在语义上用于显示不“ t 完全适合另一个元素。也许你有一个段落，并且想对句子的一部分应用一些特殊的格式，例如... a`<span>`将是一个很好的方法。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-05T16:53:41.443

`<span>`没有块属性，因此末尾没有换行符，而未修改（默认块元素）`<div>`标签是块元素，将在 div 标签的末尾包含换行符。

[http://www.w3schools.com/tags/tag_div.asp](http://www.w3schools.com/tags/tag_div.asp)

[http://www.w3schools.com/tags/tag_span.asp](http://www.w3schools.com/tags/tag_span.asp)

# javascript - 无法从 Javascript 生成的表单中获取数据

> ID：11348932
> 
> 赞同：0
> 
> 时间：2012-07-05T16:49:43.347
> 
> 标签：javascript, html

我试图从 javascript 创建的 html 选择中获取年份，但是应该读取数据的 javascript 函数找不到它。

这是 index.html 的代码

```
<html>
<head>
    <SCRIPT language="JavaScript" SRC="./js/calendar.js"></SCRIPT>
</head>

<body onload="yearList()">
    <div id="form">
        <table>
            <form name="cal_form">
                <tr>
                    <td>Month:</td>
                    <td>
                        <select name="month">
                            <option value="January">January</option>
                            <option value="February">February</option>
                            <option value="March">March</option>
                            <option value="April">April</option>
                            <option value="May">May</option>
                            <option value="June">June</option>
                            <option value="July">July</option>
                            <option value="August">August</option>
                            <option value="September">September</option>
                            <option value="October">October</option>
                            <option value="November">November</option>
                            <option value="December">December</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Year:</td>
                    <td id="yearoptiondiv">

                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <button type="button" onclick="drawCalendar(gen_cal_settings())">Draw Calendar</button> 
                    </td>
                </tr>

            </form>
        </table>
    </div>
    <div id="calendar"></div>
</body> 
```

这是 calendar.js 的代码

```
function drawCalendar(cal_settings){
var calendarTable;

calendarTable += '<table>';
calendarTable += '<tr>';
calendarTable += '<td colspan="2">';
calendarTable += cal_settings["month"] + " " + cal_settings["year"];
calendarTable += '</td>';
calendarTable += '</tr>';
calendarTable += '</table>';
document.getElementById("calendar").innerHTML=calendarTable;
}

function yearList(){
var x="",i;
x += "<select name='year'>";
for (i=2011;i<=3012;i++)
{
    x += "<option value='" + i + "'>" + i + "</option>";
}
x += "</select>";
document.getElementById("yearoptiondiv").innerHTML=x;
}

function gen_cal_settings(){
var cal_settings = new Array(); 
cal_settings["month"]=document.forms['cal_form']['month'].value;     
cal_settings["year"]=document.forms['cal_form']['year'].value;   
return cal_settings;    
} 
```

Year 列表在页面正文的 onload 事件中运行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:59:25.180

您正在访问SELECT的值，选择选项数组时。您需要的是**selected option**的值，而不是 select 的值。

你会想要这样的东西：

```
document.forms["cal_form"]["year"].options[document.forms["cal_form"]["year"].selectedIndex].value 
```

但是那个人很丑。您应该尝试实现 Benjamin Gruenbaum 的建议并将此代码移动到一个处理程序中，该处理程序允许您更好地维护（和读取）您正在编写的 Javascript，这将允许您引用表单而不是每次都从 Document 访问它需要从中获取数据。

**编辑**

我把你的代码扔进了一个 JSFiddle 并用它玩了。我可以看到您的选择不是从返回的表单对象的一部分，`document.forms["cal_form"]`这告诉我您需要通过 Javascript 生成整个表单，或者您需要更改访问元素的方式，也许是通过`id`而不是按名称（使用`document.getElementByID("id")`.

我还建议不要使用“innerHTML”来添加构建的 HTML 字符串。我建议通过 DOM 构建元素，一个示例是您的`yearList`函数，如下所示：

```
function yearList(){
  var select, option, year;
  select = document.createElement("select");
  select.setAttribute("name", "year");
  select.setAttribute("id", "year"); // For use accessing by ID and not name
  for (i = 2011; i <= 3012; ++i)
  {
    option = document.createElement("option");
    option.setAttribute("value", year);
    option.innerHTML = year;
    select.appendChild(option);
  }
  document.getElementById("yearoptiondiv").appendChild(select);
} 
```

然后当您需要访问该值时：

```
document.getElementById("year").value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:07:46.847

问题出在 HTML 上。

你不能有然后

进行以下更改，它将起作用。原因是。当你有错误的 HTML 表单时，没有得到正确的布局，所以你不能向它添加新元素。

错误的：

```
<table>
        <form name="cal_form">
            ..............
            ..............
            ..............

        </form>
    </table> 
```

将其更改为

```
<form name="cal_form">
  <table>

            ..............
            ..............
            ..............

  </table>
</form> 
```

# android - 在向屏幕添加视图时在android java中滚动背景图像

> ID：11348936
> 
> 赞同：0
> 
> 时间：2012-07-05T16:50:03.000
> 
> 标签：android, view, background, scroll

我想`scroll`在android的背景。我有一个`scrollview`有很多观点的。我需要实现一种在添加视图时*只需要滚动背景的方法。*我遇到了很多论坛，但没有一个很清楚。请给出一个想法或参考来实现它。为了更好地了解我正在寻找的东西，只需考虑一个自行车游戏，其中背景道路图像在骑自行车时移动。滚动屏幕时我只需要类似的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:31:26.060

也许你可以这样做：

*   `RelativeLayout`作为家长
    *   `ScrollView`将您的图像设置为背景
*   然后是其他视图，但在 的外部`ScrollView`和内部`RelativeLayout`。

编辑：

```
<RelativeLayout
 android:id="@+id/relParent"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 >

 <OtherViews />

 <ScrollView
  android:id="@+id/scrlParent"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
  android:background="@drawable/yourbackground">

  </ScrollView>     

 </RelativeLayout> 
```

我认为这样的事情可能会奏效。你看，`RelativeLayout`是父母。然后是您的其他视图，位于您的`ScrollView`. 然后，在您的其他视图标记之后，出现`ScrollView`，只有一个背景。我不确定背景标签是否有效，所以也许你应该删除`android:background="@drawable/yourbackground"`并`ImageView`在`ScrollView`.

# .htaccess - .htaccess 重写规则无法正常工作。重定向到绝对路径

> ID：11348938
> 
> 赞同：2
> 
> 时间：2012-07-05T16:50:17.653
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我在 server.com/site_admin/api 中有一个 .htaccess （实际目录结构：/public_html/site_admin/api）

我想将所有请求定向到相应的 php 文件。所以 api/users 会重写为 api/users.php

所以我写了这条规则：

```
 RewriteEngine On
 RewriteRule ^(.*)$ $1.php 
```

但它不起作用。当我访问 url server.com/site_admin/users 时收到 404

当我向它添加 [R=301] 时

```
 RewriteRule ^(.*)$ $1.php [R=301] 
```

我发现它重定向到[http://server.com/home/server_user/public_html/site_admin/api/users.php](http://server.com/home/server_user/public_html/site_admin/api/users.php) 而不是[http://server.com/site_admin/api/users.php](http://server.com/site_admin/api/users.php)

有人可以帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:55:11.003

用这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !php$
RewriteRule ^(.*)$ $1.php 
```

你的不起作用，因为重写的 url 仍然匹配`(.*)`，所以它会再次重写它，直到导致错误。但奇怪的是它给你一个 404 而不是 500 ......

第二个不起作用，因为`[R]`生成了一个新的 GET 请求，因此您需要添加主机，否则它将请求定义主机的绝对路径，显然它不起作用。如果你想使用 [R]，你应该使用：

`RewriteRule ^(.*)$ http://server.com/site_admin/api/$1.php [R]`

但它不会解决你的问题。正如我所说，它将生成一个新的 GET 请求，并且`.php`对您的用户可见。

# django - 如何处理 Django 模型中的瞬态数据（或如何避免全局变量）？

> ID：11348942
> 
> 赞同：1
> 
> 时间：2012-07-05T16:50:33.737
> 
> 标签：django, django-models

我在我的 Django 应用程序中定义了一个模型树（例如，'a' 是一个顶级模型，它有很多'b'，它有很多'c'）。我也有适当呈现这些的视图/模板。对于这些模型中的每一个，我通常需要根据当前登录的用户进行数据库查询。

例如，它类似于堆栈溢出的每个用户如何用星号标记问题。如果我的模型是问题，我会询问模型当前用户是否已为这个问题加注星标，然后在模板中适当地呈现它。

我的第一个想法是尝试在模板中传递一个参数（我现在知道这不起作用）。

```
# template
{{ question.is_starred(request.user) }}    # Can't work. 
```

我的第二个想法是拥有某种类型的全局变量（原则上我不喜欢）。

```
# model
class question (Models.model)
    def _is_starred(self):
        # Use a global variable to find out the current logged in user! 
```

我的第三个想法是让视图告诉模型当前登录的用户，但问题是，我有一个模型对象树，我想我必须加载和设置树中的每个模型，即使我不'不要最终使用它们。我假设对象是延迟加载的。

```
# view
def view_one_question(request, question_id):
    q = Question.objects.get(pk=question_id)
    q.SetCurrentlyLoggedInUser (request.user.id)
    # !!!! But what about the other network of objects that the question has?
    return render_to_response(...) 
```

任何建议表示赞赏。我是 Django 的新手，并试图以最好的设计开始这个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:55:39.830

你的第一个例子是正确的想法，但错误的实现。您不能将参数传递给 Django 模板中的方法。解决这个问题的最简单方法是一个简单的过滤器：

```
# yourapp/templatetags/somefile.py

from django import template

register = template.Library()

@register.filter
def is_starred_for_user(question, user):
    return question.is_starred(user) 
```

然后，在您的模板中：

```
{% load somefile %}

{{ question|is_starred_for_user:request.user }} 
```

# c# - 如何在 http 处理程序 ashx 中将文件上传到网络路径？

> ID：11348945
> 
> 赞同：0
> 
> 时间：2012-07-05T16:50:41.700
> 
> 标签：c#, asp.net, silverlight-4.0, httphandler

我尝试使用 Silverlight 应用程序的以下代码将文件上传到网络路径：

```
public void ProcessRequest (HttpContext context) 
{
  //.....
  using (FileStream fs = File.Create(@"\\Server\Folder\" + filename))            
 {
   byte[] buffer = new byte[4096];
   int bytesRead;
   while ((bytesRead = context.Request.InputStream.Read(buffer, 0, buffer.Length)) != 0)
   {
      fs.Write(buffer, 0, bytesRead);
   }
 }
} 
```

当我使用 VS 内置 Web 服务器在调试模式下运行它时，它工作正常。在 SL 方面，我使用以下网址调用此处理程序：

```
UriBuilder ub = new UriBuilder("http://localhost:38700/FileUpload.ashx"); 
```

然后我将此应用程序发布到本地 IIS 并将 url 更改为`http://localhost/Mysite/FileUpload.ashx`

然后再次运行该应用程序。它不再起作用，但没有错误。

我想这是因为调用 File.Create 的凭据不同。所以我想在处理程序中使用特定的凭证将文件放到目的地。

如何使用 File.Create 的凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:08:05.193

我相信您将需要模拟用户。下面的代码应该做到这一点。本质上，您收集域、用户和密码并实例化 ImpersonationMgr 类。然后调用 BeginImpersonation 方法。之后调用您希望的相应 WriteFile 方法。如果启用了模拟，WriteFile 方法将断言。对于其他文件方法，例如删除和移动，您可以遵循类似的模式。

```
public class ImpersonationMgr : IDisposable

  [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
  public static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword, int dwLogonType,
                                      int dwLogonProvider, out SafeTokenHandle phToken);

  [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
  public static extern bool CloseHandle(IntPtr handle);

  private const int LOGON32_PROVIDER_DEFAULT = 0;
  private const int LOGON32_LOGON_NEW_CREDENTIALS = 9;

  private readonly string userName = string.Empty;
  private readonly string domainName = string.Empty;
  private readonly string password = string.Empty;

  private SafeTokenHandle safeTokenHandle = null;
  private WindowsImpersonationContext impersonatedUser = null;

  public ImpersonationMgr(string userName, string domainName, string password)
  {
     this.userName = userName;
     this.domainName = domainName;
     this.password = password;
  }

  public void BeginImpersonation()
  {
     bool returnValue = LogonUser(userName, domainName, password, LOGON32_LOGON_NEW_CREDENTIALS,
                                  LOGON32_PROVIDER_DEFAULT, out safeTokenHandle);
     if (returnValue == false)
     {
        int ret = Marshal.GetLastWin32Error();
        throw new System.ComponentModel.Win32Exception(ret);
     }

     impersonatedUser = WindowsIdentity.Impersonate(safeTokenHandle.DangerousGetHandle());
  }

  private void AssertImpersonationIsEnabled()
  {
     if(safeTokenHandle == null || impersonatedUser == null)
     {
        throw new UnauthorizedAccessException("You must call the BeginImpersonation method before attempting file write access.");
     }
  }

  public void WriteFile(string pathToFile, string fileContents)
  {
     AssertImpersonationIsEnabled();
     using (FileStream fileStream = File.Open(pathToFile, FileMode.CreateNew))
     {
        using (StreamWriter fileWriter = new StreamWriter(fileStream))
        {
           fileWriter.Write(fileContents);
        }
     }
  }

  public void WriteFile(string pathToFile, byte[] fileContents)
  {
     AssertImpersonationIsEnabled();
     using (FileStream fileStream = new FileStream(pathToFile, FileMode.Create))
     {
        fileStream .Write(fileContents, 0, fileContents.Length);
        fileStream .Flush();          
     }
  }

  public void Dispose()
  {
     Dispose(true);
     GC.SuppressFinalize(this);
  }
} 
```

**更新**

```
 public sealed class SafeTokenHandle : SafeHandleZeroOrMinusOneIsInvalid
   {
      private SafeTokenHandle()
         : base(true)
      {
      }

      [DllImport("kernel32.dll")]
      [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
      [SuppressUnmanagedCodeSecurity]
      [return: MarshalAs(UnmanagedType.Bool)]
      private static extern bool CloseHandle(IntPtr handle);

      protected override bool ReleaseHandle()
      {
         return CloseHandle(handle);
      }
   } 
```

# google-apps-script - 如何使用 CSS 选择器解析 HTML 字符串？

> ID：11348946
> 
> 赞同：5
> 
> 时间：2012-07-05T16:50:44.310
> 
> 标签：google-apps-script, css-selectors, html-parsing

我正在尝试从字符串变量中的 HTML 页面中提取一些数据。我知道 Google Apps 脚本代码是在服务器端执行的，并且`document`没有定义对象。

有没有其他简单的方法来使用 CSS 选择器提取数据`document.querySelector`？

# php - Codeigniter 无法删除 cookie

> ID：11348950
> 
> 赞同：4
> 
> 时间：2012-07-05T16:50:55.840
> 
> 标签：php, codeigniter, session, cookies, session-cookies

我有一个登录脚本，现在我正在尝试为它构建一个注销。我在 CodeIgniter 中同时使用 cookie 和会话，尽管执行了以下操作，cookie 仍然设法坚持，我不知道为什么。据称这是通过 CI 杀死 cookie 的方法，但我注销，关闭页面，转到另一个页面，`print_r($_COOKIE)`它们仍然会在那里。

```
$this->session->sess_destroy();
delete_cookie('LongRemember', '', '0');
delete_cookie('AutoRemember', '', '0'); 
redirect('m/logout', 'refresh');
echo 'logged out'; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T17:35:16.583

使用[cookie 助手](http://codeigniter.com/user_guide/helpers/cookie_helper.html)，您可以通过两种方式删除 cookie：

1.  `delete_cookie("name");`
2.  `delete_cookie($name, $domain, $path, $prefix);`

此函数不接受到期参数。

不要忘记加载帮助程序：`$this->load->helper('cookie');`

# python - 如何从python设置文件的最后修改时间？

> ID：11348953
> 
> 赞同：87
> 
> 时间：2012-07-05T16:50:57.933
> 
> 标签：python, unix, last-modified

我有一个 python 脚本，它使用[ftplib](http://docs.python.org/library/ftplib.html)通过 FTP 下载文件。

我当前的下载代码看起来就像 ftp lib 文档中的示例：

```
ftp.retrbinary('RETR README', open('README', 'wb').write) 
```

现在我有一个要求，通过 FTP 下载的文件需要与 FTP 服务器本身的文件具有相同的最后修改时间。假设我可以从 中解析出时间`ftp.retrlines('list')`，如何在下载的文件上设置修改时间？

如果这很重要，我使用的是基于 unix 的操作系统。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2016-08-03T21:40:18.180

使用[`os.utime`](https://docs.python.org/3/library/os.html#os.utime)：

```
import os

os.utime(path_to_file, (access_time, modification_time)) 
```

更详细的例子：[https ://www.tutorialspoint.com/python/os_utime.htm](https://www.tutorialspoint.com/python/os_utime.htm)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-10-08T18:00:28.447

要编辑文件最后修改字段，请使用：

```
os.utime(<file path>, (<access date epoch>, <modification date epoch>)) 
```

例子：

```
os.utime(r'C:\my\file\path.pdf', (1602179630, 1602179630)) 
```

> - 纪元是自 1970 年 1 月 1 日以来经过的秒数。[查看更多](https://www.epochconverter.com/)

* * *

如果您正在寻找一个`datetime`版本：

```
import datetime
import os

def set_file_last_modified(file_path, dt):
    dt_epoch = dt.timestamp()
    os.utime(file_path, (dt_epoch, dt_epoch))

# ...

now = datetime.datetime.now()
set_file_last_modified(r'C:\my\file\path.pdf', now) 
```

> - 对于 Python 版本 < 3.3 使用`dt_epoch = time.mktime(dt.timetuple())`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-09-12T18:32:35.310

有两种方法可以做到这一点。如果您在没有参考统计信息的文件上设置时间戳，则一个示例是必需的[`os.utime`。](https://stackoverflow.com/a/38754092)

但是，如果您要复制文件，则`shutil.copy()`您有一个参考文件。然后，如果您想复制权限位、上次访问时间、上次修改时间和标志，则可以 `shutil.copystat()`在`shutil.copy()`.

然后`shutil.copy2`是打算同时做这两件事......

# c++ - 带有objectdetect.hpp的Opencv 2.4编译错误

> ID：11348956
> 
> 赞同：2
> 
> 时间：2012-07-05T16:51:23.767
> 
> 标签：c++, opencv, compiler-errors

我已经使用 wiki 上提供的说明使用 cmake 安装了 OpenCV。我已经在我的桌面上构建了这些文件。我尝试运行的第一个程序是从相机程序中简单捕获。它的来源是

```
#include "cv.h" 
#include "highgui.h" 
#include <stdio.h>  
int main() {
CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANY );
if ( !capture ) {
 fprintf( stderr, "ERROR: capture is NULL \n" );
 getchar();
 return -1;
}
cvNamedWindow( "mywindow", CV_WINDOW_AUTOSIZE );
while ( 1 ) {
 IplImage* frame = cvQueryFrame( capture );
 if ( !frame ) {
   fprintf( stderr, "ERROR: frame is null...\n" );
   getchar();
   break;
 }
 cvShowImage( "Cam WIndow", frame );

 if ( (cvWaitKey(10) & 255) == 27 ) break;
}
cvReleaseCapture( &capture );
cvDestroyWindow( "Cam WIndow" );
return 0;
} 
```

它使用 g++ 命令和 pkg-config 正确编译，如下所示：

> g++ -o cam Camera.cpp`pkg-config opencv --cflags --libs`

我尝试运行的第二个程序也是来自 wiki，人脸识别程序，其源代码如下。

```
#include <opencv2/objdetect/objdetect.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

void detectAndDisplay( Mat frame );

String face_cascade_name = "lbpcascade_frontalface.xml";
String eyes_cascade_name = "haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade;
CascadeClassifier eyes_cascade;
string window_name = "Capture - Face detection";

RNG rng(12345);

int main( int argc, const char** argv )
{
  CvCapture* capture;
  Mat frame;

  if( !face_cascade.load( face_cascade_name ))
  {
    printf("--(!)Error loading\n");
    return -1;
  };
  if( !eyes_cascade.load( eyes_cascade_name ))
 {
   printf("--(!)Error loading\n");  
   return -1; 
 };

  capture = cvCaptureFromCAM( -1 );
  if( capture )
  {
    while( true )
    {
      frame = cvQueryFrame( capture );

        if( !frame.empty() )
       { detectAndDisplay( frame ); }
       else
       { printf(" --(!) No captured frame -- Break!"); break; }

      int c = waitKey(10);
      if( (char)c == 'c' ) { break; } 

    }
  }
  return 0;
}
void detectAndDisplay( Mat frame )
{
   std::vector<Rect> faces;
   Mat frame_gray;

   cvtColor( frame, frame_gray, CV_BGR2GRAY );
   equalizeHist( frame_gray, frame_gray );

   face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0, Size(80, 80) );

   for( int i = 0; i < faces.size(); i++ )
    {
      Mat faceROI = frame_gray( faces[i] );
      std::vector<Rect> eyes;

 eyes_cascade.detectMultiScale(faceROI,eyes,1.1,2,0|CV_HAAR_SCALE_IMAGE,Size(30, 30));
  if( eyes.size() == 2)
  {

     Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
     ellipse(frame,center,Size(faces[i].width*0.5,faces[i].height*0.5),0,0,360,Scalar(255,0,0),2,8,0);

     for( int j = 0; j < eyes.size(); j++ )
      { \
        Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y +     eyes[j].y + eyes[j].height*0.5 ); 
        int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
        circle( frame, center, radius, Scalar( 255, 0, 255 ), 3, 8, 0 );
          }
       }

    } 

   imshow( window_name, frame );
} 
```

现在我使用下面给出的命令编译了这个程序：

> g++ -o cam Cam1.cpp -lopencv_core -lopencv_imgproc -lopencv_calib3d -lopencv_video -lopencv_features2d -lopencv_ml -lopencv_highgui -lopencv_objdetect -lopencv_contrib -lopencv_legacyD

此编译命令给出错误

```
fatal error: opencv2/objdetect/objdetect.hpp: No such file or directory 
```

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T15:14:16.230

该错误是因为编译器找不到文件“objdetect.hpp”。可能有两个原因。

1）opencv安装过程中会生成“objdetect.hpp”文件，所以如果这一步有问题，可能是文件没有创建，所以首先检查那个文件。

2）如果你能找到那个文件，那么问题将是由于编译器无法获取文件的路径，所以你必须修复它。它可以通过使用 -I/path/to/the/file 在 objectdeetcet 模块的 make 文件中包含包含路径列表的确切路径来完成。

如果您没有这样的 make 文件，那么您可以使用上面的 -I/ 选项通过命令行指定路径。也可以通过将路径导出到某个标志（我不知道标志的名称）以另一种方式完成，以便编译器在编译期间查看导出的路径，我不确定方法，请上网查。希望你能解决这个问题..

# android - 从 findViewById 使用 View 时出现 NullPointerException

> ID：11348959
> 
> 赞同：1
> 
> 时间：2012-07-05T16:51:42.143
> 
> 标签：android, android-layout, android-intent, findviewbyid

我设计了一个 android 应用程序，我想在启动画面后查看菜单。我正确触发了它，并使用了`ArrayAdapter`一个自定义的`ListView`. 但是，当我运行该模块时，它会在启动后关闭，并且 logcat 指示`NullPointerException`. 但是，据我所知，我没有做错任何事。请帮帮我！:)

谢谢你。

**代码：**

```
package com.sliit.droidman.main;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

import com.sliit.droidman.R;

public class MainActivity extends Activity implements OnItemClickListener{

ArrayList<String> Methods = new ArrayList<String>();
ArrayList<String> MethodDiscription = new ArrayList<String>();
ArrayList<Integer> Icons = new ArrayList<Integer>();
ArrayList<Object> Objects = new ArrayList<Object>();

private ListItemAdapter adapter;
ListView lv;

public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    Toast.makeText(
            this,
            "Title => " + Methods.get(position) + "=> n Description"
                    + MethodDiscription.get(position), Toast.LENGTH_SHORT).show();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_menu);

    lv = (ListView) findViewById(R.layout.main_menu);
    fillArrayList();
    lv.setOnItemClickListener(this);

}

public void RefreshListView() {
    Objects.clear();
    for (int i = 0; i < Methods.size(); i++) {
        Object obj = new Object();
        Objects.add(obj);
    }
    Log.d("object array", "" + Objects.size());
    adapter = new ListItemAdapter(Objects, 1);
    lv.setAdapter(adapter);
}

private class ListItemAdapter extends ArrayAdapter<Object>{
    ViewHolder HolderView;

    public ListItemAdapter(List<Object> Item, int ID) {
        super(MainActivity.this, R.layout.listitem_row , Item);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflator = getLayoutInflater();
        convertView = inflator.inflate(R.layout.listitem_row, null);

        HolderView = new ViewHolder();
        HolderView.AppEvent = (TextView) convertView.findViewById(R.id.Event);
        HolderView.EventDisc = (TextView) convertView.findViewById(R.id.EventDescription);
        HolderView.iv = (ImageView) convertView.findViewById(R.id.avatar);

        convertView.setTag(HolderView);

        HolderView.AppEvent.setText(Methods.get(position));
        HolderView.EventDisc.setText(MethodDiscription.get(position));
        HolderView.iv.setBackgroundResource(Icons.get(position));

        return convertView;
    }

    private class ViewHolder {
        TextView AppEvent;
        TextView EventDisc;
        ImageView iv;

    }
}

public void fillArrayList() {
    Methods.clear();
    MethodDiscription.clear();
    Icons.clear();

    Methods.add(0,"Applications");
    Methods.add(1,"System Resources");
    Methods.add(2,"Statistics");
    Methods.add(3,"Threats");

    MethodDiscription.add(0, "bla bla bla");
    MethodDiscription.add(1, "bla bla bla");
    MethodDiscription.add(2, "bla bla bla");
    MethodDiscription.add(3, "bla bla bla");

    Icons.add(0, R.drawable.ic_launcher);
    Icons.add(1, R.drawable.ic_launcher);
    Icons.add(2, R.drawable.ic_launcher);
    Icons.add(3, R.drawable.ic_launcher);
}

} 
```

发生错误的地方的logCat：

```
07-05 01:44:50.678: W/dalvikvm(1907): threadid=1: thread exiting with uncaught             exception (group=0x40a13300)
07-05 01:44:50.728: E/AndroidRuntime(1907): FATAL EXCEPTION: main
07-05 01:44:50.728: E/AndroidRuntime(1907): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sliit.droidman/com.sliit.droidman.main.MainActivity}:         java.lang.NullPointerException
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.os.Looper.loop(Looper.java:137)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at java.lang.reflect.Method.invokeNative(Native Method)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at java.lang.reflect.Method.invoke(Method.java:511)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at dalvik.system.NativeStart.main(Native Method)
07-05 01:44:50.728: E/AndroidRuntime(1907): Caused by: java.lang.NullPointerException
07-05 01:44:50.728: E/AndroidRuntime(1907):     at com.sliit.droidman.main.MainActivity.onCreate(MainActivity.java:47)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.Activity.performCreate(Activity.java:5008)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-05 01:44:50.728: E/AndroidRuntime(1907):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-05 01:44:50.728: E/AndroidRuntime(1907):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T16:56:21.850

该`lv`变量将是`null`因为您不搜索它的 id，所以不是：

```
lv = (ListView) findViewById(R.layout.main_menu); 
```

您应该搜索`ListView`的 id：

```
lv = (ListView) findViewById(R.id.the_id_of_the_listview); 
```

# javascript - 如何在javascript中将分数转换为浮点数？

> ID：11348960
> 
> 赞同：1
> 
> 时间：2012-07-05T16:51:43.913
> 
> 标签：javascript

我想`"1 1/2"`在 JavaScript 中进行转换，以便当我说 print x (where `x = "1 1/2"`) 时它返回`1.5`.

目前正在使用以下代码

```
var value = $('#ingredients-1-quantity').val();
var fraction = Number(value);
if(isNaN(fraction)) {
 if(hasFraction = parseFrac(value)) {
  $('#ingredients-1-quantity-hidden').val(hasFraction);
 }
 else {
  $('#ingredients-1-quantity').val('');
  $('#ingredients-1-quantity-hidden').val('');
 }
}

function parseFrac(frac) {
 frac = frac.split(/ ?(\d+)\/(\d+)/);
 if(!isNaN(parseInt(frac[2])))
   return Math.round(frac[0] * 1 + frac[1] / frac[2], 3);
 else
   return false;
} 
```

此外，代码应该处理整数和浮点值。例如，如果我说 print `1`OR print`1.5`它将按原样返回。

我正在详细说明。我有一个成分表，我在其中提供文本字段，用户将在其中提供食物数量。这可以是浮点数、整数或分数。

例如

1.  **1/2**茶匙盐
2.  **1 1/2**茶匙辣椒粉
3.  **2.5**茶匙大蒜粉
4.  **2**茶匙奶油色辣根

如果用户以浮点数或整数形式提供值，那很好，但如果用户以分数形式提供值，那么我将其转换为浮点数。

在视图页面上，可以按原样显示数量（由用户输入），但对于内部使用，我必须将分数保持为浮点数。

我用上面的代码得到了这个。感谢@Rocket 的想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:57:16.000

您可以使用`eval`（如果您可以信任字符串的来源）。

```
console.log(eval('1/2')); // 0.5
console.log(eval('1.5')); // 1.5 
```

或者，您可以在`/`.

```
var x = '1/2';

var y = x.split('/');
if(y.length > 1){
    console.log(y[0] / y[1]);
}
else{
    console.log(y[0]);
} 
```

**更新**：处理混合数字，例如`1 1/2`需要更多的解析。除了在 上拆分`/`，我们还需要在空间上拆分。

```
var x = '1 1/2';

var y = x.split(' ');
if(y.length > 1){
    var z = y[1].split('/');
    console.log(+y[0] + (z[0] / z[1]));
}
else{
    var z = y[0].split('/');
    if(z.length > 1){
        console.log(z[0] / z[1]);
    }
    else{
        console.log(z[0]);
    }
}​ 
```

# spring - 春季AOP和球衣课程

> ID：11348961
> 
> 赞同：3
> 
> 时间：2012-07-05T16:51:46.233
> 
> 标签：spring, jersey, aop

所以在 spring xml 配置中，我定义了以下切入点：

```
<aop:config>
    <aop:aspect ref="metricsAdviceInterceptor">
        <aop:around method="invoke" pointcut="@annotation(com.mycom.MetricsAdvice)"/>
    </aop:aspect>
</aop:config> 
```

这个想法是收集具有“MetricsAdvice”注释的方法的指标：

```
class SomeClass {
    @MetricsAdvice
    public void someMethod(...) { ... }
} 
```

因此，当我在我的 spring 配置中明确声明 bean 时，这一切都很好：

```
 <bean id="someBean" class="com.mycom.SomeClass" /> 
```

但我希望能够在球衣代码上使用此注释，但它不起作用。现在，在球衣配置中，将以下内容添加到 web.xml。这个想法是你告诉球衣在哪些包裹中可以找到各种休息服务。即，它在包中查找类： com.mycom.restservices.* 并实例化它们。据推测，这些 bean 的实例化正在“以不同方式”完成，因此不会被代理：

```
<servlet>
    <servlet-name>JerseyWebApplication</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <display-name>Jersey Servlet</display-name>
    <init-param>
        <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
        <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>
            com.mycom.restservices.billing;
            com.mycom.restservices.account;
            org.codehaus.jackson.jaxrs
        </param-value>
    </init-param>
    .... 
```

那么尝试让这些注释在球衣豆上工作的“最佳实践”是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:06:22.763

如果您只需要摆脱显式的 bean 声明，则可以使用 Spring 类路径扫描功能而不是 Jersey 功能。

只需使用`@Component`（或其他类似的注释）注释您的 Jersey 资源，并使用`<context:component-scan>`这些资源指定包。

这样 bean 将由 Spring 实例化，并且 Spring AOP 可以正常工作。

**也可以看看：**

*   [3.10 类路径扫描和托管组件](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-classpath-scanning)

# hibernate - hibernate.cache.region.factory_class 在 hibernate.cfg.xml 中是必需的

> ID：11348964
> 
> 赞同：6
> 
> 时间：2012-07-05T16:52:08.947
> 
> 标签：hibernate, memcached

我正在使用 memcache 作为 Hibernate 的二级缓存。我正在使用 hibernate-memcached-1.2.4、spymemcached 2.8.0 和 hibernate 4.1.4。

但是当我尝试使用它时，它给了我一个错误提示

```
    初始会话工厂创建失败org.hibernate.cache.NoCacheRegionFactoryAvailableException：应用程序中使用了二级缓存，但没有给出属性hibernate.cache.region.factory_class，请禁用二级缓存或将正确的区域工厂类名称设置为属性hibernate .cache.region.factory_class（并确保二级缓存提供程序，例如，hibernate-infinispan，在类路径中可用）。
    线程“主”java.lang.ExceptionInInitializerError 中的异常
        在 Util.HibernateUtil.(HibernateUtil.java:16)
        在 hibba.AccountDAOimpl.getAccount(AccountDAOimpl.java:23)
        在 hibba.Connect.main(Connect.java:7)
    原因：org.hibernate.cache.NoCacheRegionFactoryAvailableException：应用程序中使用了二级缓存，但没有给出属性hibernate.cache.region.factory_class，请禁用二级缓存或将正确的区域工厂类名称设置为属性hibernate .cache.region.factory_class（并确保二级缓存提供程序，例如，hibernate-infinispan，在类路径中可用）。
        在 org.hibernate.cache.internal.NoCachingRegionFactory.buildTimestampsRegion（NoCachingRegionFactory.java:87）
        在 org.hibernate.cache.spi.UpdateTimestampsCache.(UpdateTimestampsCache.java:63)
        在 org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:510)
        在 org.hibernate.cfg.Configuration.buildSessionFactory（Configuration.java:1744）
        在 org.hibernate.cfg.Configuration.buildSessionFactory（Configuration.java:1782）
        在 Util.HibernateUtil.(HibernateUtil.java:12)
        ... 2 更多
```

hibernate.cfg.xml 中写的属性是：

```
<pre>
<property name="hibernate.cache.use_query_cache">true</property>
<property name="cache.provider_class">com.googlecode.hibernate.memcached.MemcachedCacheProvider </property>
        <property name="hibernate.memcached.memcacheClientFactory">com.googlecode.hibernate.memcached.dangamemcached.DangaMemcacheClientFactory</property>      
        <property name="hibernate.Memcached.servers"> localhost:11211 </property>
        <property name="hibernate.Memcached.cacheTimeSeconds">300</property>
        <property name="hibernate.Memcached.connectionFactory">KetamaConnectionFactory</property> </pre> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:25:21.020

这个例外是不言自明的。您必须设置 *hibernate.cache.region.factory_class* 属性。例如，使用 ehcache 将添加以下行：

```
<property name="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T04:08:34.583

在使用 hibernate-memcached 1.3 和 spymemcached 2.7 和 hibernate 4.3 时遇到了同样的问题。不得不切换到[hibernate4-memcached](https://github.com/kwon37xi/hibernate4-memcached)，它提供了一个`RegionFactory`.

# windows-7 - Windows 7 将保存到 Program Files 的文件放在哪里

> ID：11348965
> 
> 赞同：4
> 
> 时间：2012-07-05T16:52:08.977
> 
> 标签：windows-7, uac

我有一个旧程序将其文件保存到 Program Files。我们正在更新它以在 Windows 7 上正常运行。问题是我们现在无法找到我们保存的文件。Windows 7 允许我们的程序保存到程序文件，但显然将文件放在其他地方。我们找不到“其他地方”。当我们保存在 Program Files 中时，有人知道 Windows 7 将其文件放在哪里吗？

更新：我们查看了程序文件，在程序文件 (x86) 中，我们使用 Windows 资源管理器搜索功能来尝试查找目录名称。没有任何效果，但是当我们检查我们正在创建的目录是否已经存在于我们的应用程序中时，我们会找到它并打开我们的错误对话框。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T16:57:22.687

在看`C:\Users\[USERNAME]\AppData\Local\VirtualStore\Program Files\[APPNAME]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:55:10.480

可能`program files (86)`如果您的应用程序是 32 位应用程序。不过，它们应该保存在用户目录中（或者更好的是，让用户选择保存位置）。

# java - 哪个 XML 写入/解析/修改对 android 有好处

> ID：11348967
> 
> 赞同：-2
> 
> 时间：2012-07-05T16:52:13.553
> 
> 标签：java, android, xml

我需要在 android 中解析和修改 XML ..任何人都可以建议哪个 XML 解析器更好地解析和修改 android 中的 XML ..？

目前我正在使用 XMLpullparser 但使用它我无法修改 XML ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:01:44.700

如果 XML 具有简单的结构，那么您可以将文件反序列化为对象。您修改该对象的一些属性，然后将其序列化为 XML。

**XStream**是一个简单的库，用于将对象序列化为 XML 并再次返回。可以在[这里](http://xstream.codehaus.org/)找到。

我认为这是一种干净的方法，但如果 XML 文件非常复杂（因为您必须将其结构映射到 Java 类），这不是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:56:27.507

我相信 Xpath 可供 Android 开发人员使用。我一直使用它来进行任何 XML 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:15:06.227

XMLPullParser 并不是真正为复杂任务而设计的 AFAIK。SAX Parser 对于高级任务要好得多，但也不是那么容易使用。

对于操作 XML，您可以使用 SAX 过滤器。看看这个教程（IBM 教程很棒！）：[http ://www.ibm.com/developerworks/xml/library/x-tipsaxfilter/](http://www.ibm.com/developerworks/xml/library/x-tipsaxfilter/)

# ios - ABPeoplePickerNavigationController EXC_BAD_ACCESS 收集电子邮件和电话号码

> ID：11348968
> 
> 赞同：0
> 
> 时间：2012-07-05T16:52:13.720
> 
> 标签：ios, contacts, exc-bad-access, abrecord

我正在使用 ABPeoplePickerNavigationController 从通讯录条目中收集一组电子邮件地址和电话号码。90% 的时间它都能正常工作，但少数测试人员报告崩溃。崩溃报告说它在 CFRelease 崩溃......不知道为什么考虑到我相信我的代码是正确的。看一看：

```
ABProfile *selectedUser = [[ABProfile alloc]init];

ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);

NSArray *emailArray;

if (ABMultiValueGetCount(emails) > 0) {
    emailArray = (__bridge_transfer NSArray *)ABMultiValueCopyArrayOfAllValues(emails);
}

CFRelease(emails);

ABMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty);

NSMutableArray *phonesArray = [[NSMutableArray alloc]initWithCapacity:1];

for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
{
    NSMutableDictionary *dict = [[NSMutableDictionary alloc]initWithCapacity:1];

    CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(phones, j);

    CFStringRef locLabel = ABMultiValueCopyLabelAtIndex(phones, j);
    NSString *phoneLabel =(__bridge_transfer NSString*) ABAddressBookCopyLocalizedLabel(locLabel);

    CFRelease(locLabel);

    [dict setValue:phoneLabel forKey:@"label"];
    NSString *phoneNumber = (__bridge_transfer NSString *)phoneNumberRef;

    [dict setValue:phoneNumber forKey:@"number"];

    [phonesArray addObject:dict];
}

selectedUser.phones = phonesArray;

CFRelease(phones); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:00:01.157

`ABMultiValueCopyLabelAtIndex``NULL`如果没有找到可以返回，并且`CFRelease(NULL)`会崩溃。在对它做任何事情之前，我会厚着脸皮确保`locLabel`存在。

# vim - vimrc 写入文件

> ID：11348974
> 
> 赞同：3
> 
> 时间：2012-07-05T16:52:56.403
> 
> 标签：vim

我一直在尝试使用 vim 来简化编写乳胶。为此，我想编写一个函数，以便于编写矩阵。这就是我想要它做的事情。

在插入模式下

如果我输入 mmatrix （不是错字。我想要两个 m）

我想让它问我需要的行数和列数

然后用所需数量的占位符打开一个空白矩阵（表示为 <++>）

这是我写的代码

```
imap mmatrix <C-o>:call Matrix
func! Matrix(rows, columns)
    for row in a:rows
       for col in a:columns
           exec "normal! i<++>&  "
       endfor
       exec "normal! i\\\\ <CR>"
    endfor
endfunction 
```

所以对于一个 2x2 矩阵，它应该看起来像

```
<++>& <++>\\
<++>& <++>\\ 
```

但是，这是行不通的。我可以知道如何修改此文件以使其执行我想要的操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:47:59.397

我得到了这个工作：

```
func! Matrix(rows, columns)
   for row in range(a:rows)
      for col in range(a:columns)
          exe "norm i<++>&  "
      endfor
      exe "norm Xi\\\\\\\<cr>"
   endfor
endfunction 
```

另一种选择是使用命令而不是 imap，例如：

```
command! -nargs=1 M :call Matrix(<args>) 
```

然后您可以`:M 2,4`在正常模式下使用来调用该函数。

# ios - 为客户编写 iOS 应用程序，客户提交它？

> ID：11348977
> 
> 赞同：0
> 
> 时间：2012-07-05T16:53:08.383
> 
> 标签：ios, deployment, submission

我目前正在为客户编写 iOS 应用程序。

客户希望自己将应用程序（.ipa 包）提交到应用程序商店，并附上他的开发者资料。主要是因为他希望自己的名字出现在 App Store 中，而不是我的。

这个过程会引起问题吗？例如签名问题？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T16:56:30.057

申请必须使用将提交的帐户的证书进行签名。您的选择包括在项目完成后移交整个项目和源代码，或者，使用他们的开发和分发证书作为其帐户的开发人员开发项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:15:09.123

还有另一种选择：您可以询问客户的登录名和密码。因此，您将为您的 Mac 创建一个分发配置文件，并为您的应用程序创建所有其他组件。当应用程序在 Itune Connect 上交付时，您的客户端可能会更改其密码。

这样，您可以为他处理所有事情，如果他不太擅长技术，但仍想拥有一个以他的名字命名的应用程序，这可能会很有用。

# opencart - 默认样式表总是加载 [OpenCart 主题]

> ID：11348983
> 
> 赞同：4
> 
> 时间：2012-07-05T16:53:32.377
> 
> 标签：opencart

我刚刚开始为 Opencart 设计。[这里](http://www.opencart.com/index.php?route=documentation/documentation&path=43_44)的页面说

> OpenCart 使用“默认主题后备系统”。这意味着如果您的自定义主题文件夹中缺少文件，它将在主“默认”主题文件夹中搜索该文件。

现在我在我的模板文件夹中创建了一个文件夹样式表，其中所有文件都在默认目录中。除了 stylesheet.css 之外的所有 css 文件都从我的目录加载。

我错过了什么？我检查了 stylesheet.css 的拼写，甚至多次重新创建它，但它仍然从默认目录加载。

任何人都可以帮忙吗？ ![在此处输入图像描述](../Images/82d1258f8402ae15eb2a2c9fb39fb004.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T17:14:38.033

当 OpenCart 说它回退时，它的字面意思是模板文件夹，即

```
/catalog/view/theme/your-theme-name/template/ 
```

样式表文件夹不在此范围内，因此`<head>`如果要包含默认样式表，则需要手动将其添加到主题中

## 编辑

如果要加载样式表，则需要在

```
/catalog/view/theme/your-theme-name/template/common/header.tpl 
```

并改变那里的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:40:01.430

> <link rel="stylesheet" type="text/css" href="catalog/view/theme/default/stylesheet/stylesheet.css" />

需要在 header.tpl 中更改

我已经从默认目录中复制了它

# iphone - iPhone App 的 PhoneGap 播放列表问题

> ID：11348984
> 
> 赞同：0
> 
> 时间：2012-07-05T16:53:39.493
> 
> 标签：iphone, cordova, playlist

我正在创建一个有趣的小应用程序来将一些 mp3 文件播放到 PhoneGap 应用程序中我已经设法在后台播放音频，非常感谢 StackOverflow 上的帮助

但是现在的问题是当应用程序在后台运行时，或者应用程序被锁定时，下一首歌曲无法播放。我已经编写了播放下一首歌曲的代码

=======

```
$(".greyselected").each(function(i) {
if($(this).is(":visible"))
{
activetrackclass = $(this).attr("class").split(" ")[0];
return;
}
});

$("." + activetrackclass).each(function(i){
if($(this).hasClass("greyselected"))
{
fetchmp3($("." + activetrackclass + ":eq(" + parseInt(i+1) + ")").find(".partistname").text(), $("." + activetrackclass + ":eq(" + parseInt(i+1) + ")").find(".ptrackname").text(), $("." + activetrackclass + ":eq(" + parseInt(i+1) + ")").find(".ptrackurl").text(), $("." + activetrackclass + ":eq(" + parseInt(i+1) + ")").find(".spanduration").text(), "tracklist");

$("." + activetrackclass).removeClass("greyselected");
$("." + activetrackclass + ":eq(" + parseInt(i+1) + ")").addClass("greyselected");

$("#divplayer").slideDown("slow");
return false;
}
}); 
```

=======

grayselected 是当前正在播放的歌曲 activetrackclass 是一个变量，它保存了曲目项或曲目 div 的类 fetchmp3 是调用列表中下一个 mp3 文件的函数

所有 mp3 都托管在服务器上

当应用程序处于活动状态时，它播放得很好，但一旦进入后台，它只会播放正在播放的歌曲，然后停止，直到应用程序再次可见

一如既往地感谢您的宝贵帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:00:54.667

后台任务仅运行一段时间，然后操作系统将其杀死。如果您的应用程序未处于活动状态，则它不会永远运行，并且 ios 会在一段时间后停止它。

[http://www.macworld.com/article/1164616/how_ios_multitasking_really_works.html](http://www.macworld.com/article/1164616/how_ios_multitasking_really_works.html)

您可以通过在文件中指定`audio`模式来声明对后台播放的支持。[查看iphone 编程指南](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/iphoneappprogrammingguide.pdf)的第 60 页了解更多详细信息`UIBackgroundModes``Info.plist`

如果您的应用程序可以使用本机代码，您有很多选项来配置音频的行为。检查`Categories Express Audio Roles`下面的文档。

[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007875](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007875)

Apple 开发者论坛的一个老帖子

[https://devforums.apple.com/message/264397#264397](https://devforums.apple.com/message/264397#264397)

# linux - 使 Squid 对 3rd 方过滤器不可见

> ID：11348985
> 
> 赞同：1
> 
> 时间：2012-07-05T16:53:40.887
> 
> 标签：linux, proxy, filter, squid

我的 Squid 代理服务器在 CentOS 5.5 上启动并运行，配置最少，无需身份验证即可绕过互联网过滤，它工作正常，但令人惊讶地[`whatismyip.com`](http://www.whatismyip.com/)检测到我的代理，这完全是个坏主意！它还会检测我的 Squid 版本并显示我的真实 IP 地址！！：

```
您的 IP 地址是：91.99.XX
检测到的其他 IP：209.54.XX
检测到可能的代理：1.1 server.3p3r.com:3128 (squid/2.6.STABLE21)

```

我哪里做错了？有什么办法可以让 Squid 对这些 3rd 方过滤器和代理检测脚本不可见？

任何资源将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:37:57.110

Squid 将 X-Forwarded-For 标头添加到请求中。如果您的 Squid 版本是 3.1 或更高版本，您可以将“forwarded_for”选项设置为“delete”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T23:12:14.903

将此添加到 etc/squid/squid.conf 文件中：

```
via off

forwarded_for off

request_header_access Allow allow all 

request_header_access Authorization allow all 

request_header_access WWW-Authenticate allow all 

request_header_access Proxy-Authorization allow all 

request_header_access Proxy-Authenticate allow all 

request_header_access Cache-Control allow all 

request_header_access Content-Encoding allow all 

request_header_access Content-Length allow all 

request_header_access Content-Type allow all 

request_header_access Date allow all 

request_header_access Expires allow all 

request_header_access Host allow all 

request_header_access If-Modified-Since allow all 

request_header_access Last-Modified allow all 

request_header_access Location allow all 

request_header_access Pragma allow all 

request_header_access Accept allow all 

request_header_access Accept-Charset allow all 

request_header_access Accept-Encoding allow all 

request_header_access Accept-Language allow all 

request_header_access Content-Language allow all 

request_header_access Mime-Version allow all 

request_header_access Retry-After allow all 

request_header_access Title allow all 

request_header_access Connection allow all 

request_header_access Proxy-Connection allow all 

request_header_access User-Agent allow all 

request_header_access Cookie allow all 

request_header_access All deny all 
```

# c# - C# 垃圾收集器似乎过早地关闭了我的 StreamWriter

> ID：11348987
> 
> 赞同：7
> 
> 时间：2012-07-05T16:53:47.683
> 
> 标签：c#, .net, singleton, garbage

我有一个单例记录器类。在它的析构函数中，我调用 Close() 打印日志的页脚，然后关闭 StreamWriter。

```
 public void Close()
    {
        WriteLogFileFooter();

        _logFile.Flush();

        _logFile.Close();
    } 
```

问题是当 System.Enviornment.Exit(1) 从程序的其他地方（我自己没有编写的部分）调用时，页脚永远不会打印，并且我的记录器会抛出一个尝试写入封闭流的异常。我只能假设 Exit 命令导致我的 StreamWriter 在我的 Singleton 被破坏之前关闭。我尝试在我的 StreamWriter 上使用 GC.SupressFinalize() 但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T17:03:23.380

您违反了终结器的一项明确规则：

> Finalize 方法不应引用任何其他对象。

[http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=VS.90).aspx)

完全有可能在应用程序退出时收集您的对象之前收集您持有引用的托管对象。

**更新**

如果您需要在应用程序退出时清理托管资源，您可以连接 AppDomain 的[ProcessExit](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx)事件，而不是依赖终结器执行的非确定性行为。

[.NET 控制台应用程序退出事件](https://stackoverflow.com/questions/1119841/net-console-application-exit-event)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T16:59:10.070

你应该让你的记录器实现`IDisposable`，并在一个`using`块中使用它。这意味着它将被确定性地处置，而现在它正在被非确定性地破坏。

错误的原因是您的流有时会在记录器之前关闭，因为`Exit`基本上会破坏所有内容（不确定地）并退出。您应该使用确定性模式 ( `IDisposable`) 来避免这种情况。

实际上，析构函数在 C# 中很少有用，确切的原因是它们是非确定性的。它们只值得用于释放非托管资源。

此外，实现`IDisposable`可能会使使用单例变得不方便。我个人认为最好创建一个在整个程序中使用并在最后处理的实例，而不是显式的单例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:38:58.077

正如其他人已经明确指出的那样，您根本不应该尝试`_logFile`从您的记录器类的终结器访问您的对象。您不应该访问终结器中的任何其他对象，因为垃圾收集器可能已经将它们清除了。

我认为您可以通过几个简单的步骤来避免您的问题：

1.  摆脱当前的终结器。

2.  在每次写入后执行`_logFile.Flush`一次，而不是等到 logger 对象的生命周期结束时可能已经太晚了。

    频繁刷新日志文件流对我来说似乎是合法的，因为拥有日志的全部意义在于使用它来查找和处理发生错误的情况。如果你的进程因异常情况突然终止，你的日志仍应尽可能完整；因此，经常刷新日志流缓冲区似乎是明智之举。

3.  使您的记录器实现`IDisposable`（[这篇 MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/cc163392.aspx)将向您解释这是如何完成的）并从那里关闭您的日志文件流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T07:53:29.167

我有同样的问题，我的解决方案如下：

1.  在您的类`FileStream`的*构造函数*中创建时`GC.SuppressFinalize`立即使用。这使您负责清理流

2.  *关闭*`Dispose()`类中的流

```
public class LogFileEventListener : IDisposable
{
    private bool disposed = false;
    private FileStream fileStream;

    public LogFileEventListener(string path)
    {
        //Opens a new file stream to log file
        this.fileStream = new FileStream(path, FileMode.Append, FileAccess.Write);
        GC.SuppressFinalize(this.fileStream);
    }

    /// <summary>Finalize the listener</summary>
    ~LogFileEventListener() { this.Dispose(); }

    /// <summary>Disposes the listener</summary>
    public override void Dispose()
    {
        try
        {
            if (!this.disposed)
            {
                /* Do you stuff */

                //Close the log file
                if (this.fileStream != null)
                {
                    this.fileStream.Close();
                    this.fileStream = null;
                }

                base.Dispose();
            }
        }
        finally
        {
            this.disposed = true;
            GC.SuppressFinalize(this);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-05T17:01:43.047

很可能`StreamWriter`正在其他地方关闭。尝试在单例的构造函数中创建一个附加`StreamWriter`项，写入几次（以确认它正在工作），然后在调用 close 之前在析构函数中再次写入它（close 也会刷新）。

如果上述方法有效，那么您将知道其他一些代码正在关闭您的日志。如果它不起作用，那么您将知道它是一个 .NET 事物（可能与引用变量的方式/位置有关）。

根据[文档](http://msdn.microsoft.com/en-us/library/66x5fx1b.aspx)`StreamWriter`，您应该能够通过将 放入基类来解决此问题。这当然对您不起作用，因为您的测试用例不是标准的最终确定，而是程序退出，这意味着 .NET 在需要时做它想做的事情。相反，您应该捕获退出事件，处置此类，然后返回，以确保以正确的顺序处置事物。您还应该检查`StreamWriter`终结器中是否已经关闭，以防程序由于错误而中止。

# ios - 从视图控制器启动 coco2d OpenGL 视图

> ID：11348988
> 
> 赞同：1
> 
> 时间：2012-07-05T16:53:50.240
> 
> 标签：ios, opengl-es, cocos2d-iphone

通常，coco2d OpenGL 视图是从 appdelegate 启动的。

方法1：从appdelegate luanching

```
- (void) applicationDidFinishLaunching:(UIApplication*)application
 {

  // Init the window
window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Try to use CADisplayLink director
// if it fails (SDK < 3.1) use the default director
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeDefault];

CCDirector *director = [CCDirector sharedDirector];

// Init the View Controller
viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
viewController.wantsFullScreenLayout = YES;

//
// Create the EAGLView manually
//  1\. Create a RGB565 format. Alternative: RGBA8
//  2\. depth format of 0 bit. Use 16 or 24 bit for 3d effects, like CCPageTurnTransition
//
//
EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                               pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                               depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                    ];

// attach the openglView to the director
[director setOpenGLView:glView]; 
```

但我需要能够从视图控制器启动 OpenGL 视图，所以，在我的视图控制器的 viewdidload 函数中，我这样做了

方法2：从视图控制器启动 - (void)viewDidLoad {

```
 [super viewDidLoad];

self.view.frame = CGRectMake(0, 0, 320, 480);

// Create an CCGLView with a RGB565 color buffer, and a depth buffer of 0-bits
CCGLView *glView = [CCGLView viewWithFrame:CGRectMake(0,0,320,480)
                               pixelFormat:kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                               depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0];

director_ = (CCDirectorIOS*) [CCDirector sharedDirector];

director_.wantsFullScreenLayout = YES;

// Display FSP and SPF
[director_ setDisplayStats:YES];

// set FPS at 60
[director_ setAnimationInterval:1.0/60];

// attach the openglView to the director
[director_ setView:glView];

// for rotation and other messages
[director_ setDelegate:self];

// 2D projection
[director_ setProjection:kCCDirectorProjection2D];
// Run the intro Scene

[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

// and add the scene to the stack. The director will run it when it automatically when the view is displayed.
[director_ pushScene: [helloworld scene]]; 
```

方法 2 不工作我没有看到任何场景，什么也没有出现。所以问题是如何从视图控制器中显示 OpenGL 视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:49:37.607

您是否尝试过类参考[attachInView:](http://www.cocos2d-iphone.org/api-ref/0.99.3/interface_c_c_director.html#af728734e51b9fb98075217ffddd65241)方法？

它的形式

```
[director_ attachInView:self.view]; 
```

否则你可以通过

```
[self.view addSubview:director_.view]; 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T14:39:27.167

因为 CCDirectorIOS 继承了 CCDirector 类，而 CCDirector 类又继承了 uiviewcontroller 类，并且我假设您使用的是 uinavigationcontroller，因此只需将 director_ 类推到最后 viewdidload

[self.navigationController pushViewController:director_animated:YES];

# python - 如何在不访问数据库的情况下重新排序 memcache

> ID：11348989
> 
> 赞同：1
> 
> 时间：2012-07-05T16:53:55.027
> 
> 标签：python, google-app-engine, memcached, google-cloud-datastore

我正在使用 jinja2 作为模板系统在 python 中的谷歌应用引擎上编写一个 Web 应用程序，该应用程序基本上允许用户编写帖子/评论并对其他用户的帖子进行排名。排名系统基于赞成/反对票的数量和评论的数量。我正在尝试使用 memcache 存储此计算值并相应地对帖子进行排名。

我只想偶尔将值存储在数据库中，以免写入成本昂贵。我计划每 10 票/评论有一个计数器并将其存储在数据库中。我在想这样的事情：

```
# I update the counter every time that I add a vote or comment
counter = 0
def posts_cache(update = False):
        global counter
        key = 'main'
        posts = memcache.get(key)
        if posts is None or update:
                logging.error("DB QUERY")
                posts = db.GqlQuery("SELECT * "
                                        "FROM Post "
                                        "ORDER BY rank DESC "
                                        "LIMIT 100",
                                         key)
                posts = list(posts)
                memcache.set(key, posts)
        if counter>=10:
                counter = 0
                #put the memcache posts in the database
        return posts 
```

但我不确定如何获取我在 memcache 中的帖子并将它们存储在数据库中。有没有办法在python中做到这一点？我浏览了文档，但没有找到明确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:02:30.850

1.  你**不能**这样做，因为 memcache 在某种意义上是不可靠的，它可以驱逐你的实体，而不是你会丢失数据。
2.  批量存储实体不会降低您的成本，您只需按放置的实体付费。
3.  为了降低您的写作成本，请尝试在不需要索引的属性上设置 indexed=false。

# jsp - 包含的jsp中的变量？

> ID：11348991
> 
> 赞同：0
> 
> 时间：2012-07-05T16:54:07.850
> 
> 标签：jsp, variables, include

我有一个 JSP 文件，其中包含另一个 JSP 文件。在他们两个中，我都需要一个特殊的变量。这是包含另一个 JSP 的 JSP 代码的一部分：

```
<%String logged = request.getParameter("logged");
out.print(
 "<h3> Auftragliste </h3>" + "Eingeloggt als: "
+ logged
+ "<br /><hr /><br />");
%>

<!-- DAS IST DIE EIGENTLICHE AUFTRAGLISTE, INNERHALB DES DIVS -->
<div id="AutoUpdte">
    <jsp:include page="AuftragListe.jsp" />
</div> 
```

这个“记录”的请求工作正常。现在这里是包含的 JSP 的一部分：

```
+ "<form method='POST' "
        + "name='Auftrag"
        + i
        + "' action='Annehmen'>"
        + "<input type='hidden' name='ID' value='"
        + auftraege.get(i).ID
        + "' />"
        + "<input type='hidden' name='von' value='"
        + auftraege.get(i).von
        + "' />"
        + "<input type='hidden' name='nach' value='"
        + auftraege.get(i).nach
        + "' />"
        + "<input type='hidden' name='object' value='"
        + auftraege.get(i).object
        + "' />"
        + "<input type='hidden' name='reward' value='"
        + auftraege.get(i).reward
        + "' />"
        + "<input type='hidden' name='logged' value='"
        + logged
        + "'>"
        + "<center>"
        + "<input class='auftragannehmen' type='submit' value=''/> "
        + "</center>"
        + "</form>" 
```

在这个 JSP 中，我像上面那样请求变量“logged”。但是当我单击按钮并且表单开始下一步时无法访问“记录”变量。

我的错误在哪里？

谢谢！

编辑：包含的 JSP 绝对不能访问该变量。但是它如何访问这个变量呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:16:47.090

使用请求属性传递“记录”值

```
request.setAttribute("myLogged",logged); 
```

读取包含的 JSP 文件中的属性值，如下所示：

```
String logged = request.getAttribute("myLogged"); 
```

要不就

```
 ${myLogged} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:07:21.653

请求通常用于存储处理请求的所有 servlet 和 JSP 必须能够访问的属性。但是在这里，它是不必要的，因为变量是请求参数的值。就像`request.getParameter("logged")`在父 JSP 中一样使用。

也就是说，您似乎完全忽略了使用 JSP 的要点，即避免使用 Java 代码和丑陋的字符串连接（可以直接从 servlet 完成）生成 HTML 标记。学习 JSTL 和 JSP EL，并避免像 JSP 中的瘟疫一样的 scriptlet。例如，您的第一个 scriptlet 应重写为：

```
<h3> Auftragliste </h3>
Eingeloggt als: <c:out value="${param.logged}"/>
<br /><hr /><br /> 
```

请注意，`<c:out>`此处的使用确保参数正确地进行了 HTML 转义，从而避免了各种 XSS 攻击。

# android - Android - 将 JAR 文件添加到 Eclipse（hotpotato API）

> ID：11348992
> 
> 赞同：0
> 
> 时间：2012-07-05T16:54:07.860
> 
> 标签：android, eclipse, api, jar, pipeline

我遇到了这个问题，并尝试在 Eclipse 中搜索和做教程。但是，在我的项目中使用这个 .jar 文件对我来说并没有什么帮助。

来源：[https ://github.com/brunodecarvalho/hotpotato](https://github.com/brunodecarvalho/hotpotato)

具体来说，我下载了这个jar文件，通过将jar文件复制到我的源文件夹中成功地将其添加到我的项目中，然后通过执行添加它（属性->添加jars->并添加它）。我也做了一个项目-> 清洁。

然后，一旦我按照示例中所示开始编码，它就会给我错误，这证明添加 Jar 文件不成功。

我尝试了不同的 Eclipse 工作区，但仍然没有运气。

如果我在这里解释我想要做什么，我正在开发一个 Android 下载管理器项目。我需要做的是创建到请求 URL 的管道连接，以便我可以并行下载数据包。

请帮我找出我的错误。谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:02:36.420

您可以尝试以下方法：

从构建路径中删除 jar - 并在项目根目录下创建一个名为 libs 的文件夹，与 src / bin / etc 处于同一级别。

然后把你的库放在那里，如果你在 Eclipse 中可能会出现构建路径问题，但我相信一切都应该从那里自动解决。

过去，我将 jar 放在 libs 文件夹中，并从那里将其添加到构建路径中。

它是在 IDE 中出错还是在运行时出错？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:10:47.570

并非所有 Java 库都与 Android 兼容。做 RenegadeAndy 在这里写的，如果这不起作用，那么 lib 可能真的与 Android 不兼容。请记住，Android 不是真正的 Java 实现。

# jquery - safari mobile 上的 z-index

> ID：11348999
> 
> 赞同：3
> 
> 时间：2012-07-05T16:55:11.750
> 
> 标签：jquery, html, css, mobile-safari

我正在制作一个网络应用程序。当我显示叠加层时，它会覆盖我的整个屏幕，甚至是 z-index 更大的元素。当我 console.log z-indexes 时，覆盖为 20，内容为 80。

现在，我想要在前面的 div 嵌套在另一个 div 中。这可能是问题吗？它适用于所有浏览器（FF、safari、chrome），除了移动 safari（iPhone）。

```
<body>
<div id="overlay"></div>
<div id="content">
 <div id="thisInFront"></div>
</div>
</body>

$("#overlay").fadeIn();
$("#thisInFront").animate({"top":"60%"},1000); 
```

有没有办法让那个 DIV 在前面？或者我是否必须嵌套我的 DIV？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:59:09.250

这是适用于 iOS Safari 的解决方案：http: [//jsfiddle.net/ansonhoyt/E8yyH/](http://jsfiddle.net/ansonhoyt/E8yyH/)

元素默认为`position: static`. 为了应用 z-index，您需要使用以下内容将元素从静态页面中拉出：`#thisInFront {position: relative}`。jsfiddle 示例显示了一个`#overlay`覆盖整个视口的固定位置，`#thisInFront`并在其上方凸起。在 iPhone 4S 上的 iOS Safari 6.0 上验证。

![jsfiddle的截图](../Images/4555636f5c4f4e1b870e71c41a3e01d8.png)

[W3cschools.com 将静态位置定义](http://www.w3schools.com/cssref/pr_class_position.asp)为：“元素按顺序呈现，就像它们出现在文档流中一样”

看看这个问题，[z-index 的行为不像我预期的那样](https://stackoverflow.com/questions/389788/z-index-not-behaving-as-id-expect)。这没有覆盖，但适用相同的规则。